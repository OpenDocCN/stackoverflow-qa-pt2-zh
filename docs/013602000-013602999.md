# StackOverflow 问答 13602000-13602999

# java - Java 递归如何

> ID：13602003
> 
> 赞同：1
> 
> 时间：2012-11-28T09:39:20.507
> 
> 标签：java, algorithm, recursion

我有一个只存储两个整数的类：

```
public class Item
{
    private int from;
    private int to;

    public Item(int from, int to)
    {
        this.from = from;
        this.to = to;
    }
    getters and setters
} 
```

在运行时，我将创建这些项目的列表。该列表将包含 1 到 21 个值。然后我需要遍历这些值并进行一些处理。例如：

```
public void validate()
{
    List<Item> items = new ArrayList<Item>();
    items.add(new Item(1,3));
    items.add(new Item(11,13));
} 
```

或者：

```
public void validate()
{
    List<Item> items = new ArrayList<Item>();
    items.add(new Item(1,3));
    items.add(new Item(11,13));
    items.add(new Item(21,23));
} 
```

然后我需要循环这些值。显然我不知道要循环多少级，所以我不能硬编码一个循环。如果可以的话，循环将如下所示：

```
public void loop()
{
    String str;
    for(int i = 1; i < 3; i++)
    {
        str = "-" + i;
        for(int j = 11; j < 13; j++)
        {
            str = str + "-" + j;
            do stuff with str;
        }
    }
} 
```

我需要在这里测试的输出是：

-1-11
-1-12
-1-13
-2-11
-2-12
-2-13
-3-11
-3-12
-3-13

第二个例子是：

```
public void loop()
{
    String str;
    for(int i = 1; i < 3; i++)
    {
        str = "-" + i;
        for(int j = 11; j < 13; j++)
        {
            str = str + "-" + j;
            for(k = 21; k < 32; k++)
            {
                str = str + "-" + k;
                do stuff with str;
            }
        }
    }
} 
```

我需要在这里测试的输出是：

-1-11-21
-1-11-22
-1-11-23
-1-12-21
-1-12-22
...
-2-11-21
-2-11-22
...
-3 -13-21

因为我不知道有多少个循环，所以我想我需要使用递归。但是，我不知道如何在递归的内部循环中“用 str 做事”，我开始认为这是不可能的。

这就是我在这里尝试的方式：

```
private void recursiveExplore(List<Item> items, int depth)
{
    if (depth == 0) return;

    for (Item item : items)
    {
        for (int i = item.getFromParameterId(); i < item.getToParameterId(); i++)
        {
             do stuff here?
        }
        recursiveExplore(items.subList(items.size() - depth, items.size()), depth - 1);
    }
}

public void validate()
{
    recursiveExplore(items, items.size());
} 
```

任何帮助表示赞赏。

ETA SSCCE：

```
import java.util.ArrayList;
import java.util.List;

public class MyTest
{
    private class Item
    {
        private int from;
        private int to;

        public Item(int from, int to)
        {
            this.from = from;
            this.to = to;
        }

        public int getFrom()
        {
            return from;
        }

        public int getTo()
        {
            return to;
        }
    }

    public void validate2()
    {
        List<Item> items = new ArrayList<Item>();
        items.add(new Item(1, 3));
        items.add(new Item(11, 13));

        String str;
        for (int i = items.get(0).getFrom(); i <= items.get(0).getTo(); i++)
        {
            for (int j = items.get(1).getFrom(); j <= items.get(1).getTo(); j++)
            {
                str = "-" + i + "-" + j;
                System.out.println(str);
            }
        }
    }

    public void validate3()
    {
        List<Item> items = new ArrayList<Item>();
        items.add(new Item(1, 3));
        items.add(new Item(11, 13));
        items.add(new Item(21, 23));

        String str;
        for (int i = items.get(0).getFrom(); i <= items.get(0).getTo(); i++)
        {
            for (int j = items.get(1).getFrom(); j <= items.get(1).getTo(); j++)
            {
                for (int k = items.get(2).getFrom(); k <= items.get(2).getTo(); k++)
                {
                    str = "-" + i + "-" + j + "-" + k;
                    System.out.println(str);
                }
            }
        }
    }

    public static void main(String[] args)
    {
        MyTest test = new MyTest();
        test.validate2();
        test.validate3();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:52:21.537

在检查你的循环之后，我设想你最终需要在两者之间更新`str`变量`-`。如果是这样，那么你就在写轨道上。

```
private void recursiveExplore(List<Item> items, int depth, int str) {
    if (depth == 0) return;

    for (Item item : items) {
        for (int i = item.getFromParameterId(); i < item.getToParameterId(); i++) {
             str += "-" + i;
        }
        // Just need to concatenate the output of nested call
        str += recursiveExplore(items.subList(items.size() - depth, items.size()), depth - 1, str);
    }
    return str;
}

public void validate() {
    String finalStr = recursiveExplore(items, items.size(),"");
} 
```

没试过，但可能需要稍微调整一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:17:46.177

在一位同事的帮助下，我已经完成了我需要的代码（见下文）。它不是很完整，但主要结构就在那里。
感谢您的所有帮助，如果没有您的帮助，我也无法做到这一点。

```
public void validateFiles()
{
    List<String> outputList = new ArrayList<String>();
    recursiveCompile(items, 0, null, outputList);
}

private void recursiveCompile(ArrayList<Item> items, int itemIndex,
        String compilation, List<String> outputList)
{
    if (itemIndex < items.size())
    {
        /* Get the item from the list. */
        Item item = items.get(itemIndex);
        /* Prepare the variables for the descent. */
        itemIndex++;
        if (compilation == null) compilation = "";
        /* Descend for each value in the from/to range. */
        for (int i = item.getFromParameterId(); i <= item.getToParameterId(); i++)
        {
            String s = compilation + "-" + item.getNextValue();
            recursiveCompile(items, itemIndex, s, outputList);
        }
    }
    else
    {
        /*
         * The bottom has been reached. Add the compiled string to the
         * output list and ascend (return).
         */
        outputList.add(compilation);
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:45:49.003

也许你想要这样的东西

```
public class Item(){}

public class ListItem extends Item(){} //here you have a List of items
public class ObjectItem extends Item() {} //here you have only one item 
```

因此，您可以使用 instanceof 运算符进行递归搜索。

# asp.net - 如何启用 默认情况下在 Windows Azure 上？

> ID：13602004
> 
> 赞同：3
> 
> 时间：2012-11-28T09:39:22.537
> 
> 标签：asp.net, deployment, azure, machine.config

似乎使用**<deployment retail="true" />**是 ASP.NET 应用程序公认的最佳实践，但它似乎在 Windows Azure 上默认不启用。是否可以在 Web 角色和/或网站上默认启用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:21:19.593

我想你会用启动任务来做到这一点。在此处查看@smarx 的答案：[在 Azure 计算实例上修改 machine.config](https://stackoverflow.com/questions/7777395/modifying-machine-config-on-azure-compute-instances)

> 运行 appcmd 的批处理文件可能是对 IIS 设置执行此操作的最简单方法。

一些资源：

[MSDN：如何为角色定义启动任务](http://msdn.microsoft.com/en-gb/library/windowsazure/gg456327.aspx)

[Azure：如何在 webrole 上为每个站点条目执行启动任务？](https://stackoverflow.com/questions/9189638/azure-how-to-execute-startup-tasks-for-each-site-entry-at-webrole)

[在您的 Windows Azure Web 角色中利用启动任务的力量](http://windowsazurecat.com/2011/01/utilizing-the-power-of-startup-tasks-in-your-windows-azure-web-role/)

而且，特定于从启动任务管理 machine.config：

[https://github.com/Aaronontheweb/azure-webroleperformance-scripts](https://github.com/Aaronontheweb/azure-webroleperformance-scripts)

# css - 如何将粘性菜单放在滑块顶部

> ID：13602006
> 
> 赞同：0
> 
> 时间：2012-11-28T09:39:28.603
> 
> 标签：css, drop-down-menu, slider, z-index

我的粘性菜单没有显示在滑块的顶部 iv 试图将 z-index 放在滑块和菜单上，但它不起作用:(在 chrome 中 - 在 Firefox 中它有效。

我怎样才能让它工作？
这是我的网站：[http ://crepes.salescaredev.nl/](http://crepes.salescaredev.nl/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:50:54.027

窗口顶部的简单粘性菜单栏检查此 URL，它可能会有所帮助

[http://www.backslash.gr/content/blog/webdevelopment/6-navigation-menu-that-stays-on-top-with-jquery](http://www.backslash.gr/content/blog/webdevelopment/6-navigation-menu-that-stays-on-top-with-jquery)

# java - 计算一秒钟内Android的线性加速度传感器值的数量

> ID：13602012
> 
> 赞同：0
> 
> 时间：2012-11-28T09:39:45.687
> 
> 标签：java, android, sensors

任何人都可以帮助解决这个问题。如何计算一秒钟内Android的线性加速度传感器值的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:22:29.343

注册您`SensorListener`的线性加速度传感器。对于检索到的每个值，除了增加值的总数之外，您还可以使用`SimpleDateFormat`检查时间之类的方法，如果添加每个值之间的时间，则可以在超过 1 秒时停止循环。

`System.currentTimeMillis()`如果你只是测试，会更容易。

# android - 收到 GCM 通知时启动应用程序

> ID：13602014
> 
> 赞同：5
> 
> 时间：2012-11-28T09:39:51.867
> 
> 标签：android, android-intent, android-c2dm, google-cloud-messaging

我有 GCM 通知实现。我知道客户端应用程序无论是处于前台、后台还是已终止状态都会收到通知。我想知道的是，当应用程序处于终止状态时，如何在收到通知时启动我的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T12:40:32.237

在消息接收器中，我执行以下操作：

```
final Intent notificationIntent = new Intent(context, YourActivity.class);
notificationIntent.setAction(Intent.ACTION_MAIN);
notificationIntent.addCategory(Intent.CATEGORY_LAUNCHER); 
```

此处将 YourActivity.class 替换为入口活动。这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:46:23.843

您可以使用 NotificationManager 开始您的活动。

尝试在**onMessage()方法中使用以下代码，这是扩展 GCM 的****GCMBaseIntentService**类的类中的重写方法。

```
int icon = R.drawable.your_app_icon;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, YOUR_ACTIVITY.class);
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        // notificationIntent.putExtra("PostName", vPostText);
        // Log.i(TAG, "Sent Postid " + postid);

        // Util util = (Util) context.getApplicationContext();
        // util.setPostID(postid);
        // util.setNotify(true);
        // util.setUserNAME(vPortCode);
        // util.setPostNAME(vPostText);
        // util.setmEDIA(vMedia);
        // util.setmEDIATHHUMB(vMediaThumb);
        // util.setmEDIATYPE(vMediaType);
        // util.setAirportName(vAirportName);

        notificationIntent.putExtra("Set_image", true);
        notificationIntent.putExtra("Notify", true);

        // set intent so it does not start a new activity
        // notificationIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
        // notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        // notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        // | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context,
                (int) System.nanoTime(), notificationIntent, 0);

        notification.setLatestEventInfo(context, title, message, intent);
        notification.defaults |= Notification.DEFAULT_SOUND;
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify((int) System.nanoTime(), notification); 
```

# c# - Windows 服务，底层提供程序在打开时失败

> ID：13602016
> 
> 赞同：1
> 
> 时间：2012-11-28T09:39:53.393
> 
> 标签：c#, .net, windows-services

我有一个 Windows 服务正在运行，当它尝试连接数据库时，我遇到了一个异常：“底层提供程序在打开时失败”。相同的服务在 Windows Server 2008 R2 上运行良好，但在我的装有 Windows7 的计算机上不起作用。

我尝试使用集成安全性和没有集成安全性，这是同样的问题。

我试图通过更改连接字符串来连接 Windows Server 2008 R2 上的数据库，但它不起作用。

该服务使用了 Visual Studio 安装程序（.vdproj），但我使用 installshield LE Spring 2012 时遇到了同样的错误。

该数据库由 .NET MVC3 项目使用，并且连接工作正常。

如何解决此连接错误？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T09:51:40.610

windows服务没有足够的权限连接数据库，所以我将角色“sysadmin”添加到NT AUTHORITY\System用户并且异常消失了！

谢谢马杜山的帮助:)

# php - 在 PHP 中将 MYSQL 资源指针显示为超链接

> ID：13602022
> 
> 赞同：2
> 
> 时间：2012-11-28T09:40:16.527
> 
> 标签：php, fetch

我正在尝试将 MYSQL 选择计数的结果显示为 PHP 中的超链接。

当我将结果输出为纯文本时，它适用于这一行。

`Print"<th>Meeting count:</th> <td>".mysql_result($result2,0) . "</td> ";`

但是当我在超链接中尝试它时，它要么出现资源指针 ID，要么完全空白。

这是我目前正在尝试使用 mysql_fetch_assoc 的行。

```
$rec = mysql_fetch_assoc($result2,0);
Print "<td><a href='userprofile3.php?profileID=$profileID'>$rec</a></td>"; 
```

我有一种感觉，我在这行中缺少一个角色

profileID 是从我的其他查询生成的

```
$profileID = $info['userID']; 
```

这是生成计数的查询

$result2 = mysql_query("select count(meetingCode) FROM meeting where meeting.userID = $profileID AND SUBSTRING( meetingCode, 5, 2) BETWEEN 12 AND 22 AND SUBSTRING( meetingCode, 7, 2) BETWEEN 1 AND 12 AND SUBSTRING( meetingCode , 9, 2 ) 01 到 31");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:43:44.553

您正在使用`mysql_fetch_assoc()`（顺便说一下，它只需要一个参数！您正在运行而没有 PHP 错误，所以您可能没有看到它）获取一个关联数组。这**不是**字符串/字符串可转换的变量。

但是，它所拥有的是 format 中所有列的名称`$rec['columnName']`。我无法更正您的代码，因为我不知道您的列的名称，但您应该很容易编辑您的代码。但是，有一件事-如果您不连接，则需要使用`{$rec['columnName']}`.

最后一件事。所有`mysql`函数都已被弃用，取而代之的是 PDO 和 MySQLi。切换到他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:45:20.533

mysql_fetch_assoc 返回一个数组，不能直接输出。根据你的查询，你想做$rec['columnName']，例如SELECT name FROM users 会给你$rec['name']。

# jquery - 访问属性“ownerDocument”的权限被拒绝

> ID：13602025
> 
> 赞同：1
> 
> 时间：2012-11-28T09:40:25.453
> 
> 标签：jquery, cross-domain

诚然，这是一个令人厌烦的话题，但我完全陷入困境：

我正在尝试使用 jquery autoheight 插件（[https://github.com/house9/jquery-iframe-auto-height](https://github.com/house9/jquery-iframe-auto-height)）和 jQuery v1.7 将 iframe 的高度设置为其内容高度。

由于跨域问题，我构建了一个（curl-）包装器，因此所有内容都在同一个域中。iframe 的 html 标记如下所示：

```
<iframe scrolling="no" frameborder="0" src="/de/pressrelease/proxy/?uri=<my-uri>"></iframe> 
```

不幸的 jquery 吐出这个错误：[错误：访问属性'ownerDocument'的权限被拒绝]

我已经做了很多研究，例如检查了这个问题：[Permission denied to access property in IFRAME](https://stackoverflow.com/questions/6690598/permission-denied-to-access-property-in-iframe)

甚至尝试在 iframe 源中设置绝对 uri - 同样的错误。

来自父文档的响应头：

```
Date: Wed, 28 Nov 2012 09:42:11 GMT
Server: Apache
X-Powered-By: PHP/5.3.18-nmm1
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 3554
Keep-Alive: timeout=1, max=100
Connection: Keep-Alive
Content-Type: text/html

200 OK 
```

curl-proxy-wrapper (iframe) 的标头：

```
Date: Wed, 28 Nov 2012 09:42:07 GMT
Server: Apache
X-Powered-By: PHP/5.3.18-nmm1
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 4102
Keep-Alive: timeout=1, max=100
Connection: Keep-Alive
Content-Type: text/html

200 OK 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:55:02.597

折断！发现问题了！document.domain 被设置为错误的域...

# python - 面向零售商/分销商的 Python 网上商店

> ID：13602027
> 
> 赞同：4
> 
> 时间：2012-11-28T09:40:35.233
> 
> 标签：python, django, webshop

我的组织内部的销售部门要求我为我们的分销商/零售商建立一个网上商店。我想知道是否有一个基于 Python/Django 的网上商店？

我发现它比普通的网上商店复杂得多，因为：

1.  客户被分组 - A、B、C
2.  一组产品的折扣取决于他们购买每种产品的数量，比如说 1-100 件：4 美元 101-200 件：5 美元

但是另一组得到了完全不同的价格。

从数学上讲，这成为组合的一个阶乘问题，因此客户的可能组合 - 每选定数量的物品的价格 - 组 - 产品立即变得巨大。

我的猜测是最好这样做： 1\. 为产品设定购买价格 2\. 为每个购买量添加最低保证金：1-100 等等。这样，至少没有客户可以得到比我们更低的利润。3.然后根据客户所属的组，在1和2的顶部再添加一个边距。 4.当他们在购物篮中添加不同数量的商品时，将产品以不同的价格显示在网页上。

这会创建基于计算而不是固定价目表的价格，但它应该有效吗？

有没有人为此在 Python 中有一个可用的 FOSS 网店？有任何想法吗？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:18:48.063

[mezzanine](http://mezzanine.jupo.org/)看起来像是一个很棒的项目，它使用[Cartridge](http://pypi.python.org/pypi/Cartridge)作为它的购物车模块。他们有一个非常好的[演示站点](http://mezzanine.jupo.org/blog/?t=13540978075)，您可以作为最终用户和管理员使用它来编辑产品和价格。Django 包还有一个值得一看的[电子商务页面](http://www.djangopackages.com/grids/g/ecommerce/)，它评估了一大堆不同特性的 django 包。我敢肯定，通过这两个资源，您至少会发现一些值得用作基础的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:12:03.330

你看过[**萨奇莫**](http://www.satchmoproject.com/)吗？

Satchmo 支持基于[用户组的折扣](http://www.satchmoproject.com/docs/dev/pricing.html#pricing-tiers)：

> Satchmo 支持根据用户群设置不同的价格和折扣等级。店主可能需要此功能的最常见原因是，如果他们想为一类用户提供不同的折扣或价格。例如，拥有“黄金”会员资格的用户可能会自动获得百分比折扣。另一个常见的用法是批发与零售定价。

[并且在订购一定数量](http://www.satchmoproject.com/docs/dev/discounts.html)时可能会激活折扣：

> 在产品变体上，价格可以有到期日期和/或数量。如果设置了这些字段中的任何一个，则该价格仅对在该日期之前下达的订单有效，或者 >= 该数量。

Satchmo 也被广泛使用，因此文档和社区都很好。

# jquery - e.srcElement 在 Firefox 中未定义？

> ID：13602039
> 
> 赞同：8
> 
> 时间：2012-11-28T09:41:10.590
> 
> 标签：jquery

我正在开发一个网站，现在正在所有浏览器中进行测试，我目前正在 Firefox 中进行测试，并且在使用 event.sourceElement 时发现并出错？

我需要 e.srcElement 做的是返回值，下面我展示了一个关于如何获取返回值 PropID 的示例。

我编写了一个使用 e.srcElement 的 Jquery 函数，它看起来如下：

```
$(function () {
        $(".DownloadLink").click(function (e) {
            e.preventDefault();

            var PropID = getParameterByName("PropID", e.srcElement.search),
                Token = getParameterByName("Token", e.srcElement.search),
                TrackingNumber = getParameterByName("TrackingNumber", e.srcElement.search);

            $.post("Valuation", { PropID: PropID, Token: Token, TrackingNumber: TrackingNumber}, function (taskId) {

                // Init monitors

                $("#dialog-modal").append($("<p id='" + taskId + "'/>"));
                updateMonitor(taskId, "Started");

                // Periodically update Modal
                var intervalId = setInterval(function () {
                    $.post("Progress", { id: taskId }, function (progress) {
                        if (progress < 50) {
                            updateMonitor(taskId, "Building File");
                        } else if (progress == 50) {
                            updateMonitor(taskId, "Uploading File to FormMobi");
                        } else if (progress >= 100) {
                            clearInterval(intervalId);
                            updateMonitor(taskId, "Complete");
                            window.location.href = "downloadcomplete";
                        }
                    });
                }, 100);
            });
        }); 
```

* * *

**e.srcElement 如何工作的示例：**

在 chrome 中进行测试并使用检查元素时，我可以发现以下行返回：

代码行：

> PropID = getParameterByName("PropID", e.srcElement.search)

返回结果：

> 搜索：“？PropID=77301&Token=74d30c0e-b4ab-4164-9dfd-f35fd7091cdc&TrackingNumber=367”

这样我就可以获得所需的 PropID 结果。

* * *

还有其他一些原因让我返回所需的值吗？或者我怎样才能让 e.srcElement 在 fireFox 中工作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-28T09:42:15.330

在 Firefox 中只需调用`e.target`工作即可。而不是`e.srcElement`[仅在 IE 中有效]

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-11T22:52:13.917

```
function getTarget(obj) {
    var targ;
    var e=obj;
    if (e.target) targ = e.target;
    else if (e.srcElement) targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;
    return targ;
} 
```

如果您传递它，将返回所有浏览器的目标 e

来自：- [http://www.quirksmode.org/js/events_properties.html](http://www.quirksmode.org/js/events_properties.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-11T11:29:21.277

简单如

```
var val= (e.srcElement||e.target).value;
console.log(val); 
```

# c# - 无法从数据网格更新项目“对象引用未设置为对象的实例。”

> ID：13602041
> 
> 赞同：2
> 
> 时间：2012-11-28T09:41:10.957
> 
> 标签：c#, wpf, entity-framework, data-binding, mvvm

我的应用程序存在问题，并且没有选择要使用 EF 更新的项目。

我正在为用户创建一个应用程序以输入他们的组织详细信息。看起来很简单。使用选项卡控件输入数据后，我有一个包含一系列数据网格的视图，使用户能够更新或插入另一条数据（如果需要）或能够删除。

在我的视图模型中，我有一系列不同的东西（这可能不是实现 MVVM 的最佳方式，但最终会尝试实现）。

我有我的属性实现`INOTIFYPROPERTYCHANGE`。保存、更新和删除的命令。还有我的实体方法（使用实体框架的 CRUD 操作 - 稍后当我了解有关 MVVM 等的更多信息时将使用存储库系统）。

到目前为止，我不得不使用视图的代码隐藏来加载我的数据，这些数据可以完美地工作（显然我不应该这样做，所以任何向我展示的建议将不胜感激）就像这样；

```
 private void Page_Loaded(object sender, RoutedEventArgs e)
    {
        DBEntities context = new DBEntities();

        var orgTypeDetails = (from o in context.OrganisationTypeDetails
                              select o).ToList();

        dgOrgTypeDetail.ItemsSource = orgTypeDetails;
    } 
```

我还有一个事件处理程序，它只允许您选择一行然后更新该特定行；

```
 private void btnUpdateOrgTypeDetail_Click(object sender, RoutedEventArgs e)
    {
        OrganisationTypeDetailViewModel org = new OrganisationTypeDetailViewModel();

        OrganisationTypeDetail selected = dgOrgTypeDetail.SelectedItem as OrganisationTypeDetail;

        if (selected == null)
            MessageBox.Show("You must select a 'Type' before updating.");
        else
        {
            OrganisationTypeDetailUpdateView update = new OrganisationTypeDetailUpdateView();

            update.ShowDialog();
    org.UpdateOrganisationTypeDetail(selected);
            Page_Loaded(null, null);
        }
    } 
```

最后，我的方法使用 View-Model 中的 EF 更新表；

```
 public void UpdateOrganisationTypeDetail(OrganisationTypeDetail orgTypeDetail)
    {
        using (DBEntities context = new DBEntities())
        {
            //var orgTD = context.OrganisationTypeDetails.Where(otd => otd.OrganisationTypeDetailID == OrganisationTypeDetailID).FirstOrDefault();

            var orgTD = (from a in context.OrganisationTypeDetails
                         where a.OrganisationTypeDetailID == OrganisationTypeDetailID
                         select a).FirstOrDefault();

            orgTD.OrganisationTypeDetailID = OrganisationTypeDetailID;
            orgTD.OrganisationTypeID = OrganisationTypeID;
            orgTD.Title = Title;
            orgTD.FirstName = FirstName;
            orgTD.Surname = Surname;
            orgTD.Position = Position;
            orgTD.DateOfBirth = DateOfBirth;
            orgTD.Address = Address;
            orgTD.Country = Country;
            orgTD.Postcode = Postcode;
            orgTD.PhoneNumber = PhoneNumber;
            orgTD.MobileNumber = MobileNumber;
            orgTD.FaxNumber = FaxNumber;
            orgTD.Email = Email;
            orgTD.NINumber = NINumber;

            context.OrganisationTypeDetails.ApplyCurrentValues(orgTD);
            context.SaveChanges();

            MessageBox.Show("Updated Organisation Type Details");
        } 
```

执行此应用程序时，它会生成一个`Null Reference exception`.

在我的属性中，为了确保它不会崩溃，我必须以编程方式设置 ID； `public int _OrganisationTypeDetailID=17;` 但是我希望能够根据自己的选择选择一行，而不是只能选择从 17 中获取该行。

我尝试过使用 Linq 和 Lamba 表达式，但似乎都不起作用。

很抱歉，如果阅读本文有很多内容需要了解，并且如果需要，我很乐意添加更多代码或解释:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:13:24.487

[如果查询没有返回任何结果， FirstOrDefault](http://msdn.microsoft.com/en-us/library/bb340482.aspx)返回类型的默认值，因此在 FirstOrDefault 之后检查结果是否为空。

它应该看起来像这样

```
 var orgTD = (from a in context.OrganisationTypeDetails
                         where a.OrganisationTypeDetailID == OrganisationTypeDetailID
                         select a).FirstOrDefault();

 if(orgTD == null)
   return; 
```

如果您确定该查询至少返回一个元素，请改用[First](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T14:41:14.670

我花了两周时间处理连接到 MySQL 数据库的 MS Visual Studio .NET 数据实体模型的类似问题。经过 StackOverflow、MySQL 和 MS 站点论坛和帮助资源的大量搜索和搜索，空引用错误的答案正如预期的那样相当简单，所以这里是：

我已经安装了 64 位 MySQL 服务器，但 MS Visual Studio 都是 32 位的。无论我做了什么 app.config 更改，无论我如何使用我的引用，无论我通过 Nuget 安装了多少包，除了卸载 MySQL 64 位之外，我都无法解决这个问题（确保你对现有的首先将数据库转换为模型，以便稍后重新加载它们），然后重新安装 MySQL 32 位。重新创建数据库，重新构建数据实体模型和数据源后，空引用错误得到解决。

所以...如果您将 MySQL 与 MS Visual Studio 一起使用，请确保您拥有 32 位 MySQL 产品。

（我做的另一件事可能会或可能不会影响结果是安装 Windows IIS 以访问 localHost - 但是，我认为这只是分散了真正问题的注意力，因此仅将其添加为最后的手段）。

# javascript - 显示所有值的 Javascript 数组

> ID：13602042
> 
> 赞同：3
> 
> 时间：2012-11-28T09:41:18.073
> 
> 标签：javascript, arrays

大家好，这里是我的代码，

```
function send()
{
  var param_count=document.getElementsByName('eqt_param[]');

  for (var i=0; i<param_count.length; i++)
  {
    var test=param_count[i].value;  
    var param_value='Eqt_Param'+i+'='+test;

    alert(param_value);
  }
} 
```

如果我收到 警报，`"Eqt_Param0=4.00"`但`"Eqt_Param1=3.00"`我想立即发出警报，输出应该类似于 `"Eqt_Param0=4.00,Eqt_Param1=3.00 "` 以这种方式发出警报后，我还想删除`','`中间如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:45:51.747

你是这个意思吗：

```
function send()
{
  var param_count=document.getElementsByName('eqt_param[]');
  var values = [];
  for (var i=0; i<param_count.length; i++)
  {
    values.push('Eqt_Param'+i+'='+param_count[i].value)
  }
  alert(values.join(', '));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:48:55.197

```
function send()
{
  var tempArray=[]; 
  var param_count=document.getElementsByName('eqt_param[]');

  for (var i=0; i<param_count.length; i++)
  {
     var test=param_count[i].value;  
     var param_value +='Eqt_Param'+i+'='+test;
     tempArray.push(param_value)

  }

    alert(tempArray.join(','));  //to join with ','
    var joinedstr=tempArray.join(',');
    var finalArray= joinedstr.split(',');  //to split with ','
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:50:30.703

`Array`有一些有用的功能可以让您的生活更轻松，`forEach`并且`join`.

```
function send()
{
  var toPrint = []
  document.getElementsByName('eqt_param[]').forEach( function(el, idx) {
    toPrint.append('Eqt_Param'+idx+'='+x.value);
  }
  alert(toPrint.join(', '));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:22:54.690

你不需要一个数组：

```
alert((function(array, string, _i, _len) {
    for(; _i < _len; _i++)
        string += 'Eqt_Param' + _i + ' = '+ array[_i].value + ", ";
    return string.substr(0, string.length -2);
    } (document.getElementsByName('eqt_param[]'), "", 0, document.getElementsByName('eqt_param[]').length))); 
```

# c# - 如何在 VisualStudio 2010 中使用 try/catch 包围代码块

> ID：13602044
> 
> 赞同：34
> 
> 时间：2012-11-28T09:41:24.220
> 
> 标签：c#, visual-studio, visual-studio-2010

我知道 Visual Studio 有一些工具可以快速包围代码片段，例如如何更快地尝试/捕获代码块。但我找不到执行此操作的热键组合。谁知道 try/catch 的热键组合？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-11-28T09:42:50.417

按“Ctrl + K, S”，然后在下拉菜单中双击“try”——这是一个“try-catch”模板。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-28T09:42:52.703

试试 Ctrl + K, Ctrl + S。
[来源](http://msdn.microsoft.com/en-us/library/6hf704tz%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-28T14:07:49.520

按 Ctrl + K，然后按 CTRL + S 键入 T 按 Enter 或 Tab

# git - Git：提交因其他分支落后而停止

> ID：13602047
> 
> 赞同：2
> 
> 时间：2012-11-28T09:41:33.407
> 
> 标签：git, branch, commit, pull, behind

我们最近在 Git 中采用了自己的分支系统，但最近让我们感到沮丧的一件事是，当尝试在一个分支上向远程提交更改时，Git 会停止提交，因为另一个分支在其远程对应的后面. 因此，我们必须检查每个已更改的分支并在返回原始分支进行提交之前先进行拉取。

是否有一个设置可以阻止 Git 因为其他分支而停止提交。我们可以采取某种方法来避免必须切换分支的需要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:47:00.037

尝试：

```
git config --global push.default current 
```

[它应该避免这里提到](http://jimkubicek.com/blog/2012/08/16/git-push-current-branch/)的那种错误信息

```
error: failed to push some refs to 'git@github.com:jkubicek/my_proj.git'
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. If you did not intend to push that branch, you may want to
hint: specify branches to push or set the 'push.default' configuration
hint: variable to 'current' or 'upstream' to push only the current branch 
```

# bash - Gvim 没有 sudo 就无法启动

> ID：13602053
> 
> 赞同：3
> 
> 时间：2012-11-28T09:42:04.013
> 
> 标签：bash, vim

我刚刚尝试打开 gvim 但它没有启动..它只是显示光标在运行后闪烁`$ gvim`。

我之前尝试过添加`sudo`，并且gvim已正确打开。

完成后`ls -all /usr/bin/gv*`我得到这条线：

```
lrwxrwxrwx 1 root root    22 Nov 28 10:31 /usr/bin/gvim -> /etc/alternatives/gvim 
```

任何想法？

在没有 sudo 的情况下启动 vim 没有任何问题。

**编辑**：最后问题是.bashrc 中的隐藏别名。请按“关闭”删除此问题。

Ubuntu 12.04

# python - python脚本的shell脚本中的命令行参数

> ID：13602054
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:42:08.840
> 
> 标签：python, shell

您能否指导我在这里做错了什么...该脚本仅在参数中的第一个空格之前获取值。

```
SENDING_MAIL_LISTENER=$PYTHON" ./rajesh/script.py -s "$SUBJECT_LISTENER" -p "$BODY_LISTENER" -r "$CONTACT_NAME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:47:12.277

您应该转义那些双引号：

```
SENDING_MAIL_LISTENER="$PYTHON ./rajesh/script.py -s \"$SUBJECT_LISTENER\" -p \"$BODY_LISTENER\" -r \"$CONTACT_NAME\"" 
```

# sql-server - SQL 将日期转换为 yyyy-mm-dd

> ID：13602056
> 
> 赞同：2
> 
> 时间：2012-11-28T09:42:14.187
> 
> 标签：sql-server, date

您将如何将日期转换为以下格式：

```
2012-10-16 07:44:22.000 
```

到这种格式：

```
2012-10-16 
```

并且不只是使 varchar(10) 不会像[这个问题](https://stackoverflow.com/questions/889629/how-to-get-a-date-in-yyyy-mm-dd-format-from-a-tsql-datetime-field)所暗示的那样工作，因为我必须比较它们并且我不能用那种方法来做到这一点。它也[没有给我](http://www.w3schools.com/sql/func_convert.asp)做这种类型的转换的价值。

这和我来的一样接近：

```
declare @DATE DATETIME = '2012-10-16 00:00:000'
SELECT  Convert(varchar(20), @DATE,105) 
```

结果 = 16-10-2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:45:30.423

```
declare @DATE DATETIME = '2012-10-16 00:00:000'
SELECT  REPLACE(Convert(varchar(20), @DATE,102), '.', '-') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/d41d8/6764)

**[下面](http://www.sql-server-helper.com/tips/date-formats.aspx)是 SQL Server 中日期格式的**概述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T09:57:43.240

```
SELECT CONVERT(VARCHAR(10),@date, 120)
--Gives: yyyy-mm-dd 
```

# javascript - 如何在叠加层上放置标记

> ID：13602059
> 
> 赞同：1
> 
> 时间：2012-11-28T09:42:16.967
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, panes

我有一个小的谷歌地图页面，用来记录车祸的位置。如果事故发生在办公室 65 英里范围内，则处理方式不同。所以我用下面的代码画了一个圆圈，中间有一个标记。

```
var s25 = new google.maps.LatLng(53.3664887, -1.236279);
var el=document.getElementById("map_canvas");
map = new google.maps.Map(el, myOptions);

 var marker = new google.maps.Marker({
    map: map,
    position: s25
});

 var sunCircle = {
    strokeColor: "#c3fc49",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#c3fc49",
    fillOpacity: 0.35,
    map: map,
    center: s25,
    radius: 104607.36 // in meters
};
cityCircle = new google.maps.Circle(sunCircle);
cityCircle.bindTo('center', marker, 'position'); 
```

这工作正常，我用来在事故位置放置新标记的代码工作正常，但只有当位置在圆圈之外时。谷歌地图不允许我在圆圈内放置标记。

我做了一些研究，发现了一些关于[地图窗格](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)的信息，这听起来很理想，但我不确定如何调用它，因为当我这样做时，我只是得到一个未定义的错误。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:56:24.750

在圆圈上设置[clickable:false 。](https://developers.google.com/maps/documentation/javascript/reference#CircleOptions)或者将 MouseEvents 的事件侦听器添加到圆圈并使用它们来放置标记。

# java - Spring MVC 将值列表从 JSP 页面传递到控制器

> ID：13602061
> 
> 赞同：6
> 
> 时间：2012-11-28T09:42:20.777
> 
> 标签：java, spring, spring-mvc

如果我有这样的 HTML `<form>`：

```
 <input type="text" value="someValue1" name="myValues"/>
    <input type="text" value="someValue2" name="myValues"/>
    <input type="text" value="someValue3" name="myValues"/>
    <input type="text" value="someValue4" name="myValues"/> 
```

我知道在 servlet 中我可以使用以下方法获取值：

```
String[] values = request.getParameterValues("myValues"); 
```

如何使用 Spring MVC 做类似的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T09:49:33.383

参数作为参数传递给绑定到控制器的方法

```
@RequestMapping(value = "/foo", method = RequestMethod.POST) // or GET
public String foo(@RequestParam("myValues") String[] myValues) {
    // Processing
    return "view";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:49:50.047

你已经`HttpServletRequest request`在 spring web MVC 中了。我们可以使用相同的方法来获得它，即使用

```
 String[] values = request.getParameterValues("myValues"); 
```

您还可以使用[ServletRequestUtils](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/bind/ServletRequestUtils.html)在 Spring 中读取请求参数，例如：

```
String[] values = ServletRequestUtils.getRequiredStringParameters(request, "myValues"); 
```

查看如何访问 Http 请求：[Spring 3 MVC 从控制器访问 HttpRequest](https://stackoverflow.com/questions/8504258/spring-3-mvc-accessing-httprequest-from-controller)

对于基于注释的方法：请参阅 Alex 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:31:43.007

在jsp中我想：

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%> <!-- Add taglib in beginning of the page.-->

<!-- In body the html -->
<form:form  action="/foo" method="post" commandName="MyValues">
  <input type="text" value="someValue1" name="myValues1"/>
  <input type="text" value="someValue2" name="myValues2"/>
  <input type="text" value="someValue3" name="myValues3"/>
  <input type="text" value="someValue4" name="myValues4"/>
</form:form> 
```

请参阅第 13.9 节中的参考资料。使用 Spring 的表单标签库标签说明，链接：[http ://static.springsource.org/spring/docs/2.0.x/reference/mvc.html](http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html)

控制器是 Alex 回答的同一个朋友的一部分。

# javascript - Ember-Data - 从路由器到控制器到达对象

> ID：13602062
> 
> 赞同：1
> 
> 时间：2012-11-28T09:42:27.877
> 
> 标签：javascript, model-view-controller, ember.js

如果我在我的路由器中这样做：

```
connectOutlets: function(router, context){
     router.set('objectController.fooObject', App.get("session.sessionObject"));
} 
```

如何在我的控制器中获取此对象？如果我用它初始化它，`object = null,`我可以用这样的把手获得它的属性：

```
 {{object.bar}} 
```

但无法在我的控制器中获取对象，因为如果我调用这样的函数：

```
test: function() {
    console.log(object.bar);
} 
```

它不会工作。那么如何在我的控制器中正确获取我的上下文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:39:13.913

您需要在测试函数中使用 getter 和 setter。

```
this.get('foo');
this.set('foo', 'bar') 
```

在你的情况下

```
test: function() {
    console.log(this.get('object.bar'));
} 
```

# sql-server - SQL Server：使用不同 ID 一次更新多行的最佳实践

> ID：13602065
> 
> 赞同：1
> 
> 时间：2012-11-28T09:42:41.647
> 
> 标签：sql-server, sql-server-2008, sql-update

我想用不同的 ID 在一个命令中更新许多行。这些 ID 应该像这样在查询中传递

```
Update table
Set Updated = 1
where ID is in 
(
     1
     2
     3
) 
```

另一个困难是要检查两个主键列。我不想在自己的命令中更新每一行，因为它非常慢，因为服务器往返。

更新这样的表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:48:17.427

将表连接到包含 VALUES 子句 (SQL 2008) 或一系列 UNION ALL SELECT 的派生表。

```
UPDATE T
SET Col = 1
FROM dbo.Table T
INNER JOIN (
   VALUES
      (1, 3),
      (3, 5),
      (5, 7)
) X (ID1, ID2)
   ON T.ID1 = X.ID1
   AND T.ID2 = X.ID2 
```

对于 SQL 2005 及更早版本：

```
UPDATE T
SET Col = 1
FROM dbo.Table T
INNER JOIN (
   SELECT 1, 3
   UNION ALL SELECT 3, 5
   UNION ALL SELECT 5, 7
) X (ID1, ID2)
   ON T.ID1 = X.ID1
   AND T.ID2 = X.ID2 
```

或者，插入临时表并加入该表。您还可以创建一个存储过程，该过程接受包含您需要加入的所有键的参数。参数可以是文本（您可以拆分）、xml 或表值参数。

如果数据量非常巨大，那么您可能会考虑将文本文件中的键批量加载到表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:47:07.103

你的语法几乎是正确的。以下将按预期执行：

```
Update table
Set Updated = 1
where ID IN 
(
     1,
     2,
     3
) 
```

如果您需要在多个列上进行匹配，则需要有一个包含这些列的数据源——一个临时表、一个表变量或一个表值参数都可以工作。您将在此源上加入您的表并在其上运行更新。

```
UPDATE table
SET Updated = 1
FROM table
  INNER JOIN otherTable
    ON table.Col1 = otherTable.Col1
    AND table.Col2 = otherTable.Col2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T09:50:01.947

您可以基于逗号分隔列表中的单个主键进行更新。所以在你的情况下：

```
update tblTable set updated = 1 where id in (1,2,3) 
```

您可以像使用 SELECT 命令一样使用 update where 条件。您没有规定 SQL Server 的版本，但这里是 SQL2k 联机丛书链接：

[http://msdn.microsoft.com/en-us/library/aa260662(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa260662(v=sql.80).aspx)

SQL 联机丛书是解决此类问题（即命令结构）的好地方

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T10:08:56.193

这取决于。

如果您要更新的记录的“选择”是用编程语言定义的（例如，您正在用 c# 编写查询，然后将其传递给 sql server），那么您最简单的解决方案是生成一系列 where 子句，如下所示：

```
OR (KeyColumn1 = @FilterValue1_1 AND KeyColumn2 = @FilterValue2_1)
OR (KeyColumn1 = @FilterValue1_2 AND KeyColumn2 = @FilterValue2_2) 
```

如果您的选择直接来自另一个查询，请将其嵌入更新语句中，如下所示：

```
UPDATE
    [TableToUpdate]
SET
    [ColumnToUpdate] = @NewValue
FROM
    [TableToUpdate]
    INNER JOIN [FilterTable]
        ON [FilterTable].[KeyColumn1] = [TableToUpdate].[KeyColumn1]
        AND [FilterTable].[KeyColumn2] = [TableToUpdate].[KeyColumn2]
WHERE
    [FilterTable].[ColumnToFilter] = @ValueToFilter 
```

或者像这样：

```
UPDATE
    [TableToUpdate]
SET
    [ColumnToUpdate] = @NewValue
FROM
    [TableToUpdate]
    INNER JOIN 
    (
        SELECT
            [FilterTable].[KeyColumn1],
            [FilterTable].[KeyColumn2]
        FROM
            [FilterTable]
        WHERE
            [FilterTable].[ColumnToFilter] = @ValueToFilter
    )
        AS [Filter]
        ON [Filter].[KeyColumn1] = [TableToUpdate].[KeyColumn1]
        AND [Filter].[KeyColumn2] = [TableToUpdate].[KeyColumn2] 
```

甚至像这样:)

```
;WITH [Filter] AS
(
    SELECT
        [FilterTable].[KeyColumn1],
        [FilterTable].[KeyColumn2]
    FROM
        [FilterTable]
    WHERE
        [FilterTable].[ColumnToFilter] = @ValueToFilter
)
UPDATE
    [TableToUpdate]
SET
    [ColumnToUpdate] = @NewValue
FROM
    [TableToUpdate]
    INNER JOIN [Filter]
        ON [Filter].[KeyColumn1] = [TableToUpdate].[KeyColumn1]
        AND [Filter].[KeyColumn2] = [TableToUpdate].[KeyColumn2] 
```

# node.js - 从 Node.js 发出网络请求时如何指定网络接口？

> ID：13602066
> 
> 赞同：11
> 
> 时间：2012-11-28T09:42:42.317
> 
> 标签：node.js, http, tcp, network-interface

在`http.request`或`net.connect`中，是否有一个选项可以指定网络接口来启动连接？

编辑：操作系统级别的 AFAIK 我可以在路由表中指定地址级别或负载平衡。但是在我的软件中选择界面的方式不止于此，我想知道我是否可以在代码中做到这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-08T13:17:57.627

Node内置了这个：

[http://nodejs.org/api/net.html#net_net_connect_options_connectionlistener](http://nodejs.org/api/net.html#net_net_connect_options_connectionlistener)

[http://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback)

看`localAddress`，只需将其设置为您要使用的接口的 IP。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T11:20:35.490

**编辑**：正如 mak 所指出的，确实可以从用户进程中指定网络接口。我站得更正了。但是，我还没有找到一个允许它使用 node.js 的模块。

默认情况下，网络接口由操作系统路由表确定。

`netstat -r`您可以在 Unix 系统（包括 OSX）上列出此表。只需打开一个终端并输入命令。您将获得如下列表：

```
laurent ~ $ netstat -r
Routing tables

Internet:
Destination        Gateway            Flags        Refs      Use   Netif Expire
default            192.168.1.1        UGSc          153        0     en0
127                localhost          UCS             0        0     lo0
localhost          localhost          UH              2       42     lo0
... 
```

该`Netif`字段为您提供用于路由的网络接口。您还可以通过以下方式获取用于访问主机名的接口`route`：

```
laurent ~ $ route get google.fr
   route to: par03s02-in-f23.1e100.net
destination: default
       mask: default
    gateway: 192.168.1.1
  interface: en0
      flags: <UP,GATEWAY,DONE,STATIC,PRCLONING>
 recvpipe  sendpipe  ssthresh  rtt,msec    rttvar  hopcount      mtu     expire
       0         0         0         0         0         0      1500         0 
```

这更像是服务器故障，但您可以使用`route`命令更改路由。例如，这会将流量路由到 ETH0 上的 XYZ[0-254] 到 XYZ254：

```
route add -net X.Y.Z.0/24 gw X.Y.Z.254 dev eth0 
```

如果您希望路由持续重启，您可以将它们添加到`/etc/network/interfaces`. 如果你想在几个不同的路由之间进行负载平衡，你还应该检查[MPLS](http://en.wikipedia.org/wiki/Multiprotocol_Label_Switching)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-28T12:12:29.023

You can use [`node cURL wrapper`](https://github.com/jiangmiao/node-curl)

```
curl = require('node-curl')
curl('www.google.com', { INTERFACE: 'eth1', RAW: 1 }, function(err) {
    console.info(this);
}); 
```

# android - 无法通过 Android 应用程序直接向用户 Twitter 朋友发送消息？

> ID：13602071
> 
> 赞同：2
> 
> 时间：2012-11-28T09:42:55.250
> 
> 标签：android, twitter

我必须通过 Twitter4j API 向用户 Twitter 帐户发送直接消息。

```
 try {
                    String token =  mSharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
                    String secret =  mSharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");
                  Twitter twitter = new TwitterFactory().getInstance();
                        ConfigurationBuilder cb = new ConfigurationBuilder();
                        cb.setDebugEnabled(true)
                                .setOAuthConsumerKey(TWITTER_CONSUMER_KEY)
                                .setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET)
                                .setOAuthAccessToken(token)
                                .setOAuthAccessTokenSecret(secret);
                        TwitterFactory tf = new TwitterFactory(cb.build());
                        twitter = tf.getInstance();
                        twitter.sendDirectMessage("Friendtwitterid", "Hi testing");
                    } catch (TwitterException te) 
                    {
                        te.printStackTrace();
                    } 
```

但输出将是：

```
Failed to send a direct message: 404:The URI requested is invalid or the resource requested, such as a user, does not exists. Also returned when the requested format is not supported by the requested method. 
```

请帮忙。

# c# - 如果我在移动设备中使用 Web 服务时连接丢失怎么办

> ID：13602072
> 
> 赞同：0
> 
> 时间：2012-11-28T09:42:57.987
> 
> 标签：c#, ios, rest, xamarin.ios

我有一个问题。我将在我的移动应用程序（基于 C#，monotouch）中使用 RESTfull Web 服务。我必须使用 json 或 xml 发送大数据。我能否确保万一连接丢失，我想停止提取数据并取消已提取的其余数据。

基本上。我的目标是我不想部分拉动。我需要完整的数据而不会丢失它。

任何其他想法我怎样才能做到这一点？

只是想问另一个问题。如何保护引用数据的 url。如果我使用 RESTfull 网络服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:48:04.220

如果你使用 NSURLConnection 如下

```
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]] delegate:self]; 
```

然后，您可以使用以下两个委托方法来检查数据是否完全下载。

```
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    //Download failed
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {
    //Download success
} 
```

# php - php json_encode 中德语变音符号的问题

> ID：13602075
> 
> 赞同：15
> 
> 时间：2012-11-28T09:43:08.813
> 
> 标签：php, json, character-encoding

我遇到了来自包含德语变音符号的数据库中的数据的问题。基本上，每当我收到包含变音符号的数据时，它都是一个带有询问标记的黑色方块。我解决了这个问题

```
mysql_query ('SET NAMES utf8') 
```

在查询之前。

问题是，一旦我`json_encode(...)`在查询结果上使用，包含变音符号的值就会得到`null`. 我可以通过直接在浏览器中调用 php 文件来看到这一点。除了在编码为 JSON 并在 JS 中解码之前替换此字符之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2017-05-30T13:37:22.063

看看[这里](https://stackoverflow.com/a/21550697/2593099)提到的这个非常优雅的解决方案：

```
json_encode( $json_full, JSON_UNESCAPED_UNICODE ); 
```

如果问题不在您的代码中的其他任何地方，则应该解决它。

**编辑：**元音变音问题可能是由多种来源引起的，例如您的 HTML 文档的字符集、数据库格式或您的字符串运行的一些以前的 php 函数（当您遇到元音变音问题时，您绝对应该查看[多字节函数）。](https://www.php.net/manual/de/ref.mbstring.php)

这些问题往往很烦人，因为在大多数情况下很难跟踪它们（尽管这不像几年前那么糟糕）。上面的函数修复了 json_encode 的元音变音问题……但问题很可能是由应用程序的不同部分引起的，而不是这个特定的函数。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-27T06:18:29.007

我知道这可能很旧，但这里有一个更好的解决方案：

使用 utf-8 字符集定义文档类型：

```
<?php header('Content-Type: application/json; charset=utf-8'); ?> 
```

确保所有内容都是 utf_encoded。JSON 仅适用于 utf-8！

```
function encode_items(&$item, $key)
{
    $item = utf8_encode($item);
}
array_walk_recursive($rows, 'encode_items'); 
```

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-28T09:52:32.453

您可能只想在浏览器中以某种方式显示文本，因此一种选择是使用[`htmlentities()`](http://php.net/htmlentities).

以下测试对我有用：

```
<?php
    $test = array( 'bla' => 'äöü' );
    $test['bla'] = htmlentities( $test['bla'] );

    echo json_encode( $test );
?> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-04T10:34:23.553

这里唯一重要的一点是 json_encode() 只支持 UTF-8 编码。 [http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

> 所有字符串数据都必须采用 UTF-8 编码。

因此，当您在非 utf-8 字符串中有任何特殊字符时，json_encode 将返回一个空值。

因此，要么将整个项目切换到 utf-8，要么确保在使用 json_encode() 之前使用 utf8_encode() 任何字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-26T12:19:40.140

确保翻译文件本身明确存储为 UTF-8

之后重新加载缓存块和翻译

# objective-c - 当我们从 UIWebView 向下滚动时，如何触发方法？

> ID：13602078
> 
> 赞同：2
> 
> 时间：2012-11-28T09:43:19.093
> 
> 标签：objective-c, ios, uiwebview

当我们从 UIWebView 的底部向下滚动时，有什么方法可以触发方法吗？我看过很多答案，但找不到可行的想法:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:53:54.560

UIWebView 符合 UIScrollViewDelegate 协议。

该协议定义了（[在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate)`scrollViewDidScroll:`查找）方法。如果您实现它并将您的对象设置为 UIWebView 的委托，您应该在视图滚动时收到通知。然后，您可以向 webview 询问它并确定滚动是向上还是向下。`contentOffset`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:51:35.023

我认为你应该使用`scrollViewDidScroll`的方法`UIScrollViewDelegate`

# excel - 引用多个外部 csv 文件返回 #VALUE！vlookup 函数 Microsoft Excel 中的错误

> ID：13602081
> 
> 赞同：1
> 
> 时间：2012-11-28T09:43:25.170
> 
> 标签：excel, csv, excel-formula

我有一个主 excel 表 abc.xls，我需要它来引用在其他 2 个 csx 文件中找到的列：def.csv 和 ghj.csv。我尝试使用 VLOOKUP 函数：

```
=VLOOKUP(F2,[def.csv]def!R2C15:R439C15+[ghi.csv]ghi!R2C9:R1248C9,1,FALSE) 
```

其中`F2`是 abc.xls`R2C15:R439C15`中的一列， 是 中引用的行`def.csv`，`R2C9:R1248C9`是 中引用的行`ghi.csv`。但是，当我在 中尝试此公式时`master copy(abc.xls)`，它返回`#VALUE!`错误。由于我不太确定如何引用多个外部 csv 文件，有人可以指导我如何修改这个公式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:59:15.183

删除`+`. .csv 无关紧要。如果您想检查一个值是否存在于两个不同的位置，您可以使用两个 LOOKUP 或将两个参考列表合并为一个。

# c# - C# 组合框显示错误的值

> ID：13602082
> 
> 赞同：2
> 
> 时间：2012-11-28T09:43:28.803
> 
> 标签：c#, visual-studio, combobox

![在此处输入图像描述](../Images/37dee50b705a22ce34244990deae8c64.png)

我想将数据从数据库中插入到我的 ComboBox 中。这是我的代码：

```
OracleDataTable dt = new OracleDataTable();
OracleConnection conn = new OracleConnection();
conn.ConnectionString = "....string....";

string query = "SELECT emp_username FROM dc_emp";
OracleDataAdapter da = new OracleDataAdapter(query,conn);

da.Fill(dt);
rp.cbDelivery.DataSource = dt;
rp.cbDelivery.DisplayMember = "emp_username"; 
```

这有效，但不是 100%。我在组合框中获得了正确数量的字段，但名称值已替换为 CoreLab.Common。

所以它肯定会连接到数据库表并带回正确数量的字段但不是正确的值......

希望这是有道理的。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:52:20.250

像这样的东西-

```
 rp.cbDelivery.DataSource = dt
        rp.cbDelivery.DisplayMember = "emp_username";
        rp.cbDelivery.ValueMember = "emp_username"; 
```

也尝试使用`Datatable dt= new DataTable();`而不是 `OracleDataTable dt = new OracleDataTable();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:52:22.670

也分配 ValueMember：

rp.cbDelivery.ValueMember = "emp_username";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:52:53.937

在我看来，您应该关注以下行：

```
rp.cbDelivery.DisplayMember = "emp_username"; 
```

问题可能是由于`DataTable`列名不包括您所指的列名。这是一个可能重现您的问题的示例：

```
dt.Columns.Add("Id", typeof(int));
dt.Columns.Add("Name", typeof(string));

dt.Rows.Add(new object[] { 1, "Alex" });
dt.Rows.Add(new object[] { 2, "John" });
dt.Rows.Add(new object[] { 3, "Mary" });

comboBox1.DataSource = dt;
comboBox1.DisplayMember = "Name_with_typo"; //here you should use Name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:57:08.710

你应该首先`DisplayMember`像这样使用：

```
OracleConnection conn = new OracleConnection("....string....");
string query = "SELECT emp_username FROM dc_emp";
OracleDataAdapter da = new OracleDataAdapter(query,conn);
OracleDataTable dt = new OracleDataTable();
da.Fill(dt);
rp.cbDelivery.DisplayMember = "emp_username";
rp.cbDelivery.DataSource = dt; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T12:54:00.513

感谢所有的反馈。我尝试了您的所有建议，最后我找到了一个示例并对其进行了修改以适合我。这是下面的工作代码：

```
 OracleDataReader dr;
        OracleConnection conn = new OracleConnection();
        conn.ConnectionString = "....string....";
        string query = "SELECT distinct dd.delivery_bay_code FROM dc_delivery dd, dc_grv dg WHERE delivery_complete_datetime is null AND dd.dc_delivery_id_no = dg.dc_delivery_id_no";
        OracleCommand cmd = new OracleCommand(query, conn);
        conn.Open();
        dr = cmd.ExecuteReader();
        while(dr.Read())
        {
            if (dr[0].ToString().Length > 2)
                cbDelivery.Items.Add(dr[0].ToString());
        }
        conn.Close(); 
```

# java - 错误：特殊字符未从 csv 上传到 Liferay 6.1 中的数据库

> ID：13602084
> 
> 赞同：2
> 
> 时间：2012-11-28T09:43:29.470
> 
> 标签：java, hibernate, liferay-6

我正在将 csv 文件中的记录插入 Liferay 6.1 中的 mysql 数据库。我已经设置了 porta-ext.properties 文件

```
jdbc.default.driverClassName=com.mysql.jdbc.Driver
jdbc.default.url=jdbc:mysql://localhost:3306/lportal?useUnicode=true&characterEncoding=UTF-8&useFastDateParsing=false
jdbc.default.username=root jdbc.default.password=root 
```

当我尝试上传记录时，它会为特殊字符引发错误，例如 á 错误详细信息：

```
13:38:21,001 ERROR [JDBCExceptionReporter:75] Data truncation: Data too long for column 'providerName' at row 1 
```

当我删除这些字符时，它会保留记录而不会出错。

谁能建议我如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:36:52.007

如果您的数据库是 UTF-8 并且您在其中包含“特殊”字符，那么您很可能缺少“file.encoding=UTF-8”vm 参数（-Dfile.encoding=UTF-8），或者至少您应该打开文件/流时指定编码。

# ruby - 在 Windows 上使用 Ruby 1.9.3（包括 rmagick 2.13.1）为 Redmine 2.1.4 安装 gem-bundle

> ID：13602086
> 
> 赞同：0
> 
> 时间：2012-11-28T09:43:30.380
> 
> 标签：ruby, redmine, rmagick

我在 Windows 上安装`json`或`rmagick`gems 时遇到问题，我需要它，因为我正在尝试安装 Redmine 2.1.4。

由于没有一个程序对我来说是开箱即用的，并且我自己已经为此苦苦挣扎了几个小时，所以我想我只是在这里寻求帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:43:30.380

我假设你还没有安装 Ruby。如果您这样做，就像下面提到的任何其他组件一样，在继续安装之前卸载它们可能是最明智的做法。

本教程应该可以帮助您避免Windows 上`json`的`rmagick`gems 问题。

1.  首先，从 ruby​​forge 下载 Redmine 2.1.4 作为 zip 或从 SVN 或 Git，如相关[Redmine Wiki 页面](https://www.redmine.org/projects/redmine/wiki/Download)所述。rubyforge 往往不起作用，因此您可能被迫使用后者。

2.  [从ruby​​installer.org](https://rubyinstaller.org/downloads/)下载 RubyInstaller（撰写本文时为 1.9.3）和 DevelopmentKit

3.  使用下载的安装程序安装 Ruby。使用名称中没有空格的目录，即**不要将其安装到 Program Files**。我检查了以下选项 ![在此处输入图像描述](../Images/6a120c9543a521483b75c0c0c31ce8e0.png)

4.  打开命令行，检查 Ruby 路径是否已添加到您的系统中。`ruby --version`应该显示安装的版本，在我的例子中是 1.9.3。如果您在安装 Ruby 时打开了命令行，请关闭并重新打开它以加载路径。

5.  将 DevKit 提取到**没有空格的路径**。切换到 DevKit 的目录（例如可能在 Ruby 的安装目录下，即 C:\Ruby193\DevKit）。执行以下操作：

    `ruby dk.rb init`

    `ruby dk.rb review`（应该能正确检测到 Ruby 的安装路径）

    `ruby dk.rb install`

6.  安装捆绑器 gem`gem install bundler`

7.  转到 Redmine 主目录。执行`bundle install`。**您可能（如果尚未修复）会收到`rmagick`错误**- 不要担心。

8.  去获取[ImageMagick](https://www.imagemagick.org/script/download.php#windows)。我选了`ImageMagick-6.8.0-7-Q16-windows-dll.exe`。安装到**路径不包含空格**的目录，例如`C:\ImageMagick`. 也选择安装头文件，如下： ![在此处输入图像描述](../Images/905bb9f0d1cdec19c6b3fd5ab3b1566c.png)

9.  将`ImageMagick`主页添加到`path`. 关闭命令行并重新打开它。这将重新加载路径。

10.  执行`gem install rmagick --platform=ruby --with-opt-lib=c:/ImageMagick/lib --with-opt-include=c:/ImageMagick/include

11.  再次转到 Redmine 主目录。再次执行`bundle install`。现在应该可以工作了。

希望有帮助！

# iphone - 如何将变量添加到网址中

> ID：13602088
> 
> 赞同：0
> 
> 时间：2012-11-28T09:43:32.637
> 
> 标签：iphone, objective-c, ios, xcode

我通过解析链接获取用户 ID。我再次必须使用用户 ID 解析它才能获得访问权限。我在做什么

```
NSString *str=[[NSString alloc]initWithFormat:@"http://abc.com/fb_redirect_mobile/?accessToken=4546"]; 
```

这给了我用户 ID，现在我想使用该用户 ID 再次解析它，例如：

```
NSString *str=[[NSString alloc]initWithFormat:@"http://abc.com/user/userid/bookmarks"]; 
```

在其他语言中，我看到他们只是在使用：

```
NSString *str=[[NSString alloc]initWithFormat:@"http://abc.com/user/"+userid+"/bookmarks"]; 
```

userid 变量需要用户 id。我如何在 iPhone 中做到这一点。我知道我的问题很长，但我试图弄清楚我想要什么。请帮助..请告诉我如何将解析 id 存储到字符串中，例如作为用户ID，我将在解析url后得到。/现在我如何以字符串的形式保存它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:46:39.180

```
NSString *userId = @"123456";
NSString *str=[[NSString alloc]initWithFormat:@"http://abc.com/user/%@/bookmarks", userId]; 
```

`initWithFormat:`/`stringWithFormat:`遵循[printf/scanf 设置的一般格式约定](http://en.wikipedia.org/wiki/Printf_format_string)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:47:11.747

您连接用户 ID 的方式在 Obj-C 中不是有效的语法

```
NSString *str=[[NSString alloc]initWithFormat:@"http://abc.com/user/"+userid+"/bookmarks"]; 
```

您可能想要做的是使用 Obj-C 对象的格式说明符（在您的情况下`NSString`），并在您的 URL 中使用它（假设`userid`是一个 NSString，它可能是。如果它是一个基于 C 的字符串，请使用`%s`作为您的格式说明符）。

```
NSString *str=[[NSString alloc]initWithFormat:@"http://abc.com/user/%@/bookmarks", userid]; 
```

请参阅这些以了解如何在`stringWithFormat:`上使用`NSString`：

*   [格式化字符串对象](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html#//apple_ref/doc/uid/20000943)
*   [字符串格式说明符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T09:47:13.950

代替

```
NSString *str=[[NSString alloc]initWithFormat:@"http://abc.com/user/"+userid+"/bookmarks"]; 
```

你会用

```
NSString *str=[[NSString alloc] initWithFormat:@"http://abc.com/user/%@/bookmarks",userid]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T09:47:39.207

你可以这样给，

```
NSString *str=[NSString stringWithFormat:@"http://abc.com/user/%@/bookmarks",userid]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T09:46:53.993

好吧，你几乎明白了：

```
NSString *usrid = @"4546";
NSString *str=[NSString stringWithFormat:@"http://abc.com/fb_redirect_mobile/?accessToken=%@", userid]; 
```

为此，您可以使用 的[`stringWithFormat:`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-stringWithFormat_)方法[`NSString`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。

# jsf - 在 JSF 中实现 YUI2 菜单组件

> ID：13602090
> 
> 赞同：1
> 
> 时间：2012-11-28T09:43:35.800
> 
> 标签：jsf, yui2

我正在尝试将 YUI2 Menu 组件实现到 JSF 中。我将它编码在一个普通的 HTML 文件中，它可以工作。

[![在 HTML 中工作 yui2 菜单](../Images/1294f12ee12a20912fbac2a42e01f5e7.png)](https://i.stack.imgur.com/Yg3Gd.png)
[（来源：[alvinsim.com](http://www.alvinsim.com/stackoverflow/img/html_yuiMenu.png)）]

但是当我将代码移植到 JSF 时，它没有正确显示。我认为这是因为 JSF 找不到 YUI2 皮肤。

[![在 JSF 中不工作 yui2 菜单](../Images/90c09a7e8b29c7cc6991b6e41dcb6143.png)](https://i.stack.imgur.com/fc1fN.png)
[（来源：[alvinsim.com](http://www.alvinsim.com/stackoverflow/img/jsf_yuiMenu.png)）]

我正在使用 Netbeans 7.2、Java JDK6 和 Glassfish3。我的项目结构是这样的。

[![Netbeans 项目结构](../Images/c9932ca469299ac548bf33f30bd6cfe5.png)](https://i.stack.imgur.com/X8py0.png)
[（来源：[alvinsim.com](http://www.alvinsim.com/stackoverflow/img/projectFileStructure.png)）]

下面是我的 JSF 代码。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>YUI2 Menu</title>
    <h:outputStylesheet name="styles.css" library="css" />
    <!-- ===== YUI Library Implementation ===== -->
    <!-- Fonts CSS - Recommended but not required -->
    <link rel="stylesheet" type="text/css"
          href="#{facesContext.externalContext.requestContextPath}/resources/yui/fonts/fonts-min.css" />
    <!-- <h:outputStylesheet name="yui/fonts/fonts-min.css"  /> -->

    <!-- Core + Skin CSS -->
    <link rel="stylesheet" type="text/css"
          href="#{facesContext.externalContext.requestContextPath}/resources/yui/menu/assets/skins/sam/menu.css" />
    <!-- <h:outputStylesheet name="yui/menu/assets/skins/sam/menu.css"  /> -->

    <!-- Dependencies -->
    <script src="#{facesContext.externalContext.requestContextPath}/resources/yui/yahoo-dom-event/yahoo-dom-event.js"></script>
    <script src="#{facesContext.externalContext.requestContextPath}/resources/yui/container/container_core-min.js">
    </script>
    <!-- <h:outputScript name="yui/yahoo-dom-event/yahoo-dom-event.js"  />
    <h:outputScript name="yui/container/container_core-min.js"  /> -->

    <!-- Source File -->
    <!-- <script src="#{facesContext.externalContext.requestContextPath}/resources/yui/menu/menu-min.js"></script> -->
    <h:outputScript name="yui/menu/menu-min.js"  />
    <!-- ===== END ===== -->
</h:head>
<h:body>
    <div id="mymenubar" class="yuimenubar yuimenubarnav">
        <div class="bd">
            <ul class="first-of-type">
                <li class="yuimenubaritem first-of-type">
                    <a class="yuimenubaritemlabel" href="#file">File</a>
                    <div id="file" class="yuimenu">
                        <div class="bd">
                            <ul>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#">
                                        New File <em class="helptext">Ctrl + N</em>
                                    </a>
                                </li>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#">New Folder</a>
                                </li>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#open">Open <em class="helptext">
                                        Ctrl + O</em>
                                    </a>
                                    <div id="open" class="yuimenu">
                                        <div class="bd">
                                            <ul class="first-of-type">
                                                <li class="yuimenuitem">
                                                    <a class="yuimenuitemlabel" href="#">Application 1</a>
                                                </li>
                                                <li class="yuimenuitem">
                                                    <a class="yuimenuitemlabel" href="#">Application 2</a>
                                                </li>
                                                <li class="yuimenuitem">
                                                    <a class="yuimenuitemlabel" href="#">Application 3</a>
                                                </li>
                                                <li class="yuimenuitem">
                                                    <a class="yuimenuitemlabel" href="#">Application 4</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#">
                                        Print <em class="helptext">Ctrl + P</em>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li class="yuimenubaritem first-of-type">
                    <a class="yuimenubaritemlabel" href="#">Edit</a>
                   <div id="pim" class="yuimenu">
                        <div class="bd">
                            <ul class="first-of-type">
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#"> Undo<em class="helptext">Ctrl + Z</em></a>
                                </li>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#"> Redo<em class="helptext">Ctrl + Y</em></a>
                                </li>
                            </ul>
                            <ul>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#"> Cut<em class="helptext">Ctrl + X</em></a>
                                </li>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#"> Copy<em class="helptext">Ctrl + C</em></a>
                                </li>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#">
                                         Paste<em class="helptext">Ctrl + V</em>
                                    </a>
                                </li>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#"> Delete<em class="helptext">Del</em></a>
                                </li>
                            </ul>
                            <ul>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#">
                                         Select All<em class="helptext">Ctrl + A</em>
                                    </a>
                                </li>
                            </ul>
                            <ul>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#"> Find<em class="helptext">Ctrl + F</em></a>
                                </li>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#">
                                         Find Again<em class="helptext">Ctrl + G</em>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li class="yuimenubaritem first-of-type">
                    <a class="yuimenubaritemlabel" href="#">Very Long Menu</a>
                    <div id="longMenu" class="yuimenu">
                        <div class="bd">
                            <ul>
                                <li class="yuimenuitem">
                                    <a class="yuimenuitemlabel" href="#">Very, very long Item 1</a>
                                </li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 2</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 3</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 4</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 5</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 6</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 7</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 8</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 9</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 10</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 11</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 12</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 13</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 14</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 15</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 16</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 17</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 18</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 19</a></li>
                                <li class="yuimenuitem"><a class="yuimenuitemlabel" href="#">Item 20</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <script>
        YAHOO.util.Event.onDOMReady(function () {

            //  Instantiate a MenuBar, passing in the id of the HTML element
            //  representing the MenuBar.

            var oMenuBar = new YAHOO.widget.MenuBar("mymenubar", {

                autosubmenudisplay: true,
                maxheight: 300

            });

            // Render the MenuBar instance

            oMenuBar.render();

        });
    </script>
</h:body> 
```

在我的代码中，我确实从使用`<link />`标记更改为`<h:outputStylesheet />`标记（对于 JavaScript 也是如此），但它仍然不起作用。

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:42:06.203

用firebug和IE9自带的调试工具调试了几轮，代码切换，终于明白为什么不行了。这是一个简单的错误，在将我的代码从 HTML 移植到 JSF 时被忽略了。

它不起作用的原因是我遗漏了在`<h:body />`或父元素中加载 YUI 皮肤的代码。所以`<h:body />`标签应该看起来像`<h:body styleClass="yui-skin-sam">`.

最终结果如下

[![在 JSF 中工作 yui 菜单](../Images/f9dac05dc1f80729ea0c648d14ca17a5.png)](https://i.stack.imgur.com/QU9nL.png)
[（来源：[alvinsim.com](http://www.alvinsim.com/stackoverflow/img/jsf_yuiMenu_ok.png)）]

# java - 在joda中覆盖一周的第一天？

> ID：13602096
> 
> 赞同：4
> 
> 时间：2012-11-28T09:44:04.257
> 
> 标签：java, android, date, datetime, jodatime

是否可以将 Joda 周的第一天覆盖到**星期日**？因为 Joda 使用**Monday**作为一周的第一天。如果有办法，任何人都可以解释一下。

我在 SOF 中提到了以下主题

[乔达时间：一周的第一天？](https://stackoverflow.com/questions/1801907/joda-time-first-day-of-week)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T09:02:59.230

不。

首先，将一周的第一天覆盖到星期日将需要覆盖所有其他工作日。但是这些最终常量是在[DateTimeConstants](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeConstants.html#MONDAY)类中定义的，它们是不可能被覆盖的。但是您无论如何都不想覆盖这些值，因为它会破坏 joda-time 的 ISO 合规性。

同时我想知道你为什么要首先覆盖它？你能提供一个用例吗？

```
public static DateTime getUSFirstDayOfWeek(DateTime dateTime) {
    return dateTime.withDayOfWeek(DateTimeConstants.MONDAY).minusDays(1);
} 
```

这个简单的辅助方法可能会完成这项工作。请注意，我没有使用`SUNDAY`它，因为它将在未来，即 - 在美国的概念中 - 已经在下周。

# android - 将应用程序导出到 Android 市场之前要做的事情以及如何启用 proguard（最新）

> ID：13602100
> 
> 赞同：5
> 
> 时间：2012-11-28T09:44:11.563
> 
> 标签：android, google-play, android-proguard

在将他们的第一个应用程序发布到市场时，将应用程序发布到 Android 市场需要做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:57:37.893

大部分在官方文档中都有解释，我会根据经验补充几点：

1.  为应用签名创建密钥库。如果您的应用程序有版权，请确保在您的证书中添加一些相关信息。**保留备份并以各种可能的方式保护它**，Play商店只接受使用与原始密钥相同的密钥签名的apk更新，安装更新时的设备也是如此。

2.  确定你的包名，让它唯一，以后如果你丢失了签名密钥，你将不得不以不同的包名重新上传应用程序。

3.  对代码进行彻底的审查，注意测试代码、注释、无用的注释和您可能放置在那里的不需要的日志记录。检查您的 TODO 项目，从您的 IDE 运行代码检查，如果发现任何关键问题，请删除。清除无用的 jar 文件和资源。还可以考虑将硬编码字符串外部化为 xml，以便稍后添加翻译。

4.  检查并验证清单文件，更新版本名称和版本代码。当您的应用在 Play 商店中列出时，会显示版本名称。每当您将更新的 apk 上传到 Play 商店时，版本代码都会增加。如果它是主要版本，您也可以提高版本名称。

5.  最后，在发布模式下构建您的 apk，并可选择运行 pro-guard。如果你的应用使用普通的 android API 并且没有像 RoboGuice 等花哨的外部库，proguard 将运行良好。否则，您将不得不告诉 proguard 忽略这些包下的类。Proguard 是可选的，您可以在不使用它的情况下上传应用程序。一些 IDE 有一个很好的 GUI 来执行此操作。

6.  使用您创建的密钥签署您的 apk。将其安装在测试设备上，进行测试运行。此外，使用模拟器跨 android 版本对其进行测试。拍一些屏幕截图，也许还有视频。

7.  准备发布材料，写下有关您的应用程序的几行内容，功能列表和任何其他说明。此外，为您的应用创建一个 512x512 的图标图像。

8.  如果你有一个关于你的应用程序的网站，很好，否则准备一个有效的邮件 ID 作为开发者联系点。

9.  登录开发者控制台，上传apk文件，填写相关截图、描述、联系方式等，保存并发布。您的应用可能需要 2 到 9 到 10 个小时才能在 Play 商店列表中显示。

10.  您的应用网址将类似于`https://play.google.com/store/apps/details?id=com.example.myapp`. 密切关注统计数据，将关键字与“muzo - 音乐播放器”等应用名称一起放置，大多数人不知道“muzo”他们通常搜索“音乐播放器”。审核您的应用，指向您的应用的链接会提高其搜索排名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:01:08.810

android 文档中有一个很好的话题，讨论如何准备你的应用程序以供发布。对于您的第一个或第 1000 个发布的应用程序，该过程是相同的。

请看这里：http: [//developer.android.com/tools/publishing/preparing.html](http://developer.android.com/tools/publishing/preparing.html)

PS：给你一个+1，有趣的问题。

# javascript - 使用Javascript从rest读取字节数组响应

> ID：13602101
> 
> 赞同：2
> 
> 时间：2012-11-28T09:44:24.340
> 
> 标签：javascript, jquery, restful-url

我有一个休息 url `http://server1:8080/platform/collections/123-456-789`，它以字节数组的形式返回一个 HTML 文件。

如何使用在 server2 中运行的 Javascript 或 jQuery 获取字节数组响应。我试过了

```
jQuery.ajax({
        url: "http://server1:8080/platform/collections/123-456-789",
        type: "GET",
        dataType: "html",
        crossDomain: true,
        username: "abcd",
        password: "abcd",
        async: true,
        success: function(data) {
            alert("1");
            alert(data);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert("error"+xhr.responseText);
            alert("error"+thrownError);
        }
}); 
```

我不进入成功的方法。如何成功获取字节数组响应？

**编辑：**

甚至使用 javascript 或 jquery 获取字节数组响应的任何其他方式也值得赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:58:23.307

对于多个服务器（具有不同域），您需要启用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)以允许跨域 ajax 请求。这应该是可能的，因为两台服务器都在您的控制之下。

关于如何使用 jQuery 接收二进制数据（目前不可能），请参阅[http://blog.vjeux.com/2011/javascript/jquery-binary-ajax.html](http://blog.vjeux.com/2011/javascript/jquery-binary-ajax.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T00:23:15.923

CORS 是较新的方法，但 jsonp 可能更容易一些......

使用 JSONP，您需要将 server1 上的文件包装在某种脚本中，以便您可以将 content-type 标头设置为 javascript，然后对文件进行 JSONencode 并将其写入响应。这可以在 PHP 或服务器端 javascript 中用几行代码完成；你会希望脚本最终返回一个包含如下内容的“javascript文件”：

```
document.getElementById('content-holder').innerHTML="<html>this is my file</html>"; 
```

在客户端（从 server2 提供的静态 html 页面）上，您可以放置​​内容持有者：

```
<div id='content-holder'></div> 
```

然后是从 server1 中提取内容的脚本：

```
<script type="text/javascript">
var getXsS = function(url)
{
    var ss = 's' + 'cr' + 'ip' + 't';
    var cst = document.getElementsByTagName(ss)[document.getElementsByTagName(ss).length-1];
    var ts = 1*new Date();
    var e = document.createElement(ss);
    e.async=1;
    var tsstr = '_ts1_='+ts;
    if((''+url).indexOf('?')==-1){tsstr='?'+tsstr;}else{tsstr='&'+tsstr;}
    var url2 = url+tsstr;
    e.src=url2;
    cst.parentNode.insertBefore(e,cst);
};
getXsS('http://server1:8080/platform/collections/123-456-789');
</script> 
```

请注意，如果 server1 使用 SSL，则 server2 也必须使用 SSL。

# c# - DynamicProxy 使用动态/DLR

> ID：13602102
> 
> 赞同：3
> 
> 时间：2012-11-28T09:44:26.243
> 
> 标签：c#, .net, dynamic, dynamic-language-runtime

我正在尝试将动态代理作为现有库的包装器，目标是通过动态调度处理现有对象的所有操作（属性访问、成员访问、方法调用……）。对于横切关注点，我可能需要它，例如更好的错误处理、日志记录或此对象的访问控制。

我想出了`dynamic`为实现接口的现有对象创建一个包装器 `IDynamicMetaObjectProvider`，但是`Expressions`通过实现我自己的来解析所有对象`DynamicMetaObject`似乎很麻烦！

另一种解决方案是从`DynamicObject`类继承来为我做繁重的工作，但同样有十几个虚拟方法，我不知道如何重写！我想我只知道`TrySetMember`,`TryGetMember`和`TryInvokeMember` 方法做什么或如何实现它们，但是还有很多其他方法我不知道如何使用！

```
public class DynamicProxy : DynamicObject
{
    private object Value;

    public DynamicProxy(object value)
    {
        this.Value = value;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = null;      // get proxy object value using reflection
        return true;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        // set proxy object value using reflection
        return true;
    }

    public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
    {
        result = null;      // call proxy object method using reflection
        return true;
    }

    public override bool TryInvoke(InvokeBinder binder, object[] args, out object result)
    {
        return base.TryInvoke(binder, args, out result);
    }

    public override bool TryDeleteIndex(DeleteIndexBinder binder, object[] indexes)
    {
        // What to do here?
    }

    public override bool TryDeleteMember(DeleteMemberBinder binder)
    {
        // What to do here?
    }

    public override bool TryUnaryOperation(UnaryOperationBinder binder, out object result)
    {
        // What to do here?
    }

    // ... Other virtual methods of DynamicObject
} 
```

`DynamicObject`所以我的问题是：有没有完全覆盖或至少完全实现`IDynamicMetaObjectProvider`接口的开源库？有人可以指出`DynamicObject`虚拟方法的概述吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:48:13.260

您不必重写 的所有方法`DynamicObject`，在大多数情况`TryGetMember`下`TrySetMember`就足够了。`DynamicObject`所有方法都有默认实现，你可以只实现你想改变的方法

`DynamicObject`是一个实现的类`IDynamicMetaObjectProvider`，因此如果您的包装器不需要任何其他基类，请使用它

实现`IDynamicMetaObjectProvider`会有点无聊，但如果你决定这样做，看看它是如何`DynamicObject`用[ILSpy实现的](http://ilspy.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:25:34.727

我有一个开源框架 ImpromptuInterface（在 nuget 中），它有一个抽象类[ImpromptuForwarder](http://code.google.com/p/impromptu-interface/wiki/UsageDynamic#ImpromptuForwarder)，它是一个[DynamicObject 子类](http://code.google.com/p/impromptu-interface/source/browse/ImpromptuInterface/src/Dynamic/ImpromptuForwarder.cs)，它的基本实现只是使用 dlr 将属性、方法和事件以及索引器的调用转发到目标。

它还有很多其他有趣的 dlr 代理，包括[静态接口类型到动态实现](http://code.google.com/p/impromptu-interface/wiki/UsageBasic)、[curring 方法](http://code.google.com/p/impromptu-interface/wiki/UsageCurry)、[后期绑定类型静态方法代理](http://code.google.com/p/impromptu-interface/source/browse/ImpromptuInterface/src/Dynamic/ImpromptuLateLibraryType.cs)。

# android - Android：暂时连接到 WiFi 网络？

> ID：13602109
> 
> 赞同：1
> 
> 时间：2012-11-28T09:44:46.767
> 
> 标签：android, wifi

当我使用以下代码连接到 8open) WLAN 网络时：

```
WifiConfiguration wifiConfig = new WifiConfiguration(); 
wifiConfig.BSSID =result.BSSID; // BSSID of detected network
wifiConfig.priority = 1; 
wifiConfig.allowedKeyManagement.set(KeyMgmt.NONE); 
wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP); 
wifiConfig.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN); 
wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE); 
wifiConfig.status=WifiConfiguration.Status.ENABLED; 

int netId = scanData.wifiManager.addNetwork(wifiConfig); 
scanData.wifiManager.enableNetwork(netId, true); 
```

...此 WiFi 连接存储在首选网络列表中。所以当我经常尝试时，我会得到一个非常庞大的连接列表——这是我不想要的。

所以我的问题是：我怎样才能暂时建立到 WLAN 网络的连接，而不让 Android 永久存储它？或者有没有办法在不再需要的情况下删除这样的网络？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:35:33.317

当您断开网络连接时，只需将其从存储列表中删除即可。在此处查看详细信息：[在 Android 中，如何通过 Java 清除设置中的 WI-FI 网络列表？](https://stackoverflow.com/questions/11529066/in-android-how-do-you-clear-the-wi-fi-list-of-networks-in-settings-via-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T03:34:22.683

您可以搜索 wifiConfig 是否已保存，然后在连接之前将其删除：如下所示：

```
List <WifiConfiguration> wifiConf = wifiManager.getConfiguredNetworks();
int netId;
for(WifiConfiguration wf: wifiConf){
    if(wf.BSSID.equals(desiredBSSID)){
        netId = wf.networkId;
        wifiManager.removeNetwork(netId);
    }
} 
```

# git - 即使没有本地更改，Git 也无法合并

> ID：13602111
> 
> 赞同：2
> 
> 时间：2012-11-28T09:44:55.553
> 
> 标签：git, merge, conflict

当我通过远程将更改下载到本地 GIT 存储库时

```
git fetch 
```

我的本地存储库的状态被报告为

```
Your branch is behind 'origin/master' by 1 commit, and can be fast-forwarded 
```

这很明显。未列出索引中的本地更改或更改。但是，当我尝试通过调用进行快进时

```
git merge origin/master 
```

我收到错误消息“您对以下文件的本地更改将被覆盖”并且列出了一个文件，我之前确实更改了该文件。奇怪的是它没有出现在状态报告中，所以我无法将它与远程版本合并。我也无法恢复更改，因为它们显然无法识别。

事实上，我想知道怎么可能没有列出本地更改，但由于本地更改，合并失败。为[类似问题](https://stackoverflow.com/questions/5074136/git-rebase-fails-your-local-changes-to-the-following-files-would-be-overwritte)提供的解决方案也对我没有帮助。

有人可以给我一个暗示可能是什么原因吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:17:22.167

尝试`git fetch`先或`git pull`然后`git rebase`。之后你应该能够进行合并

# c++ - 加速 OpenCV

> ID：13602112
> 
> 赞同：2
> 
> 时间：2012-11-28T09:44:59.983
> 
> 标签：c++, image, opencv, gpu, tbb

我正在使用 OpenCV 2.4 (C++) 在灰度图像上进行线查找。这涉及一些基本的图像处理步骤，如模糊、阈值、Canny 边缘检测器、梯度滤波器或霍夫变换。我必须在数千张图像上应用寻线算法。

考虑到大量图像，有没有办法加快计算速度？

以下其中一项是否提供帮助？英特尔 TBB、IPP 还是 OpenCV GPU？我听说 OpenCV GPU 可以加快计算速度，但数据传输速度很慢。所以在这里使用 GPU 可能不是正确的选择？

谢谢你！

编辑：

使用 TBB 的 parallel_for 来加速图像处理有什么意义吗？如果我使用这样的 for 循环：

```
for(int i=0; i<image_location.size();++i)
{
Mat img=imread(image_location[i]);
blur(img...);
threshold(img...);
...
} 
```

我可以改用 parallel_for 来提高性能吗？谁能提供示例如何使用 parallel_for 包括一些 opencv 操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:23:21.310

您的问题范围几乎是无限的。

首先，您是否测量了应用程序的性能以检测实际瓶颈？我的猜测是霍夫变换，但谁知道你的代码还在做什么。现在，如果霍夫变换是缓慢的部分，并且假设 OpenCV 有一个快速的实现，那么这就是我告诉你这个问题有问题的原因。当您决定增加已经大量的图像时，更改为更好的实现并没有多大帮助，问题在于方法本身。

你真的需要使用霍夫吗？也许您可以使用形态运算符实现类似/更好的效果？图像是否来自某个共同领域？你能包括他们的例子吗？等等等等。

# objective-c - 在进行平移手势时更改选择器

> ID：13602113
> 
> 赞同：0
> 
> 时间：2012-11-28T09:45:00.667
> 
> 标签：objective-c, ios, uipangesturerecognizer

我有一个 UIView C，它是 UIView B 的子视图，它是 UIView A 的子视图。我使用名为“selectorX”的选择器向 UIView C 添加了一个 UIPanGestureRecogizer，我希望当 UIView C 退出 UIView A 框架时，它superview 更改为 UIView A，我还想用另一个选择器“selectorY”更改它的 UIPanGestureRecognizer。

这是我的代码：

```
-(void)selectorX:(UIPanGestureRecognizer*)sender{

     CGPoint translation = [sender translationInView:self.view];
     sender.view.center = CGPointMake(sender.view.center.x, sender.view.center.y +translation.y);
    [sender setTranslation:CGPointMake(0, 0) inView:sender.view];

    UIView *uiViewC=(ImagenFichaView *)sender.view;
    if (sender.view.center.y+translation.y<-50) {
         [uiViewC removeFromSuperView]
         CGPoint newCenter=[sender locationInView:uiViewA];
         [uiViewA addSubview:uiViewC];
         uiViewC.center=newCenter;
         UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(selectorY:)];
    panRecognizer.delegate=self;
    [uiViewC removeGestureRecognizer:sender];
    [uiViewC addGestureRecognizer:panRecognizer];
    } 
```

}

一切顺利，但 2 UIPanGestureRecognizers 之间的转换不是连续的。当 uiViewC 更改其 superView 时，拖动动作停止。我必须将手指从屏幕上移开，然后重新开始移动。我该怎么做才能使运动持续进行？非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:17:38.393

为了获得连续运动，我没有从 uiViewB 中删除 uiViewC，我只是将它添加到 uiViewA 中，它解决了问题。

# automapper - Automapper 自动映射

> ID：13602114
> 
> 赞同：3
> 
> 时间：2012-11-28T09:45:03.790
> 
> 标签：automapper, dto

我有一个包含以下属性的域模型：

```
public class Profile
{
    public DateTime birthDate { get; set; }
    public List<Language> languages { get; set; }
} 
```

其中 Language 表示此处定义的枚举：

```
public enum Language
{
    English,
    French,
    Spannish
} 
```

我想根据存储在我的域模型中的语言值自动填充以下两个属性：

```
public Dictionary <int, String> languages_list { get; set; }
public List<string> languages_known { get; set; } 
```

问题是：可以使用 automapper 完成，如果可以，我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:41:12.077

好的，使用您提供的详细信息，这就是我想出的。

**课程**

```
public class SOProfile
{
    public DateTime birthDate { get; set; }
    public List<Language> languages { get; set; }
}

public class WhatAmI
{
    public Dictionary<int, String> languages_list { get; set; }
    public List<string> languages_known { get; set; }
} 
```

请注意，`Profile`已重命名`SOProfile`以避免与`AutoMapper`

**自动映射器配置**

```
public class MyProfile : Profile
{
    public override string ProfileName
    {
        get
        {
            return "MyProfile";
        }
    }

    protected override void Configure()
    {
        Mapper.CreateMap<SOProfile, WhatAmI>()
              .ForMember(dest => dest.languages_list,
                         opt => opt.MapFrom(
                             src => src.languages
                                 .Select((x,i) => new { Item = x, Index = i})
                                 .ToDictionary(x => x.Index,
                                               x => x.Item.ToString())))
              .ForMember(dest => dest.languages_known,
                         opt => opt.MapFrom(
                             src => src.languages
                                 .Select(x => x.ToString()).ToList()));
    }
} 
```

**单元测试**

```
[TestFixture]
public class MappingTests
{
    [Test]
    public void AutoMapper_Configuration_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<MyProfile>());
        Mapper.AssertConfigurationIsValid();
    }

    [Test]
    public void AutoMapper_Mapping_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<MyProfile>());
        Mapper.AssertConfigurationIsValid();

        var profile = new SOProfile
            {
                birthDate = new DateTime(2012, 01, 01),
                languages = new List<Language>
                    {
                        Language.English,
                        Language.French,
                        Language.English,
                        Language.French
                    }
            };

        var rc = Mapper.Map<SOProfile, WhatAmI>(profile);

        Assert.That(rc, Is.Not.Null);

        Assert.That(rc.languages_known, Is.Not.Null);
        Assert.That(rc.languages_known.Count, Is.EqualTo(4));

        Assert.That(rc.languages_known.Count(x => x == "English"),
                    Is.EqualTo(2));
        Assert.That(rc.languages_known.Count(x => x == "French"),
                    Is.EqualTo(2));
        Assert.That(rc.languages_known.Count(x => x == "Spanish"),
                    Is.EqualTo(0));

        Assert.That(rc.languages_list, Is.Not.Null);
        Assert.That(rc.languages_list.Count, Is.EqualTo(4));

        Assert.That(rc.languages_list.First(x => x.Key == 0).Value,
                    Is.EqualTo("English"));
        Assert.That(rc.languages_list.First(x => x.Key == 1).Value,
                    Is.EqualTo("French"));
        Assert.That(rc.languages_list.First(x => x.Key == 2).Value,
                    Is.EqualTo("English"));
        Assert.That(rc.languages_list.First(x => x.Key == 3).Value,
                    Is.EqualTo("French"));
    }
} 
```

# android - 滚动视图显示

> ID：13602115
> 
> 赞同：0
> 
> 时间：2012-11-28T09:45:05.270
> 
> 标签：android, scrollview, android-scrollview

![在此处输入图像描述](../Images/a5044e932fa736d54445aa4113b02870.png)如何在滚动视图中一次只显示一个项目？

如果我使用视图翻转器滚动将不可能，它会翻转，但我应该得到这样的效果，这样用户滚动视图可以说在我的应用程序中我使用了编辑文本和一个布局中的按钮，整个布局必须一次滚动一个。原因是如果显示多个项目，则只有整个屏幕的一小部分必须显示此滚动视图，这不足以区分每个布局（按钮 + 编辑文本）

对于 Gallery 似乎我们需要重写 onFling 并且不应该调用超类方法但是对于 ScrollView 没有 Onfling 所以要重写哪个方法以使每个视图一个项目成为可能

# c++ - Fstreams C++ 有额外的书写空间

> ID：13602124
> 
> 赞同：-2
> 
> 时间：2012-11-28T09:45:31.063
> 
> 标签：c++

我想出了一些东西，但是我对 fstreams 很烂，这简直要了我的命，对于 BREED + DESC，它们和名称之间有一个空格，但是当我完全删除它们时，我就没有空格了，它又可以工作了。有人可以告诉我我做错了什么吗？

```
#include <iostream>
#include <fstream>
#include <cstring>
#include <cctype>
using namespace std;

const int NAME_SIZE = 100;
const int BREED_SIZE = 100;
const int DESC_SIZE = 250;
const int REASON_SIZE = 250;

//creating the struct
struct animal
{
//members
    char name[NAME_SIZE];
    char breed[BREED_SIZE];
    char desc[DESC_SIZE];
    char reason[REASON_SIZE];
    float age;
    float weight;
    int day;
    int month;
    int year;
    float length;
};

class petAdoption
{
    public:
        petAdoption();
        void enroll(animal newAnimal[], int & count);
        void read(animal newAnimal[], int & count);
        //void display(animal & newAnimal);
        //void adopt(animal & newAnimal); 
    private:

};
petAdoption::petAdoption()
{

}

int main()
{
int count = 0;
animal * newAnimal = new animal[count];
petAdoption adopt;
adopt.read(newAnimal, count);
adopt.enroll(newAnimal, count);
delete[] newAnimal;
}

void petAdoption::read(animal newAnimal[], int & count)
{
    int pets = 0;
    ifstream read;
    read.open("pets.txt");
    if(!read)
    {
        cout << "Checking... File doesn't exist!" <<endl;
    }
    else 
    {
        while(!read.eof())
        {
        read.getline(newAnimal[pets].name, NAME_SIZE, '\n');
        read.ignore(100, '\n');
        ++pets;
        }
    count = pets + 1;
    }
    read.close();

    for (int i = 0; i < pets; ++i){
        read.open(newAnimal[i].name);
            if( !read)
            {
                cout << "Checking... File doesn't exist!" <<endl;
            }
        else{
            while(!read.eof())
            {
                read.getline(newAnimal[i].name, NAME_SIZE, '\n');
                read.getline(newAnimal[i].breed, BREED_SIZE, '\n');
                read.getline(newAnimal[i].desc, DESC_SIZE, '\n');
                read.getline(newAnimal[i].reason, REASON_SIZE, '\n');
                read.ignore(100, '\n');
                read >> newAnimal[i].age;
                read >> newAnimal[i].weight;
                read >> newAnimal[i].day;
                read >> newAnimal[i].month;
                read >> newAnimal[i].year;
                read >> newAnimal[i].length;
                read.ignore(100, '\n');
            }
        }
        read.close();
    }
}

/*
ENROLL FUNCTION
*/

void petAdoption::enroll(animal newAnimal[], int & count)
{
//making a write variable
    ofstream write;

//stores the name into the struct member
    cout << "Please enter a name: ";
    cin.get(newAnimal[count].name, NAME_SIZE, '\n');
    cin.ignore(100, '\n');
    cout << "Please enter a breed: ";
    cin.get(newAnimal[count].breed, BREED_SIZE, '\n');
    cin.ignore(100, '\n');
    cout << "Please enter a desc: ";
    cin.get(newAnimal[count].desc, DESC_SIZE, '\n');
    cin.ignore(100, '\n');
    cout << "Please enter a reason (EG: eats people): ";
    cin.get(newAnimal[count].reason, REASON_SIZE, '\n');
    cin.ignore(100, '\n');
    cout << "Please enter an age (EG: 5): ";
    cin >> newAnimal[count].age;
    cin.ignore(100, '\n');
    cout << "Please enter a weight (in LBS): ";
    cin >> newAnimal[count].weight;
    cin.ignore(100, '\n');
    cout << "Please enter a day (EG: 2): ";
    cin >> newAnimal[count].day;
    cout << "Please enter a month (EG: 11): ";
    cin >> newAnimal[count].month;
    cout << "Please enter a year (EG: 2002): ";
    cin >> newAnimal[count].year;
    cout << "How long has the pet been in a shelter? (in months): ";
    cin >> newAnimal[count].length;

//error
    if(!write)
    {
        cout << "Invalid File" << endl;
    }
    else{
        write.open(newAnimal[count].name, ios::app);    
        write << newAnimal[count].name << '\n'
        << newAnimal[count].breed << '\n'
        << newAnimal[count].desc << '\n'
        << newAnimal[count].reason << '\n'
        << newAnimal[count].age << '\n'
        << newAnimal[count].weight << '\n'
        << newAnimal[count].day << '\n'
        << newAnimal[count].month << '\n'
        << newAnimal[count].year << '\n'
        << newAnimal[count].length << '\n';
        write.close();
    }
    if(!write) 
    {
        cout << "Invalid File";
    }
    else {
        write.open("pets.txt", ios::app);
        write << newAnimal[count].name << '\n';
        write.close();  
    }               
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:59:49.483

正如人们提到的那样（已经回答了这个问题的早期版本）你不应该使用`eof()`来控制你的循环。此外，您应在 [尝试] 阅读后测试您是否成功收到您的输入。

`get()`如果一行是由于您使用而不是，则末尾有额外换行符的问题`getline()`：前者保留停止字符，而后者不保留。您还应该考虑使用`std::string`with `std::getline()`: 它读取任意长度的字符串。

# iphone - 如何在应用商店中找到应用下载日期？

> ID：13602125
> 
> 赞同：1
> 
> 时间：2012-11-28T09:45:38.193
> 
> 标签：iphone, ios, app-store, itunes

我想知道从应用商店下载特定应用的日期？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:49:14.197

没有直接的方法。

但是，您可以通过将第一个下载日期保存在钥匙串或其他文件中，并在您想知道时将其取回。

编辑：

即使在删除应用程序后，所有钥匙串都存储在您的设备中。假设您删除了该应用程序并再次下载它，您的钥匙串将与第一个日期和时间保持不变。

# html - 如何从mvc中的另一个目录打开html文件

> ID：13602140
> 
> 赞同：2
> 
> 时间：2012-11-28T09:46:08.210
> 
> 标签：html, asp.net-mvc

我在另一个目录中有一些 html 文件，其中包含一些 javascript、图像和 css。我想在我的站点中使用该文件并限制用户访问该 index.html 链接。我在控制器操作中使用了 return File 方法，但它无法打开该目录上的图像，因此它不起作用。什么是正确的解决方案？你有什么想法吗？

附言。（当我调试代码时，我看到 js、css 和 html 文件可以使用正确的 mime 类型打开，除了 jpg 或 png 文件）

```
public ActionResult User(string name)
{
     string file = (Server.MapPath(Url.Content("~/Content/Users/" + name)));
     string path = Path.Combine(file);
     string mime = GetMimeType(path);
     return File(path, mime);
}

public string GetMimeType(string fileName)
 {
     string mimeType = "application/unknown";
     string ext = Path.GetExtension(fileName).ToLower();
     Microsoft.Win32.RegistryKey regKey = Microsoft.Win32.Registry.ClassesRoot.OpenSubKey(ext); 
     if (regKey != null && regKey.GetValue("Content Type") != null)
      {
        mimeType = regKey.GetValue("Content Type").ToString();
      }
     return mimeType;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:44:39.377

确保在调试过程中将以下值返回给图像扩展：

```
.jpg/.jpeg => mime type: image/jpeg, 
 .png => mime type:image/png 
```

您可以使用 xml 文件，其中每个文件扩展名都映射到其 mime 类型。这将确保您的系统可以处理所有可能的扩展。[此](http://pastebin.com/94ivivP4)链接有一个建议的 xml 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:17:11.183

最好只为静态内容 mime 类型查询 IIS。这样，您就有了一个管理它们的位置。

```
using Microsoft.Web.Administration;
//--- stuff goes on ---//

ServerManager serverManager = new ServerManager();
var config = serverManager.GetApplicationHostConfiguration();
var staticContent = config.GetSection("system.webServer/staticContent");
var mimeMap = staticContent.GetCollection();
var mType =mimeMap.FirstOrDefault(a => (string) a.Attributes["fileExtension"].Value == ".pdf");
return (mType == null) ? "text/plain" : mType["mimeType"]; 
```

# javascript - 地图图像放大和缩小以及图像不同位置的标记

> ID：13602142
> 
> 赞同：0
> 
> 时间：2012-11-28T09:46:23.227
> 
> 标签：javascript, jquery, css, image, maps

我在开发移动网络应用程序时遇到了麻烦。我想允许用户将地图作为任何位置的图像上传，其他人将在其不同位置标记或添加标记。我想要这个带有放大和缩小功能的功能。我可以在不放大和缩小的情况下做到这一点。任何机构都可以通过添加放大和缩小带有标签的图像来帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:33:52.773

看看这里[https://github.com/can3p/iviewer/wiki](https://github.com/can3p/iviewer/wiki)。它是您可以使用的 jquery 组件，并且具有使用坐标和标记放大和缩小的示例。

# xml - 从 hibernate.cfg.xml 和 beans.xml 交换参数

> ID：13602145
> 
> 赞同：0
> 
> 时间：2012-11-28T09:46:38.207
> 
> 标签：xml, spring, hibernate, configuration, parameters

我有一个（也许很简单）的问题。我使用 Spring 和 Hibernate 创建了一个 osgi 包。在每台计算机上编辑 hibernate.cfg.xml 和 beans.xml 以使服务正常工作（例如数据库的 IP 地址、端口等）是非常不舒服的 - 所以我想将它交换到一个属性文件无需从源代码重建完整服务即可轻松编辑。

但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:49:38.233

您可以使用[PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)来布置配置。这允许您在启动 OSGi 框架时将数据库配置指定为系统属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:50:22.773

您不需要使用 Hibernate.cfg.xml 文件，您可以在 Spring Context 中配置所有内容，从而使用 Properties 配置器。看看[这个](https://github.com/ctapobep/hibernate-training/blob/m2.entitylifecycle/src/main/resources/org/javatalks/training/hibernate/appContext.xml)样本。

# android - android: 使用 SimpleAdapter 更新 ListView

> ID：13602162
> 
> 赞同：1
> 
> 时间：2012-11-28T09:47:18.330
> 
> 标签：android, listview, simpleadapter

我有一个带有 SimpleAdapter 的 ListView。ListView 的数据来自 json。我想每 5 分钟更新一次 ListView。这很好用......但 ListView 总是一个*double*。所有项目都在 ListView 中。为什么？然后我更新了 3 次....我尝试

```
setListAdapter(null); 
```

和

```
mylist.clear(); 
```

没有效果

```
public class StartActivity extends ListActivity {
    TextView text_1,text_2 ;
    private Timer autoUpdate;
    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
    Button btnShowLocation;

    // GPSTracker class
    GpsData gps;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        btnShowLocation = (Button) findViewById(R.id.report_btn);

        // show location button click event
        btnShowLocation.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent intent = new Intent(StartActivity.this, ReportActivity.class);
                startActivity(intent);

            }
        });

        new task().execute();
    }

     @Override
     public void onResume() {
      super.onResume();
      autoUpdate = new Timer();
      autoUpdate.schedule(new TimerTask() {
       @Override
       public void run() {
        runOnUiThread(new Runnable() {
         public void run() {
             new task().execute();
         }
        });
       }
      }, 0, 300000); // updates each 5 min
     }

class task extends AsyncTask<String, String, Void>
{
private ProgressDialog progressDialog = new ProgressDialog(StartActivity.this);
    InputStream is = null ;
    String result = "";
    protected void onPreExecute() {
       progressDialog.setMessage("Status Update...");
       progressDialog.show();
       progressDialog.setOnCancelListener(new OnCancelListener() {
    @Override
        public void onCancel(DialogInterface arg0) {
        task.this.cancel(true);
       }
    });
     }
       @Override
    protected Void doInBackground(String... params) {
           //mylist.clear();

           JSONObject json = jsonFunctions.getJSONfromURL("http://my.de", mlat, mlon);

      try{
        //String text = getString(R.string.report_TJ);
        JSONArray  earthquakes = json.getJSONArray("uTraf");

            for(int i=0;i<earthquakes.length();i++){                        
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = earthquakes.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("first", "Stau: " + e.getString("road") + ", " + e.getString("county"));
                map.put("second", e.getString("timestamp") + ", " + e.getString("suburb"));
                mylist.add(map);            
            }       
      }catch(JSONException e)        {
         Log.e("log_tag", "Error parsing data "+e.toString());
      }

            return null;

        }
    protected void onPostExecute(Void v) {
        //setListAdapter(null);
        ListAdapter adapter = new SimpleAdapter(StartActivity.this, mylist , R.layout.main, 
                new String[] { "first", "second" }, 
                new int[] { R.id.item_title, R.id.item_subtitle });

setListAdapter(adapter);

final ListView lv = getListView();
lv.setTextFilterEnabled(true);  
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
        @SuppressWarnings("unchecked")
        HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
        Toast.makeText(StartActivity.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

    }
});
            this.progressDialog.dismiss();

        } 
    }

@Override
public void onPause() {
 autoUpdate.cancel();
 super.onPause();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:56:25.857

您的问题在于`mylist.add(map);`您的 for 循环中的调用`doInBackground`。

您创建地图很好，但通过调用 add 函数，`mylist`您将其附加到列表中，而不是使用相同的键覆盖当前地图。如果您想更新列表视图中的现有项目，而不是仅仅用新数据覆盖，那么`mylist`变量可能也应该是 a `HashMap`。

编辑 - 解决方案：

在doInBackground中，就在你进入循环处理数据之前

```
(for(int i=0;i<earthquakes.length();i++)) 
```

打电话`mylist.clear()`。这将在您开始向其中添加新数据之前清空您的数组列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:52:49.663

添加方法`mylist = new ArrayList<HashMap<String, String>>();`_`doInBackGround()`

```
try{
    //String text = getString(R.string.report_TJ);
    JSONArray  earthquakes = json.getJSONArray("uTraf");
         mylist = new ArrayList<HashMap<String, String>>();

        for(int i=0;i<earthquakes.length();i++){                        
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject e = earthquakes.getJSONObject(i);

            map.put("id",  String.valueOf(i));
            map.put("first", "Stau: " + e.getString("road") + ", " + e.getString("county"));
            map.put("second", e.getString("timestamp") + ", " + e.getString("suburb"));
            mylist.add(map);            
        }       
  }catch(JSONException e)        {
     Log.e("log_tag", "Error parsing data "+e.toString());
  } 
```

# joomla2.5 - K2 评论 + reCaptcha 问题

> ID：13602164
> 
> 赞同：0
> 
> 时间：2012-11-28T09:47:26.200
> 
> 标签：joomla2.5

我刚刚在我的 joomla 2.5 站点上安装了 reCaptcha 公钥和私钥，我发现 K2 评论提交停止工作。我看到的只是一条消息：“请输入您在下面看到的 2 个单词”，在提交评论按钮上方，但没有出现任何单词。对此有什么想法吗？K2版本：2.6.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:12:42.080

由于某种原因，您的站点中没有很好地加载 jQuery。请执行下列操作：

1.  转到插件，并确保启用了 K2 系统插件（即在后端，转到扩展，选择插件管理器，检查 k2 系统插件并确保它已启用）。
2.  确保在 K2 参数下正确设置 jQuery 处理选项。你需要做的就是去后台管理，点击组件下，去K2组件。完成后，单击 k2 参数。检查“布局和视图”下。检查 jQuery 库处理；将其设置为本地加载 v.1.8.2；在后端 jQuery 和 jQuery UI 处理下也做同样的事情；将其设置为本地副本。

确保您的 k2 评论已启用，唉，一切都会正常工作。

如果上述失败 - 我很确定它不会 - 执行以下操作：

确保您的页面上没有其他 javascript 错误阻止 reCAPTCHA 运行。请记住，您的站点上只需要一份 jQuery 副本。K2 使用 $K2 命名 jQuery。

而不是以下内容：

```
$(document).ready .... 
```

您可以使用以下内容：

```
$K2(document).ready .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T19:37:18.623

确保您已将 k2 配置下的公钥和私钥设置到高级选项卡中。否则您的验证码将不会显示。

# css - GruntJS 可以获取外部文件吗？

> ID：13602166
> 
> 赞同：1
> 
> 时间：2012-11-28T09:47:35.527
> 
> 标签：css, gruntjs

例如，我有`index.css`包含指向另一个 css 文件的链接：

```
@import "http://<some_url>/bootstrap.css";
@import "http://<some_url>/plugin.css";
@import "app.css"; 
```

可以将这些文件与 Grunt JS 连接起来吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:14:39.663

查看 Grunt API，文件内容似乎只适用于本地文件。 [http://gruntjs.com/api/grunt.file](http://gruntjs.com/api/grunt.file)

此外，我在源代码中没有看到任何解析 CSS 文件以查找导入的内容。

**要将它们连接在一起：**

我建议您在本地下载文件，将它们放在您常用的 css 文件夹中，然后像往常一样使用 Grunt concat。

然后，在使用 grunt 构建之前，我会使用 wget 编写一个小脚本来下载这些依赖项的新副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:04:47.233

我知道自从被问到这个问题已经有一段时间了，但是我在尝试做类似的事情时遇到了它。这是使用 grunt 任务从 url 保存文件的一种方法。

```
module.exports = function(grunt) {
  'use strict'; 
  var http = require('http');

  grunt.initConfig({
    watch: {
      scripts: {
        files: ['**/*.cfc'],
        tasks:['saveURL']
      }
    },
    open:{
      error:{
        path:'http://<server>/rest/error.html' 
      }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-open');

  grunt.registerTask('default', ['watch']);

  grunt.registerTask('saveURL', 'Write stuff to a file', function() {
    var done = this.async();
    var reloadurl = 'http://<server>/rest/index.cfm?rl';

    grunt.log.writeln('Loading URL:' + reloadurl + ' ...');

    http.get(reloadurl, function(res) {
      var pageData = "";
      if(res.statusCode != '200'){
        //if we don't have a successful response queue the open:error task
        grunt.log.error('Error Reloading Application!: ' + res.statusCode);
        grunt.task.run('open:error');
      }
      res.setEncoding('utf8');

      //this saves all the file data to the pageData variable
      res.on('data', function (chunk) {
        pageData += chunk;
      });

      res.on('end', function(){
        //This line writes the pageData variable to a file
        grunt.file.write('error.html', pageData)
        done();
      });
    }).on('error', function(e) {
      console.log("Got error: " + e.message);
      done(false);
    });
  });

}; 
```

# java - java.lang.NoClassDefFoundError: org/apache/xpath/XPathAPI

> ID：13602167
> 
> 赞同：4
> 
> 时间：2012-11-28T09:47:36.693
> 
> 标签：java, xalan

我正在通过main在eclipse中执行一个类，结果我收到了这个错误

```
java.lang.NoClassDefFoundError: org/apache/xpath/XPathAPI 
```

我正在使用 jRE6。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T09:50:14.090

确保你有`xalan-2.7.1.jar`你的构建路径。

[http://mirrors.ibiblio.org/pub/mirrors/maven2/xalan/xalan/2.7.1/xalan-2.7.1.jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/xalan/xalan/2.7.1/xalan-2.7.1.jar)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T09:53:55.010

您必须将[apache xpath 库](http://xml.apache.org/xalan-j/xpath_apis.html)添加到您的类路径。

# python - 带有本地套接字的 Python PaaS

> ID：13602169
> 
> 赞同：2
> 
> 时间：2012-11-28T09:47:46.913
> 
> 标签：python, sockets, paas

这可能是一个愚蠢的问题……但是是否有任何 PaaS 平台允许我托管可以通过套接字控制我的*本地应用程序的 python 代码？*

我们通过 python 自动化了许多应用程序任务，但理想情况下我们希望托管代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:45:12.657

Cloudify[开源](http://www.cloudifysource.org)PaaS 堆栈允许您运行任何您想要的代码。因此，作为 Cloudify 'recipe' 的一部分，您可以安装 python 并运行您的代码。Cloudify 将处理机器配置、日志记录等。

您可以在受支持的云之一中运行 Cloudify，或者使用本地可用机器使用自带节点云驱动程序：http: [//www.cloudifysource.org/guide/2.2/setup/configuring_byon.html](http://www.cloudifysource.org/guide/2.2/setup/configuring_byon.html)。

免责声明：我为[Cloudify](http://www.cloudifysource.org)开源 PaaS 堆栈的开发人员 GigaSpaces 工作。

# python - 如何在不知道哪个更大的情况下找到两个值之间的差异？

> ID：13602170
> 
> 赞同：64
> 
> 时间：2012-11-28T09:47:48.740
> 
> 标签：python, function, numbers, distance

我想知道 Python 中是否有一个函数可以确定两个有理数之间的距离，但我没有告诉它哪个数字更大。例如

```
>>>distance(6,3)
3
>>>distance(3,6)
3 
```

显然我可以写一个简单的定义来计算哪个更大，然后做一个简单的减法：

```
def distance(x, y):
    if x >= y:
        result = x - y
    else:
        result = y - x
    return result 
```

但我宁愿不必调用这样的自定义函数。根据我有限的经验，我经常发现 Python 有一个内置函数或模块，可以完全按照您的意愿执行操作，并且比您的代码执行速度更快。希望有人能告诉我有一个内置函数可以做到这一点。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-11-28T09:49:13.653

`abs(x-y)`将完全符合您的要求：

```
In [1]: abs(1-2)
Out[1]: 1

In [2]: abs(2-1)
Out[2]: 1 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-10-16T20:23:01.227

尽管**`abs(x - y)`**并且等效地**`abs(y - x)`**起作用，但以下单行代码也起作用：

*   **`math.dist((x,), (y,))`**（在 Python ≥3.8 中[可用）](https://docs.python.org/3/library/math.html#math.dist)

*   `math.fabs(x - y)`

*   `max(x - y, y - x)`

*   `-min(x - y, y - x)`

*   `max(x, y) - min(x, y)`

*   `(x - y) * math.copysign(1, x - y)`，或等效`(d := x - y) * math.copysign(1, d)`地在 Python ≥3.8

*   `functools.reduce(operator.sub, sorted([x, y], reverse=True))`

所有这些都返回欧几里德*距离（x，y）*。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-15T09:09:51.503

如果你有一个数组，你也可以使用[`numpy.diff`](https://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.diff.html)：

```
import numpy as np
a = [1,5,6,8]
np.diff(a)
Out: array([4, 1, 2]) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-28T09:49:13.243

只需使用`abs(x - y)`. 这会将两者之间的净差作为正值返回，无论哪个值更大。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-19T16:17:33.967

这并没有解决最初的问题，但我想我会扩展 zinturs 给出的答案。如果您想确定任意两个数字之间的适当符号距离，您可以使用如下自定义函数：

```
import math

def distance(a, b):
    if (a == b):
        return 0
    elif (a < 0) and (b < 0) or (a > 0) and (b > 0):
        if (a < b):
            return (abs(abs(a) - abs(b)))
        else:
            return -(abs(abs(a) - abs(b)))
    else:
        return math.copysign((abs(a) + abs(b)),b)

print(distance(3,-5))  # -8

print(distance(-3,5))  #  8

print(distance(-3,-5)) #  2

print(distance(5,3))   # -2

print(distance(5,5))   #  0

print(distance(-5,3))  #  8

print(distance(5,-3))  # -8 
```

请分享更简单或更 Pythonic 的方法，如果你有的话。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T09:49:29.410

使用此功能。

它与您想要的相同约定。使用python的简单abs特性。

还有——有时答案很简单，我们想念它们，没关系:)

```
>>> def distance(x,y):
    return abs(x-y) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-11T16:13:58.343

如此简单，只需使用 abs((a) - (b))。

无需任何额外注意迹象（正面，负面）即可无缝工作

```
def get_distance(p1,p2):
     return abs((p1) - (p2))

get_distance(0,2)
2

get_distance(0,2)
2

get_distance(-2,0)
2

get_distance(2,-1)
3

get_distance(-2,-1)
1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-23T16:40:12.603

如果您打算使用 phi 发布的有符号距离计算片段（就像我所做的那样）并且您的 b 值可能为 0，您可能需要修复如下所述的代码：

```
import math

def distance(a, b):
    if (a == b):
        return 0
    elif (a < 0) and (b < 0) or (a > 0) and (b >= 0): # fix: b >= 0 to cover case b == 0
        if (a < b):
            return (abs(abs(a) - abs(b)))
        else:
            return -(abs(abs(a) - abs(b)))
    else:
        return math.copysign((abs(a) + abs(b)),b) 
```

当 a > 0 和 b == 0 时，原始代码段无法正常工作。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-11-15T14:36:30.510

abs 函数绝对不是您需要的，因为它不计算距离。试试 abs (-25+15) 看看它不起作用。数字之间的距离为 40，但输出为 10。因为它正在做数学运算，然后删除前面的“减号”。我正在使用这个自定义功能：

```
 def distance(a, b):
    if (a < 0) and (b < 0) or (a > 0) and (b > 0):
        return abs( abs(a) - abs(b) )
    if (a < 0) and (b > 0) or (a > 0) and (b < 0):
        return abs( abs(a) + abs(b) )

print distance(-25, -15)
print distance(25, -15)
print distance(-25, 15)
print distance(25, 15) 
```

* * *

## 回答 #10

> 赞同：-6
> 
> 时间：2014-04-08T19:35:33.653

你可以试试：a=[0,1,2,3,4,5,6,7,8,9];

[abs(x[1]-x[0]) for x in zip(a[1:],a[:-1])]

# ios - 设置 `ECSlidingViewController` 的子类

> ID：13602177
> 
> 赞同：0
> 
> 时间：2012-11-28T09:48:13.713
> 
> 标签：ios, xcode, uiviewcontroller

我正在尝试在我的项目中添加 ECSlidingViewController，但我是 iOS 的新手，我不知道该怎么做才能按照说明进行操作：“将 UIViewController 添加到故事板并将子类设置为`ECSlidingViewController`”

我已经添加了 UIViewController，但是现在如何设置子类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:04:05.373

假设您在 StoryBoard 中添加了一个名为“InitialSlidingViewController”的 UIViewController。然后在 InitialSlidingViewController.h 中，您应该如下进行接口声明。

```
@interface InitialSlidingViewController : ECSlidingViewController 
```

请查看“ECSlidingViewController”给出的演示。到时候你就会明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:05:10.853

我不使用情节提要，但听起来您必须在身份检查器中为此控制器设置自定义类。

![xcode 身份检查器](../Images/b68d427cdb87b06b619bcf425f107edd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:58:07.160

我认为你的类和子类是错误的。

您正在创建的是一个名为`ECSlidingViewController`的类，它是`UIVIewController`.

在您 ECSlidingViewController.h 中，您应该具有以下内容...

```
@interface ECSlidingViewController : UIViewController 
```

这意味着您正在定义一个名为的类`ECSlidingViewController`，它是`UIViewController`.

# cocoa - 在基于文档的应用程序中保存 ManagedObjectContext？

> ID：13602178
> 
> 赞同：0
> 
> 时间：2012-11-28T09:48:13.853
> 
> 标签：cocoa, core-data

我在将 MOC 保存在 PersistentDocument 中时遇到问题。

我在我的 MOC 中插入一个新的 MO 并保存（例如）

```
 NSManagedObject *person=[[NSManagedObject alloc] initWithEntity:[NSEntityDescription entityForName:@"Person" inManagedObjectContext:self.managedObjectContext] insertIntoManagedObjectContext:self.managedObjectContext];

    if(person)
    { 
        [person setValue:@"test" forKey:@"name"];
        NSError *error;
        [self.managedObjectContext save:&error];
    } 
```

此时我必须保存 MO，因为我的后台线程需要它的 NOT 临时 objectID 才能对实体进行一些计算。

但是当我以这种方式保存 MOC 时，我得到了一个请求者

无法保存文档“Untitled.binary”。该文件已被另一个应用程序更改。

单击“仍然保存”以保留您的更改并将其他应用程序所做的更改另存为一个版本，或单击“恢复”以保留来自其他应用程序的更改并将您的更改另存为一个版本。

下次文档尝试保存其内容时。我不能保存文档，因为它可能仍然是一个无标题的文档，并且调用 [document save] 会打开保存请求器，这对用户来说不是很舒服。

有什么解决办法吗？

谢谢

克劳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:36:37.683

与其试图拯救你的 MOC，不如试试

```
[self.managedObjectContext processPendingChanges]; 
```

我在我正在开发的应用程序上遇到了同样的问题，其中刚刚所做的更改将无法参考。我尝试保存 MOC 并不断收到相同的消息。调用 processPendingChanges 对我有用。

# xaml - 如何在 Cocos2d 中为 Windows 8 Metro 应用程序构建 xaml ui？

> ID：13602183
> 
> 赞同：0
> 
> 时间：2012-11-28T09:48:27.280
> 
> 标签：xaml, windows-8, cocos2d-iphone

我们一直在使用 cocos2d 构建 windows 8 地铁游戏。所以我们想在 cocos2d 中使用 xaml 控制 UI 吗？有解决方案或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:52:51.597

这是我的 github 中的一个模板项目：

[https://github.com/chanyuenpang/cocos2dxaml](https://github.com/chanyuenpang/cocos2dxaml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:44:45.187

试一晚，我已经解决了这个问题。您可以点击流程链接：

DirectX 和 XAML 互操作（使用 C++ 和 DirectX 的 Windows 应用商店应用程序）(Windows) [http://msdn.microsoft.com/en-us/library/windows/apps/hh825871.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh825871.aspx)

随着 Windows 8 的发布，您可以在 Windows 应用商店应用中同时使用 XAML 和 Direct X。XAML 和 DirectX 的结合让您可以构建灵活的用户界面框架，与您的 DirectX 呈现的内容进行互操作，并且对于图形密集型应用程序特别有用。我们解释了使用 DirectX 的 XAML 应用程序的结构，并确定了在构建 XAML 应用程序以使用 DirectX 时要使用的重要类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:52:17.950

解决方案为fllow链接：
[http ://www.cnblogs.com/chenkai/archive/2012/11/29/2794983.html](http://www.cnblogs.com/chenkai/archive/2012/11/29/2794983.html)

陈凯

# c# - 无需管理员权限即可创建 Outlook 插件

> ID：13602186
> 
> 赞同：9
> 
> 时间：2012-11-28T09:48:32.197
> 
> 标签：c#, outlook, vsto, add-in, admin-rights

我编写了一个带有一些基本功能的 Outlook 插件来访问 Web 服务并在其上执行方法。一切都像魅力一样，除了我似乎无法摆脱用户需要管理员权限才能安装此加载项的事实。谷歌似乎并没有真正为我提供解决方案或答案。

是否可以编写用户无需管理员权限即可安装的 Outlook 插件（VSTO **）**？

提前非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T20:02:05.757

**这取决于您是要按用户安装还是按机器安装。**

主要区别在于注册表项的保存位置，在 HKLU 下或 HKLM 下：

![在此处输入图像描述](../Images/2ecde67815aa343128e80afd5a7f3a89.png)

另一个主要区别是 Per-User 默认设置为安装在 Users 文件夹中，而 Per-Machine 默认设置为 Program Files。

正如@Aron 提到的某些先决条件可能需要管理员权限才能安装。如果您知道客户端安装了正确的 .Net 版本，则可能。否则，您可能需要[在没有 .Net 的情况下运行 VSTO 插件](http://spoon.net/studio)。注意：Microsoft Info 路径完全用 .Net 编写，因此如果用户安装了完整的 office 版本，则应该已经安装了 .Net 2.0（可能是更新版本，具体取决于版本）。

**避免 UAC 提示的最简单方法是运行 MSI 而不是 setup.exe。**因为 setup.exe 负责下载/安装组件（如 dotnet）。运行 MSI 不会要求管理员。

还要注意 MSI 命令行用法以查看所有开关（例如 /quiet）：

开始 > 运行 > CMD > Enter

```
c:\Apps\App1\Release\app.MSI /? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-05T16:31:42.813

我知道这真的很老了，但是这个过程仍然没有太多帮助。

如果您的唯一目标是与某人共享您的项目而不是专门“安装”，则一种可能的解决方案。我确信这种方法存在一些问题，但它真的很简单，到目前为止它适用于我的团队的简单项目。此外，我的团队不允许在他们的开发机器上访问 Internet，这使标准发布过程变得复杂。

**发布项目。（这是针对 VS2017 你的可能不同）**

1.  构建项目。我在发布模式下构建，但调试可能会工作。
2.  发布项目。
    1.  在解决方案资源管理器中右键单击您的项目并选择属性。
    2.  选择发布选项卡。
    3.  确保发布文件夹位置是“publish/”（或更一般地说是相对文件路径）
    4.  点击立即发布

**接下来我们需要将其直接添加到某人的办公程序中。你可以直接添加**

1.  文件菜单下的打开选项
2.  转到加载项选项卡
3.  确保在下拉列表中选择“Com Add-ins”，然后单击“Go...”按钮
4.  对话框打开后，单击“添加...”按钮
5.  导航到“/bin/release/app.publish/”并选择 setup.exe 文件。
6.  重新启动 Office 程序。

现在应该添加您的 vsto 加载项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:54:03.250

答案是肯定的和否定的。就其本身而言，可以通过 ClickOnce 安装没有管理员权限的 VSTO 插件。

但是，某些先决条件可能需要管理员权限才能安装（例如 dotnet）。

所以在一般情况下没有。但这也许是可能的。

# git - Git新手-我应该多久推送一次Heroku

> ID：13602187
> 
> 赞同：0
> 
> 时间：2012-11-28T09:48:31.293
> 
> 标签：git, heroku, push, development-environment

我习惯了使用 FTP 的传统方式——我只需上传一个 chaged 文件并刷新页面以查看更改。

但是，使用 Git 可以这样做吗？或者我应该在我的 PC 上运行本地服务器，然后将最终的完整版本推送到 Heroku Master？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:51:39.267

Git 不是 FTP 的替代品。IMO 你应该总是在本地系统上开发。尽可能定期地用有用的评论提交重大更改。当您需要在 Heroku 中查看应用程序时，或者如果您偏执地需要远程备份您的 Git 存储库时，请推送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:20:56.323

如果您与其他人一起发展，那么在一天结束时每天推送是可以的。因此，从远程拉取时，每个人都会在自己的机器上拥有一致的 repo。

# android - java.lang.SecurityException：需要 Jelly Bean 4.2 上的 VIBRATE 权限

> ID：13602190
> 
> 赞同：35
> 
> 时间：2012-11-28T09:48:48.220
> 
> 标签：android, notifications, push, android-4.2-jelly-bean

从昨天开始，当我收到推送通知时，我在 Android 4.2 上遇到问题，即使我没有将其设置为振动，它也需要权限

```
Notification notification = new Notification(icon, notificationItem.message, when);
notification.setLatestEventInfo(context, "App", notificationItem.message,
            PendingIntent.getActivity(context, 0, intent, 0));
notification.flags |= Notification.FLAG_AUTO_CANCEL;
notification.defaults |= Notification.DEFAULT_SOUND;

NotificationManager nm =
            (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
nm.notify(notificationItem.notificationID, notification); 
```

异常由 nm.notify 引发

我在两个不同的应用程序中遇到了这个问题，我从不修改代码

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-01-03T07:13:52.357

我在 Jelly Bean 4.1.2 中遇到了同样的异常，**然后按照我为解决这个问题所做的更改**

1.在清单文件中添加权限。

```
 <uses-permission
 android:name="android.permission.VIBRATE"></uses-permission> 
```

2.Try-Catch 覆盖的Notification 撰写

```
 try
    {
        mNotificationManager = (NotificationManager)          
        this.getSystemService(Context.NOTIFICATION_SERVICE);
        NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                        this)
                .setSmallIcon(R.drawable.ic_notif_alert)
                .setContentTitle(getResources().getString(R.string.app_name))
                .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))
                .setContentText(msg)
                .setStyle(bigTextStyle)
                .setDefaults(Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE);
            mBuilder.setAutoCancel(true);
            mBuilder.setContentIntent(contentIntent);
            mNotificationManager.notify(NOTIFICATION_ID, mBuilder.build());
            Log.d(TAG, "---- Notification Composed ----");
    }
    catch(SecurityException se)
    {
        se.printStackTrace();
    }
    catch(Exception e)
    {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-03-14T05:47:39.097

由于此错误仅发生在 Android 4.2 和 4.3 上，您可以将其用作解决方法（即包括 maxSdkVersion）：

```
<uses-permission android:name="android.permission.VIBRATE" android:maxSdkVersion="18"/> 
```

注意：maxSdkVersion 属性仅在 API 级别 19 中添加，幸运的是，这正是我们想要的最小值！理论上，我们可以设置任何值 <= 18 来获得相同的效果，但这会很糟糕。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-12-05T04:39:57.853

由于通知振动策略的变化，这是 Android 4.2 中的一个错误；4.2.1 中的[此更改](https://android.googlesource.com/platform/frameworks/base/+/cc2e849)修复了权限错误。

# c - 如何使用递归函数仅打印树的 5 个节点

> ID：13602200
> 
> 赞同：4
> 
> 时间：2012-11-28T09:49:16.437
> 
> 标签：c, printing, recursion, tree

所以基本上我只想使用递归打印 AVL 树的前 5 个节点

```
 void printInOrder(void* theTree, void(*printnode)(void *data)) {

        struct AVLTreeNode *node= (struct AVLTreeNode*)theTree;

        if (node == NULL) return;

         printInOrder(node->left, printnode);

        (printnode)(node->data);

        printInOrder(node->right, printnode);

     } 
```

上面的代码是一个递归的中序打印我只想修改它只打印出树的前 5 个节点。这里也是printnode函数

```
 void printnode(void *node){

        struct todo *printnode = node;

        printf("%s, %d\n", printnode->activity, printnode->priority);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:53:11.733

您必须告诉该函数何时停止：您可以提供一个计数器，说明仍有多少节点可打印（最初为 5 个），每次实际打印一个节点时，您就减少计数器。

（或者您可以*增加*计数器，但在这种情况下，检查有两个术语 - 当前计数器值和最大计数器值 - 您需要将两者都作为参数传递，或者将它们设为全局变量）。

如果您需要在打印之外做一些事情，或者需要更灵活的

```
int printInOrder(void* theTree, int remaining, void(*printnode)(void *data))
{
    if (0 == remaining)
        return 0;
    struct AVLTreeNode *node= (struct AVLTreeNode*)theTree;
    if (node == NULL) return remaining;
    remaining = printInOrder(node->left, remaining, printnode);

    // When actually printing nodes, decrement counter
    (printnode)(node->data); remaining--;

    return printInOrder(node->right, remaining, printnode);
}

printInOrder(tree, 5, ...); 
```

如果除了打印之外还需要做一些事情，或者需要更灵活的功能，你可以做同样的事情，但将参数传递给`printnode`：

```
void printInOrder(void* theTree, int remaining, int(*printnode)(int r, void *data))
{
    struct AVLTreeNode *node= (struct AVLTreeNode*)theTree;
    if (node == NULL) return remaining;
    printInOrder(node->left, remaining, printnode);
    remaining = (printnode)(remaining, node->data);
    printInOrder(node->right, remaining, printnode);
} 
```

在第二种情况下，它是`printnode`操纵计数器，而`printInOrder`只是传递它。现在，`printnode`为每个节点调用一次，但仅当计数器非零时才进行实际打印，并且在所有情况下都可以进行任何其他内务处理。

# android - 如何在 Android 上查询大型 XML 文件

> ID：13602202
> 
> 赞同：1
> 
> 时间：2012-11-28T09:49:23.263
> 
> 标签：android, xml

我正在尝试使用包含字典条目的 gzipped xml 文件 (1,25 mb) 在 Android 上编写字典应用程序。

我不确定如何搜索 xml 文件。有 XPath，但它将整个文件加载到内存中。那么我应该研究流式传输（SAX、vdt-xml、...）还是尝试从 XML 文件创建 SQL 数据库？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:36:17.180

我最终使用 python 脚本从 XML 创建了一个 SQLite DB，然后将 db 文件复制到系统数据库路径中，如本答案中所述：

[https://stackoverflow.com/a/620086/1822977](https://stackoverflow.com/a/620086/1822977)

像魅力一样工作！

# javascript - 检查鼠标悬停在 div 上时是否按下了键

> ID：13602203
> 
> 赞同：2
> 
> 时间：2012-11-28T09:49:24.667
> 
> 标签：javascript, html, css

**在不**使用 jQuery 或类似库的情况下悬停某个元素 ( `div`)时是否可以检查是否按下了键盘上的键？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:01:09.610

这是一个纯JS实现：

```
myElement = document.getElementById('mydiv');

function keyaction(e){
    myElement.innerHTML+= String.fromCharCode(e.charCode);
}

myElement.addEventListener("mouseover",function() {
    document.addEventListener("keypress", keyaction);
});

myElement.addEventListener("mouseout",function() {
    document.removeEventListener("keypress", keyaction, false);
}); 
```

这是一个演示：http: [//jsfiddle.net/bAV6f/1/](http://jsfiddle.net/bAV6f/1/)

`div`当它悬停时输入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T10:02:03.050

这是一个简单的 JavaScript 解决方案：

```
var yourDiv = document.getElementById("yourdiv"); //cache your div
var keyPressed = 0; //kinda-boolean flag, if it's not 0 then at least one key is pressed
document.onkeydown = function() { //when a key is "down"
    keyPressed ++; //increment the counter of "down" keys
};
document.onkeyup = function() { //when a key is "released"
    keyPressed --; //decrement the counter of "down" keys
    keyPressed = Math.max(0, keyPressed); //make sure it doesn't go negative
};
yourDiv.onmouseover = function() { //when you hover your div
    if(keyPressed !== 0) { //if a key is pressed
        //do stuff
    }
}; 
```

以上仅在鼠标**进入**您的`div`. 如果您希望它在其内部移动时触发，请改用该`onmousemove`事件：

```
yourDiv.onmousemove = function() { //when the mouse moves inside your div
    if(keyPressed !== 0) { //if a key is pressed
        //do stuff
    }
}; 
```

请注意，您可以使用而`addEventListener`不是直接设置`onkeydown`和-- 但概念保持不变。`onkeyup``onmousemover`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:55:22.250

你的答案是肯定的，这是可能的。

您必须在 div 上的悬停 (onmouseover) 上添加一个 javascript 事件，该事件在同一 div 上设置 keydown 事件。

当用户再次停止悬停（onmouseout）时，您必须删除 keydown 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:18:47.570

### 简短回答者

**是**的，有可能

### 但是，如果可能的话怎么办？

好吧，使用 Jquery 非常简单：

```
$("div#selector").mouseover(function(e) {
  if (e.ctrlKey)
    alert('You are hover selector and pressing ctrl');
  if (e.altKey)
    alert('You are hover selector and pressing alt');
  if (evt.which == 77)
    alert('You are hover selector and pressing m');
  ...
}); 
```

查看此[键列表](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)以了解与字符关联的 javascript 键码

**编辑**：我刚刚阅读了您关于不使用 jQuery 的评论，该评论应包含在问题中

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T09:56:36.120

您可以为此目的使用 jquery

```
$("p").hover(function(){
//Your code
}); 
```

或者

```
$(".selector").on({
mouseenter: function () {
//stuff to do on mouseover
}, 
mouseleave: function () {
//stuff to do on mouseleave

}

}); 
```**

# java - 迭代优先级队列抛出 ConcurrentModificationException

> ID：13602204
> 
> 赞同：0
> 
> 时间：2012-11-28T09:49:24.980
> 
> 标签：java, collections

```
PriorityQueue<Integer> queue = new PriorityQueue<Integer>(4);
queue.add(8);
queue.add(5);
queue.add(23);
queue.add(6);
for(int i:queue)
   System.out.println(queue.remove()); 
```

前面的代码抛出 ConcurrentModificationException。我没有看到任何修改优先级队列的线程。我确实理解它也是不同步的集合。我正在使用 Oracle Java SDK 6.0 运行 Ubuntu 12.10。
这个问题看起来很有趣。有人可以解释一下吗？是缺陷吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:51:30.453

你应该只使用 ITERATOR.remove() 方法。它是保证你没有 ConcurrentModificationException 的唯一方法

只有一个线程。但是当您对每个线程进行迭代时，您实际上是通过从中删除元素来修改队列，因此您实际上最终会在您想要的不同步骤中修改队列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:54:49.083

当您迭代任何集合时，您只能使用 Iterator.remove() 来安全地删除该迭代器的条目（而不是其他）。这是自 Java 1.2 引入 Iterator 以来一直存在的一个已知问题。

注意：并发集合保持“弱一致性”，允许您在修改集合时对其进行迭代。

# android - 网格视图底部的进度条

> ID：13602210
> 
> 赞同：4
> 
> 时间：2012-11-28T09:49:38.240
> 
> 标签：android, gridview, progress-bar

我有一个 GridView，它第一次显示了 15 个视图的网格。然后，单击一个按钮，我再添加 5 个网格视图。所以，我的问题是：当这 5 个视图正在加载时，如何在页面底部添加一个 ProgressBar？就像一个微调加载和 5 个视图得到更新。

嗨，我有一个选项卡主机 tabwidget，用于在框架布局内的选项卡和网格视图。现在如果我想要进度条，那么我是否需要在框架布局之后或内部框架 laoyout 中包含这个线性布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:01:54.330

`GridView`在 XML 中将其添加到您的下方。

```
<LinearLayout
    android:id="@+id/linlaProgressBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal" >

    <ProgressBar
        style="@style/Spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dp" />
</LinearLayout> 
```

在你`Activity`加载数据的地方（假设它是一个`AsyncTask`），在你的`onPreExecute()`展示中：

```
@Override
protected void onPreExecute() {
    // SHOW THE BOTTOM PROGRESS BAR (SPINNER) WHILE LOADING MORE PHOTOS
    linlaProgressBar.setVisibility(View.VISIBLE);
} 
```

在 中`onPostExecute()`，隐藏它：

```
@Override
protected void onPostExecute() {
    // SHOW THE BOTTOM PROGRESS BAR (SPINNER) WHILE LOADING MORE PHOTOS
    linlaProgressBar.setVisibility(View.GONE);
} 
```

如果您不使用，则在开始下载数据的方法开始时`AsyncTask`将可见性设置为，并将其设置为在设置.`View.VISIBLE``View.GONE``Adapter`

**编辑：**添加附加信息。

几件事。

1.  您正在从 Internet 下载数据，我建议您切换到`AsycnTask`而不是使用传统的`() Method`.
2.  几天前在这里查看我对类似问题的回答：[https ://stackoverflow.com/a/13265776/450534](https://stackoverflow.com/a/13265776/450534)

在该答案中，您将找到适合您确切需求的完整解决方案。好吧，几乎完全无论如何。您可能需要自己进行一些修改并适应一些事情。但总的来说，它会回答你所有的问题。我在我的应用程序中使用它，它们的功能就像你说的那样，底部的 Google Play*加载文本。*它真的是完整的。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:28:54.730

在 GridView 的 xml 中添加一个并设置其属性 "alignParentRight = true" 和 "visibility = invisible" 。在您的活动中，使用 Async 任务类并在其 preExectue 方法集上将其可见性设置为可见

`pb.setVisibility(View.VISIBLE);`

在 doInBackground 方法中加载您的图像，最后在 onPostExecute 方法中使此进度条不可见。

```
pb.setVisibility(View.INVISIBLE); 
```

单击加载按钮执行此异步任务类。

这是理解 asyncTask 的简单教程

[http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

或者可以使用线程代替异步任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:57:02.530

您需要为此创建自定义视图并将其充气并添加为gridview中的底部视图

```
<RelativeLayout
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
>

<Button android:text="Load"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_centerInParent="true"
/>          

<ProgressBar 
       android:layout_width="25.0dip"
       android:layout_height="25.0dip"
       android:layout_centerInParent="true"
       android:visibility="gone"
/>

</RelativeLayout> 
```

现在膨胀这个视图并在gridview的底部显示进度条当您单击可见的进度条时，您可以将按钮设置为底部

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:58:39.670

只需`ProgressBar`在您的布局中添加一个，将其可见性设置为`VISIBLE`或`GONE`在您想要显示/隐藏它时设置。

# dsl - 可调试的领域特定语言

> ID：13602211
> 
> 赞同：2
> 
> 时间：2012-11-28T09:49:39.480
> 
> 标签：dsl

我的目标是为我的应用程序开发一个 DSL，但我希望用户能够在他/她的 DSL 中设置一个断点，**而无需**用户了解有关 DSL 运行的底层语言的任何信息，而他/她看到的是DSL 相关的语法、堆栈、监视变量等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:53:28.823

这取决于您的目标平台。例如，如果你在 .NET 上实现你的 DSL 编译器，用调试信息（变量名、表达式和语句的源代码位置等）注释你的字节码是很简单的。

如果您还为您的语言提供 Visual Studio 扩展，您将能够重用免版税的 MSVS 隔离 Shell 来编辑和调试您的 DSL 代码。

JVM 可以使用几乎相同的方法（您可以使用 Eclipse 或 Netbeans 作为调试前端）。

原生代码生成稍微复杂一些，但仍然可以做一些简单的事情，比如生成填充了`line`pragma 的 C 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:58:06.447

您基本上需要为您的 DSL 生成具有内置断点机会的代码，每个断点都具有用于观察内部状态变量的内置设施。然后您的调试器就知道如何将 DSL 中的位置映射到调试断点，并且对于每个断点，只需调用观察者。（如果观察者有名字，例如变量名，你可以让用户选择要调用的名字）。

# c# - WPF - 在不同的对话框上绑定两个属性

> ID：13602215
> 
> 赞同：0
> 
> 时间：2012-11-28T09:49:51.890
> 
> 标签：c#, wpf

我在不同 XAML 文件中与 CheckBox 相关的不同对话框（类）上有两个选项：

**第一对：**

*C＃：*

```
public class FirstClass : DependencyObject
{
   public static readonly DependencyProperty testProperty = 
      DependencyProperty.Register("testProperty", typeof(bool),
      typeof(FirstClass), 
      new UIPropertyMetadata(false));

   public bool testProperty
   {
      get { return (bool)this.GetValue(testProperty); }
      set { this.SetValue(testProperty, value); }
   }
} 
```

*XAML：*

```
<CheckBox IsChecked="{Binding Path=testProperty, Mode=TwoWay}"> 
```

**第二对：**

*C＃*

```
public class SecondClass : DependencyObject
{
   public static readonly DependencyProperty testProperty =
      FirstClass.testProperty.AddOwner(typeof(SecondClass));

   public bool testProperty
   {
      get { return (bool)this.GetValue(testProperty); }
      set { this.SetValue(testProperty, value); }
   }
} 
```

*XAML：*

```
<CheckBox IsChecked="{Binding Path=testProperty, Mode=TwoWay}"> 
```

我想将第一个对话框中的选项绑定到第二个对话框中的选项（A<=>B）。如果第一个对话框中的 CheckBox 被选中，那么第二个对话框中的 CheckBox 也应该被选中。我应该为此目的使用*ApplicationSettings吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:19:20.530

DataBinding不仅仅是两个依赖属性之间的绑定过程，也是一个CLR和一个依赖属性之间的绑定过程。事实上，它通常是最常见的绑定场景。所以你可以做的是使用一个模型对象来存储你的 ui 元素的值，并在另一个视图或另一个控件中重用它。首先，我建议您不要使用 DependencyObject 派生对象作为您的数据持有者，虽然它仍然有效，但它也有它的缺点。

首先是我们的数据对象，它只存储我们的数据。请查找如何实现 INotifyPropertyChanged 接口，因为为了便于阅读，我离开了实现。

```
class DataHolder : INotifyPropertyChanged
{
    public bool MyValue
    {
        get{return mMyValue;}
        set{mMyValue = value; RaiseProperty("MyValue");}
    }

    private bool mMyValue;
} 
```

这个对象现在可以在 UI DataContext 的帮助下轻松绑定到您的 ui 元素。重要的是要知道 DataContext 是一个继承的依赖属性，这意味着在控件树中，如果一个元素没有设置数据上下文，它会自动获取其父级的数据上下文。考虑一个带有用户名和密码的登录对话框。如果你有一个简单的模型，它有两个属性，比如用户名和密码，你只需将此模型设置为对话框的数据上下文，所有控件都可以绑定到这些属性。回到您的示例，您只需将 DataHolder 的一个实例设置为您的窗口 datacontext 属性

```
public MainWindow()
{
    InitializeComponents();
    var model = new DataHolder();
    DataContext = model;
} 
```

现在您可以像这样在您的 xaml 中使用绑定

```
<CheckBox IsChecked="{Binding MyValue, Mode=TwoWay}"/> 
```

多个控件可以绑定到同一个属性，打开另一个视图时可以使用同一个模型。

最后一个建议，您应该阅读[msdn 的 DataBinding 一章，这](http://msdn.microsoft.com/en-us/library/ms752347.aspx)是了解[MVVM 模式](http://en.wikipedia.org/wiki/Model_View_ViewModel)的好主意，因为它与 WPF 一起广泛使用并取得了巨大成功。我们将它用于相当大的应用程序并且对它非常满意。

# c++ - 将外部数据从 DLL 转发到核心程序的前向声明

> ID：13602220
> 
> 赞同：1
> 
> 时间：2012-11-28T09:50:11.547
> 
> 标签：c++, forward-declaration, dynamic-library, proxy-pattern

我正在编写一个 dll，其中包含一个 c++ 类定义和一个基于代理模式的核心程序，如本教程所述：[http ://www.linuxjournal.com/article/3687](http://www.linuxjournal.com/article/3687)

具体来说，这个dll在加载到核心程序上后，会在核心程序的数据结构中填入它的定义，包括类名、方法名、方法的函数指针。

但是，我想针对不同种类的类修改这种模式，而不是在文章中只修改一种基类，这就是我使用函数指针的原因。

我的程序如下：

```
//the base class
class common_object{
};

//this factory is used for storing constructor for each c++ class in the dll.
typedef common_object *maker_t();
extern map< string, maker_t* > factory;

//store all the methods of a class
//string: method's name
typedef map<string, proxy::method> method_map;
//string: class's name
extern map<string, method_map> class_map_;

// our global factory
template<typename T>
class proxy {
public:
    typedef int (T::*mfp)(lua_State *L);
    typedef struct {
        const char *class_name;
        const char *method_name;
        mfp mfunc;
    } method;

    proxy() {
        std::cout << "circle proxy" << endl;
        // fill method table with methods from class T
        // initialize method information for the circle class
        method_map method_map_;
        for (method *m = T::methods;m->method_name; m++) {
            /* edited by Snaily: shouldn't it be const RegType *l ... ? */
            method m1;
            m1.class_name = T::className;
            m1.method_name = m->method_name;
            m1.mfunc = m->mfunc;
            method_map_[m1.method_name] = m1;
        }
        //register the circle class' description
        class_map_[T::class_name] = method_map_;
    }
}; 
```

在这个程序中，我将核心问题的两个数据结构外部化：

1.  class_map：包含核心程序中加载的dll中的所有类。方法图：
2.  method_map：包含每个类的所有方法的描述。class_map 和方法之间的关系是一对多的。但是，我遇到了class_map_和method_map的声明顺序问题。具体来说，我在类Proxy之外extern class_map，但我还必须在这个类内部定义方法结构。我尝试在以下链接中使用前向声明：[何时可以使用前向声明？](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)，但它不起作用。

我希望看到您对我的问题的解决方案。非常感谢

# batch-file - 批处理脚本 zip 文件到 ftp 的问题

> ID：13602223
> 
> 赞同：0
> 
> 时间：2012-11-28T09:50:23.443
> 
> 标签：batch-file, ftp, 7zip

我遇到了一个批处理脚本的问题，该脚本应该压缩一些 pdf 文件并将它们上传到 FTP 服务器。

我的脚本如下所示：

```
@echo off

set d=%date:~0,2%%date:~3,2%%date:~6,4%
set d=%d: =_%
set t=%time:~0,2%%time:~3,2%%time:~6,2%
set t=%t: =0%

set file="C:\Program Files (x86)\7-Zip\7z.exe" a -r 46730_%d%_%t%.zip *.pdf

echo open my.host.name>> temp
echo myusername>> temp
echo mypassword>> temp
echo ascii>> temp
echo cd /
echo binary
echo put %file%>> temp
echo close>> temp
echo quit>> temp

ftp -s:temp

del temp

TIMEOUT /T 5 
```

使用正确的名称创建的 zip 文件正常，之后我可以打开它。我很确定问题出在脚本的上传部分，但我在谷歌上找不到任何可行的解决方案:-(接收者无法打开 zip 文件。他收到此错误：可能'nt将文件作为档案打开。

我究竟做错了什么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:09:31.637

您缺少将“CD /”和“二进制”指令重定向到临时文件...并且您正在尝试在“文件”变量中设置命令指令...

尝试这个：

```
@echo off

set d=%date:~0,2%%date:~3,2%%date:~6,4%
set d=%d: =_%
set t=%time:~0,2%%time:~3,2%%time:~6,2%
set t=%t: =0%

Start /W "C:\Program Files (x86)\7-Zip\7z.exe" a -r "46730_%d%_%t%.zip" "*.pdf"
set "file=46730_%d%_%t%.zip"

(
  echo open my.host.name
  echo myusername
  echo mypassword
  REM Use a correct dir command, "cd /" isn't openning any folder
  REM echo cd ".\folder\"
  echo binary
  echo put "%file%"
  echo close
  echo quit
)> "%TEMP%\ftp.txt"

ftp -s:"%TEMP%\ftp.txt"

TIMEOUT /T 5 
```

如果您有问题，最好使用 WPUT 命令：

[https://sourceforge.net/projects/wput/files/wput/pre0.6/wput-pre0.6.zip/download?use_mirror=freefr&download=](https://sourceforge.net/projects/wput/files/wput/pre0.6/wput-pre0.6.zip/download?use_mirror=freefr&download=)

```
C:\Users\Administrador\Desktop>wput --help
Usage: wput [options] [file]... [url]...
  url        ftp://[username[:password]@]hostname[:port][/[path/][file]]

Startup:
  -V, --version         Display the version of wput and exit.
  -h, --help            Print this help-screen

Logging and input file:
  -o,  --output-file=FILE      log messages to FILE
  -a,  --append-output=FILE    append log messages to FILE
  -q,  --quiet                 quiet (no output)
  -v,  --verbose               be verbose
  -d,  --debug                 debug output
  -nv, --less-verbose          be less verbose
  -i,  --input-file=FILE       read the URLs from FILE
  -s,  --sort                  sorts all input URLs by server-ip and path
       --basename=PATH         snip PATH off each file when appendig to an URL
  -I,  --input-pipe=COMMAND    take the output of COMMAND as data-source
  -R,  --remove-source-files   unlink files upon successful upload

Upload:
       --bind-address=ADDR     bind to ADDR (hostname or IP) on local host
  -t,  --tries=NUMBER          set retry count to NUMBER (-1 means infinite)
  -nc, --dont-continue         do not resume partially-uploaded files
  -u,  --reupload              do not skip already completed files
       --skip-larger           do not upload files if remote size is larger
       --skip-existing         do not upload files that exist remotely
  -N,  --timestamping          don't re-upload files unless newer than remote
  -T,  --timeout=10th-SECONDS  set various timeouts to 10th-SECONDS
  -w,  --wait=10th-SECONDS     wait 10th-SECONDS between uploads. (default: 0)
       --random-wait           wait from 0...2*WAIT secs between uploads.
       --waitretry=SECONDS     wait SECONDS between retries of an upload
  -l,  --limit-rate=RATE       limit upload rate to RATE
  -nd, --no-directories        do not create any directories
  -Y,  --proxy=http/socks/off  set proxy type or turn off
       --proxy-user=NAME       set the proxy-username to NAME
       --proxy-pass=PASS       set the proxy-password to PASS

FTP-Options:
  -p,  --port-mode             no-passive, turn on port mode ftp (def. pasv)
  -A,  --ascii                 force ASCII  mode-transfer
  -B,  --binary                force BINARY mode-transfer
       --force-tls             force the useage of TLS

See the wput(1) for more detailed descriptions of the options.
Mail bug reports and suggestions to <itooktheredpill@gmx.de> 
```

# php - php.ini 上的分隔符包含路径

> ID：13602224
> 
> 赞同：3
> 
> 时间：2012-11-28T09:50:27.100
> 
> 标签：php

我目前正在企业中安装颠覆协议，一些用户在本地 Wamp 服务器上使用 Windows 进行开发，而其他用户则使用本地 Lamp 服务器。主站点在 linux 服务器上运行。

我遇到的问题是在 php.ini 文件中设置包含路径。由于某些文件会即时更改此设置，因此这变得很痛苦。

Windows 机器需要在包含路径中使用分号 (;) 分隔符，而 linux 机器需要使用冒号 (:)。

有什么方法可以更改 Windows 机器的配置以使用冒号作为包含路径分隔符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-29T19:30:45.133

一切皆有可能，但解决方案可能比这种情况下的问题更痛苦。

路径分隔符在 PHP 二进制可执行文件中硬编码。最可行的选择是从此处下载适用于 Windows 的 PHP 源代码：（*重要提示：下载与您的 LAMP 系统使用的版本完全相同的版本*）。

[http://windows.php.net/download/](http://windows.php.net/download/)

下载并解压缩后，打开文件：

```
/Zend/zend.h 
```

查看第 41 行动态预编译器指令：

```
#ifdef ZEND_WIN32
# include "zend_config.w32.h"
# define ZEND_PATHS_SEPARATOR       ';'
#elif defined(NETWARE)
# include <zend_config.h>
# define ZEND_PATHS_SEPARATOR       ';'
#elif defined(__riscos__)
# include <zend_config.h>
# define ZEND_PATHS_SEPARATOR       ';'
#else
# include <zend_config.h>
# define ZEND_PATHS_SEPARATOR       ':'
#endif 
```

在那里您可以更改窗口分隔符。

现在编译 PHP 包。可以使用 Visual Studio，按照以下步骤操作：

[https://wiki.php.net/internals/windows/stepbystepbuild](https://wiki.php.net/internals/windows/stepbystepbuild)

理论上，您将能够在 WAMP 上使用与 Linux 机器相同的分隔符运行 PHP。

但是还有另一个问题……这个配置有什么问题吗？您将不得不自己找到答案。

**选择：**

如果您不想更改影响整个系统的预编译器指令，可以尝试将其设置为“脏”并仅更改第 413 行（aprox）上的“main/php_ini.c”。

```
static const char paths_separator[] = { ZEND_PATHS_SEPARATOR, 0 }; 
```

用 ';' 改变常量名 字符，并像上面描述的那样编译。

# matlab - Matlab 编码器和命令行工作流程

> ID：13602227
> 
> 赞同：2
> 
> 时间：2012-11-28T09:50:35.767
> 
> 标签：matlab

我想使用 Matlab 编码器来创建 C/C++ 动态库。我有一堆 m 文件（函数），它们都采用具有相同字段和一些其他简单参数（标量双精度等）的标量结构。由于有许多 m- 文件，我想使用“命令行工作流”为每个 m-文件/函数使用“标量结构参数定义”（基本上使用“编程”代码生成指令）。

是否有人知道具有多个 m 文件的“matlab 编码器命令行工作流”示例，该文件使用至少一个结构定义？

我还尝试“导出项目设置”，相信这会生成一些包含“程序化”代码生成说明的文本文件。不幸的是，导出后我找不到这个文件。它不在项目相关文件夹中。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:02:27.697

我实际上可能会删除这个问题。期间取得了一些进展。看这里：

[所以问题](https://stackoverflow.com/questions/13606645/codegen-and-scalar-struct-argument)

我暂时留下这个“答案”，以防有人偶然发现。

# submit - 没有为 fosUserBundle symfony2.1 帐户配置编码器

> ID：13602229
> 
> 赞同：21
> 
> 时间：2012-11-28T09:50:38.013
> 
> 标签：submit, symfony-2.1, fosuserbundle, encoder

提交连接表单时出现此错误（我使用 FOSUserBundle 最新版本）：

```
No encoder has been configured for account "MyApp\UtilisateurBundle\Entity\Utilisateur 
```

这是我的实体：

```
 <?php
namespace MyApp\UtilisateurBundle\Entity;
use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
/**
 * @ORM\Entity
 */
class Utilisateur extends BaseUser
{
    /**
    * @ORM\Id
    * @ORM\Column(type="integer")
    * @ORM\generatedValue(strategy="AUTO")
    */
    protected $id;
    public function __construct()
    {
        parent::__construct();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

这是我的 app/config/security.yml ：

```
imports:
- { resource: "@MyAppFilmothequeBundle/Resources/config/security.yml" } 
```

这是我的 src/MyApp/FilmothequeBundle/Ressources/config/security.yml ：

```
security:
providers:
    fos_userbundle:
        id: fos_user.user_manager

firewalls:
    main:
        pattern:      .*
        form_login:
            provider:       fos_userbundle
            login_path:     /myapp/login
            use_forward:    false
            check_path:     /myapp/login_check
            failure_path:   null
            default_target_path: /myapp
        logout:
            path:   /myapp/logout
            target: /myapp
        anonymous:    true 
```

我按照本教程这样做：http: [//j-place.developpez.com/tutoriels/php/ameliorez-vos-applications-developpees-avec-symfony2/#LVI-B-1](http://j-place.developpez.com/tutoriels/php/ameliorez-vos-applications-developpees-avec-symfony2/#LVI-B-1)

我怎样才能做到这一点？先感谢您

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-28T14:49:20.057

尝试将此添加到 security.yml 中的安全密钥

```
encoders:
        FOS\UserBundle\Model\UserInterface: sha512 
```

所以这是

```
security:
    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    providers:
        ...

    firewalls:
        ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-11T20:35:39.323

我在[LexikJWTAuthenticationBundle](https://github.com/lexik/LexikJWTAuthenticationBundle)上收到此错误。

它对我有帮助（`config/packages/security.yaml`）：

```
security:
    encoders:
      App\Entity\User:
        algorithm: bcrypt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-26T17:47:49.820

您需要在 security.yml 中添加此代码

```
 encoders:
        # use your user class name here
        App\Entity\User:
            # Use native password encoder
            # This value auto-selects the best possible hashing algorithm
            # (i.e. Sodium when available).
            algorithm: auto 
```

我使用 symfony 4.4

为我工作

# .net - .net 中的自定义验证器 - javascript/jquery vs web 方法

> ID：13602232
> 
> 赞同：0
> 
> 时间：2012-11-28T09:50:49.323
> 
> 标签：.net, validation, webforms, webmethod, client-side-validation

我正在编写一些输入控件，其中一些需要自定义验证器。

我刚刚写了一个验证2个数字的。由于这相对简单，我分别编写了客户端 javascript 和服务器端方法。

但是，我开始思考，更好的设计是为客户端使用 Web 方法/服务并拥有一个用于验证的中央存储库。对服务器进行异步调用是否比可维护性更重要？

我有更复杂的验证即将到来，我认为我没有完全执行它的 javascript 技能，但除此之外，我希望能就这里的最佳解决方案提供一些意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:59:11.840

我想这里有一个甜蜜的地方。当然，您的服务器验证应该是您的主要关注点，并且应该尽可能地安全。

我不会对服务器进行太多调用，这就是我称之为“客户端验证”的原因——因为它只发生在客户端上，只有浏览器中可用的数据。这通常应该是简单的事情（主要是格式化，空字段等），因为它只是为了可用性。当然，可能会出现奇怪的情况，即服务器调用会大大提高可用性，但总是可以在以后添加。

# java - Android - java.lang.NoClassDefFoundError: android.Maps.HomeScreen

> ID：13602234
> 
> 赞同：-2
> 
> 时间：2012-11-28T09:50:52.947
> 
> 标签：java, android

我刚刚在几周后打开了我的代码，现在它似乎不起作用。我打开了一个启动画面，然后移动到主屏幕。启动画面有效，但当试图移动到主页时，它会说`No Class Def Found`. 这是什么意思，我该如何解决？

它说问题是在启动屏幕类中的以下代码中发现的：

```
 public void run()
        {
         //Finish the splash activity so it can't be returned to.
         SplashScreen.this.finish();
         // Create an Intent that will start the main activity.
         Intent mainIntent = new Intent(SplashScreen.this, HomeScreen.class);
         SplashScreen.this.startActivity(mainIntent);
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:59:08.143

请将 HomeScreen 放在清单文件中

```
<activity android:name=".HomeScreen"
              android:label="@string/app_name">
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:05:24.330

所以发生的事情是我更新了 Android SDK 并且显然存在一些问题，其中一个是将 lib 更改为 libs。我所做的是删除活动并重新添加。谢谢阿克斯特罗。

因此，如果有人从 16->17 遇到此问题，请检查清单文件中的活动和 lib 文件夹

# php - 联系表单中的 PHP 附件

> ID：13602237
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:50:55.820
> 
> 标签：php, contact-form

我有一个表格。具有以下内容：

HTML：

```
<form name="feedback_form" method="post" enctype="multipart/form-data" action="" class="feedback_form">
    <input type="text" name="field-name" value="İsim" title="İsim" class="field-name form_field">
    <input type="text" name="field-email" value="Email" title="Email" class="field-email form_field">
    <input type="text" name="field-subject" value="Başlık" title="Başlık" class="field-subject form_field">
    <textarea name="field-message" cols="45" rows="5" title="Mesajınız..." class="field-message form_field">Mesajınız...</textarea>
    <label for='uploaded_file'>Fotoğrafınızı Yükleyin:</label>
    <input type="file" name="field-file" value="File">
    <br>
    <input type="reset" name="reset" id="reset2" value="Temizle" class="feedback_reset">
    <input type="button" name="submit" class="feedback_go" id="submit2" value="Gönder">                                    
</form> 
```

PHP：

```
<?php
header('Content-Type: text/html; charset=utf-8');

function sendFeedback($feedback_email, $feedback_msg, $feedback_name, $feedback_subject, $feedback_file) {

    /* EDIT THIS */
    $admin_email = "mymail@gmail.com";
    if ($feedback_subject == "Subject" || empty($feedback_subject) ) {
        $subj = "Email from your site";
    } else {
        $subj = $feedback_subject;
    }

    /* //EDIT THIS */

    $message = "
    <html>
    <head>
      <title>Websitenizin emaili</title>
    </head>
    <body>
        <p><a href='mailto:".$feedback_email."'>".$feedback_name."</a> send this message:</p>
        <p>".$feedback_msg."</p>
        <p>".$subject."</p>
    </body>
    </html>
    ";
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=UTF-8' . "\r\n";

    if ($feedback_name!=="Name" && $feedback_email!=="Email" && !empty($feedback_email) && !empty($feedback_msg) && !empty($feedback_name) ) {
        if ($feedback_email == "mail_error") {
            echo "<span class='ajaxok'>Geçersiz email adresi.</span>";
        } else {            
            mail($admin_email, $subj, $message, $headers);
            echo "<span class='ajaxok'>Teşekkürler. Mesajınız gönderilmiştir.</span>";  
        }
    } else {
        echo "<span class='ajaxalert'>Lütfen zorunlu alanları doldurunuz.</span>";      
    }

}

sendFeedback($_POST['email'], $_POST['message'], $_POST['name'], $_POST['subject'], $_FILES['file']);

?> 
```

在此表单上发送消息时，发送电子邮件，工作。但只有主题、消息、姓名和电子邮件。我想在这个 php 代码中添加图片上传。但我不知道我该怎么做？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:55:05.170

看这里： http: [//pastebin.com/nAErtHgt](http://pastebin.com/nAErtHgt)

我写这个是因为[邮件是在没有附件的情况下发送的，](https://stackoverflow.com/questions/13526850/mail-is-sent-without-the-attachment/13526908#13526908)但似乎无法使用它。

将此函数添加到您的 PHP 文件中

```
function addattachment($file){
         $fname = substr(strrchr($file, "/"), 1);
         $data = file_get_contents($file);
         $i = count($this->parts);
         $content_id = "part$i." . sprintf("%09d", crc32($fname)) . strrchr($this->to_address, "@");
         $this->parts[$i] = "Content-Type: ".mime_content_type($file)."; name=\"$fname\"\r\n" .
                           "Content-Transfer-Encoding: base64\r\n" .
                           "Content-ID: <$content_id>\r\n" .
                           "Content-Disposition: inline;\n" .
                           " filename=\"$fname\"\r\n" .
                           "\n" .
                           chunk_split( base64_encode($data), 68, "\n");
         return $content_id;
     } 
```

在 $ message 和 $headers 之间添加

```
$message .= addattachment($feedback_file); 
```

并且应该工作。

让我知道是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:58:55.343

我不推荐使用 PHP 的邮件功能，而是使用 PHPMailer 之类的东西，它是一个合理的类，用于发送带有多部分、附件等的邮件。

[http://sourceforge.net/projects/phpmailer/](http://sourceforge.net/projects/phpmailer/)（应该是很多替代品，但它适用于我）

然后只需将上传的 tmpfile 添加为附件。

# asp.net-mvc - 如何自定义路由以将 url 动态映射到 ASP.NET MVC3 中的组合命名控制器

> ID：13602238
> 
> 赞同：3
> 
> 时间：2012-11-28T09:50:56.330
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我需要像这样映射 URL：

/股票/风险-->`StockRiskController.Index()`

/股票/风险/属性-->`StockRiskController.Attr()`

/srock/risk/chart -->`StockRiskController.Chart()`

...

/债券/性能-->`BondPerformanceController.Index()`

/bond/performance/attr -->`BondPerformanceController.Attr()`

/bond/performance/chart --> `BondPerformanceController.Chart()` ...

第一部分是动态但可枚举的，第二部分只有两个选项（风险|性能）。

目前我只知道两种方法：

1.  定制了一个 ControllerFactory（看起来有点矫枉过正或复杂）
2.  硬编码所有组合，因为它们是可枚举的（丑陋的）。

我可以用它`routes.MapRoute`来实现这一点吗？还是有其他方便的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:12:26.503

有一个基于`IRouteConstraint`. 首先，我们必须创建新的路由映射：

```
routes.MapRoute(
  name: "PrefixedMap",
  url: "{prefix}/{body}/{action}/{id}",
  defaults: new { prefix = string.Empty, body = string.Empty
                    , action = "Index", id = string.Empty },
  constraints: new { lang = new MyRouteConstraint() }
); 
```

下一步是创建我们的约束。在我将介绍一些如何检查上述相关性的方法之前 - 两个包含可能值的列表，但可以调整逻辑

```
public class MyRouteConstraint : IRouteConstraint
{
  public readonly IList<string> ControllerPrefixes = new List<string> { "stock", "bond" };
  public readonly IList<string> ControllerBodies = new List<string> { "risk", "performance" };
  ... 
```

现在是 Match 方法，它将根据需要调整路由

```
public bool Match(System.Web.HttpContextBase httpContext
      , Route route, string parameterName, RouteValueDictionary values
      , RouteDirection routeDirection)
{
    // for now skip the Url generation
    if (routeDirection.Equals(RouteDirection.UrlGeneration))
    {
        return false;
    }

    // try to find out our parameters
    string prefix = values["prefix"].ToString();
    string body = values["body"].ToString();

    var arePartsKnown =
        ControllerPrefixes.Contains(prefix, StringComparer.InvariantCultureIgnoreCase) &&
        ControllerBodies.Contains(body, StringComparer.InvariantCultureIgnoreCase);

    // not our case
    if (!arePartsKnown)
    {
        return false;
    }

    // change controller value
    values["controller"] = prefix + body;
    values.Remove("prefix");
    values.Remove("body");

    return true;
} 
```

您可以更多地使用此方法，但现在应该清楚概念了。

*注意：我喜欢你的方法。有时扩展/调整路由然后转到代码和“修复名称”更重要。类似的解决方案在这里工作：[Dynamically modify RouteValueDictionary](https://stackoverflow.com/questions/13423545)*

# c++ - 如何修复错误：未知类型名称“命名空间”

> ID：13602249
> 
> 赞同：16
> 
> 时间：2012-11-28T09:51:48.023
> 
> 标签：c++

```
#ifndef UNO_ACTION_ 
#define UNO_ACTION_
namespace Uno
{
namespace Game
{
    class Game;
}
} // namespace

namespace Uno
{
namespace Action
{
using ::Uno::Game::Game;

class Action
{
public:
    virtual bool isDisposeable() = 0;
    virtual void takeAction(Game* game) = 0;
    virtual ~Action() {}
};

}
}
#endif 
```

我在 ubuntu 12.04 上编译这些代码，它返回到一组错误：

```
action.h:4:1: error: unknown type name ‘namespace’
action.h:4:15: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token
action.h:8:1: error: unknown type name ‘namespace’
action.h:8:15: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token 
```

如何解决这些错误？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-28T09:53:36.650

听起来您正在尝试使用 C 编译器编译 C++ 代码。尝试使用`g++`代替`gcc`并为您的文件提供 C++ 扩展名，例如`.cpp`(而不是`.c`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-07T12:47:26.570

YCM和clang有这个问题。原来，丢失的标志是`"-x", "c++"`.

来自官方 clang[文档](https://clang.llvm.org/docs/CommandGuide/clang.html#cmdoption-x)：

> -x <language> ：将后续输入文件视为具有类型语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-27T05:57:33.807

我有一个类似的问题，发现了这个问题，但解决方案与我的不完全匹配，所以我在这里添加我的。

就我而言，我在 .cpp 文件和 .c 文件中包含了一个头文件。解决方案是拆分标题的命名空间部分，因为这显然只在 .cpp 文件中需要。

# java - 处理日期“2012-11-28T06:25:52.085Z”

> ID：13602251
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:51:58.923
> 
> 标签：java, date

Java世界的新手。所以想要一种处理日期 2012-11-28T06:25:52.085Z 的方法，以便我可以将其保存在 oracle DB 中。wnat 保存在 TIMESTAMP 类型的列中有人可以帮忙吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:57:11.330

试试这个：

```
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.S'Z'");
Date date = df.parse("2012-11-28T06:25:52.085Z");
System.out.println(date); 
```

解析日期字符串得到 Date 实例后，即可将其存入数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:01:00.637

试试这个。

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.S'Z'");
String sDate="2012-11-28T06:25:52.085Z";
Date tempDate = sdf.parse(sDate);
Timestamp dateInTimeStamp = new Timestamp(tempDate .getTime()); 
```

这将直接为您提供 TimeStamp 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:55:19.763

或者，为此目的使用[Joda-time ：](http://joda-time.sourceforge.net/)

`DateTimeFormatter dateFormatter = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ss.S'Z');

时间戳 forDatabase = new Timestamp(dateFormatter.parseDateTime(myString).toDate());`

# php - 如何在php中显示数据库中的图像？

> ID：13602259
> 
> 赞同：1
> 
> 时间：2012-11-28T09:52:24.237
> 
> 标签：php

我编写下面的代码来显示数据库中的图像

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("test");
$qry = "select id from image";
$res = mysql_query($qry) or die(mysql_error());
while($row = mysql_fetch_array($res))
{
  echo "<img src=image.php?id='$row[0]'>";
}
?> 
```

图片.php

```
<?php
$query = mysql_query("SELECT img FROM images WHERE id = ".$_GET['id']);
$row = mysql_fetch_array($query);
if($type=="pjpeg")
$type="jpeg";
header("Content-type:$type");
echo $row['img'];
?> 
```

但这行不通。它显示空白图像图标。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T10:03:09.833

您也可以[使用 base64 编码](http://webcodertools.com/imagetobase64converter/Create)来构建图像。像

```
<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAWgBaAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAAB..." /> 
```

**UPDATE，base64 编码示例**

您可以轻松地做到这一点：

```
<?php
$imageId = intval($_GET["id"]);

$query = mysql_query("SELECT img FROM images WHERE id = ". $imageId);
$row = mysql_fetch_array($query);

$mime = null;
// place $type init. here
if ($type=="pjpeg") // <<< where do you get $type btw?
    $mime = "image/jpeg";

$b64Src = "data:".$mime.";base64," . base64_encode($row["img"]);
echo '<img src="'.$b64Src.'" alt="" />';
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:58:28.780

`jpeg`不是有效的内容类型，它应该是`image/jpeg`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:01:31.873

如上 + 一定要将`replace = true`参数传递给 header 函数。

`header( 'Content-Type: image/jpeg', true );`

# regex - 使用 Python 正则表达式从字符串末尾获取 10 个数字？

> ID：13602260
> 
> 赞同：0
> 
> 时间：2012-11-28T09:52:30.547
> 
> 标签：regex, python-2.7

我有一些字符串，例如-

```
1\. "07870 622103"
2\. "(0) 07543 876545"
3\. "07321 786543 - not working" 
```

我想得到这些字符串的最后 10 位数字。喜欢 -

```
1\. "07870622103"
2\. "07543876545"
3\. "07321786543" 
```

到目前为止，我已经尝试过——

```
a = re.findall(r"\d+${10}", mobilePhone) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:01:44.817

过滤你的字符串中的数字并挑选出最后 10 个会更容易：

```
''.join([c for c in mobilePhone if c.isdigit()][-10:]) 
```

结果：

```
>>> mobilePhone = "07870 622103"
>>> ''.join([c for c in mobilePhone if c.isdigit()][-10:])
'7870622103'
>>> mobilePhone = "(0) 07543 876545"
>>> ''.join([c for c in mobilePhone if c.isdigit()][-10:])
'7543876545'
>>> mobilePhone = "07321 786543 - not working"
>>> ''.join([c for c in mobilePhone if c.isdigit()][-10:])
'7321786543' 
```

正则表达式方法（过滤除数字以外的所有内容）更快：

```
$ python -m timeit -s "mobilenum='07321 786543 - not working'" "''.join([c for c in mobilenum if c.isdigit()][-10:])"
100000 loops, best of 3: 6.68 usec per loop
$ python -m timeit -s "import re; notnum=re.compile(r'\D'); mobilenum='07321 786543 - not working'" "notnum.sub(mobilenum, '')[-10:]"
1000000 loops, best of 3: 0.472 usec per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:03:34.967

我建议使用正则表达式来丢弃所有非数字。像这样：

```
newstring = re.compile(r'\D').sub('', yourstring) 
```

正则表达式非常简单 -`\D`表示非数字。上面的代码用于`sub`用空字符串替换任何非数字字符。所以你得到你想要的`newstring`

哦，为了获取最后十个字符，请使用`newstring[-10:]`

那是一个正则表达式的答案。Martijn Pieters 的答案可能更 Pythonic。

# asp.net-mvc-4 - ASP.NET MVC 4 默认模板在 _LoginPartial.cshtml 中有不同的注销语法

> ID：13602269
> 
> 赞同：4
> 
> 时间：2012-11-28T09:52:47.957
> 
> 标签：asp.net-mvc-4

我是第一次使用 ASP.NET MVC 4，所以我从默认模板开始。

在 _LoginPartial.cshmtl for Log off 链接中，我找到了以下代码

```
@using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" })) {
    @Html.AntiForgeryToken()
    <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
} 
```

我期待一个像下面这样的代码，我一直在 MVC 3 中使用它。

```
@Html.ActionLink("Log off", "LogOff", "Account") 
```

请有人可以帮助我理解为什么这是必要的，以及它的优点（如果有的话）。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T09:17:15.500

新语法的原因是它遵循更 RESTful 的语法。通过注销，您正在更改用户的状态（因此是 POST 操作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T09:39:49.790

在使 MVC 4 变得安静的同时，默认模板不允许禁用 JavaScript 的用户退出。这是解决该问题的方法。

注意我还在这里写了关于这个问题的博客：http: [//www.shiningtreasures.com/post/2013/08/09/cannot-log-out-of-aspnet-mvc4-without-javascript](http://www.shiningtreasures.com/post/2013/08/09/cannot-log-out-of-aspnet-mvc4-without-javascript)

```
@using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" })) {
    @Html.AntiForgeryToken()
    <a id="logout" href="javascript:document.getElementById('logoutForm').submit()" style="display:none">Log Off</a>
    <script>
        //<!--
        var l = document.getElementById('logout');
        if (typeof(l) != 'undefined' && l != null)
            l.style.display = "inline";
        //-->
    </script>
    <noscript>
        <input type="submit" value="Log Off" />
    </noscript>
} 
```

基本上，当 JavaScript 不可用时，它会退回到提交按钮而不是链接。在所有情况下，我们仍然使用 POST。

另一个小问题 - 模板的 CSS 使按钮看起来与链接不同。这是 CSS 对注销按钮样式的修复，因此它看起来与实际上是锚标记的其他“按钮”相同。

```
/* drop this in just above "info and errors" */

#logoutForm input[type="submit"],
#logoutForm input[type="button"],
#logoutForm button
{
    background-color: #d3dce0;
    color: #333;
    border: none;
    border: 0px;
    font-size: 1em;
    font-weight: 400;
    margin: -4px 3px -4px 10px;
    padding: 2px 3px;
    text-decoration: none;
    font-family: inherit;
    outline: medium none;
}

/* for mobile styles - you need to drop this one in right after the other 
#login styles in the mobile block (near the bottom of the file) */

#login input[type="submit"],
#login input[type="button"],
#login button
{
    background: none;
    color: #999;
    border: none;
    border: 0px;
    font-size: 1em;
    font-weight: 600;
    margin: -4px 3px -4px 6px;
    padding: 0;
    text-decoration: none;
    font-family: inherit;
    outline: medium none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:07:00.313

没有什么大的区别。MVC4 使用 HTML 表单注销，通过 javascript 提交。

优点是新方式（使用表单）使用javascript提交表单，这就是页面不必重新加载的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-13T04:04:33.230

我很确定他们在这里使用 JavaScript 的唯一原因是因为提交按钮的 css 样式与“登录”按钮的 css 样式不匹配，“登录”按钮是由 HTML 助手使用以下代码创建的锚标记：

`@Html.ActionLink("Log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })`.

以下将在应用程序中创建完全相同的行为：

`<input type="submit" value="Log Off" />`

但它看起来很可怕。

当然，他们不能再将 HTML 帮助程序 ActionLink 用于注销按钮，因为这是一个需要发布的表单，以便可以验证 AntiForgeryToken。

因此，他们需要以下内容：

1.  注销链接的锚标记，使其样式与登录链接相同。
2.  一个可以提交表单以便验证 AntiForgeryToken 的按钮。

通过显式的 .submit() JavaScript 触发表单回发的锚标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T08:30:52.647

“优点是新方式（带有表单）使用javascript提交表单，这就是页面不必重新加载的原因”......（user1797792）

这是完全不正确的，因为 Html.BeginForm 总是触发回发，Ajax.BeginForm 是不触发回发的异步表单助手

我更喜欢旧的操作链接样式，因为它不会弄乱 css，但是从查看功能来看，操作链接似乎已被替换为表单，因此 AntiForgeryToken 可以包含在请求中，并且可以防止跨站点脚本阻止你自己帐户或类似的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-30T10:33:59.507

```
function btnContinueClick() {
    debugger
    $.ajax({
        url: '@Url.Action("BIAssessmentTest", "BI")',
        type: 'Post',
        cache: false,
        success: function (data) {

            window.location.href = '@Url.Action("BIAssessQuestions", "BI")';
        },

        error: function (err) {
             debugger
            alert("hi");
        }
    });

} 
```

# glsl - 顶点着色器（GLSL 1.2）中的纹理访问是否允许？

> ID：13602274
> 
> 赞同：2
> 
> 时间：2012-11-28T09:52:54.777
> 
> 标签：glsl, textures

我正在尝试将几何着色器移植回 OpenGL 2.1 (GLSL 1.2) 顶点着色器。在替换了编译器抱怨的所有代码后，它给了我另一个错误：

> 顶点着色器纹理采样器太多

所以我向 GL 查询了允许的最大值，这就是我得到的：

> GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS：0 GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS_ARB：0

这可能意味着顶点着色器中不允许使用纹理。

这只是我的硬件/驱动程序的限制还是 OpenGL2.1/GLSL1.2 要求的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:18:47.267

Having successfully used vertex texturing on OpenGL 2.1 hardware, I can confirm that this is a mere hardware/driver limitation. Those constants wouldn't make much sense if OpenGL 2.1/GLSL 1.20 would completely disallow the possiblity of vertex textures in the first place.

**EDIT:** As a more objective proof of the above, the [*OpenGL Shading Language 1.10 Specification*](http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.10.59.pdf) (corresponding to OpenGL 2.0) says in section *8.7 Texture Lookup Functions*:

> Texture lookup functions are available to both vertex and fragment shaders.

And the [*OpenGL 2.0 Specification*](http://www.opengl.org/registry/doc/glspec20.20041022.pdf) itself says in section *2.15.4 Vertex Shaders - Shader Execution*:

> Vertex shaders have the ability to do a lookup into a texture map, if supported by the GL implementation. The maximum number of texture image units available to a vertex shader is `MAX_VERTEX_TEXTURE_IMAGE_UNITS`; a maximum number of zero indicates that the GL implemenation does not support texture accesses in vertex shaders.

# java - 无法在 Switch 语句中实例化字符串数组 - Java

> ID：13602275
> 
> 赞同：1
> 
> 时间：2012-11-28T09:52:56.633
> 
> 标签：java, arrays, string, switch-statement, instantiation

由于某种原因，String[] champs 没有被实例化，我似乎看不出为什么
不应该 `champs = new String[]{ "BLAH", "BLAH", "BLAH"};`初始化数组？

```
 public static String[] getChamps() {

    String rolereturn = ChampSelect.getRoles();

    //Switch to Determine Champion Suggestions

    String[] champs; //String Declaration

    switch (rolereturn) {

        case "AD Carry": //AD Carry Selection Options
            champs = new String[]{ "Ashe", "Caityln", "Draven", "Ezreal", "Kog'Maw", "Sivir", "Twitch", "Varus", "Vayne" };
            break;

        case "AP Carry": //AP Carry Selection Options
            champs = new String[]{ "Diana", "Evelyn", "Kassadin", "Kennen" };
            break;

        case "Support": //Support Selection Options
            champs = new String[]{ "Janna", "Nunu", "Shen", "Soraka", "Taric", };
            break;

        case "AP Jungle": //AP Jungle Selection Options
            champs = new String[]{ "Diana", "Fiddlesticks" };
            break;

        case "AD Jungle": //AD Jungle Selection Options
            champs = new String[]{ "Kha'Zix", "Nocturne", "Rengar", "Udyr", "Warwick", };
            break;

        case "AP Top": //AP Top Selection Options
            champs = new String[]{ "Akali", "Cho'Gath", "Kennen", "Malphite", "Shen", "Singed", "Teemo" };
            break;

        case "AD Top": //AD Top Selection Options
            champs = new String[]{ "Fiora", "Irelia", "Jax", "Kha'Zix", "Master Yi", "Nasus", "Nidalee", "Rengar", "Zed" };
            break;
    }
    return champs;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:55:32.360

你是对的，如果调用其中一个 case 语句，它将初始化数组。我会在其中添加一个`default`，然后在`default`调用时抛出。当没有匹配 case 语句时调用默认值。看起来您正在涵盖所有案例陈述，因此`default`抛出将是一个好主意。

像这样的事情应该这样做

```
 default: throw new RuntimeException("SHould not be here " + rolereturn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:22:35.593

我会使用一个`Map`而不是一个开关盒，

```
public static String[] getChamps() {

    Map<String,String[]> map = new HashMap();
    map.put("AD Carry",new String[]{ "Ashe", "Caityln", "Draven", "Ezreal", "Kog'Maw", "Sivir", "Twitch", "Varus", "Vayne" });
    // ... and so on for all your cases

    String rolereturn = ChampSelect.getRoles();
    if (!map.containsKey(rolereturn)) throw new IllegalArgumentException(rolereturn);

    return map.get()    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:56:10.903

最可能的原因是与`rolereturns`您的想法不同。您能否尝试在开关末尾添加一个默认值，将数组设置为某个值，看看是否*可以*？

否则，只需调试并检查您是否进入正确的行...

# objective-c - Objective-c 中的简单掷骰子

> ID：13602279
> 
> 赞同：2
> 
> 时间：2012-11-28T09:53:13.747
> 
> 标签：objective-c, random, dice

我的目标是以这种方式设计一个骰子游戏：

掷 1 个骰子，如果这个骰子是偶数，你会得到一个额外的骰子，你现在可以掷 2 个骰子。如果每个骰子都是偶数，你会得到一个额外的骰子，以此类推......

我的问题是我不知道如何建立一个通用的方法来做到这一点。

最近我虽然关于类似的事情

*   n = 1
*   roll n*dice（“roll”会给我一个随机数）然后检查哪个骰子是偶数...

有人可以告诉我最好的方法吗？谢谢

***更新*** 在您发表评论之后，我终于尝试使用 NSMutableArray 来存储我的骰子值，效果很好，希望一旦将值存储到我的 NSMutableArray 中，它就会保持不变并且不能像我想要的那样更改就像掷新骰子一样。我想这是因为我的随机数存储在一个不可变的 NSNumber 中？各位大佬能看下我的代码吗...

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[]) 
{   
//  my int values 
int valueOne = arc4random()%6+1;
int valueTwo = arc4random()%6+1;
int valueThree = arc4random()%6+1;
int valueFour = arc4random()%6+1;
int valueFive = arc4random()%6+1;

//  Wrapped into objects to add to my array
NSNumber* diceOne = [NSNumber numberWithInt:valueOne];
NSNumber* diceTwo = [NSNumber numberWithInt:valueTwo];
NSNumber* diceThree = [NSNumber numberWithInt:valueThree];
NSNumber* diceFour = [NSNumber numberWithInt:valueFour];
NSNumber* diceFive = [NSNumber numberWithInt:valueFive];

//  my array called "myDice"
NSMutableArray* myDice = [[NSMutableArray alloc] initWithCapacity:6];

//  add the objects
[myDice addObject:diceOne];
[myDice addObject:diceTwo];
[myDice addObject:diceThree];
[myDice addObject:diceFour];
[myDice addObject:diceFive];

//  Sorting my array
int i;
NSNumber *myObject;

for(i=0;i<[myDice count];i++)
{
    myObject = [myDice objectAtIndex:i];
NSLog(@"\n\nyour die %d is %@.",i+1, myObject);
}

return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:39:26.017

如果我正确理解了您的问题，那么您所需要的只是一个简单的循环。根本不需要任何高级算法或数组。

```
int dice=1; //Number of dice being rolled
BOOL gotOddDice = NO; //Exits the infinite loop when you get an odd dice
while(gotOddDice==YES) //Creates an infinite loop, which will escape when there's an odd dice
{
    for (int i=0;i<dice;i++)
    {
        int rolledNum = rollDice(); //Function of getting a random number from 1 - 6
        if (rolledNum%2==1) //If the rolled dice is odd
            gotOddDice = YES;
    }
    dice++; //Add another dice
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:06:43.053

也许这会帮助你前进。

当程序启动时，您有一个包含 1 个“die”的数组（可以是 int 或 die 对象）。你“滚动”那个骰子，为数组中的每个元素生成一个介于 1 和 6 之间的随机数（假设是 6 面骰子）。你有一个 bool even = true，当你遍历数组时，如果一个值是奇数，你就会打破，如果它迭代而没有碰到奇数，添加另一个骰子并重复。

# jsf - 如何在 EL 中嵌套 EL？

> ID：13602280
> 
> 赞同：3
> 
> 时间：2012-11-28T09:53:13.857
> 
> 标签：jsf, el

我有 Java 枚举类型，我想从`myEnum.name()`关联的 i18n 值中获取。

我测试过：

```
<h:outputLabel value="#{rb.#{login.myEnum}}" /> 
```

（`rb`是我在 JSF faces-config.xml 中定义的 i18n 变量）

但它不起作用。

如果选择的语言环境是英语、法语或德语，`#{rb.KEY1}`我希望 EL 表达式将被转换为`key1`or `clé1`or等​​。`schlüssel1`

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T09:57:06.167

没有必要尝试在`#{}`内部使用`#{}`（无论如何它是非法的......）

`[]`您应该在（如访问地图）的帮助下访问它

像这样试试

```
<h:outputLabel value="#{rb[login.myEnum]}" /> 
```

# c# - 将位图像素转换为字节数组失败

> ID：13602281
> 
> 赞同：1
> 
> 时间：2012-11-28T09:53:13.763
> 
> 标签：c#, bitmap, bytearray, converter

我必须将位图的像素转换为短数组。因此我想：

*   获取字节
*   将字节转换为短字节

这是我获取字节的来源：

```
 public byte[] BitmapToByte(Bitmap source)
 {
     using (var memoryStream = new MemoryStream())
     {
         source.Save(memoryStream, System.Drawing.Imaging.ImageFormat.Bmp);
         return memoryStream.ToArray();
     }
 } 
```

这没有返回预期的结果。有没有其他方法可以转换数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T10:01:07.830

请正确解释您的问题。*“我缺少字节”*不是可以解决的。你期望什么数据，你看到了什么？

`Bitmap.Save()`将根据指定的格式返回数据，在所有情况下，它不仅包含像素数据（描述宽度和高度、颜色/调色板数据等的标题）。如果你只想要一个像素数据数组，你最好看看[`Bimap.LockBits()`](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)：

```
Bitmap bmp = new Bitmap("c:\\fakePhoto.jpg");

// Lock the bitmap's bits.  
Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
System.Drawing.Imaging.BitmapData bmpData = bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite, bmp.PixelFormat);

// Get the address of the first line.
IntPtr ptr = bmpData.Scan0;

// Declare an array to hold the bytes of the bitmap. 
int bytes  = Math.Abs(bmpData.Stride) * bmp.Height;
byte[] rgbValues = new byte[bytes];

// Copy the RGB values into the array.
System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes); 
```

现在该`rgbValues`数组包含源位图中的所有像素，每个像素使用三个字节。我不知道你为什么想要一系列短裤，但你必须能够从这里弄清楚。

# java - 正则表达式替换保留组

> ID：13602282
> 
> 赞同：1
> 
> 时间：2012-11-28T09:53:20.223
> 
> 标签：java, regex

有没有办法用正则表达式进行转换：
`M134.02,43.35c-12.62,1.4-29.25,6.59-39.85,19.65l15.35-5.82c26.24-18.1,54.45-10.65,62.99-0.11l1.27,1.34l0.02-0.04C169.6,49.83,155.11,41.01,134.02,43.35`

进入：

```
["M", 134.02, 43.35],
["c", -12.62, 1.4, -29.25, 6.59, -39.85, 19.65],
["l", 15.35, -5.82]
// and so on... 
```

我目前已经设置了这个正则表达式：
`([a-zA-Z])(-?(\d+(\.\d+)?),?)+`

但是，将其替换为：
`["$1", $2]\n`

只取最后一位数值，结果为：

```
["M", 43.35],
["c", 19.65],
["l", -5.82],
["c", -0.11],
["l", 1.34],
["l", -0.04],
["C", 43.35], 
```

好吧，我不需要在一个正则表达式中执行它（虽然，首选），我只是期待利用 IDE`Find & Replace + Regex`将[http://readysetraphael.com/](http://readysetraphael.com/)生成的字符串路径转换为数组路径。

我的 IDE 是 phpStorm，所以我猜它需要 Java 友好的正则表达式模式。虽然我不是 Java 开发人员，所以我不知道我有什么额外的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:59:36.793

也许您不需要这样一个特定的正则表达式。尝试

```
String s = "M134.02,43.35c-12.62,1.4-29.25,6.59-39.85,19.65l15.35-5.82c26.24-18.1,54.45-10.65,62.99-0.11l1.27,1.34l0.02-0.04C169.6,49.83,155.11,41.01,134.02,43.35";
s = s.replaceAll("(\\d)-", "$1,-").replaceAll("([a-zA-Z])([^a-zA-Z]+)", "[\"$1\", $2]\n");
System.out.println(s); 
```

印刷

```
["M", 134.02,43.35]
["c", -12.62,1.4,-29.25,6.59,-39.85,19.65]
["l", 15.35,-5.82]
["c", 26.24,-18.1,54.45,-10.65,62.99,-0.11]
["l", 1.27,1.34]
["l", 0.02,-0.04]
["C", 169.6,49.83,155.11,41.01,134.02,43.35] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:03:58.663

你几乎明白了。只需将您的第二个任期用额外的大括号括起来即可捕获所有数字

```
([a-zA-Z])((?:-?(?:\d+(?:\.\d+)?),?)+) 
```

我将附加更改`(...)`为`(?:...)`, 以避免不必要地捕获子表达式。

捕获组的测试用例：

```
public class CaptureTest {
    public static void main(String[] args) {
        String s = "M134.02,43.35c-12.62,1.4-29.25,6.59-39.85,19.65l15.35-5.82c26.24-18.1,54.45-10.65,62.99-0.11l1.27,1.34l0.02-0.04C169.6,49.83,155.11,41.01,134.02,43.35";
        String t = s.replaceAll("([a-zA-Z])((?:-?(?:\\d+(?:\\.\\d+)?),?)+)", "[\"$1\", $2],");
        System.out.println(s);
        System.out.println(t);
    }
} 
```

和输出

```
M134.02,43.35c-12.62,1.4-29.25,6.59-39.85,19.65l15.35-5.82c26.24-18.1,54.45-10.65,62.99-0.11l1.27,1.34l0.02-0.04C169.6,49.83,155.11,41.01,134.02,43.35  
["M", 134.02,43.35],["c", -12.62,1.4-29.25,6.59-39.85,19.65],["l", 15.35-5.82],["c", 26.24-18.1,54.45-10.65,62.99-0.11],["l", 1.27,1.34],["l", 0.02-0.04],["C", 169.6,49.83,155.11,41.01,134.02,43.35], 
```

这是与`java -version`

> java version "1.7.0_03"
> OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu2)
> OpenJDK 64-Bit Server VM (build 22.0-b10,混合模式)

# c# - 使用 Aspose Slide 绘制图形

> ID：13602284
> 
> 赞同：1
> 
> 时间：2012-11-28T09:53:20.147
> 
> 标签：c#, asp.net, aspose

我是新手，`aspose.slides`想知道是否可以创建此镜头描述中给出的条形图。

我要更新的图表的 y 轴从 -100 到 100，x 轴在 0 上，条形图应该在正侧向上或负向向下。

下面显示常规条形图的代码如下

```
// Instantiate PresentationEx class that represents PPTX file
PresentationEx pres = new PresentationEx("D:\\AsposeChart.pptx");

// Access first slide
SlideEx sld = pres.Slides[0];

// Add chart with default data
ChartEx chart = (ChartEx)sld.Shapes[0];

// Setting the index of chart data sheet 
int defaultWorksheetIndex = 0;

// Getting the chart data worksheet
ChartDataCellFactory fact = chart.ChartData.ChartDataCellFactory;

// Take first chart series
ChartSeriesEx series = chart.ChartData.Series[0];

// Now updating series data
fact.GetCell(defaultWorksheetIndex, 0, 1, "New_Series1");//modifying series name
series.Values[0].Value = 90;
series.Values[1].Value = 123;
series.Values[2].Value =44;

// Take Second chart series
series = chart.ChartData.Series[1];

// Now updating series data
fact.GetCell(defaultWorksheetIndex, 0, 2, "New_Series2");//modifying series name           
series.Values[0].Value = 23;
series.Values[1].Value = 67;
series.Values[2].Value = 99;

// Now, Adding a new series
chart.ChartData.Series.Add(fact.GetCell(defaultWorksheetIndex, 0, 3, "Series 3"), chart.Type);

// Take 3rd chart series
series = chart.ChartData.Series[2];

// Now populating series data
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 1, 3, 20));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 2, 3, 50));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 3, 3, 30));

chart.Type = ChartTypeEx.ClusteredCylinder;

// Save presentation with chart
pres.Write(@"D:\AsposeChartMoodified.pptx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:38:26.987

我已经观察到您的要求并愿意分享您可以使用以下代码片段来生成所需图表的目的。我已经分享了可以在负区域渲染系列的示例代码。但是，存在一个小问题，即当呈现负值或小于水平比例值的值时，它们的填充颜色会被删除。

这是由于 Aspose.Slides 中缺少属性，我创建了 ID **SLIDESNET-33821**的问题（您可以通过*[此链接](http://www.aspose.com/community/forums/thread/428573/updateing-a-negaive-bar-chart.aspx)**在 Aspose.Slides 产品支持论坛中跟踪此问题的状态*）以提供功能支持。我还分享了突出显示缺失功能的图像，取消选中环绕的值将填充未填充的系列值。在我看来，如果您使用的是模板图表，那么这个问题甚至可能不会发生。但是你可以在你的最后验证这一点。

```
public static void addBarChart()
{
    PresentationEx pres = new PresentationEx();
    ChartEx chart = pres.Slides[0].Shapes.AddChart(ChartTypeEx.ClusteredColumn, 20, 20, 500, 400);
    //Setting values of Y-axis or Value axis
    chart.ValueAxis.IsAutomaticMaxValue = false;
    chart.ValueAxis.IsAutomaticMinValue = false;
    chart.ValueAxis.CrossType = CrossesTypeEx.Custom;
    chart.ValueAxis.MinValue = 0;
    chart.ValueAxis.MaxValue = 400;
    chart.ValueAxis.CrossAt = 100f;

    chart.ChartData.Series.Clear();
    int defaultWorksheetIndex = 0;
    //Getting the chart data worksheet
    ChartDataCellFactory fact = chart.ChartData.ChartDataCellFactory;

    //Adding new series
    int id=chart.ChartData.Series.Add(fact.GetCell(defaultWorksheetIndex, 0, 1, "Series 1"), chart.Type);
    ChartSeriesEx series = chart.ChartData.Series[id];

    //Now populating series data

    series.Values.Add(fact.GetCell(defaultWorksheetIndex, 1, 1, 30));
    series.Values.Add(fact.GetCell(defaultWorksheetIndex, 2, 1, 150));
    series.Values.Add(fact.GetCell(defaultWorksheetIndex, 3, 1, 320));
    series.Values.Add(fact.GetCell(defaultWorksheetIndex, 4, 1, 80));

    series.Format.Fill.FillType = FillTypeEx.Solid;
    series.Format.Fill.SolidFillColor.Color = Color.Red;
    series.IsColorVaried = false;
    pres.Write("D:\\Aspose Data\\SampleChart.pptx");

} 
```

*PS，我的名字是 Nayyer，我是 Aspose 的开发布道者。*

# php - mysql_real_escape 字符串错误

> ID：13602286
> 
> 赞同：0
> 
> 时间：2012-11-28T09:53:25.790
> 
> 标签：php, mysql, codeigniter, mysql-real-escape-string

我正在尝试设置我最近在服务器上完成的 codeigniter Web 应用程序。我在自己的电脑上本地写的。但是，当我尝试登录时，出现这两个错误。

> **遇到 PHP 错误**
> 
> **严重性**：警告
> 
> **消息**：mysql_real_escape_string() [function.mysql-real-escape-string]：用户'ODBC'@'localhost'的访问被拒绝（使用密码：否）
> 
> **文件名**：mysql/mysql_driver.php
> 
> **行号**: 319

* * *

* * *

> **遇到 PHP 错误**
> 
> **严重性**：警告
> 
> **消息**：mysql_real_escape_string() [function.mysql-real-escape-string]：无法建立到服务器的链接
> 
> **文件名**：mysql/mysql_driver.php
> 
> **行号**: 319

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:00:37.907

首先确保你连接到你的数据库

您可以修改中的设置`application/config/database.php`

对于你应该使用的 codeigniter

```
$this->db->escape() 
```

详细信息和示例可以在这里找到 [http://ellislab.com/codeigniter/user-guide/database/queries.html](http://ellislab.com/codeigniter/user-guide/database/queries.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T04:43:07.183

我终于找到了导致问题的原因。这是数据库配置文件夹中的这一行：

```
$db['mydb']['autoinit'] = FALSE; 
```

当我将其更改为：

```
$db['mydb']['autoinit'] = TRUE; 
```

有效！谢谢大家的建议，没有你就不会做到！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T09:55:18.210

答案很简单：mysql_real *_escape_string* ()（名称中包含提示）根据数据库连接使用的接收字符集对字符串进行转义。为了使用它，*您首先需要连接到 MySQL 服务器*！

自动加载数据库类并让它自动连接。它会解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:57:49.997

检查你的数据库设置里面..

```
application>config>database.php 
```

# itextsharp - iTextSharp 5.3.4：如何从 PDF 文档中查找和更改链接指向的页面编号？

> ID：13602291
> 
> 赞同：1
> 
> 时间：2012-11-28T09:53:38.803
> 
> 标签：itextsharp

有一个问题：获取 PDF 中的引用。然后获取转发链接所在的页码。并将此链接向前移动 10 页（例如，指向第 5 页的链接，这是必要的，它是第 15 页）。我得到了一个 Destination 数组，但是如何取出页码并更改它，我不知道。请告诉我！代码是：`

```
Reader:=New iTextSharp.text.pdf.PdfReader(OutFileName); 
PageCount:=Reader.NumberOfPages; 
For i:=1 To PageCount Do 
PageDictionary:=Reader.GetPageN(i); 
If PageDictionary.Contains(iTextSharp.text.pdf.PdfName.ANNOTS) Then 
annots := PageDictionary.GetAsArray(iTextSharp.text.pdf.PdfName.Annots ); 
For Each A In Annots.ArrayList Do 
AnnotationDictionary:= iTextSharp.text.pdf.PdfReader.GetPdfObject(A) As  
iTextSharp.text.pdf.PdfDictionary; 

////Make sure this AnnotationDictionary has a LINK and ACTION//// 

If (AnnotationDictionary.@Get(iTextSharp.text.pdf.PdfName.SUBTY PE).Equals(iTextSharp.text.pdf.PdfName.LINK)) 
And (AnnotationDictionary.@Get(iTextSharp.text.pdf.PdfName.A)<>N ull)  
Then 

////Get the Action //// 
AnnotationAction:= AnnotationDictionary.GetAsDict(iTextSharp.text.pdf.PdfName.A ); 

////Get the Destination//// 
Dest_Array:=AnnotationAction.GetAsArray(iTextSharp.text.pdf. PdfName.D); 

End If; 
End For; 
End If; 
End For; 
```

`

# ruby-on-rails - Rspec 测试在应该失败时通过

> ID：13602294
> 
> 赞同：0
> 
> 时间：2012-11-28T09:53:44.747
> 
> 标签：ruby-on-rails, ruby

我正在做 Michael Hartl 的 RoR 教程。我刚刚开始编写一些测试，当我运行时：

```
 bundle exec rspec spec\requests\static_pages_spec.rb 
```

我根本没有输出：

```
 C:\Wamp\www\demo_app>bundle exec rspec spec\requests\static_pages_spec.rb
 C:\Wamp\www\demo_app> 
```

我四处寻找答案，我尝试将我正在使用的 rspec 版本更改为不同的版本并再次进行捆绑安装，但我根本没有从应该失败的测试中获得任何输出。

有什么想法吗？

编辑：这是我的 .rspec 文件中的内容：

```
--color 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

group :development, :test do
  gem 'sqlite3', '1.3.5' 
  gem 'rspec-rails', '2.11.0'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:09:02.190

它在我运行时起作用：

```
rake spec 
```

代替：

```
bundle exec rspec spec\requests\static_pages_spec.rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:18:48.110

确保您已添加`rspec-rails`到环境**和** 环境中，如本教程第 3 章中的`:development`示例[所示](http://ruby.railstutorial.org/chapters/static-pages#top)：`:test`

```
group :development, :test do
  gem 'rspec-rails', '2.11.0'
end 
```

# vb.net - 对于某些文件的文件，DownloadUrl 为空

> ID：13602297
> 
> 赞同：1
> 
> 时间：2012-11-28T09:53:57.023
> 
> 标签：vb.net, google-drive-api

当我尝试使用 Google Drive .Net Api 检索元数据时，我可以检索 Document Title 但 DownloadUrl for File 是空的，而如果我上传一个新文件则它可用。

这是我正在使用的代码..

```
Try
            Dim authenticator As IAuthenticator = TryCast(Session("authenticator"), IAuthenticator)
            Dim service As DriveService = TryCast(Session("Service"), DriveService)
            If authenticator Is Nothing OrElse service Is Nothing Then
                Return Json("Failed Authenticator", JsonRequestBehavior.AllowGet)
            End If
            Dim file As Google.Apis.Drive.v2.Data.File = service.Files.Get(file_id).Fetch()
              Return Json(file.DownloadUrl, JsonRequestBehavior.AllowGet)
        Catch ex As Exception
            Return Json(ex.Message, JsonRequestBehavior.AllowGet)
        End Try 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:49:41.820

Google 原生格式的文档不包含`downloadUrl`，对于它们，您应该使用 `exportLinks`集合来代替。

有关如何从云端硬盘下载文件的更多详细信息，请查看[https://developers.google.com/drive/manage-downloads上的文档](https://developers.google.com/drive/manage-downloads)

# javafx-2 - javafx 2.2 webview 滚动速度慢（2d 渲染）

> ID：13602303
> 
> 赞同：1
> 
> 时间：2012-11-28T09:54:34.590
> 
> 标签：javafx-2

JavaFX 2 WebView 使用 WebKit 进行渲染。我的机器没有直接的 3d 支持，我可以在 prism 日志中看到它

```
Loading D3D native library ...
    succeeded.
Direct3D initialization failed
Adapter validation failed for all adapters
(X) Got class = class com.sun.prism.d3d.D3DPipeline
Prism pipeline name = com.sun.prism.j2d.J2DPipeline
(X) Got class = class com.sun.prism.j2d.J2DPipeline
Initialized prism pipeline: com.sun.prism.j2d.J2DPipeline
GraphicsPipeline.createPipeline: error initializing pipeline com.sun.prism.d3d.D3DPipeline
*** Fallback to Prism SW pipeline 
```

加载的 html 页面上的滚动速度非常慢。使用 Chrome（也使用 WebKit）在同一台机器上滚动同一页面已经足够快了。

页面的内容主要是文本。没有繁重的java脚本，简单的静态。

我是否需要打开某些设置，或者它只是 Prism SW 管道比 Chrome 中用于绘制线条和图像的任何东西都要慢得多？

*操作系统视窗 7*

*DirectDraw 加速：不可用*
*Direct3D 加速：不可用*
*AGP 纹理加速：不可用*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:53:13.037

JavaFX 2.2 WebView 使用的 Prism SW 管道比 Chrome 中用于绘制线条和图像的任何管道都要慢得多。

如果有特定的网页导致速度变慢，您可以将它们记录为[JavaFX 性能问题](http://javafx-jira.kenai.com)。

JavaFX 渲染的上限为 60fps，并且有一个未记录的属性可以删除此上限，但无论如何您都不应该用肉眼注意到这一点。

您还可以使用系统属性打开和关闭硬件管道。您现在没有使用硬件管道，这可能是因为 JavaFX 不支持您的硬件加速器。您可以使用未记录的开关来强制启用硬件加速管道，但这会产生无法预料的后果。

有一个[文本字体平滑属性](https://blogs.oracle.com/javafx/entry/lcd_text_support_in_javafx)可能会影响 WebView 文本呈现速度。我不确定如何为 WebView 打开和关闭此属性。

[对于 jdk8，核心 JavaFX 渲染](http://fxexperience.com/2012/09/preliminary-performance-numbers-in-javafx-8/)和[WebView 渲染](http://javafx-jira.kenai.com/browse/RT-22913)有许多性能改进- 包括Chrome 中使用的[形状剪辑](http://javafx-jira.kenai.com/browse/RT-23690)和[gpu 加速合成等内容。](https://sites.google.com/a/chromium.org/dev/developers/design-documents/gpu-accelerated-compositing-in-chrome)同样，当您运行软件管道时，您不会看到硬件加速合成的影响，但您仍然应该能够从其他 jdk8 修改中获得一些性能改进。您可以获得[jdk8 的预览版](http://jdk8.java.net/download.html)，其中包括 JavaFX 的后期开发版本，并查看您的性能是否有所提高。

如果 WebView 性能至关重要，请使用 JavaFX 32 位版本，因为该版本当前打开了 JavaScript JIT 编译器，而 64 位版本没有。它不会对渲染速度产生影响，但可能会影响整体感知速度。jdk8 的发布版本将使用一个[新的 JavaScript 引擎](http://mail.openjdk.java.net/pipermail/announce/2012-November/000139.html)，它应该会看到 32 位和 64 位版本的性能提高。

当然，如果添加兼容的硬件卡，那么 JavaFX 会使用加速渲染路径，渲染性能也会有所提升。

# android - 如何在 Android 中检查禁用的推送通知？

> ID：13602305
> 
> 赞同：0
> 
> 时间：2012-11-28T09:54:42.823
> 
> 标签：android, push-notification

推送通知是我当前开发的应用程序中非常重要的部分。我必须知道，在手机上全局启用或禁用推送通知。如何在我的应用程序中以编程方式制作它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:13:04.050

推送通知基于空闲的 TCP 连接：当手机上线时，如果有消息，Google 会查找并发送消息。所以我们假设，如果你的手机不能上网，就不应该有任何推送通知。尝试在手机上全球禁止网络流量和互联网数据，我认为这是唯一的解决方案。

# c# - 如何从字典中获取第 n 个元素键名？

> ID：13602308
> 
> 赞同：0
> 
> 时间：2012-11-28T09:54:46.527
> 
> 标签：c#, list, dictionary

> **可能重复：**
> [如何从字典中获取第 n 个元素？](https://stackoverflow.com/questions/1172931/how-do-i-get-the-nth-element-from-a-dictionary)

我必须从字典中获取键名。 [如何从字典中获取第 n 个元素？](https://stackoverflow.com/questions/1172931/how-do-i-get-the-nth-element-from-a-dictionary)补救措施不是。

```
Dictionary<string, string> ListDegree= new Dictionary<string,int>();
ListDegree.Add( 'ali', 49);
ListDegree.Add( 'veli', 50); 
```

我想得到带有索引的“ali”。以下代码获取值“324”。我该怎么办？

```
int i=-1;
foreach (var item in ListDegree)
{
    i++;
}
if (i == -1)
    mf.txtLog.AppendText("Error: \"Code = 1\"");
else
    mf.txtLog.AppendText("Error: \""+ListDegree[ListDegree.Keys.ToList()
        [i]].ToString()+"\""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:03:11.117

```
public TKey GetNthKeyOf<TKey,TValue>(Dictionary<TKey,TValue> dic, n)
{
    int i = 0;
    foreach(KeyValuePair kv in dic)
    {
       if (i==n) return kv.Key;
       i++;
    }
    throw new IndexOutOfRangeException();
} 
```

****编辑****

```
public static class DicExt
{
    public static TKey GetNthKeyOf<TKey,TValue>(this Dictionary<TKey,TValue> dic, n)
    {
        int i = 0;
        foreach(KeyValuePair kv in dic)
        {
           if (i==n) return kv.Key;
           i++;
        }
        throw new IndexOutOfRangeException();
    }
} 
```

****编辑 2* *** 正如@tomfanning 所说，Dictionary 不提供订购保证，所以我的解决方案是假的解决方案，没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:04:29.777

正如[Oded](https://stackoverflow.com/users/1583/oded)指出的那样，您为什么不使用[OrderedDictionary](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)？这是一个示例：

```
using System;
using System.Collections.Specialized;

namespace ConsoleApplication1
{
    class ListDegree:OrderedDictionary
    {
    }

    class Program
    {
        public static void Main()
        {
            var _listDegree = new ListDegree();
            _listDegree.Add("ali", 324);
            _listDegree.Add("veli", 553);

            int i = -1;
            foreach (var item in _listDegree)
            {
                i++;
            }
            if (i == -1)
                Console.WriteLine("Error: \"Code = 1\"");
            else
                Console.WriteLine("Error: \"" + _listDegree[i] + "\"");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:29:38.613

```
mf.txtLog.AppendText("Hata: \"" + anchorPatternClass.GetNthKeyOf(i).ToString() + "\"");
......
    public TKey GetNthKeyOf<TKey,TValue>(Dictionary<TKey,TValue> dic, n)
    {
        int i = 0;
        foreach(KeyValuePair kv in dic)
        {
           if (i==n) return kv.Key;
           i++;
        }
        throw new IndexOutOfRangeException();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:49:48.420

虽然通过第 N 个元素访问字典看起来很奇怪，但它可能是这样的

```
int N=.....
var val = ListDegree.SkipWhile((kv, inx) => inx != N)
                    .Select(kv => kv.Value)
                    .First(); 
```

# html - 验证 servlet

> ID：13602312
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:54:54.430
> 
> 标签：html, mysql, servlets

我正在尝试使用表单获取用户名 n 密码。我正在使用存储在 mysql 表中的用户名 n 密码对其进行验证。但它没有被执行......有人可以告诉我有什么问题吗？？？Thnx 快速回复.. ;-）

```
*package mypack;
    import java.io.IOException;
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.Statement;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    /**
     * Servlet implementation class SaveServlet
     */
    public class SaveServlet extends HttpServlet {
        private static final long serialVersionUID = 1L;
        /**
         * Default constructor. 
         */
        public SaveServlet() {
            // TODO Auto-generated constructor stub
        }
        /**
         * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
         */
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            // TODO Auto-generated method stub
            String u = request.getParameter("username");
            String p=request.getParameter("password");
            System.out.println(u);
            System.out.println(p);
            String c="jdbc:mysql://localhost:3306/test";
            Connection con=null;
            try{
                Class.forName("com.mysql.jdbc.Driver").newInstance();

                con = DriverManager.getConnection(c, "root", "MyNewPass");
                PreparedStatement pst=con.prepareStatement("select * from userinfo where username="+u+" and password="+p+";");
                System.out.println("inside resultset");
                ResultSet rs=pst.executeQuery(); 
                System.out.println("inside resultset");
                while(rs.next())
                {
                    System.out.println("inside resultset");

                }
            }
                catch (Exception e) {
                    // TODO: handle exception
                    System.out.println("Failed");
                }

        }
        /**
         * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
         */
        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            // TODO Auto-generated method stub
            doGet(request, response);
        }
    }* 
```

html

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script type="text/javascript">

function validate(){
    var x = document.forms["form1"]["username"].value;
    if (x == null || x == "") {
        alert("Fill the User Id to Login");
        return false;
    }
    var y = document.forms["form1"]["password"].value;
    if (y == null || y == "") {
        alert("Password Please");
        return false;
    }

    else{

        document.form1.submit();
        return true;

}

}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<center>
<form action="SaveServlet" name="form1">username &nbsp;&nbsp;&nbsp; <input
    type="text" name="username" /> <br>
<br>
password &nbsp;&nbsp;&nbsp; <input type="password" name="password"></input><br>
<br>
&nbsp;&nbsp;&nbsp; <input type="button" value="login" onclick="validate()"> &nbsp;&nbsp;&nbsp;</form>
</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:12:43.010

问题在于查询语法...将其更改为

```
"select * from userinfo where username='"+u+"' and password='"+p+"'"; 
```

更正的servlet...

```
package mypack;

import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class SaveServlet
 */
public class SaveServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * Default constructor. 
     */
    public SaveServlet() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        String u = request.getParameter("username");
        String p=request.getParameter("password");
        System.out.println("USER-->"+u);
        ResultSet rs;
        String q="select * from userinfo where username='"+u+"' and password='"+p+"'";
        Connection con=null;

        String c="jdbc:mysql://localhost:3306/test";

        try{

            Class.forName("com.mysql.jdbc.Driver").newInstance();
            con = DriverManager.getConnection(c, "root", "MyNewPass");
            System.out.println("connection done");

            PreparedStatement ps=con.prepareStatement(q);
            System.out.println(q);
            rs=ps.executeQuery();
            System.out.println("done2");
            while (rs.next()) {
               System.out.println(rs.getString(1));
               System.out.println(rs.getString(2));

            }

        }
            catch (Exception e) {
                // TODO: handle exception
                System.out.println("Failed");
            }

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        doGet(request, response);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:58:35.107

这将导致sql注入。您需要使用 PreparedStament 来执行查询

首先应进行以下更改：

```
Object  u_obj = request.getParameter("username");
Object  p_obj = request.getParameter("password");

 String u = u_obj==null?"":u_obj;
 String p = p_obj==null?"":p_obj; 
```

第二：

```
PreparedStatement pst=con.prepareStatement("select * from userinfo where username="+u+" and password="+p+";"); 
```

应替换为：

```
 PreparedStatement pst=con.prepareStatement("select * from userinfo where username=? and password=?");
pst.setString(1,u);
pst.setString(2,p); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T13:11:38.310

尝试这个 ：

```
package mypack;
    import java.io.IOException;
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.Statement;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    /**
     * Servlet implementation class SaveServlet
     */
    public class SaveServlet extends HttpServlet {
        private static final long serialVersionUID = 1L;
        /**
         * Default constructor. 
         */
        public SaveServlet() {
            // TODO Auto-generated constructor stub
        }
        /**
         * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
         */
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            // TODO Auto-generated method stub
            String u = request.getParameter("username");
            String p=request.getParameter("password");
            System.out.println(u);
            System.out.println(p);
            String c="jdbc:mysql://localhost:3306/test";
            Connection con=null;
            try{
                Class.forName("com.mysql.jdbc.Driver").newInstance();
               String sql =  "select * from userinfo where username=? and password=?";
                con = DriverManager.getConnection(c, "root", "MyNewPass");
                PreparedStatement pst =con.prepareStatement(sql);
                pst.setString(1,u);
                pst.setString(2,p);
                System.out.println("inside resultset");
                ResultSet rs=pst.executeQuery(); 
                System.out.println("inside resultset");
                while(rs.next())
                {
                    System.out.println("inside resultset");

                }
            }
                catch (Exception e) {
                    // TODO: handle exception
                    System.out.println("Failed");
                }

        }
        /**
         * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
         */
        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            // TODO Auto-generated method stub
            doGet(request, response);
        }
    }* 
```

# magento - 如果站点运行 osCommerse 或 Magento，如何以编程方式进行测试

> ID：13602313
> 
> 赞同：1
> 
> 时间：2012-11-28T09:54:56.527
> 
> 标签：magento, oscommerce

我经历了很多想法，从测试`/admin/`到寻找 cookie。但据我从文档中可以看出，可以更改管理路径。一些我知道是 osCommerce 的网站没有设置我期望的 cookie。

是否有某个文件或我可以查找的内容，robots.txt 是否几乎总是包含某行？基本上，我正在寻找最简单的解决方案来识别这两个 CMS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:51:08.230

我只知道 Magento，但有一种方法可以测试网站是否是 magento。

它适用于绝大多数情况。

在magento中，每个magento安装都应该存在一些默认目录，这些目录被禁止（403）但它们存在（不是404）。所以只需要测试它们，你就会得到答案。

当然有些人可以重命名这些目录（但非常非常罕见），其他一些自制网站应该有相同的命名约定，但如果可能的话，更罕见）。

试试你的 webite/app/design/adminhtml/default/default/layout

如果你有一个 403 它是一个 Magento。

Magento 的另一个提示是产品图像的 uri，但一些扩展可以改变这一点。通常 URI 是这样的：

yourwebsite/media/catalog/product/cache/[0-9A-F]/image/[随机十六进制]/x*/y**/myimage.jpg

x* 图像名称的第一个字母 y* 图像名称的第二个字母

如果图像具有该名称，则它是 Magento。

亲切的问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:38:07.943

如果您想通过搜索文件/目录进行测试，请寻找`app/code/core/Mage`以测试网站是否基于 Magento。此目录包含核心 Magento 文件，不能更改/删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:02:41.950

对于 osCommerce，您可以测试是否存在实际的 PHP 文件：

```
<?php

$files = array('account_history.php','account_history_info.php','account_newsletters.php','account_notifications.php','account_password.php','address_book.php','address_book_process.php','advanced_search.php','advanced_search_result.php','checkout_confirmation.php','checkout_payment.php','checkout_payment_address.php','checkout_process.php','checkout_shipping.php','checkout_shipping_address.php','checkout_success.php','conditions.php','contact_us.php','cookie_usage.php','create_account.php','create_account_success.php','download.php','index.php','info_shopping_cart.php','login.php','logoff.php','opensearch.php','password_forgotten.php','password_reset.php','popup_image.php','popup_search_help.php','privacy.php','product_info.php','product_reviews.php','product_reviews_info.php','product_reviews_write.php','products_new.php','redirect.php','reviews.php','shipping.php','shopping_cart.php','specials.php','ssl_check.php','stylesheet.css','tell_a_friend.php');
$nofound = 0;
foreach ($files as $file)
{
        if (false == file_get_contents('http://www.example.com/' . $file)) {
                //echo $file . "\n"
                $notfound++;
        }

}

if ($notfound > 3){
        echo "Properly not osCommerce";
} else {
        echo "Properly osCommerce";
}

?> 
```

可能需要一些时间来确定允许在安装中不存在的文件的正确数量。

我想你可以为 Magento 想出类似的东西吗？

# ajax - 如何在所有 ajax 请求中发送令牌

> ID：13602321
> 
> 赞同：3
> 
> 时间：2012-11-28T09:55:18.227
> 
> 标签：ajax, jquery, post, token

有没有办法在页面的所有 ajax 请求中发送令牌，而无需在每个 $.ajax({}) 调用中写入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T22:17:16.750

首先，您必须在脚本行的开头进行设置：

```
 $(function () {
        var token = $('input[name="_csrf"]').val();
        $(document).ajaxSend(function(e, xhr, options) {
            console.log("ajax token!!!");
            xhr.setRequestHeader('X-CSRF-Token', token);
        });
    }); 
```

然后你通常可以进行所有的ajax调用......

```
 $(function(){
        $('#ddlGiro').change(function(){
            var contentResult=document.getElementById('divComboComercio');
            var giro = $("#ddlGiro").val();
             $.ajax({
                 url: [[@{'/comun/comercios/obtener/'}]] + giro,
                 data:  {"origen" : 'AsignarLote'},
                 dataType:'text',
                 cache:false,
                 type:'POST',
                 success:function(response){
                     contentResult.innerHTML=response;
                 }                           
             });
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:22:04.230

您可以全局设置 this
var token = "some value";

```
 $.ajaxSetup
        (
           {
               cache:false,
               beforeSend: function (xhr) { xhr.setRequestHeader('Authorization', token); }
           }
        ); 
```

或者您可以在 beforesend 选项中单独设置特定请求。

```
 beforeSend: function (xhr) { xhr.setRequestHeader('Authorization', token); }
           } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:57:53.267

使用全局`beforeSend`AJAX 事件来修改任何 AJAX 请求：[http ://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events)

更新：我刚刚检查过，似乎这个事件将被弃用，所以改用这个： http: [//api.jquery.com/jQuery.ajaxPrefilter/](http://api.jquery.com/jQuery.ajaxPrefilter/)

# python - 确定两个文件是否在 Windows 上硬链接？

> ID：13602323
> 
> 赞同：2
> 
> 时间：2012-11-28T09:55:22.080
> 
> 标签：python, windows, python-2.7

我可以通过以下方式创建硬链接：

```
import win32file
win32file.CreateHardLink(src, dst) 
```

我需要做的是确定 2 个文件（src、dst）是否已经硬链接，如果没有，则删除 dst 并创建链接。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:36:40.370

使用 Win32 API 函数[GetFileInformationByHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364952%28v=vs.85%29.aspx)。返回的结构中的`nNumberOfLinks`成员`BY_HANDLE_FILE_INFORMATION`包含链接的总数。值为 1 表示没有硬链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:10:15.457

感谢 martineau 的指针，我找到了以下文章，它提供了一些工作 Python 代码，几乎完全符合我的要求：

[http://timgolden.me.uk/python/win32_how_do_i/see_if_two_files_are_the_same_file.html](http://timgolden.me.uk/python/win32_how_do_i/see_if_two_files_are_the_same_file.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-30T14:10:20.850

对于来自 Google 的用户：

在 Python 3 中，使用[`os.path.samefile`](https://docs.python.org/3/library/os.path.html#os.path.samefile).

这适用于 Windows 和 Unix。

# java - 一个线程只有一个实例

> ID：13602325
> 
> 赞同：2
> 
> 时间：2012-11-28T09:55:26.883
> 
> 标签：java, android, multithreading, thread-safety

我有一些通过线程执行的可运行代码。线程由多段代码执行，我如何确保只有一个线程在某个点执行该可运行代码。

我尝试使用在线程开始时为真并在线程结束时变为假的布尔值，但这没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:30:55.863

**-**首先**它是多个线程访问的对象的资源。**

**-**现在，如果您只想让 1 个线程在某个时间实例访问该资源，那么您可以执行以下操作* *：* *

**1.**使用`java.util.concurrent.Semaphore`线程数等于1，因此一次实例中只有1个线程可以访问该资源。

**例如：**

`Semaphore s = new Semaphore(1);`

**2.**您也可以使用`SingleThreadExecutor`，因为它先完成一项任务，然后再进行第二项任务，依此类推。所以**不需要使用同步。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:09:42.790

```
private class MyThread extends Thread
{
    private static Lock lock = new ReentrantLock();

    public void run()
    {
        if (MyThread.lock.tryLock())
        {
            try
            {
                // TODO something
            }
            finally
            {
                MyThread.lock.unlock();
            }
        }
    }
} 
```

# java - 奇怪的约会行为？

> ID：13602334
> 
> 赞同：0
> 
> 时间：2012-11-28T09:56:10.973
> 
> 标签：java, date

```
life  = 91
today = System.currentTimeMillis()
expireDate = new Date(today + life * 24 * 3600 * 1000); 
```

`new Date(today)``Wed Nov 28 15:21:01 GMT+05:30 2012`按预期返回今天的日期

为什么`new Date(expireDate)`返回`Tue Nov 20 05:17:16 GMT+05:30 2012`早于今天的日期，而我实际上期望提前一个日期？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T09:58:40.517

这是因为您今天添加的值是一个 int 并且它实际上超出了`Integer.MAX_VALUE`，当这种情况发生时，它从`Integer.MIN_VALUE`.

为了解决这个问题，将其中一个值声明为`long`. 例如，`3600`可能是`3600l`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:04:15.890

尝试

```
int life = 91;
long today = System.currentTimeMillis();
Date expireDate = new Date(today + life * 24 * 3600 * 1000L);
System.out.println(expireDate); 
```

印刷

```
Wed Feb 27 10:03:32 GMT 2013 
```

注意：我`1000L`用来防止溢出，所以`life`制作`long`.

# javascript - AngularJS ng-options 有几个字段

> ID：13602335
> 
> 赞同：44
> 
> 时间：2012-11-28T09:56:13.060
> 
> 标签：javascript, html, angularjs

我有一组带有用户信息的对象。

```
"Id": "1",
"Firstname": "ABCDEF",
"Lastname": "GHIJK",
"Middlename": "" 
```

在我的选择选项中，我想显示两个字段 - `Firstname Lastname`。我不知道该怎么做以及如何将其绑定到`ng-model`.

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-11-28T10:12:56.683

你可以试试这个：

```
<select 
  name="users" 
  ng-model="selectedUser" 
  ng-options="user.Id as user.Firstname + ' ' + user.Lastname for user in users">
</select> 
```

文档中的更多信息：[https ://docs.angularjs.org/api/ng/directive/select](https://docs.angularjs.org/api/ng/directive/select)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-28T10:45:35.670

考虑到你的数组对象的格式是这样的。

```
$scope.userInfo = [
                    {"Id": "1", "Firstname": "ACDEF", "Lastname": "GHIJK", "Middlename": ""},
                    {"Id": "2", "Firstname": "BADEF", "Lastname": "HIGJK", "Middlename": ""},
                    {"Id": "3", "Firstname": "CDBEF", "Lastname": "IIHJK", "Middlename": ""},
                ] 
```

您可以像这样显示两个字段并将其绑定到模型，如下所示。

```
<select ng-model="userInfo" ng-options="s.Firstname +' '+ s.Lastname for s in userInfo" class="span2"> </select> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-29T10:02:20.070

只是一个额外的更新，

我必须显示用括号括起来的姓氏，所以这就是我修改答案并让它工作的方式。

```
<select 
   name="users" 
   ng-model="selectedUser" 
   ng-options="user.Id as user.Firstname + ' (' + user.Lastname + ') ' for user in users">
</select> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-09T14:00:59.273

Theres 始终处于非`ng-options`场景中，您可以在其中绑定`ng-repeat`项目中的两个参数：

```
 <select name="user" ng-model="vm.asignedUser">
    <option value="">Select user</option> 
    <option value="{{ {'name':user.name, 'id': user.id} }}" ng-repeat="user in vm.users">
      {{ user.nombreLargo }}
    </option>
  </select> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-23T19:39:01.713

这对我有用：

`<select ng-model="color" ng-options="(c.name+' '+c.shade) for c in colors"></select>`

来源：[https ://groups.google.com/d/msg/angular/ljJd5x1Tgrk/bZuVWCA1hO4J](https://groups.google.com/d/msg/angular/ljJd5x1Tgrk/bZuVWCA1hO4J)

# java - JPA id 生成通用策略

> ID：13602338
> 
> 赞同：1
> 
> 时间：2012-11-28T09:56:19.213
> 
> 标签：java, hibernate, jpa

我有一个应用程序可以正确使用 JPA-Hibernate 和 MySQL。在这种情况下，我在实体中使用自动策略来生成 id。另一方面，我有其他使用 Oracle 的应用程序，我为此使用了序列策略。关键是我想知道是否可以对 Oracle/MySQL/Sql Server 使用“通用”策略，并使我的应用程序更便携。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:09:15.040

拥有便携式解决方案的简单方法是使用[TableGenerator](http://docs.oracle.com/javaee/5/api/javax/persistence/TableGenerator.html)。值在数据库表中进行管理，并通过 SQL 查询进行检索和增量，因此不使用数据库供应商特定的构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:08:18.110

不依赖特定数据库功能的通用策略需要额外的表来生成 ID。此类策略：`hilo`, `enhanced-table`. 您还可以使用基于 UUID 生成的策略，例如`uuid.hex`, `uuid`, `uuid2`. 其他策略将使用不同的特定于数据库的功能，因此可能会在行为上有所不同。例如`native`，MySQL 和 Postgres 的工作方式不同，在 MySQL（生成器）中，您可以在保存对象时正确插入，在 Postgres（序列）中，您只能在常规刷新时插入。您可能想查看来源`DefaultIdentifierGeneratorFactory`以查看所有可能的策略并探索它们的算法和文档。

请注意，通常让 2 个或更多异构应用程序使用同一个数据库是一个坏主意，尤其是当它们都在写入数据库时​​。您的数据库将很难维护和重构。

# java - 在eclipse中监控java线程

> ID：13602341
> 
> 赞同：3
> 
> 时间：2012-11-28T09:56:30.193
> 
> 标签：java, eclipse, multithreading, view

如何在 Eclipse 中列出或监视当前正在运行的项目使用的线程？有没有插件因为我的eclipse好像没有这样的视图。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T10:00:29.087

当您在调试模式下启动应用程序时。您可以在默认情况下位于透视图中的`Debug`视图中看到线程。`Debug`

![截图](../Images/38d6ab22442e55e56eff84636c5fc1f2.png)

有关详细信息，您必须使用[VisualVM](http://visualvm.java.net/threads.html)。

# c# - 更新参数不会从边界域中获取值

> ID：13602342
> 
> 赞同：2
> 
> 时间：2012-11-28T09:56:32.447
> 
> 标签：c#, asp.net

我有一个带有一些文本框和一个下拉列表的 BulkEditGridView。当我尝试更新 BulkEditGridView 中的记录时，我失败了，因为更新参数“单位”不包含预期值。我期望它包含具有同名 DataField 属性的 boundfield 的值。那是对的吗？

实际上，“hiddenUnit”绑定字段只是在那里，因为我不知道如何使用“DropDownUnit”字段的选定值作为参数。有没有一种简单的方法可以做到这一点？

如您所知，我是这方面的新手，因此非常感谢任何帮助。

SqlDataSource：

```
 <asp:SqlDataSource ID="SqlMealItems" runat="server" ConnectionString="<%$ ConnectionStrings:Kunskapshjulet %>"  
            SelectCommand="SELECT MealItems.ProductId,[Quantity], [Unit], [ProductName], [ItemId] FROM [MealItems] 
                            INNER JOIN Products ON 
                              Products.ProductID = MealItems.ProductId
                            WHERE ([UserId] = @UserId)" 
            UpdateCommand="UPDATE [MealItems] SET [Quantity] = @Quantity, [Unit] = @Unit WHERE UserId = @UserId" >
            <InsertParameters>
                <asp:Parameter Name="Quantity" Type="Int32" />
                <asp:Parameter Name="Unit" Type="Double" />
                <asp:Parameter Name="ProductId" Type="Int32" />
                <asp:Parameter Name="ItemId" Type="String" />
            </InsertParameters>
            <SelectParameters>
                <asp:SessionParameter Name="UserId" SessionField="userID" Type="String" />
            </SelectParameters>
            <UpdateParameters>
                <asp:SessionParameter Name="UserId" SessionField="userID" Type="String" />
                <asp:Parameter Name="Quantity" Type="Int32" />
                <asp:Parameter Name="Unit"  />
             </UpdateParameters> 
```

BulkEditGridView

```
 <rwg:BulkEditGridView ID="MealList" runat="server" AutoGenerateColumns="False" ShowFooter="True" GridLines="Vertical" CellPadding="4"
             BackColor="White"  DataKeyNames="ItemId,ProductId" SaveButtonID="SaveButton"
            DataSourceID="SqlMealItems"  OnRowUpdate="MealList_RowUpdating"
            OnRowDataBound="MealList_RowDataBound" CssClass="gridView">
             <AlternatingRowStyle CssClass="MealListItemAlt" BackColor="#a6dbed" />
           <Columns>
                <asp:BoundField DataField="ProductId" HeaderText="Prod #" ReadOnly="True" />
                <asp:BoundField DataField="ProductName" HeaderText="Namn" ReadOnly="True" />
                <asp:BoundField DataField="Quantity" HeaderText="Antal"  />
                <asp:TemplateField HeaderText="Enhet">
                    <ItemTemplate>
                        <asp:DropDownList ID="DropDownUnit" OnSelectedIndexChanged="DropDownUnit_SelectedIndexChanged"
                            AutoPostBack="True" runat="server" DataTextField="Unit"  DataValueField="Unit">
                        </asp:DropDownList>
                    </ItemTemplate>
               </asp:TemplateField>
               <asp:BoundField  HeaderText="á pris" ReadOnly="True"  ControlStyle-Width="60" ControlStyle-CssClass="rightAlign" ControlStyle-BorderWidth="1" ControlStyle-BorderColor="#CCCCCC" >
                       <ControlStyle BorderColor="#CCCCCC" BorderWidth="1px" CssClass="rightAlign" Width="60px"></ControlStyle>
                </asp:BoundField>
                <asp:TemplateField HeaderText="Totalt">
                  <ItemTemplate>
                        <asp:TextBox ID="tbTotalPrice" runat = server ReadOnly="true" Width="60" style="text-align:right" BorderWidth="1" BorderColor="#CCCCCC">
                       </asp:TextBox>               
                    </ItemTemplate>
                </asp:TemplateField>
                  <asp:BoundField DataField="Unit" HeaderText="hiddenUnit"  ReadOnly="True" Visible="True" />
           </Columns>
        </rwg:BulkEditGridView> 
```

# iphone - 奇怪的UIAlertView私有方法崩溃_performPopup

> ID：13602344
> 
> 赞同：8
> 
> 时间：2012-11-28T09:56:40.057
> 
> 标签：iphone, ios, xcode, uialertview, crash-reports

我试图找出由 UIAlertView 中的私有方法引起的崩溃。我的应用程序崩溃中大约有一半涉及此问题。

```
-[UIAlertView(Private) _performPopup:animationType:revealedBySpringBoardAlert:] 
```

这是我的崩溃报告中的部分。困扰我的是，我的大多数警报视图都是由旨在存在于整个应用程序生命周期中的单例对象弹出的。所以我不确定这是否是由于 UIAlertView 的委托在被它调用之前被释放造成的。有没有人见过这个？你能给些建议么？谢谢。

```
Hardware Model:      iPhone4,1
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-11-15 11:31:57.452 -0800
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x5354440a
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x33ab95b6 objc_msgSend + 22
1   UIKit                           0x32e52fa0 -[UIAlertView(Private) _performPopup:animationType:revealedBySpringBoardAlert:]
2   UIKit                           0x330621c4 -[UIAlertView(Private) _repopupNoAnimation]
3   UIKit                           0x33065b38 __36-[_UIAlertStackWatcher _appResumed:]_block_invoke_0
4   libdispatch.dylib               0x37ec211c _dispatch_call_block_and_release
5   libdispatch.dylib               0x37ec14b4 _dispatch_client_callout
6   libdispatch.dylib               0x37ec61b8 _dispatch_main_queue_callback_4CF$VARIANT$mp
7   CoreFoundation                  0x39ba2f36 __CFRunLoopRun
8   CoreFoundation                  0x39b15eb8 CFRunLoopRunSpecific
9   CoreFoundation                  0x39b15d44 CFRunLoopRunInMode
10  GraphicsServices                0x37ee32e6 GSEventRunModal
11  UIKit                           0x32d552f4 UIApplicationMain
12  MYAPP                           0x0000334a main + 70
13  MYAPP                           0x000032fc start + 36 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T21:28:25.473

听起来代表在这里造成了问题。对于不需要跟踪用户输入的简单 UIAlertViews，您可以将委托设置为 nil，例如：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"My Alert" message: @"My Message" delegate: nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show]; 
```

如果您确实需要委托方法，只需确保在丢失视图时将 UIAlertView 的委托设为 nil：

```
alert.delegate = nil; 
```

在 dealloc 或 viewWillDisappear 中：取决于您的代码是如何设置的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T20:14:47.513

当应用程序进入后台时，关闭并取消警报视图也是一个好主意。

将以下内容添加到 viewDidLoad 方法中：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleApplicationDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

然后，handleApplicationDidEnterBackground 的实现应该如下所示：

```
- (void)handleApplicationDidEnterBackground:(NSNotification *)n
{
    if (self.alertView)
    {
        self.alertView.delegate = nil;
        [self.alertView dismissWithClickedButtonIndex:[self.alertView cancelButtonIndex] animated:NO];
        self.alertView = nil;
    }
} 
```

# c++ - 在其他类中实现访问类

> ID：13602346
> 
> 赞同：0
> 
> 时间：2012-11-28T09:56:40.513
> 
> 标签：c++, boost, c++11, boost-variant

我试图在类对象中识别 boost::variant 的类型以执行关联的成员函数。考虑以下代码：

```
#include <cstdio>
#include <cassert>
#include <iostream>
#include <boost/variant.hpp>
#include <string>
using namespace std;

typedef boost::variant< string, double> Variant;

class test{ 
  public:
    void func1 (Variant V); 
    void func2 (string s); 
    void func3 (double d);
    struct my_visitor : public boost::static_visitor<> {
      test &my_test;
      my_visitor(test &arg) : my_test(arg) {}

      void operator()( string s ) { my_test.func2(s); }
      void operator()( double d ) { my_test.func3(d); }
      //... for each supported type
    };

}; 

void test::func1(Variant V){
  boost::apply_visitor( my_visitor(*this),V);
}

void test::func2( string s){ cout << "func3" << endl;}
void test::func3(double d){ cout << "func4" << endl;}

int main (){
    test t;
    Variant V = 3.1;
    t.func1(V); 
    V = "hello"; 
    t.func1(V);
} 
```

问题是我需要识别成员函数中的 Variant 类型，以便在同一个对象中调用该数据类型的相关成员函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:02:32.240

这个问题不是很清楚，但你也许正在寻找这个？

```
class test {
  //...

struct my_visitor : public boost::static_visitor<> {
  test &my_test;
  my_visitor(test &arg) : my_test(arg) {}

  void operator()( string s ) const { my_test.func3(s); }
  void operator()( double d ) const { my_test.func4(d); }
  //... for each supported type
};

  //...
};

test::func1(Variant V) {
  boost::apply_visitor(my_visitor(*this), V);
} 
```

**编辑**添加`const`了限定符以`operator()`允许使用`my_visitor`in 的临时对象`apply_visitor()`。

# php - PHP Yii 框架只是呼应 AR 类

> ID：13602348
> 
> 赞同：0
> 
> 时间：2012-11-28T09:56:51.383
> 
> 标签：php, activerecord, yii

我刚开始编写我的第一个 Yii 应用程序，但我的 AR 类似乎无法正常工作。

这是我的 AR 课：

```
class Activiteit extends CActiveRecord
{
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    public function tableName()
    {
        return 'activiteit';
    }
} 
```

这是我的索引视图：

```
<?php
/* @var $this SiteController */

$this->pageTitle=Yii::app()->name;

$activiteiten = Activiteit::model()->findAll();
?> 
```

不知何故，这是生成的“html”：

```
class Activiteit extends CActiveRecord
{
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    public function tableName()
    {
        return 'activiteit';
    }
} 
```

索引操作：

```
public function actionIndex()
{
   // renders the view file 'protected/views/site/index.php'
   // using the default layout 'protected/views/layouts/main.php'
   $this->render('index');
} 
```

那么，为什么 Yii 只是呼应我的 AR 课呢？

PS：没有 $activiteiten = Activiteit::model()->findAll(); 行，它会生成正确的 html 页面...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:20:58.390

检查您是否已存储并正确编写了该类。

在常见情况下，模型文件存储在*projectname/protected/models/*文件夹中。

类应该是这样的（比如*Activiteit.php*）：

```
<?php // i think you missed this start tag
   class Activiteit extends CActiveRecord
   {
      // ... your code ...
   } 
```

使用[gii](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii "http://www.yiiframework.com/doc/guide/1.1/en/topics.gii")自动生成代码，避免此类错误。

# jsf-2 - 访问过滤器中的托管属性

> ID：13602350
> 
> 赞同：0
> 
> 时间：2012-11-28T09:56:55.417
> 
> 标签：jsf-2, properties, servlet-filters

在我试图找出这个问题中所述问题的原因时：[JSF2 slow page loading](https://stackoverflow.com/questions/13532524/jsf2-slow-page-loading)，我想为我使用的用户会话过滤器计时。我创建了一个计时器，它是一个 ApplicationScoped bean。

我的问题是是否可以从过滤器中将此 bean 作为托管属性访问。在我的其他 bean 中，我可以做到这一点，尽管在过滤器中托管属性始终为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:04:07.827

**更新答案：**

通过以下方式从过滤器访问您的**应用程序范围**的 bean

```
ServletContext context = req.getServletContext();
MyAppBean myAppBean = (MyAppBean) context.getAttribute("myAppBean"); 
```

通过以下方式从过滤器访问**会话范围的 bean**

```
HttpSession session = ((HttpServletRequest) req).getSession(false);
MyAppBean myAppBean = (MyAppBean ) session.getAttribute("myAppBean"); 
```

* * *

**原答案：**

是的，你可以，制作它`(eager = true)`，并添加所需的注释

```
@ManagedBean(eager = true)
@ApplicationScoped
public class MyAppBean { } 
```

并在您的会话范围 bean 中像这样访问它

```
@ManagedProperty(value = "#{myAppBean }")
private MyAppBean myAppBean; //add getter and setter 
```

如果您的 bean 不是，您可以像这样`@ManagedBean`访问它`ApplicationMap`

```
MyAppBean myAppBean = (MyAppBean ) FacesContext.getCurrentInstance().
    getExternalContext().getApplicationMap().get("country"); 
```

如果您要访问的 bean 是 a ，您可以像这样`@SessionScoped`获取它`SessionMap`

```
MyAppBean myAppBean = (MyAppBean ) FacesContext.getCurrentInstance().
    getExternalContext().getSessionMap().get("country"); 
```

* * *

在这里，您获得了有关如何从非托管 bean 访问 bean 的一些不错的教程

[从事件侦听器访问托管 Bean – JSF](http://www.mkyong.com/jsf2/access-a-managed-bean-from-event-listener-jsf/)

# xml - 编辑 etc/local.xml 后，magento cms/page/layout 下拉列表为空

> ID：13602352
> 
> 赞同：1
> 
> 时间：2012-11-28T09:57:00.270
> 
> 标签：xml, e-commerce, magento-1.7, magento

`4column.xml`我正在尝试添加新布局`cms->pages->layout`

我找到这个教程

[http://www.crearegroup-ecommerce.co.uk/blog/magento-tutorials/create-new-layouts-for-your-template-pages.php](http://www.crearegroup-ecommerce.co.uk/blog/magento-tutorials/create-new-layouts-for-your-template-pages.php)

并实施它。

但它只显示**4column 布局**

所以我删除更改并清除缓存以显示其他布局

不幸的是在我的**cms->pages->Design->layout**

**下拉菜单为空**

如何解决这个问题我想要我的默认布局

请帮我

**没有人尝试上面的链接**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:25:21.527

尝试这个

我遇到了类似的问题并像这样解决

在`core folder` 复制这个文件即`core\code\mage\page\etc\config.xml`

并像这样覆盖

```
core\code\mage\page\etc\config.xml 
```

刷新**缓存**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:07:29.960

您缺少`layout_handle`节点：

```
<global>
    <page>
        <layouts>
            <your_mod module="your_mod" translate="label">
                <label>Your Mod Custom Layout</label>
                <template>your_mod/custom_layout.phtml</template>
                <layout_handle>custom_layout</layout_handle>
            </your_mod>
        <layouts>
    <page>
</global> 
```

您可以将其保留在您的*app/etc/local.xml 中*，或者您可以创建一个新模块，该模块将通过指定一个新的布局更新 XML 文件来构建其余功能，您将在其中包含以下内容：

```
<global>
    <helpers>
        <your_mod>
            <class>Your_Mod_Helper</class><!-- if you are translating the label -->
        </your_mod>
    </helpers>
    <page>
        <layouts>
            <your_mod module="your_mod" translate="label">
                <label>Your Mod Custom Layout</label>
                <template>your_mod/custom_layout.phtml</template>
                <layout_handle>custom_layout</layout_handle>
            </your_mod>
        <layouts>
    <page>
</global>
<frontend>
    <layout>
        <updates>
            <your_mod module="Your_Mod">
                <file>your_mod/layout.xml</file>
            </your_mod>
        </updates>
    </layout>
    <!-- if you are translating the label -->
    <translate>
        <modules>
            <Your_Mod>
                <files>
                    <default>Your_Mod.csv</default>
                    <!-- ref app/locale/en_US for examples -->
                </files>
            </Your_Mod>
        </modules>
    </translate>
</frontend> 
```

最后，在 *app/design/frontend/base/default/layout/your_mod/layout.xml* 中：

```
<!-- ref. to last handles in app/design/frontend/base/default/layout/page.xml -->
<custom_layout translate="label">
    <label>Your Mod Custom Layout</label>
    <reference name="root">
        <action method="setTemplate"><template>your_mod/custom_layout.phtml</template></action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
    </reference>
</custom_layout> 
```

据我所知，这是一种优化，它允许视图计算的各个区域具有设置根块模板的逻辑，而无需执行已完成的工作。

# php - 如何从大（大）文件中删除最后 N 行

> ID：13602353
> 
> 赞同：0
> 
> 时间：2012-11-28T09:57:01.040
> 
> 标签：php, linux

读取 500-600 MB 的整个文件我不能，因为数据被加载到内存中，对我来说太贵了。

我阅读了文件 c file_get_content'om 限制行（以 1000 行为条件）。在那之后我怎么能说删除特定的行。不使用$f=file。

阅读更多：我将一个非常大的文件读取到 1000 行（前 1000 行），在其处理它们时，根据条件，您想要删除的任何行，以及一些离开。

我可以将结果写入临时文件，如果脚本停止或其他原因，但没有回滚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:05:57.157

php有[ftruncate](http://php.net/manual/en/function.ftruncate.php "将文件截断为给定长度")函数。

编辑：给出完整的解决方案。

```
$f = fopen($filename, 'r+');
$linepos = array_fill(0, $N + 1, 0);
$i = 0;
while (! feof($f)) {
    $line = fgets($f);
    if ($line !== FALSE) {
        $j = ($i + 1) % ($N + 1);
        $linepos[$j] = $linepos[$i] + strlen($line);
        $i = $j;
    }
}
ftruncate($f, $linepos[($i + 1) % ($N + 1)]);
fclose($f); 
```

# jquery - jquery中的日期选择器错误

> ID：13602369
> 
> 赞同：0
> 
> 时间：2012-11-28T09:57:58.247
> 
> 标签：jquery, jquery-ui

我正在尝试实现以下日期选择器[http://www.eyecon.ro/datepicker/#about](http://www.eyecon.ro/datepicker/#about)。但我没有看到日历选项。我在这里想念什么？

```
<script class="include" type="text/javascript" src="/media/js/datepicker/js/jquery.js"></script>
<script class="include" type="text/javascript" src="/media/js/datepicker/js/datepicker.js">     </script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#date1').DatePicker();
        $('#date1').DatePickerShow();
    });
</script>

<input type="text" id="date1" class="datepicker" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:01:52.117

把你的代码放进去`<script type="text/javascript">`

```
<script type="text/javascript">
$(document).ready(function(){
 $('#date1').DatePicker();
 //$('#date1').DatePickerShow(); //this line is not needed.

 }); 
```

并`JS`像上面的评论一样检查路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:05:20.760

确保链接到正确的库。出于许多充分的理由，使用 google 作为 jquery 的来源

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:06:10.503

将 Javascript 和 CSS 文件附加到您的文档中。编辑 CSS 文件并修复图像的路径并更改颜色以适合您的站点主题。

**我猜你还没有下载所需的 css 和 js 文件，或者你没有更改从源下载的 css 文件中的图像路径。**

```
 <link rel="stylesheet" media="screen" type="text/css" href="css/datepicker.css" />
<script type="text/javascript" src="js/datepicker.js"></script> 
```

调用代码：

```
 $('#date1').DatePicker(); 
```

并且为了显示隐藏，

```
$('#date1').DatePickerShow();
$('#date1').DatePickerHide(); 
```

# zend-framework - Zend 中的 REST 路由

> ID：13602372
> 
> 赞同：0
> 
> 时间：2012-11-28T09:58:11.783
> 
> 标签：zend-framework, rest, routing

基本问题，

我有一个很好的工作 Zend REST 服务，我已经完成了必要的路由，并且一切都在正常工作。但是，我的 REST 服务只是一个控制器。其他控制器必须具有 zend 默认路由，因为它们用于操作和视图。

如何在调用控制器时创建指向 REST 路由的路由，并在我想查看我的网站时指向控制器/操作？

或者换句话说：我需要一个“特定于控制器”的路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:37:21.663

在 Zend 官方网站上找到了我的答案。您可以通过将控制器名称数组提供给 zend_rest 函数来将 Rest_Route 路由到特定控制器。像这样：

```
 class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    public function _initRoutes()
    {

        $this->bootstrap("Frontcontroller");
        $front = $this->getResource('Frontcontroller');
        $front->throwExceptions(false);
        $router = $front->getRouter();
        $restRoute = new Zend_Rest_Route($front, array(), array(
            'default' => array('YourControllerName')
        ));
        $router->addRoute('rest', $restRoute);

    }
} 
```

# objective-c - 对象创建的时间戳，有可能吗？

> ID：13602373
> 
> 赞同：-2
> 
> 时间：2012-11-28T09:58:14.350
> 
> 标签：objective-c, object, memory, timestamp

只是出于好奇......
有可能知道在 Objective-C 或其他语言中创建对象的时间戳吗？

```
[_MyObj creationTime] ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:03:18.430

把它放在一个对象的`init`方法中

```
creationDate = [NSDate date]; 
```

鉴于您已`NSDate *creationDate;`在`@interface`对象中声明

现在您可以检索准确的时间

```
- (NSString *)creationTime
{
   NSDateFormatter *timeFormatter = [[[NSDateFormatter alloc]init]autorelease];
   timeFormatter.dateFormat       = @"HH:mm:ss";
   NSString *timeString           = [timeFormatter stringFromDate: cretionDate];

   return timeString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:00:59.063

可能通过使用构造函数/析构函数来保存时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:04:23.940

子类化该类并添加一个新的 ivar（比如 createdOn），并在该构造函数或 init 方法中保存当前时间。

这样您就可以随时调用该 object.createdOn ....

# javascript - Firefox 上渲染不佳/抗锯齿的画布文本

> ID：13602374
> 
> 赞同：1
> 
> 时间：2012-11-28T09:58:20.827
> 
> 标签：javascript, firefox, text, canvas, fonts

文本看起来像素化/别名（firefox和opera）

由于实际问题似乎没什么可做的，是否有任何可能减少这种影响的怪癖/技巧？

谢谢

```
context.textBaseline = 'top'
context.fillStyle = color
context.font = "16px gotham_htfregular"
context.fillText("HD", 15, 11) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:22:53.293

我不确定这是否会有所帮助，但它帮助我在以下图像上使用抗锯齿边缘`canvas`：

```
 canvas {
                  image-rendering: optimizeSpeed;
                  image-rendering: -moz-crisp-edges;
                  image-rendering: -webkit-optimize-contrast;
                  image-rendering: optimize-contrast;
                  -ms-interpolation-mode: nearest-neighbor;
} 
```

**注意**：这`-ms-interpolation-mode`是针对 IE 的，但包含在内是为了很好的衡量标准。

# dom - IE8中的DOM错误，网站崩溃但没有js错误

> ID：13602384
> 
> 赞同：1
> 
> 时间：2012-11-28T09:58:58.360
> 
> 标签：dom, internet-explorer-8

我在 Windows XP 上的 IE8 中有一个大问题。

[这是我的网站](http://clients.treestarwebdesign.be/savemak/bank)，点击几下后他就崩溃了。

我没有收到 js 错误，但在文档类型中他说未知。没有 quirksmode，没有 Internet Explorer。

可能是什么问题呢？

亲切的问候

# git - Git 中的自动合并分支

> ID：13602386
> 
> 赞同：2
> 
> 时间：2012-11-28T09:59:03.407
> 
> 标签：git, branching-and-merging

我在 Git 中使用这个命令：

```
git checkout -b test1 
```

然后再次使用 master 分支返回

```
git checkout master 
```

然后我输入这个命令来查看未合并的分支： git branch --merge

并且 test1 出现在结果中，但我没有将它合并到 master 是的。它似乎自动合并它。它发生在我制作的任何分支上。

为什么会这样？

为什么有人将我的问题投票为题外话？Git 是一个版本控制工具，所以我的问题与编程有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:52:41.163

1）让我们假设您的`master`分支指向提交`C2`（参考图表）。

![在此处输入图像描述](../Images/a086dfd50d3970c966a89fabe45cf645.png)

2）当你执行时`git checkout -b iss53`，GIT 将创建一个`iss53`指向同一个提交的新分支。

![在此处输入图像描述](../Images/3b9c3176099ae9cf2fc227cf86e539d8.png)

`iss53`这里分支 [ ]的 HEAD`C2`可以从`master`. 因此，从逻辑上讲，它们被合并了。

3）如果你提交一些东西到`iss53`分支，它会变成这样。

![在此处输入图像描述](../Images/fe1f18270cda70de7639e1dde578eead.png)

现在提交`C3`将无法从 master 访问。`git branch --merged`将不再显示分支`iss53`。

# android - 是否可以从 Android 中的适配器获取对 ListView 的引用？

> ID：13602390
> 
> 赞同：16
> 
> 时间：2012-11-28T09:59:14.790
> 
> 标签：android, listview, adapter

是否可以在不将其作为参数传递给构造函数的情况下从 Android 中的 Adapter 获取对 ListView 的引用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-26T01:14:36.633

这绝对是可能的。是否应该完成（是的，有案例）。

```
// See this method of your adapter
// The parent is the view you are looking for
public override View GetGroupView(int groupPosition, bool isExpanded, View convertView, ViewGroup parent)
{
    ListView view = (ListView)parent;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-05T08:28:33.490

```
public class ItemListAdapter extends RecyclerView.Adapter<IItemListAdapter.ViewHolder> {
    Context context;
    ArrayList<ProductModel> designerCollection;
    ArrayList<ProductModel> designerCollectionforreward;
    ArrayAdapter<String> adapter;
    ListItemClickListener listItemClickListener;
    boolean isProducthide;
    boolean isEditable;
    ProductModel myListDataforReward;

    public ItemListAdapter(Context context, ArrayList<ProductModel> designerCollection, ArrayList<ProductModel> designerCollectionforreward, boolean isProducthide, boolean isEditable, ListItemClickListener listItemClickListener) {
        this.context = context;
        this.designerCollection = designerCollection;
        this.designerCollectionforreward = designerCollectionforreward;
        this.listItemClickListener = listItemClickListener;
        this.isProducthide = isProducthide;
        this.isEditable = isEditable;
    }

    @Override
    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());
        View listItem = layoutInflater.inflate(R.layout.new_layout_cart_product, parent, false);
        ViewHolder viewHolder = new ViewHolder(listItem);
        return viewHolder;
    }

    @Override
    public void onBindViewHolder(final ViewHolder holder, final int position) {
        final ProductModel myListData = designerCollection.get(position);
        if (designerCollectionforreward != null) {
            myListDataforReward = designerCollectionforreward.get(position);
        }
        Glide.with(holder.itemView)
                .load(myListData.getProductImage())
                .placeholder(R.drawable.noimage)
                .into(holder.iv_product_image);
        if (isProducthide) {
            holder.iv_product_image.setVisibility(View.VISIBLE);
        } else {
            holder.iv_product_image.setVisibility(View.GONE);
        }
        holder.tv_product_price.setText(myListData.getProductPrice());
        holder.imgDelete.setVisibility(View.VISIBLE);

        holder.imgDelete.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                notifyDataSetChanged();
                listItemClickListener.onItemClick(position, myListData.getItemQuantity(), myListData.getShoppingId());
            }
        });

        holder.tv_product_name.setText(myListData.getProductName());
        holder.txt_quantity.setText(myListData.getItemQuantity());
        holder.tv_product_qty.setText(myListData.getItemQuantity());

        if (myListData.isRemoveDisable()) {
            holder.imgDelete.setVisibility(View.GONE);
        } else {
            holder.imgDelete.setVisibility(View.VISIBLE);
        }

//        holder.tv_require.setText(myListData.getRequireText());
        if (myListDataforReward != null) {
            if (myListDataforReward.getProductRewardPoint() != null && !myListDataforReward.getProductRewardPoint().isEmpty()) {
                holder.ll_product_reward_point.setVisibility(View.VISIBLE);
                if (Constants.hashMap.containsKey("rewardpoint.plugin.rewardpoints.willearn")) {
                    holder.tv_reward_title.setText(Constants.hashMap.get("rewardpoint.plugin.rewardpoints.willearn"));
                } else {
                    holder.tv_reward_title.setText("You will earn : ");
                }
                holder.tv_reward_point.setText(myListDataforReward.getProductRewardPoint() + " "
                        + Constants.hashMap.get("admin.customers.customers.rewardpoints.fields.points"));
            } else {
                holder.ll_product_reward_point.setVisibility(View.GONE);
            }
        } else {
            holder.ll_product_reward_point.setVisibility(View.GONE);
        }
        if (myListData.getAttributeString() != null && !myListData.getAttributeString().equals("")) {
            holder.btnEdit.setVisibility(View.VISIBLE);
            holder.txtAttribute.setVisibility(View.VISIBLE);
            holder.txtAttribute.setText(myListData.getAttributeString());
        } else {
            holder.txtAttribute.setVisibility(View.GONE);
            holder.btnEdit.setVisibility(View.GONE);
        }
        /*if (myListData.getAttributeString().equals("")) {
            holder.ll_editProduct.setVisibility(View.GONE);
            holder.btnEdit.setVisibility(View.GONE);
        }*/
        /*if (isEditable) {
            holder.ll_editProduct.setVisibility(View.VISIBLE);
            holder.btnEdit.setVisibility(View.VISIBLE);
        } else {
            holder.btnEdit.setVisibility(View.GONE);
        }*/

        holder.tv_main_price.setText(myListData.getItemsubtotal());
        int qty = Integer.parseInt(designerCollection.get(position).getItemQuantity());
        int maxQty = designerCollection.get(position).getOrder_maximum_quantity();

            holder.plus_quantity.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
//                    if (qty < maxQty) {
                    int qty = Integer.parseInt(designerCollection.get(position).getItemQuantity());
                    holder.txt_quantity.setText(String.valueOf(qty + 1));
                    designerCollection.get(position).setItemQuantity(String.valueOf(qty + 1));
                    notifyDataSetChanged();
                    listItemClickListener.onItemClick(position, String.valueOf(1), "quantity");

//                    } else {
//                        Toast.makeText(context.getApplicationContext(), "", Toast.LENGTH_SHORT).show();
//                    }
                }
            });
        holder.minus_quantity.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                int qty = Integer.parseInt(designerCollection.get(position).getItemQuantity());
                if (qty > 1) {
                    if (qty == Integer.parseInt(designerCollection.get(position).getOrder_minimum_quantity())) {
                        Toast.makeText(context.getApplicationContext(), "minimum quantity must be " + Integer.parseInt(designerCollection.get(position).getOrder_minimum_quantity()), Toast.LENGTH_SHORT).show();
                    } else {
                        holder.txt_quantity.setText(String.valueOf(qty - 1));
                        designerCollection.get(position).setItemQuantity(String.valueOf(qty - 1));
                        listItemClickListener.onItemClick(position, String.valueOf(-1), "quantity");
                    }
                }
            }
        });

        holder.btnEdit.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                context.startActivity(new Intent(context, ProductDetailActivity.class)
                        .putExtra(Constants.INTENT_PRODUCT_ID, myListData.getProductId())
                        .putExtra(Constants.productAttribute, (Serializable) myListData.getProductAttributeValueModelList())
                        .putExtra(Constants.isFromCartScreen, true));
                ((Activity) context).finish();
            }
        });
    }

    @Override
    public int getItemCount() {
        return designerCollection.size();
    }

    public static class ViewHolder extends RecyclerView.ViewHolder {

        private final TextView plus_quantity, minus_quantity;
        CardView cart;
        public ImageView iv_product_image, img_dropDown;
        TextView tv_product_name, tv_product_price, txt_quantity, tv_product_qty, txtAttribute, tv_main_price;
        CustomSpinner ll_spinner;
        LinearLayout ll_click, ll_editProduct, ll_product_reward_point;
        CircleImageView imgDelete;

        TextView txtPrice, txtQuant, txtTotal, tv_reward_title, tv_reward_point;
        CircleImageView btnEdit;

        public ViewHolder(View itemView) {
            super(itemView);
            this.setIsRecyclable(false);
            iv_product_image = (ImageView) itemView.findViewById(R.id.iv_product_image);
            tv_product_name = itemView.findViewById(R.id.tv_product_name);
            ll_product_reward_point = itemView.findViewById(R.id.ll_product_reward_point);
//            tv_product_names = itemView.findViewById(R.id.tv_product_names);
            imgDelete = itemView.findViewById(R.id.imgDelete);
//            cart = itemView.findViewById(R.id.cart);

            btnEdit = itemView.findViewById(R.id.btnEdit);
//            product_tags = itemView.findViewById(R.id.product_tags);

            tv_reward_title = itemView.findViewById(R.id.tv_reward_title);
            tv_reward_point = itemView.findViewById(R.id.tv_reward_point);
//            tv_require = itemView.findViewById(R.id.tv_require);
            txtPrice = itemView.findViewById(R.id.txtPrice);
            txtQuant = itemView.findViewById(R.id.txtQty);
            txtTotal = (TextView) itemView.findViewById(R.id.txtTotal);

            plus_quantity = (TextView) itemView.findViewById(R.id.plus_quantity);
            minus_quantity = (TextView) itemView.findViewById(R.id.minus_quantity);
//            text_quantity = (TextView) itemView.findViewById(R.id.txt_quantity);
            tv_product_name = (TextView) itemView.findViewById(R.id.tv_product_name);
            tv_product_price = (TextView) itemView.findViewById(R.id.tv_product_price);
            txt_quantity = (TextView) itemView.findViewById(R.id.txt_quantity);
            tv_product_qty = (TextView) itemView.findViewById(R.id.tv_product_qty);
            txtAttribute = (TextView) itemView.findViewById(R.id.txtAttributeName);
            tv_main_price = (TextView) itemView.findViewById(R.id.tv_main_price);
            ll_click = itemView.findViewById(R.id.ll_click);
            ll_editProduct = itemView.findViewById(R.id.ll_editProduct);
            if (Constants.hashMap.containsKey("admin.catalog.products.fields.price"))
                txtPrice.setText(Constants.hashMap.get("admin.catalog.products.fields.price"));
            if (Constants.hashMap.containsKey("shoppingcart.quantity"))
                txtQuant.setText(Constants.hashMap.get("shoppingcart.quantity"));
            if (Constants.hashMap.containsKey("admin.currentcarts.total"))
                txtTotal.setText(Constants.hashMap.get("admin.currentcarts.total"));
        }
    }

    public void removeItem(int position) {
        designerCollection.remove(position);
        notifyItemRemoved(position);
    }

    public void restoreItem(ProductModel item, int position) {
        designerCollection.add(position, item);
        notifyItemInserted(position);
    }

    public ArrayList<ProductModel> getData() {
        return designerCollection;
    }
} 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-11-28T10:20:40.000

不，这是不可能的，适配器应该知道布局。

# facebook - 检索 facebook 页面 JSON 提要不起作用

> ID：13602398
> 
> 赞同：0
> 
> 时间：2012-11-28T09:59:41.577
> 
> 标签：facebook, json, facebook-graph-api

我已经测试过了，在网址栏上写了直接网址：

```
https://graph.facebook.com/my_page_id/feed?access_token=my_token 
```

但它显示的只是空白的 JSON 提要：

```
{
   "data": [

   ]
} 
```

我怎样才能获得新的提要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:27:34.680

api 检查与您的服务器的连接。请求应由 curl 发送。所以直接粘贴网址是行不通的。将文件上传到服务器或制作虚拟主机，然后从服务器发送请求。 [检查发布](http://developers.facebook.com/docs/reference/api/) 以了解[curl](https://stackoverflow.com/questions/10180029/facebook-api-what-is-curl-f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:54:52.757

最后我找到了:) [https://www.facebook.com/feeds/page.php?id=page_id&format=json](https://www.facebook.com/feeds/page.php?id=page_id&format=json)

[您可以通过https://graph.facebook.com/page_name](https://graph.facebook.com/page_name)找到您的页面 ID

# java - 如何在 Java Compiler API 中将 Trees.isAccessible() 用于原始数据类型/如何将 TypeMirror 转换为 DeclaredType

> ID：13602402
> 
> 赞同：2
> 
> 时间：2012-11-28T09:59:55.973
> 
> 标签：java, java-compiler-api, scopes

我正在尝试使用 Java Compiler API 分析 .java 文件。我当前的问题是找出给定变量、方法或类是否在程序的特定范围内已知（范围是指在 Java Compiler API 本身中定义的范围，请参见此处：[http:// docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/tree/Scope.html](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/tree/Scope.html)）。

[Java 编译器 API ( http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/util/Trees.html](http://docs.oracle.com/javase/6/docs/jdk/api/javac/tree/com/sun/source/util/Trees.html) )的 Trees 类有一个实用方法来这样做：是可访问的。如果目标节点在给定范围内已知，则此方法获取 Scope 和目标节点及其声明的类型并返回 true。

不幸的是，我不知道如何创建这个 DeclaredType 对象（从现在开始，我只能编写类名并且不再发布超链接，因为 stackoverflows 垃圾邮件预防：javax.lang.model.type.DeclaredType）。我可以询问目标节点的类型（javax.lang.model.element.Element [asType()-method]），但它返回的是 TypeMirror 实例，而不是 DeclaredType。

目前我使用这两行代码：

```
final DeclaredType nodeType = (DeclaredType) nodeTypeMirror;
isAccessible = referenceCompTree.isAccessible(referenceScope, nodeElement, nodeType); 
```

其中“referenceCompTree”是当前程序的树实例，referenceScope 是有问题的 Scope，nodeElement 是有问题的节点和 nodeType ...嗯，应该是有问题的节点的 DeclaredType。

这种直接类型转换方法适用于一种情况，即类的节点（我认为这是有效的，因为节点声明了自己的类型，因此它的 typeMirror 等效于它自己的类型）。但它绝对不适用于原始类型的变量（如标题中所述），我不确定它是否适用于变量。

**有没有人知道**

1.  **如何将 Trees 的 isAccessible 方法用于原始类型，或者更具体地说：如何将 TypeMirror 实例转换为 DeclaredType 实例？或者**
2.  **如何在不使用 isAccessible 的情况下获取我想要的信息（如果变量、类或方法在给定范围内已知）？**

*附录：*

我确实对这两个问题进行了进一步的研究，并想向您介绍我发现的一些事情：

1.  有一个名为 Types (javax.lang.model.util.Types) 的实用程序类。可以使用标准 Java Compiler API 类（在本例中为：com.sun.source.util.JavaTask）获取类型的实例。此对象有一个方法 (getDeclaredType)，它返回给定 TypeElement 和一些 TypeMirror 的 DeclaredType 实例。但是这个方法对我也不起作用，因为它会抛出一个错误，指出我以前很少输入参数。我想这个方法的唯一目的是为给定的原始类和一些类型参数返回一个 DeclaredType 实例（例如，要为 HashMap 创建 DeclaredType 实例，您可以将此方法与用于 HashMap 的 typeElement 和用于 String 的两个 typeMirror 一起使用）。显然这不是我打算做的。
2.  我试图通过查找变量、类或方法在给定范围内是否已知变量、类或方法来编写解决方法，方法是查找其各自的修饰符并搜索范围树，但我不相信这种方法，主要原因有两个：不确定我是否在我的搜索算法中正确地获得了 Java 范围构造的所有特殊情况，其次这似乎非常不必要，因为我试图重新实现一些（似乎）已经存在并且 Java 编译器一直在执行的东西。天啊，即使是我的 NetBeans 也一直告诉我给定的变量、方法或类是否在我当前的范围内是已知的。所以必须有办法。

# java - 是否可以从 unix 脚本调用 java web 服务？

> ID：13602404
> 
> 赞同：0
> 
> 时间：2012-11-28T10:00:11.630
> 
> 标签：java, web-services, unix, ksh

需要从 unix ksh 脚本调用 java ws。有没有可能？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:04:42.300

您可以为此使用[Curl](http://man.cx/curl)。但是，解析结果可能会变得非常讨厌。您应该考虑使用 f.eg. python 为此，它应该在大多数安装中都可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:04:18.810

我相信你可以用 curl 命令来做，将soap请求信封作为参数传递。

请参阅[在 Unix 命令行中调用 WebService](http://en.newinstance.it/2008/11/11/calling-webservice-at-the-unix-command-line/ "这里")。

# c# - 文本框不重新验证模糊

> ID：13602406
> 
> 赞同：1
> 
> 时间：2012-11-28T10:00:17.733
> 
> 标签：c#, asp.net, validation

我有一个带有一个多行文本框、一个按钮和两个验证器的表单。我有以下标记：

```
 <asp:RequiredFieldValidator ID="vldQuestionTextRequired" runat="server" ControlToValidate="tbmQuestionText"
        Display="Dynamic"></asp:RequiredFieldValidator>
<asp:CustomValidator ID="vldNotHintText" runat="server" ControlToValidate="tbmQuestionText"
        Display="Dynamic" EnableClientScript="true" OnServerValidate="HintText_ServerValidate"
        ClientValidationFunction="HintText_ClientValidate"></asp:CustomValidator>
        <span class="eq_ad_question_field_bg">&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <asp:TextBox ID="tbmQuestionText" runat="server" CssClass="eq_ad_question_field"
            TextMode="MultiLine"></asp:TextBox> 
```

客户端验证 JS 如下所示：

```
function HintText_ClientValidate(sender, e)
{
    if(e.Value != null)
        e.IsValid = e.Value != '<%= InstructionalText %>';
    else
        e.IsValid = false;
} 
```

当我在不修改原始提示文本的情况下单击按钮时，我会收到正确的验证器错误消息，并且焦点会返回到文本框。如果我然后在文本框中写一些东西然后单击按钮，验证器将被重新评估并消失，但不会发生回发。如果我再次单击该按钮，我会收到回发。

有没有人见过这种行为？谢谢！

**编辑：**我发现如果我将验证器设为静态而不是动态，则该按钮可以工作。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:18:10.647

好吧，这个文本框有一些 javascript 使其具有弹性。此 javascript 在 onblur 事件上触发以删除未使用的空间，并且由于文本框正在更改，因此停止了回发。文本框的最小化不是一开始的要求，所以我删除了它，回发效果很好。

# c# - WF4中如何取消子活动？

> ID：13602407
> 
> 赞同：2
> 
> 时间：2012-11-28T10:00:25.483
> 
> 标签：c#, workflow-foundation-4

我创建了一个包含子活动集合的自定义原生活动。如果其中一项活动失败，我正在尝试取消子活动。调用**context.CancelChildren()**不会在子活动中调用**取消。**

下面是例子：

```
public sealed class MyCompositeActivity : NativeActivity
{
    public Collection<Activity> Activities { get; set; }

    protected override void Execute(NativeActivityContext context)
    {
        ScheduleActivity(context);
    }

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        base.CacheMetadata(metadata);

        metadata.SetChildrenCollection(Activities);
     }

    private void ScheduleActivity(NativeActivityContext context)
    {
        // Get next activity
        ....
        context.ScheduleActivity(nextActivity, OnActivityCompleted, OnActivityFaulted);
    }

    private static void OnActivityFaulted(NativeActivityFaultContext context, Exception exception, ActivityInstance faultedInstance)
    {
        context.HandleFault();
        context.CancelChildren();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:10:45.330

取消需要正在执行的活动。因此，要么是等待书签恢复的异步活动，要么是等待子活动完成的复合活动。最常见的地方，虽然不是唯一的地方，发生取消的地方是如果有多个并行分支并且一个分支抛出异常。其他银行无法继续运行，因为存在未处理的异常，因此它们被取消。

从您提供的代码示例来看，似乎没有并行行为，您正在安排前一个活动完成后的活动。由于执行的单个活动引发错误，因此没有其他活动可以取消。

# extjs - Extjs - 调用时加载网格

> ID：13602411
> 
> 赞同：2
> 
> 时间：2012-11-28T10:00:31.090
> 
> 标签：extjs, extjs4, store, extjs4.1, extjs4.2

我有表格和网格。用户必须在表单字段中输入数据，然后在网格中显示相关记录。我想实现一个搜索表单，例如：用户将输入学生的姓名和性别，然后将获得所有具有相同姓名和性别的学生的网格。

因此，我使用 ajax 将表单字段值发送到 PHP，然后创建一个 json_encode 将在网格存储中使用。

我真的不确定我的想法是否好。但我还没有找到另一种方法来做到这一点。

问题是当我在商店中将 autoLoad 设置为 true 时，网格会自动填充所有数据——不仅仅是用户要求的数据——

所以，我知道我必须将 autoLoad 设置为 false，但是结果即使在 firebug 中成功返回，结果也不会显示在网格中！

我不知道该怎么办。

> 我的观点

```
{
    xtype: 'panel',
    layout: "fit",
    id: 'searchResult',
    flex: 7,
    title: '<div style="text-align:center;"/>SearchResultGrid</div>',
    items: [{
        xtype: 'gridpanel',
        store: 'advSearchStore',
        id: 'AdvSearch-grid',

        columns: [{
                xtype: 'gridcolumn',
                dataIndex: 'name',
                align: 'right',
                text: 'name'
            },
            {
                xtype: 'gridcolumn',
                dataIndex: 'gender',
                align: 'right',
                text: 'gender'
            }
        ],
        viewConfig: {
            id: 'Arr',
            emptyText: 'noResult'
        },
        requires: ['MyApp.PrintSave_toolbar'],
        dockedItems: [{
            xtype: 'PrintSave_tb',
            dock: 'bottom',

        }]
    }]
}, 
```

* * *

> 我的商店和模型

```
Ext.define('AdvSearchPost', {
    extend: 'Ext.data.Model',

    proxy: {
        type: 'ajax',
        url: 'AdvSearch.php',
        reader: {
            type: 'json',
            root: 'Arr',

            totalProperty: 'totalCount'
        }
    },

    fields: [{
        name: 'name'
    }, {
        name: 'type_and_cargo'
    }]
});

Ext.create('Ext.data.Store', {
    pageSize: 10,
    autoLoad: false,
    model: 'AdvSearchPost',
    storeId: 'AdvSearchPost'
}); 
```

* * *

> 我的控制器

```
xmlhttp.open("GET", "AdvSearch.php?search_name=" + search_name, true);
xmlhttp.send(null); 
```

* * *

> 我的 PHP 脚本

```
 if (!$con) {
     throw new Exception("Error in connection to DB");
 }

 $query = "SELECT name, gender FROM students  WHERE name ILIKE '%$search_name%' ";
 $result = pg_query($query);
 while ($row = pg_fetch_array($result)) {
     $Arr[] = array('name' => $row[0], 'gender' => $row[1]);
 }
 $searchResult_list = array();
 $searchResult_list['success'] = true;
 $searchResult_list['Arr'] = $Arr;

 $searchResult_list['totalCount'] = count($searchResult_list['Arr']);

 echo json_encode($searchResult_list);

 if (!$result)
     die("Error in query: ".pg_last_error());

 pg_close($con); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:02:40.997

我不太确定我是否可以关注您...您如何过滤？似乎在本地分页商店上？

我建议您`remoteFilter: true`在商店使用。您现在可以在服务器端强制执行至少一个过滤器参数，否则返回一个空结果集。

请注意，提交给服务器的过滤器属性将如下所示：

```
Filters:[{property:"FieldName", value: "anyValue"}] // objectview 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T20:02:32.510

好吧...我想我可以提供帮助，但这需要与您现在正在做的事情略有不同的思路。

创建商店时，您给了它一个可用于进行 AJAX 调用的代理。它没有让它跟踪对定义的 url 的 ajax 调用。因此，当您定义您的商店并给它一个 id 时，它在[store manager](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.StoreManager)中注册了该商店的一个实例。然后，您应该使用该存储的代理将数据加载到其中，就像在您的控制器中一样：

### 控制器：

```
//Get a reference to the store that the view references
var store = Ext.data.StoreManager.lookup('advSearchStore');

//Load data into the store using it's configured proxy
store.load({
    params: {
        search_name: search_name
    }
}); 
```

假设一切都在代理中正确设置（看起来不错）并且服务器正确获取并响应请求，您设置的代理应该解码您的 Web 服务返回的 JSON 数据，将其解码为 javascript 对象，获取Arr 属性，并将每个项目转换为已定义模型的实例。然后它会自动将这些添加到网格中，您应该会得到预期的结果。

# java - 有没有办法连接到 JComponent.paintComponent？

> ID：13602413
> 
> 赞同：1
> 
> 时间：2012-11-28T10:00:48.027
> 
> 标签：java, swing, gradient, paintcomponent, jcomponent

我需要在我的应用程序中的某些控件上使用渐变色。按照一个示例，我创建了自己的 JGradientPanel，它扩展了 JPanel 并覆盖了它的 paintComponent 方法。现在，我可以使用 JGradientPanel 而不是 JPanel 并且一切正常。我需要将逻辑扩展到 JButton、JLabel 和许多其他组件。我没有为每个组件创建自己的自定义组件，而是想知道是否有更好的方法可以以某种方式连接到我需要使用渐变颜色的任何组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:04:06.793

使用自己的[LookAndFeel](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)。您可能会查看其他 L&F 的代码，因为它没有完整记录。

# arrays - MIPS：重新初始化“.text”中的数组

> ID：13602415
> 
> 赞同：0
> 
> 时间：2012-11-28T10:00:53.520
> 
> 标签：arrays, assembly, mips

我可以以任何方式重新初始化“.text”部分中的数组吗？

像那样

```
.data
array1: .word 0:12

.text
array1: .word 2:12 
```

# c++ - 如何在嵌入式 CLIPS 中创建和扫描列表/数组...

> ID：13602416
> 
> 赞同：0
> 
> 时间：2012-11-28T10:00:56.317
> 
> 标签：c++, database, clips

如何在 CLIPS 中创建复杂的数据结构？我将很快解释我打算做什么：

如果我有一个 C++ 列表，例如汽车型号列表。几个用户然后输入关键字，我想每次关键字不在车型列表中时触发警报。

我不想为每个车型创建规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T01:47:55.347

使用 COOL 实例。这些是最接近 C++ 类的模拟。

# php - isset($_GET['post_id']) === true)之后，需要调用Javascript转 可见性隐藏

> ID：13602421
> 
> 赞同：1
> 
> 时间：2012-11-28T10:01:06.720
> 
> 标签：php, javascript, html, visibility, hidden

PHP 在这里相对较新，但这里是我所在的位置：

我有一个简单的 PHP 类型的电子邮件发送验证，但是在页面检查并确认电子邮件已发送后，我需要调用 Javascript（除非有更好的方法来执行此操作）来隐藏包含电子邮件的 DIV表单以防止垃圾邮件。

这是我的代码：

```
<?php
  if (isset($_GET['sent']) === true) {
    echo '<div id="formAnswer"> Thanks for the email! </div>';
  }

  if (empty($errors) === false) {
    echo '<ul>';
    foreach($errors as $error) {
      echo '<li>', $error, '</li>';
    }
    echo '</ul>';
   }                
?> 
```

我希望调用一个 Javascript 函数来隐藏包含基于相同 IF 语句的电子邮件表单的 div 确认电子邮件已发送（我想包括 setTimeout 以便用户非常清楚确认 DIV 出现，他们无法从该页面发送另一封电子邮件），但我似乎无法让 Javascript 在回声中执行。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:11:03.290

您可以使用 php 隐藏表单，即仅在未发送邮件时才显示表单：

```
if(!isset($_GET['sent'])) {
   <-- form -->
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:16:50.020

使用 document.getElementById('divid'); elem.parentNode.removeChild(elem) 删除 Div！隐藏它：D

# java - 在 Apache POI 中处理时间戳 Excel 列 - Java

> ID：13602428
> 
> 赞同：0
> 
> 时间：2012-11-28T10:01:40.603
> 
> 标签：java, oracle, apache-poi

我正在使用 Apache POI 来读取 excel 数据，并在 Java 中处理它们。要处理的数据位于 Excel 工作表中，该工作表由 Toad 填充。后端是 Oracle，因此数据类型还包括日期和时间戳列，这些列以这种格式填充到 Excel 中 对于日期：07/01/2012 00:00:00 对于时间戳：01/07/2012 00:00:00.000。

excel 文件名是静态的，但它包含的数据会有所不同，因为它以不同的时间间隔填充了来自不同表/视图的数据。

我能够使用处理 DATE 列

```
//Set the date format for the data fields
HSSFCellStyle dateStyle = workBook.createCellStyle();
short dateFormat = workBook.createDataFormat().getFormat("yyyy-mm-dd hh:mm:ss");
dateStyle.setDataFormat(dateFormat);
DataFormatter fmt = new DataFormatter();

if (hssfCell.getCellType() == HSSFCell.CELL_TYPE_NUMERIC)
    //Check if data in the cell is a date
    if (HSSFDateUtil.isCellDateFormatted(hssfCell))
        hssfCell.setCellStyle(dateStyle); 
```

**问题**：
但是当涉及到 TIMESTAMP 列时，HSSFCell.CELL_TYPE_NUMERIC 不适用于这些单元格，因此 HSSFDateUtil.isCellDateFormatted 不适用于它们。所以我无法为 TIMESTAMP 列指定格式。我通过查询（使用Java）将excel中的数据与Oracle表中的实际数据进行比较，由于这个格式问题，它们不匹配。

我是 Java 和 POI 的新手，所以可能会在这里错过一些愚蠢的东西。关于如何解决这个问题的任何意见？

**更新**

在浏览网页寻找替代解决方案后，我暂时采取了一种静态方法，我希望时间戳数据具有特定格式

```
String timestampIn = "dd/MM/yyyy HH:mm:ss.SSS";
String timestampOut = "yyyy-MM-dd HH:mm:ss.SSS";
try
{
    Date date = (new SimpleDateFormat(timestampIn)).parse(fmt.formatCellValue(hssfCell).toString().trim());
    //Add data in the cell to the ArrayList
    cellTempList.add((new SimpleDateFormat(timestampOut)).format(date));
}
catch (ParseException pe) {
    //Add data in the cell to the ArrayList
    cellTempList.add(fmt.formatCellValue(hssfCell));
} 
```

这仅适用于 Excel 中的时间戳格式是这种格式 - dd/MM/yyyy HH:mm:ss.SSS。

任何用于以不同格式处理时间戳值的有效解决方案都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:27:26.490

好的，有一个简单的方法可以做到这一点。

从数据库中获取具有 TIMESTAMP 数据类型的列名，并与您的 Excel 工作表的标题进行比较。

如果 Excel 标题与 DB 的列名匹配，则使用单独的 SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.S'Z'") 并执行您的活动。

对你好吗？

# python - 双层字典python中的总和值

> ID：13602431
> 
> 赞同：0
> 
> 时间：2012-11-28T10:01:47.750
> 
> 标签：python, dictionary

我有一本字典“celldict”，其中包含以下元素：

```
{1224:{'A': 6, 'B': 4, 'C': 5}, 1225: {'A': 6, 'B': 6, 'C': 5}} 
```

我想只计算每个键的 A+B，并得到如下结果：

```
{1224:{'A': 6, 'B': 4, 'C': 5,'AB' : 10}, 1225: {'A': 6, 'B': 6, 'C': 5, 'AB' :12 }} 
```

所以我这样做了：

```
a = ["A","B"]

for num in celldict :
    found =0
    sum = 0

    for key in a :
        if key in celldict[num][key]:
            print "ignoring existing key"
        else : 
            print "continuing"
            continue
            sum += celldict[num][key]
            found = 1

    if found == 1 : 
        celldict[num]["AB"] = sum 

print   celldict 
```

但它不起作用，发现总是返回 0，当我尝试检查字典中的键是否存在时，我做错了。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:08:50.507

`sum()`使用快速生成器循环和函数会简单得多：

```
sumkey = ''.join(a)
for num in celldict:
    num[sumkey] = sum(num.get(k, 0) for k in a) 
```

这个解决方案是通用的，你可以添加额外的键`a`，它会继续工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:06:09.573

该`continue`语句将跳过循环中的其余代码并开始新的迭代。没有理由在这里使用它 - 您应该删除它以便`sum += celldict[num][key]`实际执行该行。

您还可以更简单地编写整个内容：

```
for d in celldict.values():
    d['AB'] = d.get('A',0) + d.get('B',0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:08:30.503

一个简短的解决方案是：

```
def sum_keys(d, keys=["A","B"]):
    #iterate over all the dictionaries in d
    for subdict in d.values():
        #check that all required keys are in the dict
        if not all(k in subdict for k in keys): continue
        #create the sum and assign it
        subdict[''.join(keys)] = sum(subdict[k] for k in keys) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:09:39.360

```
In [29]: for item in celldict:
   ....:     if celldict[item].has_key('A') and celldict[item].has_key('B'):
   ....:         celldict[item]['AB'] = celldict[item]['A'] + celldict[item]['B']
   ....:

In [30]: celldict
Out[30]:
{1224: {'A': 6, 'AB': 10, 'B': 4, 'C': 5},
 1225: {'A': 6, 'AB': 12, 'B': 6, 'C': 5}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:06:56.447

continue 后不会在 else 块中运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T10:10:18.397

```
celldict = {1224:{'A': 6, 'B': 4, 'C': 5}, 1225: {'A': 6, 'B': 4, 'C': 5}}
count_keys = ["A","B"]
counted_key = "AB"

for item in celldict.values():
    item[counted_key] = 0

    for key in count_keys:
        item[counted_key] += item[key]

print(celldict) 
```

# php - php如何将z循环到a？

> ID：13602432
> 
> 赞同：1
> 
> 时间：2012-11-28T10:01:50.180
> 
> 标签：php

我读过这个[文件](http://php.net/manual/en/language.operators.increment.php)

他们可以使用此代码从 A 循环到 Z。

```
$string = 'A';
for ( $i = 0; $i<=1; $i++ ) {
    echo $string;
    ++$string;
} 
```

并且结果可以从 A 到 B 或更多到 $i

**但！！**

我不能用这段代码从 Z 循环到 A

```
--$string; 
```

有谁知道如何从 Z 循环到 A？

ps1。我不能使用范围（）；因为'Z'是可变的。

ps2。这是可以从 A 到 Z、AA、AB 或更多的 excel 列然后这个..所以，我不能使用范围或数字中的变量来转换字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:03:21.320

你可以试试

```
$range = range("Z", "A");
foreach ( $range as $chr ) {
    echo $chr;
} 
```

输出

```
ZYXWVUTSRQPONMLKJIHGFEDCBA 
```

如果你必须从`Z`

```
$s = 'Z';
while($s != "@"){
    print($s) and $s = chr(ord($s) - 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:10:25.130

```
for($alpha = 90; $alpha &gt;= 65; $alpha--) {
  echo chr($alpha); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:15:30.473

据我所知，递减运算符不适用于字符。

这种解决方法应该可以解决问题

```
$string = 'Z';
for ( $i = 0; $i<=25; $i++ ) {
    echo $string;
    $string = chr(ord($string) - 1);
} 
```

# php - 用 PHP 替换以前的图像并将新图像添加到服务器

> ID：13602435
> 
> 赞同：1
> 
> 时间：2012-11-28T10:01:54.270
> 
> 标签：php, mysql, sql, file, upload

我目前正在编写一个“**编辑项目**”脚本，该脚本允许用户替换我网站上的图像。这部分效果很好。

但是，我还**希望允许上传新图像的选项**- 这些不会替换现有图像。因此，总而言之，用户可以使用表单替换现有图像并上传新图像。

**问题：** *我如何告诉我的 PHP 一些图像是**新**的而不是替换的？*我需要这样做，以便可以对新图像运行 INSERT INTO 查询。

我在下面附上了我的一部分代码：

**PHP 处理现有文件的替换：**

```
 // get original name for ProjectImage update
    $query3 = "SELECT * FROM ProjectImage as pi WHERE pid = '$id' ORDER BY pi.id";
    $result3 = mysql_query ($query3); // Run the Query
    $row3 = mysql_fetch_array($result3);
    $originalname = $row3[1];

    $number_of_file_fields = 0;
    $number_of_uploaded_files = 0;
    $number_of_moved_files = 0;
    $uploaded_files = array();
    $upload_directory = dirname(__file__) . '/uploaded/'; //set upload directory

    for ($i = 0; $i < count($_FILES['images']['name']); $i++) {
        $number_of_file_fields++;
        if ($_FILES['images']['name'][$i] != '') { //check if file field empty or not
            $number_of_uploaded_files++;
            $uploaded_files[] = $_FILES['images']['name'][$i];
            if (move_uploaded_file($_FILES['images']['tmp_name'][$i], $upload_directory . $_FILES['images']['name'][$i])) {
                $number_of_moved_files++;
                $url = $_FILES['images']['name'][$i];
                list($width, $height, $type, $attr) = getimagesize("uploaded/".$_FILES["images"]['name'][$i]);
                $pieces = explode("_", $url);
                $ImageName = $pieces[1];    
                mysql_query("UPDATE ProjectImage SET Name = '$ImageName', Url = '$url', UrlHeight =  '$height' WHERE Name = '$originalname' AND Pid = '$id'");
            }    
        }    
    } 
```

&

**PHP 用于生成现有图像列表：**

```
$query2 = "SELECT * FROM ProjectImage as pi WHERE pid = '$id' ORDER BY pi.id";
$result2 = mysql_query ($query2); // Run the Query
while ($row2 = mysql_fetch_array($result2))
{
?>
<div id="file_container" class="control-group">
    <label for="image" class="control-label">Image:</label>
    <div class="controls">
        <input name="images[]" type="file"  />
        <img src="uploaded/<?php echo $row2['Url']; ?>" />
        <a href="delete.php?id=<?php echo $row2['id']; ?>">Delete</a>
        <br />
    </div>
</div>
<?php
}
?>
<a href="javascript:void(0);" onClick="add_file_field();">Add another</a><br /> 
```

非常感谢任何指针:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:23:28.090

我不确定您是否希望它们替换现有的。无论如何，我会给你所有需要的方法来做：

[**file_exists()**](http://php.net/manual/en/function.file-exists.php) - 基于路径返回布尔值。可用于检查相同文件是否已存在。

[**rename()**](http://php.net/manual/en/function.rename.php) - 你的代码中可能已经有这个了。它基本上会替换重定位时的现有文件。如果您不想要这种行为，`file_exists()`请先使用条件。

[**您可以通过 MYSQL INSERT ... ON UPDATE**](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)方法轻松解决上传和替换功能。这将需要将图像路径的列设置为唯一，无论如何您都应该拥有。

**例子：**

```
INSERT INTO ProjectImage (Name, Url, UrlHeight, path_to_file)
VALUES ('$ImageName', '$url', '$height', '$path_to_file')
ON DUPLICATE KEY UPDATE Name = VALUES(Name), Url = VALUES(Url), UrlHeight = VALUES(UrlHeight) 
```

Appart 从那，恐怕我发现你的代码太不合逻辑了。有些变量有大写字母，有些变量对于它们的描述来说太长了，而且你的代码有被 MySQL 注入的危险。

# asp.net - 如何向 Crystal Report 添加多个存储过程

> ID：13602439
> 
> 赞同：0
> 
> 时间：2012-11-28T10:02:09.463
> 
> 标签：asp.net, sql, stored-procedures, crystal-reports

我是使用存储过程的新手。我有两个存储过程，这两个过程的数据彼此不相关。我想在一个水晶报表中显示这两个存储过程的所有数据。而且我想一个接一个地显示来自两个过程的数据，如下所示。谁能帮我解决这个问题？

```
Position History Table
--------------------------------------------------
Date | Grade | Designation | Department | Reason |
--------------------------------------------------

Salary History Table
-------------------------------------
Date | Salary | Salary Change Reason|
------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:01:33.277

在 Crystal 中处理多个“不相关”数据集的唯一方法是使用子报表。

# java - Java 相当于 Windows 记事本的“Unicode 编码”是什么？

> ID：13602440
> 
> 赞同：0
> 
> 时间：2012-11-28T10:02:13.490
> 
> 标签：java, excel, unicode, encoding, notepad

我有制表符分隔的值，我需要使用 Java 将其导出为文本文件，以便在 Microsoft Excel 中打开。当制表符分隔的值包含中文字符时，就会出现问题。

我尝试使用 UTF-8 导出文本文件，但 Excel 无法解释字符。然后我在记事本中打开导出的文本文件并将其保存为“Unicode”，它开始在 Excel 中显示正确的章程。

![在此处输入图像描述](../Images/e92c6637a2392a7a22357f16ae9b5fe5.png)

那么有人可以告诉我Java中的记事本“Unicode”等价物是什么吗？

我的代码是：

```
response.getOutputStream().write(reportHTML.getBytes("UTF-8")); 
```

reportHTML 具有制表符分隔值的位置。

[这](https://www.dropbox.com/s/5glcrjr5b27opwu/AccumGradebookRpt.txt)是编码为 Unicode 的文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:59:36.843

这意味着`"UTF-16LE"`，并且每个 java 平台实现都[需要](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/charset/Charset.html)支持它。

```
response.getOutputStream().write(reportHTML.getBytes("UTF-16LE")); 
```

`FF FE`记事本 unicode 编码还会在文件开头插入 UTF-16LE BOM 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:09:50.847

尝试将 BOM 添加到文件的第一个字节。[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:10:09.240

在 Windows 环境中，当编码称为“Unicode”时，它*通常*指的是[UCS-2 或 UTF-16](https://en.wikipedia.org/wiki/UTF-16)。

# javascript - selenium IDE 用户扩展

> ID：13602443
> 
> 赞同：0
> 
> 时间：2012-11-28T10:02:23.613
> 
> 标签：javascript, selenium, generator, selenium-ide

添加用户扩展时，我遇到了 selenium IDE 的问题。代码在 html 中正确生成随机电子邮件，但 selenium 似乎没有将“@mail.com”连接到生成的字符串

在 selenium 中：randomString||8|mail||varName

我使用的代码在这里：http://seleniumide.blogspot.com/2010/12/random-number-generator.html

这就是我添加的内容：

```
function generateRandomMail( length, chars ) {
var string = '';
for ( var i = 0 ; i < length ; i++ )
    string += chars[ Math.floor( Math.random() * chars.length ) ];
string = string+"@mail.com";
return string; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:46:23.127

这一行可能会有错误：

```
var string = string+"@mail.com"; 
```

我不是 javascript 专家，但在我看来，您正在再次初始化该变量。尝试删除`var`这一行开头的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:29:46.623

生成随机电子邮件

使用我的代码生成随机电子邮件，它对我来说可以正常工作。

```
 Selenium.prototype.doTypeRandomEmail = function(locator) {
/**
* Sets the value of an input field to a random email id, 
* as though you typed it in.
*
* @param locator an <a href="#locators">element locator</a>
*/

// All locator-strategies are automatically handled by "findElement"
var element = this.page().findElement(locator);

/* The following block generates a random email string */
var allowedChars = "abcdefghiklmnopqrstuvwxyz";
var stringLength = 8;
var randomstring = '';

for (var i=0; i<stringLength; i++) {
    var rnum = Math.floor(Math.random() * allowedChars.length);
    randomstring += allowedChars.substring(rnum,rnum+1);
}

// Append a domain name
randomstring += "@somedomain.com"

// Replace the element text with the new text
this.browserbot.replaceText(element, randomstring);
 }; 
```

类型随机电子邮件 || id=wmd 输入 ||

# java - Ajax 导航问题后退按钮

> ID：13602452
> 
> 赞同：1
> 
> 时间：2012-11-28T10:02:52.860
> 
> 标签：java, javascript, jquery, spring, spring-mvc

我在 Java Spring Framework 中有一个基于 Ajax 的选项卡切换应用程序，我必须处理后退按钮场景。通过以下指定代码已成功完成现在面临的效果是第一页加载，而不是针对特定历史选择的选项卡出现选项卡切换跳转。如果有人对此提供帮助，那将非常感谢。

```
var innerTab = "";
function navigateAjaxHtmlSetup(target,response){
        if (typeof target == 'undefined') 
        target = "#ajax-container";  
        $(target).html(response);
        $("input[check-with-select]:checked").parent("label").parent("td").nextUntil(":last").find('select').attr('required', 'required');
        $(target).focus();
        $("#ajax-loader").hide();    
}
function pushStateToHistory(){
    var history = window.history;
    var location = window.location.pathname;
    history.pushState({}, "GHFP", location+activeTabs());
}

function anchorAjaxCall(self,url,state){
        $.ajax({
            type: 'GET',
            url: url,
            dataType: "html",
            success: function (response) {
                var target = self.attr('targeto');
                navigateAjaxHtmlSetup(target,response);
                if (state)
                    pushStateToHistory();
//              if(innerTab != ""){
//                  var anchor  = $("a#"+innerTab);
//                  innerTab = "";
//                  anchorAjaxCall(anchor,anchor.attr('href'));
//              }
            }
        });
}

function activeTabs(){
    selectedTabList = $(".tabs-nav a.active");
    var activeURL;
    if (selectedTabList.length > 0){
        activeURL="#";
        selectedTabList.each(function(index,el){
            activeURL +="/"+$(el).attr('id');
        });
    }else{
        activeURL="";
    }   
    return activeURL;
}

function urlAjaxNavigationHandling(hash){
    if (hash.indexOf('/')!=-1)
    {
        var selectedTabList = hash.substring(1,hash.length).split('/');
        var anchor  = $("a#"+selectedTabList[1]);
        anchorAjaxCall(anchor,anchor.attr('href'),false);
        if (selectedTabList.length > 1)
            innerTab = selectedTabList[2];
    }  
}
window.onpopstate = function(e) {
    urlAjaxNavigationHandling(window.location.hash);
}; 
```

尽管我的问题根本与 Spring 或 Java 无关，但我只是将它们指定为标记，如果有人在谷歌周围搜索以实现 Ajax 基础应用程序。这可能对他有帮助，因为我没有在 Spring Framework 中找到任何对 JQuery 的内置支持，因为 Ruby on Rails

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:35:43.713

Spring Framework 与 Rails 不同，Grails 与 Rails 很接近，但具有 Groovy。

正如您已经在尝试的那样，您的问题的解决方案基本上是使用浏览器的历史记录。我可以补充的唯一想法是您应该查看 HTML5 History API [http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)并考虑使用已经支持路由器的 js 框架，例如[http://backbonejs.org/ 。](http://backbonejs.org/)

# sql - 如何将两列结果合并为一列并带有分隔符

> ID：13602457
> 
> 赞同：2
> 
> 时间：2012-11-28T10:03:19.697
> 
> 标签：sql, oracle11g

我有一个像这样的查询

```
select a.host_coll_code AS "Code", a.description AS "DESCRIPTION" 
from coll_collateral a 
```

当此查询运行时，我得到类似这样的结果

```
 Code          DESCRIPTION
  ---------------------------
   123              ABC
   589              UYR
   ...              ... 
```

我想在一列中使用分隔符得到结果

```
Code and Description
---------------------
      123-ABC
      589-UYR
      .... 
```

我该怎么做 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:09:31.830

通过使用`concat`函数或连接运算符`||`：

```
SQL> with t1(Code, DESCRIPTION) as(
  2    select 123, 'ABC' from dual union all
  3    select 589, 'UYR' from dual
  4  )
  5  select concat(concat(to_char(code), '-'), DESCRIPTION) result
  6    from t1
  7  ;

RESULT
-----------
123-ABC
589-UYR 
```

或者

```
select to_char(code) || '-' || Description result
  from t1

 RESULT
-----------
123-ABC
589-UYR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:08:05.093

```
select a.host_coll_code || '-' || a.description AS "Code and Description" 
from coll_collateral a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:08:38.313

```
select CAST(a.host_coll_code AS VARCHAR(100))
       ||'-'||
       a.description AS "CODE_AND_DESCRIPTION" 
from coll_collateral a 
```

# c# - 在 CreateFolderAsync 期间引发 System.InvalidOperationException

> ID：13602459
> 
> 赞同：1
> 
> 时间：2012-11-28T10:03:24.670
> 
> 标签：c#, windows-8, microsoft-metro

我想在我的构造函数中获取一个文件夹。所以，我需要一个非异步方法。

```
 public static Windows.Storage.StorageFolder getStorageImagesDir()
    {
        Windows.Storage.StorageFolder folder = Windows.Storage.ApplicationData.Current.LocalFolder.CreateFolderAsync("images", CreationCollisionOption.OpenIfExists).GetResults();

        return folder;
    } 
```

但是，`System.InvalidOperationException`如果该文件夹第一次不存在，则会被抛出。（不知何故，文件夹仍然被创建，甚至抛出异常）

当文件夹已经存在时，该功能可以正常工作。

我可以知道我的代码有什么问题吗？

**在 Desktop .NET、Java、Python... 中，我们可以执行文件夹创建，只需一行简单的 API 调用。例如，`Directory.CreateDirectory`在 .NET 中，`File.mkdirs`在 Java 中，...... 那么，为什么在 Windows Store App 中，我们需要以异步方式进行呢？它不会使简单的事情变得不必要的复杂吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:37:49.903

从 MSDN 中的某个人那里获取代码。

```
StorageFolder folder = ApplicationData.Current.LocalFolder.CreateFolderAsync("images", CreationCollisionOption.OpenIfExists)
                               .AsTask()
                               .Result;
return folder; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:29:21.007

问题是您试图在构造函数中执行异步操作。构造函数本身不是异步的，因此您可能会在实际创建文件夹之前尝试运行操作 (GetResults)。

你有两个选择：

1.  您可以创建一个异步方法，并在该方法中等待调用以使异步初始化，或者
2.  您可以将文件夹代码移出构造函数并提供一些显式初始化。

无论哪种方式，您将获得的对文件夹的唯一有效引用是等待异步操作。否则它将在操作完成之前返回。

# java - 将字节数组或 strinbuilder 转换为 utf-8

> ID：13602465
> 
> 赞同：2
> 
> 时间：2012-11-28T10:03:53.110
> 
> 标签：java

在我以以下方法返回字符串之前，我想将内容转换为 utf-8 字符集：

```
public static String getContentResult(URL url) throws IOException{
    InputStream in = url.openStream();
    StringBuilder sb = new StringBuilder();

    byte [] buffer = new byte[4096];

    while(true){
        int byteRead = in.read(buffer);
        if(byteRead == -1)
            break;
        for(int i = 0; i < byteRead; i++){
            sb.append((char)buffer[i]);
        }
    }
    in.close();
    return sb.toString();
} 
```

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:07:58.140

您不想转换*为*UTF-8。您希望（我相信）将传入的数据流解释*为*UTF-8。

选项：

*   创建一个`InputStreamReader`包装您的传入流，指定 UTF-8，并一次读取*字符*块，附加到`StringBuilder`

    ```
    StringBuilder builder = new StringBuilder();
    char[] buffer = new char[4096];
    InputStreamReader reader = new InputStreamReader(in, "UTF-8");
    int charsRead;
    while ((charsRead = reader.read(buffer)) != -1) {
        builder.append(buffer, 0, charsRead);
    } 
    ```

*   使用[Guava](http://guava-libraries.googlecode.com)将整个数据读取为字节数组，然后一次性转换：

    ```
    byte[] data = BytesStreams.toByteArray(in);
    return new String(data, Charsets.UTF_8); 
    ```

在任何一种情况下，您都应该使用一个`finally`块来关闭流，这样即使抛出异常也可以关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:06:59.730

从字符串转换为字节[]：

```
String s = "some text here";
byte[] b = s.getBytes("UTF-8"); 
```

从 byte[] 转换为 String：

```
byte[] b = {(byte) 99, (byte)97, (byte)116};
String s = new String(b, "US-ASCII"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-20T18:47:42.120

如果要添加实际字节值，请不要使用“US-ASCII”，只需关闭该参数即可：

```
byte[] abcd={'A','B','C','D',13,10,'E','F',(byte)255,'G','H',13,10,'J','K',0,'L','M'};
String s = new String(abcd);
StringBuilder sabcd=new StringBuilder();

sabcd.append(s);
System.out.println(sabcd);
for(int i=0;i<sabcd.length();i++) {
    char c=sabcd.charAt(i);
    System.out.println((int)c);
} 
```

结果：

```
ABCD
EFÿGH
JK
65
66
67
68
13
10
69
70
255
71
72
13
10
74
75
0
76
77 
```

# urlencode - 编码问题服务堆栈、引号和尖括号被剥离

> ID：13602472
> 
> 赞同：4
> 
> 时间：2012-11-28T10:04:11.630
> 
> 标签：urlencode, servicestack

我有一个服务堆栈应用程序，一个测试服务收到一个简单的请求，但我发现收到的请求值与原始请求不匹配。

我发送：`http://localhost/testapp/test?value=%22test%20data%22%20%3C12345%3E`

但代码输出：测试数据“12345>

请注意缺少的第一个双引号和缺少的左尖括号。

任何想法为什么应用程序会删除第一个 " 和 "<"？它是某种 XSS 保护的一部分吗？

我的代码：

```
public class TestService : RestServiceBase<RequestDto>, IRestService<RequestDto>
{
    public override object OnGet(RequestDto request)
    {
       return request.Value;
    }
}

public class RequestDto
{
    public string Value { get; set; }
} 
```

首先允许服务堆栈接收带有“<”的请求。我不得不切换应用程序 web.config 来使用：requestValidationMode="2.0"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T21:36:18.713

这也已在即将发布的 servicestack 中得到修复。

有关更多信息，请参阅此[github 问题](https://github.com/ServiceStack/ServiceStack/issues/703)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:44:51.757

**您需要将整个值括在引号中并转义您的内部引号。**这是因为 querystring 参数需要 ServiceStack JSV 格式。意思是：

> 具有以下任何字符的任何字符串：[]{}," 使用 CSV 样式的转义进行转义，其中值用双引号引起来

有关更多详细信息，请参阅[http://www.servicestack.net/docs/text-serializers/json-csv-jsv-serializers](http://www.servicestack.net/docs/text-serializers/json-csv-jsv-serializers)。

您需要将您的价值传递为

```
?Value="""test data"" <12345>" 
```

或者

```
?Value=%22%22%22test%20data%22%22%20%3C12345%3E%22 
```

这将被反序列化为 '

```
"test data" <12345> 
```

# iphone - 在使用 FMDB 执行 sqlite 查询时受到打击

> ID：13602479
> 
> 赞同：2
> 
> 时间：2012-11-28T10:04:30.123
> 
> 标签：iphone, ios, xcode, sqlite, fmdb

我在我的一个 iPhone 项目中使用 SQLite 的 FMDB 框架。代码如下：

```
for (int i = 0; i < CatID.count; i++) 
{ 
    NSString *subCatId = [NSString stringWithFormat:@"SELECT * FROM expense 
    where CAT_ID = %@ AND CURR_ID = %@ 
    AND EXP_DATE BETWEEN '%@' AND '%@' ",
    [CatID objectAtIndex:rowTrip],
    [currID objectAtIndex:1],
    _fromTextField.text,
    _toTextField.text];

    FMResultSet *result = [database executeQuery:subCatId];

    while([result next]) 
    {
        [_total addObject:[result stringForColumn:@"AMOUNT"]];
    }

} 
```

1.  `CatID`是固定的，即它是由用户给定的。

2.  `carrID`使用 for 循环获取并进行查询。

每次 SQL 查询后，`_total`数组都会增加（添加新对象），但这会挂起。

假设我们的`"AMOUNT"`输出是 100，并且`CatID.count`时间对象被添加到`_total`数组中。请告诉我我在哪里做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:45:20.607

在执行 SQL 查询时，**不要**使用`[NSString stringWithFormat:]`方法。相反，只需按原样使用查询并在`[database executeQuery:]`.

尝试以下操作：

```
NSMutableArray* _total = [[NSMutableArray alloc] init];

for (int i = 0; i < [CatID count]; i++) 
{ 
    NSString *subCatId_QUERY = @"SELECT * FROM expense 
    where CAT_ID = %@ AND CURR_ID = %@ 
    AND EXP_DATE BETWEEN '%@' AND '%@' ";

    NSNumber* rowTrip  = [[CatID objectAtIndex:rowTrip] intValue];
    NSNumber* currID   = [[currID objectAtIndex:1] intValue];

    NSString* fromDate = _fromTextField.text;
    NSString* toDate   = _toTextField.text;

    FMResultSet *result = [database executeQuery:subCatId_QUERY,rowTrip,currID, fromDate, toDate];

    while([result next]) 
    {
        [_total addObject:[result stringForColumn:@"AMOUNT"]]; //are you sure about this? string??
    }

} 
```

# netty - netty 尝试打开服务器端套接字时的无限循环延迟？

> ID：13602480
> 
> 赞同：0
> 
> 时间：2012-11-28T10:04:32.740
> 
> 标签：netty

我正在阅读Netty的源代码，在ServerBootstrap.bind(final SocketAddress localAddress)方法中，我发现抛出InterruptedException时可能存在无限循环（检查下面的代码），我的理解对吗？

```
do {
    try {
        future = futureQueue.poll(Integer.MAX_VALUE, TimeUnit.SECONDS);
    } catch (InterruptedException e) {
        interrupted = true;
    }
} while (future == null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:36:56.483

是的，它是正确的.. 你能打开一个错误报告 [1] 吗？

[1] [https://github.com/netty/netty/issues](https://github.com/netty/netty/issues)

# javascript - 圆形滑块图像控件javascript

> ID：13602481
> 
> 赞同：0
> 
> 时间：2012-11-28T10:04:36.220
> 
> 标签：javascript, jquery, html, css

我已经使用了这个站点[http://www.joezimjs.com/demos/roundabout-demo/](http://www.joezimjs.com/demos/roundabout-demo/)的圆形滑块，我只需要在旋转器中显示三个图像。如果我使用超过 7 张图像，则旋转器中有 5 张图像。可能有任意数量的图像，但应在旋转器中显示三个。如何解决这个问题？

脚本：

```
(function($) {

var $descriptions = $('#carousel-descriptions').children('li'),
    $controls = $('#carousel-controls').find('span'),
    $carousel = $('#carousel')
        .roundabout({childSelector:"a", minOpacity:1, autoplay:true, autoplayDuration:5000, autoplayPauseOnHover:true })
        .on('focus', 'a', function() {
            var slideNum = $carousel.roundabout("getChildInFocus");

            $descriptions.add($controls).removeClass('current');
            $($descriptions.get(slideNum)).addClass('current');
            $($controls.get(slideNum)).addClass('current');

        });

$controls.on('click dblclick', function() {
    var slideNum = -1,
        i = 0, len = $controls.length;

    for (; i<len; i++) {
        if (this === $controls.get(i)) {
            slideNum = i;
            break;
        }
    }

    if (slideNum >= 0) {
        $controls.removeClass('current');
        $(this).addClass('current');
        $carousel.roundabout('animateToChild', slideNum);
    }
});

}(jQuery)); 
```

# iphone - 数组值递减

> ID：13602486
> 
> 赞同：0
> 
> 时间：2012-11-28T10:04:48.403
> 
> 标签：iphone, ios, xcode, nsmutablearray

我使用以下代码选择正确答案，当它达到限制时，它会显示结果视图，

```
-(void)displayImageAndButton:(int)pos
{
CATransition *transition = [CATransition animation];
transition.duration = 1.0f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionFade;

[animage.layer addAnimation:transition forKey:nil];
animage.image=[UIImage  imageNamed:[NSString stringWithFormat:@"%@.jpg",[imageary objectAtIndex:pos]]];
//NSLog(@"pos value%d",pos);
UIView *newView = [self.view viewWithTag:1];
if([newView isKindOfClass:[UIButton class]])
{
    NSLog(@"pos value%d",pos);
    UIButton *newButton = (UIButton *)newView;
    name=[imageary objectAtIndex:pos++];
    [newButton addTarget:self action:@selector(submitGuess:)
        forControlEvents:UIControlEventValueChanged];
    [newButton setTitle:name forState:UIControlStateNormal];
}
newView = [self.view viewWithTag:2];
if([newView isKindOfClass:[UIButton class]])
{
    NSLog(@"pos value%d",pos);
    UIButton *newButton = (UIButton *)newView;
    name=[imageary objectAtIndex:pos++];
    [newButton addTarget:self action:@selector(submitGuess:)
        forControlEvents:UIControlEventValueChanged];
    [newButton setTitle:name forState:UIControlStateNormal];
}
newView = [self.view viewWithTag:3];
if([newView isKindOfClass:[UIButton class]])
{
    NSLog(@"pos value%d",pos);
    UIButton *newButton = (UIButton *)newView;
    name=[imageary objectAtIndex:pos++];
    [newButton addTarget:self action:@selector(submitGuess:)
        forControlEvents:UIControlEventValueChanged];
    [newButton setTitle:name forState:UIControlStateNormal];
}
newView = [self.view viewWithTag:4];
if([newView isKindOfClass:[UIButton class]])
{
    NSLog(@"pos value%d",pos);
    UIButton *newButton = (UIButton *)newView;
    name=[imageary objectAtIndex:pos++];// Here the problem coming when it value 13 its getting error what should i change
    [newButton addTarget:self action:@selector(submitGuess:)
        forControlEvents:UIControlEventValueChanged];
    [newButton setTitle:name forState:UIControlStateNormal];
}

} 
```

更新^^^

```
- (IBAction)submitGuess:(id)sender
{
    UIButton *mybutton = (UIButton *)sender;

    if ([mybutton.titleLabel.text isEqualToString:[imageary objectAtIndex:positionOfQuest]])
    {
        //titles equal
        [self alertshow];
        positionOfQuest++;
        totalGuesses++;
        timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(removeImageView) userInfo:nil repeats:NO];
        [self displayImageAndButton:positionOfQuest];
        [lb1 setText:[NSString stringWithFormat:@"Question %i ", positionOfQuest + 1]];
    } else {
        totalGuesses++;
        [self alertshow2];
    }

    NSLog(@"toatguess value%d",positionOfQuest);
    NSLog(@"toatguess value%d",numCorrect);
    if(positionOfQuest==numCorrect)
    {
        [self resulmsg];
        [lb3 setText:[NSString stringWithFormat: @"%i guesses, %.02f%% correct", totalGuesses,
                      1000 / (float)totalGuesses]];

        [lb4 setText:[NSString stringWithFormat: @"%.02f%%",1000 / (float)totalGuesses]];
        NSLog(@"lb4%@",lb4);
    }
} 
```

我有10个限制，即。numcorrect 值为 10。但当它达到 9 时，它显示错误。

```
2012-11-28 15:27:56.430 Kidsapp[4225:c07] toatguess value8
2012-11-28 15:27:56.431 Kidsapp[4225:c07] toatguess value10
2012-11-28 15:27:57.409 Kidsapp[4225:c07] toatguess value9
2012-11-28 15:27:57.409 Kidsapp[4225:c07] toatguess value10
2012-11-28 15:27:58.017 Kidsapp[4225:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 13 beyond bounds [0 .. 12]' 
```

这里有什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:17:16.920

好吧，至于您的错误，很明显您正在尝试访问 12 数组的第 13 个对象。尝试放置一些断点来调试您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:34:40.303

数组从索引 0 开始，因此您的最大索引值必须是 [[array count]-1]。根据您的代码 positionOfQuest 正在获取值 13 您收到错误

因为您的数组计数为 13，但数组的索引为 12 中的 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:31:58.337

这是因为您`positionOfQuest`的价值为 13 并且您正在搜索

```
[imageary objectAtIndex:12]; 
```

但是图像有对象直到索引 12（总共 13 个对象索引 0....12）

因此，根据您的问题，只需设置一个 if 条件

```
if ([imageary count] > positionOfQuest)
{
    if ([mybutton.titleLabel.text isEqualToString:[imageary objectAtIndex:positionOfQuest]])
    {
        //Your work
    }

} 
```

# jquery - 文本输入值更改时如何运行 jQuery？

> ID：13602489
> 
> 赞同：1
> 
> 时间：2012-11-28T10:04:57.420
> 
> 标签：jquery, html, ajax

我想要的只是在用户更改输入值时显示成功消息。如果它以`foo`用户类型`s`开始`foos`，我想显示一条成功消息。

我错过了什么？

简单的 JSFiddle：http: [//jsfiddle.net/DdyNN/](http://jsfiddle.net/DdyNN/)

HTML：

```
<input type="text" name="foo" id="foo" value="foo">
<div id="bar"></div>​ 
```

JS：

```
$('#foo').change(function() { 
    $('#bar').html('yay!');
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:07:54.007

离开文本字段时会触发更改事件。我会注册到 keyup 或 keydown 事件。

链接：

*   [http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)
*   [http://api.jquery.com/keydown/](http://api.jquery.com/keydown/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:07:44.160

这有效：

```
$('#foo').keyup(function() {
    if($(this).val()=='foos'){
        $('#bar').html('yay!');
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:09:57.613

$.change() 用于选择而不是输入类型。尝试：

```
var currentvalue = $('#foo').val();
$('#foo').focusout(function(){
if($(this).val() != currentvalue){
$('#bar').html('yay!'); currentvalue = $(this).val();
}
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T10:09:58.780

试试这个，

**[现场演示](http://jsfiddle.net/DdyNN/6/)**

```
prv = $('#foo').val();
$('#foo').keyup(function() {
    if(prv + "s" == $(this).val()) 
       $('#bar').html('yay! success');
    else
       $('#bar').html('yay! failure'); 

        prv = $('#foo').val();
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T10:13:05.703

焦点时在文本框上按下的键上的这项工作

```
$('#foo').focus(function() { 
   $('#foo').keyup(function(){
     if($(this).val()=='foos')$('#bar').html('yay!');
      });
});​ 
```

# regex - 正则表达式 字符串开头的通配符

> ID：13602495
> 
> 赞同：0
> 
> 时间：2012-11-28T10:05:27.327
> 
> 标签：regex

我有一个字符串'*这是星期一早上的疯狂*'，我如何在字符串开头的正则表达式中添加一个通配符以匹配任何没有'*星期一早上*'的字符串。

我的**正则表达式**示例：^(?!monday morning|Monday Morning).*

当字符串是 ' *monday morning madness ' 时，***正则表达式**可以正常工作，但不适用于 ' *This is the monday morning madness* '。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:07:00.057

只需删除初始`^`. 该字符意味着正则表达式必须匹配字符串的开头；显然你不想要那个。

或者，`.*`在开头添加，因为它已经存在于末尾，以在匹配的模式中包含任何字符及其任何数量。**

# image - 如何找到错误图像？

> ID：13602499
> 
> 赞同：4
> 
> 时间：2012-11-28T10:05:41.663
> 
> 标签：image, image-processing

我在图像处理方面遇到问题，但我不知道如何解决。

我有 2 张图片： - 图片 1：http: [//goo.gl/BBxVl](http://goo.gl/BBxVl) - 图片 2：http: [//goo.gl/X0VFW](http://goo.gl/X0VFW)

pic 2 实际上表达了 pic 1 但它被对象覆盖了。我正在使用 matlab 代码编写一个程序来定义：如果图片是完成（完美）的，我将“显示”它。但是如果图片有任何错误，程序会为用户显示布告栏。

直到这个时候，我仍然无法解决它，因为我不知道从哪里开始；我对覆盖图片的对象的形状和颜色也没有任何定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:18:00.060

我的想法也从两个图像之间的绝对差异开始。这里的问题是，由于压缩和某些文件格式（如 jpg）的内部工作，您可能会得到很多根本没有修改的区域。例如，这里有两个示例图像和它们之间的二进制差异，以突出显示每个修改点，尽管我只手动修改了可见矩形。在非二进制差异中，您几乎不会注意到所有这些点，但它们就在那里。阈值解决了这里的问题，我使用了 20 的值：

![在此处输入图像描述](../Images/990848d80861f1334130322237482c42.png) ![在此处输入图像描述](../Images/50f821936701a9569f1804cb1668751e.png) ![在此处输入图像描述](../Images/e2ccc14673b85a68f0bea3a7e6619861.png) ![在此处输入图像描述](../Images/b04d9e28fd55694497d48da6902a1b4e.png)

现在，为了确定哪些图像是“好”的，我使用了一种修复算法（您可以在[http://www.cc.gatech.edu/~sooraj/inpainting/](http://www.cc.gatech.edu/~sooraj/inpainting/)找到一个这样的实现）。这样做的原因是，如果最终的修复图像不包含人工补丁，则它更可能类似于修复之前的图像。因此，“坏”图像是在修复过程后差异较大的图像。为此，您再次计算两种情况下修复图像和原始图像之间的绝对差异。然后在绝对差 > 0 的区域中使用一些测量值。在此示例中，灰度强度的虚拟总和对于没有矩形的图像给出 424454，对于另一个给出 758366。

这是用于修复的蒙版图像、修复的“好”图像、修复的“坏”图像以及各自的灰度绝对差异：

![在此处输入图像描述](../Images/4d6cb869da1224f21e26eca91888c79d.png) ![在此处输入图像描述](../Images/2a5d25f42315c367ee316c9554778033.png) ![在此处输入图像描述](../Images/a37b9c8780d6961173de3fdb8e322ae8.png) ![在此处输入图像描述](../Images/55081c6b8e6414f0925fdc236dfa7a80.png) ![在此处输入图像描述](../Images/881bc8b4c01865513624aa610b95b895.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:32:08.747

如果您发布的图像是该问题的良好示例，我建议使用以下算法：

1.  将两个图像相互减去
2.  确定差异区域，这将为您提供覆盖“完美”图像的对象形状
3.  沿着失真的边缘看两个图像中哪一个更适合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:07:30.417

所以你不知道哪一个是正确的，而你想选择正确的？或者你有一个地面实况图像，你可以将输入与它进行比较？因为如果您知道正确图像的外观，您可以在图像之间进行简单的减法并找到错误的图像。所以我认为这不是问题所在。

所以，如果你有两张图片，你必须确定哪一张是正确的，你知道错误的类型吗？它总是在图像上添加一个“补丁”？它总是矩形还是也可以与背景图像混合？

一种想法是将图像分割成几部分并对它们中的每一个进行直方图分析，但它只有在原始图像非常恒定并且修补对象与背景有很大不同的情况下才有效。

也许您可以对图像进行边缘检测，然后尝试检测直线（霍夫线检测可以做到这一点），以便您可以搜索矩形。（如果结果是线条，则查找矩形的算法与矩形的形状和大小无关。您只需检查线条方向）

如果您可以更详细地描述错误对象的限制是什么，也许我们可以想到一个更好的主意。

# java - java Object中hashCode的实现是什么？

> ID：13602501
> 
> 赞同：17
> 
> 时间：2012-11-28T10:05:51.947
> 
> 标签：java, java-7, hashcode

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T10:09:28.773

`hashCode` is a `native` method which means that a system library is called internally. See [Java Native Interface](http://en.wikipedia.org/wiki/Java_Native_Interface) for more details.

There is a question on SO [Why hashCode() and getClass() are native methods?](https://stackoverflow.com/questions/10578764/why-hashcode-and-getclass-are-native-methods) Might be interesting for you.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T10:10:43.343

The default hashCode is going to be implementation-specific. I suspect it's related to the memory address, but note that the VM moves objects around in memory (and, of course, the hashCode has to remain the same). So it won't be the *actual* memory address.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T10:08:03.637

The default `hashcode()` implementation frequently but not always provides an integer based loosely on the memory address of the object, however the memory address can change. This may vary based loosely upon the JVM implementation.

> hashCode()
> 
> As you know this method provides the has code of an object. Basically the default implementation of hashCode() provided by Object is derived by mapping the memory address to an integer value. If look into the source of Object class , you will find the following code for the hashCode.
> 
> public native int hashCode();
> 
> It indicates that hashCode is the native implementation which provides the memory address to a certain extent. However it is possible to override the hashCode method in your implementation class.

[http://www.javaworld.com/community/node/1006](http://www.javaworld.com/community/node/1006)

# iis-7 - 为什么 Web Deploy Agent Service 监听 80 和 8172 端口

> ID：13602502
> 
> 赞同：8
> 
> 时间：2012-11-28T10:05:54.247
> 
> 标签：iis-7, webdeploy

在四个 Win Server 2008 R2 机器上，我们安装了 MS Deploy。它侦听端口 80 和 8172，这使网络上的所有其他材料都怀疑在 IIS 7 上运行时如何无需更改端口 80 默认值。

我无法理解。为什么它同时使用两个端口？我无法按照说明将其移至 8172，因为它已经在那里注册了一些东西。

它会导致两个问题：1) 我想关闭一个额外的攻击面 2) 它使我们的负载均衡器无法检测到 IIS 何时停止并且客户从 MsDepSvc 获得 404！

这太愚蠢了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T14:24:45.483

我**想**我已经解决了这个问题。

世界上有两个 Web 部署。与 Web 管理服务 (WMSvc) 一起安装的一个，人们将其称为 Web Deploy，并通过 Visual Studio 通过 :8172/msdeploy.axd 使用它，然后是 Web Deploy，这是您安装的额外内容，允许从公共 Internet 发布。

一直以来，我和我的同事以及在不同公司共事过的人都在不必要地安装 Web Deploy，然后甚至没有使用它。

这就是我的*理论*。现在我将去禁用 MsDepSvc，看看它是否成立。

**更新 1 - 这是不正确的。有点。**

在一台新服务器上，我认为 Web Deploy 是 WMSvc 内置的，在我安装 Web Deploy 之前，我一直从 msdeploy.exe 收到 404.7 错误 - 因为一个名叫 Richard 的好人说“Web Deploy 向 WMSvc 注册了一个处理程序”。

哈！因此，部署本身并不是 WMSvc 的一部分。在安装 Web Deploy 之后，您最终会得到两个部署处理程序，一个在 WMSvc 中，另一个在专用的 Windows 服务 MsDepSvc 中，您可以禁用 MsDepSvc 以防止它占用端口 80 并欺骗您的负载均衡器以为服务器已启动当它下来！

[通过 MSDeploy.exe 从 WMSvc 获取 404](https://stackoverflow.com/questions/13870561/getting-a-404-from-wmsvc-via-msdeploy-exe)

# c# - MSB3073 错误代码 9009

> ID：13602507
> 
> 赞同：9
> 
> 时间：2012-11-28T10:06:02.953
> 
> 标签：c#, visual-studio, msbuild

我在 VS 2010 上有一个解决方案，它一直在构建且没有错误，然后构建开始失败并出现以下错误：-

```
**error MSB3073: The command "xcopy "C:\Program Files\Microsoft SDKs\Kinect\Developer Toolkit v1.5.1\Redist\amd64\FaceTrackLib.dll" "C:\Users\HP\Documents\FaceTrackingVisualization\Out\SingleFace\x64\Debug\" /eiycq
xcopy "C:\Program Files\Microsoft SDKs\Kinect\Developer Toolkit v1.5.1\Redist\amd64\FaceTrackData.dll" "C:\Users\HP\Documents\FaceTrackingVisualization\Out\SingleFace\x64\Debug\" /eiycq
:VCEnd" exited with code 9009\.  C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets   113 6   SingleFace** 
```

我不知道，在网上的解决方案中人们说要查找空格或缩进错误，但我不明白在哪里编辑这些更改..错误将我指向这些代码行错误行是粗线

```
Target Name="PostBuildEvent" Condition="'$(PostBuildEventUseInBuild)'!='false'"

 Message Text="Description: %(PostBuildEvent.Message)" Condition="'%(PostBuildEvent.Message)' != '' and '%(PostBuildEvent.Command)' != ''"/

 **Exec Command="%(PostBuildEvent.Command)$(BuildSuffix)" Condition="'%(PostBuildEvent.Command)' != ''"/**

  /Target 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-29T13:35:26.340

在我的情况下，我不得不将我的构建后事件中的 $(MSBuildBinPath)\msbuild.exe 更改为“$(MSBuildBinPath)\msbuild.exe”，因为路径包含空格。

附带说明：我只需要在 VS 2013 中这样做 - VS 2012 和 2010 都可以在没有引号的情况下处理这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T14:49:31.667

当一些糟糕的安装程序破坏了系统环境，尤其是 PATH 环境变量时，就会发生这种情况。所以 msbuild 不能再执行 xcopy.exe 程序。

通过启动命令提示符并键入来获取基本诊断信息`PATH`。确认您看到 c:\windows\system32 列出。然后键入`where xcopy.exe`并确认您只得到一个命中，即 c:\windows\system32 中的那个。然后键入`xcopy /?`以验证您是否可以运行 xcopy。如果您不知道如何解决，请访问 superuser.com

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:10:36.883

在 Visual Studio 解决方案资源管理器中右键单击您的项目并选择“属性”以访问项目属性窗口，单击“构建事件”，您将看到两个包含构建前/构建后步骤的文本框。

*   检查构建后步骤中的所有路径是否正确且有效。

*   尝试设置 xcopy 命令的完整路径*c:\windows\system32\xcopy.exe*

# c# - 在哪里可以找到“Microsoft.VisualStudio.TestTools.UnitTesting”缺失的 dll？

> ID：13602508
> 
> 赞同：153
> 
> 时间：2012-11-28T10:06:03.150
> 
> 标签：c#, visual-studio-2010, dll

我的 C# Visual Studio 项目中出现以下错误：

> 命名空间“Microsoft”中不存在类型或命名空间名称“VisualStudio”（您是否缺少程序集引用？）

我还试图找到 microsoft.dll 文件，但找不到任何参考。我在搜索错误的 DLL 吗？

```
using Microsoft.VisualStudio.TestTools.UnitTesting;  
using Kya.MsFx.Services.Swiper;

namespace Kya.MsFx.Devices.Swiper.Test
{
[TestClass]
public class SwiperWindowTest
{

    private SwiperWebServiceHost m_SwiperWS = null;
    /// <summary>
    ///     start web service on a separate thread, so tests 
    ///     can be executed withut blocking the application thread
    /// </summary>
    [ClassInitialize]
    public void SetupSwiperTests() {

        m_SwiperWS = SwiperWebServiceHost.StartService();

    }

    /// <summary>
    /// Stop service started during class initialize and kill the thread
    /// </summary>
    [ClassCleanup]
    public void CleanupSwiperTests() {
        m_SwiperWS.Stop();
    }

    /// <summary>
    ///   simulate init, swipe, clear operations
    /// </summary>
    [TestMethod]
    public void TestSwiperService()
    {
        MessageBox.Show("test");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-11-28T10:08:58.940

您必须添加参考

```
Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 
```

可以在`C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies\`目录下找到（VS2010专业版或以上；.NET Framework 4.0）。

或右键单击您的项目并选择：添加引用... > .NET： ![或单击添加引用... > .NET：](../Images/9bc2673412e5d973fabadbad2f3d192b.png)

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2018-04-16T19:20:37.840

我知道这是旧的，这是我在谷歌搜索中出现的。我需要在 NuGet 上引用这些包：

[![在此处输入图像描述](../Images/4edf2abd499979e26c6cbe54e7dfee5d.png)](https://i.stack.imgur.com/fsFHf.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-28T10:09:21.543

您要查找的包含该命名空间的 DLL 是

```
Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 
```

请注意，单元测试[不能在 Visual Studio Express 中使用](https://stackoverflow.com/questions/3424229/unit-testing-in-visual-c-sharp-2010-express)。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-07-09T22:35:05.300

要解决此问题，我必须执行以下操作：

1.  使用管理权限启动 Visual Studio 安装程序
2.  如果它提示您安装 Visual Studio 更新，请在继续之前执行此操作
3.  出现提示时，单击按钮以修改现有安装
4.  单击顶部的“单个组件”选项卡/标题
5.  向下滚动到“调试和测试”部分
6.  选中“Web 性能和负载测试工具”旁边的框
7.  单击对话框右下角的修改按钮以安装缺少的 DLL

安装 DLL 后，您可以使用 Agent007 在他的回答中指出的方法添加对它们的引用。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-02-19T09:03:00.780

还有一个不错的[nuget 包](http://www.nuget.org/packages/Microsoft.VisualStudio.QualityTools.UnitTestFramework/ "nuget包")。它会将 dll 拉到您的包文件夹中。您将需要手动添加对 dll 的引用。

**注意**：此软件包不是 Microsoft 官方软件包。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-08-22T18:20:14.617

如果您使用的是 Visual Studio 2017 社区，则位置为：

`C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\ReferenceAssemblies\v2.0`

你想要的DLL在那里： `Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll`

显然它位于`C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies\`Visual Studio 2010 Professional 版本的目录中，但请注意，它`10.0`会根据发布年份进行更改，即 VS 2013 是 12.0 版，VS 2015 是 14.0 版，VS 2017 是 15.0。（VS Express 不受支持，需要通过 NuGet 包管理器安装 NUnit NuGet 包。）

你去**References**，右键单击，选择**Add Reference ， Browse**。导航到路径，然后双击该文件。

然后，您需要`using`在单元测试类的顶部声明：

`using Microsoft.VisualStudio.TestTools.UnitTesting;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-08T07:03:56.793

即对于 Visual Studio 2013，我将引用此程序集：

> Microsoft.VisualStudio.Shell.14.0.dll

你可以在这里找到它：

> C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Extensions\BugAid Software\BugAid\1.0

并且不要忘记实施：

> 使用 Microsoft.VisualStudio；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-29T14:32:33.790

如果您来到这里是因为您的 VSTS 构建作业失败并显示上述错误消息。确保您至少使用 nuget 任务的 2.* 版本来恢复您的包。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-22T00:02:29.453

移动项目并删除它的包文件夹后，我遇到了这个问题。Nuget 显示已安装 MSTest.TestAdapter 和 MSTest.TestFramework v 1.3.2。修复似乎是以管理员身份打开 VS 并构建之后，我能够在没有管理员权限的情况下重新打开和构建。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-12T05:31:06.323

添加对“Microsoft.VisualStudio.QualityTools.UnitTestFramework”NuGet 数据包的引用，它应该可以成功构建它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-24T16:45:34.017

使用 Visual Studio 2019，运行 .net core 3.1 项目，您将需要安装最新的测试框架来解决错误。

完成此操作的最简单方法是将浏览器悬停在 [Test] 注释（红色下划线）上并选择建议的修复。需要的是“搜索并安装最新的测试框架”。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2015-05-28T09:27:49.610

只需参考此 URL 并在此位置下载并保存所需的 dll 文件：

`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies`

网址是：`https://github.com/NN---/vssdk2013/find/master`

# odbc - Informix OBDC 错误用户验证

> ID：13602514
> 
> 赞同：1
> 
> 时间：2012-11-28T10:06:26.593
> 
> 标签：odbc, informix

我在 informix 数据库中有一个名为 test 的用户。

当我尝试配置与该用户的 OBDC 连接时，我收到名为 test@pcname.mynetwork.local 的无效用户的错误。

为什么我在用户名之后得到@pcname.mynetwork.local 以及如何避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:54:01.680

当我尝试使用空的“用户 ID”和“密码”字段选择“数据库名称”时，我遇到了同样的错误。

在 ODBC 驱动程序设置的连接选项卡上，首先填写“用户 ID”和“密码”。然后您可以使用下拉“数据库名称”。

# php - 如何从php中的变量中提取句子或字数？

> ID：13602521
> 
> 赞同：2
> 
> 时间：2012-11-28T10:06:50.780
> 
> 标签：php

下面的文本变量包含 10 个句子。

```
$txt = 'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32\. The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham.'; 
```

例如，如果变量包含来自在文本区域中输入一堆文本的用户的值，我怎么知道变量包含多少段？

另外，我如何提取特定数量单词的变量，例如最多 100 个单词，但如果 100 个单词计数没有以完整的句子结尾，脚本会给我包含 100 个单词或多少单词的完整句子是一个完整的句子，接近我设置的 100 字数限制。

这在php中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:13:04.473

1.  找到总长度并将其除以段落的预定义值
2.  利用`substr ( string $string , int $start [, int $length ]`

参见：[substr 函数](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:15:55.703

你可以做这样的事情。

```
$input = $_POST['textarea'];
$output = array();
preg_match_all("/<p>(.*)<\/p>/",$input,$output);
$paragraphs = count($output); 
```

# django - Django站点地图相同型号的各种链接

> ID：13602531
> 
> 赞同：0
> 
> 时间：2012-11-28T10:07:20.760
> 
> 标签：django, sitemap, django-sitemaps

我在 Django 中为我的网站创建了站点地图，如下所示

**网站地图**

```
class MyModelSitemap(Sitemap):
    changefreq = "daily"
    priority = 0.5

    def items(self):
        return MyModel.objects.all()

    def lastmod(self, obj):
        return datetime.datetime.today() 
```

**网址.py**

```
sitemaps = {
    'mymodel': MyModelSitemap,
    } 
```

`get_absolute_link()`也被实施为`MyModel`

问题是使用了许多其他 URL，`MyModel`因此不可能只有一个`absolute_link`。

我需要根据不同的查询向站点地图提供许多其他 URL `MyModel`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:22:47.610

简单的方法是创建额外的站点地图：

```
class MyModelAdditionalLinkSitemap(MyModelSitemap):
    def location(self, obj):
        return obj.get_additional_link() 
```

网址.py

```
sitemaps = {
    'mymodel': MyModelSitemap,
    'mymodel2': MyModelAdditionalLinkSitemap
} 
```

**添加：**

我只想使用一个`Sitemap`类，请尝试以下操作：

```
import itertools

class MyModelSitemap(Sitemap):
    changefreq = "daily"
    priority = 0.5

    def items(self):
        product = itertools.product(MyModel.objects.all(), xrange(2))
        return list(product)

    def location(self, obj):
        if (obj[1] == 1):
            return obj[0].get_additional_link()
        return obj[0].get_absolute_link()

    def lastmod(self, obj):
        return datetime.datetime.today() 
```

# objective-c - 在 SUPConnectionProfile.h 中找不到方法

> ID：13602532
> 
> 赞同：0
> 
> 时间：2012-11-28T10:07:23.787
> 
> 标签：objective-c, xcode

我是本机应用程序开发的初学者。我使用 xcode 制作了一个项目。我使用 SAP 作为我的后端。现在我正在尝试连接到服务器。为此，我使用 SUPConnectionProperties.h 文件设置了连接属性以进行注册和编写了用于创建本地数据库的代码。现在下一步，即设置同步配置文件对我不起作用。因为方法 setServerName、setNetworkProtocol、setPortNumber 和 setAsyncReplay 在 SUPConnectionProfile.h 中不存在。

那么我该怎么做才能包含这些方法并执行此步骤？任何人都可以为此提出任何建议。我在这里给出方法，有问题。

```
-(BOOL)setupApplicationConnection{
       SUPApplication *app = [SUPApplication getInstance];
    [app setApplicationIdentifier:@"HWC"];
    [app setApplicationCallback:self.callbackHandler];

    SUPConnectionProperties *properties = [app connectionProperties];

        [properties setServerName:@"sapeccxxx.xxx.com"];   
        [properties setPortNumber:5001];
        [properties setFarmId:0];
        [properties setUrlSuffix:@"/tm/?cid=%cid%"];
       [properties setNetworkProtocol:@"http"];

        SUPLoginCredentials *loginCred =[SUPLoginCredentials getInstance];
    [loginCred setUsername:@"ourmac"];
    [loginCred setPassword:nil];
    [properties setLoginCredentials:loginCred];
    [properties setActivationCode:@"1234"];

    if(![flightDetailsTest_Flightdetails_v1DB databaseExists])
    {
                [flightDetailsTest_Flightdetails_v1DB createDatabase];
    }
        SUPConnectionProfile *connProfile = [flightDetailsTest_Flightdetails_v1DB getSynchronizationProfile];
        [connProfile setClientId:@"0" ];
        [connProfile setDomainName:@"Development"];
        [connProfile setUser:@"ourmac"];
        [connProfile setPassword:@"password"]; 
        **[connProfile setNetworkProtocol:@"http"];**
        **[connProfile setPortNumber:2480];**
         **[connProfile setServerName:@"sapeccxxx.xxx.com"];**

     **[connProfile setAsyncReplay:YES];**

    [flightDetailsTest_Flightdetails_v1DB registerCallbackHandler:self.callbackHandler];

    [flightDetailsTest_Flightdetails_v1DB setApplication:app];

    if([SUPApplication registrationStatus] == SUPRegistrationStatus_REGISTERED)
    {

        [app startConnection:0];
    }
    else{
        [app registerApplication:0];

    }

} 
```

有问题的方法用粗体字表示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:16:52.940

您调用的 set 方法似乎（不再存在）我已经查找了规范，并且有些显示了这些方法的使用，但是我在哪里可以找到 SUPConnectionProfile 的规范。尝试在 SAP/Sybase 的文档中查找特定于您正在使用的版本的详细信息。

# sql - 从临时表更新多行

> ID：13602533
> 
> 赞同：2
> 
> 时间：2012-11-28T10:07:28.157
> 
> 标签：sql, sql-server-2008, stored-procedures

我已经为使用临时表的客户汇总了负载平均值，并希望使用这些新值更新我们的客户表。我可以进行单次更新等，但想作为一组更新，但不断得到“子查询返回超过 1 个值”。当子查询从第二个代码块中跟随...'时，这是不允许的（#tcAvgs 中的所有值都很好。

```
create table #tcAvgs
(
    AccNo varchar(10) COLLATE SQL_Latin1_General_CP1_CI_AS,
    AvgFrame float,
    AvgValue float,
    AvgJobs float 
)
INSERT INTO #tcAvgs (AccNo, AvgFrame, AvgValue, AvgJobs)
SELECT t.accno, ROUND(t.TFrame/t.ccount ,2),ROUND(t.TValue/t.ccount , 2), ROUND( t.CCount/6 ,2)
FROM #tcTotals t

UPDATE c
SET c.AvgFrames = a.AvgFrame,
    c.AvgJobs = a.AvgJobs,
    c.AvgValue = a.AvgValue
FROM customers c join #tcAvgs a on c.AccountNo = a.AccNo 
```

我看过很多不同的方法，它们似乎都给出了相同的错误，我想知道我是否必须硬着头皮循环遍历临时表进行单独更新？我是否缺少有关 SQL 进行多次更新（尽管有很多单次更新）的能力的基本知识。

任何朝着正确方向的推动将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:55:57.860

此答案仅适用于发现触发器阻止@Andrew Bickerton 和@marc_s 提供的解决方案的人（以及我本人最初^^）

```
DECLARE @Counter INT
DECLARE @AccNo varchar(10)
DECLARE @AvgFrames float
DECLARE @AvgJobs float
DECLARE @AvgValue float

SET @Counter = 1
WHILE @Counter <= (SELECT COUNT(*) FROM #tcAvgs)
BEGIN
    --update variables
    SELECT @AccNo = t.AccNo, @AvgFrames = t.AvgFrame, @AvgJobs = t.AvgJobs, @AvgValue = t.AvgValue 
    FROM #tcAvgs t
    WHERE t.Id = @Counter

    UPDATE customers
    SET AvgFrames = @AvgFrames,
        AvgValues = @AvgValue,
        AvgJobs = @AvgJobs
    WHERE AccountNo = @AccNo

    SET @Counter = @Counter + 1
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:30:29.287

您收到的错误是 SQL Server 抱怨您的 #tcAvgs 表中有超过 1 个匹配行，因此它不知道您要将客户中的行设置为什么值。

如果你运行：

```
create table #tcAvgs
(
    AccNo varchar(10) COLLATE SQL_Latin1_General_CP1_CI_AS,
    AvgFrame float,
    AvgValue float,
    AvgJobs float 
)
INSERT INTO #tcAvgs (AccNo, AvgFrame, AvgValue, AvgJobs)
SELECT t.accno, ROUND(t.TFrame/t.ccount ,2),ROUND(t.TValue/t.ccount , 2), ROUND( t.CCount/6 ,2)
FROM #tcTotals t

SELECT c.AccountNo, COUNT(a.AccountNo) as NumRows
FROM customers c join #tcAvgs a on c.AccountNo = a.AccNo 
GROUP BY c.AccountNo
HAVING COUNT(a.AccountNo) > 1 
```

您将找到导致问题的记录。我的猜测是：

```
INSERT INTO #tcAvgs (AccNo, AvgFrame, AvgValue, AvgJobs)
SELECT t.accno, ROUND(t.TFrame/t.ccount ,2),ROUND(t.TValue/t.ccount , 2), ROUND( t.CCount/6 ,2)
FROM #tcTotals t 
```

你可能需要它是：

```
INSERT INTO #tcAvgs (AccNo, AvgFrame, AvgValue, AvgJobs)
SELECT t.accno, AVG(ROUND(t.TFrame/t.ccount ,2)),AVG(ROUND(t.TValue/t.ccount , 2)), AVG(ROUND( t.CCount/6 ,2))
FROM #tcTotals t
GROUP BY t.accno 
```

# php - Xdebug 忽略 NetBeans 中的断点

> ID：13602534
> 
> 赞同：0
> 
> 时间：2012-11-28T10:07:36.253
> 
> 标签：php, wordpress, netbeans, xdebug

我正在尝试在 Windows 7 上的 NetBeans 中调试本地 Wordpress 实例（在 xampp 上）。由于某种原因，位于网络服务器根目录中的任何文件之外的断点都会被忽略。

我已经用谷歌搜索了很多年，但无济于事。我读过[SO1](https://stackoverflow.com/questions/9984825/why-is-xdebug-ignoring-breakpoints-from-netbeans-6-8)，[SO2](https://stackoverflow.com/questions/2963027/netbeans-xdebug-php-not-working)，[SO3](https://stackoverflow.com/questions/2989748/netbeans-xdebug-nightmare)，[SO4](https://stackoverflow.com/questions/3422433/xdebug-ignores-breakpoints)，[SO5](https://stackoverflow.com/questions/2359712/remote-debugging-wont-stop-at-breakpoints)和[SO6](https://stackoverflow.com/questions/3288840/xdebug-successfully-connects-to-dbgp-clients-but-wont-stop-at-breakpoints)，也无济于事。所有这些 SO 都提到了路径映射。我已经映射了我的所有文件夹，但是由于我的项目文件夹与我的项目文件夹相同，因此这些映射完全相同。此外，xdebug 日志中的路径指向正确的文件（见下文）。

仅当在网络服务器根目录中的一个文件（在我的情况下为“wp-develop”）中调用它时调用`xdebug_break();`才有效，所以我怀疑我没有正确映射路径。

我的 php.ini 文件中与 xdebug 相关的部分如下所示：

```
[XDebug]
zend_extension = "C:\xampp\php\ext\php_xdebug.dll"
xdebug.profiler_append = 0
xdebug.profiler_enable = 1
xdebug.profiler_enable_trigger = 0
xdebug.profiler_output_dir = "C:\xampp\tmp"
xdebug.profiler_output_name = "cachegrind.out.%t-%s"
xdebug.remote_enable = On
xdebug.remote_handler = "dbgp"
xdebug.remote_host = "localhost"
xdebug.remote_port=9000
xdebug.trace_output_dir = "C:\xampp\tmp"
xdebug.var_display_max_depth = -1
xdebug.var_display_max_children = -1
xdebug.var_display_max_data = -1
xdebug.remote_log = "C:\xdebugremotelog.txt" 
```

xdebug 日志的输出如下所示：

```
<- breakpoint_set -i 122 -t line -s enabled -f file:///c:/xampp/htdocs/wp-develop/wp-content/themes/gap/gap.php -n 32
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="breakpoint_set" transaction_id="122" state="enabled" id="81240001"></response> 
```

`c:/xampp/htdocs/wp-develop/wp-content/themes/gap/gap.php`是正确的路径。

我在这里想念什么？任何帮助，将不胜感激。

事实上，我想我可能做错了路径映射。有人可以给我一个他们应该看起来如何的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-30T18:36:31.750

我在 Windows 系统上遇到过类似的问题：Eclipse 断点适用于任何 php 命令行项目，但不适用于任何 Web 应用程序。我花了两个小时来解决这个问题。

请检查您的 Web 服务器是否正在侦听 127.0.0.1 地址而不是“localhost”。为什么 ？因为从 Vista 开始，Windows 使用 ipv4 连接到 127.0.0.1，而使用 ipv6 连接到“localhost”地址。

因此，解决方案是在所有调试堆栈上使用 ipv4：

启动 php 内置网络服务器（任何或其他）以侦听 127.0.0.1

我希望这会帮助你

来自意大利的问候

# openerp - 在 OpenERP 记录上显示由用户名创建

> ID：13602535
> 
> 赞同：1
> 
> 时间：2012-11-28T10:07:38.907
> 
> 标签：openerp

在 OpenERP 中的任何记录/对象上，例如日记凭证、日记帐分录等，有没有办法显示哪个用户创建或发布了此记录？

当我们打开详细视图时，我想在记录本身上显示这一点。理想情况下，这也应该在搜索网格中可见。

审计跟踪功能可让您在单独的区域中查看它，它会捕获更多详细信息，但我想仅捕获并显示在记录上工作的用户名。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:58:20.557

您可以使用 write_uid、create_uid，为此您必须覆盖模型中的这些字段。
您甚至可以为名称创建相关字段。

```
_columns = {
    'create_uid': fields.many2one('res.users', 'Created By', readonly=True),
    'creator_name': fields.related("create_uid", "name", type="char", string="Creator Name"),
    'write_uid': fields.many2one('res.users', 'Modified By'),
    'write_name': fields.related("write_uid", "name", type="char", string="Moderator Name"),
} 
```

这里，create_uid 必须是“readonly=True”，否则保存记录时会出错。

# c - 为什么可以调用稍后在 C 中声明的函数？

> ID：13602546
> 
> 赞同：3
> 
> 时间：2012-11-28T10:08:18.713
> 
> 标签：c

我有这个小代码来演示它：

```
#include "stdio.h"

int main() {
    int a = testfunc();  // declared later
    printf("%d", a);
    return 0;
}

int testfunc() {
    return 1;
} 
```

它编译没有错误，并且`1`按预期输出。

查看实际操作：http: [//ideone.com/WRF94E](http://ideone.com/WRF94E)

为什么没有错误？它是 C 规范的一部分还是与编译器相关的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:11:38.010

函数 testfunc() 是隐式声明的。编译器无法进行任何签名检查，因此如果您未能正确调用它，您可能会收到运行时错误。

这是 C 规范的一部分。但是 C 规范中的建议是在当前文件的开头或头文件中声明您计划实现和使用的所有函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:11:29.977

因为，默认情况下，编译器将未声明的函数视为

```
int function_name (); 
```

在内部，未声明的函数被视为返回类型为 int 并接受任意数量的参数。它也与您的实际函数匹配。所以没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:13:35.890

这取决于编译器。一些编译器会发出错误，其他的 - 一个警告，而其他的 - 什么都没有。编译器的职责只是检查您使用的函数是否具有正确的参数。如果你不声明它，那么编译器就不能检查和警告你滥用函数，但它可以生成调用函数的代码。另一方面，链接器的职责是查看函数是否已实现，并将其地址放入编译器先前生成的调用中。由于您的功能已实现，因此链接器可以正常工作。

由于您的编译器不会检查您，您可以尝试使用参数调用您的函数。该调用可能有效，但也可能使您的程序崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T10:19:41.237

```
int a = testfunc();

int testfunc() {
    return 1;
} 
```

您没有收到任何错误，因为在 C 中默认函数签名是相同的。

如果你想让编译器告诉你看下面的演示：

像这样在没有前向声明的情况下调用，看看编译器会给你错误。

```
int a=testfunc(5.4);

int testfunc(float f)
{
 return 1;
} 
```

注意：C 中的最佳实践是提供`forward declaration`您将在程序中使用的函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T10:20:22.667

编译器不需要查看函数定义来调用它，它只需要一个*原型*来检查参数，如果没有，编译器将假定函数返回`int`并且你知道你在做什么。但是，在链接时，如果链接器无法解析符号，那么您将收到错误消息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T10:31:48.423

In ANSI C, you do not have to declare a function prototype; however, it is a best practice to use them. If you do not have a prototype, and you call a function, the compiler will infer a prototype from the parameters you pass to the function.The compiler assumes that it has an int return type. If you declare the function later in the same compilation unit with a different return type, you'll get a compile error.

# r - geom_boxplot 绘图错误与预先计算的值

> ID：13602547
> 
> 赞同：0
> 
> 时间：2012-11-28T10:08:21.197
> 
> 标签：r, ggplot2, boxplot

这是我从预先计算的数据生成箱线图的脚本：

```
mydata <-structure(list(v_rank=1:100,min=c(1876.12908723494,525.833257030355,
479.174444926073,413.317971868729,283.212605297879,272.271743111746,
271.218577609491,261.097920232602,249.848244413854,239.6826693619,
221.953200543177,220.672797573803,217.788754899515,209.693597246165,
207.920376492108,206.305695354979,205.224940348855,198.158941191935,
196.768964078812,192.524762910127,190.659747088907,187.313079645817,
184.003802843274,181.124789727041,172.404693867801,168.185940418452,
162.525847977172,159.766160562022,159.47498997248,158.707407613974,
156.670643391483,154.782348653747,151.120608890216,148.537185644508,
147.418985792071,144.192949577012,143.081876591813,138.306500760138,
138.071720969489,135.819373238595,131.268228360837,131.211745493362,
129.475958752641,128.994697005825,126.919520316827,125.131265913884,
123.530137623397,119.30326498362,118.928750988775,116.785274187946,
112.196408614492,109.613414596662,108.0200018691,103.845334903546,
101.304467892935,100.630402666552,99.4843966733682,98.5423453987657,
95.1549453652298,93.7292405692186,92.1425963507161,88.392923177316,
86.5435376677445,84.2370997228235,81.8582235361675,80.7147556864089,
79.9095336240098,78.099293257082,77.444818889996,77.1554419990025,
76.1887950832748,75.765742105877,74.5715550271922,74.4494960879874,
73.0841135453694,72.6275007405538,71.9226468496817,71.5061513708144,
70.8352606944726,70.3525118381674,69.7966653875959,69.7848999118085,
68.7929488062417,68.5934402557501,67.6439262767344,66.0852928683046,
65.5502632169449,65.0385479217237,62.8960922184903,62.842868824982,
61.6430225651763,60.4182651467017,58.0527914522183,54.5733785363583,
51.8253107330044,51.5017948039077,49.3949677412271,44.4040392215262,
39.0000000000002,38.0000000000002),mean=c(8935.04834297135,
3438.53136055906,1370.10037064766,696.649339732745,564.855550869384,
477.749012732246,428.230275841222,396.2810212305,365.13402841522,
348.101058211078,329.525549400666,312.655267601672,298.714290600488,
286.578596825919,274.745155007507,265.597528393185,257.285214286721,
248.522991823508,239.359718910267,231.499756562578,224.770918544173,
217.887544860738,211.93512246229,205.700872047368,200.961757233366,
195.483220118819,190.703032490177,186.38611573552,183.232451708758,
179.680100025236,175.530838577876,172.143924929885,168.603751064018,
165.531924095968,162.821230088091,159.966306235412,157.276891856026,
154.718502961082,152.373606667626,149.793054166436,147.183183846565,
144.697301211638,142.092698673904,139.325636562338,136.985294657696,
134.884798028695,132.553014911682,129.708010287681,127.335105410515,
124.666660146052,122.198967268253,119.658340298511,116.91633635842,
114.585295497153,111.794558546531,109.348226917333,107.359283476062,
105.505531018795,103.599182793896,101.330969375811,99.2715636318623,
96.8198217584668,94.4018562740329,91.6021612575079,88.8560628257584,
86.2825680244354,84.6557538283325,83.1538874988065,81.8670731558834,
80.646504385465,79.5552381339603,78.6038624869326,77.8254005050736,
77.0633271181373,76.2307825731926,75.5818495078455,74.9159235572713,
74.2970580048307,73.7608647918991,73.1324988412481,72.4781145905903,
71.8682133108331,71.2002174199292,70.513258124492,69.7865642378299,
68.9249679265053,68.0937017609885,67.2946458442807,66.2734718903334,
65.5194270252636,64.616142038666,63.3815533937079,61.6228877586886,
59.3146024340077,54.6871823375137,53.4142211437341,52.2392567481353,
48.4217638762252,42.5111837553523,40.7700954890499),med=c(9814.40198510858,
3116.03711391275,1075.34902925081,673.838430955518,545.182921010037,
469.385842176791,416.33971886279,391.928714019644,363.610825228356,
348.167435758967,333.991060074654,314.269940600539,298.076343382389,
289.621613390752,278.280673551311,265.045605562845,257.531074315465,
250.654024557183,238.475372323999,231.249049068254,225.369614181594,
217.30045454174,210.62004470785,205.125786317327,200.071352506748,
193.766926196028,189.43090014115,186.005954812098,183.144335619686,
179.336627990153,175.459033786895,172.101776417078,168.082171205195,
164.87350114018,163.0866752049,159.079687930539,156.794367244073,
155.025803017927,152.225447389848,149.738781054841,146.655021999848,
143.568556751724,141.49663985492,138.771902285413,136.625694031028,
134.478260782788,132.466577693098,129.500757141275,126.915278355084,
124.877995672493,121.658540202601,119.197416394838,116.795154251343,
114.781249998192,111.860236693927,109.202517049202,106.926158862568,
105.409934963418,103.651881321872,101.259922781486,99.5075568481973,
96.8708296894636,94.2131873866587,91.6713809113473,88.8877315210602,
86.5959609936891,84.6564926236535,83.0706199616536,81.8338750812769,
80.4904194574623,79.501385404566,78.5601829584153,77.964098030266,
76.9330786117685,76.1180566937014,75.4631032445209,74.867552690578,
74.1822043037015,73.8209530924406,73.1141361264409,72.4759524530703,
71.7175520392203,71.037938525555,70.4543040600221,69.7018063042958,
68.9299758261986,68.0825783837955,67.2852741246417,66.3571510484087,
65.5355188281136,64.8188102941395,63.4951682075293,61.8032737668676,
59.2751489826056,54.6139464513163,53.3158469970988,52.2498721906628,
48.1225168815051,42.4170341449923,40.8497627061483),max=c(10147.8592830916,
8633.90688162628,4886.70192987259,1240.91225422784,1089.08051129437,
742.719356156879,683.171612433623,578.593555269702,497.93606268059,
476.736825787664,409.969180375468,389.676300445944,381.794925302163,
357.435324255315,355.440016611572,351.494592111432,348.922507989906,
342.6697349814,325.836862890568,272.490173315169,259.108318277361,
246.67353086611,241.084957301967,231.595391911806,228.493098288313,
224.413217462653,219.814039785869,206.939679326569,206.832822873075,
204.588105225262,191.159016060565,189.247627946495,185.888373894867,
179.896261122406,178.4706325079,174.739278352249,173.273333806994,
170.82302532665,168.998600410821,167.186223006948,162.188512084591,
158.981616143302,157.948216962222,153.895398821425,152.404490394739,
152.29624128978,151.757695059315,151.681549938741,148.639740700113,
136.958110443491,134.270180841863,133.893910030369,126.646788409391,
125.055039316004,121.287517319267,117.015374509952,116.36527440479,
113.699942971893,111.979991137726,108.240534045998,105.985702213076,
104.322725137889,100.974271559617,99.5096167709053,95.2936620796326,
92.062366512545,90.0342406215312,89.6481410473251,87.1324204227002,
86.8589880937485,83.8473315574837,83.4339147193383,82.0475214795012,
81.0745398315444,79.3887304257836,78.8784148261601,77.4614289529577,
77.0771790476472,76.0668242500696,75.5540036829177,75.4621857290579,
75.1311008651877,74.2673199628139,74.2641997252619,73.5571399399056,
72.894975554323,71.5629969887197,71.4068442120744,69.2509007389552,
68.5602150275453,67.5652881735352,66.5751462232598,65.5641149484878,
65.2163952942519,58.8526259048984,55.9301169855317,54.7251125558506,
53.3473055854337,46.7221311218048,43.7096043155307),sd=c(1920.61995076318,
2071.90462753791,846.925532656194,166.304459052339,122.67856721787,
81.8151099480816,73.2074776878918,61.8626056929879,45.6856024744788,
43.9017650562536,36.9989421854618,33.3517567028942,32.1410405122589,
28.4758117549672,27.2385799664792,26.2706694900935,24.8927806414279,
22.8309322770636,19.8543548064944,17.0858748338659,14.8944478364513,
13.9737233320454,13.6956203984614,12.5761524668905,11.7549301732758,
11.0988662535768,10.6547736595848,9.76351153623029,9.67890144083554,
8.92810457440155,8.25769486510607,7.54133350871369,6.94842881555269,
6.93147596748886,7.07317885442362,7.07778605646362,6.55489414156632,
6.75841318729736,6.46389598231023,6.15064520603789,6.00065720940157,
6.03502938812419,5.8465959548099,5.53045143365509,5.6569022817063,
5.56619691573112,5.30620580297752,5.4766542946062,4.75121437486975,
4.13369122071181,4.41131211773525,4.10508635820112,3.82638153445188,
3.68736674916447,3.52897983983376,3.41037506985167,3.22536343697251,
3.10065674420964,3.03330450751443,2.9904932686081,2.93861988370156,
3.16712174539256,3.07383178775358,3.13846734678265,2.90733636918161,
2.57176797270246,2.23187444725688,2.29607813738596,2.08303964064532,
1.80338138606924,1.62612534909916,1.54707708046367,1.49240001940341,
1.40939977389337,1.27823705485513,1.21922358651095,1.12806129340388,
1.13010155946996,1.11928430703033,1.04558731836885,1.14995957788824,
1.12521793647851,1.07795527050143,1.01369234716728,1.05350541107726,
1.0912874094653,1.05339501229828,1.11468264457309,1.09260544728007,
1.14912216836883,1.22303957638847,1.25937354563769,1.52953327119146,
1.85172364578356,1.26978526426211,0.861852422307316,1.04440221036651,
1.76492071874432,1.46775534258985,1.3260977569218),ymin=c(7014.42839220817,
1366.62673302115,523.174837991462,530.344880680406,442.176983651514,
395.933902784165,355.02279815333,334.418415537512,319.448425940741,
304.199293154824,292.526607215204,279.303510898778,266.573250088229,
258.102785070952,247.506575041027,239.326858903091,232.392433645293,
225.692059546444,219.505364103772,214.413881728712,209.876470707722,
203.913821528692,198.239502063828,193.124719580478,189.20682706009,
184.384353865242,180.048258830592,176.62260419929,173.553550267923,
170.751995450834,167.27314371277,164.602591421172,161.655322248466,
158.600448128479,155.748051233667,152.888520178949,150.72199771446,
147.960089773785,145.909710685316,143.642408960398,141.182526637163,
138.662271823514,136.246102719094,133.795185128683,131.32839237599,
129.318601112963,127.246809108704,124.231355993075,122.583891035645,
120.532968925341,117.787655150518,115.55325394031,113.089954823969,
110.897928747988,108.265578706697,105.937851847482,104.133920039089,
102.404874274585,100.565878286382,98.3404761072033,96.3329437481607,
93.6527000130742,91.3280244862793,88.4636939107252,85.9487264565768,
83.7108000517329,82.4238793810756,80.8578093614205,79.7840335152381,
78.8431229993958,77.9291127848611,77.0567854064689,76.3330004856702,
75.653927344244,74.9525455183375,74.3626259213346,73.7878622638674,
73.1669564453608,72.6415804848688,72.0869115228792,71.328155012702,
70.7429953743546,70.1222621494278,69.4995657773247,68.7330588267527,
67.83368051704,67.0403067486902,66.1799631997076,65.1808664430534,
64.3703048568947,63.3931024622775,62.1221798480702,60.0933544874972,
57.4628787882242,53.4173970732516,52.5523687214268,51.1948545377688,
46.6568431574809,41.0434284127625,39.4439977321281),ymax=c(10855.6682937345,
5510.43598809697,2217.02590330385,862.953798785084,687.534118087253,
559.564122680328,501.437753529113,458.143626923488,410.819630889699,
392.002823267331,366.524491586128,346.007024304567,330.855331112747,
315.054408580886,301.983734973986,291.868197883278,282.177994928149,
271.353924100571,259.214073716761,248.585631396444,239.665366380624,
231.861268192783,225.630742860751,218.277024514259,212.716687406642,
206.582086372396,201.357806149762,196.14962727175,192.911353149594,
188.608204599638,183.788533442982,179.685258438599,175.552179879571,
172.463400063457,169.894408942514,167.044092291876,163.831785997593,
161.47691614838,158.837502649936,155.943699372474,153.183841055966,
150.732330599762,147.939294628713,144.856087995993,142.642196939403,
140.450994944426,137.859220714659,135.184664582288,132.086319785385,
128.800351366764,126.610279385988,123.763426656712,120.742717892872,
118.272662246317,115.323538386364,112.758601987185,110.584646913034,
108.606187763004,106.63248730141,104.32146264442,102.210183515564,
99.9869435038593,97.4756880617865,94.7406286042905,91.76339919494,
88.8543359971379,86.8876282755894,85.4499656361925,83.9501127965287,
82.4498857715343,81.1813634830595,80.1509395673963,79.3178005244771,
78.4727268920307,77.5090196280478,76.8010730943565,76.0439848506752,
75.4271595643007,74.8801490989295,74.1780861596169,73.6280741684785,
72.9934312473116,72.2781726904307,71.5269504716593,70.8400696489072,
70.0162553359706,69.1470967732868,68.4093284888538,67.3660773376135,
66.6685491936324,65.8391816150544,64.6409269393456,63.1524210298801,
61.1663260797913,55.9569676017759,54.2760735660415,53.2836589585018,
50.1866845949695,43.9789390979422,42.0961932459717)),.Names=c("v_rank",
"min","mean","med","max","sd","ymin","ymax"),row.names=c(NA,
-100L),class="data.frame") 
```

和代码：

```
library("ggplot2")

rk<- ggplot(mydata, aes(x = v_rank, lower = mean - sd, upper = mean + sd, 
                        middle = mean, ymin = min, ymax = max ))

rk <- rk + geom_boxplot(stat="identity")

rk<- rk + coord_trans(x = "log10", y = "log10")

rk 
```

由ggplot2（0.9.2.1版）和R（2.15.2 64bit）生成的绘图完全坏了，我不明白为什么：

![破损的箱线图](../Images/b3ccabca89c6ac3c7842be7544fb03b8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:19:15.790

因为您自己提供汇总数据，所以需要提供分组变量：

```
ggplot(mydata, aes(x = v_rank, lower = mean - sd, upper = mean + sd, 
                        middle = mean, ymin = min, ymax = max, group=v_rank)) +
  geom_boxplot(stat="identity") +
  coord_trans(x = "log10", y = "log10") 
```

![在此处输入图像描述](../Images/f22494c8b26027dc7c17c61f8522a541.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:34:29.637

您的直接问题是 x 变量 in`mydata`不是一个因素。而且我认为您不想对 x 轴进行 log10 变换？

这有效：

```
library("ggplot2")

rk<- ggplot(mydata, aes(x = as.factor(v_rank), lower = mean - sd, upper = mean + sd, 
                        middle = mean, ymin = min, ymax = max ))

rk <- rk + geom_boxplot(stat="identity")

rk<- rk + coord_trans(y = "log10")+ theme_bw()
rk 
```

![盒子](../Images/431e8883d9bd19eeb7291469b274ce10.png)

虽然看起来不太好...

# python - 如何在芹菜链中设置任务状态

> ID：13602551
> 
> 赞同：1
> 
> 时间：2012-11-28T10:08:41.277
> 
> 标签：python, django, asynchronous, task, celery

我需要运行三个需要连续运行的任务。因此，当我请求时，我需要按此顺序运行三个任务。每个任务都从前一个任务中获取输入。

```
Request--->
    [First Task] -> [Second Task] -> [Third Task]

Parent of third = second
Parent of second = first 
```

我需要设置每个子任务的链接请求的状态（使用 ajax 检索状态）。链的 id 等于 [Third Task] 的 id，因此在第三个任务中我可以设置链状态，但如何设置其他两个任务的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:38:34.493

你可以做

```
current_app.AsyncResult({task-id}).[status|results] 
```

其中任务 id 是第一个、第二个、第三个任务。您还可以使用 celery.inspect 查看当前正在计划或执行的任务。

# java - java获取月份和年份的日期问题

> ID：13602552
> 
> 赞同：2
> 
> 时间：2012-11-28T10:08:47.883
> 
> 标签：java

我从数据对象中提取月份和年份时遇到问题。

```
String strdate = "2012-11-07T13:28:23";
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
// Date date = dateFormat.parse(strdate);
Date date = new Date();
System.out.println(date.getDate());
System.out.println(date.getYear());
System.out.println(date.getMonth());
System.out.println(date); 
```

我的输出就像

```
28
112
10
Wed Nov 28 15:37:30 IST 2012 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:11:25.817

> 这里有什么问题？

您的编译器应该通过警告告诉您出了什么问题：您在`Date`, 上使用了不推荐使用的方法。*不要*忽视这些警告。

您应该使用`Calendar`来获取日/月/年等值，因为 a`Calendar`具有关联的日历系统和时区，这两者都是获取合理值所必需的。

接下来的问题是您只是获取*当前*日期和时间而不是使用`strdate`and `dateFormat`：

```
// Date date = dateFormat.parse(strdate);
Date date = new Date(); 
```

`new Date()`始终返回系统报告的当前日期/时间。

但是，如果您对 112 和 10 感到困惑，您应该阅读您正在调用的方法的文档，其中解释了[`getYear()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getYear%28%29)返回基于 1900 的年份（因此返回值 112 表示年份是 2012），并[`getMonth()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getMonth%28%29)返回一个从 0 开始的月份（所以 January=0）。*始终*阅读您正在调用的方法的文档，*尤其是*当您认为它们给您带来奇怪的结果时。

但是，理想情况下，您应该改用[Joda Time](http://joda-time.sf.net) - 它是一种*比*内置 API 更明智的日期/时间 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:11:28.853

`Year`是基于，`1900`所以你得到`1900 + 112`或 2012 我们称之为。

是从`Month`0 开始的（一月是 0 月），所以需要加 1。

无论如何，最好使用`GregorianCalendar`基于该日期的构建来检索该信息（以及更多信息），因为这些`Date`方法已被弃用。

```
myGregorianCalendar.get(GregorianCalendar.MONTH); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:10:17.407

没有错误。date.getMonth() 从零开始（一月 = 0）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T10:11:38.000

当您说`new Date()`时，它将创建一个`Date`保存当前日期和时间的新对象。`date`您正在对刚刚实例化的值调用方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T10:11:41.317

改用日历对象

```
Calendar cal = Calendar.getInstance();
cal.setTime(date);
int month = cal.get(Calendar.MONTH);
int year=cal.get(Calendar.YEAR); 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T11:42:21.677

遵循此代码，您将获得准确的月份、年份和日期：

```
 String strdate = "2012-11-07T13:28:23";
  SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
  Date date = dateFormat.parse(strdate.toString());

  Calendar cal = Calendar.getInstance();
  cal.setTime(date);
  System.out.println("month = " + (cal.get(Calendar.MONTH) + 1 ));// add 1 because Month starts from 0 in java
  System.out.println("year = " + cal.get(Calendar.YEAR)) ;
  System.out.println("date = " + cal.get(Calendar.DATE));
  System.out.println(date); 
```

我的输出就像

```
month = 11
year = 2012
date = 7
Wed Nov 07 13:28:23 PKT 2012 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-01T17:42:05.667

# tl;博士

```
YearMonth ym = 
    YearMonth.from(
        LocalDateTime.parse( "2012-11-07T13:28:23" )
    )

int month = ym.getMonthValue();
int year = ym.getYear(); 
```

# 细节

其他答案是正确的，尤其是[Jon Skeet 的答案](https://stackoverflow.com/a/13602605/642706)。

让我补充一点，您正在使用麻烦的旧旧日期时间类。避开他们。

# java.time

java.time框架内置于 Java 8 及更高版本中[。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)这些类取代了旧的麻烦的日期时间类，例如`java.util.Date`, `.Calendar`, & `java.text.SimpleDateFormat`。

[现在处于维护模式](https://en.wikipedia.org/wiki/Maintenance_mode)的[Joda-Time](http://www.joda.org/joda-time/)项目建议迁移到 java.time。

要了解更多信息，请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。并在 Stack Overflow 上搜索许多示例和解释。

许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)中[进一步](http://www.threeten.org/threetenbp/)适应[Android](https://en.wikipedia.org/wiki/Android_(operating_system))。

ThreeTen [-Extra](http://www.threeten.org/threeten-extra/)项目通过附加类扩展了 java.time。该项目是未来可能添加到 java.time 的试验场。

# 解析字符串

[您的输入字符串缺少有关从 UTC 偏移](https://en.m.wikipedia.org/wiki/UTC_offset)或时区的任何信息。因此，我们将其解析为[`LocalDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html)“本地”表示*任何*位置，而不是特定位置。因此，它代表了关于可能时刻的粗略想法，但不是时间线上的实际点。

## ISO 8601

字符串的格式符合[ISO 8601](https://en.m.wikipedia.org/wiki/ISO_8601)标准。java.time 类在解析和生成 String 对象时默认使用这些标准格式。所以不需要定义解析模式。

```
String input = "2012-11-07T13:28:23";
LocalDateTime ldt = LocalDateTime.parse( input ); 
```

# 获取年月

生成的对象对您想要的部分有更好的方法以及更多。

与旧班级遇到的麻烦不同，获得年份会呈现实际的年份。对于 2016 年，您将获得`2016`.

```
int year = ldt.getYear();  // 2016 
```

对于一个月，getter 会从方便的[`Month`](http://docs.oracle.com/javase/8/docs/api/java/time/Month.html)枚举中为您提供一个对象。在您的代码库中使用此类对象而不是单纯的整数，以受益于类型安全、有保证的有效值和更多的自记录代码。

```
Month month = ldt.getMonth(); 
```

但如果你必须，你可以要求一个数字，1-12（不是你在旧班级看到的疯狂的 0-11）。

```
int monthNumber = month.getValue(); 
```

# `YearMonth`

有一个类用于表示没有日期的年份和月份，[`YearMonth`](https://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html). 我建议传递此类的对象，而不仅仅是整数。这样做会带来类型安全、有效值和自记录代码。

```
YearMonth ym = YearMonth.from( ldt ); 
```

# android - 如何使用 Sony SmartwatchMN2 在屏幕关闭的情况下保持加速度计保持清醒

> ID：13602556
> 
> 赞同：3
> 
> 时间：2012-11-28T10:08:58.410
> 
> 标签：android, sony, sony-smartwatch

我想知道在屏幕关闭的情况下保持加速度计保持清醒的方法。
在开发人员文档中（智能扩展 SDK 中的 SmartWatch_WP_1.pdf），我读到了

*   控制暂停时传感器停止
*   使用 ControlExtention#setScreenState(Control.Intents.SCREEN_STATE_OFF) 不会暂停控件。
*   控件因用户操作或时间流逝而暂停。

所以我尝试使用 ControlExtention#setScreenState(Control.Intents.SCREEN_STATE_OFF)。
一分钟后，控制暂停，加速度计停止。
但连接电源线时并没有暂停。
当然，我想在未连接电源线时保持加速度计处于唤醒状态。

我也尝试了wakelock(PowerManager.FULL_WAKE_LOCK) 和Service#startForeground，但我没有好起来。

有没有办法解决这个问题？

我的配置是

*   设备
    *   索尼智能手表 MN2
*   智能手表版
    *   0.1.A.3.7
*   主机应用程序版本
    *   1.2.37

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:16:51.630

我们正在研究这个——如果我知道更多，我会回到这个线程。

**更新**

SmartWatch 应用程序的更新于 2013 年 3 月 14 日在 Google Play 上发布。此更新包括对上述传感器问题的修复。

# php - Excel 中的用户导出在 Moodle 中损坏

> ID：13602558
> 
> 赞同：2
> 
> 时间：2012-11-28T10:09:14.790
> 
> 标签：php, excel, moodle

我的 Moodle 用户报告（由批量用户操作生成）已损坏。当我下载用户列表的 Excel 文件时，我得到的文件充满了错误编码的数据。

例如：

![工作表的屏幕截图](../Images/bf4b29bb97b2debcb20b8baa6759223c.png)

在文件中稍远一点，它确实显示了一些数据，如您所见，但这绝对不容易阅读，也不能提供给我的客户。

我已经检查了此报告发送的标题，这些都是正常的（application/vnd.ms-excel）。这是 Moodle 的 2.0.3 版。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-28T08:29:21.763

在未配置语言代码（编码集）或将其保留为默认值之前，我已经看到过这种情况。

要解决此问题，请进入您的`config.php`文件并插入您的语言代码，如下所示：

```
$CFG->lang="language code here"; 
```

如果您这样做但仍然无法正常工作，您可以通过以下步骤检查是否存在导致此问题的 PHP 错误：

1.  开启调试模式
2.  下载（任何）excel导出（但不要在Excel中打开它）
3.  右键单击并使用记事本（或任何文本编辑器）打开并查看第一行 - 是否打印了 PHP 错误？如果是这样，这个错误会告诉你问题出在哪里。

希望有帮助。

# java - 使用java生成范围内的随机数的问题

> ID：13602560
> 
> 赞同：0
> 
> 时间：2012-11-28T10:09:19.793
> 
> 标签：java, random, numbers

我尝试了许多不同的方法来生成随机数，但我似乎无法制作一个简单的 nextInt(int min, int max) 方法来处理负数和正数范围。

10 到 20 -10 到 10 -10 到 -20

如果我让它在一个范围内工作，另一个则不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:11:16.520

你试过什么？

```
rnd.nextInt(max+1-min)+min; 
```

只要`min < max`. 如果您想要最大排他性，请删除`+1`.

# c# - C# 中如何处理属性赋值表达式？

> ID：13602562
> 
> 赞同：-2
> 
> 时间：2012-11-28T10:09:21.490
> 
> 标签：c#, syntax, properties, c++-cli

> **可能重复：**
> [为什么赋值语句返回一个值？](https://stackoverflow.com/questions/3807192/why-do-assignment-statements-return-a-value)

在 C# 中，您可以将**属性**同时用作**左**值和**右值**，如下所示：

```
int n = N = 1; 
```

这是一个完整的 C# 示例：

```
class Test
{
    static int n;

    static int N
    {
        get { System.Console.WriteLine("get"); return n; }
        set { System.Console.WriteLine("set"); n = value; }
    }

    static void Main()
    {
        int n = N = 1;

        System.Console.WriteLine("{0}/{1}", n, N);
    }
} 
```

你不能在**C++/CLI**中这样做，因为赋值表达式 "N = 1" 的结果类型是**void**。

EDIT1：这是一个 C++/CLI 示例，它显示了这一点：

```
ref class A
{
    public: static property int N;
};

int main()
{
    int n = A::N = 1;

    System::Console::WriteLine("{0}/{1}", n, A::N);
} 
```

EDIT2：此外，这确实令人困惑：我所期望的是会调用getter来分配给n，而事实并非如此；n 直接接收表达式的最右边的值，即 1，如生成的 CIL 所示：

```
IL_0001:  ldc.i4.1
IL_0002:  dup
IL_0003:  call       void Test::set_N(int32)
IL_0008:  nop
IL_0009:  stloc.0 
```

那么，允许将**void-expression**用作 rvalue 的 C# 语法背后的魔力是什么？

这种特殊处理是否仅适用于属性，还是您知道其他类似的 C# 技巧？

编辑：正如指出的 C# 赋值规则所说，右值应该始终用作赋值的返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:14:12.583

什么神奇，试着把它看成两个表情。

```
N = 1;//sets N to 1
n = N;//sets n to the value of N, which is 1 
```

有什么不明白的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:30:36.633

[你在这里](https://stackoverflow.com/a/3807583/838405)和[这里](http://msdn.microsoft.com/en-us/library/aa691315.aspx)都有答案

基本上：

> 首先，赋值语句不返回值。赋值表达式返回一个值。赋值表达式是合法的声明；在 C# 中只有少数表达式是合法的语句：实例构造、递增、递减、调用和赋值表达式可以在需要语句的地方使用。

和

> 简单赋值表达式的结果是赋值给左操作数的值。结果与左操作数具有相同的类型，并且始终归类为值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:35:24.353

在 C# 中，赋值是赋值本身的结果。

例如：

```
string a = null;

if((a = "hello world").Contains("world"))
{
      Console.WriteLine("It has 'world' word!");
} 
```

如您所见，这与属性无关，而是与分配有关。

像这样的声明：

```
int n = N = 1; 
```

...相当于：

int n = (N = 1);

关键是`(N = 1)`它本身有一个返回值：一个整数值`1`。

# ms-word - 限制表中的行数（Ms-word）

> ID：13602566
> 
> 赞同：0
> 
> 时间：2012-11-28T10:09:32.573
> 
> 标签：ms-word

我在 Ms-word 中创建了一个有 2 列和 5 行的表。如果我在最后一列的最后一行（4,1）按 Tab 按钮，该行将扩展（即添加新行）。我想修复 no .of 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:49:53.030

在保护模式下设置word文件，那么任何人都不能编辑表格。

1.  在 MS 字中插入表格
2.  单击顶部导航中的评论。
3.  点击限制编辑
4.  在限制格式和编辑窗口中选择只允许这种类型的编辑复选框

![检查图像](../Images/d3c6ae22460c2e6e2481713d03469c80.png)

# json - 如何将json数据从单独的js文件获取到主js文件

> ID：13602570
> 
> 赞同：4
> 
> 时间：2012-11-28T10:09:39.720
> 
> 标签：json, requirejs

在我的项目中，我想将数据与模板和 main.js 文件分开。例如，

在我的 data.js 中：

```
define({
    heading: "Some Heading",
    subHeading : "Subheading is cool"
}); 
```

在我的 main.js 中，

```
require(['jquery', 'data'], function($, data){
       console.log("data object is :" + data);
); 
```

这有效，我在控制台上得到了预期的结果。同样，我想进行 api 调用并获取 json 数据，所以我更新了我的 data.js，如下所示，

```
define(function(){
    require(["http://some api url.com?apikey=apikey&callback=define"],
        function (someData) {
           return someData;     
        }
     );
}); 
```

但是，我没有从 API 调用中获取 main.js 上的 json 数据，我得到“**数据对象是：未定义**”。

我不确定如何在 main.js 文件中获取“someData”。

非常感谢任何指向可能修复的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:48:41.143

您不能通过 requireJS 进行服务器调用和加载文件。您应该使用 ajax 调用来执行此操作。您可以使用jQuery 的[getJSON](http://api.jquery.com/jQuery.getJSON/)方法。例如

```
$.getJSON("http://some api url.com?apikey=apikey",function (someData) {
       //perform the calculations needed with someData here
       console.log(someData);     
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:09:12.343

感谢大家对我的问题提出质疑！我已经能够使用插件“异步”来完成这项工作。基本上，我也在 Google Group 上发布了我的问题并收到了回复，这里是更多信息的 url， [https://groups.google.com/forum/?fromgroups=#!topic/requirejs/39rieY2ZovE](https://groups.google.com/forum/?fromgroups=#!topic/requirejs/39rieY2ZovE)

希望这对所有人都有帮助。

谢谢。容光焕发

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T13:58:08.720

查看[RequireJS 插件](https://github.com/millermedeiros/requirejs-plugins)。

对于 JSON 数据，您将要求更改为

```
require([`json!http://some api url.com?apikey=apikey&callback=define`], 
        function(someData){
          // do something
        }); 
```

# c# - 如何从部分类访问不同文件中的静态类

> ID：13602571
> 
> 赞同：0
> 
> 时间：2012-11-28T10:09:39.833
> 
> 标签：c#, .net, class, static

我在 Form1.cs 中有部分类 Form1 。我在 Sample.cs 文件中有 ManagedIpHelper 静态类。

我想从 Form1 类中的方法访问该静态类中的方法。但是当我使用它时，它显示在当前上下文中不存在。在这两个文件名命名空间是相同的。我`TcpRow`在 Sample.cs 文件中命名了另一个类。这是正常的`public class`，并且可以从 Form1 的方法中正确访问。

对此有什么建议的解决方案？

**编辑**

对不起。

`TcpRow a; foreach (TcpRow tcpRow in ManagedIpHelper.GetExtendedTcpTable(true))`

对于此代码，第一行有错误`TcpRow could not be found(are you missing a using directive...` ，第二行只有错误：`ManagedIpHelper`在当前上下文中不存在。

**编辑 2**

示例.cs

![示例.cs](../Images/001d90f20632c842dafa5be455c5da61.png)

Form1.cs

![form1.cs](../Images/e045069552135f7737742b593983a2ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:11:50.083

是静态类中的方法`private`还是`protected`？这将导致该方法不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:12:30.460

静态类的命名空间可能与 Form1.Cs 的命名空间不同，如果它们不同，则应确保在 Form1.cs 类的顶部添加 using 语句。

```
 using NetProject; 
```

另外，要调用静态方法，你应该这样调用它。

```
 ManagedHelper.MethodName(....) 
```

您的 sample.cs 文件应如下所示。此代码将编译，但建议您将类分成不同的文件。

**Form1.cs**

```
namespace NetProject
{
    using System;
    using System.Collections.Generic;

    public partial class Form1
    {
        public void SomeMethod()
        {
            TcpRow row;

            foreach (TcpRow tcpRow in ManagedIpHelper.GetExtendedTcpTable(true))
            {

            }
        }
    }
} 
```

**示例.cs**

```
namespace NetProject
{
    using System;
    using System.Collections.Generic;

    public class TcpTable : IEnumerable<TcpRow>
    {
        public IEnumerator<TcpRow> GetEnumerator()
        {
            throw new NotImplementedException();
        }

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            // You should implement this method
            throw new NotImplementedException();
        }
    }

    public class TcpRow
    {

    }

    public static class ManagedIpHelper
    {
        public static TcpTable GetExtendedTcpTable(bool value)
        {
            // You should implement this method
            return new TcpTable();
        }
    }
} 
```

查看[MSDN](http://msdn.microsoft.com/en-us/library/z2kcy19k%28v=vs.80%29.aspx)上有关命名空间的文档。

# ruby-on-rails - 如何通过api发送图像并将其存储在rails的模型中？

> ID：13602573
> 
> 赞同：0
> 
> 时间：2012-11-28T10:09:45.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, api, paperclip

我使用回形针将图像存储在 s3 中，现在我需要通过 api 获取图像并将其存储在模型中，就像我处理表单一样。数据库包含

*   pic_file_name
*   pic_content_type
*   pic_file_size
*   pic_updated_at

这些是存在的字段，但如何将图像作为 json 发送并填充该字段的值。请帮我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:10:08.253

我会给你我任务中的例子

**控制器**

定义创建

```
@locationid = InformationSchema.count_by_sql("SELECT AUTO_INCREMENT FROM `information_schema`.`tables`
                                            WHERE (table_name = 'Location') LIMIT 1") 
  @location = Location.new
  @location.longitude = params[:longitude]
  @location.latitude = params[:latitude]
  @location.placemark = params[:address]
  @location.location_description = params[:locationDescription]
  @location.date = params[:dateTime]
  if params[:file]
    @location.file = params[:file]
    @location.photo_path = "/system/images/original/" +@locationid.to_s+".jpg?t=#{Time.now.to_i}"
  end
  @location.save

render json: {:result => @location} 
```

结尾

**模型**

首先，你必须创建一个名为 information_schema.rb 的新模型并输入这个

**class InformationSchema < ActiveRecord::Base**
self.table_name = 'information_schema.tables'
**end**

而在我的 location.rb 模型中

类位置 < ActiveRecord::Base

attr_accessible :date, :id, :latitude, :location_description, :longtitude, :photo_path, :placemark , :file
attr_accessor :file_file_name, :file_content_type
has_attached_file :file, :styles =>{:medium => "300x300", :small = > "100x100"}, :path => ":rails_root/public/system/images/:style/:id.jpg", :default_url => "/system/images/:style/:id.jpg" 结束

# python - 'and' N 'or' 在python中到底是什么意思？

> ID：13602577
> 
> 赞同：1
> 
> 时间：2012-11-28T10:09:57.050
> 
> 标签：python

我现在真的很困惑，在我的程序思维模型中，如果你遇到这样的表达

expr = expr1 和 expr2

这意味着 expr 的类型必须是布尔型，与“或”操作相同

请参阅下面的代码，假设三行将打印布尔值

```
print(1==1 and 3)
print(1==2 and 3)
print(1==2 and 3 or 4) 
```

但结果是

```
3
False
4 
```

我必须重新研究基本编程：

and and or 'e1 and e2' 的意思是如果结果为 False 则计算 e1 返回 False 否则返回 e2 'e1 or e2' 表示如果结果为 True 则计算 e1 返回 True 否则返回 e2

我做对了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:13:28.137

这种行为实际上与布尔逻辑本身无关。相反，它是 Python 特有的。而不是总是返回`True`/ `False`，`and`而是返回`or`两个操作数之一的值。

以下是一个很好的解释：[和](http://www.diveintopython.net/power_of_introspection/and_or.html)[的特殊性质`and``or`](http://www.diveintopython.net/power_of_introspection/and_or.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:12:53.740

这就是 Python 的工作方式，显然是为了增加操作数类型的灵活性。

来自 Python 文档[5\. 表达式](http://docs.python.org/2/reference/expressions.html#and)：

> 表达式 x 和 y 首先计算 x；如果 x 为假，则返回其值；否则，评估 y 并返回结果值。
> 
> 表达式 x 或 y 首先计算 x；如果 x 为真，则返回其值；否则，评估 y 并返回结果值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T10:13:57.913

您不必学习“基础编程”；您必须学习 Python 中定义的`and`and运算符。`or`

您对布尔逻辑真值表的想法是正确的，但在 Python 中，这些运算符不需要布尔参数，它们也不返回布尔值。

请参阅[这些真值表](http://docs.python.org/2/library/stdtypes.html#boolean-operations-and-or-not)，但请记住，它`x`可以`y`有任何类型。[查看有关考虑哪些值的描述`false`](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)也有帮助。

# apache-flex - Flex 4 DataGridColumn：函数绑定到 headerText 不起作用

> ID：13602579
> 
> 赞同：2
> 
> 时间：2012-11-28T10:10:03.150
> 
> 标签：apache-flex, datagridcolumn, headertext

我有一个大问题来绑定这个方法：

```
[Bindable(event=LOCALE_CHANGED_EVENT_TYPE)]
public static function localeString(pathInLocale:String):String
{
    var value:String=LocaleUtil.getValueFromLocaleFromStringPath(pathInLocale);
    if (value == null || value.length == 0)
    {
        value=pathInLocale;
    }
    trace(value);
    return value;
} 
```

像这样：

```
<mx:DataGridColumn headerText="{PDMPlusPlusModelLocator.localeString('employeeView.employeeFilter.noDottedManager')}" /> 
```

装订接缝根本没有被执行。（认为​​，因为 trace() 没有被调用，我已经调试过了）

但同样的作品在这里完美：

```
<mx:Label text="{PDMPlusPlusModelLocator.localeString('employeeView.employeeFilter.noDottedManager')}"/> 
```

有人知道问题是什么吗？

注意：我读[了这篇文章](https://stackoverflow.com/questions/516843/flex-3-datagridcolumn-headertext-localization)，我认为这是同样的问题，但由于任何原因它对我不起作用：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:03:15.947

问题出在这里：[Bindable(event=LOCALE_CHANGED_EVENT_TYPE)]

这是一个预处理器规则，尚未对其引用进行解析。实际上 [Bindable] 所做的是为您编写一个事件侦听器（通过其他地方的 ChangeWatcher），并且由于它们基于“魔术字符串”，因此您的语句需要看起来类似于：

```
public static const LOCALE_CHANGED_EVENT:String = "localeChangedEvent";

[Bindable(event="localeChangedEvent")]
function foo(param:int):void
{
  var oldValue:int = _fooFighters;
  _fooFighters = param;
  if (oldValue != param) dispatch(new Event(LOCALE_CHANGED_EVENT));
} 
```

现在这被过度简化了，但你希望能明白这一点。至于为什么它在与 DataGrid 相同的 mxml 中工作，我只能推测您调度的事件不是定义的事件类，而是上面类似的东西 - 只是一个定义的字符串？很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:27:50.663

最后我发现发生了什么（并理解迈克的意思）

问题首先是：

这个不能用：

```
[Bindable(event=LOCALE_CHANGED_EVENT_TYPE)] 
```

它应该是：

```
[Bindable(event="foo.bar.LocaleChanged")] 
```

第二次失败：

该方法不应该**是静态**的，因为如果它是静态的，它只会在启动时工作一次。

谢谢你的回答:)

# jquery - 更改 Jquery TAB 控件索引？

> ID：13602580
> 
> 赞同：0
> 
> 时间：2012-11-28T10:10:04.413
> 
> 标签：jquery

我们可以在运行时更改 JQUERY 选项卡索引吗？我正在使用 Jquery TAB 控件将数据插入一个选项卡并在另一个选项卡中显示数据。一旦我在第二个选项卡中编辑数据，它将转到第一个选项卡。这就是为什么我要问是否有一个选项可以在运行时更改 JQuery 选项卡索引......

# arrays - Visual Basic 6 运行时错误 381“无效的属性数组索引”

> ID：13602584
> 
> 赞同：4
> 
> 时间：2012-11-28T10:10:17.417
> 
> 标签：arrays, vb6

我是编程的菜鸟，尤其是在 Visual Basic 中。我只使用 VB6，因为我必须在大学使用它，而且我完全被卡住了。

我有一个列表框，我想在其中显示一个收音机的名称，然后当我单击名称时，我希望它把数据放入一些文本框中，这很简单我知道但我什至不完全了解 VB6 语法所以我我完全被困住了，我问过我的老师，但他并没有真正的帮助。

这是我单击调试时突出显示的行：

```
x = radCatList.ItemData(radCatList.ListIndex) 
```

这是整个表单的代码，同样非常简单，我几乎不知道我在做什么这个项目的大部分是复制和粘贴工作：

```
Option Explicit

Private Sub Form_Load()
Dim r As radioRec
Dim radioChan As Integer
Dim x As Integer

x = 1
radioChan = FreeFile
Open radioFile For Random As radioChan Len = radioLen
Get radioChan, x, r
Do While Not EOF(radioChan)
    radCatList.AddItem r.rModel
    radCatList.ItemData(radCatList.NewIndex) = x
    x = x + 1
    Get radioChan, x, r
Loop
Close radioChan
End Sub

Private Sub radCatList_Click()
Dim r As radioRec
Dim radioChan As Integer
Dim x As Integer

radCatList.Clear

x = radCatList.ItemData(radCatList.ListIndex)
radioChan = FreeFile
Open radioFile For Random As radioChan Len = radioLen
Get radioChan, x, r
channelTxt = r.rLicense
licenseTxt = r.rLicense
rangeTxt = r.rRange
stockTxt.Text = r.rStock
Close radioChan
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:30:45.183

您的 listindex 可能是 -1，因为还没有选择 listitem 吗？

看看下面的代码

```
'1 form with
'    1 listbox : name=List1
Option Explicit

Private Sub Form_Load()
  Dim intIndex As Integer
  For intIndex = 0 To 10
    List1.AddItem CStr(intIndex)
    List1.ItemData(intIndex) = intIndex * intIndex
  Next intIndex
  ShowData List1.ListIndex
End Sub

Private Sub Form_Resize()
  List1.Move 0, 0, ScaleWidth, ScaleHeight
End Sub

Private Sub List1_Click()
  ShowData List1.ListIndex
End Sub

Private Sub ShowData(intIndex As Integer)
  Dim strShow As String
  strShow = "Index:" & CStr(intIndex)
  If intIndex > -1 Then
    strShow = strShow & " Data:" & CStr(List1.ItemData(intIndex))
  End If
  Caption = strShow
End Sub 
```

所以你只需要检查listindex是否不是-1

# ruby-on-rails - 为什么我的控制器在新建后调用更新而不是创建

> ID：13602585
> 
> 赞同：1
> 
> 时间：2012-11-28T10:10:19.000
> 
> 标签：ruby-on-rails, simple-form

当我转到 时`new_heuristic_variant_cycle_path`，我的应用程序显示循环的新视图，但表单上的提交按钮显示“更新循环”而不是“创建循环”，当您单击提交按钮时，控制器会寻找更新操作。为什么？

我有...

**/config/routes.rb：**

```
Testivate::Application.routes.draw do
  resources :heuristics do
    resources :variants do
      resources :cycles
    end
  end
end 
```

**/app/models/heuristics.rb：**

```
class Heuristic < ActiveRecord::Base
  has_many :variants
  has_many :cycles, :through => :variants
end 
```

**/app/models/variants.rb：**

```
class Variant < ActiveRecord::Base
  belongs_to :heuristic
  has_many :cycles
end 
```

**/app/models/cycles.rb：**

```
class Cycle < ActiveRecord::Base
  belongs_to :variant
end 
```

**/app/views/cycles/new.html.haml：**

```
%h1 New Cycle
= render 'form' 
```

**/app/views/cycles/_form.html.haml：**

```
= simple_form_for [@heuristic, @variant, @cycle] do |f|
  = f.button :submit 
```

**/app/controllers/cycles_controller.rb：**

```
class CyclesController < ApplicationController
  def new
    @heuristic = Heuristic.find(params[:heuristic_id])
    @variant = @heuristic.variants.find(params[:variant_id])
    @cycle = @variant.cycles.create
    respond_to do |format|
      format.html # new.html.erb
    end
  end
  def create
    @heuristic = Heuristic.find(params[:heuristic_id])
    @variant = @heuristic.variants.find(params[:variant_id])
    @cycle = @variant.cycles.create(params[:cycle])
    respond_to do |format|
      if @cycle.save
        format.html { redirect_to heuristic_variant_cycles_path(@heuristic, @variant, @cycle), notice: 'Cycle was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:13:39.567

在您的控制器中，这行代码是错误的：

```
@cycle = @variant.cycles.create 
```

应该是这样的：

```
@cycle = @variant.cycles.build 
```

当您调用`create`时，记录被保存。在文档中：

> 集合.build（属性= {}，...）
> 
> 返回集合类型的一个或多个新对象，这些对象已使用属性实例化并通过外键链接到此对象，但尚未保存。
> 
> 集合.创建（属性 = {}）
> 
> 返回已使用属性实例化的集合类型的新对象，通过外键链接到此对象，并且已经保存（如果它通过了验证）。注意：这仅适用于数据库中已经存在基本模型的情况，而不是新的（未保存的）记录！

# javascript - 如何访问 alfresco 存储库中的文档？

> ID：13602586
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:10:19.257
> 
> 标签：javascript, alfresco

我想知道，露天有多少文件？

我首先需要做什么？

我尝试在 Rest 中找到 api 以访问露天中的文档但不工作。我不知道。请帮帮我

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:06:35.320

至少有 3 种方式：

1.  如果您想计算 Alfresco 中的所有文档，请使用此 [查询](http://alfrescoshare.wordpress.com/2010/01/20/count-the-total-number-of-documents-in-alfresco-using-sql/)（可能已过时）
2.  或者您可以编写一些 Javascript 并通过 Alfresco 中的 Javascript-Console（插件）触发它并计算它们。像：

> 变量计数 = 0;
> 
> recurse(companyhome, function(node) { if (node.isDocument) count++; });
> 
> logger.log（计数）；

1.  JMX 显示总条目，如所有文件夹 + 文档。检查[在线文档](http://docs.alfresco.com/4.0/index.jsp?topic=/com.alfresco.enterprise.doc/concepts/jmx-readonly-beans.html)

# java - Java3D从点绘制实体区域/立方体

> ID：13602591
> 
> 赞同：2
> 
> 时间：2012-11-28T10:10:43.487
> 
> 标签：java, opengl, 3d, geometry, java-3d

我有一个要绘制为实心区域的点列表。我可以将点绘制为 LineStripArray（见图）。但是当我尝试将点绘制为 IndexedTriangleArray / IndexedQuadArray 时，我得到了一个奇怪的形状。我也使用 GeometryInfo 和 Stripifier 进行了尝试，但没有成功。

![通过线条连接的点](../Images/50c01ac6806f128ba5becce60f839be9.png)

**带有 GeometryInfo 的代码：**

```
 GeometryInfo geometryInfo = new GeometryInfo(GeometryInfo.QUAD_ARRAY);
    geometryInfo.setCoordinates(points3f);

    NormalGenerator normalGenerator = new NormalGenerator();
    normalGenerator.generateNormals(geometryInfo);

    Stripifier st = new Stripifier();
    st.stripify(geometryInfo);

    Shape3D shape = new Shape3D();
    shape.setAppearance(app);
    shape.setGeometry(geometryInfo.getGeometryArray()); 
```

**一个区域的解决方案（加上新问题）：**

```
Appearance app = new Appearance();

PolygonAttributes pa = new PolygonAttributes();
pa.setCullFace(PolygonAttributes.CULL_NONE);
pa.setPolygonMode(PolygonAttributes.POLYGON_FILL);
app.setPolygonAttributes(pa);

GeometryInfo geometryInfo = new GeometryInfo(GeometryInfo.POLYGON_ARRAY);

geometryInfo.setCoordinates(points3f);
int[] stripCountArray = { points3f.length };
int[] countourCountArray = {stripCountArray.length};

geometryInfo.setContourCounts( countourCountArray );
geometryInfo.setStripCounts( stripCountArray );

NormalGenerator normalGenerator = new NormalGenerator();
normalGenerator.generateNormals(geometryInfo);

Shape3D shape = new Shape3D();
shape.setAppearance(app);
shape.setGeometry(geometryInfo.getGeometryArray()); 
```

形状也有深度。但我不能只复制数组添加 Z-index 并再次合并它们（这不起作用）。一种可能的解决方案是分别绘制每张脸，但我认为这将非常低效。

有人可以帮我解决这个问题吗？

# php - Fedex 提供 API 来创建用户？

> ID：13602595
> 
> 赞同：1
> 
> 时间：2012-11-28T10:10:59.663
> 
> 标签：php, api, fedex

我必须使用 API 在联邦快递中创建用户吗？fedex 中是否有任何 API 可用于创建用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:31:57.677

Fedex 确实有一个运行良好的 PHP SDK，看起来[JeremyDunn](https://github.com/JeremyDunn/php-fedex-api-wrapper/tree/master/examples)已经整合了一个专注于 Symfony 的 Fedex 项目。

# c# - Htmlselect 选定的索引更改事件

> ID：13602599
> 
> 赞同：0
> 
> 时间：2012-11-28T10:11:08.193
> 
> 标签：c#, asp.net, html, drop-down-menu, html-select

我有 2 个 HtmlSelect 控件，我需要根据第一个 HtmlSelect 的选定索引加载第二个。但它不起作用，因为 HtmlSelect 没有 selectedindexchanged 事件。我需要做什么？任何想法？

例子;

```
<!--These are my Html Select controls-->

 select runat="server" id="drpCity"></select> 
 <select runat="server" id="drpState">/select>

  protected void Page_Load(object sender, EventArgs e)
  {
     FillCities(drpCity);
     FillStates(drpState, drpCity.SelectedValue);
  }

  public void FillCitiesHtmlSelect(HtmlSelect drpCity)
        {
           BusCity busCity = new BusCity();
           List<EntCity> lentCity = busCity.SearchAll();
           drpCity.DataValueField = EntCity.Columns.CITYCODE;
           drpCity.DataTextField = EntCity.Columns.CITYNAME;
           drpCity.DataSource = lentCity;
           drpCity.DataBind();

            drpCity.Items.Insert(0, new ListItem("City", string.Empty));
        }

public void FillStatesHtmlSelect(HtmlSelect drpState, string cityCode)
{
    if (!string.IsNullOrEmpty(cityCode))
       {
          BusState busState = new BusState();
          List<EntState> lentEmsState = busState.Search(cityCode);
          drpState.DataValueField = EntState.Columns.STATECODE;
          drpState.DataTextField = EntState.Columns.STATENAME;
          drpState.DataSource = lentState;
          drpState.DataBind();
        }
        else
        {
          drpState.Items.Clear();
        }
           drpState.Items.Insert(0, "State", string.Empty));
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:39:04.333

我可以建议一种方法，尽管我还没有实现它。如果您可以从一个选择控件调用 javascript 函数来检查非默认值，并且如果条件满足，则加载第二个选择 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:42:33.880

Html 选择控件没有“selectedindexchanged”事件，而是有客户端事件“onchange”。此外，您不能从 html 选择控件调用服务器端。要调用在 c# 代码页（服务器端）中编写的函数，您需要使用 webservice . 将您的 c# 函数定义为 webmethord 并在 html 选择控件的“onchange”事件中使用 web 服务调用函数。

# c#-3.0 - 如何通过编程截取 C# 异常的截图？

> ID：13602600
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:11:08.103
> 
> 标签：c#-3.0

我知道如何通过编程截取屏幕截图，但我想截取我在消息框中显示的异常的屏幕截图出现运行时？有可能吗？请给我建议...在此先感谢

```
 Bitmap bitmap = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);    
Graphics graphics = Graphics.FromImage(bitmap as Image);    
graphics.CopyFromScreen(0, 0, 0, 0, bitmap.Size);    
bitmap.Save("c:\\screenshot.jpeg", ImageFormat.Jpeg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:13:54.127

如果您想要使用 创建的消息框的屏幕截图`MessageBox.Show()`，这将有点棘手。这里有几个选项：

1.  使用`ex.ToString()`(where `ex`is your `Exception`object) 跳过屏幕截图并捕获错误内容。
2.  创建一个自定义消息框表单，以便您可以在屏幕截图中获取其大小和位置。
3.  使用消息框的标题找到它的句柄，看看是否可以得到它的位置和大小。坦率地说，我不确定这是否会奏效。

另外，请记住这`MessageBox.Show()`是模态的。如果您将屏幕截图代码放在此行之后，则消息框将在您的代码运行之前消失。您可以使用线程解决此问题，但这也可能比它的价值更多，并且由于时间问题可能不可靠。

就个人而言，我建议只使用错误的内容并跳过屏幕截图。它将更加有用，并且可以包含您不想在消息框中向用户显示的信息。

# javascript - 使用正则表达式在 ASP.net MVC 表单中使用 jquery 限制文本框中的特殊字符

> ID：13602606
> 
> 赞同：0
> 
> 时间：2012-11-28T10:11:27.107
> 
> 标签：javascript, jquery, regex, asp.net-mvc, escaping

我正在尝试使用 JQuery 将文本框中的特殊字符数限制为 3。特殊字符可以按任意顺序排列，可以彼此相邻，也可以散布在文本框的长度上。在过去的 24 小时里，我阅读了 stackoverflow 中几乎所有相关的帖子并尝试了这些建议。

我还没有提供合适的正则表达式。

到目前为止，这是我的 ASP.net mvc 表单底部的内容：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('input[id$=textbox1]').bind('blur', function () {
            var match = /^[.,:;!?€¥£¢$-~#%&*()_]{4,50}$/g.test(this.value);
            if (match == true)
                alert("Please enter a maximum of 3 special characters.");
        });
    });
</script> 
```

以下是我要定位的特殊字符列表：

> ~`!@#%^&*()-_:;?€¥£¢$-~{}[]<>/+|=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:42:25.943

你在哪里思考困难。只需计算元素在输入中的频率，并在计数超过 3 时发出警告。

这是一个

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Demo</title>
        <script src="jquery-1.8.3.min.js"></script>

        <script>
            var limitchars = '[~`!@#%\^&\*\(\)-_:;\?€¥£¢\${}\[]<>/+\|=]'

            $(function () {
                var  teststring = "~`!@#%\^&\*\(\)-_:;\?€¥£¢\${}\[]<>/+\|='-:;";
                var regex = /[~`'!@#%\^&\*\(\)-_:;\?€¥£¢\${}\[\]<>/+\|=]/g

                //var test1 = teststring.match(regex);
                //debugger;
                //alert(teststring.length === test1.length);

                $('input').keyup(function () {
                    var text = this.value;

                    var match = text.match(regex);
                    if (match.length > 3) {
                        alert('invalidI input');
                    }
                });
            });
        </script>
    </head>
    <body>
        <input type="text" />
    </body>
</html> 
```

不要忘记转义正则表达式（http://www.regular-expressions.info/reference.html）。正则表达式末尾的 g 计算字符串中出现的次数（http://stackoverflow.com/questions/4009756/how-to-count-string-occurrence-in-string）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:42:25.797

您可以通过计算匹配的数量来找到错误字符的数量。

[http://jsbin.com/alidus/1/](http://jsbin.com/alidus/1/)上的工作示例

```
 $(document).ready(function () {
        $('#test').bind('blur', function () {       

          var charactersToExlude = "~`!@#%^&*()-_:;?€¥£¢$-~{}[]<>/+|=";
          var badCharacterRegex = "[" + charactersToExlude.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") + "]";
          console.log(badCharacterRegex);
          var patt=new RegExp(badCharacterRegex, "g");

          var matches = this.value.match(patt);

          var numberOfBadCharacters = matches ? matches.length : 0;

          if (numberOfBadCharacters >= 3) {
            $("#result").text("Please enter a maximum of 3 special characters. (" + numberOfBadCharacters + " bad characters).");
          } else {
            $("#result").text(numberOfBadCharacters + " bad characters.");
          }

        });
    }); 
```

首先，我们转义任何对正则表达式有意义的坏字符。然后创建模式，匹配它，如果有匹配，计算匹配的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:00:17.600

```
$(document).ready(function () {
    $('#test').bind('blur', function () {       

          var charactersToExlude = "~`!@#%^&*()-_:;?€¥£¢$-~{}[]<>/+|=";
          var badCharacterRegex = "[" + charactersToExlude.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") + "]";
          console.log(badCharacterRegex);
          var patt=new RegExp(badCharacterRegex, "g");

          var matches = this.value.match(patt);

          var numberOfBadCharacters = matches ? matches.length : 0;

          if (numberOfBadCharacters >= 3) {
            $("#result").text("Please enter a maximum of 3 special characters. (" + numberOfBadCharacters + " bad characters).");
          } else {
            $("#result").text(numberOfBadCharacters + " bad characters.");
          }

    });
}); 
```

# javascript - 在 jqGrid 中编辑时始终提交到服务器，无论更改如何

> ID：13602609
> 
> 赞同：1
> 
> 时间：2012-11-28T10:11:30.257
> 
> 标签：javascript, ajax, jqgrid

我在单元格编辑模式下使用 jqGrid 4.4.1，一切正常 - 当用户更改单元格值并按 Enter 键时，新值按预期提交到服务器。

如果用户输入一个单元格，不更改值，然后按 Enter，则该值*不会*按预期提交给服务器。

但是，对于其中一列，我希望将值发送到服务器，即使它没有更改。

这似乎是阻止这种情况的 jqGrid 代码（来自[saveCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#methods)方法）：

```
// The common approach is if nothing changed do not do anything
if (v2 !== $t.p.savedRow[fr].v){ 
```

所以它正在检查单元格是否已更改，如果没有则不继续提交到服务器。

现在，我可以对 jqGrid 源进行讨厌的修改来更改它，但我宁愿不编辑 jqGrid - 有什么方法可以使用“标准”jqGrid 功能获得所需的行为吗？

# sql - 更改 birt 中的十进制和千位标记

> ID：13602610
> 
> 赞同：0
> 
> 时间：2012-11-28T10:11:34.500
> 
> 标签：sql, oracle, marker, birt

我用 birt 做同样的报告，但我必须切换十进制标记和千位标记。例如，我需要以“1,234.56”的形式查看这个数字“1.234,56”。我使用 birt 的数字格式搜索了一种方法，因为如果我使用例如 Oracle sql 指令，我会丢失数字的精度

```
to_char(number, '999,990.99') 
```

因为我不想确定我所有报告编号的编号长度。

对不起我的英语不好，但我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:51:44.593

[NLS_NUMERIC_CHARACTERS](http://docs.oracle.com/cd/B19306_01/server.102/b14237/initparams129.htm)指定用作组和小数分隔符的字符。您可以更改`NLS_NUMERIC_CHARACTERS`会话（使用`alter session`）或操作的设置。在这种情况下，您可以将 NLS 设置指定为`to_char`函数的第三个参数。

*   `,`作为小数分隔符；`.`作为组分隔符

    ```
     SQL> select to_char(123456.12, 'fm999G990D99', 'NLS_NUMERIC_CHARACTERS=,.') res
       2    from dual
       3  ;

       RES
       -----------
       123.456,12 
    ```

*   `.`作为小数分隔符；`,`作为组分隔符

    ```
     SQL> select to_char(123456.12, 'fm999G990D99', 'NLS_NUMERIC_CHARACTERS=.,') res
       2    from dual
       3  ;

     RES
     -----------
     123,456.12 
    ```

# java - 属性文件中的布尔值

> ID：13602616
> 
> 赞同：0
> 
> 时间：2012-11-28T10:11:52.983
> 
> 标签：java, properties

正如我们所知，在属性文件中，每个*值*都被视为字符串。例如，我的文件中有一个属性：

```
XYZ=false 
```

我想将上面的 String **false**用作条件中的布尔值。问题是我**无法**修改执行此条件*XYZ*的 java 源：

```
if (XYZ) {
  //do something
} 
```

目前，此条件始终返回字符串*true*而不是值为*false*的布尔值。

**我可以在属性文件中做一些事情来使其成为布尔值吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:14:32.843

从属性文件中获取值后，您可以使用： if (Boolean.valueOf(XYZ)) {...}

# regex - 在 vim 中注释/取消注释特定行的优雅而强大的方法

> ID：13602617
> 
> 赞同：1
> 
> 时间：2012-11-28T10:11:54.983
> 
> 标签：regex, vim

我有一个很长的脚本 R，它绘制了非常复杂的数据。我只使用绘图来直观地了解我在做什么，但我可以在没有绘图的情况下计算结果，显然不绘制任何东西会使事情变得更快。然而，有时我仍然需要可视化程序所做的工作以继续调试它。

为了实现这个绘图“开或关”开关，我遵循这个策略。

对于具有与脚本的绘图功能相关的命令的每一行，我`#toplot`在每个相关行的末尾都有一个特定的注释标记。使用正则表达式替换的力量，我然后使用以下命令注释/取消注释这些行。

示例代码：

```
a <- c(1:10)
b <- a/sin(a)
png('sin.png') #toplot
plot(b)        #toplot
dev.off()      #toplot
print(b) 
```

要评论“标记”行：

```
 :%s/.\+#toplot/###commline###\0/g 
```

我明白了：

```
a <- c(1:10)
b <- a/sin(a)
###commline###    png('sin.png') #toplot
###commline###    plot(b)        #toplot
###commline###    dev.off()      #toplot
print(b) 
```

要取消注释：

```
 :%s/###commline###//g 
```

我明白了：

```
a <- c(1:10)
b <- a/sin(a)
png('sin.png') #toplot
plot(b)        #toplot
dev.off()      #toplot
print(b) 
```

我不是计算机科学家，所以我不知道是否有更好、更优雅的方式来执行这些操作。

编辑：重要的是要提到，为了绘制我的数据，我需要经过多轮计算和转换，以便不同类型的数据适合绘图设备。为了执行这些操作，我使用历史记录，我根据需要上下移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:25:01.293

你的方法对我来说很好。

如果您可以想出一个捕获所有与绘图相关的行的正则表达式，您可以取消`#toplot`标记，并让注释替换直接对其进行处理。

您没有提及是否重新输入替换或使用历史记录。我肯定会为此定义一个缓冲区本地命令（和/或映射）：

```
autocmd FileType r command! -buffer Comment %s/.\+#toplot/###commline###\0/g
autocmd FileType r command! -buffer Uncomment %s/###commline###//g 
```

（或放入`:commands!`。`~/.vim/ftplugin/r_commands.vim`）

如果您正确定义了文件类型的`'comments'`设置（例如 add `b:###commline###`）和`'commentstring'`，您还可以使用通用评论插件之一（例如[The NERD Commenter](http://www.vim.org/scripts/script.php?script_id=1218)），它提供了很好的映射来打开/关闭评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:17:13.510

这没关系，但是用条件包装每个绘图命令不是更容易吗？

# c# - asp.net c#中的正则表达式帮助

> ID：13602619
> 
> 赞同：1
> 
> 时间：2012-11-28T10:12:04.697
> 
> 标签：c#, regex

我有一个大字符串，可能有一些我想从中检索的项目。

一个示例字符串可能是

```
"The quick |Get Me|(header1) brown fox |Get Me|(info package) jumps over ..." 
```

我想要一个正则表达式来提取括号之间的内容，不包括括号，并且括号将始终跟随`"|Get Me|"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:15:03.193

将匹配的模式：

```
\|Get Me\|\(([^)]+)\) 
```

用法：

```
var matches = Regex.Matches(myString, @"\|Get Me\|\(([^)]+)\)");

foreach(Match match in matches)
{
   var val = match.Groups[1].Value;
} 
```

# zend-framework - 将带有 post 方法的表单传递给另一个控制器

> ID：13602622
> 
> 赞同：0
> 
> 时间：2012-11-28T10:12:21.817
> 
> 标签：zend-framework, zend-form, posts

我有一个简单的 Zend 表单，其中包含一个带有 setRequired(TRUE) 和其他验证器的文本框以及 IndexController 中的一个简单提交按钮。

我的问题是，是否有可能另一个控制器将处理和验证我的帖子表单？

登录.php

```
<?php

class Application_Form_Login extends Zend_Form
{

    public function init()
    {
        $username = $this->createElement('text', 'username');
        $username->setLabel('Username:');
        $username->setRequired(TRUE);
        $username->addValidator(new Zend_Validate_StringLength(array('min' => 3, 'max' => 10)));
        $username->addFilters(array(
                new Zend_Filter_StringTrim(),
                new Zend_Filter_StringToLower()
                )
        );
        $this->addElement($username);

        // create submit button
        $this->addElement('submit', 'login',
                array('required'    => false,
                'ignore'    => true,
                'label'     => 'Login'));
    }} 
```

索引控制器.php

```
<?php

class AttendantController extends Zend_Controller_Action
{
    public function indexAction()
    {
        $loginForm = new Application_Form_Login();
        $loginForm->setAction('/Auth/process');
        $loginForm->setMethod('post');
        $this->view->loginForm = $loginForm;
    }
} 
```

AuthController.php

```
class AuthController extends Zend_Controller_Action
{
    public function processAction()
    {
        // How to validate the form posted here in this action function?
        // I have this simple code but I'm stacked here validating the form

        // Get the request
        $request = $this->getRequest();
        // Create a login form
        $loginForm = new Application_Form_Login();
        // Checks the request if it is a POST action
        if($request->isPost()) {
            $loginForm->populate($request->getPost());
            // This is where I don't know how validate the posted form
            if($loginForm->isValid($_POST)) {
                // codes here
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:28:13.043

你很接近。在流程操作中，您创建登录表单的新实例（您正在执行此操作），并将 POST 数据传递给`isValid()`该表单的方法以进行验证。所以：

```
public function processAction()
{
    $request = $this->getRequest();

    $loginForm = new Application_Form_Login();
    if($request->isPost()) {
        if($loginForm->isValid($request->getPost)) {
            // codes here
        } else {
            // assign the login form back to the view so errors can be displayed
            $this->view->loginForm = $loginForm;
        }
    }
} 
```

通常在同一个动作中显示和处理表单更容易，并且在提交成功时重定向。这是 Post/Redirect/Get 模式 - 请参阅[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)。这使您不必在两个不同的操作中创建相同表单的实例，并且在出现错误时更容易重新显示表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:28:29.907

你正在用吗 ' ？

更改 `$loginForm->setAction(/Auth/process);`为`$loginForm->setAction('/auth/process');`

您可以从 processAction 中删除`$login->populate($request->getPost());`

# linux - 过期后如何在 Linux 上重新安装 TeamViewer 试用版？

> ID：13602627
> 
> 赞同：-2
> 
> 时间：2012-11-28T10:12:40.233
> 
> 标签：linux

TeamViewer7 试用版目前安装在我的 Ubuntu linux 系统上。它已过期。如何清除注册表。如何更改我在网上遇到的一些 url 中看到的新安装的设置“供个人使用”。请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:28:03.277

TeamViewer 捆绑了自己的 Wine 版本，因此您只需删除解压到的目录即可。它的所有设置都保存在“teamviewer7/.wine”中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T10:24:07.730

购买完整版 TeamViewer 的最佳方式。

# azure - 是否可以从 Azure 网站访问 Azure 中的表存储

> ID：13602629
> 
> 赞同：2
> 
> 时间：2012-11-28T10:12:43.350
> 
> 标签：azure, azure-table-storage

我想使用 Azure 网站（不是云服务）中的 Azure 表存储服务。有关于如何使用 Node.js 执行此操作的指南，但我更喜欢使用 .NET MVC。

.NET 的所有指南都谈到在 ServiceConfiguration 中存储 Azure 存储连接信息（就像在云服务中所做的那样），但在 Azure 网站中我没有这个（只是一个 Web.config）。如果我没记错的话，如果不在 Azure 模拟器中运行，也无法使用 RoleEnvironment（用于从 ServiceConfiguration 读取），而且我不在 AzureWeb 站点中执行此操作。

是否可以从 Azure 网站访问表存储，如果可以，我如何连接到它？

我看过[这个问题](https://stackoverflow.com/questions/11587795/can-azure-table-be-accessed-from-web-site)，它看起来并不相似。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:18:29.963

您可以简单地从 web.config 中获取连接字符串并对其进行解析（注意，您也可以使用该`CloudConfigurationManager.GetSetting`方法）：

```
var connectionString = ConfigurationManager.AppSettings["myStorageAccountConnectionString"];
var storageAccount = CloudStorageAccount.Parse(connectionString);
var tableClient = storageAccount.CreateCloudTableClient(); 
```

在您的 web.config 中，您需要像这样添加连接字符串：

```
 <appSettings>
    <add key="myStorageAccountConnectionString" value="DefaultEndpointsProtocol=https;AccountName=myaccount;AccountKey=fazfazefazefzeefazeefazfazefazef"/>
  </appSettings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:16:41.050

简短的回答：是的。表服务有一个[REST API](http://msdn.microsoft.com/en-gb/library/windowsazure/dd179423.aspx)，这意味着您可以从任何可以通过 http 进行通信的客户端平台访问它。

然后谷歌搜索会产生大量示例：

[http://azure.snagy.name/blog/?p=294](http://azure.snagy.name/blog/?p=294)

[http://blogs.msdn.com/b/rickandy/archive/2012/09/20/azure-table-storage.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/09/20/azure-table-storage.aspx)

您可以使用`CloudTableClient`来自 MVC：即使大多数示例是针对云服务的，您也可以轻松地调整它们以从 web.config 或任何其他来源获取连接数据。操作文档在这里：[https ://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)

# objective-c - UITextView 中正在更新的滚动文本

> ID：13602633
> 
> 赞同：0
> 
> 时间：2012-11-28T10:12:55.390
> 
> 标签：objective-c, uitextview

我使用 NSTimer 更新 UITextView 中的文本，如果文本不再适合 UITextView 的大小，我也需要此 UITextView 向下滚动。我一直在寻找答案，但是它滚动得太慢了，文本正在更新，但是您再也看不到它了，因为它滚动得很慢。

这是每次 NSTimer 触发时调用的函数，即每 0.05 秒：

```
- (void)addLetters{
     times++;
     self.message.text = [message1 substringToIndex:times];

    [self.message scrollRangeToVisible:NSMakeRange([self.message.text length] -1, 1)];

    if(times == MAX){
       [temp invalidate];
       temp = nil;
    }
} 
```

每次执行时，我都会将字符串`message1`中的一个字母添加到 UITextView`self.message`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:37:09.713

试试这个：`[textView scrollRectToVisible:CGRectMake(0, textView.contentSize.height-1, 1, 1) animated:NO];`

它不会为跳跃设置动画，但由于您多次调用它，结果可能会让您满意。

# java - 如何使用 apache commons-exec 启动程序并立即退出？

> ID：13602635
> 
> 赞同：4
> 
> 时间：2012-11-28T10:12:57.387
> 
> 标签：java, apache-commons-exec

通过使用 Apache Commons-Exec 我可以成功启动程序，但是启动程序在程序启动后暂停。

请问如何启动一个程序并立即退出，这样才不会阻塞后面的执行？

```
DefaultExecutor executor = new DefaultExecutor();
executor.execute( "cmd /c start C:\\Users\\xx\\program.exe"); 
```

我在Win7 64位。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:17:02.207

根据[文档](http://commons.apache.org/exec/apidocs/org/apache/commons/exec/DefaultExecutor.html)，`execute(CommandLine)`开始同步执行。也就是说，它阻塞了调用线程。您可能想要异步执行，所以使用`execute(CommandLine command, ExecuteResultHandler handler)`. 例如，

```
DefaultExecutor executor = new DefaultExecutor();
executor.execute(new CommadLine("cmd /c start C:\\Users\\xx\\program.exe"),
                 new DefaultExecuteResultHandler()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:15:33.350

听起来您需要使用[DefaultExecuteResultHandler](http://commons.apache.org/exec/apidocs/org/apache/commons/exec/DefaultExecuteResultHandler.html)。

有关更多信息，请参阅[教程](http://commons.apache.org/exec/tutorial.html)（底部）。

# html - 无法显示特殊字符 HTML

> ID：13602636
> 
> 赞同：1
> 
> 时间：2012-11-28T10:12:59.413
> 
> 标签：html, css, special-characters

我最近遇到一个问题，我似乎无法显示像 é 这样的特殊法语字符。

这是我的页面设置：

```
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" /> 
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/> 
```

我也试过`UTF-8`了，好像也没有用。

我也尝试使用é，但什么也没有。

有人能帮我吗 ？

请参阅[此网站](http://karimreemka.free.fr)（在“关于”部分）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:24:45.490

[您可以通过其HTML 实体](http://www.degraeve.com/reference/specialcharacters.php)或使用[HTML 转义工具](http://www.htmlescape.net/htmlescape_tool.html)手动替换字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:16:05.903

您可以为此使用 html 字符实体。

[参考](http://www.digitalmediaminute.com/reference/entity/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:23:12.247

这应该是有效的法语 html 文档（根据网络标准）。通过选择 iso-8859-1 字符编码，您做了正确的事情，只是在错误的地方。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">

    <head>
    <title>Example de document XHTML 1.0</title>
    </head>

    <body>
    <h1>Portrait IntÃ©rieur</h1>
    <h2>Rainer-Maria Rilke</h2>
    <p>Ce ne sont pas des souvenirs<br />
    qui, en moi, t'entretiennent ;<br />
    tu n'es pas non plus mienne<br />
    par la force d'un beau dÃ©sir.</p>
    </body>
    </html> 
```

# android - 在 AsyncTask 中使用 looper

> ID：13602639
> 
> 赞同：0
> 
> 时间：2012-11-28T10:13:08.900
> 
> 标签：android, android-asynctask, looper

我想在加载视频时显示进度对话框，我使用`AsyncTask`了但出现以下错误：

```
cant create handler inside thread that has not called looper.prepare 
```

然后我尝试在其中使用 looper 仍然没有运气（看起来`AsyncTask`和 Looper 是两个根本不同的线程模型，它们不兼容）

我读过 using `HandlerThread`，但找不到任何简单的例子（我通常通过例子来学习）。请告诉我是否需要使用`HandlerThread`，如果需要，请提供一个使用示例，`HandlerThread`就像我们在`AsyncTask`for在后台处理任务。

这就是我正在做的事情：我只是想补充一点，我正在使用 Vitamio API 来播放 Flash。

```
class WaitTask extends AsyncTask<Integer, Void, Void> {

    @Override
    protected void onPreExecute() {
        progressDialog = new ProgressDialog (TvProg.this);
        progressDialog.show();
    }

    @Override
    protected Void doInBackground(Integer... params) {
        videoView.setMediaController(new MediaController(TvProg.this));
        return null;
    }

    @Override
    protected void onPostExecute(Void unused) {
        progressDialog.dismiss();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:15:43.320

在执行后创建`ProgressDialog`内部`asynctask's` `preexecute()`& `dismiss`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:19:12.780

像这样做..

```
public MyTask(Context context) {
    this.context = context;
}

@Override
protected void onPreExecute() {
        progressDialog = ProgressDialog.show(context, "", msg, true);

}

/* 
 * @see android.os.AsyncTask#doInBackground(Params[])
 */
@Override
protected String doInBackground(String... arg0) {
    //
}

@Override
protected void onPostExecute(final String result) {
        progressDialog.dismiss();

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:48:02.743

问题是 MediaPlayer 只能在带有 Looper 的线程上操作。因此，您不应将 an`AsyncTask`用于此用例。A`HandlerThread`更适合。可以通过在设置 videoView 之前和之后将消息发送回 UI 线程来控制进度条，如下面的一些示例代码所示：

```
mMyBgThread = new HandlerThread("HandlerThread");
mMyBgThread.start();

mBgHandler = new Handler(mMyBgThread.getLooper()) {
    public void handleMessage(Message msg) {
        Message uiMsg = mUiHandler.obtainMessage(SHOW_PROGRESS_BAR);
        mUiHandler.sendMessage(uiMsg);

        // Setup videoView          

        uiMsg = mUiHandler.obtainMessage(HIDE_PROGRESS_BAR);
        mUiHandler.sendMessage(uiMsg);
    }
}; 
```

现在你只需要处理你`SHOW_PROGRESS_BAR`的`HIDE_PROGRESS_BAR`UI 线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T18:17:31.500

我还没有尝试过，但我发现了这个进度对话框和媒体控制器的例子：

[使用 videoview 流式传输视频](https://stackoverflow.com/questions/9765989/streaming-video-with-videoview)

# svn - 如何将代码从颠覆合并到 TFS 2012 并返回？

> ID：13602640
> 
> 赞同：0
> 
> 时间：2012-11-28T10:13:08.777
> 
> 标签：svn

如何将代码从颠覆合并到 TFS 2012 并返回？我正在阅读有关 SVNBridge 从 svn 合并到 TFS 的信息。是否可以从 TFS 合并回 svn？我可以用什么来做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:21:54.733

SVNBridge 将 TFS 存储库表示为 Subversion 存储库（透明地）。

因此 - 您可以使用 Subversion 执行的任何操作，您都可以（通过桥接）使用 TFS 执行

# javascript - 密码验证正则表达式

> ID：13602645
> 
> 赞同：1
> 
> 时间：2012-11-28T10:13:33.377
> 
> 标签：javascript, regex

我正在尝试使用正则表达式进行密码验证

```
^(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{6,}$ 
```

它至少限制 1 个数字、1 个大写字母和 1 个小写字母，不是吗？
那么为什么下面的结果为`true`？

```
(new RegExp('^(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{6,}$')).test('aaAAffffaAfDvad') 
```

但是下一个`false`呢？

```
(new RegExp('^(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{6,}$')).test('aaAA112') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:29:36.367

在你的 JS 控制台（萤火虫或其他）试试这个：

```
var re = /^(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{6,20}$/ 
```

然后这个：

```
var re2 = new RegExp('^(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{6,20}$') 
```

然后您只需检查结果...您会看到在 re2 中，对于`\d`正则表达式没有正确转义，而是对字符串进行了转义。

编辑：发现[Javascript：无论我的表达是什么，RegExp 都不起作用](https://stackoverflow.com/questions/11347384/javascript-regexp-not-working-no-matter-what-my-expression-is?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:32:09.100

这是因为`\`in`\d`没有正确转义：

```
>>> var x = new RegExp('^(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{6,20}$');
>>> x
/^(?=.*d)(?=.*[A-Z])(?=.*[a-z]).{6,20}$/

>>> var x = new RegExp('^(?=.*\\d)(?=.*[A-Z])(?=.*[a-z]).{6,20}$');
>>> x
/^(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{6,20}$/ 
```

您还可以利用此函数进行正确的正则表达式转义：

```
RegExp.escape = function(s) {
    return s.replace( /[-\/\\^$*+?.()|[\]{}]/g, "\\$&" );
};
var x = new RegExp( RegExp.escape( '^(?=.*\d)(?=.*[A-Z])(?=.*[a-z]).{6,20}$') ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:02:50.380

可能不是最有效的方法，但非常可扩展。

```
requirements = [ /\d/, /[A-Z]/, /[a-z]/, /^.{6,20}$/ ];

function passwordValid( password ) {
    var i = requirements.length;

    while( i-- ) {
        if( !requirements[i].test( password ) ) return false;
    }
    return true;
} 
```

# c# - 如何使用 Entity Framework 4.3 从数据库中仅选择一个表来刷新模型

> ID：13602647
> 
> 赞同：3
> 
> 时间：2012-11-28T10:13:37.123
> 
> 标签：c#, .net, entity-framework, entity-framework-4.3

我的问题与[此](https://stackoverflow.com/questions/1617859/update-model-from-database-refresh-one-table)类似，但使用的是 Entity Framework 4.3。

> 是否可以 [以任何方式] 仅刷新实体框架中的一个实体？

我们是一个致力于大型数据库的大团队，通常我只需要更新数据库的一部分（我正在处理的那个），因为它可能有未完成的区域。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:56:10.127

你不能。当你去刷新模型VS读取所有对象并刷新它......它总是刷新所有对象。另一种解决方案是将您的表格分成几个模型，按模块或类似的模块分组。然后，您可以按时间只更新一个模型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T10:57:50.267

```
yourObjectContext.Refresh(RefreshMode.StoreWins, <entity>); 
```

如果要更新的实体包含一些导航属性，它们也不会被刷新。因此，如果需要，您需要明确刷新它们。我没有使用过 EF 4，我不知道你的模型映射是什么，如果有急切/延迟加载等。所以，我想你可能想尝试一下以确定是否只有一个实体被更新，或者它的导航属性也被重新加载。

有关详细信息，请参阅[ObjectContext.Refresh](http://msdn.microsoft.com/en-us/library/bb896255.aspx)。

# java - 如何管理CPU资源

> ID：13602648
> 
> 赞同：0
> 
> 时间：2012-11-28T10:13:37.887
> 
> 标签：java, multithreading

在生产和消费应用程序中，假设生产需要一个 cpu 周期，而消费需要 3 个平均 cpu 周期。那么我们如何设法保持相同数量的生产和消费边界。这是我在研究线程时想象的一个问题。

如果您有任何使用 Java 实现此功能的想法，请分享您的知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:23:36.770

您必须设计您的系统，以便您的消费者可以长期跟上您的生产者。大多数生产者都是突发性的，如果您使用队列，那么在很短的时间内它们的生产速度比您的消费速度更快并不重要。如果不是这种情况，您可以

*   有多个消费者。
*   丢弃或组合产生的消息以减少消费者的负载。
*   推动生产者放慢速度。

# android - 屏幕中的活动指示器

> ID：13602649
> 
> 赞同：0
> 
> 时间：2012-11-28T10:13:38.713
> 
> 标签：android, widget, activity-indicator

在我的应用程序中，我想显示一个活动指示器。在我的应用程序中，我有一个画廊视图，如果用户单击画廊视图中的项目，我将从 URL 加载数据并将其显示在列表视图中。在加载和显示数据之间，我需要一个指标。

我的活动代码：

```
gal.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            // TODO Auto-generated method stub  

            context.getInstance().setAppVariable("sectionurl", adapter.sectionurl[position]);
            ListView list=(ListView)findViewById(R.id.list);
            listadapter = new ListViewwithimageAdapter(this);
            list.setAdapter(listadapter);

        }
    }); 
```

我还发现了 1 个指标代码：

```
ProgressDialog mDialog = new ProgressDialog(contxt);
      mDialog.setMessage("Please wait...");
      mDialog.setCancelable(true);
      mDialog.show(); 
```

我的getview代码：

```
public View getView(int position, View convertView, ViewGroup parent) 
    {

         ProgressDialog mDialog = new ProgressDialog(contxt);
         mDialog.setMessage("Please wait...");
         mDialog.setCancelable(false);
         mDialog.show();
        // TODO Auto-generated method stub      
         Bitmap bitmap = DownloadImage(
                 kickerimage[position] );        
//       View listView = convertView;
         if (convertView   == null) 
            {
                //this should only ever run if you do not get a view back            
             LayoutInflater  inflater = (LayoutInflater) contxt
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             convertView  = inflater.inflate(R.layout.homelistrow, null); 
            }
//       else
//       {
//           holder.removeAllViews();
//       }
//      View listView;
//      if (convertView == null) 
//      {
//          listView = new View(contxt);             
//          LinearLayout holder = (LinearLayout)convertView.findViewById(android.R.id);
////            holder = inflater.inflate(R.layout.homelistrow, null); 
//          System.out.println("pos="+position);
//          System.out.println("item="+getItem(position));
//       else
//       {
            TextView textView = (TextView) convertView
                    .findViewById(R.id.name_label);
            textView.setText(itemsarray[position]);

            ImageView imageView = (ImageView) convertView
                    .findViewById(R.id.icon);
            imageView.setImageBitmap(bitmap);
//      }
//      else        
//      {
//          listView = (View) convertView;
//      } 
//       }
            mDialog.dismiss();
        return convertView ;        
    } 
```

我的日志猫：

```
11-28 16:01:55.589: D/AndroidRuntime(788): Shutting down VM
11-28 16:01:55.589: W/dalvikvm(788): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
11-28 16:01:55.589: E/AndroidRuntime(788): Uncaught handler: thread main exiting due to uncaught exception
11-28 16:01:55.650: E/AndroidRuntime(788): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.ViewRoot.setView(ViewRoot.java:472)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.app.Dialog.show(Dialog.java:239)
11-28 16:01:55.650: E/AndroidRuntime(788):  at com.newspaper.NewsPaperNov28MainGalleryActivity$1.onItemClick(NewsPaperNov28MainGalleryActivity.java:68)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.widget.Gallery.onSingleTapUp(Gallery.java:864)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.GestureDetector.onTouchEvent(GestureDetector.java:506)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.widget.Gallery.onTouchEvent(Gallery.java:839)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.View.dispatchTouchEvent(View.java:3709)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:852)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 16:01:55.650: E/AndroidRuntime(788):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
11-28 16:01:55.650: E/AndroidRuntime(788):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
11-28 16:01:55.650: E/AndroidRuntime(788):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.os.Looper.loop(Looper.java:123)
11-28 16:01:55.650: E/AndroidRuntime(788):  at android.app.ActivityThread.main(ActivityThread.java:4363)
11-28 16:01:55.650: E/AndroidRuntime(788):  at java.lang.reflect.Method.invokeNative(Native Method)
11-28 16:01:55.650: E/AndroidRuntime(788):  at java.lang.reflect.Method.invoke(Method.java:521)
11-28 16:01:55.650: E/AndroidRuntime(788):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
11-28 16:01:55.650: E/AndroidRuntime(788):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
11-28 16:01:55.650: E/AndroidRuntime(788):  at dalvik.system.NativeStart.main(Native Method)
11-28 16:01:55.739: I/dalvikvm(788): threadid=7: reacting to signal 3
11-28 16:01:55.739: I/dalvikvm(788): Wrote stack trace to '/data/anr/traces.txt' 
```

实际上，我将此代码放在适配器类的 getview() 中。但指示器并没有结束它总是显示..请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:16:15.713

你需要打电话

```
mDialog.dismiss(); 
```

加载完成后。

编辑：

我正在添加用于类似任务的代码。

```
//This is my AsyncTask which needed some time
new InsertDbTask().execute();

//Actual task
public class InsertDbTask extends AsyncTask<Void, Void, Void> {
        private final ProgressDialog dialog = new ProgressDialog(mContext);

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            try {
                prepareInsert();
            } catch (Exception e) {
                // Log.e("Error: ", e.getMessage());
            }
            return null;
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            this.dialog.setCanceledOnTouchOutside(false);
            this.dialog.setMessage("Inserting Record In Local DB Please Wait.");
            this.dialog.show();
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }
            saveButton.setEnabled(true);    // enable save button after execution of prepareInsert().

        }

    }

public void prepareInsert()
{
      // Do something 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:29:08.820

您需要将进度对话框代码放在`gal.setOnItemClickListener`& 加载列表时关闭该进度对话框。

# java - 创建 Intellij IDEA 插件。存储插件设置

> ID：13602651
> 
> 赞同：12
> 
> 时间：2012-11-28T10:13:40.913
> 
> 标签：java, intellij-idea, intellij-plugin

我是 IDEA 插件开发的新手，我有一个需要支持的插件。现在这个插件有一些设置。我想创建将存储在项目级别的设置，但我不知道如何执行此操作。

我已经创建了 UI 部分：

```
class SettingsPanel implements Configurable 
```

但我不明白如何在项目级别存储一些信息并在我的操作中使用这些信息。我想在我的设置面板上显示项目文件夹结构并保存选定的文件夹名称。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T10:21:53.163

[Persisting State of Components](http://www.jetbrains.org/intellij/sdk/docs/basics/persisting_state_of_components.html)应该回答你的问题

# markdown - 是否有 WMD 的维护版本

> ID：13602654
> 
> 赞同：1
> 
> 时间：2012-11-28T10:14:02.880
> 
> 标签：markdown, wmd, pagedown

是否有一个版本的 WMD: The Wysiwym Markdown Editor，在过去几年一直在维护？如果发现了像[这个](https://github.com/openlibrary/wmd)一样的无数不同版本，但几年后都没有更新过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:03:20.927

[PageDown](http://code.google.com/p/pagedown/)是我们在 Stack Overflow 上使用的 WMD 的分支。您标记了您的问题[pagedown](/questions/tagged/pagedown "显示标记为“pagedown”的问题")，所以我假设您找到了它。不确定是什么让您认为它没有得到维护；我们对 Stack Overflow 版本所做的任何错误修复也最终会出现 - 而且通常比推出到 Stack Overflow 的速度更快。

# arduino - 通过 Processing/Arduino 控制 Spotify

> ID：13602658
> 
> 赞同：5
> 
> 时间：2012-11-28T10:14:27.570
> 
> 标签：arduino, processing, spotify

我正在使用 Arduino 微控制器为 Spotify 制作一个有形的控制器（如 Jordi Parra 的控制器，http: [//vimeo.com/21387481#at=0 ）。](http://vimeo.com/21387481#at=0)

我有一个正在运行的处理草图，它使用来自 Arduino 的数据进行所有计算。我希望这个处理草图能够控制 Spotify 中的不同选项，例如：下一个、上一个、播放/暂停、音量增大/减小、随机播放。

现在我使用一个额外的 Arduino Leonardo 来模拟按键，而 AutoHotKey 会监听这些按键并将它们发送到 Spotify。它不能很好地工作，我只有有限的选择。

我很想在获得更多控制权的同时摆脱多余的 Arduino。我正在开发 Windows 的东西，所以 Apple 脚本不起作用（对我来说）。

是否有可能从处理中控制 Spotify 应用程序？或者是否可以使用该库在处理中创建一个新的 Spotify 应用程序？

提前谢谢了！

保罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:09:44.563

*免责声明：我在 Spotify 工作*

目前还没有跨平台的方式来控制 Spotify 应用程序。在 Linux 上，Spotify 将响应 dbus 命令，这意味着一点点黑客攻击可以发送播放/暂停/下一个/上一个。我听说也可以通过 applescript 在 Mac OSX 上控制 Spotify，但我对此不是 100% 确定的。对“control spotify mac os x applescript”的快速谷歌搜索产生了一些有趣的结果，但我不确定它们中的任何一个的最新性或相关性。至于 Windows，我不确定是否/如何控制应用程序。

否则，您最好的选择是[libspotify](https://developer.spotify.com/technologies/libspotify/)，您需要为此编写一个处理库来与之通信。根据一些快速研究，处理库似乎是用 Java 编写的，这意味着您要么需要使用诸如[jlibspotify 之](http://code.google.com/p/jlibspotify/)类的包装器，要么需要为 libspotify手动滚动您自己的 JNI 包装器。

我不确定当前 jlibspotify 的情况如何，因为它们正在包装一个相当旧版本的库。如果您进行任何 libspotify 黑客攻击，最好在 C/C++ 中使用最小的 JNI 包装器来完成，但是所有这些工作可能比您打算为这个项目做的工作要多得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:23:21.513

为什么不利用 Spotify 的键盘集成。

Arduino Leonardo 支持 USB HID 模式。因此，发送下一个、上一个、播放/暂停、音量增大/减小、随机播放的键盘键。

大多数东西都有一个绑定的全局键。我相信只有洗牌不会。您可以在您的操作系统中创建一个全局热键以绑定到应用程序的随机播放控制键。

如果您正在寻找有关每个按钮状态的状态反馈，这当然对您没有帮助。

祝你好运。

# xcode - xcode：如何将 UINavigationController 添加到与主视图控制器不同的视图控制器中？

> ID：13602659
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:14:29.723
> 
> 标签：xcode, controller, navigation

我有 3 个视图控制器：view1、view2、view3，其中 view1 是主视图。从 view1 我使用 presentModalViewController 来调用 view2。

从 view2 我想使用导航控制器来调用 view3。我怎样才能做到这一点？我可以使用 UINavigationController 创建像 appDelegate 这样的 view2Delegate 类吗？如何使用将 view2 与 view2Delegate 连接来使用 view2Delegate 的导航控制器？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:20:32.843

将 View2 呈现为模态视图控制器，如下所示。

```
View2 *view2 = [[View2 alloc] initWithNibName:@"View2" bundle:nil];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:View2];
[self presentModalViewController:navController animated:YES]; 
```

然后在View2中，添加如下代码推送View3

```
View3 *view3 = [[View3 alloc] initWithNibName:@"View3" bundle:nil];
[self.navigationController pushViewController:view3 animated:YES]; 
```

# dynamic - 计算多形刚体的惯性

> ID：13602661
> 
> 赞同：9
> 
> 时间：2012-11-28T10:14:44.517
> 
> 标签：dynamic, physics

我想以前可能有人问过这个问题，但我找不到答案。

我正在为我的游戏引擎编写一个物理库（2d，目前在 actionscript3 中，但很容易翻译成基于 C 的语言）。

我很难找到一个好的公式来计算我的游戏对象的惯性。

问题是，有很多经过验证的公式可以计算凸多边形质心周围的惯性，但我的结构略有不同：我有具有自己局部空间的游戏对象。您可以将圆形和凸多边形等凸形添加到此局部空间以形成复杂的对象。形状本身又拥有自己的局部空间。所以有三层：世界，对象和形状空间。

[使用惯性矩维基百科文章](http://en.wikipedia.org/wiki/List_of_moments_of_inertia)中提供的公式计算形状中每个单独多边形的惯性，我不会有任何问题。

或在很棒的[碰撞检测和响应文章](http://elancev.name/oliver/2D%20polygon.htm#tut7)中提供的那些。

但是我想知道如何将它与我的对象结构联系起来，我是否只是简单地添加了对象形状的所有惯性？这就是另一位作家用来[计算三角形多边形惯性的方法](http://lab.polygonal.de/?p=57)，他将三角形的所有惯性矩相加。或者还有更多？

我发现整个惯性概念很难理解，因为我没有很强的物理背景。因此，如果有人可以为我提供答案，最好是围绕给定质心的惯性背后的逻辑，我将非常感激。我实际上在我的大学学习 IT - 游戏开发，但令我非常沮丧的是，他们队伍中的老师都没有物理领域的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:59:55.047

劳伦斯，如果你停留在二维空间中，物理学会简单得多。在二维空间中，旋转用标量描述，旋转阻力（惯性矩）用标量描述，旋转是可加和可交换的。在三维空间中，事情变得多毛（非常多毛）。

当您连接两个对象时，组合对象有自己的质心。要计算这个组合物体的转动惯量，您需要将各个物体的转动惯量相加，并为每个单独的物体添加由[施泰纳平行轴定理](http://en.wikipedia.org/wiki/Parallel_axis_theorem)给出的偏移项。这个偏移项是物体的质量乘以到复合质心的距离的平方。

您需要知道转动惯量的主要原因是您可以模拟对作用在对象上的扭矩的响应。这在二维物理中相当简单。旋转行为类似于牛顿第二定律。您使用 T=Iα 代替 F=ma。（在 3D 空间中，事情再次变得更加复杂。）您需要找到外力和扭矩，求解线性加速度和旋转加速度，然后进行数值积分。

一本关于游戏物理的好的初学者书籍可能是有序的。[您可以在 gamedev 姊妹网站上](https://gamedev.stackexchange.com/questions/16362/what-is-a-good-book-on-physics-for-game-development)找到此问题中的推荐文本列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T16:41:32.477

对于线性运动，您可以添加它们。惯性与质量成正比。添加物体的质量并计算总和的惯性相当于添加它们各自的惯性。

对于旋转，它变得更加复杂，您需要找到质心。

阅读牛顿运动定律。如果您正在编写物理引擎，则需要了解它们。法律本身很短，但要理解它们需要更多的上下文，所以请到处搜索。

您应该特别尝试理解这些概念：质量、惯性、力、加速度、动量、速度、动能。它们都是相关的。

# hibernate - xml 为休眠中的索引搜索配置

> ID：13602664
> 
> 赞同：1
> 
> 时间：2012-11-28T10:15:00.633
> 
> 标签：hibernate, indexing, lucene, hibernate-search

请给我一个例子来索引数据库使用hibernate 3，lucense search和xml confiure。

目前我找不到用于注释的等效 xml 配置标签：@DocumentId。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:40:10.240

没有选项可以使用 xml 作为 Hibernate Search 中的 Lucene 注释的替代品，就像其他一些 Hibernate 搜索注释一样。

您要么必须使用注释，要么自己创建将 xml 映射到注释的功能。

如果真的有必要，修改或扩展[org.hibernate.reflection.java.EJB3OverridenAnnotationReader](http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/jboss.jboss-embeddable-ejb3/hibernate-all/1.0.0.Alpha9/org/hibernate/reflection/java/EJB3OverridenAnnotationReader.java)看起来不会太可怕。

找到了一些关于正确方法的指南： [https ://community.jboss.org/wiki/HowToImplementXMLMappingForHibernateSearch](https://community.jboss.org/wiki/HowToImplementXMLMappingForHibernateSearch)

# vba - 使用 VBA 映射 Excel 列

> ID：13602666
> 
> 赞同：1
> 
> 时间：2012-11-28T10:15:02.863
> 
> 标签：vba, excel

我目前正在将列名映射到 excel 中的变量，然后将公式中的变量用于新行，这是一个示例；

```
Dim posType as String

Cells.Find(What:="PositionType", After:=ActiveCell, LookIn:=xlFormulas, LookAt _
    :=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
    False, SearchFormat:=False).Activate

posType = ActiveCell.EntireColumn.Address(False, False)
posType = Left(posType, InStr(1, posType, ":") - 1)

Sheets("sheet1").Range("A1").Select

ActiveCell.End(xlToRight).Select

ActiveCell.Offset(0, 1).Select
Selection.FormulaR1C1 = "PTH Size"

 ' PTH SIZE
Cells.Find(What:="PTH SIZE", After:=ActiveCell, LookIn:=xlFormulas, LookAt _
    :=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
    False, SearchFormat:=False).Activate
    ActiveCell.Offset(1, 0).Select

Selection.Formula = _
  "=IF(" & posType & "2=""PTH""," & settlementDateQuantity & "2,0)"

pthSize = ActiveCell.EntireColumn.Address(False, False)
pthSize = Left(pthSize, InStr(1, pthSize, ":") - 1)
r = ActiveCell.Row

With Worksheets("sheet1").Range(pthSize & r)
    .AutoFill Destination:=Range(pthSize & r & ":" & pthSize & lastrow&)
End With 
```

我导入的文件可以按其列的顺序每天更改，但它们使用相同的名称，目前我使用 find 方法获取列，然后将字母保存到字符串并使用我的公式中的引用使用查找和映射 100 列的过程非常缓慢......

我一直在尝试提出一种更好的方法来做到这一点，但想不出更快的方法，有人可以通过建议一种可能更快的方法来帮助我吗？

我也在考虑将我的项目转移到 EXCEL DNA，有人知道它会让我的宏运行多快吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:17:44.580

您正在选择和移动工作簿，而不仅仅是做作业，这会大大减慢程序速度！！！

我进行了**一些**更改以使您朝着正确的方向前进-试试这个：（注意：它又快又脏，所以我可能在单元格引用中犯了一些错误，但它至少应该使您朝着更好的方向前进)

```
 Dim posType As String
  Dim SelectedCell As Range

  Set SelectedCell = Cells.Find(What:="PositionType", After:=ActiveCell, LookIn:=xlFormulas, LookAt _
      :=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
      False, SearchFormat:=False)

  posType = Mid(SelectedCell.Address, 2, InStr(2, SelectedCell.Address, "$") - 2)

  Set SelectedCell = Sheets("sheet1").Range("A1").End(xlToRight).Offset(0, 1)
  SelectedCell.Value = "PTH Size"

   ' PTH SIZE
  Set SelectedCell = Cells.Find(What:="PTH SIZE", After:=SelectedCell, LookIn:=xlFormulas, _
  LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
      False, SearchFormat:=False).Offset(1, 0)

  SelectedCell.Formula = "=IF(" & posType & "2=""PTH""," & settlementDateQuantity & "2,0)"

  pthSize = Mid(SelectedCell.Address, 2, InStr(2, SelectedCell.Address, "$") - 2)
  r = SelectedCell.Row

  Worksheets("sheet1").Range(pthSize & r).AutoFill Destination:=Range(pthSize & r & ":" & pthSize & lastrow&) 
```

再次注意，这仍然可以大大提高效率，但这是一种更有效的做事方式......

# c - 忽略ac文件中的stdio.h文件

> ID：13602668
> 
> 赞同：2
> 
> 时间：2012-11-28T10:15:29.477
> 
> 标签：c, linux, gcc

> **可能重复：**
> [为什么#include <stdio.h> *不需要*使用 printf()？](https://stackoverflow.com/questions/336814/why-include-stdio-h-is-not-required-to-use-printf)

我在下面给定的代码中遇到了问题。

```
int main()
{
printf("\nHello Stack Overflow\n\n") ;
return 0 ;
} 
```

在上面提到的代码中，我留下了“#include”。如果我编译并执行这段代码，输出会按预期打印。但是“#include”是C程序中最重要的东西，我忽略了它，编译仍然没有任何错误但有警告。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:17:44.557

在 C 中，未声明的函数被隐式视为返回 an`int`并接受`int`参数。

这是*不好的做法*，会咬你。例如，如果您想打印与 int 大小不同的数据，例如`double`or `float`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:19:25.323

From *man gcc*

```
 -nostdlib
       Do not use the standard system startup files or libraries when linking.  No startup files and only the libraries you specify will be
       passed to the linker.  The compiler may generate calls to "memcmp", "memset", "memcpy" and "memmove".  These entries are usually
       resolved by entries in libc.  These entry points should be supplied through some other mechanism when this option is specified. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:19:49.653

*printf* symbol is not known at compile time, but **libc** in linked **implicite** into binary... and that is how it works.

# java - 如何将我从 Dropbox 元数据调用中获得的时间戳格式化为自定义表单？

> ID：13602679
> 
> 赞同：4
> 
> 时间：2012-11-28T10:16:11.230
> 
> 标签：java, datetime, dropbox, simpledateformat, dropbox-api

我想格式化从 Dropbox API 的元数据调用中获得的日期/时间。我已经从参考资料中阅读了有关格式化日期/时间的详细信息：[Dropbox API Date format](https://www.dropbox.com/developers/reference/api#date-format) 但仍然不清楚。我使用 JAVA 并通过 JSON 检索元数据。我需要做的是

格式：2012 年 9 月 27 日星期四 13:44:09 +0000 ----to---> 27/09/2012 13:44:09

我尝试过 SimpleDateFormat，但它返回给我的东西是无法将字符串转换为日期时间格式。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:29:43.840

试试这个：

```
SimpleDateFormat df = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss Z", Locale.US);
Date date = df.parse("Thu, 27 Sep 2012 13:44:09 +0000");
System.out.println(date); 
```

当您想将日期字符串转换为`Date`对象时，您可以使用`SimpleDateFormat`. 创建对象时，指定格式代码，然后`parse()`使用`SimpleDateFormat`. 如果您指定正确的格式代码，也可以解析其他类型。

请务必在实例化时设置语言环境`SimpleDateFormat`。如果您的 VM 默认语言环境是美国，则它在没有语言环境的情况下也能正常工作。否则，像 CJK 一样，您必须指定语言环境以防止解析错误。

有关更多详细信息，请参阅以下 URL： [http ://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T10:30:42.637

应该是这样的：

（省略异常处理）

```
 //Thu, 27 Sep 2012 13:44:09 +0000
SimpleDateFormat dfDb = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z");
Date dateDb = dfDb.parse(yourStringDateFromDb);
                                               //27/09/2012 13:44:09
SimpleDateFormat toYours = new SimpleDateFormat("dd/mm/yyyy HH:mm:ss");
String yourString = toYours.format(dateDb); 
```

请参阅：[java.text.SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:01:00.407

您应该使用 RESTUtility#parseDate(String) 来解析这个值。

Dropbox API 返回一个字符串，而不是日期。

# android - 立即在新视图中显示键盘

> ID：13602683
> 
> 赞同：3
> 
> 时间：2012-11-28T10:16:27.930
> 
> 标签：android

> **可能重复：**
> [关闭/隐藏 Android 软键盘](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)

我对视图中键盘的可见性有疑问：我有一个带有自己的视图（布局）的活动，其中包含一个“新建”按钮。单击按钮会叠加在具有透明背景和 EditText 的视图（布局）上。

我的问题是：

当我点击“new”并出现新屏幕时，我想立即调出键盘，我点击那个新的，新的屏幕出现在键盘上，然后点击没有 sull'edittext 的 EditText 来调出键盘。我希望我解释了。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:21:54.193

以编程方式：

```
edittext.requestFocus(); 
```

通过xml：

```
<EditText...>
    <requestFocus />
</EditText> 
```

要么会在开始时将焦点设置在您的编辑文本上，因此会调出您的键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:22:40.983

您应该将以下行添加到 AndroidManifest.xml 中的活动中：

```
 android:windowSoftInputMode="stateAlwaysVisible" 
```

# java - SoapSerializationEnvelope 属性位置

> ID：13602684
> 
> 赞同：1
> 
> 时间：2012-11-28T10:16:28.603
> 
> 标签：java, android, soap

**我创建了一个 SoapSerializationEnvelope，但我无法在嵌套的 SoapObject 之前定义属性位置：**

```
SoapObject ajanlat = new SoapObject(NAMESPACE, "ajanlat");
SoapObject alapadatok = new SoapObject(NAMESPACE_DATA_CONTRACT, "Alapadatok");

PropertyInfo pi = new PropertyInfo();
    pi.setNamespace(NAMESPACE_DATA_CONTRACT);
    pi.setName("Azonosito");
    pi.setValue("1234"); 
ajanlat.addProperty(pi);

alapadatok.addProperty(getProperty("SzerzodeskotesOka", "2"));
ajanlat.addSoapObject(alapadatok);

final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
envelope.dotNet = true;             
envelope.setAddAdornments(false);
envelope.implicitTypes = true;      
envelope.setOutputSoapObject(ajanlat); 
```

**这是生成以下请求 XML：**

```
<n0:ajanlat xmlns:n0="http://www.signal.hu">
<n1:Alapadatok xmlns:n1="http://www.signal.hu/DataContract">
    <n1:SzerzodeskotesOka i:type="d:string">2</n1:SzerzodeskotesOka>
</n1:Alapadatok>
<n4:Azonosito i:type="d:string" xmlns:n4="http://www.signal.hu/DataContract>1234</n4:Azonosito>
</n0:ajanlat> 
```

**但我需要以下内容：**

```
<n0:ajanlat xmlns:n0="http://www.signal.hu">
<n4:Azonosito i:type="d:string" xmlns:n4="http://www.signal.hu/DataContract">1234</n4:Azonosito>
<n1:Alapadatok xmlns:n1="http://www.signal.hu/DataContract">
    <n1:SzerzodeskotesOka i:type="d:string">2</n1:SzerzodeskotesOka>
</n1:Alapadatok>
</n0:ajanlat> 
```

# android - 如何进行 9-patch，使图标始终与居中文本保持一致

> ID：13602687
> 
> 赞同：2
> 
> 时间：2012-11-28T10:16:33.740
> 
> 标签：android, button, drawable, nine-patch

![非 9 补丁图像](../Images/eb5e6ce073419e929f045d949019af1f.png)

基本上，我想要一个按钮，其中文本和图标始终位于按钮中间。Button 具有 match_parent 宽度和中心重心。我尝试使用 drawableLeft 但将图标放在按钮的最左侧而不是文本旁边。

所以我正在尝试创建 9-patch 图像，如上图所示。基本上，我希望所有文本都保留在蓝色框中，旁边有青色圆角矩形（图标）。可拉伸区域为红色。但是我无法做到，因为内容区域总是与图标重叠。

这可能与 9-patch 吗？或者我应该将 Layout 包裹在 TextView 周围并将其用作按钮？

顺便说一句，包含的图像只是为了展示我打算做什么。实际图像将是其他颜色，并且没有所有的红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:21:27.697

当您创建九个补丁图像时，您在图像的右侧和底部放置了一些黑线。这些行定义了将用于在图像中放置内容的区域。

这是一个例子：

![](../Images/9fad13e79c5ce009ba2995061daf4e0e.png)

它看起来像这样：
![](../Images/8a612b36fa533064d45dffe30fa14d31.png)

# java - 检查 Cookie 状态并限制用户不上网 appkoication - 如何？

> ID：13602689
> 
> 赞同：0
> 
> 时间：2012-11-28T10:16:42.757
> 
> 标签：java, servlets, cookies, session-cookies

众所周知，当用户登录谷歌帐户时，如果在浏览器中禁用了 cookie，谷歌会向用户提示“激活 cookie”消息并限制登录。我希望为我的网站在**java**中实现相同类型的功能。我不明白怎么做。我用谷歌搜索了这个，但没有找到太多相关信息。如果我收到一些有价值的意见，那就太好了。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:19:23.467

The only reliable test whether cookie are enabled or not is to try it out. Set a cookie on the home page of your app, redirect to another page and test if the cookie is set. This can be done both on the server side using the appropriate HTTP headers, or on the client using [JavaScript](http://www.w3schools.com/js/js_cookies.asp).

# php - PHP 变量未在 while 循环内定义

> ID：13602694
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:17:03.167
> 
> 标签：php

我有一个 PHP 变量，它的值是在我的文档开头设置的，但是当我使用我的 WHILE LOOP 时，它会变得未定义并停止工作。

任何人都可以帮助如何保持分配这个值？

我试图保持定义的变量是 $lang

```
$lang = "en";// base url

function getAccountDeliveryDetails($id){
    $query  = "SELECT * FROM tbl_user_delivery WHERE user_id = '$id'";
    $result = mysql_query($query);

    while($row = mysql_fetch_array($result)){
    $phrase =   array(  
                            'de'    =>  'Bearbeiten',
                            'en'    =>  'Edit',
                            'es'    =>  'Editar',
                            'fr'    =>  'Éditer',
                            'it'    =>  'Modifica');
                        echo $phrase[$lang];
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:18:37.413

在你需要使用全局的函数内部。函数的第一行

```
function getAccountDeliveryDetails($id){
    global $lang;

    $query  = "SELECT * FROM tbl_user_delivery WHERE user_id = '$id'";
    $result = mysql_query($query);

    while($row = mysql_fetch_array($result)){
    $phrase =   array(  
                            'de'    =>  'Bearbeiten',
                            'en'    =>  'Edit',
                            'es'    =>  'Editar',
                            'fr'    =>  'Éditer',
                            'it'    =>  'Modifica');
                        echo $phrase[$lang];
    }   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T10:18:56.270

`$lang`不在范围内`getAccountDeliveryDetails()`。与 JavaScript/Java/AS（您可能来自）不同，在函数外部定义的变量不会自动出现在函数的范围内。

假设`$lang`是独立的/全局的，您可以调用`global $lang;`函数的第一行以导入变量。但是，从长远来看，这并不是一个好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:18:59.533

使用全局访问函数上的外部变量

```
function getAccountDeliveryDetails($id){
global $lang;
$query  = "SELECT * FROM tbl_user_delivery WHERE user_id = '$id'";
$result = mysql_query($query);

while($row = mysql_fetch_array($result)){
$phrase =   array(  
                        'de'    =>  'Bearbeiten',
                        'en'    =>  'Edit',
                        'es'    =>  'Editar',
                        'fr'    =>  'Éditer',
                        'it'    =>  'Modifica');
                    echo $phrase[$lang];
 }   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T10:19:18.047

查看有关变量范围的[文章](http://php.net/manual/en/language.variables.scope.php)

```
function getAccountDeliveryDetails($id){
   global $lang;
   .. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:19:08.787

用于`$GLOBALS`访问您的全局变量，因此请替换您的以下行：

```
echo $phrase[$lang]; 
```

对于这个：

```
echo $phrase[$GLOBALS['lang']]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T10:22:02.357

你可以声明

```
global $lang 
```

在你的函数里面。

但这绝对不是一个好的编程习惯。

请参阅[PHP 变量范围](http://php.net/manual/en/language.variables.scope.php)手册条目

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T10:41:48.970

有 4 种方法可以做到这一点：

**全局变量**

如果可以的话，请远离这种方式，因为它会创建对现有超级全局的依赖，以便您的代码能够正常工作。

```
$lang = "en";// base url
function getAccountDeliveryDetails($id){
    global $lang; //extra vars can be added after a , eg global $a, $b, $c;
    ....
} 
```

**超级全球人**

与全局变量相同的问题，然而，这更加混乱，因为它使用现有的超级全局变量并创建一种不可见的依赖关系，因为不需要使用`global $varname`. 此外，PHP 编码人员不会期望您将自定义变量保存在现有的超级全局变量中，例如：

不要这样做

```
$_SERVER['my_vars']['lang'] = "eg";// base url
function getAccountDeliveryDetails($id){
    print $_SERVER['my_vars']['lang']; //ewwwww
    ....
} 
```

**功能参数**

这是传递参数的常用和最佳方式。

```
$lang = "en";// base url
function getAccountDeliveryDetails($id, $lang){
    print $lang;
    ....
} 
```

**使用（闭包）**

并不真正适用于您现有的函数（但闭包仍然被认为是函数），但这里只是为了更“完整”的答案。您可以将它们作为参数传递或使用“use”关键字将它们从本地范围中引入。

```
$lang = "en";// base url
function ($id) use ($lang) {
    print $lang;
    ....
} 
```

**结论**

可以使用参数选项。您始终可以使用 DEFAULT 值来防止破坏任何现有代码，例如：

```
function getAccountDeliveryDetails($id, $lang = 'eg'){

    $query  = "SELECT * FROM tbl_user_delivery WHERE user_id = '$id'";
    $result = mysql_query($query);

    while($row = mysql_fetch_array($result)){
    $phrase =   array(  
                            'de'    =>  'Bearbeiten',
                            'en'    =>  'Edit',
                            'es'    =>  'Editar',
                            'fr'    =>  'Éditer',
                            'it'    =>  'Modifica');
                        echo $phrase[$lang];
    }   
} 
```

所以你可以像这样调用这个函数，$lang 将默认为“en”：

```
getAccountDeliveryDetails(23); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-28T10:49:01.577

写入 `global $lang;`内部`getAccountDeliveryDetails()`函数

原因：

在用户定义的函数中，引入了本地函数范围。默认情况下，函数内部使用的任何变量都仅限于本地函数范围。例如：

```
$a = 1; /* global scope */ 

    function test()
    { 
        echo $a; /* reference to local scope variable */ 
    } 

    test(); 
```

此脚本不会产生任何输出，因为 echo 语句引用了 $a 变量的本地版本，并且尚未在此范围内为其分配值。您可能会注意到这与 C 语言有点不同，因为 C 中的全局变量自动可用于函数，除非被局部定义特别覆盖。这可能会导致一些问题，因为人们可能会无意中更改全局变量。在 PHP 中，如果要在函数中使用全局变量，则必须在函数中声明它们为全局变量。

全局关键字

首先，一个使用全局的示例：

Example #1 使用全局

```
$a = 1;
$b = 2;

    function Sum()
    {
        global $a, $b;

        $b = $a + $b;
    } 

    Sum();

echo $b; 
```

上面的脚本将输出 3。通过在函数中声明`$a`和`$b`global，对任一变量的所有引用都将引用全局版本。一个函数可以操作的全局变量的数量没有限制。

# tibco-ems - TIBCO EMS 中的队列消息存储在哪个文件中？

> ID：13602699
> 
> 赞同：1
> 
> 时间：2012-11-28T10:17:41.587
> 
> 标签：tibco-ems

就像队列名称存储在位于 ems/bin 文件夹中的 queues.conf 文件中一样。有谁知道 tibco ems 队列上的消息存储在哪里？我们可以在没有任何其他工具的情况下访问这些队列上的消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T05:16:31.643

转到 [store_name] 下的您的 stores.conf 文件，您可以找到参数 file= path; 文件前面的路径将为您提供存储消息的文件路径。你可以改变它。

# java - 处理 iBatis NestedSQLException

> ID：13602701
> 
> 赞同：3
> 
> 时间：2012-11-28T10:17:50.937
> 
> 标签：java, ibatis

我有一个 java 应用程序，它尝试在表中插入一行并`com.​ibatis.​common.​jdbc.​exception.NestedSQLException`抛出原因`com.mysql.jdbc.exceptions.MySQLIntegrityConstraintViolationException` 当我尝试为唯一键约束插入重复数据时。

我如何捕捉到那个异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:22:55.410

要找到根本原因，您可以执行以下操作：

```
try {
    //insert
} catch (NestedSQLException e) {
    Throwable t = e;
    while(t.getCause() != null) {
        t = t.getCause();
    }
    //in your situation, now t should be MySQLIntegrityConstraintViolationException 
    if (t instanceOf MySQLIntegrityConstraintViolationException) {
        //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:19:55.050

以防它帮助某人。@tibtof 是正确的，让我：

```
public int insert(MyObject myObject) {
    int recCount = -1;
    try {
        recCount = insert(myObject, MyObjectMapper.class);
    } catch (Throwable e) {
        Throwable t = e;
        while (t.getCause() != null) {
            t = t.getCause();
            if (t instanceof SQLIntegrityConstraintViolationException) {
                // get out gracefully.
                recCount = -1;
                return recCount;
            }
        }
        //Something else wicked wrong happened. 
        LogUtils.error(log, e.getMessage(), e);
        throw new RuntimeException(e.getMessage(), e);
    }
    return webGroup.getWebGroupId().intValue();
} 
```

# php - 在真实主机上运行我的脚本

> ID：13602702
> 
> 赞同：0
> 
> 时间：2012-11-28T10:17:57.060
> 
> 标签：php

我的脚本在 localhost 上运行良好，但在我的域上运行不正常。

```
<?php

    error_reporting(E_ALL);
    ini_set('display_errors', true);

    $needle = $_POST['utext'];
    $file = $_POST['ufile'];
    $new = file($file);
    $new = array('trim', $new);
    echo '#entries: ', count($new), "\n";
    $found = array(); $notfound=array();

    foreach ( $new as $check ) {
        echo "<table border='1'><tr>";
        echo '<td>processing = ', $check.'</td>';
        $a = file_get_contents($check);

        if (strpos($a,$needle)) {
            echo "<td><font color='green'> found\n</font></td>";
            $found[] = $check;
        }
        else {
            echo "<td><font color='red' face='bold'> not found\n</font></td>";
            $notfound[] = $check;
        }
    }

    echo '<tr><td>#Matches: ', count($found), "</td></tr>";
    echo "<br />";
    echo '#No-Matches: ', count($notfound), "\n";
    echo "<br />";
    echo "</tr></table>";

?> 
```

谁能告诉我我的脚本有什么问题或任何其他问题？

添加：

我收到此错误消息

> 警告：文件（Your-Backlinks.txt）[function.file]：无法打开流：第 27 行的 /home/husdemo/public_html/backlink.php 中没有这样的文件或目录警告：file_get_contents（trim）[function.file -get-contents]：无法打开流：第 35 行的 /home/husdemo/public_html/backlink.php 中没有这样的文件或目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:25:45.087

上传**Your-Backlinks.txt**到服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:20:03.117

Are you using the short-tag `<?` rather than the full `<?php` tag? If so, change it to full tags, your host might very well have short-tags disabled.

# iphone - 制作一个等于图像视图的矩形

> ID：13602705
> 
> 赞同：0
> 
> 时间：2012-11-28T10:18:08.817
> 
> 标签：iphone, objective-c, ios, xcode

我有一个图像视图。我需要将 imageView 的大小限制为白色背景 imageOnly。图像在右、左和上边距之间紧密结合。我对如何在底部进行操作感到困惑，因此图像必须仅适合白色背景。我怎么做 ？ [http://i.stack.imgur.com/ztvQe.png](http://i.stack.imgur.com/ztvQe.png)

我正在使用的代码

```
 _imageView = [[UIImageView alloc] initWithFrame:CGRectMake(25, 240,175,205)]; 
```

框架宽高为205*205

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:36:35.920

您可以将 imageView 添加为具有白色背景的视图的子视图。

```
UIView *whiteBackgroundView = [[UIView alloc] initWithFrame:CGRectMake(25,240,205,205)];
CGSize whiteSize = whiteBackgroundView.frame.size;
_imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0,size.width,size.height)];
[whiteBackgroundView addSubview:_imageView]; 
```

在示例中，您的 imageView 将完全适合白色背景视图的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:41:44.570

试试这个

```
UIView *productView  = [[UIView alloc]initWithFrame:CGRectMake(25, 240,225,225)];
    _imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10,205,205)];
    _imageView.clipsToBounds =YES;
    [productView addSubview:_imageView];
    [self.view addSubview:ImageBackview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:23:40.383

只需创建一个视图并在其中添加此图像，例如使用下面的代码..

```
 UIView *ImageBackview = [[UIView alloc]initWithFrame:CGRectMake(25, 240,225,225)];
_imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10,205,205)];
[ImageBackview addSubview:_imageView];
[self.view addSubview:ImageBackview]; 
```

# python - 按结果字符数过滤 SqlAlchemy 列值

> ID：13602709
> 
> 赞同：0
> 
> 时间：2012-11-28T10:18:16.937
> 
> 标签：python, sqlalchemy

如何按结果字符数过滤 SqlAlchemy 列，

这是我正在研究的一种实现，

查询 = query.filter(Take_Last_7_Characters(column_1) == '0321334')

其中“Take_Last_7_Characters”从 column_1 的结果值中获取最后 7 个字符

那么如何实现 Take_Last_7_Characters(column_1) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:27:07.160

使用`sqlalchemy.sql.expression.func`, 生成 SQL 函数。

[查看更多信息](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:13:16.673

请`func`按照@tuxuday 的指示使用 生成SQL 函数。
请注意，代码依赖于 RDBMS。下面的代码运行 for `SQLite`，它提供`SUBSTR`和`LENGTH`功能。您的实际数据库可能有不同的名称（`LEN, SUSBSTRING, LEFT, RIGHT`等）。

```
qry = session.query(Test)
qry = qry.filter(func.SUBST(Test.column_1, func.LENGTH(Test.column_1) - 6, 7) == '0321334') 
```

# jquery - 带有 WebService 状态 500 的 Jquery AJAX

> ID：13602710
> 
> 赞同：2
> 
> 时间：2012-11-28T10:18:18.537
> 
> 标签：jquery, ajax

我被这个愚蠢的问题所困扰，试图让 Jason 调用以从数据库加载数据。它给了我一个愚蠢的错误“加载资源失败：服务器响应状态为 500（内部服务器错误）”http://localhost:4695/SAW.WEB.ONLINE/AutoComplete.asmx/GetMapInfoDiv?{'conType ':'2','conID':'5'}"

weservice 和功能工作得很好。我对它们进行了测试，Web 服务的 url 是正确的，我用于 ajax 自动完成，它工作正常，我什至在同一页面上使用了 ajax 自动完成。

这是我的网络服务方法：

```
[WebMethod]
public string GetMapInfoDiv(string conType, string conID)
{
    DBLink objResult = new DBLink();
    objResult = GenericContent.GetMapInfoDiv((MapMarkerType)
     Convert.ToInt32(conType),      Convert.ToInt32(conID));
    return Convert.ToString(objResult.dataSet.Tables[0].Rows[0][0]);
} 
```

这是我的javascript调用。

```
 function LoadInfoDivByType(ContentType, ContentID) {

    var html;
    $.ajax(
 {
     Type: "POST",
     contentType: "application/json; charset=utf-8",

     url: "../AutoComplete.asmx/GetMapInfoDiv",
     data: JSON.stringify({ conType: ContentType, conID: ContentID }), //{conType:"'" +ContentType+ "'",conID:"'" + ContentID + "'"}, //
     //data: "{'conType':'" + '2' + "','conID':'3'}",
     dataType: "json",
     success: function (msg) {
         html = msg.d;
         alert(html);
     }
 });

} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:26:07.347

我想你忘了这样写`ScriptMethod`

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static string Result(string controlName, int sleep)
{ 
```

也在 jquery 部分删除`JSON.stringify`功能

```
data: { "conType": ContentType, "conID" : ContentID } 
```

Check : [http://www.aspsnippets.com/Articles/Make-AJAX-Call-to-ASP.Net-Server-Side-Web-service-method-using-jQuery.aspx](http://www.aspsnippets.com/Articles/Make-AJAX-Call-to-ASP.Net-Server-Side-Web-service-method-using-jQuery.aspx)

# windows - 环境变量是关联的吗？

> ID：13602711
> 
> 赞同：2
> 
> 时间：2012-11-28T10:18:19.583
> 
> 标签：windows, variables, batch-file, environment

在 Windows 7 中，如果您在命令行中执行以下操作：

```
X=Debug

Y=ABC\%X% 
```

然后...

```
X=Release

Y=? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:49:07.813

在 Windows 上：

```
set X=Debug
set Y=ABC\%X%
X=Release
echo %Y% 
```

印刷：

```
ABC\DEBUG' 
```

这是发生的事情，一步一步：

```
set X=Debug 
```

环境变量`X`设置为值“调试”

```
set Y=ABC\%X% 
```

变量扩展将命令转换为：

```
set Y=ABC\Debug 
```

并执行此命令。`X`和之间不保留任何关联`Y`。

```
set X=Release 
```

对没有影响`Y`

```
echo %Y% 
```

显示：

```
ABC\Debug 
```

# xmpp - PubSub 中发布者的存在信息

> ID：13602716
> 
> 赞同：1
> 
> 时间：2012-11-28T10:18:32.817
> 
> 标签：xmpp, publish-subscribe, ejabberd, strophe

**设置：** 我设置了一个 pubsub 服务，其中发布者定期发布地理位置数据。

订阅者接收发布者的位置数据。

订阅者不存在订阅，从某种意义上说，订阅者不在发布者名册中。

**问题：** 订阅者需要知道发布者的存在状态。

订阅者有没有办法知道发布者的存在状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:01:49.533

不，因为订阅者和发布者之间没有直接关系，这是任何 pubsub 设计的典型特征。要做到这一点，订阅者需要知道发布者是谁，这不是一个好的通用发布订阅设计。

听起来您真正想要的是[PEP（个人事件协议）](http://xmpp.org/extensions/xep-0163.html)，它是 pubsub 的一个子集。在这种情况下，订阅者正在订阅属于他们感兴趣的实际用户的节点。如果他们订阅了用户的存在，他们将自动访问用户节点。

**注意**：我最近发现新版本的规范确实支持标识发布者的属性。因此，让他们的存在变得可行，但您仍然必须订阅或查询它。

# c# - 无法将图像上传到 SharePoint 列表

> ID：13602717
> 
> 赞同：8
> 
> 时间：2012-11-28T10:18:32.983
> 
> 标签：c#, sharepoint, sharepoint-2010

我正在使用 Visual WebPart，我想将图像从 FileUpload 控件上传到 SharePoint 列表。这是我正在使用的代码，但我无法让它工作，（标题、prodnum、颜色等都在工作，但不是图像）。我还安装了[SparQube](https://www.sparqube.com/SharePoint-Picture-Column/)。

这是我的列表视图： [![图片](../Images/30715acec66f02a1603edcc97f002ac3.png)](https://i.stack.imgur.com/6IjsL.jpg) 。

```
protected void Button_Save_Click(object sender, EventArgs e)
{
    SPSite currentSite = SPContext.Current.Site;
    SPList myList = currentSite.RootWeb.Lists.TryGetList("SharePointDatabase");

    try
    {
        if (myList != null && FileUpload_Pic.PostedFile != null && FileUpload_Pic.HasFile)
        {
            SPListItem listItem = myList.Items.Add();

            listItem["Title"] = TextBox_Name.Text;
            listItem["ProductNumber"] = TextBox_ProdNum.Text;
            listItem["Color"] = TextBox_Color.Text;
            listItem["ListPrice"] = TextBox_ListPrice.Text;
            listItem["MoreInformation"] = TextBox_MoreInfo.Text;

            string fileName = Path.GetFileName(FileUpload_Pic.PostedFile.FileName);
            listItem["Image"] = fileName;

            listItem.Update();                                            

            TextBox_Search.Text = string.Empty;
            TextBox_Name.Text = string.Empty;
            TextBox_MoreInfo.Text = string.Empty;
            TextBox_ProdNum.Text = string.Empty;
            TextBox_Color.Text = string.Empty;
            TextBox_ListPrice.Text = string.Empty;

            Label_Exception.Text = "Saved to Database list.";

            Dispose();
        }
    }
    catch (Exception x)
    {
        Label_Exception.Text = x.Message;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:13:47.327

您确定 SPList 已启用附件上传吗？

尽管列表无法容纳项目附件，但我已经体验到正常的功能区按钮没有变灰。

```
SPList list = new SPList(); // Sample
list.EnableAttachments = false; //set
bool attachmentsAllowed = list.EnableAttachments; //get 
```

“图像”是什么类型的字段？不是附件文件夹...

保存图像的另一种方法是将其上传到库并使用“超链接”字段。

将此用作帮助：[http ://www.sharepoint-tips.com/2007/10/code-practices-gettingsetting-values.html](http://www.sharepoint-tips.com/2007/10/code-practices-gettingsetting-values.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:22:10.693

您可以使用以下方法将文件作为流直接从文件上传添加到特定网站，然后将文件路径添加到列表中，如下例所示，

```
SPContext.Current.Web.Files.Add(String.Concat(SPContext.Current.Web.Site.RootWeb.Url, path), stream, true); 
```

path 是图像的相对路径。*在用户案例文件名中。* 流可以`FileUpload.FileContent`在文件上传控制中使用

然后将此路径添加到列表中，如下所示。

```
listItem["Image"] = path; 
```

*这适用于所有浏览器。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:12:48.873

看看这个问题：[https ://sharepoint.stackexchange.com/questions/49481/exception-when-adding-attachment/49485](https://sharepoint.stackexchange.com/questions/49481/exception-when-adding-attachment/49485)

当您在标准编辑/添加页面中使用 FileUpload 控件时，会出现一些问题。

# java - 如何创建使用另一个库的“水蛭”Tomcat 应用程序

> ID：13602729
> 
> 赞同：1
> 
> 时间：2012-11-28T10:18:59.683
> 
> 标签：java, jakarta-ee, tomcat, classloader

我熟悉Tomcat的传统类加载系统：

```
 Bootstrap
        |
     System
        |
     Common
     /     \
Webapp1   Webapp2 ... 
```

我正在为部署在 Tomcat 6 上的现有 Web 应用程序编写一个测试器 Web 应用程序。理想情况下，使用上下文参数指示要测试的应用程序的上下文路径（我们称之为主题），然后它将直接加载图书馆在它自己之前的主题。所以我希望得到的树是（不是胆小的人，你已经被警告过）：

```
 Bootstrap
        |
     System
        |
     Common
     /     \
Subject   Webapp2 ...
   |
Tester 
```

我可能可以通过复制库获得相同的效果，但这并不是一个优雅的解决方案，因为这需要主题和测试者都已经由 Tomcat 从它们的 war 文件中扩展。

我的问题是：假设 Subject 已经存在并且它独立于 Tester 工作，有没有一种方法可以通过简单地在 webapp 目录中添加 war 文件并启动 Tomcat 来完成（理想情况下不修改 Tomcat 配置，但可以理解的是可能不可能）？我的后续问题是，我应该注意这种技术（安全性或其他方面）是否有任何缺点？

感谢任何反馈，因为我正在尝试确定这是否是一个可行的想法，或者我是否正在创造弗兰肯斯坦的怪物。

**注意：** *我可能应该补充一点，Subject 不仅仅是任何通用应用程序，而是我们公司实施的特定应用程序，因此虽然 Subject 应该独立于 Tester 工作，但这并不意味着我不能修改 Subject 如果它有助于这项工作.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:28:12.560

我认为你正在创造一个弗兰肯斯坦的怪物。您可以通过实现自定义类加载器来归档它，但这至少需要了解tomcat 提取*主题的位置。**除此之外，在重新部署主题*时，您很可能会遇到问题。您希望进行什么样的测试？对于您计划做的事情，也许有一种更简单和更强大的方法。

# file-upload - 更改 Telerik Upload 组件的默认路径

> ID：13602732
> 
> 赞同：1
> 
> 时间：2012-11-28T10:19:09.520
> 
> 标签：file-upload, path, telerik, telerik-mvc

**目标：**

在我的 Telerik Upload 组件上默认设置不同的路径。

**问题：**

路径应该类似于“\\Server\Folder”，并且属性 ScriptFilePath 需要以 ~/. 我正在寻找telerik教程，但对此没有帮助。

**代码：**查看 C# MVC3

```
 @(Html.Telerik().Upload()

                               .Name("attach")
                               .Multiple(false)
                               **.ScriptFilesPath("~/")**                               
                               .Async(async => async
                                                   .Save(Actions.FileLoader_GetFile, Controllers.FileLoader)
                                                   .Remove(Actions.FileLoader_Remove, Controllers.FileLoader)
                                                   .AutoUpload(true)

                               )) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:24:10.267

根据Teklerik的说法，这是不可能的。

> 无法为`<input type='file' />`html 元素设置“默认”目录，这是浏览器的限制，无法解决。

我认为这个限制是有道理的，因为不能保证设置为默认上传的文件夹将存在于给定的客户端上。

# android - ListView 和 cursorAdapter 给出空指针异常

> ID：13602733
> 
> 赞同：1
> 
> 时间：2012-11-28T10:19:11.437
> 
> 标签：android, eclipse, android-listview, android-cursoradapter

我想将数据从我的数据库*DatabaseBon*传递到`ListView`. 我想在不使用`ListViewActivity`.

我发现我应该使用`cursorAdapter`它，但是还有其他方法（没有`ListViewActivity`）吗？我实现`CursorAdapter`了但得到了一个空指针异常。

我的活动看起来像：

```
 public class BlackNumbersBlockDb extends Activity {
        String TAG;
       @Override
   protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.blocknumbersdb);
    @SuppressWarnings("unused")
    Button imBT= (Button)findViewById(R.id.importBL);
    DataBaseBON info= new DataBaseBON(this);
    info.open();
    Cursor cursor=info.getcursor();
    startManagingCursor(cursor);
    ContactCursorAdapter adapter = new ContactCursorAdapter(null, cursor);
    ListView contactLV = (ListView) findViewById(R.id.listviewblDB);
    contactLV.setAdapter(adapter);
    info.close();
        imBT.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i= new Intent ("android.intent.action.IMPORTM");
            startActivity(i);   
        }
    }); 
```

我的光标适配器看起来像：

```
 import vahid.engineer.com.DataBaseBON
            import android.content.Context;
            import android.database.Cursor;
            import android.view.LayoutInflater;
    public class ContactCursorAdapter extends CursorAdapter  {
  public ContactCursorAdapter(Context context, Cursor c) {  
    super(context, c);
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    TextView name = (TextView)view.findViewById(R.id.blacklistDB1);
    name.setText(cursor.getString(cursor.getColumnIndex(DataBaseBON.N_NAME)));
    TextView phone = (TextView)view.findViewById(R.id.blacklistDB2); 
    phone.setText(cursor.getString(cursor.getColumnIndex(DataBaseBON.KEY_NUMBER)));}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View v = inflater.inflate(R.layout.lv, parent, false);
    bindView(v, context, cursor);
    return v; 
```

我的 Xml 文件（是否阻止）看起来像

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

  <ListView
      android:id="@+id/listviewblDB"
      android:layout_width="match_parent"
      android:layout_height="499dp"
      android:layout_weight="0.72" >
  </ListView>

  <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="129dp"
    android:gravity="bottom|center_horizontal|fill|top"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/importBL"
        android:layout_width="100dp"
        android:layout_height="90dp"
        android:layout_marginLeft="10sp"
        android:layout_marginTop="20sp"
        android:ems="10"
        android:text="Import"
        android:textSize="20sp"/>

    </LinearLayout> 
```

我的 xml 文件`LV`如下所示：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

  <TextView
          android:id="@+id/blacklistDB1"
          android:layout_width="33dp"
          android:layout_height="wrap_content"
          android:text="Large Text"
          />
   <TextView
        android:id="@+id/blacklistDB2"
        android:layout_width="19dp"
        android:layout_height="wrap_content"
        android:text="Large Text"
        />
   </LinearLayout> 
```

我的错误看起来像

```
 FATAL EXCEPTION: main
    java.lang.NullPointerException
at android.view.LayoutInflater.from(LayoutInflater.java:171)
at vahid.engineer.com.ContactCursorAdapter.newView
at android.widget.CursorAdapter.getView(CursorAdapter.java:182)
at android.widget.AbsListView.obtainView(AbsListView.java:1315)
at android.widget.ListView.makeAndAddView(ListView.java:1727)
    at android.widget.ListView.fillDown(ListView.java:652)
at android.widget.ListView.fillFromTop(ListView.java:709)
at android.widget.ListView.layoutChildren(ListView.java:1580)
at android.widget.AbsListView.onLayout(AbsListView.java:1147)
at android.view.View.layout(View.java:7035)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:
at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
at android.view.View.layout(View.java:7035) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:26:57.177

```
ContactCursorAdapter adapter = new ContactCursorAdapter(null, cursor); 
```

看起来它与它有关。该参数需要您活动的上下文，而不是`null`. 您在数据库实例化方面做得很好。以下应该工作。

```
ContactCursorAdapter adapter = new ContactCursorAdapter(BlackNumbersBlockDb.this, cursor); 
```

# javascript - Dynamicaly change data in store with ExtJs 3.4

> ID：13602738
> 
> 赞同：0
> 
> 时间：2012-11-28T10:19:17.907
> 
> 标签：javascript, extjs

I have a store and dynamically change its URL.

```
store_form.proxy.conn.url=url;
store_form.load();
tabs.activate(1); 
```

So if I change the URL, data in the store are going to change.

This store I load into `FromPanel`, which is located in a tab:

```
listeners: {
    'activate' :  function(zemform,records,options) {
        console.log("store:"+store_form.getAt(0));
        this.loaded = true;
        var record = store_form.getAt(0);
        zemform.getForm().loadRecord(record);
        //store_form.reload();
    }
}, 
```

But when the tab is opened, I see previous data. New data show only when I click on another tab and then click back. What's wrong with it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:54:28.980

我不知道我是否正确理解您的问题，但我认为问题出在`activate`处理程序上。它只会在激活选项卡时触发。您写道，选项卡已经打开，因此它也被激活，`activate`在这种情况下不会触发事件。

取而代之的是，您应该调用`loadRecord(record)`存储`load`处理程序：[http ://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-event-load](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-event-load)

# android - set edit text programmatically and locate into specific location -- android

> ID：13602739
> 
> 赞同：0
> 
> 时间：2012-11-28T10:19:18.363
> 
> 标签：android, android-layout

I am pretty new to android UI concepts, i can easily create the edit text thorugh UI xml, and i can place the editText whereever i want in the screen. But at the same time is it possible to locate the edit text in specific given location throgh programmatically.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:28:58.737

这是通过Java代码生成edittext的代码

```
EditText edTxt = new EditText(this);

        edTxt.setInputType(InputType.TYPE_CLASS_TEXT);
        edTxt.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT));
        edTxt.setHint("Enter data");
        myLayout.addView(edTxt); 
```

# iphone - Creating NSLayoutConstraints in code

> ID：13602744
> 
> 赞同：1
> 
> 时间：2012-11-28T10:19:26.127
> 
> 标签：iphone, ios, nslayoutconstraint

This is my first attempt at using constraints, so please excuse the elementary question.

I want to be able to set a series of constraints so that a subView is either less than 75% of the width of my view OR the width of my view. So if my subView's width is greater than 75% of the view's width then set it to be the full width. I want to do this to ensure the subView displays well on an iPhone and iPad.

Is this possible using constraints? I have set up two constraints, but how do I tell the constraints system which one to choose based on the width of my view, as I am not sure that this can be solved just using priorities?

```
// Ensure it's width is either the less than 3 quarters of the page width or the full page width (including the gutter margins)
NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:view attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationLessThanOrEqual toItem:self attribute:NSLayoutAttributeWidth multiplier:0.75 constant:0];
[self.constraints addObject:constraint];

constraint = [NSLayoutConstraint constraintWithItem:view attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:self attribute:NSLayoutAttributeWidth multiplier:1.0 constant:0];
[self.constraints addObject:constraint];

// Add the constraints to the page
[self addConstraints:self.constraints]; 
```

Any help greatly appreciated as getting rather bogged down.

Dave

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:13:34.590

有什么理由不能只根据平台应用适当的约束？

```
NSLayoutConstraint *constraint;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
  constraint = [NSLayoutConstraint constraintWithItem:view attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationLessThanOrEqual toItem:self attribute:NSLayoutAttributeWidth multiplier:0.75 constant:0];
}
else {
  constraint = [NSLayoutConstraint constraintWithItem:view attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:self attribute:NSLayoutAttributeWidth multiplier:1.0 constant:0];
}
[self addConstraint:constraint]; 
```

另外，根据您的评论，不清楚您是否尝试过使用优先级……那行得通吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:40:42.097

如前所述，在 MacOS 10.8 版本中，自动布局似乎还不能处理这个问题。因此我建议在标准代码中实现它。

# python-3.x - Python - pySerials inWaiting() always return 0

> ID：13602745
> 
> 赞同：4
> 
> 时间：2012-11-28T10:19:27.000
> 
> 标签：python-3.x, pyserial, raspberry-pi

I'm trying to make a small program that receives messages from the serial port, and doing it periodically. Right now I'm not saving anything, I'm just trying to see if I get anything at all, so I tried this code:

```
def ReceiveRS():
   global ser
   while ser.inWaiting() > 0:
      print(ser.read(1)) 
```

ser is the serial port, which is correctly initialized, as it has worked before and I can send stuff. After trying some different things I have found out that inWaiting() never seems to return anything but 0\. Anyone have any ideas as to why and how to fix it?

Oh, and I'm using Python 3.2.3, with pySerial on a Raspberry PI.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:54:16.683

这很尴尬。我在后台运行了另一个旧版本（在自动启动时，所以我不记得它正在运行），它占用了所有接收到的字节，而没有为新脚本留下任何字节。那么，有人知道如何删除问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-25T03:46:41.830

尝试这个

```
while (True):
      if ser.inWaiting() > 0:
          print(ser.read(1)) 
```

现在应该按预期工作。

# r - 使用路径的弯曲矢量图形

> ID：13602746
> 
> 赞同：7
> 
> 时间：2012-11-28T10:19:35.883
> 
> 标签：r, graphics

在 R 中绘制曲线形状时，它们通常由一组短直线段（带有圆形线端）组成。结果对人眼来说看起来不错，但这样做有点迂回，因为您需要对曲线进行插值以获得段的坐标。它还会产生不必要的大文件，尽管这不是一个大问题，除非绘图包含大量曲线。

有没有一种方法可以使用由锚点和枢轴点组成的路径以正确的方式创建弯曲的矢量形状，如下图所示？

![在此处输入图像描述](../Images/a3c1aee1b3df752bc1cdb0add8b57f90.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:42:02.997

简短的回答：“不”。

长答案：R 不知道您的输出设备是否支持从公式描述曲线 - 例如 PDF 和 PostScript 可以（我认为）有弧和曲线，但 R 不知道它是绘制到其中一个还是位图设备。

因此，当您想在 R 图上绘制弧线时，它不能：

```
0 0 moveto
25 25 pi arcto 
```

（或任何 PostScript）来描述可以无限平滑缩放的弧线。它必须将弧线渲染成段。

如果您在`help(bezierGrob)`PDF 设备中运行示例并放大，您可以看到片段（放大到 500%）。

# c# - Is there a boost lexical_cast equivalent of C# TryParse?

> ID：13602749
> 
> 赞同：5
> 
> 时间：2012-11-28T10:19:45.540
> 
> 标签：c#, c++, exception, boost

Intro (from Eric Lippert Blog) :

> Vexing exceptions are the result of unfortunate design decisions. Vexing exceptions are thrown in a completely non-exceptional circumstance, and therefore must be caught and handled all the time.
> 
> The classic example of a vexing exception is Int32.Parse, which throws if you give it a string that cannot be parsed as an integer. But the 99% use case for this method is transforming strings input by the user, which could be any old thing, and therefore it is in no way exceptional for the parse to fail. Worse, there is no way for the caller to determine ahead of time whether their argument is bad without implementing the entire method themselves, in which case they wouldn't need to be calling it in the first place.

Now the important part:

> This unfortunate design decision was so vexing that of course the frameworks team implemented TryParse shortly thereafter which does the right thing.

From MSDN Int32.TryParse:

> Return Value Type: System.Boolean true if s was converted successfully; otherwise, false.

So colleague recenly was working on some small bit of code that required checking if a string is a number so after thinking about it and realizing there is no good C++ solution(basically it is a for__each/find_if or boost:lexical_cast try catch) I thought how nice it would be to have `is_convertible` or something from boost?

Ofc i can wrap boost `lexical_cast` and return true at the end of try block and return false at the end of catch block but I prefer existing practice :) solutions.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:05:42.673

*> 所以同事最近正在编写一些需要检查字符串是否为数字的代码，所以在考虑并意识到没有好的 C++ 解决方案之后*

在 C++11 中，你有`std::stol`and/or `std::stod`，它可以满足你的需要。

*更新* 如果您不想使用异常，那么`strtol(str, &endp)`将进行转换。

您可以`str == endp`在通话后检查是否；如果它们相同，则无法进行转换（因为 endp 将指向字符串未转换部分的开头）

像这样：

```
strtol(str, &endp);
if (endp==str) { /* no conversion occurred */ } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-23T15:02:50.763

如果你可以使用 boost，那么你可以使用[`boost::conversion::try_lexical_convert`](http://www.boost.org/doc/libs/1_61_0/doc/html/boost_lexical_cast/synopsis.html#boost_lexical_cast.synopsis.try_lexical_convert)：

```
#include <boost/lexical_cast/try_lexical_convert.hpp>

std::string str("1.2");
double res;
if(boost::conversion::try_lexical_convert<double>(str, res)){
   //everything normal
}
else{
   //we got a problem
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T10:33:20.680

不是真的，老实说，据我所知，没有`try_lexical_cast`，但你可以做两件事。

Own 是使用流并测试提取是否成功，而不是在大多数情况下在`lexical_cast`内部使用流：

```
 std::string str="56.7";
 std::istringstream ss(str);
 double d;
 if(ss >> d) {
     //passed
 }
 else //failed 
```

或者当然正如你提到的，你可以包装`lexical_cast`

# aes - How to post AES256 NSData to server using MKNetworKit?

> ID：13602750
> 
> 赞同：0
> 
> 时间：2012-11-28T10:19:43.057
> 
> 标签：aes, mknetworkkit

The username has been encrypted via [RNCryptor](https://github.com/rnapier/RNCryptor) and I would like to send the encrypted username to server using the [MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit). The encrypted username is in NSData format. But the MKNetworkKit seems not supporting the formats for the post body except NSDictionary. So I follow the suggestion of using setCustomPostDataEncodingHandler to post the encrypted username. But it crashed. Please help review if something wrong in my below codes.

```
NSMutableDictionary * postDataDict = [NSMutableDictionary dictionaryWithObject:username forKey:@"username"];

MKNetworkOperation *op = [self operationWithPath:@"URLtomyserver/login.php"
                                          params:postDataDict
                                           httpMethod:@"POST"];

[op setCustomPostDataEncodingHandler:^NSString *(NSDictionary *postDataDict) {
    NSData * username= [postDataDict objectForKey:@"username"];

    NSString * postString = [[NSString alloc] initWithData:username encoding:NSUTF8StringEncoding];
    return postString

} forType:@"application/json"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T04:45:32.980

尝试这个：

```
MKNetworkOperation *op = [self operationWithPath:INIT_URL params:body httpMethod:@"POST" ssl:YES];
[op setPostDataEncoding:MKNKPostDataEncodingTypeJSON];//This is important
[op addCompletionHandler:^(MKNetworkOperation *completedOperation) 
```

# git - git - checkout single file under bare repository

> ID：13602751
> 
> 赞同：14
> 
> 时间：2012-11-28T10:19:46.643
> 
> 标签：git, sh, githooks

On the server I have bare repository which is origin for development process and to simplify deployment to QA environment.

So in `post-receive` it simply does

```
GIT_WORK_TREE=/home/dev git checkout -f 
```

But as product gets more complicated there are some other things should be happening. So now it is handled by `deploy.sh` script which is also tracked by repository. So what I want to do is to be able instead of checking out whole repository is to checkout only `deploy.sh` and run it. I thought something like that would work:

```
SOURCE_PATH="/home/dev"
GIT_WORK_TREE=$SOURCE_PATH git checkout deploy.sh
$SOURCE_PATH"/deploy.sh" 
```

But it does not work giving error:

```
error: pathspec 'deploy.sh' did not match any file(s) known to git. 
```

What am I doing wrong? Or is it just impossible to do this way?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T10:35:25.773

正如我在“[只从 git 检出一个文件](https://stackoverflow.com/a/2467629/6309)”中解释的那样，如果不先克隆或获取，就不能只检出一个文件。

但是你[`git show`是那个文件](https://stackoverflow.com/questions/610208/how-to-retrieve-a-single-file-from-specific-revision-in-git)，这意味着你可以将它的内容转储到一个`/another/path./deploy.sh`文件中，然后执行那个文件。

```
git-show HEAD:full/repo/path/to/deploy.sh > /another/path./deploy.sh
/another/path./deploy.sh 
```

由于您从 post-receive 挂钩执行该操作，因此[`git-show`](http://git-scm.com/docs/git-show)将显示`deploy.sh`文件的最新版本。

* * *

另一种选择是尝试

```
 GIT_WORK_TREE=$SOURCE_PATH git checkout -- path/to/deploy.sh 
```

并且只签出该文件，直接在您的工作树中。

' `--`' 帮助 git 命令理解它是一个文件，而不是另一个参数，如标签或命名分支。

从[OP AlexKey](https://stackoverflow.com/users/1297136/alexkey)的测试来看，它要求工作树至少已被（完全）检出一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-05T03:48:45.933

我知道这是ooooooooold，但我找到了我自己的这个功能的用例，并在将一些解决方案组合成一个简单的单行代码之前环顾了一段时间以寻找更好的解决方案：

```
GIT_WORK_TREE=/home/dev git checkout $branch -- deploy.sh 
```

就我而言，我只是希望能够“窥视”我的一些裸存储库，而无需打开整个存储库（其中一些很大）。人们在谈论稀疏结账和其他类似的事情，但我只需要一次性功能。例如，要查看“文档/健康记录”文件夹，我会执行以下操作：

```
GIT_WORK_TREE=/tmp/my-files git checkout master -- "Documents/Health Records" 
```

瞧！它确实出现了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T21:48:28.167

这种**git show**或类似**的 git cat-file blob**方法对于文本文件或多或少都可以正常工作，但对于二进制文件却没有希望。

更好的方法可以可靠地用于任何类型的文件，甚至可以检查整个文件夹：

```
git archive mybranch folder/file.txt --output result.tar 
```

它创建一个包含所需内容的 tar 存档，正是位于源代码控制中的文件。与二进制文件完美配合。

您唯一需要做的就是提取此 tar 文件

```
tar -xf result.tar 
```

有关更多详细信息，请参阅我的[博文](http://mnaoumov.wordpress.com/2013/02/27/git-checkout-on-bare-repo/)

# android - XML Empty tags using Sax parsing

> ID：13602752
> 
> 赞同：0
> 
> 时间：2012-11-28T10:19:48.380
> 
> 标签：android, xml, listview, xml-parsing, sax

how to find or separate the empty xml strings in SAX Parsing.

```
 <Table diffgr:id="Table142" msdata:rowOrder="141">
    <TeamIDGiven>7</TeamIDGiven>
    <City>Wolfpack</City>
    <TeamName>North Carolina State</TeamName>
    </Table>

    <Table diffgr:id="Table143" msdata:rowOrder="142">
    <TeamIDGiven>308</TeamIDGiven>
    **<City/>**
    <TeamName>North Dakota</TeamName>

    </Table> 

   <Table diffgr:id="Table144" msdata:rowOrder="143">
   <TeamIDGiven>309</TeamIDGiven>
   <City>Bison</City>
   <TeamName>North Dakota State</TeamName>
  </Table> 
```

Look at the above Xml data.In Table2, City is empty tag. due to this i am getting next row city name in this row. For Example, I am getting 3rd table data into second table. i.e "Bison" is displaying in the place of empty data. My question is how to separate or find the empty tag data in sax parsing? my code is [here](https://stackoverflow.com/questions/13578630/listview-data-spliting-into-another-row-after-sax-parsing/13591630#13591630).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:09:23.957

嗨，请试试这个，它工作正常。

我已将您的 XML 文件放入**RAW 文件夹**并命名为**“abc.xml”**

```
<?xml version="1.0" encoding="utf-8"?>
<Tables><Table id="Table142" rowOrder="141">
    <TeamIDGiven>7</TeamIDGiven>
    <City>Wolfpack</City>
    <TeamName>North Carolina State</TeamName>
    </Table>

    <Table id="Table143" rowOrder="142">
    <TeamIDGiven>308</TeamIDGiven>
    <City/>
    <TeamName>North Dakota</TeamName>

    </Table> 

   <Table id="Table144" rowOrder="143">
   <TeamIDGiven>309</TeamIDGiven>
   <City>Bison</City>
   <TeamName>North Dakota State</TeamName>
  </Table></Tables> 
```

* * *

如下创建公共类 Bean

```
public class Table_Beans {
    private String TeamIDGiven;
    private String City;
    private String TeamName;

    public String getTeamIDGiven() {
        return TeamIDGiven;
    }

    public void setTeamIDGiven(String teamIDGiven) {
        TeamIDGiven = teamIDGiven;
    }

    public String getCity() {
        return City;
    }

    public void setCity(String city) {
        City = city;
    }

    public String getTeamName() {
        return TeamName;
    }

    public void setTeamName(String teamName) {
        TeamName = teamName;
    }

} 
```

* * *

XMLhandler 类如下。

```
public class TestXMLhandler extends DefaultHandler {

    private StringBuffer buffer = new StringBuffer();
    private ArrayList<Table_Beans> data_list;
    private Table_Beans data;

    public ArrayList<Table_Beans> getData() {
        return data_list;
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        buffer.setLength(0);
        if (localName.equals("Tables")) 
            data_list = new ArrayList<Table_Beans>();
        else if (localName.equals("Table")) 
            data = new Table_Beans();
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        if (localName.equalsIgnoreCase("TeamIDGiven"))
            data.setTeamIDGiven(buffer.toString().trim());
        else if (localName.equalsIgnoreCase("City"))
            data.setCity(buffer.toString().trim());
        else if (localName.equalsIgnoreCase("TeamName"))
            data.setTeamName(buffer.toString().trim());
        else if (localName.equalsIgnoreCase("Table"))
            data_list.add(data);
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        buffer.append(ch, start, length);
    }

} 
```

* * *

下面的主要活动。

```
public class Test1 extends Activity {

    private ArrayList<Table_Beans> data1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        getData();
    }

    private void getData() {

        try {
            InputSource inSource = new InputSource(getResources()
                    .openRawResource(R.raw.abc));

            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            TestXMLhandler xmlhandler1 = new TestXMLhandler();
            xr.setContentHandler(xmlhandler1);
            xr.parse(inSource);

            data1 = xmlhandler1.getData();

        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }

    }

} 
```

现在检查**data1**我发现 City 是空白的。所有工作..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:44:07.547

我已经从上一个答案中调整了我的代码，以考虑空的 xml 标签：

```
class MyHandler extends DefaultHandler {
    boolean is_sno = false;
    boolean is_sname = false;
    boolean mIsSegment = false;

    int mCurrentIndex = -1;

    @Override
    public void startElement(String uri, String localName, String name,
            Attributes attributes) throws SAXException {
        super.startElement(uri, localName, name, attributes);
        if (localName.equals("Table")) {
            mCurrentIndex++;
            al_sno.add("");
            al_sname.add("");
        } else if (localName.equals("TeamIDGiven")) {
            is_sno = true;
        } else if (localName.equals("City")) {
            is_sname = true;
        }

    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {           
        super.characters(ch, start, length);
        if (is_sno) {
            al_sno.set(mCurrentIndex, new String(ch, start, length));
        } else if (is_sname) {
            if (!mIsSegment) {
                al_sname.set(mCurrentIndex, new String(ch, start, length));
            } else {
                al_sname.set(mCurrentIndex,
                        al_sname.get(al_sname.size() - 1)
                                + new String(ch, start, length));
            }
            mIsSegment = true;
        }

    }

    @Override
    public void endElement(String uri, String localName, String name)
            throws SAXException {
        // TODO Auto-generated method stub
        super.endElement(uri, localName, name);
        if (localName.equals("TeamIDGiven")) {
            is_sno = false;
        } else if (localName.equals("City")) {
            is_sname = false;
            mIsSegment = false;
        }

    }

} 
```

看看它是否有效。您应该尝试将您的许多列表包装成一个简单数据持有者类的列表。

# sql - COPY command postgres syntax error

> ID：13602755
> 
> 赞同：2
> 
> 时间：2012-11-28T10:19:54.113
> 
> 标签：sql, postgresql, limit, dump, postgresql-copy

I am trying to export from a large postgres 8.1 table a couple of rows using

```
copy (select * from tablename limit 100) to 'absolute path to file'; 
```

but I get

```
ERROR:  syntax error at or near "(" at character 6. 
```

Any ideas what might be going wrong ? By the way I am not super user in the database but I believe that would have produced a different kind of error. If you have any other idea to dump a couple of rows from SQL (in a format to insert them easily, without coding) other than using copy I open to suggestions.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:34:38.090

要克服版本 8.1 的缺点，您可以创建一个`TEMPORARY TABLE`并在以下位置使用它`COPY TO`：

```
CREATE TEMP TABLE t_tmp AS
SELECT * FROM tablename LIMIT 100;

COPY t_tmp TO '/absolute/path/to/file'; 
```

温度。表会在会话结束时自动删除。如果您想保持连接打开，您可以显式删除表或将其包装在您回滚的事务中（已经写入文件的内容永远不会回滚。）

```
BEGIN;
CREATE ...;
COPY ...;
ROLLBACK; 
```

或者您升级到更新的版本，这通常是一个非常好的主意。
[PostgreSQL 8.1 已于 2010 年 11 月结束生命周期](http://www.postgresql.org/support/versioning/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:00:02.863

在 postgresql 8.1 中，你不能`COPY`从`SELECT`. 它是在 8.2 中添加的

看看这里的区别[http://www.postgresql.org/docs/8.1/static/sql-copy.html](http://www.postgresql.org/docs/8.1/static/sql-copy.html)和这里[http://www.postgresql.org/docs/8.2/static/sql-copy.html](http://www.postgresql.org/docs/8.2/static/sql-copy.html)

# ios - 这个动画有什么问题来调出一个pickerview？

> ID：13602757
> 
> 赞同：0
> 
> 时间：2012-11-28T10:19:57.830
> 
> 标签：ios

动画前的所有代码：

```
int height = 255;

//create new view
self.NewView = [[UIView alloc] initWithFrame:CGRectMake(0, 200, 320, height)];
self.NewView.backgroundColor = [UIColor colorWithWhite:1 alpha:1];

//add toolbar
UIToolbar * toolbar = [[UIToolbar alloc] initWithFrame: CGRectMake(0, 0, 320, 45)];
toolbar.barStyle = UIBarStyleBlack;

//add buttons
UIBarButtonItem *infoButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:nil action:@selector(dismissCustom:)];

UIBarButtonItem *flexible = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:nil action:@selector(cancelView:)];

toolbar.items = [NSArray arrayWithObjects:cancelButton, flexible, infoButtonItem, nil];
//add date picker
self.datePicker = [[UIDatePicker alloc] init];
self.datePicker.datePickerMode = UIDatePickerModeDateAndTime ;
self.datePicker.hidden = NO;
self.datePicker.date = [NSDate date];
self.datePicker.frame = CGRectMake(0, 40, 320, 250);
[self.datePicker addTarget:self action:nil forControlEvents:UIControlEventValueChanged];
[self.NewView addSubview:self.datePicker];

[self.NewView addSubview:toolbar]; 
```

使视图可见的动画代码：

```
 __block CGRect temp = self.NewView.frame;
    temp.origin.y = CGRectGetMaxY(self.view.bounds);
    [UIView animateWithDuration:0.5 animations:^{temp.origin.y -= height, self.NewView.frame = temp;} completion:^(BOOL finished) {
        [self.view addSubview:self.NewView];}]; 
```

我有几乎相同的代码来摆脱它，它工作正常！

```
int height = 0;
__block CGRect temp = self.NewView.frame;
temp.origin.y = CGRectGetMaxY(self.view.bounds);
[UIView animateWithDuration:0.5 animations:^{temp.origin.y -= height, self.NewView.frame = temp;} completion:^(BOOL finished) {
    [self.NewView removeFromSuperview];}]; 
```

有人知道出了什么问题吗？该视图也只出现在它应该滑动的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:53:28.810

问题是您仅在动画完成*后将*NewView 添加为子视图。您必须先添加它，如下所示：

```
__block CGRect temp = self.NewView.frame;
temp.origin.y = CGRectGetMaxY(self.view.bounds);
[self.view addSubview:self.NewView];
[UIView animateWithDuration:0.5 animations:^{temp.origin.y -= height, self.NewView.frame = temp;} completion:nil]; 
```

# python - How can I write python regular expression to match multiple space in a row

> ID：13602762
> 
> 赞同：0
> 
> 时间：2012-11-28T10:20:03.797
> 
> 标签：python, regex

I have a string like this, it has multiple spaces before 'READY' and after 'READY'

All empty space in the following examples are Space

```
'1df34343 43434sebb              READY                     ' 
```

How can I write a regular expression which can get '1df34343 43434sebb' as result.group(1)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:52:37.767

如果后面有多个空格 + READY，这将捕获所需的组。使用积极的前瞻性。

```
(\S+ \S+)(?=\s{2,}READY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:27:06.757

这是一个非常简单的正则表达式，它捕获所有内容，直到它连续看到两个空格：

```
In [11]: s = '1df34343 43434sebb              READY                     '

In [12]: re.match(r'(.*?)\s\s', s).groups()
Out[12]: ('1df34343 43434sebb',) 
```

正如我所理解的那样，这可以满足您的要求。如果有什么不妥，请澄清。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:22:36.583

如果您了解正则表达式，您应该知道以下内容：

*   `\s`: 空白字符
*   `\S`: 非空白字符
*   `+` : 至少一个之前的捕获。

脚本：

```
>>> import re
>>> s = '1df34343 43434sebb              READY                     '
>>> ms = re.match(r"(\S+ \S+)\s+(\S+)\s+", s)
>>> ms.groups()
('1df34343 43434sebb', 'READY')
>>> ms.group(1)
'1df34343 43434sebb'
>>> ms.group(2)
'READY' 
```

如果您需要更详细地解析您所拥有的内容，您甚至可以使用功能更强大的正则表达式：

```
>>> ms = re.match(r"((\S+) (\S+))\s+(\S+)\s+", s)
>>> ms.groups()
('1df34343 43434sebb', '1df34343', '43434sebb', 'READY')
>>> ms.group(1)
'1df34343 43434sebb'
>>> ms.group(2)
'1df34343'
>>> ms.group(3)
'43434sebb'
>>> ms.group(4)
'READY' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:25:26.037

匹配多空间组*之前的任何内容：*

```
 re.compile(r'^(.*?)(?:\s{2,})') 
```

输出：

```
>>> import re
>>> multispace = re.compile(r'^(.*?)(?:\s{2,})')
>>> multispace.match('1df34343 43434sebb              READY                     ').groups()
('1df34343 43434sebb',) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:35:39.150

为什么不把你的字符串分成 2 个或更多的空格。您将获得一个列表，您可以从中获得第一个元素，这是您需要的元素。你真的不需要一个复杂的正则表达式： -

```
>>> s = '1df34343 43434sebb              READY                     '
>>> import re
>>> re.split(r'[ ]{2,}', s)[0]
>>> '1df34343 43434sebb' 
```

# selenium-webdriver - How to right click on a link and select an option using Selenium WebDriver

> ID：13602764
> 
> 赞同：0
> 
> 时间：2012-11-28T10:20:09.297
> 
> 标签：selenium-webdriver

How to select a right click operation on a link or image and choose any option?

I know how to do it using SendKeys with below code:

```
WebElement o_Mail=driver.findElement(By.xpath("/html/body/center/form/table/tbody/tr/td[3]/a"));
Actions action=new Actions(driver);
action.contextClick(o_Mail).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.RETURN).build().perform(); 
```

The drawback is here we should know how many times the DOWN button should be pressed.

But how can i select with option name which will be like below?

```
action.contextClick(o_Mail).perform();
WebElement o_element=driver.findElement(By.xpath("//option[contains(text(),'Open Link in New Tab')]"));
o_element.click(); 
```

You can use google main page and right click on Advance search and choose Open Link in New Tab?

Please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T08:49:22.877

我从来没有用 Java 编写过 selenium 脚本，但这样的东西可能会起作用：

```
WebElement o_element=driver.findElement(By.xpath("//option[contains(text(),'Open Link in New Tab')]"));
String url = o_element.getAttribute("href");
driver.executeScript("window.open(" + url + ", '_blank');"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:35:36.483

如果你想要 2 个单独的窗口，你可以做的是获取文件的 url（通过获取元素的 href 属性），然后启动一个新的驱动程序并导航到该链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T09:09:28.030

如果你想从上下文菜单中选择项目，你必须像这样使用 Key down 事件来移动鼠标位置。下面的代码将从上下文菜单中选择第二个选项：-

动作动作=新动作（驱动程序）；action.contextClick(productLink).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.RETURN).build().perform();

希望这对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:30:31.070

只是猜测：在新选项卡中打开链接也主要通过 Ctrl + 单击完成

在我的硒测试中我还没有这样做，但你可以用你做按键方法的方式来做这件事......

# javascript - 即时将 HTML 插入另一个网页

> ID：13602772
> 
> 赞同：0
> 
> 时间：2012-11-28T10:20:43.820
> 
> 标签：javascript, dom, web-applications, iframe

假设我拥有 2 个网站，A 和 B。我可以访问网站 A 的源代码，但不能访问网站 B，尽管它是由我工作的同一组织开发的，但由不同的部门开发，不会共享源代码与我们。

当用户从网站 A 浏览到网站 B 时，我想在网站 B 中插入一些 HTML，链接回网站 A。类似于 facebook、twitter 等提供的插件。

我知道我可以通过两种方式做到这一点：

**第一种方式：使用 javascript** 我要求 B 网站上的开发人员包含 a`<div id = "fromWebsiteA" />`和我的 javascript 代码`<script src = "websiteA.com/script.js" />`标记。在我的 javascript 代码中，我访问网站 B 上托管页面的 DOM，并在我的 div“fromWebsiteA”中创建子元素。这是大多数社交网络网站为希望在其网站上放置*Pin It* (Pinterest) 或*Digg it*或任何按钮的网站发布者提供的内容。

**第二种方式：使用 iFrame** ，我给他们一个 iframe，我的内容将在其中加载。像facebook的like插件。

我的问题是：

1）我的想法是否正确？

2）有第三种技术吗？

3) 抱歉，如果我对最后一个问题听起来很愚蠢，因为我知道它涉及安全威胁，但是有没有办法让我将该 HTML 插入站点 B 而不涉及站点 B 的开发团队？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:26:39.360

我认为正确的方法是让网站 B 开发人员编写一个代码来检查`http_referer`标题中的内容，然后相应地显示您的小部件（或您所称的任何内容）而且存储 cookie 也很聪明，这样他们就可以继续显示用户浏览网站时的小部件。

另一种方法可以包含`GET`变量之类`?from=websiteA`的东西，而不是检查`http_referer`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T10:25:56.433

首先，您必须知道您来自网站 A。当您从网站 A 浏览到网站 B 时，您必须使用参数 ( `<a href="wwww.example.com?from=websiteA>Go</a>`) 调整链接或使用表单来实现相同的效果。

要在网站 B 上检测/读取它是否来自网站 A，您需要插入您的自定义 JS。在这里你应该阅读哈希

```
var recognizeText = "from=websiteA";
if( location.hash.indexOf( recognizeText ) == -1 ) { return; /*didnt come from websiteA */ }

// We came from website A, I dont know if you want to reset the hash (should the link be visible if you browse through websiteB, all the time..? )
// Then it would be more convenient to add a hash because that you can replace without pagerefreshing (I noticed that setting location.search = "" does refresh)

$("fromWebsiteA").style.display = "block";
$("fromWebsiteA").innerHTML = "<a href='www.websiteA.com'>Go back</a>" 
```

我不会尝试使用 iFrame。我不确定您是否可以从 iframe 中检测到上一页。

# excel - Excel：在不知道工作表的情况下通过定义的名称获取单元格值

> ID：13602775
> 
> 赞同：1
> 
> 时间：2012-11-28T10:20:58.157
> 
> 标签：excel, pywin32

我正在使用 pywin32 读取和写入具有多张工作表的 Excel 工作簿。我想通过定义的名称访问单元格值。我可以使用

```
myWorkbook.Sheets(mySheet).Range("myCellName").Value 
```

但是，我并不总是知道名称是在哪个工作表上定义的。现在，我通过使用 range(sheet0, sheetx) 来尝试每个工作表来解决这个问题。我认为我可以使用另一个功能，即工作簿方法

```
myWorkbook.Names("myCellName").Value 
```

但不是返回存储在单元格“myCellName”中的值，而是返回单元格的工作表和单元格引用，比如

```
u"='mySheet2'!$D$37" 
```

有没有更优雅的方法可以直接访问已定义名称的值 - 单元格而不知道它在哪个工作表上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:57:01.083

你可以得到价值

`MyWorkbook.Names("myCellName").RefersToRange`

fwiw 你可以得到名字表

`MyWorkbook.Names("myCellName").RefersToRange.Parent.Name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:59:04.690

如果定义的名称包含范围引用，则 brettdj 的方法效果很好，但如果定义的名称包含公式，则可能会失败。更通用的方法是使用 Evaluate
`Application.evaluate("myCellName")`
或
`[myCellName]`
（假设您可以从 pywin32 执行这些操作）

# stata - 在 .ado 文件中使用 Mata - 语法错误

> ID：13602778
> 
> 赞同：0
> 
> 时间：2012-11-28T10:21:36.317
> 
> 标签：stata

这个问题是这个问题的延续[，](https://stackoverflow.com/questions/13580571/mata-in-ado-files)但是由于可以在不知道我之前的问题的情况下回答它，我认为发布一个新问题是解决问题的方法（如果不是这种情况，我很抱歉）。在上一个问题中，有人告诉我，将 Mata 代码放在 .ado 文件的末尾会使本地`var2`代码在 Stata 代码中可用。一个最小的例子如下：

```
program define hello
args var1
local sum_var=`var1'+`var2'
disp `sum_var'
end

mata
void cens_func(todo, x, y, g, H)
{
y = (x-1)^2
}

S = optimize_init()
optimize_init_evaluator(S, &cens_func())
optimize_init_which(S, "min")
optimize_init_params(S, 2)
temp=optimize(S)
st_local("var2",strofreal(temp))
end 
```

不幸的是，它没有运行。我收到无效的语法错误。首先使用 Mata 代码在 .do 文件中运行它，不会导致错误。我在这里想念什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:17:28.707

具体来说，您没有定义`var2`这样就应该导致 a 的第一次分配`local`失败，因为 Stata 会看到一个悬挂的加号。

如果仅仅是因为 Stata 代码从未调用过 Mata 函数，那么在任何情况下都没有机会进行此操作。

通常，诸如“未运行”甚至“语法错误”之类的报告并不能提供真正的信息，因为它们无法向其他人提供有关正在发生的事情的真正线索。Stata 在这里没有错，因为它提供了调试工具，因此`set trace on`您可以看到哪条线路出现故障。

将其作为 do-file 运行只是定义了一个程序；它不能证明它是合法的，甚至是正确的。

根据这个证据，您应该尝试编写一些更简单的程序，然后才能真正实现它。即使从手册中复制一些示例程序也会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:09:21.197

我经常这样做：

```
program define... 
  tempvar var2
  gen `var2' = <<whatever>>
  mata: myroutine("`var2'")
end

mata:
void myroutine(string scalar inputvar)
{
  real vector v
  st_view(v,.,inputvar)
  <<use v somehow>>
}
end 
```

您还调用 use`st_store`来编写一个新的 Stata 变量。我的代码只是将它读入 Mata。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:58:22.827

我会参考我昨天的回答。Mata 将创建一个新的本地，或更改一个现有的本地，但在创建之前您不能*使用本地。*与Mata没有任何关系改变了这一点。

在从 Stata 调用 Mata 时，请参阅`help m1_ado`。

因此，在您的代码中，您需要在尝试使用`var2`Mata 函数创建之前调用 Mata `var2`。

# php - 连接到远程主机不起作用

> ID：13602779
> 
> 赞同：0
> 
> 时间：2012-11-28T10:21:42.107
> 
> 标签：php

我尝试像这样连接到远程主机：

```
 class Singleton {
  public static $connection;

  public static function getConnection(){
      if(self::$connection==null){
         $dsn = 'mysql:dbname=gtrscrpt_ubot;';
         $user = 'MyUser';
         $password = 'MyPassword';
        try {
           self::$connection = new PDO('mysql:host=gator188.hostgator.com;port=2983;dbname=gtrscpt_ubot;',$user,$password );
           self::$connection->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            echo 'Connection failed: ' . $e->getMessage();
        }
      }
      return self::$connection;
  }

}

Singleton::getConnection(); 
```

我明白了：

```
Connection failed: SQLSTATE[HY000] [2006] MySQL server has gone away 
```

问题是我不知道我的代码是错误还是无法真正连接到服务器（但我知道我应该连接）

**更新：** 连接失败：SQLSTATE[HY000] [2000] mysqlnd 无法使用旧的不安全身份验证连接到 MySQL 4.1+。请使用管理工具通过命令 SET PASSWORD = PASSWORD('your_existing_password') 重置密码。这将在 mysql.user 中存储一个新的、更安全的哈希值。如果此用户在 PHP 5.2 或更早版本执行的其他脚本中使用，您可能需要从 my.cnf 文件中删除 old-passwords 标志**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:30:27.333

看起来你的主机有问题。与他们核实您的主机名、端口和凭据是否正确，并且您的服务器可以访问外部传出网络。

来自[MySQL 文档：](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)

> **C.5.2.9。MySQL 服务器已经消失**
> 
> MySQL server has gone away 错误最常见的原因是服务器超时并关闭了连接。

**编辑：**

您的主机仍在使用旧的 MySQL 密码方案。如果您有权访问 MySQL，则可以按照错误提示更新密码：

```
SET PASSWORD FOR 'User'@'Host'=PASSWORD('yourpassword');
FLUSH Privileges 
```

替换`User`并`Host`使用您的详细信息。[这个问题](https://stackoverflow.com/questions/1575807/cannot-connect-to-mysql-4-1-using-old-authentication)的更多信息。

# jquery - YUI 如何包含特定模块？它是如何工作的？

> ID：13602789
> 
> 赞同：3
> 
> 时间：2012-11-28T10:22:16.507
> 
> 标签：jquery, yui

因为我是 YUI 的新手，并且在几天前使用它。
因此，YUI 实例包括特定模块，如“io-base”、“node”或任何其他模块。
然后我可以使用 io()、Node()、on() 等方法。

**问题1：**谁能告诉我它是如何工作的？在包含像 jQuery 这样的种子文件后，yui 是否可以离线工作？

**问题 2：**这个 yui 对小型项目有帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T15:01:15.337

YUI 的核心是加载程序。基本上，加载器要么下载要么附带描述 YUI 中每个模块的 JSON 结构。当您请求“node”或“io-base”之类的内容时，Loader 会查找您命名的模块的元数据，收集它们当前未在模块注册表中注册的依赖项（稍后会详细介绍），然后以递归方式工作为它需要加载的全套模块建立依赖链。然后它为这些模块发出 HTTP 请求。如果您没有“组合处理程序”（基本上，服务器上的文件连接服务），加载程序将单独请求每个文件，但组合处理程序允许批量请求这些文件。

每个 YUI 模块都包含在 YUI.add() 语句中。此方法采用设置模块的设置函数，并公开您希望在传递给函数的“实例对象”上公开的任何代码，按照惯例，此实例对象称为“Y”。YUI.add 实际所做的是将模块放在上面提到的模块注册表中，因此在 Loader 调用您提供给 YUI.use() 的回调之前，它可以执行每个所需的模块设置函数，以确保您的环境根据什么正确配置你已经要求了。

这个沙盒模型，每个模块都使用一个实例变量设置在一个函数中，该实例变量从每个模块公开所需的功能，并最终传递到您提供给“使用”的回调中，允许 YUI 的多个实例在同一页面上运行，与页面上的其他实例完全隔离。（警告：这通常不是一个好主意，因为每个沙箱都有自己的一组模块，最终会使用大量冗余内存，但它仍然很有用，但通常不建议或不需要）。

如果只包含种子文件，YUI 将无法在没有互联网连接的情况下工作，因为种子文件不包含任何模块。在此环境中使用 YUI 有几种替代方法。

*   [SimpleYUI](http://www.yuiblog.com/blog/2010/09/03/coming-inyui-3-2-0-simpleyui/)是许多类似 jQuery 的功能的“汇总”。即，Node 模块、IO、transitions 和其他一些较小的实用程序。如果这是您需要的所有功能，它会加载到一个文件中，而您不再需要。
*   [Configurator](http://yuilibrary.com/yui/configurator/)允许您选择您需要的模块，并且您可以使用它来收集您在应用程序离线时注册到模块注册表所需的模块，因此 Loader 永远不需要尝试访问 Web 来满足缺失的依赖项。
*   Dav Glass 正在开发一个名为“grifter”的工具，该工具将允许您创建自定义 YUI 模块存储库，其部分设计目的是允许您在 Windows 8 应用程序中工作，而无需将整个 YUI 源代码与您的应用程序一起提供，正如[目前建议](http://www.yuiblog.com/blog/2012/11/02/windows-8-learnings/)的那样。

YUI 可用于任何项目，无论大小。它当然具有在大型项目中最突出的代码组织和模式化优势，但该库能够通过相当简单的 Loader 界面“扩展”项目复杂性。

如果你想更深入地了解如何配置加载器，以及一些幕后发生的事情，我[在 YUIConf 2011 上就这个主题做了一次演讲](http://www.youtube.com/watch?v=wuEmo9URF2g)，尽管我警告说，它是针对那些已经熟悉 YUI 的人正在寻找配置自己的加载模块。

# asp.net-mvc-2 - ASP.NET MVC - Url.Content

> ID：13602791
> 
> 赞同：0
> 
> 时间：2012-11-28T10:22:31.247
> 
> 标签：asp.net-mvc-2

当我的 URL 包含如下嵌入式代码块时，有人可以告诉我如何使用**Url.Content吗？**

```
<a class='highslide' id="baseThumb" href="../../Helpers/ImageHandler.ashx?imageid=<%= Model.ImageIDs[0] %>&thumbnail=0">
<img runat="server" src="../../Helpers/ImageHandler.ashx?imageid=<%= Model.ImageIDs[0] %>&thumbnail=1" alt=""/>
</a> 
```

我上面的图片只显示在我的本地开发环境中，而不是在我部署到服务器时。由于 URL 不正确，找不到 ImageHandler。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:47:07.697

尝试这个：

```
<% 
    var url = Url.Content("~/PATH/Helpers/ImageHandler.ashx?imageid="  + Model.ImageIDs[0]);
%>

<a class='highslide' id="baseThumb" href="<%=url%>&thumbnail=0">
<img runat="server" src="<%=url%>&thumbnail=1" alt=""/>
</a> 
```

Url.Content 中的 ~/ 将指向根目录，因此您必须从那里设置 ashx 文件的正确路径。

# extjs - LocalHost/GS 不显示 sencha 默认应用

> ID：13602792
> 
> 赞同：1
> 
> 时间：2012-11-28T10:22:31.383
> 
> 标签：extjs

我想学习 sencha touch2.for 我下载了 SenchaSDKTools-2.0.0-beta3.and sencha-touch-2.0.1.1-commercial.and 我给 sencha 和 sencha generate app GS ../GS 命令。它工作正常。然后再给出一个 DOCS http:/localhost/GS/ 中给出的命令。但它给出了错误。它不显示默认的 sencha 应用程序。请告诉我我做错了什么。请帮助我。

# java - 在 Java 中处理返回嵌套表类型的 Oracle 过程

> ID：13602793
> 
> 赞同：2
> 
> 时间：2012-11-28T10:22:31.353
> 
> 标签：java, oracle, plsql

我正在使用 Java 调用 Oracle 过程，其中一些过程将其 OUT 参数作为嵌套表类型。然后我需要处理嵌套表类型中的数据，甚至需要处理它们的元数据（嵌套表的属性）。

```
OracleCallableStatement stmt = null;
//Build the call here
StringBuilder call = new StringBuilder("{call ");
call.append(procName);
call.append("}");

System.out.println(call.toString());

conn = _motifUserDataSource.getConnection();
System.out.println("PREPARING : "+call.toString());
stmt = (OracleCallableStatement)conn.prepareCall(call.toString());
// The return parameter is an ARRAY type (nested table)
stmt.registerOutParameter(1, OracleTypes.ARRAY, "TABLE_NTT");
stmt.execute();

// Get the return value and covert it into a JDBC ResultSet
ARRAY array = (ARRAY) ((OracleCallableStatement)stmt).getOracleObject(1);
rs=array.getResultSet();

ResultSetMetaData metadata = rs.getMetaData(); 
```

**问题：** 当我尝试上面的代码时，我收到以下错误

```
Caused by: java.sql.SQLException: Unsupported feature: getMetaData
at oracle.jdbc.driver.ArrayDataResultSet.getMetaData(ArrayDataResultSet.java:1013)
at com.Testdb.execCheckRefCursorData 
```

我需要这个元数据来识别处理阶段所需的属性/列名。

关于如何处理嵌套表类型 OUT 参数并使用结果集从中提取数据和元数据信息的任何输入？

# firefox - 测量在有/没有 ABP/Ghostery/等的情况下在 FF 中加载网页所需的时间

> ID：13602794
> 
> 赞同：0
> 
> 时间：2012-11-28T10:22:31.560
> 
> 标签：firefox, time, firefox-addon

我有一个在 FF 插件上编码的项目，以加快下载/绘制网页所有组件所需的时间。删除广告、第 3 方脚本（谷歌分析等）以及图像（我真的需要从缓存中下载或加载 stackoverflow/wikipedia/google/etc. 徽标吗？...）。

为了做到这一点并选择什么让我赢得时间和什么让我失去时间（解析列表太大，解析的最佳方式等），我需要能够测量在我按下 Enter 键之间花费的时间，并且页面准备好了。

您知道在 FF 中执行此操作的方法吗？您知道在 FF 之外执行此操作的方法吗？（所以我可以使用原始源/我编辑的源进行测试）。在第二种情况下，我仍然需要测量解析源文件所花费的时间，我可以通过制作二进制文件来轻松做到这一点，但这与 FF 插件的执行速度相比是否相关？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:45:12.143

如果[Firebug](http://getfirebug.com/)不能满足您的需求，您可以尝试[dynaTrace](http://www.compuware.com/application-performance-management/ajax-performance-testing.html)

# php - PHP中如何通过变量引用选择对象的子对象？

> ID：13602795
> 
> 赞同：0
> 
> 时间：2012-11-28T10:22:31.873
> 
> 标签：php, class, object

我在 PHP 中有一个对象（在我的例子中是一个 CakePHP 模型），它有子对象，例如。的结构`$this->Model1->Model2`。

我知道上面的语法是引用对象的正确方法，但是如果我是`Model2`通过另一个进程获得的名称，那么它是一个字符串变量。如何使用这个变量来引用它，类似于如下：

```
$model_name = 'Model2';
$this->Model1[ $model_name ]->run_function(); 
```

现在显然这种选择对象/类的数组样式不起作用，但是我应该使用类似的方法吗？还是有更好的编码实践不会导致这个问题一起出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:25:28.550

你在找这个吗？

```
$property = 'myProperty';
$object->{$property}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:27:46.120

这样做：

```
$this->Model1->$model_name->run_function(); 
```

# android - AdMob“货币”系统

> ID：13602796
> 
> 赞同：1
> 
> 时间：2012-11-28T10:22:33.320
> 
> 标签：android, admob

我有一个使用虚拟货币来执行某些操作的应用程序。每次点击广告，您都会获得“硬币”。

这是否违反 AdMob TOS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:48:55.013

这是标题*限制下的*[*使用条款*](http://www.admob.com/home/terms)的引述

 *> 用户不得也不得授权或鼓励任何第三方对任何广告产生欺诈印象或欺诈点击，包括但不限于通过重复手动点击、使用机器人或其他自动查询工具和/或计算机生成的搜索请求和/或欺诈性使用其他搜索引擎优化服务和/或软件。

这一个来自[集成/实施注意事项](http://support.google.com/admob/bin/answer.py?hl=en&answer=2790280&topic=2790017&ctx=topic)Google 支持网站

> 不应鼓励用户点击广告
> 
> 不允许使用诸如“点击广告”或类似语言的短语。严禁对点击广告进行任何补偿或其他激励措施。此外，还禁止激励用户点击链接和/或非 AdMob 广告，因为这会训练用户执行导致无效活动的操作。

它明确指出*这是不允许*的。如果我想继续使用 Admobs 平台，我通常会远离此类活动。*

# ruby-on-rails - 我可以在 should_receive 上设置期望并让它执行原始代码吗？

> ID：13602800
> 
> 赞同：0
> 
> 时间：2012-11-28T10:22:40.110
> 
> 标签：ruby-on-rails, ruby, rspec

我有类似的东西：

```
value = nil

if some_condition
  value =my_object.do_stuff()
end 
```

在我的测试中，我有以下几点：

```
MyObject.any_instance.should_receive(:do_stuff) 
```

但是，我只想测试该方法是否被调用，并让它执行原始代码。我不想这样做：

```
MyObject.any_instance.should_receive(:do_stuff).and_return(:some_dummy_value) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:31:27.710

有`and_call_original`方法：

```
MyObject.any_instance.should_receive(:do_stuff).and_call_original 
```

请参阅[https://github.com/rspec/rspec-mocks#delegating-to-the-original-implementation](https://github.com/rspec/rspec-mocks#delegating-to-the-original-implementation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:29:34.307

我相信，由 FactoryGirl 创建对象比测试它更好。您可以阅读如何制作[工厂](https://github.com/thoughtbot/factory_girl)等。例子：

```
FactoryGirl.define do
  factory :my_object do
   [*here is your attributes*]
  end
end 
```

所以，在你创建了一个工厂之后，你应该在使用这个方法的地方创建测试并写下：

```
my_object = FactoryGirl.create(:my_object)
my_object.should_receive(:do_stuff) 
```

在您的代码中，当您运行测试时，您将使用您的“my_object”执行“do_stuff”。

# php - 如果缺少翻译，则提供原始内容，查询 WHERE 子句有问题

> ID：13602802
> 
> 赞同：0
> 
> 时间：2012-11-28T10:22:41.637
> 
> 标签：php, mysql, sql, internationalization, translation

我正在尝试建立一种方法来提供翻译，只要找不到翻译，它就可以回退到提供原始文本。

我有一些“标准”表，其中包含原始语言中的各种内容（帖子、菜单等），然后是一个“主”翻译表，其中包含由语言键标识的翻译值、内容类型参考和翻译项目的ID。

例如：

table_posts

```
id |     title      |    slug
-------------------------------
 8 | test contenuto | test-contenuto 
```

表翻译

```
 id |      title    |  slug        | item_id | item_type | language
 ----------------------------------------------------
 1  | test content  | test-content |    8    |    1      |    2 
```

在搜索 id 或没有 where 子句时，我设法让它工作，但每当我需要基于 slug 进行搜索时，我都会卡住。我想要的是，如果 slug 是“关于我们”但翻译表中没有条目，它应该搜索原始语言的相应内容，反之亦然。

到目前为止，我设法使用 IFNULLs（或 COALESCEs）来提供找到的内容，但我无法找到一种可靠的方法来放入 WHERE 条件。

这个查询。例如，作品：

```
SELECT c.id,
  COALESCE(
    (SELECT t.slug FROM translations t WHERE t.id_item = c.id
    AND t.item_type = 1 AND t.language= 2), c.slug
   ) slug, 
  COALESCE( 
    (SELECT t.testo FROM translations t WHERE t.id_item = c.id
    AND t.item_type = 1 AND t.language= 2), c.testo
   ) testo,
    FROM content c
   WHERE c.type= 2 AND c.status = 1 AND c.trash = 0 
```

相反，对于这样的查询，我真的无法解决：

```
 SELECT cat.id,
  COALESCE (
     (SELECT t.name FROM translations t WHERE t.id_item = cat.id
      AND t.item_type = 2 AND t.language = 2), cat.name
     ) name
  FROM product_categories cat 
  WHERE cat.slug =.... 
```

我一辈子都不能告诉它搜索翻译的 slug，如果在翻译表中找不到，则获取原始 slug 并使用它来获取翻译内容（如果有，则获取原始内容）。

我希望我清楚它应该如何工作......我现在担心的是我从错误的角度看待问题，并且有更简单的方法来解决这个问题。我尝试查看第三方代码，例如 Joomla 的“JoomFish”扩展，以了解它是如何工作的，但这是循环和内部循环的三重奏，我无法真正理解它。

有没有更好的方法来解决这个问题？一般是怎么做的？我是否需要重构整个数据库架构，比如为每种语言使用一个表？

**编辑：**

我正在使用 WHERE 子句在具有该 slug 的翻译表中搜索指定的记录；如果没有找到它，则意味着我们正在寻找原始语言的网站，或者我们正在寻找另一种语言但缺少翻译（该作品的）。总而言之，我的意图是：

我有仅由蛞蝓制作的 URL。那么当蛞蝓是另一种语言时，我该如何搜索内容呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:47:18.677

我认为这`COALESCE`是执行任务的最简单方法，但是您可以使用 a`JOIN`来避免*子查询*并仅使用`WHERE`on *slug*来提高性能。

```
SELECT cat.id, COALESCE(t.name, cat.name) name
FROM product_categories cat
LEFT OUTER JOIN translations t 
ON t.id_item = cat.id AND t.item_type = 2 AND t.language = 2
WHERE cat.slug =.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:40:47.763

我会尝试`IF()`。

这个查询怎么样：

```
SELECT cat.id,
    (SELECT t.name 
        FROM translations t 
        WHERE t.id_item = cat.id
            AND t.item_type = 2 
            AND t.language = 2
    ) translation,
    IF(translation, translation, cat.name) as name
FROM product_categories cat 
WHERE cat.slug =.... 
```

无论如何，这是一种不方便的翻译方式......更常见的方式是每个表都有翻译，这样你只需要一个选择来获取数据。通常你有一个表`category`和一个包含诸如`category_description`or`category_text`等​​翻译的表。在这里你每行存储所有翻译（名称、描述、slug、关键字、标签等）。

当您设置了某些语言时，还应在应用程序的管理部分确保没有没有翻译的条目 - 您应该设置主要语言，然后在存储类别记录时检查是否有其他语言的翻译如果不是，我会从主要语言复制翻译（应该始终设置）。

# python - 为什么我们需要在 Bottle + uWSGI 中指定绝对路径？

> ID：13602805
> 
> 赞同：1
> 
> 时间：2012-11-28T10:22:53.680
> 
> 标签：python, nginx, uwsgi, bottle

我正在开发一个瓶子应用程序。我的程序从配置 (.cfg) 文件和模板 (.tpl) 文件中读取配置。

但是当我使用 uWSGI 在 nginx 上托管我的应用程序时，它找不到文件（给定项目的相对路径）

什么是可能的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:27:49.017

不使用相对路径，而是根据*当前*模块路径存储绝对路径：

```
MODULEPATH = os.path.dirname(__file__)

template = open(os.path.join(MODULEPATH, 'templates/sometemplate.tpl').read() 
```

`__file__`是当前模块的文件名，`os.path.dirname(__file__)`是模块所在的目录。

你不应该依赖 Python 代码中的相对路径；运行 python 程序时不会更改当前工作目录。

# javascript - jQuery中的验证插件

> ID：13602808
> 
> 赞同：0
> 
> 时间：2012-11-28T10:23:01.043
> 
> 标签：javascript, jquery

我在我的项目中使用了 jQuery 验证插件。但我收到一个错误：

> TypeError: jQuery("#formID").validationEngine 不是函数

我的调用函数：

```
jQuery("#formID").validationEngine(); 
```

我包括所有这些脚本：

```
<script src="js/validation/jquery-1.6.min.js" type="text/javascript"></script>
<script src="js/validation/jquery_validation.js" type="text/javascript"></script>
<script src="js/validation/validation_id.js" type="text/javascript"></script>
<script src="js/validation/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>
<script src="js/validation/jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:47:31.723

你必须这样称呼它

```
$(function(){
   $("#formID").validationEngine('attach');
}); 
```

正确运行它。

# iphone - 在 facebook ios6 中没有进入 if(granted) 循环“使用 Facebook 登录”

> ID：13602809
> 
> 赞同：2
> 
> 时间：2012-11-28T10:23:03.303
> 
> 标签：iphone, objective-c, ios, ios6

嗨，我正在“使用 facebook 登录”工作，我的代码在下面这里没有进入 if(granted) 循环。在我单击弹出窗口中的“确定”后，控制台打印如下 2`012-11-28 15:47:08.558 Tattoo Later[2748:1d34b] type:com.apple.facebook identifier: B962F897-6BAE-4769-8C04-B1B3D2C872A2 accountDescription: Facebook username: example@yahoo.co.in objectID: x-coredata://EBF41CAD-7388-45E0-8621-3958C7A67491/Account/p1 enabledDataclasses: {( "com.apple.Dataclass.Contacts", "com.apple.Dataclass.Calendars" )} enableAndSyncableDataclasses: {( )} properties: { fullname = "Example"; uid = 100001462475956; } parentAccount: (null) owningBundleID:(null)`

点击“使用 Facebook 登录”时的我的代码：

```
-(IBAction)loginWithFacebookClicked:(id)sender
{
 ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
NSArray * permissions = [NSArray arrayWithObjects:@"email",@"user_location", nil];
        NSDictionary * dict=[NSDictionary dictionaryWithObjectsAndKeys:@"238864112907671",ACFacebookAppIdKey,permissions,ACFacebookPermissionsKey,ACFacebookAudienceEveryone,ACFacebookAudienceKey, nil];
[accountStore requestAccessToAccountsWithType:accountType options:dict completion:^(BOOL granted, NSError *error) {
            if(granted ) {
                NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];
if ([accountsArray count] > 0) {
ACAccount *fbAccount = [accountsArray objectAtIndex:0];
                    NSLog(@"%@",fbAccount);
}
            }
            else
            {
                NSLog(@"%@",[error localizedDescription]);
            }
        }];
} 
```

最初我遇到了一些错误，例如

Facebook 服务器无法满足此访问请求：代理应用程序无法请求发布权限，除非之前已安装。

Error Domain=com.apple.accounts Code=7 “Facebook 服务器无法完成此访问请求：无效的应用程序 ID” UserInfo=0xa29f520 {NSLocalizedDescription=Facebook 服务器无法完成此访问请求：无效的应用程序 ID}

后来我通过搜索解决了，但我没有得到解决方案

请指导我提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:55:56.427

答案很简单！稍后在任意线程上调用完成块。因此，如果您一步一步进行，它实际上会退出您的方法并继续在主线程上工作，然后当您收到响应时，它会进入 if 或 else 部分。您的日志实际上证明您已输入 if 部分（它记录帐户）。如果你在 if 部分放置一个断点，你会注意到这种行为。所以你的代码没问题。

# jquery - 用于查找选项数量的 Jquery

> ID：13602810
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:23:06.897
> 
> 标签：jquery, html

这是我页面中下拉菜单的示例，

```
<select id="drpdwn">
<option selected="selected">Please select</option> --> This is a static text in my page
<option>serverside value1</option>
<option>serverside value2</option>
<option>serverside value3</option>
</select> 
```

现在我需要对上面的下拉菜单进行一些 jquery 验证，例如“如果选项数 == 1（除了“请选择”），我需要默认只显示该信号选项。否则，我需要默认显示“请选择”。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:26:01.030

```
$(document).ready(function(){
   if($("#drpdwn option").length == 2){
         $("#drpdwn option:eq(1)").attr('selected','selected'); 
   }else{
         $("#drpdwn option:eq(0)").attr('selected','selected'); 
   }
}); 
```

# ruby - 如果您分配的值存在，如何在不检查每个步骤的情况下在 ruby 中分配

> ID：13602811
> 
> 赞同：3
> 
> 时间：2012-11-28T10:23:09.140
> 
> 标签：ruby

不幸的是，我想不出一个很好的方法来写这个问题，我们有很多代码最终看起来像这样：

```
@annotation.note = params[:annotation][:note] if params[:annotation][:note]
@annotation.style = params[:annotation][:style] if params[:annotation][:style] 
```

我发现如果最后检查参数很烦人。

那么有没有办法更简洁地写这个，以便理解该值仅在它存在时才被复制，而不必每次都在末尾明确询问是否？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:41:46.697

```
x = params[:annotation][:note] and @annotation.note = x
x = params[:annotation][:style] and @annotation.style = x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:27:32.313

您可以轻松地将检查提取到方法中，从而使您的代码更加干燥。像这样，例如：

```
def copy obj, prop, params
  val = params[prop]
  obj.send "#{prop}=", val if val
end

ann = params[:annotation]
copy @annotation, :node, ann
copy @annotation, :style, ann 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:17:57.533

你也可以试试这个：

```
params[:annotation].each_pair {|k,v| v && @annotation.send("#{k}=", v) } 
```

一些测试：

```
require 'ostruct'

@annotation = OpenStruct.new
params = {:annotation => {:note => 'note', :style => 'style'}}

params[:annotation].each_pair {|k,v| v && @annotation.send("#{k}=", v) }

p @annotation
#<OpenStruct note="note", style="style">

@annotation = OpenStruct.new
params = {:annotation => {:note => nil, :style => 'style'}}

params[:annotation].each_pair {|k,v| v && @annotation.send("#{k}=", v) }

p @annotation
#<OpenStruct style="style">

@annotation = OpenStruct.new
params = {:annotation => {:note => 'note'}}

params[:annotation].each_pair {|k,v| v && @annotation.send("#{k}=", v) }

p @annotation
#<OpenStruct note="note"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:37:16.120

```
params[:annotation][:note].tap{|v| @annotation.note = v if v} 
params[:annotation][:style].tap{|v| @annotation.style = v if v} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:43:45.363

这里还有另一种方法：

```
@annotation.note = params[:annotation][:note] || @annotation.note 
```

我承认，您确实重复了，`@annotation.note`但语句长度仍然减少了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-28T11:07:07.907

这是另一个尝试：

```
@annotation.note = params[:annotation][:note] rescue nil 
```

@annotation.note`nil`如果`params[:annotation][:note]`不存在，将保留。

# objective-c - UINavigationBar 显示后隐藏视图按钮

> ID：13602812
> 
> 赞同：1
> 
> 时间：2012-11-28T10:23:11.263
> 
> 标签：objective-c, ios, uinavigationbar

我现在在我的应用程序中使用 UINavigationController 。我在这个 navigationcontroller 的视图中添加了一个按钮，这样这个按钮就会出现在 navigationBar 的顶部。问题是当我隐藏导航栏并隐藏按钮并再次显示它们时，导航栏出现在按钮的顶部。任何人都可以解决这个问题吗？

```
@interface MyNavigationController : UINavigationController<UINavigationControllerDelegate>
{

    UIButton *btnBack ;  
}
-(id)initWithRootViewController:(UIViewController *)rootViewController
{
    self = [super initWithRootViewController:rootViewController];
    if (self)
    {
        self.delegate = self ;

        self.navigationBar.barStyle = UIBarStyleBlack;

        //btnBack
        UIImageView *gameImage = [[UIImageView alloc] initWithFrame:CGRectMake(1, 1, 32, 27)];
        self.btnBack = [UIButton buttonWithType:UIButtonTypeCustom];
        self.btnBack.frame = CGRectMake(10, 5.0, 60, 30);
        [self.btnBack setBackgroundImage:[UIImage imageNamed:@"backicon.png"]  forState: UIControlStateNormal];
        [self.btnBack addTarget:self action:@selector(back:) forControlEvents:UIControlEventTouchUpInside];
        [self.btnBack addSubview: gameImage];
        [self.view addSubview:self.btnBack];

    }
    return self ;
}
-(void)hideNavigationItems
{
    [self setNavigationBarHidden:YES animated:YES];
    self.btnBack.hidden = YES ;

}
-(void)showNavigationItems
{
    self.navigationBarHidden = NO;
    self.btnBack.hidden = NO ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:39:35.223

正如评论中所说，尝试：

```
[self.view bringSubviewToFront:btnBack]; 
```

# extjs - 煎茶网格和动作栏

> ID：13602814
> 
> 赞同：1
> 
> 时间：2012-11-28T10:23:12.647
> 
> 标签：extjs, grid, extjs4.1

我在网格上有这个：

```
{                xtype: 'actioncolumn',
            renderer: function (val, metadata, record) {
                if (record.raw.possibleActions != 2) {
                    this.items[0].icon = '';
                    this.items[0].tooltip = '';
                }

                metadata.style = 'cursor: pointer;';
                return val;
            },
            width: 30,
            align: 'center',
            sortable: false,
            items: [{
                icon: 'images/edit.png',
                tooltip: 'stuff',
                handler: function (grid, rowIndex, colIndex) {
                    'do stuff'
                }
            }]
        }, 
```

我希望当字段“possibleActions”不同于 2 时隐藏操作列的图标。

有了这个`this.items[0].icon = '';`，它会从所有列中删除图标......

如何访问与条件匹配的特定行的列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T12:20:59.230

我已经解决了：

```
renderer: function (val, metadata, record) {
                if (record.raw.possibleActions != 2) {
                    this.items[0].icon = '';
                    this.items[0].tooltip = '';
                } else {
                    this.items[0].icon = 'images/edit.png';
                    this.items[0].tooltip = 'RELATÓRIO FINAL';
                }

                metadata.style = 'cursor: pointer;';
                return val;
            }, 
```

渲染器似乎覆盖了初始配置，这就是所有记录都没有图标的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:39:01.350

使用`this`那里确实有风险。您最终可能会遇到其他情况。

但是好的，如果你有我推荐你使用的实例

```
setVisible(false);
disable(); 
```

禁用和

```
setVisible(true);
enable(); 
```

启用。仅仅删除图像是不够的。

# django - django模型保存错误'对象没有属性“field_id”

> ID：13602817
> 
> 赞同：0
> 
> 时间：2012-11-28T10:23:26.270
> 
> 标签：django, model, foreign-keys

我有一个带有 2 个可选字段的简单 django 模型。尝试保存模型时出现错误。

```
class Cart(models.Model):
    shipping = models.ForeignKey(ShippingRate, blank=True, null=True)
    date_created = models.DateTimeField(blank=True, null=True)

    def save(self, *args, **kwargs):
        if not self.date_created:
            self.date_created = datetime.datetime.now()
        super(Cart, self).save(*args, **kwargs) 
```

使用简单视图保存购物车对象，我收到以下错误 -

```
'Cart' object has no attribute 'shipping_id' 
```

`super()`这是失败的呼吁。我已经查看了数据库，并且已经获得了字段`'id'`，`'date_created'`并且`'shipping_id'`在我的桌子上。

我正在使用南管理我的数据库，并且我尝试过删除、迁移和替换字段，但这不起作用。这是一个奇怪的 - 我想我错过了一些明显的东西，但我还没有发现它..

更新

我尝试删除`save()`覆盖，甚至换出字段（然后向南迁移）。我把这个`shipping`领域换成了一个新`shipping_rate`领域——

```
class Cart(models.Model):
    shipping_rate = models.ForeignKey(ShippingRate, blank=True, null=True)
    date_created = models.DateTimeField(blank=True, null=True) 
```

这次我在保存时遇到了同样的错误，只是它是导致它的 date_created 字段。

```
'Cart' object has no attribute 'date_created' 
```

和以前一样，我浏览了我的（postgres）数据库，我可以看到我期望的 3 个字段 - `id`、`shipping_rate_id`和`date_created`.

更新 2

好的，我已将代码缩减为 -

```
#models
class Cart(models.Model):
    shipping_rate = models.ForeignKey(ShippingRate, blank=True, null=True)
    modified = models.DateTimeField(blank=True, null=True)

    class Meta():
        app_label = 'cart'

#views
def add_to_cart(request):
    if 'cart' in request.session:
        cart = request.session['cart']
    else:
        cart = Cart()
    if not cart.pk:
        cart.save()
    return HttpResponse('ok') 
```

还有我的回溯——

```
Traceback:
File "/Users/aidan/Environments/bbhq/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/aidan/Code/bbhq/bbhq/cart/views.py" in add_to_cart
  71\.             cart.save()
File "/Users/aidan/Environments/bbhq/lib/python2.7/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/Users/aidan/Environments/bbhq/lib/python2.7/site-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/Users/aidan/Environments/bbhq/lib/python2.7/site-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/Users/aidan/Environments/bbhq/lib/python2.7/site-packages/django/db/models/query.py" in insert_query
  1575\.     query.insert_values(fields, objs, raw=raw)
File "/Users/aidan/Environments/bbhq/lib/python2.7/site-packages/django/db/models/sql/subqueries.py" in insert_values
  170\.                 value = getattr(obj, field.attname)

Exception Type: AttributeError at /cart/add_to_cart
Exception Value: 'Cart' object has no attribute 'shipping_rate_id' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:23:14.037

如评论中所述，会话中有一个旧实体在添加新字段之前被腌制。

# excel - Word 文档仅在以下情况下从文档中提取表格

> ID：13602820
> 
> 赞同：1
> 
> 时间：2012-11-28T10:23:32.210
> 
> 标签：excel, ms-word, vba

我正在使用这段代码。它打开一个 Word 文档，从文档中提取表格并填充一个 Excel 文件。这部分的一切都很好。现在我只想在单词表的第一个单元格包含此字符串“Row N#”并且我被阻止时填充 Excel 文件。

这是我的代码：

```
 Option Explicit

    Sub ImportWordTable()

    Dim wdDoc As Object
    Dim wdFileName As Variant
    Dim tableNo As Integer 'table number in Word

    Dim iRow As Long 'row index in Excel

    Dim iCol As Integer 'column index in Excel

    Dim resultRow As Long
    Dim tableStart As Integer
    Dim tableTot As Integer

    On Error Resume Next

    ActiveSheet.Range("A:AZ").ClearContents

    wdFileName = Application.GetOpenFilename("Word files (*.doc),*.doc", , _
    "Browse for file containing table to be imported")

    If wdFileName = False Then Exit Sub '(user cancelled import file browser)

    Set wdDoc = GetObject(wdFileName) 'open Word file

    With wdDoc
        tableNo = wdDoc.tables.Count
        tableTot = wdDoc.tables.Count
         If tableNo = 0 Then
           MsgBox "This document contains no tables", _
           vbExclamation, "Import Word Table"
        ElseIf tableNo > 1 Then
            tableNo = InputBox("This Word document contains " & tableNo & " tables." & vbCrLf & _
        "Enter the table to start from", "Import Word Table", "1")
    End If

    resultRow = 4

    For tableStart = 1 To tableTot
        With .tables(tableStart)
            If .tables(tableStart).Cell(1, 1).Range.Value = "Row N#" Then
            'copy cell contents from Word table cells to Excel cells

                For iRow = 1 To .Rows.Count
                    For iCol = 1 To .Columns.Count
                            Cells(resultRow, iCol) = WorksheetFunction.Clean(.Cell(iRow, iCol).Range.Text)
                    Next iCol
                    resultRow = resultRow + 1
                Next iRow
           End If
        End With
        resultRow = resultRow + 1
    Next tableStart
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:36:13.717

`End With`在哪里`wdDoc`？

我不认为你真的要寻找`wdDoc.tables(tableStart).tables(tableStart).Cell(1, 1).Range.Value`这是第 n 个表的第 n 个子表的第一个单元格 - 丢失一个`.tables(tableStart).`

`With`语句似乎是个好主意，但它们会让你容易犯这种错误，尤其是当它们嵌套时。定义一个局部表变量并在循环开始时分配给它，可读性更高，更不容易出错。

另外，我认为这可以通过使用剪切和粘贴功能更快更容易地实现

# jquery-ui - jQuery UI 滑块最大值

> ID：13602822
> 
> 赞同：0
> 
> 时间：2012-11-28T10:23:37.763
> 
> 标签：jquery-ui

有一个滑块。初始化时它得到最大值：1，步长：0.1。
但是在更改值后，它的最大值为 0.9
代码在这里：http: [//jsfiddle.net/8y7Hz/4/](http://jsfiddle.net/8y7Hz/4/)

html:

```
<div class="graph_slider" id="a"></div>
<div id="slider_val"></div> 
```

js：

```
function sliderCange(){
    var s_val = $(this).slider("value");
    $('#slider_val').html(s_val);
}

$(document).ready(function(){    
    $('.graph_slider').each(function() {$(this).slider(
                                                    {
                                                        animate:true,
                                                        slide: sliderCange,
                                                        range: "min",
                                                        max: 1,
                                                        step: 0.1
                                                    });
                                       });
    $('.graph_slider').slider('option','value',1);
    var s_val = $('.graph_slider').slider("value");
    $('#slider_val').html(s_val);
}); 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:42:27.117

这是你的`slide`处理程序。

如果您使用它，它会起作用：

```
function sliderChange(event, ui){
    $( "#slider_val" ).html(ui.value );
} 
```

和

```
slide: function(event, ui) { sliderChange(event, ui); } 
```

jsfiddle 更新。

# c# - C# 多屏幕视图单一窗体

> ID：13602824
> 
> 赞同：4
> 
> 时间：2012-11-28T10:23:40.570
> 
> 标签：c#, winforms, user-interface, show-hide

我在 C# 中创建了一个 GUI，它应该如下所示：

在主屏幕上有两个按钮，`Button1`单击时我不想打开新表单，`form2.show();`但在保持相同表单时我想更改显示。

我通过隐藏 GUI 元素并根据需要显示其他元素来做到这一点。

它可以按我的意愿正常工作，但在设计器视图中`Form1`我不得不创建凌乱的 GUI。

我的问题是这是否是良好的编程习惯？如果不是，那么实现这一目标的最佳或推荐方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T10:54:24.937

您可能想考虑一个“Tabless”选项卡控件，这些天我倾向于在我的很多工作中使用它们，因为使用 win-forms 设计器和它们一起构建界面非常简单快捷。

```
 class TablessTabControl : TabControl
    {
        protected override void WndProc(ref Message m)
        {
            // Hide tabs by trapping the TCM_ADJUSTRECT message
            if (m.Msg == 0x1328 && !DesignMode) m.Result = (IntPtr)1;
            else base.WndProc(ref m);
        }
    } 
```

这将扩展选项卡控件并隐藏顶部的选项卡，然后您可以使用类似于以下的代码以编程方式更改选项卡：

```
 tablessTabControl.SelectTab("tabName"); 
```

这不是我的原创作品，不久前我发现它在网上流传，不记得我在哪里看到的。无论如何，我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:28:02.993

使用 TabControl 怎么样，您可以获得所有想要的“视图”，而不会出现混乱的可见 = `true/false`shizzle。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:31:00.017

您可以创建不同的子控件 View1 和 View2 并根据表单状态和按钮单击显示/隐藏每个控件。

# android - 将图像放入屏幕而不会在 android 中失真

> ID：13602825
> 
> 赞同：0
> 
> 时间：2012-11-28T10:23:42.120
> 
> 标签：android, android-layout, android-imageview

我想在不失真的情况下将图像`900x150`放入屏幕中`1280x800`..任何帮助都将是 gr8 ..这是我的`main.xml`文件

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="centerCrop"
    android:contentDescription="@string/mypicture"
    android:src="@drawable/MyImage"
        />
    </RelativeLayout>
   </ScrollView>
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:27:20.653

您可能应该使用`fitCenter`而不是`centerCrop`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:29:52.623

您可以根据纵横比放大和缩小图像。或者我看到您使用滚动视图简单地为图像大小包装内容，这将完全显示图片而不会失真......

**编辑**

```
private void scaleImage()
{
    // Get the ImageView and its bitmap
    ImageView view = (ImageView) findViewById(R.id.image_box);
    Drawable drawing = view.getDrawable();
    if (drawing == null) {
        return; // Checking for null & return, as suggested in comments
    }
    Bitmap bitmap = ((BitmapDrawable)drawing).getBitmap();

    // Get current dimensions AND the desired bounding box
    int width = bitmap.getWidth();
    int height = bitmap.getHeight();
    int bounding = dpToPx(250);
    Log.i("Test", "original width = " + Integer.toString(width));
    Log.i("Test", "original height = " + Integer.toString(height));
    Log.i("Test", "bounding = " + Integer.toString(bounding));

    // Determine how much to scale: the dimension requiring less scaling is
    // closer to the its side. This way the image always stays inside your
    // bounding box AND either x/y axis touches it.  
    float xScale = ((float) bounding) / width;
    float yScale = ((float) bounding) / height;
    float scale = (xScale <= yScale) ? xScale : yScale;
    Log.i("Test", "xScale = " + Float.toString(xScale));
    Log.i("Test", "yScale = " + Float.toString(yScale));
    Log.i("Test", "scale = " + Float.toString(scale));

    // Create a matrix for the scaling and add the scaling data
    Matrix matrix = new Matrix();
    matrix.postScale(scale, scale);

    // Create a new bitmap and convert it to a format understood by the ImageView 
    Bitmap scaledBitmap = Bitmap.createBitmap(bitmap, 0, 0, width, height, matrix, true);
    width = scaledBitmap.getWidth(); // re-use
    height = scaledBitmap.getHeight(); // re-use
    BitmapDrawable result = new BitmapDrawable(scaledBitmap);
    Log.i("Test", "scaled width = " + Integer.toString(width));
    Log.i("Test", "scaled height = " + Integer.toString(height));

    // Apply the scaled bitmap
    view.setImageDrawable(result);

    // Now change ImageView's dimensions to match the scaled image
    LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) view.getLayoutParams(); 
    params.width = width;
    params.height = height;
    view.setLayoutParams(params);

    Log.i("Test", "done");
}

private int dpToPx(int dp)
{
    float density = getApplicationContext().getResources().getDisplayMetrics().density;
    return Math.round((float)dp * density);
} 
```

# html - html代码行在dreamweaver中变成绿色

> ID：13602827
> 
> 赞同：0
> 
> 时间：2012-11-28T10:23:48.810
> 
> 标签：html, dreamweaver

只是一个简单的问题。html 代码行在 Dreamweaver 中变为绿色是什么意思？例子; `<div class="container">`由于某种原因得到绿色字体颜色。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:21:33.880

我自己刚刚注意到这个“错误”，看起来如果 html 代码嵌入了 php，它会给出误报。

例如

我在注册表单旁边有一个信息面板，如果在提交后检测到错误，即如果该人之前已注册，我会隐藏并显示错误消息。

在 div 标签中，我有 < ?php if ($error==1) echo ('style="display:none"')?> 在文本显示的其余部分产生绿色代码。

希望这可以帮助。

# html - CSS 最小高度不起作用

> ID：13602829
> 
> 赞同：0
> 
> 时间：2012-11-28T10:24:04.303
> 
> 标签：html, css

我有一个下拉菜单，用于网上商店。但是每当我添加更多的项目时，盒子并没有变大，简单的问题吧？答案是“最小高度”。但问题来了！它不工作。我已经使用了很长时间了，这是第一次它不起作用。我需要知道什么具体的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:20:32.580

在 CSS 的第 43 行，您需要将 to 设置为`height`从`auto`第 16 行继承的，作为菜单类声明的一部分。

[这是我刚刚为您完成的完整工作编码示例。](https://blog.stackoverflow.com/2010/10/asking-better-questions/)

# c# - 使用 Asp.Net Web API 将视频流式传输到客户端应用程序

> ID：13602831
> 
> 赞同：4
> 
> 时间：2012-11-28T10:24:07.843
> 
> 标签：c#, asp.net, streaming, asp.net-web-api

我必须编写一个 ASP.NET Web API 来从服务器目录中检索视频或音频文件并将其流式传输到客户端应用程序。我完全是流媒体领域的新手，我想知道服务器是否需要任何基础设施？如果没有，那么任何人都可以将我引向一些示例，或者可以为我提供一些代码开始吗？我根本找不到任何关于它的信息。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T10:56:58.897

您可以直接在您的 ASP.NET Web API 项目中实现视频流，几乎无需特殊的 IIS 配置。

查看此示例如何处理 Web API [http://weblogs.asp.net/andresv/archive/2012/12/12/asynchronous-streaming-in-asp-net-webapi.aspx中的 straming](http://weblogs.asp.net/andresv/archive/2012/12/12/asynchronous-streaming-in-asp-net-webapi.aspx)

另请阅读这篇文章，了解有关流式传输的 IIS 配置和利用的一些有用细节。

[http://www.strathweb.com/2012/09/dealing-with-large-files-in-asp-net-web-api/](http://www.strathweb.com/2012/09/dealing-with-large-files-in-asp-net-web-api/)

# perl - 捕获 STDERR

> ID：13602832
> 
> 赞同：0
> 
> 时间：2012-11-28T10:24:23.260
> 
> 标签：perl

运行此命令时，我试图仅捕获 STDERR

```
my @output = `cleartool setview -exec "cd $myPath; $myBuildCommand" $myView 1>/dev/null`; 
```

但是，我总是在 @output 中同时获得 STDERR 和 STDOUT。

我试图从运行 $myBuildCommand 中捕获警告和错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:27:31.780

在将 STDOUT 重定向到`/dev/null`. 顺序很重要！

```
my $stderr = `some-command 2>&1 > /dev/null`; 
```

如果您颠倒重定向的顺序，则 STDERR 和 STDOUT 都以`/dev/null`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T15:11:06.060

如果你想做任何类型的非平凡命令捕获你几乎肯定想要`IPC::Run`的 .

```
use IPC::Run 'run';

my $exitcode = run [ $command, @args ], '>', \my $stdout, '2>', \my $stderr; 
```

此时，两个标量`$stdout`和`$stderr`现在将包含程序分别写入 STDOUT 和 STDERR 的任何内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T10:34:27.220

要捕获命令的 STDERR 但丢弃其 STDOUT（此处排序很重要）：

```
 my @output = `cmd 2>&1 1>/dev/null`; 
```

另请参阅[如何从外部命令捕获 STDERR？](http://perldoc.perl.org/perlfaq8.html#How-can-I-capture-STDERR-from-an-external-command?)在 perlfaq8.

# java - Java：使用 Jodd Jerry - NoClassDefFoundError

> ID：13602835
> 
> 赞同：1
> 
> 时间：2012-11-28T10:24:39.017
> 
> 标签：java, jquery, static-libraries, noclassdeffounderror, jodd

我想在 java 中使用 Jodd 库，因为我想尝试[Jerry](http://jodd.org/doc/jerry/index.html)。为此，我包含了[该问题](https://stackoverflow.com/questions/825521/how-do-you-use-a-java-library)的答案中所示的库，并使用了以下代码：

```
File file = new File(SystemUtil.getTempDir(), "test.html");
NetUtil.downloadFile("http://de.wikipedia.org/wiki/Toastbrot", file);
Jerry doc = Jerry.jerry(FileUtil.readString(file)); 
```

执行此代码会产生以下错误消息：

> ```
>  Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
>       at jodd.lagarto.LagartoParserEngine.<clinit>(LagartoParserEngine.java:22)
>       at jodd.jerry.Jerry$JerryParser.createLagartoDOMBuilder(Jerry.java:80)
>       at jodd.jerry.Jerry$JerryParser.<init>(Jerry.java:73)
>       at jodd.jerry.Jerry.jerry(Jerry.java:121)
>       at jodd.jerry.Jerry.jerry(Jerry.java:53)
>       at sla.htmlf.Main.test(Main.java:36)
>       at sla.htmlf.Main.main(Main.java:19)
>     Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
>       at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
>       at java.security.AccessController.doPrivileged(Native Method)
>       at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
>       at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
>       at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
>       at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
>       at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:334)
>       ... 7 more 
> ```

*在 sla.htmlf.Main.test(Main.java:36) 在 sla.htmlf.Main.main(Main.java:19) 当然是指我的项目的类*

这是我第一次遇到 NoClassDefFound 异常。似乎缺少 org.slf4j.LoggerFactory ，但如果我没记错的话，那就是 jodd 库使用的东西 - 那么应该包含在那里，对吧？

我真的很感激一些建议/帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:25:49.080

看起来您缺少其他库之一引用的[slf4j](http://www.slf4j.org/download.html)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:28:24.620

添加`slf4j-api-1.7.2.jar`到您的类路径。

下载：[http ://www.slf4j.org/dist/slf4j-1.7.2.zip](http://www.slf4j.org/dist/slf4j-1.7.2.zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T09:15:12.607

正如您在[下载页面](http://jodd.org/download/index.html#Maven)上看到的，**jodd-lagarto**模块（**Jerry**所属的）依赖于 SLF4J 日志库。

请阅读有关[登录 Jodd 的](http://jodd.org/doc/logging-jodd.html)更多信息。在此页面上，您还可以找到一些*快速步骤*来设置您的环境并使其工作。

这些步骤是：

*   访问[http://www.slf4j.org/download.html](http://www.slf4j.org/download.html)并下载 SLF4J 分发包。
*   将**slf4j-api-XXXjar**放在类路径上
*   如果您不想要任何日志记录，只需将**slf4j-nop-XXXjar**放在类路径中。
*   否则，请访问[http://logback.qos.ch/download.html](http://logback.qos.ch/download.html)并下载 LOGback 分发包。
*   将**logback-core.jar**和**logback-classic.jar**放在类路径上。

使用 SLF4J，您可以选择要使用的日志记录框架：none、log4j、commons 等；Jodd 作者推荐[logback](http://logback.qos.ch/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:36:51.070

[缺少 slf4j-api-1.7.2.jar](http://www.slf4j.org/dist/slf4j-1.7.2.zip)和[commons-logging-](http://mirror.softaculous.com/apache//commons/logging/binaries/commons-logging-1.1.1-bin.zip) 1.1.1.jar

# iphone - 将值从一个类传递到另一类

> ID：13602840
> 
> 赞同：0
> 
> 时间：2012-11-28T10:24:58.540
> 
> 标签：iphone, nsstring, uilabel

我`AddNotesViewController`在`DetailsOfPeopleViewController`.

我想做的就是我们在`UITextView`1 个班级中输入的任何内容，应该在`UILabel`另一个班级中显示。

在文件中`AddNotesViewController.h`

```
 UITextView *txtView;

  @property(nonatomic,retain)IBOutlet     UITextView *txtView; 
```

在文件中`AddNotesViewController.m`

```
 @synthesize txtView; 
```

之后，当我单击选项卡栏项目“保存”时，它应该保存在数据库中，它保存到数据库并显示值，但它没有将值传递给

`DetailsOfPeopleViewController`.

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item{

        NSLog(@"Tabbar selected itm %d",item.tag);

       switch (item.tag) {
          case 0:

         appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

        NotesTable *crashNotInvolvingObj11 = (NotesTable *)[NSEntityDescription       
    insertNewObjectForEntityForName:@"NotesTable" inManagedObjectContext:[appDelegate    managedObjectContext]];

        // CameraViewController *camera=[[CameraViewController alloc] init];
            crashNotInvolvingObj11.personNote=[NSString    stringWithFormat:@"%@",txtView.text];

        DetailsOfPeopleViewController *detail=[DetailsOfPeopleViewController alloc];
        detail.testPersonNotesStr  =[NSString stringWithFormat:@"%@",txtView.text];
        //(value of testPersonNotesStr is DISPLYING here... )
        [appDelegate saveContext];
        [detail release];

        break;
        ..................

     } 
```

在`DetailsOfPeopleViewController.h`

```
 NSString *testPersonNotesStr;
    UILabel *PersonNotesLbl;

     @property(nonatomic,retain)IBOutlet UILabel *PersonNotesLbl;
     @property(nonatomic,retain) NSString *testPersonNotesStr; 
```

在`DetailsOfPeopleViewController.m`

```
 @synthesize PersonNotesLbl;
       @synthesize  testPersonNotesStr;

      - (void)viewDidLoad
      {
         [super viewDidLoad];
            [PersonNotesLbl setText:testPersonNotesStr];

         NSLog(@"PERSON NOTE is........ %@",testPersonNotesStr);
           //(value of testPersonNotesStr is NOT DISPLYING here..... )

        } 
```

请指导我在哪里做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:33:59.463

您将其设为属性，因此可能尝试使用 set 方法。此外，您需要在设置值之前初始化 ViewControlelr。所以：

```
DetailsOfPeopleViewController *detail=[[DetailsOfPeopleViewController alloc] init];
[detail setTestPersonNotesStr:[NSString stringWithFormat:@"%@",txtView.text]]; 
```

而且我看不到您实际显示此视图的位置，您必须显示此视图的相同实例才能实际看到该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:35:13.850

使用委托传递值[使用此参考](http://agilewarrior.wordpress.com/2012/03/19/simple-objective-c-protocol-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:23:54.703

只需在你的代码中做几件事你就会得到你的字符串

**1 :->**

**全局声明**您的 DetailsOfPeopleViewController 。

即在.h

```
DetailsOfPeopleViewController *detail 
```

**2：->**

在你的 viewDidLoad 中分配它在内存中

```
detail=[[DetailsOfPeopleViewController alloc] init]; 
```

**3：->**

只需声明要复制的字符串属性

```
@property(nonatomic,copy) NSString *testPersonNotesStr; 
```

或者

您可以使用 NSUserDefault 发送数据

**设定值**

```
NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[NSString stringWithFormat:@"%@",txtView.text]; forKey:@"testPersonNotesStr"];
[defaults synchronize]; 
```

**获取值**

```
testPersonNotesStr = [[NSUserDefaults standardUserDefaults] objectForKey:@"testPersonNotesStr"];
NSLog(@"PERSON NOTE is........ %@",testPersonNotesStr); 
```

按照我的回答[，我在 addViewController 中有 NSString 值，我想在 DetailsViewController 的 UILabel 中显示这个值](https://stackoverflow.com/questions/13509999/i-have-nsstring-value-in-addviewcontroller-and-i-want-to-display-this-value-in-u/13619879#13619879)

# apache - Nginx 反向代理（在 apache 中重写静态文件）

> ID：13602841
> 
> 赞同：2
> 
> 时间：2012-11-28T10:25:00.053
> 
> 标签：apache, mod-rewrite, nginx, hosting, reverse-proxy

我在 Apache 前面的 Nginx（设置为反向代理）有一些问题。我正在使用 Apache 来提供 PHP 文件并应用 .htaccess 规则。

Nginx 可以工作，但 .htaccess 中的一些重写没有。

我使用 timthumb.php 来管理媒体，例如：

```
/cache/150/100/file.jpg > /media/thumb.php?src=images/file.jpg&w=150&h=100 
```

重写规则仅适用于 PHP 应用程序，但不适用于上述静态文件。当我尝试执行自己的静态规则时，Nginx 返回 404。

```
RewriteEngine On

RewriteRule ^cache/([0-9]+)/([0-9]+)/([a-z0-9_\-\.\/]+)$ /media/thumb.php?src=images/$3&w=$1&h=$2 [L]
RewriteRule ^upload/([0-9]+)/([0-9]+)/([a-z0-9_\-\.\/]+)$ /media/thumb.php?src=upload/$3&w=$1&h=$2 [L]

<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule .* index.php/$0 [PT] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:59:23.953

我猜你是通过 nginx 直接为你的“/upload”和“/cache”目录提供服务 - 没有将它传递给 apache。

尝试以下规则：

```
 location ^~ /upload {
        .......
 }

 location ^~ /cache {
        .......
 } 
```

在您在 nginx 配置中提供静态文件的位置之前。让我知道它是否有效 - 如果没有 - 也粘贴 nginx 配置的一部分。

更多阅读：[http ://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

取决于您在代理期间如何配置您的位置 - 它们具有不同的优先级。

# javascript - 如何防止我的 HighChart 条形图倒置？

> ID：13602846
> 
> 赞同：3
> 
> 时间：2012-11-28T10:25:22.090
> 
> 标签：javascript, charts, highcharts

由于某些奇怪的原因[，HighChart 的文档](http://api.highcharts.com/highcharts#chart.inverted)说条形图是自动倒置的。我不想要这个，有人有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:45:41.640

原来这是一个术语问题。

我称之为甘特图，称为条形图，我称之为条形图，它们称为柱形图。问题解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:48:57.097

您可以设置选项，以便 Highcharts 不反转 x 轴系列的顺序，因此轴反转但条形系列本身不反转：

```
var chart = new Highcharts.Chart({
    ...
    xAxis: {
        reversed: false
        ...
    }
    ...
}); 
```

JSFiddle：http: [//jsfiddle.net/K5tpe/](http://jsfiddle.net/K5tpe/)

Highcharts 文档：[http ://api.highcharts.com/highcharts#xAxis.reversed](http://api.highcharts.com/highcharts#xAxis.reversed)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-08T08:29:26.470

我遇到了同样的问题，没有一个答案有帮助，但我更改了 highcharts.js 的源代码，pa = ka(wa, { type: "bar", reversed: !0 }); 这个地方强制 bar 的图表被反转，所以我只能更改源代码以删除默认行为，例如 pa = ka(wa, { type: "bar", reversed: 0 });

今天发现自己好傻，直接用“column”类型，“column”和“bar”倒置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:34:52.433

我认为这只是措辞不佳的文档-“**当为 true**时，默认情况下 x 轴是反转的”（我的 emph）实际上默认情况下会执行您期望的操作！（即句子的“默认”部分非常具有误导性！）

如果您通过文档中的“试用”链接查看 jsFiddle 中的示例代码，您将看到以下行：

> 倒置：真

此设置会覆盖默认行为，如果您将其删除并单击运行，您将看到正常的服务恢复！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:37:55.793

默认情况下 highchart 集：

```
inverted: false 
```

所以你不用担心，我设置它`true`然后它会被反转。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-24T09:08:19.770

似乎在最新版本 v4.2.3 中`false`默认为它。

# java - 用等待测量执行时间的影响？

> ID：13602852
> 
> 赞同：0
> 
> 时间：2012-11-28T10:25:35.740
> 
> 标签：java, performance

我正在做一个项目，该项目测量某种方法的计算时间对某些框架的性能的影响。我想知道具有不同时间的 sleep() 是否足以做到这一点？特别是对于大规模线程并行的 fork/join 框架，sleep() 应该等待 x 秒。我的意思是，当线程 Y 正在执行时，线程 Z 的睡眠，然后没有执行，不应该计算在内。可以说，睡眠应该使处理器锁定当前线程。

基本上： sleep(x) 会在 x 有效执行时间秒内休眠，还是会在线程空闲时计算时间？

我在网上找不到任何信息，可能是因为我不知道正确的术语，因为它看起来像是一个相当基本的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:01:43.503

sleep() 不会使处理器锁定在当前线程上，处理器使线程处于非活动状态并继续与其他线程一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:55:22.753

Thread.sleep() 顾名思义，使线程进入睡眠状态。它故意和故意停止线程，并且操作系统在唤醒时可能在另一个 cpu 上启动它。

目前尚不清楚您要做什么，或者当您需要将线程锁定到核心时是否要让它们进入睡眠状态。

# javascript - 通过 Javascript 轻松更改工具提示内容

> ID：13602853
> 
> 赞同：0
> 
> 时间：2012-11-28T10:25:43.400
> 
> 标签：javascript, tooltip

您能帮我通过 Javascript 动态更改 Easy Tooltip 的内容吗？我几乎尝试了一切：

```
document.getElementById('easy_tooltip').innerHTML(tooltipContent);
$("#easy_tooltip").html(tooltipContent);
$("#easy_tooltip").content(tooltipContent); 
```

但它不起作用。我无法访问该元素的内容。

该示例可在[此处](http://jsfiddle.net/k7UZ7/)找到。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:46:20.917

这个插件的构建方式是使用`title`你元素的属性，所以你可以像这样更新你的 HTML 代码：

```
<a href="#" id="tooltip-1" class="tooltip" title="Tooltip 1">Tooltip 1</a>
<br />
<a href="#" id="tooltip-2" class="tooltip" title="Tooltip 2">Tooltip 2</a> 
```

（见[这个小提琴](http://jsfiddle.net/scaillerie/UGrkq/1/)）

如果您需要动态内容，您可以随时使用 jQuery 修改此属性：

```
$("#tooltip-1").attr("title", "mycontent"); 
```

# date - date.js - 按日期获取给定周的星期一

> ID：13602857
> 
> 赞同：1
> 
> 时间：2012-11-28T10:25:58.633
> 
> 标签：date, datejs

如何根据提供的日期获得给定一周的星期一？

当我这样做`BaseDate.parse("last monday");`时，我得到一个错误。

```
InitDate = "29/10/2013" // Some Date
BaseDate = Date.parse(InitDate); // Tue Oct 28 2013 00:00:00 GMT+0000 (GMT Standard Time)  

CurrentWeekMonday = BaseDate.parse("last monday");
//TypeError: Object Wed Nov 28 2012 00:00:00 GMT+0000 (GMT Standard Time) has no method 'parse' 
```

任何建议都非常感谢。

# mysql - 监控 MySQL Slave 复制状态

> ID：13602862
> 
> 赞同：3
> 
> 时间：2012-11-28T10:26:15.383
> 
> 标签：mysql, database-replication

在 MySQL 主服务器中提交 SQL 插入操作后，我们在从服务器中找不到该结果至少 5 秒。这种情况并非在每个查询中都会发生，但偶尔会发生。

有人知道我们如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:31:31.450

使用此命令检查从属状态或检查此链接[**复制状态**](http://dev.mysql.com/doc/refman/5.1/en/replication-administration-status.html)

```
Show slave status; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T12:31:47.647

您可以执行`show slave status;`查询并检查输出，如果`seconds_behind_master`显示`0`和新更新不适用于从属设备，则使用[Chnage Master.. 命令重置您的主设置](http://dev.mysql.com/doc/refman/5.0/en/change-master-to.html)

# node.js - Node/Express - 对于 PUT 请求，bodyParser 为空

> ID：13602865
> 
> 赞同：6
> 
> 时间：2012-11-28T10:26:27.800
> 
> 标签：node.js, rest, express, put

我在 bodyParser 中遇到 Express 错误，无法解析任何 PUT 请求...我的配置设置如下：

```
 app.use(express.bodyParser());
 app.use(express.methodOverride());
 app.use(express.query());
 app.use(app.router); 
```

但是，每次我向端点发出 PUT 请求时，req.body 都会返回“未定义”。

我尝试通过 Chrome REST 控制台发出请求，也尝试通过 jQuery ajax 请求，如下所示：

```
 $.ajax({
     url: 'https://localhost:4430/api/locations/5095595b3d3b7b10e9f16cc1',
     type: 'PUT',
     data: {name: "Test name"},
     dataType: 'json'
 }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:08:14.893

您还需要将 Content-Type 设置为`application/json`. 您的 jQuery 请求应该是：

```
$.ajax({
     url: 'https://localhost:4430/api/locations/5095595b3d3b7b10e9f16cc1',
     type: 'PUT',
     contentType: 'application/json',
     data: JSON.stringify({name: "Test name"}),
     dataType: 'json'
 }); 
```

否则，正文解析器将不会尝试解析正文。

**编辑**：这是我的测试代码

1.  跑`express test`

2.  在 中添加`/test`路线`app.js`：

```
app.all('/test', routes.test);

```

和`routes/index.js`：

```
export.test = 函数（请求，资源）{
  控制台.log(req.body);
  res.send({status: 'ok'});
};

```

1.  在 index.jade 中链接 jQuery 和以下脚本：

```
$（函数（）{
  $('#test').click(function () {
    $.ajax({
      网址：'/测试'，
      类型：'PUT'，
      内容类型：'应用程序/json'，
      数据：JSON.stringify（{name：“测试名称”}），
      数据类型：'json'
    });
  });
});

```

当我运行它时，我得到以下日志：

```
Express 服务器监听 3000 端口
获取 / 200 26ms - 333
获取 /stylesheets/style.css 304 2ms
获取 /javascripts/test.js 304 1ms
{ name: '测试名称' }
放置/测试 200 2ms - 20

```

# jquery - 如何切换内容 - 一个 div 打开，另一个 div 关闭

> ID：13602866
> 
> 赞同：1
> 
> 时间：2012-11-28T10:26:37.270
> 
> 标签：jquery, toggle

我有这个完美运行的切换脚本，但是我想合并到我的原始切换代码中的是它一次只允许`div`显示一个。因此，当一个`div`打开并单击另一个链接打开另一个`div`时，第一个 div 应该关闭。

以及如何使当有人访问该页面时已经打开了第一个页面？

```
// Content Toggle
jQuery(function($){
    // Initial state of toggle (hide)
    $(".slide_toggle_content").hide();

    // Process Toggle click (http://api.jquery.com/toggle/)
    $("h4.slide_toggle").toggle(function(){
        $(this).addClass("clicked");
    }, function () {
        $(this).removeClass("clicked");
    });

    // Toggle animation (http://api.jquery.com/slideToggle/)
    $("h4.slide_toggle").click(function() {
        $(this).next(".slide_toggle_content").slideToggle();
    });
}); 
```

有任何想法吗？提前致谢。

# linux - 是否可以在make文件中使用从bash脚本导出的变量？

> ID：13602871
> 
> 赞同：4
> 
> 时间：2012-11-28T10:26:53.387
> 
> 标签：linux, bash, unix, makefile

我相信可以在 make 文件中使用环境变量的值。

因为我是 bash 和 make 的新手，所以很难弄清楚如何做。

我尝试了以下，但没有成功。

**在重击中**

```
TEST_VAR=1

export TEST_VAR 
```

**在制作文件中**

```
ifeq ($(TEST_VAR),1)

COMMON_OBJECTS               += Test1.o

endif 
```

但它不编译Test1.cpp。

我的 make 文件只包含这些行，我将 COMMON_OBJECTS 添加到另一个文件中定义的另一个变量中。

如果我评论这个 ifeq 条件 Test1 正在编译。但我正在寻找一种有条件地做到这一点的方法。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:44:51.380

如果您在 bash 脚本文件中执行“In bash”命令，则必须在执行前加上“.”。也就是说，如果 bash 文件被称为“脚本”，那么

```
$ . script
$ make 
```

这是因为每个脚本都在它自己的 bash 实例中运行，除非你在它前面加上“.”。然后在调用它的同一个 bash 上执行它。

# search - 搜索数百万文档的最佳方法是什么？

> ID：13602879
> 
> 赞同：0
> 
> 时间：2012-11-28T10:27:16.383
> 
> 标签：search, full-text-search, search-engine

我正在开发一个搜索项目，以构建一个搜索数百万个文档的搜索引擎，需要帮助了解现有的最佳方法是什么，起点等。我还尝试过 ElasticSearch 和 Apache SOLR，比如大约 1000 万文件，但他们需要的时间是几秒钟（2-4 秒）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:22:54.633

对于数以百万计的文档和相当快的全文搜索，您将无法使用[术语文档矩阵](http://en.wikipedia.org/wiki/Document-term_matrix)或其他类型的[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)等方法绕过适当的搜索引擎。

我建议**阅读**全文搜索引擎基础知识以获得最重要的想法，然后寻找一个可以满足您需求的优秀库。（如果您不准备投入大量时间，我不建议您编写自己的搜索引擎。）

推荐阅读：

*   [搜索引擎基础](http://en.wikipedia.org/wiki/Search_engine_indexing)
*   [全文搜索](http://en.wikipedia.org/wiki/Full_text_search)
*   [Precision and Recall（信息检索上下文）](http://en.wikipedia.org/wiki/Precision_and_recall#Definition_.28information_retrieval_context.29)

（不确定你是否需要这些指针，如果你已经知道这些东西，对你有好处。；））

* * *

=> 至于使用什么的实际**建议**：我成功地使用了[Apache 的 Lucene](http://lucene.apache.org/core/)，这是一个用于 Java 的全文搜索引擎库。它在文档索引、标记化、词干提取、停用词等方面提供了很大帮助。它还使您能够将搜索从逻辑组合的关键字拼接在一起（例如，搜索“foo”但只显示不包含“bar”的文档或'qux 等）。

当时我索引了几百万个文档，并且能够在很短的时间内获得搜索结果，即没有明显的延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:11:09.867

Sphinx ( [http://sphinxsearch.com/](http://sphinxsearch.com/) ) 是另一个专门用于全文搜索的软件，具有与 Lucene 接近的一组功能，除了它是具有客户端 API 和多种语言绑定的独立服务器。

一些知名网站，如 craiglist 将其用作搜索引擎，结果非常好，如网站所述：

> 据传，免费分类广告网站 Craigslist.org 每天针对 Sphinx 发起约 250,000,000 万次查询。信不信由你，这是通过 15 个集群 Sphinx 盒子完成的，在高峰期只消耗它们总容量的 1/4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:22:28.940

ElasticSearch 建立在 Lucene 之上，主要关注引擎的“弹性”。如果每个文档不大，10M 文档可以放入内存，那么可以考虑高级解决方案，例如 SRCH2，它可以支持毫秒级的搜索，具有许多高级功能。

# php - 如何在 wordpress 中添加自定义 HTML 表单？

> ID：13602880
> 
> 赞同：2
> 
> 时间：2012-11-28T10:27:19.410
> 
> 标签：php, wordpress

是否有任何插件可以在 wordpress 博客中添加自己的 HTML 表单。我想将自己的表单集成到 wordpress 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T09:36:26.180

这是一篇博客文章，解释了如何做到这一点以及更多内容：[http ://shibulijack.wordpress.com/2012/03/18/create-custom-forms-in-wordpress/](http://shibulijack.wordpress.com/2012/03/18/create-custom-forms-in-wordpress/)

基本上，您只需将表单 html 添加到页面编辑器中的页面（在文本模式下），然后使用您的 php 脚本 url 作为表单的操作属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:31:23.790

查看高级自定义字段插件，您可以在其中简单地将表单添加到您的博客 [http://wordpress.org/extend/plugins/advanced-custom-fields/](http://wordpress.org/extend/plugins/advanced-custom-fields/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T12:55:55.693

这是我曾经做过的事情，我很确定有更好的方法可以做到这一点：

```
File: myform.php, in the root of the wordpress folder
<?php
set_include_path(
    get_include_path().PATH_SEPERATOR.
    pathinfo($_SERVER['SCRIPT_FILENAME'],PATHINFO_DIRNAME));

require('wp-blog-header.php');

header('response: 200 OK');

//change this to match the theme,.. maybe use a function from wordpress instead, i was in a hurry so i didnt make it fancy like that
include "wp-content/themes/twentyten/header.php";
 // Form code here...
include "wp-content/themes/twentyten/footer.php";
?> 
```

然后在wordpress管理区新建一个页面，把这段代码放到源码视图中：

`<script type="text/javascript">window.location.href='path/to/myform.php';</script>`

但如前所述，这是一种不好的方法，但它完成了工作。

# ios - 在多个子类之间共享故事板视图控制器

> ID：13602891
> 
> 赞同：10
> 
> 时间：2012-11-28T10:27:43.060
> 
> 标签：ios, cocoa-touch, uistoryboard, uistoryboardsegue

[我和佩德罗在这里](https://stackoverflow.com/questions/12268888/how-to-share-one-storyboard-scene-between-multiple-uiviewcontrollers)有同样的问题，但对答案不满意，因为已经有赏金和奖励，所以我创建了这个问题，我会尽快添加赏金。

`MFMasterViewController`我想在代码中创建或操作一个segue（以黄色突出显示），以便主视图是（以红色突出显示）的多个子类中的任何一个。

> ![故事板插图](../Images/28632a9610f16b7db271413f184c2afb.png)
> 
> 使用 Nibs 执行此操作时，我可以创建一个 Nib，`SharedNib.xib`并将类设置为`MFMasterViewController`，然后创建我的子类，例如 `MFMasterViewControllerSubclassA`，`MFMasterViewControllerSubclassB` 等等，然后实例化我想要使用的任何子类...
> 
> ```
> MFMasterViewControllerSubclassA *controller = [[MFMasterViewControllerSubclassA alloc] initWithNibName:@"SharedNib" bundle:nil]; 
> ```
> 
> 或者...
> 
> ```
> MFMasterViewControllerSubclassB *controller = [[MFMasterViewControllerSubclassB alloc] initWithNibName:@"SharedNib" bundle:nil]; 
> ```
> 
> 等等
> 
> 关于我如何使用情节提要来做到这一点的任何线索？

我不能对 Pedro 的问题使用提供的答案，我的子类化超出了数据源和委托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:16:21.990

您可以将未连接的视图控制器添加到情节提要中并为它们提供标识符。然后在代码中，您可以在导航控制器子类中执行以下操作：

```
MFMasterViewControllerSubclassA *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"SubclassA"];
self.viewControllers = @[controller]; 
```

这会将导航控制器的根视图控制器更改为控制器。如果您想为更改设置动画，那么您可以使用 setViewControllers:animated: 而不是第二行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T14:54:26.330

我知道这是一个旧帖子，但我想我会回应，因为它还没有被回答。这并不难做到。无论您希望在何处引用您的超类，只需通过适当的子类引用它即可。子类包含超类所做的一切。有很多方法可以做到这一点，具体取决于您希望如何进行转场。如果您使用的是 prepareForSegue ，请这样做：

1.  从按钮或其他任何东西创建一个segue。
2.  为其分配一个 id
3.  将您的子类导入 .m 文件
4.  在 prepareForSegue 中执行以下操作。

    ```
    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
       {
          if ([segue.identifier isEqualToString:@"YourID"]) {
                SubclassA *subA = segue.destinationViewController; // the file's owner in the storyboard is set to the super class
                subA.someString = @"subclass A is setting this";
            }
       } 
    ```

这是非常有限的，因为您正在共享故事板场景并且没有场景的子类。例如，您必须隐藏元素，然后在使用特定子类实例化时取消隐藏它们。另一种方法是根据你从哪里开始在一个类上设置一个布尔值，然后编写条件代码。后一种方式可能被认为有点代码味道，但它比复制故事板要好，这可能是一个非常糟糕的主意。

# android - Android SDK (Eclipse IDE) 中的 Tableview/ListView 用于任何类型的日程安排

> ID：13602892
> 
> 赞同：0
> 
> 时间：2012-11-28T10:27:43.450
> 
> 标签：android, eclipse, listview

我在上述适用于 Android 的 IDE 中实施学校时间表时遇到问题。这个想法是用户可以为课程设置时间，并且它们将显示在该视图中。最好使用哪种视图？如何连接？

知道尝试实施它的最佳方法是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:36:42.063

在第一个屏幕上以 gridview/table view 选择日期。在第二个屏幕上显示自定义列表视图，其中包含时间段的日期和亵渎。您需要添加按钮以在列表视图中添加时间。单击该按钮显示需要时间和说明的输入对话框，

希望这就是你的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:00:13.797

创建 schedule.xml

```
<?xml version="1.0" encoding="utf-8"?>  
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:scrollbars="vertical">

<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
<RelativeLayout  
xmlns:android="http://schemas.android.com/apk/res/android"  
android:layout_height="fill_parent"  
android:layout_width="fill_parent"
android:background="#000000"
android:id="@+id/RelativeLayout"
android:clickable="true"
>

<TextView
    android:id="@+id/tv01"
    android:layout_height="wrap_content"
    android:text="Monday"
    android:textColor="#000" >
</TextView> 
```

对于每个 textView，我创建了一个 relativeLayout，其中在提到的 textView 下方插入了一个 listView。每个 listView 都是从 sqllite 数据库填充的，单击它会调用填充数据库的新活动。希望有所帮助。

# java - 如何在不重叠的情况下更改 JFree 图表？

> ID：13602893
> 
> 赞同：1
> 
> 时间：2012-11-28T10:27:45.137
> 
> 标签：java, jfreechart

您好，我已附上屏幕截图供您考虑。我将 Jfree 图表用于条形图并使用百分比。在某些情况下，PERCENTAGE 和 COUNT 会重叠。所以请给我在JFree图表中重叠的建议。

![在此处输入图像描述](../Images/4abdf442ef9e0a9d0f53191c1dbd9fe0.png)

## 我的示例代码是：

```
public void writeOccurrenceBasedParetoChart(HttpServletResponse response) throws IOException
    {
        String METHOD_NAME = "writeOccurrenceBasedParetoChart";
        log.entering(CLASS_NAME, METHOD_NAME);

         CategoryDataset dataset1 = createDataSetForPercentBasedChart1();
         CategoryDataset dataset2 = createDataSetForPercentBasedChart2();
         String rangeAxisLabel = "";
         String numOfSupplrs = "";
         //Behind Schedule "4"
         if(searchRatingElement.equalsIgnoreCase("4"))
         {           
             System.out.println("*******************searchRatingElement"+searchRatingElement);
             rangeAxisLabel = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpcs");
         }
         else 
         {
             rangeAxisLabel = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpcs");
         }

         JFreeChart chart = ChartFactory.createBarChart(
                "",       // chart title
                "",               // domain axis label
                rangeAxisLabel,                  // range axis label
                dataset1,                  // data
                PlotOrientation.VERTICAL, // orientation
                true,                     // include legend
                true,                     // tooltips?
                false                     // URLs?
            );

            // NOW DO SOME OPTIONAL CUSTOMISATION OF THE CHART...

            // set the background color for the chart...
            chart.setBackgroundPaint(Color.white);
            CategoryPlot plot = (CategoryPlot) chart.getPlot();
            plot.setBackgroundPaint(Color.lightGray);

            plot.setDataset(1, dataset2);
            plot.mapDatasetToRangeAxis(1, 1);

            CategoryItemRenderer renderer1 = plot.getRenderer();
            renderer1.setSeriesItemLabelGenerator(0,new CategoryItemLabelGenerator() {

                public String generateRowLabel(final CategoryDataset arg0, final int arg1) {
                    // TODO Auto-generated method stub
                    return null;
                }

                public String generateLabel(final CategoryDataset dataset1,final int series,final int category) {
                    String result = null;
                    //CHAPTER 12\. ITEM LABELS 91
                    final Number value = dataset1.getValue(series, category);
                    if (value != null) {
                    final double v = value.doubleValue();
                    if (v > 0) {
                    result = value.toString(); // could apply formatting here
                    }
                    }
                    return result;
                    }

                public String generateColumnLabel(final CategoryDataset arg0, final int arg1) {
                    // TODO Auto-generated method stub
                    return null;
                }
            });
            renderer1.setSeriesItemLabelsVisible(0,true);

            BarRenderer renderer = (BarRenderer) plot.getRenderer();
            renderer.setDrawBarOutline(false);
            renderer.setSeriesOutlinePaint(0,Color.BLACK);
            renderer.setDrawBarOutline(true);
            renderer.setMaximumBarWidth(0.02);
            renderer.setSeriesPaint(0,new Color(170, 0, 85));          

            CategoryAxis domainAxis = plot.getDomainAxis();
            domainAxis.setCategoryLabelPositions(CategoryLabelPositions.createUpRotationLabelPositions(.6));  
            domainAxis.setLabelFont(new Font("Helvetica", Font.BOLD, 14));
            domainAxis.setTickLabelFont(new Font("Helvetica", Font.BOLD, 14));

             //Behind Schedule "4"
             if(searchRatingElement.equalsIgnoreCase("4"))
             {           
                 System.out.println("||||||||||||||||||||||||||||||||searchRatingElement"+searchRatingElement);
                 numOfSupplrs = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.bhndschpctforchart");
             }
             else 
             {
                 numOfSupplrs = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpctforchart");
             }

            ValueAxis axis2 = new NumberAxis(numOfSupplrs);
            axis2.setLabelFont(new Font("Helvetica", Font.BOLD, 14));    
            axis2.setTickLabelFont(new Font("Helvetica", Font.PLAIN, 14));
            //if(!this.isValueDataZeros)
                //axis2.setRange(0,13);
            plot.setRangeAxis(1, axis2);

            NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
           // if(!this.isNumberDataZeros)
                //rangeAxis.setRange(0,90);
           //rangeAxis.setTickUnit(new NumberTickUnit(1)); 
           rangeAxis.setLabelFont(new Font("Helvetica", Font.BOLD, 14));
           rangeAxis.setTickLabelFont(new Font("Helvetica", Font.PLAIN, 14));

            LineAndShapeRenderer renderer2 = new LineAndShapeRenderer();
            renderer2.setSeriesPaint(0, Color.BLUE);
            /*Start */
            renderer2.setSeriesItemLabelGenerator(0,new CategoryItemLabelGenerator() {

                public String generateRowLabel(final CategoryDataset arg0, final int arg1) {
                    // TODO Auto-generated method stub
                    return null;
                }

                public String generateLabel(final CategoryDataset dataset1,final int series,final int category) {
                    String result = null;
                    //CHAPTER 12\. ITEM LABELS 91
                    final Number value = dataset1.getValue(series, category);
                    if (value != null) {
                    final double v = value.doubleValue();
                    if (v > 0) {
                    result = value.toString(); // could apply formatting here
                    }
                    }
                    return result;
                    }

                public String generateColumnLabel(final CategoryDataset arg0, final int arg1) {
                    // TODO Auto-generated method stub
                    return null;
                }
            });
            renderer2.setSeriesItemLabelsVisible(0,true);
            /* End */
            plot.setRenderer(1, renderer2);
            plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);

            ChartUtilities.writeChartAsPNG(response.getOutputStream(), chart,
                    1150, 450);
    }
    /**
     * 
     */
    public DefaultCategoryDataset createDataSetForPercentBasedChart1()
    {
        String METHOD_NAME = "createDataSetForPercentBasedChart1";
        log.entering(CLASS_NAME, METHOD_NAME);

        DefaultCategoryDataset dataSetForOccurrenceBasedChart = new DefaultCategoryDataset();

        boolean flagForPercentPareto = false;
        String occurrenceCountLabelName = null;
        try
        {
            if(paretoReportBasedDataQO != null && paretoReportBasedDataQO.size()>0)
            {
                //Behind Schedule "4"
                if(searchRatingElement.equalsIgnoreCase("4"))
                {            
                    occurrenceCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.bhndschpctforchart");
                }
                else 
                {
                    occurrenceCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpcs");
                }
                if(!flagForPercentPareto)
                {
                    for(int i =0;i<paretoReportBasedDataQO.size();i++)
                    {
                        dataSetForOccurrenceBasedChart.addValue(paretoReportBasedDataQO.get(i).getOverShipmentPiecesCount(), occurrenceCountLabelName, paretoReportBasedDataQO.get(i).getSupplierName());
                    }
                }
            }
        }
        catch(Exception exceptionOccurrenceBasedChart)
        {
            flagForPercentPareto = true;
            System.out.println("Exception In createDataSetForPercentBasedChart1 : "+exceptionOccurrenceBasedChart.getMessage());
        }

        log.exiting(CLASS_NAME, METHOD_NAME);
        return dataSetForOccurrenceBasedChart;
    }
    /**
     * 
     */
    public DefaultCategoryDataset createDataSetForPercentBasedChart2()
    {
        String METHOD_NAME = "createDataSetForPercentBasedChart2";
        log.entering(CLASS_NAME, METHOD_NAME);

        DefaultCategoryDataset dataSetForOccurrenceBasedChart = new DefaultCategoryDataset();

        boolean flagForPercentPareto = false;
        String occurrenceCountLabelName = null;
        try
        {
            if(paretoReportBasedDataQO != null && paretoReportBasedDataQO.size()>0)
            {
                if(searchRatingElement.equalsIgnoreCase("4"))
                {            
                    occurrenceCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.bhndschpctforchart");
                }
                else 
                {
                    occurrenceCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpctforchart");
                }
                if(!flagForPercentPareto)
                {
                    for(int i =0;i<paretoReportBasedDataQO.size();i++)
                    {
                        dataSetForOccurrenceBasedChart.addValue(paretoReportBasedDataQO.get(i).getOverShipmentPercentageCount(), occurrenceCountLabelName, paretoReportBasedDataQO.get(i).getSupplierName());
                    }
                }
            }
        }
        catch(Exception exceptionOccurrenceBasedChart)
        {
            flagForPercentPareto = true;
            System.out.println("Exception In createDataSetForPercentBasedChart2 : "+exceptionOccurrenceBasedChart.getMessage());
        }

        log.exiting(CLASS_NAME, METHOD_NAME);
        return dataSetForOccurrenceBasedChart;
    } 
```

但是图像和代码是不同的。我发布的图像是样本...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:34:27.680

您可能正在寻找`CombinedDomainCategoryPlot`，在[这里](https://stackoverflow.com/a/1389045/230513)和[这里](http://www.jfree.org/jfreechart/samples.html)看到过。这个相关的[例子](https://stackoverflow.com/a/11895709/230513)说明了`CombinedDomainXYPlot`。

# c++ - 检测 CSV 文件中的记录/行分隔符

> ID：13602896
> 
> 赞同：0
> 
> 时间：2012-11-28T10:27:51.547
> 
> 标签：c++, delphi, csv

如何以编程方式检测 CSV 文件中使用的记录/行分隔符。在 90% 的情况下，它是 CR/LF 对，但有时它不是 CR 就是 LF。

它还应该考虑到引用数据字段中的换行符可能与行/记录分隔符不同。

我怎样才能做到这一点？

**更新：**我只对行/记录分隔符感兴趣：CR/LF、CR 或 LF。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:33:52.307

当您在文本模式下使用 iostreams 打开文件时，该库将处理 Linux、Windows 或 MacOS 上的不同行尾。

引用数据字段中的换行可以通过计算未转义的引号来检测。如果数字是奇数，您可能有一个未终止的数据字段，因此嵌入了换行符。

当您想知道使用哪个行分隔符时，只需按字符阅读，直到获得 CR 或 LF。如果是LF，你就完成了；如果是 CR，则读取下一个字符。如果下一个字符是 LF，那么你的行尾是 CR LF，否则就是 CR。

# haskell - Haskell 中的构造函数

> ID：13602899
> 
> 赞同：0
> 
> 时间：2012-11-28T10:28:08.537
> 
> 标签：haskell, abstract-syntax-tree

这是家庭作业的节选。“Prog 这个数据类型应该只有一个构造函数，并用于表示以下形式的程序：

```
read vin1 ; read vin2 ; < some statements > write vout2 ; 
```

这个构造函数也可以命名为 Prog，它采用一个字符串作为两个输入和一个输出变量的名称。”

将 expProg 定义为 Prog 类型，并且是左上角程序的抽象语法表示。这应该按如下方式进行：

```
expProg = Prog "x" "y" <some statements> "z" 
```

我是 Haskell 的新手，对此感到困惑。

我做了一个这样的构造函数。然而，这似乎不对。

```
data Prog = Prog String String String 
  deriving (Show,Eq) 
```

谁能解释这里发生了什么？我不明白如何制作这个构造函数。这是我为语句制作的数据类型：

```
 data Stmt = Assing String Expr
      | WhileLoop Expr Stmt
      | Ifthen Expr Stmt
      | IfthenElse Expr Stmt Stmt
      | Composition [Stmt] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T10:38:34.593

您说您还需要在构造函数中包含“一些语句”。目前，您只有两个输入变量和输出变量的空间。只需为语句添加另一个字段，例如：

```
data Prog = Prog String String Stmt String
--                                  ^ output variable
--                             ^ some statements
--                       ^ input variable 2
--               ^ input variable 1 
```

现在你可以像这样使用它：

```
expProg = Prog "x" "y" (Composition [Assing "x" (...some expression...),
                                     Assing "z" (...some expression...)])  "z" 
```

（请注意，它实际上是拼写的`Assign`，而不是`Assing`）

# java - 如何使用 HAPI 解析 HL7 中的多个 OBR 段

> ID：13602902
> 
> 赞同：0
> 
> 时间：2012-11-28T10:28:16.617
> 
> 标签：java, hl7, hapi

以下文本是 hl7 消息，我可以解析除 NTE 段以外的许多段。'm 使用 HAPI 来解析 hl7 消息。'我是 HL7 的新手，所以请任何人建议[HAPI](http://hl7api.sourceforge.net/devbyexample.html)中的相关类如何解析 NTE 段？最好用几个例子来解释，

```
MSH|^~\&|LCS|LCA|LIS|TEST9999|199807311532||ORU^R01|3629|P|2.2
PID|2|2161348462|20809880170|1614614|20809880170^TESTPAT||19760924|M|||^^^^
00000-0000|||||||86427531^^^03|SSN# HERE
ORC|NW|8642753100012^LIS|20809880170^LCS||||||19980727000000|||HAVILAND
OBR|1|8642753100012^LIS|20809880170^LCS|008342^UPPER RESPIRATORY
CULTURE^L|||19980727175800||||||SS#634748641 CH14885 SRC:THROA
SRC:PENI|19980727000000||||||20809880170||19980730041800||BN|F
OBX|1|ST|008342^UPPER RESPIRATORY CULTURE^L||FINALREPORT|||||N|F||| 19980729160500|BN
ORC|NW|8642753100012^LIS|20809880170^LCS||||||19980727000000|||HAVILAND
OBR|2|8642753100012^LIS|20809880170^LCS|997602^.^L|||19980727175800||||G|||
19980727000000||||||20809880170||19980730041800|||F|997602|||008342
OBX|2|CE|997231^RESULT 1^L||M415|||||N|F|||19980729160500|BN
NTE|1|L|MORAXELLA (BRANHAMELLA) CATARRHALIS
NTE|2|L| HEAVY GROWTH
NTE|3|L| BETA LACTAMASE POSITIVE
OBX|3|CE|997232^RESULT 2^L||MR105|||||N|F|||19980729160500|BN
NTE|1|L|ROUTINE RESPIRATORY FLORA 
```

**已编辑**

在这里我应该解析多个 OBR 段，有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:50:11.413

看起来您收到的消息*是有效*的，但您可能遇到的问题是样本的格式。看起来有几行被包裹了。如果您正确格式化它们，则可以正确解析消息。

在 HL7 2.x 中，所有新行必须以段标识符开始（例如 MSH、PID、OBX、...）。如果该行不以这些标识符之一开始，则解析器将不知道如何解释该行或消息的其余部分。

如果您正在使用 HAPI 并希望测试消息，我建议您使用他们的[HAPI 测试面板](http://hl7api.sourceforge.net/hapi-testpanel/install.html)。这是一个非常易于使用的工具，可以帮助您验证消息和测试消息传输。

以下是清理完格式后消息在测试面板中的截图。

![hapi hl7 消息](../Images/55aaf376edc2d370257fbdee7cabf0fa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:14:35.337

我已经通过使用 NTE 段循环为每个其他段创建循环来解决这个问题，每个段都有可选的 NTE 段，因此每个段都进行迭代。现在它工作正常......

# winforms - Winforms 应用程序中的图表 TableLayoutPanel 上未显示多个图表

> ID：13602913
> 
> 赞同：2
> 
> 时间：2012-11-28T10:28:55.993
> 
> 标签：winforms, mschart, tablelayoutpanel

我在表格布局面板上添加多行。我正在使用 2 列。我在每一行上动态添加图表。

我想在这个面板上显示 500 个图表意味着需要 250 行。

我的代码正是我想要的。但它只显示了 162 个图表，其他图表没有显示，但我可以看到滚动条。当我滚动面板时，它显示为空白，最后两个图表被截断。

我也在使用 png 格式的下载图表。当我从 Panel.controls 下载时，它允许我下载。

我认为可能存在打印问题。我也试过`Panel.ResumeLayout();`

任何机构都可以解决这个问题吗？

# c++ - 使用 setprecision 在 C++ 中舍入十进制文件时出现问题

> ID：13602919
> 
> 赞同：2
> 
> 时间：2012-11-28T10:29:16.743
> 
> 标签：c++, user-defined-functions, decimal-point

> **可能的重复：**
> [c++ 中的 setprecision 是否循环？如果是这样，为什么我会看到这个？](https://stackoverflow.com/questions/10922366/does-setprecision-in-c-round-if-so-why-am-i-seeing-this)

这是我正在使用的功能

```
char* round(double value, int decimal_places)
{
decimal_places = decimal_places+1;
std::stringstream s2;
   s2 << std::setprecision(decimal_places) << std::setiosflags(std::ios_base::fixed) << value;
std::string st = s2.str();
  return st;
} 
```

**我的输入值是0.89425，小数宫的数量是4**

我的输出是 0.8942 但我想要 0.8943 即，如果我所需的小数位后的下一个数字 >= 5，那么输出应该四舍五入到下一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:34:30.917

0.89425 不能用二进制浮点数精确表示；最接近的可精确表示的值是 0.894249999999999989341858963598497211933135986328125，正确四舍五入到十进制 0.8942。

如果您想查看小数舍入行为，请使用定点或小数浮点。

# java - 将报告从 jrxml 转换为 pdf 时 jvm 无法使用字体

> ID：13602922
> 
> 赞同：5
> 
> 时间：2012-11-28T10:29:19.597
> 
> 标签：java, fonts, jasper-reports

我在windows中使用eclipse。

使用 jar jasperreports-4.1.1.jar 从 jrxml 文件生成 pdf 文件时出现此错误。我已经从我的 windows 文件夹中手动将字体文件添加到我的 jre 中，并将字体路径添加到路径变量，但仍然出现相同的错误。

```
net.sf.jasperreports.engine.JRRuntimeException: Could not load the following font : 
pdfFontName   : Arial
pdfEncoding   : Cp1252
isPdfEmbedded : false 
```

我观察到的另一件奇怪的事情是，当我为 Cambria 字体尝试相同的功能时，我得到了一个不同的错误。以下是我使用 cambria 时的错误

```
net.sf.jasperreports.engine.util.JRFontNotFoundException: Font 'CAMBRIA' is not available to the JVM. See the Javadoc for more details.
at net.sf.jasperreports.engine.util.JRFontUtil.checkAwtFont(JRFontUtil.java:358)
at net.sf.jasperreports.engine.util.JRStyledText.getAwtAttributedString(JRStyledText.java:226)
at net.sf.jasperreports.engine.export.AbstractTextRenderer.render(AbstractTextRenderer.java:263)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportText(JRPdfExporter.java:2026)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportElements(JRPdfExporter.java:729)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportFrame(JRPdfExporter.java:2526)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportElements(JRPdfExporter.java:733)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportFrame(JRPdfExporter.java:2526)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportElements(JRPdfExporter.java:733)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportPage(JRPdfExporter.java:689)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportReportToStream(JRPdfExporter.java:582)
at net.sf.jasperreports.engine.export.JRPdfExporter.exportReport(JRPdfExporter.java:376)
at net.sf.jasperreports.engine.JasperExportManager.exportReportToPdfFile(JasperExportManager.java:122)
at main.CopyOfTable.runReport(CopyOfTable.java:60)
at main.CopyOfTable.main(CopyOfTable.java:100) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T00:53:28.763

希望这可以帮助：

1.  将您的字体定义为“字体扩展”。这涉及创建两个文件：jasperreports_extension.properties 和 fonts.xml。在 JasperReports 包的 demo/fonts 目录中查看它是如何完成的，您可以从[http://community.jaspersoft.com/project/jasperreports-library/releases](http://community.jaspersoft.com/project/jasperreports-library/releases)下载。

2.  将您的字体和字体扩展名打包到类路径中可用的 JAR 文件中。

这适用于 TrueType 和 OpenType 字体。

还：

[在此处](http://community.jaspersoft.com/questions/528625/html-markup-doesnt-work-pdf)查看 Teodor 的第一条评论。

此站点上许多有用的答案之一是[此处](https://stackoverflow.com/questions/8985497/use-custom-fonts-when-creating-pdf-using-ireport)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-04T04:03:31.147

您获取以下类型的错误

> net.sf.jasperreports.engine.JRRuntimeException：无法加载以下字体

**您必须检查您的 tomcat 目录中的临时文件夹。如果您没有找到任何临时文件夹，请像这样创建临时文件夹**

[![在此处输入图像描述](../Images/42cdec7779dde13ee237dd11cedf2efe.png)](https://i.stack.imgur.com/9p5Pk.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-14T15:11:26.070

我解决了这个问题，只是将丢失的字体添加到操作系统，在我的情况下，Windows 7。我的报告没有使用丢失的字体，它是 Calibri Light，并且总是在其他环境中工作。

# java - 春天我必须在哪里调用这些方法？

> ID：13602925
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:29:35.040
> 
> 标签：java, spring

我正在尝试使用spring进行数据库操作。我将操作（插入，删除，更新和显示）放在单独的包中。现在我怀疑我必须在哪里调用包（它在控制器内吗？）我也有 jsp 页面来显示表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:35:59.930

我不建议为插入、删除、更新和显示创建单独的包。

Spring 建议使用如下所示的分层惯用语：

```
view->controller->service->persistence+model 
```

视图和控制器紧密联系在一起。视图将数据发送到控制器，控制器在将数据移交给服务层之前对其进行绑定和验证。

服务层了解用例和工作单元。它使用持久性和模型类来实现用例并将响应返回给控制器。

控制器编组响应并决定下一个视图应该是什么。

# sql-server-2005 - Flyway 中 SQL Server 2005 的已知问题

> ID：13602929
> 
> 赞同：2
> 
> 时间：2012-11-28T10:29:43.620
> 
> 标签：sql-server-2005, flyway

Flyway 仅支持 SQL Server 2008 及更高版本，根据：[支持的数据库](http://flywaydb.org/documentation/database/) (2012-11-28)

使用 SQL Server 2005 和 Flyway 是否存在任何已知问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:13:29.717

正如文档中所写：

旧版本可能有效，但尚未经过测试。

我目前不知道有任何详细说明问题的报告。请试一试，让我知道。我不希望出现任何重大事件。

# ruby-on-rails - 找不到没有 ID 的菜单卡。嵌套资源

> ID：13602930
> 
> 赞同：1
> 
> 时间：2012-11-28T10:29:49.237
> 
> 标签：ruby-on-rails, resources, nested

当我想进入我的菜单卡产品索引 (http://localhost:3000/menucards/1/products) 时，我收到以下错误：找不到没有 ID 的菜单卡。在此页面中，我想显示当前菜单卡中的所有产品。

这是我的产品控制器：

```
class ProductsController < ApplicationController
before_filter :load_menucard

layout 'admin'

def index
    @products = @menucard.product.all
end

def new
    @menucard = Menucard.find(params[:id])
    @product = @menucard.product.new
    redirect_to @product
end

def create
    @menucard = Menucard.find(params[:id])
    @product = @menucard.product.new(params[:product])
    if @product.save
        redirect_to(:action => 'index')
    else
        render 'new'
    end
end

def edit
    @product = Product.find(params[:id])
end

def destroy
    @product = Product.find(params[:id])
    delete_product
end

def update
    @product = Product.find(params[:id])
    if  @product.update_attributes(params[:product])
        #redirect_to @product
        redirect_to(:action => 'index')
    else
        render 'edit'
    end
end

private

 def load_menucard
    @menucard = Menucard.find(params[:id])
 end

end 
```

菜单卡控制器：

```
class MenucardsController < ApplicationController

layout 'admin'

def new
    @menucard = Menucard.new
end

def update
    @menucard = Menucard.find(params[:id])
    if  @menucard.update_attributes(params[:menucard])
        #redirect_to @menucard
        redirect_to(:action => 'index')
    else
        render 'edit'
    end
end

def edit
    @menucard = Menucard.find(params[:id])
end

def index
    @menucards = Menucard.all
end

def create
    @menucard = Menucard.new(params[:menucard])
    if @menucard.save
        #redirect_to @menucard
        redirect_to(:action => 'index')
    else
        render 'new'
    end
end

def destroy
    @menucard = Menucard.find(params[:id])
    if menucard.destroy
        redirect_to(:action => 'index')
    end
end
end 
```

产品浏览指数：

```
<h1>Alle producten</h1>
<%= link_to("Product toevoegen", {:action => 'new' }, :class => 'btn btn-green') %>
<table>
<thead>
    <tr>
        <th scope="col">Naam</th>
        <th scope="col">Beschrijving</th>
        <th scope="col">Prijs</th>
    </tr>
</thead>
<tbody>
<% @products.each do |p|  %>
        <tr>
            <td><a href="#" title=""><%= p.name %><%= link_to("- bewerken", { :action => 'edit', :id => p.id}, :class => 'show-edit') %></a></td>
            <td><%= p.discription %></td>
            <td><%= p.price %></td>
        </tr>
    <% end %>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:33:30.810

请参阅问题出在您的“load_menucard”定义中。由于它是嵌套资源，它应该是 params[:menucard_id] 而不是 params[:id]。

代替

```
@menucard = Menucard.find(params[:id]) 
```

经过

```
@menucard = Menucard.find(params[:menucard_id]) 
```

希望它有效！

# php - 检查到达日期和出发日期是否在mysql范围内

> ID：13602932
> 
> 赞同：0
> 
> 时间：2012-11-28T10:29:54.747
> 
> 标签：php, mysql, zend-framework

我有下表：

```
id      travelStart travelExpires
1       2012-11-12  2013-01-31
1       2012-11-12  2013-01-31 
```

以下是我的抵达和离开日期：

```
arrival date: 2012-12-28
departure date   : 2012-12-30 
```

我想检查 travelStart 和 travelEnd 日期之间的到达和离开日期。如何为它编写mysql查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:56:21.600

试试这个查询

```
select * from table where (arrival_date<=travelStart AND arrival_date<=travelExpires) AND (departure_date>=travelStart AND departure_date<=travelExpires) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:33:15.277

您的答案与`BETWEEN`MySQL 中的运算符一样简单。这个怎么运作：

```
SELECT * from YourTable WHERE ( :arrivalDate BETWEEN travelStart AND travelExpires) AND ( :departureDate BETWEEN travelStart AND travelExpires ) 
```

您显然需要绑定`:arrivalDate`and`:departureDate`参数。

# php - 单个页面中的多个 facebook 评论插件

> ID：13602934
> 
> 赞同：0
> 
> 时间：2012-11-28T10:30:00.263
> 
> 标签：php, facebook

我已经搜索并经历了许多所谓的解决方案，但没有任何帮助。我有一种情况，我需要在同一页面上针对不同`li`标签进行多个 Facebook 评论。

我猜代码会很清楚。

```
 <?php foreach($events_without_upcoming as $single_events):?>
    <li id="event_<?php echo $single_events->id; ?>" class="events" style="cursor:default"> 
       <span class="sn"><?php $i++; ?></span> 
       <span class="date"><?php echo $new_date?></span>
       <span class="venue"><?php echo $single_events->venue; ?></span>
       <span class="address"><?php echo $single_events->address; ?></span>
       <span class="option"><?php echo share_button('facebook', array('url'=>"http://www.xxxxxx.com", 'text'=>$text))?><?php echo share_button('twitter',   array('url'=>$url, 'text'=>$text, 'via'=>'Lightning At The Opera', 'type'=>'iframe'))?></span>
       <div id="fb_<?php echo $single_events->id; ?>" class="fb_plugin" style="display:none;"></div>
       <div class="fb-like" style="display:block" data-href="http://www.xxxxxx.com/<?php echo $single_events->id; ?>" data-send="true" data-width="450" data-show-faces="false"></div>
       <div class="fb-comments" data-href="http://www.xxxxxx.com/#event<?php echo $single_events->id;?>" data-width="470"></div>            
    </li>
    <?php endforeach;?> 
```

FB 评论插件在 foreach 循环中。每个都`li`包含评论插件。我尝试像在代码中一样为 data-href 提供一个唯一的 url，但它不起作用。我从早上开始一直在尝试，但我找不到任何东西。

如果我没有说清楚，请询问任何需要的东西。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T20:38:02.553

```
<iframe 
style="border: none; overflow: hidden; height: 155px; width: 470px;"
scrolling="no"
src="https://www.facebook.com/plugins/comments.php?api_key=your_api_key&elation%3Dparent.parent&numposts=1&width=470&href=http%3A%2F%2Fexample.com"></iframe> 
```

因为我们找不到任何带有 js 的解决方案，所以我们使用没有任何 js 库的 iframe，

当我们想要动态显示评论时，它也很有帮助。

# iphone - XMPP 框架接收的最大消息数

> ID：13602946
> 
> 赞同：1
> 
> 时间：2012-11-28T10:30:54.183
> 
> 标签：iphone, objective-c, ios, xmpp, xmppframework

我正在制作一个 XMPP 客户端，我想要接收到的消息是否有一些计时器或内存缓存，因为我向我的客户端发送了 1000 条消息，而服务器发送了 1000 条消息，但我的客户端只收到 300 条消息。

可能的解决方案：...克服这些限制

每次 HTTP 都有“修复”XMPP 的解决方案。

前两个限制可以通过运行 WebDAV 服务器来修复。上传到 WebDAV 服务器，分享链接。这是每个人都可以在没有 XMPP 客户端支持的情况下完成的解决方案。当然，通过客户端和服务器支持以及签名 URL（à la S3）透明地做到这一点将大大改善该过程。

对于连接的套接字问题，有 BOSH。这基本上是通过 HTTP 运行 XMPP。额外的好处是让服务器保持“连接”几分钟——这解决了我的 iPhone 问题。一旦我在两分钟的窗口中重新启动客户端，所有待处理的消息都会被传递。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-14T14:37:23.373

您的接收者仅收到 300 条消息，这意味着它们可能是离线消息。如果是这种情况，您需要在管理面板中增加每用户离线消息存储限制。

我建议您进行消息归档和检索，而不是依赖离线消息。

希望这可以帮助你:)

# symfony - 为什么 Symfony2 设置 error_reporting？

> ID：13602950
> 
> 赞同：0
> 
> 时间：2012-11-28T10:30:59.343
> 
> 标签：symfony

我一直在尝试删除 E_NOTICE 和 E_STRICT 错误级别以避免此错误：

```
Runtime Notice: Only variables should be passed by reference 
```

我尝试修改 php.ini 但没有用，error_reporting 始终为-1。然后我尝试在当前操作中动态设置它，并且工作正常。然后我在 app_dev.php 的第一行也尝试了同样的方法，但没有奏效。这意味着 Symfony2 正在某处动态设置它。

我该怎么办？

**编辑**

对于那些不熟悉错误的人：

```
$user = $this->('security.context')->getToken()->getUser();

$first = reset($user->getRoles()); // error

$roles = $user->getRoles();
$first = reset($roles); // works fine 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:36:01.883

虽然通知没有“延迟”，但在其他情况下这是一个合理的问题，因此：这是在内核实例中设置的，在 app_dev.php（或 app.php）中实例化。

构造的第二个参数是一个布尔调试标志，如果`true`then`error_reporting`设置为 -1 和`display_errors`1，否则分别设置为 default 和 0。

`$kernel = new AppKernel('dev', false);`

symfony[文档](https://symfony.com/doc/current/configuration/environments.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T23:46:13.460

我在以下场景中遇到了同样的错误，即

**场景：** 我失去了现有 LIVE 项目的开发环境。但是我从 GIT repo 获得了整个代码，然后在我的新开发环境中安装了 symfony 2.4.2（与 LIVE 站点上的版本相同）。然后我发现在 LIVE 站点上运行的 Web 应用程序页面在我的新 DEV 环境中被破坏了。

**解决方案：** 我花了很多时间来理解为什么会出现问题然后我发现即

当我使用 composer.phar 在我的开发环境中安装 symfony 2.4.2 时，它在我的开发环境中创建了一个新的**web/app_dev.php**文件，它具有以下条目来关闭它，即

**调试::启用()** ;

只需**评论上面的行，**然后 php 通知将关闭，然后所有给我通知的页面都被修复。

我希望这对像我一样有同样问题的人有所帮助。祝你好运！

干杯。

PS：但我会建议在你的新开发项目中启用上述行，以便你可以看到 PHP 通知，然后在开发过程中将其删除。

# haskell - 我可以检查 Haskell 是如何分配内存的吗？

> ID：13602951
> 
> 赞同：4
> 
> 时间：2012-11-28T10:31:05.927
> 
> 标签：haskell

由于惰性求值，Haskell 可以立即处理以下表达式。

```
head.head $ let m = 1000000000000000 in map (\n -> [m*n .. m*(n+1)]) [1 .. m] 
```

但我注意到下面的表达式没有完成，但内存使用率仍然很低。

```
last.last $ let m = 1000000000000000 in map (\n -> [m*n .. m*(n+1)]) [1 .. m] 
```

haskell 能做到这一点并不奇怪。但我想知道它是如何工作的。更准确地说，haskell 如何分配内存。有没有办法检查内存布局或类似的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T12:22:22.823

让我们稍微简化一下这个例子，看看会发生什么。您只需考虑惰性求值和图形缩减就可以解决大部分问题，而无需进行任何更低级别的操作。`ourLast (mkList 3)`让我们看一下这段代码的简化简化：

```
ourLast :: [a] -> a
ourLast [] = error "ourLast []"
ourLast (x:[]) = x
ourLast (_:xs) = ourLast xs

mkList :: Int -> [Int]
mkList 0 = []
mkList n = let rest = mkList (n-1) in n : rest 
```

`?foo`意思是“我们还没有看过的值”。我们用“let”创建这些。 `foo@bar`意思是“我们已经计算`bar`出的`?foo`值是”`foo@bar` `foo := bar``foo``bar`

```
 -- We start here by creating some value and giving it to ourLast to
    -- look at.
let ?list3 = mkList 3
ourLast ?list3
    -- At this point ourLast examines its argument to figure out whether
    -- it's of the form (_:_) or []
    -- mkList sees that 3 /= 0, so it can pick the second case, and it
    -- computes the value for ?list3.
    -- (I'll skip the arithmetic reductions and other boring things.)
    let ?list2 = mkList 2
    list3 := 3 : ?list2 -- we don't need to compute ?list2 yet, so
                        -- (mkList 3) is done and we can go back to ourLast
ourLast list3@(3 : ?list2)
    -- ourLast needs to examine ?list2 to find out whether it's [] or not,
    -- so mkList does the same thing again
    let ?list1 = mkList 1
    list2 := 2 : ?list1
ourLast list3@(3 : list2@(2 : ?list1))
    -- Now ourLast has enough information to continue;
    -- ourLast (_ : xs@(_ : _)) = ourLast xs
    -- Notice how we don't need to compute list2 a second time; we save its
    -- value the first time we compute it. This is what lazy evaluation is.
ourLast list2@(2 : ?list1)
    -- at this point, there are no references to `list3` anywhere, so it
    -- can be GCed.
    -- Repeat (ourLast examines ?list1, mkList sees that 1 /= 0).
    let ?list0 = mkList 0
    list1 := 1 : ?list0
ourLast list2@(2 : list1@(1 : ?list0))
ourLast list1@(1 : ?list0)
    -- Can GC list2.
    -- Now mkList is being called with 0, so it just returns an empty list.
    list0 := []
ourLast list1@(1 : list0@[])
1
    -- We're done! (And we can GC list1.) 
```

请注意，在任何给定时间，我们只需要实际分配几个 thunk，其余的要么尚未计算，要么可以进行 GC。当我们评估时，评估在和`ourLast list3`之间来回跳转（有点像协程）。`ourLast``mkList`

如果您想更准确地了解 Haskell 编译器的工作原理，在“分配何时以及如何发生”的级别上，以下内容很有帮助：

*   [在库存硬件上实现惰性函数式语言：Spineless Tagless G-machine](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.53.3729)（JFP 论文）
*   [函数式编程语言的实现](http://research.microsoft.com/en-us/um/people/simonpj/papers/slpj-book-1987/index.htm)（在线书籍）

仅从图形简化的角度来大致了解惰性求值的工作原理——例如[这篇文章](http://www.vex.net/~trebla/haskell/lazy.xhtml)——是有用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:16:06.963

我会按照[此处](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/prof-heap.html)的说明进行一些堆分析。为此，您需要使用 cabal 安装分析库。该解释非常全面且易于理解。

# html - 一种防止 Chrome 中自动占位符输入类型日期的方法

> ID：13602952
> 
> 赞同：2
> 
> 时间：2012-11-28T10:31:06.510
> 
> 标签：html, google-chrome, date, input, placeholder

我正在尝试创建一个表单，但我不想使用标签，我只想使用占位符让用户知道他的要求。但是当我给它 type="date" 时，Chrome 中的占位符被忽略并替换为：day-month-year，但我希望它显示：出生日期。

我有办法做到这一点吗？否则我必须更改整个表单并插入标签。

我知道以前有人问过，但是每个人都想阻止显示日期选择器，我喜欢日期选择器，但不喜欢占位符。我找到的所有答案都是基于占位符的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:05:31.107

该`placeholder`属性[在 input 上无效`type="date"`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#input-type-attr-summary)。因此，开始`placeholder`工作的最简单方法是将 设置为`type`支持它的东西。

另[请注意](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#attr-input-placeholder)：

> 占位符属性不应用作标签的替代品。

如果您决定使用您的方法，则应在表单中添加标签，然后[确保它们可用于辅助技术](http://www.alistapart.com/articles/now-you-see-me/)。

# jquery - 如何使用 Jquery 在 Asp.net MVC3 中实现文件输入的图像预览

> ID：13602953
> 
> 赞同：0
> 
> 时间：2012-11-28T10:31:10.260
> 
> 标签：jquery, asp.net-mvc

我正在使用 Asp.Net MVC 和 Jquery。我有一个包含文件输入控件的表单来上传图像。我想在保存到数据库之前预览选定的图像。

我使用的代码在这里。

```
<img id="preview_image" alt="" src="" width="100px" height="120px"/>
<input type="file" name="user_image" id="user_image" onchange="preview(this);"/>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script type="text/javascript" language="javascript">
    function preview(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#preview_image')
                    .attr('src', e.target.result)
                    .width(100)
                    .height(120);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
</script> 
```

它在 Internet Explorer 和 Safari 中不起作用。因为这些浏览器不支持“FileReader”

有没有不使用任何 Flash 插件的其他解决方案？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:56:20.107

依靠客户来做这件事会给你带来长期的头痛和问题。

我的解决方案是使用确认页面，您可以在其中向用户展示他们上传、调整大小并存储在临时区域中的图像。当用户点击确认时，将图像保存到数据库中。然后，您可以删除该图像，或者更可能将其移至可用作缓存的位置。

如果您不想走确认页面路线，您可以只提交调整大小的图像并使用 ajax 从临时区域返回。

最后，数据库中的图像在理论上是好的，但它们不能很好地扩展，特别是如果它们非常大。我们的策略是制作 6 个不同版本/大小的上传图像并将它们保存在文件系统中，包括原始图像。这使您可以灵活地使用所需大小的图像，并使您的数据库更轻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:11:04.583

您可以查看`FileSystemObject`此问题中所述的 ActiveX 对象：[IE 和本地文件读取](https://stackoverflow.com/questions/6710432/ie-and-local-file-reading)。

# java - 如何在正则表达式中提供 OR 运算符？

> ID：13602954
> 
> 赞同：4
> 
> 时间：2012-11-28T10:31:13.697
> 
> 标签：java, regex

我想将我的字符串与一个或另一个序列匹配，并且它必须至少匹配其中一个。

因为`and`我了解到它可以通过以下方式完成：

```
(?=one)(?=other) 
```

OR有这样的东西吗？

我正在使用 Java、Matcher 和 Pattern 类。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T10:32:37.390

一般来说，关于正则表达式，你绝对应该从这里开始你的正则表达式仙境之旅：正则[表达式教程](http://www.regular-expressions.info/tutorial.html)

您*当前*需要的是`|`（管道字符）

要匹配字符串`one`OR `other`，请使用：

```
(one|other) 
```

或者如果您不想存储匹配项，只需简单地

```
one|other 
```

具体到**Java**，[这篇文章很擅长解释这个主题](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

您将不得不以这种方式使用您的模式：

```
//Pattern and Matcher
Pattern compiledPattern = Pattern.compile(myPatternString);
Matcher matcher = pattern.matcher(myStringToMatch);
boolean isNextMatch = matcher.find(); //find next match, it exists, 
if(isNextMatch) {
    String matchedString = myStrin.substring(matcher.start(),matcher.end());
} 
```

[请注意，关于Matcher](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)的可能性比我在这里展示的要多得多……

```
//String functions
boolean didItMatch = myString.matches(myPatternString); //same as Pattern.matches();
String allReplacedString = myString.replaceAll(myPatternString, replacement)
String firstReplacedString = myString.replaceFirst(myPatternString, replacement)
String[] splitParts = myString.split(myPatternString, howManyPartsAtMost); 
```

此外，我强烈建议使用在线正则表达式检查器，例如[Regexplanet (Java)](http://www.regexplanet.com/advanced/java/index.html)或[refiddle](http://refiddle.com/)（这没有 Java 特定检查器），它们让您的生活更轻松！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T10:32:53.093

“或”运算符拼写`|`为 ，例如`one|other`。

[文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)中列出了所有运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T10:32:57.540

您可以这样用管道分开：

```
Pattern.compile("regexp1|regexp2"); 
```

有关几个简单的示例，请参见[此处。](http://www.javamex.com/tutorials/regular_expressions/capturing_groups_alternatives.shtml)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T10:42:08.010

使用**OR**`|`字符

 **```
Pattern pat = Pattern.compile("exp1|exp2");
Matcher mat = pat.matcher("Input_data"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:45:55.637

答案已经给出，使用管道'|' 操作员。除此之外，在 regexp 测试器中测试您的 regexp 而无需运行您的应用程序可能会很有用，例如：

[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)**

# php - 使用 DbSelect 和 DbTableSelect 适配器进行 zend 分页

> ID：13602957
> 
> 赞同：0
> 
> 时间：2012-11-28T10:31:20.640
> 
> 标签：php, zend-framework

我是 zend 框架的初学者...直到现在我通过从 DB 获取所有详细信息来进行分页..我的朋友说这不是分页的好方法....他从 Zend 网站给了我以下参考...现在我有一些疑问... 1.setRowCount 是什么？它是表中的一个字段吗？2.什么是item_counts和RowCount？我的数据库名称是 sreejith。我的表名是员工。代码是：

```
 $adapter = new Zend_Paginator_Adapter_DbSelect($db->select()->from('posts'));
    $adapter->setRowCount(
    $db->select()
    ->from(
   'item_counts', array(Zend_Paginator_Adapter_DbSelect::ROW_COUNT_COLUMN => 'post_count')
    )
    );
    $paginator = new Zend_Paginator($adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:36:19.327

OP 代码粘贴自： http: [//framework.zend.com/manual/1.12/en/zend.paginator.usage.html](http://framework.zend.com/manual/1.12/en/zend.paginator.usage.html)

该示例显示了优化如何计算总行数的能力（需要执行分页，至少可以呈现 UI 导航）。

正如它所说，“例如，如果您在单独的表中跟踪博客文章的计数，​​则可以使用以下设置实现更快的计数查询：”。

看一下将 Zend_Db_Select 传递给工厂的更简单的例子......比如：`Zend_Paginator::factory()`- 这可能就是你所需要的。

# spring - 使用spring验证器框架如何在验证失败时发回数据集

> ID：13602960
> 
> 赞同：1
> 
> 时间：2012-11-28T10:31:24.007
> 
> 标签：spring, validation

我的应用程序有一个场景，在后端检查电子邮件输入是否重复。为此，我正在使用 spring 验证框架。如果电子邮件 ID 存在，那么我需要将现有客户名称列表发送回前端。我怎样才能实现这一点，因为验证器只允许将验证消息与字段名称一起发回。无论如何要处理这种情况吗？

# xslt - XSLT 转换（帮助）

> ID：13602961
> 
> 赞同：0
> 
> 时间：2012-11-28T10:31:28.343
> 
> 标签：xslt

我是 XSLT 的新手，在解决这个问题时遇到了一些麻烦。

输入来自 XML Excel 文档，格式如下：

```
<Row>
  <Cell><Data ss:Type="String">ToE.3</Data></Cell>
  <Cell ss:Index="15"><Data ss:Type="String">Maintain</Data></Cell>
  <Cell><Data ss:Type="Number">3</Data></Cell>
  <Cell><Data ss:Type="String">Other</Data></Cell>
  <Cell ss:Index="131"><Data ss:Type="String">Windows 2003</Data></Cell>
  <Cell><Data >Microsoft SQL Server 2005</Data></Cell>
</Row>
..more rows (note the excel sheet has 132 columns) 
```

我需要将其转换为标准文本文件，例如（使用右列）分隔符：

```
Col1  Col2 Col3 ..To.. Col15    Col16 ..To.. Col131
ToE.3                 Maintain 3              Windows 2003 
```

问题是如何插入使用 Index 属性跳过的空行值。

没有空索引处理的转换如下所示：

```
<xsl:for-each select="Row">
    <xsl:for-each select="Cell/Data">
        <xsl:value-of select="current()"/>
        <xsl:text>\</xsl:text>
    </xsl:for-each>
    <xsl:text>&#10;</xsl:text>
</xsl:for-each> 
```

一些帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:22:04.447

step1：您需要声明输出格式，即“text”而不是“xml”..

step2：你需要去掉额外的空格。使用带有 element='*' 的 Strip-space，这意味着 'all'！

step3：你需要先写标题行，即col1，col2等。
所以使用模板匹配选择一个元素行，它在你的XML中是第一个。假设所有行都有相同的列数，你需要写“COL+ NUMBER" ..`column numbers = no of cells`你在第一行。

第4步：如果单元格是最后一个，则插入'输入字符'..

step5：调用泛型函数

step6：解释通用函数：该函数复制每个单元格下的数据，以`\`. 只有第一行，我们会手动调用它，否则模板匹配会处理它。

这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:template name="Header" match="Row[not(preceding-sibling::Row)]">
    <xsl:for-each select="Cell">
      <xsl:value-of select="'Col'"/>
      <xsl:value-of select="position()"/>
      <xsl:if test="position()!=last()">
        <xsl:value-of select="'\'"/>
      </xsl:if>
     </xsl:for-each>
    <xsl:text>&#10;</xsl:text>
    <xsl:call-template name="CopyData"/>
  </xsl:template>

  <xsl:template name="CopyData" match="Row">
    <xsl:for-each select="Cell">
      <xsl:for-each select="Data">
        <xsl:apply-templates select="."/>
      </xsl:for-each>
      <xsl:if test="position()!=last()">
        <xsl:value-of select="'\'"/>
      </xsl:if>
    </xsl:for-each>
    <xsl:text>&#10;</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

相应的样本输出：

```
Col1\Col2\Col3\Col4\Col5\Col6
ToE.3\Maintain\3\Other\Windows 2003\Microsoft SQL Server 2005
ToE.3\Maintain\3\Other\Windows 2003\Microsoft SQL Server 2005 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:32:47.787

这很棘手，因为正如您所看到的，Excel 会跳过没有出现数据的列，然后为后续的非空白列提供 ss:Index 属性。您必须自己重建“丢失”的单元格位置。也就是说，如果您希望在示例中保留原始列位置，如“15”或“131”，中间有空格。

同意上面的 InfantProgrammer，但建议您在上面的“CopyData”模板中添加一些逻辑，以 (a) 确定丢失单元格的数量，然后 (b) 调用递归命名模板将它们写入输出。

```
<xsl:template name="WriteBlanks">
   <xsl:param name="Count" select="0"/>
   <xsl:if test="Count &gt; 0">
     <xsl:value-of select="'\'"/>
      <xsl:call-template name="WriteBlanks">
         <xsl:with-param name="Count" select="$Count - 1"/>
      </xsl:call-template>
   </xsl:if>
</xsl:template> 
```

您可以执行类似的操作来生成第一行列标题。

鉴于您只需要编写反斜杠字符作为列分隔符的简单性，一种更简洁的方法是创建一个长字符串，然后使用 XPath 删除所需的许多字符`substring()`。然而，递归模板可能适用于更复杂的输出。

# java - Java Crystal Report SDK - 报表和子报表

> ID：13602963
> 
> 赞同：2
> 
> 时间：2012-11-28T10:31:35.603
> 
> 标签：java, crystal-reports, report, subreport

我正在尝试使用由主报表和子报表组成的 Java 水晶报表 SDK 生成报表。

我确实想仅在我的存储过程返回某些内容时生成报告，为此我手动执行 proc 并仅在我的 ResultSet ！= null 时启动报告生成。

但是，我的子报表必须通过 Crystal 生成。

*   我对我的主报告使用 setTablesDatasource() 方法来使用我的 ResultSet
*   对于我的子报告：

_ 我使用 setTableslocation() 获取值并通过水晶生成报告

_ 我在子报表的 ParameterFieldController 中设置了所有需要的参数。

但是，我在控制台中收到此错误：

> 缺少参数值。---- 错误代码：-2147217394 错误代码名称：missingParameterValueError

即使子报表的参数设置正确。

如果我生成我的报告时没有子报告或报告并且不需要参数，那么生成就可以了。

我是否以错误的方式设置参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:06:40.860

在尝试了很多东西来集成我的子报表而不使用另一个 ResultSet 之后，这里是设置子报表参数的方法：

您必须使用主报表的 ParameterFieldController 而不是子报表之一...逻辑。

> ParameterFieldController paramFieldController = rptClientDoc.getDataDefController().getParameterFieldController(); paramFieldController.setCurrentValue(subreport_name, parameter_name, parameter_value);

现在，它工作得很好！

# java - 将代码复制到现有项目中时发生错误

> ID：13602964
> 
> 赞同：1
> 
> 时间：2012-11-28T10:31:45.823
> 
> 标签：java, android, parsing

经过所有的努力并在stackoverflow社区人员的帮助下，我能够解析我的网站内容并将网站内容提取到android应用程序的listview中，它很有魅力，我已经单独创建了这个项目，现在将代码包含在我的原来的项目，但是现在当我点击相应的页面时它会崩溃，不知道原因......

//这里是logcat：

```
 11-28 15:58:22.927: W/KeyCharacterMap(938): No keyboard for id 0
11-28 15:58:22.927: W/KeyCharacterMap(938): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
11-28 15:58:26.188: D/AndroidRuntime(938): Shutting down VM
11-28 15:58:26.188: W/dalvikvm(938): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-28 15:58:26.207: E/AndroidRuntime(938): FATAL EXCEPTION: main
11-28 15:58:26.207: E/AndroidRuntime(938): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rebuix.com/com.rebuix.com.Home}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.os.Looper.loop(Looper.java:123)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-28 15:58:26.207: E/AndroidRuntime(938):  at java.lang.reflect.Method.invokeNative(Native Method)
11-28 15:58:26.207: E/AndroidRuntime(938):  at java.lang.reflect.Method.invoke(Method.java:521)
11-28 15:58:26.207: E/AndroidRuntime(938):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-28 15:58:26.207: E/AndroidRuntime(938):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-28 15:58:26.207: E/AndroidRuntime(938):  at dalvik.system.NativeStart.main(Native Method)
11-28 15:58:26.207: E/AndroidRuntime(938): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.ListActivity.onContentChanged(ListActivity.java:245)
11-28 15:58:26.207: E/AndroidRuntime(938):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.Activity.setContentView(Activity.java:1647)
11-28 15:58:26.207: E/AndroidRuntime(938):  at com.rebuix.com.Home.onCreate(Home.java:46)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-28 15:58:26.207: E/AndroidRuntime(938):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-28 15:58:26.207: E/AndroidRuntime(938):  ... 11 more 
```

# css - 居中对齐多个子 DIV

> ID：13602965
> 
> 赞同：19
> 
> 时间：2012-11-28T10:31:46.783
> 
> 标签：css, css-float

我发现解决这个问题有点令人困惑。

我有父 DIV 和 3 个/更多子 DIV。

父 DIV 居中对齐，子 DIV 应向左浮动，但应居中对齐。

**CSS**包含，

```
.center {
   float:left;
   height:250px;
   width:15%;
   margin: 0 auto;
   border: 1px solid black;
} 
```

[我在这里有一个代码链接示例...](http://jsfiddle.net/wpXTr/)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-28T10:34:36.830

如果要水平居中对齐元素，请不要浮动它们。

通过更改其父项的样式来更改它们的显示方式`inline-block`并使其居中对齐：`text-align`

```
#parent {
    text-align:center;
    height:450px;
    width:75%;
    border:1px solid blue;
}
.center {
    display:inline-block;
    height:250px;
    width:15%;
    margin: 0 auto;
    border: 1px solid black;
}
```

```
<div id="parent">
    <div id="child1" class="center"></div><!--
 --><div id="child2" class="center"></div><!--
 --><div id="child3" class="center"></div>
</div>
```

确保您的孩子之间没有空格或换行符`<div>`（即在您的 HTML 中）或将其注释掉。现在这些是*内联*元素，这个空白将被解释为一个空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-07T02:17:04.657

```
#parent{
    display: flex;
    justify-content:center;
    flex-direction:row; /*default value is row*/
    height:350px;
    width:75%;
    border:1px solid blue;
    padding: 10px 0;/* not mandatory */
}
.center {
    height:250px;
    width:15%;
    margin:5px;
    border: 1px solid black;
}
```

```
<div id="parent">
<div id="child1" class="center">
</div>
    <div id="child2" class="center">
</div>
    <div id="child3" class="center">
</div>
</div>
```

Flex 帮助我们轻松实现某些目标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T10:33:35.173

自动边距不适用于应用了浮动的元素。删除浮动应该让你开始......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-17T12:52:50.510

## 水平和垂直居中

用于`top`垂直居中并`calc`动态计算`top`值。顶部将与`position - relative`.

`text-align:center`在父级和子级中使用`display:inline-block`水平居中。

```
.parent {
height:400px;
width:400px;
position:absolute;
border:1px solid black;
text-align:center;
}
.child {
position:relative;
height:70px;
width:70px;
border:1px solid red;
top:calc(50% - 70px/2);
display:inline-block;
}
```

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>

</style>
</head>
<body>

<div class="parent">
  <div class="child">  
  </div>
  <div class="child">  
  </div>
  <div class="child">  
  </div>
</div>

</body>
</html>
```

# variables - 如何使用参数或变量值作为节点名称？

> ID：13602967
> 
> 赞同：7
> 
> 时间：2012-11-28T10:31:51.637
> 
> 标签：variables, xslt, parameters

我正在尝试将参数或变量的值用作值选择中的节点名称，但到目前为止失败..

所以我的XML如下。

```
<Data>
 <Name>John Smith</Name>
 <Date>28112012</Date>
 <Phone>iphone</Phone>
 <Car>BMW</Car>
</Data> 
```

我不完整的 xslt 如下所示。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    version="2.0"
    exclude-result-prefixes="#all">

<xsl:param name="nodename" select="'Name'"/>

<xsl:template match="/Data">

      <Output>
        <xsl:value-of select="{$nodename}"/>
      </Output>     
</xsl:template>

</xsl:stylesheet> 
```

理想情况下，我希望输出是

```
<Output>John Smith</Output> 
```

有什么方法可以使用 XSLT 做到这一点吗？我希望能够根据用户的选择选择合适的节点。

谢谢

SK

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:45:50.803

一个疯狂的猜测，让我知道它是否有效：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" exclude-result-prefixes="#all">

<xsl:param name="nodename" select="'Name'"/>
<xsl:template match="/Data">
   <Output>
      <xsl:value-of select="//*[name()=$nodename]" />
   </Output>     
</xsl:template>

</xsl:stylesheet> 
```

# android - 我在 android 中有复选框、imageview 和 textview，我想在单击关联的 textview 时检查我的复选框

> ID：13602971
> 
> 赞同：0
> 
> 时间：2012-11-28T10:32:12.647
> 
> 标签：android, checkbox

这是我的代码。

```
 if (view == null) {         
        view = lInflater.inflate(
                R.layout.list_item_multiple_choice, null);
        vHolderMultiple = new ViewHolder();
        vHolderMultiple.tv = (TextView) view.findViewById(R.id.tvMultipleChoiceListItem);
        vHolderMultiple.cb = (CheckBox) view.findViewById(R.id.cbMultipleListItem);
        vHolderMultiple.iv = (ImageView) view.findViewById(R.id.ivMultiChoiceItem);
        view.setTag(vHolderMultiple);
    } 
    else {
        vHolderMultiple = (ViewHolder) view.getTag();
    }
    vHolderMultiple.tv.setText(optionArray.get(position).getOptionText());
    vHolderMultiple.cb.setChecked(lvAnswers.isItemChecked(position));
    if (optionArrayCopy.get(position).getImageUrl() != null && optionArrayCopy.get(position).getImageUrl().length() > 0) {
        final Bitmap bmp = loader.loadImageBitmap(optionArray.get(position).getImageUrl(), resDir);
        vHolderMultiple.iv.setVisibility(VISIBLE);
        if (bmp != null) {
            vHolderMultiple.iv.setImageBitmap(bmp);
        }
    } else
        vHolderMultiple.iv.setImageBitmap(null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:58:13.723

似乎您正在使用 ListView 显示一些带有图像和复选框的文本。

最好使用 CheckedTextView，它是 TextView 与 CheckBox 的组合。并使用 TextView.setCompoundDrawablesWithIntrinsicBounds() 替换 ImageView。

然后您可以通过 ListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE) 启用多项选择模式。ListView 将有助于管理每一行的检查状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:41:12.803

带有列表视图的复选框也会出现同样的问题。

使用 CheckedTextView UI 组件

或者

您需要手动编写代码。将 setonclicklistner 添加到 Textview 并将复选框对象传递给它。网上有很多可用的代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:49:05.087

只需将 OnClickListener 添加到 TextView 并选中/取消选中其中的 CheckBox。像这样的东西：

```
vHolderMultiple.tv.setOnClickListener(new OnClickListener(){

    public void onClick(View v){

        if(vHolderMultiple.cb.isChecked())
            vHolderMultiple.cb.setChecked(false);
        else
            vHolderMultiple.cb.setChecked(true);
    }
}); 
```

请注意，您必须将 cd 声明为 final，以便能够从 OnClick 方法更改其状态。

# c++ - 关闭其存在依赖于与 C++ 中的 .close() 语句相同的布尔值的文件流时出错

> ID：13602972
> 
> 赞同：3
> 
> 时间：2012-11-28T10:32:13.443
> 
> 标签：c++, ofstream

我在措辞这个问题时遇到了麻烦（正如您从标题中看到的那样），但我会尝试：

如果布尔变量为真，我将打开一个文件流（ofstream），然后如果相同的布尔变量为真，则尝试再次关闭文件流会给出错误

```
'fout' was not declared in this scope" 
```

这是一个最小的例子：

```
using namespace std;
#include <fstream>

int main(int argc, char * argv[]) {
    bool output = true;

    if (output) {
        ofstream fout("test.txt");
    }
    if (output) {
        fout.close();
    }
} // end main 
```

我要做的是打开一个文件来存储程序的一些结果，只有当布尔“输出”为真时。我可以让它每次都打开文件（不测试），但一段时间后会变得非常混乱，因为真正的文件名取决于程序中设置的变量，我不想覆盖任何旧文件，所以我宁愿这样做。

编辑：今天我了解了“范围”是什么......谢谢大家！
工作代码如下：

```
using namespace std;
#include <fstream>

int main(int argc, char * argv[]) {
    bool output = true;
    ofstream fout;
    if (output) {
        fout.open("test.txt");
    }
    if (output) {
        fout.close();
    }
} // end main 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:37:23.987

您`fout`在 if 块的范围内声明，else 块具有单独的范围，它自己的自动变量`fout`不是一个。

然而你实际上不需要在这里担心它，`ofstream`当它超出范围时会自动关闭，因为它遵守 RAII。

[http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)

我实际上让它关闭它的自我比做你自己更可取。

[http://en.cppreference.com/w/cpp/io/basic_ofstream](http://en.cppreference.com/w/cpp/io/basic_ofstream)

（注意析构函数旁边的注释）。

```
int main(int argc, char * argv[]) {
    bool output = true;

    if (output) {
        ofstream fout("test.txt");
                    //do with fout, let it close itself
    }
} // end main 
```

上面的代码很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:42:01.857

该错误是因为您在“if 语句”中定义了“fout”，并且它没有在该区域之外（在 if 语句之外）定义，您可以这样做：

```
#include <fstream>
using namespace std ;

int main()
{
     ofstream fout ;
     bool output = true ;
     if(output)
     {
          fout.open("test.txt");
     }
     if(output)
     {
          fout.close(); 
     }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:09:13.163

深思熟虑:)

最小示例的简单解决方案是`ofstream`在需要使用它的时间内在它存在的范围内声明。然后，您只需在要实际使用流的地方设置条件语句：

```
{
    bool output = someArgOrTestResult;
    ofstream myOutStream;

    if( output ) mOutStream << "Whatever";

} 
```

但是，如果您决定在某个时候改变行为，重复的条件语句可能会变得 (a) 丑陋，并且 (b) 难以维护。所以看看你在做什么并创建一个`MyOutput`类可能是有益的。

```
class MyOutput
{
private:
    std::string filename;
    bool output;
    ofstream fout;

public:
    MyOutput( const std::string& fn , bool out ) : filename(fn) , output(out) 
    {
         if( output )
             fout.open(filename); //Check syntax might need .c_str()       
    }

    ~MyOutput()
    {
         if( output )
             fout.close();
    }

    //There are many ways to expose the output function but simplest
    void write( const std::string& data )
    {
         if( output )
         {
             output << data;
         }
    }

}; 
```

**注意**- 在您需要输入的错误检查方面有很多缺失 - 例如，如果文件名无法打开会发生什么。

然后主要你可以有这样的东西：

```
#include <fstream>

int main(int argc, char * argv[]) {
    bool output = true;
    MyOutput fout("test.txt",output);

    std::string myLocalData = "Some stuff....";
    fout.write(myLocalData);

} // end main 
```

现在的优点是您可以只使用语句来写入数据而无需周围的测试。`output`对此有一百万种变化，如果未设置，甚至可能访问您要编写的内容，但如果是这种情况，则可能也需要进行处理，`MyOutput`尽管它需要重命名和不同的方法...

# spring - 获得单例行为。春季上下文问题

> ID：13602973
> 
> 赞同：0
> 
> 时间：2012-11-28T10:32:16.643
> 
> 标签：spring

我一直在玩 spring 并且有一个关于在我的一个课程中获得单身行为的问题。更具体地说，我有一个名为 Cache 的类，我希望它具有单例行为。我将首先发布我的实际代码的重要部分（一个 mdb、一个 servlet 和一些 xml 文件），然后再详细说明我的问题。

消息接收器.java

```
@Interceptors(SpringBeanAutowiringInterceptor.class)
public class MessageReceiver implements MessageListener {

    @Autowired
    private Cache cache;

    @Override
    public void onMessage(Message msg) {
        ... do stuff with cache
} 
```

beanRefContext.xml

```
 <bean id="jar.context"
      class="org.springframework.context.support.ClassPathXmlApplicationContext" >

    <constructor-arg>
        <list>
            <value>spring-context.xml</value>
        </list>
    </constructor-arg>
</bean> 
```

弹簧上下文.xml

```
<bean class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>

<bean id="cache" class="com.company.myapp.cache.impl.CacheImpl"/> 
```

web.xml

```
<context-param>
    <param-name>parentContextKey</param-name>
    <param-value>jar.context</param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<servlet>
    <servlet-name>myServlet</servlet-name>
    <servlet-class>com.company.myapp.servlet.Servlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
     <servlet-name>myServlet</servlet-name>
     <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

在我的 servlet 中，我注入了一个 Cache 实例，其中包含以下内容

```
ApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(getServletContext());
cache = (Cache) ctx.getBean("cache"); 
```

尽管 Cache 实例的注入在 servlet 和 mdb 中都有效，但在这两种情况下我都没有得到相同的实例。我知道通常 bean 不是跨不同上下文的单例，我的第一个问题是这是否也（或必须）也适用于父子上下文设置。

我的第二个问题（如果上面的代码不容易修改以获得我想要的行为）是是否有一种标准方法可以在多个上下文中获取单例行为，或者我是否可以以某种方式使我的 mdb 和 servlet 存在相同的上下文。我曾尝试过使用后一种想法，但没有成功（我猜是因为缺乏知识......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:05:41.923

在父上下文中设置缓存可以解决这个问题。

如果您不想那样做，您还可以实现[InitializingBean](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/InitializingBean.html)来实例化缓存并将单例实例保存到静态字段。

# java - Java EE Struts 2-组合框-数据库检索元素以进行下拉

> ID：13602974
> 
> 赞同：-2
> 
> 时间：2012-11-28T10:32:17.447
> 
> 标签：java, jakarta-ee

我的jsp文件是：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<%@page import="java.util.*" %>
<%@ page import="com.elc.util.*" %>
<%@taglib uri="/struts-tags" prefix="s" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1>Select Your Department</h1>
<s:form action="Comapny">
<table bordercolor="red">
<tr>
    <td>Select your Option</td>
    <td>
    <s:combobox name ="Depart"list="%{depat}" value="Select" headerValue="-1"    
 headerKey="select your option"></s:combobox>
    </td>
 </tr>
 <tr>
    <td></td>
    <td>
    <s:submit value="Select"></s:submit>
    </td>
 </tr>

 </table>

</s:form>
</body>
</html> 
```

A而我的动作课是...

```
package com.elc.action;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;

import com.opensymphony.xwork2.ActionSupport;

@SuppressWarnings("serial")
public class Department extends ActionSupport {
private String Dept;
private List<Object> depat;

public List<Object> getDepat() {
    return depat;
}

public void setDepat(List<Object> depat) {
    this.depat = depat;
}

public String getDept() {
    return Dept;
}

public void setDept(String dept) {
    Dept = dept;
}
//@SuppressWarnings("unchecked")
public String Select(){
        Collection<String> o = DBConnection.getConnection();
depat = new ArrayList<Object>();
Iterator<String> i = o.iterator();
while(i.hasNext()){
    depat.add(i);

}
System.out.println("the list contains..........."+depat);
return "success";
}
//@SuppressWarnings("static-access")
public String execute(){
    return SUCCESS;
}

   } 
```

我的 DAO 课程是.......

```
 package com.elc.action;

  import java.sql.*;
  import java.util.ArrayList;
  import java.util.Collection;
  public class DBConnection {
public static Collection<String> getConnection(){
    ArrayList<String> l = new ArrayList<String>();
    try{
        Class.forName(DBConstants.Driver);
        Connection con = DriverManager.getConnection(DBConstants.url,         
                         DBConstants.userName, DBConstants.password);
        Statement st = con.createStatement();
        String query = DBConstants.SELECT +"* from role";
        ResultSet rs = st.executeQuery(query);
        while(rs.next()){
            rs.getInt(1);
            String dept = rs.getString(2);
            l.add(dept);
        }

    }catch(ClassNotFoundException c){
        System.out.println("the classs u are asking not found");
        c.printStackTrace();
    }catch(SQLException s){
        System.out.println("the sql exception is occured");
        s.printStackTrace();
    }
    return l;
}

   } 
```

首先，我在我的 DBConnection.getconnection 方法中使用了 Object 的返回，它以 [HR，Tester，Software Engineer] 检索了我的表，但是当我用来在我的 Web 中下拉时，它们按原样出现......即 [HR，Tester , 软件工程师] 所以我希望输出为该测试人员的第一个 Hr 及以下以及该软件工程师的以下。当我在 DBConnection.getconnection 方法中使用 Collection 或 List 返回时，我得到了 jasper 异常..

有没有人告诉我答案。。。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:41:26.453

我的jsp没有任何错误，我改变了我的Action类，它只是我现在发布的......剩下的程序只是......

```
public class Department extends ActionSupport {

 @SuppressWarnings("rawtypes")
ArrayList deptList;
@SuppressWarnings("rawtypes")
public ArrayList getDeptList() {
    return deptList;
}

@SuppressWarnings("rawtypes")
public void setDeptList(ArrayList deptList) {
    this.deptList = deptList;
}

public String Select(){
         deptList = DBConnection.getConnection();
System.out.println("the list contains..........."+deptList);
return "checked";
}
public String execute(){
    return SUCCESS;
}

    } 
```

首先，我创建了一个 Collection 接口，我没有该变量的 getter 和 setter。现在我创建了一个 Arraylist 并拥有 getter 和 setter，现在它工作正常.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:28:39.763

```
public class Mainlist {
    DBLayer db;

    public Mainlist() {
        db = new DBLayer();
    }

    public ArrayList getCategoryname() {
        ArrayList<String> list = new ArrayList();
        try {
            String sql = "select category_name from category";
            PreparedStatement ps = db.getConnection().prepareStatement(sql);
            ResultSet rs = ps.executeQuery();
            if (rs != null) {
                while (rs.next()) {
                    list.add(rs.getString("category_name"));
                    // System.out.println(list);
                }
            }
            return list;
        } catch (Exception e) {
            e.printStackTrace();
            return list;
        }
    }
} 
```

# mysql - 根据不同标准对值求和

> ID：13602976
> 
> 赞同：2
> 
> 时间：2012-11-28T10:32:21.103
> 
> 标签：mysql, sql, sql-server, sql-server-2008, tsql

我想对同一列中的值求和，但取决于不同列中的某些条件，即

```
value   column1 column2 column3
 11        a       x      m
 45        b       y      n
 50        b       z      p
 12        c       x      p 
```

因此，例如，当 column1 = b & column2 = z & column n 时，我想要“价值”的总和

我使用了以下语法：

```
sum(case when column1 = b & column2 = z & column n then value end) total 
```

这有效，但我正在处理很多列，所以有没有更简单的方法来做到这一点。我在考虑循环，但无法理解 SQL 中的循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:34:00.090

```
SELECT SUM(value) FROM table GROUP BY col1, col2, col3 
```

如果需要特定的集合，您可以使用

```
SELECT SUM(value) FROM table GROUP BY col1, col2, col3 HAVING col1='a' AND col2='n' AND col3='c' 
```

# jquery - JqueryMobile 用图像替换单选按钮

> ID：13602977
> 
> 赞同：1
> 
> 时间：2012-11-28T10:32:34.683
> 
> 标签：jquery, jquery-mobile

我正在使用 jquerymobile 为 Web 应用程序创建一个广播组。在某一时刻，用户必须在“男性”和“女性”之间进行选择。我有点击（触摸）性别和未点击性别的图像。我想用两个具有两种状态的图像替换无线电组。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:41:49.023

我在这里给你做了一个例子：http: [//jsfiddle.net/Gajotres/EeRXd/](http://jsfiddle.net/Gajotres/EeRXd/)

```
$('div[data-role="fieldcontain"] fieldset  div div:first-child label span span').html('<img src="http://cdn1.iconfinder.com/data/icons/Snow/Snow/snow/Male.png" width="32px" height="32px"></img>');
$('div[data-role="fieldcontain"] fieldset  div div:last-child label span span').html('<img src="http://cdn1.iconfinder.com/data/icons/Snow/Snow/snow/Female.png" width="32px" height="32px"></img>'); 
```

如果您想要其他东西，请在评论中告诉我，如果您有每个州的图像，请给我发送位置，我将重建这个示例。

# ubuntu - ubuntu 12.04 install fontforge 找不到包'zlib'

> ID：13602980
> 
> 赞同：2
> 
> 时间：2012-11-28T10:32:37.780
> 
> 标签：ubuntu, installation, zlib, fontforge

1，当我尝试 ./configure 时，它​​说：

> ```
> checking for ZLIB... configure: error: Package requirements (zlib) were not met:
> 
> No package 'zlib' found
> 
> Consider adjusting the PKG_CONFIG_PATH environment variable if you
> installed software in a non-standard prefix.
> 
> Alternatively, you may set the environment variables ZLIB_CFLAGS
> and ZLIB_LIBS to avoid the need to call pkg-config.
> See the pkg-config man page for more details. 
> ```

2，我尝试安装 zlib 使用它说的 aptitude

> ```
> packages contain "zlib" in their name:
>   libio-compress-zlib-perl libcompress-raw-zlib-perl libcompress-zlib-perl 
>   gambas2-gb-compress-zlib libghc6-zlib-dev libghc6-zlib-doc libzlib-ruby 
>   zlibc zlib-bin libghc6-zlib-prof zlib-gst gambas2-gb-compress-bzlib2 
>   haskell-zlib-doc libio-zlib-perl zlib1g-dbg zlib1g-dev 
>   libghc6-zlib-prof-0.5.2.0-b96bd zlib1g libzlib-ruby1.8 libjzlib-java 
>   libghc6-zlib-dev-0.5.2.0-b96bd 
> No packages will be installed, upgraded, or removed.
> 0 packages upgraded, 0 newly installed, 0 to remove and 69 not upgraded.
> Need to get 0B of archives. After unpacking 0B will be used.
> Writing extended state information... Done
> Reading package lists... Done             
> Building dependency tree       
> Reading state information... Done
> Reading extended state information       
> Initializing package states... Done 
> ```

3、最后我安装了zlib1g，但是fontforge配置也找不到zlib dpkg -l zlib1g

> ```
> Desired=Unknown/Install/Remove/Purge/Hold
> | Status=Not/Inst/Cfg-files/Unpacked/Failed-cfg/Half-inst/trig-aWait/Trig-pend
> |/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
> ||/ Name           Version        Description
> +++-==============-==============-============================================
> ii  zlib1g         1:1.2.3.3.dfsg compression library - runtime 
> ```

是否需要配置环境变量 ZLIB_CFLAGS 和 ZLIB_LIBS 如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T10:34:46.530

你正在从源代码编译一些东西，所以你需要可用的头文件，这些头文件总是在 -dev 包中，即 zlib1g-dev。

# sql - 在 sql server 2008 中使用 in 条件进行优化

> ID：13602981
> 
> 赞同：0
> 
> 时间：2012-11-28T10:32:39.950
> 
> 标签：sql, sql-server, sql-server-2008, tsql

团队，

我需要优化以下查询，请建议优化此查询的最佳方法。我尝试更改条件顺序，甚至在列上创建索引。对我来说没有任何结果，请发表您的建议。

仅供参考，iemail_id 是一个在两个表上都有索引的整数。下面的查询返回 400 万条记录。提前致谢。

```
SELECT T.AId, M.iemail_id
FROM tasks T WITH(NOLOCK)
INNER JOIN tmail M WITH(NOLOCK)
ON T.iemail_id = M.iemail_id
WHERE ((status IN (5,6,8,9,14,15,21,22,23,24))
OR (status =7 AND T.lmodif >= '11-19-2012 00:00:00'))
AND (Ctype='Auto')
AND (Aitem in ('DATA', 'FILE'))
AND (T.lmodif >= '08-20-2012 00:00:00' AND M.mtime <= '11-28-2012 05:25:25') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:46:15.980

假设您的`lmodif`和`mtime`列是`DATETIME`，请尝试将您的字符串转换为`DATETIME`first 。就像是`CONVERT(DATETIME, '2012-11-28 05:25:25', 120)`

我没有看到太多优化的机会`((status IN (5,6,8,9,14,15,21,22,23,24)) OR (status =7 AND T.lmodif >= '11-19-2012 00:00:00')`。您仍然可以尝试将其替换为：

```
(status BETWEEN 5 AND 9
 OR status IN (14, 15)
 OR status BETWEEN 21 AND 24)
AND (status <> 7 OR T.lmodif >= '11-19-2012 00:00:00') 
```

但老实说，我怀疑它会改变什么。

# objective-c - 发送到类的无法识别的选择器 - 用于没有参数的静态方法

> ID：13602982
> 
> 赞同：3
> 
> 时间：2012-11-28T10:32:44.287
> 
> 标签：objective-c, ios, xcode, static-methods

。H

```
#import <Foundation/Foundation.h>
#import "Person.h"

extern NSString *const kRemindersWeekly;
extern NSString *const kRemindersDaily;

@interface Reminders : NSObject

+(void)setRemindersForPerson: (Person*) person;
+(void)setEightDayReminder;

@end 
```

.m

```
#import "Reminders.h"
@implementation Reminders

NSString *const kRemindersWeekly    = @"WEEKLY";
NSString *const kRemindersDaily     = @"DAILY";

+ (void) setRemindersForPerson: (Person*) person
{
    // some code
}

+(void)setEightDayReminder
{
    // some more code
}

@end 
```

当我打电话时：

```
[Reminders setRemindersForPerson: p]; 
```

这总是很好。当我打电话时：

```
[Reminders setEightDayReminder]; 
```

我得到：

```
+[Reminders setEightDayReminder]: unrecognized selector sent to class 0xe1b58 
```

此外，`[Reminders setRemindersForPerson:];`通话`[Person setEightDayReminder]`没有任何问题。构建良好，并且命令单击 XCode 中的功能会显示它。我认为一切都井井有条，因为它将我带到了适当的地方。

一定是遗漏了什么明显的东西？！把我的头发拉出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T13:01:01.167

我遇到了一个非常相似的问题，原因是我有一个类别，我忘记在 @implementation 块中指定类别，从而有效地用“新”实现覆盖了原始实现。

因此，如果您在 SomeClass 类上有一个 MyCategory 类别，请确保其实现如下所示：

```
@interface SomeClass (MyCategory) ... 
```

不*喜欢*：

```
@interface SomeClass ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:07:34.063

有一种简单的调试方法 - 在那里放置一个断点并观察发生了什么。

请参阅[在 Xcode 中为无法识别的选择器创建断点](https://stackoverflow.com/questions/7156090/creating-breakpoint-in-xcode-for-unrecognized-selector)如何为无法识别的选择器创建断点。你的堆栈跟踪应该告诉你你需要知道的一切。

可能您也应该添加您的调用代码。

# javascript - 如何在单击驻留在 aspx 的用户控件中的超链接时生成弹出窗口（用户控件或 div）？

> ID：13602985
> 
> 赞同：0
> 
> 时间：2012-11-28T10:32:45.660
> 
> 标签：javascript, asp.net, jquery, ext.net

项目基于带有 ext.net 控件的 Nhibernate 和 spring 框架。

我有一个用户控件 UCA.ascx，它有一个点击时的超链接，我想生成一个弹出窗口来显示详细信息。那么可以做些什么呢？欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:36:58.633

target 属性允许您设置锚点的目标窗口。

```
<a target="_blank" href="url"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:51:37.013

您是否尝试过使用**JqueryUI 对话框**。

[对话](http://jqueryui.com/dialog/)

`input`在要弹出的 div 中添加所需的框。

```
<div id="dialog" title="Basic dialog">
//show details here....
</div> 
```

您可以修改 div 并在其中添加所需的任何控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:44:51.717

你可以写一个这样的函数

```
 function openWindow() {
var URL = "/Test.aspx"
        window.open(URL);
        } 
```

像这样打电话

```
 <a onclick="openWindow()" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:49:00.623

对于弹出窗口，您可以使用 AJAX 模态弹出扩展器。

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

# java - JML 后置条件包含类方法调用

> ID：13602989
> 
> 赞同：3
> 
> 时间：2012-11-28T10:32:58.827
> 
> 标签：java, contracts, jml, post-conditions

类方法的 JML 后置条件是否可以包含对另一个方法调用的调用

例如我有这个类：

```
public class A
{
    public int doA(x)
    { ... }

    public int doB(int x, int y)
    { ... }
} 
```

对于 doB 的后置条件，我可以有：`ensures doA(x) = doA(y)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:49:15.660

是的，只要被调用的方法不包含副作用并且被声明为纯的：

> / *@pure@* / 注释表明 peek() 是一个纯方法。纯方法是没有副作用的方法。JML 只允许断言使用纯方法。我们声明 peek() 是纯的，因此它可以在 pop() 的后置条件中使用。如果 JML 允许在断言中使用非纯方法，那么我们可能会无意中编写具有副作用的规范。这可能导致代码在启用断言检查的情况下编译时有效，但在禁用断言检查时不起作用。

[http://www.ibm.com/developerworks/java/library/j-jml/index.html](http://www.ibm.com/developerworks/java/library/j-jml/index.html)

```
public class A
{
    public /*@ pure @*/ int doA(int x)
    { ... }

    //@ requires ...
    //@ ensures doA(x) == doA(y)
    public int doB(int x, int y)
    { ... }
} 
```

# youtube-api - 使用 Youtube API 从 Youtube 获取错误消息

> ID：13602990
> 
> 赞同：1
> 
> 时间：2012-11-28T10:33:02.260
> 
> 标签：youtube-api, youtube.net-api

我正在使用 YouTube API 和 C# 开发 Windows 8 应用程序。现在我需要显示 youtube 播放器在视频上显示失败的相同错误消息。比如像这样，

![在此处输入图像描述](../Images/0b08eff3ec8e29d6eb16815b77f8dd1c.png)

是否有任何 API 查询可用于获取此错误消息或任何其他最佳方式来完成此操作...？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:42:20.117

如果您从应用程序播放 YouTube 内容，您应该使用官方 YouTube 播放器之一（如[iframe 嵌入式播放器](https://developers.google.com/youtube/iframe_api_reference)），在这种情况下，播放器本身将负责处理播放限制和显示 UX 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:42:38.523

我认为您无法获得这样的消息的实际文本，但您可以知道它何时被触发；使用视频的 gdata 提要并专门搜索 media:restriction 元素，如下所示：

```
http://gdata.youtube.com/feeds/api/videos/zYNNPfuAHa4?fields=media:group/media:restriction 
```

它将为您提供将触发上述错误消息的国家/地区列表；像这样的东西：

```
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/">
<media:group>
<media:restriction type="country" relationship="deny">PR GU VI CA DE US UM AS MP PM</media:restriction>
</media:group>
</entry> 
```

# javascript - 倒计时计时器冻结在铬

> ID：13602991
> 
> 赞同：0
> 
> 时间：2012-11-28T10:33:08.810
> 
> 标签：javascript, jquery

我们使用 jpages 脚本进行分页。参考： http: [//luis-almeida.github.com/jPages/](http://luis-almeida.github.com/jPages/)

该`init()`功能冻结倒数计时器。我们使用 countdown.js 作为计时器。

通常计时器工作正常。但是当`init()`函数被调用时，它被冻结了。

有什么解决方案可以解决这个问题吗？

* * *

**更新：**

请查看以下位置：http: [//vsoftdemos.com/test_chrome.html](http://vsoftdemos.com/test_chrome.html)

这是 google chrome 特有的问题，它在所有其他浏览器上运行良好。以下是复制此问题的步骤。

在谷歌浏览器上加载此页面后，您可以看到计时器正在工作。然后请打开一个新选项卡并通过 url 并单击 enter 按钮。现在计时器停止运行，如果您刷新页面，它会再次运行。

如果我在[http://vsoftdemos.com/jPages.js](http://vsoftdemos.com/jPages.js)中评论一行，效果很好。我评论的那一行是 `this.init();`

我希望我清楚地解释了一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:45:36.300

好的，浏览了您的演示页面代码后，我所能建议的就是稍微重新排序您的脚本。

移动这个

```
<script type="text/javascript" src="jPages.js"></script> 
```

进入头部

```
 <script type="text/javascript" src="jquery_001.js"></script>
    <script type="text/javascript" src="jquery.countdown.js"></script>
    <script type="text/javascript" src="jPages.js"></script>
</head> 
```

然后结合你的其他脚本（并稍微调整一下）

```
<script type="text/javascript">
    $(function(){

        $("div.holder").jPages({
            containerID : "itemContainer",
            callback: function(pages, items)
            {
                init_timer();
            }
        });

        function init_timer()
        {
            $('.countbox1041').countdown({
                layout : '<b>{d<}{dnn}D:{d>}' + '{hnn}:{mnn}:{snn}</b>',
                timeSeparator : ':',
                onExpiry : function () {
                },
                until : 100000
            });
        }

        init_timer();

    });
</script> 
```

现在这个脚本对我有用，我只能假设因为倒计时 div 在 jpages div 内，所以 jpages 脚本对计时器有一些不利影响，我在 jpages 代码中添加了一个回调来触发计时器每次翻页（或无论它做什么）

希望这可以帮助

# php - 用这个 bbcode 替换这个 bbcode

> ID：13602996
> 
> 赞同：3
> 
> 时间：2012-11-28T10:33:30.183
> 
> 标签：php, regex

基本上，我正在尝试将 xenforo 的论坛脚本数据库转换为我的自定义数据库（放弃我在 xenforo 上的使用），他们的 bbcode 让我很烦。

我正在尝试将所有 url bbcode 从他们的更改为我的：

```
$message = preg_replace("/\[url\=\'(.+?)\'\](.+?)\[\/url\]/is",
                        "[url=$1]$2[/url]", $message); 
```

基本上他们在我不想要的网址周围有单引号，但我的代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:44:43.123

如果你对你的正则表达式字符串使用双引号，你必须双转义，因为 PHP 也解释反斜杠

```
$message = preg_replace("/\\[url='(.+?)'\\](.+?)\\[\\/url\\]/is",
                        "[url=$1]$2[/url]", $message); 
```

测试用例

```
<?php
$message = "[url='http://www.example.com/test']My test URL[/url]";
$message = preg_replace("/\\[url='(.+?)'\\](.+?)\\[\\/url\\]/is",
                        "[url=$1]$2[/url]", $message);
echo "$message\n"; 
```

及其输出

> [url=http://www.example.com/test]我的测试网址[/url]

测试在 Ubuntu 12.04 和 PHP 5.3.10 上完成。

# c# - 向 EMGU CV 识别器添加新的训练人脸（C#）

> ID：13602998
> 
> 赞同：1
> 
> 时间：2012-11-28T10:33:29.817
> 
> 标签：c#, emgucv

识别器构建后：

```
recognizer = new EigenObjectRecognizer(trainingImages, labels, 
             eigenDistanceThreshold, ref termCrit); 
```

是否可以添加新图像，例如：

```
recognizer.Add(image, label) 
```

?

拥有数千张经过训练的面孔并不是在每个新面孔之后重建（重新训练）识别器的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-31T07:30:33.910

使用[这个](http://www.codeproject.com/Articles/261550/EMGU-Multiple-Face-Recognition-using-PCA-and-Paral)库，它就像人脸识别（特征识别器）类的帮助库，并提供了一种存储训练图像的简单方法。