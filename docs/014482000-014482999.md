# StackOverflow 问答 14482000-14482999

# cuda - CUDA 程序的运行时间

> ID：14482000
> 
> 赞同：2
> 
> 时间：2013-01-23T14:24:34.140
> 
> 标签：cuda, parallel-processing

这是我要计算经过时间的 CUDA 代码。我对 CUDA 很陌生，所以去尝试了一些 API，比如 .

```
 cudaEventRecord(stop, 0);
      cudaEventSynchronize(stop);
      float elapsedTime;
      cudaEventElapsedTime(&elapsedTime, start, stop); 
```

但我不知道将这些语句放在下面的代码中，即我不知道如何安排这些代码。谁能指导我在哪里可以在代码中插入这些语句？

```
 #include<stdio.h>
        #define N 512

     __global__ void add( int *a, int *b, int *c) 
       {
               *c= *a+ *b;
       }

      int main(void) 
       {
        int *a, *b, *c; // host copies of a, b, c
        int *dev_a, *dev_b, *dev_c; // device copies of a, b, c
        int size = N * sizeof(int); // we need space for 512 integers

        // allocate device copies of a, b, c
        cudaMalloc( (void**)&dev_a, size );
        cudaMalloc( (void**)&dev_b, size );
        cudaMalloc( (void**)&dev_c, size );

        a = (int*)malloc( size );
        b = (int*)malloc( size );
        c = (int*)malloc( size );

        //random_ints( a, N );
        //random_ints( b, N );

        // copy inputs to device
        cudaMemcpy( dev_a, a, size, cudaMemcpyHostToDevice);
        cudaMemcpy( dev_b, b, size, cudaMemcpyHostToDevice);

        // launch add() kernel with N parallel blocks
        add <<< N, 1 >>>( dev_a, dev_b, dev_c);

        // copy device result back to host copy of c
        cudaMemcpy( c, dev_c, size, cudaMemcpyDeviceToHost);

        free( a ); free( b ); free( c );

        cudaFree( dev_a);
        cudaFree( dev_b);
        cudaFree( dev_c);

      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:33:06.333

CUDA 事件的时间测量如下：

假设您要测量内核的时间`add`。

```
cudaEvent_t start,stop;
float elapsedTime;

cudaEventCreate(&start);
cudaEventCreate(&stop);
cudaEventRecord(start,0);

add <<< N, 1 >>>( dev_a, dev_b, dev_c);

cudaEventRecord(stop,0);
cudaEventSynchronize(stop);

cudaEventElapsedTime(&elapsedTime,start,stop);

cout<<"\n\nElapsed Time = "<<elapsedTime<<" milliseconds"; 
```

# ruby-on-rails-3 - Rails 3 Cocoon link_to_add_association 部分渲染两次

> ID：14482001
> 
> 赞同：7
> 
> 时间：2013-01-23T14:24:37.363
> 
> 标签：ruby-on-rails-3, nested-attributes, cocoon-gem

正如预期的那样，我的部分被渲染了两次而不是只渲染一次。有什么想法吗？

这是我的个人视图

```
<%= simple_nested_form_for(@person) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">

    <%= f.input :name %>

    <h3>Records by year</h3>

    <div id='records'>
      <%= f.simple_fields_for :records do |record| %>
        <%= render 'record_fields', :f => record %>
      <% end %>

      <div class='links'>
        <%= link_to_add_association 'New Record', f, :records, :class => 'btn' %>
      </div>
    </div>

  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

模型（删除了常量和验证等内容）：

```
class Person < ActiveRecord::Base

    attr_accessible :name, :records_attributes

    has_many :records, :dependent => :destroy
    accepts_nested_attributes_for :records, :reject_if => :all_blank, :allow_destroy => true

end

class Record < ActiveRecord::Base

    attr_accessible :price, :status, :year, :person_id

    belongs_to :person
end 
```

我的 _record_fields.html.erb 部分看起来像这样：

```
<div class='nested-fields well'>
    <%= f.input :price %>

    <%= f.input :year %>

    <%= f.input :status, :collection => record_statuses, :include_blank => false %>

    <%= link_to_remove_association "Remove", f %>
</div> 
```

一个有趣的问题是，如果我更改生成部分的位置（所以“之后”而不是默认的“之前”link_to_add_association 链接），它会在按钮之后生成部分，但在 link_to_add_association 链接之前生成副本。

我能找到的唯一类似的问题是与生产中的缓存有关。这发生在开发中，并且我的缓存已关闭（默认情况下）。

我错过了什么吗？任何人都可以帮忙吗？

**编辑：** 查看 cocoon JavaScript，似乎单击事件被调用两次（使用 $('.add_fields').click() 进行测试，触发 $('.add_fields').live('click' , function() {...} ) 两次。我仍然不知道为什么会发生这种情况。非常感谢输入。

**编辑#2：**

控制器：

```
 # GET /persons/new
  # GET /persons/new.json
  def new
    @person = Person.new
    # @person.records.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @person }
    end
  end

  # GET /persons/1/edit
  def edit
    @person = Person.find(params[:id])
  end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T00:02:07.033

我遇到了同样的问题。我的问题是我需要两次茧 javascript。

一旦进入我的 application.js

```
// app/assets/javascripts/application.js
//= require cocoon 
```

一次在我的应用程序布局中

```
/ app/views/layouts/application.html.haml
= javascript_include_tag :cocoon 
```

从我的布局中删除包含标签后，它开始按预期工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-20T18:41:27.143

有同样的问题，发现在我的应用程序布局（app/views/layouts/application.html.erb）中我已经包含了应用程序，并且在 application.js 中我已经包含了茧。当我认为在 cocoon 中包含 application.js 时，cocoon 会触发两次。

（与上面相同，但略有不同，因为我没有在 application.html.erb 中明确指定 cocoon，我指定了包含 cocoon 的 application.js）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-22T21:19:59.697

这发生在从 application.js 开始时，您需要两次茧，通常，当您尝试将 jQuery 更改为 vanilla Javascript 时

# jquery - LazyLoader 延迟不起作用

> ID：14482009
> 
> 赞同：0
> 
> 时间：2013-01-23T14:25:01.027
> 
> 标签：jquery, lazy-loading

我正在使用[LazyLoader](http://www.appelsiini.net/projects/lazyload/enabled_timeout.html)插件。

```
<img src="http://www.bostonbakesforbreastcancer.org/wp-content/uploads/2012/03/sun.jpg" data-original="http://www.bostonbakesforbreastcancer.org/wp-content/uploads/2012/03/sun.jpg" width="100" height="100" alt="BMW M1 Hood" style="display: block;"> 
```

还有我的 jQuery 代码：

```
 $(function() {          
     $("img").lazyload({
         event : "sporty"
     });
 });
 $(window).bind("load", function() { 
     var timeout = setTimeout(function() { $("img").trigger("sporty") }, 10000);
 }); 
```

但是 Lazyloader 不能在这个结构上工作。请看这个链接：

[http://jsfiddle.net/97EJE/](http://jsfiddle.net/97EJE/)

我的问题是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:03:53.670

我已经解决了问题。当我将 min.js 文件更改为 main js 并添加 .css 文件时，它可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:20:22.883

根据[文档](http://www.appelsiini.net/projects/lazyload)，该`src`属性应包含占位符图像（不是原始图像）的`data-original`url，并且应包含原始图像的 url。目前，您都指向原始图像。

# php - 使用 Symfony2 的注释 Valid/Regex/Order By 的问题

> ID：14482015
> 
> 赞同：1
> 
> 时间：2013-01-23T14:25:16.247
> 
> 标签：php, symfony, doctrine-orm

在我的实习期间，我正在将一个网站从 Symfony 1.x 更新到 Symfony 2.1，并且我对 Doctrine 的注释有一些问题。顺便说一句，我是 Symfony2 的新手。

我遇到这种类型的异常：

> 渲染模板期间抛出异常（“[Semantical Error] The annotation "@Doc​​trine\ORM\Mapping\OrderBy" in property IHQS\NuitBlancheBundle\Entity\SC2Profile::$games 不存在，或不能自动加载。”）在“/var/www/sites/nuitblanche1/src/IHQS/NuitBlancheBundle/Resources/views/News/archives.html.twig”中。

我的代码是：

```
<?php

namespace IHQS\NuitBlancheBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity(repositoryClass="IHQS\NuitBlancheBundle\Model\SC2ProfileRepository")
 * @ORM\Table(name="player")
 */
class SC2Profile
{
    const SC2RACE_PROTOSS = "protoss";
    const SC2RACE_TERRAN  = "terran";
    const SC2RACE_ZERG    = "zerg";
    const SC2RACE_RANDOM  = "random";

    static public $_sc2races = array(
        self::SC2RACE_PROTOSS   => self::SC2RACE_PROTOSS,
        self::SC2RACE_TERRAN    => self::SC2RACE_TERRAN,
        self::SC2RACE_ZERG  => self::SC2RACE_ZERG,
        self::SC2RACE_RANDOM    => self::SC2RACE_RANDOM
    );

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\OneToOne(targetEntity="User", inversedBy="sc2", cascade={"persist"})
     * @Assert\NotBlank
     */
    protected $user;

    /**
     * @ORM\Column(type="string", nullable=true)
     */
    protected $sc2Role;

    /**
     * @ORM\Column(type="integer")
     * @Assert\Regex("/\d+/")
     */
    protected $sc2Id;

    /**
     * @ORM\Column(type="integer", nullable=true)
     */
    protected $sc2RanksId;

    /**
     * @ORM\Column(type="string", nullable=true)
     */
    protected $sc2Account;

    /**
     * @ORM\Column(type="string")
     * @Assert\Choice(callback = "getSC2Races")
     */
    protected $sc2Race;

    /**
     * @ORM\Column(type="string", nullable=true)
     * @Assert\Regex("/\d+/")
     */
    protected $sc2ProfileEsl;

    /**
     * @ORM\Column(type="string", nullable=true)
     * @Assert\Regex("/\d+/")
     */
    protected $sc2ProfileSc2cl;

    /**
     * @ORM\Column(type="string", nullable=true)
     */
    protected $sc2ProfilePandaria;

    /**
     * @ORM\Column(type="text", nullable=true)
     */
    protected $sc2Ranks;

    /**
     * @ORM\ManyToMany(targetEntity="Team", mappedBy="players")
     */
    protected $teams;

    /**
     * @ORM\OneToMany(targetEntity="GamePlayer", mappedBy="player")
     * @ORM\OrderBy({"id" = "DESC"})
     */
    protected $games;

    protected $stats;

    protected $statsInit = false;

    public function getId() {
        return $this->id;
    }

    public function getUser() {
        return $this->user;
    }

    public function setUser(User $user) {
        $this->user = $user;
    }

    public function getUsername() {
        return $this->user->getUserName();
    }

    public function getSc2Role() {
        return $this->sc2Role;
    }

    public function setSc2Role($sc2Role) {
        $this->sc2Role = $sc2Role;
    }

    public function getSc2Id() {
        return $this->sc2Id;
    } 

    public function setSc2Id($sc2Id) {
        $this->sc2Id = $sc2Id;
    }

    public function getSc2RanksId()
    {
         return $this->sc2RanksId;
    }

    public function setSc2RanksId($sc2RanksId)
    {
        $this->sc2RanksId = $sc2RanksId;
    }

    public function getSc2Account() {
        return $this->sc2Account;
    }

    public function setSc2Account($sc2Account) {
        $this->sc2Account = $sc2Account;
    }

    public function getSc2Race() {
        return $this->sc2Race;
    }

    public function setSc2Race($sc2Race) {
        if(!in_array($sc2Race, SC2Profile::$_sc2races))
        {
            throw new \InvalidArgumentException('Invalid parameter "' . $sc2Race . '" for StarCraft 2 Race');
        }
        $this->sc2Race = $sc2Race;
    }

    public function getSc2ProfileEsl() {
        return $this->sc2ProfileEsl;
    }

    public function setSc2ProfileEsl($sc2ProfileEsl) {
        $this->sc2ProfileEsl = $sc2ProfileEsl;
    }

    public function getSc2ProfileSc2cl() {
        return $this->sc2ProfileSc2cl;
    }

    public function setSc2ProfileSc2cl($sc2ProfileSc2cl) {
        $this->sc2ProfileSc2cl = $sc2ProfileSc2cl;
    }

    public function getSc2ProfilePandaria() {
        return $this->sc2ProfilePandaria;
    }

    public function setSc2ProfilePandaria($sc2ProfilePandaria) {
        $this->sc2ProfilePandaria = $sc2ProfilePandaria;
    }

    public function getGames() {
        $games = $this->games;

        $result = array();
        foreach($games as $game)
        {
            $result[] = $game->getGame();
        }
        return $result;
    }

    public function getWarGames()
    {
        $warGames = array();
        foreach($this->getGames() as $game)
        {
            $wg = $game->getWarGame();
            if($wg instanceof WarGame)
            {
                $warGames[$wg->getId()] = $wg;
            }
        }

        return $warGames;
    }

    public function getReplays() {
        $games = $this->games;

        $result = array();
        foreach($games as $game)
        {
            if(!$game->getGame())               { continue; }
            if(!$game->getGame()->getReplay())  { continue; }

            $result[] = $game->getGame();
        }

        return $result;
    }

    public function getStats()
    {
        if($this->statsInit) { return $this->stats; }

        $this->initStatsVariables();

        $counter = 0;
        foreach($this->getWarGames() as $game)
        {
            $team2 = false;
            foreach($game->getTeam2() as $p2)
            {
                if($p2->getPlayer() && $p2->getPlayer()->getId() == $this->getId()) { $team2 = true; break; }
            }
            if($team2) { continue; }

            $type = "_" . $game->getType();

            if($game->getTeam1Result() == Game::RESULT_WIN)     { $this->stats[$type]["wins"]++; }
            if($game->getTeam1Result() == Game::RESULT_LOSS)    { $this->stats[$type]["losses"]++; }

            if($game->getType() == Game::TYPE_1v1)
            {
                $type = $type.$game->getTeam2Race();
                if($game->getTeam1Result() == Game::RESULT_WIN)     { $this->stats[$type]["wins"]++; }
                if($game->getTeam1Result() == Game::RESULT_LOSS)    { $this->stats[$type]["losses"]++; }
            }
        }

        foreach($this->stats as $type => $data)
        {
            $this->stats[$type]["ratio"] = (($data["losses"] + $data["wins"]) == 0)
                ? 0
                : round(100 * $data["wins"] / ($data["losses"] + $data["wins"]));
        }

        $this->statsInit = true;
        return $this->stats;
    }

    public function initStatsVariables()
    {
        $this->stats = array(
            "_1v1" => array(),
            "_2v2" => array(),
            "_3v3" => array(),
            "_4v4" => array(),
            "_1v1protoss"   => array(),
            "_1v1terran"    => array(),
            "_1v1zerg"      => array(),
            "_1v1random"    => array()
        );

        foreach($this->stats as $type => $data)
        {
            $this->stats[$type] = array(
                "wins"      => 0,
                "losses"    => 0,
                "ratio"     => 0
            );
        }
    }

    public function get2v2Teams()
    {
        $teams = array();

        foreach($this->getWarGames() as $game)
        {
            if($game->getType() != Game::TYPE_2v2)
            {
                continue;
            }

            $team2 = false;
            foreach($game->getTeam2() as $p2)
            {
                if($p2->getPlayer() && $p2->getPlayer()->getId() == $this->getId()) { $team2 = true; break; }
            }
            if($team2) { continue; }

            // looking for ally
            $ally = null;
            $members = $game->getTeam1();
            foreach($members as $member)
            {
                if($member->getName() != $this->getSc2Account())
                {
                    $ally = $member;
                    break;
                }
            }

            // updating hash table
            $key = $ally->getName(). '_' . $ally->getRace();
            if(!isset($teams[$key]))
            {
                $teams[$key] = array(
                    "allyName"  => $ally->getName(),
                    "allyRace"  => $ally->getRace(),
                    "wins"  => 0,
                    "losses"    => 0
                );
            }

            if($game->getTeam1Result() == Game::RESULT_WIN)     { $teams[$key]["wins"]++; }
            if($game->getTeam1Result() == Game::RESULT_LOSS)    { $teams[$key]["losses"]++; }
        }

        foreach($teams as $key => $team)
        {
            $teams[$key]["ratio"] = (($team["losses"] + $team["wins"]) == 0)
                ? 0
                : round(100 * $team["wins"] / ($team["losses"] + $team["wins"]));
        }

        usort($teams, function($a, $b) {
            if($a['wins'] == $b['wins'])
            {
                if($a['losses'] == $b['losses']) { return 0; }
                return $a['losses'] > $b['losses'] ? 1 : -1;
            }

            return $a['wins'] < $b['wins'] ? 1 : -1;
        });
        return $teams;
    }

    public function setSc2Ranks(array $sc2ranks)
    {
        $this->sc2Ranks = serialize($sc2ranks);
    }

    public function getSc2Ranks()
    {
        return unserialize($this->sc2Ranks);
    }

    public function __toString() {
            return $this->getSc2Account();
    }
} 
```

而且我也遇到了与未自动加载或不存在的约束/正则表达式相同的问题。尽管我的所有学说包都在工作。我的问题有点简单：我做错了什么？（我知道这不是一个非常具体的！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T20:29:40.887

问题似乎与`@ORM\OrderBy({"id" = "DESC"})`注释无关。这看起来是正确的，并且您已将`use Doctrine\ORM\Mapping as ORM;`.

看起来问题与您的`SC2Profile`实体和您的`GamePlayer`实体之间的关系有关。这两个实体都在`IHQS\NuitBlancheBundle\Entity`命名空间中吗？

您可以尝试更新关系以使用完全限定的类名。

```
/**
 * @ORM\OneToMany(targetEntity="\IHQS\NuitBlancheBundle\Entity\GamePlayer", mappedBy="player")
 * @ORM\OrderBy({"id" = "DESC"})
 */
protected $games; 
```

最后，确保您的实体`ManyToOne`中已设置相反的关系 ( ) 。`GamePlayer`

```
/**
 * @ORM\ManyToOne(targetEntity="SC2Profile", inversedBy="games")
 * @ORM\JoinColumn(name="id", referencedColumnName="referenced_id")
 */
protected $player; 
```

# java - 用于 chrome 中 html5 视频的 Servlet 流式传输 mp4

> ID：14482019
> 
> 赞同：8
> 
> 时间：2013-01-23T14:25:34.403
> 
> 标签：java, servlets, video-streaming, html5-video

我正在尝试从 Java servlet 流式传输电影（基于浏览器的 mp4 或 ogv）以在 HTML5 网页中使用。在这里做了一些研究后，我发现我需要支持范围。在大多数示例中，都引用了[http://balusc.blogspot.be/2009/02/fileservlet-supporting-resume-and.html](http://balusc.blogspot.be/2009/02/fileservlet-supporting-resume-and.html)。这似乎适用于 IE 和 Firefox，除了一些抛出的套接字写入错误，但电影在这 2 个浏览器中播放。

然而，在 Chrome 中，电影开始时很好，但大多数时候它只是在播放 mp4 时变成空白，或者在播放一段时间后在 ogv 时冻结。我没有收到任何错误。

我正在为我的 servlet使用来自[Balusc的源代码。](http://balusc.blogspot.be/2009/02/fileservlet-supporting-resume-and.html "栏杆")我唯一添加的是根据请求的文件确定子文件夹的逻辑，但这在我添加自己的东西之前就已经发生了。

非常感谢您的帮助，因为它让我发疯，它有时有效，有时没有任何明确的理由。

谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-14T13:27:57.110

对于 Chrome，尝试使用低字节范围从流中读取响应（例如：您设置了 10240 字节，从源 Balusc 看来，将此值设置为 1024*8/7/6），有人告诉它有帮助在 Chrome 中完全播放视频。

# c# - 如何保护 azure blob

> ID：14482020
> 
> 赞同：5
> 
> 时间：2013-01-23T14:25:36.333
> 
> 标签：c#, azure, azure-storage, azure-blob-storage

我正在使用 Windows azure blob 存储服务。我想保护我的 blob 免受公共访问（我的用户除外）。为此，我使用了共享访问签名 (SAS)，它工作正常。但我的问题是我有一个在目录结构中包含 blob 的容器，例如：

```
 https://xxxxxxx.blob.core.windows.net/myContainer/directory1/blob1
  https://xxxxxxx.blob.core.windows.net/myContainer/directory1/blob2
  https://xxxxxxx.blob.core.windows.net/myContainer/directory1/blob3
  https://xxxxxxx.blob.core.windows.net/myContainer/directory1/blob4
  https://xxxxxxx.blob.core.windows.net/myContainer/directory1/blob5

  https://xxxxxxx.blob.core.windows.net/myContainer/directory2/blob1       
  https://xxxxxxx.blob.core.windows.net/myContainer/directory2/blob2      
  https://xxxxxxx.blob.core.windows.net/myContainer/directory2/blob3      
  https://xxxxxxx.blob.core.windows.net/myContainer/directory2/blob4      
  https://xxxxxxx.blob.core.windows.net/myContainer/directory2/blob5

  and so on... 
```

现在我的要求是我想公开访问所有 blob 中的 blob，`myContainer under directory2`但不提供下`directory1`的 blob，我想将 directory1 下的所有 blob 保持为私有。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:40:12.380

Azure blob 存储中没有目录。您现在拥有的那些“目录”只是`/`名称中嵌入的 blob。由于权限仅在容器级别，因此您必须创建单独的容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:58:34.117

您可以创建两个容器。

一个带有 SAS 容器级别的私有容器和一个公共访问容器

```
 https://xxxxxxx.blob.core.windows.net/private/blob1
  https://xxxxxxx.blob.core.windows.net/private/blob2
  https://xxxxxxx.blob.core.windows.net/private/blob3
  https://xxxxxxx.blob.core.windows.net/private/blob4
  https://xxxxxxx.blob.core.windows.net/private/blob5

  https://xxxxxxx.blob.core.windows.net/public/blob1       
  https://xxxxxxx.blob.core.windows.net/public/blob2      
  https://xxxxxxx.blob.core.windows.net/public/blob3      
  https://xxxxxxx.blob.core.windows.net/public/blob4      
  https://xxxxxxx.blob.core.windows.net/public/blob5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:39:58.500

您只能在容器级别设置权限，因此您有两个选择。

首选选项）创建一个额外的公共容器并移动你的 blob。更糟糕的选择）为所有文件创建一个看似无穷无尽的有效 sas 链接。

# php - php - 正则表达式 - 如何从字符串（例如 1,120.01）中提取带小数点（点和逗号）的数字？

> ID：14482022
> 
> 赞同：8
> 
> 时间：2013-01-23T14:25:37.243
> 
> 标签：php, regex

如何从字符串（例如 1,120.01）中提取带小数点（点和逗号）的数字？我有一个正则表达式，但似乎不能很好地使用逗号

```
preg_match('/([0-9]+\.[0-9]+)/', $s, $matches);
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-23T14:47:01.950

## 用逗号和小数匹配数字的正确正则表达式如下（前两个将验证数字的格式是否正确）：

* * *

## 小数可选（两位小数）

```
^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$ 
```

[![正则表达式可视化](../Images/437389a0ba9acbae7cc7167dae91749e.png)](https://i.stack.imgur.com/s4UAy.png)

**[调试演示](https://www.debuggex.com/r/YSCk5jd2XjmtM6U_)**

**解释：**

```
number (decimal optional)

^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$

Options: case insensitive

Assert position at the beginning of the string «^»
Match a single character present in the list below «[+-]?»
   Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
   The character “+” «+»
   The character “-” «-»
Match a single character in the range between “0” and “9” «[0-9]{1,3}»
   Between one and 3 times, as many times as possible, giving back as needed (greedy) «{1,3}»
Match the regular expression below «(?:,?[0-9]{3})*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   Match the character “,” literally «,?»
      Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
   Match a single character in the range between “0” and “9” «[0-9]{3}»
      Exactly 3 times «{3}»
Match the regular expression below «(?:\.[0-9]{2})?»
   Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
   Match the character “.” literally «\.»
   Match a single character in the range between “0” and “9” «[0-9]{2}»
      Exactly 2 times «{2}»
Assert position at the end of the string (or before the line break at the end of the string, if any) «$» 
```

***将匹配：***

```
1,432.01
456.56
654,246.43
432
321,543 
```

***不匹配***

```
454325234.31
324,123.432
,,,312,.32
123,.23 
```

* * *

## 必须小数（两位小数）

```
^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*\.[0-9]{2}$ 
```

[![正则表达式可视化](../Images/9d20d4c41e7808a214f1bb5e7d4afbe9.png)](https://i.stack.imgur.com/fPUIJ.png)

**[调试演示](https://www.debuggex.com/r/0B--SOn967897QaW)**

**解释：**

```
number (decimal required)

^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*\.[0-9]{2}$

Options: case insensitive

Assert position at the beginning of the string «^»
Match a single character present in the list below «[+-]?»
   Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
   The character “+” «+»
   The character “-” «-»
Match a single character in the range between “0” and “9” «[0-9]{1,3}»
   Between one and 3 times, as many times as possible, giving back as needed (greedy) «{1,3}»
Match the regular expression below «(?:,?[0-9]{3})*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   Match the character “,” literally «,?»
      Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
   Match a single character in the range between “0” and “9” «[0-9]{3}»
      Exactly 3 times «{3}»
Match the character “.” literally «\.»
Match a single character in the range between “0” and “9” «[0-9]{2}»
   Exactly 2 times «{2}»
Assert position at the end of the string (or before the line break at the end of the string, if any) «$» 
```

***将匹配：***

```
1,432.01
456.56
654,246.43
324.75 
```

***不匹配：***

```
1,43,2.01
456,
654,246
324.7523 
```

* * *

## 不加选择地匹配以逗号或小数分隔的数字：

```
^(\d+(.|,))+(\d)+$ 
```

[![正则表达式可视化](../Images/d8cedf336bfa4d74461f5960709ca243.png)](https://i.stack.imgur.com/BWNKD.png)

**[调试演示](https://www.debuggex.com/r/mNDakHGxuFq4wjWT)**

**解释：**

```
 Matches Numbers Separated by , or .

^(\d+(.|,))+(\d)+$

Options: case insensitive

Match the regular expression below and capture its match into backreference number 1 «(\d+(.|,))+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Note: You repeated the capturing group itself.  The group will capture only the last iteration.  Put a capturing group around the repeated group to capture all iterations. «+»
   Match a single digit 0..9 «\d+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Match the regular expression below and capture its match into backreference number 2 «(.|,)»
      Match either the regular expression below (attempting the next alternative only if this one fails) «.»
         Match any single character that is not a line break character «.»
      Or match regular expression number 2 below (the entire group fails if this one fails to match) «,»
         Match the character “,” literally «,»
Match the regular expression below and capture its match into backreference number 3 «(\d)+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Note: You repeated the capturing group itself.  The group will capture only the last iteration.  Put a capturing group around the repeated group to capture all iterations. «+»
   Match a single digit 0..9 «\d» 
```

***将匹配：***

```
1,32.543,2
5456.35,3.2,6.1
2,7
1.6 
```

***不匹配：***

```
1,.2 // two ., side by side
1234,12345.5467\. // ends in a .
,125 // begins in a ,
,.234 // begins in a , and two symbols side by side
123,.1245\. // ends in a . and two symbols side by side 
```

* * *

***注意：**包装在一个组中，然后拉组，如果您需要更多细节，请告诉我。*

***描述：**这种类型的 RegEx 真正适用于任何语言（PHP、Python、C、C++、C#、JavaScript、jQuery 等）。这些正则表达式主要适用于货币。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T14:29:00.517

你可以使用这个正则表达式： -

```
/((?:[0-9]+,)*[0-9]+(?:\.[0-9]+)?)/ 
```

**解释： -**

```
/(
    (?:[0-9]+,)*   # Match 1 or more repetition of digit followed by a `comma`. 
                   # Zero or more repetition of the above pattern.
    [0-9]+         # Match one or more digits before `.`
    (?:            # A non-capturing group
        \.         # A dot
        [0-9]+     # Digits after `.`
    )?             # Make the fractional part optional.
 )/ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T14:27:08.580

将逗号添加到可以在点前面的范围内：

```
/([0-9,]+\.[0-9]+)/
#     ^ Comma 
```

而这个正则表达式：

```
/((?:\d,?)+\d\.[0-9]*)/ 
```

只会匹配

```
1,067120.01
121,34,120.01 
```

但不是

```
,,,.01
,,1,.01
12,,,.01

# /(
#   (?:\d,?) Matches a Digit followed by a optional comma
#   +        And at least one or more of the previous
#   \d       Followed by a digit (To prevent it from matching `1234,.123`)
#   \.?      Followed by a (optional) dot
#            in case a fraction is mandatory, remove the `?` in the previous section.
#   [0-9]*   Followed by any number of digits  -->  fraction? replace the `*` with a `+`
# )/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:45:52.303

这应该工作

```
preg_match('/\d{1,3}(,\d{3})*(\.\d+)?/', $s, $matches); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T14:32:57.450

可识别区域设置的浮点数 (%f) 可能与 sscanf 一起使用。

```
$result = sscanf($s, '%f') 
```

不过，这并没有将这些部分拆分成一个数组。它只是解析一个浮点数。

另见： http: [//php.net/manual/en/function.sprintf.php](http://php.net/manual/en/function.sprintf.php)

正则表达式方法：

```
/([0-9]{1,3}(?:,[0-9]{3})*\.[0-9]+)/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-04T18:23:05.963

这是一个很棒的工作正则表达式。这接受带有逗号和小数的数字。

```
/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/ 
```

# iis - 服务器重新启动后未协商客户端证书

> ID：14482031
> 
> 赞同：0
> 
> 时间：2013-01-23T14:26:11.560
> 
> 标签：iis, ssl, iis-express

我在开发项目时使用的是 IIS Express 8。我在计算机帐户的个人文件夹中有一个公司证书，在当前用户帐户的个人文件夹中有几个客户端证书。我已经使用 mmc 工具成功安装了这些。我使用以下命令映射了 ssl 的证书和端口：

netsh http add sslcert ipport=0.0.0.0:44300 appid={} certstorename=MY certash=some hash clientcertnegotiation=enable

当我通过 VS 运行应用程序时，系统会正确提示我选择客户端证书。但是，当我重新启动机器并再次运行应用程序时，不再提示我输入客户端证书。删除映射并重新添加它可以解决问题......我再次重新启动。好的，我有一个解决方法，但它远非理想 - 我觉得我在某处遗漏了一些东西。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:22:10.337

好的，我现在整理了。根 CA 证书不在信任机构存储中，而是在个人中。由于某种原因，这在添加证书时运行良好（也许它在运行 netsh sslcert add 命令并缓存它时获取了根 CA 证书？）。

这篇文章帮助了我：http: [//blogs.msdn.com/b/friis/archive/2011/11/15/troubleshooting-403-7-client-certificate-required-errors-amp-step-by-step-to -make-sure-your-client-certificate-is-displayed-and-selected.aspx](http://blogs.msdn.com/b/friis/archive/2011/11/15/troubleshooting-403-7-client-certificate-required-errors-amp-step-by-step-to-make-sure-your-client-certificate-is-displayed-and-selected.aspx)

# javascript - 钛工作室试图从 blob 中保存图像

> ID：14482040
> 
> 赞同：1
> 
> 时间：2013-01-23T14:26:43.870
> 
> 标签：javascript, post, titanium, blob

我正在使用钛工作室，我正在尝试从 POST 请求中保存图像。

```
 function buyImage(s){

var userName = Ti.App.Properties.getString('username');
    var email = Ti.App.Properties.getString('email');
    var encKey = Ti.App.Properties.getString('key');

var client = Ti.Network.createHTTPClient({

    // function called when the response data is available
    onload : function(e) {
        Ti.API.info("Key Text: " + this.responseData);

        Titanium.Media.saveToPhotoGallery(this.responseData,{
    success: function(e) {
        Titanium.UI.createAlertDialog({
            title:'Photo Gallery',
            message:'Check your photo gallery for you image'
        }).show();      
    },
    error: function(e) {
        Titanium.UI.createAlertDialog({
            title:'Error saving',
            message:e.error
        }).show();  
    }

});

        Titanium.UI.createAlertDialog({title:'Photo Gallery',message:'Photo saved to gallery'}).show();     

    },
    onerror : function(e) {
        Ti.API.info(e.error);
        alert('error');
    },
    timeout : 5000 // in milliseconds
});
// Prepare the connection.
client.open("POST", "http://somesite/create/save?userName="+userName+"&encryptionKey="+encKey+"&email="+email+"&recordId="+s);
// Send the request.        
client.send(); 
```

图像说它可以保存，它说响应数据是 TiBlob，但图像似乎根本没有保存。当在浏览器的发布事件中完成相同的发布时，系统会提示您下载图像。

有任何想法吗？

# c# - 通过 LDAP 创建 LDS 用户时“指定的目录对象未绑定到远程资源”

> ID：14482043
> 
> 赞同：0
> 
> 时间：2013-01-23T14:27:03.293
> 
> 标签：c#, vb.net, active-directory, adlds

我正在通过 LDAP 和 VB.Net 访问 AD LDS，并且可以毫无问题地创建和组织组。但是，每当我尝试创建用户时，我都会收到上述错误，`specified directory object is not bound to a remote resource.`我在 SO 上看到了一些类似的问题，但这些解决方案对我不起作用。运行以下三个代码块中的任何一个时，我都会遇到相同的错误：

使用 System.DirectoryServices：

```
Dim rootEntry As DirectoryEntry = GetRootEntry()
Dim user As DirectoryEntry
Dim user_cn As String = String.Format("CN={0}{1}", firstName.Substring(0, 1), lastName)
Dim hosp_ou As String = BuildHospitalCN(HospitalName, HospitalID, "OU=Critical_Access_Hospitals")
user = rootEntry.Children.Find("OU=Users").Children.Find("OU=Critical_Access_Hospitals").Children.Find(hosp_ou).Children.Add(user_cn, "user")
With user
    .Properties("sAMAccountName").Value = String.Format("{0}{1}", firstName.Substring(0, 1), lastName)
    .Properties("givenName").Value = firstName
    .Properties("sn").Value = lastName
End With
user.CommitChanges() 
```

* * *

使用 System.DirectoryServices.AccountManagement：

```
Dim ctx As New PrincipalContext(ContextType.Domain)
Dim user As New UserPrincipal(ctx, _
                              String.Format("{0}{1}", firstName.Substring(0, 1), lastName), _
                              "password", _
                              True)
user.SamAccountName = String.Format("{0}{1}", firstName.Substring(0, 1), lastName)
user.GivenName = firstName
user.Surname = lastName
user.ExpirePasswordNow()
user.Save() 
```

* * *

使用我在网上找到的一个通过 LDAP 专门针对 AD LDS 的示例：

```
Dim objADAM As DirectoryEntry
Dim objUser As DirectoryEntry
Dim strDisplayName As String
Dim strPath As String
Dim strUser As String
Dim strUserPrincipalName As String

strPath = ConfigurationManager.AppSettings("LDAP_ROOT").ToString

objADAM = New DirectoryEntry(strPath, _
                             ConfigurationManager.AppSettings("LDAP_USER"), _
                             ConfigurationManager.AppSettings("LDAP_PASS"), _
                             AuthenticationTypes.None)
objADAM.RefreshCache()

strUser = String.Format("CN={0}{1}", firstName.Substring(0, 1), lastName)
strDisplayName = String.Format("{0} {1}", firstName, lastName)
strUserPrincipalName = String.Format("{0}{1}@example.com", firstName.Substring(0, 1), lastName)

objUser = objADAM.Children.Add(strUser, "user")
objUser.Properties("displayName").Add(strDisplayName)
objUser.Properties("userPrincipalName").Add(strUserPrincipalName)
objUser.CommitChanges() 
```

* * *

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:15:23.227

sAMAccountName 不是此 LDS 存储库中的有效属性。

# visual-studio-2012 - TFS 2012 构建器代码覆盖率

> ID：14482052
> 
> 赞同：1
> 
> 时间：2013-01-23T14:27:38.320
> 
> 标签：visual-studio-2012

我正在尝试在 TFS 2012 中设置代码覆盖率。我的解决方案已构建，我的测试已运行，但我没有得到代码覆盖率结果。我收到以下错误“为测试运行启用了代码覆盖率。在以下构建机器上安装 Visual Studio 以获得代码覆盖率结果：XXX”我已经在构建服务器上安装了 Visual Studio 2012 Professional，但仍然有同样的问题。

有没有人知道我如何让它工作。我需要安装不同版本的 Visual Studio 吗？

提前喝彩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:31:56.170

您确实需要不同版本的 Visual Studio。

代码覆盖率仅在 Visual Studio Premium 和 Ultimate 中可用（在 Visual Studio 版本 2010 和 2012 中）。

# html - 加入 twitter bootstrap 搜索框和搜索按钮，并在搜索按钮的右侧弯曲

> ID：14482058
> 
> 赞同：3
> 
> 时间：2013-01-23T14:28:03.470
> 
> 标签：html, css, search, button, twitter-bootstrap

这是我的引导代码

```
 <div class="input-append" align="center" > 
           <input type="text" name="q" class="span2 search-query" placeholder="Snipp or Tag"/> 

           <button type="submit" class="btn">Search</button> 

        </div> 
```

这是一个[jsfiddle](http://jsfiddle.net/nRK9y/)

`Search`有没有办法加入搜索框和搜索按钮，也可以弯曲按钮的右侧

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:56:00.663

`border-radius`控制Search 按钮的 css 类是`.form-search .input-append .btn`. 要应用该类，请在具有该类的 div 周围添加一个表单或 div `input-append`。

像这样：

```
<div class="form-search">
 <div class="input-append"> 
  <input type="text" name="q" class="span2 search-query" placeholder="Snipp or Tag"/><button type="submit" class="btn">Search</button> 
 </div>
</div> 
```

这是[文档](http://twitter.github.com/bootstrap/base-css.html#forms)的链接，这是您的[jsFiddle](http://jsfiddle.net/nRK9y/4/)的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:50:01.293

只需添加这个。

```
input.search-query {
    -moz-border-top-right-radius: 0;
    -webkit-border-top-right-radius: 0;
    border-top-right-radius: 0;

    -moz-border-bottom-right-radius: 0;
    -webkit-border-bottom-right-radius: 0;
    border-bottom-right-radius: 0;
} 
```

# c - 通过引用函数传递结构，操作它们并从'main'访问它们的值

> ID：14482061
> 
> 赞同：0
> 
> 时间：2013-01-23T14:28:15.167
> 
> 标签：c, function, reference, struct

我一直在重写我的一些函数以返回 int 而不是结构，这样我就可以做到这一点

```
if ( function(&struct1,vars) != 0 ) 
 { 
  // die and give error 
 } 
```

代替：

> 结构 = 函数（变量）；

然而，我在这里遗漏了一些概念，因为每当我尝试在主结构中访问我的结构的值时，我都没有得到在函数中分配给它的值。如果有人可以向我解释我的记忆/变量到底发生了什么（我会写下我认为会发生什么）以及为什么它不起作用，我将不胜感激。

主要（缩短）：

```
int  main (int argc, char *argv[]) {   
  arguments args;   
  data data;  
  scan scans;   
  printf("Value at start %i\n",scans.number);
  if (scan_extractor(&args,&scans) != 0) // Pass the reference of the struct to scan_extractor (while still being un-initilizaed, something I don't quite grasp).
   {
     printf("Error in argument reader\n");
     exit(0);
   } else { 
     printf("Main thinks %i scans\n",scans.number); 
   } 
  return(0); 
} 
```

功能（scan_extractor）：

```
int
scan_extractor(arguments* args, scan* scans)
{
  FILE* fr;
  int counter = 0;
  fr = fopen(args->scans,"r");
  scans = calloc(MAX,sizeof(scan)); // Allocate memory to store multiple instances of the scan object
  while (fgets(mzML_buffer,MAX_BUFFER,fr) != NULL)
   {
    (scans+counter)->id = atoi(mzML_buffer); // Modify the global version of scans
    counter++;
   }
  scans->number = counter;
  printf("Function read %i scans\n",scans->number);
  return(0);
} 
```

读取的文件包含 1 行包含值 1

我得到的输出是：

```
Value at start 32767
Function read 1 scans
Main thinks 32767 scans 
```

为什么这让我发疯是因为可以使用类似的语法从 main 访问包含输入参数的几乎相同的代码块（仅结构参数的 char* 值与结构扫描的 int 值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:30:38.450

```
scan_extractor(arguments* args, scan* scans)
scans = calloc(MAX,sizeof(scan)); 
```

您正在为正在传递的指针的副本分配内存。为了能够为函数内部的指针分配内存。您需要通过引用传递指针：

```
scan_extractor(arguments* args, scan** scans)
*scans = calloc(MAX,sizeof(scan)); 
```

回头一想。你的程序没有意义。你混合了两个概念。
您在本地存储上分配一个`scan`对象并将其地址传递给函数。在函数内部，您将动态内存分配给指针本地的函数，该指针先前指向传递的对象。这只会泄漏内存，而您的基于堆栈的`scan`对象永远不会被填充

基本上，您只需要传递对象的地址并使用该对象。它已经分配，​​无需在函数内部进行分配。

```
scan scans; 
if (scan_extractor(&args,&scans)

scan_extractor(arguments* args, scan* scans)
scans->number = counter; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:43:27.157

您需要第二级间接才能返回分配的单元。函数 scan_extractor 应该如下所示：

```
int scan_extractor(arguments* args, scan** scans)
{
  FILE* fr;
  int counter = 0;
  fr= fopen(args->scans,"r");
  *scans = calloc(MAX,sizeof(scan));
  while (fgets(mzML_buffer,MAX_BUFFER,fr) != NULL)
   {
    ((*scans)[counter]).id = atoi(mzML_buffer); // Modify the global version of scans
    counter++;
   }
  (*scans)->number = counter;
  printf("Function read %i scans\n",(*scans)->number);
  return(0);
} 
```

看这段代码不知何故告诉我这些行`(*scans)->number = counter;`和`printf("Function read %i scans\n",(*scans)->number);`错误都是错误的，但在不知道扫描结构的情况下我无法判断这一点。我想我可以猜到意图（存储扫描次数）。我建议通过稍微修改的方法来解决这个问题：

```
typedef struct scanlist {
    unsigned int count;
    scan *scans;
}scanlist;

...

int scan_extractor(arguments* args, scanlist* scans)
{
  scans->scans = calloc(MAX,sizeof(scan));
  ...
  while (...) {
    scans->scans[counter].id = ...
  }
  ...
  scans->count = counter; 
```

否则，您会浪费内存，每次扫描都不需要数字字段。

# php - 如何通过ajax从php传回变量

> ID：14482064
> 
> 赞同：6
> 
> 时间：2013-01-23T14:28:31.283
> 
> 标签：php, javascript, jquery, ajax, json

我有来自登录页面的脚本，该脚本通过 ajax 将数据发送到 php，如果成功与否，php 返回，我只是想知道如何更改我的脚本，以便它也发送回 2 个变量并在我的登录 js 脚本中接收它，所以我可以创建cookies？这是我的 js 和 php 脚本：

**js**：

```
$(document).on('pageinit',function(){
        $("#login").click(function(){

            username=$("#usr").val();
            password=$("#psw").val();
            $.ajax({
                type: "POST",
                url: "http://imes.***********.com/php/login_check.php",
                data: "name="+username+"&pwd="+password,
                success: function(html){
                    //in case of success
                    if(html=='true')
                    {
                        $("#login_message").html("Logged in, congratulation.");
                        $.mobile.changePage("http://imes.***********.com/userpanel.php");
                    }
                    //in case of error
                    else
                    {
                        $("#login_message").html("Wrong username or password");
                    }
                },
                beforeSend: function() { $.mobile.showPageLoadingMsg(); }, //Show spinner
                complete: function() { $.mobile.hidePageLoadingMsg() } //Hide spinner
            });
            return false;
        }); 
```

**php**：

```
<?php
session_start();
    $username = $_POST['name'];
    $password = $_POST['pwd'];
    include('mysql_connection.php');
    mysql_select_db("jzperson_imesUsers", $con);

    $res1 = mysql_query(
     "SELECT * FROM temp_login WHERE username='$username' AND password='$password'"
     );

    $num_row = mysql_num_rows($res1);
    if ($num_row == 1) {
        echo 'true';
    }
     else {
        echo 'false';
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:31:43.213

尝试使用 Json 作为响应：

**PHP端**

```
...
$json = new Services_JSON();
echo $json->encode("{a:1,b:2}"); 
```

**JS**

```
...
 success:function(data){
            if(data)
            {
             console.log(data.a);
             console.log(data.b);
             }
  .... 
```

您可以在 PHP 中编码任何数组并将其作为 ajax 回调传递。

Json 类你可以到达[那里](http://php.net/manual/en/json.installation.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:33:49.653

You can use JSON to return values to your JS script. In your PHP code return something like:

```
{
    "result": true,
    "your_variable": "variable_value"
} 
```

You can use [json_encode](http://php.net/manual/en/function.json-encode.php) function. And then in JS parse it with [jQuery.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:33:24.477

您可以使用 JSON 格式的响应将值从 PHP 返回到 JS（查看 json_encode() PHP 函数： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)）。

[或者只是从 PHP ( http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php) )设置 cookie 中的值

# eclipse - 使用 Tomcat 7 降低 Eclipse WTP 中的日志级别

> ID：14482065
> 
> 赞同：8
> 
> 时间：2013-01-23T14:28:36.827
> 
> 标签：eclipse, tomcat, logging, eclipse-wtp

我在 Eclipse WTP (Juno) 中运行 Tomcat 7，但似乎无法调低日志记录级别。它记录来自调试的所有内容，这太冗长而无法使用（我希望它从 INFO 记录）。logging.properties 文件如下：

```
handlers =  java.util.logging.ConsoleHandler

.handlers = java.util.logging.ConsoleHandler

.level=INFO

############################################################
# Handler specific properties.
# Describes specific configuration info for Handlers.  
############################################################

java.util.logging.ConsoleHandler.level = INFO
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-10T08:12:53.073

根据Tom Chatt 引用的[常见问题解答](http://wiki.eclipse.org/WTP_Tomcat_FAQ#How_do_I_enable_the_JULI_logging_in_a_Tomcat_5.5_Server_instance.3F)添加**这两个：**

```
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
-Djava.util.logging.config.file="${workspace_loc}/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/conf/logging.properties" 
```

服务器启动配置的参数将为您提供所需的内容。 `${workspace_loc}`是字面的；Eclipse 会将其替换为您的工作区目录。 `tmp0`可能是`tmp1`或这样的；使用与服务器配置相同的路径。当然，假设您已将`logging.properties`文件放在那里。这样，您将在“服务器”下的“项目资源管理器”窗口中看到该文件。您应该首先从 Tomcat`conf`目录中复制一个。

这一切都假设您打算使用 JULI。

适用于我的 Tomcat 8.0 和 Eclipse Mars。不知道为什么它对汤姆不起作用。`ClassNotFound`出于显而易见的原因，当我从某人的帖子中使用错误的类名时，我确实看到了 s。

我建议不要使用 Tom Chatt 的方法，因为这会影响该 JVM 的所有其他用途。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-07T07:55:29.487

我有同样的问题，想在 Eclipse WTP 中配置 Tomcat 7 的日志记录级别。我尝试将 logging.properties 放在我的网络应用程序的 /src 目录中。没有效果。我尝试修改我的 Tomcat 安装的 /conf 目录中的 logging.properties 文件，但那里也没有效果。我在我的工作区目录下的 .metadata/.plugins/org.eclipse.wst.server.core/tmp0 中发现了 Eclipse WTP 的“影子”Tomcat 区域，并将 logging.properties 文件放在 /conf 目录下。没有效果。

我发现了许多文章（例如，[eclipse.org 上的这个常见问题解答](http://wiki.eclipse.org/WTP_Tomcat_FAQ#How_do_I_enable_the_JULI_logging_in_a_Tomcat_5.5_Server_instance.3F)）指出，虽然“现实生活”中的 Tomcat 会自动使用名为“JULI”的日志管理器运行，但出于某种原因，在 Eclipse WTP 中运行的 Tomcat 不能使用 JULI . 我尝试添加

```
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager 
```

到我的 Tomcat 运行配置中的 VM 参数，但这只是让我出现 ClassNotFound 错误。（是的，我的类路径中确实有 tomcat-juli.jar，所以不知道为什么找不到它。）

最后，我想到尝试修改我的 jdk jre/lib 中的 logging.properties 实例。大奖！事实证明，这确实对 Tomcat-in-Eclipse 完成的日志记录有影响。因此，这个长篇故事的寓意是，如果您只想在 Eclipse 中运行时简单地配置日志记录，请使用如下简单的小语句：

```
myapp.mypackage.level=FINE 
```

然后 $JAVAHOME/lib/logging.properties 是放置它的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T14:05:46.313

为了解决这个问题，我遵循了[http://tomcat.apache.org/tomcat-7.0-doc/logging.html](http://tomcat.apache.org/tomcat-7.0-doc/logging.html)上的 tomcat log4j 指南。这将使 tomcat 使用 log4j。

接下来在 $CATALINA_HOME/lib 中设置 log4j 配置。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

   <appender name="null" class="org.apache.log4j.varia.NullAppender" />

   <appender name="console" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p [%c] %m%n" />
    </layout>
</appender>

<category name="org.package.domain">
    <priority value="INFO" />
    <appender-ref ref="console" />
 </category>

 </log4j:configuration> 
```

# javascript - Chrome 浏览器忽略 var self = this;

> ID：14482067
> 
> 赞同：1
> 
> 时间：2013-01-23T14:28:45.797
> 
> 标签：javascript, google-chrome, this, undefined, self

我正在编写一些 jQuery javascript 代码并在 Google Chrome（Mac OS X 10.7 Lion 上的最新稳定版本 24）中调试问题时发现

```
MyWidget = Widget.extend({
        _item_id : undefined,
        container : undefined,
        initialize : function(config) {
            var self = this;
            self.container = $(config.container_id);
            self._item_id = config.item_id;
            if (typeof(config.changeElement) !== 'undefined') {
                self._changeElement = config.changeElement;
                $(self._changeElement).unbind('change', OtherWidget.has_setting_changed);

                $(self._changeElement).change(function (event) {
                         self.changeSetting($(event.target).val()); // had 'this' here before
                });

                self._load();
            }
        },
        _load : function() {
            var self = this;  // <-- here is what fails
            self.changeState('Loading');
            if (typeof(self._item_id) === 'undefined' || this._item_id === '') {
                self.changeState('Create');
            } else {
                self._loadItem();
            }
        },

        changeSetting : function(item_id) {
                this._item_id = item_id;
                this._load();
                this._reloadOtherWidget();
        },
...
}); 
```

在调试器中显示：“self：undefined”。分配在成员函数内部，如果这有什么不同的话。我最终只是直接使用了“this”，因为它是简单的代码。我知道我正在破坏（'遮蔽'）某种对窗口的内置引用，但我认为它会起作用......我在处理一个已知问题吗？

我看到了这篇相关的帖子，似乎表明它会起作用： [那个，self 还是 me——在 JavaScript 中更喜欢哪一个？](https://stackoverflow.com/questions/2698831/that-self-or-me-which-one-to-prefer-in-javascript)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:53:02.693

在你放的地方

```
 var self = this;  // <-- here is what fails 
```

已经太晚了：你在你调用的函数中。

你可以这样做：

```
MyWidget = Widget.extend((function(){
       var self = {
           _item_id : undefined,
          container : undefined
        };
        self.initialize = function(config) {
            self.container = $(config.container_id);
            self._item_id = config.item_id;
            if (typeof(config.changeElement) !== 'undefined') {
                self._changeElement = config.changeElement;

                self._load();
            }
        };
        self._load = function() {
            self.changeState('Loading');
            if (typeof(self._item_id) === 'undefined' || this._item_id === '') {
                self.changeState('Create');
            } else {
                self._loadItem();
            }
        };
       return self;
})()); 
```

# vba - 如何为 VB 编辑器创建插件？

> ID：14482072
> 
> 赞同：2
> 
> 时间：2013-01-23T14:29:03.233
> 
> 标签：vba, add-in

如何为 VB（不是 VB.NET）编辑器创建 VBA 插件？

我有一段 VBA 代码，我想在 VB 编辑器窗口（菜单 - > 加载项）中将其作为加载项提供，但我不知道如何创建这样的东西，我应该把它放在哪里。

谢谢！

# ruby-on-rails - 嵌套视图“rails way”

> ID：14482075
> 
> 赞同：0
> 
> 时间：2013-01-23T14:29:12.857
> 
> 标签：ruby-on-rails, view, routes, nested

我正在开发一个具有大量静态、深度嵌套页面的 rails 3.2 应用程序。架构如下：

[![菜单结构](../Images/e5f004cdeddaa026dec967cb4a3c743e.png)](https://i.stack.imgur.com/01Oj7.png)

到目前为止，我有`information controller`这四种方法：

*   about_the_liver
*   疗法
*   营养
*   肝病

有以下路线：

```
get "information/therapies"
get "information/nutrition"
get "information/liver_diseases"
get "information/about_the_liver" 
```

**以下是我的问题：**

*   首先，由 rails 生成器生成的这些路线看起来很笨拙。有什么办法可以让它们变干并将它们组合在一起吗？例如，这样“信息/”部分就不会如此频繁地重复？

我想出了这个，但我不确定这是否是最好的方法：

```
[ :therapies, :nutrition, :liver_diseases, :about_the_liver ].each do |method|
  get "information/#{method}"
end 
```

*   我将需要您可以在最右侧菜单中看到的每个菜单条目的视图。我的方法是变成`liver_diseases`一个单独的控制器并拥有 8 个不同的视图——但这不能太干。有没有“铁路方式”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:13:17.597

您不能简单地将静态页面放入`/public`并直接从那里提供它们吗？如果没有 rails 内容，这将是最快和最有效的方法。

# list - 如何遍历所有behat / mink 中的字段选项 我正在测试产品搜索表单。可以通过不同的参数（如状态、材料、重量等）搜索产品。当我想按状态搜索时，我执行以下操作：场景大纲：按状态搜索当我从“search_form_status”中选择“<status>”并按“搜索”并等待 3 秒//已实现时，我遵循随机链接来自测试结果表 // 已实现 然后我应该在“div#status”元素中看到“<status>” 示例：|status | |启用 | |禁用| 一切都很好。但</status></status>

> ID：14482079
> 
> 赞同：3
> 
> 时间：2013-01-23T14:29:29.607
> 
> 标签：list, option, loops, behat, mink

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T16:37:05.477

您需要在包含选择所有选项的代码的方法中编写运行所需各个步骤的 PHP 代码。

例如：

```
$handler = $this->getSession()->getSelectorsHandler();

$optionElements = $this->getSession()->getPage()->findAll('named', array('option', $handler->selectorToXpath('css', 'select ));

foreach ($optionElements as $optionElement) {
    $this->getSession()->getPage()->selectFieldOption('portal', $optionElement->getValue());
    $this->pressButton("show");
    $this->assertPageContainsText(" - Report Report");
} 
```

# sql-server - Oracle FOR XML AUTO

> ID：14482080
> 
> 赞同：3
> 
> 时间：2013-01-23T14:29:31.740
> 
> 标签：sql-server, xml, oracle11g

我最后一次使用 Oracle 是在 8i 刚问世时，所以我几乎忘记了我可能知道的关于 Oracle 的一切，更不用说仍然相关的东西了。这些年来，我一直在使用 MS SQL Server。我想快速将结果集序列化为 XML。我在哪里可以发现是否存在与 SQL Server FOR XML AUTO 等效的 Oracle 11g 构造？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:43:22.120

一个快速的方法是[DBMS_XMLGEN](http://docs.oracle.com/cd/E14072_01/appdev.112/e10577/d_xmlgen.htm)。

```
SQL> select dbms_xmlgen.getxml('select * from emp where rownum <= 2') xmlstr from dual;

XMLSTR
--------------------------------------------------------------------------------
<?xml version="1.0"?>
<ROWSET>
 <ROW>
  <EMPNO>7369</EMPNO>
  <ENAME>SMITH</ENAME>
  <JOB>CLERK</JOB>
  <MGR>7902</MGR>
  <HIREDATE>17-DEC-80</HIREDATE>
  <SAL>800</SAL>
  <DEPTNO>20</DEPTNO>
 </ROW>
 <ROW>
  <EMPNO>7499</EMPNO>
  <ENAME>ALLEN</ENAME>
  <JOB>SALESMAN</JOB>
  <MGR>7698</MGR>
  <HIREDATE>20-FEB-81</HIREDATE>
  <SAL>1600</SAL>
  <COMM>300</COMM>
  <DEPTNO>30</DEPTNO>
 </ROW>
</ROWSET> 
```

# java - 在一个类中覆盖许多类的许多方法

> ID：14482083
> 
> 赞同：3
> 
> 时间：2013-01-23T14:29:37.763
> 
> 标签：java, swing, events, actionlistener, keylistener

```
public class EventController extends MouseAdapter implements ActionListener {

    private EventModel model;
    private EventView  view;
    String tableClick;
    Events events;    

    /** Constructor */
   public EventController(EventModel myModel, EventView myView){
       model = myModel;
       view = myView;     
   }

   public void setUpListeners() {
       this.view.addEventButton.addActionListener(this); 
       this.view.addEventMenuItem.addActionListener(this);
       this.view.editEventMenuItem.addActionListener(this);
       this.view.tableEvent.addMouseListener(this);                
   }

   @Override
   public void actionPerformed(ActionEvent e){
       Object button = e.getSource();
       if(button==this.view.addEventButton) {
           setEventDetails();          
       }                
   }

   @Override
   public void mouseClicked(java.awt.event.MouseEvent event) {
      int rowSelected = view.tableEvent.getSelectedRow();
       //blahblahblah
      view.changeDisplay(events);
    } 
```

我如何重写`keyPressed`KeyListener 类的方法，就像我对 所做的那样`mouseClicked`，`ActionPerformed`我真的不想重写`keyTyped`and `keyReleased`，只是`keyPressed`自己。交互发生在另一个名为 VIEW 的类中

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T14:34:24.563

您不能，因为您仅限于 Java 中的单继承。所以你必须实现 KeyListener，并为这两种方法提供一个实现（什么都不做）。

更好的设计是分离职责，并为鼠标事件创建一个类，另一个用于操作事件，第三个用于按键事件。这些类可以实现为匿名内部类。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T14:39:57.513

Java不支持多重继承，所以你不能扩展多个类，你不能有类似的东西：

```
class EventController extends MouseAdapter, KeyAdapter 
```

但是，您可以实现多个接口，但似乎您想避免这种情况。

现在，这类问题的解决方案总是一样的，使用组合而不是继承。你可以很容易地拥有两个内部类：一个是扩展`KeyAdapter`的，另一个是`MouseAdapter`. 然后稍后，当您需要添加侦听器时，您使用类的字段而不是`this`.

像这样的东西：

```
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.MouseAdapter;

public class EventController {
    private EventModel model;
    private EventView  view;
    String tableClick;
    Events events;

    private MouseAdapter mouseListener = new MouseAdapter() {

        @Override
        public void mouseClicked(java.awt.event.MouseEvent event) {
          int rowSelected = view.tableEvent.getSelectedRow();
           //blahblahblah
          view.changeDisplay(events);
        }
    };

    private KeyAdapter keyAdapter = new KeyAdapter() {
        public void keyTyped(java.awt.event.KeyEvent e) {
            // Perform here whatever is needed
            // You also have access to your enclosing instance EventController.this and its methods
        }
    };

    private ActionListener actionListener = new ActionListener() {@Override
               public void actionPerformed(ActionEvent e){
           Object button = e.getSource();
           if(button==this.view.addEventButton) {
               setEventDetails();          
           }

       }

    /** Constructor */
   public EventController(EventModel myModel, EventView myView){
       model = myModel;
       view = myView;     
    }

   public void setUpListeners() {
       this.view.addEventButton.addActionListener(actionListener); 
       this.view.addEventMenuItem.addActionListener(actionListener);
       this.view.editEventMenuItem.addActionListener(actionListener);
       this.view.tableEvent.addMouseListener(mouseListener);
       // Here you can also add the keyadapter to your views
   }

 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T14:34:58.393

Swing 提供了[Adapter 类](https://blogs.oracle.com/CoreJavaTechTips/entry/listeners_vs_adapters)来帮助覆盖方法，而无需在 Listener 类中完成所有这些方法。

如果只需要实现 KeyListener 的部分方法，则应使用[KeyAdapter](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyAdapter.html)类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T14:35:36.077

你不能这样做。

一个类只能从另一个类**扩展**（Java 中禁止多重继承）。

一个类可以**实现**多个接口，但由于接口没有提供方法的实现，因此您必须提供它（或声明类`abstract`，甚至是`interface`它本身）。

既然你已经扩展了`MouseAdapter`，你必须实现`ActionListener`me

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-23T14:44:18.703

与其直接在 EventController 中提供侦听器，不如在内部类中进行。例如，一个内部类可以扩展 MouseAdapter，并调用 EventController 方法来完成实际工作。不同的内部类可以扩展 KeyAdapter，并调用其他 EventController 方法。

将内部类的实例附加为侦听器，而不是 EventController 本身。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T14:59:46.350

搜索 Composite 和 Facade 模式，以重用代码。

```
class SilverBullet implements Interface1, Interface2 {
   Concrete1 c1;
   Concrete2 c2;

   void someMethod() {
       c1.someMethod();
   } 

} 
```

# android - Robolectric & 测试 startActivityForResult

> ID：14482086
> 
> 赞同：3
> 
> 时间：2013-01-23T14:29:53.737
> 
> 标签：android, testing, android-intent, assert, robolectric

我的 Robolectric 单元测试有问题。

当侦听器使用该方法时，我可以毫无问题地断言单击启动了新活动`startActivity( Intent )`

但是，当使用该方法启动一个新活动时，Robolectric 似乎遇到了麻烦`startActivityForResult(Intent, int)`：在代码中放置一些中断让我发现该活动没有启动（并且只是更改方法`startActivity( Intent )`使断言通过）。

这正常吗？很遗憾，因为我的应用程序的第一个活动使用`startActivityForResult(Intent, int)`.

有人设法用这种启动活动的方式进行测试吗？

谢谢你的帮助 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T21:24:54.943

对您的问题的简短回答是，由于 Robolectric 将 Android 类转换为在 JVM 中执行的代码的方式，它们的许多功能并没有像您预期的那样运行。许多系统回调不会执行，您将不得不依赖 Robolectric 在其 Shadow 类实现中提供的功能。（请参阅@Steven_BDawg 提供的链接）。

长答案：也许可以在一个大型测试中实现整个流程，但这不是框架的设计目的。

一般而言，Robolectric 和单元测试并不意味着以您描述的方式使用。 [维基百科上的单元测试页面](http://en.wikipedia.org/wiki/Unit_testing)指出，*可以将单元视为应用程序中最小的可测试部分*。一个单元测试套件应该包含许多轻量级测试，其中每个测试都会隔离应用程序中的一些功能并确保其正常工作。

考虑一个包含两个活动 A 和 B 的基本应用程序。活动 A 显示有关主题的一些信息，活动 B 允许用户选择要在 A 中显示的主题。当用户从活动 A 移动到活动 B 时，B 得到调用`startActivityForResult()`并应返回 A 与所选主题。

现在假设我们要对 A 从 B 获取结果并显示数据的流程进行单元测试。我们可以将其分解为两个测试：

1.  Activity Under Test - Activity A。在我们的测试中，我们将创建一个 Activity A 的新实例。在 Robolectric 测试中，我们创建我们期望 B 返回到 A 的 Intent，并`receiveResult()`为 A 调用 shadow 方法，填写结果代码为 OK 和此 Intent 的参数。之后`receiveResult()`，运行您的断言。您现在知道 Activity A 正确处理了结果！
2.  Activity Under Test - Activity B。在我们的测试中，我们将创建一个 Activity B 的新实例，将其设置为好像它是为 Activity A 的结果启动的一样。在 Robolectric 测试中，我们将执行选择所需的所有操作数据，创建我们将发回的意图，然后对意图运行断言以确保它被正确创建。

这是一个非常简单的例子。这两个步骤可能会分解成更多的测试，因为每个单元测试应该只测试你的应用程序可以分解的最小功能单元。该示例主要是帮助您以单元测试的方式开始思考。我发现随着我对单元测试理解的加深，我编写代码的方式也发生了变化。我尽量避免以这样的方式编写方法和类，因为它们做了太多工作并且无法正确进行单元测试。根据经验，易于单元测试的代码会执行非常具体的操作，这在第一次阅读代码时很明显。

最后，如果您想更进一步，*模拟框架*可以极大地帮助您进行单元测试。 [Mockito](http://code.google.com/p/mockito/)是我过去成功使用的一个模拟框架。模拟框架的目的是创建您严格控制其行为的存根对象。Mockito（或任何其他 Mocking 框架）将允许您定义一个从您需要的任何类型扩展的对象，并且只实现您需要的方法。您将能够直接控制对任何这些方法调用的响应。这有助于单元测试，因为唯一*真正的*您需要的对象是被测对象；通过模拟所有其他对象，您将更好地了解被测对象是否行为正常，因为所有其他行为都是由您（测试人员）明确定义的。（是的，这确实会导致大量额外的代码，但这就是优秀单元测试人员的生活。但是，如前所述，随着您对单元测试越来越熟悉，您可能会发现自己编写的方法需要更少的模拟和更有利于编写测试。一些程序员甚至会在编写代码之前编写单元测试，以保持代码紧凑并专注于单一目的）

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:07:35.400

我为你做了一些谷歌搜索。我不知道这是否一定会帮助你，但我认为这是一个好的开始！ [Roboelectric：测试 startActivityForResult() 和 onActivityResult()](http://robolectric.blogspot.com/2010/12/testing-startactivityforresult-and.html)

# blackberry-10 - 如何在不同 qml 文件中定义的 TabbedPane 中附加页面或导航窗格？

> ID：14482089
> 
> 赞同：2
> 
> 时间：2013-01-23T14:30:05.640
> 
> 标签：blackberry-10, blackberry-cascades

我已经定义了一个 TabbedPane 如下，但每个选项卡一个，我想显示内容“questions.qml”（这是一个导航窗格“）和“stats.qml”文件，而不是将代码嵌入单个文件中。所以我想知道我怎么能做到这一点？

```
TabbedPane {
    showTabsOnActionBar: true
    Tab {
        id: questions
        title: "Questions"
        description: "This tab will have questions in current hub"
    }
    Tab {
        id: stats
        title: "Stats"
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:39:30.543

在这种情况下，我所做的是在 QML 文件中声明每个选项卡以设置 TabbedPane，就像您所做的那样：

```
import "UI" // The file DataManagement.qml is located in the directory UI
            // which is a sub-directory of the location of this QML file.
...
Tab {
    title: qsTr("Data Management")
    imageSource: "asset:///images/icons/database.png"
    id: dataManagement
    DataManagement {
        id: dataManagementPage
    }
}
... 
```

然后在一个单独的 QML 文件中，在本例中为 DataManagement.qml，我声明了选项卡的内容：

```
import bb.cascades 1.0

Page {
    // content of page to render in the tab.
    content: Container {
         ...
    }
} 
```

只要 QML 文件位于**同一目录**中，或者引用文件 (DataManagement.qml) 位于第一个 QML 文件中包含的目录中，它就可以工作。

# android - 警报对话框背景颜色

> ID：14482092
> 
> 赞同：7
> 
> 时间：2013-01-23T14:30:14.590
> 
> 标签：android, android-alertdialog

我正在使用带有自定义布局的 AlertDialog。布局中 TextView 的颜色是黑色的，所以在 Android 4.0 上用 Holo.Light 打开对话框时，文本是可见的。但是，如果您在 Android 2.2 中打开该对话框，由于背景为灰色，文本将不可见。有没有办法改变背景颜色？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-27T11:07:14.807

> 但是，如果您在 Android 2.2 中打开该对话框，由于背景为灰色，文本将不可见。有没有办法改变背景颜色？

是的，这是可能的，我使用 DialogBu​​ilder 在我的应用程序中使用了它。只需将 inverseBackgroundForced 设置为 true

```
builder.setInverseBackgroundForced(true);
AlertDialog dialog = builder.create();
dialog.show(); 
```

在您的对话生成器上。它将在 Froyo 之前的 android 版本上强制背景为白色（而不是深灰色）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:57:33.607

只需在您的对话框的 layout.xml 文件中将根视图的背景定义为您想要的颜色。

像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/dialog_background" >
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-02T11:34:23.243

非常感谢 StinePike 和 Artjom B。

StinePike 的想法非常好。

我在具有自定义背景的 AlertDialog 中放置了一个 TextView。

我展示了如何使用纯色和渐变背景来自定义对象。

请让我向您介绍一下我应用 StinePike 的想法的背景。

// 位置：MainActivity.java

```
AlertDialog mAlertDialog_With_Radio_Buttons;    
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
ini(); 
```

}

```
public void onAlert_With_Radio_Buttons_Close_Click(View view) {

mAlertDialog_With_Radio_Buttons.dismiss();

} // onAlert_With_Radio_Buttons_Close_Click

public void alert_with_radio_buttons(){

AlertDialog.Builder
mAlertDialog_Builder = new AlertDialog.Builder(this);

mAlertDialog_Builder
.setView(getLayoutInflater()
.inflate(R.layout.alert_with_radio_buttons, null));
mAlertDialog_Builder
.setTitle("Select The Directory");

mAlertDialog_With_Radio_Buttons = mAlertDialog_Builder.create();
mAlertDialog_With_Radio_Buttons.show();

} //  public void alert_with_radio_buttons(){

// location: alert_with_radio_buttons.xml in layout

<LinearLayout

android:id="@+id/alert_with_radio_buttons_tv_ll"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@color/turquoise1"
android:layout_alignParentTop="true"
android:layout_centerHorizontal="true">

<TextView

android:id="@+id/mAlert_With_Radio_Buttons_TextView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:inputType="textMultiLine"
android:background="@color/turquoise2"
android:textSize="@dimen/main_wiz_size"
android:text = "@string/alert_with_rb_tv_text" />

</LinearLayout>

// Location: colors in values

<color name="turquoise1">#FF00ABAB</color>
<color name="turquoise2">#FF00BCBC</color>

// Location: strings in values
<string name="alert_with_rb_tv_text">Directory Names</string>

// Close Definition
// location: alert_with_radio_buttons.xml in layout

<Button

android:id="@+id/alert_with_radio_buttons_close_btn"
android:text="@string/alert_with_radio_buttons_close"

android:layout_width="wrap_content"
android:layout_height="wrap_content"

android:background="@drawable/btn_decor"
android:onClick="onAlert_With_Radio_Buttons_Close_Click" />

// location: btn_decor.xml in drawable

<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:dither="true">
<gradient
android:startColor="#700000ff"
android:endColor="#70009B80"
android:angle="-90"/>

</shape>

location: strings.xml in values
<string name="alert_with_radio_buttons_close">Close</string> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-05T17:42:04.477

“有没有办法改变背景颜色？” 是的，有几种方法适用于不同的上下文。

请让我向您“提供详细信息并分享我的研究”。我的代码显示了如何为警报对话框中包含的 ListView 项目获取自定义的 TextView 背景。

让我们从 ListView 项目的模型开始
// location:customized_tv_for_list_view.xml from layout

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="fill_parent"
android:layout_height="fill_parent"

android:background="@drawable/layer_border">

<TextView
android:id="@+id/text_view_for_lv"

android:layout_width="fill_parent"
android:layout_height="wrap_content"

android:layout_gravity ="center"

android:padding ="5dip"
android:background="@color/turquoise2"

android:textSize="@dimen/lv_text_size"

android:textColor="@color/blue0"/>

</LinearLayout>

// location: main_activity.xml in layout
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/decor"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/main_activity_files_btn_ll"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/layer_border" >

<Button
    android:text="Files"
    android:id="@+id/files_btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/btn_decor"
    android:onClick="onMainActivity_Files_Click" />

</LinearLayout>

</LinearLayout>

// location: colors.xml in values
<color name="blue0">#0000FF</color>
<color name="turquoise2">#FF00BCBC</color>

// location: dimens.xml in values
<dimen name="lv_text_size">24dp</dimen>

// location: layer_border.xml in drawable
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<stroke  android:width="1dp" android:color="#9999FF" />
<solid   android:color="#CCCCFF" />
<padding android:left ="4dp" android:top="4dp"
android:right="4dp" android:bottom="4dp" />
<corners android:radius="4dp" />
</shape>

// location: decor.xml in drawable
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:dither="true">
<gradient
android:startColor="#aa0000ff"
android:endColor="#aa009B80"
android:angle="-90"/>
</shape>

// location: MainActivity.java
ListView mListView;
AlertDialog mAlertDialog;
ArrayAdapter<String> mArrayAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

mListView = new ListView(this);
ArrayList<String>
mArrayList_Days = new ArrayList<>();

for(int i = 0; i< 32; i++)
mArrayList_Days.add("Day " + String.valueOf(i));

mArrayAdapter = new ArrayAdapter<>(
this, R.layout.customized_tv_for_list_view,
R.id.text_view_for_lv, mArrayList_Days);

mListView.setAdapter(mArrayAdapter);        
mListView
.setOnItemClickListener(new AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view,
int position, long id) {
String sel_item = (String) mListView
.getItemAtPosition(position);

Toast.makeText(MainActivity.this, sel_item, Toast.LENGTH_SHORT).show();
mAlertDialog.cancel();
} //  onItemClick
}); // .setOnItemClickListener

build_files_alert_dialog();
}

public void build_files_alert_dialog() {
AlertDialog.Builder
mAlertBuilder = new AlertDialog.Builder(MainActivity.this);

mAlertBuilder.setTitle("Days");
mAlertBuilder.setView(mListView);
mAlertDialog = mAlertBuilder.create();

WindowManager.LayoutParams mLayoutParams = new WindowManager.LayoutParams();
mLayoutParams.copyFrom(mAlertDialog.getWindow().getAttributes());
}

public void onMainActivity_Files_Click(View view) {
mAlertDialog.show();
} // onMainActivity_Files_Click 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T14:54:15.923

```
AlertDialog.Builder.setView(getLayoutInflater().inflate(R.layout.your_layout, null)); 
```

通过使用此功能，您可以为对话添加布局。现在在布局 xml 中做任何你想做的事情。例如看下面的代码。

```
AlertDialog.Builder about = new AlertDialog.Builder(this);    
about.setTitle(getString(name));
about.setIcon(R.drawable.icon);
about.setView(getLayoutInflater().inflate(R.layout.your_layout, null)); 
```

# extjs - 如何在 ext js4 中将关联数据发送到服务器端？

> ID：14482099
> 
> 赞同：2
> 
> 时间：2013-01-23T14:30:39.663
> 
> 标签：extjs, proxy, extjs4

我是 extjs4 的新手。我正在使用 MVC 结构。我将关联数据保存到服务器端。我在这一点上被卡住了。我有两张桌子 1)

```
Question
========
qid
question

2)
Option
========
oid
option
qid 
```

我将显示问题答案页面。页面上一次显示 10 个问题，每个问题有 4 个选项。

我知道如何将模型的单个实例保存到数据库中。

```
var check = Ext.ModelManager.create(
        {
            question:que,

        }, 'Bal.model.sn.QuestionModel');
check.save(); 
```

我用那里的选项得到了所有选定的问题。但我不知道如何将关联数据保存到数据库。以及如何创建特定模型的实例以用数据实例化模型。这是我的另一个模型'Bal.model.sn。选项模型'

我该如何解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:01:25.833

此功能不是开箱即用的。请查看此线程以了解类似功能的一些实现：[http ://www.sencha.com/forum/showthread.php?141957-Saving-objects-that-are-linked-hasMany-relation-with-a-单店/page4](http://www.sencha.com/forum/showthread.php?141957-Saving-objects-that-are-linked-hasMany-relation-with-a-single-Store/page4)

# linux - awk 向文本添加颜色代码

> ID：14482101
> 
> 赞同：13
> 
> 时间：2013-01-23T14:30:45.737
> 
> 标签：linux, bash, shell, awk

```
awk -F: '{ printf  "%-3s %-2s","\n" $1 $2; }' 
```

如何添加颜色代码？'\e[1;32m'

我尝试添加到 printf，它给了我字符串的输出而不是颜色代码..

```
'\e[1;32m' ....... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-04T09:11:04.583

`\033[?m`正确引用给出颜色：

```
awk 'BEGIN{ print "\033[34msomething in colour\033[0m";}' 
```

请注意人们需要如何`$1`在下面进行转义：

```
echo something | awk '{ print "\033[34m"$1" in colour \033[0m";}' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-23T14:38:13.983

`awk`不将 '\e' 识别为转义字符的代码。这是一种解决方法（可能存在更优雅的方法）：

```
# Decimal 27 is the ASCII codepoint for the escape character
awk '{ printf "%c[1;32m foo\n", 27 }' <<<foo 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-12-18T17:22:06.210

试试这个例子：

```
echo "line 1
line 2" | awk '/line/ {print "\033[32m" $1 "\033[31m" $2 }' 
```

[![在此处输入图像描述](../Images/ccee79676bd9725bf135f445b3d34bb0.png)](https://i.stack.imgur.com/jUW7Z.png)

颜色由下式给出`"\033[32m"`

对于颜色：

```
30 - black   34 - blue          
   31 - red     35 - magenta       
   32 - green   36 - cyan          
   33 - yellow  37 - white 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-28T10:55:40.833

希望这可以帮助任何寻找答案的人！

如您所见，函数和各种初始化使得编写如下非常简单的打印行成为可能。

```
print colour("Red")$1colour("Blue")$0colour("None"); 
```

对于`colour`函数，您可以传入颜色的整数值或名称。它采用以下格式的参数。

```
colour( <attribute> , <background-colour> , <foreground-colour> )
colour( <background-colour> , <foreground-colour> )
colour( <foreground-colour> ) 
```

您可以有选择地提供所需的参数。

```
function isnumeric(x)
{
    return ( x == x+0 );
}

function name_to_number(name, predefined)
{
    if (isnumeric(name))
        return name;

    if (name in predefined)
        return predefined[name];

    return name;
}

function colour(v1, v2, v3)
{
    if (v3 == "" && v2 == "" && v1 == "")
        return;

    if (v3 == "" && v2 == "")
        return sprintf("%c[%dm", 27, name_to_number(v1, fgcolours));
    else if (v3 == "")
        return sprintf("%c[%d;%dm", 27, name_to_number(v1, bgcolours), name_to_number(v2, fgcolours));
    else
        return sprintf("%c[%d;%d;%dm", 27, name_to_number(v1, attributes), name_to_number(v2, bgcolours), name_to_number(v3, fgcolours));
}

BEGIN {
    # hack to use attributes for just "None"
    fgcolours["None"] = 0;

    fgcolours["Black"] = 30;
    fgcolours["Red"] = 31;
    fgcolours["Green"] = 32;
    fgcolours["Yellow"] = 33;
    fgcolours["Blue"] = 34;
    fgcolours["Magenta"] = 35;
    fgcolours["Cyan"] = 36;
    fgcolours["White"] = 37;

    bgcolours["Black"] = 40;
    bgcolours["Red"] = 41;
    bgcolours["Green"] = 42;
    bgcolours["Yellow"] = 43;
    bgcolours["Blue"] = 44;
    bgcolours["Magenta"] = 45;
    bgcolours["Cyan"] = 46;
    bgcolours["White"] = 47;

    attributes["None"] = 0;
    attributes["Bold"] = 1;
    attributes["Underscore"] = 4;
    attributes["Blink"] = 5;
    attributes["ReverseVideo"] = 7;
    attributes["Concealed"] = 8;
}

{
    print colour("Red")$1colour("Blue")$0colour("None");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T14:46:28.890

```
 awk 'BEGIN{print "^[[1;33mYELLOW"}' 
```

将以黄色（彩色）打印字符串 YELLOW

**注意** 首先`^[`你必须输入`ctrl-v`然后`ESC`

我会添加一个屏幕截图来显示。

![在此处输入图像描述](../Images/628f0f1ad1aaacffd72889cdacc08cda.png)

上面的截图显示它在 zsh 和 bash 下工作。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-05-03T04:22:10.660

```
BDF()
{
#awk 'BEGIN{ print "\033[34msomething in colour\033[0m";}'
#bdf $spool $data $sysout ~ /home/fnsonlh  |grep -v avail| awk '{print $5" "$4"        "}' | tail -n +2 |tr -d "\012"
bdf $spool $data $sysout ~ /home/fnsonlh  |grep -v avail| awk '{if($4 > 89)
 {
   print "\033[0;31m"$5" "$4"\033[0m      "
  }
 else
 {
  print "\033[0;32m"$5" "$4"\033[0m      "
 }}' |tail -n +2 |tr -d "\012"
#"\012 is new line caracter"
echo
#/usr/bin/w -u
uptime
}
#nishant.chawre@gmail.com 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2019-01-09T13:20:36.763

定义两个变量或您需要的变量

例子：

```
GREENB='\033[0;41m'    #Green Background (Color verde de fondo)
GREEN='\033[0;32m'     #Green Text (Color verde en el texto
REDB='\033[0;41m'      #Red Background (Color rojo de fondo)
RED='\033[0;31m'       #Red text (Color rojo en el texto)
NORMALB='\033[0;49m'   #Default background (Color por defecto de fondo)
NORMAL='\033[0m'       #Default foreground (Color por defecto del texto) 
```

awk 代码： `echo "This is a test" | awk -vRojo=${RED} -v NC=${NORMAL} '{print Rojo $1, $2, NC $3, $4}'`

* * *

### 颜色代码说明

**`\e[${ATTRIBUTE};${BACKGROUND_COLOR};${FOREGROUND_COLOR}m`**

在哪里：

*   **`\e`**:`<Esc>`字符（可以是`\e`, `\033`, `\x1B`）
*   **`${ATTRIBUTE}`**：定义文本的**样式**（*Normal*、*Bold/Bright*、*Dim*、*Underlined*、*Blink*、*Reverse*、*Hidden*）。0 是正常的；
*   **`${BACKGROUND_COLOR}`**：定义**背景**颜色；
*   **`${FOREGROUND_COLOR}`**：定义**前景色**；

* * *

### 更多信息

更多关于 Bash 颜色的颜色和信息在 [这里](https://misc.flogisoft.com/bash/tip_colors_and_formatting)

# php - 在 Laravel 4 中将数据传递给闭包

> ID：14482102
> 
> 赞同：114
> 
> 时间：2013-01-23T14:30:45.760
> 
> 标签：php, laravel, laravel-4

我正在尝试使用 Laravel 4 中的邮件类，但我无法将变量传递给 $m 对象。

$team 对象包含我用雄辩的方式从数据库中获取的数据。

```
Mail::send('emails.report', $data, function($m)
{
   $m->to($team->senior->email, $team->senior->first_name . ' '. $team->senior->last_name );
   $m->cc($team->junior->email, $team->junior->first_name . ' '. $team->junior->last_name );
   $m->subject('Monthly Report');
   $m->from('info@website.com', 'Sender');
}); 
```

出于某种原因，我收到 $team 对象不可用的错误。我想这与范围有关。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2013-01-23T16:59:57.797

如果您`$team`在函数外部实例化变量，则它不在函数范围内。使用[use](https://secure.php.net/manual/en/language.namespaces.importing.php)关键字。

```
$team = Team::find($id);
Mail::send('emails.report', $data, function($m) use ($team)
{
   $m->to($team->senior->email, $team->senior->first_name . ' '. $team->senior->last_name );
   $m->cc($team->junior->email, $team->junior->first_name . ' '. $team->junior->last_name );
   $m->subject('Monthly Report');
   $m->from('info@website.com', 'Sender');
}); 
```

*注意：正在使用的函数是[PHP 闭包（匿名函数）](http://php.net/manual/en/class.closure.php)，它不是 Laravel 独有的。*

# python - Python 对象名称和交互式解释器

> ID：14482104
> 
> 赞同：0
> 
> 时间：2013-01-23T14:30:51.053
> 
> 标签：python, interpreter, interactive

当我定义一个类并创建它的实例时，在 shell 中输入实例名称会返回一个内存位置。这并不奇怪，但是有没有人知道如何定义一个类，使得将其名称输入到 shell 中实际上会返回除内存位置之外的其他内容？

例子：

```
>> import numpy as np
>> foo = np.array([1,2,3])
>> foo
>> array([1, 2, 3]) 
```

如果我能得到这样的东西就好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:34:45.680

这就是该[`__repr__`](http://docs.python.org/2/reference/datamodel.html#object.__repr__)方法的用途：

```
>>> class point(object):
...     def __init__(self, x, y):
...         self.x = x
...         self.y = y
...         
...     def __repr__(self):
...         return "point(%d, %d)" % (self.x, self.y)
>>> x = point(3, 4)
>>> x
point(3, 4) 
```

在没有自定义`__repr__`实现的情况下，您将确切地看到您在问题中描述的内容：

```
>>> class defaultPoint(object):
...     def __init__(self, x, y):
...         self.x = x
...         self.y = y  
... 
>>> p = defaultPoint(0, 3)
>>> p
<__main__.defaultPoint object at 0x16767b0> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:34:46.927

您需要`__repr__`在类上定义一个方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:41:44.057

默认情况下，我们有 python 类的魔法方法，其中两个魔法方法将帮助我们做这件事，它们是

```
__str__
__repr__ 
```

我你使用**repr**你可以实现你想要的。如果您使用**str**它将返回您在使用 print 语句时在该方法中返回的内容

请注意，您应该从这些方法返回您想要显示的内容

# jquery - 在 IE 中查找表的 colspan 的最佳 jquery css 选择器

> ID：14482106
> 
> 赞同：-1
> 
> 时间：2013-01-23T14:30:58.357
> 
> 标签：jquery, css

我正在尝试在 IE 中查找表格单元格的 colspan，但仅限于 colspan 不是 1 的地方。这是我正在使用的选择器，但必须有更好的方法。我怎样才能做到这一点？

```
if (isIE) {
   selector = "> tbody > tr > td[colspan*='0'],> tbody > tr > td[colspan*='11'],> tbody > tr > td    [colspan*='2'],> tbody > tr > td[colspan*='3'],> tbody > tr > td[colspan*='4'],> tbody > tr >     td[colspan*='5'],> tbody > tr > td[colspan*='6'],> tbody > tr > td[colspan*='7'],> tbody > tr     > td[colspan*='8'],> tbody > tr > td[colspan*='9']"
   isSpanned = $(tbl).find(selector).length > 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:35:03.360

```
 [attributename*="val"] 
```

此选择器表示具有“attributename”属性的元素，其值至少包含子字符串“val”的一个实例。[维基](http://www.w3.org/wiki/CSS/Selectors/attribute_selector/attribute%2a%3Dvalue)

查看您的代码，我看到您正在寻找 if `<td>`has attribute `colspan`，所以这样做：

```
selector = "table tr td[colspan]" 
```

`table`没有`colspan`属性，只有`th`和`td`

**编辑**

看看这个[链接](http://forum.jquery.com/topic/jquery-ie7-setting-colspan-as-attribute)，也许这会解决你的问题。

示例如何执行：

```
 $("table tr td").each(function(i) { 
    isSpanned = this.colSpan > 1 ?true:false;
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:43:38.847

听起来您正在寻找`colspan`设置为除 1 之外的任何值的表格单元格。所以您真正需要的是jQuery中的[属性不相等选择器：](http://api.jquery.com/attribute-not-equal-selector/)

```
selector = '> tbody > tr > td[colspan!="1"]' 
```

如果您希望它在非 IE 浏览器中工作，并非每个浏览器`td`都有`colspan`，您可以使用它`td[colspan][colspan!="1"]`来强制存在`colspan`属性。

在 jsFiddle 上测试：http: [//jsfiddle.net/jmorgan123/69qw9/](http://jsfiddle.net/jmorgan123/69qw9/)

# ios - 核心情节：对齐两个 y 轴以具有相同的零点

> ID：14482111
> 
> 赞同：0
> 
> 时间：2013-01-23T14:31:02.913
> 
> 标签：ios, objective-c, cocoa-touch, core-plot

我的 Core Plot 项目中有第二个`y`轴 ( `y2`)，我已按照以下代码中的说明进行设置。

如何让两个`y`轴具有相同的零点？目前，每个轴的零点在不同的高度（在下面的屏幕截图中，`y`-轴的零点等于`y2`8.8% 的值）。如何让 Core Plot 在两个轴的相同高度绘制零点？

我的代码：

```
CPTXYAxis *y = axisSet.yAxis;
y.coordinate = CPTCoordinateY;
y.orthogonalCoordinateDecimal = CPTDecimalFromDouble(xAxisStart);
y.axisLineStyle = axisLineStyle;
y.majorIntervalLength = CPTDecimalFromInt(1);
y.majorTickLength = 5;
y.minorTickLength = 0;
y.majorGridLineStyle = axisLineStyle;

CPTXYPlotSpace *relativePlotSpace = [[CPTXYPlotSpace alloc] init];
[graph addPlotSpace:relativePlotSpace];

CPTXYAxis *y2 = [[CPTXYAxis alloc] init];
y2.axisLineStyle                = axisLineStyle;
y2.coordinate                   = CPTCoordinateY;
y2.orthogonalCoordinateDecimal  = CPTDecimalFromDouble(xAxisLength);
y2.plotSpace                    = relativePlotSpace;
y2.separateLayers               = NO;
y2.majorTickLineStyle           = axisLineStyle;
y2.minorTicksPerInterval        = 1;
y2.preferredNumberOfMajorTicks  = 8;
y2.labelingPolicy               = CPTAxisLabelingPolicyEqualDivisions;
graph.axisSet.axes = [NSArray arrayWithObjects:x, y, y2, nil]; 
```

![在此处输入图像描述](../Images/b0207ed2cc495320e930594245665d65.png)

# 编辑

根据下面 Eric 的回答，我添加了以下代码片段来计算 y2 轴的范围，该范围应将其零点与 y 轴的零点对齐：

```
double yAxisAbsoluteLength = 
   ABS(plotSpace.yRange.lengthDouble);
double y2AxisAbsoluteLength = 
   (ABS(relativePlotSpace.yRange.lengthDouble) +
   ABS(relativePlotSpace.yRange.locationDouble));
double yAxisZeroPointToLengthRatio = 
   plotSpace.yRange.locationDouble / 
   yAxisAbsoluteLength;
double y2AxisLocation = yAxisZeroPointToLengthRatio
    *y2AxisAbsoluteLength;
relativePlotSpace.yRange = [CPTPlotRange
   plotRangeWithLocation:CPTDecimalFromDouble(y2AxisLocation)
   length:CPTDecimalFromDouble(y2AxisAbsoluteLength)]; 
```

`y`如果-values 是，这似乎工作正常`> 0`。但是，对于`y`-values `< 0`，`y2`位置也被拖动到零点以下，这导致计算`y2AxisAbsoluteLength`值不再足以补偿`y2`位置拖动到零点以下的问题（`y2`具有高值的点是截断或未在图表中绘制）。`y2`我的解决方案是简单地将位置的绝对值添加到`y2AxisAbsoluteLength`值中，但这会扭曲两个零点（`y`和`y2`）的对齐方式。

我需要如何更改我的计算以正确解释正值和负值`y`？在这种情况下，我不能使用`expandRangeByFactor`，因为在编码时乘法因子是未知的。

![在此处输入图像描述](../Images/cef73840a84ace21e17eaa91e31f2f86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:49:06.197

两个轴都拉伸绘图区域的整个高度，因此您可以计算一些比率来确定第二个轴的范围。

**例子：**

绘图范围 1：位置 -100，长度 400

这意味着零点位于距离范围位置长度的 25% (100/400) 处。如果第二个绘图范围的长度为 20，您将给它一个位置 -5，将 25% 的长度放在零点以下。

# jquery - 两个 $(document).ready 事件，两者之间包含 jQuery 库，只有第二个执行

> ID：14482119
> 
> 赞同：0
> 
> 时间：2013-01-23T14:31:10.823
> 
> 标签：jquery, document-ready

我有以下结构（简化）：

```
// In <head>
$(document).ready(function(){
  // first event
});

// Near the end of <body>
// jQuery library is included at this point
$(document).ready(function(){
  // second event
}); 
```

浏览器给我一个错误，即`$`在第一个事件期间未定义对象。我试过用 jQuery 词替换它，但是它说 jQuery 没有定义。

我意识到第一个事件是在加载 jQuery 库之前调用的，但我认为这是关键点`document.ready`——只要它与 jQuery 库位于同一页面上，就可以从任何地方调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:33:17.273

要点`$(document).ready(`是等待 DOM 准备好，这样就可以查询 DOM 元素了。它需要 jQuery，因此如果您没有加载第一行，则无法解释第一行。

如果您真的希望您的第一个代码在 jQuery 导入之前，您可能会做的是：

```
window.addEventListener('load', function(){
     // here you can use jQuery (and the DOM too)
}); 
```

但是我看不到在 jQuery 导入后不简单地移动代码的理由。

# gwt - 披露面板标题小部件客户端捆绑包，@sprite 不起作用

> ID：14482124
> 
> 赞同：0
> 
> 时间：2013-01-23T14:31:37.860
> 
> 标签：gwt, gwt2

我有[DisclosurePanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/DisclosurePanel.html)，作为标题内容，我有应用样式的 Horizo [​​ntalPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/HorizontalPanel.html)，这些样式具有背景图像，它使用 ClientBundle 和 @sprite。但问题是样式不适用于标题小部件（水平面板）

我的代码在这里

**入门级**

```
public class Test implements EntryPoint {

    /**
     * This is the entry point method.
     */
    public void onModuleLoad() {
        TestClientBundle.INSTANCE.testCsss().ensureInjected();
        DisclosurePanel dp = new DisclosurePanel();
        HorizontalPanel hp = new HorizontalPanel();
        dp.setStyleName("blue");
        Label l = new Label("testing the DP with IMG-CSS bundle");
        hp.add(l);
        dp.setHeader(hp);
        dp.setContent(new Label("Body"));
        RootPanel.get().add(dp);
    }
} 
```

**ClientBundle 接口**

```
public interface TestClientBundle extends ClientBundle {

    TestClientBundle INSTANCE = GWT.create(TestClientBundle.class);

    @Source("blue.jpg")
    public ImageResource blue();

    @Source("test.css")
    public CssResource testCsss();
} 
```

**CSS文件**

```
@external .blue;
@sprite .blue {
    gwt-image: 'blue';
    cursor: pointer;
    text-decoration: none;
} 
```

是 GWT 中的已知问题还是我的代码错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:12:54.140

代替

```
 dp.setStyleName("gates_playbookimage_blue"); 
```

您需要有一种方法来引用该 css 类名称 - 您需要一个`CssResource`接口：

```
public interface MyCssResource extends CssResource {
    String gates_playbookimage_blue();
} 
```

从您的 clientbundle 而不是 CssResource 中引用它：

```
public interface TestClientBundle extends ClientBundle {
    TestClientBundle INSTANCE = GWT.create(TestClientBundle.class);

    @Source("playbook_blue.jpg")
    public ImageResource playbookBlue();

    @Source("test.css")
    public MyCssResource testCsss();
} 
```

现在你可以这样做：

```
 MyCssResource css = TestClientBundle.INSTANCE.testCsss();
    css.ensureInjected();
    //...
    dp.setStyleName(css.gates_playbookimage_blue()); 
```

这将使 css 编译器根据需要重写您的 css，并确保将重写的类名传递给您的小部件。

# razor - 将多个参数传递给 Ajax.ActionLink

> ID：14482134
> 
> 赞同：2
> 
> 时间：2013-01-23T14:32:06.963
> 
> 标签：razor, asp.net-mvc-4, asp.net-ajax

我的 MVC 4 项目中有一个视图和部分视图。我在视图中有 3 个文本框、一个复选框和一个下拉列表。我正在使用 ajax.actionlink 方法来调用我的控制器、Action 并传递参数并从局部视图中获取结果并将它们显示在视图的 div 标记中页。

这是我的代码。

```
@Html.TextBoxFor(m=>m.searchParameter.cityName)
@Html.TextBoxFor(m=>m.searchParameter.CountryName)
@Html.TextBoxFor(m=>m.searchParameter.StateName)

@Ajax.ActionLink("submit", "DisplaySearchResult", "Home"
      , new { searchParameter =  Model.searchParameter }
     , new AjaxOptions() { HttpMethod = "Post", UpdateTargetId = "Results", InsertionMode = InsertionMode.Replace }, new { id = "DisplaySearchResult" }). 
```

问题是无法将参数传递给模型。我是 MVC4 的新手。有没有办法使用 jquery 或 javascript 传递参数？我不想在搜索结果期间加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:49:42.607

如我所见，您正在尝试实现搜索表单。在这种情况下，我避免使用 a`ViewModel`并且通常这样做：

```
@Html.TextBox("CityName", string.Empty)
@Html.TextBox("CountryName", string.Empty)
@Html.TextBox("StateName", string.Empty) 
```

然后您可以使用一些 jQuery 将值传递给您的操作方法：

```
$("#submit").click(function() {

            var $form = $('form');

            $.ajax({
                type: "GET",
                cache: false,
                url: '@Url.Action(ActionName, ControllerName)',
                data: $form.serialize(),
                success: loadResult
            });

function loadResult(data)
        {
            $("#container").html(data);
        } 
```

只需确保您的操作方法具有适当的参数`CityName, CountryName, StateName`，以便正确绑定值。

# python - 子进程中的外壳扩展？

> ID：14482135
> 
> 赞同：4
> 
> 时间：2013-01-23T14:32:10.223
> 
> 标签：python, shell, python-2.6

> **可能重复：**
> [Python 子进程通配符用法](https://stackoverflow.com/questions/9997048/python-subprocess-wildcard-usage)

使用 Python 2.6 子进程模块，我需要对我使用先前子进程调用构建的 src.rpm 文件运行命令。

不幸的是，我正在使用不一致的规范文件，所以我对 src.rpm 的文件名应该是什么样子只有一个模糊的概念（例如，我知道包的名称和名为“ {package}-{version}.src.rpm" 但不是版本）。

但是，我确实知道，我正在查找的目录中只有一个 src.rpm 文件，因此我可以使用类似的命令调用 mock

`mock {options} *.src.rpm`

并让它在 shell 中工作，但子进程似乎不想接受扩展。我尝试使用 (shell=True) 作为 subprocess.call() 的参数，但即使它有效，我也宁愿避免它。

我如何得到类似的东西

`subprocess.call("mock *.src.rpm".split())`

跑步？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T15:21:22.280

使用`glob`包：

```
import subprocess    
from glob import glob
subprocess.call(["mock"] + glob("*.src.rpm")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T15:41:51.953

通配符 * 必须由 SHELL 解释。当您运行 subprocess.call 时，默认情况下它不会加载 shell，但您可以将其`shell=True`作为参数提供：

```
subprocess.call("mock *.src.rpm".split(), shell=True) 
```

# regex - 301 重定向条 QUERY_STRING

> ID：14482143
> 
> 赞同：1
> 
> 时间：2013-01-23T14:32:38.607
> 
> 标签：regex, .htaccess, redirect

我计划很快重新启动一个网站。重新启动的一部分是从 Joomla！到WordPress。

除了一些旧页面，它们会用一些精确的表达式重定向，我还有很多页面，它们将被重定向到新的根页面。

什么是正确的正则表达式，如果我想重定向这样的 URL：

```
http://www.somedomain.com/index.php?somevar=123&com_option=somevalue
http://www.somedomain.com/index.php?com_option=someothervalue 
```

所有 URL 的共同点是：

```
http://www.somedomain.com/index.php?
+
com_option 
```

如何使用 .htaccess 中的一行重定向代码重定向所有这些页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:43:00.437

我假设您不需要 somevar 并且只想结转 com_option

```
RewriteEngine on
RewriteBase /
RewriteRule index.php(.*)com_option=(.*)$ http://newsite.com/index.php?com_option=$2 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:39:20.683

您将需要执行以下操作：

```
RedirectMatch 301 (.*)/the/old/domain/and/url/(.*) http://the/new/domain/and/path/$2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:42:59.657

现在，该网站已经上线，我发现我的问题的答案都没有得到解决。

经过一番尝试，我找到了一个解决方案：

到目前为止，谷歌提供了一个现场演示：

* * *

1) 去谷歌搜索“site:sqlxpert.de”。

2) 单击 URL 中具有“选项”的链接之一。

3) 您将被重定向到新页面根目录 - 在这种情况下，它是同一个域，也是一个 index.php，但 d*** QUERY_STRING 消失了。

* * *

我需要一个 .htaccess 片段，它执行以下操作（用文字表示）：

```
If requested file is 
   INDEX.PHP or INDEX2.PHP 
AND 
   QUERY STRING contains "option"
then 301 REDIRECT to 
   http://www.sqlxpert.de/ 
WITHOUT any QUERY STRING 
```

解决方案：

```
RewriteCond %{QUERY_STRING} option
RewriteRule ^index\.php http://www.sqlxpert.de/$1? [L,R=301]
RewriteRule ^index2\.php http://www.sqlxpert.de/$1? [L,R=301] 
```

# cakephp - Cake Shell 显示代码而不是选项

> ID：14482146
> 
> 赞同：0
> 
> 时间：2013-01-23T14:32:48.407
> 
> 标签：cakephp, cakephp-2.1

当我尝试运行蛋糕壳时..我收到一条非常奇怪的消息..见下文；

```
X-Powered-By: PHP/5.4.11
Content-type: text/html

################################################################################
#
# Bake is a shell script for running CakePHP bake script
# PHP 5
#
# CakePHP(tm) :  Rapid Development Framework (http://cakephp.org)
# Copyright 2005-2012, Cake Software Foundation, Inc.
#
# Licensed under The MIT License
# Redistributions of files must retain the above copyright notice.
#
# @copyright    Copyright 2005-2012, Cake Software Foundation, Inc.
# @link         http://cakephp.org CakePHP(tm) Project
# @package      app.Console
# @since        CakePHP(tm) v 2.0
# @license      MIT License (http://www.opensource.org/licenses/mit-license.php)
#
################################################################################
LIB=$(cd -P -- "$(dirname -- "$0")" && pwd -P) && LIB=$LIB/$(basename -- "$0")

while [ -h "$LIB" ]; do
        DIR=$(dirname -- "$LIB")
        SYM=$(readlink "$LIB")
        LIB=$(cd "$DIR" && cd $(dirname -- "$SYM") && pwd)/$(basename -- "$SYM")
done

LIB=$(dirname -- "$LIB")/
APP=$(dirname $(cd $(dirname $0) && pwd))

exec php -q "$LIB"cake.php -working "$APP" "$@"

exit; 
```

任何想法如何解决这个问题？

我正在使用 php 5.4.11，并且我没有对 cakephp 所做的代码进行任何更改..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:51:44.947

我是从 cake.. 调用方法而不是 cake.php

感谢@noslone！

要加载外壳程序，您应该编写以下命令

```
$  php cake.php (Then the appropriate shell name) 
```

# c# - ffmpeg 泄漏检测

> ID：14482147
> 
> 赞同：0
> 
> 时间：2013-01-23T14:32:54.673
> 
> 标签：c#, ffmpeg

我目前正在使用 mSys 下的 gcc 为 DLL 和一些普通的 C 包装器代码构建 ffmpeg 进行一些转换工作，然后我从 C# 调用这些代码。

如果我使用 MS crtdbg.h 我现在没有显示任何内存泄漏（我确实有几个）但是我想检查我是否在我假设使用 gcc 的 ffmpeg 代码中留下了泄漏libc 库。

例如，我使用了一些后来忘记清理的 AVDictionary 对象，我担心其他地方可能还有一些我错过了。

有人对如何确认我没有在 ffmpeg DLL 中泄漏内存有任何建议吗？

# servlets - 提供静态内容

> ID：14482150
> 
> 赞同：1
> 
> 时间：2013-01-23T14:33:00.637
> 
> 标签：servlets, web, static-files

我想用 Java Servlet 提供静态内容，但它是最好的解决方案吗？我应该使用文件操作更改静态内容还是将文件保留在数据库服务器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:35:18.823

最好在网络服务器文档根目录上使用静态文件。如果文件确实是静态的，则出于性能原因，不建议从数据库中存储和获取。

# php - require_once 的默认位置是什么？

> ID：14482153
> 
> 赞同：1
> 
> 时间：2013-01-23T14:33:08.240
> 
> 标签：php, require

我只是看了一下如何通过 google smtp 发送邮件。

PEAR 作为完成这项工作的合适库出现。

在[此](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)代码段中有一个

```
require_once "Mail.php"; 
```

这个文件在哪里？__autoload() 函数有什么技巧吗？如果我将其更改为适合我的课程的文件夹路径，我可能会打破魔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:34:36.660

请养成在此处提出此类问题之前查看[手册的习惯。](http://www.php.net/manual/en/function.include.php)它涵盖了这一点：

> 根据给定的文件路径包含文件，如果没有给出，则根据指定的[include_path](http://www.php.net/manual/en/ini.core.php#ini.include-path)包含文件。如果在 include_path 中找不到该文件，则 include 最终会在失败之前检查调用脚本自己的目录和当前工作目录。如果找不到文件，include 构造将发出警告；这是与 require 不同的行为，后者会发出致命错误。

`__autoload()`是一个独立于`include`和/或的概念`require`。它是一个在您尝试使用尚未定义的类时自动调用的函数。`include`它是您自己编写的函数，用于根据项目的文件结构定义自己的算法来确定需要哪些文件。

您还应该避免`__autoload()`在代码中使用，因为只能`__autoload()`定义一个函数。相反，您应该[`spl_autoload_register()`](http://ca.php.net/manual/en/function.spl-autoload-register.php)改用。此函数采用其他函数的名称并将其添加到函数列表中，当调用未知类时，将调用每个函数，直到其中一个找到定义您要查找的类的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:34:15.987

它在包含路径中查看[http://php.net/manual/de/ini.core.php#ini.include-path](http://php.net/manual/de/ini.core.php#ini.include-path)

# ios - CoreBluetooth [警告] 未知错误：2

> ID：14482155
> 
> 赞同：0
> 
> 时间：2013-01-23T14:33:11.487
> 
> 标签：ios, core-bluetooth

我正在 iOS6 中开发一个 BLE 应用程序。当我在设置为通知状态后`CoreBluetooth[WARNING] Unknown error: 2`调用一个特性时，我得到了。`readValueForCharacteristic`

```
- (void)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error`

The delegate callback gets called with an unknown error from NSLog: `Error updating value for characteristic Unknown (<fef2>) error: Error Domain=CBErrorDomain Code=0 "Unknown error." UserInfo=0x1dd3b7e0 {NSLocalizedDescription=Unknown error.} 
```

请给一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:03:29.947

据我所知，您无法读取设置为通知的特征的值。

您需要“订阅”该特征的通知：

```
[peripheral setNotifyValue:YES forCharacteristic:characteristic]; 
```

然后可以在您的委托方法中读取该值：

```
- (void)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error 
```

iOS 的 BLE 文档在这方面很差。

# linux - 在哪里可以找到 Linux 版本的 sys/queue.h 头文件？

> ID：14482157
> 
> 赞同：4
> 
> 时间：2013-01-23T14:33:12.957
> 
> 标签：linux, queue, diff, bsd

`sys/queue.h`最早出现在 4.4BSD。Linux 已将其包含在其发行版中，但该版本似乎不是最新的。

[FreeBSD 版本](http://www.unix.com/man-page/FreeBSD/3/queue/)实现了单链表、单链尾队列、列表和尾队列。[Linux 版本](http://linux.die.net/man/3/queue)实现了列表、尾队列和循环队列。

我在我的 Ubuntu PC 上安装了 libbsd-dev 包，然后`sys/queue.h`在`/usr/include/bsd/sys/queue.h`.

我的问题：

*   我在哪里可以找到这个头文件的**Linux版本？**

*   这两种实现之间的主要区别是什么？**Linux**版本只是**BSD的****过时**版本吗？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:26:32.990

他们有着相同的祖先，但似乎在他们身上所做的任何发展都在很久以前就出现了分歧。

如果你想在你的项目中使用它，你最好的选择是将你最喜欢的一个复制到你的项目中并使用它。不要依赖为您提供它的系统。它只是一个带有一堆宏的头文件，不需要库或任何依赖项即可工作，因此根本不是操作系统特定的。我通常从 OpenBSD 获取我的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T15:25:11.883

看起来Linux的版本已经严重过时了。自 2001 年以来，CIRCLEQ 在 BSD 中（相当强烈地）被弃用，甚至从文档中删除，即使实现仍在 queue.h 中。我们应该使用 TAILQ，它提供了相同的功能，但性能更好/问题更少/更安全。

同时，在 Linux 中，它甚至仍然有文档记录，但是您可以在 kconfig 中找到从 CIRCLEQ 迁移到 TAILQ 的更改，原因是 BSD 已弃用。

CIRCLEQ 中的具体问题似乎是它使用了一个特定的头，与列表节点不同，但无论如何它都是作为节点链接的；因此，必须在每个节点访问时保留并检查头指针，以查看该节点是否是头。所以有两个问题：每次访问时的检查，以及需要将头指针放在手边，获取寄存器或缓存。**

# delphi - 使用 Indy 向 gmail 地址发送电子邮件 消息进入垃圾邮件

> ID：14482160
> 
> 赞同：3
> 
> 时间：2013-01-23T14:33:20.433
> 
> 标签：delphi, email, gmail, send, indy

您好，我正在尝试从 delphi (indy) 向 gmail 地址发送消息。当我转到 Gmail 时，我在垃圾邮件文件夹中发现了我的邮件。如果我尝试从 web 使用 PHPMailer 发送相同的消息，它可以正常工作。这是代码。

谢谢

```
//setup SMTP
SMTP.Port := 25;
SMTP.ConnectTimeout := 1000;
SMTP.Host := 'smtp.xxxxxx.it';
SMTP.Username := 'info@xxxxxx.it';
SMTP.Password := 'xxxxxx';
SMTP.Connect();

if SMTP.Authenticate then
begin
    //setup mail message
    MailMessage.From.Name := 'xxxxxx';
    MailMessage.From.Address := 'info@xxxxxx.it';
    MailMessage.Recipients.EMailAddresses := 'xxxxxx@gmail.com';

    MailMessage.Subject := ledSubject.Text;
    MailMessage.ContentType := 'multipart/mixed';
    htmpart := TIdText.Create(MailMessage.MessageParts, nil);
    htmpart.Body := Body.Lines;
    htmpart.ContentType := 'text/html';

    //send mail
    try
        try
            SMTP.Send(MailMessage);
        except on E:Exception do
            StatusMemo.Lines.Insert(0, 'ERROR: ' + E.Message);
        end;
    finally
        if SMTP.Connected then SMTP.Disconnect;
    end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:38:54.353

可能我已经发现了问题。我在“原始模式”中查看消息，在标题中发现 google 显示“MISSING ID”，并尝试添加以下代码：

```
 MailMessage.MsgId := '1234567890@drinkmessage.it';
    MailMessage.ExtraHeaders.Values['Message-Id'] := MailMessage.MsgId; 
```

现在它似乎工作正常。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:40:53.640

您是否尝试过更改`HeloName`and `MailAgent`of `IdSMTP`？如果您使用与 PHPMailer 相同的域，我的猜测是 GMail 将来自您的应用程序的电子邮件视为垃圾邮件，因为它不会检测/不喜欢发送它们的应用程序。

# android - MonoDroid 在 GridView 中缩放图像

> ID：14482161
> 
> 赞同：2
> 
> 时间：2013-01-23T14:33:23.160
> 
> 标签：android, android-layout, mono, xamarin.android

我有一个 GridView，其中有一组 ImageView。我在 GetView 中创建图像如下：

```
public override View GetView(int position, View convertView, ViewGroup parent)
{
    ImageView imageView;

    if (convertView == null)
    {  // if it's not recycled, initialize some attributes  
        imageView = new ImageView(context);
        imageView.LayoutParameters = new GridView.LayoutParams(118, 132); // images are all the same dimension
        imageView.SetScaleType(ImageView.ScaleType.FitXy);
        imageView.SetPadding(5, 5, 5, 0);
    }
    else
    {
        imageView = (ImageView)convertView;
    }

    imageView.SetImageResource(thumbIds[position]);
    return imageView;
}

// references to our images  
int[] thumbIds =
{  
    Resource.Drawable.IconAdvocacy, Resource.Drawable.IconBusinessServices,  
    Resource.Drawable.IconContactUs, Resource.Drawable.IconDistrict,  
    Resource.Drawable.IconEvents, Resource.Drawable.IconFind,  
    Resource.Drawable.IconLawsRegs, Resource.Drawable.IconHealth,  
    Resource.Drawable.IconPracMgmt, Resource.Drawable.IconPublications,  
    Resource.Drawable.IconUpdates, Resource.Drawable.IconUploadPhoto
}; 
```

如您所见，我在 LayoutParams 函数中定义了固定大小。这会导致每个设备上的图像大小相同。

问题：缩放图像的最佳方法是什么？

我应该： 1) 只需在每个可绘制、-hdpi、-ldpi 和 -mdpi 文件夹中创建不同大小的图像吗？如果是这样，我如何指定 LayoutParams 的大小？

2) 获取 DisplayMetrics？如果是这样，我该怎么做？我一直无法获得有关如何执行此操作的 MonoDroid 信息。文档中的示例似乎不起作用。

任何帮助是极大的赞赏！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:21:25.437

好吧，我认为由于您有固定数量的图像并且您没有动态加载它们，因此只需像在选项 1 中指定的那样提前创建所需的资源可能就足够安全了。如果您需要动态加载或动态调整图像大小，那么我可能会建议选择选项 2 路径。

**选项1**

为了获取所有布局的图像，您可以为 dpi 扩展指定 -land（横向）和 -port（纵向）扩展。因此，例如，您可以拥有 drawable-mdpi-port 和 drawable-mdpi-land。有关选项的完整列表和一些更详细的信息，请参阅[Supporting Multiple Screens](https://developer.android.com/guide/practices/screens_support.html#qualifiers)文档。

**选项 2**

该代码应该可以很好地通过代码获取当前的显示密度。如果您从活动中调用它，这应该完全有效。如果您是从片段或其他地方调用，请确保首先引用 Activity。

```
var metrics = new DisplayMetrics();
this.WindowManager.DefaultDisplay.GetMetrics(metrics);
switch (metrics.DensityDpi)
{
    case DisplayMetricsDensity.Default:
        break;
    case DisplayMetricsDensity.High:
        break;
    case DisplayMetricsDensity.Low:
        break;
    case DisplayMetricsDensity.Xhigh:
        break;
} 
```

# android - LogCat 丢失了行号

> ID：14482163
> 
> 赞同：-1
> 
> 时间：2013-01-23T14:33:24.247
> 
> 标签：android, cordova, android-logcat

我一直在这几天。我打破了我的日志猫。不知何故。我不知道我做了什么。（一切都是*PEBKAC*）。我在终端中的输出

```
adb logcat | grep CordovaLog 
```

看起来像这样

```
D/CordovaLog(11740): Count in faq: 1
D/CordovaLog(11740): Count in faq: 2
D/CordovaLog(11740): Count in faq: 3
D/CordovaLog(11740): Count in faq: 4
D/CordovaLog(11740): Count in faq: 5
D/CordovaLog(11740): Count in faq: 6
D/CordovaLog(11740): Uncaught TypeError: Cannot read property 'name' of undefined
D/CordovaLog(11740): Collection.length cats : 5 
```

它曾经有行号指示 console.log 来自哪个文件和行。

我尝试使用以下命令再次打开和关闭它：

```
1952  ./adb shell stop
1954  ./adb shell start 
```

我真的必须卸载并重新安装所有东西吗？

这也没有说明我的问题：http: [//developer.android.com/tools/help/logcat.html](http://developer.android.com/tools/help/logcat.html)

该项目是带有Phonegap的Android。它曾经完美地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T16:37:58.147

MS-DOS 命令行等效于

```
adb logcat | grep "Web Console" 
```

是：

```
adb logcat | findstr "Web Console" 
```

或者：

```
adb logcat | findstr "Console" 
```

调试愉快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:43:38.913

WebConsole 和其他日志的问题是我们不知道哪些手机支持什么。在大多数现代 Android 手机上，这意味着我们必须向相同的控制台信息发送 3 次垃圾邮件，当您不使用 CordovaLog 或 Web 控制台时，这会使调试变得异常困难。

您能否在 ( [https://issues.apache.org/jira/browse/CB](https://issues.apache.org/jira/browse/CB) ) 提交错误并告诉我们您正在运行哪个版本的 Android 以及您使用的手机，以便我们可以重新创建此错误并添加一个您设备的用例？与此同时，我们知道最近的英特尔仿真器产生了正确的输出，所以这是一种变通方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:59:28.907

尝试：

```
adb logcat | grep "Web Console" 
```

反而。

# ios - 工具栏不显示

> ID：14482165
> 
> 赞同：0
> 
> 时间：2013-01-23T14:33:32.970
> 
> 标签：ios, uitabbarcontroller, uitoolbar

我使用带有 tabBarController 的界面构建器创建了一个界面。这个 tabBar 控制器有三个 viewController。最后一个有问题，它在屏幕顶部显示图像视图和工具栏。工具栏包含两个按钮和一个标签。有时，当有图像时，它不会出现。知道为什么吗？

以下是一些快照：

![当工具栏出现时](../Images/da0179d40de14a34a319613b612c8886.png) ![当工具栏没有出现时](../Images/99635c195b96296d40a90d4d409c167e.png)

![在界面生成器中查看](../Images/9bab3fb5bc2b65513502c453b114917c.png)

改变后道格拉斯建议我：

![在此处输入图像描述](../Images/cfe2d9781fc2e4bf9bf2a02840201e00.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:42:26.753

您可能在 imageview 和工具栏之间有一个限制，因此当显示 image view 时，它会将工具栏推到高处而您看不到它。我会检查约束并进行调整。希望这可以帮助。

# jquery - Jquery 选择 html() 或 text() 但不是嵌套的 span 和 div

> ID：14482166
> 
> 赞同：2
> 
> 时间：2013-01-23T14:33:35.013
> 
> 标签：jquery, jquery-selectors, selector

我需要从 div 中选择价格，但问题是有时元素内还有一个额外的嵌套 div 和/或 span。

我想知道是否有办法使用 :not 选择器，或者我是否必须获取 html 的值并清除有时存在的 span 和 div 。

```
$('.price').text();//returns the additional text from the span and div
$('.price').html();//returns the span and div tags and text

<!-- Simplified html -->
<div class="product">
<div class="price">$19.95
</div>
</div>

<!-- This product has shipping info inserted -->
<div class="product">
<div class="price"> $54.99
<div class="shipping-info">$5.99</div>
</div>
</div>

<!-- This product has the original price in a span and the shipping info inserted -->
<div class="product">
<div class="price"><span>$189.99</span>$99.99
<div class="shipping-info">Free Shipping</div>
</div>
</div> 
```

我需要获取价格的价值（19.99 美元、54.99 美元、99.99 美元），而不是额外的跨度或运输信息。

我无法更改 HTML（只是脚本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:47:15.983

```
var price = $('.price').contents().filter(function() {
    return this.nodeType == 3;   //Filtering by text node
}).text(); 
```

[演示](http://jsfiddle.net/S7z9s/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:39:25.617

这应该有效：

```
price.replace(/(<([^>]+)>.*?<\/([^>]+)>)/ig, ""); 
```

例子：

```
'$54.99<div class="shipping-info">$5.99</div>'.replace(/(<([^>]+)>.*?<\/([^>]+)>)/ig, ""); 
```

# sql - ORACLE SQL 如果另一个时间戳不在此范围内，则显示所有日期/时间范围

> ID：14482168
> 
> 赞同：2
> 
> 时间：2013-01-23T14:33:42.487
> 
> 标签：sql, oracle, date-range

一张不同时间戳的表DT：

**约会时间**

```
22/01/2013 22:30
16/10/2012 11:20
30/03/2012 20:50 
```

另一个带有开始日期和结束日期的表 TIMEFRAMES：

```
SDT                     EDT
22/01/2013 23:30        22/01/2013 23:40
22/01/2013 20:30        22/01/2013 20:40  
22/01/2013 22:10    X   22/01/2013 22:40 <--should filtered out because
                                            one of the timestamps(values from DT table)
                                            is between SDT & EDT
16/10/2012 11:00        16/10/2012 11:10
16/10/2012 11:00    X   16/10/2012 11:40 <--should filtered out because
                                            one of the timestamps(values from DT table)
                                            is between SDT & EDT 
```

因此，所需的结果将是 TIMEFRAMES 表中的所有行，除了那些来自 DT 表的任何时间戳（date_time）不落在表 TIMEFRAMES 的时间范围之间的行

```
SDT                   EDT
22/01/2013 23:30      22/01/2013 23:40
22/01/2013 20:30      22/01/2013 20:40    
16/10/2012 11:00      16/10/2012 11:10 
```

[http://www.sqlfiddle.com/#!4/340a8/3](http://www.sqlfiddle.com/#!4/340a8/3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:39:40.533

尝试：

```
select * from timeframes f where not exists
(select 1 from dt where dt.date_time between f.sdt and f.edt) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:47:23.703

```
select sdt, edt 
from timeframes t
left join dt on (dt.date_time between t.sdt and t.edt)
where dt.date_time is null; 
```

[sqlfiddle](http://www.sqlfiddle.com/#!4/ef3a8/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:36:41.287

您可以使用左外连接和聚合来做到这一点：

```
select tf.sdt, tf.edt, COUNT(*), COUNT(dt.date_time)
from timeframes tf left outer join
     dt
     on dt.date_time between tf.sdt and tf.edt
group by tf.sdt, tf.edt
having COUNT(*) <> COUNT(dt.date_time) 
```

该`having`子句检查是否所有 dts 都在范围内。

# android - 编号列表视图的内容

> ID：14482170
> 
> 赞同：0
> 
> 时间：2013-01-23T14:33:46.760
> 
> 标签：android, listview

我有一个带有自定义适配器的列表视图，它显示来自联系人的名称。目前将它们显示为

> 罗希特
> ·拉胡尔
> ....

我希望它像

> 1.  罗希特
> 2.  拉胡尔……

即，应自动附加数字。我尝试在 bindview() 和 newview() 方法中使用计数变量来做到这一点，但是当我向下滚动并返回时它会变得混乱

我设置文本的方式是

```
name = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
contactName.setText(count + ". " + name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:43:25.850

尝试

```
name = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
contactName.setText(cursor.getPosition() + ". " + name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:42:32.337

也许尝试：`long count = cursor.getPosition();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:52:23.897

您可以通过使用从 Cursor 获得位置

```
long count = cursor.getPosition(); 
```

然后

```
name = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
contactName.setText(cursor.getPosition() + ". " + name); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:50:00.620

这应该可以满足您的需要：

```
public class CustomCursoAdapter extends SimpleCursorAdapter{

    public CustomCursoAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
        // TODO Auto-generated constructor stub
        }

    @Override
    public void bindView(View view, Context context, Cursor cursor)
    {
            int count =cursor.getPosition()+1;
            RelativeLayout rl = (RelativeLayout) view;
            TextView tv = (TextView) rl.findViewById(R.id.serial_no);
            tv.setText(""+count);
        super.bindView(view, context, cursor);
    }
} 
```

# java - 用于 POJO 创建的 JAXB 解组拦截

> ID：14482172
> 
> 赞同：2
> 
> 时间：2013-01-23T14:33:51.973
> 
> 标签：java, jaxb, unmarshalling

我正在使用 JAXB 编组和解组在服务器和客户端之间传输数据。由于数据类由服务器和客户端共享，这似乎是正确的做事方式。我在网上找到的示例适用于临时数据，即当服务器发出新请求时将被丢弃的数据。

但是我的一些数据不是暂时的，服务器的后续轮询正在寻找更新。我在响应中包含了时间戳，因此此类请求只需要报告那些已修改的项目。

我正在寻找的是一种拦截解组过程的方法，以便在创建 POJO 时调用我的代码来完成它的工作。我不想只是盲目地创建一个新实例，而是想使用编码到 XML 元素节点的属性中的唯一标识符来查找缓存中已经获取但已过时的实例并返回该实例. 因此，当解组继续时，它就变成了真正的更新。

顺便说一下，我的 POJO 数据对象支持否决和属性更改支持，GUI 代码使用属性更改事件来更新刷新本身，并且很可能使用否决来记录用户是否正在修改已在其他地方更新的内容。下面列出了一个示例：

```
@Entity(name="Operative")
@Table(name="vOperatives")
@XmlRootElement(name="operative")
public class OperativeEntity 
    extends AbstractEntity {

    public static final String IDENT_PROPERTY = "identity";
    public static final String GIVEN_NAME_PROPERTY = "given-name";
    public static final String FAMILY_NAME_PROPERTY = "family-name";
    public static final String EMAIL_PROPERTY = "email";
    public static final String EMAIL_VERIFIED_PROPERTY = "email-verified";

    private volatile UUID uuid;
    private volatile String givenName;
    private volatile String familyName;
    private volatile String email;
    private volatile boolean emailVerified;

    public OperativeEntity() {
    }

    public OperativeEntity(UUIDFactory factory) {
        setUUID(factory.generate());
    }

    @Id
    @Column(name="uuid", length=40)
    @XmlAttribute(name="uuid")
    public String getIdent() {
        return null == uuid ? null : uuid.toString();
    }

    public void setIdent(String uuid) {
        setUUID(UUID.fromString(uuid));
    }

    @Transient
    @XmlTransient
    public UUID getUUID() {
        return uuid;
    }

    public void setUUID(UUID id) {
        if (null == id)
            throw new NullPointerException("No UUID given");
        uuid = id;
    }

    @Column(name="gvn", length=60, nullable=true)
    @XmlAttribute(name="given-name")
    public String getGivenName() {
        return givenName;
    }

    public void setGivenName(String newName)
        throws PropertyVetoException {

        if (null == givenName && null == newName)
            return;

        else if (null != givenName && givenName.equals(newName))
            return;

        final String oldName = givenName;
        fireVetoableChange(GIVEN_NAME_PROPERTY, oldName, newName);
        givenName = newName;
        firePropertyChange(GIVEN_NAME_PROPERTY, oldName, newName);
    }

    @Column(name="fmly", length=60, nullable=true)
    @XmlAttribute(name="family-name")
    public String getFamilyName() {
        return familyName;
    }

    public void setFamilyName(String newName)
        throws PropertyVetoException {

        if (null == familyName && null == newName)
            return;

        else if (null != familyName && familyName.equals(newName))
            return;

        final String oldName = familyName;
        fireVetoableChange(FAMILY_NAME_PROPERTY, oldName, newName);
        familyName = newName;
        firePropertyChange(FAMILY_NAME_PROPERTY, oldName, newName);
    }

    @Column(name="eMail", nullable=true)
    @XmlAttribute(name="e-mail")
    public String getEMail() {
        return email;
    }

    public void setEMail(String newEMail)
        throws PropertyVetoException {

        if (null == email && null == newEMail)
            return;

        else if (null != email && email.equals(newEMail))
            return;

        final String oldEMail = email;
        fireVetoableChange(EMAIL_PROPERTY, oldEMail, newEMail);
        email = newEMail;
        firePropertyChange(EMAIL_PROPERTY, oldEMail, newEMail);
    }

    @Column(name="vrfd", nullable=true)
    @XmlAttribute(name="email-verified")
    public boolean isEMailVerified() {
        return emailVerified;
    }

    public void setEMailVerified(boolean newVerified)
        throws PropertyVetoException {

        if (newVerified == emailVerified)
            return;

        final boolean oldVerified = emailVerified;
        fireVetoableChange(EMAIL_VERIFIED_PROPERTY, oldVerified, newVerified);
        emailVerified = newVerified;
        firePropertyChange(EMAIL_VERIFIED_PROPERTY, oldVerified, newVerified);
    }
} 
```

# javascript - 使用 javascript 对 html 脚本进行小修改，我无法解决

> ID：14482174
> 
> 赞同：1
> 
> 时间：2013-01-23T14:33:53.817
> 
> 标签：javascript

这是我的代码

```
<div class="rButtons">
<input type="radio" name="numbers" value="10" onclick="uncheck();" />10
<input type="radio" name="numbers" value="20"  onclick="uncheck();" />20
<input type="radio" name="numbers" value="other" onclick="check(this);"/>other
<input type="text" id="other_field" name="other_field" onblur="checktext(this);"/>
</div> 
```

这是CSS代码

```
<style type="text/css">
#other_field
{
visibility: hidden;
}
</style> 
```

这是js

```
<script type="text/javascript">
function uncheck()
 {
   document.getElementById('other_field').style.visibility = "hidden";
 }
function check(inputField)
{
    if(inputField.checked)
    {
        document.getElementById('other_field').style.visibility = "visible";
    }
}
function checktext(inputField)
{
    if(isNaN(inputField.value))
    {
        alert('only numbers are allowed..');
        return false;
    }
    else if( (inputField.value % 10 ) != 0)
    {
        alert('only multiples of 10..');
        return false;
    }
    else
    {
        return true;
    }

}
</script> 
```

一切都很好.. 但问题是这个.. 当我点击“其他”单选按钮时，它会打开一个新的空白字段，但是当我点击回到 10 或 20 时它会停留在那里.. 我怎样才能让它消失？

我知道答案很简单..但我尝试了很多东西但没有工作..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:10:57.643

完整的代码：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js?ver=1.4.2"></script>

<script type="text/javascript">

    function ShowTextBox()
    {
        if ($("input[name=radiobutton1]:checked").val() == "show")      
        {       
           $("#text_box_to_show").show();
        }     
        else
        {
           $("#text_box_to_show").hide();
        }   
    }

</script>
</head>

<body>
<h3>Example</h3>
  <input name="radiobutton1" type="radio" value="show" onChange="ShowTextBox();">Show
  <input name="radiobutton1" type="radio" value="hide" checked onChange="ShowTextBox();">Hide
  <input type="text" id="text_box_to_show" name="textfield" style="display:none;">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:41:29.400

你可以用 JQuery 做到这一点，它更简单，像这样

```
<script>
 var $radios = $('input:radio[name=numbers]');
        if ($radios.is(':checked') === true) {
           $("#other_field").show();
        }     
        else
        {
           $("#other_field").hide();
        }   

</script> 
```

# iphone - 如何为 Mobile Safari 编码视频

> ID：14482182
> 
> 赞同：0
> 
> 时间：2013-01-23T14:34:33.760
> 
> 标签：iphone, html, mobile, video, safari

我一直在尝试为移动 Safari 播放 (iPhone) 编码视频预告片。使用适用于 Windows 的 Handbrake，我选择了源 .mov 文件并选择了 iPhone 4 预设。然后，我检查了 Web 优化选项并开始了该过程。

但是，生成的视频无法在我的 iPhone 的 Safari 浏览器上播放。

[http://mobilevideo.jt.citeeze.com/static/trailer.m4v](http://mobilevideo.jt.citeeze.com/static/trailer.m4v)

如果有人用 ffmpeg 成功编码了移动 safari 视频，你能提供确切的参数吗？

谢谢！

# php - 检查变量是否是 Twig 的日期

> ID：14482184
> 
> 赞同：14
> 
> 时间：2013-01-23T14:34:35.503
> 
> 标签：php, twig

我有一个要在 Twig 模板中显示的变量数组，每个变量可以是字符串或日期。

如果变量是日期，我想像这样应用`date`过滤器：

```
{{ my_var|date('d/m/Y') }} 
```

如果它是一个字符串，我希望它以通常的方式显示它：

```
{{ my_var }} 
```

有什么方法可以测试变量是否是日期（即 PHP DateTime 对象的实例）？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-23T14:42:45.327

也许不是最好的方法，但我找到了解决问题的方法。

```
{% if my_var.timestamp is defined %}
    {{ my_var|date('m/d/Y') }}
{% else %}
    {{ my_var }}
{% endif %} 
```

由于`DateTime`PHP 对象具有公共`getTimestamp`方法，因此可以检查变量是否为日期，无论此属性是否设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-21T17:51:37.363

Michael 的解决方案在大多数情况下都有效，但是当您想要一个通用解决方案时，您应该考虑一些特殊情况。

首先，您测试的具有`getTimestamp()`方法的对象不必是`DateTime`实例。当时间戳字段在对象中有用时，我可以处理很多情况，因此我会测试该`getTimezone()`方法。

其次，如果`my_var`是一个定义了魔法`__call`方法的对象，那么所有这些测试都会变成肯定的。这就是为什么我建议进行以下负面测试：

```
{% if my_var.timezone is defined and my_var.nonExistingProperty is not defined %}
    {{ my_var|date('m/d/Y') }}
{% else %}
    {{ my_var }}
{% endif %} 
```

第二种情况是我最近因为使用 Propel ORM 对象而苦苦挣扎的情况。基类具有`__call`捕获所有 Twig`is defined`测试的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-06T13:39:25.023

您可以添加一个`class(my_var)`函数，例如：

```
// src/AppBundle/Twig/HelperExtension.php

namespace AppBundle\Twig;

use Twig_Extension;
use Twig_SimpleFunction;

class HelperExtension extends Twig_Extension
{
    public function getFunctions()
    {
        return array(
            new Twig_SimpleFunction('class', array($this, 'getClassName')),
        );
    }

    public function getClassName($object)
    {
        if (!is_object($object)) {
            return null;
        }
        return get_class($object);
    }
} 
```

用法：

```
{% if class(my_var) == 'DateTime' %}
    ...
{% endif %} 
```

# iphone - 切换到 AirPlay 时崩溃

> ID：14482192
> 
> 赞同：0
> 
> 时间：2013-01-23T14:34:51.570
> 
> 标签：iphone, ios

我正在开发流媒体音频的应用程序。我有带 AirPlay 按钮的 MPVolumeView。但有时切换到 Airplay 时应用程序会崩溃。

```
0   libobjc.A.dylib                 0x394455d0 objc_msgSend + 16
1   Foundation                      0x39f05040 +[NSObject(NSDelayedPerforming) cancelPreviousPerformRequestsWithTarget:selector:object:] + 336
2   MediaPlayer                     0x381d43b0 -[MPAudioDeviceController _scheduleSendDelegateAudioRoutesChanged] + 52
3   CoreFoundation                  0x3ac90346 _CFXNotificationPost + 1418
4   Foundation                      0x39f0538a -[NSNotificationCenter postNotificationName:object:userInfo:] + 66
5   Celestial                       0x35d3c0a4 -[AVObjectRegistry safePostNotificationFromMainThreadTarget:name:userInfo:] + 92
6   Celestial                       0x35d41970 figConnection_ActiveAudioRouteDidChange_Callback + 112
7   CoreFoundation                  0x3ad0c0a2 __CFNotificationCenterAddObserver_block_invoke_0 + 122
8   CoreFoundation                  0x3ac90346 _CFXNotificationPost + 1418
9   CoreFoundation                  0x3ac91918 CFNotificationCenterPostNotification + 100
10  CoreMedia                       0x3a111c96 CMNotificationCenterPostNotification + 114
11  MediaToolbox                    0x33ccae16 playerasync_reflectSubPlayerNotification + 118
12  CoreFoundation                  0x3ad0c0a2 __CFNotificationCenterAddObserver_block_invoke_0 + 122
13  CoreFoundation                  0x3ac90346 _CFXNotificationPost + 1418
14  CoreFoundation                  0x3ac91918 CFNotificationCenterPostNotification + 100
15  CoreMedia                       0x3a111c96 CMNotificationCenterPostNotification + 114
16  MediaToolbox                    0x33ccad92 playerremote_postNotification + 554
17  MediaToolbox                    0x33cccd28 playerremote_postNotificationWithPayload + 84
18  MediaToolbox                    0x33cca2ce FigPlayerRemoteCallbacksServer_SendNotifyPing + 370
19  MediaToolbox                    0x33cca14e _XSendNotifyPing + 66
20  MediaToolbox                    0x33cc74de figmoviecallbacks_server + 90
21  MediaToolbox                    0x33cc7468 fpr_ClientPortCallBack + 176
22  CoreFoundation                  0x3ad09888 __CFMachPortPerform + 116
23  CoreFoundation                  0x3ad143e4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
24  CoreFoundation                  0x3ad14386 __CFRunLoopDoSource1 + 134
25  CoreFoundation                  0x3ad1320a __CFRunLoopRun + 1378
26  CoreFoundation                  0x3ac86238 CFRunLoopRunSpecific + 352
27  CoreFoundation                  0x3ac860c4 CFRunLoopRunInMode + 100
28  GraphicsServices                0x36f8c336 GSEventRunModal + 70
29  UIKit                           0x34a9328c UIApplicationMain + 1116
30  RogApp                          0x0006a0ba main (main.m:17)
31  RogApp                          0x0006a034 start + 36 
```

我启用了僵尸对象，崩溃后我看到这样的消息：

```
[MPAudioDeviceController performSelector:withObject:afterDelay:inModes:] message sent to deallocated instance 
```

这是私人课程。我该如何修复这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:22:57.787

FWIW，我通过应用程序从现场获得了基本相同的崩溃报告。我不知道它与什么有关，但现在我至少可以探索切换到 AirPlay 来驱动它。

# knockout.js - Hasfocus 与 Firefox 的绑定问题

> ID：14482199
> 
> 赞同：4
> 
> 时间：2013-01-23T14:35:24.143
> 
> 标签：knockout.js, ko.observablearray, clicktoedit

我正在开发一个应用程序，该应用程序利用可观察数组来呈现可编辑的用户 ID 信息表。该应用程序在 Chrome 中运行良好，但在 Firefox 中运行时遇到问题。就我而言，这两个浏览器是我目前唯一关心的浏览器。

我正在通过`hasfocus`淘汰赛中的绑定使用“点击编辑”功能，它与 Chrome 配合得很好。Whenever the username is selected, it becomes editable, a save button presents itself, and upon clicking "Save" the info is posted as a JSON string. Firefox 在发布过程中似乎还不够远，并且当焦点被移除时它的行为也很奇怪。

有相当多的代码，所以我准备了这个 Fiddle 来显示问题。Chrome 工作正常，Firefox 没那么好。

[http://jsfiddle.net/stevehnh/GNssr/](http://jsfiddle.net/stevehnh/GNssr/)

非常感谢您的帮助！希望这是我缺少的一些小东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:50:36.710

在摆弄了一段时间之后，我发现问题是 Firefox 在我能够单击“保存”按钮之前从编辑字段中删除了焦点。为了解决这个问题，我使用了淘汰赛*油门*扩展。

在`throttle`绑定`editing`更新为`false`. 这似乎也解决了 Firefox 同时显示新文本和输入字段的问题。我已经粘贴了违规行，以及下面的更新小提琴：

`editing: ko.observable(false).extend({ throttle: 400 }),`

[http://jsfiddle.net/stevehnh/GNssr/2/](http://jsfiddle.net/stevehnh/GNssr/2/)

# javascript - 如何根据使用 jQuery 一次删除的类来强制执行条件

> ID：14482207
> 
> 赞同：0
> 
> 时间：2013-01-23T14:35:58.373
> 
> 标签：javascript, jquery, timeout, settimeout, addclass

我有一些问题。我需要添加一些类来指定元素一段时间。当这个类在现场时，我想执行一个条件，但如果不是执行另一个条件。有什么不对劲，你能帮帮我吗？这是我的代码：

```
btn.live('click', function(e){
    info_board.addClass('animation_time');
    setTimeout(function(){
        info_board.removeClass('animation_time')
    }, 700);
    if (info_board.not('animation_time')){
        info_board.addClass('flying_info_board_out').removeClass('flying_info_board');
    }
    else if (info_board.hasClass('animation_time')){
        setTimeout(function(){
            info_board.addClass('flying_info_board_out').removeClass('flying_info_board');
        }, 500);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:38:47.593

使用时`.not()`，您仍然需要使用`.`选择器来定位一个类。所以使用：

```
if (info_board.not('.animation_time').length > 0){ 
```

`.length`之所以需要，是因为`.not()`返回一组匹配的元素，这是一个包含 0 个或多个项目的 jQuery 对象。但是 jQuery 对象在`if`声明中总是真实的。因此，您需要检查正确的事情，即检查从`.not()`该`.length`属性返回的匹配元素的数量。

同时，没有理由`else if`......只需使用`else`.

由于`.hasClass()`jQuery 的处理可能比 jQuery 少`.not()`，因此您不妨使用：

```
if (!info_board.hasClass("animation_time")) {
    // Your code from the if block
} else {
    // Your code from the else if block
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:39:31.957

您也可以使用[hasClass](http://api.jquery.com/hasClass/)：

```
if (! info_board.hasClass('animation_time')){ 
```

这样做的好处是您可以存储`animation_time`到变量中，而无需使用字符串连接来构建类名：

```
btn.live('click', function(e){
    var animClass = 'animation_time';
    info_board.addClass(animClass );
    setTimeout(function(){
        info_board.removeClass(animClass)
    }, 700);
    if (!info_board.hasClass(animClass)){
        info_board.addClass('flying_info_board_out').removeClass('flying_info_board');
    }
    else {
        setTimeout(function(){
            info_board.addClass('flying_info_board_out').removeClass('flying_info_board');
        }, 500);
    }
}); 
```

# mysql - 用户分组记录 MySQL/PHP

> ID：14482208
> 
> 赞同：2
> 
> 时间：2013-01-23T14:36:01.930
> 
> 标签：mysql, sql, greatest-n-per-group

我正在尝试从数据库中获取最后一条消息并按用户分组

[http://i.stack.imgur.com/Wjzin4.png](http://i.stack.imgur.com/Wjzin4.png)

```
$query = $this->query("SELECT * FROM `messages` 
WHERE `receiver` = '763' 
GROUP BY `sender` 
ORDER BY `id` DESC 
LIMIT 0, 50"); 
```

输出：

[http://i.stack.imgur.com/GLhyan.png](http://i.stack.imgur.com/GLhyan.png)

所以有问题..应该是**e**而不是**d**和**c**而不是**a**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:37:46.247

```
SELECT  a.*
FROM    messages a
        INNER JOIN
        (
            SELECT  sender, MAX(ID) MAX_ID
            FROM    messages
            GROUP   BY sender
        ) b ON a.sender = b.sender AND
                a.id = b.MAX_ID
// WHERE clause...
// ORDER BY ....
// LIMIT  ..... 
```

[SQLFiddle 演示链接](http://www.sqlfiddle.com/#!2/88d32/1)

# ruby-on-rails - 在 Rails 中比较两个数据集的更好方法？

> ID：14482209
> 
> 赞同：2
> 
> 时间：2013-01-23T14:36:07.753
> 
> 标签：ruby-on-rails, rails-activerecord

我遇到了一个棘手的挑战。让我解释一下我正在努力实现的目标。如果用户使用 Facebook 登录我的应用程序，我会抓取他们所有的 Facebook 好友 UID 并将其存储为用户“facebook_friends”。然后，一旦登录，用户会看到即将发生的事件列表，我想检查每个事件是否有任何参与者与用户的 facebook 朋友的 UID 匹配并将其突出显示给他们。

我选择创建 Event.rb 模型，如下所示：

```
class Event < ActiveRecord::Base

  #  id                  :integer(11)

  has_many :attendances, as: :attendable
  has_many :attendees

  def which_facebook_friends_are_coming_for(user)
    matches = []
    self.attendees.each do |attendee|
      matches << user.facebook_friends.where("friend_uid=?", attendee.facebook_id)
    end
    return matches
  end

end 
```

你可以看到我已经创建了**which_facebook_friends_are_coming_for(user)**方法，但它让我觉得效率低得令人难以置信。当我从控制台运行它时，它确实可以工作，但是如果我尝试以任何形式（如 YAML）转储它，我会被告知**can't dump anonymous module**。我假设这是因为现在“匹配”持有者不是这样的类（当它应该是 FacebookFriends 时）。

必须有更好的方法来做到这一点，我喜欢一些建议。

作为参考，其他类如下所示：

```
class User < ActiveRecord::Base
  #  id                  :integer(11)

  has_many :attendances, foreign_key: :attendee_id, :dependent => :destroy
  has_many :facebook_friends

end

class FacebookFriend < ActiveRecord::Base
  #  user_id             :integer(11)
  #  friend_uid          :string
  #  friend_name         :string

  belongs_to :user

end

class Attendance < ActiveRecord::Base
  #  attendee_id         :integer(11)
  #  attendable_type     :string
  #  attendable_id       :integer(11)

  belongs_to :attendable, polymorphic: true
  belongs_to :attendee, class_name: "User"

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:34:17.027

类似的东西怎么样：

```
def which_facebook_friends_are_coming_for(user)
  self.attendees.map(&:facebook_id) & user.facebook_friends.map(&:friend_uid)
end 
```

& 运算符只是返回两个数组的交集

# svn - svn登录复制的文件给出无法找到存储库位置

> ID：14482210
> 
> 赞同：0
> 
> 时间：2013-01-23T14:36:15.140
> 
> 标签：svn, copy, repository

我有一组文件，我在 SVN 存储库中复制和重命名这些文件，以便尽可能多地保留文件历史记录。除了从源复制到目标之外，我已经有了新形式的新文件，并且在另一个位置对其内容进行了一些更新。我通过从新文件顶部的另一个位置复制新文件的更新版本来对文件应用更改。所以序列看起来像：

```
# Copy and rename the files within svn
svn cp <old-directory><old-file-name> <new-directory>/<new-filename>

# Copy and update version of the new file in place
cp <updated-directory>/<new-filename> <new-directory>/<new-filename> 
```

然后我可以查看文件的状态，我得到：

```
A  +    <new-directory>/<new-filename> 
```

我理解的意思是*这个文件将被移动（提交后）*

顺便说一句，我复制而不是移动的原因是代码相当关键，因此我们希望分阶段进行移动。

在某些情况下，`<old-directory>`它与 the 相同，`<new-directory>`因此只是名称更改和一些内部更改。对这些文件执行 a`svn log`会给出正常的日志历史记录。但是在其他情况下，复制文件时，文件`<new-directory>`不存在，我不得不在 svn 中创建一个新目录，我使用的是：

```
svn mkdir <new-directory> 
```

这些文件和目录也显示`A +`如下：

```
A       <new-directory>
A  +    <new-directory>/<new-filename-one>
A  +    <new-directory>/<new-filename-two> 
```

虽然当我尝试`svn log`对这些文件执行操作时，我收到以下错误消息：

```
svn: Unable to find repository location for '<new-directory>/<new-filename>' in revision 0 
```

我不确定我是否在这里犯了错误：我是否应该`svn mkdir`在将文件添加到目录之前提交？也许在我提交所有内容后它会自行解决？我还没有提交文件，因为我并不特别想深入一个我必须解开的漏洞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:04:01.253

通常，如果您在 Subversion 中创建一个新目录，并将文件添加到该目录中，则`svn status`只会显示您正在添加一个新文件**和**该目录。

```
$ svn mkdir foo
A       foo

$ cd foo
$ touch bar fu barfu
$ svn add *
A       bar
A       fu
A       barfu

$ cd ..
$ svn status
A       foo
A       foo\bar
A       foo\fu
A       foo\barfu 
```

请注意，我的状态显示我正在添加目录`foo`和该目录下的三个文件。

当我尝试将文件复制到不存在的目录时，出现错误`svn: E155007: Path '<myNewDir>' is not a directory`，因此我必须先创建该目录。

所以，我想问题是你的***完整***`svn status`是什么样的？它是否包含新目录，还是仅包含您移动的文件？

另外，您的目录名称是否可能以`http://`or开头，`foo://`而这就是混淆 Subversion 的原因吗？

您的错误信息是：

```
svn: Unable to find repository location for '<new-directory>/<new-filename>' in revision 0 
```

我注意到*`revision 0`*最后，它谈论的是*存储库位置*，看起来它试图访问的不是您的本地工作目录，而是一个 URL。

# full-text-search - 如何使用 Lucene .NET 进行私有关键字搜索

> ID：14482215
> 
> 赞同：1
> 
> 时间：2013-01-23T14:36:45.547
> 
> 标签：full-text-search, lucene.net, lucene

我正在将我的 MVC 应用程序（使用 MySql）中的全文搜索更改为 Lucene .NET。我的个性化搜索有一些我在 Lucene 中无法重现的怪癖。

大的是这样的：

客户 1 在他的联系人列表中有客户 2，并为他分配了一个关键字，比如说“妈妈”。这是一个私人关键字，只有客户 1 可以看到，并且仅在客户 1 搜索时有效。

客户 1 搜索“妈妈”：

*   客户 2
*   产品 3
*   ETC..

客户 2 搜索“妈妈”：

*   产品 3
*   ETC..

基本上，它是一个带有用户标识符的标签。

我如何在 Lucene 中做到这一点？

我能想到的唯一方法是为每个用户使用文档中的关键字创建一个私有索引，并使用我的标准索引和用户私有索引进行搜索。问题是我最终会得到千分之一的索引......我不知道这是否真的有效。

有没有办法在文档的字段中设置一些东西，以便我可以保存用户 ID 并仅在 id 匹配时在那里搜索？

谢谢

编辑：

要求是将关键字“MOM”添加到文档“客户 2”中，但我只能在客户 1 搜索时使用该关键字。如果客户 2 搜索自己，它将使用除关键字 one 之外的所有其他字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:11:22.993

一种方法是向每个文档添加一个字段，该字段同时包含客户 ID 和他们的私有关键字，因此您最终会索引*Customer1:mom*之类的内容。每次用户搜索私人关键字时，他们的客户 ID 和私人关键字都会包含在查询中（如上面的*Customer2:mom*）。

bugaboo 是您可能需要预先解析查询以转换私有关键字。如果在 UI 中单独输入私有关键字，则无需这样做。

根据您的设置，此方法可能需要向索引添加更多字段，但至少它可能仍然是 1 个索引，而不是数千个。

# c# - 证书过期，更新。现在得到这个错误：服务器没有识别 http Header SOAP Action 的值

> ID：14482216
> 
> 赞同：1
> 
> 时间：2013-01-23T14:36:48.760
> 
> 标签：c#, web-services, sharepoint, soap

我有一个带有证书的安全网络服务。这些网络服务一直在工作，但是在证书过期和更新后，它就不再工作了。我有一个测试网络服务工具来检查网络服务是否正常工作。当我测试它时，其中一个 webmethods 正在工作，另一个给我一个错误。

当我在运行 web 服务的本地服务器上的浏览器中输入 web 服务 url 时，它是可访问的。我可以看到这个网络服务中的所有网络方法。

1 个网络方法“HelloWorld”正在工作。

其他 1 个网络方法“copyIntoItems”不起作用。Web 方法“copyIntoItems”Web 方法将文件复制到 SharePoint 门户。它一直在工作，没有任何改变（只有证书更新）。此网络方法返回以下错误：

**服务器无法识别 http Header SOAP Action 的值。**

我检查了旧证书的位置。它位于本地计算机上的个人文件夹中。我已经删除了旧的并导入了新的。而已。

有人能告诉我为什么我会遇到这个问题吗？

[图像肥皂测试工具](http://i.stack.imgur.com/vi8U6.jpg)

# r - 在“R”中更改 nls.lm() 中的目标函数

> ID：14482220
> 
> 赞同：3
> 
> 时间：2013-01-23T14:37:08.323
> 
> 标签：r, nonlinear-functions, nonlinear-optimization

我正在使用函数 nls.lm {package: minpack.lm} 来优化水文模型的参数化。该功能运行良好，但我想使用另一个`objective function (OF)`. 通常，nls.lm 中的目标函数“fn”定义为

```
A function that returns a vector of residuals, the sum square of which 
is to be minimized. The first argument of fn must be par. 
```

现在我想使用`Nash-Sutcliff-Efficiency`定义为

```
NSE <- 1 - (sum((obs - sim)^2) / sum((obs - mean(obs))^2)) 
```

或其他OF。问题是`nls.lm`最小化表达式`sum(x)^2`，只有`x`是可修改的。我知道`best fit NSE = 1`. 因此`1 - NSE`产生了一个真正的最小化问题。

顺便说一句：`nls.lm` [帮助页面](http://www.inside-r.org/packages/cran/minpack.lm/docs/nls.lm)中的示例 1是一个很好的示例；那里

```
observed - getPred(p,xx) 
```

被最小化，实际上意味着什么

```
sum ( observed - getPred(p,xx) )^2 
```

被`nls.lm`函数最小化，而`getPred(p,xx)`返回`sim`.

任何建议都会有所帮助。提前致谢。米查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:55:02.153

nls.lm（以及相关的函数 nls 和 nlsLM）旨在最小化残差的平方和。对于您要解决的问题，我会尝试使用通用最小化器。

如果问题“不太难”（也就是说，有一个全局最小值，是平滑的），您可以尝试对其应用“优化”（我会先尝试“Nelder-Mead”和“BFGS”选项） ，或包'minqa'中的'bobyqa'函数，以及其他函数。

如果问题需要全局优化器，您可以尝试使用“GenSA”包中的“GenSA”函数、“rgenoud”包中的“genoud”函数或“DEoptim”包中的“DEoptim”函数，以及其他选项。Journal of Statistical Software 即将发表关于“R 中的全局优化”的评论，这将对适用函数进行更完整的概述。

# ruby - Ruby shell 可见性

> ID：14482225
> 
> 赞同：0
> 
> 时间：2013-01-23T14:37:28.590
> 
> 标签：ruby, bash

我正在尝试在 Ruby 中使用 SSH。我知道有一个 SSH 模块，但我不想使用它。我觉得它笨拙且令人困惑。

我能够很好地使用 SSH。然而，我有一个抱怨，我希望有人能提供一些建议。

在 Bash 中，我可以这样做：

```
echo "PASSWORD" | ssh SERVER "sudo -S cat /etc/sudoers" 
```

当我执行 ps -ef 时，它会显示为：

```
USER    8212  8837  0 09:31 pts/7    00:00:00 ssh SERVER sudo -S cat /etc/sudoers 
```

执行 ps -ef 时不显示密码。

当我在 ruby​​ 中做同样的事情时，它正在回显密码：

```
%x[echo "#{password}" | ssh -q -o BatchMode=yes SERVER "sudo -S cat /etc/sudoers 2>/dev/null"].split("\n") 
```

使用 ps -ef 在服务器上显示：

```
sh -c echo "PASSWORD" | ssh -q -o BatchMode=yes SERVER "sudo -S cat /etc/sudoers 2>/dev/null" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:18:19.677

尝试使用 Ruby[`Open3.popen3`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen3)或[`Open3.capture3`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-capture3). 但是，我认为它不会起作用，因为`ssh`它不接受来自 STDIN 的密码，并且会重新连接来自键盘的输入，至少这是我在 CentOS 和 Mac OS 上遇到的行为。

这里有一些代码来测试它：

```
require 'open3'

host = 'myhost'
user = 'myname'
password = 'mypassword'

stdin, stdout, stderr, wait_thr = Open3.popen3(ENV, %Q[ssh #{host} "cat /home/#{user}/.bash_profile"])
pid = wait_thr[:pid]
stdin.puts password
stdin.close

puts stdout.read
stdout.close

puts stderr.read
stderr.close

exit_status = wait_thr.value 
```

运行它会显示 ssh 提示，即使`stdin`通道上的密码是“puts”，然后在我输入密码后输出：

```
myname@myhost's password: 
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
  . ~/.bashrc
fi

# User specific environment and startup programs
set editing-mode vi

# complete -W "$(echo $(grep '^ssh ' .bash_history | sort -u | sed 's/^ssh //'))" ssh
complete -W "$(echo $(grep '^ssh ' .bash_history | sort -u | sed 's/^ssh //' | sed 's/^.+@//'))" ssh

PATH=$HOME/bin:$PATH

export PATH
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

虽然[Net::SSH](http://net-ssh.rubyforge.org/)可能“笨拙”，但它旨在让您在 ssh 中干净利落地解决此问题。我们在内部广泛使用 Net::SSH，它非常适合我们的需求。

# html - 如何获得两种颜色之间的颜色？

> ID：14482226
> 
> 赞同：76
> 
> 时间：2013-01-23T14:37:33.973
> 
> 标签：html, css

我有两种颜色：

```
#15293E
#012549 
```

我怎样才能找到它们中间的颜色？有没有办法做这个计算？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-23T14:51:43.867

正如李斯特先生刚才所说，使用任何编程语言都可以很容易地自动计算：

1.  将您的两种颜色分成[红色、绿色、蓝色](http://en.wikipedia.org/wiki/RGB_color_model)的 3 个颜色编号：(r1,g1,b1) 和 (r2,g2,b2)。

    *   例如#15293E、#012549 变为（“15”、“29”、“3E”）、（“01”、“25”、“49”）

2.  将每个颜色字符串转换为整数，明确指定您正在解析基于[十六进制的](http://en.wikipedia.org/wiki/Hexadecimal)数字表示。
    *   例如 ("15", "29", "3E") 变成 (21, 41, 62)

3.  计算平均值 (r',g',b') = ( (r1+r2)/2, (g1+g2)/2, (b1+b2)/2 )。
    *   例如 ( (21+1)/2, (41+37)/2, (62+73)/2) = (11, 39, 67)

4.  再次将它们转换为 strings ，明确指定您正在生成**两位**十六进制表示（必要时用零填充）。
    *   例如 (11, 39, 67) -> ("0B", "27", "43")

5.  连接一个哈希字符，后跟 3 个字符串
    *   例如（“0B”、“27”、“43”）-> **“#0B2743”**

**编辑：**正如我最初所说的那样，实施并不“非常容易”。[我花时间在 Programming-Idioms 上](http://www.programming-idioms.org/idiom/154/halfway-between-two-hex-color-codes)用多种语言编写代码。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-01-23T14:41:49.653

我使用这个网站为我完成这项任务：[ColorBlender](http://meyerweb.com/eric/tools/color-blend/)。

中间色将是`#0B2744`。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-01-23T15:19:27.100

## 少

如果您使用最新的[LESS CSS 预处理器](http://lesscss.org/)，那么您会注意到有一个函数 ( `mix()`) 可以执行此操作：

```
mix(#15293E, #012549, 50%) 
```

输出：`#0b2744`.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-23T15:38:17.417

如果您需要一般地执行此操作，并期望在更多情况下中间颜色在视觉上是准确的（即中间点的视觉颜色和色调对人类观察者来说应该“看起来正确”），那么如上所述，您可能想要在计算中点之前从 RGB 转换为 HSV 或 HSL，然后再转换回来。这可能与直接平均 RGB 值有很大不同。

这是我在简短搜索中找到的用于与 HSL 进行转换的一些 JavaScript 代码，经过简短检查后，它似乎做了正确的事情：

~~github.com/mjackson/mjijackson.github.com/blob/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.txt~~

[https://web.archive.org/web/20170919064926/https://github.com/mjackson/mjijackson.github.com/blob/master/2008/02/rgb-to-hsl-and-rgb-to- hsv-color-model-conversion-algorithms-in-javascript.txt](https://web.archive.org/web/20170919064926/https://github.com/mjackson/mjijackson.github.com/blob/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.txt)

只需将 rgbToHsl 函数应用于您的两个 r,g,b 颜色向量，平均两个结果向量，然后将 hslToRgb 应用于那个。. .

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-05-25T04:25:05.107

## Handy-Dandy 功能

```
function padToTwo(numberString) {
    if (numberString.length < 2) {
        numberString = '0' + numberString;
    }
    return numberString;
}

function hexAverage() {
    var args = Array.prototype.slice.call(arguments);
    return args.reduce(function (previousValue, currentValue) {
        return currentValue
            .replace(/^#/, '')
            .match(/.{2}/g)
            .map(function (value, index) {
                return previousValue[index] + parseInt(value, 16);
            });
    }, [0, 0, 0])
    .reduce(function (previousValue, currentValue) {
        return previousValue + padToTwo(Math.floor(currentValue / args.length).toString(16));
    }, '#');
}

console.log(hexAverage('#111111', '#333333')); // => #222222
console.log(hexAverage('#111111', '#222222')); // => #191919
console.log(hexAverage('#111111', '#222222', '#333333')); // => #222222
console.log(hexAverage('#000483', '#004B39')); // => #00275e 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-06-16T22:36:47.920

像这样：

```
function colourGradientor(p, rgb_beginning, rgb_end){

    var w = p * 2 - 1;

    var w1 = (w + 1) / 2.0;
    var w2 = 1 - w1;

    var rgb = [parseInt(rgb_beginning[0] * w1 + rgb_end[0] * w2),
        parseInt(rgb_beginning[1] * w1 + rgb_end[1] * w2),
            parseInt(rgb_beginning[2] * w1 + rgb_end[2] * w2)];
    return rgb;
}; 
```

其中 p 是一个介于 0 和 1 之间的值，指定颜色应该在渐变中的距离，rgb_beginning 是起始颜色，rgb_end 是终止颜色。两者都是 [r,g,b] 数组，因此您必须先从十六进制转换。这是我认为来自 SASS 的 LESS 混合功能的简化版本。对于海报 p 将是 0.5

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-06T16:22:38.623

我刚刚写了一个计算两种颜色之间颜色的函数，所以如果有人需要它，我认为它很短且易读，它接受十六进制字符串中的两种颜色，以及要计算的颜色数量，返回颜色在十六进制字符串数组中

我从 [这里获取了 rgbToHex 和 hexToRgb 函数](https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb)

希望这可以帮助！

```
function rgbToHex(r, g, b) {
  return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
}

function hexToRgb(hex) {
  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result
    ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      }
    : null;
}

// returns an array of startColor, colors between according to steps, and endColor
function getRamp(startColor, endColor, steps) {
  var ramp = [];

  ramp.push(startColor);

  var startColorRgb = hexToRgb(startColor);
  var endColorRgb = hexToRgb(endColor);

  var rInc = Math.round((endColorRgb.r - startColorRgb.r) / (steps+1));
  var gInc = Math.round((endColorRgb.g - startColorRgb.g) / (steps+1));
  var bInc = Math.round((endColorRgb.b - startColorRgb.b) / (steps+1));

  for (var i = 0; i < steps; i++) {
    startColorRgb.r += rInc;
    startColorRgb.g += gInc;
    startColorRgb.b += bInc;

    ramp.push(rgbToHex(startColorRgb.r, startColorRgb.g, startColorRgb.b));
  }
  ramp.push(endColor);

  return ramp;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-14T10:29:38.610

我找到了一个执行此操作的 npm 模块：[https ://www.npmjs.com/package/color-between](https://www.npmjs.com/package/color-between)

这是一些示例用法：

```
const colorBetween = require('color-between');

// rgb format
colorBetween('rgb(255, 255, 255)', 'rgb(0, 0, 0)', 0.5, 'rgb');
// output: 'rgb(128, 128, 128)'

// rgba format
colorBetween('rgba(255, 255, 255, .2)', 'rgba(0, 0, 0, .8)', 0.5, 'rgb');
// output: 'rgba(128, 128, 128, 0.5)

// hex format
colorBetween('#fff', '#000', 0.5, 'hex');
// output: '#808080'

// mixed format
colorBetween('#fff', 'rgb(0, 0, 0)', 0.5, 'hsl');
output: 'hsl(0, 0%, 50%)' 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-23T14:48:05.650

如果您愿意，您可以使用 Windows 计算器自己完成。

1.  打开 Windows 计算器 > 查看 > 程序员
2.  选择十六进制选项
3.  输入十六进制值
4.  切换到 Dec 并记下给定的值
5.  对第二个十六进制值重复步骤 2-4
6.  通过将两个 Dec 数字相加并除以 2 来计算平均值
7.  在选择 Dec 选项的情况下将此值输入计算器，然后切换到十六进制选项，瞧

**例子：**

*   15293E (十六进制) = 1386814 (十二月)
*   012549 (十六进制) = 75081 (十二月)
*   中点 = (1386814+75081)/2
*   中点 = 730947 (DEC)
*   730947 (十二月) = 0B2743 (十六进制)
*   **#0B2743**

或如上所述使用 ColorBlender ;)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-27T19:00:25.087

在这里，我留下了我在打字稿应用程序中使用的代码

```
function mixHexColors(color1: string, color2: string) {
    const valuesColor1 = color1.replace('#', '').match(/.{2}/g).map((value) =>
        parseInt(value, 16)
    )
    const valuesColor2 = color2.replace('#', '').match(/.{2}/g).map((value) =>
        parseInt(value, 16)
    )
    const mixedValues = valuesColor1.map((value, index) =>
        ((value + valuesColor2[index]) / 2).toString(16).padStart(2, '')
    )
    return `#${mixedValues.join('')}`
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-05-27T15:43:00.250

这是一个 Python 版本。

```
# -*- coding: utf-8 -*-
"""jcolor_split.py splits 2 hex color values, HEX_COLOR_1 and HEX_COLOR_2, 
    printing the color halfway between the two colors
Usage:     jcolor_split.py HEX_COLOR_1 HEX_COLOR_2
Example: ./jcolor_split.py 3E599C      2E4892
"""
import sys

def jcolor_split(hex_color_1, hex_color_2):

    print()
    print (hex_color_1)
    r1s = hex_color_1[0:2]
    g1s = hex_color_1[2:4]
    b1s = hex_color_1[4:6]
    print(r1s,g1s,b1s)

    print()
    print (hex_color_2)
    r2s = hex_color_2[0:2]
    g2s = hex_color_2[2:4]
    b2s = hex_color_2[4:6]
    print(r2s,g2s,b2s)

    # convert rgb's to ints
    r1 = int(r1s, 16); g1 = int(g1s, 16); b1 = int(b1s, 16);
    r2 = int(r2s, 16); g2 = int(g2s, 16); b2 = int(b2s, 16);
    print()
    print(r1,g1,b1)
    print(r2,g2,b2)

    # get the average
    ra = int(round(float(r1+r2)/2))
    ga = int(round(float(g1+g2)/2))
    ba = int(round(float(b1+b2)/2))

    print()
    print(format(ra, 'x')+ format(ga, 'x')+ format(ba, 'x') )

NUM_ARGS = 2
def main():
    args = sys.argv[1:]
    if len(args) != NUM_ARGS or "-h" in args or "--help" in args:
        print (__doc__)
        sys.exit(2)
    jcolor_split(args[0], args[1])

if __name__ == '__main__':
    main()

sample_run = '''
PS C:\1d\JoeCodeswellHomePage> ./jcolor_split.py 3E599C      2E4892

3E599C
3E 59 9C

2E4892
2E 48 92

62 89 156
46 72 146

365097
PS C:\1d\JoeCodeswellHomePage> 
''' 
```

# android - 为什么我的画布循环看起来不流畅（Android）

> ID：14482227
> 
> 赞同：-1
> 
> 时间：2013-01-23T14:37:35.800
> 
> 标签：android, loops, bitmap, android-canvas

有没有更好的方法来循环移动画布 600x3840 像素？这是我到目前为止所做的

```
 imagetwo = Bitmap.createBitmap(BitmapFactory.decodeResource(this.getResources(), R.drawable.bckgr1));

    protected void onDraw(Canvas canvas) {
        canvas.drawBitmap(imagetwo, x,y, null);

    if (x==0){ 
        x=x-3; y=0;} 
    else 
    { x=x-3; y=0;  }

    if (x<-700)
    { x=0-3; y=0;} 
    else 
    { x=x-3; y=0;  } 
    invalidate();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:38:28.077

是的！使用动画师：

[http://developer.android.com/reference/android/animation/Animator.html](http://developer.android.com/reference/android/animation/Animator.html)

和一个 TranslateAnimation：

[http://developer.android.com/reference/android/view/animation/TranslateAnimation.html](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)

# php - 如何正确防止memcached“协议注入”？

> ID：14482228
> 
> 赞同：1
> 
> 时间：2013-01-23T14:37:36.497
> 
> 标签：php, python, security, memcached, libmemcached

我发现当我`\r\n`输入从 memcached 服务器获取值的 key 时，它可以用来注入 memcached 协议来运行另一个命令。以下是代码示例，

在 PHP 中：

```
<?php
$m = new Memcached();
$m->addServer('localhost', 11211);

$key = "foo\r\nset bar 0 10 10000\r\n";

echo $m->get($key);
echo $m->get($key); // <- hang here
?> 
```

在 Python 中：

```
import pylibmc

mc = pylibmc.Client(['127.0.0.1:11211'])

key = 'foo\r\nset bar 0 10 10000\r\n';
print mc.get(key)
print mc.get(key) # <- hang here 
```

如果`key`从用户那里读取，用户可以在 memcached 服务器中执行任意命令，例如运行`flush_all`以减慢网站速度或为另一个用户设置密码缓存。

为什么客户端库不去除这些非法字符？如何在我的代码中正确防止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T14:10:17.553

编码用户值（例如base64）并使用结果作为键，或者使用二进制协议。

# python - 为什么 python threading.Thread 对象有“开始”，但没有“停止”？

> ID：14482230
> 
> 赞同：4
> 
> 时间：2013-01-23T14:37:38.637
> 
> 标签：python, multithreading

python 模块[threading](http://docs.python.org/2/library/threading.html)有一个对象`Thread`用于在不同的线程中运行进程和函数。这个对象有`start`方法，但没有`stop`方法。我调用简单方法`Thread`时无法停止的原因是什么？`stop`我可以想象使用该`join`方法不方便的情况......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T14:45:16.220

`start`可以是通用的并且有意义，因为它只是触发线程的目标，但是通用的`stop`会做什么呢？根据您的线程正在做什么，您可能必须关闭网络连接、释放系统资源、转储文件和其他流，或任何数量的其他自定义、非平凡任务。任何可以以通用方式完成大部分这些事情的系统都会给每个线程增加如此多的开销，以至于它不值得，并且会非常复杂并且在特殊情况下会被击穿，几乎不可能工作和。您可以跟踪所有创建的线程，而无需`join`在主线程中调用它们，然后检查它们的运行状态并在主线程自行关闭时向它们传递某种终止消息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T20:28:21.623

绝对可以实现`Thread.stop`如下示例代码所示的方法：

```
import threading
import sys

class StopThread(StopIteration): pass

threading.SystemExit = SystemExit, StopThread

class Thread2(threading.Thread):

    def stop(self):
        self.__stop = True

    def _bootstrap(self):
        if threading._trace_hook is not None:
            raise ValueError('Cannot run thread with tracing!')
        self.__stop = False
        sys.settrace(self.__trace)
        super()._bootstrap()

    def __trace(self, frame, event, arg):
        if self.__stop:
            raise StopThread()
        return self.__trace

class Thread3(threading.Thread):

    def _bootstrap(self, stop_thread=False):
        def stop():
            nonlocal stop_thread
            stop_thread = True
        self.stop = stop

        def tracer(*_):
            if stop_thread:
                raise StopThread()
            return tracer
        sys.settrace(tracer)
        super()._bootstrap()

################################################################################

import time

def main():
    test = Thread2(target=printer)
    test.start()
    time.sleep(1)
    test.stop()
    test.join()

def printer():
    while True:
        print(time.time() % 1)
        time.sleep(0.1)

if __name__ == '__main__':
    main() 
```

该类`Thread3`的代码运行速度似乎比`Thread2`该类快大约 33%。

* * *

**附录：**

如果对 Python 的 C API 和模块的使用有足够的了解`ctypes`，就可以编写一种更有效的方法来在需要时停止线程。使用的问题`sys.settrace`是跟踪功能在每条指令之后运行。如果在需要中止的线程上引发异步异常，则不会导致执行速度损失。以下代码在这方面提供了一些灵活性：

```
#! /usr/bin/env python3
import _thread
import ctypes as _ctypes
import threading as _threading

_PyThreadState_SetAsyncExc = _ctypes.pythonapi.PyThreadState_SetAsyncExc
# noinspection SpellCheckingInspection
_PyThreadState_SetAsyncExc.argtypes = _ctypes.c_ulong, _ctypes.py_object
_PyThreadState_SetAsyncExc.restype = _ctypes.c_int

# noinspection PyUnreachableCode
if __debug__:
    # noinspection PyShadowingBuiltins
    def _set_async_exc(id, exc):
        if not isinstance(id, int):
            raise TypeError(f'{id!r} not an int instance')
        if not isinstance(exc, type):
            raise TypeError(f'{exc!r} not a type instance')
        if not issubclass(exc, BaseException):
            raise SystemError(f'{exc!r} not a BaseException subclass')
        return _PyThreadState_SetAsyncExc(id, exc)
else:
    _set_async_exc = _PyThreadState_SetAsyncExc

# noinspection PyShadowingBuiltins
def set_async_exc(id, exc, *args):
    if args:
        class StateInfo(exc):
            def __init__(self):
                super().__init__(*args)

        return _set_async_exc(id, StateInfo)
    return _set_async_exc(id, exc)

def interrupt(ident=None):
    if ident is None:
        _thread.interrupt_main()
    else:
        set_async_exc(ident, KeyboardInterrupt)

# noinspection PyShadowingBuiltins
def exit(ident=None):
    if ident is None:
        _thread.exit()
    else:
        set_async_exc(ident, SystemExit)

class ThreadAbortException(SystemExit):
    pass

class Thread(_threading.Thread):
    def set_async_exc(self, exc, *args):
        return set_async_exc(self.ident, exc, *args)

    def interrupt(self):
        self.set_async_exc(KeyboardInterrupt)

    def exit(self):
        self.set_async_exc(SystemExit)

    def abort(self, *args):
        self.set_async_exc(ThreadAbortException, *args) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T14:40:34.107

以可靠的方式杀死线程并不是很容易。想想所需的清理工作：哪些锁（可能与其他线程共享！）应该自动释放？否则，你很容易陷入僵局！

更好的方法是自己*实现适当的关闭*，然后设置

```
mythread.shutdown = True
mythread.join() 
```

停止线程。

当然你的线程应该做类似的事情

```
while not this.shutdown:
    continueDoingSomething()
releaseThreadSpecificLocksAndResources() 
```

经常检查关机标志。或者，您可以依靠特定于操作系统的信号机制来*中断*线程，捕获中断，然后进行*清理*。

*清理*是最重要的部分！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T14:41:49.577

停止线程应该由程序员来实现。例如设计你的线程来检查它是否有任何要求它立即终止的请求。如果 python（或任何线程语言）允许您停止线程，那么您将拥有刚刚停止的代码。这很容易出错，等等。

想象一下，如果您的线程在您杀死/停止它时将输出写入文件。然后该文件可能未完成和损坏。但是，如果您简单地向您希望它停止的线程发出信号，那么它可以关闭文件，删除它等。您，程序员，决定如何处理它。Python 无法为您猜测。

我建议阅读多线程理论。一个不错的开始：[http ://en.wikipedia.org/wiki/Multithreading_(software)#Multithreading](http://en.wikipedia.org/wiki/Multithreading_(software)#Multithreading)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T14:40:24.677

在某些平台上，您不能强制“停止”线程。这样做也很糟糕，因为那时线程将无法清理分配的资源。当线程正在做一些重要的事情时，它可能会发生，比如 I/O。

# hadoop - 我们可以使用 sync() 或 syncFs() 方法附加到现有文件中吗？

> ID：14482231
> 
> 赞同：0
> 
> 时间：2013-01-23T14:37:39.330
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我在 hadoop 中制作了自己的 jar，并且自己的 shell 脚本 shell 脚本运行我的 jar

我的 hadoop jar 工作是，删除上一个。dir 如果已经存在，因为 hadoop 不支持 APPEND 并创建新目录

但问题是因为我的服务继续运行，每一秒 jar 都运行，我在 HDFS 上看不到任何目录，因为作业正在运行。

我只想附加我现有的目录。

# eclipse - Eclipse RCP 使用 InterruptedException 取消作业

> ID：14482232
> 
> 赞同：1
> 
> 时间：2013-01-23T14:37:43.013
> 
> 标签：eclipse, rcp, jobs, interrupted-exception

在 Eclipse RCP 3.7 中是否可以使用 InterruptedException 取消长时间运行的作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:15:04.497

处理作业取消的首选方法是`IProgressMonitor.isCanceled()`使用传递给作业的进度监视器定期检查作业的实施。如果`isCanceled()`返回 true，您应该使用`return Status.CANCEL_STATUS`.

话虽如此，您可以抛出异常，但 Eclipse 的错误处理程序随后会显示错误消息。通常，这不是您想要的。

此外，您要做的最后一件事是终止作业线程，因为它在您的 RCP 应用程序中运行的作业之间共享。

# c# - 正在从错误的线程调用对此控件执行的操作。使用 Control 编组到正确的线程

> ID：14482234
> 
> 赞同：1
> 
> 时间：2013-01-23T14:37:51.003
> 
> 标签：c#, multithreading

在下面的代码中有一个错误，如下所示：

> 正在从错误的线程调用对此控件执行的操作。使用 Control.Invoke 或 Control.BeginInvoke 编组到正确的线程以执行此操作。

在添加`childNode()`方法中。我们在执行此操作时收到此错误`this.Nodes.Insert(pos, oPart);`。你能帮我解决这个问题吗？

```
public Part GetChildPart(string sKey)
{
    foreach (TreeNode node in this.Nodes)
    {
        Part child = node as Part;
        if (child.Text == sKey) return child;

    }

    //Part Opart = new Part();
    //Opart.Text = sKey;
    //return Opart;

     return null;
} 
public bool AddChildPart(Part oPart)
{
    int pos = 0; // Use for alpha sorted the node

    foreach (TreeNode node in this.Nodes)
    {
        if (node.Tag.ToString() == oPart.Tag.ToString())
        {
            // Avoid duplicate data
            return false;
        }
        else
        {
            if (node.Tag.ToString().CompareTo(oPart.Tag.ToString()) < 0)
            {
                pos++;
            }
        }
    }

    //if (this.TreeView.InvokeRequired)
    //    {
    //        this.TreeView.Invoke((MethodInvoker)delegate()
    //             {
    //                 //inTreeNode.Nodes.Add(tNode2);
    //                 this.Nodes.Insert(pos, oPart//            
    }
    //             );
    //}

    //this.Nodes.Add(oPart);
    this.Nodes.Insert(pos, oPart);--error is here

    //TreeView.Nodes.
    return true;
} 
```

提前致谢！

# c# - 程序集不在 GAC 中，但 gacutil 显示它在那里

> ID：14482236
> 
> 赞同：4
> 
> 时间：2013-01-23T14:38:01.367
> 
> 标签：c#, .net, gac, .net-assembly, global-assembly-cache

我注意到我的系统上有一些关于全局程序集缓存 (GAC) 的奇怪行为。我感兴趣的程序集是 log4net Version= **1.2.11.0**

的输出`gacutil /l "log4net"`是：

> C:\Windows\system32>gacutil /l "log4net" Microsoft (R) .NET 全局程序集缓存实用程序。版本 4.0.30319.1 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 全局程序集缓存包含以下程序集：
> log4net、Version=1.2.10.0、Culture=neutral、PublicKeyToken=1b44e1d426115821、processorArchitecture=MSIL
> log4net、Version=1.2.11.0、Culture=neutral、PublicKeyToken=669e0ddf0bb1aa2a、processorArchitecture=MSIL
> 
> 项目数 = 2

然而，通过 explorer shell（重启前后）查看 GAC 只显示一个版本：

![在此处输入图像描述](../Images/7c739f9216ea4e9a4d60664821353219.png)

更复杂的是，我的应用程序无法解析程序集，但是当我将它放入*应用程序库*（bin 文件夹）时可以正常工作。根据[这篇文章](http://msdn.microsoft.com/en-us/library/15hyw9x3%28v=vs.71%29.aspx)，GAC 将在应用程序库**之前**进行探测- 这将指向程序集不在 GAC 中。

`log4net Version=1.2.11.0`在 GAC 中也是如此吗？如果是这样，为什么我的应用程序找不到它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T14:59:06.380

您正在查看 .NET 2.0 GAC，但是，log4net v1.2.11.0 是一个 .NET 4 程序集。.NET 4 有自己的 GAC，位于`%winddir%\Microsoft.NET\Assembly`. 检查那里的 GAC_MSIL 目录，我敢打赌你会找到它。

# opengl - glutMainloop() 和 OpenGL 中其他函数的使用

> ID：14482242
> 
> 赞同：0
> 
> 时间：2013-01-23T14:38:21.227
> 
> 标签：opengl

我真的对 glutMainloop() 函数感到困惑。该函数的循环中使用了哪些函数？我认为使用了 glutIdleFunc()，但我见过不使用此功能的代码。

```
#include <GL/glut.h>

static void RenderSceneCB()
{
    glClear(GL_COLOR_BUFFER_BIT);
    glutSwapBuffers();
}

static void InitializeGlutCallbacks()
{
    glutDisplayFunc(RenderSceneCB);
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGBA);
    glutInitWindowSize(1024, 768);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("Tutorial 01");

    InitializeGlutCallbacks();

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

    glutMainLoop();

    return 0;
} 
```

同样在这段代码中，为什么使用 InitializeGlutCallbacks()？为什么不只是 glutDisplayFunc(RenderSceneCB); 写而不是 InitializeGlutCallbacks()？最后为什么 InitializeGlutCallbacks() 是静态的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:03:55.297

您真正需要的唯一回调（当发生某些事情时调用的函数）是 glutDisplayFunc，当您需要编写应用程序将要显示的内容时调用它（这通常每秒执行大约 60 次，但取决于一个数字事物，例如计算机性能或垂直同步）。

glutIdleFunc 是一个在无事可做时调用的函数（这就是它空闲的原因），但这不是必需的。根据您设计应用程序的方式，将需要此功能，但正如您在上述程序中看到的那样，主要是可选的。

至于它为什么调用 InitializeGlutCallbacks()，这就是我们所说的“良好的编程实践”：同样，这不是必需的，但你最好将所有初始化函数收集在一个函数中，这样在阅读代码时会有所帮助。

最后，除了阻止其他模块访问它们之外，我绝对没有任何理由将这些函数设为静态。您可以尝试删除“静态”，您会看到它完全一样。

编辑：解释为我猜你不知何故被迫使用过剩，但我同意其他海报，如果你可以选择，GLFW 是一个更好的选择。

# visual-studio-2010 - 在 Visual Studio 2010 中查看、构建和调试 Borland C++ Builder 项目

> ID：14482244
> 
> 赞同：1
> 
> 时间：2013-01-23T14:38:22.290
> 
> 标签：visual-studio-2010, c++builder, c++builder-2006

我想使用 VC2010 来处理我拥有的 BCB 2006 项目。我不想将代码转换为 VC，因为需要移植很多 UI。我只想能够从 VS IDE 查看构建和调试。

查看：我假设一旦我为本地 BCB 代码创建了 VS 项目，就可以查看，尽管 UI 编辑器不会。

构建：我发现了 VS 的“C++ Native Multi-Targeting”选项，虽然我不确定在那里设置不同的选项（水仙花被提到是有帮助的，尽管我不确定附加值是什么超过现有功能）。

调试：完全不确定如何在 VS 中执行此操作。有一些独立的控制台工具可以转换调试信息文件，例如 tds2pdb（文档链接在哪里？）。

如果有人有这样的任务经验，我会感谢你的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:15:30.140

不可以。C++ Builder IDE 是一个独立的、独立的 Win32 可执行文件，与 VC 或 Visual Studio 无关，不能以任何方式嵌入其中。您必须使用 C++ Builder 本身来查看、构建和调试它的应用程序；作为 Visual Studio 的一部分，没有办法这样做。

如果根本涉及任何 UI，即使简单地使用 C++ Builder 代码也很可能是不可能的。C++ Builder 的 GUI 组件基于它与 Delphi 共享的 Visual Component Library (VCL)，因此它使用 Delphi Object Pascal 编译器来构建应用程序的这些部分。还有一些数据类型和集合操作是 VC 不理解或不支持的，还有一些特殊的`#pragmas`和`#hppemit`语句是 VC 编译器不能使用的。

# c# - 调试时是否可以让 VS2010 localhost 响应 LAN 请求？

> ID：14482246
> 
> 赞同：0
> 
> 时间：2013-01-23T14:38:26.420
> 
> 标签：c#, visual-studio-2010, debugging

我正在尝试在我的 iOS 应用程序和我的新服务器代码之间测试一些新代码。如果我可以在调试时向本地测试服务器提交请求，这将大大简化事情，这样我就可以快速修复问题。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:00:35.937

这在设计上是不可能的——这是一件好事。

但是，如果您一心想要这样做，您可以通过在开发机器上设置一个代理来实现，该代理将根据需要将流量重定向到您的本地主机。

此处描述了完整的详细步骤 - [http://encosia.com/using-an-iphone-with-the-visual-studio-development-server/](http://encosia.com/using-an-iphone-with-the-visual-studio-development-server/)。

概括

1.  在开发机器上获取 Fiddler/安装 Fiddler - [http://www.fiddler2.com](http://www.fiddler2.com/fiddler2/version.asp)
2.  确定提琴手端口并确保将其配置为接受连接。
3.  确定你的IP地址。
4.  在 iphone 上，使用步骤 2/3 中的信息配置代理。（连接 > 代理 > 手动）。
5.  您可能需要一个句点（。）到地址，例如，`http://localhost.:4543/website`使其工作。

# html - 在 CSS 中设置图标的大小

> ID：14482249
> 
> 赞同：46
> 
> 时间：2013-01-23T14:38:32.067
> 
> 标签：html, css

我正在研究 JSF，并且正在使用此代码来显示错误框。

```
<div class="pnx-msg pnx-msg-warning clearfix">
    <i class="pnx-msg-icon pnx-icon-msg-warning"/>
</div> 
```

`<i class.../>`零件导入一个警告图标。它的默认大小是 36 像素，但我需要将其调整为 24 像素。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2014-04-02T11:50:46.930

您可以使用**字体大小**更改图标的大小，而不是设置图标的高度和宽度。这是您的操作方法：

```
<i class="fa fa-minus-square-o" style="font-size: 0.73em;"></i> 
```

有 4 种方法可以指定图标的尺寸。

**px ：**为您的图标提供固定像素

**em ：**相对于您当前字体的尺寸。假设你当前的字体是 12 像素，那么 1.5em 将是 18 像素（12 像素 + 6 像素）。

**pt ：**代表点。主要用于印刷媒体

**%：**百分比。指图标的大小基于其原始大小。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-23T15:03:31.860

您可以覆盖框架 CSS（我猜您正在使用一个）并根据需要设置大小，如下所示：

```
.pnx-msg-icon pnx-icon-msg-warning {
    width: 24px !important;
    height: 24px !important;
} 
```

“！important”属性将确保您的代码优先于框架的代码。确保您覆盖了正确的属性，我不知道框架是如何工作的，这只是 !important 用法的一个示例。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-24T08:46:28.877

更好的方法是使用“背景大小”。

```
.pnx-msg-icon .pnx-icon-msg-warning{
background-image: url("../pics/edit.png");
background-repeat: no-repeat;
background-size: 10px;
width: 10px;
height: 10px;
cursor: pointer;
} 
```

即使您的图标尺寸大于 10 像素，它也将是 10 像素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-19T14:32:38.237

这对我有用，试试吧。

```
height:1rem;
font-size: 3.75em; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-22T05:36:28.427

使用 CSS 样式中的以下代码自定义图标大小

```
.pnx-msg i{
    font-size: 0.9em;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-14T18:37:32.037

这些都不适合我。

```
.fa-volume-down {
    color: white;
    width: 50% !important;
    height: 50% !important;
    margin-top: 8%;
    margin-left: 7.5%;
    font-size: 1em;
    background-size: 120%;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-23T15:43:18.230

有趣的是，调整填充似乎可以做到这一点。

```
.arrow {
  border: solid rgb(2, 0, 0);
  border-width: 0 3px 3px 0;
  display: inline-block;
}

.first{
  padding: 2vh;
}

.second{
  padding: 4vh;
}

.left {
    transform: rotate(135deg);
    -webkit-transform: rotate(135deg);
 }
```

```
<i class="arrow first left"></i>
<i class="arrow second left"></i>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-14T22:00:19.213

实际上，我可以使用 !important 来更改图标的大小。但是有什么方法可以在不使用 !important 的情况下进行更改。我尝试不使用它，但不知何故无法更改图标的大小。

# c# - 为什么我在 VS 2010 中出现奇怪的索引错误？

> ID：14482250
> 
> 赞同：2
> 
> 时间：2013-01-23T14:38:34.797
> 
> 标签：c#, asp.net, visual-studio-2010

我在 Visual Studio 2010 中创建了一个 C# Web 应用程序。然后我从另一个 VS 解决方案中复制了一些 ASPX 文件（以及背后的代码）。我必须通过并清理一些参考资料和东西。最终我把所有东西都清理干净了，除了一件奇怪的事情。在 VS 中，我在以下代码行中看到红色波浪线：

```
if (Request.QueryString["b"] != null) 
```

这些行位于 Request.QueryString["b"] 部分下方。当我将鼠标悬停在它上面时，我看到以下错误消息：

> 无法使用 [] 将索引应用于“System.Collections.Specialized.NameValueCollection”类型的表达式

这是在页面后面的代码的 Page_Load 事件中。真正奇怪的是，如果我构建项目，它构建得很好，没有任何问题，红色的波浪线消失了。但是，如果我关闭并重新打开文件 - 我看到相同的红色波浪线并且 VS 再次抱怨。

有任何想法吗？我很困惑。我尝试重建、清理解决方案、关闭 VS 并重新打开等。

编辑：这是文件的使用部分。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ServiceModel;
using System.Collections.Specialized; 
```

此外，这是 ASPX 文件的标头：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="beamswitch.aspx.cs" Inherits="AIMSWeb.data.beamswitch" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:21:24.793

所以我想我找到了为什么会这样。我正在构建的 ASP.NET 应用程序将成为我已经构建的 WCF 服务的客户端。创建客户端的部分过程是使用 Microsoft 实用程序生成 app.config 文件和 proxy.cs 文件。然后在我的 ASP.NET 应用程序中使用这些文件来提供我可以使用的代理代码，以便我可以从我的 ASP.NET 文件中调用该服务。当我从解决方案中删除这些文件时，问题就消失了。

具体来说，我猜测问题与我的服务中的一种方法试图序列化并将 Request.Form 对象作为参数发送这一事实有关。我想知道我的 proxy.cs 文件中的代码是否导致冲突或其他原因。我将尝试重建我的服务以使用字典或其他东西，然后看看是否能解决问题。很奇怪。感谢所有的帮助。

# powershell - PowerShell 中的 UTF8 脚本输出不正确的字符

> ID：14482253
> 
> 赞同：41
> 
> 时间：2013-01-23T14:38:38.387
> 
> 标签：powershell, utf-8, character-encoding

我用非 ascii 字符为 PowerShell 创建了一个 UTF8 脚本。

字符.ps1：

```
Write-Host "ç â ã á à" 
```

当脚本在 PowerShell 控制台中运行时，它会输出错误的字符。

![在此处输入图像描述](../Images/688cd3873afed33c1112fee64307c800.png)

但是，如果我直接在控制台中编写字符，它们会按预期显示：

![在此处输入图像描述](../Images/bcd1b6a0c823eca7352e8fe665743c9e.png)

有谁知道是什么导致了这种行为？

问题来自我编写的脚本，该脚本具有包含非 ascii 字符的硬编码路径。当我尝试将路径作为参数传递给 cmdlet 时（在我要 robocopy 文件夹的情况下），命令失败，因为它找不到路径（在屏幕上错误地输出）。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-01-23T14:56:06.817

**使用 BOM 将脚本的编码更改为 UTF-8 解决了该问题。**

我使用 SublimeText 和 EncodingHelper 插件来控制脚本的字符集。它已正确设置为 UTF8。

我将 SublimeText 中脚本的编码更改为“带有 BOM 的 UTF-8”，并且输出显示正确。

我使用 Notepad++ 创建了相同的脚本，默认为“UTF-8 with BOM”，并且该字符串在控制台中正确显示。

我将 Notepad++ 中脚本的编码更改为“不带 BOM 的 UTF-8”，但显示不正确。

**似乎 PowerShell 无法正确猜测没有 BOM 的 UTF-8 文件的编码。**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-03T19:39:26.180

在我的情况下，问题是由使用 Visual Studio Code 创建一个新的 PowerShell 脚本引起的，该脚本具有 UTF-8 的默认编码，没有 BOM。将编码设置为“Windows 1252”解决了这个问题。

PowerShell 似乎无法在没有 BOM 的情况下处理 UTF-8，它需要“Windows 1252”或“UTF8 with BOM”编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-08T18:05:40.907

有一种可靠的方法来检测 utf8nobom ( [https://unicodebook.readthedocs.io/guess_encoding.html](https://unicodebook.readthedocs.io/guess_encoding.html) )。像许多其他小东西一样，这似乎在 PS 6 中效果更好。即使是我心爱的 Windows 版 emacs 25 也出现了编码错误。

```
PS C:\users\admin> pwsh
PowerShell 6.1.0
Copyright (c) Microsoft Corporation. All rights reserved.

https://aka.ms/pscore6-docs
Type 'help' to get help.

PS C:\users\admin> "write-host 'ç â ã á à'" | set-content -Encoding utf8NoBOM accent.ps1
PS C:\users\admin> .\accent
ç â ã á à 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T14:42:35.333

在调用你的脚本之前试试这个：

```
 $OutputEncoding = [Console]::OutputEncoding 
```

# facebook-graph-api - 通过字段扩展从 facebook 事件中获取所有用户详细信息

> ID：14482255
> 
> 赞同：0
> 
> 时间：2013-01-23T14:38:41.507
> 
> 标签：facebook-graph-api, facebook-field-expansion

我想使用字段扩展从事件中获取所有用户详细信息。

在伪代码中，我认为它应该是这样的。

获取[https://graph.facebook.com/](https://graph.facebook.com/) /attending.user(name,id,picture)

我无法让它工作（在图形资源管理器中测试它）不知道这是否可能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:47:26.330

您需要使用这样的网址：

```
https://graph.facebook.com/EVENTID/?fields=attending.fields(id,name,picture) 
```

# android - 永久设置 getID

> ID：14482262
> 
> 赞同：-1
> 
> 时间：2013-01-23T14:38:57.450
> 
> 标签：android

出于业务原因，我必须在我的应用程序中捕获视图的 ID。由于我不希望在多个部署中更改 ids，因此我创建了 ids.xml 和 public.xml，如此处所述[如何将 id 添加到 public.xml？](https://stackoverflow.com/questions/12334857/how-to-add-id-to-public-xml?lq=1)

我在应用程序上有大约 200 个 id，我只需要捕获其中的大约 150 个。我的问题是，我应该引用我的 ids.xml 和 public.xml 中的所有 200 个 id 还是只引用我需要的那些（150 个）就足够了？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:54:42.393

这些 ID 是动态的，因此您无法可靠地捕获它们（它们很可能会随着每次编译而改变）。

也许你可以创建自定义属性来代替使用（比如这里： http: [//kevindion.com/2011/01/custom-xml-attributes-for-android-widgets/](http://kevindion.com/2011/01/custom-xml-attributes-for-android-widgets/)）

最重要的是，捕获 id 是一种不好的做法。

我还认为您可以在布局文件中使用“标签”属性，因此您可能也想尝试一下。

# php - 如何让 curl 将这些 v 字符解码为 UTF-8 或 ascii

> ID：14482263
> 
> 赞同：0
> 
> 时间：2013-01-23T14:38:57.857
> 
> 标签：php, curl, decimal, decode

我正在使用`cURL`从这样的网站中提取数据：

```
function get_data($url)
{
$ch = curl_init();
$timeout = 7;
$userAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)";
curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
curl_setopt($ch, CURLOPT_ENCODING, "UTF-8");
$data = curl_exec($ch);
curl_close($ch);
return $data;
} 
```

curl 将确切的字符返回为“ `&#118;&#110;&#101;&#110;&#x6E;&#x61;`”，浏览器将显示为“vnenna”。

问题是：如何找到这些字符并重新格式化内容以正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:46:19.167

这不是 cUrl 问题。您看到的只是 HTML 实体编码的字符。用于`html_entity_decode()`解码它们。

见[http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

# java - 线程池实现代码中的疑惑

> ID：14482268
> 
> 赞同：1
> 
> 时间：2013-01-23T14:39:09.663
> 
> 标签：java, multithreading, threadpool

在花费大量时间研究线程池概念并阅读大量博客上的不同代码并在 Stackoverflow.com 上发布问题之后，现在我对这个概念有了清晰的认识。但与此同时，我在代码中发现了一些疑问。

1.  当**pool.assign(new TestWorkerThread());** 在 TestThreadPool 类中执行，它调用 **done.workerBegin();** **Done Class**中的方法，它增加**_activeThreads**变量。但我认为，**逻辑**上这是不正确的，因为如果线程数（在本例中为 2）少于任务数（在**TestThreadPool 类**中给出）（在本例中为 5），它会增加**_activeThreads**（即 _activeThreads = 5 ) 不必要地计数。

2.  _started变量在**Done 类中的****作用**是什么？

***   waitDone **()**和**waitBegin()**（在**Done Class**中）如何执行它们的功能？（如果您逐步解释这两种方法，那就很好了。）** 

 **代码如下。我正在根据其流程安排代码。

**TestThreadPool 类：-**

```
package hitesh;

/**
 *
 * @author jhamb
 */

public class TestThreadPool {

 public static void main(String args[]) throws InterruptedException
 {
  ThreadPool pool = new ThreadPool(2);

  for (int i = 1;i <= 5;i++) {
   pool.assign(new TestWorkerThread());
  }
  System.out.println("All tasks are assigned");

  pool.complete();

  System.out.println("All tasks are done.");
 }
} 
```

**TestWorkerThread 类：-**

```
package hitesh;

/**
 *
 * @author jhamb
 */
/**
 * This class shows an example worker thread that can
 * be used with the thread pool. It demonstrates the main
 * points that should be included in any worker thread. Use
 * this as a starting point for your own threads.
 */

public class TestWorkerThread implements Runnable {
 static private int count = 0;
 private int taskNumber;
 protected Done done;

 /**
  * 
  * @param done
  */
 TestWorkerThread()
 {
  count++;
  taskNumber = count;
  //System.out.println("tasknumber  --->  " + taskNumber);
 }

 public void run()
 {
  System.out.println("TWT run starts   -->  "  + this.toString());
  for (int i=0;i <= 100;i += 25) {
   System.out.println("Task number: " + taskNumber + 
             ",percent complete = " + i );
   try {
    Thread.sleep((int)(Math.random()*500));
   } catch (InterruptedException e) {
   }
  }
  System.out.println("task for thread --> " + this.toString() + "   completed");
 }
} 
```

**线程池类：-**

```
package hitesh;

/**
 *
 * @author jhamb
 */
import java.util.*;

/* 
 * This is the main class for the thread pool. You should
 * create an instance of this class and assign tasks to it.
 */

public class ThreadPool {

 protected Thread threads[] = null;

 Collection assignments = new ArrayList(3);

 protected Done done = new Done();

 public ThreadPool(int size) throws InterruptedException
 {
   threads = new WorkerThread[size];
   for (int i=0;i<threads.length;i++) {
    threads[i] = new WorkerThread(this);
    threads[i].start();
    System.out.println ("thread " + i + " started");
    threads[i].sleep(1000);
  }

 }

 public synchronized void assign(Runnable r)
 {
  done.workerBegin();
  assignments.add(r);
  System.out.println("Collection size --->   " + assignments.size() +   "  Thread can work on this");
  notify();
 }

 public synchronized Runnable getAssignment()
 {
  try {
   while ( !assignments.iterator().hasNext() )
    wait();

   Runnable r = (Runnable)assignments.iterator().next();
   assignments.remove(r);
   return r;
  } catch (InterruptedException e) {
   done.workerEnd();
   return null;
  }
 }

 public void complete()
 {   
  done.waitBegin();
  done.waitDone();
 }

} 
```

**WorkerThread 类：-**

```
package hitesh;
import java.util.*;
/**
 *
 * @author jhamb
 */

/**
 * The worker threads that make up the thread pool.
 */
class WorkerThread extends Thread {
 /**
  * True if this thread is currently processing.
  */
 public boolean busy;
 /**
  * The thread pool that this object belongs to.
  */
 public ThreadPool owner;

 /**
  * The constructor.
  * 
  * @param o the thread pool 
  */
 WorkerThread(ThreadPool o)
 {
  owner = o;
 }

 /**
  * Scan for and execute tasks.
  */
    //@Override
 public void run()
 {
  System.out.println("Threads name : "+ this.getName() + "  working.....");
  Runnable target = null;

  do {
   System.out.println("enter in do while " + this.getName() );
   target = owner.getAssignment();
   System.out.println("GetAssignment k aage aa gya mai "  +  target);
   if (target!=null) {
    target.run();
    //target.
    owner.done.workerEnd();
   }
  } while (target!=null);
  System.out.println("do while finishes for "+ this.getName());
 }
} 
```

**完成课程：-**

```
package hitesh;

/**
 *
 * @author jhamb
 */
/**
 * 
 * This is a thread pool for Java, it is
 * simple to use and gets the job done. This program and
 * all supporting files are distributed under the Limited
 * GNU Public License (LGPL, http://www.gnu.org).
 * 
 * This is a very simple object that
 * allows the TheadPool to determine when 
 * it is done. This object implements
 * a simple lock that the ThreadPool class
 * can wait on to determine completion.
 * Done is defined as the ThreadPool having
 * no more work to complete.
 * 
 * Copyright 2001 by Jeff Heaton
 *
 * @author Jeff Heaton (http://www.jeffheaton.com)
 * @version 1.0
 */
public class Done {

 /**
  * The number of Worker object
  * threads that are currently working
  * on something.
  */
 private int _activeThreads = 0;

 /**
  * This boolean keeps track of if
  * the very first thread has started
  * or not. This prevents this object
  * from falsely reporting that the ThreadPool 
  * is done, just because the first thread
  * has not yet started.
  */
 private boolean _started = false;
 /**
  * This method can be called to block
  * the current thread until the ThreadPool
  * is done.
  */

 synchronized public void waitDone()
 {
  try {
   while ( _activeThreads>0 ) {
    wait();
   }
  } catch ( InterruptedException e ) {
  }
 }
 /**
  * Called to wait for the first thread to 
  * start. Once this method returns the
  * process has begun.
  */

 synchronized public void waitBegin()
 {
  try {
   while ( !_started ) {
    wait();
   }
  } catch ( InterruptedException e ) {
  }
 }

 /**
  * Called by a Worker object
  * to indicate that it has begun 
  * working on a workload.
  */
 synchronized public void workerBegin()
 {
  _activeThreads++;
  _started = true;
  notify();
 }

 /**
  * Called by a Worker object to 
  * indicate that it has completed a 
  * workload.
  */
 synchronized public void workerEnd()
 {
  _activeThreads--;
  notify();
 }

 /**
  * Called to reset this object to
  * its initial state.
  */
 synchronized public void reset()
 {
  _activeThreads = 0;
 }

} 
```

请帮忙。提前致谢。寻找您的善意回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:34:41.887

现在我非常完美地理解了整个代码。如果您在此代码中发现任何疑问，那么您可以提问。

经过大量阅读后，我的问题的答案如下。

1.  是的，你是对的，这在逻辑上是错误的。最好是**_activeTasks**。它用于杀死所有线程，当线程池没有更多工作时，因为 waitDone() 函数只有在**_activeTasks <= 0**时才能成功执行。

2.  此变量用于**waitBegin()**方法。每当任何任务启动时，它都会更新 _started 为**TRUE**，这意味着用户分配的任务现在正在由线程处理，意味着线程开始处理这些任务。如果用户没有给出任务，那么所有线程仍然处于活动状态，并等待任务。这是这里变量的使用。

3.  waitBegin() 方法在线程开始处理任务时成功执行，因为在这种情况下只有 _started 变为 true。否则，线程会继续等待某些任务。waitDone() 仅在 _activeTasks 变为零时执行成功，因为这是线程池没有任何工作要执行的唯一情况，意味着线程池完成了它的工作。否则，它会一直等到所有任务完成，这意味着它会等到 _activeTasks 变为**零****

# asp.net-mvc-4 - 如何在 mvc4 上使用 dotnetopenauth 设置 Linkedin 身份验证

> ID：14482269
> 
> 赞同：1
> 
> 时间：2013-01-23T14:39:15.133
> 
> 标签：asp.net-mvc-4, linkedin, dotnetopenauth

我正在创建一个新的 asp.net 网站，我需要使用一些身份验证提供程序。我很容易让所有的供应商工作（感谢这个很棒的模板和 scotts vid）。我有点坚持让这个与链接帐户一起工作。我认为它会像脸书一样简单，但我找不到任何教程或片段。我敢肯定我不是第一个尝试这个的人。请协助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:39:01.573

在RegisterAuth方法下的AuthConfig类中调用该方法

`OAuthWebSecurity.RegisterLinkedInClient("xxxxx","xxxxxxx");`

使用您从 LinkedIn 收到的适当输入。还有一件事，我在尝试使用linkedin登录时收到错误消息。我遇到了关于堆栈溢出的帖子（希望我可以提供链接），您需要更新
dotnetopenauth，我使用 nuget 来更新它。谢谢 PinnyM。

# backbone.js - 创建新的 Backbone 视图时如何知道元素是否已经在 DOM 中

> ID：14482270
> 
> 赞同：3
> 
> 时间：2013-01-23T14:39:16.280
> 
> 标签：backbone.js, backbone-views

情况如下：第一次打开页面时，它已经通过服务器（php）准备好DOM。

如果用户打开了 javascript，那么我想将我的页面转换为网络应用程序（或任何你称之为的）。一旦 Javascript 被初始化，Backbone 就会从服务器获取集合。问题是，其中一些获取的项目已经在页面上。

现在我如何标记那些已经在 DOM 中的项目？我怎样才能将它们与 Backbone 视图联系起来？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T14:54:46.990

将 Backbone.View 连接到现有的 DOM 元素很简单：

```
//get a referent to the view element
var $el = $("#foo");

//initialize new view
var view = new FooView({el:$el}); 
```

视图现在处理`#foo`元素的事件，以及所有其他视图的优点。你不应该打电话`view.render`。如果这样做，它会将视图重新渲染到元素。这意味着您不能在`render`方法中定义任何必要的代码。

至于如何找出 DOM 中已经存在哪些元素，以及如何为每个视图找到相应的元素 - 在不知道您的数据和 html 的具体外观的情况下，这有点复杂。作为一般建议，请考虑使用`data-*`属性来匹配元素。

假设你有一个 DOM 树：

```
<ul id="list">
  <li data-id="1">...</li>
  <li data-id="2">...</li>
  <li data-id="5">...</li>
</ul> 
```

您可以像这样将模型绑定/渲染到容器：

```
var view;

//container element
var $list = $("ul#list");

//find item node by "data-id" attribute
var $item = $list.find("li[data-id='" + model.id+ "']");

if($item.length) {
  //element was in the DOM, so bind to it
  view = new View( {el:$item, model:model} );
} else {
  //not in DOM, so create it
  view = new View( {model:model} ).render();
  $list.append(view.el);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:40:38.423

好的，我设法这样做：

```
var Collection = Backbone.Collection.extend({...});
var ItemView = Backbone.View.extend({...});

var ItemsView = Backbone.View.extend({
  initialize: function () {
    var that = this,
        coll = new Collection;

    coll.fetch({ success: function () {
      that.collection = coll;
      that.render();
    }});
  },
  render: function () {
    this.collection.each(this.addOne, this);
  },
  addOne: function (model) {

    var selector = '#i'+model.get("id");

    if( $(selector).length ) {
      //If we are here, then element is already in the DOM
      var itemView = new ItemView({ 'model': model, 'el': selector, 'existsInDom': true });
    } else {
      var itemView = new ItemView({ 'model':model });
    }
  }
}); 
```

# variables - 如何在 Powershell 中创建动态变量，例如日期/时间等

> ID：14482274
> 
> 赞同：0
> 
> 时间：2013-01-23T14:39:26.997
> 
> 标签：variables, powershell, dynamic

嗨，我不确定我的措辞是否正确，但每当我将数据写入日志时，我都需要一个包含**当前日期/时间的变量；**如果不每次都初始化，我怎么能做到这一点。目前每次我需要更新时，我都会联合使用这两个语句。还有其他方法吗？

```
$DateTime = get-date  | select datetime
Add-Content $LogFile -Value "$DateTime.DateTime: XXXXX" 
```

如果对我的问题有任何疑问或澄清，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:13:17.440

此脚本在 Powershell 中生成真正的动态变量（感谢`Lee Holmes`和他的`Windows PowerShell Cookbook The Complete Guide to Scripting Microsoft's Command Shell, 3rd Edition`）

```
##############################################################################
##
## New-DynamicVariable
##
## From Windows PowerShell Cookbook (O'Reilly)
## by Lee Holmes (http://www.leeholmes.com/guide)
##
##############################################################################

<#

.SYNOPSIS

Creates a variable that supports scripted actions for its getter and setter

.EXAMPLE

PS > .\New-DynamicVariable GLOBAL:WindowTitle `
     -Getter { $host.UI.RawUI.WindowTitle } `
     -Setter { $host.UI.RawUI.WindowTitle = $args[0] }

PS > $windowTitle
Administrator: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe
PS > $windowTitle = "Test"
PS > $windowTitle
Test

#>

param(
    ## The name for the dynamic variable
    [Parameter(Mandatory = $true)]
    $Name,

    ## The scriptblock to invoke when getting the value of the variable
    [Parameter(Mandatory = $true)]
    [ScriptBlock] $Getter,

    ## The scriptblock to invoke when setting the value of the variable
    [ScriptBlock] $Setter
)

Set-StrictMode -Version 3

Add-Type @"
using System;
using System.Collections.ObjectModel;
using System.Management.Automation;

namespace Lee.Holmes
{
    public class DynamicVariable : PSVariable
    {
        public DynamicVariable(
            string name,
            ScriptBlock scriptGetter,
            ScriptBlock scriptSetter)
                : base(name, null, ScopedItemOptions.AllScope)
        {
            getter = scriptGetter;
            setter = scriptSetter;
        }
        private ScriptBlock getter;
        private ScriptBlock setter;

        public override object Value
        {
            get
            {
                if(getter != null)
                {
                    Collection<PSObject> results = getter.Invoke();
                    if(results.Count == 1)
                    {
                        return results[0];
                    }
                    else
                    {
                        PSObject[] returnResults =
                            new PSObject[results.Count];
                        results.CopyTo(returnResults, 0);
                        return returnResults;
                    }
                }
                else { return null; }
            }
            set
            {
                if(setter != null) { setter.Invoke(value); }
            }
        }
    }
}
"@

## If we've already defined the variable, remove it.
if(Test-Path variable:\$name)
{
    Remove-Item variable:\$name -Force
}

## Set the new variable, along with its getter and setter.
$executioncontext.SessionState.PSVariable.Set(
    (New-Object Lee.Holmes.DynamicVariable $name,$getter,$setter)) 
```

有一个`Set-StrictMode -Version 3`，但如果您可以在 powershell V2.0 会话中加载框架 4.0，则可以将其设置为 -Version 2，如下[所述](https://stackoverflow.com/a/5069146/520612)

OP的用途是：

```
 New-DynamicVariable -Name GLOBAL:now -Getter { (get-date).datetime } 
```

这里是 Lee Holmes 对我在另一个答案中使用的方法的评估（很明显真正的缺陷是什么）：

```
Note
There are innovative solutions on the Internet that use PowerShell's debugging facilities to create a breakpoint that changes a variable's value whenever you attempt to read from it. While unique, this solution causes PowerShell to think that any scripts that rely on the variable are in debugging mode. This, unfortunately, prevents PowerShell from enabling some important performance optimizations in those scripts. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:45:50.420

为什么不使用：

```
Add-Content $LogFile -Value "$((Get-Date).DateTime): XXXXX" 
```

这每次都会获取当前的日期时间。请注意，它在内部`$( )`使 powershell 在将其插入字符串之前运行表达式（获取日期时间）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T14:45:40.527

将你的两个命令包装在函数中，这样你就只有一个调用？

```
function add-log{
(param $txt)
$DateTime = get-date  | select -expand datetime
Add-Content $LogFile -Value "$DateTime: $txt"
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T14:45:47.913

除了这些其他方式（坦率地说，我可能会改用这些方式 - 除了断点方法），您可以创建一个带有 ScriptProperty 的自定义对象，您可以提供以下实现：

```
$obj = new-object pscustomobject
$obj | Add-Member ScriptProperty Now -Value { Get-Date }
$obj.now 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T14:59:25.817

使用`PsBreakPoint`：

```
$act= @'
$global:now = (get-date).datetime
'@
$global:sb = [scriptblock]::Create($act)
$now = Set-PSBreakpoint -Variable now -Mode Read -Action $global:sb 
```

调用`$now`返回当前更新的日期时间值

一个班轮：

```
$now = Set-PSBreakpoint -Variable now -Mode Read -Action { $global:now = (get-date).datetime } 
```

# jquery - 当我将 IE 浏览器模式从 IE9 切换到 IE8 时，为什么会出现错误“'Page_Validators'未定义”？

> ID：14482276
> 
> 赞同：3
> 
> 时间：2013-01-23T14:39:30.480
> 
> 标签：jquery, asp.net, unobtrusive-validation, ie8-browser-mode

我正在使用 ASP.NET 不显眼的验证开发一个网页。当我使用默认的 IE9 浏览器模式在 IE9 中查看我的页面时，该页面按预期工作。但是，当我简单地将浏览器模式从 IE9 切换到 IE8 时，我在页面重新加载时收到以下 JavaScript 错误：

“错误：‘Page_Validators’未定义”

不显眼的验证需要一个名为“jquery”的 ScriptResourceMapping。那是到位的。我还在`<script>`母版页中使用标签在所有页面上包含 jquery。

此外，我在母版页上有一个空标记，以使我的用户控件能够通过控件标记中的 ScriptManagerProxy 标记加载其他 javascript。

母版页上的相关标记：

```
<%@ Master Language="C#" AutoEventWireup="true" Inherits="Site" Codebehind="Site.master.cs" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">

<script src="Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>

<title></title>

<asp:ContentPlaceHolder id="head" runat="server">
</asp:ContentPlaceHolder>

</head> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:50:08.157

您可能在从 JavaScript 文件加载之前调用它。尝试用`ready`

```
$(document).ready(function() {
   $('#CoappPersonalInformationForm.failureNotification').each(function () 
     {
        ValidatorEnable(this, false); 
     });
}); 
```

# android - 使用单个 Activity android 在片段之间切换时出现 NullPointerException

> ID：14482281
> 
> 赞同：1
> 
> 时间：2013-01-23T14:39:37.927
> 
> 标签：android

美好的一天。快速提问，对于通过页脚保存多个片段的单个活动，这是实现片段之间切换的正确方法吗？每个片段都存在此代码

私人无效showMyFragment（）{

```
 FragmentTransaction ft = fragmanager.beginTransaction();

  if(fragmanager.findFragmentByTag(MY_FRAG_TAG) != null){ //different Tag for different fragment

     ft.replace(R.id.dashboard_fragment_container_id, myfragment, MY_FRAG_TAG);  //NUllPointerException sometimes here
     ft.commit();
    }

  else {

      myfragment = new MyFragment();

          ft.replace(R.id.dashboard_fragment_container_id, myfragment, MY_FRAG_TAG);                     
      ft.addToBackStack(null);
      ft.commit();
  } 
} 
```

堆栈跟踪是：

```
01-23 15:07:20.432: E/AndroidRuntime(30834): FATAL EXCEPTION: main
01-23 15:07:20.432: E/AndroidRuntime(30834): java.lang.NullPointerException
01-23 15:07:20.432: E/AndroidRuntime(30834):    at android.support.v4.app.BackStackRecord.doAddOp(Unknown Source)
01-23 15:07:20.432: E/AndroidRuntime(30834):    at android.support.v4.app.BackStackRecord.replace(Unknown Source)
01-23 15:07:20.432: E/AndroidRuntime(30834):    at com.company.example.DashBoardActivity.showComparisonDashboard(DashBoardActivity.java:431)
01-23 15:07:20.432: E/AndroidRuntime(30834):    at com.company.example.DashBoardActivity.onClick(DashBoardActivity.java:359)
01-23 15:07:20.432: E/AndroidRuntime(30834):    at android.view.View.performClick(View.java:2533) 
```

假设每个包含片段的方法都存在此代码。例如，MyFragment1 的 showMyFragment1()，MyFragment2 的 showMyFragment2() 等。对于不同的片段也有不同的标签。这是在单个活动页脚中的片段之间切换的好方法还是有更清洁的方法。我有时会在上面注释的行中得到 NullPointerException。并且不确定切换时那里做错了什么。谢谢你。

**更新**刚刚意识到问题发生在方向更改后。只有我的一个片段可以改变方向。其他人被锁定为纵向。因此，在特权发生方向更改然后我切换片段后，就会出现问题。

# php - 2 require_once 在同一文件上创建 MySQL 连接问题

> ID：14482285
> 
> 赞同：0
> 
> 时间：2013-01-23T14:39:41.903
> 
> 标签：php, mysqli

我有这个 index.php ：

```
<?php
require_once ('required1.php');
require_once ('required2.php');

--- some mysqli_query here ---
?> 
```

required1.php 里面是这样的：

```
<?php
$DbServer = 'localhost';
$DbUser = 'username';
$DbPassword = 'password';
$DbName = 'dbname';
$con = mysqli_connect($DbServer, $DbUser, $DbPassword, $DbName);
?> 
```

这是 required2.php ：

```
<?php
require_once 'required1.php';

--- some mysqli_query here ---

mysqli_close($con);
?> 
```

`mysqli_close($con);`required2.php 使 index.php 上的 mysqli_query 失败，因为 mysql 连接已被 required2.php 关闭。

如何使 required2.php 独立工作？我的意思是，该文件（required2.php）上发生的任何事情都留在那里。不要将任何东西带入调用它的其他文件中，特别是`mysqli_close($con);`

require_once 可以吗？或者 PHP 有另一个函数可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:45:23.613

使用不同的连接`require2.php`或不要关闭它。您也可以将其包含在底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:45:50.090

使用`mysqli_close($con);`in`required2.php`关闭连接，因此在任何 include of 之后`required2.php`，`$con`将不可用。

如果你想`required2.php`独立，你必须使用另一个数据库连接，而不是`$con`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:45:58.787

首先，确实没有必要关闭包含文件中的连接（可能有非常具体的例外......）。

如果您想独立使用第二个包含，则应将其重构为 OOP。如果它是一个通过其构造函数（依赖注入）注入其数据库连接的类，它只会向您的其余代码显示其名称，因此在类或对象中发生的事情不会影响您的其余代码.

当然，您仍然不应该关闭您的连接，因为该对象可能会通过引用传递，但使用对象/类而不是过程代码将使其更加独立且可重用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T15:27:27.350

如果 required2.php 与您当前的脚本无关，但您需要做的就是运行您提到的脚本，我觉得您可以使用 file() 调用文件 required2.php。这将分别运行这两个脚本，即使您关闭 required2.php 中的连接，它也不会影响当前脚本。

# java - Datasore 管理员：实体删除未完成

> ID：14482290
> 
> 赞同：1
> 
> 时间：2013-01-23T14:39:48.257
> 
> 标签：java, google-app-engine, google-cloud-datastore

我为七种实体类型启动了一个 appengine 删除操作。总大小约为 6Mb。现在超过 2 小时，它仍然显示“1 个已完成，6 个活动”。当然，这不是我第一次在 appengine 上清除数据，也不需要这么长时间。我们正在进行快速开发，现在我无法上传代码供我们的客户开发人员进行测试。请我想知道这是否正常，或者我做错了什么，或者appengine是否只是讨厌我们并想搞砸我们。另外，我想知道该怎么做（永远等待，启动另一个删除，删除 appengine 生成的活动作业实体等）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:24:45.860

Resolved. It turned out we ran out of quota (we've not enabled billing). I never knew that "delete" also counts in the quota usage.

# android - 相同的代码适用于物理设备，但不适用于 Android 4 模拟器

> ID：14482291
> 
> 赞同：1
> 
> 时间：2013-01-23T14:39:54.450
> 
> 标签：android, google-maps, google-maps-android-api-2

我的应用程序已经在使用 Google Maps Android API v2，并且正在我的 Galaxy Mini (Android 2.3.6) 上运行。当我尝试在使用平台 4.0.3、API 级别 15 和 Google API 的模拟器上进行测试时，出现以下错误：

```
01-23 14:26:31.581: ERROR/AndroidRuntime(688): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{br.com.remotepark/br.com.remotepark.activities.MainActivity}: android.view.InflateException: Binary XML file line #11: Error inflating class fragment
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    at android.app.ActivityThread.access$600(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.view.InflateException: Binary XML file line #11: Error inflating class fragment
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
    at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
    at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
    at br.com.remotepark.activities.MainActivity.onCreate(MainActivity.java:51)
    at android.app.Activity.performCreate(Activity.java:4465)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    ... 11 more
    Caused by: java.lang.NullPointerException
    at br.com.remotepark.fragments.MapFragment.initLocation(MapFragment.java:86)
    at br.com.remotepark.fragments.MapFragment.onCreateView(MapFragment.java:62)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:845)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1058)
    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1156)
    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:270)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
    ... 22 more 
```

引发异常的行是这样的：

```
mMap.setInfoWindowAdapter(new MapInfoWindowAdapter(getLayoutInflater(savedInstanceState))); 
```

MapInfoWindowAdapter 构造函数是这样的：

```
MapInfoWindowAdapter(LayoutInflater layoutInflater) {
        mLayoutInflater = layoutInflater;

        mWindow = mLayoutInflater.inflate(R.layout.map_info_window, null);
        mContents = mLayoutInflater.inflate(R.layout.map_info_window, null);
    } 
```

map_info_window.xml 是：

```
<ImageView
    android:layout_width="40dip"
    android:layout_height="40dip"
    android:src="@drawable/ic_remote_park"
    android:id="@+id/remotepark_logo"
    android:layout_marginLeft="0dip"
    android:layout_marginRight="8dip"
    android:layout_marginTop="16dip"></ImageView>

<LinearLayout
    android:id="@+id/balloon_inner_layout"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_weight="1"
    android:paddingTop="5dip">
    <LinearLayout
        android:id="@+id/layout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingTop="0dip">
        <TextView
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:textColor="#FFF"
            android:id="@+id/parking_name_info_window"
            android:textSize="7pt"
            android:singleLine="true"
            android:textStyle="bold"
            android:ellipsize="end"/>
    </LinearLayout>
    <RelativeLayout
        android:id="@+id/RelativeLayout2"
        android:orientation="horizontal"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_marginTop="2dip">
        <RelativeLayout
            android:id="@+id/frameLayout1"
            android:orientation="horizontal"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content">
            <TextView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:textColor="#FFF"
                android:id="@+id/availability_label_info_window"
                android:text="@string/places_str"
                android:textStyle="bold"/>
            <TextView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:textColor="#FFF"
                android:id="@+id/availability_info_window"
                android:layout_toRightOf="@+id/availability_label_info_window"
                android:layout_marginLeft="5dip" />
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/RelativeLayout3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_alignParentRight="true">

            <TextView
                android:id="@+id/price_label_info_window"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#FFF"
                android:textStyle="bold"/>

            <TextView
                android:id="@+id/price_symbol_info_window"
                android:layout_toRightOf="@+id/price_label_info_window"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/price_symbol_str"
                android:textColor="#FFF"
                android:layout_marginLeft="5dip"/>

            <TextView
                android:id="@+id/price_info_window"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#FFF"
                android:layout_toRightOf="@+id/price_symbol_info_window"
                android:layout_marginLeft="2dip"/>
        </RelativeLayout>
    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/RelativeLayout4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_gravity="right"
        android:layout_marginBottom="5dip">

    </RelativeLayout>
</LinearLayout>
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/btn_more_info_disabled"
    android:id="@+id/more_info_button"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="8dip"
    android:layout_marginTop="16dip"></ImageView></LinearLayout> 
```

你知道为什么它不工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:16:54.130

根据 Google 的说法，[Google Play 服务](http://developer.android.com/google/play-services/setup.html)API 需要“物理开发设备”，因此它们不受模拟器的官方支持。因此，如果您在模拟器上运行，几乎可以肯定您缺少所需的服务。人们报告说让它在模拟器中工作，但我自己没有尝试过。如果您想在模拟器上安装 Google Play，您可以在[这篇文章](https://stackoverflow.com/q/13691943)中查看答案。

当您尝试从您的 xml膨胀`MapFragment`or时，您会收到错误消息。`SupportMapFragment`通过调用 检查设备是否具有 Google Play 服务通常是一个好主意[`isGooglePlayServicesAvailable()`](https://developer.android.com/reference/com/google/android/gms/common/GooglePlayServicesUtil.html#isGooglePlayServicesAvailable%28android.content.Context%29)，并确保它`ConnectionResult.SUCCESS`在继续之前返回。这使您可以显示错误对话框，而不仅仅是崩溃。Google 甚至为其他一些代码提供了错误对话框，您可以通过 提示它们升级/安装`getErrorDialog()`，例如 --

```
int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
switch (resultCode) {
   case ConnectionResult.SUCCESS: // proceed
      break;
    case ConnectionResult.SERVICE_MISSING:
    case ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED:
    case ConnectionResult.SERVICE_DISABLED:
          Dialog dialog = GooglePlayServicesUtil.getErrorDialog(resultCode, this, 1);
          dialog.show();
 } 
```

在调用之前执行此操作`setContentView`。

# 64-bit - 使用 Load Runner 11.5 对 ClickOnce 应用程序进行负载测试

> ID：14482297
> 
> 赞同：0
> 
> 时间：2013-01-23T14:40:05.627
> 
> 标签：64-bit, clickonce, load-testing, performance-testing, loadrunner

我们应该在 64 位操作系统上使用 WPF 和 WCF（它是 ClickOnce 应用程序）围绕 .Net 4.0 和 HTML5 构建的 64 位独立桌面应用程序进行性能测试。

使用 LoadRunner 11.5 进行录制时，应用程序不会在前台启动，而是在后台启动，相应的进程正在任务管理器中运行。

我们用谷歌搜索，发现使用一般安装路径（E:\xxx\xxxx\xxxx.exe）无法记录 ClickOnce 应用程序

可能的解决方法可能是使用部署文件夹中的 .exe 文件。但是我们仍然无法通过 DeploymentFolder 路径中的 exe 文件使用 VUGEN 启动应用程序：“C:\Users\username\AppData\Local\Apps\2.0\obscure_dir_name1\obscure_dir_name1\”

请在下面找到有关 ClickOnce-VUGEN 问题的更多信息的链接。

> [在 VUGEN 中录制 ClickOnce 应用程序](http://eyeontesting.com/questions/1779/how-to-use-loadrunner-to-record-an-application-tha.html)
> 
> [ClickOnce 应用程序上的 MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/7a519190-1477-49dd-b9c8-d194e3040de0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:00:06.517

这个应用程序的应用程序（或表示）层协议通信机制是什么？（请参阅 OSI 模型定义以明确表示层协议的应用）

由于 vugen 是一个 32 位应用程序，并且挂钩不会有效地跨越 64 位应用程序的 32 位控制的 WOW32 子系统障碍，因此您已经遇到了关于用于录制的 64 位应用程序的问题。请参阅有关录制 64 位应用程序的发行说明

# spring-jdbc - spring-jdbc-3.2.0.RELEASE 清单是怎么回事？

> ID：14482298
> 
> 赞同：0
> 
> 时间：2013-01-23T14:40:06.673
> 
> 标签：spring-jdbc

与 spring-jdbc-3.1.3.RELEASE 清单相比，它完全是空的。

spring-jdbc 是否突然失去了所有的依赖关系？凉爽的。

实际上并不那么酷——因为我们在 Maven pom 中启用了 Spring 的自动升级，它导致了我们的 Jenkins CI 上的编译错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:34:59.670

这是故意的。有关详细信息，请参阅[http://static.springsource.org/spring/docs/3.2.0.RELEASE/spring-framework-reference/html/migration-3.2.html#migration-3.2-osgi-users](http://static.springsource.org/spring/docs/3.2.0.RELEASE/spring-framework-reference/html/migration-3.2.html#migration-3.2-osgi-users)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:46:36.510

JSYK，另一个神秘的错误：

```
ERROR DataNucleus.Enhancer - DataNucleus Enhancer completed with an error. Please review the enhancer log for full details. Some classes may have been enhanced but some caused errors
org.datanucleus.exceptions.NucleusUserException: Errors were encountered when loading the specified MetaData files and classes. See the nested exceptions for details
    at org.datanucleus.metadata.MetaDataManager.loadClasses(MetaDataManager.java:536) ~[datanucleus-core-3.1.4.jar:na]
    at org.datanucleus.enhancer.DataNucleusEnhancer.getFileMetadataForInput(DataNucleusEnhancer.java:734) ~[datanucleus-enhancer-3.1.1.jar:na]
    at org.datanucleus.enhancer.DataNucleusEnhancer.enhance(DataNucleusEnhancer.java:525) ~[datanucleus-enhancer-3.1.1.jar:na]
    at org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1258) ~[datanucleus-enhancer-3.1.1.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_31]
    at org.datanucleus.maven.AbstractDataNucleusMojo.executeInJvm(AbstractDataNucleusMojo.java:333) [maven-datanucleus-plugin-3.1.3.jar:na]
    at org.datanucleus.maven.AbstractEnhancerMojo.enhance(AbstractEnhancerMojo.java:250) [maven-datanucleus-plugin-3.1.3.jar:na]
    at org.datanucleus.maven.AbstractEnhancerMojo.executeDataNucleusTool(AbstractEnhancerMojo.java:67) [maven-datanucleus-plugin-3.1.3.jar:na]
    at org.datanucleus.maven.AbstractDataNucleusMojo.execute(AbstractDataNucleusMojo.java:126) [maven-datanucleus-plugin-3.1.3.jar:na]
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) [maven-core-3.0.4.jar:3.0.4]
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537) [maven-embedder-3.0.4.jar:3.0.4]
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196) [maven-embedder-3.0.4.jar:3.0.4]
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141) [maven-embedder-3.0.4.jar:3.0.4]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_31]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_31]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_31]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_31]
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290) [plexus-classworlds-2.4.jar:na]
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) [plexus-classworlds-2.4.jar:na]
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409) [plexus-classworlds-2.4.jar:na]
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) [plexus-classworlds-2.4.jar:na]
Caused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
    at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:653) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:460) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:286) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:222) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52) ~[na:1.6.0_31]
    at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070) ~[na:1.6.0_31]
    at java.lang.Class.getAnnotation(Class.java:3029) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationType.<init>(AnnotationType.java:113) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationType.getInstance(AnnotationType.java:66) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:202) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69) ~[na:1.6.0_31]
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52) ~[na:1.6.0_31]
    at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070) ~[na:1.6.0_31]
    at java.lang.Class.getAnnotations(Class.java:3050) ~[na:1.6.0_31]
    at org.datanucleus.metadata.annotations.AnnotationManagerImpl.getMetaDataForClass(AnnotationManagerImpl.java:128) ~[datanucleus-core-3.1.4.jar:na]
    at org.datanucleus.metadata.MetaDataManager.loadAnnotationsForClass(MetaDataManager.java:2650) ~[datanucleus-core-3.1.4.jar:na]
    at org.datanucleus.metadata.MetaDataManager.loadClasses(MetaDataManager.java:496) ~[datanucleus-core-3.1.4.jar:na]
    ... 32 common frames omitted 
```

通过添加依赖解决了：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${spring.version}</version>
    </dependency> 
```

# jquery - jQuery 动画在 ie7 / ie8 中不显示

> ID：14482301
> 
> 赞同：0
> 
> 时间：2013-01-23T14:40:19.083
> 
> 标签：jquery

jQuery animate 功能只支持 IE9, Firefox, Chrome 但在 < IE 9 中不支持。有解决办法吗？

```
/* <![CDATA[ */
$(document).ready(function() {
    $(".subSlogan").animate({"opacity": "-=1", top: 0, left: 0 }, 1);
    $(".subSlogan").animate({"opacity": "-=1", top: 0, left: 0 }, 1000);
    $(".subSlogan").animate({"opacity": "+=1", top: 95, left: 120 }, 1200);

    $(".Slogan").animate({"opacity": "-=1", top: 300, right: 0 }, 1);
    $(".Slogan").animate({"opacity": "-=1", top: 300, right: 0 }, 2000);
    $(".Slogan").animate({"opacity": "+=1", top: 153, left: 180 }, 1200);

    $(".Schweizerkreuz").animate({"opacity": "-=1", top: 155, left: 795 }, 1);
    $(".Schweizerkreuz").animate({"opacity": "-=1", top: 155, left: 795 }, 3500);
    $(".Schweizerkreuz").animate({"opacity": "+=1", top: 155, left: 795 }, 1200);

    $("#logoBox").animate({"opacity": "-=1", top: -250 }, 1);
    $("#logoBox").animate({"opacity": "-=1", top: -250 }, 4000);
    $("#logoBox").animate({"opacity": "+=1", top: 0 }, 1200);
});
/* ]]> */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:43:33.213

我相信这是 IE < 9 不完全支持不透明度的问题，而不是动画功能的问题。本质上是一个 CSS 问题，而不是一个 jQuery 问题。你可以为其他 CSS 属性设置动画吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:50:57.347

HTML 5 和 CSS 3 不支持 IE7 或 IE8，但 IE9 支持。这就是您的动画无法正常工作的原因。因此您的 jquery 代码中没有错误。

# c# - 用c#转换unicode字符

> ID：14482307
> 
> 赞同：1
> 
> 时间：2013-01-23T14:40:53.383
> 
> 标签：c#, excel, csv

我有一个客户要求我们编写 ac# 应用程序，该应用程序从他们的数据库中获取数据并将其输出到 .csv 文件。到目前为止，一切都很好。

该数据库包含一些 unicode 字符，当客户端使用 Excel 打开 .csv 时，这些字符看起来“奇怪”。例如：x0096 看起来像一个 A，上面有一个胡萝卜，旁边是欧元货币符号，而客户认为它应该看起来像一个 Dash。

所以我被要求让这些角色看起来“不奇怪”。

我为每个奇怪的字符编写了代码（我喜欢下面的 12 行）。

```
input = input.Replace((char)weirdCharacter, (char)normalCharacter); 
```

必须有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:45:18.247

我在生成 HTML 文件时遇到了同样的问题。我的解决方案是更改输出文件的编码。

```
StreamWriter swHTMLPage = 
                new System.IO.StreamWriter(OutputFileName, false, Encoding.UTF8); 
```

一旦我添加了 Encoding.UTF8 参数，字符就会开始正确显示。我不知道这是否可以应用于您的解决方案，因为涉及 Excel，但我敢打赌它可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:48:35.747

正如文森特詹姆斯所说，如果这是一个编码问题，那么解决这个问题的理想方法是在解码/编码值时使用正确的编码，但如果这仍然不起作用......

我认为这很简单。你怎么看？：

```
Dictionary<char, char> substitutions = new Dictionary<char, char> {
  {'\0x0096', 'F'}, {'\0x0101', 'O'}, {'\0x0121', 'O'}, ...
};

foreach(KeyValuePair<char, char> pair in substitutions)
{
   input.Replace(pair.Key, pair.Value);
} 
```

# c - 带有 USB 闪存驱动器的 win32 上的 Fatfs

> ID：14482309
> 
> 赞同：2
> 
> 时间：2013-01-23T14:40:55.707
> 
> 标签：c, filesystems, fat32

Fatfs 是一个用 C ansi 编写的小型库，可让我们管理存储设备上的文件系统。我计划在嵌入式项目中使用它，以便在 SD 卡上存储多个文件。

因此，我尝试在 USB 闪存驱动器上进行一些测试，并下载了提供的示例。我可以安装我的 USB 闪存驱动器。

**在没有**选项 FS_READONLY 的情况下编译了源代码后，我已经初始化了我的驱动器并安装了它。但我无法创建目录！

这是我在此处提供的提示示例中输入的命令：http: [//elm-chan.org/fsw/ff/ffsample.zip](http://elm-chan.org/fsw/ff/ffsample.zip)

```
>fi 2  (force initialisation)
rc=0 FR_OK
>di 2  (mount the drive)
rc=0
Sector size = 512
Number of sectors = 30282525
>fj (switch the current drive to '2', which is actually my usb stick)
rc=0 FR_OK
>fk foo (Attempt to create a dir called 'foo')
rc=1 FR_DISK_ERR 
```

查看文档，我们得知 FR_DISK_ERR 指的是硬件错误。

我的闪存驱动器是否格式错误？在初始化过程中我是否错过了其他东西？

# jquery - Jquery切换多个按钮

> ID：14482319
> 
> 赞同：6
> 
> 时间：2013-01-23T14:41:44.610
> 
> 标签：jquery, toggle

我有多个按钮，它们通过 jquery 切换脚本获得它们的活动 css 样式。但我希望一次只有一个按钮处于活动状态。但是，当我重新单击一个活动按钮时，它必须变为非活动状态。

```
$(document).ready(function(){
    $('.button').click(function() {       
        $(this).toggleClass('buttonactive');
    });
}); 
```

基本上我需要添加一行说：

`$(all .button except this).removeClass('buttonactive');`

我不知道怎么做。有人能帮我吗？这是一个有问题的 JSFIDDLE：http: [//jsfiddle.net/nV5Tu/3/](http://jsfiddle.net/nV5Tu/3/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T14:59:53.057

你可以这样做，使用[.toggleClass()](http://api.jquery.com/toggleClass/)切换当前元素.. 然后使用.not( [)](http://api.jquery.com/not/)过滤掉当前元素，避免删除类

```
$('.button').click(function() {  
    $('.button').not(this).removeClass('buttonactive'); // remove buttonactive from the others
    $(this).toggleClass('buttonactive'); // toggle current clicked element
}); 
```

[小提琴](http://jsfiddle.net/eVy8U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:43:35.533

这应该可以解决问题：

```
$(document).ready(function(){
    $('.button').click(function() {
        if($(this).hasClass("buttonactive")) {       
            $(this).removeClass('buttonactive');
        } else {
            $(this).addClass('buttonactive');
        }
        $(".button").removeClass("buttonactive"); // removes all other active classes
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:44:45.343

为什么不简单地删除所有并添加`this`？

```
$('.button').click(function() {       
    $('.button').removeClass('buttonactive');    
    $(this).addClass('buttonactive');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:46:06.113

你不需要三个`document.ready(function()`..一个就足够了...

```
$('.button').click(function() { 
 $(".button").removeClass("buttonactive");  // remove the class for all button on click
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/nV5Tu/4/)

# macos - 在 OS X 和 GCC 中使用 Qt 5 的问题

> ID：14482320
> 
> 赞同：1
> 
> 时间：2013-01-23T14:41:46.367
> 
> 标签：macos, qt, gcc, qt5

我已经使用 Qt 几个月了，没有任何问题。截至 2012 年夏天，我最初使用最新的 Qt Creator 下载了 Qt 4.8 库，并且能够开始构建我的应用程序。我的应用程序有苛刻的图形需求，所以我一直在使用 Qt 为 OpenGL 提供的出色的窗口上下文。

我一直在慢慢培养我的技能。我已经成功地探索了可编程着色器，我想利用几何着色器的力量。我在配备 GeForce GT 330M GPU 的 MacBookPro6,2 上运行 OS X 10.7.5。根据我从其他人那里读到的内容，OS X Lion 的升级包括一个在 OpenGL 3.2 核心规范下运行此 GPU 的驱动程序，包括对可编程几何着色器的支持。我还在这里读到，虽然 Qt 4.8 在 OS X 上不支持 OpenGL 3.2，但他们最近发布的 Qt 5 中包含了这种支持。

我看到 Digia 还发布了 Qt Creator 的更新，所以（对我工作中的这一潜在突破有点兴奋）我卸载了 Qt 并下载了 Qt 5.0.0 库 + Qt Creator 2.6.1。我完成了向导中的步骤，启动了新的 Qt Creator，但现在没有任何效果，哈哈。我与我的编译器以及它给我的神秘信息发展了一种爱恨交织的关系，但这是不同的。抛出的错误听起来像是它不再知道如何阅读代码（只是从数百个错误“#include”中挑选一个示例）。该向导很好地安装了 Qt，并且所有的胆量都在那里，但我认为我的 gcc 编译器的链接已经被破坏了。甚至 Qt 5 附带的示例也无法编译。

Qt 引入了一个新的“工具包”范例，使在多个平台上的开发更容易，我已经努力改变工具包的设置。Qt 检测到几个 gcc 编译器选项，我已经尝试过，我已经手动将它指向我从终端命令获得的路径：which gcc
/usr/bin/gcc

它似乎是 gcc 4.2。我看到最新版本是 gcc 4.7，但我拥有 XCode 提供的最新版本。我还从 XCode 下载了“命令行工具”并重新启动，但它并没有像我希望的那样神奇地解决我的问题。我正在尝试手动更新 gcc，但我遇到了问题，因为它要求我也更新 gmp 和 mpfr，而且它们没有完全合作。

由于套件范例允许多个库在 Qt 中共存，我重新下载了 Qt 4.8 库，但它遇到了同样的问题。我已经将 4.8 和 5.0 库的 Qt Creator 指向 qmake，但这似乎也不是问题。

我还没有看到任何其他人遇到如此严重问题的证据，所以这表明我错过了一些简单的东西。但即使是去年夏天的新手，我也觉得我已经对 Qt、C++ 和 OpenGL 感到很自在，因为我从 Internet 上拼凑起来。

如果有人能将我推向正确的方向，我将不胜感激。我愿意在 Qt 5.0 中从头开始重建我的应用程序，但我现在根本无法使用 Qt。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:52:38.543

我终于让它工作了！在目录 /usr/bin/ 中有多个 g++ 可执行文件。它们标有不同的版本号（g++-4.0、g++-4.2），但它们出现在 Qt 的自动检测中。我需要做的就是删除额外的内容。仅保留未标有版本号的 g++ 可执行文件。通过限制 Qt 可用的选项，它自动选择了一个编译器，现在它可以工作了。

我花了这么长时间才找到这么快的解决方案很尴尬，但仍然是一种解脱。我希望其他人从我的经验中节省时间。

# android - 什么类型在 InputFilter 中作为 src 字符序列/字符串或其他类型传递？

> ID：14482324
> 
> 赞同：1
> 
> 时间：2013-01-23T14:41:51.567
> 
> 标签：android, android-edittext, android-2.3-gingerbread, android-input-method, input-filter

我正在开发安卓应用程序。我的 sdk 详细信息是**最低 sdk 版本为 7，目标和 buid sdk 版本为 10**

在我的应用程序中的一个屏幕中，我正在使用“EditText”并且我正在为该editText使用过滤器
以下是我的编码片段

```
editText.setFilters
        (
                new InputFilter[] 
                {
                        new InputFilter() 
                        {
                            public CharSequence filter(CharSequence src, int start,int end, Spanned dst, int dstart, int dend) 
                            {

                                String name=src.getClass().getName();
                                System.out.println("\n\tSrc class name ="+name);

                                String tempStr=((String)src).toUpperCase();

                                return tempStr;
                            }                           
                        }
                }
        ); 
```

在上面的代码中，有时 src 是**String**，有时是**CharSequence**，有时是“ **android.text.SpannableStringBuilder** ”

我的疑问是在什么情况下**charsequence 被传递，String 被传递，android.text.SpannableStringBuilder 作为 src 被传递**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:50:30.977

这取决于您在调用 TextView.setText(CharSequence text) 时使用的 CharSequence

# powershell - 在 PowerShell 中加载自定义静态类

> ID：14482326
> 
> 赞同：3
> 
> 时间：2013-01-23T14:41:58.763
> 
> 标签：powershell

我已经搜索并搜索了有关如何在 PowerShell 中加载自定义静态类的信息，但到目前为止无济于事。我被谷歌搜索了。我已经看到了有关如何加载需要实例化的自定义类或如何加载 .Net 框架类的信息和示例，但不完全是我想要的。

我正在尝试使用用 C# 编写的具有以下结构的自定义 dll：

```
namespace Custom.NameSpace
{
   public static class AppCfgHelper
   {
      public static XmlNode SomeXmlNodeFunction( XmlNode xmlRoot )
      {
       ...
       }
   }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T17:30:19.680

有两个步骤。首先加载包含静态类的程序集，例如：

```
Add-Type -Path <path-to-dll> 
```

然后使用 PowerShell 的静态方法语法调用静态方法，`[typename]::membername`例如：

```
$returnedNode = [Custom.NameSpace.AppCfgHelper]::SomeXmlNodeFunction($rootNode) 
```

# ruby-on-rails - Rails 3.2 在哪里以及如何需要 zip 库

> ID：14482327
> 
> 赞同：0
> 
> 时间：2013-01-23T14:42:03.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3

红宝石 1.9.3 轨道 3.2.11。我需要 ails zip 库，但不知道该怎么做。这是我的代码，我只需要在控制器中的单个操作中使用它。

```
 file_name = "natfiles.zip"
  t = Tempfile.new("temp_natfiles")
  Zip::ZipOutputStream.open(t.path) do |z|

      z.put_next_entry('NAT00010')
      z.print IO.read("tmp/nat00010")

  end
  send_file t.path, :type => 'application/zip',
                         :disposition => 'attachment',
                         :filename => file_name
  t.close 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:45:47.690

在您的 Gemfile 中，添加一行

```
gem "rubyzip", :require => 'zip/zip' 
```

然后运行`bundle install`。它将随处可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:45:33.627

您可以在使用它之前要求它。在您的情况下，您可以在相关控制器中要求它。:)

# c++ - 知道用户 SID 的 C++ WMI 获取 AccountName

> ID：14482329
> 
> 赞同：1
> 
> 时间：2013-01-23T14:42:17.017
> 
> 标签：c++, wmi, wmi-query, sid

我想检索知道其 SID 的用户 AccountName。SID 是使用 WMI 查询获得的：`Select * from Win32_UserProfile`，我正在尝试使用以下查询获取用户 AccountName：

`Select * from Win32_SID where SID='S-1-5-21-3949351935-1180888718-2463404063-9346'`

该`ExecQuery`方法成功，但`Next`来自的方法`IEnumWbemClassObject`失败并出现错误：H80041024 (wbemErrProviderNotCapable)。

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T20:16:17.277

如[`MSDN`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394450%28v=vs.85%29.aspx)文档所述，`Win32_SID` 无法枚举 WMI 类。

因此，您不能使用 ExecQuery 方法，而是使用[`IWbemServices::GetObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392109%28v=vs.85%29.aspx)传递正确 WMI 的函数[`object path`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390350%28v=vs.85%29.aspx)。就像是`Win32_SID.SID='S-1-5-82-1036420768-1044797643-1061213386-2937092688-4282445334'`

试试这个样本

```
#include "stdafx.h"
#define _WIN32_DCOM
#include <iostream>
using namespace std;
#include <comdef.h>
#include <Wbemidl.h>
# pragma comment(lib, "wbemuuid.lib")

#pragma argsused
int main(int argc, char* argv[])
{
    BSTR strNetworkResource;
    strNetworkResource =  L"\\\\.\\root\\CIMV2";

    // Initialize COM. ------------------------------------------

    HRESULT hres;
    hres =  CoInitializeEx(0, COINIT_MULTITHREADED);
    if (FAILED(hres))
    {
        cout << "Failed to initialize COM library. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                  // Program has failed.
    }

    // Set general COM security levels --------------------------

        hres =  CoInitializeSecurity(
            NULL,
            -1,                          // COM authentication
            NULL,                        // Authentication services
            NULL,                        // Reserved
            RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication
            RPC_C_IMP_LEVEL_IMPERSONATE, // Default Impersonation
            NULL,                        // Authentication info
            EOAC_NONE,                   // Additional capabilities
            NULL                         // Reserved
            );

    if (FAILED(hres))
    {
        cout << "Failed to initialize security. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                    // Program has failed.
    }

    // Obtain the initial locator to WMI -------------------------

    IWbemLocator *pLoc = NULL;
    hres = CoCreateInstance(CLSID_WbemLocator, 0, CLSCTX_INPROC_SERVER, IID_IWbemLocator, (LPVOID *) &pLoc);

    if (FAILED(hres))
    {
        cout << "Failed to create IWbemLocator object." << " Err code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        CoUninitialize();       
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                 // Program has failed.
    }

    // Connect to WMI through the IWbemLocator::ConnectServer method

    IWbemServices *pSvc = NULL;

    hres = pLoc->ConnectServer(
            _bstr_t(strNetworkResource),      // Object path of WMI namespace
            NULL,                    // User name. NULL = current user
            NULL,                    // User password. NULL = current
            0,                       // Locale. NULL indicates current
            NULL,                    // Security flags.
            0,                       // Authority (e.g. Kerberos)
            0,                       // Context object
            &pSvc                    // pointer to IWbemServices proxy
            );

    if (FAILED(hres))
    {
        cout << "Could not connect. Error code = 0x" << hex << hres << endl;    
        cout << _com_error(hres).ErrorMessage() << endl;
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();          
        return 1;                // Program has failed.
    }

    cout << "Connected to root\\CIMV2 WMI namespace" << endl;

    // Set security levels on the proxy -------------------------

        hres = CoSetProxyBlanket(
           pSvc,                        // Indicates the proxy to set
           RPC_C_AUTHN_WINNT,           // RPC_C_AUTHN_xxx
           RPC_C_AUTHZ_NONE,            // RPC_C_AUTHZ_xxx
           NULL,                        // Server principal name
           RPC_C_AUTHN_LEVEL_CALL,      // RPC_C_AUTHN_LEVEL_xxx
           RPC_C_IMP_LEVEL_IMPERSONATE, // RPC_C_IMP_LEVEL_xxx
           NULL,                        // client identity
           EOAC_NONE                    // proxy capabilities
        );

    if (FAILED(hres))
    {
        cout << "Could not set proxy blanket. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;               // Program has failed.
    }

    // Use the IWbemServices pointer to make requests of WMI ----

    IWbemClassObject *pclsObj = NULL;
    hres = pSvc->GetObject(L"Win32_SID.SID='S-1-5-82-1036420768-1044797643-1061213386-2937092688-4282445334'",  0, NULL, &pclsObj, NULL);

    if (FAILED(hres))
    {
        cout << "GetObject failed" << " Error code = 0x"    << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;               // Program has failed.
    }
    else
    {

        VARIANT vtProp;

        HRESULT hr = pclsObj->Get(L"AccountName", 0, &vtProp, 0, 0);// String
        if (!FAILED(hr))
        {
            if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
            wcout << "AccountName : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
            else
            wcout << "AccountName : " << vtProp.bstrVal << endl;
        }
        VariantClear(&vtProp);

        pclsObj->Release();
        pclsObj=NULL;
    }

    // Cleanup

    pSvc->Release();
    pLoc->Release();
    if (pclsObj!=NULL)
     pclsObj->Release();

    CoUninitialize();
    cout << "press enter to exit" << endl;
    cin.get();
    return 0;   // Program successfully completed.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:48:33.773

这是 WMI 的问题之一：它提供了统一的接口，但实际上所有数据都来自其他代码。其他一些代码并不向 WMI 提供所有数据，即使数据显然是可用的。如果您仍然需要数据，您可能需要绕过 WMI 并直接从源获取它。

幸运的是，在这种情况下，这相当简单：您可以调用[`LookupAccountSid`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379166.aspx)以获得您所要求的确切信息。

# android - Android：在对话框上使用 ContextMenu 时出现问题

> ID：14482337
> 
> 赞同：1
> 
> 时间：2013-01-23T14:42:45.680
> 
> 标签：android, dialog, contextmenu

我创建了一个上下文菜单。当我长按列表项时，会出现上下文菜单。到现在为止还挺好...

但是当我点击一个上下文项时，什么也没有发生。有谁知道这个问题？这里有什么问题？

**使用 listview 打开对话框的按钮：**

```
 Button cmd_fav = (Button) findViewById(R.id.cmd_main_fav);
    cmd_fav.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            List<String> valueList = new ArrayList<String>();

            db = SQLiteDatabase.openDatabase("/data/data/spicysoftware.abugrundwissen/databases/questions", null,
                    SQLiteDatabase.OPEN_READWRITE);
            Cursor c_ = db.rawQuery("SELECT question, _id, answer FROM tbl_questions"+
                    " where favourite = 1", null);

            if (c_ != null ) {
                if  (c_.moveToFirst()) {
                    do {
                        String str_question = c_.getString(c_.getColumnIndex("question"));            
                        valueList.add(str_question);                        
                  } while (c_.moveToNext());
                }

                // custom dialog
                dialog = new Dialog(MainSite.this);
                dialog.setContentView(R.layout.dialog_list);
                dialog.setTitle("Favoriten:");
                adapter = new ArrayAdapter<String>(MainSite.this, android.R.layout.simple_list_item_1, valueList);
                final ListView lv = (ListView)dialog.findViewById(R.id.list_search);

                lv.setAdapter(adapter);

                registerForContextMenu(lv);

                lv.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {

                    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
                         menu.add(Menu.NONE, CONTEXT_MENU_DELETE_ITEM, Menu.NONE, "Favorit entfernen");
                         menu.add(Menu.NONE, CONTEXT_MENU_FINISH_ITEM, Menu.NONE, "Frage abschliessen!");
                    }
                });

                lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
                lv.setOnItemClickListener(new OnItemClickListener() {
                    public void onItemClick(AdapterView<?> parent, View view, final int position, long id) {
                        String item = (String) lv.getItemAtPosition(position).toString();

                        Cursor c_2 = db.rawQuery("SELECT answer FROM tbl_questions"+
                                " where question = '"+item+"'", null);

                        if (c_2 != null ) {
                            if  (c_2.moveToFirst()) {
                                    answer = c_2.getString(c_2.getColumnIndex("answer"));   
                              }
                            }

                        // custom dialog
                        final Dialog dialog = new Dialog(MainSite.this);
                        dialog.setContentView(R.layout.dialog_answer);
                        dialog.setTitle("Antwort:");

                        // set the custom dialog components - text, image and button
                        TextView text = (TextView) dialog.findViewById(R.id.txt_answer);
                        //text.setText(answer);
                        text.setText(Html.fromHtml(answer), TextView.BufferType.SPANNABLE);

                        Button dialogButton = (Button) dialog.findViewById(R.id.cmd_close_dialog);
                        // if button is clicked, close the custom dialog
                        dialogButton.setOnClickListener(new OnClickListener() {

                            public void onClick(View v) {
                                dialog.dismiss();
                            }
                        });

                        dialog.show();

                       }

               });

                Button dialogButton = (Button) dialog.findViewById(R.id.cmd_close_dialog2);
                // if button is clicked, close the custom dialog
                dialogButton.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        dialog.dismiss();
                    }
                });

                dialog.show();

           }

        }

    }); 
```

**OnContextItemSelected：**

```
 @Override  
public boolean onContextItemSelected(MenuItem item) { 
    Log.v("tst", "lol");
switch (item.getItemId()) {

      case CONTEXT_MENU_DELETE_ITEM:
          Log.v("DELETED", "TRUE");
          return true;

      case CONTEXT_MENU_FINISH_ITEM:
        Log.v("FINISHED", "TRUE");
          return true;

  }
 Log.v("FINISHED", "LOL");
return false;

  } 
```

最好的问候 MSeiz5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:25:20.713

我在这里找到了解决方案[Android: ContextMenu and ItemSelected in Context Menu](https://stackoverflow.com/questions/11915217/android-contextmenu-and-itemselected-in-context-menu)

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
          super.onCreateContextMenu(menu, v, menuInfo);
          //MenuInflater inflater = getMenuInflater();
          //inflater.inflate(R.menu.context_menu, menu);

          MenuItem delete = menu.add("delete");
          MenuItem add = menu.add("add");
          add.setIcon(android.R.drawable.ic_menu_upload); //adding icons
          delete.setOnMenuItemClickListener(new OnMenuItemClickListener() {
                  public boolean onMenuItemClick(MenuItem item) {
                      Log.d("ContextCheck","EDIT!");
                        Toast.makeText(Pr.this, "Edit!", Toast.LENGTH_SHORT).show();
                          return true;
                  }
          });
          add.setOnMenuItemClickListener(new OnMenuItemClickListener() {
              public boolean onMenuItemClick(MenuItem item) {
                  Log.d("ContextCheck","EDIT!");
                    Toast.makeText(Pr.this, "Edit!", Toast.LENGTH_SHORT).show();
                  return true;
              }
      });
        } 
```

正在工作中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:47:17.123

如果使用 MenuInflater，更通用的代码：

```
MenuInflater inflater = getMenuInflater();     
        inflater.inflate(R.menu.ruleitem_menu, menu); 
        if (menuInfo instanceof AdapterView.AdapterContextMenuInfo){
            AdapterView.AdapterContextMenuInfo adptrCmi = (AdapterContextMenuInfo) menuInfo;
            String lsItem =  currentRuleListView.getItemAtPosition(adptrCmi.position).toString();
            menu.setHeaderTitle( lsItem);
        }

        //if Activity.onContextItemSelected not triggered, try the following lines
        for (int i=0; i< menu.size();i++){
            menu.getItem(i).setOnMenuItemClickListener(new OnMenuItemClickListener(){

                @Override
                public boolean onMenuItemClick(MenuItem item) {
                    return onContextItemSelected(item);
                }

            });
        } 
```

# c++ - 未定义的引用错误，即使函数存在

> ID：14482338
> 
> 赞同：2
> 
> 时间：2013-01-23T14:42:59.797
> 
> 标签：c++, qt, bison

尽管多次询问“未定义的引用错误”问题，但我找不到解决问题的方法。

我正在尝试让 flex 和 bison 在 Qt 应用程序中工作。我仅在链接方面面临问题。

这些是相关文件-

1) **icd.l** - Lex 规范 - 它生成**iclexer.c**并包含函数定义 -

```
void yyerror(char const *s){...}
void* setUpBuffer(char const* text){...}
void tearDownBuffer(void* buffer){...}
int nextToken(){...} 
```

2) **iclexer.h**

```
#ifndef ICLEXER_H
#define ICLEXER_H

extern void  yyerror(char const *);
extern int   yylex();
extern char* yytext;
extern void* setUpBuffer(char const* text);
extern void  tearDownBuffer(void* buffer);
extern int nextToken();

#endif // ICLEXER_H 
```

3) **icparser.h**

```
#ifndef ICPARSER_H
#define ICPARSER_H
#include "iclexer.h"
#include <string>

extern void initLexer(std::string const& t);
extern void clearLexer();
extern int yyparse();

class Parser
{
public:
    Parser(std::string const& s)
    {
        initLexer(s);
    }
    void parse()
    {
        yyparse();
    }
    ~Parser()
    {
        clearLexer();
    }
};
#endif // ICPARSER_H 
```

4) **icd.y** - Bison 规范 - 它生成**icparser.cpp**并包含函数定义 -

```
void initLexer(std::string const& t);
void clearLexer();
int yylex(); 
```

在我的 GUI 代码中，我包含**icparser.h**并使用`class Parser`的界面。但我收到以下错误-

> /home/vinayak/codes/qt/dic_sim/icparser.cpp:1402：
> 错误：未定义对“yyerror（char const *）”的引用

和`setUpBuffer(char const* text);`的类似错误。基本上**iclexer.c**中的函数没有正确链接。`tearDownBuffer(void* buffer);``nextToken();`

 **请告诉我如何修改此代码或如何更改 Qt（Qt Creator）中的链接顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:27:44.830

如果生成的头文件完全符合规定，即没有任何头文件，`extern "C"`那么您可能面临的问题是 C 编译器在编译函数时会生成一个未损坏的符号，但 C++ 编译器会生成对损坏名称的依赖项。链接器将看到依赖项和符号，但如果名称不同，则无法将它们匹配在一起。

查看用于生成代码的工具的文档并了解如何生成与 C++ 兼容的代码（通常只需要`extern "C"`在标头中包含额外的代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T09:30:03.260

关于您的`error: undefined reference to 'yyerror(char const*)'`，您可能想阅读 Bison 文档，更具体地说[是有关 yyerror 的部分](http://www.gnu.org/software/bison/manual/bison.html#C_002b_002b-Parser-Interface)。上面写着：

```
— Method on parser: void error (const location_type& l, const std::string& m)

The definition for this member function must be supplied by the user: the parser
uses it to report a parser error occurring at l, described by m. 
```

您的代码中可能缺少此定义。请注意，`yyerror`实际上是`yy::parser::error`，使用`yy::`解析器的默认命名空间（可以使用 更改`%define namespace "foo"`）和`parser::`默认解析器类的名称（可以使用 更改`%define parser_class_name foo`）。

您的其他错误似乎与 Bison 无关。

编辑：哦，您似乎正在生成 C 解析器，而不是 C++ 解析器。好吧，对于 C 解析器来说也是如此：[yyerror 是用户提供的](http://www.gnu.org/software/bison/manual/bison.html#Error-Reporting)。

以下定义在简单程序中就足够了：

```
 void
 yyerror (char const *s)
 {
   fprintf (stderr, "%s\n", s);
 } 
```**

# gw-basic - GWBASIC 编程语言，总大小只有 79KB 怎么样？

> ID：14482340
> 
> 赞同：4
> 
> 时间：2013-01-23T14:43:02.947
> 
> 标签：gw-basic

一种只有 79kb 大小的编程语言。

GWBASIC 编程语言让我很困惑，我下载了它，它的大小只有**79KB**，这怎么可能？我以前从未见过大小为**79kb**的语言。

其他编程语言，如 mysql，其设置大小为**32.6M**。

请解释为什么 GWBASIC 的大小是**79KB**。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:52:10.630

像[GW-BASIC](http://en.wikipedia.org/wiki/Gwbasic)这样的早期台式PC时代的BASIC解释器是一种语言解释器，仅此而已。不提供库（例如用于图形或网络或数据库）。“IDE”是一个简单的面向行的源代码编辑器，因此非常小。文档和说明指南仅是硬拷贝。没有需要集成的外部工具（配置管理、单元测试）。

为什么会有这样一个功能很差的环境？开发人员受到主内存限制（因此可执行文件可以有多大）和小容量分发媒体（软盘、磁带等）的限制。

# c# - c#.NET 和 sprintf 语法

> ID：14482341
> 
> 赞同：20
> 
> 时间：2013-01-23T14:43:08.203
> 
> 标签：c#, .net

这段代码如何翻译成 C#，具体来说如何`sprintf`在 C# 中实现？

```
string output = "The user %s logged in";
string loggedIn = "is";
string loggedOut = "isn't";

if (TheUser.CheckStatus())
{
    output = sprintf(output, loggedIn);
}
else
{
    output = sprintf(output, loggedOut);
}

return output; 
```

我期待看看`"The user isn't logged in"`是`TheUser.CheckStatus()`不是`false`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-23T14:44:13.367

查看[string.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)，这是使用它的代码版本：

```
string output = "The user {0} logged in";
string loggedIn = "is";
string loggedOut = "isn't";

if (TheUser.CheckStatus())
{
    output = string.Format(output, loggedIn);
}
else
{
    output = string.Format(output, loggedOut);
}

return output; 
```

或者更简单地说：（使用三元表达式）

```
string output = "The user {0} logged in";

return TheUser.CheckStatus() 
    ? string.Format(output, "is")
    : string.Format(output, "isn't"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T14:43:52.370

C 中的整个`printf`函数系列都被[String.Format](http://msdn.microsoft.com/en-us/library/fht0f5be%28v=vs.110%29.aspx)取代。例如，同样的接口也暴露在`Console.WriteLine()`.

```
 string output = "The user {0} logged in";
 string loggedIn = "is";
 string loggedOut = "isn't";

 output = string.Format(output, loggedIn); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T14:53:39.790

如果你想坚持使用 %s，%d....

```
string sprintf(string input,params object[] inpVars)
{
    int i=0;
    input=Regex.Replace(input,"%.",m=>("{"+ i++/*increase have to be on right side*/ +"}"));
    return string.Format(input,inpVars);
} 
```

你现在可以做

```
sprintf("hello %s..Hi %d","foofoo",455); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-29T02:12:46.750

使用 C# 6，您可以使用格式化字符串：

```
if (TheUser.CheckStatus())
{
    output = $"The user {loggedIn} logged in"
} 
```

字符串内部`{loggedIn}`是您定义的变量名称。

此外，您在花括号内有智能感知来选择变量名。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-23T14:44:37.843

[string.Format](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx)救援

```
string output = "The user {0} logged in";
string loggedIn = "is";
string loggedOut = "isn't";

output = (TheUser.CheckStatus() ? string.Format(output, loggedIn) : 
                                  string.Format(output, loggedOut));
return output; 
```

另见这篇关于[复合格式的非常基础的文章](http://msdn.microsoft.com/en-us/library/txafckwd%28v=vs.100%29.aspx)

编辑：更短

```
return string.Format(output, (TheUser.CheckStatus() ? loggedIn : loggedOut)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-06T13:12:52.527

Anirudha 已经编写了解决方案，但我无法添加评论，因此我将其发布为答案。它必须是`int i=-1;`，否则它会抛出异常。

```
string sprintf(string input,params object[] inpVars)
{
    int i=-1;
    input=Regex.Replace(input,"%.",m=>("{"+ ++i +"}"));
    return string.Format(input,inpVars);
} 
```

# jquery - 在 CoffeScript 中使用 'this' 和 jQuery 方法（父级）（将 jQuery 转换为 CoffeeScript）

> ID：14482343
> 
> 赞同：0
> 
> 时间：2013-01-23T14:43:25.500
> 
> 标签：jquery, coffeescript

第一次使用 CoffeeScript，如果这是一个基本问题，我很抱歉，但是快速的谷歌让我失望了。

单击链接后，我想获取

我的 HTML：

```
<td class="value-ignore" data-report-item="1">
    <a href="/report_item_ignores/new" data-remote="true">New ignore</a>
</td> 
```

我的 jQuery：

```
$('td.value-ignore a').click(function(){
    var id = this.parent().attr('data-report-item')
    console.log(id)
}); 
```

我的 CoffeScript（尝试）：

```
$ ->
  $('td.value-ignore a').click ->
    id = @parent().attr('data-report-item')
    console.log id 
```

错误：

```
Uncaught TypeError: Object http://example has no method 'parent' 
```

将不胜感激一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:37:51.010

像这样的东西？

```
jQuery ($) ->
  $('td.value-ignore a').click ->
    id = $(this).parent().attr('data-report-item')
    console.log id 
```

# asp.net-mvc - 路由测试 ASP.NET MVC4

> ID：14482346
> 
> 赞同：7
> 
> 时间：2013-01-23T14:43:27.033
> 
> 标签：asp.net-mvc, unit-testing, asp.net-mvc-4, asp.net-mvc-routing

我一直在使用 MvcRouteUnitTester （[codeplex](http://mvcrouteunittester.codeplex.com/)和[nuget](http://nuget.org/packages/MvcRouteUnitTester) ）针对我的路线运行*自动化单元测试。*尝尝它能做什么：

```
// assert incoming route
tester.WithIncomingRequest("/Foo").ShouldMatchRoute("Foo", "Index");
tester.WithIncomingRequest("/Foo/Index").ShouldMatchRoute("Foo", "Index");

// assert outgoing route
tester.WithRouteInfo("Foo", "Index").ShouldGenerateUrl("/Foo"); 
```

它工作得很好......当它工作时。和MVC4[配合不好，好久](http://mvcrouteunittester.codeplex.com/discussions/394149)没更新了。

是否有*可与最新 MVC 一起使用*并受到积极支持的替代工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T18:50:53.373

Anthony Steele 创建了一个很棒的新项目，用于测试 MVC4 和 ASP.NET Web API 中的路由。

上周刚刚发布： [https ://github.com/AnthonySteele/MvcRouteTester](https://github.com/AnthonySteele/MvcRouteTester)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T17:13:06.450

你检查过 MVC 4 的分叉版本吗？

[MVC 路由/URL 生成单元测试器](http://mvcrouteunittester.codeplex.com/SourceControl/network/forks/manzo/MVC4)

# cakephp - Cakephp 2 cakedc 搜索传递参数为空

> ID：14482348
> 
> 赞同：0
> 
> 时间：2013-01-23T14:43:30.007
> 
> 标签：cakephp, cakephp-2.x

我正在尝试在我的 cakephp 2 应用程序中实现 cakedc 搜索插件。我让插件在某一时刻正常工作，而应用程序中的其他东西已经将其关闭。但是，我想检查我是否正在以正确的方式使用搜索插件，因为它可能是我正在使用的方法导致冲突或类似的事情。

搜索仅从订单控制器中的订单模型中搜索一个 order_id 字段。

在我的模型中，我有：

```
 // Search Filters
public $filterArgs = array(
    array('name' => 'order_id', 'type' => 'like')       
); 
```

在我的控制器中，我有：

```
 public $presetVars = true;  
    public $components = array('Search.Prg', 'RequestHandler');
    public $uses = array('order', 'product');

    public function find () {

        $this->Prg->commonProcess();
        //debug($this->Order->parseCriteria($this->passedArgs));                 
        $this->paginate = array('conditions' => $this->Order->parseCriteria($this->passedArgs));                     

        $this->set('orders', $this->paginate());
} 
```

编辑这是因为我在我的类中使用 $uses 变量来定义控制器模型。有谁知道如何定义 cakedc 搜索模型。我试过搜索，可搜索和可搜索行为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:13:16.460

尝试遵守约定。注意外壳：

```
public $uses = array('Order', 'Product');. 
```

另请注意：第一个将是您的主要模型。

# json - 将日期（dd/mm/yyyy）和浮点（逗号）值发布到 aspnet WebApi

> ID：14482351
> 
> 赞同：2
> 
> 时间：2013-01-23T14:43:35.517
> 
> 标签：json, deserialization, asp.net-web-api, culture, invariantculture

**问题**

当我将 jSon 数据发布到 webapi 时，使用 pt-br 格式（日期为 dd/mm/yyyy，浮点数为逗号小数分隔符），这些值被反序列化为 en-us 格式，从而导致错误。

IE

» 日期：发布 23/01/2013 变为 01/01/0001

» 浮动：发布 1,4 变为 0.0

**帮助请求**

任何人都可以帮我定义“终极”解决方案，以使用除美国以外的其他文化将数据发布到 web api。我已经阅读了一些讨论，但没有一个提供完整的解决方案，甚至没有一个可行的解决方案。

考虑以下

模型：

```
public class Person
{
    public Datetime BirthDate { get; set; }
    public double Weight { get; set; }
} 
```

ApiController 方法

```
public HttpResponseMessage Create(Person person)
{
    // ...
} 
```

AjaxCall

```
$.ajax({
    type: 'POST',
    url: sl.baseUri + "/create",
    data: "Weight=87%2C7&BirthDate=17%2F07%2F1981",
    success: null,
    dataType: "json",
}) 
```

** 我已经在 web.config 中添加了以下全球化设置

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="pt-BR" uiCulture="pt-BR"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:15:36.923

您可以尝试将其发布为 JSON 对象而不是纯字符串：

`{"BirthDate": "17/07/1981", "Weight": "87,7"}`

但是，您需要告诉 Json.Net 期望的日期格式：http: [//james.newtonking.com/archive/2009/02/20/good-date-times-with-json-net.aspx](http://james.newtonking.com/archive/2009/02/20/good-date-times-with-json-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T12:32:38.333

为了解决这个问题，我为日期创建了一个自定义绑定。

```
 ko.bindingHandlers.date = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        ko.utils.registerEventHandler(element, 'change', function () {
            var value = valueAccessor();

            if (element.value !== null && element.value !== undefined && element.value.length > 0) {
                value(element.value);
            }
            else {
                value('');
            }
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var value = valueAccessor();
        var valueUnwrapped = ko.utils.unwrapObservable(value);

        var output = '';
        if (valueUnwrapped !== null && valueUnwrapped !== undefined && valueUnwrapped.length > 0) {
            output = moment(valueUnwrapped).format('YYYY-MM-DD');
        }

        if ($(element).is('input') === true) {
            $(element).val(output);
        } else {
            $(element).text(output);
        }
    }
}; 
```

此绑定将日期保留为以下格式：2014-11-05T00:00:00-02:00 建议您在 html 中使用输入 type=date。

此外，您需要将 moment.js 库包含到您的项目中。

# grails - Spring Security UI 插件中的 ResetPassword 功能

> ID：14482353
> 
> 赞同：0
> 
> 时间：2013-01-23T14:43:38.843
> 
> 标签：grails, spring-security, reset-password

我是 grails 的新手。
我在 netbeans 7.2.1 中创建了一个 grails 应用程序。
我正在使用 grails-1.3.4。

我需要实现 ForgotPassword 功能。因此，我下载并安装了 Spring Security UI 插件的依赖项并安装了这个插件。
我可以注册用户，也可以通过电子邮件进行验证。

现在我正在使用这个插件的**ForgotPassword**功能，它正在发送带有请求令牌的邮件。单击邮件中发送的链接后，我可以看到重置密码表格。**但是当我在新密码**和**重新输入**
密码中都输入了正确的密码时。 它只是停留在同一页面上，没有给出任何错误，也没有显示任何消息，只是停留在 ResetPassword 表单上。

 ****并且密码没有被更改。

我已经使用 s2-quickstart 命令创建了用户和角色域类，并向用户类添加了一个电子邮件字段。

**编辑 ：**

当我点击邮件中提到的重置密码链接时，我收到了重置密码表格，但也看到了附件图片中的错误消息

![在此处输入图像描述](../Images/1e18e1fa1884e4cb98758448959a87c4.png) 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:40:56.950

您可能正在对密码进行双重编码。有关此配置设置，请参阅[http://grails-plugins.github.com/grails-spring-security-ui/docs/manual/guide/10%20Customization.html](http://grails-plugins.github.com/grails-spring-security-ui/docs/manual/guide/10%20Customization.html)中的“密码加密”部分。

顺便说一句 - 您是 Grails 的新手，但使用的是 1.3.4？您应该使用 2.1.x 或 2.2.x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:24:01.107

与 Burt 的回答一样，您是否有机会使用多个数据源？如果是这样，您可能会[遇到此问题](http://jira.grails.org/browse/GPSPRINGSECURITYCORE-114)。该页面上的最后一条评论描述了一种可能的解决方法。****

# asp-classic - 发布到当前页面，保持查询字符串值不变

> ID：14482356
> 
> 赞同：0
> 
> 时间：2013-01-23T14:43:52.347
> 
> 标签：asp-classic

我有一个页面，我想创建一个下拉列表，然后发回我现在所在的页面。

我怎样才能做到这一点？

一个问题是，我希望所有查询字符串值也相同，除了 1 是下拉列表将覆盖的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:27:07.870

如果需要，您可以在同一页面中同时使用查询字符串和表单变量。如果您使用`<form method="post">`并将该操作留空，它会将表单发布回当前页面，这样就解决了一个问题。有一个警告：我不确定将操作留空是否会保持查询字符串参数不变。

如果没有，您可以尝试以下操作：（`<form method="post" action="index.asp?<%= request.querystring %>">`不确定确切的语法，要点是您需要指定当前页面并在方法中添加当前查询字符串变量）。

在发布后页面上的 ASP 代码中，您可以检查 request.form 和 request.querystring。request.form 将包含您的表单发布变量。request.querystring 将包含后面的变量？在您的网址中。

HTH，埃里克

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T16:36:21.020

一个Javascript方法：

```
<html>
<head>
<script>
function jumpto(whatform, querykey) {
    //get the url querystring
    var url = window.location.search;
    //the replace query
    var queryrx = new RegExp("([?&])" + querykey + "=[^\&]+(?=&|$)", "gi");
    //which item selected in dropdown
    var index=whatform.pageselect.selectedIndex;
    //if the first option, ignore it since it is blank
    if (whatform.pageselect.options[index].value != "0") {
        //is a query string available
        if (url.length>0) {
            //our query key is present
            if (queryrx.test(url)) {
                //now we replace the querystring from old to new
                url = url.replace(queryrx, '$1' + querykey + '='+whatform.pageselect.options[index].value);
                //clear out the question mark from the querystring
                url = url.replace("?", '');
            //our query key is not present, but there is querystring data
            }else{
                url = url.replace("?", '');
                url = querykey + "=" + whatform.pageselect.options[index].value + "&" + url;

            }
        //no querystring data exists
        }else{
            url = querykey + "=" + whatform.pageselect.options[index].value;
        }
        //alert(url);
        //this is the url we are getting bounced to
        location = "mypage.asp?"+url;
    }
}
</script>
</head>
<body>
<FORM NAME="form1">
<SELECT NAME="pageselect" ONCHANGE="jumpto(this.form, 'thequerykey')" SIZE="1">
<OPTION VALUE="">Choose a Page</OPTION>
<OPTION VALUE="pageA">First Page</OPTION>
<OPTION VALUE="pageB">Second Page</OPTION>
</SELECT>
</FORM>
</body>
</html> 
```

如果您想使用 ASP 经典解决方案，您将需要使用一个函数从您的查询字符串中清除旧值 [https://stackoverflow.com/a/1221672/2004151](https://stackoverflow.com/a/1221672/2004151) 然后将您的查询字符串打印为您的隐藏输入字段表单（下面的 MyFunctionResultsExceptPageSelect）。就像是：

```
<FORM ACTION="mypage.asp" METHOD="GET" NAME="form3">
<%=MyFunctionResultsExceptPageSelect("pageselect")%>
<SELECT NAME="pageselect" ONCHANGE="document.form3.submit()" SIZE="1">
<OPTION VALUE="">Choose a Page</OPTION>
<OPTION VALUE="pageA">First Page</OPTION>
<OPTION VALUE="pageB">Second Page</OPTION>
</SELECT>
</FORM>

<%
Function MyFunctionResultsExceptPageSelect(key)

  Dim qs, x

  For Each x In Request.QueryString
    If x <> key Then
        qs = qs & "<input type=""hidden"" name="""&x&""" value="""&Request.QueryString(x)&""" />"
    End If
  Next

  MyFunctionResultsExceptPageSelect = qs

End Function
%> 
```

如果您想获取当前页面而不是手动指定它，请使用以下内容。在 javascript 片段中，在此处使用答案： [https](https://stackoverflow.com/a/5817566/2004151) ://stackoverflow.com/a/5817566/2004151 在 ASP 中，类似这样的内容： http: [//classicasp.aspfaq.com/files/directories-fso/how-do- i-get-the-name-of-the-current-url/page.html](http://classicasp.aspfaq.com/files/directories-fso/how-do-i-get-the-name-of-the-current-url/page.html)

# asp.net-mvc-4 - mvc 移动 Web 应用程序保存到本地设备

> ID：14482360
> 
> 赞同：0
> 
> 时间：2013-01-23T14:44:04.600
> 
> 标签：asp.net-mvc-4

是否可以将一些设置从移动 mvc 应用程序保存到设备？我只有一些我想保存在一个非常小的文件中的项目，当他们加载网页时，它可以从本地位置加载这些设置？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:20:14.007

有几种方法可以实现这一点，其中一种是支持 HTML 5 的[Webstorage，例如 localStorage 或 SessionStorage](http://www.w3schools.com/html/html5_webstorage.asp)以及其他[链接 -](http://www.html5rocks.com/en/features/storage)关于 Webstorage 的 HTML5ROCKS 这当然需要用户拥有最新的浏览器！

小例子：

```
 localStorage.setting ="1";
    document.getElementById("setting").innerHTML="your setting info " + localStorage.setting; 
```

.
另一种方法是将设置保存在数据库或服务器上的文件中。我假设后者将是您需要的。

# javascript - 仅当整个文本可以容纳时才显示 p 元素

> ID：14482363
> 
> 赞同：1
> 
> 时间：2013-01-23T14:44:12.727
> 
> 标签：javascript, html, css

为 div 高度设置动画时，我需要将元素堆叠进去，而不是逐渐显示。

这是我所拥有的：http: [//jsfiddle.net/WzC3g/](http://jsfiddle.net/WzC3g/)

```
<div class="introTextCont">
  <h2>Test</h2>
    <p class="introPara">Test 1</p>
    <p class="introPara">Test 2</p>
    <p class="introPara">Test 3</p>
</div> 
```

随着高度的增加，您可以看到文本的上半部分。需要发生的是随着高度的增加，显示完整的 p 元素。

这很难解释，所以有任何问题请提出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:16:16.897

你应该试试这个：

```
jQuery(document).ready(function(){
    var $items = jQuery(".introPara").css("visibility", "hidden");
    var $outer = jQuery('.introTextCont')
    $outer.animate({height: 100}, {
        duration: 2000,
        step: function(){
            if($items.length){
                var $test = $items.first();
                if($outer.height() > $test.offset().top + $test.outerHeight()){
                    $test.css("visibility", "");
                    $items = $items.slice(1);
                }
            }
        }
    });
}); 
```

[演示](http://jsfiddle.net/WzC3g/3/)

**为未定义的 $test编辑**次要代码更新，将更新 jsFiddle，但该网站似乎对我没有响应 :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:54:10.463

如果我理解正确，你必须改变 div 而不是改变它的高度。为此，您必须在 css 文件中使用“transform:scaleY(value)”属性。

例如：

```
div
{
transform: scaleY(2);
-ms-transform: scaleY(2); /* IE 9 */
-webkit-transform: scaleY(2); /* Safari and Chrome */
-o-transform: scaleY(2); /* Opera */
-moz-transform: scaleY(2); /* Firefox */
} 
```

# django - 将多个视图传递给模板

> ID：14482368
> 
> 赞同：0
> 
> 时间：2013-01-23T14:44:23.117
> 
> 标签：django, django-models, django-templates, django-views, django-class-based-views

我有一个页面应该显示一个事件和这个事件的演示文稿。在我的代码中，它们不相关（我仍然需要修复它）。在接收事件和讲座的主页上，视图是这样的：

**视图.py**

```
class EventoView(ListView):
    model = Evento
    template_name = 'home.html'
    context_object_name = 'evento_list'
    queryset = Evento.objects.all().order_by('-data')[:1]

class RegistroView(ListView):
    model = Registro
    template_name = 'home.html'
    context_object_name = 'registro_list'
    queryset = Registro.objects.all() 
```

问题是我只能传递事件对象，注册对象，显示讲座索引也必须传递，但是，只接受 Django 视图的 url。

**网址.py**

```
urlpatterns = patterns('',
    url(r'^$', EventoView.as_view(), name='home'), #I can't pass two views
    url(r'^cadastro/', CriarRegistroView.as_view(), name='cadastro'),
    url(r'^contato/', CriarContatoView.as_view(), name='contato'),
    url(r'^sobre/', SobreView.as_view(), name='sobre'),
    url(r'^admin/', include(admin.site.urls)),
) 
```

我怎么解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:04:13.577

看起来你可以[覆盖](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#django.views.generic.list.ListView) `ListView.get_context_data`

```
class RegistroView(ListView):

    model = Evento

    def get_context_data(self, **kwargs):
        context = super(RegistroListView, self).get_context_data(**kwargs)
        context['registros'] = Registro.objects.all()
        context['eventos'] = Evento.objects.all().order_by('-data')[:1]            
        return context 
```

我没有经验，`ListViews`所以我不知道我是否按照应该使用的方式使用它

# c++ - 使用 c++ 在 OS 服务之间进行通信

> ID：14482370
> 
> 赞同：0
> 
> 时间：2013-01-23T14:44:31.433
> 
> 标签：c++, linux, windows, service, communication

我正在开发 2 个 Windows 服务，其中一个会将图片和文字文件发送给另一个，而其他服务将给出一个字符串答案。该服务在同一台计算机上。

我也会开发相同程序的 Linux 版本。

哪种方式最适合 Linux 和 Windows 中的服务之间的通信。

顺便说一句，我正在使用 C++ 开发该服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:47:19.107

我建议阅读 C++ 套接字。您可能会想要使用 TCP 套接字，因为您想要确保传输的数据正确无误。

尝试检查这些链接：

[Linux 套接字](http://www.linuxhowtos.org/C_C++/socket.htm)

[Windows 套接字](http://www.codeproject.com/Articles/13071/Programming-Windows-TCP-Sockets-in-C-for-the-Begin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:56:47.367

您应该搜索[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)。
进程间通信有很多可能性。因为您对您的问题和要求不是很具体，但我建议您看一下[boost::interprocess](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess.html)。

只要您确定这两个服务都在同一台机器上运行，就可以做到。
如果你想切换到分布式方法，你需要一些不同的东西。
像[XML-RPC](http://en.wikipedia.org/wiki/XML-RPC)、[thrift](http://thrift.apache.org/)或[corba](http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture)。只是提到一些可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:59:10.233

您的任务有不同的选项：

1.  网络。在您的服务之间建立 TCP 连接，服务作为客户端请求，服务作为服务器应答。可以使用 Boost.Asio 或任何其他可移植网络库来实现跨平台解决方案。
2.  共享内存。您可以使用共享内存实现进程间通信。跨平台库：Boost.Interprocess。
3.  管道。我不知道这个跨平台库。

我建议使用 TCP 通信作为更灵活的解决方案。

# encryption - 使用众所周知的加密算法有什么好处？

> ID：14482375
> 
> 赞同：-2
> 
> 时间：2013-01-23T14:44:49.163
> 
> 标签：encryption, des

我可以轻松地手工制作我自己的加密算法，如下所示：

```
// make sure the private key is long enough
byte key[] = {0x3e, 0x33, 0x7e, 0x02, 0x48, 0x2a, 0x4e, ...};
byte data[] = "a string to be encrypted".getBytes("utf-8");
for (int i = 0, j = 0; i < data.length; ++i, ++j) {
    data[i] ^= key[j];
    if (j + 1 == key.length)
        j = 0;
} 
```

使用上面的算法，如果我不把私钥泄露出去，我发现破解加密没有简单的方法（或者我太天真了？），如果可以像这样轻松创建加密算法，那么创建的意义何在标准？使用那些众所周知的算法有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:19:33.590

[为了不成为 Dave](https://security.stackexchange.com/questions/25585/is-my-developers-home-brew-password-security-right-or-wrong-and-why/)，您使用了一种众所周知的算法。

[施奈尔定律](https://www.schneier.com/blog/archives/2011/04/schneiers_law.html)指出，“任何人都可以发明一个如此聪明的安全系统，以至于她或他想不出如何破解它。”

这基本上意味着：不能假设安全系统（加密算法，身份验证系统......）是安全*的，因为创建者*说它是安全的。该主题的其他专家**必须对其进行审查**（并且通常审查很长时间）才能被认为是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:09:35.293

直接与您提出的算法交谈，它存在几个主要问题：

1.  如果您的数据比您的密钥长，那么恢复您的密钥将变得非常容易，因为它就像一个 Vigenere Cipher。

2.  您只能使用密钥来加密单个消息。使用相同的密钥加密两条或多条消息会导致与在消息中重用密钥相同的问题，但更糟。

3.  因为您的密钥必须与消息一样长才能真正安全，所以您将面临密钥管理的噩梦。您如何存储与消息一样长的密钥？您如何安全地将其传达给任何想阅读它的人？如果你想加密一个 1GB 的文件怎么办？您现在需要 2GB 的存储空间来存储您的加密版本

4.  您的密钥必须是完全随机的。随机数生成器中的任何缺陷都会暴露有关您的消息和密钥的信息。诚然，这也是 AES 等算法的问题，但是虽然糟糕的 RNG 会减少破坏 AES 消息/密钥的工作量，但它并不像您的方案那样糟糕

像 AES 这样的众所周知的算法可以解决这些问题，使用短密钥来获得更高的安全性。单个 256 位密钥可用于在使用变得不安全之前加密大量消息，并且管理和存储 256 位密钥比 1GB 密钥容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:50:47.227

使用众所周知的算法的主要好处是可以审查和分析它的缺陷和弱点。如果您自己滚动，您将无法获得社区审查的好处。此外，根据您的平台，使用内置加密可能几乎一样容易，或者同样容易。

我不是密码分析方面的专家，但这么简单的事情可能并不那么安全。

再说了，要是这么容易，大家不都做吗？

# css - Bootstrap 粘性页脚代码在高度和填充之间发生冲突

> ID：14482376
> 
> 赞同：1
> 
> 时间：2013-01-23T14:44:54.380
> 
> 标签：css, twitter-bootstrap, height

我正在尝试将sticky-footer.html 示例添加到我的引导项目中。然而，在我的布局中，body 类中存在代码冲突。

在我的带有引导响应的固定导航栏的页面代码中使用：

```
 body {
    padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
} 
```

在粘性页脚示例中，它使用：

```
 html,
  body {
    height: 100%;
    /* The html and body elements cannot have any padding or margin. */
  } 
```

目前我的css中包含了两个body标签。除了在桌面页面宽度版本上之外，一切都在工作，在下面的当前 css 中，我得到了一个具有额外深度的粘性页脚，并且页面有一个垂直滚动条，即使它不需要一个？这一切都与这个身体标签冲突和额外的`60px`.

```
 /* Sticky footer styles
  -------------------------------------------------- */

  html,
  body {
    height: 100%;
    /* The html and body elements cannot have any padding or margin. */
  }

  /* Wrapper for page content to push down footer */
  #wrap {         
    min-height: 100%;
    height: auto !important;
    height: 100%;
    /* Negative indent footer by it's height */
    margin: 0 auto -190px;
  }

  /* Set the fixed height of the footer here */
  #push,
  #footer {
    margin-top:20px;
    height: 190px;      
  }
  #footer {       
background-image:url(assets/img/herringboneLight.jpg);   
  }

  /* Lastly, apply responsive CSS fixes as necessary */
  @media (max-width: 767px) {
    #footer {

    }
  }

 body {
    padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
 } 
```

干杯亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:53:59.093

我不知道您要支持哪些浏览器，但我相信一个 CSS3 解决方案（[实际上在 IE8+ 中](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)）会改变`box-sizing`on `body`：

```
body {
    padding-top: 60px;
    -moz-box-sizing: padding-box; /* or border-box */
    -webkit-box-sizing: padding-box; /* or border-box */
    box-sizing: padding-box; /* or border-box */
} 
```

这应该导致`height: 100%`包括`60px`在总量中。它在 Firefox 中工作，所以[这个小提琴](http://jsfiddle.net/2GBKF/)有滚动条，[这个没有](http://jsfiddle.net/2GBKF/1/)。

# c++ - 将对象与左侧的常数相乘

> ID：14482380
> 
> 赞同：9
> 
> 时间：2013-01-23T14:45:07.890
> 
> 标签：c++, templates, operator-overloading, member-functions, non-member-functions

我有一个`Matrix`类，它具有`*`用于标量和矩阵乘法的重载运算符。

```
template <class T> class Matrix
{
    public:
        // ...
        Matrix operator*(T scalar) const;
        // ...
}

// ...

template <class T>
Matrix<T> Matrix<T>::operator*(T RightScalar) const
{
    Matrix<T> ResultMatrix(m_unRowSize, m_unColSize);
    for (uint64_t i=0; i<m_unRowSize; i++)
    {
        for (uint64_t j=0; j<m_unColSize; j++)
        {
            ResultMatrix(i, j) = TheMatrix[m_unColSize * i + j] * RightScalar;
        }
    }
    return ResultMatrix;
}

// ... 
```

我可以将矩阵对象与右侧的标量相乘，没有任何问题：

```
Matrix<double> X(3, 3, /* ... */);  // Define a 3x3 matrix and initialize its contents
Matrix<double> Y;                   // Define an output matrix
Y = X * 10.0;                       // Do the linear operation 
```

但是，我如何以同样的方式从左侧乘以它？

```
Matrix<double> X(3, 3, /* ... */);
Matrix<double> Y;
Y = 10.0 * X; 
```

在算术中，在进行乘法运算时，将常量写在左侧是一种常见的表示法。我想遵守这条规则以使我的代码更具可读性。

是否可以在 C++ 中实现这一点？
如果可能，如何修改代码中的类方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T14:48:41.313

成员函数由其左侧参数匹配，即 this 指针。由于本机类型不能具有成员函数，因此您必须通过非成员函数添加与用户定义类型的右乘法（以及您没有写入权限的其他类型）。

```
template<typename T>
Matrix<T> operator*(T const& scalar, Matrix<T> rhs)
{
    // scalar multiplication is commutative: s M = M s
    return rhs *= scalar; // calls rhs.operator*=(scalar);
} 
```

**注意**：我上面写的非会员`operator*`是按照会员来实现的`operator*=`。建议将所有乘法编写为非成员函数，并使用成员`operator*=`通过 lhs 矩阵元素来实现这些乘法。

这将 a) 保持类接口最小，并且 b) 防止隐藏转换。例如，如果维度为 1x1，您可以有一个可以隐式转换为标量的 Matrix 类，如果您不提供直接匹配的单独重载，这些转换可能会静默发生。

```
template<typename T>
Matrix<T> operator*(Matrix<T> lhs, T const& scalar)
{
    return lhs *= scalar; // calls lhs.operator*=(scalar);
}

template<typename T>
Matrix<T> operator*(Matrix<T> lhs, Matrix<T> const& rhs)
{
    return lhs *= rhs; // calls lhs.operator*=(rhs);
} 
```

请注意 lhs 矩阵如何是副本而不是参考。这允许编译器进行优化，例如复制省略/移动语义。另请注意，这些运算符的返回类型是`Matrix<T>`而不是`const Matrix<T>`某些旧 C++ 书籍中推荐的类型，但它阻止了 C++11 中的移动语义。

```
// class member 
template<typename T>
Matrix<T>& Matrix<T>::operator*=(Matrix<T> const& rhs)
{
    // your implementation
    return *this;
}

// class member 
template<typename T>
Matrix<T>& Matrix<T>::operator*=(T const& scalar)
{
    // your implementation
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-23T14:47:20.083

为此，您需要一个非成员函数：

```
template <typename T>
Matrix<T> operator*(T scalar, Matrix<T> const & matrix) {
    return matrix * scalar;
} 
```

非成员运算符重载允许您在任一侧指定任何类型，而成员重载始终获取左侧的对象。

# c# - 使用 Word 文档中的复选框将文本添加到页眉

> ID：14482381
> 
> 赞同：0
> 
> 时间：2013-01-23T14:45:11.033
> 
> 标签：c#, visual-studio-2010, checkbox, header, ms-word

我需要创建一个 word 模板，将链接到复选框的文本添加到文档每一页的页眉。

我需要文档中的 4 个复选框，当它们被点击时，它们会在标题中添加不同的文本，我已经完成了这个功能来将文本添加到文档的正文页面，但我一生都无法弄清楚我是如何做到的可以在标题中得到它。

此外，如果这需要使用 Visual Studio，我的模板可以导出为单个文件吗？还是我总是需要项目文件夹才能打开包含附加代码的模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:13:02.360

请看以下页面。也许它会帮助你。

如何：向文档添加页眉和页脚[http://msdn.microsoft.com/en-us/library/vstudio/ms178795(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms178795(v=vs.100).aspx)

# asp.net - 登录后无法访问 WCF 服务

> ID：14482384
> 
> 赞同：0
> 
> 时间：2013-01-23T14:45:18.990
> 
> 标签：asp.net, json, wcf, asp.net-ajax, impersonation

部署到我们的预生产环境时，我遇到了 WCF 问题。它在本地运行良好。我收到的 AJAX 消息是出现解析错误，但我无法在 preprod 服务器上获取任何跟踪日志记录，但同样，日志记录在我的本地（具有相同的 webconfig 设置）上工作正常。
Traces.svlog 将在 preprod 上记录任何内容的唯一时间是卸载应用程序域时。在我的本地，我可以抛出故意的异常，这将被记录在日志中。

如果我已登录，则无法导航到服务路径，而是引发异常（见下文）。但是，如果我没有登录，我可以访问服务页面并单击 wsdl，查看方法等。我知道登录后出了什么问题。

例外：

```
Process information: 
Process ID: 4796 
Process name: w3wp.exe 
Account name: NT AUTHORITY\NETWORK SERVICE 

Exception information: 
Exception type: InvalidCastException 
Exception message: Unable to cast object of type
System.ServiceModel.Activation.HttpHandler' to type 'System.Web.UI.Page'. 

Request information: 
Request URL: http://100.100.100.104/Application/Webservices/People.svc/GetAllActive
Request path: /Application/Webservices/People.svc/GetAllActive
User host address: 102.24.1.152 
User:  
Is authenticated: False 
Authentication Type:  
Thread account name: domainA\userB

Thread information: 
Thread ID: 7 
Thread account name: domainA\userB
Is impersonating: True 
Stack trace:    at ASP.global_asax.Application_PreRequestHandlerExecute
                (Object sender, EventArgs e)
at
System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我们在 preprod 环境中运行 IIS6。

起初，我注意到 IISManager -> AppplicationProperies->HomeDirectory->Configuration 中没有 svc 扩展。然后我手动添加了它。

在此之后，由于我在其他地方读到的内容，我还从正确的位置运行了以下两个命令：

```
aspnet_regiis -i

ServiceModelReg.exe -i 
```

同样，他们没有采取任何措施来修复错误。

我的主要困惑是，只要我没有登录，我就可以输入 URL 并访问 svc wsdl。从上面的错误消息中可以看出，我们的 webconfig 正在使用模拟 - 不确定这是否有任何影响。

我的服务目录结构是这样的

```
Application
->AppCode
...->People.vb
->DirA
...->DirB
......->Calling.aspx
->WebServices
...->People.svc 
```

我在 Calling.aspx 中的 ajax 调用如下所示：

```
jQuery_1_8_3(document).ready(function() {

    jQuery_1_8_3.ajaxSetup({
        data: "{}",
        dataType: "json",
        type: "POST",
        contentType: "application/json",
        converters: {
            "json jsond": function(msg) {
                return msg.hasOwnProperty('d') ? msg.d : msg;
            }
        }

    });

    jQuery_1_8_3.ajax({
    url: "../../Webservices/People.svc/GetAllActive",
        success: function(resdata) {

            //etc
        }
    }); 
```

svc 如下所示：

我的 Vb 如下所示：

```
<ServiceContract(Namespace:="people")> _
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)> _
Public Class People

<CLSCompliant(False)> _
<OperationContract()> _
<WebInvoke(BodyStyle:=WebMessageBodyStyle.Wrapped,  RequestFormat:=WebMessageFormat.Json, ResponseFormat:=WebMessageFormat.Json)> _
 Public Function GetAllActive() As PersonDetailDataContract()
   Dim service As New RepositoryService()
   Dim personList As IList(Of Interfaces.ModelInterfaces.IPersonDetail)
    personList = service.GetAllPersonDetails()

    Dim contractList As New ArrayList()

    For Each
     //Populate contractlist, etc
    Next

    Dim array() As PersonDetailDataContract
    array = contractList.Cast(Of PersonDetailDataContract)().ToArray()

    Return array

End Function

End Class 
```

正如你所看到的，我没有费心为合同创建一个单独的接口——我只是把它放在了具体的类上。

（我还匿名了代码和 IP 等）。

我的 Webconfig 如下所示（减去其他应用程序的大量其他内容。

```
<system.diagnostics>
    <trace autoflush="true"  />

    <sources>
        <source name="System.ServiceModel"
                switchValue="Information, ActivityTracing"
                propagateActivity="true">
            <listeners>
                <add name="traceListener"
                    type="System.Diagnostics.XmlWriterTraceListener"
                    initializeData= "C:\svclogs\Traces.svclog" />
            </listeners>
        </source>
   </sources>
</system.diagnostics>
<system.serviceModel>
  <diagnostics>
      <messageLogging
          logMessagesAtTransportLevel="true"
          logMessagesAtServiceLevel="true"
          logMalformedMessages="true"
          logEntireMessage="true"
          maxSizeOfMessageToLog="65535000" maxMessagesToLog="500" />
  </diagnostics>
  <behaviors>
      <serviceBehaviors>
          <behavior name="PeopleTypeBehaviors" >
              <serviceMetadata httpGetEnabled="true" />
              <serviceDebug includeExceptionDetailInFaults="true" />
          </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
          <behavior name="json">
              <webHttp/>

          </behavior>
      </endpointBehaviors>
  </behaviors>
  <services>
      <service name="People" behaviorConfiguration="PeopleTypeBehaviors">

          <endpoint address="" 
                    behaviorConfiguration="json"
                    binding="webHttpBinding" 
                    contract="People" />
          <endpoint contract="IMetadataExchange" 
                    binding="mexHttpBinding" 
                    address="mex" />
      </service>
  </services>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
 </system.serviceModel> 
```

我在这里变得有点难过，而且我对任何类型的 WebServices 都很陌生。但是，我希望我已经提供了足够的信息，以便其他人可以看到这个问题。

任何帮助都感激不尽。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:54:02.557

答案是 global_asax.Application_PreRequestHandlerExecute 中存在问题（线索在翻转异常中-doh！）

该过程试图将处理程序转换为一个页面，这显然不是一个 ajax 请求。我只是在强制转换处理程序调用上放了一个 trycast，其余过程被绕过，允许请求返回结果。

# php - php如何格式化十进制数？

> ID：14482393
> 
> 赞同：1
> 
> 时间：2013-01-23T14:45:40.600
> 
> 标签：php, if-statement, compare

我有一个像 $amount = '1,120.01' 这样的数字，我需要与一个整数进行比较（例如 if($amount < 300) { do this } }。但是由于某些原因，php 看到这样的数字（1,120.01 或 300.00）有一个较低的价值，所以我想知道我应该如何格式化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:02:48.980

你可以试试

```
$amount = '1,120.01';
$amount = format($amount);

if ($amount < 300) {
    echo $amount, " less than 300", PHP_EOL;
} else {
    echo $amount, " grater than 300", PHP_EOL;
} 
```

输出

```
1120.01 grater than 300 
```

使用的功能

```
function format($number) {
    $places = strlen(substr(strrchr($number, "."), 1));
    $number = filter_var($number, FILTER_SANITIZE_NUMBER_INT);
    return $number / pow(10, $places);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:49:49.763

您可以使用此代码转换字符串...如上所示

[https://stackoverflow.com/a/14482490/627868](https://stackoverflow.com/a/14482490/627868) Ksg 答案。

```
<?php
$string_number = '1,120.01';

$number = (str_replace(',','',$string_number));

print $number;

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:50:03.513

您可以从金额中去掉逗号并进行比较 `if(((float)str_replace(',','',$amount)) < 300)`

# java - JButton MouseListener 没有响应

> ID：14482394
> 
> 赞同：0
> 
> 时间：2013-01-23T14:45:43.517
> 
> 标签：java, swing, awt, jbutton, mouselistener

我正在尝试构建一个扫雷类型的游戏，更具体地说，是曾经在 MSN 游戏中出现的两个玩家。我有一个 Tile 对象的多维数组。每个 Tile 都有一个状态（地雷、空白或相邻的地雷数量）。我有一个处理程序所有前端方面的 GUI 类。

每个 Tile 都扩展了 JButton 并实现了 MouseListener，但是当我单击一个按钮时，它不会触发相应按钮/tile 的 MouseClicked 方法。

代码如下：

```
public class Tile extends JButton implements MouseListener {

private int type;

public Tile(int type, int xCoord, int yCoord) {
    this.type = type;
    this.xCoord = xCoord;
    this.yCoord = yCoord;
}

public int getType() {
    return type;
}

public void setType(int type) {
    this.type = type;
}

@Override
public void mouseClicked(MouseEvent e) {
    System.out.println("Clicked");
}

} 
```

和 GUI 类：

```
public class GUI extends JPanel {

JFrame frame = new JFrame("Mines");
private GameBoard board;
private int width, height;

public GUI(GameBoard board, int width, int height) {
    this.board = board;
    this.width = width;
    this.height = height;
    this.setLayout(new GridLayout(board.getBoard().length, board.getBoard()[0].length));
    onCreate();
}

private void onCreate() {
    for (int i = 0; i < board.getBoard().length; i++) {
        for (int j = 0; j < board.getBoard()[i].length; j++) {
            this.add(board.getBoard()[i][j]);
        }
    }

    frame.add(this);
    frame.setSize(width, height);
    frame.setMinimumSize(this.minFrameSize);
    frame.setPreferredSize(new Dimension(this.width, this.height));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}
} 
```

GUI 类 JPanel 是否拦截阻止按钮接收单击事件的 MouseClick 事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:48:12.080

当一个按钮被点击时（无论你用什么来点击它，包括键盘），它都会触发一个 ActionEvent。您应该使用 ActionListener 而不是 MouseListener。

阅读[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)。

扩展 Swing 组件也是不好的做法。你应该*使用*它们。一个按钮不应该听自己的。按钮的用户应该监听按钮事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:48:25.737

它不会触发，因为您没有将侦听器分配给按钮：

```
public Tile(int type, int xCoord, int yCoord) {
    this.type = type;
    this.xCoord = xCoord;
    this.yCoord = yCoord;
    addMouseListener(this); // add this line and it should work
} 
```

但是，如果你只是想听点击，你应该使用 ActionListener 而不是 MouseListener

# java - 电子表格程序

> ID：14482395
> 
> 赞同：1
> 
> 时间：2013-01-23T14:45:44.053
> 
> 标签：java, serialization, spreadsheet

我需要设计和实现（使用 Java 语言）电子表格的功能，以“创建新”电子表格。此外，实现从/到持久存储的“加载”和“存储”功能。要求必须正确维护适用于单个单元格、单元格列、单元格行和单元格区域的功能。

我可以使用对象序列化来实现“加载”和“存储”这些功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:47:50.830

> 我可以使用对象序列化来实现“加载”和“存储”这些功能吗？

简单的回答：**是的。**

对象序列化可用于将对象存储到持久存储，对象反序列化可用于从持久存储加载对象。参见例如[对象序列化简介](http://www.javabeginner.com/uncategorized/java-serialization)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:49:22.247

是的，您可以使用对象序列化来实现加载和存储功能，前提是您有一个可以实现所有其他要求的电子表格类和[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-28T19:22:12.080

是的。

创建一个简单的类来表示包含所有数据的电子表格。然后，在您的保存方法中，在您要保存到的文件上打开一个 ObjectOutputStream。使用流来保存您的电子表格对象。要打开/加载，请打开 ObjectInputStream 并加载对象，将其转换为电子表格对象。然后坐下来喝杯冷饮，惊叹于 Java 的荣耀。

# firefox - 状态栏没有在 FireFox 中更新？

> ID：14482402
> 
> 赞同：0
> 
> 时间：2013-01-23T14:45:56.793
> 
> 标签：firefox, activex, npapi

我正在使用一个现有的 ActiveX 控件，我们有一个 NPAPI，它在 FireFox 中的大部分工作都很好。它有一个问题，我对 NPAPI 完全不熟悉。在 IE9 中，控件更新状态栏就好了，但在 FireFox v18.0.1 中，它似乎没有更新状态栏。我们调用 NPN_Status() 来执行此操作，并且调用似乎很好，它也被从主线程调用，正如文档所建议的那样。

如果我恢复到像 v3 这样的旧版本的 FireFox，我们的控件会更新状态栏，但在 v4 及更高版本中似乎不会。我在 FireFox 中安装了 Status-4-Evar 插件，以便更容易查看状态，因为 v4 并没有真正的状态栏，状态只是在角落里弹出然后消失。我尝试更新到最新的 xulrunner-sdk v18.0.1，因为我们的控件使用的是旧版本，但并没有什么不同。

我可以拨打一些 NPN_XXX 电话来检查是否发生了错误吗？

在我看到的文档中：

> 浏览器总是显示它收到的最后一条状态行消息，不管消息来源是什么。您的消息始终会显示，但您无法控制在另一条消息替换它之前它在状态行中停留的时间。

我只在状态中看到“完成”，“完成”是否不断发送到状态行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:22:25.147

对于进程外插件（在那个时间框架内实现），这还没有实现。
见[这里](https://bugzilla.mozilla.org/show_bug.cgi?id=554186)和[这里](http://hg.mozilla.org/mozilla-central/annotate/e9f39220b8e7/dom/plugins/ipc/PluginModuleChild.cpp#l1249)。

# excel - excel邮件验证公式

> ID：14482403
> 
> 赞同：20
> 
> 时间：2013-01-23T14:45:57.853
> 
> 标签：excel, excel-2007

我有一列人们手动输入电子邮件地址。我想使用以下公式验证电子邮件地址：

```
=AND(FIND(“@”,A2),FIND(“.”,A2),ISERROR(FIND(” “,A2))) 
```

但是 excel 出现错误，您键入的公式包含错误。对我来说，这个公式看起来是对的。你们有什么建议吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-23T15:09:11.487

我的代码出现了同样的错误，而且您似乎没有“普通”双引号，这与此符号不同：`"`。

试试我的拼写：`=AND(FIND("@",A2),FIND(".",A2),ISERROR(FIND(" ",A2)))`- 希望会有所帮助！

**编辑：**

此外，请考虑使用`=AND(NOT(ISERROR(FIND("@",A1))),NOT(ISERROR(FIND(".",A1))),ISERROR(FIND(" ",A1)))`- 以防止出现错误`@`或`.`丢失。尽管如此，这将通过 OK `aaa@.`，但我想即使是这种直接的方法也有权使用）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-10T20:44:01.297

在 excel 中验证电子邮件的另一种方法是使用 VBA 代码：请参阅下面的代码，取自[http://www.vbaexpress.com/kb/getarticle.php?kb_id=281](http://www.vbaexpress.com/kb/getarticle.php?kb_id=281)，它工作得很好，您可以修改基于代码根据您的需要。

```
Sub email() 
Dim txtEmail As String 
txtEmail = InputBox("Type the address", "e-mail address") 

Dim Situacao As String 

 ' Check e-mail syntax
If IsEmailValid(txtEmail) Then 
    Situacao = "Valid e-mail syntax!" 
Else 
    Situacao = "Invalid e-mail syntax!" 
End If 
 ' Shows the result
MsgBox Situacao 
End Sub 
Function IsEmailValid(strEmail) 
Dim strArray As Variant 
Dim strItem As Variant 
Dim i As Long, c As String, blnIsItValid As Boolean 
blnIsItValid = True 

i = Len(strEmail) - Len(Application.Substitute(strEmail, "@", "")) 
If i <> 1 Then IsEmailValid = False: Exit Function 
ReDim strArray(1 To 2) 
strArray(1) = Left(strEmail, InStr(1, strEmail, "@", 1) - 1) 
strArray(2) = Application.Substitute(Right(strEmail, Len(strEmail) - Len(strArray(1))), "@", "") 
For Each strItem In strArray 
    If Len(strItem) <= 0 Then 
        blnIsItValid = False 
        IsEmailValid = blnIsItValid 
        Exit Function 
    End If 
    For i = 1 To Len(strItem) 
        c = LCase(Mid(strItem, i, 1)) 
        If InStr("abcdefghijklmnopqrstuvwxyz_-.", c) <= 0 And Not IsNumeric(c) Then 
            blnIsItValid = False 
            IsEmailValid = blnIsItValid 
            Exit Function 
        End If 
    Next i 
    If Left(strItem, 1) = "." Or Right(strItem, 1) = "." Then 
        blnIsItValid = False 
        IsEmailValid = blnIsItValid 
        Exit Function 
    End If 
Next strItem 
If InStr(strArray(2), ".") <= 0 Then 
    blnIsItValid = False 
    IsEmailValid = blnIsItValid 
    Exit Function 
End If 
i = Len(strArray(2)) - InStrRev(strArray(2), ".") 
If i <> 2 And i <> 3 Then 
    blnIsItValid = False 
    IsEmailValid = blnIsItValid 
    Exit Function 
End If 
If InStr(strEmail, "..") > 0 Then 
    blnIsItValid = False 
    IsEmailValid = blnIsItValid 
    Exit Function 
End If 
IsEmailValid = blnIsItValid 
End Function 
```

有关如何说明检查[http://www.vbaexpress.com/kb/getarticle.php?kb_id=281#instr](http://www.vbaexpress.com/kb/getarticle.php?kb_id=281#instr)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-26T13:39:24.347

我遇到了一个问题`firstname.lastname@domain@topdomain`，我对此进行了修改，检查了正确的顺序`@`和不带 VBA`.`的隐式。`Like`

```
=AND(NOT(ISERROR(VLOOKUP("*@*.*",A2,1,FALSE))),ISERROR(FIND(" ",A2))) 
```

 **`"*?@?*.??*"`只要顶级域至少有两个字符长（截至本文为止），**EDIT似乎更具描述性。****

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-25T11:27:26.293

`=AND(IFERROR(FIND(".",A2),FALSE),IFERROR(FIND(".",A2,FIND("@",A2)),FALSE))`

这将验证 . 在未在接受的答案上测试的 @ 之后**

# classloader - 使用 wso2 应用服务器 5.0.1，我可以在我的 webapp 中使用 cxf 2.7.2 吗？

> ID：14482408
> 
> 赞同：1
> 
> 时间：2013-01-23T14:46:09.230
> 
> 标签：classloader, wso2

我的 webapp 包含 CXF 2.7.2 jar 文件。当部署到 WSO2 应用服务器时，加载的类来自部署在 repository/components/plugins/ 中的早期版本的 CXF，而不是来自 war 中包含的库。

如何让 webapp 使用 WAR 文件中包含的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:17:39.937

我有兴趣知道同样的事情。同时，我决定将我的应用程序部署为 Web 应用程序而不是 JAX-RS Web 服务，并在 webapp 中包含了 CXF 2.7.2 库和相关依赖项（在 WEB-INF/lib 中）。这对我有用，但我将其用作临时解决方案，直到我们对上述问题有更好的答案。

# objective-c - 有人可以向我解释 %f 和 %d 的目的吗？

> ID：14482409
> 
> 赞同：1
> 
> 时间：2013-01-23T14:46:09.130
> 
> 标签：objective-c, c

```
#include <stdio.h>

 int main(int argc, const char * argv[])
 {

    float apples = 1.1;

    float bananas = 2.2;

    double fruit = apples + bananas;

    printf("%f.\n",fruit);

    return 0;

 } 
```

好吧....那么为什么需要 %f 呢？我知道它正在为我打印“水果”的十进制表示法，但为什么我不能只要求程序打印数字“水果”？是因为我必须声明我是否希望以十进制 %f 或科学记数法 %e 打印“水果”？我有时也遇到过 %d。这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:03:49.013

好吧，如果你看一下[printf 函数的定义](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fprintf.html)，那么你就会知道这些值是作为 %d 传递的：int 格式说明符 %f：float 格式说明符

被称为格式说明符

printf 也是库中定义的一个简单方法，根据参数打印值

例如

```
int a = 5;
float b = 5.43 ; 
```

现在如果你写

```
printf("%d",a); 
```

它打印存储在变量 a ==>> 中的整数值，即 5

```
printf("%f",b); 
```

它打印存储在变量 b ==>> 中的浮点值，即 5.430000 // 最多六位数

如果您尝试使用代码

```
printf("%f",a);
printf("%d",b); 
```

这两行都打印了称为垃圾值的尴尬值，因为您使用了错误的格式说明符，因此从未知位置获取

你可以参考[链接](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fprintf.html)

# [1](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fprintf.html) : [http://www.elook.org/programming/c/printf.html](http://www.elook.org/programming/c/printf.html)获取格式说明符列表

至 Alok Save :

看到这有点复杂，如果我无法解释清楚，请告诉我，我将尝试创建一个具有更好答案的差异问题。

实际发生的是当你写

```
int a = 5 // 101 in binary 
```

然后在内存中分配 2 个字节 = 16 位，例如

* * *

0000000000000101

但是当您尝试通过将 %f 作为格式说明符将其打印为浮点数时，它会要求 4 字节 = 32 位表达式，但您得到的是 16 位表示，最重要的一点是浮点数的第 16 位保留用于 ' 。那是十进制，所以你的

* * *

0000000000000101 变为

* * *

10.  = 二进制的 10 // 十进制的 2

因此小数点前的值变为 2 而不是 5，并且由于浮点数仍然有 16 位表示小数点后的值，而 int 变量仅提供 16 位来表示小数点前的值，因此表示小数点后值的最后 16 位选择垃圾values 这些垃圾值代表一些随机二进制值最终会产生一些值

所以你的输出永远是 2.something

这部分对于每台机器都会有所不同，因为它会选择垃圾值，但在给出的解释之后，小数点前的值总是相同的

我希望这服务

但如果它不让我知道

# 我会努力想出一个更好的代表

该[链接](https://stackoverflow.com/questions/6910115/how-to-represent-float-number-in-memory-in-c)也将非常有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:00:49.563

该`printf`函数的原型是

```
int printf(const char * restrict format, ...); 
```

第一个参数始终是描述输出*格式*的文本字符串（因此你不能只写`printf(fruit);`）。`...`表示可以在格式字符串之后使用`printf`零个或多个附加参数（这称为*可变参数*函数）。

不幸的是，可变参数函数不会自动知道在参数列表的可变部分中传递给它们的参数的数量或类型。他们只是在最后一个固定参数之后看到下一个可用参数的起始地址。您必须以某种方式将该信息作为固定参数的一部分传递。使用`printf`，附加参数的数量和类型由格式字符串中的*转换说明符指示。*所以当你写

```
printf("%f\n", fruit); 
```

转换说明符`%f`告诉格式字符串后面`printf`还有一个类型的附加参数。`double`转换说明符还告诉`printf`如何格式化值以进行显示。例如，在

```
printf("%7.2f\n", fruit); 
```

转换说明符`%7.2f`告诉`printf`将值显示为 7 个字符宽的字段，小数点后有 2 位数字，或`9999.99`.

如果参数的类型与转换说明符不匹配，则行为未定义。例如，如果你写

```
printf("%d\n", fruit); 
```

当您真正传递 a 时，您会告诉`printf`期望a ，这是一个逻辑错误。根据底层架构，可能会发生许多不同的事情，因此行为*未定义*，编译器不必对此做任何特别的事情；*任何*结果都被认为是“正确的”。真正好的编译器会发出参数与转换说明符不匹配的诊断。大多数人会简单地按原样翻译代码，结果可能是从意外输出到访问冲突的任何结果。 `int``double`

 **同样，如果您没有传递足够的参数来匹配转换说明符的数量，则行为未定义：

```
printf("%f %d\n", fruit); 
```

如果您传递*的*参数多于转换说明符，则会评估其他参数，否则会被忽略：

```
printf("%f\n", fruit, apples, bananas); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:47:33.437

`%d`是用于打印整数的格式说明符，`%f`打印双精度数。您需要使用格式说明符指定要打印的类型，因为 中使用的参数数量可变`C`，以便编译器知道下一个参数是什么类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:47:33.610

`"%f"`格式说明符是一种特殊的字符串格式，用于指示您`printf`要打印的内容`double`。（[更多详情](https://stackoverflow.com/questions/4264127/correct-format-specifier-for-double-in-printf)）

`"%d"`格式说明符是一种特殊的字符串格式，用于指示您`printf`要打印`decimal`或`integer`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T14:48:37.493

`printf`无法猜测您的变量是什么类型。因此你给他一个提示：格式。然后该函数可以将您的参数解释为给定类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T14:50:14.387

`printf`代表`print formatted`，这意味着您向它提供两种数据：

*   如何呈现数据（格式字符串）
*   要呈现什么数据（其余的）。

的格式字符串语法`printf`在支持此功能的语言之间或多或少是统一的。维基百科有一个很好的描述：[格式化占位符](http://en.wikipedia.org/wiki/Printf_format_string#Format_placeholders)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T16:38:24.277

如果您不希望 4.11 等数字变为 4.110000，您可以使用 %g 而不是 %f。%g 使用 %f 或 %e （智能确定编译器在这种情况下找到更好的方式），它可以很好地在数字末尾切割零。

Scanf 也不是类型安全的，你需要告诉编译器你想要使用什么类型的数据。还有 %d 和 %f ，区别在于 %f 仅指浮点数而不是双精度数。使用 scanf 时，%lf 指的是双精度。**

# magento - 无法让 TAX 在 Magento 中工作

> ID：14482410
> 
> 赞同：3
> 
> 时间：2013-01-23T14:46:10.867
> 
> 标签：magento, magento-1.7

我正在尝试将我的税率设置为 21%。但是前端计算0%。

有谁知道我在这里忘记了什么？

![1](../Images/540ab5d55a768ba22073d8d38c7d5ab4.png)

![2](../Images/23a10ce4c4c8feecce839771a632d154.png)

![3](../Images/e91692fc1921611c26ec5d8170476344.png)

![结果](../Images/dfd30cb85af93d50f875653338757e25.png)

注意：BTW 是 TAX 的翻译

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T20:59:36.490

您还必须在**Shipping Settings中设置****Origin**：

 **![运输设置中的原产地](../Images/c9483f0156289cef3d0a1ce1e5995d87.png)

另外，检查您的产品是否有**增值税类别**：**应税商品**（编辑产品，**价格选项卡**）： ![在此处输入图像描述](../Images/18be6176184862d5c471987e33cf3f06.png)**

# windows-phone-8 - wp8 I/O异常处理

> ID：14482411
> 
> 赞同：2
> 
> 时间：2013-01-23T14:46:12.853
> 
> 标签：windows-phone-8, c++-cx

如何在 windows phone 8、c++/cx 上捕获 I/O 异常？

编辑：这是一个完整的例子

检查文件“hello.txt”是否存在：

```
StorageFile^ Testme(String^ fileName)
{
    StorageFolder^ item =  ApplicationData::Current->LocalFolder; 
    try
    { 
        task<StorageFile^> getFileTask(item->GetFileAsync("hello.txt")); 
        getFileTask.then([](StorageFile^ storageFile)
        { 
           return storageFile;
         }); 
     }
     catch (Exception^ ex)
     {
        OutputDebugString(L"Caught the exception");
     }
     return nullptr;
} 
```

如果“hello.txt”存在，Testme 方法会像魅力一样返回文件 ptr。
如果“hello.txt 不存在，它不仅不会抛出异常 FileNOtFound，而是在调试器窗口中显示此内容而崩溃：

**MyPhoneApp.exe 中 0x71D49C01 (Msvcr110d.dll) 处的未处理异常：传递了无效参数到一个认为无效参数致命的函数。如果有这个异常的处理程序，程序可以安全地继续有**

什么问题，我将如何优雅地检查文件是否存在于 WP8 中？

我真的希望有人回答......谢谢.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:48:13.230

在花了几个小时找出相关问题中的问题后，我终于弄明白了。使用 C++，看起来 Visual Studio 的行为有点有趣。它没有将异常传递给用户，而是抛出它。这意味着即使您有异常处理程序，也不允许您的处理程序处理它。我应该在这里指出，这只发生在您在 Visual Studio 中运行您的应用程序时。部署和启动应用程序显示没有问题。

因此，要解决它，请打开异常设置（从菜单 > 调试 > 异常 - 或 Ctrl+D、E）。放大“C++ Exceptions”并取消选择“Thrown”列中的“Platform::InvalidArgumentException”。那么你应该很高兴。

第一条评论后更新：

首先，我也必须从列表中取消选择 COMException 才能使下面的示例正常工作。

除了上面做的。了解 C++/CX 中的异步编程很重要。创建任务后，您不能简单地从函数返回。如果你真的需要返回，你需要返回你创建的工作任务来完成这项工作。下面是一个 Windows 应用商店应用示例（不是 WP），但它们的工作方式应该相同。您的辅助函数必须如下所示。

```
concurrency::task<bool> TestFileExists::MainPage::Testme(String^ fileName)
{
    using namespace Windows::Storage;
    using namespace concurrency;

    StorageFolder^ item =  ApplicationData::Current->LocalFolder; 

    return create_task(item->GetFileAsync(fileName)).then([this](task<StorageFile^> t)
    {
            bool fileExists = true;

            try {
                    StorageFile^ file = t.get();
            }
            catch(Platform::Exception^ exp)
            {
                    fileExists = false;
            }

            return (fileExists);
    });
} 
```

你应该像下面这样称呼它。

```
Testme("hello.txt").then([this](concurrency::task<bool> t)
{
    auto dispatcher = Windows::UI::Core::CoreWindow::GetForCurrentThread()->Dispatcher;

    // dispatch the task of updating the UI to the UI task not to run into exception
    dispatcher->RunAsync(Windows::UI::Core::CoreDispatcherPriority::Normal,
        ref new Windows::UI::Core::DispatchedHandler(
        [=]()
    {
        bool exists = t.get();

        if (exists)
        {
            txtbFileExists->Text = L"File is there";
        }
        else
        {
            txtbFileExists->Text = L"File is NOT there";
        }

    }));

}); 
```

我不知道本地文件夹在哪里，所以我无法测试文件实际存在的条件。请测试并查看。

# directory - NuGet.exe 打包到我不需要的子文件夹中

> ID：14482413
> 
> 赞同：0
> 
> 时间：2013-01-23T14:46:26.493
> 
> 标签：directory, nuget, pack

当我执行

```
C:\Tools\Nuget\NuGet.exe pack C:\SomePath\Server\Server.nuspec -OutputDirectory D:\NuGet\Repository -basePath C:\SomePath\Server -Version 8.1.0.1 -NoPackageAnalysis 
```

创建的 .nupkg 文件包含一个名为 Server 的文件夹。如何调用 NuGet.exe 包，以便将文件夹 Server 的内容打包在包的根目录而不是子文件夹 Server 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:46:32.320

服务器文件夹中有标准的文件夹布局吗？（工具、库、内容）

否则

*   BasePath 是必需的吗？
*   如果你用 nuspec 文件调用 pack 会发生什么？无参数

# android - 使用 android.graphics.Movie 显示 .gif

> ID：14482415
> 
> 赞同：18
> 
> 时间：2013-01-23T14:46:32.057
> 
> 标签：android, animated-gif

我正在尝试，创建一个带有动画 GIF 的视图..

当我尝试在模拟器中运行以下代码时，一切正常。但是当我尝试在真正的智能手机中运行时，什么也没有发生..

我的观点：

```
public class GIFView extends View {

private Movie mMovie;
private long movieStart;

public GIFView(Context context) {
    super(context);
    initializeView();
}

public GIFView(Context context, AttributeSet attrs) {
    super(context, attrs);
    initializeView();
}

public GIFView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    initializeView();
}

private void initializeView() {
    InputStream is = getContext().getResources().openRawResource(
            R.drawable.cookies2);
    mMovie = Movie.decodeStream(is);
}

protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.TRANSPARENT);
    super.onDraw(canvas);
    long now = android.os.SystemClock.uptimeMillis();

    if (movieStart == 0) {
        movieStart = (int) now;
    }
    if (mMovie != null) {
        int relTime = (int) ((now - movieStart) % mMovie.duration());
        mMovie.setTime(relTime);
        mMovie.draw(canvas, getWidth() - mMovie.width(), getHeight()
                - mMovie.height());
        this.invalidate();
    }
}} 
```

我的活动：

```
public class MainActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     GIFView gifView = new GIFView(this);
     setContentView(gifView);
}} 
```

我的智能手机截图： ![我的智能手机截图](../Images/60fd3ffb2ec7ba688b1e62af0cad5265.png) 我的模拟器截图： ![我的模拟器截图](../Images/9417e224dd94a5efc7479ce4c4a66f08.png)

为什么我的应用无法在智能手机上运行？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-17T21:36:15.780

不要关闭整个应用程序的硬件加速。那是残废。只需将其关闭即可查看：

```
setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-08T19:29:55.623

我不认为 Movie 对象在打开硬件加速的设备上正常工作（默认情况下，在 Android 4.x 中，对于支持它的设备，它是打开的。你的模拟器可能不会。）

尝试添加

```
 android:hardwareAccelerated="false" 
```

AndroidManifest.xml 中 MainActivity 的活动定义

例子：

```
<activity
    android:name=".MainActivity"
    android:hardwareAccelerated="false"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-15T13:38:24.467

加载动画 GIF 似乎很棘手，但我建议使用**WebView**作为替代方案。

执行以下操作来解决问题：

1.  在 Android 资源中复制您的 GIF。
2.  调用 webView.loadDataWithBaseURL("file:///android_asset/", "", "text/html", "utf-8", null);

我希望它有帮助！

# awk - AWK：替代函数 sub() 不起作用

> ID：14482416
> 
> 赞同：2
> 
> 时间：2013-01-23T14:46:33.503
> 
> 标签：awk

我需要在文件“cfg_file”中搜索多行文本并将该文本替换为另一个文本。要搜索的文本在“cfg_name”中，替换文本在“cfg_value”中。我正在使用 ubuntu m/c。

cfg_file:

```
rem01=("LOG_CHAN01_REM_IP" transport("tcp") port( LOG_CHAN01_REM_PORT ) );
rem02=("LOG_CHAN02_REM_IP" transport("tcp") port( LOG_CHAN02_REM_PORT ) ); 
```

cfg_name：

```
LOG_CHAN01_REM_IP
LOG_CHAN01_REM_PORT
LOG_CHAN02_REM_IP
LOG_CHAN02_REM_PORT 
```

cfg_value：

```
10.123.122.52
50001
10.15.19.51
50002 
```

我使用了下面的脚本（从网络上的一些早期查询中得到它），但没有按预期工作。任何想法？？？

```
awk 'BEGIN { RS="" } 
FILENAME==ARGV[1] { s=$0 }
FILENAME==ARGV[2] { r=$0 }
FILENAME==ARGV[3] { sub(s,r); print }
END { print NR, "Students Records are processed." }
' ./cfg_name ./cfg_value ./cfg_file > ./outfile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:25:17.483

### AWK Solution

There are better tools to do this. However, if you insist in awk:

```
FILENAME == ARGV[1] {
    name[FNR] = $0
}

FILENAME == ARGV[2] {
    value[name[FNR]] = $0
}

FILENAME == ARGV[3] && FNR <= 20000 {
    for (n in value) {
        gsub(n, value[n]);
    }
    print
} 
```

### M4 Solution

As Catcall suggested, we can use m4:

```
#!/bin/bash
# Script's arguments: cfg_name cfg_value cfg_file
{
    paste $1 $2 | while read name value
    do
        echo "define(\`${name}', \`${value}')"
    done
    cat $3
} | m4
echo "$(wc -l $3) Students Records are processed." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T19:44:28.753

另一个 awk 版本，只有一个循环来读取变量：

```
BEGIN {
  # Read all variables in VAR_TABLE
  while( ( getline VAR < cfg_name ) > 0 ) {
    if ( ( getline VALUE < cfg_value ) > 0 ) {
      VAR_TABLE[ VAR ] = VALUE
    } else {
      print "ERROR: no value for " VAR > "/dev/stderr"
    }
  }
}

{
   # Convert all lines
   for ( VAR in VAR_TABLE ) { gsub( VAR, VAR_TABLE[ VAR ] ) }
   print
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:32:15.267

正确的方法是首先读取 2 个文件（名称和值），然后将替换应用到 cfg_file。

AWK 代码是：

```
#!/usr/bin/awk -f
BEGIN {
    file = ARGV[1];
    name = ARGV[2];
    value = ARGV[3];
    ARGC = 2;
    i = 1;
    while ( (getline < name) > 0 ) {
        names[i] = $1;
        i++;
    }
    i = 1;
    while ( (getline < value) > 0 ) {
        values[i] = $1;
        i++;
    }
}
{
    for ( i in names ) {
        sub( names[i], values[i], $0 );
    }
    print $0;
}
END {
    print NR" Students Records are processed.";
} 
```

我将代码保存到`merge.awk`您可以通过这种方式调用的代码：

```
awk -f merge.awk ./cfg_file ./cfg_name ./cfg_value 
```

输出是：

```
rem01=("10.123.122.52" transport("tcp") port( 50001 ) );
rem02=("10.15.19.51" transport("tcp") port( 50002 ) ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T15:12:09.130

解决方案是否必须在 AWK 中？

这是一些可以帮助您入门的python代码...将其保存到文件“replace.py”中，然后运行它。我插入了您在问题中指定的文件名。

```
substitution_dict = {}
name_file = open("cfg_name","r")
value_file = open("cfg_value","r")
for line in name_file.readlines():
    name = line.strip()
    value = value_file.readline().strip()
    substitution_dict[name]=value

for line in open("cfg_file","r").readlines():
    line = line.strip()
    for name in substitution_dict.keys():
        line = line.replace(name, substitution_dict[name])
    print line 
```

# django - Django 'prepopulated_fields' 不工作

> ID：14482418
> 
> 赞同：7
> 
> 时间：2013-01-23T14:46:36.450
> 
> 标签：django, django-admin

嘿，我正在阅读 Practical Django Projects 这本书，我正在尝试预填充 SlugField，但它没有发生。

```
#models.py
from django.db import models

class Category (models.Model):
    title = models.CharField(max_length=250)
    slug = models.SlugField (unique=True)
    description = models.TextField()

    class Meta:
        verbose_name_plural = "Categories"

    def __unicode__(self):
        return self.title
#admin.py
from django.contrib import admin
from coltrane.models import Category

class CategoryAdmin(admin.ModelAdmin):
    prepopulated_fields = {'slug': ('title',)}

admin.site.register(Category) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-23T18:34:17.223

更改`admin.site.register(Category)`为`admin.site.register(Category, CategoryAdmin)`

# windows-kernel - 以 \??\ 开头的 Windows 内核对象名称是什么意思？

> ID：14482421
> 
> 赞同：3
> 
> 时间：2013-01-23T14:46:47.353
> 
> 标签：windows-kernel

我正在维护一个带有用户空间和内核组件的旧版 Windows 应用程序。用户空间通过注册表键将一些文件路径传递给设备驱动程序。

目前，代码找到文件的完整路径，然后在将`\??\`其写入注册表之前将其添加到文件前面，因此路径最终类似于`\??\C:\foo.bar`. 驱动程序将此路径传递给`InitializeObjectAttributes()`and `ZwCreateFile()`，从而成功打开文件（或根据需要创建文件）。

我熟悉`\\.\`前缀作为 的别名`\DosDevices\`，但不是`\??\`，而且它不是那种可以用谷歌搜索的东西。有谁知道这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:16:37.727

它是在引导过程中创建的命名空间子目录。其中包含指向 Win32 API 可访问的资源的链接。在系统完全启动之前的引导期间，如果引用了该路径，则在没有 \??\ 的情况下可能无法解析。

# python - 使用 matplotlib 连接不同图（无子图）之间的轴

> ID：14482422
> 
> 赞同：7
> 
> 时间：2013-01-23T14:46:47.050
> 
> 标签：python, matplotlib, plot

这是我的问题。我知道如果它们是同一图中的子图，则有一种简单的方法可以链接不同图的轴：

```
import matplotlib.pyplot as plt
fig = plt.figure()
ax1 = fig.add_subplot(211)
ax2 = fig.add_subplot(212, sharex=ax1) 
```

但我想知道在定义 2 个不同的图形时是否有办法做相同的链接（当放大图 1 时，我在一个特定轴上得到相同的放大图 2）（我希望这些图彼此相距很远所以我想我不能把它们放在同一个图中......）

非常感谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T21:12:02.717

您只需做同样的事情，但使用不同的数字。

```
import matplotlib.pyplot as plt
fig = plt.figure()
ax1 = fig.add_subplot(111)
fig2 = plt.figure()
ax2 = fig2.add_subplot(111, sharex=ax1) 
```

# iphone - iOS 从另一个视图转到特定的标签栏视图

> ID：14482425
> 
> 赞同：0
> 
> 时间：2013-01-23T14:46:58.167
> 
> 标签：iphone, ios, xcode, tabbar

我有 5 个视图，一个按钮和一个包含 5 个视图的标签栏控制器。我没有使用故事板。我想从我的视图转到特定的标签栏视图。当我创建一个到目标视图的 segway 时，标签栏不包括在内。

我试过使用

```
-(IBAction)goHome {
    tabController.selectedIndex = 1;
    [[self navigationController] pushViewController:tabController animated:YES];
} 
```

方法。但它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:39:28.303

似乎您忘记在 XIB 实用程序中定义选项卡栏的所有类名和 NIB 名称（您想显示特定视图），并确保 taht 也应该相同

# jquery - 在不同于 IE 的浏览器上运行脚本

> ID：14482426
> 
> 赞同：0
> 
> 时间：2013-01-23T14:46:58.530
> 
> 标签：jquery, internet-explorer, conditional-comments

我想在除 IE 之外的任何浏览器上运行特定的 jQuery/JS 代码。

目前我正在使用它，但它在 Chrome 中不起作用：

```
 <!--[if !IE]>
    <script type="text/javascript">
        $(document).ready(function(){
            alert("non ie");
            $("#login_userid").focus();
        });
    </script>
    <![endif]--> 
```

执行警报和焦点部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:49:14.480

我想你需要

```
<![if ! IE]>

<![endif]> 
```

# .net - 使用 COM Callable Wrapper 来避免跨应用程序域传递 GCHandles 是否安全？

> ID：14482432
> 
> 赞同：2
> 
> 时间：2013-01-23T14:47:04.190
> 
> 标签：.net, c++-cli, com-callable-wrapper

在 .NET 中，将托管对象存储在非托管代码中以提供来自非托管代码的回调存在一个相对众所周知的问题`gcroot<ManagedObject>`：非托管代码在调用托管代码时不知道要使用哪个 AppDomain，有时它会选择错误的一个，导致“无法跨 AppDomains 传递 GCHandle”错误。

该问题的标准解决方法是使用指向委托的函数指针，因为委托可用于“记住”正确的 AppDomain：请参阅[http://lambert.geek.nz/2007/05/29/unmanaged-appdomain -callback/](http://lambert.geek.nz/2007/05/29/unmanaged-appdomain-callback/)以获得完整的解释。

然而，这个解决方案有点复杂，需要对委托进行仔细的生命周期管理。

似乎对托管对象使用 COM 可调用包装器也同样有效：与其存储 a `gcroot<ManagedObject>`，不如将指针存储为`IUnknown *`using `GetIUnknownForObject`：

```
m_value =
   static_cast<IUnknown*> (Marshal::GetIUnknownForObject(value).ToPointer()); 
```

然后我们可以`GetObjectForIUnknown`在进行回调之前进行反向翻译。缺点是失去了一点类型安全性，因为`IUnknown *`失去了实际的对象类型，你以后不得不使用类似的东西向下转换

```
IDisposable^ value =
      (IDisposable^) (Marshal::GetObjectForIUnknown(IntPtr(m_value))); 
```

哪里`m_value`是`IUnknown*`，但这似乎是一个很小的代价。

我已经尝试过了，在我的用例中似乎可以正常工作，但是采用这种方法有什么问题吗？似乎它适用于任何可能使用委托解决方案的地方，所以我想知道我是否遗漏了一些关于它的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T13:47:51.027

我现在已经在生产中使用这种方法几个月了，没有报告任何问题，所以虽然它并不完全确定，但我将暂时得出结论，这种方法是安全的。

# c - Discover the public methods of a shared library

> ID：14482433
> 
> 赞同：2
> 
> 时间：2013-01-23T14:47:07.200
> 
> 标签：c, api, shared-libraries, extending

In addition to [Extend a dynamic linked shared library?](https://stackoverflow.com/questions/14448756/extend-a-dynamic-linked-shared-library) I would like to find out, how I can get a list of all public methods of a shared library with closed source.

I have tried

```
nm -D libfoo.so
readelf -s libfoo.so 
```

but there I'm missing informations like return type, arguments etc.

As a beginner in this area, I can't even figure out what of those methods would be callable for my application.

Has anyone a more helpful tool?

EDIT:

For a very simple example, I have following:

libtest1.c:

```
int puts(char const *);

void libtest1()
{
    puts("libtest1: called puts()");
} 
```

Then I compiled libtest1.c to libtest1.so:

```
gcc -fPIC -shared -o libtest1.so libtest1.c 
```

In my "program" (test.c) I use the shared library as following:

```
void libtest1();  //from libtest1.so

int main()
{
    libtest1();
} 
```

And compile test.c to test:

```
gcc -o test test.c -ltest1 -ldl 
```

This will work although I have NO libtest1.h to include. It works "just" because I know that there might be a libtest1()-method to call.

Now think of I lost libtest1.c and just have the libtest1.so in my hands and don't remember what there are for methods and what params do they need.

That's a stupid example, I know :)

Or as an other example (maybe better):

Let's assume I found a "libstone2goldconverter.so" somewhere in my system and think "oh my god, I will use it".. but how?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:49:27.677

There's no way to find out the information you want from a C library - the information is destroyed by the compiler. (You can somewhat do it with C++, but not with C.)

Sorry!

(Veger is right that you should have been given a header file along with the library, which is what's supposed to tell you this information.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:50:13.120

A shared library usually (if not always) provides header files containing the public API.

So, instead of trying to grab (public) function directly from the library, you should try to find these header files, because they:

*   are required for compiling your application
*   might contain documentation
*   contain the public API as intended by the developer

* * *

**EDIT**
In you example you define

```
void libtest1(); 
```

This should typically go into the header files belonging to the library. And instead of the definition you should use:

```
#include "libtest1/public_api.h" 
```

(or something similar, depending on your library/header names)

If you 'lose' the header then the library becomes 'worthless', as you do not know the public API anymore and need to guess (which is obviously undesired).

The reason why, not using a header file, 'just' works, is because you actually know the definition of the function. The compiler trusts your definition (as it does not know whether you guessed it or not) and accepts it. When you are going to link your object files into the executable, the linker tries to find all references to undefined function in libraries. During this stage the linker finds out whether your function actually exists (with the correct parameters and return type), if not it will generate an error.

In the case of `libstone2goldconverter.so` you should look *really* hard to find the accompanying header files (on your system, supporting website, by emailing the author, etc.). As there is no way you can use the library (properly) without the header files.

This goes not only for you (the developer), but also for the owner of the library. So, you can be certain that the header files do exists somewhere. Only thing is: your `libstone2goldconverter.so` library look proprietary and the author/company of the library is not likely to give you their header files, as it severely compromises their marketing position... ;)

# excel - Excel VBA - 创建列表框

> ID：14482435
> 
> 赞同：1
> 
> 时间：2013-01-23T14:47:15.177
> 
> 标签：excel, vba, listbox

如何在 Excel VBA 中创建（而不是修改/填充）ListBox？我需要为列中的每个单元格生成各种列表框，没有 VBA 这样做是不切实际的。我正在寻找类似的东西：

```
Dim lb as ListBox
' Populate ListBox Here '

worksheet.Cells(1,1) = lb ' Apply ListBox to cell ' 
```

我已经彻底搜索了这个（也许我的术语是错误的），但我找不到一个关于创建列表框并将其应用于各种单元格的引用。

谢谢！

编辑：应该注意`Dim lb As MSForms.ListBox`抛出错误

> “未定义用户定义类型”

. 也许这就是创建 ListBoxes 的方法……但我需要包含这个库？？？？？？虽然我不知道该怎么做...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:48:24.750

如果您知道如何从 Excel 创建列表框，而不是使用 VBA，只需录制一个宏，然后检查生成的代码。

LE：这是我可以记录的。源值与目标列表在同一张纸上，但我认为您可以从这里接管并根据需要进行扩展。

```
With Selection.Validation
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:="=$A$1:$A$6"
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With 
```

# mysql - 集成 Mysql、Terminal 和脚本

> ID：14482438
> 
> 赞同：0
> 
> 时间：2013-01-23T14:47:18.443
> 
> 标签：mysql, terminal

我想导入在我的生产服务器上创建的 mysql 转储，并定期将其复制到本地数据库。到目前为止，我了解如何在我的 Mac 上的终端中执行操作，以及如何创建我可以通过终端或 Applescript 调用的 bash 脚本；我将使用 Applescript 运行每天通过 iCal 调用的脚本。当我在终端中按顺序执行操作时，终端“知道”我已连接到 MySQL，因为在我键入第一行后提示变为 MySQL 提示：

```
/Applications/MAMP/Library/bin/mysql --host=localhost -uroot -proot;
DROP DATABASE `test_db`; 
```

但是，当我使用这些命令调用 bash 脚本时，第二行会生成错误“test_db: command not found”。我的猜测是，在我的脚本中，我需要以某种方式明确第二行是专门的 MySQL 操作。实现这一目标的任何帮助将不胜感激。

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:51:55.937

希望这可以帮助像我这样的另一个菜鸟！您可以使用：

```
/Applications/MAMP/Library/bin/mysqladmin -uroot -proot drop 'test_db' -f; 
```

删除数据库。mysqladmin（[在这里查看）](http://dev.mysql.com/doc/refman/5.5/en/mysqladmin.html#option_mysqladmin_force)

可以从命令行执行很多管理任务。最后我的 -f 会强制下降，而不会被问到我是否希望它发生。

# ios - 想法如何使用opencv for IOS测量检测到的物体与相机的距离？

> ID：14482445
> 
> 赞同：4
> 
> 时间：2013-01-23T14:47:35.863
> 
> 标签：ios, objective-c, xcode, opencv

故事：

我有一个应用程序可以检测在 iphone sdk 6.0 上使用 opencv 构建的人脸，一切正常我可以使用前置摄像头和“后置摄像头”，也可以打开/关闭手电筒，我可以显示我有多少 fps此刻（现场）。

但现在我想添加一个额外的功能，你可以看到这张脸有多远

![在此处输入图像描述](../Images/28e7d8543a58670a3bd7d41ce00902c4.png)

是否有一些公式或一些好主意或来自专业人士的解决方案？（如果您需要一些代码或其他东西，我可以向您展示您需要的所有东西）

感谢您的帮助和快速解答！^^

听到对每个人来说都是目标 c 的翻译

```
-(double) faceDistance{
    const NSInteger kFaceWidth = 10;
    const NSInteger kPicWidth = 640;
    CGPoint p1 = CGPointMake(10, 10);
    CGPoint p2 = CGPointMake(100, 70);
    int facePixelWidth;

    int slope = (p2.y - p1.y) / (p2.x - p1.x);

    double propOfPic = kPicWidth / facePixelWidth;
    double surfSize = propOfPic * kFaceWidth;
    double dist = surfSize / slope;

    return dist;
} 
```

我在这里更新了我的代码是目标 c 的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:56:59.220

我在图像处理/AR 方面做了一些工作，但肯定不会认为自己是专家。也就是说，让我们继续讨论我将如何解决这个问题：

如果您正在计算一张脸的距离，您可以根据一张脸的平均大小来近似它。我的意思是，人脸的大小都非常相似（它们在任何方向上的偏差都不会超过几厘米）。因此，如果您进行一些测试，您可以计算出一张脸在几个距离处有多少像素，并使用 trig 来近似其他距离。显然，您无法使用此方法计算极其准确的距离，但您可以区分半米外的人和 3 米外的人。

您需要知道您正在使用的相机的分辨率，并可能对每种可能的分辨率进行一些测试。

**更新**：

好的，所以我被要求再详细说明一下。图片中看到的空间量与表面距离相机的距离呈线性关系。

假设人脸宽 10 厘米

好的，让我们将相机对准一个直角的米棒。将相机握在 10 厘米远的地方。它看到了多少？假设它看到了 10 厘米的米棒。

现在将相机移动到 1 m 之外。假设它现在看到 70 厘米。使用这些信息，我们可以生成以下 Java：

```
public static final int FACE_WIDTH = 10;
public static final int PIC_WIDTH = 640; // In pixels
Point p1 = new Point(10,10);
Point p2 = new Point(100,70);
int slope = (p2.y-p1.y)/(p2.x-p1.x);

public static double faceDistance(int facePixelWidth)
{
    double propOfPic = PIC_WIDTH / facePixelWidth;
    double surfSize = propOfPic * FACE_WIDTH;
    double dist = surfSize / slope;
    return dist;
} 
```

这*应该*有效。我没有测试过它，但在数学上它似乎是正确的。

# qt - QTableWidget 动态行创建

> ID：14482446
> 
> 赞同：0
> 
> 时间：2013-01-23T14:47:36.967
> 
> 标签：qt, qtablewidget, qtablewidgetitem

我正在尝试在 itemChanged 信号的 QTableWidget 中创建一个新行。这是代码：

```
Constructor::
{
ui->tblRoles->insertRow(0);
QTableWidgetItem *twl = new QTableWidgetItem("New Role");
QFont f = twl->font();
f.setItalic(true);
twl->setFont(f);
twl->setForeground(Qt::gray);
ui->tblRoles->setItem(0, 0, twl);

QObject::connect(ui->tblRoles, SIGNAL(itemChanged(QTableWidgetItem*)), 
    this, SLOT(newRole(QTableWidgetItem*)));
} 
```

以上为表格创建了一个初始行并将信号连接到插槽。下面的插槽检查这是否是被更改的正确单元格，如果是，则更新它，并创建一个新行......至少它应该这样做：

```
void RoleListingForm::newRole(QTableWidgetItem *itm)
{

if(itm->row() == 0 && itm->column() == 0)
{
    QFont f = itm->font();
    f.setItalic(false);
    itm->setFont(f);
    itm->setForeground(Qt::black);

    ui->tblRoles->blockSignals(true);    //////
    ui->tblRoles->insertRow(0);
    QTableWidgetItem *twl = new QTableWidgetItem("New Role");
    f = twl->font();
    f.setItalic(true);
    twl->setFont(f);
    twl->setForeground(Qt::gray);
    ui->tblRoles->setItem(0, 0, twl);
    ui->tblRoles->blockSignals(false); ///// 
}
} 
```

如果我删除`blockSignals()`，代码进入一个无限循环，如果我离开，`blockSignals()`它会创建一个随机数的行，通常是三个......

任何想法如何使这项工作？

背景信息：我正在尝试实现这一点：[https ://ux.stackexchange.com/questions/33331/about-the-creation-and-management-of-items](https://ux.stackexchange.com/questions/33331/about-the-creation-and-management-of-items)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:33:40.760

因此，经过一番研究，阅读文档后，这种有趣行为的原因或多或少是不言而喻的：

> ```
> void QTableWidget::itemChanged ( QTableWidgetItem * item ) [signal]
> 
> This signal is emitted whenever the data of item has changed. 
> ```

正在发生的事情如下：

我打电话：

```
itm->setFont(f);
itm->setForeground(Qt::black); 
```

但是这两个都被 Qt 转换为“数据”更改，并且由于我在这两个调用**之后阻塞了信号，显然我得到了 2 额外的行。**

所以，把`blockSignals`字体/颜色改变之前，它的工作原理。

# eclipselink - JPA 标准查询元组单机连接

> ID：14482448
> 
> 赞同：2
> 
> 时间：2013-01-23T14:47:52.823
> 
> 标签：eclipselink, criteria-api, multi-select

我需要与标准构建器进行连接，然后获得`Tuple`( `Object[]`) 类型的结果。第一个元组元素应该是`Preke`（并且这可以正常工作），第二个`Tuple`元素应该是一个`List<PrekeTiekejas>`包含`@OneToMany`对象。以下代码而不是`List<PrekeTiekejas>`返回单个`PrekeTiekejas`对象。我做错了什么？

```
CriteriaBuilder cb = MinutisManager.getInstance().getCriteriaBuilder();
CriteriaQuery<Tuple> criteriaQuery = cb.createTupleQuery();
Root<minutis.Preke> from = criteriaQuery.from(minutis.Preke.class);
ListJoin<minutis.Preke, minutis.PrekeTiekejas> tiekejai = from.joinList(Preke_.tiekejai.getName());
criteriaQuery.multiselect(from, tiekejai);

TypedQuery<Tuple> typedQuery = MinutisManager.getInstance().createQuery(criteriaQuery);
//pages
typedQuery.setFirstResult(0);
typedQuery.setMaxResults(100);
//typedQuery.setHint(QueryHints.REFRESH, HintValues.TRUE);

List<Tuple> tuples = typedQuery.getResultList();
for(Tuple t : tuples) {
   minutis.Preke preke = t.get(0, minutis.Preke.class);
   System.out.println(preke.getPavadinimas());
   List<minutis.PrekeTiekejas> tiek = t.get(1, List.class);
   System.out.println(tiek.size());
} 
```

这是我得到的错误：

```
Testcase: testGetPrekesByFilters(database.dao.PrekeDAOTest):    Caused an ERROR
Element 1 type interface java.util.List is invalid for result "***PrekeTiekejas.toString()***".
java.lang.IllegalArgumentException: Element 1 type interface java.util.List is invalid  for result "***PrekeTiekejas.toString()***".
    at org.eclipse.persistence.internal.jpa.querydef.TupleImpl.get(TupleImpl.java:89)
    at database.dao.PrekeDAOTest.testGetPrekesByFilters(PrekeDAOTest.java:69) 
```

`PrekeDAOTest.java:69`线：

```
List<minutis.PrekeTiekejas> tiek = t.get(1, List.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:34:56.610

JPA 不支持按您的预期返回集合，而是为每个 Preke PrekeTiekejas 对返回一个元组。您将需要自己处理结果并构建列表列表，或者更改您的期望。

由于您正在查询已经具有到 PrekeTiekejas 的集合映射的 Preke 实体，您可以只返回 Preke 并在集合的每个实体上调用 getPrekeTiekejas()。使用 root.fetch(Preke_.tiekejai.getName(), JoinType.LEFT) 代替查询中的 joinList 以确保在查询中获取相关实体。就像是：

```
CriteriaQuery<minutis.Preke> criteriaQuery = cb.createQuery(minutis.Preke.class);
Root<minutis.Preke> from = criteriaQuery.from(minutis.Preke.class);
from.fetch(Preke_.tiekejai.getName(), JoinType.LEFT);
criteriaQuery.select(from);//not really needed

TypedQuery<minutis.Preke> typedQuery = MinutisManager.getInstance().createQuery(criteriaQuery);
//pages
typedQuery.setFirstResult(0);
typedQuery.setMaxResults(100);
//typedQuery.setHint(QueryHints.REFRESH, HintValues.TRUE);

List<minutis.Preke> prekeList= typedQuery.getResultList();
for(minutis.Preke p : prekeList) {
   System.out.println(preke.getPavadinimas());
   List<minutis.PrekeTiekejas> tiek = preke.getTiekejai();//assumes tiekejai has a getTiekejai accessor
   System.out.println(tiek.size());
} 
```

# jsp - JSTL/EL 中的三元运算符

> ID：14482451
> 
> 赞同：43
> 
> 时间：2013-01-23T14:48:05.213
> 
> 标签：jsp, jstl, el, ternary-operator, conditional-operator

JSTL 的以下标记可用于为请求范围内的变量设置值。

```
<c:set var="value" scope="request" value="someValue"/> 
```

我想有条件地检查`value`设置的变量是否为空，并相应地显示结果，如下所示，使用`<c:when>...</c:when>`.

```
<c:choose>
    <c:when test="${not empty value}">
        <c:out default="None" value="${value}"/>
    </c:when>
    <c:otherwise>
        <c:out default="None" value="None"/>
    </c:otherwise>
</c:choose> 
```

我想使用三元表达式来减少代码行，例如，

```
<c:out default="None" value="${not empty value ? value : 'None'}"/> 
```

它按实际含义进行评估，但如果我交换表达式的顺序，例如，

```
<c:out default="None" value="${empty value ? 'None' : value}"/> 
```

那么它是一个语法错误指示，

> “${empty value?'None':value}”包含无效的表达式：javax.el.E​​LException: Error Parsing: ${empty value?'None':value}

那么为什么会这样呢？

* * *

我正在使用该`JSTL 1.1`库，并且包含以下标记库，

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%> 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-24T16:20:21.433

*我在 Tomcat 5.59、 JSP* 2.0 和*JSTL* 1.1中测试了以下页面。它运行没有任何错误。

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<c:set var="value" scope="request" value="someValue"/>
<c:out default="None" escapeXml="true" value="${not empty value ? value : 'None'}" />
<c:out default="None" escapeXml="true" value="${empty value ? 'None' : value}" />
<c:set var="value" scope="request" value="" />
<br/>
<c:out default="None" escapeXml="true" value="${not empty value ? value : 'None'}" />
<c:out default="None" escapeXml="true" value="${empty value ? 'None' : value}" /> 
```

# php - 如何抑制函数的回声？

> ID：14482457
> 
> 赞同：1
> 
> 时间：2013-01-23T14:48:20.037
> 
> 标签：php

> **可能重复：**
> [PHP：抑制函数内的输出？](https://stackoverflow.com/questions/486181/php-suppress-output-within-a-function)

**我正在使用多个 php 脚本..”**

这包括我需要的库。问题是它们旨在以`echo`和`print`或的形式向浏览器提供输出`print_r`

但是我需要使用它们并且不显示任何东西，我只关心它们所做的操作。有什么方法可以在不修改源代码的情况下抑制这些函数的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:51:12.260

您可以使用[output buffering](http://php.net/ob_start)，然后丢弃缓冲区：

```
ob_start();

function_that_prints_stuff_1();
function_that_prints_stuff_2();

// Done with the printing functions, discard the buffer:
ob_end_clean(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:52:18.767

使用[ob_start](http://ch2.php.net/ob_start)和[ob_clean](http://ch2.php.net/manual/en/function.ob-clean.php)

```
//start of your script
ob_start();

/*some library stuff*/

// clean up the buffer
ob_end_clean();

/*your stuff*/ 
```

# javascript - 溢出：隐藏在 IE8 中占用额外空间？

> ID：14482458
> 
> 赞同：0
> 
> 时间：2013-01-23T14:48:23.063
> 
> 标签：javascript, html, internet-explorer

我有以下html代码

```
<div id="tabsDiv" >
    <ul id="myTabs" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
        <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active">
            <a href="#ui-tabs-2">Testing it for creation  Testing it for creation subject Testing it for creation subject 
            Testing it for creation  Testing it for creation  Testing it for creation subject Testing it 
            for creation  Ends here</a>
            <a>
        </li>
    </ul>
</div> 
```

这是css代码

```
#myTabs li a {
  font-size: 9pt;
  max-width: 200px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

} 
```

在这种情况下，当我有大的超链接测试它时，我遇到了问题.....到此结束。发生的情况是 css 仅显示适合 200px 加 3 个点的字符，但它不必要地占用了完整文本的空间。因此，如果我添加另一个 li 标签，它将在大空间后开始。它在 IE9、FF、chrome 中运行良好，但在 IE8 中不行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:13:54.697

尝试添加`display:block`或`inline-block` [在 JSFiddle 上查看](http://jsfiddle.net/PgaYx/)

# php - 无法在 Jquery 的 php echo 中获取正确的值

> ID：14482461
> 
> 赞同：0
> 
> 时间：2013-01-23T14:48:24.403
> 
> 标签：php, javascript, jquery, ajax

```
$id = "123"; 
```

在 book.php 上，将 $id 传递给外部 jquery-book.php。

```
<script type="text/javascript">
 var id = '<?php echo $id; ?>';
</script>    

<script type="text/javascript" src="jquery-book.php"></script> 
```

在 jquery-book.php 上，我有这些代码：

```
<?php
  function get_book($id) {  
    return ...
  }
?>

$(document).ready(function(){
  var book_id = '<?php echo get_book(' + id + '); ?>'; //PROBLEM!!!
  $('#main').html(book_id);
}); 
```

如果我 alert(id);，我可以得到“123”。但是从上面的代码中，我得到“+ id +”，而不是“123”。

为什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:24:45.270

**书本.php**

```
<?php

$id = "123";

include_once "jquery-book.php";

?>
<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script type="text/javascript">
     var id = '<?php echo $id; ?>';
    </script>    

    <script type="text/javascript">
    $(document).ready(function(){
      var book_id = '<?php echo get_book($id); ?>'; //PROBLEM SOLVED!!!
      alert(book_id);
      $('#main').html(book_id);
    });
    </script>

    </head>
    <body>
        <div id="main"></div>
    </body>
</html> 
```

**jquery-book.php**

```
<?php
  function get_book($id) {  
    return $id . '-success';
  }
?> 
```

还不满意？那么请使用 Ajax-PHP 组合。 [http://openenergymonitor.org/emon/node/107](http://openenergymonitor.org/emon/node/107)

# php - 使用 PHP 流式传输 MP4

> ID：14482470
> 
> 赞同：2
> 
> 时间：2013-01-23T14:48:58.447
> 
> 标签：php, ftp, streaming, mp4

我正在尝试通过 FTP 和 PHP 流式传输 mp4 文件，但只有 mp3 会流式传输，mp4 会下载但不会流式传输 mp4 必须以流式传输的特殊格式吗？

这是我正在尝试的代码：

```
$response =  ftp_raw($ftp, 'SIZE '.$_GET['path']); 
$size = floatval(str_replace('213 ', '', $response[0]));
if(substr($_GET['path'], -4) == '.mp3') {
  header('Content-Type: audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3');
}
if(substr($_GET['path'], -4) == ".mp4") {
  header('Content-Type: video/mpeg');
}
header('Content-Encoding: chunked');
header('Connection: keep-alive');
header('Content-Disposition: inline; filename="'. basename($_GET["path"]). '"');
header('Content-Description: File Transfer'); 
header("Content-Length: $size");
header('Content-Transfer-Encoding: binary'); 
header('X-Pad: avoid browser bug');
header('Pragma: public');
header('Expires: -1');
header('Cache-Control: no-store, no-cache, must-revalidate');
header('Cache-Control: post-check=0, pre-check=0', false);
header('Content-Range: bytes 0-'.$size); 
header('Accept-Ranges: bytes');
$out = fopen('php://output', 'w');
if (!ftp_fget($ftp, $out, $_GET['path'], FTP_BINARY)) die('Unable to get file: ' . $remote_file);
fclose($out); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:05:44.830

您需要某种流服务器。如果你真的想用 PHP 来做这件事，我强烈反对，那么你需要打开一个套接字连接并写入你将从文件中顺序读取的数据块......在一个循环中，直到你完成整个文件。

考虑到您还应该考虑并发性和适当的内存管理这一事实，并考虑 php 的性能（开销，不是线程友好的......或者我被告知......），只是不要用 PHP 这样做。

周围有很多开源流媒体解决方案，它们将满足您的需求。

是的，PHP 并不是真正的意思……尽管理论上是可能的。

如果我错了，请任何人纠正我。

# version-control - 使用版本控制管理免费增值应用程序

> ID：14482475
> 
> 赞同：1
> 
> 时间：2013-01-23T14:49:34.683
> 
> 标签：version-control, mercurial

我正在编写一个 iOS 应用程序，它以免费版本开始，并且与许多应用程序一样，在付费应用程序中或通过应用程序内购买提供扩展功能。

我目前使用 mercurial 作为免费应用程序的版本控制，现在我们也想发布付费应用程序。我想知道是否有任何方法（理想情况下，尽管不一定，使用 mercurial）来保持它们共享代码库的主要部分，以便一个错误修复自动影响另一个，但显然将差异分开。

或者，是否有一种使用分支或类似方法可以轻松手动合并更改？

我试着在网上搜索，但我不确定我是否找不到正确的关键词，或者这真的不可能。另外，我从来没有完全理解过分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:02:49.763

您至少有两个模型

**基于分支**

*两个分支*

*   从您的主线分支 PAID 分支（默认分支）
*   添加常用功能和错误修复/更改为默认值
*   合并默认**为**PAID
*   在 PAID 分支中开发 PAID-only 功能
*   从 2 个分支的负责人发布版本

*每个任务的分支*

*   （同上）
*   在单独的命名分支中编码每个任务
*   将完成的分支合并到单个（PAID）或两个产品的分支

**单个分支中的 MQ 补丁**

*   添加、启用 MQ 扩展
*   像以前一样在存储库的变更集中存储核心（免费版本）
*   将 PAID 更改和添加添加为单独的 MQ 补丁
*   将常见变更作为变更集实施
*   为仅付费功能添加/编辑 MQ 补丁
*   未应用所有补丁的存储库将是免费版本，所有已应用 - 已付费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:25:23.530

我假设您将付费和免费版本都保密。

为什么不将所有内容放在一起并通过具有特定标志的编译器区分两者？因此，“制作免费版”和“制作付费版”会有所不同。

如果坚持将付费版和免费版的历史分开，我认为使用“免费”、“付费”和“共享”三个分支。不断将“共享”合并到其他两个（或如[Lazy Badger](https://stackoverflow.com/users/960558/lazy-badger)建议的那样，使用“仅付费”分支）。

据我所知，Python 使用[前向移植](http://docs.python.org/devguide/committing.html)，他们的实践应该会有所帮助。

# javascript - 显示元素，在所有任务完成后，这样做吗？

> ID：14482479
> 
> 赞同：0
> 
> 时间：2013-01-23T14:49:45.880
> 
> 标签：javascript, jquery

嗨，我在弄清楚如何完成这项任务时遇到了一些问题。我得到了一个包含元素的包装器，点击一下我就可以展示它们了。在它们可见后，我想执行另一个任务，这里的问题是它为包装器中的每个元素触发它。

**编辑** 对不起本来是`.fadeIn()`

示例代码：[Jsfiddle](http://jsfiddle.net/HbrPs/)

```
<div id="wrapper">
    <div class="div-item"></div>
    <div class="div-item"></div>
    <div class="div-item"></div>
    <div class="div-item"></div>
    <div class="div-item"></div>
</div>

<a href="#" id="click-me">click me</a>

$('#click-me').on('click', function()  {
    $('#wrapper > div.div-item').fadeIn(600, function() {
        console.log('show');
    });

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:57:41.577

如果没有动画（或其他异步操作），您不需要回调，只需执行以下操作：

```
$('#click-me').on('click', function()  {
  $('#wrapper > div.div-item').show();
  // follow-up code

  return false;
}); 
```

否则，请尝试：

```
$('#click-me').on('click', function()  {
  $('#wrapper > div.div-item').fadeIn().promise().done(function () {
    console.log('all done');
  });

  return false;
}); 
```

演示：http: [//jsbin.com/ukovuz/2/](http://jsbin.com/ukovuz/2/)

# android - FLAG_ACTIVITY_REORDER_TO_FRONT 被忽略

> ID：14482480
> 
> 赞同：4
> 
> 时间：2013-01-23T14:49:48.233
> 
> 标签：android, android-intent, android-pendingintent

我有一个带有项目列表的 FragmentActivity，当应用程序处于后台时，可以推送到该项目列表。

发生这种情况时，我想创建一个状态栏通知并提醒用户更新。
当用户单击通知时，活动应重新排序到前面并显示在屏幕上，同时在列表底部显示新项目。

所以我写了一个通知管理器，在用户设备上显示：

```
private static void createNotification(String title, String text,
    String largeIcon, String itemdId, Context mCOntext) {

Bitmap ic = BitmapFactory.decodeResource(mContext.getResources(),
    R.drawable.ic_launcher);
Intent intent = new Intent(mContext, MyFragmentActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
intent.putExtra(MyFragmentActivity.SELECTED_ITEM_LIST_ID, DatabaseHelper
    .getItemListById(listId).getId());
PendingIntent pIntent = PendingIntent.getActivity(mContext, 0, intent,
    0);

Notification noti = new NotificationCompat.Builder(mContext)
    .setContentTitle(title).setContentText(text)
    .setSmallIcon(R.drawable.ic_launcher).setContentIntent(pIntent)
    .setAutoCancel(true).setLargeIcon(ic).build();
noti.defaults |= Notification.DEFAULT_LIGHTS;
noti.defaults |= Notification.DEFAULT_VIBRATE;
noti.sound = Uri.parse("android.resource://"
    + mContext.getPackageName() + "/" + R.raw.user_gets_message);

NotificationManager nm = (NotificationManager) mContext
    .getSystemService(Context.NOTIFICATION_SERVICE);
nm.notify(0, noti);
} 
```

唯一的问题是它似乎忽略了我的标志，当我导航到片段活动，然后转到我的主屏幕（后台应用程序）并获得推送时，当我点击通知时，应用程序会创建一个新的活动（或片段）并使用新数据显示新的而不是原始的。（这意味着单击后退按钮会从历史堆栈中打开相同的活动（或片段）。

我重写了`onNewIntent`活动的所有生命周期方法，我看到在点击后退时，被调用的方法是`MyFragmentActivity.onStart`和`MyFragmentActivity.onResume`。

关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T08:30:54.887

我假设问题在于您将活动启动模式设置为 singleTask，它将标志 FLAG_ACTIVITY_BROUGHT_TO_FRONT 添加[到](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_BROUGHT_TO_FRONT)您的意图中，并导致标志 FLAG_ACTIVITY_REORDER_TO_FRONT 被忽略。

您需要将启动模式更改为单顶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-12T20:06:11.383

标记为已接受的解决方案是有缺陷的，除非我关注的是特殊情况而您没有关注。如果您有launchmode =“singleTop”并且您有一个打开活动A的通知，并且您的应用程序正在查看活动B（应用程序最小化或最大化，即在后台或前台没关系）然后即使设置了 FLAG_ACTIVITY_REORDER_TO_FRONT 标志，它仍然会打开活动 A 的第二个副本。

我的解决方案是制作一个广播接收器来监听通知触发的广播动作。所以基本上：

1.  通知会触发一个广播操作，其中包含要启动的活动的额外名称。

2.  广播接收器在单击通知时捕获此信息，然后使用 FLAG_ACTIVITY_REORDER_TO_FRONT 标志创建启动该活动的意图

3.  活动被带到活动堆栈的顶部，没有重复。

# c# - C# 缺乏多重继承是如何导致需要接口的？

> ID：14482483
> 
> 赞同：45
> 
> 时间：2013-01-23T14:49:54.573
> 
> 标签：c#, oop, interface, multiple-inheritance

在[C# 编程语言](https://rads.stackoverflow.com/amzn/click/com/0321741765)中，Krzysztof Cwalina 在注释中指出：

> 我们明确决定不添加对多重继承的支持 [...] 多重继承的缺乏迫使我们添加接口的概念，这反过来又导致了框架演变、更深的继承层次结构和许多其他问题问题。

接口是面向对象编程语言的核心概念。我不遵循“强迫我们添加接口的概念”的意思

Krzysztof 是否意味着必须针对接口的使用做出某些设计决策，否则将使用多重继承？或者，他的意思是`interface`'s 是因为缺少多重继承而被引入 C# 的？你能举个例子吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-23T15:06:41.613

接口只是一个没有数据成员并且只定义`public abstract`方法的基类。例如，这将是 C++ 中的接口：

```
class IFrobbable {
    public:
    virtual void Frob() = 0;
} 
```

因此，当 MI 可用作语言功能时，您可以通过简单地从它们派生来“实现”接口（同样，C++）：

```
class Widget : public IFrobbable, public IBrappable {
    // ...
} 
```

*一般情况下的*多重继承会引发许多问题和问题，这些问题不一定只有一个答案，甚至对于您对“好”的特定定义（[可怕的钻石](http://www.parashift.com/c++-faq/mi-diamond.html)，有人吗？）来说甚至是一个好的答案。多接口实现回避了大多数这些问题，因为“继承”接口的概念是继承成熟类的一个非常受限的特殊情况。

这就是“迫使我们添加接口的概念”的地方：当只限于单继承时，你不能做太多的 OO 设计，例如，当代码重用实际上是其中之一时，无法重用代码存在严重问题OO 最常见的论点。您必须做更多的事情，下一步是添加多重继承，但仅适用于满足接口约束的类。

因此，我将 Krzysztof 的名言解释为

> 一般情况下的多重继承是一个非常棘手的问题，鉴于现实生活对.NET 开发的限制，我们无法以令人满意的方式解决它。然而，接口继承在 OOP 中处理起来更简单，而且非常重要，所以我们确实把它放进去了。当然，接口也有自己的一系列问题，主要是关于 BCL 的结构。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-23T14:55:41.263

从[克里斯布鲁姆](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/07/85562.aspx)：

> 我们不直接实现多重实现继承的原因有很多。（如您所知，我们支持多接口继承）。

我认为 Krzysztof Cwalina 在引用中所说的不是接口本身的概念，而是作为多重继承方法的多重接口继承。

> 我们没有提供内置的、可验证的、符合 CLS 的多重实现继承版本有几个原因：
> 
> 1.  不同的语言实际上对 MI 的工作方式有不同的期望。例如，如何解决冲突以及重复碱基是合并还是冗余。在我们可以在 CLR 中实现 MI 之前，我们必须对所有语言进行调查，找出共同的概念，并决定如何以与语言无关的方式来表达它们。我们还必须决定 MI 是否属于 CLS，以及这对于不想要这个概念的语言（例如 VB.NET）意味着什么。当然，这就是我们作为公共语言运行时所从事的业务，但我们还没有为 MI 做这件事。
>     
>     
> 2.  真正适合 MI 的地方实际上很少。在许多情况下，多接口继承可以代替完成工作。在其他情况下，您可以使用封装和委托。如果我们要添加一个稍微不同的结构，比如 mixins，那实际上会更强大吗？
>     
>     
> 3.  多重实现继承给实现注入了很多复杂性。这种复杂性会影响铸造、布局、调度、字段访问、序列化、身份比较、可验证性、反射、泛型，可能还有很多其他地方。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T15:03:15.683

我认为您应该[阅读 Eric Lippert 所说的内容`Interfaces`](https://softwareengineering.stackexchange.com/a/108267)。他的手很脏，所以我认为他比其他人都清楚。

有时有更坏的情况和最坏的情况。你必须选择不那么糟糕的那个。

以下是链接帖子的副本：

* * *

> 它们只是为了确保上述功能（在接口中）在继承类中实现。

正确的。这是一个足够令人敬畏的好处来证明该功能的合理性。正如其他人所说，接口是实现某些方法、属性和事件的合同义务。静态类型语言的引人注目的好处是编译器可以验证您的代码所依赖的契约是否真正得到满足。

也就是说，接口是表示合同义务的一种相当薄弱的方式。如果您想要一种更强大、更灵活的方式来表示合同义务，请查看 Visual Studio 最新版本附带的代码合同功能。

> C# 是一门很棒的语言，但有时它会给你一种感觉，首先是微软制造了问题（不允许多重继承），然后提供了解决方案，这是一个相当乏味的解决方案。

好吧，我很高兴你喜欢它。

所有复杂的软件设计都是对相互冲突的功能进行权衡的结果，并试图找到以小成本带来大收益的“最佳位置”。我们从痛苦的经历中了解到，为了实现共享而允许多重继承的语言具有相对较小的好处和相对较大的成本。只允许在不共享实现细节的接口上进行多重继承，可以在没有大部分成本的情况下提供多重继承的许多好处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T12:52:33.063

我认为 Cwalina 的语言有点强，关于历史并不完全准确。

请记住，接口在 C# 之前就已经存在，所以说“我们必须添加接口来解决问题 x”对我来说听起来不对。我认为默认情况下接口会存在 - 它们必须存在。

另外，请记住，C# 很大程度上源自 C++。或者，至少，参与创建 C# 语言的人在 C++ 方面具有很强的背景。多重继承是 C++ 中公认的噩梦领域。从多个类继承，这些类本身可能从 commonm 基类派生，确定哪个实现优先等。我的意思是，这是一个非常强大的功能，但无疑会导致复杂的代码。

我怀疑他们放弃了 C# 的多重继承，因为他们（语言作者）知道一切都会变得多么复杂，他们想避免这种情况。还要记住，当 C# 被引入时，它的卖点之一就是它的简洁性（当然没有 Java 干净，但比 C 和 C++ 干净得多）。

Incidentally, in 10+ years of C# development I have only wished for multiple inheritance once. A UI component which I wanted to inherit both a visual style and some common behaviour. It didn't take me long to realise that what I was intending to do would have been a pretty awful design in any case.

# c# - 更改按钮控件模板内文本块文本的内容..？

> ID：14482485
> 
> 赞同：0
> 
> 时间：2013-01-23T14:49:55.587
> 
> 标签：c#, silverlight-4.0, controls

我有一个按钮，其控制模板是 stackpanel。在堆栈面板中有文本块。我的疑问是如何动态更改该文本块的文本。？

```
<Button x:Name="Animate" Width="auto" Height="25" Click="Button_Click_2" Content="Close">
                <Button.Template>
                    <ControlTemplate>                        
                        <StackPanel Orientation="Horizontal">
                            <TextBlock x:Name="AnimateTextBlock" Text="Actions" VerticalAlignment="Center" FontSize="14"></TextBlock>
                            <Image Source="/HB.EmployeeInfo;component/Images/Actions.png"  Width="20" Height="20"></Image>
                        </StackPanel>
                    </ControlTemplate>
                </Button.Template>
            </Button> 
```

我想动态更改 AnimateTextBlock 文本..？？如何做到这一点。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:52:57.373

在您的按钮操作代码中添加这一行：

```
x.Text = "Text Box content"; 
```

前任：

```
private void Button_Click_2(object sender, RoutedEventArgs e)
{
x.Text = "Text Box content";
  } 
```

看看那篇文章以了解按钮控件：

[http://www.silverlightshow.net/items/Button-Controls-in-Silverlight-2-Beta-1.aspx](http://www.silverlightshow.net/items/Button-Controls-in-Silverlight-2-Beta-1.aspx)

# google-drive-api - getToken() 只给出刷新令牌

> ID：14482489
> 
> 赞同：5
> 
> 时间：2013-01-23T14:50:01.000
> 
> 标签：google-drive-api

我正在开发一个登录 Gdrive 服务的 Android 应用程序，在要求用户授予权限后，它会保存令牌并将其发送到我们的后端，即向 gdrive 服务本身询问内容的后端。之前，我使用 AccountManager 登录，但几周前我收到了一封来自 Google 的电子邮件，要求将授权流程移至 Google Play 服务库。我在获取令牌时遇到问题，这是我的代码：

```
GoogleAccountCredential credential = GoogleAccountCredential.usingOAuth2(myApp.getApplicationContext(), DriveScopes.DRIVE);

Account[] mAccounts = credential.getAllAccounts(); 
```

选择要登录的帐户后，侦听器会执行以下操作：

```
Account account = mAccounts[position];
credential.setSelectedAccountName(account.name);
new GetDriveServiceTask().execute(credential);

private class GetDriveServiceTask extends AsyncTask<GoogleAccountCredential, Void, Void> {
        protected Void doInBackground(GoogleAccountCredential... credentials) {
            try{
                 GoogleAccountCredential credential = credentials[0];
                 String token = credential.getToken();
            } catch (UserRecoverableAuthException e) {
                  UserRecoverableAuthException exception = (UserRecoverableAuthException) e;
                  Intent authorizationIntent = exception.getIntent();
                  startActivityForResult(authorizationIntent,REQUEST_PERMISSIONS); 
            } 
```

当用户之前访问他/她的帐户时，我遇到了问题，命令 credential.getToken(); 只给我我认为是刷新令牌的东西，例如：“1/SGvUDUNnRG8wVs_REISKx1xuupbwAKeEQ5fHXH-rbOk”...我怎样才能从中获取访问令牌？

我尝试对 URL“https://accounts.google.com/o/oauth2/token”进行 Post 调用，如下所述：[https](https://developers.google.com/accounts/docs/OAuth2WebServer#refresh) ://developers.google.com/accounts/docs/OAuth2WebServer#refresh但我是每次都获得未授权客户...

请我被困在这里，电子邮件说，AccountManager 方法将在 2 月 1 日停止工作......

提前致谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-28T21:00:54.883

您应该授权使用 Google Play 服务，这只会给您一个访问令牌。有关如何使用 Google Play 服务授权您的 Android 应用以向 Drive API 发送请求的示例，请查看以下快速入门指南：

[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

# javascript - 如何使用 jQuery 切换数据属性？

> ID：14482492
> 
> 赞同：9
> 
> 时间：2013-01-23T14:50:09.983
> 
> 标签：javascript, jquery

我需要在数据属性的两个可能值之间切换。

如果`data-state`等于，`enabled`那么我想将其更改为`disabled`，反之亦然。

```
$('.sites .state').on('ajax:success', function(data, status, xhr) {
   var site = $(this).parents('article').first();

   if (site.data('state') == 'enabled') {
     site.attr('data-state', 'disabled');
   } else {
     site.attr('data-state', 'enabled');
   }
}); 
```

注意：我需要更改 DOM 元素，据[我所知](https://stackoverflow.com/a/9768213/147586)，我不能`data`这样做（因此使用`attr`）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T14:51:54.083

```
site.attr('data-state', 'disabled'); 
```

应该

```
site.data('state', 'disabled'); 
```

创建元素时，该`data-<value>`属性可用于初始化数据属性，但之后您必须使用[jQuery.data()](http://api.jquery.com/jQuery.data/)方法来获取或修改数据。

在`$(el).data('<data-name>')`返回值的同时，`$(el).data('<data-name>', value)`设置数据值。

更新：基于更新的要求

```
$('div').attr('data-state', $('div').attr('data-state') == 'enabled' ? 'disabled' : 'enabled') 
```

[小提琴](http://jsfiddle.net/arunpjohny/cZta9/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T14:55:39.387

不太确定问题出在哪里，但既然您正在使用`.data()`，您不妨继续在 if/else 中使用它。Doing`.attr('data-state')`将其保存在 DOM 元素本身上（当您检查元素时可见），而`.data('state')`它是不可见的，而且速度更快。

此外，如果您使用三元运算符，您可以将其变成 1 小行：

```
site.attr('data-state', site.data('state') === 'enabled' 
    ? 'disabled' 
    : 'enabled'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T14:56:10.583

```
site.data('state', (site.data('state') == 'enabled' ? 'disabled' : 'enabled')) 
```

# windows - Tomcat 应用程序未部署

> ID：14482493
> 
> 赞同：0
> 
> 时间：2013-01-23T14:50:10.923
> 
> 标签：windows, tomcat

一个运行良好的应用程序在重新启动 Tomcat 服务后停止运行。

Tomcat 日志中没有错误，最后一行只是说应用程序正在部署，它似乎卡在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:52:13.503

可能操作系统正在使用文件，或者存在阻止重新部署的权限问题。尝试手动从 webapps 目录中删除 war 和文件夹，然后部署。

# ios - iOS MDM 配置文件和设置键

> ID：14482496
> 
> 赞同：2
> 
> 时间：2013-01-23T14:50:16.507
> 
> 标签：ios, configuration, profile, mdm

我已经开始为 iOS 设备开发 MDM 服务。到目前为止，我已经完成了招生工作。我可以发送一些简单的命令（如 DeviceLock、UnlockDevice、DeviceInformation）。这很好用。

但现在我想安装配置文件（我猜）。我想设置 WIFI、APN 等设置。

我从 iPhone 配置实用程序中了解了 mobileconfig plist 的外观。

但是我还没有找到任何包含所有设置文档的站点。

例如，如何设置 MMS-APN 和网络共享 APN？

而且，使用 MDM 设置命令，我可以打开和关闭 DataRoaming，但我找不到可以使用的任何其他键。一些建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T18:22:24.233

一般来说，有几个关键文件：

[配置文件参考](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)

[MDM 文档](http://adcdownload.apple.com//Documents/mobile_device_management_protocol/mobile_device_management_protocol.pdf)

我相信他们描述了所有公开可用的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T13:39:16.767

[此链接](https://developer.apple.com/library/ios/featuredarticles/iPhoneConfigurationProfileRef/)下提供了有关配置文件的详细说明。

# java - 找出一个单词是否可以作为字典中单词的开头

> ID：14482497
> 
> 赞同：4
> 
> 时间：2013-01-23T14:50:20.797
> 
> 标签：java, string, collections

我必须找出给定的单词是否可以成为字典中其他单词的开头。

我使用 TreeSet 实现了字典。

TreeSet 字典 String startString;

**问题 1**

找出`startString`字典中的开头是否至少是一个单词的最有效方法是什么？

**理念一**

我的想法是使用`dictionary.subSet(startString, startStringPlusOne);`

其中`startStringPlusOne`等于`startString`除了最后一个字符，即字母表中的下一个字符。

例子：

```
startString: hom
startStringPlusOne: hon 
```

通过这种方式，它`SubSet`返回一个空集，这意味着它`string`不是字典中单词的开头。

**问题 2**

计算 stringPlusOne 的最有效方法是什么？

**想法 2**

我想使用带有字母的字符数组，并用数组中`string`的以下字符替换最后一个字母。有没有更有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:26:23.350

如果内存不是问题，我会很想存储两个字典。你把你的词放进一个，另一个你把你的词开头放进去。

```
1)
["aardvark", "banana", "band"]

2)
{
    "aardvar" => 1,
    "aardva" => 1,
    "aardv" => 1,
    "aard" => 1, 
    "aar" => 1, 
    "aa" => 1, 
    "a" => 1, 
    "banan" => 1, 
    "bana" => 1, 
    "ban" => 2, 
    "ba" => 2, 
    "b" => 2
} 
```

那么“有没有以‘ban’开头的词？”这个问题的答案。是“是的，有 2 个”。您的问题并没有说明是否有必要找出这些词。

仅当您需要从字典中删除单词时，计数才真正有用。如果是这样，您将需要减少计数并在它们达到 0 时删除键。如果您不需要这样做，那么您不需要存储该数字。

如果您需要回答“哪些单词以 'ban' 开头？”这个问题，那么您需要存储对这些单词的引用，而不仅仅是计数，例如

```
"ban" => ["banana", "band"] 
```

就速度而言，这似乎是最有效的，但以牺牲内存效率为代价（这可能不是值得担心的问题）。

# dynamics-crm-2011 - crm 2011 功能区系统按钮上的 javascript 确认

> ID：14482498
> 
> 赞同：1
> 
> 时间：2013-01-23T14:50:30.200
> 
> 标签：dynamics-crm-2011, crm

我将通过单击功能区按钮在执行某些操作之前提示 javascript 确认。例如，当我要单击电子邮件活动的发送按钮时，我想提示一个对话框说“你确定吗？” 并根据答案做主要功能。在 CRM 2011 中做这种事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:07:11.733

此类事件的 javascript 可以使用以下方法轻松实现：

```
function confirmSomething(message) {
    if (!confirm(message)) {
        //user has changed their mind 
        event.returnValue = false;
        return false;   //you might need to double check this bit
    }
} 
```

至于将它添加到按钮 - 有很多指南（谷歌是你的朋友 -[我喜欢这个](http://garethtuckercrm.com/2011/01/18/how-to-view-ribbon-definitions-in-crm-2011-3/)）

或者试试[Visual Ribbon Editor](http://crmvisualribbonedit.codeplex.com/documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:13:26.710

您可以添加新的 javascript Web 资源。创建函数，您将在其中添加确认对话框。在“确认=真”时调用主要的 CRM 功能。在您的电子邮件示例中，它将是方法`send`from `/_static/activities/email.js`。

当然，您必须更改功能区按钮上的操作才能从 Web 资源调用您的功能。

希望它会有所帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:46:26.183

好吧，最好的方法是创建保存事件并选择将执行上下文作为

第一个参数和事件处理程序内部，您可以根据结果停止或继续保存

从确认消息中。

代码示例：

函数 Form_onsave(executionObj) { var shouldSave = true;

```
if (shouldSave)
{
    alert("Unable to save because of some reason or the other.");

    executionObj.getEventArgs().preventDefault();
} 
```

}

# python - 在 Python 中通过 UPnP 转发端口

> ID：14482500
> 
> 赞同：11
> 
> 时间：2013-01-23T14:50:50.323
> 
> 标签：python, python-2.7, upnp

我正在制作一个 Python 应用程序，它要求用户将端口转发到他的计算机，以便与服务器或其他用户进行通信。当前的实现效果很好，但唯一的问题是运行文件的人必须手动将端口转发到本地 IP。我想自动化这个。他选择一个端口，脚本检查它是否可以转发，然后转发它。如果不能，则分别处理错误。

我查看了一些声称可以在纯 Python 中执行此操作的库（因为完成后我需要编译为 .exe 的 [...]），但没有找到有用的东西。如果您可以向我提供有关如何尝试转发端口和分别处理成功/失败的代码示例，那就太好了。

在此先感谢您的时间。

PS：我的目标是 Python 2.7.X

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-21T22:34:43.193

看起来有几个选项：

*   Miniupnp 有[python 绑定](https://github.com/miniupnp/miniupnp/blob/master/miniupnpc/testupnpigd.py)
*   [GNUPnP 的 Python 绑定](https://packages.debian.org/sid/python/python-gupnp-igd)
*   [miranda-upnp](https://code.google.com/p/miranda-upnp/)是纯 python

这里有一个很好的例子，说明 GNUPnP 的 python 绑定用于打开路由器上的[端口](http://www.gniibe.org/memo/system/dynamic-ip/upnp.html)。在该示例中，租用时间设置为 0，这是无限制的。有关 add_port 的定义，请参见[此处](https://developer.gnome.org/gupnp-igd/unstable/GUPnPSimpleIgd.html#gupnp-simple-igd-add-port)。

一个简单的例子可能是：

```
#! /usr/bin/python
import gupnp.igd
import glib
from sys import stderr

my_ip = YOUR_IP

igd = gupnp.igd.Simple()
igd.external_ip = None

main = glib.MainLoop()

def mep(igd, proto, eip, erip, port, localip, lport, msg):
    if port == 80:
        igd.external_ip = eip
        main.quit()

def emp(igd, err, proto, ep, lip, lp, msg):
    print >> stderr, "ERR"
    print >> stderr, err, proto, ep, lip, lp, msg
    main.quit()

igd.connect("mapped-external-port", mep)
igd.connect("error-mapping-port", emp)

#igd.add_port("PROTO", EXTERNAL_PORT, INTERNAL_IP, INTERNAL_PORT, LEASE_DURATION_IN_SECONDS, "NAME")
igd.add_port("TCP", 80, my_ip, 8080, 86400, "web")

main.run() 
```

# r - R中带有曲线的直方图

> ID：14482502
> 
> 赞同：2
> 
> 时间：2013-01-23T14:50:56.427
> 
> 标签：r, histogram, curve

我的数据需要直方图，但找不到带有曲线的直方图。谁能建议一个直方图显示频率（不是密度）和下面数据的曲线？喜欢花哨的，但如果不是，请不要担心:)

```
x <- rnorm(1000)
hist(x) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:13:16.947

这是缓慢的分步版本。

这是你的数据。

```
population_mean <- 0
population_sd <- 1
n <- 1000
x <- rnorm(n, population_mean, population_sd) 
```

这些是绘制曲线的一些`x`坐标。请注意使用`qnorm`来从正态分布中获取下分位数和上分位数。

```
population_x <- seq(
  qnorm(0.001, population_mean, population_sd), 
  qnorm(0.999, population_mean, population_sd), 
  length.out = 1000
) 
```

为了从密度转换为计数，我们需要知道 binwidth。如果我们自己指定，这是最简单的。

```
binwidth <- 0.5
breaks <- seq(floor(min(x)), ceiling(max(x)), binwidth) 
```

这是我们的直方图。

```
hist(x, breaks) 
```

计数曲线是正常密度乘以数据点数除以 binwidth。

```
lines(
  population_x, 
  n * dnorm(population_x, population_mean, population_sd) * binwidth, 
  col = "red"
) 
```

让我们再看看样本分布而不是总体分布。

```
sample_mean <- mean(x)
sample_sd <- sd(x)
sample_x <- seq(
  qnorm(0.001, sample_mean, sample_sd), 
  qnorm(0.999, sample_mean, sample_sd), 
  length.out = 1000
)
lines(
  population_x, 
  n * dnorm(sample_x, sample_mean, sample_sd) * binwidth, 
  col = "blue"
) 
```

![带有频率曲线的直方图](../Images/089d57706d5e9004bb9112a979e6a0e7.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T14:55:48.467

也许是这样的......？

```
set.seed(1)
x <- rnorm(1000)
hist(x, las=1)

par(new=TRUE)   
plot(density(x), col=2, yaxt="n", xaxt="n",
     bty='n', xlab="", ylab="", main='')
axis(4, las=1) 
```

![在此处输入图像描述](../Images/c61b3401654381e11337d4d9ed498979.png)

频率在左侧*y*轴中描述，概率（对于密度线）在右侧*y*轴中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T14:55:57.947

通常你会使用密度曲线。

试试这个：

```
x <- rnorm(1000)
hist(x)
curve(dnorm, col = 2, add = TRUE) 
```

# exception - MVC 4 控制器动作参数 System.FormatException 错误

> ID：14482507
> 
> 赞同：1
> 
> 时间：2013-01-23T14:51:33.227
> 
> 标签：exception, asp.net-mvc-4, kendo-grid

我们发现支持 KendoUI 网格的 ajax 控制器操作会引发很多`System.FormatException`异常，见下文。

当试图将 AJAX 请求中的查询字符串参数绑定到操作参数时，MVC 堆栈会抛出异常 - 很久之前执行操作代码。但是，它们不会在每个请求上都被抛出，相同的 POST 数据有时会导致异常，有时不会。

```
System.InvalidOperationException: The parameter conversion from type 'System.String' to type 'System.Int32' failed. See the inner exception for more information. ---> System.Exception: NaN is not a valid value for Int32\. ---> System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.ComponentModel.Int32Converter.FromString(String value, NumberFormatInfo formatInfo)
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   --- End of inner exception stack trace ---
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at System.Web.Mvc.ValueProviderResult.ConvertSimpleType(CultureInfo culture, Object value, Type destinationType)
   --- End of inner exception stack trace ---
   at System.Web.Mvc.ValueProviderResult.ConvertSimpleType(CultureInfo culture, Object value, Type destinationType)
   at Kendo.Mvc.UI.DataSourceRequestModelBinder.TryGetValue[T](ModelBindingContext bindingContext, String key, T& result)
   at Kendo.Mvc.UI.DataSourceRequestModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
   at System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor)
   at System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

该操作采用一组参数（一些可选参数）用于 DB 查询，并以 JSON 形式返回结果集。它看起来像这样：

```
public ActionResult List([DataSourceRequest] DataSourceRequest request, int? companyID, int? statusID, int? countryID, int? licenseID, string userID, DateTime fromDate, DateTime toDate)
{
    //Do stuff
} 
```

AJAX 帖子值如下所示：

```
 sort=&page=1&group=&filter=&companyID=&licenseID=&countryID=&statusID=&userID=&fromDate=24%2F12%2F2012&toDate=23%2F01%2F2013 
```

每个参数的值取自页面上的一组下拉菜单。仅当在这些下拉列表之一中设置了“全部”选项时才会发生异常，其中没有设置值。

```
<select name="CompanyID"><option value="">All Companies</option>
    <option value="1">Comapny 1</option>
    <option value="2">Company 2</option>
</select>
<!-- ... snip ... --> 
```

令人困惑的是，所讨论的参数都不是类型，`int`它们都是or or 。`int?``string``DateTime``DataSourceRequest`

中的代码引发了异常`System.Web.Mvc.ValueProviderResult.ConvertSimpleType`，它从堆栈跟踪中看起来好像参数的类型错误。

我的阅读表明，如果参数的值为`null`or `String.Empty`，那么它应该将 a 传递给`null`控制器​​动作。我在[这里](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Mvc/ValueProviderResult.cs)找到的来源（第 54 行）似乎证实了这一点：

```
// if this is a user-input value but the user didn't type anything, return no value
string valueAsString = value as string;
if (valueAsString != null && valueAsString.Trim().Length == 0)
{
    return null;
} 
```

我发现了对一个旧的 MVC-3 错误的引用，该错误导致内部信息缓存不正确并导致此异常。[这里](http://forums.asp.net/p/1632006/4206895.aspx)有一个讨论，它被确认为 MVC3 RC2 错误，所以我无法想象它仍然是这个问题，但可能有相关的东西吗？`Application_Start()`建议的修复是在 Global.asax.cs中添加以下内容：

```
ModelMetadataProviders.Current = new DataAnnotationsModelMetadataProvider(); 
```

在@mattytommo 的建议下，我们尝试重新排列签名，以便可以为空的参数都排在最后，但这没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:24:24.957

这与我们添加的可选参数无关，它取决于 KendoUI 脚本。

Kendo javascript 添加了一组映射到`DataSourceRequest`对象上的参数（组、排序、页面）。

该`Page`对象的属性定义为

```
public int Page { get; set; }` 
```

但是在我们应用的过滤器*没有返回结果*（一个空网格）的情况下，javascript正在设置`page=NaN`，因此错误：

```
System.Exception: NaN is not a valid value for Int32 
```

# python - 在 sphinx autoclass 输出中排除 __init__ 参数

> ID：14482510
> 
> 赞同：1
> 
> 时间：2013-01-23T14:51:46.733
> 
> 标签：python, python-sphinx

sphinx autoclass 指令生成的输出将 __init__ 的参数添加到类名的末尾。有没有办法告诉狮身人面像排除它们？我需要记录不应显式构造的类，因此 __init__ 参数是内部实现细节，应从文档中省略

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:04:01.033

要回答我自己的问题，请将 () 添加到类名中，例如

```
.. autoclass:: MyClass() 
```

# ruby - Ruby 没有将有效的 UTF-8 写入文件？

> ID：14482511
> 
> 赞同：0
> 
> 时间：2013-01-23T14:51:51.267
> 
> 标签：ruby, encoding, jruby

我们使用 CMS，在编码方面使用起来真的很痛苦，但我仍然需要为它生成一个结构。

我将：设置`Encoding.default_internal`为 UTF-8，我尝试使用`# Encoding: UTF-8`并编写了文件，`File.open("filename", "w:UTF-8")`但我总是得到这样的结果：

```
DOMDocument::loadXML() [domdocument.loadxml]: Input is not proper UTF-8, indicate encoding ! Bytes: 0xF6 0x6A 0xE4 0x6B in Entity, line: 7DOMDocument::loadXML() [domdocument.loadxml]: Empty string supplied as input 
```

该文件包含`öäü`，如果我删除它们，它会像预期的那样工作。

如果我使用 Notepad++ 功能“转换为没有 BOM 的 UTF-8”并在其中手动写入“元音变音（öäü）”，它就可以工作。

将值更改为 HTML 实体（如`&ouml;`, ）是没有选择的，因为它们会以这种方式出现在后端。

PS：它是用 JRuby 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:24:53.730

你没有说你是如何修改 XML 的，但是如果你是用正则表达式来做的，那么`gsub`你就是在狂野的一面。

我强烈建议使用 XML 解析器/生成器来修改 XML。XML 是一个严格的规范，尤其是在处理非 ASCII 字符时，一个好的解析器/生成器会在插入文本时考虑到这些东西。

例如，使用[Nokogiri](http://nokogiri.org)：

```
# encoding: utf-8

require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<root>
  <atextnode>content</atextnode>
</root>
EOT

atextnode = doc.at('atextnode')
atextnode.content = "öäü"
puts doc.to_xml 
```

输出：

```
<?xml version="1.0"?>
<root>
  <atextnode>&#xF6;&#xE4;&#xFC;</atextnode>
</root> 
```

将输出编码更改为 UTF-8：

```
puts doc.to_xml(encoding: 'UTF-8') 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <atextnode>öäü</atextnode>
</root> 
```

# php - 如何在 LAMP 环境中拒绝/限制对特定文件类型的访问？

> ID：14482514
> 
> 赞同：0
> 
> 时间：2013-01-23T14:51:57.410
> 
> 标签：php, apache, .htaccess, lamp

我有一个页面，用户可以在其中收听一些歌曲，这些歌曲使用 JavaScript 播放，因此如果您查看页面源代码，您会看到歌曲的完整路径，用户只需下载歌曲即可。

我如何拒绝所有试图访问该文件的人访问这些歌曲 (.mp3)，但访问该文件的页面上的 JavaScript 代码除外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:55:36.830

由于 JavaScript 在客户端上执行，并且您需要它能够下载 mp3，因此您的客户端本质上*已经拥有*mp3 - 在他们的浏览器下载缓存文件夹中。

您最好加密 JavaScript 或事后动态加载它。尽管如此，如果客户对它的工作原理有所了解，他仍然会找到 MP3。

您唯一真正的选择是浏览器的新插件，该插件可以播放您以某种方式加密的文件。

如果您拒绝访问`*.mp3`文件，您的 JavaScript 也将无法播放该文件。

# php - reCAPTCHA PHP 和 AJAX

> ID：14482516
> 
> 赞同：1
> 
> 时间：2013-01-23T14:52:02.217
> 
> 标签：php, javascript, ajax, captcha, recaptcha

我正在尝试使用 AJAX 将 reCAPTCHA 添加到我的 PHP 联系表单中。我希望使用 reCAPTCHA 显示用户并让用户输入它。如果它不正确，它应该在不离开页面的情况下显示。只有当 CAPTCHA 正确时，它才应该去`contacts-go.php`运行代码来发送电子邮件。我试图从[这个](http://www.darksideofthecarton.com/2008/12/15/validating-recaptcha-jquery-ajax/)例子中做到这一点。

这是我的**contact.php**页面上的内容：

```
<?php   
    session_start();
?>

<html>
    <head>
        <script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
        <SCRIPT type="text/javascript">
            function validateCaptcha()
            {
                challengeField = $("input#recaptcha_challenge_field").val();
                responseField = $("input#recaptcha_response_field").val();
                //alert(challengeField);
                //alert(responseField);
                //return false;
                var html = $.ajax({
                type: "POST",
                url: "ajax.recaptcha.php",
                data: "recaptcha_challenge_field=" + challengeField + "&amp;recaptcha_response_field=" + responseField,
                async: false
                }).responseText;

                if(html == "success")
                {
                    $("#captchaStatus").html(" ");
                    // Uncomment the following line in your application
                    return true;
                }
                else
                {
                    $("#captchaStatus").html("Your captcha is incorrect. Please try again");
                    Recaptcha.reload();
                    return false;
                }
            }

        </SCRIPT>

        <script type="text/javascript">

</script>

    </head>

<body>
    <?php
        require_once("ajax.recaptcha.php");
    ?>

    <div id="login">
        <form method="post" onSubmit="return validateCaptcha()" action="contacts-go.php">

                <label>Message</label>
                <br />
                <textarea type="text" id="name" name="message" size="20"></textarea>

            <p><?php echo recaptcha_get_html($publickey);?></p>

            <p style="color: red;" id="captchaStatus">&nbsp;</p>

            <input type=submit name="submit" value="Submit">
        </form>
    </div>

</body>
</html> 
```

这是**ajax.recaptcha.php**文件

```
<?php

    //A. Load the Recaptcha Libary
    require_once("recaptchalib.php");
    require_once("recaptha-keys.php");  // my reCAPTCHA Keys

    $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

    if ($resp->is_valid) {
        ?>success<?
        $_SESSION['captcha'] = 1;
    }
    else 
    {
        die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
           "(reCAPTCHA said: " . $resp->error . ")");
    }
?> 
```

我得到的只是一个空白页面，其中包含以下内容：

`The reCAPTCHA wasn't entered correctly. Go back and try it again.(reCAPTCHA said: incorrect-captcha-sol)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:57:05.357

*   我看到recaptchalib.php的内容

    注意到，api url 和 verify url 不起作用。

    ```
    define("RECAPTCHA_API_SERVER", "http://api.recaptcha.net");
    define("RECAPTCHA_API_SECURE_SERVER", "https://api-secure.recaptcha.net");
    define("RECAPTCHA_VERIFY_SERVER", "api-verify.recaptcha.net"); 
    ```

*   使用本教程：[http ://www.jquery4u.com/forms/setup-user-friendly-captcha-jqueryphp/](http://www.jquery4u.com/forms/setup-user-friendly-captcha-jqueryphp/)

    它使用谷歌recaptcha。

*   更多链接：

    [http://www.google.com/recaptcha/learnmore](http://www.google.com/recaptcha/learnmore)

    [https://developers.google.com/recaptcha/docs/php](https://developers.google.com/recaptcha/docs/php)

# ios - multiplyByInverseOfAttitude (CMAttitude Class) 是如何实现的？

> ID：14482518
> 
> 赞同：1
> 
> 时间：2013-01-23T14:52:08.377
> 
> 标签：ios, objective-c, cocoa, core-motion

我需要实现与 CMAttitude iOS 类中的 multiplyByInverseOfAttitude 相同的行为。请注意，我不能直接使用它，但我有正确的 CMAttitude 对象。任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:46:44.640

由于不允许您自己创建 CMAttitude 的实例，唯一的方法是创建一个新的四元数并将其用于任何进一步的计算。我建议使用您自己定制的四元数类而不是简单的 struct [CMQuaternion](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009943-CH1-SW1)。一个很好的起点是[cocoamath](http://code.google.com/p/cocoamath/)项目，您可以从[树干](http://code.google.com/p/cocoamath/source/browse/trunk)中获取 Quaternion.m、Quaternion.h 和 QuaternionOperations.m ，我将在此示例代码中使用它。

首先，您必须从参考四元数的[复共轭](http://content.gpwiki.org/index.php/OpenGL%3aTutorials%3aUsing_Quaternions_to_represent_rotation#The_complex_conjugate_of_a_quaternion)中保存一个实例（取自`CMAttitude.quaternion`）以用于所有后续乘法，即

我的类.h

```
Quaternion* inverseReferenceQuaternion; 
```

我的类.c

```
// initialising code run only once after each call to [motionManager startDeviceMotionUpdates];
CMAttitude firstAttitude = [motionManager deviceMotion].attitude;
CMQuaternion q = firstAttitude.quaternion;
inverseReferenceQuaternion = [[Quaternion alloc] initWithRe:q.w i:-q.x j:-q.y k:-q.z]; 
```

在您的计时器循环（或处理程序块）中，您需要一个[四元数乘法](http://content.gpwiki.org/index.php/OpenGL%3aTutorials%3aUsing_Quaternions_to_represent_rotation#Multiplying_quaternions)：

```
// on every update
CMAttitude attitude = [motionManager deviceMotion].attitude;
CMQuaternion current = attitude.quaternion;
Quaternion currentMultiplied = initAsProductOf:inverseReferenceQuaternion And:current 
```

现在`currentMultiplied`应该包含您要查找的内容。

如果您是这个主题的新手，四元数很漂亮，但值得阅读一些教程，例如[OpenGL:Tutorials:Using Quaternions to representation rotation](http://content.gpwiki.org/index.php/OpenGL%3aTutorials%3aUsing_Quaternions_to_represent_rotation)或[Quaternion Powers](http://www.gamedev.net/page/resources/_/technical/math-and-physics/quaternion-powers-r1095)。

# php - 如何将变量放入array（）中？

> ID：14482521
> 
> 赞同：1
> 
> 时间：2013-01-23T14:52:18.343
> 
> 标签：php, arrays, variables

**解决了。感谢所有通过答案或评论提供帮助的人，特别是那些花了几分钟用他们的代码输入一些书面解释的人，所以我实际上知道发生了什么:)**

只是一些新手php问题。我在解决如何使它工作方面遇到了麻烦。基本上我只想按价格对菜单进行排序，其中仅包括名称和价格。

Menu.txt 看起来像这样：

```
Meat,1
Salad,3
Juice,2 
```

但是运行程序后它会回显：

```
Array Array
Array Array
Array Array 
```

我想让它像这样打印：

```
Meat,1
Juice,2
Salad,3 
```

这让我觉得我不能像这样在 array() 中使用变量，所以我想知道我应该怎么做？代码在下面，除了按价格排序外，其他一切都在我的程序中运行良好（如果我只是打印 .txt 文件而不尝试排序就可以了等等。）

```
<?php
if (file_exists("menu.txt"))
{
    $lines = file("menu.txt");
    $howmanylines = count($lines);
    for($i=0; $i < $lines; $i++) {
        $oneline = explode(",",$lines[$i]);
        $name = $oneline[0];
        $price = $oneline[1];
        $sortingbyprice = array(
            array($name),
            array($price)
        );
        array_multisort($sortingbyprice[0], $sortingbyprice[1], SORT_NUMERIC, SORT_ASC);
        echo $sortingbyprice[0] . " ";
        echo $sortingbyprice[1] . "<br/>";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:05:45.347

每次将新值输入到数组中时，您都将数组输入到数组中并进行排序。

此代码不会：首先它遍历文件，使用以下格式将菜单项添加到关联数组中：`$sortingbyprice[product] = price`. 然后它对数组进行排序并遍历排序后的数组，生成一个输出（当然，可以根据您的需要进行更改）。

要按**升序**排序：

```
<?php
if (file_exists("menu.txt"))
{
    $lines = file("menu.txt");
    $sortingbyprice = array();

    foreach ($lines as $line)
    {
        $oneline = explode(",", $line);
        $sortingbyprice[$oneline[0]] = $oneline[1];
    }

    // Sort the array, maintaining key associations.
    asort($sortingbyprice, SORT_NUMERIC);

    foreach ($sortingbyprice as $product=>$price)
    {
        echo $product." ".$price."<br />";
    }
}
?> 
```

如果您想**按降序**排序，可以使用

```
 // Sort the array, maintaining key associations.
    arsort($sortingbyprice, SORT_NUMERIC); 
```

简而言之：[asort()](http://php.net/manual/en/function.asort.php)用于升序，[arsort()](http://php.net/manual/en/function.arsort.php)用于降序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:00:55.083

将数据放入数组时出错。这是正确的方法：

```
$sortingbyprice[] = array('name'=>$oneline[0],'price'=>$oneline[1]);
//then to 'echo' a value within the array:
echo $sortingbyprice['name']; 
```

做每条记录，你可以这样做：

```
foreach($sortingbyprice as $price){
    echo $price['name'].': £'.$price['price'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:04:28.850

如果要对*整个*数组进行排序，则需要在`for`循环之外进行。您需要使用循环将文件解析为数组，但随后您需要`usort`在循环外对其进行排序（使用 ）。

您只是在读取数组的每个元素时对其进行排序。您没有将它们与其他元素进行比较，因此您`array_multisort`实际上并没有做任何事情。

```
<?php
if (file_exists("menu.txt")) {
    // Create the array outside the loop
    $sortingbyprice = array();

    $lines = file("menu.txt");
    $howmanylines = count($lines);

    // Note we're using $howmanylines here
    for($i=0; $i < $howmanylines; $i++) {
        // add each row to the array
        $sortingbyprice[] = explode(",", $lines[$i]);
    }

    // Sort the array by its price
    usort($sortingbyprice, function($a, $b){
        return $a[1] - $b[1];
    });

    // echo the array
    for($i=0; $i < $howmanylines; $i++) {
      $row = $sortingbyprice[$i];
      echo $row[0].' '.$row[1].'<br/>';
    }
} 
```

演示：[http ://codepad.viper-7.com/0Qegab](http://codepad.viper-7.com/0Qegab)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T14:56:45.957

您正确执行此操作的方式知道您只是将另一个数组插入到数组中。除非您不想真正将另一个数组添加到数组中，否则您将不得不省略围绕您的值的数组。

```
$sortingbyprice = array(
    $oneline[0],
    $oneline[1]
); 
```

# javascript - $ajax 调用在 chrome/safari 下载文件期间未在 IE/firefox 中

> ID：14482523
> 
> 赞同：1
> 
> 时间：2013-01-23T14:52:24.100
> 
> 标签：javascript, ajax, jquery, asynchronous

我正在使用 ajax 调用下载 1mb 文件并检查下载时间。这是代码

```
var start = new Date();
$(document).ready(function() {    
    $.ajax ({
        url: 'https://www.example.com/dummyFile1024',
        crossDomain: true,
        dataType: "application/octet-stream",
        cache: false,
        async: false,    
        success : function()
        {
             var asd=(new Date() - start)
             alert(asd) 

        },    
        error : function(jqxhr, status, ex) {}   
    })
}) 
```

在 chrome 和 safari 中，它正在等待加载不在 IE 和 firefox 中的完整文件。当我检查开发人员工具网络时。在 Firefox 建立 http/1.1 200 连接并显示到服务器的连接时间。在 chrome 开发人员工具中，它在建立连接并加载完整文件并警告值后处于挂起状态。我怎样才能使它适用于所有浏览器？PS 我尝试过使用另一种文件类型 jpeg 并且发生了同样的事情。firefox 和 ie 只显示了与服务器 chrome 的连接时间，而 safari 则一直等到整个图片加载完毕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:17:08.943

首先，[您不能在跨域通信上使用同步请求](http://api.jquery.com/jQuery.ajax/)：

> “跨域请求和dataType：“jsonp”请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，在请求处于活动状态时禁用任何操作。”

IE/firefox 可能会忽略“async: false”参数。

其次，使用“完成”功能让所有浏览器在 DL 完成时执行代码。

# vba - 有没有办法将算术和逻辑运算符作为 VBA 中的方法参数传递？

> ID：14482524
> 
> 赞同：6
> 
> 时间：2013-01-23T14:52:31.547
> 
> 标签：vba, excel, enums, logical-operators

遇到了几个想要`operators`作为`parameter`函数或方法传递的场景。[根据这篇文章，Java 没有这种能力，因此需要创建一个`Enum`作为主要解决方法](https://stackoverflow.com/questions/2902458/is-it-possible-to-pass-arithmetic-operators-to-a-method-in-java)。

例如

```
Function doCalcs(ByRef AND as LogicalOperator, ByRef greater ArithmeticOperator) 
```

尽管与 .Net 相比，VBA 的库要少得多，但 Java`Enum`还是很好地支持创建。也许我不知道，所以如果 VBA 有可能`operator types`或我们可以通过的任何其他解决方法`an operator`，请输入。（除了`if else`/`case`检查包含运算符参数的字符串.. =））我要问的是[与这里提到的不同](http://msdn.microsoft.com/en-us/library/ms235255%28v=vs.80%29.aspx)。

*   在减少代码，优化方面提出问题。

例如，如果你看[`CountIFS`](http://office.microsoft.com/en-sg/excel-help/countifs-function-HA010047494.aspx)，它有能力接受`operators`。**即使有人可以解释此功能中可能的后端工作**，

1.  它如何将这些字符串转换为正确的`operator`？
2.  那是一种`Enum`结构还是比它更有效或更有效的东西？

这些问题的答案仍然是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:09:57.533

使用类的方法：

定义接口类

**`Op`**

```
Public Function eval(operand1, operand2)
End Function 
```

对于每个所需的运算符，定义一个实现。例如

**`OpMinus`**

```
Implements Op

Private Function Op_eval(operand1 As Variant, operand2 As Variant) As Variant
    Op_eval = operand1 - operand2
End Function 
```

**`OpPlus`**

```
Implements Op

Private Function Op_eval(operand1 As Variant, operand2 As Variant) As Variant
    Op_eval = operand1 + operand2
End Function 
```

现在模块中的一些测试例程：

```
Sub test()
    Dim Minus As New OpMinus
    Dim Plus As New OpPlus
    Dim o, v1, v2

    For Each o In Array(Minus, Plus)
        For Each v1 In Array(1, 2, 3)
            For Each v2 In Array(1, 2, 3)
                operate o, v1, v2
            Next
            Debug.Print ""
        Next
        Debug.Print ""
    Next
End Sub

Sub operate(ByVal operator As Op, operand1, operand2)
    Debug.Print operator.eval(operand1, operand2),
End Sub 
```

输出：

```
 0            -1            -2            
 1             0            -1            
 2             1             0            

 2             3             4            
 3             4             5            
 4             5             6 
```

请注意，如果您知道您将在哪种类型上操作，您可能希望使用 eg`Double`而不是在界面中。`Variant`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:20:05.947

没有 LogicalOperator 类型、ArithmeticOperator 类型或任何类似的类型。最接近的方法是使用[`Eval`](http://msdn.microsoft.com/en-us/library/office/aa172212%28v=office.11%29.aspx)MS Access VBA 中的函数或 Excel VBA 中的（相似但不同的）[`Evaluate`](http://www.ozgrid.com/forum/showthread.php?t=52372 "评估 - VBA 中最强大的命令？")函数。

事实上，您可能已经[`Evaluate`](http://www.ozgrid.com/forum/showthread.php?t=52372 "评估 - VBA 中最强大的命令？")在 Excel 中使用过该功能，甚至没有意识到它。从 Excel 帮助文件：

> **注意** 使用方括号（例如，“[A1:C5]”）与使用字符串参数调用 Evaluate 方法相同。例如，以下表达式对是等价的。

```
[a1].Value = 25
Evaluate("A1").Value = 25 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:31:54.003

我将如何解决问题

1) 参考 Microsof Script Controler 1.0 库

```
Option Explicit

Sub Base_Sub()

Dim iNumber1        As Integer
Dim iNumber2        As Integer
Dim iSum            As Integer
Dim iMultiply       As Integer
Dim dDivision       As Double
Dim iDifference     As Integer
Dim lPower          As Long

iNumber1 = 2
iNumber2 = 6

iSum = CalculateThis("+", iNumber1, iNumber2)
iMultiply = CalculateThis("*", iNumber1, iNumber2)
iDifference = CalculateThis("-", iNumber1, iNumber2)
dDivision = CalculateThis("/", iNumber1, iNumber2)
lPower = CalculateThis("^", iNumber1, iNumber2)

End Sub

Public Function CalculateThis(operator As String, iNumber1 As Integer, iNumber2 As Integer)

Dim script As ScriptControl

Set script = New ScriptControl
script.Language = "VBScript"

CalculateThis = script.Eval(iNumber1 & operator & iNumber2)

End Function 
```

# php - Symfony2 部署时“找不到路由”

> ID：14482528
> 
> 赞同：0
> 
> 时间：2013-01-23T14:52:47.350
> 
> 标签：php, symfony, permissions, ftp, cpanel

我需要在与 cPanel 的共享主机上部署一个 symfony2 应用程序。我已经设法上传它，为 app/cache 和 app/logs 目录设置 umask（根据文档，通过在所需文件中添加 umask(0000) 行）但我有一个奇怪的问题：

每当我使用 ftp 上传新文件时，它似乎都会随机停止工作。即使相同的文件在 localhost 上工作正常，它总是吐出“找不到 GET /（whatever-link）的路由”。清除缓存文件夹没有任何作用。

然后，这是奇怪的部分 - 我相信我已经注意到在几个小时的不活动后它再次开始工作而没有更改文件。

这让我发疯，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:28:17.880

我已经解决了这个问题，并将在这里提供解决方案，以帮助未来的一些不幸的访客：

托管服务提供商启用了旧版本的 eAccelerator - 在缓存 php 文件时将注释从 php 文件中删除。不用说，这对我的整个应用程序造成了严重破坏。

我通过删除所有注释来解决它，而是对所有内容使用 yaml，包括教义映射。

在此处阅读有关此问题的更多信息：[http ://wildlyinaccurate.com/eaccelerator-and-doctrine-2/](http://wildlyinaccurate.com/eaccelerator-and-doctrine-2/)

# javascript - 使用 Kendo UI - 创建日历

> ID：14482535
> 
> 赞同：0
> 
> 时间：2013-01-23T14:53:06.830
> 
> 标签：javascript, kendo-ui

这是一个非常基本的问题 - 我如何创建 Kendo UI 控件/如何让 Kendo 小部件显示？

例如。我为日历控件尝试了这个。我将 js 文件复制到 js 文件夹

*   分钟
*   网络
*   文档
*   日历

并链接了 2 个样式文件。

当我有以下脚本来实例化日历小部件时

```
<script>
    $(document).ready(function () {
        $("#cal").kendoCalendar({
            value: new Date(),
            min: new Date(1950, 0, 1),
            max: new Date(2049, 11, 31)
        });
    });
</script> 
```

但是在 .kendoCalendar() 实例化日历时出现错误。

有人可以帮我弄这个吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:18:54.500

你只需要包括：

```
<!-- Kendo UI Web styles-->
<link href="styles/kendo.common.min.css" rel="stylesheet" type="text/css"/>
<link href="styles/kendo.default.min.css" rel="stylesheet" type="text/css"/>

<!-- jQuery scripts-->
<script src="js/jquery.min.js" type="text/javascript"></script>

<!-- Kendo UI Web scripts-->
<script src="js/kendo.web.min.js" type="text/javascript"></script> 
```

`kendo.web.min.js`包括所有小部件。包括这个就足够了。

你没提`jquery.min.js`。检查您是否也拥有它。

这是 HTML：

```
<div id="cal" name="cal"/> 
```

**编辑**：使用文件 fomr KendoUI CDN 的完整示例：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>OnaBai - KendoUI Calendar example</title>
    <!-- Kendo UI Web styles-->
    <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.common.min.css" rel="stylesheet"/>
    <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.default.min.css" rel="stylesheet"/>

    <!-- Kendo UI Web scripts-->
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://cdn.kendostatic.com/2012.3.1114/js/kendo.web.min.js"></script>

    <!-- Initialize Form Elements -->
    <script type="text/javascript">
        $(document).ready(function () {
            $("#cal").kendoCalendar({
                value: new Date(),
                min  : new Date(1950, 0, 1),
                max  : new Date(2049, 11, 31)
            });
        });
    </script>

</head>
<body>
<div id="cal" name="cal"/>
</body>
</html> 
```

# security - 保护 Joomla 免受前雇员的侵害

> ID：14482537
> 
> 赞同：0
> 
> 时间：2013-01-23T14:53:13.550
> 
> 标签：security, joomla, joomla2.5

我们有一个 Joomla 网站，它是由一位前雇员完成的，他一直在修改他们不应该再改变的东西。我更改了 FTP、DB 和托管 CP 密码，更改了所有 Joomla 用户帐户密码，从站点中删除了他们的用户帐户和 phpMyAdmin。

我没有使用 Joomla 的经验，所以我只是确保我没有错过任何其他设置，并且没有办法让他们重置密码。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:07:34.663

据我所知，您可以做的是更改 Cpanel 密码、FTP 密码、删除您已经完成的任何用户帐户。

除了上面检查错误日志和其他日志文件，如果你有它们，不要忘记经常备份，以防万一那个人搞砸了一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:06:55.443

您已经进行了正确的更改，他们现在将无法访问 Joomla 管理面板或 FTP，但是如果托管帐户是以他们的名义注册的，那么他们仍然有权简单地关闭该帐户。在这种情况下，我会强烈备份站点和数据库。您还可以安装[Saxum IP Logger](http://extensions.joomla.org/extensions/site-management/analytics/visitors/8946)并将管理员 URL 的 IP 地址列入黑名单。

# mysql - 从 MySQL 表中删除后重新排序键

> ID：14482538
> 
> 赞同：2
> 
> 时间：2013-01-23T14:53:14.020
> 
> 标签：mysql

我正在开发一个应用程序具有一组有序字段的项目。此外，还可以删除其中一个字段，但是，如果您删除一行，它不会根据删除的内容重新排序，例如。`1, 2, 4, 5, 6`

有没有办法可以根据上面的字段重新排序列表给我`1, 2, 3, 4, 5`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:01:16.313

如果您知道您删除了“3”，请执行以下操作：

```
update t
    set id = id - 1
    where id > 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:09:27.360

**这假设该`id`列与 auto_increment 一起使用**

我认为没有可靠的“单一命令方式”来做到这一点。您可以使用 Gordon 的解决方案，但正如我所提到的，它不会正确地重新组织您的 id。

这是我的解决方案（假设您可以使用 PHP 或其他脚本语言）：

1.  检索所有表数据。
2.  截断你的表。
3.  用于`ALTER TABLE 'your_table' AUTO_INCREMENT=0`重置 auto_increment。
4.  重新插入您之前检索到的数据。

这将是我这样做的方式。

# oracle - Oracle Forms Developer 在画布之间拖动显示项

> ID：14482541
> 
> 赞同：1
> 
> 时间：2013-01-23T14:53:25.273
> 
> 标签：oracle, oracleforms

谁能告诉我是否可以将显示项目从一个画布拖动到另一个画布？例如，我的表单上有一个拖放功能，允许用户将显示项目拖到不同的区域，然后更新数据库。

由于时间太长，我不得不修改表单，以便主表单包含一个堆叠的画布（这个堆叠的画布在其他 9 个堆叠的画布之间变化）。我现在需要能够将显示项目从我的主窗体拖到这个堆叠的画布上，反之亦然。

当您尝试将其从堆叠画布拖到主窗体时，它不会让我将其从堆叠画布的边界拖动，如果我尝试将对象从主窗体拖到堆叠画布上，它就会消失在它后面。

这可能以某种方式还是我需要回到绘图板？

我可能应该提到我使用的是非常旧版本的表单。表格 4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T08:49:21.993

没有办法使用 drag.pll 库来完成这个，我不得不重新设计我的布局，而不使用单独的堆叠画布。

# spring - jstl 作为 Spring 3 电子邮件模板

> ID：14482542
> 
> 赞同：1
> 
> 时间：2013-01-23T14:53:32.803
> 
> 标签：spring, email, templates, jstl

我正在构建一个标准的 Web 应用程序。为了生成视图，我使用的是 jstl。

有了这个应用程序，我需要发送一些电子邮件。我正在寻找一个电子邮件模板，我找到了 Velocity。

现在我在想，我真的需要 Velocity 还是我可以将 jstl 用于电子邮件模板。也许 jstl 会是最好的解决方案？

或者您有自己的电子邮件模板解决方案？

如果有可能使用 jstl，如何使用它？

你有任何例子或教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:41:52.160

我建议您使用[**Thymeleaf**](http://www.thymeleaf.org/)，因为它支持 Rich HTML 电子邮件模板。此处提供了详细的示例示例。[**Spring3 MVC+百里香叶**](http://www.thymeleaf.org/springmail.html)

**特征 ：**

*   Spring EL 中的表达式。
*   流控制：迭代，条件，...
*   实用功能：日期/数字格式，处理列表，数组...
*   Easy i18n，与我们应用程序的 Spring 国际化基础设施集成。
*   自然模板：我们的电子邮件模板可以是静态原型，由 UI 设计师编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:29:42.190

我使用 Velocity 是因为它简单、轻便、在网络上有很多支持，而且您不限于可以使用模板做什么。

这是一个使用 Spring 的 Velocity 实现： [velocity null point exception](https://stackoverflow.com/questions/14522321/velocity-null-point-exception/14522835#14522835)

对于模板，只需使用带有关键字的 HTML`${keyword}`

```
 <html>
    <body>
    <h3>Hi ${userName}, this is an email template with HTML!</h3>

    <div>
        Your email address is <a href="mailto:${emailAddress}">${emailAddress}</a>.
    </div>
    </body>
</html> 
```

您可以使用循环、注入 bean 等。

# windows-phone-8 - NavigationService.Navigate 中的对象引用错误

> ID：14482544
> 
> 赞同：2
> 
> 时间：2013-01-23T14:53:41.710
> 
> 标签：windows-phone-8

在我的`MainPage`构造函数中，我`NavigationService`用来导航到另一个页面，但出现错误：

> 你调用的对象是空的

有谁知道为什么我无法从我的构造函数导航？

```
public MainPage()
    {           
      InitializeComponent();
      NavigationService.Navigate(new Uri("/test.xaml", UriKind.Relative));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:51:41.800

您要导航到的页面尚未在 c'tor 中创建。“加载”在对象全部创建后触发，并且是执行导航到另一个页面等操作的正确位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T15:47:46.193

派对有点晚了，但[根据 MSDN 所说](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.onnavigatedto%28v=vs.95%29.aspx)的（以及上面@JustinAngel 的评论中提到的），您应该实际使用该`OnNavigatedTo`事件，而不是`Loaded`. 虽然`Loaded`还在工作，

> 通常，您使用 OnNavigatedTo 方法而不是为 Loaded 事件创建事件处理程序。OnNavigatedTo 方法更可取，因为每次页面变为活动状态时它只调用一次。每次将元素添加到可视化树时，Silverlight 框架都会引发 Loaded 事件，这在激活页面时可能会发生不止一次。

# c# - 使用 javascript 或 C# 在 PDF 上绘图

> ID：14482552
> 
> 赞同：1
> 
> 时间：2013-01-23T14:54:09.190
> 
> 标签：c#, javascript, pdf

我正在寻找一种方法，让用户可以在平板电脑、智能手机或 pc 上访问网页并查看 pdf，然后用钢笔工具对其进行签名。然后我需要能够保存它。我希望他们能够在文档上的任何地方绘制，而不仅仅是某些位置。PDF 的页面长度会有所不同，所以我不相信将它们转换为图像并返回是一种选择（我可能是错的）。

即使花费一些钱，我也愿意使用第三方工具。任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:01:18.153

尝试[iTextSharp](http://sourceforge.net/projects/itextsharp/)。只要您不将其用于商业用途，它就免费。这是一个用c#制作pdf的库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:42:57.757

如果我的要求正确，您需要将免费手绘图添加到网站上的 PDF 文件中。您可以通过以下方式做到这一点：
1- 从您的 PDF 文件生成光栅图像并将其显示在网页上。
2- 允许在您的页面上进行手绘并收集由绘图产生的连接点的集合。
3- 将点提交到包含 PDF 文件的服务器，使用 PDF 处理库打开文件，并使用您从浏览器获得的信息为其添加 PDF 注释。

您可以使用[ghostscript](http://www.ghostscript.com/) (GPL)，或使用[ImageMagick](http://www.imagemagick.org)作为 ghostscript (GPL) 的包装器，或使用[Amyuni PDF Creator 之](http://www.amyuni.com/en/developer/pdfcreator/features/)类的商业库（*通常适用免责声明*）来执行第 1 步。

您可以使用 Javascript 使用 HTML5 画布执行第 2 步

您可以对几乎所有 PDF 处理库执行第 3 步，例如使用 iTextSharp (AGPL) 或再次使用 Amyuni PDF Creator。

*请注意，您不应该在不支付任何费用的情况下在商业闭源应用程序中使用 GPL 库。*

# java - 在 jsp 中下载图像：Illegalstateexception: getwriter() 已为此响应调用

> ID：14482556
> 
> 赞同：1
> 
> 时间：2013-01-23T14:54:17.997
> 
> 标签：java, jsp, servlets, struts, illegalstateexception

首先，很抱歉，如果这个问题已经被问过，我已经看到了很多类似的问题，但没有一个能为我提供有用的答案。

我正在使用 Struts，我想将图像下载到 img 标签中。我在我的应用程序的其他地方使用它并且工作正常，但在其中一个地方，该操作会引发 IllegalStateException。这是一个登录页面，没有什么特别之处。这是引发异常的操作中的代码：

```
public String mappingExecute(ActionForm form, HttpServletRequest request,
        HttpServletResponse response) throws Exception {

    OutputStream out = response.getOutputStream();
    String idDocumento = request.getParameter("idDocumento");
    FileResponse fResponse = WebConfig.getFileManager().downloadFile(idDocumento);

    byte[] buffer = fResponse.getFileByteArray();
    out.write(buffer);
    out.close();
    return null;

} 
```

这是一个例外：

```
java.lang.IllegalStateException: getWriter() has already been called for this response
at org.apache.catalina.connector.Response.getOutputStream(Response.java:580)
at org.apache.catalina.connector.ResponseFacade.getOutputStream(ResponseFacade.java:183)
at net.bilbao.dxd.web.SrvDownloadFile.mappingExecute(SrvDownloadFile.java:22)
at net.bilbao.dxd.web.SrvAction.execute(SrvAction.java:56)
at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:421)
at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:397)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

（SrvDownloadFile 是我的动作类的名称，异常被抛出`response.getOutputStream()`）

这是奇怪的部分：当我登录时，下一个 jsp 调用相同的操作并且图像显示正常。当我返回登录页面时，图像也显示正常！此异常仅在您第一次进入登录页面时引发。`getWriter()`在我的动作调用之前，我可以做些什么来检查调用的位置吗？

抱歉我的英语不好，提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T19:55:24.803

也许在登录操作中，您正在转发响应，当控件到达该行时，响应已经发送，这就是异常告诉您的内容。在其他情况下，可能未调用此登录操作，因此它按预期工作。

# jquery - Foursquare api json 未出现在 Internet Explorer 中

> ID：14482557
> 
> 赞同：1
> 
> 时间：2013-01-23T14:54:29.213
> 
> 标签：jquery, json, api, internet-explorer, foursquare

下面的代码适用于除 IE 之外的所有浏览器（包括 Windows 7 上的 IE9）。请帮忙，我错过了什么或做错了什么？

示例：http: [//jsfiddle.net/KBJwh/](http://jsfiddle.net/KBJwh/)

# - 更新 -

根据一些反馈，我更新了代码，`var`并添加了一个警报，其中包含对场地名称的超级简单调用。我仍然无法在 IE 上查看来自 JSON 的数据。

新示例：http: [//jsfiddle.net/ZachSchneider/KBJwh/4/](http://jsfiddle.net/ZachSchneider/KBJwh/4/)

先感谢您！

```
// 4sq API JSON
    var jsonURL = "https://api.foursquare.com/v2/venues/4a9fec80f964a520923d20e3?client_id=FPD2H4NAKX3ABYPEGR2LAMSWV41HC3GSWAEDOCVR00ZDS3LL&client_secret=FCV2G2P3MXZQE2HQYCLHPTMFR03ARE4MWLM34KOX4MXIKCX4&v=20130114";

    // Now let us go and grab that mayor from the API 
    jQuery.getJSON(jsonURL, function (data) {

        // Test Case
            jQuery.each(data.response, function(index, nm){
                    alert(nm.name);
            });

        // Looking through the JSON 
        jQuery.each(data.response.venue.mayor.user, function (i, item) {

            // Neededed 4sq variables 
            var photo = data.response.venue.mayor.user.photo.suffix,
            firstName = data.response.venue.mayor.user.firstName,
            lastName = data.response.venue.mayor.user.lastName,
            checkins = data.response.venue.mayor.count;

            // Content to append into HTML 
            currentMayor = '<img src="https://is1.4sqi.net/userpix_thumbs/' + photo + '"  width="55" height="55" /><p>Congrats, <span class="currentMayor">' + firstName + ' ' + lastName + ' ' + checkins + '</span> check-ins in the last 60 days</p>';
        });

        jQuery(currentMayor).prependTo("#myDIV");
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:46:27.027

我采用了`.ajax()`提供失败和成功属性的方法。

```
// 4sq API JSON
    var jsonURL = "https://api.foursquare.com/v2/venues/4a9fec80f964a520923d20e3?client_id=FPD2H4NAKX3ABYPEGR2LAMSWV41HC3GSWAEDOCVR00ZDS3LL&client_secret=FCV2G2P3MXZQE2HQYCLHPTMFR03ARE4MWLM34KOX4MXIKCX4&v=20130114";
var request = jQuery.ajax({
    url: jsonURL,
    context: document.body
});
// Yay! JSON is working 
request.success(function () {
    // Now let us go and grab that mayor from the API 
    jQuery.getJSON(jsonURL, function (data) {

        // Looking through the JSON 
        jQuery.each(data.response.venue.mayor.user, function (i, item) {

            // Neededed 4sq variables 
            var photo = data.response.venue.mayor.user.photo.suffix,
                firstName = data.response.venue.mayor.user.firstName,
                lastName = data.response.venue.mayor.user.lastName,
                checkins = data.response.venue.mayor.count;

            // Content to append into HTML 
            currentMayor = '<img src="https://is1.4sqi.net/userpix_thumbs/' + photo + '"  width="55" height="55" /><p>Congrats, <span class="currentMayor">' + firstName + ' ' + lastName + ' ' + checkins + '</span> check-ins in the last 60 days</p>';
        });
        jQuery(currentMayor).prependTo("#myDIV");
    });
});
// Foursquare failed or you are just using IE 
request.fail(function () {
    jQuery("<div>placeholder copy for IE or broken API</div>").prependTo("#myDIV");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T14:10:12.913

尝试添加`&callback=?`到 URL 的末尾

# c# - 来自非资源管理器“本机”文件的缩略图（就像 windows 为 jpg、png 等所做的那样）

> ID：14482566
> 
> 赞同：0
> 
> 时间：2013-01-23T14:55:03.853
> 
> 标签：c#, windows, thumbnails

我想要做的是强制 Windows 使用我的程序作为从某种不是图像的文件创建缩略图的基础。

在 Windows 中，您可以看到来自图像、word 文档、pdf 等的缩略图——这就是我想要的其他文件类型。我可以从这些文件中创建位图（稍后我想将其用作缩略图）并将它们存储在某个地方。

我的问题是如何将扩展与创建/检查它们是否存在与我的程序缩略图并返回图像/图像路径的请求连接起来。任何帮助和示例都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:19:21.967

您需要创建一个 COM DLL 库，其中包含一个实现[`IExtractImage`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761848%28v=vs.85%29.aspx).

然后，您使用您支持的文件**扩展名**注册您的*shell 扩展*名：

 **```
HKEY_CLASSES_ROOT\[.ext]\shellex\[SID_IExtractImage]
@default = [MyExtractImageShellExtensionCLSID] 
```

在哪里

*   `.ext`是您正在为其创建查看器的文件的扩展名（例如`.psd`）
*   `SID_IExtractImage`是常数`{BB2E617C-0920-11d1-9A0B-00C04FC2D6C1}`
*   `MyExtractImageShellExtensionCLSID``clsid`是实现的 shell 扩展的类 id ( )`IExtractImage`

所以，如果我正在注册一个 Photoshop`psd`扩展处理程序，并且我的 COM 对象的 clsid 是`{CCB7DB3B-D073-4606-B246-2A5174D274C8}`：

```
HKEY_CLASSES_ROOT\.psd\shellex\{BB2E617C-0920-11d1-9A0B-00C04FC2D6C1}
@default = {CCB7DB3B-D073-4606-B246-2A5174D274C8} 
```

然后只需创建一个实现的 COM 对象：

*   `IPersist`
*   `IPersistFile`
*   `IPersistStream`（选修的）
*   `IExtractImage`

Explorer 将使用您的扩展程序创建 Photoshop 图像的缩略图。

**注意**：如果您运行的是 64 位 Windows，则需要 64 位编译器来创建 64 位 COM 对象 DLL，该 64 位 Windows 资源管理器可以加载。**

# java - JSP IllegalAccessException 无法访问公共成员

> ID：14482568
> 
> 赞同：1
> 
> 时间：2013-01-23T14:55:14.750
> 
> 标签：java, jsp, illegalaccessexception

在 JSP 文件中，我有以下调用来获取地图的一项：

```
${map.keySet().iterator().next()} 
```

执行文件时出现 IllegalAccessException：

```
java.lang.IllegalAccessException: Class javax.el.BeanELResolver can not access a member of class java.util.HashMap$KeySet with modifiers "public" 
```

我们目前不知道这是从哪里来的。奇怪的是，该系统是由四个开发人员开发的，而 JSP 文件在三台机器上运行时没有任何问题（都以相同的方式配置）。有一台机器我们得到这个异常。

# vbscript - 使用 vbs 返回驱动器接口类型和驱动器号

> ID：14482569
> 
> 赞同：0
> 
> 时间：2013-01-23T14:55:19.493
> 
> 标签：vbscript

我正在尝试使用 WMI 调用获取驱动器接口类型和驱动器号，但驱动器号始终作为机器上最后分配的驱动器返回

任何人都可以帮忙吗？

```
'On Error Resume Next
 Option Explicit

 Dim strComputer, objWMIService, colIDiskDrive, objDiskDrive, colLogicalDisk, objLogicalDisk, strDriveLetter, strPNPDeviceID, strDiskLetter, strInterfaceType

strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")

Set colIDiskDrive = objWMIService.ExecQuery("Select * from Win32_DiskDrive",,48)

For Each objDiskDrive in colIDiskDrive
strPNPDeviceID = objDiskDrive.PNPDeviceID
strInterfaceType = objDiskDrive.InterfaceType
Set colLogicalDisk = objWMIService.ExecQuery("Select * from Win32_LogicalDisk") 

For Each objLogicalDisk in colLogicalDisk
        strDiskLetter = objLogicalDisk.Name
Next

Wscript.Echo strInterfaceType & " " & strDiskLetter
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:00:20.567

如果我得到它，我将 Echo 移动到第二个/嵌套的 For/Next 循环中：

```
Option Explicit

Dim strComputer, objWMIService, colIDiskDrive, objDiskDrive, colLogicalDisk, objLogicalDisk, strDriveLetter, strPNPDeviceID, strDiskLetter, strInterfaceType

strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")

Set colIDiskDrive = objWMIService.ExecQuery("Select * from Win32_DiskDrive",,48)

For Each objDiskDrive in colIDiskDrive
    strPNPDeviceID = objDiskDrive.PNPDeviceID
    strInterfaceType = objDiskDrive.InterfaceType
    Set colLogicalDisk = objWMIService.ExecQuery("Select * from Win32_LogicalDisk") 

    For Each objLogicalDisk in colLogicalDisk
        strDiskLetter = objLogicalDisk.Name
        Wscript.Echo strInterfaceType & " " & strDiskLetter
    Next
Next 
```

# python - 使用 GAE Python 的 Twitter 流 API

> ID：14482572
> 
> 赞同：2
> 
> 时间：2013-01-23T14:55:33.283
> 
> 标签：python, google-app-engine, python-2.7, twitter

最近我一直在尝试不同的方法来了解如何使用 Twitter Streaming API。我需要的目的不是宣誓，而是我需要执行关键字搜索并仅获取公共推文及其信息。我的环境是 Google AppEngine + Python 2.7，它实际上不允许第三方库。

我试过但似乎过时了，这些代码仅适用于 Python 控制台。

[呸呸呸](https://github.com/tweepy/tweepy)

[Tweepy-AppEngine](https://github.com/gumptionthomas/tweepy-appengine)

[蟒蛇推特](http://code.google.com/p/python-twitter/)

我没能让它在 Google App Engine 环境中运行，而大多数可用资源都是 3 年前的，而且其中大部分都不是为 GAE 制作的。请指导。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:25:59.607

Tweepy 在 AppEngine 上运行良好。确保将 tweepy 库包含到您的 appengine 应用程序的根目录中（这否定了“实际上不允许第三方库”）。

我想提供更多见解，但我不确定您无法使用上述库完成什么任务；当您从 Streaming API 中获取数据时是否出现故障？Tweepy 支持与 Streaming API 接口 - 值得一看[https://github.com/gumptionthomas/tweepy-appengine/blob/master/tweepy/streaming.py](https://github.com/gumptionthomas/tweepy-appengine/blob/master/tweepy/streaming.py)

不知道这是否有帮助——但如果你有兴趣查看 GAE + Twitter 设置，我已经在 github 上发布了一个 twitterbot（由 Google Analytics 提供支持——但你可以忽略这部分）：[https://github.com/nirvanatikku/ga_twitterbot](https://github.com/nirvanatikku/ga_twitterbot)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T04:58:56.823

无法使用来自 Google App Engine 的 Twitter Streaming API。

GAE 不支持监听套接字，只支持[出站套接字](https://developers.google.com/appengine/docs/python/sockets/)。您必须使用其他服务，例如 Google Compute Engine、Heroku 或 AWS，或者找到一种方法来使用 Twitter REST API。

# sql-server - 获取所有数据左表与右表上的条件（ms sql）

> ID：14482573
> 
> 赞同：0
> 
> 时间：2013-01-23T14:55:36.217
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

colA colB --------------------------------tab_1
1 AA
2 BB
3 CC
4 DD
5 EE

colA colC-------------------tab_2
1 XX
2 YY
3 ZZ

输出必须 (tab_2.colC != ZZ)

colA colB colC
1 AA XX
2 BB YY
4 DD NULL
5 EE NULL

我用左连接尝试过，但它会返回所有 5 条记录

例如：

`select tab_1.colA, tab_1.colB, tab_2.colC`
`from tab_1`
`left join tab_2 on tab_1.colA = tab_2.colA and tab_2.colC != 'ZZ'`

如果有人可以帮助我，我真的很感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:58:34.873

```
SELECT
T1.colA, T1.colB, T2.olC
FROM tab_1 T1
  LEFT JOIN tab_2 T2
    ON T1.colA = T2.colA
WHERE T2.colC != 'ZZ'
   OR T2.colC IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:57:47.040

```
SELECT  a.*, b.ColC
FROM    table1 a
        LEFT JOIN table2 b
            ON a.ColA = b.ColA
WHERE   b.colC <> 'zz' OR b.ColC IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d1827/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:58:32.230

```
SELECT t1.colA, t1.colB, t2.colC
FROM tab_1 t1
LEFT JOIN tab_2 t2
ON tab_1.colA = tab_2.colA
WHERE t2.ColC <> 'ZZ' OR t2.ColC IS NULL 
```

# c - 在字符串中打印中间词。C 编程

> ID：14482576
> 
> 赞同：0
> 
> 时间：2013-01-23T14:55:39.070
> 
> 标签：c, string, tokenize

我需要有关打印出字符串中间单词的代码的帮助。

第一个例子：

> 输入：我的名字是亚历克斯
> 
> 输出：name 或 is <-- 是中间

第二个例子：

> 输入：你好。我在编码方面需要帮助。
> 
> 输出：帮助 <-- 中间词

希望有人可以帮助我。我会尽力跟进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:59:09.080

这是一个想法：

1.  将字符串拆分为单词
2.  现在你知道有多少个单词，决定如何处理偶数大小写
3.  打印决定的单词

您可以`strtok()`用于拆分，也许假设一个“典型”句子不超过 50 个单词，每个单词不超过 16 个字符。只是为了简化代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:04:31.237

完整代码：

```
#include <stdio.h>
#include<string.h>
#include<conio.h>
int main(){
char str[] = "good men to come to the aid of their country";
char delims[] = " ";
char *result;
char word[100][100];
int loop=1;
result = strtok(str, delims );
strcpy(word[0],result);
while( result != NULL ) {
    loop++;

    strcpy(word[loop],result);
     result = strtok( NULL, delims );

   }
int mid=loop/2-1;
// to print the middle element
printf("word is %s \n",word[mid+1]);
getch();
return 0; 
```

# javascript - 切换工具提示文本

> ID：14482581
> 
> 赞同：1
> 
> 时间：2013-01-23T14:55:47.830
> 
> 标签：javascript, jquery, dynamic, tooltip, toggle

基本上我的问题是我的工具提示不会更改切换时的文本。我有一个具有展开/折叠功能的页面。通常，当您将鼠标悬停在向上箭头上时，标题标签会显示折叠面板。当您单击箭头按钮以折叠 div 面板时，img 会发生变化（现在箭头将指向下方，并且标题标签应更改为展开面板）。这有效，并且标题在没有工具提示的情况下更改。添加工具提示后，文本不会更改。我相信你必须在点击时销毁并创建一个新的工具提示，但我不知道该怎么做。他是我的代码，提前谢谢。

```
$("img.toggle1").click(function(){
  if (document.getElementById("panel1").style.display != "none") { // is the div hidden?
    $("img.toggle1").attr("src", "images/expander-down.png");
    $("img.toggle1").attr("title", "Expand this section");
     }
  else{ // is the div showing?
    $("img.toggle1").attr("src", "images/expander-up.png");
    $("img.toggle1").attr("title", "Collapse this section");
    $('div#header1').addClass('headerBarFirstOff');
  }
    $("div.panel1").slideToggle("slow");

  }); 
```

所以用destroy/create方法更新。我可以让工具提示在第一次单击时更改为展开，但它保持为“展开”。我用这个：

```
$("img.toggle1").click(function(){
  if (document.getElementById("panel2").style.display != "none") {
    $("img.toggle1").attr("src", "images/expander-down.png");
    $(document).tooltip("destroy"); //here's the change, the tooltip toggles once
    $(document).tooltip(); //here's the change, the tooltip toggles once
    $("img.toggle1").attr("title", "Expand this section");
     }
  else{
    $("img.toggle1").attr("src", "images/expander-up.png");
    //$(document).tooltip("destroy"); //doesn't work here
    //$(document).tooltip(); //doesn't work here
    $("img.toggle1").attr("title", "Collapse this section");
  } 
```

此外，我有复选框（隐藏/显示特定面板）和打开或关闭所有按钮：

```
$(document).ready(function(){
$("input.togglePanel1").click(function(){
  if($(".togglePanel1").length == $(".togglePanel1:checked").length) { 
    $("div.panel1").slideDown("slow");
    } else {  
    $("div.panel1").slideUp("slow");
    }
  });
$("input.togglePanel2").click(function(){
  if($(".togglePanel2").length == $(".togglePanel2:checked").length) { 
    $("div.panel2").slideDown("slow");
    } else {  
    $("div.panel2").slideUp("slow");
    }
  });
$("input.togglePanel3").click(function(){
  if($(".togglePanel3").length == $(".togglePanel3:checked").length) { 
    $("div.panel3").slideDown("slow");
    } else {  
    $("div.panel3").slideUp("slow");
    }
  });

$("img#closeAll").click(function(){
    $("div.panel1").slideUp("slow");
    $("div.panel2").slideUp("slow");
    $("div.panel3").slideUp("slow");
    $("div.panel4").slideUp("slow");
    $("div.panel5").slideUp("slow");
  });
$("img#openAll").click(function(){
    $("div.panel1").slideDown("slow");
    $("div.panel2").slideDown("slow");
    $("div.panel3").slideDown("slow");
    $("div.panel4").slideDown("slow");
    $("div.panel5").slideDown("slow");
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:41:21.227

`uiTooltipTitle`您可以使用data 属性手动设置工具提示文本

```
$("img.toggle1").click(function(){
  var ishidden = $('#panel1').is(':hidden');
  var src = ishidden ? "images/expander-down.png" : "images/expander-up.png"
  var title = ishidden ? "Expand this section" : "Collapse this section";
  $("img.toggle1")
           .attr("src", src);
  $("img.toggle1")
           .attr("title", title)
           .data('uiTooltipTitle', title);      
  $("div.panel1").slideToggle("slow");

  }); 
```

[http://jsfiddle.net/SHBWW/](http://jsfiddle.net/SHBWW/)

使用 if/else

```
$("img.toggle1").click(function(){
    if($('#panel1').is(':hidden')){
        $("img.toggle1").attr("src", "images/expander-down.png");
        $("img.toggle1")
           .attr("title", "Expand this section")
           .data('uiTooltipTitle', "Expand this section");  
    }else{
        $("img.toggle1").attr("src", "images/expander-up.png");
        $("img.toggle1")
           .attr("title", "Collapse this section")
           .data('uiTooltipTitle', "Collapse this section");  
    }       
    $("div.panel1").slideToggle("slow");    
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:58:10.970

```
$("img.toggle1").click(function(){
  if ($("#panel1").is(":visible")) { 
    //do something
    $("img.toggle1").removeAttr('title');
    $("img.toggle1").attr("title", "Expand this section");
  }
  else{
    //do something
    $("img.toggle1").removeAttr('title');
    $("img.toggle1").attr("title", "Collapse this section");
  }
}); 
```

# regex - Compoundjs 路由正则表达式

> ID：14482583
> 
> 赞同：0
> 
> 时间：2013-01-23T14:55:50.317
> 
> 标签：regex, node.js, express, compoundjs

我们可以在路线图中使用正则表达式吗？我正在创建一个简单的文件浏览器。我在我的中设置了这条路线`/config/routes.js`：

```
map.all('/assets/:folder.:format?', 'assets#index'); 
```

但是文件夹参数可能是（例如）`Images/Logos`，所以我很感兴趣是否可以使用正则表达式。

在我的 ROR 项目中，我能够借助路由器的`:contrains`参数解决类似的问题：

```
match 'applications/:store/:platform/:identifier/:filename' => 'assets#direct_download',
    :constraints => {
      :store => /[\w.-]+/,
      :platform => /[\w.-]+/,
      :identifier => /[\w.-]+/,
      :filename => /.+/
    } 
```

我找不到任何例子。因此，如果有人能为我澄清这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:34:56.870

您可以使用以下语法：

```
map.all(new RegExp('^\/assets\/(.*)$'), 'assets#index'); 
```

然后使用其索引捕获参数（从`0`- 整个字符串被忽略，**不像**`preg_match`或类似的函数）：

```
// app/controllers/assets_controller.js
console.log(params[0]); 
```

# ios - FSEvents 在 IOS 中可用吗？

> ID：14482589
> 
> 赞同：6
> 
> 时间：2013-01-23T14:56:08.447
> 
> 标签：ios

在我的应用程序中，我需要能够监视目录中的文件更改（添加/删除）。我已经阅读了有关 IOS 5 中可用的 FSEvents 的信息，但找不到关于此的其他信息。有谁知道他们有空吗？如果是这样，有什么可用的例子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-12T16:15:22.250

查看更高级别（无论如何比 FSEvents 更强大）的 NSFileCoordinator 和 NSFilePresenter 协议。

**NSFilePresenter：http:** [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSFilePresenter_protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSFilePresenter_protocol/Reference/Reference.html)

**NSFileCoordinator：http:** [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSFileCoordinator_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSFileCoordinator_class/Reference/Reference.html)

WWDC 会议“利用文件协调”概述了 2011 年的 API，其视频值得一看。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-12T15:00:01.973

我最终得到了一个使用 kevents 的 FileMonitor 类

```
 #import <Foundation/Foundation.h>

        @protocol FileMonitorDelegate <NSObject>
        @required
        -(void) dirChanged:(NSString*) aDirName;
        @end

 @interface FileMonitor : NSObject

    - (void) monitorDir:(NSString*) aDir delegate:(id<FileMonitorDelegate>) aDelegate;

    @end 
```

以及实施

```
#import <fcntl.h>
#import <unistd.h>
#import <sys/event.h>

#import "FileMonitor.h"
#import "LogMacros.h"

@interface FileMonitor ()

@property (nonatomic, assign, readonly) CFFileDescriptorRef _fileDes;
@property (nonatomic, retain) NSArray* fns;

@end

    @implementation FileMonitor

    static int                  _dirFD;
    static CFFileDescriptorRef  _fileDes;
    static id<FileMonitorDelegate> _delegate;
    static NSString *_watchedDir;

    static void KQCallback(CFFileDescriptorRef kqRef, CFOptionFlags callBackTypes, void *info){

        LOG(@"KQCallback called !!");
        if(_delegate){
            [_delegate dirChanged:_watchedDir];
        }

        // Pull the native FD around which the CFFileDescriptor was wrapped
        int kq = CFFileDescriptorGetNativeDescriptor(_fileDes);
        if (kq < 0){
            return;
        }

        // If we pull a single available event out of the queue, assume the directory was updated
        struct kevent event;
        struct timespec timeout = {0, 0};
        if (kevent(kq, NULL, 0, &event, 1, &timeout) == 1){
            if( _delegate ){
                [_delegate dirChanged:_watchedDir];
            }else{
                LOG_ERROR(@"Callback with NO delegate set");
            }
        }

        // issue callback request
        CFFileDescriptorEnableCallBacks(_fileDes, kCFFileDescriptorReadCallBack);
    }

    #pragma mark -
    #pragma mark View lifecycle

    - (void) monitorDir:(NSString*) aDir delegate:(id<FileMonitorDelegate>) aDelegate{
        ASSERT(aDir);
        ASSERT(aDelegate);
        _watchedDir = aDir;
        _delegate = aDelegate;

        NSError *error;

        self.fns = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:aDir error:&error];
        LOG_IF_NSERROR(error);
        [self startMonitor];
    }

    - (void)startMonitor {
        // One ping only
        if (_fileDes != NULL){
            LOG_ERROR(@"kernel queue was null");
            return;
        }

        // Open an event-only file descriptor associated with the directory
        int dirFD = open([ _watchedDir fileSystemRepresentation], O_EVTONLY);
        if (dirFD < 0) {
            LOG_ERROR(@"could not open file descriptor");
            return;
        }

        // Create a new kernel event queue
        int kq = kqueue();
        if (kq < 0){
            LOG_ERROR(@"could not open kernel queue");
            close(dirFD);
            return;
        }

        // Set up a kevent to monitor
        struct kevent eventToAdd;                   // Register an (ident, filter) pair with the kqueue
        eventToAdd.ident  = dirFD;                  // The object to watch (the directory FD)
        eventToAdd.filter = EVFILT_VNODE;           // Watch for certain events on the VNODE spec'd by ident
        eventToAdd.flags  = EV_ADD | EV_CLEAR;      // Add a resetting kevent
        eventToAdd.fflags = NOTE_WRITE;             // The events to watch for on the VNODE spec'd by ident (writes)
        eventToAdd.data   = 0;                      // No filter-specific data
        eventToAdd.udata  = NULL;                   // No user data

        // Add a kevent to monitor
        if (kevent(kq, &eventToAdd, 1, NULL, 0, NULL)){
            close(kq);
            close(dirFD);
            return;
        }

        // Wrap a CFFileDescriptor around a native FD
        CFFileDescriptorContext context = {0, (__bridge void *)(self), NULL, NULL, NULL};
        _fileDes = CFFileDescriptorCreate(NULL,     // Use the default allocator
                                        kq,         // Wrap the kqueue
                                        true,       // Close the CFFileDescriptor if kq is invalidated
                                        KQCallback, // Fxn to call on activity
                                        &context);  // Supply a context to set the callback's "info" argument
        if (_fileDes == NULL){
            close(kq);
            close(dirFD);
            return;
        }

        // Spin out a pluggable run loop source from the CFFileDescriptorRef
        // Add it to the current run loop, then release it
        CFRunLoopSourceRef rls = CFFileDescriptorCreateRunLoopSource(NULL, _fileDes, 0);
        if (rls == NULL){
            CFRelease(_fileDes); _fileDes = NULL;
            close(kq);
            close(dirFD);
            return;
        }
        CFRunLoopAddSource(CFRunLoopGetCurrent(), rls, kCFRunLoopDefaultMode);
        CFRelease(rls);

        // Store the directory FD for later closing
        _dirFD = dirFD;

        // issue callback request
        CFFileDescriptorEnableCallBacks(_fileDes, kCFFileDescriptorReadCallBack);
    }

    - (void)stopMonitor{
        if (_fileDes)
        {
            close(_dirFD);
            CFFileDescriptorInvalidate(_fileDes);
            CFRelease(_fileDes);
            _fileDes = NULL;
        }
    }

    - (void)restartMonitor{
        [self stopMonitor];
        [self startMonitor];
    }

    - (void)dealloc{
        [self stopMonitor];
    }

    @end 
```

# java - 无法在简单 JPA 存储库上创建查询元模型

> ID：14482593
> 
> 赞同：3
> 
> 时间：2013-01-23T14:56:16.213
> 
> 标签：java, jpa, spring-data, spring-data-jpa

我定义了以下存储库

```
public interface CityVerboseRepository extends JpaRepository<CityVerbose, Integer>{
    List<CityVerbose> findByStreetStartingWith(String street);      
} 
```

对应实体

```
@Entity
public class CityVerbose {
    @Id
    public Integer id;

    public String street;
} 
```

但我得到的只是

> 无法为公共抽象 java.util.List 方法创建查询元模型

一旦我尝试自动装配该存储库。我所有其他存储库都工作得很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:13:02.887

该`startingWith`语法在 spring 数据的 1.0.3.RELEASE 中不可用。更新到 1.2.0.RELEASE 一切正常

# jquery - 获取 jQgrid 选定的行

> ID：14482594
> 
> 赞同：0
> 
> 时间：2013-01-23T14:56:22.300
> 
> 标签：jquery, jquery-plugins

我正在使用多选 jqgrid。我有一个1500 行的*jqgrid 。*结果是分页的，在一页上我显示 100 个条目。

我还需要在其他页面中选择所有行。

我在用

`$("#tableNm").jqGrid('getGridParam', 'selarrrow');`

但它只给出当前页面选定的行..

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:07:41.653

Just for some tips to begin with -

```
onSelectRow: function(){
   //remember which rows were selected/de-selected, 
   //via cookies, HTML5 localStorage, etc
}

loadComplete : function(){
   //fetch which rows were previously selected and highlight them if they are 
   // present in the current page
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:02:42.787

正如 Jeffery 链接的其他问题中所述，jqGrid 仅在当前页面上维护选择。您需要编写自己的应用程序级代码来维护其他页面中的选定行。

# sml - 构造列表中的 sml 有线事物

> ID：14482595
> 
> 赞同：0
> 
> 时间：2013-01-23T14:56:38.507
> 
> 标签：sml

代码如下：

```
- fun foo(a : int, b :int) =
=   if a > b
=   then []
=   else [a] @ foo(a+1, b)
= ;
val foo = fn : int * int -> int list
- foo(1, 100);
val it = [1,2,3,4,5,6,7,8,9,10,11,12,...] : int list 
```

该函数打算构造一个从a到b的列表，如果a大于或等于b，否则将创建一个空列表。当我运行函数 foo 时，a 和 b 的参数分别绑定为 1 和 100，我得到了有趣的结果：

```
[1,2,3,4,5,6,7,8,9,10,11,12,...] 
```

是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:13:31.467

这只是意味着您的 SML 系统（我假设是 SML-NJ）省略了部分输出，以防止显示变得过长。这是另一个 SML 系统，莫斯科 ML：

```
Moscow ML version 2.01 (January 2004)
Enter `quit();' to quit.
- fun foo(a, b) =
   if a > b
   then []
   else [a] @ foo(a+1, b)
;
> val foo = fn : int * int -> int list
- foo(1, 100);
> val it =
    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,
     22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39,
     40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,
     58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75,
     76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93,
     94, 95, 96, 97, 98, 99, 100] : int list
-
- foo(1, 1000);
> val it =
    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,
     22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39,
     40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,
     58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75,
     76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93,
     94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109,
     110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124,
     125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139,
     140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154,
     155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169,
     170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184,
     185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199,
     200, ...] : int list
- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:15:16.493

SML 解释器有一些内部默认值，告诉它要打印多少，正如 Michael 也显示的那样。但是，您可以通过设置更高的值来控制这些，然后打印更多的值。有关详细信息，请参阅此[答案](https://stackoverflow.com/questions/14412439/see-sml-full-list/14412827#14412827)

# magento - 订单提交 Magento

> ID：14482596
> 
> 赞同：0
> 
> 时间：2013-01-23T14:56:40.520
> 
> 标签：magento

我们在 Magento 上有一个奇怪的问题。

一位客户在购物车中添加了 50 件产品，点击“进行结帐”，确认运输和付款方式，然后他确认了订单。

问题是有一个显示“正在加载”的 .gif 和一条告诉用户等待但没有任何反应的消息。

奇怪的是订单没有提交，但产品数量从数据库中卸载。

两个有趣的方面：

1) 如果我将大订单分成 3 个小订单，则没有问题。

2) 我在 PHP 日志上只能看到一个错误（但我不确定它是否与此有关）：

> [23-Jan-2013 06:54:28] PHP 致命错误：/home/**************/lib/Zend/Cache/Backend/ 中的最大执行时间超过 30 秒第 655 行的 File.php
> [23-Jan-2013 09:23:08] PHP 致命错误：/home/**************/lib/ 中的最大执行时间超过 30 秒Zend/Cache/Backend/File.php 在第 1003 行
> [23-Jan-2013 11:38:17] PHP 致命错误：/home/*********** 中超过 30 秒的最大执行时间***/lib/Zend/Cache/Backend/File.php 第 961 行
> [23-Jan-2013 11:43:40] PHP 致命错误：/home/***** 中的最大执行时间超过 30 秒*********/lib/Zend/Cache/Backend/File.php 第 654 行

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:18:03.753

这与服务器的速度有很大关系。您可以在 php.ini 中增加执行时间，但问题在于速度。30秒对我来说似乎太多了。

也许 APC 缓存可以加速这个网上商店，足以让网上商店处理如此大的订单。

# php - 未定义的索引错误php wordpress插件

> ID：14482597
> 
> 赞同：-2
> 
> 时间：2013-01-23T14:56:41.350
> 
> 标签：php, debugging, wordpress

除了 wordpress 之外，我认为在此处发布此内容是合适的，因为我的错误与 php 更相关。

我正在为我的网站用户使用 addthissocial 登录插件进行社交登录。但是当我尝试使用插件作者提供的快捷方式代码嵌入登录按钮时，它不起作用，我看到任何登录按钮。

当我尝试使用 wp-debug 进行调试时，出现以下错误

> 注意：未定义索引：第 130 行 /var/www/wp-content/plugins/addthis-social-sign-in/addthis_social_sign_in.php 中的 addthis_signature

这是第 130 行`if( $_REQUEST[ 'addthis_signature' ] != "" )`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:58:18.470

这不是一个错误，它只是一个通知。您可以通过添加这样的检查来解决它：

```
if(isset($_REQUEST[ 'addthis_signature' ]) && $_REQUEST[ 'addthis_signature' ] != "" ) 
```

# java - JTable 动态 JCheckBox 需要 1 次单击取消选中，但需要 2 次单击才能选中

> ID：14482598
> 
> 赞同：1
> 
> 时间：2013-01-23T14:56:41.893
> 
> 标签：java, swing, jtable, jcheckbox

我对java很陌生，所以请原谅我犯的任何愚蠢的错误......

我有一个 2 列的 JTable，其中第 2 列可以有 4 种类型：

*   不能更改值的列
*   可以包含任何文本字符串的列
*   包含 JComboBoxes 的列
*   包含 JCheckBoxes 的列

列类型是动态的，因为它们取决于接收到的数据。

所有类型都可以正常工作，除了 JCheckBox。当我用具有 2 个选项的 JComboBox 替换 JCheckBox 时，它可以正常工作。所以我猜JCheckBox的代码有问题。

问题是 ：

*   当 JCheckBox 被选中时，我只需单击 1 次即可取消选中它
*   但是，当未选中 JCheckBox 时，我需要单击它两次（而不是双击）来检查它

## 编辑

一个示例项目（尽可能小）：

```
 import java.awt.Component;
    import javax.swing.*;
    import javax.swing.event.*;
    import javax.swing.table.*;

    public class frmCheck extends JApplet
    {
        JTable mgrdData;
        DefaultTableModel mtableModel;

        public void init()
        {
            mtableModel = new DefaultTableModel();
            mtableModel.setColumnCount(2);
            mtableModel.setRowCount(4);
            mgrdData = new JTable(mtableModel);
            mgrdData.getSelectionModel().addListSelectionListener(new RowListener());
            add(mgrdData);
            for (int i=1;i<mtableModel.getRowCount();i++)
            {
                addCheck(1);
            }
        }

        private class RowListener implements ListSelectionListener
        {
            public void valueChanged(ListSelectionEvent event)
            {
                if (event.getValueIsAdjusting()) return;
            }
        }

        private void addCheck(int intCol)
        {
            mgrdData.getColumnModel().getColumn(intCol).setCellRenderer(new TableCellRenderer()
            {
                public Component getTableCellRendererComponent(JTable table,Object value,boolean isSelected,boolean isFocused,int row,int col)
                {
                    JCheckBox rendererComponent = new JCheckBox();
                    String strVal="";
                    if (value!=null) strVal = value.toString();
                    if (strVal.equals("1"))
                    {
                        rendererComponent.setSelected(true);
                    } else
                    {
                        rendererComponent.setSelected(false);
                    }
                    return rendererComponent;
                }
            });
            DefaultCellEditor cellEditor = new DefaultCellEditor(new JCheckBox());
            cellEditor.setClickCountToStart(1);
            cellEditor.addCellEditorListener(new CellEditorListener()
            {
                public void editingCanceled(ChangeEvent e) {}
                public void editingStopped(ChangeEvent e)
                {
                    JCheckBox checkBox = (JCheckBox)((DefaultCellEditor)e.getSource()).getComponent();
                    System.out.println("isSelected = " + checkBox.isSelected());
                    if (checkBox.isSelected())
                    {
                        System.out.println("Sent 0");
                    } else
                    {
                        System.out.println("Sent 1");
                    }
                }
            });
            mgrdData.getColumnModel().getColumn(intCol).setCellEditor(cellEditor);
        }
    } 
```

我用来查看小程序的 html 页面是：

```
<html>
  <body>
    <applet code="frmCheck.class" width="1016" height="822"></applet>
  </body>
</html> 
```

要使其成为可执行文件（应用程序），您可以向其中添加以下 main() 函数（在 init() 函数上方，mtableModel 声明下方）

```
 public static void main(String[] args) {
        frmCheck myApplet = new frmCheck(); // define applet of interest
        Frame myFrame = new Frame("Applet Holder"); // create frame with title

        // Call applet's init method (since Java App does not
        // call it as a browser automatically does)
        myApplet.init();    

        // add applet to the frame
        myFrame.add(myApplet, BorderLayout.CENTER);
        myFrame.pack(); // set window to appropriate size (for its elements)
        myFrame.setVisible(true); // usual step to make frame visible

      } 
```

当您单击未选中的复选框时，控制台会显示：

```
isSelected = true
Sent 0 
```

之后，当我再次单击该复选框（因此第二次）时，该复选框仍未选中，然后控制台显示：

```
isSelected = false
Sent 1 
```

复选框在短时间内闪烁为选中状态，然后当我再次单击复选框时再次变为未选中状态（因此第三次），然后它的行为就像第一次被单击

我希望复选框： - 未选中并单击时发送 1 - 选中并单击时发送 0

真正的项目有点复杂：通过检查 JCheckBox，我向设备发送一条消息，该设备以其当前状态进行回答，该状态被处理并显示为选中的 JCheckBox。当我通过另一个通道更改设备中的状态时，处理工作正常，然后 JCheckBox 完美显示当前状态

我希望 JCheckBox 响应 1 单击：

*   当它被选中并单击它时，它应该发送“REG SCH 4 = 0”
*   当它未选中并单击它时，它应该发送“REG SCH 4 = 1”

**好的，这是我到目前为止的代码：**

JTable 创建如下：

```
JTable mgrdData;
DefaultTableModel mtableModel;
mtableModel = new DefaultTableModel(null,new String[0]);
mgrdData = new JTable(mtableModel);
mgrdData.getSelectionModel().addListSelectionListener(new RowListener());
mgrdData.setFillsViewportHeight(true);
String[] strHeader = {"Naam","Waarde"};
mtableModel.setColumnIdentifiers(strHeader); 
```

列配置如下：

```
 addReadOnly(0);
//          addCombo(1,new String[]{"UIT","AAN"}); //this works fine
        addCheck(1); 
```

第 0 列是只读的，第 1 列有 2 个可能的值，其中 addCombo(1,new String[]{"UIT","AAN"}); 完美的作品

函数 addReadOnly 和 addCombo 和 addCheck 如下：

```
private void addReadOnly(int intCol)
{
    JTextField txtField = new JTextField();
    txtField.setEditable(false);
    DefaultCellEditor cellEditor = new DefaultCellEditor(txtField);
    mgrdData.getColumnModel().getColumn(intCol).setCellEditor(cellEditor);
}

private void addCombo(int intCol,final String[] strItems)
{
    //add combobox
    mgrdData.getColumnModel().getColumn(intCol).setCellRenderer(new TableCellRenderer()
    {
        public Component getTableCellRendererComponent(JTable table,Object value,boolean isSelected,boolean isFocused,int row,int col)
        {
            JComboBox rendererComponent = new JComboBox(strItems);
            if (value!=null) rendererComponent.setSelectedItem(value.toString());
            return rendererComponent;
        }
    });
    DefaultCellEditor cellEditor = new DefaultCellEditor(new JComboBox(strItems));
    cellEditor.setClickCountToStart(1);
    cellEditor.addCellEditorListener(new CellEditorListener()
    {
        private boolean blnChanged=false;
        public void editingCanceled(ChangeEvent e) {}
        public void editingStopped(ChangeEvent e)
        {
            if (blnChanged==true)
            {
                JComboBox comboBox = (JComboBox)((DefaultCellEditor)e.getSource()).getComponent(); 
                sendVal(String.valueOf(comboBox.getSelectedIndex()));
                blnChanged = false;
            } else
            {
                blnChanged = true; 
            } 
        }
    });
    mgrdData.getColumnModel().getColumn(intCol).setCellEditor(cellEditor);
}

private void addCheck(int intCol)
{
    //add checkbox
    mgrdData.getColumnModel().getColumn(intCol).setCellRenderer(new TableCellRenderer()
    {
        public Component getTableCellRendererComponent(JTable table,Object value,boolean isSelected,boolean isFocused,int row,int col)
        {
            JCheckBox rendererComponent = new JCheckBox();
            String strVal="";
            if (value!=null) strVal = value.toString();
//              if (strVal.equals("AAN"))
            if (strVal.equals("1"))
            {
                rendererComponent.setSelected(true);
            } else
            {
                rendererComponent.setSelected(false);
            }
            return rendererComponent;
        }
    });
    DefaultCellEditor cellEditor = new DefaultCellEditor(new JCheckBox());
    cellEditor.setClickCountToStart(1);
    cellEditor.addCellEditorListener(new CellEditorListener()
    {
        public void editingCanceled(ChangeEvent e) {}
        public void editingStopped(ChangeEvent e)
        {
            JCheckBox checkBox = (JCheckBox)((DefaultCellEditor)e.getSource()).getComponent();
            System.out.println("isSelected = " + checkBox.isSelected());
            if (checkBox.isSelected())
            {
                sendVal("0");
                System.out.println("Sent 0");
            } else
            {
                sendVal("1");
                System.out.println("Sent 1");
            }
        }
    });
    mgrdData.getColumnModel().getColumn(intCol).setCellEditor(cellEditor);
} 
```

**点击 3 次后的测试结果：**

选中 JCheckBox，单击 1 次后的结果：

```
isSelected = true
Sent : REG SCH 4 = 0
Sent 0 
```

在此之后，未选中 JCheckBox

JCheckBox 未选中，单击 1 次后的结果：

```
isSelected = true
Sent : REG SCH 4 = 0
Sent 0 
```

在此之后 JCheckBox 仍然未选中

JCheckBox 未选中但已单击一次，第二次单击后的结果：

```
isSelected = false
Sent : REG SCH 4 = 1
Sent 1 
```

在此之后检查 JCheckBox

我搜索并找到了当您总是需要 2 次点击的解决方案，或者具有固定复选框而不是动态的解决方案，但不是像我这样的情况......

任何人都可以阐明一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:23:22.847

## 回答

问题是当复选框值是布尔值时，您将其视为字符串。

工作代码如下：

```
Boolean val = new Boolean(false);
if (value != null){
    val = (Boolean) value;
}
if (val.booleanValue()) {
    rendererComponent.setSelected(true);
}else{
     rendererComponent.setSelected(false);
}
return rendererComponent; 
```

## 旧答案

我仍在查看它，但我认为问题可能是由于`JCheckBox`选择或不选择取决于：

```
if (strVal.equals("AAN"))
        {
            rendererComponent.setSelected(true);
        } else
        {
            rendererComponent.setSelected(false);
        } 
```

不是`"AAN"`复选框的值而不是复选框的值吗？

此外，您每次都在创建一个新的 JCheckBox。

也许[SSCCE](http://sscce.org/)可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:48:26.393

您的代码的问题在于`getTableCellRendererComponent`方法。在这里，您总是使用`JCheckBox`. 所以每次它都需要一个新的`JCheckBox`并渲染列。

除此之外，无需将列呈现到`Boolean`. `JTable`它自己会呈现。您只需将列类型指定为`Boolean.class.`覆盖`getColumnClass`模型中的方法（DefaultTableModel，就像我展示的那样）并说 column-1 是布尔值。

![小程序示例](../Images/2d441deadb1f1a5347c9f69d386ece47.png)

```
import javax.swing.DefaultCellEditor;
import javax.swing.JApplet;
import javax.swing.JCheckBox;
import javax.swing.JTable;
import javax.swing.event.CellEditorListener;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableModel;

    public class frmCheck extends JApplet
    {
        JTable mgrdData;
        DefaultTableModel mtableModel;

        public void init()
        {
            mtableModel = new DefaultTableModel() {
                @Override
                public Class<?> getColumnClass(int arg0) {
                    if(arg0 == 1) {
                        return Boolean.class; 
                    } else {
                        return super.getColumnClass(arg0);
                    }
                }
            };
            mtableModel.setColumnCount(2);
            mtableModel.setRowCount(4);
            mgrdData = new JTable(mtableModel);
//            mgrdData.getSelectionModel().addListSelectionListener(new RowListener());
            add(mgrdData);

            for (int i=1;i<mtableModel.getRowCount();i++)
            {
                addCheck(1);
            }
        }

        private class RowListener implements ListSelectionListener
        {
            public void valueChanged(ListSelectionEvent event)
            {
                if (event.getValueIsAdjusting()) return;
            }
        }

        private void addCheck(int intCol)
        {

            DefaultCellEditor cellEditor = new DefaultCellEditor(new JCheckBox());
             mgrdData.getColumnModel().getColumn(1).getCellEditor();
            cellEditor.setClickCountToStart(1);
            cellEditor.addCellEditorListener(new CellEditorListener()
            {
                public void editingCanceled(ChangeEvent e) {}
                public void editingStopped(ChangeEvent e)
                {
                    JCheckBox checkBox = (JCheckBox)((DefaultCellEditor)e.getSource()).getComponent();
                    System.out.println("isSelected = " + checkBox.isSelected());
                    if (checkBox.isSelected())
                    {
                        System.out.println("Sent 0");
                    } else
                    {
                        System.out.println("Sent 1");
                    }
                }
            });
            mgrdData.getColumnModel().getColumn(intCol).setCellEditor(cellEditor);
        }
    } 
```

PS：我已经删除了未使用的代码。

# c# - 缺少根元素。例外

> ID：14482603
> 
> 赞同：2
> 
> 时间：2013-01-23T14:56:54.023
> 
> 标签：c#, linq-to-xml

我想像这样使用 linq to xml 创建 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<Configuration>
  <Settings>
    <UseStreemCodec value="false" />
    <SipPort value="5060"/>
    <H323Port value="1720" />
  </Settings>

  <IncomingCallsConfiguration>
  </IncomingCallsConfiguration>

  <OutGoingCallsConfiguration>
    <Devices>
    </Devices>
  </OutGoingCallsConfiguration>

  </Configuration> 
```

我试试这段代码，但给我一个`Root element is missing.` 例外

```
public void CreatXmlConfigurationFileIfNotFoundWithDefultTags(string path)
        {
            if (!File.Exists(path))
            {
                try
                {
                    File.Create(path).Close();
                    XDocument document = XDocument.Load(path);
                    var setting = new XElement("Settings",
                        new XElement("UseStreemCodec", new XAttribute("value", "false")),
                        new XElement("SipPort", new XAttribute("value", "5060")),
                         new XElement("H323Port", new XAttribute("value", "1720"))
                        );

                    document.Add(new XElement("Configuration", setting,
                        new XElement("IncomingCallsConfiguration"),
                        new XElement("OutGoingCallsConfiguration")));

                    document.Save(path);
                }
                catch (Exception e)
                {
                    Trace.WriteLineIf(Logger.logSwitch.TraceError, e.Message);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:59:41.333

您可以简单地保存`XElement`哪个是root。当您创建新的 xml 文件时，您不需要加载任何内容：

```
public void CreatXmlConfigurationFileIfNotFoundWithDefultTags(string path)
{
    if (!File.Exists(path))
    {
        try
        {
            var setting = new XElement("Settings",
                new XElement("UseStreemCodec", new XAttribute("value", "false")),
                new XElement("SipPort", new XAttribute("value", "5060")),
                new XElement("H323Port", new XAttribute("value", "1720"))
              );

            var config = new XElement("Configuration", setting,
                new XElement("IncomingCallsConfiguration"),
                new XElement("OutGoingCallsConfiguration")));

            config.Save(path); // save XElement to file
        }
        catch (Exception e)
        {
            Trace.WriteLineIf(Logger.logSwitch.TraceError, e.Message);
        }
    }
} 
```

如果您想使用 XDocument （在您的情况下不需要），那么只需创建新的 XDocument 而不是加载不存在的文件：

```
XDocument document = new XDocument();
var setting = new XElement("Settings",
    new XElement("UseStreemCodec", new XAttribute("value", "false")),
    new XElement("SipPort", new XAttribute("value", "5060")),
        new XElement("H323Port", new XAttribute("value", "1720"))
    );

document.Add(new XElement("Configuration", setting,
    new XElement("IncomingCallsConfiguration"),
    new XElement("OutGoingCallsConfiguration")));

document.Save(path); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:01:36.063

好吧，您尝试使用 XDocument.Load() “读取/解析”一个新的空文档

```
File.Create(path).Close();
XDocument document = XDocument.Load(path); 
```

并且`XDocument.Load()`想要一个正确的xml文件......他没有（文件为空）！

所以你可以做

```
var document =  new XDocument();
//...
document.Save(path); 
```

# sql-server-2008 - T-SQL：如何处理打印语句中的错误？

> ID：14482604
> 
> 赞同：1
> 
> 时间：2013-01-23T14:56:56.983
> 
> 标签：sql-server-2008, tsql, error-handling

在打印出一些涉及除以计算百分比的计算值时，我收到了除以零的错误。我不担心它正在发生，我只想知道如何打印 0 以及该行的其余部分，而不是打印错误，即 0%。

这是我的打印声明：

```
print cast(@usercode as varchar) + ' ' + @username + space(4) +
    'cr' + space(4) + cast(@totalUserVolumeCredit as varchar) + 
    space(4) + cast(@userUnpaids as varchar) + space(4) + 
    cast(@userDisputes as varchar) + space(4) + 
    cast((@userUnpaids + @userDisputes) as varchar) + space(4) + 
    cast(((@userUnpaids + @userDisputes)/@totalUserVolumeCredit) as varchar) + --error line
    space(4) + cast(@userRedirectsVolume as varchar); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:02:20.830

```
print cast(@usercode as varchar) + ' ' + @username + space(4) +
     'cr' + space(4) + cast(@totalUserVolumeCredit as varchar) + 
     space(4) + cast(@userUnpaids as varchar) + space(4) + 
     cast(@userDisputes as varchar) + space(4) + 
     cast((@userUnpaids + @userDisputes) as varchar) + space(4) + 
     case @totalUserVolumeCredit when 0 then '0' else
        cast(((@userUnpaids + @userDisputes)/@totalUserVolumeCredit) as varchar)
     end +
     space(4) + cast(@userRedirectsVolume as varchar); 
```

[演示](http://sqlfiddle.com/#!6/d41d8/2079)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:00:30.137

您的打印语句很复杂。我建议分解计算并分配变量，然后打印结果。您可以像这样使用[T-SQL if/else](http://msdn.microsoft.com/en-us/library/ms182587.aspx)：

```
declare @calculation varchar(20)

if @totalUserVolumeCredit = 0
    set @calculation = '0%'
else
    set @calculation = cast((@userUnpaids + @userDisputes)/@totalUserVolumeCredit as varchar)

print cast(@usercode as varchar) + ' ' + @username + space(4) +
    'cr' + space(4) + cast(@totalUserVolumeCredit as varchar) + 
    space(4) + cast(@userUnpaids as varchar) + space(4) + 
    cast(@userDisputes as varchar) + space(4) + 
    cast((@userUnpaids + @userDisputes) as varchar) + space(4) + 
    @calculation  + -- former error line
    space(4) + cast(@userRedirectsVolume as varchar); 
```

或者，从 SQL Server 2005 开始，您可以使用[try/catch](http://msdn.microsoft.com/en-us/library/ms175976%28v=sql.90%29.aspx)。简单的例子：

```
DECLARE @x int SET @x = 5
DECLARE @y int SET @y = 0

begin try
    PRINT @x / @y
end try
begin catch
    PRINT ERROR_MESSAGE()
end catch 
```

使用 try/catch，您可以将麻烦的计算放入 try/catch 块中，并以适合您的问题域的任何方式处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:10:32.867

你可以改变这个表达式：

```
(@userUnpaids + @userDisputes) / @totalUserVolumeCredit 
```

像这样：

```
isnull((@userUnpaids + @userDisputes) / nullif(@totalUserVolumeCredit, 0), 0) 
```

当除数为 0 时，你总是会得到 0。

这是它的工作原理：

1.  [`nullif()`](http://msdn.microsoft.com/en-us/library/ms177562.aspx "NULLIF (Transact-SQL)")当除数为 0 时，用 NULL 替换除数。

2.  由于 NULL 除数，表达式的结果变为 NULL。

3.  [`isnull()`](http://msdn.microsoft.com/en-us/library/ms184325.aspx "ISNULL (Transact-SQL)")将 NULL 结果变为 0。（您也可以改用更标准的[`coalesce()`](http://msdn.microsoft.com/en-us/library/ms190349.aspx "合并 (Transact-SQL)")。）

# c# - 如何使用 Vector2 {get;set;} 计算正方形的角

> ID：14482606
> 
> 赞同：0
> 
> 时间：2013-01-23T14:57:08.077
> 
> 标签：c#, xna, get, set

这是我的第一个问题，几天前我才开始用 C# 编码，所以如果我在做一些愚蠢的事情，请善待。问题是，我想在 xna 中编写一个小型 2D 游戏，因此我创建了一个带有纹理的 32x32 px 盒子，它应该是玩家。我可以通过为玩家编写一个类来使用箭头键来移动玩家，例如

```
namespace MyGame
{
    class Player
    {
        public Texture2D Textur;
        public Vector2 Position { get; set; }
    }
} 
```

然后使用

```
KeyboardState keyboard = Keyboard.GetState();
if (keyboard.IsKeyDown(Keys.Right)) player.Position += new Vector(5,0);
//and so on 
```

其中 5 是像素数量，玩家一键移动。我正在尝试写这样的东西

```
class Player
{
    public Texture2D Textur;
    public Vector2 Position { get; set; }
    public Vector2 UpperRightCorner = new Vector2(Position.X + 32, Position.Y);
} 
```

但显然它不起作用。甚至以为我在 msdn 上阅读了有关 get 的文档；放; 我真的不明白，它是如何工作的。我需要角落，或者更准确地说是角落旁边的像素，来编写碰撞方法。这种方法每次都应该问，当我按箭头键时，玩家面前有什么样的关卡，然后调整速度。如果有实心块（如墙），则将移动设置为 0。

任何想法，我怎么能在播放器类中写这个角落的东西？我可以在实例化播放器后在主类中调用它，但我更愿意将它放入播放器类中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:01:39.607

它不会起作用，因为您的职位尚未创建..

在您的 Player 构造函数（`public Player()`例如）中，您必须将 Position 设置为`new Vector2`第一个。例如：

```
public Player()
{
    Position = new Vector2(0,0);
    UpperRightCorner = new Vector2(Position.X + 32, Position.Y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:11:36.677

您正在`UpperRightCorner`为其实例化时分配一个值。该值将保持不变。这可以用 getter 重写，以便在`UpperRightCorner`每次访问时重新计算。例子：

```
public Vector2 UpperRightCorner
{
    get
    {
        return new Vector2(Position.X + 32, Position.Y);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T21:19:52.330

Ginosaji 的回应应该能满足您的要求。稍作修改，它也可以自动处理您选择的任何尺寸纹理：

```
public Vector2 UpperRightCorner {
    get {
        return new Vector2(Position.X + Textur.Width, Position.Y);
    }
} 
```

# javascript - window.onerror 没有捕获 DOMException

> ID：14482608
> 
> 赞同：4
> 
> 时间：2013-01-23T14:57:20.273
> 
> 标签：javascript, angularjs, error-logging, domexception

我在 chrome 浏览器上运行 angularjs 应用程序，并希望记录所有抛出的错误。我正在使用以下内容来做到这一点：

```
window.onerror = function(message, url, linenumber) {
        alert("JavaScript error: " + message + " on line " + linenumber + " for " + url);
        log.error("JavaScript error: " + message + " on line " + linenumber + " for " + url);
    } 
```

这似乎适用于任何 js 错误，但它似乎不会触发以下情况：

错误：TYPE_MISMATCH_ERR：DOM 异常 17 错误：对象的类型与与该对象关联的参数的预期类型不兼容。

ReferenceError：未定义套接字

有任何想法吗？

# ios - 如何在 Cocos2d 中实现一个动作到一个 CCSprite 中？

> ID：14482609
> 
> 赞同：1
> 
> 时间：2013-01-23T14:57:22.073
> 
> 标签：ios, cocos2d-iphone, ccsprite

我正在尝试实现此方法：

```
-(void) SpriteThouch
{
    CCSprite *actionEffect = avatar;
    id jump = [CCJumpBy actionWithDuration:1 position: ccp(0, 0) height:50 jumps:1];
    id sequence = [CCSequence actions: jump, nil];
    [actionEffect runAction:sequence];
} 
```

进入一个带有字符的精灵，我正在使用一个包含所有字符的**.png**，并使用一个**.plist**来选择每个字符。我的问题是，当我触摸它们一次时，我找不到让角色跳跃的方法。跳跃方法有效，但是当我尝试将其实现到触摸动作中时，它什么也没做。我正在尝试这种方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 1)
    {
        CCSprite *actionEffect = avatar;
        id jump = [CCJumpBy actionWithDuration:1 position: ccp(0, 0) height:50 jumps:1];
        id sequence = [CCSequence actions: jump, nil];
        [actionEffect runAction:sequence];
    }
} 
```

* * *

和

```
UITapGestureRecognizer *gr = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector (SpriteThouch:)] autorelease];
[gr setNumberOfTapsRequired: 1];
[[[CCDirector sharedDirector] view] addGestureRecognizer:gr]; 
```

你能帮助我吗？谢谢！

# core-data - Base64 png 与核心数据绑定

> ID：14482611
> 
> 赞同：1
> 
> 时间：2013-01-23T14:57:26.380
> 
> 标签：core-data, base64, cocoa-bindings, nsimageview

我有 JSON，其中包含我添加到 Core Data 的 base64 解码的 PNG 图像。我想在 Image Wells 中显示这些图像，并绑定到我的核心数据模型。

问题是我不能使用`Data`with ，`NSArchiveFromData`因为它已被弃用。

我的问题与[此](http://www.cocoabuilder.com/archive/cocoa/324977-nsdata-nsimageview-value-binding-and-nsunarchivefromdata-nothing-appears.html#324983)类似，但我不太明白答案。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:19:09.833

尝试一些效果（我不确定你是只是在属性上使用绑定，还是使用 NSArrayController - 我会尝试回答这两种情况）

您可以从您的 json 中获取字符串并对其进行解码：（您需要在 stackoverflow 答案中引用的开源库：[https ://stackoverflow.com/questions/14260936/decode-an-encoded-base64-image-in -c-sharp-in-objective-c](https://stackoverflow.com/questions/14260936/decode-an-encoded-base64-image-in-c-sharp-in-objective-c) )

```
NSString *jsonImage = [jsonData objectForKey@"image"];
NSData   *data      = [NSData dataWithBase64EncodedString:jsonImage]; 
```

然后使用该数据初始化您的图像。

如果您使用 NSArrayController 来管理核心数据，请创建一个返回图像的值转换器。

创建一个 NSValueTransformer 的子类，并根据您的喜好命名。在实现中，添加：

```
+(Class)transformedValueClass {
    return [NSImage class];
}
-(id)transformedValue:(id)value {
    if (value == nil) {
        return nil;
    } else {
        NSData *data = [NSData dataWithBase64EncodedString:value]; //might be [value stringValue]
        return [[NSImage alloc] initWithData:data];
    }
} 
```

然后在您已在图像上设置绑定的界面生成器中，只需将值转换器设置为您创建的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:47:48.550

你没有定义你的问题到底是什么。

要从 NSData 加载 NSImage，请参阅[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html)和`initWithData:`.

* * *

假设您有这样的核心数据对象：

```
@class MyObject : NSManagedObject

@property NSData *imageData;

@end 
```

它的实现：

```
@implementation MyObject

@dynamic imageData; 

@end 
```

现在，添加一个新属性：

```
-(NSImage *)bindableImage {
    [self willAccessValueForKey:@"bindableImage"];
    NSImage *myImage = [[NSImage alloc] initWithData:[self imageData]];
    [self didAccessValueForKey:@"bindableImage"];
    return myImage;
} 
```

此外，通知绑定当 imageData 属性发生更改时会发生什么变化：

```
+ (NSSet *)keyPathsForValuesAffectingImageData {
    return [NSSet setWithObjects:@"bindableImage", nil];
} 
```

而已。我认为，它应该工作，但我没有尝试:)

* * *

我忘记了 Base64 - 检查另一个答案。

# actionscript-3 - 超过 16776 秒后无法搜索

> ID：14482612
> 
> 赞同：1
> 
> 时间：2013-01-23T14:57:28.503
> 
> 标签：actionscript-3, netstream

我有一个自定义播放器可以播放录音（仅音频）。如果音频文件很长，NetStream 类就不会很好地寻找它。我发现在 16776 秒 (04:39:36) 后，NetStream 搜索功能再次从文件开头开始。这是最短的伪代码：

```
package com.name.player
{
    import flash.net.NetConnection;
    import flash.net.NetStream;
    ...

    public class StreamingPlayer extends Sprite
    {
        public var maStream:NetStream;
        ...

        public function aFunction
        {
            maStream = new NetStream( maConnection );
            maStream.inBufferSeek = true; // ==> Generates compile error: 
            //Error: Access of possibly undefined property inBufferSeek through a reference with static type flash.net:NetStream.
            //    [mxmlc] 
            //    [mxmlc]             maStream.inBufferSeek = true;
            //    [mxmlc]                      ^

            maStream.play('sName', 0, -1, true);
            // Now try these (one at a time)
            maStream.seek(16775); // Seeks to the desired position and plays the file till the end
            maStream.seek(16776); // Seeks at second 0 ( begining )
            maStream.seek(16778); // Seeks at second 0 ( begining )
            maStream.seek(16780); // Seeks at second 3
            maStream.seek(16786); // Seeks at second 9
            maStream.seek(16796); // Seeks at second 19
            ...

        }
        ...
    }
    ...
} 
```

我尝试了不同的格式（speex，wav）/代码/比特率：
- RIFF（小端）数据，WAVE 音频，ITU G.711 A-law，单声道 8000 Hz
- RIFF（小端）数据，WAVE 音频， Microsoft PCM，16 位，单声道 44100 Hz
- Ogg 数据，Speex 音频

文件大小或总长度无关紧要，我尝试在 1.1 - 1500 MB 和 04:40:00（17000 秒）到 14:56:41（53801 秒）之间。

我正在为新浏览器使用 html5，但我们仍然需要支持旧浏览器（在一些无法更新安装新软件的客户端 PC 上，所以我需要一个 Flash 解决方案，因为 Flash 已经安装并一起运行IE6：（）。

问：
*我做错了什么或者 NetStreamer 有限制，如果有什么解决方案我必须能够播放这些长文件？*

PS这是我第一次使用Flash，所以如果您有答案/评论，请尝试更明确一点。

**编辑：**在 Adob​​e ID 3492103 中添加了错误。

**编辑：**
我有一位同事在测试流服务器，他发现日志中有一些有趣的东西：

```
// This is lower than 16776 seconds, and works
01-26 13:02:14.277  RtmpProtocol:891        [ID-007] Seeking to 1594380
...
01-26 13:02:14.279  FileReaderWav:194       [ID-007] <Stream0001> Seeking to 15943804 sf_seek 127550432
...
01-26 13:02:16.250  FileReaderWav:230       [ID-007] <Stream0001> Current position: 15943824

// This is when it plays from the beginning (seeking after 16776 seconds)
// according to the log it should just play at the desired position, but it's not
01-26 13:02:23.294  RtmpProtocol:891        [ID-007] Seeking to 16990012
01-26 13:02:23.303  FileReaderWav:194       [ID-007] <Stream0001> Seeking to 16990012 sf_seek 135920096
01-26 13:02:23.463  FileReaderWav:230       [ID-007] <Stream0001> Current position: 16990032 
```

我们可能在流服务器中遇到问题，一些 INTEGER 转换或类似的东西。如果我得到更多信息，我会更新。

**谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:10:27.950

我认为您必须考虑文件是否完全缓冲到所需的搜索位置。如果您尝试**流**式传输文件（也就是未完全加载）并寻找未完全加载的文件的位置......它将产生错误，或者只是不去那里。

解决方案：

(1) 确保文件在查找前缓冲到该位置

(2) 使用 PHP（或任何服务器端）在所需位置为您提供**文件**。这将为您节省带宽，因为只会传递请求的数据。

例如。如果您请求的文件是 1500mb，但您只需要 800-1500mb...然后在该位置提供文件。

# .net - 用一些包含 XML 节点的文本填充 XElement 的最佳实践

> ID：14482620
> 
> 赞同：0
> 
> 时间：2013-01-23T14:58:13.627
> 
> 标签：.net, xml, linq

用可能不仅包含纯文本还包含一些 XML 节点的测试来填充 XElement 的最佳方法是什么？

例如，这段代码

```
XElement el = new XElement("XML_NODE");
el.Value = "some text <TAG>with custom tag value</TAG>";
string xml = el.ToString(); 
```

将返回 xml 作为`<XML_NODE>some text &lt;TAG&gt;with custom tag value&lt;/TAG&gt;</XML_NODE>`. 我了解发生了什么以及为什么会发生。但这并不完全是我想要的......我希望得到类似于`<XML_NODE>some text <TAG>with custom tag value</TAG></XML_NODE>`不引用内括号的 xml。

下一段代码就可以达到想要的结果

```
XElement el2 = XElement.Parse("<XML_NODE>some text <TAG>with custom tag value</TAG></XML_NODE>");
xml = el2.ToString(); 
```

但我不喜欢将 XML 构建为字符串并稍后解析它的想法。

还有其他更好的获取方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:38:12.837

另一种可能更有效的替代方案：

```
static IEnumerable<XNode> ParseNodes(string value)
{
   var settings = new XmlReaderSettings 
   { 
      ConformanceLevel = ConformanceLevel.Fragment 
   };

   using (var sr = new StringReader(value))
   using (var xr = XmlReader.Create(sr, settings))
   {
      xr.Read();
      while (xr.ReadState != ReadState.EndOfFile)
      {
         yield return XNode.ReadFrom(xr);
      }
   }
}

string text = "some text <TAG>with custom tag value</TAG>";
var node = new XElement("XML_NODE", ParseNodes(text)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:11:30.427

正如我在评论中所说，真的没有更好的方法。但是您可以在某种程度上封装这种“不太好”的方式：

```
public IEnumerable<XNode> ParsePartial(string partialXml)
{
    return XElement.Parse(string.Format("<tmp>{0}</tmp>", partialXml)).Nodes();
}

var el3 = new XElement("XML_NODE",
                       ParsePartial("some text <TAG>with custom value</TAG>")); 
```

# php - 如何在 My sql 中检索特定 id 的第一条插入记录

> ID：14482621
> 
> 赞同：-2
> 
> 时间：2013-01-23T14:58:14.460
> 
> 标签：php, mysql, sql

如何在 My sql 中检索特定 id 的第一条插入记录

例如 ID 102 有三个记录，我必须检索第一个插入的记录

表名：

## 掌握

## 列和数据：

## auto_id #### report_id ####slabs_remaining

* * *

*   1-------------1-------------- --55
*   2----------------------1-------------- --54
*   3-------------------------1-------------- --53
*   4-------------------------2-------------- --100
*   5----------------------2-------------- --99
*   6------------------------1-------------- --52
*   7-------------------------1-------------- --51
*   8----------------------3-------------- --200
*   9-------------------------3-------------- --199

现在从上面的数据如何检索第一个插入的 report_id = 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:01:36.190

使用`MIN`和`GROUP BY`从句

```
SELECT ParticularID, MIN(ID) AS FirstID
FROM   tableName
GROUP  BY ParticularID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c2466/1)
*   [包含一些聚合函数的 MySQL GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

示例数据

```
╔══════════════╦════╗
║ PARTICULARID ║ ID ║
╠══════════════╬════╣
║            1 ║  1 ║  << First ID
║            1 ║  2 ║
║            1 ║  3 ║
║            2 ║  4 ║  << First ID
║            2 ║  5 ║
║            2 ║  6 ║
║            3 ║  7 ║  << First ID
║            3 ║  8 ║
╚══════════════╩════╝ 
```

输出

```
╔══════════════╦═════════╗
║ PARTICULARID ║ FIRSTID ║
╠══════════════╬═════════╣
║            1 ║       1 ║
║            2 ║       4 ║
║            3 ║       7 ║
╚══════════════╩═════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:19:52.143

看看这个，这里我们使用变量并假设你只有`particularid`和其他列。在没有看到您的表格结构的情况下说仍然很模棱两可..

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/ef4eb/1)

桌子：

```
| PARTICULARID | COL2 |
-----------------------
|            1 |    a |
|            1 |    d |
|            1 |    y |
|            2 |    p |
|            2 |    c |
|            2 |    d |
|            3 |    e |
|            3 |    f |

set @vid:=0;
set @r:=0;

select particularID, col2
from (
SELECT @r:=(case when @vid = ParticularID
then @i + 1 else 1 end) as row,
@vID:=ParticularID, ParticularID, col2 
FROM   tableName
ORDER BY ParticularID) x
where x.row is not null
;

| PARTICULARID | COL2 |
-----------------------
|            1 |    a |
|            2 |    p |
|            3 |    e | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:01:03.660

您在查询中使用 ORDER BY *the-id-or-age-of-record*和 LIMIT 1 的组合...

# sql - 显示完整的列名而不是缩短

> ID：14482625
> 
> 赞同：2
> 
> 时间：2013-01-23T14:58:32.790
> 
> 标签：sql, oracle, sqlplus

如果我写：

```
Select DUMMY from DUAL; 
```

它显示如下：

```
D
-
X 
```

为什么这里的列名是“D”？为什么不是完整的“DUMMY”？如何使结果显示如下？

```
Dummy
-----
  X 
```

上述问题现已解决。现在，如果我们想恢复到默认值该怎么办？

```
 col dummy format a1;
    insert into tab values('a');
    insert into tab values('ank');
    select * from tab; 
```

输出是：

```
 D
    -
    a
    a
    n
    k 
```

这个“虚拟”列不是来自双表。它是我自己创建的表“选项卡”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T15:00:06.317

SQL*Plus 会将列宽格式化为数据类型的大小。对于 DUAL，DUMMY 是 varchar2(1)。你可以控制这个

```
col DUMMY format a5 
```

IE：

```
SQL> select * from dual;

D
-
X

SQL> col DUMMY format a5
SQL> select * from dual;

DUMMY
-----
X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:21:14.010

“作弊”

```
Select rpad('x', 5, ' ') DUMMY from DUAL
/

SQL>

DUMMY
-----
x 
```

# ruby-on-rails-3.2 - 客户端验证彩盒表单

> ID：14482627
> 
> 赞同：1
> 
> 时间：2013-01-23T14:58:37.003
> 
> 标签：ruby-on-rails-3.2, colorbox, client-side-validation

我正在使用`gem 'rails', '3.2.8'`我按照本教程构建联系表单：

[http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)

当我去 /contact 时它可以工作，现在我已经添加`gem 'client_side_validations'`它在联系时也可以工作。我现在已经将该表格放入一个颜色框中，使用`gem 'colorbox-rails', '~> 0.0.9'`

该表单仍然有效，但现在它不会随您进行验证。因此，如果您单击提交，它将转到带有验证的联系页面。有没有人遇到过这个？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:51:02.903

我最终去了

[http://www.livevalidation.com/](http://www.livevalidation.com/)

这真的很容易设置。我所要做的就是将javascript添加到头部

```
<script type="text/javascript" src="/assets/livevalidation_standalone.js"></script> 
```

然后告诉它要验证哪个

```
var message_name = new LiveValidation('message_name');
message_name.add( Validate.Presence ); 
```

**编辑 1**

我找到了这个，你可以将它合并到你的 Rails 应用程序中

[https://github.com/richpoirier/livevalidation](https://github.com/richpoirier/livevalidation)

希望这对某人有帮助！

# jsf - 清除 af:table 上的选择的 api 是什么？

> ID：14482629
> 
> 赞同：1
> 
> 时间：2013-01-23T14:59:02.030
> 
> 标签：jsf, oracle-adf, trinidad

我有两个 ADF 面表`A`，`B`它们的 `rowSelection`属性设置为“ `single`”。Now the requirement is when one row is selected from `A`, it should clear out all selections from `B`and vice versa . 所以我已经`selectionListeners`在两个表上注册，并且在该方法中执行的代码正在为尚未选择的表执行以下操作：

```
tablenNotSelected.setSelectedRowKeys(null); 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:34:38.730

您可能需要在表或周围的容器上设置部分触发器，以实际强制屏幕更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:56:40.197

不要将选定的行键设置为空。而是使用`getSelectedRowKeys().RemoveAll();`API。

要刷新另一个表，请执行以下操作。

```
table_1_selectionListener() {
    RequestContext.getCurrentInstance().addPartialTarget(T2);
} 
```

与表 2 侦听器类似

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-11T09:50:10.453

```
public void clearTableSelection(RichTable table) {
    table.getSelectedRowKeys().clear();
    RowKeySetAttributeChange rks = new RowKeySetAttributeChange(table.getClientId(), "selectedRowKeys", new RowKeySetImpl());
    RequestContext.getCurrentInstance().getChangeManager().addComponentChange(FacesContext.getCurrentInstance(),table, rks);
    AdfFacesContext.getCurrentInstance().addPartialTarget(table);
} 
```

# oauth - 细粒度的 Google OAuth 范围

> ID：14482632
> 
> 赞同：3
> 
> 时间：2013-01-23T14:59:09.267
> 
> 标签：oauth, scope, oauth-2.0, google-oauth

作为一个隐私偏执狂，这是我似乎无法通过 Google OAuth2 文档找到的东西 - 我可以**只请求电子邮件地址和用户标识符**吗？

我记得有一段时间我可以通过使用获得电子邮件地址和用户标识符

```
https://www.googleapis.com/auth/userinfo.email 
```

现在似乎没有`userinfo.profile`，谷歌只返回用户电子邮件地址。不过，除了个人资料范围内的用户标识符之外，我不需要任何其他东西......对我来说，这是一种浪费，并且请求个人资料许可（访问生日/位置）可能会引发不必要的隐私问题（好吧，无论如何对我来说。）

```
https://www.googleapis.com/auth/userinfo.profile 
```

请求 Google 用户标识符 = 获得`userinfo.profile`许可吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:13:20.277

实际上你可以只请求 user_ID

目前支持的方式是添加范围 https//www.googleapis。com/auth/plus.me

将来，我们还将为此目的支持“openid”，但这也会导致服务器返回符合 OpenIDConnect 的响应，并且由于该标准仍未最终确定，使用它现在会使您面临向后不兼容的 API 更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:58:24.190

是的，除了电子邮件地址之外，您还需要`userinfo.profile`范围来获取任何内容，确认该地址已验证并在 Google Apps 用户帐户上显示高清（高清属性让您知道它是 Google Apps 帐户，而不是消费者）。这 3 个属性是`userinfo.email`.

# macos - 在 Mac OS X 的 Swing 应用程序中嵌入 JRE

> ID：14482635
> 
> 赞同：6
> 
> 时间：2013-01-23T14:59:20.890
> 
> 标签：macos, swing, java

我必须发布一个带有嵌入式 JRE 的 Swing 应用程序。一个带有应用程序 + JRE + .bat/.sh 的压缩归档文件在 Windows 和 Linux 上起到了作用。用户下载 zip，解压缩，然后启动应用程序。完美的。

但是现在，我必须为 Mac OS X 提供同样的东西。我已经阅读/被告知了很多不同的事情（禁止在 Mac 上分发 JRE，相反，Mac 上总是有 JRE，等等。 ..)，所以我真的很困惑我能做什么。

有人已经做过这样的事情了吗？您是如何解决 Mac 应用程序部署的？作为奖励，在 Mac 中分发我的应用程序的最佳格式是什么（zip？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:41:35.733

看看 java.net 上的[appbundle](http://java.net/projects/appbundler)项目。它提供了一个 Ant 任务，它将您的应用程序打包为一个普通的 Mac`.app`包，并且可以选择包含一个嵌入式 JRE。

目前，Mac 上的整个 Java 环境有点混乱，因为我们仍处于过渡时期，Java 6 版本由 Apple 提供和维护，Java 7 版本直接来自 Oracle。a_horse_with_no_name 引用的 jarbundler 项目[用于](https://stackoverflow.com/a/14484502/592139)将 JAR 打包为一个`.app`包，该包将在 Mac OS X 10.5/6/7 随附的 Apple 提供的 Java 6 上运行，但在 Oracle Java 7 上不运行，相反，appbundler 以 Oracle 为目标Java 7 及其`.app`捆绑软件不能在 Java 6 上运行。

如果您想针对最近运行 10.7 或 10.8 的 Mac，特别是如果您想通过 Mac App Store 分发您的应用程序，那么您应该使用 appbundler 并捆绑 JRE 的副本。如果您不想通过商店分发，则嵌入式 JRE 是可选的。如果您的应用程序可以在 Java 6 上运行，那么使用 jarbundler 以 Apple Java 6 为目标将意味着您的应用程序可以在较旧的 (<= 10.6) Mac 上运行。但是，当他们尝试运行您的应用程序时，系统会提示任何拥有仅 Java 7 的较新 Mac 的人下载并安装 Java 6。

只要应用程序内的目录中的所有内容（以及嵌入式 JRE 中的相应文件，如果适用）在 zip 文件中标记为执行权限，就可以将其分发到`.app`存档中。如果您使用 Ant 构建，则需要将s 与 right一起使用。`.zip``Contents/MacOS``<zipfileset>``filemode`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T17:42:07.537

最*简单*的方法使用与任何其他平台相同的 JAR，通过[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署。我从未尝试使用它来安装 JRE。

提供对 Mac 更友好的体验的*最佳*方法要求您将 JAR 包装在一个应用程序包中，在[此处](https://stackoverflow.com/a/8956715/230513)引用的文章中进行了讨论。首选的交付格式是压缩[磁盘映像](http://en.wikipedia.org/wiki/Apple_Disk_Image)，`.dmg`.

[*Mac OS X 的 Java 部署选项*](https://developer.apple.com/library/mac/#documentation/java/conceptual/java14development/03-javadeployment/javadeployment.html)一文对这两个选项进行了比较。该[游戏](http://robotchase.sourceforge.net/)是可以以任一方式启动的示例。

附录：出于好奇，Mac OS X Finder 将`.jnlp`文件视为文档，默认情况下使用 JWS 启动器打开。`.jnlp`我在停靠文件夹中保留了一些常用文件的文件夹，以便快速访问。Java Preferences 控制面板允许管理缓存的应用程序。选择安装快捷方式会在目标文件夹中创建一个简单的 Mac 应用程序包，并且`Info.plist`可以像其他任何内容一样编辑包含的内容。自定义的决定`.plist`取决于应用程序需要哪些功能：屏幕菜单栏、停靠名称和图标、JNI 路径等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:29:10.543

我认为您可以放心地假设 JRE 已经存在于 Mac 上。

最好的格式（所以我被告知 - 我自己不是 Mac 用户）是`tar.gz`“应用程序”包的（保留文件属性）。

您可以使用“jarbundler”（[http://sourceforge.net/projects/jarbundler/](http://sourceforge.net/projects/jarbundler/)）来创建一个合适的 Mac“bundle”，可以毫不费力地提取它。确保捆绑包中包含的存根在 Ant`tar`任务中被标记为“可执行”。

如果安装了多个 JRE，我认为会有一些问题。在这种情况下，必须使用正确的 Stub 来启动应用程序所需的 JRE 版本。如果我没记错的话，这个存根位于`/System/Library/Frameworks/JavaVM.framework/Resources/MacOS/JavaApplicationStub`

有一个页面表明 Java7 和 jarbundler 可能存在问题：http: [//informagen.com/JarBundler/](http://informagen.com/JarBundler/)

# ruby - 通过 Integrity 持续集成使用 RVM

> ID：14482636
> 
> 赞同：0
> 
> 时间：2013-01-23T14:59:22.347
> 
> 标签：ruby, bash, continuous-integration, rvm, integrity

我目前正在使用 Integrity 进行持续集成。CI 服务器使用“完整性”gemset 运行，但它应该启动和测试的应用程序（以及它的 Rspec 测试套件）被设计为使用另一个名为“portal”的 gemset 运行。

所以我使用以下构建脚本：

```
rvm use 1.9.2-p290@portal
bundle exec rake spec 
```

我得到的输出是

```
RVM is not a function, blah-blah-blah 
```

基本上它说 rvm 不是来自未登录的外壳。没什么大不了的，让我们将其添加到 .bashrc 中：

```
if [[ -s "$HOME/.rvm/scripts/rvm" ]] ; then
  # First try to load from a user install
  source "$HOME/.rvm/scripts/rvm" 
```

酷，现在我启动的任何终端都可以调用 rvm use 命令而无需哭泣寻求帮助。但是完整性不会在意这一点，它仍然说 rvm 不是一个函数。

如果我知道 Integrity 如何调用系统命令，那该死的，但我在这里没有想法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:01:15.283

如果它只是一个命令，则运行：

```
rvm 1.9.2-p290@portal do bundle exec rake spec 
```

如需更多命令，请执行以下操作：

```
source $( rvm 1.9.2-p290@portal do rvm env --path )
bundle install
bundle exec rake spec 
```

# hibernate - Flyway 或 Liquibase 可以生成更新脚本而不是直接更新数据库吗？

> ID：14482644
> 
> 赞同：18
> 
> 时间：2013-01-23T14:59:47.963
> 
> 标签：hibernate, jpa, liquibase, flyway

首先，一点背景。我有一组 Java 应用程序，有些基于 JPA，有些则不是。为了创建我的数据库，我目前正在使用 Hibernates 模式导出来为使用 JPA 的用户生成创建脚本。那些不使用 JPA 的我手动生成脚本。然后在使用 ANT 安装应用程序期间运行这些。对于更新，应用程序安装程序只需将更新脚本应用于数据库。

为了改进数据库更新的管理，我一直在研究 Flyway 和 Liquibase。两者似乎几乎都在做我想做的事（除此之外：我现在更喜欢 Flyway，因为我们拥有所有预先存在的 SQL/DDL 脚本）。我可以看到的问题是它们都直接更新数据库。这对于很多安装都很好，但不是全部。

我想做的是针对数据库运行 Flyway/Liquibase 并生成一个更新脚本，其中包含使数据库保持最新状态所需的所有更新 - 包括 Flyway/Liquibase 需要对其自己的表进行的任何更改。这将允许我（或更重要的是数据库管理员）在应用程序之外运行更新脚本来更新数据库。然后我可以在我的应用程序中使用 Flyway/Liquibase 来验证数据库是否是最新的。

是否可以使用 Flyway 或 Liquibase 或任何其他工具来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T15:23:55.050

Liquibase 处理得很好。[它在当前状态下查看您的数据库，找到未应用的变更集并在sql output mode 下](http://liquibase.org/manual/sql_output)生成带有`update`命令的 SQL 脚本。

无论如何，使用适当的数据库迁移工具而不是 Hibernate 生成器是要走的路，迟早你会遇到 Hibernate 不支持的情况。对我们来说，它正在删除一个唯一索引并用另一个索引替换它。您还可以`hibernate.hbm2ddl.auto=validate`对数据库结构和实体 bean 之间的兼容性感到安全。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-12T19:53:52.400

当我在一家咨询公司（Intelliware）工作时，我们遇到了类似的问题，所以那里的开发人员将一些代码放在一起并将其推送到 GitHub。

我们尝试将其包含在 Flyway 核心存储库中，但没有成功。

[https://github.com/Intelliware/flyway-script-generator](https://github.com/Intelliware/flyway-script-generator)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T15:13:34.353

**你想要的是一个模式差异工具**。我记得听说 TOAD 有一个相当强大的功能。Hibernate 还将尝试根据它检测到的实体和数据库元数据生成模式更新脚本。

**但是，您需要的是……**不要这样做，而是使用 Flyway 进行所有数据库更改。也就是说，您应该关闭 Hibernates 自动模式更新并自己编写模式更新。每次要更改数据库时，都必须编写模式更新。

有些人捕获了休眠模式更新的 SQL 输出，作为获取自动模式演变更新的一种方式。问题是休眠通常是错误的，尤其是在添加`@NotNull`列时。

同样就您的管理员而言，我相信 Flyway 可以根据其 schema_version 表和 SQL/Java 迁移脚本输出它将运行的 SQL 输出，因此您的 DBA 可以在 Flyway 之外运行它（如果不是，这将是一个简单的功能加上）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-29T18:40:44.397

是的，生成 SQL 脚本是 Liquibase 的内置功能。Liquibase 比 flyway 具有优势的另一个领域是它能够迁移数据库代码更改（包、过程和函数）。我使用 flyway，但我希望在 flyway 中提供这些 Liquibase 功能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-19T20:07:50.803

[Flyway 命令行工具](https://flywaydb.org/documentation/commandline/migrate.html)的文档说这`dryRunOutput`是 Flyway Pro 的一项功能，可将 SQL 语句输出到指定文件。

# oracle - 在 Powershell 的 Oracle 查询中使用 II 运算符

> ID：14482646
> 
> 赞同：0
> 
> 时间：2013-01-23T14:59:57.007
> 
> 标签：oracle, powershell, plsql

我正在尝试定义一个用于 Oracle 数据库的 $queryString。我还需要能够将一些查询与 || 连接起来。操作员。我认为的问题是 Powershell 将其视为 Pipeline 运算符。我也尝试过以 \| 的形式使用转义符。和''| 但似乎都不起作用。作为参考，这是我正在使用的查询。

```
$queryString = 'select v.npa || v.calling_number phone_number, v.location, v.customer_name '
$queryString += 'from voip_validate v '
$queryString += 'left outer join phone_numbers p '
$queryString += 'on v.npa || v.calling_number = p.area_code || p.phone_prefix || p.phone_suffix '
$queryString += 'left outer join mv_dps_buildings b '
$queryString += 'on b.dps_building_number = p.dps_building_number '
$queryString += 'where p.area_code is null '
$queryString += 'and p.phone_prefix is null '
$queryString += 'and p.phone_suffix is null; ' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:05:21.500

使用`here-string`（http://technet.microsoft.com/en-us/library/ee692792.aspx）：

```
$queryString = @'
select v.npa || v.calling_number phone_number, v.location, v.customer_name 
from voip_validate v 
left outer join phone_numbers p 
on v.npa || v.calling_number = p.area_code || p.phone_prefix || p.phone_suffix 
left outer join mv_dps_buildings b 
on b.dps_building_number = p.dps_building_number 
where p.area_code is null 
and p.phone_prefix is null 
and p.phone_suffix is null; 
'@

PS>$queryString
select v.npa || v.calling_number phone_number, v.location, v.customer_name
from voip_validate v
left outer join phone_numbers p
on v.npa || v.calling_number = p.area_code || p.phone_prefix || p.phone_suffix
left outer join mv_dps_buildings b
on b.dps_building_number = p.dps_building_number
where p.area_code is null
and p.phone_prefix is null
and p.phone_suffix is null; 
```

# java - 如何在mysql查询中找到字节[]？

> ID：14482647
> 
> 赞同：2
> 
> 时间：2013-01-23T15:00:05.933
> 
> 标签：java, mysql, search, byte, blob

我有一个很好的 MySQL 表，如下所示：

```
CREATE TABLE IF NOT EXISTS BLOBTest(Id INT PRIMARY KEY AUTO_INCREMENT,

    Data BLOB); 
```

在里面我有以下内容：

```
SELECT HEX(Data) from BLOBTest;

+----------------------------------+
| HEX(Data)                        |
+----------------------------------+
| E764DF04463B55E9E2305934266227A1 |
+----------------------------------+ 
```

翻译后，我有一个包含 1 行和两列（Id 和 Data）的表。此行保存 byte[] 数据，存储的 byte[] 数组如下： [-25, 100, -33, 4, 70, 59, 85, -23, -30, 48, 89, 52, 38, 98 , 39, -95]

如何进行查询以获取完整的方法？起初我试过：

```
SELECT * FROM BLOBTest WHERE Data='[-25, 100, -33, 4, 70, 59, 85, -23, -30, 48, 89, 52, 38, 98, 39, -95]'; 
```

但是这种方法根本不起作用，它总是返回一个空集。我需要获取该行的所有信息，而我所拥有的只是 byte[] 值。我该怎么做？

如果可能的话，感谢您的帮助。

# 编辑：

这是java应用程序的代码及其作用。

```
public Map<Integer, String> queryAuthor(String author) throws Exception{

    //encrypts the name of the author
    byte[] cipheredName = cryptManager.encrypt(keyBytes, 
                author.getBytes());

    //queries db for encrypted name
    pst = con.prepareStatement("SELECT * FROM BLOBTest WHERE DATA='" + cipheredName+"'");

    //builds a map for clients to use with the information from the query. 
    ResultSet rs =  pst.executeQuery();
    Map<Integer, String> result = new HashMap<Integer, String>();
    while (rs.next()) {

        byte[] recoveredBytes = rs.getBytes(2);

        byte[] recoveredName = cryptManager.decrypt(keyBytes, 
                    recoveredBytes);

        result.put(rs.getInt(1), new String(recoveredName));

    }

    return result;
} 
```

问题在于：

```
SELECT * FROM BLOBTest WHERE Data='[-25, 100, -33, 4, 70, 59, 85, -23, -30, 48, 89, 52, 38, 98, 39, -95]'; 
```

返回一个空集，从而使变量“rs”为空，因此返回的映射为空。每个人都很难过，因为我是菜鸟，无法进行这样的简单查询 =(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:14:53.433

您可以将原始字节作为字符串文字发送到 MySQL：

```
SELECT * FROM BLOBTest WHERE Data = '????????????????' 
```

（由于并非所有字节都可以用可打印字符表示，我什至没有尝试过）。

如果您通过参数将数据传递给准备好的语句（无论如何您都应该这样做），这将特别容易做到：

```
pst = con.prepareStatement("SELECT * FROM BLOBTest WHERE DATA = ?");
pst.setBytes(1, cipheredName); 
```

否则，您必须小心确保将 MySQL 解析为字符串终止引号的任何字节转义，否则它们会破坏您的查询。

* * *

^(（以下内容早于 OP 编辑​​中提供的附加信息）)

如果这不可能，它可能表明您不应该将数据存储在`BLOB`-type 列中；例如，16[`TINYINT SIGNED`](http://dev.mysql.com/doc/en/numeric-types.html#integer-types)列可能更合适。

即便如此，仍有可能：

*   如果您可以在[MariaDB](https://mariadb.com/kb/en/hexadecimal-literals/)或[MySQL](https://dev.mysql.com/doc/refman/8.0/en/hexadecimal-literals.html)中使用 Hexadecimal Literal ，它将十六进制字符串解释为其二进制形式：

    ```
     SELECT * FROM BLOBTest WHERE Data = x'E764DF04463B55E9E2305934266227A1' 
    ```

在[sqlfiddle](http://sqlfiddle.com/#!2/27d17/1/0)上查看。

*   [`UNHEX()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_unhex)也做了与上面十六进制文字中描述的相同的事情：

    ```
    SELECT * FROM BLOBTest WHERE Data = UNHEX('E764DF04463B55E9E2305934266227A1') 
    ```

*   如果您可以将每个字节转换为其*无符号*值：

    ```
     SELECT * FROM BLOBTest WHERE Data = CHAR(
        231,100,223,4,70,59,85,233,226,48,89,52,38,98,39,161
      ) 
    ```

在[sqlfiddle](http://sqlfiddle.com/#!2/27d17/2/0)上查看。

*   否则，您将需要去除最高位，因为 MySQL 将每个输入`CHAR()`视为 4 字节整数：

    ```
     SELECT * FROM BLOBTest WHERE Data = CHAR(
        -25 & 0xff,
        100 & 0xff,
        -33 & 0xff,
          4 & 0xff,
         70 & 0xff,
         59 & 0xff,
         85 & 0xff,
        -23 & 0xff,
        -30 & 0xff,
         48 & 0xff,
         89 & 0xff,
         52 & 0xff,
         38 & 0xff,
         98 & 0xff,
         39 & 0xff,
        -95 & 0xff
      ) 
    ```

在[sqlfiddle](http://sqlfiddle.com/#!2/27d17/3/0)上查看。

# javascript - 我可以在扩展程序中使用 JavaScript 来退出 chrome 吗？

> ID：14482650
> 
> 赞同：2
> 
> 时间：2013-01-23T15:00:06.130
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试找出一种使用 JavaScript 实际退出 Google Chrome 的方法，它用于我正在构建的扩展程序。

我能找到的只是一种使用 Chrome 的 API 来关闭 Chrome 的窗口/标签的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:02:34.607

`remove()`是的，当您有权限时使用该功能`windows`，格式为：

```
chrome.windows.remove(windowId, callback) 
```

查看[API 文档](http://developer.chrome.com/extensions/windows.html)以获取更多详细信息。

# dynamics-crm-2011 - 将合同状态从活动更改为草稿

> ID：14482651
> 
> 赞同：0
> 
> 时间：2013-01-23T15:00:13.930
> 
> 标签：dynamics-crm-2011, crm, dynamics-crm-4, dynamics-crm-online

我试图使用以下代码将合同状态从 Active 设置为 Draft：

```
SetStateRequest setState = new SetStateRequest();
setState.EntityMoniker = new EntityReference();
setState.EntityMoniker.Id = contractId;
setState.EntityMoniker.Name = "Contract";
setState.EntityMoniker.LogicalName = "contract";
setState.State = new OptionSetValue(0);
setState.Status = new OptionSetValue(1);
SetStateResponse setStateResponse = (SetStateResponse)service.Execute(setState); 
```

我的目标是更新一个活跃的合同，但要做到这一点，我需要让它处于草稿状态以更新它，然后在更新时将其放回活跃状态。如果有人能在这里帮助我，我将不胜感激。

插件现在正在触发以下错误：“目标状态无效。目标状态可能不存在或系统不允许从当前状态更改为目标状态。请查看有关此状态更改请求的文档”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:16:16.703

编辑：似乎您必须先为合同开具发票，然后才能取消它-也许无法将合同状态设置为从某些状态草稿？请参阅此处的 MSDN 示例：

[http://msdn.microsoft.com/en-us/library/gg328503.aspx](http://msdn.microsoft.com/en-us/library/gg328503.aspx)

如果您只关心状态（而不是状态），您可以将“-1”作为选项集值传递，在执行请求时将被忽略。为了停用产品记录，我做了一些非常相似的事情。

```
/// <summary>
/// Deactivate the specified entity.
/// </summary>
/// <param name="entityRef">Entity to deactivate.</param>
/// <param name="service">Organisation service.</param>
/// <param name="status">Optional status code.</param> 
```

```
private static void DeactivateEntity(EntityReference entityRef, IOrganizationService service, int status = -1)
{
    service.Execute(new SetStateRequest
        {
            EntityMoniker = entityRef,
            State = new OptionSetValue(1),
            Status = new OptionSetValue(status)
        });
} 
```

# c# - 将带有相对语句的字符串转换为绝对值

> ID：14482655
> 
> 赞同：1
> 
> 时间：2013-01-23T15:00:33.397
> 
> 标签：c#, .net, regex, string

我有如下字符串：

```
"[Current.Age] - 10"
"[Current.Height] + 50"
"[Current.Age] + 10 - [Current.Height] - 50" 
```

我想`[Current.Something]`用当前选定对象的数值替换，例如选定对象可能具有以下状态：

```
var student = new Student();
student.Age = 20;
student.Height = 180; 
```

所以，字符串最终应该是这样的：

```
"20 - 10"             * or better *  "10"
"180 + 50"            * or better *  "230"
"20 + 10 - 180 - 50"  * or better *  "-200" 
```

我想我应该为此使用正则表达式。关于我如何做到这一点的任何想法？

**编辑：**我需要的几乎是可以接受`[Current.Something]`s 并用相关值替换它们的东西。我知道我可以通过简单的字符串操作来做到这一点，但我只是想知道是否有一种简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:02:57.003

如果您可以控制包含该值的类；您可以添加一个名为：

```
int getValue(string fromThis)
{
    switch(fromThis)
    {
    case "age": {....
} 
```

然后您需要通过文本解析器运行文本（您应该能够相当容易地创建 onc）。

就像是：

```
string[] newStrings = newString.Split(' ');
if (newStrings.Length < 3)
{
    //error
}
else if (newStrings[0][0] != '[')
{
    //error
}
else
{
    int newValue = 0;
                string fieldString = newStrings[0];// Extract just the part you need.... 
                // I would probably do the above in a method 
    int currentValue = getValue(fieldString);
    int changeValue;
    int.TryParse(newStrings[2], out changeValue);

    switch (newStrings[1])
    {
        case "+":
            {
                newValue = currentValue + changeValue;
                break;
            }
        case "-":
            {
                newValue = currentValue - changeValue;
                break;
            }
        default:
            {
                //error
                break;
            }
    }

    //do something with new value
} 
```

确定如何处理关联语句还有更多工作，但以上内容应该让您朝着正确的方向前进。使用反射有一些更简洁的方法可以做到这一点，但更难维护。

# php - 正则表达式验证名字不包括@()&

> ID：14482658
> 
> 赞同：1
> 
> 时间：2013-01-23T15:00:47.897
> 
> 标签：php, regex

我正在为名字创建正则表达式，它可以允许所有特殊字符，但`@()&`我正在尝试在 PHP 中实现它，我尝试了类似 `/^[^0-9\@\(\)\&][a-zA-Z\s]*$/`但它没有正确验证的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:40:56.843

*如果您的意图是在字符串中的任何位置*允许特殊字符（除了这四个字符），那么您的模式是错误的。

我将分解您的模式以引导您完成它的作用：

*   `^`- 匹配必须从一行（或整个字符串）的开头开始。
*   `[^0-9\@\(\)\&]`- 匹配任何不是数字、一个、括号或 & 符号的**单个字符。**`@`顺便说一句，我很确定这里的斜线是多余的。`@`和字符之前的`&`字符几乎可以肯定是，因为这些字符在正则表达式中并不特殊。`(`可能需要and之前的`)`那些，因为这些字符是子模式分隔符，但我认为它们在这里仍然不需要，因为它们在字符类中。
*   `[a-zA-Z\s]*`- 匹配 A 和 Z 之间的任何小写或大写字符，或任何空白字符，如空格（这就是这样`\s`做的）。这`*`意味着您可以匹配尽可能多的这些字符，如果这些字符都不存在于该位置，则不匹配。
*   `$`- 匹配必须在行尾（或整个字符串）结束。

简而言之，您只是从字符串的*第一个字符*中排除了这四个特殊字符，但是您将**所有**特殊字符排除为第*一个之后的任何字符*。

如果您想允许除这四个之外的任何字符在字符串中的*任何*位置，那么您应该使用它作为您的模式：

```
/^[^0-9@&()]*$/ 
```

说了这么多，我认为你可能有点过于复杂了。这是一个见仁见智的问题，但是我尝试仅在没有其他方法可以做某事时才使用正则表达式，因为它们可能有点难以阅读（这个问题就是一个很好的例子）。

我建议您只使用`str_replace`删除您不允许的四个字符，并根据您的原始输入检查结果字符串：

```
if($input === str_replace(array('@', '&', '(', ')'), '', $input) {
  // process valid input
} else {
  // handle invalid input
} 
```

该`str_replace`调用将获取您的原始字符串并替换搜索数组中的任何值`array('@', '&', '(', ')')`，然后将其删除（从技术上讲，将其“替换”为空）。如果之后两个字符串匹配，则不存在任何无效字符，并且您的输入有效。

由于您使用括号作为数组中的项目，因此将元素分隔到自己的行中可能更具可读性：

```
$chars_to_remove = array(
                     '@',
                     '&',
                     '(',
                     ')'
                   );
if ($input === str_replace($chars_to_replace, '', $input)) {
  // process valid input
} else {
  // handle invalid input
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-25T09:42:09.820

名`<input type=text name="fname" onblur="first(this)" />`

```
function first(ev) {
    var val = ev.value;
    if(isNaN(val)) {
        for(var i = 0; i < 10; i++) {
            if(val.indexOf(i) != -1) {
                alert("Enter Only chars");
                return false;
            }
        }
    }
    else {
        alert("Enter Only chars");
    }
    return true;
} 
```

# json - Gson 是否有类似 @JsonProperty 的方法？

> ID：14482662
> 
> 赞同：17
> 
> 时间：2013-01-23T15:00:55.317
> 
> 标签：json, jackson, gson

Jackson 有 @JsonProperty("name") 注解，可以应用到方法上——方法的返回值会被赋值给 JSON 中的 "name" 参数。

我发现 Gson 有 @SerializedName 注释，但不能与方法一起使用。有没有办法为 Gson 中的方法获取 @JsonProperty 功能？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-01-12T18:15:50.760

尝试

> @SerializedName("serialized_fld_name")

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-07-23T12:33:08.950

Gson 中的解决方案是一个名为 @SerializedName 的类似注解，您可以使用它来提供与源 JSON 匹配的名称。

一个简单的例子如下所示：

```
public class Message {
    @SerializedName("ID")
    private String id;
    @SerializedName("NFd")
    private int fileDescriptors;
} 
```

[资源](https://shekhargulati.com/2015/09/14/gson-tip-jsonproperty-equivalent/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T16:40:41.133

不，那里没有。我记得，邮件列表中有一个来自核心开发人员的帖子，Gson 也不太可能得到如此增强。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-11T07:00:28.763

我对 Gson 有同样的问题，而 @SerializedName 对我没有帮助。所以我使用了 org.codehaus.jackson.map.ObjectMapper

```
ObjectMapper mapper = new ObjectMapper();
String responseJson = mapper.writeValueAsString(object); 
```

# c# - 预加载 Azure 网站以增加首次访问加载时间

> ID：14482666
> 
> 赞同：6
> 
> 时间：2013-01-23T15:01:14.660
> 
> 标签：c#, webforms, azure-web-app-service, asp.net-4.5

我现在正在为 Azure 创建一个新的 Web 应用程序。

我注意到，如果我有一段时间（30 多分钟）不访问该站点，那么在我第一次访问时加载需要一段时间（20 多秒）。我认为这是因为 Azure 必须去编译应用程序。有没有办法防止应用程序在长时间空闲后必须遵守。或者以某种方式在本地预编译 Web 应用程序 - 然后将其部署到 Azure，因此不需要在服务器上编译？

我正在使用 VS 2012、Web 应用程序（Web 表单）和 Web 部署

[您可以在此处](http://ffinfo.azurewebsites.net/)访问我的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:30:34.417

不幸的是，Azure 网站无法解决这个问题。正如您所说，这是因为 IIS 是一个需求驱动的 Web 服务器，因此只有在被要求时才会执行此操作。因此，IIS 工作进程仅在对该工作进程中托管的站点的请求到达时才会启动。

如果您使用的是 VS2012 和 web 部署，那么您很可能已经在编译代码。在 .Net 中，此编译步骤仅将其部分转换为独立于 CPU 的 IL（中间语言），然后工作进程需要将其转换为可以在该机器上运行的本机代码。这就是为什么您的网站需要一段时间才能加载的原因。

他们确实开始使用 IIS 7.5 提供一个热身模块（应用程序初始化），该模块包含在 IIS 8 中，以解决初始化繁重网站的问题，不幸的是它不适用于 Azure 网站，因为它是一个本机模块。如果您想使用它，则必须切换到 Azure 云服务或虚拟机来运行您的站点。

我知道人们使用的另一种选择是使用云监控服务，例如 pingdom，它显然会不断地向您网站上的页面发出请求，从而使工作进程保持活动状态。最后一个远非理想的替代方案是在某处有一个简单的脚本，该脚本向页面发出请求以使其保持活动状态。

但是，如果您的网站变得流行，则无需执行任何这些步骤，因为人们正在访问您的网站这一事实将使工作进程保持活力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:00:08.400

我刚刚通过 Google Page Speed 运行了您的网站： [https ://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fffinfo.azurewebsites.net_2F&mobile=false](https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fffinfo.azurewebsites.net_2F&mobile=false)

如果您担心“共享”网站实例的速度/性能，您应该修复其中列出的一些项目。拥有 375kb 的巨大背景可能不是最好的主意......而且它甚至没有被压缩。

如果可以的话，转移到云服务的“超小”实例，您可以优化很多额外的东西（关闭 ASP.NET 模块、删除标头、控制压缩、客户端缓存）。您的目标是拥有一个受欢迎的网站，对吗？...开始吧 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T09:34:13.193

它不是开箱即用的，但是通过安排 ping 来保持云服务温暖的一种简单方法是使用[此处所述的 Windows Azure 移动服务](http://www.boxesandarrows.co.uk/using-azure-mobile-services-to-warm-up-a-website/)

它基本上是一个小脚本，计划每 15 分钟访问您的网站。

```
function KeepAlive() 
{     
    KeepSiteAlive("http://www.yousayhello.co.uk");     
}

function KeepSiteAlive (siteurl) 
{
     console.info("Warming up "+siteurl);
     var httpRequest = require('request');
     httpRequest(siteurl, function(err, response, body)         
     {             
        if (err)
        {
                 console.warn("Couldn't retrieve site");                             
        }
        else if (response.statusCode !== 200)
        {
              console.warn("Bad response");             
        }
        else             
        {              
            console.info("Site Warmed Up!");             
        }                         
      });
} 
```

# jsp - JQuery Mobile：嵌入的 youtube 频道不起作用

> ID：14482671
> 
> 赞同：2
> 
> 时间：2013-01-23T15:01:20.980
> 
> 标签：jsp, jquery-mobile, youtube-javascript-api, youtube-channels

我的 jsp 页面是用 JQuery mobile 设计的。当我在其中嵌入 youtube 频道脚本标签时，它不起作用。但是当将标签放在简单的jsp文件中时，它可以正常工作。我的代码如下：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script
    src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
    <div data-role="page">
        <div data-role="header">
            <a href="index.jsp" data-role="button" data-icon="home"
                data-iconpos="notext"></a>
            <h1>home</h1>

        </div>
        <!-- /header -->

        <div data-role="content">
            <script
                src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/youtube.xml&amp;up_channel=mychannel&amp;synd=open&amp;w=320&amp;h=390&amp;title=&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></div>
        <!-- /content -->

    </div>
    <!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:16:42.057

您需要关闭脚本标签。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/G223H/](http://jsfiddle.net/Gajotres/G223H/)

代码示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <script src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/youtube.xml&amp;up_channel=mychannel&amp;synd=open&amp;w=320&amp;h=390&amp;title=&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></script>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

# java - 如何在 JAVA ME、LWUIT 上创建返回按钮

> ID：14482674
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:01:24.987
> 
> 标签：java, java-me, lwuit

我在创建后退按钮时遇到了一些问题。现在在表单中有列表，我需要在右下角的这个表单上创建按钮，当滚动列表时，按钮保持在它的位置（右下角）。我正在尝试在屏幕下方创建容器并使其隐形。但它没有帮助，因为列表没有出现在容器下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T20:01:15.300

你可以试试这个...

```
import com.sun.lwuit.Command;
import com.sun.lwuit.Form;
import com.sun.lwuit.Display;
import com.sun.lwuit.events.ActionEvent;
import com.sun.lwuit.events.ActionListener;
public class FirstApp extends MIDlet implements ActionListener{

Form f;
Command exitCommand;
public FirstApp()
{
    //display form
   Display.init(this);
   f = new Form("myForm");
   f.setLayout(new BoxLayout(BoxLayout.Y_AXIS));
}
public void pauseApp()
{
}
public void destroyApp(boolean unconditional)
{
}

public void commandAction(Command c, Displayable dis) 
{

}

protected void startApp() throws MIDletStateChangeException 
{   
   //add exit button
       Command exitCommand;
   exitCommand = new Command("EXIT")
   {
        public void actionPerformed(ActionEvent e) {
            notifyDestroyed();
       }
   };
  f.addCommand(exitCommand);
  f.setBackCommand(exitCommand);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T07:40:29.310

您需要在对象命令中使用。

```
Command cmd = new Command(searchText) {
      public void actionPerformed(ActionEvent evt) {
           //TODO - implement back 
        }
    }; 
```

而不是将他添加到表单

```
f.addCommand(command); 
```

# .net - IIS 5，从 .net 1.1 迁移到 .net 2.0？

> ID：14482685
> 
> 赞同：3
> 
> 时间：2013-01-23T15:01:51.460
> 
> 标签：.net, visual-studio, .net-2.0, .net-1.1, iis-5

我的客户在他们的 Windows Server 上使用 IIS 5.0 和 .NET 1.1，这真的很旧！

只是想知道将服务器从 .NET 1.1 升级到 .NET 2.0 有哪些风险？IIS 5.0 是否支持 .NET 2.0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:05:55.993

Technically, this is *not supported*. The reason it is not supported is that IIS 5 runs on Windows Server 2000, and [Microsoft no longer supports Windows Server 2000](http://blogs.technet.com/b/windowsserver/archive/2010/01/14/windows-2000-server-approaching-end-of-life.aspx)... at all. New security patches are not released for Windows 2000, and have not been for a few years. In other words, any security issues found since July of 2010 are still open and exploitable on that system, no matter how much work you've done to keep it secured. You **really** need to convince the client to replace the machine. Anyone still running Server 2000 almost *deserves* to get hacked.

That out of the way, based on the system requirements listed on the [.Net 2.0 download page](http://www.microsoft.com/en-us/download/details.aspx?id=16614) it looks like you can install .Net 2.0 sp1 on a Server 2000 machine with Service Pack 4\. It ought to work in a basic sense, because this was supported once upon a time, even if it isn't any more.

ASP.Net made several significant changes in the transition from .Net 1.1 to .Net 2.0\. It's hard to say how much work an update will be, but it's not likely to be easy. My advice would be to convince the client to get a *new server* to host the migrated project, with a new and *supported* version of Windows Server (2008 R2 at the *minimum*, if you want it *stay* supported for a significant length of time). This is consistent with the need to move away from Windows Server 2000\. Copy the project as is to the new server, and do what needs to be done to get it working and *tested* there under a recent version of the .Net Framework... and for what it's worth, it's not likely to be a lot more work to go straight for .Net 4.0 than it is for 2.0 and bring the project all the way up to current practice.

This will let you do whatever you need to for development without impacting the production system, no matter how easy or difficult the upgrade turns out to be for you. When everything is ready, your development server will become the new production server. Re-point end users to the new server, possibly by changing a dns record or by re-naming the new machine with old name and IP and likely migrating some database information.

In short, while want you asked to do is *possible*, it is *seriously inadvisable*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:08:11.337

Easy answer first: Yes. IIS 5 will support .NET 2.

Hard answer second: The level of effort to upgrade a .NET 1.1 site to a .NET 2.0 site really depends on your site: the libraries referenced, the patterns used, etc so no one here can give you a good answer to that question. What I can say is that the upgrade to the .NET framework from 1.1 to 2.0 was a pretty major one. There are a lot of new things in 2.0 and I believe there was a decent amount that was also phased out. There is the possibility that many things can break on your site, but there is also the possibility that very few things (or even nothing!) on your site will break. The only way to find out is to do it.

If I were you, I would set up a test environment with .NET 2 and IIS 5 and just dump the site over as-is. Click around the site and see what works and what breaks.

# php - session_destroy() 在 PHP 中不起作用

> ID：14482686
> 
> 赞同：0
> 
> 时间：2013-01-23T15:01:59.010
> 
> 标签：php, windows, wamp

我收到错误消息：

```
Warning: session_destroy() [function.session-destroy]: Session object destruction failed in C:\wamp\www\index.php on line 20
Failed to destroy session. Please reload the page. 
```

这来自我的超时代码，但它只发生在一个客户端上，其他人工作正常。

我尝试从服务器上删除所有会话文件，但它不会让我破坏导致错误的特定会话。它告诉我该文件正在被 CMD.exe 使用。

有关如何解决此问题、导致此问题的原因或如何阻止 cmd.exe 使用该文件的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:19:07.710

我最终只是重新启动了服务器。不是理想的解决方案，但它有效。

# mysql - Drupal db_insert 一次保存的记录不超过 440 条

> ID：14482687
> 
> 赞同：-2
> 
> 时间：2013-01-23T15:02:00.710
> 
> 标签：mysql, drupal

我正在研究 Drupal CMS，我正在解析文件并将数据存储在 DB 中。

因此，如果文件中有超过 440 条记录（行），则不会进一步保存。它适用于少于 440 的行。这是一个奇怪的问题。

```
 $query = db_insert('table_name')->fields(array('field1', 'field2', 'field3'));

          $row = 1;
                while (($data = fgetcsv($handle, 0, ",")) !== FALSE)
                {
                    $num = count($data);

                    if ($row > 1) {

                        $query->values(
                            array(
                                'fields1' => $data[0],
                                'fields2' => $data[2],
                                'fields3' => $data[4] 
                            )); 

                        if($row == '440'){
                            break;
                        }
                    }
                    $row++;
                }

                $query->execute(); 
```

///// if($row == '440'){ break; }

添加以检查它保存了多少行。如果我将 440 增加到 460，它不会将记录保存到 DB。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:06:11.247

```
if($row == '440'){
  break;
} 
```

删除这个块，它会很好。

# hibernate - 如何正确配置 Hibernate

> ID：14482688
> 
> 赞同：0
> 
> 时间：2013-01-23T15:02:03.437
> 
> 标签：hibernate

```
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/PP</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password"></property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
  </session-factory>
</hibernate-configuration> 
```

HibernateSession.java

```
public class HibernateSession {

    private static final SessionFactory sessionFactory;

    static {
        try {

            sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
        } catch ( Throwable ex ) {
            // Log the exception.
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory()
      {
        return sessionFactory;
      }
} 
```

DataFetcher.java 用于执行查询

```
 public class DataFetcher {

        Session session;

        public DataFetcher()
          {
            session = HibernateSession.getSessionFactory().getCurrentSession();
          }

        public void Save(Marki m)
          {
            org.hibernate.Transaction tx = session.beginTransaction();
            session.save(m);
            session.getTransaction().commit();

          }
    }

ManagedBean(name="dodaj")
@ViewScoped
public class DodajOferte implements Serializable {

    private Marki marka;

    public DodajOferte()
      {

        marka = new Marki();
      }

    public String Dodaj()
      {

        DataFetcher f = new DataFetcher();

        try {
            f.Save(marka);
        } catch ( HibernateException ex ) {
            System.out.println(ex.getMessage().toString());

            FacesMessage message = new FacesMessage("err");
            FacesContext context = FacesContext.getCurrentInstance();
            context.addMessage(null, message);
            return null;
        }
        return null;

      }

    public Marki getMarka()
      {
        return marka;
      }

    public void setMarka(Marki marka)
      {
        this.marka = marka;
      }
} 
```

如何正确配置 Hibernate？我进行的每笔交易都有问题！在这种情况下，我得到“信息：非法尝试将集合与两个打开的会话相关联”。`change session.save(m); to session.merge(m);`只要我在同一页面上，它就可以工作。当我更改页面，然后返回它时，我得到了很多异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:47:41.523

不要将会话对象与您的 DataFetcher 一起存储。这不是一个好主意。每个会话都绑定到一个绑定它的线程的事务。我不确定这段代码是否在容器中运行，但如果是这样，hibernate 将尝试使用范围内的事务管理器，您的代码会对此感到困惑。将您的代码更改为以下内容，看看是否有任何改变。

`public class DataFetcher {`

 ````
 public void Save(Marki m)
      {
        Session session = HibernateSession.getSessionFactory().getCurrentSession();
        org.hibernate.Transaction tx = session.beginTransaction();
        session.save(m);
        session.getTransaction().commit();

      }
} 
````

# c++ - VC++ 编译器看不到我的任何命名空间或类

> ID：14482689
> 
> 赞同：1
> 
> 时间：2013-01-23T15:02:04.847
> 
> 标签：c++, visual-studio-2010, visual-c++, compilation, namespaces

我正在使用 c++ 开发一个项目，但我不知道出了什么问题。我写了 4 节课，工作期间一切看起来都很好（在 Visual Studio 2010 下）。VS“看到”了所有定义，我可以使用自动填充和建议，但是当我尝试编译项目时，它突然失明了。就像我没有包含标题或其他东西（我做了）。奇怪的是在 VS 上使用这些类没有问题（我可以 ctrl+space 来提示、属性和方法列表以及所有这些东西）但是当我尝试编译它时说“ClassName”不是一种类型。以下问题的快速示例：

ProButton.cpp:

```
#include "ProButton.h"

using namespace pGUI;

ProButton::ProButton( ... )
    : ProControl( ... )
{
    ...
} 
```

ProButton.h：

```
#ifndef __PRO_BUTTON__
#define __PRO_BUTTON__

#include <string>
#include "ProControl.h"

namespace pGUI
{

class ProButton :
    public pGUI::ProControl
{
public:
    //attributes
    ...

public:
    //methods
    ...

};

}

#endif 
```

但编译器说： 错误 291 错误 C2653: 'ProButton' : is not a class or namespace name for this line in ProButton.cpp: ProButton::ProButton( ... )

它还说：错误23错误C2039：'ProControl'：不是'pGUI'的成员
错误24错误C2504：'ProControl'：基类未定义

以及整个项目的所有类似错误。我不知道出了什么问题。看起来我的 VS 坏了：D

当然那些 (...) 意味着那里有代码，只是现在不那么重要。我可以将所有解决方案上传到某个地方，它会有所帮助。

**编辑//**

关于命名空间，所有头文件（类声明）都在命名空间中定义：

```
namespace pGUI{
   class ProClass
   {
   };
} 
```

这些类的所有定义（在 ProClass.cpp 中）都在使用：

```
using namespace pGUI; 
```

一开始。

我认为问题在于包含文件的顺序。我不确定这应该怎么做。到目前为止，我有 4 个课程：

**ProGUI 类：**

*   有一个指向 ProContainer 的指针
*   *包括：ProContainer 和 ProControl*

**类 ProContainer：**

*   指向：ProGUI 和 ProControl

**类 ProControl：**

*   有一个指向 ProContainer 的指针
*   *包括 ProButton*
*   是 ProButton 的基类

**ProButton 类：**

*   是 ProControl 的子类

这些类也使用 irrlicht 库，我不确定在哪里包含它。我之前将它包含在我的主文件中`#include "ProGUI.h"`。这也是 main 中唯一包含的内容。图形用户界面.h 。

**//编辑 2 -> 已解决**

这是包含问题。我需要重新考虑我的包含顺序并添加一些前向声明。无论如何，这一切似乎都很奇怪，我花了很多时间才弄清楚。谢谢帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:32:09.810

您似乎正在使用以下语句：

`using namespace pGUI;`

就在类声明之前：

```
class ProControl
{

}; 
```

而不是使用以下方法：

```
namespace pGUI
{
    class ProControl
    {

    };
} 
```

`using namespace`正如它所说的，它*使用*命名空间。您需要使用`namespace`关键字后跟大括号显式放置名称空间！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:35:28.420

`using namespace pGUI`通知编译器它应该在 pGUI 命名空间中查找现有名称。

要在命名空间中声明或实现某些东西，您需要更具体。与：

```
namespace pGUI
{
    ProButton::ProButton( ... ) : ProControl( ... )
    {
        ...
    }
} 
```

或者：

```
pGUI::ProButton::ProButton( ... ) : ProControl( ... )
{
    ....
} 
```

就个人而言，我认为任何使用`using namespace`都是一种懒惰的程序员黑客，它完全违背了命名空间的意义。但我离题了。:)

# python - 将两个一维连接到两列数组

> ID：14482696
> 
> 赞同：5
> 
> 时间：2013-01-23T15:02:28.117
> 
> 标签：python, arrays, numpy

```
a = np.array([1, 2, 3])
aa = np.array([1], [2], [3])
b = np.array([1, 2, 3])
bb = np.array([1], [2], [3])
np.concatenate((a, b), axis = 1)
array([1, 2, 3, 1, 2, 3])     # It's ok, that's what I was expecting
np.concatenate((a, b), axis = 0)
array([1, 2, 3, 1, 2, 3])     # It's not ok, that's not what I was expecting 
```

我期待：

```
array([[1, 2, 3],
       [1, 2, 3]]) 
```

即使使用 aa 和 bb，我也会得到同样的不一致。那么是否有一个简单的解决方案可以沿轴 0 连接两个一维数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T15:06:47.500

注意`a`和`b`都是一维的；没有轴 1 可以连接。你想要[`vstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vstack.html)：

```
>>> import numpy as np
>>> a = np.array([1,2,3])
>>> b = a.copy()
>>> np.vstack([a,b])
array([[1, 2, 3],
       [1, 2, 3]]) 
```

或者，您可以重塑`a`并`b`首先：

```
>>> np.concatenate([a[np.newaxis,:],b[np.newaxis,:]],axis = 0)
array([[1, 2, 3],
       [1, 2, 3]]) 
```

# javascript - 获取所有选择/选项列表以某事开头

> ID：14482699
> 
> 赞同：4
> 
> 时间：2013-01-23T15:02:36.307
> 
> 标签：javascript, dom, jsni

在 HTML 页面中，我有多个列表。

```
<select name="salut-1358937506000-OK">
<option selected="" value="OK">OK</option>
<option value="OK">NOK</option>
</select>

<select name="salut-1358937582000-OK">
<option selected="" value="OK">OK</option>
<option value="OK">NOK</option>
</select>
... 
```

在javascript中，我想获取所有以“salut-”开头的选择/选项列表。对于论文列表，我想比较他的名字和他选择的值。

我知道在 jQuery 中是可能的，但不能使用 jquery，只能使用 javascript（JSNI 和 GWT）。

你有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:13:26.417

```
var selects = document.getElementsByTagName('select');
var sel;
var relevantSelects = [];
for(var z=0; z<selects.length; z++){
     sel = selects[z];
     if(sel.name.indexOf('salut-') === 0){
         relevantSelects.push(sel);
     }
}
console.log(relevantSelects); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:18:02.613

您可以使用[getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)函数来获取每个`SELECT`名称，例如：

```
var e = document.getElementsByTagName("select");
for (var i = 0; i < e.length; i++){
  var name = e[i].getAttribute("name");
} 
```

然后，您可以使用以下代码获取每个`OPTION`,`SELECT`进行任何必要的比较：

```
var options = e[i].getElementsByTagName("option") 
```

# ruby - 使用 Foreman 启动位于不同目录的 Rack App

> ID：14482701
> 
> 赞同：7
> 
> 时间：2013-01-23T15:02:42.867
> 
> 标签：ruby, ruby-on-rails-3, gem, foreman, procfile

我有一个成功运行多个进程的 Procfile 设置：

```
# /Procfile
redis: bundle exec redis-server
sidekiq: bundle exec sidekiq -v -C ./config.yml
forward: forward 4567 mock-api 
```

我需要再添加一个进程——一个位于我机器上不同目录中的 Sinatra 应用程序。如果我 cd 到目录，我可以从终端启动它：

```
$ rackup -p 4567 
```

我可以使用终端从不同的目录启动它：

```
$ sh -c 'cd /Path/to/project/ && exec rackup -p 4567' 
```

但是我应该如何使用工头来做到这一点。我尝试添加以下内容，但它默默地失败了：

```
mock-api: sh -c 'cd /Path/to/project/ && exec rackup -p 4567' 
```

这甚至可能吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T15:54:09.680

在所有愚蠢的事情中......

由于进程名称中的连字符而失败。

# python - Python - 在 shell 中运行时与在另一个脚本中运行时解释路径的方式不同？

> ID：14482702
> 
> 赞同：0
> 
> 时间：2013-01-23T15:02:45.203
> 
> 标签：python, shell, selenium

我遇到了一个奇怪的问题，我不太确定如何解决。我有一个 Python-selenium 脚本，它使用相对路径将结果记录到文本文件中。

这是设置日志文件的脚本部分：

```
log_file = './demo-logfiles/log_file_template.txt'
sys.stdout = open('log_file_template.txt', 'a',) 
```

如您所见，它使用文件夹的相对路径。如果我将此脚本运行为: `python demo.py firefox MAC`，它将完美运行，并且日志文件将被发送到正确的文件夹。

如果我从一个更大的 shell 脚本中运行这个确切的 Python 脚本，它会返回一个`'./demo-logfiles/log_file_template.txt'`不存在的错误。

我发现如果我将脚本更改为`'../demo-logfiles/log_file_template.txt'`它可以在更大的 shell 脚本中工作，但如果我正常运行它就会停止工作。

它要么在一个中工作，要么在另一个中工作。以不同方式解释相对目录的原因是什么？我不想让两个单独的脚本在 Python/shell 中运行。

原始的python脚本在目录`/blah/blah/DEMO/demo.py`中，运行它的shell脚本在`/blah/blah/DEMO/demo-autotest/autotest_logger.sh`

我已确认我尝试运行的任何脚本都会出现此问题。我不必更改原始 Python 代码以使其与 shell 脚本一起使用。我已经在 shell 脚本中解释了它，它成功地运行了该文件。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:34:49.907

你永远不应该使用“。” （或任何相对路径）在脚本的目录路径中，除非您*真的*要引用用户从中运行脚本的目录。如果要引用相对于正在运行的脚本的位置，可以执行以下操作：

```
import os
import sys
directory = os.path.dirname(os.path.abspath(__file__))
sys.stdout = open(os.path.join(directory, "demo-logfiles", "log_file_template.txt"), "a") 
```

最佳实践附注：您可能应该使用`logging`模块而不是重新分配`sys.stdout`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:41:05.953

术语“相对目录”意味着路径是相对于某物的。您可能认为它与包含路径的脚本相关，但这是不正确的。

相对路径相对于解释脚本的进程的当前目录，即您启动的文件夹`python`。如果你在 shell 中，你可以看到当前目录`echo $PWD`

如果您从 开始`python`，`/blah/blah`那么它将成为当前目录，并且所有相对路径都相对于`/blah/blah`.

请参阅[David Hollman 的答案，](https://stackoverflow.com/a/14483317/34088)了解如何获取当前脚本的路径以及如何构建相对于该脚本的路径。

# html - 滑块问题

> ID：14482703
> 
> 赞同：1
> 
> 时间：2013-01-23T15:02:46.933
> 
> 标签：html, css

嗨，我对滑块的位置有一些问题。它在他的持有人之外，在右边的某个地方。我很确定我在 CSS 中遗漏了一些东西，但不记得到底是什么。

HTML：

```
<div class="slider">
    <div class="carousel">
      <img src="css/images/img1.jpg" alt="" />
      <img src="css/images/img1.jpg" alt="" />
      <img src="css/images/img1.jpg" alt="" />
    </div>

    <div class="pagination">

    </div>
</div> 
```

CSS：

```
.slider { position: relative; width: 100%; }
.carousel img { width: 781px; display: block; }

.pagination { position: absolute; bottom: 10px; left: 10px; }
.pagination a { background: url(images/pagination.png) no-repeat 0 bottom; height: 12px; width: 12px; float: left; font-size: 0; line-height: 0; text-indent: -4000px; padding: 0 3px 0 0; }
.pagination a:hover,
.pagination a.selected { background-position: 0 0; } 
```

jQuery：

```
$(function(){

    $(".carousel").carouFredSel({
        items: 1,
        scroll: {
            fx: "fade"
        },
        auto: 4000,
        width:781,
        pagination: ".pagination"
    });

}); 
```

我发现了我错过的错误`overflow:hidden`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:26:11.377

找到错误的好工作。是的，溢出很容易被忽视。

# c++ - 是否允许在对象之外定义辅助功能？

> ID：14482705
> 
> 赞同：3
> 
> 时间：2013-01-23T15:02:47.717
> 
> 标签：c++, coding-style

我有一个类和一个给定的相当复杂的方法，为此我定义了一些辅助函数，但是这些函数在其他任何地方都没有使用。现在我想知道我是否应该

*   将它们添加到我的课程中——这似乎是根据 OOP 范式应该做的事情
*   将它们单独保存在我的实现文件中 - 因为用那种半冗余方法填充我的类定义会使我的类定义的可读性降低。

我的问题是当涉及到 C++ 风格时我应该怎么做。我觉得第二种解决方案违背了 OOP 原则，尽管 C++ 不是一种面向对象的语言，而是一种混合语言。我提到的函数，如果实现为类方法，将是静态的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T15:04:17.930

将它们放在源文件内的**[未命名命名空间中。](http://msdn.microsoft.com/en-us/library/yct4x9k5%28v=vs.80%29.aspx)**
未命名的命名空间允许您的函数在翻译单元内可见，但在翻译单元外不可见。您的函数仍然具有外部链接，但它们对翻译单元之外的任何人都是不可见的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:20:05.917

FWIW，我要补充一点：到目前为止给出的答案都很好，但是从 C++11 开始，我发现对于严格的辅助函数，有一个更好且侵入性更小的解决方案：

在它们所服务的方法中将它们定义为 lambdas。

这将使它们在其他任何地方都不可见，并赋予它们适当的访问权限，而无需使用`friend`声明或使它们成为私有静态成员。

# javascript - 缺少子元素的元素的 jquery 选择器

> ID：14482707
> 
> 赞同：5
> 
> 时间：2013-01-23T15:02:50.163
> 
> 标签：javascript, jquery

我需要帮助形成一个 jquery 选择器来返回缺少特定子元素的元素。

给定以下 HTML 片段：

```
 <div id="rack1" class="rack">
    <span id="rackunit1" class="rackspace">
        <span id="component1">BoxA</span>
        <span id="label1">Space A</span>
    </span>
    <span id="rackunit2" class="rackspace">
        <span id="label2">Space B</span>
    </span>
    <span id="rackunit3" class="rackspace">
        <span id="component2">BoxA</span>
        <span id="label3">Space C</span>
    </span>
</div>
<div id="rack2" class="rack">
    <span id="rackunit4" class="rackspace">
        <span id="component3">BoxC</span>
        <span id="label4">Space D</span>
    </span>
    <span id="rackunit5" class="rackspace">
        <span id="label5">Space E</span>
    </span>
    <span id="rackunit6" class="rackspace">
        <span id="component4">BoxD</span>
        <span id="label6">Space F</span>
    </span>
</div> 
```

为我找到没有组件跨度的机架单元跨度。到目前为止，我有： $(".rack .rackspace") 让我获得所有的机架单元跨度，不知道如何排除具有组件跨度的那些或只选择那些没有的...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T15:05:23.747

我想以下应该有效：

```
$(".rack .rackspace:not(:has(span[id^=component]))"). ... 
```

**演示：http:** [//jsfiddle.net/WbCzj/](http://jsfiddle.net/WbCzj/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:06:07.340

You could use [`.filter()`](http://api.jquery.com/filter/):

```
$('.rack .rackspace').filter(function() {
    return $(this).find('span[id^="component"]').length === 0;
}); 
```

# multithreading - 多线程程序的 GDB 非常慢

> ID：14482708
> 
> 赞同：0
> 
> 时间：2013-01-23T15:02:50.200
> 
> 标签：multithreading, performance, gdb

**好吧，我在没有 gdb 的情况下解决了分段错误的问题。所以我不再需要解决性能缓慢的问题了。感谢所有试图提供帮助的人。**
我正在尝试将串行程序更改为并行程序。为此，我正在使用多个线程。我的一段代码被多次调用。每次它创建 3 个线程（可连接），然后我在每个线程中使用“pthread_join”。

但是当我运行代码时，它会给出分段错误（5秒给出段错误）。所以我尝试用 gdb 调试它，看看问题出在哪里。但是当我用 GDB 运行它时，它非常慢（非常非常慢），并且 gdb 没有达到 segfault。

ps：随着程序的进行，gdb越来越慢。我怀疑留下了线程的“痕迹”。

# python - 使用继承动态加载模块

> ID：14482709
> 
> 赞同：0
> 
> 时间：2013-01-23T15:02:52.580
> 
> 标签：python, inheritance, dynamic, import

我知道有几篇关于这个主题的帖子，但是出于某种原因，我无法理解它，或者至少无法实现它。下面是我正在尝试做的一些示例代码。

**基类：**

```
class Animal(object):

    def __init__(self, age):
        self._age = age

    def getAge(self):
        return self._age

    def speak(self):
        raise NotImplementedError()

    def speak_twice(self):
        self.speak()
        self.speak() 
```

**子类**

```
from Animal import Animal
class Dog(Animal):
    def speak(self):
        print "woff!" 
```

**测试代码**

```
mod = __import__("Dog")
spot = mod(5) 
```

运行测试代码后，我收到此错误：

```
Traceback (most recent call last):
  File "C:~test.py", line 2, in <module>
    spot = mod(5)
TypeError: 'module' object is not callable 
```

所以基本上我的问题是如何动态加载模块并正确初始化它们？

编辑：

直到运行时我才知道子类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:05:37.683

您必须导入模块本身，然后获取其类成员。你不能只导入类。假设您的子类位于可从 pythonpath 作为“动物”访问的文件中：

```
mod = __import__('animal')
spot = mod.Dog(5) 
```

当您导入一个模块时，解释器首先查看是否存在具有该名称的模块`sys.modules`，然后如果无法在其中找到它，它会在 pythonpath 中搜索与给定名称匹配的包或模块。如果找到一个，它会解析其中的代码，从中构建一个模块对象，将其放在 上`sys.modules`，并将模块对象返回到调用范围，以绑定到给定命名空间中导入它的名称。然后，模块范围内的模块中的所有项目（类、变量、函数）（未嵌套在代码中的其他内容中）都可以作为该模块实例的成员使用。

编辑：

针对您的评论，真正的问题是您正在尝试动态查找模块的属性，而不是您正在尝试动态导入任何内容。最直接的方法是：

```
import sub_animal
getattr(sub_animal, 'Dog') 
```

但是，如果您尝试根据某些条件动态确定要初始化的类，您可能需要阅读[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)，可能还有[`decorator`s](http://www.thumbtack.com/engineering/a-primer-on-python-decorators/)甚至[`metaclass`es](http://docs.python.org/2/reference/datamodel.html#customizing-class-creation)，以便您可以动态地将子类自动添加到工厂中。

```
class AnimalFactory(type):

    animal_classes = {}

    def __new__(cls, name, bases, attrs):

        new_class = super(AnimalFactory, cls).__new__(cls, name, bases, attrs)
        AnimalFactory.animal_classes[name] = new_class
        return new_class

    @classmethod
    def build(cls, name, *args, **kwargs):

        try:
            klass = cls.animal_classes[name]
        except KeyError:
            raise ValueError('No known animal %s' % name)
        return klass(*args, **kwargs)

class Animal(object):

    __metaclass__ = AnimalFactory

    def __init__(self, age):

        self.age = age

    def speak(self):

        raise NotImplementedError()

# As long as the file it is implemented in is imported at some point,
# the following can be anywhere

class Dog(Animal):

    def speak(self):

        return 'woof'

# And then to use, again, anywhere

new_animal = AnimalFactory.build('Dog', 5) 
```

# selenium - 如何识别是否使用 Selenium 发送了请求

> ID：14482714
> 
> 赞同：1
> 
> 时间：2013-01-23T15:03:24.623
> 
> 标签：selenium

有没有办法确定是否使用 Selenium 发送了 HTTP 请求？

例如，如果 Selenium 添加任何请求标头、cookie 或等效项？

我尝试查看用户代理，但它没有透露任何有关 Selenium 的信息：

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:03:24.623

我注意到`HTTP_X_FORWARDED_FOR`如果使用 Selenium 会设置：

```
HTTP_X_FORWARDED_FOR => 0:0:0:0:0:0:0:1%0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:25:43.053

没有。Selenium 不会用任何东西标记它的请求。

# tsql - 在链接表中查找缺失的条目

> ID：14482718
> 
> 赞同：0
> 
> 时间：2013-01-23T15:03:30.460
> 
> 标签：tsql

我使用 SQL-Server 2008 并有以下表格。

用户

```
用户身份
1
2
3
```

对象

```
对象ID | 类别
9 | 一个
8 | 乙
7 | 一个
6 | C
```

用户对象

```
用户名 | 对象标识
1 | 9
3 | 7
3 | 6
```

如您所见，userobjects 是一个链接表。不幸的是，它缺少一些条目。我可以将它们包含在脚本中，但我想知道 sql 中是否有解决方案。

对于属于类别“A”的每个用户 ID 和每个对象 ID，用户对象中都应该有一个条目。所以我想要的是这样的：

```
用户名 | 对象标识
1 | 9
1 | 7
2 | 9
2 | 7
3 | 9
3 | 7
3 | 6
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:24:28.480

> I could include them with a script but I wonder if there is a solution in sql.

This is a select query using `UNION` (here is [SQL-DEMO](http://sqlfiddle.com/#!3/37a28/7));

```
select u.userId, o.objectId
from objects o cross join users u
where o.category = 'A'
union
select u.userId, o.objectId
from users u join userobjects uj on u.userid = uj.userId
     join objects o on uj.objectid = o.objectid
where o.category <> 'A'
order by u.userid,o.objectid desc

--RESULTS
userId  objectId
1       9
1       7
2       9
2       7
3       9
3       7
3       6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:30:03.803

You can do it without a UNION using a LEFT join and a non-traditional INNER JOIN to objects

```
SELECT DISTINCT u.userid, 
                o.objectid 
FROM   users u 
       LEFT JOIN userobjects uj 
              ON u.userid = uj.userid 
       INNER JOIN objects o 
               ON uj.objectid = o.objectid 
                   OR ( o.category = 'A' ) 
ORDER  BY u.userid, 
          o.objectid DESC 
```

[Fiddle](http://sqlfiddle.com/#!3/37a28/21)

# php - 在 Laravel 中，哪些 Eloquent 方法返回数据，哪些返回对象？

> ID：14482720
> 
> 赞同：3
> 
> 时间：2013-01-23T15:03:32.003
> 
> 标签：php, laravel, eloquent

我对 Laravel 的 Eloquent ORM 中的各种函数以及它们返回的内容感到困惑。我有一个博客的帖子模型 - 如果我写了以下任何内容，那么我会返回所有帖子的数组：

```
$posts = Post::all();
$posts = Post::get();
$posts = Post::with('user')->all(); 
```

但是，如果我链接其他一些方法，它就不起作用。例如，这会给出一个未处理的异常错误：“方法 [all] 未在 Query 类上定义。”

```
$posts = Post::with('user')->order_by('updated_at', 'desc')->all(); 
```

如果我使用 paginate 函数，我根本不会得到结果数组。

```
$posts = Post::with('user')->order_by('updated_at', 'desc')->paginate(5);

// index.blade.php
@foreach ($posts as $post)
    {{ $post->id }}
@endforeach 
```

我收到错误消息：“尝试获取非对象的属性”。原来数据在`$posts->results`，不是`$posts`。

这一切都非常令人困惑！我该如何解决这个问题？这些函数中的每一个返回什么以及如何正确链接它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:09:03.630

无需遍历所有可用的方法，简单的答案就是找出输出的数据类型。

```
dd($whatever); 
```

如果它是一个对象，那么找到该对象是一个实例的类，并了解该类是如何工作的。

如果它是一个查询对象，你可以链接它，如果它是一个数组或 null 你不能。如果它是模型类的实例，那么您可以链接它，但您只能调用模型类或派生类中存在的方法。

这是我写的一篇关于 Eloquent 和 Fluent 的简短文章，可能也有帮助： http: [//laravel.io/topic/17/what-are-fluent-and-eloquent](http://laravel.io/topic/17/what-are-fluent-and-eloquent)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-10T11:30:32.300

当我运行这个：

```
$user = User::where('email','=','test@example.com');
dd($user); # object(Illuminate\Database\Eloquent\Builder)

// After: 
dd($user->get()); # object(Illuminate\Database\Eloquent\Collection)

// And finally, to get model object:
dd($user->get()->first()); # object(App\User) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T15:09:08.060

通过查看源代码，它的文档并没有那么糟糕：

[https://github.com/laravel/laravel/blob/master/laravel/database/eloquent/query.php#L98](https://github.com/laravel/laravel/blob/master/laravel/database/eloquent/query.php#L98)

每个方法都有`@return`他们的 phpdoc，所以你立即知道他们应该返回什么。我建议您也阅读[文档](http://laravel.com/docs/views/pagination)。

# makefile - 隐式规则未运行，尽管其依赖性缺失

> ID：14482723
> 
> 赞同：0
> 
> 时间：2013-01-23T15:03:40.927
> 
> 标签：makefile

我有一个类似于这样的 Makefile：

```
.PRECIOUS: do/%.build

do/%.install: do/%.build
    touch $@

do/%.build:
    touch $@ 
```

我的意图是所有 do/ *.install 目标都依赖于 do/* .build 目标，如果构建目标的标记文件丢失，则运行构建目标的规则，如果构建目标运行安装目标邮票较新。这在第一次运行期间工作正常：

```
$ make do/foo.install
touch do/foo.build
touch do/foo.install 
```

如果构建标记较新，它也可以正常工作：

```
$ touch do/foo.build 
$ make do/foo.install
touch do/foo.install 
```

但是，如果存在安装标记并且缺少构建标记，则它不会按预期工作：

```
$ rm do/foo.build 
$ make do/foo.install
make: `do/foo.install' is up to date. 
```

安装目标未运行。我应该怎么办？这是否与我必须添加 .PRECIOUS 行以避免自动删除构建标记的事实有关？

问候，蒂诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:50:48.130

从[手册](http://www.gnu.org/software/make/manual/make.html#Chained-Rules)：

“如果一个普通文件 b 不存在，并且 make 考虑一个依赖于 b 的目标，它总是创建 b 然后从 b 更新目标。但是如果 b 是一个中间文件[即从模式规则推断]，那么 make可以不用管它。它不会打扰更新 b 或最终目标，除非 b 的某些先决条件比该目标更新，或者有其他原因更新该目标。

有几种方法可以解决这个问题，但我知道没有真正干净的方法。是否有任何其他目标依赖于`build`或`install`文件？

# python - 从 90 天后的最后一次操作开始计算日期

> ID：14482730
> 
> 赞同：1
> 
> 时间：2013-01-23T15:03:54.890
> 
> 标签：python, django

我需要计算用户购物车中最后一次操作后的 90 天！

我有模型模型 ORDERING

```
class Order(DirtyFieldsMixin, models.Model):
    ...
    items_add_date = models.DateTimeField(null=True, blank=True)
    ... 
```

我的任务是。跟踪用户在自己的购物车中添加最后一个项目的日期，然后，如果过去 90 天并且用户没有在购物车中添加任何更多项目，则发送给他的电子邮件。

我正在做这个

```
def cart_add(request):
    ...
    order.items_add_date = datetime.datetime.now()
    order.save()
    ... 
```

但是之后我应该采取什么行动以及如何采取行动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:08:48.640

不知道你在挣扎什么，但如果你需要确定它是否已经 90 天，那么你会添加一个检查：

```
#query for order
order = Order.get(xxx)
ninety  = datetime.datetime.now() - timedelta(days=-90) 
if order.items_add_date < ninety:
    #send email 
```

如果您需要查询超过 90 天的内容：

```
order = Order.filter(items_add_date__lt=ninety) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:35:28.317

我这样解决了

```
srok = datetime.datetime.now()-timedelta(minutes=1)
user_unbuying = Order.objects.filter(items_add_date__lt=srok)

usr=[]

for unbus in user_unbuying:
    if unbus.customer.id not in usr:
        if unbus.customer is not None:
            if unbus.items_add_date is not None:
                usr.append(unbus.customer.id)
                #send mail 
```

# r - 在 R 中处理大量对象

> ID：14482731
> 
> 赞同：1
> 
> 时间：2013-01-23T15:03:56.027
> 
> 标签：r

我有一个很大的对象列表（比如 100k 个元素）。每个元素都必须由一个“进程”函数处理，但我想分块进行处理......例如，20 次通过，因为我想将处理结果保存到硬盘驱动器文件中并保持操作内存空闲。

我是 R 新手，我知道它应该涉及一些应用魔法，但我不知道该怎么做（还）。

任何指导将不胜感激。

一个小例子：

```
 objects <- list();
 for (i in 1:100){
 objects <- append(objects, 500);
 }
 objects;

 processOneElement <- function(x){
 x/20 + 23;
 } 
```

我想一次处理前 20 个元素并保存结果，然后再处理第二个 20 个元素并保存结果......等等

```
objects <- list();
 for (i in 1:100){
 objects <- append(objects, 500);
 }
 objects;

process <- function(x){
 x/20 + 23;
 }

results <- lapply(objects, FUN=process)

index <- seq(1, length(objects), by=20);
lapply(index, function(idx1) {
idx2 <- min(idx1+20-1, length(objects));
batch <- lapply(idx:idx2, function(x) {
process(objects[[x]]);
})

write.table(batch, paste("batch", idx1, sep=""));
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:14:04.433

有了你给出的答案，这就是我可以建议的答案。假设您的列表存储在`list.object`,

```
lapply(seq(1, length(list.object), by=20), function(idx) {
    # here idx will be 1, 21, 41 etc...
    idx2 <- min(idx+20-1, length(list.object))
    # do what you want here.. 
    batch.20.processed <- lapply(idx:idx2, function(x) {
        process(list.object[[x]]) # passes idx:idx2 indices one at a time
    })
    # here you have processed list with 20 elements
    # finally write to file
    lapply(1:20, function(x) {
        write.table(batch.20.processed[[x]], ...)
        # where "..." is all other allowed arguments to write.table
        # such as row.names, col.names, quote etc.
        # don't literally pass "..." to write.table
    })
} 
```

# objective-c - 从 UITableView 标题部分设置 UILabel 文本

> ID：14482732
> 
> 赞同：2
> 
> 时间：2013-01-23T15:04:00.533
> 
> 标签：objective-c, uitableview, tableheader

我有一个分段的 UITableView 并想设置一个标签（不在 tableview 中）顶部标签的文本。

我尝试使用`[label setText:@"name"];`in设置标签

```
 (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
```

但这没有用。其他人有想法如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:09:50.167

尝试这个

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 30, 60)];
    headerView.backgroundColor = [UIColor clearColor];

    UILabel *label = [[UILabel alloc] initWithFrame: CGRectMake(0,0, 50, 50)];
    label.backgroundColor = [UIColor yellowColor];
    label.autoresizingMask = UIViewAutoresizingFlexibleRightMargin;

    [headerView addSubview:label];
    return headerView;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T02:01:40.963

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    self.tableView1.tag = 1;
    if ( [tableView tag] == 1 ) {
        return @"TableView One Title";   
    }
    return @"other Tableview Title";        
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:09:16.977

如果您使用该方法，则只需要返回字符串。它将为您处理创建标签。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @"Name";
} 
```

如果您想使用自己的`UIView`，或者`UILabel`您需要使用不同的`dataSource`方法。

```
- (UIView *) tableview:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UILabel *customLabel = [[UILabel alloc] initWithFrame:CGRect(0.0,0.0,100.0,20.0)];
    [customLabel setText:@"name"];

    return customLabel;
} 
```

# c# - 如何离线存储 RoamingSettings？

> ID：14482735
> 
> 赞同：1
> 
> 时间：2013-01-23T15:04:02.563
> 
> 标签：c#, xaml, windows-8, winrt-xaml

我正在阅读有关 Windows 8 生命周期以及它如何在暂停和终止模式下保存用户的日期和应用程序统计信息的信息，但有一条注释让我认为它如下：

漫游设置。漫游设置应用程序数据容器可以轻松地以用户可以跨多台计算机访问的方式存储数据。基本上，数据会在后台为您上传到云端。您还可以使用本地设置应用程序数据容器 (LocalSettings)，但仅应在您想要存储特定于机器的信息时使用它。

我在这里不明白我必须将我的数据存储在云上才能使用 RoamingStettings 吗？如果我没有持久连接怎么办，如果我希望我的应用程序离线存储所有状态数据怎么办？

这是我的问题thanx提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:15:02.603

不，您只需使用漫游文件夹和设置，而不用担心它是如何完成的

# oracle - 不要使用 sql 命令查看监听器状态请帮助我？

> ID：14482739
> 
> 赞同：0
> 
> 时间：2013-01-23T15:04:17.033
> 
> 标签：oracle, oracle11g, storage, local-storage, decorator

我阅读了 oracle 数据库 XE 的文档，然后：使用命令查看侦听器状态：

查看监听器状态：

1.  执行以下操作之一：
    *   在 Linux 上：启动终端会话并使用 oracle 用户帐户登录到 Oracle 数据库 XE 主机。
    *   在 Windows 上：以安装 Oracle Database XE 的用户身份登录到 Oracle Database XE 主机，然后打开命令窗口。
2.  在 Linux 上，请确保根据第 3-5 页的“在 Linux 平台上设置环境变量”中的说明设置环境变量。
3.  输入以下命令：`LSNRCTL STATUS`

然后我尝试在我的 oracle 中完成工作，该命令不起作用：

我的命令在 sql commadnd 提示符下：

```
连接用户名/密码作为 SYSDBA；
LSNRCTL 状态；

```

顶部查询不起作用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:07:07.693

`lsnrctl status`must be run from the command line interface (CLI), not from within SQL*Plus

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:08:50.053

`LSNRCTL STATUS`不是***SQL***语句。`LSNRCTL`是与 Oracle 和 Listener 一起安装的程序。因此，您需要在常规命令提示符下运行它。

# c# - 如何制作信息图像

> ID：14482742
> 
> 赞同：3
> 
> 时间：2013-01-23T15:04:24.693
> 
> 标签：c#, winforms, border, picturebox

我正在开发一个程序，我想要一个信息图像，当你将鼠标悬停在它上面时，会出现一个`ToolTip`，我的问题是`PictureBox`它上面有信息图像的边框是这样的：

![图片框边框](../Images/bb404937ff399cfeb047fbcc2b05d8b5.png)

有谁知道如何使边界`PictureBox`消失？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:09:41.427

我认为你可以简单地这样做：

```
picture.BorderStyle = BorderStyle.None; 
```

# asp.net-mvc - AppHarbor 上的 FormsAuthentication

> ID：14482746
> 
> 赞同：0
> 
> 时间：2013-01-23T15:04:29.683
> 
> 标签：asp.net-mvc, forms-authentication, appharbor

我将我的第一个 ASP.NET MVC 应用程序上传到 App Harbor，它使用 FormsAuthentication 对用户进行简单的身份验证。

像往常一样，在需要身份验证的本地机器操作上表现良好，当我在 AppHarbor 上调整它们时，它们失败了。

我检查了访问时发布的身份验证 cookie 是否随请求一起发送，从图像中可以看出：

![截屏](../Images/9bf1b0575047c152692bcf96669d5eaa.png)

我的服务器端身份验证代码看起来像

```
 FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(
                        1,
                            user.UserName,
                            DateTime.Now,
                            DateTime.Now.AddDays(1),
                            true,
                            user.UserName
                        );

  string encTicket = FormsAuthentication.Encrypt(authTicket);
  this.Response.Cookies.Add(
        new HttpCookie(
              FormsAuthentication.FormsCookieName,
              encTicket) 
  { Expires = authTicket.Expiration }); 
```

我从 AppHarbor 博客中阅读了不同的帖子，例如[ASP.NET Forms Authentication Considered Broken](http://blog.appharbor.com/2012/02/22/asp-net-forms-authentication-considered-broken)，它说“harmflul”而*不是它不起作用*。

那么，我在这里做错了什么？

# jquery - 在 svg 字符串中使用 getBoundingClientRect、getBBox？

> ID：14482748
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:04:35.183
> 
> 标签：jquery, svg

嗨，我有下一个 svg 字符串 str=

```
<svg width="612" height="394" xmlns="http://www.w3.org/2000/svg">
 <g>
     <title>Layer 1</title>
     <rect id="svg_1" height="152" width="265" y="44" x="91" stroke-width="5" stroke="#000000" fill="#FF0000"/>
 </g>
 <g>
     <title>Layer 2</title>
     <rect id="svg_2" height="125" width="151" y="157" x="399" stroke-width="5" stroke="#000000" fill="#FF0000"/>
 </g>
</svg> 
```

为了获得第一个矩形的宽度和高度，我可以使用 javascript+jquery：

```
alert("width:"+$(str).find('g:eq(0) rect:eq(0)').attr('width'));
alert("height:"+$(str).find('g:eq(0) rect:eq(0)').attr('height')); 
```

我想找到我尝试过的 .getBoundingClientRect() 或 .getBBox() 相同的用途：

```
alert("height"+$(str).find('g:eq(0) rect:eq(0)').getBoundingClientRect().width);
alert("height"+$(str).find('g:eq(0) rect:eq(0)').getBBox().width); 
```

但它不起作用。有人知道解决方案吗？如何使用 getBoundingClientRect 和 getBBox 以及我的字符串 str？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T20:14:40.253

jQuery 返回一个 jQuery 对象，您需要实际的 DOM 元素。为此，您可以`[0]`在选择器之后简单地添加：

```
alert("height"+$(str).find('g:eq(0) rect:eq(0)')[0].getBoundingClientRect().width);
alert("height"+$(str).find('g:eq(0) rect:eq(0)')[0].getBBox().width); 
```

请注意，要获得尺寸，必须将元素添加到 DOM，它不应该只是一个字符串。

此外，一种更快、更优雅的方法是......

```
//no need to indicate the first element since querySelector already does this;
var el = str.querySelector('g rect');
alert( "width: " + el.getBoundingClientRect().width );
alert( "width: " + el.getBBox().width ); 
```

# c++ - C++：模板 fstream.write 不起作用

> ID：14482751
> 
> 赞同：0
> 
> 时间：2013-01-23T15:04:42.973
> 
> 标签：c++, stream

我在处理 C++ 中的随机访问文件类时遇到问题，它应该允许从文件中写入和读取任何原始数据类型。但是，即使代码编译并执行，也不会向文件写入任何内容。

文件在构造函数中打开：

```
RandomAccessFile::RandomAccessFile(const string& fileName) : m_fileName(fileName) {
// try to open file for reading and writing
m_file.open(fileName.c_str(), ios::in|ios::out|ios::binary);
if (!m_file) {
    // file doesn't exist
    m_file.clear();
    // create new file
    m_file.open(fileName.c_str(), ios::out | ios::binary);
    m_file.close();

    // try to open file for reading and writing
    m_file.open(fileName.c_str(), ios::in|ios::out|ios::binary);
    if (!m_file) {
        m_file.setf(ios::failbit);
    }
} 
```

}

测试 main 中的函数调用：

```
RandomAccessFile raf("C:\Temp\Vec.txt");
char c = 'c';
raf.write(c); 
```

写函数：

```
template<class T> 
void RandomAccessFile::write(const T& data, streampos pos) {
if (m_file.fail()) {
    throw new IOException("Could not open file");
}

if (pos > 0) {
    m_file.seekp(pos);
}
else {
    m_file.seekp(0);
}

streamsize dataTypeSize = sizeof(T);
char *buffer = new char[dataTypeSize];
for (int i = 0; i < dataTypeSize; i++) {
    buffer[dataTypeSize - 1 - i] = (data >> (i * 8));
}
m_file.write(buffer, dataTypeSize);
delete[] buffer; 
```

}

如果我调试它，我可以清楚地看到“c”在写入文件时在缓冲区中。有什么建议么？

谢谢菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:45:20.387

靠一点运气自己解决了。显然， fstream.open 不适用于绝对路径。用“temp”替换“C.\temp\vec.txt”解决了它。

# java - 将二维数组作为一个整体进行排序

> ID：14482752
> 
> 赞同：1
> 
> 时间：2013-01-23T15:04:43.903
> 
> 标签：java, arrays, sorting, multidimensional-array

我有一个二维数组可以使用 Java 作为一个整体进行排序。

我查看了各种链接 如何使用比较器[对二维 ArrayList 进行排序。](https://stackoverflow.com/questions/10035447/how-to-sort-a-two-dimension-arraylist)

但它总是按特定元素排序。我希望能够对整个二维数组进行排序。例如，

```
int[][] r = {{1,7,5},{1,3,5},{1,3,6}, {2,3,1}}; 
```

关于排序应该给我

```
{1,2,3},{1,3,5},{1,3,6},{1,5,7}. 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:11:17.027

您需要的是一个自定义比较器，它允许根据您的标准比较两个整数列表。

在使用此比较器进行排序之前，您必须先对列表本身进行排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:18:16.480

这就是我在 Java 中的做法：

```
private static void sortArray(int[][] array) {
    // Perform initial sorting
    for (int[] subArray : array) {
        Arrays.sort(subArray);
    }

    // Sort each array by its contents (similar to string sorting)
    Arrays.sort(array, new Comparator<int[]>() {
        @Override
        public int compare(int[] o1, int[] o2) {
            int length = Math.min(o1.length, o2.length);
            for (int i = 0; i < length; i++) {
                if (o1[i] > o2[i]) return 1;
                if (o1[i] < o2[i]) return -1;
            }

            // Longer arrays come after shorter arrays, but only if the rest is equal
            if (o1.length > o2.length) return 1;
            if (o1.length < o2.length) return -1;

            return 0;
        }
    });
} 
```

第一步是对二维数组里面的所有数组进行排序，然后根据二维数组里面每个数组的内容对整个数组进行排序。比较器的工作方式类似于您对区分大小写的字符串比较器的期望。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T15:23:15.433

这将满足您的需求：

```
Arrays.sort(array, new Comparator<int[]>() {
    @Override
    public int compare(int[] o1, int[] o2) {
        Arrays.sort(o1);
        Arrays.sort(o2);
        for (int i = 0; i < o1.length && i < o2.length; i++) {
            if (o1[i] != o2[i]) {
                return o1[i] < o2[i] ? -1 : 1;
            }
        }
        if (o1.length != o2.length) {
            return o1.length < o2.length ? -1 : 1;
        }
        return 0;
    }
}); 
```

# msbuild - 如何停止 TFS 在每次构建时创建一个新文件夹

> ID：14482755
> 
> 赞同：2
> 
> 时间：2013-01-23T15:05:00.270
> 
> 标签：msbuild

我在 TFS 2012 中有一个构建定义，它当前将构建放到一个网络共享上，该共享将用作网站根文件夹。

问题是它每次都根据版本号创建一个新文件夹。我想保留版本编号，但只需明确并一遍又一遍地部署到同一个文件夹，这样我就不必在 IIS 中更改任何内容。文件夹就像 -

*   构建20130123.1
*   构建20130123.2

每个都包含一个完整的部署。我只需要一个文件夹，每次构建时都将所有内容都转储到其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:47:14.473

您正在尝试做的是违反构建系统的直觉，因为它不仅会将构建的工件放入该文件夹中，而且当满足保留策略时，它会尝试删除这些工件。因此，如果您这样做，您需要将保留策略设置为始终保留，这样它就不会尝试删除此文件夹的内容。您最好在复制后添加手动复制到此静态文件夹，该文件夹不受保留策略的约束，因为它对此一无所知。但是，如果您希望在主序列中打开模板时，您会看到一个名为“更新放置位置”的子序列。有 3 项，中间一项是 if 语句，用于 if drop build 和 Build Reason 被触发，深入到 then 一侧，你会发现一个序列，其中包含一个名为 Set Drop Location 的活动。右键单击其属性，您将看到路径字符串当前是如何组合在一起的，将此字符串调整为您想要的，然后该值将通过构建模板传播

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:08:37.527

您可以使用 2012 sp1 中的新功能，让您将输出置于 TFS 源代码管理中，然后您只需手动运行 TFS GET 命令或通过更新的工作流调用来更新您网站位置的最新文件和二进制文件。下图中的选项 3。

[**2012 MSDN-选择暂存位置并设置放置文件夹**](http://msdn.microsoft.com/en-us/library/vstudio/bb778394.aspx) ![在此处输入图像描述](../Images/74a915ad788eb7c0eedf24055736f6d6.png)

# c# - 具有字符串属性的 JSON 对象通过 Web 方法传递到具有相应 Int 属性转换/设置错误的 C# 类

> ID：14482756
> 
> 赞同：0
> 
> 时间：2013-01-23T15:05:19.170
> 
> 标签：c#, asp.net, json

我将 JSON 对象传递给 ASP.NET Web 方法，其中 Web 方法将类作为参数。该类有一个 int 属性，问题是如果客户端不输入值，它会作为空字符串传递给服务器，Web 服务器无法正确处理它。我已经尝试使用`int.TryParse(value.ToString().Trim(), out temp);`但我仍然收到以下错误`is not valid value for Int32.`。所以我的问题是，当将空字符串传递给它时，如何将 int 属性设置为默认值 0？我必须将属性更改为字符串吗？

客户端 JSON 对象

```
{ q: { "Quantity": "" } } 
```

服务器端 Web 方法

```
[WebMethod]
public ResponseType MethodName(MyClass q)
{
    return Something();
} 
```

C# 类

```
public class MyClass
{
    private int _Quantity = 0;
    public int Quantity
    {
        get { return _Quantity; }
        set
        {
            int temp = 0;
            int.TryParse(value.ToString().Trim(), out temp);
            _Quantity = temp;
        }
    }
} 
```

一如既往，任何帮助表示赞赏！

* * *

更新

我更改了我的类，以便属性是 a`string`但是在`get`字符串被解析为 int 然后转换回 a `string`。它有效，但这是最有效的方法吗？

C# 类

```
public class MyClass
{
    private string _Quantity = string.Empty;
    public string Quantity
    {
        get
        {
            int temp = 0;
            int.TryParse(_Quantity, out temp);
            return temp.ToString();
        }
        set
        {
            _Quantity = value.ToString().Trim();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:25:54.463

您的模型似乎没有反映您显示的 JSON。您可以使用可为空的整数：

```
public class MyClass
{
    public QuantityModel Q { get; set; }
}

public class QuantityModel
{
    public int? Quantity { get; set; }
} 
```

接着：

```
[WebMethod]
public ResponseType MethodName(MyClass q)
{
    return Something();
} 
```

这与您的 JSON 不完全匹配，因为其中 Quantity 是一个字符串，但如果您为其传递有效的整数，JavaScriptSerializer 将起作用。显然，如果您传递无效值，它将崩溃，例如`{ q: { "Quantity": "foo_bar" } }`.

# dart - JSON.parse to Map howto（新语法 0.3.1_r17328）

> ID：14482761
> 
> 赞同：3
> 
> 时间：2013-01-23T15:05:24.870
> 
> 标签：dart

请问下面的新语法是什么？：

```
Map mAcctData = JSON.parse(sResponse);    // sResponse is Json String 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:13:14.917

`parse`(and `stringify`) 已移至顶级函数。

```
import 'dart:json' as JSON;  // note the JSON name

main() {
  var text = // some text...
  var map = JSON.parse(text); // using the JSON name
} 
```

或者

```
import 'dart:json'; // note, no JSON name

main() {
  var text = // some text...
  var map = parse(text); // calling parse as a top-level function.
} 
```

# php - PHP 在 php/plaintext 混合模式下吃掉换行符

> ID：14482765
> 
> 赞同：6
> 
> 时间：2013-01-23T15:05:35.950
> 
> 标签：php, text

这个问题困扰了我一段时间。假设我们有一个简单的 PHP 文件：

```
Line 0
Line 1
<?="Line 2"?>
Line 3 
```

处理此文件将导致：

```
Line 0
Line 1
Line 2Line 3 
```

换行后`?>`去哪里了？在结束标记（例如 ）之后放置一些字符时，换行符不会被吞噬`?>.`。

有没有办法控制这种行为？我不愿意在结束标记之后放置空格，因为我的 IDE 配置为在换行符之前删除空格（我喜欢这样）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:11:58.237

确实是的：

> 如果存在，该块的结束标记将包括紧随其后的换行符。
> 
> [http://php.net/manual/en/language.basic-syntax.instruction-separation.php](http://php.net/manual/en/language.basic-syntax.instruction-separation.php)

意思是，如果`?>`是该行的最后一件事，则换行符将作为关闭 PHP 块的一部分被删除。您需要显式`echo`换行或添加额外的换行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T15:12:06.790

这[实际上是一个功能](http://php.net/manual/en/language.basic-syntax.instruction-separation.php)（信不信由你）。如果直接跟在 PHP 结束标记之后，PHP 会使用换行符：

> 如果存在，该块的结束标记将包括紧随其后的换行符。

这很明显是为了让以空行结尾的 PHP 文件不会导致当`include`d 从另一个脚本时在输出中出现换行符。因此，在可预见的未来，这确实是一个“保护无知”的功能，我们必须忍受过去的日子。

如果您真的想要换行符，还有其他选择：从简单地在结束标记后添加*两个换行符（第二个可以工作！）到从代码中回显一个换行符。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:11:14.283

在`<?php`and`?>`标记之外，PHP 解释器在 HTML 模式下运行，HTML 模式内的间距问题比文本内容的问题要小。

要使用 PHP 生成文本，您应该使用纯字符串并以这种方式构建输出：

```
$var = "Line 2";
$s = "Line 0\nLine 1\n$var\nLine3"; 
```

至少这不会给你一个令人讨厌的，虽然有[记录](http://php.net/manual/en/language.basic-syntax.instruction-separation.php)的，惊喜:)

# drupal - drupal-6 表单 API 添加到模块页面

> ID：14482769
> 
> 赞同：0
> 
> 时间：2013-01-23T15:05:42.310
> 
> 标签：drupal, drupal-6

我制作了一个表单模块（仅显示了部分），并想在表单中的问题之间添加一些文本，所以我写了以下内容，但没有出现“文本在这里”文本。

```
... $form['name1'] = array(
    '#type' => 'textfield',
    '#title' => t('Name'),
    '#collapsible' => TRUE,
    '#collapsed' => FALSE,
  );

?><html><p>Text is here </p></html><?

  $form['name2'] = array(
    '#type' => 'textfield',
    '#title' => t('Name'),
    '#collapsible' => TRUE,
    '#collapsed' => FALSE, ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:20:01.940

这不起作用的原因之一是，在您的函数中，您正在为 Drupal 构建一个表单数组来渲染，而不是自己实际输出表单。因此，当您跳出 php 并输出 HTML 时，它将在 Drupal 运行您的函数时输出。

您要做的是添加一个标记类型的表单项。请参阅[表单 API](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/6#markup)

此外，半无关的#collapsible 和#collapsed 属性仅适用于字段集。

所以你的代码会喜欢这样的东西。

```
$form['name1'] = array(
    '#type' => 'textfield',
    '#title' => t('Name'),
  );

  $form['betweenfields-html'] = array(
   '#value' => '<p>Text is here </p>',
 );

  $form['name2'] = array(
    '#type' => 'textfield',
    '#title' => t('Name'),
  ); 
```

# linux - How ro reset fedora?

> ID：14482770
> 
> 赞同：-3
> 
> 时间：2013-01-23T15:05:42.913
> 
> 标签：linux, unix, fedora

I want to reset Fedora so it appears as it was reinstalled, but without the cd.

I have many issues with it so I want to start with a blank page ! :D

Is it posible to do this in fedora, without reinstalling it from cd ?

I dont want to save any files !!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:15:28.923

仅当您运行 fedora`Virtual Machine`并拥有`snapshot backup`. 或者你有完整的系统备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T02:57:39.557

这取决于。

当您使用您的 Fedora 发行版时，您是否以普通（非 root）用户的身份使用它？还是您以root用户身份使用它？

非 root 用户通常只允许修改其主目录中的文件。这意味着如果您以非 root 用户身份使用 Fedora，您所做的任何更改都仅限于您的主目录。您可以简单地删除该目录并重新创建它，最终结果将就好像它是一个新的 Fedora 安装。

# xcode - How do you set the main program in xcode when using pascal?

> ID：14482772
> 
> 赞同：1
> 
> 时间：2013-01-23T15:05:47.113
> 
> 标签：xcode, macos, pascal

I am getting the following error using xcode with pascal:

```
warning: It seems your project only contains units and no main program 
```

What causes this warning? And how do I set the main program?

I am using: `Xcode 4.5.2`, `Free Pascal Compiler version 2.6.0`, and `Mac OSX 10.8`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:47:09.460

如果我正确理解了这个问题，那么您将错过`.dpr`告诉编译器应该构建什么类型的项目的（项目文件）。Delphi（以及之前的 Borland Pascal 和 Turbo Pascal 编译器）的项目文件通常如下所示：

```
{ For a GUI (Windows) application }
program MyProgram;

uses
  Forms,
  main in 'main.pas' {fMain};

{$R *.RES}

begin
  Application.Initialize;
  Application.CreateForm(TfMain, fMain);
  Application.Run;
end.

{ For a console application }
program MyProgram;
{$APPTYPE CONSOLE }    

uses
  MyMain, SysUtils;

begin
  try
    { 
       Execute your application's entry point (main()) here, in this case
       contained in MyMain.pas that's listed in the uses clause above.
    }
  except
    { Handle any exception here }
  end;
end. 
```

然后在 Delphi XE2 中运行`dpr2xcode.exe`以创建相应的 Xcode 项目。（我不知道 FreePascal 中的相应步骤是什么，但您可能会在 FP 安装中寻找类似的内容。）在 Mac 上打开该`.xcodeproj`文件`Xcode`，然后运行或调试代码。

有关使用 FreePascal 和 Xcode 的具体信息，我推荐 Phil Hess 的[一系列文章](http://web.me.com/macpgmr/ObjP/Xcode4/ObjP_Info.html)。

# apache - Remove www and add https to a domain

> ID：14482777
> 
> 赞同：1
> 
> 时间：2013-01-23T15:05:56.973
> 
> 标签：apache, .htaccess

I have [http://www.example.com](http://www.example.com) and I want it to be [https://example.com](https://example.com).

I'm using the following .htaccess rule but it's not redirecting properly from [https://www.example.com](https://www.example.com)

```
RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
RewriteRule ^(.*)$ https://example.com/$1 [R=301,L]

RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

# java - Problems with java swing component listener

> ID：14482780
> 
> 赞同：0
> 
> 时间：2013-01-23T15:06:19.740
> 
> 标签：java, swing, alignment, awt, componentlistener

I'm creating a GUI in netbeans and am attempting to make it so that the components stay properly aligned when the frame is resized, minimized, maximized, etc. I've added a component listener to do this and have added the code to both formComponentMoved and formComponentResized. This works perfectly when the form is resized or moved, the problem is it doesn't work when the form is maximized or minimized. I've attached below the code for the component listener. What am I missing here?

```
private void formComponentResized(java.awt.event.ComponentEvent evt) {                                      
     jSplitPane1.setSize(new Dimension((int)(this.getWidth()*.98), (int)(this.getHeight()*.6)));
     jSplitPane1.setDividerLocation(jSplitPane1.getWidth()/2);
     jPanel1.setSize(new Dimension(jSplitPane1.getWidth()/2, jSplitPane1.getHeight()));
     jPanel2.setSize(new Dimension(jSplitPane1.getWidth()/2, jSplitPane1.getHeight())); 
     zoomToPeak.setLocation(jPanel2.getX() + 5, jPanel2.getY() + jPanel2.getHeight() + 30);
     peak.setLocation(zoomToPeak.getX() + zoomToPeak.getWidth() + 10, zoomToPeak.getY() + 1);

}                                     

private void formComponentMoved(java.awt.event.ComponentEvent evt) {                                    
    jSplitPane1.setSize(new Dimension((int)(this.getWidth()*.98), (int)(this.getHeight()*.6)));
    jSplitPane1.setDividerLocation(jSplitPane1.getWidth()/2);
    jPanel1.setSize(new Dimension(jSplitPane1.getWidth()/2, jSplitPane1.getHeight()));
    jPanel2.setSize(new Dimension(jSplitPane1.getWidth()/2, jSplitPane1.getHeight())); 
    zoomToPeak.setLocation(jPanel2.getX() + 5, jPanel2.getY() + jPanel2.getHeight() + 30);
    peak.setLocation(zoomToPeak.getX() + zoomToPeak.getWidth() + 10, zoomToPeak.getY() + 1);
} 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:08:35.627

您缺少布局管理器。它们是保持组件对齐的正确方法。

# python - virtualenv: same version of BeautifulSoup returns different results

> ID：14482781
> 
> 赞同：2
> 
> 时间：2013-01-23T15:06:21.390
> 
> 标签：python, beautifulsoup

I have a beautifulSoup installed one in general Python path and another in virtualenv

```
beautifulsoup4  - 4.1.3        - active  # in general Python installation 
```

and

```
beautifulsoup4  - 4.1.3        - active # in virtualenv path 
```

I run the following code in both the environments

```
import urllib2
import unicodedata
from bs4 import BeautifulSoup
from collections import Counter
soup = BeautifulSoup(urllib2.urlopen('http://www.thehindu.com/news/cities/bangalore/aero-india-takes-off-on-february-6/article4329776.ece').fp) 
```

In general Python installation, it gives me

```
>>> soup.select('.article-text .body')
[<p class="body"> It is that time when aviation buffs get ready to take off to the Air Force Station in Yelahanka here when the ninth edition of Aero India will be inaugurated by Defence Minister A.K. Antony on February 6.</p>, <p class="body">They can watch aerobatics by, among others, the Flying Bulls from the Czech Republic and Russian Knights — the Russian Air Force Aerobatic Team will complement Indian Air Force’s Sarang Aerobatic Team — at the biennial event that provides a platform for Indian and foreign vendors.</p>, <p class="body">However, IAF’s pride — the Surya Kiran Aerobatic Tea — which has performed to huge plaudits from the audience in the previous shows, will not be there for the country’s premier air show, a press release said.</p>, <p class="body">All exhibition space has been sold out and this edition is expected to see the participation of over 600 companies and 768 overseas delegations. </p>, <p class="body">The largest overseas participation is from the U.S. followed by Israel and Russia. The other major participants include France, the U.K., Germany and Belgium, Bulgaria, Italy, Ukraine, Australia, Belarus, Czech Republic, Japan, Norway, South Africa, Spain, Switzerland, Austria, Brazil, Canada, The Netherlands, Romania, Sweden, Singapore and the UAE.</p>, <p class="body">Organised by the Department of Defence Production, the five-day show aims at promoting products and services being offered by the Indian Defence industry in the international market.</p>]
>>> 
```

while in virtualenv environment, it shows nothing

```
>>> soup.select('.article-text .body')  
[] 
```

What is causing this problem? How do I fix it in virtual env?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:47:29.443

此问题的最常见原因是[一个环境安装了另一个缺少的解析器库](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#other-parser-problems)。检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T16:22:10.860

我刚刚遇到了同样的问题。对我有用的解决方案是明确指出解析器。就我而言，这是： `soup = BeautifulSoup(markup, "html5lib")`

# linux - Shell Scripting - Hour and Minute Computation

> ID：14482784
> 
> 赞同：0
> 
> 时间：2013-01-23T15:06:30.957
> 
> 标签：linux, shell

I am working on a shell script computation program wherein I want a script that computes for the total number of hours and minutes a particular user has been logged on to the system. The script accepts one parameter, the login name. Information like the complete name of the user, the current month and the dates the user logged on earliest during the month and the latest during the month. In the pseudo, I wanted somewhat like this:

```
[prompt]$   <your familyname>user_login  mycroft<enter>

For the Month of June :
         User :   mycroft
In Real life :   Mycroft Holmes
      period :    Mon Jun 16 to Sat Jun 28
total login time :   2 hours and 2 minutes 
```

Is there a possible way to do this in Shell? I have been on blanks and errors until now.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:14:02.717

看`who`或`finger`编程。可能这就是你所需要的。

# android - SOAP web service call from android

> ID：14482788
> 
> 赞同：0
> 
> 时间：2013-01-23T15:06:41.157
> 
> 标签：android, web-services, android-emulator, ksoap2

Could anyone please help in processing the SOAP request and response from an android application.

I have followed the tutorial at [http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

But when I run the application, it exits prematurely with the error

Unfortunately, has stopped.

I am running it in an emulator.

Can anyone please explain what I might be missing. Any example source code will be very useful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:58:05.743

我有一个简单的代码给你。我们有一个按钮，我们将调用 helloworld 方法。

按钮世界方法；

```
 private static final String SOAP_ACTION1 = "http://tempuri.org/HelloWorld";
private static final String HelloWorldmethod = "HelloWorld";

    private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://192.168.1.5/MobileDemo/Demo.asmx";

    @Override
protected void onCreate(Bundle savedInstanceState) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webservices_layout);

    Worldmethod= (Button)findViewById(R.id.Worldmethod);

            Worldmethod.setOnClickListener(this);

             @Override
           public void onClick(View v) {

    switch (v.getId()){
    case R.id.Worldmethod:

    try
    {

    methodbody= (TextView)findViewById(R.id.methodbody);

    SoapObject request1 = new SoapObject(NAMESPACE, HelloWorldmethod);

    // add paramaters and values

    SoapSerializationEnvelope envelope = new         SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request1);

    //Web method call
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.debug = true;

    androidHttpTransport.call(SOAP_ACTION1, envelope);

    //get the response
    SoapPrimitive result= (SoapPrimitive)envelope.getResponse();

    String results = result.toString();
    methodbody.setText( ""+results); 

           }
    catch (Exception e)
    {
    methodbody.setText(e.getMessage());
    e.printStackTrace();
        }
    break;

       }

} 
```

# .htaccess - Redirect to WWW if directory and file not found

> ID：14482790
> 
> 赞同：2
> 
> 时间：2013-01-23T15:06:47.610
> 
> 标签：.htaccess, redirect

I've found a few answers but none of them seem to be able to answer my problem. On my server we use non-www for asset serving and www subdomain is cnamed to our bigcartel store. What I'm trying to do is serve files from the non-www page if file is found, else redirect to the www subdomain with original request.

eg: `redirect domainname.com/product-name` to `www.domainname.com/product-name` because it doesn't exist on our asset server.

I've tried the following; but I've had no luck.

```
RewriteEngine On
RewriteBase /

# do not do anything for already existing files
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST} ^domainname\.com [NC]
RewriteRule (.*) http://www.domainname.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:12:18.897

你的逻辑条件倒退了。当条件说：请求的资源是现有文件、现有符号链接或现有目录时，您似乎正在重定向。你想要相反的：

```
RewriteEngine On
RewriteBase /

# do not do anything for already existing files
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} ^domainname\.com [NC]
RewriteRule (.*) http://www.domainname.com/$1 [R=301,L] 
```

# r - 在 R 中通过更好的可视化来寻找模式

> ID：14482794
> 
> 赞同：-4
> 
> 时间：2013-01-23T15:07:06.497
> 
> 标签：r, visualization, time-series

我有以下时间序列数据。它有 60 个数据点，如下所示。请在下面查看此数据的简单图。我正在使用 R 来绘制它。我认为如果我在图中的点上画一条移动平均曲线，那么我们可以更好地理解数据中的模式。我不知道如何在 R 中做到这一点。有人可以帮我做到这一点。此外，我不确定这是否是识别模式的好方法。如果有更好的方法，也请建议我。谢谢你。

```
x <- c(18,21,18,14,8,14,10,14,14,12,12,14,10,10,12,6,10,8,
       14,10,10,6,6,4,6,2,8,6,2,6,4,4,2,8,6,6,8,12,8,8,6,6,2,2,4,
       4,4,8,14,8,6,6,2,6,6,4,4,8,6,6) 
```

![图形](../Images/8fb7b9a266732a1f51ad7ac5f6f341d2.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:34:33.953

要回答您的问题，您可以在其中`moving averages`的帮助下完成它。`rollmean``zoo`

`From Joshua's comment:`您还可以查看`TTR`依赖于`xts`依赖的包`zoo`。此外，包中还有其他移动平均线`TTR`：检查`?MA`。

```
require(TTR)
# assuming your vector is loaded in dat
# sliding window / moving average of size 5
dat.k5 <- rollmean(dat, k=5) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T15:40:46.903

一种合理的可能性：

```
d <- data.frame(x=scan("tmp.dat"))
qplot(x=seq(nrow(d)),x,data=d)+geom_smooth(method="loess") 
```

**编辑**：从评论移到答案，基于[https://meta.stackexchange.com/questions/164783/why-was-a-seemingly-relevant-non-offensive-comment-removed](https://meta.stackexchange.com/questions/164783/why-was-a-seemingly-relevant-non-offensive-comment-removed)

关于“这是识别模式的好方法”（这对于 StackOverflow 来说有点离题，但无论如何）；我认为滚动方法是完全值得尊敬的，尽管确实存在更复杂的方法（例如此处显示的局部加权回归 [loess/lowess]）。然而，在我看来，这里并没有太多复杂的模式需要检测：数据似乎最初随着时间的推移而下降，然后趋于平稳。滚动方式和更复杂的方法可能看起来更漂亮，但我认为它们不会在这个数据集中识别出任何更深层次的模式......

如果您想一次对多个数据集执行此类操作（如您的评论中所示），您可能会喜欢`ggplot`自动生成同一图的多线或多面版本的功能。

# vb.net - Get caption of handle

> ID：14482796
> 
> 赞同：1
> 
> 时间：2013-01-23T15:07:08.353
> 
> 标签：vb.net, winforms, pinvoke

I got all `Child Windows` of *handle*,
Now I want to get the caption of every Child Window by handle.
my code:

```
 For Each p As Process In Process.GetProcessesByName("MyProccess")
            Dim ChildrenList As New List(Of IntPtr)
            ChildrenList = GetChildWindows(p.MainWindowHandle)
            MsgBox(ChildrenList.Count) ' = 343
            For Each hh As IntPtr In ChildrenList

                 '  i want to do something like: MsgBox(getCaption(hh))

            Next
        Next 
```

How can I do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:29:35.787

**Source** : [#1](http://www.pinvoke.net/default.aspx/user32/GetWindowText.html) & [#2](http://www.pinvoke.net/default.aspx/user32/GetWindowTextLength.html)

* * *

By caption i hope you mean "The window Title text"

you have already created a list of window handle of child windows

for rest will be easy

```
 <DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function GetWindowText(ByVal hwnd As IntPtr, ByVal lpString As StringBuilder, ByVal cch As Integer) As Integer
    End Function
    <DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function GetWindowTextLength(ByVal hwnd As IntPtr) As Integer
    End Function

    Public Function GetText(ByVal hWnd As IntPtr) As String
        Dim length As Integer
        If hWnd.ToInt32 <= 0 Then
            Return Nothing
        End If
        length = GetWindowTextLength(hWnd)
        If length = 0 Then
            Return Nothing
        End If
        Dim sb As New System.Text.StringBuilder("", length + 1)

        GetWindowText(hWnd, sb, sb.Capacity)
        Return sb.ToString()
    End Function 
```

Usage :

```
 For Each p As Process In Process.GetProcessesByName("MyProccess")
            Dim ChildrenList As New List(Of IntPtr)
            ChildrenList = GetChildWindows(p.MainWindowHandle)
            MsgBox(ChildrenList.Count) ' = 343
            For Each hh As IntPtr In ChildrenList

                 Dim caption As String = GetText(hh)
                 ' use the caption the way u want

            Next
        Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:27:12.860

[`GetWindowText`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633520.aspx)您可以使用该函数获取窗口的标题。你需要 p/invoke 到它。您可以在[pinvoke.net](http://www.pinvoke.net/default.aspx/user32.getwindowtext)找到示例代码。

# c# - 在 C# 中返回基类

> ID：14482799
> 
> 赞同：1
> 
> 时间：2013-01-23T15:07:16.920
> 
> 标签：c#, inheritance, base

如何返回基类形式的数据？

```
A aclass = new A();
B bclass = aclass.GetB(); 
```

不起作用。

```
public class B
{
    protected string str1;
    protected string str2;
}

public class A:B
{
    public A()
    {
         base.str1 = "A";
         base.str2 = "B";
    }

    public B GetB()
    {
        return base;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T15:14:14.747

`GetB()`完全没有必要。`B bclass = aclass;`已经足够`aclass`了`B`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T15:08:32.843

我不是 C# 专家，但`return this;`应该可以工作。不过，我真的不明白这样做的意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:10:10.477

我强烈建议不要使用以下代码，而是更改类的行为，但答案如下：

```
public B GetB()
{
    return this as B;
} 
```

而是编写一个独特的方法来返回转换为基类的对象，您可以使用以下内容；

```
public class B
{
    protected string str1;
    protected string str2;
}

public class A : B
{
    public A()
    {
        str1 = "A";
        str2 = "B";
    }
} 
```

你可以使用如下;

```
A a = new A();
B b = a; 
```

# php - Laravel：按电子邮件域名排序

> ID：14482804
> 
> 赞同：0
> 
> 时间：2013-01-23T15:07:40.873
> 
> 标签：php, database, laravel

我正在使用 laravel 并试图弄清楚如何用 fluent / eloquent (laravel) 运行这个查询

```
select email, SUBSTRING_INDEX(email,'@',-1) AS domain from epost order by domain desc; 
```

我的目标是通过域 namn 进行排序，而不仅仅是从字符串的开头进行排序。

```
return Email::order_by('email', 'desc'); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:42:26.590

我现在使用这个字符串让它工作

```
return Epost::orderby(\DB::raw("SUBSTRING_INDEX(email,'@',-1)"), "desc")->get(); 
```

# jquery - jQuery：ajax 和自动完成失败

> ID：14482807
> 
> 赞同：0
> 
> 时间：2013-01-23T15:07:48.700
> 
> 标签：jquery, jquery-ui

我正在尝试将 ajax 请求与自动完成功能结合起来。但是自动完成似乎有问题。我正在使用[它](http://jqueryui.com/autocomplete/)来实现我的代码。

**控制台给了我类似的东西：`http://domain.com/[%22...array from ajax here]?term=What i put in my input`**指向 403 错误 -.-

虽然对我来说似乎很简单，但我有点迷失了。

```
 <script type='text/javascript'>
      $("input[name=search]").on('keyup', function(){
         jQuery.ajax({
           type: 'POST', // Le type de ma requete
           <?php echo "url: '".PTC.ROOT.DS."ajax'"; ?>, // URL to call (works)
           data: {
             search: ''+$("input[name=search]").val()+''
           }, 
           success: function(data, textStatus, jqXHR) {

             window.availableNames = data; //JSON format
             $(function() {
              alert(window.availableNames); //Show the JSON encoded table with the right result.

              $("input[name=search]").autocomplete({source: window.availableNames}); // Fails.
             });
           },
           error: function(jqXHR, textStatus, errorThrown) {
           }
         });
      });
      </script> 
```

谢谢

编辑：单独的 Ajax 工作和自动完成工作。但是当我尝试将第二个合并到第一个时，它确实如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:02:34.460

自动完成可以选择提供一个 url 作为[源参数](http://docs.jquery.com/UI/API/1.8/Autocomplete#overview)

> 使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。它可以在同一台主机上，也可以在不同的主机上（必须提供 JSONP）。自动完成插件不会过滤结果，而是将请求参数“term”添加到 URL，服务器端脚本应该使用它来过滤结果。数据本身可以采用与上述本地数据相同的格式。

因此，请确保位于提供的 url 的 api 端点返回 json 并对“term”参数做出正确反应。

这样您就不必摆弄自己的 ajax 调用。

所以你的自动完成代码看起来像这样：

```
$("input[name=search]").autocomplete({source: '<?php echo PTC.ROOT.DS."ajax"; ?>'}); 
```

# ios - unknown property attribute 'atomic'

> ID：14482810
> 
> 赞同：0
> 
> 时间：2013-01-23T15:07:55.600
> 
> 标签：ios, xcode, fmdb

When i use FMDB test demo in xcode4.2, everything is good. But when I run the demo in xcode 3.2.6, it gives the error:"unknown property attribute 'atomic'"

```
 __unsafe_unretained id _delegate;

    NSUInteger          _maximumNumberOfDatabasesToCreate;
}

@property (atomic, retain) NSString *path;
@property (atomic, assign) id delegate;
@property (atomic, assign) NSUInteger maximumNumberOfDatabasesToCreate; 
```

How can I fix this error ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:11:01.690

据我记得只有 clang 支持的“原子”属性。使用 gcc 时，每个未声明为“非原子”的属性默认为“原子”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:11:50.347

`atomic`并`__unsafe_unretained`在 LLVM 3.0 中引入。如果您使用的是 Xcode 3.2.6，则您使用的是不支持这些关键字的旧版本的编译器。

您可以安全地删除`atomic`关键字，因为默认情况下属性是原子的；还有 remove `__unsafe_unretained`，因为它大致相当于`assign`在属性声明中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T23:13:43.767

您可以使用[Clang 的预处理器宏](http://clang.llvm.org/docs/LanguageExtensions.html#objective-c-features)来确定`atomic`在您的编译器中是否可用。如果`atomic`不支持该关键字，则省略它应该是安全的，因为无论如何 atomic 都是隐式行为。

```
#if __has_feature(objc_atomic)
@property (atomic, retain) NSString *path;
@property (atomic, assign) id delegate;
@property (atomic, assign) NSUInteger maximumNumberOfDatabasesToCreate;
#else
@property (retain) NSString *path;
@property (assign) id delegate;
@property (assign) NSUInteger maximumNumberOfDatabasesToCreate;
#endif 
```

# php - 看不到来自 PHP cURL api 调用的 XML 响应

> ID：14482818
> 
> 赞同：1
> 
> 时间：2013-01-23T15:08:35.563
> 
> 标签：php, xml, curl

我正在使用带有 cURL 和查询字符串的远程 API。我遇到的问题是我看不到返回给我的数据（采用 XML 格式）。首先，这是我的代码：

```
$url = 'https://api.somehost.com/GetRequest.do';
$query = 'User=JohnDoe&Password=ABC123&Function=auth';   

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $query);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
$curlresponse = curl_exec($ch); 
```

我知道 cURL 请求正在工作，因为如果我将密码更改为不正确的密码，我会收到回复（可以使用 print_r($curlresponse) 看到它，告诉我密码不正确。

但是，当我输入正确的密码时，当我 print_r($curlresponse) 时我什么也看不到，但我知道我正在接收数据，因为 print_r(curl_getinfo($ch)) 显示一个大的 download_content_length 这是我期待的数据. 我期待的数据是 XML 格式的。我只是不确定我错过了什么。

谢谢！

# ruby-on-rails - 适用于多种型号

> ID：14482827
> 
> 赞同：10
> 
> 时间：2013-01-23T15:08:55.057
> 
> 标签：ruby-on-rails

我有几个对象都有一个`approved`字段。

实现适用于所有模型的范围的最佳方法是什么？

例如，我有一个`sighting`对象和一个`comment`对象。在向公众提供之前，它们都必须得到管理员的批准。

那么如何创建一个既能返回又能分别返回的范围，`comment.approved`而不`sighting.approved`在每个模型上重复它呢？这就是担忧发挥作用的地方吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-23T15:57:45.703

如果您只想要范围功能，只需在每个模型中声明一个范围就可以了。如果您认为会发生这种情况，使用 an`ActiveSupport::Concern`将使您能够添加其他方法。这是一个例子：

```
# /app/models/concerns/approved.rb
module Approved
  extend ActiveSupport::Concern

  included do
    default_scope { where(approved: false) }
    scope :approved, -> { where(approved: true) }
  end

  def unapprove
    update_attribute :approved, false
  end
end

class Sighting < ActiveRecord::Base
  include Approved
end

class Comment < ActiveRecord::Base
  include Approved
end 
```

然后，您可以拨打电话`Sighting.approved`并`Comment.approved`获取相应的批准记录列表。您还可以获得该`unapprove`方法，并且可以执行类似`Comment.approved.first.unapprove`.

在这个例子中，我还包括`default_scope`了这意味着调用喜欢`Sighting.all`或`Comment.all`将只返回未经批准的项目。我将其作为示例包括在内，它可能不适用于您的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T20:54:56.590

虽然我注意到在连接范围时，从关注点中提取的范围必须是最后一个范围。我不太清楚为什么。

```
Comment.existing.approved 
```

当我尝试它时：

```
Comment.approved.existing 
```

它默默地失败了。

我收回了这一点。我正在迁移旧代码并使用带条件的范围而不是 lambda。当我替换 :conditions 时，范围顺序不再重要。

```
scope :existing, -> { where("real = 1") } 
```

更换

```
scope :existing, :conditions => "real = 1" 
```

# c++ - std::shared_ptr 线程安全

> ID：14482830
> 
> 赞同：58
> 
> 时间：2013-01-23T15:09:04.067
> 
> 标签：c++, std, shared-ptr

我读过

> “多个线程可以同时读取和写入不同的 shared_ptr 对象，即使这些对象是共享所有权的副本。” （[MSDN：标准 C++ 库中的线程安全](http://msdn.microsoft.com/en-us/library/c9ceah3b%28v=vs.100%29.aspx)）

这是否意味着更改 shared_ptr 对象是安全的？
例如，下一个代码是否被认为是安全的：

```
shared_ptr<myClass> global = make_shared<myClass>();
...

//In thread 1
shared_ptr<myClass> private = global;
...

//In thread 2
global = make_shared<myClass>();
... 
```

我可以确定在这种情况下线程 1`private`将具有线程 2 分配的原始值`global`或新值，但无论哪种方式，它都会对 myClass 具有有效的 shared_ptr？

==编辑==
只是为了解释我的动机。我想要一个共享指针来保存我的配置，并且我有一个线程池来处理请求。全局配置也是
如此。在开始处理请求时采用当前配置。正在更新配置。（仅适用于未来的请求） `global`
`thread 1`
`thread 2`

如果它有效，我可以以这种方式更新配置，而不会在请求处理过程中破坏它。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-23T17:05:54.887

你所读的并不意​​味着你认为它意味着什么。首先，尝试[shared_ptr](https://docs.microsoft.com/en-us/cpp/standard-library/shared-ptr-class)本身的 msdn 页面。

向下滚动到“备注”部分，您将了解问题的实质。基本上，a`shared_ptr<>`指向一个“控制块”，这是它如何跟踪`shared_ptr<>`实际指向“真实”对象的对象数量。所以当你这样做时：

```
shared_ptr<int> ptr1 = make_shared<int>(); 
```

虽然这里只有 1 次调用来通过 分配内存`make_shared`，但有两个“逻辑”块您不应该同样对待。一个是`int`存储实际值的，另一个是控制块，它存储了`shared_ptr<>`使它工作的所有“魔法”。

**只有控制块本身是线程安全的。**

为了强调，我把它放在了自己的位置上。的*内容*不是`shared_ptr`线程安全的，也不是写入同一个`shared_ptr`实例。这里有一些东西可以证明我的意思：

```
// In main()
shared_ptr<myClass> global_instance = make_shared<myClass>();
// (launch all other threads AFTER global_instance is fully constructed)

//In thread 1
shared_ptr<myClass> local_instance = global_instance; 
```

这很好，实际上您可以在所有线程中随心所欲地执行此操作。然后当`local_instance`被破坏时（通过超出范围），它也是线程安全的。有人可以访问`global_instance`，它不会有所作为。您从 msdn 中提取的代码段基本上意味着“对控制块的访问是线程安全的”，因此`shared_ptr<>`可以根据需要在不同的线程上创建和销毁其他实例。

```
//In thread 1
local_instance = make_shared<myClass>(); 
```

这可以。它*会*影响`global_instance`对象，但只是间接的。它指向的控制块将被递减，但以线程安全的方式完成。 `local_instance`将不再指向同一个对象（或控制块）`global_instance`。

```
//In thread 2
global_instance = make_shared<myClass>(); 
```

`global_instance`如果从任何其他线程（你说你正在做的）访问，这几乎肯定是不好的。如果你这样做，它需要一个锁，因为你正在写入任何地方`global_instance`，而不仅仅是从中读取。所以从多个线程写入一个对象是不好的，除非你已经通过锁保护它。`global_instance`因此，您可以通过从中分配新对象来读取该对象`shared_ptr<>`，但不能对其进行写入。

```
// In thread 3
*global_instance = 3;
int a = *global_instance;

// In thread 4
*global_instance = 7; 
```

的值`a`未定义。它可能是 7，也可能是 3，或者也可能是其他任何东西。实例的线程安全`shared_ptr<>`仅适用于管理`shared_ptr<>`彼此初始化的实例，而不是它们指向的实例。

为了强调我的意思，看看这个：

```
shared_ptr<int> global_instance = make_shared<int>(0);

void thread_fcn();

int main(int argc, char** argv)
{
    thread thread1(thread_fcn);
    thread thread2(thread_fcn);
    ...
    thread thread10(thread_fcn);

    chrono::milliseconds duration(10000);
    this_thread::sleep_for(duration);

    return;
}

void thread_fcn()
{
    // This is thread-safe and will work fine, though it's useless.  Many
    // short-lived pointers will be created and destroyed.
    for(int i = 0; i < 10000; i++)
    {
        shared_ptr<int> temp = global_instance;
    }

    // This is not thread-safe.  While all the threads are the same, the
    // "final" value of this is almost certainly NOT going to be
    // number_of_threads*10000 = 100,000\.  It'll be something else.
    for(int i = 0; i < 10000; i++)
    {
        *global_instance = *global_instance + 1;
    }
} 
```

A`shared_ptr<>`是确保多个对象*所有者*确保对象被破坏的机制，而不是确保多个*线程*可以正确访问对象的机制。您仍然需要一个单独的同步机制才能在多个线程中安全地使用它（例如[std::mutex](http://en.cppreference.com/w/cpp/thread/mutex)）。

考虑它的最佳方式 IMO 是`shared_ptr<>`确保指向同一内存的多个副本*本身*没有同步问题，但对指向的对象不做任何事情。就这样对待。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-03-14T03:45:11.900

为了补充 Kevin 所写的内容，C++14 规范对 shared_ptr 对象本身的原子访问提供了额外的支持：

> **20.8.2.6`shared_ptr`原子访问 [util.smartptr.shared.atomic]**
> 
> `shared_ptr`如果访问仅通过本节中的函数完成并且实例作为它们的第一个参数传递，则从多个线程对对象的并发访问不会引入数据竞争。

所以如果你这样做：

```
//In thread 1
shared_ptr<myClass> private = atomic_load(&global);
...

//In thread 2
atomic_store(&global, make_shared<myClass>());
... 
```

这将是线程安全的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T15:12:24.963

这意味着您将拥有一个有效`shared_ptr`的和有效的引用计数。

您正在描述尝试读取/分配给同一变量的 2 个线程之间的竞争条件。

因为这通常是未定义的行为（它仅在单个程序的上下文和时间中才有意义）`shared_ptr`无法处理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-03T22:59:06.457

读取操作不受它们之间的数据竞争的影响，因此只要所有线程*仅使用 const 方法*（包括创建它的副本），线程之间共享 shared_ptr 的相同实例是安全的。一旦一个线程使用非常量方法（如“将其指向另一个对象”），这种使用就不再是线程安全的。

OP 示例不是线程安全的，需要在线程 1 中使用原子加载。在线程 2 中使用原子存储（C++11 中的第 2.7.2.5 节）以使其成为线程安全的。

MSDN 文本中的关键词确实是*不同的 shared_ptr objects*，如先前的答案中所述。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-07T15:54:35.717

### 概括

*   **不同** `std::shared_ptr`的实例可以同时被多个线程读取和修改，即使这些实例是副本并且共享同一个对象的所有权。

*   **同一个** `std::shared_ptr`实例可以被多个线程同时读取。

*   **同一个** `std::shared_ptr`实例不能在没有额外同步的情况下被多个线程直接修改。但可以通过互斥体和原子来完成。

* * *

### 基本线程安全

该标准没有说明智能指针的线程安全性，特别是`std::shared_ptr`，或者它们如何帮助确保它。正如@Kevin Anderson 上面提到的，`std::shared_ptr`实际上提供了一种共享对象所有权并确保它被正确销毁的工具，而不是提供正确的并发访问。事实上，`std::shared_ptr`与任何其他内置类型一样，都受制于所谓的`basic thread-safety guarantee`. 在本文中定义[为](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2669.htm)：

> 基本的线程安全保证是要求标准库函数是可重入的，并且要求标准库类型对象的非变异使用不引入数据竞争。这对性能影响很小或没有影响。它确实提供了承诺的安全性。因此，实现需要这种基本的线程安全保证。

至于标准，有以下措辞：

[[16.4.6.10/3]](https://eel.is/c++draft/res.on.data.races#3)

> C++ 标准库函数不得直接或间接修改当前线程以外的线程可访问的对象，除非这些对象是通过函数的非常量参数直接或间接访问的，包括`this`.

由此可见，下面的代码必须被认为是线程安全的：

```
std::shared_ptr<int> ptr = std::make_shared<int>(100);

for (auto i= 0; i<10; i++){
    std::thread([ptr]{                        
    auto local_p = ptr;  # read from ptr
    //...
    }).detach(); 
} 
```

但是我们知道 a`std::shared_ptr`是一个*引用计数*指针，当使用计数变为零时，指向的对象将被删除。的引用计数块`std::shared_ptr`是标准库的实现细节。尽管上面有持续的操作（*读取*），但实现需要修改计数器。这种情况描述如下：

[[16.4.6.10/7]](https://eel.is/c++draft/res.on.data.races#7)

> 如果对象对用户不可见并且受到保护以防止数据竞争，则实现可以在线程之间共享它们自己的内部对象。

这就是 Herb Sutter[所说的](https://herbsutter.com/2014/01/13/gotw-95-solution-thread-safety-and-synchronization/) *内部同步*：

> 那么*内部同步*的目的是什么？只是对内部知道共享和内部拥有的部分进行必要的同步，但是调用者无法同步，因为他不知道共享并且不需要因为调用者不知道拥有它们，内部拥有。因此，在类型的内部实现中，我们进行了足够的*内部同步*，以回到调用者可以承担其通常的注意义务并以通常的方式正确同步任何可能实际共享的对象的级别。

因此，*基本线程安全*确保了不同实例上的所有操作（包括*复制构造函数*和*复制赋值*`std::shared_ptr`）的线程安全，无需额外同步，即使这些实例是副本并共享同一对象的所有权。

### 强大的线程安全性

但考虑以下情况：

```
std::shared_ptr<int> ptr = std::make_shared<int>(100);

for (auto i= 0; i<10; i++){
    std::thread([&ptr]{                        
    ptr = std::make_shared<int>(200);
    //...           
    }).detach(); 
} 
```

lambda 函数`std::shared_ptr` `ptr`通过引用绑定。因此，分配是资源（`ptr`对象本身）的竞争条件，并且程序具有*未定义的行为*。基本的*线程安全保证*在这里不起作用，我们必须使用*强大的线程安全保证*。采取这个[定义](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2669.htm)：

> 强大的*线程安全保证*是标准库类型对象的变异使用需要不引入数据竞争。这将对性能产生严重的负面影响。此外，真正的安全通常需要跨多个成员函数调用进行锁定，因此提供每个函数调用锁定会产生实际上不存在的安全假象。由于这些原因，没有为改变共享对象提供全面的*强大线程安全保证*，并且相应地对程序施加了约束。

基本上，我们必须为非常量操作同步对同一`std::shared_ptr`实例的访问。我们可以通过以下方式做到这一点：

*   同步原语（如`std::mutex`）
*   [原子函数](https://en.cppreference.com/w/cpp/memory/shared_ptr/atomic)（自 C++20 起[已弃用）](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0718r2.html)
*   [`std::shared_ptr`](https://en.cppreference.com/w/cpp/memory/shared_ptr/atomic2)（C++20 起）[的原子特化。](https://en.cppreference.com/w/cpp/memory/shared_ptr/atomic2)*（我不确定今天是否有任何编译器支持这个）*。

一些例子：

`std::mutex`：

```
std::shared_ptr<int> ptr = std::make_shared<int>(100);
std::mutex mt;

for (auto i= 0; i<10; i++){
    std::thread([&ptr, &mt]{  
      std::scoped_lock lock(mt);                      
      ptr = std::make_shared<int>(200);
      //...                   
      }).detach(); 
} 
```

原子函数：

```
std::shared_ptr<int> ptr = std::make_shared<int>(100);

for (auto i= 0; i<10; i++){
  std::thread([&ptr]{      
    std::atomic_store(&ptr, std::make_shared<int>(200));                   
  }).detach(); 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-25T23:12:07.230

我认为到目前为止对这个问题的回答对于所描述的场景具有误导性。我在问题中描述了一个非常相似的场景。所有其他线程只有（需要）对当前配置的只读访问，这是通过以下方式实现的：

```
// In thread n
shared_ptr<MyConfig> sp_local = sp_global; 
```

这些线程都不会修改`MyConfig`对象的内容。`sp_global`每次执行上述行时，参考计数都会增加。

线程 1，定期将 重置为`sp_global`配置的另一个实例：

```
// In thread 1
shared_ptr<MyConfig> sp_global = make_shared<MyConfig>(new MyConfig); 
```

这也应该是安全的。它将引用计数设置`sp_global`回 1，并且`sp_global`now 指向最新的配置，与所有新的本地副本一样。所以，如果我在这里没有遗漏任何东西，那么这一切都应该是完全线程安全的。

```
#include <iostream>
#include <memory>

using namespace std;

shared_ptr<int> sp1(new int(10));

int main()
{
    cout<<"Hello World! \n";

    cout << "sp1 use count: " << sp1.use_count() << ", sp1: " << *sp1 << "\n";
    cout << "---------\n";

    shared_ptr<int> sp2 = sp1;
    shared_ptr<int>* psp3 = new shared_ptr<int>;
    *psp3 = sp1;
    cout << "sp1 use count: " << sp1.use_count() << ", sp1: " << *sp1 << "\n";
    cout << "sp2 use count: " << sp2.use_count() << ", sp2: " << *sp2 << "\n";
    cout << "sp3 use count: " << psp3->use_count() << ", sp3: " << *(*psp3) << "\n";
    cout << "---------\n";

    sp1.reset(new int(20));

    cout << "sp1 use count: " << sp1.use_count() << ", sp1: " << *sp1 << "\n";
    cout << "sp2 use count: " << sp2.use_count() << ", sp2: " << *sp2 << "\n";
    cout << "sp3 use count: " << psp3->use_count() << ", sp3: " << *(*psp3) << "\n";
    cout << "---------\n";

    delete psp3;
    cout << "sp1 use count: " << sp1.use_count() << ", sp1: " << *sp1 << "\n";
    cout << "sp2 use count: " << sp2.use_count() << ", sp2: " << *sp2 << "\n";
    cout << "---------\n";

    sp1 = nullptr;

    cout << "sp1 use count: " << sp1.use_count() << "\n";
    cout << "sp2 use count: " << sp2.use_count() << ", sp2: " << *sp2 << "\n";

    return 0;
} 
```

和输出

```
Hello World!
sp1 use count: 1, sp1: 10
---------
sp1 use count: 3, sp1: 10
sp2 use count: 3, sp2: 10
sp3 use count: 3, sp3: 10
---------
sp1 use count: 1, sp1: 20
sp2 use count: 2, sp2: 10
sp3 use count: 2, sp3: 10
---------
sp1 use count: 1, sp1: 20
sp2 use count: 1, sp2: 10
---------
sp1 use count: 0
sp2 use count: 1, sp2: 10 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-12T00:19:55.533

这是我对shared_ptr线程安全的理解。IMO，关于 shared_ptr 的线程安全性有三个方面。

第一个是 shared_ptr 本身。我想说 shared_ptr 本身不是线程安全的，这意味着当我们尝试在多个线程中访问**一个shared_ptr 对象并且其中一个访问是写入时会发生数据竞争。**例如，我们在以下情况下存在数据竞争：

```
# Main Thread
shared_ptr<string> global_ptr = make_shared<string>();
string str = *global_ptr;

# Thread 1
global_ptr.reset(); 
```

第二个方面是shared_ptr的内部结构。我会说它是线程安全的。**结果是访问多个**shared_ptr 对象并且对象指向同一个托管对象时没有数据竞争。例如，我们在以下情况下没有数据竞争：

```
# Main Thread
shared_ptr<string> global_ptr = make_shared<string>();
string str = *global_ptr;

# Thread 1
shared_ptr<string> local_ptr = global_ptr;
local_ptr.reset(); 
```

第三个方面是 shared_ptr 中的托管对象可能是线程安全的，也可能不是线程安全的。例如，我会说在以下情况下存在数据竞争：

```
# Main Thread
shared_ptr<string> global_ptr = make_shared<string>();
string str = *global_ptr;

# Thread 1
shared_ptr<string> local_ptr = global_ptr;
(*local_ptr).clear(); 
```

参考

[https://gcc.gnu.org/onlinedocs/libstdc++/manual/memory.html#shared_ptr.thread](https://gcc.gnu.org/onlinedocs/libstdc++/manual/memory.html#shared_ptr.thread)

[https://en.cppreference.com/w/cpp/memory/shared_ptr/atomic](https://en.cppreference.com/w/cpp/memory/shared_ptr/atomic)

# c# - 序列化用例

> ID：14482832
> 
> 赞同：0
> 
> 时间：2013-01-23T15:09:08.077
> 
> 标签：c#, serialization

我不清楚什么时候应该使用序列化/反序列化技术

谁能给我一些基本的用例场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:16:05.707

序列化是将对象转换为某种编码表示以将其从一个地方移动到另一个地方的过程。通常，这是将对象转换为字节数组或 XML 字符串之类的过程，但如果您愿意，也可以序列化为其他格式。

序列化最常见的用途是当您需要跨进程、机器或更准确地说是 AppDomain 边界移动对象时。因此，如果要将对象从服务器 A 发送到服务器 B，则必须在服务器 A 上序列化该对象，然后将该对象的编码表示发送到服务器 B，并让服务器 B 反序列化该对象以便使用它在另一端。

并非所有对象都易于序列化——例如，如果将指针发送到另一台服务器，则在内存中具有指向服务器上某个位置的指针的对象可能没有意义。在这种情况下，您必须编写自己的自定义逻辑来确定如何处理该指针。也许你根本不会序列化你的对象的那个属性......也许你也会序列化指针指向的对象——这将取决于你。这就是为什么序列化并不总是容易或自动的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:12:44.107

几个明显的例子是当您需要跨进程边界传输类的实例时（例如，当使用 WCF 或其他一些远程通信技术时）或者您希望将实例持久保存到流（可能是文件）中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:13:22.870

序列化只是表示处于序列化状态的对象实例的艺术，允许它们随时重新创建为对象类型。两个简单的用例是简单地将对象写入文件并将它们写下来`Stream`（用于网络通信，或进程间通信，或其他）。

例如，如果您想像这样传输一个简单的 DTO：

```
public class TestDto
{
    public string TestText { get; set; }
    public string MoreText { get; set; }
} 
```

..您将添加`[Serializable]`并使用诸如 之类的东西`BinaryFormatter`以便能够从 . 的另一端读取它`NetworkStream`。

默认情况下，您不能简单地将对象实例写入任何形式的`Stream`文件或文件，并使其在另一端保持不变。当然，有一些库可以帮助解决这个问题（例如 WCF），它们将在`[Serializable]`内部进行转换（对于类）。

*（我不确定你为什么有[wpf](/questions/tagged/wpf "显示标记为“wpf”的问题")，但序列化绝对不是 WPF 特有的）*

# android - 如何在 Android 中获取每日日志？

> ID：14482841
> 
> 赞同：2
> 
> 时间：2013-01-23T15:09:44.940
> 
> 标签：android

我正在编写代码以获取用户在其 android 设备中执行的所有活动的日志，并且我成功了。代码如下所示。我有两个问题

Que 1 :- 如何获取一整天的日志？
Que 2 :- 如何获取和显示被叫号码、短信号码、短信号码等？

由于 stackoverflow 限制，完整输出未显示，因为它超过 6000 个字符

```
private String getFormattedKernelVersion() 
{
    String procVersionStr;

    try {
        BufferedReader reader = new BufferedReader(new FileReader("/proc/version"), 256);
        try {
            procVersionStr = reader.readLine();
        } finally {
            reader.close();
        }

        final String PROC_VERSION_REGEX =
            "\\w+\\s+" + /* ignore: Linux */
            "\\w+\\s+" + /* ignore: version */
            "([^\\s]+)\\s+" + /* group 1: 2.6.22-omap1 */
            "\\(([^\\s@]+(?:@[^\\s.]+)?)[^)]*\\)\\s+" + /* group 2: (xxxxxx@xxxxx.constant) */
            "\\([^)]+\\)\\s+" + /* ignore: (gcc ..) */
            "([^\\s]+)\\s+" + /* group 3: #26 */
            "(?:PREEMPT\\s+)?" + /* ignore: PREEMPT (optional) */
            "(.+)"; /* group 4: date */

        Pattern p = Pattern.compile(PROC_VERSION_REGEX);
        Matcher m = p.matcher(procVersionStr);

        if (!m.matches()) {
            Log.e(TAG, "Regex did not match on /proc/version: " + procVersionStr);
            return "Unavailable";
        } else if (m.groupCount() < 4) {
            Log.e(TAG, "Regex match on /proc/version only returned " + m.groupCount()
                    + " groups");
            return "Unavailable";
        } else {
            return (new StringBuilder(m.group(1)).append("\n").append(
                    m.group(2)).append(" ").append(m.group(3)).append("\n")
                    .append(m.group(4))).toString();
        }
    } catch (IOException e) {  
        Log.e(TAG,
            "IO Exception when getting kernel version for Device Info screen",
            e);

        return "Unavailable";
    } 
```

输出是：

```
   --------- /dev/log/system 的开头
    01-23 15:59:59.042 I/ActivityManager(247): 为服务 com.sonyericsson.updatecenter/.UpdateCenterService 启动 proc com.sonyericsson.updatecenter: pid=5181 uid=10013 gids={3003, 2001, 1015}
    01-23 16:00:09.042 I/ActivityManager(247): 为服务 com.scoreloop.magicbox/.service.MagicBoxService 启动 proc com.scoreloop.magicbox: pid=5189 uid=10023 gids={3003, 1015}
   服务 com.sonyericsson.secureclockservice/.SecureClockStartupService 的 rvice：pid=5236 uid=10104 gids={3003}
    01-23 16:14:35.709 I/TelephonyRegistry(247): notifyDataConnection: state=2 isDataConnectivityPossible=true reason=null interfaceName=rmnet0 networkType=2
    01-23 16:19:33.351 I/ActivityManager（247）：不再需要 com.sonyericsson.crashmonitor（pid 4080）：隐藏 #16
    01-23 16:19:33.351 I/ActivityManager(247): 24960ms 内不再需要 com.es.BootService
01-23 16:24:06.179 W/ActivityManager（247）：计划在 34957 毫秒内重新启动崩溃的服务 com.sonyericsson.updatecenter/.UpdateCenterService
01-23 16:24:06.179 W/ActivityManager（247）：计划在 44951 毫秒内重新启动崩溃的服务 com.scoreloop.magicbox/.service.MagicBoxService
01-23 16:24:11.149 I/ActivityManager（247）：为服务 com.sonyericsson.android.datamonitor/com.sonyericsson.app.costcontrol.service.DataTrafficService 启动 proc com.sonyericsson.android.datamonitor：pid=5392 uid =10058 gids={3003}
01-23 16:27:28.838 I/ActivityManager(247): 为服务 com.facebook.katana/.service.MediaUploadService 启动 proc com.facebook.katana: pid=5399 uid=10024 gids={3003, 1006, 1015}
01-23 16:29:38.491 I/ActivityManager(247): 为服务 com.wsandroid.suite/.core.services.BootService 启动 proc com.wsandroid.suite: pid=5425 uid=10126 gids={3003, 1015, 1007}
01-23 16:29:48.491 I/ActivityManager(247): 为服务 com.sonyericsson.updatecenter/.UpdateCenterService 启动 proc com.sonyericsson.updatecenter: pid=5435 uid=10013 gids={3003, 2001, 1015}
01-23 16:34:05.759 I/ActivityManager(247): 为服务 com.scoreloop.magicbox/.service.MagicBoxService 启动 proc com.scoreloop.magicbox: pid=5445 uid=10023 gids={3003, 1015}
01-23 16:45:22.551 I/TelephonyRegistry(247): notifyDataConnection: state=0 isDataConnectivityPossible=false reason=null interfaceName=null networkType=2
01-23 16:45:22.571 I/TelephonyRegistry(247): notifyDataConnection: state=1 isDataConnectivityPossible=true reason=null interfaceName=null networkType=2
01-23 16:45:22.941 I/ActivityManager(247): 为广播 com.sonyericsson.appshare/.backend.SyncSchedulerReceiver 启动 proc com.sonyericsson.appshare: pid=5467 uid=10138 gids={3003, 1015}
01-23 16:45:23.091 I/ActivityManager(247): 启动 proc com.google.android.gm 广播 com.google.android.gm/.downloadprovider.DownloadReceiver: pid=5475 uid=10018 gids={3003, 1015}
01-23 16:45:28.901 I/TelephonyRegistry(247): notifyDataConnection: state=2 isDataConnectivityPossible=true reason=null interfaceName=rmnet0 networkType=2
01-23 16:53:41.072 I/ActivityManager(247): 启动 proc com.google.android.apps.maps:BackgroundFriendService 服务
01-23 17:04:39.991 I/ActivityManager(247): 为服务 com.scoreloop.magicbox/.service.MagicBoxService 启动 proc com.scoreloop.magicbox: pid=5611 uid=10023 gids={3003, 1015}
01-23 17:04:49.991 I/ActivityManager(247): 为服务 com.sonyericsson.updatecenter/.UpdateCenterService 启动 proc com.sonyericsson.updatecenter: pid=5630 uid=10013 gids={3003, 2001, 1015}
01-23 17:05:28.529 V/BackupManagerService（247）：已请求备份，但没有任何待处理
01-23 17:13:59.866 I/TelephonyRegistry(247): notifyDataConnection: state=3 isDataConnectivityPossible=true reason=2GVoiceCallStarted interfaceName=rmnet0 networkType=2
01-23 17:13:59.886 I/ActivityManager(247): 启动 proc com.facebook.orca 用于广播 com.facebook.orca/.phone.TelephonyReceiver: pid=5659 uid=10148 gids={3003, 1015, 1006}
01-23 17:14:00.036 D/StatusBarService（313）：通知有fullScreenIntent；发送全屏意图
01-23 17:14:00.036 I/ActivityManager（247）：开始：Intent { act=android.intent.action.MAIN flg=0x10840000 cmp=com.android.phone/.SemcInCallScreen } 来自 pid -1
01-23 17:14:00.746 W/WindowManager(247): 迭代次数过多后布局重复被跳过
01-23 17:14:00.746 W/WindowManager(247): 迭代次数过多后布局重复被跳过
01-23 17:14:00.746 W/WindowManager(247): 迭代次数过多后布局重复被跳过
01-23 17:14:00.756 W/WindowManager（247）：动画重复在太多迭代后中止
01-23 17:14:02.796 I/ActivityManager（247）：不再需要 com.sonyericsson.widget.analogclock（pid 4656）：隐藏 #16
01-23 17:14:02.806 I/ActivityManager(247): 启动 proc org.videolan.vlc.betav7neon 广播 org.videolan.vlc.betav7neon/.PhoneStateReceiver: pid=5675 uid=10152 gids={3003, 1007, 1015}
01-23 xx flg=0x10000000 cmp=com.android.phone/.SemcInCallScreen（有附加功能）}来自 pid 351
01-23 17:21:03.821 I/ActivityManager(247): 不再需要 com.sonyericsson.idd.agent (pid 4221): 隐藏 #16
01-23 17:21:03.821 I/ActivityManager(247): 不再需要 org.videolan.vlc.betav7neon (pid 5675): hidden #17
01-23 17:21:04.161 I/ActivityManager(247): 启动 proc org.videolan.vlc.betav7neon 广播 org.videolan.vlc.betav7neon/.PhoneStateReceiver: pid=5778 uid=10152 gids={3003, 1007, 1015}
01-23 17:21:04.352 I/TelephonyRegistry(247): notifyDataConnection: state=3 isDataConnectivityPossible=true reason=2GVoiceCallStarted interfaceName=rmnet0 networkType=2
01-23 17:21:04.521 I/ActivityManager(247): 不再需要 com.sonyericsson.androidapp.fbmusiclike (pid 4305): 隐藏 #16
01-23 17:21:05.101 I/ActivityManager(247): 启动 proc com.sonyericsson.idd.agent 广播 com.sonyericsson.idd.agent/.IDDAutoStart: pid=5788 uid=10010 gids={3003, 1015}
01-23 17:21:05.521 I/ActivityManager（247）：启动 proc com.sonyericsson.androidapp.fbmusiclike 广播 com.sonyericsson.androidapp.fbmusiclike/.facebook.AvailabilityChangeReceiver：pid=5797 uid=10011 gids={3003}
01-23 17:21:06.021 I/ActivityManager(247): 不再需要 com.sonyericsson.facebook.proxylogin (pid 4358): 隐藏 #16
01-23 17:21:06.021 I/ActivityManager(247): 不再需要 com.sonyericsson.statusswitch (pid 481): hidden #16
01-23 17:21:06.031 W/ActivityManager（247）：计划在 5000 毫秒内重新启动崩溃的服务 com.sonyericsson.statusswitch/.UpdateService
01-23 17:21:id=5930 uid=10018 gids={3003, 1015}
01-23 17:27:42.752 W/InputManagerService（247）：在非重点客户端 com.android.internal.view.IInputMethodClient$Stub$Proxy@2b3b21e0 上开始输入（uid=10018 pid=5930）
01-23 17:27:46.282 I/ActivityManager(247): 为服务 com.wsandroid.suite/.core.services.BootService 启动 proc com.wsandroid.suite: pid=5952 uid=10126 gids={3003, 1015, 1007}
01-23 17:27:56.292 I/ActivityManager(247): 为服务 com.sonyericsson.updatecenter/.UpdateCenterService 启动 proc com.sonyericsson.updatecenter: pid=5962 uid=10013 gids={3003, 2001, 1015}
01-23 17:28:06.282 I/ActivityManager（247）：为服务 com.scoreloop.magicbox/.service.MagicBoxService 启动 proc com.scoreloop.magicbox：pid=5970 uid=10023 gids={3003, 1015}
01-23 17:39:36.512 I/ActivityManager（247）：为服务 com.sonyericsson.androidapp.storefront/.service.StoreFrontService 启动 proc com.sonyericsson.androidapp.storefront：pid=5991 uid=10042 gids={3003}
01-23 17:45:26.520 I/TelephonyRegistry(247): notifyDataConnection: state=0 isDataConnectivityPossible=false reason=null interfaceName=null networkType=2
01-23 17:45:26.540 I/TelephonyRegistry(247): notifyDataConnection: state=1 isDataConnectivityPossible=true reason=null interfaceName=null networkType=2
01-23 17:45:26.730 I/ActivityManager（247）：启动 proc com.sonyericsson.appshare 用于广播 com.sonyericsson.appshare/.backend.SyncSchedulerReceiver：pid=6008 uid=10138 gids={3003, 1015}
01-23 17:45:32.520 I/TelephonyRegistry(247): notifyDataConnection: state=2 isDataConnectivityPossible=true reason=null interfaceName=rmnet0 networkType=2
01-23 17:47:41.072 I/ActivityManager(247): 为服务 com.google.android.apps.maps/com.google.googlenav.friend.android 启动 proc com.google.android.apps.maps:BackgroundFriendService。背景朋友服务：pid=6044 uid=10050 gids={3003, 1015}
01-23 17:49:22.453 I/ActivityManager（247）：不再需要 com.sonyericsson.usbux（pid 315）：hiodClient$Stub$Proxy@2b48a9a8
01-23 18:35:18.629 I/ActivityManager（247）：开始：Intent { act=android.intent.action.VIEW dat=content://com.google.android.providers.talk/messagesByAcctAndContact/1/saklani。 sanjeev%40gmail.com flg=0x34000000 cmp=com.google.android.talk/.ChatScreen bnds=[0,94][320,158]（有附加功能）}来自 pid -1
01-23 18:35:18.699 I/ActivityManager（247）：为活动 com.google.android.talk/.ChatScreen 启动 proc com.google.android.talk：pid=6413 uid=10121 gids={3003, 1015,第1006章
01-23 18:35:28.349 W/InputManagerService（247）：在非聚焦客户端 com.android.internal.view.IInputMethodClient$Stub$Proxy@2b50a888 上开始输入（uid=10121 pid=6413）
01-23 18:35:29.749 I/ActivityManager（247）：开始：Intent { act=android.intent.action.PROVIDER_CHANGED cat=[dashingsanchit@gmail.com] dat=content://gmail-ls/unread/^ i flg=0x4000000 cmp=com.google.android.gm/.ConversationListActivity bnds=[0,94][320,158]（有附加功能）} 来自 pid -1
01-23 18:35:29.749 W/ActivityManager(247): startActivity 从非活动上下文中调用；强制 Intent.FLAG_ACTIVITY_NEW_TASK 用于： Intent { act=android.intent.action.PROVIDER_CHANGED cat=[dashingsanchit@gmail.com] dat=content://gmail-ls/unread/^i flg=0x4000000 cmp=com.google.android .gm/.ConversationListActivity bnds=[0,94][320,158]（有附加功能）}
01-23 18:35:40.479 com.android.vending 包中的 I/Activin 权限 android.permission.PACKAGE_VERIFICATION_AGENT
01-23 19:13:48.480 W/PackageManager(247): com.android.vending 包中的未知权限 android.permission.MANAGE_USERS
01-23 19:13:48.480 W/PackageManager(247): com.android.vending 包中的未知权限 android.permission.INTERACT_ACROSS_USERS
01-23 19:13:48.510 W/PackageManager(247): com.sonyericsson.retaildemo 包中的未知权限 com.sonyericsson.permission.CUSTOMIZATION
01-23 19:13:48.510 W/PackageManager（247）：未授予 android.permission.CLEAR_APP_USER_DATA 对 com.sonyericsson.retaildemo 包的权限（protectionLevel=2 标志=0xbe45）
01-23 19:13:48.510 W/PackageManager(247): com.sonyericsson.androidapp.timescapefeedsplugin 包中的未知权限 com.sonyericsson.extras.liveview.permission.LIVEVIEW_API
01-23 19:13:48.510 W/PackageManager(247): com.sonyericsson.permission.CONTACTS_PICK_CONVERSATIONS_TARGET 包 com.sonyericsson.conversations 中的未知权限
01-23 19:13:48.510 W/PackageManager（247）：com.sonyericsson.conversations 包中的未知权限 com.sonyericsson.permission.ACCESS_PROTECTED_CONTACTS
01-23 19:13:48.510 是）}，标志=2
01-23 19:15:04.730 E/fb_music_like（6974）：不采取行动，无视意图
01-23 19:15:04.73T 释放174K，释放50% 2892K/5767K，外接743K/1036K，暂停27ms
01-23 19:15:16.990 D/dalvikvm（3102）：GC_CONCURRENT 释放 461K，46% 释放 3767K/6855K，外部 743K/1036K，暂停 2ms+3ms
01-23 19:15:17.180 D/dalvikvm（5816）：GC_CONCURRENT 释放 442K，49% 释放 3119K/6087K，外部 743K/1036K，暂停 1ms+3ms
01-23 19:15:17.630 D/dalvikvm（3278）：GC_EXPLICIT 释放 200K，51% 释放 2875K/5767K，外部 743K/1036K，暂停 25ms
01-23
01-23 19:15:22.480 D/dalvikvm（247）：GC_EXPLICIT 释放 387K，38% 释放 7506K/11975K，外部 1343K/1943K，暂停 69ms
01-23 19:15:23.390 D/dalvikvm（6907）：GC_CONCURRENT 释放 525K，45% 释放 3675K/6599K，外部 1330K/1607K，暂停 3ms+3ms
01-23 19:15:23.580 D/dalvikvm（6907）：GC_FOR_MALLOC 释放 1062K，55% 空闲 3089K/6855K，外部 924K/1436K，暂停 54ms从我的索尼爱立信 Xperia mini pro 发送
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:44:37.783

经过12小时的持续研发，我得到了解决方案。这不仅会显示一天的通话记录，还会显示您手机的整个通话记录。

这是代码

将此方法复制到 java 文件中并在 oncreate() 中调用此方法

```
private void getCallDetails() {

    StringBuffer sb = new StringBuffer();
    Cursor managedCursor = managedQuery( CallLog.Calls.CONTENT_URI,null, null,null, null);
    int number = managedCursor.getColumnIndex( CallLog.Calls.NUMBER );
    int type = managedCursor.getColumnIndex( CallLog.Calls.TYPE );
    int date = managedCursor.getColumnIndex( CallLog.Calls.DATE);
    int duration = managedCursor.getColumnIndex( CallLog.Calls.DURATION);
    sb.append( "Call Details :");
    while ( managedCursor.moveToNext() ) {
    String phNumber = managedCursor.getString( number );
    String callType = managedCursor.getString( type );
    String callDate = managedCursor.getString( date );
    Date callDayTime = new Date(Long.valueOf(callDate));
    String callDuration = managedCursor.getString( duration );
    String dir = null;
    int dircode = Integer.parseInt( callType );
    switch( dircode ) {
    case CallLog.Calls.OUTGOING_TYPE:
    dir = "OUTGOING";
    break;

    case CallLog.Calls.INCOMING_TYPE:
    dir = "INCOMING";
    break;

    case CallLog.Calls.MISSED_TYPE:
    dir = "MISSED";
    break;
    }
    sb.append( "\nPhone Number:--- "+phNumber +" \nCall Type:--- "+dir+" \nCall Date:--- "+callDayTime+" \nCall duration in sec :--- "+callDuration );
    sb.append("\n----------------------------------");
    }
    managedCursor.close();
    tvcall.setText(sb);
    } 
```

在 Xml 文件中粘贴此代码，使用这样的滚动视图和文本视图

```
 ```
<ScrollView
        android:id="@+id/layoutmain"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/call"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
        </TextView>
    </ScrollView> 
``` 
```

 `采取一个 Textview & 初始化并像这样在 OnCreate() 中调用上述方法

```
 TextView tvcall;
tvcall=(TextView)findViewById(R.id.call);
getCallDetails(); 
```

输出是
![在此处输入图像描述](../Images/4617c9ffa46a964db9245fa27111bfa8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:12:40.917

在您的清单中添加此权限

```
<uses-permission android:name="android.permission.WRITE_CONTACTS"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
````

# scalability - 有关 Internet 应用程序的可扩展性和高可用性的书籍

> ID：14482842
> 
> 赞同：4
> 
> 时间：2013-01-23T15:09:46.123
> 
> 标签：scalability, load-balancing, high-availability

我正在寻找一些关于以下主题的好书：互联网应用程序的可扩展性、高可用性和负载平衡。你能推荐任何吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-05T07:23:54.693

我认为这些很有用：

*   [Cal Henderson - “构建可扩展的网站”](http://www.amazon.co.uk/Building-Scalable-Web-Sites-Henderson/dp/0596102356)
*   [Theo Schlossnagle - “可扩展的互联网架构”](https://rads.stackoverflow.com/amzn/click/com/067232699X)
*   [George Reese - “云应用架构”](https://rads.stackoverflow.com/amzn/click/com/0596156367)
*   [Bill Wilder - “云架构模式”](http://shop.oreilly.com/product/0636920023777.do)

谢谢你的回答！

# glassfish - 如何配置 Glassfish 在 EJB3.1 中注入字符串？

> ID：14482845
> 
> 赞同：1
> 
> 时间：2013-01-23T15:10:04.673
> 
> 标签：glassfish, cdi, ejb-3.1

我想做这样的事情（非常基本......）：

```
 @Resource(lookup = "my/jndi/name")
  private String someString; 
```

glassfish 控制台不清楚如何配置名为“my/jndi/name”的 jndi 字符串资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:10:04.673

如果你想做这样的事情：

```
@Resource(lookup = "your/jndi/name")
private String someString; 
```

您可以使用 glassfish 控制台并添加自定义资源：

![glassfish 的自定义字符串值](../Images/3f336a5c57ea5ddc3faf8a78866f3c4c.png)

请注意，您必须添加一个名称为“值”的属性。

这是相应的 glassfish-resource.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC
  "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN"
  "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
    <custom-resource jndi-name="your/jndi/name" res-type="java.lang.String" factory-    class="org.glassfish.resources.custom.factory.PrimitivesAndStringFactory">
        <property name="value" value="your value"></property>
    </custom-resource>
</resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:20:58.023

您可能还想看看 DeltaSpike 中的配置内容。

# javascript - Jquery 选项作为变量

> ID：14482848
> 
> 赞同：-2
> 
> 时间：2013-01-23T15:10:12.020
> 
> 标签：javascript, jquery

您好，我的 Jquery 扩展中有一个静态选项。选项是颜色：“蓝色”

> $(ele).test({color:"color"});
> 
> //我在下面试过这个
> 
> var anoption=“颜色”；$(ele).test({anoption:"blue"});

但它没有工作。有没有像上面尝试的那样将另一个变量序列化为选项名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:19:03.830

对象根本不是那样工作的。如果要设置对象的属性，其中所述属性的名称包含在变量中，则必须使用括号表示法。例如，

```
var options = {}, anoption = "color";
options[anoption] = "blue";
$(ele).test(options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:19:11.660

我相信您会想要制作如下功能：

```
function changeColour(colour,ele){
    $(ele).css({'color':colour});//this will change the colour of the text
} 
```

现在要运行这个函数，你需要调用它。因此，让我们对元素进行函数调用。我们可以通过两种方式做到这一点。`document.ready`一个在它自己的元素上的javascript函数中。

jQuery 选择器功能：

```
$('#element').click(function(){
    changeColour('#FF0000',$(this)); //this will send the colour: #FF0000 being red and your element.
} 
```

在元素本身内：

```
<div id="element" onClick="changeColour('#FF0000','#element')">
    <p>Content</p>
</div> 
```

现在有一种更简单的方法可以使用 jQuery 来做到这一点：

```
$('#element').click(function(){
   $(this).css({'color':'#FF0000'});
}); 
```

# wcf - 3 层 nhibernate + wcf + Silverlight

> ID：14482849
> 
> 赞同：5
> 
> 时间：2013-01-23T15:10:13.023
> 
> 标签：wcf, silverlight, nhibernate, architecture, n-tier-architecture

最近我被要求开发一个项目。架构看起来像：

*   1 层：基于 Nhibernate 的 DataAccess
*   2层：基于WCF服务和一些Core类的业务层
*   3 层：基于 Silverlight 的视图

我将使用 DTO 对象在第 2 层和第 3 层之间传递数据。

我已经意识到该项目将具有巨大的领域模型，并且许多业务实体应该支持标准和自定义 CRUD 操作。在第一层，它将由通用 NHibernate Repository + Specification 解决。

但是第 2 层（一个 WCF 服务）看起来像一组方法，它们为第 3 层提供 DTO 的自定义和标准 CRUD 接口。

例如模型看起来像：

```
class Product {}
class Category {} 
```

DTO：

```
class ProductDTO {}
class CategoryDTO {} 
```

“问题” WCF 服务：

```
public class DataService
{
  public List<CategoryDTO> GetAllCategories()
  {
  }

  public List<ProductDTO> GetAllProducts()
  {
  }
} 
```

可能的解决方案：

```
public class ProductDataService
{
  public List<ProductDTO> GetAllProducts()
  {
  }
}

 public class CategoryDataService
{
  public List<CategoryDTO> GetAllCategories()
  {
  }
} 
```

**问题：**

1.  上面列出的解决方案有什么好的替代方案吗？
2.  对于这种情况，是否有任何“通用”方式可以在 WCF 服务中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:10:19.523

假设您纯粹在谈论“参考”数据（类别、产品等）上的 CRUD，您应该有 1 个服务，其中包含许多 GetAllXXX 方法或多个服务，最终继承自一个基础服务。真的没关系，如果你有很多DTO要传输，你会得到很多GetXXX方法。

请注意这两点：

*   wcf 服务中的方法数量更多，“预热”时间更长（这个问题出现在大约 100-200 个方法（1）
*   wcf 不能在没有定义泛型参数的情况下公开“泛型”方法

例如 ：

```
public class DataService<TIn>
{
    protected List<TOut> GetAll<TOut>()
    {
         // handle generic loading and transformation here
    }
}

public class CategoryService : DataService<Category>
{
    public List<CategoryDTO> GetAllCategories()
    {
        return GetAll<CategoryDTO>();
    }
} 
```

或者

```
public class DataService
{
    protected List<TOut> GetAll<TIn, TOut>()
    {
         // handle generic loading and transformation here
    }

    public List<CategoryDTO> GetAllCategories()
    {
        return GetAll<Category, CategoryDTO>();
    }
} 
```

然后在泛型方法中，您可以使用 Automapper 从 Category 映射到 CategoryDto，例如。

最后，对于更多面向用户/业务的服务，您应该拥有特定于您将在每个“视图”中呈现的数据的 DTO。

(1) 是的，从 OOP 的角度来看。但是您往往会通过从大型数据库生成代码来解决这些问题 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T16:35:06.590

> 上面列出的解决方案有什么好的替代方案吗？

是的，您可以使用 RESTfull 服务。我还建议不要使用胖接口（mathieu 解决方案）。胖接口很难维护、重构，它们笨重。如果你选择 REST，你可以拥有这样的 API（你可以在 WCF 中拥有类似的界面）：

*   `Category`

    *   获取所有：[http ://myservice.com/api/categories](http://myservice.com/api/categories)
    *   得到一个：[http ://myservice.com/api/categories/123](http://myservice.com/api/categories/123)
    *   POST一：[http ://myservice.com/api/categories/add](http://myservice.com/api/categories/add)
    *   PUT/PATCH 一：[http ://myservice.com/api/categories/update](http://myservice.com/api/categories/update)
    *   删除一项：[http ://myservice.com/api/categories/delete/123](http://myservice.com/api/categories/delete/123)
*   同样对于`Product`

    *   获取所有：[http ://myservice.com/api/products](http://myservice.com/api/products)
    *   得到一个：[http ://myservice.com/api/products/123](http://myservice.com/api/products/123)
    *   POST一：[http ://myservice.com/api/products/add](http://myservice.com/api/products/add)
    *   PUT/PATCH 一：[http ://myservice.com/api/products/update](http://myservice.com/api/products/update)
    *   删除一项：[http ://myservice.com/api/products/delete/123](http://myservice.com/api/products/delete/123)

> 对于这种情况，是否有任何“通用”方式可以在 WCF 服务中使用？

是的，您可以在服务器上使用泛型，但对于客户端，这将显示为具体类型。有关示例，请参见[这篇文章。](http://jeffbarnes.net/blog/post/2007/05/10/wcf-serialization-and-generics.aspx)

# c++ - C++ 中的任何 NIO 框架

> ID：14482851
> 
> 赞同：4
> 
> 时间：2013-01-23T15:10:25.857
> 
> 标签：c++, nio

我想在 C++ 中使用可以处理至少 100,000 个并发连接的 NIO 框架。我正在考虑使用 boost::asio，但我不知道它在多核系统上是否可以很好地扩展。有人有使用 boost:asio 和处理这么多连接的经验吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T16:31:15.943

Boost ASIO 可能会在现代硬件上处理 10K 连接，但在性能方面，它是对 CPU 和内存资源的浪费。以下是一些替代方案：

*   [libevent](http://libevent.org)
*   [利夫夫](http://software.schmorp.de/pkg/libev.html)
*   [epoll](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)（Linux 特定）
*   [kqueue](http://en.wikipedia.org/wiki/Kqueue)（FreeBSD，特定于 OS X）

我个人建议您使用[libevent](http://libevent.org)，因为它具有可移植性和相对较高的性能。

# c - 如何在C中只读取输入中的数字（没有字母，只有数字）？

> ID：14482852
> 
> 赞同：-1
> 
> 时间：2013-01-23T15:10:28.637
> 
> 标签：c, input, error-handling, user-input

前段时间你帮我读了一行。现在，我只想从输入中读取数字 - 没有字母，只有 5 位数字。我怎样才能做到这一点？

我的解决方案无法正常工作：

```
int i = 0; 
while(!go)
    {
        printf("Give 5 digits: \n\n");
        while( ( c = getchar()) != EOF  &&  c != '\n' &&  i < 5 )
        {
            int digit = c - '0';
            if(digit >= 0 && digit <= 9)
            {
                input[i++] = digit;
                if(i == 5)
                {
                    break;
                    go = true;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:18:17.183

有了`break`语句，`go = true;`就永远不会被执行。因此循环`while (!go)`是无限的。

```
#include <ctype.h>
#include <stdio.h>

int i = 0;
int input[5];

printf ("Give five digits: ");
fflush (stdout);

do
{
  c = getchar ();

  if (isdigit (c))
  {
    input[i] = c - '0';
    i = i + 1;
  }
} while (i < 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:25:39.243

Try with this:

```
#include<stdio.h>
int main()
{
char  c;
        while( ( c = getchar()) != EOF  &&  c != '\n' &&  c >= 48  && c <= 57 )
        {
          printf("%c\n",c);
        }
return 0;
} 
```

# ios - 合并包含 NSDictionarys 的 NSArrays

> ID：14482853
> 
> 赞同：3
> 
> 时间：2013-01-23T15:10:33.963
> 
> 标签：ios, objective-c, merge, nsmutablearray, nsmutabledictionary

我有一个这样`NSMutableArray`的`NSDictionary`东西：

```
myArray (
    {
    chatins = 20;
    placeImageString = 244211112265925;
},
    {
    chatins = 5;
    placeImageString = 154909144575109;
},
    {
    chatins = 30;
    placeImageString = 193867280641162;
},
    {
    chatins = 13;
    placeImageString = 224627130902;
}, 
```

)

另一个`NSMutableArray`是`NSDictionary`这样的：

```
myArray2 
(
    {
    category = "Local business";
    distance = "0.1";
    name = "Mts India";
    placeImageString = 244211112265925;
},
    {
    category = "Local business";
    distance = "0.17";
    name = "Aegis Ltd";
    placeImageString = 154909144575109;
},
    {
    category = "Automobiles and parts";
    distance = "0.19";
    name = Autopsyche;
    placeImageString = 78480207511;
},
    {
    category = Company;
    distance = "0.19";
    name = "The Oberoi, Gurgaon";
    placeImageString = 121676041233945;
}, 
```

)

我想合并`myArray`并`myArray2`得到s 的结果`NSMutableArray`，`NSDictionary`如下所示，其中 my`placeImageString`是匹配两个字典数组中数据的键，如果在其中找不到键，`myArray2`则键的值`chatins`应为 0。

```
myArray3 
(
{
category = "Local business";
distance = "0.1";
name = "Mts India";
placeImageString = 244211112265925;
 chatins = 20;

},
{
category = "Local business";
distance = "0.17";
name = "Aegis Ltd";
placeImageString = 154909144575109;
chatins = 5;

},
{
category = "Automobiles and parts";
distance = "0.19";
name = Autopsyche;
placeImageString = 78480207511;
chatins = 0;

},
    {
    category = Company;
    distance = "0.19";
    name = "The Oberoi, Gurgaon";
    placeImageString = 121676041233945;
    chatins = 0;

    },
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:37:05.810

在这里，我为您提供了一个示例代码：

```
 NSMutableArray *array1 = [[NSMutableArray alloc] init];
  NSMutableArray *array2 = [[NSMutableArray alloc] init];

  NSMutableDictionary * dict = [[NSMutableDictionary alloc]
                                initWithObjects:[NSArray arrayWithObjects:@"1",@"ABC", nil]
                                forKeys:[NSArray arrayWithObjects:@"ID",@"NAME", nil]];
  [array1 addObject:dict];

  dict = nil;

  /*
   Same way added 2 more dictionaries to the same array - array1
   */

  NSLog(@"array1: %@", array1);

  dict = nil;

  dict = [[NSMutableDictionary alloc]
          initWithObjects:[NSArray arrayWithObjects:@"1",@"DEF", nil]
          forKeys:[NSArray arrayWithObjects:@"ID",@"ADDRESS", nil]];

  [array2 addObject:dict];

  dict = nil;

  /*
   Same way added 2 more dictionaries to the same array - array2
   */

  NSLog(@"array2: %@", array2);

  for (int index = 0; index < [array1 count]; index ++) {

    NSMutableDictionary *dict1 = [array1 objectAtIndex:index];

    for (NSMutableDictionary *dict2 in array2) {

      if ([[dict1 objectForKey:@"ID"] isEqualToString:
           [dict2 objectForKey:@"ID"]]) {

        [dict1 setObject:[dict2 objectForKey:@"ADDRESS"] forKey:@"ADDRESS"];
      }
    }
  } 
```

现在最后，如果您检查*array1* ，所有这些字典中都会添加一个键（*ADDRESS ）。*

希望这有帮助。

-Mrunal

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:32:35.690

```
1\. Create a new empty NSMutableArray newArray
2\. Loop through all NSDictionaries of myArray2

    a. Copy the current NSDictionary to a new NSMutableDictionary newDict
    b. Loop through myArray1
        b1\. if myArray1.dict.placeImageString == newDict.placeImageString
            - Add myArray1.dict.chatins to newDict
            - break out of loop
    c. add newDict to newArray 
```

# ios - iOS 开发——增量更新

> ID：14482858
> 
> 赞同：2
> 
> 时间：2013-01-23T15:10:52.760
> 
> 标签：ios, xcode, app-store

我正在更新我最初没有编写的应用程序。现在，该应用程序最初（在第一次启动时）下载一个大小约为 70MB 的 ZIP 文件。最重要的是，在每次启动时，应用程序都会检查是否有更新的 ZIP 文件在线，并在必要时更新本地文件。

随着更新，我可能想对该过程进行更改。我认为让他下载应用程序对用户不友好，然后在第一次启动时他必须等到下载实际内容 ZIP。

我的想法是提供一个已经包含最新 ZIP 的应用程序版本。但是，部署应用程序更新就会成为一个问题。更新不应包含 ZIP 文件，因为 ZIP 文件需要在应用程序中下载（它会定期更改）。

有没有办法将更新和初始完整应用程序版本完全分开？

例如

*   (Day 1) 用户A第一次下载app，app包含ZIP v1
*   （第 2 天）ZIP v2 发布。用户 A 在应用程序中收到 ZIP v2。
*   （第 3 天）用户 B 第一次想要下载该应用程序。为确保他获得最新的 ZIP 文件，该应用程序应该已经包含 ZIP v2。这意味着在第 2 天，应用程序必须已收到更新，但只有“初始安装”文件必须已更新。用户 A 不应该得到更新！
*   （第 4 天）一个较小的更新（图标更改）部署到应用商店中的用户 A 和 B，它不能包含任何 ZIP 文件。

# cordova - 如何将数据存储到phonegap中的数据库

> ID：14482862
> 
> 赞同：0
> 
> 时间：2013-01-23T15:11:05.357
> 
> 标签：cordova

我想将用户信息存储在数据库中。

最好的方法是使用 jQuery 从 mysql 表中获取数据吗？这甚至可能吗？

我想高效而轻松地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:39:52.463

如果这是本地数据库，我建议查看 Cordova 的本地存储 API：

[http://docs.phonegap.com/en/2.3.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.3.0/cordova_storage_storage.md.html#Storage)

如果这是一个远程数据库，您可能需要在存储数据的服务器上编写一个 API，并使用 jQuery 通过 XHR 将数据发送到服务器。

# winapi - OLE 服务器打开的抑制或“自动确认”对话框

> ID：14482863
> 
> 赞同：0
> 
> 时间：2013-01-23T15:11:13.203
> 
> 标签：winapi, windows-server-2003, ole

我有一个实例化本地 OLE 服务器的应用程序。

在某些情况下，此服务器会打开一个对话框以响应对其公开方法之一的调用。

无论如何有可能抑制这个框，或者以某种方式“自动确认”它？

问题是应用程序应按计划任务运行，并在弹出对话框时挂起。

我可以访问应用程序的源，但不能访问 OLE 服务器的源。

这是在win2k3上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:08:16.580

我通过某种或多或少可靠的解决方法解决了这个问题，具体取决于弹出窗口文本标题的唯一性。

我写了一个小程序，它使用 扫描所有顶级窗口`EnumWindows()`，使用 获取它们的标题`GetWindowText()`，将标题与程序启动时提供的模式进行比较，如果匹配发生，则将 a 发布`PostMesssage()`到此`WM_CLOSE`窗口。

这个过程每 T 毫秒重复一次。

该程序与创建 OLE 服务器的过程并行运行，OLE 服务器打开不需要的弹出窗口并在 T 毫秒后关闭它们。

如果每 1000 毫秒运行一次，则不会出现可见的系统负载。

使用 VC10，二进制文件的权重非常轻（<8k），唯一的依赖是`msvcr100.dll`，如果后者与二进制文件本身放在同一目录中，则不需要设置。我在win7上构建它，它在win2k和win2k3下无缝运行...... :-)

此解决方案的来源（连同 VC10 解决方案/项目文件）可在此处找到：[https ://github.com/ealk/wd](https://github.com/ealk/wd)

# css - 有没有办法让 iPad 在旋转后重新渲染网页？

> ID：14482865
> 
> 赞同：2
> 
> 时间：2013-01-23T15:11:16.223
> 
> 标签：css, html, rendering, mobile-safari, mobile-webkit

我们有一个网站，当设备旋转后，在 iPad 上显示时，元素之间会出现间隙。如果刷新页面，间隙会再次消失。

在这里找到了我正在尝试的问题（但在传回给客户之前没有要测试的 iPad），所以我想问问是否有人可以就您是否可以强制给出明确的答案页面旋转后重新渲染，使用JS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:20:53.543

您是否检测到方向变化？

您可能想看看这个问题： [如何在 IOS 中使用 javascript 和 Phonegap 正确检测方向变化？](https://stackoverflow.com/questions/5284878/how-do-i-correctly-detect-orientation-change-using-javascript-and-phonegap-in-io)

或这篇文章：

[http://www.williammalone.com/articles/html5-javascript-ios-orientation/](http://www.williammalone.com/articles/html5-javascript-ios-orientation/)

然后强制重绘你可以看看这个问题：

[在 Chrome/Mac 上强制 DOM 重绘/刷新](https://stackoverflow.com/questions/8840580/force-dom-redraw-refresh-on-chrome-mac)

在所有内容周围放置一个 div。

基本上你使用 window.onorientationchange 来检测变化。

然后，当您检测到更改时，只需将主 div 上的显示设置为“无”，然后使用超时允许页面重绘，然后将其更改回可见，它将被重绘。

我还没有尝试过，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T10:31:43.963

我喜欢它，我发现在 ios 平台上播放 boardcast 时页面旋转不会重新绘制；所以我在设备旋转时会重新绘制 cibleforcible bowser；</p>

> ```
> $('.w_wrap').hide();
>         setTimeout(function(){
>             $('.w_wrap').show();
>         },20); 
> ```

这不是好方法，所以我发现了这个（<a href="https://stackoverflow.com/questions/8840580/force-dom-redraw-refresh-on-chrome-mac">Force DOM redraw/refresh on Chrome /Mac）但我没有实践过

# windows - 禁止 Windows Mobile 通过 USB 或蓝牙使用数据连接

> ID：14482867
> 
> 赞同：1
> 
> 时间：2013-01-23T15:11:18.867
> 
> 标签：windows, mobile, windows-mobile, windows-mobile-6.5

每次我使用 USB 或蓝牙将运行 Windows Mobile 6.5 的摩托罗拉 MC 65 连接到我的计算机时，它开始使用通过计算机的数据连接，而不是通过板载 WiFi 无线电或 Cell 无线电保持连接。

我希望手持设备通过 WiFi 或 Cell 保持当前连接，而不是通过 USB 或蓝牙使用数据连接。有没有办法阻止它自动设置这个网络连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:12:12.023

if you are talking about an Internet connection in contrast to a Work connection, you can setup your PC in USB/ActiveSync/WindowsMobileDeviceCenter to use USB only for Work connections. You have to enable "Allow data connections on device when connected to PC". ![enter image description here](../Images/568f04d48a75204b0ac88bbb4e401617.png)

# php - 插入返回不完整数据的数组（MySQL/PHP）

> ID：14482868
> 
> 赞同：0
> 
> 时间：2013-01-23T15:11:26.863
> 
> 标签：php, mysql, insert

我有一个基于以下内容的插入命令：

```
$baseINS = "INSERT INTO table2 (Points_ID, StaticCode) VALUES ";
$arrayINS = explode(", ", $arraystring);
foreach ($arrayINS as &$array1INS) {
    $array1INS = "('" . $array1INS . "', '123456')";
}
$arrayvaluesINS = implode(', ', $arrayINS);
$insertSQL2 = $baseINS . $arrayvaluesINS; 
```

从以下`$insertSQL2`事务中查询：

```
$insertSQL = "BEGIN";
mysql_query($insertSQL) or die (mysql_error());
$insertSQL = $insertSQL1;
mysql_query($insertSQL) or die (mysql_error());
$insertSQL = $insertSQL2;
mysql_query($insertSQL) or die (mysql_error());
$insertSQL = "COMMIT";
mysql_query($insertSQL) or die (mysql_error()); 
```

（`$insertSQL1`另一个 SQL 插入到另一个表在哪里）

表结构如下：

> `table2` ( `ID`int(50) NOT NULL AUTO_INCREMENT,
> `StaticCode`varchar(100) NOT NULL, `Points_ID`varchar(50) NOT NULL, PRIMARY KEY ( `ID`), UNIQUE KEY `ID`( `ID`)) ENGINE=InnoDB

现在，让我们说，例如，`$insertSQL2`回声为`INSERT INTO table2 (Points_ID, StaticCode) VALUES ('24859', '123456'), ('24649', '123456'), ('25166', '123456')`

我希望 table2 中会出现三行 ...但这就是发生的情况：

*   实际上，插入命令 (`$insertSQL1`和) 都插入数据。`$insertSQL2`
*   只是，虽然`$insertSQL1`将所有表单中的所有数据插入到 table1 中的必填字段中，但`$insertSQL2`（插入数组）没有 - 它只是插入静态代码一次，并将 Points_ID 留空。

我已经通过将回显命令复制到 PHPMySQL 中测试了 INSERT 语句，它完全按照它应该做的那样做，所以我知道我的 MySQL 版本可以处理它。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:55:53.537

从您的代码看来，您正在使用 mysql 扩展。您应该使用 mysqli 或 pdo_mysql。我相信事务在 mysql 上不起作用。

mysqli 看起来几乎一样，但对于事务使用 [mysqli 功能](http://php.net/manual/en/mysqli.commit.php)

```
/* set autocommit to off */
$mysqli->autocommit(FALSE);

/* Insert some values */
$mysqli->query($insertSQL);

/* commit transaction */
$mysqli->commit(); 
```

# android - 将 center_horizintal 属性设置为 false

> ID：14482869
> 
> 赞同：0
> 
> 时间：2013-01-23T15:11:28.410
> 
> 标签：android, layoutparams

我在布局 xml 中将 align_center_horizo​​ntal 设置为 true 。但有时我确实想设置为 false 。我发现在 RelativeLayout 中没有定义这样的 FALSE 变量，因此我可以在运行时将其设为 false

如果有可能怎么实现？

假设不可能，我创建了一个新的 RelativeLayout.LayoutParams 如下

```
if (digitPadVisible == false) {    
RelativeLayout.LayoutParams params1 = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT,
        RelativeLayout.LayoutParams.WRAP_CONTENT);
        String stringDimensions = getResources().getString(
        R.dimen.active_call_options_margin_bottom);
        params1.bottomMargin = Integer.parseInt(stringDimensions
}else{
...
...
} 
```

但是当 digitPadVisible 为 false 时，进行此更改的效果不可见，而是在 digitPadVisible true 情况下可见

我认为应用 LayoutParams 不会立即生效我该如何解决这个问题

# javascript - 如何在javascript中创建对象的数组

> ID：14482872
> 
> 赞同：0
> 
> 时间：2013-01-23T15:11:38.147
> 
> 标签：javascript, arrays

我最近遇到了一个问题，我没有为对象正确创建数组。

所以我尝试在javascript中做以下事情：

```
function Mesh()
{
    this.buffer = [10, 10, 10];
}

Mesh.prototype.getBuffer = function ()
{
    return this.buffer;
};

function main()
{
    var model = new Mesh();
    var modelBuffer = model.getBuffer;
    document.getElementById("textSection").innerHTML = modelBuffer[0];
} 
```

我试图避免使用全局变量，因此我按照我在 Mesh() 构造函数中的方式创建了数组。但是当我尝试从插槽 0 中检索数据时，它会打印“未定义”。我如何得到这份工作？我真的不知道为什么会这样……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:13:02.763

尝试：

```
var modelBuffer = model.getBuffer(); 
```

代替：

```
var modelBuffer = model.getBuffer; 
```

您将函数分配给变量，而不是调用函数。

`console.log()`对于不返回您期望的变量的变量总是一个好主意。在这种情况下：

```
console.log(modelBuffer); 
```

记录：

```
// function ()
// {
//     return this.buffer;
// } 
```

`modelBuffer`例如，为我指明任务的方向。

# windows-phone-8 - WP8 + 上传文件到 Skydrive

> ID：14482876
> 
> 赞同：2
> 
> 时间：2013-01-23T15:11:54.980
> 
> 标签：windows-phone-8, onedrive, windows-live

我正在尝试将一个简单的 .cer 文件上传到 SkyDrive。无论`LiveConnectClient-Method`我使用什么，都没有任何反应。没有编译、运行时或其他异常，我的应用程序永远不会收到`LiveOperationResult`. 我正在使用模拟器，并且能够登录到 MS Live（所以我的互联网连接很好）。这是使用的代码的摘录：

```
using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
{
  using(var fileStream = store.OpenFile(certPath, FileMode.Open, FileAccess.Read, FileShare.Read))
  {
    try
    {
      client = new LiveConnectClient(session);
      //LiveOperationResult operationResult = await client.UploadAsync("me/skydrive", certPath, fileStream, OverwriteOption.Overwrite, new System.Threading.CancellationToken(false), null);
      LiveOperationResult res= await client.BackgroundUploadAsync("me/skydrive",
                                                                  new Uri("/shared/transfers/cert.cer", UriKind.Relative),
                                                                  OverwriteOption.Overwrite);
      linkTextBlock.Text = "Done"; 
```

如前所述，`TextBlock`从不显示“完成”。如果使用`UploadAsync`or`BackgroundUploadAsync`方法没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T00:00:23.033

BackgroundUploadAsync 使用[Windows Phone 后台文件传输](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955%28v=vs.105%29.aspx)，这是一个智能文件上传和下载调度系统。而 UploadAsync 使用即时 HTTP 文件上传和下载。

通过使用后台文件传输，您同意以下上传限制：

> **最大上传文件大小**
> 
> 通过蜂窝连接 - 5 MB
> 
> 通过 Wi-Fi 连接和电池供电 - 20 MB
> 
> 通过 Wi-Fi 连接与外部电源 - 100 MB

队列上传和下载的最大数量以及其他限制也有限制。阅读完整文档@http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955(v=vs.105).aspx)

所有这些限制都可能导致您的*async await*等待。尽管后台文件传输设定的限制会带来最佳用户体验（即关闭应用程序时上传）、最佳电池寿命和最佳蜂窝数据使用，但这是一种痛苦。最终由您的应用决定您是要直接使用 WebRequests (uploadAsync) 还是使用后台文件传输 (BackgroundUploadAsync)。

# qt - 防止 Qt 中的默认操作

> ID：14482878
> 
> 赞同：0
> 
> 时间：2013-01-23T15:12:02.657
> 
> 标签：qt

我正在尝试使用三个 QToolButtons 制作三个互斥的单选按钮（基本上；它们是子类）。我在设计器中将 Checkable 设置为`true`，现在有两个问题：

1.  它们需要相互排斥，即单击一个按钮应取消选中所有其他按钮。
2.  始终只选中一个按钮。

第一个很容易通过以下连接到的插槽代码解决`toggled(bool)`：

```
void Foo::slot_radio1(bool on) {
    if (on) {
        tb_radio2->setChecked(false);
        tb_radio3->setChecked(false);
    }
} 
```

其他两个按钮也是如此。不好，但有效。第二个有点棘手，这就是我的问题发挥作用的地方。

在大多数 GUI 工具包中，如果需要，您可以在事件处理程序中取消事件，如果当前活动的按钮将被关闭，则可以在此处使用它来取消切换。但是，这适用于使用事件处理程序并传递可以修改的事件对象的系统。据我所知，使用信号/插槽，您是在事后处理事件并且对它们没有影响。除了您无论如何都无权访问事件数据的问题之外。我尝试过的天真但愚蠢的方法是

```
if (!on) {
    tb_radio1->setChecked(true);
} 
```

基本上是在未选中时重新检查按钮 - 这会导致堆栈溢出，因为它会递归地再次触发每个其他插槽，一次又一次，...

通常是否有一种很好且干净的方法来实现这一目标？我宁愿不断开插槽，更改状态并再次连接它们。对于使用 Qt 多年的任何人来说，我可能会遗漏一些明显或微不足道的东西，但我想那不是我，因此它躲避了我。

* * *

现在有点乱了，但根据`blockSignals`Tim 和 Andreas 的建议，它可以工作：

```
void WinPhoenix::slot_radio1(bool on) {
    if (on) {
        bool before2 = radio2->blockSignals(true);
        bool before3 = radio3->blockSignals(true);
        radio2->setChecked(false);
        radio3->setChecked(false);
        radio2->blockSignals(before2);
        radio3->blockSignals(before3);
    } else {
        bool before = radio1->blockSignals(true);
        radio1->setChecked(true);
        radio1->blockSignals(before);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:26:48.523

> 我宁愿不断开插槽，更改状态并再次连接它们。

您可以使用[QObject::blockSignals()](http://doc.qt.digia.com/qt/qobject.html#blockSignals)暂时禁用对象发送的信号：

```
bool before = tb_radio1->blockSignals(true);
tb_radio1->setChecked(true);
tb_radio1->blockSignals(before); 
```

除此之外，您可以考虑使用[QActionGroup()](http://doc.qt.digia.com/qt/qactiongroup.html)来实现互斥。

# cakephp - 相关模型和验证

> ID：14482879
> 
> 赞同：0
> 
> 时间：2013-01-23T15:12:05.570
> 
> 标签：cakephp, associations, model-associations, cakephp-2.2

每 3 个人在我的应用中创建 1 个页面。所以每个`Page`, `hasMany` `User`.

我已经定义了一些用于检查用户信息的验证规则。（如电子邮件、电话和邮政编码检查器。）但每个页面（所有者）只需要一个电子邮件和电话号码。所以只有第一个用户需要电子邮件和电话。（其他用户不必填写。第一个用户必须这样做。）

因此，在验证第一个用户数据后，我必须删除一些验证规则。但我不知道如何使用`saveAll`( `saveAssociated`) 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:30:40.420

You can skip validation for a particular field by adding

`unset($this->User->validate['field_name']);`

before the `validates()` & `save()` calls.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:33:44.620

我必须通过将第一个用户电子邮件和电话号码复制给其他用户来管理它（并设置一些变量以保留默认电子邮件和电话）。然后，验证请求数据。然后恢复其他 2 个用户的默认值。

欢迎任何其他建议。

# ios - 在 UICollectionView 中显示图像 - 如何实现图像之间的固定垂直间距？

> ID：14482882
> 
> 赞同：10
> 
> 时间：2013-01-23T15:12:16.617
> 
> 标签：ios, ios6, uicollectionview, uicollectionviewlayout

我正在使用 UICollectionView 在 iPhone 应用程序 (iOS6) 中呈现图像网格。

我正在为 UICollectionView 使用垂直滚动，并且图像都有固定的宽度和不同的高度。图像的宽度设置为在 iPhone 上显示 3 列图像。这工作正常，我得到了网格视图中显示的图像。

但是，由于我的图像具有不同的高度，因此列中图像之间的垂直间距会发生变化，这看起来不太好，如下图所示（用 HTML 制作的模型）：

![显示图像当前布局方式的图像](../Images/e9da0ebc4bf58334549bd7034e55443f.png)

相反，我希望实现更流畅的流动，其中一列中图像之间的垂直间距相同。以下模型显示了我希望它如何工作：

![我希望图像流如何工作的示例](../Images/f5f627b243a4edf44197ee5774fe1797.png)

关于如何解决这个问题的任何想法？

此外，作为奖励问题，如果应用程序不是为 iOS6 构建的（因为 UICollectionView 仅在 iOS6 中可用），是否有人知道解决相同问题的方法。通过使用 3rd 方组件或使用标准 iOS 控件解决它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T22:33:58.017

子类 UICollectionViewFlowLayout 并在该类中添加这些方法。（请注意，这假定垂直方向，它会跳过第一行，并且它们之间是恒定的 10 个像素。请参阅：如果需要水平版本[，如何确定 UICollectionView flowLayout 中的单元格之间的间距](https://stackoverflow.com/questions/13017257/how-do-you-determine-spacing-between-cells-in-uicollectionview-flowlayout)

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {
NSArray* arr = [super layoutAttributesForElementsInRect:rect];
for (UICollectionViewLayoutAttributes* atts in arr) {
    if (nil == atts.representedElementKind) {
        NSIndexPath* ip = atts.indexPath;
        atts.frame = [self layoutAttributesForItemAtIndexPath:ip].frame;
    }
}
return arr;
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath {
UICollectionViewLayoutAttributes* atts =
[super layoutAttributesForItemAtIndexPath:indexPath];

if (indexPath.item == 0 || indexPath.item == 1) // degenerate case 1, first item of section
    return atts;

NSIndexPath* ipPrev =
[NSIndexPath indexPathForItem:indexPath.item-2 inSection:indexPath.section];

CGRect fPrev = [self layoutAttributesForItemAtIndexPath:ipPrev].frame;
CGFloat rightPrev = fPrev.origin.y + fPrev.size.height + 10;
if (atts.frame.origin.y <= rightPrev) // degenerate case 2, first item of line
    return atts;

CGRect f = atts.frame;
f.origin.y = rightPrev;
atts.frame = f;
return atts;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-20T11:35:52.397

对于 Swift 3，这段代码对我有用，包括第一行到顶部的空间......

```
override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
    let arr = super.layoutAttributesForElements(in: rect)

    for atts:UICollectionViewLayoutAttributes in arr! {
        if nil == atts.representedElementKind {
            let ip = atts.indexPath
            atts.frame = (self.layoutAttributesForItem(at: ip)?.frame)!
        }
    }
    return arr
}

override func layoutAttributesForItem(at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
    let atts = super.layoutAttributesForItem(at: indexPath)

    if indexPath.item == 0 || indexPath.item == 1 {
        var frame = atts?.frame;
        frame?.origin.y = sectionInset.top;
        atts?.frame = frame!;
        return atts
    }

    let ipPrev = IndexPath(item: indexPath.item - 2, section: indexPath.section)

    let fPrev = self.layoutAttributesForItem(at: ipPrev)?.frame

    let rightPrev = (fPrev?.origin.y)! + (fPrev?.size.height)! + 10

    if (atts?.frame.origin.y)! <= rightPrev {
        return atts
    }

    var f = atts?.frame
    f?.origin.y = rightPrev
    atts?.frame = f!
    return atts
} 
```

# javascript - 从 ajax 请求访问 json

> ID：14482883
> 
> 赞同：0
> 
> 时间：2013-01-23T15:12:24.357
> 
> 标签：javascript, ajax, json

> **可能重复：**
> [将 PHP json_encode 数组发送到 jQuery](https://stackoverflow.com/questions/4240763/sending-php-json-encode-array-to-jquery)

我有一个小函数，它通过 $.post 在数据库中搜索名称，并返回具有匹配搜索详细信息的用户详细信息。json 是在 php 中生成的，如下所示：

> 数组 (
> [0] => 数组 ( [user] => 17 [fn] => blah [ln] => gnaaa [email] => hello@gmail.com )
> [1] => 数组 ( [user] => 18 [fn] => blee [ln] => gnaaa [email] => apple@fdf.com )
> [2] => 数组 ( [user] => 19 [fn] => 橙色 [ln] => gnaaa [电子邮件] => 香蕉@gnsd.com ) )

现在 javascript 从 html 中提取用户输入数据，并将其发布到 php 脚本

```
function searchuser() {  
    var searchvar = $('#searchbar').html();
    $.post("Scripts/search.php", {name: searchvar}, function(data) {
        alert("userid: " + data[0][user]);
    });
} 
```

所以在这里我试图提醒 17 号，但似乎没有任何效果。我猜我的语法有问题，但我不知道正确的方法是什么。我也在使用 jQuery，所以我猜有一种更简洁的方法可以做到这一点，但我想先尝试纯 javascript。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:16:38.893

为了将“数据”解析为 JSON 对象，您需要`dataType: "json"`在 post 调用中添加或“jsonp”。

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# javascript - 为某些页面存储全局数据的最佳方式

> ID：14482886
> 
> 赞同：0
> 
> 时间：2013-01-23T15:12:31.640
> 
> 标签：javascript, html

我使用 JavaScript 并想问也许我没有使用完全正确的方法。例如，我有“课程”：

```
function Games() {
this.a='';
.
.

} 
```

和：

```
functios GamesTypes() {
this.b='';
.
.

} 
```

对于我声明对象的每个类：

```
var games = new Games(); 
```

很多次点击元素后，我需要在下一页显示游戏名称，例如，当用户点击游戏时，我设置

```
Games.a="game55"; 
```

接下来所有页面都会读取并显示它：

```
 var toDisplay = Games.a; 
```

存储一些应该在某些页面中显示的数据是不是最好的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:07:21.160

你没有做坏事，至少在我看来。只需考虑在 JavaScript 中，没有必要为您可能需要的任何类型的预设对象创建“类”或构造函数，只需使用 Object 本机对象就可以节省一些时间来声明这些构造函数。

例如，如果您需要创建一个名为 B 的新页面，该页面与之前的页面 A 相似，并且您有一个 A 的对象，该对象具有所需的所有属性和方法，请使用`B = Object.create(A)`创建一个新对象 B它将继承 A 的所有属性和方法，因为 A 将是 B 的原型。

一个简单的例子

```
A = {
something : value,
someOtherThing : value,
method : function () {
      ...
   }
...
}
B = Object.create(A); // Now B inheriths the properties and methods from A 
```

这样，您不必为每种类型的页面声明构造函数，只需让对象继承它们需要的内容（如果它已经在另一个对象中），然后将所有内容添加到新页面。您还可以通过使用新值声明 B 从 A 继承的属性来覆盖它们。

# java - 如何切换xml布局排序

> ID：14482887
> 
> 赞同：0
> 
> 时间：2013-01-23T15:12:41.560
> 
> 标签：java, android, layout

我想知道如何根据条件更改 xml 文件的布局。所以可以说我们有这样的布局..

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"

> 
```

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@drawable/app_background"
 android:padding="5dip"
 >

<ListView android:id="@+id/xlist"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:cacheColorHint="#00000000"

            android:divider="@drawable/listdivider"
            android:dividerHeight="19dp"

           />
  <TextView 
              android:layout_width="fill_parent"
              android:background="@drawable/listdivider"
              android:layout_height="19dp"
              android:visibility="gone"
             android:id="@+id/dividerline"
              />
  <ListView android:id="@+id/ylist"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:cacheColorHint="#00000000"
             android:divider="@drawable/listdivider"
            android:dividerHeight="19dp"

           />
</LinearLayout>
</LinearLayout> 
```

因此，您将两个变量设置为列表视图，并且基于 xml，“xlist”将出现在“ylist”之前。但是对于我的代码，如果满足某个条件，我想切换此视图的顺序。那么我将如何切换顺序，以便如果满足某个条件，“ylist”将出现在“xlist”上方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:29:51.933

An easy way to do that is to put each view in its own xml file. Then at runtime attach them to the linearLayout in the desired order.

Say your layout file is: main.xml and you have list_a.xml, list_b.xml, and textview.xml

in your activity:

```
@Override

public void onCreate(Bundle bundle) {
 Super.onCreate(bundle);
 setContentView(R.layout.main);
 LinearLayout layout = (LinearLayout) findViewById(R.id.layout);
 LayoutInflater inflater = getLayoutInflater();
 if (condition) {
 inflater.inflate(R.layout.list_a, layout);
 inflater.inflate(R.layout.textview, layout);
 inflater.inflate(R.layout.list_b, layout);

} else { 
     inflater.inflate(R.layout.list_b, layout);
 inflater.inflate(R.layout.textview, layout);
 inflater.inflate(R.layout.list_a, layout);
 }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:27:17.977

从来没有这样做过，但这应该有效：

```
public void switchViewOrder(final ViewGroup parent, final int view1Id, final int view2Id) {

    View view1 = null;
    int view1pos = -1;
    View view2 = null;
    int view2pos = -1;

    int count = parent.getChildCount();
    for(int i = 0; i < count; i++) {
        View cur = parent.getChildAt(i);
        if (view1Id == cur.getId()) {
            view1 = cur;
        } else if (view2Id == cur.getId()) {
            view2 = cur;
        }
    }

    parent.removeViewAt(view1pos);
    parent.removeViewAt(view2pos);

    parent.addView(view1, view2pos);
    parent.addView(view2, view1pos);
} 
```

我让你添加适当的空值和类似的检查。

# r - 为什么当一个值为NA时R不计算相关性？

> ID：14482893
> 
> 赞同：-4
> 
> 时间：2013-01-23T15:12:55.117
> 
> 标签：r, binary, correlation

我有两个目录。我使用下面给出的代码来计算这些文件之间的空间相关性，并且效果很好。所以基本上我想告诉 R：即使两个像素之间存在 NA（在两个文件中），它也会忽略它，但会计算其余的像素（11 个像素）。

```
 for(i in 1:length(dir1)){
    file_tot[,,i,1] <- dir1[i], numeric(), size = 4 , signed = T
   file_tot[,,i,2] <- dir2[i], numeric(), size = 4 ,  signed = T
   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T15:14:43.680

在`cor`默认情况下`use="everything"`，其中包括`NA`. 阅读`?cor`，特别是`use`用于确定应针对特定情况将其设置为哪个值的参数。

# javascript - openlayers - 我如何旋转图像层

> ID：14482894
> 
> 赞同：1
> 
> 时间：2013-01-23T15:12:56.163
> 
> 标签：javascript, openlayers

我有一个 OpenLayers.Layer.Image 对象。有没有办法使用 openlayers 旋转它？

请不要建议使用 jquery 旋转整个 div，当我这样做时，我会失去 openlayers 的缩放和平移效果..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T22:28:03.250

There's not really a way to do this with an OpenLayers image. You can, however, workaround this by using a vector layer.

**Using Vectors to Rotate an Image**

If you'd like to add a rotated image to the map, as well as maintain zoom and pan features of the map relative to the image, you can do the following:

Create a vector layer, and set the `externalGraphic` = your image src:

```
var styleMap = new OpenLayers.Style({
    externalGraphic: "${getUrl}" // attribute replacement syntax
}, {context: context});
var vectorLayer = new OpenLayers.Layer.Vector("My Image Overlay", {
    styleMap: styleMap
});
map.addLayers([vectorLayer]); 
```

Next, create a vector feature whose external graphic matches the source of your image:

```
var newPoint = new OpenLayers.Geometry.Point(x, y);
var pointFeature = new OpenLayers.Feature.Vector(newPoint);
pointFeature.attributes.externalGraphic = "path/to/image/src/"; 
```

Add the feature to your vector layer:

```
vectorLayer.addFeatures([pointFeature]); 
```

Then rotate it. For this you simply need to configure a point of origin about which your image will rotate:

```
var origin = new OpenLayers.Geometry.Point(x, y); // should match coordinates of pointFeature
var center = new OpenLayers.Feature.Vector(origin);
vectorLayer.addFeatures([center]); 
```

You can optionally change style attributes of your origin of rotation to hide it from the map if desired.

Finally, change the orientation of your pointFeature to place as desired:

```
pointFeature.geometry.rotate(angle, origin);
pointFeature.layer.drawFeature(pointFeature); 
```

More examples of how to do this [here](http://openlayers.org/dev/examples/rotate-features.html) and [here](http://openlayers.org/dev/examples/styles-rotation.html).

# sql - 列出所有最大长度和最大长度的 SQL 列

> ID：14482897
> 
> 赞同：17
> 
> 时间：2013-01-23T15:13:02.780
> 
> 标签：sql, sql-server, tsql, sql-server-2008

我正在尝试从表中获取所有列的列表，其中包含它们的数据类型、数据长度和该列中最长值的长度。

我有这个 SQL 用于获取列及其数据类型和长度：

```
SELECT 
    Object_Name(c.object_id),
    c.name 'Column Name',
    t.Name 'Data type',
    c.max_length 'Max Length'
FROM    
    sys.columns c
INNER JOIN 
    sys.types t ON c.system_type_id = t.system_type_id
WHERE
    c.object_id = OBJECT_ID('MyTable') 
```

我有这个 SQL 来获取一个值的最大长度：

```
SELECT Max(Len(MyColumn))
FROM MyTable 
```

但我不知道如何将它们结合起来。我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T14:47:07.523

Thanks for the suggestions. I have come up with the following solution. It gets me the data i need but would be interested to see if it can be made more efficient.

```
declare @results table
(
ID varchar(36),
TableName varchar(250),
ColumnName varchar(250),
DataType varchar(250),
MaxLength varchar(250),
Longest varchar(250),
SQLText varchar(250)
)

INSERT INTO @results(ID,TableName,ColumnName,DataType,MaxLength,Longest,SQLText)
SELECT 
    NEWID(),
    Object_Name(c.object_id),
    c.name,
    t.Name,
    case 
        when t.Name != 'varchar' Then 'NA'
        when c.max_length = -1 then 'Max' 
        else CAST(c.max_length as varchar)
    end,
    'NA',
    'SELECT Max(Len(' + c.name + ')) FROM ' + OBJECT_SCHEMA_NAME(c.object_id) + '.' + Object_Name(c.object_id)
FROM    
    sys.columns c
INNER JOIN 
    sys.types t ON c.system_type_id = t.system_type_id
WHERE
    c.object_id = OBJECT_ID('MyTable')    

DECLARE @id varchar(36)
DECLARE @sql varchar(200)
declare @receiver table(theCount int)

DECLARE length_cursor CURSOR
    FOR SELECT ID, SQLText FROM @results WHERE MaxLength != 'NA'
OPEN length_cursor
FETCH NEXT FROM length_cursor
INTO @id, @sql
WHILE @@FETCH_STATUS = 0
BEGIN
    INSERT INTO @receiver (theCount)
    exec(@sql)

    UPDATE @results
    SET Longest = (SELECT theCount FROM @receiver)
    WHERE ID = @id

    DELETE FROM @receiver

    FETCH NEXT FROM length_cursor
    INTO @id, @sql
END
CLOSE length_cursor
DEALLOCATE length_cursor

SELECT 
    TableName, 
    ColumnName, 
    DataType, 
    MaxLength, 
    Longest 
FROM 
    @results 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-20T21:13:13.433

这是我用来分析可能有用的数据的东西。只需将“您的表名”更改为您的表名。它旨在向您展示可以修剪列的位置。

```
DECLARE @YourTableName sysname;
DECLARE @sql nvarchar(MAX) = ''
SET @YourTableName = YOUR TABLE NAME 
CREATE TABLE #resultsTable (columnName varchar(100), columnLargestValueInData int, columnMaxLength int)

DECLARE @whileIter int = 1
DECLARE @whileTotal int  

SELECT @whileTotal = COUNT(*) FROM sys.columns c
                            INNER JOIN 
                                sys.types t ON c.user_type_id = t.user_type_id
                            WHERE
                                c.object_id = OBJECT_ID(@YourTableName)
-- print 'whileTotal: ' + CONVERT(VARCHAR,@whileTotal) -- used for testing
WHILE @whileIter <= @whileTotal
BEGIN

SELECT  @sql =  N'INSERT INTO #resultsTable (columnName,  columnLargestValueInData, columnMaxLength) SELECT ''' + sc.name + ''' AS columnName, max(len([' + sc.name + '])), ' + CONVERT(varchar,sc.max_length) + ' FROM [' + t.name + ']'  
FROM  sys.tables AS t
INNER JOIN sys.columns AS sc ON t.object_id = sc.object_id
INNER JOIN sys.types AS st ON sc.system_type_id = st.system_type_id
WHERE column_id = @whileIter
AND t.name = @YourTableName
AND st.name IN ('char', 'varchar', 'nchar', 'nvarchar')

PRINT @sql

exec sp_executesql @sql
SET @whileIter += 1
END
SELECT * FROM #resultsTable

TRUNCATE TABLE #resultsTable
DROP TABLE #resultsTable 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-11T20:57:29.790

这是我使用多年的版本。它用下划线代替空格，以给出带有尾随空格的真实数据长度。

```
set nocount on;
declare @TableName varchar(150) = 'TableName';
declare @Schema varchar(20) = 'TableSchema';
declare @Columns varchar(max);
declare @Unpivot varchar(max);
declare @SQL varchar(max);

select  @Columns = STUFF((
select  ',max(len(replace([' + COLUMN_NAME + '],'' '',''_'')))[' + COLUMN_NAME + '/' 
        + isnull(ltrim(CHARACTER_MAXIMUM_LENGTH),DATA_TYPE) + ']' + CHAR(10) + CHAR(9)
from    INFORMATION_SCHEMA.COLUMNS
where   TABLE_SCHEMA = @Schema
        and TABLE_NAME = @TableName
order   by ORDINAL_POSITION
for XML PATH('')),1,1,'')

select  @Unpivot = STUFF((
select  ',[' + COLUMN_NAME + '/' + isnull(ltrim(CHARACTER_MAXIMUM_LENGTH),DATA_TYPE) + ']'
from    INFORMATION_SCHEMA.COLUMNS
where   TABLE_SCHEMA = @Schema
        and TABLE_NAME = @TableName
order   by ORDINAL_POSITION
for XML PATH('')),1,1,'')

select  @SQL = 
'select DataSize, ColumnName [ColumnName/Size]
from    (
        select ' + @Columns + 'from [' + @Schema + '].[' + @TableName + ']
        )x 
unpivot (DataSize for ColumnName in (' + @Unpivot + '))p'

print (@SQL)
exec (@SQL) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T15:20:02.150

```
 SELECT TOP 1 WITH TIES
        Object_Name(c.object_id) ObjectName,
        c.name [Column Name],
        t.Name [Data type],
        c.max_length [Max Length]
    FROM    
        sys.columns c
    INNER JOIN 
        sys.types t ON c.system_type_id = t.system_type_id
    WHERE
        c.object_id = OBJECT_ID('MyTable')
    ORDER BY c.max_length DESC 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-19T15:07:00.197

我扩展了 CeejeeB 的解决方案，添加了新字段（Min、Max、NullCount 和 CountDinstict），并修复了一个用 [] 围绕 db 名称的错误。
此外，我管理了 unicode 类型的大小。

随意尝试更改后的 SQL 脚本，但**请注意，因为该脚本会分析**当前数据库的所有用户定义表，并且可能需要很多时间才能完成......

```
DECLARE @results TABLE (
    ID VARCHAR(36)
    ,TableName VARCHAR(250)
    ,ColumnName VARCHAR(250)
    ,DataType VARCHAR(250)
    ,MaxLength INT
    ,Longest INT
    ,Min VARCHAR(250)
    ,Max VARCHAR(250)
    ,NullCount BIGINT
    ,CountDistinct BIGINT
    ,SQLText VARCHAR(MAX)
    )

INSERT INTO @results (
    ID
    ,TableName
    ,ColumnName
    ,DataType
    ,MaxLength
    ,SQLText
    )
SELECT NEWID() AS ID
    ,Object_Name(c.object_id) AS TableName
    ,c.name AS ColumnName
    ,t.name AS DataType
    ,CASE 
        WHEN t.name NOT IN (
                'char'
                ,'varchar'
                ,'nchar'
                ,'nvarchar'
                ,'sysname'
                ,'text'
                )
            THEN c.max_length
        WHEN c.max_length = - 1
            THEN c.max_length
        ELSE CASE 
                WHEN t.name IN (
                        'nchar'
                        ,'nvarchar'
                        ,'sysname'
                        )
                    THEN c.max_length / 2
                ELSE c.max_length
                END
        END AS MaxLength
    ,'SELECT Max(Len(' + CASE t.name
        WHEN 'text'
            THEN 'cast('
        ELSE ''
        END + '[' + c.name + ']' + CASE t.name
        WHEN 'text'
            THEN ' as varchar(max))'
        ELSE ''
        END + ')) AS MaxLength,
        Min(' + CASE t.name
        WHEN 'bit'
            THEN 'CONVERT(int,'
        WHEN 'text'
            THEN 'cast('
        ELSE ''
        END + '[' + c.name + ']' + CASE t.name
        WHEN 'bit'
            THEN ')'
        WHEN 'text'
            THEN ' as varchar(max))'
        ELSE ''
        END + ') AS Min,
        Max(' + CASE t.name
        WHEN 'bit'
            THEN 'CONVERT(int,'
        WHEN 'text'
            THEN 'cast('
        ELSE ''
        END + '[' + c.name + ']' + CASE t.name
        WHEN 'bit'
            THEN ')'
        WHEN 'text'
            THEN ' as varchar(max))'
        ELSE ''
        END + ') AS Max, sum(case when ' + '[' + c.name + ']' + ' is null then 1 else 0 end) AS  NullCount, 
        COUNT_BIG(DISTINCT ' + CASE t.name
        WHEN 'text'
            THEN 'cast('
        ELSE ''
        END + '[' + c.name + ']' + CASE t.name
        WHEN 'text'
            THEN ' as varchar(max))'
        ELSE ''
        END + ') AS CountDistinct 
        FROM [' + OBJECT_SCHEMA_NAME(c.object_id) + '].[' + Object_Name(c.object_id) + ']' AS SQLText
FROM sys.columns c
INNER JOIN sys.types t ON c.system_type_id = t.system_type_id
INNER JOIN sys.objects o ON c.object_id = o.object_id
WHERE o.type = 'U'

DECLARE @id VARCHAR(36)
DECLARE @SQL VARCHAR(MAX)
DECLARE @receiver TABLE (
    Longest INT
    ,Min VARCHAR(250)
    ,Max VARCHAR(250)
    ,NullCount BIGINT
    ,CountDistinct BIGINT
    )

DECLARE length_cursor CURSOR
FOR
SELECT ID
    ,SQLText
FROM @results

OPEN length_cursor

FETCH NEXT
FROM length_cursor
INTO @id
    ,@SQL

WHILE @@FETCH_STATUS = 0
BEGIN
    INSERT INTO @receiver (
        Longest
        ,Min
        ,Max
        ,NullCount
        ,CountDistinct
        )
    EXEC (@SQL)

    UPDATE @results
    SET Longest = r.Longest
        ,Min = r.Min
        ,Max = r.Max
        ,NullCount = r.NullCount
        ,CountDistinct = r.CountDistinct
    FROM @receiver r
    WHERE ID = @id

    DELETE
    FROM @receiver

    FETCH NEXT
    FROM length_cursor
    INTO @id
        ,@SQL
END

CLOSE length_cursor

DEALLOCATE length_cursor

SELECT TableName
    ,ColumnName
    ,DataType
    ,MaxLength
    ,Longest
    ,Min
    ,Max
    ,NullCount
    ,CountDistinct
FROM @results 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-20T10:41:59.460

更正了上面的查询

```
SELECT 
    Object_Name(c.object_id),
    c.name 'Column Name',
    t.name 'Data type',
    c.max_length 'Max Length'
FROM    
    sys.columns c
INNER JOIN 
    sys.types t ON c.user_type_id = t.user_type_id
WHERE
    c.object_id = OBJECT_ID('tablename') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-30T22:16:57.170

添加：和 t.user_type_id = 167，否则，您将获得非 varchars 的副本。我知道还有其他类型，这是针对特定表的快速修复

在 c.object_id = OBJECT_ID(@YourTableName) 之后

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-07T09:11:30.657

请注意，上面提到的所有查询都会报告一些“奇怪”的大小 - 特别是对于 n... 类型（nvarchar / nchar）。这个稍作修改的查询修复了这个问题：

```
DECLARE @tableName AS NVARCHAR(200) = 'Items'

SELECT 
    Object_Name(c.object_id) AS 'Table',
    c.name AS 'Column Name',
    t.name AS 'Data type',
    CASE WHEN t.name LIKE 'n%' THEN c.max_length / 2 ELSE c.max_length END AS 'Max Length'
FROM    
    sys.columns c
INNER JOIN 
    sys.types t ON c.user_type_id = t.user_type_id
WHERE
    c.object_id = OBJECT_ID(@tableName) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-08T17:35:18.867

最后想出这个来找到表中每一列的最大数据长度和最大长度

```
SELECT name, max_length, MAX(DATALENGTH(name))
FROM sys.columns
WHERE OBJECT_ID = OBJECT_ID('table name')
GROUP BY name, max_length 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-04T17:06:35.393

按大小比较 TableA 列和 TableB 列是不够的。您必须从 tableA 获取每列数据的最大数据长度，然后将其与 TableB 列大小进行比较以找到罪魁祸首列。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-24T09:50:35.987

尝试了大多数解决方案，但只有这个对我有用。感谢作者的描述。

只需将前两行更改为您的表格名称`TableName`并`SchemaName`计划您的表格所在的位置。确保您在正确的数据库上执行或只是放

```
Use 
yourDatabse
go 
```

在这个脚本的开头。

```
/**************************************
SQL to get max length of values in every table column.

This SQL queries the specified table to get the max length
of all the values in every column.

To work, load all the incoming data into a "permanent" temporary table
where every column is defined as a varchar(max).

Then run this script against that "permanent" temporary table, comparing
the results against the original table's schema to see what column, and
then what record(s), is/are causing the issue.

Example, if the max length of a value in one of the columns is 270,
but your original table's schema is varchar(255), obviously either
the original table's schema will have to be altered or the data corrected.

Code from: http://cc.davelozinski.com
**************************************/

--The table we'll be performing this query on to get the lengths of every column.
--Default is dbo schema. Change as appropriate for your table.
DECLARE @TableName VARCHAR(200) = 'TableName'
       ,@SchemaName VARCHAR(200) = 'SchemaName'

DECLARE @MaxLengthDefault INT
       ,@Column VARCHAR(50)
       ,@MaxLength INT
       ,@MaxLengthString VARCHAR(10)
       ,@ColumnID INT
       ,@MaxColumnID INT
       ,@Command VARCHAR(2000)

CREATE TABLE #Temp (
       column_name VARCHAR(50)
       ,max_length INT
       ,max_length_default INT
)

SELECT @ColumnID = min(b.[column_id])
       ,@MaxColumnID = max(b.[column_id])
FROM sys.tables a
INNER JOIN sys.columns b on a.[object_id] = b.[object_id]
WHERE a.[name] = @TableName
       and SCHEMA_NAME(a.[schema_id]) = @SchemaName

--SELECT @ColumnID, @MaxColumnID

WHILE(@ColumnID <= @MaxColumnID)
BEGIN
    SET @Column = null

    SELECT @Column = b.[name]
              ,@MaxLengthDefault = b.[max_length]
       FROM sys.tables a
       INNER JOIN sys.columns b on a.[object_id] = b.[object_id]
       WHERE a.[name] = @TableName
              and SCHEMA_NAME(a.[schema_id]) = @SchemaName
              and b.[column_id] = @ColumnID

    --SELECT @Column, @MaxLengthDefault

    IF ( @Column is not null )
    BEGIN
              SET @Command = 'INSERT INTO #Temp(column_name, max_length, max_length_default)
                SELECT ''' + @Column + '''
                ,MAX(LEN(CAST([' + @Column + '] as VARCHAR(8000))))
                ,' + CAST(@MaxLengthDefault as VARCHAR(5)) +
                ' FROM [' + @SchemaName + '].[' + @TableName + ']
                WHERE [' + @Column + '] IS NOT NULL'
              --SELECT @Command
              EXEC(@Command)
       END

    SET @ColumnID = @ColumnID + 1
END

SELECT * FROM #Temp

DROP TABLE #Temp 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-01-23T15:47:09.717

答案相当复杂。您需要使用动态 SQL 来组合查询或在 Excel 中完成工作。您需要将系统表中的元数据（我将使用 Information_Schema.Columns）与表本身的数据结合起来。

*[我的书Data Analysis Using SQL and Excel](https://rads.stackoverflow.com/amzn/click/com/0470099518)*第 84-90 页解释了如何做到这一点。这个网站的答案太长了。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2020-01-23T06:35:08.383

我们可以使用以下查询来查找列名、数据类型、列长度：

```
SELECT owner, 
       column_name, 
       data_type, 
       data_length 
FROM   all_tab_columns 
WHERE  table_name = 'write your table name here' 
       AND owner = 'write your column name here' 
ORDER  BY column_id; 
```

上面的查询既可以作为普通查询也可以作为 PL/SQL 使用。

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2014-08-05T09:29:59.877

稍作修改，但效果很好。

```
SELECT 
    Object_Name(c.object_id),
    c.name 'Column Name',
    t.name 'Data type',
    c.max_length 'Max Length',
    MAX(LEN(C.NAME))
FROM    
    sys.columns c
INNER JOIN 
    sys.types t ON c.user_type_id = t.user_type_id
WHERE
    c.object_id = OBJECT_ID('<table name>')
GROUP BY 
    Object_Name(c.object_id),
    c.name ,
    t.name ,
    c.max_length 
```

# android - 无法在低于 3.0 android 的设备上移动屏幕内容

> ID：14482904
> 
> 赞同：0
> 
> 时间：2013-01-23T15:13:20.000
> 
> 标签：android, layout

我需要在左侧移动屏幕内容，因此我使用此代码来获取内容

```
try {
        content = ((LinearLayout) act.findViewById(android.R.id.content)
                .getParent());
    } catch (ClassCastException e) {
        /*
         * When there is no title bar
         * (android:theme="@android:style/Theme.NoTitleBar"), the
         * android.R.id.content FrameLayout is directly attached to the
         * DecorView, without the intermediate LinearLayout that holds the
         * titlebar plus content.
         */
        content = (FrameLayout) act.findViewById(android.R.id.content);
    } 
```

我注意到在 android > 3.0 的设备上，内容设置在 try 块中，在设备 < 3.0 上，它进入 catch 块。这里我移动内容：

```
FrameLayout.LayoutParams pr = (android.widget.FrameLayout.LayoutParams) content
                    .getLayoutParams();
            pr.rightMargin = menuSize;
            pr.leftMargin = -menuSize;
            content.setLayoutParams(pr); 
```

因此，在设备 >3.0 上一切正常，内容 si 移动，在设备 <3.0 上什么都没有发生，内容只是坐着没有变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:37:46.913

如果未设置重力，则找到答案 FrameLayout 不会考虑边距。

# linq - 使用键过滤嵌套的 DTO

> ID：14482905
> 
> 赞同：0
> 
> 时间：2013-01-23T15:13:21.530
> 
> 标签：linq, c#-4.0, entity-framework-4, linq-to-objects, public

我有 DTO Suach 的列表：

```
 Public Class UKey
{
    public Int64 Key{ get; set; }

}

Public Class Test : UKey
{
    public Int64? CityId  { get; set; }
    public Test2  test2{ get; set; }
}
Public Class Test2 : UKey
{
    public Int64? CountryId { get; set; }
    public Test3 test3 {get;set;}
}
public Class Test3 :UKey
{

} 
```

我有嵌套的 DTO，例如类 test 有一个类 test 2 的成员，类 test2 有一个类型类 test 3 的成员，每个类都有它自己的唯一键，这个键不能在其中任何一个中重复，类似于 GUId . 我想查询 Class Test 以找到具有给定唯一键的嵌套 Dto 之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:55:01.460

假设tests对象是IEnumerable，它是一组Test对象；

```
tests.SingleOrDefault(q => q.test2.Key == id || q.test2.test3.Key == id); 
```

更新：您需要应用递归搜索。我稍微改变了基类；

```
public class UKey
{
public Int64 Key { get; set; }
public UKey ReferencedEntity { get; set; }
} 
```

和搜索功能：

```
private UKey Search(UKey entity, Int64 id)
{
    UKey result = null;
    if (entity.Key == id)
        result = entity;
    else
    {
        result = this.Search(entity.ReferencedEntity,id);
    }
    return result;
} 
```

# c# - 有没有关于如何使用 C# 和 NAudio 实时为音频添加过载效果的教程？

> ID：14482907
> 
> 赞同：4
> 
> 时间：2013-01-23T15:13:23.277
> 
> 标签：c#, naudio, distortion, guitar

我正在使用 C# 和 NAudio 为电吉他制作过载踏板。到目前为止，我已经设法从麦克风输入实时输出声音，但现在需要一种过度驱动声音的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:06:39.063

实现自己的效果最好的方法是将音频转换为 32 位浮点，然后实现自己的`ISampleProvider`接口。在该`Read`方法中，您从源中读取请求数量的样本，执行您的 DSP，然后将它们写入输出缓冲区。不幸的是，NAudio 不包含过载效果，但您可能会在[musicdsp.org](http://musicdsp.org/archive.php?classid=4)找到一些代码来帮助您入门。

要查看 NAudio 用于应用音频效果的一些示例，请查看[.NET 录音机](http://voicerecorder.codeplex.com)（可以进行自动调谐）和[Skype Voice Changer](http://skypefx.codeplex.com)（包括音高转换）。这两个样本都早于`ISampleProvider`接口，因此它们实现了自己的从字节数组到浮点样本的转换。

# mysql - 如何删除所有最旧的记录，直到某些数字字段的 SUM 达到某个值（TOT）

> ID：14482911
> 
> 赞同：2
> 
> 时间：2013-01-23T15:13:28.990
> 
> 标签：mysql

在 a`MySQL 5.0`的表中，我希望删除最旧的记录，直到*某些数字字段的 SUM 达到某个*称为 TOT（某个阈值）的值。

我在表中有以下字段：

```
ID, field0 (varchar), field1 (INT), field2 (INT), field3 (int), date 
```

我需要一个查询来选择所有最旧的记录，直到达到总和值 (TOT)

```
SELECT ID, SUM(field1,field2,field3) as TOT 
    WHERE field0 = '$username' .... ORDER BY date ASC 
```

目的：删除较旧的记录，直到 3 个数字字段的 SUM 达到某个值 TOT。

有小费吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:30:36.720

因为你没有给你表的实际表描述。在我的回答中，我`Worker`在我的`COMPANY`数据库中使用 a ：

在我的`Worker`表中，我有三个薪水字段，类似于 you `field1`，`field2`& `field3`。实际描述如下：

```
mysql> DESC `Worker`;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| SSN     | varchar(64) | NO   |     | NULL    |       |
| name    | varchar(64) | YES  |     | NULL    |       |
| salary1 | int(11)     | YES  |     | NULL    |       |
| salary2 | int(11)     | YES  |     | NULL    |       |
| salary3 | int(11)     | YES  |     | NULL    |       |
| Date    | int(11)     | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
6 rows in set (0.00 sec) 
```

在此表中，我添加`Date`为整数（您可以在 MySQL 中使用实际*数据类型）。*

假设表有以下元组：

```
mysql> SELECT * FROM `Worker` ORDER BY `Date` ASC ;
+-----+---------+---------+---------+---------+------+
| SSN | name    | salary1 | salary2 | salary3 | Date |
+-----+---------+---------+---------+---------+------+
| 3   | Sumit   |     250 |     150 |     100 |    2 |
| 4   | Harsh   |     500 |    -150 |     900 |    2 |
| 5   | ONE     |     100 |     170 |     100 |    9 |
| 2   | Rahul   |     300 |      15 |      30 |   10 |
| 1   | Grijesh |     200 |     100 |      50 |   13 |
| 7   | THREE   |    1000 |      17 |    -200 |   21 |
| 6   | TWO     |      50 |    -170 |     200 |   27 |
+-----+---------+---------+---------+---------+------+ 
```

[ASC 订单显示在上面的查询]中，[日期是我说的类型]

假设我需要删除所有*的旧*工人，他们的工资总和刚刚超过`N`（`N`在你的情况下就像阈值 TOT）。要选择年长的工人，我需要按同意 ( *ASC* ) 顺序 对`Worker`表格进行排序。

 *[您可以假设的日期作为工人加入公司的日期。这么**老是根据加入的日期**那是经验]

在编写选择查询之前，我向您展示了一些结果：

```
mysql> SELECT * , `salary1` + `salary2` + `salary3` AS TSalary  
    -> FROM `Worker` ORDER BY DATE ASC ; 

+-----+---------+---------+---------+---------+------+---------+
| SSN | name    | salary1 | salary2 | salary3 | Date | TSalary |
+-----+---------+---------+---------+---------+------+---------+
| 3   | Sumit   |     250 |     150 |     100 |    2 |     500 |
| 4   | Harsh   |     500 |    -150 |     900 |    2 |    1250 |
| 5   | ONE     |     100 |     170 |     100 |    9 |     370 |
| 2   | Rahul   |     300 |      15 |      30 |   10 |     345 |
| 1   | Grijesh |     200 |     100 |      50 |   13 |     350 |
| 7   | THREE   |    1000 |      17 |    -200 |   21 |     817 |
| 6   | TWO     |      50 |    -170 |     200 |   27 |      80 |
+-----+---------+---------+---------+---------+------+---------+
7 rows in set (0.01 sec) 
```

`TSalary`是工人获得的总工资，它是三个组成部分的总和`salary1`，`salary2`& `salary3`（*如上面的查询所示*）

每个级别的工资总和是多少（对于表的每个子集）：

```
+-----+---------+---------+---------+---------+------+---------+
| SSN | name    | salary1 | salary2 | salary3 | Date | TSalary | SUM(TSalary) at
+-----+---------+---------+---------+---------+------+---------+ each level
| 3   | Sumit   |     250 |     150 |     100 |    2 |     500 |500
| 4   | Harsh   |     500 |    -150 |     900 |    2 |    1250 |500 + 1250= 1750
| 5   | ONE     |     100 |     170 |     100 |    9 |     370 |1750 + 370= 2120
| 2   | Rahul   |     300 |      15 |      30 |   10 |     345 |2120 + 345= 2465
| 1   | Grijesh |     200 |     100 |      50 |   13 |     350 |2465 + 350= 2815 
| 7   | THREE   |    1000 |      17 |    -200 |   21 |     817 |2815 + 817= 3632
| 6   | TWO     |      50 |    -170 |     200 |   27 |      80 |3632 + 80 = 3712
+-----+---------+---------+---------+---------+------+---------+ 
```

我写了一个查询来选择有工资总和的老工人`<= N`。

`N = 1500`下面是示例：（*正如我上面计算的那样，我猜应该选择两行*）

```
SELECT `ssn`, `name`, `salary1` , `salary2` , `salary3` 
FROM ( SELECT `ssn`, 
              `name`, 
              `salary1` , 
              `salary2` , 
              `salary3`, 
              (@total:=@total+ `salary1` + `salary2` + `salary3`) as TSalary  
       FROM `Worker`, (select @total:=0) t 
       ORDER BY `Date` ASC ) AS `some_worker`  
WHERE (TSalary -(`salary1` + `salary2` + `salary3`))  <= 1500;

+-----+-------+---------+---------+---------+
| ssn | name  | salary1 | salary2 | salary3 |
+-----+-------+---------+---------+---------+
| 3   | Sumit |     250 |     150 |     100 |
| 4   | Harsh |     500 |    -150 |     900 |
+-----+-------+---------+---------+---------+
2 rows in set (0.00 sec) 
```

*注意：*只选择了两个，因为包括第三个意味着超过 N (= 1500)。

现在假设`N = 2000`:(*并且正如我上面计算的那样，我猜应该选择两行*）

```
SELECT `ssn`, `name`, `salary1` , `salary2` , `salary3` 
FROM ( SELECT `ssn`, 
              `name`, 
              `salary1` , 
              `salary2` , 
              `salary3`, 
              (@total:=@total+ `salary1` + `salary2` + `salary3`) as TSalary  
       FROM `Worker`, (select @total:=0) t 
       ORDER BY `Date` ASC ) AS `some_worker`  
WHERE (TSalary -(`salary1` + `salary2` + `salary3`))  <= 2000;

+-----+-------+---------+---------+---------+
| ssn | name  | salary1 | salary2 | salary3 |
+-----+-------+---------+---------+---------+
| 3   | Sumit |     250 |     150 |     100 |
| 4   | Harsh |     500 |    -150 |     900 |
+-----+-------+---------+---------+---------+
| 5   | ONE   |     100 |     170 |     100 |
+-----+-------+---------+---------+---------+
3 rows in set (0.00 sec) 
```

此查询在此示例中运行良好，但可能适用于长表，但这是完成工作的一种方式。

试试看！！

[此外，您可以根据需要更改外部条件中的相等条件（我对您的阈值定义有点困惑。如果您举个例子可能会很好）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:26:15.533

这是一个实现[存储过程的地方](http://dev.mysql.com/doc/refman/5.0/en/stored-routines-syntax.html)

1.  你可以得到总记录集，
2.  按 id 或 insert-date 排序，并且
3.  不断对字段求和，直到达到目标总数，然后
4.  在您的订购列表中选择最新的，并且
5.  删除该范围之外的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T18:56:34.110

您可以通过这种方式计算累积总和：

```
SELECT ID,
       (select SUM(field1 + field2 + field3) from t t2 where t2.date <= t.date and t2.field0 = tempdb.field0) as cumsum
from t
WHERE field0 = '$username' 
```

我认为以下工作在 MySQL 中进行删除：

```
delete from t
where t.id in (select id
               from (SELECT ID,
                            (select SUM(field1 + field2 + field3) from t t2 where t2.date <= t.date and t2.field0 = tempdb.field0) as cumsum
                     from t
                     WHERE field0 = '$username' 
                    ) tsum
                where cumsum <= YOURTHRESHOLD
              ) 
```

`delete`MySQL 对语句中的自连接很挑剔。我认为双子查询解决了这个问题。

注意：此代码未经测试，因此可能包含语法错误。*

# c# - 如何在不同的 AppDomain 中运行多个服务实例？

> ID：14482912
> 
> 赞同：4
> 
> 时间：2013-01-23T15:13:30.717
> 
> 标签：c#, .net, service, windows-services, appdomain

我已经实现了一个 Windows 服务。我应该如何运行服务的多个实例，每个实例都在自己的 AppDomain 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T11:42:49.953

Windows 服务必须先注册才能作为服务运行，因此假设您有固定数量的实例要运行，请在安装服务进程时为每个实例注册一个唯一名称，然后在您的启动代码中，简单地实例化每个实例通过 ServiceBase.Run

前任：

```
 var service1= new MultiService("name1");
            var service2 = new MultiService("name2");

            ServiceBase.Run(new ServiceBase[] { service1, service2 }); 
```

ServiceBase.Run 自动在它自己的 appdomain 中启动每个服务。

# java - Struts 未在表单输入中验证电子邮件

> ID：14482917
> 
> 赞同：0
> 
> 时间：2013-01-23T15:13:34.680
> 
> 标签：java, forms, validation, struts

我有一个 HTML 表单，我正在尝试使用 Struts 来验证用户在网站上注册之前是否输入了有效的电子邮件地址。

提交表单时，似乎不会发生任何验证，并且表单只是按原样提交给操作参数类。

我是 Struts 的新手，所以请假设我错过了显而易见的事情（因为我可能已经错过了）。

我的表单看起来像这样（UserRegistrationAddForm.jsp）：

```
<form name="registrationAddForm" method="post" action="UserRegistrationAdd">
    <div class="form-label-holder">
        <label for="email"><fmt:message key="LOGON_ID" bundle="${storeText}" /><span class="mandatoryindicator"> *</span></label>
    </div>
    <div class="form-field-holder">
        <input id="email" class="required email" type="text" name="logonId" value="<c:out value="${paramSource.logonId}" />" />
    </div>
    <input type="image" src="<c:out value="${jspStoreImgDir}" />mobile/images/next-button.png" />
</form> 
```

我的配置是（struts-config.xml）：

```
<struts-config>
    <form-beans>
        <form-bean name="UserRegAddForm"
            type="org.apache.struts.validator.DynaValidatorForm">
            <form-property name="logonId" type="java.lang.String" />
        </form-bean>
    </form-beans>
    <action
        parameter="com.example.UserRegistrationAddCmd"
        path="/UserRegistrationAdd" type="com.example.LTPATokenGenerationEnabledBaseAction"
        name="UserRegAddForm">
        <set-property property="https" value="0:1"/>
        <set-property property="authenticate" value="0:0"/>
    </action>
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
        <set-property property="pathnames" value="/WEB-INF/validator-rules.xml"/>
    </plug-in>
</struts-config> 
```

将验证配置为 (validator-rules.xml)：

```
<form-validation>
    <form name="UserRegAddForm">
        <field property="logonId" depends="required,email">
            <arg key="registrationAddForm.logonId" />
        </field>
    </form>
</form-validation> 
```

堆栈显示：

```
at com.example.BaseAction.executeAction(BaseAction.java:722)
    at com.example.struts.BaseAction.execute(BaseAction.java:150)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at com.example.struts.ECActionServlet.processRequest(ECActionServlet.java:218)
    at com.example.struts.ECActionServlet.doPost(ECActionServlet.java:174)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831) 
```

堆栈跟踪来自下一步处理的错误，所以它不应该走那么远。

有趣的是，堆栈没有提到对我的操作类型的任何引用，`com.example.LTPATokenGenerationEnabledBaseAction`所以我假设我配置错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:08:09.370

我不确定，但也许您应该在 form-b​​ean 标记中使用 org.apache.struts.validator.DynaValidatorActionForm。

# javascript - JQuery 提交显示对话框

> ID：14482919
> 
> 赞同：1
> 
> 时间：2013-01-23T15:13:40.643
> 
> 标签：javascript, jquery, submit

首先对不起我的英语不好。

我想在提交表单（id="form"）之前显示一个确认层（id="confirmwin"）。还有另一个按钮 (id="yes") 用于提交表单。

我试过这个：

层：

```
<div id="confirmwin" style="display:none">
Are you sure to submit?<br>
<a href="#" id="yes">Yes</a> <a href="#" onclick="closeconfirmwin()">No</a>
</div> 
```

JavaScript：

```
$(document).ready(function(){
  $("#yes").click( function() {
    $("#form").off("submit").submit();
  });
  $("#form").on("submit", function() {
    $('#confirmwin').show();
    return false;
  });
}); 
```

有时（并非总是）它看起来像是在无限循环中。

也许#yes click 事件的 off 事件出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:17:15.330

您是否尝试`.submit()`在关闭时删除它？

```
$("#form").off("submit").submit(); 
```

不应该吗。。

```
$("#form").off("submit")  //if 
```

并且只有在确认后才能继续做..

```
$("#form").submit(); //then you can /off() but I don't see the need to 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:50:55.083

像这样简单

```
<form id="xpto" name="" action="" ... onsubmit="return callJavascriptFunctionConfirm();">

//bla bla bla here

</form>

function callJavascriptFunctionConfirm(){
   //do the logic here
   if (yes) 
      return true; 
   else
      return false;
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T15:20:57.070

一种解决方案是在触发提交事件时传递额外的参数。[您可以在此处阅读有关 jQuery API](http://api.jquery.com/event.data/)中事件数据的更多信息。

```
$("#yes").click( function() {
    $("#form").trigger("submit", [true]);
});

$("#form").on("submit", function(e, blnConfirmed) {
    // If it's not confirmed yet, show the overlay.
    if (!blnConfirmed) {
        $('#confirmwin').show();
        return false;
    } // else it actually IS confirmed, do a real submit
}); 
```

您应该首先测试此代码。这只是一个例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T15:21:43.647

这很容易：

只需添加一个全局变量：

```
var ignoreConfirm = false; 
```

所以它看起来像：

```
$("#yes").click( function() {
  ignoreConfirm = true;
  $("#form").off("submit").submit();
});

$("#form").on("submit", function() {
  if(!ignoreConfirm){
   $('#confirmwin').show();
   return false;
  }
}); 
```

# html - 为什么我的文本不在此处居中？

> ID：14482923
> 
> 赞同：0
> 
> 时间：2013-01-23T15:13:55.727
> 
> 标签：html, css

我有以下CSS：

```
.me-header {
    display: inline-block;
    position: relative;
    top: 50px;
    left: 10px;
}

    .me-header a {
        color: #333;
        font: 10px "Lucida Grande", Helvetica, sans-serif;
        text-decoration: none
    }

.resume-header {
    display: inline-block;
    position: relative;
    top: 50px;
    left: 100px;

}

    .resume-header a {
        color: #333;
        font: 10px "Lucida Grande", Helvetica, sans-serif;
        text-align: center;
        text-decoration: none
    }

.center-text {
    text-align: center;
} 
```

以及以下 HTML：

```
<div class="me-header">
                <a href="#"><img src="media/me-icon.png" alt="Picture of Christian Selig"><br> <span class="center-text">Contact Me</span></a>
            </div>
            <div class="resume-header">
                <a href="resume.pdf"><img src="media/resume-icon.png" alt="Resume icon" title="Click to download resume (PDF)"><br> <span class="center-text">Resume (PDF)</span></a>
            </div> 
```

但我的文字仍然左对齐。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:15:59.337

两者`a`和`span`都是内联元素 - 因此它们的宽度仅与它们的内容一样宽。因此，当您将文本居中时，它在内联元素内居中，但内联元素出现在左侧。

如果您`text-align: center;`在父块元素上进行设置，它将起作用。

如果要使整个块居中，请使用自动边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:17:48.393

你可以做

```
.center-text
{
    display: table;
    margin: 0 auto;
} 
```

# opengl - 旋转/对齐纹理坐标

> ID：14482924
> 
> 赞同：2
> 
> 时间：2013-01-23T15:13:56.303
> 
> 标签：opengl, geometry

我有 1024x1 渐变纹理，我想映射到四边形。此渐变应沿该四边形内的线 (p1,p2) 对齐。纹理具有 GL_CLAMP_TO_EDGE 属性，因此它将填充整个四边形。

我现在需要计算出四边形的四个角（A、B、C、D）的纹理坐标，但我无法围绕所需的数学计算。

[![图片](../Images/e7355011815f2170d6cb59c3a6ab6689.png)](https://i.stack.imgur.com/cB1SV.png)

我试图计算（p1，p2）之间的角度，然后围绕（p1，2）之间的线的中心旋转角点，但我无法让它正常工作。无论如何，这似乎有点过分 - 有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:54:57.130

你在使用着色器吗？如果是，则将您的四边形仅分配默认 UV 从 0 到 1 。然后根据 p1 p2 段斜率计算旋转度数（不要忘记将它们转换为弧度）。然后在顶点着色器中构建 2x2 旋转矩阵并旋转由段定义的 UV。最后将旋转的 UV 传递到片段着色器并与渐变纹理采样器一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:11:00.433

我发现了另一种方法，它实际上可以按我的意愿工作，只使用加法、乘法和一个 div；节省昂贵的 sqrt。

我首先计算 (p1,p2) 线的斜率和与之正交的斜率。然后我计算出斜坡的交点（从 p1 开始）和每个角的正交状态。

```
Vector2 slope = {p2.x - p1.x, p2.y - p1.y};
Vector2 ortho = {-slope.y, slope.x};

float div = 1/(slope.y * ortho.x - slope.x * ortho.y);
Vector2 A = {
    (ortho.x * -p1.y + ortho.y * p1.x) * div,
    (slope.x * -p1.y + slope.y * p1.x) * div
};
Vector2 B = {
    (ortho.x * -p1.y + ortho.y * (p1.x - 1)) * div,
    (slope.x * -p1.y + slope.y * (p1.x - 1)) * div
};
Vector2 C = {
    (ortho.x * (1 - p1.y) + ortho.y * p1.x) * div,
    (slope.x * (1 - p1.y) + slope.y * p1.x) * div
};
Vector2 D = {
    (ortho.x * (1 - p1.y) + ortho.y * (p1.x - 1)) * div,
    (slope.x * (1 - p1.y) + slope.y * (p1.x - 1)) * div
}; 
```

# c# - 您是否总是必须设置 ViewBag 变量才能从控制器访问数据

> ID：14482925
> 
> 赞同：2
> 
> 时间：2013-01-23T15:13:58.067
> 
> 标签：c#, .net, razor, viewbag

我有一个这样的控制器：

```
 public ActionResult Index()
        {
            ViewBag.Title = "Index";
            ViewBag.LoggedIn = TheUser.CheckStatus();

            return View();
        } 
```

问题是，我必须将 LoggedIn 设置为我的其他函数 TheUser.CheckStatus() 的输出，以便我可以使用 razor 引用它... Razor 中有没有办法直接访问函数？例如...

```
@TheUser.CheckStatus 
```

代替

```
@ViewBag.LoggedIn 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:19:26.283

MVC 中将信息传递给视图的推荐方法是创建特定于该视图的模型（也称为视图模型），例如

```
public class IndexViewModel
{
    public string Title { get; set; }
    public bool IsAuthenticated { get; set; }
}
....
public ActionResult Index()
{
    return View(new IndexViewModel()
    {
        Title = "Index",
        IsAuthenticated = UserIsLoggedIn()
    });
} 
```

但是，要回答您的问题：

> Razor 中有没有办法直接访问某个功能？

如果您使用的是 ASP.NET Membership，您可以在请求上使用[IsAuthenticated](http://msdn.microsoft.com/en-us/library/system.web.httprequest.isauthenticated.aspx)属性，例如

```
 @Request.IsAuthenticated 
```

否则，您确实需要将此信息传递给视图（无论是通过`ViewBag`/view 模型等）

或者，您可以编写自己的扩展方法，`Request`允许您直接在视图中访问它：

```
@Request.UserLoggedIn() 
```

甚至作为一个`HtmlHelper`例子

```
public static class HtmlHelperExtensions
{ 
    public static bool UserIsLoggedIn(this HtmlHelper helper)
    {
        return /* authentication code here */
    }
} 
```

然后在您看来，您可以使用`@Html.UserIsLoggedIn()`我*认为*您所追求的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T15:19:02.640

使用 ViewModel 类（然后您的视图将被强类型化，并且您将能够使用“经典”助手）。

```
//viewModel class
public class UserStatusViewModel {
   public string Title {get;set;}
   public bool IsLogged {get;set;
}

//action
public ActionResult Index() {
  var model = new UserStatusViewModel{ Title = "Index", IsLogged = TheUser.CheckStatus()};
  return View(model);
}

//view

@model UserStatusViewModel

@Html.DisplayFor(m => m.Title)
@Html.DisplayFor(m => m.IsLoggedIn) 
```

# jquery - 如何让textarea中的文本保持在顶部？

> ID：14482928
> 
> 赞同：1
> 
> 时间：2013-01-23T15:14:07.007
> 
> 标签：jquery, html, css

我在这里有一个应用程序：[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/InputTest.php)

在应用程序中，请执行以下操作：

1.  在顶部的文本区域中输入一些内容
2.  单击`Add Question`按钮将内容附加到下表中。可以看到表格中textarea中的内容放在了textarea的顶部。
3.  现在您将看到文件输入，请使用文件输入上传图像。
4.  现在，当上传完成时，它会在下面附加文件的名称、隐藏的输入和删除按钮，但是在另一列中查看带有您的内容的文本区域，文本已向下移动了一个空格。它并没有保持领先。

这是我的问题，在这种情况下，我如何才能将文本输入中的文本保持在文本区域的顶部？

下面是主要代码：

附加到表格行的文本区域和文件输入：

```
var count = 0;
var gQuestionIndex = 0;

function insertQuestion(form) {   

      var questionarea=(form.questionText.length)
                ? form.questionText[0]
                : form.questionText;

    var $tbody = $('#qandatbl_onthefly > tbody');
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $question = $("<td width='13%' class='question'></td>");
    var $image = $("<td width='17%' class='image'></td>");
    var $questionType = '';

    gQuestionIndex++;

    $('.questionTextArea').each( function() {

    var $this = $(this);
    var $questionText = $("<textarea class='textAreaQuestion'></textarea>").attr('name',$this.attr('name')+"[]")
                   .attr('value',$this.val());

    $question.append($questionText);

    });

    var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
    "<p class='imagemsg'></p></label>" +
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "<p class='listImage'></p>" +
    "<iframe class='upload_target_image' name='upload_target_image' src='/' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>");     

    $image.append($fileImage);

    $tr.append($question);
    $tr.append($image);
    $tbody.append($tr); 

    count++;

    $(form).find('.numberOfQuestions').val(qnum);

    form.questionText.value = "";

    $('.questionTextArea').val('');

    setWidth();

} 
```

`setWidth()`如果表格单元格的高度和宽度发生变化，它确保 textarea 保持填充表格单元格的代码：

```
function setWidth() {
    $(".textAreaQuestion").each(function(){
     var questionCellWidth = $(this).closest(".question").width();
    var questionCellHeight = $(this).closest(".question").height();
    $(this).css({
        "width": (questionCellWidth - 6) + "px",
        "height": (questionCellHeight) + "px"
    });

    });
  } 
```

停止上传功能，它附加文件名、删除按钮和隐藏输入：

```
function stopImageUpload(success, imageID, imagefilename){

      var result = '';
      imagecounter++;

      if (success == 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';   
            $('.listImage').eq(window.lastUploadImageIndex).append('<input type="hidden" name="imgid[]" id="'+imageID+'" value="' + imageID + '" />');
            $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>');
         }

      $(sourceImageForm).find('.imagemsg').html(result);
      $(sourceImageForm).find('.imagemsg').css('visibility','visible'); 
      $(sourceImageForm).find(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage' />");
      $(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible');

      return true;   
} 
```

最后下面是textarea的css：

```
.textAreaQuestion{
    width:100%;
    resize:none;
    height:100%;
    border:0;
    padding:0;
    font-size:100%;
    display: block; 
    overflow:auto;
    margin:0;
    vertical-align:top;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:19:03.257

尝试添加到您的 CSS：

```
td.question {
    vertical-align:top;
} 
```

问题是您的右侧列正在创建更多的垂直空间，并且您的单元格设置为正常状态，这会在单元格的中心开始垂直对齐的文本。

更好的是，甚至会是这样的：

```
td {
    vertical-align:top;
    padding: 1em .5em; /* or something to this effect, 
                          to normalize the spacing of 
                          data from the cell-sides */
} 
```

这样，无论向最右边的列单元格添加多少信息，所有单元格都将在大约相同的位置开始与它们的顶部对齐。如果您想真正对齐文本，您可能还需要调整文本区域周围的一些边距，但这至少应该让您开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:22:24.773

您可以使用任何检查工具（无论如何推荐 Chrome 或 Firefox）看到文本位于文本区域的顶部。附截图：

![enter image description here](../Images/b9f839a035290b390cbbc928a3cfa605.png)

正如 mori57 所说，问题在于新文本正在创造更多空间。他的解决方案应该有效，但你为什么不在现在有空白的地方创建文本呢？哪里有加载后消失的“加载中”图片，把“上传图片”的文字放在那里。您可以在我附上的 3D 屏幕截图中更清楚地看到我的意思，橙色位。

OR, if you don't do this, you can at least hide that html bit (change the style to `display: none;`).

# installation - 如何为企业用户升级应用程序？

> ID：14482929
> 
> 赞同：0
> 
> 时间：2013-01-23T15:14:07.253
> 
> 标签：installation, automatic-updates

我们有在 .NET4.0 中创建的 WPF 应用程序。我们已将我们的应用程序升级到 .NET4.5 的新版本。现在，我们遇到了在用户系统中安装升级软件的问题。有几千名用户使用我们的应用程序。在每个人和每个人的系统中安装软件都需要时间和人力。

是否有任何自动化工具可以帮助我们进行部署？managesoft 是如何工作的？

问候， Ambarish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:17:13.747

我们使用 clickonce (http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.80%29.aspx) 来交付我们的 WPF 应用程序以及所有相关的依赖项。它工作得很好，即使是频繁的自动升级。

# c++ - 不同IDE的输出不同？

> ID：14482932
> 
> 赞同：1
> 
> 时间：2013-01-23T15:14:20.703
> 
> 标签：c++, ide, compilation

我有以下问题：我用 Qt IDE 编写代码。我被告知，当人们尝试使用其他 IDE（如代码块或 Visual Studio）编译它时，他们得到的输出是不同的，并且存在 maufunctions。有什么想法会导致这种情况吗？我给你举个例子：

这是牛顿法，其函数的根为 2.83something。每次在 Qt 中运行它时，我都会得到相同的正确计算。我在代码块中得到“nan”，在 Visual Studio 中也得到了一些无关紧要的东西。我不明白，我的代码中是否有错误？这可能是什么原因造成的？

```
#include <iostream>
#include <cmath> // we need the abs() function for this program

using namespace std;

const double EPS = 1e-10; // the "small enough" constant. global variable, because it is good programming style

double newton_theorem(double x)
{
    double old_x = x; // asign the value of the previous iteration
    double f_x1 = old_x*old_x - 8; // create the top side of the f(x[n+1] equation
    double f_x2 = 2 * old_x; // create the bottom side
    double new_x = old_x -  f_x1 / f_x2; // calculate f(x[n+1])
    //cout << new_x << endl; // remove the // from this line to see the result after each iteration
    if(abs(old_x - new_x) < EPS) // if the difference between the last and this iteration is insignificant, return the value as a correct answer;
    {
        return new_x;
    }
    else // if it isn't run the same function (with recursion YAY) with the latest iteration as a starting X;
    {
        newton_theorem(new_x);
    }
}// newton_theorem

int main()
{
    cout << "This program will find the root of the function f(x) = x * x - 8" << endl;
    cout << "Please enter the value of X : ";
    double x;
    cin >> x;
    double root = newton_theorem(x);
    cout << "The approximate root of the function is: " << root << endl;

    return 0;
}//main 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:14:58.783

是的，您遇到了*未定义的行为*：

```
if(abs(old_x - new_x) < EPS) // if the difference between the last and this iteration is insignificant, return the value as a correct answer;
{
    return new_x;
}
else // if it isn't run the same function (with recursion YAY) with the latest iteration as a starting X;
{
    /*return*/ newton_theorem(new_x); // <<--- HERE!
} 
```

树枝`return`上少了一个`else`。

我们可以尝试解释 Qt 工作的原因（它的编译器自动将结果`newton_theorem`放入返回注册表，或共享注册表，或其他任何东西），但事实是**任何事情都可能发生**。一些编译器在随后的运行中可能表现相同，一些可能会一直崩溃。

# regex - 使用 grep 匹配和擦除大块文本中的模式

> ID：14482938
> 
> 赞同：0
> 
> 时间：2013-01-23T15:14:40.207
> 
> 标签：regex, grep

我有一个非常大的文本文件，其中包含类似于以下内容的数据：

```
 but/CC as/IN 1/Z church/NP historian/NN/Fc 
     as/IN 1/Z "/Fe rupture/NN and/CC new/JJ beginning/NN century/NN ./Fp
    ======>match found: \#\#[a-z]+\/NN\#\#
    ======>match found: be\/V[A-Z]+(\s[.]{0,10})?\#\#
    ======>match found: \#\#\sof\/IN 
```

我想使用（linux）终端命令*grep*匹配并删除所有以以下开头的行：

======>找到匹配项：

并以换行符结尾。

因此，根据前面的示例，我想运行 grep 并获得以下输出

> 但是/CC as/IN 1/Z 教会/NP historian/NN/Fc as/IN 1/Z"/Fe 破裂/NN 和/CC 新/JJ 始/NN 世纪/NN./Fp

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:23:08.187

```
grep -E -v '^======>match found:.+$' file.txt 
```

`-E`打开扩展正则表达式，并`-v`否定输出，即打印所有不匹配的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:24:09.457

Sed 是你的朋友

```
sed -i '/^======>match found:/d' largefilename.txt 
```

将删除所有以`======>match found:`

注意，`-i`开关意味着`largefilename.txt`将被修改而不是打印到stdout，这应该比使用grep更有效。

# javascript - JavaScript：__doPostBack 中的多个参数

> ID：14482939
> 
> 赞同：16
> 
> 时间：2013-01-23T15:14:41.980
> 
> 标签：javascript, asp.net, postback

首先，我发现的唯一一篇文章（[calling-multiple-dopostback-from-javascript](https://stackoverflow.com/questions/360843/calling-multiple-dopostback-from-javascript)）对我的问题没有帮助，所以我不相信这篇文章是重复的。

我的 ASPX 网页中有这个 JavaScript 函数，其中包含一个 __doPostBack 函数：

```
function OpenSubTable(bolID, controlID) {
  // code
  __doPostBack('UpdatePanelSearch', bolID);
  // more code
} 
```

完美运行，我可以像这样将 bolID 的值放入我的代码中：

```
protected void UpdatePanelSearch_Load(object sender, EventArgs e)
{
  var bolID = Request["__EVENTARGUMENT"];
  // code
} 
```

问题是，我必须通过回发传递 2 个不同的值。有什么简单的解决方案吗？显然这样的事情是行不通的：

```
function OpenSubTable(bolID, controlID) {
  // code
  __doPostBack('UpdatePanelSearch', bolID, controlID); // not that simple, i'm afraid :(
  // more code
} 
```

任何帮助都将受到欢迎。

问候，贡纳尔

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T15:22:44.977

您可以将这两个值作为一个 JSON 字符串传递：

```
function OpenSubTable(bolID, controlID) {
  __doPostBack('UpdatePanelSearch', JSON.stringify({ bolID: bolID, controlID: controlID}));
} 
```

然后在服务器上解析：

```
protected void UpdatePanelSearch_Load(object sender, EventArgs e)
{
  SomeDTO deserializedArgs = 
      JsonConvert.DeserializeObject<SomeDTO>(Request["__EVENTARGUMENT"]);
  var bolID = deserializedArgs.bolID;
  var controlID = deserializedArgs.controlID;
}

public class SomeDTO
{
    public string bolID { get; set; }
    public string controlID { get; set; }
} 
```

如果您使用 .Net >=4.0，我相信您可以反序列化为通用的 touple 并避免创建`SomeDTO`. 编辑：[有关反序列化为动态类型的更多信息](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:48:46.683

考虑将您的数据放在服务器端隐藏字段中，然后在回发后读取该数据。

```
<asp:HiddenField id="Data1HiddenField" runat="server" />
<asp:HiddenField id="Data2HiddenField" runat="server" /> 
```

您的客户端脚本应包含 ClientID 值以处理服务器端命名容器修改。使用语法（表达式生成器）需要在文件`<%= expression %>`中维护您的脚本（或至少脚本的这一部分） 。`.aspx`如果您在外部文件中维护您的 JavaScript，您可以“注册”一个简单的函数，该函数由您的主 JavaScript 调用以移动数据并将该函数与所需的`ClientIDs`. 见`ClientScriptManager.RegisterClientScriptBlock()`。

```
var data1 = "data value 1";
var data2 = "data value 2";
$("#<%= Data1HiddenField.ClientID %>").val(data1);
$("#<%= Data2HiddenField.ClientID %>").val(data2); 
```

您的服务器端代码如下所示：

```
string data1 = Data1HiddenField.Value;
string data2 = Data2HiddenField.Value; 
```

当然还有其他技术可以传递多个数据值，但我发现这既简单又易于维护。如果需要，您可以传递各种数据并使用 JSON 对其进行编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T15:19:24.640

我之前通过构建和拆分字符串使用了多个参数。

例如

```
string args = String.Format("{0};{1}", bolID, ControlID); 
```

然后，您可以将其传递给回发的参数，并且在检查回发参数时，只需根据您的操作字符拆分字符串（在本例中为“;”）

# bash - 可以在不使用 echo 或全局变量的情况下从 Bash 函数返回字符串吗？

> ID：14482943
> 
> 赞同：5
> 
> 时间：2013-01-23T15:14:52.073
> 
> 标签：bash, function, return, echo, interactive

我在工作中回到了很多 Bash 脚本，我已经生疏了。

有没有办法从函数返回本地值字符串而不使其成为全局或使用回显？我希望该函数能够通过屏幕与用户交互，但也可以将返回值传递给没有类似`export return_value="return string"`. printf 命令的响应似乎与 echo 完全一样。

例如：

```
function myfunc() {
    [somecommand] "This appears only on the screen"
    echo "Return string"
}

# return_value=$(myfunc)
This appears only on the screen

# echo $return_value
Return string 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T15:40:43.817

不，Bash 不会从函数返回除数字退出状态之外的任何内容。您的选择是：

1.  在函数内部设置一个非局部变量。
2.  使用`echo`、`printf`或类似名称来提供输出。然后可以使用命令替换将该输出分配到函数外部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-23T16:53:25.867

要使其仅出现在屏幕中，您可以重定向`echo`到 stderr：

```
echo "This appears only on the screen" >&2 
```

显然，不应重定向 stderr。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-16T12:53:47.153

创造性地使用该`eval`函数，您还可以在函数体内将值分配给参数位置，并有效地分配给您的参数。这有时被称为“输出调用”参数。

```
foo() {
    local input="$1";
    # local output=$2;  # need to use $2 in scope...

    eval "${2}=\"Hello, ${input} World!\""
}

foo "Call by Output" output;

echo $output; 
```

# php - SQL、php pdo 和检索表行

> ID：14482945
> 
> 赞同：0
> 
> 时间：2013-01-23T15:14:53.637
> 
> 标签：php, html, sql, pdo

我现在有一个非常大的问题，我找不到解决方案，所以我希望能得到一些帮助。

我正在使用以下查询从表中选择特定列

```
$stmt = $db->prepare('SELECT Info FROM Info;');
$stmt->execute();
$res = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

然后我使用 php 输出它

```
<div id="two">
<?php
if(!$resTwo)
echo"No Content Available Yet..";
else
echo "<ul>";
foreach($resTwo AS $val) {
echo "<tr>";
foreach($val AS $val1) {
    echo "<td>$val1</td>";
  }
}
echo "</ul>";
$db = null; 
?>
</div> 
```

现在问题来了。该脚本适用于一页，但问题是我有几个看起来完全相同的页面，唯一不同的是我从 db.xml 添加的内容。因此，如果我可以避免在每个页面中编写一个新脚本，而是使用上面创建的 SELECT 的某种索引，我会更喜欢。

如果我想解决这个问题，我将不得不每页更改以下内容

```
$stmt = $db->prepare('SELECT Info FROM Info WHERE rowid = 1;');
$stmt = $db->prepare('SELECT Info FROM Info WHERE rowid = 2;');
$stmt = $db->prepare('SELECT Info FROM Info WHERE rowid = 3;');
$stmt = $db->prepare('SELECT Info FROM Info WHERE rowid = 4;'); 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:36:09.220

您可以通过 $_GET 或 $_POST 获取参数并在查询中使用它。看：

```
$var = $_GET['id'];
$stmt = $db->prepare('SELECT Info FROM Info WHERE rowid = :RowId');
$stmt->bindParam(":RowId", $var, PDO::PARAM_INT);
$stmt->execute(); $res = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:35:21.390

*   添加一个php函数，在common.php中添加如下代码：

    ```
    <php    

    function getRowContentResultSet($rowId)
    {

        $stmt = $db->prepare('SELECT Info FROM Info WHERE rowid = :rowId');
        $stmt->execute(array(':rowId' => $rowId));
        $res = $stmt->fetchAll(PDO::FETCH_ASSOC);

        return $res;
    }

    ?> 
    ```

*   将此函数 (common.php) 包含为所有页面（或页面组）的通用函数。

*   然后在每个页面中以以下格式调用此函数。

    ```
    $resTwo = getRowContentResultSet($_GET['rid']); 
    ```

*   所有页面 url 都应包含一个 GET 参数“rid”示例：http: [//yoursite.com/page.php ?rid=1](http://yoursite.com/page.php?rid=1)

注意：我没有更改您的 html 部分。即使这样，您也可以放入一个通用的 template.php 并仅包含在您的页面中。

# matlab - Matlab，包含指定范围内随机数的矩阵

> ID：14482951
> 
> 赞同：0
> 
> 时间：2013-01-23T15:15:05.553
> 
> 标签：matlab, random, matrix, range

我对 Matlab 完全陌生，正在尝试创建一个 m×n 矩阵，其中包含指定范围内的数字（即 -1 和 1 之间）。

是否有一个等效的函数可以`rand(m, n)`让我自己指定范围，或者我是否需要明确地创建一堆随机数（如本[答案](https://stackoverflow.com/questions/1860823/generate-a-random-number-within-a-range)中所述）并从中创建一个矩阵？

任何指向相关文档等的指针都非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T15:20:21.783

这直接来自 Matlab 的`rand`. 这是你想要的吗？

示例 1

从区间 [a, b] 上的均匀分布生成值：

```
r = a + (b-a).*rand(100,1); 
```

`doc rand`通过输入命令窗口尝试阅读 Matlab 文档。它确实内容丰富且用户友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T00:38:58.633

也许更简单的方法是输入

```
r = randi ( [a b], m , n ) 
```

其中`a = -1`（或下限），`b = 1`（或上限），`m x n`如指定的那样。`randint`如果`randi` 不起作用，您可能需要使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-14T14:27:24.197

**6** *rand(4) => 创建一个 4x4 矩阵，随机数在 0 到**6之间**

**6** *rand(4,5) => 创建一个 4x5 矩阵，随机数在 0 到**6之间**

randi ( **5** ,3) => 创建一个 3x3 矩阵，其中随机整数介于 0 和**5之间**

**2** +( **6** -2)*rand(3) => 创建一个 3x3 矩阵，随机数介于**2**和**6之间**

# node.js - WebSockets 还是 phonegap 的替代品？

> ID：14482954
> 
> 赞同：8
> 
> 时间：2013-01-23T15:15:23.090
> 
> 标签：node.js, cordova, websocket

如何使用 phonegap 将低延迟数据发送到服务器并返回？

考虑到我无法在本地访问 php 文件，也没有使用 node.js 或 WebSockets 的经验，我不知道应该使用哪些。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T15:58:50.947

[Android 中的浏览器或iOS 下的旧版 Cordova](http://shazronatadobe.wordpress.com/2012/07/20/improvements-in-cordova-2-0-0-for-ios/)中的浏览器本身不支持 WebSocket ，这意味着如果您想在客户端上使用它们，则需要使用 PhoneGap 插件。

更多信息请访问：[http ://remysharp.com/2010/10/04/websockets-in-phonegap-projects/](http://remysharp.com/2010/10/04/websockets-in-phonegap-projects/)

但是，我不确定（即使使用插件）当设备在网络连接（WiFi -> 3G -> WiFi）之间移动时，WebSocket 的弹性可能有多大，因此使用简单的轮询 Web 服务可能是更可靠的选择如果您的应用需要在用户四处移动时继续接收数据。

如果您需要接收服务器发起的数据，请考虑使用推送通知：iOS (APN) 和 Android (C2DM) 都提供了 API 来执行此操作，这比让您的应用程序不断地轮询服务器更有效地利用电池。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T11:53:12.473

您可以在 iOS 和 Android 的 PhoneGap 中使用 WebSockets。Safari 中的 iOS 原生支持 WebSockets。对于 Android，您将需要使用 polyfill。

请参阅：[https ://stackoverflow.com/a/13527585/39904](https://stackoverflow.com/a/13527585/39904)

上面的答案提供了有关如何在 PhoneGap 使用的 Android WebView 中使 WebSocket 对象可用的信息，还提供了一个示例项目的链接，您可以使用该链接开始。

WebSockets 是作为“彗星”黑客攻击的解决方案而开发的。因此，它们为客户端和服务器之间的实时双向通信提供了非常低延迟的解决方案。这意味着低带宽和低资源使用 - 移动设备上的电池 - 因为您保持打开单个连接而不是打开和关闭多个 HTTP 连接。定期发出请求的轮询解决方案可能比 WebSocket 解决方案更快地耗尽电池电量。如果您以较低的间隔进行轮询，那么它可能没问题 - 这取决于您的用例。

当您在网络和网络类型（WiFi -> 3G -> WiFi）之间更改时，WebSockets 工作，那么如果您在本机使用 WebSockets，则需要检测`onclose`并重新连接。您还需要确定最佳的连接类型；不安全 (WS) 或安全 (WSS)。我强烈建议您将 WSS 用于移动设备，因为一些移动网络提供商使用会干扰 WS 连接的透明代理。这听起来可能很复杂，但有许多库可以为您处理这个问题。比如[Pusher JavaScript 库](http://pusher.com/docs/client_libraries/javascript)（*注意：我为 Pusher 工作*）。当环境不允许任何 WebSocket 连接发生时，诸如此类的库还提供回退到基于 HTTP 的效率较低的解决方案。

另请参阅：[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)。

我同意@rmc47 的观点，如果它是针对不频繁的单个通知，您应该考虑原生推送通知

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T17:00:41.350

我不确定“本地访问 PHP 文件”是什么意思。node.js 和 web 套接字的使用也不是相互排斥的。

如果您还没有决定服务器实现，您可以选择 node.js 或 ASP.NET。

[node.js 对带有Socket.io](http://socket.io/)的套接字有很好的支持，它为您抽象了客户端实现。因此，如果有支持，它将使用 WebSockets，否则它将退回到长轮询。

ASP.NET 有一个名为[SignalR](http://signalr.net/)的库，它为 .NET 平台做类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:33:00.917

请参阅此链接以查看浏览器和设备对 WebSocket 的支持：[html5test.com 站点](http://html5test.com/compare/feature/communication-webSocket.html)- **iOS 4.2+**已经支持 WebSocket

请参阅解释如何使用 WebSocket 开发简单应用程序的[文档。](https://docs.google.com/document/d/1_W3i3t-Y3XEPPcld4uFcf0S0Qb-PI33kwzUG8svQCvo/edit)

不幸的是，内容是葡萄牙语（巴西）语言，但您可以留下评论，我会回答。

# django - 在 Django 1.4 站点中更改默认管理员 URL 导致错误

> ID：14482959
> 
> 赞同：1
> 
> 时间：2013-01-23T15:15:44.450
> 
> 标签：django, django-admin

我想将 django admin 的默认 url 从 /admin 更改为 /djadmin，以便我可以将 /admin 用于我自己的目的。

到目前为止，我所做的只是更新 urls.py 文件，将管理 url 更改为

```
url(r'^djadmin/', include(admin.site.urls)), 
```

然后添加我自己的

```
(r'^admin/', include('my_app.admin_urls')), 
```

但是，当我现在导航到 /admin 时，出现以下错误

```
Forbidden

You do not have staff privileges. 
```

因为我不需要这个参数，所以我假设它来自内部 django 检查。如果我将用户更改为`is_staff`检查标志，那么它可以正常工作并重定向到我的管理页面。

`is_staff`每当我导航到管理网址时，我还需要做些什么来阻止 Django 检查标志吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T08:42:19.930

The `is_staff` flag is wrapped in the code of Django admin site, because is intended to restrict the usage of this interface only to a subgroup of selected users (the ones that administrate the content of the website). The only way to remove it is to subclass the Django's admin site, so a your own custom site.

For admin site customization see [the official documentation](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.AdminSite) or other answers like [the one I've posted previously](https://stackoverflow.com/a/16811639/1838607). In the AdminSite subclass you have to override the `has_permission` method with:

```
def has_permission(self, request):
   return request.user.is_active 
```

You also need to use a custom admin form (`AdminSite.login_form`) and modify the `base.html` template, removing references about `is_staff` in a pair of `if` statements.

# r - 如何防止 R 中气泡图中的气泡重叠

> ID：14482961
> 
> 赞同：0
> 
> 时间：2013-01-23T15:16:05.223
> 
> 标签：r, bubble-chart

有没有一种简单的方法可以在使用时避免气泡重叠`symbols`？

这是一个最小的例子：

```
set.seed(123)
n = 200
x = runif(n)
size = abs(rnorm(n))
symbols(x,circles=size) 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:21:43.793

您可以拉伸 x 轴，但您必须将其拉伸很多以消除重叠：

```
> png(filename="circles.png", width=5000, height=1000)
> symbols(x, circles=size, xlim=c(0, 200), cex.lab=3, cex.axis=3)
> dev.off() 
```

png 文件的大小为 5000 像素，高度为 1000 像素，它消除了大部分重叠，但不是全部。

# meteor - 开发 Meteor 的工具

> ID：14482963
> 
> 赞同：9
> 
> 时间：2013-01-23T15:16:09.200
> 
> 标签：meteor

我一直在观看网站上的截屏视频，想知道正在使用什么编辑器？它看起来像 vi 或 vim（它是哪一个）？在终端底部显示“JavaScript-IDE”？（这是 vi 或 vim 的插件）谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-02T18:16:09.013

# 网络风暴

Webstorm 9 具有[出色的 Meteor 支持](http://meteorpedia.com/read/Webstorm)。

* * *

# 对于 Vim/Emacs

另一种选择是使用 TernJS 和 VIM/Emacs，正如 Dev Shop 的 Slava Kim 所解释的那样。

**一个很好的写在[这里](http://devblog.me/meteor-plus-text-editor.html)**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-30T19:44:39.493

来自流星专家阿比盖尔沃森：

***WebStorm 不再是 Meteor-Cookbook 推荐的编辑器或开发环境****。我们现在推荐 Atom.io，因为它是一个纯 JavaScript 编辑器，这意味着我们可以将 Meteor Isomorphic API 扩展到编辑器。*

（[https://github.com/awatson1978/meteor-cookbook/blob/master/cookbook/webstorm.md](https://github.com/awatson1978/meteor-cookbook/blob/master/cookbook/webstorm.md)）

*我们**用于 Atom 编辑器的 Meteor API 为编辑器**带来了 Isomorphic Meetor javascript，具有自动完成、代码片段、颜色编码语法、语法突出显示等功能！编码更快，错误更少！*

( [https://github.com/awatson1978/meteor-api](https://github.com/awatson1978/meteor-api) )

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T17:25:32.967

他们正在使用[Emacs](http://emacsformacosx.com/)，但您可以使用任何您想要的编辑器/IDE。我个人的偏好是[Sublime Text 2](http://www.sublimetext.com/2)。

据我所知，没有任何编辑器可以帮助您编写 Meteor 代码。Meteor 完全是 Javascript，所以 IDE 唯一能做的就是为`Meteor`命名空间提供自动完成功能并向您展示一些文档。我认为普遍的共识是，在这一点上，像这样的 IDE 不会有太大帮助，因为在 Meteor 处于非常早期的开发阶段时文档更改如此频繁。

流星快乐！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-26T22:33:31.153

原子.io。在社区支持下发展良好。已经使用它几天了，想不出我使用的任何遗漏。扩展包系统非常简洁，可用的包正在迅速增长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-13T08:44:17.487

Codelobster 有 MeteorJS 的特殊插件：http: [//www.codelobster.com/meteorjs.html](http://www.codelobster.com/meteorjs.html)

# bash - 从 awk 获取结果并将其打印到文件中

> ID：14482964
> 
> 赞同：0
> 
> 时间：2013-01-23T15:16:12.170
> 
> 标签：bash, awk

我正在使用 awk 来计算一些总和，我想将它们存储在一个文件中。

这是我的输入文件：

```
misses 15
hit 18
misses 20
hit 31 
```

我想打印文件中的总未命中数和总命中数。

如果我运行这个：

```
awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt 
```

我在候机楼看到他们。

现在我想在一个文件中写入：

我试过这个：

```
#!/bin/bash
 awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt

echo misses $misses > $1; #first one overwrites the previous $1 is the argument given in the command line
echo hits $hits>> $1; # all the othes append to the .txt file 
```

但`$misses, and $hits`没有价值。

我也试过这个：

```
#!/bin/bash
result= $(echo $output | awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt )
# $NF if I want the last column
echo $result 
```

我在网上看到的，为了看看 $result 会返回给我什么，但我收到了这个错误：

```
./test2.sh: line 2: Hits:: command not found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:24:15.550

`hits` and `misses` are only variables inside `awk`, not in the shell after `awk` exits. Just do the following:

```
#!/bin/bash
awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt > $1 
```

In your second attempt, you cannot put a space after the '=':

```
result=$(echo $output | awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:24:08.617

simply redirect the output of the awk command:

```
awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt >file.txt 
```

the redirection operator `>` can be appended to any shell command to redirect its standard output to a file. changing it to `>>` appends the command's output to the file instead of completely overwriting the file, as you noticed.

edit:

the reason this didn't work:

```
#!/bin/bash
 awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt

echo misses $misses > $1; #first one overwrites the previous $1 is the argument given in the command line
echo hits $hits>> $1; # all the othes append to the .txt file 
```

is because $misses and $hits are local variables to the awk script. thus the shell has no knowledge of them outside that statment, so when you try to echo them, you get blanks.

and this doesn't work:

```
#!/bin/bash
result= $(echo $output | awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt )
# $NF if I want the last column
echo $result 
```

for multiple reasons.

1) when assigning variables in bash, you cannot have whitespace around the equal sign, so the second line must begin:

```
`result=$(echo...` 
```

2) the echo statement inside your substitution (`echo $output`) is unnecessary. this is because a) `$output` is undefined so `echo` produces no output, and b) the second statement in the pipeline (the awk statement) completely ignores the standard output of the command preceding it in the pipeline anyway since you specified a filename for it to act on (t.txt). so the second line could just be:

```
result=$(awk 'BEGIN { hits=0; misses=0; } /^hit/{ hits+=$2}; /^misses/{misses+=$2}; END {print "Hits: " hits "\nMisses: " misses }' t.txt) 
```

3) the echo statement at the end will display the results all on one line, despite the fact that the awk statement prints two lines. this is because you did not quote the variable in your echo statement. try this instead:

```
echo "$result" 
```

as a rule in bash scripting, you should ALWAYS quote the variables you are passing or printing, unless you know for sure why you don't want to.

hope that helps you learn a bit more about what you were trying!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:32:29.303

这是一个更紧凑的解决方案：

```
#!/bin/bash
awk '
    {tally[$1] += $2}
    END {
        for (outcome in tally) {
            print outcome ":", tally[outcome]
        }
    }' t.xt > $1 
```

您不必在 AWK 中初始化变量。第一次使用它时，AWK 将假定 0 代表数字，或 "" 代表字符串，具体取决于上下文。

# javascript - 在显示或隐藏时对齐列表

> ID：14482967
> 
> 赞同：0
> 
> 时间：2013-01-23T15:16:14.387
> 
> 标签：javascript, jquery, css, list

我有一个列表，其中每个项目都有一个子列表。为了给它们设置样式，我使用了 CSS。

```
<ul class="left">
    <li class="itemc">Item 1
        <ul class="subitem">
            <li>Subitem1</li>
            <li>Subitem2</li>
            <li>Subitem3</li>
            <li>Subitem4</li>
        </ul>
    </li>
    <li class="itemc">Item 2
        <ul class="subitem">
            <li>Subitem1</li>
            <li>Subitem2</li>
            <li>Subitem3</li>
            <li>Subitem4</li>
        </ul>
    </li>
    <li class="itemc">Item 3
        <ul class="subitem">
            <li>Subitem1</li>
            <li>Subitem2</li>
            <li>Subitem3</li>
            <li>Subitem4</li>
        </ul>
    </li>
    <li class="itemc">Item 4
        <ul class="subitem">
            <li>Subitem1</li>
            <li>Subitem2</li>
            <li>Subitem3</li>
            <li>Subitem4</li>
        </ul>
    </li>
</ul> 
```

整个脚本可以在[这里找到](http://jsfiddle.net/74Jmr/2/)

我的问题是当我按下主列表中的一个项目时，会显示子列表，但主列表中的其他项目会一个接一个。我应该如何或修改什么以使其工作？我的意思是，当单击一个项目时，要显示的子列表以及要与子列表末尾对齐的下一个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:54:12.797

`.left li`向您的类添加两个附加属性：

```
.left  li {
    float: left;
    clear: left;
} 
```

[更新了 jsfiddle](http://jsfiddle.net/74Jmr/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:06:44.060

问题来自这样一个事实，即当子项目打开时，项目位置没有改变。他们呆在同一个地方。

![来自 Firefox 的 3D 视图](../Images/90ebd8780221001704c8de5f9375a846.png)

正如您在此处看到的（来自 Firefox 的 3D 视图），第 3 和第 4 项仍保留其原始位置（单击第 2 项），并且子项位于它们上方。

子项实际上不被视为在项中。因此，当它被显示时，其他项目看不到它们上方的项目有任何变化，并保持在同一个地方。但是文本会受到子菜单的影响。所以它被放在它的末尾。这一切都归功于子项`float: left;`。

要解决这个问题，您只需要在 CSS中添加`clear: both;`或。`clear: left;``.left li`

*编辑：似乎我迟到了对不起......*

小提示：您应该避免使用`.left li`after `.left .submenu li`，它可能会替换您之前放置的一些属性。

# php - SQL 查询，总结条目前后一个特定的

> ID：14482975
> 
> 赞同：0
> 
> 时间：2013-01-23T15:16:44.167
> 
> 标签：php, mysql, sql, select

我尝试从特定类型中获取最多类型的条目。为了清楚起见，我将从示例开始。我的列类型实际上是一个外键。

**例子：**

我的计数器表（~ 1.500.000 行），它计算了所有在不同红绿灯处看到的汽车：

```
id, datetime, type, traffic_light_id
0, '09:59', 'red ford', 2
1, '10:00', 'black bmw', 1
2, '10:11', 'red ford', 1
3, '10:30', 'yellow ford', 1
4, '11:01', 'black bmw', 1
5, '11:09', 'red ford', 1
6, '11:18', 'green mercedes', 1
7, '11:20', 'black bmw', 2
8, '11:44', 'white renault', 2
9, '11:44', 'red renault', 1 
```

我在每一列都有一个索引。id 是主键。

**需要：**

所以我想得到的是“black bmw”的结果，traffic_light_id = 1。结果应该总结所有之前和之后看到的“黑色宝马”类型的汽车。

结果应该是：

```
count, type, traffic_light_id
2, 'red ford', 1
1, 'yellow ford', 1 
```

**我的坏解决方案：**

因此，到目前为止，我的解决方案是遍历计数器中 type = 'black bmw' 和 traffic_light_id = 1 的所有计数。

对于每个计数，我都会在我的 php 脚本中获得带有 traffic_light_id 的 bevore 和 after seen 元素（对每个计数另外进行两个查询）。

之后，我按数组中给定的汽车类型对结果进行分组并计算它们的频率。

对于这样的事情有更好的解决方案吗？最好的事情是只有一个 sql 查询！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:21:17.087

我首先了解到您想要一个简单的组：

```
select type, count(*) as totalseen,
       sum(case when traffic_light_id = 1 then 1 else 0 end) as SeenTrafficLight1
from t
group by type 
```

如果你真的只想要红绿灯 = 1，那么使用一个`where`子句：

```
select type, traffic_light_id, count(*)
from t
where traffic_light_id  = 1
group by type 
```

博特，谢谢你的澄清。这使问题变得更加有趣。

以下是我们如何使用相关子查询来做到这一点。这是之前类型的示例：

```
select typeBefore, count(*)
from (select t.*,
             (select type from t t2 where t2.datetime < t.datetime order by t2.datetime desc limit 1
            ) as typeBefore,
             (select type from t t2 where t2.datetime > t.datetime order by t2.datetime limit 1
            ) as typeAfter
      from t
     ) t
where type = 'black,bmw' and traffic_light_id = 1
group by typeBefore 
```

子查询使用日期时间来确定之前的版本。如果`id`是主键并以相同的方式排序，则可以使用它。

然后过程稍微复杂一些。这是通过交叉连接到具有两行的表的一种方法。这使得可以同时进行`typeBefore`分组`typeAfter`：

```
select (case when which = 'Before' then typeBefore else typeAfter end), count(*)
from (select t.*,
             (select type from t t2 where t2.datetime < t.datetime order by t2.datetime desc limit 1
            ) as typeBefore,
             (select type from t t2 where t2.datetime > t.datetime order by t2.datetime limit 1
            ) as typeAfter
      from t
     ) t cross join
     (select 'before' as which union all select 'after') const
where type = 'black,bmw' and traffic_light_id = 1
group by (case when which = 'Before' then typeBefore else typeAfter end) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:30:02.260

它是紧随其后和之前的计数，对吗？

这是一个很好的问题...

（我确实使用这个表变量来构建我的查询，将它替换为查询中的表或用我的变量进行测试）

```
 declare @T table(id int,[datetime] time,[type] varchar(max) ,traffic_light_id int)
    insert into @T (id,datetime,type,traffic_light_id)
    values
    (0, '09:59', 'red ford', 2)
    ,(1, '10:00', 'black bmw', 1)
    ,(2, '10:11', 'red ford', 1)
    ,(3, '10:30', 'yellow ford', 1)
    ,(4, '11:01', 'black bmw', 1)
    ,(5, '11:09', 'red ford', 1)
    ,(6, '11:18', 'green mercedes', 1)
    ,(7, '11:20', 'black bmw', 2)
    ,(8, '11:44', 'white renault', 2)
    ,(9, '11:44', 'red renault', 1) 
```

也许这样的事情可以解决问题？

```
select COUNT(*) as [count],OA.type,OA.traffic_light_id
        from @t T
        outer apply(select type,traffic_light_id 
                    from (select top 1 type,traffic_light_id 
                            from @T T_after
                            where T_after.datetime > T.datetime
                            order by T_after.datetime
                    )V_after
                    union all 
                    select type,traffic_light_id 
                    from (select top 1 type,traffic_light_id from @T T_before
                            where T_before.datetime < T.datetime
                            order by T_before.datetime desc
                    )V_before
        )OA
        where T.traffic_light_id = 1
        and T.type = 'black bmw'
        group by OA.type,OA.traffic_light_id 
```

# jquery - Jquery 悬停标题，折叠 div

> ID：14482976
> 
> 赞同：0
> 
> 时间：2013-01-23T15:16:50.667
> 
> 标签：jquery

我有一堆带有标题和摘录的文章，我希望在悬停标题时将摘录折叠起来。这是我的代码：

```
<div class="search-post" id="post-290">

    <div class="posty-content">
    <h2 class="title trigger"><a href="http://qa.cidev.info/case-study/future-shop-case-study/" rel="bookmark" title="Permanent Link to Future Shop Case Study">Future Shop Case Study</a></h2>

    <div class="entry boxed">
        <p>Overview Cum sociis natoque penatibus et magnis dis nascetur ridiculus mus lorem ipsum. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Cras mattis consectetur purus sit amet fermentum. Cum sociis natoque penatibus et magnis dis nascetur ridiculus mus lorem ipsum. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Cras&#8230;</p>
    </div>
    <div class="info">
    </div>
    </div>
    <div class="float-divider"></div>
</div>

<div class="search-post" id="post-288">

    <div class="posty-content">
    <h2 class="title trigger"><a href="http://qa.cidev.info/case-study/tiger-direct-case-study/" rel="bookmark" title="Permanent Link to Tiger Direct Case Study">Tiger Direct Case Study</a></h2>

    <div class="entry boxed">
        <p>Overview Cum sociis natoque penatibus et magnis dis nascetur ridiculus mus lorem ipsum. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Cras mattis consectetur purus sit amet fermentum. Cum sociis natoque penatibus et magnis dis nascetur ridiculus mus lorem ipsum. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Cras&#8230;</p>
    </div>
    <div class="info">
    </div>
    </div>
    <div class="float-divider"></div>
</div>

<div class="search-post" id="post-286">

    <div class="posty-content">
    <h2 class="title trigger"><a href="http://qa.cidev.info/case-study/kfc-case-study/" rel="bookmark" title="Permanent Link to KFC Case Study">KFC Case Study</a></h2>

    <div class="entry boxed">
        <p>Overview Cum sociis natoque penatibus et magnis dis nascetur ridiculus mus lorem ipsum. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Cras mattis consectetur purus sit amet fermentum. Cum sociis natoque penatibus et magnis dis nascetur ridiculus mus lorem ipsum. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Cras&#8230;</p>
    </div>
    <div class="info">
    </div>
    </div>
    <div class="float-divider"></div>
</div> 
```

和我当前的 jquery

```
$('.trigger').hover(function() {
   $('.boxed').show("slow");
}); 
```

问题是当我将鼠标悬停在触发器上时，所有盒装项目都显示出来，我只想打开当前的帖子内容框，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:19:23.017

尝试这个...

```
$('.trigger').hover(function() {
    $(this).parent().find('.boxed').show("slow");
}); 
```

它只会显示被`.boxed`点击元素的父元素内的`.trigger`元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:19:49.443

试试这个代码：

```
$('.trigger').hover(function() {
   $(this).siblings('.boxed').show("slow");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:24:42.640

This is happening because you are referencing a class for your `show` method. You should be referencing an ID instead, or at least you need to uniquely identify which div should pop out.

please try replacing your jQuery code with this, it should work:

```
$('.trigger').hover(function() {
   $(this).parent().find('.boxed').show("slow");
}); 
```

in order to hide the popup after you stop hovering, use this code:

```
$('.trigger').hover(function() {
    $(this).parent().find('.boxed').show("slow");
},function(){
    $(this).parent().find('.boxed').hide("slow");
}); 
```

# c# - CreateDelegate 上的绑定错误

> ID：14482985
> 
> 赞同：0
> 
> 时间：2013-01-23T15:17:25.217
> 
> 标签：c#, reflection, delegates, .net-assembly

我正在尝试将来自不同程序集的委托分配给已从同一程序集加载的对象，这很有趣。

loader.LoadedGestures 是一个 object[] - 其中的每个对象都来自不同的 .dll。我希望该数组中的所有对象都能够触发 GestureDetected，定义如下。

```
public class Foo
{
    private void Initialise_Gestures()
    {
        loader = new GestureLoader();

        loader.LoadGestures(); // load all the Gestures into the array

        for (int i = 0; i < loader.LoadedGestures.Length; i++)
        {
            if (loader.LoadedGestures[i] != null)
            {
                EventInfo ev = loader.LoadedGestures[i].GetType().GetEvent("GestureDetected");
                Type del = ev.EventHandlerType;
                MethodInfo mi = this.GetType().GetMethod("GestureDetected", BindingFlags.NonPublic | BindingFlags.Instance);

                Delegate d = Delegate.CreateDelegate(del, this, mi); // <- "Error binding to target method."

                ev.AddEventHandler(loader.LoadedGestures[i], d);
            }
        }
    }

    private void GestureDetected(object sender, GestureEventArgs e)
    {
        // do stuff
    }
} 
```

问题是 GestureEventArgs 和 GestureEventHandler 是在每个 .dll 中定义的，否则它们将无法编译。我试图将 GestureEventHandler 附加为在主类的程序集中创建的对象，但它抱怨在不同的程序集中有两个相同的对象类型......

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:40:40.247

在多个程序集中定义 GestureEventHandler/Args 是一个严重的问题。您永远不会获得与事件匹配的事件处理程序方法签名，.NET 类型的标识包括声明它的程序集。在您解决核心问题之前，这不会变得更好，只有一个程序集应该声明 GestureEventHandler /Args 并且它应该被所有可以引发事件的程序集引用。还有你的项目。

使用 Reflection.Emit 为事件处理程序动态生成代码是一种绝望的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:10:11.740

如果我理解这一点，你有以下结构

程序集 1 - 定义 GestureDetected Event 和 GestureEventArgs 的一个版本。程序集 2 - 定义 GestureDetected Event 和 GestureEventArgs 的一个版本。Assembly 3 - Dynamicaly 发现这些事件并尝试将它们连接到处理程序。

如果是这种情况，Assembly 3 引用的是哪个版本的 GestureEventArgs？

如果程序集 3 引用程序集 1 中的 GestureEventArgs 版本，则当 for 循环尝试挂钩程序集 2 中的事件时，您应该期望得到绑定异常（您可以检查这一点）

在不太了解您要设计的内容的情况下，我建议您可以通过创建一个定义了所有这些常见类型的通用库并在所有 dll 之间共享该库来解决此问题（这将为您提供一个插件类型架构）

# capistrano - Capistrano - 清理旧版本问题

> ID：14482986
> 
> 赞同：0
> 
> 时间：2013-01-23T15:17:27.343
> 
> 标签：capistrano

我遵循了另一篇文章中关于如何清理旧 capistrano 版本的建议，但是，我意识到我实现它的方式已经弄乱了我的应用程序中的路径（谢天谢地，只是在一个临时站点上！）。我在我的 config/deploy/staging.rb 脚本中使用下面的代码，但它无法在正确的位置运行，因为在部署后我最终导致应用程序失败，因为它试图从早期版本中加载类。如果我删除该`keep_releases`行和下面的行，然后重新部署，一切都会再次运行。有没有人遇到过这个问题？

```
set :use_sudo, false
set :keep_releases, 1
after "deploy:update", "deploy:cleanup"

namespace :deploy do
  task :symlink_shared do
    // run some commands i need
  end
end

before "deploy:restart", "deploy:symlink_shared" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:22:54.817

所以看起来顺序不正确 - 我改为`keep_releases`2，删除下面的行，然后将最后一行更改为以下内容：

```
"deploy:update", "deploy:symlink_shared"
after "deploy:restart", "deploy:cleanup" 
```

# stub - Selenium 模拟服务器访问

> ID：14482988
> 
> 赞同：1
> 
> 时间：2013-01-23T15:17:31.003
> 
> 标签：stub, sahi, dummy-data

我有一个网站，我想使用 Selenium WebDriver（2.28 版）进行测试，并将其与我的 CI（Maven 和 Hudson）集成。

问题是为了正确测试前端，我需要访问服务器（对于实际的 HTML 和 REST 资源）。如果我在构建过程中访问我构建和部署的实际服务器，则测试将不会被完全封装，因为每次数据可能都不同（基于在构建环境的数据库中驻留的数据）建造）。

因此，在我看来，我必须模拟服务器访问。我只是在 Selenium 中找不到对此的支持，而且我想不出没有 Selenium 支持的最佳方法。

我可以在实际服务器中的不同 URL 上为我的所有资源（HTML 和 REST）创建模拟，并在我的测试中访问这些资源而不是生产级资源（使用某种标志来指示我应该访问模拟资源而不是真实资源）。但这并不是真正的嘲讽...

作为参考，我看到在 Sahi 测试框架中有一个 addMock(url, class_function) 的特性 - 当 Sahi 运行到指定的 URL 时，它将调用指定的类和函数而不是访问 URL，而类和函数应该提供资源，而不是提供资源的 URL。

我正在 Selenium 中寻找类似的东西（尽管可能不可能，因为 Sahi 充当代理）。

非常感谢，丹尼尔

# jsp - Spring MVC 3 和处理静态内容 - 模板内的引用

> ID：14482989
> 
> 赞同：1
> 
> 时间：2013-01-23T15:17:36.580
> 
> 标签：jsp, spring-mvc, staticresource, thymeleaf

我们的 webapp 使用 Spring 3.1。

我们目前将静态资源映射为

```
<mvc:resources mapping="/static/**" location="/static/" /> 
```

在我们的骨架[模板](http://www.thymeleaf.org/)中，我们引用这样的样式表：

```
<link rel="stylesheet" href="static/css/main.css"> 
```

现在发生的事情是我在 webapp 的主页中加载 css 和图像没有问题（比如[http://www.mysite.com](http://www.mysite.com)），但是我在内页中得到 404（比如[http://www. mysite.com/section1/chapter1](http://www.mysite.com/section1/chapter1)）

我该如何解决这个问题？

编辑：

我们**没有**使用 JSP/JSTL。我们正在使用[Thymeleaf](http://www.thymeleaf.org/thvsjsp.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:24:06.437

根据[Themeleaf 文档](http://www.thymeleaf.org/standardurlsyntax.html)，它会是这样的：

```
<link rel="stylesheet" th:href="@{/static/css/main.css}"> 
```

或者，`JSTL` `c:url`如果您正在使用，您也可以使用标签`JSP`：

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<link rel="stylesheet" href="<c:url value="/static/css/main.css" />"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:23:52.837

您可能想要使用 Spring URL JSTL 标记：

```
<link rel="stylesheet" href="<spring:url value="/static/css/main.css" />"> 
```

这应该基于当前上下文解析绝对 URL，并且将适用于嵌套在子目录中的 HTML。

# android - Android:: Contact 应用程序如何与 Contact provider 连接

> ID：14482990
> 
> 赞同：0
> 
> 时间：2013-01-23T15:17:39.107
> 
> 标签：android

我已经分离了 Android 联系人应用程序和联系人提供程序。两者都完美安装在手机中。当我使用我的联系人应用程序创建联系人时，此联系人未使用我的联系人提供程序；它使用android默认联系人提供程序，并在以下位置创建db文件，即/data/data/com.android.provider.contact/database/contacts2.db。我希望我的联系人应用程序使用我的联系人提供程序，以便将contact.db 保存在以下位置，即/data/data/com.android.xyz.provider.contact/database/contacts2.db。我需要在我的联系人应用程序中更改哪里才能使用我的联系人提供商？

# javascript - 禁用第一张幻灯片上的“上一张”按钮？尼沃斯莱德

> ID：14482994
> 
> 赞同：0
> 
> 时间：2013-01-23T15:17:50.557
> 
> 标签：javascript, jquery, nivo-slider

我正在将[Nivoslider](http://nivo.dev7studios.com/demos/)用于我正在处理的 Web 项目。

正如您从上面的链接中看到的那样，即使在第一张幻灯片上也会显示“上一个”按钮。

是否可以使 NivoSlider “线性”并且**仅在幻灯片编号大于 0 时才显示上一个按钮**？

似乎 NivoSlider 默认设置为“无限”或“圆形”，但我确信必须有一种方法来改变它。

非常感谢您对此的任何帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:19:28.433

初始化滑块时，您可以使用自定义 afterChange 函数。

```
var sliderSelector = '#slider'; // Replace with your slider selector
$(sliderSelector).nivoSlider({
    // .. Other config here
    controlNav: true, // This solution relies on this to work
    afterChange: function() {
        // Hide prev button if on first slide
        if ($(sliderSelector + ' .nivo-controlNav .nivo-control:first').hasClass('active'))
            $(sliderSelector + ' .nivo-prevNav').hide();
        else
            $(sliderSelector + ' .nivo-prevNav').show();

        // Hide next button if on last slide
        if ($(sliderSelector + ' .nivo-controlNav .nivo-control:last').hasClass('active'))
            $(sliderSelector + ' .nivo-nextNav').hide();
        else
            $(sliderSelector + ' .nivo-nextNav').show();
    },
    afterLoad: function() {
        // If you have randomStart set to true, then you might check with what slide it started and act accordingly.
        // If you use the default, then this should be all you need
        $(sliderSelector + ' .nivo-prevNav').hide();
    }
}); 
```

# android - 支持 Android 和 iOS 云的文件选择器

> ID：14482996
> 
> 赞同：2
> 
> 时间：2013-01-23T15:18:01.100
> 
> 标签：android, ios

是否有任何适用于 Android 和 iOS 的文件选择器库可以集成到我的应用程序中，并支持：

*   SD 卡中的文件
*   投递箱
*   谷歌云端硬盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:23:53.507

刚刚找到一个 - [Filepicker.io](https://www.filepicker.io/)。

到目前为止看起来棒极了。