# StackOverflow 问答 16102000-16102999

# javascript - 属性更改后将 jquery 插件重新绑定到选择器？

> ID：16102002
> 
> 赞同：1
> 
> 时间：2013-04-19T09:58:18.270
> 
> 标签：javascript, jquery, jquery-plugins, bind, loupe

我为产品页面创建了一个相当简单的画廊。一个产品可以有多张图片，所以我决定在上面放一张大特色图片，在下面显示缩略图。当您单击缩略图时，大特色图像将更新以显示更大版本的缩略图。这一切都很好。问题是我想使用一个名为[loupe](http://jdbartlett.com/loupe/)的 jQuery 插件，它为特色图像添加了放大功能。它有点工作，但是当我更改特色图像（通过单击缩略图）时，放大镜插件无法识别源更改，并且仍将以前的图像显示为叠加。

请参阅此代码笔：[http ://codepen.io/vobpler/pen/klfEb](http://codepen.io/vobpler/pen/klfEb) *编辑：* jsFiddle 链接以防上述情况不起作用：http: [//jsfiddle.net/c8bXE/](http://jsfiddle.net/c8bXE/)

这是我的标记：

```
<div class="featured">
    <a href="">
        <img src="" alt="">
    </a>
</div>

<div class="thumbnails">
    <a href="">
        <img src="" alt="">
    </a>
    <a href="">
        <img src="" alt="">
    </a>
    <a href="">
        <img src="" alt="">
    </a>
</div> 
```

有没有办法“卸载”放大镜，并在特色图像更改后重新附加它？我尝试在源更改后重新应用它，但没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:09:04.670

查看插件的代码并进行一些检查后，我可以看到您只需要在处理程序的末尾添加以下行`fullImg.load()`：

```
$('.loupe > img').prop('src', fullSrc); 
```

见[**工作小提琴**](http://jsfiddle.net/c8bXE/1/)

# android - PhoneGap 与离线 JQueryMobile

> ID：16102004
> 
> 赞同：1
> 
> 时间：2013-04-19T09:58:21.270
> 
> 标签：android, jquery, cordova, mobile

我按照本指南创建了我的第一个 PhoneGap 应用程序： [http](http://cleancodedevelopment-qualityseal.blogspot.de/2012/12/first-phonegap-app-with-android-using.html) ://cleancodedevelopment-qualityseal.blogspot.de/2012/12/first-phonegap-app-with-android-using.html 这很好用。现在，我想在这个应用程序中使用 JQuery Mobile。

我下载了三个文件并将它们放入与我的 index.html 相同的目录中。index.html 的头部如下所示：

```
<link rel="stylesheet" href="jquery.mobile-1.3.1.min.css" />
<script src="cordova-2.6.0.js"></script>
<script src="jquery.mobile-1.3.1.min.js"></script>
<script src="jquery-1.9.1.min.js"></script> 
```

不工作。当我使用jquery mobile的“在线版”时，像这样：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script> 
```

有用。但我想制作一个离线应用程序。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:33:01.447

您应该在 jQuery Mobile 参考之前添加 jQuery 参考，因为 JQM 在内部使用 jQuery。在 PhoneGap 应用程序中，您不应添加来自 CDN 的引用，因为它会大大减少应用程序的加载时间。

如果您像这样重新排列本地引用，您的代码将起作用。

```
<link rel="stylesheet" href="jquery.mobile-1.3.1.min.css" />
<script src="cordova-2.6.0.js"></script>
<script src="jquery-1.9.1.min.js"></script>
<script src="jquery.mobile-1.3.1.min.js"></script> 
```

# python - Python，如何删除文件中的工作？

> ID：16102005
> 
> 赞同：1
> 
> 时间：2013-04-19T09:58:24.190
> 
> 标签：python, file, io

我知道文件指针的位置，我想删除前面的字符。

当然我可以创建另一个文件，写在左边的内容，这不是我想要的方式。

换句话说，我想“就地”做这个。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:17:30.233

```
for line in fileinput.input('file.txt', inplace=True):
    line = ... # edit line
    print line, # stdout is redirected to the file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:13:56.227

只需重写文件。将其读入某种数据格式（字符串或带有 的字符串列表`readlines()`）更改所需的字符，然后再次将数据写入文件。实际上，这样做比在文件中执行高精度操作更明智。

# ruby-on-rails - 一键创建同一张表的多条记录

> ID：16102007
> 
> 赞同：-1
> 
> 时间：2013-04-19T09:58:27.067
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller, controller

我有一份问卷需要回答。

我的模型有表格答案和表格问题，我正确通过但我收到错误

> nil:NilClass 的未定义方法“每个”

我只需要一种将这个数组传递给控制器​​的方法。

我认为这个错误意味着我传递了一个空数组，所以如果你能用另一种方式帮助我编写代码或编辑它以使其正常工作。

我的观点 ：

```
 <%@answers_array = []%>
    <% @questionnaire.qquestions.each do |question| %>
        <strong><%=question.body %></strong>
        </br>
    <%= text_field_tag 'answers_array[]',""%> 
            <%end%>
 <p><%= link_to "Done",:controller => :answer_questionnaires, :action => :create, :params=>{:id => @questionnaire.id, :@answers=>@answers_array}  %></p> 
```

我的控制器：

```
def create
  @questionnaire = Questionnaire.find(params[:id])
  number = 1
  @answers = params[:@answers]
  @answers.each do |answer| 
      AnswerQuestionnaire.create(:body => answer,:qquestion_id =>number)
      number = number + 1  
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:04:49.377

我认为创建嵌套表单而不是像那样传递参数会更好。这里有一些[关于嵌套表单的不错的 railscasts](http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested+forms)。

# javascript - 如何将数组值传递给zk中的javascript

> ID：16102009
> 
> 赞同：0
> 
> 时间：2013-04-19T09:58:37.833
> 
> 标签：javascript, zk

根据我的要求，我必须将日期数组传递给 javascript 以更改颜色日历日。

但我已经完成了[http://zkfiddle.org/sample/15d409/23-Disable-Datebox](http://zkfiddle.org/sample/15d409/23-Disable-Datebox)的方式，但点击日历后它会改变值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:47:35.000

因为在这种情况下，Clients.evalJavaScript 将在小部件的所有其他 js 功能完成后评估 jsCommand，因为渲染小部件 (renderProperties) 的命令将在 doAfterCompose 之前调用。

您需要的是 setWidgetOverride，用它来覆盖日历小部件的重绘，请参考更新后的示例。

[日历着色样本](http://zkfiddle.org/sample/15d409/24-Disable-Datebox)

# java - 使用 ServiceLoader 动态加载插件 jar

> ID：16102010
> 
> 赞同：48
> 
> 时间：2013-04-19T09:58:38.833
> 
> 标签：java, jar, classpath, serviceloader

我正在尝试为我的应用程序创建一个插件系统，我想从一些简单的东西开始。每个插件都应该打包在一个 .jar 文件中并实现`SimplePlugin`接口：

```
package plugintest;

public interface SimplePlugin {
    public String getName();
} 
```

现在我已经创建了`SimplePlugin`一个 .jar 的实现，并把它放在主应用程序的 plugin/ 子目录中：

```
package plugintest;

public class PluginTest implements SimplePlugin {
    public String getName() {
        return "I'm the plugin!";
    }
} 
```

在主应用程序中，我想获取`PluginTest`. 我尝试了两种选择，都使用`java.util.ServiceLoader`.

**1.动态扩展类路径**

这使用已知的 hack 在系统类加载器上使用反射来避免封装，以便添加`URL`类路径。

```
package plugintest.system;

import plugintest.SimplePlugin;

import java.io.File;
import java.io.IOException;
import java.net.URL;
import java.net.URLClassLoader;
import java.util.Iterator;
import java.util.ServiceLoader;

public class ManagePlugins {
    public static void main(String[] args) throws IOException {
        File loc = new File("plugins");
        extendClasspath(loc);

        ServiceLoader<SimplePlugin> sl = ServiceLoader.load(SimplePlugin.class);
        Iterator<SimplePlugin> apit = sl.iterator();
        while (apit.hasNext())
            System.out.println(apit.next().getName());
    }

    private static void extendClasspath(File dir) throws IOException {
        URLClassLoader sysLoader = (URLClassLoader) ClassLoader.getSystemClassLoader();
        URL urls[] = sysLoader.getURLs(), udir = dir.toURI().toURL();
        String udirs = udir.toString();
        for (int i = 0; i < urls.length; i++)
            if (urls[i].toString().equalsIgnoreCase(udirs)) return;
        Class<URLClassLoader> sysClass = URLClassLoader.class;
        try {
            Method method = sysClass.getDeclaredMethod("addURL", new Class[]{URL.class});
            method.setAccessible(true);
            method.invoke(sysLoader, new Object[] {udir});
        } catch (Throwable t) {
            t.printStackTrace();
        }
    }
} 
```

plugins/ 目录按预期添加（可以检查调用`sysLoader.getURLs()`），但是`ServiceLoader`对象给出的迭代器为空。

**2\. 使用 URLClassLoader**

这使用了另一个定义，`ServiceLoader.load`带有类的第二个参数`ClassLoader`。

```
package plugintest.system;

import plugintest.SimplePlugin;

import java.io.File;
import java.io.FileFilter;
import java.io.IOException;
import java.net.URL;
import java.net.URLClassLoader;
import java.util.Iterator;
import java.util.ServiceLoader;

public class ManagePlugins {
    public static void main(String[] args) throws IOException {
        File loc = new File("plugins");

        File[] flist = loc.listFiles(new FileFilter() {
            public boolean accept(File file) {return file.getPath().toLowerCase().endsWith(".jar");}
        });
        URL[] urls = new URL[flist.length];
        for (int i = 0; i < flist.length; i++)
            urls[i] = flist[i].toURI().toURL();
        URLClassLoader ucl = new URLClassLoader(urls);

        ServiceLoader<SimplePlugin> sl = ServiceLoader.load(SimplePlugin.class, ucl);
        Iterator<SimplePlugin> apit = sl.iterator();
        while (apit.hasNext())
            System.out.println(apit.next().getName());
    }
} 
```

再一次，迭代器从来没有“下一个”元素。

我肯定缺少一些东西，因为这是我第一次“玩”类路径和加载。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-19T15:26:13.583

问题很简单。而且很愚蠢。在插件 .jar 文件中，`/services/plugintest.SimplePlugin`目录中缺少该`META-INF`文件，因此`ServiceLoader`无法将 jar 识别为服务并加载类。

差不多就是这样，第二种（更清洁的）方式就像一个魅力。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-21T05:42:54.673

从 Java 9 开始，提供扫描的服务将变得更加容易和高效。不再需要`META-INF/services`.

在接口模块声明中声明：

```
uses com.foo.spi.Service; 
```

在提供者的模块中：

```
provides com.foo.spi.Service with com.bar.ServiceImplementation 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-28T19:57:57.747

Oracle 文档中已经描述了您的应用程序概念的解决方案（包括动态加载 JAR）

**使用 Java 平台创建可扩展的应用程序** [http://www.oracle.com/technetwork/articles/javase/extensible-137159.html](http://www.oracle.com/technetwork/articles/javase/extensible-137159.html)

在文章的底部，您会找到指向

*   示例的源代码
*   Javadoc 服务加载器 API

在我看来，最好稍微修改 Oracle 的示例，而不是像 Omer Schleifer 所说的那样重新发明轮子。

# jquery - 加载后的每个功能，还是相反？

> ID：16102012
> 
> 赞同：0
> 
> 时间：2013-04-19T09:58:42.973
> 
> 标签：jquery, load, position, each

我可以对此进行测试，但由于互联网速度如此之快，我的图像加载速度如此之快，我不确定这是否有效。

我想编写一个函数来获取每个图像的宽度并在图像加载后重新定位图像。我在想这样的事情，但我不确定这是否可行？

```
$("#social-media li a > img").each(function () {
    var $this = $(this),
        w1 = $this.parent().width() / 2,
        w2 = $this.width() / 2,
        w3 = w1 - w2;

    $this.load(function () {
        $this.css("left", w3);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:22:21.540

您可以在窗口加载后进行迭代，然后您无需等到图像加载尝试此代码

```
$(window).load(function() {
    $("#social-media li a > img").each(function() {
        var $this = $(this),
                w1 = $this.parent().width() / 2,
                w2 = $this.width() / 2,
                w3 = w1 - w2;

        $this.css("left", w3);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:26:56.767

首先，请不要使用[`.load()`](http://api.jquery.com/load-event/)事件触发的方法，因为与同名的 AJAX 方法混淆，在 jQuery 1.8 中已弃用。请改用该[`.on()`](http://api.jquery.com/on/)方法。

其次，如[文档](http://api.jquery.com/load-event/)中所述：

> ## 与图像一起使用时加载事件的注意事项
> 
> 开发人员尝试使用`.load()`快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行功能。应该注意几个已知的警告。这些是：
> 
> *   它不能始终如一地工作，也不能可靠地跨浏览器。
> *   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> *   它没有正确地冒泡 DOM 树
> *   可以停止对已经存在于浏览器缓存中的图像进行触发

也就是说，我认为 David DeSandro 的[**imagesLoaded 插件**](https://github.com/desandro/imagesloaded)可能会解决这些问题并为您想要实现的目标工作。

# javascript - MeteorJS 和 Coffeescript

> ID：16102015
> 
> 赞同：9
> 
> 时间：2013-04-19T09:58:44.537
> 
> 标签：javascript, coffeescript, meteor

我有 /clients/client.js ， /server/server.js 和 /model.js

在 model.js 中，我有：“Lists = new Meteor.Collection("lists"); 在客户端/服务器中，我使用了这个集合。一切正常。

添加咖啡脚本后。我已将所有 js (3) 文件转换为 .coffee。删除 js 文件并启动流星。但现在我得到了：

未捕获的 ReferenceError：未定义列表

为什么？错在哪里？

列表 = 新 Meteor.Collection “列表”

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T17:04:23.163

请参阅[http://docs.meteor.com/#coffeescript](http://docs.meteor.com/#coffeescript)，了解如何`@`在 Meteor 环境中使用方便的方式从 CoffeeScript 定义全局变量。正如@Akshat 在评论中提到的那样，Meteor 将`this`全局环境设置为顶层以简化此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:45:08.600

使用咖啡脚本，如果您想在另一个文件中访问您的变量/函数，您需要公开您的变量

来自流星文档

> 全局变量可以通过使用 this（或 CoffeeScript 的 @ 简写）在 CoffeeScript 中设置，因为在顶层 this 指的是全局命名空间（客户端上的窗口和服务器上的全局）。因此
> 
> @myFunction = -> 顶层的 123 设置全局变量 myFunction。

所以全球化你的列表：

```
@Lists = new Meteor.Collection "lists"; 
```

这样`model.js`你的其他文件就可以访问这个内部（它变成全局的）

# android - Android厂商捆绑应用的生命周期

> ID：16102016
> 
> 赞同：0
> 
> 时间：2013-04-19T09:58:55.473
> 
> 标签：android, sqlite, sqliteopenhelper

我们正在与一家 Android 手机制造商一起寻找捆绑我们其中一款应用程序的选项。对于使用 sqlite 作为数据存储的应用程序，如何管理生命周期，即升级、降级、与 Play 商店的连接？如果有人有任何相关经验，请分享。

笔记

1 - `onDowngrade`API 级别 11 及以上可用，而我们有 API 7/8 的最低限制

2 - 删除打包应用程序上的所有更新会盲目卸载新更新

# c# - ISO/IEC 8859-2 字符的正则表达式

> ID：16102017
> 
> 赞同：2
> 
> 时间：2013-04-19T09:58:56.473
> 
> 标签：c#, regex, character-encoding

有没有办法编写一个简单的正则表达式来匹配[ISO/IEC 8859-2](http://en.wikipedia.org/wiki/ISO/IEC_8859-2)字符集中的字符，但不匹配其他任何内容。

此输入是 C# 的普通 UTF-16。

如果一切都失败了，我可以逐个字符地编写整个代码表，但我希望有一种更紧凑的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:32:04.360

我不确定是否有更紧凑的方式，但如果您只是列出字符集中的所有可打印字符，则正则表达式将如下所示：

```
var regex = new Regex("^[\u0020-~\u00A0¤§¨­°´¸ÁÂÄÇÉËÍÎÓÔÖ×ÚÜÝßáâäçéëíîóôö÷úüýĂ-ćČ-đĘ-ěĹĺĽľŁ-ńŇňŐőŔŕŘ-śŞ-ťŮ-űŹ-žˇ˘˙˛˝]*$"); 
```

或等效地

```
var regex = new Regex("^[\u0020-\u007E\u00A0\u00A4\u00A7\u00A8\u00AD\u00B0\u00B4\u00B8\u00C1\u00C2\u00C4\u00C7\u00C9\u00CB\u00CD\u00CE\u00D3\u00D4\u00D6\u00D7\u00DA\u00DC\u00DD\u00DF\u00E1\u00E2\u00E4\u00E7\u00E9\u00EB\u00ED\u00EE\u00F3\u00F4\u00F6\u00F7\u00FA\u00FC\u00FD\u0102-\u0107\u010C-\u0111\u0118-\u011B\u0139\u013A\u013D\u013E\u0141-\u0144\u0147\u0148\u0150\u0151\u0154\u0155\u0158-\u015B\u015E-\u0165\u016E-\u0171\u0179-\u017E\u02C7\u02D8\u02D9\u02DB\u02DD]*$"); 
```

# java - 按表中的某些字段排序，没有关系

> ID：16102022
> 
> 赞同：2
> 
> 时间：2013-04-19T09:59:18.307
> 
> 标签：java, hibernate, jpa, hql, jpql

休眠 3.5 JPA 1.0

注释@OrderBy 仅用于列表字段上的一对多或多对多关系。但我希望它用于单个表，应该按表中的某些字段排序。有可能的？还是另一种解决方案？

例如：

```
SELECT * FROM INTERCHANGE_KEYS order by PANEL_OPTION, KEY_NAME 
```

我不想为每个表写 hql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:39:37.393

您可以为在 JPA 实体上使用的所有常见操作创建接口。这个接口必须有两个泛型。我将为您提供 2 个操作（persist 和 findAll）的示例，但所有其他操作（合并、删除、查找......）也可以实现。例如：

```
    公共接口 JpaDaoBase {
       公共无效持续（E e）；
       public List findAll(String orderProperty, OrderType orderType);
    }

```

E 类应该是 JPA 实体，K 代表用于主键的 Java 类型的属性（例如 Long）。

以及接口的实现：

```
公共抽象类 JpaDaoBaseImpl 实现 JpaDaoBase {

        受保护的实体类；

        公共 JpaDaoBaseImpl() {
            this.entityClass = (Class) ((ParameterizedType) getClass()
            .getGenericSuperclass()).getActualTypeArguments()[0];
        }

        @覆盖
        公共无效持久（E e）{
             entityManager.persist(e);
        }

        @覆盖
        公共列表 findAll(String orderProperty, OrderType orderType) {
        返回 entityManager.createQuery(
         "从 " + entityClass.getName() + " o orderby "中选择 o
                  orderProperty + + " " + orderType.toString(), entityClass)
         .getResultList();
        }
   }

```

之后，对于实体 Example，您通过扩展 JpaDaoBaseImpl 来创建 DAO ExampleDao 的实现，您将开箱即用地实现这两个方法。

这是在 JPA (Hiberante) 项目中创建 DAO 层的标准方法。如果你使用 Spring，你可以使用[Spring Data JPA](http://www.springsource.org/spring-data/jpa)项目（他们有几个 Dao 层类的标准实现）。

# javascript - jQuery 创建一个带 href 属性的

> ID：16102024
> 
> 赞同：3
> 
> 时间：2013-04-19T09:59:18.697
> 
> 标签：javascript, jquery, anchor, href

我刚刚遇到了一个非常严重的 jQuery 问题。我想使用 jQ 创建一个元素。就像我尝试的常规方式一样：`jQuery('<a href="http://www.google.com"></a>');`

但这**不起作用**。所以我尝试了几种不同的元素类型和属性。事实证明，我无法使用包含`href=""`.

*   `jQuery('<a id="id5" name="link"></a>');`将工作
*   `jQuery('<a id="id5" name="link" href=""></a>');`不会**工作**。

这个问题是否有任何已知问题或解决方法？感谢您的建议……</p>

***编辑：***

澄清一下：我不想使用已知属性创建元素。我有一个返回准备好的 HTML 代码的函数。我想使用这段代码来提取图像标签，然后获取它的属性。我不知道返回的 HTML 是否会是相同的结构。我只知道它包含一个图像标签。这是我之前使用的代码：

```
jQuery(html).find('img:first').attr('class').match(/\image-(\d+)\b/)[1] 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-19T10:00:51.530

我会使用不同的方法：

```
var newLink = $("<a />", {
    id : "id5",
    name : "link",
    href : "http://www.google.com/",
    text : "some text"
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T10:01:20.930

这应该有效（经过测试）：

```
var thelink = $('<a>',{
    text: 'linktext',
    title: 'some title',
    href: 'somelink.html'
}).appendTo('body'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T10:07:17.040

```
var a = document.createElement('a');
$(a).attr('href','index.html').attr('id','xyz').addClass('example'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:50:46.493

经过一些进一步的试验和错误，结果证明这是一个关于 Safari 的问题。在 Chrome 中，我的代码效果很好。

我终于得到了修复。我只是将从函数返回的 HTML 字符串包装到`<div>`标签中：

```
html = "<div>" + html + "</div>"; 
```

# javascript - 如何在画布中缩放图像特定部分

> ID：16102026
> 
> 赞同：0
> 
> 时间：2013-04-19T09:59:26.083
> 
> 标签：javascript, jquery, html

我在画布上有一张图片。我想将图像缩放到左侧的特定部分。它会在加载后 10 秒发生（缩放也很慢）。我怎样才能做到这一点？

```
function draw()
{
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    var y = new Image();
    y.src = "images.jpg";
    ctx.drawImage(y,0,0,400,400);
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:01:35.867

你可以试试这段代码

```
ctx.scale(2, 2) // Doubles size of anything draw to canvas. 
```

或查看此链接[http://www.akademy.co.uk/blog/2010/06/canvaszoom-html5-canvas-and-code/](http://www.akademy.co.uk/blog/2010/06/canvaszoom-html5-canvas-and-code/)

# c - 使用 TCP 应用程序发送超过 65536 字节

> ID：16102028
> 
> 赞同：0
> 
> 时间：2013-04-19T09:59:31.693
> 
> 标签：c, sockets, tcp, ip

我想知道，两个将文本文件从发送方传输到接收方的简单程序如何发送超过 65536 字节（IP 数据包的最大大小）。这是发件人：

```
 FILE *fp=fopen("file_to_send.txt","r");
 char msg[65536];
 len = strlen(msg)+1;
 nwrite=0;
 printf ("write()\n");
 fflush(stdout);
 do{
   n=write(socketfd, &(msg[nwrite]), len-nwrite);
   nwrite+=n;
 }
 while( (n<0) && (errno==EINTR) ); 
```

这是接收器：

```
#define MAXSIZE 65536
.....
char buf[MAXSIZE];
nread=0;
do{ 
  n=read(socketfd, &(buf[nread]), MAXSIZE ) ;
  fflush(stdout);
  nread+=n;
}while( (n<0) && (errno==EINTR) ); 
```

如果 file_to_send 权重 < 大于 65536，它会起作用，但如果它更大，我会丢失部分文本。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:27:11.503

什么是最大尺寸？

在接收器中，您收到的 MAXSIZE 可能大于缓冲区本身。

您应该在每个循环中将缓冲区传输到标准输出，这样您在缓冲区中始终有空间供下一次读取。

```
char buf[65536];
nread=0;
do{ 
  n=read(socketfd, buf, 65536);
  if (n > 0) {
    n=write(stdout, buf, n);
    fflush(stdout);
    nread+=n;
  }
} while( (n>0) || (errno==EINTR) ); 
```

还要检查 Davide Berra 的答案以修复发送者和接收者中的循环条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:16:20.680

你的`while`控制有问题。

如果`write`函数成功，它将返回一个 value `greater than 0`，然后您的循环将在第一次写入后退出。

粗略地说，你应该改变这一行

```
 while( (n<0) && (errno==EINTR) ); 
```

和

```
 while( n>0 || error==EINTR ); 
```

...`read`侧面也一样

# geometry - 雕刻 CSG 库

> ID：16102029
> 
> 赞同：0
> 
> 时间：2013-04-19T09:59:36.680
> 
> 标签：geometry, modeling, csg

有没有人成功编译和使用 Carve CSG 库？我正在尝试在一个项目中使用它，但我无法让它工作。此外，文档非常糟糕。我一直在查看 Blender 源代码，它似乎成功地使用了 Carve，但我在复制它时遇到了麻烦。

这是我一直在尝试使用的代码，只是为了创建一个与 Carve 一起使用的立方体：

```
std::vector<carve::geom3d::Vector> vertices;

vertices.push_back(carve::geom::VECTOR(+1.0, +1.0, +1.0));
vertices.push_back(carve::geom::VECTOR(-1.0, +1.0, +1.0));
vertices.push_back(carve::geom::VECTOR(-1.0, -1.0, +1.0));
vertices.push_back(carve::geom::VECTOR(+1.0, -1.0, +1.0));
vertices.push_back(carve::geom::VECTOR(+1.0, +1.0, -1.0));
vertices.push_back(carve::geom::VECTOR(-1.0, +1.0, -1.0));
vertices.push_back(carve::geom::VECTOR(-1.0, -1.0, -1.0));
vertices.push_back(carve::geom::VECTOR(+1.0, -1.0, -1.0));

std::vector<int> f;
int numfaces = 6;

f.push_back(4);
f.push_back(0);
f.push_back(1);
f.push_back(2);
f.push_back(3);

f.push_back(4);
f.push_back(7);
f.push_back(6);
f.push_back(5);
f.push_back(4);

f.push_back(4);
f.push_back(0);
f.push_back(4);
f.push_back(5);
f.push_back(1);

f.push_back(4);
f.push_back(1);
f.push_back(5);
f.push_back(6);
f.push_back(2);

f.push_back(4);
f.push_back(2);
f.push_back(6);
f.push_back(7);
f.push_back(3);

f.push_back(4);
f.push_back(3);
f.push_back(7);
f.push_back(4);
f.push_back(0);

carve::mesh::MeshSet<3> *poly = new carve::mesh::MeshSet<3> (vertices, numfaces, f); 
```

它似乎卡在最后一行，陷入长时间运行的循环，然后出现段错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T16:17:55.507

您使用的是搅拌机来源的版本吗？尽管我遇到了另一种错误，但我也遇到了一些问题。我的问题是我没有使用编译搅拌机雕刻库时使用的所有相同编译器标志进行编译。当我将它们添加到我的构建中时，一切正常。通常我会抱怨使用库所需的秘密编译器标志，但它是搅拌机项目的内部。如果您通过 CMake 构建搅拌机雕刻库，您可以使用“make VERBOSE=1”（如果您使用 ninja，则使用“ninja -v”）进行编译，以查看所有内容的编译方式，然后适当地修改您的构建。我正在使用的标志（显然这些可能会随着时间和构建环境而变化；不要依赖于它们是否正确）是：

```
-DCARVE_SYSTEM_BOOST -DDEBUG -DHAVE_BOOST_UNORDERED_COLLECTIONS -DHAVE_STDBOOL_H -DWITH_BOOL_COMPAT -D_DEBUG -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -D__LITTLE_ENDIAN__ -D__MMX__ -D__SSE2__ -D__SSE__ 
```

我没有尝试将这些减少到最低要求；我只是剪切并粘贴了所有似乎与我的探索/测试代码构建相关的标志。

# c# - 无法加载文件或程序集 IKVM.OpenJDK.Core

> ID：16102030
> 
> 赞同：3
> 
> 时间：2013-04-19T09:59:38.367
> 
> 标签：c#, ikvm, mpxj

我正在使用 MPXJ，这是一个允许在 Java 和 .Net 中操作项目信息的库。（更多信息在[http://mpxj.sourceforge.net/](http://mpxj.sourceforge.net/)）我正在使用 Visual Studio 2012。当我将 VSTO 项目模板用于控制台应用程序或 windows.forms 应用程序时，我的程序运行没有任何错误。

但是，当我使用 sharepoint webpart 模板时，我看到以下错误消息：

> System.IO.FileNotFoundException：无法加载文件或程序集“IKVM.OpenJDK.Core，Version=7.0.4335.0，Culture=neutral，PublicKeyToken=13235d27fcbfff58”或其依赖项之一。指定的模块无法找到。
> 文件：“IKVM.OpenJDK.Core，版本=7.0.4335.0，文化=中性，PublicKeyToken=13235d27fcbfff58”
> 在 MA_SQL_Workload.MppTaskController..ctor()
> 在 MA_SQL_Workload.UpdateStarter.startDBUpdate()

所以它找不到程序集“IKVM.OpenJDK.Core”。

MppTaskController.cs 类是唯一使用 MPXJ 库的类。当我实例化 MppTaskController 时发生错误。

当我在控制台或表单应用程序中使用完全相同的类时，它运行良好。如果您愿意，我可以将 windows.form 应用程序发送给您。

我想发布项目资源管理器的图片，但我需要至少 10 个声望才能发布图片。也许失败可能是项目文件夹中某些东西的错误路径。

如果您愿意，我想向您展示更多信息或将项目文件夹发送给您。

你怎么看，失败在哪里？

以下是文件夹 ...\ProjectName\WebpartName\bin\Debug\ 中的所有 *.dll 文件

```
IKVM.OpenJDK.Beans.dll
IKVM.OpenJDK.Charsets.dll
IKVM.OpenJDK.Core.dll
IKVM.OpenJDK.Jdbc.dll
IKVM.OpenJDK.Security.dll
IKVM.OpenJDK.SwingAWT.dll
IKVM.OpenJDK.Text.dll
IKVM.OpenJDK.Util.dll
IKVM.OpenJDK.XML.API.dll
IKVM.OpenJDK.XML.Bind.dll
IKVM.OpenJDK.XML.Parse.dll
IKVM.Runtime.dll
junit.dll
MA_SQL_Workload.dll
MA_SQL_Workload.pdb
MA_SQL_Workload.wsp
Microsoft.Office.Interop.MSProject.dll
mpxj.dll
poi-3.7-20101029.dll 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T12:49:30.547

确保您已使用它们的可执行文件在服务器上安装了 Saxon 组件。我遇到了同样的错误，虽然我的依赖项存在于服务器上的正确位置，但在我通过可执行文件安装 Saxon 组件之前，我得到了这个错误。祝你好运。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T08:59:19.223

我猜安装程序会将所需的 dll 加载到 GAC 中，但是如果没有安装程序，您应该能够通过将以下 dll 加载到使用 Saxon HE 的每台机器上的 GAC 中来使其工作：

```
saxon9he.dll
saxon9he-api.dll
IKVM.OpenJDK.Charsets.dll
IKVM.OpenJDK.Core.dll
IKVM.OpenJDK.Text.dll
IKVM.OpenJDK.Util.dll
IKVM.OpenJDK.XML.API.dll
IKVM.Runtime.dll 
```

以管理员权限运行以下命令会将单个 dll 加载到 GAC

```
"<Path To GACUtil>\GACUtil.exe" /if <Path to dll>\IKVM.OpenJDK.Charsets.dll 
```

我正在使用 .Net 4.5，所以在我的机器上 GACUtil.exe 位于 C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\NETFX 4.0 Tools\

# ruby-on-rails - Rspec 应该等待线程完成

> ID：16102037
> 
> 赞同：2
> 
> 时间：2013-04-19T09:59:55.620
> 
> 标签：ruby-on-rails, ruby, multithreading, rspec

运行下面列出的规范时出错。它不会等待线程完成并取消存根迁移方法，从而导致其中一个线程命中实际方法。
注意到它只发生在加载轨道的情况下，没有它们它可以正常工作或者只是更快地完成......

规格：

```
it "should not allow infinit recursion" do
  runner.stub(total_records: 4)
  runner.stub(:fetch_records_batch).and_return([:one, :two])
  runner.should_receive(:migrate).at_most(100).times
  expect { runner.run }.to raise_error(Exception, /Migration fall into recursion/)
end

it "should pass"
  1.should eq 1
end 
```

提取的一段代码：

```
class Runner
  def migrate(record)
    raise NotImplementedError
  end

  def run
     while have_records?(records = fetch_records_batch)
       threads = []
       records.each do |record|
         threads << Thread.new(record) do |thread_record|
           begin
             result = migrate(thread_record)
           rescue RuntimeError => exception
             register_event :record_migration_error, thread_record, exception
           end
         end
         recursion_preventer
      end
      threads.each(&:join)
    end
  end

  def recursion_preventer
    @counter ||= 0
    @counter += 1
    raise Exception, "Migration fall into recursion. Check logs." if @counter > (total_records * 1.1).round + 10
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-22T11:29:47.877

您始终可以模拟 Thread 类以简单地不启动线程，而是运行代码，我发现这比按照您建议的方式重写测试的侵入性要小得多。

将此添加到您的测试类：

```
describe MyClass do
  before(:each) do
    allow(Thread).to receive(:new).and_yield
  end
  #Your normal unaltered tests under here
end 
```

这种方法的缺陷是您不会遇到竞争条件，因此代码仍然可能包含诸如“线程 a 和线程 b 同时写入同一个变量，导致问题”之类的错误。您还应该考虑死锁场景，因为依赖其他线程来完成某些事情的代码很可能会被这种方法锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:35:26.263

通过添加确保块并调用 threads.each(&:join) 并在 records.each 之后移动 recursion_preventer 来解决

# r - 矢量化函数不会产生预期的结果

> ID：16102038
> 
> 赞同：0
> 
> 时间：2013-04-19T09:59:56.667
> 
> 标签：r, sapply

..这是我的数据问题：

```
rm(list=ls())

clc06_1 <- "111 - Continuous urban fabric"
clc06_2 <- "112 - Discontinuous urban fabric"
clc06_3 <- "121 - Industrial or commercial units"
clc06_4 <- "122 - Road and rail networks and associated land"
clc06_5 <- "123 - Port areas"
clc06_6 <- "124 - Airports"
clc06_7 <- "131 - Mineral extraction sites"
clc06_8 <- "132 - Dump sites"
clc06_9 <- "133 - Construction sites"
clc06_10 <- "141 - Green urban areas"
clc06_11 <- "142 - Sport and leisure facilities"
clc06_12 <- "211 - Non-irrigated arable land"
clc06_13 <- "212 - Permanently irrigated land"
clc06_14 <- "213 - Rice fields"
clc06_15 <- "221 - Vineyards"
clc06_16 <- "222 - Fruit trees and berry plantations"
clc06_17 <- "223 - Olive groves"
clc06_18 <- "231 - Pastures"
clc06_19 <- "241 - Annual crops associated with permanent crops"
clc06_20 <- "242 - Complex cultivation patterns"
clc06_21 <- "243 - Land principally occupied by agriculture, with significant areas of natural vegetation"
clc06_22 <- "244 - Agro-forestry areas"
clc06_23 <- "311 - Broad-leaved forest"
clc06_24 <- "312 - Coniferous forest"
clc06_25 <- "313 - Mixed forest"
clc06_26 <- "321 - Natural grasslands"
clc06_27 <- "322 - Moors and heathland"
clc06_28 <- "323 - Sclerophyllous vegetation"
clc06_29 <- "324 - Transitional woodland-shrub"
clc06_30 <- "331 - Beaches, dunes, sands"
clc06_31 <- "332 - Bare rocks"
clc06_32 <- "333 - Sparsely vegetated areas"
clc06_33 <- "334 - Burnt areas"
clc06_34 <- "335 - Glaciers and perpetual snow"
clc06_35 <- "411 - Inland marshes"
clc06_36 <- "412 - Peat bogs"
clc06_37 <- "421 - Salt marshes"
clc06_38 <- "422 - Salines"
clc06_39 <- "423 - Intertidal flats"
clc06_40 <- "511 - Water courses"
clc06_41 <- "512 - Water bodies"
clc06_42 <- "521 - Coastal lagoons"
clc06_43 <- "522 - Estuaries"
clc06_44 <- "523 - Sea and ocean"

# I want to extract the CLC Code nrs which are the 3-digit number in the string:
foo <- function(x) unlist(strsplit(x, " - "))[[1]]

# and vectorize foo. But why is.. 
sapply(ls()[1:44], foo, simplify = T)

# not behaving like..
foo(clc06_9) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:06:15.300

`ls()`返回对象名称，而不是对象本身。所以你必须做类似的事情：

```
R> vars <- grep("^clc06_", ls(), value=TRUE)
R> sapply(vars, function(v) { foo(get(v)) }, simplify = T)
 clc06_1 clc06_10 clc06_11 clc06_12 clc06_13 clc06_14 clc06_15 clc06_16 
   "111"    "141"    "142"    "211"    "212"    "213"    "221"    "222" 
clc06_17 clc06_18 clc06_19  clc06_2 clc06_20 clc06_21 clc06_22 clc06_23 
   "223"    "231"    "241"    "112"    "242"    "243"    "244"    "311" 
clc06_24 clc06_25 clc06_26 clc06_27 clc06_28 clc06_29  clc06_3 clc06_30 
   "312"    "313"    "321"    "322"    "323"    "324"    "121"    "331" 
clc06_31 clc06_32 clc06_33 clc06_34 clc06_35 clc06_36 clc06_37 clc06_38 
   "332"    "333"    "334"    "335"    "411"    "412"    "421"    "422" 
clc06_39  clc06_4 clc06_40 clc06_41 clc06_42 clc06_43 clc06_44  clc06_5 
   "423"    "122"    "511"    "512"    "521"    "522"    "523"    "123" 
 clc06_6  clc06_7  clc06_8  clc06_9 
   "124"    "131"    "132"    "133" 
```

但是`ls()`用于选择变量并不是一个好主意。您真的应该将所有`clc06_`值存储在一个向量中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T10:05:35.783

以下内容应该适合您：

```
sapply(ls()[1:44], function(x) foo(get(x)), simplify = TRUE) 
```

您可以将行为与以下内容进行比较：

```
> ls()[1]
[1] "clc06_1"
> foo(ls()[1])
[1] "clc06_1"
> foo(get(ls()[1]))
[1] "111" 
```

朱巴的回答中已经解释了这一点。

* * *

已经表明*你为什么不使用`list`?*

相比：

```
mylist <- list(clc06_1 = "111 - Continuous urban fabric",
               clc06_2 = "112 - Discontinuous urban fabric",
               clc06_3 = "121 - Industrial or commercial units",
               clc06_4 = "122 - Road and rail networks and associated land",
               clc06_5 = "123 - Port areas",
               clc06_6 = "124 - Airports")
sapply(mylist, foo)
# clc06_1 clc06_2 clc06_3 clc06_4 clc06_5 clc06_6 
#   "111"   "112"   "121"   "122"   "123"   "124" 
```

# jquery - 仅右侧的兄弟姐妹或使用 $(ID).something.$(ID2).something 或 next()

> ID：16102041
> 
> 赞同：0
> 
> 时间：2013-04-19T10:00:02.957
> 
> 标签：jquery

我有一个这样的html布局：-

```
<div id="left-column" style="200px"></div>
<div id="center-column"></div>
<div id="right-column"></div> 
```

在左栏中，我有一些与以下功能的链接，一个用于增大中心列，另一个用于缩小它。

眼下：-

```
OPTION 1 does both left and right columns

OPTION 2 works but throws an error in IE SCRIPT438: Object doesn't support property or method '$' which refers to the .$('#right....

OPTION 3 works growing but does not shrinking 
```

有什么想法吗？

谢谢

```
//GROWING
//OPTION 1:
    $('#center-column').animate({ width: '0px' }, 500).siblings().animate({ 'width': ($(window).width() - cLeft) + 'px' });
//OPTION 2:
    $('#center-column').animate({ width: '0px' }, 500).$('#center-column').animate({ 'width': ($(window).width() - cLeft) + 'px' });
//OPTION 3:    
$('#center-column').animate({ width: '0px' }, 500).next().animate({ 'width': ($(window).width() - cLeft) + 'px' });

//SHRINKING
        var rightwidth = $(window).width() - (cCenter + cLeft + cMargin);
//OPTION1
        $('#center-column').animate({ width: cCenter + 'px' }, 500).next().animate({ 'width': rightwidth + 'px' });
//OPTION2
        $('#center-column').animate({ width: cCenter + 'px' }, 500).siblings().animate({ 'width': rightwidth + 'px' });
//OPTION3:
        $('#center-column').animate({ width: cCenter + 'px' }, 500).$('#right-column').animate({ 'width': rightwidth + 'px' }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:13:18.347

```
//GROWING
    //OPTION 2:
        $('#center-column').animate({width: '0px'}, 500, function() {
            $('#center-column').animate({'width': ($(window).width() - cLeft) + 'px'});
        });

//SHRINKING
    //OPTION3:
        $('#center-column').animate({width: cCenter + 'px'}, 500, function() {
            $('#right-column').animate({'width': rightwidth + 'px'});
        }) 
```

# android - 将修改后的电话号码保存到相应索引 Android 的 ContactList

> ID：16102043
> 
> 赞同：0
> 
> 时间：2013-04-19T10:00:05.177
> 
> 标签：android, android-contacts

我成功地从我的联系人列表中检索到职位和电话号码。现在我需要通过修改原始号码将此号码保存在我的联系人列表中。我在这一步被阻止了。请给我一个提示示例类型位置 = 2 和数字 = 3049393。这是我的完整代码。

```
public class MainActivity extends Activity {

    public static final int PICK_CONTACT    = 1;

    TextView txt_contacts;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // this opens the activity. note the  Intent.ACTION_GET_CONTENT
        // and the intent.setType
        ((Button)findViewById(R.id.btn_contacts)).setOnClickListener( new OnClickListener() {
            @Override
            public void onClick(View v) {
                // user BoD suggests using Intent.ACTION_PICK instead of .ACTION_GET_CONTENT to avoid the chooser
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                // BoD con't: CONTENT_TYPE instead of CONTENT_ITEM_TYPE
                intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
                startActivityForResult(intent, 1);  
                txt_contacts =(TextView)findViewById(R.id.txt_contacts);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (data != null) {
            Uri uri = data.getData();

            if (uri != null) {
                Cursor c = null;
                try {
                    c = getContentResolver().query(uri, new String[]{ 
                                ContactsContract.CommonDataKinds.Phone.NUMBER,  
                                ContactsContract.CommonDataKinds.Phone.TYPE },
                            null, null, null);

                    if (c != null && c.moveToFirst()) {
                        String number = c.getString(0);
                        int type = c.getInt(1);
                        showSelectedNumber(type, number);
                    }
                } finally {
                    if (c != null) {
                        c.close();
                    }
                }
            }
        }
    }

    public void showSelectedNumber(int type, String number) {

        String new_num = 0+number;
        txt_contacts.setText(new_num);

    }

public void updateContact() {
        try {
            ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

            ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI)
                .withSelection(Data.RAW_CONTACT_ID + " = ?", new String[] {mRawContactId})
                .withSelection(Data._ID + " = ?", new String[] {mDataId})
                .withValue(Data.MIMETYPE, Email.CONTENT_ITEM_TYPE)
                .withValue(Data.DATA1, mEmail)
                .withValue(Email.TYPE, Email.TYPE_HOME)
                .build());
            getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
            mResult.setText("Updated");
        } catch (Exception e) {
            // Display warning
            Log.w("UpdateContact", e.getMessage());
            for(StackTraceElement ste : e.getStackTrace()) {
                Log.w("UpdateContact", "\t" + ste.toString());
            }
            Context ctx = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(ctx, "Update failed", duration);
            toast.show();
        }
    }       

    } 
```

**更新 ：**

public void showSelectedNumber(int type, String number) {

```
 String new_num = 0+number;
    System.out.println("Display name:"+ number);

    ContentValues _changed_values=new ContentValues();

    _changed_values.put(ContactsContract.CommonDataKinds.Phone.NUMBER,new_num);
            getContentResolver().update(uri,_changed_values,ContactsContract.CommonDataKinds.Phone._ID+"=?",
    new String[]{Integer.toString(type)});

            // If you want to change the number 

    txt_contacts.setText(new_num);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:05:26.360

ContentValues _changed_values=new ContentValues();

// 如果要更改号码 _changed_values.put(ContactsContract.CommonDataKinds.Phone.NUMBER,"mention number");

//您必须更改的地方 _id= 提及该特定联系人的 id

getContentResolver().update(uri,_changed_values,ContactsContract.CommonDataKinds.Phone.ID+"=?",
new String[]{_​​id} }

# mysql - 检索每组中的最后一条记录，早于给定时间

> ID：16102046
> 
> 赞同：0
> 
> 时间：2013-04-19T10:00:31.503
> 
> 标签：mysql

如这个问题：[Retrieving the last record in each group](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)，我想查询每个组的最新条目。

与链接的问题不同，我还想为最长时间添加一个标准。

我尝试了以下方法：

```
SELECT m1.*
FROM messages m1
LEFT JOIN messages m2
ON (
    m1.name = m2.name AND
    m1.id < m2.id AND
    m2.time <= nnnnnnn
)
WHERE m2.id IS NULL
AND m1.time <= nnnnnnn; 
```

我不确定这是否 100% 正确，有更好的解决方案吗？也许没有重复`time <= nnnnnnn`条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:55:09.397

您可以在`where`子句中执行此操作：

```
select m.*
from messages m
where m.id = (select m2.id
              from messages m2
              where m2.name = m.name and
                    m2.time <= nnnn
              order by m2.time desc
              limit 1
             ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T21:55:40.943

这就是你要找的。每组最后 n 个小于 x

```
 SELECT m1.*
    FROM messages m1
    LEFT JOIN messages m2 ON (
        m2.name = m1.name AND
        IF(m2.date < 'nnnnnnn',m2.date > m1.date, m1.date > 'nnnnnnn')) 
    WHERE m2.idIS NULL 
```

# c# - LINQ to Entities 查询和区分 GUID

> ID：16102047
> 
> 赞同：2
> 
> 时间：2013-04-19T10:00:37.137
> 
> 标签：c#, .net, linq, linq-to-entities

当我使用 LINQ to Entities 和 Distinct 来获取唯一的 Guid 时，我得到了所有的 GUID。

```
DB-Entry 1: {b3f86f18-f661-4511-a8b5-f85aa8e41b29}
DB-Entry 2: {b3f86f18-f661-4511-a8b5-f85aa8e41b29}
DB-Entry 3: {7078d941-0906-4a1b-9a27-85cfc9cf382b}
DB-Entry 4: {7387d57e-6ac5-4b3b-b7f5-833383530bb6} 
```

```
using (OrderTableEntities msgcontext = new OrderTableEntities())
{
    try
    {
        var Query = from c in msgcontext.tbl_Order
                    select c.OrderGuid;

        var distinctGuids = Query.Distinct();
    }
    catch 
    {
    }
} 
```

执行此代码部分后，将查询所有 4 行。基本上我本来希望只得到 3 个条目。什么可能导致此问题，即无法获得 DISTINCT Guid？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:02:25.083

首先，我假设`Distinct()`在准备发布代码时应用到 contactsQuery 而不是 Query 只是一个失误。

如果将该`ToString()`方法应用于 Guid 以使查询返回 an`IQueryable<string>`而不是 an `IQueryable<Guid>`，您是否仍会返回所有 4 个 guid？

```
var contactsQuery = from c in msgcontext.tbl_Order select c.OrderGuid.ToString();

  var distinctGuids = contactsQuery.Distinct(); 
```

# r - 使用 r 中的核密度估计生成样本

> ID：16102048
> 
> 赞同：2
> 
> 时间：2013-04-19T10:00:40.193
> 
> 标签：r, random

我需要使用 R 中的核密度估计从现有数据中生成样本。在我的数据中缺少负值（并且不能），但在生成样本中存在负值。

```
library(ks)
set.seed(1)
par(mfrow=c(2,1))

x<-rlnorm(100)
hist(x, col="red", freq=F)

y <- rkde(fhat=kde(x=x, h=hpi(x)), n=100)
hist(y, col="green", freq=F) 
```

如何限制 KDE 和生成样本的范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:32:12.690

`rkde`传递一个`positive`论点：

```
y <- rkde(
  fhat = kde(x=x, h=hpi(x)), 
  n    = 100, 
  positive = TRUE
) 
```

另一种方法是在估计之前转换数据（例如，用对数），使其不受约束，并在随机数生成之后将其转换回来。

```
x2 <- log(x)
y2 <- rkde(fhat=kde(x=x2, h=hpi(x2)), n=100)
y <- exp(y2)
hist(y, col="green", freq=F) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:09:56.990

如果您可以接受不是 KDE 的密度估计，请查看 logspline 包。这是估计密度估计的另一种方法，并且有一些参数可以设置下限（和/或上限），以便得到的估计不会超出界限并且在界限附近有意义。

这是一个基本示例：

```
set.seed(1)
x<-rlnorm(100)
hist(x, prob=TRUE)

lines(density(x), col='red')

library(ks)
tmp <- kde(x, hpi(x))
lines(tmp$eval.points, tmp$estimate, col='green')

library(logspline)
lsfit <- logspline(x, lbound=0)
curve( dlogspline(x,lsfit), add=TRUE, col='blue' )

curve( dlnorm, add=TRUE, col='orange' ) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Qu51a.jpg)

您可以使用该函数从拟合密度生成新数据点，`rlogspline`还有`plogspline`和`qlogspline`函数。

# iphone - Objective C 中的单例实现

> ID：16102051
> 
> 赞同：0
> 
> 时间：2013-04-19T10:00:46.923
> 
> 标签：iphone, design-patterns

我试图在目标 C 中实现单例设计模式。这是我的代码

在 .h 文件中

```
#import <Foundation/Foundation.h>
@interface BSCustomClass : NSObject
{
    NSString *string;
}
@property (nonatomic,strong)NSString *string;
@end 
```

在 .m 文件中

```
#import "BSCustomClass.h"
@implementation BSCustomClass
static int i;
static BSCustomClass* object;
@synthesize string;
-(id)init
{
    if(i==0)
    {
        object=[super init];
        i=1;
        object.string=@"tunvir Rahman";       
    }
    return object;
}
@end 
```

现在，如果我想使用 alloc 和 init 从 main 创建 BSCustomClass 的对象，那么它将调用自己的 init 方法并检查静态变量 i。如果 i=0 则假定到目前为止没有创建对象并创建一个对象，之后它将返回 BSCustomClass 类的所有对象的前一个对象的地址。这是单例的正确实现吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:06:14.237

您应该使用“singleton”或“ `dispatch_once`sharedInstance `static int`”等类方法而不是alloc-init。有关更详细的解释，我建议您执行“[单身人士：您做错了](http://cocoasamurai.blogspot.se/2011/04/singletons-your-doing-them-wrong.html)”。该帖子中的代码

```
+(MyClass *)singleton {
    static dispatch_once_t pred;
    static MyClass *shared = nil;

    dispatch_once(&pred, ^{
        shared = [[MyClass alloc] init];
    });
    return shared;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:09:09.187

Objective-C 中的单例是这样实现的：

```
+(id)sharedInstance {
    static id instance = NULL;
    if (instance == NULL) instance = [[YourClassName alloc] init];
    return instance;
} 
```

如果有可能从多个线程调用它，请改用 David 的解决方案。

# redis - 在 redis 中拥有单独编号的数据库有什么好处？

> ID：16102052
> 
> 赞同：0
> 
> 时间：2013-04-19T10:00:51.150
> 
> 标签：redis

我一直想知道为什么 redis 为每个实例提供 16 个“编号”数据库。有人可以解释一下这样做的好处，以及可能想在一台服务器上使用多个编号的数据库的原因吗？

*   它只是命名空间键的另一种方式吗？
*   在不同的数据库编号上分离不同的密钥集是否有任何性能优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:50:56.477

数据库的方便之处在于，您可以使用 FLUSHDB 单独刷新它们（而您不能刷新与 1* 等模式匹配的所有键）

如果您感兴趣的键被拆分为多个数据库，那么 SORT 和 KEYS 也会更快。

# sql - 列上的条件之间的倍数

> ID：16102059
> 
> 赞同：1
> 
> 时间：2013-04-19T10:01:14.907
> 
> 标签：sql, tsql, sql-server-2005

我有一个包含 3 列的非常简单的表：

```
ID  |  Orders | Code
--------------------
  1 |      11 |  'OK'
  2 |      25 | 'ER1'
  3 |       0 |  'OK'
  4 |      30 | 'ER2'
  5 |      42 |  'OK' 
```

我正在尝试创建存储过程来选择符合我的条件的行：

我需要的是能够选择例如少于 10 个订单或多于 30 个订单的行。

所以对我的程序的示例调用是：

```
EXEC REPORT1 @code='OK', @orders0_10=1,@ordersMore30=1 
```

这应该返回第 3 行和第 5 行。以下是我目前的程序

```
CREATE PROCEDURE [dbo].[REPORT1]
(
@code NVARCHAR (5) = '',
@orders0_10 INT = 0,
@orders11_20 INT = 0,
@orders21_30 INT = 0,
@ordersMore30 INT = 0,
)
AS

SET NOCOUNT ON

SELECT TOP 1000
    ROW_NUMBER() OVER (ORDER BY RPT.Nr) AS Lp,
    RPT.ID,
    RPT.Orders,
    RPT.Code
FROM MyData RPT (NOLOCK)
WHERE (@code = '' OR RPT.Code= @code)
AND
--(
   (@orders0_10 = 1 AND RPT.Orders<= 10)
--OR (@orders11_20 = 1 AND (RPT.Orders > 10 AND RPT.Orders <= 20))
--OR (@orders21_30 = 1 AND (RPT.Orders > 20 AND RPT.Orders <= 30))
--OR (@ordersMore30 = 1 AND RPT.Orders > 30)
--)
ORDER BY RPT.Nr
GO 
```

**编辑** 我会尽量澄清我需要什么。
如果我在这里指定标准：[http](http://sqlfiddle.com/#!3/25045/19) ://sqlfiddle.com/#!3/25045/19我得到 2 行 (1,3)，这是正确的。

如果我将它们更改为：[http](http://sqlfiddle.com/#!3/25045/21) ://sqlfiddle.com/#!3/25045/21我也打赌 2 行 (2,4)，这是正确的。

但如果我这样指定它们：[http](http://sqlfiddle.com/#!3/25045/22) ://sqlfiddle.com/#!3/25045/22我应该得到以前结果的联合（1,2,3,4）：

Sales< 10 OR 20 的行

**编辑** 我得到了最终的工作版本：[http](http://sqlfiddle.com/#!3/25045/33) ://sqlfiddle.com/#!3/25045/33 ，希望这对某人有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:51:07.940

您的标准是：

```
where (@orders0_10 = 0 OR RPT.Orders<= 10) AND
      (@orders11_20 = 1 OR (RPT.Orders > 10 AND RPT.Orders <= 20)) AND
      (@orders21_30 = 1 OR (RPT.Orders > 20 AND RPT.Orders <= 30)) AND
      (@ordersMore30 = 1 OR RPT.Orders > 30) 
```

我认为问题出`0`在第一行；它应该是`1`：

```
where (@orders0_10 = 1 OR RPT.Orders<= 10) AND
      (@orders11_20 = 1 OR (RPT.Orders > 10 AND RPT.Orders <= 20)) AND
      (@orders21_30 = 1 OR (RPT.Orders > 20 AND RPT.Orders <= 30)) AND
      (@ordersMore30 = 1 OR RPT.Orders > 30) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:11:52.407

您可以使用`COALESCE`“技巧”：

```
SELECT 
    RPT.ID,
    RPT.Orders,
    RPT.Code
FROM MyData RPT 
WHERE COALESCE(@code, RPT.Code) = RPT.Code
AND   COALESCE(@orders0_10, RPT.Orders)   <= RPT.Orders
AND   COALESCE(@ordersMore30, RPT.Orders) >= RPT.Orders 
```

[**演示**](http://sqlfiddle.com/#!3/abcec/9/0)

# apache-flex - 在显示应用程序之前更改 flex 皮肤

> ID：16102060
> 
> 赞同：0
> 
> 时间：2013-04-19T10:01:15.623
> 
> 标签：apache-flex, skinning

我正在尝试在我的 flex 应用程序中完全外部化皮肤。我已经基于 css 文件创建了 swf 文件，我想在应用程序初始化之前应用一个皮肤，否则我会收到如下错误：

> 错误：找不到所需的皮肤部件 serverTimer。

我找到了这个链接：[here](http://userflex.wordpress.com/2008/02/07/preload-runtime-styles/)，但它似乎不再起作用（不再起作用），我认为这有点肮脏。

那么如何在应用程序初始化之前为我的应用程序加载皮肤呢？

# java - Eclipse 上的 Alfresco Mobile Android 错误

> ID：16102061
> 
> 赞同：0
> 
> 时间：2013-04-19T10:01:15.687
> 
> 标签：java, android, eclipse, alfresco

我从此[链接](http://www.alfresco.com/cmis/browser?id=workspace://SpacesStore/8e1284fb-26ab-4f91-9666-c24ef915adaf)下载 alfresco android sdk 1.0.1，然后解压缩文件。

之后我打开我的eclipse，创建新的工作区然后点击文件->导入->安卓->现有的Android代码到工作区->根目录我浏览解压sdk->全选->检查复制项目到工作区->完成

然后我在 src 目录中发现了很多错误，例如像这样的代码

```
@Override
public Loader<LoaderResult<PagingResult<ActivityEntry>>> onCreateLoader(int id, Bundle ba)
{
    if (!hasmore)
    {
        setListShown(false);
    }

    // Case Init & case Reload
    bundle = (ba == null) ? getArguments() : ba;

    ListingContext lc = null, lcorigin = null;

    if (bundle != null)
    {
        lcorigin = (ListingContext) bundle.getSerializable(ARGUMENT_LISTING);
        lc = copyListing(lcorigin);
        loadState = bundle.getInt(LOAD_STATE);
    }
    calculateSkipCount(lc);
    ActivityStreamLoader loader = new ActivityStreamLoader(getActivity(), alfSession);
    loader.setListingContext(lc);
    return loader;
} 
```

第二行的错误标记（公共加载程序...）Eclipse 说：

```
Multiple markers at this line
- The methode onCreateLoader(int, Bundle) of type ActivityStreamFragment must override a superclass method
- implements android.app.LoaderManager.LoaderCallbacks<org.alfresco.mobile.android.api.asynchronous.LoaderResult<org.alfresco.mobile.android.api.model.PagingResult<org.alfresco.mobile.android.api.model.ActivityEntry>>>.onCreateLoader 
```

我想知道我应该怎么做才能解决这个错误？因为我想用那个源代码构建 alfresco android..

注意：我使用 alfresco-android-sdk-1.0.1，Eclipse SDK 版本：3.7.2，jdk-1_5_0_22-windows-i586-p

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:03:38.917

您正在使用 Java 1.5`(jdk-1_5_0_22-windows-i586-p)`编译应用程序，您需要将编译器升级到 1.6，因为对 @Override 注释进行了一些更改。

> 在 Java 5 中，@Override 注释可能只应用于覆盖超类的方法。从 Java 6 开始，您还可以将 @Override 注释与实现接口的方法一起使用。

还有一种可能是您已经安装了它，但没有在 eclipse 中设置 - 您可以在项目属性中更改编译器版本：**Java Compiler -> Compiler compliance level**。

资料来源：

*   [http://piotrnowicki.com/2012/02/override-differences-in-java-5-and-java-6/](http://piotrnowicki.com/2012/02/override-differences-in-java-5-and-java-6/)
*   [alfresco 的构建设置](https://maven.alfresco.com/nexus/content/repositories/releases/org/alfresco/mobile/android/sdk/alfresco-mobile-android-sdk/1.0.1/alfresco-mobile-android-sdk-1.0.1.pom)声明它需要 1.6 才能编译 ( `<maven.compile.source>1.6</maven.compile.source>`)

# performance - Oracle“相等”比“不相等”快

> ID：16102064
> 
> 赞同：1
> 
> 时间：2013-04-19T10:01:22.360
> 
> 标签：performance, oracle

我有一个简单的问题：

有人告诉我查询：

```
select a1, a2, sum(b1)
from myTable
where a1 ='bla' and a2='blabla' and a3 ='aaa' 
```

然后更快

```
select a1, a2, sum(b1)
from myTable
where a1 ='bla' and a2='blabla' and a3!='bbb' 
```

我可以理解，在某些情况下，通常 a = 比 a != 快。但在这种情况下，我有一个 SUM(b1)。为此，我必须阅读所有 myTable。

谢谢你。问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:15:46.450

某人说得很对。

即使两个查询要从表中投影完全相同的行，在只有两个值的列上使用谓词的查询，“1”出现一次，“2”构成其余部分更有可能使用索引和：

```
column = '1' 
```

比它：

```
column != '2' 
```

即使有一个直方图来识别偏斜，你最好用一个等号。

[http://sqlfiddle.com/#!4/070db/3](http://sqlfiddle.com/#!4/070db/3)

# c++ - 方法的前向声明

> ID：16102069
> 
> 赞同：4
> 
> 时间：2013-04-19T10:01:41.873
> 
> 标签：c++, forward-declaration

我有一个关于前向声明的小问题。我在一个文件中有以下课程

机器人.h

```
class Robot
{
public:
   void moveForward()
private:
} 
```

在 Robot.cpp 文件中实现

我有一个 UserReceiver.h 类，它定义了用户与机器人等交互的接口......这个类用鼠标管理相机，我加载了 Robot 类的一个实例，以便可以与之交互

用户接收器.h

```
class Robot;
class UserReceiver
{
public:
     void LoadRobot(Robot* _robot) { robot = _robot; }

     bool onEvent()
     {
         etc...
         // Calling robot->moveForward() when clicking something
     }
 private:
 Robot* robot;
} 
```

如果需要，我可以给出完整的代码（我使用的 3D 引擎是 Irrlicht）。我的问题是如何转发声明与 Robot 类关联的方法？围绕这个问题有一个好的设计模式吗？

我得到的错误是（在程序调用机器人-> moveForward（）的那一行）：

```
error C2227: left of '->moveForward' must point to class/struct/union/generic type 
```

非常感谢你的帮助

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:04:30.203

您在`Robot`没有完整声明的情况下使用。要么将`onEvent`实现移动到一个`cpp`文件中并在其中包含标题`robot.h`，要么只是`#include`在.`robot.h``userreceiver.h`

我推荐前者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:23:55.967

有时，此类相互引用的类需要前向声明。但是，有时需要完整的定义，例如访问类成员，或者您想知道类的大小。但在其他时候，前向声明就足够了。

对于 Foo 类，以下可以是前向声明。

*   定义或声明`Foo*`和`Foo&`，包括函数参数、返回类型、局部变量、类成员变量等。

*   声明一个使用 Foo 作为参数或返回类型的函数。例如，`Foo bar()`或`void bar(Foo f)`。但是要调用该函数，需要定义。因为编译器需要用到函数的拷贝构造函数和析构函数。

# objective-c - 如何在 NSOutLineView 中获取特定项目？

> ID：16102072
> 
> 赞同：1
> 
> 时间：2013-04-19T10:01:59.613
> 
> 标签：objective-c, cocoa, nsoutlineview

我目前正在使用 Apple 的 SourceView 示例。

作为一项任务，我想在右键单击时将应用程序底部的菜单更改为上下文菜单。现在我已经实现了一个`NSMenuDelegate`并使用该`menuWillOpen`方法在菜单中进行调整。

我现在面临的问题是我无法获取有关我在树中右键单击的对象的信息。

我得到了项目的索引，但我无法得到项目本身。

```
NSInteger *clickedRow = [myOutlineView clickedRow]; 
```

我试过这个，但它没有给我任何东西。

```
ChildNode *item = [myOutlineView itemAtRow:clickedRow]; 
```

我希望有人可以在这里帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:33:06.660

你如何确定`clickedRow`？
似乎错误的一件事是，您将 存储`clickedRow`在整数*指针*(NSInteger*) 而不是整数中。
因此`itemAtRow:`可能使用任意地址而不是实际的行索引来查找项目。
另一件事是，它`itemAtRow:`返回一个`NSTreeControllerNode*`而不是`ChildNode*`你假设的一个。
你应该使用

```
[[myOutlineView itemAtRow:clickedRow] representedObject]; 
```

反而

# opencv - 使用 HSV 和 HoughCircles 使用 OpenCV 检测彩色球体

> ID：16102076
> 
> 赞同：3
> 
> 时间：2013-04-19T10:02:18.223
> 
> 标签：opencv, computer-vision, hough-transform, hsv

我正在尝试使用 Iphone 检测带有 openCV 的彩色球体。对于第一个测试用例，我使用了一个带有给定代码的黄色大理石：

```
cv::Mat thresholdHSV;
cv::Mat imgHSV;

cv::cvtColor(inputFrame, imgHSV, CV_BGR2HSV);

cv::inRange(imgHSV,cv::Scalar(20,100,100),cv::Scalar(30,255,255),thresholdHSV);

std::vector<std::vector<cv::Point> > contours;

findContours(thresholdHSV.clone(), contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE);

//Draw them
cv::Mat destinationSource = cv::Mat::zeros(inputFrame.size(), inputFrame.type());
drawContours(destinationSource, contours, -1, cv::Scalar(255,255,255), CV_FILLED); 
```

这给了我已经很好的结果： ![在此处输入图像描述](https://i.stack.imgur.com/hH1Jy.jpg)

但是我需要以某种方式检测圆形。理想情况下，我想应用 HoughCircle，但是我收到 OpenCv 错误：“参数错误（源图像必须是 8 位单通道）。

我也试过申请

```
HoughCircles(thresholdHSV, detectedCircles, CV_HOUGH_GRADIENT, 1, thresholdHSV.rows / 8, 200, 100, 0, 0); 
```

但我根本没有得到任何结果。

如何在destinationSource 图像上应用HoughCircle，或者有没有其他方法可以检测圆形？（我还必须考虑何时有更多相同颜色的球体彼此非常接近，因为 findContours 只会找到一个计数）

任何帮助都非常感谢，并感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:10:28.913

该错误表明您的输入图像应该是单通道 8 位图像，因此彩色图像不适用。

下面是一个用 HoughCircles 进行圆检测的小代码（但在 Python 中，但你会理解它）。

```
import cv2
import numpy as np
import sys

img = cv2.imread('img.jpg',0)
if img==None:
    print "cannot open ",filename

else:
    img = cv2.medianBlur(img,5)
    cimg = cv2.cvtColor(img,cv2.COLOR_GRAY2BGR)
    circles = cv2.HoughCircles(img,cv2.cv.CV_HOUGH_GRADIENT,1,10,param1=100,param2=30,minRadius=5,maxRadius=50)
    circles = np.uint16(np.around(circles))
    for i in circles[0,:]:
        cv2.circle(cimg,(i[0],i[1]),i[2],(0,255,0),1) # draw the outer circle
        cv2.circle(cimg,(i[0],i[1]),2,(0,0,255),3) # draw the center of the circle

    cv2.imshow('detected circles',cimg)
    cv2.waitKey(0)
    cv2.imwrite('output.png',cimg)
    cv2.destroyAllWindows() 
```

下面是输出：

![在此处输入图像描述](https://i.stack.imgur.com/xCZiN.png)

您可以在这里找到 C++ 代码：[https ://github.com/Itseez/opencv/blob/master/samples/cpp/houghcircles.cpp](https://github.com/Itseez/opencv/blob/master/samples/cpp/houghcircles.cpp)

# php - 根据用户输入创建一个类

> ID：16102083
> 
> 赞同：19
> 
> 时间：2013-04-19T10:02:45.990
> 
> 标签：php

要求 $input 是不安全的。'.php'。然后开课。我怎样才能使它安全，而不需要使用可以启动的类的白名单。

例 1.（错误代码）。

```
<?php

$input = $_GET['controller'];

require $input . '.php';

new $input;

?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T03:15:31.627

**免责声明**

首先我应该说，在您的系统中定义静态路由在设计上是安全的，而这个答案，即使我已经努力缓解安全问题，在信任它的操作之前应该进行彻底的测试和理解。

**基础知识**

[首先，使用手册](http://www.php.net/manual/en/language.variables.basics.php)中的正则表达式确保控制器包含有效的变量名；这消除了明显的错误条目：

```
$controller = filter_input(INPUT_GET, FILTER_VALIDATE_REGEXP, [
    'options' => [
        'regexp' => '/^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$/',
        'flags' => FILTER_NULL_ON_FAILURE,
    ]
]);

if ($controller !== null) {
    // load and use controller
    require_once("$controller.php");
    $c = new $controller();
} 
```

**执行层次结构**

这很好用，但是如果有人试图加载一个内部类呢？它可能会使应用程序严重失败。

您可以引入所有控制器必须扩展或实现的抽象基类或接口：

```
abstract class Controller {}

// e.g. controller for '?controller=admin'
class Admin extends Controller {} 
```

*顺便说一句，为避免名称冲突，您可以在单独的命名空间中定义它们。*

这就是你将如何执行这样的层次结构：

```
if ($controller !== null) {
    // load and use controller
    require_once("$controller.php");
    if (is_subclass_of($controller, 'Controller')) {
        $c = new $controller();
    }
} 
```

*我[`is_subclass_of()`](http://php.net/manual/en/function.is-subclass-of.php)用来在实例化类之前输入检查。*

**自动加载**

`require_once()`在这种情况下，您可以使用自动加载器来代替使用a ：

```
// register our custom auto loader
spl_autoload_register(function($class) {
    $file = "$class.php"; // admin -> admin.class.php
    if (file_exists($file)) {
        require_once $file; // this can be changed
    }
}); 
```

*这也是您可以规范化类名的地方，以便它更好地映射到文件名，并强制执行自定义命名空间，例如`"App\\$class.php"`.*

这将代码减少了一行，但使加载更加灵活：

```
if ($controller !== null) {
    // check hierarchy (this will attempt auto loading)
    if (class_exists($controller) && is_subclass_of($controller, 'Controller')) {
        $c = new $controller();
    }
} 
```

所有这些代码都假定您有适当的错误处理代码；对于实施建议，您可以查看[此答案](https://stackoverflow.com/questions/10331084/error-logging-in-a-smooth-way/10476589#10476589)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T11:57:13.457

几个建议：

*   将您的控制器类放在其自己的专用文件夹中，仅包含控制器类
*   使您的过滤器尽可能严格，例如。

    ```
    /* is $_GET['controller'] set? */
    if (!isset($_GET['controller'])) {
        // load error or default controller???
    }

    $loadController = $_GET['controller'];

    /* replace any characters NOT matching a-z or _ (whitelist approach), case insensitive */
    $loadController = preg_replace('/[^a-z_]+/i', '', $loadController);

    /* verify var is not empty now :) */
    if (!$loadController) {
        // load error or default controller???
    }

    /* if your classes are named in a certain fashion, eg. "Classname", format the incoming text to match ** NEVER TRUST USER INPUT ** */
    $loadController = ucfirst(strtolower($loadController)); 
    ```

*   检查文件是否存在[为什么不存在 file_exists？见描述](http://php.net/file_exists)

    ```
    /* avoiding using file_exists as it also matches folders... */
    if (!is_file($myControllerClassesPath.$loadController.'.php')) {
        // load error or default controller???
    } 
    ```

*   然后 require 文件，并验证类本身是否存在

    ```
    require($myControllerClassesPath.$loadController.'.php');

    /* of course, this assumes filename === classname, adjust accordingly */
    if (!class_exists($loadController)) {
        // load error or default controller???
    } 
    ```

*   然后当然是 X 的新实例

    ```
    new $loadController; 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T07:32:23.410

大多数 anwsers 使用一种变体`auto_load`代替 include 以使其更安全。但是提供的示例没有提到他们使用它的方式，`auto_load`只是一个花哨的包含。不是手动包含文件然后调用类，而是自动包含文件。这没有提供任何安全优势，因为仍然可以调用任何可用的类。

在我看来，使用`include`而不是`require`然后捕获错误是最佳实践并且最容易实现。为了使其安全，您必须在允许包含的文件名中添加额外的部分。例如：“控制器”。现在，如果您有一个名为 的类`Home`，那么您将调用文件 homeController.php。这样我们只能要求以“Controller.php”结尾的文件。

作为一项额外的预防措施，我`basename()`在输入中添加了防止 Windows 系统上的网络访问

```
<?php
//EG GET ?controller=home
$input = isset($_GET['controller']) ? $_GET['controller'] : "";
if (empty($input))
  die('No controller');

$input = basename($input);
$filename = $input.'Controller.php';

//since only valid files can be included, you dont need to check for valid chars or anything. Just make sure that only your controller files end with 'Controller.php'
//use the @ to hide the warning when the file does not exist
if ((@include $filename) !== 1)
  die('Unknown controller');

//no error, so we included a valid controller and now we can call it.
$controller = new $input();
?> 
```

请记住，如果您在非 Windows 服务器上运行，则文件名区分大小写，而 PHP 类则不区分大小写。因此，如果有人输入 controller=HOME 则包含将失败。

您可以通过使所有文件（如“homeController.php”）都带有小写类前缀来防止此问题。然后你可以使用`$filename = strtolower($input).'Controller.php';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T13:55:44.510

就安全性而言，从输入中接受资源标识符没有任何问题，无论是图像还是某些代码。但是，如果需要某种授权，则不可避免地要避免某种授权（显然，有授权但没有授权是一个悖论）。因此，如果您坚持没有 ACL（或您所说的“白名单”），我不得不说您想要的东西是不可能的。

另一方面，如果您可以接受 ACL，那么剩下的就很简单了。您需要做的就是将您的控制器视为资源并将您的用户分组为角色（最后一部分是可选的）。然后指定哪个角色或用户可以访问哪个控制器。这是使用[Zend Framework](http://framework.zend.com/)完成的方法。

```
$acl = new Zend_Acl();

$acl->addRole(new Zend_Acl_Role('guest'))
    ->addRole(new Zend_Acl_Role('member'))
    ->addRole(new Zend_Acl_Role('admin'));

$parents = array('guest', 'member', 'admin');
$acl->addRole(new Zend_Acl_Role('someUser'), $parents);

$acl->add(new Zend_Acl_Resource('someController'));

$acl->deny('guest', 'someController');
$acl->allow('member', 'someController'); 
```

然后当一些请求到达时，您可以像这样质疑它的授权：

```
if ($acl->isAllowed('currentUser', $_GET['controller'])) {
    $ctrlClass = $_GET['controller'];
    $controller = new $ctrlClass();
} 
```

假设已经设置了一些自动加载器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T10:32:00.390

考虑使用`spl_autoload_register()`. 这会让您在验证文件/类等方面节省大量精力。

```
<?php
function autoloadClasses($class) {
    if (file_exists('core/'.$class.'.php')) {
        include 'core/'.$class . '.php';
    }
}
spl_autoload_register('autoloadClasses');

?> 
```

然后在 core-folder 中保存一个文件名`dart.php`（文件名和类名必须相同）

然后当您创建对象时： `new dart();`文件将在需要时包含在内。

有关此的更多信息：http: [//php.net/manual/en/function.spl-autoload-register.php](http://php.net/manual/en/function.spl-autoload-register.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-21T12:23:13.263

如果您的类/文件很少，您可以获取存储类的文件夹中的所有 php 文件，并检查您想要包含/需要的类是否是其中之一。

所以是这样的：

```
$classDir = '/path/to/classes';
$classList = glob($classDir.'/*.php');
$classAbsolutePath = $classDir.'/'.$_GET['class'];

if (in_array($classAbsolutePath, $classList)) {
    require $classAbsolutePath;
} 
```

如果您有子目录，则必须根据该目录修改此代码。顺便说一句，就性能而言，这不是最好的解决方案，尤其是在您有很多文件和很多子目录的情况下。此外，`in_array()`效率不是很高，所以如果你有大数组，你应该避免它。

在我看来，做这样的事情的最好方法是有一个*白名单*。您可以通过代码自动生成它。每次重建或部署项目时，您都可以重新生成列表，以便始终拥有有效的列表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-21T12:24:46.707

我建议您在允许的文件中引入特殊标签。然后在包含文件之前，将其作为纯文本读取并查找标签。仅当标签存在时，才包含它。该标签可以在允许文件开头的 PHP 注释内。

```
$class = $_GET['class'];
if (preg_match('/^[a-zA-Z]+$/', $class))
{
    $file = $class.".php";
    if (is_file($file)) {
    {
        $content = file_get_contents($file);
        if (strpos($content, "THECLASSMAGIC") !== false)
        {
            require($file);
        }
    }
    else
    {
        die(...);
    }
}
else
{
    die(...);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-22T03:29:44.347

首先添加这个功能。

```
function __autoload ( $class ) {
     $path = "../path/to/class/dir/" . $class . TOKEN . ".php";
     if ( file_exists ($path) ) {
          require_once ( $path );
     } else {
          // class not found.
     }
} 
```

然后只需访问类，

```
$class = new input(); 
```

它将检查文件是否`"../path/to/class/dir/input_secretToken.php"`存在，并自动包含它。

这`TOKEN`是配置文件中定义的一个秘密词，用作所有类文件的后缀。因此，只会加载带有标记后缀的类文件。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-04-21T12:08:23.407

在什么情况下，您将允许用户通过查询字符串参数实例化控制器，但不知道他们实际尝试实例化的是什么？听起来像是灾难的秘诀。

话虽如此，我只是将输入限制为仅字母（假设您的类名为**MyClass.php**、**MyOtherClass.php**等）并锁定到特定目录。

```
<?php

$className = $_GET['file'];
$dir = '/path/to/classes/';
$file = $dir . $className . '.php';

if (preg_match('/^[a-zA-Z]+$/', $className) && is_file($file)) {
    require($file);
    $class = new $className;
}
else {
    die('Class not found');
} 
```

# bash - 使用 getopt 时没有“in [sequence]”结尾的“for i”

> ID：16102089
> 
> 赞同：6
> 
> 时间：2013-04-19T10:03:11.947
> 
> 标签：bash, shell, getopt

我找到了在 shell 中使用 getopt 命令的示例脚本。

```
#!/bin/bash
args=$(getopt ab $*)
set -- $args
for i;
do
  case "$i" in
    -a)shift; echo "it was a";;
    -b)shift; echo "it was b";;
  esac;
done 
```

它运作良好，但我不明白变量 $i 分配在哪里。它如何知道它必须遍历 $arg。你能解释一下吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T10:06:57.440

如此处所示[，](http://tldp.org/LDP/abs/html/loops1.html#EX23)如果没有给出，则`for`默认为。分配您的变量。`$@``in seq``for i``$i`

# android - Android，如何将片段活动的结果返回到片段？

> ID：16102090
> 
> 赞同：1
> 
> 时间：2013-04-19T10:03:11.990
> 
> 标签：android, android-fragments

我的片段活动中有一个片段。为了显示片段对话框，我的片段中有一个界面，该界面已在片段活动中实现。到目前为止没有问题。我可以弹出对话框。当用户点击它时，片段活动能够获得确定/取消按钮。

现在，我的问题是，有什么方法（替代方法，而不是在片段活动中创建另一个接口并在片段中实现它）让片段知道单击了确定/取消？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:12:30.160

由于您的活动应该知道它使用哪些片段，您可以轻松获取片段，将其转换为它的真实类（如果您不想要新接口）并调用它的公共方法：

```
ArticleFragment articleFrag = (ArticleFragment)
    getSupportFragmentManager().findFragmentById(R.id.article_fragment);

if (articleFrag != null) {
            // If article frag is available, we're in two-pane layout...

            // Call a method in the ArticleFragment to update its content
            articleFrag.updateArticleView(position);
        } else {
            // Otherwise, we're in the one-pane layout and must swap frags...

            // Create fragment and give it an argument for the selected article
            ArticleFragment newFragment = new ArticleFragment();
            Bundle args = new Bundle();
            args.putInt(ArticleFragment.ARG_POSITION, position);
            newFragment.setArguments(args);

            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

            // Replace whatever is in the fragment_container view with this fragment,
            // and add the transaction to the back stack so the user can navigate back
            transaction.replace(R.id.fragment_container, newFragment);
            transaction.addToBackStack(null);

            // Commit the transaction
            transaction.commit();
        } 
```

注意：此代码取自[此处](http://developer.android.com/training/basics/fragments/communicating.html)。

# openid - 使用 Google 的 OpenID 登录突然停止在生产中工作

> ID：16102091
> 
> 赞同：0
> 
> 时间：2013-04-19T10:03:12.193
> 
> 标签：openid, dotnetopenauth

我今天进来发现没有人可以登录到我们使用 DotNetOpenAuth 和 Google Provider 的系统。这几个月来一直运行良好，并且在几周内没有对系统进行更新。我越来越：

```
ERROR DotNetOpenAuth.Messaging.Bindings - Provider reports signature verification failed. 
```

这现在也发生在我的本地机器上，有谁知道 Google Provider 是否发生了变化？

完整的日志条目如下：

```
2013-04-19 10:45:32,692 (GMT+1) [41] DEBUG DotNetOpenAuth.Http - HTTP GET https://www.google.com/accounts/o8/id
2013-04-19 10:45:34,863 (GMT+1) [41] DEBUG DotNetOpenAuth.Yadis - An XRDS response was received from GET at user-supplied identifier.
2013-04-19 10:45:34,864 (GMT+1) [41] DEBUG DotNetOpenAuth.Yadis - Total services discovered in XRDS: 1
2013-04-19 10:45:34,864 (GMT+1) [41] DEBUG DotNetOpenAuth.Yadis - [{
    ClaimedIdentifier: http://specs.openid.net/auth/2.0/identifier_select
    ProviderLocalIdentifier: http://specs.openid.net/auth/2.0/identifier_select
    ProviderEndpoint: https://www.google.com/accounts/o8/ud
    OpenID version: 2.0
    Service Type URIs:
        http://specs.openid.net/auth/2.0/server
        http://openid.net/srv/ax/1.0
        http://specs.openid.net/extensions/ui/1.0/mode/popup
        http://specs.openid.net/extensions/ui/1.0/icon
        http://specs.openid.net/extensions/pape/1.0
},]
2013-04-19 10:45:34,864 (GMT+1) [41] DEBUG DotNetOpenAuth.Yadis - Skipping HTML discovery because XRDS contained service endpoints.
2013-04-19 10:45:34,865 (GMT+1) [41] INFO  DotNetOpenAuth.Yadis - Performing discovery on user-supplied identifier: https://www.google.com/accounts/o8/id
2013-04-19 10:45:34,865 (GMT+1) [41] DEBUG DotNetOpenAuth.Yadis - Filtering and sorting of endpoints did not affect the list.
2013-04-19 10:45:34,865 (GMT+1) [41] DEBUG DotNetOpenAuth.OpenId - Creating authentication request for user supplied Identifier: https://www.google.com/accounts/o8/id
2013-04-19 10:45:34,865 (GMT+1) [41] DEBUG DotNetOpenAuth.OpenId - Could not determine whether OP supported Sreg or AX.  Using both extensions.
2013-04-19 10:45:34,866 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Channel - Preparing to send CheckIdRequest (2.0) message.
2013-04-19 10:45:34,866 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElementRelyingParty applied to message.
2013-04-19 10:45:34,866 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySecurityOptions did not apply to message.
2013-04-19 10:45:34,866 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2013-04-19 10:45:34,867 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToNonceBindingElement did not apply to message.
2013-04-19 10:45:34,867 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - ReturnTo signed data: 
    dnoa.return_to_sig_handle: lD0z
    dnoa.userSuppliedIdentifier: https://www.google.com/accounts/o8/id
    ReturnUrl: /

2013-04-19 10:45:34,868 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ReturnToSignatureBindingElement applied to message.
2013-04-19 10:45:34,868 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardReplayProtectionBindingElement did not apply to message.
2013-04-19 10:45:34,868 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2013-04-19 10:45:34,868 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySigningBindingElement did not apply to message.
2013-04-19 10:45:34,868 (GMT+1) [41] INFO  DotNetOpenAuth.Messaging.Channel - Prepared outgoing CheckIdRequest (2.0) message for https://www.google.com/accounts/o8/ud: 
    openid.claimed_id: http://specs.openid.net/auth/2.0/identifier_select
    openid.identity: http://specs.openid.net/auth/2.0/identifier_select
    openid.assoc_handle: 1.AMlYA9UWwIc6XwY3cBNwCRCb96aKYV7c5ziaDzzlXemScowZoxyJRv1RWXCuoJSd4AEQj_w6m14sSA
    openid.return_to: http://localhost:63854/Account/Logon?ReturnUrl=%2F&dnoa.userSuppliedIdentifier=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid&dnoa.return_to_sig_handle=lD0z&dnoa.return_to_sig=HIgme5MYRRBZYU8nkKMW1fM9K6%2BQJreG0OPqatItleY%3D
    openid.realm: http://localhost:63854/
    openid.mode: checkid_setup
    openid.ns: http://specs.openid.net/auth/2.0
    openid.ns.sreg: http://openid.net/extensions/sreg/1.1
    openid.sreg.required: 
    openid.sreg.optional: country
    openid.ns.alias3: http://openid.net/srv/ax/1.0
    openid.alias3.if_available: alias1,alias2
    openid.alias3.mode: fetch_request
    openid.alias3.type.alias1: http://axschema.org/contact/country/home
    openid.alias3.count.alias1: 1
    openid.alias3.type.alias2: http://schema.openid.net/contact/country/home
    openid.alias3.count.alias2: 1

2013-04-19 10:45:34,868 (GMT+1) [41] DEBUG DotNetOpenAuth.Messaging.Channel - Sending message: CheckIdRequest
2013-04-19 10:45:34,869 (GMT+1) [41] DEBUG DotNetOpenAuth.Http - Redirecting to https://www.google.com/accounts/o8/ud?openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.assoc_handle=1.AMlYA9UWwIc6XwY3cBNwCRCb96aKYV7c5ziaDzzlXemScowZoxyJRv1RWXCuoJSd4AEQj_w6m14sSA&openid.return_to=http%3A%2F%2Flocalhost%3A63854%2FAccount%2FLogon%3FReturnUrl%3D%252F%26dnoa.userSuppliedIdentifier%3Dhttps%253A%252F%252Fwww.google.com%252Faccounts%252Fo8%252Fid%26dnoa.return_to_sig_handle%3DlD0z%26dnoa.return_to_sig%3DHIgme5MYRRBZYU8nkKMW1fM9K6%252BQJreG0OPqatItleY%253D&openid.realm=http%3A%2F%2Flocalhost%3A63854%2F&openid.mode=checkid_setup&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.ns.sreg=http%3A%2F%2Fopenid.net%2Fextensions%2Fsreg%2F1.1&openid.sreg.required=&openid.sreg.optional=country&openid.ns.alias3=http%3A%2F%2Fopenid.net%2Fsrv%2Fax%2F1.0&openid.alias3.if_available=alias1%2Calias2&openid.alias3.mode=fetch_request&openid.alias3.type.alias1=http%3A%2F%2Faxschema.org%2Fcontact%2Fcountry%2Fhome&openid.alias3.count.alias1=1&openid.alias3.type.alias2=http%3A%2F%2Fschema.openid.net%2Fcontact%2Fcountry%2Fhome&openid.alias3.count.alias2=1
2013-04-19 10:46:19,674 (GMT+1) [16] WARN  DotNetOpenAuth.OpenId - Raising minimum OpenID version requirement for Providers to 2.0 to protect this stateless RP from replay attacks.
2013-04-19 10:46:19,675 (GMT+1) [16] INFO  DotNetOpenAuth.Messaging.Channel - Scanning incoming request for messages: http://localhost:63854/Account/Logon?ReturnUrl=%2F&dnoa.userSuppliedIdentifier=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid&dnoa.return_to_sig_handle=lD0z&dnoa.return_to_sig=HIgme5MYRRBZYU8nkKMW1fM9K6%2BQJreG0OPqatItleY%3D&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2013-04-19T09%3A46%3A01ZS6XpwR4ZQavZPg&openid.return_to=http%3A%2F%2Flocalhost%3A63854%2FAccount%2FLogon%3FReturnUrl%3D%252F%26dnoa.userSuppliedIdentifier%3Dhttps%253A%252F%252Fwww.google.com%252Faccounts%252Fo8%252Fid%26dnoa.return_to_sig_handle%3DlD0z%26dnoa.return_to_sig%3DHIgme5MYRRBZYU8nkKMW1fM9K6%252BQJreG0OPqatItleY%253D&openid.assoc_handle=1.AMlYA9UWwIc6XwY3cBNwCRCb96aKYV7c5ziaDzzlXemScowZoxyJRv1RWXCuoJSd4AEQj_w6m14sSA&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle&openid.sig=ZFvM0jP6No50OcWkMESKqtwO3s1Q5m8DmG3IW5RnpyQ%3D&openid.identity=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawkjhoACXLQwQ3fUFYWcX6-IIBdkkIl2cFk&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawkjhoACXLQwQ3fUFYWcX6-IIBdkkIl2cFk
2013-04-19 10:46:19,675 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Channel - Incoming HTTP request: GET http://localhost:63854/Account/Logon?ReturnUrl=%2F&dnoa.userSuppliedIdentifier=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid&dnoa.return_to_sig_handle=lD0z&dnoa.return_to_sig=HIgme5MYRRBZYU8nkKMW1fM9K6%2BQJreG0OPqatItleY%3D&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2013-04-19T09%3A46%3A01ZS6XpwR4ZQavZPg&openid.return_to=http%3A%2F%2Flocalhost%3A63854%2FAccount%2FLogon%3FReturnUrl%3D%252F%26dnoa.userSuppliedIdentifier%3Dhttps%253A%252F%252Fwww.google.com%252Faccounts%252Fo8%252Fid%26dnoa.return_to_sig_handle%3DlD0z%26dnoa.return_to_sig%3DHIgme5MYRRBZYU8nkKMW1fM9K6%252BQJreG0OPqatItleY%253D&openid.assoc_handle=1.AMlYA9UWwIc6XwY3cBNwCRCb96aKYV7c5ziaDzzlXemScowZoxyJRv1RWXCuoJSd4AEQj_w6m14sSA&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle&openid.sig=ZFvM0jP6No50OcWkMESKqtwO3s1Q5m8DmG3IW5RnpyQ%3D&openid.identity=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawkjhoACXLQwQ3fUFYWcX6-IIBdkkIl2cFk&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawkjhoACXLQwQ3fUFYWcX6-IIBdkkIl2cFk
2013-04-19 10:46:19,676 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Channel - Incoming request received: PositiveAssertionResponse
2013-04-19 10:46:19,676 (GMT+1) [16] INFO  DotNetOpenAuth.Messaging.Channel - Processing incoming PositiveAssertionResponse (2.0) message:
    openid.claimed_id: https://www.google.com/accounts/o8/id?id=AItOawkjhoACXLQwQ3fUFYWcX6-IIBdkkIl2cFk
    openid.identity: https://www.google.com/accounts/o8/id?id=AItOawkjhoACXLQwQ3fUFYWcX6-IIBdkkIl2cFk
    openid.sig: ZFvM0jP6No50OcWkMESKqtwO3s1Q5m8DmG3IW5RnpyQ=
    openid.signed: op_endpoint,claimed_id,identity,return_to,response_nonce,assoc_handle
    openid.assoc_handle: 1.AMlYA9UWwIc6XwY3cBNwCRCb96aKYV7c5ziaDzzlXemScowZoxyJRv1RWXCuoJSd4AEQj_w6m14sSA
    openid.op_endpoint: https://www.google.com/accounts/o8/ud
    openid.return_to: http://localhost:63854/Account/Logon?ReturnUrl=%2F&dnoa.userSuppliedIdentifier=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid&dnoa.return_to_sig_handle=lD0z&dnoa.return_to_sig=HIgme5MYRRBZYU8nkKMW1fM9K6%2BQJreG0OPqatItleY%3D
    openid.response_nonce: 2013-04-19T09:46:01ZS6XpwR4ZQavZPg
    openid.mode: id_res
    openid.ns: http://specs.openid.net/auth/2.0
    ReturnUrl: /
    dnoa.userSuppliedIdentifier: https://www.google.com/accounts/o8/id
    dnoa.return_to_sig_handle: lD0z
    dnoa.return_to_sig: HIgme5MYRRBZYU8nkKMW1fM9K6+QJreG0OPqatItleY=

2013-04-19 10:46:19,676 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2013-04-19 10:46:19,676 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Verifying incoming PositiveAssertionResponse message signature of: ZFvM0jP6No50OcWkMESKqtwO3s1Q5m8DmG3IW5RnpyQ=
2013-04-19 10:46:19,676 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Channel - Preparing to send CheckAuthenticationRequest (2.0) message.
2013-04-19 10:46:19,676 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElementRelyingParty did not apply to message.
2013-04-19 10:46:19,677 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySecurityOptions did not apply to message.
2013-04-19 10:46:19,677 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2013-04-19 10:46:19,677 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2013-04-19 10:46:19,677 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySigningBindingElement did not apply to message.
2013-04-19 10:46:19,677 (GMT+1) [16] INFO  DotNetOpenAuth.Messaging.Channel - Prepared outgoing CheckAuthenticationRequest (2.0) message for https://www.google.com/accounts/o8/ud: 
    openid.return_to: http://localhost:63854/Account/Logon?ReturnUrl=%2F&dnoa.userSuppliedIdentifier=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid&dnoa.return_to_sig_handle=lD0z&dnoa.return_to_sig=HIgme5MYRRBZYU8nkKMW1fM9K6%2BQJreG0OPqatItleY%3D
    openid.mode: check_authentication
    openid.ns: http://specs.openid.net/auth/2.0
    openid.claimed_id: https://www.google.com/accounts/o8/id?id=AItOawkjhoACXLQwQ3fUFYWcX6-IIBdkkIl2cFk
    openid.identity: https://www.google.com/accounts/o8/id?id=AItOawkjhoACXLQwQ3fUFYWcX6-IIBdkkIl2cFk
    openid.sig: ZFvM0jP6No50OcWkMESKqtwO3s1Q5m8DmG3IW5RnpyQ=
    openid.signed: op_endpoint,claimed_id,identity,return_to,response_nonce,assoc_handle
    openid.assoc_handle: 1.AMlYA9UWwIc6XwY3cBNwCRCb96aKYV7c5ziaDzzlXemScowZoxyJRv1RWXCuoJSd4AEQj_w6m14sSA
    openid.op_endpoint: https://www.google.com/accounts/o8/ud
    openid.response_nonce: 2013-04-19T09:46:01ZS6XpwR4ZQavZPg
    ReturnUrl: /
    dnoa.userSuppliedIdentifier: https://www.google.com/accounts/o8/id
    dnoa.return_to_sig_handle: lD0z
    dnoa.return_to_sig: HIgme5MYRRBZYU8nkKMW1fM9K6+QJreG0OPqatItleY=

2013-04-19 10:46:19,677 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Channel - Sending CheckAuthenticationRequest request.
2013-04-19 10:46:21,457 (GMT+1) [16] DEBUG DotNetOpenAuth.Http - HTTP POST https://www.google.com/accounts/o8/ud
2013-04-19 10:46:22,625 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Channel - Received CheckAuthenticationResponse response.
2013-04-19 10:46:22,625 (GMT+1) [16] INFO  DotNetOpenAuth.Messaging.Channel - Processing incoming CheckAuthenticationResponse (2.0) message:
    is_valid: false
    ns: http://specs.openid.net/auth/2.0

2013-04-19 10:46:22,625 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.BackwardCompatibilityBindingElement did not apply to message.
2013-04-19 10:46:22,625 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySigningBindingElement did not apply to message.
2013-04-19 10:46:22,625 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.Messaging.Bindings.StandardExpirationBindingElement did not apply to message.
2013-04-19 10:46:22,625 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.RelyingPartySecurityOptions did not apply to message.
2013-04-19 10:46:22,625 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Bindings - Binding element DotNetOpenAuth.OpenId.ChannelElements.ExtensionsBindingElementRelyingParty did not apply to message.
2013-04-19 10:46:22,625 (GMT+1) [16] DEBUG DotNetOpenAuth.Messaging.Channel - After binding element processing, the received CheckAuthenticationResponse (2.0) message is: 
    is_valid: false
    ns: http://specs.openid.net/auth/2.0

2013-04-19 10:46:22,625 (GMT+1) [16] ERROR DotNetOpenAuth.Messaging.Bindings - Provider reports signature verification failed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:20:16.453

从日志中，您的 RP 配置错误。看起来至少当肯定断言返回时，您实例化了`OpenIdRelyingParty`一个空关联存储（或者可能根本没有），而`OpenIdRelyingParty`您用来启动登录的实例确实有一个关联存储。

我注意到`openid.assoc_handle`请求中有一个参数，并且该参数的相同值在肯定断言响应中。`check_auth`然而，RP 仍然在消息中将该关联句柄发送到 Provider 端点。那是错误的。谷歌将其拒绝为无效是正确的。

最快的解决方法是传递`null`给所有`OpenIdRelyingParty`构造函数，强制您的 RP 进入“哑模式”，使其停止使用共享关联。这应该使最终`check_auth`调用成功。理想情况下，您希望使用关联存储，其关联在此 Web 应用程序的所有服务器之间共享（如果您在网络场中），并且每次构建`OpenIdRelyingParty`.

# c# - 在 VS 2012 中将 C# 类粘贴为 JSON

> ID：16102094
> 
> 赞同：7
> 
> 时间：2013-04-19T10:03:17.460
> 
> 标签：c#, json, plugins, visual-studio-2012

在 VS2012 中，可以通过上下文菜单 -> 特殊粘贴将 JSON 粘贴为 c# 类。

有没有办法反过来做呢？将ac#类粘贴为JSON？

我认为许多开发人员首先使用 EF DBContext 编写服务器代码，然后使用客户端 javascript 代码编写代码。手动编写 json 总是很复杂。

一个例子：

```
// a model class 
public class SampleTodoItem
{
    public int Id { get; set; }            
    public string Description { get; set; }
    public bool IsDone { get; set; }      
} 
```

然后我想在我的 javascript 客户端代码中使用与 json 相同的模型。当然，生成的 JSON 中必须有虚拟数据。

```
var model = {
    id: 0,
    description: 'dummy',
    isDone: false
}; 
```

我总是不得不手动做这很糟糕的事情。

据我了解，我需要这些“JSON 模型”将 javascript 数据绑定到带有敲除或 angularjs 的 html 视图。也可能我不明白整个事情..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:02:09.620

您可以采取多种方法。如果您打算将 c# 类转换为 json 表示，最简单的方法是使用 Javascript 序列化程序或 JSON.Net 之类的东西来序列化数据表示。这是一个将给定 IEnumerable 转换为其 JSON 表示的示例

```
 public static string ToJSONString<T>(this IEnumerable<T> items)
   {
        var jsonString =  JsonConvert.SerializeObject(items, Formatting.Indented, new JsonSerializerSettings
            {
                ContractResolver = new LowerCaseContractResolver(),
                NullValueHandling = NullValueHandling.Ignore
            });

        jsonString = jsonString.Replace("\r\n", string.Empty);

        return jsonString;

    } 
```

另一种方法（这是用于淘汰视图模型，使用 T4 模板来生成它。如果您打算使用模型生成 JavaScript 文件，则可以使用相同的概念来生成表示。您可以在此处找到它[http://www.codeproject .com/Articles/578827/Generate-Knockout-Viewmodels-using-T4-templates](http://www.codeproject.com/Articles/578827/Generate-Knockout-Viewmodels-using-T4-templates)

# powershell - 如何使用invoke-expression使用管道远程执行powershell命令？

> ID：16102096
> 
> 赞同：1
> 
> 时间：2013-04-19T10:03:20.823
> 
> 标签：powershell, wmi

对于我的工作，我需要从某些服务器中检索操作系统信息并将该信息存储在某个服务器上。我想用 powershell 来做这个并使用 wmi 来获取信息。
所有服务器都安装了 powershell，并且两者之间可以建立 SSH 连接。

最简单的方法可能是执行远程 powershell 命令，但是我需要在每台服务器上激活远程服务，我想避免这种情况。另一种方法是使用 PS 中的命令：“Invoke-Expression”，同时使用 plink 进行连接。
我想使用这种方法。我找到了很多关于它的信息，并发现了如何使用它来执行远程 shell 命令甚至远程 powershell 命令（同时在命令之前放置“powershell”）。

这有效：

```
$output = Invoke-Expression 'echo y | & "C:\Program Files\PuTTY\plink.exe" -ssh  $username@$hostname -pw $password "powershell gwmi Win32_OperatingSystem"' 
```

但它没有提供我需要的信息。而不是使用“ `gwmi Win32_OperatingSystem`”我想使用“ `gwmi Win32_OperatingSystem | select-object caption`”，这应该给我我需要的信息。但是，我坚持使用引号，无论我尝试了什么，我都无法使其正常工作，我总是在选择对象部分出现错误。我试图为此查看互联网，但我没有找到任何东西。有谁知道如何解决这个问题？

问候，

马蒂亚斯

# php - 使用js打开新网页

> ID：16102099
> 
> 赞同：0
> 
> 时间：2013-04-19T10:03:24.917
> 
> 标签：php, javascript, ajax, curl

我有一个网站，有一个登录表单，我希望它使用 AJAX 和 PHP，AJAX 和 php 脚本工作文件，大部分，但是当我尝试重定向到一个新页面时，我遇到了问题。

问题是我正在使用

```
document.getElementById("signup_form").innerHTML = xhr.responseText; 
```

更新 signup_form div，所以如果出现问题，我可以将其写入网页的一部分。但是，当登录详细信息正确时，它会在我网站右上角的这个小 div 中加载新页面.....

在我的 PHP 脚本中，如果登录详细信息正确，我会使用位置重定向，并且我也尝试过使用 cURL，但坦率地说，我不知道该怎么做。

我希望整个页面从 www.something.com 更改为 www.something.com/members，而不是将其加载到 www.something.com 页面上。另外我正在存储会话数据，所以我不想在进入新页面时丢失它。

任何帮助和教程都非常受欢迎，我正在学习 js 和 AJAX。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:06:18.067

如果您使用的是 AJAX，则不能，也不应该使用标头位置从服务器端/php 端重定向。而是使用

```
window.location 
```

收到成功响应后，javascript 的属性。像这样的东西

```
window.location = "www.something.com/members"; 
```

# java - C 或 C++ 中的 Java ByteArray 等效项

> ID：16102104
> 
> 赞同：2
> 
> 时间：2013-04-19T10:03:58.693
> 
> 标签：java, c++, c, byte, bytearray

C，C ++中java字节的等价物是什么

```
byte[]  itemsArray;
itemsArray = new byte[items *no];
itemsArray[x] = (byte) xyz;

unsigned char * itemsArray;
itemsArray = (unsigned char*) malloc (items*no); 
```

如何在 C++ 中使用字节序将字节分配给`itemsArray`（如 `itemsArray[x] = (byte) xyz`）以确保正确的字节顺序。

以上内容是否等同于 C 中的 byteArray ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:15:37.827

用于`memcpy()`在`C`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T10:32:32.673

`signed char`相当于大多数平台上的 Java 字节 - C/C++ 标准实际上并不需要这个，但是除了最晦涩的平台/编译器之外，您可以依赖 8 位的字符。`char`，无论符号如何，都对应于大多数平台上的最小可寻址单元，因此您根本不必担心字节顺序。

您可以像分配给任何其他数组一样分配给该数组 - 在您的示例`itemsArray[x] = (unsigned char) xyz`中。但是请注意，Java 的字节是有符号的——我不确定您是否打算`unsigned`在其中使用。如评论中所述，如果您使用数组存储二进制数据，则确实习惯使用`unsigned char`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:29:36.430

是的，它们是等价的

我只是想指出始终初始化变量是一个非常好的主意：

```
unsigned char * itemsArray = (unsigned char*) malloc (numberOfItems); 
```

或者

```
unsigned char * itemsArray = NULL;
itemsArray = (unsigned char*) malloc (numberOfItems); 
```

如果你有点偏执：

```
unsigned char * itemsArray = (unsigned char*) malloc (numberOfItems);
if(itemsArray == NULL) {
    //Error, not enough memory
} 
```

在 C++ 中你应该使用 new/delete 而不是 malloc/free（注意在 C++ 中你可以使用 malloc/free，但不要将它们与 new/delete 混合使用）

```
unsigned char * itemsArray = new unsigned char[items*no]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T17:17:37.130

是的，它们大致相等。Java 当然会存储数组的长度并对每个数组引用进行边界检查。C/C++ 不会，至少在没有额外工作的情况下不会。

在处理 C 中的数字字节值时，我倾向于使用`int8_t`and （包括获取 typedef）（有关更多信息，请参见[http://www.cplusplus.com/reference/cstdint/](http://www.cplusplus.com/reference/cstdint/)）。它等同于and ，但我发现代码正在处理字节更明确。两者和都等价于 Java，因为 Java 中的所有数值都是有符号的。`uint8_t``<stdint.h>``signed char``unsigned char``int8_t``signed char``byte`

只有当您想将多字节值写入数组时，Big/little-endian 才会发挥作用。如果您想安全起见，请遵循您在 Java 中使用的相同模式。例如

```
/* example of storing in big-endian */
bytes[i+0] = (int8_t)(myint >> 24);
bytes[i+1] = (int8_t)(myint >> 16);
bytes[i+2] = (int8_t)(myint >> 8);
bytes[i+3] = (int8_t)(myint); 
```

如果您想避免额外的移位并直接写入字节数组，您可以将字节数组指针转换为 int 数组并存储，但您会遇到两个潜在问题：（1）您指出的字节序问题（可解决`htonl`除非您不切换字节序，否则请参阅http://pubs.opengroup.org/onlinepubs/007908775/xns/htonl.html [）](http://pubs.opengroup.org/onlinepubs/007908775/xns/htonl.html)和（2）存储对齐问题。如果您尝试存储/读取未对齐的值，在某些系统上您会收到总线错误并且您的程序会崩溃。

```
/* only do this if 'i' is a multiple of 4! */
*((uint32_t*)&bytes[i]) = htonl(myint); 
```

# hibernate - Grails GORM：合并时出现 DuplicateKeyException

> ID：16102107
> 
> 赞同：2
> 
> 时间：2013-04-19T10:04:12.743
> 
> 标签：hibernate, grails, grails-orm

我有两个对象：`User`和`Resume`. 简历有一个`User user`字段。在我的代码中，我首先获取一个`user`对象并对其进行一些更改。如果`Resume.findByUser(user)`存在，我会得到简历并在那里进行一些更改。
如果我打电话`user.save()`，`resume.save()`我得到一个异常，说会话中有另一个对同一个对象的引用，所以我开始使用`merge()`.

当我打电话时`user.merge()`，数据被保存，但是当我打电话时，`resume.merge()`我得到了这个异常：
`org.springframework.dao.DuplicateKeyException: a different object with the same identifier value was already associated with the session: [com.wizard.security.User#36]; nested exception is org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [com.wizard.security.User#36]`

我不知道该怎么办。看起来问题出在`resume.user`与`user`.

对于这个问题，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:16:30.610

**由于 GORM 是建立在 hibernate 之上的，所以当您在resume**上调用 merge 时，它​​将级联到字段**user**。

当您在一个事务中调用 user.merge() 然后 resume.merge() 时，在调用 resume.merge() 时，您的用户字段在数据库中的版本比恢复实例中保存的版本更新。

我建议您在进行更改和合并之前调用 resume.user.refresh() 或 resume.refresh()。

# android - 某些安卓设备上未显示安卓通知

> ID：16102113
> 
> 赞同：1
> 
> 时间：2013-04-19T10:04:30.220
> 
> 标签：android, android-notifications, android-pendingintent

当我收到 GCM 消息时，我必须在我的应用程序中显示通知。所以我在android中编写了一个通知代码。问题是

**1.在某些设备上未显示通知** **2.在某些设备上，即使在我单击通知时显示通知，也不会显示所需的 FragmentActivity 片段。**

这些问题仅在**某些设备中出现**

这是我的代码：

```
Context context = ctx;
    NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(
            R.drawable.launcher_icon, "Notification message",
            System.currentTimeMillis());
    Intent intent = new Intent(this, MainActivity.class);
    intent.putExtra("com.friends.with.benefits.bang.facebook.dating.matchFbId", userID);

    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK
            | Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
    PendingIntent pIntent = PendingIntent
            .getActivity(context, 0, intent,0);
    notification.setLatestEventInfo(context, "FriendsWithBenefits",
            "Hurray! You have a match on FriendsWithBenefits. Click here to check it out!", pIntent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.defaults |= Notification.DEFAULT_VIBRATE;
    notification.defaults |= Notification.DEFAULT_LIGHTS;
    notificationManager.notify(i++, notification); 
```

我不知道为什么它只发生在某些设备上？

# java - 导入 dalvik.system.VMRuntime 找不到

> ID：16102117
> 
> 赞同：3
> 
> 时间：2013-04-19T10:04:45.750
> 
> 标签：java, android, vmrun

我正在尝试导入 VMRuntime，但我似乎没有

只有 3 个包是`dexclassloader`,`dexfile`和`pathclassloader`.

`import dalvik.system.VMRuntime`<-- 不存在。

如何启用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T23:41:57.683

似乎在 API 9 中删除了类 VMRuntime：

[http://developer.android.com/sdk/api_diff/9/changes/pkg_dalvik.system.html](http://developer.android.com/sdk/api_diff/9/changes/pkg_dalvik.system.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:36:23.523

Android SDK中没有`VMRuntime`类，更不用说[package中](http://developer.android.com/reference/dalvik/system/package-summary.html)[了`dalvik.system`](http://developer.android.com/reference/dalvik/system/package-summary.html)。因此，Eclipse 告诉您它在 Android SDK 中不存在，因为它在 Android SDK 中不存在。

# excel - Excel VBA：无法获取 WorksheetFunction 类的 Match 属性

> ID：16102122
> 
> 赞同：2
> 
> 时间：2013-04-19T10:04:51.783
> 
> 标签：excel, vba, match

我正在尝试在两个工作簿之间进行匹配搜索，以查看在 Wbook1 中输入的名称是否在 Wbook2 的 A 列中。例如...我在 workbook1 的单元格 D4 中有“name1”...然后我希望宏搜索 workbook2 的 A 列以查找“name1”的位置。我不担心 workbook2 上不存在的名称，因为它应该始终存在。

使用 Excel 2007，代码为：

```
Sub ViewData()
    Dim xlo As New Excel.Application
    Dim xlw As New Excel.Workbook
    Dim xlz As String
    Dim result As Double
    Dim SalesExec As String
    SalesExec = Range("d4").Value 'D4 contains the name from workbook1 I want to search for
    xlz = Range("y1").value  'This cell contains the file path for workbook 2
    Set xlw = xlo.Workbooks.Open(xlz) 'Path is correct as the desired workbook does open
    result = Application.WorksheetFunction.Match(SalesExec, xlo.Worksheets("Data").Range("A:A"), 0) 'Data is the sheet in workbook2 containing the list of names
    Range("Q14").value = result
    xlw.Save
    xlw.Close
    Set xlo = Nothing
    Set xlw = Nothing
End Sub 
```

如果我删除 .WorksheetFunction，我会收到“对象或应用程序定义错误”。正如代码所示，我收到“无法获取工作表函数类的匹配属性”错误，我不知道为什么。

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:38:38.813

尝试这个。我已经对代码进行了注释，因此您在理解它时不会遇到问题。

```
Sub ViewData()
    Dim xlo As New Excel.Application
    Dim xlw As New Excel.Workbook
    Dim xlz As String
    Dim result As Double
    Dim LRow As Long
    Dim SalesExec As String

    SalesExec = Range("d4").Value

    xlz = Range("y1").Value

    Set xlw = xlo.Workbooks.Open(xlz)

    With xlw.Worksheets("Sheet1")
        '~~> Find the last row cause Range("A:A") in match will give error
        LRow = .Range("A" & .Rows.Count).End(xlUp).Row
    End With

    xlo.Visible = True

    '~~> Result is double so ensure that whatever you are trying to find is as Double
    '~~> Also It should be xlw.Worksheets("Data") and not xlo.Worksheets("Data")
    result = Application.WorksheetFunction.Match(SalesExec, xlw.Worksheets("Data").Range("A1:A" & LRow), 0)

    Range("Q14").Value = result
    xlw.Save
    xlw.Close
    Set xlo = Nothing
    Set xlw = Nothing
End Sub 
```

# android - 如何使用原生 android 软键盘创建自定义键盘快捷键

> ID：16102123
> 
> 赞同：1
> 
> 时间：2013-04-19T10:04:54.737
> 
> 标签：android, mobile, android-softkeyboard, android-input-method, soft-keyboard

我正在尝试创建一个应用程序，它将在软 android 键盘中实现一个快捷方式，例如，如果我在我的应用程序（模式）中保存了双击（本机）键盘上的“@”符号，它应该放置我的电子邮件地址在编辑文本上，任何人都可以帮助我，因为我是 android 开发的新手。提前致谢

# wcf - 为什么我的 WCF 服务不公开元数据？

> ID：16102126
> 
> 赞同：1
> 
> 时间：2013-04-19T10:05:00.080
> 
> 标签：wcf, metadata

我正在与不想公开元数据的 WCF 服务作斗争。根据互联网上的很多帖子，配置文件似乎没问题：

```
<service behaviorConfiguration="Mia.Configurazione" name="Mio.UserService">
        <endpoint address="JSON" binding="webHttpBinding" contract="MioWS.IUserService" 
                  behaviorConfiguration="JSONEndpointBehavior" bindingConfiguration="" name="RESTEP">
        </endpoint>
        <endpoint address="" binding="basicHttpBinding" contract="MioWS.IUserService">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service> 
```

当我尝试输入此网址时：

```
http://localhost:55555/api/UserService.svc/$metadata 
```

服务器回复 HTTP 错误 400（错误请求）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:02:12.067

我会为服务添加基址并尝试您的网址，以 . . ./mex 而不是 /$metadata

# c++ - 如何将 Boost.Log 重定向到文件

> ID：16102128
> 
> 赞同：16
> 
> 时间：2013-04-19T10:05:08.513
> 
> 标签：c++, logging, boost-log

我想要一个并发应用程序中的简单日志文件。我已经下载`Boost.Log`了 v2.0 并使用`Boost 1.53.0`.

问题是`Boost.Log`控制台上的输出。我正在使用`BOOST_LOG_TRIVIAL(trace)`.

有没有重定向`BOOST_LOG_TRIVIAL`到文件的好方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T10:09:03.050

您可以`BOOST_LOG_TRIVIAL`使用文件。请注意，大多数`boost::log`示例都使用命名空间别名，如下所示。

```
#include <boost/log/core.hpp>
#include <boost/log/trivial.hpp>
#include <boost/log/expressions.hpp>
#include <boost/log/utility/setup/file.hpp>

namespace logging = boost::log;

void init()
{
    logging::add_file_log("sample.log");

    logging::core::get()->set_filter
    (
        logging::trivial::severity >= logging::trivial::info
    );
} 
```

主要是：

```
int main(int, char*[])
{
    init();

    BOOST_LOG_TRIVIAL(trace) << "A trace severity message";
 // other types of severity
    BOOST_LOG_TRIVIAL(fatal) << "A fatal severity message";

    return 0;
} 
```

# ruby-on-rails-3 - 在自己的 gem 中包含设计邮件

> ID：16102138
> 
> 赞同：1
> 
> 时间：2013-04-19T10:05:38.913
> 
> 标签：ruby-on-rails-3, devise, ruby-on-rails-3.2, devise-confirmable

我正在尝试在我的 gem 中添加设计依赖项。通过添加

```
gem.add_dependency "devise" 
```

并包括模块：database_authenticable、:confirmable、:registerable、:recoverable、:rememberable、:trackable、:lockable、:validatable

从我的 gem 运行规范以创建用户时，它会抛出“未初始化的常量 Devise::Mailer”。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T21:09:26.663

如设计 wiki 中所述，[如何在可安装引擎中使用设计](https://github.com/plataformatec/devise/wiki/How-To%3a-Use-devise-inside-a-mountable-engine)：

…将以下行添加到您的**lib/name_of_engine.rb**：

```
require 'devise' 
```

否则，Devise::Engine 不会在您的引擎/gem 中初始化。

# asp.net-mvc - ASP.NET MVC 路由问题。不映射路线

> ID：16102141
> 
> 赞同：0
> 
> 时间：2013-04-19T10:05:43.613
> 
> 标签：asp.net-mvc, localization, routing, routedebugger

我是 ASP.NET MVC 的新手，遇到了无法解决的问题。我花了两天时间搜索谷歌，但仍然没有。

所以，我的情况是：我正在尝试使用路由在我的 ASP.NET MVC 应用程序中实现本地化。

`www.mysite.com/Home/Index`- 默认（俄语）

`www.mysite.com/en/Home/Index`- 英语

所以我正在注册路线：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.MapRoute(
                        "Default",
                        "{controller}/{action}",
                        new { controller = "Home", action = "Index"},
                        new { controller = "^[a-zA-z]{4,}$" }
             );

            routes.MapRoute(
                        "Localization",
                        "{lang}/{controller}/{action}",
                        new { lang = "en", controller = "Home", action = "Index" }
            );
        } 
```

导航到默认值：`www.mysite.com/Home/Index`工作正常。但是当我尝试导航到时，`www.mysite.com/en/Home/Index`我得到`404 error`.

更有趣的是，`RouteDebugger`没有看到我的新路线：

![RouteDebugger 所有路由表](https://i.stack.imgur.com/HxzTC.png)

添加更多新路线、更改它们的映射顺序甚至删除我所有的路线都无济于事。似乎该路由`{controller}/{action}/{id}`只是“在我之前”添加的 MVC 的默认路由。

那么，可能是什么问题？我完全不知道！我从其他站点看到了 Rote Debugger 的屏幕截图，并显示了它们的路线。例如其他一些网站：[截图](http://haacked.com/images/haacked_com/WindowsLiveWriter/UrlRoutingDebugger_EEBA/route-debugger-screenshot.png)

也许我必须改变一些东西`web.config`？我完全糊涂了。请帮忙！非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:41:16.260

在 MVC 4 中，RouteConfig.cs 存储在`App_Start`. 如果你从 MVC 4 项目向导创建你的项目，它应该为你连接起来。如果没有，您将需要从以下位置调用它`global.asax.cs`：

```
protected void Application_Start()
{
    // other stuff ...
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    // other stuff ...
} 
```

此外，IIRC，MVC 3 项目向导直接在 中设置所有默认路由`Application_Start`，因此您需要删除这些（或`RegisterRoutes`视情况将它们移入）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T20:49:43.043

RoutConfig 按顺序读取，“默认 {controller}/{action}”非常贪婪。将您的“本地化”路线代码移到“默认”路线上方，看看是否有帮助。

# c++ - C++ this 指针始终为 const

> ID：16102143
> 
> 赞同：5
> 
> 时间：2013-04-19T10:05:48.317
> 
> 标签：c++, constants

对于类 X 的非 const 成员函数，此指针的类型为 X* const。

然后，成员函数的 this 指针始终为 const。

那么，我们是否总是需要像这样进行 const 转换：

```
void foo::p() {                        
      const_cast <int&> (member) = 1;    
} 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T10:09:16.417

> 对于类 X 的非 const 成员函数，此指针的类型为 X* const。

不，`this`非常量成员函数内的指针类型只是`X*`（而且它是一个右值）。但即使`this`是`X* const`，这仍然不会阻止您更改数据成员。

您的代码示例与您的问题不匹配。它显示了一个 const 成员函数。在 const 成员函数内部，类型`this`为`const X*`。您不能更改 const 成员函数内的任何数据成员（声明为 的数据成员除外`mutable`）。声明一个成员函数就像`const`你的目标是改变数据成员是矛盾的。下定决心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:16:39.037

> 对于类 X 的非 const 成员函数，此指针的类型为 X* const。
> 
> 然后，成员函数的 this 指针始终为 const。

或多或少，它是一个右值，但可以看作是一个 const 指针，但请注意：*指针*是 const，而不是指针。这意味着，您无法更改 this 指向的对象，但可以更改对象的内容。

在您的示例中，该函数被声明为 const：

```
void foo::p() const { 
              // ^---- here! 
```

所以在这种情况下，`this`is 是类型`X const * const`的（它恰好是类型的右值，`X const*`但在这里无关紧要） - 即指针*和指针*是 const。后者才是真正重要的。

因此，如果要修改成员，请不要使用 const 方法：

```
void foo::p() {    
           //^------ no const!
      member = 1;       // perfectly legal, because *this is not const
      this->member = 1; // the same
      this = new foo;   // still illegal, this cannot be assigned to
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-26T07:50:36.403

const 在星号之后，意思是“X* const”，而不是“const X* 或 X const*”（它们是相同的）。因此，这意味着您不能使“this”指向与他指向的对象不同的对象，但是您可以更改所指向的对象，这是有道理的。“const X* 或 X const*”表示您不能更改当前指向的对象，但可以使指针指向不同的对象。希望能帮助到你（：

# laravel - Laravel中与数据透视表的多态关系？

> ID：16102144
> 
> 赞同：3
> 
> 时间：2013-04-19T10:05:52.127
> 
> 标签：laravel, has-and-belongs-to-many, laravel-4, polymorphism

我有 3 个模型，文章，建筑，人物。

1.  这些模型需要以几种方式相互引用。例如，建筑物需要能够引用 Person 的集合，例如 $building->architects()、$building->owners()，一篇文章可能会使用 $article->authors() 引用 Person 的集合，而 Person 可能会引用集合像 $person->owned_buildings() 这样的建筑物

2.  每个模型都应该有一个类似“references”的函数来获取混合模型的集合。

我认为这应该可以通过以下方式实现：

```
class Article extends Eloquent {
    public function referenceable()
    {
        return $this->morphTo();
    }

    public function authors()
    {
        return $this->morphMany('Person', 'referenceable');
    }
}

class Building extends Eloquent {
    public function referenceable()
    {
        return $this->morphTo();
    }

    public function architects()
    {
        return $this->morphMany('Person', 'referenceable');
    }
}

class Person extends Eloquent {
    public function referenceable()
    {
        return $this->morphTo();
    }

    public function owned_buildings()
    {
        return $this->morphMany('Building', 'referenceable');
    }
} 
```

所以问题是数据透视表会是什么样子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-16T14:50:31.823

您可以通过添加 a来定义 a`belongsTo`使用关系：`morphMany-style``where`

```
 public function followers() {
    return $this
      ->belongsToMany('User', 'follows', 'followable_id', 'user_id')
      ->where('followable_type', '=', 'Thing');
  } 
```

`where`只会确保 Eloquent 不会与 ID 不匹配。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T02:10:16.073

多态关系基本上是一对多的关系。它们允许您在许多其他模型上重用模型。

例如，如果 Post 有很多图像，而一个 User 可能有很多头像，那么您可以使用相同的图像模型而不会发生冲突。因此，您可以使用通用的 imageable_id，而不是使用 user_id 字段和 post_id 字段设置图像。

您需要 Eloquent 的 morphMany() 目前不支持的多对多关系

您可以为此做几种类型的数据透视表。例如，使用 building_id 和 person_id 字段分别设置两个建筑师/建筑物和所有者/建筑物数据透视表。或者您可以设置一个带有额外“类型”字段的数据透视表来定义角色

# ember.js - {{linkTo}} 无法读取未定义的属性

> ID：16102163
> 
> 赞同：2
> 
> 时间：2013-04-19T10:06:37.503
> 
> 标签：ember.js

当试图从我的列表视图转换到单个对象视图时 - 我收到错误：

```
'Uncaught TypeError: Cannot read property 'JobProjectRole' of undefined' 
```

我最初认为我的模型没有被传递给新视图的控制器，但从堆栈跟踪来看，它让我认为这与列表视图和解除绑定有关？

这是堆栈跟踪：

```
N.unchain ember-1.0.0-rc.1.min.js:16  
N.remove ember-1.0.0-rc.1.min.js:16  
Ember.unwatch ember-1.0.0-rc.1.min.js:16  
Ember.removeObserver ember-1.0.0-rc.1.min.js:16  
(anonymous function) ember-1.0.0-rc.1.min.js:27  
h ember-1.0.0-rc.1.min.js:16  
Ember.Evented.Ember.Mixin.create.trigger ember-1.0.0-rc.1.min.js:23  
Ember.CoreView.Ember.Object.extend.trigger ember-1.0.0-rc.1.min.js:25  
r ember-1.0.0-rc.1.min.js:16  
Ember.View.Ember.CoreView.extend.triggerRecursively ember-1.0.0-rc.1.min.js:27  
r ember-1.0.0-rc.1.min.js:16  
Ember.View.Ember.CoreView.extend._notifyWillDestroyElement ember-1.0.0-rc.1.min.js:27  
Ember.merge.destroyElement ember-1.0.0-rc.1.min.js:28  
Ember.View.Ember.CoreView.extend.destroyElement ember-1.0.0-rc.1.min.js:27  
r ember-1.0.0-rc.1.min.js:16  
Ember.View.Ember.CoreView.extend.willDestroy ember-1.0.0-rc.1.min.js:27  
r ember-1.0.0-rc.1.min.js:16  
w.PrototypeMixin.h.create.destroy ember-1.0.0-rc.1.min.js:24  
r ember-1.0.0-rc.1.min.js:16  
Ember.ContainerView.Ember.View.extend._currentViewWillChange ember-1.0.0-rc.1.min.js:28  
h ember-1.0.0-rc.1.min.js:16 
Ember.notifyBeforeObservers ember-1.0.0-rc.1.min.js:16  
A ember-1.0.0-rc.1.min.js:16  
n ember-1.0.0-rc.1.min.js:16  
Ember.trySet ember-1.0.0-rc.1.min.js:16  
(anonymous function) ember-1.0.0-rc.1.min.js:21  
l ember-1.0.0-rc.1.min.js:16  
Ember.tryFinally ember-1.0.0-rc.1.min.js:16  
f ember-1.0.0-rc.1.min.js:16  
Ember._suspendObserver ember-1.0.0-rc.1.min.js:16  
s._sync ember-1.0.0-rc.1.min.js:21  
(anonymous function) ember-1.0.0-rc.1.min.js:17  
Ember.handleErrors ember-1.0.0-rc.1.min.js:16  
n ember-1.0.0-rc.1.min.js:17  
f ember-1.0.0-rc.1.min.js:17  
l ember-1.0.0-rc.1.min.js:17  
Ember.tryFinally ember-1.0.0-rc.1.min.js:16  
i.flush ember-1.0.0-rc.1.min.js:17   
i.end ember-1.0.0-rc.1.min.js:17  
e ember-1.0.0-rc.1.min.js:20  
Ember.tryFinally ember-1.0.0-rc.1.min.js:16  
Ember.run.end ember-1.0.0-rc.1.min.js:20  
Ember.tryFinally ember-1.0.0-rc.1.min.js:16  
Ember.run ember-1.0.0-rc.1.min.js:17  
(anonymous function) ember-1.0.0-rc.1.min.js:41  
p.event.dispatch jquery.min.js:2  
g.handle.h 
```

# selenium - selenium Webdriver 甚至无法执行 click() 函数

> ID：16102165
> 
> 赞同：0
> 
> 时间：2013-04-19T10:06:49.660
> 
> 标签：selenium, selenium-webdriver, junit4

我在使用 Selenium WebDriver 时遇到问题。我是 Selenium WebDriver 的初学者，所以请提前原谅。我通过创建一个简单的 webdriver 测试一步一步地进行了一些解释，但它仍然无法正常工作。我可以说我已经在我的项目中添加了 webdriver。

**似乎是因为我使用的是 Firefox 3.5.19** ...... 那是什么原因？这是我的代码：

```
 import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;

public class JobServe {

    /**
     * @param args
     **/
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        FirefoxProfile profile = new FirefoxProfile();
        profile.setPreference("network.proxy.type", 1);
        profile.setPreference("network.proxy.http", "proxyfam");
        profile.setPreference("network.proxy.http_port", 8080);
        WebDriver driver = new FirefoxDriver(profile);

        driver.get("http://www.jobserve.com.au/Homepage.aspx");
        driver.findElement(By.xpath("html/body/form/div[4]/div[1]/div[12]/div[1]/div/div[1]/a[2]/span")).click();
    }

} 
```

这是错误日志：

```
Exception in thread "main" org.openqa.selenium.InvalidElementStateException: [Exception... "Component returned failure code: 0x80004003 (NS_ERROR_INVALID_POINTER) [nsINativeMouse.mouseMove]"  nsresult: "0x80004003 (NS_ERROR_INVALID_POINTER)"  location: "JS frame :: file:///C:/DOCUME~1/plegeard/LOCALS~1/Temp/anonymous1872429321029396376webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js :: anonymous :: line 9839"  data: no]
Command duration or timeout: 62 milliseconds
Build info: version: '2.32.0', revision: '6c40c18', time: '2013-04-09 17:23:22'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0-OpenSCG-Build-24'
Session ID: e3d70b9d-8b0e-4dca-80e0-6989d0e62497
Driver info: org.openqa.selenium.firefox.FirefoxDriver
Capabilities [{platform=XP, javascriptEnabled=true, acceptSslCerts=true, browserName=firefox, rotatable=false, locationContextEnabled=true, version=3.5.19, cssSelectorsEnabled=true, handlesAlerts=true, nativeEvents=true, webStorageEnabled=true, applicationCacheEnabled=true, takesScreenshot=true}]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:554)
    at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:268)
    at org.openqa.selenium.remote.RemoteWebElement.click(RemoteWebElement.java:79)
    at JobServe.main(JobServe.java:22)
Caused by: org.openqa.selenium.remote.ErrorHandler$UnknownServerException: [Exception... "Component returned failure code: 0x80004003 (NS_ERROR_INVALID_POINTER) [nsINativeMouse.mouseMove]"  nsresult: "0x80004003 (NS_ERROR_INVALID_POINTER)"  location: "JS frame :: file:///C:/DOCUME~1/plegeard/LOCALS~1/Temp/anonymous1872429321029396376webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js :: anonymous :: line 9839"  data: no]
Build info: version: '2.32.0', revision: '6c40c18', time: '2013-04-09 17:23:22'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0-OpenSCG-Build-24'
Driver info: driver.version: unknown
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/plegeard/LOCALS~1/Temp/anonymous1872429321029396376webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:6891)
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/plegeard/LOCALS~1/Temp/anonymous1872429321029396376webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:9848)
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/plegeard/LOCALS~1/Temp/anonymous1872429321029396376webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:265)
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/plegeard/LOCALS~1/Temp/anonymous1872429321029396376webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10421)
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/plegeard/LOCALS~1/Temp/anonymous1872429321029396376webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10426)
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/plegeard/LOCALS~1/Temp/anonymous1872429321029396376webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10366) 
```

有没有人可以有任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:16:17.580

保持通知。我使用 Firefox 3.5.19（由于工作限制）

通过将 Selenium Webdriver 从 2.32 降级到 2.28，它现在正在工作......

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:54:08.727

尝试一些[隐式等待](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp)，在点击之前尝试这个

```
driver.get("http://www.jobserve.com.au/Homepage.aspx");
WebElement maybeClickable = driver.findElement(By.xpath("html/body/form/div[4]/div[1]/div[12]/div[1]/div/div[1]/a[2]/span"))
System.out.println(maybeClickable.isEnabled()); 
```

应该打印出来`true`

如果不是...那么该元素可能不可点击...

# android - 旧 Android 操作系统版本的布局差异

> ID：16102167
> 
> 赞同：0
> 
> 时间：2013-04-19T10:06:52.853
> 
> 标签：android

在编写布局以支持包括 Froyo 在内的旧操作系统时，我应该记住什么？与非常新的操作系统版本相比，布局构建流程是否相同？我问的原因是因为我在新旧版本的布局之间存在一些偏差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:10:06.023

观看此视频[多版本 Android 用户界面](https://www.youtube.com/watch?v=amZM8oZBgfk&list=PL56D792A831D0C362&index=12)

这将向您展示如何构建跨 Android 版本（从 Eclair 到今天）一致工作的用户界面。我们将涵盖的主题包括操作栏、片段、样式、大小限定符、应用程序结构和导航。

# java - 如何使用 xslt 删除 xml 文件中的重复项？

> ID：16102169
> 
> 赞同：0
> 
> 时间：2013-04-19T10:06:57.510
> 
> 标签：java, xml, xslt, xml-parsing, xslt-1.0

**示例xml如下：**

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
       <check>
        <val>
          <Samsung>
             <name value="galaxy"/>
             <name value="galaxy"/>
             <name value="galaxys"/>
             <id value="123"/>
             <id value="123"/>
             <name2 value="galaxy"/>
           </Samsung>

           <htc>
             <name value="galaxy"/>
             <name value="galaxy"/>
             <name value="galaxys"/>
             <id value="123"/>
             <id value="123"/>
             <name2 value="galaxy"/>
          </htc>
        </val>
     </check> 
```

如何删除重复项？

`<name>`以及`<id>`具有匹配值的标签...此外，如果还有除`<Samsung>`and以外的更多标签`<htc>`，如何在 xslt 中编写循环？我不知道如何编写 xslt。请帮忙。

输出 xml 应如下所示：

```
<check>
    <val>
      <Samsung>
         <name value="galaxy"/>
         <name value="galaxys"/>
         <id value="123"/>
         <name2 value="galaxy"/>
       </Samsung>

       <htc>
         <name value="galaxy"/>
         <name value="galaxys"/>
         <id value="123"/>
         <name2 value="galaxy"/>
      </htc>
    </val>
 </check> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:04:19.543

如果您可以确保重复节点始终是连续的，那么最简单的方法是在 XSTL 身份转换的基础上构建一个额外的模板来像这样剥离模板

```
<xsl:template 
     match="*[not(*)]
             [name() = preceding-sibling::*[1]/name()]
             [@value = preceding-sibling::*[1]/@value]" /> 
```

这匹配任何子元素，如果它与前一个元素具有相同的名称和值，则忽略它。在这种情况下，无需在任何地方硬编码元素名称。

在这种情况下，这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[not(*)][name() = preceding-sibling::*[1]/name()][@value = preceding-sibling::*[1]/@value]" />
</xsl:stylesheet> 
```

但是，如果您的 XML 看起来像这样，并且您的重复节点是连续的，这将失败

```
 <Samsung>
         <name value="galaxy"/>
         <name value="galaxys"/>
         <id value="123"/>
         <name value="galaxy"/>
         <id value="123"/>
         <name2 value="galaxy"/>
       </Samsung> 
```

您可以通过更改模板来检查所有以前的节点来解决此问题

```
<xsl:template match="*[not(*)]
                      [name() = preceding-sibling::*/name()]
                      [@value = preceding-sibling::*/@value]" /> 
```

但是，如果元素数量众多，这开始变得低效。如果您有数百个元素，那么每个前同级检查将重复检查数百个元素（即第 100 个元素必须检查 99 个前面的元素，第 101 个元素检查 100 个元素等）。

一种更有效的方法（在 XSLT1.0 中）是使用一种称为[Muenchian Grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html)的技术。如果您经常使用 XSLT，这当然是值得学习的。

首先，您定义一个键来“分组”您的元素。在这种情况下，您正在寻找由其父级、元素名称和值定义的不同元素

```
<xsl:key name="duplicate" match="*[not(*)]" use="concat(generate-id(..), '|', name(), '|', @value)" /> 
```

然后忽略重复项，匹配给定“查找”值的键中第一个位置未出现的任何元素

```
<xsl:template match="*[not(*)]
                      [generate-id() != 
                      generate-id(key('duplicate', concat(generate-id(..), '|', name(), '|', @value))[1])]" /> 
```

在这种情况下，这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" />
    <xsl:key name="duplicate" match="*[not(*)]" use="concat(generate-id(..), '|', name(), '|', @value)" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

 <xsl:template match="*[not(*)][generate-id() != generate-id(key('duplicate', concat(generate-id(..), '|', name(), '|', @value))[1])]" />

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:13:25.713

**当这种转变**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@* | node()">
<xsl:copy>
<xsl:apply-templates select="@* | node()"/>
</xsl:copy>
</xsl:template>

<xsl:template match="name">
<xsl:if test="self::name/text()= following-sibling::name/text()">
<xsl:copy>
<xsl:apply-templates/>
</xsl:copy>
</xsl:if>
</xsl:template>
<xsl:template match="name2">
<xsl:if test="self::name2/text()= following-sibling::name2/text()">
<xsl:copy>
<xsl:apply-templates/>
</xsl:copy>
</xsl:if>
</xsl:template>
</xsl:stylesheet> 
```

**在以下 XML 上运行**

```
<?xml version="1.0"?>
<check>
 <val>
    <sai>
     <name> A</name>
     <name> A</name>
    <name2> B</name2>
    <name2> B</name2>
   </sai>
   <dinesh>
    <name> A</name>
    <name> A</name>
    <name2> B</name2>
    <name2> B</name2>
    </dinesh>   
 </val> 
</check> 
```

**获得所需的输出**

```
<?xml version='1.0' ?>
<check> 
  <val>    
    <sai>     
      <name> A</name>       
      <name2> B</name2>
    </sai>
    <dinesh>
      <name> A</name>
      <name2> B</name2>
    </dinesh>   
   </val> 
</check> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:35:02.737

与@siva2012 的回答几乎相同。但如果只有一个名字的孩子更正确。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="xml" />

    <xsl:template match="name">
        <xsl:variable name="text" select="text()"/>
        <xsl:if test="not(following-sibling::name[text()= $text])" >
            <xsl:copy>
                <xsl:apply-templates select="node()|@*" />
            </xsl:copy>
        </xsl:if>
    </xsl:template>
        <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*" />
        </xsl:copy>
    </xsl:template>
    <xsl:template match="/">
        <xsl:apply-templates  />

    </xsl:template>
</xsl:stylesheet> 
```

# java - 在为 java 中的任何组件重新渲染面板时，删除了多个空格

> ID：16102172
> 
> 赞同：0
> 
> 时间：2013-04-19T10:07:01.677
> 
> 标签：java, ajax4jsf, commandbutton

我在 itemValue 中有 2 个空格`"03 R MAIN1"`。在进行 ajax 提交时，面板正在重新渲染，当时我可以看到 2 个空格已被替换为 1 个空格，因为此值与选中的值匹配，并且该值在下拉列表中。所以我什至得到“验证错误：值无效”。请看下面的代码：

```
<a4j:form>
    <a4j:outputPanel ajaxRendered="true" id="TEST">
        <h:messages  layout="table" errorClass="errormsg noticeMsg" fatalClass="errormsg noticeMsg" 
             infoClass="infomsg noticeMsg" styleClass="table-center dont-capitalize" id="err_succ_message" />
        <h:outputText value="Display DropDown Values" />
        <h:selectOneMenu value="#{nonLocationSpecificBackingBean.testing}">
            <f:selectItem itemValue="03 R  MAIN1"/>
        </h:selectOneMenu>
        <a4j:commandButton value="Save" action="#{nonLocationSpecificBackingBean.test}" reRender="err_succ_message,TEST"></a4j:commandButton>
        <a4j:commandButton value="Test"  reRender="TEST"></a4j:commandButton>
    </a4j:outputPanel>
</a4j:form> 
```

请帮助解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:25:48.630

它与 HTML 中如何处理多个空格有关。但是，在您的情况下，我认为 CSS 技巧不是答案（如链接问题中所建议的那样）。

我认为一个好的解决方案是在表单中使用 HTML 编码值，并在您的服务器组件中对其进行解码。

更新：转换器中的可能实现将如下所示（由于格式问题，在此处添加代码而不是注释:)）

```
public Object getAsObject(FacesContext arg0, UIComponent arg1, String newValue) {
    return (Object) newValue.replaceAll("&nbsp;", " ");
}

public String getAsString(FacesContext arg0, UIComponent arg1, Object value) { 
    return value.toString().replaceAll(" ", "&nbsp;"); 
} 
```

# exception - 结构中的内联加号运算符引发异常（F#）

> ID：16102182
> 
> 赞同：7
> 
> 时间：2013-04-19T10:07:26.140
> 
> 标签：exception, struct, f#, operators

为什么`fail`值会抛出异常？`fine`价值有效。如果我删除`inline`或转换`'t`为`float`然后它工作。

```
[<Struct>]
type Test<'t> =
  val x: 't
  val y: 't
  new (x,y) = { x = x; y = y }

  static member inline (+) ((x,y), a: _ Test) = 0
  static member inline (-) ((x,y), a: _ Test) = 0

let a = 1.,2.
let b = Test(1.,2.)
let fine = a - b
let fail = a + b 
```

错误信息：

> 未处理的异常：System.TypeInitializationException：'AdditionDynamicImplTable `3' threw an exception. ---> System.NotSupportedExcep tion: Dynamic invocation of op_Addition involving coercions is not supported. at Microsoft.FSharp.Core.LanguagePrimitives.dyn@2445[a,b,c](Type aty, Type bt y, Unit unitVar0) at Microsoft.FSharp.Core.LanguagePrimitives.AdditionDynamicImplTable`3..cctor () 的类型初始化程序---内部异常堆栈跟踪结束---在 Microsoft.FSharp.Core.LanguagePrimitives.AdditionDynamic[T1,T2,TResult]( T1 x, T2 y) 在 C:\Users\olsv\Docume nts\Visual Studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\Program 中的 .$Program.main@()。fs:line 14 按任意键继续。. .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:19:12.897

这看起来像是编译器中的一个错误——或者我遗漏了一些东西（请`fsbugs`在`microsoft`dot处报告`com`）。由于某种原因，编译器无法内联对`+`运算符的调用（它似乎适用于`-`and`/`和自定义运算符，例如，但对于and`+.`失败）。`+``*`

这意味着编译器实际上会生成如下内容：

```
// Inlined - returns zero directly
fine = 0; 

// Failed to inline - calls a version which used dynamic lookup
fail = LanguagePrimitives.AdditionDynamic
         <Tuple<double, double>, Test.Test<double>, double>(a, b); 
```

该`AdditionDynamic`方法使用一些内部表`+`在运行时找到这两种类型的实现。尽管您可以在那里注册您的类型，但它并没有真正的用处，因为调用会很慢。

我真的没有任何好的解决方法 - 如果您只需要一些基本数字类型（ , 等）的运算符`float`，`int`那么最简单的选择可能是避免`inline`在此处使用并为特定类型定义（重载）运算符：

```
 static member (+) ((x:float,y:float), a: float Test) = x + y + a.x + a.y 
```

您也可以尝试使用全局运算符和实现不同重载的辅助类型的技巧，但我不确定这是否会有所帮助：例如，请参阅[过去的问题](https://stackoverflow.com/questions/14121556/overloading-measure-operator/14122388#14122388)。

# c# - 如何从 TFS 获取构建定义？

> ID：16102183
> 
> 赞同：6
> 
> 时间：2013-04-19T10:07:30.460
> 
> 标签：c#, tfs, alm

如何使用给定[collection-guid](https://stackoverflow.com/questions/16100991/how-to-get-all-collections-from-tfs/16100992#16100992)和[项目名称的 TFS-API 获取构建定义](https://stackoverflow.com/questions/16101636/how-to-get-the-name-of-all-projects-in-a-tfs-collection/16101637#16101637)

请参阅[此处](http://blog.johnsworkshop.net/)了解更多详情。这是关于 TFS 的最佳资源之一。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T10:07:30.460

```
private TfsConfigurationServer configurationServer;  

configurationServer = TfsConfigurationServerFactory.GetConfigurationServer(uri);

public IList<KeyValuePair<string, Uri>> GetBuildDefinitionListFromProject(Guid collectionId, string projectName)
{
    List<IBuildDefinition> buildDefinitionList = null;
    List<KeyValuePair<string, Uri>> buildDefinitionInfoList = null;

    try
    {
        buildDefinitionInfoList = new List<KeyValuePair<string, Uri>>();
        TfsTeamProjectCollection tfsProjectCollection =
        configurationServer.GetTeamProjectCollection(collectionId);
        tfsProjectCollection.Authenticate();
        var buildServer = (IBuildServer)tfsProjectCollection.GetService(typeof(IBuildServer));
        buildDefinitionList = new List<IBuildDefinition>(buildServer.QueryBuildDefinitions(projectName));
    }
    catch (Exception e)
    {
        ApplicationLogger.Log(e);
    }

    if (buildDefinitionList != null && buildDefinitionList.Count > 0)
    {
        foreach (IBuildDefinition builddef in buildDefinitionList)
        {
            buildDefinitionInfoList.Add(new KeyValuePair<string, Uri>(builddef.Name, builddef.Uri));
        }
    }
    return buildDefinitionInfoList;
} 
```

# django - 使用结构的 Django 部署

> ID：16102185
> 
> 赞同：1
> 
> 时间：2013-04-19T10:07:32.993
> 
> 标签：django, fabric

我正在尝试构建一个基于 django 的 Web 控制台，用于使用结构部署我的站点，其中有针对不同主机（产品/阶段）和来自 git 的不同分支的下拉列表，并且能够选择并提交以相应地执行结构命令。

问题是我想在这个控制台中有一个 html textarea 以便能够显示结构命令的输出。

例如 [myhostname] 运行：git pull origin master（在来自 ajax 请求的文本区域中）

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T04:06:55.220

添加答案，这可以通过以下方式完成：

```
local('git pull capture=True') 
```

# python - 生成最小组合多个列表，返回最低的未组合列表？

> ID：16102187
> 
> 赞同：-1
> 
> 时间：2013-04-19T10:07:35.333
> 
> 标签：python, list

我有一个看起来像这样的列表：

```
aList = [[10564, 15, 1], [10564, 13, 1], [10589, 18, 1], [10637, 39, 1], [10662, 38, 1], [10837, 45, 1], [3, 17, 13], [7, 21, 13], [46, 1, 13]] 
```

我想找到第二个元素最低的列表，如果第三个元素是 1，那么它上面就是`[10564, 13, 1]`. 我在一些帮助下做到了（虽然我不完全理解 key=lambda k:k[1]，这是什么意思？）：

```
i = min((x for x in aList if (str(x[2])=="1")), key=lambda k:k[1]) 
```

我自己理解的方式是：

```
target = min(x[1] for x in aList if (str(x[2])=="1"))
matches = [x for x in aList if (x[1] == target) and (str(x[2])=="1")] 
```

但是我现在想改变这一点，我想比较所有相邻的列表，将它们的第二个元素加在一起，找到具有最小值的列表对，然后最后返回该对中第二个元素最小的一个列表，这将如果第三个元素是 1，那么一切都是如此。你是怎么做到的？

编辑：样本输入：

```
aList = [[10564, 15, 1], [10564, 13, 1], [10589, 18, 1], [10637, 39, 1], [10662, 38, 1], [10837, 45, 1], [3, 17, 13], [7, 21, 13], [46, 1, 13]] 
```

样品输出阶段一：

```
[10564, 15, 1], [10564, 13, 1] 
```

这是最低的相邻对，因为 15+13 = 28 并且没有其他对具有如此低的第二个元素的添加。

最终输出是这对中最低的：

```
[10564, 13, 1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:20:04.440

该`key`参数告诉什么来`min`确定最小值*。*

如果没有`key`参数，`min`将任何给定的整个元组与其他元组进行比较，然后首先比较元组中的第一个元素。为输入序列中的每个元素调用该`key`函数，并且最小元素仅由该键的返回值确定。`lambda k: k[1]`返回元组中的第二个元素。

比较以下两种结果：

```
>>> example = [(5, 1), (4, 2), (3, 3), (2, 4), (1, 5)]
>>> min(example)
(1, 5)
>>> min(example, key=lambda element: element[1])
(5, 1) 
```

在第一个示例中，没有`key`提供函数并按`min()`原样比较每个元组，在第二个示例中，`min()`仅查看`key()`函数返回的内容，因此选择*不同*的元素作为最小值。

您可以使用该关键功能真正过火：

```
>>> min(example, key=lambda element: (element[0] / element[1]) + element[1])
(4, 2) 
```

using`str`并不是真正需要的，整个表达式过于冗长；您可以将其简化为：

```
i = min((x for x in aList if x[2] == 1), key=lambda k: k[1]) 
```

或使用[`operator.itemgetter`](http://docs.python.org/2/library/operator.html#operator.itemgetter)：

```
from operater import itemgetter

i = min((x for x in aList if x[2] == 1), key=itemgetter(1)) 
```

要比较相邻对，您需要一个[`itertools`辅助函数](http://docs.python.org/2/library/itertools.html#recipes)：

```
from itertools import tee, izip

def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b) 
```

然后使用以下方法将“最后一个元素为 1”标准移动到过滤器更容易[`itertools.ifilter`](http://docs.python.org/2/library/itertools.html#itertools.ifilter)：

```
from itertools import ifilter

last_is_one = ifilter(lambda x: x[2] == 1, aList)
paired = pairwise(last_is_one) 
```

现在我们可以做*真正的*工作了；对于每对相邻列表，找到第二个元素总和最低的对，然后从该对中找到第二个元素的最低值：

```
# find minimum pair by second elements summed
minpair = min(paired, key=lambda pair: pair[0][1] + pair[1][1])
minimum = min(minpair, key=itemgetter(1)) 
```

总而言之，*过滤*的责任留给函数的调用者：

```
from operater import itemgetter
from itertools import tee, izip

def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b)

def neighbouring_minimum(iterable):
    paired = pairwise(iterable)

    # find minimum pair by second elements summed
    minpair = min(paired, key=lambda pair: pair[0][1] + pair[1][1])
    return min(minpair, key=itemgetter(1)) 
```

对于您提供的示例输入：

```
>>> from itertools import ifilter
>>> aList = [[10564, 15, 1], [10564, 13, 1], [10589, 18, 1], [10637, 39, 1], [10662, 38, 1], [10837, 45, 1], [3, 17, 13], [7, 21, 13], [46, 1, 13]]
>>> filtered = ifilter(lambda x: x[2] == 1, aList)
>>> neighbouring_minimum(filtered)
[10564, 13, 1] 
```

您甚至可以将最小值的标准移至单独的关键参数：

```
def neighbouring_minimum(iterable, key=None):
    if key is None:
        # default to the element itself
        key = lambda x: x

    paired = pairwise(iterable)

    # find minimum pair by key summed
    minpair = min(paired, key=lambda pair: sum(map(key, pair)))
    return min(minpair, key=key)

neighbouring_minimum(ifilter(lambda x: x[2] == 1, aList), key=itemgetter(1)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T10:47:12.483

对于一般的理解，`lambda`这里有几个很好的答案，我不希望[像这样](https://stackoverflow.com/questions/890128/python-lambda-why)复制。

在您的具体情况下：（我已经稍微清理了一下）

```
i = min((x for x in aList if x[2]==1)), key=lambda k:k[1]) 
```

你应该把它读成：

```
some_generator = (x for x in aList if x[2]==1)) # a generator of list elements 
                                                # where the 3rd element == 1
i = min(some_generator, key=lambda k:k[1])      # minimum with respect to the
                                                # 2nd element 
```

`lambda`在上面的代码中，拦截每个传递给的 3 元素列表`min()`并返回第二个值。这告诉`min()`不要按默认的第一个元素最小化，而是按第二个元素最小化。希望下面的简单案例可以清楚地说明这一点。

```
>>> min([3,0],[1,2],[2,1])
[1,2]
>>> min([3,0],[1,2],[2,1], key=lambda x:x[1])
[3,0] 
```

现在对于您的第二个问题，我认为这将实现您想要的...

[编辑：我已经删除了环绕功能。请参阅下面的评论。这也意味着模数是多余的，因此代码更简洁！]

```
# Accept only elements where 3rd value is a 1 
only_ones = [x for x in aList if x[2]==1]

# neighbours will hold pairs of entries for easy lambda minimization
neighbours = []
for i, element in enumerate(only_ones[:-1]) :
   neighbours.append([element, only_ones[i+1]])

# Get minimum pair with respect to the sum of the pairs' middle elements first
# then get minimum of the resulting pair with respect to to middle element
i = min(min(neighbours, key=lambda k: k[0][1] + k[1][1]),
        key=lambda k:k[1]) 
```

事后看来，`neighbours`作为发电机可能更好

```
neighbours = ([x, only_ones[i+1]] for i, x in enumerate(only_ones[:-1])) 
```

最后，对于过度的、难以理解的列表/生成器理解的粉丝

```
i = min(min(([x, only_ones[i+1]] 
              for i, x in enumerate([x for x in aList if x[2]==1][:-1])) ,
                 key=lambda k: k[0][1] + k[1][1]),
                    key=lambda k: k[1]) 
```

（对不起，我无法抗拒！）

# postgresql - Postgresql 插入触发器以设置值

> ID：16102188
> 
> 赞同：61
> 
> 时间：2013-04-19T10:07:43.733
> 
> 标签：postgresql, triggers, postgresql-9.1

假设在 Postgresql 中，我有一个表`T`，其中一列是`C1`.

我想在向表中添加新记录时触发一个函数`T`。该函数应检查新记录中列的值，`C1`如果它为空/空，则将其值设置为`'X'`。

这可能吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-04-19T13:15:02.903

您需要触发器是正确的，因为为该列设置默认值对您不起作用 - 默认值仅适用于`null`值并且不能帮助您防止出现空白值。

在 postgres 中有几个步骤来创建触发器：

第 1 步：创建一个返回类型的函数`trigger`：

```
CREATE FUNCTION my_trigger_function()
RETURNS trigger AS $$
BEGIN
  IF NEW.C1 IS NULL OR NEW.C1 = '' THEN
    NEW.C1 := 'X';
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql 
```

*第 2 步：创建一个在插入之前*触发的触发器，它允许您在插入之前更改值，它调用上述函数：

```
CREATE TRIGGER my_trigger
BEFORE INSERT ON T
FOR EACH ROW
EXECUTE PROCEDURE my_trigger_function() 
```

你完成了。

请参阅[上面在 SQLFIddle 上执行的代码，](http://sqlfiddle.com/#!12/70f10/2)证明它工作正常！

* * *

您在评论中提到该值`'X'`是从子查询中检索的。如果是这样，请将相关行更改为：

```
NEW.C1 := (select some_column from some_table where some_condition); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-19T10:16:54.397

这是可能的，但您最好在列上设置默认约束。创建如下所示的表时：

```
create table mytable as (
    C1 thetype not null default X
); 
```

这表示如果您向表中添加一行并且未指定 C1 的值，则将使用 X 代替。not null 不是必需的，但可以防止更新使该列归空，假设这是您想要的。

编辑：这仅适用于常量 X，从您的评论看来，有两种可能的解决方案。

使用触发器看起来像这样：

```
create function update_row_trigger() returns trigger as $$
begin
    if new.C1 is NULL then
        new.C1 := X;
    end if;
    return new;
end
$$ language plpgsql;

create trigger mytrigger before insert on mytable for each row execute procedure update_row_trigger(); 
```

触发器函数中的`new`变量是特殊的，表示要插入的行。将触发器指定为`before insert`触发器意味着您可以在将行写入表之前对其进行修改。

第二种解决方案是使用 Postgres 以不同寻常的方式定义的计算列：

```
create or replace function C1(row mytable) returns columntype immutable as $$
begin
    return X; -- where X is an expression using values from `row`
end
$$ language plpgsql; 
```

这将创建一个函数，该函数获取表的一行并返回一个值，您可以使用 . 符号虽然，这意味着你可以这样做：

```
select
    *,
    t.C1
from
    mytable t; 
```

函数不可变的声明是可选的，但如果您想索引“列”，则需要它。您可以像这样索引该列：

```
create index on mytable (C1(mytable)); 
```

# javascript - 堆栈溢出 IE8 错误

> ID：16102192
> 
> 赞同：0
> 
> 时间：2013-04-19T10:08:19.843
> 
> 标签：javascript, internet-explorer-8, primefaces

我对 p:calendar(Primefaices tag for date) 和 IE8 有疑问。当我单击输入文本时，IE 窗口冻结，然后启动“第 16 行中的堆栈溢出”错误。我在 IE8 中检查了 Javascript 调试，似乎启动了无限调用。FireFox 和 Chrome 不会出现此问题。

这里的代码

```
<p:calendar value="#{calendarBean.date2}" id="popupCal" /> 
```

感谢帮助！

# javascript - 防止 IE9 中的默认密钥处理

> ID：16102194
> 
> 赞同：3
> 
> 时间：2013-04-19T10:08:25.153
> 
> 标签：javascript, internet-explorer, keyboard, internet-explorer-9

我想禁用一些默认浏览器键（CTRL + F，ALT + ENTER），因为它们在我的应用程序场景中没有意义。到目前为止，我所读到的在 IE9 中禁用这些事件的最重要的事情是在这种情况下将 keyCode 设置为 0，但是当我这样做时，我总是会收到“拒绝访问”错误。

这是我的代码：

```
var fnOnKeyDown = function(event)
{
  if(!event)
  {
    event = window.event;
  }
  if(event.preventDefault)
  {
    event.preventDefault();
  }
  event.returnValue = false;
  event.cancelBubble = true;
  event.keyCode = 0;      
  return false;  
};

window.document.onkeydown = fnOnKeyDown; 
```

如前所述，行 event.keyCode = 0 会引发错误“访问被拒绝”。当我将其删除或将其放入空的 try/catch 块时，它不会引发错误，但不再抑制默认的浏览器键处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:19:08.360

are you sure you don't mean ie7? I didn't seem to have a problem in ie9...

anyway, here is a post from microsoft on your issue

[http://support.microsoft.com/kb/934364](http://support.microsoft.com/kb/934364)

> To resolve this problem, change the code that assigns the event.keyCode property so that it does not change the value. The change in the code lets you use the SHIFT key or the CTRL key to load pages from the local disk
> 
> Alternatively, you can host the Web pages on a Web server. This makes sure that the event.keyCode property in the script runs correctly.

also, if possible I would advise the use of jquery. frameworks like that often handle various browser issues for you through a common interface.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T11:16:13.160

`event.preventDefault()`并且`event.stopPropagation()`应该足够了 - 您不需要更改事件本身的任何属性。

# php - 如何从数组中提取数据并准备 sql INSERT 语句？

> ID：16102195
> 
> 赞同：0
> 
> 时间：2013-04-19T10:08:27.537
> 
> 标签：php, arrays, insert, foreach

这是我的问题：

```
$paki=$each_item['quantity'];

$test=array("item"=>array("id"=>$item_id),"quan"=>array("q"=>$paki), "price"=>array("pricee"=>$price) );

//Foreach for display

foreach ($test as $indeks1 => $vrednost1){
  foreach ($vrednost1 as $indeks2 => $vrednost2){

echo "[".$indeks1."][".$indeks2."]=".$vrednost2."<br>";

  }
} 
```

这工作正常，当我回显时，我得到了正确的结果，但我需要将该信息放入下一个语句：

```
INSERT INTO stavke(pr_id,kolicina,price) VALUES ('$item_id','$kolicina','$price') 
```

所以，我的问题是如何获取数据：'$item_id','$kolicina','$price' 并将它们放入语句中。

我尝试了不同的提取功能，但没有结果..

提前致谢，

帕夫勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:47:47.520

我想你想从你的数组中获取`id`和获取？`price``$test`

```
$id = $test['item']['id'];
$price = $test['price']['pricee'];
// $kolicina is not in your code, so no idea where to get that from! 
```

你为什么不做一个更简单的数组？

```
$test = array('id' => $id, 'quantity' => $quantity, 'price' => $price); 
```

然后，您以...的方式访问元素

```
INSERT INTO blabla (a,b,c) VALUES ($test['id'],$test[$quantity],$test['price']); 
```

# java - Java 中的图像响应 - HTTPServer

> ID：16102203
> 
> 赞同：0
> 
> 时间：2013-04-19T10:08:50.623
> 
> 标签：java, image, httpserver

我在java中有一个这样的Web服务器：

```
public static void main(String[] args) throws Exception {
   HttpServer server = HttpServer.create(new InetSocketAddress(80), 0);
   server.createContext("/", new HomeHandler());
   server.setExecutor(null); // creates a default executor
   server.start();
} 
```

这是`HomeHandler`：

```
class HomeHandler implements HttpHandler {
    public void handle(HttpExchange t) throws IOException {
    String filepath = "C:\\Public\\home.html";
        String response = getPage(filepath);
        t.sendResponseHeaders(200, response.length());
        OutputStream os = t.getResponseBody();
        os.write(response.getBytes());
        os.close();
    }
} 
```

最后是功能`getPage()`：

```
private static String getPage(String page){
    String toret = "";
    BufferedReader br = null;
    try {
        String sCurrentLine;
        br = new BufferedReader(new FileReader(page));
        while ((sCurrentLine = br.readLine()) != null) {
            toret += sCurrentLine;
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null) br.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
    return toret;
} 
```

但是当我的主页加载时，它里面有一个图像，所以浏览器向我的服务器发出另一个图像请求，我为图像做了一个类似的处理程序，它做同样的事情，即调用函数 getPage() 传入参数图像的文件路径...

但是当它实际在浏览器中运行时，它不会显示图像。但是当我在新标签中单独打开图像时，它正确地告诉了图像的大小（谷歌浏览器是我的浏览器，截至今天最新的浏览器）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T15:34:57.467

以下是如何实现一个将图像发回 UI 的处理程序：

```
private void forwardImage(HttpExchange exchange, String imagefilename) throws IOException {

    byte[] result = readSmallBinaryFile(imagefilename);

    if (result == null) {       
        // resource_not_found_error
    }

    exchange.getResponseHeaders().set("Content-Type", CONTENT_TYPE_IMG);
    OutputStream os = null;
    try {
        exchange.sendResponseHeaders(200, message.length);
        os = exchange.getResponseBody();
        os.write(message);
    } finally {
        os.close();
    }

    return os;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:30:43.207

图像是二进制数据，不能通过`String`（不能存储/产生特定的字节序列）。所以有`byte[]`直接使用。Nice 将设置响应类型`Content-Type: application/jpeg`or`png`或`gif`。

顺便说一句，您的代码正在使用您平台的编码。对于指定的编码，比如说通用 Unicode：

```
getBytes() // Platform dependant
getBytes("UTF-8") // Specified

new FileReader(file) // Platform dependant
new InputStreamReader(new FileInputStream(file),) // Platform dependant
new InputStreamReader(new FileInputStream(file), "UTF-8") // Specified

new FileWriter(file) // Platform dependant
new OutputStreamWriter(new FileOutputStream(file)) // Platform dependant
new OutputStreamWriter(new FileOutputStream(file), "UTF-8") // Specified

byte[] bytes;
new String(bytes) // Platform dependant
new String(bytes, "UTF-8") // Specified 
```

# jsp - 访问另一个 jsp 中搜索容器中显示的值

> ID：16102205
> 
> 赞同：0
> 
> 时间：2013-04-19T10:09:02.873
> 
> 标签：jsp, liferay, portlet, liferay-6

我有一个jsp，我在其中显示一些人说员工的一些数据。每个员工的数据显示为一行。我将每一行都设置为一个链接，这样当用户单击任何提供特定员工详细信息的行时，用户将被定向到显示该员工相同数据的 jsp，以便可以进行进一步处理。

我的问题是当用户点击包含特定员工信息的行时，我应该如何传递员工的数据？

我现在所做的是：

```
<portlet:renderURL  var="viewPendingLeaveApplicationsURL"/>

<liferay-ui:search-container delta="20" emptyResultsMessage="No Results Found">
    <liferay-ui:search-container-results total="<%= pendingApprovals .size() %>"
            results="<%= ListUtil.subList(pendingApprovals , searchContainer.getStart(), searchContainer.getEnd()) %>" />

    <liferay-ui:search-container-row keyProperty = "empId" modelVar="search"
            className="com.corpserver.mallyas.mis.portal.model.LeaveApplication">

        <portlet:renderURL var="leaveApplicationURL">
            <portlet:param name="jspPage"  value="/admin/AddCompany.jsp" />
            <portlet:param name="search" value='<%String.valueOf(search.getEmpId());%>'/>
        </portlet:renderURL>

        <liferay-ui:search-container-column-text name='Leave Duration' value='<%=String.valueOf(search.getLeaveDuration())%>' href="<%= leaveApplicationURL.toString()%>" />

        <liferay-ui:search-container-column-text name="From" value='<%=String.valueOf(search.getLeaveFromDate())%>' href="<%= leaveApplicationURL.toString()%>"/> 

        <liferay-ui:search-container-column-text name="To" value='<%=String.valueOf(search.getLeaveToDate())%>' href="<%= leaveApplicationURL.toString()%>"/> 

        <liferay-ui:search-container-column-text name="Reason" value='<%=String.valueOf(search.getLeaveReason())%>' href="<%= leaveApplicationURL.toString()%>"/> 

        <liferay-ui:search-container-column-text name="Remarks" value='<%=String.valueOf(search.getLeaveRemarks())%>' href="<%= leaveApplicationURL.toString()%>"/> 

    </liferay-ui:search-container-row>

    <liferay-ui:search-iterator/>

</liferay-ui:search-container> 
```

在上面的代码中，我试图传递`empId`用户选择的行。但是在第二个 jsp 中没有显示任何内容。我想在第二个 jsp 上传递所有这些信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:44:03.780

好吧，我在代码中看到了一个小问题，问题在于 URL 的生成方式：

```
<portlet:renderURL var="leaveApplicationURL">
    <portlet:param name="jspPage"  value="/admin/AddCompany.jsp" />
    <portlet:param name="search" value='<%String.valueOf(search.getEmpId());%>'/>
</portlet:renderURL> 
```

这一行：

```
<portlet:param name="search" value='<%String.valueOf(search.getEmpId());%>'/> 
```

应该：

```
<portlet:param name="search" value='<%= String.valueOf(search.getEmpId()) %>'/> 
```

您是否注意到这一点：，添加了开头，并且删除了尾随。**`<%=`**`String.valueOf(search.getEmpId())%>``<%=``;`

因此，简而言之，您需要在属性中使用一个[`jsp expression`](http://docs.oracle.com/javaee/5/tutorial/doc/bnaov.html)而不是[scriptlet 代码块。](http://docs.oracle.com/javaee/5/tutorial/doc/bnaou.html)`value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:39:30.363

您需要使用`<portlet:actionURL />`而不是渲染一个。

```
<portlet:actionURL var="leaveApplicationURL">
    <portlet:param name="jspPage"  value="/admin/AddCompany.jsp" />
    <portlet:param name="search" value= '<%String.valueOf(search.getEmpId());%>'/>
</portlet:actionURL>

@ProcessAction(name = "gotToEmployee")
public void changeCurrency(ActionRequest request, ActionResponse response) {
    //perform here any action you want, like search in DB
    response.setRenderParameter("search", request.getParameter("search"));
    response.setRenderParameter("page", request.getParameter("jspPage"));
} 
```

然后在您的渲染方法中使用此参数。

# linux - sed,awk.grep - 如果该行不存在，则在配置部分的末尾添加一行

> ID：16102213
> 
> 赞同：0
> 
> 时间：2013-04-19T10:09:20.460
> 
> 标签：linux, sed, awk, grep

我想使用 sed/awk 编辑文件。该文件由几个配置部分组成，如下所示：

```
SECTION 1 BEGIN
some stuff
SECTION END

SECTION 2 BEGIN
some stuff
some more stuff
important line
SECTION END 
```

如果它不存在，我想添加`important line`到末尾`SECTION 2`，最好是作为一个命令。我一直在看[这个问题中的 fgrep/sed 组合，](https://stackoverflow.com/questions/9118553/add-a-line-to-a-file-section-unless-it-exists?answertab=active#tab-top)但我不太明白如何根据我的需要调整它。

注意：部分中可能有空行。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:25:22.847

使用`awk`：

```
awk '
  $0 == "SECTION 2 BEGIN" { inSec2 = 1 } 
  inSec2 && $0 == "important line" { hasImportant = 1 } 
  inSec2 && $0 == "SECTION END" { 
    if (!hasImportant) { print "important line" } 
    inSec2 = 0
  }
  1' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:42:50.380

基于迈克尔的解决方案，有一个单行：

```
awk -vline="important line" '/^SECTION 2 BEGIN$/{f=1}f&&$0==line{f=0}f&&/^SECTION END$/{print line;f=0}1'<<EOT
SECTION 1 BEGIN
some stuff
SECTION END

SECTION 2 BEGIN
some stuff
some more stuff
SECTION END

SECTION 2 BEGIN
some stuff
some more stuff
important line
SECTION END

SECTION 3 BEGIN
oops
SECTION END
EOT 
```

输出：

```
SECTION 1 BEGIN
some stuff
SECTION END

SECTION 2 BEGIN
some stuff
some more stuff
important line
SECTION END

SECTION 2 BEGIN
some stuff
some more stuff
important line
SECTION END

SECTION 3 BEGIN
oops
SECTION END 
```

# java - 准备好的语句 SQL 异常“无输入参数”

> ID：16102216
> 
> 赞同：5
> 
> 时间：2013-04-19T10:09:24.813
> 
> 标签：java, sql, prepared-statement, derby

所以我试图从数据库中检索数据。可能是我看多了，还是没找到问题所在。

连接很好，语句很好（适用于静态数据），并且来自`Item`对象的数据是正确的。

它告诉我该语句没有输入参数。方法中抛出异常`getSelectPrepareStatement()`。代码是：

```
 public Result[] getItemsFromInput(Item item) throws SQLException {
    PreparedStatement statement;
    ArrayList<Result> results = new ArrayList<Result>();
    String query =  "SELECT Code1, Name, A.Code2 " +
                    "FROM ItemTable A " +
                    "INNER JOIN CategoryTable B " +
                    "ON A.CatCode = B.CatCode" +
                    "AND B.ID LIKE '?'";
    statement = getSelectPrepareStatement(query, item.getTail().getId()+"%");

    ...

    rs = queryForResultSet(statement);

    while(rs.next()) {
        results.add(new Result(
                rs.getString("ItemName"),
                rs.getInt("ItemCode"),
                rs.getString("ClassCode")));
    }

    return results.toArray(new Result[results.size()]);
} 
```

在此处检索具有设置值的 PreparedStatement：

```
private PreparedStatement getSelectPrepareStatement(String SQL, String data) throws SQLException {
    PreparedStatement pStmt = conn.prepareStatement(SQL);
    pStmt.setString(1, data);

    return pStmt;
} 
```

`pStmt.setString(1, data);`尽管我将语句设置为具有参数，但调用时会引发异常。

错误是：

```
 java.sql.SQLException: No input parameters.
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedResultSet.noStateChangeException(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.setString(Unknown Source)
        at connection.Communicator.getSelectPrepareStatement(Communicator.java:306)
        at connection.Communicator.getItemsFromInput(Communicator.java:56)
        at frame.PromotionsDialog$1.propertyChange(PromotionsDialog.java:126)
        at java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)
        at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:328)
        at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)
        at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:303)
        at java.awt.Component.firePropertyChange(Component.java:8402)
        at javax.swing.JComponent.firePropertyChange(JComponent.java:4494)
        at frame.DataPanel$1.actionPerformed(DataPanel.java:130)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
        at java.awt.Component.processMouseEvent(Component.java:6505)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
        at java.awt.Component.processEvent(Component.java:6270)
        at java.awt.Container.processEvent(Container.java:2229)
        at java.awt.Component.dispatchEventImpl(Component.java:4861)
        at java.awt.Container.dispatchEventImpl(Container.java:2287)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
        at java.awt.Container.dispatchEventImpl(Container.java:2273)
        at java.awt.Window.dispatchEventImpl(Window.java:2719)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
        at java.awt.EventQueue.access$200(EventQueue.java:103)
        at java.awt.EventQueue$3.run(EventQueue.java:688)
        at java.awt.EventQueue$3.run(EventQueue.java:686)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
        at java.awt.EventQueue$4.run(EventQueue.java:702)
        at java.awt.EventQueue$4.run(EventQueue.java:700)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
    Caused by: java.sql.SQLException: No input parameters.
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
        ... 51 more
    Caused by: ERROR 07009: No input parameters.
        at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
        at org.apache.derby.impl.sql.GenericParameterValueSet.checkPosition(Unknown Source)
        at org.apache.derby.impl.sql.GenericParameterValueSet.getParameterForSet(Unknown Source)
        ... 47 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T10:11:23.967

这是您的 SQL 中的问题。

```
AND B.ID LIKE '?' 
```

这不是添加参数 - 这是指定的值`?`，因为它在引号中。基本上，你是说你想找到一个`B.ID`有单个问号的行。

你要：

```
AND B.ID LIKE ? 
```

这样你就真正指定了一个参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T10:13:48.330

不需要单引号`?`

尝试

```
String query =  "SELECT Code1, Name, A.Code2 " +
                    "FROM ItemTable A " +
                    "INNER JOIN CategoryTable B " +
                    "ON A.CatCode = B.CatCode" +
                    "AND B.ID LIKE ?%";
    statement = getSelectPrepareStatement(query, item.getTail().getId()+""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:12:21.940

尝试从 bind 参数周围删除单引号。这就是 PreparedStatement 为您所做的。

```
String query =  "SELECT Code1, Name, A.Code2 " +
                "FROM ItemTable A " +
                "INNER JOIN CategoryTable B " +
                "ON A.CatCode = B.CatCode" +
                "AND B.ID LIKE ?"; 
```

# javascript - Highcharts 饼图具有单个值，以 % 为单位

> ID：16102220
> 
> 赞同：1
> 
> 时间：2013-04-19T10:09:43.923
> 
> 标签：javascript, jquery, charts, highcharts, pie-chart

我有几个百分比值，应该用嵌套的饼图显示。有没有可能每个馅饼都没有填满 100%？例如，当值为 0.5 时，它应该只画一个半馅饼。我试过了`yAxis: {max: 1.0}`，但这没有任何效果。我创建了这个小提琴[http://jsfiddle.net/ZL9YD/](http://jsfiddle.net/ZL9YD/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:42:50.063

您可能需要在数据中指定一个额外的数据点来绘制剩余百分比，因为饼图的总和始终为 100%：

```
series: [{
    name: 'Run1',
    data: [{name: "Run1", y: 0.6, color: "#ff0000"},{name: "", y: 0.4, color: "white"}],
},
{
    name: 'Run2',
    data: [{name: "Run2", y: 0.8},{name: "", y: 0.2, color: "white"}],
    innerSize: '80%'
}] 
```

[http://jsfiddle.net/e3MUE/](http://jsfiddle.net/e3MUE/)

# django - Django：登录员工用户时从 Django 管理面板中删除超级用户复选框

> ID：16102222
> 
> 赞同：9
> 
> 时间：2013-04-19T10:09:49.647
> 
> 标签：django, django-admin

我需要编辑 django 管理面板。在我的应用程序中，超级用户可以添加用户并分配权限。当超级用户添加像人力资源经理这样的员工用户时，应用程序应该允许添加用户。有用。但我需要做的是当员工用户登录到管理面板时隐藏超级用户状态栏。我怎样才能做到这一点？我应该更改什么 Django 管理文件？如何？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-21T02:22:17.767

如果您希望您的超级用户仍然能够通过管理员添加其他超级用户，但不允许员工用户管理超级用户，您需要创建一个覆盖该`get_fieldsets`方法的自定义管理员。这可以在您的`admin.py`文件中：

```
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import User
from django.utils.translation import ugettext, ugettext_lazy as _

class MyUserAdmin(UserAdmin):
    def get_fieldsets(self, request, obj=None):
        if not obj:
            return self.add_fieldsets

        if request.user.is_superuser:
            perm_fields = ('is_active', 'is_staff', 'is_superuser',
                           'groups', 'user_permissions')
        else:
            # modify these to suit the fields you want your
            # staff user to be able to edit
            perm_fields = ('is_active', 'is_staff')

        return [(None, {'fields': ('username', 'password')}),
                (_('Personal info'), {'fields': ('first_name', 'last_name', 'email')}),
                (_('Permissions'), {'fields': perm_fields}),
                (_('Important dates'), {'fields': ('last_login', 'date_joined')})] 
```

按照程序取消注册 django 用户管理员并注册您的新用户管理员：

```
admin.site.unregister(User)
admin.site.register(User, MyUserAdmin) 
```

您可以对任何希望一组用户与另一组用户使用不同字段集的模型做类似的事情——只需覆盖`get_fieldsets`自定义管理中的方法并使用请求对象来确定哪个用户正在尝试访问它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-18T16:32:58.717

除了重新定义字段集，您还可以删除 is_superuser 字段：

```
from django.contrib.auth import get_user_model
from django.contrib.auth.admin import UserAdmin
from copy import deepcopy

class UserAdmin(UserAdmin):

    def get_fieldsets(self, request, obj=None):
        fieldsets = super(UserAdmin, self).get_fieldsets(request, obj)
        if not obj:
            return fieldsets

        if not request.user.is_superuser or request.user.pk == obj.pk:
            fieldsets = deepcopy(fieldsets)
            for fieldset in fieldsets:
                if 'is_superuser' in fieldset[1]['fields']:
                    if type(fieldset[1]['fields']) == tuple :
                        fieldset[1]['fields'] = list(fieldset[1]['fields'])
                    fieldset[1]['fields'].remove('is_superuser')
                    break

        return fieldsets

User = get_user_model()
admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

主要优点是您保留默认字段集。如果 django.contrib.admin 发展，您将无需查看代码来修改字段集以与默认字段集保持一致。

在这个例子中，如果用户正在编辑自己，我也会删除该字段以避免失去一些权限。

编辑：添加 deepcopy 指令，否则使用第一个 request.user 执行代码的每个人都完成字段集更新（因为一个实例可以由两个不同的用户使用，具体取决于您的 Web 服务器配置）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-20T04:34:04.300

为了从 Django Admin“编辑用户”页面中删除“是超级用户”复选框，了解“超级用户”复选框的来源和方式非常重要。

在您的 django 安装下，一个名为的文件`django.contrib.auth.forms`调用类`class UserChangeForm(forms.ModelForm):`。它读取的模型文件是`django.contrib.auth.models`针对`class User(models.Model):`该类的。本质上，`django.contrib.auth.admin`文件读取将模型中的字段作为手动`fieldset`参数传递。

```
class UserAdmin(admin.ModelAdmin):
fieldsets = (
    (None, {'fields': ('username', 'password')}),

    (_('Personal info'), {'fields': ('first_name', 'last_name', 'email')}),        
    (_('Permissions'), {'fields': ('is_active', 'is_staff', 'is_superuser',
                                   'groups', 'user_permissions')}),
    (_('Important dates'), {'fields': ('last_login', 'date_joined')}),
) 
```

删除该字段的最佳方法是将本地“admin.py”文件更新为“取消注册”和“注册”用户模型，并从字段集中删除“超级用户”字段。

```
from django.db import transaction
from django.conf import settings
from django.contrib import admin
from django.contrib.auth.forms import (UserCreationForm, UserChangeForm,
    AdminPasswordChangeForm)
from django.contrib.auth.models import User
from django.contrib import messages
from django.core.exceptions import PermissionDenied
from django.http import HttpResponseRedirect, Http404
from django.shortcuts import get_object_or_404
from django.template.response import TemplateResponse
from django.utils.html import escape
from django.utils.decorators import method_decorator
from django.utils.safestring import mark_safe
from django.utils.translation import ugettext, ugettext_lazy as _
from django.views.decorators.csrf import csrf_protect
from django.views.decorators.debug import sensitive_post_parameters

csrf_protect_m = method_decorator(csrf_protect)

### Unregister the existing User model from the admin
admin.site.unregister(User)

class UserAdmin(admin.ModelAdmin):
    add_form_template = 'admin/auth/user/add_form.html'
    change_user_password_template = None
    fieldsets = (
        (None, {'fields': ('username', 'password')}),

        (_('Personal info'), {'fields': ('first_name', 'last_name', 'email')}),        

        ###################################
        #### CHANGE THIS RIGHT HERE #######        
        (_('Permissions'), {'fields': ('is_active', 'is_staff', 
                                       'groups', 'user_permissions')}),
        ####################################

        (_('Important dates'), {'fields': ('last_login', 'date_joined')}),
    )
    add_fieldsets = (
        (None, {
            'classes': ('wide',),
            'fields': ('username', 'password1', 'password2')}
        ),
    )
    form = UserChangeForm
    add_form = UserCreationForm
    change_password_form = AdminPasswordChangeForm
    list_display = ('username', 'email', 'first_name', 'last_name', 'is_staff')
    list_filter = ('is_staff', 'is_superuser', 'is_active')
    search_fields = ('username', 'first_name', 'last_name', 'email')
    ordering = ('username',)
    filter_horizontal = ('user_permissions',)

    def get_fieldsets(self, request, obj=None):
        if not obj:
            return self.add_fieldsets
        return super(UserAdmin, self).get_fieldsets(request, obj)

    def get_form(self, request, obj=None, **kwargs):
        """
        Use special form during user creation
        """
        defaults = {}
        if obj is None:
            defaults.update({
                'form': self.add_form,
                'fields': admin.util.flatten_fieldsets(self.add_fieldsets),
            })
        defaults.update(kwargs)
        return super(UserAdmin, self).get_form(request, obj, **defaults)

    def get_urls(self):
        from django.conf.urls import patterns
        return patterns('',
            (r'^(\d+)/password/$',
             self.admin_site.admin_view(self.user_change_password))
        ) + super(UserAdmin, self).get_urls()

    @sensitive_post_parameters()
    @csrf_protect_m
    @transaction.commit_on_success
    def add_view(self, request, form_url='', extra_context=None):
        # It's an error for a user to have add permission but NOT change
        # permission for users. If we allowed such users to add users, they
        # could create superusers, which would mean they would essentially have
        # the permission to change users. To avoid the problem entirely, we
        # disallow users from adding users if they don't have change
        # permission.
        if not self.has_change_permission(request):
            if self.has_add_permission(request) and settings.DEBUG:
                # Raise Http404 in debug mode so that the user gets a helpful
                # error message.
                raise Http404(
                    'Your user does not have the "Change user" permission. In '
                    'order to add users, Django requires that your user '
                    'account have both the "Add user" and "Change user" '
                    'permissions set.')
            raise PermissionDenied
        if extra_context is None:
            extra_context = {}
        defaults = {
            'auto_populated_fields': (),
            'username_help_text': self.model._meta.get_field('username').help_text,
        }
        extra_context.update(defaults)
        return super(UserAdmin, self).add_view(request, form_url,
                                               extra_context)

    @sensitive_post_parameters()
    def user_change_password(self, request, id, form_url=''):
        if not self.has_change_permission(request):
            raise PermissionDenied
        user = get_object_or_404(self.queryset(request), pk=id)
        if request.method == 'POST':
            form = self.change_password_form(user, request.POST)
            if form.is_valid():
                form.save()
                msg = ugettext('Password changed successfully.')
                messages.success(request, msg)
                return HttpResponseRedirect('..')
        else:
            form = self.change_password_form(user)

        fieldsets = [(None, {'fields': form.base_fields.keys()})]
        adminForm = admin.helpers.AdminForm(form, fieldsets, {})

        context = {
            'title': _('Change password: %s') % escape(user.username),
            'adminForm': adminForm,
            'form_url': mark_safe(form_url),
            'form': form,
            'is_popup': '_popup' in request.REQUEST,
            'add': True,
            'change': False,
            'has_delete_permission': False,
            'has_change_permission': True,
            'has_absolute_url': False,
            'opts': self.model._meta,
            'original': user,
            'save_as': False,
            'show_save': True,
        }
        return TemplateResponse(request, [
            self.change_user_password_template or
            'admin/auth/user/change_password.html'
        ], context, current_app=self.admin_site.name)

    def response_add(self, request, obj, post_url_continue='../%s/'):
        """
        Determines the HttpResponse for the add_view stage. It mostly defers to
        its superclass implementation but is customized because the User model
        has a slightly different workflow.
        """
        # We should allow further modification of the user just added i.e. the
        # 'Save' button should behave like the 'Save and continue editing'
        # button except in two scenarios:
        # * The user has pressed the 'Save and add another' button
        # * We are adding a user in a popup
        if '_addanother' not in request.POST and '_popup' not in request.POST:
            request.POST['_continue'] = 1
        return super(UserAdmin, self).response_add(request, obj,
                                                   post_url_continue)

admin.site.register(User, UserAdmin) 
```

通过取消注册管理类并重新注册它，您可以覆盖它传递到“编辑用户”页面的字段集中的字段。希望有帮助！

# javascript - 文本字段聚焦时视口水平移动

> ID：16102223
> 
> 赞同：4
> 
> 时间：2013-04-19T10:09:52.750
> 
> 标签：javascript, html, ios, mobile, sencha-touch-2

这是我在 Sencha Touch App 中聚焦文本字段时遇到的问题

![在此处输入图像描述](https://i.stack.imgur.com/7G1Lw.png)

由于某种原因，文本字段似乎垂直和水平居中。

这就是它应该看起来的样子

![在此处输入图像描述](https://i.stack.imgur.com/Avamk.png)

有没有人已经有同样的问题并解决了？

**更新**

它不会一直发生，但会发生在最初不是水平居中的任何文本字段上。

有时也会在 Android 上发生（Chrome 26）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T22:51:58.560

它实际上是`<div>`您需要在 index.html 中拥有的 Facebook，在应用程序请求期间导致此问题。就像@rdougan 所说，它比屏幕大，因此该字段水平和垂直居中。

为了解决这个问题，我只是在发送应用请求后隐藏 Facebook `<div>`，并在需要时显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:45:46.067

我相信您所看到的是（至少从屏幕截图中）iOS 的输入框上的 Safari 自动缩放功能。当输入框获得输入焦点时，这种“*现象*”会自动居中/聚焦输入框。

此`<meta />`标签有助于防止：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

上面的这个`<meta />`标签完成的是：

*   *以设备的屏幕宽度呈现*页面；
*   将缩放级别设置为`1:1`;
*   **并将最大**比例固定为`1`（本质上*不可扩展*）。

如果您的页面*明确*针对移动设备进行了优化，那么上述解决方案应该可以正常工作。

* * *

或者，如果您想*控制*发生`<input />`这种情况的控制，请使用：

```
<meta name="viewport" content="width=device-width" /> 
```

然后，将每个`<input />`的`font-size`样式设置**为至少**16 像素。

```
<input type="text" style="font-size: 16px;" /> 
```

这个更紧凑`<meta />`的标签只是说页面最初*应该*`1:1`按比例呈现。

* * *

这是一个[测试页面](http://stage.esoland.net/_Test_/InputZoom.htm)（缩写：[http](http://bit.ly/15GbxJa) ://bit.ly/15GbxJa ），它将展示您（希望）想要修复的内容。此测试页使用第二种（替代）方法进行更细粒度的控制；您可以查看源代码以供参考。

初始页面显示：

[![初始页面显示](https://i.stack.imgur.com/EckBZ.png)](https://i.stack.imgur.com/EckBZ.png)

分别有和没有自动缩放：

[![启用自动缩放](https://i.stack.imgur.com/SWg9k.png)](https://i.stack.imgur.com/SWg9k.png) [![禁用自动缩放](https://i.stack.imgur.com/mq2xn.png)](https://i.stack.imgur.com/mq2xn.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-20T02:22:05.110

尝试在父元素上设置 min-width

# angularjs - 指令是使用 angularjs 注入 html 的最佳方式

> ID：16102225
> 
> 赞同：1
> 
> 时间：2013-04-19T10:09:57.567
> 
> 标签：angularjs, angularjs-directive

我想在我的所有视图中添加一段代码，以在顶部显示一个通知栏，以便通知用户。

我正在尝试使用指令来做到这一点。检查这个简单的示例：http: [//jsfiddle.net/dirkom/wsrb6/2/](http://jsfiddle.net/dirkom/wsrb6/2/)

HTML：

```
 <bca-notification></bca-notification> 
```

指示：

```
.directive('bcaNotification', function () {
    var notification = '<div id="notification"  ng-init="showThis=true" ng-show="showThis">' +
                        'Error message<a id="close" ng-click="showThis = false">Close</a></div>'; 
            return({
                template: notification,
                restrict: "E"
            }); 
```

这是正确的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:46:10.930

如果您的*所有*视图都需要此标题，您可能应该将标题放在单独的视图中（带有自己的控制器），并使用 ng-view 仅更改页面的主要内容区域。

如果不同的视图需要影响header中显示的内容（即影响header的模型数据），那么这个模型数据应该被放入一个服务中，然后不同的视图可以注入那个服务来影响模型。

我最近回答了一个与此非常相似的 SO 问题，所以我建议也看一下： [https](https://stackoverflow.com/a/16065385/215945)
://stackoverflow.com/a/16065385/215945该答案还引用了一个[关于购物篮](https://stackoverflow.com/a/14619122/215945)的问题，该问题的商品数量在标题。项目计数需要由多个控制器更新，因此我们将其放入服务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:13:17.363

是的，这是正确的。你也可以点击这个链接： http: [//onehungrymind.com/angularjs-directives-basics/](http://onehungrymind.com/angularjs-directives-basics/)

# html - 从 HTML href 链接到本机应用程序

> ID：16102226
> 
> 赞同：2
> 
> 时间：2013-04-19T10:10:03.080
> 
> 标签：html, twitter

现在我正在创建一个自定义推文按钮供用户单击它并自动调用推特网络意图来分享/推特一些链接。我现在使用的方法是创建一个带有 href 的锚点`https://twitter.com/share?url=[some url to share]`

因为我将在移动网站上使用它，是否可以创建类似的 href 或类似的链接，而不是打开本机应用程序来发推文，而不是从浏览器打开一个新的选项卡来打开推特网站？（我的目标是让我的移动网站上的推文按钮具有原生的感觉）

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:15:35.780

查看 twitter 的 iOS URL Schemes。例如，可以使用 调用该`twitter`方案`twitter://user?screen_name=lorenb`。例如，请参阅[此页面以获取更多信息。](http://handleopenurl.com/scheme/twitter)

此站点尝试更全面的 iOS URL 方案列表： [http ://wiki.akosma.com/IPhone_URL_Schemes#Twitter](http://wiki.akosma.com/IPhone_URL_Schemes#Twitter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T04:22:16.867

我制作 Tweetable 就是为了做到这一点！

[https://github.com/omarish/tweetable](https://github.com/omarish/tweetable)

它测试应用程序是否存在于移动设备上，如果存在，则加载 twitter:// 深层链接。否则，如果应用程序不存在，它会加载网站链接（因此它在桌面上运行良好）。

# android - SetImageResource 在 android 中不可见

> ID：16102228
> 
> 赞同：3
> 
> 时间：2013-04-19T10:10:17.270
> 
> 标签：android, image

我正在开发一个应用程序，其中我需要通过检查条件随机更改四个​​图像。它适用于四个不同的值（例如：2,4,1,3），但如果我对四个图像使用五个值（例如：2,3,3,1,4）。然后，我无法识别两次更改图像的区别。

我正在使用以下代码。

```
 if(id==0 || id==4) //here 0,4 appears sequencially then 
                                               // blue image not changed two times.

                               {
                                light1.setImageResource(R.drawable.blue_on);
                                light2.setImageResource(R.drawable.red_off);
                                light3.setImageResource(R.drawable.green_off);
                                light4.setImageResource(R.drawable.yellow_off);
                            }
                            else if(id==1 || id==5)
                            {
                                light1.setImageResource(R.drawable.blue_off);
                                light2.setImageResource(R.drawable.red_on);
                                light3.setImageResource(R.drawable.green_off);
                                light4.setImageResource(R.drawable.yellow_off);
                            }
                            else if(id==2 || id==6)
                            {
                                light1.setImageResource(R.drawable.blue_off);
                                light2.setImageResource(R.drawable.red_off);
                                light3.setImageResource(R.drawable.green_on);
                                light4.setImageResource(R.drawable.yellow_off);
                            }
                            else if(id==3 || id==7)
                            {
                                light1.setImageResource(R.drawable.blue_off);
                                light2.setImageResource(R.drawable.red_off);
                                light3.setImageResource(R.drawable.green_off);
                                light4.setImageResource(R.drawable.yellow_on);
                            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:17:30.403

用这个

```
light1.setImageResource(getResources().getDrawable(R.drawable.ic_launcher)); 
```

安装的

```
light1.setImageResource(R.drawable.blue_off); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:18:53.917

你可以使用[TranslateAnimation](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)来检测变化

您可以在[View.StartAnimation中使用它](http://developer.android.com/reference/android/view/View.html#startAnimation%28android.view.animation.Animation%29)

# linq-to-entities - LINQ to Entities 无法识别方法 ElementAt[WebSecurity.CurrentUserId]

> ID：16102231
> 
> 赞同：2
> 
> 时间：2013-04-19T10:10:29.880
> 
> 标签：linq-to-entities

```
@accounts.UserProfiles.ElementAt(item.AuthorID).ProfilePicture 
```

> LINQ to Entities 无法识别方法 'Collision.Models.UserProfile ElementAt[UserProfile](System.Linq.IQueryable`1[Collision.Models.UserProfile], Int32)' 方法，并且此方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T11:45:36.443

`ElementAt(x)`并且*不受支持*：[.NET 3.5](http://msdn.microsoft.com/en-us/library/bb738474%28v=vs.90%29.aspx)`ElementAtOrDefault(x)`、.NET [4.5](http://msdn.microsoft.com/en-us/library/bb738550.aspx)

 *但是，您可以使用

```
source.Skip(x).First() 
```

或分别

```
source.Skip(x).FirstOrDefault() 
```

以达到类似的结果。

请注意，`Skip()`需要对其源进行排序（使用“OrderBy”子句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:13:09.770

LINQ to Entities既不支持`ElementAt`也不`ElementAtOrDefault`支持。

您可以在 MSDN 上找到所有受支持方法的列表：[支持和不支持的 LINQ 方法（LINQ to Entities）](http://msdn.microsoft.com/en-us/library/bb738550.aspx)*

# android - java.lang.RuntimeException：无法实例化活动 ComponentInfo/ClassNotFoundException

> ID：16102232
> 
> 赞同：13
> 
> 时间：2013-04-19T10:10:37.620
> 
> 标签：android, classnotfoundexception

我正在开发 android 应用程序，比我想要额外的新活动我的 logcat 有错误

我的日志猫：

```
04-19 12:59:17.654: D/AndroidRuntime(18135): Shutting down VM
04-19 12:59:17.654: W/dalvikvm(18135): threadid=1: thread exiting with uncaught exception (group=0x4001d878)
04-19 12:59:17.684: E/AndroidRuntime(18135): FATAL EXCEPTION: main
04-19 12:59:17.684: E/AndroidRuntime(18135): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.bvblogic.android.batterypower/com.bvblogic.android.batterypower.activities.UnlockActivity}: java.lang.ClassNotFoundException: com.bvblogic.android.batterypower.activities.UnlockActivity in loader dalvik.system.PathClassLoader[/data/app/com.bvblogic.android.batterypower-1.apk]
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2587)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2681)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.os.Looper.loop(Looper.java:123)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.app.ActivityThread.main(ActivityThread.java:4640)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at java.lang.reflect.Method.invokeNative(Native Method)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at java.lang.reflect.Method.invoke(Method.java:521)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at dalvik.system.NativeStart.main(Native Method)
04-19 12:59:17.684: E/AndroidRuntime(18135): Caused by: java.lang.ClassNotFoundException: com.bvblogic.android.batterypower.activities.UnlockActivity in loader dalvik.system.PathClassLoader[/data/app/com.bvblogic.android.batterypower-1.apk]
04-19 12:59:17.684: E/AndroidRuntime(18135):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-19 12:59:17.684: E/AndroidRuntime(18135):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2579)
04-19 12:59:17.684: E/AndroidRuntime(18135):    ... 11 more 
```

我的清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bvblogic.android.batterypower"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.BATTERY_STATS" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.UPDATE_DEVICE_STATS" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.HARDWARE_TEST" />
    <uses-permission android:name="android.permission.RESTART_PACKAGES" />
    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" />
    <uses-permission android:name="android.permission.GET_PACKAGE_SIZE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity android:name=".activities.UnlockActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.bvblogic.android.batterypower.activities.BatteryPowerTabActivity" >
        </activity>
        <activity android:name="com.bvblogic.android.batterypower.activities.MonitoringActivity" >
        </activity>
        <activity android:name="com.bvblogic.android.batterypower.activities.SettingsActivity" >
        </activity>
        <activity android:name="com.bvblogic.android.batterypower.activities.ProcessManagerActivity" >
        </activity>
        <activity
            android:name="com.bvblogic.android.batterypower.activities.DummyBrightnessActivity"
            android:excludeFromRecents="true"
            android:taskAffinity="com.bvblogic.android.batterypower.Dummy"
            android:theme="@android:style/Theme.Translucent.NoTitleBar" >
        </activity>

        <service android:name="com.bvblogic.android.batterypower.util.TurboBoost" >
        </service>
        <service android:name="com.bvblogic.android.batterypower.services.BatteryPowerService" />

        <receiver
            android:name="com.bvblogic.android.batterypower.alarm.RegistrationAlarm"
            android:process=":registration" >
        </receiver>
        <receiver
            android:name="com.bvblogic.android.batterypower.alarm.OnlinePingAlarm"
            android:process=":ping" >
        </receiver>
        <receiver
            android:name="com.bvblogic.android.batterypower.alarm.AdNotificationAlarm"
            android:process=":remote" >
        </receiver>
        <receiver
            android:name="com.bvblogic.android.batterypower.widget.MWidgetProvider"
            android:icon="@drawable/btn_remove"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_provider" />
        </receiver>
    </application>

</manifest> 
```

我的活动：

```
package com.bvblogic.android.batterypower.activities;

import com.bvblogic.android.batterypower.R;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class UnlockActivity extends Activity {  
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings_auto_saving_layout);
    }
} 
```

然后我被分配了意图过滤器到 BatteryPowerTabActivity 应用程序开始正常。请帮我。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-10T08:37:42.833

升级时，新的“Android Private Libraries”的“Order and Export”并不总是被选中。android-support-v4.jar 现在位于“Android Private Libraries”部分。

要解决此问题，请转到“订购和导出”并选中“Android 私有库”。然后刷新/清理/重建。

在为库项目完成此“修复”后，您可能需要关闭并重新打开任何依赖项目，因为他们可能不会立即看到此“修复”。

![在此处输入图像描述](https://i.stack.imgur.com/KbBdf.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-19T10:14:49.370

将清单文件中的活动声明更改为

```
 <activity android:name=".UnlockActivity"> 
```

要不然

```
<activity android:name="Yourcompletepackagename.UnlockActivity"> 
```

并尝试

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-07T18:13:03.060

如果您的活动类位于默认包中，则可能会发生这种情况。我通过将活动类移动到新包来修复它。并更改 manifest.xml

前

活动 android:name=".MainActivity"

后

活动 android:name="new_package.MainActivity"

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-24T16:39:20.637

伙计，当我的应用程序已经在市场上发布时，这也发生在我身上。这是一场彻头彻尾的灾难。我已经发布了 5 个小时后才意识到这一点。

使用 ADT 运行它没有问题。问题出在生成的 APK 上。因此，如果您发布应用程序，请在您的测试手机中测试纯 APK 的安装。

和你一样，我也认为问题出在我的 ADT 更新上，在我的例子中是 v22。

解决方案是清理和构建项目：

[Android java.lang.RuntimeException：无法实例化活动 ComponentInfo](https://stackoverflow.com/questions/6443091/android-java-lang-runtimeexception-unable-to-instantiate-activity-componentinfo)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-11T16:59:53.307

我遇到了同样的问题，但是我在 Manifest 文件中声明了我的活动，并且名称正确。

我的问题是我不必在“libs”文件夹中导入第三方库，我需要在我的项目中引用它们（右键单击、属性、Java 构建路径、库、添加 Jar ...）。

关于如何在清单文件中声明活动，正确使用 .ActivityName 总是该活动位于主包中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-09T12:54:39.523

我同意@codercat 建议您执行的操作，但是当您在同一项目结构中使用**v7 和 v13以实现不同功能时，也会出现此错误。**因此，我建议您**将 v13 jar 文件复制到 libs**文件夹中（不要将其作为外部 jar 导入），然后检查**android****库**和**android 依赖项**。刷新您的项目，然后清理您的项目。我相信你所面临的错误会消失。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-19T11:21:22.683

我也有同样的问题，我只是自动关闭构建并手动构建我的android项目并清理我的项目，为我解决了这个错误

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T10:23:59.460

换行

```
<activity android:name=".activities.UnlockActivity"> 
```

至

```
<activity android:name=".com.bvblogic.android.batterypower.activities.UnlockActivity
 "> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-26T19:51:38.903

清理项目对我有用。你可能会问我是什么导致了这个问题？大声笑我尝试将项目从 4.4 升级到 android 5，然后改变主意并尝试将其恢复为 kitkat，然后瞧！这个错误出现了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-16T10:57:26.223

您可能已经声明`String a = edt.getText().toString();`或 int 5/3，因此此类错误经常出现

因此，
在 onCreate 方法中声明它们错误将得到解决

# asp.net-mvc - 上传图像 MVC 始终为空

> ID：16102235
> 
> 赞同：1
> 
> 时间：2013-04-19T10:10:48.397
> 
> 标签：asp.net-mvc, file-upload, httppostedfilebase

大家好，我正在尝试上传一个简单的图像，但 HttpPostedFileBase 始终保持为空。这是我的代码，我不知道我做错了什么。

这是我在设计视图中的代码：

```
<fieldset>
    <legend>PictureModel</legend>

    <div class="editor-label">
        <%: Html.LabelFor(model => model.PrivacyTypeID) %>
    </div>
    <div class="editor-field">
        <%: Html.DropDownList("PrivacyTypeID", null, new { name = "PrivacyTypeID", title = "Please select privacy type.", id = "PrivacyTypeID" }) %>
        <%: Html.ValidationMessageFor(model => model.PrivacyTypeID) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.File1) %>
    </div>
    <div class="editor-field">
        **<input type="file" name="File1" />**
        <%: Html.ValidationMessageFor(model => model.File1) %>
    </div>        
    <div class="editor-label">
        <%: Html.LabelFor(model => model.Description) %>
    </div> 
```

这是我的控制器中的代码：

public ActionResult AddPicture(Guid id, PictureModel model, HttpPostedFileBase File1) { try {

```
 if (ModelState.IsValid)
            {
                try
                {
                    Guid albumid = id;

                    if (File1 != null)
                    {
                        var physicalPath = Path.Combine(Server.MapPath("~/Gallery"), System.IO.Path.GetFileName(File1.FileName));
                        File1.SaveAs(physicalPath);
                        PicturesBL pictures = new PicturesBL(); 
```

谁能告诉我是什么问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:35:33.247

> 谁能告诉我是什么问题？？

您显示的代码没有任何问题。我怀疑问题出在您使用 AJAX 调用而不是普通提交来提交此表单的事实。但如您所知，您无法使用 AJAX 上传文件。这就是您的代码无法正常工作的原因。如果您想使用 AJAX 上传文件，您可以使用一些客户端插件，例如[`Uploadify`](http://www.uploadify.com/)或[`Fine uploader`](http://fineuploader.com/). 这也可以在 HTML5 中使用新的[`File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications). 当然，这只适用于支持它的现代浏览器。如果您需要支持旧版浏览器，一些可用的客户端上传插件可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T15:32:27.190

这也让我发疯。几个小时后，我意识到，

```
@Scripts.Render("~/bundles/jquerymobile")
```

在 _Layout.cshtml 中导致了问题。注释掉后，上传工作。

有关详细信息，请参阅[http://forum.jquery.com/topic/jquery-mobile-seems-to-clobber-ability-to-upload-files-via-forms](http://forum.jquery.com/topic/jquery-mobile-seems-to-clobber-ability-to-upload-files-via-forms)。

添加

```
data_ajax="假"
```

我的表单属性解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T22:28:39.870

确保 model.File1 类型`HttpPostedFileBase` 不是`HttpPostedFile` 并且表单包含`enctype = "multipart/form-data"`属性。

# java - 尝试在 Netbeans 中将多个患者添加到我的患者表中

> ID：16102240
> 
> 赞同：0
> 
> 时间：2013-04-19T10:11:06.217
> 
> 标签：java, database, netbeans

我有一个增强的 for 循环，可以遍历我的患者数组。

在这个循环中，我有一个插入语句，用于插入患者的号码、姓名、地址和电话号码。

但是，当数组中有多个患者时，先前的患者将被覆盖到数据库中。有什么方法可以让我进入表格的下一行，这样我就不会重写所有以前的条目？

这是我正在使用的方法。

```
public void databaseSave( ArrayList <Patient> pList )
    {

    try
    {
        String name = "Shaun";
        String pass = "Shaun";
        String host = "jdbc:derby://localhost:1527/DentistDatabase";

        Connection con = DriverManager.getConnection(host, name, pass);

        Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);

        //Statement stmt = con.createStatement();

        System.out.println("Before the delete");

        String query = "DELETE "
                    +  "FROM SHAUN.PATIENT";

        System.out.println("After the delete");

        stmt.executeUpdate(query);

        String select = "SELECT * FROM SHAUN.PATIENT";

        ResultSet result = stmt.executeQuery(select);

        System.out.println("Before loop");

        for ( Patient p: pList )
        {

            patientInsertSQL = "Insert Into SHAUN.PATIENT VALUES (" + p.getPatientNum() + ", '"
            + p.getPatientName() + "', '" + p.getPatientAddress() + "', '"
            + p.getPatientPhone() + "')";

            System.out.println("In the loop!");

        }

        int res = stmt.executeUpdate(patientInsertSQL);

        System.out.println(res);

        stmt.close();
        result.close();
        con.commit();

        System.out.println("After Loop and close");

    }
    catch (SQLException err)
    {
        System.out.print(err.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:12:47.950

您必须在每次迭代时执行查询或使用**SQL Batch Insert**。

```
for ( Patient p: pList )
        {
            patientInsertSQL = "Insert Into SHAUN.PATIENT VALUES (" + p.getPatientNum() + ", '"+ p.getPatientName() + "', '" + p.getPatientAddress() + "', '"
            + p.getPatientPhone() + "')";
        int res = stmt.executeUpdate(patientInsertSQL);

} 
```

或**[SQL 批量插入](http://viralpatel.net/blogs/batch-insert-in-java-jdbc/)**：

```
for(Patient p:pList) {
PatientInsertSQL = "Insert into patient Values(x,y,z)";
stmnt.addBatch(query);
}
stmnt.executeBatch(); 
```

顺便说一句，为了避免[**SQL 注入**](http://en.wikipedia.org/wiki/SQL_injection)，请使用[**PreparedStatement**](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)而不是 Statement

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:13:44.507

该语句`int res = stmt.executeUpdate(patientInsertSQL);`应该在 for 循环中。

# android - 如何在标记上居中地图单击以显示整个信息窗口

> ID：16102243
> 
> 赞同：9
> 
> 时间：2013-04-19T10:11:13.253
> 
> 标签：android, maps, center, marker

好的，默认情况下，单击标记时，标记位于地图的中心。问题是，我有很高的 infoView，从布局中膨胀，它显示在地图边界之外。我能做什么，将针水平居中，并将其放置在地图中心下方，以使 infoWindow 可见。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-19T11:53:19.877

所以我最终得到了这个解决方案，它就像一个魅力。我在动画后打开 infoWindow。

```
int zoom = (int)map.getCameraPosition().zoom
CameraUpdate cu = CameraUpdateFactory.newLatLngZoom(new 
LatLng(arg0.getPosition().latitude + (double)90/Math.pow(2, zoom), 
arg0.getPosition().longitude), zoom);
map.animateCamera(cu,500,null); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-02T16:13:09.230

GoogleMaps 使用[Web Mercator](http://en.wikipedia.org/wiki/Web_Mercator)，它极大地扭曲了高纬度地区的数据，因为它本质上将我们的星球映射到一个正方形。多亏了这一点，您离赤道越远，您在一些简化计算中引入的误差就越大。

**相反，我们将让 Android 为我们处理这些；)**

在以下文本`mGoogleMap`中是您的`GoogleMap`. 我们将设置一个 `onMarkerClickListener`在其中打开的`InfoWindow` *（如在 onMarkerClickListener 的默认实现中）*，然后根据**GoogleMap 投影**重新计算相机中心位置，而不是以标记本身为中心。

```
mGoogleMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {
        @Override
        public boolean onMarkerClick(Marker marker) {
            // Calculate required horizontal shift for current screen density
            final int dX = getResources().getDimensionPixelSize(R.dimen.map_dx);
            // Calculate required vertical shift for current screen density
            final int dY = getResources().getDimensionPixelSize(R.dimen.map_dy);
            final Projection projection = mGoogleMap.getProjection();
            final Point markerPoint = projection.toScreenLocation(
                    marker.getPosition()
            );
            // Shift the point we will use to center the map
            markerPoint.offset(dX, dY);
            final LatLng newLatLng = projection.fromScreenLocation(markerPoint);
            // Buttery smooth camera swoop :)
            mGoogleMap.animateCamera(CameraUpdateFactory.newLatLng(newLatLng));
            // Show the info window (as the overloaded method would)
            marker.showInfoWindow();
            return true; // Consume the event since it was dealt with
        }
    }); 
```

`animateCamera()`将相机平滑地移动到计算的位置，您可以使用 跳转到新位置`moveCamera()`。

我们还需要将两个维度`map_dx`和`map_dy`, 添加到资源中：

```
<resources>

    <!-- Where to shift the map center when user taps on marker -->
    <dimen name="map_dx">10dp</dimen>
    <dimen name="map_dy">-100dp</dimen>

</resources> 
```

我们已经完成了，这种方法（与其他方法不同）在整个地图上都能很好地工作，甚至靠近地球两极。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:23:21.230

在 infoWindow 的适配器中试试这个：

```
@Override
public View getInfoWindow(Marker marker) {

View infoWindowLayout = (View) inflater.inflate(R.layout.my_info_window_layout, null);

int width = display.getWidth() (I put here a "*2/3" too to not fill the whole screen, but this is your choice);

LinearLayout infoWindowSubLayout = (LinearLayout) infoWindowLayout.findViewById(R.id.myInfoWindowSubLayout);

android.widget.LinearLayout.LayoutParams lp = new android.widget.LinearLayout.LayoutParams(width, LayoutParams.MATCH_PARENT);

infoWindowSubLayout.setLayoutParams(lp);

return infoWindowLayout;
} 
```

在我的例子中，这个布局文件是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myInfoWindowLayout"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/..."
android:orientation="horizontal"
... >

<LinearLayout
    android:id="@+id/myInfoWindowSubLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    ...>

    <LinearLayout
        android:layout_width="0px"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:orientation="vertical" >

        CONTENT HERE
    </LinearLayout>

   CONTENT HERE TOO
</LinearLayout>

</LinearLayout> 
```

好吧，这对我有用，请随时重写

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-14T07:32:21.753

我尝试了以下完美的解决方案

```
mMap.setOnMarkerClickListener(new OnMarkerClickListener() 
        {
            @Override
            public boolean onMarkerClick(Marker marker)
            {
                int yMatrix = 200, xMatrix =40;

                DisplayMetrics metrics1 = new DisplayMetrics();
                getWindowManager().getDefaultDisplay().getMetrics(metrics1);
                switch(metrics1.densityDpi)
                {
                case DisplayMetrics.DENSITY_LOW:
                    yMatrix = 80;
                    xMatrix = 20;
                    break;
                case DisplayMetrics.DENSITY_MEDIUM:
                    yMatrix = 100;
                    xMatrix = 25;
                    break;
                case DisplayMetrics.DENSITY_HIGH:
                    yMatrix = 150;
                    xMatrix = 30;
                    break;
                case DisplayMetrics.DENSITY_XHIGH:
                    yMatrix = 200;
                    xMatrix = 40;
                    break;
                case DisplayMetrics.DENSITY_XXHIGH:
                    yMatrix = 200;
                    xMatrix = 50;
                    break;
                }

                Projection projection = mMap.getProjection();
                LatLng latLng = marker.getPosition();
                Point point = projection.toScreenLocation(latLng);
                Point point2 = new Point(point.x+xMatrix,point.y-yMatrix);

                LatLng point3 = projection.fromScreenLocation(point2);
                CameraUpdate zoom1 = CameraUpdateFactory.newLatLng(point3);
                mMap.animateCamera(zoom1);
                marker.showInfoWindow();
                return true;
            }
        }); 
```

# php - Chrome浏览器 - ajax响应中不需要的数据排序

> ID：16102247
> 
> 赞同：1
> 
> 时间：2013-04-19T10:11:28.680
> 
> 标签：php, google-chrome

我从 AJAX 处理程序代码 (PHP) 中使用 json_encode 返回一组横幅 -

```
echo json_encode(array("bannersData" =>$bannersData)); 
```

回显时，数据的顺序到此为止是正确的。

但是，在 AJAX 响应处理代码（javascript 部分）中，我在 chrome 版本 26.0.1410.64 m 中对返回的对象进行了不同的排序（似乎按横幅 ID 排序）。我不确定我们是否有任何选项可以强制保持原始排序顺序不变。

*这是代码 -*

```
$.ajax({
type: "POST",
async: false,
url: posturl,
data:postdata,
dataType: "json",
success: function(msg){

    if($.isEmptyObject(msg.bannersData))
    {
        bannerOptionsHtml = "No Banner available";  
    }
    else
    {
        /*getting unexpectedly sorted result here*/

    }

}); 
```

**示例数据-**

*输入*

当我这样做时`echo json_encode()`，以下是数据的原始顺序 -

```
'fggd'             [12658]
banner 2           [12653]
Copy 2 of banner 1 [12655]
Copy 3 of banner 1 [12656]
Copy 4 of banner 1 [12657]
sdfds = 'xyz'      [12654] 
```

*输出*

但是，以下是我在 AJAX 响应中得到的 -

*在 chrome 中（根据横幅 ID 进行排序，似乎 - 下面的 RHS 列是横幅 ID）*

```
Test                [12652]
banner 2            [12653]
sdfds = 'xyz'       [12654]
Copy 2 of banner 1  [12655]
Copy 3 of banner 1  [12656]
Copy 4 of banner 1  [12657]
'fggd'              [12658] 
```

*在 Firefox 中（如预期的那样）*

```
'fggd'             [12658]
banner 2           [12653]
Copy 2 of banner 1 [12655]
Copy 3 of banner 1 [12656]
Copy 4 of banner 1 [12657]
sdfds = 'xyz'      [12654] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:24:50.750

您是否尝试将 PHP 数组中的数字键转换为字符串？似乎 Chrome 对 int 键数组进行排序（与歌剧相同的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:27:02.653

你能提供你实际*拥有*的 JSON 对象的格式吗？我敢打赌 1 英镑`bannersData`实际上是作为一个数组而不是作为一个对象传输的。

浏览器遵循一个标准来从 JSON 字符串重新创建对象，并且该标准命令浏览器保持键值顺序不变。但是，**数组不是这种情况**，并且绝对没有标准。因此，浏览器对此有所不同。

这不是一个模糊的事实：[如何阻止 Chrome 和 Opera 通过 Index ASC 对 JSON 对象进行排序？](https://stackoverflow.com/questions/5020699/how-do-you-stop-chrome-and-opera-sorting-json-objects-by-index-asc)是您问题的副本（我可能会这样投票）。

两种解决方案：将您的数组从 PHP 转换为具有键值对的对象（即使键是数字！）以保持顺序，或者了解不会在所有浏览器中保持顺序。第一个选项不需要更改 JS 代码，除非您使用整数迭代循环 ( `for (var i = 0; i < array.length; i++) {`，此时您将需要迭代对象的键而不是对象本身。

# forms - 以 symfony 形式向标签标签添加 ID

> ID：16102248
> 
> 赞同：1
> 
> 时间：2013-04-19T10:11:29.333
> 
> 标签：forms, symfony

我正在 symfony2 中构建一个表单，我需要一个表单元素的标签来拥有一个 ID，这样我就可以使用 javascript 隐藏它。

这是我构建标签的代码：

```
 $builder->add(
        'campaign',
        'text',
        array('label' => 'Name of campaign / product being promoted')
    ); 
```

是否可以将参数传递给将在标签标签中呈现 ID 的数组？

如果不是，则标签和表单元素包含在 div 标记中。是否可以将ID添加到div？

目前呈现如下：

```
<div>
<label for="AddedValue_revenue_online">Total of added value revenue allocated to         online</label>

<input type="text" id="AddedValue_revenue_online" name="AddedValue[revenue_online]" required="required" value="" style="display: inline-block;">

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:42:39.883

您可以指定`label_attr`可以将属性数组传递给的选项。

在您的示例中：

```
$builder->add(
    'campaign',
    'text',
    array('label' => 'Name of campaign / product being promoted',
          'label_attr' => array('id' => 'someID')))
) 
```

# javascript - 将两个变量传递给一个 JavaScript 函数

> ID：16102249
> 
> 赞同：1
> 
> 时间：2013-04-19T10:11:36.453
> 
> 标签：javascript

如果我传递一个变量，我已经完成了，`id`但现在我想`name`在单击图像时传递给同一个函数。这是我的代码：

```
 for (var i = 0; i <friend_data.length; i++) {
                        results += '<div class = "clicker" id = "'+friend_data[i].id+'" onclick="javascript:testId(this.id,'+ friend_data[i].name+')"><img src="https://graph.facebook.com/' + friend_data[i].id + '/picture" height="30" width="30">' + friend_data[i].name + '</div>';
                    } 
```

和

```
function testId(id, friend_data[id].name ){
    alert(id);
    alert(friend_data[i].name);     
} 
```

`alert(friend_data[i].name);`不显示，因为它是错误的。请帮我纠正它。请看看`onclick`它是否是传递变量的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:13:26.960

尝试这个

```
function testId(id, name ){
    alert(id);
    alert(name);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T10:14:17.090

将 for 循环更改为此

```
for (var i = 0; i <friend_data.length; i++) {
results += '<div class = "clicker" id = "'+friend_data[i].id+'" onclick="javascript:testId(this.id,'+friend_data[i].name+')"><img src="https://graph.facebook.com/' + friend_data[i].id + '/picture" height="30" width="30">' + friend_data[i].name + '</div>';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T10:14:37.193

您忘记添加`+`代码`'+friend_data[i].name+'`：

```
for (var i = 0; i <friend_data.length; i++) {
    results += '<div class = "clicker" id = "'+friend_data[i].id+'" onclick="javascript:testId(this.id, '+friend_data[i].name+')"><img src="https://graph.facebook.com/' + friend_data[i].id + '/picture" height="30" width="30">' + friend_data[i].name + '</div>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:15:08.183

```
function testId(id, name ){
    alert(id);
    alert(name);
} 
```

然后调用它：`testId(friend_data[i].id, friend_data[i].name)`

或者

```
function testId(friend){
    alert(friend.id);
    alert(friend.name);
} 
```

然后使用以下命令调用它：`testId(friend_data[i])`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T10:14:10.847

您的功能应定义为：

```
function testId(id, name) {
    alert(id);
    alert(name);
} 
```

`name``friend_data[i].name`当函数被调用时，将取 的值。

# android - 无法在 Android ChromeTestShell 中写入 Sdcard

> ID：16102262
> 
> 赞同：0
> 
> 时间：2013-04-19T10:12:30.700
> 
> 标签：android, file-io, sd-card

我已经使用网站上的说明构建了 Android Chrome 测试外壳（v27.0.1453.49）。我需要将一些数据从 chrome 代码转储到 SDCARD 中的文件中，但每次都点击 errno=13。我已经尝试使用所有路径 /mnt/sdcard/、/sdcard、/storage/XX

我的清单已经包含以下内容。

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我的目标设备是 JellyBean 4.1.2。

有什么建议吗？

# javascript - 在 Javascript 中查找多维数组的索引

> ID：16102263
> 
> 赞同：11
> 
> 时间：2013-04-19T10:12:33.067
> 
> 标签：javascript, arrays, multidimensional-array

我在 JavaScript 中创建了一个多维数组，我想找到特定值的确切索引。该值将是用户输入。

```
var array = [];
var k = 0;
for (var i = 0; i < 10; i++) {
  array[i] = [];
  for (var j = 0; j < 100; j++) {
    k = k + 1
    array[i].push(k);
  }
}
var index = array.indexOf(`**"What to insert here???"**`); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-19T10:27:19.647

## [JSFiddle](https://jsfiddle.net/wao20/Lct1de56/)

```
/**
 * Index of Multidimensional Array
 * @param arr {!Array} - the input array
 * @param k {object} - the value to search
 * @return {Array} 
 */
function getIndexOfK(arr, k) {
  for (var i = 0; i < arr.length; i++) {
    var index = arr[i].indexOf(k);
    if (index > -1) {
      return [i, index];
    }
  }
}

// Generate Sample Data
var k = 0;
var array = [];
for (var i = 0; i < 10; i++) {
  array[i] = [];
  for (var j = 0; j < 100; j++) {
    k = k + 1;
    array[i].push(k);
  }
}
var needle = 130;
var result = getIndexOfK(array, needle);
console.log('The value #' + needle + ' is located at array[' + result[0] + '][' + result[1] + '].');
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:49:40.503

这个例子似乎也适用于 IRREGULAR 多维数组：

```
function findIndex(valueToSearch, theArray, currentIndex) {
    if (currentIndex == undefined) currentIndex = '';
        if(Array.isArray(theArray)) {
            for (var i = 0; i < theArray.length; i++) {
                if(Array.isArray(theArray[i])) {
                    newIndex = findIndex(valueToSearch, theArray[i], currentIndex + i + ',');
                    if (newIndex) return newIndex;
               } else if (theArray[i] == valueToSearch) {
                   return currentIndex + i;
               }
            }
    } else if (theArray == valueToSearch) {
        return currentIndex + i;
    }
    return false;
}

var a = new Array();
a[0] = new Array(1, 2, 3, 4, 5);
a[1] = 'ciao';
a[2] = new Array(new Array(6,7),new Array(8,9),10);

var specificIndex = findIndex('10', a); 
```

我写得很快，所以请大家改进这个功能！

ps 现在该函数返回一个字符串值，所有索引用逗号分隔，您可以简单地对其进行编辑以返回一个对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:16:56.803

在[jsfiddle 上](http://jsfiddle.net/Xotic750/9xh8j/)

```
function indexOf2d(arr, val) {
    var index = [-1, -1];

    if (!Array.isArray(arr)) {
        return index;
    }

    arr.some(function (sub, posX) {
        if (!Array.isArray(sub)) {
            return false;
        }

        var posY = sub.indexOf(val);

        if (posY !== -1) {
            index[0] = posX;
            index[1] = posY;
            return true;
        }

        return false;
    });

    return index;
}

console.log(indexOf2d(array, 50)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-05T16:06:52.060

我的代码确实像 MS Excel 中的 PROCV ......并且仅在第一列中识别索引搜索。也许可以帮助您（或其他人）。

```
var convertToRoman = function (valueLimitTen) {   
  var convertTable = [  [1, "I"],
                        [2, "II"],
                        [3, "III"],
                        [4, "IV"],
                        [5, "V"],
                        [6, "VI"],
                        [7, "VII"],
                        [8, "VIII"],
                        [9, "IV"],
                        [10, "X"],
                      ];

  var myIndex;  
  for(var i in convertTable){
    if(convertTable[i][0] == valueLimitTen){
      myIndex = i;      
      return convertTable[i][1];      
    }  
  }  
}

console.log(convertToRoman(2)); //Result II
console.log(convertToRoman(10)); //Result X 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-16T12:23:54.657

ES6 使这变得相当容易。

```
function findIndexOfNestedArray(nestedArray, searchArray) {
  return searchArray.findIndex(item => {
    return item.length === nestedArray.length
    && item.every((a, i) => a === nestedArray[i])
  })
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-20T06:22:16.023

**复制并粘贴此代码**

**将**< **masterArray** > 替换为您的主数组（嵌套所有其他数组的那个）

***代码：***

```
//Remove Duplicates
  let stringArray = masterArray.map(item=>item.join('')); // transform all nested arrays into strings (for comparation)
  let nonDuplicated = [] // temporary array to compare data
  stringArray.forEach(nestedArrayString=>{
    let reapeatedIndex = nonDuplicated.indexOf(nestedArrayString); // this is the comparator
    if(reapeatedIndex>0){
      indexToRemove = stringArray.indexOf(nestedArrayString);
      console.log('---indexToRemove',indexToRemove)
      stringArray.splice(indexToRemove,1);
      masterArray.splice(indexToRemove,1);
    }else{nonDuplicated.push(nestedArrayString)}
  });
  //
  let lastString = stringArray.filter(foundString=>foundString===stringArray[stringArray.length-1])
  if(lastString.length>1){
    stringArray.splice(stringArray.length-1,1)
    masterArray.splice(masterArray.length-1,1)
  };
    console.log('>> masterArray',masterArray) 
```

我一直在寻找一种解决方案来**删除数组中的数组**，并提出了这个丑陋但富有成效 **的解决方案：使用数组数组（两次）**，但没有进一步或更深的嵌套。

此代码会将嵌套数组转换为字符串 => 将一个一个记录到一个临时数组中 => 每次记录时比较当前记录的字符串是否已经在数组中。如果重复，则从**masterArray**（您的）和 stringArray中删除元素

# c# - 修饰符'static'对此项目无效/c#中的静态接口错误

> ID：16102265
> 
> 赞同：0
> 
> 时间：2013-04-19T10:12:35.817
> 
> 标签：c#

我们如何在接口中实现静态方法...？

```
public interface ICache
{
  //Get item from cache
  static object Get(string pName);

  //Check an item exist in cache
  static bool Contains(string pName); 

  //Add an item to cache
  static void Add(string pName, object pValue);

  //Remove an item from cache
  static void Remove(string pName);
} 
```

上述界面抛出错误：*修饰符'static'对此项无效*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:13:17.303

这是绝对正确的。您不能在接口中指定静态成员。它一定要是：

```
public interface ICache
{
  //Get item from cache
  object Get(string pName);

  //Check an item exist in cache
  bool Contains(string pName);

  //Add an item to cache
  void Add(string pName, object pValue);

  //Remove an item from cache
  void Remove(string pName);
} 
```

（顺便说一句，您的注释应该是[XML 文档注释](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)- 这将使它们更有用。我在成员之间添加了一些空格以使代码更易于阅读。您还应该考虑使接口通用。）

你为什么一开始就*试图*让成员保持静态？你希望达到什么目标？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T10:14:02.477

你不能这样做。它应该是

```
 public interface ICache
    {
      //Get item from cache
      object Get(string pName);
      //Check an item exist in cache
      bool Contains(string pName);
      //Add an item to cache
      void Add(string pName, object pValue);
      //Remove an item from cache
      void Remove(string pName);
    } 
```

查看[为什么 C# 不允许静态方法实现接口？](https://stackoverflow.com/questions/259026/why-doesnt-c-sharp-allow-static-methods-to-implement-an-interface)

*[Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert)*还写了一篇很酷的文章系列，名为

*   *对类型参数调用静态方法是非法*的 , [`part one`](http://blogs.msdn.com/b/ericlippert/archive/2007/06/14/calling-static-methods-on-type-parameters-is-illegal-part-one.aspx),[`part two`](http://blogs.msdn.com/b/ericlippert/archive/2007/06/18/calling-static-methods-on-type-parameters-is-illegal-part-two.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:14:59.233

不，您不能...静态方法/变量指的是类本身而不是该类的实例，并且由于接口的目的是由类实现，因此您不能在接口中使用静态方法...它没有没道理

# jquery-mobile - 在 Jquery mobile 中修复内容高度（在 ipad 中工作）后，状态栏上的点击顶部在 iPhone 中不起作用

> ID：16102268
> 
> 赞同：0
> 
> 时间：2013-04-19T10:12:42.363
> 
> 标签：jquery-mobile

我在 html 中有一个页面，我将内容高度固定为固定

```
<div id='contentId' class='content' data-role='content' style='height:300px'> </div> 
```

由于这个点击到顶部功能（点击状态栏将列表视图滚动到顶部）停止工作，但当我在 iPad 中测试同一页面时它可以完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:28:38.877

在网络上搜索了很多，没有成功，最后在 iOS 端尝试了一些东西，这是问题所在 - 网络视图已经是一个滚动视图，并且在页面中我将内容的高度固定为固定，所以这是第二个滚动视图

这就是我所做的 - 在滚动视图委托方法“shouldStartLoadWithRequest”中添加了这一行

```
((UIScrollView *)[[self.webView subviews] objectAtIndex:0]).scrollsToTop = NO; 
```

繁荣它工作:)

注意：此问题仅适用于 iPhone 而不是 iPad，其次我正在使用 -webkit-overflow-scrolling:touch; 作为正文中的 css，它的作用就像魅力

# php - 字符串表示

> ID：16102272
> 
> 赞同：0
> 
> 时间：2013-04-19T10:12:50.913
> 
> 标签：php, string, explode

谁能告诉我这是为什么

```
$pole = explode("\n", file_get_contents('obce.txt'));

echo $pole[1];  //in obce.txt it is Test 
```

不同于

```
$pole[1]="Test";
echo $pole[1]; 
```

对我来说，这似乎是同一件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:17:48.867

请记住，在 Windows 中，行尾字符是“\r\n”。

尝试：

```
$pole = explode("\r\n", file_get_contents('obce.txt')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:21:08.223

我猜第一行`obce.txt`只有一个字符串`Test`。如果是这种情况，那么当您读取文件并分解时，数组中将只有一个元素，`pole`并且要打印它，您需要执行以下操作：

```
echo $pole[0]; 
```

# asp.net - “无法加载指定的元数据资源”

> ID：16102273
> 
> 赞同：3
> 
> 时间：2013-04-19T10:12:55.327
> 
> 标签：asp.net, sql-server, database, entity-framework

我收到错误“ `Unable to load the specified metadata resource`”。我是 asp.net 的新手，正在学习本教程：
[http ://www.asp.net/web-forms/tutorials/tailspin-spyworks/tailspin-spyworks-part-2](http://www.asp.net/web-forms/tutorials/tailspin-spyworks/tailspin-spyworks-part-2)

我创建了一个实体数据源控件，然后使用提供的数据库创建了一个 ADO.NET 实体数据条目。然后当我尝试使用控件时，我得到了错误。

我读到它可能是连接字符串，所以这是我的。我花了几个小时试图修复它，有人可以帮忙吗？

这是我的连接字符串：

```
<add name="Entities" connectionString=" metadata=res://*/Data_Access.EDM_Commerce.csdl| res://*/Data_Access.EDM_Commerce.ssdl| res://*/Data_Access.EDM_Commerce.msl; provider=System.Data.SqlClient;provider connection string='data source=OWEN;initial catalog=Commerce.mdf;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework';" providerName="System.Data.EntityClient" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:52:22.210

就我个人而言，当我遇到这个问题时，这意味着应用程序无法加载包含数据库模型的 EDMX 文件。

通常这是因为元数据参数在您的配置文件中不太正确：

`metadata=res://*/Data_Access.EDM_Commerce.csdl| res://*/Data_Access.EDM_Commerce.ssdl| res://*/Data_Access.EDM_Commerce.msl;`

另一个原因是您修改了*错误*的配置文件，当您的解决方案中有多个项目时可能会发生这种情况。

我发现这篇[优秀的博客文章](http://blogs.teamb.com/craigstuntz/2010/08/13/38628/)会为您指明正确的方向。

# python - python spyne：摆脱方法定义中的 ComplexTypes

> ID：16102275
> 
> 赞同：1
> 
> 时间：2013-04-19T10:13:01.627
> 
> 标签：python, soap, spyne

我用 spyne 构建了一个简单的服务，但有一个问题 - 它将方法输入参数包装成复杂类型 - ：

```
class JiraAdapter(ServiceBase):

    @srpc(Unicode, Unicode, Unicode, _returns=String)
    def CreateJiraIssueWithBase64Attachment(summary, base64attachment, attachment_filename):
        status = Status
        try:
            newkey = jira_client.createWithBase64Attachment(summary, base64attachment.decode('string-escape'), attachment_filename)
            status.Code = StatusCodes.IssueCreated
            status.Message = unicode(newkey)
        except Exception as e:
            status.Code = StatusCodes.FailedToCreateIssue
            status.Message = u'Internal Exception: %s' % e.message
        return status.__str__()

    application = Application([JiraAdapter],
    tns='JiraAdapter',
    in_protocol=Soap11(),
    out_protocol=Soap11()
) 
```

产生以下 WSDL（仅处理相对位）：

```
<wsdl:portType name="Application">
<wsdl:operation name="CreateJiraIssueWithBase64Attachment" parameterOrder="CreateJiraIssueWithBase64Attachment">
<wsdl:input name="CreateJiraIssueWithBase64Attachment" message="tns:CreateJiraIssueWithBase64Attachment"/>
<wsdl:output name="CreateJiraIssueWithBase64AttachmentResponse" message="tns:CreateJiraIssueWithBase64AttachmentResponse"/>
</wsdl:operation>
</wsdl:portType>

    ....

<xs:complexType name="CreateJiraIssueWithBase64Attachment">
<xs:sequence>
<xs:element name="summary" type="xs:string" minOccurs="0" nillable="true"/>
<xs:element name="base64attachment" type="xs:string" minOccurs="0" nillable="true"/>
<xs:element name="attachment_filename" type="xs:string" minOccurs="0" nillable="true"/>
</xs:sequence>
</xs:complexType> 
```

有没有办法让 spyne 以只需要一系列参数的方式构建 wsdl？客户端应用程序是用 VBA 编写的，上帝只知道如何用它提交复杂的类型参数。

# r - 如何预处理数据以在 R 中生成条形图

> ID：16102276
> 
> 赞同：1
> 
> 时间：2013-04-19T10:13:03.723
> 
> 标签：r, plot

我想从列表中的值生成（分组和堆叠）条形图：

```
dog = list(a=100, c=30, t=140, g=102)
cat = list(a=99,  c=31, t=150, g=123)
pig = list(a=100, c=12, t=90,  g=144) 
```

在第一个条形图中，数据应按字母 (ACTG) 分组，每只动物都应有自己的条形图。

第二个条形图应该是一个堆积图，显示每只动物`a`、`c`和`t`的百分比`g`。

在`help(barplot)`我读到的时候，我需要生成一个类似矩阵的数据结构。将数据放入 的首选方法是`matrix`什么？

在我还看到的一个示例中，人们使用`?tables`其中已经包含名称的那个。表格和矩阵之间有什么区别，如何从我的数据生成表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:31:00.113

这是将数据组合成矩阵的一种方法：

```
temp <- do.call(cbind, lapply(list(dog = dog, cat = cat, pig = pig), unlist))
temp
#   dog cat pig
# a 100  99 100
# c  30  31  12
# t 140 150  90
# g 102 123 144
str(temp)
#  num [1:4, 1:3] 100 30 140 102 99 31 150 123 100 12 ...
#  - attr(*, "dimnames")=List of 2
#   ..$ : chr [1:4] "a" "c" "t" "g"
#   ..$ : chr [1:3] "dog" "cat" "pig"
is.matrix(temp)
# [1] TRUE 
```

如果您希望动物作为行，请使用`rbind`或转置 ( ) 数据。`t`

* * *

从那里开始，绘图很简单：

```
# Grouped by ACGT, each animal own bar
barplot(t(temp), beside = TRUE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/G8tOS.png)

```
# Stacked bar plot
barplot(prop.table(temp, margin = 2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/gHepp.png)

添加图例、标题等的练习将留给读者:)

* * *

`table` *是*a `matrix`，但我认为这不是您在此处查找的数据。通常，该`table`函数用于将频率制表。

这是一个基本示例：

```
set.seed(1)
mydf <- data.frame(A = sample(letters[1:4], 20, replace = TRUE),
           B = sample(c("red", "green", "blue"), 20, replace = TRUE))
mytable <- table(mydf)
mytable
#    B
# A   blue green red
#   a    0     3   1
#   b    3     0   2
#   c    2     3   0
#   d    1     2   3
is.matrix(mytable)
# [1] TRUE 
```

该`barplot`函数将直接接受这个作为输入。

* * *

最后，一种将数据转换为“长”的快速方法`data.frame`（这很有用，正如@mOnhawk 所证明的，不仅可以使用 绘制`ggplot2`，还可以使用 绘制`lattice`）是使用以下内容：

```
temp <- stack(data.frame(dog = dog, cat = cat, pig = pig))
temp1 <- cbind(temp[-2], do.call(rbind, strsplit(as.character(temp$ind), "\\."))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:26:50.407

您可以创建一个`matrix`：

```
data <- matrix(c(dog, cat, pig), nrow=3, ncol=4, dimnames=list(c("dog", "cat", "pig"), c("A", "C", "T", "G")))
data

>   dog cat pig
> A 100 99  100
> C 30  31  12 
> T 140 150 90 
> G 102 123 144 
```

阴谋：

```
barplot(data) 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/P37Vd.png)

```
x <- data.frame(
     animals=c(rep("dog",4),rep("cat",4),rep("pig",4)),
     gen=c(rep(c("A","C","T","G"),3)),
     value=c(100,30,140,102,99,31,150,123,100,12,90,144))

>    animals gen value
> 1      dog   A   100
> 2      dog   C    30
> 3      dog   T   140
> 4      dog   G   102
> 5      cat   A    99
> 6      cat   C    31
> 7      cat   T   150
> 8      cat   G   123
> 9      pig   A   100
> 10     pig   C    12
> 11     pig   T    90
> 12     pig   G   144 
```

在...的帮助下：

```
library(ggplot2)
library(reshape2)

ggplot(mx, aes(x=animals,y=value)) + 
     geom_bar(stat="identity") + 
     facet_grid(~gen) 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/sZ6aM.png)

# ios6 - 如何在通行证的锁定屏幕上显示图像

> ID：16102277
> 
> 赞同：1
> 
> 时间：2013-04-19T10:13:08.600
> 
> 标签：ios6, passbook

在锁定屏幕上，我可以显示文字。图像呢？如何展示它？我尝试“ `relevantText": "CamMob\uD83D\uDE1C\uD83D\uDE4B`”，但只显示文本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:18:41.720

您无法显示常规图像，但您可以将表情符号字符编码到任何通行证字段中，并且 Passbook 将显示它们。

要包含表情符号，您需要找到所需字符的 utf-8 表示形式。

您可以通过右键单击角色查看器中的角色并复制角色信息来获取此信息。

![字符查看器](https://i.stack.imgur.com/SbUJv.png) ![字符查看器表情符号](https://i.stack.imgur.com/xOxHj.png)

另一种快速简便的方法是使用包含以下内容的 PHP 文件：

```
<?php
echo json_encode(array("relevantText" => "")); 
```

*注意：以上内容只会在 Mac 上的 Safari 中看起来很酷！如果你看到很多，不要婊子？？？？*

只需确保您的 php 文件使用 utf-8 编码保存即可。

# c# - 为什么我们在实现 iNotifyPropertyChanged 时要检查 PropertyChanged 事件的空值？

> ID：16102280
> 
> 赞同：5
> 
> 时间：2013-04-19T10:13:13.210
> 
> 标签：c#, mvvm

我正在详细阅读 iNotifyPropertyChanged。

有人可以澄清为什么我们需要检查 `PropertyChanged !=null`吗？

为什么事件会为空？或者换句话说，为什么还要检查它是否为空？唯一`NotifyPropertyChanged`被调用的时间是何时`PropertyChanged`被提升（所以它不能为空），不是吗。谁/什么可以使它无效？

```
 public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this,new PropertyChangedEventArgs(info));
        }

    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T10:16:51.840

如果没有人订阅该事件，它将为空。因此，如果您不这样做，您将在运行时收到有关事件的 NullReferenceException。

对于您正在谈论的界面，它也可能会在订阅者有机会订阅之前发生引发动作，尽管他们即将订阅，因为 INotifyPropertyChanged 接口非常健谈。

# php - PHP MySQL将数据导出到CSV输出问题

> ID：16102281
> 
> 赞同：0
> 
> 时间：2013-04-19T10:13:15.287
> 
> 标签：php, mysql, csv

我正在使用此 PHP 代码将数据从 MySQL 表导出到 CSV 文件

```
$file="jobs";
    $sql="SELECT * FROM jobs";
    $rs=mysql_query($sql,$conn) or die(mysql_error());
    $csv_output.=implode(";",array_keys($result))."\n";
    do
    {
        // notice how there is no flag needed!
        // also, you don't need to call 'array_values' when imploding
        $csv_output.=implode(";",$result)."\n";
    }
    while( $result = mysql_fetch_assoc($rs));

    $filename = $file."_".date("Y-m-d_H-i",time());
    header("Content-type: text/csv");
    header("Content-disposition: csv" . date("Y-m-d") . ".csv");
    header( "Content-disposition: filename=".$filename.".csv");
    print $csv_output;
    exit(); 
```

但我得到这个输出：

```
sequence;customer;description;status;jobreceived;timebookedfor;bookedfor;site_contact;site_address;invoice_contact;invoice_address;quotedprice;cleardowndetails;industry;supplier_seq;notes;mo_number;invoice_postcode;file1;file2;file3;file4;file5;datejobadded;deleted;worksorder_seq;site_postcode 1;1;remedial works from original job.;3;2013-03-08;ASAP;2013-03-08;;48 Poole House, Godman Road, Chadwell Road RM16 4TQ ... ;;;;Attend site 13/03: Investigate and identify what immersion heater as required. *diagnose that only elements required Re-attending 14/03 PM to attend, supply and fit new element. 898001 £9.83 895003 £39.57 820009 £7.41 895002 £29.80;1;4;
RGK attending 14/03 pm to fit
Attend site 13/03:
Investigate and identify what immersion heater as required.
*diagnose that only elements required
Re-attending 14/03 PM
to attend, supply and fit new element.

;MO82058G12;;;;;;;0000-00-00;;;RM16 4TQ 2;1;Supply and fit toilet cistern;6;2013-03-20;TBC;2013-03-22;Angela Bone - 07980 006325;47 Keir Hardie House, Milford Road ;;;;Attend site supplied and fitted new toilet cistern.;1;4;
Job completed
;No MO code;;;;;;;0000-00-00;;;RM16 2QP 3;1;Recommendation from previous visit ;5;2013-03-08;ASAP;2013-03-08;01708853220 ;49 Dunkellin Way, South Ockendon, Essex ;;;;tenant now has water *recommend 2x new gate valves required and replace section of pipe work;1;;
space heating attending. 08/03/13 asap

**********************************recomendation ************************

If the problem persists - recommend 2x new gate valves required and replace section of pipe work RB 13.33 12/03

;;;;;;;;0000-00-00;yes;;RM15 5ES 5;1;No Electric to property;6;2013-03-08;ASAP;2013-03-08;;82 Nicholas Close, South Ockendon, Essex RM15 6NJ;; 
```

任何想法为什么它不保存 CSV 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:31:58.020

```
$file="jobs";

$filename = $file."_".date("Y-m-d_H-i",time());
header("Content-type: text/csv");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header( "Content-disposition: filename=".$filename.".csv");

$fp = fopen('php://output', 'w');

$sql = "SELECT * FROM jobs";
$rs = mysql_query($sql,$conn) 
    or die(mysql_error());
while( $result = mysql_fetch_assoc($rs))
{
    fputcsv($fp, $result, ';');
}

fclose($fp);
exit(); 
```

# ios - 在 iPhoneSDK 中为 Subscription 创建多少个 Product-id

> ID：16102282
> 
> 赞同：3
> 
> 时间：2013-04-19T10:13:16.993
> 
> 标签：ios, subscription, identifier, ios5, newsstand-kit

我已经**在应用程序中实现了应用程序内购买**，并且它可以正常工作`Content Hosting at Apple`。`Server Model`我的应用程序中有逻辑来检查用户是否已经下载了内容，如果没有使用 NKIssue 下载它，因为它是`Newsstand`应用程序。

**这是我的订阅要求：** 每月出版一期杂志。我想要的是用户订阅 3、6、12 个月，在此期间，他们每个月都会收到一期杂志。如果他们想购买任何以前的问题，他们将不得不购买这些作为独立的应用内购买。

在这里，我在创建产品 ID 以包含此功能时对订阅感到困惑。我在 IAP 中为 n 个产品创建了 n 个产品 ID，但在订阅中会发生什么情况。我对处理订阅部分有点困惑；我是否还需要创建 n 个产品 ID 来支持订阅。

**例如，**如果一年有 12 种杂志，我是否必须为 3、6、12 个月的订阅创建 12 个单独的产品 ID（总计：36 个产品 ID）**或**为每个持续时间创建一个产品 ID，无关紧要产品会起作用吗？（总共：3 个产品 ID）。

**如同，**

*   **3 个月：** com.mycompanyname.pdfproduct.3months
*   **6 个月：** com.mycompanyname.pdfproduct.6months
*   **12 个月：** com.mycompanyname.pdfproduct.12months

* * *

**更新 1：**

如果用户已经订阅了 6 个月并且在不知不觉中尝试订阅 3 个月的订阅，哪种方法是最好的检查方法？那么，在这种情况下，应用程序将允许订阅还是需要限制用户？

应用程序将如何检查此持续时间/时间跨度或已经有任何方法/方法？

* * *

**参考教程，**如果这对某人有帮助：

[iOS 6 教程中的应用内购买介绍](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

[使用 IBAction / 按钮进行应用内购买](https://stackoverflow.com/questions/14168407/in-app-purchase-with-an-ibaction-button)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:42:15.090

在 iTunesConnect 中，您必须创建一个订阅系列。以某种方式命名它。然后为这个家庭添加 3 个不同的持续时间：3、6 和 12 个月，并像你上面写的那样给他们 ID：com.myCompany.product.subscription.3months/6months/12months

# mysql - 使用 LEFT JOIN 的 MYSQL 更新

> ID：16102288
> 
> 赞同：0
> 
> 时间：2013-04-19T10:13:28.907
> 
> 标签：mysql, database, sql-update, rows-affected

问题;

在下面的 MySQL 查询中，产生 ConnectionID 列表的内部查询返回 34 个 ConnectionID。然后当我将这两个查询作为更新一起运行时，查询结果表明只有 14 行受到影响。我对 UPDATE 函数的理解是否不正确？

笔记;

我正在尝试更新我的数据库，以便对于 Connections.PartnerID 等于 Partners.PartnerID 的任何给定连接，Partners 表中的 DefaultUserType 等于连接表中的 RoleID。

询问;

```
 UPDATE Connections
    LEFT JOIN Partners
        ON Connections.PartnerID = Partners.PartnerID
SET Connections.RoleID = Partners.DefaultUserType
WHERE
    ConnectionID IN(
        SELECT
            sub_qu_1.ConnectionID
        FROM
            (
                SELECT DISTINCT
                    Connections.ConnectionID,
                    Connections.MemberID,
                    Connections.FriendID,
                    Connections.RoleID,
                    Partners.DefaultUserType,
                    IF(Connections.RoleID = Partners.DefaultUserType,0,1)AS not_equal
                FROM
                    Connections
                LEFT JOIN Contacts ON Connections.FriendID = Contacts.EEID
                LEFT JOIN Partners ON Contacts.PartnerID = Partners.PartnerID
                WHERE
                    Partners.DefaultUserType NOT IN (28,29,30)
            )AS sub_qu_1
        WHERE
            not_equal = 1
        AND DefaultUserType IS NOT NULL
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:59:45.087

我希望你没有几百万条记录！使用 Coalesce(val,0) 如果未在合作伙伴中记录，则设置为 0

```
 UPDATE Connections
SET Connections.RoleID = coalesce((select Partners.DefaultUserType FROM Partners WHERE Connections.PartnerID = Partners.PartnerID LIMIT 1),0)
WHERE
ConnectionID IN(
    SELECT
        sub_qu_1.ConnectionID
    FROM
        (
            SELECT DISTINCT
                Connections.ConnectionID,
                Connections.MemberID,
                Connections.FriendID,
                Connections.RoleID,
                Partners.DefaultUserType,
                IF(Connections.RoleID = Partners.DefaultUserType,0,1)AS not_equal
            FROM
                Connections
            LEFT JOIN Contacts ON Connections.FriendID = Contacts.EEID
            LEFT JOIN Partners ON Contacts.PartnerID = Partners.PartnerID
            WHERE
                Partners.DefaultUserType NOT IN (28,29,30)
        )AS sub_qu_1
    WHERE
        not_equal = 1
    AND DefaultUserType IS NOT NULL
) 
```

已更正！

# mysql - 使用 SQL GROUP BY 时合并

> ID：16102292
> 
> 赞同：0
> 
> 时间：2013-04-19T10:13:45.960
> 
> 标签：mysql, group-by, sql-merge

我在 mySQL DB 中的数据看起来像这样（但不仅是这 4 个，我还有很多人出现不止一次，但具有不同的资格和不同的修改日期

![我在我的数据库中的数据](https://i.stack.imgur.com/R30mw.png)

选择将类似于：

```
SELECT * FROM table where person_id=1 GROUP BY person_id 
```

所以，如果我做出这个选择并按 person_id 分组，我会得到这样的结果：

![我选择一组后的结果](https://i.stack.imgur.com/borv3.png)

有没有可能按人员ID分组，但要说：好的，给我最后修改的资格？通常我没有`person_id`where SQL 语句。
所以我想要我选择的所有人，但只有最后修改的资格的结果
（我希望我解释得很好，这样你就明白问题是什么了）

（我的选择当然比我展示的要复杂得多，这只是为了向您展示我在做什么）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:25:08.660

您还可以使用子查询`max`为每个返回修改日期`person_id`，然后将该结果加入您的表以获取具有最大日期的行：

```
select t1.id, 
  t1.person_id,
  t1.name,
  t1.qualification,
  t1.created,
  t1.modified,
  t1.version
from yourtable t1
inner join
(
  select person_id, max(modified) MaxMod
  from yourtable
  group by person_id
) t2
  on t1.person_id = t2.person_d
  and t1.modified = t2.maxmod 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:19:05.560

如果您想要特定人员的最后修改条目，那么只需执行

```
select * from table
where person_id = 1
order by modified desc
limit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:19:34.560

**编辑**

我误解了这个问题，我会更新答案

试试这个（假设你想要 **每个**人最后修改的资格）：

```
SELECT 
   person_id,
   qualification
FROM 
   table as a
INNER JOIN (
   SELECT 
     person_id,
     MAX(modified) as za_date
   FROM 
     table
   GROUP BY 
     person_id
) as tmp 
  ON a.person_id = tmp.person_id
  AND a.modified = tmp.za_date 
```

**如果您想要所有人**的最后修改资格：

```
SELECT
   qualification
FROM
   table
WHERE modified = (
       SELECT 
           MAX(modified)
       FROM
           table  
   ) 
```

# ios - 在 iOS 的基于故事板的应用程序中使用我的视图控制器

> ID：16102296
> 
> 赞同：1
> 
> 时间：2013-04-19T10:13:54.557
> 
> 标签：ios, xcode, view, uistoryboard, controllers

所以我在 Xcode 上制作了一个基于故事板的应用程序，基本上是一系列表格视图，这些表格视图导致基于文本的页面，但我从一个空白应用程序开始。

我现在已经编写了自己的视图控制器，它基本上只是将横幅广告放在顶部，但是我该如何将它实际包含在我的构建中呢？

我根据本教程制作了一个名为“viewController”的objective-c类：[https ://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)

我不确定如何在构建时运行它

这是我到目前为止所拥有的：http: [//pastebin.com/p93uSN8c](http://pastebin.com/p93uSN8c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:31:43.087

我认为您要求将 UIViewcontroller 添加到情节提要中。现在只需打开故事板，将 UIVIEW 控制器拖放到故事板中，将 UIVIEW 控制器的类名更改为您为视图控制器类指定的名称。

**如果您有任何疑问，请询问并详细说明您的问题**

# django - Django Haystack 两种模型搜索排除基于其他的结果

> ID：16102306
> 
> 赞同：0
> 
> 时间：2013-04-19T10:14:17.337
> 
> 标签：django, django-haystack

根据我想要构建搜索的内容，我有两个模型。另一个是住宿，另一个是预订。SearchQuery 正在返回两者的结果，但我想排除在 x 时间段内在预订表中有记录的所有住宿搜索结果。

大海捞针有办法处理这种任务吗？

# c# - 在 Windows Phone 8 中，纵向视频录制将以 90 度旋转形式出现

> ID：16102309
> 
> 赞同：3
> 
> 时间：2013-04-19T10:14:34.437
> 
> 标签：c#, windows-phone-8

我已经开发了一个应用程序，我正在其中进行视频录制。一切都运行良好。但是当我以纵向录制视频时，视频将以 90 度旋转的形式出现。

我正在将此 xaml 用于视频

```
<Rectangle
        x:Name="viewfinderRectangle"
        Width="460"
        Height="661"
        HorizontalAlignment="Left"
        Canvas.Left="10" Canvas.Top="10"/>
        <MediaElement
        x:Name="VideoPlayer"                  
        Width="460"
        Height="661"
        AutoPlay="True"
        RenderTransformOrigin="0.5,0.5"
        VerticalAlignment="Center"
        HorizontalAlignment="Center"
        Stretch="Uniform"
        Canvas.Left="10" Canvas.Top="10">
                <MediaElement.Projection>
                    <PlaneProjection/>
                </MediaElement.Projection>
            </MediaElement> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T11:26:27.327

在开始录制之前，您应该使用以下属性。

```
private AudioVideoCaptureDevice VideoRecordingDevice;

VideoRecordingDevice.SetProperty(KnownCameraGeneralProperties.EncodeWithOrientation,    VideoRecordingDevice.SensorLocation == CameraSensorLocation.Back ? 90 : -90); 
```

注意：请记住，它仅用于 wp8 或更高版本。

# asp.net - SqlDataSource 和 DateTime 字段

> ID：16102311
> 
> 赞同：0
> 
> 时间：2013-04-19T10:14:35.660
> 
> 标签：asp.net, datetime, sqldatasource

我遇到了`SqlDataSource`对象问题，并让它在 SQL Server (2005) 中存储日期和时间。

数据源（我已经排除了正常工作的位）：

```
<asp:SqlDataSource ID="dataRequest" runat="server" 
  SelectCommand="request_select"  SelectCommandType="StoredProcedure" 
  InsertCommand="request_insert"  InsertCommandType="StoredProcedure" 
  UpdateCommand="request_update"  UpdateCommandType="StoredProcedure"
  >
    <SelectParameters>
        <!-- This section work fine -->
        <asp:QueryStringParameter Name="requestid"  Type="Int32" QueryStringField="requestid" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="requestid"             Type="Int32"    />
        <!-- Lots of parameters here that work fine -->
        <asp:Parameter Name="date_new_req"          Type="DateTime" />
        <asp:Parameter Name="date_new_acc"          Type="DateTime" />
        <asp:Parameter Name="date_quote_req"        Type="DateTime" />
        <asp:Parameter Name="date_quote_acc"        Type="DateTime" />
        <asp:Parameter Name="date_bh_approve_req"   Type="DateTime" />
        <asp:Parameter Name="date_bh_approve_acc"   Type="DateTime" />
        <asp:Parameter Name="date_work_req"         Type="DateTime" />
        <asp:Parameter Name="date_work_acc"         Type="DateTime" />
        <asp:Parameter Name="date_complete_req"     Type="DateTime" />
        <asp:Parameter Name="date_complete_acc"     Type="DateTime" />
        <asp:Parameter Name="date_declined_req"     Type="DateTime" />
        <asp:Parameter Name="date_declined_acc"     Type="DateTime" />
        <asp:Parameter Name="date_bh_declined_req"  Type="DateTime" />
        <asp:Parameter Name="date_bh_declined_acc"  Type="DateTime" />
        <asp:Parameter Name="date_archived_req"     Type="DateTime" />
        <asp:Parameter Name="requestor_ntlog"       Type="String"   />
    </UpdateParameters>
    <InsertParameters>
        <!-- This section works fine -->
    </InsertParameters>
</asp:SqlDataSource> 
```

日期只是显示在文本框中，旁边有一个“戳记”按钮，用于在其中戳记当前日期和时间。每个文本框都是绑定到 的数据`SqlDataSource`并位于`FormView`. 更新时，正确提交了 的其余`FormView`信息，包括文本字段、数字字段（来自文本框和 DDL）和复选框。

```
<asp:FormView ID="requestProcessing" runat="server" DefaultMode="ReadOnly"
    DataSourceID="dataRequest" DataKeyNames="requestid"
    CssClass="editPanel" BorderStyle="None" EnableViewState="true">

    <!-- There's loads of stuff within the FormView, but I've omitted it as it's irrelevant to this issue, but will post if necessary -->

    <table class="dateTable" cellpadding="0" cellspacing="0">

    <tbody>
        <tr>
            <td class="prompt">
                <asp:Label   ID="date_new_req_update_label" runat="server" Text="New job request" AssociatedControlID="date_new_req_update" /><br />
            </td>
            <td>
                <asp:TextBox runat="server" ID="date_new_req_update" Text='<%# Bind("date_new_req") %>' CssClass="dataEntry" MaxLength="25" />
                <a href="javascript:stampNow('requestProcessing_date_new_req_update')" class="dateButton">stamp</a>
            </td>
            <td>
                <asp:TextBox runat="server" ID="date_new_acc_update" Text='<%# Bind("date_new_acc") %>' CssClass="dataEntry" MaxLength="25" />
                <a href="javascript:stampNow('requestProcessing_date_new_acc_update')" class="dateButton">stamp</a>
            </td>
        </tr>                
        <tr id="row2" runat="server">
            <td class="prompt">
                <asp:Label   runat="server" ID="date_quote_req_update_label" Text="Date of quote" AssociatedControlID="date_quote_req_update" />
            </td>            
            <td>
                <asp:TextBox runat="server" ID="date_quote_req_update" Text='<%# Bind("date_quote_req") %>' CssClass="dataEntry" MaxLength="25" />
                <a href="javascript:stampNow('requestProcessing_date_quote_req_update')" class="dateButton">stamp</a>
            </td>
            <td>
                <asp:TextBox runat="server" ID="date_quote_acc_update" Text='<%# Bind("date_quote_acc") %>' CssClass="dataEntry" MaxLength="25" />
                <a href="javascript:stampNow('requestProcessing_date_quote_acc_update')" class="dateButton">stamp</a>
            </td>
        </tr>                
        <tr id="row3" runat="server">
            <td class="prompt">
                <asp:Label   runat="server" ID="date_bh_approve_req_update_label" Text="Budget holder alerted" AssociatedControlID="date_bh_approve_req_update" />
            </td>            
            <td>
                <asp:TextBox runat="server" ID="date_bh_approve_req_update" Text='<%# Bind("date_bh_approve_req") %>' CssClass="dataEntry" MaxLength="25" />
                <a href="javascript:stampNow('requestProcessing_date_bh_approve_req_update')" class="dateButton">stamp</a>
            </td>
            <td>
                <asp:TextBox runat="server" ID="date_bh_approve_acc_update" Text='<%# Bind("date_bh_approve_acc") %>' CssClass="dataEntry" MaxLength="25" />
                <a href="javascript:stampNow('requestProcessing_date_bh_approve_acc_update')" class="dateButton">stamp</a>
            </td>
        </tr>
        <!-- I've omitted a lot of the dates here as they've all been tested and give the same result ... nothing! -->
    </tbody>

    </table>

</asp:FormView> 
```

在`web.config`我已经包括了一个专门针对英国的全球化路线（以防万一）。

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-GB" uiCulture="en-GB"/> 
```

由更新过程发起的唯一代码向请求者发送邮件：

```
Private Sub UpdateComplete(ByVal sender As Object, ByVal e As FormViewUpdatedEventArgs) Handles requestProcessing.ItemUpdated
    If CType(requestProcessing.FindControl("mailUser"), CheckBox).Checked Then
        Dim body As New StringBuilder()
        With e.NewValues
            'Notify the user of changes to the current request...
            body.Append("<p>Changes have been made to your job request (")
            body.Append(.Item("requestid").ToString())
            body.Append(").</p>")
            body.Append("<p>If you would like to review the changes to your job, please click ")
            body.Append("<a href='")
            body.Append(System.Web.HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority))
            body.Append("/default.aspx?requestid=")
            body.Append(.Item("requestid").ToString())
            body.Append("&mode=select'>Click this link to view your job.</a>")
            body.Append("<p>With kind regards,<br /><strong>The Minor New Works Team</strong></p>")
            Functions.BuildEmail(CType(.Item("requestid"), Int32), True, False, "", _
               "Changes have been made to your job request", body.ToString(), _
               Functions.LocalMailFlagsEnum.BasicBody Or Functions.LocalMailFlagsEnum.VerboseSubject)
            'Check to see if budget holder acceptance should be requested...
            If Not .Item("date_bh_approve_req") Is Nothing AndAlso _
               Not e.OldValues.Item("date_bh_approve_req") Is Nothing AndAlso _
               .Item("date_bh_approve_req").ToString() <> "" AndAlso _
               e.OldValues.Item("date_bh_approve_req").ToString() = "" Then
                Functions.NotifyBudgetHolder(CType(.Item("requestid"), Int32))
            End If
        End With
    End If
End Sub 
```

我已经测试了拉取和推送信息所需的每个存储过程，它们工作正常，产生了所需的结果。另外，我添加了一个日志记录例程来捕获传递给存储过程的参数；在手动执行时，所有参数都记录到日志表中，而在从 ASP.NET 页面执行时，日期被排除在外。

如果有人能对这个问题有所了解或遇到过类似的问题，我很想听听。

-- 编辑 -- 这是 ASP.NET 3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:51:53.557

行。这花了一段时间，但我发现了问题。

出于某种原因，ASP.NET 不喜欢我放置`TextBox`元素的表格格式。

现在我将把它们拿出来玩一下这个格式。桌子不是必须的；这只是我想以表格形式呈现这些数据的方式，所以我一有时间就会整理出来。

**- 编辑 -**

为了更进一步，我在`FormView`控件中尝试了几种不同格式的表格，每次都发现完全相同的问题，即使使用 ASP.NET 自己的`Table`控件也是如此。

# iphone - 在 iphone 中动态设置 UIPIckerView 高度宽度

> ID：16102313
> 
> 赞同：2
> 
> 时间：2013-04-19T10:14:47.530
> 
> 标签：iphone, ios, uipickerview

我想`UIPIckerView` `height` `width`在 .please 中动态设置。`iphone`请给我一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:23:41.800

首先，您可以动态更改高度和宽度，但`UIPickerView`不要`UidatePicker`使用此代码，您会找到方法：-

```
 UIPickerView *picker = [[UIPickerView alloc] initWithFrame: CGRectZero];
    picker.showsSelectionIndicator = YES;
    picker.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    CGSize ps = [picker sizeThatFits: CGSizeZero];
    picker.frame = CGRectMake(0.0, 0.0, ps.width, ps.height + 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:04:42.200

如果您无法更改框架，请检查您`autoLayout`的恒定宽度。如果您不使用自动布局，请禁用它。默认`pickerView`有`flexibleWidth` `resizingMask`. .

您可以调整宽度，但高度限制为不小于`162.0f`. 即使您尝试它也不会调整大小。您将收到以下错误**`invalid height value 50.0 pinned to 162.0`**

# java - 如何知道我的网站的 URL 请求是来自浏览器还是来自自动化程序

> ID：16102317
> 
> 赞同：0
> 
> 时间：2013-04-19T10:15:04.107
> 
> 标签：java, httpwebrequest, httprequest, webpage, spam-prevention

我的要求是知道对我的网页的请求是真正的请求（通过浏览器）还是通过某些 Java 程序生成的自动请求。我在哪里可以区分请求类型？

实际上，我需要阻止从程序生成的所有请求，从而寻找差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:24:00.793

对此没有 100%、万无一失的解决方案。许多人建议使用`User-Agent`标题，但它很容易被伪造。当您（可能手动）检测到假客户端时，您可以添加 IP 过滤器。但这只是一场猫捉老鼠的游戏。如果您想限制对您网站的访问，也许您最好建立一些真正的授权？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:37:02.653

没有万无一失的方法可以做到这一点。对我来说最有效的解决方案是：

1.  在 Web 服务器级别实施用户代理检查（是的，这不是万无一失的）。目标是阻止人们用来访问 URL 的已知/常见程序。像 libperl、httpclient 等。您应该能够从访问日志中构建这样的列表。

2.  根据您的情况，您可能希望也可能不希望搜索引擎蜘蛛抓取您的网站。相应地将 robots.txt 添加到您的服务器。并非所有蜘蛛/爬虫都遵循 robots.txt 的说明，但大多数都遵循。

3.  使用专门的工具来检测对您网站的异常访问。像[https://www.cloudflare.com/](https://www.cloudflare.com/)这样的东西可以跟踪对您网站的所有访问，并将其与不断增长的已知和可疑机器人数据库相匹配。

注意：我绝不隶属于 cloudflare :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:17:37.363

只需检查“User-Agent”标题并将其与最常见的标题（[http://www.user-agents.org/](http://www.user-agents.org/)）进行比较！像这样的东西：

```
request.getHeader("User-Agent").contains(...) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T10:19:55.437

您可以检查用户代理。搜索 java 用户代理检测。

# jenkins - 如何指定 Gradle 包装器下载位置？

> ID：16102319
> 
> 赞同：4
> 
> 时间：2013-04-19T10:15:06.017
> 
> 标签：jenkins, gradle, gradlew

我们将项目移至 gradle，并在 Jenkins 上持续构建。我们使用 gradle 包装器和 Jenkings gradle 插件。

通过查看控制台输出，我认识到每次构建都会下载 gradle：

```
 11:24:42 Downloading http://services.gradle.org/distributions/gradle-1.5-bin.zip
    11:24:48 ........................................................
    11:24:49 Unzipping /home/workspace/our_build/wrapper/dists/gradle-1.5-bin/9si5v6u7tk37kj5dlsrdcm595/gradle-1.5-bin.zip 
          to /home/workspace/our_build/wrapper/dists/gradle-1.5-bin/9si5v6u7tk37kj5dlsrdcm595 
```

我认为原因是因为 accurev 插件将始终清除每次运行的整个工作区（无法禁用）。

是否可以配置 gradle 下载位置？为所有工作使用共享位置是否安全？还是每个工作都有一个位置更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:27:43.630

[Wrapper](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.wrapper.Wrapper.html)任务有几个允许其自定义的属性。您可以指定一个备用 URL 来下载它 ( `distributionUrl`)。您也可以保持 URL 不变，但指定包装器必须存储的位置 ( `distributionBase`)，这将允许将其存储在您的 accurev 插件每次清理的目录之外。

我不明白为什么使用共享位置不安全。这是默认完成的，因为包装器存储在 gradle 用户主目录中。

# c# - SQL Server 中的拼写检查和单词建议脚本

> ID：16102321
> 
> 赞同：0
> 
> 时间：2013-04-19T10:15:06.627
> 
> 标签：c#, asp.net, sql-server-2008, full-text-search, spell-checking

我正在使用 ASP.NET 和 SQL Server 2008 开发一个 Web 应用程序。我的数据库中有大约 1,000,000 篇文章，并且我已经激活了全文搜索。

现在，我想在文章中搜索，搜索文本框需要 3 个功能：

1.  **自动完成**：当用户输入一个单词（Wor）时，我想给他看（World，Word，...）。
2.  **词条建议**：当用户输入一个词（世界）时，我想向他展示下一个词条（第一次世界大战，第二次世界大战，...）。
3.  **拼写检查**：当用户输入错误的单词时，我想更正它。

第一个场景可以很容易地实现，如下所示：

```
SELECT TOP 10 * 
FROM sys.dm_fts_index_keywords(db_id('MyDB'), object_id('Articles'))
WHERE display_term LIKE 'Wor%'
ORDER BY document_count DESC 
```

我不知道如何实现第二种情况。IMO 我应该创建一个表（FirstWord、SecendWord、Frequency）来存储术语序列及其频率（从文章内容中提取它们）并按频率搜索第一个词序。

对于第三种情况：我已经阅读了拼写检查算法（ASpell、NSpell、...），我想知道它们是否有任何 SQL Server + .NET 实现？

有什么解决方案可以满足我的需求吗？我更喜欢在 SQL Server 中将它们全部实现为 SP。

**更新：**这是我应该搜索的记录内容：

*希特勒和墨索里尼为西班牙弗朗西斯科·佛朗哥将军领导的民族主义起义提供了大量的军事和财政支持。苏联支持现政府，西班牙共和国，表现出左倾倾向。此外，超过 30,000 名被称为国际旅的外国志愿者与佛朗哥作战。德国和苏联都利用这场代理人战争作为测试改进武器和战术的机会。1937 年 4 月，德国秃鹰军团对格尔尼卡的蓄意轰炸导致人们普遍担心下一场重大战争将包括对平民的广泛恐怖轰炸袭击。[30][31] 虽然有一些小范围的抵抗，但国民党阵线于 1939 年 4 月 1 日宣布胜利。 [32] 值得注意的是，五个月后，德国袭击了波兰，引发了第二次世界大战。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T06:24:57.230

我建议为此使用像 (Lucene) SOLR 这样的搜索引擎。它是为满足您的要求而量身定制的。现在 SOLR 确实需要 Java（通常使用 Tomcat）才能运行，但如果你能接受，使用 Solr.Net 是一种美妙的体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T22:23:05.220

.net 中有几个汉明距离实现，您可以将它们安装到您的应用程序中以执行场景 3。

场景 2 听起来像是您的大量手动工作。上下文元数据是一头野兽。最简单的后端是使用表格来跟踪事物，但填充数据完全是另一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T11:24:46.720

您的查询也适用于第二种情况。对于第三个，您可以一个一个地使用您的字母，它们之间有通配符，因此您的 where 语句可能如下所示：

```
WHERE display_term LIKE 'W_o_r%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T11:31:20.950

仅用于第二个查询，您可以通过一次更改使用相同的查询

```
SELECT TOP 10 * 
FROM sys.dm_fts_index_keywords(db_id('MyDB'), object_id('Articles'))
WHERE display_term LIKE 'Wor %'
ORDER BY document_count DESC 
```

只需在您的单词和 % 符号后放置一个空格键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-06T16:48:52.633

您可以查看我们使用的 AmisaDB。涵盖了您使用简单的内置 sql 函数提到的所有 3 个场景。

# php - 循环索引数组

> ID：16102323
> 
> 赞同：2
> 
> 时间：2013-04-19T10:15:24.117
> 
> 标签：php, html, arrays, foreach

```
Array
(
    [2] => Array
        (
            [12] => Array
                (
                    [0] => Array
                        (
                            [id] => 24339
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118953&hash=545584bd3253fab9&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 24483
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164809310&hash=5544f9e52b6ebc10&hd=1
                        )

                )

            [11] => Array
                (
                    [0] => Array
                        (
                            [id] => 24016
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118860&hash=088323c81fb1f360&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 24115
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164809379&hash=dd49270049f5a632&hd=1
                        )

                )

            [10] => Array
                (
                    [0] => Array
                        (
                            [id] => 23463
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118763&hash=f328401f5bd7f2e4&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 23656
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164809462&hash=7a61a9ac444e2b95&hd=1
                        )

                )

            [9] => Array
                (
                    [0] => Array
                        (
                            [id] => 21815
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118684&hash=3bbddfcc12426510&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 22406
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164809548&hash=cd0e7f43171569a6&hd=1
                        )

                )

            [8] => Array
                (
                    [0] => Array
                        (
                            [id] => 20443
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118608&hash=26c0f730bc1dd6c3&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 20921
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164809649&hash=47c524f47946fb96&hd=1
                        )

                )

            [7] => Array
                (
                    [0] => Array
                        (
                            [id] => 19812
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118510&hash=1243ca95114cbdf2&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 20057
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164809741&hash=266c635751d2f9d5&hd=1
                        )

                )

            [6] => Array
                (
                    [0] => Array
                        (
                            [id] => 19262
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118374&hash=e947746533f9d895&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 19392
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164809836&hash=e58901e3e2f32993&hd=1
                        )

                )

            [5] => Array
                (
                    [0] => Array
                        (
                            [id] => 18217
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118222&hash=3a236df89bcfaac5&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 18417
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164809927&hash=d8a72be4d4eb7d86&hd=1
                        )

                )

            [4] => Array
                (
                    [0] => Array
                        (
                            [id] => 17231
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165118092&hash=13e854824bde17ab&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 17603
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164810038&hash=9d7b6a4336dd2b98&hd=1
                        )

                )

            [3] => Array
                (
                    [0] => Array
                        (
                            [id] => 15838
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165117998&hash=031a9c6d70058e4f&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 16465
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164810119&hash=06985923604c61ca&hd=1
                        )

                )

            [2] => Array
                (
                    [0] => Array
                        (
                            [id] => 15070
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165117903&hash=b1a21a9021b74aa2&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 15284
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164810199&hash=3b818c6ef7c7488b&hd=1
                        )

                )

            [1] => Array
                (
                    [0] => Array
                        (
                            [id] => 13663
                            [active] => 1
                            [lang] => en
                            [link] => http://vk.com/video_ext.php?oid=203859683&id=165117810&hash=62f01fa6c53a195f&hd=1
                        )

                    [1] => Array
                        (
                            [id] => 14000
                            [active] => 1
                            [lang] => ru
                            [link] => http://vk.com/video_ext.php?oid=203859108&id=164810267&hash=60074b4f93d62429&hd=1
                        )

                )1

        )

) 
```

我有以下我从一个更大的数组中切下来的。现在我想循环遍历这个数组并过滤一些值。我已经使用带有 true 选项的 sliced_array 功能来保留 [2] 数组编号。

现在这个数组有几个子数组，我需要一些值和一些过滤。在最终结果中，我想创建一个列出数组编号（1 到 12）的表，并在其后面有链接。（所以是一个 2 列表）我不需要的是剧集编号中的第二个数组。这始终是情节中的 [1] 数组。这是“俄罗斯”部分，我的最终结果不需要它。

我怎样才能循环这个并得到一个简单的 html 表作为输出？我一直在尝试使用 foreach() 方法，但现在我得到的只是“数组”。

*编辑* 答案确实是做多个foreach。

```
<?php
    $json = file_get_contents("http://trendico.ru/api/moviebox/get_tv_data?id=1&season=7");
    $array = json_decode($json, TRUE);

//Create an index array
$indexarray = (array_values($array));

//Create an array with only the episodes 
$episodes = array_slice($indexarray, 2, 1);

foreach($array as $arrayl1) {
    foreach($arrayl1 as $arrayl2) {
        foreach($arrayl2 as $arrayl3) {
            foreach($arrayl3 as $key => $val) {
                echo "$key=>$val"."<br>";
            }
        }
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:19:58.763

使用递归函数和`is_array`.

```
function doSomething(&$complex_array){
foreach ($complex_array as $n => $v)
{
    if (is_array($v))
        doSomething($v);
    else
        do whatever you want to do with a single node
}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:31:44.140

您可能不够深入，这应该可以：

```
foreach($array[2] as $link){
      if($choice == 'eng'){
          // the English
          echo $link[0]['id'] . " - ". $link[0]['link'];
      }
      elseif($choice == 'ru'){
          // the Russian
          echo $link[1]['id'] . " - ". $link[1]['link'];
      }
} 
```

$array 是用于存储多维数组的变量，第一个元素是键为 2 的数组。我不知道为什么！？但仍然循环通过数组内部的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T10:28:39.637

您可以在所有数组中循环，直到获得所需的数据，因为数据位于第 4 级，所以让我们循环 4 次

```
foreach($array as $arrayl1) {
    foreach($arrayl1 as $arrayl2) {
        foreach($arrayl2 as $arrayl3) {
            foreach($arrayl3 as $key => $val) {
                echo "$key=>$val"."<br>";
            }
        }
    }
} 
```

这将输出

```
id=>24339
active=>1
lang=>en
link=>http://vk.com/video_ext.php?oid=203859683&id=165118953&hash=545584bd3253fab9&hd=1
id=>24483
active=>1
lang=>ru // and so on 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T10:19:52.150

```
<?php
foreach($array as $smaller){
  foreach($smaller as $link){
     echo $link[0]['id'] . " > ". $link[0]['link']
  }
} 
```

# java - 改进迷宫搜索

> ID：16102324
> 
> 赞同：1
> 
> 时间：2013-04-19T10:15:26.390
> 
> 标签：java, recursion, backtracking, maze

我做了一个简单的迷宫搜索算法，盲目地跑到一个单元格的每个方向来检查是否找到了目标。它可以找到目标，但解决方案仍然很糟糕，因为它不会在找到目标时终止其他递归调用，并且它会绘制它已经走过的所有路径，而不仅仅是一条通往目标的可能路径。我该如何改进呢？

伪代码中的基本算法是这样的：

```
function searchMaze(start_point, end_point, maze) {

 // If current point is goal I would like to abort other recursive calls
 if(start_point.equals(end_point)) {
   pathFound = true;
   drawPathInArray(); 
    return;
  }
 else {
    // if current point is not inside the array
   if(start_point_not_within_array)
   return
   else {
     // if current point is a wall or a cell that has already been visited
     if(cell_is_wall || cell_is_visited)
       return;
      else {
           // mark cell as possible path
           markCellInPathArray("#");
           setCellVisited();
           searchMaze(left_from_start_point, end_point, maze);
           searchMaze(right_from_start_point, end_point, maze);
           searchMaze(above_start_point, end_point, maze);
           searchMaze(below_start_point, end_point, maze); 
      }
   }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:21:41.630

让函数返回一个布尔值。每当您找到通往目标的路径时，返回 true，否则返回 false。从其中一个递归调用中获得返回值 true 后返回。

所涉及的更改将是适当的返回语句并将您的 4 个递归调用更改为：

```
if (searchMaze(left_from_start_point, end_point, maze))
  return true;
if (searchMaze(right_from_start_point, end_point, maze))
  return true;
if (searchMaze(above_start_point, end_point, maze))
  return true;
if (searchMaze(below_start_point, end_point, maze))
  return true; 
```

另外，你不应该`setCellNotVisited()`在最后有一个吗？

**注意：**我看到你已经有一个`pathFound`变量（大概是一个类变量）。在这种情况下，可能首选 Marco 的解决方案，但最好将其更改为返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:22:09.403

您应该将标志添加到每个递归调用中：

```
pathFound = pathFound || searchMaze(left_from_start_point, end_point, maze);
pathFound = pathFound || searchMaze(right_from_start_point, end_point, maze);
pathFound = pathFound || searchMaze(above_start_point, end_point, maze);
pathFound = pathFound || searchMaze(below_start_point, end_point, maze); 
```

如果 pathFound 为真，则忽略调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:23:18.647

在 else 块中，如果你为

```
1) cell_is_wall when wall is visited 
2) set start_point_not_within_arrary when it is not in the array 
```

然后你的代码应该可以工作。您已经拥有的这些条件检查将处理其他递归调用。

# javascript - 在 Ruby on Rails 中使用 Javascript

> ID：16102326
> 
> 赞同：0
> 
> 时间：2013-04-19T10:15:34.187
> 
> 标签：javascript, jquery, ruby-on-rails-3, coffeescript

我有一个下拉列表，您可以在其中选择一个人。

```
<%= select_tag "person", options_from_collection_for_select(Person.all, :id, :name, 1) %> 
```

当一个人被选中时，我想显示那个人的电话号码。我怎样才能做到这一点？

在查看了很多关于如何在 RoR 中使用 Javascript/jQuery/CoffeeScript 的解决方案之后，我对在哪些文件中放置什么以及使用什么感到有点困惑。有人可以给我一个简单的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:14:15.797

在 onchange 事件中将您更改的人员 ID 传递给 javascript 函数。

* * *

```
<%= select_tag "person", options_from_collection_for_select(Person.all, :id, :name, 1) ,
 :onchange => "your_js_function_to_display_phone_for(this.value)"%> 
```

触发 Ajax 请求并从数据库中返回电话号码。（如果人员列表很小，您也可以从客户端执行此操作）

* * *

```
<script type="text/javascript">

function your_js_function_to_display_phone_for(person_id)
{

// Given a person_id 
// I am assuming this route will return me the Phone Number 

new Ajax.Request('/person/get_phone_number/'+person_id,
{asynchronous:true, evalScripts:true,
method:'post', 
onSuccess:function(request)
{
    // Modify this place to whether update on particular div_id 
    // or do appropriate action with returned request.body 

    alert("Phone Number for this Person is: "+request.body);
}, 
parameters:Form.serialize(this)});
}

</script> 
```

编辑：

你的控制器应该做这样的事情。

```
class PersonController
    def get_phone_number
        person = Person.find(params[:id])
        phone_number = person.get_phone_number 
        render :text => phone_number 
    end 
end 
```

# javascript - 外部 js 文件在 ipad3 的 safari 应用程序模式下不起作用？

> ID：16102330
> 
> 赞同：0
> 
> 时间：2013-04-19T10:15:38.223
> 
> 标签：javascript, jquery, safari, iphone-5, ipad-3

在页脚我们给

```
<script src="/js/general.js"></script> 
```

文件，但在（ipad3，iphone5）的应用程序模式下，该文件不起作用。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:33:35.360

尝试编写`js`文件的完整网址，例如，

```
<script src="http://www.example.com/js/general.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-25T15:29:19.550

Try providing the type="text/javascript" in the script tag.

# java - 两个不同的 ArrayList 合并？

> ID：16102331
> 
> 赞同：0
> 
> 时间：2013-04-19T10:15:39.500
> 
> 标签：java, android

```
private ArrayList<SublistLocalData> catList;

private ArrayList<Localdata> nameList ,nameList1; 
```

两者都有不同的数据：

```
for(SublistLocalData  list: catList )
nameList1.addAll( list.nameList ); 
```

我正在尝试这个概念，将一种类型的 arrayList 数据添加到不同类型的 ArrayList 中，我遵循这个链接：

[关联](https://stackoverflow.com/questions/10219527/convert-arraylist-type)

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:25:32.640

问题`What should i do to solve this ?`

答案：找到一个关于Java [Collection 框架的教程并阅读它。](http://docs.oracle.com/javase/tutorial/collections/)

如果要将不同类型的对象存储在单个列表中，则应创建一个可以接受任何对象的列表。Java 中的每个对象都继承自 `Object`类。因此，您需要创建类似：

```
private List<Object> list4Everything = new ArrayList<>(); 
```

编辑：

但是，如果您有相同的对象，并且只想将两个已经存在的列表合并到一个新的列表中。您应该使用方法[List#addAll(Collection c)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#addAll%28java.util.Collection%29)

以免做例子，我们将有三个列表：

```
private List<YourType> list1 = new ArrayList<>();
private List<YourType> list2 = new ArrayList<>();
private List<YourType> mergeResult = new ArrayList<>(); 
```

您有多种选项可以将所有数据从`list1`和“list2”插入`mergeResult`

选项 1 - 使用 megeResult 的 addAll。

```
mergeResult.addAll(list1);
mergeResult.addAll(list2); 
```

选项 2 - 手工操作。

```
for(YourType yt : list1) { //Itereate throug every item from list1
   mergerResult.add(yt); //Add found item to mergerResult
}

for(YourType yt : list1) { //Itereate throug every item from list2
   mergerResult.add(yt); //Add found item to mergerResult
} 
```

注意：在此解决方案中，您可以选择将女巫项目添加到`meregeResult`.

因此，例如，如果我们想要有不同的结果，我们可以做这样的事情。

```
for(YourType yt : list1) { //Itereate throug every item from list1
  if(mergerResult.contains(yt) == false) { //We check that item, already exits in mergeResult
     mergerResult.add(yt); //Add found item to mergerResult
  }
}

for(YourType yt : list1) { //Itereate throug every item from list2
  if(mergerResult.contains(yt) == false) { //We check that item, already exits in mergeResult
   mergerResult.add(yt); //Add found item to mergerResult
   }
} 
```

* * *

当我们执行两次相同的操作时，我们可以创建一个实用程序类。

```
public static <T> boolean addAllNotContained(Collection<? super T> traget, Collection<? super T> source) {

   //We should assure first that target or source are not null

   int targetSize = target.size();

   for(T item: source) {
     if(target.contains(item) == false) {
        target.add(item);
     }
   }

   return targetSize != target.size();
} 
```

注意：要获得类似的不同合并结果，您可以使用 jest [Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)。创建它是为了不存储重复项。

另一种选择是使用已经创建的扩展默认 Java 的框架。选项是[带有 iterables](http://google-collections.googlecode.com/svn/trunk/javadoc/index.html?http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/package-summary.html)和[apache commons的番石榴](http://commons.apache.org/proper/commons-collections/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:31:44.007

如果 SublistLocalData 类和 Localdata 类之间有任何关系，您可以创建一个类，它既是它们的超类，又是这两个类实现的接口。假设你有这个类：`class AbstractSuperClass {}` 然后：在这里如何声明超类的列表：`List<AbstractSuperClass> list;` 使用这个列表，您可以添加任何类型的 AbstractSuperClass（从它继承的类，如 SublistLocalData 和 Localdata ）然后您可以编写：

```
list.add(new SublistLocalData());

orlist.add(new Localdata()); 
```

# android - Android & MySQL：如果没有使用主键进行查询，则无法更新表

> ID：16102332
> 
> 赞同：0
> 
> 时间：2013-04-19T10:15:42.580
> 
> 标签：android, mysql, json

我正在尝试从 Android Activity 创建一个数据库，当我在表中添加一个新项目时它可以工作。但是，当我尝试更新该项目时，我遇到了几个问题，这不起作用。数据库的结构如下：pid、name、price和description。为了创建数据库，我将一些参数发布到有一些脚本的服务器中。为了创建产品，我使用以下查询：`mysql_query("INSERT INTO products(name, price, description) VALUES('$name', '$price', '$description')");`这很好用。但是，当我尝试更新时，我使用

```
 mysql_query("UPDATE products SET name = '$name', price = '$price', description = '$description' WHERE name = $name"); but this gives a JSON error. 
```

我曾想过只用这样的 pid 更新项目`mysql_query("UPDATE products SET name = '$name', price = '$price', description = '$description' WHERE pid = $pid");`，但我不知道在 Android 中由谁来检索 pid 的值。我需要说 pid 归档是 Autoincrement。

编辑：

```
class CreateNewProduct extends AsyncTask<String, String, String> {

                /**
                 * Before starting background thread Show Progress Dialog
                 * */
                @Override
                protected void onPreExecute() {
                    super.onPreExecute();
                    pDialog = new ProgressDialog(NumericoSup.this);
                    pDialog.setMessage("Creating Product..");
                    pDialog.setIndeterminate(false);
                    pDialog.setCancelable(true);
                    pDialog.show();
                }

                /**
                 * Creating product
                 * */
                protected String doInBackground(String... args) {

                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("name", name1));
                    params.add(new BasicNameValuePair("price", "88"));
                    params.add(new BasicNameValuePair("description", "numericopr"));

                    // getting JSON Object
                    // Note that create product url accepts POST method
                    JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                            "POST", params);

                    // check log cat fro response
                    Log.d("Create Response", json.toString());

                    // check for success tag
                    try {
                        int success = json.getInt(TAG_SUCCESS);

                    } catch (JSONException e) {
                        e.printStackTrace();
                    }

                    return null;
                }

                /**
                 * After completing background task Dismiss the progress dialog
                 * **/
                protected void onPostExecute(String file_url) {
                    // dismiss the dialog once done
                    pDialog.dismiss();
                }

            }   
            class SaveProductDetails extends AsyncTask<String, String, String> {

                /**
                 * Before starting background thread Show Progress Dialog
                 * */
                @Override
                protected void onPreExecute() {
                    super.onPreExecute();
                    pDialog = new ProgressDialog(NumericoSup.this);
                    pDialog.setMessage("Saving product ...");
                    pDialog.setIndeterminate(false);
                    pDialog.setCancelable(true);
                    pDialog.show();
                }

                /**
                 * Saving product
                 * */
                protected String doInBackground(String... args) {

                    // getting updated data from EditTexts

                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair(TAG_PID, "20"));
                    params.add(new BasicNameValuePair(TAG_NAME, name1));
                    params.add(new BasicNameValuePair(TAG_PRICE, "99"));
                    params.add(new BasicNameValuePair(TAG_DESCRIPTION, "update"));

                    // sending modified data through http request
                    // Notice that update product url accepts POST method
                    JSONObject json = jsonParser.makeHttpRequest(url_update_product,
                            "POST", params);

                    // check json success tag
                    try {
                        int success = json.getInt(TAG_SUCCESS);

                    } catch (JSONException e) {
                        e.printStackTrace();
                    }

                    return null;
                }

                /**
                 * After completing background task Dismiss the progress dialog
                 * **/
                protected void onPostExecute(String file_url) {
                    // dismiss the dialog once product uupdated
                    pDialog.dismiss();
                }
            }

Thanks in advance 
```

# sql - T-SQL；从表中按天重复一个时间段的值

> ID：16102336
> 
> 赞同：2
> 
> 时间：2013-04-19T10:15:55.370
> 
> 标签：sql, tsql

我有这种情况：

一张带有 entry_time (datetime) 和 value (float) 的表。我以相同或不同的值以不同的时间间隔检索时间戳。像这样：

```
date_time   value
2012-12-08  77252,8046875
2012-12-08  77252,8046875
2012-12-22  77413,2734375
2012-12-24  0
2012-12-24  0
2012-12-24  0
2012-12-24  0
2012-12-24  68549,4453125
2012-12-24  0
2012-12-24  79194,703125
2012-12-26  0
2012-12-26  77252,8046875
2013-01-05  0
2013-01-05  0
2013-01-26  63780
2013-02-08  10362,27734375
2013-02-16  0
2013-03-04  76400
2013-03-20  0
2013-03-20  76400 
```

我需要的是从第一个日期按天重复第一个值，直到下一个值（即使是相同的）。当每天有多个值时，要选择的最大值。在第一次重复之后，当它到达第二个日期时，该过程以第二个值重复，直到第三个日期，依此类推。

像这样的东西：

```
date_time   value
2012-12-22  77413,2734375
2012-12-23  77413,2734375
2012-12-24  79194,703125
2012-12-25  79194,703125
2012-12-26  77252,8046875
2012-12-27  77252,8046875
2012-12-28  77252,8046875
.............................
2013-01-05  0
2013-01-06  0
.............................
2013-01-25  0
2013-01-26  63780
............................. 
```

预先感谢您的回答！

德拉戈斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:41:16.393

[SQLFiddle 演示](http://sqlfiddle.com/#!3/91ecb/14)

```
with t_max_min 
as 
(select min(date_time) min_dt, 
        max(date_time) max_dt  
        from t)

, period as
(
   select min_dt dt from t_max_min
   union all
   select dt+1 from period 
      where dt<(select max_dt from t_max_min)

)
,t_values as
(
  select date_time, max(value) value 
      from t group by date_time
)

select dt as date_time,
       ISNULL((select TOP 1 value 
                     from t_values
                     where date_time<=dt

                     order by date_time desc)
              , 0) value
    from period
order by dt 
```

# linux - Linux控制台应用程序开发

> ID：16102338
> 
> 赞同：0
> 
> 时间：2013-04-19T10:16:06.893
> 
> 标签：linux, console

我们需要为 Linux (Centos 6.x) 开发一个控制台应用程序，类似于[您在 VMware ESXi 首次启动时看到](http://www.virtualizationadmin.com/img/upl/image0061217851729920.jpg)的内容。此控制台应用程序将用于在系统首次启动时（在进入 Linux 桌面控制台之前）将 Linux 初始配置为虚拟设备。

自从我在 Unix 中进行任何控制台编程以来已经有好几年（实际上是几十年）了，它曾经使用旧的“curses”库......我相信从那时起技术已经有了显着的进步，肯定有很多更好的选择。

我的问题是：今天开发漂亮的控制台 UI 有哪些语言选项？TCL？Python？其他？

谢谢瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:39:18.050

你可以使用 Python 和 Urwid：[http ://excess.org/urwid/](http://excess.org/urwid/)

# mysql - 很难为我完成一个艰难的查询脚本

> ID：16102339
> 
> 赞同：0
> 
> 时间：2013-04-19T10:16:13.237
> 
> 标签：mysql, sql, select, pervasive

```
 SELECT a.acikkapali, 
    b.onay, b.evrakno, 
    b.tarih,  
    a.kod, 
    d.ad, 
    a.note0, 
    a.sf_miktar, 
    a.sf_sf_unit, 
    a.rtalepedilentestarih, 
    c.evrakno
FROM stok47T a 
LEFT JOIN stok47e b on a.evrakno = b.evrakno
LEFT JOIN stok46t1 c on a.evrakno = c.talepno
LEFT JOIN stok00 d on a.kod = d.kod
WHERE a.tarih = '2013/04/15' 
```

我需要以正确的方式将我的两个表添加到该脚本中，这意味着如果我映射其中一个，那么正常的行数会增加，这让我发疯，我已经尝试解决这个问题几天但我失败了很多次。我在 stok47t 和其他人之间找不到好的映射字段。但是仍然有一些列（字段）匹配它们的类型和数据。我需要听取人们的意见并学习一些东西。

[这是我查询的很大一部分](http://imageshack.us/a/img812/3705/seriousissue.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:25:05.867

如果行数增加，那么很可能是由于使用了 LEFT JOIN。INNER 连接可能会有所帮助（请参阅[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)指南）

```
SELECT a.acikkapali, 
b.onay, b.evrakno, 
b.tarih,  
a.kod, 
d.ad, 
a.note0, 
a.sf_miktar, 
a.sf_sf_unit, 
a.rtalepedilentestarih, 
c.evrakno
FROM stok47T a 
INNER JOIN stok47e b on a.evrakno = b.evrakno
INNER JOIN stok46t1 c on a.evrakno = c.talepno
INNER JOIN stok00 d on a.kod = d.kod
WHERE a.tarih = '2013/04/15' 
```

但是，如果不了解您的数据结构，那么您可能会丢失您所追求的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:41:33.203

如果您获得多行，则可能是由于连接中出现笛卡尔积。这与连接类型（左/右/全/内）无关。它基于表之间的关系。您在不同维度上有 1-N 关系。

你的条件是：

```
FROM stok47T a 
LEFT JOIN stok47e b on a.evrakno = b.evrakno
LEFT JOIN stok46t1 c on a.evrakno = c.talepno
LEFT JOIN stok00 d on a.kod = d.kod 
```

我不知道这些表和字段是什么意思。但是，如果您遇到 table 中每行有一行`evrakno`，table`stok47t`中有两行，table 中有`stok47e`3行的情况`stok46t1`，那么您将在输出中得到六行。

没有更多信息，就不可能告诉您最佳解决方案。一种方法是汇总表格。另一种是通过执行以下操作来获取第一个或最后一个相应的行：

```
from stok47T a left join
     (select s.*, row_number() over (partition by evrakno order by id desc) as seqnum
      from stok47e s
     ) b
     on a.evrakno = b.evrakno and b.seqnum = 1 
```

# winapi - 如何编写无输入流 DMO（directx 媒体对象）组件

> ID：16102343
> 
> 赞同：0
> 
> 时间：2013-04-19T10:16:31.493
> 
> 标签：winapi, directshow, dmo

DMO 似乎用于替换 DirectShow 变换过滤器。一些文件说可能存在没有输入流的 DMO。但它应该如何工作？如果没有输入流，函数中`IMediaObject::CheckInputType`应该写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:50:10.260

您可以实现无输入 DMO，例如，假设 DMO 在内部生成输出。没有人会打电话`CheckInputType`，因为不存在输入，这很好（你的`CheckInputType`身体将是空的，例如返回`E_NOTIMPL`）。

但是，您应该退后一步并解释它的用途。不，DMO 不能替代 DirectShow 过滤器。DMO 可以通过 DMO Wrapper Filter 映射到 DirectShow 过滤器空间，但是后者[不支持没有输入](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375519%28v=vs.85%29.aspx)的 DMO，因此您的 DMO 对于 DirectShow 管道将毫无用处。

要创建自定义 DirectShow 源，您需要实现完整过滤器。

# kendo-ui - 最小化我的应用程序窗口时，它会很笨拙

> ID：16102344
> 
> 赞同：0
> 
> 时间：2013-04-19T10:16:37.000
> 
> 标签：kendo-ui

我正在使用剑道控件做一个项目。它几乎完成但提出了一个问题，即当最小化窗口时，所有应用程序都会变得笨拙。所有控件的位置都略有移动，因此它被视为笨拙。如何解决这个问题。请帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:24:23.577

你试试这个

```
 $(window).resize(function () {
 $("#chart svg").width(Number($('.k-content').width()));
 $("#chart svg").height(Number($('.k-content').height()));
 $("#chart").data("kendoChart").refresh();
 }); 
```

# wso2 - 从 esb 的代理向 Message Broker 的主题发布消息时出错

> ID：16102349
> 
> 赞同：2
> 
> 时间：2013-04-19T10:16:56.720
> 
> 标签：wso2, wso2esb, messagebroker, subscriber, jms-topic

每当我尝试将消息从 esb 发布到消息代理的主题时，我都会收到此错误

```
[2013-04-19 14:51:45,930] ERROR - AMQConnection Throwable Received but no listener set: org.wso2.andes.client.AMQNoRoute
Exception: Error: No Route for message [error code 312: no route] 
```

我的代理代码是

```
 <proxy name="SendMessageProxy" transports="http" startOnLoad="true">    
<target>       
<endpoint>          
<address uri="jms:/myTopic?&amp;transport.jms.DestinationType=topic"/>       
</endpoint>       
<inSequence>          
<log level="custom">             
<property name="STATE" value="message is sent to queue"/>         
 </log>          
<property name="OUT_ONLY" value="true"/>          
<property name="FORCE_SC_ACCEPTED" value="true" scope="axis2"/>       
</inSequence>       
<outSequence/>    
</target> 
</proxy>` 
```

我的 jndi 配置和轴 2 配置已正确配置。我的 MB 在端口 9444 上运行，Publisher_esb 在端口 9443 上运行，订阅者 esb 在端口 9446 上运行。当我保持订阅者处于活动状态，然后如果我从发布者发布消息消息被反映给订阅者。

从订户获取消息的代码是

```
package xml.parser;

import org.w3c.dom.*;
import javax.xml.xpath.*;
import javax.xml.namespace.NamespaceContext;
import javax.xml.parsers.*;

import java.io.IOException;
import java.util.Enumeration;
import java.util.Iterator;

import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import javax.jms.*;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import java.util.Properties;

public class Parser {

    public static final String QPID_ICF = "org.wso2.andes.jndi.PropertiesFileInitialContextFactory";
    private static final String CF_NAME_PREFIX = "connectionfactory.";
    private static final String CF_NAME = "qpidConnectionfactory";
    String userName = "admin";
    String password = "admin";
    private static String CARBON_CLIENT_ID = "carbon";
    private static String CARBON_VIRTUAL_HOST_NAME = "carbon";
    private static String CARBON_DEFAULT_HOSTNAME = "localhost";
    private static String CARBON_BROKER_PORT = "5673";
    String topicName = "myTopic";

    public static void main(String[] args) throws NamingException,
            JMSException, XPathExpressionException,
            ParserConfigurationException, SAXException, IOException {

        Parser queueReceiver = new Parser();
        String message = queueReceiver.subscribe();

    }

    public String subscribe() throws NamingException, JMSException {

        String messageContent = "";
    Properties properties = new Properties();
    properties.put(Context.INITIAL_CONTEXT_FACTORY, QPID_ICF);
    properties.put(CF_NAME_PREFIX + CF_NAME,
            getTCPConnectionURL(userName, password));
    properties.put("topic." + topicName, topicName);
    System.out.println("getTCPConnectionURL(userName,password) = "
            + getTCPConnectionURL(userName, password));
    InitialContext ctx = new InitialContext(properties);
    // Lookup connection factory
    TopicConnectionFactory connFactory = (TopicConnectionFactory) ctx
            .lookup(CF_NAME);
    TopicConnection topicConnection = connFactory.createTopicConnection();
    topicConnection.start();
    TopicSession topicSession = topicConnection.createTopicSession(false,
            QueueSession.AUTO_ACKNOWLEDGE);
    // Send message
    //Topic topic = topicSession.createTopic(topicName);
    Topic topic = (Topic) ctx.lookup(topicName);
    javax.jms.TopicSubscriber topicSubscriber = topicSession
            .createDurableSubscriber(topic,"admin");
    Message message = topicSubscriber.receive();
    if (message instanceof TextMessage) {
        TextMessage textMessage = (TextMessage) message;
        System.out.println("textMessage.getText() = "
                + textMessage.getText());
        messageContent = textMessage.getText();
    }
    topicSession.close();
    topicConnection.close();

    return messageContent;      }

    public String getTCPConnectionURL(String username, String password) {
        return new StringBuffer().append("amqp://").append(username)
                .append(":").append(password).append("@")
                .append(CARBON_CLIENT_ID).append("/")
                .append(CARBON_VIRTUAL_HOST_NAME).append("?brokerlist='tcp://")
                .append(CARBON_DEFAULT_HOSTNAME).append(":")
                .append(CARBON_BROKER_PORT).append("'").toString();

    }

} 
```

当我第一次运行订阅者时，它给了我结果，但之后它给出了异常：

```
[2013-04-19 17:24:26,947] ERROR {org.wso2.andes.transport.network.mina.MinaNetworkHandler} -  Exception caught by Mina
java.io.IOException: An existing connection was forcibly closed by the remote host
        at sun.nio.ch.SocketDispatcher.read0(Native Method)
        at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
        at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:218)
        at sun.nio.ch.IOUtil.read(IOUtil.java:191)
        at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:359)
        at org.apache.mina.transport.socket.nio.SocketIoProcessor.read(SocketIoProcessor.java:218)
        at org.apache.mina.transport.socket.nio.SocketIoProcessor.process(SocketIoProcessor.java:198)
        at org.apache.mina.transport.socket.nio.SocketIoProcessor.access$400(SocketIoProcessor.java:45)
        at org.apache.mina.transport.socket.nio.SocketIoProcessor$Worker.run(SocketIoProcessor.java:485)
        at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:51)
        at java.lang.Thread.run(Thread.java:722)
[2013-04-19 17:24:26,957] ERROR {org.wso2.andes.server.protocol.AMQProtocolEngine} -  IOException caught in/127.0.0.1:16
513(admin), session closed implictly: java.io.IOException: An existing connection was forcibly closed by the remote host

[2013-04-19 17:33:40,283]  INFO {org.wso2.andes.server.protocol.AMQProtocolEngine} -  Closing channel due to: Cannot sub
scribe to queue carbon:admin as it already has an existing exclusive consumer
[2013-04-19 17:33:40,283]  INFO {org.wso2.andes.server.protocol.AMQProtocolEngine} -  Channel[1] awaiting closure - proc
essing close-ok
[2013-04-19 17:33:40,283]  INFO {org.wso2.andes.server.handler.ChannelCloseOkHandler} -  Received channel-close-ok for c
hannel-id 1
[2013-04-19 17:40:48,867]  INFO {org.wso2.andes.server.queue.SimpleAMQQueue} -  Auto-deleteing queue:tmp_127_0_0_1_16587
_1 
```

我不能在不激活我的订阅者的情况下向该主题发布消息。我怎样才能使我的消息持久或持久？我还有一个问题是：如何获取与我创建的主题相关联的队列名称，或者我可以专门为我的主题 myTopic 创建一个队列吗？期待您的回答。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:17:24.757

MB 2.0.1 中的持久订阅者有一些已知问题，这可能是由于这个原因。[请从这里](http://dist.wso2.org/downloads/message-broker/2.1.0/alpha/wso2mb-2.1.0.zip)尝试使用 MB 2.1.0 - Alpha 版本，看看它是否在此处得到解决。这些问题将在几周后发布的 MB 2.1.0 中得到修复。

# android - Android：标题栏 onclick 启动器图标

> ID：16102354
> 
> 赞同：2
> 
> 时间：2013-04-19T10:17:22.577
> 
> 标签：android, icons, onclicklistener, titlebar

我想在我的应用程序标题栏中的启动器图标中添加一个 onclick 侦听器。由于我还支持 API 级别 8，因此我没有操作栏。

以下代码效果很好，但是菜单设置回默认值（白色背景、白色文本、小图标等）

编码：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_LEFT_ICON);
    setContentView(R.layout.activity_main);
    getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON,R.drawable.ic_launcher);
    View v = findViewById (android.R.id.title);
    v.setClickable(true);
    v.setOnClickListener(new OnClickListener() {
        @Override public void onClick(View v) {
            Toast.makeText(MainActivity.this, "Works!", Toast.LENGTH_SHORT).show();
        }
    });
}
} 
```

来源：[将点击侦听器添加到标题栏图像](https://stackoverflow.com/questions/14033204/adding-click-listener-to-titlebar-image)

如何保持标题栏的标准布局（黑色背景色、白色文本和大图标），同时实现这个 onclick 监听器？

这是不同布局的两张照片：
好的：[http://gyazo.com/40d1cdd5302de3cd28b698b68164a556](http://gyazo.com/40d1cdd5302de3cd28b698b68164a556)
不好的：http: [//gyazo.com/3cee42524ec4167392baec6cc2369584](http://gyazo.com/3cee42524ec4167392baec6cc2369584)

（注意好的也有更高的高度）

# python - Django将一组单词存储在数组中并逐个显示

> ID：16102358
> 
> 赞同：0
> 
> 时间：2013-04-19T10:17:34.300
> 
> 标签：python, django

我需要从用户那里获取输入并将其存储在数组中。例如，如果用户输入类似`python,Html,css`or`python html css`或`python/html/css`。我必须将它存储在数组中，就像`a[0]=python; a[1]=html; a[2]=css;`它应该忽略逗号（，）和空格和斜杠（/）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:26:50.927

听起来您正在尝试将字符串简单地处理为具有多个分隔符的列表。快速搜索发现了另一个类似的 StackOverflow 问题，这可能会导致答案。

您也许可以使用“ `re.split()`”功能完成您正在寻找的东西。

[https://stackoverflow.com/a/4998688/1011998](https://stackoverflow.com/a/4998688/1011998)

# css - Twitter Bootstrap，悬停和分隔线之间的空间

> ID：16102359
> 
> 赞同：0
> 
> 时间：2013-04-19T10:17:34.390
> 
> 标签：css, twitter-bootstrap

所以我对悬停和分隔线有疑问。这就是我所说的：

![在此处输入图像描述](https://i.stack.imgur.com/6IdY5.png)

基本上，悬停的背景和分隔线之间有一个空白的背景空间。我浏览了 CSS，但没有解决任何问题。

这是 CSS： http: [//pastebin.com/Z7zvbbbP](http://pastebin.com/Z7zvbbbP)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:02:14.713

如果没有您的 HTML 标记，我只能假设您使用默认`<li class="divider-vertical"></li>`分隔符。在这种情况下，分隔符的左右边距各为 9px。因此，要删除该空间，请尝试以下操作：

```
.divider-vertical {
    margin: 0;
} 
```

[http://jsfiddle.net/kHAxA/](http://jsfiddle.net/kHAxA/)

# java - 解码 .bmp 图像

> ID：16102362
> 
> 赞同：0
> 
> 时间：2013-04-19T10:17:47.937
> 
> 标签：java, image, decode, bmp, steganography

我刚开始学习计算机科学，我们的老师给了我们这个小而棘手的编程作业。我需要解码一个 .bmp 图像[http://postimg.org/image/vgtcka251/](http://postimg.org/image/vgtcka251/)我们的老师已经交给了我们，经过 4 个小时的研究和尝试，我离解码还差得远。他给了我们他的编码方法：

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class HideMsgInPicture {
    final static long HEADSIZE=120;

    public static void main(String[] args) throws IOException {
        encode();
        decode();
    }
    private static void encode() throws IOException {
        FileInputStream   in = null;
        FileInputStream  msg = null;
        FileOutputStream out = null;
        try {
            in  = new FileInputStream("car.bmp");
            msg = new FileInputStream("msg.txt");
            out = new FileOutputStream("carX.bmp");
            int c,mb;
            byte clearBit1 = (byte) 0xFE; //254; // 11111110

            for (int i=1;i<=HEADSIZE;i++) out.write(in.read()); //copy header

            while ((mb = msg.read()) != -1) {  // for all byte in message

                for (int bit=7; bit>=0; bit--) // 1 bit a time from messsage
                {  c = in.read() & clearBit1;  // get picturebyte,clear last bit
                   c = (c | ((mb >> bit) & 1));// put msg-bit in end of pic-byte
                   out.write(c);               // add pic-byte in new file
                }
            }

            for (int bit=7; bit>=0; bit--) // add 8 zeroes as stop-byte of msg
            {  c = in.read() & clearBit1;  // get picturebyte,clear last bit
               out.write(c);               // add pic-byte in new file
            }

            while ((c = in.read()) != -1) out.write(c);// copy rest of file
        }
        finally {
            if (in  != null)  in.close();
            if (msg != null) msg.close();
            if (out != null) out.close();
        }
    }
} 
```

有人能把我送到正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:27:28.047

你对隐写术了解多少？最简单的算法（这是您的作业正在实现的）是最低有效位 (LSB)。简而言之，您将消息转换为二进制（即字符'a' = 01100001）并将各个位写入像素值的最右边位。例如，取 8 个像素（每个像素由一个字节表示），在第一个字节中隐藏一个 0，在第二个字节中隐藏一个 1，在第三个中隐藏一个 1，在第四个 0 中等等。要提取您的消息，请从像素中的 LSB 并将其转换回文本。

你的老师给了你隐藏算法，所以基本上你必须编写一个反转过程的算法。您无需进一步了解，您只需了解此代码的作用即可。仅内联注释就足够了。

# sql - 查询返回 db2 中组的第一个元素的 roww

> ID：16102367
> 
> 赞同：0
> 
> 时间：2013-04-19T10:18:02.087
> 
> 标签：sql, db2

假设我有一个填充了以下数据的表，我应该在 db2 中使用什么 SQL 函数或查询来检索所有具有值为 A 的 FIRST 字段 FLD_A、值为 B 的 FIRST 字段 FLD_A 的所有行等等？

```
 ID   FLD_A    FLD_B
  1    A        10
  2    A        20
  3    A        30
  4    B        10
  5    A        20
  6    C        30 
```

我期待下面的表格；我知道按功能分组`GROUP BY but how can I limit the query to return the very first of each group?`

 `Essentially I would like to have the information about the very first row where a new value for FLD_A is appearing for the first time?` 

```
 ID   FLD_A    FLD_B
  1    A        10
  4    B        10
  6    C        30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:24:31.813

试试这个它在sql中工作

```
SELECT * FROM Table1 
WHERE ID IN (SELECT MIN(ID) FROM Table1 GROUP BY FLD_A) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:35:58.050

解决这个问题的一个好方法是使用窗口函数`row_number()`，特别是：

```
select t.*
from (select t.*,
             row_number() over (partition by fld_a order by id) as seqnum
      from table1
     ) t
where seqnum = 1; 
```

（这是假设“first”的意思是“minimum id”。）

如果您使用`t.*`，这将在输出中增加一列。您可以只列出要避免这种情况的列。

# c# - DropDownList OnSelectedIndexChanged - 取消选中的值

> ID：16102371
> 
> 赞同：1
> 
> 时间：2013-04-19T10:18:13.173
> 
> 标签：c#, asp.net

我有一个面板，其中包含一个 ListView 和一个 itemTemplate，其中每个元素包含一个下拉列表、两个文本框和一个删除按钮。

每个 Listview 元素的每个下拉列表都包含相同的数据，即来自数据源的值列表，但所选值在不同行中不同。某些值可以相同，这取决于约束。

对于我的下拉列表中的某些元素，此约束是我可以在两行上具有相同的值。

我在设计中将下拉列表与 OnSelectedIndexChanged 事件和 autoPostback 绑定为 True：

```
<asp:DropDownList ID="ddlLinkToDestinationParent" CssClass="ddl-link-to ddl-link-to-child" runat="server"  AutoPostBack="True" OnSelectedIndexChanged="ddlNewConsumptionLinkToDestinationParent_OnSelectedIndexChanged" data-headcount='<%# Eval("HeadCount") %>' /> 
```

我传递了我的事件（服务器端）。

```
var ddl = sender as DropDownList;

        if (IsDestinationSelected(ddl))
        {
            // Display error message
            // cancel the selection of my dropdownlist or select another value...

        } 
```

IsDestinationSelected 方法允许知道是否找到了具有此值和约束的下拉列表。如果为真，我想取消我在下拉列表中选择的项目

错误消息后我可以写什么？

我尝试了一些解决方案，但没有什么有趣的......（320 只是为了测试，但它是一个列表项）：

```
ddl.SelectedIndex = ddl.Items.IndexOf(ddl.Items.FindByValue("320")); 
```

这是我的清单项目：

```
<select name="ctl00$Main$lvSetConsumptionsSite$ctrl1$ddlLinkToDestinationParent" onchange="javascript:setTimeout('__doPostBack(\'ctl00$Main$lvSetConsumptionsSite$ctrl1$ddlLinkToDestinationParent\',\'\')', 0)" id="ctl00_Main_lvSetConsumptionsSite_ctrl1_ddlLinkToDestinationParent" class="ddl-link-to ddl-link-to-child" data-headcount="0">
    <option value="">--- Type de consom° ---</option>
    <option value="870">petit dejeuner 1 siege</option>
    <option value="877">petit dejeuner 2 (siege)</option>
    <option value="133">dejeuner 1 siege</option>
    <option value="26">dejeuner 2 (siege)</option>
    <option value="237">dejeuner 3 (siege)</option>
    <option value="238">dejeuner 4 (siege)</option>
    <option value="239">dejeuner 5 (siege)</option>
    <option value="241">dejeuner 6 (siege)</option>
    <option value="288">dejeuner 7 (siege)</option>
    <option value="852">pique nique (gouter 1 siege)</option>
    <option value="507">diner 1 (siege)</option>
    <option value="883">test 20/09 (diner - siege)</option>
    <option value="136">Goûter 2 (siege)</option>
    <option value="134">Resident (pas dans CM)</option>
    <option value="24">pertes (diner - siege)</option>
    <option value="25">cessions (pas dans CM)</option>
    <option value="201">Taxes et Frais divers (pas dans CM)</option>
    <option value="227">Emballages (consignes et déconsignes)</option>
    <option value="135">Diners de luxe (pas dans CM)</option>
    <option selected="selected" value="320">ajustement de stock</option>
    <option value="334">autre</option>
    <option value="745">HAPPY</option>
    <option value="876">consommation</option>
    <option value="802">test AB Cons 3105 01</option>
    <option value="869">panier repas (pas dans CM)</option>
    <option value="915">1 dest. siege</option>
    <option value="953">collation de 11h</option>

</select> 
```

但是当我尝试更改我的值或我的项目时，我会再次调用我的事件，但是选择了值，也是无限循环......

你有想法吗 ？

感谢您的回答 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:26:01.330

在您的事件处理程序中，只需执行以下操作：

```
ddl.ClearSelection(); 
```

此外，请确保`if(!isPostBack)`在 Page_Load 中对块中的值进行数据绑定，以防止出现意外结果。

***评论后更新：***

正如我所说，您需要对原始值进行某种持久性。有几种方法可以做到这一点：

**1.)**在`SelectedIndexChanged`事件中进行比较操作，如果他不能执行，则查询数据库以获取原始值并使用它在下拉列表中选择它

**2.）**在绑定下拉列表时存储这些原始值，可能在这样的字典中：

```
var collectionToBindTo = Db.GetMyItems();
Dictionary<int, string> originalValues; 
foreach (var item in collectionToBindTo)
{
    originalValues.Add(item.Id, item.SomeValue);
} 
dropdownlist.DataSource = collectionToBindTo;
dropdownlist.DataBind();
// now add the collection to the session 
```

其中 int 是键（可能是项目的 Id？），字符串是原始值。然后，您必须将这个集合存储在 Session 中，这样您就可以在回发之间检索它，而无需重新查询数据库。

我猜你在你的 aspx 文件中使用了一个元素 DataSource，所以第二个对你来说很难做到。您可以做的是使用第一个选项，如果您不经常访问数据库，这真的很容易。

希望这是有道理的。它不是复制和粘贴解决方案，您需要更改这些想法以满足您的需求。

# php - 页面加载默认值未在 jQuery 中显示？

> ID：16102372
> 
> 赞同：2
> 
> 时间：2013-04-19T10:18:23.190
> 
> 标签：php, jquery, html

我有五个单选按钮，根据单选按钮的五个不同值，生成五个跨度标签，该单选按钮上的描述如下：

```
<table class="jshop">
    <tbody>
    <tr>
        <td class="attributes_title">
            <span class="attributes_name">Model:</span><span class="attributes_description"></span>
        </td>
        <td>
            <span id="block_attr_sel_3">
            <span class="input_type_radio">
                <input type="radio" name="jshop_attr_id[3]" id="jshop_attr_id35" value="5" checked="true" onclick="setAttrValue('3', this.value);"> 
                <label for="jshop_attr_id35"><span class="radio_attr_label">16 GB</span></label>
            </span>
            <span class="input_type_radio">
                <input type="radio" name="jshop_attr_id[3]" id="jshop_attr_id36" value="6" onclick="setAttrValue('3', this.value);"> 
                <label for="jshop_attr_id36"><span class="radio_attr_label">32 GB</span></label></span>                
            </span>
        </td>
    </tr>
    <tr>
        <td class="attributes_title">
            <span class="attributes_name">What Type?:</span><span class="attributes_description"></span>
        </td>
        <td>
            <span id="block_attr_sel_5">
            <span class="input_type_radio">
                <input type="radio" name="jshop_attr_id[5]" id="jshop_attr_id59" value="9" checked="true" onclick="setAttrValue('5', this.value);"> 
                <label for="jshop_attr_id59"><span class="radio_attr_label">Broken</span></label>
            </span>
            <span class="input_type_radio">
                <input type="radio" name="jshop_attr_id[5]" id="jshop_attr_id510" value="10" onclick="setAttrValue('5', this.value);"> 
                <label for="jshop_attr_id510"><span class="radio_attr_label">Good</span></label>
           </span>
           <span class="input_type_radio">
               <input type="radio" name="jshop_attr_id[5]" id="jshop_attr_id511" value="11" onclick="setAttrValue('5', this.value);"> 
               <label for="jshop_attr_id511"><span class="radio_attr_label">Flawless</span></label></span>                
           </span>
        </td>
    </tr>
    </tbody>
</table>

<span id="attr_5" class="attr_desc"></span>
<span id="attr_6" class="attr_desc"></span>
<span id="attr_9" class="attr_desc">test1</span>
<span id="attr_10" class="attr_desc">test2</span>
<span id="attr_11" class="attr_desc">test3</span> 
```

现在我希望每当用户从上面选择一个单选按钮时，相关描述将显示。所以我尝试这样：

```
<script>
jQuery(document).ready(function() {

    jQuery(".input_type_radio input[type=radio]").change(function() {
        jQuery(".attr_desc").hide();
        var test = jQuery(this).val();

        jQuery("#attr_" + test).show();
    });
    jQuery(".attr_desc").hide();
});
</script> 
```

它运行良好，但我的问题是每当加载页面时，都不会显示任何描述，即使默认情况下已经选择了两个值，我不知道为什么它不起作用。请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:26:24.063

那是因为您仅在更改事件中显示/隐藏相应的跨度...您需要检查 document.ready 中的检查值并同样显示/隐藏

尝试这个

```
 jQuery(document).ready(function() {

     jQuery(".input_type_radio input[type=radio]").change(function() {
     ..... //your code
     });
     jQuery(".input_type_radio input[type=radio]:checked").each(function(){
      jQuery("#attr_" + $(this).val()).show();
    });

}); 
```

[在这里工作小提琴](http://jsfiddle.net/b5Ey2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:48:26.343

您可以将代码更改为这种样式：

```
jQuery(document).ready(function() {

    jQuery(".input_type_radio input[type=radio]").change(function() {
        showDesc();
    });

    function showDesc() {
        jQuery(".attr_desc").hide();
        var test = jQuery(".input_type_radio input[type=radio]:checked").val();
        jQuery("#attr_" + test).show();
    }
    showDesc();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:21:15.193

因此，在绑定更改事件之前，只需检查单选按钮的现有值并相应地隐藏/显示描述。目前，您只是默认隐藏所有描述

# java - jbpm 中的 Freemarker 模板数据绑定

> ID：16102375
> 
> 赞同：0
> 
> 时间：2013-04-19T10:18:44.353
> 
> 标签：java, spring-mvc, struts2, freemarker, jbpm

我正在`JBPM5.4`用 freemarker 写我的任务形式。我的问题是，当提交 html 表单时，pojos 可能会在服务器端初始化，就像`struts`. 我已将 JBPM 与`Spring 3`使用 REST API 编写的应用程序集成。

请尽快给我正确的方向...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:34:03.297

不确定您的意思，但是您可以例如让您的任务表单返回基本数据类型并在您的流程本身中初始化 POJO（例如在您的用户任务上使用退出脚本）。

# bootstrap-typeahead - 无法获得 typeaheadjs

> ID：16102376
> 
> 赞同：0
> 
> 时间：2013-04-19T10:18:49.100
> 
> 标签：bootstrap-typeahead, typeahead.js

我已经浏览了 typeahead 参考网站。他们举了一些例子。在那个例子中，他们没有提到，运行示例程序需要添加哪些 JS。分享一些例子来理解。这对我们非常有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:19:15.970

我想您指的是 Bootstrap Typeahead 插件，而不是 Twitter Typeahead.js，它有示例链接。对于 Bootstrap Typeahead，您需要**bootstrap.js**文件（如果您下载了完整版本，则该文件已经存在）或**bootstrap-typeahead.js**，您可以从“自定义”页面获取该文件。当然还有**bootstrap.css**。

以下是一些我发现有用的示例页面： [http](http://www.webmaster-source.com/2012/11/07/getting-more-from-twitter-bootstraps-typeahead-library/) ://www.webmaster-source.com/2012/11/07/getting-more-from-twitter-bootstraps-typeahead-library/ 和 [http://www.w3resource .com/twitter-bootstrap/typehead.php](http://www.w3resource.com/twitter-bootstrap/typehead.php)

该插件不支持 ajax，因此请转到 Github 并下载启用 ajax 的分支之一并添加一些其他功能。

# javascript - 在验证之前对我进行地理编码并在输入上写地址

> ID：16102379
> 
> 赞同：1
> 
> 时间：2013-04-19T10:18:55.333
> 
> 标签：javascript, html, geolocation, geocoding

我发现了很多允许地理定位和在地图上显示的插件，但我想要一些不同的东西。

当您进入带有选项“您想要进行地理定位吗？”的页面时，我想进行地理编码。如果用户说是，我想把地址放进去`<input type="text" id="xxx">`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T06:47:05.830

所以我接受了挑战，我刚刚编写了一个实现。

这是[一个有效的 JSFiddle](http://jsfiddle.net/yHg3P/)，如下所示：

![](https://i.stack.imgur.com/IEu6U.png)

这是代码：

```
<html>
    <head>
        <style>
            label
            {
                display: inline-block;
                width: 100px;
            }
        </style>
        <script>
            function get_location()
            {
                navigator.geolocation.getCurrentPosition(geocode, handle_error);
            }

            function geocode(position)
            {
                var latlong = position.coords.latitude + "," + position.coords.longitude;

                if(window.XMLHttpRequest)
                    var request = new XMLHttpRequest();
                else if(window.ActiveXObject)
                    var request = ActiveXObject("Microsoft.XMLHTTP");

                request.open("GET", "http://maps.googleapis.com/maps/api/geocode/json?latlng=" + latlong + "&sensor=true", true);
                request.send();

                request.onreadystatechange = function()
                {
                    if(request.readyState == 4 && request.status == 200)
                    {
                        var address = eval("(" + request.responseText + ")");
                        document.getElementById("address").value = address.results[0].address_components[0].long_name + " " + address.results[0].address_components[1].long_name;
                        document.getElementById("city").value = address.results[0].address_components[6].long_name;
                        document.getElementById("county").value = address.results[0].address_components[2].long_name;
                        document.getElementById("postcode").value = address.results[0].address_components[5].long_name;
                        document.getElementById("country").value = address.results[0].address_components[4].long_name;
                    }
                }
            }

            function handle_error(err)
            {
                switch(err.code)
                {
                    case 1: /* PERMISSION_DENIED */ break;
                    case 2: /* POSITION_UNAVAILABLE */ break;
                    case 3: /* TIMEOUT */ break;
                }
                alert("Error " + err.code);
            }

            window.onload = get_location;
        </script>
    </head>
    <body>
        <label for="address">Street address: </label><input type="text" id="address" name="address"><br>
        <label for="city">City: </label><input type="text" id="city" name="city"><br>
        <label for="county">County: </label><input type="text" id="county" name="county"><br>
        <label for="postcode">Postcode: </label><input type="text" id="postcode" name="postcode"><br>
        <label for="country">Country: </label><input type="text" id="country" name="country">
    </body>
</html> 
```

随时询问您是否需要任何代码澄清！

明天我会写一个更彻底的代码分解和各种参数；该睡了！

# html - 如果内部绝对div的高度增加，自动增加相对div的高度？

> ID：16102380
> 
> 赞同：1
> 
> 时间：2013-04-19T10:19:02.397
> 
> 标签：html, css

我有以下html，

```
<div id="content">

<div id="leftcol">
<p>Lorem Ipsum</p>
</div>

</div> 
```

使用以下CSS，

```
#content {
width: 780px;
padding: 10px;
position: relative;
background: #8b847d;
}

#leftcol { 
width: 500px;
position: absolute;
} 
```

现在我需要做的是，当leftcol的高度增加时，内容的高度应该自动增加。这是小提琴，

[http://jsfiddle.net/2y97A/](http://jsfiddle.net/2y97A/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:36:06.210

`#content`当高度增加时，您不能增加`#leftcol`高度，因为它`#leftcol`是绝对定位的。`position:absolute;`如果你想`#content`增加它的高度，你必须删除。

**CSS 解决方案**

```
#content {
 width: 780px;
 padding: 10px;
 position: relative;
 background: #8b847d;
}

#leftcol { 
 width: 500px;
} 
```

看这个[**演示**](http://jsfiddle.net/2y97A/9/)

**jQuery 解决方案**

如果您仍想保持`#leftcol`绝对位置。您将需要使用 jQuery。

您可以使用下面的 jQuery 代码

```
$(document).ready(function() {
    $("#content").each(function() {
        var newHeight = 0;
        $.each( $(this).children(), function() {
            newHeight = newHeight + $(this).height();
        });
        $(this).height( newHeight );
    });
}); 
```

jQuery 在行动[**LIVE DEMO**](http://jsfiddle.net/2y97A/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:39:01.367

保持绝对定位的原因是什么？最简单的方法显然是删除它，但如果您可以仅在其中一个上删除它（#leftcol），则可以这样做：

```
#content {
width: 780px;
padding: 10px;
position: relative;
overflow: hidden;
background: #8b847d;
}

#leftcol { 
width: 500px;
float: left;
} 
```

# testing - 使用持续集成，为什么测试在提交之后而不是之前运行？

> ID：16102386
> 
> 赞同：9
> 
> 时间：2013-04-19T10:19:21.990
> 
> 标签：testing, continuous-integration, repository, teamcity, travis-ci

虽然我只有一个（单独）推送到的 github 存储库，但我经常忘记运行测试，或者忘记提交所有相关文件，或者依赖驻留在本地计算机上的对象。这些会导致构建中断，但只有在错误提交*后才会被 Travis-CI 检测到。*我知道 TeamCity 有一个预提交测试工具（它依赖于使用中的 IDE），但我的问题是关于持续集成的当前使用，而不是任何一种实现。我的问题是

> *为什么在提交更改之前*不在干净的构建机器上测试更改 - 例如 Travis-CI 用于提交后测试的那些？

这样的过程意味着永远不会出现构建中断，这意味着新的环境可以从存储库中提取任何提交并确保其成功；因此，我不明白为什么不使用提交后测试来实施 CI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-17T16:21:45.357

我以我在 GitHub 和 Jenkins 上运行的详细信息作为回答的开头。

为什么开发人员必须在提交之前在本地运行所有测试。尤其是在 Git 范式中，这不是必需的。例如，如果运行所有测试需要 15-30 分钟怎么办。您是否真的希望您的开发人员或您亲自坐在那里等待测试在您提交并推送您的更改之前在本地运行？

我们的流程通常是这样的：

1.  在本地分支中进行更改。
2.  运行您创建的任何新测试。
3.  将更改提交到本地分支。
4.  将本地更改远程推送到 GitHub 并创建拉取请求。
5.  让构建过程获取更改并运行单元测试。
6.  如果测试失败，则在本地分支中修复它们并在本地推送它们。
7.  在拉取请求中查看更改代码。
8.  批准并通过所有检查后，推送给master。
9.  重新运行所有单元测试。
10.  将工件推送到存储库。
11.  将更改推送到环境（即 DEV、QA）并运行依赖于完整环境的任何集成/功能测试。
    *   如果您有云，那么您可以将更改推送到新节点，并且只有在所有环境测试通过后，才能将 VIP 重新路由到新节点
12.  重复第 11 步，直到您完成所有 pre-prod 环境。
13.  如果您正在练习持续部署，那么如果所有测试、检查等都通过，则将您的更改一直推送到 PROD。

我的观点是，当您可以将工作卸载到持续集成服务器上并通知您以后需要修复的问题时，在本地运行测试会阻碍他们的进度，这不是很好地利用开发人员的时间。此外，在您提交它们并将工件部署到环境之前，某些测试根本无法运行。如果一个环境因为你没有云而损坏，也许你只有一台服务器，那么在本地修复它并快速推送更改以稳定环境。

如果必须，您可以在本地运行测试，但这不应该是常态。

至于多开发者问题，开源项目已经处理了很长时间。他们在 GitHub 中使用分叉，让贡献者有机会提出新的修复和功能，但这与团队中的开发人员创建本地分支、远程推送并在推送之前通过代码审查获得团队支持并没有太大区别. 如果有人推送的更改破坏了您的更改，那么您首先尝试自己修复它们，然后寻求他们的帮助。您应该遵循“早期和经常合并”的原则，以及定期将 master 的更新合并到您的分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-27T12:57:39.013

CI服务器与版本控制系统不同。CI 服务器也将代码从存储库中检出。因此，代码在 CI 服务器上进行测试时已经提交。

更广泛的测试可以定期运行，而不是在签入时，在测试时对代码的当前版本进行。想想多平台测试或负载测试。

当然，一般来说，在签入之前，您会在开发机器上对代码进行单元测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T10:25:05.997

如果您编写代码并且它在本地编译和测试通过，则不会破坏任何构建的假设是错误的。只有这样，如果您是唯一处理该代码的开发人员。但是假设我更改了您正在使用的接口，只要我没有得到使用我的接口的更新代码，我的代码就会编译并通过测试。只要您没有在界面中获得我的更新，您的代码就会编译并通过测试。当我们都签入我们的代码时，构建机器会爆炸......

所以 CI 是一个过程，基本上是说：尽快把你的更改放入并在 CI 服务器中测试它们（当然应该先在本地编译和测试）。如果所有开发人员都遵循这些规则，构建仍然会中断，但我们迟早会知道。

# php - 使用 PHP 和 MYSQL 进行年龄组统计

> ID：16102387
> 
> 赞同：4
> 
> 时间：2013-04-19T10:19:23.560
> 
> 标签：php, mysql, function, group-by

我想在我的网站上显示用户统计信息，返回年龄组的百分比，例如：

```
-13 years : $percent %
13-15 years : $percent %
15-20 years : $percent %
23+ : $percent % 
```

在我的 mysql 表中，我有一列birth_date 返回数据时间（yyyy-mm-dd）。

你有这样做的提示或想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:56:09.033

纯 SQL：

```
SELECT
    `group`,
    COUNT(*) as `count`
FROM
`user`
INNER JOIN (
    SELECT 
        0 as `start`, 12 as `end`, '0-12' as `group`
    UNION ALL 
    SELECT
        13, 14, '13-14'
    UNION ALL
    SELECT
        15, 19, '15-19'
    UNION ALL
    SELECT
        20, 150, '20+'
) `sub`
    ON TIMESTAMPDIFF(YEAR, `birth_date`, NOW()) BETWEEN `start` AND `end`
GROUP BY `group` WITH ROLLUP; 
```

其他任何东西都可以通过`PHP`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T10:24:42.367

```
select case when year(curdate() - birth_date) < 13 
            then '< 13 years'
            when year(curdate() - birth_date) between 13 and 14 
            then '13 - 14 years'
            when year(curdate() - birth_date) between 15 and 20 
            then '15 - 20 years'
            when year(curdate() - birth_date) >= 23 
            then '+23 years'
         end as `description`,
       (select count(*) from your_table) / count(*) 
from your_table
group by case when year(curdate() - birth_date) < 13 then 1
              when year(curdate() - birth_date) between 13 and 14 then 2
              when year(curdate() - birth_date) between 15 and 20 then 3
              when year(curdate() - birth_date) >= 23 then 4
         end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T10:23:20.657

如果你想要纯 sql：

```
SELECT COUNT(*)    
FROM [table_name]
WHERE birth_date < DATE_ADD(NOW(),INTERVAL 13 YEAR)

WHERE birth_date >= DATE_ADD(NOW(),INTERVAL 13 YEAR)
AND birth_date < DATE_ADD(NOW(),INTERVAL 15 YEAR)

--etc 
```

否则我会建议使用 php 来创建日期。

您可以将所有查询联合在一起并创建和 sql 视图，例如：

```
CREATE VIEW statistics AS
SELECT "0-13" as age ,COUNT(*) as total
FROM table_name
WHERE birth_date < DATE_ADD(NOW(),INTERVAL 13 YEAR)
UNION
SELECT "13-15" as age ,COUNT(*) as total
FROM table_name
WHERE birth_date >= DATE_ADD(NOW(),INTERVAL 13 YEAR)
    AND birth_date < DATE_ADD(NOW(),INTERVAL 15 YEAR)
UNION
SELECT "15-20" as age ,COUNT(*) as total
FROM table_name
WHERE birth_date >= DATE_ADD(NOW(),INTERVAL 15 YEAR)
    AND birth_date < DATE_ADD(NOW(),INTERVAL 20 YEAR)
UNION
SELECT "20-23" as age ,COUNT(*) as total
FROM table_name
WHERE birth_date >= DATE_ADD(NOW(),INTERVAL 20 YEAR)
    AND birth_date < DATE_ADD(NOW(),INTERVAL 23 YEAR)
UNION
SELECT "23+" as age ,COUNT(*) as total
FROM table_name
WHERE birth_date >= DATE_ADD(NOW(),INTERVAL 23 YEAR) 
```

然后你可以查询：

```
SELECT * from statistics 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:22:53.963

返回 datetime 作为时间戳，与 now.offset(years=??) 进行比较，在数组中分类然后统计记录。

# solr - Solr：意外的结果

> ID：16102389
> 
> 赞同：0
> 
> 时间：2013-04-19T10:19:35.430
> 
> 标签：solr

我正在使用 solr 的突出显示功能。好吧，除了一件事，它做得很好。这是回应的问题

```
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">9</int>
</lst>
<result name="response" numFound="1" start="0" maxScore="0.6901834">
  <doc>
    <str name="desc">I study in school</str>
    <str name="name">school</str>
    <str name="value">DPS</str>
    <str name="country">India</str>
    <str name="state">delhi</str>
    <str name="city">New Delhi</str>
    <str name="area">R.K. Puram</str>
    <str name="id">c02101a4-c5c2-46a9-bb73-805208167b3c</str>
    <float name="score">0.6901834</float></doc>
</result>
<lst name="highlighting">
  <lst name="c02101a4-c5c2-46a9-bb73-805208167b3c">
    <arr name="name">
      <str>school</str>
    </arr>
    <arr name="value">
      <str><em>DP</em>S</str>
    </arr>
  </lst>
 </lst>
</response> 
```

在突出显示部分，为什么我得到“名称”：“学校”字段？？？即使它没有像 "value":"DPS" 那样突出显示..

谢谢

# java - 通过 org.w3c.dom API 公开 JAXB 注释的对象

> ID：16102390
> 
> 赞同：0
> 
> 时间：2013-04-19T10:19:39.283
> 
> 标签：java, xml, dom, jaxb

我有一些使用 JAXB 注释进行注释的域对象。这可用于将对象树序列化为 XML 文档。

现在，我想通过标准`org.w3c.dom`API 公开相同的支持对象树，以利用更高级别的基于 DOM 的 API。不同之处在于我不想序列化对象树，因为：

*   我想通过 DOM API 写回同一棵树
*   当只操作树的一部分时，不需要完整的序列化

有没有实现上述功能的库？或者这是否已经可以通过标准的 JAXB API 实现？

注意：我知道有[`Marshaller.getNode(Object)`](http://docs.oracle.com/javaee/5/api/javax/xml/bind/Marshaller.html#getNode%28java.lang.Object%29)，但似乎没有在 JDK 的参考实现中实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:22:42.273

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

该`Marshaller.getNode(Object)`方法在 JAXB (JSR-222) 规范中是可选的。

*   [http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/Marshaller.html#getNode%28java.lang.Object%29](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/Marshaller.html#getNode%28java.lang.Object%29)

我已针对 EclipseLink 的下一版本提出以下增强请求，以将此行为添加到 MOXy：

*   [http://bugs.eclipse.org/332762](http://bugs.eclipse.org/332762)

* * *

您可能对`javax.xml.bind.Binder`. 它允许您维护对象图和 DOM 树，如果您对其中一个进行更改，则可以将它们应用到另一个。

*   [http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/Binder.html](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/Binder.html)

这是一个链接到一个如何工作的例子：

*   [http://blog.bdoughan.com/2010/09/jaxb-xml-infoset-preservation.html](http://blog.bdoughan.com/2010/09/jaxb-xml-infoset-preservation.html)

# ios - 在退出调用方法之前不会更新显示

> ID：16102393
> 
> 赞同：0
> 
> 时间：2013-04-19T10:19:54.493
> 
> 标签：ios, objective-c, iphone, ios6

我正在尝试在文本标签中显示带有等待指示器的等待状态。

```
-(void)progressTask {

    while (taskInProgress == YES) {

        if (progressStepChanged == YES) {
            progressStepChanged = NO;
            switch (progressStep) {
                case E_PROGRESS_NONE:
                    break;

                case E_PROGRESS_WAIT:
                    HUD.mode = ProgressHUDModeIndeterminate;
                    HUD.labelText = @"Please Wait";
                    HUD.detailsLabelText = @"Transaction in Progress";
                    HUD.labelTextColor = [UIColor whiteColor];
                    HUD.detailsLabelTextColor = [UIColor whiteColor];
                    HUD.dimBackground = YES;
                    break;

                case E_PROGRESS_DECLINED:
                    HUD.mode = ProgressHUDModeCustomView;
                    HUD.labelText = @"Transaction Result";
                    HUD.detailsLabelText = @"Declined";
                    HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Cross.png"]];
                    HUD.labelTextColor = [UIColor blueColor];
                    HUD.detailsLabelTextColor = [UIColor redColor];
                    HUD.dimBackground = YES;
                    break;

                case E_PROGRESS_COMM_LOST:
                    HUD.dimBackground = YES;
                    break;

                case E_PROGRESS_APPROVED:
                    HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]];
                    HUD.mode = ProgressHUDModeCustomView;
                    HUD.labelText = @"Transaction Result";
                    HUD.detailsLabelText = @"Approved";
                    HUD.labelTextColor = [UIColor blueColor];
                    HUD.detailsLabelTextColor = [UIColor greenColor];
                    HUD.dimBackground = YES;
                    break;

                default:
                    break;
            }
        }
        usleep(100);
    }
}

-(void)startProgressManager:(UIViewController*)viewController {
    if (HUD == nil) {
        HUD = [[ProgressHUD alloc] initWithView:viewController.navigationController.view];
        [viewController.navigationController.view addSubview:HUD];
        HUD.delegate = self;
    }
    [HUD showWhileExecuting:@selector(progressTask) onTarget:self withObject:nil animated:YES];
} 
```

“progressTask”中的每个参数都有一个观察者。ProgressHUD 类负责在信息文本中创建等待指示器。“progressTask”作为后台任务启动：

```
-(void)showWhileExecuting:(SEL)method onTarget:(id)target withObject:(id)object animated:(BOOL)animated {
    methodForExecution = method;
    targetForExecution = target;
    objectForExecution = object;    
    // Launch execution in new thread
    self.taskInProgress = YES;
    [NSThread detachNewThreadSelector:@selector(launchExecution) toTarget:self withObject:nil];
    // Show HUD view
    [self show:animated];
}

-(void)show:(BOOL)animated {

    if (animated && animationType == ProgressHUDAnimationZoomIn) {
        self.transform = CGAffineTransformConcat(rotationTransform, CGAffineTransformMakeScale(0.5f, 0.5f));
    } else if (animated && animationType == ProgressHUDAnimationZoomOut) {
        self.transform = CGAffineTransformConcat(rotationTransform, CGAffineTransformMakeScale(1.5f, 1.5f));
    }
    self.showStarted = [NSDate date];
    // Fade in
    if (animated) {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.30];
        self.alpha = 1.0f;
        if (animationType == ProgressHUDAnimationZoomIn || animationType == ProgressHUDAnimationZoomOut){
            self.transform = rotationTransform;
        }
        [UIView commitAnimations];
        [self setNeedsDisplay];
    }
    else {
        self.alpha = 1.0f;
    }
} 
```

问题是当我从 ViewController 类调用“startProgressManager”时，等待指示器仅在方法退出后（在 sleep(3) 之后）显示。

```
-(IBAction)recallBtnPress:(id)sender {
    progressManager = [ProgressManager new];
    [progressManager startProgressManager:self];
    progressManager.progressStep = E_PROGRESS_WAIT;
    sleep(3);
} 
```

我的实现是否有问题，或者任何人都可以在代码运行时为等待指示器显示提供另一个代码。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:37:44.587

不要在主线程上休眠，也不要在主线程之外更新 UI 组件。

一般模式是切换到后台任务的单独执行线程，当需要更新时切换到主线程来更新 UI。

`NSThread`只是出于好奇，您使用而不是[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)是否有原因？

* * *

**更新**

这是一个非常基本的切换到后台线程，然后切换到主线程的场景。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // THIS CODE RUNS IN THE BACKGROUND

    // Your data crunching. You can call methods on self, if it's thread safe.

    // AFTER PROCESSING
    dispatch_async(dispatch_get_main_queue(), ^(void) {
        // SWITCH BACK TO THE MAIN THREAD

        // Update the UI.
    });
}); 
```

# java - 如果准备好，则添加到队列中

> ID：16102397
> 
> 赞同：0
> 
> 时间：2013-04-19T10:20:03.737
> 
> 标签：java, android, queue

我正在使用一个复杂的封闭 api。我想创建一个超级简单的方法来使用它。基本上，它具有以下行为：

```
boolean everythingReady = false;

API.start(new Callback() {
    public void onReady()
    {
        API.invite(new Callback2() {
            public void onReady()
            {
                everythingReady = true;
            }
        });
    }
});

while (!everythingReady); // Wait

API.send("hello);
API.send("What's up"); 
```

这是一个聊天 API，上面的代码是“伪”java。

我现在想做的是：

```
API.start();
API.invite();
API.send("Hello);
API.send("What's up"); 
```

这些方法将等到上述每个方法都已正确加载（调用 onReady）才能运行。（例如`if (!apiStarted) addToQueue else do invite`：）

有没有办法在 java 中做到这一点（因为我无法编辑所有 API 源）。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:29:29.467

怎么样：

```
API.start(new Callback() {
    public void onReady()
    {
        API.invite(new Callback() {
            public void onReady()
            {
                API.send("hello");
                API.send("What's up");
            }
        });
    }
}); 
```

这样，发送方法只有在`invite`准备好后才会被调用。

# compact-framework - SqlConnection DBConnection Windowsce

> ID：16102400
> 
> 赞同：1
> 
> 时间：2013-04-19T10:20:12.237
> 
> 标签：compact-framework, windows-ce, dbconnection, mysqlconnection

我正在 Windows CE 5.0 下的 Compact Framework 3.5 中编写这段代码来处理两个不同的数据库：

```
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlServerCe;
using System.Data.Common;

public myClass
{
    private DbConnection dbCn;
    private DbCommand dbCmd;
    public void myClass(bool ce)
    {
        if (ce)
        {
            dbCn = new SqlCeConnection();
            dbCmd = new SqlCeCommand();
        }
        else
        {
            dbCn = new SqlConnection(); // COMPILER ERROR Cannot implicitly convert type 'System.Data.SqlClient.SqlConnection' to 'System.Data.Common.DbConnection'
            dbCmd = new SqlCommand();// COMPILER ERROR Cannot implicitly convert type 'System.Data.SqlClient.SqlCommand' to 'System.Data.Common.DbCommand'  
        }
    } 
```

为什么它不能将 SqlXX 转换为 DbXX ??? 来自 MSDN SqlXX 是 DbXX 的孩子！顺便说一句，SqlCeXX 没问题。我不能使用 cf 中缺少的 DbPoviderfactory。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:24:21.257

您要做的是[泛型中的协变和逆变](http://msdn.microsoft.com/en-us/library/dd799517%28v=vs.100%29.aspx)，但直到 .NET 4.0 才出现。

**[更新]**似乎从[[DbConnection]](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection%28v=vs.90%29.aspx)到[[SqlConnection]](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection%28v=vs.90%29.aspx)的转换可能会遗漏一些参数，因此 Microsoft 不允许简单的转换。

如果您真的想完成它，请在 SO 上查看此线程，并提供一些好的 How To code：

[C# DbConnection 强制转换为 SqlConnection](https://stackoverflow.com/q/3647492/153923)

# json - 发出 http post 请求以在 Blackberry OS < 7.X 中发送 json 文件

> ID：16102402
> 
> 赞同：1
> 
> 时间：2013-04-19T10:20:22.603
> 
> 标签：json, post, blackberry, httprequest

我想将一个 JSON 文件从我的 BB 设备发送到我的本地服务器。在 iOS 上，我使用了 ASIHttpRequest 库，我所做的是：

```
//send json file , using ASIHttpClass
NSURL *url = [NSURL URLWithString:urlStr];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
request.timeOutSeconds = TIME_OUT_SECONDS;
[request setRequestMethod:@"PUT"];

NSString *credentials= [self encodeCredentials];
[request addRequestHeader:@"Authorization" value:[[NSString alloc] initWithFormat:@"Basic %@",credentials]];
[request addRequestHeader:@"Content-Type" value:@"application/json; charset=utf-8"];        

[request appendPostData:[jsonString dataUsingEncoding:NSUTF8StringEncoding]];
[request startSynchronous];

if([request responseStatusCode]==200){
   return true;
} else {
     return false;
    } 
```

如何在我的 BlackBerry OS < 7.X 应用程序中实现相同的功能？

# powershell - 是否可用多任务标签 还是我必须将这些 cmd 文件合并到一个？

> ID：16102403
> 
> 赞同：0
> 
> 时间：2013-04-19T10:20:25.083
> 
> 标签：powershell, azure, startup

我是新的 Azure 开发和编写 powershell 脚本。

我想为 azure 启动任务运行两个 cmd 文件。我将这些文件添加到解决方案中并将属性设置为“**始终复制**”。在我将新注释添加到**ServiceDefinition.csdef**之后它是：

```
<Startup>
  <Task commandLine="Startup\startupcmd.cmd &gt; c:\logs\startuptasks.log" executionContext="elevated" taskType="background">
    <Environment>
      <Variable name="EMULATED">
        <RoleInstanceValue xpath="/RoleEnvironment/Deployment/@emulated" />
      </Variable>
    </Environment>
  </Task>
  <Task commandLine="Startup\disableTimeout.cmd" executionContext="elevated" />
</Startup> 
```

它没有部署并收到此错误：**角色 Web 的实例 0 正忙**

现在我的问题是：< **StartUp** > 中是否有可用的多任务标签，还是我必须将这些 cmd 文件合并到一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:10:47.450

根据[定义](http://msdn.microsoft.com/en-us/library/windowsazure/gg557553.aspx#Startup)：

> **Startup**元素描述了在角色启动时运行的*任务集合。*

所以是的，你的具体问题的答案是：是的，你可以定义多个启动任务。

状态忙碌几乎没问题，就它而言，它比骑自行车好一点！我建议它启用远程桌面并连接以查看启动任务发生了什么。设置忙碌，直到所有**简单**任务都完成并返回 0 退出代码。您的任务可能会失败或可能会挂起一段时间，这就是您会看到忙碌的原因。

# python - 数学表达式作为函数的参数？

> ID：16102405
> 
> 赞同：4
> 
> 时间：2013-04-19T10:20:31.703
> 
> 标签：python, function, math

我是一个初学者，所以请温柔一点。

我正在修改一些 Python 练习，我的代码看起来像这样。

```
def newton(x0, Tol):
    def F(x):
        return (x**3)+898
    def dF(x):
        return 3*x**2
    x=[x0]
    for n in range(400):
        x.append(x[n]-(F(x[n]))/dF(x[n]))
        if abs((x[n+1])-(x[n]))<Tol:
            conv='Converge'
            print n
            break
    if abs((x[n+1])-(x[n]))>=Tol:
        conv='No converge'
    return x[n+1], conv 
```

我定义了一个函数`F(x)`及其导数`dF(x)`并将值添加到一个列表中`x`。

任务是检查系列是否收敛，我认为我已经成功了。

但我的问题是关于拥有函数`(x**3)+898`并`3*x**2`作为函数的参数`Newton`。

我想它会是这样的

```
def newton(f, df, x0, Tol):
    def F(x):
        return f
    def dF(x):
        return df
    *calculations*
    return x[n+1], conv 
```

你会用它来称呼它

```
newton((x**3)+898, 3*x**2, x0=something, Tol=something) 
```

以便在过程中定义函数`F(x)`和。`dF(x)`

但是，`x`没有定义，所以它不起作用。

请注意，在练习中需要将 f 和 df 作为 'newton' 的参数。

你将如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T10:22:56.833

您可以使用[`lambda`s](http://docs.python.org/2/reference/expressions.html#lambda)，它们基本上是简单的功能。

你可以这样称呼它：

```
newton(lambda x: (x**3)+898, lambda x: 3*x**2, x0=something, Tol=something) 
```

这与执行以下操作相同：

```
def f1(x):
    return (x**3)+898
def f2(x):
    return 3*x**2
newton(f1, f2, x0=something, Tol=something) 
```

唯一的区别是你没有“给 lambda 起一个名字”，即将它分配给一个变量。这对于只需要使用一次的函数很方便，尤其是作为函数的关键参数，如`sorted`和`max`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T10:22:30.087

使用`lambda`：

```
newton(lambda x: (x**3)+898, lambda x: 3*x**2, x0=something, Tol=something) 
```

# php - 具有最少 api 调用的 facebook 应用程序的结构

> ID：16102408
> 
> 赞同：0
> 
> 时间：2013-04-19T10:20:49.027
> 
> 标签：php, facebook-graph-api, login, facebook-javascript-sdk, facebook-php-sdk

我阅读了 FB 上有关 PHP 登录、JS 登录、Canvas 应用程序登录的所有文章，但我仍然不清楚。在 JavaScript 中首次登录后如何让用户保持登录状态？您收到一个签名请求（您可以使用它来验证用户一次（在画布应用程序的初始加载和登录时，对吗？），假设您使用该信息来验证用户服务器端。好的，到目前为止..但是后续的页面加载呢？

基本上我的问题是这个.. 我可以使用 PHP FB SDK 来验证用户在每个页面加载时都经过身份验证，而无需调用 API 吗？如何？有没有一种与画布兼容的方法？

我不想要任何 API 调用的原因是因为我达到了一次限制，我的应用程序关闭了一整晚。不想再这样了...

我正在考虑的一种解决方法是存储用户令牌（无论如何我都想要）并在会话/cookie中使用它来在PHP中的每个页面加载时对用户进行身份验证，但我不确定这是否是最好的方法，因为：使用我自己的会话/cookie 将允许用户保持登录状态，即使他们没有登录 FB。另外，我认为 FB 不允许将其用于画布应用程序。

我发现了这些相关问题，但信息来自 2011 年：[PHP：使用 Facebook OAuth 并减少 API 调用](https://stackoverflow.com/questions/5529946/php-using-facebook-oauth-with-less-api-calls) [Facebook 登录：如何将 JavaScript 与 PHP SDK 结合起来？](https://stackoverflow.com/questions/6147631/facebook-login-how-to-combine-javascript-with-php-sdk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:29:12.153

您提到的解决方法是正确的方法。保存令牌，在它们过期时使用和更新它们——这是大多数公司坚持的方式。

只有在新用户或过期令牌的情况下才应使用 OAuth。您使用的 API 并不重要。您实际上可以通过 JavaScript 检索身份验证并将其传递给 PHP 以供进一步使用。

干杯。

# excel - 如何合并多个 .xls 文件？

> ID：16102409
> 
> 赞同：0
> 
> 时间：2013-04-19T10:20:54.230
> 
> 标签：excel, xls

我有几个`.xls`文件，它们的结构是相同的。

我需要将这些文件合并为一个 `.xls`文件。

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:29:47.523

手动：

1.  打开要复制到的主工作簿。
2.  打开下一个工作簿以从中复制工作表。
3.  选择`ctrl + left click`在每个工作表上使用的所有工作表。
4.  `right click`在工作表上，然后按复制/移动。
5.  对话框打开后，从列表中选择副本和主工作簿。
6.  媒体还行。
7.  关闭此工作簿并重复所有其他工作簿。

# windows - 为什么多个文件复制需要很长时间？

> ID：16102411
> 
> 赞同：1
> 
> 时间：2013-04-19T10:21:04.033
> 
> 标签：windows, file-copying

我必须将大约 200000 ( `pdf`) 个文件从一个驱动器移动到外部驱动器以释放我的磁盘空间。当我开始复制文件时，它的显示`18`剩余时间。如果开始复制（周围`350 GB`）的所有文件会导致任何问题吗？......

当我复制`1 GB`单个视频文件的数据时，当我尝试传输`1 GB`多个`pdf`文件的相同文件时花费的时间更少......这个背后的原因是什么？任何人都可以帮助解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:28:22.693

> 首先，这不是与编程相关的问题。

[你在问这个吗](https://superuser.com/questions/344534/why-does-copying-the-same-amount-of-data-take-longer-if-spread-across-many-separ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:35:26.227

他们在尝试使 UI 响应和计算复制时间时遇到问题。但我看到他们的估计总是不对的。似乎他们高估了复制到外部驱动器和 USB 需要多长时间。所以不要担心，只需复制！

当我复制到 USB 时，我注意到它只需要 20% 的时间，因为它需要在驱动器之间复制。

如果您想更快地复制，请使用命令提示符。

[在命令提示符下复制命令（如何使用）](http://www.bleepingcomputer.com/tutorials/windows-command-prompt-introduction/#commands%20look%20for%20Copy)

[基础命令提升](http://people.uncw.edu/pattersone/121/labs/L1_MSDOS_Primer.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:41:39.323

Windows 有两件不同的事情会耗费时间：复制实际数据和创建新的远程文件条目。数据复制是一个相当快的过程，Windows 会很快使您的网络连接或 USB 连接饱和。在 Windows 中创建新文件的速度要慢得多，尤其是对于远程共享。这会导致许多小文件一起不太大，仍然需要很长时间。

# objective-c - 在 NSTableView 中右键单击显示 NSWindow

> ID：16102412
> 
> 赞同：0
> 
> 时间：2013-04-19T10:21:04.163
> 
> 标签：objective-c, macos, cocoa, nstableview, nswindow

我想在右键单击 NSTableView 中的项目时显示 NSWindow，类似于右键单击对象时在 Interface Builder 中显示可用插座的方式：

![在此处输入图像描述](https://i.stack.imgur.com/ezLq8.png)

不幸的是，您只能使用 NSMenu 子类作为菜单属性。我也没有找到通知右键单击的 NSTableView 的委托方法。

我能够将 NSTableView 子类化并实现`rightMouseDown:`并`rightMouseUp:`收到有关这些事件的通知，但是如果我将行单元格的菜单属性设置为`nil`，即使我调用了超级实现，它们也不会在右键单击时突出显示）：

```
- (void)rightMouseDown:(NSEvent *)theEvent {
    [super rightMouseDown:theEvent];
    NSPoint eventLocation = [theEvent locationInWindow];
    eventLocation = [self convertPoint:eventLocation fromView:nil];
    NSInteger rowIndex = [self rowAtPoint:eventLocation];
    NSLog(@"Right clicked at row index %d", rowIndex);
} 
```

我想在下图中具有突出显示效果，但显示一个窗口而不是上下文菜单：

![在此处输入图像描述](https://i.stack.imgur.com/HynaE.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:56:13.833

首先是右键单击：在右键单击时明确选择行（例如[通过此消息](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTableView/selectRowIndexes%3abyExtendingSelection%3a)）。然后创建您自己的 NSWindow 后代，将自己的 NSView 类设置为 contentView，在视图中您可以绘制黑色背景、圆角边框等等。在您的右键单击处理程序中显示此窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:55:07.820

你可以使用一个`NSPopover`，它工作得很好。弹出框会为您创建一个窗口，即使它有些隐藏。例如，如果您向控件发送`window`消息，您将从控件中获取它，并且可以注册以侦听事件。

整个弹出框可以在 IB 中创建，只需要`showRelativeToRect:ofView:preferredEdge:`在代码中实现该方法。

要捕获右键单击事件，您可以使用`rightMouseDown:`，它最初在 NSResponder 中定义，但在 NSView 中被覆盖以简单地捕获事件并显示菜单，它不会在响应者链（或继承链，对于这个问题）。因此，您只需实现该方法即可调用`showRelativeToRect:ofView:preferredEdge:`.

您通常需要将内容保存在 NSViewController 及其随附的 nib 文件中。

的属性也可以在 IB 中设置`NSPopover`。`contentViewController`

总而言之，不需要太多代码。

[本教程](http://www.youtube.com/watch?v=P3uehLU67cg)很有用。

# javascript - 使用三个js显示的对象的渲染性能问题

> ID：16102414
> 
> 赞同：0
> 
> 时间：2013-04-19T10:21:08.483
> 
> 标签：javascript, three.js

我正在用 Three.js 渲染一个 obj 文件（来自搅拌机），我遇到的问题是动画随着时间的推移而变慢（相当戏剧化！）。

这是我使用的代码：

```
<script>

            var objcontainer, stats;

            var camera, scene, renderer;

            var mouseX = 0, mouseY = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            init(); 
            animate();

            function init() {

                objcontainer = document.createElement( 'div' );
                document.body.appendChild( objcontainer );

                // scene
                scene = new THREE.Scene();

                camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.z = 300;
                camera.position.x = 0;
                camera.position.y = 0;
                scene.add( camera );

                /*var ambient = new THREE.AmbientLight( 0x101030 );
                scene.add( ambient );*/

                var directionalLight = new THREE.DirectionalLight( 0xffffff );
                directionalLight.position.set( 1, 1, 1 ).normalize();
                scene.add( directionalLight );

                var loader = new THREE.OBJMTLLoader();
                loader.addEventListener( 'load', function ( event ) {
                    var object = event.content;

                    object.position.y = 20;
                    object.position.x = 0;
                    object.position.z = 0;
                    object.rotation.x = -(Math.PI / 2);
                    scene.add( object );
                }, false);
                loader.load('objects/coque.obj', 'objects/coque.mtl');
                loader.load('objects/ecran_int.obj', 'objects/ecran_int.mtl');
                loader.load('objects/ecran_tour.obj', 'objects/ecran_tour.mtl');
                loader.load('objects/app_photo.obj', 'objects/app_photo.mtl');

                renderer = new THREE.WebGLRenderer({
                    antialias       : true // to get smoother output
                });
                renderer.setClearColorHex( 0xe5e5e5, 1 );
                renderer.setSize( window.innerWidth, window.innerHeight );
                objcontainer.appendChild( renderer.domElement );            
            }

            $('#left').bind('mouseenter', function() {
                this.iid = setInterval(function() {
                camera.position.x = camera.position.x + 10;
                camera.lookAt( scene.position );
                renderer.clear();
                renderer.render( scene, camera );                 
            }, 25);
            }).bind('mouseleave', function(){
                this.iid && clearInterval(this.iid);
            });

            $('#right').bind('mouseenter', function() {
                this.iid = setInterval(function() {
                camera.position.x = camera.position.x - 10;
                camera.lookAt( scene.position );
                renderer.clear();
                renderer.render( scene, camera );              
            }, 25);
            }).bind('mouseleave', function(){
                this.iid && clearInterval(this.iid);
            });

            $('#up').bind('mouseenter', function() {
                this.iid = setInterval(function() {
                camera.position.y = camera.position.y - 10;
                camera.lookAt( scene.position );
                renderer.clear();
                renderer.render( scene, camera );              
            }, 25);
            }).bind('mouseleave', function(){
                this.iid && clearInterval(this.iid);
            });

            $('#down').bind('mouseenter', function() {
                this.iid = setInterval(function() {
                camera.position.y = camera.position.y + 10;
                camera.lookAt( scene.position );
                renderer.clear();
                renderer.render( scene, camera );              
            }, 25);
            }).bind('mouseleave', function(){
                this.iid && clearInterval(this.iid);
            });

            $('#zoom-in').bind('mouseenter', function() {
                this.iid = setInterval(function() {
                camera.position.z = camera.position.z - 10;
                camera.lookAt( scene.position );
                renderer.clear();
                renderer.render( scene, camera );              
            }, 25);
            }).bind('mouseleave', function(){
                this.iid && clearInterval(this.iid);
            });

            $('#zoom-out').bind('mouseenter', function() {
                this.iid = setInterval(function() {
                camera.position.z = camera.position.z + 10;
                camera.lookAt( scene.position );
                renderer.clear();
                renderer.render( scene, camera );              
            }, 25);
            }).bind('mouseleave', function(){
                this.iid && clearInterval(this.iid);
            });

            $('#init').bind('click', function() {
                camera.position.z = 300;
                camera.position.x = 0;
                camera.position.y = 20;
                camera.lookAt( scene.position );
                renderer.clear();
                renderer.render( scene, camera );              
            });

            function animate() {

                requestAnimationFrame( animate );
                render();
            }

            function render() { 
                requestAnimationFrame(render); 
                renderer.render(scene, camera); 
            } 

        </script> 
```

在 Safari 上，性能下降的速度有点慢，在 Chrome 上它很快。

任何帮助表示赞赏:)

杰弗里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:51:48.937

一个 jsfiddle 会更容易调试。但我高度怀疑这是因为您正在从事件处理程序 setInterval 函数调用 render() 。这根本不是必需的，因为您已经在动画函数中渲染了每一帧。

我认为您的代码可以使每一帧的场景被多次渲染，因为间隔没有正确清除。这可以解释为什么它会随着时间的推移而减慢；冗余渲染（）调用的数量不断增长......

尝试删除所有

```
 renderer.clear();
            renderer.render( scene, camera ); 
```

从您的事件处理程序/setintervals。

编辑：您可以检查一些控制文件（[https://github.com/mrdoob/three.js/blob/master/examples/js/controls/FirstPersonControls.js](https://github.com/mrdoob/three.js/blob/master/examples/js/controls/FirstPersonControls.js)），了解它们如何使用事件处理程序实现运动（动画） . 事件中没有逻辑发生，他们只设置了一个变量，如`movingForward = true;`. 然后在单个 update() 循环中完成实际移动。在您的情况下，这种方法也可能更好。

编辑#2：实际上只是注意到你的主动画循环设置不正确，这可能是主要问题（关于事件处理程序的东西仍然值得考虑）。它还会导致冗余的渲染调用。尝试从您的 render() 函数中删除 requestAnimationFrame 调用，就像您在 animate() 中所做的那样。

```
 function animate() {
            requestAnimationFrame( animate );
            render();
        }

        function render() { 
            // requestAnimationFrame(render); <-- remove this
            renderer.render(scene, camera); 
        } 
```

# bit-manipulation - 匹配位算法

> ID：16102416
> 
> 赞同：0
> 
> 时间：2013-04-19T10:21:12.473
> 
> 标签：bit-manipulation, bit

我有一个问题，我需要找到两个整数之间的匹配位数（从左到右）

输入：2 个变量 A 和 B 来存储我的十进制数

输出：A 和 B 中匹配的位数（从左侧开始）

一些例子：

`A = 3 and B = 2`, A 和 B 位匹配左起 7 位

`A = 3 and B = 40`, A 和 B 位匹配左起 7 位。

如何使用按位运算（AND、OR、XOR）来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:25:16.567

将两者异或（产生一个从左边到第一个不匹配元素全为零的数字），然后将结果右移直到等于 0。从您正在处理的整数的位长度中减去它（例如，您似乎在暗示 8 位）。

伪代码：

```
int matchingBits(A, B) {
    result = A XOR B
    int shifts = 0
    while (result != 0) {
        result = result >> 1 (Shift right the result by 1)
        shifts++
    }
    return integer_bit_length - shifts
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:17:35.027

执行 (A XNOR B) 以查找匹配的数字：

```
10101010
01001011
--XNOR--
00011101 
```

然后使用汉明算法来计数：[Count number of 1's in binary representation](https://stackoverflow.com/questions/8871204/count-number-of-1s-in-binary-representation)

（顺便说一句：xnor 是 !xor）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:29:17.883

试试这个可能会奏效

```
int matchingBitsCount(val1,val2)
{
  int i , cnt = 0;
  for(i=7;i>=0;i--)
 {
       if(((1<<i)&a)^((1<<i)&b))==0)  //left shifted for starting from left side and then XOR
       {
       cnt++;
       }
      else
      {
        break;
      }
   }
 } 
```

如果您想检查 int，我将 val1 和 val 2 作为 char，然后只需 i=31

# internet-explorer-8 - ie8 和 ie9 上的 CSS 径向渐变

> ID：16102420
> 
> 赞同：0
> 
> 时间：2013-04-19T10:21:19.817
> 
> 标签：internet-explorer-8, internet-explorer-9, css

有没有办法在 ie8 和 ie9 上进行以下工作？

谢谢

```
background: -moz-moz-radial-gradient(center top, farthest-side, rgba(175,175,175,0.3) 0%, rgba(255,255,255,0) 100%); /* FF3.6+ */
background: -webkit-gradient(radial, center top, farthest-side, 0px, center top, farthest-side, 100%, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,0))); /* Chrome,Safari4+ */
background: -webkit-radial-gradient(center top, farthest-side, rgba(175,175,175,0.3) 0%,rgba(255,255,255,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-radial-gradient(center top, farthest-side, rgba(175,175,175,0.3) 0%,rgba(255,255,255,0) 100%); /* Opera 12+ */
background: -ms-ms-radial-gradient(center top, farthest-side, rgba(175,175,175,0.3) 0%,rgba(255,255,255,0) 100%); /* IE10+ */
background: radial-gradient(farthest-side at center top, rgba(175,175,175,0.3) 0%,rgba(255,255,255,0) 100%); /* W3C */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:26:31.213

我注意到您在将`-moz-`and`-ms-`前缀加倍的问题中遇到了 CSS 问题。那些肯定不会那样工作的。

忽略这一点，您是对的，径向渐变是旧 IE 中的一个问题。事实上，CSS 渐变通常在旧 IE 版本中存在问题，因为 IE 9 或更早版本不支持 CSS 渐变。

我在 IE 6-9 中对 CSS 渐变的常规解决方案是[CSS3Pie](http://css3pie.com/)。

然而对于径向渐变，这还不够，因为 CSS3Pie 目前不支持径向渐变。有关这方面的更多信息，请参阅[css3pie 文档](http://css3pie.com/documentation/supported-css3-features/)。去引用：

> 目前不支持径向渐变；此功能计划在未来的版本中发布（请参阅问题 #2），但由于 VML 奇怪的径向渐变行为，它可能无法在 IE 6-8 中实现。

您拥有的另一个选择是使用 IE 的`filter`风格，（并接受它带来的所有奇怪的问题和怪癖）。即使在这里，径向渐变也很困难，但这里有一个解决方案可能会有所帮助：[为 Internet Explorer 6/7/8 创建径向渐变](https://stackoverflow.com/questions/7230250/create-a-radial-gradient-for-internet-explorer-6-7-8)

# php - PHP：Web服务错误SoapClient

> ID：16102422
> 
> 赞同：0
> 
> 时间：2013-04-19T10:21:27.380
> 
> 标签：php

来自 SoapUI 的请求

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:not="http://xxx.xxx.xxx.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <not:SaasNotificationResponse>
         <hostID>UCALL</hostID>
         <orderID>1180000335810000000010</orderID>
         <custID>1180000335770000000010</custID>
         <typeTransaction>SUSPENSION</typeTransaction>
         <status>3</status>
         <message>SUSPENSION 1180000335770000000010</message>
         <notifyAttr>
            <name>?</name>
            <value>?</value>
         </notifyAttr>
      </not:SaasNotificationResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

来自 SoapUI 的响应：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:SaasNotificationResponseResponse xmlns:ns2="http://xxx.xxxx.xxx.com/">
         <return>F</return>
         <return>Invalid TypeTransaction</return>
      </ns2:SaasNotificationResponseResponse>
   </S:Body>
</S:Envelope> 
```

* * *

编写 PHP 客户端；

```
require_once('lib/nusoap.php'); 
try {
    $client = new SoapClient("http://xxx.xxx.xxx/Notification?WSDL");       
    $data =  array( 'hostID' => 'UCALL',
         'orderID' => '1180000335810000000010',
         'custID' => '1180000335810000000010',
         'typeTransaction' => 'ACTIVATION',
         'status' => '3',
         'message' => 'Activation complete',
         'notifyAttr' => array(
            array('name'=>'AccountID','value'=>'110022101010'),
            array('name'=>'PackageID','value'=>'1')
          )  
);

    $return=$client->SaasNotificationResponse($data);
    //$return=$client->call('SaasNotificationResponse',($data));        
    print_r($return);       
 }catch (SoapFault $e){
    echo $e;
} 
```

> 错误应用程序。 **致命错误：在 C:\wamp\www\spgdtws\notification.php 中调用未定义的方法 soapclient::SaasNotificationResponse()**

我在 php webservice 应用程序中遇到问题。如果使用soapUI。可以调用 webservice 服务器。但是当我在客户端上使用该应用程序时。发生错误。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T08:01:49.080

您似乎正在为 Telkom 的服务调用通知 WSDL。这段代码对我有用

```
<?php
function sendNotification($orderID,$custID,$typeTransaction,$status,$message) {
    try {
        $client = new SoapClient("XXXXXXXXX/Notification?wsdl",array("trace"=>1,"exceptions"=>1));

        $data =  array( 'hostID' => '',
                'orderID' => $orderID,
                'custID' => $custID,
                'typeTransaction' => $typeTransaction,
                'status' => $status,
                'message' => $message,
                'notifyAttr' => array(
                    array('name'=>'','value'=>''),
                    array('name'=>'','value'=>'')
                )             
         );

        $return=$client->SaasNotificationResponse($data);

    var_dump($return);

    }catch (SoapFault $e){
        echo $e;
    }
}
sendNotification('1180000339980000000010','4720562','TERMINATION','3','TERMINATION success');

?> 
```

您不需要包括 nusoap。请改用原生 PHP 的 SOAP。SoapClient 类属于原生 PHP。

供参考： http: [//php.net/manual/en/class.soapclient.php](http://php.net/manual/en/class.soapclient.php)

# java - 使用 Spring 自定义数据源使用 JRDataSource 创建报告模板

> ID：16102426
> 
> 赞同：2
> 
> 时间：2013-04-19T10:21:36.677
> 
> 标签：java, spring, report

我已经按照[http://krams915.blogspot.com/2010/12/spring-3-mvc-jasper-integration.html](http://krams915.blogspot.com/2010/12/spring-3-mvc-jasper-integration.html)的教程创建了一个碧玉报告。现在，我需要使用 Spring JRData Source 创建一个模板。

Spring 自定义 JRData Source 的 Factory 类是什么？

检索 JRData Source 的静态方法是什么？

怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T07:58:42.470

在这种情况下，JRData Source 只是本教程后面设计的 DAO 类的包装器（请参阅 SalesDAO）。此类返回构成 Spring JRData Source 的销售对象列表（完整定义请参见 Sales 类）。

您不必创建任何工厂类/静态方法来访问此数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T02:54:07.363

使用 JRBeanCollectionDataSource，真的很容易使用，只需创建一个带有对象列表的新实例，即报表中的对象。

```
List<Object> reportItems = getReportItems();
JRDataSource datasource = new JRBeanCollectionDataSource(reportItems); 
```

请看这个[源代码](http://www.jarvana.com/jarvana/view/jasperreports/jasperreports/3.5.3/jasperreports-3.5.3-sources.jar!/net/sf/jasperreports/engine/data/JRBeanCollectionDataSource.java?format=ok)，是一个 JRDataSource 的实现，是一个非常简单的接口。主要方法是 getFieldValue，该方法接收一个[JRField](http://grepcode.com/file/repo1.maven.org/maven2/net.sf.jasperreports/jasperreports/4.7.1/net/sf/jasperreports/engine/JRField.java)（这是另一个具有字段名称的简单类）并返回一个 Object，toString() 是打印在报告中的字符串。

对不起，我的英语不好

干杯

# python - 运行测试时，Django 1.5.1“'STDOUT_LINE'未定义”

> ID：16102429
> 
> 赞同：0
> 
> 时间：2013-04-19T10:21:47.147
> 
> 标签：python, django, tdd

当我在 Django 中为我的应用程序运行测试时，出现以下异常

`.......NameError: global name 'STDOUT_LINE' is not defined`

测试用例中只有 9 个测试方法。

什么可能导致这个问题，可能有人已经遇到过这种问题？

### 详细输出

```
$ : ./manage.py test profile
/Users/sultan/.virtualenvs/yoda/lib/python2.7/site-packages/nose/util.py:14: DeprecationWarning: The compiler package is deprecated and removed in Python 3.x.
  from compiler.consts import CO_GENERATOR

nosetests --verbosity 1 profile --verbosity=2 --with-snot --with-xtraceback --with-coverage --cover-package=profile
/Users/sultan/.virtualenvs/yoda/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py:53: RuntimeWarning: SQLite received a naive datetime (2013-04-22 11:19:12.808338) while time zone support is active.
  RuntimeWarning)

Creating test database for alias 'default'...
Test page to create order ... ok
Test with anonymous user, index page should give a login form ... ok
Test with anonymous user, index page should give a login form ... ok
Test drivers list ... ok
Test operators list ... ok
Test if login works ... ok
Test if user logged in as manager will be redirected to /manager page ... ok
Test if user logged in as operator will be redirected to /operator page ... NameError: global name 'STDOUT_LINE' is not defined 
```

### 更新 url 测试

```
# -*- coding: utf-8 -*-
from django.test import TestCase
from django.core.urlresolvers import reverse

from profile.tests.factories import UserFactory
from profile.models import ROLE_OPERATOR, ROLE_USER
from profile.models import ROLE_ADMIN, ROLE_DRIVER, ROLE_MANAGER

class TestUrls(TestCase):
    """ Test common project wide urls """

    def setUp(self):
        self.user = UserFactory.create(role=ROLE_USER)
        self.admin = UserFactory.create(role=ROLE_ADMIN, is_superuser=True)
        self.driver = UserFactory.create(role=ROLE_DRIVER)
        self.manager = UserFactory.create(role=ROLE_MANAGER)
        self.operator = UserFactory.create(role=ROLE_OPERATOR)

    def get(self, url, follow=True):
        return self.client.get(url, follow=follow)

    def login(self):
        self.client.login(username=self.manager.username, password='pass')

    def test_index_page_login(self):
        """ Test with anonymous user, index page should give a login form """
        res = self.get(reverse('profile:index'))
        self.assertContains(res, 'Login')
        self.assertEqual(res.status_code, 200)

    def test_login(self):
        """ Test if login works """
        res = self.get(reverse('profile:login'))
        res2 = self.get(reverse('profile:login'), follow=False)
        self.assertEqual(res.status_code, 200)
        self.assertEqual(res2.status_code, 302)

    def test_operator_redirect(self):
        """
        Test if user logged in as operator
        will be redirected to /operator page
        """
        self.login()
        res = self.get(reverse('profile:index'))
        self.assertTrue('/operator' in res.request['PATH_INFO'])

    def test_manager_redirect(self):
        """
        Test if user logged in as manager
        will be redirected to /manager page
        """
        self.login()
        res = self.get(reverse('profile:index'))
        self.assertTrue('/manager' in res.request['PATH_INFO'])

    def test_references_page(self):
        """ Test references """
        self.login()
        res = self.get(reverse('profile:reference'))
        self.assertEqual(res.status_code, 200)
        self.assertTemplateUsed('profile/reference.html')

    def test_list_drivers(self):
        """ Test drivers list """
        self.login()
        res = self.get(reverse('profile:drivers'))
        self.assertEqual(res.status_code, 200)
        self.assertTemplateUsed('profile/driver_list.html')

    def test_list_operators(self):
        """ Test operators list """
        self.login()
        res = self.get(reverse('profile:operators'))
        self.assertEqual(res.status_code, 200)
        self.assertTemplateUsed('profile/operator_list.html')

    def test_error500(self):
        """ Test with anonymous user, index page should give a login form """
        res = self.get(reverse('profile:error500'))
        self.assertEqual(res.status_code, 200)

    def test_create_order_page(self):
        """ Test page to create order """
        res = self.get(reverse('profile:new_order'), follow=False)
        self.assertEqual(res.status_code, 302)

        self.login()

        res = self.get(reverse('profile:new_order'))
        self.assertEqual(res.status_code, 200) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:42:25.590

问题解决了，因为断言失败

```
def test_operator_redirect(self):
    """ Test if user logged in as operator will be redirected to /operator page """
    self.login(self.operator)
    res = self.get(reverse('taxi:index'))
    self.assertTrue('/operator' in res.request['PATH_INFO']) 
```

所以我改变了方法，虽然如果失败`self.login`，这个错误会再次出现`self.assertTrue`

```
def login(self, user):
    self.client.login(username=user.username, password='pass') 
```

# ios - 动态应用内设置

> ID：16102431
> 
> 赞同：4
> 
> 时间：2013-04-19T10:21:50.407
> 
> 标签：ios, iphone, xcode, settings, inappsettingskit

我有一个位置很重要的应用程序。目前，我在设置包中有一个多值设置，其中定义了 5 个位置。这种方法的问题在于设置包是静态的 - 即据我所知，我无法从服务器上的 JSON 列表更新它。

我想从服务器上的动态列表中更新位置列表。

我看过 InAppSettingsKit 但这也使用标准设置包。是否可以使用 InAppSettingsKit 从远程列表动态导入设置更新。

还有其他方法可以做我想做的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:52:33.093

您将无法动态更改有关 Settings.app 的列表。Settings.app 始终使用您的应用程序包中的静态模式 plist。（您可以使用自由格式的文本字段，但这可能不符合您的情况。）

使用 InAppSettingsKit，您可以做到这一点，但您必须做一些额外的工作：对于动态部分，您需要使用[自定义视图控制器](https://github.com/futuretap/InAppSettingsKit#custom-viewcontrollers)，例如表格视图控制器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T10:34:14.330

处理此问题的最佳方法是将多值存储在 NSUserDefaults 中并开始使用它们。在这种方法中，您将能够更新这些值，并且它将在多个会话中保持不变。

**编辑（回答评论）：**

将其保存为用户默认值。

```
NSDictionary *appDefaults =  [NSDictionary dictionaryWithObjectsAndKeys:
                              @"your Object", "Your Key"
                              nil];

[[NSUserDefaults standardUserDefaults] registerDefaults:appDefaults];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

取回它：

```
[[NSUserDefaults standardUserDefaults] integerForKey:@"Your Key"]; 
```

# php - 在 WP_Query 中使用 LIKE %some_title% 实现 add_filter

> ID：16102433
> 
> 赞同：0
> 
> 时间：2013-04-19T10:21:56.507
> 
> 标签：php, wordpress

我正在尝试向我的 WP_Query（以下代码）添加过滤器以搜索 post_title LIKE %some_title%

```
$args = array(
    'post_type' => 'product',
    'posts_per_page' => $page_size,
    'paged' => $page,
    'post_status'      => 'publish',
    'orderby'          => 'title', 
    'order'            => 'ASC',

  );

  $result = new WP_Query($args); 
```

如何添加过滤器以将产品标题与 $some_title 匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:27:35.077

你可以这样试试

```
$query = "
        SELECT      *
        FROM        $wpdb->posts
        WHERE       $wpdb->posts.post_title LIKE '$param2%'
        ORDER BY    $wpdb->posts.post_title
";
$wpdb->get_results($query); 
```

替代方式和标准方式

```
add_filter( 'posts_where', 'wpse18703_posts_where', 10, 2 );
function wpse18703_posts_where( $where, &$wp_query )
{
    global $wpdb;
    if ( $wpse18703_title = $wp_query->get( 'wpse18703_title' ) ) {
        $where .= ' AND ' . $wpdb->posts . '.post_title LIKE \'' . esc_sql( like_escape( $wpse18703_title ) ) . '%\'';
    }
    return $where;
} 
```

以这种方式使用

```
$args = array(
    'post_type' => 'product',
    'wpse18703_title' => 'your string',
    'posts_per_page' => $page_size,
    'paged' => $page,
    'post_status'      => 'publish',
    'orderby'          => 'title', 
    'order'            => 'ASC',

  );
 $result = new WP_Query($args); 
```

# cookies - _ga cookie 中的值是什么？

> ID：16102436
> 
> 赞同：62
> 
> 时间：2013-04-19T10:22:10.990
> 
> 标签：cookies, google-analytics, analytics, web-analytics, analytics.js

我正在使用[通用分析](https://support.google.com/analytics/answer/2790010?hl=en&ref_topic=2790009)。通用分析创建第一方 cookie`_ga`

```
 _ga=1.2.286403989.1366364567; 
```

286403989 是 clientId

1366364567 是时间戳

`1`_ga `2`cookie是什么？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-19T14:38:58.810

```
_ga=1.2.286403989.1366364567; 
```

## 第一场

这是一个版本号。以防 cookie 格式在未来发生变化。目前似乎固定为1。上面是一种旧格式。较新的 cookie 将此值设置为“GA1”

## 第二场

此字段用于在不同路径或域中设置多个 cookie 的情况下找出正确的 cookie。

默认情况下，cookie 设置在 path`/`和 document.location.hostname 上的域中（去掉了 www. 前缀）。

您可以在 sub.example.com 上设置一个 _ga cookie，在 example.com 上设置另一个 cookie。因为浏览器上 cookie API 的工作方式无法判断您使用的 cookie 是正确的。

所以第二个数字是域中的组件数（点分隔）。

*   对于 sub.example.com，数字为 3
*   例如.com 这个数字是 2

路径默认为，`/`但您也可以通过将`cookiePath`选项传递给`ga.create`方法来更改它。如果您传递它，该字段将变为 2 个数字破折号分隔。第二个数字是路径中的数字斜线。

使用这些数字，analytics.js 脚本可以正确识别要使用的 cookie，以防设置多个 cookie。

例如：假设您有一个位于 sub1.sub2.example.com/folder1 的站点，如果您只想将 cookie 存储在您的站点上并且不使其对其他子域或文件夹可见，您可以使用以下配置：

```
ga('create', 'UA-XXXX-Y', {
  'cookiePath': '/folder1/',
  'cookieDomain': 'sub1.sub2.example.com'
}); 
```

在这种情况下，cookie 看起来像这样；

```
_ga=1.4-2.XXXXXXXX.YYYYYYY 
```

## 第三场

这是一个随机生成的用户 ID。用于识别不同的用户。

## 第四场

这是第一次为该用户设置 cookie 的时间戳。

```
new Date(1366364567*1000)
> Fri Apr 19 2013 06:42:47 GMT-0300 (BRT) 
```

这也用于在 userId 冲突的情况下唯一标识用户。

值得一提的是，cookie 不是 API。将来它可能会完全改变。Google 不建议直接读取/写入 _ga cookie。您应该通过analytics.js 等跟踪库之一与Google Analytics 进行交互。除了好奇之外，这些信息没有太多用处。

如果您直接读取/写入 cookie，那么您做错了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-01T11:04:48.077

我认为这会有所帮助。

```
/**
 * Get Google Analytics UID
 * @return int
 */
public function getGAUID() {
    $uid = 0;
    if ($_COOKIE['__utma'])
        list($hash_domain, $uid, $first_visit, $prew_visit, $time_start, $num_visits) = sscanf($_COOKIE['__utma'], '%d.%d.%d.%d.%d.%d');
    elseif ($_COOKIE['_ga'])
        list($c_format, $c_domain, $uid, $first_visit) = sscanf($_COOKIE['_ga'], 'GA%d.%d.%d.%d');

    return $uid;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-21T09:29:02.393

用 ES6 语法用 NodeJS 编写。可以帮助某人吗？

```
// Example: GA1.2.494614159.1574329064
const gaCookieGeneration = ({ version = 1, domain, rootpath = '/' }) => {
  const subdomains = (domain.match(/./) || []).length + 1;
  const rootpathDirs = (rootpath.match(/\//) || []).length;
  const cookiePath = rootpathDirs > 1 ? `-${rootpathDirs}` : '';
  const uniqueId = Math.random().toString().substr(2, 9);
  const timeStamp = (+new Date()).toString().substr(0, 10);
  return `GA${version}.${subdomains}${cookiePath}.${uniqueId}.${timeStamp}`;
};
const gaCookie = gaCookieGeneration({
  domain: '.example.com',
}); 
```

# intellij-idea - Intellij 12 - 锁定 Junit 配置

> ID：16102437
> 
> 赞同：1
> 
> 时间：2013-04-19T10:22:14.237
> 
> 标签：intellij-idea

我必须更改我的 JUnit 配置，因为必须设置一些系统属性。InteliJ 有时会删除这些配置，我怀疑是由于最大配置限制 - 这让我非常抓狂！

是否可以锁定特定配置，使其不会被删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:45:12.507

您应该[保存配置](http://www.jetbrains.com/idea/webhelp/creating-and-saving-temporary-run-debug-configurations.html)以使其持久化。

另一种方法是增加临时配置的限制或将您的选项置于**默认**配置中。

# java - 递归：在达到结束条件时终止所有实例

> ID：16102442
> 
> 赞同：0
> 
> 时间：2013-04-19T10:22:28.150
> 
> 标签：java, selenium, recursion, webdriver

我有一个 webElements 列表，我需要遍历并单击每个元素，但是因为每次单击都会刷新页面，所以我得到一个 StaleElementReferenceException。每个元素如下所示：

```
<img src="images/english/edit.gif" border="0" height="24" width="47"> 
```

因此，我使用递归方法单击每个 webElement，然后将索引传递给下一个实例并刷新列表：

```

public int enterDescription(int place)
{
    列表描述 = driver.findElements(By.cssSelector(img[src='images/english/edit.gif']));

`for (int index = 0; index < descriptions.size(); index++) 
           {
               index = place;
               if(place==descriptions.size()) 
               {
                   return place;
               } 
               else
               {
                   descriptions.get(index).click();
                   enterDescription(place++);
               }
           }
        return place;   }` 

这最初一直有效，直到方法崩溃时的完成条件，达到结束条件后，我需要立即终止所有实例。有任何想法吗？

            回答 #1

赞同：0

时间：2013-04-19T23:13:55.353

你真的不需要递归来做到这一点。您只需要在每次通过 for 语句开始时刷新您的描述。像这样的东西：

```
 public void enterDescription() {
        int numberOfImages = driver.findElements(By.cssSelector(img[src='images/english/edit.gif'])).size();

    for (int index = 0; index < numberOfImages; index++) {
        List<WebElement> descriptions = driver.findElements(By.cssSelector(img[src='images/english/edit.gif']));
        descriptions.get(index).click();
        // Test something
        // Do something to return to initial page
        }
    } 
```

            回答 #2

赞同：0

时间：2013-04-19T10:40:23.560

忽略递归的东西，你实现了用这个结构终止的愿望

```
public interface Terminatable {
    void terminate();
}

public class Terminator {
    private LinkedList<Terminatable> terminatables = new LinkedList<Terminatable>();

    public void register(Terminatable terminatable) {
        terminatables.offer(terminatable);
    }

    public void unregister(Terminatable terminatable) {
        terminatables.remove(terminatable);
    }

    public void terminate() {
        Terminatable terminatable = terminatables.poll();

        while(terminatable != null) {
            terminatable.terminate();
            terminatable = terminatables.poll();
        }
    }
}

public class Worker implements terminatable {
    private Terminator terminator;

    public Worker(Terminator terminator) {
        this.terminator = terminator;
        terminator.register(this);
    }

    public void terminate() {
        // do your termination stuff here
    }

    [...]

    public void work() {
        // do your work and start termination when you are finished
        terminator.terminate();
    }
} 
```

如果您不再需要他们，请记住取消注册您的工人！

```

# apache - 当 URL 以 % 结尾时出现 400 错误请求

> ID：16102444
> 
> 赞同：1
> 
> 时间：2013-04-19T10:22:33.473
> 
> 标签：apache, .htaccess, internal-server-error

所有以 % 结尾的 URL 都出现以下错误

“错误请求，您的浏览器发送了此服务器无法理解的请求。”

根据我的以 % 结尾的谷歌分析 URL 正在运行，我已经重新设计了我的网站和更早的网站。

我想提一下，我尝试使用相同的旧 htaccess 但无法修复它。我所做的其他重要更改是托管，我将服务器指向子文件夹或根目录。

请帮我修复它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:22:18.487

`%`是一个保留字符，不应用于除百分比编码之外的任何内容。

如果您确实需要在您的网址上传递字符，请使用`%25`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:24:22.937

试试这个：[当 URL 以 % 结尾时出现 400 Bad Request](https://stackoverflow.com/questions/16102444/400-bad-request-when-url-ends-with%) （将鼠标移到它上面并查看 URL，这是添加了 % 的页面的 URL！）

问题可能是 % 被用作特殊符号（如空格或非拉丁字符）的转义字符，并且浏览器需要它后面的代码。

# forms - Laravel 雄辩 has_many_and_belongs_to sync() 无需写入数据库

> ID：16102448
> 
> 赞同：2
> 
> 时间：2013-04-19T10:23:04.760
> 
> 标签：forms, sync, laravel, has-and-belongs-to-many, eloquent

简而言之，Laravel 的 eloquent 是否有类似它的`sync()`功能，不会立即将关系保存到数据库？

我有两个模型

```
Place (id, name, address); 
```

和

```
Feature (id, name); 
```

这两个模型使用数据透视表彼此具有 has_many_and_belongs_to 关系 `feature_place(place_id, feature_id)`。这按预期工作。现在我正在尝试构建一个用于创建新地方的表单。该表单包含每个现有功能的复选框。对于错误处理，我希望能够在提交表单时创建一个 Place 对象。我希望能够创建我的`HABTM`关系，因此如果提交失败（验证错误或类似情况），我可以轻松地重建并填写表格。`sync()`通常会处理关系，但由于提交失败，我还不想在数据库中插入 Place。有没有一种简单的方法，比如，在我和它`sync()`之间建立关系`Place``Features`我可以用来在重建时重新填充我的表单，而不必在表单提交成功之前写入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:37:56.757

听起来您需要将输入刷新到会话，然后在呈现表单时加载旧值。

```
// Somewhere in your post route
if ( $oh_noes_teh_validator_failed )
{
    Input::flash();
    Redirect::to_route( 'my-edit-form' );
}

// Somewhere in your edit route or view
$title = Input::old( 'title', $title ); 
```

# javascript - 如何从 google map api 中的 json 文件中读取 json 数据

> ID：16102450
> 
> 赞同：2
> 
> 时间：2013-04-19T10:23:10.870
> 
> 标签：javascript, jquery, json, google-maps-api-3

我正在尝试制作带有标记的谷歌地图 api，它将显示某些地方的纬度和经度。我正在尝试使用 json 文件执行此操作，但它不起作用.. 这是我的代码..

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Cluster Map</title>

    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js" type="text/javascript"></script>

    <script type="text/javascript">
        var map;
        var markers = [];

        function initialize() {
            geocoder = new google.maps.Geocoder();
            var center = new google.maps.LatLng(43.474144,-112.03866);
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 7,
                center: center,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            markMultiple();
        }

        function markMap(latLng, content){
            var marker = new google.maps.Marker({
                position: latLng
            });
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(content);
                infowindow.open(map, marker);
            });

            markers.push(marker);
        }
        function markMultiple(){
            $.parseJSON('test.json', function(data) {
                $.each(data.markers, function(i, obj) {
                    var latLng =  new google.maps.LatLng(obj.lat,obj.lng);
                    var content = obj.id + ':' + obj.lat + ',' + obj.lng;

                    markMap(latLng, content);
                });
            });

             var markerCluster = new MarkerClusterer(map, markers);
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>
<body>
    <div id="map-container">
        <div id="map"></div>
    </div>
</body> 
```

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T17:47:03.940

工程师是对的，你需要使用 $.getJSON 方法，$.parseJSON 接受一个 JSON 字符串，它不加载外部文件。

getJSON：[http:](http://api.jquery.com/jQuery.getJSON/) //api.jquery.com/jQuery.getJSON/ parseJSON：[http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

我将您的代码放在 jsFiddle 中，它正在使用 getJSON 和替代测试 JSON 文件（您没有提供您正在使用的原始 test.json）。

```
$.getJSON('test.json', function(data) {
                $.each(data.markers, function(i, obj) {
                    var latLng =  new google.maps.LatLng(obj.lat,obj.lng);
                    var content = obj.id + ':' + obj.lat + ',' + obj.lng;

                    markMap(latLng, content);
                });
            }); 
```

[http://jsfiddle.net/WYfjv/](http://jsfiddle.net/WYfjv/)

如果您的代码不工作，可能您的 JSON 格式不正确（尝试 JSONLINT 来测试它）。另外，如果您已经在改进，我建议您使用普通的 for 循环而不是 $.each :)

# mysql - MySQL - 基于最新日期的过滤表

> ID：16102455
> 
> 赞同：0
> 
> 时间：2013-04-19T10:23:21.543
> 
> 标签：mysql, sql, wamp

我在stackoverflow上的第一篇文章请温柔！

我有一个 MySQL (5.5.24) 数据库（WAMP 设置），其中有一个包含这样记录的表

```
Person_ID     R_Date    

137           2013-01-01    
137           2013-02-01
137           2013-03-15  
168           2013-01-01
168           2013-02-01
168           2013-03-21
172           2013-01-01
172           2013-02-01
172           2013-03-27 
```

但是，我希望使用最近/当前的 R_Date 为每个 Person_ID 设置 1 条记录。

所以结果看起来像这样：

```
Person_ID    R_Date

137          2013-03-15
168          2013-03-21
172          2013-02-27 
```

由于不确定术语，我很难找到答案，这可能非常简单。

可以使用 PHP While 循环与多个 MySQL 查询相结合来获得此结果，但如果可能的话，我会使用纯 MySQL 解决方案。也许我追求的结果可以通过子查询来实现？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:30:33.800

```
SELECT Person_ID, MAX(R_Date) as 'R_Date' FROM TableName GROUP BY Person_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:26:25.850

```
SELECT *
FROM PERSONTABLE a
WHERE R_Date = ( SELECT MAX(R_Date) 
                 FROM PERSONTABLE b 
                 WHERE a.Person_ID = b.Person_ID
               ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:27:26.920

```
SELECT Person_ID, MAX(R_Date) FROM <YourTable> GROUP BY Person_ID 
```

# c# - C# 中的 LDAP 身份验证 - 输入字符串的格式不正确

> ID：16102456
> 
> 赞同：1
> 
> 时间：2013-04-19T10:23:26.200
> 
> 标签：c#, authentication, ldap

我正在尝试通过 C# 中的 LDAP 对用户进行身份验证。每次我尝试登录时，都会收到“输入字符串的格式不正确”错误。

这是我的连接字符串：

```
 <connectionStrings>
    <add name="MyConnectionString" connectionString="LDAP://123.193.111.22:389.local" />
</connectionStrings>
<system.web>
    <roleManager enabled="true" />
    <membership defaultProvider="MyMembershipProvider"><providers>
    <add name="MyMembershipProvider"
    connectionStringName="MyConnectionString"
    type="System.Web.Security.ActiveDirectoryMembershipProvider, 
    System.Web, Version=2.0.0.0, Culture=neutral, 
    PublicKeyToken=b03f5f7f11d50a3a"
    connectionUsername="MyUsername"
    connectionPassword="MyPassword" 
    connectionProtection="Secure"
    enableSearchMethods="true" />
    </providers>
    </membership>
    <trust level="Full" />
</system.web>
<authentication mode="Forms">
    <forms name=".ADAuthCookie" loginUrl="~/Admin/Login" 
    timeout="450" slidingExpiration="false" protection="All"/>
</authentication> 
```

错误似乎在***type="System.Web.Security.ActiveDirectoryMembershipProvider***。任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:05:41.027

我已经设法弄清楚了。不得不重新编写会员提供程序代码，现在我可以对用户进行身份验证。

# android - 具有所有屏幕分辨率的图像上按钮的相同位置

> ID：16102459
> 
> 赞同：1
> 
> 时间：2013-04-19T10:23:43.717
> 
> 标签：android

我正在尝试将一些 ImageButtons 粘贴在 ImageView 上的特定位置。问题是我必须对 ImageButtons 使用绝对布局，并且当我更改屏幕分辨率时，所有 ImageButtons 都会从它们的位置移动。

我一直在整个网络上寻找答案，但找不到任何东西。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:34:17.350

只需使用[相对布局](http://developer.android.com/reference/android/widget/RelativeLayout.html)而不是[绝对布局](http://developer.android.com/reference/android/widget/AbsoluteLayout.html)。如果你不喜欢相对布局，你可以使用绝对布局，它没有什么问题，只是在大多数情况下不实用。您可以使用绝对布局并通过以下方式缩放屏幕上的视图：[Scale a view and its layered subviews relative](https://stackoverflow.com/questions/6500156/scale-a-view-and-its-layered-subviews-relatively)

[Dianne Hackborn（在谷歌工作）说](https://groups.google.com/forum/?fromgroups=#!msg/android-developers/QA-Wax5nHpQ/Kp218t1nBEcJ)：

> 我再说一遍：我们不会从未来的版本中删除 AbsoluteLayout，但我们强烈劝阻人们不要使用它。
> 
> 如果你选择不相信我，欢迎你，但我不对你做出这个决定负责。

这是覆盖按钮的方法：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/image" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="34dp"
        android:layout_marginRight="40dp"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button2"
        android:layout_below="@+id/button1"
        android:layout_marginRight="37dp"
        android:layout_marginTop="108dp"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:26:16.043

我建议您不要在布局中使用绝对位置。如果可以将按钮放在正确的位置，请使用容器和一些边距。

如果您确实需要取决于设备的绝对位置，则可以为每种分辨率使用特定尺寸。看这里：

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

# javascript - Marionette.js 与 Chaplin.js 的比较

> ID：16102466
> 
> 赞同：7
> 
> 时间：2013-04-19T10:24:19.637
> 
> 标签：javascript, model-view-controller, backbone.js, marionette, chaplinjs

我目前正在构思一个大型单页 Web 应用程序。会有很多组件，所以关注点分离对我来说很重要。服务器基本上是一个带有一些糖的 REST 服务器，比如向客户端发送模板代码。

所以我需要决定我想在客户端使用哪个 MVC 框架。

我真的很喜欢backbone.js，所以我想要一个依赖它的大框架。

我过来的是 Marionette.js 和 Chaplin.js。

有没有人使用过一个或两个框架并且可以稍微介绍一下它们？优势、劣势、背后的社区还是它们基本相同？

这不应该是关于哪个更好的讨论，只是一个简短的功能列表，所以我可以更好地决定使用哪个，因为我没有时间真正开始使用两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T19:20:25.303

没有与 Marionette 合作过，但基本上卓别林在以下情况下是一个明智的决定：

*   你需要一个更有主见的架构。如果您需要一组规则/约定来在团队中启动和运行，这很有用。
*   内存管理是一个问题。
*   您可能来自 Ruby 背景，并且对使用 Coffeescript 感到更自在。

此外，如果您正在构建一个大型应用程序，那么在卓别林中，请准备好自己解决很多事情。文档就[在那里](https://github.com/chaplinjs/chaplin/tree/master/docs)，但您经常会发现自己“独自一人在黑暗中”。不过，来源得到了很好的评论，这是值得赞赏的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T11:50:11.157

我有大约 1 年的 Marionette.js 经验。当您拥有自己的架构但不知道如何使用视图层时，Marionette.js 是最佳选择。我喜欢下一个方案：

1.  主干作为数据层的核心（模型、集合、rest api）
2.  Marionette.js 用于视图层（ItemView 用于一个实体，CollectionView 用于实体集合，CompositeView(entity + collection) 等。
3.  Reveal.js 数据绑定
4.  HBS 作为模板
5.  你自己的路由和核心逻辑

我向您推荐了[早午餐工具](http://brunch.io/)- 是编译、准备和构建您自己的 SPA 的丰富工具。当然，您必须看到[Grunt + Yo + Bower](http://yeoman.io/)是另一个丰富的工具。

# regex - Oracle 正则表达式中的前瞻

> ID：16102471
> 
> 赞同：4
> 
> 时间：2013-04-19T10:24:29.083
> 
> 标签：regex, oracle, phone-number

我对 Oracle 的正则表达式有疑问。我在不同的桌子上有很多电话号码。现在我的任务是统一它们。所以我去掉了所有的空格、下划线、减号等等。但随后棘手的部分来了——起初这似乎很容易。

有带和不带国际代码的数字，例如 0046812345678 和 0812345678。所以我想用 '0046' 替换一个（！）前导零。我认为这`^0(?=[1-9])`可以完成这项工作，但甲骨文似乎认为前瞻是无用的。 `(^0)(1|2|3|4|5|6|7|8|9)`也不做这项工作（或`(^01|02|03|04|05|06|07|08|09)`就此而言），因为它会将第一个非零数字替换为 0812345678 到 004612345678 （因此，第一个“8”消失）。

我搜索并尝试了很长时间，但无法提出更多的可能性。任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T10:34:33.910

您需要将第一个 1-9 添加到结果中，以便仅`0`匹配以单个开头的数字。为了保留前 1-9，我们捕获它（使用括号）并将其添加到替换部分（使用`\1`）。这似乎有效：

```
select regexp_replace('0812345678', '^0([1-9])', '0046\1') from dual; 
```

结果： `0046812345678`

# python - 计算文件夹中结构相似的文本文件中的行数并将计数相加

> ID：16102472
> 
> 赞同：-4
> 
> 时间：2013-04-19T10:24:31.770
> 
> 标签：python, function, count

感谢您在星期五的所有帮助。对不起，也许我的简单问题。由于我是 Python 的初学者，有时我会遇到一些对于更专业的人来说很容易的问题，但我会努力提高自己。

我将更详细地澄清我之前的问题。我有一些文本文件，在您的指导下，我可以数出这些文本文件的行数。我想创建一个新的文本文件作为输出，在这个新文件的每一行中，我都有输入文件的名称以及带空格的行数，并且该文件的最后一行包含行号的总和. 例如，我有一些文件：points1.txt、points2.txt 和 points3.txt。输出文件为：

点1 144798 点2 100000 点3 258627 总和 503425

我的代码是：

导入操作系统文件夹 = 'E:/MLS_HFT/TEST/Stuttgart_2009_pointclouds/'

```
def total_lines():

    count_line = 0

    for filename in os.listdir(folder):
        infilename = os.path.join(folder,filename)
        if not os.path.isfile(infilename): continue
        infile= open(infilename, 'r')

        for lines in infile:
            i+=1

        outfile = ["%s " %i]
        return i
        outfile = ["%s " %i]
        outfile.write("\n".join(output))
        outfile.close()
        return outfile

        total_lines (infile,i)
        count_line = count_line + i

        output = ["%s  %s" %(item.strip() ,count_line) for item in outfile]
    outfile.write("\n".join(output)) 
```

我很感谢您的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:27:51.680

如果您只想要每个文件中行数的总数：

```
>>> import fileinput
>>> i = 0 # default value 
>>> for line in fileinput.input(files=('test.txt', 'test2.txt')):
        i += 1

>>> i
20 
```

这可以简化为：

```
sum(1 for line in fileinput.input(files=('test.txt', 'test2.txt')) 
```

如果您想要单个文件，并且还必须将它们相加，只需在函数中使用它：

```
with open('test.txt') as f:
    sum(1 for line in f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:30:00.237

要获取文件中的行数，请打开它并读取如下行：

```
fid = open('your input filename', 'r')
lines = fid.readlines()
nLines = len(lines) 
```

然后，您可以将上述内容放在一个循环中，打开每个文件并将所有 nLines 值相加以计算总数。

编辑：

像这样循环文件：

```
infiles = ['file1.txt', 'file2.txt', 'file3.txt', ... , 'fileN.txt' ]
totalLines = 0

# Loop over array of files
for filename in infiles:
    # Open file:
    fid = open(filename, 'r')

    # Read lines and get length of returned array (array of lines):
    lines = fid.readlines()
    nLines = len(lines)
    totalLines += nLines   # Sum with total lines

    # Close the file
    fid.close()

# Show total:
print "Total lines from all files: " + totalLines 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:50:04.907

假设您的文件结构如下，并且每个文件中的标题是“点”

```
file1.txt     file2.txt    file3.txt

points        points       points
23            43           12
34            32           45
45            21           99
56                         100
                           123 
```

代码如下：

```
import pandas as pd # pandas is powerful
import glob # finds all the pathnames matching a specified pattern 
import os
file_count_and_sum = []
os.chdir("E:/Pointfiles") # the folder where your text files are
for file in glob.glob("*.txt"):
    data = pd.read_csv(file)
    file_count_and_sum.append([file,len(data['points'].values),sum(data['points'].value        s)])
print file_count_and_sum 
```

您的输出将像这样打印文件名、计数和总和；

```
[['file1.txt', 4, 158], ['file2.txt', 3, 96], ['file3.txt', 5, 379]] 
```

编辑：在那种情况下，这行得通吗？

```
count = 0  
for file in glob.glob("*.txt"):
   data = pd.read_csv(file)
   count = count + len(data['points'].values)
print count 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:27:00.283

```
def Total_Lines():    
    Open_File = open(File_Name,'U').read()
    Last_Line = Open_File.count('\n')
    print Last_Line 
```

计算文件中的行数

对于多个文件

```
import glob

def Total_Lines(path):
    Count_Line = 0
    a = glob.glob(path+'\*')
    for i in a:
        print i
        Open_File = open(i,'U').read()
        Last_Line = Open_File.count('\n')
        print Last_Line
        Count_Line = Count_Line+Last_Line
    print Count_Line

Total_Lines(r"F:\stack") 
```

# php - Mysql find result_id where name = "x" 然后删除共享该 result_id 和 name="y" 的其他条目

> ID：16102475
> 
> 赞同：0
> 
> 时间：2013-04-19T10:24:43.647
> 
> 标签：php, mysql, sql

我混合使用 php 和 mysql 来执行以下查询，我确信必须有一种方法可以在 SQL 中执行此操作。我已经删除了一些代码并留下了足够的内容，您应该能够看到我想要完成的工作。

任何帮助将非常感激！

```
SELECT result_id FROM categories
WHERE name = "conventional"

foreach ( $results as $row ){
    $query = "
    DELETE FROM categories
    WHERE result_id = $row->result_id && (name = 'va' OR name = 'fha' OR name = 'usda' OR name = 'other')
    ";
    $this->db($query);
} 
```

编辑：从我目前收到的答案来看，我认为我解释得不够好。此表中的列是 id、result_id、name

有多个条目共享相同的 result_id，因为它们与“结果”表中的条目相关。所以我试图找到名为“conventional”的条目的result_id，这样我就可以找到所有具有相同result_id的条目，如果它们的名字是“va”、“fha”、“usda”或“other”，则将它们删除

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:28:49.010

```
DELETE FROM categories 
WHERE name IN ("va", "fha", "usda", "other")
AND result_id IN (
  SELECT result_id FROM categories
  WHERE name = 'conventional'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:33:34.867

您想避免在循环中删除查询，这是如何做到的：

```
SELECT result_id FROM categories
WHERE name = "conventional"

// Now build csv of ids    
$arx = array();
foreach ( $results as $row ) {
    $arx[] = $row->result_id;
} 

if(!empty($arx)) {
    $arx_1 = implode(',', $arx);
    $query = "DELETE FROM categories
    WHERE result_id in ({$arx_1}) AND (name = 'va' OR name = 'fha' OR name = 'usda' OR name = 'other')";

    $this->db($query);
} 
```

# php - qooxdoo : Access-Control-Allow-Origin 不允许 XMLHttpRequest Origin null

> ID：16102476
> 
> 赞同：0
> 
> 时间：2013-04-19T10:24:44.987
> 
> 标签：php, xampp, qooxdoo

我有一个 qooxdoo 项目，它使用以下代码从在线服务器获取 JSON：

```
var url = "http://www.example.com/json.php?q=parameter_here";
var store = new qx.data.store.Json(url,"GET", "text/plain");
store.addListener("changeModel", function(ev) {
    console.log("changeModel()");
    console.log("getData", ev.getData());
});
store.addListener("error", function(ev) {
        console.log("error", ev.getData());
    });
    store.addListener("changeState", function(ev) {
    console.log("state", ev.getData());
}); 
```

我正在使用 iMac，本地路径是`/Users/SomeUser/Path/To/index.html`

我尝试`index.html`像往常一样在 Chrome 浏览器中加载，但失败了，因为 Chrome 将 Javascript 阻止为`Origin null is not allowed by Access-Control-Allow-Origin`. 在我阅读了这个[问题](https://stackoverflow.com/questions/5224017/origin-null-is-not-allowed-by-access-control-allow-origin-in-chrome-why)的答案后，我知道我必须将它托管在 Web 服务器中。因此我为这个站点设置了一个 XAMPP。

由于我的 XAMPP 现有别名很少，因此我为此站点添加了一个新别名，如下所示：

```
<Directory "/Users/SomeUser/Path/To">
        Options All
        AllowOverride All
        Require local
        Order allow,deny
        Allow from all
</Directory>
Alias /myalias "/Users/SomeUser/Path/To" 
```

当我这样设置别名时，会报告 403 Forbidden。然后，我在 SO 上找到了这个[问题](https://stackoverflow.com/questions/6807317/fixing-403-forbidden-on-alias-directory-with-apache)，但答案没有帮助。仍然是 403 禁止。

*我的目标是将站点加载到本地 XAMPP 服务器中。*我错过了什么？当我将文件夹上传到在线网络服务器时，它工作正常。

在 XAMPP Apache`error_log`中，它显示：

> [Fri Apr 19 17:51:09 2013] [error] [client 127.0.0.1] (13)Permission denied: access to /myalias/index.html denied

对于该文件，其权限为：

```
drwxr-xrwx  7 SomeUser  staff  238 Apr  2 16:48 . 
```

注意：我不想更改 Chrome 启动选项以覆盖该`Access-Control-Allow-Origin`政策。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:30:58.110

您确实意识到您所要做的就是转到您的 xampp/mamp 安装文件夹，找到 htdocs 文件夹并在其中创建一个包含您的项目的新文件夹（例如测试），然后在浏览器中访问它，例如：`http://localhost/test/`对吗？

# jquery - 在 jqGrid 中选择页脚

> ID：16102479
> 
> 赞同：0
> 
> 时间：2013-04-19T10:24:51.080
> 
> 标签：jquery, jqgrid

jqGrid 有一个事件`onCellSelect`参考：[http](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events) ://www.trirand.com/jqgridwiki/doku.php?id=wiki:events 您可以使用它，以便在选择单元格时进行事件处理。我正在使用`footerrow`包含总数的A，并且在选择室内的单元格时需要进行一些事件处理。

我可以使用相应的事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:37:10.817

没有内置的 jqGrid 页脚选择方法。

[但是，我在 jqgrid 中的页脚行是否可选择/可点击](https://stackoverflow.com/questions/14245061/is-a-footer-row-in-a-jqgrid-selectable-clickable/14258048#14258048)中回答了这个问题？这应该让你走上正确的道路。

# css - 强制 z-index 尊重固定定位

> ID：16102480
> 
> 赞同：0
> 
> 时间：2013-04-19T10:24:54.607
> 
> 标签：css, z-index

恐怕我没有正确理解 z-index，并且无法让我的 CSS 像我想要的那样分层。我试图让描述浮动在底部固定 div 上方，我认为使用 z-index 很简单 - 给它一个索引 3，高于页面上的其他两个单位。但由于某种原因，它的行为不如预期 - 谁能告诉我为什么？

HTML 示例：

```
<div id="wrapper">
    <div class="portfolio-slideshow">
        <div class="slideshow-meta">
            <p class="slideshow-title">My Title</p>
        </div>
    </div>
</div>
<div id="footer-hairline">
</div> 
```

CSS：

```
#wrapper {
    margin: 0 190px 0 100px;
}
.portfolio-slideshow {
    margin: 10px 0 0;
    z-index: 1;
    clear: both;
    position: relative;
}
.slideshow-meta {
    position: fixed;
    bottom: 30px;
    font-size: 13px;
    color: #989799;
    line-height: 14px;
    z-index: 3;
}
#footer-hairline {
    height: 70px;
    width: 100%;
    border-top: 1px solid #CCC;
    background: #FFF;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
} 
```

如果我删除 .portfolio-slideshow 的 z-index，它会按预期工作。但为什么我必须这样做？我在这里遗漏了一些东西，但我不知道是什么。

我做了一个 JS Fiddle 在这里演示：http: [//jsfiddle.net/qZzYM/1/](http://jsfiddle.net/qZzYM/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:29:43.750

刚才回答了一个类似的问题

[Chrome中不同父级元素的z-index](https://stackoverflow.com/questions/16083813/z-index-of-elements-in-different-parents-in-chrome/)

基本上

子元素的 z 索引永远不能高于其父元素。这就是当您删除父 zindex 时它起作用的原因

# uri - 可以在 og:image 和 og:url href 属性中保留协议吗？

> ID：16102482
> 
> 赞同：3
> 
> 时间：2013-04-19T10:24:55.023
> 
> 标签：uri, meta, facebook-opengraph

一段时间以来，我一直在系统地使用双斜杠、独立于协议的 URL 版本，在 HTML（用于`href`锚点和`src`图像）和 JS（用于 XHR）中。今天我一直想知道这是否可以在 OpenGraph 标签上实现。

目前我有这个：

```
<meta property="og:image" content="http://static.example.com/image.png">
<meta property="og:url" content="http://example.com"> 
```

我一直想知道使用以下内容会产生什么效果：

```
<meta property="og:image" content="//static.example.com/image.png">
<meta property="og:url" content="//example.com"> 
```

*   这是规范允许的吗？
*   （主要）实现是否允许这样做？
*   有没有我没有看到的明显问题？
*   我在想这完全错了吗？
*   **有没有人这样做过或尝试过这个？**

好吧，这有点太多的问题，但你可以看到我要去哪里：*我（和其他可能会遇到这个问题的开发人员）应该使用显式协议还是可以将它们留给*属性`og:*`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:57:58.783

通过将这些`meta`带有属性的元素添加`property`到您的页面，您正在使用[RDFa](http://en.wikipedia.org/wiki/RDFa)（它是[RDF](http://en.wikipedia.org/wiki/Resource_Description_Framework)的序列化格式）。所以你正在参与语义网。

语义网的基本思想是使用 URI 来描述由 URI 表示的事物。一些 URI 代表网页（我们都知道这些），而另一些 URI 代表现实世界或抽象事物（如*JRR Tolkien人、**爱*的概念或*埃菲尔铁塔*）。（有关如何区分这些，请参阅[此答案。）](https://stackoverflow.com/a/16017139/1591669)

例如，这个 URI 代表物理世界的建筑物（**不是**关于该建筑物的[网页](http://dbpedia.org/page/Eiffel_Tower)）：
`http://dbpedia.org/resource/Eiffel_Tower`

HTTPS 变体 ( `https://dbpedia.org/resource/Eiffel_Tower`) 将是一个完全不同的 URI，*原则上*，它可以用于不相关的东西，比如足球等。对于 RDF（与 Web 中的常见做法相反），HTTP URI 与其对应的 HTTPS 之间没有关系。

因此，当您提供有关这两个 URI 的 RDF 语句时，（起初）并不清楚两者指的是同一事物。当您为两个 URI 使用唯一对象时，它们可以映射为相同的意思。您还可以使用 OWL (→ `owl:sameAs`) 显式指定两个 URI 表示同一事物。

所以，这不是被禁止或错误的，但我建议只使用你的一个“同义”URI 来表示页面/事物。其他人可能想用你的 URI（→ things/pages）来做 RDF 语句，所以最好他们都使用相同的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-11-08T09:20:17.177

不，这是错误的。为什么？Facebook 解析器不知道协议如何在站点上使用。

# ios - IOS：UISearchDisplayController 和 UITableView。

> ID：16102484
> 
> 赞同：0
> 
> 时间：2013-04-19T10:25:03.803
> 
> 标签：ios, uitableview, uisearchbar, uisearchdisplaycontroller

我有一个关于在我的应用程序中使用的最佳对象的问题。

我有一个包含**NSString**、**NSDate**、**double的三列****UITableView**。我想帮助用户**过滤**并进行最简单的查询。使用**UISearchBar**我可以轻松过滤文本，但我不确定。我想要**三种不同**类型的搜索。当日期用于例如**UIDatePicker 时**。最好的方法是什么？预先感谢您的任何回复。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:37:22.603

```
 1)For String  you can use the UISearchBar it will help you to search according to the text entered in it.

  2)For double you can  use the same UISearchBar but you can convert the text which is entered in searchbar as double and proceed filtering with your data.

  3)For NSDate you can give an Option to the user like From Date and To Date so that you can filter and display the records in between the dates 
```******

# css - 在 jQuery UI CSS 框架中使用矢量图标作为 Web 字体而不是 PNG

> ID：16102489
> 
> 赞同：8
> 
> 时间：2013-04-19T10:25:14.450
> 
> 标签：css, jquery-ui, svg, icons, webfonts

我有一个共同的理解问题，我不清楚什么是最好的前进方式。所以我决定向社区寻求建议。

jQuery UI 定义了[CSS 框架](http://wiki.jqueryui.com/w/page/12137970/jQuery%20UI%20CSS%20Framework)，其中包含“ui-icon”类和许多用于不同标准图标（[总共 320 个图标](http://wiki.jqueryui.com/w/page/26308090/ThemeRoller%20icon%20set)）的特定类，可以在[测试页面](http://jquery-ui.googlecode.com/svn/tags/latest/tests/static/icons.html)上看到。有很多插件、网站等等都在使用 CSS 框架。例如[jqGrid Pluging](http://www.trirand.com/blog/?page_id=6)使用它。jqGrid 将创建的网格包含图标。

在写了关于使用[Font Awesome 图标](http://fortawesome.github.io/Font-Awesome/)而不是一些[jQuery UI 图标](http://jquery-ui.googlecode.com/svn/tags/latest/tests/static/icons.html)[的答案](https://stackoverflow.com/a/13865495/315935)之后，我经常问我同样的问题：**为什么****[jQuery UI CSS 框架](http://jqueryui.com/themeroller/)****有*****光栅*****图标而不是基于*****矢量*****的图标**？在我看来，另外实现 jQuery UI CSS 框架的图标部分是非常实用的。在这种情况下，可以只替换 jQuery UI 主题并以更好的方式实现图标。

 **我们现在生活在高 DPI 显示器的时代（平板电脑和智能手机的事件）。很多人在 Web 浏览器中使用 100% 以上的缩放设置作为标准设置。如果一个人
![在此处输入图像描述](https://i.stack.imgur.com/haPMI.png)
与
![在此处输入图像描述](https://i.stack.imgur.com/GUnVA.png)
一个人比较，就会发现差异非常明显。

当前版本的网络浏览器（包括旧版 IE7）支持基于矢量的网络字体，其中至少一种格式为 WOFF、EOT、TTF、OTF 或 SVG。这些字体是 W3C 工作草案文档“CSS Fonts Module Level 3”的一部分（参见[http://www.w3.org/TR/css3-fonts/#src-desc](http://www.w3.org/TR/css3-fonts/#src-desc)）。

那么，为什么不用网络字体替代品替换当前 jQuery UI 的 PNG 图标呢？有许多免费的开源字体已经提供了（见[这里](http://fortawesome.github.com/Font-Awesome/#all-icons)、[这里](http://www.entypo.com/)、[这里](http://icomoon.io/app/)、[这里](http://shoestrap.org/downloads/elusive-icons-webfont/)等等）人们需要的最多（但不是全部）图标。

我看到的使用网络字体的额外好处将是简化 jQuery UI 主题的创建。如果我比较基本主题内部使用的图像*ui-icons_XXX_256x240.png*，或者如果我将那里与另一个主题的相应图像进行比较，那么我认为图像中使用的颜色是它们之间的唯一区别。在使用矢量字体的情况下，可以指定`color`，`background-color`或使用CSS 样式来更改颜色`linear-gradient`或`radial-gradient`产生漂亮的颜色效果：
![在此处输入图像描述](https://i.stack.imgur.com/lFTF6.png)

**我看到使用矢量图标有很多优势，但直到现在我还没有找到一个可以对矢量图标提出功能请求的好地方。**我发布[了功能请求](https://github.com/FortAwesome/Font-Awesome/issues/645)和[这个](https://github.com/addyosmani/jquery-ui-bootstrap/issues/127)，但我越来越认为我们这里有**常见的 jQuery UI 框架问题**。

在[jQuery 2.0 发布后](http://blog.jquery.com/2013/04/18/jquery-2-0-released/)不再支持 IE 6/7/8 之后，是不是该考虑用基于矢量的 Web 字体替换基于光栅的 PNG 图标了？

**可能我错过了基于使用矢量的网络字体的一些重要缺点？**例如非常糟糕的表现（我直到现在才看到）或其他一些东西？**创建所有需要的图标是否过于复杂？还有其他一些问题吗？**

我决定提出这个问题，以引起其他人对我所看到的问题的注意。恐怕，如果没有来自社区的相应反馈，我的功能请求将没有任何后果。

**哪种方式最适合放置此类功能请求？**我必须补充一点，字体或图片的创建不是我自己擅长的主题。所以我自己不能参与实施。对不起。

欢迎您对本主题提出任何建议或意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:52:16.463

字体不利于实现图标。看路标——至少需要三种颜色。为此，字体将被 SVG 或类似格式替换，可能带有提示说明。

> 为什么 jQuery UI 框架有光栅图标而不是矢量

我认为，目前缺乏基于矢量的图标实现的标准。

> 创建所有需要的图标是否过于复杂？还有其他一些问题吗？

是的，在一种字体中创建所有图标并不容易，并且在所有浏览器中都能正常工作。但是还有另一个问题。好的解决方案是以矢量格式实现 google 的 logo，而不是光栅。如您所见，这还没有发生。**

# qlikview - 加密受保护的数据以供 qlikview 使用

> ID：16102490
> 
> 赞同：0
> 
> 时间：2013-04-19T10:25:18.473
> 
> 标签：qlikview

数据库中有很多数据，我希望不同的 qlikview 实现能够使用这些数据。

MS-SQL 数据库中的数据是针对几个客户的，我不想让他们直接进入数据库。我想要一个 API，客户可以通过 SSL 和密码保护获取他们的数据。

同时，我希望客户在他们的 qlikview 程序中使用数据尽可能简单。

什么是我们构建的最佳解决方案，以便客户可以轻松地使用我们数据库中的数据以及我加密和保护的数据？

/安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:26:08.390

有不同的方法可以做到这一点。一种解决方案是通过 https 访问。

您使用简单的 webappkicaton 设置了一个网络服务器。该应用程序返回一个仅包含客户数据的 html 表。身份验证 (Ssl) 可以通过密码或 TLS 以安全的方式完成。

授权可以在网络服务器或应用程序中处理。

从 html 表格导入记录在 QlikView 中效果很好，但它有点取决于大小。

高温高压

# html - 在 xml 中转义 html

> ID：16102491
> 
> 赞同：0
> 
> 时间：2013-04-19T10:25:21.333
> 
> 标签：html, xml, escaping

我遇到了一个问题，即在与**SOAP**的 Web 服务交互时出现无效**XML**字符。

 **使用特定的 Web 服务，我发送了一条格式为 html 的消息，但在某些情况下，我收到了如下失败的消息。

```
Fault message :
org.xml.sax.SAXParseException: Character reference "&#xF;" is an invalid XML character. 
```

`&#xF`字符参考什么？即使我用它包装了这条消息，`<![CDATA[ and ]]>`但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:32:40.563

没有参考`&#xF`，但看看[这个页面](http://konfiguracja.c0.pl/webpl/encje.html)，它是波兰语，但你可以找到 html/javascript 的 NCR...**

# wordpress - 如何在响应式主题中动态调整图像列表的大小？

> ID：16102493
> 
> 赞同：1
> 
> 时间：2013-04-19T10:25:23.603
> 
> 标签：wordpress, themes, responsive-design, wordpress-theming

我正在构建我的第一个响应式主题，这是我遇到的两个问题中的第二个。

如果你去[http://digitaldemo.net/landmark/](http://digitaldemo.net/landmark/)并向下看底部，有一个水平的图像列表，编码如下：

```
<ul>
<li>image 1</li>
<li>image 2</li>
<li>image 3</li>
<li>image 4</li>
<li>image 5</li>
</ul> 
```

在 480px res 或更小的屏幕上，列表变为 3 张图片而不是 5 张，但我也希望像标头图片一样调整图片大小。我能够通过添加来调整标头图像的大小，`max-width:100%`但这不适用于此图像列表。

任何帮助，将不胜感激！

谢谢，

辛西娅

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:42:07.210

首先，通过在两种不同尺寸上显示和隐藏基本相同的元素，我认为你从一个完全错误的角度来解决问题：从**可用性**的角度来看（如果有屏幕阅读器的用户访问你的网站怎么办？） ，从**编码标准**的角度来看（臃肿的代码，难以维护，[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）和从**SEO**的角度来看（重复的内容？关键字填充？）。

其次，你有两个不同的元素使用相同的`id`. 这不应该发生：[**s 必须是唯一的**](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)[**。`id`**](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)

第三，解决您的问题：为了通过 CSS 动态调整图像大小，您必须通过 percent**设置其尺寸**。在您的情况下，我会将 CSS 设置为如下所示：

```
#scroll.mobile ul {
    width: 100%;
}

#scroll.mobile li {
    width: 33%; /* You wanted three images per row, right? */
}

#scroll.mobile li img {
    max-width: 100%;
} 
```

这样，您的列表元素将占据整个窗口空间，每个列表项仅占其中的三分之一，并且包含的​​图像将被限制在窗口的三分之一。

# asp.net - 如何绑定列表 对象到gridview

> ID：16102500
> 
> 赞同：1
> 
> 时间：2013-04-19T10:25:52.037
> 
> 标签：asp.net

下面是我的代码

```
 List<test> Students = new List<test>(){
    new test() { name = "Jack", imgpath = "15", Des = "100" },
    new test() { name = "Smith", imgpath = "15", Des = "101" },       
    new test() { name = "Smit", imgpath = "1", Des = "102" }
};
GridView1.DataSource = Students;
GridView1.DataBind(); 
```

我的课是：

```
public class test
{
    public string name;
    public string imgpath;
    public string Des;  
 } 
```

但它给了我错误“在选定的数据源上找不到名为'name'的字段或属性。”

那么如何解决呢。我不知道我的代码有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:27:56.907

尝试：

```
public string name { get; set };
public string imgpath { get; set };
public string Des { get; set }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T06:57:02.873

如前所述，无法绑定到字段，而是使用属性。

我看到你正在使用 ASP.net，目前找不到任何关于它的绑定的信息，但我认为它对 WPF 的解释很好，猜想微软对 ASP.NET 也有同样的想法。有关 WPF 绑定选项的说明，请参阅下面的链接。

字段不是绑定源规范的一部分：http: [//msdn.microsoft.com/en-us/library/ms743643.aspx](http://msdn.microsoft.com/en-us/library/ms743643.aspx)

# c++ - 在 OpenGL C++ 中检测鼠标点击

> ID：16102503
> 
> 赞同：7
> 
> 时间：2013-04-19T10:26:15.860
> 
> 标签：c++, glut

我是 OpenGL 的初学者，我正在尝试创建一个游戏，其中我有一个原始图像作为背景。游戏开始时，我会显示该图像，然后我希望能够单击它并在之后显示另一张图像。我尝试使用该功能`glutMouseFunc`，但是当我尝试运行该程序时，我收到一条消息，提示该程序停止工作。以下是我的代码的一些部分： 我有一个全局变量 onMouse；如果我单击鼠标按钮，变量取值为 1，如果它的值为 1，我会尝试加载第二个图像。

```
int onMouse;
void mouseClicks(int button, int state, int x, int y) {
    if(button == GLUT_LEFT_BUTTON && state == GLUT_DOWN) {
        onMouse = 1;
    }
} 
```

这是主要功能：

```
//load first texture
texture = LoadTextureRAW( "2 Lock screen.raw", TRUE );
glutMouseFunc(mouseClicks);
if(onMouse == 1){
    //load second texture
    texture = LoadTextureRAW( "in_game.raw", TRUE );
} 
```

我究竟做错了什么？

**编辑**我对代码做了一些更改，但背景图像仍然没有改变。这是新的主要功能：

```
glutCreateWindow("Game");
texture = LoadTextureRAW( "2 Lock screen.raw", 1 );
glutDisplayFunc(display);

glutMouseFunc(mouseClicks);
glutKeyboardFunc(key);

glutMainLoop();

if(onMouse == 1){
        texture = LoadTextureRAW( "in_game.raw", 2 );
        glutDisplayFunc(display);
} 
```

这是我将纹理映射到四边形的显示功能：

```
glClearColor( 0.0f, 0.0f, 0.0f, 0.0f );
glClear( GL_COLOR_BUFFER_BIT );

// setup texture mapping
glEnable( GL_TEXTURE_2D );
glBindTexture( GL_TEXTURE_2D, texture );

glPushMatrix();
glBegin( GL_QUADS );
glTexCoord2d(1.0,0.0); glVertex3d(1.0,1.0, 1.0);
glTexCoord2d(0.0,0.0); glVertex3d(-1.0,1.0,1.0);
glTexCoord2d(0.0,1.0); glVertex3d(-1.0,-1.0, -1.0);
glTexCoord2d(1.0,1.0); glVertex3d(1.0,-1.0, 1.0);
glEnd();
glPopMatrix();
glutSwapBuffers();

// free the texture
FreeTexture( texture ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T10:31:55.710

你的顺序错了。

```
glutMouseFunc(mouseClicks); 
```

在这里，您注册了单击鼠标时要调用的函数。

```
if(onMouse == 1) { 
```

您立即检查是否单击了鼠标。在这两行之间的短暂时间内鼠标不可能被点击，并且`glutMainLoop`还没有进入，所以你的程序甚至没有机会监听鼠标事件。

* * *

至于崩溃，仅凭您提供的代码我无法帮助您调试它。请尝试调试器并找出导致崩溃的行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T10:49:46.790

> 我究竟做错了什么？

您期望 glutMouseFunc 等待鼠标点击。这不是 GLUT 的工作方式（GLUT 不是 OpenGL BTW 的一部分）。另一个要注册的回调是绘图函数（通常`display`在基于 GLUT 的程序中调用）。

一旦进入 GLUT 主循环（`glutMainLoop()`调用），用户事件就会被处理，如果请求重新显示，则调用显示函数。

所以这就是你要做的（在简化的伪代码中）

```
// Define bitmasks for mouse status, we assume mice have less than 17 buttons
#define MB_LEFT   0
#define MB_MIDDLE 1
#define MB_RIGHT  2
#define LMB_PRESSED (1<<0)
#define MMB_PRESSED (1<<1)
#define RMB_PRESSED (1<<2)
#define LMB_CLICKED (1<<16)
#define MMB_CLICKED (1<<17)
#define RMB_CLICKED (1<<18)
#define MB_PRESSED(state, button) (1<<(button))
#define MB_CLICKED(state, button) (1<<((button)+16)))
#define MB_MASK_PRESSED 0x0000ffffL
#define MB_MASK_CLICKED 0xffff0000L

uint32_t mouse_status = 0;

void onMouseButton(int button, int state, int x, int y)
{
    int b;
    switch(button) {
    case GLUT_LEFT_BUTTON:   b=MB_LEFT;   break;
    case GLUT_MIDDLE_BUTTON: b=MB_MIDDLE; break;
    case GLUT_RIGHT_BUTTON:  b=MB_RIGHT;  break;
    }

    if(mouse_status & MB_PRESSED(b) && GLUT_UP == state) {
        mouse_status |= MB_CLICKED(b);
    }
    if( !(mouse_status & MB_PRESSED(b)) && GLUT_DOWN == state) {
        mouse_status = (mouse_status & ~(0L | MB_CLICKED(b))) | MB_PRESSED(b);
    }

    glutPostRedisplay();
}

void display(void)
{
    if(mouse_status & MB_CLICKED(MB_LEFT)) {
        /* do something */
        …

        /* clear the click flag */
        mouse_status &= ~MB_MASK_CLICKED;
    }
}

int main(…)
{
    …
    glutCreateWindow(…);
    glutDisplayFunc(display);
    glutMouseFunc(onMouseButton);

    glutMainLoop();
} 
```

您当然可以使用您喜欢的任何其他类型的结构在程序部分之间传递鼠标按钮状态。我更喜欢这样的位掩码。其他人可能更喜欢数组（我个人不喜欢这样的任务使用数组，因为它们在调试器中不像简单的位域那样容易查看）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:06:51.727

`glutMouseFunc`注册一个回调：在特定事件（这里是鼠标事件）上调用的函数。这些事件是被收集的`glutMainLoop`，在你测试的时候还没有被调用`onMouse`。

另一件事，虽然我不能从您提供的小代码摘录中确定，但您最好从程序开始加载资产，而不是等待用户事件来执行它。首先加载它们，然后简单地更改`texture`为与您希望显示的纹理对应的任何 id。

# javascript - D3.js 使用函数时如何应用多个类

> ID：16102505
> 
> 赞同：22
> 
> 时间：2013-04-19T10:26:17.770
> 
> 标签：javascript, html, css, svg, d3.js

我目前正在使用 D3.js 并且遇到了一个我似乎无法解决的问题。

我有一个 CSV，其中有一个名为“Set”的列和一个名为“Year”的列。我想从这些列中提取值并将它们用作类名。这是我目前拥有的...

```
var circle = svg.selectAll("circle")
            .data(data)
            .enter()
            .append("circle")
            .attr("class", function(d) {
                if (d["Set"] == 1)
                {
                    return "set-1";
                }
                if (d["Set"] == 2)
                {
                    return "set-2";
                }
            }); 
```

这工作得很好，并且给每个数据点一个类名。但是，当我尝试以下操作时，“Set”类名被“Year”类名覆盖。

```
var circle = svg.selectAll("circle")
            .data(data)
            .enter()
            .append("circle")
            .attr("class", function(d) {
                if (d["Set"] == 1)
                {
                    return "set-1";
                }
                if (d["Set"] == 2)
                {
                    return "set-2";
                }
            .attr("class", function(d) {
                if (d["Year"] == 2012)
                {
                    return "2012";
                }
                if (d["Year"] == 2013)
                {
                    return "2013;
                }
            }); 
```

如何更正此代码，以便添加其他类名而不是覆盖它们。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-19T12:05:57.623

有一种替代方法可能有用。`selection.classed('class-name', true)`您可以使用或从元素中分配或删除类`selection.classed('class-name', false)`：

```
var circle = svg.selectAll("circle")
    .data(data)
    .enter()
    .append('circle')
    .classed('2012', function(d) { return d['Year'] === 2012; })
    .classed('2013', function(d) { return d['Year'] === 2013; })
    .classed('set-1', function(d) { return d['Set'] === 1; })
    .classed('set-2', function(d) { return d['Set'] === 2; }); 
```

我更喜欢这种方式，因为您可以使用相同的语法从元素中删除类。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-07-19T07:08:26.680

### 更新

似乎，这种方法不再适用于 D3.js v5+

### 原始答案

您还可以使用哈希作为函数的参数`classed`：

```
var circle = svg.selectAll("circle")
  .data(data)
  .enter()
  .append('circle')
  .classed({
    '2012': function(d) { return d['Year'] === 2012; },
    '2013': function(d) { return d['Year'] === 2013; },
    'set-1': function(d) { return d['Set'] === 1; },
    'set-2': function(d) { return d['Set'] === 2; }
  }); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-04-19T10:45:32.167

你只想要一个能同时做这两件事的函数。沿着这些路线的东西也许......

```
var circle = svg.selectAll("circle")
        .data(data)
        .enter()
        .append("circle")
        .attr("class", function(d) {
            var c = "";
            if (d["Set"] == 1)
            {
                c = "set-1";
            }
            if (d["Set"] == 2)
            {
                c = "set-2";
            }
            if (d["Year"] == 2012)
            {
                c += " 2012";
            }
            if (d["Year"] == 2013)
            {
                c += " 2013;
            }
            return c;
        }); 
```

# android - Eclipse AVD 不起作用

> ID：16102506
> 
> 赞同：1
> 
> 时间：2013-04-19T10:26:21.083
> 
> 标签：android, eclipse, emulation, avd, panic

不幸的是，我未能启动 AVD。在你看到的两张图片中；
1\. 我的设置
2\. 启动后的第二个（也是最后一个）屏幕。

谁能帮帮我吗？:D

![[一][1] <br>](https://i.stack.imgur.com/xqbhm.png) ![在此处输入图像描述](https://i.stack.imgur.com/Fs6gk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:55:21.007

去寻找我提供的这两个链接..它很好地解释了一步......[在这里](http://developer.android.com/tools/devices/managing-avds.html) 和[这里](http://mobile.tutsplus.com/tutorials/android/android-virtual-device-creation/) 我相信它会帮助你......享受......：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:31:53.267

从这个所以[COLIN的回答](https://stackoverflow.com/a/9010020/931982)

> 1.  创建一个名为：ANDROID_SDK_HOME 的环境变量并将其设置为 C:\Users\Administrator
> 2.  打开 Eclipse > Window > Preferences 并单击 Run/Debug and String Substitution
> 3.  添加一个名为：user.home 的新变量并将其设置为 C:\Users\Administrator
> 4.  创建一个 AVD 并运行它。

# iphone - 是否可以将弹出窗口内的导航栏高度更改为默认高度？

> ID：16102509
> 
> 赞同：3
> 
> 时间：2013-04-19T10:26:32.180
> 
> 标签：iphone, ios, objective-c, ios5

弹出框内导航栏的高度是 38px，这与默认的 44px 高度不同。是否可以将其更改为默认（44px）高度？

弹出框是自定义的，`UIPopoverBackgroundView`它可以让我完全改变弹出框的外观，除了导航栏的高度。

该应用程序是为 iOS 5 及更高版本开发的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:53:23.523

导航栏不是由弹出框管理，而是由视图层次结构中的一个对象管理。

管理你的`UIViewController`popover 有一个属性`navigationController`。这使您可以访问，`UINavigationBar`并且您应该能够调整导航栏的高度。

# asp.net - Asp.net 中每页十五行

> ID：16102511
> 
> 赞同：0
> 
> 时间：2013-04-19T10:26:46.233
> 
> 标签：asp.net, sql

```
 string check = "SELECT * FROM portalEntries ORDER BY date DESC";
    SqlCommand cmd = new SqlCommand(check, myConnection);
    SqlDataReader queryCommandReader = cmd.ExecuteReader();

    while (queryCommandReader.Read())
    {
        int dbId = queryCommandReader.GetInt32(0);
        Response.Write(dbId.ToString());
        Response.Write("\n");
        //string name = queryCommandReader.GetString(0);
        //Response.Write(name);
    } 
```

它可以工作并在一页中提供所有 id 但我想每页有 15 条 id 记录。我已经搜索过它但无法得到正确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:31:15.987

使用 ASP.NET GridView 并在其上应用 Paging。这是一个参考 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/aa479347.aspx](http://msdn.microsoft.com/en-us/library/aa479347.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T10:32:38.010

```
"SELECT * FROM portalEntries ORDER BY date DESC LIMIT 0,15" 
```

会给你前 15 个。但是你需要一个新的变量，你应该知道你在哪个页面上

# c# - C# 富文本框标签

> ID：16102512
> 
> 赞同：1
> 
> 时间：2013-04-19T10:26:46.293
> 
> 标签：c#, richtextbox

我有一个富文本框，它将从服务器加载文本。从服务器端我想添加将生成文本框的格式化标签。例如：

```
result = result.Replace("[b]", @"{\b ").Replace("[/b]", "}").Replace("[br]", @"{\line}").Replace("[i]", @"{\i ").Replace("[/i]", "}");
TextBox1.Rtf = @"{\rtf1\ansi " + result + "}"; 
```

然后我可以输入：

```
Hello [b]this is in bold[/b] and [i] this is in [/i] 
```

因此，它将被替换为所需的 rtf1\ansi 格式，并相应地以粗体和斜体显示所需的文本。

我想实现下划线，甚至可能是一组颜色。

我试过`{\u underlin }`了，但似乎没有用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:10:56.147

请看一下我创建的简单示例。将整个文本附加到您的 RTF 属性。

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fnil\fcharset0 Microsoft Sans Serif;}}
{\colortbl ;\red255\green0\blue0;\red0\green128\blue0;}
This is \cf1 \ulwave\ulc2 underlined \ulnone\cf0 text \par
} 
```

我找不到直接使用 RTF 属性的非常好的参考，但是有很多示例首先执行选择，然后应用所需的属性。我尝试了其中的一些示例，然后检查了生成的 RTF 文本。这是了解 Richtextbox 如何处理 RTF 字符串的简单方法。希望这个小技巧也能帮助你:)。

请注意，在第 2 行，我放置了一个包含 2 种颜色的颜色表，即用分号分隔的 2 个 RGB 值。您可以在此处添加您想要的颜色并将它们称为 1,2 等。我相信 0 是默认颜色并且是白色的。

# html - 使用 KineticJS 的图像剪辑蒙版效果

> ID：16102519
> 
> 赞同：2
> 
> 时间：2013-04-19T10:26:57.003
> 
> 标签：html, kineticjs

我想要 HTML5 中图像的剪贴蒙版效果。请找到我的如果我使用

[http://www.html5canvastutorials.com/libraries/kinetic-v3.8.3.js](http://www.html5canvastutorials.com/libraries/kinetic-v3.8.3.js)

代替

[http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.1.min.js](http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.1.min.js)

它可以很好地创建舞台对象 as-var stage = new Kinetic.Stage("container", 800, 800);

如何使用 v4.4.1.min.js 实现此功能？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:27:52.127

**在 KineticJS 中有几种方法可以进行剪辑**

您可以在其中一个预定义的形状中使用填充图案，如下所示：

```
 var clipWithFill = new Kinetic.Circle({
          …
          fillPatternImage: img,
          fillPatternOffset: [-160, 90],
          …
        }); 
```

您可以创建一个使用 html canvas 的 clip() 的自定义形状；

```
 var clipWithCustomShape = new Kinetic.Shape({
          drawFunc: function(canvas) {
            var context = canvas.getContext();
            context.save();
            context.beginPath();

            // draw our clipping shape
            Context.rect(100,100,100,150);
            // set it as the context's clipping region
            context.clip();
            // draw the image which will be clipped
            context.drawImage(img,50,75);
            // restore the context to it’s unclipped state
            context.restore();
          },
          stroke: 'black',
          strokeWidth: 5
        }); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/MWSx9/](http://jsfiddle.net/m1erickson/MWSx9/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body { margin: 0px; padding: 0px; }
      canvas{border:1px solid red;}
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.3.min.js"></script>
    <script defer="defer">

        function drawClips(img) {

            var stage = new Kinetic.Stage({
                container: 'container',
                width: 400,
                height: 300
            });
            var layer = new Kinetic.Layer();

            var clipWithFill = new Kinetic.Circle({
                x: 100,
                y: 100,
                radius: 75,
                fillPatternImage: img,
                fillPatternOffset: [30, 90],
                fillPatternRepeat: "no-repeat",
                stroke: 'black',
                strokeWidth: 5,
                draggable: true
            });
            layer.add(clipWithFill);

            var clipWithCustomShape = new Kinetic.Shape({
                drawFunc: function (canvas) {
                    var context = canvas.getContext();
                    context.save();
                    context.beginPath();

                    // draw our custom clipping shape
                    drawOurCustomShape(context)
                    // set it as the context's clipping region
                    context.clip();
                    // draw the image which will be clipped
                    context.drawImage(img, 200, 75);
                    //
                    context.restore();
                    // re-draw our custom shape
                    // just to outline our clipped region
                    drawOurCustomShape(context);
                    canvas.fillStroke(this);
                },
                stroke: 'black',
                strokeWidth: 5,
                draggable: true
            });
            layer.add(clipWithCustomShape);

            function drawOurCustomShape(context) {
                context.moveTo(200, 150);
                context.bezierCurveTo(250, 170, 300, 20, 390, 100);
                context.lineTo(350, 220);
                context.lineTo(250, 220);
                context.closePath();
            }

            stage.add(layer);
        }

        function houseToPNG() {
            var tempCanvas = document.createElement("canvas");
            var tempCtx = tempCanvas.getContext("2d");
            tempCanvas.width = 140;
            tempCanvas.height = 140;
            drawHouse(tempCtx);
            var img = new Image();
            img.onload = function () {
                tempCanvas = null;
                drawClips(img);
            }
            img.src = tempCanvas.toDataURL();
        }

        function drawHouse(ctx) {
            ctx.save();
            // roof
            ctx.beginPath();
            ctx.fillStyle = "red";
            ctx.strokeStyle = "gray";
            ctx.lineWidth = 4;
            ctx.moveTo(5, 40);
            ctx.lineTo(135, 40);
            ctx.lineTo(70, 4);
            ctx.closePath()
            ctx.fill();
            ctx.stroke();
            // frame
            ctx.beginPath();
            ctx.fillStyle = "blue";
            ctx.strokeStyle = "gray";
            ctx.lineWidth = 4;
            ctx.rect(20, 40, 100, 100);
            ctx.fill();
            ctx.stroke();
            // windows
            ctx.beginPath();
            ctx.fillStyle = "lightgray";
            ctx.strokeStyle = "orange";
            ctx.lineWidth = 3;
            ctx.rect(40, 55, 20, 25);
            ctx.rect(80, 55, 20, 25);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.strokeStyle = "tan"
            ctx.moveTo(42, 68);
            ctx.lineTo(58, 68);
            ctx.moveTo(82, 68);
            ctx.lineTo(98, 68);
            ctx.moveTo(50, 57);
            ctx.lineTo(50, 78);
            ctx.moveTo(90, 57);
            ctx.lineTo(90, 78);
            ctx.stroke();
            // door
            ctx.beginPath();
            ctx.fillStyle = "purple";
            ctx.strokeStyle = "orange";
            ctx.lineWidth = 3;
            ctx.rect(60, 95, 20, 40);
            ctx.rect(73, 115, 1, 1);
            ctx.fill();
            ctx.stroke();
            //
            ctx.restore();
        }

        houseToPNG();

    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:23:18.233

您可以使用 setClipFunc 方法设置剪贴蒙版：

[http://kineticjs.com/docs/Kinetic.Container.html](http://kineticjs.com/docs/Kinetic.Container.html)（见剪辑）

您可以将其用于任何容器，包括舞台、图层或组。剪贴蒙版内的所有内容都将可见，而剪贴蒙版之外的所有内容将不可见

# c# - 在 Windows 调度程序中调度后如何获取安装的 exe 文件系统路径？

> ID：16102520
> 
> 赞同：1
> 
> 时间：2013-04-19T10:26:57.317
> 
> 标签：c#, windows, scheduled-tasks, exe, scheduler

我在控制台应用程序中写了一行`System.IO.Path.GetFullPath("ApplicationSubDirectory")`来获取应用程序目录文件系统路径。

我构建了这个应用程序并在我的系统中安装了 exe。exe已安装在`c://ProgramFiles/AppFolder/`目录中。当我执行 exe 时，我得到了有效的路径，例如`c://ProgramFiles/AppFolder/ApplicationSubDirectory`.

但是当我安排这个 exe 在 Windows 调度程序中每天运行时。然后我走错了路。这将返回我安装 Windows 调度程序的目录路径，如`c://Windows/System32/ApplicationSubDirectory`. 这是错误的道路。

请帮助我在安排 exe 后如何获得有效路径。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:33:07.797

这是因为您的控制台应用程序是由任务计划程序启动的。要获取实际路径，请将以下代码添加到您的应用程序中

```
System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:32:51.330

调度程序将当前目录设置为上述路径。 `System.IO.Path.GetFullPath("ApplicationSubDirectory")`使用当前目录。

你可以试试[`AppDomain.CurrentDomain.BaseDirectory`](http://msdn.microsoft.com/de-AT/library/system.appdomain.basedirectory.aspx)。

# c++ - QMap 函数：检查它是否包含 isbn 编号

> ID：16102523
> 
> 赞同：1
> 
> 时间：2013-04-19T10:27:04.243
> 
> 标签：c++, qt, qmap

我正在尝试编写一个函数来确定给定的 isbn 编号是否在`QMap`列表中，我发现我没有`contains`正确使用，不确定这是否在逻辑上有效？

```
bool TextbookMap::foundTextBook(QString isbn) const {
    bool found = false;
    ConstIterator itr = constBegin();
    for ( ; itr != constEnd(); ++itr)
    {
         if (itr.contains(isbn))
             found = true;
    }
    return found;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:32:20.870

你不需要迭代地图——这`contains()`已经为你做了。只需使用

```
bool TextbookMap::foundTextBook(const QString& isbn) const {
   return contains(isbn);
} 
```

（我假设你已经`TextbookMap`从`QMap`）

下面的代码打印

```
false
true 
```

* * *

```
class Textbook {
};

class TextbookMap : public QMap<QString, Textbook*> {
public:
    bool foundTextBook(const QString& isbn) const;
};

bool TextbookMap::foundTextBook(const QString& isbn) const {
    return contains(isbn);
}

int main(int argc, char ** argv) {
    TextbookMap map;
    map.insert("1234", new Textbook());
    map.insert("5678", new Textbook());
    qDebug() << map.foundTextBook("01234");
    qDebug() << map.foundTextBook("1234");

    return 0;
} 
```

在这个例子中，你甚至不需要实现一个单独的方法——你也可以`map.contains()`直接使用。但是，像这样封装方法是否有意义取决于您的具体要求`contains()`。附带说明一下，我通常会尽量避免从容器类派生，而是使用委托。

# c# - 密钥容器名称“bsn”不存在

> ID：16102529
> 
> 赞同：0
> 
> 时间：2013-04-19T10:27:27.533
> 
> 标签：c#, assemblies, grammar, public-key

我正在尝试运行 bsn-goldparser ( [https://code.google.com/p/bsn-goldparser/](https://code.google.com/p/bsn-goldparser/) ) 的项目，我遇到了下一个麻烦：Visual Studio 显示下一条消息：“错误 2 加密失败签署程序集时...密钥容器名称'bsn'不存在...”。经过数小时的搜索，我尝试了下一个：我编辑了所有项目文件，并删除了 bsn 行。但是现在，错误是它没有找到已经添加的库。我需要知道更多，但我不知道在哪里可以读到这个。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:06:15.683

这个问题的答案在这里：

[从程序集中删除强烈签名](https://stackoverflow.com/questions/6993835/removing-strongly-signed-from-assembly)。

此外，我用框架 4.0 编译了项目，因为它们是用框架 3.5 客户端配置文件编译的。

# java - 图像未从 jsp 页面中的数据库加载

> ID：16102530
> 
> 赞同：0
> 
> 时间：2013-04-19T10:27:27.940
> 
> 标签：java, jsp, servlets

我正在尝试将表数据从数据库显示到 jsp 页面，所有数据都已获取，但图像未加载到图像选项卡中。我将图像存储为表中的 BLOB。

我的jsp页面如下：

```
<body>
    <table border="1">  

    <%@ page import="com.*;"%>
    <%
        MySql myobj = new MySql();
        myobj.connect();

        String query="select contact_id,first_name,last_name,photo from contacts";

        ResultSet rs = myobj.getdata(query);

        while(rs.next())
        {               

        %>
            <tr>
                <td>
                    <%= rs.getInt(1) %>             
                </td>

                <td>
                    <%= rs.getString(2).toString() %>
                </td>
                <td>
                    <%= rs.getString(3).toString() %>
                </td>

                <td>
                    <img src="<%= rs.getString(4) %>"  width="500" height="300" alt="data"></img>                   
                </td>

            </tr>
        <% 

        }
    %>

    </table>
</body> 
```

当单击第二个 div 的项目名称或数据时，我还必须执行下载，然后应该下载相关数据。

> 谁能尽快解决我的这个问题？
> 
> 如何在 servlet 中实现下载作为后端？

我已经为 imageservlet 编写了这段代码：

```
protected void doGet( HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {   
        String id = request.getParameter("contact_id");     
        MySql myobj = new MySql();
        myobj.connect();
        PrintWriter out=response.getWriter();       
        try
        {
            String query="select photo from contacts where contact_id='"+id+"'";

            ResultSet rs = myobj.getdata(query);

            out.println(id);

            Blob image=null;
            byte[] imgData = null;
            image= rs.getBlob(1);
            imgData = image.getBytes(1, (int) image.length());
            response.setContentType("image/gif");
            OutputStream o = response.getOutputStream();
            o.write(imgData);
            o.flush();
            o.close(); 
            response.sendRedirect("Message.jsp");
        }
        catch (Exception e)
        {
            e.getMessage();
        }       
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:37:16.067

您应该使用 servlet 来提供具有适当内容类型标头的图像

```
<img src="img-servlet?contact_id=<%= rs.getInt(1) %>"  width="500" height="300" alt="data"> 
```

并且，在您的 servlet 中获取`contact_id`查询参数并获取图像内容

# vb.net - 无法将下拉列表绑定到我的 linq 查询

> ID：16102531
> 
> 赞同：0
> 
> 时间：2013-04-19T10:27:29.107
> 
> 标签：vb.net, data-binding, datasource, html-select, linqdatasource

我将下拉列表控件拖到我的 aspx 页面。当我在 asppx.vb 页面中编写任何查询并尝试将其绑定到我的 ddl 时，ddl 仍然未绑定。我尝试了几种不同的方法，但都没有奏效。即使我只是用 ddl 和最简单的查询创建一个空白页面，它仍然不会绑定。我曾尝试单击 ddl 并以这种方式绑定到 linq 数据源，它们会绑定，但我不能使用该方法，因为它不合适。我需要从名为的表中填充一个 ddl `Buildings`，然后根据从该 ddl 中的选择，从名为`Rooms`.

```
Protected Sub ddlBuilding_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlBuilding.SelectedIndexChanged

    Dim db As New OrionDataClassesDataContext

    ddlBuilding.DataSource = (From build In db.Buildings
                            Select {build.Building_code, build.Building_name}).ToList()

    ddlBuilding.DataTextField = "Building_name"
    ddlBuilding.DataValueField = "Building_code"
    ddlBuilding.DataBind()
End Sub 
```

这是我尝试过的一种方法。我尝试的另一种方法是：

```
 Protected Sub ddlBuilding_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlBuilding.SelectedIndexChanged

    Dim db As New OrionDataClassesDataContext

    Dim building = (From build In db.Buildings
                    Select {build.Building_code, build.Building_name}).ToList()

    ddlBuilding.DataSource = building
    ddlBuilding.DataTextField = "Building_name"
    ddlBuilding.DataValueField = "Building_code"
    ddlBuilding.DataBind()
End Sub 
```

在这个阶段，我认为查询不是问题。有一些东西会阻止`.databind`and`.datasource`函数产生任何影响。我已经用几个 ddls 试过了。如果有人有任何想法，请告诉我。绝望的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:53:07.543

我已经解决了这个问题。我设法将 LinqDataSources 添加到表中并选择 Where 子句来关联两个表。我认为这个问题不可能，但我错了

# eclipse - Eclipse SVN 合并和修订图

> ID：16102537
> 
> 赞同：0
> 
> 时间：2013-04-19T10:27:54.430
> 
> 标签：eclipse, svn, merge, subclipse

我正在尝试获得一个修订图，如下面链接的 [http://farm4.static.flickr.com/3062/2657955813_3a22ec4170_o.png](http://farm4.static.flickr.com/3062/2657955813_3a22ec4170_o.png)

但我无法在图表中显示合并。合并以使这些行可见时是否有特定的事情要做？我是 SVN 的初学者。

我在 linux Mint 上使用 Eclipse Juno 和来自 tigris.org 的 subversion 插件，并试图将我网站的一个分支合并回主干

谢谢，弗里茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:56:55.057

请参阅此处显示合并信息的部分：

[http://subclipse.tigris.org/graph.html](http://subclipse.tigris.org/graph.html)

本质上，收集 SVN 日志的性能不足以支持它，因此它只是一个“按需”功能。

# antlr - “解析器规则中的隐式令牌定义”需要担心吗？

> ID：16102540
> 
> 赞同：37
> 
> 时间：2013-04-19T10:28:06.710
> 
> 标签：antlr, grammar, antlrworks, antlr4

我正在使用 ANTLR 和 ANTLRWorks 2 创建我的第一个语法。我已经基本完成了语法本身（它识别用所描述语言编写的代码并构建正确的解析树），但除此之外我还没有开始任何事情。

让我担心的是，解析器规则中每个第一次出现的标记都带有黄色曲线下划线，上面写着“解析器规则中的隐式标记定义”。

例如，在这条规则中，`'var'`有那个曲线：

```
variableDeclaration: 'var' IDENTIFIER ('=' expression)?; 
```

它看起来如何：

![在此处输入图像描述](https://i.stack.imgur.com/orrJY.png)

奇怪的是，ANTLR 本身似乎并不介意这些规则（在进行测试台测试时，我在解析器生成器输出中看不到任何这些警告，只是在我的机器上安装了不正确的 Java 版本），所以这只是 ANTLRWorks 抱怨。

**是否需要担心或者我应该忽略这些警告？我应该在词法分析器规则中明确声明所有标记吗？**官方圣经[The Defintive ANTLR Reference](http://pragprog.com/book/tpantlr/the-definitive-antlr-reference)中的大多数例子似乎都是按照我编写代码的方式完成的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-19T13:34:17.957

**我强烈建议在任何重要的代码中更正此警告的所有实例。**

此警告是（实际上是由我创建的）警告您以下情况：

```
shiftExpr : ID (('<<' | '>>') ID)?; 
```

由于 ANTLR 4 鼓励将动作代码写入目标语言的单独文件中，而不是将它们直接嵌入语法中，因此能够区分`<<`和是很重要的`>>`。如果没有为这些运算符显式创建标记，它们将被分配任意类型，并且没有命名常量可用于引用它们。

此警告还有助于避免以下有问题的情况：

*   解析器规则包含拼写错误的标记引用。如果没有警告，这可能会导致创建一个可能永远不会匹配的附加令牌。
*   解析器规则包含无意的标记引用，例如：

    ```
    number : zero | INTEGER;
    zero   : '0'; // <-- this implicit definition causes 0 to get its own token 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:11:12.807

如果您正在编写不会在多个解析器语法中使用的词法分析器语法，那么您可以忽略 ANTLRWorks2 显示的此警告。

# gcc - 本地 gcc 构建链接系统动态库

> ID：16102541
> 
> 赞同：0
> 
> 时间：2013-04-19T10:28:07.257
> 
> 标签：gcc, linker

我在我的主目录中构建并安装了 gcc-4.6.4（我没有 root 权限）。当我使用 g++ 将一些目标文件链接到可执行文件时，它会链接“错误”的 libstdc++.so.6。

它不使用位于安装目录中的较新的，而是系统中的一个。

有没有办法为库指定专有搜索路径？

我的 .bashrc：

```
PATH=$PATH:/home/testuser/selfcompiled/gcc-4.6.4/bin:/usr/local/cuda/bin
export PATH

C_INCLUDE_PATH=/home/testuser/selfcompiled/gcc-4.6.4/include 
export C_INCLUDE_PATH

CPLUS_INCLUDE_PATH=/home/testuser/selfcompiled/gcc-4.6.4/include 
export CPLUS_INCLUDE_PATH

LIBRARY_PATH=/home/testuser/selfcompiled/gcc-4.6.4/lib:/home/testuser/selfcompiled/gcc-4.6.4/lib64/lib
export LIBRARY_PATH

LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib:/usr/local/cuda/lib64:/usr/local/cuda/cudaprof/bin:/home/testuser/selfcompiled/gcc-4.6.4/lib:/home/testuser/selfcompiled/gcc-4.6.4/lib64/lib
export LD_LIBRARY_PATH

GCC_EXEC_PREFIX=/home/testuser/selfcompiled/gcc-4.6.4/lib/gcc/
export GCC_EXEC_PREFIX

COMPILER_PATH=/home/testuser/selfcompiled/gcc-4.6.4/bin/:/home/testuser/selfcompiled/gcc-4.6.4/libexec/:/home/testuser/selfcompiled/gcc-4.6.4/lib/gcc/
export COMPILER_PATH 
```

即使我通过 g++ -L .... 使用本地 libstdc++.so.6 指定目录，位于 /usr/... 中的目录也会根据 ldd 链接到可执行文件。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:27:55.760

链接时没有任何问题（或者您会收到旧库版本中不存在的符号的链接器错误）。

这是运行时的事情。这个：

```
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib:/usr/local/cuda/lib64:/usr/local/cuda/cudaprof/bin:/home/testuser/selfcompiled/gcc-4.6.4/lib:/home/testuser/selfcompiled/gcc-4.6.4/lib64/lib
export LD_LIBRARY_PATH 
```

应该

```
LD_LIBRARY_PATH=/home/testuser/selfcompiled/gcc-4.6.4/lib:/home/testuser/selfcompiled/gcc-4.6.4/lib64/lib:$LD_LIBRARY_PATH:/usr/local/cuda/lib:/usr/local/cuda/lib64:/usr/local/cuda/cudaprof/bin
export LD_LIBRARY_PATH 
```

可执行加载器需要先查看您的新库，然后再查看旧库。当然，有很强的二进制兼容性，所以如果不使用新符号，旧的库就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:40:58.810

我猜你已经构建了 64 位可执行文件。这条路径：

```
/home/testuser/self‌​compiled/gcc-4.6.4/lib64/lib 
```

看起来不对，应该是：

```
/home/testuser/self‌​compiled/gcc-4.6.4/lib64 
```

要使用它，请设置`LD_LIBRARY_PATH`或更好地使用`-Wl,-rpath=/home/testuser/self‌​compiled/gcc-4.6.4/lib64`

# sql-server - MS SQL Select Where ntext-Column contains specific hex String

> ID：16102547
> 
> 赞同：1
> 
> 时间：2013-04-19T10:28:22.740
> 
> 标签：sql-server

我在 mssql 上的选择有问题

在我的表中有一个数据类型为 ntext 的列，我正在搜索一个特定的字符。当我读取值并将其转换为十六进制时，我会得到类似的东西

```
SELECT convert(varbinary(max),convert(nvarchar(max),COLUMN_Value))  FROM db.TABLE WHERE PK = 1234

0x3C005000200063006C006100730073003D004D0073006F004E006F0072006D0061006C0020007300740... 
```

在十六进制值中有例如 3C00，当我现在重写我的选择并搜索此值时，没有行匹配：/

```
SELECT * FROM db.TABLE WHERE convert(varbinary(max),convert(nvarchar(max),COLUMN_Value)) LIKE '%3C00%' 
```

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T12:44:40.923

最后我用下面的查询完成了

```
SELECT * FROM db.TABLE WHERE CONVERT(varchar(max),convert(varbinary(max),convert(nvarchar(max),COLUMN_Value)),2) LIKE '%3C00%'; 
```

我使用了第一个查询（3C00）中的十六进制值，并找到了包含它的每一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:38:41.877

尝试这个

```
SELECT * FROM db.TABLE WHERE convert(nvarchar(max),COLUMN_Value) LIKE '%3C00%' 
```

# java - ENUM 和单选按钮 Java

> ID：16102550
> 
> 赞同：0
> 
> 时间：2013-04-19T10:28:36.643
> 
> 标签：java, enums, radio-button, jradiobutton

我有枚举和单选按钮的问题。我正在制作一个程序，用户可以在其中选择不同类型的付款，这些类型保存在 Type.java 类中，请参见代码：

```
public enum Type 
{
    ENGANGSUTBETALING, FASTUTBETALING, ENGANGSINNBETALING, FASTINNBETALING
} 
```

我有一个 GUI，您可以在其中选择上面列出的不同类型。然后我有一种从文本字段中收集数据的方法，用户输入数量和描述以及其他一些值，然后选择其中一个单选按钮。

但是，我无法获得获得所需 ENUM 值的类型。这是我的代码：

```
 Type t;
     if(f_fast.isSelected())
          t=Type.FASTUTBETALING;
     else if(f_engangs.isSelected())
         t=Type.ENGANGSUTBETALING; 
```

Eclipse 告诉我“FASTUTBETALING 无法解析或不是字段”/“ENGANGSUTBETALING 无法解析或不是字段”

在注册支付的构造函数中，我使用了类似的代码。

```
public void leggTilTransaksjon(Type t, double belop, Calendar dato, String avsender, String beskrivelse) 
{
    Transaksjon tr;
    if (t == Type.ENGANGSINNBETALING)
        tr = new EngangsInnbetaling(belop, dato, avsender, beskrivelse)}; 
```

这工作正常。有人知道为什么我在根据单选按钮指定 ENUM 值时遇到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:32:22.603

我的猜测是你导入了错误的`Type`类。确保导入正确的。

另一种解决方案是使用有意义的（和较少使用的）类名。

# linq - LINQ 查询适用于 SQL Server，但不适用于 Entity Framework/LINQ to SQL

> ID：16102557
> 
> 赞同：1
> 
> 时间：2013-04-19T10:29:28.357
> 
> 标签：linq, entity-framework, linq-to-sql, visual-studio-lightswitch

我有一个 LINQ 查询，当我在 LINQPad 中对我的 SQL Server 数据库进行测试时，它工作正常，但是当我针对我的实体框架上下文（在我的 LightSwitch .NET 应用程序中需要）测试它时，它给出了一个错误，即 .First()必须是用户作为最终操作。

```
Table.Where(re => !re.UserSave.HasValue || re.UserSave == INT PARAMETER)
     .GroupBy(re => re.UniqueKey)
     .Select(g => g.FirstOrDefault(x => x.UserSave.HasValue) ?? g.First()) 
```

它建议改用 FirstOrDefault() ，但由于我只在 FirstOrDefault() 返回 false 时才调用 First() 我不知道如何解决这个问题。

```
NotSupportedException: The method 'First' can only be used as a final query operation. Consider using the method 'FirstOrDefault' in this instance instead. 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:31:43.317

将您的查询更改为使用`FirstOrDefault`，而不是`First`：

```
Table.Where(re => !re.UserSave.HasValue || re.UserSave == INT PARAMETER)
     .GroupBy(re => re.UniqueKey)
     .Select(g => g.FirstOrDefault(x => x.UserSave.HasValue) ?? g.FirstOrDefault()) 
```

# jquery - Ajax 网格选项和 postData

> ID：16102559
> 
> 赞同：0
> 
> 时间：2013-04-19T10:29:33.250
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我这里有一个问题，我使用 postdata 将参数从 ASPX 文件发送到 web 服务，而没有使用`ajaxGridOptions: { contentType: 'application/json; charset=utf-8'}`.

问题是，网格不显示来自 web 服务的内容，一旦我们使用它`ajaxGridOptions: { contentType: 'application/json; charset=utf-8'}`，网格就不会将任何参数传递给 web 服务。这是我们的jqgrid代码，请帮忙

```
$(document).ready(function () {
  var myGrid = $("#list");
  myGrid.jqGrid({
    url: '/priParentsContribution.asmx/getListOfTeachers',
    datatype: 'json',
    mtype: 'POST',
    //ajaxGridOptions: { contentType: 'application/json; charset=utf-8'}
    jsonReader: {
      repeatitems: true,
      root: "d.rows",
      page: "d.page",
      total: "d.total",
      records: "d.records"
    },
    colModel: [{
        name: 'feePurpose',
        index: 'feePurpose',
        width: 100,
        editable: true,
        edittype: 'select',
        editoptions: {
          value: "0:--Select--;Books:Books;Uniform:Uniform"
        }
      },
      {
        name: 'standard1',
        index: 'standard1',
        width: 100,
        editable: true
      }, {
        name: 'standard2',
        index: 'standard2',
        width: 100,
        editable: true
      }, {
        name: 'standard3',
        index: 'standard3',
        width: 100,
        editable: true
      }, {
        name: 'standard4',
        index: 'standard4',
        width: 100,
        editable: true
      }, {
        name: 'standard5',
        index: 'standard5',
        width: 100,
        editable: true
      }, {
        name: 'standard6',
        index: 'standard6',
        width: 100,
        editable: true
      }, {
        name: 'standard7',
        index: 'standard7',
        width: 100,
        editable: true
      }
    ],
    forceFit: true,
    rowNum: 10,
    rowList: [10, 20, 30],
    pager: "#pager",
    viewrecords: true,
    gridview: true,
    width: 1200,
    height: 300,
    loadonce: true, //THIS IS IMPORTANT !!!
    postData: {
      advertiserID: function () {
        return $("#advertiserId").val();
      },
    },
    ajaxGridOptions: {
      contentType: "application/json",
      success: function (data, textStatus) {
        if (textStatus == "success") {
          var thegrid = myGrid[0];
          thegrid.addJSONData(data.d);
          thegrid.grid.hDiv.loading = false;
          switch (thegrid.p.loadui) {
          case "disable":
            break;
          case "enable":
            $("#load_" + thegrid.p.id).hide();
            break;
          case "block":
            $("#lui_" + thegrid.p.id).hide();
            $("#load_" + thegrid.p.id).hide();
            break;
          }
        }
      }
    },
    ajaxGridOptions: {
      contentType: 'application/json; charset=utf-8',
      dataType: "json",
      type: "POST",
      cach: false
    },
    //rowNum: 100,
    serializeGridData: function (postData) {
      var propertyName, propertyValue, dataToSend = {};
      for (propertyName in postData) {
        if (postData.hasOwnProperty(propertyName)) {
          propertyValue = postData[propertyName];
          if ($.isFunction(propertyValue)) {
            dataToSend[propertyName] = propertyValue();
          } else {
            dataToSend[propertyName] = propertyValue
          }
        }
      }
      return JSON.stringify(dataToSend);
    }    
  });
  $("#reload").click(function () {
    myGrid.trigger("reloadGrid");
  });
  myGrid.jqGrid('navGrid', '#pager', {
    edit: false,
    add: false,
    del: true,
    search: false,
    search: false,
    view: false
  });
  myGrid.jqGrid('inlineNav', '#pager');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:20:32.190

您必须将节点：**ajaxGridOptions**放入您的 jqGrid 选项对象中。

# ember.js - 更新 ember-data 模型

> ID：16102560
> 
> 赞同：0
> 
> 时间：2013-04-19T10:29:33.933
> 
> 标签：ember.js, ember-data

我正在尝试使用像这样（[jsBin](http://jsbin.com/avumed/1/edit)）的 ember-data 更新我的模型：

```
App = Ember.Application.create({
  ready: function() {
    var post = App.Post.find(1);
    post.one('didLoad', function() {
      post.set('name', 'my new name');
      post.save();
    });
  }
});

App.Store = DS.Store.extend({
  revision: 12,
  adapter: DS.FixtureAdapter
});

App.Post = DS.Model.extend({
  name: DS.attr('string')
});

App.Post.FIXTURES = [
  {id: '1', name: 'first post'}
]; 
```

我在 Chrome 中收到以下错误：

```
Uncaught Error: Attempted to handle event `didCommit` on <App.Post:ember226:1> while in state rootState.loaded.updated.uncommitted. Called with undefined 
```

有什么问题还是这是一个错误？

# android - LinearLayout 的内容不可见

> ID：16102566
> 
> 赞同：2
> 
> 时间：2013-04-19T10:29:44.480
> 
> 标签：android, android-linearlayout, android-imageview, invisible

我尝试以编程方式将一些 GUI 元素（如 ImageView 或 TextView）添加到 LinearLayout。但不显示元素。

为了查看一个元素是否被绘制，我为每个元素设置了不同的背景颜色。结果我只能看到LinearLayout的背景色。但为什么？

```
public class MyLinearLayout extends LinearLayout {
  public MyLinearLayout(Context context) {
    super(context);

    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    setLayoutParams(params);
    setBackgroundColor(Color.RED);

    imageView = new ImageView(context);
    params = new LinearLayout.LayoutParams(100, 100);
    imageView.setLayoutParams(params);
    imageView.setBackgroundColor(Color.BLUE);

    addView(imageView);
  }
} 
```

奇怪的是，我可以看到 LinearLayout 的红色背景颜色，但在 ImageView 的大小中。如果我添加一些其他 GUI 元素，如 TextView，我可以看到 LinearLayout 是如何增长的。但我看不到TextView。

我真的很困惑，因为这不是我第一次做这样的事情。你能告诉我我做错了什么吗？

* * *

这是 layout.xml 文件的片段：

```
<LinearLayout android:layout_width="match_parent"
                  android:layout_height="45dp"
                  android:id="@+id/bottom_bar"
                  android:layout_alignParentBottom="true"
                  android:gravity="bottom">

        <FrameLayout android:id="@+id/block_edit_delete_layout"
                     android:layout_height="match_parent"
                     android:layout_width="wrap_content"
                     android:background="@drawable/block_edit_delete_selector">

            <ImageView android:layout_height="match_parent"
                       android:layout_width="wrap_content"
                       android:src="@drawable/block_edit_delete"
                       android:scaleType="fitXY"
                       android:contentDescription="@string/delete"/>
        </FrameLayout>

        <LinearLayout
                android:id="@+id/block_edit_progress"
                android:layout_height="match_parent"
                android:layout_width="0dp"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="horizontal"/>

        <FrameLayout android:id="@+id/block_edit_random_layout"
                     android:layout_height="match_parent"
                     android:layout_width="wrap_content"
                     android:background="@drawable/block_edit_delete_selector">

            <ImageView android:layout_height="match_parent"
                       android:layout_width="wrap_content"
                       android:src="@drawable/block_edit_random"
                       android:scaleType="fitXY"
                       android:contentDescription="@string/random_numbers"/>

        </FrameLayout>
    </LinearLayout> 
```

带有 ID 的 LinearLayout`block_edit_progress`是类的多个实例的容器布局`MyLinearLayout`。在代码中添加实例：

```
 for(int i = 0; i < numberOfMyLinearLayouts; i++) {
        MyLinearLayout v = new MyLinearLayout(getContext());
        addView(v);
    } 
```

我希望这有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:43:34.257

如果我将您的代码转换为 xml，它将类似于：

```
 <LinearLayout layout_width=wrap_content, layout_height = wrap_content>
    <LinearLayout id= MyLinearLayout>//just an idea, syntax may be wrong
    <LinearLayout layout_width= 100, layout_width=100>
    <ImageView color=BLUE>
    </ImageView>
    </LinearLayout>
    </LinearLayout>
    </LinearLayout> 
```

每当您在视图上调用 setLayoutParams 时，`params`您提供的参数应该是父元素。

如果您希望线性布局成为您的线性布局的父级，请尝试使用**MATCH_PARENT**作为宽度、高度，如果您希望您的视图跨越视图父级的宽度、高度

```
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
             ViewGroup.LayoutParams.MATCH_PARENT,
             ViewGroup.LayoutParams.MATCH_PARENT);
setLayoutParams(lp);//lp is parent view 
```

也试试这个，以防万一视图被添加到您的视图右侧，而您无法在屏幕上看到它们

```
yourview.setOrientation(LinearLayout.VERTICAL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:33:05.633

我解决了这个问题。（或找到解决方法）

我将完整的初始化内容移出 MyLinearLayout 的构造函数。如果我在布局完全生成后添加一个视图，一切正常。

像这样：

```
MyLinearLayout ll = new MyLinearLayout(getContext());
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(100, 100);
ll.setLayoutParams(params);
ll.setBackgroundColor(Color.RED);

ImageView v = new ImageView(getContext());
params = new LinearLayout.LayoutParams(50, 50);
v.setLayoutParams(params);
v.setBackgroundColor(Color.GREEN);

ll.addView(v);
addView(ll); 
```

我不知道为什么其他方式不起作用。感谢您的快速答复！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:57:03.653

将线性布局的宽度和高度更改为`match_parent`，看看它是如何变化的。`wrap_content`只会显示线性布局的内容，这似乎是你的问题。

# jpa - RichFaces 4 数据表编辑问题

> ID：16102568
> 
> 赞同：0
> 
> 时间：2013-04-19T10:29:49.703
> 
> 标签：jpa, richfaces, popuppanel

我想像这里一样编辑这样的表格-> [http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dataTable&sample=dataTableEdit&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dataTable&sample=dataTableEdit&skin=blueSky)。问题在于，当我在 editPane (popupPanel) 中进行更改时，它们不会在私人 OsobaTelefon edytujOsobe 中被记住。这使得无法通过 JPA 进行更新。我有所有的 getter 和 setter，OsobaTelefon 类实现了 Serializable。

```
@ManagedBean(name = "administrator")
@ViewScoped
@SessionScoped
public class Administrator implements Serializable
@EJB
private UzytkownikFacade uzytkownikFacade;

private static final long serialVersionUID = 1L;
@EJB
private OsobaFacade osobaFacade;

private Osoba osobaAdmina;
private int numerStrony = 1;
private Uzytkownik uzytkownik;
private List<Osoba> listaOsob;
private static final int CLIENT_ROWS_IN_AJAX_MODE = 10;
private int clientRows;
private int wybranaOsoba;
private OsobaTelefon edytujOsobe; //it doesn't remember the changes made in editPane
private List<OsobaTelefon> osobyITelefony;

/**
 * Creates a new instance of Administrator
 */
public Administrator() {

}

public void aktualizacjaWybranejOsoby() {

    this.osobyITelefony.set(this.wybranaOsoba, this.edytujOsobe);

    Osoba nowaOsoba = new Osoba();
    List<Telefon> nowaListaTelefonow = new ArrayList<Telefon>();

    OsobaTelefon osobaTelefon = this.osobyITelefony.get(this.wybranaOsoba);
    int o = this.osobyITelefony.get(this.wybranaOsoba).getIdosoby();
    int of = this.osobyITelefony.get(this.wybranaOsoba).getIdtelefonu();

    System.out.println("Wybrana osoba ID " + o);
    System.out.println("Wybrane ID fona " + of);

    boolean znalezionoOsobe = false;
    Iterator<Osoba> iteOs = this.listaOsob.iterator();
    while (!znalezionoOsobe && iteOs.hasNext()) {
        Osoba os = iteOs.next();
        if (os.getIdosoba() == o) {
            znalezionoOsobe = true;

            nowaOsoba.setIdosoba(os.getIdosoba());
            nowaOsoba.setImie(osobaTelefon.getImie());
            nowaOsoba.setNazwisko(osobaTelefon.getNazwisko());
            nowaOsoba.setKodpocztowy(osobaTelefon.getKodpocztowy());
            nowaOsoba.setMiejscowosc(osobaTelefon.getMiejscowosc());
            nowaOsoba.setUlica(osobaTelefon.getUlica());
            nowaOsoba.setUzytkownikList(os.getUzytkownikList());

            Telefon nowyTelefon = new Telefon();
            for (Telefon tel : os.getTelefonList()) {

                if (tel.getIdtelefon() == of) {
                    nowyTelefon.setFkIdosoba(nowaOsoba);
                    nowyTelefon.setIdtelefon(of);
                    nowyTelefon.setNumer(this.edytujOsobe.getNumer());
                    System.out.println("Nr tel. "+tel.getNumer());
                    nowyTelefon.setOpis(this.edytujOsobe.getOpis());
                    nowyTelefon.setZastrzezony(this.edytujOsobe.getZastrzezony());
                    nowaListaTelefonow.add(nowyTelefon);
                } else {
                    nowaListaTelefonow.add(tel);
                }
            }

            nowaOsoba.setTelefonList(nowaListaTelefonow);
            this.osobaFacade.aktualizujOsoba(nowaOsoba);
            this.pobierzOsobyDoTabeli();

        }

    }

}

public List<Osoba> pobierzOsobyDoTabeli() {
    //getting people with phone to List<OsobaTelefon> works good
}

public void switchAjaxLoading(ValueChangeEvent event) {
    this.clientRows = (Boolean) event.getNewValue() ? CLIENT_ROWS_IN_AJAX_MODE : 0;
}

public void zapelnijListeTelefonow() {
    //getting people phone number to List<Phone> works good
}

public void usunOsobe() {
//deleting people works good
}

} 
```

XHTML

```
<a4j:status onstart="#{rich:component('statPane')}.show()" onstop="#{rich:component('statPane')}.hide()" />
    <h:form id="formProjekty">
        <rich:dataTable value="#{administrator.osobyITelefony}" 
                        var="pr"
                        iterationStatusVar="ite" 
                        id="table" 
                        rows="8" >

            <rich:column width="auto">
                <f:facet name="header">Imię</f:facet>
                <h:outputText value="#{pr.imie}" />
            </rich:column> 

            <rich:column>
                <a4j:commandLink styleClass="no-decor" 
                                 render="editGrid"
                                 execute="@this" 
                                 oncomplete="#{rich:component('editPane')}.show()">
                    <h:graphicImage library="img" name="edit.gif" alt="Edycja"/>
                    <a4j:param value="#{ite.index}"
                               assignTo="#{administrator.wybranaOsoba}" />
                    <f:setPropertyActionListener target="#{administrator.edytujOsobe}"
                                                 value="#{pr}" />
                </a4j:commandLink>
                <a4j:commandLink styleClass="no-decor" 
                                 execute="@this"
                                 render="@none" 
                                 oncomplete="#{rich:component('confirmPane')}.show()">
                    <h:graphicImage library="img" name="delete.gif" alt="Usuń"/>
                    <a4j:param value="#{ite.index}"
                               assignTo="#{administrator.wybranaOsoba}" />
                    <f:setPropertyActionListener target="#{administrator.edytujOsobe}"
                                                 value="#{pr}" />
                </a4j:commandLink>
            </rich:column>

            <f:facet name="footer">
                <rich:dataScroller page="#{administrator.numerStrony}" />
            </f:facet>
        </rich:dataTable>

        <a4j:jsFunction name="remove" 
                        action="#{administrator.usunOsobe()}"
                        render="table" 
                        execute="@this"
                        oncomplete="#{rich:component('confirmPane')}.hide();" />

        <a4j:jsFunction name="edycja" 
                        action="#{administrator.aktualizacjaWybranejOsoby()}"
                        render="table" 
                        execute="@this"
                        oncomplete="#{rich:component('editPane')}.hide();" />

        <rich:popupPanel id="statPane" autosized="true">
            <h:graphicImage library="img" name="ai.gif" alt="Czekaj"/>
            Proszę czekać...
        </rich:popupPanel>

        <rich:popupPanel id="confirmPane" autosized="true">
            Czy na pewno usunać?
            <a4j:commandButton value="Tak" onclick="remove();
                    return false;" />
            <a4j:commandButton value="Nie"
                               onclick="#{rich:component('confirmPane')}.hide();
                    return false;" />
        </rich:popupPanel>

        <rich:popupPanel header="Edycja Osoby" 
                         id="editPane" 
                         domElementAttachment="parent" width="180" height="420">

                    <h:panelGrid columns="1" id="editGrid">
                        <h:panelGroup >
                            <h:outputText value="Imię" /><br />
                            <h:inputText value="#{administrator.edytujOsobe.imie}" >
                                <f:validateLength maximum="32" minimum="3"/>
                            </h:inputText>
                        </h:panelGroup>

                    </h:panelGrid><br/>
                    <a4j:commandButton value="Aktualizuj" 
                                       onclick="edycja(); return false;"/>
                    <a4j:commandButton value="Anuluj"
                                       onclick="#{rich:component('editPane')}.hide();
                    return false;" />

        </rich:popupPanel>
    </h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:22:34.243

如果您可以更改它，那么让您的 Aktualizuj a4j-link 更容易一些。试试看：

 `````
 <a4j:commandButton value="Aktualizuj"
                    onclick="#{rich:component('editPane')}.hide();"
                    action="#{administrator.aktualizacjaWybranejOsoby()}"  render="table"/> 
````  `并放置一个关于您的 inputText 和链接的 a4j:region 以仅发送所需的值：

 `````
 <rich:popupPanel header="Edycja Osoby" 
                     id="editPane" 
                     domElementAttachment="parent" width="180" height="420">
            <a4j:region>
                <h:panelGrid columns="1" id="editGrid">
                    <h:panelGroup >
                        <h:outputText value="Imię" /><br />
                        <h:inputText value="#{administrator.edytujOsobe.imie}" >
                            <f:validateLength maximum="32" minimum="3"/>
                        </h:inputText>
                    </h:panelGroup>

                </h:panelGrid><br/>
               <a4j:commandButtonvalue="Aktualizuj" onclick="#    {rich:component('editPane')}.hide();"action="#{administrator.aktualizacjaWybranejOsoby()}" render="table"/>
                <a4j:commandButton value="Anuluj"
                                   onclick="#{rich:component('editPane')}.hide();
                return false;" />
              </a4j:region>
    </rich:popupPanel> 
````  `我还向 Aktualizuj a4j:link 添加了一个 render="table" 以更新数据表中的值````

# regex - Perl 拆分正则表达式非贪婪适合以“>”作为分隔符

> ID：16102569
> 
> 赞同：-1
> 
> 时间：2013-04-19T10:29:53.173
> 
> 标签：regex, perl, split, non-greedy

我想用两个或多个“>”分割字符串，分割函数应该在第一个“>”中制动字符串，其他的放在列表中的第二个字符串中。

我试试

```
$text = "tobash> hubba -> http://nonexists100101.net";

@op = split(/>{1}/, $text); 
```

但是拆分仍然会在每个“>”中中断

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:31:52.400

这不是`{1}`工作方式（事实上，`{1}`根本不做任何事情）。根据[perldoc](http://perldoc.perl.org/functions/split.html) `split`有第三个`limit`参数。尝试：

```
split(/>/, $text, 2) 
```

这将最多返回 2 个子字符串。

# php - 查找元素对

> ID：16102575
> 
> 赞同：2
> 
> 时间：2013-04-19T10:30:24.533
> 
> 标签：php, arrays

我有一组团队`($teams = array('1','2','3','4','5','6','7'))`。每支球队都会互相比赛，我想制定一个动态的时间表，因为每支球队都在不同的日子比赛，我的意思是不应该有一个球队在同一天打超过一场比赛。所以任何人都可以给我一个想法那我怎么能用php来做这个。

例子 ：-

```
$teams = array('1','2','3','4','5','6'); 
```

对会像这样创建：-

```
[1,2],[1,3],[1,4],[1,5],[1,6]

[2,3],[2,4],[2,5],[2,6]

[3,4],[3,5],[3,6]

[4,5],[4,6]

[5,6] 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:39:16.127

```
$teams = array('1','2','3','4','5','6');
$count=count($teams);

for($i=0;$i<$count-1;$i++){
    for($j=$i+1;$j<$count;$j++){
        echo'['.$teams[$i].' - '.$teams[$j].']';
    }
    echo'<br/>';
} 
```

主要逻辑是从第一个循环开始第二个循环。

# android - 在android中检测键盘

> ID：16102576
> 
> 赞同：0
> 
> 时间：2013-04-19T10:30:28.960
> 
> 标签：android, android-drawable

我有一个 android 应用程序，其中包含已安装应用程序的列表并在单击项目时启动它们。在我的应用程序中，我使用 Intent.ACTION_CLOSE_SYSTEM_DIALOG 广播来关闭系统对话框，例如任务管理器（最近的应用程序对话框）、电源选项对话框、低电量对话框等。 ...但这会在某些设备中隐藏键盘。我想确保用户无法与我的应用程序中最近的应用程序对话框进行交互。如何关闭除键盘之外的系统对话框？如何检查键盘是否可见？是否可以检测到最近的应用程序对话框？我被困在这几个小时。任何帮助都必须感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:38:43.247

我已经使用此代码来检测键盘。

```
view.getViewTreeObserver().addOnGlobalLayoutListener(
                new OnGlobalLayoutListener() {

                    @Override
                    public void onGlobalLayout() {

                            int heightDiff = 

view.getRootView().getHeight()
                                    - view.getHeight();
                            if (heightDiff > 200) {
                                keyboardUp = true;

                                return;
                            }
                            if (keyboardUp) {
                                keyboardUp = false;

                            }
                            Log.e("Keyboard", "" + keyboardUp);
                        }
                    }); 
```

# java - 将 java 库函数加载到 Luaj

> ID：16102578
> 
> 赞同：3
> 
> 时间：2013-04-19T10:30:34.297
> 
> 标签：java, lua, luaj

我一直在加载 java 函数，以便可以使用 luaj 从 lua 文件中调用它。

我目前所做的是创建这样的东西：

在 some_package/aif.java ：

```
package some_package;

public class aif extends TwoArgFunction {

    public aif() {
    }

    @Override
        public LuaValue call(LuaValue modname, LuaValue env) {
        LuaValue library = tableOf();
        library.set("foo", new foo());
        env.set("aif", library);
        return library;
    }

    //the rest contains the implementations of java functions
} 
```

然后在lua文件中：

```
require "some_package/aif"
--etc ... 
```

然后在 Main.java 文件中：

```
public static void Main(String[] args) {
    String script = "lib/some_lua_file.lua";
    globals = JsePlatform.standardGlobals();
    LuaValue chunk = globals.loadFile(script);
    chunk.call( LuaValue.valueOf(script) );         
} 
```

这段代码有效，但我想要的是在 lua 文件中我们不必使用“require”。我已经类似地实现了这一点，但在 c++ 中使用这一行：

```
luaL_requiref(L, "aif", luaopen_aiflib, 1); 
```

我们可以在 luaj 中这样做吗？我试过了 ：

```
globals.load(new aif()); 
```

但在线程“main”org.luaj.vm2.LuaError 中出现异常：预期索引，得到 nil（aif 类的调用函数中的变量 env 为 nil）

有人知道如何将 aif 设置为 lua 库以与 luaj 一起使用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-28T08:18:01.567

你可以像下面这样编写你的 MyXArgImpl ：

```
package mypackage;

import org.luaj.vm2.LuaValue;
import org.luaj.vm2.lib.ZeroArgFunction;

public class MyZeroArgImpl extends ZeroArgFunction {
    public LuaValue call() {
        return valueOf("My Zero Arg Implementation");
    }
} 
```

然后将其添加到您的 LUA 中，如下所示：

```
LuaValue globals = JsePlatform.standardGlobals();
globals.get("dofile").call( LuaValue.valueOf(yourScriptfile));
globals.set("callMyFunction", new MyZeroArgImpl()); 
```

现在，即使没有 require('...')，您也可以在 LUA 脚本中调用您的函数：

```
print(callMyFunction()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T12:10:39.693

在查看了 Lua 库的 luaj 实现后，我找到了答案。

我修改了我的代码：

```
package some_package;

public class aif extends OneArgFunction{

    public aif() {
    }

    @Override
    public LuaValue call(LuaValue env) {
        Globals globals = env.checkglobals();
        LuaTable aif = new LuaTable();
        aif.set("foo", new foo());
        env.set("aif", aif);
        globals.package_.loaded.set("aif", aif);
        return aif;
    }

    //the rest contains the implementations of java functions
} 
```

我将 aif 类编码为 TwoArgFunction 是因为教程说要这样做。现在有了上面的代码，不需要lua文件中的类

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T21:57:36.890

假设您正在加载的脚本有一个函数“receive_aif”

```
function receive_aif( aifObj )

    --This is how you can invoke public function associated with aifObj     
    aifObj:someAifFunction()

end 
```

从 java 中，您可以将 aif 实例传递为：（这应该适用于任何 java 对象）

```
aif aifObj = new aif()
LuaValue receive_aif_handle = globals.get("receive_aif");
LuaValue retvals = receive_aif_handle.call( CoerceJavaToLua.coerce( aifObj ) ); 
```

我使用“3.0 aplha-2”版本在我的应用程序中使用类似的结构

# vba - Excel VBA 循环通过工作表失败

> ID：16102583
> 
> 赞同：1
> 
> 时间：2013-04-19T10:30:54.043
> 
> 标签：vba, excel

**编辑：我接受了你所有的建议并编辑了我的代码。现在可以了！！！谢谢你。**

这是新代码：

* * *

```
Sub WorksheetLoop()

    Dim AllWorksheets As Integer

    Dim Worksheet As Integer

    AllWorksheets = ActiveWorkbook.Worksheets.Count
    For Worksheet = 2 To AllWorksheets

        Sheets(1).Select

        Cells(10, Worksheet).Value = Sheets(Worksheet).TextBoxes(2).Text
        Cells(13, Worksheet).Value = Sheets(Worksheet).TextBoxes(3).Text
        Cells(18, Worksheet).Value = Sheets(Worksheet).TextBoxes(1).Text
        Cells(24, Worksheet).Value = Sheets(Worksheet).TextBoxes(5).Text
        Cells(34, Worksheet).Value = Sheets(Worksheet).TextBoxes(6).Text
        Cells(34, Worksheet).Value = Sheets(Worksheet).TextBoxes(4).Text

    Next Worksheet
End Sub 
```

* * *

原始问题

所以有一个 excel 文档，其中包含大量的工作表。在第一张纸上，脚本应创建概述。它应该从第二个工作表开始，并且应该将文本框的内容（请不要问为什么会有文本框...）写入单元格 B10、B13 等等。然后脚本应该转到工作表 3，文本框的内容应该转到 C10、C13、......你明白了......我知道这只有 Z 才有可能......

但是为什么我不断收到错误消息？

我的 VBA 知识很少，很抱歉有明显的错误。

编辑：我接受了关于 & 周围空间的建议，但我仍然得到“对象不支持此属性或方法”

* * *

```
Sub WorksheetLoop()

    Dim AllWorksheets As Integer

    Dim Worksheet As Integer

    AllWorksheets = ActiveWorkbook.Worksheets.Count

    For Worksheet = 2 To AllWorksheets
        For CellAscii = 66 To (AllWorksheet + 66)
            Cell = Chr(CellAscii)
            Sheets(1).Select
            Range(Cell & "10").Value = Sheets(Worksheet).TextBox2.Text
            Range(Cell & "13").Value = Sheets(Worksheet).TextBox3.Text
            Range(Cell & "18").Value = Sheets(Worksheet).TextBox1.Text
            Range(Cell & "24").Value = Sheets(Worksheet).TextBox5.Text
            Range(Cell & "30").Value = Sheets(Worksheet).TextBox6.Text
            Range(Cell & "34").Value = Sheets(Worksheet).TextBox4.Text
        Next CellAscii
    Next Worksheet
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:14:34.943

尝试访问文本框时只需尝试以下操作：

```
Sheets("SheetName").TextBoxes("TextBox Name").Text 
```

验证您的“SheetName”和“TextBox Name”是否正确。

希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:41:36.970

您的代码中的主要错误是前后没有空格`&`

更改`Range(Cell&"10").Value`为`Range(Cell & "10").Value`。其余的类似，您的代码将运行得很好:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T10:32:50.183

Range 没有引用模式 Ay，它使用 RyCx 引用。
无论如何，使用 SheetX.Cell 访问特定行和列中的特定单元格。

您可以像这样循环遍历单元格：

```
Sub MyLoop()
    For RowCounter = 1 To 20

        For ColumnCounter = 1 To 20
            Set curCell = Worksheets("Sheet1").Cells(RowCounter , ColumnCounter)
            If Abs(curCell.Value) < 0.01 Then curCell.Value = 0
        Next ColumnCounter 
    Next RowCounter 
End Sub 
```

# java - Java（隐式类型转换）：一元运算符是否会影响操作中变量的数据类型？

> ID：16102587
> 
> 赞同：1
> 
> 时间：2013-04-19T10:31:04.823
> 
> 标签：java, types, casting

在学习隐式和显式类型转换时，我尝试了以下代码：

```
class Implicit
{
    public static void main(String args[])
    {
        byte a=10;
        byte b=20;

        a=a+b; //

        System.out.println(a);
    }
} 
```

编译器报告：

![在此处输入图像描述](https://i.stack.imgur.com/LNHtO.png)

我尝试了此代码以查看此类示例中的一元运算符或任何其他操作是否会导致右侧的数据类型发生更改。

这是这里发生的事情吗？如果是这样，原因是什么？还有哪些其他情况会导致数据类型改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:32:54.420

编译器会警告您，因为`byte+byte = int`因此，它会警告您何时尝试添加两个字节（本质上是添加后的 int）并将其分配给一个字节，这将导致精度损失，因为 byte 只能保存 8 位，而作为 int可容纳 32 位。

[**但是，当您使用复合赋值运算符**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)时，这不会给您警告。

```
 a+=b; // 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:37:38.417

它警告你

> 可能的精度损失

因为加法运算符会在加法完成之前将每个`byte`值提升为 an `int`（二进制数字提升）。所以 byte+byte 将是一个`int`结果，并分配回`a`它需要向下转换`int`为`byte`. 如果加法的值大于可以存储为`byte`值的值，则向下转换可能会导致精度损失。

您可以通过显式向下转换来强制编译器接受这一点，`a=(byte)(a+b)`因为您知道风险和编译器不应该关心的信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:35:19.337

add 操作导致 byte 变量提升为 int。

请参阅此问题的答案[Add bytes with type cast, Java](https://stackoverflow.com/questions/9815970/add-bytes-with-type-casting-java)

我不太清楚为什么使用 java，但似乎对于 c#（是的，c# 有类似的结果），这是为了性能。有关详细信息，请参见此处[byte + byte = int ... 为什么？](https://stackoverflow.com/questions/941584/byte-byte-int-why)

# android - 当用户向下滚动到列表末尾时，如何在 Cwac-Endlessadapter 中设置加载列表项的限制

> ID：16102589
> 
> 赞同：1
> 
> 时间：2013-04-19T10:31:07.980
> 
> 标签：android, listview, endlessadapter

例如：-如果我加载列表中的前 5 个项目，然后向下滚动加载接下来的五个项目

并且因为它是一个无限的适配器，所以这个过程必须无休止地重复这就是我尝试的方式--> foliowing 是我的演示适配器代码：-

```
 public class MyDemoAdapter extends EndlessAdapter {

private static int cutting_int =5;
public static int batch_repeat = 0;
public int check_batch = 0;
private Context mcontxt;
private RotateAnimation rotate = null;
ArrayList<DownloadOffersClass> tempList = new ArrayList<DownloadOffersClass>();
private static int mLastOffset = 0;
private ArrayList<DownloadOffersClass> list = new ArrayList<DownloadOffersClass>();
private int LIST_SIZE;

public MyDemoAdapter(Context context, int textViewResourceId,
        ArrayList<DownloadOffersClass> list, int lIST_SIZE) {
    super(new DownloadedOffersAdapter(context,
            R.layout.offer_listview_item, list));
    this.mcontxt = context;
    this.list = list;
    this.LIST_SIZE = lIST_SIZE;
    rotate = new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
            0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    rotate.setDuration(600);
    rotate.setRepeatMode(Animation.RESTART);
    rotate.setRepeatCount(Animation.INFINITE);
}

@Override
protected View getPendingView(ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) mcontxt
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View row = inflater.inflate(R.layout.row, null);

    View child = row.findViewById(android.R.id.text1);

    child.setVisibility(View.GONE);

    child = row.findViewById(R.id.throbber);
    child.setVisibility(View.VISIBLE);
    child.startAnimation(rotate);

    return (row);
}

@Override
protected boolean cacheInBackground() {
    SystemClock.sleep(2000);

    if (check_batch != batch_repeat) {
        tempList.clear();
        int lastOffset = getLastOffset();
        if (lastOffset < LIST_SIZE) {
            int limit = lastOffset + cutting_int;
            for (int i = (lastOffset + 1); (i <= limit && i < LIST_SIZE); i++) {
                tempList.add(list.get(i));
            }
            setLastOffset(limit);

            if (limit < 50) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        return false;
    }
}

@Override
protected void appendCachedData() {
    if (getWrappedAdapter().getCount() < 50) {
        @SuppressWarnings("unchecked")
        DownloadedOffersAdapter a = (DownloadedOffersAdapter) getWrappedAdapter();

        check_batch = check_batch + 1;
        Log.v("Check", " " + check_batch);
        for (int i = cutting_int; i < cutting_int + cutting_int; i++) {
            a.add(list.get(i));
        }
    }
}

public static void setLastOffset(int i) {
    mLastOffset = i; 
}

private int getLastOffset() {
    return mLastOffset;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:39:23.083

修改你的 cacheInBackground()

```
if (check_batch != batch_repeat) {
            tempList.clear();
            int lastOffset = getLastOffset();
            if (lastOffset < LIST_SIZE) {
                int limit = lastOffset + cutting_int;
                for (int i = (lastOffset + 1); (i <= limit && i <                                           LIST_SIZE); i++) {
                    tempList.add(list.get(i));
                }
                setLastOffset(limit);

                if (limit <= 50) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        } else {
            if (!firstTry) {// use this boolean to do it only once
                tempList.clear();
                int notDivisible = LIST_SIZE % cutting_int;
                if (!(notDivisible == 0)) {
                    firstTry = true;
                    return true;
                } else {
                    return false;
                }
            }
            return false;
        } 
```

并将您的 appendCachedData() 方法替换为：

```
 protected void appendCachedData() {

        DownloadedOffersAdapter a = (DownloadedOffersAdapter) getWrappedAdapter();
        if (check_batch != batch_repeat) {
            if (getWrappedAdapter().getCount() <= 50) {
                check_batch = check_batch + 1;
                Log.v("Check", "append chk_batch " + check_batch);
                for (int i = cutting_int; i < cutting_int + cutting_int; i++) {
                    a.add(list.get(i));
                }
            }
        } else {// Append extra entries to list i.e less than cutting_int
            int notDivisible = LIST_SIZE % cutting_int;
            for (int i = (LIST_SIZE - notDivisible); i < LIST_SIZE - 1; i++) {
                a.add(list.get(i));
            }
            return;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:04:04.530

您将在列表适配器上为 ImageLoader 创建对象。

```
ImageLoader lazyload = new ImageLoader(context);

public ImageLoader(Context context) {
        FileCache fileCache = new FileCache(context);
        ExecutorService executorService = Executors.newFixedThreadPool(5);
    } 
```

然后像这样将图像设置为您的适配器 getView() 。

```
 ImageView image = (ImageView) view.findViewById(R.id.yourImage);

    lazyload.displayImage(image); 
```

加载你的图片

```
public void displayImage(String url, ImageView imageView) {
    if (bitmap != null)
        imageView.setImageBitmap(bitmap); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:32:52.353

> 例如：-如果我加载列表中的前 5 个项目，然后向下滚动加载接下来的五个项目

您负责用足够的项目填充适配器以保证滚动，而 5 不太可能就足够了。

当您被告知要加载额外数据时，您有责任确定要加载多少额外项目。

> 并且因为它是一个无限的适配器，所以这个过程必须无休止地重复

或者直到您告诉`EndlessAdapter`没有更多数据，例如`false`从`cacheInBackground()`. 这里的想法是，当您执行 Web 服务调用以获取下一组数据时，您还应该确定您是否已到达可用数据的末尾。

# ruby-on-rails-3 - 不能批量分配受保护的属性

> ID：16102603
> 
> 赞同：-1
> 
> 时间：2013-04-19T10:31:45.813
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在使用 rails 3.while 尝试创建一个我得到的用户

```
cant mass assign the protected attributes error 
```

我在 gemfile 中包含了以下 gem

```
gem 'authlogic' 
gem 'gemcutter' 
```

并`bundle install`在 Rails 控制台中运行

然后创建一个用户模型并将所需的 authlogic 列添加到迁移中。

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string    :login,               :null => false  
      t.string    :crypted_password,    :null => false  
      t.string    :password_salt,       :null => false  
      t.string    :persistence_token,   :null => false  
      t.timestamps
    end
  end
end 
```

并确实`rake db:migrate` 包含`authlogic`在用户模型中。

```
# /app/models/user.rb  
class User < ActiveRecord::Base  
  acts_as_authentic  
end 
```

尝试在 Rails 控制台中创建用户时 `User.create(name: "pria",password: "priya123", password_confirmation: "priya123")`

我正进入（状态

```
cant mass assign the protected attributes :name, :password, :password_confirmation 
```

我该如何纠正这个错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:34:40.647

在您的`User`模型中：

```
attr_accessible :name, :password, :password_confirmation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:45:00.457

您必须将这些属性添加到`attr_accessible`模型中的列表中。

有关批量分配及其安全影响的重要信息：http: [//guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

# c# - Microsoft.Office.Interop.Word + MS Word Starter

> ID：16102606
> 
> 赞同：0
> 
> 时间：2013-04-19T10:31:53.537
> 
> 标签：c#

我有一个从重点应用程序中提取信息的应用程序。这工作正常，如果重点应用程序是 MS Word 2003、2007 和 2010，我可以提取信息，我的问题来自 MS Word 2010 启动器。我有这段代码可以从当前的 ms 单词中提取数据（重点突出）

```
var appObj = (Microsoft.Office.Interop.Word.Application)Marshal.GetActiveObject("Word.Application");
Document activeDocument = appObj.ActiveDocument;
Name = activeDocument.Name; 
```

我的问题是。是否`Microsoft.Office.Interop.Word`支持入门版？如果没有，你能给我任何从那个 MS Word Starter 中提取数据的方法吗？任何帮助将不胜感激。谢谢

# gatling - 在 Gatling 中获取身份验证令牌

> ID：16102614
> 
> 赞同：7
> 
> 时间：2013-04-19T10:32:12.897
> 
> 标签：gatling

我正在尝试使用 Gatling 来测试我的 API，但我遇到了问题。我现在正在测试登录/注销。在登录时，用户获得了一个用于注销的令牌。
当我使用记录器时，它会保留一个修复令牌，当然，当我运行测试时它不起作用。但我在文档或谷歌中找不到如何动态获取令牌。
有人知道吗 ？
谢谢 ！

编辑：

在这里记录我得到的东西之后

```
val headers_13 = Map(
        "Accept" -> """*/*""",
        "Origin" -> """http://site.com""",
        "token" -> """token"""
)

val scn = scenario("Scenario Name")
        .exec(http("request_1")
                    .post("http://site.com/login")
                    .headers(headers_1)
                        .param("""player[email]""", """email@address.com""")
                        .param("""player[password]""", """password""")
            )
        .pause(757 milliseconds) 
```

…</p>

```
.exec(http("request_13")
                    .get("http://site.com/logout")
                    .headers(headers_13)
            )
        .pause(202 milliseconds) 
```

我尝试将这两段代码放在 .post(" [http://site.com/login](http://site.com/login) ") 和 .get(" [http://site.com/logout](http://site.com/logout) ") 之后，但这不起作用

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T10:38:13.193

你的令牌在哪里？它是 HTTP 标头吗？一般来说，从响应中保存数据以便将其重用于进一步请求的方法是[Check API](https://gatling.io/docs/gatling/reference/current/http/check/)。

```
.check(header("tokenName").saveAs("token")    
...    
.header("tokenName", "${token}") 
```

# javascript - 缩放浏览器时div位置发生变化

> ID：16102615
> 
> 赞同：0
> 
> 时间：2013-04-19T10:32:15.930
> 
> 标签：javascript, html, jquery-ui, css

我有一个弹出 div，它工作正常，当我单击图像时会弹出，现在当我放大或缩小时，弹出 div 保持原位，因为它的位置是绝对的，当我将其更改为相对时，它会弹出在不同的地方，css和javascript如下：

**css**

```
.set_pop{
                position:absolute;
                margin-right: 50px;
                margin-top:10px;
                width:100px;
                -webkit-box-shadow: #666 0px 2px 3px;
                -moz-box-shadow: #666 0px 2px 3px;
                box-shadow: #666 0px 2px 3px;
                border-radius:5px;
                -moz-border-radius:5px;
                -webkit-border-radius:5px;
                z-index:10;
                background-color: #ffffff;
                color:#000;
            } 
```

**js**

```
 $('.settings img').live('click', function(event){
               event.stopPropagation();
                 var popup_div = $('.set_pop');
                var obj = $(this);
                var offset = obj.offset();

                var new_top = offset.top + 30;

                var new_left = offset.left;

                new_left = new_left - ( popup_div.width() / 2);
                new_left = new_left + ( obj.width() / 2);

                popup_div.css('left', new_left + 'px');
                popup_div.css('top', new_top + 'px');

                popup_div.show();
            }); 
```

我需要的是这个div在我放大/缩小时用弹出源重新定位它的图像

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T09:48:11.853

尝试使用`position:fixed;`而不是`position:absolute;`. 固定位置将使盒子保持不变。如果您使用绝对，当您向下滚动页面时，该框将上升。使用位置固定时，使用左右边距。像这样

```
.set_pop{
    position:fixed;
    right: 50px;
    top:10px;
    width:100px;
    -webkit-box-shadow: #666 0px 2px 3px;
    -moz-box-shadow: #666 0px 2px 3px;
    box-shadow: #666 0px 2px 3px;
    border-radius:5px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    z-index:10;
    background-color: #ffffff;
    color:#000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T09:44:00.397

这是窗口调整大小的问题，因此您需要在每次调整窗口大小时运行该函数。示例代码...

```
$('.settings img').live('click', function(event){
    $('#hidid').attr('value', $(this).attr('id'));              
    showDiv(this.id);
});

window.onresize = function() {
    var id = $('#hidid').attr('value');
    showDiv(id);
};

function showDiv(id) {
    var popup_div = $('.set_pop');
    var obj = $('#'+id);
    var offset = obj.offset();

    var new_top = offset.top + 30;
    var new_left = offset.left;
    new_left = new_left - ( popup_div.width() / 2);
    new_left = new_left + ( obj.width() / 2);

    popup_div.css('left', new_left + 'px');
    popup_div.css('top', new_top + 'px');
    popup_div.show();
} 
```

和 html 部分我有一个隐藏字段来存储单击图像时的 id ...您可以以自己的方式存储它。顺便说一句，我还为每个图像使用了 id 。也许它会帮助你:)

# java - Glassfish 3.1.2 加载本机库 (.dll)

> ID：16102618
> 
> 赞同：2
> 
> 时间：2013-04-19T10:32:23.057
> 
> 标签：java, dll, jar, glassfish, native

我正在使用本机库 (OpenCV)，为此我有 .jar 和 .dll。当我运行本地 Java 项目时，我只需将 .jar 从 Eclipse 添加到构建路径，并设置本机库路径。然后我加载它

```
System.load(absolutePath); 
```

但是，在我尝试在 Glassfish 上部署的 WebService 中，出现“本机库已加载到另一个类加载器中”错误。在 Glassfish 项目中包含 .jar 和 .dll 的正确过程到底是什么？

# python - 使用 Flask 和 rauth 时如何保留 Facebook 访问令牌？

> ID：16102619
> 
> 赞同：0
> 
> 时间：2013-04-19T10:32:23.900
> 
> 标签：python, facebook, oauth, flask, rauth

当我向 facebook 执行`get_authorize_url`请求时，我被重定向到以下内容`URL`（在浏览器中看到）：

```
http://127.0.0.1:5000/#access_token=sdfsdfasfaf&expires_in=5849 
```

但我无法获得这个 access_token in `flask`：它不在`request.args`，它不在`request.query_string`，它甚至不在那里`request.url`。也许烧瓶的`#`角色有问题？如何访问该查询参数？

这是我的代码的相关部分（源自`rauth` [facebook-cli 示例](https://github.com/litl/rauth/blob/c6447ddb5427246d58e6c2077bdc71404b4d1def/examples/facebook-cli.py)）：

```
# rauth OAuth 2.0 service wrapper
graph_url = 'https://graph.facebook.com/'
facebook = OAuth2Service(name='facebook',
                         authorize_url='https://www.facebook.com/dialog/oauth',
                         access_token_url=graph_url + 'oauth/access_token',
                         client_id=app.config['FB_CLIENT_ID'],
                         client_secret=app.config['FB_CLIENT_SECRET'],
                         base_url=graph_url)

...

@app.route('/facebook/login')
def login():
    redirect_uri = url_for('authorized', _external=True)
    params = {'scope': 'read_stream',
              'response_type': 'token',
              'redirect_uri': redirect_uri}
    return redirect(facebook.get_authorize_url(**params))

@app.route('/facebook/authorized')
def authorized():
    # I am not able to find the access_token
    print dir(request)
    print request.args
    print request.query_string
    print request.url

    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:11:49.580

如果您遵循[Facebook Flask 示例](https://github.com/litl/rauth/tree/master/examples/facebook)并使用代码响应，则不需要任何 JavaScript。事实上，通常这不是 OAuth 消费者的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:56:37.127

URI 中以“#”标记的部分称为片段标识符。它不会传输到服务器，只能在客户端处理，例如通过 JS。

# iphone - 如何正确处理失败或取消的 IAP 内容下载？

> ID：16102620
> 
> 赞同：3
> 
> 时间：2013-04-19T10:32:24.433
> 
> 标签：iphone, ios, ipad, in-app-purchase, storekit

我正在研究 Ray Wenderlich 的 iOS 6 by tutorials book 中的非消耗性 Apple 托管 IAP 示例。在那里，他建议`finishTransaction:`即使下载失败或被取消，代码也会调用。但是我不应该在内容对用户 100% 可用之前让交易未完成吗？

另外我如何处理失败的下载？如何手动重新启动它？

# ios - iOS UITableViewCell cell.imageView 设置圆角

> ID：16102621
> 
> 赞同：9
> 
> 时间：2013-04-19T10:32:30.260
> 
> 标签：ios, uitableview, uiimageview

嘿，我正在尝试设置`cell.imageView`'s `cornerRadius`，但它似乎不起作用。

```
cell.imageView.layer.cornerRadius=9; 
```

它会起作用还是我应该`UIImageView`在我的单元格中添加一个自定义以具有圆角？

我也试过这个

```
cell.imageView.layer.borderWidth=2;
cell.imageView.layer.borderColor=[[UIColor blackColor]CGColor]; 
```

但它似乎也不起作用。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-19T11:46:45.800

First [add Framework](https://stackoverflow.com/a/6335001/2106973) -> QuartzCore.framework to your project
then import header file in your `ViewController.m` file

```
#import <QuartzCore/CALayer.h> 
```

Add following code in your `cellForRowAtIndexPath` method:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *cellIdentifier = @"TableViewCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

        // Rounded Rect for cell image
        CALayer *cellImageLayer = cell.imageView.layer;
        [cellImageLayer setCornerRadius:9];
        [cellImageLayer setMasksToBounds:YES];
    }                                

    cell.imageView.image = [UIImage imageNamed:@"image_name.png"];

    return cell;
} 
```

# d3.js - QtWebKit 中的 d3.event 对象

> ID：16102623
> 
> 赞同：1
> 
> 时间：2013-04-19T10:32:33.203
> 
> 标签：d3.js, qtwebkit

我正在尝试在 qtWebKit 中使用 d3js。特别是我创建了以下测试页面：

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

rect.pane {
  cursor: move;
  pointer-events: all;
}

</style>
<body>
<script type="text/javascript" src="d3.min.js"></script>
<script type="text/javascript">
var margin = {top: 20, right: 60, bottom: 30, left: 20},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

// svg
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var zoom = d3.behavior.zoom()
    .on("zoom", draw);

svg.append("rect")
    .attr("class", "pane")
    .attr("width", width)
    .attr("height", height)
    .call(zoom);

function draw() {
    console.log(d3.event);
}
</script> 
```

此 html 代码的目的是让 rect “触发”滚动事件并从 d3.event 对象中检索比例值，如[https://github.com/mbostock/d3/wiki/Zoom-Behavior](https://github.com/mbostock/d3/wiki/Zoom-Behavior)中所述。

如果我在 chrome 中加载此示例，查看控制台我可以看到对象 d3.event：

```
Object {type: "zoom", scale: 1.0511729090877093, translate: Array[2], sourceEvent: WheelEvent, target: function} 
```

现在我把这个例子插入到一个 qtWebKit 小部件中；使用 QMainWindow：

```
MainWindow::MainWindow(QWidget *parent) :
  QMainWindow(parent),
  ui(new Ui::MainWindow),
  view(new QWebView(this))
{
  ui->setupUi(this);
  setCentralWidget(view);
  view->load(QUrl("qrc:/html/test.html"));

  QWebFrame *webFrame = view->page()->currentFrame();
  webFrame->addToJavaScriptWindowObject(QString("callback"), this);
} 
```

和

```
Q_INVOKABLE void callbackScrollEvent(QString data); 
```

和

```
void MainWindow::callbackScrollEvent(QString data)
{
qDebug() << "test" << data;
} 
```

但 d3.event 对象就像是空的：

```
test "[object Object]" 
```

有什么我想念的吗？我正在使用 Qt 4.8.4，但也使用 Qt 5.0.1，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:48:58.813

在 chrome 中，您也可以看到它也是一个对象。但是chrome开发者工具会展开并显示这个对象的结构。所以“[object Object]”是您代码中的正确结果。

您可以尝试更改代码

```
function draw() {
    console.log(d3.event);
} 
```

至

```
function draw() {
    console.log(d3.map(d3.event));
} 
```

这会将对象转换为地图，关键是对象的属性。你可能会得到类似的结果

```
u {type: "zoom", scale: 1.1809926614295303, translate: Array[2], sourceEvent: WheelEvent, target: function} 
```

我不确定你会在 QtWebKit 中得到什么。如果你不能得到你想要的，你可以通过输出来调试/检查特定的属性，如下所示：

```
console.log("type:"+d3.event.type)
console.log("scale:"+d3.event.scale) 
```

你会得到

```
type:zoom fiddle.jshell.net:46
scale:1.1809926614295303 
```

# c++ - 将 PChar 从 Delphi DLL 传递给 C

> ID：16102624
> 
> 赞同：2
> 
> 时间：2013-04-19T10:32:34.620
> 
> 标签：c++, delphi, delphi-xe2

我目前在动态导入 Delphi DLL 时遇到问题。Delphi DLL 函数声明如下：

```
function TEST() : PChar; cdecl;
begin
  Result := '321 Test 123';
end; 
```

在 C++ 中，我这样称呼它：

```
typedef char *TestFunc(void);
TestFunc* Function;
HINSTANCE hInstLibrary = LoadLibrary("Test.dll");
if (hInstLibrary)
{
    Function = (TestFunc*)GetProcAddress(hInstLibrary, "TEST");
    if (Function)
    {
        printf("%s", Function());
    }
} 
```

问题是我只收到字符串的第一个字母。如何告诉 C++ 字符串在第一个字符之后没有结束？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:47:10.437

你有两个问题：

1.  Delphi 发送给您的字符串是 UTF-16 编码的。你需要编码为 ANSI 并返回`PAnsiChar`，如果你想匹配`char*`.
2.  当函数返回时，返回的指针所指的内存很容易被释放。您可以在函数中摆脱它，因为您返回一个字符串文字，该字符串文字作为全局常量保存，在 DLL 的生命周期内持续存在。对于字符串变量，当您的调用者尝试读取已释放的内存时，您将遇到运行时错误。令人困惑的是，这些运行时错误将是间歇性的。您的代码可能看起来有效。当您部署到最重要的客户时，预计会失败！

您解决第 2 项的选项：

1.  安排调用者分配缓冲区，然后由被调用者填充。
2.  在共享堆上分配和解除分配字符串。例如带有`CoTaskMemAlloc`和的 COM 堆`CoTaskMemFree`。使用共享堆允许您在一个模块中分配，并在另一个模块中释放。

根据经验，如果可以满足您的需求，请始终首选选项 1。

# cordova - 如何使用cordova（phonegap）在wp8上获取本地IP地址？

> ID：16102630
> 
> 赞同：1
> 
> 时间：2013-04-19T10:32:42.283
> 
> 标签：cordova, windows-phone-8, phonegap-plugins

如何使用cordova（phonegap）在wp8上获取本地IP地址？也许我需要以下线程的答案，但是在 C# [Get local IP address of client using javascript](https://stackoverflow.com/questions/13933783/get-local-ip-address-of-client-using-javascript)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:50:39.083

如果您可以从 cordova 调用 C# 代码，那么在 C# 中它是这样实现的：

```
Windows.Networking.Connectivity.NetworkInformation.GetHostNames(); 
```

生成的集合包含有关电话所有网络接口的信息，通过`Windows.Networking.HostName`类的实例。您可以从该实例获取 IP 地址：`Windows.Networking.HostName.CanonicalName`.

请注意，您可能会在响应中收到多个接口。最有可能的是，您将获得一个用于蜂窝网络调制解调器和一个用于 Wi-Fi 网络。如果需要区分它们，可以使用`Windows.Networking.HostName.IPInformation.NetworkAdapter.IanaInterfaceType`属性。对于 Wi-Fi，它将包含值 71。对于蜂窝网络（至少对于我当前的电话和运营商而言），它显示 244。值的完整列表可以在[IANA 网站](http://www.iana.org/assignments/ianaiftype-mib/ianaiftype-mib)上找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-23T20:11:12.110

这在 C# 中也对我有用.. 对于那些需要它的人，这里有一个数字列表：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkadapter.ianainterfacetype(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkadapter.ianainterfacetype(v=win.10).aspx)

代码示例：

```
 var l = Windows.Networking.Connectivity.NetworkInformation.GetHostNames();
 foreach (var item in l)
 {
   if (item.Type == Windows.Networking.HostNameType.Ipv4 &&
                   ( item.IPInformation.NetworkAdapter.IanaInterfaceType == 71 || // 71 =  An IEEE 802.11 wireless network interface. (device) 
                    item.IPInformation.NetworkAdapter.IanaInterfaceType == 6) )   // 6 =  An Ethernet interface. (emulator)
      {    
         IPAddr = item.DisplayName;
      }

 } 
```

# mysql - Mysql全文搜索查询

> ID：16102634
> 
> 赞同：0
> 
> 时间：2013-04-19T10:32:54.607
> 
> 标签：mysql, full-text-search

我的 mysql 表中有一个名字和一个姓氏字段。而且我不知道用户在一个字段中输入名字和姓氏的顺序。我的全文索引在 PERSONEN_VNAME 和 PERSONEN_NAME 上，所以他可以写“tester a”或“a tester”。

我得到了这两个人：

1.  姓：测试员，名字：安德里亚
2.  姓：Tester，名字：A

我试过这个查询：

```
SELECT PERSONEN_ID,PERSONEN_VNAME, PERSONEN_NAME FROM
 PATIENT WHERE match(personen_name,personen_vname) against
('+tester* +a* ' IN BOOLEAN MODE) 
```

该查询只返回我 TESTER Andrea 而不是 Tester A。

为什么！？

编辑：sql 小提琴：[http ://sqlfiddle.com/#!2/21f29/1](http://sqlfiddle.com/#!2/21f29/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:55:59.017

用这个：-

```
SELECT PERSONEN_ID,PERSONEN_VNAME, PERSONEN_NAME FROM
 PATIENT WHERE match(personen_name,personen_vname) against
('+tester* +a% ' IN BOOLEAN MODE) 
```

看到这个[小提琴](http://sqlfiddle.com/#!2/21f29/2)

# jquery - 触发点击 Zurb Foundation 4 下拉菜单

> ID：16102642
> 
> 赞同：4
> 
> 时间：2013-04-19T10:33:16.420
> 
> 标签：jquery, zurb-foundation

当用户将产品添加到他们的购物篮时，我想动态激活 Foundation 下拉菜单，以便下拉显示这个（无需点击）。

我尝试了很多不同的方法来动态单击链接，但没有一个成功：

用于单击链接的 jQuery：

```
$('#my-basket').trigger('click'); 
```

链接代码：

```
<span id="my-basket" data-dropdown="basket-summary"><i class="icon icon-basket"></i> My Basket <?php if ($shop->basket_count()) echo '(<span>' . $shop->basket_count() . '</span>)'; ?></span> 
```

下拉代码：

```
<div id="basket-summary" class="f-dropdown tiny content" data-dropdown-content>
    <p> Content here</p>
    <a href="/basket">Go to basket</a>
</div> 
```

有任何想法吗？

# jquery - jQuery如何在一个鼠标输入后停止对角动画？

> ID：16102645
> 
> 赞同：-1
> 
> 时间：2013-04-19T10:33:39.677
> 
> 标签：jquery

```
$(document).ready(function(){
  $(".glavna").mouseenter(function(){
    $(".ocenjevanje").animate({right:"+=440", bottom:"+=20"},1000);
    $(".svetovanje").animate({right:"+=440", top:"+140"},1000);
    $(".onas").animate({left:"+=440", top:"+160"},1000);
    $(".infotocka").animate({left:"+=440", bottom:"+3"},1000);
  });
}); 
```

所以现在每次我将鼠标放在我的主卡（glavna）上时，所有其他卡都会移到一边。但是我怎样才能使它只适用 1 次？我想移动主卡，所有其他卡移动到一边并留在那里。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:37:01.783

尝试这个：

```
var flag=true;
$(document).ready(function(){
   $(".glavna").mouseenter(function(){
      if(flag)
      {
         $(".ocenjevanje").animate({right:"+=440", bottom:"+=20"},1000);
         $(".svetovanje").animate({right:"+=440", top:"+140"},1000);
         $(".onas").animate({left:"+=440", top:"+160"},1000);
         $(".infotocka").animate({left:"+=440", bottom:"+3"},1000);
         flag=false;
      }

   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:44:38.937

尝试这个：

```
$(document).ready(function(){
  $(".glavna").one('mouseenter', function(){
    $(".ocenjevanje").animate({right:"+=440", bottom:"+=20"},1000);
    $(".svetovanje").animate({right:"+=440", top:"+140"},1000);
    $(".onas").animate({left:"+=440", top:"+160"},1000);
    $(".infotocka").animate({left:"+=440", bottom:"+3"},1000);
  });
}); 
```

请参阅[jQuery .one() 方法](http://api.jquery.com/one/)

# java - 检查来自外部来源的数据是正数还是负数并获取它的值

> ID：16102648
> 
> 赞同：-5
> 
> 时间：2013-04-19T10:34:02.860
> 
> 标签：java, android

我有 3 字节数据，来自外部来源。我曾经很长时间存储该数据，现在我需要检查即将到来的数据是负数还是正数。为此，我使用了代码：

```
long min = Long.MIN_VALUE;
     long i = ((longData+ min) & 0xFF) - min;

     if(i <0)
     {
         System.out.print(i+"negative");
     }
     else
         System.out.print(i+"positive"); 
```

但这不起作用，请您指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:44:20.833

这将取决于您所说的“负数”以及您如何将 3 个字节转换为一个`long`值。如果将三个字节存储在 long 的三个最低有效字节中，并且如果“负”表示设置了最高位，那么您应该能够使用：

```
if ((longData & (1L<<23)) != 0) {
    System.out.print(i+"negative");
}
else {
    System.out.print(i+"positive");
} 
```

# string - bash - 如何从文件中查找字符串并获取其位置？

> ID：16102649
> 
> 赞同：1
> 
> 时间：2013-04-19T10:34:03.243
> 
> 标签：string, bash, find

文件`services`- 包含许多这样的记录：

```
define service {
    host_name\t\t\t\tHOSTNAME
    ...
    ...
} 
```

文件`hosts`- 包含记录：

```
define host {
    host_name\t\t\t\tHOSTNAME
    ...
    ...
} 
```

我需要去`hosts`，以某种方式从第一条记录中获取主机名的名称，然后转到文件`services`并找到具有该主机名的所有记录并将它们放入其他文件。然后对`hosts`.

我不知道主要如何从文件主机获取 HOSTNAME，然后如何将文件服务中的整个记录​​获取到变量中。我准备了一个正则表达式（希望是对的）`^define.*host_name\t\t\t\t$HOSTNAME.*}`

请给我一些建议或示例如何获得想要的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:01:15.130

您提供的文件看起来很像 nagios 配置文件。

sed 在这里可能是您的朋友，因为它允许您将文件切成更小的部分，例如：

```
:t
/^define service {/,/}$/ {    # For each line between these block markers..
   /}$/!{         #   If we are not at the /end/ marker
      $!{          #     nor the last line of the file,
         N;        #     add the Next line to the pattern space
         bt
      }            #   branch (loop back) to the :t label.
   }               # This line matches the /end/ marker.
   /host_name[ \t]\+HOSTNAME\b/!d;       # delete the block if wrong host.
} 
```

该示例从 sed faq 4.21 中提取，并稍作调整。您还可以查看问题 4.22，它似乎直接解决了这个问题：

[http://sed.sourceforge.net/sedfaq4.html#s4.22](http://sed.sourceforge.net/sedfaq4.html#s4.22)

与前面的答案一样，我也倾向于说您最好使用另一种脚本语言。如果您无论如何都需要一个不同的解释器来完成这项工作，不妨使用您知道的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:52:33.127

这个任务对于 bash 脚本来说有点太复杂了。我会使用 Perl：

```
#!/usr/bin/perl
use warnings;
use strict;

open my $SRV, '<', 'services' or die $!;
open my $HST, '<', 'hosts'    or die $!;

my %services;
{    local $/ = "\n}";
     while (my $service = <$SRV>) {
         my ($hostname) = $service =~ /^\s*host_name\t+(.+?)\s*$/m;
         push @{ $services{$hostname} }, $service if defined $hostname;
     }
 }

while (my $line = <$HST>) {
    if (my ($host) = $line =~ /^\s*host_name\t+(.+?)\s*$/) {
        if (exists $services{$host}) {
            print "===== $host =====\n";
            print "$_\n" for @{ $services{$host} };
        } else {
            warn "$host not found in services!\n";
        }
    }
} 
```

# windows-phone-7 - 将存储在独立存储中的图像绑定到 Windows Phone 中的图像控件

> ID：16102651
> 
> 赞同：4
> 
> 时间：2013-04-19T10:34:08.063
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

是否可以通过 xaml 将 Isolates 存储中存在的图像绑定到图像控件。我发现了一些实现，比如通过属性获取图像并将其绑定到 xaml 控件中。但这不是我正在寻找的实现。我的问题是，编写一个附加属性和辅助方法来从独立存储中获取内容。我在 Windows phone 7 中使用的 LowProfileImage 类中找到了类似的实现。但我认为它现在已被弃用。如果有人尝试过类似的实现，请帮助我实现相同的目标。此外，如果实施有任何性能消耗，请也提及该信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T11:24:05.543

是的，可以在应用程序 UI 中使用来自隔离存储的图像。它需要将文件中的图像加载到 中`BitmapImage`，然后将`ImageSource`您的控件绑定到该`BitmapImage`. 我正在使用以下方法：

首先，有一种异步加载图像的方法：

```
private Task<Stream> LoadImageAsync(string filename)
    {
        return Task.Factory.StartNew<Stream>(() =>
        {
            if (filename == null)
            {
                throw new ArgumentException("one of parameters is null");
            }

            Stream stream = null;

            using (var isoStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (isoStore.FileExists(filename))
                {
                    stream = isoStore.OpenFile(filename, System.IO.FileMode.Open, FileAccess.Read);                               
                }
            }
            return stream;
        });
    } 
```

然后可以这样使用：

```
public async Task<BitmapSource> FetchImage()
    {
        BitmapImage image = null;
        using (var imageStream = await LoadImageAsync(doc.ImagePath))
        {
            if (imageStream != null)
            {
                image = new BitmapImage();
                image.SetSource(imageStream);
            }
        }
        return image;
    } 
```

最后，您只需将方法的返回值分配给`FetchImage()`您的视图模型的某些属性，UI 元素绑定到这些属性。当然，您的视图模型应该正确实现`INotifyPropertyChanged`接口以使这种方法可靠地工作。

* * *

如果你想使用附加属性的方法，你可以这样做：

```
public class IsoStoreImageSource : DependencyObject
{
    public static void SetIsoStoreFileName(UIElement element, string value)
    {
        element.SetValue(IsoStoreFileNameProperty, value);
    }
    public static string GetIsoStoreFileName(UIElement element)
    {
        return (string)element.GetValue(IsoStoreFileNameProperty);
    }

    // Using a DependencyProperty as the backing store for IsoStoreFileName.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty IsoStoreFileNameProperty =
        DependencyProperty.RegisterAttached("IsoStoreFileName", typeof(string), typeof(IsoStoreImageSource), new PropertyMetadata("", Changed));

    private static void Changed(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        Image img = d as Image;

        if (img != null)
        {
            var path = e.NewValue as string;
            SynchronizationContext uiThread = SynchronizationContext.Current;

            Task.Factory.StartNew(() =>
            {
                using (var isoStore = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (isoStore.FileExists(path))
                    {
                        var stream = isoStore.OpenFile(path, System.IO.FileMode.Open, FileAccess.Read);
                        uiThread.Post(_ =>
                        {
                            var _img = new BitmapImage();
                            _img.SetSource(stream);
                            img.Source = _img;
                        }, null);
                    }
                }
            });               
        }
    }
} 
```

然后在 XAML 中：

```
<Image local:IsoStoreImageSource.IsoStoreFileName="{Binding Path}" /> 
```

这种方法的一些限制：

*   它仅适用于`Image`控制，尽管您可以将其更改为您想要的任何类型。它只是不是很通用。
*   性能方面，每次更改图像源时，它将使用线程池中的一个线程。这是目前从 Windows Phone 8 上的隔离存储中进行异步读取的唯一方法。而且您绝对不想同步执行此操作。

但它有一个重要的优势：

*   有用！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:18:45.140

我喜欢上面的方法，但如果你有兴趣，还有一种更简单、更老套的方法。

您可以进入您的 xaml 并将图像源绑定到字符串属性，然后将文件路径动态地放入属性中。

```
<!-- XAML CODE -->
 <Image Source="{Binding imagePath}"/>

//Behind property
public String imagePath { get; set; } 
```

将您的路径加载到图像路径中，然后将图像源绑定到图像路径字符串。您可能必须执行 INotifyPropertyChanged 但此方法应与正确绑定一起使用。

# seo - 如果 Microdata 和 RDFa 在同一个网页上会发生什么

> ID：16102652
> 
> 赞同：2
> 
> 时间：2013-04-19T10:34:08.553
> 
> 标签：seo, rdf, microdata, rdfa

如果 Microdata 和 RDFa 都在网页上会发生什么？从我已经实现了 RDFa 内容的微数据的一类网页的经验中，我可以看出谷歌可能不会读取微数据。根据 Rich Snippet 工具，我看到层次结构中的一个元素不正确，但谷歌仍然可以根据该工具读取许多内容。

想知道确切的原因，为什么谷歌没有将这些微数据纳入搜索结果？

我的页面的 Rich Snippet 工具视图在[这里](http://www.google.com/webmasters/tools/richsnippets?url=http://autos.yahoo.com/mazda/mazda3/2013/&html=)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:35:39.090

不会发生什么特别的事情。但是，正如您所观察到的，可能有各方只阅读一种格式（而其他方只阅读另一种格式，或两者兼而有之，或两者都不阅读）。我认为 RDFa 和微数据的处理器（最终）将全部读取所有格式，因此您选择哪种格式并不重要。

帮助[页面](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1093493#incorrect)说

> 您可以使用微格式、微数据或 RDFa 来标记您的内容。但是，您应该选择一种标记标准并在整个页面中一致地使用它。

这表明您应该选择一个，但没有给出确切的原因。我无法给出确切的原因，因为我不为 Google 工作。

# maven - 使用 Maven 运行 Restfuse 测试

> ID：16102656
> 
> 赞同：0
> 
> 时间：2013-04-19T10:34:16.480
> 
> 标签：maven, netbeans

我正在尝试使用 NetBeans 运行 Restfuse 测试。

NetBeans 使用以下 Maven 命令运行 Restfuse 测试：

```
mvn -Dtest=com.mycompany.RequestTest -DfailIfNoTests=false test-compile surefire:test 
```

但是，没有调用 HttpTest 方法：

```
 @RunWith(HttpJUnitRunner.class)
    public class RequestTest {

        @Rule
        public Destination destination;
        @Context
        private Response response;

        public MatchRequestTest() throws UnknownHostException {
            this.destination = getDestination();
            this.callbackHost = InetAddress.getLocalHost().getHostAddress();
        }

        @HttpTest(method = Method.GET, path = "/request")
        public void matchRequest() {
            assertOk(response);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T11:34:49.080

在你的班级名称前加上“Test”即TestRequestTest。

# java - 将剪贴板文本传递给其他活动

> ID：16102660
> 
> 赞同：0
> 
> 时间：2013-04-19T10:34:37.487
> 
> 标签：java, android, android-intent

我的应用面向 API 级别 11 (3.0) 或更高版本。我想利用操作栏中的复制按钮，以便将文本复制到剪贴板时，它将被发送到另一个活动的 EditText 并启动此活动。

以下是我所做的：

```
wvContent = (WebView) findViewById(R.id.wvContent);
wvContent.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            ClipboardManager clipboardManager = (ClipboardManager)getSystemService(Context.CLIPBOARD_SERVICE);

            final String text = clipboardManager.getText().toString();
            if(text!=null) 
                    {
                        Intent intent=new Intent(CurrentActivity.this,NewActivity.class);
                        intent.putExtra(have_word, text);
                        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
                        finish();
                        CurrentActivity.this.startActivity(intent);
                    } 
        }           
    }); 
```

我将此代码放在 下`onCreate`，但它不起作用。文本被复制但`NewActivity`没有开始。

我想知道你们是否可以为我提供一点帮助来解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:40:37.913

使用[ClipboardManager.getPrimaryClip()](http://developer.android.com/reference/android/content/ClipboardManager.html#getPrimaryClip%28%29)代替 getText() 已被取消。[在这里](http://developer.android.com/reference/android/content/ClipData.html)你可以找到一个很好的例子来使用它来获取 clibpoard 数据。

# c# - 使用动态 linq 返回匿名类型的集合

> ID：16102665
> 
> 赞同：-3
> 
> 时间：2013-04-19T10:34:55.127
> 
> 标签：c#, asp.net-mvc, linq, dynamic-linq

显然，动态 LINQ 库能够返回匿名类型的集合。

但是，我不确定如何执行此操作。

我基本上只需要使用动态 LINQ 构建以下内容

```
 var result = from s in Customers
                     select new[] {
                         s.Surname, 
                         s.FirstName,
                         Convert.ToString(s.CustomerID),
                         s.Gender,
                         s.Notes,
                         s.DateUpdated.ToString("dd/MM/yyyy HH:mm")
                     }; 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:36:10.903

你不需要`new[]`。如果您希望结果保存一组匿名对象，那么您可以`.ToArray()`在查询结束时使用，例如：

```
 var result = (from s in Customers
                     select new {
                         s.Surname, 
                         s.FirstName,
                         Convert.ToString(s.CustomerID),
                         s.Gender,
                         s.Notes,
                         s.DateUpdated.ToString("dd/MM/yyyy HH:mm")
                     }).ToArray(); //here 
```

*（这不使用[Dynamic LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)，它的正常 LINQ 查询）*

# image - 使用 Gnuplot 覆盖 2 个图像

> ID：16102666
> 
> 赞同：0
> 
> 时间：2013-04-19T10:35:03.000
> 
> 标签：image, plot, overlay, gnuplot

我有一个文本文件，其中的数据排序为矩阵和 png 文件。我需要用 gnuplot 覆盖它们，但我找不到方法。我可以绘制矩阵文件，但我不知道之后该怎么做。

如果有人可以帮助我解决这个问题，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:48:21.023

请尝试更明确地说明您想要制作的情节类型。例如，如果你想在 png 图像上绘制矩阵文件的轮廓，你可以从这个开始：

```
set contour base
set view map
unset surf
splot 'image.png' binary filetype=auto with image, 'data.dat' 
```

但您可能需要调整颜色（设置调色板）、定位和缩放。

# ruby-on-rails - 为什么 rake assets 预编译不起作用

> ID：16102667
> 
> 赞同：0
> 
> 时间：2013-04-19T10:35:04.580
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

我正在使用
`rake assets: precompile raises`以下 letrate gem。
我想在 heroku 上部署并引发同样的错误。

```
 /home/sunloverz/.rvm/rubies/ruby-1.9.3-p385/bin/ruby /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
    rake aborted!
    undefined method `rate_path' for #<Module:0x9d31338>
      (in /home/sunloverz/RubymineProjects/socialnews/app/assets/javascripts/letsrate.js.erb)
    /home/sunloverz/RubymineProjects/socialnews/app/assets/javascripts/letsrate.js.erb:13:in `block in singletonclass'
    /home/sunloverz/RubymineProjects/socialnews/app/assets/javascripts/letsrate.js.erb:65530:in `instance_eval'
    /home/sunloverz/RubymineProjects/socialnews/app/assets/javascripts/letsrate.js.erb:65530:in `singletonclass'
    /home/sunloverz/RubymineProjects/socialnews/app/assets/javascripts/letsrate.js.erb:65528:in `__tilt_74553360'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/tilt-1.3.7/lib/tilt/template.rb:144:in `call'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/tilt-1.3.7/lib/tilt/template.rb:144:in `evaluate'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/tilt-1.3.7/lib/tilt/template.rb:77:in `render'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/context.rb:193:in `block in evaluate'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `evaluate'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:12:in `initialize'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `new'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `block in build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:270:in `circular_call_protection'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:248:in `build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:111:in `block in resolve_dependencies'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:105:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:105:in `resolve_dependencies'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:97:in `build_required_assets'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:16:in `initialize'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `new'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `block in build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:270:in `circular_call_protection'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:248:in `build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/bundled_asset.rb:16:in `initialize'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `new'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.13/lib/sprockets/static_compiler.rb:19:in `block in compile'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:219:in `block in each_logical_path'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:206:in `block (2 levels) in each_file'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each_entry'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:204:in `block in each_file'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each_file'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/sprockets-2.2.2/lib/sprockets/base.rb:217:in `each_logical_path'
3.2.13/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:246:in `call'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:246:in `block in execute'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:241:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:241:in `execute'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:184:in `block in invoke_with_call_chain'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:170:in `invoke'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.13/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:246:in `call'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:246:in `block in execute'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:241:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:241:in `execute'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:184:in `block in invoke_with_call_chain'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/task.rb:170:in `invoke'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:143:in `invoke_task'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:101:in `block (2 levels) in top_level'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:101:in `block in top_level'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:73:in `block in run'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
    Tasks: TOP => assets:precompile:primary
    (See full trace by running task with --trace)
    rake aborted!
    Command failed with status (1): [/home/sunloverz/.rvm/rubies/ruby-1.9.3-p38...]
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
    /home/sunloverz/.rvm/gems/ruby-1.9.3-p385/gems/rake-10.0.4/lib/rake/file_utils.rb:45:in `call'
    Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:51:48.023

请检查错误

“未定义的方法‘rate_path’用于#”

嗨伙计，请在部署到heroku之前对文件进行以下更改

------环境.rb-----

```
::ActiveSupport::Deprecation.silenced = true 
```

------生产.rb-----

```
config.assets.compile = ['*.js', '*.css']
config.active_support.deprecation = :silence 
```

--------application.rb--------

```
config.assets.enabled = true
config.assets.initialize_on_precompile = false 
```

我在部署 heroku 时使用了此步骤，确保您使用“postgres”数据库和“thin”服务器希望您能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-27T22:17:45.907

我有同样的问题，我通过在我的**routes.rb中添加这段代码来解决它**

```
post '/rate', to: 'rater#create', as: 'rate' 
```

# iphone - 如何获取前缀 pf 电话号码？

> ID：16102671
> 
> 赞同：0
> 
> 时间：2013-04-19T10:35:15.633
> 
> 标签：iphone, ios, regex, phone-number

大家好，我正在尝试获取电话号码的前缀，以便在没有国家/地区拨号代码的情况下获取实际电话号码。我怎样才能做到这一点？

请注意，电话号码可以是

> 123456789
> 0099123456789
> +9912345678

或任何其他带有国家代码和地区代码等的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:39:12.177

Taking a look at the amount of different prefixes you can have [List of country calling codes](http://en.wikipedia.org/wiki/List_of_country_calling_codes) [wikipedia] and [Internatioal dialing prefix](http://en.wikipedia.org/wiki/Internatioal_dialing_prefix) [wikipedia], one could reach the conclusion that without narrowing the area down you'll probably not get very far with this.

If however you'll be handling phone numbers from a specific region to another specific region you might be able to come up with something.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:50:41.077

如果你这样尝试，那么它会有所帮助但不确定，

```
NSString *str=[PhoneNumber substringToIndex:[PhoneNumber length]-10]; 
```

# amazon-web-services - S3 存储桶的不稳定行为 - 归咎于 CORS 文件

> ID：16102674
> 
> 赞同：0
> 
> 时间：2013-04-19T10:35:19.867
> 
> 标签：amazon-web-services, amazon-s3

我正在使用 javascript 请求从 S3 存储桶中获取文件，而我似乎没有理由得到这个：

```
XMLHttpRequest cannot load https://s3.amazonaws.com/rifff_bucket/uploads%2F20130313T2336Z_5a9d96ef0d43ef775b9781cd336e1eb2%2Fsnarelayer.mp3\. Origin http://localhost:3000 is not allowed by Access-Control-Allow-Origin. 
```

我总是可以通过简单地将 URL 放在浏览器中来访问这个文件 - 它存在并且有效。桶中的其他类似文件，使用相同的 javascript 请求，工作。

尽管它似乎是在指责 CORS 配置，但这种情况总是会发生，即使根本没有 CORS 文件也是如此。即使其他类似文件在没有 CORS 文件的情况下继续工作。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:31:57.803

解决。不清楚对我的 CORS 文件进行了哪些更改 - 如果有的话。

需要注意的是，除非我真的要疯了，否则浏览器似乎会缓存拒绝。因此，如果您对 CORS 文件等进行了更改，您需要清除缓存以查看它的效果。这就是“不稳定行为”的原因。

# javascript - $(window).height() 在 IE10 中不起作用

> ID：16102675
> 
> 赞同：1
> 
> 时间：2013-04-19T10:35:20.767
> 
> 标签：javascript, jquery, internet-explorer-10

我想根据窗口大小设置 DIV 的高度，但在 IE10 中`$(window).height()`返回`0`，它在 IE8 和 IE9 中工作正常。为什么？

我也写了 doctype 声明如下

```
<!--[if IE]>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`
<![endif]--> 
```

如果我删除“ `<!--[if IE]>`”和“ `<![endif]-->`”，那么它工作正常。为什么？请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:51:35.913

正如 Irvin Dominin 所说，jQuery 的 $(window).height() 对 doctype 很敏感。由于不支持 Internet Explorer 10 条件注释，并且当浏览器不是 IE 时您没有文档类型 - jQuery 的 $(window).height() 中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:55:51.247

如果你删除它`"<!--[if IE]>" and "<![endif]-->"`，因为你提到的 if/else for IE 然后其他浏览器无法检测到优雅需要的 DOCTYPE，因为它不起作用，因为`$(window).height()`它不起作用。如果没有定义文档类型。所以请为所有浏览器添加 DOCTYPE，问题可以解决

# javascript - 如何访问全局 iframe 对象

> ID：16102682
> 
> 赞同：0
> 
> 时间：2013-04-19T10:36:02.403
> 
> 标签：javascript, iframe, window

当我在 iframe 中时，我可以使用`parent`like访问父级的全局变量

```
parent.$('.selector').remove(); 
```

它将访问父级的 jQuery 并从 dom 中删除选择器。我怎么能从父母那里做同样的事情。访问 iframe 全局对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:36:37.923

我才发现它是

```
$('iframe')[0].contentWindow; 
```

# c - 如何处理条件初始化，这是一个好习惯吗？

> ID：16102683
> 
> 赞同：10
> 
> 时间：2013-04-19T10:36:02.870
> 
> 标签：c, performance, coding-style

我试图在几种可能的做法之间做出决定。比如说，我的函数有许多 if() 块，它们对数据起作用，这是它们独有的。

*   我应该在块内声明和初始化本地（对于块）数据吗？这是否有运行时性能成本（由于堆栈中的运行时分配）？

*   或者我应该在函数入口声明和/或初始化所有变量，以便在一个可能更快的操作块中完成？

*   或者我应该将 if() 块分隔在不同的函数中，即使它们只有几行长并且在程序中只使用了一个？

还是我忽略了另一个更清洁的选择？这个问题甚至可以以当前的一般形式回答吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T10:41:16.533

> 我应该在块内声明和初始化本地（对于块）数据吗？

绝对：这往往会使程序更具可读性。

> 这是否有运行时性能成本（由于堆栈中的运行时分配）？

否：所有分配都是预先完成的 - 堆栈上的空间在进入函数时为所有分支中的变量保留，而不是在进入分支时。此外，这甚至可以为您节省一些空间，因为为非重叠分支中的变量分配的空间可以被编译器重用。

> 或者我应该在函数入口声明和/或初始化所有变量，以便在一个可能更快的操作块中完成？

不，这不是更快，并且可能会稍微浪费一些。

> 或者我应该将 if() 块分隔在不同的函数中，即使它们只有几行长并且在程序中只使用了一个？

这可能会对程序的可读性产生负面影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T10:46:41.880

[保持变量的范围](http://www.nickhodges.com/post/Limiting-Scope.aspx)尽可能小是一个好习惯。
如果您在开始时一次性声明所有变量，并且您不
经常在程序中使用它们。没用，需要更多内存。

此外，保持较小范围的另一个优点是您可以再次重用
相同的名称。（您不必每次
做一些琐碎的事情时都发明新名称）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:44:40.750

在您声明的选项中，声明和初始化块内的本地（对于块）数据将满足您的目的。忘记其余的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-23T16:10:38.120

为了完整性；另一个通常不太重要的考虑因素是堆栈填充控制/打包，如果您不预先声明所有内容，这在直观上会更加困难。

有关更多信息，请参阅[此](http://www.catb.org/esr/structure-packing/)内容，尽管在任何人做任何疯狂的事情之前让我强调以下段落：

> 通常，对于您的 C 程序中的少量标量变量，通过更改声明顺序来消除您可以获得的几个字节并不能为您节省足够的重要性。当应用于非标量变量时，该技术变得更加有趣——尤其是结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-23T16:34:21.300

现在是关于性能的答案。

> 我应该在块内声明和初始化本地（对于块）数据吗？这是否有运行时性能成本（由于堆栈中的运行时分配）？

局部变量的分配实际上是免费的。在大多数情况下，它确实是空闲的，因为堆栈指针的更新是在将值写入堆栈的同一条指令中执行的。释放也是免费的（当某些东西从堆栈中弹出时），或者在返回时完成一次（当创建堆栈帧时）。

> 或者我应该在函数入口声明和/或初始化所有变量，以便在一个可能更快的操作块中完成？

虽然分配实际上是免费的，但运行构造函数/析构函数却不是。虽然这不适用于原始类型的变量，但它几乎适用于所有用户定义的类型，包括智能指针等。如果您在函数的开头声明了一个智能指针，但只使用了一半时间，那么您构造并随后破坏了所需的两倍的智能指针。

此外，如果您声明一个变量，其中您有信息将其初始化为您的需要，您可以直接将其构造为您希望它具有的状态，而不是首先默认构造它只是为了在之后更改它的值（使用赋值运算符很多情况）。因此，从性能的角度来看，您应该总是延迟声明变量，并且只在需要它们的块中声明。

> 或者我应该将 if() 块分隔在不同的函数中，即使它们只有几行长并且在程序中只使用了一个？

不，从性能的角度来看，这完全是矛盾的。每个函数调用都有开销，我认为大多数时候它在 10 到 20 个周期之间。你可以在那个时候做很多计算。

# soa - SOA - 四个原则

> ID：16102687
> 
> 赞同：0
> 
> 时间：2013-04-19T10:36:12.640
> 
> 标签：soa, concept

我正在阅读有关 SOA 和制作 SOA 应用程序所需的四个原则。我尝试了不同的来源，但解释是曲折的。我正在寻找一些不那么抽象的东西。我的解释正确吗？

四大原则是：

1.  服务有明确的边界
2.  服务是自治的
3.  服务共享模式和契约，而不是类
4.  服务基于策略互操作

我的解释是：

1.  客户可能使用的方法应易于使用且定义明确。
2.  服务不得依赖于他人。一项服务的更改不得以任何方式影响另一项服务。
3.  方案表示将要发送的数据，合同包含服务的定义方法。为了使系统松耦合，您共享方案和合同而不是类和对象。
4.  使用服务的策略可能是需要特定类型的绑定，以便可以使用它。任何想要使用此服务的人都必须使用这种类型的绑定来连接它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:12:26.237

在programmers.stackexchange.com 得到答案。我从 GlenH7 重新发布答案：

你的抽象非常接近，是的。

1.  是的。封装良好是另一种看待这个问题的方式。
2.  是的，但是...服务可以依赖其他服务来实现功能，尤其是在避免重复代码的情况下。我猜，这里的细微差别在于依赖的定义。
3.  是的。服务执行计划的合同。用户提供 XYZ 数据，服务将根据合同提供 ABC 操作。
4.  我认为服务是根据商业政策运作的。业务策略不应达到指定绑定的级别。从实施业务策略的角度来看，您可以看到某些服务将依赖于其他服务以在不复制代码的情况下履行其合同。在更广泛的层面上，业务政策只是一堆规则。希望与每个规则很好地互操作的规则。但就像人力资源一样，业务规则也有一个令人讨厌的习惯，即彼此不相处。服务是这些业务规则的实例化。从较低级别的角度来看，如果调用者不使用广告绑定，那么调用者将（显然）无法使用该服务。所以虽然你的陈述是正确的，但它有点重言式

# java - LIBGDX：如何使用 shaperenderer 绘制填充多边形？

> ID：16102692
> 
> 赞同：10
> 
> 时间：2013-04-19T10:36:30.837
> 
> 标签：java, libgdx

我已经使用顶点数组定义了一个形状：

```
float[] points =  new float[]{50,60,50,70,60,70, 60,60,50,60}; 
```

我在这里画这个：

```
shapeRenderer.polygon(floatNew); 
```

这只是给出了形状的轮廓。
如何用颜色填充它？
谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-12T08:07:44.690

目前，ShapeRenderer 支持多边形绘制（按线）但不支持填充。

这段代码在三角形上剪裁多边形，然后分别绘制每个三角形。

像这样编辑 ShapeRenderer.java：

```
EarClippingTriangulator ear = new EarClippingTriangulator();

public void polygon(float[] vertices, int offset, int count)
{
    if (shapeType != ShapeType.Filled && shapeType != ShapeType.Line)
        throw new GdxRuntimeException("Must call begin(ShapeType.Filled) or begin(ShapeType.Line)");
    if (count < 6)
        throw new IllegalArgumentException("Polygons must contain at least 3 points.");
    if (count % 2 != 0)
        throw new IllegalArgumentException("Polygons must have an even number of vertices.");

    check(shapeType, null, count);

    final float firstX = vertices[0];
    final float firstY = vertices[1];
    if (shapeType == ShapeType.Line)
    {
        for (int i = offset, n = offset + count; i < n; i += 2)
        {
            final float x1 = vertices[i];
            final float y1 = vertices[i + 1];

            final float x2;
            final float y2;

            if (i + 2 >= count)
            {
                x2 = firstX;
                y2 = firstY;
            } else
            {
                x2 = vertices[i + 2];
                y2 = vertices[i + 3];
            }

            renderer.color(color);
            renderer.vertex(x1, y1, 0);
            renderer.color(color);
            renderer.vertex(x2, y2, 0);

        }
    } else
    {
        ShortArray arrRes = ear.computeTriangles(vertices);

        for (int i = 0; i < arrRes.size - 2; i = i + 3)
        {
            float x1 = vertices[arrRes.get(i) * 2];
            float y1 = vertices[(arrRes.get(i) * 2) + 1];

            float x2 = vertices[(arrRes.get(i + 1)) * 2];
            float y2 = vertices[(arrRes.get(i + 1) * 2) + 1];

            float x3 = vertices[arrRes.get(i + 2) * 2];
            float y3 = vertices[(arrRes.get(i + 2) * 2) + 1];

            this.triangle(x1, y1, x2, y2, x3, y3);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:18:39.680

您还不能使用 shaperender 绘制填充的多边形。从[bugtracker](http://code.google.com/p/libgdx/issues/detail?id=467)

看一下 你也可以在 API 中阅读。

> public void polygon(float[] vertices)
> 在 x/y 平面上绘制一个多边形。顶点必须包含至少 3 个点（6 个浮点 x，y）。传递给 begin 的 ShapeRenderer.ShapeType 必须是 ShapeRenderer.ShapeType.Line。

[API ShapeRender](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html)
当然，如果它与 ShapeType.Line 你只是得到轮廓。
在这种情况下，您需要使用三角形自己绘制。至少应该可以填充三角形。
也许从 Stackoverflow 看一下这个：[drawing-filled-polygon-with-libgdx](https://stackoverflow.com/questions/15733442/drawing-filled-polygon-with-libgdx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-22T17:29:28.807

编辑 ShapeRenderer.java 类，用以下代码替换 polygon() 方法：

```
public void polygon(float[] vertices, int offset, int count) {
    if (currType != ShapeType.Filled && currType != ShapeType.Line)
        throw new GdxRuntimeException(
                "Must call begin(ShapeType.Filled) or begin(ShapeType.Line)");
    if (count < 6)
        throw new IllegalArgumentException(
                "Polygons must contain at least 3 points.");
    if (count % 2 != 0)
        throw new IllegalArgumentException(
                "Polygons must have an even number of vertices.");

    checkDirty();
    checkFlush(count);

    final float firstX = vertices[0];
    final float firstY = vertices[1];
    if (currType == ShapeType.Line) {
        for (int i = offset, n = offset + count; i < n; i += 2) {
            final float x1 = vertices[i];
            final float y1 = vertices[i + 1];

            final float x2;
            final float y2;

            if (i + 2 >= count) {
                x2 = firstX;
                y2 = firstY;
            } else {
                x2 = vertices[i + 2];
                y2 = vertices[i + 3];
            }

            renderer.color(color);
            renderer.vertex(x1, y1, 0);
            renderer.color(color);
            renderer.vertex(x2, y2, 0);

        }
    } else {

        for (int i = offset, n = offset + count; i < n; i += 4) {

            final float x1 = vertices[i];
            final float y1 = vertices[i + 1];

            if (i + 2 >= count) {
                break;
            }

            final float x2 = vertices[i + 2];
            final float y2 = vertices[i + 3];

            final float x3;
            final float y3;

            if (i + 4 >= count) {
                x3 = firstX;
                y3 = firstY;
            } else {
                x3 = vertices[i + 4];
                y3 = vertices[i + 5];
            }

            renderer.color(color);
            renderer.vertex(x1, y1, 0);
            renderer.color(color);
            renderer.vertex(x2, y2, 0);
            renderer.color(color);
            renderer.vertex(x3, y3, 0);

        }

    }
} 
```

用法：

```
 gdx_shape_renderer.begin(ShapeType.Filled);
    gdx_shape_renderer.setColor(fill_r, fill_g, fill_b, fill_a);
    gdx_shape_renderer.polygon(vertices);
    gdx_shape_renderer.end();

    gdx_shape_renderer.begin(ShapeType.Line);
    gdx_shape_renderer.setColor(border_r, border_g, border_b, border_a);
    gdx_shape_renderer.polygon(vertices);
    gdx_shape_renderer.end(); 
```

# python - 复数运算符优先级

> ID：16102695
> 
> 赞同：1
> 
> 时间：2013-04-19T10:36:43.397
> 
> 标签：python, cmath

这应该是不言自明的

```
>>> (1+2j).real  #Normal Usage
1.0
>>> (1+2j).imag  #Normal Usage
2.0
>>> 1+2j.real  #Normal Usage
1.0
>>> 1+2j.imag  #Flips Out
3.0
>>> 123+657j.real
123.0
>>> 123+657j.imag
780.0 
```

`z.imag`以某种方式将实部和虚部相加。
我发现这很有趣..这是一个错误还是一个故意的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T10:38:36.523

问题是`1+2j.imag`被解析为`1+(2j.imag)`. 显然`2j.imag`是`2.0`，所以`1+2j`回报`3.0`。当你这样做时`1+2j.real`，Python 会添加`1`和`2j.real`. `2j.real`是`0.0`，所以你得到正确的答案`1.0`作为回报。

如果您将复数括起来，就像在前两个示例中一样，您将获得预期的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T10:39:47.630

这是运算符优先级问题。`.`具有比 更高的优先级`+`，因此您正在有效地做

```
1+(2j.imag) 
```

当然是3。

总是给复数文字加上括号是一个非常好的主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T10:39:30.043

那里没有疯狂，真的。这就是发生的事情：'.' 运算符优先于 +，仅此而已。这意味着

```
>>> 1+2j.imag 
```

被评估为 1 + (2j.imag)，即 1 + 2，即 3。这同样适用于其他示例。

# java - 在 Core Java 中从数组中删除重复元素

> ID：16102696
> 
> 赞同：0
> 
> 时间：2013-04-19T10:36:45.500
> 
> 标签：java

**在不使用集合**的情况下，我编写了一个 java 程序来从整数数组中删除重复的整数元素，但是该程序只删除了一个整数元素，而剩下的其他整数元素。

您能否让我知道我应该如何在下面的核心 java 程序中删除重复的整数元素。在下面的核心 java 程序中，我必须删除重复的整数元素 5

提供的帮助将不胜感激。

下面是Java代码。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class DeleteElementFromArray {

    static int[] a = {5,1,2,3,4,5,7,8,9,10};
    static int[] b = new int[10];
    static int i, k, f, j = 0;
    static int l = a.length;

    void DeletElementInt() {
         for (i = 0; i < l; i++) {
             if (i != k) {
                   if (i < k) {
                       b[i] = a[i];
                   } else{                    
                         b[i - 1] = a[i];
                   }  
             }
         }
     }       

    public static void main(String[] args) {
          DeleteElementFromArray d = new DeleteElementFromArray();
          System.out.println("Array Elements are ");
          for (i = 0; i < l; i++){
            System.out.println(a[i]); 
          }
          InputStreamReader is = new InputStreamReader(System.in);
          BufferedReader br = new BufferedReader(is);
          System.out.println("Enter the Element for Delete");
          try {
             String s = br.readLine();
             f = Integer.parseInt(s);
              for (i = 0; i < l; i++) {
                if (f == a[i]) {
                  System.out.println("Delete Element found from given array");
                  k = i;
                  j++;
                  d.DeletElementInt();
                }
              }
                 l = l - 1;
                 System.out.println("New Array ");
                 for (i = 0; i < l; i++) 
                 {
                      System.out.println(b[i]);
                 }
                 if (j == 0) {
                   System.out.println("Entered Element does not found from given array");
                 }
          } catch (IOException e) {
                System.out.println(e);
          }
    }
}

//output
/*
Array Elements are 
5
1
2
3
4
5
7
8
9
10
Enter the Element for Delete
5
Delete Element found from given array
New Array 
1
2
3
4
5
7
8
9
10
*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:59:58.843

这是固定代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class DelElem {

    static int[] a = {5,1,2,3,4,5,7,8,9,10};
    static int[] b = new int[10];
    static int f, i, k, j = 0;
    static int l = a.length;

    static void DeleteElementInt(int elementToDelete) {
        j = 0;
        for (int i = 0; i < l; i++)
            if (a[i] != elementToDelete)
                b[i - j] = a[i];
            else
                ++j;
    }

    public static void main(String[] args) {
        System.out.println("Array elements are:");
        for (i = 0; i < a.length; i++)
            System.out.println(a[i]);
        InputStreamReader is = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(is);
        System.out.print("Enter the element to be deleted: ");
        try {
            String s = br.readLine();
            f = Integer.parseInt(s);
            DeleteElementInt(f);
            System.out.println("New array:");
            for (i = 0; i < l - j; i++)
                System.out.println(b[i]);
            if (j == 0)
                System.out.println("Entered element was not found in the given array");
        } catch (IOException e) {
            System.out.println(e);
        }
    }
}

//output
/*
Array elements are:
5
1
2
3
4
5
7
8
9
10
Enter the element to be deleted: 5
New array:
1
2
3
4
7
8
9
10
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:07:07.800

当有人要求您使用数组时，第一个问题应该是。顺序重要吗？

数组的大多数问题都可以通过首先对其进行排序来解决，然后由于您总是处理相同类型的数据，因此问题会从复杂变得微不足道。正如阿基米德曾经悲伤的那样“给我一个可以站立的地方，我将移动地球”。排序操作就是那个站位。

当您对数组进行排序时，您只需要遍历它并发现下一项等于上一项。这是微不足道的。

但是，如果订单很重要，那么我们的任务就更艰巨了。

所以我想到的第一个解决方案是创造新的立场。规则是数组的项目大于或等于零。

在这种情况下，我们可以做这样的事情。

1.  我们在源数组中找到了 grates 元素。
2.  我们创建一个大小为 grate 项目的布尔数组。
3.  我们遍历源列表的每一项，然后
4.  我们检查布尔数组值的位置是否为假，如果是，那么我们将其设置为真并打印结果，否则我们转到源数组的下一项。

步骤 4 被简化，因为我们要打印列表。返回具有不同价值的新产品的技术方面是微不足道的。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:02:46.973

首先，您必须对数组进行排序。如果这样做，您将更容易删除重复项。Arrays 类包含各种操作数组的方法（其中大部分是静态的）。使用`Arrays.sort(array)`. 如果不允许，则必须使用许多现有排序算法中的一种。最简单的是[冒泡排序](http://www.leepoint.net/notes-java/data/arrays/32arraybubblesort.html)。

在结果数组中插入第一个整​​数，并在包含最后插入值的临时变量中插入。解析源数组：如果当前值与临时变量不同，则将其插入结果数组（并更新临时变量）。

请注意返回数组的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T11:04:10.283

好吗`Arrays.sort()`？

```
static int[] a = {5,1,2,3,4,5,7,8,9,10};
static int[] b = new int[a.length];

Arrays.sort(a);

b[0]=a[0];
int bIndex = 1;
for(int aIndex = 1; aIndex < a.length; aIndex++) {
    if(b[bIndex-1] != a[aIndex]) {
        b[bIndex] = a[aIndex];
        bIndex++;
    }
}

int[] result = Arrays.copyOfRange(b, 0, bIndex); 
```

如果这是出于教育目的，另一种有趣的方法可能是用数字构造一个树结构，并在所有插入完成后将树展平为一个数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-30T15:56:28.143

```
import java.util.Scanner;

public class RemoveAllOccurences{

    static int[] removeAll(int[] a,int n){
        int[] dupl = new int[a.length];
        for(int i = 0;i < dupl.length;i++){
            dupl[i] = -999;
        }
        int index = 0;
        //looping over,finding all occurrences of n and creating new array that does not contain n.
        for(int i = 0;i < a.length;i++){
            if(a[i] != n){
                dupl[index++] = a[i];
            }
        }

        //returning array with all duplicates removed.
        return dupl;
    }

    public static void main(String[] args) {

        int[] a = {3,5,5,5,3,6,5,3,3};
        int numberToRemove;

        System.out.println("the array values are:");
        for(int i:a){
            System.out.print(a[i]+"\t");
        }

        Scanner sc = new Scanner(System.in);
        System.out.println("\nenter the number for which all occurences need to be deleted:");

        numberToRemove = sc.nextInt();

        int[] b = removeAll(a,numberToRemove);

        System.out.println("After removing all occurences of "+numberToRemove);
        for(int i:b){
            if(i != -999)
                System.out.print(i+"\t");
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-23T07:12:17.060

```
public static void main(String[] args) {
    int a[]={1,4,3,2,6,5,7,3,5,4,2};
    int b[]=new int[a.length];
    Arrays.sort(a);
    int j=0;
    for(int i=0;i<a.length;i++){
        while(i<a.length-1 && a[i]==a[i+1]){
            a[i]=999;  // This can be any tag which you are not going to have in your array
            i++;
        }
        if(a[i]!=999)
            b[j++]=a[i];
    }

    System.out.println(b);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-09T16:08:37.493

以下是我的解决方案：

第一步：- 使用嵌套循环遍历数组以查找重复项第二步：- 如果找到重复项，则复制新数组中除重复元素之外的所有元素。

请找到下面的代码，任何改进将不胜感激。

公共类 DuplicateElements {

```
private static int[] arr = new int[]{3,2,4,4,5,3,8,2,4,9,10};

public static void main(String[] args) {
    for(int i=0;i<arr.length;i++){
        int arr_i = arr[i];
        for(int j=0;j<arr.length;j++){
            if(arr_i == arr[j] && i != j){
                removeElement(j);
            }
        }
    }

    for(int i=0;i<arr.length;i++){
        System.out.print(arr[i]+", ");
    }
}

public static void removeElement(int position){
    int[] intArr = new int[arr.length - 1];
    for(int i=0;i<position;i++){
        intArr[i] = arr[i];
    }
    for(int i=position+1;i<arr.length;i++){
        intArr[i-1] = arr[i];
    }
    arr = intArr;
} 
```

}

# c# - 如何重命名 WPD 设备上的对象

> ID：16102700
> 
> 赞同：0
> 
> 时间：2013-04-19T10:37:04.020
> 
> 标签：c#, com, wpd, mtp

我正在制作一个[PortableDeviceLib的](http://portabledevicelib.codeplex.com/)[分支](https://github.com/naixx/PortableDeviceLib)，它与 WPD/MTP 设备上的存储服务一起使用。并偶然发现了一个问题。我想重命名设备上的文件对象，所以首先想到的是更改对象的属性。但我这样做是个例外。如果我更改，名称会更改，但文件名与预期相同，也不例外。`WPD_OBJECT_ORIGINAL_FILE_NAME``WPD_OBJECT_NAME`

所以问题是，如何重命名 WPD 设备上的对象？为什么我得到异常更改文件名属性？

我想重命名的原因是，当将文件复制到设备时，如果文件已经存在，它会得到一个扩展名`dup0`,`dup1`等的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T18:21:07.550

这是一个旧的响应，但是......
下面是我用来重命名 WPD 设备上的对象的代码：

```
__declspec(dllexport) HRESULT __cdecl supportsCommand( CComPtr<IPortableDevice>& device, PROPERTYKEY theKey ) {
    HRESULT err = S_OK;
    CComPtr<IPortableDeviceCapabilities> capabilities;
    CComPtr<IPortableDeviceKeyCollection> commands;
    uint numCommands = 0;
    device->Capabilities( &capabilities );
    err = capabilities->GetSupportedCommands( &commands );
    err = commands->GetCount( &numCommands );
    PROPERTYKEY key = WPD_PROPERTY_NULL;
    for( uint index = 0; index < numCommands; index++) {
        err = commands->GetAt( index, &key );
        if( IsEqualPropertyKey(theKey, key) )
            return true;
    }
    return false;
}

__declspec(dllexport) HRESULT __cdecl renameObject( CComPtr<IPortableDevice>& device, LPWCSTR objectId, LPWCSTR newName ) {
    HRESULT err = S_OK;
    if (supportsCommand(device, WPD_COMMAND_OBJECT_PROPERTIES_SET) == false)
        return (HRESULT)-1;
    CComPtr<IPortableDeviceValues> properties, values, results;
    err = CoCreateInstance( CLSID_PortableDeviceValues, NULL, CLSCTX_INPROC_SERVER, IID_IPortableDeviceValues, (VOID**) &properties );
    err = CoCreateInstance( CLSID_PortableDeviceValues, NULL, CLSCTX_INPROC_SERVER, IID_IPortableDeviceValues, (VOID**) &values );<br>
    // Mount the command.
    err = properties->SetGuidValue( WPD_PROPERTY_COMMON_COMMAND_CATEGORY
        , WPD_COMMAND_OBJECT_PROPERTIES_SET.fmtid );
    err = properties->SetUnsignedIntegerValue( WPD_PROPERTY_COMMON_COMMAND_ID
        , WPD_COMMAND_OBJECT_PROPERTIES_SET.pid );<br>
    // Set the values
    err = properties->SetStringValue( WPD_PROPERTY_OBJECT_PROPERTIES_OBJECT_ID, objectId );
    err = values->SetStringValue( WPD_OBJECT_ORIGINAL_FILE_NAME, newName );
    err = properties->SetIPortableDeviceValuesValue( WPD_PROPERTY_OBJECT_PROPERTIES_PROPERTY_VALUES, values );
    err = device->SendCommand( 0, properties, &results );<br>
    // Show the results
    uint count = 0;
    results->GetCount( &count );
    PROPERTYKEY key;
    PROPVARIANT var;
    for( uint i = 0; i < count; i++ ) {
        results->GetAt( i, &key, &var );
        // ...show key and var...
    }
    return err;
} 
```

# symfony - Sonata 管理员和自定义安全处理程序

> ID：16102703
> 
> 赞同：1
> 
> 时间：2013-04-19T10:37:14.790
> 
> 标签：symfony, acl, sonata-admin, sonata-user-bundle

我想编写一个自定义安全处理程序，这将是一个通过用户 ID 限制数据的简单 ACL。我不想使用标准 ACL，不需要使用所有功能并创建具有权限的附加数据库。

所以我创建了我的新处理程序，现在我收到 $object 作为 Admin 类。使用 Admin 类，我可以限制对服务的访问，但不能限制服务中的任何行。

问题是我如何接收实体并检查对实体的权限，如下所示：

```
 public function isGranted(AdminInterface $admin, $attributes, $object = null)
  {
    if ($object->getUserId()==5){
      return true
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-05T08:35:29.377

覆盖奏鸣曲配置中的安全处理程序：

```
sonata_admin:
    title: "Admin"
    security:
         handler: custom.sonata.security.handler.role 
```

创建您的服务：

```
custom.sonata.security.handler.role:
        class: MyApp\MyBundle\Security\Handler\CustomRoleSecurityHandler
        arguments:
            - @security.context
            - [ROLE_SUPER_ADMIN, ROLE_ADMIN, ROLE_USER]
            - %security.role_hierarchy.roles% 
```

最后一步，但同样重要的是创建您的课程，检索您的用户并根据他的凭据允许/拒绝访问：

```
/**
* Class CustomRoleSecurityHandler
*/
class CustomRoleSecurityHandler extends RoleSecurityHandler
{
    protected $securityContext;

    protected $superAdminRoles;

    protected $roles;

    /**
     * @param \Symfony\Component\Security\Core\SecurityContextInterface $securityContext
     * @param array $superAdminRoles
     * @param $roles
     */
    public function __construct(SecurityContextInterface $securityContext, array $superAdminRoles, $roles)
    {
        $this->securityContext = $securityContext;
        $this->superAdminRoles = $superAdminRoles;
        $this->roles = $roles;
    }

    /**
     * {@inheritDoc}
     */
    public function isGranted(AdminInterface $admin, $attributes, $object = null)
    {
        /** @var $user User */
        $user = $this->securityContext->getToken()->getUser();

        if ($user->hasRole('ROLE_ADMIN')){
            return true;
        }

        // do your stuff
    }
} 
```

# c# - 套接字连接在 wcf 中中止

> ID：16102707
> 
> 赞同：3
> 
> 时间：2013-04-19T10:37:31.440
> 
> 标签：c#, wcf, sockets, nettcpbinding

我在服务器端创建了动态端点，并且客户端使用了该端点。

服务器端代码：

```
 for (int i = 1; i <= 3; i++)
            {
                host.AddServiceEndpoint(typeof(PokerService.IPlayerService),
                                               new NetTcpBinding(),
                                               @"net.tcp://localhost:5054/player" + i);

            } 
```

客户端：

```
NetTcpBinding binding = new NetTcpBinding(SecurityMode.Message);
binding.Name = "NetTcpBinding_IPlayerService";
binding.Security.Message.ClientCredentialType = MessageCredentialType.IssuedToken;

EndpointAddress myEndpointAdd = new EndpointAddress(new Uri("net.tcp://localhost:5054/player1"),
EndpointIdentity.CreateDnsIdentity("pident.cloudapp.net"));

var PlayerChannelFactory = new DuplexChannelFactory<ClientApplication.PlayerService.IPlayerService>(new PlayerHandler(handler, this), binding, myEndpointAdd); 
```

但它在以下行中给出错误：

```
Player loggedIn = PlayerServiceProxy.Login("testuser" + Guid.NewGuid().ToString()); 
```

错误是：

“套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或底层网络资源问题造成的。本地套接字超时为 '00:00:59.9870000'。”

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:06:31.090

好像超时了。检查您的客户端和服务超时配置。

另外，尝试使用 svcTraceViewer.exe 查看 wcf 跟踪

# php - 如何在不加载浏览器的情况下获取另一个页面的内容

> ID：16102708
> 
> 赞同：1
> 
> 时间：2013-04-19T10:37:32.740
> 
> 标签：php, jquery, asp-classic

**上下文：** 另一个网站中有一个包含搜索表单的页面
。`asp`使用搜索值提交此表单后，页面会在 iframe 中显示搜索结果。

**问题：**
我想在我的页面中使用返回的结果而不在浏览器中加载该页面。我已获得其他网站管理员的许可。我知道 php 和 jQuery。我应该如何进行？

**示例：**
`abcd.asp`包含一个表单，其中包含 `<input name="regno"/>`一个提交按钮。表单提交给自己，结果姓名、出生日期和标记以 iframe 中的表格格式返回。

**注意：**
我有一个相同的页面，`<input>`提交后将使用上述`asp`页面并获取详细信息并将其显示在我的页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:44:18.593

最简单的方法：

1.  使用 jQuery 通过 AJAX 将您的页面提交到本地 PHP 文件。
2.  当本地 PHP 文件收到请求时，向远程页面发出 curl 发布请求并获取结果。
3.  在您的本地 PHP 脚本中返回这些结果，以便这些结果可用于您的 AJAX 请求
4.  您的 ajax 请求现在具有远程内容，因此只需使用 jQuery 将它们推送到文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:44:46.743

您应该使用 AJAX 来执行此任务。它在不重新加载页面的情况下加载特定的数据部分。有关什么是 ajax 的更多信息在[这里](http://www.codeproject.com/Articles/534632/WhatplusisplusAJAX-3f)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:54:43.707

您最好的选择是使用[jQuery 的 ajax 方法](http://api.jquery.com/jQuery.ajax/)。要使其适用于不同的域，您需要启用跨域支持。这在 jQuery 中非常简单：

```
$.support.cors = true; // enable cross domain support 
```

现在您可以向另一个域发出请求。当然，该域上的服务器也必须接受跨域请求。;)

**选项 1 - HTTP GET & JSONP**

正如 Twisted1919 指出的，如果你想发出 HTTP GET 请求，你必须使用 jsonp。如果您不熟悉 jsonp ，则需要阅读一些内容才能理解该概念。但是 jQuery 对此有很好的支持（如[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)中所述）。

**选项 2 - HTTP POST**

如果您使用 http post 来发出请求，您可以简单地使用 jQuery.post() 来完成此操作。启用跨域后，服务器接受您的请求，这应该可以开箱即用。

# java - Java - 从应用程序刷新打开的 html 页面

> ID：16102709
> 
> 赞同：0
> 
> 时间：2013-04-19T10:37:35.310
> 
> 标签：java, html, freemarker

我有一个从应用程序创建 html 页面的应用程序（我使用[freemarker](http://freemarker.sourceforge.net/)）。之后，我使用 Desktop 从应用程序打开生成的网页，如下所示：

```
public void openPage() {
        if (Desktop.isDesktopSupported()) {
            try {
                File file = new File("index.html");
                Desktop.getDesktop().open(file);
            } catch (IOException ex) {
                System.out.println("Error opening a html page.");
                ex.printStackTrace();
            }
        }
    } 
```

现在，我的问题是：有没有办法从我的应用程序中刷新页面？我正在动态更改浓度，我想每隔几秒钟刷新一次浏览器中的页面。

还是只在后台更新页面并使用javascript直接在html代码中刷新它会更好？

感谢您的任何提示！

编辑：请注意，我想通过该网页上的某种形式与我的 java 应用程序进行通信（例如发送参数以指定我的页面更新方式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:07:55.510

使用 AJAX 技术（**[jQuery](http://www.jquery.com)**非常适合您的需要）在您的应用程序中调用服务器端控制器。然后，您可以协商是否需要更新数据。为此建议使用 JSON API。您可以在 Java 代码中使用**[Jackson](http://jackson.codehaus.org/)**进行与 JSON 相关的操作。

为了节省带宽，您可以只轮询一个`boolean`值来确定服务器自上次更新以来是否有新数据（例如`since=[some_timestamp]`，作为请求参数提供）并仅在有意义时才查询实际数据（即服务器返回`true`）。

# iphone - 如何从结果集中获取分组查询数据？

> ID：16102710
> 
> 赞同：0
> 
> 时间：2013-04-19T10:37:35.357
> 
> 标签：iphone, ios, sql, sqlite, fmdb

我想从 sqlite 的表中获取分组数据。例如，该表如下所示：

```
Name  Group  Price
a     1      10
b     1      9
c     1      10
d     2      11
e     2      10
f     3      12
g     3      10
h     1      11 
```

现在我想获取按 Group 列分组的所有数据，每个组在一个数组中，即

```
array1 = {{a,1,10},{b,1,9},{c,1,10},{h,1,11}}; 
array2 = {{d,2,11},{e,2,10}}; 
array3 = {{f,3,12},{g,3,10}}. 
```

因为我需要这些二维数组来填充分组表视图。sql 语句可能`NSString *sql = @"SELECT * FROM table GROUP BY Group";` 但我想知道如何从结果集中获取数据。我正在使用 FMDB。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:54:01.397

使用普通的 SELECT 语句从 sql 获取数据，按组和名称排序：

```
SELECT * FROM table ORDER BY group, name; 
```

然后在代码中，构建你的数组，当组 id 改变时切换到填充下一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:17:14.393

让我澄清一下 GroupBy。您可以对数据进行分组，但那时它需要对其他列进行分组功能。例如，表有学生列表，其中有性别组平均男性和女性组，因此我们可以按性别对这张表进行分组，这将返回两组。现在我们需要对结果列执行一些操作。例如每组的最高分或平均分

在您的情况下，您想要分组，但您需要在价格列上进行什么样的操作？例如，下面的查询将返回最高价格的组。

```
SELECT Group,MAX(Price) AS MaxPriceByEachGroup FROM TABLE GROUP BY(group) 
```

# android - 如果 GPS 未打开，活动会崩溃，如果 GPS 不可用，是否可以使用 COARSE_LOCATION？

> ID：16102711
> 
> 赞同：0
> 
> 时间：2013-04-19T10:37:35.497
> 
> 标签：android

当我在设备上关闭 GPS 的情况下加载此活动时，它会使应用程序崩溃。

我将如何解决这个问题？

如果可能的话，如果关闭 GPS 以改用 COARSE_LOCATION 也会很神奇，但不确定这会多么容易。

任何帮助将不胜感激，代码如下：

```
public class SunriseSunset extends Activity implements OnClickListener {

    public Button getLocation;
    public Button setLocationJapan;
    public TextView LongCoord;
    public TextView LatCoord;
    public double longitude;
    public double latitude;
    public LocationManager lm;
    public Spinner Locationspinner;
    public DateDialogFragment frag;
    public Button date;
    public Calendar now;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sunrisesunset);
        // Show the Up button in the action bar.
                setupActionBar();

        //Setting onClickListener for Calculate Sunrise/Sunset Button
        findViewById(R.id.CalculateSunriseSunset).setOnClickListener(this);

        //Sets up LocationManager to enable GPS data to be accessed.
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1,
                new MyLocationListener());

        //Declares Latitude and Longitude TextViews
        LatCoord = (TextView) findViewById(R.id.LatCoord);
        LongCoord = (TextView) findViewById(R.id.LongCoord);

        //Declares for Location Spinner/Dropdown
        addListenerOnSpinnerItemSelection();

        //Date shit
        now = Calendar.getInstance();
        date = (Button)findViewById(R.id.date_button);
        date.setText(DateFormat.format("dd MMMM yyyy", Calendar.getInstance()));
        date.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog();
            }
        });

    }
    /**
     * Set up the {@link android.app.ActionBar}.
     */
    private void setupActionBar() {

        getActionBar().setDisplayHomeAsUpEnabled(true);

    }

    // More date shit
    @SuppressLint("CommitTransaction")
    public void showDialog() {  
        FragmentTransaction ft = getFragmentManager().beginTransaction(); //get the fragment   
        frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener(){      

        public void updateChangedDate(int year, int month, int day){                     
        now.set(year, month, day);
        date.setText(DateFormat.format("dd MMMM yyyy", now));             
        }  
          }, now);
        frag.show(ft, "DateDialogFragment");     }

    public interface DateDialogFragmentListener{
        //this interface is a listener between the Date Dialog fragment and the activity to update the buttons date
        public void updateChangedDate(int year, int month, int day);
    }

    public void addListenerOnSpinnerItemSelection() {
        Locationspinner = (Spinner) findViewById(R.id.Locationspinner);
        Locationspinner
                .setOnItemSelectedListener(new LocationOnItemSelectedListener(
                        this));
    }

    //Sets locations for all the cities in the spinner
    public void setLocationAuckland() {LatCoord.setText("-36.85248273");LongCoord.setText("174.76391734");}
    public void setLocationBuenoAires() {LatCoord.setText("-34.606358325");LongCoord.setText("-58.38727463");}
    public void setLocationCalgary() 

    protected void showCurrentLocation() {
        // TODO Auto-generated method stub
        // This is called to find current location based on GPS data and sends
        // these values to the LongCoord and LatCoord TextViews
        Location location = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        latitude = location.getLatitude();
        longitude = location.getLongitude();

        LongCoord.setText(Double.toString(longitude));
        LatCoord.setText(Double.toString(latitude));
    }

    @Override
    public void onClick(View arg0) {
        Button b = (Button) findViewById(R.id.CalculateSunriseSunset);
        b.setClickable(false);
        new LongRunningGetIO().execute();
    }

    public class LongRunningGetIO extends AsyncTask<Void, Void, String> {
        //Reads in the web service
        protected String getASCIIContentFromEntity(HttpEntity entity)
                throws IllegalStateException, IOException {
            InputStream in = entity.getContent();
            StringBuffer out = new StringBuffer();
            int n = 1;
            while (n > 0) {
                byte[] b = new byte[4096];
                n = in.read(b);
                if (n > 0)
                    out.append(new String(b, 0, n));
            }
            return out.toString();
        }

        private final ProgressDialog dialog = new ProgressDialog(SunriseSunset.this);

        protected void onPreExecute() {
           this.dialog.setMessage("Calculating...");
           this.dialog.show();
        }

        @SuppressLint("SimpleDateFormat")
        @Override
        protected String doInBackground(Void... params) {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();

            // Finds todays date and adds that into the URL in simple date format DD/MM
            SimpleDateFormat df = new SimpleDateFormat("dd/MM");
            String formattedDate = df.format(now.getTime());

            String finalURL = "http://www.earthtools.org/sun/"
                    + LatCoord.getText().toString().trim() + "/"
                    + LongCoord.getText().toString().trim() + "/"
                    + formattedDate + "/99/0";
            HttpGet httpGet = new HttpGet(finalURL);
            String text = null;

            try {
                HttpResponse response = httpClient.execute(httpGet,
                        localContext);
                HttpEntity entity = response.getEntity();
                text = getASCIIContentFromEntity(entity);
            } catch (Exception e) {
                return e.getLocalizedMessage();
            }
            return text;
        }

        protected void onPostExecute(String results) {
            //Closes dialog box onPostExecute
            if (this.dialog.isShowing()) {
                  this.dialog.dismiss();
               }
            //Finds TextViews for Sunrise and Sunset values and posts results
            if (results != null) {
                try {

                    DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                            .newInstance();
                    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                    InputSource s = new InputSource(new StringReader(results));
                    Document doc = dBuilder.parse(s);
                    doc.getDocumentElement().normalize();
                    TextView tvSunrise = (TextView) findViewById(R.id.Sunrise);
                    TextView tvSunset = (TextView) findViewById(R.id.Sunset);
                    tvSunrise.setText(doc.getElementsByTagName("sunrise").item(0).getTextContent());
                    tvSunset.setText(doc.getElementsByTagName("sunset").item(0).getTextContent());
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            Button b = (Button) findViewById(R.id.CalculateSunriseSunset);
            b.setClickable(true);
        }
    }

    class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.home, menu);
        return true;
    }

    public boolean onPrepareOptionsMenu(Menu menu) {
        //  preparation code here
        return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        if (item.getItemId() == R.id.LessonsTutorials) {
            startActivity(new Intent(this, Lessons.class));
        }
        if (item.getItemId() == R.id.PhotoTools) {
            startActivity(new Intent(this, Tools.class));
        }
        if (item.getItemId() == R.id.Glossary) {
            startActivity(new Intent(this, Glossary.class));
        }
        if (item.getItemId() == R.id.Help) {
            startActivity(new Intent(this, Help.class));
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

感谢您的关注

**编辑：**

根据要求输出 LogCat：

```
04-19 11:45:06.211: I/Adreno200-EGL(29691): Build Date: 12/10/12 Mon
04-19 11:45:06.211: I/Adreno200-EGL(29691): Local Branch: 
04-19 11:45:06.211: I/Adreno200-EGL(29691): Remote Branch: m/partner-android/jb-mr1-dev
04-19 11:45:06.211: I/Adreno200-EGL(29691): Local Patches: NONE
04-19 11:45:06.211: I/Adreno200-EGL(29691): Reconstruct Branch: NOTHING
04-19 11:45:06.241: D/OpenGLRenderer(29691): Enabling debug mode 0
04-19 11:45:10.215: D/AndroidRuntime(29691): Shutting down VM
04-19 11:45:10.215: W/dalvikvm(29691): threadid=1: thread exiting with uncaught exception (group=0x414a1930)
04-19 11:45:10.225: E/AndroidRuntime(29691): FATAL EXCEPTION: main
04-19 11:45:10.225: E/AndroidRuntime(29691): java.lang.NullPointerException
04-19 11:45:10.225: E/AndroidRuntime(29691):    at richgrundy.learnphotography.SunriseSunset.showCurrentLocation(SunriseSunset.java:148)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at richgrundy.learnphotography.LocationOnItemSelectedListener.onItemSelected(LocationOnItemSelectedListener.java:20)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at android.widget.AdapterView.fireOnSelected(AdapterView.java:892)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at android.widget.AdapterView.access$200(AdapterView.java:49)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:860)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at android.os.Handler.handleCallback(Handler.java:725)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at android.os.Looper.loop(Looper.java:137)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at java.lang.reflect.Method.invokeNative(Native Method)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at java.lang.reflect.Method.invoke(Method.java:511)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-19 11:45:10.225: E/AndroidRuntime(29691):    at dalvik.system.NativeStart.main(Native Method) 
```

编辑：

是不是因为我在这里调用 GPS_PROVIDER：

```
protected void showCurrentLocation() {
        // TODO Auto-generated method stub
        // This is called to find current location based on GPS data and sends
        // these values to the LongCoord and LatCoord TextViews
        Location location = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        latitude = location.getLatitude();
        longitude = location.getLongitude();

        LongCoord.setText(Double.toString(longitude));
        LatCoord.setText(Double.toString(latitude));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:16:16.303

任何提供者都可能不可用。所以在请求更新之前总是检查

```
if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1,
            new MyLocationListener());
} else if (lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
    lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 1,
            new MyLocationListener());
} 
```

此外，LocationManager 可能不可用（没有位置功能的设备或固件）。所以也要检查 null 。我几乎不明白你的目标，但据我所知，我会做这样的事情

```
private boolean pending;

private LocationListener listener;
private LocationManager lm;

@Override
protected void onCreate(Bundle state) {
    //your stuff
    listener = new MyLocationListener();
}

@Override
protected void onPostCreate(Bundle state) {
    super.onPostCreate(state);
    if (lm != null) {
        requestLocation();
    }
}

private void requestLocation() {

    if (!pending) {

        if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1,
                    listener);
            pending = true;
        } else if (lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 1,
                    listener);
            pending = true;
        }

    }
}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (pending) {
        lm.removeUpdates();
    }
} 
```

编辑关于 showCurrentLocation：

```
protected void showCurrentLocation() {
    // these values to the LongCoord and LatCoord TextViews
    Location location = lm
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if (location != null) {
        latitude = location.getLatitude();
        longitude = location.getLongitude();

        LongCoord.setText(Double.toString(longitude));
        LatCoord.setText(Double.toString(latitude));
    }
} 
```

# sql - 从查询中创建 2 个新列

> ID：16102712
> 
> 赞同：0
> 
> 时间：2013-04-19T10:37:38.233
> 
> 标签：sql, sql-server, join

我正在与联接和内部联接作斗争。

我有 2 个如下所示的表：

用户

```
-----------------------------------------
ID | fname | lname | div_1_id | div_2_id
-----------------------------------------
1    paul    smith     1         2
2    john    lip       2        null
3    kim     long      1         4 
```

部门

```
------------------
ID | name
------------------
1    estate
2    litigation
3    property
4    civil 
```

期望的结果（sql查询）

```
--------------------------------------------------
user.ID | fname | lname | div_1_name | div_2_name
--------------------------------------------------
  1        paul    smith     estate       litigation
  2        john    lip       litigation   
  3        kim     long      estate       civil 
```

我想从一个类似于上面的 MS sql 查询创建一个新表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:43:41.280

用于`LEFT JOIN`此：

```
SELECT u.ID, u.fname, u.lname
      , d1.name as div_1_name
      , d2.name as div_2_name 
FROM USERS u 
LEFT JOIN DIVISIONS d1 ON u.div_1_id = d1.ID 
LEFT JOIN DIVISIONS d2 ON u.div_2_id = d2.ID 
```

### [看到这个 SQLFiddle](http://www.sqlfiddle.com/#!3/7ec01/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:48:53.613

尝试使用子查询：

```
select a.ID, a.fname, a.lname,
    (select name from DIVISIONS b where b.id=a.div_1_id) div_1_name,
    (select name from DIVISIONS b where b.id=a.div_2_id) div_2_name
from 
USERS a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:42:37.490

利用`INNER JOIN`

```
SELECT Users.ID, Users.fname, Users.lname, Divisions.name,Div.name
FROM Users INNER JOIN Divisions ON Users.div_id_1 = Divisions.ID
INNER JOIN Divisions Div ON Users.div_id_1 = Div.ID -- Second join with Divisions Table with Alias. 
```

# command-line - Orchard CMS - 从命令行设置租户

> ID：16102714
> 
> 赞同：3
> 
> 时间：2013-04-19T10:37:43.280
> 
> 标签：command-line, orchardcms, orchardcms-1.6, multi-tenant

对全新安装运行验收测试是一种很好的做法。

作为 CI 的一部分，我们每晚运行验收测试。

当我们运行构建时，我们基本上：

1.  删除数据库。
2.  创建一个干净的数据库。
3.  使用命令行（填充数据库）运行 orchard setup。
4.  使用 orchard 命令行启用所需的功能。
5.  启动 IISExpress
6.  运行验收（硒）测试

这很好用，但是现在我们有了另一个租户，我们需要针对那个租户运行验收测试。

租户使用不同的 DataPrefix 和 RequestUrlHost。

我们如何在全新安装时从命令行设置租户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:09:19.843

在玩了一下命令行之后，我找到了答案：

```
Orchard.exe feature enable Orchard.MultiTenancy

Orchard.exe tenant add mytenant /Host:mytenant.mysite

Orchard.exe setup /t:mytenant /SiteName:mytenant.mysite /DatabaseTablePrefix:mytenant /AdminUsername:admin /AdminPassword:password  /DatabaseProvider:SQLServer /DatabaseConnectionString:"Data Source=localhost;Initial Catalog=Orchard;Persist Security Info=True;User ID=sa;Password=password" 
```

# php - Internet Explorer + Jquery 加载 = 注销用户

> ID：16102715
> 
> 赞同：1
> 
> 时间：2013-04-19T10:37:44.607
> 
> 标签：php, jquery, internet-explorer, session-cookies

我有一个奇怪的问题。我正在修复一个网页。在某些页面中，jquery 加载了以下行

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

在 Internet Explorer 中，如果我加载包含此行的页面，然后单击网页中的其他位置，则无论用户在何处注销都无关紧要。貌似这个函数最后才执行（使用PHP语言）

```
function logout()
{
global $db;
session_start();

/* Delete the user from table online */
mysql_query("DELETE FROM online WHERE user_id='$_SESSION[user_id]'");

/* Update the table last seen in table users */
$date_now = date("Y-m-d");
$time_now = date("H:i");
$date_last_seen = $date_now. ' '. $time_now;

mysql_query("UPDATE users SET date_last_seen = '$date_last_seen'
WHERE id='$_SESSION[user_id]'");

if(isset($_SESSION['user_id']) || isset($_COOKIE['user_id'])) {
mysql_query("update `users` set `ckey`= '', `ctime`= '' 
where `id`='$_SESSION[user_id]' OR  `id` = '$_COOKIE[user_id]'") or die(mysql_error());
}           

/************ Delete the sessions****************/
unset($_SESSION['user_id']);
unset($_SESSION['user_name']);
unset($_SESSION['user_level']);
unset($_SESSION['HTTP_USER_AGENT']);
session_unset();
session_destroy(); 

/* Delete the cookies*******************/
setcookie("user_id", '', time()-60*60*24*COOKIE_TIME_OUT, "/");
setcookie("user_name", '', time()-60*60*24*COOKIE_TIME_OUT, "/");
setcookie("user_key", '', time()-60*60*24*COOKIE_TIME_OUT, "/");

header("Location: index.php");
} 
```

会话被销毁，用户会话从数据库中删除，页面被重定向到 index.php。如果在登录页面中选择“记住我”以保存 cookie，则该页面可以正常工作。

在我加载 jquery 的 2 个不同页面中，我在顶部添加了这一行

```
<?php 
session_set_cookie_params(1800);
session_start();
?> 
```

它正确保存了会话 cookie，但最终没有任何反应，因为用户再次注销。

jquery 仅在 2 个页面中加载，仅在需要时加载。我试图把它放在通用标题上，但同样的问题发生了。当我删除 jquery 行时，页面工作正常，当然需要它的功能除外。所以这就像一个死胡同。

我提醒这仅在 IE 上发生（在 IE 8 和 IE 10 上测试）。在其他浏览器中它工作正常

这是应该在其中一个页面中执行的 jquery 代码

```
<script type="text/javascript" src="js/jquery.min.2012_09_29.js"></script> 
<script type="text/javascript" src="js/jquery.opacityrollover.js"></script> 
<script type="text/javascript" src="js/jquery.galleriffic.js"></script>

<!-- Optionally include jquery.history.js for history support -->
<script type="text/javascript" src="js/jquery.history.js"></script>

<script type="text/javascript">
$(document).ready(function () {
$('a#img_thumb').click(function() {
    var del_name=$(this).attr('href');
    del_name=del_name.replace('#','');
    $('input[id="delete_image"]').attr('value',del_name);
}); 
});
</scipt> 
```

和

```
<script type="text/javascript">
        jQuery(document).ready(function($) {
            // We only want these styles applied when javascript is enabled
            $('div.navigation').css({'width' : '96px', 'float' : 'right'});
            $('div.content').css('display', 'block');

            // Initially set opacity on thumbs and add
            // additional styling for hover effect on thumbs
            var onMouseOutOpacity = 0.80;
            $('#thumbs ul.thumbs li, div.navigation a.pageLink').opacityrollover({
                mouseOutOpacity:   onMouseOutOpacity,
                mouseOverOpacity:  1.0,
                fadeSpeed:         'fast',
                exemptionSelector: '.selected'
            });

            // Initialize Advanced Galleriffic Gallery
            var gallery = $('#thumbs').galleriffic({
                delay:                     1000,
                numThumbs:                 10,
                preloadAhead:              10,
                enableTopPager:            false,
                enableBottomPager:         false,
                imageContainerSel:         '#slideshow',
                controlsContainerSel:      '#controls',
                captionContainerSel:       '#caption',
                loadingContainerSel:       '#loading',
                renderSSControls:          true,
                renderNavControls:         true,
                playLinkText:              'Play Slideshow',
                pauseLinkText:             'Pause Slideshow',
                prevLinkText:              '&lsaquo; Previous Photo',
                nextLinkText:              'Next Photo &rsaquo;',
                nextPageLinkText:          'Next &rsaquo;',
                prevPageLinkText:          '&lsaquo; Prev',
                enableHistory:             true,
                autoStart:                 false,
                syncTransitions:           true,
                defaultTransitionDuration: 200,
                onSlideChange:             function(prevIndex, nextIndex) {
                    // 'this' refers to the gallery, which is an extension of $('#thumbs')
                    this.find('ul.thumbs').children()
                        .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
                        .eq(nextIndex).fadeTo('fast', 1.0);

                    // Update the photo index display
                    this.$captionContainer.find('div.photo-index')
                        .html('Photo '+ (nextIndex+1) +' of '+ this.data.length);
                },
                onPageTransitionOut:       function(callback) {
                    this.fadeTo('fast', 0.0, callback);
                },
                onPageTransitionIn:        function() {
                    var prevPageLink = this.find('a.prev').css('visibility', 'hidden');
                    var nextPageLink = this.find('a.next').css('visibility', 'hidden');

                    // Show appropriate next / prev page links
                    if (this.displayedPage > 0)
                        prevPageLink.css('visibility', 'visible');

                    var lastPage = this.getNumPages() - 1;
                    if (this.displayedPage < lastPage)
                        nextPageLink.css('visibility', 'visible');

                    this.fadeTo('fast', 1.0);
                }
            });

            /**************** Event handlers for custom next / prev page links **********************/

            gallery.find('a.prev').click(function(e) {
                gallery.previousPage();
                e.preventDefault();
            });

            gallery.find('a.next').click(function(e) {
                gallery.nextPage();
                e.preventDefault();
            });

            /****************************************************************************************/

            /**** Functions to support integration of galleriffic with the jquery.history plugin ****/

            // PageLoad function
            // This function is called when:
            // 1\. after calling $.historyInit();
            // 2\. after calling $.historyLoad();
            // 3\. after pushing "Go Back" button of a browser
            function pageload(hash) {
                // alert("pageload: " + hash);
                // hash doesn't contain the first # character.
                if(hash) {
                    $.galleriffic.gotoImage(hash);
                } else {
                    gallery.gotoIndex(0);
                }
            }

            // Initialize history plugin.
            // The callback is called at once by present location.hash. 
            $.historyInit(pageload, "advanced.html");

            // set onlick event for buttons using the jQuery 1.3 live method
            $("a[rel='history']").live('click', function(e) {
                if (e.button != 0) return true;

                var hash = this.href;
                hash = hash.replace(/^.*#/, '');

                // moves to a new page. 
                // pageload is called at once. 
                // hash don't contain "#", "?"
                $.historyLoad(hash);

                return false;
            });

            /****************************************************************************************/
        });
    </script> 
```

这是gallerrific jquery插件

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:41:31.813

问题出在welcome.php 页面中（页面以welcome.php?p=new_page1 welcome.php?p=new_page2 等形式加载）。问题是一个被遗忘的 endsession() 脚本，该脚本在welcome.php 代码中注销了用户。我使用 jquery 调试，我发现 end 删除了脚本。感谢@KLK1 的提示；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:57:18.983

你能发布你的JS代码吗？我认为这是关于 IE 中 JQuery 的事件链接事件导致此问题。

你的js中有这样的东西吗：`.on("click", function(){...})`？

# java - 使用拆分时，字符串数组中的第一个元素为空

> ID：16102716
> 
> 赞同：0
> 
> 时间：2013-04-19T10:37:54.303
> 
> 标签：java, arrays, file, split

所以我试图从文件中读取一些数字并将它们放入一个数组中。我一直在阅读有关人们对空格有问题的文章，所以使用修剪，我这样做了：

```
String[] tokens = new String[length];
 for(int i = 0; i<length;i++){
    String line = fileReader.nextLine();
    line = line.trim();
    tokens = line.split("");
    } 
```

但是这个数组的第一个元素 (token[0]) 变为空。我使用拆分功能错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:43:02.157

```
tokens = line.split(" "); 
```

你忘记了空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:43:32.963

您需要告诉 split 方法它应该拆分的字符。尝试这个：

```
tokens = line.split(" "); //split on a space character 
```

# php - 错误警告：date() 期望参数 2 很长，字符串在

> ID：16102717
> 
> 赞同：-1
> 
> 时间：2013-04-19T10:38:01.193
> 
> 标签：php, wordpress, nextgen-gallery

我在第 522 行的 nextgen-gallery/lib/meta.php 上收到此错误

*`ERROR Warning: date() expects parameter 2 to be long, string given in`*

该行包括：

```
$date_time = date( 'Y-m-d H:i:s', $date_time ); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:44:07.553

尝试这个：

`$date_time = date( 'Y-m-d H:i:s', strtotime($date_time) );`

阅读[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php) 和[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:39:35.050

除了`strtotime()`函数之外，您还可以将字符串转换为[Datetime](http://www.php.net/manual/en/class.datetime.php)对象

```
$dateTime= new DateTime($date_time);
$date_time = date( 'Y-m-d H:i:s', $dateTime); 
```

# jquery - JQuery-Tabs 中的表格阻止显示 HighCharts

> ID：16102723
> 
> 赞同：0
> 
> 时间：2013-04-19T10:38:28.487
> 
> 标签：jquery, ruby-on-rails, highcharts, tabs, html-table

我有以下代码，其中一个 Jquery 选项卡显示一个表格，另一个选项卡显示一个使用 HighCharts 制作的饼图。如果我删除 div 标签之间的表格，饼图会成功显示，但是一旦表格包含在 div 中，饼图将不再显示。我的代码有问题还是已知的 highcharts/jQuery 问题？

```
<script type="text/javascript">
    $(function () {
        $('#pie').highcharts({
            chart: { type:'pie' },
            title: { text: 'Test'},
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                formatter: function() {
                    return '<b>'+ this.point.name +'</b>: '+ Math.round(this.percentage) +' %';
                }
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    dataLabels: false,
                    showInLegend: true
                }
            },
            series: [{
                name: 'Overall Attendance',
                data: [
                    ['Present Students',4],
                    ['Absent Students',4],
                    ['Late Students',5]
                ]
            }],
            colors: [
                '#132f55',
                '#eeeeee',
                '#7f95aa'
            ]
        });
    });
</script>

<p id="notice"><%= notice %></p>
<ul id="tabs" class="nav nav-tabs">
  <li class="active"><a href="#registration" data-toggle="tab">Registration</a></li>
  <li><a href="#pie" data-toggle="tab">Pie Chart</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="registration">
    <table border="1">
      <tr>
        <td>row 1, cell 1</td>
        <td>row 1, cell 2</td>
      </tr>
      <tr>
        <td>row 2, cell 1</td>
        <td>row 2, cell 2</td>
      </tr>
    </table>
    <%= link_to 'Edit', edit_register_path(@register) %> |
    <%= link_to 'Back', registers_path %>

  </div>
  <div class="tab-pane" id="pie" style="width:91%; height:400px; ">  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:04:02.257

你想要这样吗？在此处查看演示：http: [//jsfiddle.net/visnupriya/qFwwf/](http://jsfiddle.net/visnupriya/qFwwf/)

代码在这里：

```
 <li><a href="#tabs-3">Tab 3</a></li>
</ul>
<div id="tabs-1">
    <div id="container" style="width: 320px; height: 200px"></div>
</div>
<div id="tabs-2">
  <table border="1">
  <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
  </tr>
  <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
  </tr>
</table>
</div>
<div id="tabs-3">
    <p>Content for Tab 3</p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:00:11.820

请看[小提琴](http://jsfiddle.net/rajeswari0709/CPUbW/12/)

```
<div id="tabs">
  <ul>
    <li><a href="#registration">Nunc tincidunt</a></li>
    <li><a href="#pie">Proin dolor</a></li>

  </ul>
  <div class="tab-pane active" id="registration">
    <table border="1">
      <tr>
        <td>row 1, cell 1</td>
        <td>row 1, cell 2</td>
      </tr>
      <tr>
        <td>row 2, cell 1</td>
        <td>row 2, cell 2</td>
      </tr>
    </table>

  </div>
<div class="tab-pane" id="pie" style="width:91%; height:400px; ">  <div id="chart"></div>

</div> 
```

您需要正确地附上 div。

# java - 在同一个 xml 标签中使用文本和 xml 标签解析 xml

> ID：16102730
> 
> 赞同：0
> 
> 时间：2013-04-19T10:38:53.267
> 
> 标签：java, xml, xml-parsing

我不想用看起来像这样的 java 解析 xml：

```
<sentence>This is a <a><b>long</b></a> sentence.</sentence>
<sentence>This is a second <a><b>even</b></a> longer sentence.</sentence> 
```

因此，我需要没有 xml 的整个句子。我试图用 dom4j 解析这个。调用函数 element.getText() （当前元素是句子标签）我只是得到没有嵌套 xml 标签中文本的句子。

谢谢你的帮助！问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:43:55.730

将您的数据保存在 xml 标签的 [CDATA] 部分中

```
<sentence><![CDATA[This is a <a><b>long</b></a> sentence.]]></sentence> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:46:35.430

您可以使用 XPath 选择所有文本节点

```
String getAllTextContent(Node node) {
  List<Node> nodes = node.selectNodes("descendant-or-self::text()");
  StringBuilder buf = new StringBuilder();
  for ( Node n : nodes ) {
    buf.append(n.getText());
  }
  return buf.toString();
}
// usage
System.out.println(getAllTextContent(doc.selectSingleNode("//sentence"))); 
```

# jquery - 使用 jQuery 在链接的鼠标悬停时制作 div 淡入淡出

> ID：16102731
> 
> 赞同：1
> 
> 时间：2013-04-19T10:38:59.060
> 
> 标签：jquery, mouseover

我想做的事情应该很简单，但是由于html的结构方式很复杂，我无法改变。当您的帐户发生鼠标悬停时，我基本上需要标题中的stackoverflow。当鼠标离开时，一个小菜单会再次淡入淡出。

**HTML**

```
 <div id="top-links">
    <a id="my_link">Link</a>
    <div id="my_mouseover">
      content
    </div>
  </div> 
```

**Javascript**

```
 $jQ('#my_link').mouseenter(function(){
  $jQ('#my_mouseover').fadeIn(200);
  $jQ('#my_mouseover').mouseleave(function(){
      $jQ('#my_mouseover').fadeOut();
  });
  $jQ('#my_link').mouseleave(function(){
      $jQ('#customer_mouseover').fadeOut();
  });
}); 
```

我的问题是，当我在 和 之间移动鼠标时，div 淡入`<a>`淡出`<div>`。有没有办法说：

```
$jQ('#my_mouseover').mouseleave(function(){
      //there's no such thing as mouseIsOver
  if(!$jQ('#my_link').mouseIsOver()){
    $jQ('#customer_mouseover').fadeOut();
  }    
}); 
```

有谁知道如何做到这一点？我无法在谷歌上找到我需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:44:09.330

您可以将`mouseenter`and`mouseleave`放在`top-links`div 上：

```
$('#top-links').mouseenter(function(){
  $('#my_mouseover').fadeIn(200);
});
$('#top-links').mouseleave(function(){
  $('#my_mouseover').fadeOut(200);
}); 
```

[http://jsfiddle.net/KJE7x/](http://jsfiddle.net/KJE7x/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:52:38.527

```
$('#top-links').on({
    mouseenter : function() {
        $('#my_mouseover').fadeIn(200);
    },
    mouseleave : function(){
        $('#my_mouseover').fadeOut(200);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:48:40.020

将 mouseenter 和 leave 事件添加到您的父容器。这也将为其 shild 元素（`<a>`和`<div>`）获取 mouseover 和 mouseleave 事件

```
$('#top-links').hover(function(){
  $('#my_mouseover').fadeIn(200);
},function(){
  $('#my_mouseover').fadeOut(200);
}); 
```

**注意：您可以使用[`.hover()`](http://api.jquery.com/hover/)而不是为每个事件创建两个单独的函数**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:03:57.950

在使用 Pete 与我分享的方法添加其他链接时遇到问题，最终这就是我所做的：

```
 $('#top-links').mouseenter(function(){
 $('#my_link').mouseenter(function(){
     //fade everything else out
     $('#my_mouseover2').fadeOut();
     $('#my_mouseover').fadeIn(200);
 });
 $('#my_link2').mouseenter(function(){
     $('#my_mouseover').fadeOut();
     $('#my_mouseover2').fadeIn(200);
 });
});
 $('#top-links').mouseleave(function(){

$('#my_mouseover').fadeOut(200);
$('#my_mouseover2').fadeOut(200);
}); 
```

# python - 开发服务器 HTTP 错误 403：禁止

> ID：16102739
> 
> 赞同：9
> 
> 时间：2013-04-19T10:39:16.490
> 
> 标签：python, google-app-engine, devserver

从 1.7.5 更新后（一切正常），我收到**HTTP 错误 403：**尝试通过 localhost 打开任何站点时被禁止。奇怪的是，我在家里的设置与在工作中的设置几乎相同，并且在那里一切正常……可能是我们在工作中使用的代理服务器有问题，因为这是我能想到的唯一区别？这是我得到的错误日志，所以如果有人知道发生了什么，请帮助 (;

```
Traceback (most recent call last):
  File "U:\Dev\GAE\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 1302, in communicate
    req.respond()
  File "U:\Dev\GAE\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 831, in respond
    self.server.gateway(self).respond()
  File "U:\Dev\GAE\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 2115, in respond
    response = self.req.server.wsgi_app(self.env, self.start_response)
  File "U:\Dev\GAE\google\appengine\tools\devappserver2\wsgi_server.py", line 246, in __call__
    return app(environ, start_response)
  File "U:\Dev\GAE\google\appengine\tools\devappserver2\request_rewriter.py", line 311, in _rewriter_middleware
    response_body = iter(application(environ, wrapped_start_response))
  File "U:\Dev\GAE\google\appengine\tools\devappserver2\python\request_handler.py", line 89, in __call__
    self._flush_logs(response.get('logs', []))
  File "U:\Dev\GAE\google\appengine\tools\devappserver2\python\request_handler.py", line 220, in _flush_logs
    apiproxy_stub_map.MakeSyncCall('logservice', 'Flush', request, response)
  File "U:\Dev\GAE\google\appengine\api\apiproxy_stub_map.py", line 94, in MakeSyncCall
    return stubmap.MakeSyncCall(service, call, request, response)
  File "U:\Dev\GAE\google\appengine\api\apiproxy_stub_map.py", line 320, in MakeSyncCall
    rpc.CheckSuccess()
  File "U:\Dev\GAE\google\appengine\api\apiproxy_rpc.py", line 156, in _WaitImpl
    self.request, self.response)
  File "U:\Dev\GAE\google\appengine\ext\remote_api\remote_api_stub.py", line 200, in MakeSyncCall
    self._MakeRealSyncCall(service, call, request, response)
  File "U:\Dev\GAE\google\appengine\ext\remote_api\remote_api_stub.py", line 226, in _MakeRealSyncCall
    encoded_response = self._server.Send(self._path, encoded_request)
  File "U:\Dev\GAE\google\appengine\tools\appengine_rpc.py", line 393, in Send
    f = self.opener.open(req)
  File "U:\Dev\Python\lib\urllib2.py", line 410, in open
    response = meth(req, response)
  File "U:\Dev\Python\lib\urllib2.py", line 523, in http_response
    'http', request, response, code, msg, hdrs)
  File "U:\Dev\Python\lib\urllib2.py", line 448, in error
    return self._call_chain(*args)
  File "U:\Dev\Python\lib\urllib2.py", line 382, in _call_chain
    result = func(*args)
  File "U:\Dev\Python\lib\urllib2.py", line 531, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 403: Forbidden
INFO     2013-04-19 12:28:52,576 server.py:561] default: "GET / HTTP/1.1" 500 -
INFO     2013-04-19 12:28:52,619 server.py:561] default: "GET /favicon.ico HTTP/1.1" 304 - 
```

此外，启动器在关闭时会引发错误：

```
Traceback (most recent call last):
  File "launcher\mainframe.pyc", line 327, in OnStop
  File "launcher\taskcontroller.pyc", line 167, in Stop
  File "launcher\dev_appserver_task_thread.pyc", line 82, in stop
  File "launcher\taskthread.pyc", line 107, in stop
  File "launcher\platform.pyc", line 397, in KillProcess
pywintypes.error: (5, 'TerminateProcess', 'Access is denied.') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-18T22:41:35.733

在使用 Google App Engine Launcher 1.8.6 使用代理服务器时，我的 MacOSX 也遇到了同样的问题。显然，“urllib2.py”上的“proxy_bypass”存在问题。

有两种可能的解决方案：

1.  降级到 1.7.5，但是，谁想降级？
2.  编辑“[GAE 安装路径]/google/appengine/tools/appengine_rpc.py”并查找显示的行

    `opener.add_handler(fancy_urllib.FancyProxyHandler())`

在我的计算机中是第 578 行，然后在行首放一个井号 (#)，如下所示：

```
`#opener.add_handler(fancy_urllib.FancyProxyHandler())` 
```

保存文件，停止然后重新启动您的应用程序。现在 dev_appserver.py 根本不应该尝试使用任何代理服务器。

如果您的应用程序使用任何外部资源，如 SOAP Web 服务或类似的东西，并且您无法在没有代理服务器的情况下访问服务器，那么您将不得不降级。请记住，外部 javascript 文件（如 facebook SDK 或类似文件）是从您的浏览器加载的，而不是从您的应用程序加载的。

因为我没有使用任何外部 REST 或 SOAP 服务，所以它对我有用！

希望它也对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-10T23:47:57.770

尝试任一： - 通过不同的代理访问它。即一个。代理中的代理 - 通过您的本地 IP 访问它，即 192.168.1.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T12:59:03.410

我在 1.9.5 版中遇到了同样的问题。似乎 API 代理正在向代理服务器发送一些 RPC，然后这些 RPC 被 HTTP 403 拒绝（因为代理服务器通常配置为拒绝对任意端口的连接尝试）。在我的情况下，我使用`urlfetch`我的应用程序中的模块来访问外部网页，所以禁用代理服务器不是我的选择。

这就是我一段时间前解决这个问题的方法（很可能是基于在[这个问题](http://code.google.com/p/googleappengine/issues/detail?id=544)下找到的评论，但我不记得确切的来源）。

**笔记：**

*   要使这种方法起作用，您必须知道代理服务器的主机名/IP 地址和默认端口，如果您碰巧连接到不同的代理服务器，请在代码中适当地更改它们。
*   当您不在代理服务器后面时，您必须恢复应用的更改才能返回工作状态（如果您希望在应用程序中访问 Internet）。

它是这样的：

1.  以某种方式禁用 Python（Google App Engine Launcher）环境的代理设置。（在我的情况下，这很容易，因为我是`dev_appserver.py`从终端 shell（在 Linux 上）启动的，`unset http_proxy`and`unset https_proxy`命令起到了作用。）

2.  编辑`{App Engine SDK root}/google/appengine/api/urlfetch_stub.py`. 找到代码块

    ```
    if _CONNECTION_SUPPORTS_TIMEOUT:
        connection = connection_class(host, timeout=deadline)
    else:
        connection = connection_class(host) 
    ```

    （在我的情况下为第 376-379 行）并将其替换为：

    ```
    if _CONNECTION_SUPPORTS_TIMEOUT:
        if host[:9] == 'localhost' or host[:9] == '127.0.0.1':
            connection = connection_class(host, timeout=deadline)
        else:
            connection = connection_class('your_proxy_host_goes_here', your_proxy_port_number_goes_here, timeout=deadline)
    else:
        if host[:9] == 'localhost' or host[:9] == '127.0.0.1':
            connection = connection_class(host)
        else:
            connection = connection_class('your_proxy_host_goes_here', your_proxy_port_number_goes_here) 
    ```

    替换占位符`your_proxy_host_goes_here`并`your_proxy_port_number_goes_here`使用适当的值。

    （我相信这段代码可以写得更优雅，不过......那里有任何 Python 极客吗？:)）

3.  在我的情况下，我还必须删除现有的编译文件`urlfetch_stub.pyc`（与 位于同一目录中`urlfetch_stub.py`），因为 SDK 似乎在我这样做之前没有接收到更改。

现在您可以使用`dev_appserver`来启动您的应用程序，并`urlfetch`在应用程序内使用 -backed 服务，而不会出现 HTTP 403 错误。

# java - 在 Liferay 中进行主题设计时需要 _diffs 文件夹吗？

> ID：16102742
> 
> 赞同：1
> 
> 时间：2013-04-19T10:39:23.350
> 
> 标签：java, eclipse, liferay, liferay-ide, liferay-theme

我知道我可以将一些文件放入`_diffs`文件夹中，这些文件将放在`deploy`. 但我也可以直接在里面编辑文件`docroot`，它们也可以工作。在 Eclipse 下它更加舒适，因为更改任何文件`docroot`都会导致 Eclipse 自动更新正在运行的服务器上更改的文件——无需运行 long ant`deploy`目标。

那么`_diffs`文件夹的意义是什么？我可以避免在独立开发时或在 Eclipse 开发下使用它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T10:44:28.547

如果您使用 Eclipse 的 Liferay IDE 插件（或 Liferay Developer Studio），即使您在 _diffs 中编辑，您的主题也将被透明地部署（无需重新启动 web 应用程序 - 只有资源被复制到 appserver。

该文件夹用于将您的更改与 Liferay 的更改分离。docroot 文件夹包含数百个文件（图像、css 等），而您的 _diffs 文件夹通常只包含一些与默认主题不同的文件。这提供了更好的可维护性，因为您确切地知道您更改了哪个文件 - Liferay 提供的任何更新都可能带有您不关心的其他默认值，因此您可能只需要在新的 SDK 上重新编译即可升级到下一个版本。如果需要更改，您只需确定您必须适应的更改的单个文件，而不是在两个 Liferay 版本和您的更改之间进行三向合并。

# php - PHP覆盖错误

> ID：16102748
> 
> 赞同：-1
> 
> 时间：2013-04-19T10:39:56.670
> 
> 标签：php, overriding

我正在尝试覆盖一个方法，但我收到一个错误，即找不到该函数。这是一个例子：

```
abstract class a {
    public function build(){
        $this._loadComponents();
        return $this;
    }

    abstract protected function _loadComponents();
}

class b extends a {
    protected function _loadComponents(){
        echo "test";
    }
}
$b = new B();
$b->build(); 
```

结果：致命错误：调用未定义的函数

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:42:05.723

`$this.`第 3 行应该是`$this->`. `.`是 PHP 中的连接运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:53:44.940

看看这个：

```
<?php
abstract class a {
    public function build(){
        $this->_loadComponents();
        return $this;
    }

    abstract protected function _loadComponents();
}

class b extends a {
    protected function _loadComponents(){
        echo "test";
    }
}
$b = new B();
$b->build();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:43:14.173

在 php`.`中是一个连接标记，你应该使用`$this->_loadComponents()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:41:50.027

利用

```
$this->_loadComponents(); 
```

代替

```
$this._loadComponents(); 
```

dot(.) 运算符用于连接两个或多个字符串，其中 this(->) 运算符用于访问类属性和函数。

# c# - 为什么接口不像类？

> ID：16102751
> 
> 赞同：0
> 
> 时间：2013-04-19T10:40:14.403
> 
> 标签：c#, oop, c#-4.0, interface, c#-3.0

我有几个关于接口的问题。

1.  为什么我们不能对接口成员使用 virtual 关键字

2.  为什么我们不能在接口的派生类中使用 override 关键字

3.  认为

    ```
    interface Iface
    {
        void Func();
    }
    class Program : Iface
    {
        static void Main(string[] args)
        {

        }
        public void Func()
        {
            Console.WriteLine("In func");
        }
    } 
    ```

    为什么我需要在接口的派生类中的成员函数上使用 public ，即在 Func() 定义中？如果我不使用 public 关键字，它将导致编译时错误

4.  我们可以在接口中使用静态成员吗​​？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:46:05.083

1.  将方法标记为*虚拟*可以为继承类提供覆盖相应方法的选项。但是从接口继承时，实现不是可选的，而是强制性的。根据定义，每个接口方法都是*抽象的。*

2.  你不*重写*方法，你*实现*它们。接口方法没有自己的实现，没有什么可以*覆盖*的。这没有任何意义。

3.  [为什么类中实现的 C# 接口方法必须是公共的](https://stackoverflow.com/questions/7238575/why-must-an-c-sharp-interface-method-implemented-in-a-class-be-public?lq=1)

4.  [不，我们不能在接口上使用静态方法](https://stackoverflow.com/questions/259026/why-doesnt-c-sharp-allow-static-methods-to-implement-an-interface)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:44:13.780

1.  接口不需要那个。实施可以`virtual`。
2.  实现不需要那个 - 没有什么可以覆盖的。
3.  您将必须实例化 a`Program`来调用`Func`。也没有静态接口的概念。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T14:49:44.690

接口不像类，因为，如果我们可以制作接口对象来实现多重继承，我们就不能制作接口对象，那么我们就会面临在类多重继承的情况下出现的菱形问题。

# clearcase - 获取最新版本之前的标签元素

> ID：16102755
> 
> 赞同：1
> 
> 时间：2013-04-19T10:40:26.177
> 
> 标签：clearcase

此命令获取具有最新版本的标签的元素：

清除工具找到 . -元素“{lbtype_sub(LABEL1) && 版本(/main/LATEST)}”-打印

如何获取最新版本之前的标签元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:19:05.783

如果您的意思是，如何获得具有正确标签但不是最新的任何版本，您可以分两次完成：

```
cleartool find . -version "{lbtype_sub(LABEL1)}" -print > labelled_versions.txt 
```

这将找到所有带有正确标签的版本。

请记住，标签只能应用于每个元素的*一个版本。*

如果需要，您可以限制每个分支：

```
cleartool find . -version "{lbtype_sub(LABEL1) && brtype(myBranch)}" -print > labelled_versions.txt

# for instance, for main:

cleartool find . -version "{lbtype_sub(LABEL1) && brtype(main)}" -print > labelled_versions.txt 
```

（这将排除标记的版本，但与 不同的分支的一部分`main`）

然后您可以使用动态视图，对于找到的每个版本，检查该版本是否与您在动态视图中选择的版本相同（使用[`fmt_ccase`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)）：

```
cleartool descr -fmt "%n" M:\MyView\myVob\path\to\myFile 
```

# c++ - 如何在 C++ 中使用临时实例的成员？

> ID：16102758
> 
> 赞同：1
> 
> 时间：2013-04-19T10:40:41.483
> 
> 标签：c++, copy-constructor, temporary, method-chaining

我有一个带有复制构造函数和赋值运算符的对象 A，它有一个成员 QVector。我这样使用它：

```
QVector<B*> x = GetA().GetVector();
x.at(0)->doSomething(); 
```

现在我想对向量中的所有 B 做一些事情，但是因为从*GetA()*我只得到了一个临时副本，所以指针已经被删除了。有没有不同的方法然后做类似的事情

```
A a = GetA();
QVector<B*> x = a.GetVector();
x.at(0)->doSomething(); 
```

这是我的复制构造函数的问题还是我可以在复制构造函数或赋值运算符的实现中修复的任何问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:51:14.200

不，这不是您的复制构造函数的问题，但这当然是“其他事情”。

您应该从函数返回一个[共享指针](http://en.cppreference.com/w/cpp/memory/shared_ptr)`GetVector()`向量，因为您真正想要的是`B*`在此向量中的某个对象`A`与您在此问题中提供的代码之间共享对象的所有权。

**[更新]**

该方法链接：`GetA().GetVector().at(0)->doSomething();`将起作用，因为 C++ std 保证直到顺序点（`;`在这种情况下）所有临时对象都存在。

如果您将其拆分为多行，如您的示例中那样，那么您应该将结果保存`GetA()`在某个命名变量中。

其他一些方法是使用额外的功能，使用`GetA()`作为参数（非常类似于您自己的解决方案）：

```
void foo(const A& a)
{
   QVector<B*> x = a.GetVector();
   x.at(0)->doSomething();
}

foo(GetA()); 
```

甚至：

```
void foo(const QVector<B*>& x)
{
   x.at(0)->doSomething();
}

foo(GetA().GetVector()); 
```

甚至在 C++11 中，使用 lambda 表达式：

```
int main() {
  auto foo = [](const QVector<B*>& x)
    {
       x.at(0)->doSomething();
    };
    foo(GetA().GetVector());
} 
```

# jquery - jQuery，无限滚动，同位素 - 循环函数并在外部变量更改时中断

> ID：16102760
> 
> 赞同：1
> 
> 时间：2013-04-19T10:40:48.163
> 
> 标签：jquery, jquery-isotope, nested-loops, infinite-scroll

一些示例js代码：

```
var $ = jQuery,
    $container = $('#gridcontainer');
    done_loading = false;

$container.infinitescroll({
    navSelector  : '#navi',
    nextSelector : '#navi a',
    itemSelector : '.grid-item',
    errorCallback : function () { 
        done_loading = true;
        console.log(done_loading);
    },
    // call Isotope as a callback
    function( newElements ) {
        $container.isotope( 'insert', $( newElements ) ); 
    }
);  

$('a.my_test_button').click(function(event){
    event.preventDefault();
    if ( $('#gridcontainer div.isotope-item:not(.isotope-hidden)').size() < 15 && done_loading == false ) {
        $container.infinitescroll('retrieve');
        console.log('loaded');
    }
} 
```

此代码使用同位素设置无限滚动，并在用户滚动到底部时加载更多元素。现在，当使用同位素过滤器时，一些元素被隐藏了，所以当我在某些页面上加载更多元素时，可能没有过滤类型的元素。所以这就是我`a.my_test_button`应该发挥作用并加载更多项目的地方，直到无限`errorCallback`滚动触发并设置`done_loading`为true（所有页面都已加载，因此没有更多要加载的内容）或未隐藏元素的数量超过15。

但是上面的代码只做了一次，我希望这部分循环直到满足上述条件。

我应该如何更改此代码才能进行描述的循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:47:21.580

```
if ( $('#gridcontainer div.isotope-item:not(.isotope-hidden)').size() < 15 && done_loading == false ) {
    $container.infinitescroll('retrieve');
    console.log('loaded');
} 
```

改成

```
while ( $('#gridcontainer div.isotope-item:not(.isotope-hidden)').size() < 15 && done_loading == false ) {
    $container.infinitescroll('retrieve');
    console.log('loaded');
} 
```

你可以试试这个。

```
do{ 
   $container.infinitescroll('retrieve');
   console.log('loaded');
  }while( $('#gridcontainer div.isotope-item:not(.isotope-hidden)').size() < 15 && done_loading == true ); 
```

# mysql - Hibernate 和 MySQL 5.6 的奇怪 DATETIME 行为

> ID：16102761
> 
> 赞同：5
> 
> 时间：2013-04-19T10:41:01.953
> 
> 标签：mysql, hibernate

我将 MySQL 5.1 社区服务器更新为 5.6。在此之后，我遇到了奇怪的 DATETIME（休眠类型时间戳）行为。出于某种原因，在保存休眠映射对象后，我的日期从（例如）“2012-09-30 23:59:59”更改为“2012-10-1 00:00:00”。我的日志说我确实保存了午夜日期前的一秒，但是当我查看数据库时，它已更改为第二天的开始。如果我使用相同的日期进行 INSERT 查询，它可以正常工作。

根据 MySQL 文档，不应使用 DATETIME 进行任何时区转换。我还用 MySQL 5.5 进行了测试，但我无法重现同样的问题。

我的 hbm 映射如下所示：

```
<composite-id>
    ...
    <key-property name="timestamp" type="timestamp" column="timestamp"/>
</composite-id> 
```

编辑：我也有最新的 MySQL jdbc 驱动程序。

编辑 2：如您所见，日期更改。

```
22.04.13 12:04:54.149 DEBUG SQL:104 - insert into data_table (col_1, col_2, timestamp) values (?, ?, ?)
22.04.13 12:04:54.149 TRACE BasicBinder:83 - binding parameter [1] as [DOUBLE] - 1.0
22.04.13 12:04:54.149 TRACE BasicBinder:83 - binding parameter [2] as [INTEGER] - 1
22.04.13 12:04:54.150 TRACE BasicBinder:83 - binding parameter [3] as [TIMESTAMP] - Mon Apr 22 23:59:59 EEST 2013
22.04.13 12:04:54.151 ERROR SqlExceptionHelper:144 - Duplicate entry '1-2013-04-23 00:00:00' for key 'PRIMARY' 
```

编辑 3：Hibernate 版本 3.3.1 和 4.1.9 重现的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T11:34:48.330

我想我找到了答案。我使用的日期包括毫秒，似乎在 MySQL 5.6 中您必须定义 DATETIME 的准确性。如果不定义小数的数量，它默认为 0。在这种情况下，'2013-04-01 23:59:59.500' 舍入为 '2013-04-02 00:00:00'。我设法用 sql 查询重现了这一点，因此它与 Java 或 Hibernate 无关。

[http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)

我在我的代码中更改了一行

```
calendar.set(GregorianCalendar.MILLISECOND, 999); 
```

至

```
calendar.set(GregorianCalendar.MILLISECOND, 0); 
```

问题就消失了。

# matlab - 整数值不比较等于 Matlab 中的浮点数

> ID：16102763
> 
> 赞同：0
> 
> 时间：2013-04-19T10:41:06.510
> 
> 标签：matlab, floating-point, precision

我正在尝试比较两个值

```
y = 1
ye = 1.0000 
```

例如，如果我在 Matlab 中进行比较，`y == ye`我会得到`0`？！

中的数据`y`是从文本文件中读取的……这可能与此有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:45:02.023

尝试在两个向量上全精度打印：

```
fprintf('%.15f\n',x(:)) 
```

相反，当您比较浮点数时，请使用以下内容：

```
abs(x1-x2) < e 
```

`e`一些合适的小值在哪里

# c# - 将十六进制数字转换为 UInt C# 的值不正确

> ID：16102765
> 
> 赞同：10
> 
> 时间：2013-04-19T10:41:15.980
> 
> 标签：c#, hex

我正在尝试用 C# 读取二进制文件，但我遇到了问题。我声明了以下内容：

```
public static readonly UInt32 NUMBER = 0XCAFEBABE; 
```

然后在从文件的最开头读取时，我要求读取前 4 个字节（已经尝试过不同的方法，但这是最简单的）：

```
UInt32 num = in_.ReadUInt32(); // in_ is a BinaryReader 
```

虽然我知道这 4 个字节是 CA、FE、BA 和 BE（十六进制），但将它们转换为`UInt`我得到不同的值。NUMBER 是 3405691582，num 是 3199925962。我也试过这样做：

```
byte[] f2 = {0xCA, 0xFE, 0xBA, 0xBE}; 
```

做的结果`BitConverter.ToUInt32(new byte[]{0xCA, 0xFE, 0xBA, 0xBE},0)`是3199925962。

谁能帮我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T10:47:19.480

这是因为您的机器的小[字节序](http://en.wikipedia.org/wiki/Endianness)。请参阅[`BitConverter.IsLittleEndian`](http://msdn.microsoft.com/en-us/library/system.bitconverter.islittleendian.aspx)属性以检查这一点。

基本上，与您将它们写下来的方式相比，数字是以相反的字节顺序存储的。我们将最重要的数字写在左边，但（小端序）PC 将**最**不重要的字节存储在左边。因此，您得到的结果实际上是`0xBEBAFECA`（3199925962 十进制），而不是您所期望的。

您可以使用位移操作进行转换：

```
uint value = (f2[0] << 24) | (f2[1] << 16) | (f2[2] << 8) | f2[3]; 
```

还有更多的转换方式，包括[`IPAddress.NetworkToHostOrder`](http://msdn.microsoft.com/en-us/library/x1886wea.aspx)I4V 指出的`f2.Reverse()`，等等。

对于您的特定代码，我相信这将是最实用的：

```
uint num = (uint)IPAddress.NetworkToHostOrder(in_.ReadInt32()); 
```

然而，这可能会导致算术下溢，因此可能会导致[`/checked`编译器选项或`checked`关键字](http://msdn.microsoft.com/en-us/library/khy08726%28v=vs.110%29.aspx)出现问题（两者都不是很常见）。

如果您想处理这些情况并获得更简洁的代码，请将其包装在扩展方法中：

```
public static uint ReadUInt32NetworkOrder(this BinaryReader reader)
{
    unchecked
    {
        return (uint)IPAddress.NetworkToHostOrder(reader.ReadInt32());    
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T10:48:19.617

这就是所谓的[字节顺序](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Data/endian.html)：

```
var result1 = BitConverter.ToUInt32(new byte[] { 0xCA, 0xFE, 0xBA, 0xBE }, 0);
//3199925962

var result2 = BitConverter.ToUInt32(new byte[] { 0xBE, 0xBA, 0xFE, 0xCA }, 0);
//3405691582 
```

# ruby - 将 ssh 公钥转换为 pem 格式

> ID：16102768
> 
> 赞同：2
> 
> 时间：2013-04-19T10:41:19.687
> 
> 标签：ruby, encoding, openssl, openssh

我从 github api 获得了一个公钥，所以它的格式是 ssh 读取它所需的格式。

我想格式化为 PEM，这样我就可以使用 ruby​​ 的 OpenSSL 库来处理它，特别是我需要一个`OpenSSL::PKey::RSA`实例。

本质上，我喜欢 Ruby 中的这个命令：

```
ssh-keygen -f testing_rsa.pub  -e -m pem 
```

我找到了[SSHKey](https://github.com/bensie/sshkey) gem，但它似乎没有做这个特定的事情。

有没有办法使用 OpenSSL 或其他库来做到这一点，还是我需要求助于这些[其他](https://stackoverflow.com/questions/3299003/how-to-convert-openssh-public-key-file-format-to-pem)答案的建议并手动转换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:09:15.973

```
require 'open3'

def key_file_in_pem_format key_file
  stdout, status = Open3::capture2('ssh-keygen', '-f', key_file, '-e', '-m', 'pem')
  raise unless status == 0
  stdout
end 
```

这会将 ssh-keygen 程序的输出作为字符串返回。

# iphone - iphone-给 CAShapeLayer *maskLayer 透明背景

> ID：16102770
> 
> 赞同：3
> 
> 时间：2013-04-19T10:41:32.560
> 
> 标签：iphone, ios, uiview, cashapelayer

我有一个`UIImageView`。`UIView`在那我已经使用`UIBezierPath`. 现在我希望其他部分是透明的。我的代码是，

```
- (void)drawRect:(CGRect)rect
{
    self.backgroundColor = [[UIColor clearColor] colorWithAlphaComponent:0.0];
    imgV.backgroundColor = [[UIColor clearColor] colorWithAlphaComponent:0.0];
    aPath = [UIBezierPath bezierPath];
    CGContextRef aRef ;
    aRef = UIGraphicsGetCurrentContext();
    [[UIColor clearColor] setStroke];
    [[UIColor clearColor] setFill];
    aPath.lineWidth = 2;
    aPath = [UIBezierPath new];
                //path is calculated here using addLineToPoint addArcWithCentre methods
    [aPath fill];
    [aPath stroke];
    [self setClippingPath:aPath :imgV];
    [[[UIColor clearColor] colorWithAlphaComponent:0.0] setFill];
    CGContextFillRect(aRef, rect);
    CGContextFillPath(aRef);
    self.backgroundColor = [[UIColor clearColor] colorWithAlphaComponent:0.0];
    imgV.backgroundColor = [[UIColor clearColor] colorWithAlphaComponent:0.0];
}
- (void) setClippingPath:(UIBezierPath *)clippingPath : (UIImageView *)imgView;
{   
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = imgView.frame;
    maskLayer.path = [clippingPath CGPath];
    maskLayer.backgroundColor = [[[UIColor clearColor] colorWithAlphaComponent:0.0] CGColor];
    maskLayer.fillColor = [[UIColor whiteColor] CGColor];

    [imgView removeFromSuperview];
    imgView.layer.mask = maskLayer;

    [self addSubview:imgView];

} 
```

输出如下图所示。该图像周围的黑色部分应该是透明的![在此处输入图像描述](https://i.stack.imgur.com/24pqV.png) 请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T02:37:35.933

我认为您可能错过了最后一个电话，可能就在 addSubview 之前：

```
imgView.clipsToBounds = YES; 
```

# android - 在android中使用gettext获取动态生成的多个edittext的值

> ID：16102773
> 
> 赞同：2
> 
> 时间：2013-04-19T10:41:35.620
> 
> 标签：android, android-edittext

我希望在多个编辑文本上设置文本值，单击按钮。编辑文本是动态生成的，我想要每个特定编辑文本的值。并将该文本值存储在字符串数组中。这是代码。

```
if (type.equalsIgnoreCase("Edittext")) {
                Question = cursor1.getString(cursor1
                        .getColumnIndex(AndroidOpenDbHelper.QUESTIONS));
                String ID = cursor1.getString(cursor1
                        .getColumnIndex(AndroidOpenDbHelper.ID));
                // ll_layout1 = (LinearLayout)
                // findViewById(R.id.linearlayout1);
                tv_edittext = new TextView(this);
                tv_edittext.setTextSize(20.0f);
                tv_edittext.setText(Question);
                ll_layout1.addView(tv_edittext);
                et = new EditText(this);
                et.setOnClickListener(this);
                et.setId(EDITTEXT);
                et.setMinLines(1);
                et.setMaxLines(3);
                // editTextList.add(et);
                ll_layout1.addView(et);
                // editTextList.add(et);

                typelist.add(Question);

            } 
```

此代码生成 Text 和 edittext 如何开始...？先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T12:48:46.847

将其更改为

```
tv_edittext = new MyTextView(this); 
```

MyTextView 在哪里：

```
public class MyTextView extends TextView{

    public SampleEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
        this.addTextChangedListener(new MyTextWatcher());
    }

    public SampleEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
        this.addTextChangedListener(new MyTextWatcher());
    }

    public SampleEditText(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        this.addTextChangedListener(new MyTextWatcher());
    }

} 
```

使用 textwatcher 如下：

```
public class MyTextWatcher implements TextWatcher {

} 
```

无论您动态创建多少个文本视图，都会为其创建一个观察者，您可以在`onTextChanged`textwatcher 的方法中获取正在输入的文本。

# python - 一些奇怪的行为 Python list 和 dict

> ID：16102777
> 
> 赞同：4
> 
> 时间：2013-04-19T10:41:40.767
> 
> 标签：python, list, dictionary

谁能解释为什么列表会发生这种情况以及在附加到另一个列表后如何清理列表？

```
>>> t = {}
>>> t["m"] = []
>>> t
{'m': []}
>>> t["m"].append('qweasdasd aweter')
>>> t["m"].append('asdasdaf ghghdhj')
>>> t
{'m': ['qweasdasd aweter', 'asdasdaf ghghdhj']}
>>> r = []
>>> r.append(t)
>>> r
[{'m': ['qweasdasd aweter', 'asdasdaf ghghdhj']}]
>>> t["m"] = []
>>> r
[{'m': []}] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T10:44:15.547

这是正常的行为。Python 使用引用来存储元素。当你这样做时，`r.append(t)`python 将存储`t`在`r`. 如果`t`稍后修改，`t`in`r`也会被修改，因为它是同一个对象。

如果你想`t` 独立于存储的值，`r`你必须复制它。看[`copy`](http://docs.python.org/2/library/copy.html) 模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:47:34.280

当您打电话时，`r.append(t)`您说的是“存储对存储在`t`列表末尾的值的引用`r`”。字典`t`引用不会被复制，因此当您修改时，您`t`会修改`r`.

这种行为可以在这里更清楚地看到：

```
>>> x = []
>>> y = x
>>> x.append(1)
>>> y
[1] 
```

这设置`y`为所引用的值，`x`因此当`x`更改时，它似乎`y`也会更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:46:55.697

字典在 Python 中是可变的，取而代之的是副本

```
>>> import copy
>>> r.append(copy.copy(t))
>>> t
{'m': ['qweasdasd aweter', 'asdasdaf ghghdhj']}
>>> r
[{'m': ['qweasdasd aweter', 'asdasdaf ghghdhj']}]
>>> t["m"]=None
>>> r
[{'m': ['qweasdasd aweter', 'asdasdaf ghghdhj']}] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T10:51:21.037

你可以尝试这样做：

```
import copy
r.append(copy.deepcopy(t)) 
```

这应该有效。

干杯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T11:09:37.190

这很正常。当您将对象分配给变量时，python 不会将该对象复制到您的变量中。它只会将原始对象的引用分配给您的新对象。

```
In [1]: a = [1,2]   
In [2]: b = a
In [3]: a.remove(1)
In [4]: b
Out[4]: [2] 
```

这里 b 将只保存原始列表 a 的引用。如果要覆盖此行为，可以使用复制模块。

```
In [7]: import copy
In [8]: a = [1,2]
In [9]: b = copy.deepcopy(a)
In [10]: a.remove(1)
In [11]: b
Out[11]: [1, 2] 
```

deepcopy 复制所有内容，包括单个元素。

# c++ - 为什么删除后仍然可以访问类实例

> ID：16102780
> 
> 赞同：1
> 
> 时间：2013-04-19T10:41:51.670
> 
> 标签：c++

所以我正在构建一个链表类，具有类似堆栈的功能（LIFO），以保存 Node 类的实例：

```
enum Sides{NorthWest=0, North=1, NorthEast=2, West=3, East=4, SouthWest=5, South=6, SouthEast=7};

class Node
{
    public:
    Node(position2df pos, int id):nextNode(NULL)
    {
        position=pos;
        ID=id;
    }
    ~Node(){}

    position2df getPosition(){return position;}
    int getID(){return ID;}

    void setPeripheralID(Sides side, int id){peripheralID[side]=id;}
    int getPeripheralID(Sides side){return peripheralID[side];}

    Node *nextNode;

    private:
    position2df position;
    int ID;
    int peripheralID[8];
};

class NodeList
{
    public:
    NodeList()
    {
        root=NULL;
        end=NULL;
    }
    ~NodeList(){}

    /// Function for adding elements to the list.
    void push(position2df pos, int id)
    {
        if(root==NULL)
        {
            root=new Node(pos, id);
            end=root;
        }
        else
        {
            Node *newend=new Node(pos, id);
            end->nextNode=newend;
            end=end->nextNode;
        }
    }

    /// Function for removing objects from the list.
    Node *pop()
    {
        slider=root;
        Node *previous;
        Node *next=slider;

        for(previous=NULL; next!=NULL; next=slider->nextNode)
        {
            previous=slider;
            slider=next;
        }

        delete slider;
        end=previous;
        cout << "Can still access deleted object: " << (*slider).getID() << endl;

        return end;
    }

    private:
    Node *root;
    Node *end;
    Node *slider;
}; 
```

在`NodeList::Node *pop()`函数中（其目的是删除最后一个元素并将前一个元素重置为列表的末尾），我在`Node class`（指针名称）滑块指向的实例上调用 delete。但是，即使在删除它之后，我仍然可以访问该实例并输出它的成员。我不知道这是否重要，但实例在删除时有三个不同的指针指向它。他们是：

*   节点*滑块；
*   节点 *end;
*   前一个类实例的 Node::Node *nextNode;

我想此时有一个问题是有序的：D

如果删除后仍然可以访问实例成员，我如何知道它是否被正确删除？

我的代码会导致内存泄漏吗？

我想最终的问题是：*我做错了什么吗？*

**PS**这里有几个变量 ( `position2df; vector2df;`) 来自 Irrlicht 游戏引擎。只是想指出这一点以避免任何混淆。

如果我对这篇文章含糊不清或不清楚，请原谅我，但在网上提问时我不是很熟练。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:47:51.687

> 如果删除后仍然可以访问实例成员，我如何知道它是否被正确删除？

只要相信运行时库：如果你调用`delete`，这个东西就会被删除，句号。一旦你告诉系统你不再需要内存，你就放弃了——它不再是你的了。系统用它的可用内存来计算它以重新分配，因此它可以根据请求将它提供给程序的其他部分。您仍然可以访问该内存，甚至可以在您放弃之前找到那里的内容，但这是未定义的行为。

> 我的代码会导致内存泄漏吗？

不，因为您释放了分配的内存。

> 我想最终的问题是：我做错了什么吗？

是的 - 访问已释放对象的内存是错误的（未定义的行为）。除此之外，它看起来还不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:45:37.133

如果东西在被删除后被访问，这不是泄漏，而是未定义的行为：也就是等待发生的崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:47:42.930

已删除的对象不会立即被覆盖。他们所在的内存区域仅仅被标记为“免费使用”。在为其他目的重新分配和初始化内存之前，它不会被覆盖。

您无法控制发生这种情况的时间和原因，因此您永远不应该在删除内存后访问它。为了确保这一点，所有指向已删除对象的指针都应在删除之前设置为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:53:41.907

当使用 new 和 delete 时，您正在使用动态内存：您要么保留一个内存块，要么释放它。释放时，它只是注释为免费使用，因此可以在需要时重复使用。但是，该程序并没有专门清理该内存区域。

有一个指向已释放内存区域的指针是可能的，并且您可以从那里读取数据，但要小心，因为当程序需要保留更多内存时，可能会随时替换在那里找到的数据。

访问已被释放的内存区域在任何时候都是危险的，可能会导致程序崩溃，甚至更糟糕的是，故障。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T10:58:32.657

> 如果删除后仍然可以访问实例成员，我如何知道它是否被正确删除？

调用`delete`内存后不再属于您并且对象被视为已删除

> 我的代码会导致内存泄漏吗？

不，如果您没有调用`delete`，那将是泄漏，但是在这里您释放了之前分配的内存，所以没关系。

> 我想最终的问题是：我做错了什么吗？

是的，打电话后`delete`你不应该假设仍然有你的对象，这是*未定义的行为*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T11:01:10.647

> 为什么删除类实例后仍然可以访问它们？

你不能。

如果您仍然有一个指向包含该对象的内存的指针，您可能能够也可能无法访问其残余；或者可能是在删除对象后创建的另一个不相关的对象。如果你很幸运，内存可能没有映射，你会得到一个友好的分段错误来指出错误，但这通常只发生在非常大的对象上。

简而言之，取消引用指向已删除对象的指针会产生未定义的行为。

> 我怎么知道它是否被正确删除？

通过知道您的程序何时将其删除，并确保您之后不使用任何悬空指针。如果您使用原始指针并`delete`直接调用，这将非常棘手，这就是为什么您通常应该使用容器和智能指针等 RAII 类型来管理动态内存。

> 我的代码会导致内存泄漏吗？

据我所知，该功能没有泄漏`pop`；如果您使用智能指针，则可以使其更明显正确。

析构函数不会删除任何东西，所以除非你有其他东西负责删除列表的内容，否则当列表被销毁时，你会泄漏其中的任何内容。

> 我想最终的问题是：我做错了什么吗？

如果确实添加了析构函数来修复泄漏，则还需要添加（或删除）复制构造函数和复制赋值运算符，以防止在复制列表时重复删除。这有时被称为[三法则，](https://stackoverflow.com/questions/4172722)在编写资源管理类时非常重要。如果您要使用智能指针，它们会为您处理所有这些，您可以遵循更简单的“零规则”（即让编译器为您生成这三件事）。

# google-maps - 谷歌地图标记，未显示添加的方向代码

> ID：16102781
> 
> 赞同：1
> 
> 时间：2013-04-19T10:41:59.253
> 
> 标签：google-maps, google-maps-markers

我似乎无法在我创建的一张地图上添加标记，而且我似乎无法弄清楚我哪里出了问题。

该地图已很好地添加到该站点，我什至可以使用恰好显示标记的方向代码。

我想要的是一个初始标记来显示学校在哪里，在这种情况下，学校在哪里，并有一个信息框点击显示地址，但无论我尝试什么，我似乎都无法显示它。

我的所有代码如下：-

```
<div id="map_canvas" style="width:100%; height:392px;float:left;"></div>
  <div id="directionsPanel" style="float:left;max-width:395px; overflow:scroll;overflow-x: hidden;"></div>

            <script>
//define one global Object
  var myMap = {}
  //init 

  function initialize(){
  //set up map options
    var mapOptions = {
      center: new google.maps.LatLng(53.964304,-2.028522),
      zoom: 15,
      scrollwheel: false,
      mapTypeId: google.maps.MapTypeId.ROADMAP,

    };

    myMap.map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    myMap.directionsService = new google.maps.DirectionsService();
    myMap.directionsDisplay = new google.maps.DirectionsRenderer();
    myMap.directionsDisplay.setMap(myMap.map);
    myMap.directionsDisplay.setPanel(document.getElementById("directionsPanel"));
  }//end init

  function createMarker(point, title, content, map) {
var marker = new google.maps.Marker({
position: point,
map: map,
title: title
});
var infowindow = new google.maps.InfoWindow({
content: content
});
google.maps.event.addListener(marker, 'click', function() {
if(curr_infw) { curr_infw.close();} // We check to see if there is an info window stored  in curr_infw, if there is, we use .close() to hide the window
curr_infw = infowindow; // Now we put our new info window in to the curr_infw variable
infowindow.open(map, marker); // Now we open the window
 });
 return marker;
  }

  //directions
  var calcRoute = function() {
    var start = document.getElementById("start").value,
    end = document.getElementById("end").value,
    request = {
        origin:start,
        destination:end,
        durationInTraffic :true,
        transitOptions: {
        departureTime:  new Date()
      },
      provideRouteAlternatives : true,
      travelMode: document.getElementById("travelmode").value
    };

    myMap.directionsService.route(request, function(result, status) {
      if(status == google.maps.DirectionsStatus.OK) {
        myMap.directionsDisplay.setDirections(result);
      }else{
       alert("something went wrong!");
      }
    });

  }
  //script loader
  var loadScript = function() {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyDZsY0Xbo137bDtb8wmefTogdGl82QM85s&sensor=false&callback=initialize";
    document.body.appendChild(script);
  }
  window.onload = loadScript; 
```

在我因拔掉所有头发而秃顶之前，对这些家伙的任何帮助将不胜感激。

杰森

# java - 读取从 java 服务器生成的 DOCX 文件时出错

> ID：16102782
> 
> 赞同：3
> 
> 时间：2013-04-19T10:42:01.170
> 
> 标签：java

在服务器端，我有一个正确的 DOCX 文件。我有 Java 代码来从磁盘读取文件并通过 JSP 刷新它。

当我下载文件时，Office 说文件包含错误。这是我的 JSP 中的代码：

```
 File dir = new File("c:\\file_test.docx");
    FileInputStream fin = new FileInputStream(dir);
    byte fileContent[] = new byte[(int)dir.length()];
    fin.read(fileContent);
    fin.close();
    response.setHeader("Content-Disposition", "attachment;filename=file_test.docx");
    response.setContentLength((int)dir.length());
    response.setContentType("application/vnd.openxmlformats-officedocument.wordprocessingml.document; charset=utf-8");
    response.getOutputStream().write(fileContent);
    response.getOutputStream().flush(); 
```

我发现下载的文件末尾有一个空行。如果我用记事本打开文件并删除空间，文件会正确打开。

我的问题是，在 JSP 中，如何删除二进制文件末尾的空格？我试图在文件中包含除最后一个之外的所有字节，但这不起作用。

![如果我删除第 6238 行，Office 会正确打开文件。 用记事本++编辑](https://i.stack.imgur.com/eAHcu.png)

如果我删除第 6238 行，Office 会正确打开文件。用记事本++编辑

我需要你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:26:36.947

不小心时 JSP 会输出文本。

以：

```
%> 
```

**没有任何后续，即没有换行符**

或者让它成为一个servlet。

# mysql - Mysql选择只有特定条件的结果

> ID：16102786
> 
> 赞同：3
> 
> 时间：2013-04-19T10:42:16.950
> 
> 标签：mysql

这是我的问题：我有一个与不同国际项目相关的用户列表，我想获得专门为美国项目工作的用户，所以假设有人为德国项目工作，我不想要他在名单中。涉及三张表：users、projects、company

这是获取为美国项目工作的用户的第一个查询：

```
SELECT DISTINCT users.forename, users.surname, users.email, users.company_id,  users.user_id
FROM projects, company, users
WHERE projects.project_type = 'US'
AND company.project_id = projects.project_id
AND users.company_id = company.company_id
ORDER BY surname, forename 
```

现在如何排除也有其他国家项目的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:45:41.903

您可以使用 NOT IN 子句排除在其他项目上工作的用户。

在 where 条件下添加以下行

```
WHERE projects.user_id 
  NOT IN (select user_id from projects where projects.project_type != 'US') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:51:19.190

您可以加入表格并使用条件进行过滤

```
SELECT DISTINCT users.forename, users.surname, users.email, users.company_id,  users.user_id
FROM users
JOIN company USING (company_id)
JOIN projects USING (project_id)
WHERE projects.project_type = 'US'
ORDER BY surname, forename 
```

此查询创建包含用户以及有关公司和项目的信息的行，并在使用条件过滤这些行之后`WHERE projects.project_type = 'US'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:51:41.520

您可以尝试使用[HAVING](http://www.mysqltutorial.org/mysql-having.aspx)。如果用户仅在美国工作，则 COUNT 需要为 1：

```
SELECT DISTINCT users.forename, COUNT(projects.*) AS c, users.surname, users.email, users.company_id,  users.user_id
FROM projects, company, users
WHERE projects.project_type = 'US'
AND company.project_id = projects.project_id
AND users.company_id = company.company_id
GROUP BY projects.project_type
HAVING c = 1
ORDER BY surname, forename 
```

也许此代码不起作用，无法检查，但您可以朝这个方向尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:50:22.377

A`not exists`会做这项工作

```
SELECT DISTINCT users.forename, users.surname, users.email, users.company_id,  users.user_id
FROM projects, company, users
WHERE projects.project_type = 'US'
AND company.project_id = projects.project_id
AND users.company_id = company.company_id
AND NOT EXISTS (
    SELECT * 
      FROM projects notUS 
     WHERE notUS.project_type <> 'US' 
       AND notUS.user_id = users.user_id)
ORDER BY surname, forename 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T10:51:59.387

你可以使用这个： -

```
SELECT DISTINCT users.forename, users.surname, users.email, users.company_id,  users.user_id
FROM projects, company, users
WHERE users.company_id = company.company_id
AND company.project_id = projects.project_id
AND projects.user_id 
IN (select user_id from projects where projects.project_type = 'US')
ORDER BY surname, forename 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T10:54:16.387

试试这个，我认为你需要 MINUS：

```
SELECT 
    users.forename, users.surname, users.email, users.company_id,  users.user_id
FROM 
    users
where 
    user_id not in(SELECT DISTINCT user_id from users where company_id in
    (
        Select company_id from company where project_id = (
            Select project_id from projects where project_type != 'US'
        )
    ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T11:07:13.177

你也可以这样做

```
SELECT DISTINCT
  users.forename,
  users.surname,
  users.email,
  users.company_id,
  users.user_id
FROM projects
  INNER JOIN company
    ON company.project_id = projects.project_id
  INNER JOIN users
    ON users.company_id = company.company_id
  INNER JOIN (SELECT *
          FROM projects
          WHERE project_type <> 'US') AS project
    ON project.project_id = projects.project_id
WHERE project.project_id IN NULL
GROUP BY projects.project_id
ORDER BY surname, forename 
```

# python - 使用 Deform 在 HTML 控件中报告表单后处理错误消息

> ID：16102787
> 
> 赞同：4
> 
> 时间：2013-04-19T10:42:17.983
> 
> 标签：python, pyramid, deform, colander

[Deform](http://docs.pylonsproject.org/projects/deform)允许在表单的不同字段上添加验证。但是，它会检查表单本身是否有效，但这并不一定意味着表单处理将是有效的。

例如，如果表单用于创建具有电子邮件地址的新用户。表单是有效的，但是表单处理（包括在数据库中插入这个新用户）会引发一个数据库完整性错误，说明已经有一个用户使用这个电子邮件地址。

我知道我可以添加一个特殊的验证器来检查电子邮件是否尚未使用，但仍然可能存在另一个并发事务，在检查和第一个事务的提交之间提交相同的电子邮件，这不是 100% 安全的结尾。

那么，我怎样才能很好地向用户报告表单后处理错误呢？

我可以轻松地报告表单旁边的错误消息（闪存消息或其他），但我想知道是否有一种方法可以直接在小部件中报告错误，就像处理正常的验证错误一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T12:00:39.127

我遇到了同样的情况，这就是我如何将错误提升为正常验证错误。

**验证器方法：**

```
def user_DoesExist(node,appstruct):
if DBSession.query(User).filter_by(username=appstruct['username']).count() > 0:
    raise colander.Invalid(node, 'Username already exist.!!') 
```

**架构：**

```
class UserSchema(CSRFSchema):
username = colander.SchemaNode(colander.String(), 
               description="Extension of the user")
name = colander.SchemaNode(colander.String(), 
               description='Full name')
extension = colander.SchemaNode(colander.String(), 
                description='Extension')
pin = colander.SchemaNode(colander.String(), 
          description='PIN') 
```

**看法：**

```
 @view_config(route_name='add_user', permission='admin', renderer='add_user.mako')
def add_user(self):
    schema = UserSchema(validator = user_DoesExist).bind(request=self.request)
    form = deform.Form(schema, action=self.request.route_url('add_user'), buttons=('Add User','Cancel'))

    if 'Cancel' in self.request.params:
        return HTTPFound(location = self.request.route_url('home'))

    if 'Add_User' in self.request.params:
        appstruct = None
        try:
            appstruct = form.validate(self.request.POST.items())
        except deform.ValidationFailure, e:
            log.exception('in form validated')
            return {'form':e.render()} 
```

希望这会帮助你。谢谢。

# compass-sass - Compass mixinborder-radius的默认值有问题

> ID：16102788
> 
> 赞同：1
> 
> 时间：2013-04-19T10:42:28.290
> 
> 标签：compass-sass

我正在使用 Compass 0.12.2，它将此代码用于其`border-radius`mixin：

[https://github.com/chriseppstein/compass/blob/stable/frameworks/compass/stylesheets/compass/css3/_border-radius.scss](https://github.com/chriseppstein/compass/blob/stable/frameworks/compass/stylesheets/compass/css3/_border-radius.scss)

很容易看出，参数的默认值是使用文件顶部定义`$radius`的变量设置的。`$default-border-radius`

那为什么会这样

```
@include border-radius; // or @include border-radius(); 
```

抛出错误*Mixin border-radius is missing argument $radius*？

它不应该使用默认值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T22:12:15.883

在我的情况下，这是由[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)定义自己的`border-radius`mixin 引起的，它覆盖了指南针。

# vmware - 没有 RDP 时自动发送密钥失败

> ID：16102789
> 
> 赞同：5
> 
> 时间：2013-04-19T10:42:30.330
> 
> 标签：vmware, remote-desktop, sendkeys

我有一个希望在其上运行自动化任务的 VM（即自动化任务在实际 VM 上运行）。

VM 是 Windows 2008 服务器。

我已将任务添加到任务调度程序中，当我通过 RDP 登录到机器时，我可以通过右键单击运行来运行任务。

但是，当我的 RDP 会话关闭时（但 VM 上的用户仍处于登录状态），任务尝试运行，但仅打开 notepad.exe，但不写入文本。

vbs脚本如下（这里为我们简化使用……）；

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run "Notepad.exe"
Do Until Success = True
Success = objShell.AppActivate("Notepad")
Wscript.Sleep 1000
Loop
objShell.SendKeys "This is a test." 
```

我已经在 Windows XP 机器上完美地完成了这项任务，但我无法理解是什么导致了这个问题。

当未通过 RDP 连接时，似乎在 VM 上找不到键盘。当通过 RDP 连接时，MSTSC 向 VM 发送我的键盘，然后可以正确运行任务。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T15:11:20.527

好的，

所以我想我想通了...

问题是，一旦您使用远程桌面注销，服务器就会被锁定，并且无法运行任何脚本。我尝试了各种选项，包括 ControlSend 和 ControlClick 命令，但没有任何成功。

解决方案如下： 使用以下命令创建一个批处理文件，并将其保存到您要保持解锁的工作站的桌面： 我已将我的文件命名为 Logoff.bat

```
START C:\Windows\System32\tscon.exe 0 /dest:console
START C:\Windows\System32\tscon.exe 1 /dest:console
START C:\Windows\System32\tscon.exe 2 /dest:console
START C:\Windows\System32\tscon.exe 2 /dest:console
START C:\Windows\System32\tscon.exe 3 /dest:console
START C:\Windows\System32\tscon.exe 4 /dest:console
START C:\Windows\System32\tscon.exe 5 /dest:console 
```

Tscon.exe 是您的 Windows 安装的标准配置，专门用于使先前锁定的控制台保持解锁状态。请参阅此链接：http: [//support.microsoft.com/kb/302801](http://support.microsoft.com/kb/302801)

下次您使用远程桌面登录工作站时，不要以正常方式注销，而是运行批处理文件 - 在我的情况下为“Logoff.bat” 这将终止您的远程桌面连接并将您注销，但随后会继续以解锁状态运行任何脚本，就好像有人实际登录一样。

# c - 使用异步套接字为服务器处理多个客户端

> ID：16102794
> 
> 赞同：1
> 
> 时间：2013-04-19T10:42:40.960
> 
> 标签：c, windows, sockets, network-programming, udp

我使用多线程开发了一个单服务器多客户端 udp 应用程序。我现在想切换到单处理器系统，所以多线程将不再帮助我:(

现在我想使用**异步套接字**实现服务器，以便它可以一次处理多个客户端。

这种方法能正常工作吗？如果您想使用一台服务器处理多个客户端，那么使用异步套接字是否正确？使用异步套接字比使用线程处理多个客户端更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:57:29.263

我建议你看看 libevent：[http](http://www.libevent.org/) ://www.libevent.org/它提供了组织异步服务器的所有必要功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:45:52.313

您可以对服务器进行多线程处理，也可以使其异步。除非你有*很多*（100s/1000s）的连接，否则你可能不会注意到任何多路复用连接的方法的性能差异。对于少量连接，选择/轮询、线程、aio 都将执行大致相同的操作。但是，aio 更难以扎实实施。

# java - 如何从覆盖的spring mapRow返回一些东西 如果结果集为空？

> ID：16102795
> 
> 赞同：-1
> 
> 时间：2013-04-19T10:42:41.547
> 
> 标签：java, spring, resultset

昨天我在尝试从 mapRow 返回一些值时遇到了一些问题

```
strings.addAll(getJdbcTemplate().query(query, new RowMapper<String>() {
    @Override
    public String mapRow(ResultSet resultSet, int i) throws SQLException {
        if(?????????)
            return "--";
        else
            return resultSet.getString("S_PEOPLE_QUANTITY");
        }
    }
)); 
```

如果我的结果集包含零行，我如何返回例如“--”？我有什么用而不是“?????????” ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:46:35.653

使用此 if 条件而不是“?????????”

```
if (!resultSet.next()){
// if this condition is true Resultset is empty
} 
```

来自 Java 文档

```
When a call to the next method returns false, the cursor is positioned after the last row. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:51:21.920

我认为您的数据访问代码不应在没有数据的情况下插入自定义值，例如“--”。它看起来不像是好的设计。数据访问代码应返回一个空列表，表示数据存储中没有针对所提供输入的数据。

在您的应用程序中，如果您想在没有可用数据的情况下显示“--”，您应该在列表中插入一个“--”。

将表示/业务逻辑与您的数据访问逻辑分开，实现将变得更容易开发和维护。

# java - 地图集合的 LazyInitializationException

> ID：16102801
> 
> 赞同：1
> 
> 时间：2013-04-19T10:43:17.117
> 
> 标签：java, hibernate

我知道这是一个老生常谈的问题，但我找不到解决方案。我有两个豆子，其中一个有`HashMap`收藏品。尝试阅读此集合时遇到异常。已指定映射配置以急切地加载此集合。

我的环境是：

*   休眠 4.2.0
*   mysql-connector-java 5.1.24

我还有两个豆子：

```
public class FeaturedDoc {
    private Long id;
    private Map<Feature, Float> features;

    public FeaturedDoc() {
        features = new HashMap<Feature, Float>();
    }
   (getters and setters)
} 
```

和

```
public class Feature {
    private Long id;
    private String name;
    private Long internalId;
    (getters and setters)    
} 
```

这个bean有映射：

```
<class name="Feature" table="FEATURE">
    <id name="id" type="long" column="ID">
        <generator class="increment"/>
    </id>
    <property name="name" length="255" type="string" unique="true" column="NAME" index="INDEX_NAME"/>
    <property name="internalId" type="long" unique="true" not-null="false" column="INTERNAL_ID" index="INDEX_INTID"/>
    <sql-insert>insert into FEATURE (NAME, INTERNAL_ID, ID) values (?, ?, ?) on duplicate key update ID = ID</sql-insert>
</class>

<class name="FeaturedDoc" table="FEATURED_DOC">
    <id name="id" type="long" column="ID">
        <generator class="increment"/>
    </id>
    <map  name="features" table="DOC_FEATURE" cascade="all" lazy="false" fetch="join">
        <key column="ID"></key>
        <map-key-many-to-many column="FEATURE_ID" class="Feature"/>
        <element column="value" type="float"/>
    </map>
</class> 
```

我也有带有方法的DAO层：

```
public FeaturedDoc read(long id) {
    FeaturedDoc fd = null;
    try {
        session.beginTransaction();
        fd = session.get(FeaturedDoc.class, id);
        session.getTransaction().commit();
    } catch (Exception e) {
        e.printStackTrace();
        session.getTransaction().rollback();
    } finally {
        close();
    }
    return fd;
} 
```

当我试图做这样的事情时：

```
FeaturedDoc fd = daoService.read(26);
System.out.println(fd.getFeatures()); 
```

我遇到了一个例外

> org.hibernate.LazyInitializationException：无法初始化代理 - 没有会话

你知道我应该如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:50:22.790

假设其他一切都好（在映射中），您是否尝试过`lazy="false"`将`cascade="all"`. 我发现这是我的映射中的一个问题，导致了这个`LazyInitializationException`错误。

此顺序显示在以下 Hibernate 参考中： http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:29:07.473

我已经解决了这个问题！原因是在`Feature`课堂上。它没有`hashCode`和`equals`功能。实现这些功能后一切正常。

# php - 如何在 PHP 中上传 500MB 以上的大文件

> ID：16102809
> 
> 赞同：28
> 
> 时间：2013-04-19T10:43:46.723
> 
> 标签：php

我用PHP做了一个上传页面，但是我不知道为什么页面不会上传大于500MB的文件，这是我第一次尝试上传这么大的东西，我改变了PHP.INI中的所有配置（post_max_size = 700M , upload_max_filesize = 600M, max_execution_time = 300)。上传代码如下

```
if(isset($_FILES['upload']) && !empty($_FILES['upload']['name'])){
 move_uploaded_file($_FILES['upload']['tmp_name'], $this->filePath.$this->fileName);
} 
```

我需要帮助，我想知道是否有什么做错了..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-19T10:49:18.377

您认为增加上传大小限制是否会解决问题？如果上传 2GB 文件，那会发生什么？您是否考虑过此类脚本的内存使用情况？

相反，您需要的是分块上传，请参见此处：[在服务器端处理 plupload 的分块上传](https://stackoverflow.com/questions/9011138/handling-pluploads-chunked-uploads-on-the-server-side) 和此处：[文件上传；如何利用“分块”？](https://stackoverflow.com/questions/6375852/file-uploads-how-to-utilize-chunking)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-19T10:46:11.880

通过配置，PHP 只允许上传不超过一定大小的文件。网上有很多文章解释了如何修改这个限制。以下是其中一些：

*   [PHP 增加上传文件大小限制](http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/)
*   [如何增加 PHP 上传限制？](https://kb.mediatemple.net/questions/1117/How+do+I+increase+the+PHP+upload+limits?#dv)
*   [使用 .htaccess 在 PHP 中上传大（大）文件](http://roshanbh.com.np/2008/01/uploading-larger-files-in-php.html)

例如，您可以编辑`php.ini`文件并设置：

```
memory_limit = 32M
upload_max_filesize = 24M
post_max_size = 32M 
```

然后，您将需要重新启动 apache。

**注意：**
话虽如此，上传这样的大文件并不是很可靠。可能会发生错误。您可能想要拆分文件，并包含一些附加数据以进行错误更正。一种方法是使用[标准恢复文件](http://en.wikipedia.org/wiki/Parchive)。然后，您可以在类 unix 系统上使用[`par`命令行实用程序](http://linux.die.net/man/1/par)在上传后检查文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:52:47.253

我假设您的意思是您通过 HTTP 传输文件。虽然不如 FTP 糟糕，但如果您能找到另一个解决问题的方法，这不是一个好主意。HTTP（以及因此的组件程序）针对在 Internet 上传输相对较小的文件进行了优化。

虽然该协议支持服务器到客户端范围的请求，但它不允许反向操作。即使任一端的软件都不受卷的影响，您推送的数据越多，您可能失去连接的时间间隔就越大。但最大的问题是最后一句中的警告。

# php - Difference between 2 variable RSS dates in days

> ID：16102820
> 
> 赞同：0
> 
> 时间：2013-04-19T10:44:36.970
> 
> 标签：php, rss, strtotime

I'm currently pulling a RSS feed which has these dates:

```
<rss>
 <channel>
  <lastBuildDate>Thu, 18 Apr 2013 16:14:15 GMT</lastBuildDate> 
```

and

```
<item>
<pubDate>Fri, 05 Apr 2013 14:25:13 GMT</pubDate>  
</item>

<item>
<pubDate>Wed, 05 Sep 2012 10:01:27 GMT</pubDate>  
</item> 
```

I am trying to work out the difference between the lastBuildDate and pubdate in days for every item.

So far I have this:

```
<?php
foreach($rss->channel->item as $item){

  $rss->channel->lastBuildDate = date('D, d M Y H:i:s GMT', strtotime($date1));
  $item->pubDate = date('D, d M Y H:i:s GMT', strtotime($date2));
  $dateDiff    = $date1 - $date2;   
  $fullDays    = floor($dateDiff/(60*60*24));   
  echo "Differernce is $fullDays days";

  ?> 
```

Unfortunately each item is coming up with a 0 day difference. I know that $date1 and $date2 do not have a reference to the RSS feed, but considering the first half of the line does, does this still require a RSS path? Or am I pulling the RSS feed dates completely wrong in the first place?

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:50:50.313

Try this

```
 $dStart = new DateTime(date('2012-07-26'));
   $dEnd  = new DateTime(date('2012-08-26'));
   $dDiff = $dStart->diff($dEnd);
   echo $dDiff->format('%R');
   echo $dDiff->days; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:49:45.270

```
 $date1 = 'Thu, 18 Apr 2013 16:14:15 GMT';
  $date2 = 'Wed, 05 Sep 2012 10:01:27 GMT';

  $dateDiff    = strtotime($date1) - strtotime($date2);   
  $fullDays    = floor($dateDiff/(60*60*24));   
  echo "Differernce is $fullDays days"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:51:24.177

You should compare `strtotime($date1)` with `strtotime($date2)`.

[strtotime](http://php.net/strtotime) converts (nearly) any given date to a UnixTimestamp ([http://en.wikipedia.org/wiki/Timestamp](http://en.wikipedia.org/wiki/Timestamp)). UnixTimestamps count the seconds from the beginning of the unix era in seconds. If you compare these two you will get the difference in seconds wich can be outputted as days.

```
$diff = strtotime($date1) - strtotime($date2);
$fulldays = floor($diff/86400); //one day = 86400 seconds 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T10:53:13.513

you can do in this way by comparing two dates using [strtotime function](http://php.net/manual/en/function.strtotime.php)

```
$lastBuildDate = $rss->channel->lastBuildDate;
$pubDate = $item->pubDate;

$lb = strtotime($lastBuildDate);
$pd = strtotime($pubDate);

$differnce = $pd - $lb;
echo floor($differnce/(60*60*24)) . ' days difference'; 
```

**this will output**

```
212 days difference 
```

# ajax - 在控制器方法 ASP.NET MVC 4/JSON 中使用 IDictionary

> ID：16102826
> 
> 赞同：1
> 
> 时间：2013-04-19T10:44:49.127
> 
> 标签：ajax, json, asp.net-mvc-4

我正在尝试使用 AJAX 将数据发布回带有 viewModel 的 ASP.NET MVC 控制器，如下所示：

```
public class FunkyThingUpdateModel
{
   public int FunkyThing_ID{get;set;}
   public string Name{get;set;}
   public IDictionary SizesAvailable{ get; set;}
} 
```

不幸的是，我正在努力让模型绑定器绑定到 IDicationary。如果在传递给控制器​​的 JSON 中`sizesAvailable`是`null`，则成功调用控制器方法。但是，如果 sizeAvailable 中有数据，那么我会收到内部服务器错误 500。

我的 JSON 格式如下：

```
 {"FunkyThing_ID":1,"Name":"Pogo Stick","SizesAvailable":{"1":"Extra
 Large","2":"Extra Tiddly"}} 
```

我不确定的是 - 我是否正在尝试做一些不可能的事情。有没有绑定到 IDictionary 的方法 - 如果没有，最好的选择是什么？

还是我的 JSON 只需要以不同的方式格式化？

我在这里发现了许多类似的问题，但其中大多数都已经很老了。

似乎有一些迹象表明这在我正在使用的 MVC 4 中是可能的——但我可能误解了上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:46:52.003

未经测试，但我认为您必须为要创建的对象指定通用接口定义。

```
public IDictionary<int, string> SizesAvailable{ get; set;} 
```

而且您还必须更改 ajax 定义中的数据以将 SizesAvailable 作为数组通知

```
$.ajax({
    url:'your url', 
    type: 'post', 
    contentType : 'application/json', 
    data: JSON.stringify({FunkyThing_ID:1, Name:"Pogo Stick", SizesAvailable:[{key: 1, value:"Extra Large"},{key:2, value: "Extra Tiddly"}]}), 
    success: function(response){
        console.log(response);
    }
}); 
```

**编辑**

如果您的意图是只获取大小的字符串数组（不是字典），请更改

```
public string[] SizesAvailable{ get; set;} 
```

并将数据发送为，

```
data: JSON.stringify({FunkyThing_ID:1, Name:"Pogo Stick", SizesAvailable:["Extra Large","Extra Tiddly"]}), 
```

希望这可以帮助。

# java - 如何在 jdoQL 中编写 IN 子句查询？

> ID：16102827
> 
> 赞同：2
> 
> 时间：2013-04-19T10:44:50.347
> 
> 标签：java, mongodb, datanucleus, jdoql

我想在 jdoQL 中编写一个“IN”子句查询，类似于下面给定的 SQL 查询。

`SELECT salary FROM employee where empId IN (1021,2013,9872);`

我的目标是我有一个电子邮件地址列表，我将在“IN”子句中提供这些地址，并且需要为 jdoQL 中的每个电子邮件地址获取相应的 smtp 邮件地址。

有人可以帮我解决这个问题吗？还有其他解决方法吗？

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:13:51.657

检查[这个页面](http://db.apache.org/jdo/jdoql_methods.html)。这很像[这个](http://www.datanucleus.org/products/accessplatform_3_1/jdo/jdoql_methods.html)。

然后你需要类似的东西：`empIdList.contains(empId)`

`empIdList`传入的位置在哪里`List<Integer>`：`query.execute(Arrays.asList(1,2,3));`

# nagios - 如何在 nagios 上安装 mk-livestatus？

> ID：16102832
> 
> 赞同：0
> 
> 时间：2013-04-19T10:45:10.707
> 
> 标签：nagios

我正在`Check_MK`使用`Nagios`. 我在某个地方找到了 nagios 附带 mk-livestatus 但我在我的服务器上找到但我找不到它。

我们可以明确添加这个（mk-livestatus）功能吗？如果是，我该如何安装它？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T08:12:34.960

`OMD`中自动正确配置此选项`etc/mk-livestatus/nagios.cfg`。

如果您的 nagios 没有配置 OMD，您可以使用以下步骤安装 mk-livestatus：

**- 安装 mk livestatus：**

1.- 安装依赖：

```
# yum install make gcc-c++ wget 
```

2.- 下载 mk livestatus：

```
# cd /tmp && wget http://mathias-kettner.de/download/mk-livestatus-1.1.12p7.tar.gz 
```

3.- 解压包：

```
# tar -xzvf mk-livestatus-1.1.12p7.tar.gz 
```

4.- 安装：

```
# cd mk-livestatus-1.1.12p7/ && ./configure
# make && make install 
```

5.- 创建具有正确权限的新目录：

```
# mkdir /usr/lib/nagios/mk-livestatus && chown nagios:apache /usr/lib/nagios/mk-livestatus 
```

6.- 编辑 /etc/nagios/nagios.cfg ：

```
broker_module=/usr/local/lib/mk-livestatus/livestatus.o /usr/lib/nagios/mk-livestatus/live 
```

7.- 重启 Nagios：

```
# service nagios restart 
```

8.- 试试命令行：

```
# echo 'GET hosts' | unixcat /usr/lib/nagios/mk-livestatus/live 
```

有关查询语法的更多信息：

[http://mathias-kettner.de/checkmk_livestatus.html](http://mathias-kettner.de/checkmk_livestatus.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T15:11:51.153

mk_livestatus 的创建者 mathias kettner 专门为 mk_livestatus 制作了一个网站

这里是 linux 上代理的安装文档（ dpkg 或 rpm ）

[http://mathias-kettner.com/checkmk_linuxagent.html](http://mathias-kettner.com/checkmk_linuxagent.html)

# design-patterns - 在 Singleton 类中管理经理

> ID：16102834
> 
> 赞同：1
> 
> 时间：2013-04-19T10:45:15.920
> 
> 标签：design-patterns, static, singleton

我试图弄清楚这一点，看看我的想法是否正确。

我有几个经理课程。例如，一个 UserManager 和一个 PhoneManager。

因为我在将所有这些 Manager 设为静态时遇到了很多问题，所以我想知道是否可以使用“ManagerManager”来解决它。

该 ManagerManager 将是静态的，并且在创建时，它将实例化所有其他 Manager 的。因为这个单例将是唯一创建实例的人，这也意味着通过 ManagerManager 的所有调用最终都将在 Manager 的同一个实例中结束。但是，类的优点不是静态的。

这行得通吗？也欢迎提出改进建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:19:13.023

谁来管理`ManagerManager`？

说真的，`XManager`通常是糟糕的设计。而不是 a `UserManager`，为什么不拥有一个`user`对象、一个`admin`用户、一个`inactive`用户等等？

管理器对象成为所有与`X`. 您使用静态管理器的事实只会使情况变得更糟。当您有不同类型的用户或电话时怎么办？你被一个实例困住了。将物体分解成更小、更集中的物体，对这些物体的需求`ManagerManager`就会消失。

因此，要回答您的问题，如果没有更多上下文/代码，这很难，您不应该尝试这种方法。而是尝试重构您现有的代码。

# android - Android：以编程方式获取配置的企业电子邮件 ID

> ID：16102835
> 
> 赞同：1
> 
> 时间：2013-04-19T10:45:19.140
> 
> 标签：android, exchange-server, email-client

我正在使用 Android 的默认电子邮件客户端（本**机电子邮件应用程序**）来配置我的公司帐户。我正在使用 Exchange 服务器帐户。我使用 myname.pfx 文件作为身份验证模式。设置我的邮件后，我可以与我的帐户同步。

我需要获取我在设备中配置的电子邮件 ID。我可以使用**AccountManger、Account 类和一个包含我的帐户名称的字符串**来做到这一点。但问题是，电子邮件客户端也接受其他邮件 ID（比如**abc@cba.com**）并使用我的证书进行配置

此时将“ `AccountManager.get(context).getAccounts()`abc@cba.com **”**作为其返回值之一。但我需要帐户名称作为我的电子邮件应用程序同步的原始邮件 ID。

请帮我解决这个问题。

提前致谢

# wpf - 如何在样式设置器中使用 multibiding

> ID：16102841
> 
> 赞同：3
> 
> 时间：2013-04-19T10:45:39.487
> 
> 标签：wpf, c#-4.0, mvvm, multibinding

备用行样式定义为：

```
<Style TargetType="telerik:GridViewRow">
     <Setter Property="Background" Value="{Binding Color,Converter={StaticResource dataToColorConverter}}">
</Style> 
```

但我想更新对多个值的行样式依赖。我想实现这样的目标。

```
<Style>
    <Setter Property="Background" >
               <MultiBinding Converter={StaticResource  dataToColorConverter}>
               <Binding Path="Color"/>
               <Binding ElementName="myListBox" Path="SelectedItem"/>
               </MultiBinding>
    </Setter>
</Style> 
```

但收到错误“'Setter' 类型不支持直接内容。”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T10:57:43.920

由于该`Setter`元素不支持直接内容，因此您必须指定要设置`Value`属性（在 XAML 中包括“<Setter.Value>”）：

```
<Setter Property="Background" >
    <Setter.Value>
        <MultiBinding Converter="{StaticResource dataToColorConverter}" >
            <Binding Path="Color" />
            <Binding ElementName="myListBox" Path="SelectedItem" />
        </MultiBinding>
    </Setter.Value>
</Setter> 
```

# backbone.js - Backbone.history.navigate 与 IE <= 9

> ID：16102842
> 
> 赞同：1
> 
> 时间：2013-04-19T10:45:41.163
> 
> 标签：backbone.js

使用 Backbone 历史/推送状态时遇到问题 - 但仅限于不支持它的浏览器（旧 IE）

问题是这样的。当我第一次访问`/en_gb/dashboard`时 - 在所有浏览器中一切正常。但是，在 IE<=9 中，它附加`#dashboard`到地址栏，形成`/en_gb/dashboard#dashboard`. 现在，当我点击刷新时，我的路由器没有触发。

并非我的所有站点都在 Backbone 控制之下 - 所以路由器正在工作：

```
routes: {
  'dashboard': 'showDashboard'
} 
```

我的引导程序如下所示：

```
if (Backbone.history) {

  var pushStateSupported = _.isFunction(history.pushState);
  var urlRoot = '/en_gb/';
  var enableSilent = !pushStateSupported;

  Backbone.history.start({
    pushState: pushStateSupported,
    root: urlRoot,
    silent: enableSilent
  });

  if (!pushStateSupported) {
    Backbone.history.navigate(window.location.pathname.substring(urlRoot.length), { trigger: true });
  }
} 
```

添加调试，我可以看到`Backbone.history.navigate()`总是被调用，但是当哈希存在时似乎`trigger: true`没有被拾取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:22:11.560

嗯 - 我似乎已经修复了它 - 虽然不是一个优雅的解决方案，但这确实为我解决了它：

```
if (!pushStateSupported) {
    var route = window.location.pathname.substring(urlRoot.length);
    Backbone.history.navigate('/#' + route, { trigger: true });
} 
```

地址栏中的 URL 显示为`/en_gb/dashboard##dashboard`- 并不优雅，但它现在正在通过该`Backbone.navigate()`方法。以前它失败了

```
if (this.fragment === fragment) return; 
```

# css - inline-block to span 标签在 IE 和 webkit-browsers 中的行为不同

> ID：16102851
> 
> 赞同：0
> 
> 时间：2013-04-19T10:46:12.403
> 
> 标签：css, html

`display:inline-block` to `span`tag 在不同的浏览器中表现不同。在 IE 浏览器中它可以完美运行。`span`但是在 webkit-browers(Chrome, Safari, etc..) 中，和它的子标签之间有一点差距。
*这是示例代码：*

```
 <style>
       span{
         display:inline-block;
         border:1px solid red;
         padding:0px;
         margin:0px;
        }
     </style>

      <span>
          <input type="text"/>
       </span> 
```

*在不同浏览器*
**IE**
![在此处输入图像描述](https://i.stack.imgur.com/sUqbq.png)
**Chrome 和 Safari中输出**
![在此处输入图像描述](https://i.stack.imgur.com/6WRxa.png)

看到跨度和输入字段之间有差距......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:51:06.090

你应该使用这个选择器，因为边距在跨度和输入之间，而不仅仅是跨度，所以你需要定位`input`元素而不是`span`元素

```
span input {
    margin:0px;
} 
```

[**演示**](http://jsfiddle.net/LNFB7/1/)

# winapi - Win32 函数 ExpandEnvironmentStrings 如何以零返回值失败？

> ID：16102852
> 
> 赞同：1
> 
> 时间：2013-04-19T10:46:19.947
> 
> 标签：winapi, visual-c++, environment-variables, getlasterror

[ExpandEnvironmentStrings](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724265%28v=vs.110%29.aspx)的文档说：

> 如果函数失败，则返回值为零。要获取扩展的错误信息，请调用`GetLastError`。

但是，我无法生成函数将返回零的测试用例。

```
DWORD WINAPI ExpandEnvironmentStrings(
  _In_       LPCTSTR lpSrc,
  _Out_opt_  LPTSTR lpDst,
  _In_       DWORD nSize
); 
```

如果其中任何一个指针为 NULL，它只会崩溃，并且 size 参数不会产生任何错误（如果它太小，则该函数返回所需的大小）。

那么是否有任何已知情况下此函数将返回零并执行 SetLastError？

# iphone - 获取网页图片

> ID：16102853
> 
> 赞同：1
> 
> 时间：2013-04-19T10:46:22.737
> 
> 标签：iphone, ios, objective-c, ios5, ios4

我正在尝试捕获网页的完整图像..但它显示的是空白图像..

我应该怎么做才能获得完整的网页图像？

我试过了

```
CGSize overallSize = [WebPageImage sizeThatFits:CGSizeZero];
UIGraphicsBeginImageContext(WebPageImage.scrollView.contentSize);
WebPageImage.bounds = CGRectMake(0, 0, overallSize.width, overallSize.height);
while (WebPageImage.loading) {
    [NSThread sleepForTimeInterval:0.1];
}
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,(unsigned long)NULL), ^(void) {
    UIImageWriteToSavedPhotosAlbum(viewImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
}); 
```

请提出一些解决方案.. WebPageImage 是 UIWebView..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:53:44.463

```
UIGraphicsBeginImageContextWithOptions(WebPageImage.bounds.size, WebPageImage.opaque, 0.0);
[WebPageImage.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T05:07:52.020

根据您的需要使用此功能。下面的代码将为您提供整个网页的快照

```
- (UIImage *) imageFromWebView:(UIWebView *)view
{
//    tempframe to reset view size after image was created
    CGRect tmpFrame     = view.frame;

    // set new Frame
    CGRect aFrame       = view.frame;
    aFrame.size.height  = [view sizeThatFits:[[UIScreen mainScreen] bounds].size].height;
    aFrame.size.width   = [view sizeThatFits:[[UIScreen mainScreen] bounds].size].width;
    view.frame          = aFrame;

//     do image magic
    UIGraphicsBeginImageContext([view sizeThatFits:[[UIScreen mainScreen] bounds].size]);
    CGContextRef resizedContext = UIGraphicsGetCurrentContext();
    [self.thmbWebView.layer renderInContext:resizedContext];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // reset Frame of view to origin
    view.frame = tmpFrame;
    return image;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:54:13.447

尝试这个：

```
[WebPageImage.layer renderInContext:UIGraphicsGetCurrentContext()];
image = UIGraphicsGetImageFromCurrentImageContext(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T11:07:26.147

尝试用我的波纹管方法捕获该图像...

```
-(IBAction)captureScreen:(id)sender
{   
    UIGraphicsBeginImageContext(webview.frame.size);
    [webview.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);
} 
```

另请参阅此链接中的另一个答案.. [howe-to-capture-uiview-top-uiview](https://stackoverflow.com/questions/14049796/howe-to-capture-uiview-top-uiview/14049828#14049862)

# jquery - Plupload - 同时上传多张图片

> ID：16102875
> 
> 赞同：0
> 
> 时间：2013-04-19T10:48:10.883
> 
> 标签：jquery, asp.net, asp.net-mvc-4, plupload

我在我的网站（asp.net）中使用了 plupload 图片上传插件，我修改了 plupload 插件以同时上传多张图片。

旧代码

```
function t() {
        var x, y = 0, w;
        if (this.state == g.STARTED) {
            for (w = 0; w < u.length; w++) {                    
                if (!x && u[w].status == g.QUEUED) {
                    x = u[w];
                    x.status = g.UPLOADING;
                    if (this.trigger("BeforeUpload", x)) {
                        this.trigger("UploadFile", x)
                    }
                }
                else {
                    y++
                }                    
            }
            if (y == u.length) {
                this.stop();
                this.trigger("UploadComplete", u)
            }
        }
    } 
```

我已经修改`if (!x && u[w].status == g.QUEUED) {`为`if (u[w].status == g.QUEUED) {`（`!x`从 if 条件中删除）并且它正在同时上传多个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:10:38.890

您可以用于选择多个文件进行上传。

```
<input id="File1" multiple="multiple" type="file" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:10:43.883

来自 plupload 维护者之一（Davit）的“Plupload 在编写时并未考虑同时上传”；[他们正在 plupload 2 中考虑它。您可以在此处](http://www.plupload.com/punbb/viewtopic.php?id=3423)跟进讨论现在，如果您想一键上传所有内容..您可以在 plupload 参数中将 multi_selection 设置为 true 为：

```
 $("#uploaderdiv").plupload({
        runtimes: 'html5,flash,silverlight',
        multi_selection: true,
        multipart: true, 
```

希望这可以帮助...

# jquery - Adjust TD height depending on textarea rows

> ID：16102880
> 
> 赞同：3
> 
> 时间：2013-04-19T10:48:35.143
> 
> 标签：jquery, textarea, html-table

I have a textarea with `rows="1"` inside a `<td>`, so it takes up as little space as possible when empty.

Now I was wondering, how would I best "expand" the textarea when the user presses the enter key?

I have put up a very simple [jsfiddle](http://jsfiddle.net/zdjsU/) to test the idea. Unfortunately I am not very good with jsfiddle, so I did not know how (or if) is it possible to use `.on()` or other event listeners, so I have simply put up a one-time update that runs when the jsfiddle is ran.

So far it works, but I was wondering if there's a better/more efficient way to do it.

PS to call the function I was thinking to use `keypress` and then this code found [here](https://stackoverflow.com/questions/302122/jquery-event-keypress-which-key-was-pressed) on SO

```
var code = (e.keyCode ? e.keyCode : e.which);
if(code == 13) { //Enter keycode
  //expand()
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:53:38.333

Try this:

```
$('.expand').on('keypress', function (e) {

    var code = (e.keyCode ? e.keyCode : e.which);
    if (code == 13) {
        // Enter pressed... do anything here...
        var rows = $(this).attr('rows');
        var rowsNew = parseInt(rows) + 1;
        $(this).attr('rows', rowsNew);
    }
}); 
```

[**DEMO HERE**](http://jsfiddle.net/zdjsU/2/)

# c++ - 为什么 gcc 构建的 Mingw 端口中有两个 bin 文件夹？

> ID：16102884
> 
> 赞同：0
> 
> 时间：2013-04-19T10:49:04.570
> 
> 标签：c++, gcc, mingw

我最近尝试下载最新版本的 gcc for windows，当我从这个链接（dawrf 版本）下载最新版本时：[x32-4.8.0-release-posix-dwarf-rev1.7z](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.8.0/32-bit/threads-posix/dwarf/) 我注意到有两个 bin 目录.

```
1.bin
2.i686-w64-mingw32\bin 
```

这两个文件夹之间有什么区别，我应该将哪个文件夹引入 IDE（例如 CodeBlocks ）以便启动和运行？
为什么首先已经有两个文件夹了！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:18:44.740

这是因为 GCC/binutils 的工作方式。子目录中的可执行文件`<target>\bin`仅供编译器内部使用。这不应该在`PATH`.

顶层`bin`目录中的可执行文件是您需要使用的，它们依次调用真正的编译器并可能调用子目录中的可执行文件。

我同意这样做很愚蠢，但我认为在不久的将来不会改变这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:59:26.197

bin 文件夹是我用来设置 IDE 的文件夹。我不知道为什么有 2 个文件夹，第二个 bin 文件夹的路径对我来说似乎是一个交叉编译器。

# ios - 如何使我的单例类可扩展？

> ID：16102888
> 
> 赞同：4
> 
> 时间：2013-04-19T10:49:14.203
> 
> 标签：ios, objective-c, singleton

我们的一个静态库中有一个单例类。它是一个单例，因为我们希望能够始终“记住”它的状态。本质上它是一个用户管理单例。

它有一个属性`User *user`，它有诸如`- (void)authenticateUser`.

我们希望将此交付给想要创建自己的`- (void)authenticateUser`方法的客户。为此，我设想他们将扩展`UserManager`类并覆盖该方法。

然而，由于它是一个单例，它有如下方法：`- (id)sharedInstance`和一个自定义`alloc`方法。它们看起来都是这样的：

```
static UserManager *_sharedInstance = nil;

+ (id)sharedInstance {
    @synchronized([UserManager class]) {
        if(!_sharedInstance){
            id temp = [[self alloc] init];
            [temp class];
        }
        return _sharedInstance;
    }
    return nil;
}

+ (id)alloc {
    @synchronized([UserManager class]) {
        NSAssert(_sharedInstance == nil, @"Attempted to allocate a second instance of a singleton");
        _sharedInstance = [super alloc];
        return _sharedInstance;
    }
    return nil;
} 
```

因此，鉴于此，是否可以继承和扩展此类`UserManager`？我可以创建一个`ChildUserManager`覆盖函数的函数吗？还是我必须重写这些单例方法来处理“新”子类？

有什么方法可以修改这些方法以使第 3 方可以轻松扩展此类？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:13:48.500

更好的单例模式：

```
// UserManager.h

#import <Foundation/Foundation.h>

@interface UserManager : NSObject

+(instancetype)sharedInstance;

// clue for improper use (produces compile time error)
+(instancetype) alloc __attribute__((unavailable("alloc not available, call sharedInstance instead")));
-(instancetype) init  __attribute__((unavailable("init not available, call sharedInstance instead")));
+(instancetype) new   __attribute__((unavailable("new not available, call sharedInstance instead")));

@end

// UserManager.m

#import "UserManager.h"

@implementation UserManager

+(instancetype) sharedInstance {
    static dispatch_once_t pred;
    static id shared = nil;
    dispatch_once(&pred, ^{
        shared = [[super alloc] initUniqueInstance];
    });
    return shared;
}

-(instancetype) initUniqueInstance {
    return [super init];
}

@end 
```

如果您子类化，则单个实例将设置为首先调用的任何内容，例如：

```
[Animal sharedInstance];    // instance set to Animal
[[Cow sharedInstance] moo]; // unknown selector 'moo' because the instance is Animal 
```

仅此一项就可以了：

```
[[Cow sharedInstance]moo]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:22:31.223

更好的设计是使用组合然后继承。声明一个协议 AuthenticationDelegate

```
@protocol AuthenticationDelegate
@optional
-(void) authenticateUser:(User*)inUser;
@end 
```

在 UserManager 中有一个默认指向 UserManager 的属性。

```
@class UserManager : NSObject <AuthenticationDelegate> {
    ......
} 

@property (assign) id<AuthenticationDelegate>  authenticator

+ (id)sharedInstance; 
```

您的客户如果想通过他们的方法进行身份验证，那么他们必须向 AuthenticationDelegate 协议确认自己并实现其方法。他们必须将身份验证器属性设置为限制为 . 然而它的单例。所以他们可以在他们的对象被实例化后立即设置它。因此他们可以使用他们的 Authenticator。

但是要确保验证器指向 nil。您可以实现 setAuthenticator: 方法，以便在客户端将其设置为 nil 时，验证器将指向 UserManager。

```
static UserManager *_sharedInstance = nil;

@implementation UserManager

@synthasize authenticator;

+ (id)sharedInstance {
    @synchronized([UserManager class]) {
        if(!_sharedInstance){
            id temp = [[self alloc] init];
            [temp class];
        }
        return _sharedInstance;
    }
    return nil;
}

+ (id)alloc {
    @synchronized([UserManager class]) {
        NSAssert(_sharedInstance == nil, @"Attempted to allocate a second instance of a     singleton");
        _sharedInstance = [super alloc];
        return _sharedInstance;
    }
    return nil;
}

-(void)init {
    self = [super init];
    if (self) {
        self.authenticator = nil;
    }
}

-(void)setAuthenticator:(id<AuthenticationDelegate>)inAuthenticator {
    if (!inAuthenticator) {
        __authenticator = self;
    } else {
        __authenticator = inAuthenticator;
    }
}

#pragma mark - AuthenticationDelegate

-(void) authenticateUser:(User*)inUser
{
    // Your Authentication Code.
} 
```

希望这可以帮助...

# java - 找不到符号说未找到已实现的接口

> ID：16102893
> 
> 赞同：-2
> 
> 时间：2013-04-19T10:49:27.290
> 
> 标签：java

我开发了一个名为 Printable 的非常基本的 Java 接口（代码 1.）和一个名为 HighPrint（代码 2）的 Java 类，它实现了 Printable 接口并覆盖了相关方法。在名为 Printable.java 的源文件中开发的接口和在源文件 HighPrint.java 中开发的类。我成功编译了 Printable.java。但是当我尝试编译 HighPrint.java 时，它会给出如下编译错误。

```
ERROR
======
java:2:cannot find symbol 
symbol:class Printable
public class HighPrint implements Printable {
                              ^ 
```

以下显示代码

```
//Code 1 

package printing;

interface Printable{
  public void print(String val);
}

//Code 2

package printing;
import printing.Printable;
public class HighPrint implements Printable {
  public void printX(){
    System.out.print("X");
  }
} 
```

请注意，我使用的是 windows 7 64 位操作系统、jre 7、jdk 1.6.0_23 和 java update 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T10:52:54.423

一些东西：

1.  正确设置类路径，以便编译器可以查看和编译所有类
2.  您必须`override`在`interface`

**工作示例：**

```
package printing;

interface Printable {
    public void print(String val);
}

package printing;

public class HighPrint implements Printable {

    @Override
    public void print(String val) {
        System.out.print("X");

    }
} 
```

# matlab - 在 matlab r2012a 中使用 qsub 提交作业

> ID：16102898
> 
> 赞同：0
> 
> 时间：2013-04-19T10:49:43.320
> 
> 标签：matlab, qsub, parfor

我正在运行一个代码，其中包含一个循环，我在其中拆分任务并使用**qsub**作为不同的作业发送它。例如，我打电话给：

```
function searchweights()
    startup
    distrJobs('UseMAR',false);
    distrJobs('UseMAR',true);
  end;
  function distrJobs(varargin)
    fprintf('entered distrJobs');
    UseMAR = false;
    w = {[0,3.^(-9:0)],[0,2.^(-7:1)]}; % grids
    for i = 1:2:numel(varargin)
      if strcmp(varargin{i},'wgrid'), w = varargin{i+1}; end
      if strcmp(varargin{i},'UseMAR'), UseMAR = varargin{i+1}; end
    end
    fprintf(' get cross validation accuracy for each grid point');
    [w1,w2] = ndgrid(w{1},w{2});
    n = numel(w1);
    for i = 1%:n
    command = sprintf('qsub  optionFile "crossvalid([%f,%f],''Xpred.mat'',''/data5/natraj/SWeight/SWeight_%d_%d.mat'',%d)"', w1(i), w2(i), UseMAR, i, UseMAR) 
    system(command);
    end;
  end; 
```

我的交叉有效函数如下：

```
 function crossvalid(w,infile,outfile, UseMAR)
            startup
            load(infile);
            [A,R] = sbu.ClothParser.cross_validation(X, 'weights',[w(1),w(2)], 'UseMAR', UseMAR);
            save( outfile, 'A', 'R');
          end; 
```

但是在我运行我的 searchweights 函数之后，qsub 命令似乎根本没有运行，即它没有进入“crossvalid”函数。它在错误文件中给出了这个错误：/data5/natraj/matlab2012a/bin/matlab: No match。

*（/data5/natraj/matlab2012a/bin/matlab 是我的 matlab 可执行文件）

我没有得到真正导致此错误的原因，我该如何排除？

操作系统是Linux。

编辑：问题似乎出在 qsub 上。当我使用 parfor 运行相同的 for 循环时，它正在运行。

# android - android 中 480x800 和 1024x600 的哪个可绘制文件夹？

> ID：16102899
> 
> 赞同：0
> 
> 时间：2013-04-19T10:49:43.583
> 
> 标签：android, drawable

我正在制作一个适用于多个平板电脑屏幕的应用程序。我已经做了类似的东西......

```
1\. i have make a folder named : layout-sw600dp for 1024 x 600 resolution which takes image from drawable-large folder. 

2\.  i have make a folder named : layout-sw720dp for 1280 x 800 resolution which takes image from drawable-xlarge folder. 
```

现在我想以 480x800 的分辨率制作它，所以我的问题是我应该把我的 xml 文件放在哪个文件夹中，我应该把我的图像放在哪个文件夹中？

请帮助我......提前谢谢你......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:51:58.687

将所有 xml 文件放在`layout-large`文件夹中，并将图像放在`drawable-hdpi`文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:09:14.600

检查这个

设备定义

1）首先点击Android {虚拟设备管理器}然后点击设备定义并检查分辨率和潜水文件夹名称layout-hdpi，你会在Eclipse上看到类似的屏幕

# c# - 将 Windows 数据类型映射到 .NET

> ID：16102905
> 
> 赞同：0
> 
> 时间：2013-04-19T10:49:54.100
> 
> 标签：c#, c++, .net, winapi, types

我一直在查看[Windows 数据类型](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa383751%28v=vs.85%29.aspx)列表，因为我试图弄清楚每种类型如何映射到它的等效 .NET 类型。

我注意到一些类型定义被#if 标签包围，这会根据平台更改它们的定义。

例如，这里是定义`INT_PTR`

```
#if defined(_WIN64) 
 typedef __int64 INT_PTR; 
#else 
 typedef int INT_PTR;
#endif 
```

我的理解是，这会在 64`INT_PTR`位机器上创建 64 位，`INT_PTR`在 32 位机器上创建 32 位。好的....NET 在这方面做同样的事情，`IntPtr`并且`UIntPtr`是特定于平台的，因此适应 32 位和 64 位机器。

现在，让我们考虑`LONGLONG`

```
#if !defined(_M_IX86)
 typedef __int64 LONGLONG; 
#else
 typedef double LONGLONG;
#endif 
```

所以在.NET中我的假设是这映射到`Int64`( `long`) ？

另外，考虑`TCHAR`

```
#ifdef UNICODE
 typedef WCHAR TCHAR;
#else
 typedef char TCHAR;
#endif 
```

我的假设是这映射到 char （因为 .NET 的 char 无论如何都是 unicode）？

**问题：**

1.  如果本机类型依赖于平台，它的 .NET 等效项是否应该是两个定义中较大的一个？
2.  映射数据类型时是否有任何已知的陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:11:40.277

查看[平台调用数据类型](http://msdn.microsoft.com/en-us/library/ac7ay120.aspx)。

映射数据类型时有很多陷阱。例如，Windows 数据类型`BOOL`和`Boolean`. `Boolean`.NET数据类型 (C# )的默认封送处理`bool`会将其封送为 32 位整数以匹配 Windows`BOOL`类型。Windows`Boolean`数据类型是一个字节。如果要将 C#`bool`传递给 Windows `Boolean`，则必须指定自定义封送处理。

结构打包可能会让您感到困惑，并且编组数组可能非常棘手，尤其是结构内部的数组。

您一定要非常仔细地阅读[Marshaling Data with Platform Invoke 。](http://msdn.microsoft.com/en-us/library/fzhhdwae.aspx)

# angularjs - 如何查看 Testacular/AngularJS 测试的错误

> ID：16102910
> 
> 赞同：0
> 
> 时间：2013-04-19T10:50:16.867
> 
> 标签：angularjs, jasmine, karma-runner

我继承了 AngularJS/Testacular/Jasmine 单元测试套件，并且难以确定如何运行测试并查看任何相关的失败消息。也就是说，我可以轻松地运行所有测试，我可以做一些类似`ddescribe`运行一个测试的事情，我可以看到它失败了。但现在我无法确定它失败的原因。

我已经安装了 Firebug，可以看到 console.log 语句，但看不到 JavaScript 错误（我认为这是一个 JS 错误，因为它突然结束了）。我还看到了 Testacular 的“debug.html”端点，但我不知道如何使用它。

如何查看可能导致测试失败的 JavaScript 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:33:27.027

我不熟悉 firebug，但如果您能够捕获 Chrome 浏览器，则可以打开开发者控制台（工具 -> JavaScript 控制台）并在那里查看错误。您可以在打开 javascript 控制台时设置断点，方法是：

```
debugger; 
```

在你的代码中。下次运行测试时，Chrome 将在该行暂停，您可以使用控制台检查变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:23:10.357

我正在使用 Karma 版本 0.8.4

不确定这是否是最好的方法，但我通常在 CI 模式下运行 Karma 时[捕获浏览器。](http://karma-runner.github.io/0.8/config/browsers.html)

然后我可以单击`Debug`打开的浏览器窗口上的按钮以单页模式运行 Jasmine。如果按钮不可用/不可见，则该文件托管在`http://localhost:9876/debug.html`并且可以直接访问。`Debug`

![](https://i.imgur.com/o9Szmxm.png)

偷看那里的控制台告诉我我的脚本有什么错误。有时我必须这样做，因为我使用的是 RequireJS 并且缺少依赖项只会导致：

> 未捕获的错误：脚本错误 [http://requirejs.org/docs/errors.html#scripterror](http://requirejs.org/docs/errors.html#scripterror)

附带说明：考虑使用[JSHint](http://www.jshint.com/install/)来避免常见的 JS 语法错误。

# jsp - 如何在 EL 中对布尔条件进行分组

> ID：16102911
> 
> 赞同：1
> 
> 时间：2013-04-19T10:50:17.987
> 
> 标签：jsp, jsf, boolean, el

我无法使用 EL 在 JSF 中评估一对布尔表达式。

这是我的片段：

```
<a4j:commandButton id="addbtn" value="Add School(s)"
  action="#{somebean.someaction}"                       
  disabled="#{not studentRecords.isValid and not studentRecords.schoolSelected}">
</a4j:commandButton> 
```

isValid 和 schoolSelected 将返回布尔结果，无论是真还是假。但是当我用'and'运算符连接这两个时它不起作用。

我试着把

```
!studentRecords.isValid and !studentRecords.schoolSelected 
```

但这也行不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:32:35.317

只要正确编写了 setter 和 getter，EL 表达式就会自动确定正确的托管 bean 属性。

## 非布尔托管 Bean 属性

**托管豆：**

```
private Long studentRecordNumber;

public Long getStudentRecordNumber() {
  return this.studentRecordNumber;
}

public void setStudentRecordNumber(Long studentRecordNumber) {
  this.studentRecordNumber = studentRecordNumber;
} 
```

**JSF 标记**

```
rednered="#{studentRecords.studentRecordNumber ne null}" 
```

## 布尔托管 Bean 属性

**托管豆：**

```
private boolean valid;

public boolean isValid() {
  return this.valid;
}

public void setValid(boolean valid) {
  this.valid = valid;
} 
```

**JSF 标记**

```
rendered="#{not studentRecords.valid and not studentRecords.schoolSelected}" 
```

然而，EL 表达式也可用于直接评估布尔方法的返回结果，但必须使用方法括号。

```
rendered="#{studentRecords.canStudentEnrollToday()}" 
```

# javascript - 此模板引擎不支持其模板中的“if”绑定

> ID：16102915
> 
> 赞同：3
> 
> 时间：2013-04-19T10:50:25.197
> 
> 标签：javascript, knockout.js

在下面的代码中，当我添加`'if' to the bind`

这是可修复的，因为我只希望它在可见时绑定？

谢谢

```
<script id="friendsTemplate" type="text/html">

        <li>
            <input data-bind="value : name" />
            <button data-bind="click: remove">Remove</button>

            <label><input type="checkbox" data-bind="checked : isOnTwitter" /> is on twitter</label>
            <input data-bind="if:isOnTwitter, value:twitterName" />

        </li>

</script> 
```

* * *

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
<%--    <script src="Scripts/knockout-2.2.1.js"></script>--%>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="https://raw.github.com/jquery/jquery-tmpl/master/jquery.tmpl.js"></script>
    <script src="Scripts/knockout-2.2.1.js"></script>

</head>
<body>

    <form id="form1" runat="server">
    <div>

        <h1>details</h1>

        <p>first name: <input data-bind="value: firstName" /></p>
        <p>last name: <input data-bind="value: lastName" /></p>

        <p>full name: <span data-bind ="text: fullName"></span></p>

        <h2>friends</h2>

        <ul data-bind="template: {name:'friendsTemplate',foreach:friends}"></ul>

        <script id="friendsTemplate" type="text/html">

                <li>
                    <input data-bind="value : name" />
                    <button data-bind="click: remove">Remove</button>

                    <label><input type="checkbox" data-bind="checked : isOnTwitter" /> is on twitter</label>
<%--                    <input data-bind="value:twitterName,visible: isOnTwitter" />--%>
                    <input data-bind="if:isOnTwitter, value:twitterName" />

                </li>

        </script>

        <button data-bind="click: addFriend">add friend</button>

    </div>
    </form>
</body>
</html>

<script type ="text/javascript">

    function friend(name) {
        return {
            name: ko.observable(name),
            isOnTwitter: ko.observable(false),
            twitterName: ko.observable(),
            remove: function () {
                viewModel.friends.remove(this);
            }
        };
    }

    var viewModel ={
        firstName: ko.observable("bert"),
        lastName: ko.observable("smith"),
        friends: ko.observableArray([new friend('steve'), new friend('annie')]),
        addFriend: function () {
            this.friends.push(new friend('bob'));
        }
    };

    viewModel.fullName = ko.dependentObservable(function () {
        return this.firstName() + " " + this.lastName();
    },viewModel);

    ko.applyBindings(viewModel);

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:46:23.303

The `if` binding needs to be placed on a container. It only controls the binding/rendering of its children.

You would want to do something like:

```
<div data-bind="if: isOnTwitter">
   <input data-bind="value: twitterName" />
</div> 
```

or

```
<!-- ko if: isOnTwitter -->
   <input data-bind="value: twitterName" />
<!-- /ko --> 
```

# visual-studio-2012 - Visual Studio 2012 中的快速切换启动项目

> ID：16102922
> 
> 赞同：6
> 
> 时间：2013-04-19T10:50:45.330
> 
> 标签：visual-studio-2012, projects-and-solutions

在我的应用程序中，我经常需要将启动项目从 UI shell 更改为测试，反之亦然。

我知道通过使用解决方案资源管理器中的上下文菜单，我可以右键单击并选择一个项目作为启动项目。但是，我的解决方案中有很多项目，这很耗时。

在 VS 2010 中，我有宏来执行此操作，但现在它们已被删除。

问题是：**在VS2012中，有没有比找到它们并使用右键菜单更快的切换启动项目的方法？**我会接受任何答案（扩展、脚本等）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-01T17:02:54.170

为此，我创建了[VS 扩展 SwitchStartupProject](http://visualstudiogallery.msdn.microsoft.com/f4e1be8c-b2dd-4dec-b273-dd88f8818571)，它添加了一个工具栏下拉框来切换启动项目。

# java - 解析 XML 文件的内部标签

> ID：16102933
> 
> 赞同：0
> 
> 时间：2013-04-19T10:51:13.647
> 
> 标签：java, xml, sax, saxparser

我需要解析 XML 文件以获取 xml 文件中存在的标签的值。我已经完成了部分工作，并且卡在了中间。我的 xml 文件如下，（示例 xml 文件）

```
<?xml version="1.0" encoding="UTF-8"?>
<database>
<student name="abc">
<phone>6879987</phone>
<dept>eee</dept>
<college>act</college>
<semester>
<year>2</year>
<no.of.sub>7</no.of.sub>
</semester>
<hostel>
<year>3</year>
<block>d4</block>
</hostel>
</student>
<student name="ram">
<phone>65464</phone>
<dept>cse</dept>
<college>Mit</college>
<semester>
<year>4</year>
<no.of.sub>5</no.of.sub>
</semester>
<hostel>
<year>5</year
<block>y4</block>
</hostel>
</student> 
</database> 
```

我的实现如下，

```
 public class MySaxParser extends DefaultHandler  {
   private String temp;
   private ArrayList<Account> accList = new ArrayList<Account>();
   private Account acct;

   public static void main(String[] args) throws IOException, SAXException,
                 ParserConfigurationException {

          SAXParserFactory spfac = SAXParserFactory.newInstance();

          SAXParser sp = spfac.newSAXParser();

          MySaxParser handler = new MySaxParser();

          sp.parse("test.xml", handler);

          handler.readList();

   }

   @Override
   public void characters(char[] buffer, int start, int length) {
          temp = new String(buffer, start, length);
   }

   @Override
   public void startElement(String uri, String localName,
                 String qName, Attributes attributes) throws SAXException {
          temp = "";
          if (qName.equalsIgnoreCase("Student")) {
                 acct = new Account();
                 //acct.setType(attributes.getValue("type"));

          }
   }

   @override
   public void endElement(String uri, String localName, String qName)
                 throws SAXException {

          if (qName.equalsIgnoreCase("Student")) {
                 // add it to the list
                 accList.add(acct);

          } else if (qName.equalsIgnoreCase("phone")) {
                 acct.setphone(temp);
          } else if (qName.equalsIgnoreCase("dept")) {
                 acct.setdept((temp));
          } else if (qName.equalsIgnoreCase("College")) {
                 acct.setcollege(temp);

          }
   }

   private void readList() {

          Iterator<Account> it = accList.iterator();
          while (it.hasNext()) {
                 System.out.println(it.next().toString());
          }
   }

 } 
```

我可以解析 phone, dept college 的值。但是年标签是学期和宿舍的子标签。我需要同时获得年份值。当我简单地使用时，

```
 else if (qName.equalsIgnoreCase("year")) {
    acct.setyear(temp); 
```

只有宿舍的年份值被打印跳过学期。1）我如何解析这些子标签。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:56:36.697

是的，那是因为宿舍标签是在学期之后出现的。因此，您最终总是拥有最新的标签。如果你想打印两者，你可以使用一些布尔标志，比如 isSemester 和 isHotel 并在遇到时设置它们。然后当您遇到年份时，检查这些标志并查看“当前年份”与哪个相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:51:39.753

示例 xml 文件，

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <Issue>
    <Primary>
    <Section>      
             String a=null;
             if(a==null) hi;);
             else bye;;
              }
    </Section>
    </Primary>
    <Source>
    <Section>
              String a="sbi";
              if(a==null) hi;);
               else bye;;
    </Section>
    </Source>
    </Issue> 
```

我需要获取 section 标签中的所有字符。我的实现如下，

```
 public void endElement(String uri, String localName, String qName)
             throws SAXException {

      if (qName.equalsIgnoreCase("Issue")) {

             accList.add(acct);

      }
      if (qName.equalsIgnoreCase("Primary")) {

            this.isPrimary=false;

      }
      if (qName.equalsIgnoreCase("Source")) {
             this.isSource=false;

      }

    else if(qName.equalsIgnoreCase("section")&&isPrimary)
           {
               acct.setPrimarySnippet(temp);
           }
          else if(qName.equalsIgnoreCase("Section")&&isSource)
           {
               acct.setSourceSnippet(temp);
           } 
```

o/p 是：否则再见；；},

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T10:58:52.430

您需要一种方法来“记住”您是否输入了`hostel`标签。最简单的方法是在内部执行以下操作`startElement`：

```
 if (qName.equalsIgnoreCase("hostel")) {
     this.insideHostel = true;
 } 
```

并在`endElement`：

```
 if (qName.equalsIgnoreCase("hostel")) {
     this.insideHostel = false;
 } 
```

现在你可以这样做：

```
 } else if (qName.equalsIgnoreCase("year") && insideHostel) {
     acct.setyear(temp); 
 } 
```

# javascript - ListItem 中的 dojox.mobile 开关

> ID：16102935
> 
> 赞同：0
> 
> 时间：2013-04-19T10:51:17.363
> 
> 标签：javascript, dojo, dojox.mobile

我对 dojo 很陌生，并试图弄清楚如何以编程方式而不是声明方式做某事。我可以轻松地创建一个 dojox.mobile.RoundRectList 包含一个 dojox.mobile.ListItem 本身包含一个 dojox.mobile.switch 声明，例如

```
<ul data-dojo-type="dojox.mobile.RoundRectList">
<li data-dojo-type="dojox.mobile.ListItem" data-dojo-props="icon:'../../app/images/i-icon-1.png'">
    Airplane Mode
    <div class="mblItemSwitch" data-dojo-type="dojox.mobile.Switch"></div>
</li> 
```

这是来自这里的入门指南：http: [//dojotoolkit.org/documentation/tutorials/1.8/mobile/tweetview/getting_started/demo/](http://dojotoolkit.org/documentation/tutorials/1.8/mobile/tweetview/getting_started/demo/)

我想要做的是动态生成列表项，每个列表项都有自己的动态生成的按钮。下面的代码就是这样做的（'list' 是我之前在代码中创建的对象数组，'ListElement' 是一个以声明方式放置的 dojox.mobile.RoundRectList）：

```
var listObj = dijit.byId("ListElement");
for (var n = 0; n < list.length; n++) {

    var item = new dojox.mobile.ListItem({
        id: "item" + list[n].ID,
        label: list[n].Name
    });

    var sw = new dojox.mobile.Switch({
        className: "mblItemSwitch"
    });
    item.addChild(sw);

    listObj.addChild(item);

} 
```

但是，与开关放置在列表项右侧的声明性示例不同，开关只是放置在左侧并覆盖文本。

谁能建议我如何正确放置开关？我已经准备好接受有一种更好的方法来完全做到这一点（因为我对 dojo 还是很陌生），但我还没有找到一个例子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:29:21.650

可能是第一次，但我自己找到了答案。看起来我抄袭这个的例子要么是错误的，要么是在稍微不同的上下文中。而不是在声明开关时使用 className 它应该只是类。例如

```
 var sw = new dojox.mobile.Switch({
        class: "mblItemSwitch"
    }); 
```

然后，该开关将显示正确格式并向右对齐。

# android - android billing v3 - onActivityResult 未被调用

> ID：16102937
> 
> 赞同：3
> 
> 时间：2013-04-19T10:51:19.130
> 
> 标签：android, android-intent, in-app-purchase, google-play, in-app-billing

尝试购买产品时它可以工作（当我重新启动我的应用程序并在 iab 中查询购买的产品时，它被视为已购买）。

问题是，用户在市场中点击购买 gui 后`onActivityResult()` **不会被调用**。使用测试帐户的我自己的产品会发生这种情况，静态响应 android.test.purchased 也会发生这种情况。

而是出现以下**错误消息**：

> 错误/Finsky(1374): [1] IntentUtils.createIntentForReceiver: 找不到 com.ludocrazy.artisan 的接收器

**问题**：我该怎么做才能正确转发意图？我似乎错过了文档中的某些内容 - 但我认为已经多次检查了所有内容。

购买我使用以下内容：

```
PendingIntent pendingIntent = buyIntentBundle.getParcelable("BUY_INTENT");
activity.startIntentSenderForResult(pendingIntent.getIntentSender(), myRequestCode, new Intent(), Integer.valueOf(0), Integer.valueOf(0), Integer.valueOf(0)); 
```

**TL; DR**：基本上发生了什么：发送 BUY_INTENT 有效，购买流程（用户 gui）和一切正常，但 finsky 找不到我的活动，因此 onActivityResult() 没有被调用。

* * *

**附录**：如果我添加一个扩展广播接收器的类，将适当的意图过滤器添加到清单中，然后错误消失并且我在 BroadcastReceiver.onReceive() 上得到一个 ACTION_NOTY。但这仅包含额外字符串 NOTIFICATION_ID，没有任何其他内容应该与意图一起出现以便 onActivityResult() 处理购买（例如额外内容：RESPONSE_CODE、INAPP_PURCHASE_DATA、INAPP_DATA_SIGNATURE）。所以这不是解决方法。

我查看了 IABv3 中的 TrivialDriveSample，阅读了 IabHelper 和其他实用程序类，阅读了谷歌文档，遵循了所有测试步骤。我不知道还有什么 tro 尝试/检查：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:21:47.480

就我而言，问题与这篇文章有关：

[Android Activity 在不应该被销毁时被销毁](https://stackoverflow.com/questions/15761982/android-activity-destroyed-when-it-shouldnt-be)

基本上，主要活动被完全破坏以释放资源（在应用内计费视图期间），因此永远不会调用 onActivityResult() ......一种可能的解决方案可能是正确保存活动的状态，创建另一个“轻”活动，这将实际上负责记帐（通过 Intent 传递 sku），然后重新启动主要活动。同样，这一切都假设您有同样的问题并且您的主要活动被破坏了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T01:15:39.587

我对这个问题的小问题是使用否定的`requestCode`，这会破坏结果调度机制。

# c# - 如何通过 c# 中的 SelectionChanged 方法中的按钮为 Windows 8 应用程序更改 Uri？

> ID：16102941
> 
> 赞同：0
> 
> 时间：2013-04-19T10:51:34.870
> 
> 标签：c#, button, windows-8, webview, selectionchanged

我用 c# 为 windows 8 开发了一个游戏指南应用程序。我试图将 2 个 youtube 视频放在游戏的特定章节中，我想通过一个按钮更改 Webview 的 Uri。当未按下按钮时，将显示第一个视频 uri，当按下按钮时，将显示**第二**个视频。我怎样才能做到这一点？例如：

```
 private void Chapters_SelectionChanged(object sender, Windows.UI.Xaml.Controls.SelectionChangedEventArgs e)
    {           
        switch (Chapters.SelectedIndex)
        { 
            case 0:

                Chapter2C.Visibility = Visibility.Visible;
                Chapter2T.Visibility = Visibility.Visible;
                next_but.Visibility = Visibility.Visible;
                prev_but.Visibility = Visibility.Visible;
                Mywebview.Visibility = Visibility.Visible;
                if (next_button.Clicked)
                 {
                    Mywebview.Source = new Uri("http://www.youtube.com/embed/F65paVQ0wn8?feature=player_detailpage") 
                 }
                   else 
                 {
                    Mywebview.Source = new Uri ("http://www.youtube.com/embed/rLdrc7K5vdw");
                 }
                 break;
        }
   } 
```

任何人？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:53:46.863

您可以使用切换按钮。

```
<ToggleButton x:Name="btnChangeChapter" Content="Change Chapter" Click="btnChangeChapter_Click_1"/>

private void btnChangeChapter_Click_1(object sender, RoutedEventArgs e)
{
    /* TODO: use property btnChangeChapter.IsChecked.Value in SelectionChanged event,
            it's bool value */
} 
```

如果您想`ToggleButton`用作应用栏按钮样式，请检查[一下](http://timheuer.com/blog/archive/2012/03/19/creating-a-metro-style-toggle-button-for-appbar.aspx)。

# iphone - 如何将委托分配给第二个视图控制器

> ID：16102947
> 
> 赞同：0
> 
> 时间：2013-04-19T10:51:50.513
> 
> 标签：iphone, ios, delegates, uistoryboard

在根视图控制器中，当我单击一个按钮时，视图控制器会推送到类别视图控制器，然后它会呈现一个子视图控制器。当我选择一行时，子视图控制器关闭，然后返回类别，然后返回根视图控制器。我在子视图控制器中创建了一个委托，根视图控制器符合这个委托。如果委托是在类别视图控制器中创建的，我可以处理它。但它是在子视图控制器中创建的，它是由类别视图控制器呈现的。那么，如何将此委托分配给根视图控制器。触发动作的按钮是这样的：

```
RootViewController.m

- (void)chooseCat:(BButton *)sender
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    CategoryViewController *cat = [storyboard instantiateViewControllerWithIdentifier:@"Cats"];
// How to create a instance of ChildViewController and assign ChildViewController's delegate to this RootViewController?
    [self.navigationController pushViewController:cat animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:17:25.787

两种方式

1)**代表桥**

`childView`创建确认到的委托`CategoryVC`。`CategoryVC`再次创建确认到的委托`rootViewController`。

然后在 rootViewController 中为 CategoryVC 分配委托，在 CategoryVC 中为 childView 分配委托。并传递值或执行任何操作。

2）使用`NSNotificationCenter`哪个最简单。

注册通知`rootViewController`喜欢

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(yourMethod) 
                                             name:@"myNotification"
                                           object:nil];

-(void)yourMethod
{

} 
```

使用通知`childView`使用

```
[[NSNotificationCenter defaultCenter]
             postNotificationName:@"myNotification" 
             object:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:06:25.823

您可以将 rootView 控制器的 ref 传递给`CategoryViewController`然后再传递给`ChildViewController`，这样您就可以间接分配`delegate`给`rootViewController`.

如果你必须从`chidViewController`to`rootViewController`那么你也可以使用`NSNotificationCenter`。所以需要通过参考...

# java - 将 Spring 应用程序部署到 Jetty

> ID：16102948
> 
> 赞同：0
> 
> 时间：2013-04-19T10:51:50.710
> 
> 标签：java, spring, jetty, war

我希望 Jetty 运行我的 spring 应用程序。在带有 run-jetty-run 插件的 Eclipse 中，一切似乎都很好。当我将 war 文件（我使用 maven 生成）复制到码头 webapps，然后输入 url 时，出现错误：

```
 org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/erastotenes-servlet.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/erastotenes-servlet.xml] 
```

我的 web.xml：

```
<web-app id="walladverts" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<servlet>
    <servlet-name>erastotenes</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>erastotenes</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
<filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
 </filter>

 <filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
 </filter-mapping> 
```

**编辑** 添加了上下文侦听器，但仍然没有帮助：

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/erastotenes-servlet.xml
    </param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:15:22.253

这解决了问题：

```
 <build>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
      <webXml>src/webapp/WEB-INF/web.xml</webXml>
      <webResources>
        <resource>
          <!-- this is relative to the pom.xml directory -->
          <directory>src/webapp/</directory>
        </resource>
      </webResources>
    </configuration>
  </plugin>
</plugins> 
```

# internet-explorer - 在 CSS 中为 BPM Coach 设置按钮控件的最小宽度。按钮宽度也应该扩大文本大小

> ID：16102949
> 
> 赞同：0
> 
> 时间：2013-04-19T10:51:53.873
> 
> 标签：internet-explorer, internet-explorer-8, business-process-management, css

我试图在 CSS 中设置按钮控件的最小宽度，以便在 BPM Coach 中使用它。但是失败了。如何设置按钮的最小宽度？并且按钮的大小应该增加文本的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:56:56.753

试试这个内联 css 它会工作。

```
<input type="button" style="width:50px;height:5em;min-width:40px;" /> 
```

# c# - WCF 数据在客户端提供异常处理

> ID：16102951
> 
> 赞同：0
> 
> 时间：2013-04-19T10:51:55.210
> 
> 标签：c#, .net, wcf, exception-handling, wcf-data-services

我目前尝试在 wpf 客户端上进行干净的 wcf 数据服务异常处理。我有一个带有 ef4 模型和 sql 数据库以及 wpf4 客户端的简单数据服务。

我已经阅读了一些关于 wcf 数据服务异常处理的文章，并提出了一个解决方案，我可以解析收到的异常消息，该消息是格式良好的 xml。

文章： [ADO.NET 数据服务：跨应用程序层的高效错误处理](http://blogs.msdn.com/b/phaniraj/archive/2009/11/14/ado-net-data-services-efficient-error-handling-across-application-tiers.aspx)

问题是，我的`DataServiceQueryException`的消息包含浏览器中错误页面的 HTML 而不是 XML。所以解析器无法解析 XDocument 并简单地返回原始异常

在服务器端我抛出

```
throw new DataServiceException(
    (int)HttpStatusCode.Unauthorized, 
    ExceptionMessages.ErrorAuthCommon); 
```

哪里错了？

提前致谢

**编辑**

以下是一些代码片段

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
public class MyDataService : DataService<MyEntities>
{
    // This method is called only once to initialize service-wide policies.
    public static void InitializeService(DataServiceConfiguration config)
    {
         config.UseVerboseErrors = true; 
```

异常被抛出`CustomAuthProvider.Authenticate(application.Context)`

```
public class BasicAuthenticationModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.AuthenticateRequest
           += new EventHandler(context_AuthenticateRequest);
    }
    void context_AuthenticateRequest(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;
        if (!CustomAuthProvider.Authenticate(application.Context))
        {
            application.Context.Response.Status = "401 Unauthorized";
            application.Context.Response.StatusCode = 401;
            application.Context.Response.AddHeader("WWW-Authenticate", "Basic");
            application.CompleteRequest();
        }
    }
    public void Dispose() { }
} 
```

在这里我注册我的`IHttpModule`

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
        <add name="CustomAuthenticationModule" type="DataService.BasicAuthenticationModule">
    </modules>
</system.webServer 
```

# c - 孩子分叉后创建的文件是否也与父母共享？

> ID：16102955
> 
> 赞同：2
> 
> 时间：2013-04-19T10:52:15.610
> 
> 标签：c, linux, unix, fork

我知道之后，**父**`fork()`级打开的所有文件（及其偏移量）都由 子**级**共享。即**父子****共享**所有文件的文件表项。

 ******如果**孩子**打开某个文件会发生什么。是专门针对**孩子**的吗？还是由**父母**共享？

我还编写了小型测试程序。这是测试这个的正确方法吗？

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>

#define FLAG (O_RDWR | O_CREAT | O_TRUNC)

int main(int argc, char *argv[])
{
    pid_t pid;

    if ((pid = fork()) < 0) {
        perror("fork error");
        exit(1);
    } else if (pid == 0) {
        int fc;
        if ((fc = open("abc", FLAG)) == -1) {
            perror("cannot open abc");
            exit(-1);
        }
        exit(fc);
        //returning the file descriptor open through exit()
    } else {
        int fp;
        wait(&fp);
        if (fp == -1)
            exit(1);
        if (fcntl(fp, F_GETFD) == -1)
            perror("doesn't work");     //Ouputs: doesn't work: Bad file descriptor
        //returns file descriptor flags
        //should not return error, if fd is valid
    }
    return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T10:59:56.167

子进程在`fork()`.

如果您在子级中打开文件，则不会与父级共享。

此外，如果您在父进程中打开文件后`fork()`不会与子进程共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:01:50.740

当您的子进程退出时，所有剩余的打开文件都将关闭。因此，当父母尝试使用它时，它不再有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:03:28.183

[人叉](http://man7.org/linux/man-pages/man2/fork.2.html)：

> 子继承父的一组打开文件描述符的副本。子文件中的每个文件描述符与父文件中的相应文件描述符引用相同的打开文件描述（请参阅 open(2)）。这意味着两个描述符共享打开文件状态标志、当前文件偏移量和信号驱动的 I/O 属性（参见 fcntl(2) 中对 F_SETOWN 和 F_SETSIG 的描述）。

如果您关闭子文件中的文件，它也将在父文件中关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T14:23:05.963

我有这段代码，我看到文件描述符与父 pid 共享

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

pid_t p;

int main(){
    if((p = fork()) != -1){
            open("file",O_APPEND);
            sleep(120);
    }
}

gcc -o fork fork.c

root      4576  2675  0 06:39 ttyS0    00:00:00 ./fork
root      4577  4576  0 06:39 ttyS0    00:00:00 ./fork

lsof -p 4576
COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF  NODE NAME
fork    4576 root  cwd    DIR    8,1     4096 69266 /root
fork    4576 root  rtd    DIR    8,1     4096     2 /
fork    4576 root  txt    REG    8,1     9882 70117 /root/fork
fork    4576 root  mem    REG    8,1  1682436 23185 /lib/libc-2.11.3.so
fork    4576 root  mem    REG    8,1   143987 23174 /lib/ld-2.11.3.so
fork    4576 root    0u   CHR   4,64      0t0  3340 /dev/ttyS0
fork    4576 root    1u   CHR   4,64      0t0  3340 /dev/ttyS0
fork    4576 root    2u   CHR   4,64      0t0  3340 /dev/ttyS0
fork    4576 root    3r   REG    8,1        0 75269 /root/file

lsof -p 4577
COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF  NODE NAME
fork    4577 root  cwd    DIR    8,1     4096 69266 /root
fork    4577 root  rtd    DIR    8,1     4096     2 /
fork    4577 root  txt    REG    8,1     9882 70117 /root/fork
fork    4577 root  mem    REG    8,1  1682436 23185 /lib/libc-2.11.3.so
fork    4577 root  mem    REG    8,1   143987 23174 /lib/ld-2.11.3.so
fork    4577 root    0u   CHR   4,64      0t0  3340 /dev/ttyS0
fork    4577 root    1u   CHR   4,64      0t0  3340 /dev/ttyS0
fork    4577 root    2u   CHR   4,64      0t0  3340 /dev/ttyS0
fork    4577 root    3r   REG    8,1        0 75269 /root/file 
```

使用此 python 代码的相同结果：

```
#!/usr/bin/env python

import os
import time

print os.getpid()

if os.fork() is not None:
  print os.getpid()
  fd = open("/etc/passwd","r")
  time.sleep(120) 
```

现在您可以检查父进程和子进程：

```
python pyfork.py
25131
25131
25132

lsof -p 25131
......
......
......
python  25131 root    3r   REG    8,8      2080  143680 /etc/passwd

lsof -p 25131
......
......
......
python  25132 root    3r   REG    8,8      2080  143680 /etc/passwd 
```******

# asp.net-mvc-4 - 所需的防伪表单字段“__RequestVerificationToken”不存在 用户注册错误

> ID：16102957
> 
> 赞同：157
> 
> 时间：2013-04-19T10:52:33.550
> 
> 标签：asp.net-mvc-4, asp.net-membership

我正在使用`Membership.create`用户功能，然后发生以下错误，

> 所需的防伪表单字段“__RequestVerificationToken”不存在

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2013-04-19T11:04:14.063

在你的行动之前你有`[ValidateAntiForgeryToken]`属性。您还应该`@Html.AntiForgeryToken()`在表格中添加。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2015-02-28T19:56:12.990

就我而言，我的 web.config 中有这个：

`<httpCookies requireSSL="true" />`

但是我的项目设置为不使用 SSL。注释掉该行或将项目设置为始终使用 SSL 解决了它。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-09-07T21:57:45.580

像这样：

## 控制器

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult MethodName(FormCollection formCollection)
{
     ...
     Code Block
     ...
} 
```

## 风景：

```
@using(Html.BeginForm())
{
     @Html.AntiForgeryToken()
     <input name="..." type="text" />
     // rest
} 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2013-10-24T02:44:28.273

还要确保避免在 [HttpGet] 下使用 [ValidateAntiForgeryToken]。

```
 [HttpGet]
  public ActionResult MethodName()
  {
  ..
  } 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-08-11T13:37:37.647

即使未启用 Cookie，您也会收到错误消息。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-03-31T15:21:26.120

可能导致这种情况（刚刚遇到这种情况）的另一件事如下：如果您出于某种原因禁用表单中的所有输入字段。它将禁用包含您的验证令牌的隐藏输入字段。当表单将被发回时，令牌值将丢失，并将生成丢失的错误。所以你需要做的是重新启用保存验证令牌的输入字段，一切都会好起来的。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-02-04T00:15:33.610

我们这些人上传文件作为请求的一部分的另一种可能性。如果内容长度超出`<httpRuntime maxRequestLength="size in kilo bytes" />` *并且*您正在使用请求验证令牌，则浏览器会显示`'The required anti-forgery form field "__RequestVerificationToken" is not present'`消息而不是超出请求长度消息。

将 maxRequestLength 设置为足以满足请求的值可以解决眼前的问题——尽管我承认这不是一个合适的解决方案（我们希望用户知道文件大小的真正问题，而不是请求验证令牌丢失的问题）。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-01-26T06:20:51.300

就我而言，我在提交表单上有这个 javascript：

```
$('form').submit(function () {
    $('input').prop('disabled', true);
}); 
```

这是从提交的表单中删除隐藏的 RequestVerificationToken 。我将其更改为：

```
$('form').submit(function () {
    $('input[type=submit]').prop('disabled', true);
    $('input[type=text]').prop('readonly', true);
    $('input[type=password]').prop('readonly', true);
}); 
```

...而且效果很好。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-01-18T15:38:01.080

确保在您的控制器中具有 http 属性，例如：

```
[HttpPost] 
```

还要在控制器中添加属性：

```
[ValidateAntiForgeryToken] 
```

在您的视图中，您必须写下：

```
@Html.AntiForgeryToken(); 
```

我有 Html.AntiForgeryToken(); 如果在代码块中没有 @ 符号，它在 Razor 中不会出错，但在运行时会出错。**确保查看@Html.Ant.. 的@ 符号是否缺失**

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-11-01T07:12:39.490

在我的情况下，这是由于添加`requireSSL=true`到`httpcookies`webconfig 导致 AntiForgeryToken 停止工作。例子：

```
<system.web>
  <httpCookies httpOnlyCookies="true" requireSSL="true"/>
</system.web> 
```

为了使两者都能`requireSSL=true`工作，我在in 中`@Html.AntiForgeryToken()`添加了这一行`Application_BeginRequest``Global.asax`

```
 protected void Application_BeginRequest(object sender, EventArgs e)
  {
    AntiForgeryConfig.RequireSsl = HttpContext.Current.Request.IsSecureConnection;
  } 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-09-14T17:00:36.283

如果有人因为我遇到的相同原因遇到错误，这是我的解决方案：

如果你有`Html.AntiForgeryToken();`

将其更改为`@Html.AntiForgeryToken()`

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-07-07T12:29:05.303

在我的情况下，web.config 中用于 cookie 的域不正确是原因：

```
<httpCookies domain=".wrong.domain.com" /> 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-11-17T18:47:08.803

使用个人用户帐户的 ASP.NET 默认登录在 Chrome 中出现此错误

.cshtml：

```
@using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()
    <h4>Use a local account to log in.</h4> 
```

控制器：

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public async Task<ActionResult> Login(LoginViewModel model, string returnUrl) 
```

通过清除站点的站点数据来解决：

[![在此处输入图像描述](https://i.stack.imgur.com/dzeTA.png)](https://i.stack.imgur.com/dzeTA.png)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-04-24T03:17:37.793

这里的所有其他答案也是有效的，但如果它们都不能解决问题，那么检查实际的标头是否正在传递给服务器也是值得的。

例如，在 nginx 背后的负载均衡环境中，默认配置是在将请求传递到服务器之前**剥离 __RequestVerificationToken 标头，请参阅：** [simple nginx reverse proxy似乎会剥离一些标头](https://stackoverflow.com/questions/23231063/simple-nginx-reverse-proxy-seems-to-strip-some-headers)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-17T06:44:36.790

如果您想在某个方法上使用 [ValidateAntiForgeryToken]，您只需将 @Html.AntiForgeryToken() 添加到使用上述方法的表单中。

如果您有与 View 同名的方法（其形式为 @Html.AntiForgeryToken() ），那么您应该在控制器中有两个重载方法。

像这样的东西：

First-> 用于视图的 ActionResult

```
[AllowAnonymous]
public ActionResult PasswordChange()
{
   PasswordChangeViewModel passwordChangeViewModel = new PasswordChangeViewModel();
   return View(passwordChangeViewModel);
} 
```

第二-> 用于 HttpPost 方法

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult PasswordChange(PasswordChangeViewModel passwordChangeViewModel)
{
   //some code
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-12T01:03:49.020

我想分享我的，我一直在使用带有 angularjs 的 asp.net mvc 4 遵循这个[anti forgerytoken 教程](http://techbrij.com/angularjs-antiforgerytoken-asp-net-mvc) ，但是每次我使用 $http.post 请求时它都会引发异常，我发现解决方案只是添加 ['X- Requested-With': 'XMLHttpRequest'](https://stackoverflow.com/questions/33148695/identify-angular-js-ajax-calls-in-asp-net-mvc-code)到 $http.post 的标头，因为它似乎`(filterContext.HttpContext.Request.IsAjaxRequest())` 无法将其识别为 ajax，这是我的示例代码。

应用程序.js

`var headers = { 'X-Requested-With': 'XMLHttpRequest', 'RequestVerificationToken': $scope.token, 'Content-Type': 'application/json; charset=utf-8;' };`

`$http({ method: 'POST', url: baseURL + 'Save/User', data: JSON.stringify($scope.formData), headers: headers }).then(function (values) { alert(values.data); }).catch(function (err) { console.log(err.data); });`

* * *

保存控制器

`[HttpPost] [MyValidateAntiForgeryToken] public ActionResult User(UserModel usermodel) { ....`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-29T17:32:15.077

因为这是第一次搜索这个：

我只在 Internet Explorer 中遇到过这个问题，无法弄清楚问题所在。长话短说，它没有保存令牌的 cookie 部分，因为我们的（子）域中有一个下划线。在 Chrome 中工作，但 IE/Edge 不喜欢它。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-01-30T08:20:23.667

有时您正在编写带有结果列表的表单操作方法。在这种情况下，您不能使用一种操作方法。所以你必须有两个同名的动作方法。一个有属性`[HttpGet]`，另一个有`[HttpPost]`属性。

在您的`[HttpPost]`操作方法中，设置`[ValidateAntiForgeryToken]`属性并放入`@Html.AntiForgeryToken()`您的 html 表单。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-02-23T16:09:01.397

在我的几个控制器上的 EPiServer 解决方案中，索引操作上有一个 ContentOutputCache 属性，它接受了 HttpGet。这些操作的每个视图都包含一个表单，该表单将 HttpPost 操作发布到同一控制器或不同控制器。一旦我从所有这些索引操作中删除该属性，问题就消失了。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-25T08:15:33.887

我已经这样解决了

```
[AttributeUsage(AttributeTargets.Method)]
public class ExcludeFromAntiForgeryValidationAttribute : Attribute{
} 
```

并置于`System.Web.Helpers.AntiForgery.Validate(cookie != null ? cookie.Value : null, formToken)`if 条件下

```
bool shouldValidate =!filterContext.ActionDescriptor.GetCustomAttributes(typeof(ExcludeFromAntiForgeryValidationAttribute), true).Any();
if (shouldValidate){
    System.Web.Helpers.AntiForgery.Validate(cookie != null ? cookie.Value : null, formToken);
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-07-01T09:34:06.270

就我而言，我在发布 AJAX 帖子时遇到了这个错误，结果证明该`__RequestVerificationToken`值没有在调用中传递。我必须手动查找该字段的值并将其设置为发送到端点的数据对象的属性。

IE

```
data.__RequestVerificationToken = $('input[name="__RequestVerificationToken"]').val(); 
```

* * *

## 例子

**HTML**

```
 <form id="myForm">
    @Html.AntiForgeryToken()

    <!-- other input fields -->

    <input type="submit" class="submitButton" value="Submit" />
  </form> 
```

**Javascript**

```
$(document).on('click', '#myForm .submitButton', function () {
  var myData = { ... };
  myData.__RequestVerificationToken = $('#myForm input[name="__RequestVerificationToken"]').val();

  $.ajax({
    type: 'POST',
    url: myUrl,
    data: myData,
    contentType: 'application/x-www-form-urlencoded; charset=utf-8',
    dataType: 'json',
    success: function (response) {
      alert('Form submitted');
    },
    error: function (e) {
      console.error('Error submitting form', e);
      alert('Error submitting form');
    },
  });
  return false; //prevent form reload
}); 
```

**控制器**

```
[HttpPost]
[Route("myUrl")]
[ValidateAntiForgeryToken]
public async Task<ActionResult> MyUrlAsync(MyDto dto)
{
    ...
} 
```

# reporting-services - 在表格的列组底部添加总计

> ID：16102959
> 
> 赞同：0
> 
> 时间：2013-04-19T10:52:46.083
> 
> 标签：reporting-services, reportbuilder3.0, reportbuilder, report-builder2.0

我正在准备一份报告，其中包含一个带有两个列组（动态生成）的表。StandardRelays 组是父组，而 RelayConfigs 组是它的子组。我不想在相应列的底部打印每个组的总数。这是设计视图中的报告 ![在此处输入图像描述](https://i.stack.imgur.com/Hva9X.png)

我可以在单独的行上打印子组 (RelayConfigs) 和父组 (StandardRelays) 的总计，但问题是父组总计重复的次数与子列的数量一样多。报告的输出视图最能解释我的意思。

![在此处输入图像描述](https://i.stack.imgur.com/tgA8m.png)

可以看出，标记为红色的总数是父组（本例中为庞巴迪中继）与子列重复的总数。我想要的是三列在 Total Row 处合并并只输出一个总数（在这种情况下突出显示 4）。是否有可能实现这一点，或者我是否必须更改布局以将列组总计打印为单独的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:54:53.563

单击跨列的单元格以突出显示所有列。右键点击。合并单元格。表达式现在在其上方的单元格范围内共享。

编辑：

好的，您本质上希望在它下面显示一个父表达式，它出现在一个矩阵中。我不确定您是否可以这样做，因为详细级别的矩阵将成为树结构的最低叶。您可以按照自己的方式获得总计，但在最低级别，矩阵处于详细级别，扩展至最全面。但是，您可以很容易地按其上方的客户填充总数，因为父级只会汇总与您告诉它分组的内容相同的内容，而不会更多。这里有两种可能性。

在您的“名称”或类似列上，右键单击并选择“插入行”>（扩展至）>“在下面的组内”，然后将您的表达式放入“总和（金额）”或类似内容中。您现在可以在详细信息级别之前显示名称分组的总计。

您还可以使用显示分组名称的技巧随意展开和折叠详细信息级别，直到您点击“+”号以展开它。右键单击设计器“列组”中的“日期”字段。在左侧窗格中选择“可见性”。为“报告最初运行时”选择“隐藏”。选中“可以通过此报告项目切换显示”并选择您的父组，无论产品的“名称”是什么。

模仿你的数据我这样做了： ![测试数据示例图片](https://i.stack.imgur.com/vbBMd.jpg)

# sitecore - Sitecore 中分析性 cookie 的区别

> ID：16102960
> 
> 赞同：1
> 
> 时间：2013-04-19T10:52:46.440
> 
> 标签：sitecore, sitecore6, sitecore-dms

对不起，如果这已经完成了，我的 stackoverflow-fu 可能让我失望了，谷歌也没有太多帮助。

我只是在寻找两个 Sitecore cookie 之间差异的高级解释：

SC_ANALYTICS_GLOBAL_COOKIE
SC_ANALYTICS_SESSION_COOKIE

我对针对他们存储的信息类型感兴趣

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T11:13:52.343

根据[Sitecore CMS 6.5 & DMS 2.0 Engagement Analytics Configuration Reference Guide](http://sdn.sitecore.net/upload/sitecore6/65/engagement_analytics_configuration_reference_sc65-usletter.pdf)

`SC_ANALYTICS_GLOBAL_COOKIE`：为了识别单个用户的重复访问，Sitecore 会向 Web 客户端发送一个持久会话 cookie。持久会话 cookie 的名称是 SC_ANALYTICS_GLOBAL_COOKIE。持久会话 cookie 在 Web 客户端从解决方案请求的最后一页后一年到期。

`SC_ANALYTICS_SESSION_COOKIE`：为了识别来自单个用户的一系列 HTTP 请求，Sitecore 会向 Web 客户端发送一个参与分析会话 cookie。会话 cookie 的名称是 SC_ANALYTICS_SESSION_COOKIE。第一个竖线字符 ("|") 之前的分析会话 cookie 的值与访问表的 VisitId 列中的值匹配，以标识 Analytics 数据库中的分析访问记录。当用户关闭 Web 客户端时，此 cookie 过期。

# android - 在后台应用程序或手机睡眠后未调用 onResume

> ID：16102964
> 
> 赞同：3
> 
> 时间：2013-04-19T10:52:57.440
> 
> 标签：android, android-fragmentactivity, onresume

我在恢复我的应用程序时遇到问题 - 当它由于其他打开的东西（例如我调用意图打开导航）或手机休眠而进入后台时；返回后（另一个活动关闭或手机唤醒）我的应用程序仍然在后台，onResume 永远不会被调用（日志中没有错误，什么都没有）。为什么会发生这种情况，我该如何摆脱这种行为，我应该从哪里开始寻找？

```
public class MainActivity extends ...v4.app.FragmentActivity implements FewMyListeners {
    . . .
    private Locator locator;

@Override
public void onResume() {
    super.onResume();

    try {
        locator = new Locator(this);
    } catch (NoLocationProviderFoundException e) {
        showLocationSettingsDialog();
    }

    refreshLocation();
}

@Override
protected void onPause() {
    if(locator != null) {
        locator.removeUpdates(false);
        locator = null;
    }

    dismissProgressDialog();

    super.onPause();
}
}

public class Locator implements LocationSource, LocationListener { . . . } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-12T20:11:51.733

这是有史以来最愚蠢的“错误”——noHistory 设置为 true。将其重置为 false 成功了：

```
 <activity
        android:name=".MainActivity"
        android:noHistory="false">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:54:44.877

确保您已`super.onResume()`在覆盖的方法中调用了该`onResume()`方法

# java - 批量更新从更新 [0] 返回了意外的行数；实际行数：9；预期：1

> ID：16102969
> 
> 赞同：2
> 
> 时间：2013-04-19T10:53:20.013
> 
> 标签：java, hibernate, jakarta-ee, nhibernate-mapping

尝试使用休眠删除记录时出现此异常。

org.hibernate.jdbc.BatchedTooManyRowsAffectedException：批量更新从更新[0]返回了意外的行数；实际行数：9；预期：1

我正在使用一个更新另一个表中的记录的实体（我有一个一对多的关系 - 一个“主”对象和一个单独表中的“辅助”对象列表）。我的设置正在尝试更新另一个表。这在创建和更新方法上工作得很好，但是当我尝试删除一个对象时，我得到了 BatchedTooManyRowsAffectedException 异常。

知道为什么会这样吗？

```
org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:95)
org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:70)
org.hibernate.jdbc.NonBatchingBatcher.addToBatch(NonBatchingBatcher.java:47)
org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:2691)
org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:2895)
org.hibernate.action.EntityDeleteAction.execute(EntityDeleteAction.java:97)
org.hibernate.engine.ActionQueue.execute(ActionQueue.java:268)
org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:260)
org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
java.lang.reflect.Method.invoke(Unknown Source)
org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:344)
$Proxy679.flush(Unknown Source) 
```

我正在使用 SqlServer 2008。

```
 <hibernate-mapping>
<class name="com.send.ReportStock" table="COM_REPORT_STOCK">

    <id name="reportID" type="long">
        <column name="ReportID" />
        <generator class="assigned" />
    </id>

    <property name="Stock" type="java.math.BigDecimal">
        <column name="Stock" scale="9" not-null="true" />
    </property>
    <property name="Live" type="java.math.BigDecimal">
        <column name="Live" scale="9" not-null="true" />
    </property>

    <property generated="never" lazy="false" name="NotLiveStatic"
        type="java.lang.String">
        <column name="NotLiveStatic" />
    </property>

</class>
  </hibernate-mapping> 
```

班级代码：

```
 ReportStock reportStock= this.getReportStock(reportId);
 session.get().delete(reportStock);
 session.get().flush(); 
```

# asp.net - 从内容访问用户对母版页的控制

> ID：16102973
> 
> 赞同：2
> 
> 时间：2013-04-19T10:53:39.430
> 
> 标签：asp.net

我正在尝试从我的内容页面访问存储在母版页上的用户控件。到目前为止，我已经尝试使用`<%@ MasterType VirtualPath="" TypeName=""%>`在我的内容页面上使用，但我似乎无法让它工作。

母版页：

```
<%@ Register TagPrefix="My" TagName="RightPanel" Src="~/RightPanel.ascx" %>
<My:RightPanel runat="server" ID="RightPanel"/> 
```

内容页面（前端）

```
<%@ MasterType VirtualPath="~/MasterPage.master" TypeName="RightPanel"%> 
```

但是我不能从我的代码隐藏中调用 RightPanel。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:04:05.857

您可以使用：**Master.FindControl**

```
RightPanel u = Master.FindControl("RightPanel") as RightPanel; 
```

# ruby - ruby 中的哪个类是所有类的父类？

> ID：16102977
> 
> 赞同：0
> 
> 时间：2013-04-19T10:53:46.817
> 
> 标签：ruby

我曾以为这`Object`是所有班级的祖先，但我尝试了一些让我感到困惑的事情。

```
Object.superclass # => BasicObject
Object.superclass.superclass # => nil
Object.superclass.superclass.superclass # => undefined method error since nil is not a class
Object.superclass.superclass.class # => Nilclass
Object.superclass.superclass.class.superclass # => Object 
```

除了`nil`，一切都有一个超类，并且`nil`是 的一个实例`NilClass`，所以它不能有超类方法。如何获得`Object`作为超类的`Object`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T11:04:58.910

来自[ruby​​-doc.org](http://ruby-doc.org/core-2.0/BasicObject.html)

> BasicObject 是 Ruby 中所有类的父类

Object 的超类是 BasicObject，而 BasicObject*没有超类*。不存在事物的标准占位符是 nil，因此 BasicObject.superclass 返回 nil。

碰巧 nil 是 NilClass 类的一个实例，它是 Object 的子类。这并不意味着 NilClass 是 BasicObject 的超类或 Object 是 Object 的超类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T10:58:22.410

你没有得到“对象作为对象的超类”。你得到的是“作为 Nilclass 的超类的对象”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:08:13.073

[`superclass`](http://ruby-doc.org/core-2.0/Class.html#method-i-superclass)是一种方法`Class`。现在`NilClass`继承自`Object`. 但是类`Object`没有机会继承类`Class`方法。

从下面看[`Documentaion`](http://ruby-doc.org/core-2.0/Class.html)

```
Classes, modules, and objects are interrelated. In the diagram that follows, the vertical arrows represent inheritance,
and the parentheses meta-classes. All metaclasses are instances of the class `Class'.

                         +---------+             +-...
                         |         |             |
         BasicObject-----|-->(BasicObject)-------|-...
             ^           |         ^             |
             |           |         |             |
          Object---------|----->(Object)---------|-...
             ^           |         ^             |
             |           |         |             |
             +-------+   |         +--------+    |
             |       |   |         |        |    |
             |    Module-|---------|--->(Module)-|-...
             |       ^   |         |        ^    |
             |       |   |         |        |    |
             |     Class-|---------|---->(Class)-|-...
             |       ^   |         |        ^    |
             |       +---+         |        +----+
             |                     |
obj--->OtherClass---------->(OtherClass)-----------... 
```

是的，作为`nil`的对象是正确的`NilClass`，而后者又继承`Object`了位于类之上的对象`Class`。因此`Nilclass`无法继承`superclass`方法。

```
Object.superclass.superclass #=> nil
nil.superclass #=> undefined method error since nil is not a class 
```

# java - 如何让 Java 的 TrayIcon 消息淡出？

> ID：16102978
> 
> 赞同：5
> 
> 时间：2013-04-19T10:53:52.703
> 
> 标签：java, swing, system-tray, trayicon

我有一个 Java 应用程序，当按下红十字时，它会缩小到系统托盘中。

每当发生这种情况时，我都会显示一条消息，通知用户该应用程序仍在系统托盘中运行。

这是代码：

```
...

    @Override
    public void windowClosing(WindowEvent e) {
       try {
            tray.add(trayIcon);
            trayIcon.displayMessage("", "The application has been reduced
                 in the system tray, to stop it, press the \"Quit\" button", 
                 TrayIcon.MessageType.WARNING);
            setVisible(false);
        } catch (AWTException ex) {
            System.out.println("unable to add to tray");
        }
    }
... 
```

目前，如果用户单击该消息，该消息就会消失。

我想设置一个计数器，这样即使什么都没做，消息也会在几秒钟后消失。

有谁知道这样做的好方法，因为我似乎找不到任何现有的方法。

**编辑**

我必须纠正我的问题，事实上，在测试了一段时间后，它会自动淡出，比如说 7-8 秒，但我觉得它有点太长了。此外，仅当用户正在执行操作（移动鼠标或在键盘上打字）时它才会消失

所以新的问题是：有没有办法通过配置 Java 应用程序来减少淡出时间并改变消息行为，还是 Windows 固有的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:23:36.970

> 所以新的问题是：有没有办法通过配置 Java 应用程序来减少淡出时间，还是 Windows 固有的？

*   [MSDN 部分说明通知多长时间](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511497.aspx)-*在 Windows Vista 及更高版本中，通知显示的固定持续时间为 9 秒。*

*   任何更改都可以仅在 Windows 大小上维护，但似乎对所有消息都有效/适用

* * *

*   您可以创建自己的 Traslucent JDialog（透明度也可以）以编程方式放置在左下角，将从 Swing Timer 调用淡出

# ios - iOS导航栏子视图删除后重新出现

> ID：16102981
> 
> 赞同：0
> 
> 时间：2013-04-19T10:54:15.057
> 
> 标签：ios, cocoa-touch, uinavigationbar

我正在向导航栏添加视图

```
UIView *mySubView = [UIView alloc] initwithFrame:frame];
[self.navigationController.navigationBar addSubview:mySubView]; 
```

我想在推送到 secondviewController 之前删除视图。

```
[mySubView removeFromSuperView]; 
```

当应用程序第一次启动时它没有删除视图，因此在 secondview 导航栏上也可以看到视图

我搜索并尝试了很多方法，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:17:32.437

为您的 mysubview 分配一个标签，例如

```
UIView *mySubView = [UIView alloc] initwithFrame:frame];
mySubView.tag =1;
[self.navigationController.navigationBar addSubview:mySubView]; 
```

然后在推送到 secondViewController 时添加此行。

```
[[self.navigationController.navigationBar viewWithTag:1] removeFromSuperview]; 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:28:36.653

**为要删除的视图的tag**属性添加一个值，并在删除子视图之前检查它，例如，假设您向子视图添加一个非零值：

```
 for (UIView *view in self.navigationController.navigationBar.subviews) {
if (view.tag != 0) {
    [view removeFromSuperview];
     }
} 
```

**试试这个会有帮助的！！！！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:28:47.243

为`ViewController`您拥有 subView 的地方执行以下操作`NavigationBar`

在`.h`

```
@property (nonatomic, retain) UIView *mySubView; 
```

在`.m`

```
- (void)viewDidLoad {
    //Your Existing Code + following 2 lines
    self.mySubView = [[UIView alloc] initWithFrame:yourFrame];
    self.mySubView.backgroundColor = [UIColor whiteColor];
}

- (void)viewWillAppear:(BOOL)animated {
    //Your Existing Code + following 1 line
    [self.navigationController.navigationBar addSubview:self.mySubView];
}

- (void)viewWillDisappear:(BOOL)animated {
    //Your Existing Code + following 1 line
    [self.mySubView removeFromSuperview];
} 
```

你很高兴。尝试和测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T06:48:24.427

```
 -(void)viewWillDisappear:(BOOL)animated    
      {
        [self.mySubView removeFromSuperview];
      //[_mySubView removeFromSuperview];

    } 
```

# php - 在 MVC php 程序中，最好在哪里实现最终保存任务？

> ID：16102984
> 
> 赞同：1
> 
> 时间：2013-04-19T10:54:26.460
> 
> 标签：php, oop, model-view-controller

我想知道在程序（模型或控制器）中的哪个位置是在保存对象之前实现最终任务的标准做法。

例如，我可能有一个名为 $post 的博客文章，它有两个属性：$post->text 和 $post->userId

每当其他用户编辑帖子时，我想向帖子所有者发送通知（发送通知的逻辑已经完成）

但是，当模型确认编辑已保存时，我是否应该在程序的控制器中发送通知？还是应该在模型级别发送通知？还是取决于通知过程的严格程度是主观的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:07:45.077

在理想情况下，您可以将其与事件挂钩。假设您将根据保存操作向用户发送通知，此保存可能会触发事件：“POST_EDITED”。您可以创建一个侦听器来侦听该事件并为该用户发送/保存通知。

[http://symfony.com/doc/2.0/components/event_dispatcher/introduction.html](http://symfony.com/doc/2.0/components/event_dispatcher/introduction.html)

# validation - 微风客户端自定义验证与服务器端数据

> ID：16102986
> 
> 赞同：0
> 
> 时间：2013-04-19T10:54:39.387
> 
> 标签：validation, breeze

我创建了一个自定义验证器，用于检查数据库上是否使用了用户名。验证的整个过程有效。不工作的是结果。

```
function createExistingUsernameValidator() {
        var name = 'existingUsernameValidator';
        var ctx = { messageTemplate: 'Questa partita I.V.A. o codice fiscale sono già stati inseriti.', displayName: "Partita IVA o Codice Fiscale" };
        var val = new Validator(name, valFunction, ctx);

        return val;

        function valFunction(value, context) {
            var result = ko.observable(true);
            require('services/datacontext').getIsUserByUsername(value, result)
                .then(function () {
                    debugger;
                    return !result();
            });
        }
    } 
```

承诺有效：我知道是因为它到达了调试器行并且*retunrnig*值是正确的。
但是验证器总是评估为*假*，因为当验证器被调用时我没有返回任何东西。换句话说：它不会等待承诺。
是我的坏 javascript 还是别的什么？
欢迎任何帮助。
**谢谢！**

**回答后编辑**
我找到了一个涉及[淘汰赛验证](https://github.com/ericmbarnard/Knockout-Validation)（非常有用的脚本）的解决方案。

```
 function createIsExistingUserKoValidation() {
        ko.validation.rules['existingUsername'] = {
            async: true,
            validator: function (val, params, callback) {
                if (val) {
                    var result = ko.observable();
                    require('services/datacontext').getIsUserByUsername(val, result)
                        .then(function () {
                            callback(!result());
                        });
                }
            },
            message: ' Existing username.'
        };
        ko.validation.registerExtenders();
    } 
```

在实体创建中：

```
var createDitta = function () {
        var ditta = manager.createEntity(entityNames.ditta,
            {
                id: newGuid(),
                legaleRappresentante: createPersona(),
                isAttiva: true
            });
        ditta.pivaCodFiscale.extend({ existingUsername: { message: ' Existing username.', params: true } });
        ditta.pivaCodFiscale.isValidating(false);

        return ditta;
    }; 
```

*ditta.pivaCodFiscale.isValidating(false);* 这是必需的，因为 isValidating 是用 true 初始化的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:09:26.583

问题是您所写的*valFunction*将始终返回“未定义”。（这是“假的”。

'return !result()' 表达式不是 'valFunction' 的返回值，它只是在*valFunction*已经返回之后执行的匿名函数的结果。这就是 Promise 的异步特性。

您正在尝试编写一个“异步”验证，Breeze 不支持开箱即用，但这个想法是个好主意。

我认为您可以通过让异步回调在实体上实际“设置”一个值并让该设置操作本身触发单独的“同步”验证来完成您想要的事情。

这是 Breeze 更自然地支持的一个好主意，因此请随时向[Breeze 用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/filters/top)添加功能请求，以实现“异步验证”之类的功能。我们使用它来衡量社区对 Breeze 的各种提议功能/扩展的兴趣。

# html - 如何扩展子 div 的宽度以超出父 div 的宽度？

> ID：16102989
> 
> 赞同：3
> 
> 时间：2013-04-19T10:54:47.117
> 
> 标签：html, css

我`div`在另一个里面有几个 s `div`（我们称之为容器），我想知道是否可以将孩子的宽度扩展`div`到容器的宽度之外`div`。

如果您可以看一下这个[jsfiddle](http://jsfiddle.net/CtsTQ/)会更容易解释。

目前，容器`div`的宽度为 80%，所有的 child 也是如此`div`。我想将第一个的宽度扩展`div`到 100%，以便它水平地完全填满页面。

我将如何实现这一目标？顺便说一句，我之所以要这样做是因为我使用了由此提供的网格结构，[并且](http://www.getskeleton.com/)它要求必须将所有内容都包含在容器`div`中才能获得结构提供的功能。

**编辑：**我刚刚意识到容器的宽度`div`是在 px 中指定的，而不是在 jsfiddle 示例中的 % 中。所以将子元素的宽度设置`div`为 120% 并不能保证水平填充页面。我应该如何解决我的问题？我现在能想到的唯一方法是以像素为单位的屏幕宽度，但我认为这在 CSS 中是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:02:01.947

我不会这样做，但它似乎有效：

```
#greendiv {
  width:120%;
  margin-left:-10%;
  background-color: green;
} 
```

见[小提琴](http://jsfiddle.net/CtsTQ/9/)。

为什么不能`#greendiv`在 the`.container`或其他包装器之前`div`？

* * *

编辑。把你的想法颠倒过来（不是真的，只是在强制容器内创建一个自定义容器，这里`.yellowdiv`s 是自定义容器，而`#greendiv`是容器内的全宽容器）：

```
.container {
  width: 100%;//or some amount of pixels and the yellow divs follow that setting
  margin: 0px auto;
}

.yellowdiv {
  width:80%;
  margin-left:10%;
  border: solid 1px;
  background-color: yellow;
}
#greendiv {
  background-color: green;
} 
```

见[小提琴](http://jsfiddle.net/CtsTQ/26/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T11:06:51.150

如果父容器居中对齐，则可以在左右两侧使用负边距：

```
#greendiv {
    background-color: green;
    margin: 0 -12.5%;
} 
```

在这里看小提琴 - [http://jsfiddle.net/CtsTQ/12/](http://jsfiddle.net/CtsTQ/12/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T10:59:37.510

添加`overflow:visible`到您的父 div，即`.container`.

```
.container {
    width: 80%;
    margin: 0px auto;
    overflow:visible;
}

#greendiv {
    background-color: green;
    width:500px;
} 
```

[**现场演示**](http://jsfiddle.net/CtsTQ/7/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T11:02:26.823

好吧，我通过这样做得到了您的要求：

```
#greendiv {
   background-color: green;
   width: 140%;
   margin-left: -20%;
} 
```

但我认为这不是一个好习惯......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T11:08:32.207

将东西扩展到包装容器之外通常不是一个好主意，但如果我必须这样做，我肯定会使用这样的相对定位。

```
#greendiv {
    position:relative;
    left:-10%;
    width:120%;
    background-color: green;
} 
```

您还可以使用其他单位`px`来获得更精确的结果。

# java - 关于深度复制和序列化

> ID：16102990
> 
> 赞同：4
> 
> 时间：2013-04-19T10:54:51.520
> 
> 标签：java, performance, serialization, deep-copy

我已经阅读了很多关于 Java 等中的深度复制和序列化的内容`List`，`Map`但我没有找到一些问题的好答案。我关心时间和性能，所以我正在寻找妥协。我在下面列出了我的问题，以便您可以解决您有答案的问题。

1.  在性能方面，通过循环 a`list`或使用序列化进行深度复制有什么更好的？我读过一篇文章（对不起，我失去了链接）说循环比 java 序列化好 4 倍。这是否意味着使用像 Kryo 这样的 3rd 方可以比循环更好？

2.  我不确定序列化在不同的[3rd 方库](http://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking)中是如何工作的，但是如果我有很多子类级别会发生什么，序列化会比循环更好吗？

3.  Java中有没有复制原始内存的库？例如，一个`memcopy()`在`C`. 这会快得多，因为不需要关心类逻辑（当然它需要对非连续内存数据进行一些处理）。我知道Java是面向对象的:)，但这不会违反我认为的规则。

4.  如果我想在 Java 中实现`deepCopy(List<?>)`，`deepCopy(Map<?,?>)`我可以将它们放在`MyTools`我拥有的类中吗？或者在Java中有一些更简洁的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T12:19:21.643

1.  循环总是比序列化快，除非你只是序列化原语。
2.  在第三方库中，它们通常处理子类和各种类型。他们通过使用 sun.misc.Unsafe.class 来做到这一点
3.  是的，实际上您可以使用 Unsafe 类复制内存。检查不安全的类实现。
4.  你可以拥有 MyTools 或者让我们说 Utils 类为你做这件事。

根据您的需要，列表、地图和其他泛型无法进行深度复制。出于这个原因，您最终可能会使用像 Kryo 这样的优秀序列化库。

# ios - popover中选择的行应该添加到uitablewview吗？

> ID：16102991
> 
> 赞同：0
> 
> 时间：2013-04-19T10:54:55.020
> 
> 标签：ios, ipad, uitableview, popover

当用户从表中选择第一行时出现**弹出框？**

当用户从弹出窗口中选择任何行时，应将单元格添加到相应的表中，即显示弹出窗口的表？我怎样才能做到这一点？

```
third = nil;
self.colorPickerPopover = nil;
UITableViewCell *cell= [tableView cellForRowAtIndexPath:indexPath];
CGRect rect=CGRectMake(cell.bounds.origin.x+300, cell.bounds.origin.y+10, 10, 10);
if (indexPath.section ==0) {
    if (indexPath.row == 0 ) {
        if (third == nil) {
            third  = [[ThirdViewController alloc] initWithStyle:UITableViewStylePlain];
            UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:third];
            self.colorPickerPopover = [[UIPopoverController alloc] initWithContentViewController:controller] ;
            [colorPickerPopover setDelegate:self];
            [self.colorPickerPopover presentPopoverFromRect:rect inView:cell permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
            UIBarButtonItem *closeButton = [[UIBarButtonItem alloc] initWithTitle:@"Close" style:UIBarButtonItemStylePlain target:self action:@selector(cancelClicked)];
            [[UINavigationBar appearance] setTintColor:[UIColor darkGrayColor]];
            third.navigationItem.leftBarButtonItem = closeButton;
            UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStylePlain target:self action:@selector(doneClicked)];
            [[UINavigationBar appearance] setTintColor:[UIColor darkGrayColor]];
            third.navigationItem.rightBarButtonItem = doneButton;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:57:55.363

好的，当您的弹出框在那时消失时，可以像这样尝试使用新的元素数组重新加载您的表格视图。

```
EDIT: 
```

获取一个用于在 tableview 上显示数据的数组，并且每当您当时关闭弹出概览时，将所选元素添加到该 tableview 数组中，然后使用新的 tableview 数组重新加载您的 tableview。

# linux - 错误消息“500 OOPS：vsftpd：拒绝在 chroot() 内使用可写根运行”

> ID：16102996
> 
> 赞同：31
> 
> 时间：2013-04-19T10:55:25.767
> 
> 标签：linux, ubuntu, ftp

我想设置一个仅匿名的 FTP 服务器（能够上传文件）。这是我的配置文件：

```
listen=YES

anonymous_enable=YES
anon_root=/var/www/ftp

local_enable=YES
write_enable=YESr.

anon_upload_enable=YES
anon_mkdir_write_enable=YES

xferlog_enable=YES
connect_from_port_20=YES

chroot_local_user=YES

dirmessage_enable=YES
use_localtime=YES
secure_chroot_dir=/var/run/vsftpd/empty
rsa_cert_file=/etc/ssl/private/vsftpd.pem
pam_service_name=vsftpd 
```

但是当我尝试连接它时：

```
kan@kan:~$ ftp yxxxng.bej
Connected to yxxx.
220 (vsFTPd 2.3.5)
Name (yxxxg.bej:kan): anonymous
331 Please specify the password.
Password:
500 OOPS: vsftpd: refusing to run with writable root inside chroot()
Login failed 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-19T20:23:15.710

此处的此博客指出了如何解决此问题。

[http://www.mikestechblog.com/joomla/operating-systems-section/operating-systems-ubuntu/155-500-oops-vsftpd-refusing-to-run-with-writable-root-inside-chroot.html](http://www.mikestechblog.com/joomla/operating-systems-section/operating-systems-ubuntu/155-500-oops-vsftpd-refusing-to-run-with-writable-root-inside-chroot.html)

问题是用户的根目录是可写的。Frontier Group 为您提供了有关 vsFTPd 的修复程序。

以下是要采取的步骤（从教程中复制粘贴，以防链接失效）

1.  以 root（或 sudo..）身份登录并执行以下操作：

2.  vi /etc/vsftpd.conf 并添加以下 allow_writeable_chroot=YES

3.  sudo 服务 vsftpd 重启

# angularjs - 如何使用 Node.js（在 nginx 之后）和 AngularJS 实现登录

> ID：16102999
> 
> 赞同：2
> 
> 时间：2013-04-19T10:55:36.360
> 
> 标签：angularjs, node.js, nginx, passport.js

目前我尝试建立一个有公共和私人区域的网站。我使用 Node.js 服务器端。Node.js 主要通过 REST Web Services 为前端提供数据并处理登录。所有数据都将存储在 MongoDB 中。前端是用 AngularJS 构建的。目前我将 nginx 用于静态文件，只有 REST 调用 (/api/...) 和登录 (/login) 将传递给 node.js。

这是我当前的文件结构：

```
www
|-- public
|     |-- css
|     |-- img
|     |-- js
|     |   +-- templates
|     |         +-- login.html 
|     |
|     +-- index.html
|
|-- private
|     |-- css
|     |-- img
|     |-- js
|     |   +-- templates
|     |         +-- someprivatestuff.html 
|     |
|     +-- index.html 
```

在 Node.js 中，我使用护照进行身份验证。

```
app.post('/login', passport.authenticate('local'), function(req, res) {
    res.redirect('http://localhost/private');
}); 
```

如果用户认证成功，他将被重定向到 /private。问题是上面的文件结构将由 nginx 提供服务。因为它们是静态文件。如何通过键入 url /private （或该目录中的其他文件）来防止人们直接访问私人区域。我是否也应该对静态文件使用 node.js 来处理对文件的访问？但是我在阅读Node.js之前使用nginx是一种常用的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:11:31.630

如果我理解正确，这就是您要找的东西？

[http://wiki.nginx.org/XSendfile](http://wiki.nginx.org/XSendfile)