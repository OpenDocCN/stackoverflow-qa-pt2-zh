# StackOverflow 问答 15484000-15484999

# objective-c - 使用静态按钮访问不同的视图控制器视图

> ID：15484000
> 
> 赞同：0
> 
> 时间：2013-03-18T18:17:52.443
> 
> 标签：objective-c, uiviewcontroller, storyboard

正如标题所述，我希望拥有一个带有几个按钮的主视图控制器。根据按下的按钮，我想在按钮下方的包含字段中加载单独视图控制器的视图，我仍然可以在其中访问按钮和视图中的内容。我应该如何尝试做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:51:03.840

您所要做的就是像添加任何其他视图一样添加视图控制器的视图。所以它看起来像;

```
ViewController *vc = [[ViewController alloc] init...];
[vc.view setFrame:whatever frame you want];
[self.view addSubview:vc]; 
```

只需在按钮的操作方法中调用它即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:53:30.947

这听起来像是一份工作[`UITabBarController`](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html#//apple_ref/doc/uid/TP40011313-CH3-SW1)

# c - 使用字符串创建变量以作为 uchar* 传递

> ID：15484001
> 
> 赞同：0
> 
> 时间：2013-03-18T18:17:52.283
> 
> 标签：c, types

我正在编写一个将文本传递给库函数的程序。此函数要求文本参数为*unsigned char* * 类型。

那么我怎样才能正确地将字符串传递给该函数呢？我无法将现有的*char* * 转换为*unsigned char * 并通过**strncpy*将新值写入*unsigned char* * 变量也不起作用。

 *编辑：这是一个小例子：

这是我需要调用的函数：

`int count (void *index, uchar *pattern, uint length, uint *numocc);`

这就是我的代码中的内容：

```
count(index,?argv[2]?, length, numocc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:24:04.243

您可以使用`(unsigned char*)`. 我发布了一个小例子可能对你有帮助（*阅读评论*）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
void func(unsigned char* str){ // argument should be unsigned char*
    printf("\n In side fun:  %s\n", str);
}
int main(){
    char* s = "your_name"; // s is char* 
    func((unsigned char*)s);  // notice type casting
    return 1;
} 
```

它有效：

```
~$ gcc x.c  -Wall
~$ ./a.out 

 In side fun:  your_name
~$ 
```

**编辑**：

```
count(index, (uchar*)argv[2], length, numocc);  
               ^ typecast (uchar*) 
```

`uchar*`可能是您的代码中的 typedef ed，例如：

```
typedef unsigned char* uchar* 
```*

# php - php/sql 查询在本地工作，但在服务器上不起作用

> ID：15484002
> 
> 赞同：-1
> 
> 时间：2013-03-18T18:17:58.243
> 
> 标签：php, mysql, sql, wampserver

我正在使用以下更新查询来更新我的代码。它在本地服务器上运行良好，但在实时服务器上无法运行，有人可以告诉我可能是什么原因

```
<?php
        if (isset($_POST['submitContactInfo'])) {
            $socityId = $_SESSION['socityid'];
            $city = $_POST['city'];
            $pin = $_POST['pin'];
            $state = $_POST['state'];
            $telephone = $_POST['telephone'];
            $mobile = $_POST['mobile'];
            $email = $_POST['email'];
            $address = $_POST['address'];

            $sql = "UPDATE `_acappv1`.`society_profile` SET `ADDR` = '$address', `CITY` = '$city', `PIN` = '$pin', `STATE` = '$state', `TEL` = '$telephone', `MOBILE` = '$mobile', `EMAIL` = '$email' WHERE `society_profile`.`SOCIETY_ID` = '$socityId'; ";

            $res = mysql_query($sql);
        }
        ?> 
```

我注意到一件事，当我单击提交按钮时，在服务器端页面刷新，而在客户端页面不刷新并添加数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:03:49.470

非常感谢你们所有人，我通过对 mysql 查询进行小的更改，通过删除`_acappv1`. （数据库名称），它开始工作。

# python - 信号槽 TabWidget

> ID：15484003
> 
> 赞同：0
> 
> 时间：2013-03-18T18:18:02.380
> 
> 标签：python, user-interface, pyqt4, pyside

我创建了一个小应用程序，在其中我使用 QTabWidget 和用户请求添加和删除选项卡（当我添加一个它实际上创建要添加的小部件），然后当前选项卡应该连接到另一个Gui 部分的按钮 QlineEdit 和进度条，我的问题是当我删除页面并删除页面内的小部件时，信号和插槽的连接会自动删除还是应该手动断开它们？

提前感谢任何会回答的人。一个pyside新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:27:02.420

我正在回答我自己的问题，希望对其他人有所帮助。是的，当您删除 tabwidget 中的子小部件时，连接会自动删除。有关更多信息，请参阅“使用 Python 进行 GUI 编程：QT 版” [https://www.commandprompt.com/community/pyqt/x1631.htm](https://www.commandprompt.com/community/pyqt/x1631.htm)

# ruby-on-rails - 如何确定我的 Rails 是在开发环境中而不是在测试环境中？

> ID：15484004
> 
> 赞同：82
> 
> 时间：2013-03-18T18:18:03.517
> 
> 标签：ruby-on-rails, testing, environment

我有一些代码只需要在 rails 应用程序在开发环境中（即 $ rails 服务器）而不是在测试环境中（即 $ rake 测试）时运行。

当我尝试

```
if Rails.env.development?
    dont run me during testing
end 
```

无论我在哪个环境中，代码都会执行。我什至尝试过：

```
if Rails.env.development? and not Rails.env.test?
    NO, REALLY, DONT RUN ME DURING TESTING
end 
```

但没有爱。

我应该怎么做？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-03-18T18:29:18.220

看起来你调用它是正确的。也许问题在于环境在某处的名称不同。在控制台中尝试：

```
> Rails.env
=> "development"
> Rails.env.development?
=> true
> Rails.env.test?
=> false 
```

...确认环境是您认为的那样。

# javascript - 在 textarea 上应用 0 高度 div 的类

> ID：15484009
> 
> 赞同：1
> 
> 时间：2013-03-18T18:18:10.650
> 
> 标签：javascript, jquery, html, css

在我的设计中，我有一个高度为 0 的 div（它的高度将通过一些 JS 代码在一些锚点单击上增加）和一个文本框。HTML 是：

```
<div class="container">
    <textarea class="foo-textarea"></textarea>
    <div class="foo">
        <ul>
            <li><a href="#">Test1</a></li>
            <li><a href="#">Test1</a></li>
            ...          
        </ul>
    </div>
</div> 
```

和以下CSS：

```
.foo { -webkit-box-shadow: rgb(116, 117, 117) 0px 1px 0px 0px inset, rgba(0, 0, 0, 0.74902) 0px 24px 30px 0px; -webkit-transition-delay: 0s; -webkit-transition-duration: 0.3499999940395355s; -webkit-transition-property: height; -webkit-transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1); box-shadow: rgb(116, 117, 117) 0px 1px 0px 0px inset, rgba(0, 0, 0, 0.74902) 0px 24px 30px 0px; color: rgb(85, 85, 85); display: block; font-family: 'lucida grande' , tahoma, verdana, arial, sans-serif; font-size: 11px; height: 0px; left: 20px; line-height: 18px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; overflow-x: hidden; overflow-y: hidden; position: absolute; left: 0px; top: 0px; width: 642px; z-index: 99; cursor: pointer; }

.foo-textarea { -webkit-appearance: none; -webkit-background-clip: border-box; -webkit-background-origin: padding-box; -webkit-background-size: auto; -webkit-border-image: none; -webkit-box-orient: vertical; -webkit-box-shadow: rgba(0, 0, 0, 0.0352941) 0px 0px 0px 0px inset; -webkit-rtl-ordering: logical; -webkit-transition-delay: 0s, 0s; -webkit-transition-duration: 0.20000000298023224s, 0.20000000298023224s; -webkit-transition-property: border, box-shadow; -webkit-transition-timing-function: linear, linear; -webkit-user-select: text; -webkit-writing-mode: horizontal-tb; background-attachment: scroll; background-clip: border-box; background-color: rgba(0, 0, 0, 0); background-image: none; background-origin: padding-box; background-size: auto; border-bottom-color: rgb(223, 223, 223); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: rgb(223, 223, 223); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(223, 223, 223); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(223, 223, 223); border-top-left-radius: 3px; border-top-right-radius: 3px; border-top-style: solid; border-top-width: 1px; box-shadow: rgba(0, 0, 0, 0.0352941) 0px 0px 0px 0px inset; box-sizing: border-box; color: rgb(85, 85, 85); cursor: auto; display: block; font-family: 'Helvetica Neue' , Helvetica, Arial, sans-serif; font-size: 12px; font-weight: normal; height: 140px; letter-spacing: normal; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 10px; margin-top: 0px; min-height: 20px; outline-color: rgb(85, 85, 85); outline-style: none; outline-width: 0px; overflow-x: hidden; overflow-y: hidden; padding-bottom: 9px; padding-left: 9px; padding-right: 9px; padding-top: 9px; position: relative; resize: none; text-align: start; text-indent: 0px; text-shadow: none; text-transform: none; vertical-align: middle; white-space: pre-wrap; width: 642px; word-spacing: 0px; word-wrap: break-word; writing-mode: lr-tb; } 
```

上面代码的实时 JS Fiddle 是[http://jsfiddle.net/VHsKc/1/](http://jsfiddle.net/VHsKc/1/)。我的问题是，当我将文本框悬停时，我看到手形光标在它上面。这可能是因为在具有“foo”类的 div 上应用了“cursor:pointer”样式，此时它位于具有绝对定位的文本框后面（位置：绝对；左：0px；顶部：0px；）。但是此时它的高度为0，为什么它显示手形光标？这可以解决吗？当我悬停文本框时，我不希望应用“foo”div 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:24:15.067

我会这样做的方式设置`.foo`为`display: none;`. 在您的 jQuery 中，因为我假设您想要为 height 元素设置动画，所以首先将 css 显示设置为阻塞，然后执行动画。

```
TRIGGER
    $('.foo').css('display','block');
    $('.foo').animate(YOUR ANIMATION); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:23:02.150

将`z-index`开启设置`.foo`为 -1。在`click()`增加其高度的处理程序中，将`.foo`' 的`z-index`属性更改回 99。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:25:58.350

将 LI 项设置为高度 0 并隐藏溢出。

[http://jsfiddle.net/VHsKc/4/](http://jsfiddle.net/VHsKc/4/)

```
.foo li {
    height: 0;
    overflow: hidden;
} 
```

您可能需要稍后根据需要将 LI 的高度设置为自动

# sql-server - 基于第 1 列和第 2 列的唯一组合的计数（第 3 列）和总和（第 4 列的值）；

> ID：15484010
> 
> 赞同：0
> 
> 时间：2013-03-18T18:18:11.270
> 
> 标签：sql-server

目标：基于第 1 列和第 2 列的唯一组合进行计数（第 3 列）和求和（第 4 列的值）；这可以在一个 SQL 语句中实现吗？如果是，准确的语法是什么？

说明：考虑一个有 4 列的表，例如

![在此处输入图像描述](../Images/1154bf6f081b4a965513a33b5e140e46.png)

任务是计算所有 Id_Indiv 并根据 4 个现有的属和种的唯一组合来总结权重值。

所需的输出是

![在此处输入图像描述](../Images/408be4a7fa712f15baef33034a558236.png)

如果可以在一个 sql 语句中创建所需的输出，它可能看起来有点像：

```
SELECT genus, species, count(ID_Indiv) as NoOfIndiv, sum(weight)
FROM (
    SELECT DISTINCT
           genus,
           species 
      FROM  TableName
)W
group by  genus, species; 
```

注意：可能有超过 50 种可能的 Genus*species 组合，我们不知道是否/何时会出现新的组合。因此我无法预先定义组合，但语句必须识别它们。

拜托，有人可以帮助我准确的 Sql 语句吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:25:58.397

你用什么嵌套`SELECT`语句？你不必那样做！

```
SELECT genus, species, count(ID_Indiv) as NoOfIndiv, sum(weight)
FROM TableName
GROUP BY  genus, species; 
```

`GROUP BY`将负责`{genus, species}`在每个组中使 pair 独一无二。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:25:48.897

看起来你的尝试非常接近......所以我不确定我是否过度简化了这个问题......但不应该只是简单`GROUP BY`地做你正在寻找的东西吗？

```
SELECT 
  genus, 
  species, 
  COUNT(*) AS NoOfIndiv, 
  SUM(weight) as TotalWeight
FROM YourTable
GROUP BY 
  genus, 
  species 
```

# python - 回归数据的 Scikit-learn 特征选择

> ID：15484011
> 
> 赞同：7
> 
> 时间：2013-03-18T18:18:20.903
> 
> 标签：python, scikit-learn

我正在尝试将使用 Python 模块 scikit-learn 的单变量特征选择方法应用于 svmlight 格式的回归（即连续值响应值）数据集。

我正在使用 scikit-learn 0.11 版。

我尝试了两种方法——第一种方法失败了，第二种方法适用于我的玩具数据集，但我相信对于真实数据集会给出毫无意义的结果。

我想获得关于合适的单变量特征选择方法的建议，我可以应用它来为回归数据集选择前 N 个特征。我要么想（a）弄清楚如何使 f_regression 函数工作，要么（b）听取其他建议。

上面提到的两种方法：

1.  我尝试使用 sklearn.feature_selection.f_regression(X,Y)。

这失败并显示以下错误消息：“TypeError：copy() 只需要 1 个参数（给定 2 个）”

1.  我尝试使用 chi2(X,Y)。这“有效”，但我怀疑这是因为我的玩具数据集中的两个响应值 0.1 和 1.8 被视为类标签？据推测，对于真实数据集，这将不会产生有意义的卡方统计量，其中存在大量可能的响应值，并且每个单元格中的数量[具有特定响应值和正在测试的属性的值]将是低的？

请找到我粘贴到此消息末尾的玩具数据集。

下面的代码片段应该给出我上面描述的结果。

```
from sklearn.datasets import load_svmlight_file

X_train_data, Y_train_data = load_svmlight_file(svmlight_format_train_file) #i.e. change this to the name of my toy dataset file

from sklearn.feature_selection import SelectKBest
featureSelector = SelectKBest(score_func="one of the two functions I refer to above",k=2) #sorry, I hope this message is clear
featureSelector.fit(X_train_data,Y_train_data)
print [1+zero_based_index for zero_based_index in list(featureSelector.get_support(indices=True))] #This should print the indices of the top 2 features 
```

提前致谢。

理查德

我设计的 svmlight 文件的内容 - 为了清楚起见，插入了额外的空行：

1.8 1:1.000000 2:1.000000 4:1.000000 6:1.000000#mA

1.8 1:1.000000 2:1.000000#mB

0.1 5:1.000000#mC

1.8 1:1.000000 2:1.000000#mD

0.1 3:1.000000 4:1.000000#mE

0.1 3:1.000000#mF

1.8 2:1.000000 4:1.000000 5:1.000000 6:1.000000#mG

1.8 2:1.000000#mH

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T19:02:02.813

正如 larsmans 所指出的，chi2 不能用于回归数据的特征选择。

更新到 scikit-learn 版本 0.13 后，以下代码为上述玩具数据集选择了前两个特征（根据 f_regression 测试）。

```
def f_regression(X,Y):
   import sklearn
   return sklearn.feature_selection.f_regression(X,Y,center=False) #center=True (the default) would not work ("ValueError: center=True only allowed for dense data") but should presumably work in general

from sklearn.datasets import load_svmlight_file

X_train_data, Y_train_data = load_svmlight_file(svmlight_format_train_file) #i.e. change this to  the name of my toy dataset file

from sklearn.feature_selection import SelectKBest
featureSelector = SelectKBest(score_func=f_regression,k=2)
featureSelector.fit(X_train_data,Y_train_data)
print [1+zero_based_index for zero_based_index in list(featureSelector.get_support(indices=True))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T03:33:13.230

您也可以尝试通过 L1/Lasso 正则化进行特征选择。专门为此设计的类`RandomizedLasso`将在数据的多个子样本上训练 LassoRegression，并选择这些模型最常选择的特征。您也可以只使用`Lasso`,`LassoLars`或`SGDClassifier`做同样的事情，而不需要重新采样，但速度更快。

# java - Performance testing : meaningful graph of a 3 variable statistic result

> ID：15484017
> 
> 赞同：0
> 
> 时间：2013-03-18T18:18:49.720
> 
> 标签：java, performance, statistics

I'm performing performance testing of a computer application (JAVA). The test concerns the response time (t) obtained while testing the application with a certain number of concurrent threads (th) and a certain amount of data (d).

Suppose I have the following results:

```
+------+-------+-----+
|  th  |   d   |  t  |
+------+-------+-----+
|   2  |   500 |  A  |
+------+-------+-----+
|   4  |   500 |  B  |
+------+-------+-----+
|   2  |  1000 |  C  |
+------+-------+-----+
|   4  |  1000 |  D  |
+------+-------+-----+ 
```

How can i benefit the most of these results such as knowing the limit of my app as well as creating meaningful graphs to represent these results.

I'm not a statistics person so pardon my ignorance. Any suggestions would be really helpful (even related statistics technical keywords I can Google).

Thanks in advance.

**EDIT**

The tricky part for me was to determine the application's performance evolution taking both the number of threads and the amount of data into consideration in one plot.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:16:18.657

是的，有一种方法，请查看我用油漆制作的以下示例（我选择的数字只是随机的）： ![线程和数据 VS 时间](../Images/67d81418304e468d12bbabb2c912af63.png)

# c++ - Run-time error when passing derived-class pointer C++

> ID：15484018
> 
> 赞同：0
> 
> 时间：2013-03-18T18:18:49.870
> 
> 标签：c++, pointers, vector, segmentation-fault

I am getting a seg fault when trying to add a pointer to an object to a vector in an instance of another object. I am adding multiple pointers to the vector at once and the first one works but the second attempt keeps tossing seg faults.

```
class Observer {
  Observer();
  observe();
};

class Subject {
  std::vector<Observer*> *observers;
  std::string name;

  Subject();
  virtual std::string getName();
  virtual void addObserver(Observer *observer) {
    observers->push_back(observer);
  }
};

class Base : public Subject {
  Base(std::string newName) { name = newName; }
};

class Derivative : public Subject, public Observer {
  float a;
  float b;
  float c;
  Derivative(a, b, c) { this->a = a; this->b = b; this->c = c; }

};

class Board : public Base {
   Base *base;

   Board(std::string newName, Base *newBase) { name = newName; base = newBase; }

   void initializeDerivatives(int start, int end) {
     for (int i = start; i <= end; ++i) {
       addObserver(new Derivative(start, start + 1, start + 2)); //works
       base->addObserver(new Derivative(start, start + 1, start + 2)); //THIS WORKS
       addObserver(new Derivative(start, start + 2, start + 3)); //works
       base->addObserver(new Derivative(start, start + 2, start + 3)); //seg fault here
     }
   }
};

int main() {
  Base myBase("MYBASE");
  Board myBoard("MYBASE", myBase);

  myBoard.initializeDerivatives(1, 10);
} 
```

I was getting seg faults earlier when I declared myBoard and myBase as pointers: Base* myBase = new Base("MYBASE"); Board* myBoard = new Board("MYBASE", myBase);

And I was unsure why that was since I thought using the new operator would actually initialize the instance of the object. Changing it to make the actual objects still allows me to add one pointer to the observers vector, but the second one isn't working. Any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:41:16.523

在`class Subject`，你应该改变这个：

```
std::vector<Observer*> *observers; 
```

对此：

```
std::vector<Observer*> observers; 
```

作为指针，您的代码不会显示该指针在任何地方被初始化。如果它在构造函数**中**初始化，则可能存在内存泄漏，因为`Subject`没有析构函数。

# ms-access - Record how long a user is modifying a form in Microsoft Access

> ID：15484021
> 
> 赞同：0
> 
> 时间：2013-03-18T18:18:59.010
> 
> 标签：ms-access, ms-access-2007

I'm using Access as a front end to SQL Server. We have a split form where the users select a record, insert some new information with the form, then continue on to the next record. My manager would like to see how long it takes a user to modify a record. So I would like a timer to start when someone clicks on a record then it to stop when they click on the next record or when they select complete in the form. I would like this imformation exported to an excel sheet. It might be easier to get the average time for each user since most users are modifiying over 100 records per day. Is there anyway this is possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:05:17.103

**简单的解决方案：您可以在表单的On Dirty**事件中编写一个函数，并将一条记录添加到具有当前记录的 ID、用户名和当前时间（开始时间）的表中。在表单的**On AfterUpdate**中，使用函数更新同一条记录并将当前时间添加为（结束时间）。当用户开始编辑或添加记录时，时间会记录在此表中。当他/她更新记录时，时间被添加为结束时间。

现在您有一个包含 ID、用户名、开始时间、结束时间的表。通过查询，您可以计算每条记录从编辑开始、结束到更新所花费的时间。您可以随时将此表导出到 Excel 工作表。

复杂的方法：

我也有类似的情况。如果用户在指定时间内空闲（针对网络流量问题），我被要求关闭数据库

我在表单的计时器事件中使用了波纹管功能。它每 5 秒读取一次活动表单的名称并将其保存在静态变量中。此函数每 5 秒将 Screen.activeform.name 与此静态变量进行比较。如果活动表单的名称与此静态变量不同，则表明用户处于活动状态（正在做某事），因此它会重置计时器静态变量。否则表示用户空闲并添加定时器。

当计时器达到应用程序选项中设置的指定量（比如说 5 分钟）时，这意味着用户已经空闲了 5 分钟，我只需运行 Application.Quit 并关闭数据库。

我现在很忙，没有时间处理它。您可以修改此函数以检查当前记录甚至当前控件（而不是当前表单），并且在重置静态计时器变量之前，将计时器变量、记录的用户名和 ID 导出到表中并使用查询计算花费的时间并将其导出到excel。

希望能帮助到你。

如果我这个周末有空，我会尝试做一个简单的数据库来展示它是如何工作的

我的计时器：

```
' IDLEMINUTES determines how much idle time to wait for before
' running the IdleTimeDetected subroutine.

IdleMinutes = fGetOption("Machine", "AutoLogOff", False)
If IdleMinutes = 0 Then Exit Sub

Static PrevControlName As String
Static PrevFormName As String
Static ExpiredTime

Dim ActiveFormName As String
Dim ActiveControlName As String
Dim ExpiredMinutes

On Error Resume Next

    ' Get the active form and control name.

    ActiveFormName = Screen.ActiveForm.Name
    If Err Then
        ActiveFormName = "No Active Form"
        Err = 0
    End If

    ActiveControlName = Screen.ActiveControl.Name
    If Err Then
        ActiveControlName = "No Active Control"
        Err = 0
    End If

    ' Record the current active names and reset ExpiredTime if:
    '    1\. They have not been recorded yet (code is running
    '       for the first time).
    '    2\. The previous names are different than the current ones
    '       (the user has done something different during the timer
    '        interval).
    If (PrevControlName = "") Or (PrevFormName = "") _
        Or (ActiveFormName <> PrevFormName) _
        Or (ActiveControlName <> PrevControlName) Then
        PrevControlName = ActiveControlName
        PrevFormName = ActiveFormName
        ExpiredTime = 0
    Else
        ' ...otherwise the user was idle during the time interval, so
        ' increment the total expired time.
        ExpiredTime = ExpiredTime + Me.TimerInterval
    End If

    ' Does the total expired time exceed the IDLEMINUTES?
    ExpiredMinutes = (ExpiredTime / 1000) / 60
    'Debug.Print ExpiredMinutes
    If ExpiredMinutes >= IdleMinutes Then
        ' ...if so, then reset the expired time to zero...
        ExpiredTime = 0
        ' ...and call the IdleTimeDetected subroutine.
        IdleTimeDetected ActiveFormName
    End If

    Sub IdleTimeDetected(ActiveFormName As String)

        DoCmd.Close acForm, ActiveFormName

        CloseAllForms
        Application.Echo True
        Application.Quit

    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T00:29:12.710

这是一个简单的示例数据库来帮助您。

[样本数据库](http://rapidgator.net/file/657d851d174faa9dcaa319b27ad8af18/Database2.accdb.html)

这个数据库是用Office 2013写的，希望你能打开。打开 frm 表单并开始编辑记录或开始插入新记录。编辑/插入记录的开始和结束将记录在**结果**表中。您可以在一天结束时将此表导出到 Excel 文件。

请注意，此数据库需要一些修改。例如你必须添加一些代码来识别当前的用户名我认为你可以管理这个部分

# ruby-on-rails - Rails:Could not find generator rolify

> ID：15484022
> 
> 赞同：4
> 
> 时间：2013-03-18T18:19:00.913
> 
> 标签：ruby-on-rails, generator, rolify

Edit!

I set up the rolify gem and bundle my app:

I added:

```
gem "rolify" #to add roles like admin and member to the users 
```

to the gemfile and then ran

```
bundle install 
```

when i try to run

```
rails g rolify Role User 
```

I get

```
Could not find generator rolify. 
```

Google didn't bring up anything

Any ideas?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T18:48:42.020

必须添加 git 存储库才能使其工作：

```
gem "rolify",        :git => "git://github.com/EppO/rolify.git" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-17T15:28:16.307

我在 Rails 4.0.0.rc1 和 Rolify 3.2.0 上，我不得不运行`rails g rolify:role Role User`而不是`rails g rolify Role User`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T14:49:01.953

如此处所述[，](https://github.com/EppO/rolify/issues/137)您可以使用`rails g rolify:role`.

# search - Dimension Search with given number of characters in Endeca

> ID：15484024
> 
> 赞同：0
> 
> 时间：2013-03-18T18:19:03.317
> 
> 标签：search, configuration, dimensions, endeca

I have requirement to search an dimension in endeca which start with some word.For example if the dimension is Arena it can be searched with Ar or ar or Are or Aren.
How to achive this ?
What configuration needs to be done ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:28:55.087

您正在寻找通配符 AR* 吗？

需要在要搜索的维度或属性上启用它。

# reporting-services - MDX times out - Bad MDX or Cube design?

> ID：15484026
> 
> 赞同：1
> 
> 时间：2013-03-18T18:19:09.053
> 
> 标签：reporting-services, ssrs-2008, ssas, mdx

I am trying to work out why an SSRS 2008 R2 report keeps timing out.

Unfortunately I am not familiar with MDX (although I did read up little about it).

So basically I would like to know whether the MDX is not good (because it might have been generated by the designer etc) or because there could be an issue with the cube design. I would lean towards cube design because I am told that at one point this query ran fine, but then it may be because there's more data now - i dunno.

```
SELECT NON EMPTY { [Measures].[Unpaid Sick Hours], [Measures].[Paid Sick Hours], 

[Measures].[All Timecard Hours]
            , [Measures].[Paid Sick Incidents], [Measures].[% Sick Time] } 
ON COLUMNS, NON EMPTY { ([Position].[Position Number].[Position Number].ALLMEMBERS 
            * [Position].[Position Title].[Position Title].ALLMEMBERS 
            * [Union].[Union].[Union].ALLMEMBERS 
            * [Time].[Day Of Week].[Day Of Week].ALLMEMBERS 
            * [Employee].[Employee Type].[Employee Type].ALLMEMBERS 
            * [Employee].[Employee Number].[Employee Number].ALLMEMBERS 
            * [Employee].[Employee First Name].[Employee First Name].ALLMEMBERS 
            * [Employee].[Employee Last Name].[Employee Last Name].ALLMEMBERS ) } 
            DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME 

ON ROWS FROM ( SELECT ( STRTOSET("[Time].[Fiscal Year-Quarter-Month].[F Quarter].&[20124]", CONSTRAINED) ) 
ON COLUMNS FROM ( SELECT ( STRTOSET("[Cost Centre].[Cost Centre Hierarchy].&[1002]", CONSTRAINED) ) 
ON COLUMNS FROM [Contoso HR])) 
```

Appreciate the help.

thanks, KS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:46:48.770

有几点需要考虑：

1.  如前所述，* 表示 CROSS JOIN，而 CROSS JOINS 确实有性能损失。拥有尽可能多的东西会让你头疼。一个短期的选择是尝试[NonEmptyCrossjoin](http://msdn.microsoft.com/en-us/library/ms144797.aspx)。

2.  您正在多次对 [Position] 和 [Employee] 进行 CROSS JOIN。您是否可以使用 [Employee Number] 交叉加入 [Employee]，并使用成员属性获取 [Employee Type]、[Employee First Name]、[Employee Last Name]

3.  多维数据集是否来自 SQL Server 数据库？如果是这样，鉴于该报告的输出似乎相当平淡。我会放弃 MDX 并简单地使用 SQL 来收集数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:36:32.610

MDX 看起来相当直接......我们在这里谈论多少数据？这些措施有多复杂？除了 [%sick time] 之外，它们都是基本措施吗？

当我有一个没有执行的 MDX 查询时，我做的第一件事就是在 MDX studio 中运行它，看看它是如何被 SSAS 引擎处理的。

# javascript - Get box boundaries from select box in OpenLayers

> ID：15484030
> 
> 赞同：0
> 
> 时间：2013-03-18T18:19:21.333
> 
> 标签：javascript, openlayers

I have an OpenLayers map and I want users to be able to draw a box by dragging their mouse (similar to [this example here](http://dev.openlayers.org/releases/OpenLayers-2.12/examples/select-feature.html), select the "select feature (0 features selected)" option first) and obtain the boundaries of the drawn box.

I can manage to draw the box using smth like below, however it won't work when there are no features in the map or no features selected, and that will certainly be the case.

```
new OpenLayers.Control.SelectFeature(this._layers.osm, {
        multiple: true,
        box: true, 
        hover: false, 
        toggleKey: 'ctrlKey', 
        multipleKey: 'shiftKey',
        onBeforeSelect: function() {
            console.log(arguments);
        }
    }) 
```

Is there an easy way to accomplish this in OpenLayers or should I do the heavy lifting myself by tracking mouse drags and drawing/removing polygons accordingly?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:01:34.257

尝试使用`"boxselectionend"`SelectFeature 控件的事件（需要 2.12）

但是这个事件不返回边界或所做的选择，只返回一个图层数组。

另一种选择是在外部创建 Handler.Box，这就是我在某些情况下所做的：

```
var mySelectFeature = OpenLayers.Control.SelectFeature(...);
var myHandlerBox = new OpenLayers.Handler.Box(
    mySelectFeature, {
        done: function(bounds) {
            OpenLayers.Control.SelectFeature.prototype.selectBox.apply(
                              mySelectFeature, arguments);
            ... your code ...
        }
    },
    {}
); 
```

# git - 如何分解 git pull 进入提取+合并？

> ID：15484033
> 
> 赞同：4
> 
> 时间：2013-03-18T18:19:21.977
> 
> 标签：git

**注意：**这个问题的动机是`git`更好地理解，而不是解决任何具体问题。IOW，“实现相同目标”的替代方法（即回避标题中的问题）将是无关紧要的。

命令

```
git pull 
```

...应该等同于序列

```
git fetch
git merge 
```

可以`git pull <REMOTE> <BRANCH>`（即带有远程和从中提取的分支的显式参数）分解为类似的 a`fetch`后跟 a的序列`merge`吗？

我想这部`fetch`分会很简单

```
git fetch <REMOTE> <BRANCH> 
```

...但是，如果是这样，我无法弄清楚`git merge ...`遵循它的正确方法。

* * *

我已经尝试过“显而易见”的事情。例如，如果我运行`git branch -r`，分支中的输出列表`<REMOTE>/<BRANCH>`，所以我尝试了`git merge -m 'some message' <REMOTE>/<BRANCH>`，但`git`用 , 回复`Already up-to-date.`，并`git-log`显示它`HEAD`保持在尝试之前的相同提交`git merge`。为了确认这一点，我将`git fetch ...`and`git merge ...`与对 的调用括起来`git log ...`，如下所示：

```
git log --all --oneline --graph --decorate -10
git fetch <REMOTE> <BRANCH>
git merge -m 'some message' <REMOTE>/<BRANCH>
git log --all --oneline --graph --decorate -10 
```

两次调用产生的输出`git log ...`是*相同*的，它们都显示本地`<BRANCH>`领先`<REMOTE>/<BRANCH>`。

* * *

下面的玩具示例以`/bin/sh`脚本的形式重现了我上面描述的结果。（该脚本在 Ubuntu Linux 上进行了测试；YMMV。）

```
#!/bin/sh

BASEDIR=/tmp/gittest
REMOTENAME=remrepo
REMOTEURL="$BASEDIR/$REMOTENAME"
BRANCHNAME=test
BRANCHNAME=master

rm -rf $REMOTEURL
mkdir -p $REMOTEURL

rm -rf $BASEDIR/clone1 $BASEDIR/clone2

git init --bare -q $REMOTEURL/.git
git clone -q -o $REMOTENAME $REMOTEURL $BASEDIR/clone1
git clone -q -o $REMOTENAME $REMOTEURL $BASEDIR/clone2

pushd $BASEDIR/clone1 >/dev/null
git checkout -qb $BRANCHNAME
echo $RANDOM >> random1.txt
git add .
git commit -qam "$(date -Ins)"
git push -q $REMOTENAME $BRANCHNAME

pushd $BASEDIR/clone2 >/dev/null
git pull -q $REMOTENAME
git checkout -q $BRANCHNAME
echo $RANDOM >> random2.txt
git add .
git commit -qam "$(date -Ins)"
git push -q $REMOTENAME $BRANCHNAME

echo
echo 'git log --all --oneline --decorate --graph :'
git log --all --oneline --decorate --graph
echo

pushd >/dev/null
git checkout -q $BRANCHNAME
echo $RANDOM >> random1.txt
git commit -qam "$(date -Ins)"

echo 'git log --all --oneline --decorate --graph :'
git log --all --oneline --decorate --graph
echo

git fetch -q $REMOTENAME $BRANCHNAME
git merge -m "$(date -Ins)" $REMOTENAME/$BRANCHNAME

echo
echo 'git log --all --oneline --decorate --graph :'
git log --all --oneline --decorate --graph

git pull -q --no-edit $REMOTENAME $BRANCHNAME

echo
echo 'git log --all --oneline --decorate --graph :'
git log --all --oneline --decorate --graph 
```

如果运行它，输出将类似于以下内容：

```
warning: You appear to have cloned an empty repository.
warning: You appear to have cloned an empty repository.

git log --all --oneline --decorate --graph :
* 2326793 (HEAD, remrepo/master, master) 2013-03-19T10:56:42,838038000-0400
* 34ea848 2013-03-19T10:56:42,360743000-0400

git log --all --oneline --decorate --graph :
* 81cb43f (HEAD, master) 2013-03-19T10:56:43,057198000-0400
* 34ea848 (remrepo/master) 2013-03-19T10:56:42,360743000-0400

Already up-to-date.

git log --all --oneline --decorate --graph :
* 81cb43f (HEAD, master) 2013-03-19T10:56:43,057198000-0400
* 34ea848 (remrepo/master) 2013-03-19T10:56:42,360743000-0400

git log --all --oneline --decorate --graph :
*   e60b993 (HEAD, master) Merge branch 'master' of /tmp/gittest/remrepo
|\
| * 2326793 2013-03-19T10:56:42,838038000-0400
* | 81cb43f 2013-03-19T10:56:43,057198000-0400
|/
* 34ea848 (remrepo/master) 2013-03-19T10:56:42,360743000-0400 
```

从上面的输出可以看出，

1.  接近末尾的 fetch + merge 序列对输出没有影响`git log...`
2.  该`git merge`命令的输出是`Already up-to-date.`，即使不是这种情况（远程和本地存储库各有一个提交分歧）。
3.  在此“合并”之后，本地分支 ( `master`) 是跟踪分支 ( `remrepo/master`) 之前的一个提交。
4.  与 fetch + merge 序列相比，pull 做的是正确的事情（即更新跟踪分支，并执行合并），即使两组命令都接收到完全相同的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:14:28.123

正如手册页[`git pull`](https://www.kernel.org/pub/software/scm/git/docs/git-pull.html)所说：

> 将来自远程存储库的更改合并到当前分支中。在其默认模式下，git pull 是 git fetch 后跟 git merge FETCH_HEAD 的简写。
> 
> 更准确地说， git pull 使用给定的参数运行 git fetch 并调用 git merge 以将检索到的分支头合并到当前分支中。使用 --rebase，它运行 git rebase 而不是 git merge。

基于此（假设您没有使用`--rebase`），`git pull`命令应该几乎等同于：

```
# Fetch the info about the branch from the remote
git fetch <REMOTE> <BRANCH>:<REMOTE>/<BRANCH>

# Switches your working copy to the branch that you would like the
# changes to be merged into
git checkout <LOCAL_BRANCH_NAME>

# Merge the changes from <REMOTE>/<REMOTE_BRANCH_NAME> into your
# currently checked out branch which should <LOCAL_BRANCH_NAME>
# after the previous checkout command
git merge <REMOTE>/<REMOTE_BRANCH_NAME> 
```

从远程引入有关所有参考的信息通常没有害处（除非您有一些特定要求不这样做）。如果您对此感到满意，则`git fetch`可以在没有任何参考规范的情况下运行第一个，即

```
git fetch <REMOTE> 
```

如果您使用该`--rebase`选项，该[`git merge`](https://www.kernel.org/pub/software/scm/git/docs/git-merge.html)命令将替换为以下[`git rebase`](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)命令：

```
git rebase <REMOTE>/<REMOTE_BRANCH_NAME> 
```

PS：与 不同`git merge`，`git rebase`它也采用可选的目标分支参数。如果不指定，它将使用当前签出的分支。

感谢 kostix 指出`local-branch:remote-branch`语法[`git fetch`](https://www.kernel.org/pub/software/scm/git/docs/git-fetch.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:31:07.230

我认为问题在于您的玩具示例使用`git fetch <repository> <branch>`- 仅由分支名称组成的*refspec*被解释为远程分支的名称，该名称被提取，并且其提示提交的 SHA-1 名称被写入`.git/FETCH_HEAD`文件; 由于 refspec 错过了 ":destination" 部分（使用获取的内容更新哪个本地分支），因此没有更新本地分支。所以基本上你的 git fetch 做了一个空运行。

请重新阅读[git-fetch 手册](https://www.kernel.org/pub/software/scm/git/docs/git-fetch.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:04:32.920

简短的回答是……

```
git pull <remote> <branch> 
```

在功能上等同于：

```
git fetch <remote>
git merge <remote>/<remote_branch> 
```

如果您收到回复说一切都是最新的，那么您要么没有运行，要么`git fetch <remote>`您实际上是最新的。

* * *

编辑：在阅读了您对不同答案的一些评论后，听起来您已经运行了`git merge <remote>/<branch>`命令但没有得到更新，即使您验证了它们在不同的提交上。尝试这些步骤（可能重复，但试一试）

```
git log -1 <local_branch>
git log -1 <remote>/<remote_branch> 
```

如果这两个不相同，请尝试以下操作。
*（如果是相同的，那么你已经是最新的了！）*

```
git checkout <local_branch>
git merge <remote>/<remote_branch> 
```

如果它仍然说您是最新的，那么也许您在本地有需要推送的提交，也许这就是您看到不同提交的原因。

```
git push <remote> <local_branch>:<remote_branch> 
```

使用 branch:branch 格式只是一种非常具体地说明您尝试推送的内容的方式。它说推：

现在再次检查这些日志..

```
git log -1 <local_branch>
git log -1 <remote>/<remote_branch> 
```

如果您仍然看到不同的提交 - 那么您确实有一个边缘情况。尝试复制您为登录 / 获得的提交哈希。然后直接合并到你的本地分支

```
git merge <SHA1> 
```

# android - how to set up ListFragment properly?

> ID：15484034
> 
> 赞同：1
> 
> 时间：2013-03-18T18:19:25.737
> 
> 标签：android, android-layout, android-fragments

I try to create tabs with ListFragment in it. I've tried several different appoaches but neither of them works. I don't know how to set container for ListFragment obkect properly. Here is java code.

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 

        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tabOne = actionBar.newTab().setText("ONE");
        ActionBar.Tab tabTwo = actionBar.newTab().setText("TWO");

        tabParkCinema.setTabListener(new tabListener());
        tab28Cinema.setTabListener(new tabListener());

        actionBar.addTab(tabOne);
        actionBar.addTab(tabTwo);

        }

    protected class tabListener implements ActionBar.TabListener {

        ParkFragment firstFragment;

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            switch (tab.getPosition()){
            case 0:
                if (firstFragment == null){
                    firstFragment = new ParkFragment();
                    System.out.println("initialized");
                    ft.add(R.id.cont, firstFragment,"FIRST");
                }
                else{
                    ft.attach(firstFragment);
                }
                break;

            case 1:
                if (firstFragment == null){
                    firstFragment = new ParkFragment();
                    ft.add(R.id.cont,firstFragment,"SECOND");
                }
                else{
                    ft.attach(firstFragment);
                }
                break;
            }
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {

        }
    };

    public class ParkFragment extends ListFragment {
        private ArrayList<Cinemas> cinema;
        private CinemasAdapter cinemaAdapter;
        private View v;
        //private ListView list;

          @Override
          public View onCreateView(LayoutInflater in, ViewGroup gr, Bundle savedInstanceState) {
            v = in.inflate(R.id.listing1, gr,false);
            super.onActivityCreated(savedInstanceState);
            cinema = new Handler().handle(); 
            cinemaAdapter = new CinemasAdapter(MainActivity.this, R.layout.movie_data_row, cinema);
            setListAdapter(cinemaAdapter);
            return gr;
          }

          @Override
          public void onListItemClick(ListView l, View v, int position, long id) {
              Cinemas movie = cinemaAdapter.getItem(position);
                Intent intent = new Intent (MainActivity.this, More.class);
                intent.putExtra("Cinemas", movie);
                intent.putExtra("data", movie.getBitmap());

                Bundle translateBundle =
                      ActivityOptions.makeCustomAnimation(MainActivity.this,
                      R.anim.slide_in_left, R.anim.slide_out_left).toBundle();
              startActivity (intent, translateBundle);

          }
        } 
} 
```

And activity_main.XML file:

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/cont"
              android:layout_width="match_parent"
              android:layout_height="match_parent" >
            <ListView   
                android:id = "@+id/listing1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >    
         </ListView>
</LinearLayout> 
```

Thank you for reading, any help will be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:49:29.330

1) 创建一个[FragmentManager](http://developer.android.com/reference/android/app/FragmentManager.html)对象。

2)`beginTransaction()`在这个对象上使用方法来创建一个[FragmentTransaction](http://developer.android.com/reference/android/app/FragmentTransaction.html)对象。

3）使用对象`add(int containerViewId, Fragment fragment, String tag)`上的方法添加片段。`FragmentTransaction`

在此方法中，您放置了对容器 id 的引用、一个新的`ListFragment`（或您编写的类）和一个标签（如果需要，可以轻松获得对容器的引用`ListFragment`）。

请注意，您必须更改您的 xml 布局。您可以添加一个`FrameLayout`带有 id 的。然后，将此 id 赋予对象的方法`add()`。`FragmentTransaction`

**编辑**

代码示例：

> 公共类 ContentActivity 扩展 Activity {
> 
> ```
>  public void onCreate(Bundle savedInstanceState) {
> 
>    //your action bar stuff
> 
>    FragmentManager fragmentManager = getFragmentManager();
>    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
>    fragmentTransaction.add(R.id.parkfragment, new ParkFragment(), "locations");
>    fragmentTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
>    fragmentTransaction.commit();
>  }
> 
>  public class ParkFragment extends ListFragment {
>    //your methods
>  }
> 
>  protected class tabListener implements ActionBar.TabListener {
>    //your methods
>  } 
> } 
> ```

你的 xml 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/parkfragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

# ruby-on-rails-3 - how can I resolve this gemfile conflict

> ID：15484035
> 
> 赞同：0
> 
> 时间：2013-03-18T18:19:29.370
> 
> 标签：ruby-on-rails-3, bundler, locomotivecms, excon

I'm getting this error after `bundle install`. How can I fix it?

```
 Bundler could not find compatible versions for gem "excon":
  In Gemfile:
    locomotive-heroku (~> 0.0.2) ruby depends on
      excon (~> 0.9.4) ruby

    excon (0.20.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:57:07.840

我通过放置机车/引擎和机车/heroku的当前存储库的位置来修复它。即 gem 'locomotive-heroku', git: 'repolocation', require: 'locomotive/heroku' 这也是最终让我在 heroku 上安装 locomotivecms 的原因。我确实需要将其设置为在生产环境中编译资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:32:30.140

卸载最新版本的 gem `gem uninstall excon -v=0.20.0`：. 然后再次捆绑安装以查看它是否解决了问题。

# shell - Looping through and modifying a list in unix

> ID：15484037
> 
> 赞同：1
> 
> 时间：2013-03-18T18:19:35.177
> 
> 标签：shell, unix, for-loop, sed, cat

I am trying to take the contents of a list `list1` and loop through them comparing them to another list generated by `finger`. When a name from `list1` is found in `finger` it should be removed from `list1`.

```
for i in $(cat list1); do
if finger | grep $i
    echo "$i is online"
    sed '/$i/d' <list1 >templist
    mv templist list1
fi
done 
```

`list1` does not change. Once the script has run, the contents of `list1` are the same. I think the problem has to do with the `cat` at the beginning but I'm not sure.

Thanks, Ryan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:28:58.703

尝试双引号：

```
sed "/$i/d" <list1 >templist 
```

（列表中实际上没有任何内容`$i`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:54:28.947

根本不需要循环：

```
comm -23 <(sort list1) <(finger | sort) > tmpfile && 
mv list1 list1.bak &&
mv tmpfile list1 
```

`comm -23 file1 file2`返回 file1 中未出现在 file2 中的行。file1 和 file2 必须排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:29:58.187

如果`list1`不是很大（例如，最多几百个项目），您可以这样做：

```
finger | egrep -v "$(paste -sd'|' list1)" > templist && mv templist list1 
```

这是如何工作的：`paste`将列表转换为管道分隔的列表，该列表使用`$(...)`构造内联到命令中，被 egrep 解释为正则表达式，并用`-v`标志取反以仅包含不匹配的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:54:40.270

保持原作的精神，我可能会按照这些思路重写它，以避免重复的手指和列表中的其他事情。

```
finger > fingerlist
while read aline ; do
    if grep "$aline" fingerlist > /dev/null ; then
        echo "$aline is online"
    else
        echo "$aline" > templist
    fi
done < list1
[ -s templist ] && mv -f templist list1
rm fingerlist 
```

# macos - MAC OS get monitor vertical sync and horz display rate

> ID：15484038
> 
> 赞同：0
> 
> 时间：2013-03-18T18:19:35.500
> 
> 标签：macos, command

I need to get the vertical sync rate and horizontal scan rate of a customized LCD monitor connected to a mac mini. On Linux I know "ddcprobe" retrieves those hardware information. How can I get those info on mac? The monitor is connected to a mac mini via HDMI cable if that helps.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:25:39.560

有[石英显示服务](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/Quartz_Services_Ref/Reference/reference.html)的`CGDisplayCopyDisplayMode`。`CGDisplayModeGetRefreshRate`您可以使用从返回的不透明类型获取刷新率。我不相信有办法检索水平速率。

# sql - In Excel, can I get Data From an External Source (Oracle) that uses the =HYPERLINK("http://url.com", "Pretty Name") function?

> ID：15484039
> 
> 赞同：1
> 
> 时间：2013-03-18T18:19:36.330
> 
> 标签：sql, oracle, excel, url, hyperlink

I'm trying to get my URLs in my Pivot Table / Pivot Chart to display as hyperlinks.

I've set up a connection, "From Other Sources," in my case Oracle. In the SQL statement, I say,

```
SELECT '=HYPERLINK("http://www.google.com?' || otherStuff || '", "Pretty Name")'; 
```

This would return to my workbook: =HYPERLINK("[http://www.google.com?1234567890](http://www.google.com?1234567890)", "Pretty Name")

However, this stays as text in Excel ( the string "=HYPERLINK...Name")" ). I want it to switch to "Pretty Name."

Any ideas?

# string - Clustering string data with ELKI

> ID：15484047
> 
> 赞同：2
> 
> 时间：2013-03-18T18:20:07.233
> 
> 标签：string, cluster-analysis, edit-distance, elki

I need to cluster a large number of strings using ELKI based on the Edit Distance / Levenshtein Distance. Since the data set is too large, I'd like to avoid file based precomputed distance matrices. How can I

(a) load string data in ELKI from a file (only "Labels")?

(b) implement a distance function accessing the labels (extend AbstractDBIDDistanceFunction, but how to get the labels?)

Some code snippets or example input files would be helpful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:40:16.100

它实际上非常简单：

**A**）编写一个`Parser`足以**满足*您的*输入文件格式**的文件（为什么要尝试重用为带有标签的数值向量编写的解析器？），可能是子类[`AbstractStreamingParser`](http://www.dbs.ifi.lmu.de/research/KDD/ELKI/release0.5.5/doc/de/lmu/ifi/dbs/elki/datasource/parser/AbstractStreamingParser.html)化，产生所需数据类型的关系（可能您可以只使用`String`。如果你想对于这些距离来说，更通用一点`TokenSequence`可能是更合适的概念。字符串只是最简单的情况。

**B** )`DistanceFunction`基于此向量类型而不是 DBID 实现 a ，即 a `PrimitiveDistanceFunction<String>`。同样，子类[`AbstractPrimitiveDistanceFunction`](http://www.dbs.ifi.lmu.de/research/KDD/ELKI/release0.5.5/doc/de/lmu/ifi/dbs/elki/distance/distancefunction/AbstractPrimitiveDistanceFunction.html)化可能是最容易做的事情。

出于性能原因，您可能还想研究索引算法以有效地检索例如 k 个最相似的字符串。我不确定字符串编辑距离和 levenshtein 距离存在哪些索引结构。

一位同事有一个学生显然有一些工作令牌编辑距离，但我还没有看到或审查过代码。当他正在处理日志文件时，他可能会使用基于令牌的方法而不是字符。

# c# - How to get values AND indices of duplicate items in a list?

> ID：15484048
> 
> 赞同：2
> 
> 时间：2013-03-18T18:20:09.980
> 
> 标签：c#, list, duplicates

I have a list of file names (targetFileList), some of which are duplicates (ex. I have two files called m4.txt). The following statement finds the duplicated filenames and adds them to another list (currentTargetFiles):

`currentTargetFiles = targetFileList.FindAll(item => item == baselineFilename);`

As is, this line is returning a list of strings (filenames), which is good, but I also need their index value. Is there some way to modify it so that it also returns the indices of the files?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T19:27:48.640

好吧，这是我对“查找重复名称及其索引”的回答。它可能不完全适合提出的问题，因为没有`baselineFilename`考虑 - 但其他答案涵盖了这一点。YMMV。

```
var names = new [] {"a", "a", "c", "b", "a", "b"};

var duplicatesWithIndices = names
    // Associate each name/value with an index
    .Select((Name, Index) => new { Name, Index })
    // Group according to name
    .GroupBy(x => x.Name)
    // Only care about Name -> {Index1, Index2, ..}
    .Select(xg => new {
        Name = xg.Key,
        Indices = xg.Select(x => x.Index)
    })
    // And groups with more than one index represent a duplicate key
    .Where(x => x.Indices.Count() > 1);

// Now, duplicatesWithIndices is typed like:
//   IEnumerable<{Name:string,Indices:IEnumerable<int>}>

// Let's say we print out the duplicates (the ToArray is for .NET 3.5):
foreach (var g in duplicatesWithIndices) {
    Console.WriteLine("Have duplicate " + g.Name + " with indices " +
        string.Join(",", g.Indices.ToArray()));
}

// The output for the above input is:
// > Have duplicate a with indices 0,1,4
// > Have duplicate b with indices 3,5 
```

当然，必须正确*使用*提供的结果——这取决于最终必须做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:37:56.370

您可以通过以下方式选择所有项目及其索引：

```
tempList = targetFileList.Select((item, index) => 
    new { Value = item, Index = index }).Where(x => x.Value == baselineFilename); 
```

现在，您可以使用以下命令创建名称列表和相应索引：

```
var indexes = tempList.Select(x => x.Index).ToList(); 
```

和价值观：

```
currentTargetFiles = tempList.Select(x => x.Value).ToList(); 
```

然后，`indexes[0]`将保存 的列表索引`currentTargetFiles[0]`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T18:22:15.887

```
int i = -1;
var currentTargetFiles = targetFileList.Select(x => new
                                                        {
                                                           Value = x,
                                                           Index = i++
                                                        })
                                       .Where(x => x.Value == baselineFilename); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T18:43:18.467

linq 是必需的吗？

传统的 for 循环和字典就可以了：

```
Dictionary<int, string> currentTargetFiles = new Dictionary<int, string>();
for (int i = 0; i < targetFileList.Count; ++i)
    if(targetFileList[i] == baselineFilename)
        currentTargetFiles.Add(i, targetFileList[i]); 
```

* * *

PS：

刚刚意识到您正在比较一个确切的字符串 ( `item == baselineFilename`)。

如果是这种情况，您甚至不需要为每个索引保留每个值（因为所有值都相同）。

```
List<int> currentTargetFilesIndices = new List<int>();
for (int i = 0; i < targetFileList.Count; ++i)
    if(targetFileList[i] == baselineFilename)
        currentTargetFiles.Add(i); 
```

# android - 如何将 JSON 数据解析到 Android？

> ID：15484054
> 
> 赞同：0
> 
> 时间：2013-03-18T18:20:22.657
> 
> 标签：android, json

我遵循了在线教程并调整了一些代码，我希望应用程序从不同的位置读取信息。[目前，该应用程序正在从此处](http://api.androidhive.info/contacts/)正确读取数据。现在我想从[这里](http://free.worldweatheronline.com/feed/weather.ashx?q=NG27ND&format=json&num_of_days=2&key=1e79c0b14f180212131703)读取数据。我希望获得观察时间、Temp_C 和可见性，我想我需要在 try { 括号内更改我的代码才能读取这些数据？有什么建议么？

```
public class MainActivity extends ListActivity {

// url to make request
private static String url = "http://api.androidhive.info/contacts/";

// JSON Node names
private static final String TAG_DATA = "contacts";
private static final String TAG_OBSERV = "name";
private static final String TAG_TEMP = "email";
private static final String TAG_VISIB = "gender";

// contacts JSONArray
JSONArray contacts = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParse jParser = new JSONParse();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        contacts = json.getJSONArray(TAG_DATA);

        // looping through All Contacts
        for(int i = 0; i < contacts.length(); i++){
            JSONObject c = contacts.getJSONObject(i);

            // Storing each json item in variable
            String name = c.getString(TAG_OBSERV);
            String email = c.getString(TAG_TEMP);
            String gender = c.getString(TAG_VISIB);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_OBSERV, name);
            map.put(TAG_TEMP, email);
            map.put(TAG_VISIB, gender);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    // Updating parsed JSON data into ListView
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_OBSERV, TAG_TEMP, TAG_VISIB }, new int[] {
                    R.id.name, R.id.email, R.id.mobile });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_OBSERV, name);
            in.putExtra(TAG_TEMP, cost);
            in.putExtra(TAG_VISIB, description);
            startActivity(in);
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:28:08.573

这是您应该从该 json 解析和获取值的方式：

```
JSONObject mMainObject = new JSONObject(myResponseString);
if(mMainObject != null){
    JSONObject data = mMainObject.getJSONObject("data");
    if(data != null){
        JSONArray currentCondition = data.getJSONArray("current_condition");
        if(currentCondition != null){
            for(int i = 0; i < currentCondition.lenght(); i++){
                JSONObject obj = currentCondition.get(i);
                if(obj != null){
                    String observation_time = obj.getString("observation_time");
                    String temp_C = obj.getString("temp_C");
                    String visibility = obj.getString("visibility");
                }
            }
        }
    }
} 
```

这样做你应该考虑使用`AsyncTask`例如从互联网下载数据的正确方法。通过这种方式，它不会阻塞您的 UI，并且您的应用程序将更具响应性。

希望这有帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:32:15.463

最简单和最漂亮的方法是创建一个具有所需属性的 DTO，然后使用诸如**Jackson**或**Gson**之类的库将 JSON 映射到对象。然后它将是 2 行代码，而不是“手动解析”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:35:10.593

> 如何将 JSON 数据解析到 Android？

因此，首先您应该将尝试执行网络连接（从 JSON 获取数据）的代码移动到后台线程。实际上你是在 Main(UI) Thread 做的，它不是很好也不正确。如果您的应用程序将安装在运行 Android 3.0+ 的设备上，您会得到`NetworkOnMainThreadException`它并不好，不是吗？

其次，保存您的 JSON 并进行一些格式化以更好地查看其结构。Multiset括号{表示JSONObject，括号[表示JSONArray。

现在您应该能够解析 JSON。现在我给你写一小段代码如何开始：

```
JSONObject o = new JSONObject(sourceString);
if (o != null) {
   JSONObject data = o.getJSONObject("data"); // getting JSONObject with key data
   if (data != null) {
      JSONArray current = data.getJSONArray("current_condition");
   }
}
... 
```

# java - 是否可以转换 ArrayList 进入数组列表 ?

> ID：15484059
> 
> 赞同：7
> 
> 时间：2013-03-18T18:20:49.067
> 
> 标签：java, arraylist

在我的应用程序中，我想将对象转换`ArrayList`为对象。是否可以？`Integer``ArrayList``Long`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T18:26:54.150

不在 1 班轮中。

```
List<Integer> ints = Arrays.asList(1,2,3,4,5,6,7,8,9);
int nInts = ints.size();
List<Long> longs = new ArrayList<Long>(nInts);
for (int i=0;i<nInts;++i) {
    longs.add(ints.get(i).longValue());
} 
```

// 或者你可以在 Java 8 中使用 Lambda 表达式

```
List<Integer> ints = Arrays.asList(1,2,3,4,5,6,7,8,9);
List<Long> longs = ints.stream()
        .mapToLong(Integer::longValue)
        .boxed().collect(Collectors.toList()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T18:22:01.103

不，您不能，因为泛型不是多态的。即，`ArrayList<Integer>`不是 的子类型`ArrayList<Long>`，因此强制转换将失败。因此，唯一的方法是遍历您的`List<Integer>`并将其添加到`List<Long>`.

```
List<Long> longList = new ArrayList<Long>();
for(Integer i: intList){
longList.add(i.longValue());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:26:28.550

```
ArrayList<Long> longList = new ArrayList<Long>();

Iterator<Integer> it = intList.iterator();
while(it.hasNext())
{
    Integer obj = it.next();
    longList.add(obj); //will automatically convert Int to Long
} 
```

完毕....

# c# - C# 将 CSV 解析为 JSON 格式错误

> ID：15484060
> 
> 赞同：2
> 
> 时间：2013-03-18T18:21:03.223
> 
> 标签：c#, json, serialization, csv

看看，让我知道我到底在说什么；）

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase File)
{

    HttpPostedFileBase csvFile = Request.Files["adGroupCSV"];

    byte[] buffer = new byte[csvFile.ContentLength];
    csvFile.InputStream.Read(buffer, 0, csvFile.ContentLength);

    string csvString = System.Text.Encoding.UTF8.GetString(buffer);

    string[] lines = Regex.Split(csvString, "\r");
    List<string[]> csv = new List<string[]>();

    foreach (string line in lines)
    {
        csv.Add(line.Split(','));
    }

    string json = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(csv);

        ViewData["CSV"] = json;

        return View(ViewData);
} 
```

这就是它的遭遇：

```
json = "[[\"Col1\",\"Col2\",\"Col3\",\"Col4\",\"Col5\",\"Col6\"],[\"test\",\"test\",\"test\",\"test\",\"http://www.test.com/\",\"test/\"],[\"test\",\"test\",\"test\",\"test\",\"http://www.test.com... 
```

这就是我想要的：

```
{"Col1":"test","Col2":"test","Col3":"test","Col4":"test","Col5":"http://www.test.com/","Col6":"test/"} 
```

这是 CSV 的示例

```
Col1,Col2,Col3,Col4,Col5,Col6
Test1,Test1,Test1,test1,test.test,test/
Test2,Test2,Test2,test2,test.test,test/
Test3,Test3,Test3,test3,test.test,test/
Test4,Test4,Test4,test4,test.test,test/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:26:00.743

当您只想要一个将所有列作为属性的对象时，看起来您有一个字符串数组数组。

而不是建立你的

```
List<string[]> csv = new List<string[]>(); 
```

你能从你的 JSON 中创建一个新对象吗，如下所示：

```
public class UploadedFileObject
{
    public string Col1 { get; set; }
    public string Col2 { get; set; }
    public string Col3 { get; set; }
    public string Col4 { get; set; }
    public string Col5 { get; set; }
    public string Col6 { get; set; }
}

[HttpPost] public ActionResult Upload(HttpPostedFileBase File)
{

HttpPostedFileBase csvFile = Request.Files["adGroupCSV"];

byte[] buffer = new byte[csvFile.ContentLength];
csvFile.InputStream.Read(buffer, 0, csvFile.ContentLength);

string csvString = System.Text.Encoding.UTF8.GetString(buffer);

string[] lines = Regex.Split(csvString, "\r");
List<UploadedFileObject> returnObject = new List<UploadedFileObject>();

foreach (string line in lines)
{
    String[] lineParts = line.Split(',');
    UploadedFileObject lineObject = new UploadedFileObject();
    lineObject.Col1 = lineParts[0];
    lineObject.Col2 = lineParts[1];
    lineObject.Col3 = lineParts[2];
    lineObject.Col4 = lineParts[3];
    lineObject.Col5 = lineParts[4];
    lineObject.Col6 = lineParts[5];

    returnObject.add(lineObject);
}

string json = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(returnObject);

    ViewData["CSV"] = json;

    return View(ViewData);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:37:20.623

你需要一本字典。只需更换

```
List<string[]> csv = new List<string[]>();

foreach (string line in lines)
{
    csv.Add(line.Split(','));
} 
```

和

```
var csv = lines.Select(l => l.Split(',')
                            .Select((s,i)=>new {s,i})
                            .ToDictionary(x=>"Col" + (x.i+1), x=>x.s)); 
```

它应该工作...

**编辑**

```
var lines = csvString.Split(new char[] { '\n', '\r' }, StringSplitOptions.RemoveEmptyEntries);
var cols = lines[0].Split(',');
var csv = lines.Skip(1)
               .Select(l => l.Split(',')
                             .Select((s, i) => new {s,i})
                             .ToDictionary(x=>cols[x.i],x=>x.s));

var json = new JavaScriptSerializer().Serialize(csv); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T18:29:10.923

根据前面的答案，也许您可​​以使用 ServiceStack 将 CSV 反序列化为对象数组，然后使用 ServiceStack 的 JSON 序列化程序重新序列化它？

[http://www.servicestack.net/docs/text-serializers/json-csv-jsv-serializers](http://www.servicestack.net/docs/text-serializers/json-csv-jsv-serializers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:29:05.913

您需要确保您使用的是`JavaScriptSerializer`期望您使用的格式。

由于您给它 a`List<string[]>`它正在将其格式化为：

```
"[[list1Item1,list1Item2...],[list2Item1,list2Item2...]]" 
```

这将在您的文件中关联为 row1 -> list1 等。

但是，您想要的是第一个列表中的第一项，与第二个列表中的第一项对齐，依此类推。

我不知道 的确切工作原理`JavaScriptSerializer`，但您可以尝试给它 a`Dictionary`而不是 a `List<string[]>`，假设您只有一行数据（总共两行）。

这将涉及缓存前两行并执行以下操作：

```
for (int i = 0; i < first.Length; i++)
{
    dict.Add(first[i],second[i]);
} 
```

# android - 我在 android 4.2.2 模拟器中的状态栏坏了

> ID：15484062
> 
> 赞同：7
> 
> 时间：2013-03-18T18:21:16.503
> 
> 标签：android, android-emulator, statusbar, android-4.2-jelly-bean

今天发现android 4.2.2模拟器的状态栏坏了，拉不下来。我不知道发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T23:18:21.907

对于它的价值，根据[这个 SO](https://stackoverflow.com/questions/17291699/android-emulator-only-opens-notification-bar-once)，它似乎可能是[android 中的一个错误](https://code.google.com/p/android/issues/detail?id=57129)。在撰写此评论时，谷歌没有回应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T10:40:01.230

尝试制作一个将其拉下的小应用程序：

```
 StatusBarManager statusBar = (StatusBarManager) getSystemService(STATUS_BAR_SERVICE);
statusBar.expand(); 
```

清单中需要许可：

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR" /> 
```

# asp.net - 奇怪的剃刀行为？

> ID：15484064
> 
> 赞同：1
> 
> 时间：2013-03-18T18:21:24.003
> 
> 标签：asp.net, html, asp.net-mvc, razor, syntax

我在 ASP.NET MVC 项目的部分视图中有以下代码：

```
@if (Model.Url != null && Model.Url.Length > 0)
{ <a href="@Model.Url" target="_blank" title="Besök extern sida"><img src="~/Content/Theme/images/icons/link_13x13.jpg" alt="Extern länk" /></a>  }
else
{<img src="~/Content/Theme/images/icons/link_13x13_inactive.jpg" alt="Extern länk saknas" />} 
```

这很好用！

但后来我得到了这个：

```
@if(!Model.PersoanlTagStatus.HasValue)
{ <div class="postContainer"> }
else if(Model.PersoanlTagStatus == ProjectX.Models.TagTypeKey.Ignore)
{ <div class="postContainer postConIgnore"> }
else if(Model.PersoanlTagStatus == ProjectX.Models.TagTypeKey.Favorite)
{ <div class="postContainer postConFav"> } 
```

这根本不起作用？它抱怨如果它缺少它的`}`?

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:28:44.310

试试这个

```
@if(!Model.PersoanlTagStatus.HasValue)
{ 
   @: <div class="postContainer"> 
}
else if(Model.PersoanlTagStatus == ProjectX.Models.TagTypeKey.Ignore)
{ 

   @: <div class="postContainer postConIgnore"> 
}
else if(Model.PersoanlTagStatus == ProjectX.Models.TagTypeKey.Favorite)
{ 

   @: <div class="postContainer postConFav"> 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:45:29.817

用这个：

```
@{
    if(!Model.PersoanlTagStatus.HasValue)
    {
    @<div class="postContainer"></div> 
    }
    else if(Model.PersoanlTagStatus == ProjectX.Models.TagTypeKey.Ignore)
    {
    @<div class="postContainer postConIgnore"></div>
    } 
    else if(Model.PersoanlTagStatus == ProjectX.Models.TagTypeKey.Favorite)
    {
    @<div class="postContainer postConFav"></div> 
    }
} 
```

# wpf - 如何使用带有 ViewFirst View Injection 的 Prism 和 MVVM 将图像加载（绑定）到我的视图模型中的属性？

> ID：15484065
> 
> 赞同：0
> 
> 时间：2013-03-18T18:21:25.843
> 
> 标签：wpf, image, prism

使用 Prism、MVVM 和 View First View Injection：无法在模块中加载图像

我正在使用 View First，View Injection 模式在 MVVM 模式中使用 WPF 和 Prism。

在我的解决方案中，我有一个 SG.BannerModule 项目，我只想在我的 BannerView.xaml 中绑定一个图像。我使用下面实现 IbannerViewModel 的 BannerViewModel，因为我使用容器来解析我的 BannerViewModel。这是 IbannerViewModel 接口：

```
public interface IBannerViewModel : IViewModel
{
    Uri BannerImageUri { get; set; }
} 
```

我暴露了 BannerImageUri，因为我使用接口通过 BannerMainModule 中的容器解析 BannerViewModel。

BannerViewModel 实现是

```
public class BannerViewModel : ViewModelBase, IBannerViewModel
{

    #region Properties

    private IUnityContainer _container;
    private ILogger _logger;

    private Uri _bannerImageUri;
    public Uri BannerImageUri
    {
        get { return new Uri("pack://SG.Website:,,,SG.BannerModule;component/Assets/SGBanner2.png"); }
        set
        {
            if (value != _bannerImageUri)
            {
                _bannerImageUri = value;
                OnPropertyChanged("BannerImageUri");
            }

        }
    }

     #endregion

    #region Constructors

    public BannerViewModel(IBannerView bannerView, IUnityContainer container)
        : base(bannerView)
    {
        View = bannerView;
        View.ViewModel = this;

        _container = container;
        _logger = _container.Resolve<ILogger>();

        _logger.WriteToLogs("BannerViewModel Constructor");
    } 
    #endregion

 } 
```

该图像位于我的 SG.BannerModule 项目的 Assets 目录中。我已将图像 SGBanner2.png 的构建属性设置为资源，并已将图像添加到 SG.BannerModule 项目的属性窗格的资源选项卡中。我在 BannerView.xaml.cs 文件中设置了 BannerView.xaml 的数据上下文，因为我使用的是 View Injection。

```
public partial class BannerView : UserControl, IBannerView
{
    public BannerView()
    {
        InitializeComponent();
    }

    public IViewModel ViewModel
    {
        get 
        { 
            return (IBannerViewModel) DataContext; 
        }
        set { DataContext = value; }
    }

} 
```

由于 View First View Injection 模式，我在后面的代码中设置了 DataContext，并且没有在 XAML 中设置任何内容。

我的问题是

1.  因为我正在绑定这个图像，我需要使用 ImageSource 转换器吗？如果是这种情况，是否会因为图像是 png 而不是位图而成为问题？
2.  或者是Pack Uri的问题。因为我在我的 SG.WebSite 项目的一个区域中使用这个模块，所以我不确定我的包 Uri 是否正确，但我无法正确解决为什么我的图像没有显示在我的 shell 窗口中。难倒？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:37:38.690

如您所知，您似乎首先使用的是 ViewModel。让您的 ViewModel 解析您的 View，然后可能会调用 region.Add(viewModel.View)。

这是本地资源文件的 packURI 语法：

pack://application:,,,/Subfolder/ResourceFile.xaml

对于参考资源文件：

pack://application:,,,/ReferencedAssembly;component/Subfolder/ResourceFile.xaml

# javascript - if 语句中的变量可以等于两个东西吗？

> ID：15484069
> 
> 赞同：2
> 
> 时间：2013-03-18T18:21:46.267
> 
> 标签：javascript

我试过在这里四处寻找，但我不太确定我的措辞是否正确。

```
if (a=="something" && a=="Something") {
//some code
}
else {
// some code
} 
```

此语句中的 a 变量是否可以同时等于“某物”和“某物”以及大写字母 S。我尝试仅使用“某物”而不使用大写字母，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:25:41.663

不，但只需使用`toLowerCase`：

```
if (a.toLowerCase() === 'something') {
    // something here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:24:04.920

这永远不会起作用，因为`a`永远**不能**同时容纳 2 个字符串。

你最终要找的是`||`

```
if (a=="something" || a=="Something") {
//some code
}
else {
  // some code
} 
```

一个逻辑 OR，这意味着它`a`可以是 `"something"` **OR** `"Something"`

您现在正在做的是同时检查是否是`a`AND `"something"` **（** *这是不可能的）*`"Something"`

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T18:23:48.837

不是同时。你可能想要一个 OR。

```
 if(a === "something" || a === "Something"){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:26:26.800

您可以做的是检查您的变量忽略大小写，如下所示：

```
a.toUpperCase() === "SOMETHING"; 
```

请注意，这也适用于“SoMeThinG”（以及每个大小写组合，请[在此处](https://stackoverflow.com/questions/2140627/javascript-equalsignorecase-case-insensitive-string-comparation)查看有关不区分大小写比较的更多信息）
并且正如其他答案所说：您可能正在寻找`||`运算符。*

# c# - 调用特定方法时，标签不显示文本或更新文本

> ID：15484071
> 
> 赞同：0
> 
> 时间：2013-03-18T18:21:59.553
> 
> 标签：c#, asp.net, sharepoint-2010, web-parts

我正在使用一个 Visual WebPart (c#)，它由一个包装 Web 表单内容的 UpdatePanel 组成。在此表单上，在 UpdatePanel 中，我有一个 asp.net 标签，它的 text 属性设置基于提交的结果。它在执行后设置为可见，并且它的前景色也会根据错误或成功进行更改。这完美地工作（文本更新/变得可见），直到我决定在按下提交按钮时调用特定方法。调用此方法时，文本属性不会更新，标签也不会显示。

我已经多次调试了这个过程，每次我逐步完成这个过程并看到正确的消息，看到它被应用于标签的文本属性，并且完成但页面没有更新。我可以通过注释掉方法调用来重现工作功能。没有错误被抛出。该程序在调试时似乎可以正确执行。

**提交按钮代码摘录：**

```
try
                {
                    CreateElementOnDestinationWebs(this.ddlSupportedElements.SelectedValue.ToString(), elementName, ref messages);
                    msg = String.Format("<br />We have successfully created your {0}.  Please review the following outcomes: <br /><ul>", this.ddlSupportedElements.SelectedItem.Text);
                    foreach (string m in messages)
                    {
                        msg += String.Format("<li>{0}</li>", m);
                    }
                    msg += "</ul>";

                    labelMessages.Text = msg;
                    labelMessages.Visible = true;
                    labelMessages.ForeColor = System.Drawing.Color.ForestGreen;                        
                }
                catch (Exception ex)
                {
                    msg = String.Format("<br />An unexpected error occurred while creating the item: {0}", ex.ToString());
                    labelMessages.Text = msg;
                    labelMessages.Visible = true;
                    labelMessages.ForeColor = System.Drawing.Color.Maroon;
                } 
```

**CreateElementOnDestinationWebs 源：**

```
try
                    {
                        Guid listId = web.Lists.Add(name, "Student work can be submitted here.", SPListTemplateType.DocumentLibrary);
                        web.Update();

                        SPList newList = web.Lists[listId];
                        newList.OnQuickLaunch = this.checkDropBoxShowOnQuickLaunch.Checked;
                        newList.EnableModeration = true;
                        newList.Update();

                        GrantStudentGroupsContributeRights(web, ref newList, ref msgs);

                        try
                        {
                            DetectAddColumnsToDropbox(web, ref newList, ref msgs);
                        }
                        catch (Exception)
                        {
                            msgs.Add("There was an unexpected error while attempting to add the site columns to the library.");
                        }                        

                        msgs.Add(String.Format("Your item: {0}, has been successfully created on site: <a href='{1}' target='_blank'>{2}</a>", name, web.Url, web.Title));
                    }
                    catch (Exception)
                    {
                        msgs.Add(String.Format("An error occurred while creating the document library for student work on site: <a href='{0}' target='_blank'>{1}</a>", web.Url, web.Title));
                    } 
```

如果包含“DetectAddColumnsToDropbox”的 try 块被注释掉，则标签 (labelMessages) 会正确显示。如果没有，则标签不会出现/更新。有问题的方法不会更新表单上的任何控件或项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:25:10.393

感谢大家抽出宝贵时间发表评论或尝试回答此问题。继续搜索后，我发现了一个相关问题： [https ://sharepoint.stackexchange.com/questions/5794/trying-to-use-an-spweb-object-that-has-been-closed-or-disposed-and-is -不再](https://sharepoint.stackexchange.com/questions/5794/trying-to-use-an-spweb-object-that-has-been-closed-or-disposed-and-is-no-longer)

方法：DetectAddColumnsToDropbox 为给定网站所在的网站集的 rootweb 声明了一个变量。然后它释放了 rootweb 对象。事实证明，SharePoint 并不关心这一点，并且引发了 JavaScript 错误。我取出了处理（使用块）代码，并且所有功能都可以通过 labelMessages 正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:40:51.717

尝试省略内部 try/catch 或将异常抛出回调用方方法。

# c - glibc malloc 的块大小 data_header

> ID：15484073
> 
> 赞同：0
> 
> 时间：2013-03-18T18:22:02.930
> 
> 标签：c, malloc, glibc

glibc 的 malloc 块大小在使用时是否设置了额外的位？我问的原因是因为我写了一个简单的测试用例，我分配了几个块，然后从基指针到每个块的低 8 字节偏移量打印它的大小（如源代码中所述）。像这样：

```
int main(void)
{
 int* p1 = malloc(_p1);
 int* p2 = malloc(_p2);
 int* p3 = malloc(_p3);

 printf("p3: %p %d\n",p3,_p3);
 printf("p2: %p %d\n",p2,_p2);
 printf("p1: %p %d\n",p1,_p1);

 printf("p3-2: %5dd %5xh\n", *(p3-2), *(p3-2));
 printf("p2-2: %5dd %5xh\n", *(p2-2), *(p2-2));
 printf("p1-2: %5dd %5xh\n", *(p1-2), *(p1-2));

 printf("p1 %p %p\n p-2\n", p1, p1-2);

 printf("\n");
 return 0;
} 
```

示例输出；但是，显示大小始终是额外的 1 个字节。所以我的问题是，这个额外的字节是从哪里来的？

```
p3: 0x1d4e0b0 64
p2: 0x1d4e060 64
p1: 0x1d4e010 64

p3-2:    81d    51h
p2-2:    81d    51h
p1-2:    81d    51h

p1 0x1d4e010 0x1d4e008 
```

我认为在使用块时可能设置了一些位，但即使我释放块并使用正确的偏移量查找其大小，它仍然显示相同的大小。

谁能详细说明我做错了什么或这个字节来自哪里？

谢谢，

# java - 具有多个小部件的 LibGDX 和 ScrollPane

> ID：15484077
> 
> 赞同：12
> 
> 时间：2013-03-18T18:22:10.320
> 
> 标签：java, android, libgdx

尝试向滚动窗格中添加多个项目时，我很快发现所有“addActor”函数都不支持。因此，我添加了一个包含我想要的所有项目的表格（此代码错过了我仍想添加的图像）以制作可滚动的信用屏幕......但这种方法（当前）不允许溢出，渲染ScrollPane 没用。（我的文字只显示到屏幕允许的高度，并且不可滚动）。在 LibGDX 中制作具有多个小部件的可滚动窗格的方法是什么？（我目前只关心 Android 和 Win/Lin/Mac 平台。

```
 pane = new ScrollPane(null, skin);
    pane.setFillParent(true);
    paneContent = new Table(skin);
    paneContent.setFillParent(true);
    Label temp = new Label("", skin);
    temp.setAlignment(Align.left, Align.center);
    temp.setText( Gdx.files.internal("licenses/credits.txt").readString("UTF-8") );
    paneContent.addActor(temp);
    pane.setWidget(paneContent);
    stage.addActor(pane); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T18:51:02.730

如果您想将多个项目放入 ScrollPane，您只需将表格放入其中并为您要放入 ScrollPane 的每个小部件调用 add()。

以下是如何使您的学分可滚动的示例：

```
public class ScrollTest implements ApplicationListener {
    private Stage stage;

    private static final String reallyLongString = "This\nIs\nA\nReally\nLong\nString\nThat\nHas\nLots\nOf\nLines\nAnd\nRepeats.\n"
        + "This\nIs\nA\nReally\nLong\nString\nThat\nHas\nLots\nOf\nLines\nAnd\nRepeats.\n"
        + "This\nIs\nA\nReally\nLong\nString\nThat\nHas\nLots\nOf\nLines\nAnd\nRepeats.\n";

    @Override public void create() {
        this.stage = new Stage();
        Gdx.input.setInputProcessor(this.stage);
        final Skin skin = new Skin(Gdx.files.internal("skin/uiskin.json"));

        final Label text = new Label(reallyLongString, skin);
        text.setAlignment(Align.center);
        text.setWrap(true);
        final Label text2 = new Label("This is a short string!", skin);
        text2.setAlignment(Align.center);
        text2.setWrap(true);
        final Label text3 = new Label(reallyLongString, skin);
        text3.setAlignment(Align.center);
        text3.setWrap(true);

        final Table scrollTable = new Table();
        scrollTable.add(text);
        scrollTable.row();
        scrollTable.add(text2);
        scrollTable.row();
        scrollTable.add(text3);

        final ScrollPane scroller = new ScrollPane(scrollTable);

        final Table table = new Table();
        table.setFillParent(true);
        table.add(scroller).fill().expand();

        this.stage.addActor(table);
    }

    @Override public void render() {
        this.stage.act();
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        this.stage.draw();
    }

    @Override public void resize(final int width, final int height) {}
    @Override public void pause() {}
    @Override public void resume() {}
    @Override public void dispose() {}
} 
```

编辑：添加了在 ScrollPane 内设置表格的代码。

# android - Android：无需ROOT和持续USB连接的任意屏幕截图

> ID：15484079
> 
> 赞同：1
> 
> 时间：2013-03-18T18:22:15.660
> 
> 标签：android

我正在尝试制作一个通过拍摄单独的快照来拍摄屏幕视频的应用程序。我一直在考虑在没有 root 的情况下拍摄快照，并且似乎大多数解决方案都使用 ddmlib 并要求设备通过 USB 不断连接。

唯一不需要 root 和持续 USB 连接的解决方案是 android screenshot library。但是，从论坛评论以及我对演示应用程序的体验来看，这个库的工作并不是非常可靠/一致。

还有其他解决方案吗？

注意：我还查看了 Noroot Screenshotit 应用程序（[https://play.google.com/store/apps/details?id=com.edwardkim.android.screenshotitfullnoroot&hl=en](https://play.google.com/store/apps/details?id=com.edwardkim.android.screenshotitfullnoroot&hl=en)），似乎他们有类似的方法到 android screenshot library，但不知道他们如何使它更可靠。如果有人有想法，那也会有所帮助。

谢谢

编辑：我们已经实现了 USB 连接的实现，但我们希望能够单独在设备上完成它，而不需要与另一台 PC 进行任何连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T02:01:50.940

从 Android 5.0+ 开始，您可以使用 SDK 中称为[媒体投影](https://developer.android.com/reference/android/media/projection/package-summary.html)的新功能来进行屏幕捕获，而无需 root 权限或 USB 连接。Google 提供的示例代码可[在此处](https://github.com/googlesamples/android-ScreenCapture)获得。

# objective-c - 在 uiViewController Objective-c 中显示图像

> ID：15484082
> 
> 赞同：0
> 
> 时间：2013-03-18T18:22:22.410
> 
> 标签：objective-c, for-loop, uiimageview, uiimage, nsarray

我有一个带有 10 个 IBOutlet 图像的 UIViewController，我有一个图像，我想根据我的 i 在 for 循环中显示它我的意思是如果我的 i 等于 3 则将 img1、img2、img3 放在视图中

这是我的代码，我的问题是我无法显示它，请你告诉我是什么问题，提前谢谢！

```
@property (strong, nonatomic) IBOutlet UIImageView *img1;
@property (strong, nonatomic) IBOutlet UIImageView *img2;
@property (strong, nonatomic) IBOutlet UIImageView *img3;
@property (strong, nonatomic) IBOutlet UIImageView *img4;

- (void)viewDidAppear:(BOOL)animated{
[super viewDidAppear:YES];

NSLog(@"Card description : %@", [_card description]);

int stampNumber = [_card.stampNumber intValue];

int i = 0;
UIImage *stampIMG = [UIImage imageNamed:@"1.jpg"];

NSLog(@"StampNumber  :  %i", stampNumber);
for (i = 0; i < stampNumber; i++) {
    NSLog(@"i = %i", i);
    switch (i)
    {
        case 0:
            [_img1 setImage:stampIMG];
            NSLog (@"one");
            break;
        case 1:
            [_img2 setImage:stampIMG];
            NSLog (@"two");
            break;
        case 2:
            [_img3 setImage:stampIMG];
            NSLog (@"three");
            break;
        case 3:
            [_img4 setImage:stampIMG];
            NSLog (@"four");
            break;
        case 4:
            [_img5 setImage:stampIMG];
            NSLog (@"five");
            break;
        case 5:
            [_img6 setImage:stampIMG];
            NSLog (@"six");
            break;
        case 6:
            [_img7 setImage:stampIMG];
            NSLog (@"seven");
            break;
        case 7:
            [_img8 setImage:stampIMG];
            NSLog (@"eight");
            break;
        case 8:
            [_img9 setImage:stampIMG];
            NSLog (@"nine");
            break;
        case 9:
            [_img10 setImage:stampIMG];
            NSLog (@"ten");
            break;
        default:
            NSLog (@"test");
            break;
    }
        } 
```

}

这是我的日志：

```
StampNumber  :  5
2013-03-18 14:14:31\.  i = 0
2013-03-18 14:14:31\.  one
2013-03-18 14:14:31\.  i = 1
2013-03-18 14:14:31\.  two
2013-03-18 14:14:31\.  i = 2
2013-03-18 14:14:31\.  three
2013-03-18 14:14:31\.  i = 3
2013-03-18 14:14:31\.  four
2013-03-18 14:14:31\.  i = 4
2013-03-18 14:14:31\.  five 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:24:15.050

你需要使用：

```
UIImage *stampIMG = [UIImage imageNamed:@"1"]; 
```

文件扩展名没有给出`imageNamed:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:53:51.793

您的代码似乎存在一些问题：

```
- (void)viewDidAppear:(BOOL)animated{
[super viewDidAppear:YES];

NSLog(@"Card description : %@", [_card description]);

int stampNumber = [_card.stampNumber intValue];

int i = 0;

/* Like Anoop pointed out, you do need an extension for the image */
UIImage *stampIMG = [UIImage imageNamed:@"1"];

NSLog(@"StampNumber  :  %i", stampNumber);
for (i = 0; i < stampNumber; i++) {
    NSLog(@"i = %i", i);

/* One more point here is although this is easy for 10 images to do a manual check and update (and efficient in this case), its better to use an IBOutletCollection with tag indication if you need.
*/
    switch (i)
    {
        case 0:
            [_img1 setImage:stampIMG];
            NSLog (@"one");
            break;
        case 1:
            [_img2 setImage:stampIMG];
            NSLog (@"two");
            break;
        case 2:
            [_img3 setImage:stampIMG];
            NSLog (@"three");
            break;
        case 3:
            [_img4 setImage:stampIMG];
            NSLog (@"four");
            break;
        case 4:
            [_img5 setImage:stampIMG];
            NSLog (@"five");
            break;
        case 5:
            [_img6 setImage:stampIMG];
            NSLog (@"six");
            break;
        case 6:
            [_img7 setImage:stampIMG];
            NSLog (@"seven");
            break;
        case 7:
            [_img8 setImage:stampIMG];
            NSLog (@"eight");
            break;
        case 8:
            [_img9 setImage:stampIMG];
            NSLog (@"nine");
            break;
        case 9:
            [_img10 setImage:stampIMG];
            NSLog (@"ten");
            break;
        default:
            NSLog (@"test");
            break;
    }
        }

/*
are the _imgi IBOutlets reference outlets from either your story board or xib file?
if so you do not need to add these as subviews.
If not so, then these are supposed to be instantiated in your code and they need to be UIImageView's rather than IBOutlets. IBOutlets are nothing but void type casts just for the compilers efficiency.
*/

    [self.view addSubview:_img1];
    [self.view addSubview:_img2];
    [self.view addSubview:_img3];
    [self.view addSubview:_img4];
    [self.view addSubview:_img5];
    [self.view addSubview:_img6];
    [self.view addSubview:_img7];
    [self.view addSubview:_img8];
    [self.view addSubview:_img9];
    [self.view addSubview:_img10];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:56:25.203

我认为您的问题出在代码的其他地方。

> 我有一个带有 10 个 IBOutlet 图像的 UIViewController

您已经声明了十个 IBOutlet 图像*视图*- 像这样？

```
@property (weak, nonatomic) IBOutlet UIImageView *img1; 
```

ETC...？

然后...您已将这些声明链接到您的故事板/xib 中的十个图像视图？

如果是这样......你为什么要这样做：

```
[self.view addSubview:_img1];
[self.view addSubview:_img2];
[self.view addSubview:_img3]; 
```

子视图已添加到情节提要中。

如果您还没有添加视图，那么这就是您的问题所在。

例如，如果您分配/初始化每个视图，例如：

```
 self.img1 = [[UIImageView alloc] initWithFrame:(CGRect){10,10,50,50}]; 
```

您将看不到任何图像，因为您的 IBOutlet 是一个 WEAK 属性（它假定该对象已存在于情节提要中，因此不声明所有权）。

检查一下并整理一下...

*   在情节提要中添加 imageViews
*   将它们链接到您的 IBOutlets
*   别`addSubview`

然后它应该工作

或者

*   不要在情节提要中添加子视图
*   将它们声明为 STRONG（非 IBOutlet）属性

    ```
    @property (strong, nonatomic) UIImageView *img1; 
    ```

*   在代码中分配/初始化它们

*   `addSubview`

这也应该有效

# javascript - 使元素固定在滚动上

> ID：15484084
> 
> 赞同：31
> 
> 时间：2013-03-18T18:22:23.257
> 
> 标签：javascript, jquery, html, css

我试图让导航栏粘在顶部，当用户向下滚动到导航栏时，然后当用户向上滚动到导航栏时松开。我知道这只能通过 JavaScript 来实现。我是 JavaScript 的初学者，所以越简单越好。[JSFIDDLE 在这里。](http://jsfiddle.net/jpXjH/)

HTML如下：

```
 <section class="main">
     <div id="wrap">
        <div id="featured">
     <div class="wrap">      
  <div class="textwidget">
    <div class="cup"><img src="#""></div>
<div id="header"></div></div></div></div></div></div></div>
<div class="whiteboard">
         <h1><a href="#">HELLO GUYS</a></h1> </div>
   </div>
          <div class="bg1">
            <h2> WE ARE AN EVENTS MANAGEMENT COMPANY BASED IN LONDON. </h2></div> 
```

CSS如下：

```
 .main{text-align:center;}

      h1{
          -webkit-font-smoothing: antialiased;
              display:inline-block;
            font: 800 1.313em "proxima-nova",sans-serif; 
            padding: 10px 10px;
            margin: 20px 20px;
            letter-spacing: 8px;
            text-transform: uppercase;
              font-size:3.125em;
              text-align: center; 
              max-width: 606px;
      line-height: 1.45em;
      position: scroll;
          background-color:#e94f78;
          text-decoration: none;
          color:yellow;
          background-image:url;
      }

      h1 a{
        text-decoration: none;
        color:yellow;
                padding-left: 0.15em;
      }

      h2{
          -webkit-font-smoothing: antialiased;
              display:inline-block;
            font: 800 1.313em "proxima-nova",sans-serif; 
            letter-spacing: 8px;
            margin-top: 100px;
            text-transform: uppercase;
              font-size:3.125em;
              text-align: center; 
      line-height: 1.45em;
      position: scroll;
          text-decoration: none;
          color:white;
          z-index: -9999;
      }

      h2 a{
        text-decoration: none;
        color:white;
                padding-left: 0.15em;
      }

      h5{

      position: absolute;
              font-family:sans-serif; 
              font-weight:bold; 
              font-size:40px; 
              text-align: center; 
              float: right;
              background-color:#fff;
              margin-top: -80px;
              margin-left: 280px;
      }

      h5 a{

        text-decoration: none;
        color:red;
      }

      h5 a:hover{

        color:yellow;
      }

      #text1{
          -webkit-font-smoothing: antialiased;
              display:inline-block;
            font: 800 1.313em "proxima-nova",sans-serif; 
            margin: 20px 20px;
            letter-spacing: 8px;
            text-transform: uppercase;
              font-size:3.125em;
              text-align: center; 
              max-width: 606px;
      line-height: 1.45em;
      position: scroll;
          background-color:#E94F78;

      }

      #text1 a{
          color:yellow;
          text-decoration: none;
              padding-left: 0.15em;

      }

      #text1 a:hover{

          text-decoration: none;
          cursor:pointer;
      }

      .whiteboard{
          background-image:url(http://krystalrae.com/img/krystalrae-2012-fall-print-leopard-sketch.jpg);
          background-position: center;
          padding: ;
          background-color: #fff;
          z-index: 1000;
      }

      .bg{
        height:2000px;
        background-color:#ff0;
        background-image:url(http://alwayscreative.net/images/stars-last.jpg);
        position:relative;
        z-index: -9999;

      }
      .bg1{
        background-image:url(http://alwayscreative.net/images/stars-last.jpg);
        z-index: -9999;
        height:1000px;
      }
      /* Header */
      #wrap {
        margin: 0 auto;
        padding: 0;
        width: 100%;
      }

      #featured {
        background: #E94F78 url(http://www.creativityfluid.com/wp-content/themes/creativityfluid/images/img-bubbles-red.png) no-repeat top;
        background-size: 385px 465px;
        color: #fff;
        height: 535px;
        overflow: hidden;
        position: relative;
        z-index: -2;
      }

      #featured .wrap {
        overflow: hidden;
        clear: both;
        padding: 70px 0 30px;
        position: fixed;
        z-index: -1;
        width: 100%;
      }

      #featured .wrap .widget {
        width: 80%;
        max-width: 1040px;
        margin: 0 auto;
      }

      #featured h1,
      #featured h3,
      #featured p {
        color: yellow;
        text-shadow: none;
      }

      #featured h4{
        color:white;
        text-shadow:none;
      }

      #featured h4 {
        margin: 0 0 30px;
      }

      #featured h3 {
        font-family: 'proxima-nova-sc-osf', arial, serif;
        font-weight: 600;
        letter-spacing: 3px;
      }

      #featured h1 {
        margin: 0;
      }

      .textwidget{
        padding: 0;
      }

      .cup{
        margin-top:210px;
        z-index: 999999;
      }

      .container{font-size:14px; margin:0 auto; width:960px}
      .test_content{margin:10px 0;}
      .scroller_anchor{height:0px; margin:0; padding:0;background-image:url()}
      .scroller{background:#FFF;
        background-image:url(http://krystalrae.com/img/krystalrae-2012-fall-print-leopard-sketch.jpg);
       margin:0 0 10px; z-index:100; height:50px; font-size:18px; font-weight:bold; text-align:center; width:960px;} 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-18T18:32:46.847

你可以用一些简单的 jQuery 做到这一点：

[http://jsfiddle.net/jpXjH/6/](http://jsfiddle.net/jpXjH/6/)

```
var elementPosition = $('#navigation').offset();

$(window).scroll(function(){
        if($(window).scrollTop() > elementPosition.top){
              $('#navigation').css('position','fixed').css('top','0');
        } else {
            $('#navigation').css('position','static');
        }    
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-06T23:02:06.583

我不会打扰 jQuery 或 LESS。在我看来，一个 javascript 框架是矫枉过正的。

```
window.addEventListener('scroll', function (evt) {

  // This value is your scroll distance from the top
  var distance_from_top = document.body.scrollTop;

  // The user has scrolled to the tippy top of the page. Set appropriate style.
  if (distance_from_top === 0) {

  }

  // The user has scrolled down the page.
  if(distance_from_top > 0) {

  }

}); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-09T16:37:31.230

There are some problems implementing this which the original accepted answer does not answer:

1.  The `onscroll` event of the window is firing very often. This implies that you either have to use a very performant listener, or you have to delay the listener somehow. jQuery Creator John Resig states [here](http://ejohn.org/blog/learning-from-twitter/) how a delayed mechanism can be implemented, and the reasons why you should do it. In my opinion, given todays browsers and environments, a performant listener will do as well. [Here is an implementation of the pattern suggested by John Resig](http://jsfiddle.net/63p4u/)
2.  The way position:fixed works in css, if you scroll down the page and move an element from position:static to `position: fixed`, the page will "jump" a little because the document "looses" the height of the element. You can get rid of that by adding the height to the `scrollTop` and replace the lost height in the document body with another object. You can also use that object to determine if the sticky item has already been moved to `position: fixed` and reduce the calls to the code reverting `position: fixed` to the original state: [Look at the fiddle here](http://jsfiddle.net/kem9j/)
3.  Now, the only expensive thing in terms of performance the handler is really doing is calling `scrollTop` on every call. Since the interval bound handler has also its drawbacks, I'll go as far as to argue here that you can reattach the event listener to the original scroll Event to make it feel snappier without many worries. You'll have to profile it though, on every browser you target / support. [See it working here](http://jsfiddle.net/eeqq9/)

Here's the code:

JS

```
/* Initialize sticky outside the event listener as a cached selector.
 * Also, initialize any needed variables outside the listener for 
 * performance reasons - no variable instantiation is happening inside the listener.
 */
var sticky = $('#sticky'),
    stickyClone,
    stickyTop = sticky.offset().top,
    scrollTop,
    scrolled = false,
    $window = $(window);

/* Bind the scroll Event */
$window.on('scroll', function (e) {
    scrollTop = $window.scrollTop();

    if (scrollTop >= stickyTop && !stickyClone) {
        /* Attach a clone to replace the "missing" body height */
        stickyClone = sticky.clone().prop('id', sticky.prop('id') + '-clone')
        stickyClone = stickyClone.insertBefore(sticky);
        sticky.addClass('fixed');
    } else if (scrollTop < stickyTop && stickyClone) {
        /* Since sticky is in the viewport again, we can remove the clone and the class */
        stickyClone.remove();
        stickyClone = null;
        sticky.removeClass('fixed');
    }
}); 
```

CSS

```
body {
    margin: 0
}
.sticky {
    padding: 1em;
    background: black;
    color: white;
    width: 100%
}
.sticky.fixed {
    position: fixed;
    top: 0;
    left: 0;
}
.content {
    padding: 1em
} 
```

HTML

```
<div class="container">
  <div id="page-above" class="content">
    <h2>Some Content above sticky</h2>
    ...some long text...
  </div>
  <div id="sticky" class="sticky">This is sticky</div>
  <div id="page-content" class="content">
    <h2>Some Random Page Content</h2>...some really long text...
  </div>
</div> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-06-08T03:41:02.130

给你，没有框架，简短而简单：

```
var el = document.getElementById('elId');
var elTop = el.getBoundingClientRect().top - document.body.getBoundingClientRect().top;

window.addEventListener('scroll', function(){
    if (document.documentElement.scrollTop > elTop){
        el.style.position = 'fixed';
        el.style.top = '0px';
    }
    else
    {
        el.style.position = 'static';
        el.style.top = 'auto';
    }
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-06T19:53:25.617

你想使用[jQuery WayPoints](http://imakewebthings.com/jquery-waypoints/)。这是一个非常简单的插件，完全符合您的描述。

最直接的实现

```
 $('.thing').waypoint(function(direction) {
  alert('Top of thing hit top of viewport.');
}); 
```

您将需要设置一些自定义 CSS 以准确设置卡住的位置，尽管对于大多数方法来说这是正常的。

[此页面](http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/)将向您展示您需要的所有示例和信息。

供将来参考它停止和启动的一个例子是[这个网站](http://www.pressbeau.co.uk/newsandevents)。这是一个“在野外”的例子。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T18:36:25.467

你可以去 LESS CSS 网站[http://lesscss.org/](http://lesscss.org/)

他们的可停靠菜单很轻并且性能很好。唯一需要注意的是，效果发生在卷轴完成后。只需做一个查看源代码即可查看 js。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-05T07:09:13.403

你也可以用 css 做到这一点。

向下滚动时仅`position:fixed;` 用于您想要修复的内容。

你可以在这里举一些例子：

[http://davidwalsh.name/demo/css-fixed-position.php](http://davidwalsh.name/demo/css-fixed-position.php)

[http://demo.tutorialzine.com/2010/06/microtut-how-css-position-works/demo.html](http://demo.tutorialzine.com/2010/06/microtut-how-css-position-works/demo.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-10T12:09:14.320

```
window.addEventListener("scroll", function(evt) {
    var pos_top = document.body.scrollTop;   
    if(pos_top == 0){
       $('#divID').css('position','fixed');
    }

    else if(pos_top > 0){
       $('#divId').css('position','static');
    }
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-23T10:54:22.233

纯 Javascript 解决方案（[演示](http://jsfiddle.net/bvr8gebg/5/)）：

```
<br/><br/><br/><br/><br/><br/><br/>
<div>
  <div id="myyy_bar" style="background:red;"> Here is window </div>
</div>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>

<script type="text/javascript">
var myyElement = document.getElementById("myyy_bar"); 
var EnableConsoleLOGS = true;           //to check the results in Browser's Inspector(Console), whenever you are scrolling
// ==============================================

window.addEventListener('scroll', function (evt) {
    var Positionsss =  GetTopLeft ();  
    if (EnableConsoleLOGS) { console.log(Positionsss); }
    if (Positionsss.toppp  > 70)    { myyElement.style.position="relative"; myyElement.style.top = "0px";  myyElement.style.right = "auto"; }
    else                            { myyElement.style.position="fixed";    myyElement.style.top = "100px";         myyElement.style.right = "0px"; }
});

function GetOffset (object, offset) {
    if (!object) return;
    offset.x += object.offsetLeft;       offset.y += object.offsetTop;
    GetOffset (object.offsetParent, offset);
}
function GetScrolled (object, scrolled) {
    if (!object) return;
    scrolled.x += object.scrollLeft;    scrolled.y += object.scrollTop;
    if (object.tagName.toLowerCase () != "html") {          GetScrolled (object.parentNode, scrolled);        }
}

function GetTopLeft () {
    var offset = {x : 0, y : 0};        GetOffset (myyElement.parentNode, offset);
    var scrolled = {x : 0, y : 0};      GetScrolled (myyElement.parentNode.parentNode, scrolled);
    var posX = offset.x - scrolled.x;   var posY = offset.y - scrolled.y;
    return {lefttt: posX , toppp: posY };
}
// ==============================================
</script> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-06T18:56:57.423

最近对我有用的解决方案是：

```
.sticky {
  position: fixed;
  top: 0;
  width: 100%;
}

var header = document.getElementById("filters-tab");
var sticky = header.offsetTop;

if (window.pageYOffset > sticky) {
  header.classList.add("fixed");
} else {
  header.classList.remove("fixed");
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-03T22:49:44.750

不再需要 Javascript。使用 CSS`position:sticky`属性执行此操作

[https://css-tricks.com/position-sticky-2/](https://css-tricks.com/position-sticky-2/)

# jsp - 如何使用 自己标签中的逻辑？

> ID：15484085
> 
> 赞同：0
> 
> 时间：2013-03-18T18:22:27.040
> 
> 标签：jsp, tags, jstl, el

因为我需要在我的应用程序的许多模板中写出我的对象，所以我创建了自己的 EL 标签。现在我需要为自己格式化数字。有没有办法在这个标签库类中使用`formatNumber`在 JSP 模板中提供标签的可能性？标签是否`formatNumber`使用了一些我可以使用的外部库？

```
<fmt:formatNumber type="number" value="${orders.getStatistics().getMin()}"  maxFractionDigits="1" /> 
```

我只需要两种格式类型（数字和百分比）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:33:43.857

它只是使用幕后提供的标准 Java SE API [`java.text.NumberFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html)。

标签的工作可以用纯 Java 表示，如下所示，因为您没有在标签示例中指定它，所以将语言环境排除在外（即使考虑这一点非常重要）：

```
NumberFormat formatter = NumberFormat.getNumberInstance();
formatter.setMaximumFractionDigits(1);
String result = formatter.format(number); 
```

# php - file_get_contents 到同一服务器上的 url

> ID：15484089
> 
> 赞同：4
> 
> 时间：2013-03-18T18:22:31.473
> 
> 标签：php

我的服务器上有两个文件。文件`a.php`：

```
<?php 
die('this is my text');
?> 
```

文件 b.php：

```
<?php
file_get_contents('http://mysite.pl/a.php');
?> 
```

但它不起作用......我不能使用`file_get_contents`，当文件位于同一台服务器上时，我不知道为什么。PHP信息：

```
allow_url_fopen: ON
allow_url_include: OFF 
```

当我尝试在困难的服务器上使用文件 b.php 中的代码时 - 它工作... ;/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-14T13:45:08.780

您可以尝试使用 127.0.0.1，但它不适用于 VirtualHost。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-03-14T04:35:43.357

你可以试试相对路径。

如果`a.php`和`b.php`位于同一目录中，请执行以下操作：

```
// b.php (If a.php is in the same directory)
file_get_contents('./a.php'); 
```

如果`a.php`在上层目录中：

```
// b.php (If a.php is in an upper directory)
file_get_contents('../a.php'); 
```

如果`a.php`在根目录中：

```
// b.php (If a.php is in the root directory)
file_get_contents('/a.php'); 
```

# emacs - 如何在 org-babel 的评估（导出）源块中导入/扩展 noweb refs？

> ID：15484091
> 
> 赞同：4
> 
> 时间：2013-03-18T18:22:36.310
> 
> 标签：emacs, org-mode, literate-programming, org-babel, reproducible-research

我正在尝试做这样的事情：

```
* Define some functions
#+begin_src python :noweb_ref defs
   def f1(a,b,c):
     return True
   def f2(d,e,f):
     return False
#+end_src

* Use them in a results-exported block later
#+begin_src python :results output :exports both :tangle yes
<<defs>>
print "test results:"
print f1(1,2,3)
#end_src 
```

我想要发生的是在评估块以产生导出输出时，将 <<defs>> 扩展为缠结样式。实际发生的是 <<defs>> 被逐字评估并导致语法错误。

当将这样的块与输出文件纠缠在一起时，一切正常，但是当我*导出*缓冲区时，我不知道如何做同样的事情。

建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:55:56.513

我不确定是否真的理解你的意思......但是

1）你错过了一个`noweb:yes`标题参数

2）你可以`<<func()>>`用来插入评估func的**结果**（而不是func的**代码**）——这就是我不确定你真正想要什么的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T12:49:30.600

您也可以使用`:noweb no-export`. 这显示了导出文件中的 noweb-syntax，但在评估或纠缠文件时扩展了代码块。

`:noweb strip-export`如果您只想展示一个算法，那就太好了：

```
<<prep>>
result = A + B
<<plot>> 
```

导出的文件然后显示：

```
result = A + B 
```

# android - 带有标题和下载内容的片段

> ID：15484092
> 
> 赞同：0
> 
> 时间：2013-03-18T18:22:43.437
> 
> 标签：android, android-fragments, actionbarsherlock, android-progressbar

我在这里的第一个问题......很抱歉重复，但我根本没有找到答案=（

我正在尝试创建一个有 3 页的应用程序。

主页 - 视频列表 书签页面 - 包含所有视频书签的列表 设置页面 - 设置和东西

我首先用 3 个活动创建了它。它运行正常，但我在主页中创建 asyncTask 以下载视频时发现问题。进度应该出现在书签页面的进度条中。我考虑过使用 roboSpice，但使用 3 个片段和一个主要活动（将在其中进行下载）而不是 3 个活动似乎更合适。

所以我去了actionBarSherlock，但后来又出现了另一个问题。我需要一个带有 2 个按钮和一个标题的标题。一个按钮调用书签页面，另一个按钮调用设置。

使用 actionBarSherlock 通过修改标题，甚至删除它来创建标题似乎不正确，而只是使用选项卡。

关于如何实现这一点的任何想法？

例子会很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:07:02.797

环顾四周，我找到了一种使用广播接收器而不是使用片段，仅使用活动来实现这一点的方法。

我所做的只是在活动 A 中调用一个服务，它打开我的 asyncTask 以下载内容，并将结果与​​活动 B 的进度一起广播。然后，在活动 B 中，我寻找应该显示进度条的视图并更新进度.

我将此[评论](https://stackoverflow.com/a/5637615/2156661)用作我的实施指南。

# lucene - Lucene 4.1：如何使用 HunspellStemmer 搜索文本并获得建议？

> ID：15484101
> 
> 赞同：1
> 
> 时间：2013-03-18T18:23:38.500
> 
> 标签：lucene, lexical-analysis, hunspell

我想使用 HunspellStemmer 解析带有 lucene 的文本文件以检查拼写错误。我将使用 Hunspell 词典，这就是我想使用 HunspellStemmer 的原因。

在这一点上，我不确定我应该如何解析文件并进行检查。

如果关键字出现在 HunspellDictionary 中，我可以使用带有 WordFilter 的标准分析器来索引文件中的文本并逐词检查。

我这样做了，它有效，不确定它是否是最佳解决方案，但如果我想按不存在的单词输出 3-5 条建议，我不知道该怎么做。

当我使用 PlainTextDictionnary 时，我可以使用 IndexerSearch，但不知道如何使用 HunspellDictionary 获得该功能。（它没有实现字典）。

任何帮助将不胜感激。

谢谢

我想检查的例子：地狱，你好，大厅，你好。我希望对使用 Hunspell 的“helli”有建议。

# c - 使用 fgets 达到 EOF

> ID：15484106
> 
> 赞同：12
> 
> 时间：2013-03-18T18:23:54.883
> 
> 标签：c, unix, eof, fgets

我正在编写一个执行一些身份验证操作的函数。我有一个文件，所有`user_id:password:flag`夫妻的结构如下：

用户.txt

`user_123:a1b2:0 user_124:a2b1:1 user_125:a2b2:2`

这是代码：

```
int main(){
    /*...*/

    /*user_id, password retrieving*/
    USRPSW* p = malloc(sizeof(USRPSW));
    if(p == NULL){
        fprintf(stderr, "Dynamic alloc error\n");
        exit(EXIT_FAILURE);
    }
    memset((void*)p, 0, sizeof(USRPSW));

    if(usr_psw_read(acc_sock_ds, p->user_id, USR_SIZE) <= 0){
        printf("Failed read: connection with %s aborted.\n",
                 inet_ntoa(client_addr.sin_addr));
        close(acc_sock_ds);
        continue;
    }

    if(usr_psw_read(acc_sock_ds, p->password, PSW_SIZE) <= 0){
        printf("Failed read: connection with %s aborted.\n",
                 inet_ntoa(client_addr.sin_addr));
        close(acc_sock_ds);
        continue;
    }

    /*Authentication through user_id, password*/
    FILE *fd;
    fd = fopen(USERSFILE, "r");
    if(fd == NULL){
        fprintf(stderr, "Users file opening error\n");
        exit(EXIT_FAILURE);
    }

    char *usr_psw_line = malloc(USR_SIZE+PSW_SIZE+3+1);
    if(usr_psw_line == NULL){
        fprintf(stderr, "Dynamic alloc error\n");
        exit(EXIT_FAILURE);
    }

    while(1){

        memset((void*)usr_psw_line, 0, sizeof(USR_SIZE+PSW_SIZE+3+1));
        fgets(usr_psw_line, USR_SIZE+PSW_SIZE+3+1, fd);
        printf("%s\n", usr_psw_line);
        fseek(fd, 1, SEEK_CUR);

        /*EOF management*/
        /*usr_id - password matching checking */

    }   
/*...*/    
} 
```

如何管理 EOF 到达？我看到当达到 EOF 时`fgets`不再编辑 usr_psw_line 但既不返回 NULL 指针。如果达到 EOF，则意味着在用户文件中找不到匹配项并且循环中断。

有人可以给我一些提示或建议吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-18T19:54:31.730

`fgets()`当它到达文件结尾或错误条件时返回一个空指针。

（`EOF`是一个宏，它指定某些其他函数在类似条件下返回的值；它不仅仅是短语“文件结尾”的缩写。）

你忽略了返回的结果`fgets()`。不要那样做。

请注意，仅检查`feof(fd)`不会做您想要的。 `feof()`如果您已到达文件末尾，则返回真结果。如果您遇到错误，`feof()`仍然返回 false，并且如果您`feof()`用来决定何时完成，您就会陷入无限循环。*并且在*您未能读取输入之前它不会返回 true 。

大多数 C 输入函数会返回一些特殊值，以指示没有更多内容可读取。因为`fgets()`它是`NULL`，因为`fgetc()`它是`EOF`，等等。如果您愿意，您可以致电`feof()`和/或`ferror()`事后确定*为什么*没有更多可阅读的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:17:12.710

您可能想在循环中尝试这样的事情：

```
while(1)
{
    memset((void*)usr_psw_line, 0, sizeof(USR_SIZE+PSW_SIZE+3+1));
    if( !fgets(usr_psw_line, USR_SIZE+PSW_SIZE+3+1, fd)
     || ferror( fd ) || feof( fd ) )
    {
        break;
    }
    printf("%s\n", usr_psw_line);
    fseek(fd, 1, SEEK_CUR);

    /*EOF management*/
    /*usr_id - password matching checking */

} 
```

`fgets`使用额外的代码，如果返回 NULL（没有更多数据要读取）或者如果您读取了 EOF 标记或文件上有任何错误，则循环将终止。我敢肯定这是矫枉过正，但这些测试一直对我有用。

# ios - UITextField 内的 UIButton

> ID：15484107
> 
> 赞同：0
> 
> 时间：2013-03-18T18:23:59.300
> 
> 标签：ios, uitextfield

我正在尝试在 UITextfield 中放置一个 UIButton，以充当“完成”按钮来让响应者辞职。我已经尝试使用以下代码，当字段开始编辑 UITextField leftView 中的完成按钮时可见，但是如果我从 datePicker 中选择一个值或使用键盘（在模拟器中）进行任何文本输入，完成按钮就会消失并显示正确的 clearButton。

似乎它在它们两者之间切换，我将 textFld.LeftViewMode 更改为始终显示按钮，但这不是我想要的......

提前致谢！。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    txtFld = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 310, 25)];
    txtFld.placeholder = @"__/__/____";
    txtFld.font = [UIFont fontWithName:@"HelveticaNeue" size:11];
    txtFld.textAlignment = NSTextAlignmentCenter;
    txtFld.contentVerticalAlignment = UIControlContentHorizontalAlignmentCenter;
    txtFld.contentHorizontalAlignment = UIControlContentVerticalAlignmentCenter;
    txtFld.clearButtonMode = UITextFieldViewModeWhileEditing;
    txtFld.borderStyle = UITextBorderStyleRoundedRect;

    UIButton *doneButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    doneButton.bounds = CGRectMake(0, 0, 40, 20);
    doneButton.frame = CGRectMake(0.0, 0.0, 40.0, 20.0);
    doneButton.titleLabel.font = [UIFont fontWithName:@"HelveticaNeue" size:10];
    [doneButton setTitle:@"Done" forState:UIControlStateNormal];
    doneButton.imageEdgeInsets = UIEdgeInsetsMake(0, -16, 0, 0);
    [doneButton addTarget:self action:@selector(resignResponder:) forControlEvents:UIControlEventTouchUpInside];
    doneButton.userInteractionEnabled = YES;

    // Add button to the UITextField
    txtFld.leftView = doneButton;
    txtFld.leftViewMode = UITextFieldViewModeWhileEditing;

    UIDatePicker *datePicker = [[UIDatePicker alloc] init];
    datePicker.datePickerMode = UIDatePickerModeDate;
    [datePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];
    [txtFld setInputView:datePicker];

    [self.view addSubview:txtFld];

}

-(void)resignResponder:(UIButton *)sender{
        UITextField *associatedTxtFld = (UITextField *) sender.superview ;
        if ([associatedTxtFld isFirstResponder]) {
            [associatedTxtFld resignFirstResponder];
        }
}

-(void)datePickerValueChanged:(id)sender{
    UIDatePicker *picker = (UIDatePicker *)sender;
    NSDateFormatter *formater = [[NSDateFormatter alloc]init];
    [formater setDateFormat:@"dd-MM-yyyy"];
    txtFld.text = [formater stringFromDate:picker.date];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:11:18.927

下面的代码对我来说很好。这可能是辞职您的pickerview的解决方案

```
UITextField *dispayNameField = [UITextField  alloc]init];
UIButton *userStatusButton = [UIButton buttonWithType:UIButtonTypeCustom];
    userStatusButton.frame=CGRectMake(0, 0, 20, 20);
    [userStatusButton addTarget:self action:@selector(selectUserStatus) forControlEvents:UIControlEventTouchUpInside];
    displayNameField.rightViewMode = UITextFieldViewModeAlways;
    displayNameField.rightView = _userStatusButton;

-(void)selectUserStatus
{
    displayNameField.inputView = _dataPickerView;
    self.editUserProfileScrollView.scrollEnabled = YES;
    UIActionSheet *actionSheetForDate = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
    [actionSheetForDate showInView:self.parentViewController.tabBarController.view];
    [actionSheetForDate setBounds:CGRectMake(0,0,320, 500)];
    UIDatePicker = [[UIDatePicker alloc]initWithFrame:CGRectMake(0, 50, 320, 216)];
    _dataPickerView.tag = 1;
    _dataPickerView.showsSelectionIndicator = YES;
    _dataPickerView.dataSource = self;
    _dataPickerView.delegate = self;
    [_actionSheetForDate addSubview:_dataPickerView];
    [_actionSheetForDate sendSubviewToBack:_dataPickerView]; 
    UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
    [pickerToolbar sizeToFit];
    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissActionSheetUserField)];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    UIBarButtonItem *btnBarCancel = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(dismissActionSheetUserField)];
    [pickerToolbar setItems:[NSArray arrayWithObjects:btnBarCancel,flexSpace,doneButton, nil] animated:YES];
    [_actionSheetForDate addSubview:pickerToolbar];
    displayNameField.inputAccessoryView = pickerToolbar;
} 
```

# python - 自动保存构造函数参数

> ID：15484120
> 
> 赞同：5
> 
> 时间：2013-03-18T18:24:23.857
> 
> 标签：python, constructor

通常，类的构造函数会接受它的参数并将它们保存在实例中。例如：

```
class Example(object):
    def __init__(self, title='',backtitle='', height=20, width=50):
        self.title = title
        self.backtitle = backtitle
        self.height = height
        self.width = width 
```

这是重复的，所以我创建了一个辅助函数来自动执行此操作：

```
from inspect import getargspec
def save_args(values):
    for i in getargspec(values['self'].__init__).args[1:]:
        values['self'].__dict__[i] = values[i]

class Example(object):
    def __init__(self, title='',backtitle='', height=20, width=50):
        save_args(vars()) 
```

我的问题如下：

*   这会在某些类或 agruments 上失败吗
*   它是可移植的，它可以在 Jython 上工作吗？等等。它在 python 2.7 和 3.2 上对我有用
*   有没有更简单的选择？
*   那里有一个已经这样做的python包吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T18:27:48.447

当您的班级使用[`__slots__`](http://docs.python.org/3/reference/datamodel.html#slots). 您可以[`setattr()`](http://docs.python.org/3/library/functions.html#setattr)改用：

```
from inspect import getargspec
def save_args(values):
    for i in getargspec(values['self'].__init__).args[1:]:
        setattr(values['self'], i, values[i]) 
```

提供的 arguments 关键字参数`__init__`当然都是声明的插槽。

否则，这应该适用于任何 Python 实现。

您可能[对该主题的先前讨论](https://stackoverflow.com/q/1389180)感兴趣，该讨论引发了[Python-ideas 列表线程](http://mail.python.org/pipermail/python-ideas/2011-April/thread.html#9930)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:35:31.863

这需要您编写更多代码，默默地忽略 Example 构造函数的所有错误参数，并且不支持 Example 构造函数的位置参数，但避免使用`inspect`：

```
def save_args(obj, defaults, kwargs):
    for k,v in defaults.iteritems():
        if k in kwargs: v = kwargs[k]
        setattr(obj, k, v)

class Example(object):
    def __init__(self, **kwargs):
        defaults = { 'title': '',
                     'backtitle': '',
                     'height': 20,
                     'width': 50 }
        save_args(self, defaults, kwargs) 
```

# jquery - Youtube API Put 请求以只读方式更新元数据

> ID：15484121
> 
> 赞同：1
> 
> 时间：2013-03-18T18:24:24.447
> 
> 标签：jquery, ajax, youtube-api, metadata, put

好的，所以我已经放弃尝试通过 onApiReady 为 Youtube API 更新元数据，并继续发出一个 put 请求，如[https://developers.google.com/youtube/v3/docs/videos/update](https://developers.google.com/youtube/v3/docs/videos/update)所示.

ajax 请求返回成功，但实际上并没有更新任何数据。此外，返回的 jqXHR 详细说明了更新请求之前的原始数据。出于演示目的，我已将其转换为示例，但它仍然不起作用。这是放置请求。

```
$.ajax({
        type: "PUT",
        dataType: "jsonp",
        url: "https://www.googleapis.com/youtube/v3/videos/?part=snippet&key=<replaced with api key>",
        headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + oAuthToken.access_token
        },
        data: $.parseJSON('{"id": "<replaced with videoId>", "snippet": {"title": "New Title", "description": "New Description"}, "status": {"privacyStatus": "unlisted"}}'),
        success: function(data, error, completeError) {
            alert("Hallelujah");
        }
    }); 
```

它报告为成功，youtube 上没有更新任何数据，响应中返回的代码段包含所有原始值。

我的 OAuth2 令牌已通过身份验证 `var scopes = ['https://gdata.youtube.com', 'https://www.googleapis.com/auth/youtube', 'https://www.googleapis.com/auth/youtubepartner', 'http://gdata.youtube.com', 'https://www.googleapis.com/auth/youtube.upload'];`

我一直在处理这个问题，我知道要么 Youtube 不能真正做到这一点（不太可能），要么我错过了一些愚蠢而简单的东西。如果有人可以提供帮助，请告诉我。

谢谢，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:15:03.007

看到这个答案：

[如何使用 API v3 更新 YouTube 上的视频](https://stackoverflow.com/questions/13469782/how-to-update-video-on-youtube-using-api-v3)

我相信您必须指定资源的种类：

"种类": "youtube#video",

# android - 如何从 textMultiline 中的键盘通过 Done 更改 Enter？

> ID：15484123
> 
> 赞同：1
> 
> 时间：2013-03-18T18:24:36.150
> 
> 标签：android

这是我的编辑文本：

```
EditText<br>
android:id="@+id/detailsText"<br>
android:layout_width="fill_parent"<br>
android:layout_height="wrap_content"<br>
android:inputType="textMultiLine"<br>
android:maxLength="500"/><br> 
```

我必须隐藏键盘一些如何添加这个：
details.setOnEditorActionListener(new TextView.OnEditorActionListener() {

```
@Override
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {<br>
        if (event != null&& (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) {<br>
          InputMethodManager imm = (InputMethodManager)getSystemService(
                  Context.INPUT_METHOD_SERVICE);<br>
            imm.hideSoftInputFromWindow(details.getWindowToken(), 0);
            return true;
        }<br>
        return false;
    }
}); 
```

当我按下回车键时，键盘会隐藏（这就是我想要的），但我需要更改回车按钮默认具有的箭头，我想输入“完成”之类的内容，但我无法更改， `android:inputType="textMultiLine"`因为编辑文本会更改大小与用户输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:28:48.677

你可以试试这个，
`android:imeOptions="actionDone"` 这会自动隐藏带有完成按钮的键盘，你不需要手动为它编写代码。

# vb.net - 如何取消 FileCopy 操作？

> ID：15484124
> 
> 赞同：0
> 
> 时间：2013-03-18T18:24:37.913
> 
> 标签：vb.net, visual-studio, file-io, io, copy

如何取消“My.Computer.FileSystem.CopyFile”操作？

我的意思是，例如，如果我开始使用该方法（或 IO. 方法）在应用程序中复制一个 20 GB 的文件，然后如果我退出/关闭我的应用程序，复制操作仍会在后台进行，因此我可以注意到操作系统决定即使APP关闭也不要停止复制...

那么……我的APP关闭时可以取消FileCopy操作吗？如何？

谢谢你的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T22:22:13.060

首先，使用文件流。然后在 FormClosing 事件中，只需键入`FileStreamName.Close`

# android - 在片段中使用 YouTube API

> ID：15484126
> 
> 赞同：7
> 
> 时间：2013-03-18T18:24:39.500
> 
> 标签：android, android-fragments, youtube-api, android-viewpager

我在我的项目中使用了新的 YouTube API。使用文档的示例，它可以正常工作：

```
public class Test extends  YouTubeBaseActivity implements YouTubePlayer.OnInitializedListener {

    String urlVideo;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        urlVideo="5lbVNYAeFiQ";

        YouTubePlayerView youTubeView = (YouTubePlayerView) findViewById(R.id.youtube_view);
        youTubeView.initialize("MY_API_KEY", this);

    }

    public void onInitializationFailure(Provider arg0,YouTubeInitializationResult arg1) {
        Toast.makeText(this, "Error ", Toast.LENGTH_LONG).show();  
    }

    public void onInitializationSuccess(Provider arg0, YouTubePlayer arg1,boolean wasRestored) {
        if (!wasRestored) {
            arg1.loadVideo(urlVideo);
        }

    }
} 
```

但是在我的项目中，我正在使用一个包含 ViewPager 的主要活动 ViewPager 显示片段，问题是当我想在 ViewPager 的一个片段中显示 YouTubePlayer 时。通常，一个使用 youtube 的活动，扩展 YouTubeBaseActivity。

```
extends YouTubeBaseActivity implements ... { 
```

我的问题是，如何在从片段扩展的活动中显示 YouTube 播放器？

我搜索了，但找不到有关我的问题的信息。

我真诚地感谢您的帮助。

最好的祝福

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T18:30:16.190

如果您只在单个 support.v4.app.Fragment 中播放 YouTube 视频，请使用[YouTubePlayerSupportFragment 。](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerSupportFragment)这允许您使用 FragmentActivity，而不是 YouTubeBaseActivity。

# c# - 打印表格给了我空白页

> ID：15484127
> 
> 赞同：3
> 
> 时间：2013-03-18T18:24:49.100
> 
> 标签：c#, winforms

使用 MSDN 中关于如何打印 Windows 窗体的代码示例，我有一个修改后的我的，先调出打印机选项然后打印，但我一直收到一个空白页。使用`CopyFromScreen`，我给出了表单源 X 和 Y 的坐标，但是对于我尝试过的目的地`0`以及`this.Location.X & Y`. 有没有另一种方法来捕获图像？

```
private void printButton_Click(object sender, EventArgs e)
    {
        CaptureScreen();

        printDialog1.AllowSomePages = true;

        printDialog1.ShowHelp = true;

        printDialog1.Document = printDoc1;

        DialogResult result = printDialog1.ShowDialog();

        if (result == DialogResult.OK)
        {
            printDoc1.Print();
        }
    }        

 private void CaptureScreen()
    {
        Graphics myGraphics = this.CreateGraphics();
        Size s = this.Size;
        memoryImage = new Bitmap(s.Width, s.Height, myGraphics);
        Graphics memoryGraphics = Graphics.FromImage(memoryImage);
        memoryGraphics.CopyFromScreen(this.Location.X, this.Location.Y, 0, 0, s);
    }

void printDoc1_PrintPage(object sender, PrintPageEventArgs e)
    {
        e.Graphics.DrawImage(memoryImage, 0, 0);
    } 
```

# php - 如何修复 mysql_fetch_array() 的大小并将其显示在多个页面中？

> ID：15484128
> 
> 赞同：1
> 
> 时间：2013-03-18T18:24:50.443
> 
> 标签：php, mysql

我想使用 mysql_fetch_array 显示数据库中的记录。但问题是我不知道如何修复页面中显示的大小并将其余记录移动到下一页，因为要显示的记录太多。

例如：在 page1 中显示前 10 行（或记录），然后在另一页中显示另外 10 行？

这是我的代码：

```
$result=mysql_query("$selectKL UNION $selectKlang UNION $selectPJ UNION $selectSJ 
ORDER BY restaurant_name LIMIT 6")

$searchQuery = search($budgetRange,$city,$category);

while($row = mysql_fetch_array($searchQuery))
{
   echo"<tr>";
   echo'<td>'.$row['restaurant_id'].'</b></td>';
   echo'<td>'.$row['restaurant_name'].'</b></td>';
   echo'<td>'.$row['category'].'</b></td>';
   echo'<td>'.$row['budget'].'</b></td>';
   echo'<td>'.$row['halal'].'</b></td>';
   echo "</tr>";
} 
```

我的数据库中将显示 30 多个结果，但我如何在第一页显示前 10 个结果，然后在下一页显示另外 10 个结果，依此类推？我已经在查询中将 LIMIT 设置为 10，是的，它只显示 10 个结果，但我不知道如何存储或传递其余结果（可能吗？）。任何帮助表示赞赏...拜托？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:28:00.417

分页可能很棘手。您需要设置一些参数（可能是查询字符串参数）以指示足够的信息来知道在哪里获取分页，即每页的结果数和页码，或者显示的最后一个结果的数量.

在您的查询中，您可以使用`LIMIT x,y`其中 x 是起始行号，y 是要检索的行数。

分页是一个已经解决了很多次的问题——这并不意味着它很容易，但它意味着有很多可用的帮助。尝试快速搜索：[https ://encrypted.google.com/search?hl=en&q=php+mysql+pagination](https://encrypted.google.com/search?hl=en&q=php+mysql+pagination)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:47:46.290

```
/*
    Place code to connect to your DB here.
*/

$tbl_name="xyz";        //your table name
// How many adjacent pages should be shown on each side?
$adjacents = 3;

/* 
   First get total number of rows in data table. 
   If you have a WHERE clause in your query, make sure you mirror it here.
*/
$query = "SELECT COUNT(*) as num FROM $tbl_name WHERE approved`=1  ";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages['num'];

/* Setup vars for query. */
$targetpage = "index.php";  //your file name  (the name of this file)
$limit = 5;                                 //how many items to show per page
$page = (!empty($_GET['page']) ? $_GET['page'] : null);

if($page) 
    $start = ($page - 1) * $limit;          //first item to display on this page
else
    $start = 0;                             //if no page var is given, set start to 0

/* Get data. */
$sql = "SELECT * FROM $tbl_name WHERE `approved`=1  ORDER BY `id` DESC LIMIT $start, $limit ";
$result = mysql_query($sql);

/* Setup page vars for display. */
if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
$prev = $page - 1;                          //previous page is page - 1
$next = $page + 1;                          //next page is page + 1
$lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;                      //last page minus 1

include ('includes/pagination.php');

    while($row = mysql_fetch_array($result))
    {

    //designate variables

echo  'Your content';
}
$pagination 
```

# cordova - 使用 phonegap 和 asp.net mvc 4 登录

> ID：15484130
> 
> 赞同：4
> 
> 时间：2013-03-18T18:24:53.763
> 
> 标签：cordova, backbone.js, asp.net-mvc-4

我正在开发一个组织者，其中包含通过网站保存和管理的用户任务。对于我使用 ASP.NET MVC 4 和主干.js 的网站。现在我想用 PhoneGap 创建一个移动应用程序。用户将能够登录/注册，然后他将能够在旅途中使用他的手机/平板电脑管理他的任务。所以我的问题是我不知道如何登录然后如何从服务器获取任务。

现在我正在使用backbone.js，并且我在服务器上有一个管理任务的api。我的想法只是使用来自 ASP.NET MVC 的相同代码（仅 html、css、js），它应该很容易工作，但是对于该 api，用户必须被记录，为此使用简单的成员资格和网络安全，它们是用于后端部分，我不会在移动版本中使用，我不确定用户将如何登录。

另一个想法是检查用户凭据（向服务器发出 AJAX 请求，可以说明用户是否输入了有效的登录数据），以便在手机上拥有我的用户 ID（本地存储或类似的东西），然后在不需要用户登录的服务器，它将管理用户的任务（我为其传递用户 ID）。但我认为这将是一个巨大的安全漏洞，因为每个人都只能通过输入用户 ID 来更改任务。我已经从 Raymond Camden 找到了一个登录示例（[请参见此处](http://www.raymondcamden.com/index.cfm/2011/11/10/Example-of-serverbased-login-with-PhoneGap "看这里")），它可能有助于这个想法，但它仅适用于登录部分（它仅登录设备，但我解释的安全漏洞问题仍然让我担心）

因此，如果您能给我一些想法，如何实现设备上的登录以及如何从服务器获取用户的数据，我将不胜感激。即使只是概念性的想法，我也会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:48:32.503

您可以通过在您的控制器文件夹中创建一个 Web API 控制器来公开您的服务器端代码来创建一个 Web API 接口。对于身份验证，您可以通过在授权标头中提供用户凭据来使用 HTTP 基本身份验证。现在在您的 Web API 消息处理程序中，您需要读取用户的凭据并授权用户。[这是一篇关于这个主题的好文章。](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/). 使用基本身份验证的一个缺点是，对于每个请求，您都需要访问 AD 数据库以授权用户。为防止这种情况，您可以在用户第一次通过身份验证后创建一个安全令牌，然后将其传递给客户端，以便对于未来的所有请求，客户端都使用此安全令牌。如果性能对您来说不是什么大问题，基本身份验证就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T15:58:30.397

我也有同样的情况。为了解决这个问题，我使用了 Thinktecture 框架 Session Token。它允许使用例如基本身份验证进行一次身份验证，然后您可以请求可以在请求之间传递并可以存储在本地存储中的令牌。这样您就不必将用户和密码存储在不安全的位置，也不必对每个请求进行身份验证。

# python-2.7 - 使用 BeautifulSoup 的 findAll 后无法访问属性

> ID：15484134
> 
> 赞同：0
> 
> 时间：2013-03-18T18:25:17.510
> 
> 标签：python-2.7, beautifulsoup

我正在尝试在 BBC 网站上抓取类似[这样](http://www.bbc.co.uk/programmes/b01pzszx) 的网站，以获取节目列表的相关部分，而我刚刚开始使用 BeautifulSoup 来执行此操作。

感兴趣的部分从以下部分开始：

```
<li about="/programmes/p013zzsl#segment" class="segment track" id="segmentevent-p013zzsm" typeof="po:MusicSegment">

<li about="/programmes/p014003v#segment" class="segment speech alt" id="segmentevent_p014003w" typeof="po:SpeechSegment"> 
```

到目前为止，我所做的是打开 HTML `soup`，然后用于`soup.findAll(typeof=['po:MusicSegment', 'po:SpeechSegment'])`给出我感兴趣的部分的 ResultSet，它们的出现顺序。

然后我想要做的是检查一个部分是否引用`po:MusicSegment`或`po:SpeechSegment`在 HTML 中看起来像：

```
<li about="/programmes/p01400m9#segment" class="segment track" id="segmentevent-p01400mb" typeof="po:MusicSegment"> <span class="artist-image"> <span class="depiction" rel="foaf:depiction"><img alt="" height="63" src="http://static.bbci.co.uk/programmes/2.54.3/img/thumbnail/artists_default.jpg" width="112"/></span> </span> <script type="text/javascript"> window.programme_data.tracklist.push({ segment_event_pid : "p01400mb", segment_pid : "p01400m9", playlist : "http://www.bbc.co.uk/programmes/p01400m9.emp" }); </script> <h3> <span rel="mo:performer"> <span class="artist no-image" property="foaf:name" typeof="mo:MusicArtist">Mala</span> </span> <span class="title" property="dc:title">Calle F</span> </h3></li> 
```

我想访问与`typeof`关联的属性`<li>`，但是如果调用了这段 HTML（作为 BS4 标记）`section`并输入`section.li`，它会返回`None`。

请注意，如果我这样做`section.img`，我会得到一些回报：

```
<img alt="" height="63" src="http://static.bbci.co.uk/programmes/2.54.3/img/thumbnail/artists_default.jpg" width="112"/> 
```

然后我可以做，例如`section.img['height']`回来`u'63'`

我想要的是与该`section.li`部分类似的东西，所以`section.li['typeof']`给我`po:MusicSegment`或`po:SpeechSegment`

当然，我可以简单地将每个结果转换为文本，然后进行简单的字符串搜索，但按属性搜索似乎更优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:54:43.777

我会遍历返回的列表`findAll`：

```
soup = BeautifulSoup('<li about="/programmes/p013zzsl#segment" class="segment track" id="segmentevent-p013zzsm" typeof="po:MusicSegment"><li about="/programmes/p014003v#segment" class="segment speech alt" id="segmentevent_p014003w" typeof="po:SpeechSegment">')

for elem in soup.findAll(typeof=['po:MusicSegment', 'po:SpeechSegment']):
    print elem['typeof'] 
```

返回

```
po:MusicSegment
po:SpeechSegment 
```

然后有条件地执行您的其他任务：

```
if elem['typeof'] == 'po:MusicSegment'
    do.something()
elif elem['typeof'] == 'po:SpeechSegment':
    do.something_else() 
```

# ios - 计划的本地通知问题 - 每日触发问题

> ID：15484135
> 
> 赞同：0
> 
> 时间：2013-03-18T18:25:28.583
> 
> 标签：ios, objective-c, xcode, uilocalnotification

我在我的 AppDelegate 上为我的通用应用程序设置了多个本地通知，确切地说是 14 个。这些通知具有应该触发的特定时间和工作日。

问题是**所有这些通知每天都会触发**。

例如，我设置了周六早上的通知，但它每天都显示。

请给我一个建议或指导，说明为什么我的通知每天都会触发？我似乎找不到解决方案。

请查看我的代码，谢谢！

**AppDelegate.m**

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
/*
 Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
 If your application supports background execution, called instead of applicationWillTerminate: when the user quits.
 */

NSCalendar *gregCalendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent = [gregCalendar components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent setWeekday:2];
[dateComponent setHour:11];
[dateComponent setMinute:44];

UILocalNotification *notification = [[UILocalNotification alloc]init];
[notification setAlertBody:@"GOOD MORNING!"];
[notification setFireDate:[gregCalendar dateFromComponents:dateComponent]];
notification.repeatInterval = NSWeekdayCalendarUnit;
[notification setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification];

NSCalendar *gregCalendar1 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent1 = [gregCalendar1 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent1 setWeekday:3];
[dateComponent1 setHour:11];
[dateComponent1 setMinute:44];

UILocalNotification *notification1 = [[UILocalNotification alloc]init];
[notification1 setAlertBody:@"GOOD MORNING!"];
[notification1 setFireDate:[gregCalendar1 dateFromComponents:dateComponent1]];
notification1.repeatInterval = NSWeekdayCalendarUnit;
[notification1 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification1];

NSCalendar *gregCalendar2 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent2 = [gregCalendar2 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent2 setWeekday:4];
[dateComponent2 setHour:11];
[dateComponent2 setMinute:44];

UILocalNotification *notification2 = [[UILocalNotification alloc]init];
[notification2 setAlertBody:@"GOOD MORNING!"];
[notification2 setFireDate:[gregCalendar2 dateFromComponents:dateComponent2]];
notification2.repeatInterval = NSWeekdayCalendarUnit;
[notification2 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification2];

NSCalendar *gregCalendar3 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent3 = [gregCalendar3 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent3 setWeekday:5];
[dateComponent3 setHour:11];
[dateComponent3 setMinute:44];

UILocalNotification *notification3 = [[UILocalNotification alloc]init];
[notification3 setAlertBody:@"GOOD MORNING!"];
[notification3 setFireDate:[gregCalendar3 dateFromComponents:dateComponent3]];
notification3.repeatInterval = NSWeekdayCalendarUnit;
[notification3 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification3];

NSCalendar *gregCalendar4 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent4 = [gregCalendar4 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent4 setWeekday:6];
[dateComponent4 setHour:11];
[dateComponent4 setMinute:44];

UILocalNotification *notification4 = [[UILocalNotification alloc]init];
[notification4 setAlertBody:@"GOOD MORNING!"];
[notification4 setFireDate:[gregCalendar4 dateFromComponents:dateComponent4]];
notification4.repeatInterval = NSWeekdayCalendarUnit;
[notification4 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification4];

NSCalendar *gregCalendar5 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent5 = [gregCalendar5 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent5 setWeekday:2];
[dateComponent5 setHour:14];
[dateComponent5 setMinute:59];

UILocalNotification *notification5 = [[UILocalNotification alloc]init];
[notification5 setAlertBody:@"GOOD AFTERNOON!"];
[notification5 setFireDate:[gregCalendar5 dateFromComponents:dateComponent5]];
notification5.repeatInterval = NSWeekdayCalendarUnit;
[notification5 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification5];

NSCalendar *gregCalendar6 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent6 = [gregCalendar6 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent6 setWeekday:3];
[dateComponent6 setHour:14];
[dateComponent6 setMinute:59];

UILocalNotification *notification6 = [[UILocalNotification alloc]init];
[notification6 setAlertBody:@"GOOD AFTERNOON!"];
[notification6 setFireDate:[gregCalendar6 dateFromComponents:dateComponent6]];
notification6.repeatInterval = NSWeekdayCalendarUnit;
[notification6 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification6];

NSCalendar *gregCalendar7 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent7 = [gregCalendar7 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent7 setWeekday:4];
[dateComponent7 setHour:14];
[dateComponent7 setMinute:59];

UILocalNotification *notification7 = [[UILocalNotification alloc]init];
[notification7 setAlertBody:@"GOOD AFTERNOON!"];
[notification7 setFireDate:[gregCalendar7 dateFromComponents:dateComponent7]];
notification7.repeatInterval = NSWeekdayCalendarUnit;
[notification7 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification7];

NSCalendar *gregCalendar8 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent8 = [gregCalendar8 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent8 setWeekday:5];
[dateComponent8 setHour:14];
[dateComponent8 setMinute:59];

UILocalNotification *notification8 = [[UILocalNotification alloc]init];
[notification8 setAlertBody:@"GOOD AFTERNOON!"];
[notification8 setFireDate:[gregCalendar8 dateFromComponents:dateComponent8]];
notification8.repeatInterval = NSWeekdayCalendarUnit;
[notification8 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification8];

NSCalendar *gregCalendar9 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent9 = [gregCalendar9 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent9 setWeekday:6];
[dateComponent9 setHour:14];
[dateComponent9 setMinute:59];

UILocalNotification *notification9 = [[UILocalNotification alloc]init];
[notification9 setAlertBody:@"GOOD AFTERNOON!"];
[notification9 setFireDate:[gregCalendar9 dateFromComponents:dateComponent9]];
notification9.repeatInterval = NSWeekdayCalendarUnit;
[notification9 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification9];

NSCalendar *gregCalendar10 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent10 = [gregCalendar10 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent10 setWeekday:6];
[dateComponent10 setHour:19];
[dateComponent10 setMinute:59];

UILocalNotification *notification10 = [[UILocalNotification alloc]init];
[notification10 setAlertBody:@"FRIDAY NIGHT!"];
[notification10 setFireDate:[gregCalendar10 dateFromComponents:dateComponent10]];
notification10.repeatInterval = NSWeekdayCalendarUnit;
[notification10 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification10];

NSCalendar *gregCalendar11 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent11 = [gregCalendar11 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent11 setWeekday:7];
[dateComponent11 setHour:9];
[dateComponent11 setMinute:59];

UILocalNotification *notification11 = [[UILocalNotification alloc]init];
[notification11 setAlertBody:@"HAVE A GREAT WEEKEND!"];
[notification11 setFireDate:[gregCalendar11 dateFromComponents:dateComponent11]];
notification11.repeatInterval = NSWeekdayCalendarUnit;
[notification11 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification11];

NSCalendar *gregCalendar12 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent12 = [gregCalendar12 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent12 setWeekday:7];
[dateComponent12 setHour:14];
[dateComponent12 setMinute:58];

UILocalNotification *notification12 = [[UILocalNotification alloc]init];
[notification12 setAlertBody:@"ENJOY YOUR WEEKEND!"];
[notification12 setFireDate:[gregCalendar12 dateFromComponents:dateComponent12]];
notification12.repeatInterval = NSWeekdayCalendarUnit;
[notification12 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification12];

NSCalendar *gregCalendar13 = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponent13 = [gregCalendar13 components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[dateComponent13 setWeekday:7];
[dateComponent13 setHour:19];
[dateComponent13 setMinute:58];

UILocalNotification *notification13 = [[UILocalNotification alloc]init];
[notification13 setAlertBody:@"SATURDAY NIGHT PARTY!"];
[notification13 setFireDate:[gregCalendar13 dateFromComponents:dateComponent13]];
notification13.repeatInterval = NSWeekdayCalendarUnit;
[notification13 setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification13];

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:29:27.747

To fire notifications at a specific day of the week at a specific time, the following code should work:

```
NSCalendar *gregCalendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponent = [gregCalendar components:NSYearCalendarUnit  | NSWeekCalendarUnit fromDate:[NSDate date]];

[dateComponent setWeekday:2]; // For Monday
[dateComponent setHour:11];
[dateComponent setMinute:44];

NSDate *fireDate = [gregCalendar dateFromComponents:dateComponent];

UILocalNotification *notification = [[UILocalNotification alloc]init];
[notification setAlertBody:@"GOOD MORNING!"];
[notification setFireDate:fireDate];
notification.repeatInterval = NSWeekCalendarUnit;
[notification setTimeZone:[NSTimeZone defaultTimeZone]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification]; 
```

The first part computes a date that is either on the next or on the previous monday. The second part defines the notification with a repeat interval of one week.

It does not matter if the fire date is the previous monday, the "next fire date" will automatically adjusted to the next week. (You can verify that with `NSLog(@"%@", notification)`.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:34:34.090

这些行导致通知每天重复一次：

```
notification.repeatInterval = NSWeekdayCalendarUnit; 
```

删除这些行，它应该可以解决您的问题。[文档](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)确切地说明了这个属性的作用：

> 如果您分配日历单位，例如每周 (NSWeekCalendarUnit) 或每年 (NSYearCalendarUnit)，系统会重新安排通知以指定时间间隔发送。默认值为 0，表示不重复。

# ios - 不兼容的块指针类型 SDWebImage

> ID：15484136
> 
> 赞同：1
> 
> 时间：2013-03-18T18:25:33.423
> 
> 标签：ios, objective-c, sdwebimage

我检查了一些答案，但这特定于我的代码，我无法让它工作。有什么想法吗？

错误开始于

```
completed:^(UIImage *image, NSError *... 
```

完整代码

```
//Load from URL
        NSURL *url =[NSURL URLWithString:image.imageURL];

        SDWebImageManager *manager = [SDWebImageManager sharedManager];

        [manager downloadWithURL:url
                         options:0
                        progress:^(NSUInteger receivedSize, long long expectedSize)
         {
             // progression tracking code
         }
                       completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType)
         {
             if (image)
             {
                 // do something with image
             }
         }]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:53:11.923

从`SDWebImageManager`标头中，该方法被声明为：

```
- (id<SDWebImageOperation>)downloadWithURL:(NSURL *)url
                                   options:(SDWebImageOptions)options
                                  progress:(SDWebImageDownloaderProgressBlock)progressBlock
                                 completed:(SDWebImageCompletedWithFinishedBlock)completedBlock; 
```

`SDWebImageCompetedWithFinishedBlock`声明如下：

```
typedef void(^SDWebImageCompletedWithFinishedBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished); 
```

所以看起来你错过了`finished` `BOOL`

# ios - 使用 SLComposeViewController 获取用户提交的帖子/推文

> ID：15484137
> 
> 赞同：3
> 
> 时间：2013-03-18T18:25:35.643
> 
> 标签：ios, objective-c, facebook, twitter, slcomposeviewcontroller

有没有办法让用户在使用时发布到 facebook/twitter 时提交评论`SLComposeViewController`？

完成处理程序似乎只允许访问完成状态“ `SLComposeViewControllerResultDone`”或“ `SLComposeViewControllerResultCancelled`”。

这是我的代码现在看起来如何的示例片段：

```
SLComposeViewController *tweetSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

[tweetSheet setInitialText:@"A test tweet."];

[tweetSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
      //------ get user submitted comments here somehow? ------
}];

[shareViewController presentViewController:tweetSheet animated:YES completion:^{
      [self dismiss];
}]; 
```

# java - spring security中的手动认证逻辑应该去哪里——服务层还是表示层？

> ID：15484139
> 
> 赞同：7
> 
> 时间：2013-03-18T18:25:38.050
> 
> 标签：java, spring, spring-security

我有这段代码

```
UserDetails userDetails = userDetailsServiceImpl.loadUserByUsername(email);
Authentication authentication = new UsernamePasswordAuthenticationToken(userDetails, userDetails.getPassword(), userDetails.getAuthorities());
SecurityContext securityContext = SecurityContextHolder.getContext();
securityContext.setAuthentication(authentication);
HttpSession session = request.getSession(true);
session.setAttribute("SPRING_SECURITY_CONTEXT", securityContext); 
```

这是在 Spring Security 中手动对用户进行身份验证。我的问题是我应该把这段代码放在哪里？把它放在服务层会迫使我将 HttpSession 对象带到服务层，而 AFAIK 是不好的。我也不确定将身份验证逻辑放在表示层中有多好。任何有任何见解的人？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T22:43:12.340

请参阅 Luke Taylor[对获取活动用户的 UserDetails 的最佳实践？](https://stackoverflow.com/questions/8764545/best-practice-for-getting-active-users-userdetails)了解创建自定义接口以执行此类操作同时保持代码与 Spring Security 分离的设计原理。例如，您可以编写一个名为的接口`MyAuthenticator`并编写实现并将其注入您的应用程序。

此外，如果您的 spring 安全过滤器是标准的，那么您不需要访问 HttpSession 对象。框架过滤器会处理它。您只需在实现中编写以下内容：

```
UserDetails userDetails = userDetailsServiceImpl.loadUserByUsername(email);

Authentication authentication = new UsernamePasswordAuthenticationToken(userDetails, userDetails.getPassword(), userDetails.getAuthorities());

SecurityContextHolder.getContext().setAuthentication(authentication); 
```

我不建议使用“SPRING_SECURITY_CONTEXT”（`HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY`），因为它可能会在框架的未来版本中发生变化。

# c# - 如何根据 DropDownBox 的状态隐藏控件？C＃

> ID：15484142
> 
> 赞同：0
> 
> 时间：2013-03-18T18:25:48.507
> 
> 标签：c#, drop-down-menu

我想根据在组合框中选择的项目隐藏一个文本框。

这是我的代码：

```
private void Banner_SelectedIndexChanged(object sender, EventArgs e)
{
    if (this.Banner.Text.Equals("Yes"))
    {
        this.BannerText.Visible = true;
        this.label12.Visible = true;
    }
    else 
    {
        this.BannerText.Visible = false;
        this.label12.Visible = false; 
    }
} 
```

我不明白我做错了什么。当在组合框中选择“是”时，我希望`BannerText`and可见。`label12`这应该只在选择“是”后出现。有没有人有这个的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:27:07.673

尝试固定您的支架。

```
if (Banner.Text == "Yes")
{
    BannerText.Show();
    label12.Show();
}
else 
{
    BannerText.Hide();
    label12.Hide();
} 
```

目前，由于该`else`语句本身漂浮在那里，您的代码将无法编译。

# google-chrome - Chrome 扩展程序 - 事件页面在不到 20 秒后处于非活动状态

> ID：15484156
> 
> 赞同：1
> 
> 时间：2013-03-18T18:26:25.917
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试创建一个提要阅读器，每隔一小时左右检查一次提要的更新版本。

我的问题是事件页面似乎在不到 20 秒后变为非活动状态。

我怎样才能让它持续更长时间？

以下是代码的一些重要部分：

在 manifest.json 中：

```
"background": {
    "scripts": ["eventPage.js"],
    "persistent": false
}, 
```

在 eventPage.js 中：

```
function testFunc () {
    alert("test")
}
setInterval(testFunc, 10 * 1000) // was testing the number of seconds here 
```

我究竟做错了什么？

谢谢！

问候，

约翰

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T18:52:08.017

使用`setInterval`定期运行某些代码在[后台页面](https://developer.chrome.com/extensions/background_pages.html)上运行良好，但在[事件页面](https://developer.chrome.com/extensions/event_pages.html)上却不行，因为当页面长时间空闲时，事件页面会变为非活动状态。

在事件页面上安排定期任务的正确方法是使用[`chrome.alarms`](https://developer.chrome.com/extensions/alarms.html)API：

```
chrome.alarms.onAlarm.addListener(function(alarm) {
    if (alarm.name == 'name-of-alarm') {
        // Do something...
        testFunc();
    }
});

// Create the alarm:
chrome.alarms.create('name-of-alarm', {
    periodInMinutes: 60
}); 
```

# gwt - 如何让生成的 GWT 源代码在 DEV 模式下运行？

> ID：15484160
> 
> 赞同：1
> 
> 时间：2013-03-18T18:26:37.230
> 
> 标签：gwt, maven, gwt-maven-plugin

我有一个用 Maven 构建的多模块 GWT 项目。我希望生成的 GWT 代码（由[gen gwt:compile 参数](http://mojo.codehaus.org/gwt-maven-plugin/compile-mojo.html#gen)指定的位置）可用于在 DEV 模式下进行调试。

我从 Eclipse 启动器启动 DEV 模式。

但是，当我尝试将生成的代码添加为 eclipse 中的源文件夹时，会出现大量错误，这些错误会阻止应用程序运行。即使有错误，我也尝试运行我的 webapp，但没有成功。

大多数错误是位于方法中的 JSNI ' *reference to non-existant field*`*_TypeSerializer.java#loadSignaturesNative()` ' 错误。

其他错误是由于缺少从内联 UIBinder 样式生成的 CSS 文件，以及与`ImmutableMap_FieldSerializer.deserialize(...)`和`ImmutableMap_FieldSerializer.serialize()`.

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:07:21.303

您必须将该文件夹添加到启动器的源选项卡，而不是作为项目的源文件夹。

# objective-c - 在 NSTableView 中显示二维数组

> ID：15484166
> 
> 赞同：2
> 
> 时间：2013-03-18T18:27:11.567
> 
> 标签：objective-c, macos, cocoa

我正在尝试通过转换我用 C 编写的程序来学习 Objective C。该程序适用于大型二维数组并对其进行计算，因此我需要能够以表格格式显示二维数组在用户界面上。我能想到的最好方法是将我的 C 样式数组逐行转换为 NSMutableArrays，然后将“行”NSMutableArrays 作为“行堆栈”存储在另一个 NSMutableArray 中以传递给 NSTableView。（如果有更好的方法，请告诉我。）

我遇到的问题是我似乎无法让它们存储在 arrayOfArrays 中。它只是空的。我确定我犯了一个愚蠢的菜鸟错误，我认为这与我调用构造函数的方式有关，但我无法弄清楚。

这是我的代码：

```
int grid[3][3] = {{1,2,3},{4,5,6},{7,8,9}};

NSMutableArray *arrayOfArrays;

int x=0;

-(void)awakeFromNib
{
    NSMutableArray *array1 = [[NSMutableArray alloc]init];
    NSMutableArray *array2 = [[NSMutableArray alloc]init];
    NSMutableArray *array3 = [[NSMutableArray alloc]init];

    for (int y=0; y < 3; y++) {
        [array1 addObject:[NSNumber numberWithInt:grid[x][y]]];
    }

    x++;
    for (int y=0; y < 3; y++) {
        [array2 addObject:[NSNumber numberWithInt:grid[x][y]]];
    }

    x++;
    for (int y=0; y < 3; y++) {
        [array3 addObject:[NSNumber numberWithInt:grid[x][y]]];
    }

    [arrayOfArrays addObject:array1];
    [arrayOfArrays addObject:array2];
    [arrayOfArrays addObject:array3];

}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView
{
    return [arrayOfArrays count];
}

- (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn       *)aTableColumn row:(NSInteger)rowIndex
{
    return [arrayOfArrays objectAtIndex:rowIndex];
}

@end 
```

哦，这个对象是一个 NSTableViewSource，它是 NSTableView 的数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:30:27.813

您的初始数组是：

```
int grid[3][3] = {{1,2,3},{4,5,6},{7,8,9}}; 
```

您可以通过以下方式制作一维数组：

```
NSMutableArray *arrayOfArrays=[NSMutableArray new];
for(int i=0;i<3;i++){
    for(int j=0;j<3;j++){
       [arrayOfArrays  addObject:grid[i][j]];
   }
} 
```

现在您可以`arrayOfArrays`用作您的数据源。

**编辑：**

这种表现形式对你来说合适吗？

![在此处输入图像描述](../Images/27165984f14c36d670c9c22b1a2313b7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:51:49.807

您不必*将*C 数组转换为对象。这可能是一个巨大的不必要的努力，除非你只是想这样做。Objective-C 的教训之一是 C 仍然存在并且仍然使用和适当。*一切都*不必是对象。:D

您可以使用 Table View Datasource 方法来完成这项工作。

`tableView:objectValueForTableColumn:row:`和`numberOfRowsInTableView:`

在您的`numberOfRowsInTableView:`实现中，只需返回要用于行的数组维度中的元素计数。

在您的 `tableView:objectValueForTableColumn:row:`实现中，您可以将数组元素值装箱为 NSNumber 对象或 NSString 对象，然后返回该对象。（NSNumber 字面量在这里会很方便）

唯一笨拙的部分是，您可能仍想决定根据数组维度之一的元素数以编程方式构建表中的列数。根据需要添加或删除表格列。这将为在代码中构建表格视图提供一个很好的练习。它将帮助您理解一些表格视图。

好吧，您仍然需要在创建 C 数组时以某种方式知道它的大小，以避免离开它的末尾......（C 陷阱......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:11:22.927

我假设`arrayOfArrays`是一个实例变量？如果是这样，那么是的，您看到的问题源于您`arrayOfArrays`在尝试向其添加项目之前尚未初始化（创建）。

虽然您可以在 中执行此`awakeFromNib`操作，但我通常在中执行此操作`init`，如果您不使用 ARC，请平衡`arrayOfArrays`in`init`与`release`in的创建`dealloc`：

```
- (id)init {
    if ((self = [super init])) {
         arrayOfArrays = [[NSMutableArray alloc] init];
    }
    return self;
}

- (void)dealloc {
   [arrayOfArrays release];
   [super dealloc];
} 
```

当您`init*`在 Objective-C 中初始化 ( ) 对象时，实例变量会自动设置`0`为原始类型和`nil`Objective-C 对象。在您的原始代码中，`[arrayOfArrays addObject:array1];`基本上等同于的行`[nil addObject:array1];`，或者换句话说，将消息发送到`nil`. 这在 Objective-C 中是允许的，结果是消息被简单地忽略了。该`numberOfRowsInTableView:`方法将“解析”`return [nil count];`返回 0，因此您的应用程序不会费心调用该`tableView:objectValueForTableColumn:row:`方法（即使调用了该方法，它也会返回`nil`）。

# database - 在 Couchdb 中订购

> ID：15484169
> 
> 赞同：2
> 
> 时间：2013-03-18T18:27:21.747
> 
> 标签：database, view, couchdb

我有一个包含名称和国家/地区字段的沙发数据库，​​并且我创建了一个返回每个国家/地区的计数的视图。

地图功能：

```
function(doc) {
   emit(doc.country, 1);
} 
```

减少功能：

```
function(keys, values, rereduce) {
   return sum(values);
} 
```

问题是我需要进行“排序”，在这种情况下，按计数递减。知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:43:50.103

不幸的是，使用 vanilla couchdb，您无法对 reduce 函数上的值进行排序。

couchdb 托管提供商 Cloudant 提供了“chained map reduce”来解决这个问题。请参阅[http://examples.cloudant.com/sales/_design/sales/index.html](http://examples.cloudant.com/sales/_design/sales/index.html)

您可以做几个选择，一个是将您的数据托管在 cloudant 上，或者两个将您的本地数据复制到 cloudant 以查询您的 order-by。

还有这个：[https](https://github.com/afters/couch-incarnate) ://github.com/afters/couch-incarnate ，不幸的是我没有尝试过，但可能适合你想要做的事情。

# java - 支持正整数的实现因子

> ID：15484178
> 
> 赞同：0
> 
> 时间：2013-03-18T18:28:04.433
> 
> 标签：java

你好我是新程序员，我需要一点点支持我该如何解决这个简单的任务

如果存在整数 M 使得 N = D * M，则正整数 D 是正整数 N 的因数。

例如，6 是 24 的因数，因为 M = 4 满足上述条件 (24 = 6 * 4)。

写一个函数：

```
class Solution { public int count_factors(int N); } 
```

即，给定一个正整数 N，返回其因子的数量。

例如，给定 N = 24，函数应该返回 8，因为 24 有 8 个因数，即 1、2、3、4、6、8、12、24。24 没有其他因数。

假使，假设：

```
N is an integer within the range [1..2,147,483,647] 
```

复杂：

```
expected worst-case time complexity is O(sqrt(N))
expected worst-case space complexity is O(1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:38:13.090

最坏情况的时间复杂度是`O(sqrt(N))`. 最坏情况的空间复杂度为`O(1)`.

```
public class Solution
{
    public static void main(String[] args)
    {
        final Solution solution = new Solution();
        for (int i = 1; i < 25; i++)
        {
            System.out.println(i + " has " + solution.count_factors(i) + " factor(s)");
        }
    }

    public int count_factors(int N)
    {
        int result = 0;
        final int sqrtN = (int) Math.sqrt(N);
        for (int i = 1; i <= sqrtN; i++)
        {
            if (N % i == 0)
            {
                // We found 2 factors: i and N/i.
                result += 2;
            }
        }
        if (sqrtN * sqrtN == N)
        {
            // We counted sqrtN twice.
            result--;
        }
        return result;
    }
} 
```

输出：

```
1 has 1 factor(s)
2 has 2 factor(s)
3 has 2 factor(s)
4 has 3 factor(s)
5 has 2 factor(s)
6 has 4 factor(s)
7 has 2 factor(s)
8 has 4 factor(s)
9 has 3 factor(s)
10 has 4 factor(s)
11 has 2 factor(s)
12 has 6 factor(s)
13 has 2 factor(s)
14 has 4 factor(s)
15 has 4 factor(s)
16 has 5 factor(s)
17 has 2 factor(s)
18 has 6 factor(s)
19 has 2 factor(s)
20 has 6 factor(s)
21 has 4 factor(s)
22 has 4 factor(s)
23 has 2 factor(s)
24 has 8 factor(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:32:31.173

```
 public int count_factors(int N)
 {
  int count = 2;
  for(int i=2; i<=N/2; i++)
  {
    if(N%i==0) count++;
  }
  return count;
 } 
```

这应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:02:23.843

```
public int count_factors(int N) {
    int numFactors = 2; //1 and N are factors
    double sqrtN = Math.sqrt(N);
    if((sqrtN == Math.ceil(sqrtN))) //If sqrt(N) has no fractional part don't include N itself
        numFactors=1;
    for(int i=2; i <= sqrtN; i++) {
        if(N%i == 0)
            numFactors +=2; // i and N/i are factors
    }
    return numFactors;
} 
```

# nginx - nginx 作为 SMTP 的反向代理：如何向上游服务器发送信息

> ID：15484185
> 
> 赞同：4
> 
> 时间：2013-03-18T18:28:38.140
> 
> 标签：nginx, smtp

我已将 nginx 设置为 SMTP 的反向代理。我的 nginx 设置能够执行以下操作：

*   接受用户输入
*   通过 yapache 服务器对用户进行身份验证
*   从认证服务器接收上游服务器的 ip
*   连接上游服务器
*   与上游服务器建立 SMTP 连接并移交消息。

但是消息传递失败，因为我的 SMTP 实现需要不通过常规 SMTP 命令传递的客户端 IP 和用户 ID（我的用户 ID 与 MAIL FROM 不同）。如何将此信息传递到我的后端服务器？

# python - 从 MySQL 数组中按值删除列表元素的正确语法

> ID：15484188
> 
> 赞同：0
> 
> 时间：2013-03-18T18:28:47.703
> 
> 标签：python, mysql

我有一个 MySQL 数组转换为 Python 列表，我想从列表中按值删除一个元素。这是我尝试过的：

```
existingEpisodeIDs = list(c.fetchall())
existingEpisodeIDs = [(22528819L,), (22604873L,), (22677186L,)]
id = 22528819
listElement = '(' + str(id) + 'L,)'
existingEpisodeIDs.remove(listElement) 
```

但我得到：

```
ValueError: list.remove(x): x not in list 
```

鉴于上述数据，任何人都可以告诉我用于删除元素的正确语法，或者建议一种更好的方法来达到预期的结果吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:30:54.870

```
existingEpisodeIDs = [row[0] for row in c.fetchall()] #this will end up just being a list of id's
id = 22528819
existingEpisodeIDs.remove(id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:38:37.600

```
In [17]: existingEpisodeIDs = [(22528819L,), (22604873L,), (22677186L,)]

In [18]: id = 22528819

In [19]: existingEpisodeIDs.remove((id,)) #tuple with the id

In [20]: existingEpisodeIDs
Out[20]: [(22604873L,), (22677186L,)] 
```

在这里快速回复您的错误：L 标识长类型

```
In [23]: type(existingEpisodeIDs[0][0])
Out[23]: long 
```

您无需在末尾构造一个带有 L 的字符串，您只需使用需要删除的 id 构造元组即可：)

# c++ - 具有模板参数大小的固定大小的 C 数组

> ID：15484193
> 
> 赞同：0
> 
> 时间：2013-03-18T18:29:00.190
> 
> 标签：c++, c++11

我正在使用一个模板类，我想包含固定大小的数据数组，其大小取决于模板参数。一个简化的例子是

```
template<int D>
class Foo
{    
    private:
        int m_array[D*(D+1)];            
}; 
```

虽然通常不赞成可变大小的 C 数组是可以理解的，但在这里它们可能是合理的，因为`D`它很小，而且很清楚有多少值`m_array`（并且它不能改变大小）。我的问题是

1.  首先，这实际上是对可变大小数组的合理使用吗？
2.  这是否总是不好的做法，因为编译器并不普遍支持这些数组？
3.  有干净的替代品吗？可以使用 a`std::vector`并在构造函数中设置大小，我认为这会使代码不那么清晰。是否最好使用 C++11 `std::array`，从而将上面示例中的相关行更改为`std::array<int,D*(D+1)> m_array;`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:32:35.753

您的示例不是*可变长度数组*，就像 C99 中存在的那样。在那里，数组的大小仅在运行时才知道。

在这里，您使用编译时常量来设置数组的大小。这样做没有问题。去享受吧。

# html - PHP Echo - 为什么我的 HTML 中有幽灵标签？

> ID：15484197
> 
> 赞同：0
> 
> 时间：2013-03-18T18:29:07.750
> 
> 标签：html, tags, echo

这是在 PHP 中作为`ECHO <<< END ... END;`语句的一部分：

```
<script type="text/javascript">
function ismaxlength(obj){
var mlength=obj.getAttribute? parseInt(obj.getAttribute("maxlength")) : ""
if (obj.getAttribute && obj.value.length>mlength)
obj.value=obj.value.substring(0,mlength)
}
</script>
<BR><BR>
Mark1
<BR><BR>Mark2
<table style="width:1000px; text-align: left; margin-left: auto; margin-right: auto; background-color: rgb(0, 0, 0);" border="4" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
    <td >

        <form action="add.php" method="post">
        Message 
```

这是输出 HTML（只是发布从上面生成的部分内容：

```
Mark1
<br><br>Mark2
<br><br><br><br><br><br><br><br><br><br><br><br><table style="width: 1000px; text-align: left; margin-left: auto; margin-right: auto; background-color: rgb(0, 0, 0);" border="4" cellpadding="2" cellspacing="2">
      <tbody>
    <tr>
        <td>

            <form action="add.php" method="post">
            Message<br> 
```

为什么会这样？（`<BR><BR><BR><BR>`一遍又一遍）

我正在使用 Windows Note Pad (win7) 进行编辑，自动换行，我什至删除了整个部分并从头开始重新输入，因为我找不到一些随机标签关闭的原因（例如 `'）

关于可能导致这种情况的任何建议？

# excel - Excel：在另一个之间有这么大空间的公式吗？

> ID：15484202
> 
> 赞同：-3
> 
> 时间：2013-03-18T18:29:19.683
> 
> 标签：excel, formula, trim

我在 excel 中有如下所示的内容。我需要删除所有不必要的信息。只保留 -.pdf。剩余的将被删除。我尝试了几个公式，但只能获得第一个文档名称。

`1-Abc.pdf is a pdf containing important stuff`

`2-Def.pdf is a pdf containing important stuff`

`3-Ghi.pdf is a pdf containing important stuff`

`4-Jkl.pdf is a pdf containing important stuff`

我需要一个公式，我能够得到如下所示的最终结果。

`1-Abc.pdf`
`2-Def.pdf`
`3-Ghi.pdf`
`4-Jkl.pdf`

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:49:45.207

返回第一个空格字符之前的所有内容：

```
=left(A1, find(" ",A1&" ")-1) 
```

如果源文本中没有空格，此公式也适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:14:29.230

这将返回文档名称，而不管之后的文本字符串如何。

```
=LEFT(A1; FIND(".pdf";A1)+4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:38:40.237

如果文本的结尾总是“是包含重要内容的 pdf”，则可以使用以下公式：

```
=LEFT(A1, LEN(A1) - 36) 
```

确保将“A1”替换为对需要从中提取值的单元格的引用。

# c++ - C++返回对象的引用

> ID：15484205
> 
> 赞同：2
> 
> 时间：2013-03-18T18:29:40.127
> 
> 标签：c++

```
 MyClass& getMyClass() {return m_class}

private:

    myClass* m_class; 
```

这给了我错误消息：错误：从“myClass*”类型的表达式中对“myClass&”类型的引用无效初始化

我应该改变什么才能让它工作？我想返回这个对象的引用。所以我不想改变 getMyClass 函数原型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:30:31.467

将其更改为

```
return *m_class; 
```

确保`m_class`是一个有效的指针（例如未`NULL`释放或释放）！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:30:55.533

```
MyClass &getMyClass() { return *m_class; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T18:31:02.103

因为指针不是引用，并且您正在返回一个指针，而应该返回一个引用。为了将指针转换为引用（在这种情况下），您必须取消引用指针，例如：

```
MyClass& getMyClass() {return *m_class} 
```

# javascript - 带有百分比的jquery动画

> ID：15484206
> 
> 赞同：0
> 
> 时间：2013-03-18T18:29:40.953
> 
> 标签：javascript, jquery

我正在做一个非常简单的动画，就像这样：

```
$("article").animate({
    left:"-=70"
},1000) 
```

这有效，它从当前的“左”值中减去 70px。但问题是，我需要它是一个百分比：

```
$("article").animate({
    left:"-=70%"
},1000) 
```

当然，这是行不通的。有什么解决办法吗？

谢谢！

编辑：添加了一个jsfiddle：

[http://jsfiddle.net/ZsU37/](http://jsfiddle.net/ZsU37/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:34:08.717

假设您已尝试上述方法但不起作用，您可以尝试计算实际值：

```
$("article").animate({
  left: parseInt($(this).css('left'),10)*0.3
},1000) 
```

解释：`$(this).css('left')`应该得到当前值，类似于`125px`，通过它`parseInt`来移除`px`部分，并乘以 0.3 得到它的 30%（假设它是你的意思 -70%）

**编辑：**见在这里工作的小提琴[http://jsfiddle.net/demaf/](http://jsfiddle.net/demaf/)。请注意：

*   因为我使用的是点击处理程序，所以我不能再使用`this`，所以我改成了`$('article')`.
*   要动画的元素需要有一个非零的 left 初始值（否则数学会给出 0 值并且不会发生动画）
*   元素需要使用该`left`值，因此需要`position`相应地编辑

# c# - ImapX 没有给我电子邮件主题/消息信息：

> ID：15484208
> 
> 赞同：0
> 
> 时间：2013-03-18T18:29:42.697
> 
> 标签：c#, email, imap

listBox1.Items.Add(from + ": " + x.Subject); 是什么没有返回所需的结果，它添加“：”而不是“FirstNameLastName：主题标题”

[https://imapx.codeplex.com/wikipage?title=Sample%20code%20for%20get%20messages%20from%20your%20inbox](https://imapx.codeplex.com/wikipage?title=Sample%20code%20for%20get%20messages%20from%20your%20inbox)

和[https://imapx.codeplex.com/](https://imapx.codeplex.com/)

```
 List<Task> m = new List<Task>();
    private async void cmdLogin_Click(object sender, EventArgs e)
    {
        bool result = imapMail.Connection();
        if (result)
        {
            result = imapMail.LogIn(email, password);
            if (result)
            {
                var messes = imapMail.Folders[inbox].Messages;
                foreach (var x in messes)
                {
                    string from = "";
                    foreach (var addresses in x.From)
                    {
                        from = addresses.DisplayName;
                    }
                    listBox1.Items.Add(from + ": " + x.Subject);
                }
                foreach (ImapX.Message msgs in imapMail.Folders[inbox].Messages)
                {
                    m.Add(new Task(new Action(() => msgs.Process())));
                }
                await Task.WhenAll(m);

            }
            else { this.Text = "failed login"; }
        }
        else { this.Text = "Failed connection"; }
    }
} 
```

除了冒号之外，这没有返回任何内容，它应该返回一个显示名称：消息主题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T17:10:30.120

在您检索消息详细信息（如“来自”、“主题”等）之前，您首先需要对消息调用 Process()。如果您查看[ImapX 的源代码](http://imapx.codeplex.com/SourceControl/latest#ImapX/Message.cs)，您会看到 Process() 涉及对 IMAP 服务器的服务器调用，以下载消息数据。

看起来您正在尝试在调用 Process() 之前检索发件人地址，这将返回一个空字符串。您需要更改顺序 - 先调用 Process()，然后才能查看消息详细信息。

请参阅下面的代码。我还没有测试过这个。

```
List<Task> m = new List<Task>();
private async void cmdLogin_Click(object sender, EventArgs e)
{
    bool result = imapMail.Connection();
    if (result)
    {
        result = imapMail.LogIn(email, password);
        if (result)
        {
            foreach (ImapX.Message msgs in imapMail.Folders[inbox].Messages)
            {
                m.Add(new Task(new Action(() => msgs.Process())));
            }
            await Task.WhenAll(m);

            var messes = imapMail.Folders[inbox].Messages;
            foreach (var x in messes)
            {
                string from = "";
                foreach (var addresses in x.From)
                {
                    from = addresses.DisplayName;
                }
                listBox1.Items.Add(from + ": " + x.Subject);
            }
        }
        else { this.Text = "failed login"; }
    }
    else { this.Text = "Failed connection"; }
} 
```

# javascript - 从 if 语句运行另一个函数

> ID：15484212
> 
> 赞同：0
> 
> 时间：2013-03-18T18:29:57.787
> 
> 标签：javascript, function

我有以下两个功能，我试图让用户输入一年，然后答案将产生答案。但是，我如何告诉函数识别字符串，然后如果答案不是 MM/DD/YYYY 形式，运行函数 wholePigLatin？基本上，我如何附加相同的按钮来运行这两个函数取决于什么用户投入。任何帮助将不胜感激。谢谢。

```
function isLeaper() {
            var image1 = document.getElementById('yes');
            var image2 = document.getElementById('no');
            var year = document.getElementById("isLeaper").value;
            var arr = year.split('/');
            var splitYear = arr[arr.length - 1];
            // 1\. If the year is divisible by 4, but not 100.
            if ((parseInt(splitYear) % 4) == 0) {
                if (parseInt(splitYear) % 100 == 0) {
                    if (parseInt(splitYear) % 400 != 0) {
                        $('#myDiv').html(image2).fadeIn(500).delay(1000).fadeOut(500);
                        // alert(year + 'is not a leap year. Sorry!');
                        return "false";
                    }
                    if (parseInt(splitYear) % 400 == 0) {
                        $('#myDiv').html(image1).fadeIn(500).delay(1000).fadeOut(500);

                        //alert(splitYear + ' is a leap year. Hooray! ');
                        return "true";
                    }
                }
                if (parseInt(splitYear) % 100 != 0) {
                    $('#myDiv').html(image1).fadeIn(500).delay(1000).fadeOut(500);

                    //alert(splitYear + ' is a leap year. Hooray! ');
                    return "true";
                }
            }
            if ((parseInt(splitYear) % 4) != 0) {
                $('#myDiv').html(image2).fadeIn(500).delay(1000).fadeOut(500);

                //alert(splitYear + ' is not a leap year. Sorry! ');
                return "false";
            }
        }

        if ((parseInt(year) % 4) != 0) {
            $('#myDiv').html(image2).fadeIn(500).delay(1000).fadeOut(500);
            return "false";
        } 
```

我的第二个功能如下：

```
function wholePigLatin() {
            var thingWeCase = document.getElementById("pigLatin").value;
            thingWeCase = thingWeCase.toLowerCase();
            var newWord = (thingWeCase.charAt(0));

            if (newWord.search(/[aeiou]/) > -1) { 
                alert(thingWeCase + 'way')
            }
            else {
                var newWord2 = thingWeCase.substring(1, thingWeCase.length) + newWord + 'ay';
                alert(newWord2)
            }
        } 
```

这是我的按钮。

```
 <input type="text" id="isLeaper" value="MM/DD/YYYY">
        <input type="button"  value="Is Leap Year?" onclick="isLeaper();"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:59:00.770

您可以像调用内置函数（例如 parseInt）一样调用自己的函数。您只需`wholePigLatin();`在要执行它的任何位置添加该行。

要使按钮运行以下两个函数之一：只需使用包含布尔逻辑的 if 语句引入一个函数，并在 onClick 事件中调用它：

```
function handleButtonClick() {
    var year = document.getElementById("isLeaper").value;

    if( isFormattedAsDate(year) ) {
        isLeaper();
    } else {
        wholePigLatin();    
    }
} 
```

和 HTML：

```
<input type="text" id="isLeaper" value="MM/DD/YYYY">
<input type="button"  value="Is Leap Year?" onclick="handleButtonClick();"> 
```

您仍然需要实现该`isFormattedAsDate`函数以在格式正确时返回 true，否则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:57:18.350

我想你想要这个：

```
function isLeaper() {
    var year = document.getElementById("isLeaper").value;
    if ( ! /* year is in DD/MM/YY format */)
        return wholePigLatin();
    // else
    // go on as normal
    // …
} 
```

要检查格式，您可能需要使用正则表达式：`/^\d{2}\/\d{2}\/\d{4}$/.test(year)`，并且您应该返回实际的布尔值，例如`true`或`false`从`isLeaper`函数而不是那些字符串。

# vb.net - Resharper 的单元测试资源管理器是否适用于 VB.NET 测试项目？

> ID：15484216
> 
> 赞同：0
> 
> 时间：2013-03-18T18:30:20.640
> 
> 标签：vb.net, testing, resharper, automated-tests

Resharper 的单元测试资源管理器是否适用于用 VB.NET 编写的测试项目？

在这两种情况下，是否有人参考提到这一点的 JetBrains 网站？我的搜索技巧并没有显示出任何一种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:39:02.880

是的，当然，如果您拥有正确的 ReSharper 版本（完整版或 VB.NET），它应该以与 C# 相同的方式与它们一起使用。

# javascript - jqplot 条形图在一个数据点上有多个系列

> ID：15484219
> 
> 赞同：0
> 
> 时间：2013-03-18T18:30:35.550
> 
> 标签：javascript, canvas, jqplot

我正在尝试获取一个`jqplot`图表，以在不同颜色的条中显示一堆数据，右侧有一个键，但缩放似乎无法正常工作。我的数据如下所示：

```
data:[[1.03],[1.02],[1.05],[1.02],[1.011]],
labels:["Imperial Stout","Lager","Porter","Etc","etc"], 
```

我可以尝试让它自动缩放，它会像这样切断一半的条：![左边的钢筋被切断](../Images/9175fb0741e32d80f0d009907fb37828.png)[（jsfiddle）](http://jsfiddle.net/VeA7s/10/)

我尝试将轴刻度从 0.8 设置为 1.2，但它将中心的所有条形聚集在一起，在图表上留下大量空白空间，如下所示：![酒吧聚集在中心](../Images/4f35cf560683fa68d335919636d26ca3.png) [（jsfiddle）](http://jsfiddle.net/VeA7s/9/)

有没有办法让它正确显示？

我不能将它们放在一个系列中，因为传说只是将其标记为“系列 1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:05:43.180

您可以将以下选项添加到`xaxis`：

`renderer: $.jqplot.CategoryAxisRenderer,`

如果您不希望图表下方有多余的刻度线，则可以`tickOptions`设置为。`show: false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:09:30.687

对我有用的是配置`xaxis`如下：

```
xaxis: {
    label: input.xaxis,
    renderer: $.jqplot.CategoryAxisRenderer,
    ticks: ['']
}, 
```

默认情况下，渲染的轴是 a `$.jqplot.LinearAxisRenderer`，它尝试渲染数字轴，因此您遇到了问题。

有趣的是，我还必须像以前那样设置`ticks`，因为没有它我会在 x 轴上显示单个刻度值 1，否则我无法摆脱它。

# python - 组合列表的元素

> ID：15484221
> 
> 赞同：0
> 
> 时间：2013-03-18T18:30:48.370
> 
> 标签：python

**问题**：给定一组数字，`S_a={n1,n2,n3,...,na}`产生以下类型的数字组合：

```
{Sk,Sp}, where k=1...a, p=k+1,..,a 
```

可以很容易地将这个解决方案构建为一个循环：

```
N = len(S)
for i in range(0, N):
    for j in range(i+1, N):
                 print("%d,%d" %(i,j)) 
```

但我正在寻找一个矢量化的解决方案。

* * *

另一个变体是考虑对象列表：

```
class A:
    def function(self, a):
        pass
L = [a1, a2, a3, a4, a5 ]

#where a1,a2,an are of class A. 
```

如何编写此循环的矢量化版本：

```
N = len(L)-1
for i in range(0, N):
    for j in range(i+1, N):
        L[i].function(L[j]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:32:43.390

改用[`itertools.combinations()`](http://docs.python.org/2/library/itertools.html#itertools.combinations)：

```
L = list(itertools.combinations(S, 2)) 
```

如果您想将其分开，文档会详细说明实现。

将其应用于您拥有的对象列表很容易：

```
for i, j in itertools.combinations(L, 2):
    i.function(j) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:37:56.710

如果“矢量化”是指“内部循环发生在`numpy`C 代码中”：

[`scipy.misc.comb`](http://docs.scipy.org/doc/scipy-0.7.x/reference/misc.html#scipy.misc.comb)是生成组合的最简单方法。

对于对`L[i], L[j]`all `i != j`、 or`i < j`或您正在考虑的任何其他情况进行操作的更一般情况，有几种方法可以做到这一点——您可以显式使用`broadcast`，或者您可以创建一个“列向量”和一个“行-vector" 从 L 中取出并执行操作，或者您可以创建 L 的移位副本的 2D 数组并对其应用操作，或者……这实际上取决于您在做什么。

# wpf - 如何使用 WPF 中的绑定重新启用列表视图中的复选框？

> ID：15484229
> 
> 赞同：0
> 
> 时间：2013-03-18T18:31:15.693
> 
> 标签：wpf

我的 IsEnabled 和 IsChecked 属性有一个多重触发器。它运行良好，只是在禁用复选框后，它不会通过代码重新启用。这是 XAML：

```
<ListView ScrollViewer.ScrollChanged="lstRewardsEarned_ScrollChanged" Height="178" HorizontalAlignment="Left" Margin="12,0,0,81" Name="lstRewardsEarned" VerticalAlignment="Bottom" Width="327" SelectionMode="Multiple" Background="White" FontFamily="Calibri" FontSize="16">
    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}">

            <!-- bind content IsSelected to the ListViewItem IsChecked -->
            <Setter Property="IsSelected" Value="{Binding Path=IsChecked, Mode=TwoWay, UpdateSourceTrigger=Explicit}" />

            <!-- bind content IsEnabled to the ListViewItem IsEnabled -->
            <Setter Property="IsEnabled" Value="{Binding Path=IsEnabled, Mode=TwoWay, UpdateSourceTrigger=Explicit}" />

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="Border" SnapsToDevicePixels="true">
                            <ContentPresenter />
                        </Border>

                        <ControlTemplate.Triggers>

                            <!--Highlight if IsSelected and IsEnabled-->
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSelected" Value="True"/>
                                    <Condition Property="IsEnabled" Value="True"/>
                                </MultiTrigger.Conditions>
                                <MultiTrigger.Setters>
                                    <Setter TargetName="Border" Property="Background" Value="Cyan"/>
                                </MultiTrigger.Setters>
                            </MultiTrigger>

                            <!--Remove highlight if is not Selected and IsEnabled-->
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSelected" Value="False"/>
                                    <Condition Property="IsEnabled" Value="True"/>
                                </MultiTrigger.Conditions>
                                <MultiTrigger.Setters>
                                    <Setter TargetName="Border" Property="Background" Value="Transparent"/>
                                </MultiTrigger.Setters>
                            </MultiTrigger>

                            <!--Add a trigger to remove the highlighting if IsEnabled is changed to false-->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Border" Property="Background" Value="Transparent"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListView.ItemContainerStyle>
</ListView> 
```

这是重新启用复选框的代码：

```
For Each checkBox As CheckBox In lstRewardsEarned.Items
    checkBox.IsEnabled = true

    'This writes out false!
    Console.WriteLine(checkBox.IsEnabled)
Next 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:48:31.147

从 IsEnabled 和 IsSelected 属性绑定中取出 UpdateSourceTrigger？

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)

> 如果将 UpdateSourceTrigger 值设置为 Explicit，则必须调用 UpdateSource 方法，否则更改将不会传播回源。

# windows-8 - WinJS xhr 请求 responseXML 在后台任务中为空

> ID：15484231
> 
> 赞同：2
> 
> 时间：2013-03-18T18:31:23.523
> 
> 标签：windows-8, windows-store-apps, winjs

我正在使用 WinJS 创建一个 Windows 8 应用程序。我已经注册了一个后台任务。这工作正常。但是，当我发出 xhr 请求时，responseXML 返回 null。当我从我的应用程序中调用它时，这很好用，但不是从后台任务中调用它。我认为这是因为后台任务执行有限的处理。

有没有人遇到过这种情况并知道一种解决方法来获取接受 querySelector() 方法的 XML 文档？

问题代码：

```
WinJS.xhr({ url: "http://codepb.com/feed?r=" + Math.random(), reponseType: "document" }).then(function (rss) {

    var items = rss.responseXML.querySelectorAll("item"); //cannot call querySelectorAll on null

    //rest of parsing here
}); 
```

更新：

这已被 MSFT 确认为错误。请参阅以下论坛帖子了解更多信息：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/1fde6e14-9619-43db-8898-b53bf3c5cf2c](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/1fde6e14-9619-43db-8898-b53bf3c5cf2c)

# tsql - SSRS 2008 报表生成器：有条件地关闭 Tablix 过滤器

> ID：15484233
> 
> 赞同：2
> 
> 时间：2013-03-18T18:31:32.900
> 
> 标签：tsql, sql-server-2008-r2, ssrs-2008, reporting-services

是否可以根据选择的参数关闭 Tablix 过滤器？如果一个值为空，我希望我的数据被过滤，但如果另一个值为空，我希望我的数据不被过滤。用户输入开始日期、结束日期和班次或 VCN。所有 4 个参数都可以设置为空。前 3 个参数查找一系列值的平均值。所以我设置了 Tablix 过滤器以从数据中删除异常值。例如，它只允许一定范围内的数字。但是，当用户输入 VCN 时，它会拉出一条记录，因此即使它是异常值，我也不希望过滤任何数据，因为有时它不会返回任何值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:53:18.187

是的，你可以通过这个小工作。

1.  在 tablix 上的过滤选项中选择要过滤的字段，例如`[Field1]`。
2.  将运算符设置为`=`。
3.  在 value 选项中设置一个类似于下面的表达式，如果在关注的参数中没有设置任何内容，这将使过滤器无效：

    ```
    =IIf(IsNothing(Parameter!MyPar1.Value), Field!Field1.Value, Parameter!MyPar1.Value) 
    ```

* * *

在评论之后，如果您仅在有意使用过滤器时假设`VCN`参数为空`VCN`，那么我会将以下过滤器应用于 tablix。

对于**日期**过滤器：

*   场地：`[Date]`
*   操作员：`>=`
*   公式：`=IIf(IsNothing(Parameter!VCN.Value), Parameter!StartDate.Value, Field!Date.Value)`

第二个**日期**过滤器：

*   场地：`[Date]`
*   操作员：`<=`
*   公式：`=IIf(IsNothing(Parameter!VCN.Value), Parameter!EndDate.Value, Field!Date.Value)`

对于**移位**过滤器：

*   场地：`[Shift]`
*   操作员：`=`
*   公式：`=IIf(IsNothing(Parameter!VCN.Value), Parameter!Shift.Value, Field!Shift.Value)`

对于**VCN**过滤器：

*   场地：`[VCN]`
*   操作员：`=`
*   公式：`=IIf(IsNothing(Parameter!VCN.Value), Field!VCN.Value, Parameter!VCN.Value)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:28:35.067

我会重新设计您的过滤器以返回布尔值并将值设置为 True。然后在过滤器表达式中，您可以使用 Iif 函数来检查您的参数并返回 True（包含）或 False（排除）。

对于即使是简单的过滤器，这通常也是一个更好的策略，因为数据类型转换等是奇异且变化无常的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:02:20.063

我做了一个解决方法，只是创建了一个新表，然后根据表达式隐藏了我的其他表。

# c - 在 8051 芯片的 C 中使用浮点数的问题

> ID：15484235
> 
> 赞同：1
> 
> 时间：2013-03-18T18:31:36.700
> 
> 标签：c, 8051

我正在尝试使用开发板上的电位分压器创建一个数字电压表。它使用8051芯片。要将其转换为伏特，我们必须将电位器中的数字乘以 5000/196。我有以下可以编译的代码，但是当我将它发送到开发板时，我得到“摘要：
收到 517 行，收到
4694 字节，收到
291 字节写入
错误：4403 字节无法写入”我不知道为什么它不会发送，但我是确定我在下面的代码中的某个地方很傻。

```
#include<8051.h>                     //header file, containing information on 8051
#include<stdio.h>                   //standard input/output file
#include<math.h>
#define DAC 0x0600              //DAC address
float conv=5000/196;
unsigned char xdata * idata DPTR;     //pointer declaration, made as external to main
unsigned int volt_in;

void delay();
void main()
{   
    unsigned char a;                 //variable to store signal value
    DPTR=DAC;   //pointer as a variable takes address of                            // DAC
    while(1)
    {
            a=0;
            *DPTR=a;                //assign  a to address in DPTR 
            while(P3_5!=0){
                a++;
                *DPTR=a;   
                 }
            a=(int) a*conv;
            volt_in=a;
            printf ("The voltage is %d Mv. \r" , volt_in); 
            a=~a;
            P1=a;
            //delay();

    }

}

void putchar(char c)
{
    while(!TI);
    TI=0;
    SBUF=c;
}

void delay()
{
unsigned int k;
for (k=0xFFFF;k>0;k--);
} 
```

我完全迷路了，所以任何帮助都会很棒。提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:45:19.183

在我看来，您的 8051 的程序内存（闪存）非常有限，并且浮点仿真库使图像膨胀，因此它太大了，无法适应。AFAIK，8051 没有浮点指令，因此必须模拟所有操作。

我建议尝试使用缩放整数而不是浮点数。换句话说，使用表示 1/100 毫伏的长整数，并在 printf 中重新格式化输出。

顺便说一句，我假设“Mv”应该代表毫伏。正确的缩写是“mv”。“Mv”表示兆伏特。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:16:40.757

我不确定这段代码应该如何工作。

您的预编译常量是 5000 / 196，即 25。为什么需要将变量“conv”设为浮点数？您将 char "a" 与 float "conv" 相乘，它将向上转换为 float，只是在代码的同一行中再次转换为 char "a"。不完全是最有效的事情。并且那个字符“a”无法存储乘法运算的结果。不管你的意图是什么，它都不应该起作用，除非你有一些超出我理解的聪明、优化的算法。但是在这种情况下，记录它是一个好主意，因为程序员的意图在这里并不明显，并且在一段时间后对你来说也不明显。

无论如何，您甚至不需要小数点表示，您只在这里处理整数，并将结果显示为整数。为什么首先需要浮动？还是我错过了什么？

是的，8051 浮点有点重，缺乏硬件支持，它可能不是可重入的，所以你应该采取一些措施不要在中断中使用它（不保存 FP 堆栈），标准 8051 限制为 4 KB ROM（如果您希望它按原样安装，请使用 8052）。除非绝对必要，否则最好避免在 8051 或任何小型微处理器上使用浮点数，或者您有很多空间和指令周期可以浪费。

# r - 将相同的因子水平应用于 R 数据框中的多个变量

> ID：15484236
> 
> 赞同：13
> 
> 时间：2013-03-18T18:31:40.417
> 
> 标签：r

我正在使用一个包含 16 个问题的数据集，其中响应集相同（是、否、未知或缺失）。我正在使用 R 处理数据，我想将每个变量变成一个因素。对于单个变量，我可以使用以下构造：

```
df <- read.csv("thedata.csv")
df$q1 <- factor(x=df$q1,levels=c(-9,0,1),
                        labels=c("Unknown or Missing","No","Yes)) 
```

我想避免输入 16 次。我可以用 a 来做到这一点`for()`，但我想知道是否有更清晰、更 R 的方式来做到这一点。一些样本数据：

```
structure(list(q1 = c(0, 0, 0, -9, 0), q2 = c(0, 0, 1, 0, 0),
               q3 = c(0, 0, 1, 0, 0), q4 = c(1, 1, 0, 0, 0),
               q5 = c(0, 1, 1, 1, 1), q6 = c(1, 1, 1, 0, 0),
               q7 = c(0, 0, 0, 1, 0), q8 = c(0, 0, 1, 1, 1),
               q9 = c(1, 0, -9, 1, 0), q10 = c(1, 0, 0, 0, 0),
               q11 = c(0, 1, 1, 0, 0), q12 = c(1, 1, 0, 0, 0),
               q13 = c(1, -9, 1, 0, 0), q14 = c(0, 0, 0, 1, 1),
               q15 = c(1, 0, 1, 1, 0), q16 = c(1, 1, 1, 1, 1)),
               .Names = c("q1", "q2", "q3", "q4", "q5", "q6", "q7",
                          "q8", "q9", "q10", "q11", "q12", "q13",
                          "q14", "q15", "q16"),
               row.names = c(NA, -5L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T18:47:33.567

```
df[] <- lapply(df, factor, 
              levels=c(-9, 0, 1), 
              labels = c("Unknown or Missing", "No", "Yes"))
str(df) 
```

可能比需要 data.frame 对这些结果进行重新分类/重新分类的 apply 或 sapply 更快。这里的诀窍是，`[]`在分配的 LHS 上使用保留了目标的结构（因为 R“知道”它的类和维度是什么，并且不需要`data.frame`列表 from `lapply`。如果你想这样做只有选定的列你可以这样做：

```
 df[colnums] <- lapply(df[colnums], factor, 
              levels=c(-9, 0, 1), 
              labels = c("Unknown or Missing", "No", "Yes"))
 str(df) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:43:05.157

使用 R 基础解决方案`apply`

```
 data.frame(apply(df, 2, factor, 
                 levels=c(-9, 0, 1), 
                 labels = c("Unknown or Missing", "No", "Yes"))) 
```

使用`sapply`

```
data.frame(sapply(df, factor, levels=c(-9, 0, 1), 
         labels = c("Unknown or Missing", "No", "Yes"))) 
```

# obfuscation - C语言中基于Linux的病毒/恶意软件源代码

> ID：15484241
> 
> 赞同：3
> 
> 时间：2013-03-18T18:31:58.247
> 
> 标签：obfuscation, virus, malware, deobfuscation

我正在研究变形代码生成器的项目。为了测试这个项目，我需要一些 C 语言的病毒源代码。因为我在 Linux 上开发了这个工具。我需要基于 Linux 的病毒代码。有什么好的链接可以下载此类病毒代码吗？

# android - 无法通过 translate3d 停止 CSS3 转换转换

> ID：15484242
> 
> 赞同：2
> 
> 时间：2013-03-18T18:32:00.387
> 
> 标签：android, css, transform, transitions, translate3d

我正在尝试使用 translate3d: [JSFiddle](http://jsfiddle.net/San4es/m7WdV/)通过 CSS3 转换为元素设置动画。

```
// for start animation
$("#content")
    .css("-webkit-transition", "all 100s");
    .css("-webkit-transform", "translate(0, -900px)");
// for stop animation
$("#content")
    .css("-webkit-transition", "none"); 
```

在桌面 Chrome 和 Safari 中很好，但在 Android 4.1.x（SGSII、Galaxy Nexus 等）上的默认浏览器中，这种方法不起作用 - 转换不会停止。另外，我注意到这种情况只是一个相对的 translate3d：使用 translate 和 position CSS props（例如“top”、“left”）它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T17:37:16.617

Android 4 上的转换实现似乎有问题，如果通过将转换硬件渲染层调整`webkitTransitionDuration`为 0（并且设置`webkitTransition`为`'none'`或`''`通常暗示这一点）来取消转换硬件渲染层。这可以通过使用`.001ms`或类似的过渡持续时间来规避，尽管这很可能仍会绘制多个帧。

至少在某些设备上更实用的解决方法是对 使用负值`webkitTransitionDelay`，强制新的转换生效，但选择此值以使转换直接在其完成状态下开始。

像这样：

```
e.style.webkitTransition = '-webkit-transform linear 10s';
e.style.webkitTransform = 'translate3d(100px,100px,0)';

# now cancel 10s-long transition in 1s and reset transformation
setTimeout(function() {
    e.style.webkitTransitionDelay = '-10s'
    e.style.webkitTransform = 'translate3d(0,0,0)';
}, 1000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T12:51:39.453

这解决了我的（非常相似的）问题：

```
$el.removeClass('THE_ANIMATION').css('opacity', 0.99);
window.setTimeout(function () {
  $el.css('opacity', 1); 
}, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T02:18:01.257

这是我通过一些实验发现的：

在 chrome、safari、firefox 和 iphone webview 上停止正在运行的 translate2d 或 3d 可以通过设置“none”转换或具有负或 0 时间延迟的转换并为当前位置提供新的转换来完成，如上所述。

然而，这不适用于 android webview。我能为 android 找到的唯一解决方案是将转换延迟设置为一个小的正数，例如 0.001 秒，并为当前位置提供转换。

请注意，在 iphone webview 中，负转换延迟的解决方案优于“无”或小的正数，这将在执行抢占后续转换之前闪烁正在进行的转换的最终位置。

# database - 将表与第三个表链接

> ID：15484246
> 
> 赞同：1
> 
> 时间：2013-03-18T18:32:22.547
> 
> 标签：database, rdbms

长期读者，第一次海报。我有两张这样的桌子：

Div (ID, Amount,...) Txn (ID, Amount,...)

有时两者之间存在关联，需要在Txn表中捕获Div表ID，但并非总是如此。如果有的话，只会有 1 条 Txn 记录与 1 条 Div 记录相关联。此外，当删除 Div 记录时，我希望删除相应的 Txn 记录（如果存在）。

我的问题是；我应该只在 Txn 表中添加一个“DivID”字段并通过应用程序管理删除，还是添加第三个具有 DivID 和 TxnID 的表来捕获关系会更好？

谢谢你的想法。蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:37:26.620

我会在 Txn 表中添加 DivId ，将其添加为外键，然后在创建（或更改）表时，设置选项 On Delete Cascade 。查询时，您可以使用 Left Join，因为并非每个 Div 在 Txn 中都有记录。删除的时候，因为你设置了选项，所以会强制删除Txn中的记录。

# php - 是否可以在 PHP 中同时拥有两个类？

> ID：15484247
> 
> 赞同：0
> 
> 时间：2013-03-18T18:32:22.583
> 
> 标签：php, html

嗨，我正在将 html 代码转换为 php 代码，但我遇到了一些问题。

例如在我使用的 html 中`<ul div class="country city">...</ul>`，它包含两个类（国家和城市），

但是当我使用 PHP 时，我需要将其更改为，`echo "<ul div class=country city>...</ul>"`因为 php 中间不接受 ""。结果，系统只接受第一类（国家）而不是两个类。

那我能问一下怎么改吗，谢谢:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:33:30.260

使用简单的引号，例如作为 HTML 接受它作为双引号

```
echo "<ul div class='country city'>...</ul>" 
```

您也可以转义您的`"`以便 PHP 可以接受它：

```
echo "<ul div class=\"country city\">...</ul>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:39:56.710

您可以交换报价以使它们起作用。像这样

```
echo "<ul div class='country city'>...</ul>" 
```

如果要在两者之间引入任何变量，可以通过

```
echo "<ul div class='country city".$variable."'>...</ul>" 
```

这被称为混合物

# wpf - WPF：在多个页面中打印 DataGrid

> ID：15484260
> 
> 赞同：3
> 
> 时间：2013-03-18T18:32:59.107
> 
> 标签：wpf, printing, datagrid, multipage

我有需要在多个页面中水平和垂直打印的 DataGrid。基于详尽的搜索，我找到的最接近的解决方案是@ [http://www.codeproject.com/Articles/138233/Custom-Data-Grid-Document-Paginator](http://www.codeproject.com/Articles/138233/Custom-Data-Grid-Document-Paginator)。但是，如果打印具有 ComboBox 作为其内容的 DataGridTemplateColumn，则生成的打印输出是空白组合框。下面是打印的截图，

[http://www.filedropper.com/datagridprint](http://www.filedropper.com/datagridprint)

下面是用于在打印时创建模板列的代码，

```
private FrameworkElement GetTableCell(Grid grid, DataGridColumn column, object item, int columnIndex, int rowIndex)
    {
        FrameworkElement visualElement = null;
        if (column is DataGridTemplateColumn)
        {
            DataGridTemplateColumn templateColumn = column as DataGridTemplateColumn;
            ContentControl contentControl = new ContentControl();
            contentControl.Focusable = true;
            contentControl.ContentTemplate = templateColumn.CellTemplate;
            contentControl.Content = item;

            contentControl.SetValue(Grid.ColumnProperty, columnIndex);
            contentControl.SetValue(Grid.RowProperty, rowIndex);

            visualElement = contentControl;
        } 
```

上面的代码基本上是新建了内容控件，并将与网格关联的CellTemplate添加到新创建的内容中，是行不通的。我想知道上面的代码是否有修复，如果没有，是否有一个可行的解决方案可以将 DataGrid 打印到多个页面（WYSIWYG）。

谢谢你的帮助。

# javascript - angularjs、ng-repeat 和 DOM 元素大小

> ID：15484265
> 
> 赞同：0
> 
> 时间：2013-03-18T18:33:39.737
> 
> 标签：javascript, dom, angularjs, ng-repeat

我有一部分代码，如下所示：

```
<div class="wrapper-directive">
   <div class="table" style="display:table">
      <div class="column" style="display:table-cell;" ng-repeat="column in columns">   
        {{column.text}}</div>
      </div>
   </div> 
```

如何从“wrapperDirective”中获取重复“列”元素的宽度？据我了解，我需要类似 onDomRepeatComplete 事件，但此时我仍然找不到正确的解决方案和语法，只使用 setTimeout pause ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:49:53.587

`$last`可用于确定创建最后一个 <div> 的时间。有关可以附加到 <div> 元素的指令的实现，请参见[这个小提琴](http://jsfiddle.net/roychoo/XVzUW/3/)（我没有写它） ：`checkLast`

```
directive('checkLast', function () {
  return function (scope, element, attrs) {
     if (scope.$last === true) {
        element.ready(function () {
           // determine width here using jQuery or JavaScript
           // If that doesn't work try with $timeout:
           // $timeout(function() { 
           //    ...
           //}, 0, false);  // remove false if you need $apply to run 
```

另请参阅[https://stackoverflow.com/a/13906907/215945](https://stackoverflow.com/a/13906907/215945)

# visual-studio-2008 - Crystal Reports to PDF“对象未设置为对象的实例”错误

> ID：15484268
> 
> 赞同：1
> 
> 时间：2013-03-18T18:33:52.250
> 
> 标签：visual-studio-2008, crystal-reports

早在我开始在这里工作之前，一位开发人员在 VS 2008 中的 VB.Net 中编写了一个 Web 应用程序，其中包含一个使用 Crystal Reports 作为 PDF 文件创建报表的链接。用户向我报告该链接生成错误。我不确定这是否一直是一个问题，现在才被报告，或者服务器是否发生了变化。这是一个应用程序，自从我来到这里以来，我很少参与其中，而编写它的开发人员早已离开公司。自 90 年代后期以来，我就没有使用过 Crystal Reports。无论如何，这里有足够的背景是错误的。

我一直追踪到 objTemp.Export() 方法调用（其中 objTemp 是 Crystal Reports ReportClass 类的实例）。

当我在 Visual Studio IDE 中的机器上本地运行应用程序时，一切都按预期运行。我重新编译并将应用程序发布到生产服务器上的单独文件夹，然后运行我的版本，我仍然得到与生产版本相同的错误。

ASP 错误页面如下所示：

# “/MyApplication”应用程序中的服务器错误。

* * *

## *你调用的对象是空的。*

**说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**异常详细信息：** System.NullReferenceException：对象引用未设置为对象的实例。

**源错误：**

```
在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
```

**堆栈跟踪：**

```
[NullReferenceException: Object reference not set to an instance of an object.]
    MyApplication.libMyAppFunctions.ExportAndDisplayPDF(Object objTemp) in O:\MyApplication\library\libMyAppFunctions.vb:491
    MyApplication.ViewReport.btnPrint_Click(Object sender, EventArgs e) in O:\MyApplication\aspx\Reports\ViewReport.aspx.vb:1462
    System.Web.UI.WebControls.LinkButton.OnClick(EventArgs e) +111
    System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +79
    System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
    System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
    System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +175
    System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1565 
```

* * *

**版本信息：** Microsoft .NET Framework 版本：2.0.50727.3643；ASP.NET 版本：2.0.50727.3634

我遇到的一个问题是，在错误中它指向“O:\MyApplication ...”。那是我保存源代码的网络驱动器。没有 O: 驱动器映射到服务器。这似乎是错误的根源，但我无法想象硬编码驱动器号是 Visual Studio 开发环境的标准部分。它从未对我编写/工作过的任何其他应用程序造成此类问题。

***添加 3/19/2013 以响应 Andrew 的源代码请求
这是单击创建 PDF 文件的链接时调用的代码。

```
Private Sub btnPrint_Click(ByVal sender As Object, ByVal e As System.EventArgs) 处理 btnPrint.Click
    暗淡
    将 objViewReport 调暗为 ViewReport = New ViewReport(frmView)
    dtReportComments = objViewReport.getDtReportComments

    暗淡作为对象

    如果 (objViewReport.intTimeOfDayID -1) 那么
        oRpt = 新 rptTOC_DateSpecific()
    别的
        oRpt = 新 rptTOC_DateAll()
    万一
    oRpt.SetDataSource(dtReportComments)

    '设置季节、日期和 TimeOfDay
    将季节调暗为 CrystalDecisions.CrystalReports.Engine.TextObject = oRpt.ReportDefinition.ReportObjects.Item("txtSeason")
    将标题变暗为 CrystalDecisions.CrystalReports.Engine.TextObject = oRpt.ReportDefinition.ReportObjects.Item("txtViewReportDate")
    将 toTimeOfDay 调暗为 CrystalDecisions.CrystalReports.Engine.TextObject = oRpt.ReportDefinition.ReportObjects.Item("txtTimeOfDay")

    toSeason.Text = objViewReport.strSeasonID

    如果 (objViewReport.intTimeOfDayID -1) 那么
        toTitle.Text = objViewReport.datViewReportDate.ToString("MM/dd/yyyy")
        toTimeOfDay.Text = objViewReport.strTimeOfDay
    别的
        toTitle.Text = "全部"
        toTimeOfDay.Text = "全部"
    万一

    ExportAndDisplayPDF(oRpt)
结束子

```

这是 btnPrint_click 方法调用的代码

```
 Public Function ExportAndDisplayPDF(ByVal objTemp As Object)
    Dim dNow As DateTime = Now

    Dim strFileName As String = dNow.Ticks & ".pdf"
    'write to a pdf file.
    Dim DiskOpts As CrystalDecisions.Shared.DiskFileDestinationOptions = New CrystalDecisions.Shared.DiskFileDestinationOptions()
    objTemp.ExportOptions.ExportDestinationType = CrystalDecisions.[Shared].ExportDestinationType.DiskFile
    objTemp.ExportOptions.ExportFormatType = CrystalDecisions.[Shared].ExportFormatType.PortableDocFormat

    DiskOpts.DiskFileName = HttpContext.Current.Request.PhysicalApplicationPath.ToString & "ReportOutput\" & strFileName

    objTemp.ExportOptions.DestinationOptions = DiskOpts
    Try
        objTemp.Export()
    Catch oRptExcept As Exception
        HttpContext.Current.Response.Write(oRptExcept.Message & "<br><br>" & oRptExcept.InnerException.Message)
    End Try
    HttpContext.Current.Response.Redirect("/MyApplication/aspx/print/Print.aspx?theDestination=" & strFileName)

End Function 

```

只是在寻找解决方案。

谢谢
罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T19:00:24.850

这个问题的答案与 Crystal Reports 完全无关。当您派程序员（我）从事网络管理员工作时，就会发生这种情况。好吧，我知道，你们中的很多聪明人可以同时做到这两点，但我不是你。我在网络方面的经验很少。刚好能过得去。虽然是我虚弱的大脑想通了。

该应用程序的工作方式是将数据读入表格，然后将该数据发送到 Crystal Reports 对象以保存为全新的 PDF 文件。之后，应用程序打开了新的 PDF 文件进行查看。该错误抱怨该对象未实例化。对我来说，这就是编程问题。

这根本不是编程问题。在其中创建新 PDF 文件的文件夹没有运行网站的用户组的写入权限。

如果您没有写入权限，如何创建 PDF？如果您没有写入权限，如何创建 PDF？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-13T07:16:50.880

一个老问题，但最近几天我遇到了类似的问题。

通用的“未设置对象引用......”非常具有误导性。像往常一样，已发布的代码在 DEV 和 QA 环境中可以正常工作，但在 PRODUCTION 中会失败。

我将**objTemp.Export()**更改为**objTemp.ExportToHttpResponse(FileName, Response, false, "")**它就像一个魅力。

希望这可以帮助某人。

# javascript - 如何在包含大量图像的网页上实现平滑滚动？

> ID：15484269
> 
> 赞同：0
> 
> 时间：2013-03-18T18:34:03.567
> 
> 标签：javascript, html, css, image

我的一个页面上包含了很多图像，Pinterest 将是最好的比较它，我注意到滚动尤其是在 Chrome 中非常生涩且不流畅。有没有办法实现更流畅的滚动？我会通过 JavaScript 做到这一点还是它是一个 CSS 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:39:35.640

在 Pinterest 上滚动流畅的原因有以下几点：

1.  图像被延迟加载。它们也可能[被缓存](http://en.wikipedia.org/wiki/Cache_%28computing%29)在服务器端以加快服务速度。
2.  如果图像距离视口足够远，则图像将被清除（如果您的 THRESHOLD 像素向下，则应清除 y=0 处的图像）。这会清理内存并提供更流畅的体验（这类似于[UITableViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)在 iOS 中的工作方式）。

我的建议？

1.  在您的服务器上缓存图像。
2.  清除远离观察口的 THRESHOLD 像素的图像。
3.  延迟加载图像。
4.  [使用一个好的无限滚动插件。](https://github.com/paulirish/infinite-scroll)

PS - 如果您提供非常大的文件（按大小），您将获得缓慢的体验（取决于您的互联网连接速度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:36:18.353

id' 建议使用 js 将所有图片加载到浏览器的可见区域，再加载一些图片，如果用户向下滚动，则加载更多图片。当从一开始就有很多图片时，滚动变得非常糟糕。

# c# - 如果两个类继承一个静态字段，这些类的对象会共享相同的值吗？

> ID：15484273
> 
> 赞同：1
> 
> 时间：2013-03-18T18:34:27.780
> 
> 标签：c#, inheritance

不同类的不同对象是否有可能在它们之间使用一个共享项（例如，用于即时提供一些信息）或更好地在两个不同类的不同对象之间进行通信？

```
Class Base 
{
   public static string SomeThing = "Shared With All";
}
Class Der1 :Base
{
     public void DoSomeThing()
     {
          SomeThing = "SomeThing Goes in here...";
     }
}

Class Der2 :Base
{
     public void DoSomeThingElse()
     {
          Console.WriteLine"(SomeThing);
     }
}

....
{
    Der1 dr1 = new Der1();
    dr1.DoSomeThing();  
    Der2 dr2 = new Der2();
    dr2.DoSomeThingElse(); //shows 'SomeThing Goes in here...'  
} 
```

如果它有更多帮助，我正在尝试创建某种设计器，因此我需要跟踪设计器上的所有控件及其关联。实际上现在只有两个对象（一个叫交易，一个叫地点，不同的地点可以关联不同的交易，这种关联是通过用户点击一个地点并指向其他交易完成的（你有没有见过`Proteus`？类似的东西）。

所以这种方法将帮助我知道哪个对象引用了哪个其他对象，因此可以很容易地发现和保存两者之间的关联。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:36:26.947

静态字段与普通字段的继承方式不同。仍然只有*一个*静态场，`Base.SomeThing`. 您的两个派生类都引用同一个字段：如果*有任何*更改`Base.SomeThing`，访问该字段的*所有内容*都会看到更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:36:47.087

是的，你发明了一个全局变量：）它也几乎总是糟糕设计的标志。尝试以不同的方式解决您的任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T18:37:37.257

这是可能的，但请仔细考虑在课堂内以这种方式进行交流。如果值设置在多个位置，则没有很好的方法来解决并发问题并且很难调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T18:38:12.993

您可以使用`static`var 或使用`setter`and共享内容`getter`。这些是 OOP 中的基本运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T18:47:47.283

静态字段属于声明它的类。该类的任何子类都可以访问该静态字段。

这里有一些警告。在泛型类上声明一个静态变量意味着该变量的一个副本存在于该泛型的每个封闭类型。这是一个澄清的例子

```
public class StaticGenericTest<T>
{
  private static int count=0;
  public StaticGenericTest()
  {
     count++;
  }
} 
```

如果您实例化 a`StaticGenericTest<int>`和 a`StaticGenericTest<string>`它们将具有不同的计数值。然而， 的子类`StaticGenericTest<int>`将与 的所有其他子类共享计数`StaticGenericTest<int>`。

`ThreadStatic`此外，使用属性（因为您将获得每个线程的一份计数）和/或[静态构造函数](http://ericlippert.com/2013/02/06/static-constructors-part-one/)，您将获得有趣的行为。

正如有人提到的，静态字段是全局状态，应该受到保护并谨慎使用。

# github - 如何在 Github 上重新打包存储库？

> ID：15484283
> 
> 赞同：1
> 
> 时间：2013-03-18T18:35:08.867
> 
> 标签：github

我知道该`git repack`命令，但我只能在本地应用它。如何强制服务器适应更改？

我希望将我的存储库克隆到他们的硬盘上的人获得优化的存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:08:30.400

我没有看到任何可以在 GitHub 端触发重新打包的用户端命令。
您可以通过电子邮件向 GitHub 支持发送电子邮件，要求重新打包，但我怀疑他们会回答这样的管理任务无论如何都会在他们的所有 repo 上定期运行。

# ios - 面临 UISwitch 开/关问题

> ID：15484285
> 
> 赞同：0
> 
> 时间：2013-03-18T18:35:10.767
> 
> 标签：ios, objective-c, ios6, uiswitch, hiddenfield

屏幕上有 6 个开关控件。一次只能启用一个开关。如果第 5 个开关打开，则一个标签和一个文本字段应该可见，或者应该隐藏。

我遇到了问题，当 5 开关从关闭变为开启并再次变为关闭时。标签和文本文件应该被隐藏，但它不能按要求工作。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.sw_switch1.on = NO;
    self.sw_switch2.on = NO;
    self.sw_switch3.on = NO;
    self.sw_switch4.on = NO;
    self.sw_switch5.on = NO;
    self.sw_switch6.on = NO;

    lbl_desc.hidden = YES;
    txt_desc.hidden = YES;

}

-(IBAction)switchChange:(id)sender
{

        if(sw_switch1.isOn)
        {
            //self.sw_switch1.on = NO;
            self.sw_switch2.on = NO;
            self.sw_switch3.on = NO;
            self.sw_switch4.on = NO;
            self.sw_switch5.on = NO;
            self.sw_switch6.on = NO;

        }

        else if(sw_switch2.isOn)
        {
            self.sw_switch1.on = NO;
            //self.sw_switch2.on = NO;
            self.sw_switch3.on = NO;
            self.sw_switch4.on = NO;
            self.sw_switch5.on = NO;
            self.sw_switch6.on = NO;

        }

        else if(sw_switch3.isOn)
        {
            self.sw_switch1.on = NO;
            self.sw_switch2.on = NO;
            //self.sw_switch3.on = NO;
            self.sw_switch4.on = NO;
            self.sw_switch5.on = NO;
            self.sw_switch6.on = NO;

        }
        else if(sw_switch4.isOn)
        {
            self.sw_switch1.on = NO;
            self.sw_switch2.on = NO;
            self.sw_switch3.on = NO;
            //self.sw_switch4.on = NO;
            self.sw_switch5.on = NO;
            self.sw_switch6.on = NO;

        }

        else if(sw_switch5.isOn)
        {
            self.sw_switch1.on = NO;
            self.sw_switch2.on = NO;
            self.sw_switch3.on = NO;
            self.sw_switch4.on = NO;
            //self.sw_switch5.on = NO;
            self.sw_switch6.on = NO;
            lbl_desc.hidden = YES;
            txt_desc.hidden = YES;

        }

        else if(sw_switch6.isOn)
        {
            lbl_desc.hidden = NO;
            txt_desc.hidden = NO;
            self.sw_switch1.on = NO;
            self.sw_switch2.on = NO;
            self.sw_switch3.on = NO;
            self.sw_switch4.on = NO;
            self.sw_switch5.on = NO;
            //self.sw_switch6.on = NO;
        }

    [self viewWillAppear:NO];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:48:33.797

当开关打开时，您隐藏标签（.hidden = YES）。但是当其他人关闭时，您不会取消隐藏（.hidden=NO）。无论如何，您的代码有点不合逻辑。

我建议：

```
-(IBAction)switchChange:(id)sender
{

            UISwitch *theSwitch = (UISwitch *) sender; 
            BOOL switchState = theSwitch.on; //this method is called when changed to on or off. 

            self.sw_switch1.on = NO;  // force all switches off
            self.sw_switch2.on = NO;
            self.sw_switch3.on = NO;
            self.sw_switch4.on = NO;
            self.sw_switch5.on = NO;
            self.sw_switch6.on = NO;

            theSwitch.on = switchState; // recover the state set by the user. 

            //now hide or unhide the labels depending on the state of switch 5\. 
            lbl_desc.hidden = self.sw_switch5.on;
            txt_desc.hidden = self.sw_switch5.on;

    // [self viewWillAppear:NO];   // What the h.... is this? You are not supposed to call that method. Use self.view.setNeedsDisplay or so instead.

    [self.view setNeedsDisplay];  // This may not be reqired but it forces the view to re-display itself. 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:44:55.893

你可以试试这个

```
if(sw_switch5.isOn)
        {
            self.sw_switch1.on = NO;
            self.sw_switch2.on = NO;
            self.sw_switch3.on = NO;
            self.sw_switch4.on = NO;
            //self.sw_switch5.on = NO;
            self.sw_switch6.on = NO;
            lbl_desc.hidden = NO;
            txt_desc.hidden = NO;
        }
        else 
        {
            lbl_desc.hidden = YES;
            txt_desc.hidden = YES;
        } 
```

我的建议是您也应该为每个开关控件使用标签值。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    sw_switch1.tag = 101;
    sw_switch2.tag = 102;
    sw_switch3.tag = 103;
    sw_switch4.tag = 104;
    sw_switch5.tag = 105;
    sw_switch6.tag = 106;
    self.sw_switch1.on = NO;
    self.sw_switch2.on = NO;
    self.sw_switch3.on = NO;
    self.sw_switch4.on = NO;
    self.sw_switch5.on = NO;
    self.sw_switch6.on = NO;

    lbl_desc.hidden = YES;
    txt_desc.hidden = YES;

} 
```

**编辑：**使用这样的标签值`if((theSwitch.tag == 105) && self.sw_switch5.on)`。现在你可以试试下面的优化代码

```
-(IBAction)switchChange:(id)sender
{
    UISwitch *theSwitch = (UISwitch *) sender;
    BOOL switchState = theSwitch.on; //this method is called when changed to on or off.

    self.sw_switch1.on = NO;  // force all switches off
    self.sw_switch2.on = NO;
    self.sw_switch3.on = NO;
    self.sw_switch4.on = NO;
    self.sw_switch5.on = NO;
    self.sw_switch6.on = NO;

    lbl_desc.hidden = YES;// force the label and textfield should be hidden
    txt_desc.hidden = YES;

    theSwitch.on = switchState; // recover the state set by the user, so at a time only one switch should be on

    //now hide or unhide the labels depending on the state of switch 5 only

    if((theSwitch.tag == 105) && self.sw_switch5.on){
    lbl_desc.hidden = NO;
    txt_desc.hidden = NO;
    }
    else{
        lbl_desc.hidden = YES;
        txt_desc.hidden = YES;
    }

    [self.view setNeedsDisplay];

} 
```

# algorithm - AVL 树删除

> ID：15484287
> 
> 赞同：1
> 
> 时间：2013-03-18T18:35:23.827
> 
> 标签：algorithm, data-structures, binary-search-tree, avl-tree

查找示例 AVL 树，以便从树中删除单个（特定）值会导致从两个不同节点开始发生重新平衡。

我有这个作为我的作业问题。我知道 AVL 树是什么，但我不明白上面的问题。有人可以发光吗？

在两个不同节点处重新平衡是否意味着需要两次旋转来修复树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:12:36.187

AVL 重新平衡操作是特定节点需要应用单轮或双轮旋转以纠正树中的不平衡的时候。我认为问题是要求您找到在 AVL 树中进行单轮或双轮旋转本地修复平衡的情况，但随后需要在树中更高的节点处执行重新平衡操作。

希望这可以帮助！

# jquery - 如何优化 Jquery 代码以显示多个文件上传？

> ID：15484291
> 
> 赞同：0
> 
> 时间：2013-03-18T18:35:32.107
> 
> 标签：jquery, forms, file-upload, hide

我正在构建一个文件上传部分视图，以便在几个不同的页面之间共享。我们现在最多有 5 个文件，但我希望每个最大值都由使用它的页面通过 ViewBag 或类似的东西来设置。我目前有五种不同的功能来清除和隐藏输入，因为单击“删除”按钮，并且当删除按顺序单击时，“添加另一个文件”链接的行为不像我希望的那样。它读取一个输入，但是在“最高”删除的输入所在的位置并且在再次达到限制时不会清除，直到用户尝试添加第六个输入。这是我的代码，任何消除这些烦恼的建议将不胜感激。

```
<script>
$(document).ready(function () {
    $('.upload2').hide();
    $('.upload3').hide();
    $('.upload4').hide();
    $('.upload5').hide();

    $('.showNext').click(function () {
        if (!$('.upload2').is(':visible')){
            $('.upload2').show();
        }
        else if (!$('.upload3').is(':visible')) {
            $('.upload3').show();
        }
        else if (!$('.upload4').is(':visible')) {
            $('.upload4').show();
        }
        else if (!$('.upload5').is(':visible')) {
            $('.upload5').show();
            $('.showNext').hide();
        }
        else {
            $('.showNext').hide();
        }

    });
});

function upload2Clear() {
    $('.upload2').hide('slow');
    $('.FileUpload2').val('');
    $('.DescriptionUpload2').val('');
    $('.showNext').show();
}

function upload3Clear() {
    $('.upload3').hide('slow');
    $('.FileUpload3').val('');
    $('.DescriptionUpload3').val('');
    $('.showNext').show();
}

function upload4Clear() {
    $('.upload4').hide('slow');
    $('.FileUpload4').val('');
    $('.DescriptionUpload4').val('');
    $('.showNext').show();
}

function upload5Clear() {
    $('.upload5').hide('slow');
    $('.FileUpload5').val('');
    $('.DescriptionUpload5').val('');
    $('.showNext').show();
} 
```

```
<h4>Upload a File</h4>

<div class="showNext" style="position:absolute; left:33%;"><a href="javascript:void(0)">Add Another File</a></div><br />
<div style="position:absolute; left:33%;"><input type="submit" value="Upload" /></div>

<div class="upload1"><input type="file" name="FileUpload1" /><br />
    <label>Description:<br /><input type="text" name="DescriptionUpload1" size="50" maxlength="200" /></label>
</div>
<div class="upload2"><input type="file" name="FileUpload2" class="FileUpload2" />&nbsp;
    <img src="~/Images/remove.png" style="cursor: pointer;" onclick="upload2Clear();"/><br />
    <label>Description:<br /><input type="text" name="DescriptionUpload2" class="DescriptionUpload2" size="50" maxlength="200" /></label>
</div>
<div class="upload3"><input type="file" name="FileUpload3" class="FileUpload3" />&nbsp;
    <img src="~/Images/remove.png" style="cursor: pointer;" onclick="upload3Clear();"/><br />
    <label>Description:<br /><input type="text" name="DescriptionUpload3" class="DescriptionUpload3" size="50" maxlength="200" /></label>
</div>
<div class="upload4"><input type="file" name="FileUpload4" class="FileUpload4" />&nbsp;
    <img src="~/Images/remove.png" style="cursor: pointer;" onclick="upload4Clear();"/><br />
    <label>Description:<br /><input type="text" name="DescriptionUpload4" size="50" maxlength="200" /></label>
</div>
<div class="upload5"><input type="file" name="FileUpload5" class="FileUpload5" />&nbsp;
    <img src="~/Images/remove.png" style="cursor: pointer;" onclick="upload5Clear();"/><br />
    <label>Description:<br /><input type="text" name="DescriptionUpload5" class="DescriptionUpload5" size="50" maxlength="200" /></label>
</div> 
```

# javascript - 如何异步加载多个javascript？

> ID：15484294
> 
> 赞同：3
> 
> 时间：2013-03-18T18:35:40.927
> 
> 标签：javascript

我有大约 5 到 6 个 JavaScript，我将它们放在页面底部，但是我想将所有这些 JavaScript 加载到一个函数中，以便所有这些 JavaScript 异步下载到页面上。谁能建议我该怎么做？一些语法肯定会有所帮助

`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:38:15.587

在较新的浏览器上，您可以使用 async 属性：

```
<scritp src="yourscript.js" type="text/javascript" async=true ></script> 
```

或者为了获得更广泛的支持，您可以将脚本附加到文档中已处理的标签：

编辑：

```
function loadScript (scriptpath){
    var s=document.getElementsByTagName('script')[0];
    var ss=document.createElement('script');
    ss.type='text/javascript';
    ss.async=true;
    ss.src= scriptpath;
    s.parentNode.insertBefore(ss,s);
} 
```

你可以像这样加载它们：

```
loadScript('script1.js');
loadScript('script2.js');
loadScript('script3.js');
loadScript('script4.js'); 
```

# wpf - WPF 将控件绑定到 DataView

> ID：15484296
> 
> 赞同：1
> 
> 时间：2013-03-18T18:35:52.160
> 
> 标签：wpf, binding

我在尝试将控件绑定到数据源时遇到了很多麻烦。我尝试绑定到 XML 文档。这行得通，但是当我尝试刷新 XML 文档本身并让它更新 UI 时出现了很多问题。

我最新的尝试是将我的控件绑定到一个 DataView，这看起来很简单。我在 StackOverflow 上找到了一个示例应用程序，它执行以下操作：

```
 public MainWindow()
    {

        InitializeComponent();

        DataTable dataTable = GetTable();
        Binding dataTableBinding = new Binding();
        dataTableBinding.Source = dataTable;
        dataTableBinding.Path = new PropertyPath("Rows[0][MyTextColumn]");
        txtMyTextColumnDataTable.SetBinding(TextBox.TextProperty, dataTableBinding);

        DataView dataView = dataTable.DefaultView;
        Binding dataViewBinding = new Binding();
        dataViewBinding.Source = dataView;
        dataViewBinding.Path = new PropertyPath("[0][MyTextColumn]");
        txtMyTextColumnDataView.SetBinding(TextBox.TextProperty, dataViewBinding);
    } 
```

这非常有效，开箱即用。我添加了一个按钮，其代码会更新数据表中的值，当我单击该按钮时，文本框会立即反映新值。

我在我的 VB.Net 项目中尝试了这个，如下所示：

```
 dim plcData As DataTable = GetTable()
    dim plcView As DataView = plcData.DefaultView
    dim plcBinding As Binding = New Binding
    plcBinding.Source = plcView
    plcBinding.Path = New PropertyPath("(0)(conveyor_plc_data_Main_FeedCarousel_caroAngle)")
    Me.tb.SetBinding(TextBlock.TextProperty, plcBinding) 
```

它不起作用。它不会更新我的 UI 控件。在这两种情况下，GetTable 都会使用示例数据构建一个 1 行 DataTable。在我的 VB 项目中，tb 是 MainWindow 上的一个 TextBlock。

在 VB 项目中，我可以中断我的代码并在即时窗口中查询特定的数据列，并且正确的值在那里。它只是不会更新到我的控制范围内。

这似乎是一件非常简单的事情。我对 WPF 很陌生，看不出我的代码有什么问题。最终我想在我的 XAML 中定义绑定，但不知道如何做到这一点。此时，绑定的代码隐藏设置就可以了。我将有许多控件绑定到许多数据列。

谁能告诉我我在这里遗漏了什么明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:27:38.143

根据[文档](http://msdn.microsoft.com/en-GB/library/ms742451.aspx)，`PropertyPath`该类的语法仅接受 C# 样式的索引器。

> 立即对象上的单个索引器作为数据上下文：
> 
> ```
> <Binding Path="[key]" .../> 
> ```

该类无法根据调用语言更改其语法。

* * *

**编辑**
要在代码隐藏中创建时在 XAML 中设置绑定`DataView`，请将视图公开为属性：

```
public static readonly DependencyProperty plcViewProperty 
   = DependencyProperty.Register("plcView", typeof(System.Data.DataView), 
   typeof(MainWindow), new PropertyMetadata(null));

public System.Data.DataView plcView
{
   get { return (System.Data.DataView)GetValue(plcViewProperty); }
   set { SetValue(plcViewProperty, value); }
}

private void MainWindow_Initialized(object sender, EventArgs eventArgs)
{
   plcView = GetTable().DefaultView;
} 
```

然后在您的 XAML 中：

```
<Window x:Name="TheWindow" ...>
   ...
   Text="{Binding ElementName=TheWindow,
      Path=plcView[0][conveyor_plc_data_Main_FeedCarousel_caroAngle]}" 
```

# c# - 使用 C# 的 SQL 中的表

> ID：15484301
> 
> 赞同：1
> 
> 时间：2013-03-18T18:36:01.997
> 
> 标签：c#, .net, sql

当您有子表和父表时，我知道如果我将使用级联选项，当我从父表中删除某些行时，它将删除相应的子行。

但是，当您首先从子表中删除某些行时，这也会起作用吗？是否将删除父表中的相应行？有可能吗？

编辑：我有一个游戏数据库，其中包括：

1.  playerTbl (PK = PlayerID)
2.  GamesTbl (PK = GameID)
3.  GameMovesTbl (PK = MoveID,FK = GameID)

现在当用户开始游戏时，他必须注册到游戏中（他可以只是他自己或玩游戏的组的一部分）

现在我想做的是当某个游戏中只有一个玩家时：当用户想从数据库中删除这个玩家时，它会从玩家Tbl中删除记录，适当的游戏和游戏移动..

编辑：现在，playersTbl 和 gamesTbl 彼此陌生。所以我看到的最好的解决方案是创建一个连接这些表的新表。现在我的数据库看起来像：

1.  PlayersTbl (PK = PlayerID)
2.  JoinTbl (FK = PlayerID, GameID)
3.  GamesTbl (PK = GameID)
4.  GameMovesTbl (PK = MoveID,FK = GameID)

因此，如果我使用 cascade 选项，则意味着：

1.  PlayersTbl 是 JoinTbl 的父表
2.  JoinTbl 是 GamesTbl 的父表
3.  GamesTbl 是 GameMovesTbl 的父表

但是，每当用户删除某个播放器时，它只会从 PlayersTbl 和 JoinTbl 中删除。所以我的问题是这些表之间的最佳关系是什么，以便删除选项可以正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:39:13.507

不，级联删除不会在删除子级时删除父级......也不应该。

举个例子，一张`Customer`桌子（父）和一张`Order`桌子（子）。仅仅因为`Order`删除了一行，并不意味着`Customer`拥有 的行也`Order`应该被删除。`Customer`可能有几十个其他`Orders`...

如果您希望删除从父级到子级以及从子级到父级，这似乎表明您的表之间存在一对一的关系......此时您应该问自己它们是否真的应该是两个表或合二为一。

编辑：

@Elior在您的场景中，`Player`应该是的父级`Game`，并且`Game`应该是的父级`GameMoves`。如果要删除`Player`，删除行，并启用级联删除，`Game`与 关联的`Player`行将被删除，然后将向下级联以删除`GameMoves`与已删除的关联的行`Game`。

所有的级联都是从父级到子级...您不需要根据被删除的子级来删除任何父级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:51:25.970

我认为你最好的选择是在应用程序中处理这个要求，而不是使用 SQL 触发器来处理引用完整性。如果您的应用程序使用存储过程，则可以将该逻辑放在那里。参照完整性旨在防止*孤儿*记录，而不是确保所有父母*都有*孩子记录。

*从技术上讲*，您可以创建一个触发器，如果​​所有子级都被删除，则删除父级，但如果您想要一个没有子级的父级，触发器将阻止您这样做。

最好让该规则在堆栈中更高 - 无论是在应用程序中还是在存储过程中（如果您正在使用它们）。

# xml - 在 Lift 中停止渲染的自闭合模板元素

> ID：15484302
> 
> 赞同：0
> 
> 时间：2013-03-18T18:36:02.767
> 
> 标签：xml, scala, templates, lift

我`bind()`用字符串值替换模板中的 XML 元素，如下所示：

```
bind("foo", nodes, "bar" -> "My Content") 
```

当我在模板中使用自闭合元素时，如下所示：

```
What I want to see is <foo:bar />, and everything after it. 
```

我*偶尔会*得到这个：

```
What I want to see is My Content 
```

而*不是*这个：

```
What I want to see is My Content, and everything after it. 
```

但是当我将模板更改为使用非自动关闭的空元素时：

```
What I want to see is <foo:bar></foo:bar, and everything after it. 
```

我*总是*会得到完全渲染的内容。

我还没有弄清楚是什么触发了自闭合标签的错误行为。

这仅仅是一个电梯错误，还是有某种原因导致这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:44:05.490

问题在于 Lift 使用的 HTML 解析器。对于大多数标签，它不会识别自我关闭，并会假定它之后的内容是标签内的内容（因此它被剥离）。如果您尝试将`<div />`或类似的标签与 CSS 选择器结合使用，也会存在同样的问题。我不确定这本身是一个错误，因为这[似乎是 HTML5 中的预期行为](https://stackoverflow.com/questions/3558119/are-self-closing-tags-valid-in-html5)（至少根据接受的答案的最后一个要点）。

# php - 如何从 php 向 facebook 用户发送一些消息/请求

> ID：15484305
> 
> 赞同：0
> 
> 时间：2013-03-18T18:36:25.210
> 
> 标签：php, facebook

我有多个 facebook user_ids，由用户（他的朋友 user_id）发送，我必须向所有人发送消息/应用程序请求。我怎样才能做到这一点 ？

是否有任何教程或解决方案..请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:34:42.807

facebook 开发人员有示例脚本（也适用于 php）。例如，您尝试过[吗？](https://developers.facebook.com/blog/post/464/)一个pp在php中生成的示例请求如下

```
<?php 

  $app_id = YOUR_APP_ID;
  $app_secret = YOUR_APP_SECRET;

  $token_url = "https://graph.facebook.com/oauth/access_token?" .
    "client_id=" . $app_id .
    "&client_secret=" . $app_secret .
    "&grant_type=client_credentials";

  $app_access_token = file_get_contents($token_url);

  $user_id = THE_CURRENT_USER_ID;

  $apprequest_url ="https://graph.facebook.com/" .
    $user_id .
    "/apprequests?message=’INSERT_UT8_STRING_MSG’" . 
    "&data=’INSERT_STRING_DATA’&amp;"  .   
    $app_access_token . “&amp;method=post”;

  $result = file_get_contents($apprequest_url);
  echo(“Request id number: ”, $result);
?> 
```

# c# - jquery添加div，类不起作用

> ID：15484307
> 
> 赞同：1
> 
> 时间：2013-03-18T18:36:26.443
> 
> 标签：c#, android

如果里面没有内容，`div.deletePhone`那么你需要指定高度，否则它将是`0px`.

```
#div1 ul li .deletePhone{
background-image:  url(http://localhost/TheEatTel/public/images/close.png);
background-repeat: no-repeat;
height:100px; /*some height value*/
} 
```

那或`var phone`放入`div.deletePhone`：

```
$("#div1 ul").append("<li><div class='deletePhone'>"+phone+"</div></li>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:45:13.647

如果里面没有内容，`div.deletePhone`那么你需要指定高度，否则它将是`0px`.

```
#div1 ul li .deletePhone{
background-image:  url(http://localhost/TheEatTel/public/images/close.png);
background-repeat: no-repeat;
height:100px; /*some height value*/
} 
```

那或`var phone`放入`div.deletePhone`：

```
$("#div1 ul").append("<li><div class='deletePhone'>"+phone+"</div></li>"); 
```

# java - 为什么Maven在测试结束时卡住了？

> ID：15484308
> 
> 赞同：2
> 
> 时间：2013-03-18T18:36:26.710
> 
> 标签：java, maven

我有一个问题，maven 在测试结束时被卡住了。

```
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.235 sec
Results :
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0 
```

但是`BUILD SUCCESSFUL`消息没有出现。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:36:26.710

我发现我们正在使用

```
Process proc = new ProcessBuilder("cmd", "/C", "start", "/B", "notepad").start(); 
```

启动外部应用程序。该应用程序与 java 进程相关联。在外部应用程序也终止之前，java 进程不会终止。即使有所有这些 cmd/start 魔法，Windows 和 Java 也不会分离进程。在阅读了大量的博客和网站后，他们都提出了同样的建议。刷新输出缓冲区，并读入所有 STD ERR 和 STD OUT 流。不过，这并没有奏效。Java 仍然说：“还有一个应用程序在运行！”

答案是确保 java 不知道应用程序正在运行。我这样做了，通过使用

```
Process proc = new ProcessBuilder("rundll32", "SHELL32.DLL,ShellExec_RunDLL", "notepad").start(); 
```

在此方法中，java 调用 rundll32 并使用 SHELL32 DLL 函数 ShellExec_RunDLL 来启动应用程序。Java 没有检测到这个新的“记事本”进程，并且*RunDLL32*几乎立即退出。我还遵循了所有正确的方法来刷新输出并获取*rundll32*的 STD OUT 和 STD ERR 。

后台应用程序记事本能够正常运行，并且 maven 按预期完成。

```
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.935 sec

Results :

Tests run: 2, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 7 seconds
[INFO] Finished at: Mon Mar 18 11:28:54 PDT 2013
[INFO] Final Memory: 27M/72M
[INFO] ------------------------------------------------------------------------ 
```

# ios - Phonegap：无法打开 iOS 6 原生地图应用程序

> ID：15484316
> 
> 赞同：2
> 
> 时间：2013-03-18T18:36:42.667
> 
> 标签：ios, cordova, map

我在 iOS 上使用 Phonegap 2.3 构建 phonegap build (build.phonegap.com) 的应用程序存在问题。我正在尝试使用此链接打开本机地图应用程序：

`<a id="gmap_image" href=""> </a>`

设置 href 属性的 js 代码：

`$("#gmap_image").href('http://maps.apple.com/?q='+$xml.find( "adresse" ).text());`

我已经看到，要使用链接打开本机地图应用程序，我必须提供一个基于 maps.apple.com 域（[Apple Map Links](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)）的 url。

但是当我单击链接时，所发生的只是页面刷新（我不知道为什么它也会刷新，因为没有代码要求这样做）。

有人有想法吗？

问候，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-28T13:25:33.723

也许为时已晚，但我有同样的问题。

试试这个方法：

```
$("#gmap_image").href('maps:q='+$xml.find( "adresse" ).text()); 
```

换成`http://maps.apple.com/?q=`对`maps:q=` 我有用的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-23T14:01:11.063

您可以使用 URL Scheme 中的此标头在 iOS 设备上启动 google Maps 应用程序。comgooglemaps:// 这是根据此处找到的开发人员文档。[https://developers.google.com/maps/documentation/ios/urlscheme](https://developers.google.com/maps/documentation/ios/urlscheme)

例如，在 iOS6 中打开 Google 地图应用程序并获取从纽约到华盛顿特区的路线的 Web 链接将如下所示。

```
 <a href="comgooglemaps://?saddr=New+York,+NY&daddr=Washington+DC&directionsmode=driving">Directions from New York, NY to Washington DC</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:46:07.867

试试这个

```
$('#map').bind('tap', function(){
    var url = 'http://maps.google.com/maps?';
    url += 'q=[place_name]'; //add ur querystrings

    // open the native maps app by calling window location
    window.location = url;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T01:30:18.360

不幸的是，这在 iOS 6 上是不行的，因为谷歌地图不再是操作系统的“原生”部分。

尽管您仍然可以启动 Apple 地图，因为这是本机支持的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-20T09:19:56.313

如果您使用的是最新的 PhoneGap/Cordova 版本之一，似乎不再可以从标准的“a href=xxx”标签打开 safari 或地图。

为了打开地图，您需要附加一个点击事件并使用以下命令打开链接：

```
 window.open('http://maps.apple.com/?q=whavever', '_system'); 
```

在 Phonegap 中，window.open() 将打开一个带有新应用程序浏览器的链接，但是，如果您将 '_system' 指定为第二个参数，它会将 URL 发送到操作系统（因此，在这种情况下打开地图应用程序）。

# javascript - 使用 Knockout.js 绑定在表单上显示错误

> ID：15484318
> 
> 赞同：3
> 
> 时间：2013-03-18T18:36:48.070
> 
> 标签：javascript, knockout.js

我想使用[Knockout.js](http://knockoutjs.com)突出显示表单上的错误。其中一些错误可能是通过客户端验证生成的，其中一些可能来自保存表单时的服务器。理想情况下，我希望模板看起来像这样：

```
<label data-bind="css: { error: Errors.ProjectName }">Project Name<input data-bind="value: ProjectName" /></label> 
```

如果`Errors.ProjectName`是真的，那么上面`<label>`的 CSS 类将是`error`.

但是，要做到这一点，我认为我必须做`Errors`一些类似的事情：

```
this.Errors = {
   ProjectName: ko.observable(false),
   FieldA: ko.observable(false),
   FieldB: ko.observable(false),
   // ... Every single field
}; 
```

这是维护的噩梦，因为这种形式有很多*很多*领域。所以，与其那样做，我希望模型以某种方式包含错误字段列表。更像：

```
this.Errors = ko.observableArray( [] ); 
```

当我的代码发现错误时，我可以简单地将该数组设置为包含错误的字段列表：

```
model.Errors( ['ProjectName'] ); // ProjectName is invalid 
```

然后模板将变为：

```
<label data-bind="css: { error: Errors.indexOf('ProjectName') >= 0  }">Project Name<input data-bind="value: ProjectName" /></label> 
```

这行得通，但是对我来说必须检查模板中的可观察数组索引似乎相当混乱。我试图掌握 Knockout 的部分需要一种更清晰、更易于阅读的方法。

有些人可能会争辩说，Knockout.js 不是用于显示错误消息和验证 UI 的正确工具。这可能是一个有效的意见。但是，我喜欢使用单个模型来存储错误的想法，并且随着从该模型中添加或删除错误，UI 上的错误消息和突出显示的字段会自动反映这些更改，并且可以轻松地查询数据的状态随时。

**问题：**在模型包含错误字段列表的情况下，实现错误突出显示的最简洁方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:30:02.580

我的偏好是在可观察对象上使用类似可观察对象`isValid`或`hasError`子可观察对象来跟踪其状态。因此，您的视图模型将如下所示：

```
this.ProjectName = ko.observable();
this.ProjectName.hasError = ko.observable();  //or can be a computed, if it will handle keeping itself updated 
```

然后，您可以像这样绑定：

```
<label data-bind="css: { error: ProjectName.hasError  }">Project Name<input data-bind="value: ProjectName" /></label> 
```

“sub-observables”的另一个好处是，当您将数据转换回 JSON 以发送到服务器时，它们会丢失。

我们在 KO 文档中有一个使用扩展器添加子可观察对象的示例：http: [//knockoutjs.com/documentation/extenders.html#live_example_2_adding_validation_to_an_observable](http://knockoutjs.com/documentation/extenders.html#live_example_2_adding_validation_to_an_observable)

此外，您可能想查看[Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)，因为它使用了类似的方法。

# sql - IIF 语句帮助 - SUM OF 值大于或等于

> ID：15484321
> 
> 赞同：-1
> 
> 时间：2013-03-18T18:37:02.687
> 
> 标签：sql, iif

我被困住了，需要建议。这可能很简单，但是，我是这里的初学者，并试图尽快学习，所以请多多包涵。我有一个包含“A”/“P”格式的考勤数据的表格。我试图在报告中显示一个班级中有多少人在某个日期范围内错过了三次或更多次。在大多数情况下，我让 SQL 语句完成所有工作，但有一个例外。我可以显示某人错过了多少次的总和，但我无法弄清楚如何仅显示缺勤超过 3 次的学生。我在我希望数据返回的列的表达式中输入以下内容：

`=SUM(IIF(Fields!Attendance.Value ="A",1,NOTHING))`

如果我这样写表达式：

`=SUM(IIF(Fields!Attendance.Value ="A",1,NOTHING))>=3`

我得到 TRUE/FALSE 回报。如果我能弄清楚如何只显示 TRUE 返回，那就没问题了。

任何建议表示赞赏！

我的整个 SQL 语句 - 还有另外两个数据集被调用以将数据拉入这个数据集。

```
SELECT     smgp_group.group_id
    , smgp_group.group_name
    , core_v_person_basic.last_name + ', ' + core_v_person_basic.nick_name as Name
    , core_v_person_basic.birth_date AS Birthdate
    , '*' + CONVERT(varchar, core_v_person_basic.person_id) + '*' AS person_id
    , core_v_person_basic.street_address_1
    , core_v_person_basic.city + ',' + core_v_person_basic.state + ' ' + core_v_person_basic.postal_code AS Citystatezip
    , core_v_person_basic.home_phone
    , core_v_person_basic.email
    , core_lookup.lookup_value AS [Group Role]
    , CATD.occurrence_end_time
    , CATD.Attendance as attendance
    , MAX(CATD.DateLastAttended) AS Datelastattended
    , CATD.occurrence_end_time AS [Start Date]
    , CATD.occurrence_end_time AS [End Date]
    , '*$' + CONVERT(varchar, CATD.occurrence_id) + '*' AS 'occurrence_id'
    , core_v_person_basic.cell_phone
FROM smgp_group 
    INNER JOIN cust_v_attendanceroll AS CATD 
    INNER JOIN core_lookup ON CATD.role_luid = core_lookup.lookup_id 
    INNER JOIN core_v_person_basic ON CATD.person_id = core_v_person_basic.person_id ON smgp_group.group_id = CATD.group_id
where CATD.occurrence_end_time between @startdate AND @enddate and smgp_group.group_id IN (@group)
GROUP BY smgp_group.group_id, smgp_group.group_name, core_v_person_basic.last_name,core_v_person_basic.nick_name, core_v_person_basic.birth_date, core_v_person_basic.street_address_1, 
                      core_v_person_basic.city + ',' + core_v_person_basic.state + ' ' + core_v_person_basic.postal_code, core_v_person_basic.home_phone, 
                      core_v_person_basic.email, core_lookup.lookup_value, CATD.occurrence_end_time, CATD.Attendance, CATD.occurrence_id, core_v_person_basic.person_id, 
                      core_v_person_basic.cell_phone
HAVING attendance = 'A' 
ORDER BY attendance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:12:03.137

想试试这个吗？

**SideTrack**：您可能需要检查：两者`[Start Date]`和`[End Date]`都设置为`CATD.occurrence_end_time`

```
SELECT      *
FROM        (
        SELECT      smgp_group.group_id
                , smgp_group.group_name
                , core_v_person_basic.last_name + ', ' + core_v_person_basic.nick_name as Name
                , core_v_person_basic.birth_date AS Birthdate
                , '*' + CONVERT(varchar, core_v_person_basic.person_id) + '*' AS person_id
                , core_v_person_basic.street_address_1
                , core_v_person_basic.city + ',' + core_v_person_basic.state + ' ' + core_v_person_basic.postal_code AS Citystatezip
                , core_v_person_basic.home_phone
                , core_v_person_basic.email
                , core_lookup.lookup_value AS [Group Role]
                , CATD.occurrence_end_time
                , MAX(CATD.DateLastAttended) AS Datelastattended
                , CATD.occurrence_end_time AS [Start Date]
                , CATD.occurrence_end_time AS [End Date]
                , '*$' + CONVERT(varchar, CATD.occurrence_id) + '*' AS 'occurrence_id'
                , core_v_person_basic.cell_phone

                , COUNT(*) AS absentCount

        FROM        smgp_group 
                INNER JOIN cust_v_attendanceroll AS CATD 
                INNER JOIN core_lookup ON CATD.role_luid = core_lookup.lookup_id 
                INNER JOIN core_v_person_basic ON CATD.person_id = core_v_person_basic.person_id ON smgp_group.group_id = CATD.group_id
        WHERE       CATD.occurrence_end_time BETWEEN @startdate AND @enddate
                AND smgp_group.group_id IN (@group)
                AND CATD.Attendance = 'A'
        GROUP BY    smgp_group.group_id, smgp_group.group_name, core_v_person_basic.last_name,core_v_person_basic.nick_name, core_v_person_basic.birth_date, core_v_person_basic.street_address_1, 
                core_v_person_basic.city + ',' + core_v_person_basic.state + ' ' + core_v_person_basic.postal_code, core_v_person_basic.home_phone, 
                core_v_person_basic.email, core_lookup.lookup_value, CATD.occurrence_end_time, CATD.occurrence_id, core_v_person_basic.person_id, 
                core_v_person_basic.cell_phone
        ) AS tblSource
WHERE       absentCount>=3 
```

# postgresql - 提高 PostgreSQL 中私有 IP 地址的正则表达式匹配的性能

> ID：15484322
> 
> 赞同：0
> 
> 时间：2013-03-18T18:37:18.193
> 
> 标签：postgresql, ip, postgresql-8.3

我正在使用 PostgreSQL 的 MPP 版本，它从 8.3 分叉出来。

我正在尝试使用 where 子句优化选择语句，以仅选择具有私有源 IP 地址和公共目标 IP 地址的行。我有两列 inet 类型，称为 source_ip 和 destination_ip。我觉得以下操作不是最有效的做事方式，因为我正在做一个正则表达式匹配来确定一个 IP 是公共的还是私有的：

```
where  (text(source_ip) like '10.%'  
    or text(source_ip) like '192.168.%'
    or text(source_ip) ~ E'^172\.((1[6-9])|(2[0-9])|(3[0-1]))\..+')
    and text(destination_ip) not like '10.%'  
    and text(destination_ip) not like '192.168.%'
    and text(destination_ip) !~ E'^172\.((1[6-9])|(2[0-9])|(3[0-1]))\..+'; 
```

如何使上述 where 子句更有效？有没有办法不使用正则表达式并使用内置的 postgresql 函数以更快的方式对 inet 类型进行操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:57:42.497

```
where
    (
        inet '10/8' >> source_ip
        or inet '192.168/16' >> source_ip
        or sourceip >= inet '172.16/16' and sourceip < inet '172.32/16'
    )
    and not inet '10/8' >> destination_ip
    and not inet '192.168/16' >> destination_ip
    and not (destination_ip >= inet '172.16/16' and destination_ip < inet '172.32/16') 
```

# c - 将值存储为 C 中 if 语句中的字符串

> ID：15484327
> 
> 赞同：0
> 
> 时间：2013-03-18T18:37:31.643
> 
> 标签：c, string, if-statement

我有一些代码，其中包含评估某些不等式的 if、else if 和 else 语句。
我的问题是：如何将语句的结果（在本例中为单原子、双原子、多原子）分配给字符串变量，以便稍后我可以使用此变量注释图形

```
/* Determine the type of gas - theoretical gamma for: 
     - monoatomic = 1.66 
     - diatomic = 1.4
     - polyatomic = 1.33 */

if (gamma <=1.36)
    printf("This gas is POLYATOMIC\n");

else if (gamma > 1.36 && gamma <= 1.5)
    printf("This gas is DIATOMIC\n");

else
    printf("This gas is MONOATOMIC\n"); 
```

如您所见，目前我只能打印出结果。但这并不能让我以后使用结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:40:35.630

使用变量来存储此信息：

```
#define POLYATOMIC 3 
#define DIATOMIC 2 
#define MONOATOMIC 1 
#define INVALID 0 

int atomicity = INVALID;
const char* gasTypeName = "ERROR";

if (gamma <=1.36)
{
    atomicity = POLYATOMIC;
    gasTypeName = "Polyatomic";
}
else if (gamma > 1.36 && gamma <= 1.5)
{
    atomicity = DIATOMIC;
    gasTypeName = "Diatomic";
}
else
{
    atomicity = MONOATOMIC;
    gasTypeName = "Monoatomic";
}

printf("The gas is %s", gasTypeName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:20:04.267

您可以将枚举用于 gastypes，将描述字符串数组用于可打印表示。将结果状态存储为整数/枚举的优点是可以很容易地进行比较，例如，在 a 中使用`switch`。相比之下，比较字符串有点麻烦。

[这是使用X-Macros](https://stackoverflow.com/q/6635851/1025391)的示例实现：

```
#include <stdio.h>

#define GASTYPES \
    ENTRY(MONOATOMIC) \
    ENTRY(DIATOMIC) \
    ENTRY(POLYATOMIC)

typedef enum {
#define ENTRY(x) x,
    GASTYPES
#undef ENTRY
} gastype_t;

const char const * gastype_str[] = {
#define ENTRY(x) #x,
    GASTYPES
#undef ENTRY
};

int main() {
    double gamma; 
    gastype_t gastype;
    if(scanf("%lf", &gamma)) {
        if (gamma <= 1.36)
            gastype = POLYATOMIC;
        else if (gamma <= 1.5)
            gastype = DIATOMIC;
        else
            gastype = MONOATOMIC;
        printf("This gas is %s\n", gastype_str[gastype]);
        return 0;
    }
    else {
        printf("Failed to parse input :(\n");
        return -1;
    }
} 
```

因此，在实际编译之前，预处理器将枚举和描述字符串数组的定义扩展为以下内容：

```
typedef enum {
    MONOATOMIC,
    DIATOMIC,
    POLYATOMIC,
} gastype_t;

const char const * gastype_str[] = {
    "MONOATOMIC",
    "DIATOMIC",
    "POLYATOMIC",
}; 
```

使用示例：

```
$ gcc test.c && echo "1.4" | ./a.out
This gas is DIATOMIC 
```

# iphone - 删除 SQLITE 行 UITABLEVIEW

> ID：15484329
> 
> 赞同：0
> 
> 时间：2013-03-18T18:37:34.033
> 
> 标签：iphone, ios, objective-c, sqlite

你能发现任何会导致它不起作用的东西吗？

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

if (editingStyle == UITableViewCellEditingStyleDelete) {
    int record_to_delete = [[[data objectAtIndex:indexPath.row] recordID] integerValue];
    [data removeObjectAtIndex:indexPath.row];
    [self.tableView deleteRowsAtIndexPaths:[NSMutableArray arrayWithObject:indexPath] withRowAnimation:YES];
    //Delete from TABLENAME where CRITERIA1=VALUE1 (AND CRITERIA2=VALUE2...)
    //Delete from Data where RecordID=xxx

    sqlite3 *database;
    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
        NSString *sqlStatement = [NSString stringWithFormat:@"delete from Data where RecordID = %d",record_to_delete];
        NSLog(@"Statement is: %@", sqlStatement);
        sqlite3_stmt *compiledStatement;
        NSLog(@"Statement");
        if(sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, &compiledStatement, NULL) == SQLITE_OK){
        }
        NSLog(@"Deleting");
        sqlite3_finalize(compiledStatement);
        NSLog(@"Deleted");
    }
    sqlite3_close(database);

}
} 
```

SQL 语句在我的数据库软件中执行时工作正常。但是，当在 iPhone 模拟器上运行时，它不会从数据库中删除它。任何帮助将不胜感激。对不起，我不能更具体。

谢谢

```
2013-03-18 18:45:07.211 Navigation[842:c07] Statement is: delete from Data where RecordID = 1
2013-03-18 18:45:07.212 Navigation[842:c07] Statement
2013-03-18 18:45:07.212 Navigation[842:c07] Deleting
2013-03-18 18:45:07.213 Navigation[842:c07] Deleted 
```

更新：设法让它工作。我只是失踪了。

```
sqlite3_step(compiledStatement) 
```

不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:45:01.763

在 iOS 中，您没有对 app bundle 的写入权限。建议的方法是在第一次运行应用程序时将数据库复制到文档文件夹中，然后从那里管理数据库。

看这里：[无法在 iOS 中连接 SQLite 数据库](https://stackoverflow.com/questions/11664043/unable-to-connect-sqlite-database-in-ios/11674730#11674730)

# java - Tomcat集群的优缺点

> ID：15484333
> 
> 赞同：1
> 
> 时间：2013-03-18T18:37:42.063
> 
> 标签：java, tomcat, tomcat7, cluster-computing, ehcache

目前我们在 4 个不同的 tomcat 实例上部署了相同的 Web 应用程序，每个实例都在独立的机器上运行。负载均衡器将请求分发到这些服务器。我们的 Web 应用程序进行数据库调用，维护缓存（键值对）。所有 tomcat 实例从相同的数据源（另一台服务器）读取相同的数据（XML）并将其提供给客户端。未来，我们计划从请求中收集一些使用数据，处理并存储在数据库中。此功能在所有 tomcat 服务器之间应该是通用的（一个模块）。

现在我们正在考虑使用tomcat集群。我做了一些研究，但我无法弄清楚如何分离数据获取操作，即从所有使其通用的 tomcat Web 应用程序的相同数据源（另一个服务器）部分读取相同的数据（XML）。因此，一旦一台服务器从服务器获取数据，它将对其进行维护（可能在缓存中），并且其他服务器可以使用相同的数据来为客户端提供服务。现在可以使用分布式缓存来实现此功能。但是还有其他模块可以在所有其他 tomcat 实例中通用。

所以基本上，使用Tomcat集群有什么好处吗？如果是，那么我如何实现所有 tomcat 服务器通用的模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:36:06.180

阅读 Tomcat[配置参考](http://tomcat.apache.org/tomcat-7.0-doc/config/cluster.html)和[集群指南](http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html)。可用的聚类功能如下：

> tomcat 集群实现提供会话复制、上下文属性复制和集群范围的 WAR 文件部署。

因此，通过聚类，您将获得：

*   **高可用性**：当一个节点发生故障时，另一个节点将能够接管而不会失去对数据的访问权限。例如，仍然可以在用户没有注意到错误的情况下处理 HTTP 会话。
*   **农场部署**：您可以将您的 .war 部署到单个节点，其余的将自动同步。

成本主要体现在性能上：

*   复制意味着节点之间的对象**序列化。**在某些情况下这可能是不受欢迎的，但也可以[微调](http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html#Overview).

如果您只想在节点之间共享一些状态，那么您根本不需要集群（除非您要使用上下文或会话复制）。只需使用数据库和/或分布式缓存模型，如 ehcache（或其他任何东西）。

# php - 在 mysql 表中查找标记项的出现

> ID：15484334
> 
> 赞同：4
> 
> 时间：2013-03-18T18:37:43.187
> 
> 标签：php, mysql

假设我有这张桌子：

```
item_id tag_id
------- ------
1       1
1       2
2       2
2       3 
```

正如您可能想象的那样，这是一张表，其中我引用了一些属于它们的项目和标签。一个项目可以有多个标签，并且可以为多个项目选择一个标签。

假设我还有一个特定的标签集合（例如 tag_id = 50、73 和 119）和一个带有 id 的“项目”表（由 引用`item_id`）。

是否有一个 *有效*的查询给我：

1.  带有这些标签的项目数
2.  物品本身？

**我试过的**

```
SELECT COUNT(*) FROM
(
SELECT COUNT(*) AS c FROM items_tags it JOIN items i ON i.id = it.item_id
WHERE (tag_id=7 OR tag_id=95 OR tag_id=150) AND `status`='active'
GROUP BY item_id
) t1 WHERE c=3 <-- c= number of tags 
```

我可以同时获得这两个结果，但查询效率非常低（似乎）。经过 EXPLAIN 检查后，我想摆脱 OR 给出的“范围”。

**细化我的问题：**问题是我得到了一个写得很糟糕的 PHP 框架，它通过各种标签 ID 迭代了 900 多次。假设您有一个或多个固定 ID（选定的标签），它遍历所有 900 多个标签，以查找具有给定标签的共同项目的出现次数加上迭代的一个（这是一个细化搜索，仅显示具有所有给定标签加一的元素）。

给定的代码是这样工作的：我选择一个或多个标签，它们的 ID 进入查询字符串。假设我选择了标签 54 和 77。代码必须找到同时具有标签 54 和 77 的项目的每个项目 ID 并一一列出：我们获得“带有选定标签的项目”列表。

然后，它提供了优化搜索的选项，奇怪的部分出现了：PHP 代码循环遍历所有 900 多个标签，并且对于每次迭代，它需要一个标签，并计算有多少项目具有所有标签 54、77和迭代中的那个。如果计数 > 0，它会显示带有计数编号的标签名称，过滤掉其项目与所选标签没有任何链接的每个标签。

以不那么“密集”的方式实现相同的结果会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:42:10.533

*要获取与所有*标签匹配的项目 ID 列表，您可以使用以下查询：

```
SELECT items.id
FROM items
JOIN items_tags ON items.id = items_tags.item_id
WHERE (items_tags.tag_id IN (7,95,150))
  AND (items.status = 'active')
GROUP BY items.id
HAVING COUNT(DISTINCT items_tags.tag_id) = 3 
```

请注意，如果您确定同一项目永远不会有重复的标签，则可以替换`COUNT(DISTINCT items_tags.tag_id)`为`COUNT(*)`效率。

要获取这些项目的计数，请将其包装在 COUNT 查询中：

```
SELECT COUNT(*)
FROM (
  SELECT items.id
  ...
) t 
```

要获取项目列表，请将其包装在此 SELECT 查询中：

```
SELECT *
FROM items
WHERE id IN (
  SELECT items.id ...
) 
```

**更新**

要在与原始列表结合时获取每个剩余标签的项目计数，您可以执行以下操作：

```
SELECT tag_id, COUNT(DISTINCT item_id)
FROM items_tags
WHERE item_id IN (
  SELECT items.id
  ...
)
  AND tag_id NOT IN (7,95,150)
GROUP BY tag_id 
```

# node.js - 使用 NodeJ 提供临时文件

> ID：15484350
> 
> 赞同：12
> 
> 时间：2013-03-18T18:38:43.290
> 
> 标签：node.js, static

我正在构建一个 NodeJs SOAP 客户端。最初，我想象服务器（即节点 SOAP 客户端）将允许通过 REST API 下载文档（REST API 是经过身份验证的）。在谷歌和 SO 上呆了很长时间后，看起来这是不可能的。

这意味着当请求下载文档时，我必须对文档进行 SOAP 调用并通过 AJAX 将 URL 返回给 REST 客户端。

为了做到这一点，我需要：

1.  在 Node 中临时创建一个文件
2.  获取其 URL 并返回 Web 客户端
3.  当请求文件并发送响应时，删除文件（出于安全目的）

以下是我的问题：

1.  是否已经有一个框架可以做到这一点？[temp 模块](https://github.com/bruce/node-temp/blob/master/lib/temp.js)可能是一个选项，但我真的想在每次请求后删除，而不是在一段时间后删除。
2.  如果没有，我可以只使用 NodeJs 文件系统和 Express[静态模块](http://www.senchalabs.org/connect/static.html)吗？基本上我们会将静态模块修改为如下所示：

    ```
    return function static(req, res, next) {
      if ('GET' != req.method && 'HEAD' != req.method) return next();
      var path = parse(req).pathname;
      var pause = utils.pause(req);

    /* My Added Code Here */
    res.on('end', function(){
        //  delete file based on req URL
    })
    /* end additions */

    function resume() {
      next();
      pause.resume();
    }

    function directory() {
      if (!redirect) return resume();
      var pathname = url.parse(req.originalUrl).pathname;
      res.statusCode = 301;
      res.setHeader('Location', pathname + '/');
      res.end('Redirecting to ' + utils.escape(pathname) + '/');
    }
    function error(err) {
       if (404 == err.status) return resume();
      next(err);
    }
    send(req, path)
      .maxage(options.maxAge || 0)
      .root(root)
      .hidden(options.hidden)
      .on('error', error)
      .on('directory', directory)
      .pipe(res);
    }; 
    ```

有效吗`res.on('end',...`？或者，我应该为指向临时文件的 URL 创建一些中间件吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-18T22:38:11.333

找到了两个回答我的问题的 SO 问题。所以显然我们不需要使用 express.static 中间件。我们只需要文件系统来[下载文件](https://stackoverflow.com/questions/7288814/download-a-file-from-nodejs-server)：

```
app.get('/download', function(req, res){
 var file = __dirname + '/upload-folder/dramaticpenguin.MOV';
 res.download(file); // Set disposition and send it.
}); 
```

如果我们想[流式传输然后删除，](https://stackoverflow.com/questions/14962085/createreadstream-pipe-callback?lq=1)请遵循：

```
app.get('/download', function(req, res){
   var stream = fs.createReadStream('<filepath>/example.pdf', {bufferSize: 64 * 1024})
   stream.pipe(res);

   var had_error = false;
   stream.on('error', function(err){
      had_error = true;
   });
   stream.on('close', function(){
   if (!had_error) fs.unlink('<filepath>/example.pdf');
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-02T21:33:23.860

如果您在 2015 年 12 月之后访问此 SO 页面，您可能会发现以前的解决方案不起作用（至少它对我不起作用）。我找到了一个不同的解决方案，所以我想我会在这里为未来的读者提供它。

```
app.get('/download', function(req, res){
    res.download(pathToFile, 'fileNameForEndUser.pdf', function(err) {
        if (!err) {
            fs.unlink(path);
        }
    });
}); 
```

# html - 如何将 SoundCloud 文件添加到 jPlayer？

> ID：15484352
> 
> 赞同：4
> 
> 时间：2013-03-18T18:38:46.397
> 
> 标签：html, soundcloud, jplayer, audio-player

现在我有一个使用 jPlayer 流式传输 mp3 的网站。我还希望能够添加让 SoundCloud 直接在播放器上流式传输的功能。

我知道这是可能的，因为我最喜欢的音乐博客[之一 hillydilly 就是](http://www.hillydilly.com/)这样做的。通过查看他们的代码，我看到他们的 jPlayer 设置有一些额外的参数，即 sc 和 sclink。

```
$(".play-music").each(function(){
        myPlaylist.add({
         title: $(this).attr('data-title'),
         artist: $(this).attr('data-artist'),
         mp3: $(this).attr('data-mp3'),
         url: $(this).attr('data-url'),
         sc: $(this).attr('data-sc'),
         sclink: $(this).attr('data-sclink')         
        });
}); 
```

我尝试查看他们的其余代码，但无法弄清楚他们如何或在何处实现 sc 和 sclink。有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T22:05:51.857

如果您查看他们的播放列表，他们将链接到 Soundcloud 以获得曲目的 mp3 属性：

```
myPlaylist.setPlaylist([

{
        title:"Close Enough ft. Noosa",
    artist:"Ghost Beach",
    mp3:"http://api.soundcloud.com/tracks/79031167/stream?client_id=db10c5086fe237d1718f7a5184f33b51",
    url:"http://hillydilly.com/2012/12/top-20-songs/",
    sc:"true"
    },
    {
        title:"Always",
    artist:"Jahan Lennon",
    mp3:"http://api.soundcloud.com/tracks/80961874/stream?client_id=db10c5086fe237d1718f7a5184f33b51",
    url:"http://hillydilly.com/2012/12/top-20-songs/",
    sc:"true"
    } 
```

HTML5“流”实际上只是 MP3，您目前无法像使用 Flash、Silverlight、Quicktime 等那样保护它们。如果您直接打开其中一个链接（如[http://api.soundcloud.com/tracks/79031167/ stream?client_id=db10c5086fe237d1718f7a5184f33b51](http://api.soundcloud.com/tracks/79031167/stream?client_id=db10c5086fe237d1718f7a5184f33b51)）它将下载 MP3。所以我猜你设置它的方式与它应该工作的方式相同。

如果您打开 Chrome 及其网络检查器（在开发工具中：查看 > 开发人员 > 开发人员工具，然后单击网络）并单击 Hilly 的播放器上的下一步，您可以在后台看到轨道加载。

![在此处输入图像描述](../Images/0d85450ec2d3610cd583c48dd37e3630.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T11:49:26.290

实际上，克里克的回答只是故事的一半。

如果您想流式传输 soundcloud 歌曲，您首先需要在开发者页面[developers.soundcloud.com](http://developers.soundcloud.com)上注册您的网站。

然后用你自己的密钥使用他们超酷**的**API [。](http://developers.soundcloud.com/docs/api/reference#tracks)您可以将 json 加载到 php 中并在那里生成链接，或者使用 jquery $.getJSON 加载信息。

 **当从 soundcloud 流式传输声音时，您还需要确保正确属性。soundcloud 的人非常慷慨地让我们这样使用他们的数据库。

//对不起坏链接（没有学分）

[如何使用外部 JSON...？](https://stackoverflow.com/questions/8344609/how-do-i-use-external-json)

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

[http://developers.soundcloud.com/docs/api/buttons-logos](http://developers.soundcloud.com/docs/api/buttons-logos)**

# javascript - 为显示和隐藏方法扩展 bootstrap-collapse.js

> ID：15484353
> 
> 赞同：0
> 
> 时间：2013-03-18T18:38:46.553
> 
> 标签：javascript, jquery, twitter-bootstrap

我想扩展[bootstrap-collapse.js 插件](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-collapse.js#L49)并在其中添加我自己的显示和隐藏方法。

我想覆盖现在有的东西。

你能帮我做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:21:14.493

您需要在`collapse`原型中重新定义这些方法。

```
$.fn.collapse.Constructor.prototype.show = function () {
   // your code
} 
```

但是如果你想扩展这些方法并保持它们的默认行为，你可以这样做：

```
var tmp = $.fn.tooltip.Constructor.prototype.show;
$.fn.collapse.Constructor.prototype.show = function () {
   ...
   tmp.call(this);
   ...
} 
```

# java - 如何使用 iText 库获取 pdf 文件的给定段落内容？

> ID：15484354
> 
> 赞同：1
> 
> 时间：2013-03-18T18:38:53.137
> 
> 标签：java, pdf, itext, extract

有没有办法使用 iText 库获取 pdf 文件中给定段落的段落数或内容？我在一些代码中看到了一些像 Paragraph、Chunk 这样的类来创建新的 pdf 文件，但我找不到任何方法可以在读取文件中获取这些类。每一个想法都值得赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:59:22.200

您所说的 PDF 是带标签的 PDF 吗？如果不是，那么您对 ​​PDF 做出了错误的假设。在 PDF 中，内容是在页面上绘制的。例如：将 iText PdfPTable 转换为将文本片段绘制到画布的文本状态运算符，以及绘制路径和形状的图形状态运算符。如果 PDF 没有标记，则这些行不知道它们是表格的边框；一个词不知道它属于哪个单元格。

段落也是如此：一段文本不知道它是否属于一个句子、一个段落、一个标题行，......

由于 PDF 的本质，您正在寻找的内容可能是不可能的（使用 iText 或任何其他软件产品），或者可能需要启发式（人工智能）来检查所有文本状态运算符和内容的语义以获得模仿人类如何解释文本的结果。

如果您的 PDF 标记正确，则很容易实现。请参阅[ParseTaggedPdf](http://itextpdf.com/examples/iia.php?id=281)示例。

# d3.js - 将元素添加到组元素的顶部

> ID：15484355
> 
> 赞同：5
> 
> 时间：2013-03-18T18:38:58.037
> 
> 标签：d3.js

在与我的组连接数据后，我希望将选择中的元素添加到顶部/最高`enter`的组（ -element）中。`g`默认是附加到底部。

这样做的原因是我希望该对象在视觉上出现在所有准备好的可见对象下方。

我知道我可以订购和排序，但我认为可能有更简单/更好的方法来做到这一点。我做了几件手动的事情，后来才发现“哦，他们提供了一种聪明的方法来做到这一点，很容易。”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T18:51:24.550

D3 确实有一个`insert`方法：[https ://github.com/mbostock/d3/wiki/Selections#wiki-insert](https://github.com/mbostock/d3/wiki/Selections#wiki-insert)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-02-29T12:51:54.700

# 参考资料摘录

例如，`insert("div", ":first-child")`将子 div 节点添加到当前选择。

[https://github.com/mbostock/d3/wiki/Selections#wiki-insert](https://github.com/mbostock/d3/wiki/Selections#wiki-insert)

# git - 在 github 上加载预先存在的目录作为单独的分支？

> ID：15484363
> 
> 赞同：0
> 
> 时间：2013-03-18T18:39:24.790
> 
> 标签：git, github

我刚刚开始使用 github，我目前有一个目录，我以前曾手动与不同机器上的其他两个目录同步。所有目录都具有相同的名称。是否可以在 github 上创建一个主分支，然后将每个不同的目录加载为单独的分支？这三个目录的材料基本相同。它们都很相似，并且在各自的平台上实现了相同的目标，我希望将它们逻辑地保留在一个主要分支下。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:50:37.693

可能有更简单的方法，但我会这样做：

1.  如此处所述，创建一个 github 存储库并从您的目录之一导入您的源[代码](https://stackoverflow.com/questions/4658606/import-existing-source-code-to-github)
2.  在您的其他机器上克隆到一个新目录`git clone git://github.com/youruser/somename.git newdir`
3.  `newdir`在您的with中创建一个新分支`git checkout -b branch-b origin/master`
4.  将源目录中的所有文件复制到`newdir`
5.  添加、提交和推送：

    ```
    git add .
    git commit -m 'Changes from Branch B'
    git push origin branch-b 
    ```

# birt - 带有连接配置文件的参数

> ID：15484366
> 
> 赞同：1
> 
> 时间：2013-03-18T18:39:38.343
> 
> 标签：birt

在 BIRT 中，是否可以设置一个接受用户名/密码作为参数的连接配置文件？

使用标准数据源，我可以使用“属性绑定”选项卡来设置报告参数以用作用户名和密码。但是，当我为连接配置文件创建数据源时，我看不到“属性绑定”选项卡。我也看不到任何方法可以在连接配置文件中编辑现有数据源或如何获得数据源的更多选项（当它是连接配置文件的一部分时）。

可用于非连接配置文件数据源的属性绑定选项卡的屏幕截图：
![编辑属性绑定](../Images/1e7c844a2bbb20fbab16266897965b13.png)

为连接配置文件创建数据源的屏幕截图 - 无属性绑定选项卡 :(
![为连接配置文件创建数据源](../Images/2d13f48a9b4a4dccb7f3cfd4ac66c72a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:21:53.740

您可以编辑现有的连接配置文件。

选择菜单窗口-显示视图->其他->数据源浏览器...现在您可以查看现有配置文件。右键单击并获取相应配置文件的属性，在这里您可以编辑用户名和密码

# javascript - 5秒后自动滚动页面到一个div

> ID：15484367
> 
> 赞同：4
> 
> 时间：2013-03-18T18:39:42.780
> 
> 标签：javascript, jquery, scroll, scrollto, scrolltop

我是 javascript 新手，现在我正在尝试这样做，作为标题，我有一个页面，顶部有一个 div，它与包含视频的页面一样大，然后是几个部分，如这个：

```
<div id="first" style="height:100%; width:100%"></div>
<section id="second" style="height:100%; width:100%"></section>
<section id="third" style="height:100%; width:100%"></section> 
```

现在我需要在页面加载后 5 秒自动将页面滚动到 #second。我尝试了很多方法，但都失败了，也没有找到任何可以正常工作的方法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:01:54.043

我感觉很慷慨，所以这次我只给你代码。

```
$(window).load(function () {
    //normally you'd wait for document.ready, but you'd likely to want to wait
    //for images to load in case they reflow the page
    $('body').delay(5000) //wait 5 seconds
        .animate({
            //animate jQuery's custom "scrollTop" style
            //grab the value as the offset of #second from the top of the page
            'scrollTop': $('#second').offset().top
        }, 300); //animate over 300ms, change this to however long you want it to animate for
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:45:46.200

在代码末尾使用它

```
setTimeout(function(){window.location.hash = '#second';},5000); 
```

**请注意**，这些`height:100%;`是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T18:42:24.807

你可以使用

```
window.location.hash = '#second'; 
```

这将设置焦点。我会让你在计时器解决方案上做一些工作。

此外，我不鼓励任何强迫用户专注于特定 div 的行为。这不是一个很好的 UX 实践，可能会导致用户离开您的网站，尤其是因为他们可能不理解页面向上滚动的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:44:48.153

```
$(function () {
    setTimeout(function () { goToSecondTab(); }, 5000);
    function goToSecondTab() {
        window.location.hash = '#second';
    }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-02-02T16:21:06.587

将 HTML 添加到 zzzzBov 脚本中的这一行，使其在 FF 中正常工作：

```
$('html, body').delay(5000) //wait 5 seconds 
```

# c++ - 河内递归塔，访问冲突/分段错误，在开发 c++ 编译器上

> ID：15484369
> 
> 赞同：-1
> 
> 时间：2013-03-18T18:39:43.923
> 
> 标签：c++, pointers, recursion

//以下代码生成访问冲突或分段错误 //我正在寻找河内塔的简单解决方案，我应该自己写 //请指出下面代码中的缺陷，而不是提供您的精英代码 :)

//使用三个堆栈递归解决汉诺塔问题

```
 #include <iostream>
  using namespace std;

  #define max 50

 typedef struct stack{ //union?
        int tos;
        int els[max]; //stack->els[1] = tos
}stack; //template stack?

void toh(int, stack * , stack *, stack *);
void display(stack * );

int main(){
    cout<<"Enter the number of discs ( <=50 ) in Tower of Hanoi\n";
    int n;
    cin>>n;
    stack *A,*B,*C;
    toh(n, A,B,C);
    system("pause");
    return 0;
}
void toh( int n, stack *A, stack *B, stack *C){
    if ( n == 1 ) {
         int temp = A->els[A->tos]; //switch case i=1,2,3 tos[i]
         A->tos -= 1; //OR stack * A, A->tos?
         C->tos += 1;
         C->els[C->tos] = temp;  
               //     push the popped item in stack C
         cout<<"A\t";
         display(A);
         cout<<"\nB\t";
         display(B);
         cout<<"\nC\t";
         display(C);
    }
    else {
         toh( n-1, A, C, B);
         toh( 1, A, B, C);
         toh( n-1, B, A, C);
    }
}
void display(stack * X){ //and not int[] stack
     cout<<"The stack elements are :\n";
          for( int i = 1; i <= X->tos; i++){//impo to start with 1 if tos = 0 init
               cout<<X->els[i];
               cout<<"\t";
          }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:57:23.030

由于上面给出的微妙提示有点过于微妙，请看这段代码：

```
stack *A,*B,*C;
toh(n, A,B,C); 
```

您的指针永远不会被初始化。因此它们具有未知值。

最简单的解决方法是在 main 的堆栈上分配它们，然后将指针传递给 toh 函数：

```
stack A,B,C;
toh(n, &A,&B,&C); 
```

# java - EDT on Swing（傻瓜版）

> ID：15484370
> 
> 赞同：0
> 
> 时间：2013-03-18T18:39:44.823
> 
> 标签：java, swing, jlabel, settext, eventqueue

所以，我只是在做一个小游戏，除了 GUI 外，它运行得很好。基本上，我需要在单击按钮时修改 GUI。我意识到我必须使用以下代码在 EDT 上运行我的代码：

```
EventQueue.invokeLater(new Runnable () {
    @Override
    public void run() {
        // some code
    }
}); 
```

我只是现在不关心我的代码的哪一部分。我创建 GUI 的部分（我的类的构造函数）？或者只是我修改值的部分（在这种情况下`Listener.actionPerformed()`）？实际上我测试了这个机器人，都没有工作。

现在我想知道的是如何修改以下代码以在单击按钮时更新按钮？我必须在上面的代码中嵌入它的一部分还是我完全错了？

```
package edttest;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class EDTtest {
    public static void main(String[] args) {
        GUI gui = new GUI ();
    }

    private static class GUI extends JFrame {

        int x;

        public GUI () {
            x = 0;
            setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
            JButton button = new JButton (String.valueOf(x));
            button.addActionListener(new Listener ());
            JLabel label = new JLabel (String.valueOf(x));
            add (label, BorderLayout.NORTH);
            add (button);
            pack();
            setVisible (true);
        }

        private class Listener implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent e) {
                x++;
                System.out.println (x);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:44:45.793

无论您是否在 EDT 上执行此代码，都不会对您的标签产生任何影响。这并不是因为您增加`x`了标签会自行更新。您需要`label#setText`使用更新后的值进行调用。

关于您关于 EDT 的问题。Swing 组件的所有访问/修改/创建/...都应该在 EDT 上进行。这意味着您应该将 main 方法的内容包装在一个`SwingUtilities#invoke...`. 通过 UI 触发的每个事件（例如单击按钮）都将在 EDT 上进行处理。因此，无需`Runnable`在侦听器的 EDT 上明确安排 a 。

如有疑问，您可以随时使用 . 检查您是否在 EDT 上`EventQueue#isDispatchThread`。

我还建议阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程

# android - 在 Android 中使用 Itemized Overlay 时的空指针

> ID：15484371
> 
> 赞同：0
> 
> 时间：2013-03-18T18:39:46.757
> 
> 标签：android, maps, itemizedoverlay

您好，我正在尝试使用逐项叠加在地图上绘制纬度和经度数组。我收到以下错误。可能是什么问题..????

>

```
 03-18 23:52:06.834: W/dalvikvm(2949): threadid=1: thread exiting with uncaught exception (group=0x40b01428)
03-18 23:52:06.844: E/AndroidRuntime(2949): FATAL EXCEPTION: main
03-18 23:52:06.844: E/AndroidRuntime(2949): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rahul.besttracker/com.rahul.besttracker.Mapview}: java.lang.NullPointerException
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.app.ActivityThread.access$600(ActivityThread.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.os.Handler.dispatchMessage(Handler.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.os.Looper.loop(Looper.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.app.ActivityThread.main(ActivityThread.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at java.lang.reflect.Method.invoke(Method.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at dalvik.system.NativeStart.main(Native Method)
03-18 23:52:06.844: E/AndroidRuntime(2949): Caused by: java.lang.NullPointerException
03-18 23:52:06.844: E/AndroidRuntime(2949):     at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at com.rahul.besttracker.HelloItemizedOverlay.addOverlay(HelloItemizedOverlay.java:37)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at com.rahul.besttracker.Mapview.onCreate(Mapview.java:56)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.app.Activity.performCreate(Activity.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java)
03-18 23:52:06.844: E/AndroidRuntime(2949):     ... 12 more
03-18 23:52:07.935: D/Process(2949): killProcess, pid=2949 
```

这是我的 HelloItemizedOverlay 类

```
package com.rahul.besttracker;

    import java.util.ArrayList;

    import android.app.AlertDialog;
    import android.content.Context;
    import android.graphics.drawable.Drawable;

     import com.google.android.maps.ItemizedOverlay;
    import com.google.android.maps.OverlayItem;

    public class HelloItemizedOverlay extends ItemizedOverlay {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
}

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    mContext = context;
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

public void addOverlay(OverlayItem overlay) {

    mOverlays.add(overlay);
    populate();   <--------------GETTING ERROR HERE
}

@Override
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();
    return true;
}
    } 
```

这是我的 MapView 类

```
package com.rahul.besttracker;

import java.util.ArrayList;
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
 import com.google.android.maps.Overlay;
 import com.google.android.maps.OverlayItem;

import android.graphics.drawable.Drawable;
import android.os.Bundle;

public class Mapview extends MapActivity {
MapView map;
ArrayList<String> mArrayList;
double[] Lat;
double[] Lon;

String stops[];
int latarr[], lonarr[];
OverlayItem overlayitem;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.maps);

    map = (MapView) findViewById(R.id.Map);
    // map.setBuiltInZoomControls(true);
    // setContentView(R.layout.maps);
    Bundle gotBasket = getIntent().getExtras();
    mArrayList = gotBasket.getStringArrayList("stops");
    Lat = gotBasket.getDoubleArray("Lat");
    Lon = gotBasket.getDoubleArray("Lon");

    System.out.println("SIZE+++" + Lat.length + " " + Lon.length);
    for (int i = 0; i < mArrayList.size(); i++) {
        System.out.println(" \n" + Lat[i] + "\t" + Lon[i]);
    }
    // stops=(String[]) mArrayList.toArray();

    List<Overlay> mapOverlays = map.getOverlays();
    Drawable drawable = this.getResources().getDrawable(
            R.drawable.mark_blue);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(
            drawable, this);

    for (int i = 0; i < mArrayList.size(); i++) {

        if (Lat[i] > 0 && Lon[i] > 0) {
            GeoPoint point = new GeoPoint((int) (Lat[i] * 1E6),
                    (int) (Lon[i] * 1E6));
            overlayitem = new OverlayItem(point, mArrayList.get(i), null);
        }
        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);
    }
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:42:34.987

在 onCreate 的 for 循环中，如果您不进入 if 语句，您将永远不会实例化覆盖项，因此您将向覆盖添加一个空指针。这最终会导致崩溃。add 应该是 if 的一部分。

# jquery - 是否可以修复 slideUp /slideDown jquery 响应宽度的跳转问题

> ID：15484373
> 
> 赞同：2
> 
> 时间：2013-03-18T18:39:51.563
> 
> 标签：jquery, slidedown, slideup

关于slideUp/slideDown 跳转的帖子有很多，其中[最有帮助的是](https://stackoverflow.com/questions/1092245/basic-jquery-slideup-and-slidedown-driving-me-mad)Remy [Sharp 的帖子](http://jqueryfordesigners.com/slidedown-animation-jump-revisited/)。但是，这仅解决了要隐藏的 div 的高度没有改变的情况。

假设 html 看起来像：

```
<h3>Title</h3>
  <p>Content</p>
<h3>Title</h3>
  <p>Content</p>
<h3>Title</h3>
  <p>Content</p> 
```

jquery 看起来像这样：

```
$(document).ready(function(){
    var $listing = $('p');
    var $listingTitle = $('h3')

$listing.addClass('hide');

$listingTitle.click(function(){

    if ($(this).next("p").hasClass("active-listing") === true) {
      $listing.slideUp(500).removeClass("active-listing");
    } else {

$listing.slideUp(500).removeClass("active-listing");
  $(this).next("p").slideDown(500).addClass("active-listing");

    }

});

}); 
```

如果我要使用 Remy 的修复程序（我已经尝试过），它一开始效果很好。`<p>`但是在响应式站点中，如果手动调整浏览器大小，每个高度都会发生变化。然后每个的新长度

是不同的，可能会导致主要的间距问题。有没有办法在不向 div 添加特定宽度或查询高度的情况下摆脱跳跃问题？

# c - 将递归 C 结构移植到 Fortran

> ID：15484377
> 
> 赞同：0
> 
> 时间：2013-03-18T18:40:00.423
> 
> 标签：c, struct, interop, fortran, fortran-iso-c-binding

在 Fortran 中定义这个递归 C 结构的正确方法是什么？

```
struct OPTION {
        char option;
        char *arg;
        struct OPTION *next;
        struct OPTION *previous;
}; 
```

我写了这个 Fortran 代码：

```
module resources
use iso_c_binding
implicit none
   type :: OPTION
      character(c_char) :: option
      character(c_char) :: arg
      type(OPTION), pointer :: next
      type(OPTION), pointer :: previous
   end type OPTION
end module resources 
```

这可以编译，但我认为这是错误`bind(c)`的，因为缺少类型定义。如果我尝试将`type, bind(c) :: OPTION`gfortran 归咎于`Error: Component 'next' at (1) cannot have the POINTER attribute because it is a member of the BIND(C) derived type 'option' at (2)`.

如果我保留`type, bind(c) :: OPTION`并删除`POINTER`我得到的属性`Error: Component at (1) must have the POINTER attribute`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:14:37.097

尝试：

```
 type, bind(c) :: OPTION
      character(c_char) :: option
      character(c_char) :: arg
      type(c_ptr) :: next
      type(c_ptr) :: previous
   end type OPTION 
```

Fortran 中的 C 指针并不真正被视为指针，而是被视为完全独立的类型。您必须将它们转换为 Fortran 指针`C_F_POINTER`才能充分利用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:14:37.730

您可以通过以下类型使用 C 类型指针`type(c_ptr)`：

```
module resources
  use iso_c_binding
  implicit none
  type, bind(c) :: OPTION
    character(c_char) :: option
    character(c_char) :: arg
    type(c_ptr) :: next
    type(c_ptr) :: previous
  end type OPTION
end module resources 
```

# sass - 如何让指南针根据 css 颜色名称为图像创建数据 uri？

> ID：15484378
> 
> 赞同：1
> 
> 时间：2013-03-18T18:40:04.480
> 
> 标签：sass, compass-sass, data-uri

在使用一段遗留 javascript 时，我发现设置特定控件样式的唯一方法是设置它的背景图像。这使得支持多个不同的背景颜色变得很痛苦。那么，我想做的是让 compass 在编译时生成图像，并将其作为 data-uri 内联。对于指南针 n00b，这似乎是合理的，因为每个“背景图像”只是纯色的方形样本。

有谁知道那里有一个项目可以自动化这个？这甚至是一个合理的方法吗？如果“提前生成所有图像”方法确实是最好的，那么我可能可以做到这一点，但它似乎远没有那么优雅。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:10:38.883

像这样使用[compass-rgbapng](https://github.com/aaronrussell/compass-rgbapng)：

```
body {
  @include rgba-background-inline(rgba(0,0,0,1));
} 
```

# iphone - 为什么 Youtube 视频没有填满 UiWebView？

> ID：15484379
> 
> 赞同：6
> 
> 时间：2013-03-18T18:40:07.877
> 
> 标签：iphone, html, ios, uiwebview, youtube

我是 iphone 开发的菜鸟，我无法在 UIwebview 中显示嵌入的 youtube 视频。目前，youtube 视频位于 uiwebview 的左上角，而且它还有一个烦人的边框。我将 youtube 框架设置为与我的 uiwebview 相同的尺寸，并且 webview 设置为“缩放以适应”。如何使我的 youtube 内容适合整个屏幕并摆脱边框？任何帮助是极大的赞赏。

我的代码

```
NSString *video_ID = youtubeid;
NSString *htmlStr = [NSString stringWithFormat:@"<iframe class=\"youtube-player\" type=\"text/html\" width=\"320\" height=\"230\" src=\"http://www.youtube.com/embed/%@\" frameborder=\"0\"></iframe>",video_ID];
[videoScreen loadHTMLString:htmlStr baseURL:nil]; 
```

编辑

```
 NSString *video_ID = youtubeid;
NSString *htmlStr = [NSString stringWithFormat:@"<iframe class=\"youtube-player\" type=\"text/html\" width=\"100%\" height=\"100%\" src=\"http://www.youtube.com/embed/%@\" frameborder=\"0\"></iframe>",video_ID];
[videoScreen loadHTMLString:htmlStr baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:39:10.290

你试过这个吗……

```
NSString *video_ID = youtubeid;
NSString *htmlStr = [NSString stringWithFormat:@"<iframe class=\"youtube-player\" type=\"text/html\" width=\"100%%\" height=\"100%%\" src=\"http://www.youtube.com/embed/%@\" frameborder=\"0\"></iframe>",video_ID];
[videoScreen loadHTMLString:htmlStr baseURL:nil]; 
```

注意 %% 用于 % 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:32:32.797

因此，首先您必须创建一个 UIWebView 并将其添加到您的主视图中。在下面，我创建了一个指向 www.example.com 的 web 视图，我在其中嵌入了我想要播放的 YouTube 剪辑，我将其设置为隐藏，因为我稍后想要全屏启动视频。`

```
UIWebView *htmlView;
 htmlView = [[UIWebView alloc] initWithFrame:CGRectMake( 55.0f, 105.0f, 369.0f, 178.0f) ];  
  [htmlView setBackgroundColor:[UIColor blackColor]];  
    htmlView.hidden = YES;  
     htmlView.delegate = self;  
      [self addSubview:htmlView];  
       [htmlView loadRequest:[NSURLRequest requestWithURL:[NSURL   URLWithString:@"www.example,com"]]];  ` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:38:16.033

所以在这里我浏览了 web 视图中的所有按钮，并选择使用 sendActionsForControlEvents 函数找到的第一个按钮。

```
UIButton* findButtonInView(UIView* view)  
 {  
 UIButton *button = nil;  
  if( [view isMemberOfClass:[UIButton class]] )  
    {  
  return (UIButton*)view;  
   }  

    if( view.subviews && [view.subviews count] > 0 )  
    {  
    for( UIView *subview in view.subviews )  
    {  
    button = findButtonInView( subview );  
    if( button )   
    {  
      return button;  
  }  
   }  
    }  

     return button;  
      }  

    -(void)webViewDidFinishLoad:(UIWebView*)webView  
     {  
    UIButton *button = findButtonInView( webView );  
      if( button != nil )  
       {  
      [button sendActionsForControlEvents:UIControlEventTouchUpInside];  
  }  
   } 
```

# sql - 匹配 SQL Server LIKE 中的复杂模式？

> ID：15484387
> 
> 赞同：2
> 
> 时间：2013-03-18T18:40:45.430
> 
> 标签：sql, sql-server, pattern-matching, sql-like

我正在使用一个存储过程，该过程提取一个字符串参数并将其用作`WHERE table.value LIKE @pattern`其查询之一的子句的一部分。在任何人对它所引发的危险直言不讳之前，该过程是使用一组已知值中的一个作为模式参数来调用的——用户输入没有直接传递到这个参数。

对于个别情况，这是可行的。我可能的模式是：

```
"RBI-%-TH%N-[AB]-%"
"RBI-%-TH%N-C-%"
"RBI-%-TH%N-D-%"
"RBI-%-VISUAL%" 
```

我遇到的问题是试图通过设置默认模式来覆盖所有四个（它将选择`table.value`与这些模式中的任何一个匹配的所有记录，但仅此而已）。前三个很容易，`"RBI-%-TH%N-[ABCD]-%"`但是我还没有找到解释最终可能值的好方法。有没有好的方法，或者我需要用逻辑使存储过程复杂化来处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:50:36.183

这是使用 UNION ALL 的另一种变体，根据基数可能会导致更有限的范围扫描，但无论您如何构建查询，您都可能会进行一些长时间运行的扫描。您必须测试一些变体并查看执行计划，以了解在针对您的数据运行这些变体时性能实际上是如何叠加的。设置和使用自由文本搜索是一种选择吗？

```
SELECT ...
FROM ...
WHERE [value] like "RBI-%-TH%N-[A]-%" 
UNION ALL
SELECT ...
FROM ...
WHERE [value] like "RBI-%-TH%N-[B]-%" 
UNION ALL
SELECT ...
FROM ...
WHERE [value] like "RBI-%-TH%N-[C]-%" 
UNION ALL
SELECT ...
FROM ...
WHERE [value] like "RBI-%-TH%N-[D]-%" 
UNION ALL
SELECT ...
FROM ...
WHERE [value] like "RBI-%-VISUAL%"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:49:46.267

我问了一个类似的问题：

[TSQL - 使用 Like 进行模式匹配](https://stackoverflow.com/questions/15753527/tsql-pattern-matching-with-like)

并且有一些很好的答案。我认为最能帮助您的方法是将您可能的模式放入一个新表中，然后按照 MaxiWheat 的建议加入这些表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:44:54.350

是

```
select ... from ...
where [value] like "RBI-%-TH%N-[ABCD]-%" or [value] like "RBI-%-VISUAL%" 
```

不够？

# xcode - Mac OS X：如何从“命令行工具”类型的应用程序启动应用程序 (.app)？

> ID：15484390
> 
> 赞同：1
> 
> 时间：2013-03-18T18:40:49.603
> 
> 标签：xcode, macos, command-line

在 Xcode 4.6 中，我基于“命令行工具”项目模板创建了一个新应用程序。

如何以编程方式从该“命令行工具”应用程序启动另一个应用程序（.app 应用程序包）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:17:14.193

有很多方法可以实现这一点，使用 Launch Services 和 or `NSWorkspace`。

识别捆绑应用程序的一种更灵活的方法是通过其捆绑标识符 ( `CFBundleIdentifier`)，它是一个类似于`com.apple.TextEdit`. 这允许您识别应用程序，而无需硬编码将找到应用程序的假定路径，或者通过硬编码应用程序包的名称，用户可以轻松更改这两者。您可以使用`NSWorkspace`'s[`launchAppWithBundleIdentifier:options:additionalEventParamDescriptor:launchIdentifier:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWorkspace/launchAppWithBundleIdentifier:options:additionalEventParamDescriptor:launchIdentifier:)启动应用程序。如果您还不知道它，您可以通过检查应用程序包的`AppName.app/Contents/Info.plist`文件来获取应用程序包的包标识符。然后使用以下代码：

```
if (![[NSWorkspace sharedWorkspace]
       launchAppWithBundleIdentifier:@"com.apple.TextEdit"
                             options:NSWorkspaceLaunchDefault
      additionalEventParamDescriptor:NULL
                    launchIdentifier:NULL]) {
      NSLog(@"launching app failed!);
} 
```

重要：`NSWorkspace`是`AppKit.framework`框架的一部分，最初不包含在“命令行工具”项目模板中。要将其添加到您的项目中，请在目标列表中选择目标，如下图所示，然后单击 + 按钮添加其他框架。

![在此处输入图像描述](../Images/59edf3b4f10e406773d3cba4490d1f04.png)

同时添加`AppKit.framework`和`Cocoa.framework`。

这将导致所有 3 个都列在 Link Binary With Libraries 步骤中。此时，您可以从链接阶段同时删除`Foundation.framework`和`AppKit.framework`，只保留`Cocoa.framework`，如下所示：

![在此处输入图像描述](../Images/836acc05a670e7312ee47bcedcaf2cf3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:42:44.957

你试过“打开”吗？至少在终端“打开”运行文件和/或应用程序。

# objective-c - 将沙盒应用程序添加到登录项

> ID：15484394
> 
> 赞同：3
> 
> 时间：2013-03-18T18:41:10.793
> 
> 标签：objective-c, cocoa

我在这里阅读了许多关于在登录时启动我的应用程序的问题。我已经多次遵循这个[很棒的教程](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)。该教程确实有效。但...

使用帮助应用程序并使用它进行注册的一个副作用`SMLoginItemSetEnabled`是我的应用程序没有显示在系统偏好设置中的用户登录项中。

App Store 中有几个应用程序（例如 PopClip 和 Dash）可以做我想做的事情。我就是想不通怎么...

**更新**：我从 Dash 开发人员那里得知 Dash 实际上没有被沙盒化。他还认为 PopClip 也不是。这可以解释事情...... [https://alpha.app.net/kapeli/post/3975968](https://alpha.app.net/kapeli/post/3975968)

**更新#2**：我刚刚从 PopClip 开发人员那里得到确认，它确实也没有被沙盒化。[https://twitter.com/pilotmoon/status/313746294361427968](https://twitter.com/pilotmoon/status/313746294361427968)

在最近的 2 次更新中，我想答案很明确。截至今天，沙盒应用程序无法实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-22T15:51:10.107

希望还不算太晚。

在 Apple 的“[守护进程和服务编程指南](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html#//apple_ref/doc/uid/10000172i-SW5-BAJJBJEG)”中：

> ## 添加登录项
> 
> 添加登录项有两种方法：使用`Service Management framework`, 和使用共享文件列表。
> 
> 使用服务管理框架安装的登录项**在系统偏好设置中不可见，只能由安装它们的应用程序删除**。
> 
> 使用共享文件列表安装的登录项目**在系统偏好设置中可见**；用户可以直接控制它们。如果您使用此 API，则用户可以禁用您的登录项，因此与其通信的任何其他应用程序都应该具有合理的回退行为，以防登录项被禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:01:00.070

在沙盒环境中，登录项中只能安装 Helper 应用程序。您需要创建一个，存储在`Contents/Library/LoginItems`主应用程序的文件夹中。

然后，您可以使用`SMLoginItemSetEnabled`将帮助程序设置为登录项并要求登录项启动主应用程序。

# web - 如何从其他 RESTAS 模块访问 RESTAS 子模块的上下文

> ID：15484399
> 
> 赞同：3
> 
> 时间：2013-03-18T18:41:18.650
> 
> 标签：web, lisp, common-lisp, hunchentoot

比方说，我`*a*`在模块中定义了一个动态变量`m1`。然后我`m1`在一个模块中安装`m2`模块：

```
(in-package m2)

(mount-module sub (#:m1)
   (m1:*a* 3)) 
```

我现在如何从模块中获取值 3 `m2`？例如，目前，我必须以这样的方式破解它：

```
(restas:with-context
    (second (gethash 'm1
                     (gethash
                       :modules
                       (gethash (find-package :m2)
                                restas::*pkgmodules-traits*))))
    m1:*a*)) 
```

当然，这甚至不是一个好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-08T03:08:59.440

稍微好一点的解决方案如下：

```
(defmethod restas:module-context ((module symbol))
      (second (gethash module (restas::pkgmodule-traits-modules *package*)))) 
```

然后您可以使用 访问模块的上下文`module-context`，例如：

```
(with-context (module-context 'sub)
  m1:*a*) 
```

或者更好：

```
(with-module 'sub
  m1:*a*) 
```

请注意，您使用的是安装模块时使用的名称，而不是您安装的包的名称。

更新：我描述的方法已添加到 RESTAS。

# ruby-on-rails - 使用 Rails 3 更新模型中的单个属性

> ID：15484401
> 
> 赞同：0
> 
> 时间：2013-03-18T18:41:35.847
> 
> 标签：ruby-on-rails, rails-activerecord

我有两个模型，Rules 和 Ruleset，它们都具有 has_to_and_belong_to_many 关系。规则是单独的规则，而规则集是规则的特定集合。

用户的仪表板显示用户创建的所有规则。对于每个规则，我都有一个“将规则添加到规则集”的按钮。通过单击按钮，它应该加载一个选择表单，用户可以在其中选择他们现有的规则集并点击提交，瞧，它已添加到规则集中。

我只是不知道如何进行这项工作，因为我对 Rails 很陌生。如果我对规则调用更新操作，它会加载我不想要的整个更新表单。我只想让用户能够选择一个规则集，然后将该规则添加到规则集中。这是我的模型：

```
class Rule < ActiveRecord::Base
  attr_accessible :description, :user_id, :game_id, :ruleset_id
  has_and_belongs_to_many  :rulesets
  belongs_to :user
  belongs_to :game

  validates :description, presence: true
  validates :user_id, presence: true
  validates :game_id, presence: true

end

class Ruleset < ActiveRecord::Base
  attr_accessible :title, :game_id, :user_id, :rule_id

  validates :game_id, presence: true
  validates :user_id, presence: true
  validates :title, presence: true

  belongs_to :user
  belongs_to :game
  has_and_belongs_to_many :rules

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:56:24.140

您应该在控制器中声明一个特定的操作以将规则添加到规则集中。

当一个人选择一个规则集时，它将作为参数传递，您可以在新声明的操作中捕获它。此外，使用 hidden_​​field_tag 来存储您的 rule_id。

在新声明的动作中，创建如下内容：

```
def add_rule_to_ruleset
   @ruleset = Ruleset.find(params[:ruleset_id])
   @rule = Rule.find(params[:rule_id])

   @ruleset.rules << @rule
   redirect_to current_user.rules
end 
```

还使用 获取选择框中的所有规则集`current_user.rulesets`，但我想您必须检查该规则集是否已经具有该规则（您不希望同一规则在同一规则集中两次或更多次，对吗？），所以你应该修改它。

用类似的东西检查一下`current_user.rulesets.include?(rule)`

路线.rb：

```
resources :rules do
  member do
    put 'add_rule_to_ruleset'
  end
end 
```

# asp.net - 将数据从表单保存回对象

> ID：15484402
> 
> 赞同：0
> 
> 时间：2013-03-18T18:41:38.780
> 
> 标签：asp.net, .net, vb.net

我可以创建一个对象，然后通过执行以下操作相当轻松地将数据绑定到我的 asp.net Web 表单：

后面的代码：

```
Car = CarFactory.GetCar(CInt(_carID))
Page.DataBind() 
```

在我的网络表单上：

```
asp:Label ID="lblParts" runat="server" Text='<%# Car.PartsList%>' /> 
```

我想知道是否有相关的方法可以从 Web 表单中获取数据，然后更新对象而无需执行以下操作：

```
If Not String.IsNullOrEmpty(tbCarName.Text) Then Car.DisplayName = tbCarName.Text 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:04:22.410

您正在寻找的是所谓的模型绑定，事实上，自 ASP.NET 4.5 起， **Webforms**中也有此功能。它只适用于像 GridView 这样的特殊数据绑定控件，而不是简单的 TextBoxes。

看看这个：http: [//msdn.microsoft.com/en-us/vs11trainingcourse_aspnetwebforms45_topic2#_Toc318982797](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetwebforms45_topic2#_Toc318982797)

# laravel - 如何使用 Eloquent 删除表中的所有行？

> ID：15484404
> 
> 赞同：181
> 
> 时间：2013-03-18T18:41:49.270
> 
> 标签：laravel, laravel-4, eloquent

我的猜测是使用以下语法：

```
MyModel::all()->delete(); 
```

但这没有用。我确定它非常简单，但是我搜索了有关该主题的文档但找不到！

* * *

## 回答 #1

> 赞同：359
> 
> 时间：2013-03-19T01:19:41.617

原因`MyModel::all()->delete()`不起作用是因为`all()`实际上会触发查询并返回 Eloquent 对象的集合。

您可以使用 truncate 方法，这适用于 Laravel 4 和 5：

```
MyModel::truncate(); 
```

这会从表中删除所有行，而不记录单个行删除。

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2016-02-25T21:13:25.863

**Laravel 5.2+**解决方案。

```
Model::getQuery()->delete(); 
```

只需使用表名获取底层构建器并执行任何操作。没有比这更整洁的了。

**Laravel 5.6**解决方案

```
\App\Model::query()->delete(); 
```

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2013-12-19T15:34:23.087

`Model::truncate()`如果您禁用，您可以使用`foreign_key_checks`（我假设您使用 MySQL）。

```
DB::statement("SET foreign_key_checks=0");
Model::truncate();
DB::statement("SET foreign_key_checks=1"); 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2013-10-18T10:42:04.167

我已经看到种子文件中使用了这两种方法。

```
// Uncomment the below to wipe the table clean before populating

DB::table('table_name')->truncate();

//or

DB::table('table_name')->delete(); 
```

**即使您想设置*外键*也不能使用第一个。**

> 无法截断外键约束中引用的表

*所以使用第二个可能是个好主意。*

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-10-28T03:25:40.927

有一个间接的方法：

```
myModel:where('anyColumnName', 'like', '%%')->delete(); 
```

例子：

```
User:where('id', 'like' '%%')->delete(); 
```

Laravel 查询构建器信息：[https ://laravel.com/docs/5.4/queries](https://laravel.com/docs/5.4/queries)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-05-01T20:51:33.367

我想为那些通过 Google 访问该主题的人添加另一个选项。我需要完成此操作，但想保留`truncate()`重置的自动增量值。我也不想使用`DB::`任何东西，因为我想直接从模型对象中操作。所以，我选择了这个：

```
Model::whereNotNull('id')->delete(); 
```

显然，该列必须实际存在，但在标准的、开箱即用的 Eloquent 模型中，该`id`列存在并且永远不会为空。我不知道这是否是最佳选择，但它适用于我的目的。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-02-25T10:48:34.473

我无法使用`Model::truncate()`，因为它会出错：

> SQLSTATE [42000]：语法错误或访问冲突：1701 无法截断外键约束中引用的表

不幸`Model::delete()`的是不起作用（至少在 Laravel 5.0 中）：

> 假设 $this 来自不兼容的上下文，不应静态调用非静态方法 Illuminate\Database\Eloquent\Model::delete()

但这确实有效：

```
(new Model)->newQuery()->delete() 
```

如果您设置了软删除，这将软删除所有行。要完全删除所有行，包括软删除的行，您可以更改为：

```
(new Model)->newQueryWithoutScopes()->forceDelete() 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2019-09-08T15:31:12.100

简单的解决方案：

```
 Mymodel::query()->delete(); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-09-27T12:08:34.127

你也可以试试这个保留软删除的单行：

```
Model::whereRaw('1=1')->delete(); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-03-19T15:49:53.180

完成此操作的最佳方法`Laravel 3`似乎是使用`Fluent`接口截断表格，如下所示

```
DB::query("TRUNCATE TABLE mytable"); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-08T13:35:22.817

问题`truncate`在于它意味着立即提交，所以如果在事务中使用它，风险是你发现表是空的。最好的解决方案是使用`delete`

```
MyModel::query()->delete(); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-05-02T19:04:03.877

与 Travis vignon 的回答类似，我需要来自 eloquent 模型的数据，如果条件正确，我需要删除或更新模型。我最终获得了查询返回的最小和最大字段（如果将另一个字段添加到满足我的选择条件的表中）以及原始选择条件，以通过一个原始 SQL 查询更新字段（如与集合中的每个对象一个雄辩的查询相反）。

我知道使用原始 SQL 违反了 laravel 美丽的代码理念，但它很难忍受可能数百个查询来代替一个。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-11-11T10:37:40.033

> 在我的情况下 laravel 4.2 删除所有行，但不截断表

DB::table('your_table')->delete();

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2018-02-06T18:33:59.087

使用带有外键约束的 Lumen 5.5 的解决方案：

```
$categories = MusicCategory::all();
foreach($categories as $category)
{
$category->delete();

}
return response()->json(['error' => false]); 
```

# iphone - NSManagedObjectContext 批量保存限制

> ID：15484407
> 
> 赞同：2
> 
> 时间：2013-03-18T18:41:52.917
> 
> 标签：iphone, ios, core-data, ios6

我目前正在使用 CoreData 开发 iOS 应用程序。

当应用程序第一次启动时，会针对 RESTful Web 服务发出一系列 Web 请求。

Web 服务提供一系列 json 响应，其中可以包含超过 2000 条记录。

然后解析这些记录，将其转换为各种核心数据实体并存储在我们的 SQLite 持久性存储中。

一旦这个操作完成，我们通过获取**实体 A**中的所有行（例如）来创建一个对象图，并创建一个我们稍后使用的对象图。

出于某种原因，在遍历存储在**实体 A**中的所有 NSManagedObjects 时，一些 NSManagedObjects 缺少属性值。

鉴于我们在多线程环境中工作，我们确保在单独的线程上创建单独的 managedObjectContexts - 但是，在我们最近的测试运行期间，我们已经配置了环境，使得只有一个线程一次从 SQLite 持久存储中保存/检索数据。

还可能值得注意的是，在**`[context save:...]`**我们解析了所有 2000 多条在 json 响应中返回的记录之前，我们不会执行操作。

经过一些试验和错误，我注意到问题消失了，我们每次插入都执行保存。

例如，以下代码可以正常工作：

```
NSManagedObjectContext *context = ...
NSError *error = ...

for(id record in collectionOfRecords){
    //create entity for insertion
    [context save:&error]
} 
```

但这会导致缺少属性值的问题：

```
NSManagedObjectContext *context = ...
NSError *error = ...

for(id record in collectionOfRecords){
    //create entity for insertion     
}
[context save:&error] 
```

**问题：**

**`[NSManagedObjectContext save:...]`**在必须执行操作之前，是否有最大数量的 NSManagedObjects 可以位于内存中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:58:02.133

*要回答您的问题*：在需要保存之前，内存中可以有多少托管对象没有设置限制。您的应用程序可以创建托管对象而无需尽可能多地保存，当内存运行不足时，您将开始收到任何 iOS 应用程序都可以获得的正常内存警告。理想情况下，您不希望发生这种情况，并且对内存警告进行上下文保存或上下文重置可能也不是一个好主意。

但是，Apple 的文档涵盖了您在详细信息中描述的场景：

[核心数据编程指南：高效导入数据](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1)

这里还有更多相关内容：

[核心数据编程指南：核心数据性能](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW1)

在您的情况下，您应该更频繁地保存，并且在多个线程上工作 - 您说您只从一个线程访问存储，这可能是您问题的很大一部分。您似乎没有在线程 B 的上下文中从线程 A 的上下文中获得更改 - NSManagedObjectContextObjectsDidChangeNotification 是使用较旧的线程限制模型时执行此操作的主要方式。

# vb.net - 在 VB.Net 中，使用静态定义的常量，而不是等效的字符串文字，会提高效率吗？

> ID：15484409
> 
> 赞同：3
> 
> 时间：2013-03-18T18:42:16.657
> 
> 标签：vb.net, string, performance, constants

假设您在一个类中有 10 个不同的位置，其中字符串“Abc123”是硬编码的。我知道无论如何用常量替换所有这些是个好主意。我想知道的是，这样做是否会加快程序的执行速度。不久前我听说它在 AS3 中是这样做的，尽管我什至不确定。

另外，如果用静态定义的常量替换等效的字符串文字可以提高性能，提高多少？在大多数过程/面向对象的语言中，这是否会大致相同？但我主要是想知道它是否确实提高了性能。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:59:15.813

没什么区别。编译器已经收集了具有相同值的相同字符串文字并将它们转换为单个对象。这是一种非常常见的编译器优化，称为“字符串实习”，使用字典很容易实现，vb.net 编译器也实现了它。

您可以通过使用 ildasm.exe 查看您的程序集来亲自了解这一点。使用 View + Show Token Values 可以看到字符串编号。例如，这段代码：

```
Sub Main()
    Dim s1 = "hello"
    Dim s2 = "hello"
End Sub 
```

生成：

```
 IL_0001:  ldstr      "hello" /* 70000001 */
  IL_0006:  stloc.0
  IL_0007:  ldstr      "hello" /* 70000001 */
  IL_000c:  stloc.1 
```

请注意令牌值 70000001 是如何相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:16:29.810

同意汉斯·帕桑特的观点。但我只想补充一点，使用常量会让你的代码在未来更容易维护。

# ruby-on-rails-3 - 在 Rails 控制器中获取我的域

> ID：15484411
> 
> 赞同：13
> 
> 时间：2013-03-18T18:42:29.113
> 
> 标签：ruby-on-rails-3

我想获得我的域名：`http://localhost:3000`在开发中，或者`mydomain.com`在生产中。

我不想使用`request.host`，因为我的请求可能来自不同的网站。我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-18T19:45:31.557

你会用`request.domain`. 查看[ActionController 概述 - 请求和响应对象](http://guides.rubyonrails.org/action_controller_overview.html#the-request-and-response-objects)部分以获取更多信息。

为澄清起见，`request.domain`将返回用于请求的服务器的主机名，而不是访问者的主机名。除非您使用多个域托管您的应用程序，否则您应该得到您期望的值（例如`mydomain.com`）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-05-02T09:20:44.557

我知道这是一个老问题，但它在搜索中排名很高。如果有人偶然发现这个想要*使用*协议检索域，您可以使用：

```
request.base_url
#=> http://localhost:3000 # dev
#=> https://example.com # prod 
```

希望这对某人有用。

# javascript - 计数器没有在javascript中更新？

> ID：15484413
> 
> 赞同：0
> 
> 时间：2013-03-18T18:42:30.267
> 
> 标签：javascript

我正在编写一个函数，它将接受一个变量，然后检查该变量是否在 localStorage 中，如果不是，将其添加到 localStorage。如果它在 localStorage 中，它会在末尾附加一个数字，以便添加一个新的 localStorage 键。

到目前为止，我已经做到了这一点：

```
var title = "Test";
test(title);

function test(title) {
    counter = 0;
    console.log("counter = " + counter);
    if (localStorage.getItem(title)) {
        counter = counter + 1;
        title = title + " " + counter;
        console.log("found " + title);
        console.log("found " + counter);
        test(title);
    } else {
        console.log("not found " + title);
        console.log("not found " + counter);
        localStorage.setItem(title, " ");
        load();
    }
}

function load() {
    for (var key in localStorage) {
        $(".keys").append(key + "<br />");
    }
} 
```

这样，当我运行该函数 5 次时，我应该有 localStorage 键：

```
Test, Test 1, Test 2, Test 3, Test 4 
```

相反，我有 localStorage 密钥

```
Test, Test 1, Test 1 1, Test 1 1 1, Test 1 1 1 1 
```

我不确定为什么没有添加数字，但这里有一个 jsFiddle 来演示：http: [//jsfiddle.net/charlescarver/x6ALG/5/](http://jsfiddle.net/charlescarver/x6ALG/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:01:15.290

将计数器移到函数外部，这样您就不会在每次调用函数时将其重置为零，并保持`title`参数干净，以便您可以使用计数器执行算术运算。

```
var counter = 0;
var title = "Test";

test(title);

function test(title) {
    var newTitle = title + " " + counter;
    console.log("counter = " + counter);
    if (localStorage.getItem( newTitle )) {

        counter = counter + 1;

        console.log("found " + newTitle);
        console.log("found " + counter);

        test(title);
    } else {

        console.log("not found " + newTitle);
        console.log("not found " + counter);
        localStorage.setItem( newTitle, " " );
        load();
    }
}

function load() {
    for (var key in localStorage) {
        $(".keys").append(key + "<br />");
    }
} 
```

注意`newTitle`变量。

演示：http: [//jsfiddle.net/x6ALG/7/](http://jsfiddle.net/x6ALG/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:56:54.873

不要在函数测试中将计数器初始化为 0。使其成为全局并在函数外部初始化它。每次调用您的函数时，它都会从 0 开始计数。

# c# - 如何将 double 转换为另一个 double C#？

> ID：15484415
> 
> 赞同：0
> 
> 时间：2013-03-18T18:42:36.960
> 
> 标签：c#, xbee

如何在 C# 中将 30.55273 转换为 30.055273 我正在使用 xbee 无线模块，它不发送分数，所以我必须将任何双精度值分成两部分 EX：30.055273 -> 30 和 055273 所以当我发送它们时我接收它们 30 和 55273 所以左边的零将被取消我该如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:44:19.590

听起来你收到了两个*整数*，你想把它们粘在一起——其中一个被放大了一百万倍。那正确吗？

```
double ConvertToDouble(int wholePart, int fractionalPart)
{
    return wholePart + fractionalPart / 1000000d;
} 
```

请注意，“d”部分非常重要——它确保您使用`double`算术（而不是整数算术）执行除法。

如果确切的数字对您很重要，那么您可能实际上应该使用`decimal`：

```
decimal ConvertToDouble(int wholePart, int fractionalPart)
{
    return wholePart + fractionalPart / 1000000m;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:47:01.307

只需选择一个乘数，例如 100000，取小数部分并乘以该数字，然后再除以该数字。

此外，您可以通过 XBee 发送您喜欢的任何数据。您可能只想将数据转换为字节数组。请参阅[如何将浮点数组转换为 byte[] 并返回？](https://stackoverflow.com/questions/4635769/how-do-i-convert-an-array-of-floats-to-a-byte-and-back) 关于如何做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:18:25.727

建立在Block Frog的想法之上。在c#中构造一个字符串然后将其转换为double，如下所示：

* * *

```
String result = leftToDecimal.ToString() 
+ "." + zeroString(numberOfZeros) + fraction.ToString();
 double MyOriginalNumber = Convert.ToDouble(result); 
```

* * *

```
Public string zeroString(int zeroCount)
{
   String result= "";
   for(int i=0; i< zeroCount; i++)
   result+="0";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T18:50:13.933

您可以将它们作为字符串发送吗？然后这样做。

如果您只能发送整数值，则发送 3 个值。

例如：30.055273

*   第一个数字在小数点左边（整数）
*   第二个数字是小数点右边（分数）
*   第三个数字是零的数量（占位符）

# java - Scala 和 Robocode-ClassCircularityError

> ID：15484417
> 
> 赞同：0
> 
> 时间：2013-03-18T18:42:42.793
> 
> 标签：java, scala, circular-dependency, robocode

这是我的代码

```
 def main(args: Array[String]): Unit = {
    val engine = new RobocodeEngine
    def rounds = 1
   val battlefield = new BattlefieldSpecification(1000, 500)
   //val robots = engine.getLocalRepository()
   engine.setVisible(true)

   // val obs = new BattleObserver
    //engine.addBattleListener(obs)
    //val battleSpec = new BattleSpecification(rounds, battlefield, robots)
    //engine.runBattle(battleSpec, true)
    //engine.close()
    //System.exit(0)

  } 
```

这是 setVisible 引发的错误（但它与 getLocalRepository 的行为相同

```
Exception in thread "Application Thread" java.lang.ClassCircularityError: net/sf/robocode/host/security/RobocodeSecurityPolicy$2
at net.sf.robocode.host.security.RobocodeSecurityPolicy.implies(RobocodeSecurityPolicy.java:101)
at java.security.ProtectionDomain.implies(ProtectionDomain.java:272)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:344)
at java.security.AccessController.checkPermission(AccessController.java:560)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
at java.lang.System.setProperty(System.java:781)
at net.sf.robocode.ui.WindowManager.setEnableGUI(WindowManager.java:104)
at net.sf.robocode.ui.WindowManager.setVisibleForRobotEngine(WindowManager.java:622)
at robocode.control.RobocodeEngine.setVisible(RobocodeEngine.java:196)
at main.ScalaBot$.main(main.scala:11)
at main.ScalaBot.main(main.scala) 
```

我应该在哪里寻找循环？

# c# - 拆分一个长字符串（按空格），但也存储每个单词的所有索引

> ID：15484425
> 
> 赞同：0
> 
> 时间：2013-03-18T18:43:04.910
> 
> 标签：c#, .net, string, split, indexing

我有一个字符串，我想用空格分割它以存储在字典中（足够简单）。但是，我也想要每个单词的索引和长度。

到目前为止，我只有一个单词字典以及它们的查找顺序......

```
 private Dictionary<int,String> makeDictionary(String ASCII)
    {
        string[] t = ASCII.Split(new[] { ' ' },
           StringSplitOptions.RemoveEmptyEntries);
        Dictionary<int, string>  aDictionary = new Dictionary<int, string>();
        for (int i = 0; i < t.Length; i++)
        {
            t[i] = stripSymbolsFromString(t[i]);

            if (!aDictionary.ContainsValue(t[i]) && t[i] != "")
            {
                aDictionary.Add(i, t[i]);
            }
        }
        return aDictionary;
    } 
```

有谁知道如何在保留索引的同时使用 .Split() ，还是我必须使用不同的连接技术？正如有人在下面发布的那样，使用正则表达式将给出匹配的索引。

**编辑：**我不需要长度。正如有人指出的那样，我可以从字符串中获取它。我只需要单词的起始索引。

**EDIT2：**我会忽略重复的单词。

**EDIT3：**这是我将使用的字符串示例：

> Lorem Ipsum 只是印刷和排版行业的虚拟文本。自 1500 年代以来，Lorem Ipsum 一直是行业的标准虚拟文本，当时一位不知名的印刷商采用了一种类型的厨房并将其加扰以制作一本类型样本书。它不仅经历了五个世纪，而且经历了电子排版的飞跃，基本保持不变。它在 1960 年代随着包含 Lorem Ipsum 段落的 Letraset 表的发布而流行起来，最近还随着 Aldus PageMaker 等桌面出版软件（包括 Lorem Ipsum 的版本）而普及。

所以前几个元素是

[0]=>洛鲁姆，

[6]=>Ipsum,

[12]=>是

其中数字 0,6,12 是字符串中单词的原始索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:47:12.623

```
string s = "abc def ghijkl mno abc";

var words = Regex.Matches(s, @"[^ ]+").Cast<Match>()
                .Select(m => new
                {
                    Str = m.Value,  //OR Length = m.Value.Length
                    Offset = m.Index
                })
                .ToList(); 
```

您可以进一步处理`words`以形成`dictionary`

```
var dict = words.GroupBy(w => w.Str)
                .ToDictionary(g => g.Key, g => g.Select(x => x.Offset).ToList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:46:26.530

正则表达式

[比赛班](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)

匹配有索引和长度

# android - Android GPS 位置 DDMS

> ID：15484428
> 
> 赞同：1
> 
> 时间：2013-03-18T18:43:11.680
> 
> 标签：android, eclipse, gps, ddms

我正在做一个查找*GPS 位置的***android 项目**。我的应用程序运行良好。我正在使用模拟器，我必须在**DDMS>Location controls**中手动键入值。有没有办法**将这些动态输入的手动值存储**到**数据库**中?

 ******** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T21:27:39.433

如果我理解这一点，我认为你想要做的是创建一个 GPX 文件。然后，您可以将其“播放”到 DDMS 窗口中（您正在输入的“手动”选项卡旁边有一个 GPX 选项卡）。您的 GPX 文件将如下所示：

```
 <?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
<gpx xmlns="http://www.topografix.com/GPX/1/1" version="1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd ">
    <trk>
        <name>Test path</name>
        <trkseg>
            <trkpt lat="27.622064" lon="-120.319935">
                <time>2013-10-10T10:53:14.679</time>
            </trkpt>
            <trkpt lat="27.622061" lon="-120.320083">
                <time>2013-10-10T10:53:26.666</time>
            </trkpt>
            <trkpt lat="27.622066" lon="-120.320238">
                <time>2013-10-10T10:53:38.699</time>
            </trkpt>
        </trkseg>
    </trk>
</gpx> 
```

那应该给你一个大致的想法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:47:00.823

当然-创建一个模拟位置提供程序。它允许您伪造发送到应用程序的 GPS 数据。从分贝读取位置。或者使用现有的应用程序，例如 FakeGPS。*******

# php - 在 codeigniter 框架中是否有用于 CSRF（跨站点请求伪造）的令牌生成器？

> ID：15484429
> 
> 赞同：0
> 
> 时间：2013-03-18T18:43:13.070
> 
> 标签：php, security, oop, codeigniter

我想知道codeigniter中是否有一个类来生成令牌以形成

样本

```
Form Data
--token:ab664f63c186e43eb51f33c5f1a7e116
--login:admin
--senha:admin@#123 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:46:00.560

让我为您搜索一下... [http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&ved=0CDkQFjAA&url=http%3A%2F%2Fellislab.com %2Fcodeigniter%2Fuser-guide%2Flibraries%2Fsecurity.html&ei=0mBHUbb5Hfe14AODyICwAg&usg=AFQjCNGAAm1mQX3ckNRIgG8HRhMdDsu_pg&sig2=JL3igdEf3JS0cJ8hhDX_VQ&bvm=bv.43828540,d.dmg](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&ved=0CDkQFjAA&url=http%3A%2F%2Fellislab.com%2Fcodeigniter%2Fuser-guide%2Flibraries%2Fsecurity.html&ei=0mBHUbb5Hfe14AODyICwAg&usg=AFQjCNGAAm1mQX3ckNRIgG8HRhMdDsu_pg&sig2=JL3igdEf3JS0cJ8hhDX_VQ&bvm=bv.43828540,d.dmg)

# scripting - Loadrunner 一般脚本提示

> ID：15484430
> 
> 赞同：-2
> 
> 时间：2013-03-18T18:43:13.863
> 
> 标签：scripting, loadrunner

我需要一些关于如何在 Loadrunner 中构建好的 VUGen 脚本的技巧。

首先，是否建议将记录的 Action() 块拆分为单独的自定义命名操作，而不是将整个场景放在一个操作中。如果是，为什么这是一个好习惯？

如果有的话，在脚本的 init() 部分中分离登录逻辑有什么好处？

有必要使用迭代吗？有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:39:14.263

我不是脚本专家，但：

1）我会将其拆分为逻辑部分，以便每个操作都有一个逻辑工作流。一般来说，这是软件开发中的一个很好的做法，在这里似乎也是一个很好的做法。这也将允许您轻松地在另一个脚本中重用不同的操作（有一个导入操作按钮）。

2) init 的想法是它在加载期间只发生一次。您可以稍后更改此逻辑 - 例如等到所有虚拟用户运行他们的初始化，然后才开始负载测试。

3）这完全没有必要，我不确定有什么好处。

希望能有所帮助。请参阅我对这个问题的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:23:36.157

除了软件开发的原因，拆分为逻辑片段使您能够配置脚本的运行逻辑。例如，如果您在网上商店 LT，并且有一个步骤可以将不同的东西添加到购物车。您可以将添加到购物车拆分为单独的步骤，并指定其迭代次数以在运行时设置中运行。

# bamboo - 将竹制品从一个项目传递到另一个项目

> ID：15484432
> 
> 赞同：3
> 
> 时间：2013-03-18T18:43:19.857
> 
> 标签：bamboo

目前我们设置产品的方式是在 Bamboo 中有一个完整的项目，它只处理“运输”。该项目从 git 中检查所有内容并运行单元测试，然后将其复制到 pre-QA 服务器。

我们现在需要在 pre-QA 服务器上进行一些 CI 测试，以运行更多的单元测试和其他自动化测试（主要是 selenium 和 java 的东西）。管理员希望将其定义为一个单独的项目。

所以随之而来的问题是：如何将工件从原始项目传递到 Bamboo 中的这个新项目？这很重要，因为我们在 Shipping 项目中生成我们在 QA 中使用的内部版本号，但是 QA CI 测试（第二个项目）的报告还需要报告它执行测试的内部版本号。

另外，我将如何触发 Bamboo 中的第二个项目？我对 Bamboo 的简单理解是，计划只能依赖于同一项目中的其他计划。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:50:56.380

更新：自 Bamboo 5 以来，这现在是可能的。请检查此链接：[https ://confluence.atlassian.com/display/BAMBOO/Sharing+artifacts](https://confluence.atlassian.com/display/BAMBOO/Sharing+artifacts)

> 如何将工件从原始项目传递到 Bamboo 中的这个新项目？

不幸的是你不能，至少在这个问题得到解决之前：[https ://jira.atlassian.com/browse/BAM-10573](https://jira.atlassian.com/browse/BAM-10573)

您可以做的是将工件从一项工作共享到另一项工作（在同一计划内）。如果您必须使用不同的计划，那么您可以：

*   将您的工件复制到共享位置，然后在另一个计划中抓取它（推荐）
*   如果您使用的是 maven，则可以执行 mvn deploy 以“发布”最后一个快照，然后在 QA 计划中使用 maven 抓取它。您在这里有潜在的竞争条件（其他开发人员执行相同的命令），所以最好小心。

# java - 我可以为 DefaultTableModel 定义大小吗？

> ID：15484433
> 
> 赞同：-1
> 
> 时间：2013-03-18T18:43:22.943
> 
> 标签：java, swing, jtable, defaulttablemodel

我正在使用模型，我可以刷新表格的内容吗？但我将它添加到 JPanel，现在我的第二个 JPanel，包含按钮，非常深入。我正在使用 GridLayout 来控制列的大小（preferredSize()）。一开始我有[http://www.funkyimg.com/u2/3264/877/343679Untitled.jpg](http://www.funkyimg.com/u2/3264/877/343679Untitled.jpg)然后我必须手动将它放大到[http://www.funkyimg.com/u2/3264/878/776480Untitled2 .jpg](http://www.funkyimg.com/u2/3264/878/776480Untitled2.jpg)我在上一篇文章中使用的源代码，稍作修改：

```
public class Arsti3 {
JFrame main = new JFrame("Arst");
JPanel tP = new JPanel(new GridLayout(1,0));
JPanel bP = new JPanel();
JButton one = new JButton("Test");
JButton two = new JButton("Two");
JTable table = new JTable();
DefaultTableModel model;
Vector columnNames = new Vector();
Vector data = new Vector();

Arsti3() {
    main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    main.setSize(840,400);
    try {
        reloadData();
        model = new DefaultTableModel(data,columnNames);
        table.setModel(model);

        //table.setRowHeight(24);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        TableColumn col;
        for(int i=0; i<table.getColumnCount(); i++) {
            col = table.getColumnModel().getColumn(i);
            col.setPreferredWidth(100);
            col.setMaxWidth(500);
        }
        //table.setPreferredScrollableViewportSize(new Dimension(500,500));
        //model.fireTableDataChanged();
        tP.add(new JScrollPane(table));
        bP.add(one);
        bP.add(two);
        main.add(tP,BorderLayout.NORTH);
        main.add(bP,BorderLayout.SOUTH);
    } catch(Exception e) {
        e.printStackTrace();
    }
    main.setVisible(true);

}

private void reloadData() throws ClassNotFoundException, SQLException {
    columnNames.clear();
    data.clear();
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String Base = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)}; DBQ=SL.mdb";
    Connection con = DriverManager.getConnection(Base,"","");
    Statement st = con.createStatement();
    ResultSet res = st.executeQuery("SELECT * FROM Arsti");
    ResultSetMetaData rsmd = res.getMetaData();
    int column = rsmd.getColumnCount();         
    columnNames.addElement("ID");
    columnNames.addElement("Vards");
    columnNames.addElement("Uzvards");
    columnNames.addElement("Dzimums");
    columnNames.addElement("Personas kods");
    columnNames.addElement("Telefona numurs");
    columnNames.addElement("Nodalas ID");
    columnNames.addElement("Amata ID");
    while(res.next()) {
        Vector row = new Vector(column);
        for(int i=1; i<=column; i++) {
            row.addElement(res.getObject(i));
        }
        data.addElement(row);
    }
}

public static void main(String[] args) {
    new Arsti3();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:55:58.303

使用[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)的荣誉，但不要忘记`pack()`封闭`Window`。还，

*   `setPreferredScrollableViewportSize()`有点随意，所以你也可以*做某事*`Dimension`的整数倍。

**   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

    *   用于`model.setRowCount(0)`清除您的模型，而不是每次都更换它*。** 

 *![图片](../Images/1a0c41d29a36dfcce849503ff565c3f8.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.util.Vector;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;

public class Arsti3 {

    private static final int WIDE = 100;
    private JFrame main = new JFrame("Arst");
    private JPanel tP = new JPanel(new GridLayout());
    private JPanel bP = new JPanel();
    private JButton one = new JButton("One");
    private JButton two = new JButton("Two");
    private Vector<String> columnNames = new Vector<String>();
    private Vector<Object> data = new Vector<Object>();
    private DefaultTableModel model = new DefaultTableModel(data, columnNames);
    private JTable table = new JTable();

    Arsti3() {
        reloadData();
        table.setModel(model);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        for (int i = 0; i < table.getColumnCount(); i++) {
            TableColumn col = table.getColumnModel().getColumn(i);
            col.setPreferredWidth(WIDE);
            col.setMaxWidth(WIDE * 5);
        }
        table.setPreferredScrollableViewportSize(new Dimension(
            table.getColumnCount() * WIDE, table.getRowHeight() * 16));
        tP.add(new JScrollPane(table));
        bP.add(one);
        bP.add(two);
        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        main.add(tP, BorderLayout.CENTER);
        main.add(bP, BorderLayout.SOUTH);
        main.pack();
        main.setVisible(true);

    }

    private void reloadData() {
        // could be factored out
        columnNames.clear();
        columnNames.addElement("ID");
        columnNames.addElement("Vards");
        columnNames.addElement("Uzvards");
        columnNames.addElement("Dzimums");
        columnNames.addElement("Personas kods");
        columnNames.addElement("Telefona numurs");
        columnNames.addElement("Nodalas ID");
        columnNames.addElement("Amata ID");
        model.setRowCount(0); // clear rows
        // add rows here
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Arsti3();
            }
        });
    }
} 
```*

# javascript - 让 Jasmine 在服务器端运行

> ID：15484438
> 
> 赞同：7
> 
> 时间：2013-03-18T18:43:40.133
> 
> 标签：javascript, node.js, unit-testing, jasmine, gruntjs

我正在尝试使用 Node.JS 在服务器端测试 JavaScript

我正在使用[**grunt**](http://gruntjs.com)和[**grunt-jasmine-node**](https://github.com/jasmine-contrib/grunt-jasmine-node)，但我无法让它运行我的测试。

它只是记录

> PS C:\Development\NET\Source\jsn> grunt Running "jasmine_node" task undefined
> 
> 在 0.001 秒内完成 0 次测试、0 次断言、0 次失败
> 
> 完成，没有错误。

这是我的`Gruntfile.js`

```
module.exports = function(grunt) {
    grunt.initConfig({
        pkg: grunt.file.readJSON('package.json'),
        jasmine_node: {
            specNameMatcher: 'spec',
            projectRoot: '.',
            requirejs: false,
            forceExit: true,
            jUnit: {
                report: false,
                savePath : "./build/reports/jasmine/",
                useDotNotation: true,
                consolidate: true
            }
        }
    });

    grunt.loadNpmTasks('grunt-jasmine-node');
    grunt.registerTask('default', 'jasmine_node');
}; 
```

我的文件结构是这样的：

![在此处输入图像描述](../Images/256139d1adccc9943f51605e974c572c.png "文件结构")

那么，我做错了什么？

就好像该`stub.js`文件甚至从未加载过，因为它有一个`console.log`调用来测试它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:17:06.193

任何一个：

*   确保您的 javascript 测试规范的扩展名是**`.spec.js`**

或者

*   将配置选项替换`specNameMatcher`为**`matchall: true`**

# jdbc - 在 Websphere 中使用 CallableStatement 时获取 sqlcode=-302

> ID：15484442
> 
> 赞同：0
> 
> 时间：2013-03-18T18:43:50.450
> 
> 标签：jdbc, websphere

我正在使用 Websphere java 应用程序中的 CallableStatement 类来调用本机 SQL 过程。但是当应用程序部署运行时，我得到一个-302 SqlDataException: DB2 SQL Error: SQLCODE=-302, SQLSTATE=22001, SQLERRMC=3,

我已经交叉检查了 SQL SP 的参数以及 java 代码。他们似乎是对的。Java coe 片段

受保护的 CallableStatement cs = null;

/* 建立到 DB2 数据源的连接 */ dbAgent.connectToDataSource(AEUtils.getDataSource());

/* 准备 SP 调用语句 */

cs = dbAgent.createCallStatement (DB2StoredProcedure, this.NSPparameterCount);

cs.setString("PA_INSERT_IN", "Y");

这 cs.setString("PA_INSERT_IN", "Y"); 语句抛出 -302。但是，当我通过一个独立的 java 程序调用同一个 SP 时，它可以工作。我在这里错过了什么吗？（请注意，dbAgent 是内部开发的辅助类的对象）

# python - Python 中的 Newton Raphson 算法不起作用；只估计一个方向

> ID：15484443
> 
> 赞同：1
> 
> 时间：2013-03-18T18:43:50.807
> 
> 标签：python, r, approximation

首先阅读：问题只是绝对值的括号应该围绕实际分数。现在的问题是它实际上不够精确，它忽略了 0.000001，并且更喜欢 0.0001 作为容差（当我要求它接近 55 时，它停在 54.994397921372205）。我将容差增加到疯狂的 0，然后是 1，但例如接近 50，它估计为 49.14！糟糕的！为什么会这样？

更新：它必须是`float()`

我试图找到属于基于某些向量的函数的 theta。我让这段代码在 R 中运行，我试图将它从 R 字面上翻译成 Python。

当 grensscore 等于 50 时，我想近似 Theta 的值。我有一个 theta = 0.5 的起始值，然后它在 R 中迭代。在 R 中只需要大约 11 次迭代就可以达到这一点。

可悲的是，这在 Python 中不起作用，我将它隔离了这么多：由于某种原因，这些值只能低于 0.5，但不能高于。在这些地方使用打印甚至表明它没有`#a`在代码中运行该部分，而该`#b`部分正在运行。这表明该值永远不会上升，因此我永远找不到像 0.4 这样的值（因为它必须上升 0.5、0.25、0.37.5、0.4375 等，但它只能下降；0.5、0.25、0.125然后迟早停止）

我可以看到它运行#b。很多时候它必须下降，但它永远不会上升。我也切换了它们，看看是否有顺序效应，但没有：它根本不会评估它是真的（即使我知道它是真的）任何人都可以看到出了什么问题，因为这是在 R 中工作？

```
def CalcTheta(grensscore, alpha, beta):
    theta = 0.5
    estimate = [10000]   # I just set this to not error on the check
    up = 1
    down = 0

    while((math.fabs(sum(estimate)) - grensscore) > 0.00001):

        if estimate == [10000]:     # I set it like this, 
            estimate = [grensscore] # so it will skip the first run

        # a.
        if (sum(estimate) - grensscore) < 0:
            down = theta
            print(down)
            theta = (theta + up) / 2
            print(theta)

        #b.
        if (sum(estimate) - grensscore) > 0:
            print(up, down, theta)
            up = theta
            theta = (theta + down) / 2
            print(up, down, theta)

        for x in range(len(beta)):
            if x == 0:
                estimate = []

            estimate.append(math.exp(alpha[x] * (theta - beta[x]))  / (1 + math.exp(alpha[x] * (theta - beta[x]))))

    return(theta)

CalcTheta(50, data[:,1], data[:,2]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:44:06.860

问题是

`while(math.fabs(sum(estimate)) - grensscore) > 0.00001):`

应该

`while(math.fabs(sum(estimate) - grensscore)) > 0.00001):`

对于另一部分，它不是 a `float`，因此它并没有变得非常精确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:00:36.813

有一些图书馆可以为您做到这一点。我建议[使用 Scipy](http://www.scipy.org/Download) ( `scipy.optimize.newton`)。可以在这里找到食谱：

[http://code.activestate.com/recipes/576762-newton-raphson-root-finding/](http://code.activestate.com/recipes/576762-newton-raphson-root-finding/)

# breeze - 微风是否支持继承表？

> ID：15484444
> 
> 赞同：3
> 
> 时间：2013-03-18T18:43:56.440
> 
> 标签：breeze

我有一个从另一个表继承的表。当我运行该项目时，我收到以下错误：无法获取未定义或空引用的属性“propertyref”......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:07:27.943

## 编辑：从 v 1.3.1 起，Breeze 现在支持继承。

Breeze 还不支持继承。但它在我们的待办事项清单上很重要。[请在Breeze User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3083057-support-inheritence-in-the-object-model)上为此投票。在确定下一步要做什么时，我们非常重视这些建议。

# c# - 如何在可以反转密钥的情况下执行 LINQ GroupBy？

> ID：15484446
> 
> 赞同：4
> 
> 时间：2013-03-18T18:44:03.053
> 
> 标签：c#, linq

我正在尝试在 LINQ 中执行复杂的 GroupBy，但我的键选择器遇到了问题。在下面的代码中，我可以按一个方向的键（按 SellerID、BuyerID）进行分组，但实际上我也需要按相反的键分组（按 SellerID、BuyerID 或 BuyerID、SellerID）。我这个查询的最终目标是，当键反转时，我需要将资产金额设为负数。这将允许我扣除双方存在的任何金额，然后我将只得到在该特定方面有金额的记录。

下面的代码应该解释它：

```
public class Record
{
    public int RecordID;
    public int SellerID;
    public int BuyerID;
    public List<Asset> Assets;
}

public class Asset
{
    public int AssetID;
    public decimal Amount;
}

var groups = new List<Record>
{
    new Record { RecordID = 1, SellerID = 100, BuyerID = 200, Assets = new List<Asset> { new Asset { AssetID = 5, Amount = 10 }}},
    new Record { RecordID = 2, SellerID = 100, BuyerID = 200, Assets = new List<Asset> { new Asset { AssetID = 5, Amount = 20 }}},
    new Record { RecordID = 3, SellerID = 100, BuyerID = 200, Assets = new List<Asset> { new Asset { AssetID = 6, Amount = 60 }}},
    new Record { RecordID = 4, SellerID = 200, BuyerID = 100, Assets = new List<Asset> { new Asset { AssetID = 5, Amount = 40 }}},
    new Record { RecordID = 5, SellerID = 200, BuyerID = 100, Assets = new List<Asset> { new Asset { AssetID = 5, Amount = 50 }}},
    new Record { RecordID = 6, SellerID = 200, BuyerID = 100, Assets = new List<Asset> { new Asset { AssetID = 6, Amount = 35 }}}
};

var result = groups.GroupBy(
    r => new { r.SellerID, r.BuyerID },
    r => r.Assets,
    (r, assets) => new
    {
        r.SellerID,
        r.BuyerID,
        AssetSummation = assets.SelectMany(asset => asset).GroupBy(a => a.AssetID).Select(a2 => new { AssetID = a2.Key, Amount = a2.Sum(a3 => a3.Amount) })
    }); 
```

我希望我的输出如下：

*   记录 1
    *   卖家：100
    *   买家：200
    *   资产：
        *   资产
            *   资产 ID：6
            *   数量：25
*   记录 2
    *   卖家：200
    *   买家：100
    *   资产：
        *   资产 ID：5
        *   数量：60

我想我有一个好的开始，但我不知道从这里去哪里。我如何翻转钥匙然后使金额为负数，以便我可以总结它们？我认为，在我能够做到这一点之后，我可以过滤掉任何值为 0 的资产行（这意味着记录是由逆向实现的。

编辑＃1：也许我想做的是将groups变量加入到自身中，以求和加入两边的所有匹配记录。因此，我最终将左侧的 SellerID 连接到右侧的 BuyerID，将左侧的 BuyerID 连接到右侧的 SellerID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:43:42.523

这是返回您预期结果的查询：

```
var result = records
    .SelectMany(r => new[] { r, new Record { // 1
           SellerID = r.BuyerID, 
           BuyerID = r.SellerID, 
           Assets = r.Assets.Select(a => new Asset { 
                        AssetID = a.AssetID, 
                        Amount = -a.Amount
                    }).ToList() }})
    .GroupBy(r => new { r.SellerID, r.BuyerID }) // 2
    .Select(g => new { // 3
           Seller = g.Key.SellerID,
           Buyer = g.Key.BuyerID,
           Assets = g.SelectMany(r => r.Assets)
                     .GroupBy(a => a.AssetID)
                     .Select(ag => new { 
                         AssetID = ag.Key,
                         Amount = ag.Sum(a => a.Amount) })
                     .Where(x => x.Amount > 0) }); 
```

这个怎么运作？非常简单：

1.  对于每条记录，我选择两条记录 - 一条原样，另一条带有反向卖方和买方（所有资产的金额均为负数）。然后我用 . 展平所有记录`SelectMany`。
2.  并按卖方和买方分组。
3.  其余是对每个组的资产数量的简单计算。

**顺便说一句**，您可以在最后一个 select 语句中创建`Record`和对象，而不是返回匿名对象。`Asset`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:13:56.573

助手类：

```
public class RecordItem
{
    public int SellerID;
    public int BuyerID;
    public int AssetID;
    public decimal Amount;
} 
```

平等比较器：

```
public class RecordItemEqualityComparer : IEqualityComparer<RecordItem>
{
    public bool Equals(RecordItem x, RecordItem y)
    {
        if (x.AssetID != y.AssetID)
            return false;

        if (x.BuyerID == y.BuyerID && x.SellerID == y.SellerID)
            return true;

        if (x.BuyerID == y.SellerID && x.SellerID == y.BuyerID)
            return true;

        return false;
    }

    public int GetHashCode(RecordItem obj)
    {
        return string.Format("{0}_{1}", obj.BuyerID * obj.SellerID, obj.AssetID).GetHashCode();
    }
} 
```

和 LINQ 查询：

```
var recordItemComparer = new RecordItemEqualityComparer();

var items = groups.SelectMany(r => r.Assets.Select(a => new RecordItem {
                                                            BuyerID = r.BuyerID,
                                                            SellerID = r.SellerID,
                                                            AssetID =a.AssetID,
                                                            Amount = a.Amount
                                                        }))
                  .GroupBy(ri => ri, recordItemComparer)
                  .Select(g => new RecordItem() {
                        BuyerID = g.Key.BuyerID,
                        SellerID = g.Key.SellerID,
                        AssetID = g.Key.AssetID,
                        Amount = g.Sum(ri => (ri.BuyerID == g.Key.BuyerID) ? ri.Amount : -1 * ri.Amount)
                  }).ToList(); 
```

返回您想要的：包含 2 个项目的列表。总和计算正确，但是*买卖双方*的*顺序*可能不正确，因此总和可能是 eg`-60`而不是`60`。

*PS。这是一个非常好的挑战！*

# java - 在应用程序代码中使用 Spring 框架异常？

> ID：15484447
> 
> 赞同：1
> 
> 时间：2013-03-18T18:44:03.320
> 
> 标签：java, spring, exception

使用框架提供的异常是否被认为是不好的做法？我正在使用 Spring JDBC，我发现这个[IncorrectResultSizeDataAccessException](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/dao/IncorrectResultSizeDataAccessException.html)异常正是我想要的。我将从存储库层扔掉它。存储库和服务层已经知道我使用了 Spring 那么这有关系吗？

一般来说，您会像这样创建自己的异常，还是依赖框架提供的异常（如果可以使用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:49:04.327

我不会在自己的代码中创建 Spring 代码依赖项。让实现依赖于 Spring 是一回事，创建一个强制依赖第三方框架的 API 只会通过你的 API 泄​​露实现细节。

我会首先查看是否有适合该用例的标准 Java 异常，如果没有，则创建一个自定义异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:57:49.527

出于多种原因，我会求助于我自己定义的异常：

*   与某些第三方框架相比，对我的异常有*更好的生命周期版本控制。*
*   不要依赖某些第三方框架版本来使用所需的异常。
*   可以设计我自己的未检查或检查异常层次结构，并且我的应用程序需求决定了我的异常设计（不是某些第三方框架）
*   可以轻松重构我的异常代码，添加/更新/删除方法。

我看到的唯一问题是您最终可能会将一些第三方框架异常包装到您的应用程序特定异常中......例如

```
try
{
  //...do something...
}
catch(SQLException e)
{
  throw new MyAppException(e);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T18:49:38.537

我看不出为什么使用它真的是不好的做法，我宁愿抛出预先存在的异常（因此，如果它们出现，你和其他人更容易理解）而不是创建自己的异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T19:05:58.760

由于您的服务层已经使用 Spring，因此使用现有的 Spring-JDBC 异常似乎是合理的。最大的问题是，如果您的用法与 Spring 的使用方式不一致，那么它可能会导致混淆。

如果您使用的是 Spring JDBC，那么您已经依赖于 Spring 代码，重新使用异常只会使异常处理更加统一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T18:46:56.003

我认为这是一个见仁见智的问题，可能更适合[程序员堆栈交换](https://softwareengineering.stackexchange.com/?as=1)。但是IMO，这样做是可以的。我一直都在处理 Java 为我提供的异常，例如 IllegalArgumentException 之类的东西，那么为什么不重用一个框架呢？

我能想到的缺点是，如果您在项目中替换 Spring，则必须替换该异常会有点奇怪。但我认为你不太可能一开始就这样做。

此外，由于其他层必须处理异常，因此您将弹簧代码暴露给这些层（因为它们必须在包中导入带有“spring”的异常），这可能是一个缺点。但这可能是反对异常的论据，而不是反对重用异常的论据。

# android - libgdx：请求 GPS 地理位置？

> ID：15484451
> 
> 赞同：1
> 
> 时间：2013-03-18T18:44:23.183
> 
> 标签：android, ios, geolocation, gps, libgdx

有没有办法使用 libgdx 获取用户的地理位置？还是我必须独立为 Android 和 iOS 实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:59:37.420

据我所知，LibGDX 框架没有 GPS 的实现。您将不得不编写特定于平台的代码。Gdx.input 类使您可以访问加速度计、指南针等。

这是关于LibGDX[功能的帖子的链接。](http://www.badlogicgames.com/wordpress/?p=1832)

编辑：

[我做了一个快速搜索只是为了仔细检查，有人确实在这里](http://www.badlogicgames.com/forum/viewtopic.php?f=17&t=3354)为 android 编写了一个实现。你也许可以使用这个。

# php - 分别的教义关系

> ID：15484452
> 
> 赞同：1
> 
> 时间：2013-03-18T18:44:26.310
> 
> 标签：php, doctrine-orm

是否可以区分在 Doctrine 关系中填充的行？

例如：我有一个一对多的关系，其中目标实体有一`deleted`列。我希望将此列设置为的任何行都`true`不会出现在集合中。

我在文档中找不到类似的东西，所以这甚至是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:40:11.900

不，您不能在水合期间区分行。

您可以做的是使用[SQL 过滤器](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/filters.html)来过滤来自数据库的任何数据，或者使用[标准 API](http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html#filtering-collections)（[此处示例）过滤您的 getter 中的集合，该 API 从](https://gist.github.com/3368674)[Doctrine 2.3](http://www.doctrine-project.org/blog/doctrine-2-3-final.html)开始可用：

```
public function getUsers()
{
    $criteria = new \Doctrine\Common\Collections\Criteria();

    $criteria->andWhere($criteria->expr()->eq('deleted', false));

    return $this->users->matching($criteria);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:35:41.583

还有一个使用过滤器的“softdelete”扩展。在我看来，这是一个更清洁的解决方案，您不必在每个 getter 中重复该任务。您可以默认激活过滤器，在需要删除记录的极少数情况下，您可以停用过滤器。我认为它也会更高效： [https ://github.com/l3pp4rd/DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)

# ajax - 在单页应用程序中维护 URL？

> ID：15484453
> 
> 赞同：1
> 
> 时间：2013-03-18T18:44:33.007
> 
> 标签：ajax, url, single-page-application

我是 SPA 新手，正在开发我的第一个 SPA 网站。我想知道在发出 Ajax 请求时更改 URL 的工具/技术是什么。

我可以做这个 hash/hashbangs 但我正在寻找一个没有 hashbangs 的解决方案，这正是它在 Twitter 网站上的完成方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:51:27.157

如果您希望能够在没有哈希的情况下执行此操作，则需要服务器端支持。

[在Spine Routing](http://spinejs.com/docs/routing)页面上有一个非常详细的讨论（Spine 是一个 SPA MVC 框架）；转到**HTML5 历史**。那里的信息并不特定于 Spine。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:37:50.783

那里有一些，但最受欢迎的两个是：

## 历史js

[Historyjs](http://balupton.github.com/history.js)非常简单，但可以让您完全控制历史堆栈

## 萨米斯

[Sammyjs](http://sammyjs.org/)和 historyjs做同样的事情，但 sammy 做的更多。它监听 window.location 并且如果它改变它可以调用基于它改变的方法。如果您想基于锚链接生成路由，这很好。`<a href="#somepage">goto somepage</a>`. 它还做了很多工作，允许您创建路由字典，其中包含为某些路由调用的 js 方法。

# ravendb - RavenDB：如何仅针对特定对象保存更改

> ID：15484454
> 
> 赞同：1
> 
> 时间：2013-03-18T18:44:39.253
> 
> 标签：ravendb

在 MVC 应用程序中，对于一个请求，我创建一个文档会话并检索一堆对象并在内存中处理它们。在此期间如果出现错误，我会创建一个 Error 对象并将其存储在 Raven 中。当我调用 SaveChanges 来存储这个 Error 对象时，内存中所有其他对象的状态也会被保存。我需要避免这种情况。如何仅为 Error 对象触发 Savechanges？我们使用 StructureMap 来获取 DocumentSession 的实例：

```
public RavenDbRegistry(string connectionStringName)
{
    For<IDocumentStore>()
        .Singleton()
        .Use(x =>
        {
            var documentStore = new DocumentStore { ConnectionStringName = connectionStringName };
            documentStore.Initialize();         
            return documentStore;
        }
        )
        .Named("RavenDB Document Store.");
    For<IDocumentSession>()
        .HttpContextScoped()
        .Use(x =>
        {
            var documentStore = x.GetInstance<IDocumentStore>();
            return documentStore.OpenSession();
        })
        .Named("RavenDb Session -> per Http Request.");
} 
```

这就是我保存错误对象的方式：

```
private void SaveError(Error error)
{
    documentSession.Store(error);
    documentSession.SaveChanges();
} 
```

我尝试过的几种变体没有按预期工作： 1\. 创建一个新的 DocumentSession 仅用于错误记录：

```
private void SaveError(Error error)
{
    var documentStore = new DocumentStore { ConnectionStringName = "RavenDB" };
    documentStore.Initialize();
    using (var session = documentStore.OpenSession())
    {
        documentSession.Store(error);
        documentSession.SaveChanges();
    }
} 
```

2\. 在 TransactionScope 中包装

```
private void SaveError(Error error)
{
    using (var tx = new TransactionScope())
    {
        documentSession.Store(error);
        documentSession.SaveChanges();
        tx.Complete();
    }
} 
```

目前我不确定该怎么做。任何帮助将不胜感激。

****** *** ** *** ******更新******* *** ** *** ** *** **********

 *****我能够通过在 SaveChanges 之前添加以下行来解决问题

文档会话。高级。清除（）；。

所以现在我的 SaveError 看起来像这样：

```
private void SaveError(Models.CMSError error)
        {
            documentSession.Advanced.Clear();
            documentSession.Store(error);
            documentSession.SaveChanges();            
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:07:56.710

我能够通过在 SaveChanges 之前添加以下行来解决问题

```
documentSession.Advanced.Clear();. 
```

所以现在我的 SaveError 看起来像这样：

```
private void SaveError(Models.CMSError error)
        {
            documentSession.Advanced.Clear();
            documentSession.Store(error);
            documentSession.SaveChanges();            
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:59:48.997

创建一个新的文档会话 - 但在现有的文档存储上，而不是在一个新的。

注入`IDocumentStore`并调用`OpenSession`它。*****

# azure - 日期字段比较，天蓝色移动服务服务器端 javascript API

> ID：15484455
> 
> 赞同：0
> 
> 时间：2013-03-18T18:44:40.820
> 
> 标签：azure, azure-mobile-services

我刚刚开始使用 Azure 移动服务，遇到了相对简单的问题。可能我做错了什么......

我有一个带有**日期**字段的表，`scheduledFor`我需要从服务器端脚本发出一个查询，如“WHERE scheduleFor < SYSDATE”。我真的更喜欢使用`Query.where(function)`方法，我不想用 javascript 代码编写 SQL 查询。你能建议如何做到这一点吗？

我试过以下：

```
tables.getTable('myTable').where(function(currDate) {
  return this.scheduledFor < currDate
}, new Date()).read({
  success: function(results) {
    // Do something
  }
}) 
```

并得到`Error: Unsupported literal value Mon Mar 18 2013 18:07:06 GMT+0000 (GMT Standard Time)`

然后我试着写：

```
tables.getTable('pushMessages').where(function(currDate) {
  return new Date(this.scheduledFor) < currDate
}, new Date()).read({
  success: function(results) {
    // Do something
  }
}) 
```

并得到`Error: The expression 'new Date(this.scheduledFor)'' is not supported.`

似乎`where`函数具有特定的语法，但我在 MSDN 中找不到有关它的文档。

你能指导我吗，我在哪里可以阅读更多关于 azure 移动服务 javascript API，更具体地说是关于查询对象的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:16:24.643

我们已将此行为追溯到我们在查询中处理 Date 对象的方式的问题。我们正在努力修复。作为临时解决方法，是否可以将您的日期存储为表格中的刻度？您应该能够毫无问题地对此进行查询。

# mercurial - Mercurial - 在克隆时克隆另一个 repo

> ID：15484464
> 
> 赞同：2
> 
> 时间：2013-03-18T18:45:03.283
> 
> 标签：mercurial

我目前正在上课，老师正在通过克隆我们个人的作业回购来收集我们的作业；每个家庭作业我们都有一个新的回购。我一直在编写一堆辅助函数，为了使用这些函数，我刚刚复制并粘贴到每个新的家庭作业中。

我想做的是创建另一个包含我所有实用程序功能的存储库，这样我就可以维护一个单一的、最新的代码库。当我的老师克隆我的家庭作业回购时，有什么方法可以让它也克隆我的包含回购并将其包含在同一目录中？

我正在寻找类似于运行的功能`pip install git+ssh://mygitrepo.git`，您可以在其中`setup.py`自动安装依赖项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:48:50.307

这听起来像是[subrepos](http://www.selenic.com/hg/help/subrepos)的一个很好的应用。

您的帮助文件可以存在于独立的存储库中。然后每个作业都可以包含指向它的链接。当老师克隆作业然后更新到特定的修订版时，它会自动克隆子存储库。

# android - 通过 USB 将 Android 连接到 Rambo（Reprap）

> ID：15484465
> 
> 赞同：1
> 
> 时间：2013-03-18T18:45:03.373
> 
> 标签：android, usb

嗨伙计们，我尝试使用[https://code.google.com/p/usb-serial-for-android/将我的 Rambo Board (](https://code.google.com/p/usb-serial-for-android/) [http://reprap.org/wiki/Rambo](http://reprap.org/wiki/Rambo) ) 与 android连接起来。当我插入 USB 端口时，应用程序已经启动，但我无法打开设备。供应商 id 和产品 id 的测试输出是正确的，但是“UsbSerialProber.acquire(mUsbManager, device);” 返回空？我能做些什么？

我的应用程序适用于 Arduino。

谢谢马库斯

```
protected void onResume() {
    super.onResume();

    //Markus K hinzugefügt um device zu finden
    mUsbManager.getDeviceList();
    HashMap<String, UsbDevice> deviceList = mUsbManager.getDeviceList(); 
    Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
    mTitleTextView.setText(mTitleTextView.getText()+""+ deviceList.size()+"Geräte gefunden");
    UsbDevice device=null;
    while(deviceIterator.hasNext()){
        device = deviceIterator.next();
        mTitleTextView.setText(mTitleTextView.getText()+ device.getDeviceName()+" vendorid: "+device.getVendorId()+"  productid"+device.getProductId());

        //abfrage auf richtige vendor id!!

    }

    mSerialDevice = UsbSerialProber.acquire(mUsbManager, device);

    mTitleTextView.setText(mTitleTextView.getText()+ "Resumed, mSerialDevice=" + mSerialDevice);
    if (mSerialDevice == null) {
        mTitleTextView.setText(mTitleTextView.getText()+ "No serial device.");
    } else { 
```

# c++ - g++ 4.2：内部编译器错误：在 make_thunk 中，位于 cp/method.c:129

> ID：15484466
> 
> 赞同：0
> 
> 时间：2013-03-18T18:45:04.853
> 
> 标签：c++, compiler-errors, g++

[我已经在http://www.cplusplus.com/forum/general/96128/](http://www.cplusplus.com/forum/general/96128/)上问过这个问题，但无济于事。

是否有人在 g++ 4.2 中遇到过同样的错误：`internal compiler error: in make_thunk, at cp/method.c:129`

我认为没有必要包含示例代码。相应的代码在其他几个较新的 g++ 版本以及 clang++ 上编译时不会出现警告和错误。这是正确的，并且在 GCC 的 bugzilla 中提到了该错误（甚至多次，因为它似乎经常重复出现），但没有提供解决方法。

请不要告诉也使用更新的 g++。我**必须**在 Ubuntu Hardy 附带的 g++ 上编译它，所以我无法更改编译器。主要开发是在 Ubuntu Precise 上完成的，但我需要让它与 Hardy 兼容。

我不知道 thunk 应该是什么，我只怀疑它与协变和/或多重继承有关。此外，我还有几个类似的结构化头文件，它们都编译得很好，尽管唯一的变化是名称是类的名称，我没有目标，因为 Hardy 上的编译器错误而改变它。

另一个事实是，它发生在包含时间。

```
In file included from /home/heiko/hgl/src/compiler/compilerprojectfactory.cpp:18:
/home/heiko/hgl/src/compiler/compilertype.h: In instantiation of 'HGL::Compiler::CompilerType<HGL::Vector2D, HGL::Compiler::CompilerBase>':
/home/heiko/hgl/src/compiler/compilervector2d.h:23: instantiated from here
/home/heiko/hgl/src/compiler/compilertype.h:22: internal compiler error: in make_thunk, at cp/method.c:129
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://gcc.gnu.org/bugs.html> for instructions.
For Debian GNU/Linux specific bug reporting instructions,
see <URL:file:///usr/share/doc/gcc-4.2/README.Bug 
```

编辑：这里是导致错误的标题：

```
#include "compilertype.h"
#include "vector2d.h"

namespace HGL {

class Vector2D;

namespace Compiler {

/**
    @author Heiko Schäfer <heiko@rangun.de>
*/
class _LOCAL Vector2D : public Compiler::CompilerType<HGL::Vector2D> {
    DISALLOW_COPY_AND_ASSIGN(Vector2D)
public:
    Vector2D(float x, float y, int line);

    using IType::operator=;

    virtual operator HGL::Vector2D &() const throw(InvalidExpressionException);
protected:
    virtual ~Vector2D();

    void append(ISerializeable::BUFFER *dest, const HGL::IType *type) const;
};

}

} 
```

这里的模板：

```
#include "compilerbase.h"
#include "iproject.h"
#include "util.h"

namespace HGL {

namespace Compiler {

const IProject::VSTRUCT minReq = { HGL_MINREQ_MAJOR, HGL_MINREQ_MAJOR, HGL_MINREQ_MAJOR };

template<class Type, class Base = CompilerBase>
class _LOCAL CompilerType : public Type, public Base {
    DISALLOW_COPY_AND_ASSIGN(CompilerType)
public:
    using IType::operator=;

    template<class Param>
    inline CompilerType(const Param &p, bool b, int line,
                        const IProject::VSTRUCT &vs = IProject::VSTRUCT()) :
        Type(p), Base(line, b) {
        init(vs);
    }

    template<class Param>
    inline CompilerType(const Param &p, int line,
                        const IProject::VSTRUCT &vs = IProject::VSTRUCT()) : Type(p), Base(line) {
        init(vs);
    }

    inline CompilerType(bool b, int line, const IProject::VSTRUCT &vs = IProject::VSTRUCT())
        : Type(), Base(line, b) {
        init(vs);
    }

    template<class Param1, class Param2>
    inline CompilerType(const Param1 &p1, const Param2 &p2, int line,
                        const IProject::VSTRUCT &vs = IProject::VSTRUCT()) :
        Type(p1, p2), Base(line) {
        init(vs);
    }

    template<class Param1, class Param2>
    inline CompilerType(const Param1 &p1, const Param2 &p2, bool b, int line,
                        const IProject::VSTRUCT &vs = IProject::VSTRUCT()) : Type(p1, p2),
        Base(line, b) {
        init(vs);
    }

    inline CompilerType(int line,
                        const IProject::VSTRUCT &vs = IProject::VSTRUCT()) : Type(), Base(line) {
        init(vs);
    }

    inline virtual void append(ISerializeable::BUFFER *dest, const IType *type) const {
        Base::append(dest, type);
    }

protected:
    inline virtual ~CompilerType() {}

    inline virtual void init(const IProject::VSTRUCT &vs) {
        const_cast<IProject::VSTRUCT &>(vs) = std::max(vs, minReq);
        CompilerBase::setMinRequiredVersion(vs, Type::getSerialID());
    }

};

}

} 
```

**解决！**

在挖掘 g++ 4.2 的源代码后，我发现它现在需要完整树中的所有类型。g++ > 4.2 显然不需要这个。

因此，错误出现在一个相关类中，该类具有一个具有转发专业化的模板成员。我只是包含了标题而不是转发，g++ 4.2 很高兴。

否则，不给出错误确实是一个不好的错误，但是这个无用的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:13:42.490

*thunk*或*trampoline*是在动态调度的某些实现中添加的一段代码，以根据正在使用的最终覆盖器调整基本虚函数的接口。正如您所提到的，通常需要`this`在多重/虚拟继承中调整指针（对于在第一个非空继承之后列出的基），并使用协变返回类型调整生成的指针/引用。

该错误表明它是一个编译器错误。如果您必须使用该特定编译器，您将需要解决该问题，这将涉及更改您的设计。您可以尝试限制多重/虚拟继承的使用，重新排序列表中的基数或尝试玩弄直到您设法让编译器以某种方式消化该代码。如果在为协变返回类型生成适配器时出现问题，请考虑删除协变返回并提供将返回协变类型的重载（使用不同的名称）（即用返回最多的非虚函数替换协变返回派生类型和一个调用前一个并返回对基类的引用的虚函数）。

除了那些通用提示之外，没有看到您拥有的代码和编译器的实现，没有什么可说的。

# excel - 从excel中另一个单元格中的文本创建超链接

> ID：15484468
> 
> 赞同：-1
> 
> 时间：2013-03-18T18:45:11.503
> 
> 标签：excel, vba, hyperlink

我正在尝试将超链接 (a href="url/category/ ***H5*** ")text(/a) 添加到引用***H5的单元格******B5***的开头。我认为 VBA 宏可能是最好的方法，但如果它可以使用也可以使用的公式来完成。我的 VBA 不是很好。:D 如果您能提供帮助，请提前致谢！

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:41:45.173

```
' here is the code that cn create hyperlink for you question. 
'  
Dim rng As Range

Set rng = ActiveSheet.Range("B5")

rng.Parent.Hyperlinks.Add Anchor:=rng, Address:="", SubAddress:= _
        "H5", TextToDisplay:="this is long text" 
```*

# android - Android HttpResponse - 在模拟器中工作但在设备中不工作

> ID：15484474
> 
> 赞同：0
> 
> 时间：2013-03-18T18:45:28.927
> 
> 标签：android, httpresponse

我是 Android 编程的新手。我正在尝试连接并从链接获取响应，例如：[https ://stackoverflow.com/](https://stackoverflow.com/)

我曾经`HttpResponse`获取响应，然后使用`EntityUtils.toString(rp.getEntity())`函数将响应转换为字符串。我的代码在模拟器中运行完美，但是当我尝试在真实设备（即三星 Galaxy Tab 7.0）中运行项目时，它没有运行并显示“不幸的是，......已停止”。

任何人都可以让我知道为什么会发生这种情况以及解决方案是什么？代码如下：

```
 public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView txt = (TextView) findViewById(R.id.textView1);
        String pageStr = "***";

        try
        {
            HttpClient hc = new DefaultHttpClient();
            HttpPost post = new HttpPost("https://stackoverflow.com/");

            HttpResponse rp = hc.execute(post);

            if(rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK)
            {
                pageStr = EntityUtils.toString(rp.getEntity());
            }
            else
            {
                Toast.makeText(getApplicationContext(), "Failed!!", Toast.LENGTH_LONG).show();
            }
        }catch(IOException e){
            e.printStackTrace();
        }  

        txt.setText(pageStr);

    }
} 
```

我在`manifest`文件中使用了以下权限：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

任何有关此问题的帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:50:23.217

它不起作用，因为您试图在 UI 线程中访问互联网。

阅读以下链接，它说明[了如何在单独的（非 UI）线程中使用互联网](http://www.android-ever.com/2012/10/android-asynctask-example.html)。

# javascript - 离开 jquery 移动页面时停止视频播放

> ID：15484475
> 
> 赞同：0
> 
> 时间：2013-03-18T18:45:29.877
> 
> 标签：javascript, html, jquery-mobile

因此，我有一个带有 html 5 视频的 jquery 移动页面，我希望能够停止播放并重置其自身，或者只是自动暂停视频。这会是正确的javascript吗？

```
<script>

function restart() {
        var video = document.getElementById("Video1");
        video.currentTime = 0;}

    if ($.mobile.activePage.attr('id') != 'a28') { "restart"}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:10:10.863

您是否尝试过 pagehide ，当当前活动页面被隐藏/更改时，它会被调用。

```
$(function(){
     $('#a28').live('pagehide',function(){
        //stop the video
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:01:46.520

利用循环来检查用户是否在网页上。存储时间。

```
var lastSeen;
var loop = function (){
    lastSeen = Date.now();
    setTimeout(loop, 50);
};
loop();

var video = document.getElementById('Video1');
video.addEventListener('timeupdate', function (){
    if(Date.now() - lastSeen > 100){
        this.pause();
    }
}, false); 
```

# c - C程序数组位置

> ID：15484478
> 
> 赞同：1
> 
> 时间：2013-03-18T18:45:40.480
> 
> 标签：c

为什么下面的 C 程序返回 4`(a+4)`和 1的减法`(a+1)`？

```
 #include<stdio.h>
     int main()
     {

      int a[3][2]={1,2,
                   5,7,
                   6,8};

      printf("\n%d",(a+4)-(a+1));
      return 0;} 
```

此外，当我用加法 (a+4)+(a+1) 替换减法运算符时，它给出

```
error: invalid operands to binary + (have ‘int (*)[2]’ and ‘int (*)[2]’) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:51:40.090

请注意，这`a`是一个数组，当单独使用时会降级为指针（即内存地址）。这意味着`(a+4)`和`(a+1)`也是内存地址。减去内存地址是有意义的，因为您正在计算两个地址之间的距离。但是，添加内存地址是无稽之谈。

我不确定你想在这里做什么，所以我无法提出解决问题的解决方案。请随时编辑您的问题并提供更多详细信息，以便我们为您提供进一步帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:54:33.780

我运行了您的代码并得到了 3 作为差异，这是有道理的：a + 4 - (a + 1) = 3。

关于错误，我相信 C 不允许您添加两个内存地址作为保护措施。正如我在之前的评论中指出的那样，这样做完全是荒谬的。然而，从另一个内存地址中减去一个内存地址在某些情况下会为您提供一些有用的信息（内存中两个位置之间的偏移量）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T19:09:25.920

你有一个语法错误。您使用 a 作为单个整数，但 a 的数据类型是整数数组。因此，例如减法将是：a[1][3]-a[0][3]，此处的值等于 3。

（对于您的信息，该数组实际上看起来像 a={1,2,5 7,6,8} 它有 3 行和 2 列。

# sql - 在 Eclipse 中为 Derby 10.9 更新 JDBC 驱动程序

> ID：15484480
> 
> 赞同：0
> 
> 时间：2013-03-18T18:45:48.730
> 
> 标签：sql, eclipse, jakarta-ee, jdbc, derby

所以我现在遇到了一个问题......我需要你的帮助。我正在尝试在 Eclipse 中设置 Derby JDBC 驱动程序。我下载的 Derby 驱动程序是 10.9，但 Eclipse 中的驱动程序显示它是“系统版本 10.2”。

我去了 Window -> Preferences, Data Management, Connectivity, Driver Definition，然后创建了一个新的。我选择了最新版本的 Derby Embedded JDBC Driver，即 10.2。然后我将 derby.jar 文件包含在 JAR 列表中，然后单击确定。

然后，再次在 Eclipse 中，我转到“Data Source Explorer”，然后右键单击 Database Connections -> New... 我选择 Derby，然后选择我刚刚使用的驱动程序，添加一个用户/密码，然后单击 Finish。

它可以很好地创建数据库...但是当我使用以下代码时出现错误：

```
String host = "jdbc:derby:C:\\Users\\Samson\\MyDB;create=true";
String user = "admin";
String pass = "admin";
try {
    java.sql.Connection conn = DriverManager.getConnection(host, user, pass);
} catch (SQLException e) {
    e.printStackTrace();
} 
```

错误是：

ERROR XSLAN: Database at C:\Users\Samson\MyDB 的格式与当前版本的软件不兼容。该数据库由版本 10.9 创建或升级。

因此，出于某种原因，它似乎正在尝试使用 10.2 驱动程序连接到这个 10.9 数据库，但我不知道我做错了什么。有任何想法吗？谢谢！！

编辑：好的，如果有帮助的话，上面的代码将放在 Java Servlet 中。我创建了一个名为“DBConnect”的新项目，并将 derby 的库放在其中，并创建了一个简单的程序来连接到 DB，它工作得很好。所以它与我的Servlet有关。

Edit2：没有什么比在 StackOverflow 上的第一篇文章中成为白痴更重要的了。我必须更新 Geronimo 中的 Derby 驱动程序，因为它只使用 10.2 而不是 10.9。

Edit3：在我的工作电脑上，它给了我同样的问题。出于某种原因，每当我创建一个常规 Java 项目时，它都可以正常工作，但是每当我尝试使用 Java Servlet 连接到该数据库时，我仍然会收到错误消息。如果有人有任何建议，我愿意接受。

Edit4：看起来 Geronimo 安装使用的是 10.8.2.2_1，但我仍然不知道如何实际更新它。打算现在尝试下载 10.8 驱动程序，稍后再处理。

Edit5：是的，由于某种原因，我似乎无法真正使用 Eclipse 中的数据源资源管理器。我安装了 10.8.2.2_1，我可以让我的 servlet 保存/从数据库中读取，但是当我尝试使用数据源资源管理器进行连接时，它甚至没有显示我创建的表。

Edit6：叹息......事实上，10.8 确实有效。我只是没有在正确的架构中寻找。我觉得自己像个白痴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:27:54.230

我继续安装了 derby 10.8 而不是 10.9，现在它似乎工作得很好。Geronimo 设置为使用 10.8 而不是 10.9。

# android - 如何使用 Android 自定义键盘在 1 次点击中键入 2 个字符

> ID：15484482
> 
> 赞同：3
> 
> 时间：2013-03-18T18:45:51.117
> 
> 标签：android, unicode, keyboard

所以我正在做我自己的 Android 键盘，我正在使用 SoftKeyboard 示例。

我想用我自己的键“ks”写“ks”所以“k”的unicode是107，“s”的unicode是115

```
<Key android:codes="107" android:keyLabel="ks"/> 
```

我找不到办法 `android:codes="107"+"115"`，逗号不是解决方案，因为如果是第一个或第二个字母。

我没有找到来自 unicode（[http://en.wikipedia.org/wiki/List_of_Unicode_characters](http://en.wikipedia.org/wiki/List_of_Unicode_characters)）的字母“ks”。

感谢您花时间阅读我，我希望有一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:45:16.227

知道了 ！`android:keyOutputText="ks"`我希望它会帮助某人:) 见[http://developer.android.com/reference/android/inputmethodservice/Keyboard.Key.html#attr_android:keyOutputText](http://developer.android.com/reference/android/inputmethodservice/Keyboard.Key.html#attr_android%3akeyOutputText)

# c# - 在 MVC4 中，如何将文件（图像）上传到属于我的域模型的 SQL Server？

> ID：15484483
> 
> 赞同：5
> 
> 时间：2013-03-18T18:45:53.213
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc, file-upload

我对 MVC 比较陌生，而且我从来不需要处理将文件（特别是图像）上传到 SQL Server 数据库的问题。老实说，我不知道我在这里做什么。

这是我到目前为止所拥有的 - 这是我的域模型（注意`HttpPostedFileBase`我的模型中的 - 这是我要上传的）：

```
public class Profile
{
    [Key]
    public int Id { get; set; }

    [Required(ErrorMessage="Years of service is required")]
    [DisplayName("Years Service:")]
    public int YearsService { get; set; }

    [DataType(DataType.MultilineText)]
    [DisplayName("Notable Achivements:")]
    public string NotableAchivements { get; set; }

    [Required(ErrorMessage = "Technical skills are required")]
    [DataType(DataType.MultilineText)]
    [DisplayName("Technical Skills:")]
    public string TechnicalSkills { get; set; }

    [DisplayName("Upload Image: ")]
    public HttpPostedFileBase Photo { get; set; }

    public string CreatedBy { get; set; }
    public DateTime CreatedDate { get; set; }
    public string ModifiedBy { get; set; }
    public DateTime ModifiedDate { get; set; }
} 
```

这是我的观点：

```
@using (Html.BeginForm("Create", "Profiles", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
<div class="editor-label">
    @Html.LabelFor(model => model.YearsService)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.YearsService)
    @Html.ValidationMessageFor(model => model.YearsService)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.NotableAchivements)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.NotableAchivements)
    @Html.ValidationMessageFor(model => model.NotableAchivements)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.TechnicalSkills)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.TechnicalSkills)
    @Html.ValidationMessageFor(model => model.TechnicalSkills)
</div>

<input type="file" name="photo" />
<input type="submit" name="Submit" id="Submit" value="Upload" />
} 
```

我希望有一些明显的事情表明我做错了。谁能提供有关如何将简单的文件上传到 SQL Server 数据库的建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T20:04:35.760

首先，不要将图像保存到数据库中。网上有无数“指南”建议在 MSSQL 中使用字节数组或“图像”类型。数据库不适用于二进制数据存储。当然，它们会容纳二进制存储，但仅仅因为你*可以*用 AR-15 射击自己的脚，并不意味着你*应该*这样做。

相反，将图像存储在它所属的位置：文件系统。然后，只需引用它在数据库中的路径。

现在，处理这一切的最简单方法是使用视图模型。如果您还没有使用视图模型，那么现在是开始的好时机。通常，您不想将实际的数据库支持模型直接发送到视图。在表单中，恶意用户可能会进行各种令人讨厌的数据篡改，即使在简单的视图中，您通常传递的数据也超出了他们的需要。

因此，第一步是为`Profile`. 通常将其命名为`ProfileViewModel`or `ProfileVM`。然后，在此模型上，您将只添加`Profile`您将在视图中编辑或以其他方式与之交互的属性。然后，您实际上可以为特殊用途的视图函数添加*不在*数据库支持的模型上的其他属性，例如`SelectList`使用 with `DropDownListFor`，因此您实际上可以保持强类型，而不是诉诸`ViewBag`此类事情。

对于您的图像，您需要两个字段。我通常会使用以下内容：

```
public string Photo { get; set; }
public HttpPostedFileBase PhotoUpload { get; set; } 
```

在您的编辑/创建视图中，您只会引用`PhotoUpload`，这将是您的文件上传字段（尽管您也可以使用它`Photo`来显示当前设置的图像，如果您愿意的话）。

```
@Html.TextBoxFor(m => m.PhotoUpload, new { type = "file" }) 
```

然后，在控制器操作中处理发布的文件：

```
if (model.PhotoUpload.ContentLength > 0) {
    // A file was uploaded
    var fileName = Path.GetFileName(model.PhotoUpload.FileName);
    var path = Path.Combine(Server.MapPath(uploadPath), fileName);
    model.PhotoUpload.SaveAs(path);
    model.Photo = uploadPath + fileName;
} 
```

where`uploadPath`应该是您要存储上传图像的主目录相对路径，例如`~/uploads/profile/photos`. 确保在尝试发布表单之前创建目录，或者添加一些逻辑来检查目录是否存在并在必要时创建它（但这需要对服务器更高的信任，因此在大多数安全性较高的环境中并不理想一个大问题）。

然后，您只需要某种方法将视图模型中的数据映射回数据库支持的模型。您可以手动执行此操作，但使用 AutoMapper 之类的工具会让您的生活更轻松。使用自动映射器（其中`model`的一个实例`ProfileViewModel`）：

```
var profile = AutoMapper.Mapper.Map<Profile>(model); 
```

或者，由于使用配置文件之类的东西，编辑现有模型比创建新模型更常见：

```
var profile = db.Profiles.Find(userId);
...
Automapper.Mapper.Map(model, profile); 
```

那么，在您的实际模型上，您将没有该`PhotoUpload`属性，只是`Photo`. 您在视图模型上设置的路径`Photo`将映射到模型的同名属性，因此剩下的就是保存更新的配置文件。

此外，由于您正在谈论上传照片，您可能需要添加一些内容类型检查，以确保用户上传的是图像，而不是像 Word 文档这样愚蠢的东西。在`if (ModelState.IsValid)`检查之前，添加：

```
var validTypes = new[] { "image/jpeg", "image/pjpeg", "image/png", "image/gif" };
if (!validTypes.Contains(model.PhotoUpload.ContentType))
{
    ModelState.AddModelError("PhotoUpload", "Please upload either a JPG, GIF, or PNG image.");
} 
```

根据需要更改 MIME 类型以匹配您的业务案例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:58:24.327

当我学习的时候，我用[这个](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)和[这个](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)来开始上传文件。

我还建议在您的模型中将属性 Photo 设置为 byte[] 或类似的属性，以便更好地保存回您的数据库（我假设您使用的是 LINQ to SQL 或实体框架之类的东西）。

按照上述链接，我建议通过以下方式在您的控制器方法中处理上传：

1.  在您的控制器方法中有一个 HttpPostedFileBase 类型的参数并将其称为“照片”（因此它将从您的文件输入字段称为“照片”的视图中绑定）
2.  在您的控制器方法中，检查参数是否为空，如果不是，您可以通过 HttpPostedFileBase 的 InputStream 属性将文件读入 MemoryStream 之类的东西
3.  从 MemoryStream 中，您可以通过 ToArray() 方法获取 byte[]
4.  将 byte[] 插入模型，然后将其保存到数据库

另外，记得在完成后处理 MemoryStream

我确信有更好的方法，但这些方法一直对我有用:-)

HTH，弥敦道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T07:38:40.790

在我的应用程序中，我将图像作为 base64string，因此，nvarchar(max) 是我使用的数据类型。这样做的好处是您可以将 JSON 对象中的 based64String 图像从网站传递或传递给网站。

将图像转换为 based64string

```
public static string ToBased64String(this Image image, ImageFormat format)
{
  using (MemoryStream ms = new MemoryStream())
  {
    image.Save(ms, format);
    byte[] imageBytes = ms.ToArray();
    string based64String = Convert.ToBased64String(imageBytes);
    return based64String;

  }
} 
```

然后你可以像这样调用你的方法

```
image.ToBased64String 
```

将 based64String 转换为图像

```
public static ImageFromBased64String(string based64Image, string path)
{
  Image image = null;
  var bytes = Convert.FromBased64String(based64String);
  using (var fileStream = new FileStream(path, FileMode.Create))
  {
    fileStream.Write(bytes, 0, bytes.Length);
    fileStream.Flush();
    image = Image.FromStream(fileStream, true);
    return image;
  }
} 
```

请在此处参考我的回答

[https://stackoverflow.com/a/30057680/1554116](https://stackoverflow.com/a/30057680/1554116)

# hibernate - 集成测试期间约束上的 Grails null id 错误

> ID：15484484
> 
> 赞同：5
> 
> 时间：2013-03-18T18:45:56.017
> 
> 标签：hibernate, grails, constraints, integration-testing, grails-2.2

圣杯 2.2.0

我正在尝试创建一个自定义约束来强制用户只有一封主电子邮件。这是导致错误的简化代码：

用户域类

```
class User {

    static hasMany = [emails: Email]

    static constraints = {
    }
} 
```

电子邮件域类

```
class Email {

    static belongsTo = [user: User]
    String emailAddress
    Boolean isMaster

    static constraints = {

        emailAddress unique: ['user']
        isMaster validator: { val, obj ->
            return !val || Email.findByUserAndIsMaster(obj.user, true) == null
        }

    }
} 
```

集成测试

```
class EmailTests {

    @Before
    void setUp() {

    }

    @After
    void tearDown() {
        // Tear down logic here
    }

    @Test
    void testSomething() {
        def john = (new User(login: 'johnDoe')).save(failOnError: true, flush: true)
        assert (new Email(emailAddress: 'john@gmail.com', user: john, isMaster: true)).save(failOnError: true)
    }
} 
```

运行“grails test-app -integration”会导致：

> | 失败：testSomething(webapp.EmailTests)
> | org.hibernate.AssertionFailure: org.grails.datastore.gorm.GormStaticApi$_methodMissing_closure2.doCall(GormStaticApi.groovy:105) 的 webapp.Email 条目中的空 id（发生异常后不刷新会话）webapp.Email $__clinit__closure1_closure2.doCall(Email.groovy:13) at org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener.onApplicationEvent(AbstractPersistenceEventListener.java:46) at webapp.EmailTests.testSomething(EmailTests.groovy:21)

如果我将唯一约束更改为自定义约束之后，则不会发生问题。这里发生了什么？我想了解这里的任何相关约束的顺序如何？

需要明确的是，这不会导致问题：

```
static constraints = {
        isMaster validator: { val, obj ->
            return !val || Email.findByUserAndIsMaster(obj.user, true) == null
        }
        emailAddress unique: ['user']
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T06:53:06.490

我想我明白了……一对多的关系被打破了。

## 让我解释

*   测试中的第一行创建`User john`被保存和刷新的。
*   第二行创建一个`Email`并将 john 设置为用户属性。

一旦你尝试保存`Email`实例，GORM 就会抱怨。那是因为您将 john 分配给`Email`which 是关系的反面。拥有方并没有意识到这一点，并且在这一点上什么也没有。简单的说。**在添加到用户之前，您无法保存和通过电子邮件发送实例。**

这是一个应该有效的测试方法。

```
void testSomething() {
   def john = new User(login: 'johnDoe')

   john.addToEmails(new Email(emailAddress: 'john@gmail.com', isMaster: true))
   john.save(flush:true)

   assert false == john.errors.hasErrors()
   assert 1 == john.emails.size()  
} 
```

该`addToEmails()`方法将电子邮件实例添加到集合中，并将用户设置在关系的反面。现在关系已经满足，保存 john 也应该保存所有电子邮件。

* * *

## 另一条路线

由于问题似乎是对`Email`验证器中用户实例的引用，我虽然可能还有另一条路线可以采取。

```
class User {
    static hasOne = [master: Email]
    static hasMany = [emails: Email]
} 
```

这将消除对有问题的验证器的需求，这使您`Email`根据`User`验证进行分类。您可以让用户对他拥有哪些电子邮件地址以及应该应用哪些规则负责。您可以添加验证器来`User`验证您是否拥有电子邮件列表中不存在的主地址，并验证分配的所有地址是否都是唯一的。例如：

```
static constraints = {
    master validator: { master, user, errors ->
        if (master.emailAddress in user.emails*.emailAddress) {
            errors.rejectValue('master', 'error.master', 'Master already in e-mails')
            return false
        }
    }

    emails validator: { emails, user, errors ->
        def addresses = emails*.emailAddress
        if (!addresses.equals(emails*.emailAddress.unique())) {
            errors.rejectValue('emails', 'error.emails', 'Non unique e-mail')
            return false
        }
    }
} 
```

我做了一些测试，他们以这种方式做得很好。

# node.js - MapReduce 中的 MongoDB 动态变量

> ID：15484486
> 
> 赞同：4
> 
> 时间：2013-03-18T18:46:01.490
> 
> 标签：node.js, mongodb, mapreduce

我有用于 mongodb mapreduce 的 node.js 路由器：

```
app.get('/api/facets/:collection/:groupby', function(req, res) {
    var collection = db.collection(req.params.collection);
    var groupby = req.params.groupby;
    var map = function() {
      if (!this.region) {
        return;
      }
      for (index in this.region) {
        emit(this.region[index], 1);
      }
    }
    var reduce = function(previous, current) {
      var count = 0;

      for (index in current) {
        count += current[index];
      }
      return count;
    }
    var options = {out: groupby + '_facets'};
    collection.mapReduce(map, reduce, options, function (err, collection) {
    collection.find(function (err, cursor) {
        cursor.toArray(function (err, results) {
                res.send(results);
            });            
    })
    })
}); 
```

这很好用。但我想使用我的`groupby`参数。当我尝试做这样的事情时：

```
 var map = function() {
    if (!this[groupby]) {
            return;
        }
    for (index in this[groupby]) {
            emit(this[groupby][index], 1);
        }
  } 
```

我收到`TypeError: Cannot call method 'find' of undefined`。有没有办法创建这样的动态 mapreduce 函数？

谢谢。

**编辑：**

哇！我自己做。只需`scope`像这样将参数传递给 mapreduce 参数`scope:{keys: groupby}`，然后我就可以`var key = this[keys]`在 map 函数内部进行操作并改用`key`变量`this.region`。伟大的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:01:44.130

哇！我自己解决了。我刚刚将一个范围参数传递给 mapreduce 参数。

```
scope:{keys: groupby} 
```

然后我能够做到

```
var key = this[keys] 
```

在 map 函数内部并使用 key 变量而不是 this.region。伟大的！

# python - 无法删除换行符

> ID：15484494
> 
> 赞同：2
> 
> 时间：2013-03-18T18:46:22.920
> 
> 标签：python, string, file, formatting, text-files

我一直在尝试用 python 重写一个文本文件，在那里我进入一个文件，抓取每一行，在该行上附加一个额外的字符串，然后将新附加的行重写到文本文件中。我遇到的问题是这个新构建的文本文件格式不正确。该文件包含行，其中每行包含三个数字，以逗号分隔。如果我的文件如下所示：

```
57.88, 58.45, 45.31
57.88, 58.45, 45.31
57.88, 58.45, 45.31 
```

我想将字符“a”添加到行中，然后我需要文件看起来像这样：

```
57.88, 58.45, 45.31, a
57.88, 58.45, 45.31, a
57.88, 58.45, 45.31, a 
```

相反，像这样的文件格式（当我在 emacs 和 gedit 中打开它时）

```
57.88, 58.45, 45.31
,a
57.88, 58.45, 45.31
,a
57.88, 58.45, 45,31
,a 
```

有趣的是，无论文件的格式如何，行数仍然是相同的 (3)。我对此感到非常困惑和有些沮丧。下面是我用来重写文件的代码。我的python技能真的是按需学习，所以可能有一些我没有听说过的明显的python函数需要使用。基本上，一旦我确定文件路径存在，我就会调用一个重写子例程，如下所示：

```
def getLines(filePath):
    move(filePath, filePath+"~")
    destination = open(filePath, "w")
    source = open(filePath+"~", "r")
    for line in source:
            destination.write(line.strip("\n") + ",a\n"))
    source.close()
    destination.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:58:29.563

您可以尝试不那么明确，让 strip 为跨平台解决方案完成工作

```
...
for line in source:
    destination.write(line.strip() + ",a\n")) 
```

或者试试这个，

```
for line in source.readlines()
    destination.write(line + ",a\n")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:54:42.347

如果您使用的是非 Unix 平台，则您的文件可能包含`\r\n`行终止符。尝试右剥离`\r\n`和附加`",a\r\n"`。

```
destination.write(line.rstrip("\r\n") + ",a\r\n")) 
```

即使文件仅包含`\n`行尾，这也有效，因此它很健壮。

# scala - Scala 演员和环境参考

> ID：15484498
> 
> 赞同：36
> 
> 时间：2013-03-18T18:46:28.263
> 
> 标签：scala, akka, actor

在[Phillip Haller 的博士论文](http://infoscience.epfl.ch/record/151999/files/EPFL_TH4874.pdf)（5.1 未来工作）中，他提到有趣的研究领域之一是使用环境参考扩展框架，他引用了 Van Cutsen 的论文。

摘抄：

> Scala Actors 库包括一个运行时系统，它为远程（即虚拟机间）actor 通信提供基本支持。为了提供对容错的支持（例如，在移动自组织网络中），使用支持易失连接的远程参与者引用来扩展框架会很有趣，类似于环境引用 [36]。将容错分布式编程的事务抽象（例如，[52, 142]）集成到 Scala Actors 是未来工作的另一个有趣领域。

被引论文是：

> [36] Tom Van Cutsem、Jessie Dedecker、Stijn Mostinckx、Elisa Gonzalez Boix、Theo D'Hondt 和 Wolfgang De Meuter。环境参考：移动网络中的寻址对象。[...] 第 986-997 页。ACM，2006 年 10 月。

这是阿卡做的吗？如果不是，鉴于 Akka 存在于今天，您认为研究该领域是否仍然相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-18T19:15:40.910

是的，这可以通过 Akka 实现。

据我所知，有两种方法可以实现这一目标：

1.  [akka-remote](http://doc.akka.io/docs/akka/snapshot/scala/remoting.html) - 提供远程演员参考，但您需要决定每个演员应该存在的位置。

2.  [akka-cluster](http://doc.akka.io/docs/akka/snapshot/scala/cluster-sharding.html) - 提供集群分片。自动管理 Actor 的物理位置，并确保给定的分片（Actor）最多存在于集群中的**一个节点上。**

# command-line - 命令行安装 MSI 耗时过长

> ID：15484500
> 
> 赞同：0
> 
> 时间：2013-03-18T18:46:33.487
> 
> 标签：command-line, windows-installer

由于某种原因，尝试通过命令行安装 msi 可执行文件需要太长时间或永远无法完成。该程序是未签名的 Windows 主题，可让您在 Windows 上运行不受支持的主题。它可以从这里获得：[下载](http://www.uxstyle.com/builds/UxStyle_Core_jul13_bits.zip)

我正在尝试使用以下方式安装 64 位版本：

```
start /wait "UxStyle Core x64.msi" 
```

整个批处理文件如下所示：

```
@echo off

net stop uxsms

IF "%PROCESSOR_ARCHITECTURE%" == "AMD64" call :install64
IF "%PROCESSOR_ARCHITECTURE%" == "x86" call :install32

IF ERRORLEVEL 1 goto :UxStyleErr

takeown /f "%WINDIR%\Resources\Themes\Aero\aero.msstyles" 
icacls "%WINDIR%\Resources\Themes\Aero\aero.msstyles" /grant %USERNAME%:F"
ren "%WINDIR%\Resources\Themes\Aero\aero.msstyles" aero.msstyles.original
copy /y aero.msstyles "%WINDIR%\Resources\Themes\Aero\"

net start uxsms

echo Installation completed. Press any key to reboot or close this dialog if you want to restart later.
pause
shutdown /r /t 0
goto :eof

:install64
start /wait "UxStyle Core x64.msi"
goto :eof

:install32
start /wait "UxStyle Core x86.msi"
goto :eof

:UxStyleErr
echo An error occured while installing UxStyle Core. Installation will now quit.
pause
goto :eof 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:21:03.270

请阅读：

[Msiexec（命令行选项）](http://technet.microsoft.com/en-us/library/cc759262%28v=ws.10%29.aspx)

看起来您缺少 /QB 或 /QB 开关以在没有交互的情况下运行。还可以考虑添加 REBOOT=R 以防止 MSI 执行任何意外重启。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:21:09.580

我建议不要使用 start /wait 来启动 .msi 文件，而是直接调用 msiexec.exe。您还可以生成一个日志文件，帮助您诊断问题所在。所以我会修改你的`start /wait`命令看起来像：

```
msiexec /i "UxStyle Core x64.msi" /l*v x64_installlog.txt 
```

您可以添加`/passive`或`/quiet`到命令以仅显示进度条或分别在完全没有 UI 的情况下运行。

# c++ - 如何使用递归创建四叉树复制构造函数

> ID：15484503
> 
> 赞同：1
> 
> 时间：2013-03-18T18:46:40.010
> 
> 标签：c++, tree, quadtree

我正在研究四叉树的复制构造函数。这是我到目前为止所拥有的：

```
 //Copy Constructor
    Quadtree :: Quadtree(const Quadtree & other)
    {
    root = copy(other.root);
    resolution = other.resolution;
    }

   //Copy Constructor helper function
    Quadtree::QuadtreeNode *Quadtree :: copy (const QuadtreeNode* newRoot)
    { 
    if (newRoot != NULL)
    {
        QuadtreeNode *node = new QuadtreeNode(newRoot->element);
        node->nwChild = copy(newRoot->nwChild);
        node->neChild = copy(newRoot->neChild);
        node->swChild = copy(newRoot->swChild);
        node->seChild = copy(newRoot->seChild);

        return node;    
    }
    else
        return NULL; 
     } 
```

我不确定我哪里出错了，但我收到内存泄漏，Valgrind 指出我有未初始化的值。请帮忙？

附加的是我的 buildTree 函数 - 我实际创建树的地方。我可能在这里做错了什么？

```
 void Quadtree :: buildTree (PNG const & source, int theResolution)
    {
        buildTreeHelp (root, 0, 0, theResolution, source);  
    }

   void Quadtree :: buildTreeHelp (QuadtreeNode * & newRoot, int xCoord, int yCoord, int d, PNG const & image)
    {
       if (d == 1)
       {
            RGBAPixel pixel = *image(xCoord, yCoord);
            newRoot = new QuadtreeNode(pixel);
            return; 
       }
        newRoot = new QuadtreeNode ();
        newRoot = NULL;

            buildTreeHelp(newRoot->nwChild, xCoord, yCoord, d/2, image);
        buildTreeHelp(newRoot->neChild, xCoord + d/2, yCoord, d/2, image);
        buildTreeHelp(newRoot->swChild, d/2, yCoord + d/2, d/2, image);
        buildTreeHelp(newRoot->seChild, d/2 + xCoord, d/2 + yCoord, d/2, image);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:50:40.653

我认为内存泄漏在这里：

```
 newRoot = new QuadtreeNode ();
    newRoot = NULL; 
```

您正在分配内存，然后将指针设置为`NULL`不释放内存。此外，在下一行你试图取消引用你刚刚设置为 NULL 的指针：

```
 buildTreeHelp(newRoot->nwChild, xCoord, yCoord, d/2, image); 
```

您可能会受益于使用智能指针来管理内存，而不是使用对and`std::unique_ptr`的原始调用。`new``delete`

# versioning - 在 java 7 环境中运行 java 1.5 编译程序

> ID：15484505
> 
> 赞同：0
> 
> 时间：2013-03-18T18:46:46.563
> 
> 标签：versioning, java

我有已经使用 Java 1.5 编译的代码。是否可以使用 Java 7 运行此代码而没有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:48:18.873

是的，它通常*应该*可以正常运行。当然，理论上它应该没问题 - 您很有可能会遇到行为以向后不兼容的方式发生变化的某些区域，但如果您*只*依赖文档中指定的行为，您'通常会没事的。

就 JVM 理解字节码本身而言，绝对没有问题。

# ios - 像键盘一样显示 UIPickerView，没有 UITextField

> ID：15484506
> 
> 赞同：16
> 
> 时间：2013-03-18T18:46:48.370
> 
> 标签：ios, ios6, uikit

我正在寻找一种`UIPickerView`在用户点击 a 时呈现 a 的方法`UIBarButtonItem`。想象一下表格视图结果的过滤器。

我知道我可以使用`UITextField`inputView，但事实并非如此——我只有 a`UIBarButtonItem`和 a `UITableView`。

我已经看到使用[UIActionSheet](https://github.com/TimCinel/ActionSheetPicker)，但它看起来并不自然，特别是在动画显示时。

`UIView`手动打开和关闭屏幕动画是唯一的选择吗？

该应用程序仅适用于 iOS 6+ 和 iPhone，因此我不需要与任何其他版本/习语保持兼容性。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-04-27T20:38:44.677

附加一个 UIPickerView 作为您已添加到视图中的 0 尺寸 UITextField 的 inputView。

```
let picker = UIPickerView()
picker.dataSource = self
picker.delegate = self

let dummy = UITextField(frame: .zero)
view.addSubview(dummy)

dummy.inputView = picker
dummy.becomeFirstResponder() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-12T13:35:15.563

更好的选择仍然是使用`UITextField`. 您不必在屏幕上实际显示它。只需将其放入 0x0`UIView`使其不可见，将其设置`inputView`为您的`UIPickerView`并调用`becomeFirstResponder`它以显示选择器并`resignFirstResponder`隐藏它。

`UIView`拥有一个实现所有这些以及方法的子类`UIPickerViewDelegate`很方便`UIPickerViewDataSource`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-03-13T11:20:19.987

至少对我和 Swift4 + Autolayout 解决方案来说，最干净的方法`UITextField`是添加 a`UIView`作为顶部视图/按钮的容器`UIPickerView`和 a `UIToolbar`。

如果需要，然后使用动画切换该容器视图的插入/偏移，以隐藏和取消隐藏选择器。

**特性**

```
private lazy var view_PickerContainer: UIView = {
    let view = UIView()
    view.backgroundColor = .white
    view.addSubview(self.timePicker)
    view.addSubview(self.toolbar_Picker)
    return view
}()

private lazy var timePicker: UIDatePicker = {
    let picker = UIDatePicker()
    picker.minimumDate = Date()
    picker.datePickerMode = .time
    picker.setDate(Date(), animated: true)
    return picker
}()

private let timeFormatter: DateFormatter = {
    let formatter = DateFormatter()
    formatter.dateFormat = "hh:mm a"
    return formatter
}()

private lazy var toolbar_Picker: UIToolbar = {
    let toolbar = UIToolbar()
    toolbar.barStyle = .blackTranslucent
    toolbar.barTintColor = .blueDarkText
    toolbar.tintColor = .white
    self.embedButtons(toolbar)
    return toolbar
}() 
```

我习惯`SnapKit`以编程方式布局我的视图。您可以使用`timePicker`'bounds.size 作为布局的参考。

**执行**

在 viewDidLoad()

```
 // Setup timepicker and its container.
    self.view.addSubview(self.view_PickerContainer)
    self.view_PickerContainer.snp.makeConstraints { (make) in
        make.height.equalTo(self.timePicker.bounds.size.height + 50.0)
        make.leading.trailing.equalToSuperview()
        self.constraint_PickerContainerBottom = make.bottom.equalToSuperview().inset(-500.0).constraint
    }

    self.timePicker.snp.makeConstraints { (make) in
        make.height.equalTo(self.timePicker.bounds.size.height)
        make.width.equalToSuperview()
        make.bottom.equalToSuperview()
    }

    // Add toolbar for buttons.
    self.toolbar_Picker.snp.makeConstraints { (make) in
        make.height.equalTo(40.0)
        make.top.leading.trailing.equalToSuperview()
    } 
```

**嵌入顶视图**

```
private func embedButtons(_ toolbar: UIToolbar) {
    func setupLabelBarButtonItem() -> UIBarButtonItem {
        let label = UILabel()
        label.text = "Set Alarm Time"
        label.textColor = .white
        return UIBarButtonItem(customView: label)
    }

    let todayButton = UIBarButtonItem(title: "Today", style: .plain, target: self, action: #selector(self.todayPressed(_:)))

    let doneButton = UIBarButtonItem(barButtonSystemItem: .done, target: self, action: #selector(self.donePressed(_:)))

    let flexButton = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: self, action: nil)

    toolbar.setItems([todayButton, flexButton, setupLabelBarButtonItem(), flexButton, doneButton], animated: true)
} 
```

结果如下所示：

[![在此处输入图像描述](../Images/a1ef92da45a7f3be44f40e1b9024ac01.png)](https://i.stack.imgur.com/5V7DH.gif)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-24T20:27:22.330

我接受了**borisgolovnev**关于隐形的建议，`UITextField`并提出了以下**Swift 2.3**实现：

```
import UIKit

class PickerViewPresenter: UITextField {

    // MARK: - Initialization

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    init() {
        super.init(frame: CGRect.zero)
    inputView = pickerView
    inputAccessoryView = pickerInputAccessoryView
    }

    // MARK: - Public

    var pickerDelegate: UIPickerViewDelegate? {
        didSet {
            pickerView.delegate = pickerDelegate
        }
    }

    var pickerDataSource: UIPickerViewDataSource? {
        didSet {
            pickerView.dataSource = pickerDataSource
        }
    }

    var selectButtonAction: (() -> Void)?

    var currentlySelectedRow: Int {
        return pickerView.selectedRowInComponent(0)
    }

    func selectRowAtIndex(index: Int) {
        pickerView.selectRow(index, inComponent: 0, animated: false)
    }

    func showPicker() {
        self.becomeFirstResponder()
    }

    func hidePicker() {
        self.resignFirstResponder()
    }

    // MARK: - Views

    private let pickerView = UIPickerView(frame: CGRect.zero)

    private lazy var pickerInputAccessoryView: UIView = {
        let frame = CGRect(x: 0.0, y: 0.0, width: 0.0, height: 48.0)
        let pickerInputAccessoryView = UIView(frame: frame)

        // Customize the view here

        return pickerInputAccessoryView
    }()

    func selectButtonPressed(sender: UIButton) {
        selectButtonAction?()
    }

} 
```

**然后PickerViewPresenter**可以方便地这样使用：

```
class ViewController: UIViewController, UIPickerViewDataSource, UIPickerViewDelegate {

    override func viewDidLoad() {
        super.viewDidLoad()
        view.addSubview(pickerViewPresenter)
    }

    private let dataModel = [10, 20, 30, 40, 50]

    private lazy var pickerViewPresenter: PickerViewPresenter = {
        let pickerViewPresenter = PickerViewPresenter()
        pickerViewPresenter.pickerDelegate = self
        pickerViewPresenter.pickerDataSource = self
        pickerViewPresenter.selectButtonAction = { [weak self] () -> Void in
            guard let strongSelf = self else {
                return
            }
            let result = strongSelf.dataModel[pickerViewPresenter.currentlySelectedRow]
            pickerViewPresenter.hidePicker()
            // ...
        }

        return pickerViewPresenter
    }()

    private func presentPickerView {
        let index = 0 // [0..dataModel.count-1]
        pickerViewPresenter.selectRowAtIndex(index)
        pickerViewPresenter.showPicker()
    }

    // MARK: - UIPickerViewDataSource

    func numberOfComponentsInPickerView(pickerView: UIPickerView) -> Int {
        return 1
    }

    func pickerView(pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int {
        return dataModel.count
    }

    // MARK: - UIPickerViewDelegate

    func pickerView(pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int) -> String? {
        return "\(dataModel[row]) drunken sailors"
    }

} 
```

希望有人觉得这很有用=）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-18T18:53:10.890

它可能不是您唯一的选择，但为 UIPickerView 设置动画应该相对容易。添加选择器视图，使其显示在屏幕底部。何时将其设置为动画：

```
[UIView animateWithDuration:0.3 animations:^{
    self.datePicker.frame = CGRectMake(0, self.view.bounds.size.height - datePicker.bounds.size.height, datePicker.bounds.size.width, datePicker.bounds.size.height);
}]; 
```

当需要隐藏它时：

```
[UIView animateWithDuration:0.3 animations:^{
    self.datePicker.frame = CGRectMake(0, self.view.bounds.size.height, datePicker.bounds.size.width, datePicker.bounds.size.height);
}]; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-04-27T09:36:25.263

根据[borisgolovnev 的建议](https://stackoverflow.com/a/31368333/5569272)和[CodeMonkey 的回答](https://stackoverflow.com/a/36209431/5569272)，我在**Swift 5**`UITextField`中以以下方式实现了一个不可见的想法。

 **```
import UIKit

class PickerViewPresenter: UITextField, UIPickerViewDataSource, UIPickerViewDelegate {
    private lazy var doneToolbar: UIToolbar = {
        let toolbar = UIToolbar(frame: CGRect(x: 0, y: 0, width: UIScreen.main.bounds.width, height: 50))

        let flexSpace = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: nil, action: nil)
        let doneButton = UIBarButtonItem(barButtonSystemItem: .done, target: self, action: #selector(doneButtonTapped))

        let items = [flexSpace, doneButton]
        toolbar.items = items
        toolbar.sizeToFit()

        return toolbar
    }()

    private lazy var pickerView: UIPickerView = {
        let pickerView = UIPickerView()
        pickerView.dataSource = self
        pickerView.delegate = self
        return pickerView
    }()

    var items: [Item] = []
    var didSelectItem: ((Item) -> Void)?

    private var selectedItem: Item?

    init() {
        super.init(frame: .zero)
        setupView()
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    private func setupView() {
        inputView = pickerView
        inputAccessoryView = doneToolbar
    }

    @objc private func doneButtonTapped() {
        if let selectedItem = selectedItem {
            didSelectItem?(selectedItem)
        }
        resignFirstResponder()
    }

    func showPicker() {
        becomeFirstResponder()
    }

    func numberOfComponents(in pickerView: UIPickerView) -> Int {
        return 1
    }

    func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int {
        return items.count
    }

    func pickerView(_ pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int) -> String? {
        return items[row].name
    }

    func pickerView(_ pickerView: UIPickerView, didSelectRow row: Int, inComponent component: Int) {
        selectedItem = items[row]
    }
} 
```

ViewController 中的用法：

```
private var selectedItem: Item?

private lazy var pickerViewPresenter: PickerViewPresenter = {
    let pickerViewPresenter = PickerViewPresenter()
    pickerViewPresenter.didSelectItem = { [weak self] item in
        self?.selectedItem = item
    }
    return pickerViewPresenter
}()

view.addSubview(pickerViewPresenter)

// e.g. on a button tap
@objc private func buttonTapped() {
    pickerViewPresenter.showPicker()
} 
```

**例子：**

我已将其附加到`UITapGestureRecognizer`.

[![例子](../Images/92c8a4ef72be994933f7137fb0d11751.png)](https://i.stack.imgur.com/QIuvo.gif)**

# mysql - 从电话号码条目中选择区号

> ID：15484507
> 
> 赞同：2
> 
> 时间：2013-03-18T18:46:50.627
> 
> 标签：mysql, database, select

我只想从由电话号码填充的列条目列表中选择区号。这就是我所拥有的：

```
SELECT LEFT(phone, 3) AS areacode, COUNT(phone) AS count 
FROM registration 
GROUP BY areacode; 
```

问题是，条目不一致。因此，一些电话号码以 +123-456-7899 开头，而另一些则以 (123)-456-7899 开头，而另一些则以没有符号开头。

所以我的问题是：有没有办法可以确保 SELECT LEFT 从第一个*整数*开始？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:53:06.323

有些事情是 SQL 不适合的。这是一。我会将电话号码选择成一个字符串，并在您选择的编程语言中进行一些模式匹配以查找区号。

-或者-

更改您的表格，使区号是不同的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:59:57.730

两个选项（都不是 SQL）：

1.  选择所有电话号码并使用您选择的编程语言以编程方式去除不必要的字符。
2.  在将输入插入数据库*之前*清理输入以去除所有不必要的字符

SQL 不是做到这一点的最佳方式，而是 SQL + 编程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T05:44:28.983

实际上，在 SQL 中，有一种专门为此目的而设计的方法。

从联系人中选择 SUBSTRING(office_phone_number, 1, 3)；

当然，这取决于数字在表中的存储方式。如果存在括号，则您的起始位置将关闭。

以下是更多信息： [MySQL 子字符串函数](http://www.w3resource.com/mysql/string-functions/mysql-substring-function.php)

# entity-framework - LINQ to Entities 不支持 LINQ 表达式节点类型“ArrayIndex”。但受 linq-to-sql 支持

> ID：15484508
> 
> 赞同：6
> 
> 时间：2013-03-18T18:46:52.787
> 
> 标签：entity-framework, linq-to-sql, linq-to-entities

一个项目刚刚从 linq-to-sql 切换到 linq-to-entities，现在我得到了错误

```
The LINQ expression node type 'ArrayIndex' is not supported in LINQ to Entities. 
```

对于这一行：

```
var a = db.Table.Single(d => d.Date == dates[0]); 
```

（在这种特殊情况下修复它很容易，如

```
var firstDate = dates[0];
var a = db.Table.Single(d => d.Date == firstDate); 
```

)

但是为什么这在 linq-to-sql 中有效，但在 linq-to-entities 中无效？他们是否使 linq-to-entities 比 linq-to-sql 更糟糕？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-31T19:48:53.757

那是因为 L2E 只是尝试将您的查询转换为 sql 命令。因此，任何额外的东西（像 .ToString() 这样的方法，以及其他不能转换为 SQL 的东西）都会导致该异常。

然而，像 linq to objects 这样的 L2S 实现了 IEnumerable。因此，它们的目标是不同的：L2E 将 linq 查询转换为 sql 命令，L2O 用于处理内存中的 IEnumerable 对象，而 L2S 用于建模和处理数据库。

现在，如果希望能够在 EF 项目中使用 L2S 查询（使用 L2E），则应首先将从 DbContext 检索到的数据转换为 IEnumerable：

```
var a = db.Table.AsEnumerable().Single(d => d.Date == dates[0]); 
// or any other methods... 
```

# c++ - 在 C/C++ 中跟踪动态内存分配

> ID：15484518
> 
> 赞同：0
> 
> 时间：2013-03-18T18:47:26.873
> 
> 标签：c++, c, memory-management

在 c 或 c++ 中，有没有办法跟踪动态分配的内存。说我有这样的代码

```
void somefunction(some arguments,long mc){
//allocate b bytes of memory using malloc,calloc or new
mc += b;

//allocate once again, say p bytes
mc += p;

//deallocate q bytes using delete or free()
mc -= q;

print "mc bytes allocated at this point";

} 
```

可以将 mc 声明为全局并在所有函数中使用它。问题是当内存被释放时，没有办法知道刚刚释放了多少内存，所以在这种情况下如何更新 mc 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:58:33.293

为 malloc()、calloc 和 free() 创建包装函数。在 malloc/calloc 中分配额外的字大小以维持要分配的内存量并总结 mc 中分配的字节数。在释放时，读取第一个头字节以了解要释放多少内存并从 mc 减少相同的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:40:37.237

使用包装器会产生开销，仅出于调试目的，我更喜欢挂钩 malloc/calloc/free/etc 并转储有关它们正在做什么的信息。

这样做的好处是，当您发布（不再需要调试内容）时，您只需删除挂钩功能即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:50:51.870

您无法`long`直接使用它。`long`用类包装`MyLong`并为您的类重载`operator new`。这将跟踪堆中的内存分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:51:01.537

您可以使用[自定义内存分配器](http://en.wikipedia.org/wiki/Allocator_%28C++%29#Custom_allocators)来跟踪内存分配。请参阅[Doug Lea 的](http://g.oswego.edu/dl/html/malloc.html)参考实现

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-03T17:51:37.943

拦截内存分配例程，就像它在内存泄漏检测工具中显示的那样：

[https://sourceforge.net/projects/diagnostic/](https://sourceforge.net/projects/diagnostic/) [http://diagnostic.sourceforge.net/index.html](http://diagnostic.sourceforge.net/index.html)

（甚至可能将其集成到您的应用程序中）。

您不仅会获得 malloc、realloc、free，而且还会获得所有其他分配。

但请注意，内存挂钩是在多线程环境中运行的，即使您的应用程序是单线程的，其他线程中也可能发生很多事情。

没有得到很好保护的代码会导致死锁 - 请参阅自述文件中我的代码设计。

# ios - 后台应用程序中推送通知 ios 的奇怪行为

> ID：15484519
> 
> 赞同：0
> 
> 时间：2013-03-18T18:47:27.930
> 
> 标签：ios, push-notification, apple-push-notifications

我正在发送带有以下有效负载的推送通知：

```
{"aps":{"alert":{"loc-key":"general","loc-args":["Test DEFAULT."]},"badge":1,"sound":"default"}} 
```

在本地化字符串中，我将其定义为：

```
"general"="%@"; 
```

当应用程序打开时，通知很好，因为我在收到苹果的响应时处理它。但是当应用程序在后台或终止时，我会在通知的正文中获得“general”作为标题和“general”。

不确定发生了什么，因为我的结构似乎与苹果记录的结构相匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:16:31.813

看起来应用程序找不到您的本地化字符串。确保您的 Localizable.strings 文件对于用户选择的当前语言没有任何问题。

# matlab - 如何将 MATLAB 图形文本注释格式化为行和列？

> ID：15484527
> 
> 赞同：0
> 
> 时间：2013-03-18T18:47:53.357
> 
> 标签：matlab, matlab-figure

我有一个脚本，它将一些光学数据与洛伦兹振荡器的总和相匹配，然后用原始数据和拟合输出一个数字。我还想包含一个带有拟合参数表的文本注释，但无法弄清楚如何在我的文本框中获取行和列。

每个峰有 3 个参数，然后还有 3 个全局拟合参数。我的第一次尝试是这样做：

```
ParamTableLabels = {'\omega_p (cm^{-1})', '\omega_0 (cm^{-1})', '\Gamma (cm^{-1})'};
ParamTableVals = num2cell(Ef);
ParamTableLabels2 = {'d (\mu{m})','\epsilon_\infty','Scale'};
ParamTableVals2 = {ThickFit,EinfFit,ScaleFit};
ParamTable = vertcat(ParamTableLabels,ParamTableVals,ParamTableLabels2,ParamTableVals2); 
```

其中 Ef 是我的 3xN 拟合参数矩阵。生成我的图形后，我尝试使用以下方法将表格放置在一组合适的坐标 X、Y 处：

```
text(X,Y,ParamTable) 
```

结果是单列文本，没有行。我的第二次尝试，哪种作品是分解每一列：

```
text(X,     Y,ParamTable(:,1));
text(X+dX,  Y,ParamTable(:,2));
text(X+2*dX,Y,ParamTable(:,3)); 
```

这几乎可以工作，但是标签中的下标会影响最后几行的垂直对齐，并且需要大量的修补才能使间距正确。我花更多的时间试图让文本框看起来正确而不是进行实际建模。

如何以编程方式将包含标签和变量的文本块格式化为行和列，然后将其用作图形中的文本注释，而用户修改最少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:18:49.993

使用基本命令不太支持此功能。但是，通过让 Matlab 为您完成这项工作，您至少可以省去猜测后续 X 位置的麻烦。

键是`"Extent"`附加到文本块的只读参数。用于`docsearch text properties`查看文档。

将其放入一些代码中：

```
 padFraction = 0.1;  %This is roughly the unitless padding between columns, as a fraction of the column on the left.
        curX = X;           %Leave the initial X variable unchanged

        %For each text block column, add the text block, get the extent, and adjust curX
        h = text(curX,     Y,ParamTable(:,1));
        curExtent = get(h, 'Extent');
        curX = curExtent(1) + curExtent(3)*(1+padFraction);

        h = text(curX,  Y,ParamTable(:,2));
        curExtent = get(h, 'Extent');
        curX = curExtent(1) + curExtent(3)*(1+padFraction);

        text(curX,Y,ParamTable(:,3)); 
```

用于生成/测试的完整脚本如下：

```
ParamTableLabels = {'\omega_p (cm^{-1})', '\omega_0 (cm^{-1})', '\Gamma (cm^{-1})'};

Ef = round(rand(10,3)*100);
ParamTableVals = num2cell(Ef);
ParamTableLabels2 = {'d (\mu{m})','\epsilon_\infty','Scale'};
ParamTableVals2 = {'ThickFit','EinfFit','ScaleFit'};
ParamTable = vertcat(ParamTableLabels,ParamTableVals,ParamTableLabels2,ParamTableVals2);

X = 1;  Y = 1.1;

%Put something in the plot
figure(1); clf; hold on;
plot(-10:10, randn(21,1)*20,'.');

codeblock = 3;
switch codeblock
    case 1
        text(X,Y,ParamTable)

    case 2
        dX = 3;
        text(X,     Y,ParamTable(:,1));
        text(X+dX,  Y,ParamTable(:,2));
        text(X+2*dX,Y,ParamTable(:,3));

    case 3
        padFraction = 0.1;
        curX = X;

        h = text(curX,     Y,ParamTable(:,1));
        curExtent = get(h, 'Extent');
        curX = curExtent(1) + curExtent(3)*(1+padFraction);

        h = text(curX,  Y,ParamTable(:,2));
        curExtent = get(h, 'Extent');
        curX = curExtent(1) + curExtent(3)*(1+padFraction);

        text(curX,Y,ParamTable(:,3));
end 
```

# asp.net-mvc - LINQ、跳过并针对 Azure SQL 数据库不工作

> ID：15484529
> 
> 赞同：0
> 
> 时间：2013-03-18T18:47:54.950
> 
> 标签：asp.net-mvc, linq, azure-sql-database, skip, take

我正在一个 ASP.NET MVC3 应用程序上提取分页数据集，该应用程序使用 JQuery 通过 $ajax 调用获取用于无限滚动分页的数据。后端是 Azure SQL 数据库。这是代码：

```
[Authorize]
[OutputCache(Duration=0,NoStore=true)]
public PartialViewResult Search(int page = 1)
{ 

      int batch = 10; 
      int fromRecord = 1; 
      int toRecord = batch;

      if (page != 1)
      {
         //note these are correctly passed and set
         toRecord = (batch * page);
         fromRecord = (toRecord - (batch - 1));

      }

IQueryable<TheTable> query;

query = context.TheTable.Where(m => m.Username==HttpContext.User.Identity.Name)        
.OrderByDescending(d => d.CreatedOn)
.Skip(fromRecord).Take(toRecord);

//this should always be the batch size (10)
//but seems to concatenate the previous results ???

int count = query.ToList().Count();

//results
//call #1, count = 10
//call #2, count = 20
//call #3, count = 30
//etc...

PartialViewResult newPartialView = PartialView("Dashboard/_DataList", query.ToList());
return newPartialView;

 } 
```

从 Jquery $ajax 每次调用返回的数据在每次后续调用中继续增长，而不是每次调用仅返回 10 条记录。因此，返回的结果也包含所有早期调用数据。此外，我还在 $ajax 调用中添加了 'cache=false'。关于这里出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:01:37.167

您传递给的值`Skip`是`Take`错误的。

*   to 的参数`Skip`应该是要跳过的记录数，应该`0`在第一页；

*   to 的参数`Take`需要是您要返回的记录数，它始终等于`batch`;

您的代码必须是：

```
int batch = 10; 
int fromRecord = 0; 
int toRecord = batch;

if (page != 1)
{
   fromRecord = batch * (page - 1);
} 
```

# android - 删除/编辑动态添加的片段：

> ID：15484530
> 
> 赞同：0
> 
> 时间：2013-03-18T18:47:57.357
> 
> 标签：android, android-fragments

所以我有这种情况：

我有一个`Fragment`动态添加 s 的活动，结果如下所示：

![在此处输入图像描述](../Images/e439759c40cd7abaf07c26677afd99fd.png)

**解释：**

**黄色：** `TextView`内部`Fragment`

**橙色：**图像`Fragment`

**蓝色：** `ImageView`的里面`Fragment`

这是添加片段的代码：

```
 fragmentManager = getSupportFragmentManager();
     FragmentTransaction newfragmentTransaction;
     for (Comment tempComment : taskCommentList)
     {
         Bundle commentBundle = new Bundle();
         CommentFragment commentFragment = new CommentFragment();
         commentString = tempComment.getText();
         if (tempComment.isPictureFirst())
         {
             if (tempComment.getPictureFilesList().size() > 0)
             {
                 picturesFragment = new PicturesFragment();
                 Bundle picturesBundle = new Bundle();
                 ArrayList<String> picturesStringPathsList = new ArrayList<String>();
                 for (File tempFile : tempComment.getPictureFilesList())
                 {
                     picturesStringPathsList.add(tempFile.getAbsolutePath());
                 }
                 picturesBundle.putStringArrayList(PICTURES_PATHS, picturesStringPathsList);
                 picturesFragment.setArguments(picturesBundle);
                 newfragmentTransaction = fragmentManager.beginTransaction();
                 newfragmentTransaction.add(R.id.containerForFragments, picturesFragment).commit();                 
             }
             if (commentString != "")
             {
                    commentBundle.putString("comment", commentString);
                    commentBundle.putString("user", tempComment.getUser());
                    commentBundle.putString("at", tempComment.getTime()+", "+tempComment.getDate());
                    commentFragment.setArguments(commentBundle);
                    newfragmentTransaction = fragmentManager.beginTransaction();
                    newfragmentTransaction
                    .add(R.id.containerForFragments, commentFragment, "comment"+ String.valueOf(taskCommentList.indexOf(tempComment)))
                    .commit();                  
             }
         }
         else
         {
             if (commentString != "")
             {
                    commentBundle.putString("comment", commentString);
                    commentBundle.putString("user", tempComment.getUser());
                    commentBundle.putString("at", tempComment.getTime()+", "+tempComment.getDate());
                    commentFragment.setArguments(commentBundle);
                    newfragmentTransaction = fragmentManager.beginTransaction();
                    newfragmentTransaction
                    .add(R.id.containerForFragments, commentFragment, "comment"+ String.valueOf(taskCommentList.indexOf(tempComment)))
                    .commit();                  
             }

             if (tempComment.getPictureFilesList().size() > 0)
             {
                 picturesFragment = new PicturesFragment();
                 Bundle picturesBundle = new Bundle();
                 ArrayList<String> picturesStringPathsList = new ArrayList<String>();
                 for (File tempFile : tempComment.getPictureFilesList())
                 {
                     picturesStringPathsList.add(tempFile.getAbsolutePath());
                 }
                 picturesBundle.putStringArrayList(PICTURES_PATHS, picturesStringPathsList);
                 picturesFragment.setArguments(picturesBundle);
                 newfragmentTransaction = fragmentManager.beginTransaction();
                 newfragmentTransaction.add(R.id.containerForFragments, picturesFragment).commit();                 
             }
         }
     } 
```

**问题：**现在我需要为每个片段添加一个编辑和删除选项。到目前为止，我一直在进行交易并将我的片段“扔”到我的`Activity`主视图中。现在我必须掌握我创建的每一个片段实例（也许创建一个数组？），还是有其他方法？也许使用片段管理器？

**更新：** 按照这里的介词，我做了以下事情：

**1.**我在我用过的片段中定义了一个`getFragmentTag`和。`setFragmentTag`因此，当我通过添加片段时，`FragmentManager`我这样做：

```
 String tempTag = commentTagString+currentCommentFragmentTagNumber;
     currentCommentFragmentTagNumber++;
     commentFragment.setFragmentTag(tempTag);
     newfragmentTransaction = fragmentManager.beginTransaction();
     newfragmentTransaction.add(R.id.containerForFragments, commentFragment, tempTag).commit(); 
```

在每个片段中，我都有`ImageView`用于编辑和删除片段的 s：

```
 <ImageView
        android:id="@+id/iEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="14dp"
        android:layout_marginRight="4dp"
        android:clickable="true"
        android:onClick="pictureFragmentEditOnClick"
        android:src="@drawable/add_comment_button"
        android:contentDescription="@drawable/add_comment_button" />
    <ImageView
        android:id="@+id/iRemove"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="14dp"
        android:layout_marginRight="4dp"
        android:clickable="true"
        android:onClick="pictureFragmentRemoveOnClick"
        android:src="@drawable/add_comment_button"
        android:contentDescription="@drawable/add_comment_button" /> 
```

因此，在我的主要内容中，`FramgnetActivity`我这样做是为了获取片段标签：

```
PicturesFragment tempFragment = (PicturesFragment)v.getParent().getParent();
String tempTag = tempFragment.getFragmentTag();
Log.d(TAG, "The Fragments tag is: "+ tempTag); 
```

但由于某种原因，我收到一个铸造错误：

```
Caused by: java.lang.ClassCastException: android.support.v4.app.NoSaveStateFrameLayout cannot be cast to com.emildesign.sgtaskmanager.fragments.CommentFragment 
```

**所以问题是：**我如何获得与片段相关联的这个标签？

另一个问题是，如果我删除其中一个中间片段，创建的空白空间是否会被删除，而底部片段会“滑”上去覆盖它？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:54:39.510

检索片段的最简单方法是使用[add(containerId,fragment,tag)](http://developer.android.com/reference/android/app/FragmentTransaction.html#add%28int,%20android.app.Fragment,%20java.lang.String%29)为它们分配一个标签，以添加具有唯一标签的片段，然后使用[findFragmentByTag(tag)](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentByTag%28java.lang.String%29)来检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:12:11.100

要获取`ImageView`单击的片段实例，我执行了以下操作：

在片段中，我`onClickListeners`为这两个图像设置了两个，如下所示：

```
 iEdit = (ImageView)rootView.findViewById(R.id.iEdit);
    iEdit.setOnClickListener(new View.OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            Log.d(TAG, "pressed edit button");
            ((PicturesAndCommentsActivity) getActivity()).commentFragmentEditOnClick(fragmentTag);
        }
    });

    iRemove = (ImageView)rootView.findViewById(R.id.iRemove);
    iRemove.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            Log.d(TAG, "pressed remove button");
            ((PicturesAndCommentsActivity) getActivity()).commentFragmentRemoveOnClick(fragmentTag);
        }
    }); 
```

在片段活动中，我定义了这两种方法：

```
public void commentFragmentRemoveOnClick (String tag)
{
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.remove(fragmentManager.findFragmentByTag(tag)).commit();
} 
```

用于删除片段，现在我正在编辑片段。

# javascript - 保存页面上的所有 JavaScript 变量

> ID：15484532
> 
> 赞同：1
> 
> 时间：2013-03-18T18:48:08.233
> 
> 标签：javascript, local-storage

使用 JavaScript，是否可以将页面上的所有变量保存到本地存储，然后在页面刷新或重新加载时重新加载存储的变量？我正在尝试将变量保存到本地存储并在页面刷新时加载它们。这是我迄今为止尝试过的：

[http://jsfiddle.net/jZVWk/1/](http://jsfiddle.net/jZVWk/1/)

```
function saveAllVariables(){
    //save all variables on the page to local storage
}

function loadAllVariables(){
    //load all variables on the page from local storage, and re-create them using their original names
}

loadAllVariables(); //load all variables that were previously stored

if(typeof theName == "undefined"){
    var theName = prompt("Please enter your name:","Your name");
}

if(typeof currentTime == "undefined"){
    var currentTime = new Date();
}

document.body.innerHTML += "Time last visited: " + currentTime + "<br />";
document.body.innerHTML += "Your name : " + theName + "<br />";
var currentTime = new Date(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:00:24.480

有点。如果您关心的变量都是全局的，并且不依赖于任何非全局数据，您可以查看这个问题：[Fetching all (javascript) global variables in a page](https://stackoverflow.com/questions/2226007/fetching-all-javascript-global-variables-in-a-page) (Thanks Stegrex)

但这还不是全部。在 JS 中，大量数据保存在隐藏范围内。这有两个问题：

1.  对象可能无法从全局范围访问。
2.  函数可能依赖于创建它们的范围内的数据，但不能从全局范围访问。

例如：

```
var globalThing = 'global';
var makeCounter = function() {
  var count = 0;
  return {
    increment: function() { count++; },
    getCount:  function() { return count; }
  }
}
var counter = makeCounter();
counter.increment();
alert(counter.getCount()); 
```

这段代码的状态现在不可能真正保存和重构。 `count`处于闭包中，在全局范围内隐藏且无法访问。如果没有更智能的方法来检查和保存对象的内部状态，您将无法保留此结构。

* * *

所以也许这不是你想要采取的方法。我敢打赌，有一种更清洁的方法可以做你想做的事。所以问题变成了：你为什么需要这个？你想做什么？

我强烈建议你明确地只保存你需要的数据，不要试图暴力保存整个宇宙。

在您的情况下，这很简单：

```
function saveOnlyImportantVaiables() {
  localStorage.theName = theName;
  localStorage.currentTime = currentTime;
} 
```

# google-plus - 使用 Google+ 登录时阻止自动登录

> ID：15484533
> 
> 赞同：41
> 
> 时间：2013-03-18T18:48:11.210
> 
> 标签：google-plus

我正在将 Google+ 登录与我的网站集成，这也允许用户使用 Twitter 和 Facebook 登录。因此，该网站的登录页面有 3 个按钮，每个服务一个。

我遇到的问题是在以下情况下：

*   用户进入登录页面
*   用户使用 G+ 成功登录
*   用户退出我的网站（但该帐户仍与 G+ 关联，退出该网站不会断开 G+ 帐户）
*   用户再次访问登录页面
*   在此阶段，“使用 G+ 登录”按钮会呈现并自动将用户登录到与 G+ 关联的帐户，而无需用户单击该按钮

问题是，在重新访问登录页面时，我希望用户可以选择使用其他服务登录，而不是自动使用 G+ 登录。如果用户想使用 G+ 登录，他们可以通过单击按钮来实现 - 然后用户将自动登录。

是否可以防止在按钮渲染时自动登录？我可以通过在按钮上使用 as 属性来模拟它`data-approvalprompt="force"`，但我认为这不是一个理想的解决方案（然后用户必须通过确认过程，我希望避免这种情况）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-19T15:12:37.903

**更新**

防止自动登录的最佳支持方法是使用 API 方法，该方法`gapi.auth2.getAuthInstance().signOut()`将在您的站点被调用后阻止自动登录。 [演示在这里](http://wheresgus.com/stayindemo/)。

在演示中，用户在离开页面时退出，如以下代码所示：

```
window.onbeforeunload = function(e){
  gapi.auth2.getAuthInstance().signOut();
}; 
```

现在，无论何时用户退出站点（例如关闭窗口、导航离开），他们都会被注销，并且登录按钮不会触发登录，直到用户单击它。

我不建议您在自己的实现中执行此操作，而是允许用户在他们不再希望登录时明确退出。另外，请注意我的示例是一个演示，您可能不想签名用户离开您的网站时会自动退出。

**原帖**

首先，您不应该使用 data-approvalprompt="force" ，因为这会导致向您的应用程序/客户端发出额外的授权子令牌，并且设计用于在凭据丢失后需要重新授权用户的场景服务器-边。

其次，您可能不希望出现用户需要点击登录的行为，因为他们已经“登录”到他们的 Google 帐户，并且需要再次登录（或触发登录）可能会造成混淆，分别为您的网站。

[如果您真的想这样做，您将为登录按钮执行显式渲染，但不会按照Google+ 登录](https://developers.google.com/+/web/signin/)文档中的说明调用 gapi.signin.render，直到您知道用户*不会*自动获得登录。

以下代码显示了如何启用登录按钮的显式呈现：

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
{"parsetags": "explicit"}
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<head>
<script type="text/javascript">
var token = "";
function onSigninCallbackVanilla(authResponse){
   // in a typical flow, you show disconnect here and hide the sign-in button
} 
```

以下代码向您展示了如何显式呈现按钮：

```
 <span id="signinButton">
    <button id = "shim" onclick="gapi.signin.go(); $('#shim').hide();">Show the button</button>
    <span
      class="g-signin"
      data-callback="onSigninCallbackVanilla"
      data-clientid="YOUR_CLIENT_ID"
      data-cookiepolicy="single_host_origin"
      data-requestvisibleactions="http://schemas.google.com/AddActivity"
      data-scope="https://www.googleapis.com/auth/plus.login">

    </span>
  </span> 
```

您如何传达用户已退出您的站点可能会因站点而异，但一种方法可能是设置一个 cookie，指示用户的“已退出”状态，然后将其用作触发器用于阻止显式加载。当用户访问您的网站并禁用 cookie 或使用单独的登录浏览器时，该行为会变得有点棘手。为了解决这个问题，您可以做一些复杂的事情，例如在登录回调中通过 XHR 从您的服务器查询用户状态，并假装不知道用户已登录 Google+。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-12T21:12:32.397

只需在回调函数中检查 g-auth-window ：

```
 function google_sign_callback(authResult){
        if(authResult['g-oauth-window']){

        }else if(authResult['error']) {

        }
    } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-11-11T07:18:23.933

我遇到了这个问题并使用[了 auth2.disconnect()](https://developers.google.com/identity/sign-in/web/reference#googleauthdisconnect)

```
function onSignIn(googleUser) {
    var profile = googleUser.getBasicProfile();
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.disconnect();

    //do other stuff
} 
```

编辑：您需要在断开连接之前存储令牌，因为在某些情况下，断开连接后 id_token 将变为空：

```
function onSignIn(googleUser) {
    var profile = googleUser.getBasicProfile();
    var idToken=profile.id_token;
    googleUser.disconnect()

    //use idToken for server side verification
} 
```

如果我是正确的，你有你自己的网站登录机制，只需要谷歌登录就可以在经过验证的电子邮件上注册用户。在这种情况下，您可以在获得个人资料信息后轻松断开连接。下次加载页面时，您将看到“登录”按钮而不是“登录”按钮。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-14T15:25:53.073

不幸的是`gapi.auth.signOut()`，当我请求用户数据时，调用使应用程序再次登录（它都不是持久的）

因此，@class 建议的解决方案是撤销令牌：

```
 $.ajax({
    type: 'GET',
    url: 'https://accounts.google.com/o/oauth2/revoke?token=' +
        gapi.auth.getToken().access_token,
    async: false,
    contentType: 'application/json',
    dataType: 'jsonp',
    success: function(result) {
      console.log('revoke response: ' + result);
      $('#authOps').hide();
      $('#profile').empty();
      $('#visiblePeople').empty();
      $('#authResult').empty();
      $('#gConnect').show();
    },
    error: function(e) {
      console.log(e);
    }
  }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-01T21:52:29.593

我正在使用[https://developers.google.com/identity/sign-in/web/build-button](https://developers.google.com/identity/sign-in/web/build-button)为我的网络应用程序构建登录按钮，让用户可以选择通过 Facebook 或 Google 登录。这段代码很容易获得 Id_token。但是，如果用户已经登录，它也会自动登录用户。

因此，在脚本开头添加以下代码片段有助于我控制注册过程。

```
 window.onbeforeunload = function(e){
      gapi.auth2.getAuthInstance().signOut();
    }; 
```

谢谢！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-20T11:13:52.930

我也有同样的问题，我是如何修复它的。我可能不确定这是一种更标准的方法，但它仍然适用于我......

从谷歌开发者添加这个谷歌 JS

```
<script src="https://apis.google.com/js/platform.js" async defer></script>
<script>

function onSuccessG(googleUser) {
        var profile = googleUser.getBasicProfile();
        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
        console.log('Name: ' + profile.getName());
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail());
}
function onFailureG(error) {
    console.log(error);
}
function renderGmail() {

  gapi.signin2.render('my-signin2', {
    'scope': 'https://www.googleapis.com/auth/plus.login',
    'width': 0,
    'height': 0,
    'longtitle': true,
    'theme': 'dark',
    'onsuccess': onSuccessG,
    'onfailure': onFailureG
  });
} 
```

现在添加 html 链接并 onClick 调用此 renderGmail() 函数。

```
<a href="javascript:void(0)" onclick="renderGmail();"> SignUp with Gmail</a> 
```

我希望这有效...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-12-19T00:14:51.737

我们的 AngularJS 解决方案是：

```
$scope.$on('event:google-plus-signin-success', function (event, authResult) {
                if( authResult.status.method !== "AUTO"){
                    onGoogleLogIn(authResult[settings.configKeys.googleResponseToken]);
                }
            }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-27T00:30:43.333

当您开始将 Google 登录和 OAuth 访问令牌用于其他 Google 服务时，接受的答案不再有效。当用户退出时，访问令牌立即过期。相反，我会推荐[这个 SO post](https://stackoverflow.com/questions/59429307/how-to-stop-google-logon-onsuccess-from-firering-on-page-load/59431751#59431751)的答案，其中涉及将点击事件处理程序附加到 Google 登录按钮。只有当用户单击登录按钮并成功登录到他们的 Google 帐户后，回调事件才会触发。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-26T19:34:24.090

我已经为此苦苦挣扎了一段时间，找不到使用登录的“简单实现”来阻止自动登录 Google 的方法

我最终使用了不尝试自动登录的[自定义集成（也允许我同时更改外观）](https://developers.google.com/identity/sign-in/web/build-button)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-06T21:26:46.487

我通过向我的 Google 登录按钮添加点击处理程序解决了这个问题。点击处理程序将全局 Javascript 变量设置`google_sign_in`为`true`. 当`onSuccess()`处理程序触发时（无论是在页面加载时自动触发，还是在用户单击登录按钮时手动触发），它首先检查是否`google_sign_in`== `true`，然后才继续让用户登录：

```
<div id="google-signin2" onclick="return do_click_google_signin();"></div>

<script>
    var google_sign_in = false; // assume

    function do_click_google_signin() {
        google_sign_in = true;
    }

    function onSuccess( googleUser ) {
        if ( google_sign_in ) {
            // Process sign-in
        }
    }

    // Other redundant login stuff not shown...
</script> 
```

# php - 使用许多图像快速加载 Cakephp 视图文件

> ID：15484536
> 
> 赞同：0
> 
> 时间：2013-03-18T18:48:20.547
> 
> 标签：php, cakephp, caching, amazon-s3, cakephp-2.1

我正在一个使用***CakePHP***进行云文件管理的站点工作，用户可以在其中上传大量文件，如图像、文档、pdf 等，所有这些上传的文件都将在 aws s3 存储桶中，在本地没有任何内容。

这些文档将使用 jstree 加载。当用户单击 jstree 文件夹时，该文件夹的相应文档将通过 AJAX 加载到视图中。

现在的问题是，当有很多文件时，它会花费大量时间来加载文件夹的相应文件。例如：我有一个包含 50 多个图像的文件夹以及一些 doc 文件。当我选择该文件夹时，加载该文件夹需要几分钟的时间，而且每次都需要花费这么多时间。

我已经为那个ajax加载的视图使用了缓存，并且还在`cache : true`jquery ajax设置中设置了那个视图文件。

就像是：

```
public $cacheAction = array(
  'index' => 36000,
  'ajax_documents' => 3600 // this is the view file that render documents
);

.....
public function ajax_documents() {
   // Here is all query data that set to corresponding ajax_document.ctp file
   // I also cached the query result for each folder request
} 
```

在***jQuery中***

```
$.ajax({
  type: 'GET',
  cache: true,
  ifModified: true,
  data : {},
  url: '..ajax_documents',
  ......
}); 
```

但没有任何工作。仍然需要大量时间来渲染`ajax_document.ctp`。文件缓存工作正常，因为我看到了它们。

因此，在这种情况下，我需要您的帮助和建议如何提高这种情况以及这种情况下最好的方法是什么？

**笔记：**

主要问题是每次视图加载时从 s3 加载图像。所以我基本上需要那个图像缓存的解决方案。

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:11:24.257

您可以尝试压缩文件系统上的文件，但老实说，您最好将图像托管在某种 CDN 服务上，其中它们有自己的缓存并使用它们的 url 来加载图像。

我从工作经验中知道这一点。我们使用蛋糕 1.3。即使使用有效的内存缓存，从蛋糕中缓存通常也很糟糕。使用 CDN。

# ssis - 如何使用 SSIS 将文件名、文件大小、reciveddate 加载到数据库

> ID：15484537
> 
> 赞同：-1
> 
> 时间：2013-03-18T18:48:27.583
> 
> 标签：ssis, metadata, etl

我对 ETL 的世界非常陌生，尽管自从我 3 个月前开始学习 ETL 以来，我已经使用 SSIS 完成了几次 ETL。对于有经验的人，我有一个很好的问题。

. 我想用文件夹中的文件信息（ Filename、FileSize 和 ReceivedDate ）在我创建的数据库中填充一个表。使用 SSIS 包。一个示例是在 sql 数据库中加载以下路径中的文件信息。

C:\Users\Documents\newfiles\purchaseorder。C:\用户\文档\新文件\发票。

另请注意，我有多种类型的文件。csv、edi、tcf 等

任何人都可以提供解决此问题的分步指南吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:40:37.030

The simplest way to get that sort of information is to use the .NET Framework's `System.IO.FileInfo` class in a Script Task:

```
 public void Main()
    {
        var receivedFile = (string)Dts.Variables["User::ReceivedFile"].Value;
        var fileInfo = new System.IO.FileInfo(receivedFile);
        Dts.Variables["User::FileName"].Value = fileInfo.FullName;
        Dts.Variables["User::FileSize"].Value = fileInfo.Length;
        Dts.Variables["User::ReceivedDate"].Value = fileInfo.CreationTime;
        // or whatever other information you may need

        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

The code above assumes that you've set the `User::ReceivedFile` variable to the full path of whatever file you're dealing with; this is typically (but not always) done through a File System Task. Obviously, when configuring the Script Task, you'll need to specify `ReadWrite` access for the variables you'll be writing to.

Once you have that information in variables, of course, you can use it in whatever manner is needed.

For further information on the `FileInfo` class, see MSDN [here](http://msdn.microsoft.com/en-us/library/akth6b1k.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:21:50.650

这是我用来提取信息的一段代码......

```
 HHInfo = New FileInfo(HHFile(i).ToString())

    HHFileDate = HHInfo.CreationTime

  HHDate = HHFileDate.ToString("dd/MM/yyyy")
                    writer.Write("HHInfo.CreationTime  : " & HHInfo.CreationTime.ToString & vbNewLine & vbNewLine)
                    writer.Write("HHInfo.LastAccessTime  : " & HHInfo.LastAccessTime.ToString & vbNewLine & vbNewLine)
                    writer.Write("HHInfo.LastWriteTime  : " & HHInfo.LastWriteTime.ToString & vbNewLine & vbNewLine)

                    HHElapsedTime = New DateTime(((HHInfo.LastWriteTime - HHInfo.CreationTime).Ticks))

                    EndTimelist.Add(HHInfo.LastWriteTime)

                    writer.Write("HHElapsedTime  : " & HHElapsedTime.ToString("HH:mm:ss") & vbNewLine & vbNewLine)

                    swriter.WriteLine("HH Start Time  : " & HHInfo.CreationTime.ToString & vbNewLine)
                    swriter.WriteLine("HH End Time  : " & HHInfo.LastWriteTime.ToString & vbNewLine) 
```

# php - 使用 PHP 和 MySQL 阻止和/或重定向大量 IP 列表

> ID：15484542
> 
> 赞同：1
> 
> 时间：2013-03-18T18:48:35.347
> 
> 标签：php, redirect, ip-address

我有一个外部 IP 列表，我想在我的网站上阻止（或者，更好的是，重定向）。我最初是采用这种`.htaccess`方法，但后来意识到使用 PHP 可能更容易做到这一点。但现在我不确定......似乎 PHP 和 MySQL 一起是最好的选择。

我在 MySQL 中有一个包含 CIDR 块的表。我一直在努力尝试将用户的 IP 与表格进行比较。

最好的方法是什么？

我正在考虑以某种方式检查被阻止的 IP，如下所示（PHP 和伪代码）：

```
$user_ip = $_SERVER['REMOTE_ADDR'];

loop through returned rows {
    if ($user_ip in returned row from MySQL table) {
        forward to another domain
    }

    else // do something else...
} 
```

但我正在处理 IP 组；不是单个IP​​。我一直在使用一些 CIDR 脚本和 ip2long 来反汇编和解析这些组。但这已被证明是困难的。

根据评论的建议，如果我将 IP 存储在数据库中，我可以直接比较。但是我正在处理的整个街区很大，我不确定这样做。在比较中，我将处理数百万个 IP...

关于如何最好地做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:57:57.527

我终于能够解决这个问题。这是我所做的...

首先，我创建了一个脚本，将我庞大的 IP CIDR 块列表注入 MySQL。

然后，我编写了一个脚本，首先查询数据库，获取 IP 块，将它们收集到一个数组中，然后使用这里找到的函数（[查找给定 IP 是否存在于 CIDR 中](https://stackoverflow.com/questions/10243594/find-whether-a-given-ip-exists-in-cidr-or-not)）将用户的 IP 与 CIDR 块进行比较从数据库。

```
// initialize array
$cidr_block = array();

// query mysql database for all id and ip_cidr values
$query = "SELECT id, ip_cidr FROM ip_blocks";

// use mysqli class to query database
if ($result = $mysqli -> query($query)) {

    // build array for testing with  IP_vs_CIDR class
    while ($row = $result -> fetch_assoc()) {
        $cidr_block[] = $row['ip_cidr'];
    }

    // run IP_vs_CIDR on user ip address and cidr block array from database
    $cidr_result = $ip_vs_cidr -> test_user_ip($user_ip, $cidr_block);

    // test ip against the array values and send elswhere if bad
    if ($cidr_result) {
        header('Location: http://www.google.com/');
    }

    // free up result set
    $result -> close();
} 
```

然后，我根据这个结果进行了重定向。似乎工作得很好，因为对用户 IP 使用固定 IP 的几个测试（例如，`$user_ip = '75.150.41.15')`正确测试并按预期重定向。我测试了黑名单中的 IP 而不是，以涵盖两个基础。

感谢您的评论 - 他们很有帮助。

# alert - 无法再启用 2 月的重大更改（仅限 4 月），因此我无法“修复”警报。关于如何使警报消失的任何想法？

> ID：15484544
> 
> 赞同：1
> 
> 时间：2013-03-18T18:48:46.493
> 
> 标签：alert, facebook-apps

无法再在应用程序设置的高级选项中启用 2 月的重大更改（仅限 4 月）。所以我无法“修复”警报。关于如何使警报消失的任何想法？

# ruby-on-rails - 在测试期间，为什么 rails 会运行我的初始化程序两次？

> ID：15484546
> 
> 赞同：2
> 
> 时间：2013-03-18T18:48:54.190
> 
> 标签：ruby-on-rails, testing, initializer

我创建了一个全新的 rails 应用程序，添加了一个虚拟控制器，带有一个“assert true”功能测试，以及一个调用“puts Rails.env”的初始化程序。

当我在这个应用程序上运行 rake 测试时，初始化程序会打印“开发”和“测试”。

谁能告诉我这是为什么？

彼得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:48:40.050

运行 rake 启动 rails，然后运行测试 (test_helper, spec_helper) 再次为测试环境加载 rails

如果你使用 rspec 你可以在没有 rake 的情况下调用它

```
bundle exec rspec spec 
```

很确定通过迷你测试，您可以使用 rake 或 ruby​​ 可执行文件调用

通过 rake 运行它们不应该有任何不良的副作用，只是你需要等待 rails 启动两次

# php - 阿拉伯字符在 DOMPDF 中不起作用

> ID：15484547
> 
> 赞同：2
> 
> 时间：2013-03-18T18:49:03.053
> 
> 标签：php, character-encoding, pdf-generation, dompdf

我在 DOMPDF 中使用阿拉伯字符时遇到问题...我尝试了所有方法，但没有任何效果...

我的 DOMPDF 版本是最后一个。我尝试安装字体并将字符设置为 UTF-8 和[Windows-1256](https://en.wikipedia.org/wiki/Windows-1256)，但它仍然无法正常工作......

这是 HTML 页面的代码：

```
<?php require("login3.php"); ?>
<?php
    if (!empty($_POST)) {
        // Used for later to determine result
        $success = $error = false;

        // Object syntax looks better and is easier to use than arrays to me
        $post = new stdClass;

        // Usually there would be much more validation and filtering, but this
        // will work for now.
        foreach ($_POST as $key => $val)
            $post->$key = trim(strip_tags($_POST[$key]));

        // Check for blank fields
        if (empty($post->itemCode) OR
            empty($post->itemDesc) OR
            empty($post->itemQty) OR
            empty($post->itemPrice) OR
            empty($post->itemAgent))

            $error = true;
        else {
            // Get this directory, to include other files from
            $dir = dirname(__FILE__);

            // Get the contents of the pdf into a variable for later
            ob_start();
            require_once($dir . '/pdf.php');
            $pdf_html = ob_get_contents();
            ob_end_clean();

            // Load the dompdf files
            require_once($dir . '/dompdf/dompdf_config.inc.php');

            $dompdf = new DOMPDF(); // Create new instance of dompdf
            $dompdf->load_html($pdf_html, "UTF-8");  // Load the html
            $dompdf->render();  // Parse the html, convert to PDF
            $pdf_content = $dompdf->output(); // Put contents of pdf into variable for later

            // Get the contents of the HTML email into a variable for later
            ob_start();
            require_once($dir . '/html.php');
            $html_message = ob_get_contents();
            ob_end_clean();

            date_default_timezone_set('Asia/Amman');
            $tym = date('m-d-Y : hi a');
            $filename = ' Order ' . $tym;
            $dompdf->load_html($_SESSION['prints']['table']);

            $dompdf->stream( $_SESSION["username"] . $filename . ".pdf"); // Streams the PDF to the client. Will open a download dialog by default

            // Load the SwiftMailer files
            require_once($dir . '/swift/swift_required.php');

            $mailer = new Swift_Mailer(new Swift_MailTransport()); // Create new instance of SwiftMailer

            $message = Swift_Message::newInstance()
                           ->setSubject('New Order') // Message subject
                           ->setTo(array('hussammoz@aol.com', 'hussammoz@GMAIL.com' => 'Orange Pharmacy Store')) // Array of people to send to
                           ->setFrom(array('no-reply@net.tutsplus.com' => 'Orange Pharmacy Order System')) // From:
                           ->setBody($html_message, 'text/html') // Attach that HTML message from earlier
                           ->attach(Swift_Attachment::newInstance($pdf_content,  $_SESSION["username"] . $filename . ".pdf", 'application/pdf')); // Attach the generated PDF from earlier

            // Send the email, and show user message
            if ($mailer->send($message))
                $success = true;
            else
                $error = true;
        }
    }
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <link href="favicon.ico" rel="icon" type="image/x-icon" />
        <link rel="shortcut icon" href="favicon.ico" />
        <title>Orange Pharmacy Order System</title>

        <style type="text/css" title="currentStyle">
            @import "css/layout-styles.css";
            @import "css/themes/smoothness/jquery-ui-1.8.4.custom.css";

            {
                font-family: arabic, Arabic, Serif;
            }
        </style>

        <script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js"></script>
        <script src="includes/jquery.ticker.js" type="text/javascript"></script>
        <script src="includes/site.js" type="text/javascript"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

        <!-- jQuery libraries-->
        <script type="text/javascript" src="js/jquery-1.6.1.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.14.custom.min.js"></script>
        <script type="text/javascript" src="js/atooltip.jquery.js"></script>
        <script type="text/javascript" src="js/kwicks-1.5.1.pack.js"></script>
        <script type="text/javascript" src="js/script.js"></script>

        <!-- Our jQuery script to make everything work -->
        <script type="text/javascript" src="js/jq-ac-script.js"></script>
    </head>

    <body background="images/bg.jpg";>
        <div id="cont">
           <div style="position:absolute; top: 10px; left: 25px;">
           <a href="index.php" class="normaltip" style="text-decoration:none" title="Home"> <img src="images/home.png"height="48" width="48"></a></div>
           <div style="position:absolute; top: 60px; left: 25px;">
           <a href="order.php" class="normaltip" style="text-decoration:none" title="New  Order"><img src="images/system-software-update.png"height="48" width="48"></a></div>

        <div id="container">

        <h2 align="center"><img src="images/418694_259331167468533_385322251_n.jpg"></h1>
        <div class="panel">
            <div class="title-large">
            <div class="theme"></div>
        <p>
        <h4 align="left"><b>Branch: <FONT COLOR="white"><?php echo($_SESSION["username"]); ? ></b></h4>
        <script type="text/javascript">
            function GetClock(){
                d = new Date();
                nday   = d.getDay();
                nmonth = d.getMonth();
                ndate  = d.getDate();
                nyear  = d.getYear();
                nhour  = d.getHours();
                nmin   = d.getMinutes();
                nsec   = d.getSeconds();

                if (nyear<1000)
                    nyear=nyear+1900;

                if (nhour ==  0) {
                    ap = " AM";nhour = 12;
                }
                else if(nhour <= 11) {ap = " AM";}
                else if(nhour == 12) {ap = " PM";}
                else if(nhour >= 13) {ap = " PM";nhour -= 12;}

                if(nmin <= 9) {nmin = "0" +nmin;}
                if(nsec <= 9) {nsec = "0" +nsec;}

                document.getElementById('clockbox').innerHTML =
                    "" + (nmonth+1) + "/" + ndate + "/" + nyear + "  " +
                    nhour + ":" + nmin + ":" + nsec + ap + "";
                setTimeout("GetClock()", 1000);
            }
            window.onload = GetClock;
        </script>

        <div id="clockbox"></div></font></div>
        <?php if ($success) { ?>
            <div class="message success">
                <h4>Order Successfully Sent to Store </h4>
            </div>
        <?php } elseif ($error) { ?>
            <div class="message error">
                <h4>Sorry, an error occurred. Try again!</h4>
            </div>
        <?php } ?>
        <div class="content inpad">

            <div id="messageBox" style="margin-left:15px; padding-left:20px;  padding-bottom:5px; border:1px #ccc solid; display:none;"></div>

            <form method="post" action="#" id="itemsForm">
                <h1 align="center"><font color="black"><b>Branch Order Form</b> </font></h1><br><br>
                <select name="Priority" size="1">
                    <option value="Daily">Daily</option>
                    <option value="Monthly">Monthly</option>
                    <option value="Urgent">Urgent</option>
                </select>
                <table id="itemsTable" class="general-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Item Code</th>
                            <th>Item Description</th>
                            <th>Item Qty</th>
                            <th>Item Price</th>
                            <th>Item Agent</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="item-row">
                            <td></td>
                            <td><input name="itemCode[]" value=""  class="tInput" id="itemCode" readonly="readonly" /> </td>
                            <td><input name="itemDesc[]" value="" class="tInput" id="itemDesc"  tabindex="1"/></td>
                            <td><input name="itemQty[]" value="" class="tInput" id="itemQty" tabindex="2"/></td>
                            <td><input name="itemPrice[]" value="" class="tInput" id="itemPrice" readonly="readonly" /> </td>
                            <td><input name="itemAgent[]" value="" class="tInput" id="itemAgent" readonly="readonly" /></td>
                        </tr>
                    </tbody>
                </table>
                <a href="#" id="addRow" class="button-clean large"><span> <img src="images/icon-plus.png" alt="Add" title="Add Row" /> Add Item</span> </a>&nbsp;&nbsp;&nbsp;

                </div>
                <input type="submit" value="SEND TO THE STORE">
            </form>
            </div>
        </div>

        <div id="container">
            <link href="styles/ticker-style.css" rel="stylesheet" type="text/css" />

            <h1></h1>

            <ul id="js-news" class="js-hidden">

                <li class="news-item">WELCOME&nbsp;&nbsp;&nbsp;<?php echo($_SESSION["username"]); ?>&nbspBranch Team:)</li>
                <li class="news-item"><a href="newItem.php"target="_blank">LIST OF EXPIRY OF 03/2013 </a></li>
                <li class="news-item">&#1575;&#1604;&#1578;&#1610; &#1578;&#1606;&#1578;&#1607;&#1610; &#1576;&#1578;&#1575;&#1585;&#1610;&#1582; 06/2013 avene &#1575;&#1604;&#1585;&#1580;&#1575;&#1569; &#1587;&#1581;&#1576; &#1580;&#1605;&#1610;&#1593; &#1571;&#1589;&#1606;&#1575;&#1601; </li>
                <li class="news-item">REMEMBER THAT URGENT ORDERS MUST BE BEFORE 10 A.M AND  AFTER THAT ONLY DAILY ORDER</li>
                <li class="news-item">URGENT ORDER IS THAT WHICH CONTAIN ITEMS YOU DON'T   HAVE IN BRANCH OR CUSTOMER REQUEST!</li>
                <li class="news-item"><FONT COLOR="RED">NEW ITEM<a href="newdrug.php">&nbsp&nbspProspan Sachet</a></FONT>is available in store now... ORDER IT :)</li>
                <li class="news-item">Further updates to jQuery News Ticker are coming soon!</li>
            </ul>

            <noscript>
                <h2>Latest News</h2>
                <ul id="no-js-news">
                    <li class="news-item">jQuery News Ticker now has support for multiple tickers per page!</li>
                    <li class="news-item">jQuery News Ticker now has support right-to-left languages!</li>
                    <li class="news-item">jQuery News Ticker now has support for loading content via an RSS feed!</li>
                    <li class="news-item">jQuery News Ticker now has an optional fade effect between items!</li>
                    <li class="news-item">New updates have been made to jQuery News Ticker! Check below for more details!</li>
                    <li class="news-item">jQuery News Ticker is now compatible with jQuery 1.3.2! See below for further details and for latest download.</li>
                    <li class="news-item">Further updates to jQuery News Ticker are coming soon, come back soon for more details.</li>
                </ul>
            </noscript>
        </div>
    </body>
</html> 
```

以及生成 PDF 的页面代码：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style type="text/css">
            HTML, BODY
            {
                font-family: Serif, arabic;
            }
        </style>
            <h1 align="center"><img src=http://orangepharmacy.hostzi.com/418694_259331167468533_385322251_n.jpg></h1>
    </head>

    <body>
        <h3 align="center"><b>Items&nbsp;<?php echo($_POST["Priority"]); ?>&nbsp;Order <br>   Branch: <FONT COLOR="ORANGE"><?php echo($_SESSION["username"]); ?></h3>
        <h6>
            <table id="itemsTable" border="1" width="100%">
                <thead>
                    <tr>
                        <th></th>
                        <th>Item Code</th>
                        <th>Item Description</th>
                        <th> Qty</th>
                        <th> Price</th>
                        <th> Agent</th>
                    </tr>
                </thead>

                <tbody>
                    <?php
                        foreach  ($_POST["itemCode"] as $Key=> $itemCode) {
                            $itemDesc=$_POST["itemDesc"][$Key];
                            $itemPrice=$_POST["itemPrice"][$Key];
                            $itemQty=$_POST["itemQty"][$Key];
                            $itemAgent=$_POST["itemAgent"][$Key];
                            echo "<tr><td></td><td>" . $itemCode . "</td><td>" . $itemDesc .
                                 "</td><td>" . $itemQty . "  </td><td>" . $itemPrice .
                                 "</td><td>" . $itemAgent ."</td></tr>";
                        }
                    ?>
                </tbody>
            </table>
        </h6>

        <script type="text/php">

            if (isset($pdf))
            {
                $font = Font_Metrics::get_font("serif");

                // If verdana isn't available, we'll use sans-serif.

                if (!isset($font)) {
                    Font_Metrics::get_font("serif");
                }

                $size = 6;
                $color = array(0,0,0);
                $text_height = Font_Metrics::get_font_height($font, $size);
                $w = $pdf->get_width();
                $h = $pdf->get_height();

                // ------------------ FOOTER ------------------------------------------

                 if ($PAGE_NUM > 0)
                 {
                     $footer = $pdf->open_object();
                     $y = $h - 3 * $text_height - 24;
                     $text = "Orange Pharmacy   Tel: 5536170 - Fax: 5536171"; //"Page {PAGE_NUM} of  {PAGE_COUNT}"
                     $width = Font_Metrics::get_text_width("Orange Pharmacy    Tel: 5536170 - Fax: 5536171", $font, $size);
                     $pdf->page_text($w / 2 - $width / 2, $y, $text, $font, $size, $color);

                     // Copyright line
                     $y += $text_height * 2;
                     $text = "Madina Monawara - University Street - Hussain - Dabouq - Jabal Amman -  Airport - Dahet Alrasheed - Jubaiha - Yasmeen - Zarqa";

                     // Center the text
                     $width = Font_Metrics::get_text_width($text, $font, $size);
                     $pdf->page_text($w / 2 - $width / 2, $y, $text, $font, $size, $color);

                     // Add a logo
                     $img_w = 0.5 * 72; // 0.5 inches, in points
                     $img_h = 0.5 * 72; // 0.5 inch, in points -- change these as required

                     //$pdf->image("", 0, $y, $img_w, $img_h);
                     $pdf->close_object();
                     $pdf->add_object($footer, "all");
                 }

                 // ------------------ FOOTER END ------------------------------------------
             }
        </script>

        <script type="text/php">
            if ( isset($pdf) ) {
                $font = Font_Metrics::get_font("serif", "bold");
                $pdf->page_text(36, 9, "Page: {PAGE_NUM} of {PAGE_COUNT}",
                                $font, 6, array(0,0,0));
            }
        </script>
    </body>
</html> 
```

我尝试了一个月的一切，但没有任何效果。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-04T16:38:23.120

我有同样的问题。我正要放弃 DOMPDF，直到我将以下内容放在 html 的顶部：

```
<style type="text/css">
    body { font-family: DejaVu Sans, sans-serif; }
</style> 
```

很简单，但是所有出现在阿拉伯语位置的问号都消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-07T00:25:53.057

对我来说，我使用了以下

```
 $html=mb_convert_encoding($html, 'UTF-8',
              mb_detect_encoding($html, 'UTF-8, ISO-8859-1', true));
$mpdf = new \Mpdf\Mpdf();
$mpdf->autoScriptToLang = true;
$mpdf->autoLangToFont = true;
$mpdf->WriteHTML($html);
$mpdf->Output(); 
```

然后它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T10:49:32.260

我使用这个packege**`Persian`** 并且它的工作很好：

```
 https://github.com/mccarlosen/laravel-mpdf 
```

# cygwin - Cygwin bash shell 中的字符串连接错误

> ID：15484549
> 
> 赞同：1
> 
> 时间：2013-03-18T18:49:06.560
> 
> 标签：cygwin, concatenation

我在 BASH 中连接两个字符串时遇到问题（我使用的是 Cygwin）

当我在 cygwin 窗口中逐步执行此操作时，它可以工作。

即通过明确定义dt=2012-12-31 和c=.txt，然后在filename=${dt}${c} 中连接。

当我通过脚本运行它时，它似乎不起作用，其中这些变量是通过从文件内容中剪切和分配值来定义的。

尽管为变量分配了与上述相同的值，但这种情况下的串联不起作用。

而不是 2012-12-31.txt 我得到 .txt-12-31 结果。

代码是：

```
for x in {0..11}
do
    IFS=$'\n'
    filename=date_list.txt
    file=($(<"$filename"))
    IFS=$'\t\n'
    dt=${file[$x]}
    echo $dt

for y in {0..85}
do  
    IFS=$'\n'
    filename=SQL_Mnemonics.txt
    file=($(<"$filename"))
    IFS=$'\t\n'
    Mn=${file[$y]}

        for k in {3..502}
        do
            IFS=$'\n'
            c=.txt
            filename=${dt}${c}
            file=($(<"$filename"))
            IFS=$'\t\n'
            echo ${file[$k]} > temp_file.txt
            cusip=`cut -c11-19 temp_file.txt`
            result=$(sh ctest.sh $Mn, $dt, $cusip)
            echo "$result" > tmp1.txt
            t1=`cut -c18-40 tmp1.txt`
            echo $t1 | sed 's/[[:space:]]//g' > temp_file.txt
            cat tst.txt | sed 's/-----//g' >> ForFame/${Mn}.${dt}.txt
        done
done
done 
```

# php - 通过 PHP 的 SoapServer 访问 XML 参数

> ID：15484550
> 
> 赞同：0
> 
> 时间：2013-03-18T18:49:14.553
> 
> 标签：php, soap, soapserver

我正在尝试使用 PHP 的 SoapServer 对象接收 SOAP 数据包。我已经成功完成了由 SoapServer 处理请求的基本设置，如下所示：

```
$server = new SoapServer(null, array('uri' => 'http://'.$_SERVER['SERVER_NAME'].'/lead'));
$server->addFunction('lead');
$server->handle(); 
```

它调用适当的函数并传入一个代表 HTTP 请求中传递的 XML 的 stdObject。我的问题是，有数据作为 XML 属性传递，而 SoapServer 生成的对象中没有传达该数据：

```
<Lead LeadID="6"> 
```

如何检索 LeadID 属性的值？

# javascript - Twitter Bootstrap - 使用轮播图像滚动到#ID

> ID：15484551
> 
> 赞同：0
> 
> 时间：2013-03-18T18:49:18.320
> 
> 标签：javascript, html, twitter-bootstrap

我正在一个项目中处理 twitter 引导轮播，并且必须对其进行自定义以应用自定义动画，例如选取框标签动画。每个项目都应该像字幕文本元素一样滑动。

我被困在这里，无法继续前进。我是否必须指定一些滚动时间来延迟项目或其他内容之间的滚动？（我知道我们可以使用*间隔*属性来延迟自动循环项目之间的时间，但我无法使用它来实现选框效果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:54:20.193

也许这可以帮助你...

* * *

## 第1步

将此 JavaScript 添加到您的页面。

```
$(function() {
    function filterPath(string) {
        return string
                .replace(/^\//, '')
                .replace(/(index|default).[a-zA-Z]{3,4}$/, '')
                .replace(/\/$/, '');
    }
    var locationPath = filterPath(location.pathname);
    var scrollElem = scrollableElement('html', 'body');

    $('a[href*=#]').each(function() {
        var thisPath = filterPath(this.pathname) || locationPath;
        if (locationPath == thisPath
                && (location.hostname == this.hostname || !this.hostname)
                && this.hash.replace(/#/, '')) {
            var $target = $(this.hash), target = this.hash;
            if (target) {
                var targetOffset = $target.offset().top;
                $(this).click(function(event) {
                    event.preventDefault();
                    $(scrollElem).animate({scrollTop: targetOffset}, 400, function() {
                        location.hash = target;
                    });
                });
            }
        }
    });

    // use the first element that is "scrollable"
    function scrollableElement(els) {
        for (var i = 0, argLength = arguments.length; i < argLength; i++) {
            var el = arguments[i],
                    $scrollElement = $(el);
            if ($scrollElement.scrollTop() > 0) {
                return el;
            } else {
                $scrollElement.scrollTop(1);
                var isScrollable = $scrollElement.scrollTop() > 0;
                $scrollElement.scrollTop(0);
                if (isScrollable) {
                    return el;
                }
            }
        }
        return [];
    }
}); 
```

## 第2步

在轮播中的图像周围添加一个`<a href="#ID"></a>`- 将要滚动到的包含元素的 ID 插入`href="#ID"`

然后确保页面上有一个具有匹配 ID 的 div（如果没有，它不会做任何事情）。

这对我来说效果非常好 - 我知道引导程序可能会内置类似的东西，但这在 100% 的时间里都有效。

干杯!

*我不记得我是从哪里得到这段代码的，但如果有人知道，我想感谢他们，因为它是一段很棒的代码。*

# java - 关于响应xml中类型属性的xsd模式定义

> ID：15484552
> 
> 赞同：0
> 
> 时间：2013-03-18T18:49:21.343
> 
> 标签：java, xsd, jax-ws

谢谢你的时间，java新手，

```
 <address type="sponsor">
                <fullAdress>
                    <street>Blah blah</street>
                    <country>Blah blah</country>
                </fullAdress>
            </address> 
```

这就是我的最终用户 xml，我对这里的属性类型有点困惑.. xsd 定义是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:05:09.837

从你问的情况来看，我的理解是你在问你的属性类型。我没有广泛使用 XSD，但这是我*认为*您正在寻找的东西。

```
<xs:element name="fullAddress">
 <xs:complexType>
    <xs:sequence>
      <xs:element name="street" type="xs:string"/>
      <xs:element name="country" type="xs:string"/>
    </xs:sequence>
 </xs:complexType>
</xs:element> 
```

显然，就声明等而言，文件本身涉及更多设置（这将是一个片段）。但正如您所见，我将街道和国家属性都指定为字符串类型。

希望这有帮助。:)

# android - 将图片从 Android 发送到 PC 上的 Matlab

> ID：15484555
> 
> 赞同：3
> 
> 时间：2013-03-18T18:49:31.037
> 
> 标签：android, image, matlab, transfer

我希望 Matlab 作为服务器执行，而 Android Java 应用程序作为客户端执行。Android 应该将一个大小为 460K 的字节数组传输到 Matlab。我无法在 Matlab 上正确获取整个数组。在 Matlab 中第一次调用 fread 读取随机数的字节（大约 320K-290K） - 这个数字由 t.BytesAvailable 正确表示。之后 t.BytesAvailable 得到 0 并且无法进一步读取。这是我使用的：

Java客户端代码：

```
Socket socket = new Socket("10.0.0.2", 3000);
OutputStream out = socket.getOutputStream();
out.write(buffer, 0, 460000);
out.flush();
out.close();
socket.close(); 
```

Matlab服务器代码：

```
t=tcpip('0.0.0.0', 3000, 'NetworkRole', 'server');
set(t, 'InputBufferSize', 500000); 
fopen(t); 
pause(1);
while (get(t, 'BytesAvailable') > 0) 
    display(get(t, 'BytesAvailable'));
    data=fread(t, t.BytesAvailable, 'uint8');
end
fclose(t); 
delete(t); 
clear t 
```

Matlab版本：

## >>版本

MATLAB 版本：8.1.0.604 (R2013a)

操作系统：Microsoft Windows 7 版本 6.1（内部版本 7601：Service Pack 1）

## Java 版本：Java 1.6.0_17-b04 与 Sun Microsystems Inc. Java HotSpot(TM) Client VM 混合模式

MATLAB 8.1 版 (R2013a) 计算机视觉系统工具箱 5.2 版 (R2013a) 图像采集工具箱 4.5 版 (R2013a) 图像处理工具箱 8.2 版 (R2013a) 仪器控制工具箱 3.3 版 (R2013a) MATLAB Coder 2.4 版 (R2013a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T14:42:45.570

通过 TCP 发送大量数据并立即关闭套接字可能有点“不安全”。查看这个超级信息指南 - [SO_LINGER](http://ia600609.us.archive.org/22/items/TheUltimateSo_lingerPageOrWhyIsMyTcpNotReliable/the-ultimate-so_linger-page-or-why-is-my-tcp-not-reliable.html) - 以及这个可能的干净工作的[好答案。](https://stackoverflow.com/questions/8874021/close-socket-directly-after-send-unsafe)

如果您负担得起，一个更简单、更脏的解决方法就是`sleep`在发送之后和之前等待（通过调用）`socket.close()`。

# oracle - 是否可以溢出 Oracle NUMBER 类型？

> ID：15484564
> 
> 赞同：3
> 
> 时间：2013-03-18T18:49:52.733
> 
> 标签：oracle, plsql

我正在使用名为 Appworx 的进程调度软件。其中，每个进程和子进程可以有任意数量的“条件”，如果为真，则采取一些条件动作。

可能的条件操作之一是 goto 语句，其中一个普通整数是标签（每个条件从 1 开始编号）。我想使用此功能在循环中评估和运行一些任务，但您只能*转到*更高编号的条件（不要问我为什么......这似乎破坏了大部分实用程序）。

我有理由相信所有这些都是由 Oracle 在后端评估的。在查看 Appworx 的架构后，*goto*标签似乎都是 NUMBER(12,0)。我怀疑检查标签是否低于当前条件的逻辑类似于：

```
where label > current_condition 
```

所以，如果我要提供一个足够高的值的 goto，我认为它会欺骗检查并允许我执行简单的循环。至少如果 Oracle 使用普通整数。是否有可能使它们溢出，我将使用什么值将值溢出回 1？

我想Oracle版本很重要，如果是的话，那就是11g。

PS 另外，如果有人愿意为我重新标记此内容，请添加“appworx”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:07:44.413

Oracle 数字实际上是具有 40 个十进制数字有效位的浮点数。
所以，它们不能溢出。

(10^40-1) 是可以加1的最大整数。
[证明](http://www.sqlfiddle.com/#!4/55c44/9)

NUMBER(12,0) 是 NUMBER 类型的子类型。
也就是说，它由 NUMBER 类型和一个限制检查器组成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:26:47.573

好吧，这取决于您对“溢出”的定义。如果您将“溢出”定义为“找到一个值**n**，其中**n** + 1 < **n** ”，那么不，没有这样的值。如果您将“溢出”定义为“引发异常”，那么是的，很有可能在引发异常的 NUMBER(12,0) 上执行操作。

运行以下命令：

```
DECLARE
  n  NUMBER(12, 0);
BEGIN
  n := 999999999999;  -- Twelve 9's
  DBMS_OUTPUT.PUT_LINE('1 : n=' || n);
  n := n + 1;
  DBMS_OUTPUT.PUT_LINE('2 : n=' || n);
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('Exception: ' || SQLCODE || '  ' || SQLERRM);
END; 
```

如您所见，尝试执行“n := n + 1”时会引发以下异常：

```
ORA-06502: PL/SQL: numeric or value error: number precision too large 
```

所以很有可能溢出 NUMBER 的子类型。但是，鉴于您希望找到 n + 1 < n 的值n **，**我**认为****您**不走运。

 ****如果你真的想使用基本的 NUMBER 类型来引发这种行为，只需执行

```
n := POWER(10, 126); 
```

当然，对于 NUMBER 中真正***令人讨厌的***行为，您需要让它产生一个 NaN（不是数字）：

```
n := 9999999999999999999999999999999999999999 * POWER(10, 125);
DBMS_OUTPUT.PUT_LINE('n=' || n); 
```

生产

```
n=~ 
```

怎么回事？！？'~'？“~”到底是什么鬼？好吧，这似乎是 Oracle 打印 NaN 的方式。真正*有趣*的部分是什么？一旦你在一个变量中得到一个 NaN，你对该变量执行的任何操作都会产生另一个 NaN。悄悄。默默。没有警告。没有追索权。尝试：

```
DBMS_OUTPUT.PUT_LINE('n * 1234=' || n * 1234);  -- produces n * 1234=~
DBMS_OUTPUT.PUT_LINE('n / 5678=' || n / 5678);  -- produces n / 5678=~ 
```

嘿 - 玩得开心！:-)

在实际实践中，你不太可能遇到这种行为，但这是你真正需要注意的事情——不仅因为遇到它真的会毁了你的一个月，而且因为（你可以指望这个）下周浴室旁边那个无知的家伙会问这个问题——*你*现在就会知道这一切了。（而且你现在可以放心了，知道这个人真的*很*无能，因此应该被停在地狱的立方体中。我的意思是，你在 StackOverflow 上发现了这个，对吧？那么有多难呢？是吗？:-)

分享和享受。****

# eclipse - Eclipse 调试器可以通过 getter/setter 显示/设置“虚拟”字段吗？

> ID：15484566
> 
> 赞同：0
> 
> 时间：2013-03-18T18:49:56.710
> 
> 标签：eclipse, debugging

我们有一组包含许多“虚拟字段”的类，其中每个“字段”的实际存储是具有非明显索引的数组元素，并且“字段”始终由 getter/setter 访问。在显示此类对象时，最好显示“虚拟字段”，看起来像普通字段，但使用 getter/setter 进行访问。

详细格式化程序，AFAICT，并没有真正提供一种方法来做到这一点。

如果我什至可以为此获得只读支持（没有设置器），那将有所帮助。

我希望（可能是徒劳的）有一个解决方案，我们可以使用某种配置文件或进程，甚至可能是插件来为所有这些类设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:44:31.220

[逻辑结构是您所需要](http://wiki.eclipse.org/Debug_FAQ#What_are_logical_structures.3F)的。所以我有这门课

```
public class Something {

    public String[] fields;

    public Something(final String[] fields) {
        this.fields = fields;
    }
    public String first() {
        return fields[0];
    }
    public String second() {
        return fields[1];
    }
} 
```

然后您可以进入 Preference > Java > Debug > Logical 结构并添加您的类和具有相应 getter 方法的字段，如下所示

![添加逻辑结构](../Images/470cd673eeb3190228d55964e7c5054f.png)

这将导致调试窗口看起来像这样

![调试变量](../Images/8b500a0f35d8b446f696fd9623573a12.png)

如果没有，请确保选择了逻辑结构按钮（指向树结构的黄色箭头）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:02:26.103

我能想到的最接近的事情是实现 toString() 以便虚拟字段的值以可读格式作为字符串的一部分返回。这可能无法扩展到许多“虚拟”字段，但它是一种有用的调试技术（通常）。当您在调试器中选择一个对象时，将显示其 toString() 结果。

# python - 用python删除文件中的最后4个字符

> ID：15484568
> 
> 赞同：-2
> 
> 时间：2013-03-18T18:50:02.073
> 
> 标签：python, string

我有一个根据字符串创建文件的代码。但是，如果我创建一个文件，例如最后没有“.txt”，它会生成一个通用文件。

我说，好吧，我把“.txt”放在名字的末尾。它创建一个 .txt，但名称为“Whatever I typed.txt”以及“.txt”扩展名。

我希望我的程序从名称中删除“.txt”或最后 4 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:51:55.547

您可以使用字符串拆分：

```
filename = "whatever.txt"
filename_without_extension = filename[:-4] 
```

或者使用`os.path.splitext`which 给出一个包含文件名和扩展名的元组：

```
path.splitext(filename) 
```

这会给你`('whatever', '.txt')`

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:51:33.127

这将从 a 中删除最后四个字符`str`：

```
name = name[:-4] 
```

# c# - c# 中的事件处理程序仅适用于新控件

> ID：15484574
> 
> 赞同：0
> 
> 时间：2013-03-18T18:50:24.150
> 
> 标签：c#, winforms, event-handling

这是在使用 c# 的 WinForms 中。有一个包含 10 个单选按钮的表单，即汽车、自行车、火车、公共汽车等。还有一个带有文本“XYZ”的标签。所有这些都在同一个组框中。我编写了以下常用方法来隐藏选中单选按钮时的文本。

```
private void Hide_radio(object sender, EventArgs e)
{
    RadioButton rb = sender as RadioButton;
    if (rb != null)
       label1.Text="";              
} 
```

奇怪的是，按以下方式调用事件（就在初始化组件下），仅适用于少数无线电而不是全部。当我拖动一个新收音机时，它可以工作。[严格拖放。没有添加或删除新代码。]

```
foreach (Control gb1c in groupBox1.Controls)
{
    if (gb1c is RadioButton)
    {
        RadioButton rb = gb1c as RadioButton;
        rb.CheckedChanged += new MouseEventHandler(Hide_radio);
        break;
    }
} 
```

我检查了designer.cs，所有收音机的代码都是一样的。所以基本上，事件处理只在少数新收音机上工作，但不是全部。为什么 C# 表现得如此幼稚..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:53:27.583

您正在打破第一个事件订阅的 foreach 循环。从循环中删除“中断”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:53:32.260

您的使用`break;`退出循环，因此任何尚未分配事件处理程序的控件都不会获得事件处理程序。这不是 C# 的幼稚行为，而是 C# 完全按照您的指示行事。

# dynamics-crm-2011 - Dynamics CRM 2011 - 与不同实体相关的每个插件是否都必须拥有自己的程序集？

> ID：15484589
> 
> 赞同：1
> 
> 时间：2013-03-18T18:51:07.103
> 
> 标签：dynamics-crm-2011, crm, microsoft-dynamics

我正在创建一系列相关的插件。每个插件适用于不同的实体。每个插件都必须有自己的程序集吗？我正在使用 Visual Studio，并在同一解决方案中创建了第二个项目，但我看不到注册工具中的新步骤。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:16:29.220

它可以做，但不是必须的。这几乎是您的设计决定。考虑一下你是否有几个类都实现了`IPlugin`

```
public class MyFirstPlugin : IPlugin
{
    //implemented as per usual
}

public class MySecondPlugin : IPlugin
{
    //implemented as per usual
} 
```

如果您要在插件注册工具中注册该 DLL，您将看到以下结构：

```
- Server
    - DLL
        - MyFirdtPlugin
        - MySecondPlugin 
```

然后，您可以根据需要向每个插件添加步骤。

另一种方法是每个 DLL 有一个插件，这会给你

```
- Server
    - DLL1
        - MyFirstPlugin
    - DLL2
        - MySecondPlugin 
```

我必须承认这似乎有点矫枉过正——但它也可能取决于你如何使用你的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:34:03.970

除了 glosrob 的回答，我猜您正在使用插件注册工具来注册您的插件。如果是这样，您需要确保在将新插件添加到同一个 dll 之后，使用注册工具更新插件 dll 本身，以便您可以注册您创建的新插件方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:14:43.437

是的，您可以在不同的类库项目中创建每个插件，但这不是一个好习惯。我更愿意将所有插件收集到一个类库中。

请注意，从文件对话框中选择程序集后，您必须单击加载程序集按钮以加载所有实现 IPlugin 接口的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T00:30:25.113

要回答这个问题 - 不，每个新插件都不必包含在新程序集中。

详细说明 - 从技术上讲，将所有插件代码放入一个项目和一个文件中是可行的。

警告 - 上面将是管理所有 ifs 和 buts 的噩梦，所以这是一个很好的例子，可以但不应该。

建议 - 我通常为每个实体的插件有一个单独的项目，并使用开关处理所有消息。有时，我可能有两到三个集会，但当你到达那里时，你就会知道什么时候该这样做。通常，一个 DLL 就足够了。

# java - 将位图存储在数组中？

> ID：15484591
> 
> 赞同：0
> 
> 时间：2013-03-18T18:51:14.570
> 
> 标签：java, android

嗨，我正在尝试从服务器下载一些图像，但我不会将它们保存到 SD 卡，因为我希望它们在应用程序完成后消失。因此，我想将它们存储在位图数组中。这可行吗？我最大的图像大约是 1000X1086，大约有 30-40 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:55:07.560

不会。位图以未压缩字节的形式存储在内存中。1000x1086 全彩色位图大约为 4MB。大多数手机允许应用程序最多使用 16-40 MB，其中包括内置资源。你超过了 10 倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:59:43.613

我正在使用通用图像加载器。您可以仅将图像保存在内存中并在退出时将其清除。

这是下载图像的所有选项。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:19:22.603

您有一个选项...它不依赖于手机内存...您可以将图像保存在存储卡中并在应用程序完成时删除...这是一个非常优雅的方法...

# mysql - 如何解锁mysql中的行锁？

> ID：15484603
> 
> 赞同：2
> 
> 时间：2013-03-18T18:52:11.730
> 
> 标签：mysql, mysqldump

运行以下命令；

```
SHOW ENGINE INNODB STATUS\G; 
```

然后是一些输出；

> 7 个锁结构，堆大小 3024，25 行锁，撤消日志条目 1，MYSQL 线程 id 30945，查询 id 1913360 localhost 127.0.0.1

如何解锁这个锁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:53:55.680

您可以尝试使用`FLUSH TABLE user`

# html5-canvas - JS 控制台错误 - 未定义对象

> ID：15484605
> 
> 赞同：0
> 
> 时间：2013-03-18T18:52:14.760
> 
> 标签：html5-canvas, if-statement, javascript

我有以下 JS 函数，我用它来检测我的 HTML5 画布上的“可拖动”图像是否被拖动到静态“描述框”图像的顶部，也显示在画布上：

```
function isHit(mouseX, mouseY){
if(draggingImage == true){
    console.log("if dragging image == true statment is being called");
    if(mouseY > 420){
        if((mouseX > 80) && (mouseX < 200) && (obj.shape.index >= 0) && (obj.shape.index <= numImagesAssets)){
            console.log("Correct");
        }else{
            console.log("Incorrect");
        }
    }
} 
```

}

这个想法是画布上会有许多静态图像（将是描述框），以及更多的可拖动图像。将要求用户将每个可拖动的图像拖到相关的描述框中。

目前，我的`if`声明只是检查当前被拖动的图像是否属于四个描述框中的第一个。

由于描述框都显示在画布底部的一行中，因此我将函数设置为仅在`mouseY`变量（画布上光标的 y 位置）大于 420 时检查碰撞，因为 420 是描述框图像的顶部“边界”。

然后，如果`draggingImage`变量为真，并且光标的`mouseY`值大于 420，我想开始检查光标是否悬停在任何描述框上。第一个显示在 X 位置 80 和 200 之间，所以我正在检查 mouseX 是否大于 80 且小于 200。

如果是，则该函数应检查 的值`obj.shape.index`是否大于或等于 0 且小于 的值`numImagesAssets`。如果是，控制台应该记录“正确”，如果不是，它应该记录“不正确”。

该变量`obj.shape.index`获取在我的图像数组中已单击的图像的位置（该数组包含画布上显示的所有可拖动图像）。如果那个值在某个范围之间，那么我知道图像属于第一个描述框，如果它在另一个范围之间，它属于下一个描述框，等等。

在此示例中，变量的值为 10（如我的代码中的一行在`numImagesAssets`控制台中显示的那样）`console.log`

在我的`mousedown`功能中，我有这行：

```
console.log("value of variable obj:" + output + ". Shape is " + obj.shape + ". index is " + obj.shape.index); 
```

当我单击画布上的图像时，此 console.log 行显示变量属性的值`obj.shape.index`，例如，我只是单击了画布上的一个可拖动图像，此行将以下输出打印到控制台：

```
value of variable obj:shape: [object Object]; pixel: [object Uint8ClampedArray]; . Shape is [object Object]. index is 8 
```

所以我知道我当时单击的图像位于图像数组中的第 8 位（我已经手动检查了几次，每次单击不同的图像，它始终显示正确的位置）。

现在，我遇到的问题是，当我实际将图像拖动到其正确的描述框上时，我收到一个控制台错误，上面写着“未定义 obj”，并且它抱怨该行：

```
if((mouseX > 80) && (mouseX < 200) && (obj.shape.index >= 0) && (obj.shape.index <= numImagesAssets)){ 
```

但是，奇怪的是，如果我将图像拖到它不属于的描述框之一，`else`我的`if`语句中的子句被正确触发，并且“不正确”这个词被打印到控制台......

我无法弄清楚为什么当我将图像拖到正确的描述框时它不起作用，或者为什么它说在这种情况下没有定义“obj”，但很高兴将“obj”用于“else”语句中的子句`if`。

有人有想法么？

**编辑 19/03/2013 @ 12:00**

好的，我已经`isHit`稍微编辑了我的函数，以添加另一`console.log`行来显示`obj.shape.index`我的`isHit`函数中的值。该函数现在看起来像这样：

```
function isHit(mouseX, mouseY, obj){
if(draggingImage == true){
    console.log("if dragging image == true statment is being called");
    if(mouseY > 420){
        console.log("Value of obj.shape.index = " +obj.shape.index);
        if((mouseX > 80) && (mouseX < 200) && (obj.shape.index >= 0) && (obj.shape.index <= numImagesAssets)){
            console.log("Correct");
        }else{
            console.log("Incorrect");
        }
    }
}
} 
```

在调用之前，我有以下控制台日志行`isHit`：

```
console.log("obj.shape.index = " + obj.shape.index); 
```

`obj.shape.index`当我第一次单击图像时，这条线显示 的值为0（这是正确的 - 它是我的图像数组中的第一个图像），但是，当我随后在画布上拖动图像时，的值`obj.shape.index`似乎随机增加...有一次控制台显示它是 23，然后是 25，然后当我最终将它拖到它的描述框时，控制台记录了以下行：

```
if dragging image == true statment is being called 
```

显示该`isHit`函数正在被调用，接下来打印到控制台的是以下行：

```
Value of obj.shape.index = 34 
```

知道为什么 的价值`obj.shape.index`不断增加吗？它实际上不是数组中元素的位置吗？我确定确实如此，因为当我单击其他图像之一时，它会显示它们在数组中的位置值，所以我不明白为什么当我在画布上移动图像时该值不断增加。 ..它在数组中的位置根本没有改变...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:25:56.480

如果 obj.shape.index 在输入 isHit() 之前有效，则您可能遇到了范围问题。

试试这个——将 obj 提供给 isHit：

```
// call isHit and also supply obj
console.log("obj = "+obj);                 // Test obj for validity just before calling isHit
var isItHit = isHit(mouseX, mouseY, obj);  // Then call isHit WITH obj

// and modify isHit to accept the obj
function isHit(mouseX,mouseY,obj) { ... 
```

# regex - 尝试使用 RewriteRule 匹配子域和路径，仅获取子域

> ID：15484607
> 
> 赞同：0
> 
> 时间：2013-03-18T18:52:34.470
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我正在本地项目中进行一些测试（使用 vHosts）。我设法创建了一个 RewriteRule 以重定向`something.kensaku.com`到`www.kensakuapp.com/something`，但我想重定向`something.kensaku.com/myapp`到`www.kensakuapp.com/something/myapp`.

我的重写规则是这样的：

```
Options +FollowSymLinks

RewriteEngine On
RewriteCond %{HTTP_HOST} ^(^.*)\.kensaku.com
RewriteRule ^(^.*) goto.php?username=%1&path=$1 
```

我已经尝试了几个小时，但我仍然无法获得`/myapp`零件。如果我去`something.kensaku.com/myapp`，`$1`会匹配`goto.php`，但不应该匹配`/myapp`吗？

这是`goto.php`我用于重定向的脚本的内容：

```
<?php 
$user = $_GET['username'];
header("Location: http://www.kensakuapp.com/$user/".$_GET['path']); 
?> 
```

如果有其他方法可以在不使用 PHP 的情况下做到这一点，我会很高兴知道它——但如果可能的话，我想继续使用 PHP 方法，因为将来我可能想向它添加跟踪或日志记录功能.

如果我错过了这个问题的任何内容，请告诉我！

**编辑：** rewritemod 的日志，跟踪 3：

```
[Wed Mar 20 19:26:28.624291 2013] [rewrite:trace1] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7d120/initial] [perdir /opt/lampp/htdocs/kensaku/] pass through /opt/lampp/htdocs/kensaku/
[Wed Mar 20 19:26:28.624352 2013] [rewrite:trace1] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7b118/subreq] [perdir /opt/lampp/htdocs/kensaku/] pass through /opt/lampp/htdocs/kensaku/index.html
[Wed Mar 20 19:26:28.624402 2013] [rewrite:trace1] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7b118/subreq] [perdir /opt/lampp/htdocs/kensaku/] pass through /opt/lampp/htdocs/kensaku/index.html.var
[Wed Mar 20 19:26:28.624434 2013] [rewrite:trace1] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7b118/subreq] [perdir /opt/lampp/htdocs/kensaku/] pass through /opt/lampp/htdocs/kensaku/index.php
[Wed Mar 20 19:26:28.630172 2013] [rewrite:trace3] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7f2f0/initial] [perdir /opt/lampp/htdocs/kensaku/] strip per-dir prefix: /opt/lampp/htdocs/kensaku/ -> 
[Wed Mar 20 19:26:28.630202 2013] [rewrite:trace3] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7f2f0/initial] [perdir /opt/lampp/htdocs/kensaku/] applying pattern '^.+$' to uri ''
[Wed Mar 20 19:26:28.630216 2013] [rewrite:trace1] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7f2f0/initial] [perdir /opt/lampp/htdocs/kensaku/] pass through /opt/lampp/htdocs/kensaku/
[Wed Mar 20 19:26:28.630277 2013] [rewrite:trace1] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7b118/subreq] [perdir /opt/lampp/htdocs/kensaku/] pass through /opt/lampp/htdocs/kensaku/index.html
[Wed Mar 20 19:26:28.630327 2013] [rewrite:trace1] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7b118/subreq] [perdir /opt/lampp/htdocs/kensaku/] pass through /opt/lampp/htdocs/kensaku/index.html.var
[Wed Mar 20 19:26:28.630360 2013] [rewrite:trace1] [pid 24190] mod_rewrite.c(467): [client 127.0.0.1:52996] 127.0.0.1 - - [www.kensaku.com/sid#982bb28][rid#9a7b118/subreq] [perdir /opt/lampp/htdocs/kensaku/] pass through /opt/lampp/htdocs/kensaku/index.php 
```

**编辑 2**：这里是虚拟主机：

```
# Kensaku Domains
<VirtualHost *:80>
   ServerAdmin admin@kensaku.com
   DocumentRoot /opt/lampp/htdocs/kensaku
   ServerName kensaku.com   
   ServerAlias *.kensaku.com
</VirtualHost>
<VirtualHost *:80>
   ServerAdmin admin@kensaku.com
   DocumentRoot /opt/lampp/htdocs/kensakuapp
   ServerName kensakuapp.com   
   ServerAlias *.kensakuapp.com
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:26:27.033

这里不需要 PHP。

只需在 a 中捕获所需的部分[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)并[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)在替换中使用它们

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(.+?)\.kensaku\.com$
RewriteRule ^.*$ http://www.kensakuapp.com/%1/$0 [R,L] 
```

`something`这在 RewriteCond in`%1`和`myapp`RewriteRule in 中捕获`$0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:53:19.293

在没有看到您的日志的情况下，我并不完全确定，但我的第一个猜测是您需要将传递标志 ( `[PT]`) 添加到您的规则中：

```
RewriteRule ^(.*) /goto.php?username=%1&path=$1 [PT] 
```

除了`PT`标志之外，我还删除了`^`您规则中的错误双精度，并且我已经制定了`goto.php`明确的路径（可能需要也可能不需要，但可能是一种很好的做法）。关于`PT`标志，请从`mod_rewrite`文档中记住这一点：

> 默认情况下，mod_rewrite 将 URL 映射到文件系统路径。

重写 ( `goto.php?...`) 的目标不是文件系统路径，因此您需要 Apache 进一步处理它。`passthrough`标志是这样做的：

> 强制将生成的 URI 传递回 URL 映射引擎，以处理其他 URI 到文件名的转换器，例如 Alias 或 Redirect。

如果这不能解决问题，请按要求发布您的日志，我们可以仔细查看

# ios - 使用 json，读取目标 c 中的内容

> ID：15484608
> 
> 赞同：0
> 
> 时间：2013-03-18T18:52:54.480
> 
> 标签：ios

我正在学习一种从天气 api 下载数据的非常基本的方法。基本上试图按照教程。

使用 URL，我可以将 JSON 格式的数据下载到字典中。然后放入数组中。

我现在的问题是如何读取数组中某个项目的特定值。

例如，当我对数组执行 NSLOG 时，我得到以下结果……我只剪切/粘贴了一对，因为有 55 个项目。

所以我的问题是如何获取这个数组的特定值？

```
2013-03-18 14:37:57.576 LocalWeatherV3[1220:c07] loans: {
    UV = 2;
    "dewpoint_c" = "-4";
    "dewpoint_f" = 24;
    "dewpoint_string" = "24 F (-4 C)";
    "display_location" =     {
        city = "Jersey City";
        country = US;
        "country_iso3166" = US;
        elevation = "47.00000000";
        full = "Jersey City, NJ";
        latitude = "40.75180435";
        longitude = "-74.05393982";
        state = NJ;
        "state_name" = "New Jersey";

        zip = 07097;
    };
    estimated =     {
    };
    "feelslike_c" = 2;
    "feelslike_f" = 35;
    "feelslike_string" = "35 F (2 C)";
    "forecast_url" = "http://www.wunderground.com/US/NJ/ 
```

这是 .m 的一部分

```
- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization
                          JSONObjectWithData:responseData //1

                          options:kNilOptions
                          error:&error];

    NSArray* latestLoans = [json objectForKey:@"current_observation"]; //2

    NSLog(@"loans: %@", latestLoans); //3

// 1) Get the latest loan
//NSDictionary* loan = [latestLoans objectAtIndex:1];
NSInteger counter = [latestLoans count]; 
```

提前致谢！！

所以当我这样做时

```
NSDictionary* json = [NSJSONSerialization
                      JSONObjectWithData:responseData //1

                      options:kNilOptions
                      error:&error]; 
```

我将鼠标悬停在本地手表上，我看到了

```
json    NSDictionary *  0x08d62d40
[0] key/value pair  
key id  0x08d61cf0
value   id  0x08d62100
[1] key/value pair  
key id  0x08d62150
value   id  0x08d633a0 
```

然后我做

```
NSArray* latestLoans = [json objectForKey:@"current_observation"]; //2

NSLog(@"loans: %@", latestLoans); //3 
```

我想要的项目之一是“最新贷款”，这是所有数据显示的地方。所以我不知道如何抓住其中一件物品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:01:06.380

假设您正在尝试获取预测网址。它很简单：

```
// update this line
NSDictionary *latestLoans = [json objectForKey:@"current_observation"];
// url variable will contain the first forecast url in the array
NSString *url = [latestLoans objectForKey:@"forecast_url"]; 
```

# jquery - jQuery 验证引擎：创建自定义函数时遇到问题

> ID：15484609
> 
> 赞同：3
> 
> 时间：2013-03-18T18:52:58.100
> 
> 标签：jquery, asp.net-mvc-3, validation, jquery-validation-engine

我已经尝试了列出[文档的](http://posabsolute.github.com/jQuery-Validation-Engine/#validators/custom-function_name)**custom[function_name]**和**funcCall[methodName]**方法，但我似乎都无法工作。

我的自定义函数如下所示：

```
function einTest(field, rules, i, options) {
        if (field != null) {
            var x = field.toString();
            if (x.length != 5) {
                return options.allrules.ein.alertText2;
            }
        }
        else {
            return options.allrules.ein.alertText;
        }
    } 
```

我在 vaildationEngine-en.js 文件中创建了以下内容：

```
"ein": {
                "alertText": "Not a number.",
                "alertText2": "Must be a 5 digit number."
    }, 
```

我正在尝试在以下 html 字段中使用它：

```
<tr>
<td><b>Associate Number (EIN):</b></td>
<td><input type="text" id="EIN" name="EIN" class="validate[required,funcCall[einTest]]" data-prompt-position="inline" /></td>
</tr> 
```

但似乎没有任何效果...... einTest 函数没有触发。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T11:59:05.130

***[`jsFiddle Demo`](http://jsfiddle.net/DAxA3/)***

您很可能没有正确公开该功能。该函数需要限定范围才能在全局范围内调用。“使用第三方函数调用验证字段”^([文档](http://posabsolute.github.io/jQuery-Validation-Engine/#validators/custom-function_name))，基本上它意味着它寻找它的范围`window`。

所以首先要做的是确保你的函数是公开的。

```
window.einTest = function(field, rules, i, options) { 
```

接下来要记住的是，该字段实际上是包装元素的 jquery 对象。所以为了看起来像它的价值或存在，你应该使用`field.val()`

```
if (IsNumeric(field.val())) { 
```

辅助函数

```
//source: http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric
function IsNumeric(input)
{
 return (input - 0) == input && (input+'').replace(/^\s+|\s+$/g, "").length > 0;
} 
```

这是最终的结果，

html

```
<p>Enter text in the input and then focus out to see the validation at work.</p>
<b>Associate Number (EIN):</b><br>
<form>
<input type="text" id="EIN" name="EIN" class="validate[required,funcCall[einTest]]" data-prompt-position="inline" />
</form> 
```

js

```
window.einTest = function(field, rules, i, options) {
 if (IsNumeric(field.val())) {
  var x = field.val();
  if (x.length != 5) {
   return options.allrules.ein.alertText2;
  }
 }
 else {
  return options.allrules.ein.alertText;
 }
};

function IsNumeric(input)
{
 return (input - 0) == input && (input+'').replace(/^\s+|\s+$/g, "").length > 0;
}
//plus library initialization 
```

# git - git push 文件不会远程更新

> ID：15484610
> 
> 赞同：0
> 
> 时间：2013-03-18T18:52:59.567
> 
> 标签：git

一个很常见的场景：

我们有一个裸存储库。如果开发人员`git push`从他们的本地机器到`bare`repo，然后另一个开发人员`git pull`更新了应用程序的本地版本（包括文件）。

但是，有时，当直接（由我们的主机或其他）`remote working tree`对`remote working tree`.

根据这个：

[https://git.wiki.kernel.org/index.php/GitFaq#non-bare](https://git.wiki.kernel.org/index.php/GitFaq#non-bare)

> 推送操作总是关于传播存储库历史和更新 refs，并且从不触及工作树文件。特别是，如果您推送更新在远程存储库中签出的分支，则不会更新工作树中的文件。

我不确定是什么`checked out in a remote repository`意思。我没有`git checkout whatever`使用 ssh 远程切换分支（如果这就是意思的话）。

无论如何，如果我们执行 git push，则不会触及任何工作树文件。行。

所以为了解决这个问题：

> 如果你确定你在做什么，你可以在你推到的那一侧做一个“git reset --hard”。请注意，这将丢失您在那一侧所做的所有更改，将工作树重置为您推送的最新版本。

“git重置--硬”

我这样做了，但没有任何改变。它说：

```
HEAD is now at 45d948a Merge branch 'dev' of /home/blabla/private/repos/blabla_hub into dev 
```

但什么都没有改变。

1）如果所有开发人员只是通过一个裸（无工作树）存储库推拉，他们如何更新工作树？（文件在哪里通过？）

2) 为什么我没有`remote working tree`按预期获得更新？

我的问题清楚吗？请指教。

**更新**

我正在使用 dev 和 master 分支。在本地和远程，除此之外，我正在使用这个模式：

> 该系统的关键思想是网站作为一对存储库存在于服务器上；与包含实时站点的常规存储库一起的裸存储库。两个简单的 Git 钩子链接这对，自动在它们之间推送和拉取更改。
> 
> 两个仓库：
> 
> ```
> Hub is a bare repository. All other repositories will be cloned from this.
> Prime is a standard repository, the live web site is served from its working directory. 
> ```
> 
> 使用这对存储库既简单又灵活。使用 ssh-access 的远程克隆可以通过简单的 git push 到 Hub 来更新实时站点。任何直接在服务器上编辑的文件都会在提交时立即镜像到 Hub。

参考。[http://joemaller.com/990/a-web-focused-git-workflow/](http://joemaller.com/990/a-web-focused-git-workflow/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:30:23.500

据我了解，您至少有三个存储库：`local`、`hub`和`www/dev`. 您使用`local`repo 进行工作（进行更改、提交和推送`hub`）。有时`www`工作树会被网络服务器修改。如果您想将这些更改保留在版本控制之下，您可以将它们提交到`www/dev`repo，甚至将提交`www/dev`从`hub`. （您可能可以通过 cron 作业自动执行此操作。我建议使用 的输出`git status`来确定您是否要提交。）

您最初的问题听起来像是回购的工作副本与回购本身`www/dev`不同步。`www/dev`在聊天中进一步讨论之后，似乎`www/dev`回购并不总是与`hub`回购保持同步。您只需要确保在必要时`git pull`在`www/dev`repo 中运行（可能使用钩子或其他脚本）。

# asp.net - asp.net Web API 文件上传文件数据为空

> ID：15484619
> 
> 赞同：2
> 
> 时间：2013-03-18T18:53:17.087
> 
> 标签：asp.net, asp.net-web-api

我正在使用随处可见的几个示例中的任何一个来使用 .net Web API 进行文件上传。文件存储到服务器，但提供程序上的 fileData 对象始终返回空。代码如下。

```
 var url = "api/Documents/fileUpload";
                    var xhr = new XMLHttpRequest();
                    var file = document.getElementById("inputFile").files[0];
                    var formData = new FormData();
                    formData.append('file', file);
                    xhr.open("POST", url, true);
                    xhr.responseType = "text";
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState == xhr.DONE) {
                            console.log("photoUpload xhr", xhr);
                            var responseTypeAsJSON = JSON.parse(xhr.responseText);
                            currentPhoto.responseText = xhr.responseText;
                            if (responseTypeAsJSON.result == "SUCCESS") {
                                currentPhoto.status = "SUCCESSfully uploaded";
                            }
                            else {
                                currentPhoto.status = responseTypeAsJSON.result;
                                alert(responseTypeAsJSON.message);
                            }
                            PhotoClear();
                            // console.log(currentPhoto);
                            // console.log("xhr done: ", xhr);  

                        }
                    }
                    xhr.send(formData);
                    // console.log("xhr sent: ", xhr); 
```

控制器接收：

```
 [HttpPost]
    [ActionName("fileUpload")]
    public Task<HttpResponseMessage> fileUpload()
    {
        HttpRequestMessage request = this.Request;
        if (!request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        string root = System.Web.HttpContext.Current.Server.MapPath("~/App_Data");
        var provider = new MultipartFormDataStreamProvider(root);

        var task = request.Content.ReadAsMultipartAsync(provider).
            ContinueWith<HttpResponseMessage>(o =>
            {

                string file1 = provider.FileData.First().LocalFileName.ToString();
                // this is the file name on the server where the file was saved 

                return new HttpResponseMessage()
                {
                    Content = new StringContent("File uploaded.")
                };
            }
        );
        return task;
    } 
```

这是来自 Chrome 的请求。当我调试提供者时，表单数据的键也是空的。然而文件被放入 AppData

```
Request URL:http://localhost:4231/api/Documents/fileUpload
Request Headersview source
Content-Type:multipart/form-data; boundary=----WebKitFormBoundarycuGegdEDmBsR0mMl
Origin:http://localhost:4231
Referer:http://localhost:4231/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko)     Chrome/25.0.1364.172 Safari/537.22
Request Payload
------WebKitFormBoundarycuGegdEDmBsR0mMl
Content-Disposition: form-data; name="testInfo"

some info here for testing
------WebKitFormBoundarycuGegdEDmBsR0mMl
Content-Disposition: form-data; name="file"; filename="irislogo.png"
Content-Type: image/png

------WebKitFormBoundarycuGegdEDmBsR0mMl-- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-14T23:38:33.570

我遇到了这个确切的问题，一个小的代码更改解决了这个问题。

该行：

```
 var provider = new MultipartFormDataStreamProvider(root); 
```

应该：

```
 var provider = new MultipartFileStreamProvider(root); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T15:59:10.987

我也有这个问题；这是解决方案：

```
public async Task<HttpResponseMessage> Save()
{
    string root = HttpContext.Current.Server.MapPath("~/App_Data");

    var provider = new MultipartFormDataStreamProvider(root);

    await Request.Content.ReadAsMultipartAsync(provider);

    // provider.FileData will contain your data...
    // you can also send form data which will be in provider.FormData
} 
```

# perl - 安装 XML::Parser 需要 expat.h

> ID：15484620
> 
> 赞同：4
> 
> 时间：2013-03-18T18:53:20.017
> 
> 标签：perl, perl-module, cpan, yum

我正在开发一个项目，该项目需要将所有第三方（阅读：CPAN）perl 模块安装在 perforce 存储库中，以便任何依赖于它们的代码都可以成功运行，而无需其他任何人手动安装它们。我在尝试安装 XML::Parser 时遇到了一个问题。我使用 cpanminus 来安装我的 CPAN 模块，所以我`cpanm -L . XML::Parser`在所需的目录中运行（这在以前与其他模块一起使用过）并得到了错误：

```
Expat.xs:12:19: error: expat.h: No such file or directory 
```

我习惯使用 Ubuntu 和 apt-get，但在工作中我必须使用 RedHat，而且我不确定如何将 expat 安装到本地目录。我跑了`yum search expat`，得到了

```
expat.i386 : A library for parsing XML.
expat.x86_64 : A library for parsing XML. 
```

所以我尝试`yum install --installroot=. expat.i386`并得到以下错误：

```
Loaded plugins: rhnplugin, security
error: cannot open Packages index using db3 - No such file or directory (2)
error: cannot open Packages database in ./var/lib/rpm
Traceback (most recent call last):
  File "/usr/bin/yum", line 29, in ?
    yummain.user_main(sys.argv[1:], exit_code=True)
  File "/usr/share/yum-cli/yummain.py", line 309, in user_main
    errcode = main(args)
  File "/usr/share/yum-cli/yummain.py", line 157, in main
    base.getOptionsConfig(args)
  File "/usr/share/yum-cli/cli.py", line 187, in getOptionsConfig
    self.conf
  File "/usr/lib/python2.4/site-packages/yum/__init__.py", line 665, in <lambda>
    conf = property(fget=lambda self: self._getConfig(),
  File "/usr/lib/python2.4/site-packages/yum/__init__.py", line 240, in _getConfig
    self._conf = config.readMainConfig(startupconf)
  File "/usr/lib/python2.4/site-packages/yum/config.py", line 804, in readMainConfig
    yumvars['releasever'] = _getsysver(startupconf.installroot, startupconf.distroverpkg)
  File "/usr/lib/python2.4/site-packages/yum/config.py", line 877, in _getsysver
    idx = ts.dbMatch('provides', distroverpkg)
TypeError: rpmdb open failed 
```

我究竟做错了什么？此外，一旦我安装了 expat，我不确定如何告诉 cpanm 在哪里可以找到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:37:45.553

我看到了一些可以帮助您走上正确道路的事情。首先，你想要的包叫做`expat-devel`. 另外，我认为您需要提供 --installroot 选项的绝对路径，并且您可能不需要为 yum 提供包扩展名，除非这与您构建这些模块的方式相关（即，您通常可以这样做`yum install expat-devel`）。

看起来您的 rpmdb 也可能有问题，因为您收到“rpmdb open failed”消息。您可以运行`yum check`以查找 rpmdb 中的问题，但除此之外，我无法具体说明包管理器发生的任何事情。也许其他人可以在这方面提供更多帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T11:44:37.220

只需从[http://sourceforge.net/projects/expat/](http://sourceforge.net/projects/expat/)和 $ ./config $ make $ make install下载 expat

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:12:23.970

好吧，我找到了解决方法。我安装了 XML::Simple 代替。起初它看起来像 XML::Simple 需要 XML::Parser，但经过一番查看后发现它需要 XML::Parser 或 XML::SAX，所以我安装了 XML::SAX 并让 XML::Simple 工作. 足以满足我的需求。

# c++ - 如何在 Eigen 中将稀疏矩阵转换为密集矩阵

> ID：15484622
> 
> 赞同：20
> 
> 时间：2013-03-18T18:53:25.187
> 
> 标签：c++, matrix, sparse-matrix, eigen

是否有一些简单快捷的方法可以将稀疏矩阵转换为密集的双精度矩阵？

因为我`SparseMatrix`的不再稀疏了，而是经过一些矩阵乘积后变得稠密了。

我还有一个问题：Eigen 库有出色的性能，这怎么可能？我不明白为什么，因为只有头文件，没有编译源。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-23T21:29:44.277

让我们声明两个矩阵：

```
SparseMatrix<double> spMat;
MatrixXd dMat; 
```

稀疏到密集：

```
dMat = MatrixXd(spMat); 
```

密集到稀疏：

```
spMat = dMat.sparseView(); 
```

# google-maps - 用全屏模式窗口替换信息窗口？

> ID：15484623
> 
> 赞同：0
> 
> 时间：2013-03-18T18:53:26.277
> 
> 标签：google-maps, google-maps-api-3

我有一个谷歌地图（v3）设置，而不是地图信息窗口（仅限于地图的边界）我想使用一个全屏模式窗口，它将占据浏览器窗口中的所有区域. 该地图用于移动应用程序，因此我需要在弹出的窗口中获得的所有空间。

如果有人对如何实现这一点有任何了解，或者可以为我指出正确的方向，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:58:08.003

如果它是全屏模式，那么它不必附加到地图上，所以你可以使用这个结构：

```
<div id="map-canvas"></div>
<div id="modal"></div>

<script>
 var map = new google.maps.Map(document.getElementById('map-canvas'),{
  //options
 });

 google.maps.event.addListener(map,'click',function(e) {
  //do something with div id="modal"
 });
</script> 
```

# c# - 比较c#中的两个字符串

> ID：15484626
> 
> 赞同：1
> 
> 时间：2013-03-18T18:53:30.647
> 
> 标签：c#, .net, string

我有一个程序需要将任何给定的字符串与预定义的字符串进行比较，并确定是否发生了插入错误、删除错误、转置或替换错误。

例如，如果单词**dog**被呈现给用户并且用户提交**dogs**或**doge**，它应该通知用户插入错误。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:23:45.297

在我的脑海中，但我认为这应该让你开始：

`Insertion`并且`Deletion`应该很简单；只需检查字符串的长度。

```
if(originalString.Length > newString.Length) 
{
    //deletion
}
else if(originalString.Length < newString.Length)
{
    //insertion
} 
```

要检测`transposition`，请检查长度是否匹配，如果匹配，您可以`List<char>`从两个字符串中创建两个。然后使用下面的表达式检查它们是否匹配

```
bool isTransposed = originalList.OrderBy(x => x).SequenceEquals(newList.OrderBy(y => y)); 
```

要检测`substitution`，您可以使用[汉明距离](http://en.wikipedia.org/wiki/Hamming_distance)并检查它是否大于 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:16:40.880

您可能需要为每个单独的错误类型编写一个方法来查看它是否是错误，例如：

```
bool IsInsertionError(string expected, string actual) {
    // Maybe look at all of the chars in expected, to see if all of them
    // are there in actual, in the correct order, but there's an additional one
}

bool IsDeletionError(string expected, string actual) {
    // Do the reverse of IsInsertionError - see if all the letters
    // of actual are in expected, in the correct order,
    // but there's an additional one
}

bool IsTransposition(string expected, string actual) {
    // This one might be a little tricker - maybe loop through all the chars,
    // and if expected[i] != actual[i], check to see if 
    // expected[i+1] = actual[i] and actual[i-1]=expected[i]
    // or something like that
} 
```

一旦你建立了所有单独的规则，并且你首先检查了规则的相等性，一次触发它们中的每一个。

你必须把这样的问题分解成小部分，然后一旦你有一堆简单的问题，一次解决一个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T19:07:17.970

我建议您创建一个`function`将 a`parameter`作为`input sting`. `function`看起来或多或少像这样。使用`function`你想要的任何地方。

```
private void CheckString(string userString)
{
    string predefinedString = "dog";
    if (userString == predefinedString)
    {
        // write your logic here
    }
    else
    {
        MessageBox.Show("Incorrect word"); // notify the users about incorrect word over here
    }
} 
```

# angularjs - 为什么只有参数更改时 angular-ui 新状态路由器会转换？

> ID：15484627
> 
> 赞同：2
> 
> 时间：2013-03-18T18:53:30.783
> 
> 标签：angularjs, angular-ui

我正在使用*新*的angular-ui 路由器，它包含一个状态机（[https://github.com/angular-ui/ui-router](https://github.com/angular-ui/ui-router)）。这个伟大的路由器允许用户指定参数作为 URL 的一部分。

例如：

```
$stateProvider
    .state('contacts.detail', {
        url: "/contacts/:contactId",
        templateUrl: 'contacts.detail.html',
        controller: function ($stateParams) {
        // If we got here from a url of /contacts/42
        expect($stateParams).toBe({contactId: 42});
    }]
}) 
```

（见[这里](https://github.com/angular-ui/ui-router/wiki/URL-Routing)）

这意味着，当用户导航到 /contacts/42 时，状态将更改为“contacts.details”，并将 42 参数注入控制器

不过有一个问题。如果仅 url 参数更改，则仍会调用 transitionTo 函数（例如，手动更改 url 或绑定到输入框时会发生这种情况）。这反过来会导致该状态的视图指令被重新创建，如果我们只想更新该状态下的某些内容，这既是浪费时间，也是一个问题。

似乎是故意的。从代码：

```
 // Starting from the root of the path, keep all levels that haven't changed
  var keep, state, locals = root.locals, toLocals = [];
  for (keep = 0, state = toPath[keep];
       state && state === fromPath[keep] && equalForKeys(toParams, fromParams, state.ownParams);
       keep++, state = toPath[keep]) {
    locals = toLocals[keep] = state.locals;
  } 
```

equalForKeys 是比较参数，如果有差异则返回 false。

我的问题：你知道为什么作者会这样写吗？您认为更改是否安全，以便仅更改参数时没有过渡？

非常感谢您一直阅读到这里，以及任何想法

里奥

编辑：似乎这是设计使然。刚刚发现：[https ://github.com/angular-ui/ui-router/issues/46](https://github.com/angular-ui/ui-router/issues/46)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T22:22:40.620

我通常用抽象状态和嵌套来解决这种性质的问题。将不会根据 url 参数更改的部分放入抽象父状态，您将避免额外的服务器命中。我更喜欢将它们放入父状态的解析或自定义数据部分，但如有必要，您可以通过范围继承来检索它们。确保您阅读并理解范围继承的规则，因为有些事情（至少对我而言）是出乎意料的。

您可以在此处阅读更多详细信息：[https](https://github.com/angular-ui/ui-router/wiki/Nested-States-%26-Nested-Views) ://github.com/angular-ui/ui-router/wiki/Nested-States-%26-Nested-Views 。此外，angular-ui 附带的示例应用程序是开始理解状态嵌套的好地方。

# wordpress - 分类页面 - 将 404 替换为“未找到结果”

> ID：15484633
> 
> 赞同：1
> 
> 时间：2013-03-18T18:53:57.667
> 
> 标签：wordpress, http-status-code-404, taxonomy

我想“伪造”分类页面，使其表现得像搜索一样。

现在如果你登陆 localhost/search-images/ **deadendtag** /page/2/ 你会得到一个 404 not found。

我只想用显示“无结果”的页面替换它，就像搜索一样。这样它就不会被误认为是……错误。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:22:03.143

转到 wp-content/theme 打开您当前的主题而不是打开 404.php 并从那里更改它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:22:40.907

我唯一能想到的就是修改 404 页面以根据此分类更改状态。因此它可以返回我指定的任何内容并通过过滤器更改标题。

```
function filter_404_title( $title )
{
    if ( is_404() ) {
        $title = 'No results found.';
    }
    // You can do other filtering here, or
    // just return $title
    return $title;
}

// Hook into wp_title filter hook
add_filter( 'wp_title', 'filter_404_title' );

if ( get_query_var( 'post_type' ) == 'image' ) {

    //my fake no-results-found content

} else {

    //the usual 404

} 
```

如果有一种方法可以直接访问**分类图像标签.php**以获得“无结果”声明，但那将是理想的。

# c# - 对一组随机生成的数字进行排序

> ID：15484635
> 
> 赞同：0
> 
> 时间：2013-03-18T18:54:10.973
> 
> 标签：c#, random

我正在 C# 中创建一个随机数生成器

我这样生成数字

```
Random RandomClass = new Random();

Num1.text = RandomClass.Next(1,49).ToString();
Num2.text = RandomClass.Next(1,49).ToString();
Num3.text = RandomClass.Next(1,49).ToString();
Num4.text = RandomClass.Next(1,49).ToString();
Num5.text = RandomClass.Next(1,49).ToString();
Num6.text = RandomClass.Next(1,49).ToString(); 
```

用户单击一个按钮并生成数字，我想要的是有一个可以对数字进行排序的按钮，例如从最小到最小。

我可以将生成的数字转换为数组并调用 .ToArray 然后从那里排序吗？我不确定如何将随机数组合在一起，然后对它们调用排序方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:00:35.447

只需将随机数添加到列表中并对其进行排序。

```
Random RandomClass = new Random();
List<int> list = new List<int>();

for (int i = 0; i < 10; i++)
    list.Add(RandomClass.Next(1, 49));
list.Sort();

// If you need to reverse it...
list.Reverse(); 
```

如果要与 a 进行比较，`List<string>`则需要编写一个比较器。

例子：

```
private static int CompareValues(string x, string y)
{
    if (x == null)
        return y == null ? 0 : -1;
    else
    {
        if (y == null)
           return 1;
        else
        {
           int left = Int32.Parse(x);
           int right = Int32.Parse(y);

           if (left > right)
               return 1;
           else if (left < right)
               return -1;
           else
               return 0;
        }
     }
 } 
```

然后使用它，将它作为参数传递给`Sort()`方法。这现在将用作自定义比较来处理整数值并正确排序它们。

```
 list.Sort(CompareValues); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:00:04.093

如果将随机数存储在列表中，则可以使用 Linq 轻松排序（或以多种方式操作它们）。假设您的方法返回随机整数：

```
var myRandomNumbers = new List<int>
    {
        RandomClass.Next(1,49),
        RandomClass.Next(1,49)
    };

var mySortedRandomNumbers = myRandomNumbers.OrderByDescending(x => x).ToList(); 
```

当然，如果您*总是*打电话`RandomClass.Next(1,49)`，您可以使用循环进行优化并`.Add()`在列表中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:09:16.593

这是一个生成随机数并将其保存以备后用的解决方案。

```
//fields
private readonly Random _random = new Random();
private readonly List<int> _randomNumbers = new List<int>();

public void SomeEvent(object sender, EventArgs e)
{
    _randomNumbers.Clear();

    Num1.text = GetRandom().First().ToString();
    Num2.text = GetRandom().First().ToString();
    Num3.text = GetRandom().First().ToString();
    Num4.text = GetRandom().First().ToString();
    Num5.text = GetRandom().First().ToString();
    Num6.text = GetRandom().First().ToString();
}

public void SortRandomNumbers(object sender, EventArgs e)
{
    var sortedRandoms = _randomNumbers;
    sortedRandoms.Sort();

    //do stuff with sortedRandoms
}

// Gets a random value and caches it
private IEnumerable<int> GetRandom()
{
    while(true)
    {
        var value = _random.Next(1, 49);
        _randomNumbers.Add(value);

        yield return _randomNumbers.Last();
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-18T19:01:04.727

如果您总是有六个字段 Num1 - Num6，您可以将它们的内容添加到 a`List<int>`中，使用排序它们`.OrderBy()`并使用有序列表再次填充它们。

```
List<int> nums = new List<int>();
nums.Add(Convert.ToInt32(Num1.text));
.
.
nums.Add(Convert.ToInt32(Num6.text));
nums = nums.OrderBy(num => num).ToList(); //or OrderByDescending
Num1.text = nums[0];
.
.
Num6.text = nums[5]; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-18T19:06:08.627

是的，您可以使用数组：

```
RandomClass.Next(1,49).ToString();
ArrayList numbers = new ArrayList();

for (int i = 0; i < 10; i++)
    numbers[i] = RandomClass.Next(1,49).ToString();

numbers.Sort(); 
```

# internet-explorer-8 - 我在 IE8 中有 History.js 问题

> ID：15484641
> 
> 赞同：1
> 
> 时间：2013-03-18T18:54:30.793
> 
> 标签：internet-explorer-8, history.js

History.js 的实例化方式似乎存在问题，但我什至不确定。在窗口加载时，此代码（除其他外）被称为：

```
History.Adapter.bind(window, 'anchorchange', function(event){ 
```

对于 IE8 上的这段代码，我得到：无法获取属性“适配器”的值：对象为空或未定义。

您可以在 skrobotwp.gandzo.com 上查看该页面，在较新的浏览器中一切正常。

# virtualbox - 使用 vboxmanage，如何列出 vm 的所有快照？

> ID：15484646
> 
> 赞同：15
> 
> 时间：2013-03-18T18:54:49.460
> 
> 标签：virtualbox

使用 virtualbox（在 Windows 7 主机上），我如何列出 VM 的所有快照？

理想情况下，每个快照只有一行，每个快照都有名称和 UUID。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-22T15:15:12.310

用这个

```
vboxmanage snapshot VM_NAME list 
```

您还可以通过包含选项来指定输出格式`--machinereadable`

vboxmanage 的所有命令都可以通过以下方式找到

```
vboxmanage --help 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T18:54:49.460

这不是我想要的最佳答案，但`vboxmanage showvminfo VMNAME`会在其输出末尾列出快照。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:50:36.497

我认为这是正确的答案。如果要过滤来自 showvminfo 的输出，则需要通过命令行从 shell 执行此操作

# c++ - 类型、函数和变量使用什么占位符名称（foobars）？

> ID：15484648
> 
> 赞同：2
> 
> 时间：2013-03-18T18:54:55.057
> 
> 标签：c++, conventions

为了在 c++ 中进行概念演示，我需要为类型、函数、变量使用一些占位符命名方案，例如[Foobar](http://en.wikipedia.org/wiki/Foobar)。有几个不同的实体来命名和区分最终以 foo/bar 单独用于类、函数、成员变量的结果在视觉上没有区别。这些实体是否有一些有用的占位符命名方案？

```
enum Enum1 { ... }

struct Struct1 { ... }

class Class1
{
public:
    void function1();
    void function2();
    ...
private:
    int variable1;
    int variable2;
    ...
} 
```

单独使用 foo/bar 来表示类型、函数和变量，区别并不那么明显

```
enum Foo { ... }

struct Bar { ... }

class Foo
{
public:
    void foo();
    void bar();
    void baz();
private:
    int foo_;
    int bar_;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:23:22.330

动物经常用于说明面向对象的编程。它们具有良好的同质和异质行为（`eat`, `bark`）、关系树（`Dalmatian`is-a `Dog`、`Dog`has-a `Tail`）等。

当然，同样的问题可以通过非 OOP 技术解决……同样的属性通过虚函数、模板特化、适配器`enable-if`等有用地说明了动态多态性之间的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:38:18.750

据我了解，此类示例可以很好地用于说明表达式、语法或架构模式，但不能用于说明算法或业务逻辑部分。每当您试图说明最后一个时，您应该真正考虑使用有意义的名称来解释它们在算法中的作用。

至于我，我通常使用`foo`/ `bar`/ `moo`/等。*只要示例相当短，*`boo`这可以很好地完成工作。

 *如果示例不够短，并且强调类型（如函数或数组）似乎有助于提高可读性，`functionA`/`functionB`可以用作替代方案 - 它似乎更容易（比数字）阅读并在恕我直言中操纵这些名称。数字会分散注意力。

另一种方法（在讨论 SQL 查询时对我来说特别好，但在某些 C++ 情况下也很有用）是使用原始的现实生活实体，如`class Person`和`class Employee`作为子类。

如果您想向非专业人士演示 OOP 示例，则 Foo/Bar/Function1 在这种情况下绝对不是一个选择：只有最聪明的学生才会明白这一点。我的第一个 OOP 示例是`lightbulb`with`turn on`和`turn off`方法、`isOn`属性`colour`和`power`属性。它可以用一个`fluorescent`或一个`incandescent lamp`子类扩展并封装在一个`desk lamp`类中。如果您在 OOP 中走得更远并引入接口，它也可以实现`ac-powered`和/或`dc-powered`接口。

使用 Foo/Bar 等仅在与具有相同或更高经验的人交流时才相关 - 那些已经完全理解该语言的人（例如，当您提出“我应该使用`foo + bar`还是`foo.plus(bar)`？”之类的问题时）。*

# c - C 指针：char 到二进制值

> ID：15484650
> 
> 赞同：0
> 
> 时间：2013-03-18T18:54:57.313
> 
> 标签：c, pointers

```
#include <stdio.h>
#include <string.h>

int * bin(char a);

int main(void){
        char a='a';
        int k=0;
        int *binary;

        binary=bin(a);
        for(k=0; k<8; k++){
                printf("%d", *binary++); 
                printf("\n");      
        }

        return 0;
}
int *bin(char a){

        int i=0;
        int *arr;
        int output[8];
        char c=a;
        for (i = 0; i <8 ; ++i) {
                 output[8-i-1] = (a >> i) & 1;

        }
        arr=&output[0];
//              for (i = 0; i <8 ; ++i) {
//              printf("%d", output[i]);
//      }
//      printf("\n");

        return arr;
} 
```

输出应该是 char 'a' 的二进制值，即：0 1 1 0 0 0 0 1

但我得到了这个：0 -1216804320 -1218095335 -1216804320 10 -1076423592 -1218208721 -1216804320

这是指针问题吗？我该如何解决它才能打印正确的答案？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:58:22.013

您正在返回一个指向局部变量 ( `arr`) 的指针，当函数返回时，其内容不再有效。改用`malloc`：

```
int main(void){
        ...
        int *arr = bin(a);
        ...
        free(arr);
        return 0;
}

int *bin(char a){
        int *arr = malloc(8 * sizeof int);
        ...
        return arr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:59:07.657

**我注意到的第一个错误**是范围问题，*您正在返回局部变量的地址* `output[8];`

```
 arr=&output[0];
 return arr; 
```

那是错误的，*范围*仅在函数`output[]`内部。`bin()`

*如果要在函数外部访问它*，则应动态*分配内存*，例如：`output[]` *`bin()`*

 *```
int *output = calloc(8, sizeof(int)); 
```

即使您不需要`return output`来自 bin()的额外变量

我已经更正了您的代码，如下所示，没有太大变化：

```
int *bin(char a){
        int i=0;
        int *output = calloc(8, sizeof(int));
        for (i = 0; i <8 ; ++i) {
                 output[8-i-1] = (a >> i) & 1;
        }
        return output;
} 
```

注意删除未使用的变量`c`和`arr`

此外，不要忘记显式释放动态分配的内存：

**第二**（*注意*）要注意，[`Memory Clobbering Error`](http://www.modula2.org/sb/sbd/index170.htm)因为您正在通过函数更新`binary`变量。`++``printf`

只是简单，`free(binary);`它不会产生运行时错误，因为您正在修改`binary`printf 中的变量`*binary++`：首先将返回地址保存在一个额外的指针变量中，然后释放它。就像我正在做的那样：

```
 b = binary=bin(a);      
 // loop 
  printf("%d", *binary++); 
 //             ^ changing binary variable to point new memory location  
 // after loop 
 free(b); 
```

如果您`free(binary)`这样做，那将是错误的，因为您将释放一个未动态分配的内存位置，因为您正在更改`binary`变量。

在此处获取工作[**代码**](http://codepad.org/dBTwVUf1)，阅读评论。*

# c# - 在函数参数中创建的对象是否被复制到两个堆栈？

> ID：15484653
> 
> 赞同：0
> 
> 时间：2013-03-18T18:55:26.227
> 
> 标签：c#, oop

如果 x 类通过 y.create(new z) 调用 y，z obj 是否会像 y 一样在 x 的堆栈中创建？这是假设我们是按值传递，而不是 ref 或 ptrs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:20:36.630

有几件事：

堆栈/堆位于进程（应用程序）级别，而不是对象级别。整个应用程序共享一个堆栈（至少在您的问题的上下文中），无论它使用多少对象。

除非您示例中的“z”是值类型（如结构），否则它不会完全驻留在堆栈中。如果“z”是一个类，那么它“生活”在堆上，只有在堆栈上对它的引用。

您真的应该阅读 Jon Skeet 的简短解释 - [http://www.yoda.arachsys.com/csharp/memory.html](http://www.yoda.arachsys.com/csharp/memory.html) - 特别是底部的“一个工作示例”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:58:16.527

对象 z 在应用程序分配的内存中创建。使用 new 创建对象时，每个函数都没有自己的内存区域。

我建议您阅读[此](http://www.learncpp.com/cpp-tutorial/79-the-stack-and-the-heap/)页面上的内容，我当然会不时发现它很有用（即当我把事情搞混时）

# python - 使用 arcpy 将多个 shapefile 添加到 MXD

> ID：15484657
> 
> 赞同：1
> 
> 时间：2013-03-18T18:55:35.557
> 
> 标签：python, arcgis, arcpy

我正在尝试使用此处找到的一些代码将多个文件添加到 MXD 文件： [如何通过 python 脚本在 ArcGIS 中添加 shapefile？](https://stackoverflow.com/questions/4017896/how-do-i-add-a-shapefile-in-arcgis-via-python-scripting)

下面的代码没有返回任何错误，但是似乎没有任何 shapefile 被添加到空白 mxd 文档中。

任何有关为什么这不起作用的帮助将不胜感激。

```
import arcpy
import arcpy.mapping
from shutil import copyfile
from os import listdir
from os.path import isfile, join

def AddAllShapeFilesToNewMXD(source_directory):
    # Source file is the template that the will be copied to the directory with
    # All the shape files in it.
    source_file = 'M:\Ops Field Map\Blank Map.mxd'

    # Output file is the name of the file that will have the shape files added to it
    output_file = 'GPS_Map'
    rev_count = 0
    while isfile(join(source_directory, output_file + '.mxd')):
        #Make sure a unique file is created
        print ('File ' + output_file + '.mxd exists.'),
        rev_count += 1
        output_file = output_file + '_rev' + str(rev_count)
        print ('Trying ' + output_file + '.mxd ...')

    # Create the destination file. This is the file the shape files are added to
    destination_file = join(source_directory, output_file + '.mxd')
    copyfile(source_file, destination_file)
    print 'MXD file created: ' + destination_file

    # Get the map doccument
    mxd = arcpy.mapping.MapDocument(destination_file)
    # Get the data frame
    data_frame = arcpy.mapping.ListDataFrames(mxd, "*")[0]

    # Get a list of all the shape files
    shp_files = [ f for f in listdir(source_directory) if isfile(join(source_directory, f)) and f.endswith('.shp') ]

    # Add all the shapefiles to the mxd file
    for s in shp_files:
        new_layer_full_path = join(source_directory, s)
        new_layer = arcpy.mapping.Layer(new_layer_full_path)
        arcpy.mapping.AddLayer(data_frame, new_layer, "BOTTOM")
        print 'Layer added ' + new_layer_full_path
        del new_layer

    return True

directory = 'C:\Users\gps\Desktop\dd test'
AddAllShapeFilesToNewMXD(directory) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:57:41.730

没有文件很难知道，但上面的代码可能没有给出错误但没有显示任何内容的一个原因是，对于许多 arcgis 地图显示操作，您必须确保“添加结果”的 arcgis 地理处理选项地理处理>地理处理选项下的显示'的地理处理操作已打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:36:57.833

可能是您遗漏了这两条重要的线：

```
arcpy.RefreshActiveView()
arcpy.RefreshTOC() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T17:20:57.510

看起来您快到了，如果您的代码在活动会话中运行，Lucas 和BelowZero 都提供了很好的建议。如果它正在创建一个 *.mxd 供以后使用，我看不到结果的保存位置。这是一些更简单的示例代码，请注意最后一行：

```
mxd = arcpy.mapping.MapDocument(srcdir+'/data_bin/Untitled.mxd')
data_frame = arcpy.mapping.ListDataFrames(mxd)[0]
mxd.activeView = data_frame.name

flowlinesLyr=arcpy.mapping.Layer('..\\NHDPlus\\nhdflowline_en')
flowlinesLyr.name='NHDPlus Flowlines'
arcpy.mapping.AddLayer (data_frame, flowlinesLyr,'TOP')

gagesEventLyr=arcpy.mapping.Layer('..\\NHDPlus\\StreamGageEvent')
gagesEventLyr.name='Original stream gage locations'
arcpy.mapping.AddLayer (data_frame, gagesEventLyr,'TOP')

mxd.saveACopy(datadir+'\NHDPlus'+Region+'_Gage_QAQC.mxd') 
```

# gnuplot - gnuplot 脚本失败 - 默认值是否从 4.4 更改为 4.6

> ID：15484658
> 
> 赞同：0
> 
> 时间：2013-03-18T18:55:38.257
> 
> 标签：gnuplot

以下用于绘制风力涡轮机数据的脚本在 4.4 版中运行良好，但现在失败了

“情节”，第 14 行：找不到标题为“11”的列

变量替换似乎发生了一些变化，但我找不到它的记录。

```
# data format
# 13-02-13 13:42:00 E:0 L:0 S:1 F:9 D:44 T:20.91 C:997 V:28.02 A:2.85 P:79 R:219 r:292 H:223 Y:1057 h:-225 y:-1228 I:5249 O:4921
# command line
# gnuplot -e "filename='log-130213.txt'; f1='11'; t1='Volts'; f2='14'; t2='RPM'" plots
set title filename
set datafile separator ":"
set xdata time
set timefmt "%d-%m-%y %H:%M:%S"
set format x "%H:%M"
set xlabel "Time"
set ylabel t1
set y2label t2
set y2tics
plot filename using 1:f1 with line title t1 axis x1y1 , "" u 1:f2 with line title t2 axis x1y2
pause -1 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:22:39.130

回答我自己的问题（在拉了很多头发之后）......将命令行更改为不引用所需列的数值可以纠正问题。使用引号，gnuplot 会查找包含“11”或“14”（在我的情况下！！）的列标题，但无法关闭此功能！

```
gnuplot -e "filename='log-130213.txt'; f1=11; t1='Volts'; f2=14; t2='RPM'" plots 
```

注意：这是从 4.​​4 版到 4.6 版的行为变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T03:40:32.510

问题似乎是 4.6 比 Var 类型的 4.4 更严格。您可以在 'plot' 命令之前通过执行 var=var*1 或在 using 命令中使用 'using x*1:y*1:label*1' 强制字符串变量成为数字变量，这样可以避免弄乱shell脚本并将其放在靠近编程清晰度所需的位置

# zurb-foundation - Zurb 基金会 4 不工作

> ID：15484659
> 
> 赞同：1
> 
> 时间：2013-03-18T18:55:52.817
> 
> 标签：zurb-foundation

使用 Zurb 基础版本 3，如果我包含 Foundation.css 文件，我就可以制作网格等。

对于版本 4，如果我以相同的方式做所有事情，它就不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:34:18.817

> 如果我以同样的方式做每一件事

V4 中有用于网格的**新类。**您不能只说`four columns`，而是指定列是用于大视图/设备还是小视图/设备。因此，您需要拥有`small-X`或div 需要消耗的列数`large-X`在哪里。`X`这是一个例子：

```
<div class="row">
    <div class="ten columns centered">
        <h1>This grid won't work on V4</h1>

        <div class="row">
            <div class="four columns">
                <div class="panel">
                    <p>Left panel</p>
                </div>
            </div>
            <div class="four columns">
                <div class="panel">
                    <p>Center panel</p>
                </div>
            </div>
            <div class="four columns">
                <div class="panel">
                    <p>Right panel</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="ten columns centered">
        <h1>But this will...</h1>
        <div class="row">
            <div class="small-2 large-4 columns">
                <div class="panel">
                    <p>Left panel</p>
                </div>
            </div>
            <div class="small-4 large-4 columns">
                <div class="panel">
                    <p>Center panel</p>
                </div>
            </div>
            <div class="small-6 large-4 columns">
                <div class="panel">
                    <p>Right panel</p>
                </div>
            </div>
        </div>  
    </div>        
</div> 
```

注意单个 div 上的 small 和 large 的组合。它告诉您的是，左侧面板在小型设备（手机）上只有两列，在大型设备（如台式机）上只有四列。同样，右侧面板在小型设备上为六列，在大型设备上为四列。您可以通过使用浏览器的大小来查看差异。

要获取有关 V4 Grid 如何工作的更多信息，[请访问此页面](http://foundation.zurb.com/docs/components/grid.html)。

# java - 当服务器宕机时，EJB 客户端出现问题

> ID：15484660
> 
> 赞同：0
> 
> 时间：2013-03-18T18:56:02.653
> 
> 标签：java, ejb, rmi

首先，我对 EJB 不是很了解，只是想了解这里发生了什么。

我有一个通过 EJB 接口调用后端的服务。如果后端宕机，则服务在后端宕机时开始抛出以下异常，然后在它恢复后，它会在第二天偶尔继续。但是，它是间歇性的。并非一切正常，但有时我们会收到以下错误。就好像我们有一些与该后端的 ejb 连接在后端出现故障时会变得混乱，而有些则不会。

（更改方法/接口名称，因为它们特定于我的项目）

```
Remote EJB method: someMethod called on interface: com.someInterface failed.
Cause: java.rmi.NoSuchObjectException: The object identified by: '301' could not be found.
Either it was has not been exported or it has been collected by the distributed garbage collector. 
```

我假设当后端出现故障时，EJB 连接不再有效，只是需要一段时间来清除那个坏连接？

有什么建议、想法吗？希望能帮助您更好地了解正在发生的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:43:39.677

信息很清楚。您用来与 EJB 对话的存根是陈旧的，即它指的是不再存在的对象，无论是通过 DGC、故意取消导出还是整个服务器重新启动。这里的缓解措施是通过您所做的任何方式重新获取存根，然后再试一次。

# linux - x86 NASM Linux 程序集中的 ATOI 问题

> ID：15484661
> 
> 赞同：0
> 
> 时间：2013-03-18T18:56:06.453
> 
> 标签：linux, gcc, assembly, x86, nasm

我不明白如何将字符串转换为整数。

这是家庭作业，**但**我不想要这个问题的答案——（AKA 正确代码）。如果有人能解释我做错了什么，我将不胜感激！:(

提前致谢！！！

我在 32 位虚拟机上运行 Ubuntu 12.04。

我编译：

```
nasm -f elf proj2.asm 
```

我链接：

```
gcc -o proj2 proj2.o 
```

然后运行它：

```
./proj2 
```

它显示第一个数字，但是当我尝试使用`atoi`.

我有一位老师希望我们：

1.  从按如下方式排列的文本文件中读取数字：

    ```
    4
    5
    4
    2
    9 
    ```

（每个整数前都有空格）

`0x0D`根据他的指示：“请务必将七 (7) 个字符读入缓冲区以获取整行。这些是代表数字的五个字符以及字符 CR 和 LF。CR 是带有十六进制代码和 LF的回车符是带有十六进制代码的换行符`0x0A`。")

我已经从文件中删除了空格，并尝试以这种方式读取它，但它没有帮助。

整数将被读取到堆栈上的一个数组中，最大整数数为 250。但这不是问题：/

以下是我到目前为止的代码。

```
 BUFFERSIZE equ 10

section .data
    file_name: db "/home/r/Documents/CS/project2/source/indata.txt", 0x00
    file_mode: db "r", 0x00
    output: db "%i",0xa
    test: db "hello world",10
    format: db "%u"
    numToRead: db 1
    temp: db "hi"
    num:db "1",0,0
section .bss
    fd:    resd 4
    length:    resd 4
    buffer resb BUFFERSIZE
                            ;i was trying to use buffers and just
                            ;read through each character in the string, 
                            ;but i couldn't get it to work
section .text 
 extern fopen
 extern  atoi
 extern printf
 extern fscanf

 extern fgets
 extern getc
 extern fclose
 global main

main: 
                    ;setting up stack frame
    push    ebp
    mov     ebp, esp 

                    ;opens file, store FD to eax
    push    file_mode
    push    file_name
    call    fopen

                    ;save FD from eax into fd    
    push    eax
    mov     ebx,eax
    mov     [fd],ebx

                    ;ebx holds the file descriptor
                    ;push in reverse order
    push    ebx
    push    numToRead
    push    temp
    call    fgets    

    push  eax
    call printf     ;prints length (this works, i get a 4\. 
                    ;Changing the number in the file changes the number displayed. 
                    ;I can also read in several lines, just can't get any ints! 
                    ;(So i can't do any comparisons or loops :/ )

                    ;i shouldn't need to push eax here, right? 
                    ;It's already at the top of the stack from the printf
    ;pop  eax
    ;push eax
    call atoi
                        ;calling atoi gives me a segmentation fault error
    push eax
    call printf

    mov esp,ebp
    pop ebp 
    ret 
```

编辑：有趣的是，我可以调用 atoi 就好了。那是我尝试的时候

```
push eax
call atoi 
push eax
call printf 
```

我得到分段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:05:30.270

除非我在我的手机上看不到它，但在你打电话后你没有平衡堆栈。这些 c 函数不是 stdcall ，因此您必须在每次调用后调整堆栈。我愿意：

`add esp, 4 * numofpushes` 这可能是您的段错误的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:32:50.553

> 编辑：有趣的是，我可以调用 atoi 就好了。那是我尝试的时候

```
 push eax
  call atoi 
  push eax
  call printf 
```

> 我得到分段错误。

来自[atoi 参考](http://www.cplusplus.com/reference/cstdlib/atoi/)：*“成功时，函数将转换后的整数作为 int 值返回。”* .
传递任何随机整数（如`4`）作为以下的第一个参数`printf`（即`format`字符串指针）不太可能结束。

# ruby-on-rails - Gravatar - nil:NilClass 的未定义方法“电子邮件”

> ID：15484662
> 
> 赞同：0
> 
> 时间：2013-03-18T18:56:08.297
> 
> 标签：ruby-on-rails, email, controller, dashboard, gravatar

我已经设置了 gravatar 并让它为我工作`'users/*user id goes here*'.` 但是每当我尝试使用它`dashboard/index`时，它就会给我错误

```
Undefined method 'email' for nil:NilClass 
```

我的仪表板控制器是：

```
class DashboardController < ApplicationController

  def index

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

end 
```

仪表板视图：

```
<div class="dash-well">
    <div class="gravatar-dashboard">
        <%= image_tag avatar_url(@user), :class => 'gravatar' %>
        <h1 class="nuvo wtxt"><%= current_user.username.capitalize %></h1>
    </div>
</div> 
```

我的应用助手：

```
module ApplicationHelper
    def avatar_url(user)
         default_url = "#{root_url}images/guest.png"
         gravatar_id = Digest::MD5.hexdigest(user.email.downcase)
        "http://gravatar.com/avatar/#{gravatar_id}.png?s=200{CGI.escape(default_url)}"
    end

    def avatar_url_small(user)
         default_url = "#{root_url}images/guest.png"
         gravatar_id = Digest::MD5.hexdigest(user.email.downcase)
        "http://gravatar.com/avatar/#{gravatar_id}.png?s=40{CGI.escape(default_url)}"
    end
end 
```

我的用户模型：

```
class User < ActiveRecord::Base

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :user_id, :id, :website, :bio, :skype, :dob, :age

  has_many :posts
  # attr_accessible :title, :body
end 
```

我的仪表板模型：

```
class Dashboard < ActiveRecord::Base
  attr_accessible :status, :author, :email, :username, :id, :user_id, :user, :website, :bio, :skype, :dob, :age

  belongs_to :user
end 
```

抱歉，我对 Ruby-On-Rails 还很陌生！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:03:30.177

试试这个：

```
<%= image_tag avatar_url(current_user), :class => 'gravatar' %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T21:42:35.857

您真的希望在控制器中使用它：

```
def index
  @user = current_user
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @posts }
  end
end 
```

注意添加的第二行，它将@user 变量分配给current_user。

然后，您在视图中调用的@user 将起作用。当您继续使用它时，您会看到一个典型的 Rails 模式，大多数以 @ 符号开头的变量将在该视图的相应控制器方法中定义。因此，如果您使用带有 @ 的变量，但它不可用，请检查控制器以确保首先定义它。（仅供参考，如果您想了解更多信息，这些被称为实例变量）。

为了解决第二个问题，如果您是 current_user 并且您想访问另一个用户的页面：

```
def show
  @user = User.find params[:id]
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @user }
  end
end 
```

这将适用于 /users/1 之类的 URL，您可以对 avatar_url 使用相同的调用，传递@user，它将获取该用户的头像，其中用户是与给定用户 ID 匹配的用户。你可能已经在你的控制器中拥有了这个确切的代码，但希望现在你明白它为什么起作用了。

祝你好运！

# java - PostExecute 自定义对话图像没有改变？

> ID：15484667
> 
> 赞同：0
> 
> 时间：2013-03-18T18:56:35.667
> 
> 标签：java, android

由于某种原因，这不适用于对话框。我之前通过 postExecute 在这个应用程序中使用了 showImage 方法加载时间，它工作正常。但是，这样做时它没有显示应有的图像。我错过了什么吗？目前我刚刚获得了硬编码的图像 URL 以进行测试，但稍后它将从 doInBackground 传递给此方法。

```
protected void onPostExecute() {        

    Dialog liveView = new Dialog(myView.this, R.style.Dialog);
    liveView.setContentView(R.layout.liveview_dialogue);
    TextView title = (TextView)liveView.findViewById(R.id.liveViewTitle);           
        Button button = (Button) liveView.findViewById(R.id.liveViewButton);
        ImageView imgDisplay= (ImageView)liveView.findViewById(R.id.liveViewImage);
        showImage("http://mytest.com/test.jpg", imgDisplay);
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                finish();
            }
        });
        liveView.show();
        dialog.cancel(); //used to cancel the previous progress dialog. 

} 
```

我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/liveViewTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dip"
        android:text="Tracking"
     />

    <ImageView android:id="@+id/liveViewImage"
     android:layout_width="wrap_content" 
     android:layout_height="wrap_content"
     android:layout_centerHorizontal="true"
     />

    <Button
        android:id="@+id/liveViewButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="80dip"
        android:text="OK" />
</RelativeLayout> 
```

我的主题：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="Dialog" parent="android:style/Theme.Dialog">
        <item name="android:windowBackground">@null</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowIsFloating">true</item>
    </style>

</resources> 
```

显示图像方法：

```
 public void showImage(String url, ImageView passed){
        int loader = R.drawable.ic_launcher; 
        ImageLoader imgLoader = new ImageLoader(getApplicationContext());
        imgLoader.DisplayImage(url, loader, passed);
    } 
```

ImageLoader.class： http: [//pastebin.com/Z2BvvzXk](http://pastebin.com/Z2BvvzXk)

MemoryCache.class：[http://pastebin.com/bJUwPs45](http://pastebin.com/bJUwPs45)

FileCache.class：[http://pastebin.com/0XHBawd0](http://pastebin.com/0XHBawd0)

Utils.class：[http ://pastebin.com/KXbXRVC2](http://pastebin.com/KXbXRVC2)

# wordpress - Wordpress 重定向到类似结果的搜索

> ID：15484668
> 
> 赞同：0
> 
> 时间：2013-03-18T18:56:39.613
> 
> 标签：wordpress

我代表拥有自己的 WordPress 博客的妻子提出这个问题。

最近像这样的网址：[http://catinha.dk/au](http://catinha.dk/au)开始重定向到[http://catinha.dk/2005/05/22/au-pair/](http://catinha.dk/2005/05/22/au-pair/)和[http://catinha.dk/dansk](http://catinha.dk/dansk)重定向到[http:// /catinha.dk/2005/10/08/danskundervisning/](http://catinha.dk/2005/10/08/danskundervisning/)。

似乎直接用于“标题中带有匹配单词的网址”或类似的东西，因为[http://catinha.dk/foo](http://catinha.dk/foo)只会给出 404。

我很确定这是一个非常微不足道的配置，她不知何故弄错了，但我们无法弄清楚发生了什么变化。

Udpdate：我们希望避免重定向，因为它可能会阻止另一个博客（[http://catinha.dk/dansk](http://catinha.dk/dansk)）工作。[http://catinha.dk/dansk](http://catinha.dk/dansk)是另一个 WordPress 安装的根目录。

她一直在玩 FPT 客户端，因此 .htaccess 发生变化并非不可想象

这是 catinha.dk 的 .htaccess：

```
# BEGIN FAlbum
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^fotos/?([^/]*)?/?([^/]*)?/?([^/]*)?/?([^/]*)?/?([^/]*)?/?([^/]*)?/?([^/]*)?/?([^/]*)?/?$ /wp-content/plugins/falbum/wp/album.php?$1=$2&$3=$4&$5=$6&$7=$8 [QSA,L]
</IfModule>
# END FAlbum
# -FrontPage-

IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
#RewriteRule ^dansk.+$ /dansk/foo.php [L]
#RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
#RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

这是 catinha.dk/dansk 的 .htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /dansk/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /dansk/index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:01:11.220

除非有人在处理 .htaccess 文件，否则在我看来，永久链接设置为“帖子名称”，然后以某种方式设置为“日期和名称”。这是我要检查的第一件事。在您的仪表板中，进入“设置 > 永久链接”并查看选中了哪个选项。如果选中“日期和名称”，请改为选中“帖子名称”。尝试并报告！

# algorithm - 仅使用 10000 位表示 10000 个布尔值

> ID：15484669
> 
> 赞同：-1
> 
> 时间：2013-03-18T18:56:50.953
> 
> 标签：algorithm, bit

我想代表 10000 位信息。（每个都可以是 1 或 0）。有什么办法可以做到这一点吗？

维基百科解释[了一些 hack](https://en.wikipedia.org/wiki/Bit_manipulation#Bit_manipulation_in_the_C_programming_language)来实现这一点。但随后它要求我有一个大至 2^10000 的数字来存储 10000 位。

即使存储大量位，是否也有一些易于处理的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:58:56.710

正如 wikipedia 解释的那样，位字段在这里是一个合适的选择。一个可以容纳 10,000 位的位域有 2^10000 个状态。

这样做的一个不错的选择（假设整数是 32/64 位）是位向量，这里有详细的询问和解释：

[Programming Pearls，第 2 版中 set 的位向量实现](https://stackoverflow.com/questions/11400242/bit-vector-implementation-of-set-in-programming-pearls-2nd-edition/)

一般的想法是您使用一个用作位字段的整数数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:03:35.807

例如，如果您有一堆bool，例如，您可以使**bool占用 1 位。**在一个结构中，像这样：

结构 A { bool a:1, b:1, c:1, d:1, e:1; };

如果变量数量很大，上述方法将无用。所以改为创建一个大小为 10000/4*8 的整数数组。它将精确地创建 10000 位。现在您可以使用偏移量和 << 或 >> 访问每个位（例如访问第 55 位，使用 floor(55/4*8) 和 >>55%32。您可以到达该位）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:31:54.817

在 C++ 中，您可以非常简单地做到这一点，使用两个标准库容器之一：

## `std::vector<bool>`

标准向量的这种特殊化（几乎）与任何其他向量一样，但将其内容压缩到每个元素一位。除了享受这一事实之外，您还可以将其视为向量：

```
// Create a vector of 10000 booleans
std::vector<bool> lots_of_bits(10000);
// Set all the odd ones to true
for (int i = 1; i < lots_of_bits.size(); i += 2) {
  lots_of_bits[i] = true;
}
// Add another 100 trues at the end
for (int j = 0; j < 100; ++j) {
  lots_of_bits.push_back(true);
}
// etc. 
```

## `std::bitset<N>`

不伪装成标准容器的“新的、改进的”位向量。特别是，它的大小是固定的，您需要在编译时知道大小。这可能有点限制，但它是一个非常有用的类。就像`std::vector<bool>`，它实现了`[]`用于获取和设置各个位的运算符。它还支持按位逻辑运算符`&`, `|`, '^' and `~`(and, or, xor and not)，以及左右位移，以及其他一些实用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T19:02:13.257

您是否担心访问位数`n`需要移位`n`时间？如果是这样，您可以通过使用字符数组将您的 10,000 位分成 10,000 / 8 个桶来解决问题（假设这里是 C 或 C++）。现在，您可以`n`通过找出该位在 ( `n / 8`) 中的哪个存储桶以及存储桶中的哪个位置( ) 来访问位号`n % 8`。然后你只做掩蔽。不需要额外的存储空间（除了最后的填充，如果你没有 32 位的完美倍数，则需要一些额外的位）。

# knockout.js - 将修改后的 valueAccessor 转发给 ko.bindingHandlers.with

> ID：15484674
> 
> 赞同：1
> 
> 时间：2013-03-18T18:57:19.293
> 
> 标签：knockout.js, knockout-2.0

```
ko.bindingHandlers.editMode =
{
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext)
    {
        var newValueAccessor = ko.utils.unwrapObservable(valueAccessor());
        var $element = $(element);
        var viewModel = new someViewModel();
        $element.append("<input type='text' data-bind='value: model.value' />");
        ko.bindingHandlers.with.update(element, function() { return viewModel }, allBindingsAccessor, viewModel, bindingContext);
    }    
} 
```

someViewModel 是一个视图模型，其中包含`model.value`我要绑定到附加输入的属性（可观察）。`with`但是当我为绑定调用更新时`Uncaught TypeError: Cannot read property 'savedNodes' of undefined.`（knockout.js 调试构建）。我应该如何传递`viewModel`to`with.update`以使其获得与使用时相同的结果`data-bind="with: new someViewModel()"`？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:22:08.357

`with`绑定包括一个函数，`init`其中捕获子元素以用作匿名模板。

我不确定您是否真的在使用传递给绑定的值（valueAccessor）。您希望它在该值更改时更新吗？

否则，一个更简单的模式可能是：

```
ko.bindingHandlers.mySpecialWith = {
   init: function(element, valueAccessor, all, data, context) {
       var newData = new someViewModel(); //create some new data using what was passed in or however you want

       //manipulate element's children, if necessary    

       ko.applyBindingsToNode(element, { 'with': newData }, context);
   }
}; 
```

# python - 使用 import 和 from * import 语句的区别

> ID：15484677
> 
> 赞同：0
> 
> 时间：2013-03-18T18:57:24.287
> 
> 标签：python, python-imaging-library

当我在 32 位 python 上安装 PIL [http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)`import Image`时，我可以使用然后使用 PIL 中的图像库。但是，对于 64 位 python，我下载了[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)。但是，当我使用时`import Image`，它给了我错误，“没有名为 Image 的模块”。但是，我可以使用`from PIL import Image`. 为什么我可以在一个实例中直接使用 import Image 而不能在另一个实例中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:00:28.537

您想改为安装[Pillow](https://pypi.python.org/pypi/Pillow/2.0.0)。

它有适用于 Windows 的 32 位和 64 位变体，并修复了原始 PIL 库的长期存在的问题。

PIL 库在打包方面[早已被打破。](http://mail.python.org/pipermail/image-sig/2010-August/006480.html)Pillow 最初是作为一个分支来一劳永逸地解决这些问题，并且版本 2.0.0 增加了对 Python 3 的支持（[由 Python 软件基金会提供资助](http://aclark.net/blog/2013/03/15/the-story-of-pillow/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:00:45.943

它们是不同的库。或者，具体来说，它们是同一个库的不同包装。

PIL因这类问题而臭名昭著。只需使用[枕头](https://pypi.python.org/pypi/Pillow/2.0.0)代替。

# php - 使用 gmail smtp 从应用程序发送多封电子邮件而不会被阻止

> ID：15484681
> 
> 赞同：3
> 
> 时间：2013-03-18T18:57:33.653
> 
> 标签：php, email, smtp, gmail, bulk-mail

我在我的办公室设置了一个网络监控系统，用于监控我的网络上的活动，并在我设置的某些触发器处向我发送电子邮件。我已经组装了一个应用程序，它可以快速为我完成定制的工作，用于我需要的监控类型和我设置的规则。现在一切都很好，我已经使用 swift 邮件插件设置了要使用 gmail smtp 发送的电子邮件。

问题是如果发送大量电子邮件或至少我认为是这样，gmail 会锁定我的 gmail 帐户。有时会发生很多活动，系统会在很短的时间内（例如一两分钟）发送 50 或 60 封电子邮件。gmail 立即阻止访问该帐户，当我在浏览器中打开该帐户时，它会要求验证我的帐户。即使解除阻止，服务器仍然无法使用 smtp 或 imap 打开 gmail 帐户。

这越来越烦人，我想知道是否有办法阻止 gmail 阻止对帐户的访问，如果它知道访问来自特定 IP，或者是否有更好的方法来发送大量电子邮件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:06:37.880

1.  考虑一下一分钟内 50-60 封电子邮件是否真的有用。一旦你一次得到几个，你肯定知道正在发生一些不寻常的事情，并且不需要其他几十个都流入你的手机吗？
2.  使用用于突发流量的 SMTP 服务，例如 Amazon SES 或 Mandrill。Gmail 用于消费者电子邮件风格的消费者电子邮件发送模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T23:37:33.780

您是否考虑过发送有关不太重要事件的“汇总”通知？

“在很短的时间内（例如**一两分钟**内）发送 50 或 60 封电子邮件”很可能会聚合成几封电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:07:03.340

您无法从 Gmail 帐户发送批量电子邮件。根据电子邮件的使用情况以及发送和接收的电子邮件，GMail 平均每天允许 300-500 封电子邮件。

要发送大量或更多电子邮件，您必须使用 MailChimp 等付费服务或通过您自己的服务器发送电子邮件。

但是，如果您使用的是共享主机服务器，那么服务提供商也会每天控制电子邮件的发送。通常每天大约 2500 - 3000 封电子邮件是允许的，如果它也超过了每小时 100/125 封电子邮件的发送率，那么他们也会在发出警告后禁止您的帐户或停用您的帐户。

采取预防措施的主要原因是通过自动过程停止发送垃圾邮件。如果电子邮件是垃圾邮件并且数量很高，则始终建议您提供 API 访问以发送电子邮件的付费服务。

# excel - 在 Excel 中呈现 SSRS 08 RDL 时使用显式工作表名称

> ID：15484690
> 
> 赞同：0
> 
> 时间：2013-03-18T18:57:52.513
> 
> 标签：excel, reporting-services, ssrs-2008, subreport

My SQL Reporting Service 2008 .rdl 文件包含一个矩形内的子报表，其前面有一个强制分页符。当它在 Excel 中呈现时，它将分页符定义为工作表分页符，因此它在 Excel 工作簿 .xls 文件的单独工作表中创建子报表内容。如何命名每个工作表？我不希望它们成为 Sheet1 和 Sheet2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:38:26.000

您可以在对象上设置“PageName”属性，例如矩形

[http://blogs.msdn.com/b/robertbruckner/archive/2010/05/16/report-design-naming-excel-worksheets.aspx](http://blogs.msdn.com/b/robertbruckner/archive/2010/05/16/report-design-naming-excel-worksheets.aspx)

编辑：此属性仅适用于 SQL Server 2008 R2 及更高版本。如果您有 SQL Server 2005 或 2008，则无法命名工作表。

# php - 使用哪种设计模式来动态构建表单。PHP

> ID：15484691
> 
> 赞同：3
> 
> 时间：2013-03-18T18:57:53.817
> 
> 标签：php, oop, design-patterns, factory-pattern

我不想使用在 PHP 中构建表单的已经完成的库。我想使用设计模式编写自己的。我是设计模式的新手，所以我需要知道哪种设计模式最适合在 PHP 中动态构建表单。

例如到目前为止，我得到了类似的东西：

```
 class FormBuilder {
    private $formName;
    private $formAttributes; //array('ID' => ?, 'Classes' => array(?,?) ...
    private $formStyle; //Css styling of form
    private Label $labels; //a collection of label objects holding bunch labels
    private Input $inputs; //a collection of input objects holding bunch inputs

    /* constructor to initialize everything */

   /* GET/SET methods for each of the above private variables */

   ....

   public function generateHTML() {
      //takes above information and builds HTML and returns html
   }
 } 
```

现在我的问题是我需要每个标签都有一个对象，每个输入都有一个对象。但是我可能需要一个对象**或其他表单元素。**最好的方法是使用工厂模式**，而不是为每个类设置类。**

 **任何人都可以建议FormBuilder的设计模式和用于标签/输入的模式，或者如何将标签和输入组合成一个类，将其标识为标签或输入或文本区域等......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:27:13.217

您可以使用构建器模式。
[http://sourcemaking.com/design_patterns/builder/php/1#code](http://sourcemaking.com/design_patterns/builder/php/1#code)

这是一个非常简单的例子。

```
<?php

class FormBuilder
{
    private $elements = array();

    public function label($text) {
        $this->elements[] = "<label>$text</label>";
        return $this;
    }   

    public function input($type, $name, $value = '') {
        $this->elements[] = "<input type=\"$type\" name=\"$name\" value=\"$value\" />";
        return $this;
    }   

    public function textarea($name, $value = '') {
        $this->elements[] = "<textarea name=\"$name\">$value</textarea>";
        return $this;
    }   

    public function __toString() {
        return join("\n", $this->elements);
    }   
}

$b = new FormBuilder();
echo $b->label('Name')->input('text', 'name')->textarea('message', 'My message...'); 
```

输出

```
<label>Name</label>
<input type="text" name="name" value="" />
<textarea name="message">My message...</textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T13:52:49.403

这看起来不错，但这对动态表单没有帮助。动态表单，例如输入依赖于其他输入元素或用户动态添加新元素。

每个元素都应该有单独的类，通过它可以实现动态性。应该有一个由输入类扩展的抽象元素类。此外，应该有一个包含特定输入对象及其标签的字段类。

将很快发送代码.......**

# css - joomla龙门页脚位置关闭

> ID：15484695
> 
> 赞同：0
> 
> 时间：2013-03-18T18:58:14.590
> 
> 标签：css, joomla, positioning

我正在使用 Joomla 3 和 Gantry 框架来制作网站。我刚刚注意到，在我摆弄网站的 css 时，我设法弄乱了页脚的位置。它不再显示在页面底部，它只是固定在最后一个模块下。

谁能给我一个提示可能是什么问题？

该网站是： [http ://solstack.infinito.se/homepage](http://solstack.infinito.se/homepage)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:10:58.887

这是 gantry-custom.css 中的违规风格：

```
div.rt-grid-6 {
    height: 166px;
} 
```

看起来你想要这个：

```
#rt-header div.rt-grid-6 {... 
```

通常，以这种通用方式覆盖样式是一个坏主意。如果您必须强制使用大小和样式，或者像我所做的那样查找现有 ID，请在特定元素上放置类或 ID。为此，我经常使用模块类后缀字段。

更新：

您可以修复其中的内容，而不是在主模板元素上强制设置高度。看起来您可以使用 div 而不是段落，并在没有任何样式的情况下完成相同的事情。div 没有下边距。

```
<div>
    <a title="Hem" target="_self" href="http://solstack.infinito.se/">
        <img alt="" src="/images/logotyp_400_trans.png">
    </a>
</div> 
```

# c# - 调整 windows 窗体的大小不会调整内部组件的大小

> ID：15484696
> 
> 赞同：0
> 
> 时间：2013-03-18T18:58:15.610
> 
> 标签：c#, winforms

我不得不再次触摸 Windows 窗体，我很难找出应该很容易修复的东西。

我有这个控制：

![控制](../Images/e241ad33156ef6cf0b02aa93ffcd436b.png)

当我放入表单时，它看起来像这样：

![控制](../Images/537a297fd16726fcdb1116c6538d4fbe.png)

问题是，在运行表单时，控件位置是这样的：

![控制](../Images/6c70d66353a2c3f1e41e23d857d003b7.png)

我在所有带有控件的组件中设置了anchor属性，所以我不确定它是什么问题。当窗体调整大小时，控件应该调整其组件的大小，但这并没有发生。

任何帮助都将受到欢迎。

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:03:30.870

您需要在容器上设置`Dock`属性。`Fill`我不太确定您的布局结构，我使用 TableLayout 或 Panels，将 Dock 设置为填充它，以便与主窗口一起拉伸。在容器内我放置我的组件，在适当的地方再次设置为 Dock。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:16:48.537

好的，这是一个奇怪的问题。我将表单中的字体更改为 Verdana 并忘记在 Control 中更改它，这就是导致问题的原因。也许它与字体的呈现方式有关。

谢谢

# android - 如何在完全加载活动之前防止 onClick

> ID：15484705
> 
> 赞同：2
> 
> 时间：2013-03-18T18:58:33.000
> 
> 标签：android, android-activity, onclick

我有 4 个带有高分辨率可绘制对象的活动（用于测试目的）和每个活动的相同位置的按钮。单击一个 Button 会移动到下一个 Activity（Activity1 --click--> Activity2 --click--> Activity3 --click--> Activity4）。由于高分辨率图片，加载一个活动大约需要 0.5 秒。

问题。当用户在 Activity1 上的按钮上单击 3 次（甚至在它消失之前）- Activity4 被打开。

看起来点击以某种方式被缓存。如何防止它（尤其是将点击传递给另一个活动）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:42:24.973

`onResume()`您可以在单击按钮时禁用按钮并为每个活动启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:05:13.753

您可以在加载图片时将 AsyncTask 与进度对话框一起使用。加载完成后，您可以设置启用/单击下一步按钮。所以它确保首先加载图片，然后您可以进入下一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:03:31.200

我无法判断您是否尝试停止`onClick()`工作，直到加载当前活动中按钮的图像，或者您是否担心在让用户切换到它们之前加载其他活动中的图像（即您不'不希望用户在 Activity 4 中看到没有背景的按钮。）。这是我对两者的建议。

如果它是第一个问题，为什么不在您的活动中添加一个布尔标志？例如，假设 onClick 您的按钮会触发方法 nextActivity。创建一个变量 buttonReady，它在您的活动开始时为假，但在结束时设置为真`onCreate()`- 大概是当您完成处理该怪物图像时。然后只需在您触发的方法中添加一个条件

```
public void nextActivity(View v){
    if(buttonReady){
        //start your next activity
    } else {
        Log.d("Button click", "Still loading. . .);
    }
} 
```

这样您就不会禁用单击按钮的功能，只会禁用效果。如果问题是您不希望人们在加载图像之前使用该按钮，我会采用类似的方法。只需使用`findViewById`并将按钮设置为不可见，直到处理完位图，然后使按钮出现。

如果您的问题是您想延迟`onClick`按钮直到加载其他活动中的图像，那就更难了。我的问题是，至少在第一次启动时，不会加载任何图像 - 假设您正在使用它们的活动中处理位图。在这种情况下，我有两个可能的建议：

(1) 将按钮设置为不可见，直到按照上述建议处理图像，并在图像加载时将其恢复。例如隐藏：

```
View button = findViewById(R.id.button);
button.setVisibility(View.GONE);( 
```

(2) 创建一个图像缓存，在第一个活动期间将图像加载到那里，然后在填充缓存后从其他活动访问它们。您可以在此处阅读有关[缓存位图的](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)更多信息。

要使这个建议起作用，您需要稍微修改 android 文档中解释的方法。与其在一个活动中包含缓存，不如使用单[例模式之](http://en.wikipedia.org/wiki/Singleton_pattern)类的东西来启动一个可以在整个应用程序中访问的缓存。这样，您只需加载 bimap 一次。

# javascript - 验证日期范围客户端

> ID：15484711
> 
> 赞同：1
> 
> 时间：2013-03-18T18:58:49.410
> 
> 标签：javascript, jquery

我有 2 个文本框，期望格式为`mm/dd/yyyy` Ex：

```
03/20/2013 
```

在我费心进行 ajax 调用之前，我想尝试将这些转换为 JS 日期。我如何检查：

```
Both Dates are in the mm/dd/yyyy format and if they are, then From must be less than to. 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:04:15.180

我建议为此使用时刻。Moment 是一个专门用于日期和评估日期的 js 库。您的两个文本框以字符串开头，因此您需要为`moment()`每个文本框初始化 2 。然后验证它们都是时刻对象。如果是这样，那么确保一个在另一个之后是一件简单的事情。

这是时刻的链接：http: [//momentjs.com/](http://momentjs.com/)

这是我可能使用的代码：

```
var tb1 = $("#tb1").text(); // get string from "date box 1"
var tb2 = $("#tb2").text(); // get string from "date box 2"

//get timestamp val's so they can be used in moment initialization
var date1 = tb1.split("/"); 
var date2 = tb2.split("/");

    //create moments    
var mom1 = moment([date1[2], date1[1], date1[0]);
var mom2 = moment([date2[2], date2[1], date2[0]);

function validate(mom1, mom2){
    //validate both dates are actual dates
if (mom1.isValid() && mom2.isValid()){
            //compare timestamps to ensure 2nd timestamp is larger 
    if(mom1.unix() < mom2.unix()){
        return true;
    } else {
        return false;
    }
} else {
            //strings aren't dates, return error
    $.error("not valid dates");
}
} 
```

# jquery - 如果它需要 ready() 工作，这对我的页面意味着什么

> ID：15484712
> 
> 赞同：1
> 
> 时间：2013-03-18T18:58:49.630
> 
> 标签：jquery, dom, callback, firebug, domready

当我从 firebug 控制台运行时，它下面的代码可以正常工作

```
jQuery(document).ready( function() {
   jQuery('h2').click( function()   {
      jQuery(this).next().next().hide();
   });
}); 
```

但是当我删除 时`jQuery(document).ready`，我的代码不起作用。

```
jQuery('h2').click( function() {
   jQuery(this).next().next().hide();
}); 
```

[ready()](http://api.jquery.com/ready/)表示文档（图像等）已加载到我的浏览器中，*然后*触发事件。但是，如果第一个代码块有效（意味着 DOM 已准备好），那么 seconf 代码块不应该也运行吗？

我想我遗漏了一些东西，但我理解的是，在这两种情况下，代码都应该运行，因为文档是在我的浏览器中加载的。

或者页面代码中可能存在阻碍代码执行的错误。

PS：代码页只是我本地主机中的一个wordpress页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:02:40.427

你错过了`ready`.

`ready`一旦被调用就会被调用，而不是在读取 DOM 时，回调`ready`接收将在读取 DOM 时触发。

```
// The DOM isn't read yet, though you can call the `.ready` function.
jQuery(document).ready( function() {
    // Here, inside the callback, the DOM is ready.
    jQuery('h2').click( function()  {
        jQuery(this).next().next().hide();
    });
}); 
```

假设加载 DOM 需要两秒钟，时间线的简化说明：

```
// Timeline- 00:00
jQuery(document).ready( function() {
    // Timeline- 00:02
    jQuery('h2').click( function()  {
        // Timeline- When ever you clicked on the <h2>
        jQuery(this).next().next().hide();
    });
}); 
```

就像您的点击回调一样：

```
jQuery('h2').click( function()  { 
```

它没有说`<h2>`被点击，但它注册了一个回调以在它被点击时触发。

* * *

一个小而重要的注意事项：

> ready() 表示文档（**图像**等）已加载到我的浏览器中，然后触发事件。

不，javascript native`onload`函数的意思`ready`是**DOM**已准备就绪，这意味着 HTML 结构（包括图像）已加载到客户端浏览器并准备好进行操作，这并不意味着**图像**（或 iframe）已加载（实际图像），这就是为什么`onload`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:03:34.703

第二个不起作用的原因是，当您的脚本运行以注册单击事件时，它不会在 DOM 中找到元素 $('h2') ，因为它尚未加载。这就是为什么你需要使用 $.ready(readyhandler) 或 $(function(){readyhandlerCode}); 因此，一旦您的文档准备好，事件就会被注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:11:01.680

jquery(document).ready() 是 DOM 准备好后执行的函数。

虽然 JavaScript 提供了在页面呈现时执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。

所以所有的 DOM 处理程序代码都像

```
jQuery('h2').click( function()  {
        jQuery(this).next().next().hide();
    }); 
```

将保证仅在

```
jQuery(document).ready( function() {
...

} 
```

阻止或来自任何其他功能。dom 文档准备好后，处理程序也准备好运行。

谢谢。

# c - 在运行时在函数中创建结构数组

> ID：15484716
> 
> 赞同：1
> 
> 时间：2013-03-18T18:58:57.047
> 
> 标签：c, pointers

首先，很抱歉，因为毫无疑问这些信息存在于 SO 上，但我无法追踪它。

尝试（并且失败）将我的大脑包裹在我想做的一些指针魔术上。在运行时，我想创建一个可以迭代的结构“数组”。

```
typedef struct  {
    int length;
    const char* location;
} receipt_info;

void testA()
{
    receipt_info *receipts;
    testB(&receipts);
    printf("Receipt 0 length: %i\n", receipts[0].length); // Displays valid value
    printf("Receipt 1 length: %i\n", receipts[1].length); // Displays invalid value
}

void testB(receipt_info **info)
{
    *info = malloc(sizeof(receipt_info) * 2);
    info[0]->length = 100;
    info[1]->length = 200;
} 
```

在此示例中，我将其硬编码为 2，但 IRL 将由外部因素决定。

我应该在这里做些什么不同的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:04:33.860

这部分不起作用 - 您正在执行两次取消引用，但顺序错误

```
info[0]->length = 100;
info[1]->length = 200; 
```

需要是

```
(*info)[0].length = 100;
(*info)[1].length = 200; 
```

# python - 无人值守安装 python 模块 .exe 文件

> ID：15484718
> 
> 赞同：7
> 
> 时间：2013-03-18T18:59:01.560
> 
> 标签：python, distribute

我正在寻找一种方法来安装一堆 python 模块，`.exe`格式如下：

```
ipython-0.13.1.py2-win32-PROPER.exe
scipy-0.12.0b1.win32-py2.7.exe
numpy-MKL-1.7.0.win32-py2.7.exe
pywin32-218.win32-py2.7.exe 
```

我可以通过从命令行安装`distribute`和调用 pip 来安装其他模块，但我想知道我是否可以自动安装 .exe 文件 - 所以用户不必单击“下一步”“好的”按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:07:57.653

好吧，这确实是可能的：

我使用了distribute `easy_install`，一切都像魔术一样工作。

只需使用`easy_install [exeinstaller1] [exeinstaller2] ...`

# android - Android：GPS 应用程序出现空指针异常

> ID：15484719
> 
> 赞同：0
> 
> 时间：2013-03-18T18:59:03.017
> 
> 标签：android, gps, nullpointerexception, location

我尝试为我的学习创建一个应用程序，它是一个跟踪运动。

当我发送新的本地化时，我的应用程序由于此错误而崩溃：

```
03-18 18:44:34.662: E/AndroidRuntime(1085): FATAL EXCEPTION: main
03-18 18:44:34.662: E/AndroidRuntime(1085): java.lang.NullPointerException
03-18 18:44:34.662: E/AndroidRuntime(1085): at android.app.Activity.findViewById(Activity.java:1839)
03-18 18:44:34.662: E/AndroidRuntime(1085): at fr.polytech.trackersportif.GPSData.onLocationChanged(GPSData.java:28)
03-18 18:44:34.662: E/AndroidRuntime(1085): at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:255)
03-18 18:44:34.662: E/AndroidRuntime(1085): at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:184)
03-18 18:44:34.662: E/AndroidRuntime(1085): at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:200)
03-18 18:44:34.662: E/AndroidRuntime(1085): at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 18:44:34.662: E/AndroidRuntime(1085): at android.os.Looper.loop(Looper.java:137)
03-18 18:44:34.662: E/AndroidRuntime(1085): at android.app.ActivityThread.main(ActivityThread.java:5039)
03-18 18:44:34.662: E/AndroidRuntime(1085): at java.lang.reflect.Method.invokeNative(Native Method)
03-18 18:44:34.662: E/AndroidRuntime(1085): at java.lang.reflect.Method.invoke(Method.java:511)
03-18 18:44:34.662: E/AndroidRuntime(1085): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-18 18:44:34.662: E/AndroidRuntime(1085): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-18 18:44:34.662: E/AndroidRuntime(1085): at dalvik.system.NativeStart.main(Native Method) 
```

我的主要活动是：

```
locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
locationListener = new GPSData();
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0, locationListener); 
```

完成我的课程（GPSData）是：

```
public class GPSData extends Activity implements LocationListener{

 TextView textLong, textLat;

protected void onCreate(Bundle savedInstanceState) {
    //super.onCreate(savedInstanceState);     
    setContentView(R.layout.page_accueil);  //page_acceuil is the layout where are the two textview that I want set text  
}

@Override
public void onLocationChanged(Location location) {

     textLong = (TextView) findViewById(R.id.textView1);
     textLat = (TextView) findViewById(R.id.textView3);

    textLong.setText(String.valueOf(location.getLongitude()));
    textLat.setText(String.valueOf(location.getLatitude()));        
} 
```

两天后我尝试了不同的事情，但我一次又一次地遇到这个错误。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:09:37.630

调用`new`不是启动`Activity`. 你`NullPointerException`最有可能被抛出：

```
textLong.setText(String.valueOf(location.getLongitude())); 
```

`Activity`这是因为通过调用创建一个新的`new`不会触发该`onCreate`方法。因此，您的`GPSData`班级永远不会有视图集，因为`setContentView`没有被调用。这意味着使用您自己的视图 ID 之一调用`findViewById`将始终返回`null`。

我建议不要在你的课堂上设置你`LocationListener`的`MainActivity`，而是在你的`GPSData`课堂上进行。为此，您必须进行以下更改：

主要活动：

```
Intent intent = new Intent(this, GPSData.class);
startActivity(intent); 
```

GPS数据：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.page_accueil);

    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0, this);
} 
```

您应该能够`GPSData`独自离开课堂的其余部分。仅更改`onCreate`方法以匹配此方法。

这一切都假设你真的想像你的代码一样`GPSData`独立。`Activity`如果您不希望它是一个单独的，`Activity`那么我建议您创建`GPSData`一个私有内部类，并使其`Activity`不像 BrianPlummer 建议的那样扩展。在这种情况下，您的`GPSData`课程将如下所示：

```
private class GPSData implements LocationListener {

    TextView textLong;
    TextView textLat;

    public GPSData() {
        textLong = (TextView) findViewById(R.id.textView1);
        textLat = (TextView) findViewById(R.id.textView3);
    }

    @Override
    public void onLocationChanged(Location location) {    
        textLong.setText(String.valueOf(location.getLongitude()));
        textLat.setText(String.valueOf(location.getLatitude()));        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:03:23.210

`telnet`如果不使用和`geo fix lat coordinate long coordinate`命令指定经纬度坐标，则无法在模拟器中测试基于地理位置的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:04:27.287

您必须将 GPSData 放入 mainactivity。您只能访问 (TextView) findViewById(R.id.textView1); 在 MainActivity

和 MainActivity.this.findViewById(R.id.textView1);

# c# - 是否有非常适合在具有超线程的处理器上进行浮点计算的任务调度程序？

> ID：15484720
> 
> 赞同：2
> 
> 时间：2013-03-18T18:59:04.353
> 
> 标签：c#, floating-point, task-parallel-library, .net-4.5, hyperthreading

我想使用 TPL 来管理对英特尔 IPP 或 MKL 库的调用。自然，这些是浮点计算密集型指令。由于超线程只为每个内核分配一个浮点线程，我想要一种智能地安排任务的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:58:58.820

这不是超线程的工作方式。没有这样的“分配”，也没有“每个核心的浮点线程”的概念。内核动态选择可用的浮点执行单元之一。其中有几个，它们没有相同的功能。拥有许多执行引擎是超线程首先工作的原因。人为地尝试绕过可能是超线程的逻辑内核并不会使其更快，它会使其变慢，因为您很可能会绕过使用其他空闲引擎的机会。

我知道您的其他问题实际上还没有这个工作。所以这很可能是过早优化的情况。让它先运行，看看它是否足够好。如果缺少，则通过选择更好的硬件继续前进，例如至强级处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T15:03:26.500

为了使 IPP FFT 有效和高效，我必须分拆尽可能多的任务，因为每个包的核心数乘以包的数量。

启用 NUMA 节点后，必须通过在应用程序配置文件中启用 gcServer 来解决另一个可伸缩性问题。这似乎可以确保在每个 NUMA 节点上平均分配内存。

（启用 HT...）启用 Intel TurboBoost 后，我​​发现 CPU 利用率不到 50%，通常低至 35%。关闭 TurboBoost 后，我​​看到 50% 的 CPU 负载始终如一。

很高兴看到，在 .NET 4.5 任务并行库中，服务器级的性能调整被外部化了。永远免费获得它会更好。

详细信息：在带有 Server 2k8 R2 SP1 Enterprise 的双 Xeon E5 v1 装备上进行了测试。

# algorithm - 使用最少跳数的 A* 启发式算法

> ID：15484722
> 
> 赞同：1
> 
> 时间：2013-03-18T18:59:10.563
> 
> 标签：algorithm, graph, graph-algorithm, heuristics

我有一个节点图，我需要从节点 a 到节点 b。什么是从 A 点到 B 点的一个好的启发式函数（可以是伪代码或任何东西）。可用的信息是节点的邻接性和所有节点之间的距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T03:50:56.833

如果您有所有节点之间的距离，那么这是您可以拥有的最佳启发式方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T19:02:14.187

看看 Dijkstra 的算法

[http://en.wikipedia.org/wiki/Dijkstra's_algorithm](http://en.wikipedia.org/wiki/Dijkstra) _

# coldfusion - ColdFusion ServerFile 在 CFFile 中未定义

> ID：15484724
> 
> 赞同：1
> 
> 时间：2013-03-18T18:59:13.773
> 
> 标签：coldfusion, cffile

当我尝试运行以下代码时，我收到错误消息：`"Element SERVERFILE is undefined in CFFILE."`. 我已经这样做了一百万次了。谁能看到我错过了什么？

```
 <cffile action="upload" fileField="fileField" destination="xxxx" 
        nameConflict="Overwrite" result="thisResult">
    <cfoutput>#cffile.ServerFile#</cfoutput> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:02:14.943

您正在使用该[`result`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-738f.html)属性。因此，请`cffile.serverFile`使用`thisResult.serverFile`.

> **结果**允许您为 cffile 返回结果（或状态）参数的变量指定名称。如果不为此属性指定值，cffile 将使用前缀 cffile。有关详细信息，请参阅用法。

# java - 在 Eclipse 插件中定位新视图

> ID：15484728
> 
> 赞同：0
> 
> 时间：2013-03-18T18:59:31.800
> 
> 标签：java, eclipse, plugins, swt

我已经成功地创建了一个新视图，从我的 plugin.xml 传递了主 ID 和一个唯一的辅助 ID。一切都很好。它会随心所欲地弹出。

但是......它弹出完全错误的文件夹。

我希望它与其他同类型的一起去。它是我希望在其中创建的主文件夹中心面板。现在我可以手动移动它（作为用户）并将它放在我想要的位置。

感觉离这个很近。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:00:25.830

我不清楚“错误的文件夹”？这里有两件事。首先，如果它出现在工作台的错误位置，那么您需要使用`org.eclipse.ui.perspectiveExtensions`扩展将其放置在透视图中的正确位置。其次，如果它没有与一组视图分组，那么您需要在视图扩展中添加“类别”以显示在“显示视图”中的正确类别中。希望这两点对你有所帮助。如果我完全错过了你的观点，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:57:28.627

创建一个透视扩展并在那里[使用视图定义的“相对”属性](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_perspectiveExtensions.html#e.view)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:20:34.467

我找到了解决方案。当在 perspectiveExtensions 扩展类中布置文件夹时，我需要告诉它额外的视图将在哪里结束。为此，您可以调用 IFolderLayout.addPlaceholder() 在必要时传入必要的通配符。

```
bodyleft.addPlaceholder( "MyViewId:*" ); 
```

这很有魅力。

# javascript - 为什么“onecandidate”不起作用？

> ID：15484729
> 
> 赞同：21
> 
> 时间：2013-03-18T18:59:34.083
> 
> 标签：javascript, webrtc, stun

我无法理解 webRTC 的 PeerConnection 和 'onicecandidate' 事件。

据我了解，您**必须**使用 STUN（或 TURN）服务器启动对等连接，因为它会将您的 ICE 候选发送回与另一个对等通信。

我已经看到了将 PeerConnection 对象的服务器参数排除在外的示例，我也不明白，但我们只是说它确实需要服务器参数。

因此，当我写下以下代码时：

```
 var pc, ice = { "iceServers": [{ "url": "stun:stun.l.google.com:19302" }] };
if(typeof mozRTCPeerConnection === 'function') {

    pc = new mozRTCPeerConnection(ice);
}
else {
    console.log('google');
    pc = new webkitRTCPeerConnection(ice);
}

pc.onicecandidate  = function(event) { 
    console.log(event);
} 
```

我希望 'onicecandidate' 事件会触发，但它不起作用。我也尝试了其他公共 STUN 服务器，但没有任何反应。所以我认为我的理解可能有问题:)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-19T17:10:10.120

在您调用 setLocalDescription(); 之前，PeerConnection 不会开始收集候选人；提供给 setLocalDescription 的信息告诉 PeerConnection 需要收集多少候选人。（setLocalDescription 的这种行为在[https://datatracker.ietf.org/doc/html/draft-ietf-rtcweb-jsep-03#section-4.2.4](https://datatracker.ietf.org/doc/html/draft-ietf-rtcweb-jsep-03#section-4.2.4)的定义中有所说明）

以下是在同一浏览器窗口中的两个 PeerConnection 之间建立连接的完整流程（省略添加 MediaStream 以专注于信令）：

```
var pc1, pc2, offer, answer;

pc1 = new webkitRTCPeerConnection(options);
pc2 = new webkitRTCPeerConnection(options);

pc1.onicecandidate = function(candidate) {
  pc2.addIceCandidate(candidate);
};

pc2.onicecandidate = function(candidate) {
  pc1.addIceCandidate(candidate);
};

pc1.createOffer(onOfferCreated, onError);

function onError(err) {
  window.alert(err.message);
}

function onOfferCreated(description) {
  offer = description;
  pc1.setLocalDescription(offer, onPc1LocalDescriptionSet, onError);
}

function onPc1LocalDescriptionSet() {
  // after this function returns, pc1 will start firing icecandidate events
  pc2.setRemoteDescription(offer, onPc2RemoteDescriptionSet, onError);
}

function onPc2RemoteDescriptionSet() {
  pc2.createAnswer(onAnswerCreated, onError);
}

function onAnswerCreated(description) {
  answer = description;
  pc2.setLocalDescription(answer, onPc2LocalDescriptionSet, onError);
}

function onPc2LocalDescriptionSet() {
  // after this function returns, you'll start getting icecandidate events on pc2
  pc1.setRemoteDescription(answer, onPc1RemoteDescriptionSet, onError);
}

function onPc1RemoteDescriptionSet() {
  window.alert('Yay, we finished signaling offers and answers');
} 
```

由于您在问题中包含了 mozPeerConnection，我会注意到 Firefox 目前不会生成“trickle Candidates”。这意味着它将在提议/答案中将其候选地址作为“c”行包含在内，并且永远不会调用 onicecandidate 回调。

这种方法的缺点是 Firefox 在创建它的提议/答案之前必须等待它的所有候选人被收集（这个过程可能涉及联系 STUN 和 TURN 服务器并等待响应或请求超时）。

# jquery - 如何通过 jQRangeSlider 获取选定的值

> ID：15484734
> 
> 赞同：1
> 
> 时间：2013-03-18T18:59:50.187
> 
> 标签：jquery, jquery-plugins

我正在尝试将 jQRangeSlider 集成到我的 jqplot 应用程序中，这意味着用户可以滑动 x 轴并决定要说明的绘图范围。但是，我在访问所选范围时遇到了一些困难。这是我的方法的[演示](http://jsfiddle.net/godhong/vM844/223/)。

似乎选定的值保存在以下位置`<divs>`

```
<div class="ui-rangeSlider-label-value">2010-02-11</div>
<div class="ui-rangeSlider-label-value">2011-02-11</div> 
```

我试着用

```
alert($(".ui-rangeSlider-label-value").val()) 
```

但得到了空的回报。如果有人能给我一些建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:29:56.933

最后从jqrangeslider的文档中找到了方法。这是一个简单的例子

```
var values = $("#slider").dateRangeSlider("values");
console.log(values .min + " " + values .max); 
```

# azure - 在 CDN 端点中放置 WCF 服务？

> ID：15484735
> 
> 赞同：1
> 
> 时间：2013-03-18T18:59:53.800
> 
> 标签：azure, azure-cdn

是否可以将 WCF 服务放置在 Azure CDN Endopint 中？还是仅放置静态内容才有效？

这会很有用，因为我有一个不断与 WCF 服务通信的 Web 前端。

如果没有，关于如何减少延迟的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:16:49.067

如果要在 Azure 中运行冗余 WCF 服务，请创建一个 WCF 服务 Web 角色项目并进行部署。在配置中，您可以扩展部署以满足负载。您可以为每个包创建和部署多个角色，每个角色都有其单独的实例计数。

如果您希望服务分布在多个区域，则必须使用[Azure 流量管理器](https://www.windowsazure.com/en-us/manage/services/networking/traffic-manager/)，该管理器根据位置或循环格式处理引导流量。

# html - 可滚动的窗口高度 Div，第二个 Div 占据屏幕空间的其余部分

> ID：15484739
> 
> 赞同：0
> 
> 时间：2013-03-18T19:00:01.690
> 
> 标签：html, css

这可能只用CSS吗？

我正在尝试将屏幕分成两个空间：

1.  左侧的 div 始终与屏幕高度相同，将其宽度扩展到其内容并使用滚动条处理高度溢出。

2.  一个 div，它占据剩余的屏幕宽度，包装其内容，并且其高度至少与屏幕高度一样高，而与内容无关。

这是我尽最大努力尝试的一些示例代码（[小提琴](http://jsfiddle.net/tTFta/)）：

HTML：

```
<body>
    <div id="items">
        <table>
            <tr>
                <td>stuff stss fsfs sfafa sfsfa fsfafafa</td>
            </tr>
            <tr>
                <td>stuff stss fsfs sfafa sfsfa fsfafafa</td>
            </tr>
            <tr>
                <td>stuff stss fsfs sfafa sfsfa fsfafafa</td>
            </tr>
            <tr>
                <td>stuff stss fsfs sfafa sfsfa fsfafafa</td>
            </tr>
            <tr>
                <td>stuff stss fsfs sfafa sfsfa fsfafafa</td>
            </tr>
            <tr>
                <td>stuff stss fsfs sfafa sfsfa fsfafafa</td>
            </tr>
            <tr>
                <td>stuff stss fsfs sfafa sfsfa fsfafafa</td>
            </tr>
            <tr>
                <td>stuff stss fsfs sfafa sfsfa fsfafafa</td>
            </tr>
        </table>
    </div>
    <div id="container">This should expand rest of page width.</div>
</body> 
```

CSS：

```
body {
    margin: 0;
    padding: 0;
    position: absolute;
    height: 100%;
}
#items {
    height: 100%;
    overflow-y: scroll;
    border: solid 1px red;
    float: left;
}
#container {
    min-height: 100%;
    border: solid 1px blue;
    float: left;
} 
```

这是非常接近的，但它失败了，因为第二个 div（蓝色边框）未能扩展整个剩余的屏幕宽度。我不想设置 % 宽度或给任何一个固定宽度，因为我希望第一个 div 根据其内容扩展其宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:04:32.793

做这个：

```
html, body {
    width: 100%;
    height: 100%;
}

#left {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    overflow-x: hidden;
    overflow-y: scroll;
}

#right {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    overflow-x: hidden;
    overflow-y: scroll; // or not if you don't want it to
} 
```

# vb.net - 生成随机字符串

> ID：15484742
> 
> 赞同：7
> 
> 时间：2013-03-18T19:00:12.963
> 
> 标签：vb.net, string, random

好吧，我知道有很多这些线程，但我是 vb.net 的新手，但我无法编辑给出的源代码来制作我真正想要的东西，所以我想要一个函数，它会生成随机字符串，每个字符串包含 15-32 个字符并且它们每个都将具有以下字符（不是所有字符都在同一个字符串中，而是其中一些字符）：AZ az 0-9 这是我到目前为止的代码

```
Functon RandomString()
    Dim s As String = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
    Dim r As New Random
    Dim sb As New StringBuilder
    For i As Integer = 1 To 8
        Dim idx As Integer = r.Next(0, 35)
        sb.Append(s.Substring(idx, 1))
    Next
    return sb.ToString()
End Function 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T19:18:48.547

更改字符串以包含 az 字符：

```
Dim s As String = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789" 
```

更改循环以创建随机数量的字符：

```
Dim cnt As Integer = r.Next(15, 33)
For i As Integer = 1 To cnt 
```

请注意，方法中的上限`Next`是互斥的，因此`Next(15, 33)`给您一个范围为 15 到 32 的值。

使用字符串的长度从中选择一个字符：

```
Dim idx As Integer = r.Next(0, s.Length) 
```

由于您要创建随机字符串，而不是单个随机字符串，因此不应在函数内部创建随机数生成器。如果您两次调用该函数的时间太接近，您最终会得到相同的随机字符串，因为随机生成器是使用系统时钟播种的。因此，您应该将随机生成器发送到函数中：

```
Function RandomString(r As Random) 
```

所以，总而言之：

```
Function RandomString(r As Random)
  Dim s As String = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
  Dim sb As New StringBuilder
  Dim cnt As Integer = r.Next(15, 33)
  For i As Integer = 1 To cnt
    Dim idx As Integer = r.Next(0, s.Length)
    sb.Append(s.Substring(idx, 1))
  Next
  return sb.ToString()
End Function 
```

使用示例：

```
Dim r As New Random
Dim strings As New List<string>()
For i As Integer = 1 To 10
  strings.Add(RandomString(r))
Next 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T19:02:18.740

尝试这样的事情： -

```
stringToReturn&= Guid.NewGuid.ToString().replace("-","") 
```

你也可以检查[这个](http://www.codeproject.com/Articles/11142/Generate-a-Random-String-Key-in-VB-NET)： -

```
Sub Main()
        Dim KeyGen As RandomKeyGenerator
        Dim NumKeys As Integer
        Dim i_Keys As Integer
        Dim RandomKey As String

        ''' MODIFY THIS TO GET MORE KEYS    - LAITH - 27/07/2005 22:48:30 -
        NumKeys = 20

        KeyGen = New RandomKeyGenerator
        KeyGen.KeyLetters = "abcdefghijklmnopqrstuvwxyz"
        KeyGen.KeyNumbers = "0123456789"
        KeyGen.KeyChars = 12
        For i_Keys = 1 To NumKeys
            RandomKey = KeyGen.Generate()
            Console.WriteLine(RandomKey)
        Next
        Console.WriteLine("Press any key to exit...")
        Console.Read()
    End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T19:16:12.513

以您的功能为指导，我将其修改为：

1.  随机化长度（在 minChar 和 maxCharacters 之间）
2.  随机化每次生成的字符串（使用静态随机）

代码：

```
Function RandomString(minCharacters As Integer, maxCharacters As Integer)
    Dim s As String = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
    Static r As New Random
    Dim chactersInString As Integer = r.Next(minCharacters, maxCharacters)
    Dim sb As New StringBuilder
    For i As Integer = 1 To chactersInString
        Dim idx As Integer = r.Next(0, s.Length)
        sb.Append(s.Substring(idx, 1))
    Next
    Return sb.ToString()
End Function 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-08T11:00:21.310

试试这个：

```
Private Function RandomString(ByRef Length As String) As String
    Dim str As String = Nothing
    Dim rnd As New Random
    For i As Integer = 0 To Length
        Dim chrInt As Integer = 0
        Do
            chrInt = rnd.Next(30, 122)
            If (chrInt >= 48 And chrInt <= 57) Or (chrInt >= 65 And chrInt <= 90) Or (chrInt >= 97 And chrInt <= 122) Then
                Exit Do
            End If
        Loop
        str &= Chr(chrInt)
    Next
    Return str
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T19:06:28.980

您需要将线路更改`For i As Integer = 1 To 8`到`For i As Integer = 1 To ?`哪里？是字符串应该是长的字符数。这会更改重复以下代码的次数，以便将更多字符附加到字符串中。

```
 Dim idx As Integer = r.Next(0, 35)
    sb.Append(s.Substring(idx, 1)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T19:41:29.290

我的 $.02

```
Dim prng As New Random
Const minCH As Integer = 15 'minimum chars in random string
Const maxCH As Integer = 35 'maximum chars in random string

'valid chars in random string
Const randCH As String = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"

Private Function RandomString() As String
    Dim sb As New System.Text.StringBuilder
    For i As Integer = 1 To prng.Next(minCH, maxCH + 1)
        sb.Append(randCH.Substring(prng.Next(0, randCH.Length), 1))
    Next
    Return sb.ToString()
End Function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-07T18:55:56.420

请注意，

```
r.Next(0, 35) 
```

倾向于挂起并显示相同的结果不知道为什么；更好用

```
CInt(Math.Ceiling(Rnd() * N)) + 1 
```

在这里看到它[VB.NET 中的随机整数](https://stackoverflow.com/questions/18676/random-int-in-vb-net)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-10T02:39:56.000

我根据自己的需要加强了 Nathan Koop 的功能，并认为我会分享。

**我补充说：**

*   能够将前置和附加文本添加到随机字符串
*   能够选择允许的字符（字母）的大小写
*   能够选择在允许的字符中包含/排除数字

注意：如果严格寻找确切长度的字符串，同时还添加预/附加字符串，您需要处理它；我遗漏了任何逻辑来处理它。

**示例用法：**

```
' Straight call for a random string of 20 characters
' All Caps + Numbers
String_Random(20, 20, String.Empty, String.Empty, 1, True)

' Call for a 30 char string with prepended string
' Lowercase, no numbers
String_Random(30, 30, "Hey_Now_", String.Empty, 2, False)

' Call for a 15 char string with appended string
' Case insensitive + Numbers
String_Random(15, 15, String.Empty, "_howdy", 3, True) 
```

.

```
Public Function String_Random(
    intMinLength As Integer,
    intMaxLength As Integer,
    strPrepend As String,
    strAppend As String,
    intCase As Integer,
    bIncludeDigits As Boolean) As String

    ' Allowed characters variable
    Dim s As String = String.Empty

    ' Set the variable to user's choice of allowed characters
    Select Case intCase

        Case 1

            ' Uppercase
            s  = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"

        Case 2

            ' Lowercase
            s = "abcdefghijklmnopqrstuvwxyz"                

        Case Else

            ' Case Insensitive + Numbers
            s  = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz" 

    End Select

    ' Add numbers to the allowed characters if user chose so
    If bIncludeDigits = True Then s &= "0123456789"

    Static r As New Random

    Dim chactersInString As Integer = r.Next(intMinLength, intMaxLength)
    Dim sb As New StringBuilder

    ' Add the prepend string if one was passed
    If String.IsNullOrEmpty(strPrepend) = False Then sb.Append(strPrepend)

    For i As Integer = 1 To chactersInString

        Dim idx As Integer = r.Next(0, s.Length)

        sb.Append(s.Substring(idx, 1))

    Next

    ' Add the append string if one was passed
    If String.IsNullOrEmpty(strAppend) = False Then sb.Append(strAppend)

    Return sb.ToString()

End Function 
```

# c# - 创建的 LowercaseKeywordAnalyzer 结合 TermQuery 不返回结果

> ID：15484749
> 
> 赞同：0
> 
> 时间：2013-03-18T19:00:44.477
> 
> 标签：c#, lucene, lucene.net

我正在使用 PerFieldAnalyzer 将 ExactTitle 设置为使用新的 LowercaseKeywordAnalyzer：

```
private Analyzer GetDefaultAnalyzer()
    {
        var perFieldAnalyzer = new PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_30));
        perFieldAnalyzer.AddAnalyzer(ReportFields.ExactTitle, new LowercaseKeywordAnalyzer());
... 
```

我正在构建索引，在字段中添加：

```
var exactTitleField = new Field(ReportFields.ExactTitle, report.PortalReportTitle, Field.Store.NO,
                                            Field.Index.NOT_ANALYZED);
            exactTitleField.Boost = 10.0f;
            reportDoc.Add(exactTitleField); 
```

当我使用 2 字示例“test abc”对其进行搜索时，当我对它进行 TermQuery 搜索时找不到它：

```
var term = new Term(exactField, "test abc");
var exactQuery = new TermQuery(term);
query.Add(exactQuery,Occur.SHOULD);
var hits = searcher.Search(query, null, HitsLimit, Sort.RELEVANCE); 
```

如果我搜索“Test Abc”，它会起作用。我该怎么做才能使这种不区分大小写的关键字/术语搜索工作？

这是分析器：

```
public class LowercaseKeywordAnalyzer : Analyzer
{

    public override TokenStream TokenStream(string fieldName, System.IO.TextReader reader)
    {
        TokenStream tokenStream = new KeywordTokenizer(reader);
        tokenStream = new LowerCaseFilter(tokenStream);
        return tokenStream;
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:09:43.627

当您指定`Field.Index.NOT_ANALYZED`创建字段的时间时，分析器将不会运行并且文本不会转换为小写

切换它`Field.Index.ANALYZED`

**编辑**

也许您的索引代码存在问题，并且不要忘记，如果您在索引时小写，您还将在搜索时将输入小写以获得匹配。

由于您手动构建查询，因此您需要自己处理它。理想情况下，您希望在搜索时`Analyzer`构建您的字符串之前运行相同的字符串。`Term`

我已经提供了一个快速的小示例，可以完成您似乎正在尝试做的事情，也许它会帮助您找出问题所在。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Lucene.Net.Analysis;
using Lucene.Net.Analysis.Standard;
using Lucene.Net.Documents;
using Lucene.Net.Index;
using Lucene.Net.Search;
using Lucene.Net.Store;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            RAMDirectory dir = new RAMDirectory();
            var perFieldAnalyzer = new PerFieldAnalyzerWrapper(new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30));
            perFieldAnalyzer.AddAnalyzer("ExactTitle", new LowercaseKeywordAnalyzer());

            IndexWriter indexWriter = new IndexWriter(dir, perFieldAnalyzer, IndexWriter.MaxFieldLength.UNLIMITED);

            Document reportDoc = new Document();
            Field exactTitleField = new Field("ExactTitle", 
                                                "Test Abc", 
                                                Field.Store.NO,
                                                Field.Index.ANALYZED);

            reportDoc.Add(exactTitleField);
            indexWriter.AddDocument(reportDoc);
            indexWriter.Commit();

            IndexSearcher searcher = new IndexSearcher(indexWriter.GetReader());

            var term = new Term("ExactTitle", "test abc"); //note: for this to work this way you need to always lower case the search too
            var exactQuery = new TermQuery(term);

            var hits = searcher.Search(exactQuery, null, 25, Sort.RELEVANCE);
            Console.WriteLine(hits.TotalHits); // prints "1"
            Console.ReadLine();

            indexWriter.Close();

        }

        public class LowercaseKeywordAnalyzer : Analyzer
        {

            public override TokenStream TokenStream(string fieldName, System.IO.TextReader reader)
            {
                TokenStream tokenStream = new KeywordTokenizer(reader);
                tokenStream = new LowerCaseFilter(tokenStream);
                return tokenStream;
            }
        }
    }
} 
```

# iphone - 带有情节提要的 UITabBarController 中的 iAd

> ID：15484751
> 
> 赞同：1
> 
> 时间：2013-03-18T19:00:50.520
> 
> 标签：iphone, ios, xcode, uitabbarcontroller, iad

我正在尝试将 iAd 添加到我使用 Storyboards 设置的基于标签的应用程序中。我正在关注 Apple 的 iAdSuite 示例代码中的 TabbedBanner 示例。我已经导入 BannerViewController 并设置了以下内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  UITabBarController* tabBarController = (id)self.window.rootViewController;
CGRect tabBarViewFrame = tabBarController.view.frame;
tabBarViewFrame.origin.y -= application.statusBarFrame.size.height;
tabBarViewFrame.size.height += application.statusBarFrame.size.height;
tabBarController.view.frame = tabBarViewFrame;

self.window.rootViewController = [[BannerViewController alloc] initWithContentViewController:tabBarController];
} 
```

我已将以下内容添加到我的 SummaryViewController

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willBeginBannerViewActionNotification:) name:BannerViewActionWillBegin object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didFinishBannerViewActionNotification:) name:BannerViewActionDidFinish object:nil];
} 
```

广告当前显示在标签栏下方？另外，我的观点的内容也消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:15:39.407

**不要在最后一段代码中使用`nil`for 。`bundle`使用`[NSBundle mainBundle]`.

# delphi - 终结部分未在 dll 中运行

> ID：15484752
> 
> 赞同：0
> 
> 时间：2013-03-18T19:00:51.630
> 
> 标签：delphi, twebbrowser

我正在尝试在 Delphi XE2 中创建一个 DLL，它将弹出一个包含 TWebBrowser 组件的表单。当调用 WebBrowser.Navigate2 方法时，单元（或任何单元）的终结部分在应用程序结束时不会被调用。如果未调用 Navigate2，则完成部分会正常进行。

dll 正在从 C++（目前是 VS 2010 MFC 控制台）调用，并通过导入库链接。

还有其他方法可以做到这一点，但我想重用我们已经编写的代码。

有谁知道发生了什么？

谢谢。

这是问题的简单再现：

```
library DisplayPatientAlertsIntf;
exports DisplayPatientAlertsA name 'DisplayPatientAlertsA@4';

begin
end.

unit uAlertWindow;

interface

uses
  Winapi.ActiveX,
  Forms,
  SHDocVw,
  Graphics, Controls;

function DisplayPatientAlertsA(PatientID : PAnsiChar): Integer; export; stdcall;

implementation

var ts : TStringList;

function DisplayPatientAlertsA(PatientID : PAnsiChar): Integer; export; stdcall;
  var Form1 : TForm;
      WebBrowser1 : TWebBrowser;
      DidCoInit : Boolean;
begin
  DidCoInit := Succeeded(CoInitialize(nil));
  try
    Form1 := TForm.Create(nil);
    try
      WebBrowser1 := TWebBrowser.Create(nil);
      try
        WebBrowser1.ParentWindow := Form1.Handle;
        WebBrowser1.Align := alClient;
        WebBrowser1.Navigate2('file://c:\temp.html');
        Form1.ShowModal;
      finally
        WebBrowser1.Free;
      end;
    finally
      Form1.Free;
    end;
  finally
    if DidCoInit then
      CoUninitialize;
  end;
  Result := 0;
end;

initialization
  ts := TStringList.Create;

finalization
  ts.Free;

end. 
```

**更新 2013.03.19** 在解决另一个问题（dll 中的 dbExpress 驱动程序）时，我将其从带有导入库的静态链接 dll 更改为动态加载的 dll，一切都开始工作了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:55:57.687

不要在 DLL 的初始化/完成过程中调用`CoInitialize()`或。`CoUninitialize()`这是一个非常糟糕的地方，而且无论如何调用它们不是 DLL 的责任。调用 DLL 函数的线程负责。如果您必须调用它们，那么至少在导出的函数中这样做。

至于导出的函数本身，使用`WebBrowser1.Parent`代替`WebBrowser1.ParentWindow`，使用`Form1.Free`代替`Form1.Release`，并完全摆脱`Application.ProcessMessages`。

最后，不要使用手动修饰的名称导出函数。这也不是 DLL 的职责。让编译器处理装饰。如果在导入函数时命名不匹配，则需要在调用应用程序中解决，而不是 DLL 本身。

您对 COM 和 VCL 的滥用（特别是因为该问题仅在调用导出的 DLL 函数后才发生）可能会导致死锁，从而阻止 DLL 从内存中正确卸载，因此不会调用其终结部分，因为它的无法调用 DLL 入口点。COM 在初始化/清理方面非常敏感，因此您必须确保在正确的上下文中正确执行此操作。

尝试这个：

```
library DisplayPatientAlertsIntf;

uses
  uAlertWindow;

exports
  DisplayPatientAlertsA;

begin
end. 
```

.

```
unit uAlertWindow;

interface

uses
  Winapi.ActiveX,
  Forms,
  SHDocVw,
  Graphics, Controls;

function DisplayPatientAlertsA(PatientID : PAnsiChar): Integer; stdcall;

implementation

function DisplayPatientAlertsA(PatientID : PAnsiChar): Integer; stdcall;
var
  Form1 : TForm;
  WebBrowser1 : TWebBrowser;
  DidCoInit: Boolean;
begin
  Result := 0;
  try
    DidCoInit = Succeeded(CoInitialize(nil));
    try    
      Form1 := TForm.Create(nil);
      try
        WebBrowser1 := TWebBrowser.Create(Form1);
        WebBrowser1.Parent := Form1;
        WebBrowser1.Align := alClient;
        WebBrowser1.Navigate2('file://c:\temp.html'); //This contains 'ASDF'
        Form1.ShowModal;
      finally
        Form1.Free;
      end;
    finally
      if DidCoInit then
        CoUninitialize;
    end;
  except
    Result := -1;
  end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:10:54.187

您可能会发现当其中一个单元正在完成时会引发异常，从而阻止其他单元完成。

我不确定 XE2，但旧版本的 Delphi 往往对 ComObj 单元在使用/初始化中“高位”非常挑剔，因此它将是最后完成的单元之一。
问题在于，如果 ComObj 过早完成，它将 CoUninitialize 过早 - 有效地从仍然期望 COM 初始化的其他代码下撕下地毯。

如果 SHDocVw 的 XE2 版本在其实现部分仍然使用 ComObj，那么 ComObj 将相对“延迟”初始化。所以这很可能是你的问题。在这种情况下，只需在源代码中显式地添加它就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T06:06:57.203

Delphi 没有大量使用普通的 DLL，它的支持是基本的，几乎没有文档记录

虽然 Delphi 对 EXE 文件做得很好，拦截 WinMain 并将其语义引入 Turbo Pascal 样式上下文，但对于 DLL，您必须手动完成。

从阅读[DLL-Main Microsoft 文档和教程](https://www.google.ru/search?client=opera&q=msdn%20dllmain&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)开始。

然后你可以添加到你的`DLL.dpr`东西

```
begin
  DLLProc := @DLLMain;
  DLLMain(DLL_PROCESS_ATTACH);
end. 
```

然后在某个 DLL 单元中，您可以像这样实现它：

```
procedure DLLMain(dwReason: DWORD);
begin
  case dwReason of
  DLL_PROCESS_ATTACH:
    begin
      Application.HelpFile := HelpFileName;
      dmSelVars := TdmSelVars.Create(nil);
    end {= DLL_PROCESS_ATTACH =};

  DLL_PROCESS_DETACH:
    begin
      Application.Handle := 0;
      FreeAndNil(dmSelVars);
      g_pSvRec := nil;
    end {= DLL_PROCESS_DETACH =};
  end {= case =};
end {= DLLMain =}; 
```

PS。当您可以使用 Delphi-native（自 1997 年以来）BPL 时，为什么要使用 DLL？它解决了许多问题，并提供了更好的终结支持：

*   对于手动加载的包（通过`LoadPackage(...)`调用），所有单元都被授予完成
*   对于手动加载的包（通过`Project Options / Packages / Link with Runtime packages`list ），所有单元都需要完成，在主机 EXE 的“使用”部分中引用。

聚苯乙烯。启动 MSIE 仅显示一页 - 看起来是不是有点矫枉过正？也许[原生 HTML 支持](http://code.google.com/p/thtmlviewer/)就足够了，即使有所限制？它能够[从 TStream](https://stackoverflow.com/questions/1181756)加载页面或[从不`String`](https://www.google.ru/search?client=opera&q=THTMLViewer%20loadfromstring&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)修改中间临时文件的情况下加载页面。（不过，经过一些脚手架，MSIE 也有能力）。

# google-apps-script - ScriptDB对象大小计算

> ID：15484756
> 
> 赞同：0
> 
> 时间：2013-03-18T19:01:00.183
> 
> 标签：google-apps-script

我正在尝试估计我当前 GAS 项目的限制。我使用 ScriptDB 来分块处理以绕过 6 分钟的执行限制。如果我有一个像

```
var userObj{

   id: //user email address
   count: //integer 1-1000
   trigger: //trigger ID
   label: //string ~30 char or less
   folder: //Google Drive folder ID
   sendto: //'true' or 'false'
   shareto: //'true' or 'false'
} 
```

我将如何计算该对象在数据库中占用的大小？在我达到我们域的 200MB 限制之前，我想预测有多少这些对象可以同时存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:18:02.920

每当您遇到与 API 无关的 google-apps-script 问题时，请先尝试搜索 javascript 问题。在这种情况下，我找到了[JavaScript object size](https://stackoverflow.com/questions/1248302/javascript-object-size)，并在 apps-script 中尝试了接受的答案。（实际上，“改进的”接受的答案。）我根本没有做任何更改，但在这里用测试功能复制了它，所以你可以剪切和粘贴来试用它。

这是我`stud`在调试器中得到的测试对象。![调试器截图](../Images/21da869306dd7b01b0cd1ab197f1ddb3.png)

现在，它并不完美——例如，它没有考虑您将在 ScriptDB 中使用的键的大小。[另一个答案](https://stackoverflow.com/a/6367736/1677912)对此进行了抨击。但是由于您的对象包含一些潜在的巨大值，例如可以是 256 个字符长的电子邮件地址，因此密钥长度可能无关紧要。

```
// https://stackoverflow.com/questions/1248302/javascript-object-size/11900218#11900218
function roughSizeOfObject( object ) {

    var objectList = [];
    var stack = [ object ];
    var bytes = 0;

    while ( stack.length ) {
        var value = stack.pop();

        if ( typeof value === 'boolean' ) {
            bytes += 4;
        }
        else if ( typeof value === 'string' ) {
            bytes += value.length * 2;
        }
        else if ( typeof value === 'number' ) {
            bytes += 8;
        }
        else if
        (
            typeof value === 'object'
            && objectList.indexOf( value ) === -1
        )
        {
            objectList.push( value );

            for( i in value ) {
                stack.push( value[ i ] );
            }
        }
    }
    return bytes;
}

function Marks()
{
  this.maxMarks = 100;
}

function Student()
{
  this.firstName = "firstName";
  this.lastName = "lastName";
  this.marks = new Marks();
}

function test () {
  var stud = new Student();
  var studSize = roughSizeOfObject(stud);
  debugger;
} 
```

# c# - WPF：在 for 循环中更新画布

> ID：15484762
> 
> 赞同：0
> 
> 时间：2013-03-18T19:01:15.907
> 
> 标签：c#, wpf, xaml, canvas

我在 WPF 的 for 循环中更新画布时遇到问题。在我的应用程序中，我有来自很多帧的 Stickfigures 的数据，我想绘制 2 个彼此相邻的不同录音的 Stickfigures。我知道绘图功能有效，但我无法让我的代码不断更新画布。我只能看到最后一帧的简笔画。我知道对于其他帧，正在计算简笔画，但它们没有显示在画布上。

我使用折线函数绘制简笔画。

这是我使用的 for 循环。

```
for (int i = 0; i < recording1.Count; i++)
        {
            skeletCanvas1.Children.Clear();
            skeletCanvas2.Children.Clear();

            skeletCanvas1.Children.Add(drawLine(points1((double[])recording1[i]), brush1));
            skeletCanvas1.Children.Add(drawLine(points2((double[])recording1[i]), brush1));
            skeletCanvas1.Children.Add(drawLine(points3((double[])recording1[i]), brush1));
            skeletCanvas1.Children.Add(drawLine(points4((double[])recording1[i]), brush1));
            skeletCanvas1.Children.Add(drawLine(points5((double[])recording1[i]), brush1));

            skeletCanvas2.Children.Add(drawLine(points1((double[])recording2[i]), brush2));
            skeletCanvas2.Children.Add(drawLine(points2((double[])recording2[i]), brush2));
            skeletCanvas2.Children.Add(drawLine(points3((double[])recording2[i]), brush2));
            skeletCanvas2.Children.Add(drawLine(points4((double[])recording2[i]), brush2));
            skeletCanvas2.Children.Add(drawLine(points5((double[])recording2[i]), brush2));

            skeletCanvas1.UpdateLayout();
            skeletCanvas2.UpdateLayout();

            System.Threading.Thread.Sleep(100);
        } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:48:24.460

您在 GUI 上看不到任何更新，因为您的单线程应用程序正在使用 GUI 线程循环。解决方案可能是使用计时器或辅助线程。

# javascript - highchart 无法添加Series

> ID：15484763
> 
> 赞同：1
> 
> 时间：2013-03-18T19:01:23.467
> 
> 标签：javascript, highcharts

使用 HighChart，我正在尝试添加一个数据系列，但它似乎不起作用。

我收到一个错误。 `"Uncaught TypeError: Cannot call method 'addSeries' of undefined"`

```
<!DOCTYPE HTML> 
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
<script type="text/javascript">
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'target_div'
            },
            series: [{
                name: 'Existing',
                data: [0,0,0]
            }]
        });
    });

    chart.addSeries(
      {
       name: 'Test',
       data: [1,2,3]
      }
    )
</script>
</head>
<body>
  <div id='target_div'>
</body>
</html> 
```

我有什么明显的遗漏吗？

* * *

这行得通！

```
$(chart).ready(function() {
  chart.addSeries(
    {
      name: 'test',
      data: [1,2,3]
    }
  )
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:02:50.403

您必须在`chart.addSeries`里面添加`$(document).ready`.

当它被执行时`chart`不是`Highcharts`.

[**演示**](http://jsfiddle.net/xAYn6/)

# django - 使用相关的 ManyToMany 字段按距离排序

> ID：15484768
> 
> 赞同：8
> 
> 时间：2013-03-18T19:01:47.437
> 
> 标签：django, geodjango, django-orm

我有这两个模型。

```
class Store(models.Model):
    coords = models.PointField(null=True,blank=True)
    objects = models.GeoManager()

class Product(models.Model):
    stores  = models.ManyToManyField(Store, null=True, blank=True)
    objects = models.GeoManager() 
```

我想按到某个点的距离对产品进行排序。如果 Product 中的 stores 字段是外键，我会这样做并且它可以工作。

```
pnt = GEOSGeometry('POINT(5 23)')
Product.objects.distance(pnt, field_name='stores__coords').order_by('distance') 
```

但是由于该字段是 ManyToMany 字段，因此它会中断

```
ValueError: <django.contrib.gis.db.models.fields.PointField: coords> is not in list 
```

我有点预料到这一点，因为不清楚它应该使用哪个商店来计算距离，但有什么办法可以做到这一点。

我需要按到特定点的距离订购的产品列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T22:12:17.130

只是一个想法，也许这对你有用，这应该只需要两个数据库查询（由于预取的工作原理）。不行就不要粗暴判断，我没试过：

```
class Store(models.Model):
    coords = models.PointField(null=True,blank=True)
    objects = models.GeoManager()

class Product(models.Model):
    stores  = models.ManyToManyField(Store, null=True, blank=True, through='ProductStore')
    objects = models.GeoManager()

class ProductStore(models.Model):
    product = models.ForeignKey(Product)
    store = models.ForeignKey(Store)
    objects = models.GeoManager() 
```

然后：

```
pnt = GEOSGeometry('POINT(5 23)')
ps = ProductStore.objects.distance(pnt, field_name='store__coords').order_by('distance').prefetch_related('product')
for p in ps:
    p.product ... # do whatever you need with it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T18:56:43.927

I will take "distance from a product to a point" to be the minimum distance from the point to a store with that product. I will take the output to be a list of (product, distance) for all products sorted by distance ascending. (A comment by someone who placed a bounty indicated they sometimes also want (product,distance,store) sorted by distance then store within product.)

Every model has a corresponding table. The fields of the model are the columns of the table. Every model/table should have a fill-in-the-(named-)blanks statement where its records/rows are the ones that make a true statement.

```
Store(coords,...) // store [store] is at [coords] and ...
Product(product,store,...) // product [product] is stocked by store [store] and ... 
```

Since Product has store(s) as manyToManyField it already is a "ProductStore" table of products and stocking stores and Store already is a "StoreCoord" table of stores and their coordinates.

You can mention any object's fields in a query filter() for a model with a manyToManyField.

The SQL for this is simple:

```
select p.product,distance
    select p.product,distance(s.coord,[pnt]) as distance
    from Store s join Product p
    on s.store=p.store
group by product
having distance=min(distance)
order by distance 
```

It should be straightforward to map this to a [query](https://docs.djangoproject.com/en/1.6/topics/db/queries/). However, I am not familiar enough with Django to give you exact code now.

```
from django.db.models import F

q = Product.objects.all()
    .filter(store__product=F('product'))
    ...
    .annotate(distance=Min('coord.distance([pnt])'))
    ...
    .order_by('distance') 
```

The Min() is an example of [aggregation](https://docs.djangoproject.com/en/dev/topics/db/aggregation/).

You may also be helped by explicitly making a [subquery](https://djangosnippets.org/snippets/236/).

It is also possible to query this by the [raw](https://docs.djangoproject.com/en/1.6/topics/db/sql/) interface. However, the names above are not right for a Django raw query. Eg the table names will by default be APPL_store and APPL_product where APPL is your application name. Also, distance is not your pointField operator. You must give the right distance function. But you should not need to query at the raw level.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:02:06.780

这就是我解决它的方法，但我真的不喜欢这个解决方案。我认为是非常低效的。GeoDjango 应该有更好的方法。所以，在我找到更好的解决方案之前，我可能不会使用它。这就是我所做的。

我在产品模型中添加了一个新方法

```
class Product(models.Model):
    stores  = models.ManyToManyField(Store, null=True, blank=True)
    objects = models.GeoManager()

    def get_closes_store_distance(point):
        sorted_stores =  self.stores.distance(point).order_by('distance')
        if sorted_stores.count() > 0:
            store = sorted_stores[0]
            return store.distance.m
        return 99999999 # If no store, return very high distance 
```

然后我可以这样排序

```
def sort_products(self, obj_list, lat, lng):
    pt = 'POINT(%s %s)' % (lng, lat)
    srtd = sorted(obj_list, key=lambda obj: obj.get_closest_store_distance(pt))
    return srtd 
```

非常欢迎任何更好的解决方案或改进方法。

# php - 如何使用自定义字段让 Twitter 主题标签显示在此代码上？

> ID：15484771
> 
> 赞同：0
> 
> 时间：2013-03-18T19:02:01.833
> 
> 标签：php, wordpress, twitter

我这辈子都想不通。在这个插件中，我想使用带有 Twitter 按钮的自定义主题标签。我只是粘贴一些代码。

我有一个名为 tweethashtag 的自定义字段类型。我希望该自定义字段中的任何内容都可以接收。它需要在 data-hashtag=" " 之间移动。一切正常，但这个。

```
 $arrButtonsCode[] = '<a href="https://twitter.com/share" class="twitter-share-button" data-text="'.$title.'" data-url="'.$permalink.'" data-hashtag="'echo get_post_meta($post->ID, "tweethashtag", true);'"  ' . ((!empty($this->settings['twitterusername'])) ? 'data-via="'.$this->settings['twitterusername'].'" ' : '') . 'rel="nofollow"></a>'; 
```

谢谢！

编辑：

这是正确运行但不回显推文按钮内的自定义字段 tweethashtagpost 的新代码。该帖子确实输入了 tweethashtagpost。

```
 $arrButtonsCode[] = '<a href="https://twitter.com/share" class="twitter-share-button" data-text="'.$title.'" data-url="'.$permalink.'" data-hashtag="'.get_post_meta(get_the_ID, "tweethashtagpost", true).'"  ' . ((!empty($this->settings['twitterusername'])) ? 'data-via="'.$this->settings['twitterusername'].'" ' : '') . 'rel="nofollow"></a>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:05:07.663

您有以下内容：

```
.'" data-hashtag="'echo get_post_meta($post->ID, "tweethashtag", true);' 
```

您需要像这样连接字符串

```
.'" data-hashtag="'.get_post_meta($post->ID, "tweethashtag", true).'
                   ^                                              ^ 
```

另外，请注意`;`and`echo`被取出

# javascript - 如何通过 jQuery 在 datetime-local 上设置日期时间

> ID：15484772
> 
> 赞同：28
> 
> 时间：2013-03-18T19:02:08.377
> 
> 标签：javascript, jquery, html

我的表单上有 datetime-local html 控件，我需要通过 JS 或 jQuery 在其上动态设置日期和时间。我该怎么做？

```
<input type="datetime-local" id="publishDate" required/> 
```

我试过

```
$("#publishDate").val("2013-3-18 13:00");
$("#publishDate").val("2013-3-18T13:00");
$("#publishDate").val(new Date().toLocalString()); 
```

但没有任何效果。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-18T19:07:43.743

这可以解决问题

```
$("#publishDate").val("2013-03-18T13:00"); 
```

您需要为月份使用 2 位数字才能使您的示例正常工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-12T07:00:47.940

如果你想设置**当前日期**，那么你可以试试这个：

```
__Method 1:__

$(document).ready(function(){
    $('input[type=datetime-local]').val(new Date().toJSON().slice(0,19));
});

__Method 2:__

function zeroPadded(val) {
  if (val >= 10)
    return val;
  else
    return '0' + val;
}

$(document).ready(function(){
  d = new Date();
  $('input[type=datetime-local]').val(d.getFullYear()+"-"+zeroPadded(d.getMonth() + 1)+"-"+zeroPadded(d.getDate())+"T"+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds());
}); 
```

***注意：***您可以将 $('input[type=datetime-local]') 替换`Id`or 或`Name`or`Class`。

编辑： d.getMonth() 返回一个介于 0-11 之间的值，因此要输入正确的月份 1 需要添加到结果中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-23T11:57:43.363

关于什么？

```
var now=new Date();
console.log(new Date(now.getTime()-now.getTimezoneOffset()*60000).toISOString().substring(0,19));
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-04T17:05:56.373

我编写了一个[设置当前 UTC 时间的 jQuery 方法](https://gist.github.com/ryanburnette/8803238)。它对于初始化`datetime`和`datetime-local`输入字段很有用。

这是您将如何使用它来初始化字段的方法。

```
$('input[type="datetime"]').setNow(); 
```

或者传递一个参数`true`来只设置没有值的字段。

```
$('input[type="datetime"]').setNow(true); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-07T03:02:25.360

这是使用 momentjs 格式化日期的解决方案。
这将获取当前日期和时间

```
moment().format('YYYY-MM-DDThh:mm:ss.SSS') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-09-06T08:52:18.257

这是一种更简单的方法。

```
const now = (new Date().toLocaleString("sv-SE") + '').replace(' ','T');
console.log(now);
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-31T21:23:28.437

这个组件搞砸了，因为它还没有正确指定。实现也可能很古怪。

正确的做法应该是传递一个日期对象，对于 JS 和 DOM，没有这个是没有意义的。使用字符串操作进行操作将调用 Zalgo。迟早它会与语言环境或时区发生冲突。

我一直在寻找这样的东西，并在 Chrome 46 中发现：

```
$('input[type=datetime-local]').prop('valueAsNumber', Math.floor(new Date() / 60000) * 60000); // 60seconds * 1000milliseconds 
```

如果您不删除秒和毫秒，它们将显示在输入字段中。

还有一个 valueAsDate 属性，但很神秘：

```
Uncaught DOMException: Failed to set the 'valueAsDate' property on 'HTMLInputElement': This input element does not support Date values. 
```

所以他们还没有完成它的实现，或者为该属性选择了一个错误的名称（即使设置了某些内容，它也显示为 null）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-26T11:05:20.207

对于那些在字符串格式中带有“T”字符的日期的人， 用下面的代码
将 10 个字符（空格）替换为 T ：

```
function setCharAt(str,index,chr) {
    if(index > str.length-1) return str;
    return str.substring(0,index) + chr + str.substring(index+1);
}
var variable=setCharAt("2022-02-26 16:32",10,"T");
$("#publishDate").val(variable); 
```

**但请记住，格式必须为“YYYY-MM-DDThh:mm:ss”**
，OP 错误地提供了日期“2013-3-18T13:00”
，而**月份应该是“03”**

# qt - 在 QTextDocument 中插入 pdf 文件，然后打印结果

> ID：15484787
> 
> 赞同：0
> 
> 时间：2013-03-18T19:02:50.580
> 
> 标签：qt, pdf

我想知道以下是否可能。我想写一个报告写作工具。所以这个想法是有人填补空白，在某种简单的文本编辑器中添加信息，他们按下一个按钮就可以了！生成具有适当标题和统一标准的报告。但是，在深入研究之前，我需要解决一个问题。该工具必须允许包含其他 pdf 文件，从我一直在阅读的内容来看，这是不可能的。这是我想要的示例：

一些富文本。

附件一

数据表.pdf

还有一些到达文本。

我想要的是将 datasheet.pdf 插入到最终 pdf 文件中的大约那个点（因此页码等可以保持一致）。这可能吗？如果是这样，有什么想法吗？

感谢您的任何回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:44:15.227

正如 ddriver 所提到的，Qt 不直接支持打开 PDF 文件进行编辑。 [这](http://qt-project.org/wiki/Handling_PDF)是一个有用的链接，它讨论了在 Qt 中处理 PDF 的各种可用选项。

# crystal-reports - 如何在 Crystal Reports 中选择特定的记录/行数据？

> ID：15484789
> 
> 赞同：1
> 
> 时间：2013-03-18T19:02:50.630
> 
> 标签：crystal-reports, crystal-reports-xi

我有我的 sql 数据库视图可用于我的报告，但有时它们会返回多个值，例如我有一个向我显示多年的总积分。

当我单击“浏览数据..”时，它可以让我查看可用的数据位例如：

```
Credits
-------
31
45
460 
```

但我想选择 45（基于客户 ID）......可以这样做吗？

编辑：另一种方法是如果我可以从两个视图链接客户 ID，但前提是它不为空（因为有时信用中没有记录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:06:21.720

为避免无意中从报表结果中“删除”客户的问题，首先在 CONTRACT_VIEW 和年份视图之间进行左外连接，例如 TOTAL_2013。在您的选择公式中，不仅要执行类似`{TOTAL_2013.Customer_ID}=MyCustomerID`的操作，还可以将所有空值添加到其中，因此：`isnull({TOTAL_2013.Customer_ID}) or {TOTAL_2013.Customer_ID}=MyCustomerID`。这将防止在按年视图中没有任何条目的客户从报告中完全删除。

# three.js - 细分网格上的位移

> ID：15484790
> 
> 赞同：0
> 
> 时间：2013-03-18T19:02:54.123
> 
> 标签：three.js, webgl

我试图弄清楚如何使用three.js 显示详细的zbrush 模型，同时将文件大小保持在1MB 以下或左右。

我们能否在细分网格上使用置换+法线贴图？我无法在所有搜索中找到此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:41:45.760

是的，这里有几个例子——</p>

月球演示： [http ://whiteflashwhitehit.com/2011/02/21/a-moon-in-webgl/](http://whiteflashwhitehit.com/2011/02/21/a-moon-in-webgl/)

忍者头演示： [http ://threejs.org/examples/webgl_materials_normalmap.html](http://threejs.org/examples/webgl_materials_normalmap.html)

# jquery-ui - 难以从滑块值设置另一个表单元素的值

> ID：15484791
> 
> 赞同：0
> 
> 时间：2013-03-18T19:03:08.713
> 
> 标签：jquery-ui, uislider

如果另一个元素的值发生变化，我需要设置滑块的值，反之亦然，但是我很难将另一个表单元素的值设置为滑块的值。

当 Select 元素的值更改时，下面的函数会更改 Slider 的值，但我无法让它反向工作。我在这里发布了一个小提琴：http: [//jsfiddle.net/chayacooper/v3gUg/28/](http://jsfiddle.net/chayacooper/v3gUg/28/)

我正在使用[jQuery Slider 插件](http://egorkhmelev.github.com/jslider/)、jquery-1.8.2 和 jquery-ui-1.9.1。

*JS*

```
$(document).ready(function () {
    var select = $("#SliderSelect");
    jQuery("#Slider").slider({
        from: 1,
        to: 5,
        scale: ['Dislike', '', '', '', 'Love'],
        limits: false,
        step: 1,
        dimension: '',
        skin: "classic",
        change: function (evt) {
            $("#SliderSelect")[0].value = $(evt.target).slider("value");
        }
    });
    $("#SliderSelect").change(function () {
        jQuery("#Slider").slider("value", this.selectedIndex + 1);
    });
}); 
```

我也试过用这个语句替换代码并使用文本框而不是选择元素，结果相同

```
$('#text_value').val( $(evt.target).slider("value") ); 
```

*HTML*

```
<div class="layout-slider">
    <div id="Slider" type="slider" name="area" value="3"></div>
</div>  
<select name="SliderSelect" id="SliderSelect">
    <option>1</option>
    <option>2</option>
    <option selected=selected>3</option>
    <option>4</option>
    <option>5</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:19:28.407

根据[您提供的文档](http://egorkhmelev.github.com/jslider/)，您需要使用`onstatechange`. 此外，出于某种原因，滑块需要*两个*值才能工作......

```
$(document).ready(function () {
    var select = $("#SliderSelect");
    jQuery("#Slider").slider({
        from: 1,
        to: 5,
        scale: ['Dislike', '', '', '', 'Love'],
        limits: false,
        step: 1,
        dimension: '',
        skin: "classic",
        onstatechange: function (evt) {
            //evt.target was causing internal error
           // $("#SliderSelect").val($(evt.target).slider("value"));
           $("#SliderSelect").val(evt);
        }
    });
    $("#SliderSelect").change(function () {
        jQuery("#Slider").slider("value", this.selectedIndex + 1, this.selectedIndex + 1);
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/v3gUg/30/](http://jsfiddle.net/dirtyd77/v3gUg/30/)

# ios - 当 iOS 应用程序进入后台时，我们如何调度 Google Analytics 事件？

> ID：15484792
> 
> 赞同：9
> 
> 时间：2013-03-18T19:03:10.797
> 
> 标签：ios, objective-c, google-analytics, grand-central-dispatch, dispatch

我的 iOS 应用程序中有指向 Apple App Store 的链接，我正在尝试将它们作为事件进行跟踪。

问题是我们无法让我的应用程序在进入后台之前正确调度 GA 事件。我们正在使用 iOS SDK v2beta4。

这是我们正在使用的代码的概述。你可以看到我们已经放入了很多我称之为“保险单”的代码，因为我们认为正确的方法是行不通的。但即使是保险单代码也并不总是在我的应用程序进入后台之前调度事件。它仅在大约 50% 的时间内有效，其余时间我必须返回应用程序以获取要调度的事件。

我们认为正确的方法是在“applicationDidEnterBackground”中调度事件，并通过“beginBackgroundTaskWithExpirationHandler”请求 iOS 额外的时间来执行此操作。我们已经在没有我的“保险单”代码的情况下自行尝试了此代码。至少我相信我们正确地注释了每一行保险代码。

注意我们设置了全局变量 UIBackgroundTaskIdentifier bgTask；在带有代码的 AppDelegate.h 头文件中

```
UIBackgroundTaskIdentifier  bgTask; 
```

以下是我们认为正确的代码：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    UIApplication *app = [UIApplication sharedApplication];

    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        [[GAI sharedInstance] dispatch];

        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
} 
```

上面的代码是我们认为应该工作但没有工作的代码。注意：App Store 不是一个普通的应用程序，而是一个应用程序内的网站，如果这会产生影响的话。

作为保险单，我们还做了一些其他事情，大约 50% 的时间会派发事件：

第一个 [[GAI sharedInstance] dispatch] 在设置了跟踪的函数中立即调用

源代码：

```
- (IBAction)goToAppStore:(id)sender
{    
    ...
    // Tracking
    // Using events (pressing on buttons)

    id <GAITracker> tracker = [[GAI sharedInstance] defaultTracker];

    [tracker sendEventWithCategory:@"App Checkout"
                        withAction:@"Checkout Button Pressed"
                        withLabel:nameApp.text
                        withValue:nil];

    [[GAI sharedInstance] dispatch];
    ...
} 
```

我们也把它放在“applicationWillResignActive”中

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    ...  
    [[GAI sharedInstance] dispatch];
} 
```

最后，当您完全关闭应用程序时，会调用另一个 GA 调度

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    [[GAI sharedInstance] dispatch];
} 
```

这些都不是 100% 的。只有大约 50% 的时间。所以我们这样做了：当您重新进入应用程序时（无论是从后台还是应用程序已完全关闭都没有关系），我们发送一个调度

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [[GAI sharedInstance] dispatch];
} 
```

有了最后一点，事件就会被调度，但前提是用户返回到我的应用程序。虽然我不是 100% 确定是这段代码在我返回应用程序时调度事件，还是在我返回应用程序时是 GA 默认调度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:22:41.977

利用`[[GANTracker sharedTracker] dispatchSynchronous:]`

`dispatch`方法将执行异步操作。因此它将立即返回，而无需等待调度操作完成。您的应用程序可能在实际调度操作完成之前被暂停。

- 编辑 -

看起来`dispatchSynchronous:`方法在最新版本的谷歌分析库中消失了。由于`GANTrackerDelegate`也消失了，据我所知，没有办法找出调度操作何时完成。`endBackgroundTask:`因此我建议在预定义的超时后调用方法。它并不完美，但比在 . 之后立即调用它要好`dispatch`。

您的代码应如下所示：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
  [[GAI sharedInstance] dispatch];

  double dispatchTimeout = 10.0;  // 10 seconds timeout
  dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(dispatchTimeout * NSEC_PER_SEC));
  dispatch_after(popTime, dispatch_get_current_queue(), ^(void){
    [app endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T15:54:18.977

由于“dispatch_get_current_queue()”目前在 iOS 6 中已被弃用，您现在可以使用以下代码：

```
UIApplication *app = [UIApplication sharedApplication];
__block UIBackgroundTaskIdentifier bgTask;

bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [[GAI sharedInstance] dispatch];

    double dispatchTimeout = 10.0;  // 10 seconds timeout
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(dispatchTimeout * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-23T08:46:31.497

在 GoogleAnalytics 3.14 中有`dispatchWithCompletionHandler:`我这样使用它：

```
//track any event here as usual and then call:

GAI.sharedInstance().dispatchWithCompletionHandler({ (_) -> Void in
    UIApplication.sharedApplication().openURL(URL)
}) 
```

它似乎工作正常。

# javascript - 尝试制作网页以使其停止调整大小？

> ID：15484798
> 
> 赞同：0
> 
> 时间：2013-03-18T19:03:23.753
> 
> 标签：javascript, html, dreamweaver, webpage

我正在尝试为标题制作一个带有可爱`position: fixed`声明的网页，但是如果您在比我大约 16:9 的屏幕更薄的浏览器中查看它，则突出的徽标会显示在某些文本的顶部。我不知道这个。我很喜欢它，这样网页上就有类似这样的东西，*显然是*假的 Javascript 代码。

```
while(1+1=2)
{

if(theWidthOfTheContainer = tooThin) {
    stopMakingTheContainerThinner;
    justMakeAScrollbarAppear.TheBottom;
    }
else {
    carryOnMakingItThinner
 }
} 
```

有什么命令吗？请不要讨厌代码，我知道它永远不会工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:05:51.413

看一下`min-width`css规则。虽然它可能无法在较旧的浏览器中正常工作，但应该为您提供大多数现代浏览器的覆盖范围。

# c++ - 如何推回向量的向量？

> ID：15484800
> 
> 赞同：12
> 
> 时间：2013-03-18T19:03:30.127
> 
> 标签：c++, vector

我正在接受 20 行输入。我想用空格分隔每行的内容并将其放入向量的向量中。如何制作向量的向量？我很难把它推回去......

我的输入文件：

```
Mary had a little lamb
lalala up the hill
the sun is up 
```

矢量应该看起来像这样。

```
ROW 0: {"Mary","had", "a","little","lamb"}
ROW 1: {"lalala","up","the","hill"} 
```

这是我的代码....

```
string line; 
vector <vector<string> > big;
string buf;
for (int i = 0; i < 20; i++){
    getline(cin, line);
    stringstream ss(line);

    while (ss >> buf){
        (big[i]).push_back(buf);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T19:06:45.567

代码是正确的，但是您的向量中有零个元素，因此您无法访问`big[i]`.

在循环之前设置向量大小，可以在构造函数中或像这样：

```
big.resize(ruleNum); 
```

或者，您可以在每个循环步骤中推送一个空向量：

```
big.push_back( vector<string>() ); 
```

你也不需要括号`big[i]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T19:05:55.633

你可以从一个大小的向量开始`ruleNum`

```
vector <vector<string> > big(ruleNum); 
```

这将包含`ruleNum`空`vector<string>`元素。然后，您可以将元素推回每个元素中，就像您当前在发布的示例中所做的那样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T19:07:54.987

您可以执行以下操作：

```
string line; 
vector <vector<string> > big;  //BTW:In C++11, you can skip the space between > and >

string currStr;
for (int i = 0; i < ruleNum; i++){
    getline(cin, line);
    stringstream ss(line);
    vector<string> buf;
    while (ss >> currStr){
       buf.push_back(buf);
    }
    big.push_back(buf);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-27T08:24:33.723

```
 vector<vector<string> > v; 
```

要将 push_back 转换为向量的向量，我们将 push_back 内部向量中的字符串，并将内部向量 push_back 到外部向量中。

显示其实现的简单代码：

```
vector<vector<string> > v;
vector<string> s;

s.push_back("Stack");
s.push_back("oveflow");`
s.push_back("c++");
// now push_back the entire vector "s" into "v"
v.push_back(s); 
```

# windows - CMD Findstr 与 ping

> ID：15484802
> 
> 赞同：2
> 
> 时间：2013-03-18T19:03:31.753
> 
> 标签：windows, batch-file, cmd, ping, findstr

我正在编写一个 ping 网站的批处理文件，例如：

```
Pinging youtube.com [173.194.70.91] with 32 bytes of data:
Reply from 173.194.70.91: bytes=32 time=187ms TTL=44

Ping statistics for 173.194.70.91:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 187ms, Maximum = 187ms, Average = 187ms 
```

我的程序必须只复制 IP 地址并将其保存到文本文件中。

所以它会ping到一个文本文件

```
ping youtube.com >> file.txt 
```

现在我使用`findstr`命令来查找 IP 地址。如果我使用这个很好：

```
ping youtube.com -n 1 >nul >>C:\Users\Adrian\Desktop\IP.txt
findstr /i "Reply from 173.194.70.93: bytes=32 time=188ms TTL=43 C:\IP.txt

IF %ERRORLEVEL% EQU 0 (
  echo You are winning
) else (
  echo You are losing
)
pause 
```

现在它说我赢了，这是一件好事，但我的程序必须在不知道 IP 地址的情况下找到它。所以`findstr`命令必须知道在此处获取 IP 地址...

```
"Reply from 173.194.70.91: bytes=32 time=187ms TTL=44" 
```

所以它必须`findstr`来自该字符串的IP。但我一直在谷歌搜索，一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:20:08.237

试试这个：

```
@echo off &setlocal 
for /f "tokens=2delims=[]" %%i in ('ping -n 1 youtube.com^|find "["') do set "ip=%%i"
echo.%ip%>>file.txt
endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:57:53.470

如果 PowerShell 是可以接受的，那么您可以尝试：

```
[System.Net.Dns]::GetHostAddresses("youtube.com") | foreach {echo $_.IPAddressToString } 
```

# sql - 从报告中隐藏空值

> ID：15484806
> 
> 赞同：1
> 
> 时间：2013-03-18T19:03:50.767
> 
> 标签：sql

使用此 SP 构建报告。如果报表没有要显示的数据，我们应该只显示 tbl_CompanyProfile，但报表显示来自第二个选择的所有空字段。我关心的是：如何从第二个选择中隐藏空值并仅显示 tbl_CompanyProfile 字段？

```
SELECT Company_Name, Company_Address, Company_ContactNo, Company_Email, 
Company_Website, 'NULL' AS NAME, 'NULL' AS DATE, 0 AS AMOUNT, 
'NULL' AS DEPARTMENT, 0 AS Age, @from AS StartDate, @to AS EndDate
FROM     tbl_CompanyProfile

UNION ALL

SELECT '--' , '--' , '--' , '--' , '--' , tbl_IPD.ipd_pfname + ' ' + tbl_IPD.ipd_plname AS NAME,
CONVERT(VARCHAR, tbl_IPD.ipd_doa, 103) AS DATE, 
ISNULL(SUM(tbl_fee.fee_amount), 0) AS AMOUNT, tblDepartment.DeptName AS DEPARTMENT,
tbl_IPD.ipd_age AS Age, @from AS StartDate, @to AS EndDate
FROM     tbl_fee LEFT OUTER JOIN
tbl_IPD ON tbl_fee.ipd_id = tbl_IPD.ipd_id LEFT OUTER JOIN
tblDepartment ON tbl_IPD.ipd_dpt = tblDepartment.DeptId
WHERE  (tbl_IPD.ipd_doa BETWEEN @from AND @to)
GROUP BY tbl_IPD.ipd_pfname, tbl_IPD.ipd_plname, tbl_IPD.ipd_doa, 
tblDepartment.DeptName, tbl_IPD.ipd_age 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:41:03.903

您将 'NULL' 设置为字符串值。这不是 NULL 值。如果通过删除单引号将“NULL”更改为 NULL，则报告应将值显示为空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:42:11.240

添加：

```
having SUM(tbl_fee.fee_amount) > 0 
```

到您的工会中的第二个选择。

这将使第二个选择不返回行。

# c++ - 在 C++ 中迭代方法的返回值

> ID：15484808
> 
> 赞同：0
> 
> 时间：2013-03-18T19:04:06.700
> 
> 标签：c++

假设我有一个像这样的 Foo 类：

```
class Foo {
public:
    std::vector<Bar> barVec() const {return barVec_;}

private:
    std::vector<Bar> barVec_;
}; 
```

其中 Bar 是其他类。因此，在 Foo 之外，对 barVec_ 的唯一访问是通过方法 barVec()。

如果 myFoo 是 Foo 的一个实例，而 pred 是 Bar 上的一元谓词，是否可以这样做：

```
auto i = find_if(myFoo.barVec().begin(), myFoo.barVec().end(), pred);
if (i != myFoo.barVec().end()) {
    //do some stuff here
} 
```

还是我必须将 myFoo.barVec() 分配给一个变量并遍历该变量？例如：

```
std::vector<Bar> tmp = myFoo.barVec();
auto i = find_if(tmp.begin(), tmp.end, pred);
if (i != tmp.end()) {
    //do some stuff here
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:08:14.400

不，这是不行的，因为您在返回向量时**复制**了向量，因此您正在比较的迭代器引用不同的容器，这是未定义的行为。

您可以只返回一个 ( `const`-) 引用，但重载`begin`和`end`适合您的类更干净，而不是暴露向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:07:52.977

我认为`myBar`应该是`myFoo`并且是类型`Foo`。

您必须先将其分配给`std::vector<Bar>`对象。问题是`myFoo.barVec()`返回存储在里面的向量的副本`myFoo`。`barVec`您的行中的每个调用都`find_if`将返回一个不同的临时`std::vector<Bar>`对象。这两个临时对象的`begin`和`end`迭代器不适用于同一序列。这意味着您有未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:09:23.853

`Foo::barVec()`每次调用它时都会返回一个向量的副本。因此，两次调用返回的迭代器`Foo::barVec().begin()`属于`Foo::barVec().end()`不同的对象。

您可能打算返回一个参考：

```
const std::vector<Bar>& barVec() const {return barVec_;} 
```

但是您应该考虑返回直接从您的类返回`begin()`和`end()`迭代器的提供方法，而不是公开底层向量数据成员。

# c# - 通用存储库拆分上下文之间的 LINQ 表达式

> ID：15484809
> 
> 赞同：2
> 
> 时间：2013-03-18T19:04:06.950
> 
> 标签：c#, .net, entity-framework, repository-pattern, linq-expressions

如果你有两个`DbContext`s，说`EntityOne`属于`DbContextOne`和`EntityTwo`属于`DbContextTwo`。

如何创建一个通用的存储库抽象，在它们各自的上下文中执行`EntityOne`查询和`EntityTwo`查询，将它们水合到内存并协调结果？

有没有我可以用作参考/指南的先前工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T07:45:40.293

> 如何创建一个通用存储库抽象，在它们各自的上下文中执行 EntityOne 查询和 EntityTwo 查询，将它们水合到内存并协调结果？

简单的。不要创建通用存储库。创建一个特定的。只需在构造函数中获取另外两个存储库。

# ios - 在 iOS 中查询 DNS 以查找 NAPTR

> ID：15484813
> 
> 赞同：2
> 
> 时间：2013-03-18T19:04:15.513
> 
> 标签：ios, objective-c, dns

我在寻找一种方法来查询 DNS 以在 iOS 中找到 NAPTR 时遇到了很多麻烦。似乎有许多相对简单的方法可以解析为 IP，但我特别需要在 DNS 查找中找到所有 NAPTR 记录。如果可能的话，我宁愿这样做而不必引入任何外部库。如果有人能够做到这一点（或我可以推断出的类似事情），我将不胜感激任何指针。

所有代码必须在 iOS 5.0+ 中运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:16:48.673

我最终使用了 DNSServiceQueryRecord。

```
 DNSServiceRef sdRef;
            DNSServiceQueryRecord(&sdRef, 0, 0,
                                  "google.com",
                                  kDNSServiceType_NAPTR,
                                  kDNSServiceClass_IN,
                                  callback,
                                  NULL);

            DNSServiceProcessResult(sdRef);
            DNSServiceRefDeallocate(sdRef); 
```

在实际使用中，我发现如果没有结果，应用程序会无限期挂起，因此我最终不得不调整我的代码以在结果上添加超时。

```
/*
 Attempt to fetch the NAPTR from the stored server address.  Since iOS will continue waiting
 until told directly to stop (even if there is no result) we must set our own timeout on the
 request (set to 5 seconds).
 On success, the callback function is called.  On timeout, the kSRVLookupComplete notification
 is sent.
 */
- (void)attemptNAPTRFetch {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        DNSServiceRef sdRef;
        DNSServiceErrorType err;

        err = DNSServiceQueryRecord(&sdRef, 0, 0,
                                       [server cStringUsingEncoding:[NSString defaultCStringEncoding]],
                                       kDNSServiceType_NAPTR,
                                       kDNSServiceClass_IN,
                                       callback,
                                       NULL);

        // This stuff is necessary so we don't hang forever if there are no results
        int dns_sd_fd = DNSServiceRefSockFD(sdRef);
        int nfds = dns_sd_fd + 1;
        fd_set readfds;
        struct timeval tv;
        int result;

        int stopNow = 0;
        int timeOut = 5; // Timeout in seconds

        while (!stopNow) {
           FD_ZERO(&readfds);
           FD_SET(dns_sd_fd, &readfds);
           tv.tv_sec = timeOut;
           tv.tv_usec = 0;

           result = select(nfds, &readfds, (fd_set*)NULL, (fd_set*)NULL, &tv);
           if (result > 0) {
               if(FD_ISSET(dns_sd_fd, &readfds)) {
                   err = DNSServiceProcessResult(sdRef);
                   if (err != kDNSServiceErr_NoError){
                       NSLog(@"There was an error");
                   }
                   stopNow = 1;
               }
           }
           else {
               printf("select() returned %d errno %d %s\n", result, errno, strerror(errno));
               if (errno != EINTR) {
                   stopNow = 1;
                   postNotification(kSRVLookupComplete, nil);
               }
           }
        }

        DNSServiceRefDeallocate(sdRef);
   });
} 
```

然后，对于回调：

```
static void callback(DNSServiceRef sdRef,
          DNSServiceFlags flags,
          uint32_t interfaceIndex,
          DNSServiceErrorType errorCode,
          const char *fullname,
          uint16_t rrtype,
          uint16_t rrclass,
          uint16_t rdlen,
          const void *rdata,
          uint32_t ttl,
          void *context) 
{    
    uint16_t order, pref;
    char flag;
    NSMutableString *service = [[NSMutableString alloc] init];
    NSMutableString *replacement = [[NSMutableString alloc] init];

    const char *data = (const char*)rdata;

    order = data[1];
    pref = data[3];
    flag = data[5];
    int i = 7;
    while (data[i] != 0){
        [service appendString:[NSString stringWithFormat:@"%c", data[i]]];
        i++;
    }
    i += 2;
    while(data[i] != 0){
        if(data[i] >= 32 && data[i] <= 127)
            [replacement appendString:[NSString stringWithFormat:@"%c", data[i]]];
        else
            [replacement appendString:@"."];
        i++;
    }
    NSLog(@"\nOrder: %i\nPreference: %i\nFlag: %c\nService: %@\nReplacement: %@\n", order, pref, flag, service, replacement);
} 
```

这似乎对我有用。您当然会使用回调中的所有已解析数据进行任何其他必要的工作，或者将数据存储在某个地方以供以后使用。

# c# - 如何序列化对象列表

> ID：15484814
> 
> 赞同：1
> 
> 时间：2013-03-18T19:04:19.243
> 
> 标签：c#, xml, serialization

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Windows.Forms;
using System.Xml.Serialization;

namespace AppPrueba
{
    public partial class Form1 : Form
    {
        ArrayList listaFilas = new ArrayList();
        public Form1()
        {
            InitializeComponent();
        }

        List<Empleados> emp = new List<Empleados>();
        List<Agenda> agen = new List<Agenda>();

        static public void SerializeToXML(List<Agenda> agen)
        {
            XmlSerializer serializer = new XmlSerializer(typeof(List<Agenda>));
            TextWriter textWriter = new StreamWriter(@"C:\agenda.xml");
            serializer.Serialize(textWriter, agen);
            textWriter.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            openFileDialog1.ShowDialog(this);
            string strfilename = openFileDialog1.FileName;

            txtPath.Text = strfilename;

            if ((strfilename.Trim().Length > 0) && (File.Exists(strfilename)))
            {
                string[] readText = File.ReadAllLines(strfilename);

                if (strfilename.EndsWith("Agenda.txt"))
                {
                    lstLinesBeforeChange.Items.Clear();
                    foreach (string s in readText)
                    {
                        lstLinesBeforeChange.Items.Add(s);
                    }
                }
                else
                {
                    lstLinesBeforeChange.Items.Clear();
                    foreach (string s in readText)
                    {
                        lstLinesBeforeChange.Items.Add(s);
                    }
                }
            }
        }

        private void btnModify_Click(object sender, EventArgs e)
        {
            string strfilename = txtPath.Text;

            string[] readText = File.ReadAllLines(strfilename);

            if (strfilename.EndsWith("Agenda.txt"))
            {
                lstLinesAfterChange.Items.Clear();

                foreach (string s in readText)
                {
                    int nroEmp = Convert.ToInt32(s.Substring(0, 4));
                    string nombre = s.Substring(4, 15);
                    string telef = s.Substring(19, 10);
                    string ciudad = s.Substring(29);

                    Agenda unAgenda = new Agenda();

                    unAgenda.NroEmp = nroEmp;
                    unAgenda.Nombre = nombre.TrimStart().TrimEnd();
                    unAgenda.Telefono = telef;
                    unAgenda.Localidad = ciudad;

                    agen.Add(unAgenda);

                    agen.Sort(delegate(Agenda a1, Agenda a2)
                    {
                        return a1.NroEmp.CompareTo(a2.NroEmp);
                    });
                }

                foreach (Agenda a in agen)
                {
                    string agenOrd = a.NroEmp.ToString() + "\t" + a.Nombre + "\t" + a.Telefono + "\t" + a.Localidad;

                    lstLinesAfterChange.Items.Add(agenOrd);
                }
            }
            else
            {
                lstLinesAfterChange.Items.Clear();
                foreach (string s in readText)
                {
                    string[] sSinBarra = s.Split('|');

                    int nroEmp = Convert.ToInt32(sSinBarra[0]);
                    string nombre = sSinBarra[1];
                    string posicion = sSinBarra[2];
                    int nroOficina = Convert.ToInt32(sSinBarra[3]);
                    int piso = Convert.ToInt32(sSinBarra[4]);
                    string fechaIng = sSinBarra[5];

                    int dia = Convert.ToInt32(fechaIng.Substring(0, 2));
                    int mes = Convert.ToInt32(fechaIng.Substring(2, 2));
                    int año = Convert.ToInt32(fechaIng.Substring(4, 4));
                    string fechaIngreso = dia + "/" + mes + "/" + año;
                    fechaIng = fechaIngreso;

                    Empleados unEmpleado = new Empleados();

                    unEmpleado.NroEmpleado1 = nroEmp;
                    unEmpleado.Nombre1 = nombre.TrimEnd().TrimStart();
                    unEmpleado.Posicion = posicion.TrimEnd().TrimStart();
                    unEmpleado.NroOficina = nroOficina;
                    unEmpleado.Piso = piso;
                    unEmpleado.FechaIngreso = fechaIngreso;

                    emp.Add(unEmpleado);

                    emp.Sort(delegate(Empleados e1, Empleados e2)
                    {
                        return e1.NroEmpleado1.CompareTo(e2.NroEmpleado1);
                    });
                }

                foreach (Empleados em in emp)
                {
                    string empOrd = em.NroEmpleado1.ToString() + "\t" + em.Nombre1 + "\t" + em.Posicion + "\t" + em.NroOficina.ToString()
                        + "\t" + em.Piso.ToString() + "\t" + em.FechaIngreso;

                    lstLinesAfterChange.Items.Add(empOrd);
                }
            }
        }

        private void btnSave_Click(object sender, EventArgs e)
        {
            //SaveFileDialog saveFileDialog1 = new SaveFileDialog();
            //saveFileDialog1.ShowDialog();

            //if (saveFileDialog1.FileName != "")
            //{
            //    FileStream fs = (FileStream)saveFileDialog1.OpenFile();

            //    fs.Close();

            //}
            SerializeToXML(agen);

        }
    }
} 
```

我有这个，我想将两个列表都序列化为 xml：

```
List<Empleados> emp = new List<Empleados>();
List<Agenda> agen = new List<Agenda>(); 
```

我使用了在其他教程中找到的 SerializeToXML 方法，但是当我运行它时出现错误

> “错误 1 ​​可访问性不一致：参数类型 'System.Collections.Generic.List' 的可访问性低于方法 'AppPrueba.Form1.SerializeToXML(System.Collections.Generic.List)' C:\Users\722825\Desktop\Santi Cosas\ AppPrueba\AppPrueba\Form1.cs 27 28 AppPrueba"

如果您能帮助我，请提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:09:42.443

您尝试序列化为 xml 的所有类都应该是公共的。对于集合序列化，您不能使用泛型 - 要么使用无类型集合，如 ArrayList ，要么创建非泛型后代类形式 List 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:10:32.980

`agen`是私有的并且`SerializeToXML`是公共静态的。你需要`agen`公开

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:10:40.977

您的错误表明变量 List agen = new List(); 需要像这样公开： public List agen = new List();

# ruby-on-rails - 为什么这个 Ruby Squeel (PostgreSQL) 调用返回 nil，而它显然不是？

> ID：15484816
> 
> 赞同：0
> 
> 时间：2013-03-18T19:04:25.407
> 
> 标签：ruby-on-rails, ruby, postgresql, squeel

我有一个搜索页面，允许用户根据 GPA 和运动统计数据等标准搜索运动员。当只使用一个搜索过滤器时，PostgreSQL 会返回正确的答案。当使用多个搜索过滤器时，只有在两个搜索过滤器中使用相同的统计数据时，它才会起作用。例如，如果我搜索“GPA > 3”和“GPA == 4”，它将返回相应的运动员。如果我执行“GPA > 3”和“ACT > 20”（在同一运动员身上两者都为真），它不会返回任何内容（空数组）。

作为整个页面的参考，这里是 @conditions 的样子（它在代码中被转换为一个数组而不是一个哈希，因此循环可以迭代，但你明白了要点）：

```
{
"0"=>{"category"=>"1", "stat_type_id"=>"22", "predicate"=>"Greater Than", 
"q"=>"2", "type"=>"stat"}, 

"1"=>{"category"=>"1", "stat_type_id"=>"2", 
"predicate"=>"Greater Than", "q"=>"10", "type"=>"stat"}
} 
```

下面是代码（Squeel 语法）：

```
def query
  relation = Athlete.listed.for_sport( self.sport )

  return relation if @conditions.blank?

  @conditions = @conditions.map { |k, v| v } if @conditions.is_a?(Hash)

  debugger

  @conditions.each do |condition|
    case condition[:type]
    when "stat"
      if !condition[:q].eql?("")
        relation = case condition[:predicate]
        when /less than/i
          relation.joins{stats}.where{(stats.stat_type_id.eq condition[:stat_type_id]) & (stats.value.lt (StatType.where(:id => condition[:stat_type_id]).first.display_as_decimal == true ? condition[:q].to_f.to_s : condition[:q].to_i.to_s))}
        when /greater than/i
          relation.joins{stats}.where{(stats.stat_type_id.eq condition[:stat_type_id]) & (stats.value.gt (StatType.where(:id => condition[:stat_type_id]).first.display_as_decimal == true ? condition[:q].to_f.to_s : condition[:q].to_i.to_s))}
        when /equal to/i
          relation.joins{stats}.where{(stats.stat_type_id.eq condition[:stat_type_id]) & (stats.value.eq (StatType.where(:id => condition[:stat_type_id]).first.display_as_decimal == true ? condition[:q].to_f.to_s : condition[:q].to_i.to_s))}
        when /not equal to/i
          relation.joins{stats}.where{(stats.stat_type_id.eq condition[:stat_type_id]) & (stats.value.not_eq (StatType.where(:id => condition[:stat_type_id]).first.display_as_decimal == true ? condition[:q].to_f.to_s : condition[:q].to_i.to_s))}
        end
      end
    when "academic"
      relation
    when "social"
      relation
    end
  end

  relation
end 
```

我在下面包含了两个从 ruby​​-debug 获取的 PostgreSQL 调用（我正在使用 Squeel，一个 PostgreSQL 的 Ruby 包装器）。如果您在两个调用中向下滚动，您会看到第一个和第二个调用是相同的，但第二个调用有一个额外的 AND（并且遵循与第一个相同的格式，应该可以正常工作）。

调用 1（一个参数）：

```
SELECT "users"."id"                                  AS t0_r0,
       "users"."name"                                AS t0_r1,
       "users"."first_name"                          AS t0_r2,
       "users"."last_name"                           AS t0_r3,
       "users"."facebook_id"                         AS t0_r4,
       "users"."access_token"                        AS t0_r5,
       "users"."birthday"                            AS t0_r6,
       "users"."gender"                              AS t0_r7,
       "users"."device_token"                        AS t0_r8,
       "users"."current_city"                        AS t0_r9,
       "users"."hometown"                            AS t0_r10,
       "users"."relationship_status"                 AS t0_r11,
       "users"."avatar_file_name"                    AS t0_r12,
       "users"."avatar_content_type"                 AS t0_r13,
       "users"."avatar_file_size"                    AS t0_r14,
       "users"."avatar_updated_at"                   AS t0_r15,
       "users"."email"                               AS t0_r16,
       "users"."encrypted_password"                  AS t0_r17,
       "users"."reset_password_token"                AS t0_r18,
       "users"."reset_password_sent_at"              AS t0_r19,
       "users"."remember_created_at"                 AS t0_r20,
       "users"."sign_in_count"                       AS t0_r21,
       "users"."current_sign_in_at"                  AS t0_r22,
       "users"."last_sign_in_at"                     AS t0_r23,
       "users"."current_sign_in_ip"                  AS t0_r24,
       "users"."last_sign_in_ip"                     AS t0_r25,
       "users"."authentication_token"                AS t0_r26,
       "users"."created_at"                          AS t0_r27,
       "users"."updated_at"                          AS t0_r28,
       "users"."time_zone"                           AS t0_r29,
       "users"."username"                            AS t0_r30,
       "users"."middle_name"                         AS t0_r31,
       "users"."primary_sport_id"                    AS t0_r32,
       "users"."state"                               AS t0_r33,
       "users"."high_school"                         AS t0_r34,
       "users"."phone"                               AS t0_r35,
       "users"."user_type_id"                        AS t0_r36,
       "users"."agreed_to_terms_and_conditions"      AS t0_r37,
       "users"."agreed_to_information_integrity"     AS t0_r38,
       "users"."agreed_to_content_responsibility"    AS t0_r39,
       "users"."account_type_id"                     AS t0_r40,
       "users"."social_score"                        AS t0_r41,
       "users"."recruit_year"                        AS t0_r42,
       "users"."college_major"                       AS t0_r43,
       "users"."secondary_sport_id"                  AS t0_r44,
       "users"."handedness"                          AS t0_r45,
       "users"."checkdin_id"                         AS t0_r46,
       "users"."allow_twitter_sync"                  AS t0_r47,
       "users"."allow_facebook_sync"                 AS t0_r48,
       "users"."head_coach"                          AS t0_r49,
       "users"."head_coach_email"                    AS t0_r50,
       "users"."has_recruited_others"                AS t0_r51,
       "users"."customer_id"                         AS t0_r52,
       "users"."last_4_digits"                       AS t0_r53,
       "users"."removed_from_listing"                AS t0_r54,
       "users"."slug"                                AS t0_r55,
       "users"."college_minor"                       AS t0_r56,
       "users"."type"                                AS t0_r57,
       "users"."billing_expiration_month"            AS t0_r58,
       "users"."billing_expiration_year"             AS t0_r59,
       "users"."billing_name"                        AS t0_r60,
       "users"."billing_address"                     AS t0_r61,
       "users"."billing_city"                        AS t0_r62,
       "users"."billing_state"                       AS t0_r63,
       "users"."billing_zip"                         AS t0_r64,
       "users"."college_id"                          AS t0_r65,
       "users"."agreed_to_age_requirements"          AS t0_r66,
       "users"."primary_sport_primary_position_id"   AS t0_r67,
       "users"."secondary_sport_primary_position_id" AS t0_r68,
       "users"."recruit_status_id"                   AS t0_r69,
       "users"."active_flag"                         AS t0_r70,
       "users"."public"                              AS t0_r71,
       "invitations"."id"                            AS t1_r0,
       "invitations"."sender_id"                     AS t1_r1,
       "invitations"."role_id"                       AS t1_r2,
       "invitations"."to"                            AS t1_r3,
       "invitations"."accepted_at"                   AS t1_r4,
       "invitations"."token"                         AS t1_r5,
       "invitations"."created_at"                    AS t1_r6,
       "invitations"."updated_at"                    AS t1_r7,
       "invitations"."current_state"                 AS t1_r8,
       "invitations"."requester_id"                  AS t1_r9,
       "invitations"."user_type"                     AS t1_r10,
       "invitations"."type"                          AS t1_r11
FROM   "users"
       INNER JOIN "stats"
               ON "stats"."athlete_id" = "users"."id"
       LEFT OUTER JOIN "invitations"
                    ON "invitations"."requester_id" = "users"."id"
WHERE  "users"."removed_from_listing" = 'f'
       AND "users"."type" IN ( 'Athlete' )
       AND (( "invitations"."current_state" IN ( 'accepted' )
               OR "invitations"."current_state" IS NULL ))
       AND ( users.primary_sport_id = 13
              OR users.secondary_sport_id = 13 )
       AND (( "stats"."stat_type_id" = 22
              AND "stats"."value" > '2.0' )) 
```

结果是一名运动员。

调用 2（两个参数）：

然而，第二个调用返回 []，但应该是同一个运动员......

```
SELECT "users"."id"                                  AS t0_r0,
       "users"."name"                                AS t0_r1,
       "users"."first_name"                          AS t0_r2,
       "users"."last_name"                           AS t0_r3,
       "users"."facebook_id"                         AS t0_r4,
       "users"."access_token"                        AS t0_r5,
       "users"."birthday"                            AS t0_r6,
       "users"."gender"                              AS t0_r7,
       "users"."device_token"                        AS t0_r8,
       "users"."current_city"                        AS t0_r9,
       "users"."hometown"                            AS t0_r10,
       "users"."relationship_status"                 AS t0_r11,
       "users"."avatar_file_name"                    AS t0_r12,
       "users"."avatar_content_type"                 AS t0_r13,
       "users"."avatar_file_size"                    AS t0_r14,
       "users"."avatar_updated_at"                   AS t0_r15,
       "users"."email"                               AS t0_r16,
       "users"."encrypted_password"                  AS t0_r17,
       "users"."reset_password_token"                AS t0_r18,
       "users"."reset_password_sent_at"              AS t0_r19,
       "users"."remember_created_at"                 AS t0_r20,
       "users"."sign_in_count"                       AS t0_r21,
       "users"."current_sign_in_at"                  AS t0_r22,
       "users"."last_sign_in_at"                     AS t0_r23,
       "users"."current_sign_in_ip"                  AS t0_r24,
       "users"."last_sign_in_ip"                     AS t0_r25,
       "users"."authentication_token"                AS t0_r26,
       "users"."created_at"                          AS t0_r27,
       "users"."updated_at"                          AS t0_r28,
       "users"."time_zone"                           AS t0_r29,
       "users"."username"                            AS t0_r30,
       "users"."middle_name"                         AS t0_r31,
       "users"."primary_sport_id"                    AS t0_r32,
       "users"."state"                               AS t0_r33,
       "users"."high_school"                         AS t0_r34,
       "users"."phone"                               AS t0_r35,
       "users"."user_type_id"                        AS t0_r36,
       "users"."agreed_to_terms_and_conditions"      AS t0_r37,
       "users"."agreed_to_information_integrity"     AS t0_r38,
       "users"."agreed_to_content_responsibility"    AS t0_r39,
       "users"."account_type_id"                     AS t0_r40,
       "users"."social_score"                        AS t0_r41,
       "users"."recruit_year"                        AS t0_r42,
       "users"."college_major"                       AS t0_r43,
       "users"."secondary_sport_id"                  AS t0_r44,
       "users"."handedness"                          AS t0_r45,
       "users"."checkdin_id"                         AS t0_r46,
       "users"."allow_twitter_sync"                  AS t0_r47,
       "users"."allow_facebook_sync"                 AS t0_r48,
       "users"."head_coach"                          AS t0_r49,
       "users"."head_coach_email"                    AS t0_r50,
       "users"."has_recruited_others"                AS t0_r51,
       "users"."customer_id"                         AS t0_r52,
       "users"."last_4_digits"                       AS t0_r53,
       "users"."removed_from_listing"                AS t0_r54,
       "users"."slug"                                AS t0_r55,
       "users"."college_minor"                       AS t0_r56,
       "users"."type"                                AS t0_r57,
       "users"."billing_expiration_month"            AS t0_r58,
       "users"."billing_expiration_year"             AS t0_r59,
       "users"."billing_name"                        AS t0_r60,
       "users"."billing_address"                     AS t0_r61,
       "users"."billing_city"                        AS t0_r62,
       "users"."billing_state"                       AS t0_r63,
       "users"."billing_zip"                         AS t0_r64,
       "users"."college_id"                          AS t0_r65,
       "users"."agreed_to_age_requirements"          AS t0_r66,
       "users"."primary_sport_primary_position_id"   AS t0_r67,
       "users"."secondary_sport_primary_position_id" AS t0_r68,
       "users"."recruit_status_id"                   AS t0_r69,
       "users"."active_flag"                         AS t0_r70,
       "users"."public"                              AS t0_r71,
       "invitations"."id"                            AS t1_r0,
       "invitations"."sender_id"                     AS t1_r1,
       "invitations"."role_id"                       AS t1_r2,
       "invitations"."to"                            AS t1_r3,
       "invitations"."accepted_at"                   AS t1_r4,
       "invitations"."token"                         AS t1_r5,
       "invitations"."created_at"                    AS t1_r6,
       "invitations"."updated_at"                    AS t1_r7,
       "invitations"."current_state"                 AS t1_r8,
       "invitations"."requester_id"                  AS t1_r9,
       "invitations"."user_type"                     AS t1_r10,
       "invitations"."type"                          AS t1_r11
FROM   "users"
       INNER JOIN "stats"
               ON "stats"."athlete_id" = "users"."id"
       LEFT OUTER JOIN "invitations"
                    ON "invitations"."requester_id" = "users"."id"
WHERE  "users"."removed_from_listing" = 'f'
       AND "users"."type" IN ( 'Athlete' )
       AND (( "invitations"."current_state" IN ( 'accepted' )
               OR "invitations"."current_state" IS NULL ))
       AND ( users.primary_sport_id = 13
              OR users.secondary_sport_id = 13 )
       AND (( "stats"."stat_type_id" = 22
              AND "stats"."value" > '2.0' ))
       AND (( "stats"."stat_type_id" = 2
              AND "stats"."value" > '10' )) 
```

知道为什么这不起作用吗？糊涂！

:::::UPDATE::::: 通过执行以下操作修复它，它仍然非常快：

```
def query
athletes = Athlete.listed.for_sport( self.sport )
relation = athletes

return relation if @conditions.blank?

@conditions = @conditions.map { |k, v| v } if @conditions.is_a?(Hash)

@conditions.each do |condition|
  case condition[:type]
  when "stat"
    if !condition[:q].eql?("")
      relation = case condition[:predicate]
      when /less than/i
        athletes.joins{stats}.where{(stats.stat_type_id.eq condition[:stat_type_id]) & (stats.value.lt (StatType.where(:id => condition[:stat_type_id]).first.display_as_decimal == true ? condition[:q].to_f.to_s : condition[:q].to_i.to_s))}
      when /greater than/i
        athletes.joins{stats}.where{(stats.stat_type_id.eq condition[:stat_type_id]) & (stats.value.gt (StatType.where(:id => condition[:stat_type_id]).first.display_as_decimal == true ? condition[:q].to_f.to_s : condition[:q].to_i.to_s))}
      when /equal to/i
        athletes.joins{stats}.where{(stats.stat_type_id.eq condition[:stat_type_id]) & (stats.value.eq (StatType.where(:id => condition[:stat_type_id]).first.display_as_decimal == true ? condition[:q].to_f.to_s : condition[:q].to_i.to_s))}
      when /not equal to/i
        athletes.joins{stats}.where{(stats.stat_type_id.eq condition[:stat_type_id]) & (stats.value.not_eq (StatType.where(:id => condition[:stat_type_id]).first.display_as_decimal == true ? condition[:q].to_f.to_s : condition[:q].to_i.to_s))}
      end
    end
  when "academic"
    relation
  when "social"
    relation
  end
end

relation
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:47:51.450

您的第二个查询有一个 WHERE 子句，其结尾如下：

```
 AND (( "stats"."stat_type_id" = 22
              AND "stats"."value" > '2.0' ))
 AND (( "stats"."stat_type_id" = 2
              AND "stats"."value" > '10' )) 
```

`stat_type_id`不能同时等于 2 和 22。您需要第二次加入统计表，例如：

```
INNER JOIN "stats"
               ON "stats"."athlete_id" = "users"."id"
INNER JOIN "stats" AS s2
               ON "s2"."athlete_id" = "users"."id"
(...)
AND (( "stats"."stat_type_id" = 22
              AND "stats"."value" > '2.0' ))
AND (( "s2"."stat_type_id" = 2
              AND "s2"."value" > '10' )) 
```

如果您不想动态连接，则替代方法是子查询，例如：

```
SELECT athlete_id
 FROM stats
 WHERE
 ( "stats"."stat_type_id" = 22
              AND "stats"."value" > '2.0' )
OR ( "s2"."stat_type_id" = 2
              AND "s2"."value" > '10' )
GROUP BY athlete_id
HAVING COUNT(*)=<the number of parameters you want to filter by> 
```

这将返回所有符合条件的运动员，以便将其与您的其余表格一起加入。

# php - PHP - 从采用 XML 字符串的 URL 返回

> ID：15484817
> 
> 赞同：0
> 
> 时间：2013-03-18T19:04:26.293
> 
> 标签：php

我有一个接受 XML 参数并返回 XML 结果的 URI。当我在浏览器中单独运行它时，效果非常好。

我需要将此脚本用作 AJAX 查询的一部分，因此我希望从 URL 中获取结果，然后将其回显到 AJAX 调用中。我试过使用 fopen，但我没有得到结果。

有没有一种简单的方法可以做到这一点？我已经看到使用代理的参考，但找不到如何使用 php 执行此操作的示例。

```
$street = $_GET['street'];
$city = $_GET['city'];
$state = $_GET['state'];
$zip = $_GET['zip'];

$url = 'http://eligibility.cert.sc.egov.usda.gov/eligibility/eligibilityservice?eligibilityType=Property&requestString=';
$url_query = '%3C?xml%20version=%221.0%22?%3E%3CEligibility%20xmlns:xsi=%22http://www.w3.org/2001/XMLSchema-instance%22%20xsi:noNamespaceSchemaLocation=%22/var/lib/tomcat5/webapps/eligibility/Eligibilitywsdl.xsd%22%3E%3CPropertyRequest%20StreetAddress1=%22'.$street.'%20street%22%20StreetAddress2=%22%22%20StreetAddress3=%22%22%20City=%22'.$city.'%22%20State=%22'.$state.'%22%20County=%22%22%20Zip=%22'.$zip.'%22%20Program=%22RBS%22%3E%3C/PropertyRequest%3E%3C/Eligibility%3E';
$url_final = $url.''.$url_query;

$return = fopen($url_final);
echo $return; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:06:11.027

使用 cURL 检索外部网站数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:08:52.013

您可以使用 PHP 的[readfile](http://www.php.net/manual/en/function.readfile.php)函数。但是，它要求设置[allow_url_fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)。

# c# - 控制台应用程序错误“索引（从零开始）必须大于或等于零且小于参数列表的大小”

> ID：15484823
> 
> 赞同：2
> 
> 时间：2013-03-18T19:04:36.420
> 
> 标签：c#

静态虚空主要在这里

```
 string[] dayNames = { "Sun", "Mon", "Tues", "Wed", "Thur", "Fri", "Sat" };

        string m = "";

        double average = 0;
        double total = 0;

        int[] bCalories = new int[7];
        int[] lCalories = new int[7];
        int[] dCalories = new int[7];

        int[] dayTotal = new int[7];

        for (int i = 0; i < 7; i++)
        {
            Console.Write("Please enter calories for {0} breakfast: ", dayNames[i]);
            bCalories[i] = int.Parse(Console.ReadLine());
            Console.Write("Please enter calories for {0} lunch: ", dayNames[i]);
            lCalories[i] = int.Parse(Console.ReadLine());
            Console.Write("Please enter calories for {0} dinner: ", dayNames[i]);
            dCalories[i] = int.Parse(Console.ReadLine());

            dayTotal[i] += bCalories[i];
            dayTotal[i] += lCalories[i];
            dayTotal[i] += dCalories[i];

            total += dayTotal[i];
            Console.WriteLine();
        }
        average = total /7;
        Console.Clear();
        Console.WriteLine("Day\t\tBreakfast\tLunch\tDinner\tDay Total");
        for (int i = 0; i < 7; i++)
        {
            if (dayTotal[i] > average)
            {
                 m = "*** Above Average";
            }
            else if(dayTotal[i] <= average)
                 m = ""; 
```

在我将字符串 m 添加到下面的写入行之后，我只收到错误索引（从零开始）必须大于或等于零并且小于参数列表的大小。如果我没有字符串 m语句结束，然后程序运行正常，只有当我添加它时，我才得到一个错误

```
 Console.Write("{0}\t\t{1}\t\t{2}\t{3}\t{4}\t{5}\n", dayNames[i],
         bCalories[i], lCalories[i], dCalories[i], dayTotal[i] + m);
        }

        Console.Write("Average daily calories: {0}", average);
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:05:45.590

问题在这里：

```
 Console.Write("{0}\t\t{1}\t\t{2}\t{3}\t{4}\t{5}\n", dayNames[i],
     bCalories[i], lCalories[i], dCalories[i], dayTotal[i] + m); 
```

您有 6 个说明符 (0 - 5)，但只有 5 个参数被传入。如果您将其更改为仅包含`{4}`，它应该可以正常工作：

```
 Console.WriteLine("{0}\t\t{1}\t\t{2}\t{3}\t{4}", dayNames[i],
     bCalories[i], lCalories[i], dCalories[i], dayTotal[i] + m); 
```

我还建议使用`Console.WriteLine`而不是`Console.Write`使用`\n`. 这表明您打算添加一行，这反过来又使代码更易于阅读和维护。

# python - Python 是否有任何异步非网络 I/O 框架？

> ID：15484830
> 
> 赞同：3
> 
> 时间：2013-03-18T19:05:08.680
> 
> 标签：python, asynchronous

很多时候，异步 I/O 与网络或基于文件的 I/O 同义（例如 Twisted、Eventlet、asyncore ...）。

但是，我目前正在编写一个 Python 工具包来控制电机。这在大多数情况下应该是异步的，以便可以同时控制多个电机。现在，一切都基于线程，但根本问题是如此根本，以至于我认为必须有一个异步框架来帮助解决这个问题。你知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:25:03.867

不需要 3rd 方框架。使用标准库中的[asyncore 。](http://docs.python.org/2/library/asyncore.html)

# php - 使用亚马逊 API 获取所有商家针对特定产品的所有优惠

> ID：15484833
> 
> 赞同：1
> 
> 时间：2013-03-18T19:05:11.023
> 
> 标签：php, amazon-web-services

我需要能够使用亚马逊 API 获取产品的所有报价列表。这是我发送的请求：

```
http://webservices.amazon.com/onca/xml?Service=AWSECommerceService&Operation=ItemLookup&SubscriptionId=&AssociateTag=&Version=2011-08-01&ItemId=B007IJQDQQ&IdType=ASIN&ResponseGroup=Offers&Condition=All&MerchantId=All 
```

这将返回以下优惠：

```
<Offers>
<TotalOffers>1</TotalOffers>
<TotalOfferPages>1</TotalOfferPages>
<MoreOffersUrl>
http://www.amazon.com/gp/offer-listing/B007IJQDQQ%3FSubscriptionId%3DAKIAJTZ6VROOTPJAPPWQ%26tag%3Damazoautom-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB007IJQDQQ
</MoreOffersUrl>
<Offer>
<OfferAttributes>
<Condition>New</Condition>
</OfferAttributes>
<OfferListing>
<OfferListingId>
TR5sygI0VR7cwy3Hg0DBHwgCWFnkqXLyCR70jjMhy1h8gWlEisKYt5cqDbS2Fu1SEqDtfBILdxYDziJdFzfsqMpPJkBqcYV3DFovHx1nXWRy9wHS6CFZXknBvsCo1bxYS%2BsxAeYrZHrS6g6aakEJQA%3D%3D
</OfferListingId>
<Price>
<Amount>375</Amount>
<CurrencyCode>USD</CurrencyCode>
<FormattedPrice>$3.75</FormattedPrice>
</Price>
<AmountSaved>
<PercentageSaved>56</PercentageSaved>
<Availability>Usually ships in 1-2 business days</Availability>
<AvailabilityAttributes>
<IsEligibleForSuperSaverShipping>0</IsEligibleForSuperSaverShipping>
</OfferListing>
</Offer>
</Offers> 
```

如您所见，即使它说有 3 个新报价，它也只返回 1 个报价。有谁知道获得所有报价而不仅仅是最低报价的方法？Merchant ID='ALL' 不会这样做，其他任何响应组（如 offerFull、offerSummary 或 offer）也不会这样做。

任何帮助将不胜感激

# java - Java 树图 即使键存在也返回 null

> ID：15484834
> 
> 赞同：1
> 
> 时间：2013-03-18T19:05:26.033
> 
> 标签：java

我有一个用一个外部方法扩展 TreeMap 的类。外部方法“open”假设从给定文件中读取以下格式“word:meaning”的行并将其添加到 TreeMap - put(“word”, “meaning”)。

所以我用 RandomAccessFile 读取文件并将键值放在 TreeMap 中，当我打印 TreeMap 时，我可以看到正确的键和值，例如：

```
{AAAA=BBBB, CAB=yahoo!} 
```

但是由于某种原因，当我得到（“AAAA”）时，我得到了空值。

它发生的任何原因以及如何解决它？

这是代码

```
public class InMemoryDictionary extends TreeMap<String, String> implements
    PersistentDictionary {
private static final long serialVersionUID = 1L; // (because we're extending
                                                    // a serializable class)
private File dictFile;

public InMemoryDictionary(File dictFile) {
    super();
    this.dictFile = dictFile;
}

@Override
public void open() throws IOException {     
    clear();
    RandomAccessFile file = new RandomAccessFile(dictFile, "rw");
    file.seek(0);
    String line;
    while (null != (line = file.readLine())) {
        int firstColon = line.indexOf(":");
        put(line.substring(0, firstColon - 1),
                line.substring(firstColon + 1, line.length() - 1));
    }       
    file.close();
}

@Override
public void close() throws IOException {    
    dictFile.delete();
    RandomAccessFile file = new RandomAccessFile(dictFile, "rw");       
    file.seek(0);
    for (Map.Entry<String, String> entry : entrySet()) {            
        file.writeChars(entry.getKey() + ":" + entry.getValue() + "\n");
    }
    file.close();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:27:37.087

您问题的先前版本中的“问号”*很重要*。它们表明您认为您看到的字符串实际上不是您正在使用的字符串。RandomAccessFile 是读取文本文件的糟糕选择。您可能正在阅读一个文本编码*不是*单字节的文本文件（也许是 utf-16）？由于 RandomAccessFile 进行“ascii”字符转换，因此生成的字符串被错误编码。这导致您的`get()`通话失败。

首先，找出文件的字符编码并使用适当配置的 InputStreamReader 打开它。

其次，扩展 TreeMap 是一个非常糟糕的设计。在这里使用聚合，而不是扩展。

# asp.net - 如何吞下asp.net linkbutton控件的回发？

> ID：15484839
> 
> 赞同：1
> 
> 时间：2013-03-18T19:05:47.277
> 
> 标签：asp.net, html

我有一个包含一个元素的表单的页面。我有一个 Jscript 函数正在处理客户端的单击事件，但是，每当我单击 LinkBut​​ton 时，页面仍在重新加载，这可以避免吗？

aspx

```
<body>
<form>
<asp:LinkButton runat="server" ID="thing" OnClientClick="return SomeFunction()" Text="Some Operation" />
</form>
</body> 
```

脚本

```
function SomeFunction() {
    document.getElementById('someText').innerText = 'SomeMessage';
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:43:50.533

```
SomeButton.Attributes.Add("onclick", "javascript:SomeFunction(); return false;"); 
```

**更新**：由于您更新的代码在 ASPX 页面中分配了功能，您可以使用此方法 -

```
<asp:LinkButton runat="server" ID="thing" 
   OnClientClick="javascript:SomeFunction(); return false;" 
   Text="Some Operation" /> 
```

或者

```
<asp:LinkButton runat="server" ID="thing" 
   OnClientClick="return SomeFunction()" Text="Some Operation" />

function SomeFunction() {
    document.getElementById('someText').innerText = 'SomeMessage';
    return false; /**** Required *****/
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:56:39.340

要使其`return false;`正常工作，您必须`return`在方法名称之前添加。

前任。`<asp:LinkButtun ID="IDHere" runat="server" OnClientClick="return SomeFunction()" />`

# c++ - 未读取 C++ 输入

> ID：15484841
> 
> 赞同：0
> 
> 时间：2013-03-18T19:05:54.313
> 
> 标签：c++, input, cin

我刚开始使用 c++（来自 java），我正在尝试做一些基本的练习。这个想法是要求输入 5 以外的任何输入，如果用户输入 5，则显示一条消息，如果用户输入 5 次以外的任何内容十次，则显示另一条消息。这是代码：

```
void notFive () {
    int count = 0;
    while (count < 10) {
        int input = 0;
        cout << "Enter any number other than 5." << endl;
        cin >> input;
        if (input == 5)
            break;
        count++;
    }
    if (count == 10)
        cout<<"You are more patient than I am, you win.";
    else
        cout << "You weren't supposed to enter 5!";
}   
} 
```

我的问题是这段代码所做的只是打印出“输入除 5 以外的任何数字”。10次​​，然后说“你比我更有耐心，你赢了。” 有什么想法有什么问题吗？

如果你们想要我所有的代码（以确保我不只是一个白痴），那就是：

```
#include <iostream>
#include <stdio.h>
using namespace std;

class Hello {

public:
    void notFive () {
        int count = 0;
        while (count < 10) {
        int input = 0;
        cout << "Enter any number other than 5." << endl;
        if ( ! (cin >> input) ) {
            cout << "std::cin is in a bad state!  Aborting!" << endl;
            return;
}
        if (input == 5)
            break;
        count++;
        }
        if (count == 10)
            cout<<"You are more patient than I am, you win.";
        else
            cout << "You weren't supposed to enter 5!";
    }   
}hello;

int main() {
    Hello h;
    h.notFive();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:14:28.703

当我更改`notFive`为`main`. 您的问题必须在此代码之外（可能是因为`cin`处于损坏状态，正如其他人所建议的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:16:21.660

更改此行：

```
cin >> input 
```

对此：

```
if ( ! (cin >> input) ) {
    cout << "std::cin is in a bad state!  Aborting!" << endl;
    return;
} 
```

您描述的行为是如果在运行此代码*之前*发生了*坏事*会发生什么。`cin`

 ***编辑：**

将相同的代码添加到之前的使用中，`cin`以找出它进入错误状态的位置。

发生这种情况的一个例子是，如果代码试图读取一个`int`，并且用户输入了一个字母。

也可以调用`cin.clear();`恢复工作状态`cin`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:11:35.440

以下是我的评论：

1.  `fflush(stdin)`无效。`stdin`不能冲洗。此外，这可能与输入不同`cin`。
2.  您需要检查`cin.fail`after `cin >> input`。如果我输入一个字母，你的输入语句将失败。*

# java - 将 SOAP 标头与在调用的 webservice 方法中传递的实际数据绑定

> ID：15484846
> 
> 赞同：0
> 
> 时间：2013-03-18T19:06:01.723
> 
> 标签：java, webservice-client, soapheader

我需要使用他们的网络服务在 monster.com 上发布工作。我已经使用`wsimport`. 我正在调用`updateJob`接受`<Job>`类型对象的方法。客户端文件具有用于 SOAP 标头的专用类，我在其中设置所需的用户名和密码。但我不知道如何`Header`在我的请求中绑定这个对象，因为我调用的方法只接受`<job>`类型对象。

构成肥皂标题的专用对象正在填充如下

```
 MonsterHeader monsterHeader=new MonsterHeader();
    MessageDataType MessageDataType=new MessageDataType();
    MessageDataType.setMessageId("Company Jobs created on 06/09/2004 02:41:44 PM");
    MessageDataType.setTimestamp("2004-06-09T14:41:44Z");
    monsterHeader.setMessageData(MessageDataType);

    Security security=new Security();
    UsernameTokenType UsernameTokenType=new UsernameTokenType();
    UsernameTokenType.setUsername("testxftp");
    PasswordType PasswordType=new PasswordType();
    PasswordType.setValue("ftp12345");
    UsernameTokenType.setPassword(PasswordType); 
```

被调用的方法是`businessGatewayInterface.updateJob(job);`

另外，请提供一些简单的方法来查看我的传出 SOAP 请求。

# python - 在出队之前对队列元素具有随机读\写访问权限的消息队列（rabbitmq 或）

> ID：15484850
> 
> 赞同：0
> 
> 时间：2013-03-18T19:06:16.083
> 
> 标签：python, rabbitmq, amqp

我通过 amqplib 在 Python 中使用 rabbitmq。如果可能的话，我尝试将 AMQP 用于不只是队列的东西 - 按 ID 搜索消息，在出队之前修改它们，在出队之前从队列中删除。这些东西用于存储/更新平衡器的真实用户队列，并且可以通过更改真实用户的状态来异步更新该队列（例如，用户已死 - 他的 AMQP 消息必须被删除，或者用户更改了它的状态 -并且每个这样的更改都必须反映在用户的 AMQP 队列中，在适当的用户的 AMQP 消息中），并且在消息真正出队之前发生。我的问题如下：

1.  有没有办法通过 amqplib 修改某个 queueN 中的 AMQP 消息正文，然后再将其 dequed ，通过其标头中的某个 ID 搜索它？我的意思是 - 我想在接收者发送消息之前修改消息正文。

2.  有没有办法让工作人员通过 amqplib 从 queueN 中准确弹出 5 条（任意数量）最后一条消息？

3.  我可以在队列N 出队之前从队列N 中异步删除消息，并且它的邻居会将它放在队列N 中吗？

4.  来自 queueN 的消息 ID1 的方式是获取它的真实当前队列位置，从 queueN 的开头算起？AMQP 是否为任何消息存储/更新它的真实队列位置？

    提前致谢。

更新：根据 rabbitmq 文档，随机访问 AMQP 队列中的消息存在问题。请在 Python 中建议另一个正确的队列决策，它支持快速异步访问其元素-通过消息的正文搜索消息，更新/删除队列消息并获取任何队列消息的快速队列索引。我们尝试了使用 user_info 的 deque + 附加 dict，但在这种情况下，我们需要在每次更新时锁定这个 deque+dict，以避免竞争条件。主要目的 - 为负载均衡器的队列提供服务，并在计算队列中的更改时摆脱阻塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:37:44.707

您所描述的听起来像是一个非常典型的中间件管道。虽然这实现了在将消息传递给预期的消费者之前修改消息的相同效果，但它不能通过访问队列来工作。

基本思想是所有消息首先进入一个特殊的队列，在那里它们被传递到中间件。然后中间件根据它刚刚收到的消息组成一条新消息，并将其发布到预期接收者的队列

# javascript - 检测具有类名 x 的最后一个 div 并向其添加一个新类 y

> ID：15484856
> 
> 赞同：1
> 
> 时间：2013-03-18T19:06:31.590
> 
> 标签：javascript, jquery, html, css

我想知道，这是确定最后一个 div 并向其添加新类的最佳方法。它是javascript还是css3？

所以这是我的例子。假设我有这个：

```
<div class="items">
   <div class="raw">item 1</div>
   <div class="raw">item 2</div>
   <div class="raw">item 3</div>
   <div class="raw">item 4</div>
   <div class="raw">item 5</div>
   <div class="raw">item 6</div>
</div> 
```

如何？什么方法？我可以在类名“raw”的最后一个 div 中添加一个新的类名“new”吗？

这样它就会变成：

```
<div class="raw new">item 6</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:08:09.493

只是：

```
$('div.raw:last').addClass('new'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T19:09:49.870

你可以通过纯CSS去：

```
div.raw:last-child {
    /* styles for the last element here */
} 
```

或者，如果您需要在子集中更具体

```
div.raw:last-of-type {
    /* styles for the last element here */
} 
```

以防万一，新*类*（*-name*）不是强制性的。

两个伪选择器都与最新的 W3C 浏览器兼容。IE从9开始。如果你急需支持IE7+我推荐这个小库：[https ://code.google.com/p/ie7-js/](https://code.google.com/p/ie7-js/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:07:53.010

在 jQuery 中很简单：

```
$(".items > .raw:last").addClass("new"); 
```

在纯 JavaScript 中`querySelector`：

```
document.querySelector(".items > .raw:last-child").className += " new"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T19:08:30.793

```
$('div.raw:last').addClass('new'); 
```

# php - MySQL网站审查系统

> ID：15484857
> 
> 赞同：3
> 
> 时间：2013-03-18T19:06:34.230
> 
> 标签：php, mysql

我需要有关使用以下两个表设置的审查系统的查询的帮助。

```
评论
--------
id 日期 user_id item_id 评分评论
1 02-2012 40 456 3 “我喜欢”
2 03-2012 22 342 1 “我不喜欢”
3 04-2012 45 548 0 “我讨厌它”

```

```
评论_拇指
--------------
review_id user_id 喜欢
1 22 1
1 45 -1
2 40 -1
3 22 1

```

存在“reviews_thumbs”表以跟踪评论的赞成票和反对票，以便可以按质量对评论进行评级。在“喜欢”列中，1 是赞成票，-1 是反对票。（`rating`reviews 表中的列是星系统，不相关。）

加载评论时，我需要以我知道以下详细信息的方式加入 reviews_thumbs 表（对于每个单独的评论，因为它们被返回）：

```
1\. 点赞总数
2\. 反对票总数
3\. 当前活跃用户是否对评论投了赞成票或反对票

```

我已经使用以下查询完成了此操作，但我并不适合：

```
选择“评论”。*，
COUNT(upVoteTable.`user_id`) 作为 upVotes，
COUNT(downVoteTable.`user_id`) 作为 downVotes，
COUNT(userUpTable.`user_id`) 作为用户，
COUNT(userDownTable.`user_id`) as userDown

来自“评论”

LEFT JOIN `reviews_thumbs` 作为 upVoteTable
在 upVoteTable.`review_id` = `reviews`.`id`
AND upVoteTable.`like` = 1

LEFT JOIN `reviews_thumbs` 作为 downVoteTable
ON downVoteTable.`review_id` = `reviews`.`id`
AND downVoteTable.`like` = -1

LEFT JOIN `reviews_thumbs` 作为 userUpTable
ON userUpTable.`review_id` = `reviews`.`id`
AND userUpTable.`like` = 1
AND userUpTable.`user_id` = :userid

LEFT JOIN `reviews_thumbs` 作为 userDownTable
ON userDownTable.`review_id` = `reviews`.`id`
AND userDownTable.`like` = -1
AND userDownTable.`user_id` = :userid

WHERE `item_id`=:itemid

GROUP BY `reviews`.`id`

ORDER BY `date` DESC

```

（并绑定适当的 :userid 和 :itemid。）

所以这个查询完美地工作并完成了我所需要的。但这是一个很大的加入，我几乎肯定肯定有更好的方法来做到这一点，但我似乎无法弄清楚任何事情。

有人可以为我指出如何以更清洁的方式完成此任务的正确方向吗？

**我试过的：**

我试过做一个 GROUP_CONCAT，列出一个包含所有用户 id 和喜欢的字符串，然后运行一个正则表达式来查找用户的 id 以查看他们是否对评论进行了投票，但这也感觉非常不干净。

预先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:33:14.787

您可以修改 reviews_thumbs 看起来更像这样：

```
reviews_thumbs
--------------
review_id   user_id upvote downvote
1           22      1      0
1           45      0      1
2           40      0      1
3           22      1      0 
```

这将有效地存储重复的信息，但是当你有一个好的目的时没关系。您确实有两件事想知道，这可以让您快速总结 2 列（并快速减去这些结果），以获得您正在寻找的内容。这可以减少您对 reviews_thumbs 表的 2 次查询，一次查询总数，一次查询用户特定操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:45:43.450

不确定这是否会提高您的查询性能，但您可以尝试在子选择中进行计数

```
SELECT `reviews`.*,
(SELECT count(*) FROM reviews_thumbs t WHERE t.review_id =reviews.id AND t.like = 1) AS upVotes
...
FROM reviews
... 
```

# jquery - 一个链接全部展开/全部折叠 jQuery 只工作一次

> ID：15484859
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:06:37.373
> 
> 标签：jquery, hide, toggle, show, expand

我在每个阶段 div 中有几个隐藏的 div，称为 Steps。我正在尝试通过单击一个按钮打开所有 div 或折叠所有步骤 div。

我的意图是，`Expand View - all steps`按钮应该只打开该阶段内的所有 div。它工作一次，但在停止工作后。

我设置了一个小提琴：http: [//jsfiddle.net/BuJz8/](http://jsfiddle.net/BuJz8/)

jQuery

```
jQuery(".phaseContent").hide();
jQuery(".stepsContent").hide();
//toggle the componenet with phase level
jQuery(".phaseHeading .heading1").click(function () {
    $(this).toggleClass("active");
    var th = jQuery(this).parent();
    jQuery(th).next(".phaseContent").slideToggle(500);
    return false;
});
jQuery(".stepsHeading .heading1").click(function () {
    $(this).toggleClass("active");
    var th = jQuery(this).parent();
    jQuery(th).next(".stepsContent").slideToggle(500);
    return false;
});

//Expand and collapse toggle

$(".accordion-expand-all").click(function () {
    var contentAreas = $(this).parentsUntil(".phaseContent").find(".stepsContent");
    var expandLink = $(this);
    $(contentAreas).show();
    $(expandLink).text('Collapse - all steps');
    $(this).parentsUntil(".phaseContent").find(".stepsHeading .heading1").toggleClass("active");
    if ($(contentAreas).is(":visible")) {
        $(expandLink).click(function () {
            $(contentAreas).hide();
            $(this).text('Expand - all steps');
        });
    }
    return false;
}); 
```

HTML

```
 <!-- Start Phase -->
    <div class="phaseBack">
       <!-- Start phase heading -->
       <div class="phaseHeading">
          <span class="heading1"> Phase 1 </span>
          <span class="headingSteps"></span> 
          <span class = "headingstepsdate" > < /span>
          </span > 
       </div>
       <!-- Start phase content -->
       <div class="phaseContent">
          <div class="hr"></div>
          <div class="phaseSummary"> 
             <div class="comment more">Lorem ipsum dolor sit amet, consectetur adipiscing elit.Vestibulum laoreet, nunc eget laor < /div>
             <!--Expand steps button-->
             <div class="expander">
                <p class="accordion-expand-holder">
                   <a class="accordion-expand-all" id="st1" href="#">Expand View - all steps</a > < /p>
             </div>
             <!-- Start steps -->
             <div class="stepsBack" >
                <!-- Start steps heading -->
                <div class="stepsHeading"> 
                   <span class="heading1"> Steps 1 - Candidate type– Solicited by TM < /span>
                   <span class="middleheader">Completed on
                      <span class="makebold">01/02 / 13 < /span>
                   </span >
                   <span class="stepsRight"> 
                </div>                                    
                <!-- Start steps content -->
                <div class="stepsContent">
                   <div class="hr"></div > 
                   <div class="stepsSummary" > 
                      <div class="comment more"> Lorem ipsum dolor sit amet, consectetur adipiscing elit.Vestibulum laoreet, nunc eget laoreet sagittis, quam ligula sodales orci, congue impe < /div>
                </div>
                <div class="stepsBody"> 
                   <div class="hr" > </div>
                   <div class="stepsBodyLeft">
                      <h2>References</h2 >

                   </div>
                </div >
             </div>
          </div >
          <!-- Start step 2  -->
          <div class ="stepsBack" id = "aa" >
             <div class = "stepsHeading" > 
                <span class = "heading1" > Steps 2 research < /span>
                <span class="middleheader">Completed on 
                   <span class="makebold"> 01/02 / 13 < /span>
                </span > 
                < span class = "stepsRight" > < /span>
             </div > 
          < div class = "stepsContent" > 
             < div class = "hr" > < /div>
             <div class="stepsSummary">
                <div class="comment more">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum laoreet, nunc eget laoreet sagittis.</div >
             < /div>
             <div class="stepsBody">
                <div class="hr"></div >
             < div class = "stepsBodyLeft" > 
                < h2 > References < /h2>
             </div >
          < /div>
       </div >
    < /div>
 </div >
< /div>
</div >
    <!-- Start Phase -->
    < div class = "phaseBack" >
       <!-- Start phase heading -->
       < div class = "phaseHeading" >
          < span class = "heading1" > Phase 2 < /span>
          <span class="headingSteps"></span >
          < span class = "headingstepsdate" >
             < span class = "makebold" > < /span>
          </span >
       < /div>
       <!-- Start phase content -->
          <div class="phaseContent">
             <div class="hr"></div >
             < div class = "phaseSummary" >
                < div class = "comment more" > Lorem ipsum dolor sit amet, consectetur adipiscing elit.Vestibulum lao. < /div>
                <!--Expand steps button-->
                <div class="expander">
                   <p class="accordion-expand-holder">
                      <a class="accordion-expand-all" id="st1" href="#">Expand View - all steps</a > 
                   < /p>
                </div >
               <!-- Start steps -->
               < div class = "stepsBack" >
                  <!-- Start steps heading -->
                  < div class = "stepsHeading" >
                     < span class = "heading1" > Steps 1 - Candidate type < /span>
                     <span class="middleheader">Completed on 
                        <span class="makebold">01/02 / 13 < /span>
                     </span > 
                     < span class = "stepsRight" > < /span>
                  </div >
                  <!-- Start steps content -->
                  < div class = "stepsContent" >
                     < div class = "hr" > < /div>
                     <div class="stepsSummary">
                     <div class="comment more">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum laoreet, nunc eget laoreet sagittis, quam ligula soda.</div > 
                  < /div>
                  <div class="stepsBody">
                     <div class="hr"></div > 
                     < div class = "stepsBodyLeft" > 
                        < h2 > References < /h2>
                     </div > 
                     < div class = "stepsBodyRight" >< /div>
                  </div > 
               < /div>
            </div >
            <!-- Start step 2  -->
            < div class = "stepsBack" id = "aa" > 
               < div class = "stepsHeading" > 
                  < span class = "heading1" > Steps 2 - MIRA research < /span>
                  <span class="middleheader">Completed on 
                     <span class="makebold"> 01/02 / 13 < /span>
                  </span > 
                  < span class = "stepsRight" > < /span>
               </div > 
               < div class = "stepsContent" > 
                  < div class = "hr" > < /div>
                  <div class="stepsSummary">
                     <div class="comment more">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum laoreet, nunc eget laoreet sagittis.</div > 
                  < /div>
                  <div class="stepsBody">
                     <div class="hr"></div > 
                     < div class = "stepsBodyLeft" > 
                        < h2 > References < /h2>
                     </div > 
                     < div class = "stepsBodyRight" > < /div>
                  </div > 
               < /div>
            </div > 
         < /div>
      </div >
   < /div> 
```

任何帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:21:21.087

我无法理解你的逻辑。所以我稍微修改了一下。

```
//Expand and collapse toggle

$(".accordion-expand-all").click(function () {

    var contentAreas = $(this).parentsUntil(".phaseContent").find(".stepsContent");

    var expandLink = $(this);

    if (contentAreas.is(':visible')) {
        contentAreas.hide();
        expandLink.text('Expand View - all steps');
    } else {
        contentAreas.toggleClass("active").show();
        expandLink.text('Collapse - all steps');
    }

    return false;

}); 
```

尝试这个。我让它在你更新的 jsfiddle 中工作：http: [//jsfiddle.net/BuJz8/1/](http://jsfiddle.net/BuJz8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:21:55.647

该问题是由您`click`在项目上绑定多个处理程序引起的`expandLink`。当您绑定多个处理程序时，它们都会触发。

您可以通过对代码进行一些更改来实现您的目标：

```
$(".accordion-expand-all").click(function () {
    var expandLink = $(this);
    var contentAreas = $(expandLink).closest(".phaseContent").find(".stepsContent");

    // Toggle the content area visibility
    $(contentAreas).toggle();

    // If the content area is now visible
    if ($(contentAreas).is(':visible')) {
        // Change it to the collapse text
        $(expandLink).text('Collapse - all steps');
    } else {
        // Change it to the expand text
        $(expandLink).text('Expand - all steps');
    }

    $(expandLink).closest(".phaseContent").find(".stepsHeading .heading1").toggleClass("active");

    return false;
}); 
```

**[演示](http://jsfiddle.net/UDRK6/2/)**

**注意：**如果您只想选择最近的单个父级，您可能想要使用[`.closest()`](http://api.jquery.com/closest/)而不是。[`.parentsUntil()`](http://api.jquery.com/parentsUntil/)后者选择直到但不包括选择器匹配的元素的所有祖先。

# perl - 抓取 URL 并将其用于 LWP Perl

> ID：15484865
> 
> 赞同：0
> 
> 时间：2013-03-18T19:07:02.687
> 
> 标签：perl, scrape

好的，所以我知道如何在循环中使用 Perl 发出 LWP 获取请求。但我想知道是否有可能从网站上抓取一个网址并自动将其放入网址中以循环访问？

```
#!usr/bin/perl

for ($i=0;$i<200;$i++)
{

use strict;
 use LWP::UserAgent;
use warnings;
 my $ua = new LWP::UserAgent(agent => 'USER AGENT');
 my $response = $ua->get("http://example.com");
 print $response->code,' ', $response->message,"\n";

sleep 2;

} 
```

所以现在我想从域中抓取一个 url 并将其用于 example.com，并且它会抓取每次访问一个新的 url。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:08:26.817

> 我想知道是否有可能从网站上抓取一个网址并自动将其放入网址中以循环访问？

是的！这称为队列，它可以使用`push`和轻松实现`shift`。

```
 my @to_visit = ( ...initial URLs... );
 while (@to_visit) {
     my $url = shift(@to_visit);
     my $content = ...Download the file...;
     my @extracted = ...Extract the URLs...;
     push @to_visit, @extracted;
 } 
```

当然，您可能想跳过您已经访问过的 URL。

```
 my %seen;
 my @to_visit = grep !$seen{$_}++, ( ...initial URLs... );
 while (@to_visit) {
     my $url = shift(@to_visit);
     my $content = ...Download the file...;
     my @extracted = ...Extract the URLs...;
     push @to_visit, grep !$seen{$_}++, @extracted;
 } 
```

# c# - 拉伸制表符以填充空间

> ID：15484875
> 
> 赞同：0
> 
> 时间：2013-03-18T19:07:37.877
> 
> 标签：c#, tabs, infragistics

如何配置[UltraTabControl](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/html/Infragistics2.Win.UltraWinTabControl.v12.1~Infragistics.Win.UltraWinTabControl.UltraTabControl_members.html)以确保 Tab Header 填充可用空间？

我有以下代码生成以下表单：

```
namespace StretchThoseTabs
{
    using Infragistics.Win.UltraWinTabControl;

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            this.ultraTabControl2.Tabs.AddRange(new UltraTab[]
            {
                new UltraTab(false) {Text = "General"},
                new UltraTab(false) {Text = "Advanced Options"}
            });
        }
    }
} 
```

![Windows 窗体示例](../Images/708386907b989b21c4036674c7f43efc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:13:11.800

使用该`TabLayoutStyle`物业。

您可以将其设置为各种选项，例如所需的选项可能是：

```
tabCtrl1.TabLayoutStyle = TabLayoutStyle.SingleRowSizeToFit; 
```

# xml - 如何搜索和替换 10,000 个 XML 文件的 XML 标记和条目

> ID：15484876
> 
> 赞同：0
> 
> 时间：2013-03-18T19:07:41.777
> 
> 标签：xml, windows, macos, xml-parsing

我需要为 10,000 多个文件更新 XML。

我是一名新手程序员，所以如果可能的话，我更愿意使用可以开箱即用的东西（现有解决方案？）。如果没有，我不害怕学习和尝试新事物。我正在大学学习一门课程（编程逻辑）来弄湿我的脚，但这当然不会提供立竿见影的效果。

所有文件都在它们自己的基于序列号的目录中。每个文件名为 83_XYZETC.xml

这些 XML 文件中的每一个都有两个标签/内容，需要搜索并删除所有实例。

例子：

```
<mediaFile>
content 123
</mediaFile>

<image>
image info 123
</image> 
```

然后我还需要在另一个标签中重新插入不同的标签/内容。例子：

```
 <track>
Need to insert>>  <action>UPDATE</action>
                  extra stuff etc 
                  more stuff
                  even more
                  </track> 
```

最后，我需要在标签中输入一串文本，但在最后。
例子：

```
<right type="labelDownload">Y</right>
</track> 
```

我会很感激任何建议。首选 Windows 平台。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:33:08.923

XSLT 允许您以与英语描述非常相似的形式表达您的转换规则。

你从一个模板规则开始，它说“默认情况下，当你点击一个元素时，复制它并处理它的子元素”：

```
<xsl:template match="*">
  <xsl:copy>
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template> 
```

您需要有关“删除此元素”的 mediaFile 和图像元素的规则（即，当您遇到它时，不输出任何内容）：

```
<xsl:template match="mediaFile | image"/> 
```

对于 track 元素，如果我理解正确的话，您想在开头和结尾添加一些标准内容：

```
<xsl:template match="track">
  <xsl:copy>
    <action>UPDATE</action>
    <xsl:apply-templates/>
    <right type="labelDownload">Y</right>
  </xsl:copy>
</xsl:template> 
```

这就是样式表的全部内容，除了样板 xsl:stylesheet 元素将其全部包装起来。

然后您需要将其应用于您的 10000 个输入文档。您可以使用 ant 执行此操作，但其他人会使用 shell 脚本执行此操作，或者还有 David Lee 的 xmlsh，它是一种特殊的类似 shell 的 XML 处理脚本语言，或者您可以更进取并使用 XProc。或者您可以编写一个小的 Java 应用程序。这真的取决于你最喜欢什么。但是，如果您不想再学习另一种语言，您也可以在 XSLT 2.0 中完成，尽管它有点依赖于处理器。使用 Saxon，您可以添加模板规则：

```
<xsl:template name="main">
  <xsl:for-each select="collection('.?select=*.xml')">
    <xsl:result-document href="{tokenize(document-uri(.), '/')[last()]">
      <xsl:apply-templates/>
    </xsl:result-document>
  </xsl:for-each>
</xsl:template> 
```

然后，在安装了 Saxon 之后，您只需在当前目录是包含 XML 文件的目录下运行它：

```
java net.sf.saxon.Transform -xsl:stylesheet.xsl -it:main -o:../output/result.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:04:30.217

你也看过 XProc 吗？

# ios - CLLocationManager，委托没有被调用

> ID：15484877
> 
> 赞同：0
> 
> 时间：2013-03-18T19:07:42.170
> 
> 标签：ios, objective-c, ios6

我对objective-c很陌生，但我正在尝试尽可能多地学习。

我需要在静态类中调用 CLLocationManager。我一直在谷歌搜索，但我不明白如何设置委托。因为这是一个静态类，我假设我需要创建一个新类并通过它。

**静态类：**

```
PositionManager *positionManage = [[PositionManager alloc] init];

CLLocationManager *locationManager = [[CLLocationManager alloc] init];
[locationManager setDelegate:positionManage];
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
locationManager.distanceFilter = kCLDistanceFilterNone;
[locationManager startUpdatingLocation]; 
```

**位置管理器.h**

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>

@interface PositionManager : NSObject <CLLocationManagerDelegate> {
    CLLocationManager *locationManager;
}

@property (strong, retain) CLLocationManager *locationManager;

@end 
```

**位置管理器.m**

```
#import "PositionManager.h"

@implementation PositionManager

@synthesize locationManager;

- (id)init {
    self = [super init];
    NSLog(@"hei?");

    return self;
}

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations {
    // Never gets called...
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:10:26.147

问题似乎是您调用的 PositionManager 实例`positionManage`开始存在 ( `alloc-init`)，然后又重新不存在，因为您没有在任何地方保留它。

（实际上，查看您的代码，您调用的 CLLocationManager 似乎也是如此`locationManager`。您实例化它但您不保留它，因此它会立即消失在一阵烟雾中。）

因此，它可能会帮助您在“玩耍”之前停下来并了解内存管理在 Objective-C 中是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:15:23.547

在您的 PositionManager 类中，您有字段 locationManager，但我没有看到您为其分配实际实例。这可能会导致 ARC 破坏您的 CLLocationManager 实例，因为没有对象对其具有强引用。

尝试添加这个：

```
positionManage.locationManager = locationManager; 
```

# windows-7 - 如何添加到 Windows 7 开始菜单 MRU

> ID：15484890
> 
> 赞同：1
> 
> 时间：2013-03-18T18:43:53.683
> 
> 标签：windows-7

Windows 7 开始菜单有一个类似于 MRU 的逐项界面。

我如何编码我的程序以使用它？我不知道该怎么称呼它，所以我不知道要搜索什么。

![Windows 7 开始菜单截图](../Images/5e2da8c69076b94d6c66459526e3071a.png)

例子：

```
 Outlook    >> 
   My Program >>  Task 1
                  Task 2
                  Task 3
                  etc
   VS 2012    >> 
```

如何以编程方式将“任务 1”添加到我的条目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:19:15.650

我不喜欢没有答案的问题，所以我会重复正确的评论作为答案。

正如@Karan 提到的，带圆圈的列表称为跳转列表。

正如@Raymond Chen 提到的，[将任务栏上下文菜单添加到win7 应用程序](https://stackoverflow.com/questions/3156378/adding-taskbar-context-menu-to-win7-application)回答了这个问题。

# css - 在 IE 中将同级元素向下推的文本

> ID：15484892
> 
> 赞同：1
> 
> 时间：2013-03-18T19:08:23.007
> 
> 标签：css, internet-explorer

我正在编写一个脚本，该脚本将用散布在各处的肖像和标语圈来填充一个区域。除了在 Internet Explorer 中，我已经设法将元素整齐地并排放置。我使用的是 IE9，所以理论上它应该可以工作，但不能。

我已经尝试了我能想到的一切，但似乎没有任何效果。我希望这里的某个人在如何击败 IE 上有比我更好的主意。

JSFiddle 演示在这里：http: [//jsfiddle.net/TnUxt/](http://jsfiddle.net/TnUxt/)

HTML 代码：

```
<div class='wrapper'>
<ul>
<div class='row'>
    <li class='dataLi'>
        <a href='' class='fancybox'>
            <div class='overlay'>
                <div class='circle' style="background:url(http://bit.ly/Z9CY5A) no-repeat;background-size: cover"></div>
            </div>
        </a>
    </li>
    <li class='dataLi'>
        <a href=''>
            <div class='circle slogan'>test</div>
        </a>
    </li>
    <li class='dataLi'>
        <a href='' class='fancybox'>
            <div class='overlay'>
                <div class='circle' style="background:url(http://bit.ly/ULb3ux) no-repeat;background-size: cover"></div>
            </div>
        </a>
    </li>
</div>

<div class='row'>
    <li class='dataLi'>
        <a href='' class='fancybox'>
            <div class='overlay'>
                <div class='circle' style="background:url(http://bit.ly/XVpxN5) no-repeat;background-size: cover"></div>
            </div>
        </a>
    </li>
    <li class='dataLi'>
        <a href=''>
            <div class='circle slogan'>test</div>
        </a>
    </li>
    <li class='dataLi'>
        <a href='' class='fancybox'>
            <div class='overlay'>
                <div class='circle' style="background:url(http://bit.ly/15Wl5gM) no-repeat;background-size: cover"></div>
            </div>
        </a>
    </li>
</div>
</ul> 
```

CSS 代码：

```
.wrapper {
width: 700px;
height: 1000px;
margin: 0 auto;
border: 1px solid black;
}
.row {
width: 100%;
height: 200px;
}
.circle {
background: #d9d6d1;
width: 200px;
height: 200px;
border-radius: 50%;
-moz-border-radius: 50%;
-webkit-border-radius: 50%;
opacity:1;
filter:alpha(opacity=100);
vertical-align: top;
display: inline-block;
*zoom: 1;
*display: inline;
}
.circle:hover {
opacity: 0.5;
filter:alpha(opacity=50);
background: #fd761f;
}
.slogan {
background:#fd761f;
color: #fff;
text-align: center;
width: 200px;
height: 200px;
font-size: 16px;
line-height: 200px;
vertical-align: top;
display: inline-block;
*zoom: 1;
*display: inline;
}
.overlay:hover {
background:#fd761f;
width: 200px;
height: 200px;
border-radius: 50%;
-moz-border-radius: 50%;
-webkit-border-radius: 50%;
}
ul {
margin: 0;
padding: 0;
}
li {
list-style-type: none;
display: inline-block;
*zoom: 1;
*display: inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:19:00.813

一种可能的解决方案是将 a`float:left;`应用于`.circle`or`.slogan`类。这会将文本内容从其上下文中拉出并适当地定位圆圈。

[http://jsfiddle.net/TnUxt/1/](http://jsfiddle.net/TnUxt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:28:17.707

如果我增加行高，橙色圆圈会向上移动。但是，由于您将 <div>s 放在 <a>s 中，这一事实严重阻碍了寻找能够提供良好和跨浏览器结果的补救措施。块元素或者inline-block元素在inline元素里面，太棘手了。

如果您能纠正这一点，我会很高兴再看一看。

# iphone - 在 iPhone 上更改“返回键”

> ID：15484898
> 
> 赞同：1
> 
> 时间：2013-03-18T19:09:03.910
> 
> 标签：iphone, ios, objective-c, uikeyboard

任何人都知道如何用标签键和@符号键替换 iPhone 键盘上的“返回”键？Instagram 在他们的评论系统上使用了这个，所以应该是可能的，但我似乎在 Apple 文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T19:10:40.153

只需将键盘类型设置为`UIKeyboardTypeTwitter`

# android - 如何在android应用程序中默认选中“应用程序隐藏”复选框？

> ID：15484900
> 
> 赞同：0
> 
> 时间：2013-03-18T19:09:10.840
> 
> 标签：android, checkbox, checked

如何在android应用程序中默认选中“应用程序隐藏”复选框？

XML 代码 main.xml： [http://pastebin.com/aPhyC7VS](http://pastebin.com/aPhyC7VS)

java代码： http: [//pastebin.com/wizn2a6h](http://pastebin.com/wizn2a6h)

我已经尝试将 main.xml "android:checked="false"" 修改为 android:checked="true" 但是在重建和安装应用程序之后，我再次取消选中了“应用程序隐藏”框。

```
 </TableRow>
    <TableRow>
        <CheckBox android:textSize="16.0dip" android:textColor="#ffffffff" android:id="@id/chBox_pref_appHide" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="10.0dip" android:checked="false" android:text="@string/chBox_pref_appHide" />
    </TableRow> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:16:20.733

改变，

```
android:checked="false" 
```

至

```
android:checked="true" 
```

# linux - 更改 linux 网络设备的 TCP 超时

> ID：15484906
> 
> 赞同：9
> 
> 时间：2013-03-18T19:09:26.407
> 
> 标签：linux, tcp, linux-device-driver

我正在通过一个非常慢的接口编写 linux 设备驱动程序，其 ping 循环时间可能长达几分钟。当我尝试使用 TCP 在两个节点之间建立连接时，连接总是超时。

是否有一种方法可以在驱动程序中将 TCP 重传或握手超时设置得更长，或者是否有任何命令可以设置它？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T19:28:26.363

您是否尝试过寻找这个问题的答案？一个快速的谷歌搜索给了我[这个](http://www.sekuda.com/overriding_the_default_linux_kernel_20_second_tcp_socket_connect_timeout)，这似乎直接解决了这个问题。总结是，设置`net.ipv4.tcp_syn_retries`决定了 TCP 连接可用的最大超时。

如果该文档 *没有*回答您的问题，您应该说明您尝试了什么以及行为与您的预期有何不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T19:32:29.660

```
/proc/sys/net/ipv4/tcp_retries1
/proc/sys/net/ipv4/tcp_retries2 
```

.

```
tcp_retries1 - INTEGER

 This value influences the time, after which TCP decides, that
    something is wrong due to unacknowledged RTO retransmissions,
    and reports this suspicion to the network layer.
    See tcp_retries2 for more details.

    RFC 1122 recommends at least 3 retransmissions, which is the
    default.

tcp_retries2 - INTEGER

This value influences the timeout of an alive TCP connection,
when RTO retransmissions remain unacknowledged.
Given a value of N, a hypothetical TCP connection following
exponential backoff with an initial RTO of TCP_RTO_MIN would
retransmit N times before killing the connection at the (N+1)th RTO.

The default value of 15 yields a hypothetical timeout of 924.6
seconds and is a lower bound for the effective timeout.
TCP will effectively time out at the first RTO which exceeds the
hypothetical timeout.

RFC 1122 recommends at least 100 seconds for the timeout,
which corresponds to a value of at least 8. 
```

# mysql - MySQL：计算一个值连续出现的次数

> ID：15484908
> 
> 赞同：1
> 
> 时间：2013-03-18T19:09:31.140
> 
> 标签：mysql, sql

我做了一些谷歌搜索来尝试找到这个答案，甚至遇到了 SQL Server 的 OVER() 函数和一篇关于如何模拟的文章......但它高于我的工资等级：P

我会保持简单，说我有一个学生表和一个操作列。我想创建一个查询来计算他们连续举手、未举手或未上课的次数。没有周末班，所以它必须计算实际记录，而不仅仅是今天-FirstFoundDate。如果学生 A 连续 3 周举手（计数为 15=5 天 X 3 周）但随后没有出现在课堂上，则计数为 0。

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:43:33.840

我一直在思考这个问题，让我们重新开始……

怎么样

```
select *
from student_action maindata
where not exist (select * from student_action action_count
                 where maindata.student_id = action_count.student_id
                   and maindata.action_timestamp < action_count.action_timestamp
                   and maindata.action <> action_count.action) 
```

这应该为我们提供表中的所有连续动作，每次连续出现一行。然后 group by 将计算它们。

```
select count(*), maindata.student_id, maindata.action
from student_action maindata
where not exist (select * from student_action action_count
                 where maindata.student_id = action_count.student_id
                   and maindata.action_timestamp < action_count.action_timestamp
                   and maindata.action <> action_count.action)
group by maindata.student_id, maindata.action 
```

# ruby - Rspec Ruby 中的 Rake 不起作用

> ID：15484909
> 
> 赞同：0
> 
> 时间：2013-03-18T19:09:37.113
> 
> 标签：ruby, rspec, cmd, rake

我在使用 rake 时遇到问题。我正在学习这门课程，它是 rspec 的介绍。它首先说要安装 rspec，所以我输入 gem install rspec。

```
 ruby 1.9.3p385 (2013-02-06) [i386-mingw32]

     C:\Users\Edub>gem install rspec
     Successfully installed rspec-2.13.0
     1 gem installed 
```

然后我应该进入课程目录 cd learn_ruby 然后 cd 00_hello 但我的只有当我输入 cd learn_ruby-master\learn_ruby-master\00_hello

```
 C:\Users\Edub>cd learn_ruby-master\learn_ruby-master\00_hello 
```

然后我尝试使用 rake，就像它指示我做的那样，我得到了一些错误。我真的不知道他们是什么意思。

```
 C:\Users\Edub\learn_ruby-master\learn_ruby-master\00_hello>rake
         (in C:/Users/Edub/learn_ruby-master/learn_ruby-master)
         You must use ANSICON 1.31 or later (http://adoxa.3eeweb.com/ansicon/) to use         
         col
         our on Windows
         C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in           
          'require': cannot load such file -- hello (LoadError)
         from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_requir
         e.rb:45:in `require'
         from C:/Users/Edub/learn_ruby-master/learn_ruby-master/00_hello/hello_sp
         ec.rb:116:in `<top (required)>'
         from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.13.0/lib/rspec/cor
         e/configuration.rb:819:in `load'
         from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.13.0/lib/rspec/cor
         e/configuration.rb:819:in `block in load_spec_files'
         from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.13.0/lib/rspec/cor
         e/configuration.rb:819:in `each'
         from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.13.0/lib/rspec/cor
         e/configuration.rb:819:in `load_spec_files'
         from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.13.0/lib/rspec/cor
         e/command_line.rb:22:in `run'
         from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.13.0/lib/rspec/cor
         e/runner.rb:80:in `run'
         from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.13.0/lib/rspec/cor
         e/runner.rb:17:in `block in autorun'
         rake aborted!
         C:/Ruby193/bin/ruby.exe -S rspec C:/Users/Edub/learn_ruby-master/learn_ruby-              
         master/00_hello/hello_spec.rb -IC:/Users/Edub/learn_ruby-master/learn_ruby-  
         master/00_hello -IC:/Users/Edub/learn_ruby-master/learn_ruby-   
         master/00_hello/solution -fdocumentation -r ./rspec_config failed

         Tasks: TOP => default => spec
         (See full trace by running task with --trace) 
```

然后课程说应该发生错误，并且应该看起来像这样：

```
 no such file to load -- test-first-teaching/hello/hello (LoadError) 
```

好的，然后它指示我必须在标题为 hello.rb 的文本编辑器中定义一个方法，代码应如下所示：

```
 def hello
      "Hello!"
    end 
```

所以我继续按照说明在 Sublime 2 中完成所有这些工作。我在 Sublime 2 hello.rb 中为程序命名并定义方法。这应该可以修复所有错误，但我仍然遇到与一开始所做的相同的长错误。

有人可以告诉我这里发生了什么以及为什么 rake 被中止。我不知道它想在这里告诉我什么。谢谢！如果我不够具体，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:41:29.007

我对红宝石非常陌生，但是书中的说明似乎不正确。我的理解是 rake 需要定义 rake 任务才能工作。它不像你可以做的 ruby​​ 解释器：

```
ruby <ruby_file.rb> 
```

它可以解释文件。

试试看看这个网站：[http ://rake.rubyforge.org/](http://rake.rubyforge.org/)

它提供了一些关于创建 rake 任务的介绍（我之前并没有真正做过很多工作；在工作中其他人已经编写了 rake 任务，我只是使用它们来执行它们）：

```
rake <task> 
```

我希望这能让你开始。

编辑：

如果您确实按照我链接的网站说明进行操作，我认为在您的情况下，您会执行以下操作：

```
task :default => [:test]

task :test do
  ruby "hello.rb"
end 
```

然后运行它：

```
rake 
```

或者

```
rake test 
```

rake 默认是在您未指定任何任务时运行的任务（换句话说，您只运行“rake”），在这种情况下，它是 :test 任务的别名。如果您愿意，您可以将 :test 命名为其他名称，但随后您需要更改默认值以指向该新符号。

我也相信耙子是一颗宝石。我认为它通常默认安装在 Ruby 中，但是如果你转到命令行并执行以下操作：

```
gem query --local 
```

并且看不到那里的耙子，你必须做一个`gem install rake`才能得到它。

# coldfusion - 处理 Coldfusion 页面后的 FineUploader 错误

> ID：15484911
> 
> 赞同：0
> 
> 时间：2013-03-18T19:09:41.540
> 
> 标签：coldfusion, fine-uploader

我已经实现了最新版本的 FineUploader，它可以完美地呈现在我的页面上。

```
 $(document).ready(function () {
    $('#jquery-wrapped-fine-uploader').fineUploader({
      request: {
        endpoint: 'fu/fineuploader.cfm'
      }
    }).on('error', function(event, id, name, reason) {
        alert('error');
      })
      .on('complete', function(event, id, name, responseJSON){
        alert('complete');
      });
  }); 
```

然后我选择了一个文件，它成功地联系了 Coldfusion 页面。如果我查看调试器工具/控制台，我可以看到 Coldfusion 页面的响应。如果我对 FORM 数据进行 CFDUMP，我也会看到文件正在传递。所以到目前为止一切正常。

但是，一旦完成 Coldfusion 页面，调用页面就会触发“错误”功能并警告“错误”。

如果我查看调试器/控制台，则没有错误。所以我不明白为什么控件仍然返回错误。我怀疑错误可能是我从 cfm 页面返回的内容，目前是（这是目前 cfm 页面中写的全部内容）：

```
<cfoutput>#serializeJSON( 'true' )#</cfoutput> 
```

有人看到这里有什么问题吗？我真的不知道去哪里尝试解决这个问题，因为没有错误。

我正在使用 CF10、FineUploader 3.3、Chrome

提前致谢。

**已接受答案的更新/附录：**

基本上，响应不仅必须是正确的 JSON 格式，而且还必须具有“success”:“true” 的名称/值对。

所以，之前，我返回的 JSON 是这样的，它是有效的 JSON，但失败了：

```
{"name":"Peter"} 
```

但是，它只有在添加“success”：“true”名称/对后才开始正常工作：

```
{"success":"true","name":"Peter"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:26:16.057

成功上传后，您的 JSON 响应必须返回值为“true”的键“success”。：

```
{
  "success" : "true"
} 
```

如果 Fine Uploader 没有看到值为“true”的 JSON 键“success”，则假定上传在服务器端失败。响应中还可以包含其他 JSON 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:16:28.817

您需要在`serializeJSON()`调用中指定 ColdFusion 变量（要序列化的变量）。此外，通过将“true”指定为`serializeJSON()`函数的第二个参数，您实际上是在告诉它创建 WDDX 输出，而不是 JSON。 [请参阅此处的 SerializeJSON 文档](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-79fa.html)。

您的代码应类似于：

```
<cfoutput>#serializeJSON(YourCFVariableHere)#</cfoutput> 
```

# embedded-linux - 如何使用 vala 创建具有 666 权限的文件夹？

> ID：15484915
> 
> 赞同：2
> 
> 时间：2013-03-18T19:09:47.627
> 
> 标签：embedded-linux, glib, vala

任何用户都需要能够删除由这个嵌入式 Linux 根进程创建的文件和/或文件夹。但是这个 vala 源`DirUtils.create_with_parents(folder, 0666)`正在创建 root 拥有的 0644 文件夹。生成的 c 代码是`g_mkdir_with_parents (folder, 0666)`，文件系统是 ext2。

`chmod 0666 [folder]`使用连接到目标的控制台时按预期工作，但典型连接不会使用控制台，也不会是 root（典型连接将是嵌入式 Linux USB）。

尝试将添加`system("chmod 0666 folder")`到 vala 源作为可能的解决方法，但不会将文件夹的权限从 644 更改为 666。

*   `DirUtils.create_with_parents(folder, 0666)`使用正确吗？
*   如果是这样，我应该尝试另一种解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:06:37.610

您可能需要设置`umask`, 对新文件权限的默认限制。有 GNU 库调用[umask()](http://www.gnu.org/software/libc/manual/html_node/Setting-Permissions.html)。

# python - 在 python 中使用二等分搜索计算最低月付款

> ID：15484917
> 
> 赞同：8
> 
> 时间：2013-03-18T19:09:50.273
> 
> 标签：python

我正在尝试使用以下方法计算偿还贷款的最低每月付款：

```
balance = 999999
annualInterestRate = .18
monthlyInterestRate = annualInterestRate/12

balanceCOPY = balance

#Bisection search parameters

lo = balance/12
hi = (balance*(1+monthlyInterestRate**12))/12
epsilon = .01

guess = (lo + hi)/2

while True:
   for month in range(1,13):
      balance = balance - guess
      balance = balance + (monthlyInterestRate*balance)

   if balance > 0 and balance > epsilon:
      lo = guess
      balance = balanceCOPY
   elif balance < 0 and balance < -epsilon:
      hi = guess
      balance = balanceCOPY
   else:
      print('Lowest payment: ',str(round(guess,2)))
      break

   guess = (lo + hi)/2 
```

但是，我似乎陷入了某种无限循环，我的`guess`变量没有被更新。如何跳出无限循环并`guess`更新我的变量？

问题出在我的数学上。我的意思是说

```
hi = (balance*(1+monthlyInterestRate)**12)/12 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-16T17:16:43.080

首先，如果您正在做 MITx 练习并完成了之前的测试（只是为了增加 10 猜测），那么您只需一小步即可获得它。只需要对while条件进行一些调整并检查年度结果。

关于二分搜索，我将尝试澄清这个概念。你总是有两个极端，最小的和最大的。并且总是从四肢的中间开始猜测。

在第一次猜测之后，您需要根据年度结果调整四肢。如果一年后为饮料、女孩、节目书和其他东西支付了最低金额，但您没有支付总余额，那么您肯定需要提高最低金额。否则，例如，如果您在第 10 个月支付了全部余额，则您需要多喝水，并在明年结识新的女孩！！！开个玩笑……你需要减少最低限度。这是您在完成一年的硬付款后需要做的检查

* * *

在练习中，我们有：

*   余额和年利率=给定（我们不需要关心）
*   最小值（下限）= 余额 / 12
*   最大值（上限）=（余额 x（1 + 月利率）**12）/12.0

第一个猜测是 (minimum + maximum) /2 我叫guessMinimum，所以：

```
guessMinimum = (minimum + maximum)/2 
```

所以你将开始使用第一个猜测（guessMinimum）。一年后，您将检查剩余部分。如果剩余为负数，则意味着您付出了太多。您需要减少每月付款。另外，如果一个月后剩余为正数（例如，超过您的精度（例如 0.10）），您需要减少每月付款，好吗？！

试图设计思维......

```
 +------------------------------------------------+ 
 |   /\                  /\                   /\  | 
 |   \/------------------\/-------------------\/  | 
 |MINIMUM               guess              MAXIMUM| 
 |                     Minimum                    | 
 +------------------------------------------------+ 
```

如果一年后，“剩余”为负数（例如）。意味着“guessMinimum”太多了！！！你需要......不是你，程序！程序需要调整它，降低最小值所以......

```
 +---------------------------------------------------+ 
 |                        Got negative 'remain'      | 
 |                   ++                              | 
 |    /\             ||   /\                   /\    | 
 |    \/-------------||---\/-------------------\/    | 
 | MINIMUM           ||  guess              MAXIMUM  | 
 |                   ++ Minimum-,                    | 
 |                               ',                  | 
 |                                 `.                | 
 |                                   `.,             | 
 |                                      ',           | 
 |                                        ',         | 
 |                                          `.       | 
 |                                            `      | 
 |    /\                  /\                   /\    | 
 |    \/------------------\/-------------------\/    | 
 | MINIMUM               guess              MAXIMUM  | 
 +---------------------------------------------------+ 
```

对不起大家。我尝试插入图像，但作为新成员。我不能。至少需要10个声望....帮帮我！！！使用角色的工作量太大了！！！！

并且代码需要做这项艰苦的工作来调整最小值，直到“剩余”是可以接受的（在你的精度内，或 epsilon，或任何字母或变量或......好吧。:)

了解概念和图纸后..让我们检查代码。

```
balance = 999999; 
annualInterestRate = 0.18

monthlyInterestRate = annualInterestRate / 12

minimum = balance / 12
maximum = (balance * (1 + monthlyInterestRate)**12) / 12.0

guessMinimum = (minimum + maximum)/2

remain = balance #if you payed nothin, the remain is the balance!!!!

precision = 0.10  #you choose....

while (remain >= precision):

    guessMinimum = (minimum + maximum)/2

    for i in range (1,13):

        newBalance = remain - guessMinimum
        monthInterest = annualInterestRate/12*newBalance
        remain = newBalance+monthInterest

    # after one month, the CODE need to check about the remain

    if (remain < 0): #paying too much.... need to decrease the value

        maximum = guessMinimum      #remember my beautiful draw above!!
        remain = balance  # reset the remain to start again!!

    elif (remain > precision): #paying less .... need to increase the value
        minimum = guessMinimum
        remain = balance  # reset the remain to start again!!   

print "Lowest Payment: %.2f" %(guessMinimum) 
```

而已。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-01T12:09:27.270

我认为这个解决方案应该有效，

```
balance = 999999
annualInterestRate = 0.18

monthlyInterestRate = annualInterestRate / 12
lowerBound = balance / 12
upperBound = (balance * (1 + annualInterestRate / 12) ** 12) / 12
originalBalance = balance
lowestBalance = 0.01 # Error margin e.g. $0.01

# Keep testing new payment values until the balance is +/- lowestBalance
while abs(balance) > lowestBalance:
    # Reset the value of balance to its original value
    balance = originalBalance
    # Calculate a new monthly payment value from the bounds
    payment = (upperBound - lowerBound) / 2 + lowerBound

    # Test if this payment value is sufficient to pay off the entire balance in 12 months
    for month in range(12):
        balance -= payment
        balance *= 1 + monthlyInterestRate

    # Reset bounds based on the final value of balance
    if balance > 0:
        # If the balance is too big, need higher payment so we increase the lower bound
        lowerBound = payment
    else:
        # If the balance is too small, we need a lower payment, so we decrease the upper bound
        upperBound = payment

# When the while loop terminates, we know we have our answer!
print "Lowest Payment:", round(payment, 2) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T19:38:18.010

要找出这样的错误，一个好方法就是添加一些打印，例如，我在您的代码中添加了以下内容：

```
print(balance, lo, hi, guess) 
```

然后看看会发生什么，你就能弄清楚发生了什么。事实证明：

```
hi = (balance*(1+monthlyInterestRate**12))/12 
```

计算一个太低的上限。也许你的意思是：

```
hi = (balance*(1+monthlyInterestRate*12))/12 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T19:54:12.410

我将您的代码更改为：

```
balance = 999999
annualInterestRate = .18
monthlyInterestRate = annualInterestRate / 12

balanceCOPY = balance

#Bisection search parameters

low = balance / 12
high = (balance * (1 + monthlyInterestRate ** 12)) / 12
epsilon = .01

print "starting high and low guesses"
print "high: %s" % high
print "Low: %s" % low
print "\n"

guess = (low + high) / 2

for i in range(5):

    print "Type of balance: %s" % type(balance)
    print "Balance is: %s" % balance
    print "Low: %s" % low
    print "High: %s" % high
    print "Guess: %s" % guess

    print "monthly interest %s" % (monthlyInterestRate * balance)

    for month in range(1, 13):
        balance -= guess
        balance += monthlyInterestRate * balance

    print "balance after %s" % balance

    if balance > 0 and balance > epsilon:
        print "Change low"
        low = guess
        balance = balanceCOPY
    elif balance < 0 and balance > -epsilon:
        high = guess
        balance = balanceCOPY
    else:
        print('Lowest payment: ', str(round(guess, 2)))
        break

    guess = (low + high) / 2

    print "\n" 
```

一些注意事项：我将“hi”和“lo”更改为“high”和“low”。最好不要截断变量名，因为截断的变量名可读性较差。

我添加了显示各种变量值的调试语句。

这是上面运行的结果：

```
starting high and low guesses
high: 83333.25
Low: 83333

Type of balance: <type 'int'>
Balance is: 999999
Low: 83333
High: 83333.25
Guess: 83333.125
monthly interest 14999.985
balance after 92550.599997
Change low

Type of balance: <type 'int'>
Balance is: 999999
Low: 83333.125
High: 83333.25
Guess: 83333.1875
monthly interest 14999.985
balance after 92549.7726951
Change low

Type of balance: <type 'int'>
Balance is: 999999
Low: 83333.1875
High: 83333.25
Guess: 83333.21875
monthly interest 14999.985
balance after 92549.3590442
Change low

Type of balance: <type 'int'>
Balance is: 999999
Low: 83333.21875
High: 83333.25
Guess: 83333.234375
monthly interest 14999.985
balance after 92549.1522187
Change low

Type of balance: <type 'int'>
Balance is: 999999
Low: 83333.234375
High: 83333.25
Guess: 83333.2421875
monthly interest 14999.985
balance after 92549.048806
Change low 
```

从这里你可以看到你的低价值正在向你的高价值收敛。换句话说，您的初始高值还不够高。一旦它们的值相同，循环将永远不会改变任何东西并将永远持续下去。

我认为这一行：

```
elif balance < 0 and balance < -epsilon: 
```

应该读：

```
elif balance < 0 and balance > -epsilon: 
```

因为我认为你想要平衡`0`和`-epsilon`而不是小于`-epsilon`

此外，正如@WinstonEwert 指出的那样：

```
hi = (balance*(1+monthlyInterestRate**12))/12 
```

应该

```
hi = (balance*(1+monthlyInterestRate)**12)/12 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-28T17:41:09.260

这是我想出的作品。我通常会为这些类型的东西编写函数，以便它可以重复使用，即使我不需要这样做，因为它让我养成了这样做的习惯，并给了我一些额外的练习。

```
balance = 320000
annualInterestRate=0.2
monthlyIntRate= annualInterestRate/12.0
getpayment=True
ranonce=False
MoMin = balance/12
MoMax = (balance*(1+monthlyIntRate)**12)/12.0
MoPayment = (MoMin+MoMax)/2
NewBal=0

#Create a function to run 12 months of payments, and then create a loop to re-run the function if the Ending Balance is not close enough to 0.
def CCPayment(balance, monthlyIntRate, MoPay):
    global NewBal    
    Month = 1 #Month begins at 1

    while Month <= 12:
            balance = (balance - MoPay)
            balance = balance + (monthlyIntRate * balance)
            NewBal=balance #sets the var NewBal to be used globally
            Month += 1
    if (balance < .02) and (balance > -0.02) : #cannot evaluate to '0' as you are evaluating a float and it will 'inf loop'. Must evaluate it to a number 'close enough'
        return MoPayment
    else:
        return False

while getpayment==True: 
    if CCPayment(balance, monthlyIntRate, MoPayment):
        getpayment=False
        print "Lowest Payment: ", round(CCPayment(balance, monthlyIntRate, MoPayment),2)
    else:
        if NewBal < 0.01: #paid too much! Lower the max payment and rerun function
            if ranonce == True: #Bool check to avoid resetting the Min/Max values before running it once
                MoMax=MoPayment #sets the Max payment to the current monthly payment
                MoPayment=(MoMin+MoMax)/2 #sets the Monthly payment to average the Min/Max payments
            ranonce = True
            CCPayment(balance, monthlyIntRate, MoPayment)

        elif NewBal > 0.01: #didn't pay enough! Raise min payment and rerun function
            if ranonce == True: #Bool check to avoid resetting the Min/Max values before running it once
                    MoMin=MoPayment #sets the Min payment to the current monthly payment
                    MoPayment=(MoMin+MoMax)/2 #sets the Monthly payment to average the Min/Max payments
            ranonce = True
            CCPayment(balance, monthlyIntRate, MoPayment) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-01T14:32:55.040

```
 balance = balance
annualInterestRate = annualInterestRate
monthlyInterestRate = annualInterestRate/12

balanceCOPY = balance

#Bisection search parameters

lo = balance/12
hi = (balance*(1+monthlyInterestRate)**12)/12
epsilon = .01

guess = (lo + hi)/2

while True:
   for month in range(1,13):
      balance = balance - guess
      balance = balance + (monthlyInterestRate*balance)

   if balance > 0 and balance > epsilon:
      lo = guess
      balance = balanceCOPY
   elif balance < 0 and balance < -epsilon:
      hi = guess
      balance = balanceCOPY
   else:
      print('Lowest payment: ',str(round(guess,2)))
      break

   guess = (lo + hi)/2 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-13T00:35:08.800

```
monthlyInterestRate = annualInterestRate / 12
monthlyPaymentLowerBound = balance / 12
monthlyPaymentUpperBound = (balance * (1 + monthlyInterestRate)**12) / 12
epsilon = 0.01
while True:
    unpaidBalance = balance
    minimumFixedMonthlyPayment = (monthlyPaymentLowerBound + monthlyPaymentUpperBound) / 2

    for i in range(12):
        if i == 0:
            unpaidBalance = balance - minimumFixedMonthlyPayment
        else:
            updatedBalance = unpaidBalance + (monthlyInterestRate * unpaidBalance)
            unpaidBalance = updatedBalance - minimumFixedMonthlyPayment

    if unpaidBalance > 0 and abs(unpaidBalance) > epsilon:
        monthlyPaymentLowerBound = minimumFixedMonthlyPayment
        minimumFixedMonthlyPayment = (minimumFixedMonthlyPayment + monthlyPaymentUpperBound) / 2
        continue
    elif unpaidBalance < 0 and abs(unpaidBalance) > epsilon:
        monthlyPaymentUpperBound = minimumFixedMonthlyPayment
        minimumFixedMonthlyPayment = (monthlyPaymentLowerBound + minimumFixedMonthlyPayment) / 2
    else:
        break
print(round(minimumFixedMonthlyPayment, 2)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-18T14:41:19.903

Python 3 答案：

```
balance = 999999
annualInterestRate = .18

monthlyInterestRate = annualInterestRate / 12.0
lowBound = balance / 12
hiBound = (balance*(1+monthlyInterestRate)**12)/12.0
epsilon = 0.01

newBalance = balance
while abs(newBalance) > epsilon:
    minPay = (lowBound + hiBound) / 2
    newBalance = balance
    for month in range(12):
        monthlyUnpaid = newBalance - minPay
        newBalance = monthlyUnpaid + (monthlyInterestRate * monthlyUnpaid)
    if newBalance > epsilon:
        lowBound = minPay
    elif newBalance < epsilon:
        hiBound = minPay
print ("Lowest Payment: ", round(minPay, 2)) 
```

# asp.net-mvc-4 - MVC4 应用程序是自动缩小 js 文件，不需要

> ID：15484919
> 
> 赞同：1
> 
> 时间：2013-03-18T19:09:55.300
> 
> 标签：asp.net-mvc-4, minify

我做了一些现在导致我的 JS 和 CSS 文件在应用程序运行时被缩小的事情。我不知道这是怎么变成这样的。我不是为了这个结果，也没有试图让它发生，因为我的应用程序仍处于开发模式。（很高兴知道这在某种程度上是可能的，尽管当我进入生产模式时:)

这似乎是在我在 Visual Studio 2012 中执行发布命令之后发生的。但我不能确定这是罪魁祸首。

所以知道当我尝试调试我的 javascript 文件时，我不能，因为它们已被缩小。

这是什么原因造成的？我该如何关闭它？

这是我如何包含 js 文件的一些代码。

在我的布局中，我有：

```
@Scripts.Render("~/bundles/OTIS") 
```

在 bundleConfig 我有：

```
bundles.Add(new ScriptBundle("~/bundles/OTIS").Include(
                    "~/Scripts/OTIS.Core.*",
                    "~/Scripts/lightbox/jquery.lightbox-0.5.min.js"
                    )
                ); 
```

我的 OTIS.Core.js 文件没有被缩小。

然而，查看生成的视图 html，我看到：

```
<script src="/bundles/OTIS?v=gUSAZPNxeuLWr9FClJzjCG5bqrO4n2Dj44QgtT4jL-01"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:17:39.080

在您的捆绑配置中，将以下内容放在底部`RegisterBundles`：

```
#if(DEBUG)
    BundleTable.EnableOptimizations = false;
#endif
#if(!DEBUG)
    BundleTable.EnableOptimizations = true;
#endif 
```

这将确保您的 js 和 css 在非调试版本中被缩小。但如果你在调试中构建，脚本将不会被缩小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:58:21.870

另一种控制 Minifying 的方法是在 web.config 文件中设置调试标志，即

```
<compilation debug="true" targetFramework="4.5" /> 
```

如果设置为 false，则会发生缩小。我发现[这篇文章](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)有助于更深入地解释。

# jquery - 动态 div 创建问题

> ID：15484920
> 
> 赞同：0
> 
> 时间：2013-03-18T19:10:01.827
> 
> 标签：jquery, jquery-ui, jquery-plugins

我在使用 jQuery 创建新`<div>`标签时遇到问题。

我的要求是：

1.  动态创建 div 标签及其 id
2.  动态提供`<div>`&之间的内容`</div>`

下面是我试过的代码片段

```
for (var i in List){
$('#count').append('<div id="content_'+i+'">')
.append(List[i]).append('</div>').append('<br />');
} 
```

具有键和值对的列表对象

输出 -

```
<div id="count" align="left">
<div id="content_4504"></div>Steve <br>
<div id="content_2024"></div>Richard <br>
</div> 
```

我需要在标签内显示名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:14:26.387

另一种方法是动态生成 HTML，请尝试以下方法：

```
for (var i in List){
$('#count').append('<div id="content_' + i + '">' + List[i] + '</div><br/>')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:16:14.043

那是因为您将字符串附加到`#count`元素而不是您创建并附加它的元素：

```
for (var i in List){
     $('<div id="content_'+i+'">')
              .text(List[i])
              .appendTo('#count')
              .after('<br/>');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:18:00.047

尝试这个

```
for (var i in List){
    var divContent=$('<div />').attr({id:"content_"+i}).html(List[i]);
    $('#count').append(divContent,'<br>');
   ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T19:18:23.090

```
for (var i in List)
{
  var $dyn = $("<div></div>").attr({'id':'content_'+i}).text(List[i]);
  $('#count').append($dyn).append('<br>');
} 
```

这应该这样做。

# php - Facebook 需要命令行中的 CURL PHP 扩展错误消息

> ID：15484925
> 
> 赞同：0
> 
> 时间：2013-03-18T19:10:34.583
> 
> 标签：php, curl

我得到“Facebook 需要 CURL PHP 扩展”。在命令行中运行使用 Facebook API 的 php 代码时出错，但在浏览器调用脚本时它可以正常工作。

尝试安装 php5-curl 但我收到以下消息：

```
Err http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ maverick-updates/main php5-curl amd64 5.3.3-1ubuntu9.10 403  Forbidden
Failed to fetch http://us-east-1.ec2.archive.ubuntu.com/ubuntu/pool/main/p/php5/php5-curl_5.3.3-1ubuntu9.10_amd64.deb  403  Forbidden 
```

我正在使用运行 nginx 的亚马逊 ubuntu 实例。

知道如何安装 php5-curl 以便我可以在命令行中为 PHP 启用它吗？或者是否有另一种方法可以让 curl 在命令行中为 PHP 工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:29:13.700

没有安装 cURL，而是为 Facebook API 的 PHP SDK 找到了一个分支，该分支在使用之前检查 cURL 是否已启用，现在一切正常。

你可以在这里找到这个分支：[https ://github.com/mattmecham/php-sdk](https://github.com/mattmecham/php-sdk)

# amazon-web-services - 使用 git 同步和测试部署在 aws 上的应用程序服务器的好方法是什么？

> ID：15484928
> 
> 赞同：0
> 
> 时间：2013-03-18T19:10:44.880
> 
> 标签：amazon-web-services, sync

我目前是aws新手，一般都是用putty作为控制台调试程序，用winscp上传新代码到服务器，但是用winscp更新服务器效率有点低，想知道有没有一种简单、快速的方法，允许我将代码同步到部署在亚马逊实例中的测试服务器。

我想到了什么，可能是git，我不知道如何在双方都这样做，一旦我将本地存储库更新到git服务器，git服务器会自动将代码更新到我在aws上的测试服务器

或者如果你有比 git 更好的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:56:47.987

将代码推送到 git 或 github 存储库后，您需要 ssh 到服务器并拉取代码。`[this][1]`为此，首先按照说明在您的 aws 实例中生成 ssh 密钥。一旦你的初始测试说没问题，然后 git clone 你的应用程序到所需的路径。克隆它后，使用 git pull 命令更新应用程序的最新版本。

# ruby - Ruby 中的全局方法

> ID：15484929
> 
> 赞同：3
> 
> 时间：2013-03-18T19:10:52.403
> 
> 标签：ruby

如果 Ruby 中的所有“函数”都是方法，那么当我调用方法而不明确提及调用它们的对象时，它们会发送给谁？

Ruby Programming Language book (Flanagan & Matsumoto) 说如果对象被省略，方法会在 self 上调用。

所以如果这段代码有效

```
p "123" 
```

那么这应该工作

```
self.p "123" 
```

但它没有！

在这种情况下，我在全局范围内运行它，所以 self 是 main 并且 self.class 是 Object。所以我不能在一个简单的 Object 实例上调用 p （这是有道理的）。

我知道 Object 包括声明 p 的内核。解释器如何知道如何访问此声明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:22:13.073

对于运行时 Ruby 有特殊的对象`main`.

所有代码都在这个对象的上下文中运行是一种技巧。

因此，当您键入诸如 之类的方法时`puts`，`p`它们都在`self`对象的上下文中调用并传递给`self`对象。

这是第二件事——访问控制。你可能知道，Ruby 有`private`,`protected`和`public`- 之类的关键字，它们都管理对象上调用方法的访问。Ruby 仅在您进行类似的构造时才检查此访问控制

`<name_of_object>.your_method`和`self.your_method`

所以当你打字的时候

```
self.p "something" 
```

Ruby 将拒绝此调用，因为该`p`方法是私有方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:05:27.547

正如用户 megas 所解释的，这只是一个访问问题。这个例子明确地显示了它 -

```
class Object

  def checking
    p self
  end

  private

  def private_checking
    p self
  end

end

checking                  #=>main
self.checking             #=>main

private_checking          #=>main
self.private_checking     #=>NoMethodError 
```

# asp.net - Gridview 模板字段数据源

> ID：15484930
> 
> 赞同：1
> 
> 时间：2013-03-18T19:10:57.887
> 
> 标签：asp.net, datagridview, templatefield

我在我的 asp.net 页面上放置了一个 gridview，并且正在使用 sql 调用来获取数据源。在sql调用中，它带来了所有字段（姓名，地址，电话，类型）的数据在gridview上，有2个字段（电话，类型）需要模板字段而不是绑定字段，在编辑过程中，和项目模板中的文本框或标签（无论哪个）。

当我运行代码时，数据网格完成并填写 - 减去电话或类型字段（模板字段）的信息。如何对字段进行数据绑定，以便正确显示信息。我已经包含了我的代码。

任何帮助将不胜感激。提前致谢！

网格视图：

```
 <asp:GridView ID="gvMTM" runat="server" AllowPaging="True" DataKeyNames="MTMID"
    AutoGenerateColumns="False" AutoGenerateEditButton="True"
    OnRowEditing="gvMTM_RowEditing" 
    OnRowUpdating="gvMTM_UpdateRowEditing" 
    OnRowCancelingEdit="gvMTM_CancelRowEditing" >
    <Columns>
        <asp:BoundField DataField="MTMID" HeaderText="ID" />
        <asp:BoundField DataField="MTMName" HeaderText="Name" />
        <asp:BoundField DataField="Add1" HeaderText="Add1" />
        <asp:BoundField DataField="Add2" HeaderText="Add2" />
        <asp:BoundField DataField="City" HeaderText="City" />
        <asp:BoundField DataField="ST" HeaderText="ST" />
        <asp:BoundField DataField="Zip" HeaderText="Zip" />
        <asp:BoundField DataField="Email" HeaderText="Email" />
        <asp:TemplateField HeaderText="Phone#">
            <EditItemTemplate>
                <asp:TextBox ID="txtPhoneEdit" runat="server"></asp:TextBox>
                <asp:MaskedEditExtender ID="TemptxtPhone_MaskedEditExtender" runat="server" 
                    CultureAMPMPlaceholder="" CultureCurrencySymbolPlaceholder="" 
                    CultureDateFormat="" CultureDatePlaceholder="" CultureDecimalPlaceholder="" 
                    CultureThousandsPlaceholder="" CultureTimePlaceholder="" Enabled="True" 
                    TargetControlID="TemptxtPhone">
                </asp:MaskedEditExtender>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:TextBox ID="txtPhoneRead" runat="server" BorderStyle="None"></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="RR">
            <EditItemTemplate>
                <asp:DropDownList ID="ddRREdit" runat="server" Height="16px" Width="100px" DataTextField="Railroad" DataValueField="RRID">
                </asp:DropDownList>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:TextBox ID="txtRRRead" runat="server" BorderStyle="None"></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

在 .CS 页面上：

```
 gvMTM.DataSource = code.GetMTMList();
            gvMTM.DataBind(); 
```

SQL 调用

```
 public DataTable GetMTMList()
    {
        try
        {
            SQLCON = new SqlConnection(connectionString);
            SQLCON.Open();
            SQLCmd = new SqlCommand("spGetMTMList", SQLCON);
            SQLCmd.CommandType = CommandType.StoredProcedure;

            SqlDataAdapter adapter = new SqlDataAdapter(SQLCmd);
            DataTable Detailtable = new DataTable();
            adapter.Fill(Detailtable);

            return Detailtable;

        }
        catch (Exception ex)
        {
            HttpContext.Current.Response.Redirect("~/ErrorRedirect.aspx?" +    ex.Message, false);
            return null;
        }
        finally
        {
            SQLCON.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T19:15:30.170

用这个：

```
Text='<%# Eval("phone") %>' 
```

你需要添加这个：

```
 <ItemTemplate>
      <asp:TextBox ID="txtPhoneRead" runat="server" Text='<%# Eval("phone") %>'>
      </asp:TextBox>
 </ItemTemplate> 
```

该`Eval()`方法将数据源中的数据绑定到`Text`属性

You can take a look at his [post](http://dotnetspidor.blogspot.co.il/2008/11/aspnet-eval-and-bind-expressions-in_17.html) for more information

**Note** Consider changing the `TextBox` control within the `<ItemTemplate>` to `asp:Label`

it should look like this:

```
<ItemTemplate>
       <asp:Label ID="txtPhoneRead" runat="server" Text='<%# Eval("Phone") %>'>
       </asp:Label>              
 </ItemTemplate> 
```

# r - 导入使用 Rmd 上的视口创建的图形以进行降价

> ID：15484934
> 
> 赞同：1
> 
> 时间：2013-03-18T19:11:13.157
> 
> 标签：r, markdown, knitr

我正在尝试将图表从 R 文件引用到 Rmd 文件。在 R 文件中，我使用以下代码从视口生成最终图形。

代码是：

```
library(grid)
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
vplayout <- function(x, y)
  viewport(layout.pos.row = x, layout.pos.col = y)
print(k1, vp = vplayout(1, 1))
print(k2, vp = vplayout(1,2)) 
```

现在，当我尝试将那段代码用于 Rmd 文件时，它不会显示任何内容。如何在 knitr 输出（降价文件）上显示此类图像。

```
```{r}
source("../../../Calibration Model/R code/monitoring stations for calibration.R")
library(grid)
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
vplayout <- function(x, y)
  viewport(layout.pos.row = x, layout.pos.col = y)
print(k1, vp = vplayout(1, 1))
print(k2, vp = vplayout(1,2))
``` 
```

这里的文件名“用于校准的监测站。R”是我有 k1 和 k2 数字的文件。我想将这两者结合起来并显示为一个新人物。可以使用 knitr 吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:22:16.473

这对我来说很好：

```
```{r fig.width=7, fig.height=6}
library(grid)
library(ggplot2)
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
vplayout <- function(x, y)
  viewport(layout.pos.row = x, layout.pos.col = y)
k1 <- ggplot(mtcars, aes(factor(cyl), mpg))  + geom_boxplot()
print(k1, vp = vplayout(1, 1))
print(k1, vp = vplayout(1,2))
``` 
```

# asp.net - ASP.NET 网页中的 AJAX 2

> ID：15484938
> 
> 赞同：0
> 
> 时间：2013-03-18T19:11:28.707
> 
> 标签：asp.net, jquery, asp.net-webpages

我需要使用 ASP.NET 使用简单的 CRUD 操作快速构建一些简单的 Web 应用程序

我的直接选择是使用标准的 ASP Web Pages 2，我会的。

它们中的大多数将有 1-2 页长。

我需要找到一种方法使其更加用户友好并对其进行 AJAX 化。

在我看来，这样做会牵涉到 JQuery。但我想这会将我带到 Web API 以便在 JSon 中获取/设置数据......

如果这是唯一的出路，我该怎么做呢？网页可以支持Web APi还是我必须去MVC？

例如，我想通过按下按钮或选择 UI 元素（下拉框）来更新页面中的表格。

**更新：**我遵循[了这个](http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-aspnet-web-forms)，我只更改了 global.asax 中的导入，如下所示：

```
 <%@ Import Namespace="System.Web.Http" %>
<%@ Import Namespace="System.Web.Routing" %>
<%@ Import Namespace="System.Net.Http.Handlers" %> 
```

看来它现在可以工作了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:25:15.943

我建议使用 ASP.NET Web API（[带有 Web 表单](http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-aspnet-web-forms)）和[KnockoutJs](http://knockoutjs.com/)

为什么？

Web API 使服务 JSON 变得非常容易，并鼓励使用 RESTful 方法而不限制 yorr 选项（因为 RPC 样式调用仍然在 IMO 中占有一席之地）。

Knockout 有很好的文档、教程和强大的支持。我已经使用 Web API、Bootstrap 和 Knockout 构建了几个真正“ajaxy”的应用程序，可以推荐你看看。

# java - 无法使用 JavaMail api 发送邮件

> ID：15484940
> 
> 赞同：1
> 
> 时间：2013-03-18T19:11:38.777
> 
> 标签：java, jakarta-mail

我正在尝试使用以下代码发送邮件：-

```
java.awt.EventQueue.invokeLater(
                new Runnable() {

                    @Override
                    public void run() {

                        new SwingWorker<Void, Integer>() {

                            String to = "xx@gmail.com";
                            // Sender's email ID needs to be mentioned
                            String from = "xexx@gmail.com";
                            // Assuming you are sending email from localhost
                            String host = "localhost";
                            // Get system properties
                         //   Properties properties = System.getProperties();

                            // Setup mail server

                            protected Void doInBackground() throws Exception {
                                try {
Properties properties =  new Properties();
properties.put("mail.smtp.socketFactory.port", "465");
properties.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
properties.put("mail.smtp.starttls.enable", "true");
        // Get the default Session object.
        Session session = Session.getDefaultInstance(properties);

                                    // Create a default MimeMessage object.
                                    MimeMessage message = new MimeMessage(session);

                                    // Set From: header field of the header.
                                    message.setFrom(new InternetAddress(from));

                                    // Set To: header field of the header.
                                    message.addRecipient(Message.RecipientType.TO,
                                            new InternetAddress(to));

                                    // Set Subject: header field
                                    message.setSubject("This is the Subject Line!");

                                    // Now set the actual message
                                    message.setText("Message" + jTextField1.getText() + " xx " + jTextField2.getText());

                                    // Send message
                                    Transport.send(message);

                                } catch (Exception x) {
                                    x.printStackTrace();
                                }
                                return null;
                            }

                            protected void process() {

                            }

                            protected void done() {
                                try {

                                    JOptionPane.showMessageDialog(null, "You'll get a response from our team shortly !");

                                } catch (Exception x) {
                                }

                            }
                        }.execute();
                    } 
```

在调用上述代码时，我得到一个异常：

```
javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25;
  nested exception is:
    java.net.SocketException: Permission denied: connect
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1934)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at ims.Activation$5$1.doInBackground(Activation.java:374)
    at ims.Activation$5$1.doInBackground(Activation.java:327)
    at javax.swing.SwingWorker$1.call(SwingWorker.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at javax.swing.SwingWorker.run(SwingWorker.java:335)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.net.SocketException: Permission denied: connect
    at java.net.TwoStacksPlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:288)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:231)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1900)
    ... 15 more 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:19:08.690

除非您在本地环境中运行邮件服务器，否则您将需要通过其他邮件属性指定一个：

```
properties.put("mail.smtp.host", aHost); 
```

例如，如果您使用的是 Gmail 中继，您将拥有：

```
properties.put("mail.smtp.host", "smtp.gmail.com"); 
```

此外，您需要`mail.smtp.auth`为会话设置属性。

```
properties.put("mail.smtp.auth", true); 
```

根据您最终使用的主机，您可能还需要提供身份验证信息。例如，再次使用 Gmail 中继：

```
Session session = Session.getDefaultInstance(props,
    new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("someUserName", "somePassword");
        }
    }
); 
```

# android - 仅为列表视图中的可见行下载图像

> ID：15484941
> 
> 赞同：2
> 
> 时间：2013-03-18T19:11:43.533
> 
> 标签：android, android-listview, listadapter, download

我有一个自定义列表，每行显示图像和文本以及图像都必须从服务器下载。

所以我已经定制了我的适配器，并且在那个 getView 方法中我已经启动了一个异步任务来下载图像。

但问题是，如果列表中有 50 个项目，那么如果我一次从列表中的第 1 个项目滚动到第 50 个项目，

然后对于每一行，它将开始下载图像，无论该行是否薄，甚至没有显示...

那么这可能是什么解决方案？

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:09:59.933

这是一个众所周知的问题。阅读[Lazy Image Loading](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)并找到类似的问题。特别是当您添加 convertView 使用等时，这不是那么明显的问题。

一个快速的解决方法 - 我建议在 ThreadExecutor 上下载图像，例如最多 4 个线程，并取消所有不再需要的任务。当您使用 convertView - 您可以使用 setTag(asyncTask) 将任务附加到视图并在新任务出现时取消它。您还可以使用 LRU 缓存来存储一些图像，而不是在每次滚动列表时加载它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T19:13:13.567

仅对可见行调用 getView。因此，如果您从那里开始下载，它只会下载显示的视图。注意：永远不要自己调用适配器的 getView，你会导致 listView 出现重大问题。

# java - 将图库图像（壁纸）保存到 SD 卡（已关闭）

> ID：15484945
> 
> 赞同：0
> 
> 时间：2013-03-18T19:12:04.147
> 
> 标签：java, android, android-sdcard, wallpaper, fileoutputstream

我试图弄清楚如何使这段代码工作并且我失去了答案。我的代码只是一个墙纸选择器，是从 AOSP 源代码中提取的。

我添加了一个按钮，将当前壁纸保存到 SD 卡。我有以下代码，不知道如何解决这个问题。提前致谢

```
View setButton2 = view.findViewById(R.id.savetosd);
    setButton2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            int i = gallery.getSelectedItemPosition();
            String s = (new StringBuilder(String.valueOf(getResources().getStringArray(R.array.wallpapers)[i]))).append(".jpg").toString();
            String s1 (new saveToSDCard(.getImage(gallery.getSelectedItemPosition()), s);
            startMediaScanner(s1);
            Toast.makeText(getActivity().getApplicationContext(), "Saved to SD Card", Toast.LENGTH_SHORT).show(); 
```

当前误差

```
The method getImage(int) is undefined for the type Gallery 
```

其余代码

```
private static final String SD = Environment.getExternalStorageDirectory().getAbsolutePath();
private boolean mEmbedded;
private Bitmap mBitmap = null;
private ArrayList<Integer> mThumbs;
private ArrayList<Integer> mImages;
private WallpaperLoader mLoader;
private WallpaperDrawable mWallpaperDrawable = new WallpaperDrawable();
...

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    findWallpapers();

    if (mEmbedded) {
        View view = inflater.inflate(R.layout.wallpaper_chooser, container, false);
        view.setBackground(mWallpaperDrawable);

        final Gallery gallery = (Gallery) view.findViewById(R.id.gallery);
        gallery.setCallbackDuringFling(false);
        gallery.setOnItemSelectedListener(this);
        gallery.setAdapter(new ImageAdapter(getActivity()));

        View setButton = view.findViewById(R.id.set);
        setButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                selectWallpaper(gallery.getSelectedItemPosition());
            }
        });
        View setButton2 = view.findViewById(R.id.savetosd);
        setButton2.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                //selectWallpaper(gallery.getSelectedItemPosition());
                int i = gallery.getSelectedItemPosition();
                String s = (new StringBuilder(String.valueOf(getResources().getStringArray(R.array.wallpapers)[i]))).append(".jpg").toString();
                String s1 (new saveToSDCard(.getImage(gallery.getSelectedItemPosition()), s);
                startMediaScanner(s1);
                Toast.makeText(getActivity().getApplicationContext(), "Saved to SD Card", Toast.LENGTH_SHORT).show();

            }
        });
        return view;
    }
    return null;
}

private void selectWallpaper(int position) {
    try {
        WallpaperManager wpm = (WallpaperManager) getActivity().getSystemService(
                Context.WALLPAPER_SERVICE);
        wpm.setResource(mImages.get(position));
        Activity activity = getActivity();
        activity.setResult(Activity.RESULT_OK);
        activity.finish();
    } catch (IOException e) {
        Log.e(TAG, "Failed to set wallpaper: " + e);
    }
}

public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    selectWallpaper(position);
}

public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    if (mLoader != null && mLoader.getStatus() != WallpaperLoader.Status.FINISHED) {
        mLoader.cancel();
    }
    mLoader = (WallpaperLoader) new WallpaperLoader().execute(position);
}

public void onNothingSelected(AdapterView<?> parent) {
}

private void addWallpapers(Resources resources, String packageName, int list) {
    final String[] extras = resources.getStringArray(list);
    for (String extra : extras) {
        int res = resources.getIdentifier(extra, "drawable", packageName);
        if (res != 0) {
            final int thumbRes = resources.getIdentifier(extra + "_thumb",
                    "drawable", packageName);

            if (thumbRes != 0) {
                mThumbs.add(thumbRes);
                mImages.add(res);
                // Log.d(TAG, "add: [" + packageName + "]: " + extra + " (" + res + ")");
            }
        }
    }    
}

private class ImageAdapter extends BaseAdapter implements ListAdapter, SpinnerAdapter {
    private LayoutInflater mLayoutInflater;

    ImageAdapter(Activity activity) {
        mLayoutInflater = activity.getLayoutInflater();
    }

    public int getCount() {
        return mThumbs.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View view;

        if (convertView == null) {
            view = mLayoutInflater.inflate(R.layout.wallpaper_item, parent, false);
        } else {
            view = convertView;
        }

        ImageView image = (ImageView) view.findViewById(R.id.wallpaper_image);

        int thumbRes = mThumbs.get(position);
        image.setImageResource(thumbRes);
        Drawable thumbDrawable = image.getDrawable();
        if (thumbDrawable != null) {
            thumbDrawable.setDither(true);
        } else {
            Log.e(TAG, "Error decoding thumbnail resId=" + thumbRes + " for wallpaper #"
                    + position);
        }
        return view;
    }
}

class WallpaperLoader extends AsyncTask<Integer, Void, Bitmap> {
    BitmapFactory.Options mOptions;

    WallpaperLoader() {
        mOptions = new BitmapFactory.Options();
        mOptions.inDither = false;
        mOptions.inPreferredConfig = Bitmap.Config.ARGB_8888;
    }
    @Override
    protected Bitmap doInBackground(Integer... params) {
        if (isCancelled()) return null;
        try {
            return BitmapFactory.decodeResource(getResources(),
                    mImages.get(params[0]), mOptions);
        } catch (OutOfMemoryError e) {
            return null;
        }
    }
    @Override
    protected void onPostExecute(Bitmap b) {
        if (b == null) return;

        if (!isCancelled() && !mOptions.mCancel) {
            // Help the GC
            if (mBitmap != null) {
                mBitmap.recycle();
            }

            View v = getView();
            if (v != null) {
                mBitmap = b;
                mWallpaperDrawable.setBitmap(b);
                v.postInvalidate();
            } else {
                mBitmap = null;
                mWallpaperDrawable.setBitmap(null);
            }
            mLoader = null;
        } else {
           b.recycle();
        }
    }
    void cancel() {
        mOptions.requestCancelDecode();
        super.cancel(true);
    }
}
 private String saveToSDCard(Bitmap bitmap, String s)
 {
    StringBuffer stringbuffer = new StringBuffer();
    File file = new File ((new StringBuilder(String.valueOf(SD))).append("/JaisonBrooks|Development/GalaxyS3Wallpapers/").toString());
    if(!file.exists())
        file.mkdirs();
    File file1 = new File(file, s);
    if(file1.exists())
        file1.delete();
    ByteArrayOutputStream bytearrayoutputstream = new ByteArrayOutputStream();
    bitmap.compress(android.graphics.Bitmap.CompressFormat.JPEG, 100, bytearrayoutputstream);
    byte abtye0[] = bytearrayoutputstream.toByteArray();
    try { 
        file1.createNewFile();
        FileOutputStream fileoutputstream = new FileOutputStream(file1);
        fileoutputstream.write(abtye0);
        fileoutputstream.flush();
        fileoutputstream.close();
        stringbuffer.append(file1.getAbsolutePath());
    }
    catch (IOException ioexception)
    {
        ioexception.printStackTrace();
    }
    return stringbuffer.toString();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:09:17.520

我已经通过添加以下代码解决了这个问题

```
 private ImageAdapter mAdapter;

 final Gallery gallery = (Gallery) view.findViewById(R.id.gallery);
        gallery.setCallbackDuringFling(false);
        gallery.setOnItemSelectedListener(this);
        //gallery.setAdapter(new ImageAdapter(getActivity()));
        mAdapter = new ImageAdapter(getActivity());
        gallery.setAdapter(mAdapter);

        View setButton = view.findViewById(R.id.set);
        setButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                selectWallpaper(gallery.getSelectedItemPosition());
            }
        });
        View setButton2 = view.findViewById(R.id.savetosd);
        setButton2.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                //selectWallpaper(gallery.getSelectedItemPosition());
                int i = gallery.getSelectedItemPosition();
                String s = (new StringBuilder(String.valueOf(getResources().getStringArray(R.array.wallpapers)[i]))).append(".jpg").toString();
                String s1 = saveToSDCard(mAdapter.getImage(gallery.getSelectedItemPosition()), s);
                startMediaScanner(s1);
                Toast.makeText(getActivity().getApplicationContext(), "Saved to SD Card", Toast.LENGTH_SHORT).show();

            }
        });

   ...

   public Bitmap getImage(int i)
    {
        return getBitmap(((Integer)mImages.get(i)).intValue());
    }

    public Bitmap getItem(int i)
    {
        return getBitmap(((Integer)mImages.get(i)).intValue());
    } 
```

# sql-server - 优化 SQL Server 查询

> ID：15484946
> 
> 赞同：1
> 
> 时间：2013-03-18T19:12:13.250
> 
> 标签：sql-server, sql-server-2000

```
SELECT TOP 10 dic.item_cd,
              dic.item_knm,
              dic.item_enm
FROM tbus.dt_item_com dic
INNER JOIN tbus.mfProd mfp ON dic.item_cd LIKE mfp.prodId
INNER JOIN tbus.plu_category plc ON mfp.prodType LIKE plc.plc_prodType
WHERE (dic.item_knm LIKE '%%'
  OR (dic.item_enm LIKE '%%')
  AND (dic.item_cd NOT IN
         (SELECT TOP 0 dic.item_cd
          FROM tbus.dt_item_com dic
          INNER JOIN tbus.mfProd mfp ON dic.item_cd LIKE mfp.prodId
          INNER JOIN tbus.plu_category plc ON mfp.prodType LIKE plc.plc_prodType
          WHERE (dic.item_knm LIKE '%%'
                 OR dic.item_enm LIKE '%%')
          ORDER BY dic.item_cd DESC))
ORDER BY dic.item_cd DESC 
```

这是我要优化的 SQL 查询。

这个查询的作用是按项目名称内连接三个表（目前它只是'%%'。稍后会变成'%apple%'）。而且，因为这是用于分页的，它也没有 IN 语法。

这里的问题是有两个重复的 INNER JOIN & WHERE 短语 - 一个在 NOT IN 内部，另一个在外部。如何删除这些重复的代码并使其更快:(？

（它基于 SQL Server 2000）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:02:13.657

让我回答一个不同的问题（根据评论）：如何在 SQL Server 上进行分页？您通常使用 row-Number 函数：

```
select * from (
 select *, row_number() over(order by something) r
 from T
) x
where r >= 10 and r < 20 
```

然后，你所有的问题都会消失。

# vba - 将一个集合分成两个不相交的子集（所有组合）

> ID：15484947
> 
> 赞同：0
> 
> 时间：2013-03-18T19:12:14.517
> 
> 标签：vba, combinatorics, set-theory

定义集合`A={1,2}`。如何生成所有可能的组合，这些组合`A`可以分成两个不相交的子集`B`和`C`？对于`n=2`可能的组合是

```
B     C
1     2
2     1
1,2   Ø
Ø     1,2 
```

我如何将其推广到 any `n`？最好使用 VBA（或任何其他语言都可以）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:52:34.010

这就是我所做的。对不起，我不记得确切的来源，`GenerateCombinations`所以我不能给予信任。`GenerateCombinations`返回一个锯齿状数组 ( `Variant`) 的组合。

```
Sub GenerateBCCombinations(Aset() As Variant, ByRef Bset() As Variant, ByRef Cset() As Variant)
    ' Separates A into two disjoint subsets B and C and generates all possible
    ' combinations hereof

    Dim i As Integer
    Dim b() As Variant

    ' Generate B subset
    Call GenerateCombinations(Aset, Bset)

    ' Generate C subset (complement of B)
    ReDim Cset(UBound(Bset))
    For i = LBound(Cset) To UBound(Cset)
        ReDim b(UBound(Bset(i)))
        b = Bset(i)
        Cset(i) = Complement(b, Aset)
    Next i

    ' Add the trivial case where B = Ø
    ReDim Preserve Bset(UBound(Bset) + 1)
    Bset(UBound(Bset)) = Array(0)
    ReDim Preserve Cset(UBound(Cset) + 1)
    Cset(UBound(Cset)) = Aset

End Sub

Sub GenerateCombinations(ByRef AllFields() As Variant, ByRef result() As Variant)

  Dim InxResultCrnt As Integer
  Dim InxField As Integer
  Dim InxResult As Integer
  Dim i As Integer
  Dim NumFields As Integer
  Dim Powers() As Integer
  Dim ResultCrnt() As Variant

  NumFields = UBound(AllFields) - LBound(AllFields) + 1

  ReDim result(0 To 2 ^ NumFields - 2)  ' one entry per combination
  ReDim Powers(0 To NumFields - 1)          ' one entry per field name

  ' Generate powers used for extracting bits from InxResult
  For InxField = 0 To NumFields - 1
    Powers(InxField) = 2 ^ InxField
  Next

 For InxResult = 0 To 2 ^ NumFields - 2
    ' Size ResultCrnt to the max number of fields per combination
    ' Build this loop's combination in ResultCrnt
    ReDim ResultCrnt(0 To NumFields - 1)
    InxResultCrnt = -1
    For InxField = 0 To NumFields - 1
      If ((InxResult + 1) And Powers(InxField)) <> 0 Then
        ' This field required in this combination
        InxResultCrnt = InxResultCrnt + 1
        ResultCrnt(InxResultCrnt) = AllFields(InxField)
      End If
    Next
    ' Discard unused trailing entries
    ReDim Preserve ResultCrnt(0 To InxResultCrnt)
    ' Store this loop's combination in return array
    result(InxResult) = ResultCrnt
  Next

End Sub

Function Complement(tbl1() As Variant, tbl2() As Variant) As Variant
' Returns the difference between tbl1 and tbl2 where tbl1 is the full set
    Dim tbl(), i&, x&

    For i = LBound(tbl2) To UBound(tbl2)
      If IsError(Application.match(tbl2(i), tbl1, 0)) Then
        x = x + 1
        ReDim Preserve tbl(1 To x)
        tbl(x) = tbl2(i)
      End If
    Next i

    If x = 0 Then tbl = Array(0)

    Complement = tbl
End Function 
```

# ruby-on-rails - 查找以“a”开头的字符串中的单词数

> ID：15484956
> 
> 赞同：-3
> 
> 时间：2013-03-18T19:12:42.150
> 
> 标签：ruby-on-rails, ruby

在 Ruby 中，我想从这个字符串中显示以“a”开头的单词数：`an ant hello hint how are you`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T19:16:36.850

您可以将正则表达式与扫描一起使用

```
string.scan(/\ba/).size 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:44:19.837

```
p "an ant hello hint how are you".split.count{|word| word.start_with?('a')}
#=> 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:16:07.717

```
"a asa  a ss sa a a a ass a ".split.select {|w| w[0] == "a"}.size 
```

# javascript - 等到jquery对话框返回

> ID：15484957
> 
> 赞同：2
> 
> 时间：2013-03-18T19:12:45.797
> 
> 标签：javascript, jquery

我需要在单击按钮时打开一个弹出窗口并为此使用 jquery 对话框。

```
 $(document).ready(function(){
    $("#dialog-form").dialog({
        autoOpen : false,
        height : 300,
        width : 350,
        modal : true,
        buttons : {
            "Add" : function() {
                $("#tag1").text($("#textArea").val());
                $(this).dialog("close");
            },
            Cancel : function() {
                $(this).dialog("close");
            }
        },
        close : function() {
            $("#textArea").val("");
        }
    });

});

    function openWindow(){
        $("#dialog-form").dialog("open");
        statement1;
        statement2;
        }

<button id="add" onclick="openWindow()">Add</button> 
```

这里的问题是当我单击按钮打开对话框时，但在我在对话框中输入一些文本之前 statement1 和 statement2 正在执行，然后焦点来到对话框。

如何使 statement1 和 statement2 仅在对话框返回后执行？

我不想将 statement1 和 statement2 添加到“Add”函数中。没有在“添加”函数中添加语句的原因是因为我有多个按钮，每个按钮都应该首先打开对话框，然后执行不同的语句集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:18:15.480

简单的解决方法是使用`close`回调：

```
$(document).ready(function () {
    $("#dialog-form").dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        buttons: {
            "Add": function () {
                $("#tag1").text($("#textArea").val());
                $(this).dialog("close");
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        },
        close: function () {
            $("#textArea").val("");
            //statement1 -- won't fire until dialog is closed
            //statement2 -- won't fire until dialog is closed
        }
    });
});

function openWindow() {
    $("#dialog-form").dialog("open");
} 
```

另一件需要考虑的事情是[`$.Deferred`](http://api.jquery.com/category/deferred-object/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:29:58.473

我有一个例子给你：

```
$(".selector").click(function () {
        var dialog = $('<div title="Title"></div>').dialog({
            open: function (event, ui) {
                $.ajax({
                    url: 'www.google.com.br',

                    cache: false,
                    success: function (html) {
                        $(dialog).html(html);
                    },
                    error: function () {
                        $(dialog).remove();
                        alert("Some Error MSG");
                    }
                });
            },
            close: function () {
                $(dialog).remove();
            },
            resizable: false,
            width: 500,
            modal: true
        });
    }); 
```

在这种情况下，对话框仅在打开后才接收 HTML 结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-30T14:24:06.993

这可以通过以下方式实现：-

```
$('#mydialog').dialog("open");
$('#mydialog').load('serverURL',server_data_variable, function() {
    myfunction();
}); 
```

这将在对话框加载完成后执行该函数。它将注册要在对话框完成后执行的回调。变量**server_data_variable**是可选的，并且应该仅在用户想要发送一些数据时使用，否则可以跳过它。出色地。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-22T13:53:20.860

解决方案 1：（与 Aaron Blenkush 的解决方案相同）

```
$("#dialog-form").dialog({
    autoOpen: false,
    height: 300,
    width: 350,
    modal: true,
    buttons: {
        "Add": function () {
            $("#tag1").text($("#textArea").val());
            $(this).dialog("close");
            //statement1 -- will fire only if "add" button is clicked
        },
        Cancel: function () {
            $(this).dialog("close");
        }
    },
    close: function () {
        $("#textArea").val("");
        //statement1 -- will fire after dialog is closed
    }
}); 
```

解决方案2是做出承诺：

```
const dialogPromise = new Promise(function (resolve, reject) {
    $("#dialog-form").dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        buttons: {
            "Add": function () {
                $("#tag1").text($("#textArea").val());
                $(this).dialog("close");
                resolve(true);
            },
            Cancel: function () {
                $(this).dialog("close");
                resolve(false);
            }
        },
        close: function () {
            $("#textArea").val("");
        }
    });
});
const addClicked = await dialogPromise; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-26T18:03:43.757

在对话框设置中的“open”子句之后调用回调函数。

```
 modal: true,
 resizable: false,
 resize: 'auto',
 close: dialogCloseFunction,
 **open: function(){if(itemid) {showDailogSides(itemid);}** if(!siteParams[3]) {$(".detailSideClass").hide(); $(".addToChartinDialog").hide();}},
 //hide: {effect: "fadeOut", duration: 5000}
 show: { effect: "fade", duration: 1000 } //drop blind fade fold slide clip 
```

# javascript - 检测 Google Static StreetView API 图像的可用性

> ID：15484959
> 
> 赞同：1
> 
> 时间：2013-03-18T19:12:51.393
> 
> 标签：javascript, google-maps-api-3

我知道至少有几个这样的问题

[检测谷歌地图街景静态图像的“我们没有图像”](https://stackoverflow.com/questions/7839746/detecting-we-have-no-imagery-of-google-maps-street-view-static-images)

[我如何判断 Google 的 Streetview Image API 是否返回“抱歉，我们这里没有图像”（即 NULL）结果？](https://stackoverflow.com/questions/9795533/how-can-i-tell-if-googles-streetview-image-api-returns-sorry-we-have-no-image)

这些文章提供了几个解决方案。我在这里和通过谷歌搜索看到的最受欢迎的两个是：

1.  检测图像的大小以确定您是否从谷歌静态图像 API 获得“好”图像
2.  调用 getPanoramaByLocation 服务以确定某个位置是否可以使用街景

不幸的是，我不想使用第一个解决方案，因为它感觉像是 hack，而第二个解决方案似乎并不总是有效。

```
 var center = new google.maps.LatLng(latitude, longitude);
  var streetViewService = new google.maps.StreetViewService();
  var maxDistanceFromCenter = 75; //meters
  streetViewService.getPanoramaByLocation(center, maxDistanceFromCenter, function (streetViewPanoramaData, status) {
      if (status === google.maps.StreetViewStatus.OK) {
        var key = /**smarty** #mapKey# **smarty**/;
        var url = 'http://maps.googleapis.com/maps/api/streetview?size=320x320&location=' + latitude + ',%20' + longitude + '&sensor=false&key=' + key;
        jQuery('.ui-page-active .streetView').attr('src', url);
      } else {
        console.log('error calling street view');
      }
  });
}; 
```

此代码将正确确定全景图像是否可用于某个位置，但有时静态图像不适用于该完全相同的位置。

我的 getPanoramaByLocation 半径从 100 开始，这似乎是一个安全的数字，但后来我发现出现“抱歉，我们这里没有图像”错误的情况。所以我去了75，现在我必须去50。

似乎 getPanoramaByLocation 不是静态街景图像可用的安全指标，或者可能是，但应该使用半径的特定值。我在文档中找不到它。所以我的问题是：我的 maxDistanceFromCenter 使用的最安全半径是多少？

# c# - TCP 连接断开时丢失数据

> ID：15484963
> 
> 赞同：2
> 
> 时间：2013-03-18T19:12:57.517
> 
> 标签：c#, tcpclient

场景是我通过家庭网络上的 TCP 将数据从一台机器传输到另一台机器。发送方实例化 a`TCPClient`并将数据写入`NetworkStream`返回的`GetStream()`. 我的理解是，数据`NetworkStream`最终会发送到网卡上的缓冲区，并通过物理介质传输。

但是，如果连接中断，则`MemoryStream`NICs 缓冲区中的数据和数据将丢失，但在我的应用程序中，数据被写入流中，我可以天真地假设数据被发送到侦听套接字，但显然不是这样。一旦重新建立连接，应用程序将继续发送数据，据其所知，传输被中断，但这并没有考虑到 NIC 缓冲区和`MemoryStream`对象中丢失的数据。

除了编写我自己的应用层协议之外，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:19:16.890

让我们假设写入套接字的数据可以保证到达。这意味着 TCP 堆栈必须*在每个数据包后*等待确认。

显然，这不是它的工作方式。

TCP 不保证到达，除非您已成功关闭连接。只有这样你才知道一切都收到了。

您可能需要在应用层建立恢复协议。询问对方你在第一次连接中走了多远。

评论中的大量讨论使我得到以下澄清：如果连接中断，发送方无法可靠地知道对方收到了多少字节。他将可靠地知道*不是*所有的东西都收到了，但不是*什么*都收到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:26:11.703

有几个选项。一种方法可能是在`NetworkStream`每批数据写入后手动将数据刷新到您的管道中。

虽然这可能被视为性能问题，但根据您的应用程序类型，这将是最容错的方法。通过手动调用`.Flush()`，您将知道数据是否成功通过管道发送。

如果您从您`MemoryStream`的中批量执行此`NetworkStream`操作，您可以存储“最后写入的字节”，并能够将它们放回您的`MemoryStream`中，以便在重新建立连接时重新尝试。

另一种选择是实现您自己的协议，在连接后立即向客户端发送服务器迄今为止收到的字节数（即自上次连接以来）。当你有这些信息时，你可以清除你的前 X 个字节`MemoryStream`（已经发送的那些），并继续下推其余的数据。

您可以做的最后一件事，这可能是最好的方法，就是将两者结合起来。基本上实现一个发送/确认协议。这意味着，您将发送一大块数据，并等待服务器发回 ACK/OK。当它收到时，您可以确定服务器已收到此数据，但如果没有，您可以继续重试，直到收到该 ACK。

# angularjs - 服务返回意外结果，承诺被忽略

> ID：15484965
> 
> 赞同：2
> 
> 时间：2013-03-18T19:13:08.900
> 
> 标签：angularjs

服务返回`data`（原始的 $http 响应）而不是`result`（我想传回控制器的处理后的版本），为什么里面的代码`promise`被忽略了？

```
///in controller
Romanize.get($scope.currentMaterial).then(function(d){
    $scope.romanized = d;
});

//service
app.factory('Romanize', ['$http', 'Position', function($http, Position){
    return{
      get: function(query){
            var url= Position.sections[Position.sectionNumber].romanizeService + "?korean=" + query;
            var promise = $http.get(url).success(function(data) {
                var parts = $(data).find("span");
                var array = [];
                for (var x = 0; x<parts.length; x++){
                    array.push(parts[x].title);
                }
                var result = array.join("");
                return result;
            });
            return promise;
        }
    };
}]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:28:43.227

`success`处理程序不提供链。你应该使用`then`：

```
var promise = $http.get(url).then(function(data) {
  var parts = $(data).find("span");
  // ...
  return result;
}); 
```

# sharepoint - 使用 C# 枚举 SharePoint 2010 组

> ID：15484971
> 
> 赞同：1
> 
> 时间：2013-03-18T19:13:21.653
> 
> 标签：sharepoint, sharepoint-2010

我想使用 Visual Studio 2010 和 C# 枚举我的 SharePoint 2010 网站中的所有组。除非绝对必要，否则我不想创建任何需要部署的东西。有没有办法，基本上，连接到 SharePoint 实例并在不部署任何东西的情况下为组和其他对象询问它？

请不要使用 PowerShell 脚本进行响应。我想使用 Visual Studio 和 C# 来做到这一点。

谢谢，
道格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:51:41.537

使用 SharePoint 2010 客户端对象模型（2010 和 2013），您可以编写如下内容：

```
static void Main(string[] args)
{
    var ctx = new ClientContext("http://server");
    ctx.Credentials = new System.Net.NetworkCredential("username", "password", "domain");

    ctx.Load(ctx.Web.SiteGroups);
    ctx.ExecuteQuery();

    foreach (Group g in ctx.Web.SiteGroups)
    {
        Console.WriteLine(g.LoginName);
    }
} 
```

# unix - 运行 unix 'at' 作业时出错

> ID：15484973
> 
> 赞同：0
> 
> 时间：2013-03-18T19:13:38.670
> 
> 标签：unix, while-loop, at-job

代码是：

```
at -k $wval <<ENDMARKER

while [[ -s Usr_List ]]; do
    for i in $(cat Usr_List); do
        if finger -m | grep $i; then
            echo "$i is online" | elm $mval
            sed "/$i/d" <Usr_List >tmplist
            mv tmplist Usr_List
        fi
     done
done

ENDMARKER 
```

从实际工作来看，它是

```
while [[ -s Usr_List ]]; do
    for i in jim
joe 
tim; do
        if finger -m |grep ; then
            echo " is online" | elm jack
            sed "//d" <Usr_List >tmplist
            mv tmplist Usr_List
        fi
     done
done 
```

jim joe 和 tim 是列表 Usr_List 上的名称

似乎 cat Usr_List 和 $i 是问题，但我不知道如何解决这个问题。

谢谢

编辑： at 工作发送一封电子邮件，说 jim 出乎意料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T19:37:48.237

# 发生了什么

问题是当您输入 at 命令时，您的 here-doc 中的行正在被扩展。这意味着外壳扩展`$(cat Usr_List)`为：

```
jim
joe
tim 
```

并且它扩展`$i`为空字符串，因为它尚未定义。

# 你想发生什么

您真的希望在`at`命令触发时扩展这些变量，而不是在您告诉`at`命令要做什么时。

# 如何修复它

为了防止 shell 扩展 here-doc 中的变量，您可以简单地在开头引用分隔符。所以，改变你的第一行：

```
at -k $wval <<ENDMARKER 
```

至

```
at -k $wval <<"ENDMARKER" 
```

它会很好用。

## 顺便，

我很好奇，因为我的`at`命令没有`-k`选项——那应该做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:52:29.443

检查`man at`，特别是关于“....稍后执行，使用 /bin/sh.”的部分。您显示的脚本是有效的`bash`，但根据`/bin/sh`您系统上的内容，可能不是有效的语法。

# c# - 使用集合时如何删除 ListView 中的元素？

> ID：15484976
> 
> 赞同：0
> 
> 时间：2013-03-18T19:13:42.257
> 
> 标签：c#, mvvm, windows-8, visual-studio-2012, windows-store-apps

我需要使用删除按钮删除 ListView 中的选定元素。ListView 正在使用数据集合和 Web 服务填充，以从数据库中获取数据。我也在使用 MVVM。

这是按钮的点击事件：

```
private void Click_Button_Delete(object sender, RoutedEventArgs e)
{
   Collection3VM.DinamicSummary.Remove(Collection3VM.DinamicSummary.---);
} 
```

其中 Collection3VM 是在 xaml 代码中命名的 ViewModel 的资源引用，而 DinamicSummary 是在 ViewModel 中创建的属性。什么命令或者我应该在 --- 所在的地方使用什么命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:32:49.833

您没有以正确的 MVVM 方式进行操作。您可以在视图模型中声明一个属性，其类型等于集合项的类型，然后在您的 xaml 和 ListBox 元素中，您可以执行以下操作：

```
SelectedItem = {Binding Path=TheNameOfThePropertyYouChoseInYourViewModel,
Mode=OneWayToSource} 
```

然后将删除按钮与同一视图模型上的命令相关联，然后单击该按钮，然后您可以在视图模型中执行以下操作：

```
var selectedItem = TheNameOfThePropertyYouChoseInYourViewModel; 
yourCollection.Remove(selectedItem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:16:37.917

*DinamicSummary*应该是 ObservableCollection 类型。

# c# - 托管在 WPF 应用程序上的 Winforms 应用程序

> ID：15484980
> 
> 赞同：0
> 
> 时间：2013-03-18T19:14:05.327
> 
> 标签：c#, wpf, winforms

我需要在 WPF 应用程序上托管一个 WinForms 应用程序。我按照[此处](http://www.codeproject.com/Articles/31429/Embedding-a-NET-WinForms-Application-in-an-Interne)的步骤操作，但出现错误：

> System.Reflection.TargetInvocationException 未处理 消息：Se produjo una excepción en el destino de la invocación。

怎么了？我正在使用 VS2012 和 .NET 4.5。WinForms 应用程序只是一个`Form`带有`Button`. 事件单击显示`MessageBox`一条消息仅此`Hello World`而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:24:13.663

我以前使用过 WindowsFormsIntegration.dll，它工作正常。这应该可以帮助您入门。首先添加对 WindowsFormsIntegration 的引用。然后...

```
using System.Windows.Forms.Integration; 
```

...

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        var form = new Form1();
        form.TopLevel = false;

        WindowsFormsHost host = new WindowsFormsHost();
        host.Child = form;
        host.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        host.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;

        grid.Children.Add(host);
    } 
```

...

```
<Window x:Class="WpfSandbox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        Loaded="Window_Loaded">
    <Grid x:Name="grid">
    </Grid>
</Window> 
```

现在是简单的winform

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show("hello");
    }
} 
```

# openssh - openssh 客户端的 GSS 身份验证（Scientific Linux）

> ID：15484982
> 
> 赞同：1
> 
> 时间：2013-03-18T19:14:16.620
> 
> 标签：openssh

手头的任务是寻找从 Linux 客户端（Scietific **Linux** 6.1）到 HyperV 服务器的身份验证机制。我正在使用 openwsman 建立连接；似乎 openwsman 不支持 kerbose/gssapi，因为内部使用的 openssl/openssh 不支持该协议。

谷歌搜索 GSS 和 openssh 支持，我找到了一个由 Simon Wilkinson 维护的 git 项目（[https://github.com/SimonWilkinson/gss-openssh](https://github.com/SimonWilkinson/gss-openssh)）以及一个维护针对 openssh 版本的补丁的网页（[http://www .sxw.org.uk/computing/patches/openssh.html](http://www.sxw.org.uk/computing/patches/openssh.html)）。但是这两个项目都是基于 OpenBSD 平台的。

有没有人为 linux 移植了这个更改？或者任何其他机制让 GSS 身份验证在 Linux 上运行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:24:52.773

[http://grid.ncsa.illinois.edu/ssh](http://grid.ncsa.illinois.edu/ssh)包含 GSS 协议的端口，并且似乎很好地维护了针对 openssh 的 pacthes。

# android - 如何从 sdcard 路径在 ImageView 上使用 Imageloader 显示图像？

> ID：15484983
> 
> 赞同：0
> 
> 时间：2013-03-18T19:14:19.453
> 
> 标签：android

我已经从 URL 下载了 sdcard 中的所有图像。现在我想使用 ImageLoader 在 GridView 中显示图像，但我无法做到这一点。

我的图像 sdcard 路径如：/mnt/sdcard/DPImages/image_product3.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:44:19.410

```
private String[] mFileStrings;
private File[] listFile;   

public void getFromSdcard()
{
   File file= new File(android.os.Environment.getExternalStorageDirectory(),"DPImages");//sdcard/DpImages

        if (file.isDirectory())//if files is directory
        {
            listFile = file.listFiles();
            mFileStrings = new String[listFile.length];

            for (int i = 0; i < listFile.length; i++)
            {
                mFileStrings[i] = listFile[i].getAbsolutePath();//mFileStrings with uri of images

            }
        }
} 
```

您可以使用 mFileStrings 在 gridview 中显示图像。

在您的适配器的 getView 中。

```
 ImageView image=(ImageView)convertView.findViewById(R.id.imageview);
        Bitmap b = BitmapFactory.decodeFile(mFileStrings[position]);
        image.setImageBitmap(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:22:14.010

我正在使用通用图像下载器。

您可以使用以下方式显示图像：

```
String imageUri = "file:///mnt/sdcard/image.png"; // from SD card

imageLoader.displayImage(imageUri, imageView); 
```

链接是这个。[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# html - 选择器：nth- child 没有休息？

> ID：15484989
> 
> 赞同：0
> 
> 时间：2013-03-18T19:14:36.330
> 
> 标签：html, css, css-selectors

我有这个示例 html 代码。

```
<table>
    <tbody>
        <tr class="test"><td>Test</td></tr>
        <tr><td></td></tr>
        <tr class="test"><td>Test</td></tr>
        <tr class="test"><td>Test</td></tr>
    </tbody>
</table> 
```

我的CSS代码如下：

```
table tbody tr.test:nth-child(2n+1) {
    background-color: #ff00ff;
} 
```

输出是错误的:(

**似乎与没有类的 tr 有一个休息。** **为什么！？**

看看[jsfiddle.net：http://jsfiddle.net/Bubelbub/rFddk/](http://jsfiddle.net/Bubelbub/rFddk/)

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:16:55.320

不，相反，`tr`with no class 不会影响`:nth-child()`：从这个意义上说，它永远不会被“破坏”。如果这个元素是其父元素的第 n 个子元素，那么它就是第 n 个子元素，无论它有/没有什么类或者它是什么元素类型等等。`.test`选择器中的存在仅仅意味着“这个元素必须有要匹配的类”。由于该元素没有类，因此不会应用规则，就这么简单。

# c# - Visual Express 2012 C# 快速信息完整描述缺失

> ID：15484991
> 
> 赞同：0
> 
> 时间：2013-03-18T19:14:38.880
> 
> 标签：c#, visual-studio, visual-studio-2012

我在 Visual C# 中查看 Quick Info 的每个地方看起来都像这样：

![MS 网站的屏幕](../Images/6e0f877f964acb1712b16dedc14a9f91.png)

然而**我的**快速信息框只显示名称/声明，**没有任何描述**。

![我的截图](../Images/7728e4d7bfea5a7afee73529eb8a161b.png)

是否从 C# Express 版本中删除了更长的描述？还是我做错了什么？如果有帮助，我正在按预期工作的 XML 注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:23:51.447

这取决于您选择的特定框架目标和类型。但对于 4.5 桌面应用程序，此信息来自 .xml 文件，C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\mscorlib.xml。该文件的相关部分是：

```
 <member name="T:System.DateTime">
     <summary>Represents an instant in time, typically expressed as a date and time of day. </summary>
     <filterpriority>1</filterpriority>
   </member> 
```

因此，请检查该文件是否存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T22:01:47.347

谢谢[亚历克斯](https://stackoverflow.com/users/258737/alex)，谢谢[汉斯](https://stackoverflow.com/users/17034/hans-passant)。您的两个答案都使我找到了解决方案。也感谢您像您一样快速回答。

**解决之道**（可能对某些人有用，如果不是跳到解决方案）**。**

汉斯提到的文件确实存在。它也适用于 4.0 版。我还尝试安装 Visual Express 的文档（根据 alex 的提示），结果发现 Visual Express 2012 安装程序在安装过程中没有任何选项（至少不是那种）。

C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework 也包含 v3.5 文件夹，但只有一个 Profile 文件夹，没有 mscorlib.xml（或 v4.5 和 v4.0 具有的其他文件） .

当我发现 Unity3d 使用相当于 .Net 3.5 的 Mono 并且在项目设置中我发现它是为 .Net 3.5 设置的（如果有人想知道 - Visual Studio 仅用于编码，Unity 编译所有内容）时，我意识到了这一点。

经过几个小时的搜索，我确实找到了 .Net 3.5 的“文档”。

**解决方案**

需要的是[适用于 Windows 7 和 .NET Framework 3.5 SP1 的 Microsoft Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=3138)。安装过程中唯一需要检查的是开发者工具->Windows 开发工具->.NET 开发工具。我项目中所有 C# 函数的快速信息现在都可以正确显示了！

注意：后来我试图为 .Net 3.5 找到 mscorlib.xml，但没有运气，所以我不知道 .Net 3.5 的 XML 文档保存在哪里或以什么格式保存，但只要它有效，我就很高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:21:04.957

更有可能的是，文档从快速版本中删除以减少下载大小。您是否使用可视化 C# 安装了文档？

# c# - 从表中读取二进制数据

> ID：15484995
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:14:48.517
> 
> 标签：c#, sql, postgresql-9.2

我有 PostgreSQL 9.2，有这张表：

```
CREATE TABLE "Task"
(
  "taskID" serial NOT NULL,
  "taskType" text NOT NULL,
  "taskComment" text NOT NULL,
  "taskDate" date NOT NULL,
  "taskeImage" bytea,
  CONSTRAINT "Task_pkey" PRIMARY KEY ("taskID")
) 
```

该表已被记录填充。我只想阅读`taskeImage`并在`pictureBox1`.

这是我的尝试：

```
//some initial code goes here
NpgsqlDataReader dr = command.ExecuteReader();
dr.Read();
pictureBox1.Image=dr[4];
conn.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:40:47.293

`PictureBox.Image`是 Image 类型，`dr[4]`可能会返回一个`byte[]`. 您需要从原样创建图像`byte []`：

```
using (MemoryStream ms = new MemoryStream((byte[])dr[4]))
{
    pictureBox1.Image= Image.FromStream(ms);
} 
```

# python - 如何在 Python 中转义 ssh 引用的 shell 命令

> ID：15484997
> 
> 赞同：0
> 
> 时间：2013-03-18T19:14:57.493
> 
> 标签：python, shell, ssh, escaping

我正在尝试编写一个函数，该函数将通过 ssh 和 Popen 发出命令并返回输出。

```
def remote(cmd):
    escaped = escape(cmd)
    return subprocess.Popen(escaped, ...).communicate()[0] 
```

我的麻烦是如何实现该`escape`功能。有没有为此提供帮助的 Python 模块（2.6）？谷歌显示有`pipes.quote`，`re.escape`但它们似乎只适用于本地运行的命令。将命令传递给 ssh，似乎转义需要更加严格：

例如在本地机器上，这是可以的：

```
echo $(hostname) 
```

传递给 ssh 时，它必须是：

```
ssh server "echo \$(hostname)" 
```

此外，双引号可以根据上下文以不同的方式解释。对于文字引号，您需要以下内容：

```
ssh a4ipe511 "echo \\\"hello\\\"" 
```

为了进行变量扩展，还使用了双引号：

```
ssh a4ipe511 "echo \"\$(hostname)\"" 
```

如您所见，转义进入 SSH 的命令的规则可能会非常复杂。由于这个函数会被任何人调用，恐怕一些复杂的命令会导致函数返回不正确的输出。

这是可以通过内置 Python 模块解决的问题，还是我需要自己实现转义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:47:31.040

第一的：

`pipes.quote`与`re.escape`本地运行的命令无关。他们只是转换一个字符串；在那之后你用它做什么是你的事。因此，无论是 - 特别是`pipes.quote`- 都适合您想要的。

第二：

如果您想`echo $(hostname)`在远程主机上使用运行命令`ssh`，则无需担心 shell 转义，因为`subprocess.Popen`默认情况下不会将您的命令传递到 shell。因此，例如，这很好用：

```
>>> import subprocess
>>> subprocess.call([ 'ssh', 'localhost', 'echo $(hostname)'])
myhost.example.com
0 
```

双引号也可以正常工作：

```
>>> subprocess.call([ 'ssh', 'localhost', 'echo "one   two"; echo three'])
one   two
three
0 
```

我不清楚你是否真的有问题。

# python - 如何制作一组缩放的随机数字

> ID：15484998
> 
> 赞同：1
> 
> 时间：2013-03-18T19:14:59.067
> 
> 标签：python, numpy

```
import numpy as np
np.random.random(X) #where x is a positive integer 
```

这给了我一个区间 (0, 1) 上的 X 数字数组。但是，我希望数字在区间 (-1 , 1) 上，并且我不知道如何在 numpy. 我怎样才能仅使用 numpy 非常简单地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:25:50.420

你可以简单地使用`np.random.uniform`：

```
>>> import numpy as np
>>> np.random.uniform(-1, 1, size=5)
array([-0.32235009, -0.8347222 , -0.83968268,  0.78546736,  0.399747  ]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:17:32.010

将随机值乘以 2，然后减去 1。这会产生 -1 到 1 范围内的随机值。