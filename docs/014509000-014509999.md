# StackOverflow 问答 14509000-14509999

# html - 粘贴多行的快捷方式 - Sublime Text 2

> ID：14509001
> 
> 赞同：2
> 
> 时间：2013-01-24T19:16:43.650
> 
> 标签：html, list, tags, sublimetext2, shortcut

我正在使用 Windows 8 操作系统

我有一些项目，我在不同类型的元素中反复添加相同的标签，但通过代码呈现元素的格式始终保持不变。我正在寻找可以帮助我快速完成这些任务的捷径。是否有快捷方式可让您为指定的多行添加相同的标签？我知道您可以 (CTR + F3) 选择克隆标签并更改所有标签，但我想将标签添加到以前没有标签的元素中。有没有一种方法可以为您的标签创建自己的快捷方式，例如如果我输入“li”它会自动输入“”，我所要做的就是按 Enter 键？

这是我添加的元素和标签的示例：

```
<ul>
<li type="square">Extra Grip
<li type="square">Made of Titanium
<li type="square">Built in Selsoft Processor
<li type="square">Portable</ul>

<b>MBS:</b> 44 kN (10000 lbf)<br>
<b>Weight:</b> 1 lbs 13.2 oz (828 g)<br>
<b>Length:</b> 14.40" (36.6 cm)<br>
<b>Width:</b> 3.75" (9.5 cm)<br>
<b>Height:</b> 1.00" (2.5 cm)<br>
<b>Material:</b> Titanium 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:18:48.457

如果您不选择任何内容，Ctrl+C、Ctrl+X 和 Ctrl+V 可让您复制/剪切/粘贴行。因此，Ctrl+X 不会“删除”一行，而是将其剪切。要删除一行，默认快捷键是 Ctrl+Shift+K :)

突出显示一堆行然后按 Cmd (Ctrl?) +Shift+L 会在每一行上为您提供多光标。我这样做，然后是 Cmd + 右箭头（结束？），以便在一系列行的末尾轻松获得一个光标，以便在每行之后同时输入一些内容。

Ctrl+Shift+J 将选择扩展到当前行的缩进级别。因此，如果您想选择具有相同缩进的代码块，它真的很有用。

Alt + F3 选择当前单词的所有出现以进行多次编辑。很有用。

一些写得更详细：[http ://whiletruecode.com/post/7-handy-text-manipulation-tricks-sublime-text-2](http://whiletruecode.com/post/7-handy-text-manipulation-tricks-sublime-text-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:06:43.637

您是否尝试过制作自己的片段？这可能不是您所要求的，但可能是另一种方法。

**在Tools** -menu 中尝试**New Snippet**命令并添加以下内容并保存：

 **```
<snippet>
    <content><![CDATA[
<li type="square">${1:Item} ${2:}
]]></content>
    <tabTrigger>li</tabTrigger>
</snippet> 
```

如果您键入然后按，这将`<li>`在当前文件中输入一个-tag 。您还可以添加标签以将其限制为 HTML 文件。`li``Tab``<scope>`**

# jquery - Eventbrite Api event_search 调用破坏了我们的场地

> ID：14509008
> 
> 赞同：0
> 
> 时间：2013-01-24T19:17:11.123
> 
> 标签：jquery, api, corrupt, eventbrite

一段时间以来，我们一直在使用 eventbrite 在各种场所举办研讨会。

最近我使用了一个 jquery Api lib 来使用 event_search Api 检索事件列表。这一切似乎都奏效了，但我注意到我们的活动列表现在都有一个默认地点。

输入事件的我的同事确定是 Api 调用在执行此操作，尽管以编程方式我无法看到它到底是怎样的，因为它只是检索数据而不改变任何东西。

有一段时间我没有使用 Api，但最近再次使用时，我发现所有研讨会场地都再次损坏。我的感觉只是我碰巧看了，他们已经有一段时间了，没有人检查过，但是我的同事指责 Api 和我的代码，很难解释为什么这不太可能。

也许我错了，但它是 Api。欢迎大家发表意见？

我唯一做的另一件事是使用与我的同事相同的登录名将研讨会从私人更改为公共，我想知道他当时是否正在编辑研讨会，如果这会有所作为。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:51:27.330

查看[Eventbrite API event_search](http://developer.eventbrite.com/doc/events/event_search/)文档，我同意您的评估。对 event_search 执行 GET 请求不应更改任何数据，而应仅检索它。

如果您有两个人使用可以访问相同数据的帐户（Eventbrite 有一个多用户访问系统），一个人可能会意外覆盖。

在不了解情况的情况下，我只能说，如果您确定 Eventbrite 有问题，他们的[支持](http://www.eventbrite.com/contact-us)通常会非常积极。

# java - 通过 IMDB API 对电影进行评级

> ID：14509009
> 
> 赞同：1
> 
> 时间：2013-01-24T19:17:13.957
> 
> 标签：java, json, api, imdb

我想用我的 Java 代码评价一部电影，但我不知道是否可以这样做。我可以使用 JSON 下载电影数据和一些东西，但我想这样做。你知道任何非官方的 API 或其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:26:55.300

据我所知，IMDB 甚至没有官方 API。

但如果你想尝试让用户给电影评分，还有另一种选择。您可以查看[TMDB](http://www.themoviedb.org/)（[此处为 API](http://docs.themoviedb.apiary.io/)）。

# php - 从 Python (kivy) 接收消息

> ID：14509013
> 
> 赞同：0
> 
> 时间：2013-01-24T19:17:29.177
> 
> 标签：php, database

我已经设置了一个 MySQL 服务器，我的特定设置需要使用 PHP 作为我的 Python 程序（kivy 应用程序）和 MySQL 服务器之间的中间人。

**我确实知道**如何从我的应用程序向服务器发送消息。
**我也知道**如何通过 MySQL 使用 PHP（感谢[http://www.freewebmasterhelp.com/tutorials/phpmysql/1](http://www.freewebmasterhelp.com/tutorials/phpmysql/1)）。
**我不知道的是 PHP 如何接收消息（来自任意数量的客户端）并使用里面的数据。**

因此，假设我刚刚将“Thomas, 29, England”从 Python 发送到 PHP。如何让 PHP 使用这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T18:44:46.640

我会尝试将 PHP 放入 HTTP 服务器，如 Apache 或 Nginx，而不是使用一些 Python Web 客户端，如[requests](http://docs.python-requests.org/en/latest/)，将 HTTP GET 或 HTTP POST 发送到 PHP 服务器，这可以通过[$_GET](http://www.w3schools.com/php/php_get.asp)或[$_POST](http://www.w3schools.com/php/php_post.asp)获取数据变量。比从这个 PHP 服务器做任何你需要的事情。

（假设您希望 Python 和 PHP 通过 TCP/IP 网络进行通信，无论是否本地）

# jquery - jQuery live and prop and change

> ID：14509014
> 
> 赞同：3
> 
> 时间：2013-01-24T19:17:30.613
> 
> 标签：jquery, prop

当多个复选框中的任何一个的“已选中”状态发生更改时，我需要触发一个事件，并且*不要通过监听 click*来执行此操作。为什么？

它看起来像这样：

```
 BUILD YOUR SUNDAE!
    All Flavors []     Chocolate [ ]   Vanilla [ ] Strawberry [ ]  Pistacchio [ ] 
```

单击 All Flavors 时，所有其他复选框都设置为选中：

```
function checkAllFlavors() {
   $("#flavorFilterContainer input.flavor-filter").each(function (i, elem) {
       $(elem).prop('checked', true);
   });
 } 
```

上面的功能明显有效——所有的复选框都被选中。但是，如果我像这样监听状态变化：

```
 ("#flavorFilterContainer input.flavor-filter").live('change', function () {
           DispenseFlavor()
      }); 
```

DispenseFlavor() 方法*仅在我物理单击复选框*时调用，而不是在 checkAllFlavors() 函数中通过将 checked 属性设置为 true 来更改复选框的选中状态时调用。

复选框的更改状态是否仅通过 GUI 交互而不是通过设置属性来改变`$(elem).prop('checked', true)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:18:49.713

您必须`change`从`checkAllFlavors`函数中手动触发事件：

```
function checkAllFlavors () {
   $('#flavorFilterContainer input.flavor-filter').prop('checked', true).change();
} 
```

顺便说一句，您应该缓存该选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T12:14:36.863

[我从jQuery 论坛](http://forum.jquery.com/topic/should-chk-prop-checked-true-trigger-change-event)找到了这个答案：

```
$.propHooks.checked = {
  set: function(elem, value, name) {
    var ret = (elem[ name ] = value);
    $(elem).trigger("change");
    return ret;
  }
}; 
```

此解决方案是一个自定义处理程序，用于通过“prop”方法对“checked”进行更改。此处理程序根据需要触发更改事件，但您不必手动指定它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:33:01.463

检查[http://jsfiddle.net/nGQKw/7/](http://jsfiddle.net/nGQKw/7/)上的示例希望它能解决您的问题。实际上，您必须`trigger` `change`在`checkAllFlavors()`

# ios - 表格单元格滚动超过表格边界 iphone ipad

> ID：14509018
> 
> 赞同：1
> 
> 时间：2013-01-24T19:17:52.810
> 
> 标签：ios, uitableview, cell, boundary

我到处搜索，但没有找到任何答案，甚至没有找到这样的问题。我有一个 UITableView。当我加载表格时，一切似乎都很好。但是，当我开始垂直滚动时，单元格会越过表格顶部和底部的表格边界。对于顶部单元格，只有在单元格*底部*到达表格顶部时，它才会从屏幕上消失。同样的事情发生在桌子的底部。见下图。这发生在 iPhone 和 iPad 应用程序中。任何帮助将不胜感激！

[![滚动时表格单元格越过表格边界](../Images/5aeaee408a5f5f17742e6eb8fa1fef4d.png)](https://i.stack.imgur.com/iFIqi.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:20:03.933

尝试设置：

```
tableView.clipsToBounds = YES; 
```

# mysql - 从项目主表中不存在字段的表中选择

> ID：14509019
> 
> 赞同：0
> 
> 时间：2013-01-24T19:17:57.050
> 
> 标签：mysql, sql, sql-server, tsql

我在 MSSQL 中有一个项目主表，其中包含与给定 SKU 关联的 SKU 和所有颜色：

```
SKU | Color  
-----------
100 | BLK
100 | GRN
101 | RED
101 | BLU
101 | TAN 
```

然后我有一个结构相似的 MySql 表，但是它有项目主表中不存在的颜色（按 SKU），我需要删除它们。
这是我到目前为止所拥有的（注意我使用 OPENQUERY 来链接这两个表）：

```
SELECT * FROM OPENQUERY(WEB, '
     SELECT SKU, `Filename`, Color
     FROM IP24_Import_Images
') as B
INNER JOIN sap.ItemMasterSkuColor IM
ON B.SKU = IM.Sku
WHERE B.Color NOT IN (
    SELECT Color FROM sap.Item_Master_StyleColor
    WHERE Sku .... 
```

我正在尝试先选择它们。然后我应该能够弄清楚如何从那里删除它们。但是我最终被困在那里..
显然`WHERE B.Color != IM.Color`行不通。`NOT IN ..`如果我能以某种方式从外部查询中获取有问题的 SKU，我上面的方法会起作用。我怎样才能让它正常工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:23:33.353

你为什么不做类似的事情

```
SELECT * 
FROM IP24_Import_Images B
LEFT JOIN sap.ItemMasterSkuColor IM
ON B.SKU = IM.Style AND B.Color = IM.Color
WHERE IM.Color IS NULL 
```

应该给你来自 IM 的所有记录，如果 B.color 不匹配，则为 NULL。

我希望 mySQL 具有与右连接相同的语法，因为这是 MSSQL 语法。

# vb.net - vb .net，简单报告

> ID：14509021
> 
> 赞同：0
> 
> 时间：2013-01-24T19:18:05.807
> 
> 标签：vb.net

我需要在我的 VB .NET 应用程序中进行非常简单的报告，就像过去的 HTML 页面一样：很少有彩色标题、图像、表格和文本。问题是我真的不知道从哪里开始，更确切地说是哪个（报告）工具？我应该挖掘原生 Microsoft 报告工具吗？另一种选择是使用 webbrowser 组件并尝试显示一些内存中生成的页面。

问是因为我使用 MySql 并且我已经编写了程序来以编程方式填充 dgv、组合，所以我没有任何数据源、数据集、数据适配器等。只是执行查询和填充数据表。

感谢您的意见，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:07:06.843

在处理小而简单的报告时，我可以推荐[iTextSharp](http://sourceforge.net/projects/itextsharp/)。我用它来生成一个带有一些标签、文本和图形的基本 .pdf 报告。它对大多数事情来说都很简单而且很有能力。它可免费用于非商业用途。

另外发现了这个[来自 iText 的替代方案，](http://demo.itextsupport.com/xmlworker/?snippetChooser=various)它似乎转换了 Xml-> Pdf。可能也值得一试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:14:16.860

如果您使用的是付费 Visual Studio 软件包之一，则内置报告。我认为它曾经是 Crystal Reports。我不确定这是否在免费工具中可用。

根据您的需要，您还可以使用格式化的数据网格或在数据列表中输出 HTML，这样做的好处是您几乎可以做任何您想做的事情。我可能会走这条路，因为听起来您的报告非常简单，并且使用软件包可能会超出您需要做的事情。

# android - 将 sqlite 导出为 csv

> ID：14509026
> 
> 赞同：5
> 
> 时间：2013-01-24T19:18:48.543
> 
> 标签：android, export-to-csv, filewriter

我试图从我的 sqlite 数据库中获取数据并将其写入 csv 文件并在完成写入后通过电子邮件发送信息。我在数据库中只有一个包含 3 列的表。我有 DBAdapter 和一个具有用户必须按下的按钮的类以便能够导出数据。

这是我尝试过的代码**Exportdata.java**

```
try {
    root = Environment.getExternalStorageDirectory();                   
    Log.i(TAG,"path.." +root.getAbsolutePath());  

    //check sdcard permission  
    if (root.canWrite()) {  
        File fileDir = new File(root.getAbsolutePath()+"/fun/");  
        fileDir.mkdirs();  

        //   Log.d("DATABASE", db.getAllBYname());

        File file= new File(fileDir, "itisfun.csv");  
        FileWriter filewriter = new FileWriter(file);  
        BufferedWriter out = new BufferedWriter(filewriter);  
        out.write("I m enjoying......dude..............."  ); 
        out.close();  
    }  
} catch (IOException e) {  
    Log.e("ERROR:---", "Could not write file to SDCard" + e.getMessage());  
} 
```

这段代码确实在 SDcard 中创建了文件，但问题是我不能让它获取 sqlite 数据库数据并将其写入文件中，如代码所示。我卡住了请帮助我举例或使用正确的解决方案编辑我的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T20:41:04.960

我使用此例程将 SQLite 数据库以 CSV 格式转储到 SD 卡上的文件中：

```
private Boolean backupDatabaseCSV(String outFileName) {
    MyLog.d(TAG, "backupDatabaseCSV");
    Boolean returnCode = false;
    int i = 0;
    String csvHeader = "";
    String csvValues = "";
    for (i = 0; i < GC.CURCOND_COLUMN_NAMES.length; i++) {
        if (csvHeader.length() > 0) {
            csvHeader += ",";
        }
        csvHeader += "\"" + GC.CURCOND_COLUMN_NAMES[i] + "\"";
    }

    csvHeader += "\n";
    MyLog.d(TAG, "header=" + csvHeader);
    dbAdapter.open();
    try {
        File outFile = new File(outFileName);
        FileWriter fileWriter = new FileWriter(outFile);
        BufferedWriter out = new BufferedWriter(fileWriter);
        Cursor cursor = dbAdapter.getAllRows();
        if (cursor != null) {
            out.write(csvHeader);
            while (cursor.moveToNext()) {
                csvValues = Long.toString(cursor.getLong(0)) + ",";
                csvValues += Double.toString(cursor.getDouble(1))
                        + ",";
                csvValues += Double.toString(cursor.getDouble(2))
                        + ",";
                csvValues += "\"" + cursor.getString(3) + "\",";
                csvValues += Double.toString(cursor.getDouble(4))
                        + ",";
                csvValues += Double.toString(cursor.getDouble(5))
                        + ",";
                csvValues += "\"" + cursor.getString(6) + "\",";
                csvValues += Double.toString(cursor.getDouble(7))
                        + ",";
                csvValues += Double.toString(cursor.getDouble(8))
                        + ",";
                csvValues += Double.toString(cursor.getDouble(9))
                        + "\n";
                out.write(csvValues);
            }
            cursor.close();
        }
        out.close();
        returnCode = true;
    } catch (IOException e) {
        returnCode = false;
        MyLog.d(TAG, "IOException: " + e.getMessage());
    }
    dbAdapter.close();
    return returnCode;
} 
```

GC 是我的全局常量类，其中包含表列名。列名用于在 CSV 文件中制作标题行。getAllRows 位于数据库适配器中，并返回表中的所有行。while 转储所有返回的行。长值以逗号分隔，文本值被引用并以逗号分隔。MyLog.d 在测试模式下执行 Log.d，在生产模式下不执行任何操作。dbAdapter 在函数外部定义为全局变量：

```
DatabaseAdapter dbAdapter = null; 
```

它在 onCreate 中初始化为：

```
dbAdapter = new DatabaseAdapter(getApplicationContext()); 
```

dbAdapter 用于活动中的多个功能。如果您全局定义数据库适配器，请确保在使用时将每个 dbAdapter.open() 与 dbAdapter.close() 配对。另外，不要忘记关闭您打开的每个游标。

注意： csvValues 是每个 SQLite 行中返回的列的串联。对于 SQLite 游标中返回的每一行，csvValues 将作为一行写入 CSV 表中。

# iphone - 将 AppController 升级为 AppDelegate 的原因？

> ID：14509028
> 
> 赞同：1
> 
> 时间：2013-01-24T19:18:50.567
> 
> 标签：iphone, ios, ios6, appdelegate

我正在恢复一个旧项目以在 ios 4.3 上工作 - 最新版本 (6.0) 我了解基本级别的 AppDelegate 和 AppController 执行相同的任务。

基本上，AppDelegate 除了名称之外还有其他需要更改的内容吗？

# javascript - 静态网页上的日期更新客户端

> ID：14509029
> 
> 赞同：1
> 
> 时间：2013-01-24T19:18:51.827
> 
> 标签：javascript, jquery, html, date

我目前正在尝试为剧院网站建立一个预订页面，演出日期设置为一周中的特定日期，但全年无限期运行。

我目前令人头疼的任务是创建一个函数，该函数将正确地将显示日期更新为与今天日期最接近的相关数字日期。

所以，从今天开始，我需要它显示 1 月 25 日星期五、1 月 26 日星期六和 1 月 30 日星期三的选项，然后如果明天（2013 年 1 月 25 日星期五）访问，它将把星期五的日期更改为 2 月 1 日（因为那是下周五上映）。

我想这个函数会像这样（在逻辑上）：

```
updateShowDates(function(){
var todaysdate = getDate
var todayWeekday = getDay
var showWeekday = document.getElementByName('datepicker').value
var lengthtotarget = count number of days between todayWeekday and target weekday (i.e. Wednesday)
newShowDate = todaysdate + lengthtotarget
document.getElementByName('datepicker').innerHTML=newShowDate;
}); 
```

这将起作用的元素的 HTML 是：

```
<select id="dateselect" size="3">

<option value="Wednesday" title="Wednesday" name="datepicker">

    Wednesday

</option>

<option value="Friday" title="Friday" name="datepicker">

    Friday

</option>

<option value="Saturday" title="Saturday" name="datepicker">

    Saturday

</option>

</select> 
```

我是一个 Javascript 的菜鸟，不久前我确实找到了一个对此非常有帮助的资源，但是当然，sod's law，我没有为它添加书签并且再也找不到它了。

任何帮助编写工作功能将不胜感激。这是针对大学课程的，当然我正在努力获得尽可能高的分数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:24:48.993

在 JavaScript 中，您可以使用减法运算符计算两个日期之间的差异，这将返回两个日期之间的差异（以秒为单位）。您随后可以使用该`Math.abs`函数来获取差值的绝对值。（实际上，在这种情况下，这不是必需的，因为演出日期总是在未来。）您还可以使用`array.sort`与今天日期的差异来排序日期。

我希望结果可能看起来像这样：我没有实际测试过这段代码，但这是一个有根据的猜测。

```
function getNextShowTime(showTimes) {
    var x, now, soonest, offset;
    now = date;
    offset = Infinity;
    for(x = 0; x < showTimes.length; x++) {
        if (showTimes[x] - now < offset) {
            offset = showTimes[x] - now;
            soonest = showTimes[x];
        }
    }
    return soonest;
} 
```

我提供的功能应该提供最快的演出日期。如果您想查找多个演出日期并按时间顺序对它们进行排序，您将需要使用`array.sort`. 您可能还想排除过去的节目。正如您所说，这是大学课程的练习，我将把这些留给您。

**编辑：**提供的示例代码迭代不同的显示时间。在循环的开头，`soonest`is NULL 和`offset`is `Infinity`。对于每次迭代，将显示时间与当前时间进行比较，并与 进行比较`offset`。如果结果小于`offset`，则将差值分配给`offset`，并将演出时间分配给`soonest`。因此，在循环结束时，`offset`应该是到下一次演出时间的时间量，并且`soonest`应该是演出时间。

# android - Android 搜索对话框始终可见

> ID：14509037
> 
> 赞同：0
> 
> 时间：2013-01-24T19:19:09.647
> 
> 标签：android, android-layout, android-listview, search-dialog

是否可以将搜索对话框固定在应用程序活动的顶部？

我遇到的问题是，如果用户错误地点击了活动中的其他位置，搜索对话框就会关闭，用户必须点击搜索电话按钮。

由于我的示例应用程序是一个搜索应用程序，我希望它始终在我的活动顶部可见。

有没有办法，android API是否允许这样做？

谢谢

使用代码编辑：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        onSearchRequested();

        Intent intent = getIntent();

        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
              String query = intent.getStringExtra(SearchManager.QUERY);

              Log.d("search", query);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    } 
```

活动：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

搜索配置

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
        android:label="@string/app_name" >
</searchable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:42:51.490

由于您控制 Activity 中的其他内容，因此您可以确保没有其他元素是可点击/可聚焦的（搜索字段除外）。

无论如何，如果您向我们展示您遇到问题的实际代码，我们可能会更有帮助。

# actionscript-3 - Actionscript 3：Movieclip 时间线中的声音相互切断

> ID：14509039
> 
> 赞同：0
> 
> 时间：2013-01-24T19:19:15.547
> 
> 标签：actionscript-3, audio

我在 AS3 游戏中遇到了一个奇怪的问题，即声音相互干扰。

游戏世界中的每个敌人都有一个包含其图形和声音的影片剪辑；游戏代码调用 gotoAndPlay() 以播放具有相应声音的特定动画。（影片剪辑是在 Flash 中制作的，并且 .swc 被导入到 Flashdevelop 项目中）

问题是当屏幕上同时出现多个特定类型的敌人时，他们的声音会互相“踩”：如果敌人 A 和 B 属于同一类型，而 A 正在播放一个声音，B 将无法播放该声音 - gotoAndPlay 产生正确的动画，但声音不播放。

同样，如果 A 正在播放循环声音，而 B 播放包含停止声音事件的帧，它将停止 A 的循环。

*似乎很清楚，正在发生的事情是 Flashplayer 只为每个影片剪辑类型*分配一个频道，而不是每个影片剪辑实例，但是谷歌并没有真正向我展示任何东西。

这种情况是否有最佳实践？（即同一影片剪辑的多个实例，其时间轴上有声音+动画）我做错了什么？！

谢谢你的时间。

[编辑]

为了更好地解释我的意思，假设有一个 Baddie 电影剪辑，其中包含几个动画，例如敌人奔跑、蹲伏、跳跃、开枪。

影片剪辑中有两层，一层用于图形（动画），一层用于声音。

在第 20 帧有一个枪口闪光（在动画层上）和相应的枪声（在声音层上）；在第 40 帧有一个跳跃动画和相应的跳跃声音。

我的问题是：如果舞台上同时有两个或多个这样的影片剪辑，其中一个正在播放枪声，其他的就不会播放枪声（他们会虽然仍然正确动画）。

Flashplayer 似乎只为某个影片剪辑的*所有实例分配一个音频通道。*这似乎不是预期的行为，因为它没有用，所以我猜我在嵌入方面搞砸了（也许有一个参数或标志隐藏在某处让我说“给每个实例自己的声音通道“？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:44:47.683

您应该真正使用`Sound()`和相关的类，而不是时间线。我不确定为什么会发生这种情况，这很令人惊讶，因为大概很多非编码人员都会以这种方式控制声音，但是一旦你习惯了它，你就会对声音有更多的控制，而且很漂亮简单的。这个页面很好地解释了你需要的类：

[http://www.republicofcode.com/tutorials/flash/as3sound/](http://www.republicofcode.com/tutorials/flash/as3sound/)

我记得当我开始使用 Flash 并使用时间线时遇到很多声音问题，我的总是会在另一个声音实例开始之前停止前一个声音，一旦我开始以编程方式控制它们我从来没有遇到过问题 - 从表面上看似乎更容易时间线，因为大多数用户很早就学习了播放头控制功能，但它很快就会变得复杂和混乱——用专门的类分离关注点和控制声音要好得多。

希望这可以帮助。

# c - mpirun 没有输出的程序

> ID：14509040
> 
> 赞同：1
> 
> 时间：2013-01-24T19:19:18.107
> 
> 标签：c, mpi, openmpi

我正在做一个 mpi 作业。

我的程序是让用户输入数据列表，我们计算程序在数据库（.csv）中搜索数据所需的时间。

我编写的顺序程序运行良好。它可以允许用户输入然后在csv文件中搜索用户输入并返回所需的时间。

但是当我将 mpi 应用到程序中时，它可以使用 mpicc 进行编译。当我使用 mpirun 运行程序时，它什么也没显示。谁能帮我看看发生了什么？这是 .csv 文件中的示例数据

==================================================== =

managerID,yearID,teamID,lgID,inseason,G,W,L,rank,plyrMgr

wrighha01m,1871,BS1,NA,1,31,20,10,3,Y

woodji01m,1871,CH1,NA,1,28,19,9,2,Y

paborch01m,1871,CL1,NA,1,29,10,19,8,Y

========================================

我的代码

==============================================

```
#include "mpi.h" 
#include <stdio.h> 
#include <stdlib.h>
#include <string.h>     //for string operations : strcpy & strtok
#include <time.h> 

int main( int argc, char *argv[] ) 
{ 

int n, myid, numprocs; 
MPI_Init(&argc,&argv); 
MPI_Comm_size(MPI_COMM_WORLD,&numprocs); 
MPI_Comm_rank(MPI_COMM_WORLD,&myid); 

struct
{
    char managerID[50];
    char yearID[50];
    char teamID[10];
    char lgID[3];
    char inseason[7];
    char G[50];
    char W[50];
    char L[10];
    char rank[3];
    char plyrMgr[7];
}Managers[5000];

time_t start, end;      //variable used for compute time.

//double diff;
int choice;

int dataSize=0;
FILE *fp;
char buf[99999];        //max total array size
int i = 0, j;
fp=fopen("Managers.csv","r");

//ignore the commna delimiters, copy the value into each field's arrays.
 while( fgets(buf,sizeof(buf),fp) != NULL)
{
    strcpy(Managers[i].managerID, strtok(buf,","));
    strcpy(Managers[i].yearID, strtok(NULL,","));
    strcpy(Managers[i].teamID, strtok(NULL,","));
    strcpy(Managers[i].lgID, strtok(NULL,","));
    strcpy(Managers[i].inseason, strtok(NULL,","));
    strcpy(Managers[i].G, strtok(NULL,","));
    strcpy(Managers[i].W, strtok(NULL,","));
    strcpy(Managers[i].L, strtok(NULL,","));
    strcpy(Managers[i].rank, strtok(NULL,","));
    strcpy(Managers[i].plyrMgr, strtok(NULL,","));
    ++i;        //increment array
    dataSize++;     //counter for data size
}

char *s;
char str[5];
if(myid ==0){
    printf("\n\n Please input the data to be retrieved\n");
    printf(" Note : No space is allowed...\n");
    printf(" Sample Query : abc,123,def,321\n");
    printf(" Input =>");
    scanf ("%s", str);
}
MPI_Bcast(str, 1, MPI_CHAR, 0, MPI_COMM_WORLD); // broadcast the information out

 start = clock(); // start the time

s = strtok (str, ",");
printf("\n");

//print header field
printf(" ManagerID");
printf("       YearID");
printf("      TeamID");
printf("      LgID");
printf("      InSeason");
printf("    Game");
printf("        Win");
printf("       Lose");
printf("        Rank");
printf("     PlyrMgr\n\n");

//print all the data
 while (s != NULL)
{
    int k;

    for (k =1; k<=dataSize; k++)
    {
        if(strcmp(s,Managers[k].managerID) == 0)
        {
            printf(" %10s",Managers[k].managerID);
            printf(" %10s",Managers[k].yearID);
            printf(" %10s",Managers[k].teamID);
            printf(" %10s",Managers[k].lgID);
            printf(" %10s",Managers[k].inseason);
            printf(" %10s",Managers[k].G);
            printf(" %10s",Managers[k].W);
            printf(" %10s",Managers[k].L);
            printf(" %10s",Managers[k].rank);
            printf(" %10s",Managers[k].plyrMgr);
        }
    }
    printf("\n");
    s = strtok (NULL, ",");
}

end = clock(); // end time
double diff = (((double)end - (double)start)/1000000.0F) * 1000;

if(myid==0){

    printf(" Time Taken : %.5f seconds \n", diff);
}

MPI_Finalize(); 

} 
```

# profiling - 用于分析目的的 Hive 查询执行和打印

> ID：14509041
> 
> 赞同：0
> 
> 时间：2013-01-24T19:19:22.387
> 
> 标签：profiling, hive

我正在测试 hive 中一些查询的性能，因此应避免将查询结果打印到标准输出或文件。在 oracle sql plus 中，我可以做

```
oracle> SET autotrace traceonly; 
```

或者

```
oracle> set autotrace on statistics; 
```

然后

```
oracle> some query;
oracle> set autotrace trace off; 
```

蜂巢中有等效的语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:13:16.693

您可以只使用 Hive 命令行实用程序的`--silent`or`-S`选项来消除 Hive 日志消息，但这仍会在标准输出上打印查询的输出。为避免这种情况，您可以重定向到`/dev/null`，例如：

```
$ hive -S -e "SELECT * FROM mytable" > /dev/null 
```

# c# - httpResponse.end() 的缓冲输出？

> ID：14509050
> 
> 赞同：4
> 
> 时间：2013-01-24T19:19:45.260
> 
> 标签：c#, asp.net, .net, vb.net

在 .NET 中，`httpResponse.end()`状态描述为“将所有当前缓冲的输出发送到客户端”。谁能给我解释一下这是什么意思？具体什么是“缓冲输出”？我问是因为我被要求替换`httpResponse.end`为`HttpContext.Current.ApplicationInstance.CompleteRequest()`. 当涉及文件时，这会导致问题，所以我猜这句话与它有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:27:03.013

它不会在您将信息写入输出流后立即发送每一个信息，而是将您写入的内容存储在内存中，直到它拥有“足够”的数据，认为值得花时间将其发送给客户端。缓冲区的大小可以根据上下文和缓冲数据的原因而有很大差异。“刷新”缓冲区是处理缓冲区中的所有待处理数据（在这种情况下，处理意味着通过网络将其发送到客户端）。这就是`end`你的情况。

可以出于多种原因进行缓冲，但通常是性能问题。如果您为写入流的每个字符或（在许多情况下）传递给`Write`. 通过发送更少、更大的信息包，应用程序将执行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:26:22.480

缓冲输出是指任何准备好发送到客户端但尚未发送到客户端的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:29:23.570

缓冲输出是您的程序已经生成但尚未转发到其预期目的地的输出。

缓冲在 I/O 操作中大量使用，以避免以小增量发送/写入数据的成本：系统不会在您写入时将输出传递到其目的地，而是在称为“缓冲区”，并且仅在达到一定大小时才发送/写入数据。

缓冲数据有两种方式到达目的地：

1.  输出量达到某个阈值，或
2.  您调用一些方法来显式地“刷新”缓冲区。

`httpResponse.end`就是这样一种方法：它通过将您到目前为止写入的所有内容发送到客户端来清空缓冲区。

# c++ - 如何向 wxWidgets wxBitmapButton 添加标签？

> ID：14509056
> 
> 赞同：3
> 
> 时间：2013-01-24T19:20:04.567
> 
> 标签：c++, visual-c++, user-interface, wxwidgets, wxformbuilder

如何使用具有标签（文本）和图像或图标的 wxWidgets 创建按钮。如果我选择 wxBitmapButton，则会有一个名为“label”的字段。但是，每当我在该字段中编写任何内容时，它都不会更新 wxFormBuilder 中的代码。我也试过 wxButton->SetLabel() 但没有运气。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:46:29.837

您只能在 wxWidgets 2.9.1 或更高版本中执行此操作，并且可以使用 wxBitmapButton 或 wxButton。从[文档](http://docs.wxwidgets.org/trunk/classwx_button.html)中引用：

> 由于 2.9.1 版 wxButton 支持显示文本和图像（当前仅在使用 wxMSW、wxGTK 或 wxOSX/Cocoa 端口时），请参阅 SetBitmap() 和 SetBitmapLabel()、SetBitmapDisabled() 方法。在以前的 wxWidgets 版本中，此功能仅在（现在很简单的）wxBitmapButton 类中可用，该类只能显示没有文本的图像。

# tomcat - 看不到使用 Eclipse IDE 创建的示例 portlet

> ID：14509057
> 
> 赞同：0
> 
> 时间：2013-01-24T19:20:07.477
> 
> 标签：tomcat, liferay, portlet, liferay-6

我正在尝试根据文档部署“sampleMVC”项目测试，但我一直遇到此错误：

```
INFO: Deploying web application directory H:\softwares\workspace\_liferay\liferay-portal-6.1.1-ce-ga2\tomcat-7.0.27\webapps\sampleMVC-portlet
Jan 24, 2013 7:12:04 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/portlet is already defined
Jan 24, 2013 7:12:04 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://alloy.liferay.com/tld/aui is already defined
Jan 24, 2013 7:12:04 PM org.apache.catalina.startup.HostConfig deployDirectory 
```

因此，我无法在 liferay Add->Sample 中看到 Portlet。任何帮助都将不胜感激。我正在使用liferay 6.1 GA2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T17:15:39.563

解决此问题的唯一方法是卸载 liferay，然后重新安装。正如[这里所建议的那样](http://www.liferay.com/community/forums/-/message_boards/message/16869431)。这样做后我也解决了这个问题。

# c# - 通过 SoundCloud 启用 WebAuthenticationBroker

> ID：14509060
> 
> 赞同：2
> 
> 时间：2013-01-24T19:20:10.987
> 
> 标签：c#, windows-runtime, windows-store-apps, soundcloud

为了使用 WebAuthenticationBroker（Microsoft 的 WinRT 登录库），我必须将协议设置为 ms-app://，当我从 Web 浏览器调用它时它可以正常工作。

在 WinRT 应用程序中调用时，通过 WebAuthenticationBroker 我收到协议错误 (422)。

有没有人成功做到这一点？

一些示例代码会非常非常有用:)

这是我们的代码：（当然，我们的密钥替换为---------）

```
 String URL = "https://soundcloud.com/connect?client_id=" + Uri.EscapeDataString("-----------------------------") +
            "&redirect_uri=" + Uri.EscapeDataString("ms-app://rewritez") +
            "&response_type=code&scope=" + Uri.EscapeDataString("non-expiring");

        string url = URL;

        Uri startUri = new Uri(url);
        Uri endUri = new Uri("https://api.soundcloud.com/oauth2/token?");

        try
        {
            WebAuthenticationResult webAuthenticationResult =
                await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.UseTitle, startUri, endUri);

            if (webAuthenticationResult.ResponseStatus == WebAuthenticationStatus.Success)
            {
                string token = webAuthenticationResult.ResponseData;
                // now you have the token
            }
            else if (webAuthenticationResult.ResponseStatus == WebAuthenticationStatus.ErrorHttp)
            {
                // do something when the request failed
            }
            else
            {
                // do something when an unknown error occurred
            }
        }
        catch (Exception ex)
        {
            int i = 43; // statement here just so we can set a breakpoint for debuggin
            // do something when an exception occurred
        } 
```

# asp.net - Ajax 表单视图问题，asp.net mvc 3

> ID：14509070
> 
> 赞同：1
> 
> 时间：2013-01-24T19:20:54.370
> 
> 标签：asp.net, ajax, asp.net-mvc, asp.net-mvc-3

我想在我的表单中添加一些 ajax。这是主要视图：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>

// here I display each post from Posts collection
@foreach (var post in Model.Posts)
{   
<div>
<div>
    <strong>
        Title: @post.Title
    </strong>
</div>
<div>@post.Text</div>
<div>Posted by: @post.User.UserName</div>
<div>Posted Date: @post.CreatedDate</div>

@{ var membershipUser = Membership.GetUser(); }
@if (membershipUser != null)
{
    var providerUserKey = membershipUser.ProviderUserKey;
    if (providerUserKey != null && post.CreatedBy == (Guid) providerUserKey)
    {
        <div style="display: none; color: red;" id="postEditLoading">Loading..</div>

        <p id="postEdit">

            // EditPost method returns edit view asynchronously

            @Ajax.ActionLink("Edit", "EditPost", new {id = post.PostId, @class = "averageLink"},
                new AjaxOptions {UpdateTargetId = "postEdit", LoadingElementId = "postEditLoading", LoadingElementDuration = 3000})

            @Html.ActionLink("Delete", "DeletePost", new {id = post.PostId}, new {@class = "averageLink"})
        </p>
    }
} 
```

一切正常，除了这个奇怪的事情：EditPost 方法返回的表单出现在第一篇文章的正下方，无论我想编辑第一篇还是最后一篇。

我该如何解决这个问题，所以表格会出现在我要编辑的帖子下方？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:32:45.217

我认为这是因为您在 ActionLink 中使用了 updatetargetid。更新元素的 id 是“postEdit”，但您将为每个项目创建具有相同 id 的 ap。我认为您必须根据每个项目更改 p 的 id 并根据该项目更改 updatetargetid 。

像这样的东西：

```
@{string UpdatepID = "postEdit" + post.PostId;}
<p id=@UpdatepID>

            // EditPost method returns edit view asynchronously

            @Ajax.ActionLink("Edit", "EditPost", new {id = post.PostId, @class = "averageLink"},
                new AjaxOptions {UpdateTargetId = UpdatepID, LoadingElementId = "postEditLoading", LoadingElementDuration = 3000}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:30:14.773

每个帖子都有这两个标签，不是吗？

```
 <div id="postEditLoading">Loading..</div>

    <p id="postEdit">
    </p> 
```

在这种情况下，您有多个具有相同 id 的标签，这实际上违反了 html。在这种情况下，js 会采用它可以到达的第一个标签。

要修复它，您可以根据一些帖子信息命名您的标签：

```
 <div id="postEditLoading-@post.PostId">Loading..</div>

    <p id="postEdit-@post.PostId">
    </p> 
```

# asp.net-mvc - #if !DEBUG [RequireHttps] 在服务器上不起作用

> ID：14509075
> 
> 赞同：2
> 
> 时间：2013-01-24T19:21:04.727
> 
> 标签：asp.net-mvc

要将结帐页面 URL 从 HTTP 更改为 HTTPS (SSL)，我正在使用：

```
 #if !DEBUG
    [RequireHttps]
  #endif 
```

问题是页面没有从 HTTP 重定向到 HTTPS。

但是当我删除`#if`语句并使用 only `[RequireHttps]`时，页面成功重定向到 HTTPS。

我仍在开发该网站，所以我想保留它的`#if`声明。

会是什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:32:49.990

不要将 ASP.NET 调试设置（在 Web.config 中）与 C# 调试模式设置（在解决方案配置中）混淆。它们是完全不同的，一个不会影响另一个。`#if !DEBUG`由解决方案配置控制，而不是 ASP.NET / Web.config 调试模式，并且必须在编译代码之前进行更改。

# mysql - 由于 mysql 缺少 .frm 文件，无法 rake db:migrate

> ID：14509080
> 
> 赞同：1
> 
> 时间：2013-01-24T19:21:18.787
> 
> 标签：mysql, ruby-on-rails, migration, rake

**$ 耙分贝：迁移**

```
==  ChangeFriendListToText: migrating -  ======================================
-- change_column(:profiles, :friend_list, :text)
rake aborted!
An error has occurred, all later migrations canceled:

Can't find file: './shadow_development/profiles.frm' (errno: 13)
/Users/me/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.2.18/lib/active_record/connection_adapters/mysql2_adapter.rb:263:in `query'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.2.18/lib/active_record/connection_adapters/mysql2_adapter.rb:263:in `execute'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.2.18/lib/active_record/connection_adapters/mysql2_adapter.rb:413:in `columns'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.2.18/lib/active_record/connection_adapters/mysql2_adapter.rb:598:in `column_for'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.2.18/lib/active_record/connection_adapters/mysql2_adapter.rb:451:in `change_column'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:352:in `block in method_missing'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:328:in `block in say_with_time'
    /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mechmark.rb:280:in `measure'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:328:in `say_with_time'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:348:in `method_missing'
    db/migrate//20130110234754_change_friend_list_to_text.rb:3:in `up'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:282:in `block in migrate'
    /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mechmark.rb:280:in `measure'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:282:in `migrate'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/ar-octopus-0.3.4/lib/octopus/migration.rb:52:in `migrate_with_octopus'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:365:in `migrate'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:491:in `block (2 levels) in migrate'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:567:in `call'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:567:in `ddl_transaction'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:490:in `block in migrate'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:477:in `each'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:477:in `migrate'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:401:in `up'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-2.3.14/lib/active_record/migration.rb:383:in `migrate'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/tasks/databases.rake:112:in `block (2 levels) in <top (required)>'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
    /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
    /Users/me/sources/shadow/lib/rake_exceptional.rb:7:in `standard_exception_handling'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
    /Users/me/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    /Users/me/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

**$哪个mysql**

```
/usr/local/mysql-5.5.24-osx10.6-x86_64/bin/mysql 
```

**$ ls /usr/local/mysql-5.5.24-osx10.6-x86_64/data/shadow_development/profiles.frm**

```
/usr/local/mysql-5.5.24-osx10.6-x86_64/data/shadow_development/profiles.frm 
```

在 Mac OS X 10.7.5 上使用 ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11.3.0] 和 Rails 2.3.14

**更新：**这是迁移文件：

```
class ChangeFriendListToText < ActiveRecord::Migration
  def self.up
    change_column :profiles, :friend_list, :text
  end

  def self.down
    change_column :profiles, :friend_list, :string
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:55:27.703

原来这是一个权限问题。在该文件上使用`chmod`允许迁移发生。权限关闭的原因是因为我们最近更改了启动 mysql 的方式，所以以前在我的帐户下创建的东西现在由用户创建`_mysql`。

对于将来遇到此问题的任何其他人，请使用该`ls -l`命令来识别权限差异。

# iphone - 在 PhoneGap+jQuery Mobile 中使用 ajax 的 CORS 无法在设备上运行，但在浏览器上运行

> ID：14509084
> 
> 赞同：2
> 
> 时间：2013-01-24T19:21:24.977
> 
> 标签：iphone, jquery, cordova, jquery-mobile, cors

所以我正在使用Phone Gap 和jQuery mobile 构建一个应用程序。

当使用 ajax 从白名单服务器获取 json 响应时，我收到错误响应。但是，控制台中没有显示任何内容。奇怪的是，当在网络浏览器中测试应用程序时它工作正常，只有当我启动到我的 iPhone 设备时，它才会抛出一个 strop。

现在值得一提的是，我托管我的 php 脚本的站点在 Phone Gap 中被列入白名单。我在数组中使用 * （以防万一这会有所不同）。我已经为此制定了一个 jsonp 解决方法，但不想使用它 - 我觉得如果它在浏览器中工作，它必须在设备上是可能的。我希望这是一个简单的修复...

这是我的简单 php 脚本，它只是回显一个 json 字符串。

```
<?php
header('Access-Control-Allow-Origin: *');
$arr = array('a' => 1, 'b' => 2);
echo json_encode($arr);
?> 
```

这是JS

```
 $('#registerUser').submit(function() {
          $.ajax({
                 url: 'http://www.mydomain.co.uk/path/register/add_user.php',
                 type: 'post',
                 dataType: 'json',
                 crossDomain : true,
                 timeout: 5000,
                 success: function(msg){
                    alert(msg.a);
                 },
                 error: function(){
                    alert('There was an error loading the data.');
                 }
                 });
          });
    }); 
```

编辑：我在页面上也有这个 js...在 jquery mobile docs 上建议在使用 Phone Gap 时使用它

```
 <script>
        $( document ).on( "mobileinit", function() {

            $.mobile.allowCrossDomainPages = true;
            $.support.cors = true;
        });

        </script> 
```

还有表格 - 我认为这没有必要......

```
 <form id='registerUser' action="" method="POST">
                <div data-role="fieldcontain">
                    <label for="name">Name:</label>
                    <input type="text" name="name" id="name" value=""  />
                    <label for="name">Email:</label>
                    <input type="text" name="email" id="email" value=""  />
                    <label for="name">Password:</label>
                    <input type="password" name="password1" id="password1" value=""  />
                    <label for="name">Re-enter password:</label>
                    <input type="password" name="password2" id="password2" value=""  />
                    <br>
                    <button type="submit" aria-disabled="false">Submit</button>
                </div>
            </form> 
```

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:47:58.327

最简单的尝试是使用以下内容扩充您的 PHP 服务器：

```
<?php
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET,PUT,POST,DELETE');
header('Access-Control-Allow-Headers: Content-Type');
$arr = array('a' => 1, 'b' => 2);
echo json_encode($arr);
?> 
```

您还需要确保您的 PHP 服务器允许 OPTIONS HTTP 请求。

更长的答案是`dataType: 'json'`您的 JS 代码中的 正在触发 CORS 预检请求。预检请求基本上要求服务器允许发出实际请求。您可以在此处了解有关 CORS 预检的更多信息：http: [//www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:56:01.993

I've encountered cases where `Access-Control-Allow-Origin: *` was actually ignored by the client. I believe the "proper" way (see [the w3c spec to confirm this](http://www.w3.org/TR/cors/)) to allow all domains via CORS is to actually grab the origin domain from the request header, then dynamically apply that origin to the `Access-Control-Allow-Origin` header of the response, rather than using the wildcard character, to ensure that the client will respect the header.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:35:38.947

Okay so it turns out there wasn't an issue with the code. It seemed that the app was cacheing the error result or something. I killed the app and relaunched it and all works fine now. From reading around it seems iOS6 safari caches POST which is different to previous versions.

I have added this in my ajax call to prevent caching the POST.

```
 headers: { "cache-control": "no-cache" } 
```

I hope this helps someone else as it has been a pain!

Thanks for the replies

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T19:38:48.620

My experience with this issue proved to be caused by the fact that I was using httpS with an "invalid" SSL certificate. iPhone mobile safari and webview did not trust the SSL certificate and so did not make the AJAX request.

I was able to complete development by temporarily using plain HTTP.

My CORS headers were:

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: X-Requested-With,Authorization 
```

# c - 无法退出“for”循环

> ID：14509089
> 
> 赞同：0
> 
> 时间：2013-01-24T19:21:59.913
> 
> 标签：c

我知道这可能是明显的问题，但由于对 CI 来说非常新，所以不得不问，

这是我的代码：

```
#include <stdio.h>
#define ASIZE 8
int main()

{
    int index;

    long int numbers[ASIZE];

    printf("enter 8 integers to be printed in reverse order:\n");

    for (index = 0; index < ASIZE; index++)

    {
        scanf("%li", &numbers[index]);
    }

    printf("indexing is done!");

} 
```

为什么我没有退出“for”循环并打印“索引已完成！” ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:28:15.883

`scanf`要求您的输入以空格分隔。输入`12345678`只会循环一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:30:08.593

如果您输入了空格、回车、制表符分隔的输入，这将/应该工作。如果您输入例如 82341679 作为 8 个数字，这些不是八个输入，这只是一个输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:33:25.250

你真的是 C 的新手！无论如何，为了清楚起见，您的代码非常好。输入数字，如 1 2 3 4 5 6 7 8

不像 12345678，因为它本身就是一个整数。干杯!

# visual-studio-2010 - Visual Studio 2010/2012 - 在远程机器上运行自动化测试用例时，测试代理服务出现异常

> ID：14509091
> 
> 赞同：0
> 
> 时间：2013-01-24T19:22:13.357
> 
> 标签：visual-studio-2010, visual-studio-2012, qa, automated-tests, microsoft-test-manager

我目前正在为一个项目设置自动化测试用例解决方案，我正在使用 Visual Studio 2012、Test Manager 2010、Test Controller 2010 和 Test Agent 2010。我使用的 TFS Server 是 2010，我们的自动化测试用例项目在 .NET 4.0 框架中。

我们的自动化测试用例解决方案的设置方法是：

-我们有一台安装了测试控制器和测试代理的远程机器 -测试管理器配置了一个物理环境（在实验室中心），该环境使用远程机器上的测试控制器和测试代理 -测试管理器中的测试设置还配置为运行 64 位机器的测试，这就是远程机器的配置方式 - 然后将测试用例与我们的自动化解决方案中的编码 UI 测试链接，从测试管理器执行，然后在远程机器上运行

虽然我在 Visual Studio 2010 中为自动化解决方案设置成功，但在尝试使用该解决方案的 2012 版本时遇到了许多问题。

我遇到的最新问题是，虽然我能够在测试管理器中执行测试并让它在远程机器上的测试代理中排队，但测试永远不会执行。

查看事件日志，我看到正在发生 3 个异常错误，1 个用于 VSTTAgent，2 个用于 VSTTAgentProcess。我按照各自的顺序附上了下面的每个错误。

![VSTTAgent 错误](../Images/51487ba959eda312546646966328d7ed.png) ![VSTTAgentProcess 错误 1](../Images/8109d39b6dce8014d2477e68ec37ace0.png) ![VSTTAgentProcess 错误 2](../Images/6be98d07666c7de9c93599e04fa4c0d8.png)

有没有人遇到过这样的问题？任何帮助将不胜感激，我提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T20:51:58.300

根据我在第一个问题下的评论以及 Andrew 的回答，我发现 2012 代理和控制器不能与 TFS 2010 一起使用。

作为一些附加信息，我发现我们公司的构建代理 (2010) 并没有我们需要正确部署 2012 解决方案的所有类库定义。

感谢大家对我的问题的回答，我希望这对将来的其他人有所帮助！

# python - 如何管理一个长（数天）的python进程

> ID：14509093
> 
> 赞同：2
> 
> 时间：2013-01-24T19:22:21.080
> 
> 标签：python, django, background-process

我有一个大型（超过 600,000 条记录）数据库作为 Django 应用程序的一部分。该应用程序存储从各种开放数据网络服务收集的信息。每隔一段时间（可能每周一次或更少），我需要检查这些网络服务以查看是否有任何数据已更新。

我写了一个python脚本来做到这一点。它可以工作，但速度很慢，而且我经常在它完成之前就收到这个错误：ConnectionError: [Errno 104] Connection reset by peer

根据一些实验，我认为这个过程需要几天时间才能完成。除了优化我的脚本之外，处理这种长时间运行的 python 进程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:49:34.913

看看[celery](http://celeryproject.org/)，它应该可以轻松地将后台作业分配给多个工人（也可以在不同的机器上运行）。如果失败，它还可以让您再次排队作业并稍后重试......

为了优化您的脚本，您可能应该考虑使用多处理或使用异步库，如[gevent](http://www.gevent.org/)（特别是如果您有执行大量 I/O 的工作，例如调用 Web 服务），这使您能够处理大量同时连接（最多100s/1000s) 并行。

# apache - 移动 Lampp htdocs

> ID：14509099
> 
> 赞同：0
> 
> 时间：2013-01-24T19:22:40.643
> 
> 标签：apache, permissions, lampp

我已经在 Ubuntu 12.04LTS 上安装了 Lampp。我试图通过编辑 httpd.conf 中的两个 DocumentRoot 值将我的 htdocs 移动到 home/myusername/lampp/htdocs。

这样做之后，我在所有页面上都被禁止访问。

我已经在目录上尝试了 chmod 755 ，但这已经是主目录上的默认设置，并且可以预见没有任何效果。

**编辑**

htdocs 下所有目录上的 chmod 755 解决了被禁止的问题。我现在可以看到默认的 XAMPP 页面@localhost/xampp/index.php，以及我在 localhost/test.html 下的 test.html 页面。

然而，localhost/xampp/index.php 无法正常运行，并且单击任何语言链接都不会进入标准的 Xampp 配置和介绍页面，而是什么都不做。

**编辑**

权限再次被折叠。使用递归 chmod 基本上是所有需要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:28:10.390

嗨，听起来这里的权限有问题，进入主文件夹并 CHMOD 文件夹，确保它们可读且可执行。此外，您可以将用户添加到 www-data 并查看是否可以解决问题，但我怀疑情况是否如此。

确保您在 chmod 上使用 -R 命令，这会将其设置为递归地执行所有文件夹和所有文件。由于文件夹上的 755 不会解锁实际文件本身，因此它们将保持不可读。

```
sudo chmod 755 -R /home/username/lamp/htdocs 
```

# c++ - 将图像复制到旋转矩形opencv c ++中的方法

> ID：14509100
> 
> 赞同：4
> 
> 时间：2013-01-24T19:22:45.210
> 
> 标签：c++, copy, rectangles, roi

我在 Win7 x64 上工作，使用 openCV 和 Visual Studio 2010，使用 c++ 编程。我想将图像（称为**image**）复制到另一个图像的矩形区域（称为**RR_image**）。然而，这个区域是旋转的。

这是**图像**：

![在此处输入图像描述](../Images/d898a306175f6fd2411b3a15858d11e8.png)

这是**RR_image**：（ ![在此处输入图像描述](../Images/85c6cae702ab6bcb070a8fd283c8bba8.png) 如您所见，我已经旋转了第一张图片）

我会在红色矩形中复制第一张图像。

有多少种方法可以做到这一点？

我了解投资回报率，并且：`img1.copyTo(img2.rowRange(...), img2.colRange(...));`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:13:40.970

主要问题是**OpenCV 不支持**图像的透明度，而这是您以简单的方式完成该任务所需要的。

因此，一种方法是编写一个自定义函数/方法来迭代旋转的（源）图像，将像素复制到目标图像，同时忽略背景像素（例如特定的灰色阴影）。但是，这种方法非常有限。

**编辑：**

OpenGL 当然可以完成这项工作，但它带来了您可能不想知道的复杂性。幸运的是，还有其他替代方案，例如[ImakeMagick ，它通过](http://www.imagemagick.org/script/index.php)[ImageMagick++](http://www.imagemagick.org/Magick++/)提供 C++ API ，它当然可以处理透明图像。看看[Magick++ 的简单介绍](http://www.imagemagick.org/Magick++/tutorial/Magick++_tutorial.pdf)。

Qt 中的[QImage类](http://doc.qt.digia.com/qt/qimage.html)[可能](https://stackoverflow.com/q/3602482/176769)也可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:54:25.017

我用 Qt 库和 OpenCV 解决了我的问题。

这里如何：

给定**image**和**RR_image**为了将前者复制到后者，我使用了以下代码：

```
QPainter painter(&RR_image);
painter.drawImage( (float)p1.x(),(float)p2.y(), image); 
```

**RR_image**和**image**必须是 QImage 对象，所以我必须使用以下代码将它们从 Mat 转换为 QImage：

```
cvtColor(image, image,CV_BGR2RGB);
QImage image= QImage((uchar*) image.data, image.cols, image.rows, image.step, QImage::Format_RGB888); 
```

结果是： ![在此处输入图像描述](../Images/6db3d1e8a156facd2bedfd5f92cd180b.png)

希望这会对某人有所帮助！

# xcode - iOS：Xcode 似乎在 XIB 文件名中插入了一个额外的空格，导致“无法加载 XIB 文件”问题

> ID：14509103
> 
> 赞同：0
> 
> 时间：2013-01-24T19:23:10.430
> 
> 标签：xcode, uitableview, xib, nib

我有一个使用自定义表格视图单元格的 UITableViewController（我已经为我的自定义 UITableViewCell 子类创建了一个 XIB）

当我的应用程序尝试加载表视图控制器时，它会崩溃并出现以下错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/CoolDocsMan/Library/Application Support/iPhone Simulator/5.1/Applications/Z7BB7085F-37A7-4B92-89A3-37EC34531B08/FunkySpaces.app> (loaded)' with name 'AdminConfirmTableViewCell'' 
```

根据文章[Could not load NIB in bundle](https://stackoverflow.com/questions/5337337/could-not-load-nib-in-bundle)中的建议之一，我通过浏览以下内容检查了我的库中的app 文件夹：

```
/Users/CoolDocsMan/Library/Application Support/iPhone Simulator/5.1/Applications/Z7BB7085F-37A7-4B92-89A3-37EC34531B08/FunkySpaces.app 
```

我对其他类似的 tableVCs 使用相同的技术，但发现虽然所有其他 XIB 文件都被正确翻译成 .nib，但这个特定的 tableview 单元格 XIB 在其末尾被翻译了一个额外的空间。

即“AdminConfirmTableViewCell .nib”而不是“AdminConfirmTableViewCell.nib”

我在 XCode 中进行了全局搜索，看看我是否打错字并在 AdminConfirmTableViewCell 之后插入了一个额外的空格，但没有找到。

下面是来自 tableVC 的 ViewDidLoad 的部分代码，其中包含 AdminConfirmTableViewCell：

```
//Load the NIB file
UINib *nib = [UINib nibWithNibName:@"AdminConfirmTableViewCell" bundle:nil];

//register this NIB whch containes the cell    
[[self tableView] registerNib:nib forCellReuseIdentifier:@"AdminConfirmTableViewCell"]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:38:19.650

this is my first answer in stack overflow! How about trying this, obviously customising to your needs

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

RootViewController *addController = [[RootViewController alloc]
                                      initWithNibName:@"nibnamehere" bundle:nil];

UINavigationController *navigationController = [[UINavigationController alloc]
                                                initWithRootViewController:addController];
[self presentModalViewController:navigationController animated:NO];

[navigationController release];
[addController release]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:43:00.003

我终于发现了问题，现在明白了为什么我扫描代码时它没有出现。问题实际上在于我在界面构建器中的身份检查器下为我的自定义 UITableView 单元（AdminConfirmTableViewCell）指定自定义类的方式。

我在自定义类下的 Identity Inspector 中拼写了 'AdminConfirmTableViewCell '，末尾有一个额外的空格......因此 AdminConfirmTableViewCell.xib 的这个名称带有额外的空格（见屏幕截图......），在构建时，XCode 将其翻译成一个 NIB 文件作为 'AdminConfirmTableViewCell. nib' 有一个额外的空间。

删除多余的空间后，一切都解决了！在 Interface Builder 实现中留下这个空白似乎与 Apple 完全不同，这使得开发人员可能会犯这类错误。

![在此处输入图像描述](../Images/f8fd8cd911cbee141deffaa5b11e7884.png)

# android - 如何像 setContentView 一样设置 FrameLayout 的内容

> ID：14509105
> 
> 赞同：2
> 
> 时间：2013-01-24T19:23:15.463
> 
> 标签：android, layout

我想要 setContentView 之类的东西，但对于我当前布局中的 FrameLayout，这意味着我的 main_activity 布局中有一些控件，其中一个是 pageHolder，它是 FrameLayout。我在 res/layout 中添加了一个 android 布局，它也是 FrameLayout，称为 page1，另一个称为 page 2。我想在应用程序运行时将 pageHolder 的内容更改为 page1 或 page2 的内容。

我执行以下代码，但它给了我错误：

```
 FrameLayout pageHolder = (FrameLayout)findViewById(R.id.pageHolder);

    FrameLayout page1 = (FrameLayout)findViewById(R.layout.page1);

    pageHolder.removeAllViews();
    pageHolder.addView(page1); 
```

它说page1为空，我自己检查过它是空的。你能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:32:15.800

在我看来，您应该使用`LayoutInflater`该 page1 布局来膨胀。它应该看起来像这样：

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService
  (Context.LAYOUT_INFLATER_SERVICE);
View v = inflater.inflate(R.layout.page1, null); 
```

# maxscript - 将数据从 C/C++ 发送到 MaxScript

> ID：14509109
> 
> 赞同：1
> 
> 时间：2013-01-24T19:23:22.573
> 
> 标签：maxscript

我想使用来自通过串行端口的多个传感器的数据来旋转 3DS Max 中的盒子。数据首先使用 KAlman 过滤器进行过滤，并以正确的形式设置，但我不知道如何使用 Max Script 中的重组数据进行旋转。我知道要旋转的最大脚本，但我不知道如何将数据从其他地方发送到 MaxScript。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T08:44:13.270

使用 maxscript，您可以使用 .net，使用 c++ SDK 完成这项简单的工作比简单地使用 .net 和 maxscript 的工作要多得多。

我将使用下面的示例并将其读回而不是写下来。该示例可以在这里找到

[http://forums.cgsociety.org/showthread.php?t=898081](http://forums.cgsociety.org/showthread.php?t=898081)

# c# - 对密码进行哈希处理或加密好不好？

> ID：14509118
> 
> 赞同：0
> 
> 时间：2013-01-24T19:24:18.863
> 
> 标签：c#, .net, encryption, hash, cryptography

> **可能的重复：**
> [散列密码和加密它之间的区别](https://stackoverflow.com/questions/326699/difference-between-hashing-a-password-and-encrypting-it)
> [散列与加密密码](https://stackoverflow.com/questions/4941826/hashing-vs-encrypting-passwords)

我尝试通过将用户名作为其盐值传递，使用 Rfc2898DeriveBytes 在 C# 中对我的密码进行哈希处理。

```
public string HashPassword(string HashedUsernameSalt, string Password)

{

    Rfc2898DeriveBytes HashedPass = new Rfc2898DeriveBytes(Password,
    System.Text.Encoding.Default.GetBytes(HashedUsernameSalt), 10000);
    return Convert.ToBase64String(Hasher.GetBytes(25));
} 
```

上面的方法给了我一些哈希值。我的问题是

如果他忘记了，是否可以取回我的密码以显示用户？或者我是否需要在这里实现一些其他概念，比如加密和解密？但我听说散列比加密更好。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T19:26:09.560

您绝对应该对密码使用单向哈希。如果用户忘记了它，您的目标不应该是能够检索它。要做的事情是允许用户将他们的密码（经过某种识别过程后）重置为全新的密码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T19:26:56.867

您无法反转哈希，因此如果用户忘记了密码，则它是“不可恢复的”。您不想将加密的密码存储在数据库中，而是希望存储这些哈希值。如果用户忘记了他们的密码，您将生成一个新的临时安全密码（在正确识别用户就是他们所说的人之后）。

密码应该用盐散列，否则它们很快就会被彩虹表破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:27:22.047

从安全的角度来看，散列密码而不是加密密码确实要好得多。你必须管理你用来加密密码的密钥，如果你不能保证它的安全（你可能会反对一个坚定的攻击者），那么攻击者可以得到你所有用户的明文密码。

如果您想提供忘记密码的机制，最好向存档的地址发送电子邮件并让用户创建一个新密码。或实施安全问题。或者两者都做。

# llvm - 关于 libclang 的任何教程？

> ID：14509120
> 
> 赞同：11
> 
> 时间：2013-01-24T19:24:27.413
> 
> 标签：llvm, libclang

我一直在寻找一些易于理解的 libclang 指南。我在这里或其他论坛上看到过一些主题，但唯一推荐的信息来源是 libclang 源/doxygen doc、vim 的 clang 完整插件或[Thinking Beyond the Compiler](http://devimages.apple.com/llvm/videos/Libclang.mov)演示文稿。但是，它们都没有提供有关实际使用的信息。我对实现代码完成/语法突出显示（可能是一些基本的重构/解析）感兴趣。

所以我的问题是，除了上面提到的那些之外，还有任何易于理解的教程吗？也许一些高级 libclang 用户可以写一个 :)

注意：我对为 clang 编写插件不感兴趣。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T16:44:22.347

不久前，我已经编写了关于使用 Python 绑定到 libclang 的[教程。](http://eli.thegreenplace.net/2011/07/03/parsing-c-in-python-with-clang/)由于 Python 绑定非常轻量级，因此本教程也绝对可以用来学习“vanilla”C libclang。

# php - 在 codeigniter 中查看静态页面

> ID：14509121
> 
> 赞同：1
> 
> 时间：2013-01-24T19:24:28.610
> 
> 标签：php, codeigniter

```
<?php
class Page extends CI_Controller{

    function index(){
        $this->view('home');
    }

    public function view($page = 'home')
    {

        if ( ! file_exists('application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }

        $data['title'] = ucfirst($page); // Capitalize the first letter

        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);

    } 
```

我想查看带有[http://www.mydomain.com/page/about](http://www.mydomain.com/page/about)、[http://www.mydomain.com/page/services等链接的页面，而不是](http://www.mydomain.com/page/services)[http://www.mydomain.com/](http://www.mydomain.com/page/view/about) 格式[page/view/about](http://www.mydomain.com/page/view/about)和[http://www.mydomain.com/page/view/services](http://www.mydomain.com/page/view/services)

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:26:56.337

您可以在`config/routes.php`其中添加路线：

```
$route['page/(:any)'] = "/page/view/$1"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:26:39.873

在 /config/route.php 中为您的特定静态页面设置路由。

```
$route['contact']   = 'site/page/contact'; 
```

# c - 使用 pipe/dup2 与 Python 子进程通信

> ID：14509123
> 
> 赞同：0
> 
> 时间：2013-01-24T19:24:35.027
> 
> 标签：c, posix, dup2

我想使用 Python 为我的 C 程序实现用户界面。但是，我似乎无法进行沟通。这是我到目前为止所做的，`test.c`：

```
int main()
{
    int pipe_in[2], pipe_out[2];
    if (pipe(pipe_in) != 0 || pipe(pipe_out) != 0)
    {
        perror("pipe");
    return 1;
    }

    int _proc_handle = 0;
    if ((_proc_handle=fork()) == 0)
    {
        printf("Starting up Python interface...\n");
        dup2(pipe_in[0], STDIN_FILENO);
        dup2(pipe_out[1], STDOUT_FILENO);
        close(pipe_in[0]);
        close(pipe_out[1]);
        execlp("python", "python", "interface.py", (char*)NULL);
        perror("execlp");
        printf("Error executing Python.\n");
        exit(1);
    }

    _write_fd = pipe_in[1];
    _read_fd = pipe_out[0];

    sleep(1);
    char buffer[256];
    int n = read(_read_fd, buffer, 11);

    printf("n: %d\n", n);
    printf("buffer: `%s'\n", buffer);
    write(_write_fd, "from C\n", 5);

    return 0;
} 
```

并且`interface.py`是：

```
import sys
import time

time.sleep(0.1)
print >>sys.stdout, 'from python'
print >>sys.stderr, sys.stdin.readline() 
```

运行这个，我希望它打印出来，

```
Starting up Python interface...
n: 11
buffer: `from python'
from C 
```

但相反，它只是挂在后面，

```
Starting up Python interface... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:35:43.953

添加到您的python脚本：

```
sys.stdout.flush() # after printing to stdout
sys.stderr.flush() # after printing to stderr 
```

（行缓冲是 tty 设备的默认设置，但不是管道）。

将来，您将希望在父进程（和/或子进程）中检测管道上的 EOF，并且您还必须关闭父进程中未使用的管道末端。编辑：并在子进程中关闭管道的*其他*未使用端。

```
/* This should be in parent as well */
close(pipe_in[0]);
close(pipe_out[1]);

/* This should be added to the child */
close(pipe_in[1]);
close(pipe_out[0]); 
```

# fortran - POS=... 使用 pgi 编译器时

> ID：14509126
> 
> 赞同：0
> 
> 时间：2013-01-24T19:24:42.847
> 
> 标签：fortran, pgi

我正在尝试更新/重新编写一堆代码，这些代码应该能够被所有主要的 fortran 编译器编译。我可以访问pgi 编译器（版本 7.2.5）`ifort`和`gfortran`一个相对较旧的 (?) 版本。该代码使用 gfortran 和 ifort 编译得很好，但 portland group 的编译器在如下一行中抱怨：

```
open(unit=82,file=fname,status=status,form='UNFORMATTED',access='STREAM')
write(82,POS=file_pos) iheader    !<= mpif90 complains here 
```

我实际上正在使用`mpif90`which 是一个包装器`pgf90`，但这不应该有所作为。（`iheader`只是一个包含 20 个元素的整数数组）。波特兰组编译器是否支持更现代的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:05:48.803

看看[PGI fortran 参考](http://www.pgroup.com/doc/pgifortref.pdf)，看起来他们仍然不支持流 IO（它没有在允许的访问字符串中列出，第 69 页）。我想我需要重新编写该代码......如果他们不支持流 IO，那么他们可能也不支持`POS=...`。

# javascript - 在 CSSStyleDeclaration 更新时强制文档重新渲染（chrome）

> ID：14509128
> 
> 赞同：2
> 
> 时间：2013-01-24T19:24:49.960
> 
> 标签：javascript, css, google-chrome, media-queries

（仅限 Chrome）我正在尝试在运行时修改与媒体查询相关的 CSSRules，但是，当我修改规则时，文档不会重新呈现。仅当媒体查询再次更改时，文档才会重新呈现。如果你看一下小提琴，你会注意到在加载时，元素是深色的，而它应该立即变成红色。有没有办法让文档使样式无效？

如果您将浏览器窗口移动得更小，您会看到样式更改成功，然后再次变大，这样媒体查询样式就会两次失效。

小提琴：http: [//jsfiddle.net/QNgxk/3/](http://jsfiddle.net/QNgxk/3/)

**编辑：有时小提琴有效？？？哎呀**

代码：

**HTML**

```
<div id="test">I SHOULD BE RED</div> 
```

**CSS**

```
#test {
    position: absolute;
    width:    100%;
    background-color: #333;
    height:   50px;
}

@media screen and (min-width: 481px) {
    #test {
        width: 50%;
    }
} 
```

**JS**

```
var test = document.getElementById('test');   // get the element
var rules = window.getMatchedCSSRules(test);  // get matched rules
var regexp = new RegExp('^#test');            // test the CSS rule explicit id
var matchedRule;
for (var i = rules.length - 1; i >= 0; i--) { // loop through rules and find the explicit one
    var rule = rules[i];
    if (rule.cssText.match(regexp)) {
        matchedRule = rule;
        break;
    }
}

// now change the rule to have a background of red, and width 20%
if (matchedRule) {
    matchedRule.style.setProperty('background-color', '#f00');
    matchedRule.style.setProperty('width', '20%');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T15:35:01.717

我有一个类似的问题，我只是在这里写这个，以防它可能对其他人有帮助。对我来说，匹配规则的测试是不正确的。在 FireFox 中，它的作用与 selectorText 一样，正如它在样式表中所写的那样，但 Chrome 会将所有名称转换为小写。所以这个测试在 Chrome 中不匹配：

```
if(theRules[i].selectorText == ".myRule pre"){ 
```

将在 FireFox 中匹配，但 Chrome 将选择器文本更改为小写，因此：

```
.myrule pre 
```

所以把代码改成这样：

```
if(theRules[i].selectorText.toLowerCase() == ".codemirror pre"){ 
```

修复了该问题，使其适用于两种浏览器。顺便说一句，setProperty 在 Chrome 30 中对我有用。我使用它的原因是因为它允许指定重要的：

```
theRules[i].style.setProperty("font-size", this.editorFontSize+"px", "important"); 
```

希望这可以帮助。

# java - 从文件中读取 - 错误的文件类型？

> ID：14509129
> 
> 赞同：2
> 
> 时间：2013-01-24T19:24:51.847
> 
> 标签：java, eclipse, file

我无法从一个简单的文本文件中读取，似乎无法弄清楚原因。我以前做过这个，我不确定问题是什么。任何帮助，将不胜感激！

```
import java.io.File;
import java.util.Scanner;

public class CS2110TokenReader {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        File theFile = new File("data1.txt");
        Scanner scnFile = new Scanner(theFile);

        try {
            scnFile = new Scanner(theFile);
        } catch (Exception e) {
            System.exit(1);
        }
        while (theFile.hasNext()) {
            String s1 = theFile.next();
            Double d1 = theFile.nextDouble();

            System.out.println(s1 + "   " + d1);
        }

    }

} 
```

* * *

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    The method hasNext() is undefined for the type File
    The method next() is undefined for the type File
    The method nextDouble() is undefined for the type File

    at CS2110TokenReader.main(CS2110TokenReader.java:20) 
```

* * *

它甚至不会扫描下一行。那是我的目标。扫描和阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T19:27:09.660

```
while (theFile.hasNext()) {  // change to `scnFile.hasNext()`
    String s1 = theFile.next();  // change to `scnFile.next()`
    Double d1 = theFile.nextDouble();  // change to `scnFile.nextDouble()`

    System.out.println(s1 + "   " + d1);
} 
```

您正在引用引用`Scanner`类的方法`File`。在所有调用中替换`theFile`为。`scnFile`

其次，您正在调用`next()`and `nextDouble()`，但只检查`hasNext()`一次。这可能会`NoSuchElementException`在某个时间点让你失望。在实际阅读之前，请确保您有一个要阅读的输入。

# c++ - 由于在调用 sqlite3_step() 之前没有记录计数，如何在 2D 字符串数组中填充记录？

> ID：14509131
> 
> 赞同：1
> 
> 时间：2013-01-24T19:24:55.077
> 
> 标签：c++, sqlite

我需要分配一个二维字符串数组来将查询结果返回给调用者。查询可能类似于

```
 Select * from files where size > x 
```

我需要分配的二维数组类似于

```
 std::string [x][y]; 
```

我知道列数，但我当然不知道有多少行将匹配查询。我必须事先分配内存来放置结果集。

我知道我可以像这样执行单独的查询，但这是一种矫枉过正的做法，应该没有必要执行单独的查询。

```
 select count(*) from files where size > x 
```

也许我可以重新考虑一个更动态的 2D 数据结构来推动结果？我不确定有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:28:59.957

为什么不使用`std::vector < std::vector < std::string > >`? 那一个可以动态增长，并且可以通过 轻松检查行数`vector.size()`。

根据您执行查询的方式，sqlite 会告诉您返回的行数。例如，请参见此处`sqlite_get_table()`：[http](http://www.sqlite.org/c3ref/free_table.html) ://www.sqlite.org/c3ref/free_table.html 。它返回 中的行数`*pnRow`。

# java - BeanNotOfRequiredTypeException 由于自动装配字段

> ID：14509142
> 
> 赞同：64
> 
> 时间：2013-01-24T19:26:06.803
> 
> 标签：java, spring-mvc, annotations, tomcat7

我还是 Spring MVC 的新手，在构建我的测试项目时，我从 Tomcat 日志中收到了这条消息：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'divisionController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'adminService' must be of type [employee.service.impl.AdminServiceImpl], but was actually of type [$Proxy52]
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:307)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    ...
Caused by: org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'adminService' must be of type [employee.service.impl.AdminServiceImpl], but was actually of type [$Proxy52]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:360)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) 
```

我有两个面向用户和管理员的滚动服务，其中有接口：

```
package employee.service;

import employee.model.EmployeeDiv;
import employee.model.EmployeeInfo;
import employee.model.UserInfo;

import java.util.List;

/**
 *
 * @author serge
 */

public interface AdminService extends UserService {

     //  !!!! for register & udate of Employee use String type birthday !!!!

    /*
     * Employee
     */
    public EmployeeInfo registerEmployee(EmployeeInfo employeeInfo);

    public EmployeeInfo updateEmployee(EmployeeInfo employeeInfo);

    public EmployeeInfo findEmployeeByID(Integer id);   

    /*
     * Division
     */
    public EmployeeDiv registerDivision(EmployeeDiv division);

    public EmployeeDiv updateDivision(EmployeeDiv division);

    public List<EmployeeDiv> findAllDivisions();

    public List<EmployeeDiv> findDivisionsByName(EmployeeDiv division);

    public EmployeeDiv findDivisionsById(Integer id);

    /*
     * Login
     */
    public UserInfo registerUser(UserInfo user);

    public UserInfo updateUser(UserInfo user);

    public List<UserInfo> findAllUsesrs();

    public List<UserInfo> findUsesrByLogin(UserInfo user);

    public UserInfo findUsesrById(Integer id);
} 
```

这是 AdminServiceImpl：

```
package employee.service.impl;

import employee.DAO.EmployeeDivDAO;
import employee.DAO.EmployeeInfoDAO;
import employee.DAO.UserDAO;
import employee.model.EmployeeDiv;
import employee.model.EmployeeInfo;
import employee.model.UserInfo;
import employee.service.AdminService;
import employee.validation.ParsingDate;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.access.annotation.Secured;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

/**
 * @author serge
 *
 * Admin level
 *
 * Service for processing employee, divisions, userslogin
 */

//@Repository("adminService")
@Service("adminService")
@Transactional
public class AdminServiceImpl extends UserServiceImpl implements AdminService {

    protected static Logger adminLogger = Logger.getLogger("service");
    private EmployeeDivDAO emplDivDAO;
    private UserDAO userDAO;
    private EmployeeInfoDAO emplInfoDAO;

    @Autowired
    @Override
    public void setEmployeeDao(EmployeeInfoDAO emplInfoDAO) {
        this.emplInfoDAO = emplInfoDAO;
    }

    @Autowired
    public void setEmployeeDao(EmployeeDivDAO emplDivDAO) {
        this.emplDivDAO = emplDivDAO;
    }

    @Autowired
    public void setUserDao(UserDAO userDAO) {
        this.userDAO = userDAO;
    }

    public AdminServiceImpl() {

        initTestEmployee();
    }

    /**
     * Initialize EmployeeInfo test
     */
    @Transactional
    @Secured("ROLE_ADMIN")
    private EmployeeInfo initTestEmployee() {

        adminLogger.debug("saving testEmployee");

        EmployeeInfo employeeInfo = new EmployeeInfo();
        ParsingDate date = new ParsingDate();
        employeeInfo.setFirstName("Petr");
        employeeInfo.setLastName("Ivanenko");
        employeeInfo.setEmpDiv("second");
        employeeInfo.setBirthdate(date.parseDate("1981-10-03"));
        employeeInfo.setSalary(3500);
        employeeInfo.setActive(true);

        return employeeInfo;
    }

    /**
     * registrating new Employee Information
     *
     * @return EmployeeInfo object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public EmployeeInfo registerEmployee(EmployeeInfo employeeInfo) {

        adminLogger.debug("registrating new Employee");

        try {

            emplInfoDAO.save(employeeInfo);

        } catch (NullPointerException e) {
        }
        return employeeInfo;
    }

    /**
     * updating Employee Information
     *
     * @return EmployeeInfo object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public EmployeeInfo updateEmployee(EmployeeInfo employeeInfo) {

        adminLogger.debug("updating Employee with id: " + employeeInfo.getId());
        try {

            emplInfoDAO.update(employeeInfo);

        } catch (NullPointerException e) {
        }
        return employeeInfo;
    }

    /**
     * Retrieving Employee Information by id 
     *
     * @return EmployeeInfo object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public EmployeeInfo findEmployeeByID(Integer id) {

        adminLogger.debug("Retrieving Employee with id= " + id);
        EmployeeInfo employeeInfo = new EmployeeInfo();
        employeeInfo.setId(id);
        emplInfoDAO.find(employeeInfo);
        return employeeInfo;
    }

    /**
     * registrating new Employee Division
     *
     * @return EmployeeDiv object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public EmployeeDiv registerDivision(EmployeeDiv division) {

        adminLogger.debug("registrating new Division");
        try {

            emplDivDAO.save(division);

        } catch (NullPointerException e) {
        }
        return division;
    }

    /**
     * updating Employee Division
     *
     * @return EmployeeDiv object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public EmployeeDiv updateDivision(EmployeeDiv division) {

        adminLogger.debug("updating Division with id: " + division.getId());
        try {

            emplDivDAO.update(division);

        } catch (NullPointerException e) {
        }
        return division;
    }

    /**
     * Retrieving all Employee Divisions
     *
     * @return List of EmployeeDiv objects
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public List<EmployeeDiv> findAllDivisions() {

        adminLogger.debug("Retrieving all divisions");
        return emplDivDAO.findAll();
    }

    /**
     * Retrieving all Employee Divisions by name
     *
     * @return List of EmployeeDiv objects
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public List<EmployeeDiv> findDivisionsByName(EmployeeDiv division) {
        String empDiv = "empDiv";

        adminLogger.debug("Retrieving Divisions by name: " + division.getEmpDiv());
        return emplDivDAO.findAllByParam(empDiv, division.getEmpDiv());
    }

     /**
     * Retrieving Employee Divisions by id 
     *
     * @return EmployeeDiv object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public EmployeeDiv findDivisionsById(Integer id) {

        adminLogger.debug("Retrieving Division with id= " + id);
        EmployeeDiv employeeDiv = new EmployeeDiv();
        employeeDiv.setId(id);
        emplInfoDAO.find(employeeDiv);
        return employeeDiv;
    }

    /**
     * registrating new User Information
     *
     * @return UserInfo object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public UserInfo registerUser(UserInfo user) {

        adminLogger.debug("registrating new User");
        try {

            userDAO.save(user);

        } catch (NullPointerException e) {
        }
        return user;
    }

    /**
     * updating new User Information
     *
     * @return UserInfo object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public UserInfo updateUser(UserInfo user) {

        adminLogger.debug("updating User with id: " + user.getId());
        try {

            userDAO.update(user);

        } catch (NullPointerException e) {
        }
        return user;
    }

    /**
     * retriviting all Users 
     *
     * @return List of UserInfo objects
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public List<UserInfo> findAllUsesrs() {

        adminLogger.debug("Retrieving all Users");
        return userDAO.findAll();
    }

    /**
     * retriving all Users by login
     *
     * @return List of UserInfo objects
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public List<UserInfo> findUsesrByLogin(UserInfo user) {
        String login = "login";

        adminLogger.debug("Retrieving User with login: " + login);
        return userDAO.findAllByParam(login, user.getLogin());
    }

    /**
     * Retrieving Employee Divisions by id 
     *
     * @return EmployeeDiv object
     */
    @Override
    @Transactional
    @Secured("ROLE_ADMIN")
    public UserInfo findUsesrById(Integer id) {

        adminLogger.debug("Retrieving Division with id= " + id);
        UserInfo userInfo = new UserInfo();
        userInfo.setId(id);
        emplInfoDAO.find(userInfo);
        return userInfo;
    }
} 
```

这是 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <!-- Activates annotations -->

    <context:annotation-config />

    <!-- Scans for annotated components in base-package-->

    <context:component-scan base-package="employee" />

    <bean class="employee.service.impl.AdminServiceImpl"/>
    <bean class="employee.service.impl.UserServiceImpl"/>
    <!--bean class="employee.DAO.impl.EmployeeInfoDAOImpl"/>
    <bean class="employee.DAO.impl.EmployeeDivDAOImpl"/>
    <bean class="employee.DAO.impl.UserDAOImpl"/-->

    <!-- for Spring Jackson JSON support  -->

    <mvc:annotation-driven/>

    <!-- Shared Hibernate SessionFactory in a Spring application context. -->

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"></property>

        <!--property name="dataSource">
            <ref bean="dataSource"/>
        </property-->

        <property name="annotatedClasses">
            <list>
                <value>employee.model.UserInfo</value>
                <value>employee.model.EmployeeInfo</value>
                <value>employee.model.EmployeeDiv</value>
            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <!-- for database, imports the properties from database.properties -->

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:database.properties"/>
    </bean>
</beans> 
```

**请告诉我这个bean名称有什么问题，我知道这是AOP问题：**

```
Bean named 'adminService' must be of type [employee.service.impl.AdminServiceImpl], but was actually of type [$Proxy52] 
```

**我该如何解决？**

我在控制器中使用 AdminServiceImpl：

```
package employee.controller;

import employee.model.EmployeeDiv;
import employee.service.impl.AdminServiceImpl;
import org.apache.log4j.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import javax.annotation.Resource;

/**
 * @author serge
 *
 * Handles and retrieves division related requests
 */
@Controller
@RequestMapping("/division")
public class DivisionController {

    protected static Logger logger = Logger.getLogger("controller");
    @Resource(name = "adminService")
    private AdminServiceImpl adminService;

    /**
     * Handles and retrieves a /WEB-INF/jsp/divisionpage.jsp
     *
     * containing all division
     *
     * @return the name of the JSP page
     */
    @RequestMapping(method = RequestMethod.GET)
    public String getAllPage(Model model) {
        logger.debug("Received request to show all division page");

        // Retrieve all division and attach to model 
        model.addAttribute("division", adminService.findAllDivisions());
        return "divisionpage";
    } .... 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-01-24T19:29:01.840

在您的代码中的某处，您必须`AdminServiceImpl`像这样自动装配：

```
@Autowired
private AdminServiceImpl adminService; 
```

要么几乎不依赖于接口：

```
@Autowired
private AdminService adminService; 
```

或启用 CGLIB 代理。

# 类似问题

*   [自动装配的 spring bean 不是代理](https://stackoverflow.com/questions/11486401)
*   [在非单例 bean 上的 Spring 代理上修复 BeanNotOfRequiredTypeException？](https://stackoverflow.com/questions/841231)
*   [在Jenkins中出现Spring错误“名为'x'的Bean必须是[y]类型，但实际上是[$Proxy]类型”](https://stackoverflow.com/questions/8391944)
*   [Spring AOP介绍中丢失了原始接口](https://stackoverflow.com/questions/14089642)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-06-20T09:12:59.253

使用接口`AdminService`而不是实现。

这个由 Annotation 引起的错误是`@Transactional`at的`Spring`代理。`AdminService``Runtime`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-07-04T17:18:00.493

**当您的服务类实现某个接口时，spring 默认使用 JDK 代理，这就是您收到该错误的原因，因此您可以通过接口使用 @Autowired 或启用CGLIB 代理**来解决该问题。

我解决了在我的 spring 应用程序上下文中使用**proxy-target-class属性启用 CGLIB 代理的问题**

```
<tx:annotation-driven proxy-target-class="true"
        transaction-manager="transactionManager" /> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-12-01T10:56:26.047

在谷歌搜索我的问题时，我发现了很多与此类似的问题。但是，就我而言，我已经使用了一个界面。所以我认为这可能对其他人有帮助：

**如果您有两个同名的 bean，也可能出现此异常！**

就我而言，我的 applicationContext.xml 中有额外的 bean 配置。合并两个应用程序后出现问题。第二个定义了 a`@Resource`并且它的成员变量名称与上面提到的第一个应用程序的 bean 名称相匹配。当然，第一个应用程序的 bean 配置不适合`@Resource`第二个应用程序包含的 bean。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-02-20T23:47:00.513

`@SpringBootTest`我对一些测试端点的类也有这个问题。端点依赖于具有`@Transactional`一些方法的数据库服务。

由于`@Transactional`，Spring 拦截了它并创建了一个代理类，因此 Spock（或 junit）将难以注入正确的模拟。

我的解决方法是将数据库服务向下推一层，并在不受此影响的中间层周围进行简单的 Spock 测试。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-10-19T11:48:59.140

确保您已启用 proxyTargetClass，例如：

```
@EnableTransactionManagement(proxyTargetClass = true) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-09-14T12:10:47.350

我遇到了同样的问题，但我通过以下解决方法解决了这个问题：

请用接口替换您的实现类。例如：

```
class Abc
{
 @Autowire
 private Boy boy // remove @BoyImpl

.............
...................
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-14T04:27:17.920

我在执行单元测试时也遇到了问题

我创建了一个模拟服务来实现真正的服务来覆盖一些方法，以便于测试一些用户案例

```
@Component
public static class FooServiceImplMock extends FooServiceImpl {
    @Override
    protected void bar() {
        // do some specific loginc here 
    }
} 
```

但是当执行测试方法时

```
@Autowired
private Foo1ServiceImplMock foo1ServiceImplMock; 
```

我得到以下错误

```
Caused by: org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'fooServiceImplTest.FooServiceImplMock' is expected to be of type 'com.foo.business.impl.FooServiceImplTest$FooServiceImplMock' but was actually of type 'com.sun.proxy.$Proxy97' 
```

原因：

FooServiceImpl 中有使用@Cacheable 的方法

```
@Cacheable("eventTypes") 
```

从 EnableCaching 的 javadoc 我知道

```
org.springframework.cache.annotation.EnableCaching 
boolean proxyTargetClass()

Indicate whether subclass-based (CGLIB) proxies are to be created as opposed to standard Java interface-based proxies. The default is false. 
```

所以解析方式是明确指定在spring application context中使用CGLIB

```
 <cache:annotation-driven proxy-target-class="true"/> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-03-10T09:53:46.987

我刚刚遇到这个问题，因为对现有类的测试开始失败并出现“预期类型...但实际上是类型“com.sun.proxy.$Proxy115”。

事实证明，我在添加到接口实现类的@Transactional 方法上使用了Intellij 的“pull method up [to interface]”，而Intellij 决定将@Transactional 添加到接口方法声明中。如果接口中只有一个 @Transactional 方法，那么它似乎搞砸了，导致这个错误。

# javascript - 将 Photoshop 组导出为单独的图像

> ID：14509145
> 
> 赞同：1
> 
> 时间：2013-01-24T19:26:08.343
> 
> 标签：javascript, scripting, web, photoshop, photoshop-script

我目前正在处理几个不同的 Photoshop 文件。它们都包含多达 10-40 个具有更多层的组。我想将每个组导出为与文档大小不同的“网络图像”。基本上这很简单，应该在伪代码中像这样工作：

```
for i = layerGroups; i > 0; i--;
  export layergroup[i] for web with "width=200 and height=120" 
```

我在 javascript 编码方面经验丰富，但是，我从未编写过 Photoshop 脚本，所以这就是困难的开始。希望我能解决我的问题并得到一些帮助。干杯

# java - 如何从java中大于1D的数组中获取长度值？

> ID：14509148
> 
> 赞同：0
> 
> 时间：2013-01-24T19:26:10.310
> 
> 标签：java, arrays

在java中，`myArray.length`二维数组中的引用是什么？例如

```
double[][] myArray = new double[3][5]; 
```

假设您想在数组上运行几个 for 循环而不将行和列放在参数中以获取它们的值，有没有一种巧妙的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:27:50.003

使用`myArray.length`和`myArray[0].length`。（这假设你所有的“子”数组都是相同的长度。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:34:42.373

> 在 java 中，myArray.length 在二维数组中引用什么？

**double 的 2 维数组是 double 的 1 维数组或 1 维数组。** 是( )`myArray[0]`的数组，原样`double``double[]``myArray[1]`

`myArray.length`数组的数量也是如此。

> 假设您想在数组上运行几个 for 循环而不将行和列放在参数中以获取它们的值，有没有一种巧妙的方法来做到这一点？

你的意思是你想在`myArray[2][3]`不使用`3`and的情况下访问`4`？没有办法做到这一点`Java`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:38:46.567

从 Java 5 开始，您可以使用不同的循环构造“ [for each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html) ”，避免使用数组索引；

```
class Test {
  public static void main( String[] args ) {

    int[][] myArray = new int[][] { { 1, 2, 3 }, { 4, 5, 6 } };

    for ( int[] outer : myArray ) {
      for ( int inner : outer ) {
        System.out.println( inner );
      }
    }
  }
} 
```

这打印；

```
$ java Test
1
2
3
4
5
6 
```

# jquery - 在浏览器中进行实时 jQuery 编辑

> ID：14509153
> 
> 赞同：1
> 
> 时间：2013-01-24T19:26:21.407
> 
> 标签：jquery, google-chrome

我想在页面上实时测试一些 jQuery。我正在尝试为此使用 Chrome 的开发人员工具控制台。可能吗？

例如，我在活动页面上有一个带有 class="foo" 的 div：

```
 <div class="foo">Some content</div> 
```

因此，在检查器中，我打开了源选项卡并单击了页面上处于活动状态的现有 .js 脚本。我滚动到该脚本的底部并插入了这个 jQuery：

```
jQuery('.foo').hide(); 
```

为什么它不隐藏 foo div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:27:05.823

您应该将其粘贴到控制台中。将其添加到实际脚本中对您没有任何好处。

![在此处输入图像描述](../Images/2a439e373f3a8d2173a3497ec01ae0b0.png)

# c# - Azure SQLite 插入

> ID：14509155
> 
> 赞同：1
> 
> 时间：2013-01-24T19:26:23.920
> 
> 标签：c#, sqlite, azure

我有一个 Azure 云应用程序，我正在尝试将用户上传的数据存储在位于 ~/AppData/mydb.db 的 SQLite 数据库中。由于我在部署 System.Data.SQLite 时遇到了许多问题，我修改了我的代码以使用这个[sharp-sqlite](http://code.google.com/p/csharp-sqlite "csharp-sqlite")库。在调试模式下插入数据时一切正常。

在 Azure 上部署时，用户提供的数据将插入 SQLite 数据库。在此过程中不会引发任何错误。但是，当尝试查看数据（现在应该存在于数据库中）时，什么也没有。我还在我的网络应用程序上添加了一个链接，以便我可以下载数据库。下载它验证数据没有被保存。

似乎 Azure 正在阻止更新数据库。有没有人遇到过类似的问题。

这是我正在使用的代码示例：

```
Community.CsharpSqlite.SQLiteClient.SqliteConnection cnn = new SqliteConnection("data source=file:" + Server.MapPath(@"~\App_Data\mydb.db"));
cnn.Open();

cmd.CommandText = "INSERT INTO Data(x,y,z) VALUES(?,?,?)";

System.Data.Common.DbParameter X = cmd.CreateParameter();
System.Data.Common.DbParameter Y = cmd.CreateParameter();
System.Data.Common.DbParameter Z = cmd.CreateParameter();

cmd.Parameters.Add(X);
cmd.Parameters.Add(Y);
cmd.Parameters.Add(Z);

X.Value = "some"
Y.Value = "sample"
Z.Value = "data"

cmd.ExecuteNonQuery();
dbTrans.Commit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:50:29.857

您遇到的问题可能与您的方法有关。

当您说“ *Azure 云*”时，我假设您指的是[Azure 云服务](http://www.windowsazure.com/en-us/manage/services/cloud-services/what-is-a-cloud-service/)（而不是 Azure 网站）。

就 Azure 云服务而言，您的部署*服务包*（服务包包含应用程序代码和服务定义文件）应该被视为一个*密封包*，您的代码无法修改。但是，您尝试执行的是更新您的内部包资源`mydb.db`文件（通过执行一些 SQL 插入，这将导致`mydb.db`文件更新）。

拥有*服务包**不可变*的方法是设计使然。有几点支持该决定：

*   许多角色（相同类型）可以处理请求（假设您有多个特定 Web 角色的实例）；这就是为什么您的*服务包*需要在所有实例中相同的原因。
*   Azure 执行操作系统的日常维护或修补，并从*服务包重新创建您的实例*
*   Azure 尝试从服务或硬件故障中恢复——同样，您的实例已从*服务包中重建*

我认为 Azure 云服务的最佳解决方案是使用云优化解决方案，例如 Azure SQL 数据库。

如果你真的需要使用 SQLite，我会推荐使用[Azure Website](http://www.windowsazure.com/en-us/manage/services/web-sites/)而不是[Azure Cloud Services](http://www.windowsazure.com/en-us/manage/services/cloud-services/what-is-a-cloud-service/)。使用 Azure 网站，对资源的更改将被更新并被其他网站实例看到。

# android - 用户的 Android GPS 位置

> ID：14509158
> 
> 赞同：0
> 
> 时间：2013-01-24T19:26:39.017
> 
> 标签：android, gps, locationmanager

我需要为我的应用程序获取用户位置，以便我可以根据两个纬度和经度在谷歌地图上显示方向。

如果用户 GPS 已关闭，它应该询问用户是否要打开 GPS，并且应该能够让他打开设置。

我正在尝试以下操作，但它直接将我带到设置我想知道如何让用户询问他是否想被带走。

是否有任何图书馆可以有效地做到这一点，我更喜欢使用它来获取用户的纬度和经度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:40:53.950

如果您询问如何询问用户是否有兴趣导航到设置页面，以便打开位置服务 - 我建议您简单地展示一个对话框。这是我的项目中的一个示例：

```
// Presents dialog screen - location services
private void askLocationDialog(){
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

    alertDialogBuilder.setTitle(R.string.snoox_use_location_services_dialog);

    // set dialog message
    alertDialogBuilder.setMessage(R.string.would_you_like_to_turn_your_location_services_on_)
    .setCancelable(false)
    .setPositiveButton(R.string.ok,new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            // opens the setting android screen
            Intent settingsIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(settingsIntent);
        }
    })
    .setNegativeButton(R.string.no,new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            dialog.cancel();
        }
    });

    // create alert dialog
    alertDialogBuilder.create().show();
} 
```

如果您对完整示例感兴趣，我发现这篇文章很有帮助： [如何确定 Android 设备的 GPS 是否已启用](https://stackoverflow.com/questions/843675/how-do-i-find-out-if-the-gps-of-an-android-device-is-enabled)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:54:23.817

您将需要做几件事。

首先，要合并 Google 地图，您可以[在此处](https://developers.google.com/maps/documentation/android/)获得完整的参考资料。

简单的步骤：

1 按照[此处](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)的步骤操作：这将有助于在您的屏幕上添加一个简单的谷歌地图。

2 为了能够获取您自己的位置，您需要在 android 中使用 LocationListener 和 LocationManager。为此，首先在您的活动中**实现**LocationListener。

`public class LocationActivity extends Activity implements LocationListener`

3 然后你需要在你的 onCreate() 方法中实例化一些设置

```
 @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the provider
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
      System.out.println("Provider " + provider + " has been selected.");
      onLocationChanged(location);
    } 
  } 
```

4 您需要能够请求定期位置更新。将此包含在您的 onResume() 方法中。

```
@Override
  protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
  } 
```

5 如果应用程序进入暂停周期，则不需要进行这些更新。

```
@Override
  protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
  } 
```

6 步骤 2 中的位置监听器实现要求您有一个 onLocationChanged 监听器，实现它：

```
@Override   
public void onLocationChanged(Location location) {
int lat = (int) (location.getLatitude());
int lng = (int) (location.getLongitude());
} 
```

7 添加这两种方法以通知您的位置设置提供商 - GPS 或网络。

```
public void onProviderDisabled(String arg0) {
    Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();
}

public void onProviderEnabled(String arg0) {
    Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();
} 
```

8 现在我们需要将其链接到您的谷歌地图。我将向您展示一个使用 google maps API 生成市场以显示您当前位置的示例。其他用法可以从 API 中推断出来。

首先在您的代码中创建私有字段：

```
private GoogleMap mMap;
Marker m; 
```

9 在您的 onCreate 方法中添加这些 - 这会将您的默认标记位置实例化为 0,0 纬度和经度。

```
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();
m = mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0))
                .title("Position")); 
```

10 在您的 onLocationChanged 方法中，我们需要在位置更改时刷新此标记。所以添加：

```
m.setPosition(new LatLng(lat, lng));
m.setTitle("Your Position");

// Move the camera instantly to marker with a zoom
// of 15.
                            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(lat, lng), 15)); 
```

这将是一种使用您的位置更新标记的简单方法，并且应该是您在 android 中的 Google 地图和位置 API 的一个很好的介绍。

要检测 GPS 是否打开，您可以使用@Dror 提供的答案 :) 希望对您有所帮助！

# javascript - Angular JS/Dojo 小部件解析

> ID：14509160
> 
> 赞同：2
> 
> 时间：2013-01-24T19:26:41.170
> 
> 标签：javascript, dojo, angularjs

我有一个 Angular JS 应用程序，我想（实际上我必须）在其中使用 dojo 小部件。在控制器的 HTML 模板中，我可以返回其中包含 dojo 标记的 HTML。然而，当视图被重新渲染时，dojo 解析不会自动发生。我能够触发重新解析的唯一方法是在稍微延迟后手动调用解析器，方法是在控制器中执行类似的操作，然后在我知道模型已更改时调用它。

```
refreshDojo = function() {
    setTimeout(function() {
        require(["dojo/parser"], function(parser) {
                parser.parse()
                });
        }, 10);
} 
```

这实际上并不可行，原因有两个：

1.  在超时后必须做任何事情必然会导致麻烦，要么在 html 被处理之前快速发生，要么两个缓慢发生，在创建小部件之前导致内容闪烁。
2.  其次，如果我没记错的话，parser.parse() 会解析整个 DOM，如果我只更新一个 div，这不是很有效。

有没有办法确定 DOM 何时稳定，以便我可以确保在正确的时间触发它？有没有办法访问控制器的根元素（看来你不能再注入 $element 了）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:54:57.240

你应该装饰`$compile`服务，所以在 Angular 编译任何东西之前，它会让 dojo 编译它。

这是一个小例子： [http ://plnkr.co/edit/9iJJFLWDqGtyqLV5Mbe3?p=preview](http://plnkr.co/edit/9iJJFLWDqGtyqLV5Mbe3?p=preview)

关于装饰器的文档：http: [//docs.angularjs.org/api/AUTO.$provide#decorator](http://docs.angularjs.org/api/AUTO.%24provide#decorator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T16:47:17.757

您可以创建一个属性指令，该指令`dojoType`需要命名的小部件模块（如果需要，还可以使用 mixins）并实例化它们而不是 dojo 解析器。

例如，如果您已经加载了 DOM 的一部分（'ajax'），那么您将首先为其创建一个新范围，编译并将其链接到范围（应用 dojoType 指令），然后您将调用dojo 解析器并指定`rootNode`.

```
dojoParser.parse({
    rootNode: dom.byId(domid)
}).then(/* access the widgets or whatever */); 
```

# javascript - jquery 和 javascript 混合：如何将名称传递给 jquery 选择器

> ID：14509178
> 
> 赞同：1
> 
> 时间：2013-01-24T19:27:52.700
> 
> 标签：javascript, jquery

我想将一些 jquery 滑入另一个我必须工作的程序员 javascript 代码中。我可以这样做吗？查看“收音机”的代码。

```
function blank(field) {
    if ((field.type == "text" || field.type == "textarea") && (field.value == " " || field.value == ""))
            {
                return true;
            }

else if field.type = "radio"
{
$('input[type='radio', **name=passField.NameHere**]:checked').size() > 0);
} 
```

}

所以在上面我想使用 jquery 来查看是否检查了无线电组中的任何内容。

**无线电代码示例：**

```
<input type="radio" name="2074" id="2074" value="Yes" class="valuetext>Yes
<input type="radio" name="2074" id="2074" value="No" class="valuetext>No 
```

我想将已经在另一个函数中捕获的 field.name 传递到 jquery 调用中。这可能吗？如果是这样，怎么做？

下面是收集需要举例的字段的函数：

```
var field = [], blankFields = [],
        listText = [], listItem = [], fieldId = [], label = [];

function checkRequired(fieldList) {
    for (var i = 0; i < fieldList.length; i++)
    {
        listText = fieldList[i];
        listText = listText.substring(1, listText.length - 1);
        listItem = listText.split("||");
        fieldId = listItem[0];
        label = listItem[1];
        field = document.getElementById(fieldId);

        if (visible(field) && blank(field)){
            blankFields.push(label);
        }
    }
    //return blankFields;
    if (blankFields.length > 0) {
        displayError(blankFields);
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:31:19.550

是的，它看起来像是`field`实际的 DOM 对象，所以：

```
$('input[type="radio"][name="' + field.name + '"]:checked').size() > 0); 
```

请注意，除了您调用占位符的明显位置之外，代码中还有几个语法错误。例如：

```
else if field.type = "radio" 
```

您需要围绕条件的括号，并且`=`应该是`==`or `===`。

另请注意，我在几个地方更改`'`为，因为最初您有：`"`

```
$('input[type='radio']... 
```

...它在 之后结束字符串`type=`，因为字符串以 开头，`'`因此以 . 结尾`'`。

# c++ - std::array 复制语义

> ID：14509184
> 
> 赞同：2
> 
> 时间：2013-01-24T19:28:11.653
> 
> 标签：c++, arrays, c++11, copy, copy-constructor

```
#include <array>
#include <iostream>

using namespace std;

struct SimpleDebugger
{
    SimpleDebugger(int val = 0) : x(val) {
        cout << "created" << endl;
    }

    SimpleDebugger(const SimpleDebugger &that) : x(that.x) {
        cout << "copied" << endl;
    }

    ~SimpleDebugger() {
        cout << "killed!" << endl;
    }

    int getX() const {
        return x;
    }

    void setX(int val) {
        x = val;
    }

private:
    int x;
};

array<SimpleDebugger, 3> getInts(int i)
{
    array<SimpleDebugger, 3> a;
    a[0].setX(i);
    a[1].setX(i + 1);
    a[2].setX(i + 2);
    cout << "closing getInts" << endl;
    return a;
}

SimpleDebugger (*getIntsArray(int i)) [3] {
    typedef SimpleDebugger SimpleDebugger3ElemArray [3];
    SimpleDebugger3ElemArray *sd = new SimpleDebugger3ElemArray[1];
    (*sd)[0].setX(i);
    (*sd)[1].setX(i + 1);
    (*sd)[2].setX(i + 2);
    cout << "closing getIntsArray" << endl;
    return sd;
}

ostream& operator << (ostream& os, const SimpleDebugger &sd) {
    return (cout << sd.getX());
}

int main() {
    auto x = getInts(5);
    cout << "std::array = " << x[0] << x[1] << x[2] << endl;
    auto y = getIntsArray(8);
    cout << "Raw array = " << (*y)[0] << (*y)[1] << (*y)[2] << endl;
    delete [] y;
} 
```

**输出**

```
created
created
created
closing getInts
std::array = 567
created
created
created
closing getIntsArray
Raw array = 8910
killed!
killed!
killed!
killed!
killed!
killed! 
```

我尝试了上面的这个程序，看看使用`std::array`原始数组有多方便，我知道避免使用旧式数组是一种很好的风格，更好的是使用`std::vector`.

我想知道`std::array`当函数`getInts()`返回时，引擎盖下会发生什么。对于原始数组，我知道它是一个指针副本，清理它的责任落在被调用者身上。`std::array`这不会发生，但它如何在内部存储数据以及复制如何发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T19:36:27.673

`std::array`是一个聚合，包含一个数组作为其唯一的数据成员。复制或移动一个会将数组的每个元素复制或移动到新数组中。

在您的情况下，副本在从函数返回时被省略；在后台，数组是在自动存储中创建的`main`，并且函数会填充该数组。

# c# - 删除 XML 节点集合中的空/空白元素

> ID：14509188
> 
> 赞同：12
> 
> 时间：2013-01-24T19:28:28.500
> 
> 标签：c#, linq-to-xml, xelement

我有一个这样的 XML 文档：

```
<magento_api>
    <data_item>
        <code>400</code>
        <message>Attribute weight is not applicable for product type Configurable Product</message>
    </data_item>
    <data_item>
        <code>400</code>
        <message>Resource data pre-validation error.</message>
    </data_item>
    <data_item>
        <code>1</code>
        <message></message>
    </data_item>
    <data_item>
        <code></code>
        <message>No code was given</message>
    </data_item>
</magento_api> 
```

我正在尝试迭代每个节点并执行以下操作：

1.  扔掉任何空/空白的元素。
2.  生成仅包含值的元素的新节点。
3.  将生成的文档发送到不同的 Web 服务。

我正在努力的部分是如何遍历每个节点并检查每个元素的空值。

我一直在[http://rextester.com/runco​​de](http://rextester.com/runcode)测试此代码，但似乎无法弄清楚：

```
Console.WriteLine("Querying tree loaded with XElement.Load");
Console.WriteLine("----");
XElement doc = XElement.Parse(@"<magento_api>
          <data_item>
            <code>400</code>
            <message>Attribute weight is not applicable for product type Configurable Product</message>
          </data_item>
          <data_item>
            <code>400</code>
            <message>Resource data pre-validation error.</message>
          </data_item>
          <data_item>
            <code>1</code>
            <message></message>
          </data_item>
          <data_item>
            <code></code>
            <message>No code was given</message>
          </data_item>
    </magento_api>");

int counter = 1;
IEnumerable<XNode> nodes =
    from nd in doc.Nodes()
    select nd;
foreach (XNode node in nodes)
{
    Console.WriteLine(counter + "-" + node);
    IEnumerable<XElement> elements =
    from el in node //this is where I've been trying various methods, but no dice.
    select el;
    foreach (XElement e in elements)
    {
           Console.WriteLine(counter + "-" + e.Name + "-" + e.Value + "\r\n");
    }
    counter++;
} 
```

基于上述 XML 输入，我希望得到以下输出：

```
<magento_api>
    <data_item>
        <code>400</code>
        <message>Attribute weight is not applicable for product type Configurable Product</message>
    </data_item>
    <data_item>
        <code>400</code>
        <message>Resource data pre-validation error.</message>
    </data_item>
    <data_item>
        <code>1</code>
    </data_item>
    <data_item>
        <message>No code was given</message>
    </data_item>
</magento_api> 
```

我不确定我是否使用正确的方法来迭代节点和元素。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-25T06:32:06.473

一个单行就可以完成这项工作，无需遍历所有元素。它是这样的：

```
doc.Descendants().Where(e => string.IsNullOrEmpty(e.Value)).Remove(); 
```

**测试仪**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Linq;

namespace ConsoleApplication1
{
    public class TestRemove
    {
        public static void Main() {
            Console.WriteLine("----OLD TREE STARTS---");
            XElement doc = XElement.Parse(@"<magento_api>
                                              <data_item>
                                                <code>400</code>
                                                <message>Attribute weight is not applicable for product type Configurable Product</message>
                                              </data_item>
                                              <data_item>
                                                <code>400</code>
                                                <message>Resource data pre-validation error.</message>
                                              </data_item>
                                              <data_item>
                                                <code>1</code>
                                                <message></message>
                                              </data_item>
                                              <data_item>
                                                <code></code>
                                                <message>No code was given</message>
                                              </data_item>
                                        </magento_api>");
            Console.Write(doc.ToString());
            Console.WriteLine("");
            Console.WriteLine("----OLD TREE ENDS---");
            Console.WriteLine("");
            doc.Descendants().Where(e => string.IsNullOrEmpty(e.Value)).Remove();
            Console.WriteLine("----NEW TREE STARTS---");
            Console.Write(doc.ToString());
            Console.WriteLine("");
            Console.WriteLine("----NEW TREE ENDS---");
            Console.ReadKey();
        }
    }
} 
```

***它也可以在[这里测试](http://rextester.com/TBFA23842)***

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-03T12:39:08.047

```
doc.Descendants().Where(e => string.IsNullOrEmpty(e.Value)).Remove(); 
```

这一行不会抛出空的父标签，里面装满了空的子标签。它只会删除他们的孩子，这可能适合也可能不适合您的情况。这是一个非常简单的更改来实现这一点，您只需首先从最低级别开始删除。就像是

```
foreach(XElement child in doc.Descendants().Reverse())
{
    if(!child.HasElements && string.IsNullOrEmpty(child.Value) && !child.HasAttributes) child.Remove();
} 
```

感谢 Nyerguds 的属性建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-13T23:47:56.930

在VB中，如果我需要再次找到它：

```
doc.Descendants().Where(Function(e) String.IsNullOrEmpty(e.Value)).Remove() 
```

# python - 每个进程中的管道是否独立？

> ID：14509190
> 
> 赞同：1
> 
> 时间：2013-01-24T19:28:34.447
> 
> 标签：python, subprocess, pipe

如果我生成多个`subprocess.Popen(['commands', 'that', 'I', 'called'])`并且为每个我执行`stdin.write(..)`或`p.communicate(...)`与命令交互，它是否保证是独立的并且会返回到每个进程（来自被调用命令的标准输出）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:36:01.653

如果你这样做：

```
proc = subprocess.Popen(
    cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE)
stdout, _ = proc.communicate() 
```

您将为每个进程获得一组单独的管道。该值`subprocess.PIPE`只是一个特殊的标志，用来告诉`subprocess.Popen()`创建一个新管道——所以上面的命令创建了两个新管道：一个管道用于`stdin`和一个单独的管道`stdout`。

如果你这样做：

```
proc = subprocess.Popen(cmd)
proc.wait() 
```

新进程将与您的进程共享`stdin`、`stdout`和`stderr`（嗯，基本上 - 内核端将被共享）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:32:08.383

我不了解python，但就C而言，管道并不是每个进程都独立的。

管道的唯一目的是在父进程和子进程之间甚至子进程本身之间进行通信。

由特定进程写入管道的数据可以由另一个进程从管道的读取端读取。

# c++ - 您可以模板专门化一个未模板化的子类吗？

> ID：14509191
> 
> 赞同：1
> 
> 时间：2013-01-24T19:28:37.760
> 
> 标签：c++, templates, template-specialization, virtual-functions

这是我的情况：

基类，无模板类型：

```
struct Thing
{

} ; 
```

模板类，扩展了那个基类

```
template <typename T> struct VertexWriter : public Thing
{ 
    template <typename S>
    bool intersects( S* otherThing )
    {
        // has a body, returns T or F
    }
} ; 
```

派生类，CONCRETE 类型（无模板）

```
struct Rocket : VertexWriter<VertexPNCT>
{
    template <typename S>
    bool intersects( S* otherThing ) ; // WANTS TO OVERRIDE
    // implementation in VertexWriter<T>
} ; 
```

但`template typename<S> bool VertexWriter<T>::intersects`不能标记为virtual，因为它是一个模板类。

有许多类派生自`VertexWriter<VertexPNCT>`特化，因此模板特化`VertexWriter<VertexPNCT>`不起作用。

所以正常的做法是提供模板特化。

但是`Rocket`指定它是一个`VertexWriter<VertexPNCT>`，所以它不再是一个模板类。`intersects`它可以像虚拟功能一样专门化或覆盖吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:45:31.517

不，正如您所说，您不能使用虚拟函数，它会提供运行时多态性。

也就是说，根据您在更改课程布局方面的余地，您也许可以使用 CRTP 做一些事情。

```
template <typename T, typename Derived> struct VertexWriter : public Thing
{ 
    template <typename S>
    bool intersects( S* otherThing )
    {
        return static_cast<Derived*>(this)->insersects_impl(otherThing);
    }

    template<typename S>
    bool insersects_impl( S* otherThing)
    {
         // Whatever
    }
} ;

struct Rocket : VertexWriter<VertexPNCT, Rocket>
{
   template <typename S>
   bool intersects_impl( S* otherThing ) { ... } // WANTS TO OVERRIDE
                       // implementation in VertexWriter<T>
} ; 
```

`intersects`简单转发到 CRTP 函数的基本实现。如果派生类覆盖它，它将使用覆盖，否则它将回退到默认值。请注意，这确实使您的类层次结构复杂化，但可能会完成您正在寻找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:36:56.927

你不能。

**模板化的成员函数不能是虚拟的。**

VertexWriter 是模板化的、专用的还是普通的类都没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:48:02.433

您可以在该类模板`VertexWriter`上进行模板化`S`并创建一个虚函数`intersects`

```
template <typename T, typename S> struct VertexWriter : public Thing
{ 
    virtual bool intersects( S* otherThing )
    {
        // has a body, returns T or F
    }
} ; 
```

现在您可以`intersects`在派生类中覆盖

```
template<typename S>
struct Rocket : VertexWriter<VertexPNCT, S>
{
    virtual bool intersects( S* otherThing ) ; // WANTS TO OVERRIDE
    // implementation in VertexWriter<T>
} 
```

# python - 如何在 Python 中从其他项目中导入函数？

> ID：14509192
> 
> 赞同：42
> 
> 时间：2013-01-24T19:28:40.223
> 
> 标签：python, import

我在一个项目中有一些代码，我想在另一个项目中重用它们。我需要做什么（在两个文件夹中）才能做到这一点？

目录结构类似于：

*   富
    *   项目1
        *   文件1.py
        *   文件2.py
*   酒吧
    *   项目2
        *   文件X.py
        *   文件Y.py

我想在 fileX.py 和 fileY.py 中使用来自 file1.py 和 file2.py 的函数。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-24T19:42:45.540

理想情况下，这两个项目都是一个可安装的 python 包，包含 __init__.py 和 setup.py。然后可以使用`python setup.py install`或类似方式安装它们。

如果这是不可能的，*请不要*使用`execfile()`！操作`PYTHONPATH`添加`Foo`以便`import Project1.file1`工作。

例如，来自 Project2/fileX.py：

```
from os import path
import sys
sys.path.append(path.abspath('../Foo'))

from Project1.file1 import something 
```

然而，*真正的*答案是让每一个都成为一个独立的可安装包。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T19:40:14.593

这里发生了很多事情。您应该阅读有关 python 包和模块管理的信息[http://docs.python.org/2/tutorial/modules.html#packages](http://docs.python.org/2/tutorial/modules.html#packages)但基本思想是 fileX 需要知道 file1 和 file2 在哪里才能使用它们。

要将文件夹变成一个包，它只需要包含一个`__init__.py`文件。我建议你做的是（在终端中）

```
$ touch Foo/__init__.py
$ touch Foo/Project1/__init__.py 
```

（假设您使用的是 unix/linux）。

然后不知何故，fileX 需要知道`Foo`包在哪里。你可以调用`sys.path.append(PATH)`where PATH 是 Foo 的位置。

最后在 fileX.py 里面你会有

```
import sys
sys.path.append(PATH) #replace PATH with the path to Foo

from Foo.Project1 import file1

#use its functions
file1.function_name(argument) 
```

如果您真的只想说`function_name`没有前面的`file1.`内容，您可以通过说`from Foo.Project1.file1 import *`但是*请*注意这`from module import *`是**非常**不受欢迎的，因为它混合了名称并使代码的可读性和可理解性降低

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-24T19:32:41.683

您可能想用它制作一个[模块](http://docs.python.org/2/tutorial/modules.html)，然后从中导入您需要的任何东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-24T19:39:32.247

您获取要在两个项目中使用的代码，然后将其放入一个[模块](http://docs.python.org/2/tutorial/modules.html)中，然后将其提取到第三个单独的项目中。你把那个项目做成一个包，你可以单独处理它。然后你发布它的版本，并在你的其他项目中重用它们。

拥有可以“发布”的版本非常重要，这样您就可以跟踪每个项目使用的模块版本。否则，您最终会遇到旧项目停止工作的情况，因为您对公共模块进行了不兼容的更改。

如果它不仅对您而且对其他人普遍可用，请考虑将其上传到[PyPI](http://pypi.python.org/)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T19:36:03.827

我认为您可以使用or和 do添加`Foo`到当前 Python 路径。`os.path.join()``os.path.append()``from import Project1.file1 import function_name`

# c++ - 无法绑定到本地端口 - WSAEADDRINUSE

> ID：14509195
> 
> 赞同：1
> 
> 时间：2013-01-24T19:28:50.287
> 
> 标签：c++, network-programming, port, bind

我们在 Windows 上有一个服务器应用程序无法绑定本地端口 (3050) 并给出错误`WSAEADDRINUSE - Address already in use.`

但是，我使用 SysInternals Utility ( **TCPView** ) 检查了没有进程正在侦听该端口。

请提出这背后的原因以及解决此问题的任何解决方法。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:31:07.127

该错误情况将在两种情况下发生：

1) 另一个套接字已经绑定到该地址

2) 绑定到该地址的套接字最近被关闭。

在第一种情况下，我想问题是您在同一个程序中绑定到该端口号两次。

在第二种情况下，我想您的程序的先前运行在您的测试前不到 120 秒退出或崩溃。当您运行 TCPView 时，已经过了 120 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:35:44.480

如果您有权访问底层 C++ 代码，则可以`setsockopt()`在`SO_REUSEADDR`调用`bind()`. 这将允许您的程序重新绑定到给定的端口，即使先前程序运行的套接字“徘徊”。

# ruby-on-rails - Rails 应用程序创建双重

> ID：14509201
> 
> 赞同：0
> 
> 时间：2013-01-24T19:29:27.113
> 
> 标签：ruby-on-rails

我不会详细介绍很多细节，因为这已经发生在多个模型中。

我有一个 Rails 3 应用程序。有时，当我通过浏览器使用创建功能时，我会收到 2 个我试图创建的内容。

我是否遗漏了一个常见问题，还是应该开始为我的所有模型添加“uniq”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:30:12.480

使用 JavaScript 防止多次点击。

“我可能会考虑在初始点击后禁用按钮。像

```
$('button').onClick().hide(). 
```

"

# javascript - 如何在没有元标记的情况下将 IE 更改为不兼容模式

> ID：14509202
> 
> 赞同：2
> 
> 时间：2013-01-24T19:29:30.043
> 
> 标签：javascript, html, internet-explorer

我需要更改 IE 浏览器以使用最新模式 9 或 10，但我无权访问标题，因此无法放入 tag `<meta http-equiv="X-UA-Compatible" content="IE=Edge">`。我确实使用 DOM Manipulation 将标签添加到标题标签的开头，但由于页面的那部分在 jquery 可以放入之前已经加载，它不会影响 IE。有没有办法改变模式，或者只重新加载一次标题，这样它就改变了它的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:20:38.693

该页面是如何托管的，您是否有权访问 Web 服务器配置？如果是这样，您可以将 X-UA-Compatible 设置为响应标头。例如，配置 Apache 会是这样的：

```
<IfModule headers_module>
    Header set X-UA-Compatible: IE=Edge 
</IfModule> 
```

并且可以在 Apache 的 httpd.conf 或 .htaccess 文件中完成（如果启用了 AllowOverride）。

如果您无权访问 Web 服务器配置，则可以尝试从您用于提供页面的任何语言/框架中设置相同的标头。

# ios - 如何获取相关实体的特定属性？

> ID：14509203
> 
> 赞同：0
> 
> 时间：2013-01-24T19:29:42.510
> 
> 标签：ios, core-data

在我的应用程序中，我有两个实体：交易和地址。它们通过多对多关系连接。Address 实体有很多属性——纬度和经度是其中的两个。是否可以获取所有 Deal 对象及其相关的 Address 对象，以便仅检索 Address 对象的某些属性（纬度和经度）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:11:46.620

如果我理解正确，您不想过滤获取的结果。您需要*所有*交易，然后只需要关联地址的属性子集。

从您的问题中不清楚您想如何使用这些结果。Address 实体的属性是否仍必须与相应的 Deal 实体相关联？

如果没有，您可以简单地获取所有地址实体并获取您想要的属性。因为 Core Data 将通过仅获取所需的属性来帮助您管理内存，您可以简单地获取整个对象。然后可以轻松生成所有实例的属性数组，如下所示：

```
[allAddresses valueForKeyPath:@"attributeName"]; 
```

您也可以直接将获取请求的`resultType`属性设置为`NSDictionaryResultType`并指定`propertiesToFetch`.

另一种情况是您不希望交易和地址之间的关系中断。在这种情况下，只需获取所有交易（Core Data 将使用*故障*来减少内存占用）。然后，您可以遍历结果并轻松获取每个属性。

```
for (Deal *deal in allDeals) {
   NSSet *allLongitudesInAddresses = 
             [deal.addresses valueForKeyPath:@"longitude"];
   // do something with the attributes
} 
```

# c# - TreeView EndUpdate() 调用没有像我想象的那样工作

> ID：14509205
> 
> 赞同：0
> 
> 时间：2013-01-24T19:29:53.157
> 
> 标签：c#, .net-4.0, treeview

所以我有一个扩展的树视图，以便用户可以选择多个项目，但我遇到了一个小错误，它会随机停止绘画本身。

经过一番挖掘，我实际上发现是我的 MouseDown 和 MouseUp 事件导致了问题：

```
 protected override void OnMouseDown(MouseEventArgs e)
    {
        BeginUpdate();
        base.OnMouseDown(e);
    }

    protected override void OnMouseUp(MouseEventArgs e)
    {
        EndUpdate();
        base.OnMouseUp(e);
    } 
```

因此，如果用户在 TreeView 中单击，但在其外部释放，则不会调用 MouseUp 事件，并且更新不会结束。我明白了很多，但奇怪的是在那之后，无论他们在框中单击多少次，它都不会再次开始绘制，即使现在正在调用 EndUpdate()。这可以通过添加一个带有 EndUpdate() 的按钮来解决，但显然我不希望这样。

我什至需要这个的原因是我手动管理节点的着色以及所选节点，因此所有正常的选择事件实际上都被取消了。但是如果没有开始和结束更新，我仍然会在选择框到达取消之前闪烁。有了这些，我就不会闪烁，但显然这是有代价的。

[这是一个演示该问题的空项目的保管箱链接。](http://dl.dropbox.com/u/5953371/TreeViewTest.rar) 如果您在结束更新时中断，您可以看到它正在被调用，但它似乎并没有改变任何东西。但是，如果您单击调用相同代码的按钮，它会解决它。

谁能解释为什么会这样？我错过了一些非常明显的东西吗？或者这只是一般的坏方法？

问候。

**答：** 由于没有提交任何答案，这是 Hans Passant 引起我注意的解决方案。不想发布并标记为自己的答案，因为我没有想出这个。将此添加到我的扩展 TreeView 类中，所有问题似乎都已解决。（尽管它可能会做出一些糟糕的决定，但除了浪费之外，它似乎并没有伤害任何东西）。

```
 protected override void OnMouseCaptureChanged(EventArgs e)
    {
        EndUpdate();
        base.OnMouseCaptureChanged(e);
    } 
```

# vba - 从引用父标签的类名或 ID 的子标签中提取数据

> ID：14509206
> 
> 赞同：1
> 
> 时间：2013-01-24T19:30:05.167
> 
> 标签：vba, excel

我需要从 HTML 标记下方提取消息“我要重试的消息”

```
<div id="m_7qo0yziAwqKk02Gud0IM" style="padding: 0px 0px 10px; width: 681px;" class="w-7qo0yziAwqKk02Gud0t9 moduleContent">
 <div id="ext-comp-1345" class=" x-panel" style="width: 681px;">
 <div class="x-panel-bwrap" id="ext-gen931">
 <div class="x-panel-body x-panel-body-noheader x-column-layout-ct" id="ext-gen932" style="width: 681px;">
 <div class="x-column-inner" id="ext-gen934" style="width: 681px;">
 <div id="ext-comp-1346" class=" x-panel diff-area diff-enabled x-column" style="font-size: 23px; width: 591px;">
 <div class="x-panel-bwrap" id="ext-gen936">
 <div class="x-panel-body x-panel-body-noheader" id="ext-gen937" style="width: 591px;">message i've to retry</div>
 </div>
 </div>
 <div id="ext-comp-1348" class=" x-panel x-column" style="padding: 4px 0px 4px 2px; font-size: 11px; color: rgb(160, 160, 160); width: 589px;">
</div>
 </div>
 </div>
 </div>
 </div>
 </div> 
```

我使用下面的 VBA 代码指向父标签，但不知道如何指向子标签来获取数据。

```
Dim IE As New InternetExplorer
Dim doc As HTMLDocument
Set doc = IE.document
IE.navigate "Site link"
Dim dd As Variant
dd = doc.getElementById("m_7qo0yziAwqKk02Gud0IM") 
```

谁能带领我

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:48:18.070

我用下面的代码来获取数据，

```
Dim finalout As Variant
Dim dd As HTMLObjectElement    
Set dd = doc.getElementById("m_7qo0yziAwqKk02Gud0IM") 'assign web elements to a HTML document object
finalout = dd.getElementsByClassName(" x-panel x-column")(2).innerText  'now we have a bunch of required webtags in dd, out of which get your data by using methods and proper syntax
MsgBox finalout 
```

它对我有用。:-)

# c - 释放未分配的指针

> ID：14509217
> 
> 赞同：1
> 
> 时间：2013-01-24T19:30:46.217
> 
> 标签：c, memory, memory-leaks

以下代码引发错误：

mem(44582) malloc：*** 对象 0x7f9f8a4000e0 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以调试 Abort 陷阱：6

我不确定发生了什么事。我正在释放我明确 malloc'd 的内存区域，它与传递指向另一个方法的指针有关吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define BUFFERSIZE 10

void readstringbuffered(char *buffer);

int main(int argc, char const *argv[])
{
    char *buffer = (char *)malloc(BUFFERSIZE);
    readstringbuffered(buffer);                                               
    printf("%s",buffer);
    free(buffer);

    return EXIT_SUCCESS;
}

void readstringbuffered(char *buffer) 
{
    FILE *source;
    source = fopen("hello.txt","r");
    int current_size = BUFFERSIZE;
    int len = 0;
    int c;
    while((c = fgetc(source)) != EOF)
    {
        if(len == current_size-1)
        {
            current_size *= 2;
            char *temp = (char *)realloc(buffer,current_size);
            if(!temp)
            {
                fprintf(stderr,"out of memory");
                exit(1);
            }
            buffer = temp;
        }
        buffer[len] = c;
        len++;
    }
    buffer[len] = 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T19:32:18.320

C 是一种按值传递的语言。`buffer`您对函数内部所做的修改对in`readstringbuffered()`的值没有影响。如果曾经执行过，那么您已经释放了知道的内容，并且当您返回时 - BAM - 双重释放。`buffer``main()``realloc()``buffer``main`

一种可能的解决方案是将指针传递给`buffer`，而不是`buffer`自身。将签名更改`readstringbuffered()`为：

```
void readstringbuffered(char **buffer) 
```

然后`*buffer`在里面使用。在调用站点，您将使用`readstringbuffered(&buffer)`传递必要的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:34:16.017

realloc() 可以释放先前分配的内存并在其他地方再次分配，这使得 main 中的缓冲区指针完全无效。您可以通过引用传递缓冲区并让 readstringbuffered() 相应地对其进行修改，或者返回指向缓冲区的指针而不是 void。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T19:36:46.667

缓冲区指针`main()`不会根据您在 中所做的重新分配而修改`readstringbuffered()`，您可以使用指向缓冲区指针 ( `pBuffer`) 的指针写回缓冲区指针，如下所示：

```
void readstringbuffered(char** pBuffer,size_t* pSize) 
{
    char* buffer = *pBuffer;
    size_t size = MIN_SIZE;
    char* newBufferPtr = (char*) realloc(buffer,size);
    if(newBufferPtr)
    {
        buffer = newBufferPtr;            
    }
    else
    {
        //out of memory
        free(buffer);
        buffer = NULL;
        size = 0;
    }

    if(buffer)
    {
        //fill the buffer
    }

    //must always execute
    *pBuffer = buffer;
    *pSize = size;
}

int main(int argc, char const *argv[])
{
    char* buffer = NULL;
    size_t size = 0;
    readstringbuffered(&buffer,&size);
    if(buffer)
    {
        printf("%s",buffer);
        free(buffer);
    }
    else
    {
        //error
    }

    return EXIT_SUCCESS;
} 
```

# javascript - JQuery 将对象附加到附加对象

> ID：14509224
> 
> 赞同：0
> 
> 时间：2013-01-24T19:31:21.600
> 
> 标签：javascript, jquery, html

我想将一个对象附加到一个已经附加的对象：

```
$("#object1").append('<div id="object2'>foo</div>;
$("#object2").append('<div id="object3'>bar</div>; 
```

这不行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:31:50.000

您的报价已关闭。将您的 HTML 字符串用单引号括起来：

```
$("#object1").append('<div id="object2">foo</div>');
$("#object2").append('<div id="object3">bar</div>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:33:20.637

```
$("#object1")
  .append(
    $("<div id='object2'>foo</div>")
       .append("<div id='object3'>bar</div>")
  ); 
```

# django - 处理 NoReverse 错误

> ID：14509225
> 
> 赞同：2
> 
> 时间：2013-01-24T19:31:22.040
> 
> 标签：django, django-urls

老实说，我还没有掌握 django url。所以我显然不知道如何解决这个错误。`views.py`我有：

```
def get_category(request,id):
    categories = Category.objects.get(pk=id).prefetch_related('item')
    context={
        'categories':categories,
    }
    return render_to_response('category.html',context,context_instance=RequestContext(request)) 
```

在我的`urls.py`：

```
url(r'^menu/(\d+)$',get_category, name="f4l_menu"), 
```

在我的模板中，

```
<a href="{% url f4l_menu category.id %}"> 
```

这是返回一个错误，

> 未找到带有参数 '('',)' 和关键字参数 '{}' 的 'f4l_menu' 的反向操作。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:37:15.490

尝试以下方法：

网址.py

```
url(r'^menu/(?P<id>\d+)$',get_category, name="f4l_menu"), 
```

模板

```
{% load url from future %}

<a href="{% url "f4l_menu" id=category.id %}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:44:21.840

模板中似乎`category.id`是空的，就像错误消息说的那样。`'('',)'`调试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:39:12.403

您混淆了模板中视图和上下文之间的名称。在您使用的模板`category`和您分配的视图中 `categories`。修复视图，它最终是这样的：

看法：

```
def get_category(request,id):
    category = Category.objects.get(pk=id).prefetch_related('item') # See? Here.
    context={
        'category': category,
    }
    return render_to_response('category.html', context, context_instance=RequestContext(request)) 
```

模板：

```
<a href="{% url f4l_menu category.id %}"> 
```

# c# - 将信息从 Silverlight 发送到 Torque 的最佳方法？

> ID：14509228
> 
> 赞同：0
> 
> 时间：2013-01-24T19:31:46.257
> 
> 标签：c#, silverlight, networking, torque3d

我正在为名为 Blockland 的沙盒游戏编写地形生成器。生成器在 Silverlight 5 中，游戏使用 Torque 3D。我需要做的是从网站向程序发送一个字符串列表，并得到双方的批准。这样做最简单的方法是什么？

# facebook - Facebook javascript sdk 无法正常工作

> ID：14509229
> 
> 赞同：0
> 
> 时间：2013-01-24T19:31:47.240
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用以下代码进行 facebook 身份验证。

```
<html>
<head>
</head>
 <body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '498085136....',
        status     : true, 
        cookie     : true,
        xfbml      : true,
        oauth      : true,
      });
    };
    (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document));

   //LOGIN FUNCTION 
   function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            alert('Success!');
        }else{
            alert('Login Failed!');
        }
    }, {scope: 'email'});
 }
  </script>
  <div onclick="login();">Login with Facebook</div>
</body>
</html> 
```

我不知道该代码有什么问题。当我检查我的错误控制台时，它显示 FB 未定义..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:32:46.287

像这样制作你的html标签

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml"> 
```

# jsf-2 - @SessionScoped bean 维护对其 HttpSession 的引用是否线程不安全？

> ID：14509230
> 
> 赞同：3
> 
> 时间：2013-01-24T19:31:48.847
> 
> 标签：jsf-2, cdi, httpsession

看看[另一个问题的答案的不相关部分](https://stackoverflow.com/a/11000345/984932 "JSF 请求范围的托管 bean http-session 导致实例化")，虽然我理解为什么在问题的示例中对请求和响应的引用是线程不安全的，为什么 SessionScoped bean 引用它所绑定的 HttpSession 是线程不安全的？

```
@SessionScoped
public class SessionManager {
    HttpSession session = null;
    ...
    @PostConstruct void initialize() {
        this.session = (HttpSession)FacesContext.getCurrentInstance().getExternalContext().getSession(false);
    }

    private void onLogin(@Observes @LoggedIn User user) {

        // (1) housekeeping stuff

        // (2) destroy older, duplicate login session, if user did not previously 
        //     logout, in which case it would be really handy to have a reference
        //     to HttpSession. 

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:07:33.220

在实现我在上面勾勒出的示例时（请参阅 OP），我意识到维护对会话的引用并不好，因为它确实是线程不安全的。这是臭代码。

我惊讶地发现不仅旧会话无效，而且当前会话也被容器破坏了！因此，用户在两个浏览器中都已注销。后来，我遇到了[这个 Websphere 最佳实践文档](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/cprs_best_practice.html "使用 HTTP 会话的最佳实践")，虽然我没有使用 Websphere，但它帮助我意识到缓存会话根本不是一个好的实践：

> 避免尝试在每个 servlet 或 JSP 文件之外保存和重用 HttpSession 对象。
> 
> HttpSession 对象是 HttpRequest 的一个函数（只能通过 req.getSession 方法获取），它的副本只在 servlet 或 JSP 文件的 service 方法的生命周期内有效。您不能缓存 HttpSession 对象并在 servlet 或 JSP 文件范围之外引用它。

不需要缓存HttpSession；可以改为缓存会话 ID，当发现重复会话时，只需将前一个重复会话的 ID 添加到`Set<String> invalidatedLoginSessionIds.`然后重构应用程序，以便在收到来自旧会话的请求后立即使旧会话无效并将旧浏览器重定向到适当的 facelet . 如果没有收到这样的请求，旧会话将简单地超时并被销毁，所以不用担心。

# .net - 将角色设置为用户以获取登录时间

> ID：14509235
> 
> 赞同：0
> 
> 时间：2013-01-24T19:32:00.117
> 
> 标签：.net, asp.net-mvc

我想在登录后为某些用户设置角色。注意，我不想将用户永久添加到该角色并写入数据库，只需在登录后设置一些角色，然后检查该用户是否在该角色中。是否可以 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:03:00.147

我将创建您自己的具有 AppRoles 的 AppUser 类。
您可以将您的 AppRoles 链接到成员角色（或不链接）。

我这样做是为了可以伪造用户角色以进行测试并包含会员服务代码。

# php - TbButtonColumn $data 错误

> ID：14509237
> 
> 赞同：0
> 
> 时间：2013-01-24T19:32:12.520
> 
> 标签：php, yii

我正在尝试使用`$data->id`on`TbButtonColumn`但出现错误`"Trying to get property of non-object"`。工作`TbGridView`正常！我做错了什么？

查看.php：

```
<?php  $this->widget('bootstrap.widgets.TbGridView',array(
    'type'=>'striped bordered condensed',
    'id'=>'profiles-grid',
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        'id',
        array(
            'class'=>'bootstrap.widgets.TbButtonColumn',
            'template'=>'{create}',
            'buttons'=>array
            (
                'create' => array(
                    'label'=>'Criar Evento',
                    'icon'=>'plus',
                    'url'=>'Yii::app()->controller->createUrl("events/create", array("id"=>$data->id))', // Problem here on $data->id
                ),
            ),
        ),
    ),
)); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:27:18.423

像这样设置按钮的网址对我有用：

```
'url'=>'$this->grid->controller->createUrl("update", array(
            "id"=>$data->primaryKey))', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:38:05.210

您得到的错误是由`$data`不是对象的事实引起的。您不能`->`对任何其他变量类型使用属性访问运算符。

从您的问题中不清楚在哪里`$data`分配了一个值，或者该值应该是什么。`is_object`您可以使用以下函数确保变量包含对象：

```
if (!is_object($data))
  die('There seems to be a problem with the data'); 
```

这将告诉您这`$data`不是对象，从而防止错误。但是，我怀疑根本问题是您希望填充`$data`变量的任何机制都失败了，或者没有按照您期望的方式工作。

您可以使用`var_dump`调试变量并在过程中检查它们的类型：

`var_dump($data);`

...这将使您更好地了解`$data`实际是什么——它不是一个对象，这是肯定的！

**文档**

*   `is_object`- [http://php.net/manual/en/function.is-object.php](http://php.net/manual/en/function.is-object.php)
*   关于变量的 PHP 文章 - [http://php.net/manual/en/language.variables.php](http://php.net/manual/en/language.variables.php)
*   关于对象的 PHP 文章 - [http://php.net/manual/en/language.types.object.php](http://php.net/manual/en/language.types.object.php)
*   `var_dump`- [http://php.net/manual/en/function.var-dump.php](http://php.net/manual/en/function.var-dump.php)

# c# - 使用多线程 c# 时访问 infopath 控件

> ID：14509240
> 
> 赞同：0
> 
> 时间：2013-01-24T19:32:27.043
> 
> 标签：c#, multithreading, infopath2010

我正在尝试从与其余逻辑分开的线程中的方法修改 InfoPath 表单中的控件，但它不起作用。有没有办法使这项工作？我使用不同线程的原因是因为我试图在绘制签名板时回显图形。

```
public void InternalStartup()
{
    readSigThread = new Thread(new ThreadStart(Run));
    readSigThread.Start();
}
public void Run()
{
     while (!done)
     {
        SigPlus.SetImageXSize(400);
        SigPlus.SetImageYSize(100);
        SigPlus.SetImagePenWidth(11);
        SigPlus.SetJustifyMode(5);
        Image sigImage = SigPlus.GetSigImage();
        String sigBase64 = ImageToBase64(sigImage, ImageFormat.Jpeg);
        DeleteNil(imgCanvas);
        imgCanvas.SetValue(sigBase64); // image canvas is the control that I am trying to change.
    }
} 
```

在原始线程中，我有一个按钮单击侦听器以指示绘图已完成。但是在新线程启动后，侦听器似乎也停止了工作。

# php - 将复选框更改保存到数据库

> ID：14509246
> 
> 赞同：0
> 
> 时间：2013-01-24T19:32:46.257
> 
> 标签：php, database, checkbox

我正在寻找将更改保存到数据库的复选框列表的最佳方法。这是我的设置：

根据一些数据库条目，我有一个选中或未选中的复选框列表，例如：

```
Animals I like: 
0 Cats 
X Dogs
0 Birds
X Elefants 
```

现在用户可以完全改变他/她的想法并选择`Birds`和取消选择`Dogs`，我想尽可能有效地将此更改保存在数据库中。

数据库的结构方式是，我有一个用户表（带有 user_id）和一个动物表（带有 animal_id）。“喜欢”在数据透视表中进行跟踪（因为它是多对多关系）。

以下是我考虑过的一些方法，但我对任何其他/更好/更有效的方法感兴趣：

1) 保存时，删除该用户数据透视表中的所有条目，并仅输入选中的条目。

这样做的好处是我不需要比较很多之前/之后的选择。缺点是我删除了一个没有改变的条目（即上面例子中的elefants）。例如，如果我将创建时间戳附加到 elefant 之类的东西上，它每次都会更改，即使我没有更改该选择

2）保存时，我查询数据库以获取所有原始喜欢的列表。我将此列表与新的新喜欢进行比较。每次我遇到一个不在新列表中的原始喜欢时，我都会将其删除。如果我遇到一个不在原始列表中的新的，我会添加它。

这具有仅更改对数据库的更改的优点，但它看起来像一个非常多的查询。如果动物列表很长并且进行了许多更改，则循环可能会导致大量数据库事务。

那么，解决这个问题的最佳实践是什么。我的意思是，这一定是一个普遍的问题，我不想在这里重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:22:09.347

选项 1 是最好的，但由于您不希望时间戳受到干扰，因此您可以做一个比“单独检查每条记录”更有效的系统。

1) 从数据库 $original 中获取用户选择的列表。

2) 从提交的表单中获取选项列表，$submitted。

3) 使用 array_diff() 找出发生了什么变化以及你需要对数据库做什么：

例如

```
$original = array(2,4,6,8);
$submitted = array(4,7,8);
// so 2 and 6 have been removed, and 7's been added.

$unchanged = array_intersect($original, $submitted); // 4, 8
$removed = array_diff($original, $submitted); // 2, 6
$added = array_diff($submitted, $original); // 7

$sql = "DELETE FROM pivot_table WHERE animal_id IN (2, 6);"; // remove 2&6
$sql = "INSERT INTO (animal_id, ...) VALUES (7, ...)"; // insert 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:37:01.230

当您最初向用户提供选择时，您已经完成了数据库查询以显示她/他已经检查过的内容。现在您可以将更改与原始版本进行比较。如果有变化，请更新，否则，不要管它。

# apache - 从存储库签出代码时出现 SVN 错误 E175002

> ID：14509251
> 
> 赞同：18
> 
> 时间：2013-01-24T19:33:11.430
> 
> 标签：apache, svn, webdav, svn-checkout

尝试从在线存储库中签出代码时，出现以下错误：

> E175002: '/repos/xxx/!svn/vcc/default' 的报告

我正在尝试从远程计算机签出代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T19:33:11.430

经过长时间的研究，我终于找到了一个解决方案，解决方案是将`allow from all`svn配置放在`httpd.conf`：

```
<Directory /repos>
...
allow from all
...
</Directory> 
```

svn checkout 现在工作正常

以上是针对 apache 2.2

如果你使用 apache 2.4

```
<Directory /repos>
    ...
    require all granted
    ...
    </Directory> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-01T13:05:13.117

在我的情况下，我是`E175002`因为缺少 Subversion 服务器的 DNS 记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-30T15:14:20.197

我有两个问题：

a) `svn`apache 用户无法读取该文件夹

b）可能`Directory`没有正确设置

在我的示例中，SVN 存储库安装在`/home/svn`.

1)`chown apache.svn -R /home/svn`

2）修改subversion.conf：

```
<VirtualHost svn.xxx.com:443>
    ServerName svn.xxx.com
    DocumentRoot /home/svn/

  <Directory "/home/svn/">
        AllowOverride None
        Order allow,deny
        Allow from all
        Options None
    </Directory>

SSLEngine on
SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL

SSLCertificateFile /etc/pki/tls/certs/ca.crt
SSLCertificateKeyFile /etc/pki/tls/private/ca.key

<FilesMatch "\.(cgi|shtml|jsp|html|htm|php?)$">
    SSLOptions +StdEnvVars
</FilesMatch>

SetEnvIf User-Agent ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0

CustomLog /var/log/httpd/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

alias /svn /home/svn

<Location /svn>
 DAV svn
 SVNPath /home/svn
 SVNListParentPath On
 AuthType Basic
 AuthName "Repositorio Subversion"
 AuthUserFile /etc/httpd/dav_svn.passwd
 Require valid-user
 allow from all
</Location>

</VirtualHost> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-03T10:43:02.320

我已经更改了 Windows 密码，然后我尝试检查代码，结果出现上述未知主机错误。

我已经重新启动了 Eclipse 并重新启动了我的 Eclipse 已设置的虚拟机。

现在我可以结帐了。希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-10T09:57:10.857

我有同样的错误，但错误的原因是，我在代理服务器后面。我可以通过将 SVN 配置为使用此代理服务器来解决此问题。可以在以下讨论中找到如何执行此操作的详细信息：

[如何为 svn 配置 HTTP 代理](https://stackoverflow.com/questions/1491180/how-to-configure-a-http-proxy-for-svn)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-01T14:55:15.023

在 OSX 环境下，可以检查 ~/.subversion/server 如果你在代理后面，可以编辑 http-proxy-xxxxx 属性

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-31T10:15:41.760

同样的问题发生在我身上，可以通过`UPDATE`在不完整的签出文件夹上运行 SVN 命令来完成项目的签出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-11T21:25:49.663

我今天在 Code Composer Studio 中遇到了这个问题，我尝试提交的四个文件中只有一个产生了错误。使用命令行为我解决了这个问题。

更多细节：插件中的任何命令都不会清除错误，但从命令行提交可以正常工作。（这可能意味着插件中的错误或配置错误。但只要 CLI 工作，我就可以忍受它。插件--subclipse--似乎不再受支持，所以我在它似乎工作时使用它，如果没有，则回退到命令行。到目前为止，插件中出现的每个问题都没有出现在命令行中。）

# c++ - 只知道保留纵横比的比例因子就重新缩放图像

> ID：14509257
> 
> 赞同：-1
> 
> 时间：2013-01-24T19:33:36.347
> 
> 标签：c++, image-processing, resolution, rescale

好的，我知道这听起来像是对另一个问题的重新发布，但我找不到任何人问与我相同的问题，或者我错了，因为这不是处理问题的方式，但无论如何它来了：

我有一个输入图像，比如 HD 1920*1080，我只知道一个比例因子：比如 0.3（原始尺寸的 30%）。如何计算接近原始目标 30% 的新目标大小，同时保持纵横比？换句话说，如何准确地将图像重新缩放到 30%？

如果这没有任何意义，请您告诉我如何在不知道目标大小且只知道比例因子的情况下缩放图像？

谢谢

ps：我用的是C/C++，但是伪代码还可以

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:41:16.113

如果你的高度和宽度是整数，你可以这样做......

```
height = height * (int)(scaleFactor*100) / 100;
width  = width  * (int)(scaleFactor*100) / 100; 
```

或者，此解决方案也适用于`int`浮点变量，但更有意义......

```
height = floor(height * scaleFactor);
width  = floor(width  * scaleFactor); 
```

或者，无论变量类型如何，您都可以让编译器担心如何处理舍入...

```
height = height * scaleFactor;
width  = width  * scaleFactor; 
```

...但是使用该解决方案，您可能会从一个平台到下一个平台的舍入误差为 1。不过，这在您的用例中可能并不重要。

另一种可能性，如果你`scaleFactor`本身是一个`int`并且（在这个例子中）是 30%，那么`scaleFactor`可能是 value `30`，你只需这样做......

```
height = height * scaleFactor / 100;
width  = width  * scaleFactor / 100; 
```

关键是，如果您将 x 和 y 坐标按相同的因子缩放，则可以保留原始纵横比。

# javascript - 如何查看一个类是否已实例化

> ID：14509259
> 
> 赞同：1
> 
> 时间：2013-01-24T19:33:40.460
> 
> 标签：javascript, class, coffeescript

这是一个代码示例

```
class person 
  constructor: (@name, @age) ->

bob = new person("bob", 11)

if person?
  alert "yes!"
else
  alert "no" 
```

在此，我测试一个人类是否被实例化，它会提示“是！” 就像它应该的那样。因为 bob 是一个人，并且被实例化了。

但在这里：

```
class person 
  constructor: (@name, @age) ->

if person?
  alert "yes!"
else
  alert "no" 
```

我希望它提醒“不”，因为没有人被实例化，但它仍然提醒“是！”

那么测试一个类是否已实例化的正确方法是什么。

澄清：

我不想测试，看看鲍勃是什么。我想看看是否有任何形式的人被实例化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:41:57.367

您正在测试是否定义了 person 类。这将完成你想要的。

```
class person 
  constructor: (@name, @age) ->
    person.prototype.instantiated = true

if person.prototype.instantiated
  alert "yes!"
else
  alert "no" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:38:20.943

与上面的答案相同，但具有更多类似咖啡脚本的语法：

```
class person 
  constructor: (@name, @age) -> person::instantiated = yes

bob = new person "bob", 11

if person::instantiated
  alert "yes!"
else
  alert "no" 
```

# java - LibGdx 如何使用 OrthographicCamera 滚动？

> ID：14509261
> 
> 赞同：12
> 
> 时间：2013-01-24T19:33:44.093
> 
> 标签：java, scroll, libgdx

![在此处输入图像描述](../Images/e6539e46acd5cc20274b440b995feb4d.png)

我一直在寻找 10 个小时（字面意思），我已经完成了，我需要问。事情是我正在学习如何使用 LibGdx 来编写 Java 游戏。我正在做一个水平太空船游戏。所以，我在这里最糟糕的问题是我不知道如何滚动（我认为 draw 会更好地解释）。我想画一个巨大的背景（空间）并让我的 OrthographicCamera 像我的 SpaceShip 一样向右移动，所以它会创建一个带有空间背景的滚动效果。没有敌人，只有屏幕上的船。

我正在尝试这个：

```
 public void moveCamera(float x,float y){
    cam.position.set(x, y, 0);
 } 
```

然后我在 WorldRender 的 render() 方法中使用该方法：

```
public void render(float delta){ 
    ship.Move(delta);
    moveCamera(ship.getPosition().x,ship.getPosition().y);
    cam.update();
    System.out.println(""+cam.position);
    spriteBatch.begin();
        drawBackground();
        drawShip();
    spriteBatch.end();
} 
```

我实际上移动了相机位置（感谢 println，我可以看到），但它在游戏中没有移动，所以 SpaceShip 只是消失在窗口的边缘。

我在 spriteBatch.end() 之前也试过这个

```
spriteBatch.setProjectionMatrix(camera.combined); 
```

但是当我这样做时，窗口只显示黑屏，没有船，什么也没有。正如我所说，我很绝望，我看到了很多例子（用鼠标滚动，paralexscrolling 等），但都是高级的，或者与我的代码无关。

我就是这样画东西的。背景和船是 WorldRender 中的纹理。我把背景图像画得很宽，所以我的意图是像我说的那样做一些滚动。那是代码

```
private void loadTextures(){
    shipTexture=new Texture(Gdx.files.internal("nave.png"));
    background=new Texture(Gdx.files.internal("fondo.jpg"));
}

public void drawShip(){
    spriteBatch.draw(shipTexture,ship.getPosition().x*ppuX,ship.getPosition().y*ppuY, ship.WIDTH*ppuX,ship.HEIGHT*ppuY);
}

public void drawBackground(){
    spriteBatch.draw(background, -10*ppuX,0*ppuY, Gdx.graphics.getWidth()*10,Gdx.graphics.getHeight());     
} 
```

如果有人想在铁杆模式下提供帮助，您可以在这里下载代码

[我的代码（不工作）](http://ubuntuone.com/3IdlECzw1zdJnqfj7hKDd0)

我终于解决了！

这是我在类名 WorldRenderer 中使用的代码，它具有在 GameScreen 中调用的方法，用于渲染、调整大小等

```
 public WorldRenderer(World world) {
    // TODO Auto-generated constructor stub

    this.world=world;
    this.ship=world.getShip();
    this.cam = new OrthographicCamera(CAMERA_WIDTH,CAMERA_HEIGHT);

    this.cam.setToOrtho(false,CAMERA_WIDTH,CAMERA_HEIGHT);
    this.cam.position.set(ship.getPosition().x,CAMERA_HEIGHT/2,0);
    this.cam.update();//actualizamos la camara
    spriteBatch=new SpriteBatch();
    loadTextures();
}

private void loadTextures(){
    shipTexture=new Texture(Gdx.files.internal("nave.png"));
    background=new Texture(Gdx.files.internal("fondo.jpg"));
}

  public void drawShip(){
          spriteBatch.draw(shipTexture,ship.getPosition().x,ship.getPosition().y,10,10);
}

public void drawBackground(){
    spriteBatch.draw(background, 0,0, 500,50);
} 

 public void render(float delta){ 
    ship.Move(delta);
    moveCamera(ship.getPosition().x);
    spriteBatch.setProjectionMatrix(cam.combined); 
    spriteBatch.begin();
        drawBackground();
        drawShip();
    spriteBatch.end();
}

 public void moveCemara(float x){
    cam.position.set(x+20,cam.position.y, 0);
    cam.update();
} 
```

在船里面我有这个方法，我在 WorldRenderer 的渲染中调用它来移动它

```
public void Move(float delta){
    if(Gdx.input.isKeyPressed(Keys.LEFT)) this.position.x -=velocity *delta;
    if(Gdx.input.isKeyPressed(Keys.RIGHT)) this.position.x +=velocity *delta;
    if(Gdx.input.isKeyPressed(Keys.UP)) this.position.y +=velocity *delta;
    if(Gdx.input.isKeyPressed(Keys.DOWN)) this.position.y -=velocity *delta;
} 
```

我还要非常感谢帮助过我的人。我将第一个答案标记为好的答案，但是，将两者混合在一起才是真正的解决方案。

我在这里留下了一些我遵循的教程，这些教程对新手来说非常好

这是一个很好的从零开始的教程 [LiGdxForNoobs](http://bitowl.de/de/adventskalender/)

一个简单的平台游戏 [platformGame](http://obviam.net/index.php/getting-started-in-android-game-development-with-libgdx-create-a-working-prototype-in-a-day-tutorial-part-1/)

一个非常简单的游戏 [bucketGame](http://code.google.com/p/libgdx/wiki/SimpleApp)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T21:03:56.253

我不知道这是否是你唯一的错误，但这是一个错误。如果这是你说你正在做的事情：

```
spriteBatch.begin();
drawBackground();
drawShip();
spriteBatch.setProjectionMatrix(camera.combined); 
spriteBatch.end(); 
```

你不会看到任何东西。在 begin()/end() 块内调用 setProjectionMatrix 时。当前批次被刷新到 gpu。所以，你实际上并没有用相机矩阵绘制任何东西。你应该这样做：

```
 spriteBatch.setProjectionMatrix(camera.combined); 
    spriteBatch.begin();
    drawBackground();
    drawShip();
    spriteBatch.end(); 
```

编辑：

如果您不调用该行，则 spriteBatch 将使用其自己的默认相机（它不会注意到您的 camera.update() 修改，所以这不是您想要的）。

您现在应该更加注意您正在使用的坐标。我不太确定你真的需要 ppu 转换的东西。首先，在想象的世界坐标中定义一切，注意你会看到你的世界有一些拉伸。

```
public void drawShip(){
    spriteBatch.draw(shipTexture,ship.getPosition().x,ship.getPosition().y, 10, 10);
}//your ship is 10 units wide and tall!

public void drawBackground(){
    spriteBatch.draw(background, -10,0, 500, 100);     
} //your background is 500 units wide, and 100 units tall

//camera setup
camera = new OrthographicCamera(50, 50);
//your camera will print to screen 50 units of your world 
```

如果你看到了一个拉伸的世界，试着去理解它是如何工作的（如果你什么都看不到，那就是某个地方出了问题）。

编辑 2

我看了你的代码。首先删除 ppu，因为它会掩盖您的代码。您正在将凸轮位置设置为 ship.postion，同时在 ship.position * ppu 处绘图。你的背景也太大了（这就是你看到它像素化的原因）。你应该看到一些合理的东西。（总有一天，您将不得不以另一种方式初始化您的相机来处理拉伸，但在您了解所有工作原理之前忘记它）。

```
this.cam = new OrthographicCamera(CAMERA_WIDTH,CAMERA_HEIGHT);

public void drawShip(){ 
    spriteBatch.draw(shipTexture, ship.getPosition().x ,ship.getPosition().y, 10, 10);
}

public void drawBackground(){
    spriteBatch.draw(background, -CAMERA_WIDTH/2, -CAMERA_HEIGHT/2, 100, 100); //let bg begin where camera starts. (0,0)
}

public void render(float delta){ 
    ship.Move(delta);
    moverCamara(ship.getPosition().x, ship.getPosition().y);
    spriteBatch.setProjectionMatrix(cam.combined);
    spriteBatch.begin();
        drawBackground();
        drawShip();
    spriteBatch.end();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:43:29.723

不清楚你的画法如何？我不确定您是否正确地使用了这种方法。您能否提供您的背景和船舶的详细信息？您能否提供有关背景图像的详细信息，它是您滚动的巨大图像还是您想要在滚动时重复的重复图像？

- 编辑 -

好的，我想我知道可能会发生什么。我通常会将相机应用于当前上下文。

将以下内容放入调整大小

```
 public void resize(int width, int height) {
    cam = new OrthographicCamera(width, height);
    cam.translate(width / 2, height / 2, 0);
} 
```

将以下内容放在 render() 的开头

```
cam.position.set(posX,posY,0);
cam.update();
cam.apply(Gdx.gl10);
Gdx.gl.glClearColor(0,0,0,1);
Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT); // #14 
```

这将使您有一个清晰的屏幕，原点设置在窗口的左下方。然后你应该先画你的背景

```
spriteBatch.setProjectionMatrix(cam.combined);
spriteBatch.begin();
spriteBatch.draw(background,0,0,sizeX,sizeY);
spriteBatch.end() 
```

当您移动相机位置 posX 和 posY 时，看看它的外观。然后将您的船添加到组合中

-- 更多编辑 ---

然后您可以将 posX 和 posY 计算为

posX = defaultOffsetX+shipX

等等..

无论如何希望这会有所帮助我仍然只是在学习自己，所以这可能不是最好的方法..但它似乎有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T13:30:03.287

我已经编辑了你的代码。看看以下内容：

```
public class WorldRenderer {

private World world;
private Ship ship;

private Texture shipTexture,background;
private SpriteBatch spriteBatch;

private OrthographicCamera cam;

float screenSizeX = 100;
float screenSizeY = 100;

float shipSizeX = 10;
float shipSizeY = 10;

public void setSize (int w, int h) {
    cam = new OrthographicCamera(screenSizeX,screenSizeY);
}

public WorldRenderer(World world) { 
    this.world=world;
    this.ship=world.getShip();
    spriteBatch=new SpriteBatch();
    loadTextures();
}

private void loadTextures(){
    shipTexture=new Texture(Gdx.files.internal("nave.png"));
    background=new Texture(Gdx.files.internal("fondo2.jpg"));
}

public void drawShip(){ 
    spriteBatch.draw(shipTexture, ship.getPosition().x,ship.getPosition().y, shipSizeX,shipSizeY);
}

public void drawBackground(){

    spriteBatch.draw(background, 0,0);
}

public void render(float delta){ 

    ship.Move(delta);

    moverCamara(ship.getPosition().x,ship.getPosition().y);

    spriteBatch.setProjectionMatrix(cam.combined);      
    spriteBatch.begin();
        drawBackground();
        drawShip();
    spriteBatch.end();
}

public void moverCamara(float x,float y){
    cam.position.set(x, y, 0);
    cam.update();
}

} 
```

这样，您的飞船始终位于屏幕中间，并且背景会移动。希望这可以帮助。

# c# - 正则表达式匹配href，但没有媒体文件

> ID：14509267
> 
> 赞同：1
> 
> 时间：2013-01-24T19:34:05.377
> 
> 标签：c#, regex

我正在使用这个正则表达式来计算`href's`页面上的所有内容：

> (?:href)=[\"|']?(.*?)[\"|'|>]+

它工作正常。但我只想匹配不是媒体的链接，如 (png|jpg|avi|wav|gif) 等。

我尝试了添加

> （（？！png）。）

到我的正则表达式，但这不起作用。我读[了这个问题](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word) ，但找不到任何可行的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:33:38.920

我知道这个问题已经回答了。

我想提供一种使用[CsQuery](https://github.com/jamietre/CsQuery)而不是`HtmlAgilityPack`

我认为语法更紧凑，并且与其他结构非常相似，因为它基于`LINQ`

```
//input is your input HTML string
var links = CQ.Create(input).Find("a").Select(x=>x.Cq().Attr("href")); 
```

例如

```
var links = CQ.Create("<div><a href='blah'></a><a href='blah2'></a></div>").Find("a").Select(x=>x.Cq().Attr("href"));
Console.Write(string.Join(",",dom)); //prints blah,blah2 
```

希望这对任何人都有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T01:58:01.063

```
using HtmlAgilityPack;

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
List<string> href = new List<string>();

private void addHREF()
{
    //put your input to check
    string input = "";

    doc.LoadHtml(input);
    //Which files ignore?
    string[] stringArray = { ".png", ".jpg" };
    foreach (var item in doc.DocumentNode.SelectNodes("//a"))
    {
        string value = item.Attributes["href"].Value;
        if (stringArray.Any(value.Contains) == false)
            href.Add(value);
    }
} 
```

我用我的输入进行了测试，效果很好……如果您有任何问题，请告诉我..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:25:07.747

尽管我建议不要使用这种方法，但您可能会发现此正则表达式很有帮助：

```
(?<=href\s*=\s*['"]?)(?>(https?://)?([\da-z\.-]+)\.([a-z\.]{2,6})([/\w\.-]*)*/?)(?<!png|gif|etc) 
```

*（基于[您应该知道的 8 个正](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)则表达式中的 URL 正则表达式）*

请注意，此表达式不允许 URL 中有空格。这是因为不带引号的 HREF 将匹配以下属性（例如，`"domain.com/resource.txt title"`）

**例子：**

```
static void Main( string[] args )
{

    string l_input =
        "<a href=\n" +
        "        \"HTTPS://example.com/page.html\" title=\"match\" />\n" +
        "<a href='http://site.com/pic.png' title='do not match'> <a href=domain.com/resource.txt title=match>\n" +
        " <script src=scripts.com/script.js>";

    foreach ( Match l_match in Regex.Matches( l_input, @"(?<=href\s*=\s*['""]?)(?>(https?://)?([\da-z\.-]+)\.([a-z\.]{2,6})([/\w\.-]*)*/?)(?<!png|gif|etc)", RegexOptions.IgnoreCase ) )
        Console.WriteLine( "'" + l_match.Value + "'" );

    /* 
     * Returns:
     * 
     * HTTPS://example.com/page.html
     * domain.com/resource.txt
     *          
     */

    Console.ReadKey( true );

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T20:57:56.580

我的努力

```
@"(?<=\shref\s*=\s*[""']?)(?![""']|\S+\.(?:png|jpg|avi|wav|gif)[""']?[\s>])\S+?(?=[""']?[\s>])"; 
```

它使用正向后视来定位内容，并使用负向前瞻来确保它不包含点，后跟*png jpg avi wav gif*后跟可选引号和空格或`>`. 然后匹配，直到一个可选的引号后跟一个空格或`>`. 内容不必被引用，但不能包含空格。

# ide - 如何修复 BB10 IDE 中未安装模块的错误

> ID：14509268
> 
> 赞同：3
> 
> 时间：2013-01-24T19:34:07.983
> 
> 标签：ide, blackberry-10, blackberry-cascades, blackberry-qnx

是否可以修复 BB10 IDE 中未安装模块的错误？附上错误的截图来解释一下。

注意：关于 SO 有一个类似的问题，它是在问同样的问题（仍然没有找到正确的答案） - [blackberry cascades mapview](https://stackoverflow.com/questions/13359087/blackberry-cascades-mapview)

![在此处输入图像描述](../Images/9d0297d1ac790e1c63f62ab85e37bfd7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:39:32.433

这是 Momentics IDE 中 QML 预览当前的一个已知问题。它只支持核心级联组件。

我在这里回答了一个类似的问题： [黑莓 10 未解决的包含 <QObject>](https://stackoverflow.com/questions/13953916/blackberry-10-unresolved-inclusion-qobject/14472577#14472577)

# python - 保存数据的最佳方法

> ID：14509269
> 
> 赞同：13
> 
> 时间：2013-01-24T19:34:15.230
> 
> 标签：python, serialization, save

我做了一个班级，我想在其中跟踪学生的统计数据。我打算稍后制作一个 GUI 来操作这些数据。

我的主要问题是：保存和稍后检索这些数据的最佳方法是什么？

我读过有关 pickle 和 JSON 的内容，但我并不真正了解它们是如何工作的（尤其是关于它们如何保存数据，例如以哪种格式和在哪里保存）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T20:09:39.410

如果您的数据非常简单，例如字符串或数字集合的集合，我会使用 json。JSON是什么，是简单数据类型和简单数据类型组合的字符串表示。使用该`json`模块将数据转换为字符串后，您可以自己将其写入文件。

超级简单：

```
>>> my_data = [range(5) for i in range(5)]
>>> my_data
[[0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]]
>>> import json
>>> json.dumps(my_data)
'[[0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]]' 
```

然后只需将该字符串写入文件即可。当你想重新加载它时，像这样：

```
>>> import json
>>> string_from_file
'[[0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]]'
>>> my_saved_data = json.loads(string_from_file)
>>> my_saved_data
[[0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]] 
```

如果你的数据比较复杂，并且涉及到内置集合对象以外的类，pickle 是更好的选择。关于 pickle 需要了解的一件**非常重要**的事情是，pickle 中存在安全漏洞，如果你自己没有腌制任何东西，那么解开任何东西是个坏主意。`pickle`容易受到本文详述的安全问题的影响：[http ://www.kalzumeus.com/2013/01/31/what-the-rails-security-issue-means-for-your-startup/](http://www.kalzumeus.com/2013/01/31/what-the-rails-security-issue-means-for-your-startup/)

如果您的数据非常大，或者您将经常保存/加载它，或者出于任何原因使用 json 并保存到本地文件是不够的，那么数据库将是您的选择。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T20:13:28.240

对于持久性数据（存储有关学生的信息），数据库是一个不错的选择。如前所述，Python 附带 Sqlite3，这通常足够好，至少对于开发目的而言。

将 Sqlite 引入 Python 很容易 - 只需在源代码文件中导入库并打开与数据库的连接。请参阅 python[文档](http://docs.python.org/2/library/sqlite3.html)。

**编辑**：找到[了一个关于 Python + Sqlite 的新教程](http://zetcode.com/db/sqlitepythontutorial/)，看起来不错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T19:43:48.020

您也可以使用[csv 文件](http://docs.python.org/2/library/csv.html)模块。这取决于你需要什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T20:08:53.173

使用数据库。带有 SQLight 的 SQLAlchemy 是一个好的开始。无论如何，你最终会在那里结束。

*或者*

用泡菜模块把所有东西都倒出来。（真的没什么好理解的，你保存对象然后再次加载它们，这真的很简单）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T19:38:13.787

你可以使用[pickling](http://docs.python.org/2/library/pickle.html)，Python的序列化机制：

> pickle 模块实现了一个基本但强大的算法，用于序列化和反序列化 Python 对象结构。“Pickling”是将 Python 对象层次结构转换为字节流的过程，而“unpickling”是逆操作，从而将字节流转换回对象层次结构。酸洗（和解酸）也称为“序列化”、“编组”、[1] 或“扁平化”，但是，为避免混淆，这里使用的术语是“酸洗”和“解酸”。

# javascript - JS Timer 在两个选项卡中触发计数器

> ID：14509273
> 
> 赞同：0
> 
> 时间：2013-01-24T19:34:33.893
> 
> 标签：javascript, tabs, settimeout

window.setTimeOut() 是否有理由同时在两个选项卡或导航器中触发事件？

我创建了一个倒计时计时器，它在调用方法时触发。但是，如果我打开两个选项卡并在一个选项卡中调用触发计时器的函数，然后打开第二个选项卡并再次触发该事件，则第一个选项卡中的计数器也会刷新。

我的应用程序在 nodejs 中运行，但我的函数在客户端 js 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:55:04.143

我刚刚意识到为什么它在两个或多个选项卡/导航器中起作用。那是因为我不知道，节点正在广播我正在使用的功能。

@Matt 我在 node.js 项目中工作。然后我发现我正在使用的函数被广播到 node.js 到所有其他客户端。

@Bergi，它们使用 node.js 连接。

我刚刚从那里删除了该功能，它工作得很好。

# android - Android logcat“应用程序”列始终为空

> ID：14509277
> 
> 赞同：24
> 
> 时间：2013-01-24T19:34:48.287
> 
> 标签：android, logcat, android-logcat

Android logcat“应用程序”列始终为空。我有最新版本的 android 工具。

![在此处输入图像描述](../Images/1e63aef5963d836c41c85633d443df5d.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-24T19:36:45.810

我在这里尝试了所有其他建议，但都没有奏效。对我来说，应用程序在模拟器上运行时会显示，但在我的 Galaxy Nexus 上不会显示。

事实证明我需要添加`android:debuggable="true"`到`<application>`我的`AndroiManifest.xml`. 请参阅[http://developer.android.com/guide/topics/manifest/application-element.html](http://developer.android.com/guide/topics/manifest/application-element.html)。使用 Eclipse 的人看不到这个问题，因为显然 Eclipse 会根据[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)自动启用调试。

显然，应用程序需要标记为可调试才能在生产 ROM 上调试它们，但无论如何它们都可以在调试 ROM 上进行调试，这就是为什么它可以在模拟器上运行但不能在物理设备上运行的原因。另一种选择可能是构建调试 ROM 并将其安装在您的设备上。

你会认为 logcat 应该能够根据 PID 找出应用程序，而不是需要为调试而构建应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T18:52:23.703

另一个想法：

```
adb kill-server
adb start-server 
```

为我工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-15T19:29:50.037

在运行您的应用程序之前，您应该通过 Tools -> Android 启用 ADB 集成。然后日志猫将正常工作。

**Tools->Android->Enable ADB Integration active**

![在此处输入图像描述](../Images/f35bb0d794bf1706f5d322185fe5605f.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-31T15:34:36.690

我今天遇到了这个问题。对我有用的是连接到模拟器（如果你有一个具有虚拟化功能的英特尔 CPU，运行具有虚拟化功能的英特尔模拟器映像——它会快得多），在模拟器上启动应用程序并查看应用程序字段是否返回通过使用您的应用程序登录来登录。

对我来说，当连接到模拟器后，在尝试了一些写入日志的日志操作后开始显示应用程序列。之后，我连接回我的实际设备（Nexus 7），再次从 Eclipse 启动应用程序，并将 DDMS 设置回在 Nexus 7 上运行的应用程序，应用程序列又神奇地出现了。

在此之前，我尝试了各种设备（Nexus 4）并重新启动 Eclipse/adb，但在连接到模拟器之前没有任何效果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-22T02:34:10.743

我试图修复这个奇怪的错误，但没有任何效果。有时应用程序名称在 logcat 中为空白，有时它在那里。我什至无法重现它。这不是答案，而是我的快速修复。

浏览整个 logcat 并以某种方式识别您的应用程序的 PID，然后像这样在 logcat 搜索中过滤它

`pid: 10036`

或您的应用程序 PID 是什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-08T09:57:00.260

在我的特殊情况下（我正在使用 Netbeans 和独立的 Android 调试监视器）“应用程序”列在我之后返回：

1.  从设备“强制停止”应用程序
2.  从 Netbeans >“运行项目”再次运行它

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-08T07:52:49.857

在通过“帮助=>检查更新”将我的 eclipse ADT 包升级到最新版本的 ADT 插件后，我遇到了这个问题。现在有几个小时我永远不会回来......

不幸的是，我尝试过的任何方法都无法在应用程序列中恢复应用程序名称。事实上，我什至一度遇到了 ADB 设备离线问题。出现问题的第一个迹象是我的 android 设备会显示在 DDMS 透视图中，但没有列出包名称。

我最终重新安装了我的 ADT 包（到一个新文件夹中），拔下我的设备，重新启动，然后重新启动一切并使用新的 ADT 包。

# c++ - 为什么编译器会在模板函数上产生错误

> ID：14509283
> 
> 赞同：0
> 
> 时间：2013-01-24T19:35:11.157
> 
> 标签：c++, stl, vector, set, containers

为什么以下代码可以正常工作：

```
template <typename Set, typename Vector> void copySetToVector2(Set &s, Vector &v)
{
    copy(s.begin(), s.end(), inserter(v, v.begin()));
}

int main()
{
    set<int> s1;
    s1.insert(1);
    s1.insert(2);
    s1.insert(3);

    vector<int> v1;

    copySetToVector2(s1, v1);
    return 0;
} 
```

但是如果我在模板函数编译器中将变量更改为指针会产生错误：

> 'std::set< int >*' 不是类、结构或联合类型

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:39:14.413

如果你改变这个：

```
template <typename Set, typename Vector> void copySetToVector2(Set &s, Vector &v) 
```

对此：

```
template <typename Set, typename Vector> void copySetToVector2(Set *s, Vector *v) 
```

那么身体需要看起来像这样：

```
template <typename Set, typename Vector> void copySetToVector2(Set *s, Vector *v)
{
    copy(s->begin(), s->end(), inserter(*v, v->begin()));
} 
```

点表示法`s.begin()`不适用于指针。您需要切换到`s->begin()`. 有关更多详细信息，请参阅[此链接](https://stackoverflow.com/questions/1238613/what-is-the-difference-between-the-dot-operator-and-in-c)。

# jquery - 使用隐藏行交替行颜色

> ID：14509284
> 
> 赞同：0
> 
> 时间：2013-01-24T19:35:22.773
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap

在我的项目中，我在表格中显示联系信息。默认情况下，我在表格的一行中显示该人的核心信息。单击按钮可展开下一行以获取更多详细信息。

在我的表格中，我希望在所有详细信息行都折叠的默认视图中交替显示彩色行。当扩展记录以显示包含详细信息的第二行时，我希望该行与其父行颜色相同，因为它们都是同一个人的信息。

现在在默认视图中，每一行都是相同的颜色，而详细视图行是交替的颜色，这使得用户界面混乱。

这是我的代码：

页面的 HTML/Ruby：

```
<%- model_class = Person -%>
    <div class="page-header detail">
        <h4>Search Results</h4>
    </div>

    <table class="table detail table-striped">
        <tbody>
            <% @people.each do |person| %>
            <tr class="parent">
                <td><%= image_tag "photo-1.png", :height => '32', :width => '40' %></td>
                <td><%= link_to person.lname + ", " + person.fname, person %><br> <%= person.ntid %><br>

                    <td><%= number_to_phone(person.phone, :area_code => true) %><br><%= mail_to person.email %></td>
                    <td>Suite: <%= person.suite %><br>Column: <%= person.column %></td>

                    <td><!--  lightbox code -->
                        <a data-toggle="lightbox" href="#<%= person.id %>Lightbox"><%= image_tag "map_icon1.png", :width => '32' %> </a>
                        <div id="<%= person.id %>Lightbox" class="lightbox hide fade"  tabindex="-1" role="dialog" aria-hidden="true">
                            <div class='lightbox-header'>
                                <button type="button" class="close" data-dismiss="lightbox" aria-hidden="true">&times;</button>
                            </div>
                            <div class='lightbox-content'>
                                <%=image_tag person.map %>
                            </div>
                        </div>
                        <!-- end lightbox code -->
                        </td>

                        <!-- Dropdown button -->
                        <td><a class="dropme" href="#<%= person.id %>"> <button class="btn btn-info btn-small">
                            <i class="icon-chevron-down"></i>
                        </button></a></td>

                    <!-- end dropdown button -->

                    <tr class="child">
                        <td></td> 
                        <td>Title: <%= person.title %><br>Department: <%= person.department %><br>Manager: <%= person.manager %><br>Direct Reports: <%= person.direct_report %></td>
                        <td>Mobile: <%= number_to_phone(person.mobile, :area_code => true) %><br>FAX: <%= number_to_phone(person.fax, :area_code => true) %><br>Pager: <%= number_to_phone(person.pager, :area_code => true) %></td><td><%= person.company %><br><%= person.office %><br><%= person.address %><br><%= person.city %>, <%= person.state %> <%= person.zipcode %><br><%= person.country %></td>
                        <td><td> <!-- empty cell to have things line up  -->
                        <td><td> <!-- empty cell to have things line up  -->
                        <td><td> <!-- empty cell to have things line up  -->
                    </tr>

                <!-- <td>
                <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_person_path(person), :class => 'btn btn-mini' %>
                <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                person_path(person),
                :method => :delete,
                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                :class => 'btn btn-mini btn-danger' %>
                </td> -->
            <!-- </tr> -->
            <% end %>

        </tbody>
    </table> 
```

我用于展开和折叠行的 Javascript 是：

```
$(document).ready(function(){
$('table.detail').each(function() {
    var $table = $(this);
            $('tbody tr .dropme').click(function(event){
                var $tgt=$(event.target);
                event.stopPropagation();
                var closestRow=$tgt.closest('tr');
                // closestRow.siblings('.child').eq(0).toggle();
                closestRow.next().toggle('slow');
                var pcolor=closestRow.css("background-color");
                closestRow.next().css('background-color', pcolor);
            });
        });
    }); 
```

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:14:26.220

查看 rails 循环助手

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle)

您将能够在第 3 行和第 4 行添加一个“偶数”类。

# android - 自定义标题栏android

> ID：14509287
> 
> 赞同：0
> 
> 时间：2013-01-24T19:35:30.167
> 
> 标签：android, android-custom-view, titlebar

我发现非常漂亮的标题栏，我的问题是，你们中有人知道怎么做吗？

我多次尝试用谷歌搜索类似的东西，但我不知道如何隐藏标题栏的前半部分并使另一半透明。感谢您的回答

这是来自名为 AIDE 的应用程序的屏幕截图，我在其中找到了这个标题栏。

![标题栏](../Images/2ab52cb88b478cca21d8bc730c5ae3a1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:19:38.680

我相信你可以用 ActionBar 做到这一点。

[在actionbarsherlock.com](http://actionbarsherlock.com)结帐 ActionBarSherlock

[及其在https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos&hl=en](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos&hl=en)的演示

祝你好运！

# c++ - std::bind() - 从派生类的成员函数中获取基类受保护的成员函数

> ID：14509291
> 
> 赞同：13
> 
> 时间：2013-01-24T19:35:43.007
> 
> 标签：c++, c++11, protected, derived-class, stdbind

我想`bind()`从派生类中获得我的基类版本的函数。该功能在底座中标记为受保护。当我这样做时，代码在 Clang (Apple LLVM Compiler 4.1) 中顺利编译，但在 g++ 4.7.2 和 Visual Studio 2010 中都出现错误。错误类似于：“'Base::foo': cannot访问受保护的成员。”

这意味着引用的上下文实际上是在内部`bind()`，当然该函数被视为受保护的。但是不应该`bind()`继承调用函数的上下文——在这种情况下，`Derived::foo()`——因此将基方法视为可访问的？

下面的程序说明了这个问题。

```
struct Base
{
protected: virtual void foo() {}
};

struct Derived : public Base
{
protected:
    virtual void foo() override
    {
        Base::foo();                        // Legal

        auto fn = std::bind( &Derived::foo, 
            std::placeholders::_1 );        // Legal but unwanted.
        fn( this );

        auto fn2 = std::bind( &Base::foo, 
            std::placeholders::_1 );        // ILLEGAL in G++ 4.7.2 and VS2010.
        fn2( this );
    }
}; 
```

为什么行为上的差异？哪个是对的？错误编译器有什么解决方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T19:55:08.347

答案：参见[boost::bind with protected members & context](https://stackoverflow.com/q/3057789/819272)引用标准的这一部分

> 当非静态数据成员或非静态成员函数是其命名类 (11.2)105 的受保护成员时，将应用第 11 节中所述之外的附加访问检查）如前所述，授予对受保护成员的访问权限是因为引用发生在某个类 C 的朋友或成员中。如果访问要形成指向成员的指针 (5.3.1)，则嵌套名称说明符应命名 C 或从 C 派生的类。所有其他访问都涉及 (可能是隐式的）对象表达式（5.2.5）。在这种情况下，对象表达式的类应为 C 或从 C 派生的类。

解决方法：创建`foo`一个`public`成员函数

```
#include <functional>

struct Base
{
public: virtual void foo() {}
}; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T20:27:34.810

这与`bind`. 由于已经引用了标准@rhalbersma 的部分，因此在任何情况下，该表达式`&Base::foo`在 的非好友成员中都是非法的`Derived`。

但是，如果您的意图是做与调用等效的事情`Base::foo();`，那么您将面临更大的问题：指向成员函数的指针*总是*调用虚拟覆盖。

```
#include <iostream>

class B {
public:
    virtual void f() { std::cout << "B::f" << std::endl; }
};

class D : public B {
public:
    virtual void f() { std::cout << "D::f" << std::endl; }
};

int main() {
    D d;
    d.B::f();   // Prints B::f

    void (B::*ptr)() = &B::f;
    (d.*ptr)(); // Prints D::f!
} 
```

# visual-studio-2010 - Visual Studio 类导航器

> ID：14509294
> 
> 赞同：2
> 
> 时间：2013-01-24T19:35:45.537
> 
> 标签：visual-studio-2010

在 C# 中，是否有一个导航器来查看类的层次结构？

*   我知道打开的 CS 文件顶部有一个下拉菜单，
*   而且我知道有一个 Class View 窗口，这非常接近..但这与您打开的文件不合作。您必须手动对其进行排序，就好像它本身就是一个文件资源管理器一样。

但这与他们拥有的 Netbeans 自己的 Navigator 相比并不是很有用。您打开的文件有一个文件中类的所有属性和方法的列表，非常方便。

我知道这个杰作 Visual Studio 肯定有更好的东西，我错了吗？

# sql - Oracle WITH 子句和按结果分组

> ID：14509296
> 
> 赞同：0
> 
> 时间：2013-01-24T19:35:50.170
> 
> 标签：sql, plsql

我有两个表：一个产品表和一个区域表。产品表包含产品的 ID 和地区代码，表示它们可以在哪些国家/地区销售：

```
PRODUCT:

PRODUCT_ID  | TERRITORY_CODE
----------------------------
   PROD1    |       2
   PROD2    |       0
   PROD3    |       1
   PROD4    |       0
   PROD5    |       2
   PROD6    |       0
   PROD7    |       2 
```

第二个表格包含一个地区代码和允许销售的国家/地区的相应 ISO 代码。例如：

```
TERRITORY:

TERRITORY_CODE | COUNTRY_CODE
---------------------------
      0        |     US
      1        |     CA
      2        |     US
      2        |     CA 
```

我想编写一个查询作为键的`PRODUCT_IDs`使用次数。`COUNTRY_CODE`

例如，我想知道在美国有多少不同的产品在售。我不想知道，`0`并且`2`是包含美国的领土代码，我只想查找`COUNTRY_CODE`。我怎样才能做到这一点？

在一些初步研究中，我发现一个`WITH`子句可能很有用，并提出了以下查询：

```
WITH country AS (
  SELECT (DISTINCT COUNTRY_CODE)
  FROM TERRITORY
) 
SELECT COUNT(DISTINCT PRODUCT_ID) 
FROM country c,
PRODUCT p
WHERE p.TERRITORY_CODE=c.TERRITORY_ID; 
```

但是，这不会产生预期的结果。我也无法将其分组`COUNTRY_CODE`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:52:33.373

看起来你需要使用`GROUP BY`. 尝试这样的事情：

```
SELECT T.Country_Code, COUNT(DISTINCT PRODUCT_ID) 
FROM Product P
JOIN Territory T ON P.Territory_Code = T.Territory_Code
GROUP BY T.Country_Code 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!3/79f17/3)。

祝你好运。

# php - MySQL IF 在 WHERE 条件下基于 SELECT 列

> ID：14509302
> 
> 赞同：1
> 
> 时间：2013-01-24T19:36:15.120
> 
> 标签：php, mysql

我有这个简单的（实际上我正在简化真实案例）SQL命令：

```
SELECT Username, Message
FROM Mail
WHERE DeleteBySender = '0'
LIMIT 1 
```

但由于某种原因，我有特殊条件，即： **IF Mail.Username = 'johndoe'**那么 WHERE 子句**不再是** `DeleteBySender = '0'`，**而是** `DeleteByReceiver = '0'`。

简而言之，如何根据 Mail.Username 结果制作动态 WHERE 子句？

可以用单个 SQL 命令完成吗？因为如果不是，在我的实际情况下，它会导致 PHP 脚本更加复杂。

**更新：我真正期望的是，用简单的英语：如果 Mail.Username NOT johndoe，SQL 命令将是这样的：

```
SELECT Username, Message
FROM Mail
WHERE DeleteBySender = '0'
LIMIT 1 
```

但如果 Mail.Username 是 johndoe，SQL 命令将是这样的：

```
SELECT Username, Message
FROM Mail
WHERE DeleteByReceiver = '0'
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:37:40.940

*SQL 中的*一种解决方案*`OR`利用子句来分解您的逻辑，如下所示：*

 *```
SELECT Username, Message
FROM Mail
WHERE (Username != 'johndoe' AND DeleteBySender = '0')
OR (Username = 'johndoe' AND DeleteByReceiver = '0')
LIMIT 1 
```

**注意：**是`LIMIT 1`有关的。在不知道您的数据集的情况下，这可能会返回多个结果。你需要测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T19:39:12.810

```
SELECT 
    Username, 
    Message
FROM Mail
WHERE (IF(Username='johndoe',DeleteByReceiver = 0,DeleteBySender =0))
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:39:27.730

```
SELECT Username, Message
FROM Mail
WHERE (Username = 'johndoe' AND DeleteByReceiver='0') OR DeleteBySender = '0'
LIMIT 1 
```*

# actionscript-3 - 将视频从 AS3 发布到 Youtube

> ID：14509304
> 
> 赞同：0
> 
> 时间：2013-01-24T19:36:20.910
> 
> 标签：actionscript-3, video, youtube

我阅读了一些使用 AS3 应用程序将视频（从用户磁盘）上传到 yotube 的示例。

[http://gdata-samples.googlecode.com/svn/trunk/gdata/YouTubeApi/YouTubeApi.mxml](http://gdata-samples.googlecode.com/svn/trunk/gdata/YouTubeApi/YouTubeApi.mxml)

我需要使用用户的网络摄像头**发布**（到我的 youtube 频道）使用 AS3 生成的视频。

¿ 一些例子或想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:51:29.587

[https://developers.google.com/youtube/v3/](https://developers.google.com/youtube/v3/)

你需要的东西都在那里，祝你好运！

# php - 按选择/下拉框过滤的搜索结果

> ID：14509312
> 
> 赞同：0
> 
> 时间：2013-01-24T19:36:45.210
> 
> 标签：php, sql, pdo

我有一个基本的 SQL 查询，它根据输入到搜索字段中的内容获取一些数据 - 我已经放置了一个从数据库中的列填充的选择框 - 我想做的是当它被改变时/post，它会更新已经找到的结果，即通过游戏的“类型”进一步深入研究它们。

这是我已经拥有的代码

```
 echo "<select id='dropdown' name='dropdown' class='dropdown'>";//creates select HTML element
    $stmt = $dbh->prepare('SELECT genre_name FROM genre'); //prepares sql query
    $stmt->execute(); //executes query
       while($row = $stmt->fetch(PDO::FETCH_ASSOC)) { //fetches data in associative array
    echo "<option>{$row['genre_name']}</option>"; //inputs data found into select as an option
       }       
echo "</select>";

echo '<input type="submit" value="Filter" id="filter" name="filter" class="filter">';

if(!isset($_POST['filter']))//check if filter genre has been pressed
{
    echo ("<h4>Please select a genre</h4>"); //if not show this
}
    else { //otherwise if it has...do this
    echo ("<h4>Your results have been filtered</h4>");

    $dropvalue = $_POST['dropdown']; //sets variable of value of dropdown box
    $dbh = config();
            //sorting function, want to further drill search results by genre
            $stmt = $dbh->prepare("SELECT * FROM consoles, games, genre WHERE genre.genre_name = :dropvalue");
            $stmt->bindValue(':dropvalue','%'.$dropvalue.'%');
            $stmt->execute();           
            while ($row = $stmt->fetch())
{
    echo "<ul>";
    echo "<a href='details.php?game_id=".$row['game_id']."'>".$row['game_name']."</a>";
    echo "</ul>";
}
}
      $dbh = NULL; //terminates connection to database
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:35:01.910

您可以使用 Javascript 来做到这一点。做就是了 ：

1）在标签`<form action="" method="post" id="drop_submit">`前添加`<select>`

2）写`<select id="select_tag" name="YOUR_SELECT_NAME">`“PHP DB代码选项”`</select>`

3) 添加以下 javascript 以在 HTML 页面的任何位置提交您的表单。

```
<script type="text/javascript">
  $('#status').change(function ()
  {
    $('#drop_submit').submit();
  });
</script> 
```

是的，别忘了补充，

```
if(isset($_POST['dropdown']))
{
  $dropdown = $_POST['dropdown'];
}
else
{
  $dropdown = "YOUR_DEFAULT / 1ST VALUE";
}
  $stmt = $dbh->prepare("SELECT game_name FROM games WHERE games.game_id=('$dropdown')"); 
  //prepares sql statement, this prevents SQL Injection, as the query is sent seperate to the string entered.
  $stmt->bindValue(':dropdown','%'.$dropdown.'%');
  $stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:50:17.773

当您更新您的问题时，这是解决方案

```
echo '<form action="" method="post">';

     echo "<select id='dropdown' name='dropdown' class='dropdown'>";//creates select HTML element
        $stmt = $dbh->prepare('SELECT genre_name FROM genre'); //prepares sql query
        $stmt->execute(); //executes query
           while($row = $stmt->fetch(PDO::FETCH_ASSOC)) { //fetches data in associative array
        echo "<option>{$row['genre_name']}</option>"; //inputs data found into select as an option
           }       
    echo "</select>";        
    echo '<input type="submit" value="Filter" id="filter" name="filter" class="filter">';

    echo '</form>';

    if(!isset($_POST['filter']))//check if filter genre has been pressed
    {
        echo ("<h4>Please select a genre</h4>"); //if not show this
    }
        else { //otherwise if it has...do this
        echo ("<h4>Your results have been filtered</h4>");

        $dropvalue = $_POST['dropdown']; //sets variable of value of dropdown box
        $dbh = config();
                //sorting function, want to further drill search results by genre
                $stmt = $dbh->prepare("SELECT * FROM consoles, games, genre WHERE genre.genre_name = :dropvalue");
                $stmt->bindValue(':dropvalue','%'.$dropvalue.'%');
                $stmt->execute();           
                while ($row = $stmt->fetch())
    {
        echo "<ul>";
        echo "<a href='details.php?game_id=".$row['game_id']."'>".$row['game_name']."</a>";
        echo "</ul>";
    }
    }
          $dbh = NULL; //terminates connection to database
    ?> 
```

# service - 有人知道加拿大天气数据提供商吗？

> ID：14509318
> 
> 赞同：-2
> 
> 时间：2013-01-24T19:37:01.433
> 
> 标签：service, web, weather, weather-api

我正在寻找类似于 Noaa 的 NDFD SOAP 服务的加拿大天气数据提供商。（即加拿大的实时天气数据）

我知道[http://www.weatheroffice.gc.ca/business/index_e.html](http://www.weatheroffice.gc.ca/business/index_e.html)

但是，我更喜欢 Web 服务。

有人知道这样的网络服务或类似的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:45:30.837

试试 Weatherundergound (http://www.wunderground.com/weather/api/) 易于使用并覆盖全球。

# java - Java：对 ArrayList 进行排序 基于 MyObject 变量

> ID：14509321
> 
> 赞同：0
> 
> 时间：2013-01-24T19:37:07.150
> 
> 标签：java, sorting, arraylist

> **可能重复：**
> [对对象集合进行](https://stackoverflow.com/questions/1206073/sorting-a-collection-of-objects)
> [排序根据姓名对联系人数组列表进行排序？](https://stackoverflow.com/questions/1814095/sorting-an-arraylist-of-contacts-based-on-name)

给你一个快速的问题：

我有一个`ArrayList<MyObject>`充满`MyObject`对象。我希望它们根据整数变量进行排序`MyObject`。

有没有现成的方法来实现这一点，还是我必须自己编写一个快速排序/合并排序？

谢谢你的时间，迪米特里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:41:23.657

您需要实现 Comparable 接口并覆盖 compareTo。以下示例我假设有一个成员变量“名称”，您将在其上比较对象。

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

class MyObject implements Comparable<MyObject>{
private String name;
private int id;

public String getName() {
    return name;
}

public MyObject(String name, int id) {
    super();
    this.name = name;
    this.id = id;
}
@Override
public int compareTo(MyObject o) {
    return name.compareTo(o.getName());
}   
@Override
public String toString() {
    return name+"\t"+id+"\n";
}
}

         public class Test {
         public static void main(String[] args) {
            List<MyObject> list = new ArrayList<MyObject>();
     list.add(new MyObject("John", 10));
     list.add(new MyObject("Mark", 11));
     list.add(new MyObject("Steve", 9));
     Collections.sort(list);
     System.out.println("Sorted list is :"+list);
 }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:38:22.837

您想查看比较器，它们可以让您以任何您想要的方式定义排序顺序。这是文档[http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:38:40.267

您可以使用`Array.sort(...)`You must only implement a `Comparator`for your `MyObject`or make it `Comparable`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T19:41:46.523

您还可以使用`Collections.sort()`库并传入您的集合 ( `ArrayList`) 和专`Comperator`为您的对象设计的。

```
http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html[enter link description here][1] 
```

# authentication - 使用 Go 进行 NTLM 身份验证

> ID：14509326
> 
> 赞同：2
> 
> 时间：2013-01-24T19:37:20.220
> 
> 标签：authentication, go, ntlm, exchangewebservices

我需要从 Windows 和 Unix 向 Exchange EWS 进行身份验证。

是否有任何库或我可以在 Go 中使用的任何东西？我看到有[cntlm](http://cntlm.sourceforge.net/)，一个我可以 exec() 的 NTLM 代理。但我不确定这是否适用于 Exchange .. 有人似乎在[这里](http://sourceforge.net/projects/cntlm/forums/forum/702676/topic/4575207)遇到了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:31:41.577

如果 Exchange 支持 kerberos，您可以尝试 gokerb ( [https://github.com/jmckaskill/gokerb](https://github.com/jmckaskill/gokerb) )。NTLM 在我的名单上...

# ruby - 如何使用 selenium-webdriver 在浏览器上刷新页面？

> ID：14509336
> 
> 赞同：28
> 
> 时间：2013-01-24T19:37:47.280
> 
> 标签：ruby, selenium-webdriver

请遵循以下代码部分：

```
driver.get "https://example.com/"

element = driver.find_element :name => "username"
element.send_keys "*****"
element = driver.find_element :name => "password"
element.send_keys "*****"
element.submit 
```

现在的重点是在`driver`浏览器上打开 URL 时，有时脚本必须输入用户名和密码的下一页，而不是出现 - 这会导致脚本失败。一些中间页面来了，要求我们点击“重试按钮”或“刷新页面”。因此，只要发生这种情况，脚本就会停止执行，因为没有得到提到的元素。

那么有没有办法在进入“登录”页面之前用“睡眠”刷新中间页面，以便脚本可以一次性运行？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2017-11-15T18:07:22.557

对于Capybara，我认为[Tommyixi的评论](https://stackoverflow.com/questions/14509336/how-to-refresh-a-page-on-browser-using-selenium-webdriver/26667748#comment45829054_14509336)是最好的：

```
访问 current_path

```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-05-11T02:45:14.710

正如@Nakilon 在评论中提到的，Capybara 中的非 Poltergeist 驱动程序使用以下内容刷新当前页面：

```
page.driver.browser.navigate.refresh 
```

但对于通用修复，请使用：

```
page.evaluate_script 'window.location.reload()' 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-01-24T19:43:29.843

您可以使用以下[`Navigation#refresh`](https://seleniumhq.github.io/selenium/docs/api/rb/Selenium/WebDriver/Navigation.html#refresh-instance_method)方法：

```
driver.navigate.refresh 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-02-26T12:43:08.940

对于水豚，我推荐

```
page.evaluate_script("window.location.reload()") 
```

这也适用于 poltergeist/phantomjs

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-24T19:43:34.167

在这种情况下，我编写了一些代码来检查输入字段是否存在。如果不存在，则刷新。

```
driver.refresh() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T19:40:07.453

编辑：我原来的答案假设 Capybara 正在被使用。

您可以`driver.get`再次在页面上使用来刷新。在浏览器中单击刷新按钮和键入相同的 URL 以再次加载页面之间没有区别，因此`driver.get`对于这种行为来说已经足够了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-31T04:53:02.040

您可以使用 - `driver.navigate().refresh();`。

例如看这里 - [http://reditblog.blogspot.in/2014/10/how-to-refresh-current-web-page.html](http://reditblog.blogspot.in/2014/10/how-to-refresh-current-web-page.html)

# click - 剑道网格行选择更改事件？

> ID：14509337
> 
> 赞同：8
> 
> 时间：2013-01-24T19:37:54.380
> 
> 标签：click, kendo-ui, html

我有几个问题..

1.  我正在使用 Kendo 网格，想知道在更改行选择时在文档级别触发事件是否可行。

    基本上，当更改行选择时，我想触发一个事件，这是在全局级别完成的，而不依赖于 gridID。

    例子：

    $('tr.k-state-selected').parents('tbody').live('change', function (e) { alert("onchange"); }); }

    但是上面的例子不起作用。我没有在 grid/body/gridRow 上定义任何其他类。

2.  如何使用剑道窗口（弹出）上的 span 类触发点击事件

    我试过下面的代码，但这不起作用

    ```
     $('span.k-icon.k-i-close').parents('a').click(function (e) {
            alert("clicked!");
        }); 
    ```

我是否需要包括任何其他类来识别剑道窗口？

任何帮助都感激不尽。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T21:07:21.197

您正在寻找[`change`](http://docs.kendoui.com/api/web/grid#events-change)事件。

您可能也有兴趣查看这个展示不同事件的[演示。](http://demos.kendoui.com/web/grid/events.html)`grid`

# ruby-on-rails - Rails：基于请求（和基于数据库）的路由

> ID：14509338
> 
> 赞同：1
> 
> 时间：2013-01-24T19:38:00.923
> 
> 标签：ruby-on-rails, database, routing, request, multi-tenant

我正在尝试摆脱我目前在我的应用程序中使用的一些范围前缀。

目前我的路线看起来像这样（*简化示例*）：

```
scope 'p'
  get ':product_slug', as: :product
end
scope 't' do
  get ':text_slug', as: :text
end 
```

例如生成这些路径：

```
/p/car
/t/hello-world 
```

现在我希望路径在没有前缀字母 (p & t) 的情况下工作。所以我将蛞蝓限制在现有的数据库条目中（顺便说一句效果很好）：

```
text_slugs = Text.all.map(&:slug)
get ':text_slug', as: :text, text_slug: Regexp.new( "(#{text_slugs.join('|')})"

product_slugs = Product.all.map(&:slug)
get ':product_slug', as: :product, product_slug: Regexp.new( "(#{product_slugs.join('|')})" 
```

**问题：**

这是一个多租户应用程序，这意味着某人的 text_slug 可能是另一个人的 product_slug，反之亦然。这就是为什么我必须按当前站点（按域）过滤 slug。

解决方案如下所示：

```
text_slugs = Site.find_by_domain(request.host).texts.all.map(&:slug)
get ':text_slug', as: :text, text_slug: Regexp.new( "(#{text_slugs.join('|')})" 
```

但是**请求**在 routes.rb 中不可用，我尝试的一切都行不通。

对 Rack::Request 的直接调用需要正确的 env 变量，该变量似乎不存在于 Application.routes 中，否则这可能会起作用：

```
req = Rack::Request.new(env)
req.host 
```

我真的尝试了很多，并感谢任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:04:06.383

您可以为此使用高级约束：http: [//guides.rubyonrails.org/routing.html#advanced-constraints](http://guides.rubyonrails.org/routing.html#advanced-constraints)。

```
class SlugConstraint
  def initialize(type)
    @type = type
  end
  def matches?(request)
    # Find users subdomain and look for matching text_slugs - return true or false
  end
end

App::Application.routes.draw do
  match :product_slug => "products#index", :constraints => SlugConstraint.new(:product)
  match :tag_slug => "tags#index", :constraints => SlugConstraint.new(:tag)
end 
```

顺便说一句 - 您可能会遇到测试问题，但这是另一个问题......

# shell - SWT - 只允许打开 1 个对话框

> ID：14509342
> 
> 赞同：0
> 
> 时间：2013-01-24T19:38:21.717
> 
> 标签：shell, dialog, swt

我在打开结果对话框的基本对话框中有一个按钮。

```
private void showPlotResultsDialog() {
  resultsDialog = new AplotPlotResultsDialog(getShell());
  resultsDialog.setBlockOnOpen(true);
  resultsDialog.open(); 
```

}

允许用户在工作时将结果对话框保持打开状态。但我最近注意到，用户可以根据需要多次单击“打开结果对话框”。
每次单击都会打开一个新的结果对话框。可以打开几个相同的对话框，但表中的数据不同。

1.  当他们单击按钮时，是否可以检查对话框是否已经打开？如果一个已经打开，弹出一条消息，说它已经打开并阻止打开一个新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:56:16.730

> 当他们单击按钮时，是否可以检查对话框是否已经打开？

当然。只需检查`null`您的方法即可。如果实例不为空，则已打开一个对话框。

> 如果一个已经打开，弹出一条消息，说它已经打开并阻止打开一个新的

最好更新对话框并将焦点设置在对话框上。节省了用户必须关闭弹出消息、关闭对话框和打开相同对话框的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T13:41:24.023

另一种可能性是使用以下方法为您的 shell（应该只打开一次）提供一个唯一的 ID：

`shell.setData("yourID");`

如果您有`SelectionListener`（例如），您可以检查`Shell`带有 ID`yourID`的是否已经打开。

行动：

*   如果在`Shell`某处打开：激活外壳（设置焦点）
*   如果`Shell`没有打开：打开外壳

示例（见评论）：

```
yourButton.addSelectionListener(new SelectionAdapter() {
    @Override
    public void widgetSelected(SelectionEvent e) {

        // Loop through all active shells and check if 
        // the shell is already open
        Shell[] shells = Display.getCurrent().getShells();

        for(Shell shell : shells) {
            String data = (String) shell.getData();

            // only activate the shell and return
            if(data != null && data.equals("yourID")) {
                shell.setFocus();
                return;
            }
        }

        // open the shell and the dialog
        Shell shell = new Shell(Display.getCurrent());
        shell.setData("yourID");
        YourDialog yourDialog = new YourDialog(shell);
        yourDialog.open();
    }
}); 
```

# c# - 是否可以仅使用 ILMerge 合并依赖项的子集？

> ID：14509344
> 
> 赞同：11
> 
> 时间：2013-01-24T19:38:32.687
> 
> 标签：c#, ilmerge

我正在尝试一些探索性的东西：

假设我有一个库“coolproject”，它依赖于`one.dll`、`two.dll`和`three.dll`.

我想使用 ILMerge 将 coolproject 与`one.dll`and `two.dll`but NOT结合起来`three.dll`。在合并完成时，我应该拥有`coolproject.dll`and `three.dll`。无论我打算在哪里使用`coolproject.dll`，我还必须参考`three.dll`

这甚至可能吗？每当我尝试它时，我都会得到。`Unresolved assembly reference not allowed: three`. 我`three.dll`通过设置“复制本地”= false 来省略。

**[编辑]：**

执行如下：

```
ILMerge /targetplatform:v2 /log /internalize /out:bin\coolproject.dll obj\Debug\coolproject.dll C:\Users\Nick\Projects\test\bin\one.dll C:\Users\Nick\Projects\test\bin\two.dll 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T17:36:19.003

这不起作用的原因很简单：ILMerge 必须能够找到您从列表中省略的 dll。

在评估目标库中的依赖项时，ILMerge 默认会检查各个位置以识别依赖库（\bin、GAC 等），即使您从命令行列表中省略了它也是如此。如果它找不到这个库，你必须使用`\lib`开关指定它的位置。否则你会看到`Unresolved assembly reference not allowed: three`错误。

例子：

```
ILMerge /lib:..\three\bin\three.dll /targetplatform:v2 /log /internalize /out:bin\coolproject.dll obj\Debug\coolproject.dll C:\Users\Nick\Projects\test\bin\one.dll C:\Users\Nick\Projects\test\bin\two.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:39:31.447

我认为您正在寻找`/internalize`开关的“排除”参数。例如，如果您使用

```
/internalize:excludes.txt 
```

文件`excludes.txt`包含在哪里

```
three.dll 
```

它将内化`one.dll`，但作为外部依赖`two.dll`离开。`three.dll`

以下是一些更详细的博客文章：

*   [http://www.bjoernrochel.de/2009/07/07/how-to-shoot-yourself-in-the-foot-with-ilmerge/](http://www.bjoernrochel.de/2009/07/07/how-to-shoot-yourself-in-the-foot-with-ilmerge/)
*   [http://www.blackwasp.co.uk/ILMergeInternalize.aspx](http://www.blackwasp.co.uk/ILMergeInternalize.aspx)

**更新：**来自[文档](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.doc)：

> 2.10 排除文件
> 
> 公共字符串 ExcludeFile { 获取；放; }
> 
> 此属性仅与 Internalize 属性一起使用（第 2.12 节）。在调用 Merge 之前设置此项时，它指示将用于标识不修改其可见性的类型的路径和文件名。如果 Internalize 为真，但 ExcludeFile 为 ""，则除主程序集之外的任何程序集中的所有类型都将变为非公共类型。设置此属性会隐式地将 Internalize 设置为 true。
> 
> 文件的内容应该是每行一个正则表达式。语法是在 .NET 命名空间 System.Text.RegularExpressions 中为正则表达式定义的。正则表达式与每个类型的全名匹配，例如“System.Collections.IList”。如果匹配失败，则在类型名称前面加上程序集名称（用方括号括起来）再次尝试。因此，模式“[A].*”将程序集 A 中的所有类型排除在非公开之外。（反斜杠是必需的，因为字符串被视为正则表达式。）模式“NT”将匹配命名空间 N 中所有名为 T 的类型，无论它们是在哪个程序集中定义的。
> 
> 需要注意的是，正则表达式并不锚定在字符串的开头；如果需要，请使用适当的正则表达式运算符字符来执行此操作。
> 
> 2.12 内化
> 
> 公共布尔内部化{获取；放; }
> 
> 这控制是否修改主程序集以外的程序集中的类型的可见性。如果为真，则所有在其程序集外可见的非豁免类型都会修改其可见性，以便从合并程序集的外部看不到它们。如果一个类型的全名与使用 .NET 正则表达式引擎的 ExcludeFile（第 2.10 节）中的一行匹配，则该类型是豁免的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:50:31.123

我写了一个小工具来处理这个问题。

源代码可以在@https [://github.com/leppie/ReferenceRemover](https://github.com/leppie/ReferenceRemover)找到。

在您的情况下，它将用作：

```
ReferenceRemover three.dll "(one|two).*" coolproject.dll 
```

参数说明：

1.  组装检查
2.  正则表达式匹配引用
3.  它需要重定向到的程序集

输出已`three.dll`调整其参考值。

# powershell - PowerShell Pipeline 是连续的源吗？

> ID：14509345
> 
> 赞同：4
> 
> 时间：2013-01-24T19:38:36.927
> 
> 标签：powershell

从 CmdLet 发送到管道的项目是立即传递到下一个 CmdLet，还是进入一个内部 PS“累加器”，将它们存储起来，直到当前 CmdLet 完成，然后将它们送入下一个？

有没有可以配置连续模式的参数？如果 CmdLet 采用单个对象，则可以在数据进入管道时调用它，但如果 CmdLet 采用数组，则 PS 可能会累积并将整个数组送入。例如，排序需要一个完整的集合。

我对编写长期运行的、开放式的、流式的 CmdLets 很感兴趣。

谢谢。我找不到关于管道的任何深入讨论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:33:47.583

**第一部分：**不，PowerShell 函数不一定会立即传递到 cmdlet，而是会传递到名为 $input 的特殊变量中。

$input 在函数开始执行之前填充了所有传入的管道对象。如有必要，PowerShell 甚至可能会延迟执行，直到所有传入管道数据完成。

**第二部分：**如果你想连续处理你的数据而不是等待它进入并存储在 $input 中，你可以在编写函数/过滤器时使用**filter**关键字代替**function**关键字（过滤器的行为类似于函数，只是它们不等待数据，而是在数据可用时使用它）。

例如

```
filter Get-OddEven {
$x = $_ % 2

# ... other logic here
} 
```

希望这会有所帮助，以免我抄袭，所有这些都来自*Jerry Lee Ford, Jr 的“Microsoft Windows PowerShell Programming For the Absolute Beginner”*一书，如果您想进一步了解的话。

# android - 在接收广播意图时更新 UI 上的 ListView

> ID：14509347
> 
> 赞同：0
> 
> 时间：2013-01-24T19:38:38.590
> 
> 标签：android, user-interface, broadcastreceiver

我在 UI 上有一个项目列表。当应用程序使用 捕获意图时`BroadCastReceiver`，我需要更新列表中的特定项目（隐藏`ImageView`项目行上的 ）。该列表显然使用了自定义适配器。我怎样才能做到这一点？

我尝试访问`ListView`使用`Application`从接收器调用的对象的片段，但Android给了我这个错误：

“只有创建视图层次结构的原始线程才能触及它的视图”

抱歉，如果我有点笼统，但实际上我不知道代码的哪一部分提供了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:28:36.660

我猜您正在尝试从接收此广播的另一个线程编辑列表。如果确实是这种情况，那么有一个简单的解决方案 - Activity 类提供了一个名为 - runOnUiThread 的方法。你可以在这篇文章中看到一个例子：[Android“只有创建视图层次结构的原始线程才能接触它的视图。](https://stackoverflow.com/questions/5161951/android-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-vi)

祝你好运！

# python - 在我的算法中实现 raw_input

> ID：14509349
> 
> 赞同：2
> 
> 时间：2013-01-24T19:38:45.537
> 
> 标签：python, python-2.7

我只是 Python 的新手。我有这个算法来看看一个词是不是回文。

```
def isPalindrome(s):

    def toChars(s):
        s = s.lower()
        ans = ''
        for c in s:
            if c in 'abcdefghijklmnopqrstuvwxyz':
                ans = ans + c
        return ans

    def isPal(s):
        if len(s) <= 1:
            return True
        else:
            return s[0] == s[-1] and isPal(s[1:-1])

    return isPal(toChars(s)) 
```

我想实现这样的事情：

```
s=str(raw_input('Enter a word with quotes: ')) 
```

我想被要求输入一个单词，因为现在，运行我的代码的唯一方法是在 shell 中调用它。

PS：对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:47:40.453

以下将做到这一点（不带引号 - 我不确定你为什么想要它们）：

```
s = raw_input('Enter a word: ')
print isPalindrome(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:48:40.510

这会做

```
>>> is_a_pal = raw_input('Enter a word with quotes: ')
Enter a word with quotes: tyuiyt
>>> is_a_pal
'tyuiyt'
>>> 
```

# fips - 使用 Visual Studio 构建应用程序时，此实现不属于 Windows 平台 FIPS 验证的加密算法

> ID：14509354
> 
> 赞同：34
> 
> 时间：2013-01-24T19:39:07.940
> 
> 标签：fips

我正在尝试在 Visual Studio 中编译我的程序，但出现 FIPS 加密算法错误。我检查了注册表项并将其设置为 false。

有什么建议么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-24T19:44:41.423

我也遇到了困难。去`HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Lsa`。在子项下您应该看到`FipsAlgorithmPolicy`. *删除*此注册表项并重新启动 Visual Studio。

参考：[https ://blogs.iis.net/webtopics/parser-error-message-this-implementation-is-not-part-of-the-windows-platform-fips-validated-cryptographic-algorithms-when-net-页面有调试真](https://blogs.iis.net/webtopics/parser-error-message-this-implementation-is-not-part-of-the-windows-platform-fips-validated-cryptographic-algorithms-when-net-page-has-debug-true)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-08-18T08:41:25.687

您可以通过在 .config 文件的部分下添加`<enforceFIPSPolicy enabled="false"/>`以下内容来解决此问题：`runtime`

*   MSBuild（示例路径`C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\MSBuild\15.0\Bin\MSBuild.exe.config`：）
*   Visual Studio（示例路径`C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\devenv.exe.config`：）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-27T17:26:37.153

我的回答是在这里将注册表项从 1 更改为 0：

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\fipsalgorithmpolicy

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-24T19:58:57.837

问题有点笼统。我更具体的错误：

> AppContainer Creation Failed with error message NONE, state 此实现不是 Windows 平台 FIPS 验证的加密算法的一部分

Microsoft 在此处解释并列出了一种解决方法：

[https://support.microsoft.com/en-us/help/911722/you-may-receive-an-error-message-when-you-access-asp-net-web-pages-tha](https://support.microsoft.com/en-us/help/911722/you-may-receive-an-error-message-when-you-access-asp-net-web-pages-tha)

打开 Web.config 找到 system.web 部分

添加密钥：

```
*<machineKey validationKey="AutoGenerate,IsolateApps" decryptionKey="AutoGenerate,IsolateApps" validation="3DES" decryption="3DES"/>* 
```

保存 Web.Config，然后在命令提示符下进行 iisreset。

假设公司策略已将 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\fipsalgorithmpolicy 设置为 1（当然，IIS 正在运行）

很高兴知道为什么这会影响 Python 和 R 在 Windows SQL Server 2019 上的安装。

# javascript - jQueryMobile - 如何通过 JavaScript 更改列表视图的数据插入值？

> ID：14509365
> 
> 赞同：0
> 
> 时间：2013-01-24T19:39:29.767
> 
> 标签：javascript, listview, jquery-mobile

我正在使用 jQuery Mobile 和 PhoneGap 开发我们的移动应用程序。我们的每个主页都会有一个列表视图，用于显示各种类型的数据。如果应用程序在平板电脑上运行，或者在屏幕大于特定宽度的横向视图中运行，我希望列表视图的 data-inset 属性设置为 true，并以圆角和边框呈现。如果它在预定义宽度以下的较小屏幕上，我希望它没有 inset 属性。

在我的函数中，我做了这样的事情来设置 data-inset 属性：

```
var list = $("#testlist");
list.data("inset", true);
list.listview("refresh",true); 
```

但是，这不会更新列表。它保持格式化以适应屏幕的整个宽度。我应该如何实现这个目标？我考虑过手动添加样式，但我不仅必须将其添加到列表中，而且还必须将每个列表项添加到列表中。有没有办法可以切换 data-inset 属性并触发框架重新设置它的样式？

这是一个半工作的 jsFiddle，它模仿了我正在尝试做的事情：http: [//jsfiddle.net/GQgV9/12/](http://jsfiddle.net/GQgV9/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:04:49.793

没有文明的方法可以做到这一点。刷新只会更新小部件的内部。为了使列表插入，您必须：

1.  在`<ul>`, .ie`ui-listview-inset`和`ui-corner-all`.
2.  通过设置`inset`选项`.listview('option', 'inset', true)`。
3.  刷新小部件，否则列表项将没有圆角。

这是您的 jsFiddle 的修改版本：http: [//jsfiddle.net/GQgV9/13/](http://jsfiddle.net/GQgV9/13/)

# google-analytics - 如何阻止谷歌分析跟踪特定的查询参数？

> ID：14509367
> 
> 赞同：0
> 
> 时间：2013-01-24T19:39:36.133
> 
> 标签：google-analytics

我有一个类似的网址`example.com/?fname=John&lname=Doe&id=1234`

如何阻止 Google Analytics 跟踪参数名称，`fname`以及`lname`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:48:23.220

管理员 -> 配置文件 -> 配置文件设置 -> 排除 URL 查询参数（以逗号分隔列表的形式输入您的参数）。

# java - 在 for 循环中重命名文件时出错

> ID：14509370
> 
> 赞同：3
> 
> 时间：2013-01-24T19:39:44.377
> 
> 标签：java, android, file, file-rename, iteration

我在Java中有这段代码。randomName() 函数返回一个带有（不出所料）随机字符串的字符串。

```
File handle = new File(file);
String parent = handle.getParent();
String lastName = "";
for (int i = 0; i < 14; i++)
{
    lastName = parent + File.separator + randomName();
    handle.renameTo(new File(lastName));
}
return lastName; 
```

我有适当的权限，当我登录到 logcat 时，randomName() 函数会执行所有字符串，但在循环结束时，`handle`似乎有一个文件名，即第一个 randomName() 调用的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:26:04.147

This is my solution:

```
File handle = null;
        String parent = "";
        String lastName = "";

        for (int i = 0; i < 14; i++)
        {
            if (i == 0)
            {
                handle = new File(file);
                parent = handle.getParent();
            }
            else
            {
                lastName = parent + File.separator + randomName();
                handle.renameTo(new File(lastName));
                handle = new File(lastName);
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:13:12.327

这没有按预期工作的原因是因为一旦文件第一次被重命名，`handle`就不再引用该文件。这就是后续重命名操作失败的原因。 `File`表示路径名，而不是磁盘上的实际对象。

# c# - 按枚举名称排序查询结果

> ID：14509376
> 
> 赞同：2
> 
> 时间：2013-01-24T19:40:08.633
> 
> 标签：c#, linq, enums

我有`List<string>`以下条目：

> “夏天”、“春天”、“冬天”

我想写一个 .OrderBy() 来根据这个对它们进行排序：

```
public enum Term {
    Spring = 0, Summer, Fall, Winter, All
} 
```

因此，我想看到的结果是：

“春天”、“夏天”、“冬天”

编辑 - 为澄清起见，并非每个客户都有所有可用的条款，但我只希望列表排序的一致性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T19:47:10.297

```
var q = l.OrderBy (x => Enum.Parse(typeof(Term), x)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:45:55.160

```
List<string> terms = new List<string> { "Summer", "Spring", "Winter" };

var enumNames = Enum.GetNames(typeof(Term))
                    .OrderBy(s=>Enum.Parse(typeof(Term),s))
                    .ToList();

var orderedList = terms.OrderBy(s => enumNames.IndexOf(s)).ToList(); 
```

# oauth - SalesForce API：OAuth 授权错误 1800

> ID：14509377
> 
> 赞同：1
> 
> 时间：2013-01-24T19:40:08.593
> 
> 标签：oauth, salesforce, oauth-2.0, force.com

我是 SalesForce 开发的新手，想探索 API 及其功能。我创建了一个新的开发者版帐户。我尚未尝试以编程方式访问 API，但我正在尝试（未成功）通过 Workbench ( [https://workbench.developerforce.com/login.php](https://workbench.developerforce.com/login.php) ) 和 Apigee 控制台 ( [https://apigee .com/console/salesforce](https://apigee.com/console/salesforce)）。

出于某种原因，在这两种情况下，我都被重定向到带有**OAuth 错误代码 1800**的 URL （例如[https://na15.salesforce.com/setup/secur/RemoteAccessErrorPage.apexp?oauth_error_code=1800&display=popup](https://na15.salesforce.com/setup/secur/RemoteAccessErrorPage.apexp?oauth_error_code=1800&display=popup)在 Workbench 案例中）。在此 URL 上，我看到一个屏幕，显示文本**“远程访问授权错误”-“设置远程访问时出现问题”**。我究竟做错了什么？

一些额外的细节：

*   我可以很好地登录到 SalesForce，问题只出现在 API/OAuth 访问中
*   除了 (1) 使用一些示例数据（潜在客户、帐户、联系人）填充它，以及 (2) 重置安全令牌（通过“我的个人信息”-> “重置我的安全令牌”）
*   在 WorkBenh 登录屏幕上，我选择哪个 API 版本（尝试了 24、25 和 26）并不重要，而且我在环境中使用“生产”，因为我的登录似乎根本不适用于 Pre-Release 或沙盒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:57:10.143

（不是一个真正的答案，我希望随着情况的发展经常更新它）

诡异的。

是的，就连接应用程序而言，Developer Edition 是“产品”。您可能需要向 Salesforce 支持提交案例（右上角的帮助和培训链接）。

Workbench 确实使用 API（这个 Apigee 东西可能也是如此）但是如果您使用您的用户名并通过，我看不出它会如何进入 OAuth...

您可以下载任何其他与 SF 相关的工具（Data Loader、Force.com IDE、Real Force Explorer、Excel 连接器、一些 iPad/Android 应用程序......地狱，甚至桌面版 Chatter）并尝试连接？

有时 API 产品不显示安全令牌的特殊字段（您可以通过在密码字段中输入更长的字符串来绕过它：“passwordSecurityToken”），但当我访问我的开发人员时，Workbench 从未要求提供令牌。版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T22:57:01.003

NA15 上的 OAuth 存在问题，但现在应该解决。我用一个全新的 NA15 组织测试了 Workbench，它按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-27T01:50:26.393

当我尝试通过解码 startUrl 参数并在已经登录的选项卡中直接访问它来“短路”身份验证 URL 时，我遇到了这个问题。例如

1.  登录到某个组织`na14.salesforce.com`
2.  单击 sfdx 使用默认 url 在 vs 代码中授权一个组织
3.  被发送到一个像这样的网址`https://login.salesforce.com/?startURL=%2Fsetup%2Fsecur%2FRemoteAccessAuthorizationPage.apexp%3Fsource%3D<long_base64_encoded_string>`
4.  使用 url 解码器（即[https://meyerweb.com/eric/tools/dencoder/](https://meyerweb.com/eric/tools/dencoder/)）将其翻译为`https://login.salesforce.com/?startURL=/setup/secur/RemoteAccessAuthorizationPage.apexp?source=<long_base64_encoded_string>`
5.  更改 url 以匹配我登录的域，即`https://na14.salesforce.com/?startURL=/setup/secur/RemoteAccessAuthorizationPage.apexp?source=<long_base64_encoded_string>`
6.  通过标准的 oauth 授权
7.  成功

大多数情况下都可以正常工作，但在某些情况下，我会收到美妙的 oauth 错误 1800。在这些情况下，我可以通过在启动 oauth 授权时指定我的实例所在的特定域来解决此问题。在步骤 2 中使用上面的示例，我将为`https://na14.salesforce.com`url 选择（其他 oauth 流程通常提供类似的自定义 url 输入，但 ymmv）。瞧，第 7 步成功了。

不能肯定地说这是否正是其他人会发生的事情。

# ms-access - MySQL 5.1 不接受来自 Access 2007 的空外键

> ID：14509379
> 
> 赞同：1
> 
> 时间：2013-01-24T19:40:12.597
> 
> 标签：ms-access, null, foreign-keys, ms-access-2007, foreign-key-relationship

后端 - MySQL 5.1.52 社区前端 - MS Access 2007

我有两张表 POLIZAS 和 TRAMITES（都是 InnoDB）我使用 Access 作为前端。我需要在 Tramites 上插入/更新记录，有时 Tramites 与 Polizas 不相关。

Tramites 有一个允许 null 的 Polizas 外键。但是在插入/更新时仍然出现此错误：

> [MySQL][ODBC 5.1 Driver][mysqld-5.1.52-community]无法添加或更新子行：外键约束失败（'cartera_bd'.'tramites',CONSTRAINT 'fk_tramites_polizas1' FOREIGN KEY ('Poliza') REFERENCES 'polizas' ('Poliza') ON DELETE CASCADE ON UPDATE CASCADE) (#1452)

有什么线索吗？

这是 POLIZAS 表说明

```
CREATE TABLE `polizas` (
`Poliza` varchar(20) NOT NULL,
`IdAgente` mediumint(8) unsigned NOT NULL,
`IdPlan` tinyint(3) unsigned NOT NULL,
`IdCliente` int(10) unsigned NOT NULL,
`RenuevaA` varchar(20) DEFAULT NULL,
`InicioVigencia` date NOT NULL,
`IdTipoDerechos` tinyint(1) unsigned NOT NULL,
`IdConducto` tinyint(1) unsigned NOT NULL,
`IdFormaPago` tinyint(1) unsigned NOT NULL,
`IdMoneda` tinyint(1) unsigned NOT NULL,
`PrimaNeta` decimal(11,2) NOT NULL,
`Recargos` decimal(11,2) DEFAULT NULL,
`Derechos` decimal(11,2) DEFAULT NULL,
`IVA` decimal(11,2) DEFAULT NULL,
`PrimaTotal` decimal(11,2) NOT NULL,
`Status` tinyint(1) unsigned NOT NULL,
`Notas` varchar(150) DEFAULT NULL,
`FechaEmision` date DEFAULT NULL,
PRIMARY KEY (`Poliza`),
KEY `IdAgente` (`IdAgente`),
KEY `IdCliente` (`IdCliente`),
KEY `IdConducto` (`IdConducto`),
KEY `IdFormaPago` (`IdFormaPago`),
KEY `IdMoneda` (`IdMoneda`),
KEY `IdPlan` (`IdPlan`),
KEY `IdTipoDerechos` (`IdTipoDerechos`),
KEY `fk_polizas_status1` (`Status`),
CONSTRAINT `fk_polizas_agentes1` FOREIGN KEY (`IdAgente`) REFERENCES `agentes` (`ID`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `fk_polizas_clientes1` FOREIGN KEY (`IdCliente`) REFERENCES `clientes` (`ID`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `fk_polizas_conducto1` FOREIGN KEY (`IdConducto`) REFERENCES `conducto` (`ID`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `fk_polizas_formapago1` FOREIGN KEY (`IdFormaPago`) REFERENCES `formapago` (`ID`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `fk_polizas_moneda1` FOREIGN KEY (`IdMoneda`) REFERENCES `moneda` (`ID`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `fk_polizas_planes1` FOREIGN KEY (`IdPlan`) REFERENCES `planes` (`ID`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `FK_polizas_status1` FOREIGN KEY (`Status`) REFERENCES `status` (`ID`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `fk_polizas_tipoderechos1` FOREIGN KEY (`IdTipoDerechos`) REFERENCES `tipoderechos` (`ID`) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

这是 TRMITES 表说明

```
CREATE TABLE `tramites` (
`IdTramite` int(11) NOT NULL AUTO_INCREMENT,
`IdTipoTramite` tinyint(1) unsigned NOT NULL,
`Folio` int(11) DEFAULT NULL,
`Poliza` varchar(20) DEFAULT NULL,
`Inicio` date NOT NULL,
`Fin` date DEFAULT NULL,
`Tramite` text,
`Dias` int(11) DEFAULT NULL,
`IdCliente` int(10) unsigned DEFAULT NULL,
PRIMARY KEY (`IdTramite`),
KEY `fk_tramites_polizas1` (`Poliza`),
KEY `fk_tramites_tipotramite1` (`IdTipoTramite`),
KEY `fk_tramites_clientes1` (`IdCliente`) USING BTREE,
CONSTRAINT `fk_tramites_polizas1` FOREIGN KEY (`Poliza`) REFERENCES `polizas` (`Poliza`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `fk_tramites_tipotramite1` FOREIGN KEY (`IdTipoTramite`) REFERENCES `tipotramite` (`Id`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `FK_tramite_clientes1` FOREIGN KEY (`IdCliente`) REFERENCES `clientes` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8; 
```

# jquery - JQuery Masked Input Plugin 不接受粘贴

> ID：14509384
> 
> 赞同：4
> 
> 时间：2013-01-24T19:40:30.653
> 
> 标签：jquery, maskedinput

首先，我正在使用：

*   jQuery 1.8.3
*   Masked Input Plugin 1.3.1（插件可以在[这里](http://digitalbush.com/projects/masked-input-plugin/)找到）

我的目标：

*   屏蔽输入字段以仅接受 11 位数字。但是，我希望它以某种方式接受复制和粘贴，如果我从外部源（例如文本文件）复制仅包含 11 个数字的文本，该插件让我粘贴到蒙面的输入字段中。

问题：

*   当我尝试粘贴例如：**03073870970**（11 个数字）时，掩码只接受**030738709**（9 个数字）。

我应该怎么做才能解决这个问题？欢迎任何提示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-10T12:55:10.593

你不需要改变你的插件。您可以绑定粘贴事件并在粘贴之前清除内容。因此，面具不会保留任何空间以防止您制作粘贴。

```
$('input.class').bind('paste', function () { $(this).val(''); }); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T20:01:57.927

解决方案：

将占位符从“_”或“”或任何其他占位符更改为“”（空字符串），如下所示：

```
$(".cpfInput").mask("99999999999",{placeholder:""}); 
```

诀窍是，如果您放置任何不同于空字符串的占位符，插件将使用占位符填充输入字段，并且当您粘贴某些内容时，它不会在粘贴您要粘贴的任何内容之前清理它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-28T08:19:15.087

另一种解决方案：从您的输入中删除 maxlength 属性。插件本身会剪切额外的符号，但您将能够正确地从缓冲区粘贴。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-24T14:56:40.990

有同样的问题，我发现的最轻松的解决方案，没有删除任何东西（占位符等）是：

```
$('input[placeholder]').on('paste', function(){
    $(this).val(' ');
}); 
```

作为一种魅力:)

我发现的另一种解决方案：

```
$('input[placeholder]').on('paste', function(e){
    e.preventDefault();
    var clipboardCurrentData = (e.originalEvent || e).clipboardData.getData('text/plain');
    window.document.execCommand('insertText', false, clipboardCurrentData);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-13T00:08:00.050

请改用[Formatter.js](https://github.com/firstopinion/formatter.js)。我换了这个确切的原因。另一个原因是围绕不完整字段的不良用户体验。例如，当我从一个窗口转到另一个窗口以获取电话号码时，我可能会添加三个数字，然后更改窗口以获取其余数字，然后返回，但是每次更改窗口时，被屏蔽的输入插件都会清除该字段。令人沮丧的用户体验！

# sql-server - 一个长的 CASE WHEN 语句

> ID：14509385
> 
> 赞同：1
> 
> 时间：2013-01-24T19:40:33.357
> 
> 标签：sql-server

我有我做过的最长的案例陈述，我无法解决这个错误。IT 说它附近有语法错误），我很尴尬，我无法弄清楚这么简单的错误

```
SUM(CASE 
      WHEN COL_V_STD_REP_FullCourseDetail.SYSTEM = 'GEMS' 
      THEN CASE 
             WHEN RRDD LIKE '12%' OR RRDD LIKE '13%' OR RRDD LIKE '16%' OR 
                  RRDD LIKE '17%' OR RRDD LIKE '2706%' OR RRDD LIKE '2707%' OR 
                  RRDD LIKE '2331%' 
             THEN [DUR_IN_Hours] 
             ELSE 0 
             END) AS SP_DOM_INTL_HRS 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T19:43:21.763

你错过了第二个`END`：

```
SUM(CASE 
      WHEN COL_V_STD_REP_FullCourseDetail.SYSTEM = 'GEMS' 
      THEN 
        CASE 
          WHEN RRDD LIKE '12%' 
            OR RRDD LIKE '13%' 
            OR RRDD LIKE '16%' 
            OR RRDD LIKE '17%' 
            OR RRDD LIKE '2706%' 
            OR RRDD LIKE '2707%' 
            OR RRDD LIKE '2331%' 
          THEN [DUR_IN_Hours] 
          ELSE 0 
        END
     END) AS SP_DOM_INTL_HRS
     ^ -- this is missing 
```

顺便说一句，如果您格式化代码，您将更容易找到这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:52:34.873

从逻辑上讲，当逻辑不那么复杂时，我不会嵌套 CASE 语句。对于这样的事情，我会在第一个 CASE 语句中添加嵌套 CASE 语句的逻辑（如下所示）：

```
SUM(CASE 
  WHEN COL_V_STD_REP_FullCourseDetail.SYSTEM = 'GEMS' AND 
       (RRDD LIKE '12%' 
        OR RRDD LIKE '13%' 
        OR RRDD LIKE '16%' 
        OR RRDD LIKE '17%' 
        OR RRDD LIKE '2706%' 
        OR RRDD LIKE '2707%' 
        OR RRDD LIKE '2331%') THEN [DUR_IN_Hours] 
  ELSE 0 
END) AS SP_DOM_INTL_HRS 
```

# java - 从 url 创建图像并保存在数据存储中

> ID：14509389
> 
> 赞同：0
> 
> 时间：2013-01-24T19:40:48.553
> 
> 标签：java, google-app-engine

我有一个保存用户个人资料图片的实体。为了简单起见，我只存储服务 URL。我允许我的用户裁剪他们的图像。为此，我从服务 URL 获取图像并创建一个`com.google.appengine.api.images.Image;`此图像没有 blob 键，因为它是从字节数组创建的。将此图像存储为 blob 并获取服务 url 的最简单方法是什么？

```
URL url = new URL(currentProfile.getProfilePictureUrl());
InputStream input = url.openStream();
byte[] byteArray = IOUtils.toByteArray(input);
Image newImage = ImagesServiceFactory.makeImage(byteArray);

int imageWidth = newImage.getWidth();
int imageHeight = newImage.getHeight();

ImagesService imagesService = ImagesServiceFactory.getImagesService();
float lx = (float)x/(float)imageWidth;
float ty =  (float)y/(float)imageHeight;
float rx = (float)x2/(float)imageWidth;
float by = (float)y2/(float)imageHeight;
Transform resize = ImagesServiceFactory.makeCrop(lx, ty, rx, by);

Image transImage = imagesService.applyTransform(resize, newImage);

BlobstoreService blobStoreService = BlobstoreServiceFactory.getBlobstoreService();

//This doesn't work because transImage.getBlobKey() is null
ServingUrlOptions options =  ServingUrlOptions.Builder.withBlobKey(transImage.getBlobKey()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:04:49.720

您可以[以编程方式将数据写入 blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)。我使用这个小片段：

```
private BlobKey saveToBlobstore(String contentType, String imageName, byte[] imageData) throws IOException {
    // Get a file service
    FileService fileService = FileServiceFactory.getFileService();

    // Create a new Blob file and set the name to contain ref to UserImage
    AppEngineFile file = fileService.createNewBlobFile(contentType, imageName);

    // Open a channel to write to it
    FileWriteChannel writeChannel = fileService.openWriteChannel(file, true);

    writeChannel.write(ByteBuffer.wrap(imageData));
    writeChannel.closeFinally();

    // return the BlobKey
    return fileService.getBlobKey(file);
} 
```

# sql - 使用 SQL 检测异常间隔

> ID：14509397
> 
> 赞同：6
> 
> 时间：2013-01-24T19:41:24.183
> 
> 标签：sql, sql-server, sql-server-2008, temporal-database

我的问题很简单：我有一个包含一系列状态和时间戳的表（出于好奇，这些状态表示警报级别），我想查询此表以获得两个状态之间的持续时间。

看起来很简单，但棘手的部分来了：我不能创建查找表、过程，它应该尽可能快，因为这个表是一个拥有超过 10 亿条记录的小怪物（不开玩笑！）......

架构非常简单：

[pk] 时间价值

（其实还有第二个pk但是这个没用）

下面是一个真实世界的例子：

```
时间戳状态
2013-1-1 00:00:00 1
2013-1-1 00:00:05 2
2013-1-1 00:00:10 2
2013-1-1 00:00:15 2
2013-1-1 00:00:20 0
2013-1-1 00:00:25 1
2013-1-1 00:00:30 2
2013-1-1 00:00:35 2
2013-1-1 00:00:40 0

```

仅考虑 2 级警报的输出应如下报告 2 级警报的开始和结束（当达到 0 时）：

```
开始时间结束时间间隔
2013-1-1 00:00:05 2013-1-1 00:00:20 15
2013-1-1 00:00:30 2013-1-1 00:00:40 10

```

我一直在尝试各种内部连接，但所有这些都将我引向了惊人的笛卡尔爆炸。你们能帮我想出一个方法来完成这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:51:14.527

这一定是我今天看到的最难的问题之一——谢谢！我假设您可以使用 CTE？如果是这样，请尝试以下操作：

```
;WITH Filtered
AS
(
    SELECT ROW_NUMBER() OVER (ORDER BY dateField) RN, dateField, Status
    FROM Test    
)
SELECT F1.RN, F3.MinRN,
    F1.dateField StartDate,
    F2.dateField Enddate
FROM Filtered      F1, Filtered F2, (
SELECT F1a.RN, MIN(F3a.RN) as MinRN
FROM Filtered      F1a
   JOIN Filtered F2a ON F1a.RN = F2a.RN+1 AND F1a.Status = 2 AND F2a.Status <> 2
   JOIN Filtered F3a ON F1a.RN < F3a.RN AND F3a.Status <> 2
GROUP BY F1a.RN ) F3 
WHERE F1.RN = F3.RN AND F2.RN = F3.MinRN 
```

还有[小提琴](http://sqlfiddle.com/#!3/58bba/56)。我没有添加间隔，但我想你可以从这里处理那部分。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:42:49.837

终于找到我满意的版本了。我想起了另一个问题的答案（虽然不记得是哪一个），其中指出两个（增加的）序列之间的差异始终是一个常数。

```
WITH Ordered (occurredAt, status, row, grp) 
             as (SELECT occurredAt, status, 
                        ROW_NUMBER() OVER (ORDER BY occurredat), 
                        ROW_NUMBER() OVER (PARTITION BY status 
                                           ORDER BY occurredat)
                 FROM Alert)

SELECT Event.startDate, Ending.occurredAt as endDate,
       DATEDIFF(second, Event.startDate, Ending.occurredAt) as interval

FROM (SELECT MIN(occurredAt) as startDate, MAX(row) as ending
      FROM Ordered
      WHERE status = 2
      GROUP BY row - grp) Event

LEFT JOIN (SELECT occurredAt, row
           FROM Ordered
           WHERE status != 2) Ending
        ON Event.ending + 1 = Ending.row 
```

（工作[SQL Fiddle 示例](http://sqlfiddle.com/#!3/82f6d/29)，带有一些额外的数据行用于工作检查）。

不幸的是，这不能正确处理作为结束行（行为未指定）的 2 级状态，尽管它*确实*列出了它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:29:42.043

只是为了有一个替代品。试图对性能进行一些测试，但没有完成。

```
SELECT
  MIN([main].[Start]) AS [Start],
  [main].[End],
  DATEDIFF(s, MIN([main].[Start]), [main].[End]) AS [Seconds]
FROM
(
  SELECT
    [sub].[Start],
    MIN([sub].[End]) AS [End]
  FROM
  (
    SELECT
      [start].[Timestamp] AS [Start],
      [start].[Status] AS [StartingStatus],
      [end].[Timestamp] AS [End],
      [end].[Status] AS [EndingStatus]
    FROM [Alerts] [start],  [Alerts] [end]
    WHERE [start].[Status] = 2 
      AND [start].[Timestamp] < [end].[Timestamp]
      AND [start].[Status] <> [end].[Status]
  ) AS [sub]
  GROUP BY
    [sub].[Start],
    [sub].[StartingStatus]
) AS [main]
GROUP BY
  [main].[End] 
```

这是一个[Fiddle](http://sqlfiddle.com/#!3/f0f00/17)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T21:34:06.023

我通过使用作为表标识的 id 来做类似的事情。

```
 create table test(id int primary key identity(1,1),timstamp datetime,val int)

    insert into test(timstamp,val) Values('1/1/2013 00:00:00',1)
    insert into test(timstamp,val) Values('1/1/2013 00:00:05',2)
    insert into test(timstamp,val) Values('1/1/2013 00:00:25',1)
    insert into test(timstamp,val) Values('1/1/2013 00:00:30',2)
    insert into test(timstamp,val) Values('1/1/2013 00:00:35',1)

    select t1.timstamp,t1.val,DATEDIFF(s,t1.timstamp,t2.timstamp) 
    from test t1 left join test t2 on t1.id=t2.id-1

    drop table test 
```

我还将时间戳设为自 1980 年或 2000 年以来的秒数。但是您可能不想一直进行反向转换，因此这取决于您使用实际时间戳的频率。

# c++ - 为什么当我不使用两个指针调用时，swap() 可以很好地工作？

> ID：14509399
> 
> 赞同：6
> 
> 时间：2013-01-24T19:41:27.330
> 
> 标签：c++, namespaces, swap, using-directives, argument-dependent-lookup

```
#include <iostream>

using namespace std;

void swap(int *a, int *b) {
    *a = *a^*b;
    *b = *a^*b;
    *a = *a^*b;
}

int main()
{
    int array[]={1,9,2,8,3,7};
    for(int i=0; i<6; i++)
        cout<<array[i];
    cout<<endl;
    swap(array[1], array[4]);
    for(int i=0; i<6;i++)
        cout<<array[i];
    cout<<endl;
    return 0;
} 
```

上面是一个测试样本。我发现如果我使用`swap(array[1], array[4]);`，它还会交换数组中两个位置的值。但这让我很困惑，因为该函数`swap()`需要两个指针，而不是两个整数值。

谢谢你的帮助：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T19:43:49.387

```
using namespace std; 
```

这是你的罪魁祸首。当您导入`std::`命名空间时，您会获得在该命名空间中声明的每个标识符，可能包括`std::swap`.

`std::swap<int>(int&,int&)`因此，您正在（从标准库）而不是`::swap(int*,int*)`（从您的程序）调用。

故事的寓意：永远不要说`using namespace std;`。它太大了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T19:43:26.553

它不使用**你的** `swap`，但是`std::swap`。

尝试调用它`::swap(array[1], array[4]);`，你会得到一个错误。

这就是为什么`using namespace std;`不好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-24T19:44:44.223

这就是为什么你应该避免`using namespace std;`。

包含一个标准标题显然将声明`std::swap`拖入您的程序；并将`using namespace std;`其转储到全局命名空间中。所以你的代码在调用它，而不是你的版本。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-27T08:44:48.120

> 你会提供另一个答案来解决这个没有临时变量的问题吗？

我不认为它可以做到。无论如何，“无临时变量”的要求从何而来？你认为临时变量会让你的代码变慢吗？让我们检查一下这里是否是这种情况。

展览 A：一些 hack。不是很明显它是如何工作的。无法正确地与自身交换变量：

```
void swap1(int* a, int* b)
{
    *a = *a ^ *b;
    *b = *a ^ *b;
    *a = *a ^ *b;
} 
```

生成的汇编代码：

```
movl    (%rsi), %eax
xorl    (%rdi), %eax
movl    %eax, (%rdi)
xorl    (%rsi), %eax
movl    %eax, (%rsi)
xorl    %eax, (%rdi) 
```

图表 B：带有临时变量的直截了当的代码。它可以正确地与自身交换变量：

```
void swap2(int* a, int* b)
{
    int c = *a;
    *a = *b;
    *b = c;
} 
```

生成的汇编代码：

```
movl    (%rdi), %eax
movl    (%rsi), %edx
movl    %edx, (%rdi)
movl    %eax, (%rsi) 
```

临时变量解决方案更容易理解，可以处理所有情况*并*产生更快的代码。

同样，在面试情况之外，异或技巧完全没用。如果我是面试官，而候选人知道 xor 技巧，但没有*通过*说“这是一个可爱的技巧，但我永远不会在现实世界中使用它”来限定它，我肯定不会雇用他。让我用一句话来结束这个答案：

> 清晰总是胜过聪明。[*拉里·奥斯特曼*](http://channel9.msdn.com/Shows/Checking-In-with-Erik-Meijer/Checking-In-Larry-Osterman-26-Years-of-Programming-at-Microsoft)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-25T03:56:22.383

你的问题与`using namespace std;`. 问题是您将对 int ( ) 的左值引用传递给在and`int&`上重载的函数。如果你删除了 using 指令，你就不会调用你自己的交换；事实上，您的代码不会编译，因为 C++ 不允许从指针到 int 的隐式转换。为了使用您的功能，您必须将其称为`int&``int*``swap(&array[1], &array[4]);`

现在，如果您更正了函数调用以反映这一点，那么无论使用指令是否存在，它都应该可以工作。但是，我建议不要这样做；的语义`std::swap`是交换两个*引用*，而不是指针。重载具有不兼容语义的标准函数不仅会使熟悉标准库的人感到困惑，而且很可能会破坏使用`std::swap`on 的完全有效的代码`int*`。

您可能会想，“但只有在他们这样做时才会发生这种情况`using namespace std;`，他们绝不应该这样做。” 然而，信不信由你，`swap`这正是*您**想要*使用指令的那种应用程序（当然，适当的范围）。这样做的原因是用户代码可能会做你想做的事：专门化算法。如果某些库代码简单地说，任何用户定义的重载都将被忽略，从而使该重载无用。相反，如果您的代码看起来像*`swap``std::swap`*

 *```
template <typename T>
void foo (T& a, T& b)
{
    using std::swap; // Or simply namespace std;
    // ...
    swap (a, b);
    // ...
} 
```

编译器将能够正确使用 ADL 并为任何给定的 T（例如`int`）选择用户定义的交换，同时仍然能够`std::swap`用于其他 T。

换句话说：*始终*提供`swap`引用参数，并在需要交换模板类型时使用作用域 using 声明。*

# iphone - 在uitextview中显示带有延迟的nsmutablearray字符串

> ID：14509400
> 
> 赞同：0
> 
> 时间：2013-01-24T19:41:34.707
> 
> 标签：iphone, ios6, nsmutablearray

我想通过添加一些延迟来用这个 NSMutable 数组更新这个 UITextView 的内容。

```
- (void)viewDidLoad{
 [super viewDidLoad];
myArray = [[NSMutableArray alloc]initWithObjects:@"String1",@"String2",@"String3",@"String4", @"String5",..... nil];                                                                                                                                        

int index = arc4random() % [myArray count];

myTextView.text = [myArray objectAtIndex:index]; 
```

我想在 UITextView 中一个接一个地显示这个 NSMutable 数组。

有什么方法可以在 UITextView 中显示数组，但会有一些延迟。

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:53:47.300

# 为什么你应该使用计时器

这样做的*正确方法*是使用重复计时器。计时器被配置为每秒重复并调用某个方法。

```
[NSTimer scheduledTimerWithTimeInterval:1.0
                                 target:self
                               selector:@selector(updateText:)
                               userInfo:nil
                                repeats:YES]; 
```

在您的（新）`updateText`方法中，您将生成随机数并更新文本。

```
- (void)updateText:(NSTimer *)theTimer {
    int index = arc4random() % [myArray count];
    myTextView.text = [myArray objectAtIndex:index];
} 
```

这是一个几乎是自我记录的干净解决方案。

* * *

# 为什么你*不应该*在延迟后循环和执行。

确实*可以*`performSelector:withObject:afterDelay:`使用or来执行此操作，`dispatch_after()`但它很容易出错，并且实际的工作解决方案更复杂且更难理解。

如果你认为你可以循环一定次数并在内部调用其中任何一个，那么你会看到一些有趣的东西。这两种方法都是异步的，不会等待调用被调用。他们只是安排它从“现在”开始的指定时间发生。

## 循环和调用异步方法的作用

```
Loop 
 0    |----- 1s wait -----| |update|
 1     |----- 1s wait -----| |update|
 2      |----- 1s wait -----| |update|
 3       |----- 1s wait -----| |update|
    ...
 ----------- time ---------------------> 
```

可以想象，这样做的结果是一秒钟内什么都不会发生。然后所有预定的呼叫将同时发生。

这实际上等于在一秒钟后执行整个循环。

```
 |----- 1s wait -----| Loop:
                         0  |update|
                         1   |update|
                         2    |update|
                         3     |update|
                            ...
 ----------- time ---------------------> 
```

如果您改为在每次更新后安排下一次通话，您就可以完成这项工作

```
 |----- 1s wait -----| |update| |----- 1s wait -----| |update| ...
 ----------- time ---------------------> 
```

为此，您必须在上一次更新中安排下一次更新。

```
- (void)updateText {
    int index = arc4random() % [myArray count];
    myTextView.text = [myArray objectAtIndex:index];
    [self performSelector:@selector(updateText) 
               withObject:nil
               afterDelay:1.0];
} 
```

这将做与重复计时器完全相同的事情，但有两个主要缺点。

**1）它不太直观。**

在计时器示例中，您只需阅读计时器代码即可了解文本每秒更新一次。在这种情况下，您只需调用`updateText`. 通过阅读该代码而不查看 updateText 的实现是不直观的，这是一个重复的过程。

**2）如果你想让它停止，它会变得更加复杂。**

您可以保留一个指向 an 的指针，`NSTimer`并通过简单地调用来使其停止`[myTimer invalidate];`。使用`performSelector:...`或`dispatch_after()`尚不支持它的代码，如果它是为了支持它而构建的，它将更加复杂和不直观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:43:38.267

几种方法，根据我的喜好排列答案：

1..您可以使用：

```
+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)seconds target:(id)target selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)repeats 
```

* * *

2.. [Grand Central Dispatch](http://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)也将为您服务。

# vmware - 使用 VMWare 时如何使用 Puppet 获取虚拟机的快照

> ID：14509403
> 
> 赞同：0
> 
> 时间：2013-01-24T19:41:39.357
> 
> 标签：vmware, puppet

我找到的答案引导我使用[perl api 进行 VMware 编排。](http://www.vmware.com/support/developer/viperltoolkit/index.html)

或[虚拟贫民区](http://www.virtuallyghetto.com/p/vmware-vsphere-sdk-for-perl-vi-perl.html)

但找不到 puppet 示例，用户可以在其中获得创建 VM SnapShot 的权限，也可以还原它，而无需 root 访问权限或管理员权限。

我还发现了 vmth，但[VMTH](https://github.com/gregretkowski/vmth/)目前只能在 QEMU+KVM 环境中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:52:40.957

您需要创建一个 Exec 资源并将其映射到允许您创建 VM 快照的 VMWare Api。

注意：创建快照不再可用，因为您可以每次都创建新的虚拟机。

# nhibernate - 在 Azure 上设置 NHibernate 速度缓存

> ID：14509412
> 
> 赞同：2
> 
> 时间：2013-01-24T19:42:16.617
> 
> 标签：nhibernate, azure, appfabric

我正在尝试使用 Windows Azure 缓存为 NHibernate 3.2 设置二级缓存。到目前为止，使用[https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)，我已经在我的 web.config 中设置了 Azure 缓存：

```
<section name="dataCacheClients" type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere" />
...
<dataCacheClients>
 <dataCacheClient name="default">
  <autoDiscover isEnabled="true" identifier="App.UI" />
</dataCacheClient> 
```

然后我从[http://sourceforge.net/projects/nhcontrib/files/NHibernate.Caches/3.2.0.GA_for_NH3.2.0GA/下载并添加了 Velocity 缓存提供程序 DLL](http://sourceforge.net/projects/nhcontrib/files/NHibernate.Caches/3.2.0.GA_for_NH3.2.0GA/)

最后，我的 hibernate.cfg.xml 是：

```
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
<session-factory>
    ...
    <property name="cache.use_second_level_cache">true</property>
    <property name="cache.use_query_cache" >true</property>
    <property name="cache.provider_class">NHibernate.Caches.Velocity.VelocityProvider, NHibernate.Caches.Velocity</property>
</session-factory>
</hibernate-configuration> 
```

**UPDATE** 解决了依赖问题，我现在得到一个错误 {"ErrorCode:\"dcacheClient\" tag not specified in the application configuration file. Specify valid tag in configuration file."}

谢谢

# c++ - 动态内存分配：当最右边的维度是可变的时，二维数组的替代方案是什么？

> ID：14509413
> 
> 赞同：2
> 
> 时间：2013-01-24T19:42:17.733
> 
> 标签：c++, arrays, winapi, visual-c++, multidimensional-array

我正在尝试开发一个类来备份和恢复控制台屏幕缓冲区。这是我正在进行的代码。

```
class CBuff
{
private:
    CONST WCHAR max_unit;
    HANDLE hnd;
    CHAR_INFO *stor_buff;
    COORD s_buff_sz;
    COORD d_buff_cod;
    SMALL_RECT read_region;

public:
    CBuff():max_unit(10)
    {}
    ~CBuff(){}

void Initiate(HANDLE hndl, SHORT buff_x, SHORT buff_y, SHORT buff_width, SHORT buff_height)
{
    hnd=hndl;
    stor_buff=new CHAR_INFO[buff_width*buff_height]();
    s_buff_sz.X=buff_width;
    s_buff_sz.Y=buff_height;
    d_buff_cod.X=0;
    d_buff_cod.Y=0;
    read_region.Left=0;
    read_region.Top=0;
    read_region.Right=buff_width-1;
    read_region.Bottom=buff_height-1;
}

int Backup()
{
    if(!ReadConsoleOutput(hnd,stor_buff,s_buff_sz,d_buff_cod,&read_region)) return -1;
    return 0;
}

int Restore()
{
    if(!WriteConsoleOutput(hnd,stor_buff,s_buff_sz,d_buff_cod,&read_region)) return -1;
    return 0;
}

int Backup_mp()
{/*incomplete*/}

int Restore_mp()
{/*incomplete*/}

}; 
```

它适用于 Backup() & Restore() 很好。然后我尝试制作另一个版本的 Backup，`Backup_mp(handle, backup_num)`它将从不同的控制台缓冲区实例创建多个备份。我计划将私有空间中的最后四个变量转换为数组，以便索引值（backup_num）可以用于不同的备份点。像这样的分配

```
stor_buff=new CHAR_INFO[index][buff_width*buff_height](); 
```

不管用。

我有什么选择？

另外，我可以`CONST WCHAR max_unit`用作数组的参数`s_buff_sz[max_unit]` 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:55:04.770

您正在使用 C++，因此请使用它：使用 std::vector。

```
//Declaration of your buffers:
std::vector< std::vector<CHAR_INFO> > store_buffers;

//Append a new buffer entry:
store_buffers.push_back( std::vector<CHAR_INFO>( buff_width * buff_height ) );

// Pass buffer with index index to WinAPI functions:
..., store_buffers[index].data(), s_buff_sz, ... 
```

如果使用 C++11，您可以将 std::array 用于固定大小的维度（而不是 std::vector，它是可变的），但这并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:55:00.060

要在堆中分配二维数组（使用`new`），您需要先分配指针，然后再分配数组。例子：

```
stor_buff = new CHAR_INFO* [buff_height]; // Allocate rows (pointers
for(int index = 0; index < buff_height; ++index)
   stor_buff[index] = new CHAR_INFO[buff_width]; 
```

并且直接使用它们，就好像`store_buff`是二维数组一样。对于解除分配，您需要先删除数组（即单独的行），然后再删除行指针。

```
 for(int index = 0; index < buff_height; ++index)
        delete []stor_buff[index];   // NOTICE the syntax

    delete []stor_buff; 
```

或者，您可能有一个一维数组，将其用作二维数组。为此，您需要进行`(row,col)`计算以获取所需的元素。

您也可以使用`vector`(或`vector`of `vector`) 来获得相同的结果。但我建议你玩原生指针，除非你习惯了指针！

# iis-6 - 当 Apppool 标识是 IIS 6.0 上的网络服务时的性能问题

> ID：14509414
> 
> 赞同：0
> 
> 时间：2013-01-24T19:42:30.233
> 
> 标签：iis-6

当网站在 IIS 6.0 上配置为“网络服务”的 appPool 身份下运行时，我遇到了一个非常缓慢的性能问题。

当我将 apppool 身份更改为网络帐户时，性能非常好。

你能建议任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:55:15.913

我很好奇它会很慢——这真的不是一个答案。但是来自 SysInternals 的优秀且免费的[Process Monitor 工具](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)可能会帮助您理清正在发生的事情。

下载它，并分配 20 分钟的时间来玩它——也许在这段时间内你就能找到问题的根源。在此过程中，您的工具箱中将拥有一个新工具，您可以用它来让您的朋友惊叹和打动。

# sql-server-2008-r2 - SSRS 2008 动态参数

> ID：14509422
> 
> 赞同：0
> 
> 时间：2013-01-24T19:43:15.687
> 
> 标签：sql-server-2008-r2, ssrs-2008

![最终报告的视图](../Images/78b745f34acba05a82e76fcf0f7e2413.png). 我们目前正在使用 MS SQL server 2008 R2 和 SSRS 2008。我正在创建一个包含多个参数的报表，供用户将数据插入表中。

1.  用 SP 填充的 Staff_Name。
2.  根据 SP 中的 Staff_Name 选择填充的 Client_Name。
3.  用户将选择“新服务”选项或用户已预先插入的服务。
4.  用户将输入要插入表中的数据的文本框和日期字段。

我希望报告做的是当用户选择“新服务”时，文本框和数据字段将为空白。如果用户选择他们已经创建的服务来更新字段（将新行插入表中并记录删除旧行。）

我已经为要根据第三个选择填充的文本框和日期字段创建了 SP：

```
IF @ClientServiceId <> 'New%' BEGIN
SELECT 
  cc.Date_Service_Referral, cc.Ordering_Provider, cc.Provider_Specialty, cc.Provider_Contact, cc.Desc_of_Order,
  cc.First_Scheduled_Date_Service, cc.Attendance_Confirmed, cc.Date_Record_New_Service_Receieved,
  cc.Date_Record_Ordering_Provider_Confirmed, cc.Date_Record_PCP_Confirmed  
FROM CCMT_Service_Referral_Tracking cc
WHERE cc.Client_Service_Id = @ClientServiceId 
AND cc.RecordDeleted = 'N'
END
IF @ClientServiceId = 'New%' BEGIN
SELECT 
  NULL AS Date_Service_Referral, NULL AS Ordering_Provider, NULL AS Provider_Specialty, NULL AS Provider_Contact, 
  NULL AS Desc_of_Order, NULL AS First_Scheduled_Date_Service, NULL AS Attendance_Confirmed, 
  NULL AS Date_Record_New_Service_Receieved, NULL AS Date_Record_Ordering_Provider_Confirmed, 
  NULL AS Date_Record_PCP_Confirmed 
END 
```

将用户定义参数的值设置为 SSRS 的默认值似乎会锁定参数，即使在第三个参数更改并将其用作可用值后，也会创建一个下拉列表，不允许用户输入数据。有没有办法对此进行编码，以便根据用户的第三选择填充参数或将它们留空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:45:17.700

我会这样做（稍微缩短你的例子）：

1.  使用选项“新建”或其他内容设置第一个变量。我选择了文本，然后对于“可用值”，我选择了“指定值”并输入“新”和“非新”，标签和值相同。我将变量的名称设置为“Parm”。

2.  使用上述代码设置数据集，但确保数据条件是上面设置的变量的名称。将此数据集称为“选择”

    ```
    If @Parm <> 'New'
    Select 'I am not new'
    else 
    select 'I am new' 
    ```

3.  现在设置第二个参数。选择“可用值”并指定“从查询中获取值”。选择上面创建的数据集“选择”并为两者选择给定的“ID”值。

您现在有一个 DEPENDENT 变量，其选择由您的第一个选择的逻辑决定。您可以根据需要更改数据集。

# python - 更改当前 python 脚本的命名空间（具有模块名称的类）

> ID：14509426
> 
> 赞同：0
> 
> 时间：2013-01-24T19:43:22.407
> 
> 标签：python, import, namespaces

我在以下目录结构中有一个 2.6 python 脚本和库：

```
+ bin
\- foo.py
+ lib
\+ foo
 \- bar.py 
```

我希望用户运行`bin/foo.py`以实例化`lib/foo.py`. 为此，在我的`bin/foo.py`脚本中，我有以下代码：

```
from __future__ import absolute_import
import foo
klass = foo.bar.Klass() 
```

但是，这会导致：

```
AttributeError: 'module' object has no attribute 'bar' 
```

即它认为这`foo`是它本身而不是库`foo`- 重命名`bin/foo.py`为`bin/foo-script.py`按预期工作。

有没有办法可以保留`bin/foo.py`脚本并导入`lib/foo.py`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:51:37.000

默认情况下，当前目录位于路径上，因此您需要在导入其他`foo`模块之前将其删除：

```
import sys
sys.path = [dir for dir in sys.path if dir != ''] 
```

或者，在目录前面添加`lib`优先级：

```
import sys
sys.path = ['../lib'] + sys.path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:57:06.087

If you just write import foo, it will definitely load the foo module in the current scope. Assuming lib and foo as packages, won't you need to write something like this in order to make it work?

```
import lib.foo.bar as foobar
klass = foobar.Klass() 
```

# installation - 需要帮助安装 WebSphere Application Server V8.5

> ID：14509432
> 
> 赞同：0
> 
> 时间：2013-01-24T19:43:36.830
> 
> 标签：installation, websphere

我已经从 IBM 站点下载了波纹管 rar 文件。但我不知道如何安装。请告诉我如何安装这个 WebSphere Application Server V8.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:10:02.957

在询问有关大多数 IBM 产品的问题时，信息中心是您最好的朋友。

[http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp)

您想要的安装指南应该在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T13:06:19.743

从 WebSphere 8.0 开始，默认安装过程应该使用 IBM Installation Manager 来完成。

IM 常见问题解答：[http](http://www-01.ibm.com/software/rational/installmgr/faq.html) ://www-01.ibm.com/software/rational/installmgr/faq.html 从以下位置下载最新的 IM：[http ://www-01.ibm.com/support/docview.wss?uid=swg24032358](http://www-01.ibm.com/support/docview.wss?uid=swg24032358)

之后，您所要做的就是启动 Installation Manager 并将存储库指向您的 WebSphere 下载目录。IM 将有一个分步向导来指导您完成安装过程。

# tinymce - Plone 富文本磁贴尝试为 TinyMCE 加载不正确的 js URL

> ID：14509433
> 
> 赞同：1
> 
> 时间：2013-01-24T19:43:36.873
> 
> 标签：tinymce, plone

*   克隆 4.2.1.1
*   plone.tiles 1.2
*   plone.app.tiles 1.0.1
*   plone.app.blocks 1.0
*   plone.app.drafts 1.0a2
*   产品.TinyMCE 1.2.15

我有一个 Plone 站点，页面上有两个富文本图块，创建于[使用图块提供更灵活的 Plone 布局](http://glicksoftware.com/blog/using-tiles-to-provide-more-flexible-plone-layouts)之后。

问题是在编辑图块时，TinyMCE 不会加载。

在 Net 选项卡上的 Firebug 中，我看到一大堆 404，如下所示：

```
http://example.com/en/front-page/@@edit-tile//plugins/pagebreak/editor_plugin.js 
```

相比之下，我知道正确的 URL 应该是这样的：

```
http://example.com/portal_javascripts/MyTheme/plugins/xhtmlxtras/editor_plugin.js 
```

当我将portal_javascripts 设置为开发模式时，它可以工作，但是当我关闭开发模式时，我就看到了这个问题。

所以显然这是由于某种javascript冲突，但我不知道在哪里寻找它。

我真的需要解决这个问题，所以任何帮助将不胜感激！

* * *

附加信息：

当portal_javascripts关闭开发模式时，此行中的条件永远不会为真：[https ://github.com/plone/Products.TinyMCE/blob/1.2.x/Products/TinyMCE/skins/tinymce/tiny_mce_src.js#L47](https://github.com/plone/Products.TinyMCE/blob/1.2.x/Products/TinyMCE/skins/tinymce/tiny_mce_src.js#L47)

那是因为 tiny_mce.js 文件与其他文件合并，并且名称是随机的，因此按名称查找总是会失败。因此，不会在 中设置对象的`baseURL`属性。相反，最终设置在这里： [https ://github.com/plone/Products.TinyMCE/blob/1.2.x/Products/TinyMCE/skins/tinymce/tiny_mce_src.js#L8397](https://github.com/plone/Products.TinyMCE/blob/1.2.x/Products/TinyMCE/skins/tinymce/tiny_mce_src.js#L8397)`tinymce``init``baseURL`

这是`http://example.com/my-page/@@edit-tile/`使用URL 的地方`baseURL`。

我通过关闭portal_javascripts 中的合并和缓存验证了这一点，但关闭了开发模式。然后它起作用了，因为它`tiny_mce.js`按名称查找。

此外，我发现当它失败时，所有 TinyMCE 的插件都作为显式`<script>`元素添加到 iframe 的头部（带有`@@edit-tile`无法加载的 URL）。相比之下，当它工作时，所有插件都在这里加载： [https ://github.com/plone/Products.TinyMCE/blob/1.2.x/Products/TinyMCE/skins/tinymce/tiny_mce_src.js#L8458](https://github.com/plone/Products.TinyMCE/blob/1.2.x/Products/TinyMCE/skins/tinymce/tiny_mce_src.js#L8458)

IOW，它们没有作为`<script>`元素显式添加到 iframe 中。

（如果我不清楚，当我提到 iframe 时，我说的是磁贴的编辑叠加层，而不是 TinyMCE 的。iframe 中有一个 iframe ......）

# c# - Process.StandardInput.WriteLine 不适用于 Java.exe

> ID：14509439
> 
> 赞同：0
> 
> 时间：2013-01-24T19:43:45.483
> 
> 标签：c#, java, system.diagnostics

我对以下代码有疑问：

```
private void Form1_Load(object sender, EventArgs e)
{
    cmdOutput = new StringBuilder("");
    cmdProcess = new Process();

    cmdProcess.StartInfo.WorkingDirectory = @"C:\android-sdk\tools";
    cmdProcess.StartInfo.FileName = @"java";
    cmdProcess.StartInfo.Arguments = @"-Xmx512m -Djava.ext.dirs=lib\;lib\x86_64 -Dcom.android.monkeyrunner.bindir=..\framework -jar lib\monkeyrunner.jar";

    cmdProcess.StartInfo.UseShellExecute = false;
    cmdProcess.StartInfo.CreateNoWindow = true;
    cmdProcess.StartInfo.RedirectStandardOutput = true;
    cmdProcess.OutputDataReceived += new DataReceivedEventHandler(SortOutputHandler);
    cmdProcess.StartInfo.RedirectStandardInput = true;

    cmdProcess.Start();

    cmdStreamWriter = cmdProcess.StandardInput;
    cmdProcess.BeginOutputReadLine();

    // Even if i fire this later it doesn't work. 
    cmdStreamWriter.WriteLine(@"print 'Hello World'");
} 
```

问题是：

```
cmdStreamWriter.WriteLine(@"print 'Hello World'"); 
```

是什么都不做。没有任何东西被写入 java 进程。

输出似乎工作正常（通过将脚本直接加载到monkeyrunner.jar进行测试。但尝试多次后我没有得到任何输入。

**如果我将进程更改为“cmd”，这确实可以正常工作**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:21:48.183

我设法解决了这个问题：

从另一个问题中，我发现正在使用 Jline（基于 Java 的命令行扩展）。经过一番谷歌搜索后，我发现使用以下命令启动 Java 应用程序：

```
 cmdProcess.StartInfo.Arguments = @"-Xmx512m -Djava.ext.dirs=lib\;lib\x86_64 -Dcom.android.monkeyrunner.bindir=..\framework 
-Djline.terminal=jline.UnsupportedTerminal -jar lib\monkeyrunner.jar";
```

修正为：

```
-Djline.terminal=jline.UnsupportedTerminal 
```

这停止了​​ Jline 的加载，并允许标准输入再次正常工作。

关于 -Djline.terminal 参数的更多信息可以在这里找到：

[http://jline.sourceforge.net/](http://jline.sourceforge.net/) - 安装。

# android - Android 音频流和麦克风

> ID：14509441
> 
> 赞同：0
> 
> 时间：2013-01-24T19:43:48.393
> 
> 标签：android, stream, call, microphone

我对 Android 开发相当陌生，但从我读到的内容来看，我很确定没有直接 API 访问通话中的音频流。我需要做一些非常接近答录机的东西，所以我想知道是否有任何 API 支持在内部将音频流传递给 microhpone，并将其用作无法访问呼叫流的解决方法。IE 有人打电话，我们得到答案，将麦克风静音，以便他听不到环境，并在麦克风静音时将替代音频流（某种录音）传递给麦克风......这是我能想到的唯一解决方法，并且我不知道这样的事情是否可行，但我会很感激任何反馈。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:45:56.543

不，Android 不支持将音频注入语音呼叫上行链路。
有一些移动平台支持此功能，但对于应用程序开发人员来说，它不是可用的，因为没有相应的 API，无论您使用的是 Java API 还是本机 API。

# java - 填充复杂的 Map 并访问其值

> ID：14509445
> 
> 赞同：0
> 
> 时间：2013-01-24T19:43:57.317
> 
> 标签：java, map, comparator

问题1：我想将以下“Class Dog”的“特定”排序值添加到“Ser”类中使用的“Map”中。但我不知道如何实现这一点，

问题 2：如果成功填充，如何访问地图的填充值

以下是我绝望的尝试。

```
 class Dog implements Comparator<Dog>, Comparable<Dog>{

   private double Price;
 private String Operator;
  Dog(){
   }

  Dog( double p, String o){

   Price= p;
   Operator=o;
  }

  public double getPrice(){
  return Price;
  }
    public String getOperator(){
      return Operator;
   }

  // Overriding the compareTo method
  public int compareTo(Dog d){

   double data= Price - d.Price; 
   if ( data > 0.00001)return 1;
   if (data < 0.00001) return -1;
   return 0;
 }

   // Overriding the compare method to sort the age 
  public int compare(Dog d, Dog d1){

  double data= d.Price - d1.Price; 

   if ( data > 0.00001)return 1;
   if (data < 0.00001) return -1;
   return 0;

      }

}

 public class Ser {                          
   /**                                     
    * @param args
   */
   public static void main(String[] args) {
// Takes a list o Dog objects
ArrayList <Dog> list1 = new ArrayList<Dog>();

Map <Integer, ArrayList<Dog> > map= new HashMap <Integer, ArrayList<Dog> > ();

  list1.add(new Dog(0.99 , "A"));
  list1.add(new Dog(0.91 , "C"));
  list1.add(new Dog(0.92 , "A"));
  list1.add(new Dog(0.97 , "B"));
  list1.add(new Dog( 0.93 , "C"));
  list1.add(new Dog(0.97 , "B"));
  list1.add(new Dog(0.92, "A"));
  list1.add(new Dog(0.97, "C"));
  list1.add(new Dog(0.92, "A"));
  // Sorts the array list using comparator

  Collections.sort(list1, new Dog());

  for(Dog a: list1)//printing the sorted list of ages
      System.out.println( a.getOperator()+"  : "+ a.getPrice());

  map.put(92,  list1);
  map.put(445, list1);
  map.put(966, list1);

 // Collections.sort(list1, new Dog());

 for (ArrayList<Dog> key: map.values() )     
         System.out.println(key);
         }

   } 
```

输出：C：0.91，A：0.92，A：0.92，A：0.92，C：0.93，C：0.97，B：0.97，B：0.97，A：0.99

地图值的输出：[Dog@a981ca, Dog@8814e9, Dog@1503a3, Dog@1a1c887, Dog@743399, Dog@e7b241, Dog@167d940, Dog@e83912, Dog@1fae3c6] [Dog@a981ca, Dog@8814e9 , Dog@1503a3, Dog@1a1c887, Dog@743399, Dog@e7b241, Dog@167d940, Dog@e83912, Dog@1fae3c6] [Dog@a981ca, Dog@8814e9, Dog@1503a3, Dog@1a1c887, Dog@743399,狗@e7b241、狗@167d940、狗@e83912、狗@1fae3c6]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:48:18.337

您正在看到 的`Object.toString`表示`Dog`，您需要覆盖该方法：

```
@Override
public String toString() {
    return "Dog [Price=" + Price + ", Operator=" + Operator + "]";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:57:01.020

**问题1：**

您创建了一个`Map`对象，该对象创建一个整数键并将其映射到Dogs*列表。*如果您希望将整数映射到 Dogs，您需要从以下开始：

```
Map <Integer, Dog> map= new HashMap <Integer, Dog> (); 
```

现在，假设您的排序正在工作（我还没有调查过，我会让您调试以证明它是否有效）您需要使用集合的`.get(int)`方法*从*您希望放置的列表`List`中获取狗进入地图。

 *您现在正在做的是将不同的整数映射到同一个列表 3 次。

```
map.put(92, list1.get(0)); 
```

0 指的是`list1`List 中的第一个 Dog 对象，选择你需要的任何东西来代替 0。

现在，对于需要打印它们的**问题 2**，您必须`toString()`像 Reimeus 所说的那样滚动一个函数，或者手动执行它。

```
for (Dog d : map.values()) {
  System.out.println("Dog " + d.getPrice() + " " + d.getOperator());
} 
```

同样，您之前所做的是获取`List`已映射到映射中整数的对象。如果要保持这种格式，则必须遍历列表中的每个值：

```
for (List<Dog> ld : map.values()) {
  for (Dog d : ld) {
    System.out.println(...);
  }
} 
```

我希望这对你有所帮助。*

# ruby-on-rails - 在 Rails 3 中使用 Bootstrap 为 simple_form_for 设置样式文件上传按钮

> ID：14509449
> 
> 赞同：15
> 
> 时间：2013-01-24T19:44:09.953
> 
> 标签：ruby-on-rails, file-upload, twitter-bootstrap, simple-form

使用 simple_form_for、Bootstrap 和 Rails 3\. 在表单中：

`<%= f.input :upload, label: 'PDF file:' , input_html: {accept: ('application/pdf') } %>`

我不知道如何设置它的样式，以便“选择文件”按钮可以有不同的类（'btn btn-primary'）。

此外，至少在与 Bootstrap 一起使用时，默认情况下它会严重错位。见附图。

最后，当还没有添加文件时，如何将文本从“未选择文件”重新定义为“选择文件”，并在有文件时显示文件名。

![在此处输入图像描述](../Images/0c8bbbf314dbf50db889813b9ff308b0.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-11T15:25:28.710

我就是这样做的：

1.  在视图中添加您的表单文件字段并将其隐藏
2.  添加一个样式化的附加字段只是为了显示文件名
3.  添加一个按钮来触发文件浏览对话框

    ```
    <div class="control-group">
      <div class="attach-set">
        <%= f.input :real_file, input_html: { hidden: true }, label: 'Upload Attachment' %>
        <div class="input-append">
          <input id="file-display" class="input-large uneditable-input" type="text">
          <a id="upload-btn" class="btn"><i class="icon-upload-alt"></i> Browse</a>
        </div>
      </div> <!-- /attach-set -->
    </div> <!-- /control-group --> 
    ```

4.  在您的 JS（显示带有 jQ​​uery 的咖啡）中，将点击从显示按钮传递到实际文件输入，当他们选择文件时，将文件名放在显示文本字段中（我放下路径，所以我看不到C:\FakePath....)

    ```
    $(document).ready ->

      # ------------------------------------------------------
      # pretty-fy the upload field
      # ------------------------------------------------------
      $realInputField = $('#real_file')

      # drop just the filename in the display field
      $realInputField.change ->
        $('#file-display').val $(@).val().replace(/^.*[\\\/]/, '')

      # trigger the real input field click to bring up the file selection dialog
      $('#upload-btn').click ->
        $realInputField.click() 
    ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-07-11T08:34:33.257

这对我很有用，只需要 HTML

```
<label class="btn btn-primary">
  Add a file!
  <span style="display:none;">
    <%= f.file_field :image, required: true, multiple: true, name: 'picture' %>
  </span>
</label> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-29T20:50:52.183

我遇到并正在使用[Jasny 对 Bootstrap 3 的扩展](http://jasny.github.io/bootstrap/javascript/#fileinput)。到目前为止，它似乎运作良好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-04T13:51:54.460

## 不需要 JS，只需简单的 css

scss

```
.fileinput-button {
  position: relative;
  overflow: hidden;
  float: left;
  margin-right: 4px;
  width: 110px;
  height: 32px;
  input{
    opacity: 0;
    filter: alpha(opacity=0);
    transform: translate(-300px, 0) scale(4);
    direction: ltr;
    cursor: pointer;
  } 
} 
```

* * *

html / 苗条

```
span class="btn btn-success fileinput-button"
  i.fa.fa-pencil
  span
   |  Select File
  = f.file_field :cover_ar 
```

* * *

我建议使用指南针来实现跨浏览器兼容性

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-24T19:50:04.557

正如@rafaelfranca 所说，您无法设置`file`输入样式，但您可以添加自己的按钮，该按钮将单击隐藏的原始按钮。请参阅此处的示例[http://jsfiddle.net/rUdf2/6/](http://jsfiddle.net/rUdf2/6/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-24T19:57:57.780

每个浏览器都有不同类型的文件输入字段按钮，这很痛苦。你可以玩一点css。这给了我一个基本的 JS 样式，没有 chrome 和 Safary 中烦人的“没有选择文件”文本：

```
$(document).ready(function() {
  $(".your_button").css("width", "80px");
}); 
```

否则最好的解决方案是隐藏它并显示一个拦截点击的假的：

[http://duckranger.com/2012/06/pretty-file-input-field-in-bootstrap/](http://duckranger.com/2012/06/pretty-file-input-field-in-bootstrap/)

关于如何显示文件已上传的问题，jquery文件上传的基本解决方案是检测上传完成事件并将您的一些文本替换为成功消息（确切的文件名我相信它不是可以通过现代浏览器获得）：

```
$(".your_button").fileupload({
    dataType: "json",
    done: function(e, data) {
        $(".place_for_your_text").text("File uploaded.");
    }
}); 
```

总之，一个基本的解决方案是在您的资产中使用 javascript 来：

1.  用 css 隐藏烦人的“没有选择文件的文本”。
2.  将“选择文件”文本放在按钮旁边，并给它一个可以参考的类。
3.  将文本替换为“文件已上传”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T16:52:08.680

不需要花哨的shiz：

HTML：

```
<form method="post" action="/api/admin/image" enctype="multipart/form-data">
    <input type="hidden" name="url" value="<%= boxes[i].url %>" />
    <input class="image-file-chosen" type="text" />
    <br />
    <input class="btn image-file-button" value="Choose Image" />
    <input class="image-file hide" type="file" name="image"/> <!-- Hidden -->
    <br />
    <br />
    <input class="btn" type="submit" name="image" value="Upload" />
    <br />
</form> 
```

JS：

```
$('.image-file-button').each(function() {
      $(this).off('click').on('click', function() {
           $(this).siblings('.image-file').trigger('click');
      });
});
$('.image-file').each(function() {
      $(this).change(function () {
           $(this).siblings('.image-file-chosen').val(this.files[0].name);
      });
}); 
```

注意：有问题的三个表单元素必须是彼此的兄弟（.image-file-chosen、.image-file-button、.image-file）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-09T22:07:39.767

如果您使用的是 Bootstrap、Simple Forms、Jasny 和 ReFile，您可能会对这篇文章感兴趣[refile simple_form undefined method attachment_field](https://stackoverflow.com/questions/35285939/refile-simple-form-undefined-method-attachment-field/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-15T08:26:19.657

```
<label class="btn btn-primary"
<%= f.input :upload, label: 'PDF file:',
class:"hidden", input_html: {accept: ('application/pdf') } %>
</label> 
```

为我工作

使用类=“隐藏”

PS：我正在使用 Tailwind CSS

# ios - 将 ASMX Web 服务以 XML 形式返回的数据加载到 iPhone/iPad 会导致应用程序崩溃

> ID：14509455
> 
> 赞同：0
> 
> 时间：2013-01-24T19:44:27.500
> 
> 标签：ios, xml-parsing, crash, record, has-many

因此，在我的应用程序中，我从 XML Web 服务中检索数据。它非常巨大。多达 30-40000 条记录。在模拟器上它工作正常。但是在设备上它正在崩溃。我使用 NSXMLParser。开始元素，结束元素。所以它在某个时候崩溃了。但是，我在后台线程中执行此操作，以免破坏我的主线程。如果它超过 10 秒，也可以阻止 iOS 停止踢出我的应用程序。所以任何想法如何纠正它。我一直在这个时间，但没有解决方案。任何帮助，将不胜感激。谢谢。

```
0   CoreFoundation                  0x3baa839c __CFBasicHashAddValue + 1452
1   CoreFoundation                  0x3b9d2194 CFBasicHashAddValue + 3048
2   CoreFoundation                  0x3b9d5ebc CFSetAddValue + 112
3   CoreData                        0x3709b5b0 -[NSManagedObjectContext(_NSInternalAdditions) _insertObjectWithGlobalID:globalID:] + 172
4   CoreData                        0x370939bc -[NSManagedObjectContext insertObject:] + 136
5   CoreData                        0x370836d2 -[NSManagedObject initWithEntity:insertIntoManagedObjectContext:] + 646
6   CoreData                        0x3706fd74 +[NSEntityDescription insertNewObjectForEntityForName:inManagedObjectContext:] + 176
7   XYZ Orders                      0x00146c68 -[ITMParser parser:didEndElement:namespaceURI:qualifiedName:] (ITMParser.m:393)
8   Foundation                      0x36898a82 _endElementNs + 298
9   libxml2.2.dylib                 0x3ad8de5a xmlParseEndTag2 + 614
10  libxml2.2.dylib                 0x3ad8f546 xmlParseTryOrFinish + 1658
11  libxml2.2.dylib                 0x3ad8ece8 xmlParseChunk + 208
12  Foundation                      0x3689755e -[NSXMLParser parse] + 482
13  XYZ Orders                      0x0017a4c4 -[ITMLoginVC getAllCustomerValues] (ITMLoginVC.m:822)
14  XYZ Orders                      0x00176a6c __25-[ITMLoginVC viewDidLoad]_block_invoke_0 (ITMLoginVC.m:218)
15  libdispatch.dylib               0x39d8011c _dispatch_call_block_and_release + 8
16  libdispatch.dylib               0x39d8495c _dispatch_root_queue_drain + 248
17  libdispatch.dylib               0x39d84abc _dispatch_worker_thread2 + 80
18  libsystem_c.dylib               0x36ae9a0e _pthread_wqthread + 358
19  libsystem_c.dylib               0x36ae98a0 start_wqthread + 4

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
if([elementName isEqualToString:@"NAllAddresses"])
{
    NSString *temp=@"";
    self.managedObjectContext = appDelegate.managedObjectContext;
         //The below line happens to be the line number 393.
    ITMAllCustomerAddresses *allCustAddress =(ITMAllCustomerAddresses *)[NSEntityDescription
                                                        insertNewObjectForEntityForName:@"ITMAllCustomerAddresses"
                                                                      inManagedObjectContext:self.managedObjectContext];
    allCustAddress.allAddID = [self numberValue:[self.mutableDictionary objectForKey:@"AllAddID"]];
    allCustAddress.allCustID = [self numberValue:[self.mutableDictionary objectForKey:@"AllCustID"]];

    temp =[self.mutableDictionary objectForKey:@"AllAddressLine"];
    allCustAddress.allAddressLine = [self noSpaceString:temp];

    temp = [self.mutableDictionary objectForKey:@"AllAddressCity"];
    allCustAddress.allAddressCity = [self noSpaceString:temp];

    temp = [self.mutableDictionary objectForKey:@"AllAddressState"];
    allCustAddress.allAddressState = [self noSpaceString:temp];

    temp = [self.mutableDictionary objectForKey:@"AllAddressZip"];
    allCustAddress.allAddressZip = [self noSpaceString:temp];

    [self.allCustomerAddressesArray addObject:allCustAddress];
    [self.mutableDictionary removeAllObjects];
}
else
{
    if([elementName isEqualToString:@"AllAddID"]||[elementName isEqualToString:@"AllCustID"] ||[elementName isEqualToString:@"AllAddressLine"]||[elementName isEqualToString:@"AllAddressCity"]||[elementName isEqualToString:@"AllAddressState"]||[elementName isEqualToString:@"AllAddressZip"])
    {
        [self.mutableDictionary setObject:currentElementValue forKey:elementName];
        currentElementValue = nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:08:19.417

您是否调查过设备的崩溃日志？似乎它正在崩溃，因为设备内存不足。尝试解析较小的文件。另外，实现这个方法：

```
- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError 
```

捕获可能的解析错误。

**更新：**

从您的崩溃日志来看，您正在后台线程上使用核心数据。请记住 NSManagedObjectContext 和 NSManagedObject 不是线程安全的。但是 NSManagedObjectID 是。因此，如果您正在解析 XML 并从中创建 Core Data 对象，请确保创建 NSManagedObjectContext 的新实例，如下所示：

```
NSManagedObjectContext *ctx = [[NSManagedObjectContext alloc] init];
[ctx setUndoManager:nil];

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[ctx setPersistentStoreCoordinator: [appDelegate persistentStoreCoordinator]]; 
```

然后使用 ctx 创建新对象。

# javascript - 在热图 + 融合表中自定义半径和颜色

> ID：14509462
> 
> 赞同：0
> 
> 时间：2013-01-24T19:45:13.000
> 
> 标签：javascript, google-maps, google-fusion-tables, heatmap

我想用 Google Fusion Tables 和 Javascript 制作热图。[这是我迄今为止在 JSfiddle 中所做的](http://jsfiddle.net/jerryvermanen/P83D3/1/)。

```
 function initialize() {

    var style = [
    {
      featureType: 'all',
      elementType: 'all',
      stylers: [
        { saturation: -99 }
      ]
    },
    {
      featureType: 'road.highway',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'road.arterial',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'road.local',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'administrative.country',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'administrative.province',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'administrative.locality',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'administrative.neighborhood',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'administrative.land_parcel',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'poi',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'transit',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    }
  ];
  var styledMapType = new google.maps.StyledMapType(style, {
    map: map,
    name: 'Styled Map'
  });

    var map = new google.maps.Map(document.getElementById('map-canvas'), {
      center: new google.maps.LatLng(52.04843154112624, 5.33935546875),
      zoom: 7,
      mapTypeControl: false,
      streetViewControl: false,
      zoomControl: true,
      panControl: true,
      draggable: true,
      zoomControlOptions: {
        style: google.maps.ZoomControlStyle.SMALL
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

  map.mapTypes.set('map-style', styledMapType);
  map.setMapTypeId('map-style');
  layerl0 = new google.maps.FusionTablesLayer({
    query: {
      select: "'Latitude'",
      from: '1nQx1w96dl8YNE_LMnA4Npyrapeo6fErmRXRmB9w'
    },
    heatmap: {enabled: true},
    map: map
  });

  }

  google.maps.event.addDomListener(window, 'load', initialize); 
```

现在我想自定义热图的半径和颜色。[这是对 API 的一些解释](https://developers.google.com/maps/documentation/javascript/reference#HeatmapLayer)，但我无法弄清楚它应该如何在代码中实现。谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:02:23.923

您的链接指向文档的错误部分，指向可视化库的热图（在客户端呈现），但您使用 FusionTableHeatMap（在服务器端呈现），它只有 1 个选项（您可以选择显示或不显示）。

你可以做什么：从 FusionTable 请求热图的数据，然后创建一个可视化的热图。当然，这取决于数据量是否可行。

# c++ - 为什么下面的代码也会调用复制构造函数？

> ID：14509463
> 
> 赞同：3
> 
> 时间：2013-01-24T19:45:17.973
> 
> 标签：c++, copy-constructor, move-semantics, copy-elision, nrvo

为什么当`g_Fun()`执行到时`return temp`它会调用复制构造函数？

```
class CExample 
{
private:
 int a;

public:
 CExample(int b)
 { 
  a = b;
 }

 CExample(const CExample& C)
 {
  a = C.a;
  cout<<"copy"<<endl;
 }

     void Show ()
     {
         cout<<a<<endl;
     }
};

CExample g_Fun()
{
 CExample temp(0);
 return temp;
}

int main()
{
 g_Fun();
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T19:45:58.280

[**因为您按值返回，但请注意，由于RVO**](https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization)，不需要调用复制构造函数。

根据优化级别，可能会或可能不会调用 copy-ctor - 不要依赖任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:48:13.783

每当我们返回一个对象（而不是它的引用）时，可能会调用一个复制构造函数，因为需要创建它的副本，这是由默认的复制构造函数完成的。

```
CExample g_Fun()
{
 return CExample(0);    //to avoid the copy constructor call
 } 
```

# wpf - 将列表框的 SelectedItem 绑定到静态类的实例中的属性

> ID：14509464
> 
> 赞同：1
> 
> 时间：2013-01-24T19:45:18.943
> 
> 标签：wpf, binding, static-classes

我在模板文件中有一个简单的列表框，如下所示：

```
<local:ProcessVisualization x:Key="ProcessVisualization"/>

<ListBox Grid.Column="1" 
    Grid.Row="1" 
    ItemsSource="{Binding Source={StaticResource ResourceKey=ProcessVisualization}, Path=Instance.TestListItems}" 
    SelectedItem="{Binding Source={StaticResource ResourceKey=ProcessVisualization}, Path=Instance.SelectedTestListItem, Mode=TwoWay}">
</ListBox> 
```

然后在我的 ProcessVisualization 类中，我有以下内容：

```
private ObservableCollection<string> _testListItems;
private string _selectedTestListItem;
private static readonly ProcessVisualization _processVisualization = new ProcessVisualization();

public ObservableCollection<string> TestListItems
{
    get { return _testListItems; }
    set
    {
        _testListItems = value;
        NotifyPropertyChanged("TestListItems");
    }
}

public string SelectedTestListItem
{
    get { return _selectedTestListItem; }
    set
    {
        _selectedTestListItem = value;
        NotifyPropertyChanged("SelectedTestListItem");
    }
}

public static ProcessVisualization Instance
    {
        get { return _processVisualization; }
    } 
```

当我运行将字符串列表分配给 TestListItems 的方法时，它们会正确显示在我的列表框中，并且我可以毫无问题地从代码中设置 SelectedTestListItem。但是，如果用户尝试从列表框中进行选择，它似乎不会重新更新我在 ProcessVisualization 类上的属性。有谁知道我做错了什么？

# java - OSGi 类请求服务？（多个实例）

> ID：14509476
> 
> 赞同：0
> 
> 时间：2013-01-24T19:46:09.320
> 
> 标签：java, osgi, osgi-bundle

所以我想解释它的最好方法是用例子。

发布服务 X 时，需要注册它的一个实例。对于许多客户来说，同样的例子回答了它。

我想知道是否有办法按需实例化它的许多实例。就像客户端 c1 请求实例 x1 下的服务 X 一样，客户端 c2 与实例 x2 通信，处理后每个实例都被销毁。

因为它适用于 Web 服务器。每个客户端方法调用都是一个请求，在它响应之后，该请求被销毁。

我看到了一些关于多个参考的答案，但我不太确定它们是否都是我的同一个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:13:33.357

几年前，我尝试在 RFC Genuine Service Factories 中以通用的方式回答这个问题。经过深思熟虑，我得出结论，解决方案非常简单。只需注册工厂服务。因此，如果您希望能够创建 Foo，只需注册一个 FooFactory 服务......这允许您拥有参数、类型安全等所有优点。如果想要一个通用解决方案，只需创建一个工厂类型：

```
public interface Factory<T> { T create(); }

@Component
public class FooFactoryImpl implements Factory<Foo> {
  public Foo create() { ... }
} 
```

但是，我发现最好的方法就是创建一个 FooFactory ，因为这为您提供了类型安全性，因为泛型类型往往需要强制转换。它还为您提供了可扩展性、参数以及最重要的语义的正确文档。

All the other solutions I know tend to suffer from heavy casting and bypassing the type system. The factory components in Declarative Services are a point in case. I think the responsibility of the OSGi service registry is to give you a handle. As with all technologies it is very tempting to add additional semantics since it is often close. I think this is a case that is much better left to Java than to OSGi. keep it simple.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:54:16.143

OSGi 当前支持[ServiceFactory](http://www.osgi.org/javadoc/r5/core/index.html?org/osgi/framework/ServiceFactory.html)，它允许提供者为每个消费者捆绑包创建一个唯一的服务实例。这可能足以满足您的需求

但它不允许提供者为捆绑中的每个服务请求提供唯一的服务实例。我正在为 R6 制定一项提案，以允许为每个请求创建唯一的服务实例。希望它将被 R6 规范接受。

# java - Java中的前向引用是什么？

> ID：14509481
> 
> 赞同：17
> 
> 时间：2013-01-24T19:46:42.503
> 
> 标签：java

我已经通过 [这个关于前向引用的合法性的问题，](https://stackoverflow.com/questions/10035890/java-legal-forward-referencing)但不清楚`forward references`Java 语言中的含义。有人可以在一个例子的帮助下解释吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T20:25:30.203

这特别是一个编译错误。这一切都与类变量声明的顺序有关。让我们使用一些代码进行说明：

```
public class ForwardReference {        
   public ForwardReference() {
      super();
   }

   public ForwardReference echoReference() {
      return this;
   }

   public void testLegalForwardReference() {
      // Illustration: Legal
      this.x = 5;
   }

   private int x = 0;

   // Illustration: Illegal
   private ForwardReference b = a.reference();
   private ForwardReference a = new ForwardReference();
} 
```

如您所见，Java 允许您在**类方法中引用****类变量**，即使该变量的声明出现**在**方法之后。这是（合法）前向引用的一个示例，Java 编译器中内置了对此的支持。

 ****但是，您***不能***做的是声明一个依赖于另一个尚未声明的类变量“b”的类变量“a”。依赖类变量声明必须以它们依赖的相反顺序出现。

切线，如果您的代码包含非法引用错误，大多数（如果不是所有）IDE 都会警告您。

[JLS 的第 8.3.2.3 节](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.3.2.3)涵盖了非法的前向引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:33:27.097

它基本上只是编译器读取内容的顺序，如果你有的话

```
int c = 3
int a = b;
int b = 5; 
```

编译器会从上到下读取它，所以它会设置第一行，它声明一个变量'c'，并将它分配给3，这很好，然后它会遇到第二行，它声明一个变量' a'，然后尝试将其分配给'b'。

但是现在，编译器有一个问题：这个'b'是什么东西？它才知道'c'，最近才知道'a'，但它不知道任何叫做'b'的东西，因为对于编译器来说，它还没有被声明。那么，由于编译器无法处理所有的混乱，它会停下来，让你弄清楚你做了什么来激怒它。

因此，前向引用部分将是对尚不存在的事物的引用。也许及时向前..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:53:30.350

简单来说，它意味着引用（访问变量、调用函数）在代码文件的更下方。

```
 static int x=getY();
   static int y=5;
   static int getY() { return y; } 
```

*   x 的值设置为 getY() 的结果
*   在 y 的值设置为 5 之前调用 getY()
*   因此 x 的值为 0（默认整数）
*   y 的值为 5

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-29T09:29:53.850

```
public class AnyCode {

    void print() {
        System.out.println("Value of j - " + j);   // legal
        System.out.println("Value of i  - " + i);  // legal
    }

    // CASE - 1 
    int k = i;         // illegal
    int i; 

    // CASE - 2 
    int l = j;         // legal
    static int m = j;  // illegal
    static int j;

    // CASE - 3 
    A aObj = bObj;     // illegal
    B bObj = new B();

    public static void main(String[] args) {

        /* 
           Note :- here anyCode act as a local variable and get space on stack 
           whereas the object it is referring to is present on heap. And you 
           cannot forward reference a local variable. 
        */

        anyCode.print();    // 'Cannot find symbol' error
        AnyCode anyCode = new AnyCode();
    }

}

class A {

}

class B {

} 
```

*********参考案例 - 1*********

不允许前向引用实例变量，因为编译器不确定我们前向引用的值的类型，或者甚至可能不存在这样的变量。

考虑一个例子： -

```
int a = b;
boolean b = false; 
```

如果在上述情况下允许前向引用，那么它可能会造成严重破坏。

```
int a = b; // What is b? is it a primitive variable or a value or a object reference 
```

在上面的例子中，我决定不声明 b，现在如果 java 允许这样的赋值，那么这将是一场噩梦。

**********参考案例 - 2*********

静态变量在实例变量之前加载，因此前向引用静态变量并将它们分配给实例变量非常好****

# c# - winrt 磁贴更新 C# 中的错误

> ID：14509483
> 
> 赞同：0
> 
> 时间：2013-01-24T19:46:52.590
> 
> 标签：c#, windows-runtime

我正在尝试在磁贴上安排几条消息进行更新，但第二种方法的第 4 行 `tileTextAttributes[0].InnerText = Message;`不断抛出异常，说明参数不正确。你能帮我解决问题吗？

```
private void SetupTiles()
{
    try
    {
        DateTimeOffset time = DateTime.Now;

        for (int i = 0; i < messages.Count; i++)
        {
            Windows.UI.Notifications.ScheduledTileNotification stf = new ScheduledTileNotification(GetTile(messages[i]), time);
            time.Add(new TimeSpan(0, 0, 0, 30, 0));
            TileUpdateManager.CreateTileUpdaterForApplication().AddToSchedule(stf);
        }
    }
    catch (Exception ex)
    {
        new Windows.UI.Popups.MessageDialog(ex.Message).ShowAsync();
    }
}

XmlDocument  GetTile(string Message)
{
    XmlDocument tileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideText05);
   string t = tileXml.ToString();

    XmlNodeList tileTextAttributes = tileXml.GetElementsByTagName("text");
    tileTextAttributes[0].InnerText = Message;

    XmlDocument squareTileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileSquareText04);

    XmlNodeList squareTileTextAttributes = squareTileXml.GetElementsByTagName("text");
    squareTileTextAttributes[0].AppendChild(squareTileXml.CreateTextNode(Message));

    IXmlNode node = tileXml.ImportNode(squareTileXml.GetElementsByTagName("binding").Item(0), true);
    tileXml.GetElementsByTagName("visual").Item(0).AppendChild(node);

    return tileXml;
} 
```

**编辑**

> System.ArgumentException：参数不正确。
> 
> 在
> Windows.UI.Notifications.ScheduledTileNotification..ctor(XmlDocument content, DateTimeOffset deliveryTime)
> 在
> c:\Users\ddds\Documents\Visual Studio 2012\Projects\TestProj\TestProj\MainPage.xaml 中的 TestProj.MainPage.SetupTiles()。 CS：第 398 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:28:41.333

XML 对我来说似乎很好，但是您将通知安排在刚刚过去的那一刻。在构造函数之前添加时间偏移。

**编辑** 看起来比这更微妙，我想可能是因为各种时间函数是如何相对于 UTC 工作的。例如，

```
DateTimeOffset time = DateTime.Now.AddMinutes(3); 
```

可以，但不是：

```
DateTimeOffset time = DateTime.Now;
time = time.Add(new TimeSpan(0, 0, 3, 0, 0)); 
```

我的[博客文章中有一些关于预定通知](http://blogs.msdn.com/b/jimoneil/archive/2012/08/08/windows-8-notifications-scheduled-notifications.aspx)的信息，可能会有所帮助。

# r - 当一组参数被粘贴（）作为向量时，如何在glm模型的R中获得真实的残余偏差和自由度

> ID：14509495
> 
> 赞同：6
> 
> 时间：2013-01-24T19:47:47.037
> 
> 标签：r, regression, glm, anova

我正在编写一个脚本（在 python 中，R 部分在 pypeR 中），因此我需要在 R 中使用一个函数来比较两个模型和 F 比测试。

模型是这样的：

**模型 1：** `Response ~ Predictor A + Predictor B + Predictor C.... + Predictor n`
**模型 2：** `Response ~ Predictor 1`

预测变量一起`A+B+...n`组成`Predictor 1`，所以在这里嵌套没有问题（相信我）。

当我传递`Predictor A + Predictor B + Predictor C.... + Predictor n`给我创建的函数时，我*认为*它将它们视为一个变量（因为自由度与 的自由度相同`Model 2`）。也许这是因为我正在使用`paste()`？无论如何，模型 1 中预测变量的实际数量将在运行期间发生变化（这就是我需要它作为函数的原因），所以我不确定除了使用`paste()`.

请记住，粘贴实际上可能不是这里的问题；我只是想让人们知道*我*认为可能是问题所在。

*对于我如何获得真正的残余偏差和自由度*有什么建议`model 1`吗？这可能是一个黑客。例如，我只是简单地减去`length(vector of predictors) - 1`以获得自由度。我不知道对残留偏差的类似黑客攻击会是什么。

这是函数和示例实例化：

```
make_and_compare_models <- function(fitness_trait_name, data_frame_name, vector_for_multiple_regression, predictor_for_single_regression, fam){
    fit1<-glm(formula=as.formula(paste(fitness_trait_name,"~", paste(vector_for_multiple_regression, sep="+"))), family=fam, data=data_frame_name)
    #print ('length of vector of predictors')
    additional.degrees.of.freedom.fit1<-length(vector_for_multiple_regression)-1 ##the paste above prevents R from recognizing all of the vectors as separate predictors. This -1 gives you the difference in parameter number between the two models.
    print ("summary fit 1")
    print(summary(fit1))
    dev1<-(fit1$deviance)
    print ('residual deviance of fit1')
    print (dev1)
    print(fit1$df.residual)

    ##this is how I'd correct for degrees of freedom
    #df1=fit1$df.residual-additional.degrees.of.freedom.fit1
    #fit1$df.residual=df1

    ##if the old way
    df1=fit1$df.residual
    print(fit1$df.residual)
    print ('df1')
    print (df1)

    fit2<- glm(data=data_frame_name, formula=as.formula(paste(fitness_trait_name,"~",predictor_for_single_regression)), family=fam)

    print("summary fit 2")
    print(summary(fit2))
    print ("deviance of fit2")
    dev2<-(fit2$deviance)
    print(dev2)
    df2=fit2$df.residual
    print ('df2')
    print (df2)
    F.ratio<-((dev2-dev1)/(df2-df1))/(dev1/df1)
    print('F.ratio')
    print(F.ratio)
    new.p<-1-pf(F.ratio,abs(df1-df2),max(df2,df1))
    print('new.p')
    print(new.p)

}

data <- structure(list(ID = c(1L, 2L, 4L, 7L, 9L, 10L, 12L, 13L, 14L, 
15L, 16L, 17L, 18L, 20L, 21L, 22L, 23L, 24L, 25L, 27L, 28L, 29L, 
31L, 34L, 37L, 38L, 39L, 40L, 41L, 43L, 44L, 45L, 46L, 47L, 48L, 
49L, 52L, 55L, 56L, 59L, 60L, 61L, 62L, 63L, 65L, 66L, 67L, 68L, 
69L, 71L), QnWeight_initial = c(158L, 165L, 137L, 150L, 153L, 
137L, 158L, 163L, 159L, 151L, 145L, 144L, 157L, 144L, 133L, 148L, 
151L, 151L, 147L, 158L, 178L, 164L, 134L, 151L, 148L, 142L, 127L, 
179L, 162L, 150L, 151L, 153L, 163L, 155L, 163L, 170L, 149L, 165L, 
128L, 134L, 145L, 147L, 148L, 160L, 131L, 155L, 169L, 143L, 123L, 
151L), Survived_eclosion = c(0L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 
1L, 1L, 1L, 0L, 1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), Days_wrkr_eclosion_minus20 = c(NA, 
1L, NA, 3L, 0L, 2L, 0L, 1L, 0L, 0L, 0L, 1L, NA, 0L, 7L, 1L, 0L, 
1L, 0L, 1L, 2L, 2L, NA, 2L, 3L, 2L, 2L, NA, 0L, 1L, NA, NA, 0L, 
0L, 0L, 0L, 3L, 3L, 3L, 1L, 0L, 2L, NA, 1L, 0L, 1L, 1L, 3L, 1L, 
2L), MLH = c(0.5, 0.666666667, 0.555555556, 0.25, 1, 0.5, 0.333333333, 
0.7, 0.5, 0.7, 0.5, 0.666666667, 0.375, 0.4, 0.5, 0.333333333, 
0.4, 0.375, 0.3, 0.5, 0.3, 0.2, 0.4, 0.875, 0.6, 0.4, 0.222222222, 
0.222222222, 0.6, 0.6, 0.3, 0.4, 0.714285714, 0.4, 0.3, 0.6, 
0.4, 0.7, 0.625, 0.555555556, 0.25, 0.5, 0.5, 0.6, 0.25, 0.428571429, 
0.3, 0.25, 0.375, 0.555555556), Acon5 = c(0.35387674, 0.35387674, 
0.35387674, 0.35387674, 0.35387674, 0.35387674, 0.35387674, 0, 
0, 1, 0, 1, 0.35387674, 0, 0, 0.35387674, 1, 1, 0, 0, 0, 1, 0, 
0.35387674, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 
0, 0, 1, 0, 0, 0, 1, 0, 0.35387674), Baez = c(1, 1, 1, 0.467836257, 
1, 1, 0, 0, 1, 1, 0, 0.467836257, 1, 0, 0, 0, 0, 1, 0, 0, 0, 
0, 0, 0.467836257, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 
1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1), C294 = c(0, 1, 0, 0, 1, 
0.582542694, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 
0, 1, 1, 0, 0, 0.582542694, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1), C316 = c(1, 1, 0, 0, 0.519685039, 
0.519685039, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0.519685039, 0, 
1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0.519685039, 1, 0, 1, 
1, 0, 0.519685039, 1, 0.519685039, 1, 1, 1, 0.519685039, 0.519685039, 
0, 0.519685039, 0.519685039, 0), i_120_PigTail = c(1, 1, 0, 1, 
0.631236443, 0.631236443, 1, 1, 1, 1, 1, 0, 0.631236443, 1, 1, 
1, 0, 0.631236443, 1, 1, 1, 0, 0, 1, 1, 1, 0.631236443, 0, 1, 
1, 0, 1, 0.631236443, 1, 0, 1, 0, 0, 1, 0.631236443, 0.631236443, 
0, 1, 0, 0.631236443, 0.631236443, 1, 0.631236443, 0.631236443, 
1), i129 = c(0L, 1L, 1L, 0L, 1L, 0L, 1L, 1L, 0L, 1L, 0L, 0L, 
1L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 
0L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), Jackstraw_PigTail = c(0L, 1L, 1L, 0L, 
1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 
1L, 0L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 0L, 1L, 
0L, 1L, 1L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), Neil_Young = c(0.529636711, 
0, 1, 0, 0.529636711, 0.529636711, 1, 1, 0, 1, 1, 1, 0, 0, 1, 
1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 
1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1), Ramble = c(0, 0, 0, 
0, 0.215163934, 0.215163934, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 
0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0.215163934, 0, 
0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0.215163934, 0, 0, 0, 0), Sol_18 = c(1, 
0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 
0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0.404669261, 
1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1)), .Names = c("ID", "QnWeight_initial", 
"Survived_eclosion", "Days_wrkr_eclosion_minus20", "MLH", "Acon5", 
"Baez", "C294", "C316", "i_120_PigTail", "i129", "Jackstraw_PigTail", 
"Neil_Young", "Ramble", "Sol_18"), class = "data.frame", row.names = c(NA, 
-50L))

make_and_compare_models("QnWeight_initial", data, c("Acon5","Baez","C294","C316","i_120_PigTail","i129","Jackstraw_PigTail","Neil_Young","Ramble","Sol_18"), "MLH", "gaussian") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T05:36:28.817

也许我对这个问题有误解，但`anova`会比较模型，你可以给它一个测试。我不确定您关于嵌套的陈述（并将由您决定，以确保您在这里做一些明智的事情）

```
comparemodels <- function(data, response, terms1, terms2, test, family = 'gaussian', ...) {
  f1 <- reformulate(terms1, response)
  f2 <- reformulate(terms2, response)
  m1 <- glm(f1, data = data, family = family)
  m2 <- glm(f2, data = data, family = family)
  compare <- anova(m1, m2, test = test)
  print(compare)

}

response <- 'QnWeight_initial'
t1 <- c("Acon5","Baez","C294","C316","i_120_PigTail","i129","Jackstraw_PigTail","Neil_Young","Ramble","Sol_18")
t2 <- 'MLH'
comparemodels(data, response,t1, t2,  test = 'F' )

Analysis of Deviance Table

Model 1: QnWeight_initial ~ Acon5 + Baez + C294 + C316 + i_120_PigTail + 
    i129 + Jackstraw_PigTail + Neil_Young + Ramble + Sol_18
Model 2: QnWeight_initial ~ MLH
  Resid. Df Resid. Dev Df Deviance      F Pr(>F)
1        39     7197.1                          
2        48     7614.1 -9  -417.08 0.2511 0.9837 
```

# javascript - 选择隐藏其子元素的父元素

> ID：14509501
> 
> 赞同：1
> 
> 时间：2013-01-24T19:48:13.147
> 
> 标签：javascript, jquery, dom, jquery-selectors

我觉得以前可以问过这个问题，但我似乎找不到它，所以我会问自己。

我想选择作为其子项被隐藏的“原因”的父元素。例如，一组元素本质上是“隐藏的”，但不是因为它们具有`display:none`，而是因为沿途的某些父级具有`display:none`.

如果我只有一个子元素并且我知道它是`hidden`，我怎么能轻松找到导致它的父元素`hidden`。

我意识到一种解决方案就是递归地遍历父母，例如......

```
function findHiddenParent(el){
  var $el = $(el);
  if($el.css('display') == 'none'){
    return $el;
  }
  return findHiddenParent($el.parent());
} 
```

**注意我没有测试上面的代码，它只是为了概念化一个解决方案**

但是有没有更简单的方法，也许通过一些*选择魔法*？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:51:18.003

您可以使用`.parents()`然后将其过滤到隐藏的最后一个元素。

```
$(child).parents(":hidden").last().show(); 
```

它将选择层次结构中最高的父元素`display: none`

演示：http: [//jsfiddle.net/X9W2v/](http://jsfiddle.net/X9W2v/)

*注意，`:hidden`还将选择宽度/高度为 0 的元素。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:50:49.090

这与您所拥有的类似：

```
function findHiddenParents ( el ) {
    return $(el).parents().filter(function () {
        return $(this).css('display') == 'none';
    });
} 
```

这将返回*所有*隐藏的祖先。如果你只想要最近或最远的，你可以分别用`.first()`or返回它`.last()`。

* * *

如果您实际上对隐藏*哪些*元素并不感兴趣，而只是想将它们全部显示出来，那么您将无法比这更简单：

```
$(el).parents().show() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T19:55:10.993

这就是我在纯 JavaScript 中的做法。不知何故，我觉得它比涉及循环或回调的 jQuery 解决方案更干净（Kevin B 的单行代码看起来很棒！）。缺点是，它更长，并且它不检查计算样式：

```
<div id="container">
    <div id="a" style="display: none;">A
        <div id="b">B
            <div id="c">C</div>
        </div>
    </div>
</div> 
```

```
var currentNode = document.getElementById('c');
while(currentNode.parentNode && currentNode.style.display !== 'none') {
    currentNode = currentNode.parentNode;
}
alert(currentNode.id); 
```

[http://jsfiddle.net/nc4h2/](http://jsfiddle.net/nc4h2/)

# amazon-web-services - S3在没有密钥的情况下验证用户

> ID：14509510
> 
> 赞同：1
> 
> 时间：2013-01-24T19:48:53.403
> 
> 标签：amazon-web-services, amazon-s3

我有一个对存储桶具有读取权限的用户。有没有办法在不使用我的密钥的情况下使用用户的凭据进行身份验证？

类似的东西（伪代码）：

```
auth = new S3Authentication(user, pass)
obj = S3::getObject(obj, auth) 
```

**更新** 我发现了我自己问题的解决方案。见下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:27:53.100

问这个问题的最初原因是因为我在假设需要使用全局访问和安全密钥来生成适当的[授权摘要标头](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)的情况下进行操作。

不是这种情况。

您可以使用 Amazon 的 IAM 创建新的密钥对以在身份验证时使用。以下是步骤：

*   在 IAM 中创建新组
*   将组的策略设置为您希望该组中的用户拥有的任何访问权限。就我而言，我只是选择了 S3 只读策略模板
*   创建一个新用户并将其放入该组

创建新用户将生成特定于该用户的新密钥/访问密钥。您可以使用这对来验证 S3 事务。

顺便说一句，您不需要弄乱特定于存储桶的权限。就我而言，我没有设置存储桶权限（甚至没有经过身份验证的用户），它工作得很好。

# windows-runtime - 移动我的 Windows Store App 项目后，我无法编译它，因为找不到 .resw

> ID：14509512
> 
> 赞同：0
> 
> 时间：2013-01-24T19:48:58.437
> 
> 标签：windows-runtime, windows-store-apps

我在使用 Windows 应用商店应用时遇到问题。

我移动了文件夹，现在无法编译，出现错误：

```
Fehler  2   File C:\[old path]\Strings\en-US\Resources.resw not found.  C:\[new path]\MakePRI 
```

我不知道如何修复它，因为该应用程序与以前在项目中的相对路径相同。

任何解决方案的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:58:38.097

该项目可能已使用绝对路径添加到项目中。您可以通过以下两种方式之一解决此问题：

*   从项目`SolutionExplorer`中删除`Resources.resw`。然后单击`Show All Files`图标以使文件出现在其文件夹中，尽管它不包含在项目中（我知道您在移动项目时确实复制了它）。现在右键单击该文件并选择`Include In Project`. 之后，您可以再次关闭`Show All Files`。

*   在`Solution Explorer`项目上右击并选择`Unload Project`. 现在再次右键单击该项目并选择`Edit ProjectName.csproj`. 在文件中查找`Resources.resw`现有标签（和任何子标签）并将其替换为`<PRIResource Include="Strings\en-US\Resources.resw" />`. 保存更改并关闭文件。再次右键单击该项目并选择`Reload Project`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:07:55.107

我遇到了这个问题，我找到了一个简单的解决方案。打开项目，它会显示错误。现在右键单击解决方案资源管理器中的应用程序名称（在右侧）并选择构建。这将再次设置路径，现在可以运行项目。

# mongodb - 任何具有身份验证支持的适用于 MacOS 的好的 MongoDB 管理 UI？

> ID：14509515
> 
> 赞同：1
> 
> 时间：2013-01-24T19:49:08.347
> 
> 标签：mongodb

我已经使用 mViever 几个月了，它非常适合我，但是它不支持正确的身份验证（当使用 --auth 参数启动 mongod 时）。所以，现在我正在尝试找到任何具有身份验证支持的 MacOS 替代品。

试过 MongoHub，但它不支持大多数常见的 Mac 热键（即使 Enter 也不能作为提交），顺便说一下，它也有一些身份验证错误。简而言之，选择这些[http://www.mongodb.org/display/DOCS/Admin+UI](http://www.mongodb.org/display/DOCS/Admin+UIs)中的哪一个？我已经测试了其中的一些，但没有什么真正喜欢的（除了旧的好 mViever）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:32:26.593

我认为这是一个错字，您指的是[mViewer](https://github.com/Imaginea/mViewer)。正如您在此处看到的，它确实支持身份验证：

[http://imaginea.github.com/mViewer/0.9/pages/getting_started.html](http://imaginea.github.com/mViewer/0.9/pages/getting_started.html)

0.9.1 中的身份验证存在问题，但已修复。看这里：

[https://github.com/Imaginea/mViewer/issues/75](https://github.com/Imaginea/mViewer/issues/75)

出于某种原因，0.9.2 二进制文件尚不可用（尽管评论说 10 月），但构建自己并不太难：

```
git clone https://github.com/Imaginea/mViewer.git
cd mViewer
mvn clean package -Prelease -DskipTests 
```

完成所有这些后，我查看了目标文件夹：

```
cd target
ls mViewer-0.9.2.* 
```

这是我的 mViewer 0.9.2 会话，使用用户“adam”登录到启用了身份验证`mongod`：

![mViewer 0.9.2 带身份验证](../Images/79a65c941b5760e5de10e069d6d1ab12.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T10:06:05.090

[我刚刚为 nodejs github.com/marcdelalonde/mongo-viewer](https://github.com/marcdelalonde/mongo-viewer)发布了一个极简的 mongodb 数据查看器

我计划很快添加身份验证支持:)

# python - MySQL v. SQLite 用于基于 Python 的金融网络应用程序

> ID：14509517
> 
> 赞同：0
> 
> 时间：2013-01-24T19:49:25.807
> 
> 标签：python, mysql, sqlite, pandas

我正在用 Python 构建一个金融应用程序来对证券价格（除其他外）进行时间序列分析。繁重的工作将在 Python 中完成，主要使用 Numpy、SciPy 和 pandas（pandas 有 SQLite 和 MySQL 的接口）。使用 Web 界面呈现结果。将有几百 GB 的数据。

我很好奇在性能、访问数据（查询）的易用性以及与 Python 的接口方面，数据库的更好选择是什么。我已经看过关于 SQLite v. MySQL 的一般优缺点的帖子，但我正在寻找更具体到 Python 应用程序的反馈。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T19:53:18.827

正确答案是[PostgreSQL](http://www.postgresql.org/)。对于大多数平台，它与 MySQL 一样易于安装，但它是一个更好的数据库，尤其是在处理大量数据时，它是对 MySQL 的改进，您正在这样做。

我什至不会开始考虑在 SQLite 中处理几百 GB 的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:16:09.460

SQLite 非常适合嵌入式数据库，但对于一次需要多个进程访问的任何东西来说，它并不是很好。因此，您的申请不能被认真对待。

MySQL 是一个更好的选择。我也同意 Postgres 将是一个更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T03:00:58.427

对于许多面向“研究”的时间序列数据库加载，在数据库中进行尽可能多的分析比将数据复制到客户端并使用常规编程语言对其进行分析要快得多。通过网络复制 10G 比从磁盘读取要慢得多。

关系数据库本身不支持时间序列操作，因此在 MySQL 和 SQLite 中生成像从证券价格中获得安全回报这样简单的东西要么是不可能的，要么非常困难。

Postgres 有窗口操作，其他几个类似关系的数据库也有。权衡是他们每秒不做那么多交易。许多其他人使用 K 或 Q。

我见过的金融服务网络应用程序使用了多个数据库；原始数据存储在“研究”数据库中，这些数据库经过多重索引并为灵活性而设计，而 Web 应用程序直接与内存缓存和更高速的 RDB 交互；权衡是必须将数据从“研究”数据库复制到“生产”数据库。

# java - 我如何比较Java中的两种方法？

> ID：14509519
> 
> 赞同：4
> 
> 时间：2013-01-24T19:49:27.733
> 
> 标签：java, performance, methods, compare

我在 java 中有 2 种方法（例如阶乘计算），我必须测试这两种方法以找出哪一种更快。我将该代码作为递归和 for 循环：

他们都在同一个类数据中。

```
 public long FakultaetRekursiv( int n){
        if(n == 1){
        return 1;
        }
        else{
        return FakultaetRekursiv(n-1) * n;
        }
    }

    public long Fakultaet( int n){
        int x=1;
        for(int i=1; i<=n; i++){
            x= x*i;
        }
        return x;       
    } 
```

我听说 currentTimeMillis() 会有所帮助，但我不知道该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T19:52:57.880

[微基准测试很难](https://stackoverflow.com/questions/504103)，使用正确的工具，例如[Caliper](http://code.google.com/p/caliper/)。这是一个适合您的示例：

```
import com.google.caliper.SimpleBenchmark;

public class Benchmark extends SimpleBenchmark {

    @Param({"1", "10", "100"}) private int arg;

    public void timeFakultaet(int reps) {
        for (int i = 0; i < reps; ++i) {
            Fakultaet(arg);
        }
    }

    public void timeFakultaetRekursiv(int reps) {
        for (int i = 0; i < reps; ++i) {
            FakultaetRekursiv(arg);
        }
    }

} 
```

`time*()`该框架将多次运行游览方法，此外它会注入不同的`arg`值并分别对它们进行基准测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:52:04.180

始终遵循基本原则！只需使用它来查找每个功能所花费的时间

```
long startTime = System.nanoTime();
methodToTime();
long endTime = System.nanoTime();

long duration = endTime - startTime; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T19:52:12.817

```
long start = System.currentTimeMillis(); 
```

// 你的代码在这里

```
System.out.println(System.currentTimeMillis() - start + "ms"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T20:02:10.790

您也可以手动操作：

第一种方法可以用`F(x) = F(x-1) * x`生成模式的递归关系来描述......

```
F(x) = F(x-1) * x
= F(x-2)*x*(x-1)
= F(x-3)*x*(x-1)*(x-2)
. . .
= k*n 
```

这是O（n）。

显然，第二种方法也可以用 O(n) 来描述，这意味着它们在相同的上界。但这可以用作实施时序解决方案之前的快速检查。

# javascript - 为什么要在数组上使用排序映射。在某些情况下如何更好

> ID：14509527
> 
> 赞同：3
> 
> 时间：2013-01-24T19:49:52.787
> 
> 标签：javascript

我正在尝试学习数组排序。这似乎很简单。但是在 mozilla 网站上，我遇到了一个[讨论排序地图的部分](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)（大约在页面下方的四分之三处）。

> 数组中的每个元素可以多次调用 compareFunction。根据 compareFunction 的性质，这可能会产生很高的开销。compareFunction 所做的工作越多，要排序的元素越多，考虑使用映射进行排序可能就越明智。

给出的例子是这样的：

```
// the array to be sorted
var list = ["Delta", "alpha", "CHARLIE", "bravo"];
// temporary holder of position and sort-value
var map = [];
// container for the resulting order
var result = [];

// walk original array to map values and positions
for (var i=0, length = list.length; i < length; i++) {
  map.push({    
    // remember the index within the original array
    index: i, 
    // evaluate the value to sort
    value: list[i].toLowerCase()
  });
}

// sorting the map containing the reduced values
map.sort(function(a, b) {
  return a.value > b.value ? 1 : -1;
});

// copy values in right order
for (var i=0, length = map.length; i < length; i++) {
  result.push(list[map[i].index]);
}

// print sorted list
print(result); 
```

我不明白几件事。`compareFunction`也就是说：“数组中的每个元素可以多次调用”是什么意思？有人可以给我看一个例子吗。其次，我了解示例中正在执行的操作，但我不了解`compareFunction`. 此处显示的示例看起来非常简单，将数组映射到对象，对其值进行排序，然后将其放回数组中，乍一看我认为会花费更多开销。我知道这是一个简单的例子，可能除了展示程序之外没有其他用途。但是有人可以举一个例子，说明什么时候像这样映射会降低开销？这似乎还有很多工作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:55:26.470

该示例中的主要节省时间是通过避免调用`toLowerCase()`比较函数来获得的。每次需要比较一对元素时，排序代码都会调用比较函数，这样可以节省大量函数调用。对于大型阵列，构建和取消构建地图的成本是值得的。

每个元素可以多次调用比较函数是排序工作方式的自然含义。如果每个元素只需要进行一次比较，那将是一个线性时间过程。

*编辑*- 将进行的比较次数将大致与数组长度乘以长度的以 2 为底的对数成正比。那么，对于 1000 个元素的数组，这与 10,000 次比较成正比（可能更接近 15,000，具体取决于实际的排序算法）。节省 20,000 次不必要的函数调用值得构建和取消构建排序映射所需的 2000 次操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:06:52.253

对列表进行排序时，不仅要将项目与其他项目进行比较，还可能需要将其与其他几个项目进行比较。有些项目甚至可能必须与所有其他项目进行比较。

让我们看看在对数组进行排序时实际上有多少比较：

```
var list = ["Delta", "alpha", "CHARLIE", "bravo", "orch", "worm", "tower"];

var o = [];
for (var i = 0; i < list.length; i++) {
    o.push({
        value: list[i],
        cnt: 0
    });
}

o.sort(function(x, y){
    x.cnt++;
    y.cnt++;
    return x.value == y.value ? 0 : x.value < y.value ? -1 : 1;
});

console.log(o); 
```

结果：

```
[
 { value="CHARLIE",  cnt=3},
 { value="Delta",  cnt=3},
 { value="alpha",  cnt=4},
 { value="bravo",  cnt=3},
 { value="orch",  cnt=3},
 { value="tower",  cnt=7},
 { value="worm",  cnt=3}
] 
```

（小提琴：http: [//jsfiddle.net/Guffa/hC6rV/](http://jsfiddle.net/Guffa/hC6rV/)）

如您所见，每个项目都与其他几个项目进行了比较。该字符串`"tower"`甚至比其他字符串有更多的比较，这意味着它与至少一个其他字符串至少进行了两次比较。

如果在比较值之前需要进行一些计算（如`toLowerCase`示例中的方法），则该计算将进行多次。通过在计算后缓存值，每个项目只会执行一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T20:07:12.100

这被称为“装饰 - 排序 - 取消装饰”模式（你可以在[Wikipedia](http://en.wikipedia.org/wiki/Schwartzian_transform)上找到一个很好的解释）。

这个想法是，基于比较的排序必须至少调用比较函数`n`（其中`n`是列表中的项目数），因为这是检查数组是否已经排序所需的比较次数。通常，比较的次数会大于这个数（`O(n ln n)`如果您使用的是好的算法），并且根据 pingeonhole 原理，至少有一个值将被传递两次给比较函数。

如果您的比较函数在比较两个值之前进行了一些昂贵的处理，那么您可以通过首先执行昂贵的部分并存储每个值的结果来降低成本（因为您知道即使在最好的情况下您也必须这样做加工）。然后，在排序时，您使用更便宜的比较函数，它只比较那些缓存的输出。

在此示例中，“昂贵”部分是将字符串转换为小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T19:59:06.837

把它想象成缓存。这只是说您不应该在比较函数中进行大量计算，因为您将一遍又一遍地计算相同的值。

> “数组中的每个元素可以多次调用 compareFunction”是什么意思？

它的意思正是它所说的。让您拥有三个项目，A、B 和 C。它们需要按比较函数的结果进行排序。比较可以这样进行：

```
compare(A) to compare(B)
compare(A) to compare(C)
compare(B) to compare(C) 
```

所以在这里，我们有 3 个值，但`compare()`函数执行了 6 次。使用临时数组来缓存事物可以确保我们对每个项目只进行一次计算，并且可以比较这些结果。

> 其次，我了解示例中正在执行的操作，但我不了解 compareFunction 的潜在“高[er]开销”。

如果`compare()`数据库获取（比较匹配行的计数）怎么办？或复杂的数学计算（阶乘、递归 fibbinocci 或对大量项目的迭代）这些你不想做的事情不止一次。

我会说大多数时候，将非常简单/快速的计算留在内联是很好的。不要过度优化。但是，如果您需要在比较中进行任何复杂或缓慢的操作，您就必须更加聪明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T19:58:58.053

为了回答您的第一个问题，为什么`compareFunction`数组中的每个元素会被多次调用？

对数组进行排序几乎总是需要 N 次以上，其中 N 是数组的大小（除非数组已经排序）。因此，对于数组中的每个元素，它可以与数组中的另一个元素进行最多 N 次比较（冒泡排序最多需要 N^2 次比较）。您提供的`compareFunction`每次都将用于确定两个元素是否小于/等于/大于，因此将在数组中的每个元素中多次调用。

对第二个问题的简单回答，为什么 a 可能会有更高的开销`compareFunction`？

假设您`compareFunction`在比较数组的两个元素时做了很多不必要的工作。这可能会导致排序变慢，因此使用 compareFunction 可能会导致更高的开销。

# ipad - iPad 拍照改变方向

> ID：14509528
> 
> 赞同：1
> 
> 时间：2013-01-24T19:49:54.790
> 
> 标签：ipad, cordova, orientation

我正在为仅横向方向的 iPad 开发 PhoneGap 应用程序，但遇到了一个我似乎无法弄清楚的问题。该应用程序中有一项功能，可让您为客户拍照。如果您在横向模式下拍摄并裁剪照片，看起来它会尝试将应用程序的方向更改为纵向（我在右侧看到一个黑条）。但是，如果您以纵向模式拍摄和裁剪照片，应用程序将保持横向。您甚至可以横向拍摄照片并将其裁剪为纵向，应用程序将保持其横向。我现在假设问题在于当我在裁剪屏幕（移动和缩放屏幕）中单击“使用”时发生的任何事情。有谁知道这可能是什么原因或如何解决？谢谢。

# iphone - 在 Iphone Release 模拟器中启动时应用程序崩溃

> ID：14509533
> 
> 赞同：3
> 
> 时间：2013-01-24T19:50:05.313
> 
> 标签：iphone, xamarin.ios

**当我在iPhone 调试模拟器**模式中运行我的应用程序时，它工作得很好。**当我在iPhone Release 模拟器**模式中运行我的应用程序时，它崩溃了。

有人知道解决这个问题吗？

错误日志：

```
Terminating runtime due to unhandled exception

Unhandled Exception:
0   IOS_UI                              0x0008edfe mono_handle_exception_internal_first_pass + 2190
1   IOS_UI                              0x00090842 mono_handle_exception_internal + 1602
2   IOS_UI                              0x0009138f mono_handle_exception + 47
3   IOS_UI                              0x000d3564 handle_signal_exception + 148
4   ???                                 0x0b4b12c1 0x0 + 189469377
at (wrapper runtime-invoke) object.runtime_invoke_void__this__ (object,intptr,intptr,intptr) <IL 0x00047, 0x00071>
6   IOS_UI                              0x00009d92 mono_jit_runtime_invoke + 722
7   IOS_UI                              0x0016c50e mono_runtime_invoke + 126
8   IOS_UI                              0x0020f156 monotouch_trampoline + 3686
9   UIKit                               0x02805817 -[UIViewController loadViewIfRequired] + 536
10  UIKit                               0x02805882 -[UIViewController view] + 33
at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging.IntPtr_objc_msgSendSuper (intptr,intptr) <IL 0x0000a, 0x00030>
at MonoTouch.UIKit.UIViewController.get_View () [0x00030] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIViewController.g.cs:976
at IOS_UI.SettingsScreen..ctor (IOS_UI.HomeScreen) <IL 0x00014, 0x00032>
at IOS_UI.HomeScreen.ViewDidLoad () <IL 0x00119, 0x00318>
at (wrapper runtime-invoke) object.runtime_invoke_void__this__ (object,intptr,intptr,intptr) <IL 0x00047, 0x00071>
16  IOS_UI                              0x00009d92 mono_jit_runtime_invoke + 722
17  IOS_UI                              0x0016c50e mono_runtime_invoke + 126
18  IOS_UI                              0x0020f156 monotouch_trampoline + 3686
19  UIKit                               0x02805817 -[UIViewController loadViewIfRequired] + 536
20  UIKit                               0x02805882 -[UIViewController view] + 33
21  UIKit                               0x02805b2a -[UIViewController contentScrollView] + 36
22  UIKit                               0x0281cef5 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 36
23  UIKit                               0x0281cfdb -[UINavigationController _layoutViewController:] + 43
24  UIKit                               0x0281d286 -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 254
25  UIKit                               0x0281d381 -[UINavigationController _startTransition:fromViewController:toViewController:] + 72
26  UIKit                               0x0281deab -[UINavigationController _startDeferredTransitionIfNeeded:] + 386
27  UIKit                               0x0281dfc9 -[UINavigationController _startDeferredTransitionIfNeeded] + 41
28  UIKit                               0x0281e055 -[UINavigationController __viewWillLayoutSubviews] + 33
29  UIKit                               0x029233ab -[UILayoutContainerView layoutSubviews] + 233
30  UIKit                               0x0277492d -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 279
31  libobjc.A.dylib                     0x040306b0 -[NSObject performSelector:withObject:] + 70
32  QuartzCore                          0x04bb4fc0 -[CALayer layoutSublayers] + 240
33  QuartzCore                          0x04ba933c _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 468
34  QuartzCore                          0x04bb4eaf -[CALayer layoutIfNeeded] + 166
35  UIKit                               0x028138cd -[UIViewController window:setupWithInterfaceOrientation:] + 242
36  UIKit                               0x0275c1a6 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 5346
37  UIKit                               0x0275acbf -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 82
38  UIKit                               0x0275abd9 -[UIWindow _setRotatableViewOrientation:duration:force:] + 89
39  UIKit                               0x02759e34 __57-[UIWindow _updateToInterfaceOrientation:duration:force:]_block_invoke_0 + 224
40  UIKit                               0x02759c6e -[UIWindow _updateToInterfaceOrientation:duration:force:] + 209
41  UIKit                               0x0275aa29 -[UIWindow setAutorotates:forceUpdateInterfaceOrientation:] + 853
42  UIKit                               0x0275d922 -[UIWindow setDelegate:] + 351
43  UIKit                               0x02807fec -[UIViewController _tryBecomeRootViewControllerInWindow:] + 164
44  UIKit                               0x02754bc4 -[UIWindow addRootViewControllerViewIfPossible] + 481
45  UIKit                               0x02754dbf -[UIWindow _setHidden:forced:] + 368
46  UIKit                               0x02754f55 -[UIWindow _orderFrontWithoutMakingKey] + 49
47  UIKit                               0x0275df67 -[UIWindow makeKeyAndVisible] + 65
at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging.void_objc_msgSend (intptr,intptr) <IL 0x0000a, 0x0002c>
at MonoTouch.UIKit.UIWindow.MakeKeyAndVisible () [0x00010] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIWindow.g.cs:126
at IOS_UI.AppDelegate.FinishedLaunching (MonoTouch.UIKit.UIApplication,MonoTouch.Foundation.NSDictionary) <IL 0x00050, 0x00134>
at (wrapper runtime-invoke) <Module>.runtime_invoke_bool__this___object_object (object,intptr,intptr,intptr) <IL 0x00059, 0x000a7>
52  IOS_UI                              0x00009d92 mono_jit_runtime_invoke + 722
53  IOS_UI                              0x0016c50e mono_runtime_invoke + 126
54  IOS_UI                              0x0020f156 monotouch_trampoline + 3686
55  UIKit                               0x027217b7 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 266
56  UIKit                               0x02721da7 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1248
57  UIKit                               0x02722fab -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
58  UIKit                               0x02734315 -[UIApplication handleEvent:withNewEvent:] + 1022
59  UIKit                               0x0273524b -[UIApplication sendEvent:] + 85
60  UIKit                               0x02726cf8 _UIApplicationHandleEvent + 9874
61  GraphicsServices                    0x04d0fdf9 _PurpleEventCallback + 339
62  GraphicsServices                    0x04d0fad0 PurpleEventCallback + 46
63  CoreFoundation                      0x012b6bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
64  CoreFoundation                      0x012b6962 __CFRunLoopDoSource1 + 146
65  CoreFoundation                      0x012e7bb6 __CFRunLoopRun + 2118
66  CoreFoundation                      0x012e6f44 CFRunLoopRunSpecific + 276
67  CoreFoundation                      0x012e6e1b CFRunLoopRunInMode + 123
68  UIKit                               0x027227da -[UIApplication _run] + 774
69  UIKit                               0x0272465c UIApplicationMain + 1211
at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x00056, 0x000a4>
at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
at IOS_UI.Application.Main (string[]) <IL 0x00007, 0x00018>
at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00049, 0x00077>
74  IOS_UI                              0x00009d92 mono_jit_runtime_invoke + 722
75  IOS_UI                              0x0016c50e mono_runtime_invoke + 126
76  IOS_UI                              0x00170704 mono_runtime_exec_main + 420
77  IOS_UI                              0x00175af5 mono_runtime_run_main + 725
78  IOS_UI                              0x00067275 mono_jit_exec + 149
79  IOS_UI                              0x0020440d main + 2013
80  IOS_UI                              0x00002dc5 start + 53
81  ???                                 0x00000004 0x0 + 4

[ERROR] FATAL UNHANDLED EXCEPTION: System.NullReferenceException: Object reference not set to an instance of an object
  at IOS_UI.SettingsScreen.ViewDidLoad () [0x00000] in <filename unknown>:0 
  at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:IntPtr_objc_msgSendSuper (intptr,intptr)
  at MonoTouch.UIKit.UIViewController.get_View () [0x00030] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIViewController.g.cs:976 
  at IOS_UI.SettingsScreen..ctor (IOS_UI.HomeScreen lastScreen) [0x00000] in <filename unknown>:0 
  at IOS_UI.HomeScreen.ViewDidLoad () [0x00000] in <filename unknown>:0 
  at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:void_objc_msgSend (intptr,intptr)
  at MonoTouch.UIKit.UIWindow.MakeKeyAndVisible () [0x00010] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIWindow.g.cs:126 
  at IOS_UI.AppDelegate.FinishedLaunching (MonoTouch.UIKit.UIApplication app, MonoTouch.Foundation.NSDictionary options) [0x00000] in <filename unknown>:0 
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 
  at IOS_UI.Application.Main (System.String[] args) [0x00000] in <filename unknown>:0 
Stacktrace:

Native stacktrace:

    0   IOS_UI                              0x000916bc mono_handle_native_sigsegv + 284
    1   IOS_UI                              0x000d778d sigabrt_signal_handler + 109
    2   libsystem_c.dylib                   0x9ac1c59b _sigtramp + 43
    3   ???                                 0xffffffff 0x0 + 4294967295
    4   libsystem_sim_c.dylib               0x041e057b abort + 140
    5   IOS_UI                              0x001ea4cd monoeg_g_logv + 157
    6   IOS_UI                              0x001ea4fb monoeg_assertion_message + 43
    7   IOS_UI                              0x00215ecf monotouch_unhandled_exception_handler + 159
    8   IOS_UI                              0x0008d24c mono_invoke_unhandled_exception_hook + 140
    9   IOS_UI                              0x0009123a mono_handle_exception_internal + 4154
    10  IOS_UI                              0x0009138f mono_handle_exception + 47
    11  IOS_UI                              0x000d3564 handle_signal_exception + 148
    12  ???                                 0x0b4b12c1 0x0 + 189469377
    13  ???                                 0x0b4de3c9 0x0 + 189653961
    14  IOS_UI                              0x00009d92 mono_jit_runtime_invoke + 722
    15  IOS_UI                              0x0016c50e mono_runtime_invoke + 126
    16  IOS_UI                              0x0020f156 monotouch_trampoline + 3686
    17  UIKit                               0x02805817 -[UIViewController loadViewIfRequired] + 536
    18  UIKit                               0x02805882 -[UIViewController view] + 33
    19  ???                                 0x0cfc5ba0 0x0 + 217865120
    20  ???                                 0x170de330 0x0 + 386786096
    21  ???                                 0x170df712 0x0 + 386791186
    22  ???                                 0x170de1b0 0x0 + 386785712
    23  ???                                 0x0b4de3c9 0x0 + 189653961
    24  IOS_UI                              0x00009d92 mono_jit_runtime_invoke + 722
    25  IOS_UI                              0x0016c50e mono_runtime_invoke + 126
    26  IOS_UI                              0x0020f156 monotouch_trampoline + 3686
    27  UIKit                               0x02805817 -[UIViewController loadViewIfRequired] + 536
    28  UIKit                               0x02805882 -[UIViewController view] + 33
    29  UIKit                               0x02805b2a -[UIViewController contentScrollView] + 36
    30  UIKit                               0x0281cef5 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 36
    31  UIKit                               0x0281cfdb -[UINavigationController _layoutViewController:] + 43
    32  UIKit                               0x0281d286 -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 254
    33  UIKit                               0x0281d381 -[UINavigationController _startTransition:fromViewController:toViewController:] + 72
    34  UIKit                               0x0281deab -[UINavigationController _startDeferredTransitionIfNeeded:] + 386
    35  UIKit                               0x0281dfc9 -[UINavigationController _startDeferredTransitionIfNeeded] + 41
    36  UIKit                               0x0281e055 -[UINavigationController __viewWillLayoutSubviews] + 33
    37  UIKit                               0x029233ab -[UILayoutContainerView layoutSubviews] + 233
    38  UIKit                               0x0277492d -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 279
    39  libobjc.A.dylib                     0x040306b0 -[NSObject performSelector:withObject:] + 70
    40  QuartzCore                          0x04bb4fc0 -[CALayer layoutSublayers] + 240
    41  QuartzCore                          0x04ba933c _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 468
    42  QuartzCore                          0x04bb4eaf -[CALayer layoutIfNeeded] + 166
    43  UIKit                               0x028138cd -[UIViewController window:setupWithInterfaceOrientation:] + 242
    44  UIKit                               0x0275c1a6 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 5346
    45  UIKit                               0x0275acbf -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 82
    46  UIKit                               0x0275abd9 -[UIWindow _setRotatableViewOrientation:duration:force:] + 89
    47  UIKit                               0x02759e34 __57-[UIWindow _updateToInterfaceOrientation:duration:force:]_block_invoke_0 + 224
    48  UIKit                               0x02759c6e -[UIWindow _updateToInterfaceOrientation:duration:force:] + 209
    49  UIKit                               0x0275aa29 -[UIWindow setAutorotates:forceUpdateInterfaceOrientation:] + 853
    50  UIKit                               0x0275d922 -[UIWindow setDelegate:] + 351
    51  UIKit                               0x02807fec -[UIViewController _tryBecomeRootViewControllerInWindow:] + 164
    52  UIKit                               0x02754bc4 -[UIWindow addRootViewControllerViewIfPossible] + 481
    53  UIKit                               0x02754dbf -[UIWindow _setHidden:forced:] + 368
    54  UIKit                               0x02754f55 -[UIWindow _orderFrontWithoutMakingKey] + 49
    55  UIKit                               0x0275df67 -[UIWindow makeKeyAndVisible] + 65
    56  ???                                 0x0cfc8424 0x0 + 217875492
    57  ???                                 0x170dd264 0x0 + 386781796
    58  ???                                 0x0cfc772c 0x0 + 217872172
    59  ???                                 0x0cfc7827 0x0 + 217872423
    60  IOS_UI                              0x00009d92 mono_jit_runtime_invoke + 722
    61  IOS_UI                              0x0016c50e mono_runtime_invoke + 126
    62  IOS_UI                              0x0020f156 monotouch_trampoline + 3686
    63  UIKit                               0x027217b7 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 266
    64  UIKit                               0x02721da7 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1248
    65  UIKit                               0x02722fab -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
    66  UIKit                               0x02734315 -[UIApplication handleEvent:withNewEvent:] + 1022
    67  UIKit                               0x0273524b -[UIApplication sendEvent:] + 85
    68  UIKit                               0x02726cf8 _UIApplicationHandleEvent + 9874
    69  GraphicsServices                    0x04d0fdf9 _PurpleEventCallback + 339
    70  GraphicsServices                    0x04d0fad0 PurpleEventCallback + 46
    71  CoreFoundation                      0x012b6bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    72  CoreFoundation                      0x012b6962 __CFRunLoopDoSource1 + 146
    73  CoreFoundation                      0x012e7bb6 __CFRunLoopRun + 2118
    74  CoreFoundation                      0x012e6f44 CFRunLoopRunSpecific + 276
    75  CoreFoundation                      0x012e6e1b CFRunLoopRunInMode + 123
    76  UIKit                               0x027227da -[UIApplication _run] + 774
    77  UIKit                               0x0272465c UIApplicationMain + 1211
    78  ???                                 0x0cfc4bf4 0x0 + 217861108
    79  ???                                 0x0cfc3358 0x0 + 217854808
    80  ???                                 0x0cfc2b58 0x0 + 217852760
    81  ???                                 0x0cfc2be7 0x0 + 217852903
    82  IOS_UI                              0x00009d92 mono_jit_runtime_invoke + 722
    83  IOS_UI                              0x0016c50e mono_runtime_invoke + 126
    84  IOS_UI                              0x00170704 mono_runtime_exec_main + 420
    85  IOS_UI                              0x00175af5 mono_runtime_run_main + 725
    86  IOS_UI                              0x00067275 mono_jit_exec + 149
    87  IOS_UI                              0x0020440d main + 2013
    88  IOS_UI                              0x00002dc5 start + 53
    89  ???                                 0x00000004 0x0 + 4

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

源设置屏​​幕.cs

```
public partial class SettingsScreen : UIViewController
{
    private string username;
    private string password;
    public event EventHandler CancelEvent;
    private LoginValidator loginValidator;
    private static string loginStatus;
    private static Boolean booleanCredentialsCheck;
    private int settingAlreadyStarted;

    public SettingsScreen () : base ("SettingsScreen", null)
    {
        try {

            this.View.BackgroundColor = UIColor.FromPatternImage (UIImage.FromFile ("ImageResource/Loginscreen/Background/achtergrond.png"));
            settingAlreadyStarted = NSUserDefaults.StandardUserDefaults.IntForKey ("settingAlreadyStarted");

            loginValidator = new LoginValidator ();
            textfieldPassword.SecureTextEntry = true;

            string encryptedPassword = NSUserDefaults.StandardUserDefaults.StringForKey ("settingPassword");

            if (encryptedPassword != null) {
                string decryptedPassword = Encrypter.Decrypt (encryptedPassword);
                textfieldPassword.Text = decryptedPassword;
            }
            textfieldUsername.Text = NSUserDefaults.StandardUserDefaults.StringForKey ("settingUsername");
            labelLoginStatus.Text = loginStatus;
        } catch (Exception ex){
            Console.WriteLine ("ERROR SettingsScreen");
        }
    }

    public override void DidReceiveMemoryWarning ()
    {
        base.DidReceiveMemoryWarning ();
    }

    public override void ViewDidLoad ()
    {
        imageviewPopup.Image = UIImage.FromFile("ImageResource/Loginscreen/Popup/popup.png");

        buttonLogin.TouchUpInside += Login;
        buttonCancel.TouchUpInside += Cancel;

        //Delegate voor done button van keyboard
        CloseSettingsTextfieldDelegate closeSettingsTextfieldDelegate = new CloseSettingsTextfieldDelegate(this);
        textfieldUsername.Delegate = closeSettingsTextfieldDelegate;
        textfieldPassword.Delegate = closeSettingsTextfieldDelegate;

        base.ViewDidLoad ();
    }

    public override void ViewDidUnload ()
    {
        base.ViewDidUnload ();

        // Clear any references to subviews of the main view in order to
        // allow the Garbage Collector to collect them sooner.
        //
        // e.g. myOutlet.Dispose (); myOutlet = null;

        ReleaseDesignerOutlets ();
    }

    public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
    {
        // Return true for supported orientations
        return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
    }

    void Login (object sender, EventArgs e)
    {

        try {
            string plainPassword = textfieldPassword.Text;
            string domainAndUsername = textfieldUsername.Text;

        if (domainAndUsername.Length > 4) {
            string domain = domainAndUsername.Substring (0, 4);
            string username = domainAndUsername.Substring (5);

            if (username == null || plainPassword == null) {
                loginStatus = "Niet alle velden ingevuld!";
                labelLoginStatus.Text = loginStatus;
                var alertLegeVelden = new UIAlertView ("Mislukt!", "Niet alle velden zijn ingevuld", null, "OK");
                alertLegeVelden.Show ();
            } else {
                booleanCredentialsCheck = loginValidator.ValidateLogin (username, plainPassword, domain);
                Console.WriteLine (booleanCredentialsCheck);

                if (booleanCredentialsCheck == true) {
                    NSUserDefaults.StandardUserDefaults.SetString (domainAndUsername, "settingUsername");

                    string encryptedPassword = Encrypter.Encrypt(plainPassword);
                    NSUserDefaults.StandardUserDefaults.SetString (encryptedPassword, "settingPassword");
                    loginStatus = "Logingegevens correct";
                    labelLoginStatus.Text = loginStatus;
                    var alertSuccess = new UIAlertView ("Gelukt!", "Inloggegevens zijn correct", null, "OK");
                    alertSuccess.Show ();

                    if (settingAlreadyStarted.Equals (0)) { // Check eerste keer gestart?
                            NSUserDefaults.StandardUserDefaults.SetInt(1, "settingAlreadyStarted"); //Verander value van setting zodat iPhone weet dat app al eens gestart is.
                    }

                    if (CancelEvent != null) { //Sluit settings scherm
                        CancelEvent(this, EventArgs.Empty);
                    }

                } else {
                    loginStatus = "Logingegevens foutief";
                    labelLoginStatus.Text = loginStatus;
                    var alertFail = new UIAlertView ("Mislukt!", "Inloggegevens zijn foutief", null, "OK");
                    alertFail.Show ();
                }
            }
        } else {
            Console.WriteLine ("Te weinig username karakters");
            loginStatus = "Logingegevens foutief";
            labelLoginStatus.Text = loginStatus;
            var alertFailUsernameDomain = new UIAlertView ("Mislukt!", "Domein of username foutief ingevuld", null, "OK");
            alertFailUsernameDomain.Show ();
        }
        } catch {
            var alertFailUsernameDomain = new UIAlertView ("Mislukt!", "Domein of username foutief ingevuld", null, "OK");
            alertFailUsernameDomain.Show ();
        }

    }

    void Cancel (object sender, EventArgs e)
    {
        if (settingAlreadyStarted.Equals (0)) { // Bij eerste keer dat app wordt gestart. //Moet uiteindelijk uit setting gelezen worden.
            Console.WriteLine("Annuleren niet toegestaan bij eerste keer starten app");
            var alertCannotCancel = new UIAlertView ("Mislukt", "Er dient te worden ingelogd om gebruik te kunnen maken van de app", null, "OK");
            alertCannotCancel.Show ();

        } else {
            if (CancelEvent != null) {
                CancelEvent(this, EventArgs.Empty);
            }
        }
    }

}

public class CloseSettingsTextfieldDelegate : UITextFieldDelegate{
    private SettingsScreen controller;

    public CloseSettingsTextfieldDelegate(SettingsScreen settingsScreen)
    {
        controller = settingsScreen;
    }

    public override bool ShouldReturn (UITextField textField)
    {
        textField.ResignFirstResponder();
        return false;
    }
} 
```

打开我的应用程序的设置时，我还注意到一个奇怪的事情：设置->应用程序：

它显示了很多调试设置（100+）

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:37:54.667

对于`NullReferenceException`在此位置发生的 a ，这意味着一个（或多个）字段是`null`。由于它不会在**Debug**上发生，您将无法使用调试器，但您应该能够通过`Console.WriteLine`在应用程序中添加一些来验证这一点。例如

```
public override void ViewDidLoad ()
{
    if (imageviewPopup == null) Console.WriteLine ("uho, no imageviewPopup");
    imageviewPopup.Image = UIImage.FromFile("ImageResource/Loginscreen/Popup/popup.png");

    if (buttonLogin == null) Console.WriteLine ("uho, no buttonLogin");
    buttonLogin.TouchUpInside += Login;
    if (buttonCancel == null) Console.WriteLine ("uho, no buttonCancel");
    buttonCancel.TouchUpInside += Cancel;
    ... 
```

确认后，您应该查看您的 NIB 文件，以及是否有任何与**调试**和**发布**版本不同的项目选项。

> 打开我的应用程序的设置时，我还注意到一个奇怪的事情：**设置 - >应用程序：**它显示了很多调试设置（100+）。什么可能导致这种情况？

这是最近修复的 MonoTouch 中的一个错误（条目在每次构建时都重复）。这只发生在调试版本中，不会影响您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:17:48.043

问题解决了！

在项目属性中，我确实将调试模式的编译器值设置为“IOS”。对于发布模式，我忘记设置值。现在我也设置了这个值，它可以工作。

在monoTouch项目和Mono For Android项目使用的通用项目中的一个类中，我定义了一个if else语句进行编译。如果我是对的，这个 if else 语句使用项目的编译器值来确定要做什么。

```
 public class Sharepoint
    {
#if ANDROID

    private Android_UI.Test.Database.Lists service;
#else
    private Test.Database.Lists service;
#endif
    private const string LISTNAME = "DatabaseFix";
    private CredentialCache _credentialCache;

    /// <summary>
    /// Initializes a new instance of the <see cref="Test_Common.Sharepoint"/> class.
    /// Requires Ordina credentials.
    /// </summary>
    /// <param name='username'>
    /// Username.
    /// </param>
    /// <param name='password'>
    /// Password.
    /// </param>
    /// <param name='domain'>
    /// Domain.
    /// </param>
    public Sharepoint (string username, string password, string domain){
#if ANDROID
        service = new Android_UI.Test.Database.Lists();
#else
        service = new Test.Database.Lists();
#endif
        service.Url = "https://........./_vti_bin/Lists.asmx";

        _credentialCache = new CredentialCache();
        _credentialCache.Add(new Uri(service.Url), "BASIC", new NetworkCredential(username, password, domain));

        service.Credentials = CredentialCache.DefaultCredentials;
        service.Credentials = _credentialCache;
        service.Timeout = 30000; //30 seconds
    } 
```

PS。谢谢大家的回复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:49:56.897

只需将此调用移至

```
 this.View.BackgroundColor = UIColor.FromPatternImage (UIImage.FromFile ("ImageResource/Loginscreen/Background/achtergrond.png"));
        settingAlreadyStarted = NSUserDefaults.StandardUserDefaults.IntForKey ("settingAlreadyStarted");

        loginValidator = new LoginValidator ();
        textfieldPassword.SecureTextEntry = true;

        string encryptedPassword = NSUserDefaults.StandardUserDefaults.StringForKey ("settingPassword");

        if (encryptedPassword != null) {
            string decryptedPassword = Encrypter.Decrypt (encryptedPassword);
            textfieldPassword.Text = decryptedPassword;
        }
        textfieldUsername.Text = NSUserDefaults.StandardUserDefaults.StringForKey ("settingUsername");
        labelLoginStatus.Text = loginStatus; 
```

到

```
public override void ViewDidLoad (){} 
```

# asp.net-mvc-3 - JQuery AJAX Get 调用在 IIS 上失败，但在开发服务器上工作

> ID：14509534
> 
> 赞同：-2
> 
> 时间：2013-01-24T19:50:18.503
> 
> 标签：asp.net-mvc-3, jquery

我有一个在 MVC3 应用程序中使用的 AJX get 调用。下面是电话。

```
 $.ajax({
    url: '@Url.Action("GetEmailByAdvanced", "CustomerEmails")',
    type: 'GET',
    data: cqvdata,
    success: function (data) {
       //called when successful
       var emails = "";
       $.each(data, function (index, contact) {
           $('#BCCText').tagit('createTag', contact.Email)
       });
       return false;
   },
   error: function (e) {
      //called when there is an error
      alert("Error occurred");
   }
}); 
```

cqvdata 是序列化的形式。在我的计算机上运行的开发服务器上，这个调用工作正常，我得到了结果。当我将它部署到 Windows Server 2008 R2 时，它返回一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:04:13.613

我找不到任何方法来处理错误 414。在网上环顾四周，答案似乎通常是您应该使用包含这么大数据的帖子，因此它会以不同的方式出现。我做了那个改变，现在它运行良好。

# javascript - 链接，控制器和编译功能中的各种可注入物是什么？

> ID：14509537
> 
> 赞同：13
> 
> 时间：2013-01-24T19:50:41.180
> 
> 标签：javascript, angularjs

哪些对象可以作为参数传递给 AngularJS 中的链接、控制器和编译函数？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T20:18:51.237

您要查找的所有信息都可以在 AngularJS 文档网站上找到。

```
function compile(tElement, tAttrs, transclude) { ... }

function link(scope, iElement, iAttrs, controller) { ... }

function controller(scope, element, attribute, transcludeFn) 
```

查看编写指令长版本

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

# python - 如何使用 Cloud Storage JSON API 检索大小超过 64KB 的文件？

> ID：14509542
> 
> 赞同：5
> 
> 时间：2013-01-24T19:51:17.233
> 
> 标签：python, google-app-engine, google-cloud-storage, google-api-python-client

我需要在我的 Web 应用程序中检索大小超过 64KB 的文件。目前，在 JSON API 的 v1beta1 中，Google 仅允许通过其 JSON API 上传/下载大小为 64KB 的文件。我已经弄清楚如何使用“可恢复”上传（不是通过 v1beta1 在其 JSON API 中提供的接口，而是手动）上传大小超过 64KB 的文件。

我想不通的是下载的好方法。现在，我为要下载的对象公开 ACL，下载文件，然后删除对象上的公共 ACL。这不仅效率低下，而且不是很干净。有没有更好的方法我可以使用，或者在谷歌在他们的 API 的未来版本中提供更好的方法之前我会被卡住吗？

**背景信息** 我正在编写一个 GAE 应用程序，并且我知道 google.appengine.api.files 接口。不幸的是，在使用本地开发环境时，这不适用于实时存储桶，并且出于测试目的，我和我的团队需要一种在本地测试开发的方法（在其他限制/安全因素中部署到 GAE 太麻烦了）。我们可以与除 Cloud Storage 之外的所有其他 API 进行交互，因此我正在编写一个类，该类在从 Cloud Storage 读取/写入/删除时将使用 JSON API 或 AppEngine 的文件接口。我有一个可行的实现，但我对检索文件的方式不满意。

**下面的评论澄清**：我们正在下载大量信息，对其进行按摩，并将其存储到 Cloud Storage 以供 BigQuery 使用。我们需要使用开发环境中的实时存储桶，因为如果我们不这样做，BigQuery 将无法使用我们想要测试的数据。无需提供这些文件，只需处理它们

**来自对以下已接受答案的评论的解决方案：** 我能够`httplib2`从与 JSON API 交互的代码中重用经过身份验证的对象，以对`https://{bucket_name}.storage.googleapis.com/{object_name}`URL 端点执行经过身份验证的 GET 请求，只添加`Content-Length: 0`和`x-goog-api-version: 2`标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:37:07.600

对于下载，XML API 是进行经过身份验证的下载的最简单方法。有多种方法可以进行经过身份验证的下载，如本页所述：[https ://developers.google.com/storage/docs/authentication](https://developers.google.com/storage/docs/authentication)

对于简单的获取操作，“XML API”这个名称可能会被认为具有误导性——您不需要生成任何 XML。如果您遇到错误，它将表示为 XML，但在成功下载文件的最简单情况下，实际上不涉及 XML。

# bayesian - Winbugs中的“节点a的多重定义”错误

> ID：14509546
> 
> 赞同：1
> 
> 时间：2013-01-24T19:51:36.333
> 
> 标签：bayesian, poisson, winbugs, winbugs14

好吧，我只是重写我的代码。现在的问题是当我编译它时，我得到一个错误**"multiple definition of node a"**。有谁知道我的代码有什么问题。我为模型创建变量 a、b 和 c，使其没有很多常量。

```
 model{

  for(i in 1:n){

            a <- (k[1] + step(s1[i]-.9)*k[2] + step(s1[i]*.5-.9)*k[3]) 
            b <- (r[1] + step(s2[i]-.9)*r[2] + step(s2[i]*.5-.9)*r[3])
            c <- (s[1] + step(s3[i]-.9)*s[2] + step(s3[i]*.5-.9)*s[3])

    dummy[i] <- 0

      dummy[i] ~ dloglik(logLike[i])

      # This is the log transformation of the 3-variate poisson 

      logLike[i] <- -theta12[i] + a*log(theta12[i]) - logfact(a) -theta13[i] - b*log(theta13[i]) - logfact(b)-theta23[i] - c*log(theta23[i]) - logfact(c)-theta1[i] + (y1[i]-a-b)*log(theta1[i]) + logfact(y1[i]-a-b)-theta2[i] + (y2[i]-a-c)*log(theta2[i]) + logfact(y2[i]-a-c)-theta3[i] + (y3[i]-b-c)*log(theta3[i]) + logfact(y3[i]-b-c)

            log(theta1[i]) <- alpha1 + beta1*log(L[i])
            log(theta2[i]) <- alpha2 + beta2*log(L[i])
            log(theta3[i]) <- alpha3 + beta3*log(L[i])
            log(theta12[i]) <- alpha4 + beta4*log(L[i])
            log(theta23[i]) <- alpha5 + beta5*log(L[i])
            log(theta13[i]) <- alpha6 + beta6*log(L[i])
    }

            alpha1 ~ dgamma(.001, .001)
            alpha2 ~ dgamma(.001, .001)
            alpha3 ~ dgamma(.001, .001)
            alpha4 ~ dgamma(.001, .001)
            alpha5 ~ dgamma(.001, .001)
            alpha6 ~ dgamma(.001, .001)
            beta1 ~ dgamma(.001, .001)
            beta2 ~ dgamma(.001, .001)
            beta3 ~ dgamma(.001, .001)
            beta4 ~ dgamma(.001, .001)
            beta5 ~ dgamma(.001, .001)
            beta6 ~ dgamma(.001, .001)

    }

    data
    list(y1 =c(0,1,2,3,2),
    y2 = c(1,2,3,0,2),
    y3 = c(1,3,2,3,2),
    k =   c(0,1,2,3,4),
    s =   c(0,1,2,3,4), 
    r =    c(0,1,2,3,4), 
    L =   c(1,2,3,4,5), 
    s1= c(0,1,2,0,2), 
    s2= c(0,0,0,0,0),
    s3=  c(1,1,0,0,0),n=5)

    inits
    list(beta1=0,beta2=0,beta3=0,beta4=0,beta5=0,beta6=0,alpha1=0,alpha2=0,alpha3=0,
    alpha4=0,alpha5=0,alpha6=0) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T09:28:46.230

您收到此错误是因为您在 for() 循环中定义了 a、b、c。换句话说，您已经多次（n 次）定义了一个常量节点。您应该用 a[i]、b[i]、c[i] 替换 a、b、c。将 BUGS 视为一种模型描述语言，而不是一种编程语言。模型中的每个数量都必须有一个单一的定义，作为其他数量的固定或随机函数。

# jquery - jQuery 和 Underscore 未在 RequireJS 中加载

> ID：14509548
> 
> 赞同：2
> 
> 时间：2013-01-24T19:51:49.850
> 
> 标签：jquery, backbone.js, underscore.js, require, amd

我对 Backbone 还很陌生，今天才开始尝试学习 AMD。我从 RequireJS 的网站安装了 RequireJS-jQuery 库。所以这是我的脚本标签，里面有 Laravel 路径调用：

```
<script data-main="{{ path('js/main') }}" 
src="{{ path('js/libs/requirejs/require-jquery.js') }}"></script> 
```

我试图确保一切都正确加载，所以我正在尝试`console.log`我的依赖项。Backbone 返回一个对象就好了。下划线和 jQuery 没有。这是我的`main.js`文件：

```
 require.config({
    baseUrl: '../js/',
    paths: {
        jquery: 'libs/jquery/jquery-1.8.3.min',
        underscore: 'libs/underscore/underscore-min',
        backbone: 'libs/backbone/backbone-min'
    }
});

if ( typeof define === "function" && define.amd && define.amd.jQuery ) {
  define( 'jquery', [], function () { return jQuery; } );
}

//the "main" function to bootstrap your code
require(['jquery', 'underscore', 'backbone', 'app'],
    function () {  
        var App = require('app');
        //App.initialize();
        console.log($);
        console.log(_);
        console.log(Backbone);
}); 
```

我有几个问题，我是否需要 jQuery 的路径，因为它是 RequireJS-jQuery 库的一部分？二，这是什么关于匀场？我需要垫片来让它工作吗？我正在使用 RequireJS-jQuery 的 v 2.1.4。

我尝试关注[这篇文章](https://stackoverflow.com/questions/11181297/cannot-get-requirejs-to-include-backbonejs)，但无法正常工作。我正在使用 AMD 版本的 Backbone 和 Underscore。为什么不下划线和 jQuery `console.log`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:10:32.770

当通过 require.js 请求任何文件时，它必须符合标准 AMD 定义，以便 IIFE 定义参数。

例如，在 jQuery 库中，他们添加了一个导出定义：

```
if ( typeof define === "function" && define.amd && define.amd.jQuery ) {
  define( "jquery", [], function () { return jQuery; } );
} 
```

这允许您`$`在 IIFE 中引用。

Shimming 添加了一个导出定义（类似于上面的 jQuery），所以如果你愿意，你可以让 _、$ 和 Backbone 指向适当的引用......但就个人而言，我不依赖于参数，而是依赖于全局评估，为*依赖*项设置必要的垫片，否则，对于我自己的所有模块（我**将**每个文件定义为 AMD 模块），我使用内联 require 定义。

例如：

```
require(['jquery','underscore','backbone', 'my-module'],function(){
    var MyModule = require('my-module');
}); 
```

希望以上内容有意义。

〜根据您上面的代码，尝试：

```
require(['jquery', 'underscore', 'backbone', 'app'],
    function () {  
        var App = require('app');
        //App.initialize();
        console.log($);
        console.log(_);
        console.log(Backbone);
}); 
```

# c# - 在调用 ToList() 或 Count() 之前检查 LINQ Where() 是否返回任何内容

> ID：14509549
> 
> 赞同：2
> 
> 时间：2013-01-24T19:51:51.240
> 
> 标签：c#, linq

我想知道我是否做类似的事情：

```
var results = source.Where(c => c.Name == "Whatever"); 
```

有什么方法可以在调用 Count() 或 ToList() 之前检查查询是否返回任何内容？我知道 Where() 懒惰地执行。

返回的数据集可能很大，调用上述方法非常耗时。

*结果*也永远不会为NULL...

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T20:11:47.337

由于您只想知道是否值得获得完整的结果集，所以这永远不值得。

这里只有两种情况：

1.  您的查询没有结果。在这种情况下，检查有多少结果的查询将花费与实际查询完全相同的时间来执行，并返回与*实际*查询一样多的信息。在这种情况下，您一无所获（但也一无所获）。

2.  您的查询至少有一个结果。在这种情况下，您需要返回并执行真正的查询。最终结果是，您花费的时间与不先检查所花费的时间一样多，**但您还需要增加检查是否有结果的成本**。该检查意味着对数据库的往返，这是一个不平凡的时间量。

如果您想知道查询是否包含任何项目，它是*可能的*。（只需使用`Any`扩展方法。）但是，如果您不需要知道实际项目是什么而不管结果是什么，这才是*有益*`Any`的。

同样值得注意的是，正如lazyberezovsky 在[他的回答](https://stackoverflow.com/a/14509690/1159478)中所做的那样，您还需要考虑在调用后查询结果发生变化的竞争条件`Any`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:00:37.730

知道查询是否会返回某些内容的唯一方法是执行该查询。因此，您可以获得结果或检查结果计数/存在。**但是**在第二种情况下，您不能确定进一步执行查询会产生相同的结果。

样本：

```
List<int> items = new List<int>() { 1, 2, 3 };
var query = items.Where(i => i > 0);
// query is not executed at this point
var count = query.Count(); // first execution, returns 3
items.Clear();
var positiveItmes = query.ToList(); // ooop, no items here! 
```

因此，如果您确定数据不会在查询之间发生变化（您是吗？完全？），您可以使用`Count()`or `Any()`before 获取所有数据。在其他情况下，您必须使用类似`ToList()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:54:57.323

当然只是使用 Any 它会告诉你是否有任何结果。

```
results.Any(); 
```

根据 MSDN：

此方法不返回集合的任何一个元素。相反，它确定集合是否包含任何元素。一旦可以确定结果，就停止源的枚举。

[MSDN 任何](http://msdn.microsoft.com/en-us/library/bb337697.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:27:05.177

感谢您提供有用的建议和精确度。我最终在我的通用 EF 存储库中实现了这个：

```
 public bool CheckExists(string tableName, string whereField, string whereValue)
    {
        string query = string.Format("SELECT COUNT(*) FROM {0} WHERE {1} = {2}", tableName, whereField, whereValue);
        var count = _context.ExecuteStoreQuery<int>(query).FirstOrDefault();
        if (count == 0)
            return false;
        else
            return true;
    } 
```

快多了！:) 我仍在执行查询，但由于我不要求 LINQ/EF 将潜在结果转换为 IENumerable 的复杂类类型，因此似乎没问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-24T20:01:14.683

```
var any = (source.Where(c => c.Name == "Whatever").FirstOrDefault() != null); 
```

FirstOrDefault 将作为 SELECT TOP 1 (LinqToSql) 执行

# android - 取消选中android中listview中的所有复选框

> ID：14509552
> 
> 赞同：0
> 
> 时间：2013-01-24T19:51:54.130
> 
> 标签：android, listview, checkbox

我想取消选中 customlistview 中的所有复选框。我的适配器工作正常，所以点击按钮

**这是写在我的按钮监听器中的**

```
 for(int i = 0; i<listview.getChildCount();i++)
                    {
                     v = listview.getChildAt(i);
                     CheckBox cv =(CheckBox)v.findViewById(R.id.checktitle);
                     if(cv.isChecked())
                     {
                         // cv.setChecked(false);
                         //listview.setItemChecked(i, false);
                           toggle(cv);

                     } 
```

**在切换方法中**

```
 public void toggle(CheckBox v)
         {
                 if (v.isChecked())
                 {
                     v.setChecked(false);
                 }
                 else
                 {
                     v.setChecked(true);
                 }
         } 
```

**适配器**

```
public class customAdapter extends ArrayAdapter {
    View view=null;
    Context context;
    ViewHolder holder;    boolean checkAll_flag = false;
    boolean checkItem_flag = false;
    List<CustomDishMenus> dcates=new ArrayList<CustomDishMenus>();
    public customAdapter(Context context, int textViewResourceId, List objects) {
        super(context, textViewResourceId, objects);
        // TODO Auto-generated constructor stub
        this.context=context;
        this.dcates=objects;
    }
     static class ViewHolder {
            protected TextView text;
            protected CheckBox checkbox;
        }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
         holder = new ViewHolder();
            final CustomDishMenus ords=dcates.get(position);
                LayoutInflater layoutInflater=(LayoutInflater) getContext().getSystemService(getContext().LAYOUT_INFLATER_SERVICE);
                convertView=layoutInflater.inflate(R.layout.tablayout,parent, false);
                if(convertView!=null){

                    holder.text = (TextView) convertView.findViewById(R.id.title);
                    holder.checkbox = (CheckBox) convertView.findViewById(R.id.checktitle);

                    holder.checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                            // TODO Auto-generated method stub
                              int getPosition = (Integer) buttonView.getTag();  
                                dcates.get(getPosition).setSelected(buttonView.isChecked());

                        }
                    });
                     convertView.setTag(holder);
                        convertView.setTag(R.id.title, holder.text);
                        convertView.setTag(R.id.checktitle, holder.checkbox);
                        } else {
                        holder = (ViewHolder) convertView.getTag();

                }
                  holder.checkbox.setTag(position); // This line is important.

                    holder.text.setText(dcates.get(position).getDishName());
                    holder.checkbox.setChecked(dcates.get(position).isSelected());

                return convertView;
    } 
```

这段代码的问题是当我向下滚动时我得到6个孩子我再次得到6个孩子..当向上或向下滚动时，孩子是listview中的项目，显示在视图中，因此显示的listview项目是listview的孩子。 .所以我希望所有孩子都取消选中，但是使用此代码无法正常工作请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T21:03:33.643

这是取消选中 ViewGroup 的所有子 CheckBox 的简单方法（ListView 扩展 ViewGroup）。您只需要将 ListView 传递给此方法。

```
private void uncheckAllChildrenCascade(ViewGroup vg) {
    for (int i = 0; i < vg.getChildCount(); i++) {
        View v = vg.getChildAt(i);
        if (v instanceof CheckBox) {
            ((CheckBox) v).setChecked(false);
        } else if (v instanceof ViewGroup) {
            uncheckAllChildrenCascade((ViewGroup) v);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:48:10.697

一个问题是你在哪里做：

`CheckBox cv =(CheckBox)v.findViewById(R.id.checktitle)`;

您试图获取与“v”关联的复选框，但`findViewById()`没有这样做。相反，您只需从 XML 创建一个新复选框。

我认为您想要做的是修改基础数据“dcates”，然后调用`notifyDataSetChanged()`您的适配器。

就像是：

```
for (CustomDishMenus menu : dcates)
    menu.setSelected(false);

listview.getAdapter().notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:13:39.553

在您的适配器（customAdapter）中包含一个方法调用`setAllSelected();`

```
setAllSelected () {
    for (int i = 0; i < this.getCount(); i++) {
        AdapterItem info = this.getItem(i);

        // info (add a boolean in you adapter item to store the state of checkbox i.e. isSelected and mark it to true. )
    }
    notifyDataSetChanged();
} 
```

在你的`getView()`. 根据变量（isSelected）的状态，选中或取消选中复选框。

希望这可以帮助。

# c# - ASP.net 通用处理程序

> ID：14509564
> 
> 赞同：0
> 
> 时间：2013-01-24T19:52:40.437
> 
> 标签：c#, asp.net, generic-handler

我正在尝试将一些参数传递给通用处理程序并在响应时获取和图像。

我在我的网页上使用此代码作为图像：

```
<a href="#"><img id="slide-3" src="~/Image_Handler.ashx?SL=/SL1&US=Kim&ID=1 alt="Tulips" title="Tulips" /></a> 
```

当我的页面加载时，图像不会加载。但是，我在我的网页上放了一个按钮，并为 PostBackUrl 提供了相同的 url，它会打开一个新窗口并显示完全正常的图片。

这是我的 Image_handler 代码（通用处理程序）

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Web;

namespace WEB_2._0_Programing.Private
{
/// <summary>
/// Summary description for Image_Handler
/// </summary>
public class Image_Handler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {

        String id;
        String Slideshow = context.Request.QueryString["SL"];
        String Username = context.Request.QueryString["US"];
        id = context.Request.QueryString["ID"];

        if (Slideshow != null)
        {
            SqlConnection connection = new SqlConnection("Data Source=KAMY-WIN7\\SQLEXPRESS;Initial Catalog=MainDataBase;Integrated Security=True;Pooling=False");

            String query = "SELECT identity(int,1,1) ID,Image into #temp FROM UserImage where (Username = @username) AND (Slideshow = @slideshow) SELECT * FROM #temp WHERE (ID=@id)";
            SqlCommand command = new SqlCommand(query, connection);
            command.Parameters.AddWithValue("@username", Username);
            command.Parameters.AddWithValue("@slideshow", Slideshow);
            command.Parameters.Add("@id", SqlDbType.Int).Value = int.Parse(id);
            //command.Parameters.Add("@id", SqlDbType.Int).Value = id;
            connection.Open();
            SqlDataReader dReader = command.ExecuteReader();
            dReader.Read();
            context.Response.ContentType = "image/jpeg";
            Byte[] Image = (Byte[])dReader["Image"];
            context.Response.BinaryWrite(Image);
            dReader.Close();
            connection.Close();
        }
        context.Response.Write("NOT OK!!!");

    }       

    public bool IsReusable
    {
        get
        {
            return true;
        }
    }
} 
```

}

这部分的错误是页面加载 context.Request.QueryString[]; 不返回任何值，但是当我使用按钮并提供相同的 src 时，它工作正常。请帮助我不知道是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:55:39.900

两件事情：

1.  您的 src 属性没有结束`"`
2.  您需要对特殊字符进行[url 编码](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)，例如`/`在查询字符串中。

例如：

```
<img src='~/Image_Handler.ashx?SL=<%= HttpUtility.UrlEncode("/SL1") %>&US=Kim&ID=1' /> 
```

# ruby-on-rails - ruby on rails：如何限制嵌套路由？

> ID：14509565
> 
> 赞同：0
> 
> 时间：2013-01-24T19:52:43.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我有一个公司模型，一个公司可以有很多位置，所以我的路线设置如下：

```
resources :companies do
  resources :locations
end 
```

我希望能够在路线上为公司添加一个新位置`companies/:company_id/locations/new`，但是如果我去一家不存在的公司，这个页面仍然可以访问，就像这样`companies/99999999/locations/new`。

如何使该页面仅在公司 ID 存在时才可访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:01:26.207

您可以将 before_filter 添加到您的位置控制器（无论如何，您都需要检索母公司以获取嵌套表单和链接）：

```
class LocationsController < ApplicationController

  before_filter :get_company    

  def get_company
    @company = Company.find(params[:company_id])
  end   

end 
```

这样，在错误的公司 ID 下导航到 Location 路由将产生典型的 id not found 异常，如果它不是嵌套资源，您通常会看到该异常。通常，您会在应用程序控制器中处理此异常并重定向到 404 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:03:03.323

不确定您是否想要在 routes.rb 本身中定义某些内容，但我只是在控制器的操作中验证公司的存在（并呈现 404，如果这是您想要的，如[如何重定向到 404 中所述铁轨？](https://stackoverflow.com/questions/2385799/how-to-redirect-to-a-404-in-rails)）

# php - ZF 1.12提交不成功后如何装饰表格

> ID：14509567
> 
> 赞同：2
> 
> 时间：2013-01-24T19:52:56.487
> 
> 标签：php, zend-framework, decorator, zend-decorators

我真的是 ZF 的新手，在用户提交表单（例如登录表单）后，谷歌搜索了一下以找到一种装饰登录表单的方法。在提交和处理后，如果它无效，我想在填写不正确的字段上方显示 twitter bootstraps 警报。

1.  我是否应该创建一个控制表单的模型，以及表单是否`!isValid()`应该从那里生成表单并设置额外的装饰器？
2.  我应该在渲染视图和装饰后设置会话中的所有内容并清除它们的变量吗？
3.  还是我应该使用其他一些神秘的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:12:05.593

这些是我用来显示错误消息的方法：

我在所有字段上都保留了标准错误装饰器未更改以显示特定消息（即：无效电子邮件）

我还使用`flashMessenger`来显示一般消息，例如

```
Errors occured while validating the form:
* Email
* ... 
```

这`flashMessenger`是一个具有等效视图助手的动作助手。这`flashMessenger` 是一个单跳会话消息，一旦显示就会自动从会话中清除

更多关于[flashMessenger](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:25:24.473

我倾向于将错误与它们的元素保持一致。但是，像你一样，我也更喜欢在顶部有一个表单级别的警报，向用户表明有一些东西需要修复。

为此，我通常在我的控制器中添加一个标志：

```
if ($form->isValid($postData)){
   // write to db and redirect
} else {
    $this->view->hasFormError = true;
}
$this->view->form = $form; 
```

然后在视图脚本中：

```
<?php if ($this->hasFormError): ?>
<!-- my alert box, using Bootstrap or whatever -->
<?php endif; ?>
<?= $this->form ?> 
```

几乎可以肯定，将`FormError`装饰器添加到表单本身会更巧妙。它检查是否有任何表单元素有错误，然后呈现警报。然后你的控制器和你的视图脚本变得更精简：

控制器：

```
if ($form->isValid($postData)){
   // write to db and redirect
}
$this->view->form = $form; 
```

查看脚本：

```
<?= $this->form ?> 
```

但是当面对定义另一个装饰器，设置装饰器前缀，然后将其添加到表单时，我承认我通常会使用 in-controller 标志。

[原则上，我认为应用装饰器的整个想法应该是视图层的一部分，而不是表单定义本身的一部分。在这种理念下，​​我会保持表单未装饰，直到我们点击视图脚本，此时我们可以应用一些添加所有装饰器的视图助手。这是 - 从某种修改的意义上说 - ZF2 所做的。但我从来没有时间把这条路走得太深。]

# active-directory - LDAP 查询以查看用户是否是特定组的成员

> ID：14509569
> 
> 赞同：0
> 
> 时间：2013-01-24T19:52:57.130
> 
> 标签：active-directory, ldap

假设我有一个用户 (User1) 和一个按排名顺序排列的组列表 (Group1, Group2, Group3 ...)。我试图找出使用 LDAP 查询来确定特定用户所属的（有序）列表中第一个组的最有效方法。这些查询将使用“LDAP_MATCHING_RULE_IN_CHAIN”规则，以便服务器也知道在子组中查找匹配项。除了可能使这些查询的处理速度变慢之外，这并没有真正改变，这使得性能变得更加重要。

一种选择是获取用户所属的所有组的列表，然后遍历列表以查找第一个匹配项。这很好用，但我担心 LDAP 服务器会花费所有这些时间来生成一个巨大的组列表，而我们实际上可能只需要列表中的第一项。

另一种选择是进行一系列 LDAP 查询，一次检查用户是否是我们列表中每个组的成员。这似乎效率不高，因为查询的数量可能与列表中的组一样多。

我想做的是进行一个查询，在其中向 LDAP 服务器提供组列表，它会返回用户所属的第一个组，或者至少它告诉我列出的组中的哪个组用户是其中的一员。我不知道这是否真的可能。我当然可以将一组术语组合在一起，以查看用户是否是我列出的*任何*组的成员，但我不知道是否可以构造一个查询，以便它告诉我*哪些*术语生成了匹配。

有任何想法吗？这可能吗？谢谢！

# android - 从 sqlite 检索数据：NullPointerException

> ID：14509572
> 
> 赞同：0
> 
> 时间：2013-01-24T19:53:08.053
> 
> 标签：android, sqlite

我想从数据库中检索数据并将其显示在LOG上，这里是我的代码：

```
 String dd = "1/23/2013";

  String sp = "Sky Storm";

 Log.d("Checking",db.getMeterNUmber2(dd,sp).toString()); 
```

并且`getMeterNUmber2`在 DBAdapter 中，我正在寻找的数据在数据库中，所以我只想检索它。

我的数据库适配器：

```
public ArrayList<String> getMeterNUmber2(String date , String Vname) throws SQLException {    

    String[] whereArgs = new String[]{date,Vname}; 

    Cursor mcursor = db.rawQuery("SELECT MeterNumber FROM " + SCAN_TABLE + " WHERE  Date = ? AND VendorName = ? ",whereArgs);

    ArrayList<String> results = new ArrayList<String>();
    while (mcursor.moveToNext()) {
        results.add(mcursor.getString(0));
    }

    return results;

} 
```

我在 logcat 中遇到错误：

```
01-24 19:57:13.590: E/AndroidRuntime(11662): FATAL EXCEPTION: main
01-24 19:57:13.590: E/AndroidRuntime(11662): java.lang.NullPointerException
01-24 19:57:13.590: E/AndroidRuntime(11662):    at scann.barcode.scan.DBAdapter.getMeterNUmber2(DBAdapter.java:303)
01-24 19:57:13.590: E/AndroidRuntime(11662):    at scann.barcode.scan.Result$1.onClick(Result.java:104) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:39:24.123

我和你有同样的问题，当我看你的日志猫时

```
 java.lang.NullPointerException , 
```

它返回 null 值，这意味着它不会读入您的数据库，

请检查您是否打开了数据库，例如：`db.open() and close`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:17:45.613

我认为您不能只登录`ArrayList<String>`从返回的 logcat，`getMeterNUmber2`因为它是一个列表。您需要首先从那里检索单个字符串值：[将 ArrayList 转换为 string 的最佳方法](https://stackoverflow.com/questions/599161/best-way-to-convert-an-arraylist-to-a-string)。

# php - Highrise API - 获取过去 X 天的电子邮件

> ID：14509573
> 
> 赞同：0
> 
> 时间：2013-01-24T19:53:13.757
> 
> 标签：php, api, highrise

有没有人遇到过如何在 X 天前的 Highrise 应用程序中查找电子邮件列表的示例？

我们有一个庞大的客户数据库和我想到的解决方案：

*   让所有人
*   获取他们每个人的电子邮件
*   解析结果/按日期过滤

似乎效率太低

也许获取最后一个电子邮件 ID 并返回到 -X 天会更好？那么是否可以找到最后一个电子邮件ID？

我不在乎使用哪个 API 包装器，但一直在玩[https://github.com/AppSaloon/Highrise-PHP-Api](https://github.com/AppSaloon/Highrise-PHP-Api)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:10:08.610

这很棘手，但一个想法是使用录音，请参阅...

[https://github.com/37signals/highrise-api/blob/master/sections/recordings.md](https://github.com/37signals/highrise-api/blob/master/sections/recordings.md)

...因此，您可以使用此功能返回最近的活动，只需提取电子邮件并忽略注释和评论。

我使用[您提到的相同包装器](https://github.com/AppSaloon/Highrise-PHP-Api)，如果 PHP 是您的通用语，这可能是最好的路线。也就是说，我认为它不支持 Recordings API 功能，尽管将它添加到功能集中很容易。

# asp.net - ASP .Net 菜单项垂直间距

> ID：14509580
> 
> 赞同：2
> 
> 时间：2013-01-24T19:53:44.610
> 
> 标签：asp.net, css, menu

我在 ASP.Net 页面上有一个菜单。在 Firefox 中，它可以正确呈现。在 IE 中，下拉菜单项之间的项目之间有一个小间隙，您可以在其中看到后面的页面。我认为我没有设置任何填充或边距，因为它在 Firefox 中呈现良好。但我认为这是某种 CSS 问题：

```
<asp:Menu ID="NavigationMenu"  runat="server" CssClass="menu" EnableViewState="true" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/ProviderPages/Home.aspx" Text="Home" />
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About" />
                    <asp:MenuItem NavigateUrl="~/ProviderPages/ProviderTemp.aspx" Text="Providers">
                        <asp:MenuItem NavigateUrl="~/ProviderPages/ProviderAccess.aspx" Text="Provider Access" />
                        <asp:MenuItem NavigateUrl="~/ProviderPages/ProviderTempAdd.aspx" Text="Provider Add" />
                    </asp:MenuItem>
                    <asp:MenuItem NavigateUrl="~/ProviderPages/AgencyTemp.aspx" Text="Agencies">
                        <asp:MenuItem NavigateUrl="~/ProviderPages/AgencyAccess.aspx" Text="Agency Access" />
                        <asp:MenuItem NavigateUrl="~/ProviderPages/AgencyTempAdd.aspx" Text="Agency Add" />
                    </asp:MenuItem>
                    <asp:MenuItem NavigateUrl="~/SystemPages/Maintenance.aspx" Text="Maintenance">
                        <asp:MenuItem NavigateUrl="~/Account/ChangePassword.aspx" Text="Change Password" />
                        <asp:MenuItem NavigateUrl="~/SystemPages/Email.aspx" Text="Send Email" />
                        <asp:MenuItem NavigateUrl="~/SystemPages/UserManagement.aspx" Text="Manage User Accounts" />
                        <asp:MenuItem NavigateUrl="~/SystemPages/AgencyEdits.aspx" Text="Review Agency Edits" />
                        <asp:MenuItem NavigateUrl="~/SystemPages/ProviderEdits.aspx" Text="Review Provider Edits" />
                        <asp:MenuItem NavigateUrl="~/SystemPages/ErrorLog.aspx" Text="Error Log" />
                    </asp:MenuItem>

                </Items>
            </asp:Menu> 
```

风格是这样的：

```
div.menu
{
color: White;
font-family: 'Tahoma', 'Geneva', sans-serif;
font-size: 12px;
font-weight: 500;
padding:3px 0px 3px 0px;
text-decoration: none;
float: right;

}

div.menu ul
{    
list-style: none;
margin: 0px;
width: auto;
padding: 5px 8px 4px 8px;
text-transform: uppercase;
}

div.menu ul li a, div.menu ul li a:visited
{
background-image: url("Images/bg_nav.png");
background-repeat:repeat-y;
border-style:none;
color: #dde4ec;
display: block;
line-height: 1.35em;
padding: 5px 5px;
text-decoration: none;
white-space: nowrap;
margin: 0px 5px 0px 5px;
}

div.menu ul li a:hover
{
background-image: url("Images/bg_nav.png");
background-repeat:repeat-y;
color: White;
text-decoration: none;
}

div.menu ul li a:active
{
background-image:  url("Images/bg_nav.png");
background-repeat:repeat-y;
color: White;
text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:57:49.470

尝试删除**div.menu ul li a, div.menu ul li a:visited**样式的所有边距。

就放

```
margin: 0; 
```

代替

```
margin: 0px 5px 0px 5px; 
```

# linq - 是否通过 linq 中的第三个表连接两个表，使用属性等同于将所有表连接在一起？

> ID：14509582
> 
> 赞同：1
> 
> 时间：2013-01-24T19:53:51.650
> 
> 标签：linq, linq-to-sql

我在 C# 中针对数据库实体执行了一堆 linq 查询，过度简化了它们的形式：

```
from f in Foo
join v in Var on f.FooVar.vId equals v.Id 
```

对比

```
from f in Foo
join fv in FooVar on f.FooVarId equals fv.Id
join v in Var on fv.vId equals v.Id 
```

我相信它们是等价的。

选择其中一个是否有任何性能或其他考虑？例如，当 FK 是可空类型时？

PS不确定标题是否准确表达

# java - Android PHP 对 MySQL 的请求

> ID：14509585
> 
> 赞同：0
> 
> 时间：2013-01-24T19:54:03.373
> 
> 标签：java, php, android, sql

我正在尝试使用 android 向我的服务器发送 http 请求。服务器上有 PHP 脚本来添加/删除/编辑 MySQL 数据库中的项目。我不知道我是否连接到服务器或执行代码时发生了什么，我得到 Error parsing data org.json.JSONException: Value

我对 PHP 非常陌生，并且一直在关注本教程以获取指南，“ [http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/) ”但我我很坚持。

PHP 添加饮料

```
<?php

/*
 * Following code will create a new product row
 * All product details are read from HTTP Post Request
 */

// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['name']) && isset($_POST['price']) && isset($_POST['quantity'])) {

$name = $_POST['name'];
$price = $_POST['price'];
$quantity = $_POST['quantity'];

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// mysql inserting a new row
$result = mysql_query("INSERT INTO drinks(name, price, quantity) VALUES('$name', '$price', '$quantity')");

// check if row inserted or not
if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "Product successfully created.";

    // echoing JSON response
    echo json_encode($response);
} else {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Oops! An error occurred.";

    // echoing JSON response
    echo json_encode($response);
}
} else {
// required field is missing
$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
}?> 
```

新饮品活动：

```
public class NewDrinkActivity extends Activity {

// Progress Dialog
private ProgressDialog pDialog;

JSONParser jsonParser = new JSONParser();
EditText inputName;
EditText inputPrice;
EditText inputQuantity;

// url to create new Drink
private static String url_create_Drink =    "http://jjohnson.bugs3.com/android_connect/create_drink.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_drink);

    // Edit Text
    inputName = (EditText) findViewById(R.id.edtName);
    inputPrice = (EditText) findViewById(R.id.edtPrice);
    inputQuantity = (EditText) findViewById(R.id.edtQuantity);

    // Create button
    Button btnAddDrink = (Button) findViewById(R.id.btnAdd);

    // button click event
    btnAddDrink.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // creating new Drink in background thread
            new CreateNewDrink().execute();
        }
    });
}

/**
 * Background Async Task to Create new Drink
 * */
class CreateNewDrink extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(NewDrinkActivity.this);
        pDialog.setMessage("Creating Drink..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Creating Drink
     * */
    protected String doInBackground(String... args) {
        String name = inputName.getText().toString();
        String price = inputPrice.getText().toString();
        String quantity = inputQuantity.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("price", price));
        params.add(new BasicNameValuePair("quantity", quantity));

        // getting JSON Object
        // Note that create Drink url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_Drink,
                "POST", params);

        // check log cat fro response
        Log.d("Create Response", json.toString());

        // check for success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully created Drink
                Intent i = new Intent(getApplicationContext(), StockActivity.class);
                startActivity(i);

                // closing this screen
                finish();
            } else {
                // failed to create Drink
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

}
} 
```

JSON解析器：

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

如果有帮助，我将使用 ServerFree.com 来托管我的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:23:52.497

这就是我认为正在发生的事情......

你发出请求，它被发送到服务器，被处理（我看到 PHP 没有出错），你收到一个如下所示的响应：

> {"success":0,"message":"必填字段缺失"}

实际上，您从网络服务器收到以下信息：

```
{"success":0,"message":"Required field(s) is missing"}<!-- www.serversfree.com Analytics Code -->
<script src="http://www.serversfree.com"></script><noscript><a title="Free hosting servers" href="http://www.serversfree.com">Free servers</a><a title="Free websites hosting server" href="http://www.serversfree.com">Free websites hosting server</a><a title="Free hosting server features" href="http://www.serversfree.com/server-features/">Free server features</a><a title="Free hosting" href="http://www.bugs3.com">Free hosting</a></noscript>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24425628-3']);
  _gaq.push(['_setDomainName', window.location.host]);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Of Analytics Code --> 
```

因此，尽管您从网站以可视文本形式获得了有效的 JSON，但您正在使用的网络主机正在添加他们自己的 javascript 以推送他们的免费服务。

结果，您的 android 中的这些行失败：

```
// getting JSON Object
// Note that create Drink url accepts POST method
JSONObject json = jsonParser.makeHttpRequest(url_create_Drink,"POST", params); 
```

所以在我看来，你有三个选择。

1) 找到一个不会对您的回复执行此操作的新虚拟主机。您可以尝试在本地机器上设置 WAMP，这并不难。在您了解有关开发的更多信息之前，它将对您的测试更加安全。例如，我们可以通过 SQL 注入攻击您的数据库。

2) 与网站合作，看看是否有办法不发送该代码

3）在过滤响应的那部分的android调用之前编写一些代码。您需要创建一个 BufferedReader 等，以便接收来自网页的响应。

# css - 用于移动设备的 CSS 媒体查询导入

> ID：14509586
> 
> 赞同：1
> 
> 时间：2013-01-24T19:54:06.640
> 
> 标签：css, responsive-design, media-queries

我想我在这里很困惑。在响应式设计中有点绿色，我试图根据网站的查看宽度导入 2 个样式表中的 1 个。

但是，当使用以下内容时，在 Firebug 中查看时两者似乎都下拉了。

它是否正确？我究竟做错了什么？

我想要实现的是，如果浏览器宽度小于 940px，则拉 responsive.css，如果大于，拉 full.css

我已经包含了 respond.js 库`https://github.com/scottjehl/Respond`

```
@import url("/inc/Styles/full.css") (min-width: 940px);
@import url("/inc/Styles/responsive.css") (max-width: 940px) and (min-width: 100px); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T00:25:12.997

是的，这是正确的，不，我可以说你没有做错任何事情。我认为你想多了（而且你真的不需要第二次导入时的最小宽度）。

如果您还没有，请阅读 Ethan Marcotte 的[响应式网页设计](http://www.alistapart.com/articles/responsive-web-design/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T03:22:50.060

分离的 css 文件（由@import 调用）总是由浏览器自然加载。媒体查询无法解决该问题。为了能够只提取相关的 css 文件，您需要使用的不仅仅是 CSS。

您可以在服务器或客户端站点上处理该问题。例如，您可以使用 .NET 的 51degrees 库

或者您可以使用 javascript 窗口大小检测器来获取窗口宽度值并通过 AJAX 调用特定的 css 或通过 JS 创建链接元素。

基本上;

```
$(function(){ 
          if($(window).width() > 980){ 
              // your code etc.
          } else{ 
              // your code etc.
          }  
     }); 
```

另请查看此处 [如何应用使用 jQuery 动态加载的内联和/或外部 CSS](https://stackoverflow.com/questions/805384/how-to-apply-inline-and-or-external-css-loaded-dynamically-with-jquery)

# database-design - 缓慢变化维度的 MDX 建模

> ID：14509587
> 
> 赞同：0
> 
> 时间：2013-01-24T19:54:07.637
> 
> 标签：database-design, mdx

我有一个 MDX Dimension ，其主要层次结构具有以下级别：

1.  **产品线**关键字：PLid
2.  **利润中心**键：PCid
3.  **团队** 密钥：TEid
4.  **员工**（绑定到我的事实表的级别）

这个工作正常，但用户想要层次结构的灵活上部，每年都不同

1.  **年**
2.  **生产线**
3.  **利润中心**
4.  **团队**
5.  **员工**

属性关系“产品线”->“利润中心”每年变化很大，利润中心->团队->员工保持不变。

我遇到的问题是，事实往往与这个新层次结构的多个元素相关联。而且我发现元素没有按照这个层次结构正确调度，我在所有级别都有全局总数。

我有一张给出关联的表格（年份、PLid、PCid）

我不能做的是在这个新层次结构上强制绑定事实表的元素，因为创建 year * nb 员工会太多。头部可以随意更换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:37:50.980

这就是多对多维度关系起作用的地方。

我在关联表上定义了一个【Yearly Association】维度，也将这个维度作为事实表，定期绑定在Employee维度上，并定义了【Yearly Association】与其他事实表之间的多对多关系关联.

# class - Skype4Com 获取好友联系人？

> ID：14509588
> 
> 赞同：1
> 
> 时间：2013-01-24T19:54:08.073
> 
> 标签：class, friend, skype4com

我在 C# 中有以下代码，将项目“朋友联系人”添加到 checkListItem UI 控件但问题是 Friend 类中的 DisplayName 和 FullName 属性之间的区别是什么？？？？请回答我 ：）

foreach（skype.Friends 中的用户联系人）{

```
 contactItem = new ContactItem(contact.Handle,contact.Handle + " is a " + contact.DisplayName);

  ContactsList.Items.Add(contactItem);

  contactItem = new ContactItem(contact.Handle, contact.Handle + " is a " + contact.FullName);

  ContactsList.Items.Add(contactItem); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:51:18.403

简而言之：

`User.FullName`- 是用户在其个人资料中输入的文本

`User.DisplayName`- 是您联系人列表中的文本，当您选择重命名联系人时会填充。

* * *

来自[http://dev.skype.com/desktop-api-reference#OBJECTS](http://dev.skype.com/desktop-api-reference#OBJECTS)的引用：

> `FULLNAME`– 用户的全名，例如：`USER pamela FULLNAME Jane Doe`.
> 
> `DISPLAYNAME`– 默认情况下，此属性为空。如果将值分配给此属性
> ，`SET <skypename> DISPLAYNAME <value>`则该值将显示在 Skype UI 中，而不是用户的`FULLNAME`

# css - 选择具有特定子元素的元素？

> ID：14509590
> 
> 赞同：6
> 
> 时间：2013-01-24T19:54:12.240
> 
> 标签：css

如果我想在这样的列表上做一个 CSS 选择器：

```
<ul>
    <li></li>
    <li><a></a></li>
    <li><a></a></li>
    <li><a></a></li>
</ul> 
```

我只想对包含标签`li:hover`的 s 产生影响，有没有办法在 CSS 中指定它？`li``<a>``if li:hover contains <a> then li:hover effect = X?`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:56:12.143

不，CSS 不允许您根据其后代选择元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:56:14.403

您可以在 JQUERY 中执行此操作：

```
$("a").parent("li").css("color","#923123"); 
```

对于您的要求，它将是这样的：

```
$("li").mouseover(function(){

   if ($(this).is(':parent'))
   {
       //this <li> has a child, supposed to be <a>
   }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:01:26.257

根据您的最终目标和效果，您可以将样式应用于锚标记 - 然后将不适用于没有一个的列表项。

或者，虽然您不能直接在 CSS 中执行此操作，但如果列表是动态的并且您可以在生成点识别包含链接的列表项，您可以根据它们的状态和样式相应地应用类。

如果它不是动态列表，只需手动添加类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:49:16.030

为此，您需要一个 CSS4 父选择器，但现在当然不支持它。

```
$li:hover a { ... } 
```

如果里面的标签无关紧要，您可以使用：

```
li:hover {border:1px solid red}
li:empty:hover {border:0} 
```

:empty 选择器在 ie7 中不受支持。

[http://jsfiddle.net/aD6Ws/](http://jsfiddle.net/aD6Ws/)

Jquery替代方案是：

```
$("li:has('a')").hover(function() { ... },function(){ ...  }) 
```

# java - 如何：BitmapRegionDecoder 使用 String pathName 到可绘制目录

> ID：14509591
> 
> 赞同：1
> 
> 时间：2013-01-24T19:54:14.673
> 
> 标签：java, android, bitmap, drawable, pathname

好的，所以我正在制作一个应用程序来在 Android 上为一堂课玩二十一点，并在视觉上显示卡片。我想使用 BitmapRegionDecoder 来最有效地加载我的卡片，这些卡片都显示在一个文件中。这是我的代码：

```
BitmapRegionDecoder decoder = BitmapRegionDecoder.newInstance("res/drawable/cards.png", false);
Bitmap img = decoder.decodeRegion(new Rect(num, suit, num + 1, suit + 1), null); 
```

由于我收到的所有错误消息，我知道“res/drawable/cards.png”不是提供路径的正确方法，但我不知道应该使用什么来代替路径。请帮忙，谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-21T10:41:34.423

改用[newInstance (InputStream is, boolean isShareable)](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html#newInstance%28java.io.InputStream,%20boolean%29)方法：

```
InputStream is = getResources().openRawResource(R.drawable.cards)
BitmapRegionDecoder regionDecoder = BitmapRegionDecoder.newInstance(is, false); 
```

# entity-framework - 删除导航属性不会更新数据库

> ID：14509597
> 
> 赞同：6
> 
> 时间：2013-01-24T19:54:31.957
> 
> 标签：entity-framework, entity-framework-5

我有 2 个 POCO 课程（如下）并希望删除他们的两个记录之间的链接。根据[这个](http://msdn.microsoft.com/en-us/data/jj713564.aspx)EF 5.0 应该能够在不加载 User 类的情况下处理删除，如下所示：

```
context.Computers.Find("test").User = null;
context.SaveChanges(); 
```

这不起作用，但使用 .net 4 批准的方法它可以工作：

```
en = context.Computers.Find("test");
context.Entry(en).Reference(e => e.User).Load();
en.User = null;
context.SaveChanges(); 
```

我的 EF 参考是 EntityFramework.dll 版本 5.0.0.0。我在这里遗漏了一些明显的东西吗？

以下是课程：

```
public class Computer
{
    public string Id { get; set; }
    public Nullable<int> UserId { get; set; }
    public virtual User User { get; set; }
}
public class User
{
    public int Id { get; set; }
    public virtual ICollection<Computer> Computers { get; set; }
} 
```

编辑：这是上述链接文章中似乎与我看到的功能不一致的特定行：

要删除关系，请将导航属性设置为 null。如果您使用的是基于 .NET 4.0 的实体框架，则需要在将其设置为 null 之前加载相关端。例如：

```
context.Entry(course).Reference(c => c.Department).Load();
course.Department = null; 
```

从基于 .NET 4.5 的 Entity Framework 5.0 开始，您可以将关系设置为 null 而无需加载相关端。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T05:35:37.907

您看不到被删除的关系，因为您的代理不是更改跟踪代理，而只是延迟加载代理。要使其成为更改跟踪代理，您需要将所有属性设置为虚拟。请在下面找到一个在不先加载导航属性的情况下重置导航属性的示例。现在的问题是是否使用更改跟踪代理 - 请参阅[这篇文章](http://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/)，因为它包含对此的有趣讨论。

```
public class Computer
{
    public virtual string Id { get; set; }
    public virtual Nullable<int> UserId { get; set; }
    public virtual User User { get; set; }
}

public class User
{
    public int Id { get; set; }
    public virtual ICollection<Computer> Computers { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<Computer> Computers { get; set; }
    public DbSet<User> Users { get; set; } 
}

class Program
{
    static void Main(string[] args)
    {
        using (var ctx = new MyContext())
        {
            if (!ctx.Computers.Any())
            {
                var user = ctx.Users.Add(new User());
                ctx.Computers.Add(new Computer() { Id = "MyComputer", User = user });
                ctx.SaveChanges();
            }
        }

        using (var ctx = new MyContext())
        {
            var computer = ctx.Computers.Single();
            computer.User = null;
            ctx.SaveChanges();
        }

        using (var ctx = new MyContext())
        {
            var computer = ctx.Computers.Include("User").Single();
            Console.WriteLine(computer.User == null);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:21:36.420

**编辑：**

我刚刚通读了评论（我可能应该先阅读它们，但我已经写了这个，所以我会留下它），看到你们得出了一个非常相似的结论，希望这仍然有助于解释一些原因。另外在旁注中，我认为您最好使用 FK id 属性来使关系为空（如果它可用），因为这意味着您根本不必实际加载远程实体。

* * *

嘿，所以我认为这是怎么回事：

你加载你的计算机实体

*   此时用户导航属性为空
*   跟踪图将此实体的初始状态设置为 null

您将 User 属性设置为 null

*   跟踪图仍设置为 null，因此无法区分您的故意 null 和未加载的 null

您保存更改

*   跟踪器检查初始图，发现您尚未加载用户属性并将 null 视为未加载的初始状态
*   没有保留任何更改

如果是这种情况，我认为有两种不同的方法可以让 EF 将其检测为更改（并因此删除您的关系）：

1.  *在将关系设置为 null之前*强制加载用户，您可以通过在启用延迟加载时访问它来执行此操作，或者在查询中使用 .Include 语法。
2.  将 UserId 属性设置为 null

第二个更容易，并且应该可以工作，因为用户 ID 属性不在远程实体上。EF 会将 null nav 属性或 null FK 视为更改并执行删除。

# android - Intent Flag 中是否有类似 Clear Bottom 的东西？

> ID：14509600
> 
> 赞同：0
> 
> 时间：2013-01-24T19:54:37.657
> 
> 标签：android

活动 A 是我的应用程序的主页。

```
A -> B -> C 
```

C 以 FLAG_ACTIVITY_CLEAR_TOP 开头 A 以正确获取主页 A。这工作正常，堆栈简单地变成，

```
A 
```

但是可以使用通知管理器直接调用 B。

```
B -> C -> A 
```

因此，即使我在 C 中启动 A 时使用 FLAG_ACTIVITY_CLEAR_TOP 标志，B 和 C 在 A（主页）之前的堆栈中仍然存在，并且在从 A 按下返回按钮时，它会返回到 B 和 C。

我不想要这种行为。在从 C 开始活动 A 时，堆栈应该只有 A。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:06:09.050

如果你不关心导航，你可以将 B 和 C 都定义为[android:noHistory](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)

顺便提一句。我在某个时候问了一些相关的问题。您可能会感兴趣地看一下它： [如何始终从 Android 上的启动活动开始？](https://stackoverflow.com/questions/10451171/how-to-always-start-from-a-startup-activity-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:17:19.720

我建议您从通知开始`ActivityA`（而不是`ActivityB`），因为您显然希望该活动始终是您任务中的根活动。为`Intent`传递给`Notification`. 然后，在`onCreate()`of 中`ActivityA`，您应该检查是否存在额外的内容，如果存在，请立即开始`ActivityB`。这应该为您提供所需的导航行为。

# ruby-on-rails - 无法在导轨上安装带有 ruby 的 spork

> ID：14509601
> 
> 赞同：0
> 
> 时间：2013-01-24T19:54:50.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, spork

我正在关注 micheal hartl 的 ruby​​ on rails 教程，但我被困在他安装 spork 进行自动测试的地方。

我安装了 spork，它显示已成功安装，然后我尝试在终端中运行命令（spork），这是我得到的错误。请问有什么线索吗？不知道，但 spork 的 github repo 似乎缺乏安装它的方向以及人们面临的常见问题。

PS :: 我已经跑了 spork --bootstrap

```
Using RSpec
/Users/Arjo/rails_testprojects/proto1/spec/spec_helper.rb has not been bootstrapped.  Run       spork --bootstrap to do so.
Preloading Rails environment
no such file to load -- spork/forker.rb (LoadError)
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/gems/activesupport-   3.2.8/lib/active_support/dependencies.rb:251:in `require'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/gems/spork-0.9.2/lib/spork/server.rb:3:in `<top (required)>'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/gems/spork-0.9.2/lib/spork/runner.rb:75:in `run'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/gems/spork-0.9.2/lib/spork/runner.rb:10:in `run'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/gems/spork-0.9.2/bin/spork:10:in `<top (required)>'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/bin/spork:19:in `load'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/bin/spork:19:in `<main>'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/bin/ruby_noexec_wrapper:14:in `eval'
/Users/Arjo/.rvm/gems/ruby-1.9.2-p320@twitclone/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T09:45:16.660

将 gem 'spork' 添加到 Gemfile 中，捆绑安装并重试。

# ios - 遇到此文本统计代码 (RNTextStatistics) 的问题 - 无法识别异常

> ID：14509607
> 
> 赞同：0
> 
> 时间：2013-01-24T19:55:03.813
> 
> 标签：ios, objective-c, text, statistics, nsdictionary

[我从Ryan Nystrom 的 github](http://github.com/rnystrom/RHTextStatistics)下载了这段代码；[它是Dave Child 的 github](http://github.com/DaveChild/Text-Statistics)上 PHP 文本统计项目的 Objective C 端口。有些东西我不认为是Objective C，但我是一个新手程序员，所以我想通过stackoverflow运行它，看看在我与程序员联系之前我是否犯了一些明显的错误。

我的问题是音节计数方法中有一个单词的 NSDictionary 是异常的，但是当我使用它来计算包含这些单词的文本中的音节时，它们不会被视为异常。例如，字典包含“十二”这个词，并指出它应该算作一个音节，但是当我分析“十二”这个词时，它会出现两个音节。

现在还有一个结尾/模式列表，需要计为一个音节，否则可能会计为两个音节（-cious、-cial 等）。当我在该列表中添加“十二”时，它被计为一个音节。因此，该列表似乎运行良好。这只是似乎不起作用的异常字典。

我错过了一些非常明显的东西吗？或者这是与编码员联系并让他知道的情况？

在此先感谢您的帮助。

```
- (NSInteger)syllableCount {
    if ([self isEqualToString:@""]) {
        return 0;
    }

    // remove non-alpha chars
    NSString *strippedString = [self stringByReplacingRegularExpression:@"[^A-Za-z]" withString:@"" options:kNilOptions];
    // use lowercase for brevity w/ options + patterns
    NSString *lowercase = [strippedString lowercaseString];
    // altered in enumerate blocks
    __block NSInteger syllableCount = 0;

//***It's this dictionary whose items seem not to be registering as exceptions:

    // special rules that don't follow syllable matching patterns
    NSDictionary *exceptions = @{
    @"you" : @1,
    @"simile" : @3,
    @"forever" : @3,
    @"shoreline" : @2,
    @"poetry" : @3,
    @"twelve" : @1,
    @"delete" : @2,
    };
    // if one of the preceding words, return special case value
    NSNumber *caught = exceptions[self];
    if (caught) {
        return caught.integerValue;
    }

//***If I put those words in the appropriate places in the following lists, however, they end up being counted correctly.

// These syllables would be counted as two but should be one
NSArray *subSyllables = @[
@"cial",
//...various other things...
@"[aeiouy]rse$",
];

// These syllables would be counted as one but should be two
NSArray *addSyllables = @[
@"ia",
//...various other things...
@"ie(r|st)$"
];

// Single syllable prefixes and suffixes
NSArray *prefixSuffix = @[
@"^un",
//...various other things...
@"ings?$",
];

// remove prefix & suffix, count how many are removed
NSInteger prefixesSuffixesCount = 0;
NSString *strippedPrefixesSuffixes = [NSRegularExpression stringByReplacingOccurenceOfPatterns:prefixSuffix inString:lowercase options:kNilOptions withTemplate:@"" count:&prefixesSuffixesCount];

// removed non-word chars from word
NSString *strippedNonWord = [strippedPrefixesSuffixes stringByReplacingRegularExpression:@"[^a-z]" withString:@"" options:kNilOptions];
NSString *nonVowelPattern = @"[aeiouy]+";
NSError *vowelError = nil;
NSRegularExpression *nonVowelRegex = [[NSRegularExpression alloc] initWithPattern:nonVowelPattern options:kNilOptions error:&vowelError];
NSArray *wordPartsResults = [nonVowelRegex matchesInString:strippedNonWord options:kNilOptions range:NSMakeRange(0, [strippedNonWord length])];

NSMutableArray *wordParts = [NSMutableArray array];
[wordPartsResults enumerateObjectsUsingBlock:^(NSTextCheckingResult *match, NSUInteger idx, BOOL *stop) {
    NSString *substr = [strippedNonWord substringWithRange:match.range];
    if (substr) {
        [wordParts addObject:substr];
    }
}];

__block NSInteger wordPartCount = 0;
[wordParts enumerateObjectsUsingBlock:^(NSString *part, NSUInteger idx, BOOL *stop) {
    if (! [part isEqualToString:@""]) {
        wordPartCount++;
    }
}];

syllableCount = wordPartCount + prefixesSuffixesCount;

// Some syllables do not follow normal rules - check for them
[subSyllables enumerateObjectsUsingBlock:^(NSString *subSyllable, NSUInteger idx, BOOL *stop) {
    NSError *error = nil;
    NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:subSyllable options:kNilOptions error:&error];
    syllableCount -= [regex numberOfMatchesInString:strippedNonWord options:kNilOptions range:NSMakeRange(0, [strippedNonWord length])];
}];

[addSyllables enumerateObjectsUsingBlock:^(NSString *addSyllable, NSUInteger idx, BOOL *stop) {
    NSError *error = nil;
    NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:addSyllable options:kNilOptions error:&error];
    syllableCount += [regex numberOfMatchesInString:strippedNonWord options:kNilOptions range:NSMakeRange(0, [strippedNonWord length])];
}];

syllableCount = syllableCount <= 0 ? 1 : syllableCount;

return syllableCount; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:35:34.020

该方法的其余部分使用字符串的处理形式——即，在去除空格和小写之后——但是`exceptions`字典查找使用的是原始形式，所以除非你的字符串是*精确* 的，`@"twelve"`而不是`@"Twelve"`，，它不会'在那里找不到。`@" twelve "``@"twelve\t"`

使固定：

```
--- a/NSString+RNTextStatistics.m
+++ b/NSString+RNTextStatistics.m
@@ -204,7 +204,7 @@
     @"wandered" : @2
     };
     // if one of the preceding words, return special case value
-    NSNumber *caught = exceptions[self];
+    NSNumber *caught = exceptions[lowercase];
     if (caught) {
         return caught.integerValue;
     } 
```

您可能应该将此作为错误提交给作者。

# asp.net-mvc-4 - 从控制器在新窗口中打开 mvc 视图

> ID：14509616
> 
> 赞同：61
> 
> 时间：2013-01-24T19:55:21.537
> 
> 标签：asp.net-mvc-4

有没有办法在新窗口中从控制器操作打开视图？

```
public ActionResult NewWindow()
{
    // some code
    return View();
} 
```

如何让 NewWindow.cshtml 视图在新的浏览器选项卡中打开？

我知道如何通过视图中的链接来做到这一点 - 这不是问题。有没有人想出办法从*控制器动作*中做到这一点？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-24T19:59:58.600

这不能从控制器本身完成，而是从您的视图中完成。在我看来，您有两个选择：

1.  使用“_blank”属性装饰您的链接（使用 HTML 帮助程序和直接 HMTL 语法的示例）

    *   `@Html.ActionLink("linkText", "Action", new {controller="Controller"}, new {target="_blank"})`
    *   `<a href="@Url.Action("Action", "Controller")" target="_blank">Link Text</a>`
2.  使用Javascript打开一个新窗口

    `window.open("Link URL")`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-06-26T18:09:48.340

您也可以在表单中使用 Tommy 的方法：

```
@using (Html.BeginForm("Action", "Controller", FormMethod.Get, new { target = "_blank" }))
{
//code
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-24T19:58:23.113

你问错问题了。代码隐藏（控制器）与前端的工作无关。事实上，这就是 MVC 的优势——您将代码/概念与视图分开。

如果您希望某个动作在新窗口中打开，那么指向该动作的链接需要告诉浏览器在单击时打开一个新窗口。

一个伪例子：`<a href="NewWindow" target="_new">Click Me</a>`

这就是它的全部。设置指向该操作的链接目标。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-08T20:35:31.070

是的，你可以做一些棘手的工作来**模拟**你想要的：

1）通过ajax从视图中调用您的控制器。2）返回您的视图

3）在 $.ajax 请求的`success`（或者可能`error`！错误对我有用！）部分中使用类似以下的内容：

```
$("#imgPrint").click(function () {
        $.ajax({
            url: ...,
            type: 'POST', dataType: 'json',
            data: $("#frm").serialize(),
            success: function (data, textStatus, jqXHR) {
                //Here it is:
                //Gets the model state
                var isValid = '@Html.Raw(Json.Encode(ViewData.ModelState.IsValid))'; 
                // checks that model is valid                    
                if (isValid == 'true') {
                    //open new tab or window - according to configs of browser
                    var w = window.open();
                    //put what controller gave in the new tab or win 
                    $(w.document.body).html(jqXHR.responseText);
                }
                $("#imgSpinner1").hide();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                // And here it is for error section. 
                //Pay attention to different order of 
                //parameters of success and error sections!
                var isValid = '@Html.Raw(Json.Encode(ViewData.ModelState.IsValid))';                    
                if (isValid == 'true') {
                    var w = window.open();
                    $(w.document.body).html(jqXHR.responseText);
                }
                $("#imgSpinner1").hide();
            },
            beforeSend: function () { $("#imgSpinner1").show(); },
            complete: function () { $("#imgSpinner1").hide(); }
        });            
    }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-02T08:34:35.643

您可以使用如下

```
public ActionResult NewWindow()
{
    return Content("<script>window.open('{url}','_blank')</script>");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-11T07:22:47.447

```
@Html.ActionLink("linkText", "Action", new {controller="Controller"}, new {target="_blank",@class="edit"})

   script below will open the action view url in a new window

<script type="text/javascript">
    $(function (){
        $('a.edit').click(function () {
            var url = $(this).attr('href');
            window.open(url, "popupWindow", "width=600,height=800,scrollbars=yes");
            });
            return false;
        });   
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-29T01:04:12.113

我已经看到你可以在哪里做这样的事情，假设“NewWindow.cshtml”在你的“Home”文件夹中：

```
string url = "/Home/NewWindow";
return JavaScript(string.Format("window.open('{0}', '_blank', 'left=100,top=100,width=500,height=500,toolbar=no,resizable=no,scrollable=yes');", url)); 
```

或者

```
return Content("/Home/NewWindow"); 
```

如果您只想在选项卡中打开视图，您可以使用 JavaScript 点击事件来呈现您的部分视图。这将是 NewWindow.cshtml 的控制器方法：

```
public ActionResult DisplayNewWindow(NewWindowModel nwm) {
    // build model list based on its properties & values
    nwm.Name = "John Doe";
    nwm.Address = "123 Main Street";
    return PartialView("NewWindow", nwm);
} 
```

您在页面上的标记将如下所示：

```
<input type="button" id="btnNewWin" value="Open Window" />
<div id="newWinResults" /> 
```

和 JavaScript（需要 jQuery）：

```
var url = '@Url.Action("NewWindow", "Home")';
$('btnNewWin').on('click', function() {
    var model = "{ 'Name': 'Jane Doe', 'Address': '555 Main Street' }"; // you must build your JSON you intend to pass into the "NewWindowModel" manually
    $('#newWinResults').load(url, model); // may need to do JSON.stringify(model)
}); 
```

请注意，此 JSON 将覆盖上述 C# 函数中的内容。我把它放在那里只是为了演示如何对值进行硬编码。

（改编自[Rendering partial view on button click in ASP.NET MVC](https://stackoverflow.com/questions/29142422/rendering-partial-view-on-button-click-in-asp-net-mvc)）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-10T13:36:08.857

我在我的控制器中分配了 javascript：

```
model.linkCode = "window.open('https://www.yahoo.com', '_blank')"; 
```

在我看来：

```
@section Scripts{
    <script @Html.CspScriptNonce()>

    $(function () {

        @if (!String.IsNullOrEmpty(Model.linkCode))
        {
            WriteLiteral(Model.linkCode);
        }
    }); 
```

那打开了一个带有链接的新标签，然后转到它。

有趣的是，在本地运行它会使用弹出窗口阻止程序，但似乎在服务器上运行良好。

# ruby - 如何使用 Ruby REXML 遍历 XML 子节点

> ID：14509618
> 
> 赞同：1
> 
> 时间：2013-01-24T19:55:34.393
> 
> 标签：ruby, rexml

我有一个看起来像这样的 XML 文档：

```
<permit>
  <id>1</id>
  <inspection>
    <amount>100</amount>
    <type>pool</type>  
  </inspection>
  <inspection>
    <amount>400</amount>
    <type>pluminbing</type>  
  </inspection>
</permit>
<permit>
  <id>2</id>
  <inspection>
    <amount>1500</amount>
    <type>roof</type>  
  </inspection>
  <inspection>
    <amount>1700</amount>
    <type>building</type>  
  </inspection>
</permit> 
```

我知道我可以像这样遍历许可证并输出 id：

```
 REXML::XPath.each(doc, '//permit') do |permit|
   permit_hash = {:id => permit.elements['id'].text}
 end 
```

但我似乎无法遍历每个许可证的检查并最终得到一个数组输出，例如：

```
 permits = [{:id => 1, :inspections => [{:amount => 100, :type => 'pool'}, {:amount =>   400, :type => 'plumbing'}]}, {:id => 2, :inspections => [{:amount => 1500, :type => 'roof'}, {:amount => 1700, :type => 'building'}]}] 
```

似乎我尝试的一切都得到了所有检查，而不仅仅是每个许可证的检查。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:28:51.493

I had the same problem. I tried this on my code and it worked. (I'm using yours though)

```
//create a new array
@myInspectionsAmounts=Array.new

//get the amount from the inspection
amount = permits.elements['inspection'].elements['amount'].text

@myInspectionAmounts.push(amount) 
```

I'm sure you can put that in a loop to get all the inspections, but this is the method i tried and I got all the values i needed regardless of how deep they were down the xml tree.

Hope this helps! :)

# android - 允许为全屏 Android 应用关闭屏幕

> ID：14509619
> 
> 赞同：2
> 
> 时间：2013-01-24T19:55:37.823
> 
> 标签：android, fullscreen, wakelock

我尝试了几种已发布的解决方案来尝试在 android 中关闭屏幕，包括：

```
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

这导致没有变化。

```
WindowManager.LayoutParams param = getWindow().getAttributes();
param.screenBrightness = 0;
param.flags |= LayoutParams.FLAG_KEEP_SCREEN_ON;
getWindow().setAttributes(param); 
```

这导致屏幕略微变暗（在 Android 4.2.1 上）

```
//Release all previously held WakeLocks
if (mWakeLock.isHeld()) {
    mWakeLock.release();
}
//Then acquire a partial wake lock (which should allow the display to turn off)
PowerManager powerMan = (PowerManager) getApplicationContext().getSystemService(Context.POWER_SERVICE);
mWakeLock = powerMan.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "Partial WakeLock");
mWakeLock.acquire(); 
```

这导致没有变化。

最后，非法

```
PowerManager powerMan = (PowerManager) getApplicationContext().getSystemService(Context.POWER_SERVICE);
powerMan.goToSleep(1000); 
```

这显然不起作用，因为：

```
<uses-permission android:name="android.permission.DEVICE_POWER" /> 
```

是不允许的（对于非系统应用程序）。

我假设这些问题是因为我的应用程序是`android:theme="@style/FullscreenTheme"`.

是否有任何可行的解决方案可以让全屏应用程序在不牺牲精彩的全屏主题的情况下进入睡眠状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:26:39.620

After writing a simple answer to try and post to @CommonsWare, I found that the problem didn't persist.

I combed through my code several times, and still didn't find anything which would cause the screen to stay awake. I rewrote the entire app from scratch (always a good exercise, ending up with much cleaner logic), and the problem disappeared.

Lesson learnt - if all else fails, re-write everything again. It's a useful exercise in itself :)

# python - 如何使用 pyObjc 将两个电话号码添加到通讯录？

> ID：14509623
> 
> 赞同：0
> 
> 时间：2013-01-24T19:55:43.593
> 
> 标签：python, macos, pyobjc

我一直在尝试使用 python 和 pyObjC 将“工作”和“家庭”电话号码添加到 Mac 地址簿。我相信您需要添加一个多值对象，但我不确定如何使用 pyobjc 来执行此操作。这是到目前为止我整理的代码示例：

```
import AddressBook
from AddressBook import *

ab = AddressBook.ABAddressBook.sharedAddressBook()
p = ABPerson.alloc().init()
p.setValue_forProperty_('JOE', kABFirstNameProperty)
p.setValue_forProperty_('TEST', kABLastNameProperty)

homephoneNumberMultiValue = ABMultiValueCreateMutable()
homephoneNumberMultiValue = ABMultiValueAddValueAndLabel(homephoneNumberMultiValue, '555-555-1212', kABPersonPhoneMobileLabel);
p.setValue_(kABPersonPhoneProperty, homephoneNumberMultiValue);

workphoneNumberMultiValue = ABMultiValueCreateMutable()
workphoneNumberMultiValue = ABMultiValueAddValueAndLabel(workphoneNumberMultiValue, '555-555-1213', kABPersonWorkMobileLabel);  
p.setValue_(kABPersonPhoneProperty, workphoneNumberMultiValue);

ab.addRecord_(p)
ret = ab.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:19:15.313

正是由于这个原因，MultiValue 被称为多值 - 一个对象，多个值。您不需要创建两个单独的对象。

看这个例子：

```
import AddressBook
from AddressBook import *

ab = AddressBook.ABAddressBook.sharedAddressBook()
p = ABPerson.alloc().init()
p.setValue_forProperty_('JOE', kABFirstNameProperty)
p.setValue_forProperty_('TEST', kABLastNameProperty)

phoneNumberMultiValue = ABMultiValueCreateMutable()
ABMultiValueAdd(phoneNumberMultiValue, '555-555-1212', kABPhoneMobileLabel, None);
ABMultiValueAdd(phoneNumberMultiValue, '555-555-1213', kABPhoneWorkLabel, None);
p.setValue_forProperty_(phoneNumberMultiValue, kABPhoneProperty);

ab.addRecord_(p)
ret = ab.save() 
```

换句话说，您创建一个 MultiValue 并在不同的标签下添加不同的值。此示例已使用 python 2.7 测试并在 10.8.3 上运行。

# python - 如何获得 np.array 中每个数字的指数？

> ID：14509626
> 
> 赞同：5
> 
> 时间：2013-01-24T19:56:00.533
> 
> 标签：python, numpy

可以说我有数组：

```
x = np.array([0.00001,0.001]) 
```

numpy 将使数字变为

```
array([  1.00000000e-05,   1.00000000e-03]) 
```

现在我想得到指数，比如

```
x.get_exponent() 
```

结果

```
[-5,-3] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T20:06:03.060

您可以使用`np.floor(np.log10(np.abs(x)))`.

例如：

```
In [13]: x = np.array([0.00001, -0.001, 0.0000025, 0.09, -13.25, 9876.5])

In [14]: x
Out[14]: 
array([  1.00000000e-05,  -1.00000000e-03,   2.50000000e-06,
         9.00000000e-02,  -1.32500000e+01,   9.87650000e+03])

In [15]: np.floor(np.log10(np.abs(x))).astype(int)
Out[15]: array([-5, -3, -6, -2,  1,  3]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:00:57.890

使用[log10](http://docs.scipy.org/doc/numpy/reference/generated/numpy.log10.html#numpy.log10)

```
In [49]: x = np.array([0.00001,0.001])
In [50]: np.log10(x)
Out[50]: array([-5., -3.]) 
```

# c++ - 编译器会自动优化对数学函数的重复调用吗？

> ID：14509628
> 
> 赞同：16
> 
> 时间：2013-01-24T19:56:02.720
> 
> 标签：c++, optimization, compiler-optimization

假设我有这段代码：

```
#include <cmath>

// ...

float f = rand();
std::cout << sin(f) << " " << sin(f); 
```

作为`sin(f)`一个定义明确的函数，有一个简单的优化：

```
float f = rand();
float sin_f = sin(f);
std::cout << sin_f << " " << sin_f; 
```

这是一种期望现代 C++ 编译器自行完成的优化吗？或者编译器没有办法确定`sin(f)`应该总是为相等的值返回相同的值`f`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T20:04:34.917

使用使用默认优化标志构建的 g++：

```
float f = rand();
40117e: e8 75 01 00 00          call   4012f8 <_rand>
401183: 89 44 24 1c             mov    %eax,0x1c(%esp)
401187: db 44 24 1c             fildl  0x1c(%esp)
40118b: d9 5c 24 2c             fstps  0x2c(%esp)
std::cout << sin(f) << " " << sin(f);
40118f: d9 44 24 2c             flds   0x2c(%esp)
401193: dd 1c 24                fstpl  (%esp)
401196: e8 65 01 00 00          call   401300 <_sin>  <----- 1st call
40119b: dd 5c 24 10             fstpl  0x10(%esp)
40119f: d9 44 24 2c             flds   0x2c(%esp)
4011a3: dd 1c 24                fstpl  (%esp)
4011a6: e8 55 01 00 00          call   401300 <_sin>  <----- 2nd call
4011ab: dd 5c 24 04             fstpl  0x4(%esp)
4011af: c7 04 24 e8 60 40 00    movl   $0x4060e8,(%esp) 
```

内置`-O2`：

```
float f = rand();
4011af: e8 24 01 00 00          call   4012d8 <_rand>
4011b4: 89 44 24 1c             mov    %eax,0x1c(%esp)
4011b8: db 44 24 1c             fildl  0x1c(%esp)
std::cout << sin(f) << " " << sin(f);
4011bc: dd 1c 24                fstpl  (%esp)
4011bf: e8 1c 01 00 00          call   4012e0 <_sin>  <----- 1 call 
```

从这里我们可以看到，没有优化编译器使用 2 个调用，而只有 1 个有优化，凭经验我猜，我们可以说编译器确实优化了调用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-24T20:04:28.147

我相当确定`sin`具有非标准纯属性的 GCC 标记，即`__attribute__ ((pure));`

这具有以下效果：

> 许多函数除了返回值外没有任何影响，它们的返回值仅取决于参数和/或全局变量。这样的函数可以像算术运算符一样进行公共子表达式消除和循环优化。

[http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)

因此，这种纯调用很有可能会通过公共子表达式消除进行优化。

（更新：实际上 cmath 正在使用 constexpr，这意味着相同的优化）

# combinations - 来自不同数据集（列）的所有可能组合，每列中的项目数不同。从左到右结合，不回头

> ID：14509629
> 
> 赞同：1
> 
> 时间：2013-01-24T19:56:07.750
> 
> 标签：combinations

我有这张excel表格，用AH的8个不同的列写，还不允许粘贴图片，请容忍我在这里的表示

A1-A3 单、四、双
B1-B4 Rte、分析、RA、无
C1-C4 平衡、LA、BLA、无
D1-D4 Trans、ODS、两者、无
E1-E10 英语、西班牙语、法语、德语、土耳其语, 瑞典语, FinnISH, 中文, 俄语, 葡萄牙语
F1-F2 额定, 无
G1-G2 Wifi, 无
H1-H2 外部,硬面

我想从左到右获得所有可能的组合。（所以在我的图表中从上到下）第一个组合自然是 Single、Rte、Balancing、Trans、English、Rated、Wifi、External。最后一个是四、无、无、无、葡萄牙语、无、无、硬边

有没有办法我可以做到这一点。我喜欢笛卡尔积的想法，但我们没有。另外，列数有时会发生变化，每组中的条目数也会发生变化。我需要它灵活。

如果能解决这个问题，我将不胜感激。

感谢和更多的力量给所有人。

# attr - 在切换隐藏 Div jQuery 脚本时旋转箭头图像

> ID：14509631
> 
> 赞同：0
> 
> 时间：2013-01-24T19:56:14.270
> 
> 标签：attr, jquery

我有一个适用于滑块的脚本。但现在我需要像这样使用 HTML 旋转箭头图像：

[http://jsfiddle.net/nicorellius/gsDVS/](http://jsfiddle.net/nicorellius/gsDVS/)

我正在使用的图像当前是班级的背景图像，`byline`.

jQuery 脚本在这里：

```
// expanding, collapsing div script
$(document).ready(function() {
    $(".toggle-content").hide();
    $(".byline").click(function() {
        //$(this).attr("id", "down-arrow");
        var $next = $(this).next(".toggle-content");
        $(".toggle-content").not($next).slideUp();
        $next.slideToggle(500);
        //$next.attr("id", "");
    });
}); 
```

这可以将图像从左到下更改，例如，`id`从空到`down-arrow`。但是当我单击关闭滑块时，图像保持在左侧。我对如何重新编写此脚本以更改图像感到困惑。目前的图像是分开的，一张朝左，另一张朝下。我可能应该使用单个图像精灵，但我只是想先弄清楚这一点。

我读了这篇文章，这是一个好主意，但可能对我来说太复杂了，现在无法实现：

[使用 jQuery 在切换时旋转图像](https://stackoverflow.com/questions/13999321/rotate-image-on-toggle-with-jquery)

谢谢。

**编辑**

我应该注意，我在这里的页面与我展示的小提琴有点不同：

```
<div class="byline">
    <h4 class="crp-h">Analyze</h4>
    <p class="crp-p">Things are written here</p>
</div>

<div class="toggle-content">
    <ul class="crp-list">
        <li>Statistical</li>
        <li>Robust</li>
    </ul>
</div> 
```

谢谢 One Trick Pony ......除了一件事之外，这件事几乎可以工作。旋转仅在`this` `div`单击 时有效。当`non-this` `div`单击另一个时`div`隐藏但图像保持未旋转：

```
.byline{
  position:relative;     /* required */
}    

.byline:after {
    transform: rotate(-90deg);
    content: '';           /* required */
    position:absolute;     /* required */
    width: 14px;           /* required, width of your arrow */
    height: 14px;          /* required, height of your arrow */
    right: -20px;          /* required, negative width + some padding */
    top:0;                 /* required */
    background: url('your/arrow/image/here.png') no-repeat;
}

.byline.exp:after {
    transform: rotate(0deg);
} 
```

新的 jQuery 在这里：

```
// expanding, collapsing div script
$(document).ready(function() {
    $(".toggle-content").hide();
    $(".byline").click(function() {
        var $next = $(this).next(".toggle-content");
        $(".toggle-content").not($next).slideUp();
        $next.slideToggle(500);
        $(this).toggleClass('exp');
    });
}); 
```

显示这个的小提琴在这里：

[http://jsfiddle.net/nicorellius/7AYjj/](http://jsfiddle.net/nicorellius/7AYjj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:07:10.490

将箭头图形放在伪元素上，如`:after`，[并](http://jsfiddle.net/gsDVS/3/)根据您在触发器链接上切换的类对其进行转换：

```
.byline:after{
    transform: rotate(-90deg);
    /* arrow as background here */
}

.byline.exp:after{
    transform: rotate(0deg);
} 
```

在您的点击事件中添加：

```
$(this).toggleClass('exp'); 
```

# java - 从另一个类访问整数值

> ID：14509636
> 
> 赞同：2
> 
> 时间：2013-01-24T19:56:28.693
> 
> 标签：java, class, variables, integer

我将如何从另一个 java 类访问一个 java 类中的数据？例如，我在 class_one.java 中声明了一个具有值的整数，并希望在 class_two.java 中使用该数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:01:49.720

要么将变量声明为公共：

```
public class class_one {
  public Integer myValue;
} 
```

或创建一个公共 getter（首选），例如：

```
 public class class_one {
    private Integer myValue;

    public Integer getMyValue() {
      return myValue;
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:01:14.680

通过[getter 方法](https://stackoverflow.com/questions/2036970/tutorial-on-getters-and-setters)公开您的变量，并在所需类的实例上调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:02:10.383

在另一个类中创建第一个类的实例并简单地使用它的变量，如果在第一个类中声明为 public。

```
class Foo
{
   public int a=10; 

} 
```

在另一个班级，这样做

```
Foo a=new Foo();
int test = a.value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:02:37.240

a）`public`：对所有类可见
b）`protected`：在同一包中的子类和类中可见
c）`default`：对于同一包中的类可见

这适用于变量和方法访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T20:05:24.400

一种是构建一个“get”函数，该函数将返回所需的值

如

```
public int getA(){
   return a;
} 
```

另一个简单的解决方案是使用静态变量。将“静态”关键字放在变量之前：

```
static int a=5; 
```

并访问您使用该类的变量：

```
Class_One.a; 
```

这将使用变量，就好像它在同一个类中一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T20:05:50.157

这取决于你的变量是如何声明的。这是Oracle教程：

[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T20:07:57.900

您可以使用以下任一方式访问另一个 java 类中的一个 java 类的变量：

> 1.  将访问变量声明为 public 并在其他类中直接访问它。但是你应该避免它，因为它会导致紧密耦合。
> 2.  将访问变量声明为私有并通过 getter Method 访问它。这是访问变量的首选方式，因为它可以防止变量在其他类中意外更改。
> 3.  使用`reflection`包。

# c# - TabPage 不保留添加的控件

> ID：14509640
> 
> 赞同：0
> 
> 时间：2013-01-24T19:56:53.377
> 
> 标签：c#, vb.net, .net-4.0, tabcontrol

我使用 C# 和 VB.Net 进行开发，因此任何一种代码风格都有助于我理解我需要做什么。

我正在动态构建一个 TabControl。在这样做时，我还将控件添加到 TabPages，因为我将它们添加到 TabControl。问题是第一个选项卡（索引 0）总是比第二个选项卡（索引 1）加载得更快。

这是我用来构建 TabControl 的代码：

```
tabFranchises = New TabControl  //Initialize a fresh new TabControl object
tabFranchises.Dock = DockStyle.Fill

Dim tbp As TabPage
Dim bi As BrandInfo

//TODO: Load an individual tab for each Franchise
For Each row As FranchiseRow In dt
    tbp = New TabPage(row.nm)
    tbp.Name = "tab" & row.id
    AddHandler tbp.Enter, AddressOf TabPage_Enter       //General Method assignment to Enter Event
    //AddHandler tbp.Leave, AddressOf TabPage_Leave     //General Method assignment to Leave Event

    bi = New BrandInfo(row.id)

    tbp.Controls.Add(bi)
    tabFranchises.TabPages.Add(tbp)
Next

//Add TabControl to `pnlContent`
pnlContent.Controls.Add(tabFranchises) 
```

这是`TabPage_Enter`方法：

```
Private Sub TabPage_Enter(sender As Object, e As EventArgs)
    //MsgBox(CType(sender, TabPage).Name & " Enter")

    Dim tp As TabPage = CType(sender, TabPage)
    tp.Controls.Clear()

    Dim bi As New BrandInfo(CShort(Strings.Mid(tp.Name, 4)))
    tp.Controls.Add(bi)

End Sub 
```

不管发生什么，每次我从第一个选项卡单击到第二个选项卡时，在加载第二个选项卡时都会出现加载延迟和第一个选项卡的视觉残留。但是，当我从第二个选项卡单击到第一个选项卡时，它会立即完全重新加载，而在第一个选项卡加载时第二个选项卡没有“重影”。

关于如何解决加载标签页速度的任何想法？

# ruby - 亚马逊 curl 数据的 Ruby 重构

> ID：14509645
> 
> 赞同：0
> 
> 时间：2013-01-24T19:57:04.667
> 
> 标签：ruby, arrays, hash, amazon-web-services, refactoring

有没有更有效的方法来完成这项工作？我的意思是我可以重构我的脚本以更有效地获得结果，而不是从其他来源获取此信息，即。亚马逊通过 API 或 SDK。

我做了一个返回这个的卷曲

```
{
         "instanceId" : "i-123abcde",
         "billingProducts" : null,
         "version" : "2001-01-01",
         "accountId" : "123456789012",
         "instanceType" : "m1.large",
         "architecture" : "x86_64",
         "kernelId" : "aki-123ab1ab",
         "ramdiskId" : null,
         "pendingTime" : "2001-01-00T00:00:00Z",
         "availabilityZone" : "us-east-1a",
         "imageId" : "ami-12345ab1",
         "devpayProductCodes" : null,
         "privateIp" : "10.10.10.10",
         "region" : "us-east-1"
         } 
```

这是我的代码块

```
require 'rubygems'
require 'curb'
require 'pp'

info = Curl.get("http://169.254.169.254/latest/dynamic/instance-identity/document")

foo = info.body_str.split(',').join.scan(/"(.*?)" : "(.*?)"/)

quux = {}
foo.each do |baz|
        quux[baz[0]] = baz[1]
end
pp quux 
```

结果是带有键的散列

```
{
         "instanceId" => "i-123abcde",
         "version" => "2001-01-01",
         "accountId" => "123456789012",
         "instanceType" => "m1.large",
         "architecture" => "x86_64",
         "kernelId" => "aki-123ab1ab",
         "pendingTime" => "2001-01-00T00:00:00Z",
         "availabilityZone" => "us-east-1a",
         "imageId" => "ami-12345ab1",
         "privateIp" => "10.10.10.10",
         "region" => "us-east-1"
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:00:32.920

那是JSON数据。做这个：

```
require 'json'
...
quux = JSON.parse(info.body_str) 
```

# html - Outlook 2013 用户代理

> ID：14509647
> 
> 赞同：3
> 
> 时间：2013-01-24T19:57:22.530
> 
> 标签：html, internet-explorer, outlook, user-agent

当您将 URL 设置为文件夹主页时，我一直在尝试了解 Outlook 2013 发送的用户代理字符串。

这是一个为清楚起见删除了不相关内容的示例：

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; Trident/6.0; Microsoft Outlook 15.0.4420) 
```

我在 IE 中使用 F12 工具进行了一些测试，但无法复制相同的结果。例如，我可以让它发送 MSIE 7.0，但它根本不发送 Trident/*.0 字符串，除非我将它设置回 IE10 标准模式。

这是说他们在 IE 7 兼容模式下使用 Trident 6 吗？

Outlook 只是使用它在机器上找到的任何版本的 Trident，还是它有自己的版本？

我可以从这个组合中获得哪些功能支持？

# c# - 组合来自 WCF 服务的 2 个 SQL 查询

> ID：14509649
> 
> 赞同：1
> 
> 时间：2013-01-24T19:57:35.500
> 
> 标签：c#, sql, wcf

基本上我不知道如何查询我的数据库，所以它只返回包含`username`and的字段`date`。我可以单独查询它们，但不能一起查询。

`AND`但是在智能感知中没有选择。

这些是 2 个查询：

```
[OperationContract]
public List<TimeData> GetUsersSpecific(string DateToSearch, string NameToSearch)
{
    TimeDataEntities3 e = new TimeDataEntities3();
    var x  = (from q in e.TimeDatas 
              where q.Date.Contains(DateToSearch) 
              select q);
    var y  = (from r in e.TimeDatas 
              where r.Username.Contains(NameToSearch)
              select r);
    return ();        
} 
```

但我真的想要这样的东西：

```
var y = (from r in e.TimeDatas 
         where r.Username.Contains(NameToSearch) 
           AND where r.Date.Contains(Datetosearch)  
         select r); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:04:19.203

您需要使用`&&`运算符而不是`AND`一个：

```
var timeData = from t in e.TimeDatas
               where t.Date.Contains(DateToSearch)
                  && t.Username.Contains(NameToSearch)
               select t; 
```

`Date`现在您可以`Username`通过`timeData`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:01:48.050

在你的表达式中替换`AND where`为？`&&`

```
var y  = (from r in e.TimeDatas 
           where r.Username.Contains(NameToSearch) 
             && r.Date.Contains (Datetosearch)  
           select r); 
```

# java - 在 primefaces 中，一些变量被 p:wizard 擦除

> ID：14509650
> 
> 赞同：1
> 
> 时间：2013-01-24T19:57:37.940
> 
> 标签：java, primefaces

我正在使用 Primefaces 进行编程，我使用 p:wizard。

我有个问题。当我在第 1 步时，我可以访问所有变量，但是当我更改到第 2 步以生成 panelGrid 时，第 1 步中可用的变量现在在方法 createForm 中为空：

```
<p:wizard widgetVar="wiz">
    <p:tab id="stepone" title="Step 1">
       <p:panel>
           <h:panelGrid >
              <h:outputLink value="#" onclick="wiz.loadStep (wiz.cfg.steps [1], true)">next</h:outputLink>
           </h:panelGrid>
       </p:panel>
    </p:tab>
    <p:tab id="step2" title="Step 2">
        <p:panel>
           <h:panelGrid >
               <h:panelGrid  binding="#{ingresoBean.panelGrid}">
           </h:panelGrid>
           <h:panelGrid >
                <h:outputLink value="#" onclick="wiz.loadStep (wiz.cfg.steps [0], true);">return</h:outputLink>
           </h:panelGrid>
         </p:panel>
    </p:tab>
 </p:wizard> 
```

还有豆子：

```
List<Element> listElement;
private transient UIComponent panelGrid;
public IngresoBean() {
    this.initForm();
}
public UIComponent getPanelGrid() {
    if (panelGrid == null) {
        panelGrid = createForm();
         }
         return panelGrid;
    }
    .....
public void setPanelGrid(UIComponent panelGrid) {
    this.panelGrid = panelGrid;
}

public UIComponent createForm(){
    //here the listElement isnull
    for(SiacFrmdinamico campo:listElement){
        ....
    }
}
public void initForm(){
   ...
   // populate listElement
   ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:03:28.463

从文档中：

> 首先创建您的支持 bean，重要的是 bean 存在于多个请求中，因此请避免使用请求范围 bean。向导的最佳范围是 viewScope。

基本上，用注释你的类`@ViewScoped`并确保你的向导在`<f:view>`标签内。

# mysql - ERROR 1364 (HY000): 使用存储过程时字段“ArtistID”没有默认值

> ID：14509651
> 
> 赞同：0
> 
> 时间：2013-01-24T19:57:41.670
> 
> 标签：mysql

1.  使用 Artists 上的 COUNT 聚合来查看 NameOfArtist 存在多少行。将计数存储在名为 artist_count 的变量中。
2.  如果 Artist_count 为零，则在 Artists 中插入一个新行。选择 LAST_INSERT_ID() 到一个变量中。
3.  如果 Artist_count 为 1，则查找 ArtistID 并将其存储在变量中。
4.  在相册表中插入一个新行。

.

```
CREATE PROCEDURE AddAlbum (
  NameOfArtist varchar(50),
  AlbumName varchar(50)
)
BEGIN
  DECLARE artist_count INT;
  DECLARE artist_id INT;

  SELECT COUNT(ArtistName) INTO artist_count
  FROM Artists WHERE ArtistName = NameOfArtist;

  IF artist_count = 0
    THEN INSERT INTO Artists (ArtistName)
       VALUES(NameOfArtist);

       SELECT LAST_INSERT_ID() INTO artist_id;
  ELSEIF artist_count = 1
    THEN SELECT ArtistID INTO artist_id FROM Artists
         WHERE ArtistName = NameOfArtis;
  END IF;

  INSERT INTO Albums (Title)
    VALUES (AlbumName);
END;
// 
```

这是我在调用程序时遇到的错误。我想不通。

```
ERROR 1364 (HY000): Field 'ArtistID' doesn't have a default value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:03:43.853

该错误应该是不言自明的。您的`Artists`表没有该`ArtistID`列的任何默认值，因此尝试仅在`ArtistName`其中插入一个（对于这种`artist_count = 0`情况）会失败。

您可能应该将该`ArtistID`列配置为`AUTO_INCREMENT`，因为您不关心值是什么，只要它们是唯一的。

# batch-file - cmd文件中的%和%%有什么区别？

> ID：14509652
> 
> 赞同：104
> 
> 时间：2013-01-24T19:57:46.920
> 
> 标签：batch-file, cmd

我最近在 .cmd 文件中包含了与此类似的一行：

```
for /f %%f in ('dir /b .\directory\*.sql') DO sqlcmd -b -o ".\directory\output\%%f.txt" -i ".\directory\%%f" 
```

最初我只使用了 %f，在命令行上运行它可以正常工作，但在通过文件运行时就不行了。当我切换到 %%f 时，它在文件中工作。只是想知道有什么区别。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-01-24T20:27:24.670

*（可以在[存档的 Microsoft 知识库文章](https://jeffpar.github.io/kbarchive/kb/075/Q75634/)中找到更详细的说明。）*

需要知道的三件事：

1.  百分号在批处理文件中用于表示命令行参数：`%1`, `%2`, ...
2.  两个百分号之间的任何字符都被解释为一个变量：

    `echo %myvar%`

3.  *中间没有*任何内容的两个百分号（在批处理文件中）被视为命令中的单个百分号（不是批处理文件）：`%%f`

* * *

为什么？

例如，如果我们执行您的（简化的）命令行

```
FOR /f %f in ('dir /b .') DO somecommand %f 
```

在批处理文件中，*规则 2*将尝试解释

```
%f in ('dir /b .') DO somecommand % 
```

作为变量。为了防止这种情况，您必须应用*规则 3*`%`并用第二个转义`%`：

```
FOR /f %%f in ('dir /b .') DO somecommand %%f 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-24T20:23:35.600

在 DOS 中，您不能在命令行中使用环境变量，只能在批处理文件中使用`%`符号作为分隔符。如果您想`%`在批处理文件中（例如在`echo`语句中）使用文字符号，则需要将其加倍。

这延续到允许在命令行上使用环境变量的 Windows NT，但是为了向后兼容，您仍然需要`%`在 .cmd 文件中加倍您的符号。

# sql-server - 尝试在 sql-server 上迁移时 Flyway 挂起

> ID：14509654
> 
> 赞同：0
> 
> 时间：2013-01-24T19:58:04.433
> 
> 标签：sql-server, flyway

编辑：我可以从 flyway 命令行工具运行相同的配置，但不能从 ant 任务运行。

我有一个可在我的 oracle 数据库上运行的 flyway 配置。我正在我的 SQL-Server 数据库上设置 flyway。当我尝试任何蚂蚁任务时，Flyway 挂起。包括应该用于测试与数据库的连接的信息。

当我运行它时，Flyway 似乎挂起。执行任何 ant 任务时，详细日志以“[flyway:info] DDL Transactions Supported: true”停止，如我在本文末尾发布的日志末尾所示。Flyway 坐在那里，此时没有做任何事情。这让我相信它在获取架构时遇到了问题。因为如果我记得的话，下一个日志行应该是“[flyway:info] Schema: SchemaName”。

这是我正在使用的版本

*   飞行路线：2.0.4
*   SQL-Server：SQL-Server 2008 Express R2
*   微软 jdbc：sqljdbc-4.0

数据库初始化日志：

-在里面：

[属性] 正在加载 ..\database\database-build.properties

使用 URI = jar:file:../apache- 解析构建文件 jar:file:../apache-ant-1.8.2/lib/ant-contrib-1.0b3.jar!/net/sf/antcontrib/antlib.xml ant-1.8.2/lib/ant-contrib-1.0b3.jar!/net/sf/antcontrib/antlib.xml 来自 zip 文件

[属性] 加载 ..database\database-placeholders-testclient.properties

-证实：

-回声：

```
 [echo] Selected database [platform] for DB migration : mssql
 [echo] Selected database [user] for DB migration : sa
 [echo] Selected database [password] for DB migration : flyway
 [echo] Selected database [schemas] for DB migration : dbo
 [echo] Database [jdbc driver class name] for DB migration : com.microsoft.sqlserver.jdbc.SQLServerDriver
 [echo] Database [connection URL] for DB migration : jdbc:sqlserver://localhost;databaseName=TEST_DB;applicationName=Flyway 
```

数据库信息：

使用 URI = jar:file:.. 解析 buildfile jar:file:../apache-ant-1.8.2/lib/flyway-ant-2.0.3.jar!/com/googlecode/flyway/ant/antlib.xml /apache-ant-1.8.2/lib/flyway-ant-2.0.3.jar!/com/googlecode/flyway/ant/antlib.xml 来自 zip 文件

[flyway:info] 数据库：Microsoft SQL Server 10.50

[flyway:info] 支持的 DDL 事务：true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:35:20.323

我发现了这个问题。我的 ant 环境使用 Java build 1.6.0_29 并且在通过命令行使用 flyway 时使用的是 Java build 1.6.0_37 。当我将我的 ant 环境更改为 1.6.0_37 时，它起作用了。我正在使用 Microsoft JDBC 驱动程序 4.0。

# ios - 使用 cocos2d 创建一个空的 tiledMap

> ID：14509655
> 
> 赞同：0
> 
> 时间：2013-01-24T19:58:05.287
> 
> 标签：ios, cocos2d-iphone

我正在寻找一种创建 tiledMap 的方法，我可以在运行时将其设置为大小和内容。我正在制作一个游戏，它会有许多不同大小的关卡以及不同的纹理，我希望找到一种方法来在代码中生成整个地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:46:31.237

您可以使用 cocos2d-iphone-extensions 项目中的[TMXGenerator](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/TMXGenerator)。

请记住，cocos2d TMX 地图不能绘制超过 16,384 个瓦片（128x128 瓦片地图，单层）。如果您需要更大（更快）的贴图地图，您应该使用[KoboldTouch](http://www.koboldtouch.com)（/我自己的产品），它还支持动态生成 TMX 地图，以及其他一些好东西。

# objective-c - 带有 RestKit 0.20 的 Google 地理编码 API

> ID：14509656
> 
> 赞同：0
> 
> 时间：2013-01-24T19:58:05.337
> 
> 标签：objective-c, json, google-maps, ios6, restkit

我想不出以一种优雅的方式解析这个响应。我正在尝试将不同的字段类型与包含以下属性的对象匹配。

```
@property (nonatomic) NSString *name;
@property (nonatomic) NSString *address;
@property (nonatomic) NSString *city;
@property (nonatomic) NSString *postalcode;
@property (nonatomic) NSString *district;
@property (nonatomic) NSString *country; 
```

在过去，我浏览了 Dictionary 该子字段与我搜索的字段相匹配。

```
 {
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "10",
               "short_name" : "10",
               "types" : [ "street_number" ]
            },
            {
               "long_name" : "Warschauer Straße",
               "short_name" : "Warschauer Straße",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Friedrichshain",
               "short_name" : "Friedrichshain",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Friedrichshain-Kreuzberg",
               "short_name" : "Friedrichshain-Kreuzberg",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Berlin",
               "short_name" : "Berlin",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Berlin",
               "short_name" : "Berlin",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Germany",
               "short_name" : "DE",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "10243",
               "short_name" : "10243",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "Warschauer Straße 10, 10243 Berlin, Germany",
         "geometry" : {
            "location" : {
               "lat" : 52.51329350,
               "lng" : 13.45246930
            },
            "location_type" : "ROOFTOP",
            "viewport" : {
               "northeast" : {
                  "lat" : 52.51464248029150,
                  "lng" : 13.45381828029150
               },
               "southwest" : {
                  "lat" : 52.51194451970850,
                  "lng" : 13.45112031970850
               }
            }
         },
         "types" : [ "street_address" ]
      }
   ],
   "status" : "OK"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:59:16.287

好的。我想出了以下解决方案。我已经定义了一个 Dictionary 并覆盖了 Setter 以将传入的字典解析到我自己的解析器中：

```
-(void)addressByGoogle: (NSDictionary*)newAddressComponents{

    for (NSArray *googleResult in newAddressComponents) {

        for (NSArray *fields in googleResult) {

            if ([[fields valueForKey:@"types"] count] >= 1) {

                NSString *googleType = [[fields valueForKey:@"types"] objectAtIndex:0];

                if ( [googleType isEqualToString:@"sublocality"]) {
                    self.district = [fields valueForKey:@"long_name"];
                }

                if ( [googleType isEqualToString:@"country"]) {
                    self.country = [fields valueForKey:@"long_name"];
                }

                if ( [googleType isEqualToString:@"locality"]) {
                    self.city = [fields valueForKey:@"long_name"];
                }

                if ( [googleType isEqualToString:@"street_number"]) {
                    self.streetnumber = [fields valueForKey:@"long_name"];
                }

                if ( [googleType isEqualToString:@"route"]) {
                    self.address = [fields valueForKey:@"long_name"];
                }

                if ( [googleType isEqualToString:@"postal_code"]) {
                    self.postalcode = [fields valueForKey:@"long_name"];
                }
                if ( [googleType isEqualToString:@"administrative_area_level_1"]) {
                    self.adminAreaLevel1 = [fields valueForKey:@"long_name"];
                }
                if ( [googleType isEqualToString:@"administrative_area_level_2"]) {
                    self.adminAreaLevel2 = [fields valueForKey:@"long_name"];
                }
            }

        }
    }

}

- (void) setAddressComponents:(NSDictionary *)newAddressComponents{
    [self addressByGoogle: newAddressComponents];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:55:03.060

正如[Jim](https://stackoverflow.com/users/696042/jim)所说，没有使用 Restkit 映射此对象的优雅方法，您可以做的是直接将此格式映射到“丑陋的对象”，然后将该对象与另一个具有所需接口的对象包装起来。

就像是：

```
@interface MYMappedAddress : NSObject

@property (nonatomic) NSArray *addressComponents;
@property (nonatomic) NSArray *types;
@property (nonatomic) MYGeometry *geometry;
@property (nonatomic) NSString * formattedAddress;

@end

@interface MYAddress : MYMappedAddress

@property (nonatomic) NSString *name;
@property (nonatomic) NSString *address;
@property (nonatomic) NSString *city;
@property (nonatomic) NSString *postalcode;
@property (nonatomic) NSString *district;
@property (nonatomic) NSString *country;

@end 
```

# replace - 可以更改字符串变量，但不能更改 innerHTML

> ID：14509657
> 
> 赞同：1
> 
> 时间：2013-01-24T19:58:07.233
> 
> 标签：replace, innerhtml

我需要删除innerHTML 的某些部分。我已经尝试了 3 个小时了。看起来很简单。

这确实有效...

```
var foo = '<div id = "test" class = "hidden" style = "width: 350px"></div>';
alert(foo);
foo = foo.split('id = "test" class = "hidden" ').join('');
alert(foo); 
```

而这并不...

```
var myElement = document.getElementById('kjbggk');

myElement.innerHTML = '<div id = "test" class = "hidden" style = "width: 350px"></div>';
alert(myElement.innerHTML);
myElement.innerHTML = myElement.innerHTML.split('id = "test" class = "hidden" ').join('');
alert(myElement.innerHTML); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:01:42.450

[单击此处](https://stackoverflow.com/questions/5982268/element-reference-breaks-on-modification-of-innerhtml-property-of-container)转到可能解决您的问题的相关 StackOverflow 问题。

[这个关于 SO](https://stackoverflow.com/questions/8196240/setting-innerhtml-why-wont-it-update-the-dom)的问题似乎也与您的问题有关。

或者，你有没有试过

```
var myElement = document.getElementById('kjbggk');
alert(myElement.innerHTML);
var foo = '<div id = "test" class = "hidden" style = "width: 350px"></div>';
alert(foo);
foo = foo.split('id = "test" class = "hidden" ').join('');
alert(foo);
myElement.innerHTML = foo;
alert(myElement.innerHTML); 
```

# linux - IPC共享内存和线程内存的性能差异

> ID：14509662
> 
> 赞同：23
> 
> 时间：2013-01-24T19:58:22.373
> 
> 标签：linux, multithreading, ipc, shared-memory

我经常听说访问进程之间的共享内存段与访问线程之间的进程内存相比没有性能损失。换句话说，多线程应用程序不会比使用共享内存的一组进程更快（不包括锁定或其他同步问题）。

但我有我的疑问：

1) shmat() 将本地进程虚拟内存映射到共享段。必须为每个共享内存地址执行此转换，并且可能会带来很大的成本。在多线程应用程序中，不需要额外的转换：所有 VM 地址都被转换为物理地址，就像在不访问共享内存的常规进程中一样。

2）共享内存段必须由内核*以某种方式维护。*例如，当所有附加到 shm 的进程都被关闭时，shm 段仍然处于启动状态，并且最终可以被新启动的进程重新访问。可能存在与 shm 段上的内核操作相关的一些开销。

多进程共享内存系统是否与多线程应用程序一样快？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T23:10:10.510

> 1) shmat() 将本地进程虚拟内存映射到共享段。必须为每个共享内存地址执行此转换，并且相对于 shm 访问的数量而言，这可能会带来很大的成本。在多线程应用程序中，不需要额外的转换：所有 VM 地址都被转换为物理地址，就像在不访问共享内存的常规进程中一样。

除了设置共享页面的初始成本（在调用的进程中填充页表）之外，与常规内存访问相比没有任何开销`shmat()`- 在大多数 Linux 风格中，每 4KB 共享内存为 1 页（4 或 8 字节） .

无论页面是共享分配还是在同一进程中分配，（对于所有相关比较）都是相同的成本。

> 2）共享内存段必须由内核以某种方式维护。我不知道“以某种方式”在性能方面意味着什么，但是例如，当所有附加到 shm 的进程都被删除时，shm 段仍然处于启动状态，并且最终可以被新启动的进程重新访问。必须至少有一定程度的开销与内核在 shm 段的生命周期内需要检查的事情有关。

无论是否共享，每一页内存都附有一个“结构页”，其中包含有关该页的一些数据。其中一项是引用计数。当一个页面被分配给一个进程时[无论是通过“shmat”还是其他机制]，引用计数都会增加。当它通过某种方式被释放时，引用计数会减少。如果递减计数为零，则页面实际上被释放 - 否则“不会再发生任何事情”。

与分配的任何其他内存相比，开销基本上为零。无论如何，相同的机制用于页面的其他目的-例如，您有一个也被内核使用的页面-并且您的进程死了，内核需要知道在内核释放该页面之前不要释放该页面以及用户进程。

创建“分叉”时也会发生同样的事情。当一个进程被分叉时，父进程的整个页表本质上被复制到子进程中，并且所有页面都是只读的。每当发生写入时，内核都会发生错误，从而导致该页面被复制 - 因此该页面现在有两个副本，并且执行写入的进程可以修改它的页面，而不会影响其他进程。一旦子（或父）进程死亡，当然所有页面仍然由两个进程拥有[例如从未被写入的代码空间，可能还有一堆从未被触及的公共数据等]显然不能释放，直到两个进程都“死”。再一次，引用计数的页面在这里很有用，因为我们只计算每个页面上的引用计数，

共享库也会发生完全相同的事情。如果一个进程使用共享库，它将在该进程结束时被释放。但是，如果两个、三个或 100 个进程使用同一个共享库，那么代码显然必须保留在内存中，直到不再需要该页面为止。

所以，基本上，整个内核中的所有页面都已经被引用计数了。开销很少。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-19T06:04:12.747

如果考虑当两个线程或进程访问同一内存时在微电子级别发生的事情，就会产生一些有趣的结果。

有趣的一点是 CPU 的架构如何允许多个内核（因此线程和进程）访问相同的内存。这是通过 L1 缓存完成的，然后是 L2、L3，最后是 DRAM。所有这一切的控制器之间必须进行大量的协调。

对于具有 2 个或更多 CPU 的机器，这种协调通过串行总线进行。如果比较两个内核访问同一内存时发生的总线流量，以及将数据*复制*到另一块内存时发生的总线流量，则流量大致相同。

因此，根据两个线程在机器中运行的位置，复制数据与共享数据的速度损失可能很小。

复制可能是 1) memcpy，2) 管道写入，3) 内部 DMA 传输（英特尔芯片现在可以做到这一点）。

内部 DMA 很有趣，因为它需要零 CPU 时间（天真的 memcpy 只是一个循环，实际上需要时间）。因此，如果一个人可以复制数据而不是共享数据，并且使用内部 DMA 来做到这一点，那么您就可以像共享数据一样快。

代价是更多的 RAM，但回报是 Actor 模型编程之类的东西正在发挥作用。这是一种消除程序中使用信号量保护共享内存的所有复杂性的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T21:34:55.730

设置共享内存需要内核进行一些额外的工作，因此从进程中附加/分离共享内存区域可能比常规内存分配慢（或者它可能不是......我从未对此进行基准测试）。但是，一旦它附加到您的进程虚拟内存映射，共享内存就与任何其他用于访问的内存没有什么不同，除非您有多个处理器竞争相同的高速缓存行大小的块。因此，一般而言，对于大多数访问，共享内存应该与任何其他内存一样快，但是，根据您放在那里的内容以及访问它的不同线程/进程的数量，您可能会因特定的使用模式而减慢速度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T21:49:00.623

除了附加（[`shmat`](http://linux.about.com/library/cmd/blcmdl2_shmat.htm)）和分离（`shmdt`）共享内存的成本外，访问速度应该同样快。换句话说，它应该很快，因为硬件支持它。每次访问都不应该有额外层形式的开销。

同步也应该同样快。例如，在 Linux 中，[futex](https://en.wikipedia.org/wiki/Futex)可用于进程和线程。原子变量也应该可以正常工作。

只要连接/分离成本不占主导地位，使用工艺就应该没有缺点。但是，线程更简单，并且如果您的进程大多是短暂的，则附加/分离开销可能是一个问题。但是，由于创建流程的成本会很高，无论如何，如果您担心性能，这不应该是一种可能的情况。

最后，这个讨论可能很有趣：[shmat 和 shmdt 贵吗？](https://groups.google.com/forum/?fromgroups=#!topic/comp.unix.programmer/jkBxKOdJFJs). （警告：它已经过时了。我不知道从那以后情况是否发生了变化。）

这个相关问题也可能会有所帮助：[IPC 的共享内存和线程的共享内存有什么区别？](https://stackoverflow.com/questions/13345059/whats-the-difference-between-shared-memory-for-ipcs-and-threads-shared-memory?rq=1) （简短的回答：不多。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-24T22:29:54.973

共享内存的成本与其“元”更改的数量成正比：分配、释放、进程退出……

内存访问次数没有影响。访问共享段的速度与访问其他任何地方一样快。

CPU 执行页表映射。在物理上，CPU 不知道映射是共享的。

如果您遵循最佳实践（即很少更改映射），您将获得与进程专用内存基本相同的性能。

# visual-c++ - 在 C++ winrt 项目中包含 PCL 库 DLL

> ID：14509664
> 
> 赞同：3
> 
> 时间：2013-01-24T19:58:42.607
> 
> 标签：visual-c++, windows-runtime, portable-class-library

我创建了要在各种 WinRT 项目中使用的可移植类库。我可以在 C# Winrt Apps、VB WinRT Apps、silverlight 和 Windows Phone 中使用这个 PCL dll。但由于某种原因，我无法成功地将库添加到我的 C++ 项目中。我尝试这个时得到的错误是：

> 无法添加对文件“C:\Users\xyz\pqr.dll”的引用，因为它既不是 .NET 程序集也不是已注册的 ActiveX 控件。

我早些时候在 SO 上看到了[同样的问题](https://stackoverflow.com/questions/13321958/cannot-add-a-reference-to-pcl-from-c-cli-project)，并且 OP 发布了一个似乎对他有用的解决方案。我试图按照原始问题的建议找到以下行，但在 vcxproj 文件中找不到它。

```
<TargetFrameworkVersion>v4.0</TargetFrameworkVersion> 
```

由于我无法对原始问题发表评论，我想我应该在这里发布另一个问题。

有任何想法吗？

**编辑：** 我的项目设置如下所示：

*   让我们假设我的 PCL 库名为 A.dll。
*   我的 WinRT 组件称为 B.winmd。
*   现在，B.winmd 在内部使用 A.dll 并围绕它创建一个包装器。

现在，当我想在 C++ 中创建 Store App C 时，我必须在我的项目 C 中添加对 A.dll 和 B.winmd 的引用。如果我只包含 B.winmd，我第一次会遇到运行时异常使用 A.dll。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:29:31.377

C++ 应用程序不知道如何执行托管代码。如果您想使用 C# 创建一个库并使其可用于另一个运行时环境（如 C++ 或 Javascript），那么您必须创建一个 Windows 运行时组件项目。它的公共接口仅限于 WinRT 兼容类型，以允许运行时环境之间的互操作工作。还有很多其他的小规则。

MSDN 起始页[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:27:37.987

您的消息应该是一个很好的提示 - PCL 库是一个 .NET 库。WinRT 项目需要 WinRT 组件。您需要创建一个基于 .NET 的 WinRT 组件，该组件将包装您的 PCL 库以使其可用于非 .NET 语言。

# actionscript-3 - flash as3 - 将一组事件处理程序分配给一组影片剪辑

> ID：14509668
> 
> 赞同：1
> 
> 时间：2013-01-24T19:59:03.047
> 
> 标签：actionscript-3, flash, class, addeventlistener

我的库中有一个包含一组菜单控件的影片剪辑。每个控件都有一系列将在翻转、滚动和单击时执行的操作，以及一些应始终设置的属性（buttonMode、mouseChildren）。

在我的课堂上，有没有办法将一组事件侦听器和属性应用于所有剪辑，而不是选择每个按钮的事件侦听器？它们位于菜单中的不同级别和位置，但它们都有相同的操作：gotoAndPlay("over")"、buttonMode = true 等。

这是我的班级的设置方式：

```
package {

  import flash.display.*;
    import flash.events.*; 
    import com.greensock.*;
    import com.greensock.easing.*;

  public class Main extends MovieClip {

    public var menuInstance:PanoMenu;
    private var menuTopRef;

    public function Main() {
        menuInstance = new PanoMenu();
        menuInstance.x = -43;
        menuInstance.y = 23;
        menuTopRef = menuInstance.menuTop;
        menuTopRef.buttonMode = true; 
        menuTopRef.addEventListener(MouseEvent.CLICK,menuTopClick); //MH - want to do this for all clips in the menu, with their own unique callbacks specified
        addChild(menuInstance);
        trace ("main");
    }

    private function menuTopClick(e:MouseEvent){
        trace ("top click");
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:34:45.473

虽然 Reshape Media 的答案是处理 Click 事件的好方法，但按钮行为可能应该通过创建一个类并将其应用于所有按钮式 MovieClip 来处理。或者，老派的方法是只制作一个按钮符号（它将是 SimpleButton 的一个实例），它几乎可以像您想要的那样工作，而无需任何额外的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:30:49.613

根据您的情况，您不需要不同的处理程序。您可以做的是将所有按钮（在菜单中）的所有事件发送到单个处理程序，然后执行 switch case 以检查按钮的名称并从那里开始。

```
//random menu items
var menu_item_1:Sprite = new Sprite;
var menu_item_2:Sprite = new Sprite;
var menu_item_3:Sprite = new Sprite;

//give them unique names
menu_item_1.name = 'item 1';
menu_item_2.name = 'item 2';
menu_item_3.name = 'item 3';

//define an array and add the SAME listener         
var menu_items:Array = [menu_item_1,menu_item_2,menu_item_3];
for(var i:Number = 0; i<menu_items.length; i++){
    var item:Sprite = menu_items[i] as Sprite;
    item.addEventListener(MouseEvent.CLICK,onClick);
}

//listen for all button clicks
//do a switch case to map the clicks
function onClick(e:MouseEvent):void{

    switch(e.target.name){

        case 'item 1':
            //do something
            break;

        case 'item 2':
            //do something
            break;  

        case 'item 2':
            //do something
            break;  
    }

} 
```

# google-analytics - 使用 301 重定向处理谷歌分析

> ID：14509672
> 
> 赞同：-1
> 
> 时间：2013-01-24T19:59:22.500
> 
> 标签：google-analytics

我已经设置了我的域 www.example.com。在访问该站点时，它会检查用户是否已登录，并通过 PHP 标头方法执行**301 重定向到 www.example.com/login。**

但由于这个重定向，我无法设置我的谷歌分析帐户。该网站没有得到验证。在这种情况下，如何验证网站跟踪。

如何处理**301/302 重定向**以在谷歌分析中正确跟踪。请指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:11:20.640

谷歌分析在 24 小时后开始跟踪我的数据。之后，该网站也在谷歌分析设置中得到验证。跟踪信息似乎没有实时更新。这不是因为我的网站中有 301 重定向。

# ruby-on-rails - 为什么 ActiveRecord 模型中的关联属性不能在没有 `self` 的情况下更新？

> ID：14509673
> 
> 赞同：1
> 
> 时间：2013-01-24T19:59:24.967
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

我已经定义了一个模型**项目**，它是它的子类，`ActiveRecord::Base` 它有一个名为买家的关联属性，它是**成员**

它有一个购买方法来更新买家属性。

```
# do buy transaction on that item
def buy(people_who_buy, amount)
  buyer = people_who_buy
  save
  ....
end 
```

此代码无法更新买家属性。sql generate 只对数据库中的成员进行 sql 选择。

但是在我添加`self.`之前`buyer`，它工作正常。

```
# do buy transaction on that item
def buy(people_who_buy, amount)
  self.buyer = people_who_buy
  save
  ....
end 
```

看起来很奇怪！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:12:02.313

调用`self.write_accessor`write_accessor 时需要调用，而 in`self.read_accessor`可以`self`省略（通常会避免以保持代码尽可能干净）。

* * *

来自[社区编辑的 ruby​​ 样式指南](https://github.com/bbatsov/ruby-style-guide)：

> 在不需要的地方避免使用 self。（仅在调用自写访问器时才需要。）
> 
> ```
> # bad
> def ready?
>   if self.last_reviewed_at > self.last_updated_at
>     self.worker.update(self.content, self.options)
>     self.status = :in_progress
>   end
>   self.status == :verified
> end
> 
> # good
> def ready?
>   if last_reviewed_at > last_updated_at
>     worker.update(content, options)
>     self.status = :in_progress
>   end
>   status == :verified
> end 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:21:07.037

这不仅仅是一个 ActiveRecord 问题。Ruby 解析器将表达式`foo = 123`视为局部变量赋值。为了调用访问器方法，您需要添加前缀`self.`以消除歧义并执行分配方法。

# java - 从内部类访问变量 - 获取空指针异常

> ID：14509676
> 
> 赞同：0
> 
> 时间：2013-01-24T19:59:40.767
> 
> 标签：java, inner-classes

我想`arr`从内部类方法中访问变量`MyMethod`。当我尝试从那里打印它时，我最终得到一个空指针异常。

```
public class MyClass{
    String[] arr;
    MyClass my;

    public MyClass(){
      my = new MyClass();
    }

     public class MyInner {
        public void MyMethod() {
            // I need to access 'my.arr' from here how can i do it. 
         }

       }

     public static void main(String[] args) {
       String[] n={"ddd","f"};

       my.arr=n;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:00:44.727

你可以只使用`arr`. 但是，除非您将其设置为某种东西，否则它将是`null`

顺便说一句：你`my = new MyClass()`会爆炸，因为它会创建对象，直到堆栈溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:01:41.953

你还没有初始化它，所以引用是`null`. 例如，在您的构造函数中对其进行初始化，您将可以通过内部类访问该变量。

```
public class MyClass {
    String[] arr;

    public MyClass (String[] a_arr) {
        arr = a_arr;
    }

    public class MyInner {
        public void MyMethod () {
            // I need to access 'my.arr' from here how can i do it. 
        }

    }

    public static void main (String[] args) {
        String[] n= {"ddd","f"};
        MyClass myClass = new MyClass (n);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:02:48.050

好吧，对于您的 main 方法的初学者，您永远不会创建您的类的实例。

此外，`MyClass`具有对`MyClass`对象的引用。在 的构造函数中`MyClass`，它通过调用它自己的构造函数来初始化该引用。那是一个无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:06:47.550

请执行下列操作。你的初始化方式是错误的。

```
public class MyClass{
    String[] arr;
    MyClass my;

    public MyClass(){
    }

     public class MyInner {
        public void MyMethod() {
            // I need to access 'my.arr' from here how can i do it. 
         }

       }

     public static void main(String[] args) {
       String[] n={"ddd","f"};
       MyClass my=new MyClass();
String[] b = new String[2];

System.arraycopy( n, 0, b, 0, n.length );
     }
} 
```

如果字符串超过 2 个，只需执行 String[] b = new String[n.length];

# iphone - 从模态视图控制器返回主视图控制器

> ID：14509677
> 
> 赞同：2
> 
> 时间：2013-01-24T19:59:43.713
> 
> 标签：iphone, uinavigationcontroller, modalviewcontroller, viewcontroller, ios5.1

我想制作一个从模态视图到主视图的后退按钮。

视图控制器嵌入在导航控制器中。菜单按钮将我带到第二个视图控制器。我有一个后退按钮，使用它可以正常工作：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

我想从第二页 VC 返回主视图控制器。

我努力了：

```
- (IBAction)goToRootView:(id)sender {

[self.presentingViewController dismissViewControllerAnimated:(NO) completion:nil];
[self.navigationController popViewControllerAnimated:YES];
} 
```

和：

```
- (IBAction)goToRootView:(id)sender {

[self dismissViewControllerAnimated:(NO) completion:nil];
[self.navigationController popViewControllerAnimated:YES];
} 
```

第一个只是回到第二个 VC，最后一个发送和 lldb 错误。

如何从 Mantras Page 2 VC 转到 Main VC？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:11:57.597

在第一个片段中，而不是

```
[self.navigationController popViewControllerAnimated:YES]; 
```

尝试

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:31:45.367

你可以把这个...

```
CHS_View_Controller *oldView = [self.storyboard instantiateViewControllerWithIdentifier:@"CHS_View"];
UINavigationController *yourNavigationController = [[UINavigationController alloc]  initWithRootViewController:oldView];

yourNavigationController.modalTransitionStyle= UIModalTransitionStyleCrossDissolve;

[self presentViewController:yourNavigationController animated:YES completion:nil]; 
```

为此，您必须：

1）导入你的dest控制器

```
#import "CHS_View_Controller.h" // your controller name 
```

和

2）在下面的示例中为您的 CHS_Controller 设置一个标识符，“CHS_View”（进入 Storyboard Editor 和 Attributes Inspector）

# c# - 在新选项卡或窗口中从内存流中打开字节数组

> ID：14509678
> 
> 赞同：2
> 
> 时间：2013-01-24T19:59:46.217
> 
> 标签：c#, asp.net, pdf, bytearray, memorystream

这似乎是一个常见问题，但经过长时间的搜索，我还没有找到适合我需要的解决方案。我正在使用 itextsharp 填写我创建字节数组的 pdf 表单。（我将同一表格的多个页面包含相同的信息合并到一个 pdf 文档中）。我可以毫无问题地做到这一点，问题是当我向用户显示最终的 pdf 文档时，我需要在不同的窗口或选项卡中打开它，而无需先提示用户保存或打开文件。我也不想在服务器上保存文件并使用文件流重新打开它。如果我将内容配置更改为“内联”，则 pdf 将显示在同一浏览器窗口中。这会产生问题，因为用户必须单击浏览器后退按钮才能导航回重新启动表单提交过程的站点。就目前而言，我的代码成功生成了 pdf 并提示他们打开或保存它。这是我需要删除的步骤。我似乎记得一些在新选项卡或窗口中打开 pdf 的 java 片段，但我未能成功复制/找到它。我也玩过不同的头球，但我碰壁了。任何帮助将不胜感激。

（在必要的数据验证后，我通过单击按钮调用下面代码的 go 方法。）

```
private void go()
    {
        List<byte[]> pdfs = new List<byte[]>();

        while (PageNumber <= Convert.ToInt32(PageCountLabel.Text))
        {
            pdfs.Add(PopulatePDF());
        }

        MemoryStream ms = MergePDFs(pdfs);
            //opens pdf in new tab after save/open option
        Response.AddHeader("Content-Disposition", "attachment; filename=TheDocument.pdf");

        Response.ContentType = "application/pdf";            
        Response.BinaryWrite(ms.ToArray());
        Response.End();                             
    }

    //************fills in pdf form****************//

    private byte[] PopulatePDF()
    {         

        MemoryStream ms = new MemoryStream();
        PdfStamper Stamper = null;            
        PdfReader Reader = new PdfReader(Server.MapPath("~/PDFTemplates/template1.pdf"));
        try
        {
            string temp = Profile.ToString().ToUpper();

            PdfCopyFields Copier = new PdfCopyFields(ms);
            Copier.AddDocument(Reader);
            Copier.Close();

            PdfReader docReader = new PdfReader(ms.ToArray());
            ms = new MemoryStream();
            Stamper = new PdfStamper(docReader, ms);
            AcroFields Fields = Stamper.AcroFields;

            //fill form fields here                                         

            PageNumber++;
            Stamper.FormFlattening = true;
        }
        finally
        {
            if (Stamper != null)
            {
                Stamper.Close();
            }
        }
        return ms.ToArray();
    }

    //combines pdf pages into single document
    private MemoryStream MergePDFs(List<byte[]> pdfs)
    {
        MemoryStream ms = new MemoryStream();
        PdfCopyFields Copier = new PdfCopyFields(ms);

        foreach (var pdf in pdfs)
            Copier.AddDocument(new PdfReader(pdf));
        Copier.Close();
        return ms;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:10:45.117

将您的 PDF 生成代码放在带有 URL 参数的新页面 MyPDFPage.aspx 中，然后在原始页面上放置一个按钮，该按钮带有一个使用[来自 javascript 的 window.open()](http://www.w3schools.com/jsref/met_win_open.asp)的 onclick 事件：

```
<html>
<head>
<script>
function open_win()
{
    window.open("MyPDFPage.aspx?fileid=0001", "_blank")
}
</script>
</head>
<body>

<input type="button" value="Open Window" onclick="open_win()">

</body>
</html> 
```

# c++ - C ++将八个布尔值压缩为一个字符

> ID：14509679
> 
> 赞同：2
> 
> 时间：2013-01-24T19:59:48.623
> 
> 标签：c++, compression, boolean, character

我正在从文件中读取大量整数。它们都将是 0 或 1，因此我已将每个读取的整数转换为布尔值。

我需要做的是通过将每 8 位/布尔值打包成一个字符来利用字符提供的空间（8 位）。我怎样才能做到这一点？

我已经尝试过二进制操作，但我没有想出我想要的。

```
int count = 7;
unsigned char compressedValue = 0x00;
while(/*Not end of file*/)
{
    ...

    compressedValue |= booleanValue << count;

    count--;
    if (count == 0)
    {
        count = 7;
        //write char to stream
            compressedValue &= 0;
    }
} 
```

**更新**

我已经更新了代码以反映迄今为止建议的一些更正。我的下一个问题是，我应该如何初始化/清除 unsigned char？

**更新**

反映了清除字符位的更改。

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:09:51.983

几个注意事项：

*   `while(!in.eof())`错了，您必须先尝试（！）读取某些内容，如果成功，您可以使用数据。
*   使用 unsigned char 获取至少 8 位的整数。或者，查看 stdint.h 并使用 uint8_t（或 uint_least8_t）。
*   移位操作方向错误，`uint8_t(1) << count`改用。
*   如果你想在内存中做类似的事情，我会使用更大的类型，比如 32 位或 64 位，因为读取一个字节仍然是单个 RAM 访问，即使一次可以读取多个字节。
*   写入一个字节后，不要忘记将临时值归零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:22:48.770

正如 Mooing Duck 建议的那样，您可以使用 bitset。

源代码只是一个概念证明——尤其是必须实现文件读取。

```
#include <bitset>
#include <cstdint>
#include <iostream>

int main() {

   char const fcontent[56] { "\0\001\0\001\0\001\0\001\0\001"
     "\001\001\001\001\001\001\001\001\001\001\001\001"
     "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
     "\0\001\0\001\0\001\0\001" };

   for( int i { 0 }; i < 56; i += 8 ) {
      std::bitset<8> const bs(fcontent+i, 8, '\0', '\001');
      std::cout << bs.to_ulong() << " ";
   }
   std::cout << std::endl;

   return 0;
} 
```

输出：

```
85 127 252 0 0 1 84 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T20:12:22.563

`vector<bool>`以您想要的方式包装的标准保证。不要重新发明轮子。[更多信息在这里](http://www.cplusplus.com/reference/vector/vector-bool/)

# django - 是否建议升级到 Django 1.5？

> ID：14509682
> 
> 赞同：4
> 
> 时间：2013-01-24T20:00:01.033
> 
> 标签：django, django-1.5

我目前正在使用 1.4.3。由于新的逐字模板标签，1.5 将使我的前端开发更加容易。

几周前发布了候选版本：[https ://www.djangoproject.com/weblog/2013/jan/04/15-rc-1/](https://www.djangoproject.com/weblog/2013/jan/04/15-rc-1/)

是否建议升级？我在哪里可以找到构建状态或查看突出的错误或其他任何阻碍最终版本的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T20:03:48.390

这主要是基于您的项目要求和日程安排的判断。从技术上讲，我认为 1.5 非常好，而且改进，尤其是用户模型扩展，是非常宝贵的。但它仍在开发中，并且仍在发现错误。

如果您正在开发一个不打算在一个月内发布的应用程序，我肯定会升级。我喜欢新的 1.5 功能，它可能很快就会正式发布。

如果您正在开发一个需要比在高压力环境中更快启动的应用程序，我会继续升级直到 1.5 稳定之后。

如果您正在开发一个不会很快被大量使用的应用程序，那么您可以选择任何一种方式，但我倾向于升级。

# r - *在 r 中应用以重复一个功能

> ID：14509685
> 
> 赞同：2
> 
> 时间：2013-01-24T20:00:23.277
> 
> 标签：r

我编写了一个模拟函数，它输出一个包含 100 个元素的向量，我想使用这些`*apply`函数多次运行该函数，并在每次运行模拟时将重复的输出存储在一个新向量中。

该函数如下所示：

```
J <- c(1:100)
species_richness <- function(J){
   a <- table(J)
   return(NROW(a))
}

simulation <- function(J,gens,ploton=FALSE,v=0.1){
    species_richness_output <- rep(NA,gens)
    for(rep in 1:gens){
        index1 <- sample(1:length(J),1)

        if(runif(1,0,1) < v){
           J[index1] <- (rep+100)
        } 
        else{
           index2 <- sample(1:length(J),1)
           while(index1==index2) {
               index2 <- sample(1:length(J),1)
           }
           J[index1] <- J[index2]
        }
        species_richness_output[rep] <- species_richness(J)
    }

    species_abundance <- function(J){
       a <- table(J)
       return(a)
    }

    abuntable <- species_abundance(J)
    print(abuntable)

    octaves <- function(abuntable){
       oct <- (rep(0,log2(sum(abuntable))))

       for(i in 1:length(abuntable)){
          oct2 <- floor(log2(abuntable[i])+1)
          oct[oct2] <- oct[oct2]+1
       }

       print(oct)
    }   

    # octaves(c(100,64,63,5,4,3,2,2,1,1,1,1))

    if(ploton==TRUE){
       hist(octaves(abuntable))
    }
    print(species_richness(J))

    return(J)
}

simulation(J, 10000,TRUE,v=0.1) 
```

这就是我的函数，它接受 J 一个我之前定义的向量，对其进行操作，然后返回： 新模拟的 100 个元素的向量 J 一个名为 octave 的函数，用于对新向量进行分类 对应于上述“octave”的直方图

我尝试了许多变体： using `lapply`, `mapply` put`args=args_from_original_simulation`

```
simulation_repeated <- c(mapply(list, FUN=simulation(args),times=10000)) 
```

但是我不断收到 mapply 函数的 match.fun 部分的错误

```
Error in match.fun(FUN) : 
  'simulation(J, 10000, FALSE, 0.1)' is not a function, character or symbol 
```

尽管我编写的模拟显示为在工作区中保存为函数。

有谁知道这个错误指向什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:50:23.930

在这一行：

```
simulation_repeated <- c(mapply(list, FUN=simulation(args),times=10000)) 
```

您没有提供 mapply 的功能。您（本质上）传递调用的结果`simulation(args)`并且`simulation`不返回函数。

# jquery - 带有名为“-1”的对象的 JSON

> ID：14509686
> 
> 赞同：4
> 
> 时间：2013-01-24T20:00:27.477
> 
> 标签：jquery, json, getjson

我需要从一个站点获取一些 JSON 并解析它。问题是对象被命名为“-1”“-2”等等。

当我尝试解析它时，Firebug 回来了，“TypeError: obj is undefined length = obj.length”

Chrome 会返回类似的消息，“未捕获的类型错误：无法读取未定义的属性‘长度’”

作为参考，这里是 JSON 的片段：

```
{
  "-1": {
     "number": 47,
     "properties": [
       [ 
```

这是我正在尝试使用的代码。

```
$.getJSON("http://www.website.com/builds?select=-1&select=-10",function(data){
  $.each(data.-1, function(info,value){ 
```

如果我下载 JSON，将其保存在本地并将“-1”重命名为“one”，将“-2”重命名为“two”，则可以正常工作。例如，JSON 变为：

```
{
  "one": {
     "number": 47,
     "properties": [
       [ 
```

我的代码变成了

```
$.getJSON("C:\json.json",function(data){
    $.each(data.one, function(info,value){ 
```

这工作正常，但它增加了另一个复杂的步骤。

有没有办法解析原始 JSON（因为它是从服务器自动生成的，并且经常更改），还是我一直在试图弄清楚如何在本地保存它并在解析之前更改对象名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T20:01:36.940

`data.-1`必须使用括号表示法作为字符串引用。

`data["-1"]`

# java - 在 MODE=MySQL 中运行 h2 不支持 MySQL 转储

> ID：14509689
> 
> 赞同：0
> 
> 时间：2013-01-24T20:00:34.653
> 
> 标签：java, mysql, integration-testing, h2, embedded-database

我正在尝试嵌入 h2 来测试我的 mysql 应用程序（集成测试）

我通过 maven 添加了 com.h2database:h2:1.3.170 并运行以下代码：

```
public class InMemoryTest
{
    @Test
    public void test() throws Exception {
      Class.forName("org.h2.Driver");

      Connection conn = DriverManager.
          getConnection("jdbc:h2:mem:test;MODE=MySQL;IGNORECASE=TRUE;INIT=RUNSCRIPT FROM 'src/test/resources/test.sql'");
    }
} 
```

这给了我以下例外：

```
Syntax error in SQL statement "
CREATE TABLE IF NOT EXISTS ""usr_avatar"" (
  ""usr_avatar_id"" INT(11) NOT NULL AUTO_INCREMENT,
  ""usr_avatar_user_id"" INT(11) NOT NULL,
  ""usr_avatar_img"" BLOB NOT NULL,
  PRIMARY KEY (""usr_avatar_id""),
  UNIQUE KEY ""usr_avatar_id_UNIQUE"" (""usr_avatar_id""),
  UNIQUE KEY ""usr_avatar_user_id_UNIQUE"" (""usr_avatar_user_id""),
  KEY ""usr_user_id"" (""usr_avatar_user_id""),
  KEY ""fk_user_id"" (""usr_avatar_user_id"")
) AUTO_INCREMENT[*]=1  "; 
```

显然，“AUTO_INCREMENT”导致了这个？

由于这是有效的 MySQL（我使用 MySQL Workbench 从我的真实数据库中导出了转储），我有点困惑，因为 h2 声称支持 MySQL？以下是 .sql 中的几行：

```
DROP TABLE IF EXISTS `usr_avatar`;
CREATE TABLE IF NOT EXISTS "usr_avatar" (
  "usr_avatar_id" int(11) NOT NULL AUTO_INCREMENT,
  "usr_avatar_user_id" int(11) NOT NULL,
  "usr_avatar_img" blob NOT NULL,
  PRIMARY KEY ("usr_avatar_id"),
  UNIQUE KEY "usr_avatar_id_UNIQUE" ("usr_avatar_id"),
  UNIQUE KEY "usr_avatar_user_id_UNIQUE" ("usr_avatar_user_id"),
  KEY "usr_user_id" ("usr_avatar_user_id"),
  KEY "fk_user_id" ("usr_avatar_user_id")
) AUTO_INCREMENT=1 ;

DROP TABLE IF EXISTS `usr_restriction`;
CREATE TABLE IF NOT EXISTS "usr_restriction" (
  "usr_restriction_id" int(11) NOT NULL AUTO_INCREMENT,
  "usr_restriction_user_id" int(11) DEFAULT NULL,
  "usr_restriction_ip" varchar(39) DEFAULT NULL,
  "usr_restriction_valid_from" date NOT NULL,
  "usr_restriction_valid_to" date DEFAULT NULL,
  PRIMARY KEY ("usr_restriction_id"),
  UNIQUE KEY "usr_restriction_id_UNIQUE" ("usr_restriction_id"),
  KEY "user_id" ("usr_restriction_user_id"),
  KEY "usr_user_id" ("usr_restriction_user_id")
) AUTO_INCREMENT=1 ; 
```

我有哪些选择？我应该用不同的软件导出转储并强制它是纯 SQL 吗？哪个软件可以做到这一点？还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:33:03.397

问题是 H2 不支持`AUTO_INCREMENT=1`您在 SQL 语句中指定的 。尝试删除它。我认为 MySQL 也没有必要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:15:37.840

从 MySQL 导出的源 SQL 在其文字周围有双引号。第一个 DROP 语句还有一个“反引号”(`)。但是当 H2 报告错误时，H2 显示的是用双双引号括起来的文字。我认为这是问题所在。

尝试几件事。首先，在 DROP 语句中取反引号并将其转换为单引号。如果这不起作用，请将所有双引号转换为单引号。如果这不起作用，请删除所有引号。

我认为 H2 正在尝试创建带有双引号的表作为实际表名/列名的一部分，这导致它爆炸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-17T13:11:33.310

H2 不支持`AUTO_INCREMENT=1`。

改用这个：

```
ALTER TABLE table_name ALTER COLUMN id RESTART WITH 1; 
```

# php - 在 html 表单提交上启动 jquery 弹出窗口？

> ID：14509694
> 
> 赞同：0
> 
> 时间：2013-01-24T20:01:00.130
> 
> 标签：php, jquery, html, submit

谁能帮忙。我有这个登录表单：

```
<form id="myform" form action="login.php" method="post" class="loginform">
Email
<input type="text" name="email" maxlength="30" />
Password
<input type="password" name="password" maxlength="30" />
<input type="image" src="../PTB1/assets/img/icons/loginarrow1.png" name="submit" class="loginbutton" value="Login" />
</form> 
```

我也有这个脚本，当我提交表单时，它会在弹出窗口中显示表单操作页面“login.php”。

目前它会弹出一个基本的弹出窗口，但我想知道我是否可以调整 jquery 代码来实现一个 jquery 灯箱窗口，而不是打开。

这是提交我的登录表单时启动弹出窗口的 jquery 代码。

```
<script>
    $(document).ready(function() {
    $('#myform').submit(function() {
        window.open('', 'formpopup', 'width=400,height=400');
        this.target = 'formpopup';
    });
});
</script> 
```

但现在我想使用我的 jquery lightbox 窗口打开这个弹出窗口，该窗口称为“shadowbox”（可在网上下载），您通常会像这样打开链接。

```
 <a href="link"   rel="shadowbox;height=300;width=500"        >link</a> 
```

所以为了清楚起见，我问是否有一种方法可以启动我的 jquery 灯箱“shadowbox”来代替用户单击登录表单上的提交按钮时启动的正常弹出窗口。

请有人可以告诉我这样做的方法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:16:01.563

我会将 e.preventDefault() 添加到前面的语句中

```
$(function() {
  $('#myform').submit(function(e) {
    e.preventDefault();
    this.target = 'formpopup';
    Shadowbox.open({
      content:    'link',
      height:     300,
      width:      500
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:11:52.790

```
$(function() {
  $('#myform').submit(function() {
    this.target = 'formpopup';
    Shadowbox.open({
      content:    'link',
      height:     300,
      width:      500
    });
  });
}); 
```

# ruby-on-rails - 编辑在 Ruby on Rails (3.1.0) 中显示为表格行的记录

> ID：14509695
> 
> 赞同：0
> 
> 时间：2013-01-24T20:01:01.627
> 
> 标签：ruby-on-rails, ruby

我是 Rails 新手，一直在自学。这也是我第一次在 Stackoverflow 上发帖，尽管我经常提到它。下面是显示名为 Ideas 的模型记录的 ERB 代码片段：

```
<% @idea.each do |i| %>
  <tr>
    <td><%= i.name %></td>
    <td><%= i.description %></td>
    <td><a class="btn" href="share"><i class="icon-share"></i></a></td>
    <td>
      <%= link_to(ideas_edit_path(@i), :class => 'btn') do %>
             <i class="icon icon-edit"> </i>
      <% end %>
    </td>
    <td><a class="btn" href="destroy"><i class="icon-trash"></i></a></td>
  </tr>
<% end %> 
```

每行包含“名称”、“描述”，然后是名为“共享”、“编辑”、“销毁”的图标。我想为该特定记录的每个操作显示一个表单。我不知道如何将记录的 id 传递给这些操作。有人可以指出我正确的方向吗？我认为我已经正确定义了路线，因为我可以输入完整的 ERL (/ideas/2/edit) 并显示编辑表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:05:00.737

将您的@idea 更改为@ideas 以反映它是一个集合。

您迭代的集合应该类似于

```
@ideas.each do |idea|
  link_to(edit_idea_path(idea), :class => 'btn') 
end 
```

所以你的链接现在是`edit_idea_path(idea)`

表单文件将被`app/view/ideas`称为`edit.html.erb`
实际上表单由新和编辑操作共享，因此最好的想法是`_form.html.erb`在新表单和编辑表单中都包含并包含它。

.erb 模板中的代码就像

```
form_for @idea do |f|
  various input fields
end 
```

我建议您快速尝试使用 rails 中可用的脚手架创建另一个应用程序。然后看看生成了什么，你会更好地了解应该命名哪些东西，它们在哪里等等。
这听起来可能有点激烈，但实际上它很简单：

```
$ cd ~          # Go to root
$ mkdir newapp  # Create a new directory
$ cd newapp     # Create a new rails app
$ rails generate scaffold Idea name:string description:text  # Use scaffolding 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:07:41.000

当您使用命名路由（即`ideas_edit_path`）时，您只需将模型对象作为参数传入，它们就会为该对象构建正确的路由。上面的代码中有一个错误，您指的是`@i`它应该是什么时候`i`（在它上面的循环中声明的局部变量）。

另一个小问题：您可能想要使用`@ideas`而不是`@idea`集合来表明它是一个集合，但这本身并不一定是一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:21:22.297

您可以将`link_to`助手与 a一起使用`do`来构建块。

```
<%= link_to edit_idea_path(i), class: "btn" do %>
  <i class="icon icon-edit"></i>
<% end %> 
```

看起来您使用带有 Rails 的 Bootstrap 框架——非常好的组合！

# c - 使用回溯算法求解数独

> ID：14509696
> 
> 赞同：1
> 
> 时间：2013-01-24T20:01:05.633
> 
> 标签：c, recursion, backtracking

我在 youtube 上看到了这个讲座：[http](http://www.youtube.com/watch?v=p-gpaIGRCQI) ://www.youtube.com/watch?v=p-gpaIGRCQI 并且有我写的代码：

```
int _Solve(int iRow, int iCol)
{
    if (iRow == 9) return 1;

    if (arrBoard[iRow][iCol])
    {
        iRow = (iCol == 8) ? iRow + 1 : iRow;
        iCol = (iCol == 8) ? 0 : iCol + 1;

        if(_Solve(iRow, iCol)) return 1;
        return 0;
    }

    int iNewNum, iOldRow, iOldCol;
    for (iNewNum = 1; iNewNum <= SIZE; iNewNum++)
    {
        if (IsValid(iNewNum, iRow, iCol))
        {
            arrBoard[iRow][iCol] = iNewNum;

            iOldRow = iRow; iOldCol = iCol;
            iRow = (iCol == 8) ? iRow + 1 : iRow;
            iCol = (iCol == 8) ? 0 : iCol + 1;

            if (_Solve(iRow, iCol)) return 1;

            iRow = iOldRow; iCol = iOldCol;
            arrBoard[iRow][iCol] = 0;
        }
    }
    return 0;
} 
```

但它不起作用，在我打印我的 arrBoard 后，我得到的每个空单元格显示的值为零。这是将拼图放入 arrBoard 并显示它的函数（arrBoard 在 WM_CREATE 消息处初始化为零）：

```
void LabelsToBoard(void)
{
    int   iRow, iCol;
    TCHAR szTemp[2];

    for (iRow = 0; iRow < SIZE; iRow++)
        for (iCol = 0; iCol < SIZE; iCol++)
        {
            GetWindowText(hwndLabels[iRow][iCol], szTemp, 2);
            if (szTemp[0] != ' ')
                arrBoard[iRow][iCol] = szTemp[0] - '0';
        }
}
void BoardToLabels(void)
{
    int iRow, iCol;
    TCHAR szTemp[2];

    szTemp[1] = '\0';
    for (iRow = 0; iRow < SIZE; iRow++)
        for (iCol = 0; iCol < SIZE; iCol++)
        {
            szTemp[0] = arrBoard[iRow][iCol] + '0';
            SetWindowText(hwndLabels[iRow][iCol], szTemp);
        }

} 
```

怎么了？为什么它不起作用？

# android - 从矩形纹理区域创建扭曲的多边形 box2d 主体

> ID：14509700
> 
> 赞同：1
> 
> 时间：2013-01-24T20:01:22.303
> 
> 标签：android, box2d, sprite, andengine

我有一个矩形精灵。我创建了一个多边形体。我把它剪下来，我得到了需要创建的多边形的坐标。对我来说，挑战是使用该矩形纹理区域创建扭曲的（有点类似于未对齐的三角形）多边形。

我认为这个概念在某种程度上与裁剪身体或精灵或裁剪纹理区域有关。

顺便说一句，我尝试用这些结果坐标创建身体。身体的物理属性是根据坐标，但它不会在视觉上裁剪纹理。它向我展示了整个矩形:(

任何帮助都是不言而喻的。

![我的多边形主体是 abcd，现在我已经切割了我想使用相同纹理区域创建两个主体 abd 和 bcd 的主体。](../Images/cfee31e0764a86229e94d365db86b165.png)

# php - 如何将带有文本的表单作为流发布到 PHP 以避免浏览器发布限制？

> ID：14509716
> 
> 赞同：0
> 
> 时间：2013-01-24T20:02:03.497
> 
> 标签：php, post, browser, stream, limit

Web 浏览器限制了可以发布多少数据（字符）以防止攻击。在 IE 中大约有 2000 个字符，在 Chrome 中大约有 65,000 个字符。

我正在尝试发布一个表单，其中包含一个包含 200,000 多个字符的字段（准确地说是一个 json 强的向量）。

这比任何浏览器所允许的都要多，因此接收帖子的 PHP 页面只能看到大约 40% 的数据。

我能想到解决这个问题的唯一方法是流式传输表单帖子，以便 PHP 可以增量接收它。

这可能与 $raw = file_get_contents('php://input'); 例如，结合“应用程序/八位字节流”的表单编码类型？

非常感谢， Seb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:06:12.740

如果您在 Linux 或类似系统下使用 PHP，则可以使用 控制这些`.htaccess`，如下所示：

```
#set max post size
php_value post_max_size 50M 
```

希望这将允许您发送更多数据，而不是搞乱编码。

> 请求的 url 部分（GET 和 POST）可以受到浏览器和服务器的限制 - 通常安全大小为 2KB，因为几乎没有浏览器或服务器使用较小的限制。
> 
> 请求的正文（POST）通常*由服务器以字节大小为基础*，以防止某种类型的 DoS 攻击（请注意，这意味着字符转义会增加正文的字节大小）。最常见的服务器设置是 10MB，尽管所有流行的服务器都允许通过设置文件或面板来增加或减少此设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:06:24.730

您将 URL 长度限制与上传限制混淆了。通过 URL 传递的数据是一个`GET`查询，并且这些是基于每个浏览器的长度限制的。

如果您需要传递任意“大”数据，则使用 POST，它没有任意客户端长度限制，仅受服务器配置的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:41:30.890

好的 - 发现问题所在。数据在到达 Apache 之前通过 WAF 过滤器。这是正在运行的 mod_security，其发布限制为 64Kb。

# sql - 奇怪的 SQL 条件日期，STUCK

> ID：14509717
> 
> 赞同：1
> 
> 时间：2013-01-24T20:02:04.523
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我和在 SQL Server 中创建视图

以下是我的结果，基于此，我必须实际实现下面第二个表中显示的结果

```
PersonID      MonthYear     DateTimevalue
----------    ----------    --------------
 1             201101        NULL
 1             201102        NULL
 1             201103        2011-03-10 09:35:57.387
 1             201104        2011-04-26 13:25:00.050
 1             201105        NULL
 1             201106        NULL
 1             201107        2011-07-30 16:49:26.050
 1             201108        NULL
 1             201109        2011-09-21 13:33:42.273
 1             201110        2011-10-20 08:55:59.873
 1             201111        NULL
 1             201112        NULL 
```

所以，当 DateTimeValue 为 NULL 的情况下，我们需要取上个月的值

如下表所示

```
PersonID      MonthYear     DateTimevalue
----------    ----------    --------------
 1             201101        NULL
 1             201102        NULL
 1             201103        2011-03-10 09:35:57.387
 1             201104        2011-04-26 13:25:00.050
 1             201105        2011-04-26 13:25:00.050
 1             201106        2011-04-26 13:25:00.050
 1             201107        2011-07-30 16:49:26.050
 1             201108        2011-07-30 16:49:26.050
 1             201109        2011-09-21 13:33:42.273
 1             201110        2011-10-20 08:55:59.873
 1             201111        2011-10-20 08:55:59.873
 1             201112        2011-10-20 08:55:59.873 
```

任何帮助都会很棒！！！！

谢谢 ！！！！

谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:21:14.277

尝试以下操作：

```
SELECT  A.PersonID, 
        A.MonthYear, 
        ISNULL(A.DateTimeValue,B.DateTimeValue) DateTimeValue
FROM YourTable A
OUTER APPLY (   SELECT TOP 1 DateTimeValue 
                FROM YourTable
                WHERE PersonID = A.PersonID 
                AND MonthYear < A.MonthYear 
                AND DateTimeValue IS NOT NULL
                ORDER BY MonthYear DESC) B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:10:51.670

Sql Server 是否允许在 Select 子句中嵌套 SQL？如果是这样：

```
select personId, monthYear, 
       (select T2.DateTimeValue from Tbl T2 
        where T2.monthYear=(select max(T3.monthYear) from Tbl T3
                            where T3.personid=T1.personId and T3.monthYear<=T1.monthYear
                              and T3.DateTimeValue is not null
                           )
       )
from Tbl T1 
```

IE

1.  对于每个月，找到小于等于该月的月份，但 DateTime 不为空；
2.  将 DateTime 值查找到上述步骤中找到的月份

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:20:15.683

试试这个：

```
select t1.personid
  , t1.monthyear
  , datetimevalue = prev.datetimevalue
from t1
  outer apply
  (
    select top 1 datetimevalue
      , personid
      , monthyear
    from t1 prev
    where prev.monthyear <= t1.monthyear
      and prev.datetimevalue is not null
    order by monthyear desc
) prev
order by t1.personid
  , t1.monthyear 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!3/c6590/3)。

编辑为将*cross apply*更改为external *apply*，@Lamak 是对的。

# ruby-on-rails - 如何使用简单表单创建交互式表单？

> ID：14509721
> 
> 赞同：4
> 
> 时间：2013-01-24T20:02:18.093
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, simple-form

我有一个模型 ( `Listing`)，它有很多很多属性（比如 25 个）。

我想根据表单中的输入创建一个动态的 AJAX 表单。

这意味着如果用户选择`type=b`，他们将看到他们应该看到的其他字段，而不是他们不应该看到的字段。

理想情况下，它们应该立即从数据库中加载正确的内容——即以 AJAXy 方式。

解决这个问题的最佳方法是什么？

谢谢。

编辑：这是我的`_form.html.erb`. 您会注意到我包含了 2 个语句，这些语句指示如果选择的值是指定的值之一，`if`则应显示哪些字段：`property_type`

```
<%= simple_form_for(@listing) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :headline %>
    <%= f.input :price %>    
    <%= f.association :property_type %>

    If property_type == "coop"

    <%= f.input :maintenance %>
    <%= f.input :coop_deductible %>
    <%= f.input :flip_tax %>

    if property_type == "condo"

    <%= f.input :common_charges %>
    <%= f.input :taxes %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

**编辑2：**

这是我使用的 Rails 表单助手 - 由 gem Simple_Form 提供支持：

```
<%= simple_form_for @listing, :defaults => { :wrapper_html => { :class => 'form-horizontal' } } do |f| %>
  <%= f.error_notification %>
  <fieldset>
    <%= f.association :listing_category, :label => "Category: ", :label_html => { :class => "control-label"}, :wrapper_html => { :class => "controls"} %>

    <div style="display: none;" data-show-for="Exclusive">
        <%= f.association :listing_type %>
      <%= f.association :user %>
      <%= f.association :boro %>
    </div>

    <div style="display: none;" data-show-for="Open">
      <%= f.association :neighborhood %>    
      <%= f.association :building %>
      <%= f.association :term %>
      <%= f.association :property_type %>
    </div>

    <div class="form-actions">
    <%= f.button :submit, :class => "btn btn-primary" %>
    <!-- <button type="submit" class="btn btn-primary">Save and Continue</button>
    <button type="reset" class="btn">Cancel</button> -->
    </div>
  </fieldset>

  <% end %> 
```

这是它生成的 HTML：

```
<form accept-charset="UTF-8" action="/listings" class="simple_form new_listing" id="new_listing" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="1oDfg41Wx/SiPCsvf4qTAcxhFUGSNlhlLfkMy8nHW1E=" /></div>

              <fieldset>
                <div class="control-group select optional controls"><label class="select optional control-label control-label" for="listing_listing_category_id">Category:</label><div class="controls"><select class="select optional" id="listing_listing_category_id" name="listing[listing_category_id]"><option value=""></option>
<option value="1">Exclusive</option>
<option value="2">Open</option></select></div></div>

          <div style="display: none;" data-show-for="Exclusive">
            <div class="control-group select optional form-horizontal"><label class="select optional control-label" for="listing_listing_type_id">Listing type</label><div class="controls"><select class="select optional" id="listing_listing_type_id" name="listing[listing_type_id]"><option value=""></option>
</select></div></div>
            <div class="control-group select optional form-horizontal"><label class="select optional control-label" for="listing_user_id">User</label><div class="controls"><select class="select optional" id="listing_user_id" name="listing[user_id]"><option value=""></option>
<option value="1">First User</option>
<option value="2">Second User</option>
<option value="3">Third User</option>
<option value="4">Fourth User</option>
<option value="5">Fifth User</option></select></div></div>
            <div class="control-group select optional form-horizontal"><label class="select optional control-label" for="listing_boro_id">Boro</label><div class="controls"><select class="select optional" id="listing_boro_id" name="listing[boro_id]"><option value=""></option>
<option value="1">Brooklyn</option></select></div></div>
          </div>

          <div style="display: none;" data-show-for="Open">
            <div class="control-group select optional form-horizontal"><label class="select optional control-label" for="listing_neighborhood_id">Neighborhood</label><div class="controls"><select class="select optional" id="listing_neighborhood_id" name="listing[neighborhood_id]"><option value=""></option>
<option value="1">Prospect Heights</option></select></div></div>    
            <div class="control-group select optional form-horizontal"><label class="select optional control-label" for="listing_building_id">Building</label><div class="controls"><select class="select optional" id="listing_building_id" name="listing[building_id]"><option value=""></option>
<option value="1">Trump Towers</option></select></div></div>
            <div class="control-group select optional form-horizontal"><label class="select optional control-label" for="listing_term_id">Term</label><div class="controls"><select class="select optional" id="listing_term_id" name="listing[term_id]"><option value=""></option>
</select></div></div>
            <div class="control-group select optional form-horizontal"><label class="select optional control-label" for="listing_property_type_id">Property type</label><div class="controls"><select class="select optional" id="listing_property_type_id" name="listing[property_type_id]"><option value=""></option>
<option value="1">Coop</option></select></div></div>
          </div>

    <div class="form-actions">
                <input class="btn btn btn-primary" name="commit" type="submit" value="Create Listing" />
          <!-- <button type="submit" class="btn btn-primary">Save and Continue</button>
          <button type="reset" class="btn">Cancel</button> -->
                </div>
              </fieldset>

</form> 
```

这是我包含在我的`listing.js`- 对应于此表单所在的文件的 JS`app/views/listings/new.html.erb`

```
$(document).ready(function({

    $('#listing_listing_category_id').on('change', function(){
        var option = $(this).find(':selected');
        $('[data-show-for]').hide(); //And maybe reset?
        $('[data-show-for="+ option.text +"]').show()
    });

}); 
```

当我选择我想要的选项时，它没有显示我想要查看的字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T21:04:24.743

就我个人而言，我不会使用 AJAX，只是直接 JS/JQuery 使用数据属性在点击时显示/隐藏。

见小提琴：http: [//jsfiddle.net/XnPZF/](http://jsfiddle.net/XnPZF/)

首先，将数据属性添加到要隐藏/显示的部分：

```
<div style="display: none;" data-show-for="coop">
  <%= f.input :maintenance %>
  <%= f.input :coop_deductible %>
  <%= f.input :flip_tax %>
</div>

<div style="display: none;" data-show-for="condo">
  <%= f.input :common_charges %>
  <%= f.input :taxes %>
</div> 
```

然后在选择上创建一个更改事件：

```
$('#listing_property_type').on('change', function(){
    var option = $(this).find(':selected');
    $('[data-show-for]').hide(); //And maybe reset?
    $('[data-show-for='+ option.text() +']').show()
}); 
```

对于 data-show-for，您可以使用 Option 文本或值，只要确保事件知道哪个。如果您打算多次使用它，则可以对其进行概括，但这意味着建立您的选择。

# prolog - 家庭关系序言 - 距离

> ID：14509723
> 
> 赞同：1
> 
> 时间：2013-01-24T20:02:27.463
> 
> 标签：prolog, graph-theory, shortest-path

假设我有以下谓词：

```
father(aaron, chloe).
father(aaron, dan).
father(aaron, emily).
father(frank, george).
mother(beth, chloe).
mother(beth, dan).
mother(beth, emily).
mother(emily, george).
sibling(X,Y) :-...
parents(X,Y) :-... 
```

我想找到家谱的两个成员之间的**最短路线（距离）。**例如，父母之间的距离是 2，兄弟（兄弟姐妹）之间的距离是 1。我尝试了以下方法（但没有奏效）：

```
 parent(X,Y) :- 
    father(X,Y);  
    mother(X,Y). 

sibling(X,Y):- 
    parent(Z,X), !, parent(Z,Y),
    not(X=Y).

not_in_list(_,[]).
not_in_list(X,[Y|L]):- 
    not(X=Y), 
    not_in_list(X,L).

edge(X,Y):- 
    (parent(X,Y);
    parent(Y,X);
    sibling(X,Y)).

list_length(0,[]).
list_length(N,[_|Ys]):- 
    list_length(N1,Ys), 
    N is N1+1.

travel_graph(X,X,_).
travel_graph(From,To,[From|Path]):- 
    edge(From,Next), 
    not_in_list(Next,Path), 
    travel_graph(Next,To,Path).

degree(X,Y,N):- 
    travel_graph(X,Y,L), 
    list_length(N,L). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:03:49.863

通常，当您想要最短路径时，您需要广度优先搜索。这里有一些讨论：[Prolog 中的广度优先](https://stackoverflow.com/questions/769658/breadth-first-in-prolog)

Prolog 将首先尝试找到解决方案的深度，因此它将查看特定推理线可以走多远。当您想要最短路径时，您宁愿 Prolog 尝试所有第一个选项，然后从每个选项向外迭代，直到找到解决方案。这样，您找到的第一个解决方案将是最短的。如果您可能有无限的解决方案（例如走迷宫，您可以备份和追溯您的步骤），这是唯一的方法。

不幸的是，没有可以翻转来获得广度优先搜索的神奇开关，所以你必须实现它。O'Keefe 在*The Craft of Prolog*中非常清楚地解释了这一点，首先解释了如何将普通的 Prolog 搜索转换为具有“开放集”尚未尝试的事物的显式深度优先搜索，然后解释如何更改表示开放集的列表的顺序以获得广度优先行为。

# python - 在 Apache/CGI 中运行 Flask 时遇到问题

> ID：14509727
> 
> 赞同：3
> 
> 时间：2013-01-24T20:02:39.193
> 
> 标签：python, cgi, flask

我有一个来自 Namecheap 的共享主机（无 ssh 访问）。当我输入包含 .py 扩展名的完整路径时，我可以在 CGI-bin 目录中运行任何 python 文件。我想知道如何在这样的环境中运行烧瓶应用程序。我应该更改 .htaccess 还是制作 .cgi 或 fcgi 或 wsgi？我不确定这些是什么或它们做什么。如果有人也可以解释这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:51:42.780

查看[http://flask.pocoo.org/docs/deploying/cgi/](http://flask.pocoo.org/docs/deploying/cgi/)

如果您的 CGI 应用程序在 可用`http://example.com/cgi-bin/myapp.py`，则必须将以下内容放入`.htaccess`（假设您使用 Apache）以使应用程序在 可用`http://example.com/`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f # Don't interfere with static files
RewriteRule ^(.*)$ /cgi-bin/myapp.py/$1 [L] 
```

# objective-c - 让 2 个 UIimageviews 加载相同的图片

> ID：14509728
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:02:42.370
> 
> 标签：objective-c, ios6, uiimageview

我有 2 个 UIImageviews 我想在视图控制器加载时共享相同的 pic.png。如何链接 UIImageviews 以显示相同的图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:07:03.060

这很简单

```
imageView1.image = [UIImage imageNamed:@"test.png"];
imageView2.image = imageView1.image; 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:08:15.863

最直接的方法如下：

```
self.imageView1.image = myImage;
self.imageView2.image = myImage; 
```

如果您希望将它们链接起来，以便它们始终显示相同的图像，那么您最好不要使用这样的方法。我已将`UIImageView`s 放入一个数组中，以展示如何将此技术扩展到任意数量的图像视图：

```
- (void)showImage:(UIImage *)newImage
{
    for (UIImageView *imageView in imageViewsArray)
    {
        imageView.image = newImage;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:01:14.243

只需将两个 UIImages 设置为相同的值，或者只是将第二个图像的值设置为第一个。

```
imageView.image = [UIImage imageNamed:@"Default.png"];
imageView2.image = imageView.image; 
```

# c# - 使用 Visual Studio 2012/Blend 在 C# 中创建类似 Windows 8 的窗口

> ID：14509730
> 
> 赞同：4
> 
> 时间：2013-01-24T20:02:51.483
> 
> 标签：c#, windows-8, visual-studio-2012, blend

我想创建具有 Windows 8 样式窗口的桌面应用程序（如[GitHub for windows](http://windows.github.com)）。AFAIK Blend 只允许制作 Metro（现代 UI）应用程序的布局（我错了吗？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:13:39.257

我会看看[MahApps.Metro](https://www.nuget.org/packages/MahApps.Metro)或[Elysium](http://elysium.codeplex.com/)。他们有很多以地铁为主题的控件。

# hibernate - 元小部件：HibernateInspector

> ID：14509734
> 
> 赞同：0
> 
> 时间：2013-01-24T20:03:01.297
> 
> 标签：hibernate

我正在使用使用 HibernateInspector 配置的 metawidget.xml。但是，metawidget 似乎没有选择长度属性。

我期待文本框限制为 5 个字符。

```
<property name="code" type="string">
    <column name="CODE" length="5" />
</property> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:03:42.300

目前，HibernateInspector 将识别表单的长度：

（所以不是你上面使用的嵌套“列”标签。你需要那个吗？）

但是，是的，除此之外 SwingWidgetBuilder 将忽略最大长度。这是因为，正如您所推测的那样，Swing 默认情况下并不真正支持最大长度的文本框。Metawidget 尽量不要过多地使用底层工具包的 API，因为我们不想成为“又一个 UI 框架”。

但是，Metawidget 可以很容易地添加您自己的 WidgetBuilder，它可以读取最大长度属性并使用您描述的“insertString”技术（或您喜欢的任何其他方法。例如，您可能会找到一个提供此功能的 Swing 小部件库） .

有关如何实现自己的 WidgetBuilder 的示例，请参见此处：http: [//metawidget.org/doc/reference/en/html-single/index.html#section-architecture-widgetbuilders-implementing-your-own](http://metawidget.org/doc/reference/en/html-single/index.html#section-architecture-widgetbuilders-implementing-your-own)

# c# - 在不丢失文本顺序的情况下将字符串拆分为字符串数组

> ID：14509736
> 
> 赞同：2
> 
> 时间：2013-01-24T20:03:04.033
> 
> 标签：c#, arrays, string, split, .net-2.0

我有一个问题困扰了我 7 天，所以我决定向您寻求帮助。这是我的问题：

我从 datagridview 读取数据（只有 2 个单元格），并在 stringbuilder 中填写所有给定数据，它实际上是文章和价格，如发票（账单）。现在，我将在 stringbuilder 中获得的所有内容添加到 string 中，目的是在 line 下拆分 string 行，我的代码的那部分工作但不是我不会的。文章是一个在另一个之下，但价格是一个价格更左另一个更右，而不是全部在一条垂直线上，如下所示：

```
Bread  10$
Egg    4$
Milk   5$ 
```

我的代码：

```
string[] lines;
StringBuilder sbd = new StringBuilder();
foreach (DataGridViewRow rowe in dataGridView2.Rows)
{
    sbd.Append(rowe.Cells[0].Value).Append(rowe.Cells[10].Value);
    sbd.Append("\n");
}
sbd.Remove(sbd.Length - 1, 1);
string userOutput = sbd.ToString();
lines = userOutput.Split(new string[] { "\r", "\n" },    
StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:35:24.517

您可以使用该`Trim`方法来删除现有的前导和尾随空格。您可以自动添加正确数量的空格以`PadRight`获得指定的总长度。

还可以使用`List<string>`自动增长的 a，而不是使用从之前拆分的数组中获得的数组：

```
List<string> lines = new List<string>();
foreach (DataGridViewRow row in dataGridView2.Rows) {
    lines.Add( row.Cells[0].Value.ToString().Trim().PadRight(25) +
               row.Cells[10].Value.ToString().Trim());
} 
```

但请记住，这种格式化方式只有在以等宽字体（如`Courier New`或`Consolas`）显示字符串时才有效。像比例字体`Arial`会产生锯齿状的列。

`Count`或者，您可以通过从属性中读取行数来创建具有正确大小的数组

```
string[] lines = new string[dataGridView2.Rows.Count];
for (int i = 0; i < lines.Length; i++) {
    DataGridViewRow row = dataGridView2.Rows[i];
    lines[i] = row.Cells[0].Value.ToString().Trim().PadRight(25) +
               row.Cells[10].Value.ToString().Trim();
} 
```

您还可以使用该`PadLeft`方法来右对齐金额

```
row.Cells[10].Value.ToString().Trim().PadLeft(10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:18:52.423

您是否尝试过这种[字符串拆分方法](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)？

```
String myString = "Bread         ;10$;";

String articleName = myString.split(';')[0];
String price = myString.split(';')[1]; 
```

# android - android如何从listview标头中获取元素

> ID：14509737
> 
> 赞同：3
> 
> 时间：2013-01-24T20:03:06.553
> 
> 标签：android, android-layout, android-listview, android-activity

我有这个 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dip"
        android:layout_marginTop="20dip"
        android:gravity="center_horizontal"
        android:text="@string/app_name"
        android:textSize="25dip"
        android:textStyle="bold"
        android:typeface="serif" />

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="150dip"
        android:layout_marginBottom="10dip"
        android:contentDescription="@string/iv_restaurantImage"
        android:src="@drawable/ic_launcher" />

    <ListView
        android:id="@+id/lv_restaurant_description_information"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

列表视图是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginBottom="20dip"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tv_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/app_name"
        android:typeface="serif"
        android:textSize="15dip" />

    <TextView
        android:id="@+id/tv_value"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dip"
        android:text="@string/IV_LOGO_DESCRIPTION"
        android:textSize="20dip" />

</LinearLayout> 
```

列表视图标题是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/rl_simple_list_item_header"

    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/orderMeal"
        android:layout_marginLeft="20dip"
        android:id="@+id/tv_restaurant_description_orderMeal"
        android:drawableTop="@drawable/order_meal" />
    <TextView 
        android:id="@+id/iv_simple_list_item_header_favorite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/favorite"
        android:layout_alignParentRight="true"
        android:layout_marginRight="20dip"
        android:drawableTop="@drawable/favorite"/>
</RelativeLayout> 
```

在java活动中，我像这样将标题添加到listview

```
lv_restaurantInformation = (ListView) findViewById(R.id.lv_restaurant_description_information);
        View header = LayoutInflater.from(this).inflate(
                R.layout.simple_list_item_header, null);
        tv_favorite = (TextView) header
                .findViewById(R.id.iv_simple_list_item_header_favorite);
        lv_restaurantInformation.addHeaderView(header); 
```

一切都很好，应用程序正在运行，现在我想获取列表视图标题上的元素，如何？以及如何为他们设置 onclick 监听器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:08:07.973

看起来你已经在这样做了。

```
tv_favorite = (TextView) header
            .findViewById(R.id.iv_simple_list_item_header_favorite);

// now just add a click listener.
tv_favorite.setOnClickListener(new View.OnClickListener() .... ); 
```

# oracle - Oracle - PSQL 编译错误

> ID：14509739
> 
> 赞同：-3
> 
> 时间：2013-01-24T20:03:12.643
> 
> 标签：oracle

有人可以告诉我为什么这个 PSQL 会出现编译错误吗？

```
set serveroutput on
Create or replace function get_warehouse_location(Name in Customer.Name%type)
return w.location %type as
wLocation     warehouse.Location %type;
begin
select warehouse.location 
into wLocation
from Customer c, Warehouse w
where cName= 'Finch'
and warehouse.address='       ';
return (Location);
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:19:34.000

至少有一个关于如何调用类型的问题。应该是 table.field%TYPE。没有空间。

```
set serveroutput on
Create or replace function get_warehouse_location(Name in Customer.Name%type)
return w.location%type as
wLocation     warehouse.Location%type;
begin
select warehouse.location 
into wLocation
from Customer c, Warehouse w
where cName= 'Finch'
and warehouse.address='       ';
return (Location);
end; 
```

# java - 为什么 Java 不允许注入嵌套泛型？

> ID：14509740
> 
> 赞同：4
> 
> 时间：2013-01-24T20:03:16.053
> 
> 标签：java, generics

如果我写：

```
List<List<String>> strings = new ArrayList<ArrayList<String>>(); 
```

我收到以下编译器错误：

```
Type mismatch: cannot convert from ArrayList<ArrayList<String>> to List<List<String>> 
```

为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T20:05:31.987

泛型不是协变的，因此您必须使用：

```
List<List<String>> strings = new ArrayList<List<String>>(); 
```

请注意外部右侧声明`ArrayList`如何“变成” a `List`。这同样不适用于泛型中出现的任何内容。

*   [协方差](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)
*   [泛型陷阱](https://www.ibm.com/developerworks/java/library/j-jtp01255/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:06:02.963

你可以做你想要的代码，你只需要更新你的初始化：

```
List<List<String>> strings = new ArrayList<List<String>>(); 
```

然后，对于要添加到外部列表的每个项目：

```
strings.add(new ArrayList<String>()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:14:20.163

如果允许这样做，您最终可能会在某一时刻依赖列表作为 ArrayList 的列表，同时在其他地方推入其他内容。

例如，这样做也是合法的：

```
ArrayList<ArrayList<String>> arrayLists = new ArrayList<ArrayList<String>>();
List<List<String>> unknownLists = arrayLists ;
unknownLists.append(new LinkedList<String>());
for (ArrayList<String> l : arrayLists ) // (1)
  System.out.println(l); 
```

这会编译得很好，但会在 (1) 处给您一个 ClassCastException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:19:13.017

你不能这样做，因为类型是坚持的。但是，您可以这样写：

```
List<? extends List<String>> strings = new ArrayList<ArrayList<String>>(); 
```

# c - 不可能完成的任务——格式化字符串攻击

> ID：14509741
> 
> 赞同：1
> 
> 时间：2013-01-24T20:03:17.230
> 
> 标签：c, string, format

> **可能重复：**
> [printf 中的格式字符串攻击](https://stackoverflow.com/questions/14505995/format-string-attack-in-printf)

所以伙计们，这不是作业，我在 IT 营，老师给了我们这个代码：

```
#include <stdio.h>
int main()
{
    char s[200],s2[100];
    int a=123;
    int b=&a;
    puts("camp login:");
    scanf("%100s",&s);
    puts("somedata:");
    scanf("%50s",s2);
    printf(s2);

    if (a==31337)
        func(s);
} 
```

并告诉我们在不更改代码的情况下执行 func(s)。只需编译、运行、输入一些数据。实际上，这是通过连接到 SSH 服务器来完成的，该服务器会自动启动程序，并在执行完成后断开用户连接。

我不确定是否

```
 puts("camp login:");
    scanf("%100s",&s); 
```

真的很重要，实际上他们是在询问我们的系统登录，大概是要知道谁完成了任务。我发现了什么：

```
int b=&a; //Ultra-weird
scanf("%50s",s2); //Shouldn't it be "scanf("%50s",&s2);" ? 
```

好吧，我知道我现在冒着一些回购的风险，这不是一个真正的编程问题，但我希望它足够有趣，不要被删除:)

感谢您的任何回答！

# session - Cake PHP 2.x Auth 数据仅在一个控制器中可用，在其余控制器中为空。知道为什么吗？

> ID：14509742
> 
> 赞同：4
> 
> 时间：2013-01-24T20:03:40.563
> 
> 标签：session, cakephp, login, controller, authorization

我是 CakePHP 的新手，尽管搜索了高低，但我无法找到看似微不足道的问题的答案。问题是通过我的 UserController 登录后，我丢失了`$this->Auth->user()`在所有其他控制器上找到的数据。任何未与 UserController 关联的视图将始终具有空数据并`$this->Auth->loggedIn()`返回 false。

在我的 AppController 类中，我尝试将数据保存到内部的变量`beforeFilter()`中，以便我可以在视图中检查该变量，但这并没有什么不同。这是我的 UserController 和 AppController 类的相关代码：

```
class AppController extends Controller {

// Pass settings in $components array
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'home', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'home', 'action' => 'index')
    )
);

public function beforeFilter() {
    //debug($this->Auth->user());
    $this->set('loggedIn', $this->Auth->user());    

    }

} 
```

用户类：

```
App::uses('AppController', 'Controller');

class UsersController extends AppController {

public $helpers = array('Html', 'Form');
public $name = 'Users';

public function beforeFilter() {
    parent::beforeFilter();
}

public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            return $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
        }
    }
}

public function logout() {
    return $this->redirect($this->Auth->logout());
}

} 
```

我还确保`parent::beforeFilter()`在我的其他控制器中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:54:54.837

我相信我找到了解决方案。在我的 HomeController 中，这是我登录后一直查看的页面，似乎在关闭 php 声明之后有一些不可见的字符`?>`（也不需要）所以我删除了它，`?>`瞧，一切正常正如预期的那样。

在我尝试在我的布局中手动使用之后，我被告知有什么不对劲，并且在 HomeController 类`session_start()`中给出了关于该行的错误。`?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:52:43.047

我认为你应该在你的类中设置`loggedIn`函数`beforeRender()`而`AppController`不是`beforeFilter()`.

```
public function beforeRender() {
    $this->set('loggedIn', $this->Auth->user());   
} 
```

# database - 将大对象插入 Postgresql 会返回 53200 Out of Memory 错误

> ID：14509747
> 
> 赞同：0
> 
> 时间：2013-01-24T20:03:50.523
> 
> 标签：database, memory, blob, postgresql-9.1, npgsql

Postgresql 9.1 NPGSQL 2.0.12

我有想要存储在 postgresql 数据库中的二进制数据。大多数文件加载正常，但是，大型二进制 (664 Mb) 文件会导致问题。当尝试通过 Npgsql 使用大对象支持将文件加载到 postgresql 时，postgresql 服务器返回“内存不足”错误。

我目前在具有 4Gb RAM 的工作站上运行它，2Gb 空闲，postgresql 在空闲状态下运行。

这是我正在使用的代码，改编自[PG Foundry Npgsql User's Manual](http://npgsql.projects.pgfoundry.org/docs/manual/UserManual.html)。

```
using (var transaction = connection.BeginTransaction())
{
    try
    {
        var manager = new NpgsqlTypes.LargeObjectManager(connection);
        var noid = manager.Create(NpgsqlTypes.LargeObjectManager.READWRITE);
        var lo = manager.Open(noid, NpgsqlTypes.LargeObjectManager.READWRITE);
        lo.Write(BinaryData);
        lo.Close();
        transaction.Commit();
        return noid;
    }
    catch
    {
        transaction.Rollback();
        throw;
    }
} 
```

我尝试将 postgresql 的内存设置从默认值修改为各种值调整：

*   共享缓冲区
*   工作记忆
*   维护工作内存

到目前为止，我发现 postgresql 是一个很棒的数据库系统，但目前这是一个显示停止器，我似乎无法将这个大小的文件放入数据库。如果可以的话，我真的不想手动将文件切成块并重新创建客户端。

请帮忙！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:14:33.840

我认为答案似乎是用字节数组的块迭代地调用 LargeObject 类的 Write() 方法。我知道我说过我不想处理数据分块，但我真正的意思是将数据分块成单独的大对象。这个解决方案意味着我将数组分块，但它仍然作为一个对象存储在数据库中，这意味着我不必跟踪文件部分，只需跟踪一个 oid。

```
 do 
 {
   var length = 1000;
   if (i + length > BinaryData.Length) length = BinaryData.Length - i;
   byte[] chunk = new byte[length];
   Array.Copy(BinaryData, i, chunk, 0, length);
   lo.Write(chunk, 0, length);
   i += length;
 } (i < BinaryData.Length) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:33:45.227

尝试减少 max_connections 的数量，以便为需要执行 700MB 操作的少数连接保留内存。将 work_mem（每次操作可用的内存）增加到 1GB。试图将 700MB 塞进一个字段听起来很奇怪。

将 shared_buffers 大小增加到 4096MB。

# coldfusion - 会话问题中的coldfusion查询

> ID：14509751
> 
> 赞同：0
> 
> 时间：2013-01-24T20:04:00.657
> 
> 标签：coldfusion, coldbox

使用 Coldfusion 8、Coldbox 2.6.3。

在会话中存储查询对象。会话是异步设置的，并尝试在弹出窗口中“立即”读取以生成 excel 表/csv。生成文件中垃圾数据的初始错误在设置/读取会话代码块（会话范围）时使用“cflock”修复。相同的会话变量在多个位置设置为不同的查询。新错误是会话变量只是设置为它设置的上一个查询，而不是它应该设置的查询。等待几秒钟并进行刷新后，会话变量具有正确的查询。

在 CF 调试中生成了一个 Coldfusion 异常，即未定义某个查询列 - 列名被硬编码以从会话中的查询中读取 - 这只是意味着会话 var 有错误的查询，我确认它是之前使用的查询cfdump。

我想知道为什么 cflock 会解决垃圾数据问题而不是这个问题。谢谢。

# php - 将值从 Javascript 发送到 Android

> ID：14509755
> 
> 赞同：0
> 
> 时间：2013-01-24T20:04:24.013
> 
> 标签：php, javascript, android, android-webview

我正在制作一个连接到服务器的应用程序，它需要从该服务器获取路径，该路径将用于将文件上传到该服务器。

在应用程序中，有一个 webview 显示带有选项的网页。当您触摸/单击一个按钮时……可以说，“获取 url”应该将 url（一个简单的字符串值）从服务器发送到应用程序。

在应用程序中，我认为它可能是这样的。

```
class JSInterface {

public void getUrl(String URL) {
MainActivity.doSomethingWithUrl(URL);
}
} 
```

在服务器端：

```
<html>
<head>
<script>
   function sendUrl() {
      Android.getUrl() 
   }
</script>
</head>
<body>
<input type="button" value="sendUrl" onClick="sendUrl()" />
</body>
</html> 
```

在 js 中的 sendURL 函数是我不知道该怎么做的地方。PD：服务器后端是php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:11:46.463

你应该阅读 webView 的 addJavaScriptInterface 方法：

[http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)

Some more reading here: [Understanding Android's webview addjavascriptinterface](https://stackoverflow.com/questions/10962150/understanding-androids-webview-addjavascriptinterface)

It shouldn't be hard to find more information if you need it.

# parallel-processing - “良好并行化”算法没有被多个线程加速

> ID：14509756
> 
> 赞同：0
> 
> 时间：2013-01-24T20:04:24.543
> 
> 标签：parallel-processing

我很抱歉提出一个我知之甚少的话题，但这个想法确实困扰着我，我无法在互联网上找到任何答案。

**背景：** 我正在和我的一位从事计算机科学研究的朋友交谈。我主要从事临时开发，所以我对大多数 CS 概念的理解是在功能层面（我知道如何使用它们而不是它们如何工作）。他说，将在单个线程上运行的“良好并行化”算法转换为在多个线程上运行的算法并不会导致他所期望的处理速度提高。

**推理：** 我问他运行这个算法的计算机的架构是什么，他说 16 核（非虚拟化）。根据我对多核处理器的了解，在多核上运行的算法的处理速度提升应该与它的并行化程度大致成正比。

**问题：** “良好并行化”并正确编程以在真正的多核处理器上运行的算法怎么能不快几倍？是否有一些我在这里遗漏的信息，或者更可能是实施的问题？

**其他东西：**我问线程是否可能比任何单个内核可用的功率都多，显然每个内核都运行在 3.4 GHz。这远远超出了算法应该需要的范围，并且在运行诊断时，内核不会在运行时达到最大值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:57:03.817

这很可能是共享的*东西*。共享的内容可能并不明显。

最常见的非显而易见的共享资源之一是 CPU 缓存。如果线程正在更新相同的缓存线，那么缓存线必须在 CPU 之间反弹，从而减慢一切。

这可能是因为访问（甚至是只读）在内存中彼此靠近的变量。如果所有访问都是只读的，那没关系，但即使一个 CPU 正在写入该缓存行，它也会强制反弹。

解决此问题的蛮力方法是将共享变量放入如下结构中：

```
struct var_struct {
    int value;
    char padding[128];
}; 
```

您可以研究哪些系统参数或预处理器宏为您的系统类型定义缓存行大小，而不是硬编码 128。

另一个可以进行共享的地方是系统调用内部。即使是看似无辜的函数也可能使用全局锁。我似乎记得在不久前阅读过有关 Linux 通过锁定返回进程和线程标识符以及父标识符的函数来解决此类问题的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:17:59.170

性能与内核数量的关系通常是一个 S 形曲线——首先它明显增加，但随着锁定、共享缓存等的出现，它们欠下更多的内核并没有增加太多，甚至可能会降级。因此没有什么神秘的。如果我们能了解更多关于算法的细节，就有可能找到一个想法来加速它。

# django - Django 索引 url 混淆

> ID：14509758
> 
> 赞同：0
> 
> 时间：2013-01-24T20:04:27.130
> 
> 标签：django, django-urls

嗨，感谢您对此进行调查。

我一直在关注 Django 关于 URL 的教程，对此部分有点困惑/卡住： [https ://docs.djangoproject.com/en/1.4/intro/tutorial03/#decoupling-the-urlconfs](https://docs.djangoproject.com/en/1.4/intro/tutorial03/#decoupling-the-urlconfs)

我不明白的是，如果在 mypage.com 页面上我只为 mypage.com/polls 和 mypage.com/admin 提供了 2 个可能的 URL，如果用户访问 mypage.com 会发生什么？显然，我认为，用户将需要看到某种“欢迎”页面，因此我决定在该 urls.py 中添加另一个 URL：

```
urlpatterns = patterns('',
 url(r'^/', 'myapp.views.welcome'), #when it's just mysite.com

 url(r'^myapp/', include('myapp.urls')), #includes everything with mysite.com/myapp/...
 url(r'^admin/', include(admin.site.urls)),
) 
```

但是，无论我是否转到 /myapp，我都会从任何页面重定向到该欢迎视图。所以，我决定在 myapps 文件夹之外创建一个 views.py 文件并将欢迎页面放在那里，它似乎已经工作了，除了我得到一个 404。

我感到很困惑！你能用lamers的话解释一下吗

谢谢，布拉吉布拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:06:24.433

它应该是

```
url(r'^$', 'myapp.views.welcome') 
```

否则任何 URL 都将匹配该模式。Django 将为`urlpatterns`匹配中的第一个模式调用视图，因此您需要具体并将行尾字符 ( `$`) 包含到模式中。

# java - How to move "WEB-INF/lib" folder to a sub folder in a Java Dynamic Web App?

> ID：14509766
> 
> 赞同：1
> 
> 时间：2013-01-24T20:04:51.903
> 
> 标签：java, eclipse, jar, web-inf

**How can I configure a Java Dynamic Web Project in Eclipse so the WEB-INF/lib folder is located in a sub folder?**

For example, say I wanted my "lib" folder to be located here:

> src/main/webapp/WEB-INF/lib

and my webapp root is here:

> src/main/webapp/

How do I configure this in Eclipse? I know I could just "add the jars", but I'd like them to be organized under my "Web App Libraries" section in the Libraries section of my app's build path.

* * *

**What I've tried:**

I've tried adding "Web App Libraries" by doing the following, but it doesn't detect the jars in my "src/main/webapp/WEB-INF/lib" folder:

*   Project | Properties | Java Build Path | Libraries | Add Library | Web App Libraries

I've also ensured that the root of my web app (src/main/webapp) is in my "Source folders on Build Path" as well, with no luck:

*   Project | Properties | Java Build Path | Source | Source folders on Build Path

I know it can be done, as I've got another project that has this configured and working, but I'm not sure how to duplicate the configuration.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:10:32.387

Turns out that I could get this to work by adding the following file to my project:

**.settings/org.eclipse.wst.common.component**

```
 <?xml version="1.0" encoding="UTF-8"?>
  <project-modules id="moduleCoreId" project-version="1.5.0">
      <wb-module deploy-name="test1">
          <wb-resource deploy-path="/" source-path="/src/main/webapp" tag="defaultRootSource"/>
          <property name="context-root" value="test1"/>
          <property name="java-output-path" value="/test1/build/classes"/>
      </wb-module>
  </project-modules> 
```

I found this out by creating a brand new "Dynamic Web Project":

*   "File | New | Dynamic Web Project"
*   Go through the steps until you get to the last one called "Web Module"
*   There I could specify a "Content Directory" for the app, and I used "src/main/webapp/".
*   This generated a new project that worked as I liked. I then searched the project folder for "src/main/webapp" and found it in this xml file, which I just copied into my project, and changed all references from "test1" to my projects name, and it worked!

Note: You may also need to add "Web App Libraries" to your project as detailed in my question.

# knockout.js - Knockout JS 绑定更新混乱

> ID：14509769
> 
> 赞同：3
> 
> 时间：2013-01-24T20:05:05.463
> 
> 标签：knockout.js

我是 KO 和 JS 的新手，并进行了以下测试。我想在什么时候看到登录按钮，在什么时候看到`vm.authenticated == false`注销按钮`vm.authenticated == true`。我看到标题正确更改，所以我似乎绑定正常，但 KO`if`似乎不起作用。我试图使`authenticated`observable 但这确实解决了它。任何帮助表示赞赏。

感谢和问候

这是HTML代码：

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <title>Test</title>
</head>

<body>
    <script src="../Scripts/libs/jquery-1.9.0.js"></script>
    <script src="../Scripts/libs/knockout-2.2.1.debug.js"></script>

    <p data-bind="text: title"></p>
    <!-- ko if: authenticated == false -->
    <form>
        <input type="text" data-bind="value: userId"/>
        <input type="password" data-bind="value: password"/>
        <button type="button" data-bind="click: login">Login</button>
    </form>
    <!-- /ko -->
    <!-- ko if: authenticated == true -->
    <form>
        <input type="text" data-bind="value: userId"/>
        <button type="button" data-bind="click: logout">Logout</button>
    </form>
    <!-- /ko -->

    <script type="text/javascript">
        window.onload = function () {
            var vm = {userId: 'user', password: 'password', title: 'unsigned', authenticated: false, login: function () {
                    var vm1 = {
                        userId: 'user', password: 'password', title: 'unsigned1', authenticated: true, login: function () { }, logout: function () {
                            var vm2 = { userId: 'user', password: 'password', title: 'unsigned2', authenticated: false, login: function () { }, logout: function () { } };
                            ko.applyBindings(vm2); 
                        }
                    };
                    ko.applyBindings(vm1); 
                }, logout: function () { }
            };
            ko.applyBindings(vm); 
        };
    </script>    
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:46:58.850

这是[你](http://jsfiddle.net/Zjb2n/1/)想要达到的目标吗？

```
var vm = {
    userId: 'user',
    password: 'password',
    title: ko.observable('unsigned'),
    authenticated: ko.observable(false),
    login: function () {
        vm.userId = 'user';
        vm.password = 'password';
        vm.title('unsigned1');
        vm.authenticated(true);
    },
    logout: function () {
        vm.userId = 'user';
        vm.password = 'password';
        vm.title('unsigned2');
        vm.authenticated(false)
    }
};

ko.applyBindings(vm); 
```

还要注意 ben336 所说的关于如何定义绑定的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:09:49.330

```
<!-- ko if: authenticated == true --> 
```

应该

```
<!-- ko if: authenticated --> 
```

if 表达式验证变量的真实性，而不是表达式。

请参阅[文档](http://knockoutjs.com/documentation/if-binding.html)

为了

```
<!-- ko if: authenticated == false --> 
```

您可以使用

```
<!-- ko ifnot: authenticated  --> 
```

### 更新

我没有马上注意到你的三重绑定。您应该注册一个要绑定的模型对象。如果您希望属性响应更新，可以将其设为可观察的。

# backbone.js - Backbone.js 集合中的传单标记？

> ID：14509770
> 
> 赞同：4
> 
> 时间：2013-01-24T20:05:10.020
> 
> 标签：backbone.js, leaflet

我正在尝试构建一个基于backbone.js 和传单的应用程序。用户可以拖动地图并查看地图上的标记。可以通过单击来选择标记。选择后，他们必须更改其图标和显示在（非弹出窗口）上的标记详细信息。

我的主干模型由几个实体组成：

标记模型包含纬度、经度类型、标题、isSelected

地图模型包含：地图中心、标记集合、选定标记

任何人都知道我如何制作这种功能？如何将传单标记作为主干视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:00:45.387

骨干视图和传单对象模型并不完美，因为标记不包含在`Backbone.View.el`应该表示的 DOM 元素中。标记当然有一个元素（可通过 访问**）**`marker._icon`，但在标记渲染到地图之前它不存在。

也就是说，您**可以**使用 Backbone 视图表示标记，只是不能使用`events`或任何`el`相关功能。我已经使用具有相同“问题”的 OpenLayers 成功实现了类似的视图，并且工作正常。

我认为这是最容易用代码解释的：

```
//MarkerView has no element
App.Views.MarkerView = Backbone.View.extend({

    initialize: function(options) {
        //pass map instance to the marker
        this.map = options.map;
        //create the marker object
        this.marker = L.marker([this.model.get('longitude'), this.model.get('latitude')]);
    },

    render: function() {    
        //append marker to the map
        this.marker.addTo(this.map);

        //can't use events hash, because the events are bound
        //to the marker, not the element. It would be possible
        //to set the view's element to this.marker._icon after
        //adding it to the map, but it's a bit hacky.
        this.marker.on('click', this.onClick);
    },

    onClick: function() {
        alert("click");
    }
});

//MapView renders a map to the #map element
App.Views.MapView = Backbone.View.extend({
    id:"#map",
    render: function() {
        //render map element
        var map = this.map =  L.map(this.$el.attr('id'))
            .setView([this.model.get('centerLon'),  this.model.get('centerLat') ], 13)
            .addLayer(L.tileLayer(this.model.get('layerUrl'), { maxZoom: 18 }));

        //render each marker
        this.markerViews = this.model.get('markers').map(function(marker) {
            return new App.Views.MarkerView({model:marker, map:map}).render();
        });
    }
}); 
```

[这是 JSFiddle 上的演示](http://jsfiddle.net/dPqQy/)。

# ruby-on-rails - Rails 重定向路由错误主机组件

> ID：14509773
> 
> 赞同：0
> 
> 时间：2013-01-24T20:05:22.950
> 
> 标签：ruby-on-rails, routes

所以我试图在我的 routes.rb 中进行重定向。当我离开我的域时出现错误。

```
match "/partners/" => redirect("/partners.html") 
```

导航到 /partners/ 会给出这个错误页面：

```
URI::InvalidComponentError

bad component(expected host component): frontend_rails.dev 
```

但是，如果我将整个域放入重定向中，它确实有效。

```
match "/partners/" => redirect("http://example.com/partners.html") 
```

但是对于我的开发服务器，我不喜欢链接到我们的生产服务器。根据 rails doc，这应该是自动添加的：

> 在所有这些情况下，如果您不提供主要主机 (http://www.example.com)，Rails 将从当前请求中获取这些详细信息。

任何想法为什么它不喜欢我的相对重定向？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-01T21:06:32.897

差不多一年后，我终于意识到问题所在。它实际上是一个错误的 URI。GitHub 中的存储库名为 frontend_rails。我使用了 Pow 服务器，它根据您的文件夹名称为您提供主机（当您签出项目时，默认为 GitHub 存储库的名称），所以[http://frontend_rails.dev](http://frontend_rails.dev)。

但是，从技术上讲，URI 中不允许使用下划线。这是绊倒了 URI gem。我将我的项目 frontend_rails 符号链接到 frontend-rails ，现在它可以工作了。瞧！

# algorithm - 以点为中心放置没有边界框的矩形

> ID：14509775
> 
> 赞同：0
> 
> 时间：2013-01-24T20:05:29.623
> 
> 标签：algorithm

我有一个边界框（x 和 y 均为 0 到 100）、一个点、一个宽度和一个高度。该点以高度和宽度给定的矩形为中心。如何找出矩形的放置位置，使其不会超出边界框？

例如，x = 100，y = 100，height = 20，width = 20。在这里，我应该在这里得到坐标 80/80。x=90 和 y=90 相同。

我被告知这个问题已经解决了，所以可以链接到相应的维基百科页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:14:19.760

如果我正确理解了问题，并且边界框为 (xmin, ymin, xmax, ymax)，您可以这样做：

```
If x + width / 2 > xmax then x = xmax - width / 2
If y + height / 2 > ymax then y = ymax - height / 2
If x - width / 2 < xmin then x = xmin + width / 2
If y - height / 2 < ymin then y = ymin + height / 2 
```

# android - 从 ArrayList 检索数据时出现 NullPointerException

> ID：14509777
> 
> 赞同：0
> 
> 时间：2013-01-24T20:05:32.013
> 
> 标签：android, nullpointerexception

安卓 2.3.3

我有一个 ArrayList，有 3 个值。当我试图从数组列表中检索值时，我得到一个 NullPointerException。我正在尝试从arraylist 中获取值并将其设置为textview。

这是代码:::

```
System.out.println(alAngleResult.toString());

        txtViewResult.setText("");

        int i = 0;
        while(i < alAngleResult.size())
        {
            txtViewResult.append(alAngleResult.get(i).toString());
                    // Exception at above line
            txtViewResult.append("\n");

            i++;
        } 
```

LogCat 输出 :::

```
01-25 01:32:26.599: I/System.out(18437): [10.0 Degrees, 0.17453292519943295 Radians, 10.0 Gradians] => Output
01-25 01:32:26.599: W/dalvikvm(18437): threadid=1: thread exiting with uncaught exception (group=0x40184560)
01-25 01:32:26.599: E/AndroidRuntime(18437): FATAL EXCEPTION: main
01-25 01:32:26.599: E/AndroidRuntime(18437): java.lang.NullPointerException
01-25 01:32:26.599: E/AndroidRuntime(18437):    at com.xx.xx.xx.performConvertionForAngle(UnitConverter.java:416)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at com.xx.xx.xx.performConvertion(UnitConverter.java:368)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at com.xx.xx.xx.onClick(UnitConverter.java:356)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at android.view.View.performClick(View.java:2485)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at android.view.View$PerformClick.run(View.java:9080)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at android.os.Handler.handleCallback(Handler.java:587)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at android.os.Looper.loop(Looper.java:130)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at java.lang.reflect.Method.invokeNative(Native Method)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at java.lang.reflect.Method.invoke(Method.java:507)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
01-25 01:32:26.599: E/AndroidRuntime(18437):    at dalvik.system.NativeStart.main(Native Method) 
```

编辑 ::: 只需要清理项目。它现在工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:39:28.650

只是一个典型的 Eclipse 问题。只需要清理项目，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:08:45.587

您的数组很可能包含一个空值，因此您最终调用了 null.toString()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:44:50.487

很高兴它现在对你有用。

重新编写代码片段，作为 for-each 循环不是更容易阅读和更省力吗？

# symfony-2.1 - 如何使用 EntityManager 作为服务？

> ID：14509779
> 
> 赞同：0
> 
> 时间：2013-01-24T20:05:59.800
> 
> 标签：symfony-2.1

我已经检查了 2.1 版。没有做太多。现在尝试在服务中使用实体管理器：

```
<service id="user.manager" class="%user_manager.class%">
    <argument type="service" id="doctrine.orm.entity_manager" />
</service> 
```

但我得到了错误：

```
Catchable fatal error: Argument 1 passed to Doctrine\ORM\EntityManager::__construct()
must be an instance of Doctrine\DBAL\Connection, instance of Doctrine\ORM\EntityManager 
    given, called in C:\Program Files (x86)\Zend\Apache2\htdocs\po\vendor\
    doctrine\orm\lib\Doctrine\ORM\EntityManager.php on line 689 and defined in 
    C:\Program Files (x86)\Zend\Apache2\htdocs\po\vendor\doctrine\orm\lib\Doctrine\ORM\EntityManager.php on line 129 
```

默认配置：

```
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true 
```

我已经这样做了很多次，但我不确定我现在缺少什么:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:25:59.953

叹气，厉害

```
app/console doctrine:generate:entities 
```

没有生成我的存储库。我是手工制作的，不小心让它扩展了 EntityManager 而不是 EntityRepository。

# ormlite-servicestack - 寻找如何使用 ServiceStack.OrmLite 从现有 SQL Server 架构自动生成实体的示例

> ID：14509784
> 
> 赞同：1
> 
> 时间：2013-01-24T20:06:20.923
> 
> 标签：ormlite-servicestack

我看到 ServiceStack.OrmLite Lite 有[这个](https://github.com/ServiceStack/ServiceStack.OrmLite/pull/68/files)。

我觉得 ServiceStack 的这个声明并没有让我陷入困境，

Code-Gen DTO 更改的问题会破坏代码，禁止 DRY 强制抽象，并行实现中的多个版本

在我看来，这意味着将完整的 ORM 与 SS 一起使用而不是微型 orm 将完全做到这一点，或者我是否在这里？我不太确定，因为我自动生成实体但手动编码 dto。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:02:32.010

引用是关于 Code-Gen DTO 的，例如，当您使用“**添加服务引用**”对话框或`svcutil.exe`生成客户端代理时，WCF/SOAP 鼓励开发工作流。

这与 OrmLite 提倡的 Code-First ORM 和数据模型无关。

# php - 从具有特定时区和特定 $now 值的相对日期/时间字符串中获取时间戳

> ID：14509790
> 
> 赞同：3
> 
> 时间：2013-01-24T20:06:45.913
> 
> 标签：php, datetime, timezone, strtotime

我知道从 PHP 中的相对日期/时间字符串获取时间戳的两种方法：

**strtotime**：允许用户指定自己的 $now 值

**DateTime 对象**：允许用户指定自己的 $timezone 值

有没有一种方法可以从允许指定时区和 $now 值的日期/时间字符串中获取时间戳？似乎唯一的方法是使用 strtotime 同时临时覆盖整个 php 应用程序的默认时区，然后立即将其设置回来。这似乎是一个 hacky 解决方案，如果有更清洁的方法会很好。

**编辑：**似乎对我正在尝试做的事情有一些误解。这是一个更具体的例子：

“我想在 America/Los_Angeles 时区内找到与字符串 '下周二下午 3:00' 对应的时间戳，并为 $now 指定任意值，例如 2014 年 3 月 14 日上午 8:05。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:10:06.260

我准备了一个例子。这可能是您想要的：

```
<?php

// Including the timezone int the time strings (thanks @Mike B!!!) 
// will make it very easy.  just strtotime() is required

// create a timestamp for March 14th PDT
$now = strtotime('14 March 2014 8:05am America/Los_Angeles');

// get the requested timestamp.
$nexTuesday = strtotime('next tuesday 3:00 pm America/Los_Angeles', $now); 
```

# redirect - 使用 nginx 重定向

> ID：14509794
> 
> 赞同：0
> 
> 时间：2013-01-24T20:07:00.887
> 
> 标签：redirect, nginx

我对 Nginx 很陌生，我想知道如何重写。我将一个旧站点迁移到一个新站点，谷歌仍然保存了我的旧 IP，并在许多谷歌搜索结果中返回它。我想使用完整的 URL 将流量从旧站点重定向到新站点，我尝试了以下操作。

重写 ^ [http://mysite.com/](http://mysite.com/)永久；

但是，这是映射 [http://myoldsite.com/my_controller/my_action/:id?some_get_param=foo&another_get_param=bar](http://myoldsite.com/my_controller/my_action/:id?some_get_param=foo&another_get_param=bar)

至

[http://mysite.com?some_get_param=foo&another_get_param=bar](http://mysite.com?some_get_param=foo&another_get_param=bar)

如何使此重定向包含我的控制器和操作参数（基本 url 之后的所有内容）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:28:13.277

在`request_uri`重写期间被剥离。见[http://wiki.nginx.org/HttpRewriteModule#rewrite](http://wiki.nginx.org/HttpRewriteModule#rewrite)

```
rewrite ^ http://mysite.com$request_uri? permanent; 
```

# python - 随机“IndexError：列表索引超出范围”

> ID：14509797
> 
> 赞同：0
> 
> 时间：2013-01-24T20:07:11.640
> 
> 标签：python, screen-scraping

我正在尝试抓取一个通过 Javascript 返回其数据的网站。我使用 BeautifulSoup 编写的代码运行良好，但在抓取过程中随机出现以下错误：

```
Traceback (most recent call last):
File "scraper.py", line 48, in <module>
accessible = accessible[0].contents[0]
IndexError: list index out of range 
```

有时我可以抓取 4 个 url，有时是 15 个，但在某些时候脚本最终会失败并给我上述错误。我找不到失败背后的模式，所以我真的很茫然 - 我做错了什么？

```
from bs4 import BeautifulSoup
import urllib
import urllib2
import jabba_webkit as jw
import csv
import string
import re
import time

countries = csv.reader(open("countries.csv", 'rb'), delimiter=",")
database = csv.writer(open("herdict_database.csv", 'w'), delimiter=',')

basepage = "https://www.herdict.org/explore/"
session_id = "indepth;jsessionid=C1D2073B637EBAE4DE36185564156382"
ccode = "#fc=IN"
end_date = "&fed=12/31/"
start_date = "&fsd=01/01/"

year_range = range(2009, 2011)
years = [str(year) for year in year_range]

def get_number(var):
    number = re.findall("(\d+)", var)

    if len(number) > 1:
        thing = number[0] + number[1]
    else:
        thing = number[0]

    return thing

def create_link(basepage, session_id, ccode, end_date, start_date, year):
    link = basepage + session_id + ccode + end_date + year + start_date + year
    return link

for ccode, name in countries:
    for year in years:
        link = create_link(basepage, session_id, ccode, end_date, start_date, year)
        print link
        html = jw.get_page(link)
        soup = BeautifulSoup(html, "lxml")

        accessible = soup.find_all("em", class_="accessible")
        inaccessible = soup.find_all("em", class_="inaccessible")

        accessible = accessible[0].contents[0]
        inaccessible = inaccessible[0].contents[0]

        acc_num = get_number(accessible)
        inacc_num = get_number(inaccessible)

        print acc_num
        print inacc_num
        database.writerow([name]+[year]+[acc_num]+[inacc_num])

        time.sleep(2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:14:16.130

您需要在代码中添加错误处理。在抓取大量网站时，有些网站会出现格式错误或以某种方式损坏。发生这种情况时，您将尝试操作空对象。

查看代码，找到所有假设它有效的假设，并检查错误。

对于这种特定情况，我会这样做：

```
if not inaccessible or not accessible:
    # malformed page
    continue 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:11:08.517

`soup.find_all("em", class_="accessible")`可能返回一个空列表。你可以试试：

```
if accessible:
    accessible = accessible[0].contents[0] 
```

或更一般地说：

```
if accessibe and inaccesible:
    accessible = accessible[0].contents[0]
    inaccessible = inaccessible[0].contents[0]
else:
    print 'Something went wrong!'
    continue 
```

# c# - Ext.net MVC Razor Cell 双击网格面板

> ID：14509801
> 
> 赞同：0
> 
> 时间：2013-01-24T20:07:28.557
> 
> 标签：c#, ext.net

我想双击网格面板的一个单元格并使用额外的参数示例调用另一个操作/视图：网格面板在 .../Student 中，我想在另一个页面中显示一个学生的详细信息，例如：/Student/Detail /1 双击他的姓名、身份证或他记录中的任何数据。抱歉英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:06:34.960

我试过这个

```
@(
  Html.X().GridPanel()
                 .Title("Students")
                 .Width(550)
                 .Height(200)
                 .ForceFit(true)
                 .Store(Html.X().Store().Model(Html.X().Model()
                     .Fields(fields =>
                     {
fields.Add(Html.X().ModelField().Name("StudentID"));
fields.Add(Html.X().ModelField().Name("LastName"));
fields.Add(Html.X().ModelField().Name("FirstMidName"));
fields.Add(Html.X().ModelField().Name("EnrollmentDate"));
                     }
                     )
                 ).DataSource(Model)
     ).ColumnModel(
             Html.X().Column().Text("Student ID").DataIndex("StudentID"),
         Html.X().Column().Text("Last Name").DataIndex("LastName"),
         Html.X().Column().Text("First Name").DataIndex("FirstMidName"),
Html.X().DateColumn().Text("Enrollment").DataIndex("EnrollmentDate")
     ).DirectEvents(de =>
         {
             de.CellDblClick.Url = "Edit"; // also tried
de.CellDblClick.Action = "Edit";
             de.CellDblClick.ExtraParams.Add(1);           //static
later I'll add the StudentID here
         }
        )
) 
```

网格面板显示数据没有问题，但是当我双击一个单元格时，这是发送 localhost:10782/Student/Edit?_dc=1359052548829 而不是这个 localhost:10782/Student/Edit/1 的请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:01:59.237

我可以建议使用 Before 处理程序管理 URL。

要从 URL 中删除“?dc...”，请设置 DisableCaching="false"。

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET v2 Example</title>

    <script>
        var counter = 1;
    </script>
</head>
<body>
    <ext:ResourceManager runat="server" />
    <ext:Button runat="server" Text="Test">
        <DirectEvents>
            <Click Url="Some URL" Before="o.url = o.rawUrl + counter++;" DisableCaching="false">
                <CustomConfig>
                    <ext:ConfigItem Name="rawUrl" Value="Controller/Action/" Mode="Value" />
                </CustomConfig>
            </Click>
        </DirectEvents>
    </ext:Button>
</body>
</html> 
```

# scala - Scala：锁扩展类

> ID：14509802
> 
> 赞同：0
> 
> 时间：2013-01-24T20:07:32.923
> 
> 标签：scala, inheritance, locking, traits

我想“锁定”一个从特征扩展而来的类。斯卡拉有可能吗？

例如我有：

```
trait A {
val boris: String
val john: String
val number: Int
}

class B extends A {
 // do something with these values
} 
```

但是我可以确保，如果没有在特征 A 中声明新值，那么在 B 类中不会添加新值？

感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:27:13.110

你不能。

但是，如果您只是将特征标记为密封并提供默认实现：

```
sealed trait A { val boris: String }
final class B(val boris: String) extends A {} 
```

然后人们可以自由地创建隐式值类，使其看起来像是添加了新功能（除非没有实际创建类）：

```
implicit class MyB(val underlying: B) extends AnyVal {
  def sirob = underlying.boris.reverse
}
(new B("fish")).sirob   // "hsif" 
```

如果你想在编译时（虽然不是运行时）保持它们的直接，你也可以让类将类型参数作为标记：

```
sealed trait A[T] { val boris: String }
final class B[T](val boris: String) extends A[T] {}

implicit class MyB(val underlying: B[Int]) extends AnyVal {
  def sirob = underlying.boris.reverse
}
(new B[Int]("fish")).sirob   // "hsif"
(new B[Char]("fish")).sirob  // error: value sirob is not a member of B[Char] 
```

因此，您可以——尤其是在 2.10 中——简单地锁定所有内容并让用户以这种方式丰富原始界面。

不过，我不确定这是否涵盖了您的预期用例；它不提供任何继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:28:00.717

根据您的示例和我对您实际尝试做的事情的猜测，您可能需要考虑仅使用案例类。

通常避免扩展案例类（我认为如果您尝试它会发出弃用警告），这样会阻止人们想要扩展您的类以添加功能。

将您的示例转换为案例类：

```
case class A (boris: String, john: String, number: Int) 
```

然后，您无需扩展`A`以更改其值，而是创建一个新实例，例如

```
val a2 = someOtherA.copy(john="Doe") 
```

# java - Android 的 Java 用户界面

> ID：14509803
> 
> 赞同：0
> 
> 时间：2013-01-24T20:07:38.297
> 
> 标签：java, android, android-layout, user-interface

有什么方法可以使用 Android 的 UI 库等在纯 Java 应用程序中构建 GUI？

我正在构建一个可以在 Android 和计算机上运行的程序。
我想如果我使用 Android 的库和范例，让它在两个平台上运行会容易得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:09:35.517

Android 和普通的 Java UI 库是不同的。Android UI 是专门为... Android 量身定制的。Android 中的每个 View 都有一个 Context 和其他一些桌面 Java 没有或实现方式不同的东西。但是，请记住，UI 功能通常是相似的（例如，按钮具有侦听器，许多其他 UI 元素也是如此） - 因此，虽然没有简单的方法可以将 Swing/其他桌面 UI 本地转换为 Android UI，但您重新编码它们应该不会有太多麻烦。

您需要做的是使逻辑和非 UI 类成为他们自己的文件，然后根据您编码的平台为您的应用程序制作单独的 UI。

当然，如果你不想做任何原生的东西，你可以使用 webapp 方法——这将是最简单的，你可以用最少的时间瞄准最多的设备。

# bash - 命令行查找目录中的第一个文件

> ID：14509806
> 
> 赞同：21
> 
> 时间：2013-01-24T20:07:42.173
> 
> 标签：bash, directory, find, rename

我的目录结构如下

```
Directory1\file1.jpg
          \file2.jpg
          \file3.jpg

Directory2\anotherfile1.jpg
          \anotherfile2.jpg
          \anotherfile3.jpg

Directory3\yetanotherfile1.jpg
          \yetanotherfile2.jpg
          \yetanotherfile3.jpg 
```

我正在尝试在 ubuntu 上的 bash shell 中使用命令行从每个目录中获取第一个文件并将其重命名为目录名称并将其上移一级，使其与目录并排。

在上面的例子中：

*   `file1.jpg`将被重命名为`Directory1.jpg`并放置在文件夹旁边`Directory1`

*   `anotherfile1.jpg`将被重命名为`Directory2.jpg`并放置在文件夹 Directory2 旁边

*   `yetanotherfile1.jpg`将被重命名为`Directory3.jpg`并放置在文件夹旁边`Directory3`

我试过使用：

```
find . -name "*.jpg" 
```

但它没有按顺序列出文件（我需要第一个文件）。

这一行：

```
find . -name "*.jpg" -type f -exec ls "{}" +; 
```

以正确的顺序列出文件，但是如何只选择每个目录中的第一个文件并将其上移一级？

任何帮助，将不胜感激！

编辑：当我提到第一个文件时，我的意思是每个 jpg 的编号从 0 到该文件夹​​中的许多文件 - 例如：file1、file2...... file34、file35 等......另外要提到的一件事是文件的格式是随机的，所以编号可能从 0 或 1a 或 1b 等开始...

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-03-27T13:43:57.940

您可以进入每个目录并运行：

```
$ mv `ls | head -n 1` .. 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-24T20:23:38.313

如果*first*表示 shell glob 首先找到的任何内容（词法，但可能受 影响`LC_COLLATE`），那么这应该有效：

```
for dir in */; do
    for file in "$dir"*.jpg; do
        echo mv "$file" "${file%/*}.jpg" # If it does what you want, remove the echo
        break 1
    done
done 
```

概念证明：

```
$ mkdir dir{1,2,3} && touch dir{1,2,3}/file{1,2,3}.jpg
$ for dir in */; do for file in "$dir"*.jpg; do echo mv "$file" "${file%/*}.jpg"; break 1; done; done
mv dir1/file1.jpg dir1.jpg
mv dir2/file1.jpg dir2.jpg
mv dir3/file1.jpg dir3.jpg 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T20:36:36.553

查找所有第一级目录，识别此目录中的第一个文件，然后将其向上移动一级

```
find . -type d \! -name . -prune | while read d; do
    f=$(ls $d | head -1)
    mv $d/$f .
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-12T23:48:58.973

在最佳答案的基础上，这是一个通用的 bash 函数，它只返回解析为给定目录中文件的第一个路径：

```
getFirstFile() {
    for dir in "$1"; do
        for file in "$dir"*; do
            if [ -f "$file" ]; then
                echo "$file"
                break 1
            fi
        done
    done
} 
```

用法：

```
# don't forget the trailing slash
getFirstFile ~/documents/ 
```

**注意：**如果你传递一个无效的路径，它不会返回任何东西。

# .net - 真正的 wpf webbrowser 和 .unity3d 文件。可能吗？

> ID：14509807
> 
> 赞同：0
> 
> 时间：2013-01-24T20:07:55.513
> 
> 标签：.net, wpf, web, unity3d, awesomium

我希望对以下情况有所启​​发。

我部署了一个统一的 3d 场景作为网络播放器。这基本上创建了一个加载 .unity3d 文件的 html 页面。然后我可以使用 IE、chrome 和 firefox 并显示场景。

但是，当我尝试使用 wpf 浏览器（如 awesomium 和 cefsharp）时，它不会加载。即使它们被认为是 webkit 的包装器。

现在我可以在 Visual Studio 中使用作为用户控件的股票网络浏览器。除了......它受到“空域”问题的困扰，不幸的是我需要在它上面画画。

我的问题。是否有可以呈现 .unity3d 文件的兼容 wpf 的网络浏览器？如果是这样，请指出我正确的方向。

非常感谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T10:25:15.553

Awesomium 浏览器不会加载您的统一 3d 网络播放器。您仍然可以在 XAML ( `<WebBrowser></WebBrowser>`) 中使用 WPF 默认 Web 浏览器。对于您的空域问题。此链接将对您有很大帮助：[我可以将 WPF 窗口叠加在另一个窗口之上吗？](https://stackoverflow.com/questions/6087835/can-i-overlay-a-wpf-window-on-top-of-another)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:21:44.090

Awesomium 和 Chromium 嵌入式框架，在您使用它们的上下文中，是无窗口渲染器。

除非您选择的渲染器的开发人员提供对特定浏览器插件的支持（Awesomium 支持 Flash 和 Silverlight，我认为 CEF 也支持）嵌入式插件不会渲染到您从该渲染器收到的像素缓冲区。

如果您的客户端计算机安装了 Internet Explorer Unity3D 插件，那么`System.Windows.Controls.WebBrowser`该类应该能够轻松呈现 Unity Web Player ActiveX 上下文。您还可以查看直接嵌入 Unity ActiveX 控件的方法，[请参阅 MSDN 中的这篇文章，](http://msdn.microsoft.com/en-us/library/ms742735.aspx)了解如何执行此操作，只需将组件更改为 Unity 而不是 Windows Media Player。

如果您确实嵌入了 ActiveX 上下文，请确保在属性窗口中设置目标 .unity3d 源文件，而不是使用代码，否则它将无法工作。

# iphone - Xcode：一步构建并运行 iOS 模拟器和设备？

> ID：14509808
> 
> 赞同：2
> 
> 时间：2013-01-24T20:07:56.453
> 
> 标签：iphone, ios, xcode, cocoa-touch, ios-simulator

我需要练习更好地测试 iOS 5 和 6。

我想按下一个按钮（或一个键盘快捷键）并让 Xcode 在 iOS 模拟器*和*我的 iPhone 设备上同时构建和运行我的应用程序。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:39:34.470

我不认为你可以通过 Xcode 的 GUI 来做到这一点。您可能需要从命令行启动应用程序。这意味着使用您知道的任何语言（shell、python、ruby 等）创建脚本

以下是一些信息：检查[link1](https://stackoverflow.com/questions/12557935/xcode-4-5-command-line-unit-testing)、[link2](https://stackoverflow.com/questions/5403991/xcode-4-run-tests-from-the-command-line-xcodebuild)和[link3](http://www.stewgleadow.com/blog/2011/11/05/installing-ios-apps-on-the-device-from-the-command-line/)。

希望这会有所帮助。

# lua - Lua 和序列化闭包

> ID：14509814
> 
> 赞同：5
> 
> 时间：2013-01-24T20:08:09.123
> 
> 标签：lua, closures

我正在尝试序列化和反序列化 Lua 闭包

我的基本理解是，下面的工厂应该生成闭包（并且 Lua 并没有太多区分函数和闭包——即没有类型“闭包”）

```
> function ffactory(x) return function() return x end end
> f1 = ffactory(5)
> print(f1())
5                        <-- so far so good
> s = string.dump(f1)
> f2 = load(s)
> print(f2())
table: 00000000002F7BA0  <-- expected the integer 5
> print(f2()==_ENV)
true                     <-- definitely didn't expect this! 
```

我希望整数 5 用`f1`. 或者，如果`string.dump`不能处理闭包，我预计会出错。

通过轻微的变化，我得到了完全不同的（但更多的是我所期望的）结果。看起来`f2`确实是一个闭包，但是 string.dump 在序列化时并没有尝试序列化 x 的值。

[文档](http://www.lua.org/manual/5.2/manual.html#pdf-string.dump)对我帮助不大。（他们所说的“......具有新的上价值”是什么意思？）

```
> function ffactory(x) return function() return x+1 end end
> f1 = ffactory(5)
> print(f1())
6                        <-- good
> s = string.dump(f1)
> f2 = load(s)
> print(f2())
stdin:1: attempt to perform arithmetic on upvalue 'x' (a table value)
stack traceback:
        stdin:1: in function 'f2'
        stdin:1: in main chunk
        [C]: in ? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T03:15:01.413

你可以做这样的事情来保存/恢复这些upvalues（注意它不处理不同函数之间共享的upvalues）：

```
local function capture(func)
  local vars = {}
  local i = 1
  while true do
    local name, value = debug.getupvalue(func, i)
    if not name then break end
    vars[i] = value
    i = i + 1
  end
  return vars
end

local function restore(func, vars)
  for i, value in ipairs(vars) do
    debug.setupvalue(func, i, value)
  end
end  

function ffactory(x) return function() return x end end
local f1 = ffactory(5)
local f2 = (loadstring or load)(string.dump(f1))
restore(f2, capture(f1)) --<-- this restored upvalues from f1 for f2

print(f1(), f2()) 
```

这适用于 Lua 5.1 和 Lua 5.2。

如果您`ffactory`稍作更改，请注意一个有趣的结果（添加`math.abs(0)`；以任何方式使用全局表的任何内容都可以）：

```
function ffactory(x) return function() math.abs(0) return x end end 
```

现在，如果你恢复 upvalues，你会得到相同的结果，但如果你不恢复 upvalues，你会在 Lua 5.2 下得到一个运行时错误：

```
lua.exe: upvalues.lua:19: attempt to index upvalue '_ENV' (a nil value)
stack traceback:
upvalues.lua:19: in function 'f2'
upvalues.lua:24: in main chunk
[C]: in ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:35:07.430

文档很清楚。string.dump 不使用上值处理闭包。这是因为 upvalues 可以是任何东西（包括用户数据，Lua 怎么知道如何序列化它？）

upvalues 是由于作用域/闭包而对函数局部的外部变量。由于您示例中的 x 是 ffactory 返回的函数的上值，因此它不会被序列化。

如果您想以某种方式支持这一点，则必须自己存储上值并在反序列化函数后再次设置它们，如下所示：

```
function ffactory(x)
    return function() return x+1 end
end

local f1 = ffactory(5)
print(f1())

local s = string.dump(f1)
f2 = loadstring(s)
debug.setupvalue(f2, 1, 5)
print(f2()) 
```

# google-app-engine - Google App Engine for Java 开发服务器 SocketTimeoutException 从 UrlFetch 到使用代码 204 响应的 url

> ID：14509815
> 
> 赞同：0
> 
> 时间：2013-01-24T20:08:11.630
> 
> 标签：google-app-engine

我在使用 GAE 开发服务器时遇到问题。在对响应为 204 的 URL 进行 url 提取时，我看到超时。在一些这样的请求之后，开发服务器一起停止响应。仅供参考，在生产服务器上一切正常。

示例代码是： -

```
URLFetchService fetcher = URLFetchServiceFactory.getURLFetchService();
HTTPResponse response = fetcher.fetch(new URL("some/url/that/responds/with/204")); 
```

这会引发以下内容：-

```
java.net.SocketTimeoutException
Timeout while fetching: some/url/that/responds/with/204 
```

但是，“some/url/that/responds/with/204”会立即响应 204，并且增加超时没有帮助。如果我得到相同的 URL 来响应 200 一切都很好，并且在生产服务器上一切都很好。即我在生产服务器上按预期在几毫秒内得到 204。

有任何想法吗？

谢谢，

瑞安

# compass-sass - at-breakpoint, with-grid-settings 无限循环

> ID：14509819
> 
> 赞同：1
> 
> 时间：2013-01-24T20:08:27.163
> 
> 标签：compass-sass, sass

我只想在一个特殊的断点应用另一个网格布局（也许我做错了，这就是我的问题的原因......）

如果我尝试以下代码，我会得到错误：

***已找到 @include 循环：断点处包含自身***

```
#br-page-wrapper
{
    @include container();
    @include at-breakpoint($breakpoint-mobile-portrait)
    {
       @include with-grid-settings($layout-mobile-portrait)
       {
          @include container();
          background: red;
       }
   }
} 
```

var $layout-mobile-portrait 在我的 constants.scss 中定义：

```
$layout-mobile-portrait: 1 98% 2% 0; 
```

**但是**，如果我用变量的值替换变量，我不会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:14:49.607

# 短的：

你可以做以下两件事之一：

```
// use commas:
@include with-grid-settings(1, 98%, 2%, 0) { /* content */ }

// use varargs (with "..."):
@include with-grid-settings($layout-mobile-portrait...) { /* content */ } 
```

# 长：

`container()``at-breakpoint()`任何时候请求的列与 . 的当前设置不同时都会调用`$total-columns`。您的问题是您没有将有效值传递给，`with-grid-settings()`因为您使用的是空格分隔的列表。`with-grid-settings()`将整个列表设置为 的值`$total-columns`，然后将其传递到`container()`它被解析为新布局的位置，不再等于您的错误`$total-columns`设置。

# android - 无法识别可变手势

> ID：14509820
> 
> 赞同：1
> 
> 时间：2013-01-24T20:08:28.463
> 
> 标签：android, onfling, android-gesture

所以我试图在这个页面上实现一个关于 Fling 功能的手势。我已经使用过手势，但由于某种原因，这段代码无法运行。我确实收到了一个警告，但我不知道如何修复它，它表示代码中没有使用可变手势，尽管您可以在 onCreate.xml 中清楚地看到它。帮助？

这是代码：

```
 package com.example.finisher;

    import java.io.ByteArrayOutputStream;
    import java.io.IOException;
    import java.io.InputStream;

    import android.app.Activity;
    import android.content.Intent;
    import android.content.res.AssetManager;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.GestureDetector;
    import android.view.GestureDetector.OnGestureListener;
    import android.view.MotionEvent;
    import android.widget.TextView;

    public class newclass extends Activity implements OnGestureListener{

private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gesture;

@Override 
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    TextView textView=new TextView(this);
    setContentView(textView);
    gesture = new GestureDetector(this);

    AssetManager assetManager = getAssets();
    InputStream inputStream =null;
    try {
        inputStream = assetManager.open("texts/myawesometext.txt");
        String text = loadTextFile(inputStream);
        textView.setText(text);
    } catch(IOException e){
        textView.setText("Couldn't Load the file.");
    }
    finally{
        if (inputStream!=null){
            try{
                inputStream.close();
            } catch(IOException e){
                textView.setText("Couldn't Close the File");
            }
        }
    }
}

private String loadTextFile(InputStream inputStream)throws IOException {
    ByteArrayOutputStream bytestream=new ByteArrayOutputStream();
    byte[] bytes= new byte[4096];
    int len=0;
    while((len= inputStream.read(bytes))>0)
        bytestream.write(bytes, 0, len);
    return new String(bytestream.toByteArray(),"UTF8");
}

@Override
public boolean onDown(MotionEvent arg0) {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean onFling(MotionEvent start, MotionEvent finish, float xv,
        float yv) {
    Log.v("msg","msg");
    //Y motion only
    if(Math.abs(start.getRawY()-finish.getRawY())>SWIPE_MIN_DISTANCE
            &&Math.abs(yv)>SWIPE_THRESHOLD_VELOCITY){
        //y motion
        if (start.getRawY()>finish.getRawY()){
            //gesture down, page from top
            Intent myIntent = new Intent(newclass.this,MainActivity.class);
            myIntent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            startActivity(myIntent);
            //animation done in pairs.Bringing top view in
            this.overridePendingTransition(R.anim.slide_bottom_in,
            R.anim.slide_bottom_out);  
        }
    }
return false;
}

@Override
public void onLongPress(MotionEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
        float arg3) {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onShowPress(MotionEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public boolean onSingleTapUp(MotionEvent arg0) {
    // TODO Auto-generated method stub
    return false;
}

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:50:52.847

在我看来，它是在 onCreate() 中初始化的，但从未使用过。看这篇文章[在网格布局上进行 Fling 手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

# javascript - 使用 cuepoint 单击时显示 div

> ID：14509826
> 
> 赞同：0
> 
> 时间：2013-01-24T20:08:44.793
> 
> 标签：javascript, jquery, video

为什么这行不通？

使用*cuepoint.js*；您可以在 html5 视频中定义提示点。但; 我想; 另外在点击时显示一个#div。并且仅在点击时。视频恢复后；或者再次点击图片；视频继续播放，#div 将**消失**！！！！

```
 #playdiv1 {
        display: none;
    } 
```

* * *

```
$('#1').click(function() { 
  cuepoint.setTime(1)();
  $("playdiv1").style.display = "block"; // Why wont this work?
}); 
```

* * *

此 div 应与 que 一起显示：

```
<div id="playdiv1" style="min-height: 300px; min-width: 500px; display: hidden;">

</div> 
```

**参考图书馆；** [http://cuepoint.org/](http://cuepoint.org/)

完整代码 ~ [http://pastebin.com/HG0wVVaK](http://pastebin.com/HG0wVVaK)

**这没有意义。**提示点时间；作品..

```
$('#1').click(function(){ 
  cuepoint.setTime(0)(); 
```

**但是当我添加 '$('#playdiv1').show();' 就在它下面。它不工作？**

```
$('#1').click(function(){ 
  cuepoint.setTime(0)();
  $('#playdiv1').show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:12:30.077

你的选择器是错误的。

您的代码 ,`$("playdiv1")`匹配 type 的元素`<playdiv1></playdiv1>`，这不是您想要的。

正确的代码选择带有*id*`$("#playdiv1")`的元素。 *`playdiv1`*

 *您还尝试`style`在元素周围的 jQuery 包装器上设置属性。您需要使用该`.show`方法，或访问第一个匹配的元素。

这些中的任何一个都可以工作：

```
$('#playdiv1').show();

// or

$('#playdiv1')[0].style.display = "block"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:11:01.193

由于您有隐藏 playdiv1 的 CSS，因此您不需要与 HTML 内联的显示声明，因此请删除它 -

```
<div id="playdiv1" style="min-height: 300px; min-width: 500px;"> 
```

并将jQuery更改为

```
$('#playdiv1').show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:24:45.773

你可以用这个...

```
$('#1').on('click', function() { 
  cuepoint.setTime(1)();
  $("#playdiv1").show();
}); 
```

并删除标签`display: hidden;`中的样式属性...`<div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T21:55:44.157

**以某种方式切换订单有效；**

```
$('#1').click(function(){ 
  $('#playdiv1').show();
   cuepoint.setTime(0)(); // Having this at the bottom; or after the show.
}); 
```*

# java - 如何用另一个字符串替换一个字符串并将其插入到Java中的下一行代码中

> ID：14509830
> 
> 赞同：2
> 
> 时间：2013-01-24T20:08:53.583
> 
> 标签：java, string, replace

我不知道如何在我的程序运行时用字符串替换字符串。这甚至可能吗？在程序运行时，我想用另一个词替换一个词，然后从该行继续运行。

我怎么能这样做？谢谢大家

```
hstring.replace("picstart", "up1");
g.drawPixmap(Assets.picstart , 128, 160); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:13:15.977

你的代码看起来像这样。

```
if (condition) {
    g.drawPixmap(Assets.picstart , 128, 160);
} else {
    g.drawPixmap(Assets.up1 , 128, 160);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:16:08.013

不要使用反射。假设您的资产代码处理您的图像、纹理或任何情况：

```
String hstring = "picstart";
// ... stuff happens
// that forces us to change hstring! ...
hstring = hstring.replace("up1"); // or you could just say hstring = "up1";
g.drawPixmap(Assets.getAssetFor(hstring), 128, 160); 
```

然后在您的静态资产类中，您可以拥有：

```
public PixelMap getAssetFor(String identifier) {
     if (identifier.equals("picstart") {
         return new PicStartPixelMap();
     }
     else if (identifier.equals("up1")) {
         return new UpOnePixelMap();
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:11:26.950

`String`是不可变的，这意味着您必须将结果分配给变量：

```
hstring = hstring.replace(...); 
```

# android - 在 XML 布局中参考下面的 ID

> ID：14509832
> 
> 赞同：2
> 
> 时间：2013-01-24T20:09:08.887
> 
> 标签：android, xml, layout

在我的 XML 布局中，除其他外，我有两个`EditText`元素和几个按钮。XML 看起来像这样（大部分内容已删除，只剩下相关部分）

```
<RelativeLayout>

    <RelativeLayout android:id="@+id/entry_id">

        <Button
             android:id="@+id/btn_select"
             layout_alignParentRight="true" />

        <EditText
             android:id="@+id/txt_id"
             android:layout_toLeftOf="@id/btn_select"
             anddroid:nextFocusDown="@id/txt_extras" />

        <Button
             android:id="@+id/btn_quality"
             android:layout_below="txt_id" />
    </RelativeLayout>

    <EditText
        android:id="@+id/txt_extras"
        android:layout_below="@id/entry_id" />

</RelativeLayout> 
```

这会产生类似这样的布局：

```
+-----------------------------------------------+
|+---------------------------------------------+|
||                                             ||
||  +----------------------+  +-------------+  ||
||  | First text field     |  | Button      |  ||
||  +----------------------+  +-------------+  ||
||                                             ||
||  +----------------+                         ||
||  | Another button |                         ||
||  +----------------+                         ||
||                                             ||
|+---------------------------------------------+|
|                                               |
| +-------------------------------------------+ |
| | Second text field                         | |
| +-------------------------------------------+ |
+-----------------------------------------------+ 
```

请注意，这不是整个布局，其中还有很多不同的视图，但我只关心这些。使用 s的原因`RelativeLayout`是因为它们实际上可以按照客户想要的方式布置视图。

现在，我需要在定义第二个文本之前使用第一个文本和按钮定义块，以便我可以指定第二个文本位于该块下方。但是，我在第一个文本字段中出现错误，因为我指的是`nextFocusDown`属性中的第二个文本字段，因为第二个文本字段尚未定义。这变成了第 22 条问题。有什么方法可以让 eclipse/lint/whatever 明白它所抱怨的字段实际上不存在，*就*在下面几行？也就是说，是否有可能让它从整体上、作为一个整体而不是逐行查看文件？

或者，当在软键盘上按下“下一步”时，是否有任何其他方法可以指定我希望焦点转到第二个文本字段而不是第二个按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:28:59.257

```
anddroid:nextFocusDown="@id/txt_extras" 
```

上述行应更改为：

```
android:nextFocusDown="@+id/txt_extras" 
```

正如您在[输入事件文档](http://developer.android.com/guide/topics/ui/ui-events.html#HandlingFocus)中看到的那样，它们使用`@+id`for `nextFocus*`，即使 ID 已经定义。

如果您仍然收到错误，您可能必须更改`android:id="@+id/txt_extras"`为`android:id="@id/txt_extras"`（删除`+`标志），但这不是必需的。

# javascript - 为纵向显示缩放移动响应式横向布局

> ID：14509833
> 
> 赞同：0
> 
> 时间：2013-01-24T20:09:19.550
> 
> 标签：javascript, css, html, mobile, responsive-design

我有一个专为移动横向显示 (480px) 设计的响应式网页布局，并希望将相同的移动横向布局用于 (320px) 的移动纵向显示。谁能想出一种方法来缩小这个视图，以便它也显示（320px）而不添加另一个专门用于 320px 显示的 css 媒体查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T10:26:57.523

要在移动纵向布局中显示相同的移动横向布局，您必须仅使用以下媒体查询。因此，当您将手机从横向旋转到纵向或反之亦然时，将显示相同的布局。

```
 @media screen and (max-width: 480px) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:03:46.270

将所有大小设置为*rems*并在横向模式下将字体大小提升到 150%？只要你不使用像素，一切都会放大

[http://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)

# php - UNIX_TIMESTAMP 没有工作

> ID：14509839
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:09:34.807
> 
> 标签：php, mysql, database, timestamp

在我的数据库中，我有记录：**'2013-01-24 16:40:08'**

在 PHP 上使用函数**strtotime ，我得到了时间戳****1359045608**。

执行查询：

```
SELECT UNIX_TIMESTAMP(my_timestamp_column) FROM my_table WHERE my_id_column = my_id 
```

我得到时间戳**1359056408**而不是时间戳**1359045608**。

转换**1359056408**，我得到**'2013-01-24 19:40:08'**，为什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:03:32.210

我解决了我的问题：

```
SELECT UNIX_TIMESTAMP(my_timestamp_column) + TIMESTAMPDIFF(second, UTC_TIMESTAMP(), NOW())
FROM my_table
WHERE my_id_column = my_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:15:38.703

我敢打赌，您正在将时间戳转换回 PHP 中的日期。

查看时间戳的差异：`1359056408`- `1359045608`= `10800`。

现在除以`60`秒/分钟和`60`分钟/小时：

```
10800 / 60 = 180
180 / 60 = 3 
```

这意味着您所在的时区与 UTC 时间相差 3 小时。您应该使用可以在 UTC 中生成时间戳的函数，或者（如果是这种情况）您应该使用“感知”或不受时间局部性问题影响的日期时间存储格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:33:44.890

如果您在数据库上使用 GMT，您可以通过在 php 中设置来设置 php 使用相同的时区， `date.timezone`请参见[date.timezone](http://php.net/manual/en/datetime.configuration.php)这种方式`strtotime`应该使用指定的时区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:13:03.057

我怀疑它们设置为不同的时区。

比较你的 MySQL 时间和你的 PHP 系统时间：

```
 SELECT NOW(); 
```

对比

```
 <?php
      $date = date('Y-m-d H:i:s');
       echo $date; 
```

他们可能会休息 2 小时。

# php - 如果用户已经喜欢某事，则显示一条消息

> ID：14509842
> 
> 赞同：1
> 
> 时间：2013-01-24T20:09:44.447
> 
> 标签：php, mysql

在我的 Web 应用程序中，我有 2 个按钮：一个是“喜欢”，另一个是“不喜欢”。

用户不能喜欢他们自己的个人资料。

我现在正在寻找一些代码，以便如果数据库检查显示已经有一行想要喜欢或不喜欢该配置文件的用户出现一条消息：“你已经喜欢这个用户”或“你已经不喜欢这个用户”

```
<? if ($_POST['like']){
  if(strtolower($view) == strtolower($fetchAccount['UserName'])){
    echo "You cannot Like yourself!<br /><br/>";
  } else {
     mysql_query("INSERT INTO `ProfileLikes` (`id`, `Profile`, `Rated`,
         `LikedDisliked`, `Date`) VALUES ('', '{$fetchUser['UserName']}',
         '{$fetchAccount['UserName']}', 'Liked', '$time')");
    echo "You Liked {$fetchUser['UserName']}!<br /><br />";
  }
}

if ($_POST['Dislike']){
  if(strtolower($view) == strtolower($fetchAccount['UserName'])){
    echo "You cannot DisLike yourself!<br /><br />";
  } else {
    mysql_query("INSERT INTO `ProfileLikes` (`id`, `Profile`, `Rated`,
      `LikedDisliked`, `Date`) VALUES ('', '{$fetchUser['UserName']}',
      '{$fetchAccount['UserName']}', 'Disliked', '$time')"); 
    echo "You DisLiked {$fetchUser['UserName']}!<br /><br />";
  }
}
?> 
```

有人可以帮忙吗？提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:31:55.353

干得好。

```
<?php

//-------Like section---------
if ($_POST['like']){

  if(strtolower($view) == strtolower($fetchAccount['UserName'])){

    echo "You cannot Like yourself!<br /><br/>";

  } else {

     //Check whether user 'liked' the other user already.
     $selectQuery = "select * from `ProfileLikes` where `Profile` = '" . 
          $fetchUser['UserName'] ."' AND `Rated` = '" . 
          $fetchAccount['UserName'] . "' AND `LikedDisliked` = 'Liked' ";
     $resultSetCheck = mysql_query($selectQuery);
     $rowLikedExistsArray = mysql_fetch_assoc($resultSetCheck);

     if (!empty($rowLikedExistsArray)) {

         //He 'liked' it already!
         echo "You have already liked this user! <br /><br/>";

     } else {         

         //insert new 'like'
         mysql_query("INSERT INTO `ProfileLikes` (`id`, `Profile`, `Rated`,
             `LikedDisliked`, `Date`) VALUES ('', '{$fetchUser['UserName']}',
             '{$fetchAccount['UserName']}', 'Liked', '$time')");
        echo "You Liked {$fetchUser['UserName']}!<br /><br />";

     }
  }
}

//-------Dislike section---------
if ($_POST['Dislike']){

  if(strtolower($view) == strtolower($fetchAccount['UserName'])){

    echo "You cannot DisLike yourself!<br /><br />";

  } else {

     //Check whether user 'disliked' the other user already.
     $selectQuery = "select * from `ProfileLikes` where `Profile` = '" . 
          $fetchUser['UserName'] ."' AND `Rated` = '" . 
          $fetchAccount['UserName'] . "' AND `LikedDisliked` = 'Disliked' ";
     $resultSetCheck = mysql_query($selectQuery);
     $rowDislikedExistsArray = mysql_fetch_assoc($resultSetCheck);

    if (!empty($rowDislikedExistsArray)) {

         //He 'disliked' it already!
         echo "You have already disliked this user! <br /><br/>";

    } else {
        //insert new dislike
        mysql_query("INSERT INTO `ProfileLikes` (`id`, `Profile`, `Rated`,
          `LikedDisliked`, `Date`) VALUES ('', '{$fetchUser['UserName']}',
          '{$fetchAccount['UserName']}', 'Disliked', '$time')"); 
        echo "You DisLiked {$fetchUser['UserName']}!<br /><br />";
    }

  }
}

?> 
```

注意：我可以看到一些优化。但不想破坏你的代码流。

# c# - 为什么 AsyncController 让我的服务器停止运行？

> ID：14509848
> 
> 赞同：3
> 
> 时间：2013-01-24T20:10:14.670
> 
> 标签：c#, asp.net-mvc

我最近对我的一个 ASP.NET MVC3 控制器进行了一些（相当微不足道的）更改，并将其中一个操作更改为异步操作。基本上我采用了如下代码：

```
public ActionResult MyAction(BindingObject params){
    // use HttpWebRequest to call an external API and process the results
} 
```

并将其变成如下所示的代码：

```
private delegate ActionResult DoMyAction(BindingObject params);

public void MyActionAsync(BindingObject params){
    AsyncManager.OutstandingOperations.Increment();
    var doMyAction = new DoMyAction(MyAction);
    doMyAction.BeginInvoke(params, MyActionCallback, doMyAction);
}

private void MyActionCallback(IAsyncResult ar){
    var doMyAction = ar.AsyncState as DoMyAction;
    AsyncManager.Parameters["result"] = doMyAction != null ? doMyAction.EndInvoke(ar) : null;
    AsyncManager.OutstandingOperations.Decrement();
}

public ActionResult MyActionCompleted(ActionResult result){
    return result;
}

private ActionResult MyAction(BindingObject params){
    // use HttpWebRequest to call an external API and process the results
} 
```

这似乎工作正常，当我在本地调用 MyAction 对其进行测试时，每个方法中的断点都会在我期望的时候触发，并最终返回预期的结果。

我预计此更改最多可以提高重负载下的性能，因为现在我的工作线程没有被占用，等待 HttpWebRequest 调用外部 API，最坏的情况是根本没有效果。

在推动此更改之前，我的服务器的 CPU 使用率平均约为 30%，而我的 W3SVC_W3WP Active Requests perfmon stat 徘徊在 10-15 左右。服务器是 Win Server 2008 R2，MVC 站点每秒收到大约 50 个请求。

在推动此更改后，CPU 的使用率会达到恒定的 90-100%，并且 W3SVC_W3WP 活动请求计数器会缓慢增加，直到达到最大值 5000 并保持在那里。网站变得完全没有响应（超时或出现“服务不可用”错误）。

我的假设是我要么错误地实现了 AsyncController，缺少一些额外的配置，要么只是误解了 AsyncController 的用途。无论如何，我的问题是为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:34:55.437

通过异步调用委托，您可以将工作移至线程池。你还是烧一根线。你一无所获，表现不佳。

当您可以触发真正的异步 IO 时，异步最有意义。

# jquery - 带有输入填充和 jQuery 1.9 的动画跳跃

> ID：14509850
> 
> 赞同：0
> 
> 时间：2013-01-24T20:10:26.000
> 
> 标签：jquery, animation, twitter-bootstrap, jquery-1.9

所以我只用纯 jQuery 测试了它，它工作正常。它与引导程序 CSS 有关。我正在尝试做一个简单的宽度动画，它可以工作，但是动画“跳跃”。看看小提琴，看看我在说什么：

[http://jsfiddle.net/qVz9M/2/](http://jsfiddle.net/qVz9M/2/)

您可以在没有引导 CSS 的情况下看到它可以正常工作：

[http://jsfiddle.net/qVz9M/4/](http://jsfiddle.net/qVz9M/4/)

HTML：

```
<input class="input-small find" type="text" > 
```

JavaScript：

```
$(".find").focus(function () {
    $(this).animate({
        width: "200px"
    }, 500);
}).blur(function () {
    $(this).stop().animate({
        width: "90px"
    }, 500);
}); 
```

编辑：

所以看起来填充是问题所在。还有其他人遇到这种情况吗？

Edit2：这是 jQuery 中的一个错误，修复版本为 1.9.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:14:45.150

出于好奇，如果使用 CSS 动画，动画对您来说是否更流畅：http: [//jsfiddle.net/panchroma/yYYJE/](http://jsfiddle.net/panchroma/yYYJE/)？

CSS

```
input.find{
width:90px;
transition: all .5s;
-moz-transition:all .5s; /* Firefox 4 */; 
-webkit-transition: all .5s; /* Safari and Chrome */
-o-transition: all .5s; /* Opera */
}
input.find:focus{
width:200px; 

} 
```

# php - Sharepoint 2007 HTML 表单提交到 PHP 脚本不起作用

> ID：14509851
> 
> 赞同：0
> 
> 时间：2013-01-24T20:10:27.530
> 
> 标签：php, html, forms, sharepoint, sharepoint-2007

我正在通过 Web API 在 Sharepoint Designer 2007 中为我的客户设置表单。表单只是收集一些数据，提交后，PHP 脚本会将数据编译成格式化的电子邮件并发送到指定地址。

我正在使用“空白 Web 部件页面”（用于纯 HTML）并使用“表单 Web 编辑器”部分来放置我的表单代码。

目前发生的情况是在我（正确地）填写所有字段后，单击“提交”，其中操作应将我带到 PHP 脚本（其中包含用于确认页面的 HTML），但页面只是重新加载（我假设 - 我只是在浏览器选项卡上看到“加载”符号）然后什么也不做。而且我没有收到电子邮件，所以我知道它没有到达脚本。

我已经使用纯 HTML 页面对此进行了测试，所以我知道我的代码可以正常工作（表单代码和 PHP 脚本），所以很明显 Sharepoint/ASPX 有一些东西不允许我让表单正常运行。

我试图将 PHP 脚本插入到实际页面中，但显然纯 HTML 编辑器和表单编辑器部分都不会接受 PHP 代码，因为它只是将我的所有 PHP 代码显示为纯文本，而确认页面的 HTML 是完整的. 我曾尝试将其包装在 HTML 标签中，但无济于事。

此外，我尝试简单地将 PHP 脚本上传为它自己的页面（不嵌入它，只是将其上传到页面下的站点内容） - 这不起作用。我再次尝试了同样的事情，但在 Documents 而不是 Pages 下。

这是我的 HTML 表单代码：

```
 <FORM id="RegForm2013" name="htmlform" action="/members/member-homepage/Documents/html_form_send.php" method="post" enctype="text/plain" >

    <div align="center">

<table border="0" cellpadding="4" cellspacing="0" width="100%">
    <tbody><tr>
    <td align="right" class="style4">Coordinating Allergist</td>
    <td><input type="text" name="allergist" id="allergist" size="30"></td>
</tr>

<tr>
    <td width="132" align="right" class="style4">Address</td>
    <td width="248"><input name="address" id="address" size="30" type="text"></td>
    </tr>
    <tr>
    <td align="right" class="style4">City</td>
    <td><input name="city" id="city" size="30" type="text"></td>
  </tr>
    <tr>
    <td align="right" class="style4">State</td>
    <td><input name="state" id="state" size="30" type="text"></td>
  </tr>
    <tr>
    <td align="right" class="style4">Zip</td>
    <td><input name="zip" id="zip" size="30" type="text"></td>
  </tr>
    <tr>
    <td align="right" class="style4">Office phone</td>
    <td><input name="phone" id="office_phone" size="30" type="text"></td>
  </tr>
    <tr>
    <td align="right" class="style4">Office fax</td>
    <td><input name="fax" id="office_fax" size="30" type="text"></td>
  </tr>
    <tr>
    <td align="right" class="style4">E-Mail</td>
    <td><input name="email" id="Email" size="30" type="text"></td>
  </tr>
<tr>
<td style="text-align:center">
<input name="subject" id="form_id" value="RegForm2013" type="hidden">
<input name="submit" id="button" value="Submit" type="submit">
</td>
</tr>

</tbody></table>

    </div>
  </form> 
```

我粘贴我的代码仅供参考，但我相当肯定问题出在 Sharepoint 而不是代码，是否有人对如何让自定义表单在 Sharepoint Designer 2007 中正常运行有任何见解，以及是否有人有关于单击提交时如何处理让表单识别我的 PHP 脚本？任何关于 Sharepoint 表单如何工作的概述都会有所帮助！就算说不可能……

如果有人需要查看 PHP 脚本，请告诉我

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:25:47.470

如何使用内容编辑器 Web 部件代替表单 Web 编辑器部件。此 Web 部件允许您在 sharepoint 中托管几乎任何类型的 HTML。要使用它，您只需将代码复制并粘贴到 Web 部件中。但是，您可能必须在之后使用布局。

这里有一些关于它的信息：http: [//office.microsoft.com/en-us/sharepoint-server-help/content-editor-web-part-HA010024046.aspx](http://office.microsoft.com/en-us/sharepoint-server-help/content-editor-web-part-HA010024046.aspx)

您还可以使用页面查看器 Web 部件来指向 HTML 页面（或实际上是任何网页），并让它看起来托管在 SharePoint 中，即使它不是。它通过将 url 封装在 IFrame 中来工作。

这里有一些关于它的信息：http: [//office.microsoft.com/en-us/windows-sharepoint-services-help/page-viewer-web-part-HA010024045.aspx](http://office.microsoft.com/en-us/windows-sharepoint-services-help/page-viewer-web-part-HA010024045.aspx)

# c# - 注释掉整个文件

> ID：14509855
> 
> 赞同：12
> 
> 时间：2013-01-24T20:10:46.427
> 
> 标签：c#, java, coding-style, comments

有时，我需要注释掉整个文件。通常，我只是将类包装在 中`/* */`，但如果类中已经存在注释，那将不起作用：

```
/*
class foo {

    /**
     * Great documentation - but this breaks my 
     * whole-file-comment!
     */
    public void dooFoo() {
    }

}
*/ 
```

有什么办法可以解决这个问题吗？最好不要`//`在每一行插入 -comments。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-24T20:11:58.663

> 最好不要在每一行插入 //-comments。

这是最简单的方法。大多数 IDE 都有键盘快捷键，可以在选择的每一行的开头添加或删除`//`- 所以您只需选择整个文件（例如 Ctrl-A），然后按下快捷键。

Visual Studio: `Ctrl+K`,`Ctrl+C`评论; `Ctrl+K`,`Ctrl+U`取消注释。

Eclipse 和 IntelliJ：`Ctrl+/`切换。

IntelliJ：适当`Ctrl+Shift+/`地使用`/* ... */`、处理嵌入的现有注释块。

NetBeans：`Ctrl+Shift+C`切换。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-24T20:12:54.653

您可以在 C#中使用[**#if** preprecessor 指令：](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)

```
#if false
... code ...
#endif 
```

# php - PHP 和 Javascript cookie 处理 - 浏览器之间的不同

> ID：14509857
> 
> 赞同：0
> 
> 时间：2013-01-24T20:10:47.107
> 
> 标签：php, javascript, cookies

我们有一个使用 ExpressionEngine 作为 CMS 的站点。我们还在我们网站的电子商务部分使用 Magento 的购物车。我在使用 cookie 时遇到困难，并且无法在不同区域访问它们。

我们使用 cookie 进行搜索选择，因此当用户返回我们的日程安排页面时，它会记住他们保存的最后一次选择，最多 2 天前。

我还允许他们使用 URL 来使用下面评论中显示的 URL 来设置它们。cookie 用于根据最后或最后 2 个段过滤计划中的项目。

```
//*****************************************************************************
// This is from an Expressionengine base template to set the cookie before the
// header is sent.
// These are ExpressionEngine tags that evaluate the path segments
// the URL is www.mysite/schedule/CMOL or www.mysite/schedule/CM/TX
//*****************************************************************************
{if segment_1 == "schedule" }
  {if segment_2 != ""}
<?php  
    $state = '{segment_3}'; // Could be empty
    $pro = '';
    //*******************************************************
    // clear the searchItems cookie
    // this doesn't actually clear the cookie for some reason.
    //*******************************************************
    setcookie("searchItems", "", time()-7200, '/schedule/');
    {if segment_2 == 'CMOL'}
        $state = 'OL';
        $pro = '21_FUN,22_HAN,23_MEA,24_FSR,25_ADM';
    {/if}
    {if segment_2 == "CM"}
        $pro = '21_FUN,22_HAN,23_MEA,24_FSR,25_ADM';
    {/if}
    $cookie = '2013][][0][25]['.$state.']['.$pro.'][true';

    //*******************************************************
    // Now reset it to the pro and/or state selection expires 
    // 2 days from now.
    //*******************************************************
    setcookie("searchItems", $cookie, time()+172800, '/schedule/');
?>  
  {/if} 
```

现在，在日程安排页面上，我有一些 javascript 来设置 window.onUnload 中的 cookie，以便为他们的搜索首选项设置 cookie。用于在 javascript 中设置 cookie 的代码和值如下所示：

```
// Values
// c_name  = "searchItems"
// c_value = "2013%5D%5B%5D%5B0%5D%5B25%5D%5BOL%5D%5B16_FUN%2C17_HAN%2C18_MEA%2C19_FSR%2C20_ADM%5D%5Btrue; path=/schedule/;;  expires=Sat, 26 Jan 2013 17:09:37 GMT"

//*******************************************************   
// Function to set the search preference cookie
//*******************************************************   
function setCookie(c_name,value,exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + '; path=/schedule/;' + ((exdays==null) ? "" : "");
    if(remember_params_flag) {
        c_value += " expires="+exdate.toUTCString();
    }
    document.cookie=c_name + "=" + c_value+';';
} 
```

就 cookie 而言，为了让它们在所有浏览器上工作，我做错了什么？他们不必在浏览器之间共享此信息，只需浏览器会话即可。

**顺便说一句，由于 Magento 和 ExpressionEngine 中的 SESSION 处理不一致，我不能接受 PHP SESSION 选项。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:21:39.757

有几件事，我认为您可能想使用[`onbeforeunload`事件](http://msdn.microsoft.com/en-us/library/ms536907%28VS.85%29.aspx)，但[并非所有地方都支持](https://stackoverflow.com/questions/4683221/cross-browser-onunload-and-onbeforeunload-particularly-opera-11)它，因此您可能需要进行一些检测。其次，请注意，有一些方法不会触发任何事件（崩溃），但您可能不需要为您的用例担心它们。至于你的方法，看起来还可以，但你永远不知道。我一定会在事件`setCookie`之外测试该方法`onunload`以确保它按原样工作，然后您可以开始查看事件何时在不同的浏览器中触发。

查看这些链接以及有关设置 cookie 的信息：

*   [用 JS 设置 cookie，用 PHP 问题读取](https://stackoverflow.com/questions/5045053/set-cookie-wih-js-read-with-php-problem)
*   [http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:05:34.500

我仔细检查了我写和读饼干的所有地方。我确保它们都以相同的方式编写，使用域并确保过期都设置为相同的值。

一切看起来现在都在工作。

# c# - c#密码在提交时导致危险的请求

> ID：14509870
> 
> 赞同：2
> 
> 时间：2013-01-24T20:11:26.893
> 
> 标签：c#, passwords

首先，我知道这个问题之前已经被问过一百万次，并且我已经准备好对这个问题的大量回复，但是我想知道是否有标准回复的替代方案。

我的问题，在我的注册页面上，我要求用户提供帐户密码。

用户输入使用 Server.HttpEncode 进行编码，然后加密和散列，最后传递给存储过程以添加到数据库中。

这确实可以，但是在用户输入字符密码的奇怪情况下，我会收到一个危险请求。

我的问题是：有没有办法在不设置 validateRequest="false" 的情况下停止这个危险的请求？

我宁愿不向密码添加验证（例如，只有字母数字值）

拜托，欢迎提出建议......

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:32:27.963

为此，您有 2 个选项。您可以在 Global 类或页面类中处理它。更多详细信息：[处理“潜在危险的 Request.Form 值...”](https://stackoverflow.com/questions/1890559/handle-potentially-dangerous-request-form-value)

# java - 如何防止 ProgressDialog 在 Android 中关闭屏幕旋转更改？

> ID：14509873
> 
> 赞同：6
> 
> 时间：2013-01-24T20:11:35.277
> 
> 标签：java, android, dialog

我有一个在连接到蓝牙设备时显示 ProgressDialog 的活动。它可以正常工作，直到 ProgressDialog 启动时屏幕方向发生变化。ProgressDialog 消失，当连接建立后，app 调用 progressDialog.dismiss(); 此时应用程序崩溃，因为没有 ProgressDialog 可以关闭。如何防止 ProgressDialog 在屏幕方向更改时关闭？

```
public void prepareViews(int ID, boolean state){
        switch(ID){
        case USERNAME_TEXTBOX:
            LoginUsernameTextBox.setEnabled(state);
            break;
        case PASSWORD_TEXTBOX:
            LoginPasswordTextBox.setEnabled(state);
            break;
        case LOGIN_BUTTON:
            LoginButton.setEnabled(state);
            break;
        case LOGIN_PROGRESSBAR:
            if(state == true){
                LoginProgressBar.setVisibility(View.VISIBLE);
                LoginProgressBar.setIndeterminate(true); }
            else{
                LoginProgressBar.setVisibility(View.GONE);
            }
            break;
        case CONNECTING_DIALOG:
            if(state == true){
            progressDialog = ProgressDialog.show(MainActivity.this, "", "Connecting", true); }
            else{
                progressDialog.dismiss();
            }
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T20:27:43.583

请记住，Android 会在您旋转设备时销毁并重新创建活动。您的问题很可能`progressDialog`是`null`因为在重新创建 Activity 之后没有再次设置该变量。

您需要使用[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)并牢记[活动生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html)。您需要做的是跟踪对话框是否已显示并使用 DialogFragment 在 OnCreate 中再次显示它。

以前它是使用[Activity.dismissDialog](http://developer.android.com/reference/android/app/Activity.html#dismissDialog%28int%29)和[Activity.showDialog](http://developer.android.com/reference/android/app/Activity.html#showDialog%28int,%20android.os.Bundle%29)完成的，但现在已弃用。

更多信息：[使用对话框片段](http://android-developers.blogspot.mx/2012/05/using-dialogfragments.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T16:30:56.257

I end up to use DialogFragment and it works.

```
public class MainActivity extends Activity{

    public void prepareViews(int ID, boolean state){
        switch(ID){
        case USERNAME_TEXTBOX:
            LoginUsernameTextBox.setEnabled(state);
            break;
        case PASSWORD_TEXTBOX:
            LoginPasswordTextBox.setEnabled(state);
            break;
        case LOGIN_BUTTON:
            LoginButton.setEnabled(state);
            break;
        case LOGIN_PROGRESSBAR:
            if(state == true){
                LoginProgressBar.setVisibility(View.VISIBLE);
                LoginProgressBar.setIndeterminate(true); }
            else{
                LoginProgressBar.setVisibility(View.GONE);
            }
            break;
        case CONNECTING_DIALOG:
            if(state == true){
                showDialog();
            }
            break;
        }
    }

public void showDialog() {
        FragmentManager fragmentManager = getFragmentManager();
        ProgressDialogFragment newFragment = new ProgressDialogFragment();
        newFragment.show(fragmentManager, "Dialog");
    }

public static class ProgressDialogFragment extends DialogFragment {
        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            final ProgressDialog progressDialog = ProgressDialog.show(getActivity(), "", "Connecting to " 
                    + DeviceName.subSequence(0, DeviceName.length() - 17)); 
            return progressDialog;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:23:15.803

尝试这个。

```
if ( progressDialog.isShowing()) {
                    progressDialog.dismiss();
                } 
```

这是链接[android Docs](http://developer.android.com/reference/android/app/Dialog.html#isShowing%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:21:05.907

你必须自己处理方向改变才能做到这一点。在您的清单中，为您想要执行此操作的所有活动添加 android:coinfigChange="orientation"。这将防止系统在轮换时销毁和重新创建您的应用程序，而是调用您的活动的 onConfigChange 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T20:25:57.840

您需要重载`onConfigurationChanged()`并将其添加`android:coinfigChange="orientation"`到清单中的活动。

如果您需要明智地处理旋转布局，则需要执行以下操作

```
@Override
public void onConfigurationChanged(Configuration newConfig){

    if(!isConnection){    
        super.onConfigurationChanged(newConfig);
        setContentView(R.layout.main);
    }        
} 
```

如果您想完全处理旋转，也可以在调用 setContentView() 后重建进度对话框。

# javascript - 从 Angular.js 中的 FineUploader 回调更新 ngModel

> ID：14509874
> 
> 赞同：0
> 
> 时间：2013-01-24T20:11:43.360
> 
> 标签：javascript, html, file-upload, angularjs

我是[Angular.js](http://angularjs.org/)的新手，我正在尝试通过[FineUploader](http://fineuploader.com/)库对文件进行 AJAX 发布。我试图用[其他代码修改](https://groups.google.com/d/msg/angular/8W_yNZxw8bs/qq1ySI4hDxEJ)[我在 github 上找到的指令](https://github.com/valums/file-uploader/issues/531#issuecomment-12479997)，但我似乎无法将返回值返回给模型。

我的 HTML 代码类似于

```
 <div ng-controller="Analysis"> 
    <div ng-model="analysis" fine-uploader upload-destination="upload" upload-extensions="model"></div>
  </div> 
```

使用简单的控制器

```
function Analysis($scope){
    $scope.analysis = [];
} 
```

然而，诀窍是指令

```
angular.module('cliniccio.directives', []).
  directive('fineUploader', function() {
  return {
    restrict: 'A',
    require: '?ngModel',
    link: function($scope, element, attributes, ngModel) {
      var uploader = new qq.FineUploader({
        element: element[0],
        request: {
          endpoint: attributes.uploadDestination,
        },
        validation: {
          allowedExtensions: attributes.uploadExtensions.split(',')
        },
        text: {
            uploadButton: '<i class="icon-upload icon-white"></i> Upload File'
        },
        template: '<div class="qq-uploader">' +
                    '<pre class="qq-upload-drop-area"><span>{dragZoneText}</span></pre>' +
                    '<div class="qq-upload-button btn btn-info" style="width:auto;">{uploadButtonText}</div>' +
                    '<span class="qq-drop-processing"><span>{dropProcessingText}</span></span>' +
                    '<ul class="qq-upload-list" style="margin-top: 10px; text-align: center;"></ul>' +
                  '</div>',
        classes: {
          success: 'alert alert-success',
          fail: 'alert alert-error'
        },
        callbacks: {
          onComplete: function(id, fileName, responseJSON) {
            console.log(ngModel);
            ngModel.$modelValue.push(responseJSON);
          }
        }
      });
    }
  }}); 
```

注意应该推送模型值的 onComplete 回调。但是调试输出

```
文件：{{分析 | json}}
```

仍然是空的。请注意，我已经验证服务器确实发回了预期的 json。似乎 ngModel 的名称未定义。

我尝试了各种组合，但我得出的结论是这可能不是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:57:11.727

我会在你的回调中试试这个：

```
onComplete: function(id, fileName, responseJSON) {
   //duplicate the previous view value.
   var copy = angular.copy(ngModel.$viewValue);

   //add the new objects
   copy.push(responseJSON);

   //update the model and run form validation.
   ngModel.$setViewValue(copy);

   //queue a digest.
   scope.$apply();
} 
```

我没有办法在没有小提琴的情况下尝试这个，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:42:46.667

在你的回调中试试这个：

```
onComplete: function(...) {
    scope.analysis = responseJSON;
    scope.$apply();
} 
```

由于您的指令没有创建隔离范围，`scope`因此链接函数中的变量应该可以访问控制器可以访问的所有 $scope 属性。

由于 FineUploader 在“Angular 之外”调用回调，因此您需要调用 $apply 来告诉 Angular 发生了一些变化。

# git - 为什么樱桃挑选后的变基不会两次应用相同的提交？

> ID：14509878
> 
> 赞同：34
> 
> 时间：2013-01-24T20:11:49.767
> 
> 标签：git

当您从一个分支（比如“主题”）挑选一个提交到另一个（让我们称之为“主”）提交时，该提交的历史将被重写，它的哈希值发生变化，它实际上变成了一个新的、独立的提交。

但是，当您随后针对主 git 重新设置主题时，它足够聪明，知道不适用两次提交。

例子：

```
A --- B <- master
      \
       \---- C ---- D <- topic

$ git checkout master
$ git cherrypick D

A --- B --- D' <- master
      \
       \---- C ---- D <- topic

$ git checkout topic
$ git rebase master
First, rewinding head to replay your work on top of it...
Applying 'C'

A --- B --- D' <- master
            \
             \---- C' <- topic 
```

这个魔法是如何工作的？IE。git如何知道它应该将C应用于D'，而不是D应用于D'？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-24T22:12:30.680

答案在[git-rebase](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)的手册页中：

> 请注意，HEAD 中引入与 HEAD.. 中的提交相同的文本更改的任何提交都将被忽略（即，将跳过已在上游接受的具有不同提交消息或时间戳的补丁）。

Rebase 查看文本更改，如果该提交已经存在于您要重新设置的分支上，则拒绝重播该提交。

# html - UL 使用的高度与 DIV 中指定的高度不同

> ID：14509879
> 
> 赞同：0
> 
> 时间：2013-01-24T20:11:51.213
> 
> 标签：html, css

我已将 DIV 高度设置为 54 像素，但由于某种原因，UL 仅为其一半左右 - 所有导航链接都因某种原因位于 div 的顶部。

```
 <div id="menu">
    <ul class="left" style="display: none;">
      <li id="dashboard"><a href="<?php echo $home; ?>" class="top"><?php echo $text_dashboard; ?></a></li>
    </u>
  </div> 
```

这是我认为与此相关的 CSS 中的内容：

```
#menu {
    background: url('../image/menu.png') repeat-x;
    position: relative;
    z-index: 1;
    height: 54px;
    clear: both;
    padding: 0px 30px;
    min-width: 900px;
}
#menu > ul.left {
    float: left;
}
#menu > ul.right {
    float: right;
}
#menu > ul {
    position: relative;
    margin: 0;
    padding: 0;
}
#menu > ul ul {
    list-style: none;
    margin: 0;
    padding: 0;
    background: url('../image/transparent.png');
}
#menu > ul a {
    display: block;
    text-decoration: none;
}
#menu > ul li {
    float: left;
    list-style: none;
}
#menu > ul > li + li {
    background: url('../image/split.png') center left no-repeat;
}
#menu > ul .top {
    padding: 10px 15px 9px 17px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #FFFFFF;
    text-align: center;
}
#menu > ul li ul {
    position: absolute;
}
#menu > ul ul li {
    padding: 2px;
    clear: both;
}
#menu > ul .selected .top {
    background: url('../image/selected.png') repeat-x;
    color: #FFFFFF;
}
#menu > ul .parent {
    background-image: url('../image/arrow-right.png'); 
    background-position: 95% center;
    background-repeat:no-repeat;
}
#menu > ul li ul ul {
    margin: -29px 0 0 161px;
}
#menu > ul li li a {
    padding: 5px;
    margin: 1px;
    color: #FFFFFF; 
    width: 147px;
}
#menu > ul li li > a:hover {
    margin: 0px;
    border: 1px solid #BD4C14;
    background-color: #391706; 
} 
```

知道像我做 DIV 一样需要改变什么来扩展 UL 的高度吗？

# javascript - Kendo-Knockout：从剑道网格中的模板调用方法在“父”范围内

> ID：14509891
> 
> 赞同：0
> 
> 时间：2013-01-24T20:12:13.657
> 
> 标签：javascript, knockout.js, kendo-ui

我正在使用控制后代绑定的自定义绑定。这是我的代码：

**HTML：**

```
<div>
 <div data-bind="withProperties: languagesInfoViewModel()">

          <div id="languageListGrid" data-bind="kendoGrid: { data: languageViewModels, columns: [ 
                    { 
                        template: '<a href=\'\' data-bind=\'click: function() { $parent.onLanguageSelected(&quot;#=Language#&quot;) }\'>#=Language#</a>', 
                        field: 'Language', 
                        title: 'Language',
                        width: 50
                    }

                    ], 
                scrollable: false, sortable: true, pageable: false }, preventBinding: true"
        style="height: 380px"></div>

        <button data-bind="click: showLanguageDetails">Show Language Details</button>
    <div class="hidden" data-bind="withProperties: selectedLanguageViewModel()">
              <form id="languageDetailsForm" action=" ">

                  <div data-bind="kendoWindow: {isOpen: isOpenPopUp, title:'Language', width: 400, height: 200, modal: true }">
                            test
                            <button id="cancelLanguage" class="k-button" data-bind="click: cancelLanguage">Cancel</button>
                  </div>
              </form>
    </div>
 </div> 
```

**Javascript**：

```
$(function () {
ko.bindingHandlers.preventBinding = {
    init: function () {
        return {
            controlsDescendantBindings: true
        };
    }
};

ko.bindingHandlers.withProperties = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

        var childViewModel = valueAccessor();

        childViewModel.isOpen.subscribe(function (isOpen) {
            if (isOpen) {
                var innerBindingContext = bindingContext.extend(childViewModel);
                ko.applyBindingsToDescendants(innerBindingContext, element);
            };
        });

        return { controlsDescendantBindings: true };
    }
};

ko.bindingHandlers.kendoGrid.options.dataBound = function (data) {
    var body = this.element.find("tbody")[0];

    if (body) {
        ko.applyBindings(ko.dataFor(body), body);
    }
};

var FranchiseInitializer = function () {

    var self = this;

    var initialize = function () {
        var franchiseDetailsViewModel = new FranchiseDetailsViewModel();
        ko.applyBindings(franchiseDetailsViewModel);
        franchiseDetailsViewModel.open();
    };

    initialize();
};

var FranchiseDetailsViewModel = function () {

    var self = this;

    var initialize = function () {
        self.languagesInfoViewModel(new LanguageListViewModel(self));
    };

    self.languagesInfoViewModel = ko.observable();

    self.open = function () {
        self.isOpen(true);
        self.languagesInfoViewModel().open();
    };
    self.isOpen = ko.observable(false);

    initialize();
};

var LanguageListViewModel = function (franchise) {

    var self = this;

    var initialize = function () {
        var languageViewModel = new LanguageDetailsViewModel('English', franchise);
        self.languageViewModels.push(languageViewModel);
        var languageViewModel1 = new LanguageDetailsViewModel('Spanish', franchise);
        self.languageViewModels.push(languageViewModel1);
        self.selectedLanguageViewModel(languageViewModel);
    };

    self.languageViewModels = ko.observableArray([]);
    self.selectedLanguageViewModel = ko.observable();

    self.open = function () {
        self.isOpen(true);
    };
    self.isOpen = ko.observable(false);

    self.showLanguageDetails = function () {
        self.onLanguageSelected("English");
    };

    var getLanguageViewModel = function (language) {
        return self.languageViewModels().filter(
            function (element, index, array) {
                return (element.Language() == language);
            })[0];
    };

    self.onLanguageSelected = function (selectedLanguage) {
        var languageViewModel = getLanguageViewModel(selectedLanguage);
        self.selectedLanguageViewModel(languageViewModel);
        self.selectedLanguageViewModel().open();
    };

    initialize();
};

var LanguageDetailsViewModel = function (lang, franchise) {
    var self = this;

    var closePopUp = function () {
        self.isOpen(false);
        self.isOpenPopUp(false);
    };

    self.isOpenPopUp = ko.observable(false);
    self.Language = ko.observable(lang);

    self.open = function () {
        self.isOpen(true);
        self.isOpenPopUp(true);
    };
    self.isOpen = ko.observable(false);

    self.cancelLanguage = function () {
        closePopUp();
    };
};

var initialize = new FranchiseInitializer(); 
```

我有以下问题：

当我从网格中选择一种语言时，`onLanguageSelected`应该执行一个函数。但我收到一个错误`'onLanguageSelected' is undefined`。我对其进行调试，似乎在单击网格时，我处于父上下文中`FranchiseDetailsViewModel`，而不是 `LanguageListViewModel`. 我无法在模板中说出类似 $child.onLanguageSelected 的内容。我怎样才能解决这个问题？

**小提琴**：

[http://jsfiddle.net/2Qnv7/16/](http://jsfiddle.net/2Qnv7/16/)

还有一些奇怪的事情：当您单击`Show language details`按钮时，应该会打开一个弹出窗口，但只显示动画并冻结。奇怪的是它在我的 asp.net mvc 4 应用程序中完美运行。有什么想法吗？

更新：

我能够做这样的工作：

```
languagesInfoViewModel().onLanguageSelected(&quot;#=Language#&quot;) 
```

但我不太喜欢模板中的这段代码。也许有更灵活的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:27:15.353

基于“dataBound”处理程序，整个网格的上下文是您的`FranchiseDetailsViewModel`.

您必须按照您的建议将其称为：`languagesInfoViewModel().onLanguageSelected(&quot;#=Language#&quot;)`

或者您可以考虑尝试使用 Knockout-Kendo 现在支持的行级 KO 模板。

# javascript - 在页面上使用 css 缩放时使用 javascript 定位元素

> ID：14509895
> 
> 赞同：3
> 
> 时间：2013-01-24T20:12:20.610
> 
> 标签：javascript, jquery, css

我创建了一个幻灯片插件，它获取图像列表并构建幻灯片。幻灯片放映的位置距顶部 100 像素 + $(document).scrollTop()。

这非常简单并且效果很好。当有人在页面上使用 css zoom 时，我遇到了一些问题。由于缩放，顶部位置的计算将关闭。有人知道纠正这个/解决方法的好方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-10T15:32:09.643

我遇到了同样的问题，并发现 jQuery .offset().top 正在返回一些取决于窗口滚动位置的值，如果有 CSS 缩放添加到包含我们需要从中获取位置的元素的元素。

因此，我在这种情况下使用了原生 JavaScript [.offsetTop](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.offsetTop)：

`$("#scrollDestination").get(i).offsetTop;`

但是，请记住，这将获得相对于其父级的位置，而不是返回滚动条位置的jQuery [.scrollTop() 。](http://api.jquery.com/scrolltop/)因此，您可能需要进行一些计算，但至少当您涉及 CSS 缩放时，您将获得元素位置的一致返回值。

# c# - 本地主机和实时站点的 Request.URL

> ID：14509898
> 
> 赞同：5
> 
> 时间：2013-01-24T20:12:29.350
> 
> 标签：c#, asp.net, .net, request

我有我的本地主机和一个实时站点。我有一个 url，如果它在 localhost 中，则 url 应该去 localhost/site/thank_you.aspx，如果它是实时的[http://mylivesite.com/thank_you.aspx](http://mylivesite.com/thank_you.aspx)

我已经在我的代码中尝试过这个......

```
MyHiddenField.Value = Request.URL + "/thank_you.aspx"; 
```

但它返回了我在 /thank_you.aspx 上的页面

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T20:17:27.553

试试这个，我什至也添加了方案，以防万一你去 https :)

**编辑：还添加了端口（感谢 Alex）**，以便成为**超级骗子超级面向未来的 :)**

```
MyHiddenField.Value = string.Format(
    "{0}://{1}{2}/thank_you.aspx",  
    Request.Url.Scheme, 
    Request.Url.Host,
    Request.Url.IsDefaultPort ? string.Empty : ":" + Request.Url.Port); 
```

**编辑：@MikeSmithDev 的另一个好建议，把它放在一个函数中**

```
public string GetUrlForPage(string page)
{
    return MyHiddenField.Value = string.Format(
       "{0}://{1}{2}/{3}",  
        Request.Url.Scheme, 
        Request.Url.Host,
        Request.Url.IsDefaultPort ? string.Empty : ":" + Request.Url.Port,
        page);
} 
```

然后你可以这样做：

```
MyHiddenField.Value = GetUrlForPage("thank_you.aspx"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:29:00.747

有一个内置类`UriBuilder`

```
var url = Request.Url;
var newurl = new UriBuilder(url.Scheme, url.Host, url.Port, "thank_you.aspx")
                 .ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:28:52.123

添加到上面的答案。允许函数处理相对路径。例如：~/ 或 ~/test/default.aspx

```
public string GetUrlForPage(string relativeUrl)
{
    return string.Format(
       "{0}://{1}{2}{3}",
        Request.Url.Scheme,
        Request.Url.Host,
        Request.Url.IsDefaultPort ? string.Empty : ":" + Request.Url.Port,
        Page.ResolveUrl(relativeUrl));
} 
```

# php - 以线程安全的方式创建文件

> ID：14509900
> 
> 赞同：7
> 
> 时间：2013-01-24T20:12:29.927
> 
> 标签：php, thread-safety, locking, file-locking

我有一个文件名数组，每个进程只需要创建和写入一个文件。

这就是我的目的：

```
foreach ($filenames as $VMidFile) {
    if (file_exists($VMidFile)) { // A
        continue;
    }

    $fp = fopen($VMidFile, 'c'); // B

    if (!flock($fp, LOCK_EX | LOCK_NB)) { // C
        continue;
    }

    if (!filesize($VMidFile)) { // D
        // write to the file;

        flock($fp, LOCK_UN);
        fclose($fp);
        break;
    }

    flock($fp, LOCK_UN);
    fclose($fp); // E
} 
```

但我不喜欢我依赖`filesize`.

有什么建议以另一种（更好的）方式来做吗？

**UPD**：添加标签以方便讨论

**UPD 2**：我正在使用`filesize`，因为我没有看到任何其他可靠的方法来检查*当前*线程是否创建了文件（因此它是空的）

**UPD 3**：解决方案**应该是**无条件竞争的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:25:13.323

一个可能的、略显丑陋的解决方案是锁定一个锁定文件，然后测试该文件是否存在：

```
$lock = fopen("/tmp/".$filename."LOCK", "w"); // A

if (!flock($lock, LOCK_EX)) { // B
    continue;
}
if(!file_exists($filename)){ // C
    //File doesn't exist so we know that this thread will create it
    //Do stuff to $filename
    flock($lock, LOCK_UN); // D
    fclose($lock);
}else{
    //File exists. This thread didn't create it (at least in this iteration).
    flock($lock, LOCK_UN);
    fclose($lock);
} 
```

这应该允许对文件的独占访问，并且还允许决定调用是否`fopen($VMidFile, 'c');`将创建文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:42:05.433

而不是创建一个文件并希望它不会受到干扰：

1.  创建一个*临时*文件
2.  对其进行所有必要的文件操作
3.  [`rename`](http://php.net/manual/en/function.rename.php)如果位置不存在，则将其移至新位置。

从技术上讲，由于`rename`将覆盖目标，并发线程仍有可能发生冲突。如果您有以下情况，那是不太可能的：

```
if(!file_exists($lcoation) { rename(... 
```

您可以[`md5_file`](http://php.net/manual/en/function.md5-file.php)在此块之后使用来验证文件内容是否正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:03:30.550

[您可以使用信号量](http://php.net/manual/de/ref.sem.php)来保护独占访问（仅限 UNIX，并提供`sysvsem`已安装的扩展）：

```
$s = sem_get(ftok($filename), 'foo');
sem_acquire($s);

// Do some critical work...

sem_release($s); 
```

否则你也可以使用[`flock`](http://php.net/flock). 它不需要任何特殊的扩展，但根据[PHP.net 上的评论，](http://php.net/manual/de/function.sem-acquire.php#107292)它比使用信号量要慢一些：

```
$a = fopen($file, 'w');
flock($a, LOCK_EX);

// Critical stuff, again

flock($a, LOCK_UN); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T10:19:08.483

在 fopen 调用中使用模式“x”而不是“c”。并检查生成的 $fp，如果它为 false，则该文件不是由当前线程创建的，您应该继续下一个文件名。

此外，根据您的 PHP 安装设置，如果 fopen($VMidFile, 'x') 因为文件已经存在而无法创建该文件，您可能希望在 fopen 调用前面放置一个 @ 以抑制任何警告。

即使没有羊群，这也应该有效。

# php - 关于正则表达式：在任何情况下将整个模式放在括号中是否有用？

> ID：14509901
> 
> 赞同：0
> 
> 时间：2013-01-24T20:12:31.767
> 
> 标签：php, regex

假设您有这样的模式：

```
@[a-z]+\s[\d] 
```

有这样的东西有用吗：

```
(@[a-z]+\s[\d]) 
```

在任何情况下？它们之间有什么区别吗？怎么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:47:12.573

`()`用于捕获数据。如果您尝试匹配`"My name is John"`而不捕获：

```
/My name is [A-Z][a-z]+/ 
```

那么结果将只是字符串：

```
("My name is John") 
```

如果您想从结果中单独捕获名称，那么您可以使用`()`这样的：

```
/My name is ([A-Z][a-z]+)/ 
```

这将返回整个匹配项（始终将整个匹配项作为第一个结果项返回是惯例），它还将返回捕获的名称，如下所示：

```
("My name is John", "John") 
```

如果我们想捕获名字和姓氏，`"My name is John Doe"`那么我们可以这样做：

```
/My name is ([A-Z][a-z]+) ([A-Z][a-z]+)/ 
```

结果：

```
("My name is John Doe", "John", "Doe") 
```

So, to answer your question, there is really no difference between the two expressions. The first will just match a string, while the second will match and capture it (in this case you would basicaly just end up with two identical results).

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-24T20:36:28.467

通常你把它放在双引号中......

# c++ - Pthread 和 void* 尝试取消引用泛型指针

> ID：14509909
> 
> 赞同：2
> 
> 时间：2013-01-24T20:13:08.593
> 
> 标签：c++, void-pointers, reinterpret-cast, static-cast

当我调试我的 PRJ 时，我收到此错误：

> args 错误：报告了多个错误。\ 无法执行 MI 命令：-var-create -
> 
> args 来自调试器后端的错误消息：尝试取消引用通用指针。\ 无法创建变量对象

从 void* args 转换为 Mapper* arg 时出现错误。

**更新 1**

KMaster、KMapper 分别实现了 Master、Mapper 但它们并没有添加任何相关的内容。有效的是调用方法的 KMapper `work()`。这是代码：

```
int main(){
    int np=1,K=4;
    string path="lucca.gps";
    KMaster* master=new KMaster(path,np,K);
    KMapper* mapper[np];
    master->splitting();
    for(int i=0;i<np;i++){
            mapper[i]=new KMapper(master,master->mData[i].key,master->mData[i].value);
            while(mapper[i]->work()!=0){
                cout<<"failed creating mapper, retry..."<<endl;
                sleep(1000);
            }
    }
}

int KMaster::splitting(){
    cout<<"start splitting"<<endl;
    fstream is(path.c_str());
    string s="";
    getline(is,s);
    while(!is.eof()){
        for(int i=0;i<nProc;i++){
            pair<double,double> res;
            is>>res.first;
            is>>res.second;
            is>>s;
            mapData[i].push_back(res);
            Data.push_back(res);
            if(is.eof()) break;
        }
    }        
    list<pair<double,double> >::iterator it=Data.begin();
    int increment=Data.size()/K;
    for(int i=0;i<K;i++){
        Klusters.push_back(*it);
        advance(it,increment);
    }
    for(int i=0;i<nProc;i++){
        mData[i].key=&Klusters;
        mData[i].value=&mapData[i];
    }
    cout<<"splitting completed"<<endl;
    return 0;
}

int Mapper::work(){
    Mapper* m=this;
    void* p=m;
    return pthread_create(&thread,NULL,start,p);
}

void* start(void* args){
    cout<<"start()"<<endl;
    Mapper* arg= reinterpret_cast<Mapper*>(args);
    arg->mapResult=arg->map(arg->k,arg->v);
    cout<<"Mapper finish, sending result..."<<endl;
    arg->send(arg->mapResult);
} 
```

希望有人能帮忙！

**更新 2**

调试器截图：

![日食调试](../Images/335ab24b0a43a3363fb41dbe589f8256.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:08:23.310

的值`arg`是 24，没有正常的对象会存在，因此强制转换与此无关。

不幸的是，这个“答案”只能是一个疯狂的猜测，因为您没有显示调用代码。

如果`arg`总是24，我*会*检查类似的东西：

```
class Something
{
public:
    void dostuff() { mapper.work(); }
private:
    // 24 bytes of "stuff" before this member (including possibly a vtable)
    Mapper mapper;
};

Something *thing = 0;
thing->dostuff(); // Thing->mapper will have address 24. 
```

您也可能有一个未初始化的变量

```
Mapper* mapper;
mapper->work(); // Oops, uninitialised 
```

恰好是24。

# ruby - 通过关联访问数据

> ID：14509910
> 
> 赞同：0
> 
> 时间：2013-01-24T20:13:15.253
> 
> 标签：ruby, ruby-on-rails-3, associations, model-associations

当谈到 RoR 时，我非常乐观，并且无法确定我的问题是由我的模型关联中的问题引起的，还是我只是没有使用正确的语法来访问数据。

一个用户可以有很多预算。每个预算都由多个明细行组成。我认为budget_details 中不需要用户ID，因为它已在预算中捕获，因此可以通过三者之间的关系来推断（也许？！）

在budget_details 索引中，我希望能够包含用户名；我让它在“显示”视图中工作，但不是索引。

我确实使用了脚手架来设置这些，所以我知道那里有很多杂物，我只是想做一个例子，然后再转移到一个新项目来真正做到这一点。

实际错误是；

```
NoMethodError in Budget_details#index

Showing C:/Sites/example1/app/views/budget_details/index.html.erb where line #17 raised:

undefined method `name' for nil:NilClass 
```

我不明白为什么这会失败，但 show 方法有效？是和范围有关吗？即显示是在单实例级别，而索引是在“全部”级别，所以它无法在用户中找到数据？

非常感谢任何帮助

楷模：

用户.rb

```
class User < ActiveRecord::Base
attr_accessible :email, :name

has_many :budgets
has_many :budget_details, :through => :budgets 
```

预算.rb

```
class Budget < ActiveRecord::Base
attr_accessible :budget_name, :user_id

belongs_to :user
has_many :budget_details 
```

Budget_details.rb

```
class BudgetDetail < ActiveRecord::Base
attr_accessible :amount, :amount_type, :budget_id, :itemname

belongs_to :budget 
```

控制器 - budget_details_controller.rb

```
class BudgetDetailsController < ApplicationController
# GET /budget_details
# GET /budget_details.json
def index
  @budget_details = BudgetDetail.all
  @users = User.all

    respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @budget_details }
  end
end

# GET /budget_details/1
# GET /budget_details/1.json
def show
  @budget_detail = BudgetDetail.find(params[:id])
  @user = User.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @budget_detail }
  end
end
..... 
```

show.html.erb <%= 通知 %>

```
<p>
  <b>Username:</b>
  <%= @user.name %>
</p>

<p>
  <b>Budget:</b>
  <%= @budget_detail.budget_id %>
</p>

<p>
  <b>Itemname:</b>
  <%= @budget_detail.itemname %>
</p>

<p>
  <b>Amount:</b>
  <%= @budget_detail.amount %>
</p>

<p>
  <b>Amount type:</b>
  <%= @budget_detail.amount_type %>
</p>
<%= link_to 'Edit', edit_budget_detail_path(@budget_detail) %> |
<%= link_to 'Back', budget_details_path %> 
```

index.html.erb

```
<h1>Listing budget_details</h1>

<table>
  <tr>
    <th>Username</th>
    <th>Itemname</th>
    <th>Budget</th>
    <th>Amount</th>
    <th>Amount type</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @budget_details.each do |budget_detail| %>
  <tr>
    <td><%= @user.name %></td>
    <td><%= budget_detail.itemname %></td>
    <td><%= budget_detail.budget_id %></td>
    <td><%= budget_detail.amount %></td>
    <td><%= budget_detail.amount_type %></td>
    <td><%= link_to 'Show', budget_detail %></td>
    <td><%= link_to 'Edit', edit_budget_detail_path(budget_detail) %></td>
    <td><%= link_to 'Destroy', budget_detail, method: :delete, data: { confirm: 'Are    you sure?' } %></td>
  </tr>
<% end %>
</table>

<br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:15:50.153

在您的`index.html.erb`文件中：

```
<td><%= @user.name %></td> 
```

你没有`@user`在你的`index`行动中定义 - 因此错误。

如果仅使用关联，您可以避免此问题并完全直接拉`@user`入控制器以执行任一操作：

```
<td><%= budget_detail.user.name %></td> 
```

并且为了避免这样做（N + 1）的性能损失，您可以使用以下命令将它们预先加载到您的控制器中`includes`：

```
@budget_details = BudgetDetail.includes(:user).all 
```

然而，这个关联还不存在——你需要在你的班级中添加一个“has-one-through”关系`BudgetDetail`——这与你为班级所做的相反`User`。

```
has_one :user, :through => :budget 
```

**总结一下**：

您应该将`user`关联添加`BudgetDetail`为“has-one-through”。

您的控制器操作应如下所示：

```
def index
  @budget_details = BudgetDetail.includes(:user).all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @budget_details }
  end
end

def show
  @budget_detail = BudgetDetail.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @budget_detail }
  end
end 
```

在您看来，不要使用`@user.name`：

```
<%= budget_detail.user.name %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:18:58.470

错误表示`@user.name`错误，因为`@user`是零。

在您的控制器中，您目前似乎在获取：

```
def index
  @budget_details = BudgetDetail.all
  @users = User.all 
end    

def show
  @budget_detail = BudgetDetail.find(params[:id])
  @user = User.find(params[:id]) # THIS WOULD MEAN THAT A USER HAS THE SAME ID AS THE BUDGET_DETAIL
end 
```

当索引操作获取索引模板的变量时，您会看到您没有在此处获取任何变量`@user`，只是一个`@users`包含所有用户的变量。

相反，您应该删除两个操作中的用户获取，并通过`budget_detail.user`关联在视图中获取它们。

```
def index
  @budget_details = BudgetDetail.all
end    

def show
  @budget_detail = BudgetDetail.find(params[:id])
end 
```

显示.html.erb

```
<p>
  <b>Username:</b>
  <%= @budget_detail.user.name %>
</p>

<% @budget_details.each do |budget_detail| %>
  <tr>
    <td><%= budget_detail.user.name %></td>
    ...
  </tr>
<% end %> 
```

# android - 在几个 GPS 坐标之间画线

> ID：14509915
> 
> 赞同：0
> 
> 时间：2013-01-24T20:13:35.770
> 
> 标签：android, google-maps

如何在不同的 GPS 坐标之间画线以将它们连接在一起？

我应该提一下，这不是一条路线。我正在使用卫星视图，例如，这条线可以越过一所房子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:16:39.153

如果它只是两个坐标，而不是在地图上绘制一个简单的画布并在这些坐标之间绘制一条直线，那么它将是一条简单的线，它可以在任何地方绘制，甚至在房子上。

下面的示例代码是 [在谷歌地图上绘制一条线/路径](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps?rq=1)

```
/** Called when the activity is first created. */
 private List<Overlay> mapOverlays;

 private Projection projection;  

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

linearLayout = (LinearLayout) findViewById(R.id.zoomview);
mapView = (MapView) findViewById(R.id.mapview);
mapView.setBuiltInZoomControls(true);

mapOverlays = mapView.getOverlays();        
projection = mapView.getProjection();
mapOverlays.add(new MyOverlay());        

 }

@Override
 protected boolean isRouteDisplayed() {
return false;
 }

class MyOverlay extends Overlay{

public MyOverlay(){

}   

public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);

    Paint   mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);

    GeoPoint gP1 = new GeoPoint(19240000,-99120000);
    GeoPoint gP2 = new GeoPoint(37423157, -122085008);

    Point p1 = new Point();
    Point p2 = new Point();
    Path path = new Path();

    projection.toPixels(gP1, p1);
    projection.toPixels(gP2, p2);

    path.moveTo(p2.x, p2.y);
    path.lineTo(p1.x,p1.y);

    canvas.drawPath(path, mPaint);
} 
```

# .net - Microsoft Commerce Server 的替代品

> ID：14509919
> 
> 赞同：1
> 
> 时间：2013-01-24T20:14:04.597
> 
> 标签：.net, e-commerce, microsoft-commerce-server

我正在尝试寻找 Microsoft Commerce Server 的替代品，因为 Microsoft 已将该产品出售给第三方。

我需要适合部署大规模电子商务解决方案的东西。主要要求是软件必须在.NET 平台上运行。可扩展性、可扩展性和易于开发也受到赞赏。

特别是，我们将使用该软件来管理：

*   产品
*   订单
*   篮子
*   顾客
*   折扣
*   ...

谁能给我一些提示？我一直在网上四处寻找，但似乎缺少基于 .NET 的电子商务软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:24:10.393

看看[nopCommerce](http://www.nopcommerce.com/default.aspx)。也许这就是你要找的。

# php - 正则表达式 {POST:name}

> ID：14509920
> 
> 赞同：2
> 
> 时间：2013-01-24T20:14:08.660
> 
> 标签：php, regex, forms, input, preg-match-all

我对正则表达式有所了解，但真的想了解更多信息，现在我正在尝试创建一个函数来检测我的内容（来自数据库）中的所有 {} 并检查括号之间的内容。如果有一个带有名称的 POST 或 GET（格式：POST:name 或 GET:name}，我想用该值替换它们。

示例：当我有一个包含以下输入的表单时：

```
Name
Email
Message 
```

然后在值属性中输入：`{POST:Name}` 然后脚本必须检测到`{POST:Name}`并将其替换为`$_POST['name']`. 我已经在谷歌上搜索过，但发现太多我不知道该真正使用什么。

我现在有：

```
<?php
        preg_match_all("/{(POST|GET):[.*](})/", $content, $matches, PREG_SET_ORDER);

        foreach($matches AS $match)
        {
            if(isset($_POST[$match]))
                $content = str_replace('{POST:'.$match, $_POST[$match], $content);
            else
                $content = str_replace('{GET:'.$match, $_GET[$match], $content);
        }

?> 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:24:06.587

您应该使用 preg_replace，而不是 str_replace。如果你使用 preg_replace，你不再需要你的第一个条件，et 可以只用一条指令来做同样的代码。

[http://fr2.php.net/preg_replace](http://fr2.php.net/preg_replace)

```
<?php preg_replace('#{(POST|GET):(.*)}#','$_$1[$2]',$content); ?> 
```

我的正则表达式可能是错误的，但这样的东西应该可以工作。

# gnupg - 我可以通过电子邮件地址有效地选择 gnupg 收件人吗？

> ID：14509929
> 
> 赞同：1
> 
> 时间：2013-01-24T20:14:56.550
> 
> 标签：gnupg

我们有一个 perl 程序可以为多人生成 gpg 加密文件。

今天，我们添加了*dan@example.com*。*当我运行加密脚本时，它会愉快地使用jordan@example.com*加密 dan@example.com 的文件。这大概是因为*jordan@example.com*首先在我的密钥环中。

我已经从命令行进行了测试，如果我使用**gpg -r dan@example.com --encrypt foo.txt**，友好的客户端会选择使用**jordan@example.com**的公钥，而不是更明确的**dan @example.com**。

当然，如果我使用密钥 ID，它就可以工作，但这并不是我们在这里真正得到的。有没有办法告诉 gnupg 使用更明确的电子邮件地址而不使用密钥 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T12:23:55.573

这记录在 gpg 附带的手册页中。在“如何指定用户 ID”部分，您可以找到“通过电子邮件地址完全匹配”选项。因此，您的问题的答案是使用尖括号，例如`<dan@example.com>`.

# youtube - 从 Youtube API 中提取详尽的观看视频列表（>1000 项）

> ID：14509931
> 
> 赞同：1
> 
> 时间：2013-01-24T20:15:03.973
> 
> 标签：youtube, youtube-api

我最近开始探索 Youtube API，以获取一些关于我在过去一年中以及何时观看的视频的长期数据。我目前能够拉入我观看的视频列表，但不幸的是我达到了 1000 项上限。我认为这个问题与[Accessing an item beyond start_index=1000 in a YouTube user upload feed 中](https://stackoverflow.com/questions/12708333/accessing-an-item-beyond-start-index-1000-in-a-youtube-user-upload-feed)发现的问题有关，其中调整请求 URL 可以改变结果是否来自搜索缓存。

此处的大多数类似问题都涉及请求 url，其中包括某种会触发 1000 项上限的排序，但我只是使用基本 URls，例如[https://gdata.youtube.com/feeds/api/ users/default/watch_history?v=2&start-index=1000&max-results=49](https://gdata.youtube.com/feeds/api/users/default/watch_history?v=2&start-index=1000&max-results=49)。为什么我会遇到帽子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T03:23:17.570

对于 v3，查询配额会根据您请求的返回项目数量或限制不够而增加。各种查询条目的成本更高，并且可以多个。

这可能不适用于 OP，但对于 v3 API，它是参考中的所有布局。也许在一些配额保持逻辑中编写代码，以便您更好地理解。

# c# - 检测特定线程中没有活动的时间段

> ID：14509932
> 
> 赞同：2
> 
> 时间：2013-01-24T20:15:11.620
> 
> 标签：c#, multithreading

在我的 c# windows 服务中，我启动了几个线程。每个线程都应该在没有活动的特定时间段后处理它的对象。

我尝试了 System.Threading.Timer 和 System.Timers.Timer 类，但它们都在不同的线程上引发事件。

这就是正在发生的事情：

*   在 service.start 期间创建多个线程
*   每个线程监视一个目录并为每个新文件激活资源扩展功能
*   在线程内没有活动 1 小时后（在此期间没有处理任何文件）我想清理该线程内的资源（结构映射、线程本地类）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T00:09:34.990

假设*“一段时间没有活动”*是指一个线程在[WaitSleepJoin](http://msdn.microsoft.com/en-us/library/system.threading.threadstate.aspx)中的时间过长，您可以通过调用其[中断方法](http://msdn.microsoft.com/en-us/library/system.threading.thread.interrupt.aspx)来中断这样的线程：

```
var t = new Thread(WorkerThred);
t.Start();

// when the thread's been inactive for too long, kill it!
t.Interrupt(); 
```

这将导致在目标线程中抛出[ThreadInterruptedException 。](http://msdn.microsoft.com/en-us/library/system.threading.threadinterruptedexception.aspx)因此，您可以捕获异常以释放线程的资源：

```
private void WorkerThred()
{
    try
    {
        DoWork();
    }
    catch (ThreadInterruptedException)
    {
        DisposeResources();
    }
} 
```

现在您需要一些方法来跟踪每个线程保持非活动状态的时间量。例如，创建一个所有线程在进入睡眠或等待互斥锁之前**必须调用的方法：**

```
public static void UpdateLastActiveTime()
{
    var t = Thread.CurrentThread;
    if (!lastActiveTime.ContainsKey(t))
        lastActiveTime.Add(t, DateTime.Now);
    else
        lastActiveTime[t] = DateTime.Now;
}

private static Dictionary<Thread, DateTime> lastActiveTime; 
```

最后，要检查特定线程处于非活动状态的时间，请调用以下方法：

```
public static TimeSpan GetInactiveTime(Thread t)
{
    // if thread isn't sleeping anymore update its time
    if (t.ThreadState != ThreadState.WaitSleepJoin)
        lastActiveTime[t] = DateTime.Now;
    return DateTime.Now - lastActiveTime[t];
} 
```

我相信使用这种模式，您将能够创建一个满足您要求的线程管理器类。

# python - Twisted IMAP4 Client QUOTA 命令系列

> ID：14509934
> 
> 赞同：0
> 
> 时间：2013-01-24T20:15:27.850
> 
> 标签：python, imap, twisted

**更新**似乎是twisted处理未标记响应的方式，我发现的唯一示例似乎遍历接收到的数据并以某种方式收集对他们命令的响应，尽管我不确定如何......

* * *

我正在尝试实现 RFC 2087 ( [https://www.rfc-editor.org/rfc/rfc2087](https://www.rfc-editor.org/rfc/rfc2087) ) 中定义的 IMAP4 配额命令。

代码 - ImapClient

```
class SimpleIMAP4Client(imap4.IMAP4Client):
    """
        A client with callbacks for greeting messages from an IMAP server.
        """
    greetDeferred = None

    def serverGreeting(self, caps):
        self.serverCapabilities = caps
        if self.greetDeferred is not None:
            d, self.greetDeferred = self.greetDeferred, None
            d.callback(self)

    def lineReceived(self, line):
        print "<" + str(line)
        return imap4.IMAP4Client.lineReceived(self, line)

    def sendLine(self, line):
        print ">" + str(line)
        return imap4.IMAP4Client.sendLine(self, line) 
```

代码 - QUOTAROOT 实现

```
def cbExamineMbox(result, proto):
    """
        Callback invoked when examine command completes.

        Retrieve the subject header of every message in the mailbox.
        """
    print "Fetching storage space"
    cmd = "GETQUOTAROOT"
    args =  _prepareMailboxName("INBOX")
    resp = ("QUOTAROOT", "QUOTA")
    d = proto.sendCommand(Command(cmd, args, wantResponse=resp))
    d.addCallback(cbFetch, proto)
    return d

def cbFetch(result, proto):
    """
        Finally, display headers.
        """
    print "Got Quota"
    print result 
```

输出

```
Fetching storage space
>0005 GETQUOTAROOT INBOX
<* QUOTAROOT "INBOX" ""
<* QUOTA "" (STORAGE 171609 10584342)
<0005 OK Success
Got Quota
([], 'OK Success') 
```

所以我正在获取数据但结果不包含它，我认为这是因为它们是未标记的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:14:53.243

由于 IMAP4 协议将许多不同种类的信息混合在一起作为“未标记的响应”，因此您可能还需要更新 IMAP4 客户端实现中解析代码的其他部分。

具体来说，看看`twisted.mail.imap4.Command`它的`finish`方法。还要看一下`twisted.mail.imap4.IMAP4Client._extraInfo`，这是作为`unusedCallback`to传递的内容`Command.finish`。

首先，您可以检查是否正在发送对*QUOTA*`_extraInfo`命令的未标记响应（然后丢弃（嗯，记录））。

如果是这样，我怀疑您想教`Command`识别对*QUOTA命令的**QUOTA*和*QUOTAROOT*未标记响应，以便它收集它们并将它们作为触发它的结果的一部分发送。*`Deferred`*

 *如果没有，您可能需要更深入地挖掘逻辑`Command.finish`以查看数据*的*最终位置。

您可能还想实际实现该`Command.wantResponse`功能，该功能目前似乎只是部分形成（即，许多客户端代码试图发送有趣的值`Command`来初始化该属性，但据我所知，实际上没有使用该值属性）。*

# magento - magento 热门搜索 - 尾部斜杠

> ID：14509943
> 
> 赞同：0
> 
> 时间：2013-01-24T20:16:04.340
> 
> 标签：magento, magento-1.7

“5 最近的搜索”和热门搜索页面充满了附加了“斜杠”的搜索词：

'{search_term}'、'{search_term}/'、\'{search_term}//' ... '{search_term}/////////////////// /'</p>

有人知道它是否是 Magento 错误吗？知道什么可能导致这个问题吗？

我正在使用 Magento 1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:40:56.303

我们在 v 1.7 上运行了许多商店，从未遇到过此类问题。我的猜测是，某些爬虫会使用生成不佳的搜索列表来攻击您的搜索表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:25:01.250

我真的不知道为什么我以前的解决方案帖子被删除了，但无论如何......这是网络爬虫的问题。尝试找出哪个在您的商店中破坏了您的搜索功能并尝试阻止它。

# eclipse - 如何在eclipse的编译器列表中添加JDK 7

> ID：14509946
> 
> 赞同：2
> 
> 时间：2013-01-24T20:16:16.830
> 
> 标签：eclipse, rational-rsa

我已经在我的机器上安装了 JDK7，我希望它添加到编译器列表中![在此处输入图像描述](../Images/5a9d7a0672d79ec8ca9120f126d149c0.png)

我已经尝试在已安装的 JRE 列表中添加 JDK 7，但它仍然没有出现在编译器合规级别列表中。![在此处输入图像描述](../Images/a37af3466f63680f588ceeab9398f978.png)

谁能告诉我如何将 JDK 7 添加到新的合规级别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:22:09.947

Eclipse 使用它自己的编译器（请参阅[What is the difference between javac and the Eclipse compiler?](https://stackoverflow.com/questions/3061654/what-is-the-difference-between-javac-and-the-eclipse-compiler)），因此如果您使用旧版本的 Eclipse（因为您的 RSA 可能基于），您将找不到它。Java 7 支持可用于 Eclipse 3.7.1 或更高版本（目前稳定版为 4.2）。

但是，如果您想保留那个版本的 Eclipse，您可以使用您的 JDK7 作为基础创建一个新的 Builder。为此，请转到 Project 并添加一个新的 Builder，指定 javac 的位置和其他选项。

也看看这个问题：[Eclipse 3.5 and Java 7](https://stackoverflow.com/questions/10847294/eclipse-3-5-and-java-7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:22:52.337

看来您必须使用 3.8 版本的 eclipse 才能获得 Java 7 支持。但我注意到一些更高版本的 3.7.x 也可能有它。

见此功能：

[http://www.eclipse.org/jdt/ui/r3_8/Java7news/whats-new-java-7.html](http://www.eclipse.org/jdt/ui/r3_8/Java7news/whats-new-java-7.html)

# angularjs - Angular - 服务中的功能无法识别 $resource

> ID：14509948
> 
> 赞同：0
> 
> 时间：2013-01-24T20:16:27.587
> 
> 标签：angularjs

我正在使用 Angular 工厂并尝试进行 Web 服务调用，但看起来它无法识别 $resource。

```
.factory('User', function($resource) {
function login() {
  // THIS IS NOT WORKING, how do I make a webservice call from here?
  $resource('/api/user.json', {}, {

      method: 'POST',
      isArray: false

  });

  return true;
}

function logout() {
  return false;
}

return {
  login : function() { return login(); },
  logout: function() { return logout(); }
}; 
```

谢谢，
三通

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:01:44.350

我假设您在某处有资源模块文件：

[https://raw.github.com/angular/angular.js/master/src/ngResource/resource.js](https://raw.github.com/angular/angular.js/master/src/ngResource/resource.js)

您需要在您的应用程序中导入正确的模块：

```
var App = angular.module("App",["ngResource"]); 
```

然后以“理智”的方式使用它：

```
var User = App.factory("User",function($resource){
    var User = $resource('/api/user.json',{},{
       login:{method:"POST",isArray:true},
       logout:{method:"POST"}
    });
    return User;
    // use User in your controller or another service.
}); 
```

文档在这里：[http](http://docs.angularjs.org/api/ngResource) ://docs.angularjs.org/api/ngResource .$resource

# git - 我的差异包含尾随空格 - 如何摆脱它？

> ID：14509950
> 
> 赞同：51
> 
> 时间：2013-01-24T20:16:38.070
> 
> 标签：git, netbeans, whitespace, removing-whitespace, textwrangler

我尝试在 TextWrangler、NetBeans 和 vim 中编辑一个行尾设置为 Unix 的 php 文件。当我将差异保存到补丁然后尝试应用它时，它会给出空白错误。当我键入时，`git diff`我可以在行尾看到`^M`，但如果我在 vim 中手动删除这些，它会说我的补丁文件已损坏，然后补丁根本不适用。

我使用以下命令创建补丁：

`git diff > patchname.patch`

我通过检查要修补的文件的干净版本并键入来应用它

`git apply patchname.patch`

如何创建没有空格错误的补丁？我以前创建过补丁，从来没有遇到过这个问题。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-12-09T06:48:44.943

`git apply --reject --whitespace=fix mychanges.path`

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-01-25T01:00:43.813

你确定这些是硬错误吗？默认情况下，git 会警告空格错误，但仍会接受它们。如果它们是硬错误，那么您必须更改了一些设置。您可以使用该`--whitespace=`标志来`git apply`在每次调用的基础上控制它。尝试

```
git apply --whitespace=warn patchname.patch 
```

这将强制执行默认行为，即警告但接受。您还可以使用`--whitespace=nowarn`完全删除警告。

控制它的配置变量是`apply.whitespace`.

* * *

作为参考，这里的空白错误不是您的补丁错误。默认情况下，git 在应用补丁时会抱怨这是一种代码风格的东西。值得注意的是，它不喜欢尾随空格。同样`git diff`会突出显示空白错误（如果您要输出到终端并且颜色已打开）。默认行为是警告，但无论如何都要接受补丁，因为不是每个项目都对空白很感兴趣。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-21T08:38:52.873

尝试补丁 -p1 < 文件名.patch

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-10T09:18:19.107

当我的队友在 Linux/Windows 上工作或使用 git send-email 时，我多次遇到此类问题。

我一直习惯于遵循以下命令。

```
git apply -3 --whitespace=fix yourpatch.patch 
```

或者

```
git am -s -3 --whitespace=fix yourpatch.patch 
```

-3 选项将尝试三向合并，它也将有助于解决其他问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-19T00:20:55.963

单线解决方案是：

```
emacs <filename> -f delete-trailing-whitespace -f save-buffer -f kill-emacs 
```

来源： [https ://wiki.gnome.org/Projects/GnomeShell/Development/WorkingWithPatches](https://wiki.gnome.org/Projects/GnomeShell/Development/WorkingWithPatches)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-20T14:01:58.327

我认为如何处理空白的问题已经得到了充分的回答，但你问它来自哪里。您在行尾提到`^M`：这就是 Git 显示 Windows 行尾的方式。也许在创建补丁之前尝试`dos2unix`在源文件上运行，或者使用维护原始行结尾的编辑器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-25T11:02:15.400

您可以将 combineiff 与 patchutils [1] 中的 -w 选项一起使用

`git diff | combinediff - /dev/null -w > patchname.patch`

[1]
[https://github.com/twaugh/patchutils](https://github.com/twaugh/patchutils)
[https://repology.org/project/patchutils/versions](https://repology.org/project/patchutils/versions)

# javascript - 如何在 angularjs 中使用嵌入？

> ID：14509959
> 
> 赞同：4
> 
> 时间：2013-01-24T20:17:15.940
> 
> 标签：javascript, angularjs, javascript-framework

在 John Lindquist 教程中，嵌入用于从指令中获取一些内容并将其放在所需的位置。

但是文档讨论了 translude 函数并将其传递给控制器​​和编译函数。那么，什么是嵌入以及如何使用它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T20:52:53.300

创建基本指令时，嵌入很容易：

```
module.directive( 'myTransDir', function () {
  return {
    transclude: true,
    scope: true,
    replace: true,
    template: '<div><h1>Hello!</h1><div ng-transclude></div></div>',
  };
}); 
```

因为模板包含`ngTransclude`指令，它会自动为我嵌入内容。如果我这样使用它：

```
<div my-trans-dir>
  <p>Some Content</p>
</div> 
```

生成的 HTML 将是：

```
<div>
  <h1>Hello!</h1>
  <div>
    <p>Some Content</p>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T22:29:26.067

@Josh 已经介绍了 ngTransclude。这是嵌入的“正常用例”。

您还询问了文档中的这些陈述：

> controller - 控制器构造函数...
> 控制器可注入以下局部变量：
> ...
> $transclude - 预先绑定到正确的嵌入范围的嵌入链接函数：function(cloneLinkingFn)。

和

> compile 函数处理模板 DOM
> 的转换... compile 函数采用以下参数。
> ...
> transclude - 一个 transclude 链接函数：function(scope, cloneLinkingFn)。

我考虑了这些深奥的嵌入用例。我个人在 stackoverflow 上只看到过一次提到这些，我会在那里向您推荐：
[您对 transclude 函数和克隆链接函数究竟做了什么？](https://stackoverflow.com/questions/13183005/what-exactly-do-you-do-with-the-transclude-function-and-the-clone-linking-functi)

来自@blesh 的引用：“这两种嵌入方法使您能够通过对进程的编程访问来控制与您的嵌入有关的一切。”

**更新**：我发现了一篇关于嵌入的不错的[博客文章](http://blog.omkarpatil.com/2012/11/transclude-in-angularjs.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T20:35:43.920

[Egghead.io](http://egghead.io/video/directive-example-building-zippy/)上的Johns “Building Zippy”教程是我见过的关于嵌入的最好描述。您对这两种说法都是正确的，John 只是举了一个例子，但幕后发生的事情是标记中的 html 是通过编译器与模板一起放置的。在他的教程中，John 意外地将内容留在了模板中，您可以看到 Angular 的编译器如何连接标记 html 和模板 html。

# mysql - Mysql if field null 取一些值

> ID：14509964
> 
> 赞同：0
> 
> 时间：2013-01-24T20:17:40.107
> 
> 标签：mysql, ruby-on-rails

我有这样的代码：（在 RoR 上）：

```
@types = Type.where("TYP_MOD_ID = ? AND (SUBSTRING(TYP_PCON_START,1,4) <= ?) AND (SUBSTRING(TYP_PCON_END,1,4) >= ?) AND TYP_KV_FUEL_DES_ID = ? ", params[:models], params[:year], params[:year], params[:fueltype]).order("TYP_HP_FROM") 
```

但有时 TYP_PCON_END 在 db 中为 null ......在这种情况下如何使用不是 null，而是我的值，由 ruby​​ (date.now(YEAR)) 发送？

**那么如果字段为空如何使用另一个值呢？** 如何检查null，如果不为null，则使用我的代码`(SUBSTRING(TYP_PCON_END,1,4) >= ?)` 和另一个：

```
? >= ? 
```

如果为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:20:32.810

您可以使用`COALESCE`：

```
SUBSTRING(COALESCE(TYP_PCON_END, 'some default string'),1,4) > ? 
```

如果您不需要默认值的子字符串，那么您只需这样做：

```
COALESCE(SUBSTRING(TYP_PCON_END,1,4), 'AAAA') > ? 
```

这是可行的，因为`SUBSTRING`对空值执行 a 也会产生空值。

# spring - 在 Spring 注释配置中无法通过 JNDI 查找找到 JBoss ConnectionFactory

> ID：14509967
> 
> 赞同：1
> 
> 时间：2013-01-24T20:17:46.010
> 
> 标签：spring, jboss7.x, spring-annotations, spring-jms, jmstemplate

尽管 JBoss (AS 7.1.1.Final) 连接工厂的绑定似乎是成功的：

```
[org.jboss.as.messaging] (MSC service thread 1-9) JBAS011601: Bound messaging object to jndi name java:/ConnectionFactory 
```

查找中的 ConnectionFactory 始终为空。任何人都可以看到问题是什么？

```
@Configuration
@ComponentScan(basePackages = "reservation")
public class AppConfiguration extends WebMvcConfigurerAdapter {

    // ***********************//
    // ******** JMS **********//
    // ***********************//
    @Bean
    public ConnectionFactory jmsConnectionFactory() {
        JndiObjectFactoryBean jndiObjectFactoryBean = new JndiObjectFactoryBean();
        jndiObjectFactoryBean.setJndiName("java:/ConnectionFactory");
        return (ConnectionFactory) jndiObjectFactoryBean.getObject();
    }

    @Bean
    public Queue requestsQueue() {
        JndiObjectFactoryBean jndiObjectFactoryBean = new JndiObjectFactoryBean();
        jndiObjectFactoryBean.setJndiName("java:/queue/test");
        return (Queue) jndiObjectFactoryBean.getObject();
    }

    @Bean
    public JmsOperations jmsOperations() {
        final JmsTemplate jmsTemplate = new JmsTemplate(jmsConnectionFactory());
        jmsTemplate.setDefaultDestination(requestsQueue());
        return jmsTemplate;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:24:31.733

不幸的是，您必须[`afterPropertiesSet()`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jndi/JndiObjectFactoryBean.html#afterPropertiesSet%28%29)手动调用：

```
@Bean
public ConnectionFactory jmsConnectionFactory() {
    JndiObjectFactoryBean jndiObjectFactoryBean = new JndiObjectFactoryBean();
    jndiObjectFactoryBean.setJndiName("java:/ConnectionFactory");
    jndiObjectFactoryBean.afterPropertiesSet();                    //HERE
    return (ConnectionFactory) jndiObjectFactoryBean.getObject();
} 
```

我特别喜欢的另一种选择如下：

```
@Bean
public JndiObjectFactoryBean jmsConnectionFactoryFactoryBean() {
    JndiObjectFactoryBean jndiObjectFactoryBean = new JndiObjectFactoryBean();
    jndiObjectFactoryBean.setJndiName("java:/ConnectionFactory");
    return jndiObjectFactoryBean;
}

public ConnectionFactory jmsConnectionFactory() {
    return (ConnectionFactory) jmsConnectionFactoryFactoryBean().getObject();
} 
```

请注意，`jmsConnectionFactory()`没有用（它**很**`@Bean`重要）注释。在这种情况下，Spring 将为您调用适当的回调方法。

# java - java中的构造函数是什么，如果它不是类的成员？

> ID：14509968
> 
> 赞同：2
> 
> 时间：2013-01-24T20:17:45.730
> 
> 标签：java, constructor

如果它不是 Oracle 文档中所述的类的成员，我们称它为什么构造函数：http: [//docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:22:04.120

我认为为了方便起见，“成员”一词被定义为排除构造函数。构造函数，即使是公共的，也不会被继承；成员是继承的（除非它们是静态的和/或私有的）。在谈论继承规则时总是不得不说“除了构造函数之外的成员”会很尴尬。

来自[Java 语言规范，第 8.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.2)：

> 构造函数、静态初始化程序和实例初始化程序不是成员，因此不会被继承。

只需将构造函数称为“构造函数”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:24:18.310

它是每个类都有的特殊方法，在创建对象后调用。在JVM中使用`invokespecial`so调用它，让我们称之为`special`方法吗？

而且由于 Java 中只有 1 个特殊方法 - 他们都称它为“构造函数”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:27:44.863

所有文档都在说构造函数默认情况下不被继承。由于构造函数是在内存堆中构造对象时调用的方法，所以一旦创建了继承自超类的子类，默认情况下不会调用超类的构造函数。

例如，如果你有一个类`Vehicle`和一个子类`Car`，假设`Vehicle`构造函数如下：

```
public Vehicle(String vehName) {
    this.vehName = vehName;
} 
```

然后，即使您的类`Car`继承自 class `Vehicle`，`vehName`成员（字段）也不会像上面的构造函数那样设置。

所以你需要做这样的事情：

```
public Car(String vehName) {
    super(vehName);
} 
```

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-02T19:43:41.957

在 Java 中，类主体（大括号之间的区域）可以包含以下关键项：（1）字段（2）方法（3）其他类（嵌套类）（4）构造函数（5）初始化器

从特定类创建的对象应采用类似于创建它的蓝图（类）的形状。现在，如果您查看可以包含在类主体中的项，则只有项 (1) 到 (3) 有助于确定可以从特定类定义中创建哪种对象。

构造函数和初始化器只在对象的实际创建中起作用（例如，已经定义的字段的初始化），但不决定该对象应该携带什么形状/状态，以及它将显示什么行为。

出于这个原因，对我来说，将项目 (1) 称为 (3) 类成员是有意义的（即类成员是类主体中的那些项目，它们确定从类创建的对象的外观和行为方式）；而构造函数和初始化器不是成员，因为它们在类定义中的缺失不会影响类的状态和行为。

因此，只有类成员可以被继承，因为继承背后的重点是启用子类重用其超类的状态和行为。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T20:31:06.213

构造函数是类中的一种方法，用于创建该类的新实例。成为班级成员仅意味着所讨论的项目在班级中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-09-06T11:03:40.890

构造函数是一个名称与类相同的方法。它用于初始化类的对象。它隐含在行动中。参数构造函数用不同的值初始化对象。

# php - jquery不返回body.text

> ID：14509969
> 
> 赞同：0
> 
> 时间：2013-01-24T20:17:46.483
> 
> 标签：php, jquery

我有一个 ajax 帖子向 php 发送一个网站地址，它检索它，然后我希望 jquery 在网站中找到某些元素并检索这些元素中的文本。它适用于 h1 h2 pa 等一些元素，但不适用于所有网站，我无法获取正文和元标记，即 body.text 什么也不返回。是我的 ajax 帖子还是 php 导致了这里的问题？

这是我的ajax帖子

```
var dataString = name;

            $.ajax({
      type: "POST",
      url: "senddom.php",
      data: {"dataString" : dataString },
      dataType: "json",
      success: function(response) {
  $('body').append("<p> contents of title:" + $(response).find("Title").text()+ "</p>");          
  $('body').append("<p> contents of meta:" + $(response).find('Meta').text()+ "</p>");      
  $('body').append("<p> contents of all: " + $(response).find('body').text() + "</p>");

 $(response).find('p').each(function() {
  $('body').append("<p> contents of p: " + $(this).text() + "</p>");
}); 
```

和我刚刚开始学习的 php

```
<?php 
    $site= $_POST['dataString'];             // get data
function curl_get($site){
    $useragent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$site);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,5);
    curl_setopt($ch, CURLOPT_USERAGENT, $useragent);   
    $data=curl_exec($ch);
    curl_close($ch);
    return $data;
}

function getdom($site){
    $html = curl_get($site);
    // Create a new DOM Document
    $xml = new DOMDocument();
    @$xml->loadHTML($html);
   echo json_encode($html);  
}
echo getdom($site);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:31:39.210

在 jQuery doc 上，我发现了一些有趣的东西。我们不能`.text()`在脚本上使用方法。所以我很确定，你的身体里有脚本，所以`.text()`不起作用。使用`.html()`，它应该工作。

[http://api.jquery.com/text/](http://api.jquery.com/text/)

# android - 如何使用android中的javamail api从应用程序从Gmail和Ymail发送邮件

> ID：14509973
> 
> 赞同：0
> 
> 时间：2013-01-24T20:18:11.067
> 
> 标签：android, jakarta-mail

我正在尝试使用 java mail api 制作应用程序。我想从 yahoo 和 gmail 帐户发送邮件。我使用的代码可以从 yahoo 和 gmail 帐户发送电子邮件。但是问题是....程序第一次运行时，如果我从gmail帐户发送邮件，那么即使我第二次输入雅虎帐户，邮件也是从gmail帐户发送的..!!! 我不明白该怎么做。请帮忙...

MainActivity.java

```
.......
.......
if(sender.contains("gmail")){                   

                try {                       
                    GmailSender ss = new GmailSender(sender, password,1);                        
                    ss.sendGMail(sub,msg,sender,str);   
                } catch (Exception e) {   
                    //Log.e("SendMail", e.getMessage(), e);   
                }
                }
                else if(sender.contains("yahoo")){

                    try {                       
                        GmailSender ss = new GmailSender(sender, password,2);                        
                        ss.sendGMail(sub,msg,sender,str);   
                    } catch (Exception e) {   
                        //Log.e("SendMail", e.getMessage(), e);   
                    }

                } 
```

GmailSender.java

```
public class GmailSender extends Authenticator {   
String mailhost;// = "smtp.gmail.com";   
private String user;   
private String password;   
Session sessionG;  

static {   
    Security.addProvider(new com.receme.sentmailbackground.JSSEProvider());   
}  

public GmailSender(String user, String password,int flag) {   
    this.user = user;   
    this.password = password;  

    if(flag==1)
        mailhost = "smtp.gmail.com";
    else if(flag==2)
        mailhost = "smtp.mail.yahoo.com";
    Properties props = new Properties();   
    props.clear();
    props.setProperty("mail.transport.protocol", "smtp");   
    props.setProperty("mail.host", mailhost);   
    props.put("mail.smtp.auth", "true");   
    props.put("mail.smtp.port", "465");   
    props.put("mail.smtp.socketFactory.port", "465");   
    props.put("mail.smtp.socketFactory.class",   
            "javax.net.ssl.SSLSocketFactory");   
    props.put("mail.smtp.socketFactory.fallback", "false");   
    props.setProperty("mail.smtp.quitwait", "false");   

    sessionG = Session.getDefaultInstance(props, this);   
}   

protected PasswordAuthentication getPasswordAuthentication() {   
    return new PasswordAuthentication(user, password);   
}   

**This part is edited**

public synchronized void sendMail(String subject, String body, String sender, String recipients, String attachment) throws Exception {   
        try{

        MimeMessage message = new MimeMessage(sessionG);   
        //DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
        message.setSender(new InternetAddress(sender));   
        message.setSubject(subject);   
        //message.setDataHandler(handler)
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   

        BodyPart messageBodyPart1 = new MimeBodyPart();
        messageBodyPart1.setText(body);

        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart1);

        //for attaching file from sdcard

        MimeBodyPart messageBodyPart2 = new MimeBodyPart();
        String filename = attachment;

        if(!(filename.equalsIgnoreCase("no file is attached"))){

        DataSource source = new FileDataSource(filename);
        messageBodyPart2.setDataHandler(new DataHandler(source));

        StringTokenizer st = new StringTokenizer(filename,"/");
        String tempString = null;
        while(st.hasMoreTokens()){
            tempString = st.nextToken();
        }
        System.out.println(tempString);

        //filename = tempString;

        messageBodyPart2.setFileName(tempString);        
        multipart.addBodyPart(messageBodyPart2);

        }

        //6) set the multiplart object to the message object
        message.setContent(multipart);

        //7) send message
        Transport.send(message);

        System.out.println("success");

        }catch(Exception e){
            //e.printStackTrace();
            System.out.println("Attached File is not found");
            //Make a notification
        }
    } 
```

// ***** ** *** ** *** ** *** ** ***** //

```
public class ByteArrayDataSource implements DataSource {   
    private byte[] data;   
    private String type;   

    public ByteArrayDataSource(byte[] data, String type) {   
        super();   
        this.data = data;   
        this.type = type;   
    }   

    public ByteArrayDataSource(byte[] data) {   
        super();   
        this.data = data;   
    }   

    public void setType(String type) {   
        this.type = type;   
    }   

    public String getContentType() {   
        if (type == null)   
            return "application/octet-stream";   
        else  
            return type;   
    }   

    public InputStream getInputStream() throws IOException {   
        return new ByteArrayInputStream(data);   
    }   

    public String getName() {   
        return "ByteArrayDataSource";   
    }   

    public OutputStream getOutputStream() throws IOException {   
        throw new IOException("Not Supported");   
    }   
}} 
```

JSSEProvider.java

```
public final class JSSEProvider extends Provider {

public JSSEProvider() {
    super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
    AccessController.doPrivileged(new java.security.PrivilegedAction<Void>() {
        public Void run() {
            put("SSLContext.TLS",
                    "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
            put("Alg.Alias.SSLContext.TLSv1", "TLS");
            put("KeyManagerFactory.X509",
                    "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
            put("TrustManagerFactory.X509",
                    "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
            return null;
        }
    });
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:33:40.137

您犯了几个[常见的 JavaMail 错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。

# iphone - 创建自定义单元格 Xcode 时写入标签

> ID：14509977
> 
> 赞同：0
> 
> 时间：2013-01-24T20:18:32.113
> 
> 标签：iphone, objective-c, xcode, uitableview, custom-cell

当我尝试写入自定义单元格中的标签时，我一直遇到问题。所以现在，我有一个带有名为“AccountViewController”的表格视图的类，我有一个带有自定义单元格“AccountViewCell”的类。我可以让我的单元格正确显示在我的表格中，但是当我尝试时遇到问题将我的自定义单元格中的标签链接到他们的网点以及当我写入标签时。

现在我的代码是：

AccountViewController.h

```
#import <UIKit/UIKit.h>
#import <GameKit/GKSession.h>
#import <GameKit/GKPeerPickerController.h>

@interface AccountViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
{

    NSArray     *tableData;
    int         cellValue;
    NSString    *cellContents;

}

@property (nonatomic, retain) NSArray   *tableData;
@property (nonatomic, retain) NSString  *cellContents;
@property (nonatomic, retain) NSString  *accountSelected;
@property (nonatomic, retain) NSString  *accountList;
@property (nonatomic, retain) NSString  *amount;

@end 
```

AccountViewController.m

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *CellIdentifier = @"AccountViewCell";
    AccountViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        // Load the top-level objects from the custom cell XIB.
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"AccountViewCell" owner:self options:nil];
        // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
        cell = [topLevelObjects objectAtIndex:0];
    }

    // cell.accountNameLabel.text = [tableData objectAtIndex:indexPath.row];

    return cell;

} 
```

AccountViewCell.h：

```
#import <UIKit/UIKit.h>

@interface AccountViewCell : UITableViewCell

@property (nonatomic, weak) IBOutlet UILabel *accountNameLabel;
@property (nonatomic, weak) IBOutlet UILabel *accountNumberLabel;
@property (nonatomic, weak) IBOutlet UILabel *balanceLabel;

@end 
```

AccountViewCell.m

```
#import "AccountViewCell.h"

@implementation AccountViewCell

@synthesize accountNameLabel = _accountNameLabel;
@synthesize accountNumberLabel = _accountNumberLabel;
@synthesize balanceLabel = _balanceLabel;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

    if (self)
    {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

同样，当我不尝试设置标签的文本或将插座连接到 AccountViewCell 中的标签时，我的代码工作正常并显示我的自定义单元格，如下所示：

[http://i.imgur.com/TuFun5y.png](http://i.imgur.com/TuFun5y.png)

我的单元格标识符是正确的：http: [//i.imgur.com/ZbsDvaa.png](http://i.imgur.com/ZbsDvaa.png)

现在，问题是当我像这样连接插座时：http: [//imgur.com/OOiKpkM](http://imgur.com/OOiKpkM)

即使我没有在 AccountViewController.m 中设置或声明标签，代码也会中断。它给了我这个错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<AccountViewController 0x104b2220> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key accountNameLabel.'
*** First throw call stack:
(0x248e012 0x1d2be7e 0x2516fb1 0x815711 0x796ec8 0x7969b7 0x7c1428 0xd620cc 0x1d3f663 0x248945a 0xd60bcf 0xd6298d 0x28e54 0xbfff4b 0xc0001f 0xbe880b 0xbf919b 0xb9592d 0x1d3f6b0 0x287ffc0 0x287433c 0x2874150 0x27f20bc 0x27f3227 0x27f38e2 0x2456afe 0x2456a3d 0x24347c2 0x2433f44 0x2433e1b 0x29e37e3 0x29e3668 0xb4565c 0x49b2 0x2c45)
libc++abi.dylib: terminate called throwing an exception 
```

我需要一种能够写入标签的方法。我已经尝试了我能想到的一切并阅读了许多线程，但是我无法弄清楚这一点。如果有人可以请帮助并可以向我展示一种在自定义单元格中写入标签的方法，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:48:43.457

好的，我想通了。我不应该通过文件所有者链接标签，而是通过表格单元格。

# java - JAR Manifest.MF 的 Xbootclasspath/p 等效项？

> ID：14509978
> 
> 赞同：1
> 
> 时间：2013-01-24T20:18:34.350
> 
> 标签：java, jar, classpath, manifest.mf

我目前使用命令行参数运行我的 JAR（它覆盖默认的 JRE 类），例如

```
java -Xbootclasspath/p:lib/1.jar;lib/2.jar -jar myJAR.jar 
```

我想将这些覆盖放入 JAR Manifest.MF 中，例如

```
Boot-Class-Path: lib/1.jar lib/2.jar 
```

但这似乎根本不起作用。

如何使用 Manifest.MF 获得相同的功能？

# xml - Vim：使 XML 文本“漂亮”

> ID：14509979
> 
> 赞同：2
> 
> 时间：2013-01-24T20:18:42.780
> 
> 标签：xml, editor, vi, text-processing, text-formatting

是否有一种简单的方法`vi`可以让您的 XML 文本“漂亮”？

例如：

我要这个..

```
 <person>
  <name>Nick</name>
 <age>26</age>

         <gender>male</gender>
<occupation>doctor</occupation>

    </person> 
```

成为这个（包括空格）......

```
<person>

    <name>Nick</name>
    <age>26</age>
    <gender>male</gender>
    <occupation>doctor<occupation>

</person> 
```

我尝试在以下范围内使用这些命令`vi`：

```
:set filetype=xml
:filetype indent on
gg=G 
```

但它只是消除了我所有的缩进。所以现在，一切看起来像这样：

```
<person>
<name>Nick</name>
<age>26</age>
<gender>male</gender>
<occupation>doctor</occupation>
</person> 
```

# r - R data.table 子集子集

> ID：14509982
> 
> 赞同：5
> 
> 时间：2013-01-24T20:18:54.810
> 
> 标签：r, dataframe, data.table, plyr, subset

我有一个由客户交易数据组成的数据集。它具有某些事件发生时间的时间戳。我想只获取在某个事件之前发生的事件，而是针对每个客户，而不仅仅是单个时间点。

这是一个快照：

```
 custId         date_time_recorded              event           dateTime1
1  280512544 2012-11-13 15:25:37.947-08            shipped 2012-11-13 15:25:37
2  280512544 2012-11-13 15:22:42.614-08        statusCheck 2012-11-13 15:22:42
3  280512544  2012-11-13 15:03:16.62-08        statusCheck 2012-11-13 15:03:16
4  280512544 2012-11-13 15:01:35.149-08        statusCheck 2012-11-13 15:01:35
5  280512544 2012-11-13 14:45:41.964-08      status-picked 2012-11-13 14:45:41
6  280512544 2012-11-13 14:44:57.664-08 warehouse_notified 2012-11-13 14:44:57
7  280512544 2012-11-13 14:44:57.644-08        statusCheck 2012-11-13 14:44:57
8  280512544 2012-11-13 13:05:15.725-08      recordCreated 2012-11-13 13:05:15
9  280510610 2012-11-13 09:22:36.427-08            shipped 2012-11-13 09:22:36
10 280510610 2012-11-13 09:20:07.202-08        statusCheck 2012-11-13 09:20:07
11 280510610 2012-11-13 09:14:56.182-08        statusCheck 2012-11-13 09:14:56 
```

我只想获取“已发货”事件之前发生的事件。我目前正在使用 ddply 来完成此操作，但这需要很长时间。

```
keepPreShip <- function(x){
shipTime <- fastPOSIXct(x[grep("shipped", x$event, ignore.case = T), "date_time_recorded"],tz = "UTC")
#shipTime <- fastPOSIXct(x[x$event =="shipped", "date_time_recorded"],tz = "UTC")
x <- x[x$dateTime1 < shipTime,]
}

system.time(eventsMain1 <- ddply(ss1, .(custId), keepPreShip )) 
```

有没有更快的方法来做到这一点？也许与`data.table`？

这是其中的一个`dput`数据：

```
> dput(ss1)
structure(list(custId = c(280512544L, 280512544L, 280512544L, 
280512544L, 280512544L, 280512544L, 280512544L, 280512544L, 280510610L, 
280510610L, 280510610L, 280510610L, 280510610L, 280510610L, 280510610L, 
280510610L, 280511123L, 280511123L, 280511123L, 280511123L), 
    date_time_recorded = c("2012-11-13 15:25:37.947-08", "2012-11-13 15:22:42.614-08", 
    "2012-11-13 15:03:16.62-08", "2012-11-13 15:01:35.149-08", 
    "2012-11-13 14:45:41.964-08", "2012-11-13 14:44:57.664-08", 
    "2012-11-13 14:44:57.644-08", "2012-11-13 13:05:15.725-08", 
    "2012-11-13 09:22:36.427-08", "2012-11-13 09:20:07.202-08", 
    "2012-11-13 09:14:56.182-08", "2012-11-13 09:11:40.438-08", 
    "2012-11-13 09:03:51.571-08", "2012-11-13 09:03:51.461-08", 
    "2012-11-13 09:03:49.174-08", "2012-11-13 06:42:10.208-08", 
    "2012-11-13 13:51:05.039-08", "2012-11-13 13:13:16.452-08", 
    "2012-11-13 12:42:08.917-08", "2012-11-13 12:28:51.541-08"
    ), event = c("shipped", "statusCheck", "statusCheck", "statusCheck", 
    "status-picked", "warehouse_notified", "statusCheck", "recordCreated", 
    "shipped", "statusCheck", "statusCheck", "statusCheck", "status-picked", 
    "warehouse_notified", "statusCheck", "recordCreated", "shipped", 
    "statusCheck", "statusCheck", "statusCheck"), dateTime1 = structure(c(1352820337.947, 
    1352820162.614, 1352818996.62, 1352818895.149, 1352817941.964, 
    1352817897.664, 1352817897.644, 1352811915.725, 1352798556.427, 
    1352798407.202, 1352798096.182, 1352797900.438, 1352797431.571, 
    1352797431.461, 1352797429.174, 1352788930.208, 1352814665.039, 
    1352812396.452, 1352810528.917, 1352809731.541), class = c("POSIXct", 
    "POSIXt"), tzone = "UTC")), .Names = c("custId", "date_time_recorded", 
"event", "dateTime1"), row.names = c(NA, 20L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T20:32:44.353

这行得通。我希望它更快。

```
require(data.table)
# convert this column to date format first
ss1$date_time_recorded <- as.POSIXct(ss1$date_time_recorded)
dt <- data.table(ss1, key="custId")
dt[, .SD[dateTime1 < date_time_recorded[event == "shipped"]], by=custId]

#       custId  date_time_recorded         event           dateTime1
# 1: 280510610 2012-11-13 06:42:10 recordCreated 2012-11-13 06:42:10
# 2: 280511123 2012-11-13 12:42:08   statusCheck 2012-11-13 12:42:08
# 3: 280511123 2012-11-13 12:28:51   statusCheck 2012-11-13 12:28:51
# 4: 280512544 2012-11-13 13:05:15 recordCreated 2012-11-13 13:05:15 
```

# sql - 如何创建一个执行良好并返回 10k 条记录的查询

> ID：14509984
> 
> 赞同：0
> 
> 时间：2013-01-24T20:18:59.310
> 
> 标签：sql, database, postgresql, postgresql-9.1

我有以下查询：

```
EXPLAIN ANALYZE SELECT "google_contacts".* 
FROM "google_contacts" 
WHERE "google_contacts"."user_id" = 1201 
```

这个查询最终花费了很多时间，结果如下：

```
Seq Scan on google_contacts  (cost=0.00..394.99 rows=9999 width=183)
    (actual time=0.008..2.038 rows=9999 loops=1)
      Filter: (user_id = 1201)
Total runtime: 2.552 ms 
```

该表只有 10 列，并且在 user_id 上有一个索引......关于为什么要花这么长时间运行有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:33:54.627

我在这里错过了什么吗？看起来查询需要大约 2.5 毫秒才能运行。我不会将其描述为“很多时间”。

有趣的是，查询优化器选择不在 user_id 上使用您的索引（因为解释提到进行 seq 扫描而不是索引扫描），但我的理解是它将选择它（优化器）认为会运行的任何方法最有效，而且您对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:18:56.580

如果查询返回的行太多，顺序扫描会比使用索引更有效。在这种情况下，您可以使用其他方法提高性能。另一方面，瓶颈可能是您的网络连接。

# css - 在字段集中居中和对齐元素

> ID：14509985
> 
> 赞同：1
> 
> 时间：2013-01-24T20:19:03.360
> 
> 标签：css, fieldset

我目前有一个字段集，它必须占用我容器的 96%。此字段集必须使他的元素居中但也对齐，例如，所有标签必须在同一位置结束，所有输入必须在同一位置开始。

[如果没有这段代码（ JSFiddle](http://jsfiddle.net/FhHQB/) ）的整个中心问题，这相当容易：

```
.formulaire
{
    margin: 1em auto;
    border-style: solid;
    border-width: 1px;
    border-color: #B0B0B0;
    padding: 1em;

}

.formulaire label
{
    float: left;
    width: 25%;
    text-align: right;
} 
```

我试图将我的字段集放在带有文本对齐中心的 div 中，但是它只是将所有内容居中而不对齐任何内容。

任何帮助将不胜感激

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:24:59.043

是的，您可以将表单字段包装在一个 div 中，将宽度设置为最长的标签/字段组合，然后将该 div 居中`margin:0 auto;`

[这是示例](http://jsfiddle.net/FhHQB/)

# python - Python 在字符串中查找前导零的技巧

> ID：14509986
> 
> 赞同：9
> 
> 时间：2013-01-24T20:19:05.790
> 
> 标签：python

我有一个二进制字符串说'01110000'，我想在不写forloop的情况下返回前面的前导零的数量。有谁知道如何做到这一点？如果字符串立即以 '1' 开头，最好也返回 0

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T20:21:28.863

如果你真的*确定*它是一个“二进制字符串”：

```
input = '01110000'
zeroes = input.index('1') 
```

更新：当只有“前导”零时它会中断

处理全零情况的另一种形式。

```
zeroes = (input+'1').index('1') 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-24T20:20:52.437

一个简单的单行：

```
x = '01110000'
leading_zeros = len(x.split('1', 1)[0]) 
```

这会将字符串划分为直到第一个 '1' 和之后的所有内容，然后计算前缀的长度。to 的第二个参数`split`只是一个优化，表示要执行的拆分次数，这意味着函数将在找到第一个“1”后停止，而不是在所有出现时拆分它。`x.split('1')[0]`如果性能无关紧要，您可以使用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-24T20:22:54.203

这是另一种方式：

```
In [36]: s = '01110000'

In [37]: len(s) - len(s.lstrip('0'))
Out[37]: 1 
```

它与其他解决方案的不同之处在于它实际上计算前导零而不是找到第一个`1`。这使它更加通用，尽管对于您的特定问题并不重要。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-12T10:04:32.387

我会使用：

```
s = '00001010'
sum(1 for _ in itertools.takewhile('0'.__eq__, s)) 
```

而是 Pythonic，适用于一般情况，例如在空字符串和非二进制字符串上，并且可以处理任何长度的字符串（甚至是迭代器）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-24T20:21:58.297

如果你知道它只有 0 或 1：

```
x.find(1) 
```

（如果全为零，将返回 -1；您可能想要也可能不想要这种行为）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-14T06:53:19.773

如果您不知道在这种情况下哪个数字会靠近零，即“1”，并且您只想检查是否有前导零，您可以转换为 int 并返回并比较两者。

```
"0012300" == str(int("0012300")) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-20T04:09:19.793

我正在使用`has_leading_zero = re.match(r'0\d+', str(data))`作为一种解决方案，它接受任何数字并将其视为`0`没有前导零的有效数字

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-25T08:30:44.060

`re`模块呢？

```
a = re.search('(?!0)', data) 
```

然后`a.start()`是位置。

# jquery - jQuery扩展和滑动框

> ID：14509989
> 
> 赞同：1
> 
> 时间：2013-01-24T20:19:25.740
> 
> 标签：jquery, user-experience

在动画行的扩展和行的滑动时遇​​到问题。

```
<div>       
    <div>
        <h2><a href="#laptops" class="exp">Laptops</a></h2>
        <p>Laptops...</p>
    </div>
    <div>
        <h2><a href="#tablets" class="exp">Tablets</a></h2>
        <p>Tablets...</p>

    </div>
    <!--the row below is the one that will expand and move left/right -->       
    <div id="row1" class="expand intro_para">
        <div id="laptops" class="expand block">
            PAGE FOR Laptops this includes a lot of info
        </div>

        <div id="tablets" class="expand block">
            Page for tablets  this also includes a lot of info
        </div>
    </div>
</div> 
```

好像：

![界面图片](../Images/ef5885e4d824358abc5d3dfe1dd4122b.png)

最初突出显示的行将关闭，然后在选择其中一个类别时打开。如果类别已经展开，它将关闭该行，如果选择了其他类别，它将滑动打开到新类别。**我想我已经完成了，但是当行滑过时它不会显示新类别。** 注意：突出显示的框是唯一会受到影响的东西。

可以将其想象为页面顶部的导航，但您必须单击而不是悬停，并且在菜单切换之间会有动画。

单击类别锚点时，它将运行此功能：

```
function show(cat) {
console.log("B4side_open"+side_open+"row_open"+row_open+"cat_open"+cat_open);
var tcat = _.where(equipment, {title: cat});
var s = tcat[0].side;
var r = tcat[0].row;
//no row open

if(row_open == "") {
//open row to specified cat
    console.log("open row "+r+" to specified cat "+cat);
    //make category visible (within invisible box)
    $("#"+cat).css({"display": "block"});
    //open the row
    $("#row"+r).slideDown();
    row_open = r;
    side_open = s;
    cat_open = cat;
}
else {
//slide the expando to new cat OR close the exando
    if(s == side_open) {
        //close the expando
        console.log("close the expando for row "+r);
        //close the row
        $("#row"+r).slideUp();
        //make the category invisible (within invisible box)
        //$("#"+cat).css({"display": "none"});
        row_open = "";
        side_open = "";
        cat_open = "";
    }
    else {
        //slide the expando
        if (s == "left") {
            //slide right
            console.log("slide right");
            $("#"+cat).css({"display": "block"});
            $("#row"+r).animate({"margin-left": "0px"}, 1000);
            //make other invisible
        }
        if (s == "right") {
            //slide left
            console.log("slide left");
            console.log(cat+r)
            $("#"+cat).css({"display": "block"});

            //console.log($("#"+cat).css({"display": "block"}));
            $("#row"+r).animate({"margin-left": "-940px"}, 1000);
        }
        //make the category invisible (within invisible box)
        //$("#"+cat).css({"display": "none"});
        side_open = s;
        cat_open = cat;
    }
}
} 
```

更新:: 我一直在努力，我认为它做得对，但最初的打开和滑动，它会跳开而不是动画：/

[http://mulibraries.missouri.edu/reference/equipment/equipment.php](http://mulibraries.missouri.edu/reference/equipment/equipment.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:45:35.397

你需要得到

```
if (s == "left") {}
if (s == "right") {} 
```

里面

```
if(row_open == "") {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:41:55.400

通过扩大选择器并进行一些其他更改，您应该能够消除绝大多数代码。看看这个：

```
$("a.exp").click(function () {
  var foo = $(this.hash);     

  var leftColumn = $(".expand .block").index(foo) % 2 == 0;
  var animateOut =  { "margin-left": "-924px" };
  var animateIn =  { "margin-left": "0px" }; 
  $(".expand .block").slideUp(400, function() { $(this).animate(animateOut);});
  foo.slideDown(400, function() { foo.animate(animateIn);});
  return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:35:08.453

修复了它，这是一个 CSS 问题，该行应该是 display:none 并且内部类别应该是 display:block

# jquery - 使用 JQuery 在表单上隐藏图像

> ID：14509990
> 
> 赞同：0
> 
> 时间：2013-01-24T20:19:29.637
> 
> 标签：jquery, jquery-ui

我有图片可以选择日期。我想在表单加载时隐藏它们。

```
<div id="readOnly">
<table>
<td>
<input id="date" class="date hasDatepicker" type="text" name="date" maxlength="10"      size="10" readonly="">
<img class="ui-datepicker-trigger" src="images/calendar.gif" alt="..." title="...">
</td>
</table>
</div> 
```

我的javascript在firebug“控制台”中工作以进行测试；但在表单加载时，它并没有隐藏 img（日期选择器）。

```
$('div[id^="readOnly"]').find("img").hide(); 
```

试过了

```
var v= $('div[id^="readOnly"]').find("img");
$(v).hide(); 
```

它不适用于表单加载；但此脚本适用于“Firebug 'console' Run

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:40:00.257

```
$(document).ready(function(){
    $( '#readOnly' ).find('img').each(function(){    
       $(this).css('display','none'); 
    });
}); 
```

这是一个有效的 JSFiddle

[http://jsfiddle.net/QR2wE/5/](http://jsfiddle.net/QR2wE/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:57:05.787

我会看看这个问题 [Call function after document and image load](https://stackoverflow.com/questions/7381603/how-to-call-function-after-document-ready-and-image-load)

使用 jQuery 的文档就绪功能并不能保证图像在页面中呈现。

```
$('div[id^="readOnly"]').find("img").load(function(){
   //hide your image
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:22:52.340

确保在文档准备好后运行它：

```
 $(document).ready(function(){

            $('div[id^="readOnly"]').find("img").hide(); 

            //or just:
             $("img","#readOnly").hide();

}); 
```

该`ready`函数确保脚本在 DOM 准备好并加载后运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:41:49.327

应该是你所需要的：

```
$("#readOnly img").hide(); 
```

[jsFiddle](http://jsfiddle.net/nnyWL/)

# java - JPA 无法更新日期

> ID：14509991
> 
> 赞同：0
> 
> 时间：2013-01-24T20:19:32.890
> 
> 标签：java, database, jakarta-ee, jpa

在我的 JavaEE 应用程序中，我使用 JPA 来存储我的数据。但是我在更新存储在数据库中的日期时遇到了问题。当我想在我的应用程序中更改它时（以及当我合并时），所有字段都在更新，除了日期的字段... $ 你能帮帮我吗？

这是我的实体：

```
package persistence
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
@Entity
public class Event implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@Column(name = "NAME")
private String name;
@Column(name = "PLACE")
private String place;
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "BEGINDATE")
private Date beginDate;
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "ENDDATE")
private Date endDate;
@Column(name = "VISIBILITY")
private int visibility;
@Column(name = "DESCRIPTION")
private String description;

@OneToMany(mappedBy="relatedEvent")
private List<CustomizeEvent> customizedEvents;

@OneToOne(cascade = CascadeType.PERSIST,optional=false)
private Periodicity periodicity;

@ManyToOne(optional=false)
private UserAgenda eventOwner;

@ManyToMany
@JoinTable(name="EVENTS_BELONG_AGENDAS",joinColumns= @JoinColumn(name="EVENT_ID",referencedColumnName="ID"),inverseJoinColumns=@JoinColumn(name="AGENDA_ID",referencedColumnName="ID"))
private List<Agenda> belongToAgendas;

@ManyToMany
@JoinTable(name="EVENTS_GUESTS_AGENDAS",joinColumns= @JoinColumn(name="EVENT_ID",referencedColumnName="ID"),inverseJoinColumns=@JoinColumn(name="AGENDA_ID",referencedColumnName="ID"))    
private List<Agenda> guestToAgendas;

public Event() {
}

public Event(String name, String place, Date beginDate, Date endDate, int visibility, String description, Periodicity periodicity, UserAgenda eventOwner, Agenda agenda) {
    this.name = name;
    this.place = place;
    this.beginDate = beginDate;
    this.endDate = endDate;
    this.visibility = visibility;
    this.description = description;
    this.periodicity = periodicity;
    this.eventOwner = eventOwner;
    this.belongToAgendas = new ArrayList<Agenda>();
    this.belongToAgendas.add(agenda);
    this.customizedEvents = new ArrayList<CustomizeEvent>();
    this.guestToAgendas = new ArrayList<Agenda>();
}

public Event(String name, String place, Date beginDate, Date endDate, int visibility, String description, Periodicity periodicity, UserAgenda eventOwner, Agenda agenda,List<Agenda> guests) {
    this.name = name;
    this.place = place;
    this.beginDate = beginDate;
    this.endDate = endDate;
    this.visibility = visibility;
    this.description = description;
    this.periodicity = periodicity;
    this.eventOwner = eventOwner;
    this.belongToAgendas = new ArrayList<Agenda>();
    this.belongToAgendas.add(agenda);
    this.customizedEvents = new ArrayList<CustomizeEvent>();
    this.guestToAgendas = guests;
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getPlace() {
    return place;
}

public void setPlace(String place) {
    this.place = place;
}

public Date getBeginDate() {
    return beginDate;
}

public void setBeginDate(Date beginDate) {
    this.beginDate = beginDate;
}

public Date getEndDate() {
    return endDate;
}

public void setEndDate(Date endDate) {
    this.endDate = endDate;
}

public int getVisibility() {
    return visibility;
}

public void setVisibility(int visibility) {
    this.visibility = visibility;
}

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

public List<CustomizeEvent> getCustomizedEvents() {
    return customizedEvents;
}

public void setCustomizedEvents(List<CustomizeEvent> customizedEvents) {
    this.customizedEvents = customizedEvents;
}

public Periodicity getPeriodicity() {
    return periodicity;
}

public void setPeriodicity(Periodicity periodicity) {
    this.periodicity = periodicity;
}

public UserAgenda getEventOwner() {
    return eventOwner;
}

public void setEventOwner(UserAgenda eventOwner) {
    this.eventOwner = eventOwner;
}

public List<Agenda> getBelongToAgendas() {
    return belongToAgendas;
}

public void setBelongToAgendas(List<Agenda> belongToAgendas) {
    this.belongToAgendas = belongToAgendas;
}

public List<Agenda> getGuestToAgendas() {
    return guestToAgendas;
}

public void setGuestToAgendas(List<Agenda> guestToAgendas) {
    this.guestToAgendas = guestToAgendas;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (id != null ? id.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof Event)) {
        return false;
    }
    Event other = (Event) object;
    if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "persistence.Event[ id=" + id + " ]";
}

} 
```

这是我在托管 bean 中调用的函数：

```
public void setNewEndDate(Event event, Date endDate) {
    Event e = em.find(Event.class, event.getId());
    e.setEndDate(endDate);
    e.setDescription("New description");
    em.persist(e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-03T04:28:45.627

`updatable=false`如果您在尝试更新的列上有问题，则问题是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:04:37.783

首先，如果有一些关于事务管理的信息会很好，因为它对于 JPA 的行为方式非常重要。

这是我认为会发生的事情：

您已经从 EntityManager 加载了 Event-object，它可能已与会话分离，因为在执行 EntityManager#find 时不会出现错误（在 EntityManager 中不能有 2 个具有相同 id 的对象一次，你会得到一个异常..）那么，你改变刚刚加载的附加对象的状态，并将它注册到 EntityManager 中（我不认为持久化的调用是正确的，甚至在这里没有必要..) 但是，您的分离对象（作为参数发送的对象）仍然存在，并且尚未使用新值更新。因此，如果此对象在稍后被重新附加并保存（它可能由您显式执行，或者它可能在事务完成时自动发生），您最终将覆盖相关方法中设置的值。

您在此处提供的方法可能（并且应该）如下所示，如果有的话：

```
@Transactional
public void setNewDate(final Integer eventId, final Date endDate() {
    final Event e = em.find(Event.class, eventId);
    e.setEndDate(endDate);
    //no need to explicitly save here, the changes will be saved when the transcation ends,
    //and the transaction will only last this method, as indicated by the @Transactional annotation.
} 
```

但是，这仍然不是使用 JPA 的正确方法，通常你有一个存储库层，它处理基本的 CRUD 操作（查找、保存等），而在它之上的一层是逻辑层，它处理实际的更改对象中的值。

顺便说一句，您的 equals 和 hashcode 方法违反了这些方法的约定，因为 id 并不总是设置（新创建的尚未持久化的事件对象将没有 id），并且两个不同的新创建的事件对象没有' 还没有被存储，因此没有 id（除非你自己设置了 id，你真的不应该这样做），将被 equals 方法认为是相同的。

# html - 将填充设置为 0 后，HTML 文本元素的填充在浏览器之间不一致

> ID：14509993
> 
> 赞同：0
> 
> 时间：2013-01-24T20:19:38.960
> 
> 标签：html, css, text, fonts, padding

我给元素一个边框，这样你就可以看到不一致的填充。我唯一添加的是 3 个元素中的每个元素的 padding-left。我正在尝试在不同浏览器之间以均匀的间距垂直排列标题。想不通。

这是它在 Chrome 中的外观：http: [//postimage.org/image/ly5gzp0k5/](http://postimage.org/image/ly5gzp0k5/)

这是它在 IE 中的外观：http: [//postimage.org/image/qa34t76al/](http://postimage.org/image/qa34t76al/)

所有填充顶部和底部设置为零。事实上，所有的 css 都被重置为我的知识，经过数小时的尝试，我决定在 Stack Overflow 上发帖，希望有人能提供任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:25:34.377

您可以使用`line-height`垂直定位文本。[这](http://jsfiddle.net/4c35L/)是一些如何使用它的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:29:14.647

由于盒子模型不同，浏览器中的填充处理方式也不同。您可以使用 css 属性“box-sizing”来设置使用一个盒子模型而不是另一个盒子模型。

我建议定义在你的 css 中使用哪个盒子模型：

[http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

# python - 从文本文件在python中创建字典

> ID：14509996
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:20:04.153
> 
> 标签：python, dictionary

我有一个看起来像这样的文本文件：

```
01:Pronoun
02:I
03:We
04:Self
05:You
06:Other
07:Negate
08:Assent
09:Article
10:Preps
11:Number
12:Affect
... 
```

现在我想制作一本这样的字典。一个看起来像这样的字典：

```
{'01:': ['pronoun'], '02': ['I'],...} 
```

这是我到目前为止的代码，但它似乎不像我想要的那样工作......

```
with open ('LIWC_categories.text','rU') as document1:
    categoriesLIWC = {}
    for line in document1:
        line = line.split()
        if not line:
            continue
        categoriesLIWC[line[0]] = line[1:] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:22:39.687

如果您不希望包含冒号，则可以在冒号上拆分以获取键和值

`key, value = line.split(':')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:25:48.340

我认为你有一个更大的问题。你想做什么，为什么选择这种方法？

一些评论：

*   键是序号的字典与列表没有太大区别。为什么不使用列表？

*   数字 01 和 1 是同一个数字。如果您的键是数字，则您无法区分这两者。

*   您无法轻松地将键是数字的字典与键是数字的字符串表示形式的字典进行比较。

这将创建一个字典，其中键为整数，值为字符串：

```
with open ('LIWC_categories.text','rU') as document1:
    categoriesLIWC = {}
    for line in document1:
        line = line.strip()
        if not line:
            continue
        key, value = line.split(':')
        if key.isdigit():
            categoriesLIWC[int(key)] = value
        else:
            categoriesLIWC[key] = value 
```

如果它不起作用，则需要更具体。什么不工作？你期待什么，你得到什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:27:15.100

您需要将分隔符字符串传递给 split()。在这种情况下，它将是“：”。

string.split() 将自动拆分空格，但您的行上没有空格。如果您想要 : 在键中，您可以随时将其与

```
categoriesLIWC[line[0] + ":"] = line[1] 
```

还

```
line[1:] 
```

应该

```
line[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:28:26.820

```
In [27]: dic={}

In [28]: with open("abc.txt") as f:
    for line in f:
        if line.strip():                 #if line is not empty
            k,v=line.split(":")          #split at ":" not at whitespaces
            dic[k]=[v.strip()]           #add to dict
   ....:             

In [29]: dic
Out[29]: 
{'01': ['Pronoun'],
 '02': ['I'],
 '03': ['We'],
 '04': ['Self'],
 '05': ['You'],
 '06': ['Other'],
 '07': ['Negate'],
 '08': ['Assent'],
 '09': ['Article'],
 '10': ['Preps'],
 '11': ['Number'],
 '12': ['Affect']} 
```