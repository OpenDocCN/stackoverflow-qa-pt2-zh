# StackOverflow 问答 15708000-15708999

# php - 获取一个文本框的值并通过单击带有 ajax 的按钮打印到 div 名称“输出”

> ID：15708001
> 
> 赞同：0
> 
> 时间：2013-03-29T17:09:09.460
> 
> 标签：php, javascript, html, ajax

```
<script type="text/javascript">
document.getElementById('s1').onclick=function()
{
var value1 = document.getElementById('input').value;
var aj;
if(window.ActiveXObject)
{
    aj=new ActiveXObject("Microsoft.XMLHTTP");
}
if(window.XMLHttpRequest)
{
    aj=new XMLHttpRequest();
}
aj.onreadystatechange=function()
{
    if(aj.readyState==4 && aj.status==200)
    {

        document.getElementById("output").innerHTML=aj.responseText;
    }
}
aj.open("GET","tstprinajax.php?name="+value1,true);
aj.send();
}
</script> 
```

这对我不起作用。我想获取一个文本框的值并通过单击带有 AJAX 的按钮打印到 div 名称“输出”。

HTML 代码：

```
<body>
<form action="">
<input type="text" id="input" />
<button id="s1"></button>
<div id="output"></div>
</form>
</body> 
```

tstprinajax.php：

```
<?php
$q = $_GET["name"];
print "<font size='+6' color='#FF0000'>$q</font>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:12:36.520

我怀疑您的问题是页面正在刷新，因为[元素的](http://www.w3.org/TR/html5/forms.html#attr-button-type)[默认`type`值为`button``submit`](http://www.w3.org/TR/html5/forms.html#attr-button-type)，因此正在提交包含按钮的表单（到同一页面）。`button`将您的元素更改为：

```
<button id="s1" type="button"></button> 
```

如果我对服务器响应进行硬编码（因为 JSBin 不允许我实际进行服务器端处理，而且很公平），那么进行该更改会使您的代码正常工作：

[实例](http://jsbin.com/ewoqoh/1)| [资源](http://jsbin.com/ewoqoh/1/edit)

相反，*如果没有*，`type="button"`您将获得页面刷新：[Live Example](http://jsbin.com/ewoqoh/2)

# java - 将新元素添加到集合而不是转换它们？

> ID：15708003
> 
> 赞同：0
> 
> 时间：2013-03-29T17:09:17.817
> 
> 标签：java, collections, guava

使用 Guava，是否可以将新项目添加到 Collection 而不是仅转换 Collection？

想象一下，例如我有

```
Set<Integer> numbers = Sets.newHashSet(1,2,3); 
```

现在，除了已经存在的数字之外，还应包括每个数字的双倍和三倍，因此 2、4、6 和 3、6、9。

番石榴中是否有类似的东西

```
addToSet(numbers, <a function returning a List of values for each element in numbers>) 
```

?

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:12:54.507

为什么像[Set.addAll(Collection c)](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#addAll%28java.util.Collection%29)这样的东西还不够？

```
Set<Integer> numbers = Sets.newHashSet(1,2,3);
numbers.addAll(setReturningFunction()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:59:05.047

装饰 Set（可以使用 ForwardingSet），然后重写 add 方法以将其他项目添加到支持委托中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T19:23:20.890

[`transformAndConcat`](http://docs.guava-libraries.googlecode.com/git-history/v14.0.1/javadoc/com/google/common/collect/FluentIterable.html)完成这项工作，允许返回多个元素，尽管只有一个元素被传递给转换函数。

# java - 命令输出解析

> ID：15708005
> 
> 赞同：1
> 
> 时间：2013-03-29T17:09:19.833
> 
> 标签：java, python, text-parsing

OS X 命令`system_profiler SPAudioDataType`给出的输出如附录 1 所示

这对我来说看起来很难解析。

例如：

*   得到`Connection`的`Speaker`

`grep`for`^\s+Connection: (.*)$`没有帮助：捕获组`\1`将具有该`Connection`值，但也会为*未*嵌套在`Speaker`.

有趣的是，使用`sed`. 例如，等待查看音频行，然后是扬声器行，...，然后是正则表达式以获取以下文本`:`。

我可以`grep` `MULTILINE`对整个文本进行第一次匹配`Speaker`，然后`Connection`跳过换行符/空格。

是否有一个库可以从不同缩进的文本行构建嵌套节点的对象模型？

有没有办法查询类似于 CSS 选择器的对象模型？例如`Audio > Speaker > Connection > Value`

我喜欢 YAML 考虑空格的方式，但这不会被解析为 YAML。

Java 或 Python 中的库非常适合学习。

我正在自己编码一些东西，然后我决定问：

* * *

```
 def main():
     c = 0
     with open(sys.argv[1]) as f:
         for l in (l.rstrip() for l in f):
             m = l.lstrip()
             if not m:
                 continue
             i = len(l) - len(m)
             if i < c:
               pass # Towards parent
             elif i > c:
               pass # A child
             else:
               pass # A sibling
             c = i 
```

* * *

我怀疑我需要假设第一个节点将处于缩进`0`并记住所有*看到*的缩进级别，以便能够将与前一个级别相比缩进*减少*的节点重新附加到其父级或作为更高级别嵌套的兄弟级。

### 附录1

* * *

```
Audio:

    Intel High Definition Audio:

      Audio ID: 29

        Headphone:

          Connection: Combination Output

        Speaker:

          Connection: Internal

        Line Input:

          Connection: Combination Input

        Internal Microphone:

          Connection: Internal

        S/PDIF Optical Digital Audio Input:

          Connection: Combination Input

        S/PDIF Optical Digital Audio Output:

          Connection: Combination Output

        External Microphone / iPhone Headset:

          Connection: Combination Output

        HDMI / DisplayPort Output:

          Connection: Display

    Devices:

        Built-in Microphone:

          Default Input Device: Yes
          Input Channels: 2
          Manufacturer: Apple Inc.
          Current SampleRate: 44100
          Transport: Built-in

        Built-in Input:

          Input Channels: 2
          Manufacturer: Apple Inc.
          Current SampleRate: 44100
          Transport: Built-in

        Built-in Output:

          Default Output Device: Yes
          Default System Output Device: Yes
          Manufacturer: Apple Inc.
          Output Channels: 2
          Current SampleRate: 44100
          Transport: Built-in 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:14:10.487

这仍然是一个“OSX 管理员”问题。使用[`-xml`标志](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/system_profiler.8.html)：

```
system_profiler -xml SPAudioDataType 
```

它输出一个准备解析的 pList 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:52:23.617

我对此进行了编码以进行解析：

```
import sys
import asciitree
class Node(object):
    def __init__(self, name, indent, parent):
        self.name = name
        self.indent = indent
        self.parent = parent
        self.children = []
    def add(self, child):
        self.children.append(child)
    def __str__(self):
        return self.name
def main():
    current_indent = -1
    root_node = Node('Root', current_indent, None)
    current_node = root_node
    with open(sys.argv[1]) as file_to_parse:
        for scanned_line in (l.rstrip() for l in file_to_parse):
            line_content = scanned_line.lstrip()
            if not line_content:
                continue
            indent = len(scanned_line) - len(line_content)
            while True:
              if indent > current_node.indent:
                  parent = current_node
                  break
              elif indent == current_node.indent:
                  parent = current_node.parent
                  break
              else:
                  current_node = current_node.parent
            child = Node(line_content, indent, parent)
            parent.add(child)
            current_node = child
    print(asciitree.draw_tree(root_node))

if __name__ == '__main__':
    main() 
```

产生这个对象模型：

```
Root
  +--Audio:
     +--Intel High Definition Audio:
     |  +--Audio ID: 29
     |     +--Headphone:
     |     |  +--Connection: Combination Output
     |     +--Speaker:
     |     |  +--Connection: Internal
     |     +--Line Input:
     |     |  +--Connection: Combination Input
     |     +--Internal Microphone:
     |     |  +--Connection: Internal
     |     +--S/PDIF Optical Digital Audio Input:
     |     |  +--Connection: Combination Input
     |     +--S/PDIF Optical Digital Audio Output:
     |     |  +--Connection: Combination Output
     |     +--External Microphone / iPhone Headset:
     |     |  +--Connection: Combination Output
     |     +--HDMI / DisplayPort Output:
     |        +--Connection: Display
     +--Devices:
        +--Built-in Microphone:
        |  +--Default Input Device: Yes
        |  +--Input Channels: 2
        |  +--Manufacturer: Apple Inc.
        |  +--Current SampleRate: 44100
        |  +--Transport: Built-in
        +--Built-in Input:
        |  +--Input Channels: 2
        |  +--Manufacturer: Apple Inc.
        |  +--Current SampleRate: 44100
        |  +--Transport: Built-in
        +--Built-in Output:
        |  +--Default Output Device: Yes
        |  +--Default System Output Device: Yes
        |  +--Manufacturer: Apple Inc.
        |  +--Output Channels: 2
        |  +--Current SampleRate: 44100
        |  +--Transport: Built-in
        +--After Effects 11.0:
        |  +--Manufacturer: Apple, Inc.
        |  +--Current SampleRate: 0
        |  +--Transport: Unknown
        +--Prelude 1.0:
        |  +--Manufacturer: Apple, Inc.
        |  +--Current SampleRate: 0
        |  +--Transport: Unknown
        +--Premiere Pro 6.0:
           +--Manufacturer: Apple, Inc.
           +--Current SampleRate: 0
           +--Transport: Unknown 
```

我现在需要实现像 CSS 选择器这样的搜索功能..

你怎么看？不正确？

# jquery - .click 函数有什么用而不是 toggleEvent ？

> ID：15708006
> 
> 赞同：1
> 
> 时间：2013-03-29T17:09:21.577
> 
> 标签：jquery

从 jQuery 1.9 开始，**toggleEvent**不再存在，所以我试图做类似的事情：当有人点击时`.trigger`，`div#map`变大，当再次点击时，`div#map`变小。

```
$(".trigger").click(function(){ 
  $("#map").animate({height: '400px'}, 550, function() { $(".trigger").text("see small");
  });
}, function(){
  $("#map").animate({height: '205px'}, 250, function() { $(".trigger").text("see big");
  });
}); 
```

如果我在 1.8.3 中使用“切换”它工作正常，但我想在 1.9.1 中运行但我不知道如何。

在 1.8.3 中运行的代码示例：http: [//jsfiddle.net/EZ9My/](http://jsfiddle.net/EZ9My/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:24:53.640

```
var isSmall = false;
var trigger = $(".trigger").click(function(){
    if (isSmall)
        $("#map").animate({height: '400px'}, 550, function() { trigger.text("see small"); });
    else
        $("#map").animate({height: '205px'}, 250, function() { trigger.text("see big"); });

    isSmall = !isSmall;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:28:32.150

试试这个：

```
 $(".trigger").click(function(){
     if($("#map").css('height') == '400px'){
       $("#map").stop().animate({height:'205px'},550);
       $(this).text("see big");
     };
     if($("#map").css('height') == '205px'){
        $("#map").stop().animate({height:'400px'},250);
         $(this).text("see small");
     };
 }); 
```

**jsFiddle**：http: [//jsfiddle.net/EZ9My/1/](http://jsfiddle.net/EZ9My/1/)

# android - AsyncTask 状态为空

> ID：15708009
> 
> 赞同：0
> 
> 时间：2013-03-29T17:09:25.480
> 
> 标签：android, android-asynctask, nullpointerexception, status

在我正在使用的 android 应用程序中`AsyncTask`。它运行良好，但从过去 2 天开始，当我调用 .execute() of 时，我的应用程序崩溃了`AsyncTask`。错误是：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
    at android.os.AsyncTask.execute(AsyncTask.java:378)
    at com.riksof.a320.remote.RemoteObject.update(RemoteObject.java:117)
    at com.fitmo.controller.activity.FitmoEditActivityDetailController.updateActivityDate(FitmoEditActivityDetailController.java:64)
    at com.fitmo.controller.activity.FitmoEditActivityDetailController.access$0(FitmoEditActivityDetailController.java:51)
    at com.fitmo.controller.activity.FitmoEditActivityDetailController$1.onClick(FitmoEditActivityDetailController.java:45)
    at android.view.View.performClick(View.java:2532)
    at android.view.View$PerformClick.run(View.java:9293)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:143)
    at android.app.ActivityThread.main(ActivityThread.java:4263)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method) 
```

当我看到里面的代码时，我在构造函数`AsyncTask.java`中找到了这段代码：`AsyncTask`

```
switch (mStatus) 
```

所以我在调用之前通过调用方法来调试`AsyncTask`状态，这里的值也是空的。任何想法的原因是什么？`getStatus()``AsyncTask``execute()`

我不是每次都得到这个。有时它可以正常工作，有时却不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:19:33.897

您是否意外删除了 AsyncTask myTask = new AsyncTask() ？

# http - HTTP 的源端口是如何确定的？NAT中是否有冲突？

> ID：15708011
> 
> 赞同：22
> 
> 时间：2013-03-29T17:09:37.647
> 
> 标签：http, protocols, router, nat

我知道，当一个 HTTP 请求发出时，数据包从客户端上看似随机的高编号端口（例如 4575）发送到服务器上的端口 80。然后服务器将回复发送到相同的高编号端口，路由器知道将其路由到客户端计算机，一切都完成了。

我的问题是：**返回端口（本例中为 4575）是如何确定的？**是随机的吗？如果有，在什么范围内？有什么限制吗？例如，如果 LAN 中的两台计算机向同一个网站发送具有相同源端口的 HTTP 请求，会发生什么情况？路由器如何知道将哪一台路由到哪台计算机？又或者这种情况非常罕见，以至于没有人愿意为之辩护？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-29T18:01:04.220

NAT 将通过它自己的内部方式来决定/确定NAT 连接/会话的*出站*端口。这意味着，它将根据 NAT 的实现而有所不同。这意味着任何返回的响应都将返回到同一个出站端口。

至于你的问题：

> 例如，如果 LAN 中的两台计算机向同一个网站发送具有相同源端口的 HTTP 请求，会发生什么情况？

它将为*每个*. *_* 因此，它可以在收到的响应中区分这两者。NAT 将创建/维护已转换端口的*映射*，为新会话创建新的出站端口号。因此，即使有两个不同的“内部”会话，来自两台不同的机器，在*同一个*端口号上，它也会映射到*传出*端的两个不同的端口号。因此，当数据包从各个端口返回时，它会知道如何将它们转换回内部 LAN 上的正确地址/端口。

 ***图表：

![在此处输入图像描述](../Images/28ec317cfdde78afeaec5999aa49488c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-28T21:32:59.570

It depends on the NAT and on the protocol. For instance I'm writing this message behind a full cone NAT and this particular NAT is configured (potentially hard-wired) to always map an UDP private transport address UDP X:x to the public transport address UDP Y:x. It's quite easy to shed some light on this case with with a STUN server (google has some free stun servers), a cheap NAT, 2 laptops, wire shark and a really really light STUN client which uses a hard coded port like 777\. Only the first call will get through and it will be mapped on the original port, the second one will be blocked. NAT's are a hack, some of them are so bad that they actually override on return the public transport address not only in the header but even in the transported data which is kinda crazy. ICE protocols has to xor the public address to bypass this issue.***

# highcharts - highcharts/highstock 的非零填充中心点？

> ID：15708016
> 
> 赞同：0
> 
> 时间：2013-03-29T17:09:54.380
> 
> 标签：highcharts, gwt-highcharts

我已经使用以下搜索词的各种组合搜索了这个问题的答案，但没有结果可言：highcharts、highstock、area、centerpoint、zero、center。

我只是想知道，在配置面积图时，是否可以更改绘图填充的中心点。默认情况下，图表从零填充到数据线，但在某些情况下，用户可能希望查看他们的绘图如何围绕非零基线变化。

有没有办法在 highcharts/highstock API 中实现这一点？

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:22:10.713

如果我理解正确，您只是在谈论 y 轴最小值：

[http://api.highcharts.com/highcharts#yAxis.min](http://api.highcharts.com/highcharts#yAxis.min)

如果这不能满足您的要求，那么阈值可能会：

[http://api.highcharts.com/highcharts#plotOptions.area.threshold](http://api.highcharts.com/highcharts#plotOptions.area.threshold)

# symfony - How are labels on ArrayCollections in forms rendered?

> ID：15708017
> 
> 赞同：2
> 
> 时间：2013-03-29T17:09:58.840
> 
> 标签：symfony

I have a `Customer` object, which has many `Emails`.

I'm building a form for my customer, and I've added his emails as a collection. In my template, I render the emails portion like this:

```
<h4>Emails</h4>
{% for email in form.emails %}
  <li>
    {{ form_row(email.addr) }}
    {{ form_row(email.isPrimary) }}
  </li>
{% endfor %}
...
{{ form_rest(form) }} 
```

This works fine, except if the customer has no emails. Then, `form_rest()` renders the label 'emails' at the bottom of my template.

Why does this only get rendered when `form.emails` is empty? How can I customize it? (Note I've already customized my label rendering for other form elements, and I don't want it to be the same for these 'collection labels'.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:17:25.870

I usually solved this problem this way:

```
{% for email in form.emails %}
    {# ... #}
{% else %}
    {{ form_widget(form.emails) }}
{% endfor %} 
```

Unless someone suggests a better way of doing this.

# mysql - MySQL 过程在没有更新任何内容时返回 1 个受影响的行

> ID：15708020
> 
> 赞同：0
> 
> 时间：2013-03-29T17:10:04.670
> 
> 标签：mysql, stored-procedures, rows-affected

我的`mysql`数据库中有以下存储过程：

```
BEGIN 
DECLARE useCount, remainingUses INT DEFAULT 0;

/* Get the current values for the quiz into the variables */
SELECT remaining_uses, use_count INTO remainingUses, useCount FROM quiz_passwords WHERE password_id  = passwordId;

/* Are there remaining uses to consume? */
if (remainingUses > 0) THEN

    UPDATE quiz_passwords SET use_count = (useCount + 1), remaining_uses = (remainingUses - 1) where password_id = passwordId;

END IF;

END 
```

`remainingUses`如您所见，仅当初始`select`语句中的变量大于“0”时才应执行更新语句。

但是，当我调用该过程时`CALL UsePassword(197);`，它会返回`Affected rows: 1`.

我不明白，当我`id = 197`在数据库中的密码行的值为“remaining_uses = 0”时。

有没有理由为什么 if 会显示`Affected rows: 1`在结果中？

如果该语句成功执行，它是否会返回 1 个受影响的行？因为从技术上讲，在这个例子中我的 UPDATE 语句没有被执行。

**更新**不仅没有更新，而且如果我完全删除更新语句，它仍然告诉我有一个受影响的行！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T08:20:44.823

最后，我通过在我的存储过程中声明一个 OUT 变量然后通过在`SELECT`语句之后设置它的值来返回值来解决问题。

```
/* Return the affected rows */
SET affected_rows = ROW_COUNT(); 
```

# python - Python 线程/进程和类变量

> ID：15708026
> 
> 赞同：-1
> 
> 时间：2013-03-29T17:10:29.987
> 
> 标签：python, variables, parallel-processing

这个问题可能真的很愚蠢，但我从今天早上开始就在研究这段代码，现在即使是愚蠢的事情也很难：\

我有这段代码，我通过创建 8 个进程来调用它并运行它们。然后还有另一个线程必须打印有关这 8 个进程的信息。（代码如下）。

```
import MSCHAPV2
import threading
import binascii
import multiprocessing

class CrackerThread(multiprocessing.Process):

    password_header = "s."
    current_pin = ""
    username = ""
    server_challenge = ""
    peer_challenge = ""
    nt_response = ""
    starting_pin = 0
    limit = 0
    testing_pin = 0
    event = None

    def __init__(self, username, server_challenge, peer_challenge, nt_response, starting_pin, limit, event):
        #threading.Thread.__init__(self)
        super(CrackerThread, self).__init__()
        self.username = username
        self.server_challenge = server_challenge
        self.peer_challenge = peer_challenge
        self.nt_response = nt_response
        self.starting_pin = starting_pin
        self.limit = limit
        self.event = event
        self.testing_pin = starting_pin        
        #self.setDaemon(True)

    def run(self):        
        mschap = MSCHAPV2.MSCHAPV2()
        pin_range = self.starting_pin+self.limit
        while self.testing_pin <= pin_range and not self.event.isSet():
            self.current_pin = "%s%08d" % (self.password_header, self.testing_pin)                      
            if(mschap.CheckPassword(self.server_challenge, self.peer_challenge, self.username, self.current_pin.encode("utf-16-le"), self.nt_response)):
                self.event.set()
                print "Found valid password!"
                print "user     =", self.username
                print "password =", self.current_pin                
            self.testing_pin+=1            
        print "Thread for range (%d, %d) ended with no success." % (self.starting_pin, pin_range)

    def getCurrentPin(self):        
        return self.testing_pin 
```

* * *

```
def printCrackingState(threads):
    info_string = '''
    ++++++++++++++++++++++++++++++++++
    + Starting password = s.%08d +
    +--------------------------------+    
    + Current pin       = s.%08d +
    ++++++++++++++++++++++++++++++++++
    + Missing pins      =   %08d +
    ++++++++++++++++++++++++++++++++++
                  '''

    while 1:        
        for t in threads:            
            printed_string = info_string % (t.starting_pin, t.getCurrentPin(), t.getMissingPinsCount())
            sys.stdout.write(printed_string)
        sys.stdout.write("--------------------------------------------------------------------")
        time.sleep(30) 
```

`printCrackingState`在我的“主要”中由这些行调用：

```
infoThread = threading.Thread(target = utils.printCrackingState, args=([processes]))  
#infoThread = cursesTest.CursesPrinter(threads, processes, event)    
infoThread.setDaemon(True)
infoThread.start() 
```

现在的问题是：为什么要打印相同的值`t.starting_pin`？`t.getCurrentPin()`这就像`t.getCurrentPin()`返回`__init__()`方法中设置的值并且不知道我正在增加它！

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:22:32.717

您的问题是您试图在一个进程中更新变量，并在另一个进程中读取它。你不能那样做。与多线程相反，多处理的全部意义在于默认情况下不共享变量。

阅读文档，尤其是[在进程之间交换对象和在进程之间](http://docs.python.org/2/library/multiprocessing.html#exchanging-objects-between-processes)共享[状态](http://docs.python.org/2/library/multiprocessing.html#sharing-state-between-processes)，它将解释解决此问题的各种方法。但实际上，有两个：要么您需要某种通道/API 让父进程向子进程询问其当前状态，要么您需要某种共享内存来存储数据。您可能需要一个锁来保护通道/共享内存。

虽然共享内存在这里看起来像是“显而易见”的答案，但您可能需要对以下时间进行计时：

```
val = 0
for i in range(10000):
    val += 1

val = Value('i', 0)
lock = Lock()
for i in range(10000):
    with lock:
        val.value += 1 
```

值得注意的是，您的代码在线程中也可能不正确——尽管在 CPython 中它可能会工作。如果您不进行任何同步，则无法保证排序。如果您在一个线程中写入一个值并“稍后”在另一个线程中读取它，您仍然可以读取旧值。以后多少？好吧，如果线程 0 在核心 0 上运行，线程 1 在核心 1 上运行，并且它们的缓存中都有变量，并且没有人告诉 CPU 刷新缓存，线程 1 将永远继续读取旧值。在实践中，CPython 的 Global Interpreter Lock 最终会隐式同步所有内容（所以我们说的是毫秒而不是无穷大），并且所有变量都有明确的内存位置，而不是被优化到寄存器中等等，所以你通常可以逃脱编写不受保护的比赛。

# mysql - mysql - 在日期时间和组中选择小时

> ID：15708027
> 
> 赞同：25
> 
> 时间：2013-03-29T17:10:40.907
> 
> 标签：mysql

我有一个 ShoppingDates 的日期时间列。

假设我有 1000 行

*   2012 年 7 月 18 日下午 5:33:39*   2012 年 7 月 16 日下午 6:64:39*   2012 年 7 月 14 日下午 7:34:39*   2012 年 7 月 13 日晚上 8 点 30 分 39 秒*   2012 年 7 月 13 日晚上 8 点 37 分 39 秒等等……

我想计算一个小时时间范围内每次出现的次数

```
so 5:00 p.m - 5:59:59 pm
so 6:00 p.m - 6:59:59 pm
so 7:00 p.m - 7:59:59 pm
so 8:00 p.m - 8:59:59 pm 
```

所以在上面的结果中我会得到

```
1|5pm-6pm
1|6pm-7pm
1|7pm-8pm
2|8pm-9pm 
```

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-29T17:13:36.737

我怀疑你只是想要这样的东西：

```
SELECT HOUR(ShoppingDate), COUNT(*) FROM YourTable
GROUP BY HOUR(ShoppingDate) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T17:32:06.300

尝试这个

```
SELECT 
  CONCAT( HOUR(ShoppingDate), ' to ', CONCAT( HOUR(ShoppingDate), ':59:59' ) ) as time_frame,
  COUNT(*) 
FROM 
  temp
GROUP BY 
  DATE(ShoppingDate), 
  HOUR(ShoppingDate) 
```

这是[SQLfiddle](http://sqlfiddle.com/#!2/98e38/1)

**注意：**我假设 ShoppingDate 是一个日期时间字段

# laravel - 在 laravel 4 上找不到 phmagick 类

> ID：15708030
> 
> 赞同：0
> 
> 时间：2013-03-29T17:10:57.020
> 
> 标签：laravel, composer-php, laravel-4

使用作曲家安装 phmagick 后，我收到一个找不到类的错误。我认为这是因为 Action 类的加载方式，但有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:07:01.660

查看`vendor/francodacosta/phmagick/docs/index.html`有关 phMagick 的实际文档。这是对我有用的示例之一...

```
$phMagick = new \phMagick\Core\Runner();
$action = new \phMagick\Action\Convert($this->originalFile, $this->newFile);

// optimize the image
$action->optimize();

// sets image quality
$action->quality(70);

// execute the convert action
$phMagick->run($action); 
```

# javascript - msDropDown 仅在 WP 主页上工作？

> ID：15708034
> 
> 赞同：0
> 
> 时间：2013-03-29T17:11:11.097
> 
> 标签：javascript, wordpress, html-select

我正在使用这个 javascript 插件来设置选择/下拉菜单的样式。 [https://github.com/marghoobsuleman/ms-Dropdown](https://github.com/marghoobsuleman/ms-Dropdown)

我将它与 wordpress 一起使用，它在主页上的任何地方都可以正常工作，但是当我尝试在其他页面上使用它时，它根本不起作用。主页和其他页面没有区别，它们都称为页眉和页脚。在标题中我 jquery 1.7.2 和 jquery.dd.min.js 然后`$(".selectC").msDropDown();`

我没有收到任何错误，什么都没有，它根本不会在其他页面上设置选择框的样式。我在这里做错了什么？

# node.js - 将 Node.js 与 QUnit 集成到 Jenkins

> ID：15708039
> 
> 赞同：1
> 
> 时间：2013-03-29T17:11:33.583
> 
> 标签：node.js, jenkins, qunit, xunit

*这是我的第一篇软文，所以请原谅我的格式和思想组织。在发布此之前，我已经付出了很大的努力来解决我的问题。我的部分问题可能是对 Ubuntu 或 Node.js 中的软件包缺乏了解，所以请指导我。*

我正在尝试从 Node.js 应用程序的 QUnit 测试中为 Jenkins 创建一个 XUnit xml 文件。我没有能力运行浏览器甚至无头浏览器，也不明白为什么我需要一个，因为 Node.js 代码不处理浏览器。

我一直在搜索，只成功地使用 qunit-tap 和“证明”来创建 XML 文件。证明需要下载一个 perl 文件的格式化程序。我们试图阻止使用 perl 的东西。

我的系统是一个 Ubuntu 虚拟机。这是一项工作任务，我的老板要求最少数量的包和依赖项。我们的 Node.js 服务器正在接受 Web 套接字请求并使用 php 编写的遗留系统来回传递消息。

当我在控制台中运行测试时，QUnit 的输出似乎是一种漂亮的打印格式，在表格中。把它变成一个带有旗帜的扁平形式真是太棒了！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T16:53:34.057

好吧，对于 NodeJS，您可以使用 Grunt 和 grunt-contrib-qunit，但我会推荐以下方法：

1.  利用 JUnit Logger ( [https://github.com/jquery/qunit-reporter-junit](https://github.com/jquery/qunit-reporter-junit) ) 插件获取 JUnit 兼容报告。
2.  注释掉 PhantomJS Runner [https://github.com/jquery/qunit/tree/master/addons/phantomjs](https://github.com/jquery/qunit/tree/master/addons/phantomjs)中的 console.log 输出，以使 runner产生的非 XML 输出静音
3.  为 Apache Ant 构建脚本分配任务：

```
    <target name="qunit" description="使用 PhantomJS 运行 QUnit 测试">
    <echo message="正在执行 QUnit Javascript 单元测试..."/>
      <exec 可执行文件="/usr/local/bin/phantomjs" 输出="./build/qunit/qunit-results.xml">
        <arg value="./vendors/Runner/runner-muted.js" />
        <arg value="test-runner.html" />
      </执行>
    </目标>

```

Jenkins 应在 ./build/qunit/qunit-results.xml 中查找报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T12:40:04.927

同上，上面的答案很好

使用 junit 报告并将其连接到标准 jenkins 单元测试插件 - > [http://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin](http://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin)

为了在机器上轻松配置自安装的 nodejs，我必须推荐优秀的 -> [http://wiki.jenkins-ci.org/display/JENKINS/NodeJS+Plugin](http://wiki.jenkins-ci.org/display/JENKINS/NodeJS+Plugin)

对于 jshint/csslint 报告，我发现[https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin)插件非常好，jshint 和 csslint 都输出到这个

```
jshint : {
    options : {
        reporter : 'checkstyle',
        reporterOutput : 'reports/jshint.xml',
    },
    src : "..."
},

csslint : {
    strict : {
        options : {
            formatters : [{
                id : 'checkstyle-xml',
                dest : 'reports/csslint.xml'
            }],
            csslintrc: '.csslintrc'
        },
        src : [...],
    },
}, 
```

# c++ - 是什么在 Windows Server 2003 上使用了这么多未提交的“私有数据”？

> ID：15708040
> 
> 赞同：3
> 
> 时间：2013-03-29T17:11:37.413
> 
> 标签：c++, windows, memory-management, heap-memory, memory-fragmentation

所以我有一个本机 C++ 应用程序，它需要长时间跟踪很多事情。当任务管理器说进程达到 800 到 1200 MB 内存之间的某个位置时，它的内存不足，而限制*应该*是大约 2GB。

当我对我的进程运行 VMMap 时，我终于知道发生了什么，但这只是给了我更多的问题。我发现了什么：

*   总大小（类型：总计，列：大小）比任务管理器/进程资源管理器报告的*要大得多*
*   在我的程序内存不足之前，总大小似乎实际上是不能超过 2GB 的值
*   内存使用差异几乎完全是由“私人数据”引起的——“大小”比“承诺”多得多。我见过大约 800MB 已提交的私有数据，但“大小”约为 1700MB。
*   “私有数据”的最大块主要由一对具有“读/写”保护并完全提交的小子块（通常在 4K 和 16K 之间）和一个较大的子块（介于90K 和 400K）具有“保留”保护且未提交。这似乎是对资源的巨大浪费。并且通常在末尾有一个大的（数兆字节）子块是“保留的”并且未提交。
*   这对中的一小部分通常有我认识的字符串，而较大的部分根本没有字符串。

这些子块对的一个例子：（不是我的应用程序，但想法是一样的） [http://www.flickr.com/photos/95123032@N00/5280550393](http://www.flickr.com/photos/95123032@N00/5280550393)

似乎当一个私有数据块被完全提交时，一个新块（通常与前一个最大块的大小相同或两倍）被分配。听起来很公平。但是，我看到了 3 个块，每个块都超过 100MB，提交的块不到 30MB。我的应用程序不应该以这种可能的方式运行（即用完 400MB，然后在几个小时内缩小 300MB）。

据我所知，“大小”是已分配的虚拟内存地址空间的实际数量。“已提交”是实际使用的“大小”数量（即通过调用 new/malloc）。如果确实如此，那为什么 Size 和 Commited 之间会有如此巨大的差异呢？为什么要分配数百兆字节的块？

有点奇怪的是，在 Windows 7 上运行时的行为完全不同。而在 2003 Server 上，应用程序使用私有数据，而在 Windows 7 上，应用程序使用堆。所以为什么？为什么 VMMap 在 2003 上主要显示私有数据使用情况，而在 7 上主要显示堆使用情况？有什么不同？一个区别是我不能使用 VMMap 中的“堆分配...”按钮来查看所有私有数据的分配位置。

我开始怀疑是否过度使用 std::string 导致了这个问题，因为我在成对中识别的字符串（如上所述）主要由存储在 std::string 中的字符串组成，这些字符串经常被创建和销毁（暗示很多内存分配/释放）。我将所有可能的转换为使用字符数组或使用内存池中的内存，但这似乎没有效果。我所有其他经常新建/删除的对象都已经拥有自己的内存池。

我还发现了低碎片堆，所以我尝试启用它，但它也没有任何区别。我认为这是因为 Windows 2003 实际上并没有正确使用堆。VMMap 显示启用了低碎片堆，但由于它实际上并没有被使用（即它使用的是私有数据），它实际上并没有什么不同。

实际上似乎正在发生的是，这些子块对正在分割大型私有数据块，这导致操作系统分配新块。最终，碎片变得如此糟糕，以至于即使有很多未提交的空间，但似乎没有一个可用，并且进程内存不足。

所以我的问题是：

1.  为什么 Windows Server 2003 使用私有数据而不是堆？有关系吗？有没有办法让 Windows Server 2003 改用堆内存？如果是这样，那会改善我的情况吗？
2.  有什么方法可以控制操作系统的内存分配器如何分配私有数据？
3.  是否可以创建我自己的自定义堆并从中分配（不改变我的大部分代码库），这能改善我的情况吗？我知道可以制作自定义堆，但据我所知，您需要从自定义堆中显式分配，而不是仅仅调用 new 或仅正常使用 STL 容器。
4.  我有什么遗漏或值得尝试的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:27:17.963

私有数据只是对两个或多个进程之间未共享的所有内存的分类。堆、重定位的 dll 页面、进程中所有线程的堆栈、未共享的内存映射文件等都属于私有数据的范畴。

当条件之一为真时，来自进程的内存请求（通过 VirtualAlloc）将被操作系统失败，

1.  连续的虚拟地址空间（不是内存）无法容纳请求的大小。
2.  提交费用 - 所有进程和操作系统的总内存提交内存 - 已达到上限（即 RAM + 页面文件大小）

除此之外，堆分配可能由于其自身原因而失败，例如，在扩展期间，它们实际上会尝试获取比触发扩展的分配请求的大小更多的内存——如果失败，它们可能会失败——尽管实际请求的大小可能可通过 VirtualAlloc 获得。

容易积累记忆的东西很少，

1.  有很多堆——它们会占用内存——因为它们保留了更多的储备。许多堆意味着很多保留空间可能未被使用。堆压缩可能会有所帮助。
2.  像 vector 和 map 这样的 STL 容器在从中删除元素后可能不会缩小。压缩它们也可能有所帮助。
3.  像 COM 这样的库会进行一些缓存并因此积累内存 - 可能有助于调查各个库以了解它们的内存占用习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T10:06:34.077

我遇到了同样的问题。

在 Windows 2003 中，我的应用程序在尝试使用 gcnew 分配 22MB 数组时导致 C++/CLI 模块内存不足异常。相同的过程在 Windows 7 中运行良好。

VMMap 显示 win2003 中的“私人数据”条目几乎是 2 GB。在我启用 /3GB 标志后，这个条目也增加到几乎 3GB。“堆”条目大约是 14 MB，而“托管堆”什么都不是！

在 Windows 7 中，“私有数据”仅为 62 MB，“堆”为 316MB，“托管堆”为 397MB。整个内存占用比win2003少很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T12:19:45.043

> 当任务管理器说进程达到 800 到 1200 MB 的内存时，限制应该是 2GB 左右

可能您正在任务管理器中查看“工作集”，而 2GB 限制在虚拟内存上。任务管理器不显示保留的虚拟机数量；它将显示承诺的金额。

> “已提交”是实际使用的“大小”数量（即通过调用 new/malloc）。

不，已提交意味着您实际触摸了该页面（即访问该地址并执行了加载或存储操作）。

> 1.为什么Windows Server 2003 使用私有数据而不是堆？

根据 Mark Russinovich 和 Aaron Margosis 的“Windows Sysinternals Administrator's Reference”：

> 私有数据内存是由 VirtualAlloc 分配的内存，堆管理器或 .Net 运行时不会进一步处理

因此，要么您的程序在两个操作系统上以不同方式管理其内存，要么 VMmap 无法检测到在 Windows Server 2003 上将此内存作为堆管理的方式。

> 4.我有什么遗漏或值得尝试的吗？

您可以在 32 位操作系统上运行 3GB 的限制，在 64 位操作系统上运行 32 位进程的 4GB 限制。谷歌搜索“/3G”和“/4G”。

Mark Russinovich、David Solomon 和 Alex Ionescu 所著的“Windows Internals 6th Edition”一书是有关此类信息的重要信息来源。

# jquery - 单击 div 内的特定元素

> ID：15708043
> 
> 赞同：1
> 
> 时间：2013-03-29T17:11:52.223
> 
> 标签：jquery, html, click

我的网络应用程序包含一些将插入到 div 中的可拖动元素，我想在用户单击时收听插入到 div 中的此元素

我想要的是捕获点击的jquery函数，如果点击的元素在div中做某事

该元素有一个可移动的类

```
 <button class="month draggable removable btn" id="01" month="01">Janvier</button> 
```

这将拖动元素的 div

```
<div   class="execute droppable" style="width: 800px;height: 200px;margin-left:10%;margin-top: 3%;border-style: dashed;border:0.5" >
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:14:46.357

使用[jQuery`on`](http://api.jquery.com/on/)处理程序：

```
$("div.execute").on("click", ".removable", function(){
  alert( $(this).text() );
}); 
```

# php - 我如何将信息从一个 PHP 传递到另一个？

> ID：15708044
> 
> 赞同：-3
> 
> 时间：2013-03-29T17:11:55.027
> 
> 标签：php

我需要创建一个登录页面，该页面对于执行 php 脚本的表单获取的信息是动态的。

人员提交表单 > PHP 代码向我发送电子邮件 > 显示信息的 PHP 代码

我在每个表单中都有一个隐藏的输入来标识它是什么形式，并且根据表单的值或“标识”，使用 a 执行 php 上的特定代码`switch`，我想也许我可以使用相同的标识符来之后在页面上执行另一个`switch`。我的问题是我不知道如何将该值或标识符从一个 php 传递到另一个。

所以重申一下，我想知道如何在`mail()`执行之后将变量从一个 php 移动或复制到另一个 php。

我使用 $request 来获取这些变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:36:46.300

在你做完你的`Mail()`事情之后，调用一个运行你想要的任何东西的函数。

如果您要运行的类或函数不可用，则必须`include`或`require`它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:17:50.047

保留此源表单标识符并将其呈现到新的表单标识符字段中。它将提供具有相同标识符的响应表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:40:14.367

我不是 100% 确定您的要求，但是由于评论，我会尝试回答。

当我创建表单时，我通常有一个包含实际表单的页面和另一个处理数据的页面。处理数据后，我只需将用户重定向回表单，然后给他们反馈。

我使用两个单独页面的原因如下：

1.  我喜欢将表单代码和处理程序分开。
2.  用户不能通过刷新页面意外地再次提交表单。
3.  最终的 Ajax 可以使用相同的处理程序并支持渐进增强。

下面是一个极其简化的示例。

**表格.php：**

```
<?php
  //Start session
  session_start();

  //If the session variable has been set
  if($_SESSION['remember'])
  {
    ## DISPLAY FEEDBACK ##
  }
  else
  {
    ## DISPLAY FORM ##
  }

  //Delete the session variable
  unset($_SESSION['remember']);
?> 
```

**请求.form.php**

```
<?php
  //Start session
  session_start();

  //If a form has been submited
  if(isset($_POST['submit']))
  {
    ## HANDLE THE DATA ##

    //Set a session variable
    $_SESSION['remember'] = true;

    //Redirect the user back to the form
    header('Location: /form.php');
    exit;
  }
?> 
```

# azure - Where is the Azure Storage library changelog?

> ID：15708045
> 
> 赞同：1
> 
> 时间：2013-03-29T17:11:58.480
> 
> 标签：azure, azure-storage

I'm using the official [nuget package](http://nuget.org/packages/WindowsAzure.Storage) of Windows Azure Storage Client Library to retrieve items of my Azure tables.

Recently I updated the package from version 2.0.2.0 to 2.0.5.0 and my app stopped working because the results returned by my storage query are different with the new version.

I'm looking for the library changelog in order to understand how to fix the issue.

Do you know where can I find it ?

The [link](http://msdn.microsoft.com/en-us/library/windowsazure/jj721952.aspx) provided on the [nuget page](http://nuget.org/packages/WindowsAzure.Storage) seems to be outdated (it's a changelog between 1.x and 2.x, not between 2.0.2 and 2.0.5 !). Also, the Windows Azure Storage team's [blog](http://blogs.msdn.com/b/windowsazurestorage/) is not updated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:29:00.220

Please refer to the [changelog.txt](https://github.com/WindowsAzure/azure-sdk-for-net/blob/master/microsoft-azure-api/Services/Storage/changelog.txt) that is always updated with the respective source code changes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-01T17:09:56.073

The changelog is always up to date at [https://github.com/Azure/azure-storage-net/blob/master/changelog.txt](https://github.com/Azure/azure-storage-net/blob/master/changelog.txt)

# java - 将字符串转换为使用非数字字符拆分的双精度数组

> ID：15708046
> 
> 赞同：1
> 
> 时间：2013-03-29T17:12:03.070
> 
> 标签：java, string

我知道如何用空格等​​特殊字符分割字符串：

```
String numbers = "22 14 10 8 70";
int [] n1 = new int [numbers.length()];
for(int n = 0; n < numbers.length(); n++) {
    n1[n] = Integer.parseInt(numbers.split(" ")[n]);
} 
```

但我想用任何非数字（也包括负号和浮点）类型的字符来分割字符串；像这个字符串：

```
String numbers = "22+14/10*8-70"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:24:25.140

试试这个算法[Shutting-yard algorithm](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)。

> 调车码算法是一种用于解析以中缀表示法指定的数学表达式的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:35:48.877

您还可以先将可用表达式转换为[Postfix](http://en.wikipedia.org/wiki/Reverse_Polish_notation)表达式，然后对其求值。[这](http://www.cs.nthu.edu.tw/~wkhon/ds/ds10/tutorial/tutorial2.pdf)是关于它的解释。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T17:18:02.007

[String.split()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)可以拆分正则表达式字符串：

```
String numbers = "22+14/10*8-70";
String[] elements = numbers.split("[^0-9\\.]");
for(String e : elements)
{
    System.out.println("Element: " + e);
} 
```

印刷：

```
Element: 22
Element: 14
Element: 10
Element: 8
Element: 70 
```

# json - JAXRS 和 tomee 的基本查询

> ID：15708050
> 
> 赞同：0
> 
> 时间：2013-03-29T17:12:18.110
> 
> 标签：json, rest, tomcat, jax-rs

我对 TomEE（或任何 Java EE 6 容器）的理解就是我只需要部署一个基于 JAX-RS 的应用程序，并带有正确的服务类注释。

```
@Path("/hr")
public class HelloRest {
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public String getClichedMessage() {
        return "Hello World";
    }
} 
```

TomEE 容器应该负责将“hello world”转换为正确的 json 格式 {“hello world”}

我想知道为什么 TomEE 不将其转换为 JSON 格式。请注意，我没有为 CXF 使用任何弹簧配置，因为我希望它可以在有/没有 CXF 配置的情况下工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:46:21.670

TomEE 的认证 Web Profile 实现没有实现 JAX-RS，因为 JAX-RS 不是 Java EE 6 中 Web Profile 的一部分（尽管它在 Java EE 7 中）。

但是，由于 Java EE 6 中似乎确实存在超出 Web Profile 的非常有用的内容，因此 TomEE 有 2 个额外的发行版，其中包含一些额外的内容。

在[下载页面上](http://tomee.apache.org/downloads.html)，您会找到都包含 JAX-RS 的“JAX-RS”和“Plus”发行版。使用这些（或任何完整的 Java EE AS），您确实不需要任何配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T22:18:37.760

Produces/Consumes 不代表convert，主要是http headers。json 中的字符串是一个...字符串。当然取决于你的身体作家。

# codekit - 在 Codekit 之外编译 .kit 文件

> ID：15708051
> 
> 赞同：2
> 
> 时间：2013-03-29T17:12:35.333
> 
> 标签：codekit

Codekit 提供了使用 include 函数和 .kit 文件将静态 HTML 文件拆分为指定部分的能力。更多信息：http: [//incident57.com/codekit/kit.php](http://incident57.com/codekit/kit.php)

问题是.. 使用这种文件类型非常适合拥有 CodeKit 的用户。但这使得任何进行 HTML 更改的人也需要 CodeKit 许可证。

无论如何，在没有或在 Codekit 之外编译这些 .kit 部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-28T07:18:00.373

即使问题已经存在一年了：

*   对于 Windows 用户和 Mac（CodeKit 替代应用程序）：

    *   [http://alphapixels.com/prepros/](http://alphapixels.com/prepros/)
*   对于 Linux、Mac 和 Windows (CLI)：

    *   **咕噜声：** [https ://www.npmjs.org/package/grunt-codekit](https://www.npmjs.org/package/grunt-codekit)

    *   **吞咽：** [https ://www.npmjs.com/package/gulp-codekit](https://www.npmjs.com/package/gulp-codekit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T13:12:42.863

我已经与 Bryan（CodeKit 的创建者）谈过，到目前为止，在 CodeKit 之外没有其他编译方式。也没有可以编译的服务器端编译器（如 LESS）。所以我的建议是不要让任何项目依赖 Kit，除非你确定它会交给拥有 CodeKit 的人。

# java - 类路径和可移植性

> ID：15708056
> 
> 赞同：2
> 
> 时间：2013-03-29T17:12:55.150
> 
> 标签：java, eclipse, classpath

我是 Java 新手，正在使用 Eclipse 编写 Java 代码。

我添加了许多库 ( `.jar`) 文件作为引用库。我还将我的项目导出为`JAR`文件。我的问题是，如果我在引用的库与我的计算机不在同一位置的计算机上运行此文件，它会成功运行吗？

我还制作了一个`runnable JAR`文件，与之前的文件（~24 KB）相比，它的大小要大得多（~29 MB）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:14:12.127

您甚至可以将参考库捆绑在同一个 jar 中。因此，当您将尺寸减小到该程度时，我假设您从 jar 中删除了这些尺寸，这在大多数情况下都不是好方法。不建议不包含引用的 jar，除非您 100%（甚至不是 99.9%）确定这些库将在您要运行的系统中。

**编辑：** 要在 Eclipse 中包含引用的 jar，您需要在此处转到 **project-properties>java-build-path>order-and-export** 检查您想要的任何库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:22:05.633

这取决于您使用可运行 jar 应用程序打包 jar 的方式。如果您在 jar 内部或外部执行此操作，那么您应该在`manifest.mf`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:57:24.873

> 我的问题是，如果我在引用的库与我的计算机不在同一位置的计算机上运行此文件，它会成功运行吗？

不可以。您需要将引用的 JAR 与您的程序 JAR 一起打包。最终用户必须下载程序所依赖的所有库会很不方便。有几个选项，都可以使用 Eclipse 导出功能。

1.  解压缩所有依赖的 JAR 并将它们与您的代码一起打包到一个可执行的 JAR 中。
2.  Specify in your program JAR manifest the classpath, which will contain relative paths to the location of your dependent JARs. These could be for example in a `lib` folder. The location of the `lib` folder relative to your program JAR would need to be the same for all your end-users, so it would make sense to package it all together.

# java - 开始活动会停止 android 服务

> ID：15708061
> 
> 赞同：0
> 
> 时间：2013-03-29T17:13:08.637
> 
> 标签：java, android, android-service

我有一个播放音乐的 android 服务。我使用以下代码开始我的主要活动：

```
Intent service = new Intent(MainMenu.this, musicservice.class);
MainMenu.this.startService(service); 
```

这是我的服务：

```
public class musicservice extends Service {
@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(intent, flags, startId);

    MediaPlayer mp;
    mp = MediaPlayer.create(musicservice.this, R.raw.music);
    mp.setOnCompletionListener(new OnCompletionListener() {
        public void onCompletion(MediaPlayer mp) {
            mp.release();
        }
    });   
    mp.start();

    return Service.START_STICKY;
}

@Override
public void onDestroy() {
    super.onDestroy();
} 
```

}

它 stsrts 工作正常，但是当我开始另一个活动时，我的音乐响起，似乎我的服务被破坏了！但不想要这个，我希望我的服务只在我的应用程序结束时停止。音乐仅在用户使用应用程序时播放。即使应用程序在后台运行，我也不希望我的音乐播放！我怎么能实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:59:34.423

如果您希望您的应用程序在您的活动开启时播放音乐，请尝试[绑定它](http://developer.android.com/guide/components/bound-services.html)。

它应该看起来像这样：

服务：

```
package com.example.service;

import android.app.Service;
import android.content.Intent;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Binder;
import android.os.IBinder;

import com.example.playmusic.R;

public class PlayMusicService extends Service {

    private final IBinder binder = new LocalBinder();

    private MediaPlayer player;

    @Override
    public IBinder onBind(Intent intent) {
        return binder;
    }

    public class LocalBinder extends Binder {

        public PlayMusicService getService() {
            return PlayMusicService.this;
        }
    }

    public void play() {
        player = MediaPlayer.create(this, R.raw.music);
        player.setOnCompletionListener(new OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {
                mp.release();
            }
        });
        player.start();

    }

    public void pause() {
        player.pause();
    }
} 
```

活动：

```
package com.example.playmusic;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;

import com.example.service.PlayMusicService;
import com.example.service.PlayMusicService.LocalBinder;

public class MainActivity extends Activity {

private PlayMusicService service;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
protected void onPause() {
    super.onPause();
    service.pause();
}

@Override
protected void onStart() {
    super.onStart();
    if (service != null) {
        service.play();
    } else {
        bindService();
    }
}

    private void bindService() {
        bindService(new Intent(this, PlayMusicService.class), new ServiceConnection() {

            @Override
            public void onServiceDisconnected(ComponentName name) {
                service = null;

            }

            @Override
            public void onServiceConnected(ComponentName name, IBinder binder) {
                LocalBinder localBinder = (LocalBinder) binder;
                service = localBinder.getService();
                service.play();

            }
        }, Context.BIND_AUTO_CREATE);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:14:09.923

当您从活动启动服务时，您的活动销毁时服务销毁。

用于`AlarmManager`重复安排服务。

# javascript - 如何使用 innerHTML 将 XML 写入 DIV

> ID：15708062
> 
> 赞同：0
> 
> 时间：2013-03-29T17:13:12.080
> 
> 标签：javascript, xml, innerhtml

我想问而不是使用document.write，如何使用innerHTML将XML信息写入div？我尝试使用 document.getElementById("box").innerHTML 但我不确定如何。

```
<!DOCTYPE html>
<html>
<head>

<script>
    function loadXMLDoc(dname){
    if (window.XMLHttpRequest){
    xhttp=new XMLHttpRequest();
    }else{
    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname,false);
    xhttp.send();
    return xhttp.responseXML;
    }
</script>

<script>
    xmlDoc=loadXMLDoc("books.xml");

    x=xmlDoc.getElementsByTagName("title");
    for (i=0;i<x.length;i++)
    { 
    document.write(x[i].childNodes[0].nodeValue);
    document.write("<br>");
    //instead of using document.write how do I use innerHTML?
    //this is the method i tried:
    //txt = document.write(x[i].childNodes[0].nodeValue);
    //document.getElementById("box").innerHTML = txt;
    //it is not working, can anyone advice?
    }
    </script>

</head>

<body>
    <div id="box"></div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:17:00.407

尝试这个

```
var xmlText = document.createTextNode('<xml></xml>');
document.getElementById("box").appendChild(xmlText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:24:41.930

XML 节点没有*HTMLElements上的**innerHTML*属性；您必须在*节点上使用**DOM*方法或[**将**](https://developer.mozilla.org/en/docs/XMLSerializer)其转换为*String*。***[](https://developer.mozilla.org/en/docs/XMLSerializer)***

 *****```
var xmlDoc=loadXMLDoc('books.xml'), 
    x = xmlDoc.getElementsByTagName('title'),
    xs = new XMLSerializer();
document.getElementById('box').innerHTML = '';
for (i=0; i<x.length; ++i) { 
    // the nodes you want
    document.getElementById('box').innerHTML += xs.serializeToString(x[i]) + '\n<br />\n';
} 
```

或者，`return xhttp.responseText`并使用它，但您将无法遍历节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:33:31.637

```
<!doctype html>
<html>
  <head>
    <script
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
    </script>
    <script>
      $(function()
      {
        $.get('books.xml', function(xml)
        {
           var box = $("#box");
           var xmldoc = $($.parseXML(xml));

           xmldoc.each('title', function()
           {
             box.append($(this).text() + "<br>");
           });
        });
      });
    </script>
  </head>
  <body>
    <div id="box"></div>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:17:40.493

这是脚本的更新版本；这对我来说可以：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function loadXMLDoc(dname) {
                var xhttp = null, xml = null, titles = null, html = "";
                if(window.XMLHttpRequest) {
                    xhttp = new XMLHttpRequest();
                } else {
                    xhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                if(!xhttp) {
                    alert("Failed to make the request!");
                } else {
                    xhttp.open("GET", dname, false);
                    xhttp.send();
                    xml = xhttp.responseXML;
                    titles = xml.getElementsByTagName("title");
                    for(var i = 0, len = titles.length; i < len; i++) {
                        html += titles[i].childNodes[0].nodeValue + "<br />";
                    }
                    document.getElementById("box").innerHTML = html;
                }
            }
            window.onload = function(){
                loadXMLDoc("books.xml");
            };
        </script>
    </head>
    <body>
        <div id="box"></div>
    </body>
</html> 
```

我使用的 XML：

```
<?xml version="1.0"?>
<books>
    <book>
        <title>This is a title</title>
    </book>
    <book>
        <title>This is a title 2</title>
    </book>
    <book>
        <title>This is a title 3</title>
    </book>
    <book>
        <title>This is a title 4</title>
    </book>
</books> 
```

这[是脚本的实时版本](http://www.allyumassage.com/ajax/xml.html)。*****

# android - eclipse 如何检测我的三星 Galaxy SII 以使用 Debian 作为操作系统进行 USB 调试？

> ID：15708067
> 
> 赞同：2
> 
> 时间：2013-03-29T17:13:33.653
> 
> 标签：android, linux, eclipse, galaxy

我想在 Eclipse 中使用我的三星 Galaxy SII 调试 android 应用程序，并使用 Debian 作为操作系统。Eclipse 无法检测到我的手机，并且我无法在 Debian 中访问我的手机（例如传输文件）。Eclipse 能够检测到设备，但名称未知。

![Eclipse 截图](../Images/f9e108ffaa49db7eac817438aa111bd0.png)

我想这是因为我没有安装任何驱动程序，但我找不到适用于 Linux 的三星 Galaxy SII 驱动程序。

如果有人可以帮助我，我会很高兴。

**编辑：**
当我运行命令 adb devices 时，它会打印：
??????????? 没有权限

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:34:58.173

我没有 SII，但有一个在 debian 上运行良好的旧三星型号。

你确定你：

*   在您的手机上启用 USB 调试？

    此设置应位于 Development 下方

*   为您的设备创建了 udev 规则？

    如此处所述[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)如果它是三星，则供应商 ID 应为“04e8”，但最好自己检查。

# android - 在 OnItemClick 之后调用的 Android GridView OnItemLongClick 侦听器

> ID：15708068
> 
> 赞同：4
> 
> 时间：2013-03-29T17:13:35.150
> 
> 标签：android, gridview, contextmenu, listener, onitemclicklistener

基本上，当用户短按或长按网格视图中的单元格时，我想显示不同的上下文菜单。我遇到的问题是，如果用户短按 OnItemClick 侦听器，我会看到调试器到达显示上下文菜单的代码，而不是从那里移动到 onCreateContextMenu，而是转到 onItemLongClick。

我尝试使用布尔值来防止执行长点击代码，这确实阻止了该代码的执行，但是即使这样做了 onCreateContextMenu 也不会被调用。

如果我删除 onItemLongClick 侦听器，则短击侦听器可以正常工作并且上下文菜单会正确显示。

我知道其他人提出了类似的问题，但我仍然无法找到有效的解决方案。如果有人可以解决这个问题或指出我正确的方向，请让我知道，在此先感谢。任何能够为我指明正确方向的人都将获得赏金。

这是听众代码的简化版本：

```
 mTGrid.setOnItemClickListener(new OnItemClickListener() {
            //this listener should show the context menu for a short click on the gridview.
            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                    mRequiredMenu = "standard";
                    parent.showContextMenuForChild(v);      

            }
        });

        mTGrid.setOnItemLongClickListener(new OnItemLongClickListener() {
            //this listener should show the context menu for a long click on the gridview.
            @Override
            public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {
                    mRequiredMenu = "options";
                        parent.showContextMenuForChild(v);      

            }
        }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T06:32:40.687

我了解您希望为 GridView 项目的短按和长按显示不同的上下文菜单。

首先，您只需为短按设置监听器，因为默认行为会在长按时自动显示上下文菜单。

接下来，在 OnItemClickListener 中将布尔标志设置为 true。长时间点击的默认值为 false。

最后，在 onCreateContextMenu() 检查它是否是一个短按并显示不同的上下文菜单（标准）并将标志设置为 false。否则让它显示默认的上下文菜单（选项）。

这是一些代码来演示这个想法。

```
public class MainActivity extends Activity {

    private static final String[] arr = {"A", "B", "C", "D", "E", "F", "G", "H","I"};

    private GridView mTGrid;
    private boolean isShort;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mTGrid = (GridView) findViewById(R.id.gridView1);
        registerForContextMenu(mTGrid);

        mTGrid.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                isShort = true;
                openContextMenu(view);
            }
        });

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.cell, arr);
        mTGrid.setAdapter(adapter);
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;

        if(isShort) {
            getMenuInflater().inflate(R.menu.context_standard, menu);
            menu.setHeaderTitle("Standard Menu for "+arr[info.position]);
            isShort = false;
        }
        else {
            getMenuInflater().inflate(R.menu.context_options, menu);
            menu.setHeaderTitle("Options Menu for "+arr[info.position]);
        }
    }   
} 
```

**示例应用程序**：您可以下载示例应用程序以查看行为。[GridExample_eclipse_project](http://www.appsrox.com/shared/GridExample_eclipse_project.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:23:40.023

对于绝境绝境的解决方案。

1.尝试使用布尔值，而不是在侦听器内执行代码。

```
 mTGrid.setOnItemClickListener(new OnItemClickListener() {
        //this listener should show the context menu for a short click on the gridview.
        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                b=true     
        }
    });

    mTGrid.setOnItemLongClickListener(new OnItemLongClickListener() {
        //this listener should show the context menu for a long click on the gridview.
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {
                b=false      
        }
    });
if(b)
{
     mRequiredMenu = "standard";
     parent.showContextMenuForChild(v);  
}
else
{
    mRequiredMenu = "options";
    parent.showContextMenuForChild(v);
} 
```

2 检查布局中的可点击和长点击属性是否为“真”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T02:51:09.680

您可以覆盖调度事件侦听器，该侦听器负责长点击处理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T04:49:52.590

```
mTGrid.setOnItemClickListener(new OnItemClickListener() {
            //this listener should show the context menu for a short click on the gridview.
            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                     clickFlag=true;   
                     mRequiredMenu = "standard";                     

            }
        });

        mTGrid.setOnItemLongClickListener(new OnItemLongClickListener() {
            //this listener should show the context menu for a long click on the gridview.
            @Override
            public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {
                     clickFlag=false;
                     mRequiredMenu = "options";                  
            }
        });

if(clickFlag){        
    if(mRequiredMenu.equals("standard");{
        //just click event
        parent.showContextMenuForChild(v);
    }else{}
}else{
   if(mRequiredMenu.equals("options");{
        //just Long click event
        parent.showContextMenuForChild(v);
    }else{} 

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T10:47:31.080

`OnItemLongClickListener`被触发，因为显示上下文菜单`ListView`将尝试通过该侦听器执行此操作。这是来自的代码[`AbsListView`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/widget/AbsListView.java#AbsListView.showContextMenuForChild%28android.view.View%29)：

```
@Override
public boolean showContextMenuForChild(View originalView) {
    final int longPressPosition = getPositionForView(originalView);
    if (longPressPosition >= 0) {
        final long longPressId = mAdapter.getItemId(longPressPosition);
        boolean handled = false;

        if (mOnItemLongClickListener != null) {
            handled = mOnItemLongClickListener.onItemLongClick(AbsListView.this, originalView,
                    longPressPosition, longPressId);
        }
        if (!handled) {
            mContextMenuInfo = createContextMenuInfo(
                    getChildAt(longPressPosition - mFirstPosition),
                    longPressPosition, longPressId);
            handled = super.showContextMenuForChild(originalView);
        }

        return handled;
    }
    return false;
} 
```

从这里我们可以看出，如果`mOnItemLongClickListener.onItemLongClick`返回 true，则表示调用已处理，方法退出。如果它返回 false，那么它会尝试创建上下文菜单。

所以你需要修改你的return语句（你的代码没有显示）如果它真的被长时间点击`onItemLongClick`返回**true ，如果它只是被点击则返回****false**：

```
mTGrid.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        mRequiredMenu = "standard";
        mItemClicked = true;
        parent.showContextMenuForChild(v);
    }
});

mTGrid.setOnItemLongClickListener(new OnItemLongClickListener() {

    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {

        if(mItemClicked) {
            mItemClicked = false;
            return false;
        }

        mRequiredMenu = "options";
        parent.showContextMenuForChild(v);
        return true;
    }
}); 
```

# mysql - 缺少日期时Mysql查询最新值

> ID：15708069
> 
> 赞同：0
> 
> 时间：2013-03-29T17:13:35.473
> 
> 标签：mysql, dayofweek, missing-data, maxdate

我有一个带有日期和值列的表。该表每天都会填充新值。有时人口不会发生。我需要在过去的每个星期一生成一份最新值的报告。此查询显示 2013-02-18 未收集任何数据。

mysql> 从表中选择日期，其中 dayofweek(date) = 2;

```
+------------+
| date       |
+------------+ 
| 2013-02-04 | 
| 2013-02-11 | 
| 2013-02-25 | 
| 2013-03-04 | 
| 2013-03-11 | 
| 2013-03-18 | 
| 2013-03-25 | 
+------------+ 
7 rows in set (0.00 sec) 
```

所以我想获得那个星期一的最新值。如果我知道这样的缺失日期，我可以单独使用 <= max(date) 来做到这一点：

```
mysql> select max(date) from table where date <= "2013-02-18"; 
+------------+ 
| max(date) | 
+------------+ 
| 2013-02-14 | 
+------------+
1 row in set (0.00) 
```

这表明 2013-02-18 的最新值是在 2013-02-14 收集的。所以我需要一个查询来返回每个星期一的最新值。如果当天不存在任何值，则使用最新的先前现有值。我的输出应该是这样的：

```
+------------+
| date       |
+------------|
| 2013-02-04 |
| 2013-02-11 |
| 2013-02-14 |
| 2013-02-25 |
| 2013-03-04 |
| 2013-03-11 |
| 2013-03-18 |
| 2013-03-25 |
+------------+ 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:30:31.827

尝试这个

```
SELECT 
    date 
FROM
    temp t
WHERE
    dayofweek(date) = 2 OR EXISTS   (
                                        SELECT 
                                            max( DATE )
                                        FROM    
                                            temp i
                                        WHERE
                                            WEEK( t.date ) = WEEK( i.date )
                                            AND NOT EXISTS ( SELECT 1 FROM temp WHERE WEEK( date ) = CASE WHEN WEEK( i.date ) = 53 THEN 0 ELSE WEEK( i.date ) + 1 END = WEEK( date ) AND YEAR( date ) = YEAR( i.date ) + CASE WHEN WEEK( i.date ) = 53 THEN 1 ELSE 0 END AND dayofweek(date) = 2 )
                                    ) 
```

***查询的工作原理是，***

显示当前行 `if its dayofweek = 2 OR if there are no records of dayofweek = 2 in the next week and the current date is maximum for the current week`

我还处理了条件`year`的更改`week()`

这是[**SQLFiddle**](http://sqlfiddle.com/#!2/33933/1)

希望这可以帮助

# java - 日期解析魔法

> ID：15708089
> 
> 赞同：0
> 
> 时间：2013-03-29T17:14:43.897
> 
> 标签：java, parsing, date, simpledateformat

这是我的代码：

```
private static final DateFormat DATE_FORMAT = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss Z", Locale.ENGLISH);
....
private static Date parseIfModifiedSince(HttpServletRequest request) {
    String lastModifiedHeader = "";
    try {
        lastModifiedHeader = request.getHeader(IF_MODIFIED_SINCE);
        return !StringUtils.isEmpty(lastModifiedHeader) ? DATE_FORMAT.parse(lastModifiedHeader) : null;
    } catch (Exception ex) {
        log.warn("Error while parsing If-Modified-Since date: \"" + lastModifiedHeader+"\"", ex);
        return null;
    }
} 
```

有时我会看到一个异常：

```
WARN ru.planeta.web.res.ResourcesController 2013-03-29 20:16:58,635: Error while parsing If-Modified-Since date: "Fri, 29 Mar 2013 16:16:28 GMT"
java.lang.NumberFormatException: multiple points 
```

我在代码中找不到任何问题。我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:34:22.963

将 声明`SimpleDateFormat`为类级变量会使您面临该问题，因为它不是线程安全的。我建议您在`SimpleDateFormat`每次需要时创建一个新对象，并且只将其分配给方法中的局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:37:29.103

正如@Sarath 提到的，`SimpleDateFormat`它不是线程安全的。另一种解决方案是使用`FastDateFormat`线程安全的。

# internet-explorer - 用于在 IE 10 中设置浏览器模式和文档模式的 HTML 标签？

> ID：15708096
> 
> 赞同：0
> 
> 时间：2013-03-29T17:15:08.940
> 
> 标签：internet-explorer, cross-browser

我想以编程方式在 IE 10 中设置浏览器模式和文档模式，而不必按 F12 然后手动设置它们。

我尝试了以下行，但它仅将文档标准设置为 8，将浏览器模式设置为 10。

```
<head>
   <meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

![IE 兼容性设置](../Images/4b7019713ad5f10bb79bd86ade388a8e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:42:24.210

必须在请求文档之前设置浏览器模式，因此无法针对每个页面或站点进行设置。它只能在 F12 工具中设置，由用户通过单击兼容模式图标，或通过获取 Microsoft 的兼容性列表中的站点。有关详细信息，请参阅此链接：http: [//blogs.msdn.com/b/ie/archive/2010/10/19/testing-sites-with-browser-mode-vs-doc-mode.aspx](http://blogs.msdn.com/b/ie/archive/2010/10/19/testing-sites-with-browser-mode-vs-doc-mode.aspx)

# paypal - 通过参考交易收取后续运费

> ID：15708098
> 
> 赞同：0
> 
> 时间：2013-03-29T17:15:17.650
> 
> 标签：paypal

我们正在使用 PayPal *Payments Pro*构建一个网站，一旦知道确切的运费，客户希望在商品付款后发出运费。

阅读它听起来像[参考交易](https://www.x.com/developers/paypal/documentation-tools/express-checkout/integration-guide/ECReferenceTxns)可能是这里的答案。

根据[这篇文章](https://www.paypal-community.com/t5/About-Business-Archive/Reference-Transactions/td-p/487070)，听起来管理员可以登录并开始收费（考虑到使用*参考事务*API 调用开始......*我认为......* 或者如果我们计划使用贝宝管理员）。

这可能吗？考虑到通过 PayPal 管理界面发出后续运费的计划，我们甚至需要调用*Reference Transaction* API，还是只需要批准*Reference Transactions ？*

请不要通过建议付款计算器或统一运费来回答。问题是如何通过 PayPal 实施后续运费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:26:49.123

无论您是通过 API 还是通过 PayPal 管理员进行参考交易，您仍然需要在您的帐户上启用参考交易。此外，根据您是指 DoDirectPayment 信用卡付款还是 Express Checkout，您将需要传递其他变量您的初始 Express Checkout API 调用以设置计费协议，以便稍后执行参考交易。

此外，我没有详细说明您如何计算运费，但如果您的运输提供商有 API 连接到他们的系统来计算运费，则另一种方法可以让您正确计算。然后在结帐时，您可以使用[Callback AP](https://www.x.com/developers/paypal/documentation-tools/api/callback-api-operation-nvp) I 计算运费，同时他们使用 Express Checkout 结帐。

# asp.net-mvc-4 - ASP.Net MVC 4 OAuthWebSecurity 注销

> ID：15708100
> 
> 赞同：2
> 
> 时间：2013-03-29T17:15:43.230
> 
> 标签：asp.net-mvc-4, oauth-2.0, facebook-oauth

我正在为我的 Internet 应用程序实现 ASP.Net MVC 的 OAuthWebSecurity。我可以使用 Facebook、Twitter、Google 和 Yahoo 成功进行身份验证。我第一次对这些进行身份验证时，我会被发送到他们各自的站点以授权我的应用程序。说得通。

但是，在随后尝试使用 Facebook、Google 和 Yahoo 进行身份验证时，我没有看到提供商的授权屏幕。似乎 Twitter 每次都在问我。

这是一个问题吗？如果其他人使用我的计算机并通过 Facebook 身份验证使用我的应用程序，他们会被认证为我吗？如何缓存 oAuth 结果？你如何清除它们？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-09T23:20:12.500

实际上比你描述的还要糟糕。任何后续用户都可以访问您在提供商处的用户帐户（例如 google/facebook 等），而不仅仅是您的应用程序。

你有没有找到处理这个的好方法？我在下面提供了一些建议，但我希望有更好的选择/正在筹备中。

从我的角度来看，您所描述的是一个真正的问题，并且是整个系统中的一个漏洞。正如您所指出的，使用 asp.net MVC，WebSecurity.Logout() 不会将用户从提供程序中注销。

在我提供了一些选项后，我将说明为什么我认为这是一个问题。这两种解决方案的关键在于，如果用户从他们的提供商注销，那么他们将无法在不重新验证的情况下登录您的网站，并且他们不会让他们的提供商用户帐户保持打开状态。

1.  无论他们的提供商是什么，都将他们注销。如果他们的提供者是 facebook，那么请按照[此答案中的说明进行操作](https://stackoverflow.com/questions/8810864/is-it-possible-to-use-facebooks-oauth-service-without-leaving-users-logged-in-t)。如果提供者是 google，您可以重定向到“ [https://accounts.google.com/Logout](https://accounts.google.com/Logout) ”。不幸的是，这有点笨拙，并且在供应商之间会有所不同。

2.  当用户在您的站点上单击“注销”时，显示一条消息，指示他们应该从其提供商注销，然后直接转到提供商站点。例如，如果提供商是 google，那么当他们单击注销时，会显示一条消息，例如“请记住从 google 注销”，然后将他们定向到 www.google.com。这实际上不会将它们注销，但至少会保持一致。这是我正在使用的方法，直到我找到更好的方法。这并不理想，因为它将它们带出您的站点，但至少它们没有暴露于重大安全漏洞。

我认为让用户登录到提供程序是不好的原因如下例所示： -

1.  用户在公共计算机上。
2.  用户打开一个 EmergencyIceCream（虚构）站点。
3.  在 EmergencyIceCream 网站上，用户选择使用提供商（例如 google/facebook）登录。
4.  用户订购了他们的紧急冰淇淋并点击退出。
5.  用户被带回 EmergencyIceCream 主页。
6.  用户很高兴他们已注销。
7.  BadUser 来到电脑前，无法相信他们的运气，当他们访问提供商的网站（例如 google/facebook）时，他们可以访问和控制用户的帐户以及与用户帐户相关的任何应用程序（包括 EmergencyIceCream）。

我认为也应该有一个退出社交提供者的选项。我不确定这是否可以在 OAuthWebSecurity 的后台完成，或者是否需要在 open-id/oauth 实现中进行更改。我认为让代码分别注销每个提供程序并不是一个很好的选择。我不同意这就是 oauth 的工作方式，我们应该接受它或使用我们自己的身份验证和授权。作为使用 OAuthWebSecurity 功能来简化我的应用程序登录过程的消费者，我现在有更多工作要做，并且削弱了用户的安全性。此外，退出提供程序可以解决问题的事实表明有办法解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:50:31.533

令牌撤销将意味着您的用户每次都必须授予您的应用程序共享数据的权限；他们不应该*一直*给予许可。

使用 Outh，您将登录过程外包给 FB 等，如果您登录到 FB，那么您也登录到您的应用程序（也称为单点登录）

…转到您的 FB 帐户并注销，然后再次启动您的应用程序，它现在应该提示并让您在需要时通过另一个 FB 帐户登录。

如果您想以自己的身份登录 FB，但以其他人的身份登录**您**的应用程序，那么 OAuthWebSecurity 可能不是您的最佳设计选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T18:35:51.027

每个提供者都必须在响应中包含“SignOutUri”，即 ExtraData.. 这有多难？

# asp.net-mvc-4 - 如何使用实体框架中尚不存在的外键插入？

> ID：15708101
> 
> 赞同：7
> 
> 时间：2013-03-29T17:15:45.863
> 
> 标签：asp.net-mvc-4, entity-framework-5

使用 .NET 4、MVC 4、Entity Framework 5、SQL Server；

我想在一个事务中插入一个新的 Header 记录和几个新的 HeaderData 记录，它们都具有插入的 Header 记录的外键。标头记录有一个 Identity int Primary Key。

```
Entities.Header h = new Entities.Header();

h.Name = name;
h.Time = DateTime.Now;
h.Comments = comments;

db.Headers.Add(h);
// db.SaveChanges(); // Save changes here?
// and get ID to use below via h.ID?

foreach (DataRecord dr in datarecords) // my own custom types here
{
    Entities.HeaderData hd = new Entities.HeaderData();
    // hd.header = thisid // ?? this is the FK to Header.ID, its Identity int PK
    hd.name = dr.name
    hd.value = dr.value

    db.HeaderDatas.Add(hd)
}

db.SaveChanges(); // or wait to save all here? 
```

所以问题是，在提交之前，我不知道将什么标题记录 ID 放入数据记录的 FK 字段中。还是我？只是在 SaveChanges/Commit 之前引用 h.ID 不起作用，它返回 0。

选项：1）我是否应该先提交标头记录，使用 PK，然后填充数据记录模型并分别提交？在这种情况下可能必须回滚标头，这听起来不是最佳的方法。

2）我应该使用 GUID PK 或类似的代替，我在应用程序的此处创建它吗？无论如何，这是唯一可以添加记录的地方。

3) Entity Framework 中是否有一种巧妙的方法（可能是临时 EntityKey？），并让它进行事务插入，以便它自动将正确的标题 ID 放入数据记录的 FK 字段中？这对 EF 来说似乎是可行的，但我无法完全找到对它的引用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T17:26:29.717

如果`Header`并且`HeaderData`通过外键（一对多）关系相关，您应该在其中有一个导航集合`Header.HeaderDatas`（类型`ICollection<HeaderData>`或其他集合类型）`Header`或导航引用`HeaderData.Header`（类型`Header`），`HeaderData`甚至两者都有。

无论哪种情况，更好的方法是使用这些导航属性建立关系：

```
Entities.Header h = new Entities.Header();
h.HeaderDatas = new List<HeaderData>();
// ...
foreach (DataRecord dr in datarecords)
{
    Entities.HeaderData hd = new Entities.HeaderData();
    //...
    h.HeaderDatas.Add(hd)
}
db.Headers.Add(h);
db.SaveChanges(); 
```

或者：

```
Entities.Header h = new Entities.Header();
// ...
foreach (DataRecord dr in datarecords)
{
    Entities.HeaderData hd = new Entities.HeaderData();
    //...
    hd.Header = h;

    db.HeaderDatas.Add(hd);
}
db.SaveChanges(); 
```

您不需要直接设置 FK。EF 将正确地将您设置的导航属性“翻译”为数据库表的必要外键值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T16:45:53.633

导航属性不是必需的。使用事务并调用 SaveChanges() 两次；添加第一个实体后一次，最后一次。因为 EF 可以有多种不同的使用方式，所以下面的示例可能不是适合您的情况的确切解决方案，但它应该能说明问题。

```
using (MyContext context = new MyContext())
using (DbContextTransaction txn = context.Database.BeginTransaction())
{
    try
    {
        EntityA a = new EntityA();
        a.Foo = "bar";
        context.A_DbSet.Add(a); // Assuming the use of the DbSet<T> class
        context.SaveChanges();
        // A.ID is now set, but not committed

        EntityB b = new EntityB();
        b.A_ID = a.ID;
        b.Foo2 = "bar2";
        context.B_DbSet.Add(b);
        context.SaveChanges();
        txn.Commit();
    }
    catch (Exception ex)
    {
        txn?.Rollback();
    }
} 
```

# jsp - 为什么在 JSTL 中不能解析 ${variable} 引用？

> ID：15708102
> 
> 赞同：0
> 
> 时间：2013-03-29T17:15:48.747
> 
> 标签：jsp, jstl, jspx

在下面的代码中，有两个对 的引用`${labelKey}`，但只有一个被替换。

```
 <a href="#${labelKey}">
        <spring:message code="${labelKey}.tab.title" />
    </a> 
```

处理后，这是发送到浏览器的 HTML：

```
 <a href="#${labelKey}">
        Home
    </a> 
```

它*应该*是这样的：

```
 <a href="#Home">
        Home
    </a> 
```

第一个`${labelKey}`引用没有被替换，但第二个引用被替换。在某些环境中是`#`转义字符吗？近一年来，这段代码在几个不同的部署中运行良好，但最近在新服务器上的部署发现了这个问题。

我最好的猜测是新服务器上有某种不同的环境设置。有没有人见过这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:27:39.220

看看这个[JSP EL、JSF EL 和 Unified EL 之间的区别](https://stackoverflow.com/questions/4812755/difference-between-jsp-el-jsf-el-and-unified-el)

您拥有的不同部署环境可能使用不同的 JSP 实现，这就是您遇到的情况。

# c# - 在xml中如何检查解析过程中是否需要元素值

> ID：15708107
> 
> 赞同：0
> 
> 时间：2013-03-29T17:16:11.957
> 
> 标签：c#, xml

我有一个 dtd 文件。在此文件中，元素需要一些属性，例如：

```
<!ELEMENT NAME (LASTNAME)>
<!ATTLIST NAME SEX CDATA #REQUIRED > 
```

现在在解析文件时，如果属性现在存在，则会引发错误并结束解析；这很好。

但是如果 NAME 元素是这样的：

```
<NAME SEX="">
 <LASTNAME>Doe</LASTNAME>
</NAME> 
```

属性存在但没有价值的地方。

在针对 dtd 解析 xml 时如何检查这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:34:31.343

您可以使用`XmlReader.HasValue` [See here](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.hasvalue.aspx)。

或`XmlValidatingReader.HasValue` [见这里](http://msdn.microsoft.com/en-us/library/system.xml.xmlvalidatingreader.hasvalue%28v=vs.71%29.aspx)。

**更新：**

```
var elemList = doc.GetElementsByTagName(...);
for (int i = 0; i < elemList.Count; i++)
{
     var attrVal = elemList[i].Attributes["Name"].Value;
     if (null == attrVal)
     {
         // no value
     } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:49:26.733

这超出了 DTD 提供空值检查的功能。

您可以做两件事：
1\. 添加默认值，如“NoData”
2\. 在 XML 中添加 minLength：`minLength="2"`

但正如 monocadad 建议的那样，您可以使用 HasValue 检查值。

# css - 如何让包含和图像元素的 div 具有与图像相同的高度

> ID：15708114
> 
> 赞同：0
> 
> 时间：2013-03-29T17:17:03.017
> 
> 标签：css

我有这个 html 代码：

```
<div>
    <img src="http://placehold.it/319x300" alt="">
<div> 
```

这个CSS：

```
*{margin: 0; padding: 0;}
div{
    background: red;
    width: 319px;
    height: auto;
}
img{
    width: 100%;
    height: auto;
} 
```

`div`但是底部显示的背景颜色。有没有办法使容器与图像的高度相同？在我正在处理的网站上，我有 Eric 重置样式，也没有`padding`或`margin`与此冲突。这是示例代码[http://jsfiddle.net/ESmZW/1/](http://jsfiddle.net/ESmZW/1/) 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:19:29.863

一种快速的方法是将`vertical-align:top`属性添加到图像

```
img{
    width: 100%;
    height: auto;
    vertical-align:top;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ESmZW/4/)**

您还可以将图像向左浮动并将溢出：自动规则添加到 div 中，就像在这个**[jsFiddle 示例](http://jsfiddle.net/j08691/ESmZW/7/)**中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:20:19.090

在图像上设置“显示：块”。

```
img {
    width: 100%;
    height: auto;
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:24:15.313

您可以使用绝对/相对定位：

```
*{margin: 0; padding: 0;}
div{
    position:relative;
    background: red;
    width: 319px;
    height: auto;
}
img{
    position:absolute;
    width: 100%;
    height: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:29:37.333

@aurel 如果您只想让 div 成为图像的大小，为什么不将它的高度和宽度设置为图像的大小？您的 HTML 也不会关闭您的 div。请参阅我对[jsfiddle](http://jsfiddle.net/ESmZW/12/)的修改。

```
<div>
    <img src="http://placehold.it/319x300" width="319" height="300" alt="">
</div>

body {
    margin:0;
}

div {
    background: red;
    width: 319px;
    height: 300px;
} 
```

# ruby-on-rails - 如何为 self.method 创建 rspec 测试？

> ID：15708122
> 
> 赞同：6
> 
> 时间：2013-03-29T17:17:27.830
> 
> 标签：ruby-on-rails, rspec

我目前在我的`User`课堂上有这个方法：

```
def self.authenticate(email, password)
  user = User.find_by_email(email)
  (user && user.has_password?(password)) ? user : nil
end 
```

如何对此进行 rspec 测试？

我试图运行`it { responds_to(:authenticate) }`，但我认为 self 的东西与身份验证不同。

我仍然是 Rails 的初学者，任何有关如何测试和解释`self`关键字的提示将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:28:10.293

```
describe User do
  let(:user) { User.create(:email => "foo@bar.com", :password => "foo") }

  it "authenticates existing user" do
    User.authenticate(user.email, user.password).should eq(user)
  end

  it "does not authenticate user with wrong password" do
    User.authenticate(user.email, "bar").should be_nil
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:56:03.617

@depa 的答案很好，但为了替代方案，因为我更喜欢较短的语法：

```
describe User do
  let(:user) { User.create(:email => email, :password => password) }

  describe "Authentication" do
    subject { User.authenticate(user.email, user.password) }

    context "Given an existing user" do
      let(:email) { "foo@bar.com" }
      context "With a correct password" do
        let(:password) { "foo" }
        it { should eq(user) }
      end
      context "With an incorrect password" do
        let(:password) { "bar" }
        it { should be_nil }
      end
    end
  end
end 
```

除了我对语法的偏好之外，我相信这比其他风格有两个主要好处：

*   它使覆盖某些值变得更容易（正如我在`password`上面所做的那样）
*   更重要的是，它会突出显示*未*测试的内容，例如空白密码、不存在的用户等。

这就是为什么使用`context`and`subject`和 and的组合`let`对我来说远远优于通常的风格。

# arrays - 使用循环和 sed Bash 脚本在不同目录中的文件中设置变量值

> ID：15708135
> 
> 赞同：0
> 
> 时间：2013-03-29T17:18:00.960
> 
> 标签：arrays, bash, if-statement, for-loop

我正在尝试编写一个 bash 脚本，该脚本将检查不同目录中文件中的五个变量值并相应地更新它们。由于有五个变量，我想在 for 循环中进行，但我不知道如何比较这些值。我想要的是伪代码：

```
var_f=(server_name app_name metadata1 metadata2 metadata)  #the variable name in file
var_v=(server1 app /tmp/2 tmp/3 /tmp/config.xml
for i in "${var_f[@]}"
do
   if var_f(i)~=var_v(i)
            sed -i -e 's/server_name=RANDOM_VAL/server_name=server1/g'   server.properties
    else
         then do nothing   
    fi
 done 
```

我到目前为止的代码：

```
#!/bin/bash

cd '/home/me/'
set -- $(<server.properties)
echo $server_name # jsut to see if set command is working
sed -i -e 's@server_name=@server_name=server1@g' server.properties
sed -i -e 's@app_name=@app_name=app@g' server.properties
sed -i -e 's@metadata1=@metadata1=/tmp/2@g' server.properties
sed -i -e 's@meatadata2=@metadata2=/tmp/3@g server.properties
sed -i -e 's@metadata=@metadata=/config.xml@g' server.properties
cd '/home/my/test/' 
```

如何运行 var_f 和 var_v 并比较两者？文件中 var_f 的值可使用 --set 命令获得，但我不知道如何将其与正确值 (var_v) 进行比较。此外， var_v 是正确的值，将使用 for 循环和 if 语句替换错误的值。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T11:06:13.837

我认为最好在一次 sed 运行中更新所有变量。

```
#!/bin/bash
var_f=(server_name app_name metadata1 metadata2 metadata) #variable name
var_v=(server1 app /tmp/2 /tmp/3 /tmp/config.xml)
for (( i=0; i < ${#var_f[*]}; ++i ))
do
    substitutions+="s@${var_f[$i]}=\S*@${var_f[$i]}=${var_v[$i]}@;"
done
sed -i "$substitutions" /home/me/server.properties 
```

您是否对每次脚本运行时都重写文件感到非常困扰？据推测，将当前值与正确值进行比较需要更长的时间。

# z3 - 在未解释的函数中打印/计算值

> ID：15708137
> 
> 赞同：0
> 
> 时间：2013-03-29T17:18:02.447
> 
> 标签：z3

我有一个未解释的函数，其值是由一些约束计算的。

Z3给出的模型包含这些陈述——

```
 (define-fun matrix!2 ((x!1 Int) (x!2 Int)) Int
    (ite (and (= x!1 0) (= x!2 5)) 10
    (ite (and (= x!1 1) (= x!2 5)) 11
    (ite (and (= x!1 0) (= x!2 1)) 1
    (ite (and (= x!1 0) (= x!2 2)) 3
    (ite (and (= x!1 0) (= x!2 3)) 5
    (ite (and (= x!1 0) (= x!2 4)) 7
      0)))))))

  (define-fun k!0 ((x!1 Int)) Int
    (ite (>= x!1 0) (ite (>= x!1 1) 1 0) (- 1)))

  (define-fun k!1 ((x!1 Int)) Int
    (let ((a!1 (ite (>= x!1 3) (ite (>= x!1 4) (ite (>= x!1 5) 5 4) 3) 2)))
      (ite (>= x!1 1) (ite (>= x!1 2) a!1 1) 0)))

  (define-fun matrix ((x!1 Int) (x!2 Int)) Int
    (matrix!2 (k!0 x!1) (k!1 x!2))) 
```

现在，我想看看 `(matrix 0 0), (matrix 2 0), (matrix 2 2)`etc的实际值是多少。

问题 ：

1.  如何使用 SMT2 格式打印值？
2.  是否可以/容易使用 C API 打印它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:05:23.407

下面的呢？

```
(declare-fun m05 () Int)
(declare-fun m15 () Int)
(assert (= m05 (matrix 0 5)))
(assert (= m15 (matrix 1 5)))
(check-sat)
(get-model) 
```

# c# - 邮件后字符串？

> ID：15708138
> 
> 赞同：1
> 
> 时间：2013-03-29T17:18:04.357
> 
> 标签：c#, string, postmessage

我有一个用 Autoit 编写的脚本，我正在尝试将其转换为 C#，以便在以后拥有更多功能。它最终具有的主要功能是将文本发送到我打开的游戏的命令（游戏内文本）。我想要做的是在 Autoit 中获得与 Send() 函数相同的功能。

我一直在阅读并得出结论，Postmessage 和 Sendmessage 将是最好的，因为它们能够将其发送到当前未激活的窗口。有没有办法用 PostMessage 发送刺痛信息？我尝试使用 Sendmessage，当它向游戏发送按键时，其中一些按键未被接受，但发布消息似乎让它们正常工作。

**问题：**是否可以使用 Postmessage() 发送字符串和变量？如果有怎么办？

谢谢！我还是 C# 的新手，并试图从一种更简单的语言中实现飞跃。（自动）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:29:21.793

如果您想发送密钥（我相信 Send 在 Autoit 中就是这样做的），您需要发送 WM_KEYDOWN 消息并将虚拟密钥作为 wParam 发送：

```
const UInt32 WM_KEYDOWN = 0x0100;
const int VK_A = 0x41;

[DllImport("user32.dll")]
static extern bool PostMessage(IntPtr hWnd, UInt32 Msg, int wParam, int lParam); 
```

然后要使用它，您需要窗口句柄：

```
var windowHandle = System.Diagnostics.Process.GetProcessesByName("someprocess")[0].Handle;
PostMessage(windowHandle, WM_KEYDOWN, VK_A, 0); 
```

可以在此处找到 KeyCode 列表：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd375731 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:19:48.330

您不能使用`PostMessage`.

因为您正在尝试跨进程边界发送文本，所以需要将该文本从发送者的进程编组到接收者的进程。这将涉及在接收进程的堆上分配一个字符串。因为消息是异步传递的，所以需要一种机制让消息的接收者释放该编组的字符串。但不存在这样的机制。

即使对于使用 传递的同步消息`SendMessage`，也只有某些消息执行字符串编组。只有由系统定义并设计用于携带字符串有效负载的消息才能执行跨进程编组。即便如此，也只是打算跨进程使用的消息。因此，您不能使用用户定义的消息来跨进程发送字符串`SendMessage`。

您将需要找到功能更强大的 IPC 机制。或逐个字符发送文本。

# python - 如何从numpy数组中提取元素

> ID：15708141
> 
> 赞同：2
> 
> 时间：2013-03-29T17:18:26.083
> 
> 标签：python, numpy

```
ls_ord_symbols     = np.zeros((len(na_csv_orders), 1), dtype='S5')

>>> print ls_ord_symbols
[['AAPL']
 ['IBM']
 ['GOOG']]

>>> print type(ls_ord_symbols)
<type 'numpy.ndarray'>
>>> print type(ls_ord_symbols[0])
<type 'numpy.ndarray'>
>>> print ls_ord_symbols[0][0]
AAPL
>>> print type(ls_ord_symbols[0][0])
<type 'numpy.string_'>
>>> print str(ls_ord_symbols[0][0])
AAPL
>>> print type(str(ls_ord_symbols[0][0]))
<type 'str'> 
```

问题> 我需要使用原始类型提取存储在 numpy.array 中的每个元素。在这里，`ls_ord_symbols`将字符串存储在 numpy.array 中。

我必须使用以下方式来提取原始元素：

```
str(ls_ord_symbols[i][0]) 
```

给定索引，有没有更好的方法来做到这一点`i`？基本上，我希望简单地获取 ['AAPL', 'IBM', 'GOOG'] 或 'AAPL', 'IBM', 'GOOG' 的列表作为每个单独的字符串，同时使用索引遍历这个 numpy.array`i`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:53:04.760

```
#!/usr/bin/env python
import numpy as np
ls_ord_symbols = np.zeros((3, 1), dtype='S5')
ls_ord_symbols[0,0] = 'AAPL'
ls_ord_symbols[1,0] = 'IBM'
ls_ord_symbols[2,0] = 'GOOG'
mylist = [ls_ord_symbols[i,0]
          for i in xrange(ls_ord_symbols.shape[0])]
print repr(mylist) 
```

# javascript - 将 javascript 变量链接到对象值。

> ID：15708146
> 
> 赞同：1
> 
> 时间：2013-03-29T17:18:54.020
> 
> 标签：javascript, arrays, javascript-objects

我正在查看 Backbones v1.0.0 源代码并注意到一些有趣的东西。在 Backbone.Events 对象中，“ **on** ”方法似乎将变量*链接*到对象值：

```
 on: function(name, callback, context) {
     if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;
     this._events || (this._events = {});
     var events = this._events[name] || (this._events[name] = []);
     events.push({callback: callback, context: context, ctx: context || this});
     return this;
}, 
```

“ **events** ”变量设置为“ **this._events[name]** ”值，该值可以是现有数组或设置为空数组。奇怪的部分是将一个对象推入这个数组的下一行。推送之后，如果您现在检查“ **this._events[name]** ”的值，它现在在其数组的末尾有那个新对象。在我看来，这两者本质上是*联系在一起*的；当您更新一个时，另一个也会更新。

我以前没有遇到过这样的事情，做一个简单的浏览器控制台测试可以确认这种行为。你更新一个，另一个也得到更新。它似乎只适用于数组的对象值。谁能解释这里发生了什么？我有点困惑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:22:14.213

在该`var events = this._events[name] || (this._events[name] = []);`行之后，`events`变量和`this._events[name]`指向**同一个**数组。因为它们都指向同一个数组，所以不管你是`events.push(...)`还是`this._events[name].push(...)`，它都会将一个元素推送到两个东西都指向的一个数组上。

这与此完全相同：

```
var a = [];            // Create an empty array, reference it from `a`
var b = a;             // Now, `b` and `a` both point to the same array
a.push("foo");         // Put an entry in the array
console.log(a.length); // "1", unsurprisingly
console.log(b.length); // "1", because both `a` and `b` point to the same array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:24:33.310

> 你更新一个，另一个也得到更新。

您只有一个数组，并且正在更新。

Think of variables as "pointers", when they have an object as a value (yes an array counts as an object). The variable is not the object, it simply holds a reference to that object.

This can be demonstrated more simply by this snippet:

```
var a = [];
var b = a;
a.push('Hello!');
alert(b[0]); // Hello! 
```

You only have one array here, and both the `a` and `b` variables point to that same array. You modify that array, and those modifications can be fetched from any variable that points to that array.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:23:22.040

实际上正在发生的事情是一种将事件初始化为数组的简单方法（如果它尚不存在）。事件是一个指向它的指针，`this._events[name]`它本身是一个指向数组的指针。如果该数组不存在，则将其初始化为一个新数组。

试试这个：

```
var x = false || 2;
console.log(x);
x = 1 || 2;
console.log(x); 
```

# java - FTPClient.storeFile() 上传缓慢然后不起作用

> ID：15708147
> 
> 赞同：2
> 
> 时间：2013-03-29T17:18:56.427
> 
> 标签：java, android, eclipse, ftp, ftp-client

Android n00b 试图找出文件服务器上传。我在尝试使用中的`storeFile`方法将文件上传到我在 Android 中的 FTP 服务器时遇到了很多麻烦`FTPClient`，在 Galaxy Nexus 上进行测试。两个问题。首先，它运行得非常非常慢——比如在代码继续运行之前，对于几个字节的文件需要一分钟或更长时间（因此我的显示器经常在运行完成之前进入睡眠状态）。其次，完成后没有文件到达服务器。但是代码确实继续运行，据我所知，我没有收到任何明确的错误消息告诉我出了什么问题。但第三，在所有这些（和注销）之后，它给了我一个*NullPointerException*并中止活动。

（还有第四个问题，`NetworkInfo.getActiveNetworkInfo()`即使我没有连接，它似乎总是返回 CONNECTED，但这似乎无关，我想专注于更大的问题。）

这是我的代码： [`Reuse.logIt`是我用来打印到 logcat 并`printToUI`在`setText`显示器上打印的方法。正如你可能知道的那样，我试图给自己很多路标来弄清楚发生了什么。]

```
public void uploadFile(String filename, File theFile)
{

      Reuse.logIt(TAG, "UploadFile did run."); // test that at least    
      FTPClient theClient = new FTPClient();

      // It's probably insecure to do it this way, but first I just want to make it work.
      final String theSite = [the name of my site];
      String username = [my username];
      String password = [my password];

        // get network status
        Context theContext = getApplicationContext();
        ConnectivityManager cMgr = (ConnectivityManager)theContext.getSystemService(Context.CONNECTIVITY_SERVICE);

        NetworkInfo netInfo = cMgr.getActiveNetworkInfo();

        String beginStatus = netInfo.getState().toString();
        // always says CONNECTED whether we're connected or not. 
        String networkStatus = "Network status = "+beginStatus;

        Reuse.logIt(TAG, networkStatus); 

        // pass the network status where it can be displayed in a different window's text. 
        Brouillon instance = (Brouillon) theContext;
        instance.setDataResult(networkStatus);

        if (beginStatus == "CONNECTED")
        // If we don't have a network connection, don't upload the file.
        {

            try
            {               
                theClient.connect(theSite); 

                // When login succeeds, the login method returns true.
                boolean login = theClient.login(username, password); 

                if (login)
                {
                    // success!
                    Reuse.logIt(TAG, "Logged in successfully to "+theSite+"!");
                    printToUI("ftp_connect", "Logged in successfully to "+theSite+"!");

                    Reuse.logIt(TAG, "The code does continue after logging in.");

                    // Now upload the file.
                    String ftpPath = "/brouillon/";
                    String filenameOnFTP = ftpPath+filename;
                    Reuse.logIt(TAG, "It defined the variables.");

                    FileInputStream fis = new FileInputStream(theFile);
                    Reuse.logIt(TAG, "It created the FileInputStream too.");

                    theClient.storeFile(filenameOnFTP, fis);

                    Reuse.logIt(TAG, "We created a file called "+filenameOnFTP+".");
                    printToUI("upload","We created a file called "+filenameOnFTP+".");

                }
                else
                {
                    Reuse.logIt(TAG, "Could not connect to "+theSite+".");
                    printToUI("ftp_connect","Could not connect to "+theSite+".");
                }

                boolean logout = theClient.logout();
                if (logout) 
                {
                    Reuse.logIt(TAG, "Logged out successfully.");
                    printToUI("loggedout","Logged out successfully.");
                }
                else 
                {
                    Reuse.logIt(TAG, "Logout failed!");
                    printToUI("loggedout","Logout failed!");
                }

            }
            catch(IOException e)
            {
                e.printStackTrace(); 
                Reuse.logIt(TAG, "Got error message "+e.toString()+".");

            }
        }
        else
        {
            // For testing purposes, abort the program if not connected. Can change that later.
            Reuse.logIt(TAG, "beginStatus was not CONNECTED!");
            System.exit(0);
        }                   
    }

} 
```

这是我的日志猫。（设置为错误模式。如果提供更详细的模式会有所帮助，我很乐意这样做，但我首先将其省略，因为它会使这篇文章变得很长。）

```
03-29 13:08:13.400: E/SyncStatus(8764): Sync button pushed.
03-29 13:08:13.400: E/SyncStatus(8764): File created and closed.
03-29 13:08:13.400: E/SyncStatus(8764): UploadFile did run.
03-29 13:08:13.431: E/SyncStatus(8764): Network status = CONNECTED
03-29 13:08:14.556: E/SyncStatus(8764): Logged in successfully to [site name]!
03-29 13:08:14.556: E/SyncStatus(8764): The code does continue after logging in.
03-29 13:08:14.556: E/SyncStatus(8764): It defined the variables.
03-29 13:08:14.556: E/SyncStatus(8764): It created the FileInputStream too.
03-29 13:10:32.283: E/wpa_supplicant(452): android_priv_cmd: failed to issue private commands
03-29 13:11:28.603: E/SyncStatus(8764): We created a file called /brouillon/filename.txt.
03-29 13:11:28.705: E/SyncStatus(8764): Logged out successfully.
03-29 13:11:28.713: E/AndroidRuntime(8764): FATAL EXCEPTION: main
03-29 13:11:28.713: E/AndroidRuntime(8764): java.lang.NullPointerException
03-29 13:11:28.713: E/AndroidRuntime(8764):     at com.loveofallwisdom.brouillon.SyncStatus$2.run(SyncStatus.java:174)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at android.os.Handler.handleCallback(Handler.java:725)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at android.os.Looper.loop(Looper.java:137)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at java.lang.reflect.Method.invokeNative(Native Method)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at java.lang.reflect.Method.invoke(Method.java:511)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-29 13:11:28.713: E/AndroidRuntime(8764):     at dalvik.system.NativeStart.main(Native Method)
03-29 13:11:38.931: E/wpa_supplicant(452): android_priv_cmd: failed to issue private commands 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T17:56:58.727

请尝试这样做：

```
public static String uploadOrder(String fileName)
{

    String m;

    FTPClient con = null;

    m = "Conn failed";

    try
    {
       con = new FTPClient();

       con.connect("xxx.xxx.210.176");

       //username and password for ftp server
       if (con.login("ftpxxx@xxxxx", "pass"))
       {
          con.enterLocalPassiveMode();//passive mode - IMPORTANT
          con.setFileType(FTP.ASCII_FILE_TYPE);//only for txt file ACII mode, for rest binary mode
          String data = Environment.getExternalStorageDirectory().getPath() +"/"+ fileName; //data location 
          FileInputStream in = new FileInputStream(data);
          File f = new File(data);          

          con.changeWorkingDirectory("xxxxxx");//        
          if(con.changeWorkingDirectory("Orders"))//
          {
             Log.i("FTP","Got into directory");
          }
          if(!con.changeWorkingDirectory(MainPage.fb_id))//
          {

              in.close();
              con.logout();
              con.disconnect();
              return m;
          }

          if(con.storeFile(fileName, in))
          {               
              m = "Upload success!";
          }
          if(!f.exists()) m = "File not exists.";
          in.close();
          //logging out
          con.logout();
          con.disconnect();
       }
       else 
       {                     
           m = "Unsuccessful";
       }
    }
    catch (Exception e)
    {
          m = e.getMessage();
    }
    return m;
} 
```

# python - 使用 Python 和 os.umask 使组共享目录可写

> ID：15708153
> 
> 赞同：0
> 
> 时间：2013-03-29T17:19:33.100
> 
> 标签：python, unix, permissions, file-permissions

目前目录是

`/var/www/html/sitename_com/`. 该目录归 meder.meder 所有。当我创建这个目录时，不确定我在什么 umask 下。

我的脚本绑定到 pyinotify 并在我`mkdir www`绑定事件处理程序后设置：

组`web`和用户`publisher`通过：

```
 uid = pwd.getpwnam( 'publisher' ).pw_uid
  gid = grp.getgrnam( 'web' ).gr_gid

  os.chown( path, uid, gid ) 
```

umask 到`0002`：

```
 current_umask = os.umask(0)
  print 'umask is ' + str(current_umask)

  os.umask(0002)
  current_umask = os.umask(0)
  print 'updated umask is ' + str(current_umask) 
```

我也是`chmod`权限。0664 用于文件，0775 用于目录，通过：

```
 os.chmod( path, int( "0664", 8 ) ) # files 
```

在我`mkdir`www 之后，这是我的日志报告：

```
pre fix its 0755
fixing permission to 0775
fix path is /var/www/html/sitename/www
post fix its 0775
umask is 0
updated umask is 2
former user is meder and former group is meder
attempting to set user to publisher and group to web
post chown user is publisher and former group is web 
```

我无法`www`与`meder`组中的用户创建文件`web`。

```
cd www
meder@oskol:/var/www/html/sitename_com/www$ touch file.jpg
touch: cannot touch `file.jpg': Permission denied 
```

我必须为我的用户创建`web`主要组吗？`meder`我是否因为没有添加足够的 0 而弄乱了 umask 部分？

# assembly - i386 实模式。关于从内存加载数据的一些问题

> ID：15708158
> 
> 赞同：0
> 
> 时间：2013-03-29T17:19:47.663
> 
> 标签：assembly, x86, nasm, real-mode

我只是接近机器级 x86 编码，所以请原谅我的问题的琐碎性。以下代码旨在成为一个简单的引导加载程序。它将软盘的某些扇区转储到内存中，然后跳转到加载的代码。在加载的代码中，我试图从内存变量中读取，但没有成功，如评论中所述。

```
 [ORG 0]

            jmp 07C0h:start     ; Goto segment 07C0

    start:
            ; Update the segment registers
            mov ax, cs
            mov ds, ax
            mov es, ax

    reset:                      ; Reset the floppy drive
            mov ax, 0          
            mov dl, 0          
            int 13h            
            jc reset         

    read:
            mov ax, 1000h       ; ES:BX = 1000:0000
            mov es, ax          
            mov bx, 0           

            mov ah, 2           ; Load disk data to ES:BX
            mov al, 5           ; Load 5 sectors
            mov ch, 0           ; Cylinder=0
            mov cl, 2           ; Sector=2
            mov dh, 0           ; Head=0
            mov dl, 0           ; Drive=0
            int 13h             ; Read!

            jc read             ; on error

            jmp 1000h:0000      ; Jump to the program

    times 510-($-$$) db 0
    dw 0AA55h

       ;     ==  Loaded code from second floppy sector  ==
prog:
        mov     ah,     0x0E       ; Prints a char. This one works: the '-'
        mov     al,     '-'        ;   is printed.
        mov     bx,     0
        int     10h

        mov     bx,     0 
a:                                 
        mov     al,     [L1+bx]    ; Should read from L1 and print out chars.
        inc     bx                 ;   But it prints only white spaces. Why?
        int     10h
        cmp     bx,     10
        jz      h
        jmp a

        cli
        hlt

        L1 db "0123456789"        ; my string 
```

我不明白为什么它不起作用。我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:30:50.510

如果上面是单个汇编文件，则`jmp 1000h:0000`改为`jmp 0FE0h:200h`，这将适当补偿`ip`从一路累积的寄存器偏移量，`[ORG 0]`并且仍然将控制权转移到物理地址`0x10000`。

除此之外，在代码的第二部分设置`ds`为`cs`（或）。`0FE0h`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:31:49.580

“从软盘加载”部分编译的基本偏移量与其加载的偏移量不同，您需要重新计算其地址

您也可以使用`ORG 7C00h`并节省自己的跳跃，不同之处在于您的段将是 0 而不是 07C0h

您可以将新的偏移量计算为 [L1-prog]，也可以重新排序代码：

```
 jmp 1000h:000Ah      ; Jump to the program
....
L1          db "0123456789"        ; my string
prog:
        mov     ah,     0x0E   

...
        mov     al,     cs:[bx] 
```

我没有要测试的汇编程序，但你明白了 - 不需要浮动地址，把它放在开头

我粗略估计您在 1000H 段中的实际偏移量约为 32-ish，这就是您翻译的 L1 大致所在的位置。相反，您的 L1 被计算为大约 550 的编译时间，因此您实际上是在尝试从您读取的第二个扇区加载一些东西。第二个加载扇区的开头是否有一些空白字符或零？

# javascript - JSON点符号到字符串

> ID：15708161
> 
> 赞同：0
> 
> 时间：2013-03-29T17:19:58.643
> 
> 标签：javascript, jquery, json, syntax, notation

我在我的 javascript 中使用 JSON，并试图获取点符号表示的字符串值。

例如`AAA.BBB[0].CCC.DDD[5].EEE`= JSON 点符号格式的 123。

但我想将值`AAA.BBB[0].CCC.DDD[5].EEE`作为字符串获取，以便我可以将其保存以供以后使用，以便直接修改我的 JSON 代码。

Javascript 或 jQuery 中是否有可以返回字符串值表示的方法？

*编辑我正在将 JSON 数据转换为列表结构，并且我想将`AAA.BBB[0].CCC.DDD[5].EEE`格式保存为 id，因此当用户修改该列表项的内容时，它会直接修改 JSON 数据。是否有更好的方法将位置保存在 id 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:23:35.033

为什么不只存储对它内部部分的引用呢？将其存储为字符串没有多大意义。如果您只想以更短的方式访问它，那么存储引用更有意义。

```
var theCollection = AAA.BBB[0].CCC.DDD[5];
alert( theCollection.EEE ); 
```

然后可以将此引用存储在元素上并稍后检索。

```
$(someelement).data("jsonref",theCollection);
var data = $(someelement).data("jsonref");
alert(data.EEE);
data.EEE = "foobar";
data = $(someelement).data("jsonref");
alert( data.EEE ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:24:47.653

```
var j_string = JSON.stringify(AAA.BBB[0].CCC.DDD[5].EEE); 
```

如果您只想将值作为字符串返回，请执行以下操作：

```
var j_string_value = AAA.BBB[0].CCC.DDD[5].EEE.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:23:42.950

`eval`如果您希望在该路径上执行操作，您可能可以在字符串上使用，但`eval`非常危险，因为它允许执行任意代码。如果您想对整个结构进行 JSON 字符串化，可以[使用 JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)，它是大多数新浏览器中的标准功能，Doug Crockford 对旧浏览器有自己的[看法](https://github.com/douglascrockford/JSON-js)。

# java - java.net.MalformedURLException：无协议：/intl/en/policies/ GET 请求

> ID：15708165
> 
> 赞同：2
> 
> 时间：2013-03-29T17:20:17.407
> 
> 标签：java, http, get, malformedurlexception

我一直在制作一个简单的程序，它遍历页面中的所有链接，访问它们，然后递归。但它似乎一旦出现错误就停止了

```
java.net.MalformedURLException: no protocol: /intl/en/policies/
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at me.dylan.WebCrawler.WebC.sendGetRequest(WebC.java:67)
at me.dylan.WebCrawler.WebC.<init>(WebC.java:27)
at me.dylan.WebCrawler.WebC.main(WebC.java:36) 
```

我的代码：

```
package me.dylan.WebCrawler;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;

import javax.swing.text.BadLocationException;
import javax.swing.text.EditorKit;
import javax.swing.text.MutableAttributeSet;
import javax.swing.text.html.HTML;
import javax.swing.text.html.HTMLDocument;
import javax.swing.text.html.HTMLEditorKit;

public class WebC {
//  FileUtil f;
    int linkamount=0;
    ArrayList<URL> visited = new ArrayList<URL>();
    ArrayList<String> urls = new ArrayList<String>();
    public WebC() {

        try {
//          f= new FileUtil();
            sendGetRequest("http://www.google.com");
        } catch (IOException e) {
            e.printStackTrace();
        }
        catch (BadLocationException e) {
            e.printStackTrace();
        }
    }
    public static void main(String[] args) {
        new WebC();
    }
    public void sendGetRequest(String path) throws IOException, BadLocationException, MalformedURLException {

        URL url = new URL(path);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setRequestMethod("GET");
        con.setRequestProperty("Content-Language", "en-US");
         BufferedReader rd = new BufferedReader(new InputStreamReader(con.getInputStream()));
         EditorKit kit = new HTMLEditorKit();
         HTMLDocument doc = (HTMLDocument)kit.createDefaultDocument();
         doc.putProperty("IgnoreCharsetDirective", new Boolean(true));
         kit.read(rd, doc, 0);

         //Get all <a> tags (hyperlinks)
         HTMLDocument.Iterator it = doc.getIterator(HTML.Tag.A);
         while (it.isValid())
         {
             MutableAttributeSet mas = (MutableAttributeSet)it.getAttributes();
             //get the HREF attribute value in the <a> tag
             String link = (String)mas.getAttribute(HTML.Attribute.HREF);
             if(link!=null && link!="") {
                 urls.add(link);
             }

             it.next();
         }
         for(int i=urls.size()-1;i>=0;i--) {
             if(urls.get(i)!=null) {
                if(/*f.searchforString(urls.get(i)) ||*/ visited.contains(new URL(urls.get(i)))) {
                    urls.remove(i);
                    continue;
                } else {
                    System.out.println(linkamount++);
                    System.out.println(path);
                    visited.add(new URL(path));
                    //f.write(urls.get(i));
                    sendGetRequest(urls.get(i));
                }
                 try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
             }
         }           
    }
} 
```

老实说，我不知道如何解决这个问题。显然谷歌有一个不是有效网址的 href 标签，我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:25:00.817

您必须在 URL 部分附加 baseURl。URL 对象需要它的格式为[http://abc.com/int/etc/etc](http://abc.com/int/etc/etc)。

虽然表单将采用相对格式的格式。简单的方法是在您获得的每个 HREF 中调用 get 之前附加[http://www.google.com 。](http://www.google.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:26:41.870

A quick fix would be to append `urls.get(i)` to `requestPath` before calling. That would give it a protocol and a domain to use. The only catch is that if you don't scan the current url in the loop for a protocol and domain, you may end up like this:

`http://www.google.com/http://www.yahoo.com/policies`

# imacros - 我想在这个 imacro facebook 中自动重新加载 facebook 页面代码，这与代码不同

> ID：15708168
> 
> 赞同：-2
> 
> 时间：2013-03-29T17:20:25.703
> 
> 标签：imacros

我想在 30 个 facebook 粉丝页面自动重新加载 facebook 页面时自动重新加载页面，并且再次与 start 不同，此页面簿页面中包含的代码与 imacro 代码不同，在哪里？此代码显示在下面。

```
var unlike,rnlike;
unlike =  "CODE:";
unlike += "VERSION BUILD=7401110 RECORDER=FX" + "\n";
//unlike += "SET !ERRORIGNORE YES" + "\n";
unlike += "TAB T=1" + "\n";
unlike += "'URL GOTO=https://www.facebook.com/browse/other_connections_of/" + "\n";
unlike += "TAG POS={{j}} TYPE=SPAN ATTR=CLASS:uiButtonText&&TXT:Unlike" + "\n";
unlike += "wait seconds=2" + "\n";
var n=prompt("Please enter number of unlikes:");
var start;
start = iimPlay("CODE:URL GOTO=https://www.facebook.com/browse/other_connections_of/");

main:
{
    for (j=1;j<=n;j++)
    {
    iimSet("j", j)
    rnlike=iimPlay(unlike);
    if (rnlike == -101) // abort script if user presses Stop button
            {
            break main;
            }
    if (rnlike == -802)//refresh if timeout
            {   
            iimPlay("CODE:REFRESH",30);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:58:19.413

```
 main:
    {
    var count=0;
        for (j=1;j<=n;j++)
        {
    if(count==30){
    iimPlay("CODE:REFRESH",30);
    count=0;
    j=0;
    continue;
    }     
    count++;
        iimSet("j", j)
        rnlike=iimPlay(unlike);
        if (rnlike == -101) // abort script if user presses Stop button
                {
                break main;
                }
        if (rnlike == -802)//refresh if timeout
                {   
                iimPlay("CODE:REFRESH",30);
                }
}} 
```

# javascript - 你如何让侧边栏填满空间？

> ID：15708172
> 
> 赞同：3
> 
> 时间：2013-03-29T17:20:44.540
> 
> 标签：javascript, css

将[这种](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)技术用于粘性页脚并给出[这个](http://jsfiddle.net/AfwzD/2/)例子。

```
* { margin:0; }
html, body { height:100%; }
#wrap { 
    min-height:100%;
    height:auto !important;
    height:100%;
    margin:0 0 -47px;
}
#side { float:left; background:#ccc; width:100px; overflow:hidden; }
#body { float:left; background:#aaa; width:300px; }
#foot, .push { height:47px; }
#foot { background:#eee; } 
```

如何使侧边栏和/或内容框填满页眉和页脚之间的空间？

我尝试将高度设置为 100%，但它（不足为奇）似乎并不需要。而且我无法设置固定高度，因为它仍然会在更大的屏幕上中断。

有人想对此有所了解吗？

编辑：为这个问题选择的答案不适用于具有半透明页脚的设计。在这里显示：http: [//jsfiddle.net/AfwzD/23/](http://jsfiddle.net/AfwzD/23/)

因此，我想将其添加到问题中。你如何使它适用于这种类型的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:31:14.247

这有点棘手。我发现的唯一一种方法是设置巨大的 padding-bottom 和相反的边距来补偿它。另外你必须给`#wrap` `overflow: hidden`：

```
#body {
    ...
    padding: 80px 20px 1050px;
    margin-bottom: -1000px;
} 
```

演示：http: [//jsfiddle.net/AfwzD/21/](http://jsfiddle.net/AfwzD/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:29:22.310

你只能通过javascript来做到这一点。有点像这样。

```
window.addEventListener("resize", function ()
{
    /*var nContentHeight = window.innerHeight - headerHeight - footerHeight;*/
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:29:32.987

您需要清除浮动元素，以便将它们放回页面流中。

**HTML**

```
<div id="side">...</div>
<div id="body">...</div>
<div class="clear"></div> 
```

**CSS**

```
.clear { clear:both; } 
```

# vb.net - 我的表格无法加载

> ID：15708173
> 
> 赞同：0
> 
> 时间：2013-03-29T17:20:50.187
> 
> 标签：vb.net, error-handling

这是我的程序的 LoginForm 的代码。当我输入我的详细信息并单击确定时；它只是冻结并且没有错误出现，我该怎么办？

我不知道该怎么做。我检查了单击确定后加载的表单中的问题，这不是问题。我删除了要检查的代码，但它仍然冻结。

```
 Private Sub OK_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OK.Click
    Dim Servtxt As String
    Dim Usertxt As String
    Dim Passtxt As String
    Dim tbltxt As String
    Dim FILE_NAME As String = "C:/Program Files/Business Elements/Dashboard System Files/LoginServerDAT.txt"
    Try
        Dim lines = System.IO.File.ReadAllLines("C:/Program Files/Business Elements/Dashboard System Files/LoginServerDAT.txt")
        Servtxt = lines(0)
        Usertxt = lines(1)
        Passtxt = lines(2)
        tbltxt = lines(3)
    Catch ex As Exception
        MessageBox.Show("Error! The server configuration file does not exist. Please setup the server information and save it.", "Woops, something went wrong...", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try
    'Open Connection
    Dim da As MySqlDataAdapter = New MySqlDataAdapter
    Dim SQLConnection As MySqlConnection = New MySqlConnection
    Dim ServerString As String = "server=" & Servtxt & ";user id=" & Usertxt & ";password=" & Passtxt & ";database=" & tbltxt
    SQLConnection.ConnectionString = ServerString
    Dim MsgResponse As MsgBoxResult
    Try
        SQLConnection.Open()
    Catch ex As Exception
        MsgResponse = MessageBox.Show("Connection could not be established to the server, but you can still run in offline mode. If you want to do so then click YES. If otherwise, click NO", "Woops! Something went wrong..", MessageBoxButtons.YesNo)
        If MsgResponse = MsgBoxResult.Yes Then
            Home.Show()
            Home.ConnectedLabel.Text = "Offline Mode. See website for troubleshooting tips."
            Home.ConnectedLabel.ForeColor = Color.Red
            Home.CurrentUser.Text = ""
            Home.ToolStripStatusLabel1.Visible = False
            Me.Close()
        Else
            Me.Close()
        End If
    End Try
    'Sign in..
    If SQLConnection.State = ConnectionState.Open = True Then
        Dim sqlquery = "SELECT * From Users Where Username='" & UsernameTextBox.Text & "' AND Password='" & PasswordTextBox.Text & "'"
        Dim command As New MySqlCommand
        command.Connection = SQLConnection
        command.CommandText = sqlquery
        da.SelectCommand = command
        Dim mydata As MySqlDataReader
        mydata = command.ExecuteReader
        If mydata.HasRows = 0 Then
            MessageBox.Show("Error! Incorrect Login Details. Please contact your Administrator for assistance.")
        Else
            'Check Level..
            CheckAccessLevel()

        End If
    End If
End Sub 
```

# templates - Joomla 2.5获取子类别的所有ID并在查询中进行子选择

> ID：15708179
> 
> 赞同：0
> 
> 时间：2013-03-29T17:21:17.327
> 
> 标签：templates, joomla, subquery

我用两个硬坚果绞尽脑汁。因此，这些问题联系在一起，我将它们发布在一个线程中。不幸的是，我无法提供测试示例。来吧……</p>

我在我的 Joomla 2.5 模板中使用以下查询：

```
->select(array('a.description','a.display_name','a.parent_id','a.filename','a.url', 'b.title','b.alias', 'b.id','b.catid','b.state','c.title as catTitle','c.parent_id as catparent'))
->from('#__attachments AS a')
->join('LEFT', '#__content AS b ON (a.parent_id = b.id)')
->join('INNER', '#__categories AS c ON b.catid = c.id')
->where("b.state = 1 AND c.parent_id in (23)"); 
```

这将模块表“#_ *attachments”与*“#_content”和“#_articles”连接起来。目标是获取文章的附加图片、文章标题、别名、文章 ID、类别标题、类别 ID、...

## 我的问题

1.  该查询为我提供了文章中类别的父类别的 ID（'c.parent_id as catparent'）。是否有可能有一个子选择，它也给了我这个父类别的标题（id 在 catparent 中）？

2.  因此，我只想要来自特殊子类别的文章，我的位置有一个“in”n。知道所有子类别都是 id (5) 的父类别的子类别。如何从 cat 5 中获取所有子类别的 ID。所以我可以在“b.state = 1 AND c.parent_id in ($allSubCategoryIDs)”where 子句中使用这个 ID？

亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:14:33.193

**广告 1。**

要获取父类别的标题，请添加

```
->select('parent.title AS parentTitle')
->join('left', '#__categories AS parent ON parent.id=c.parent_id') 
```

到您的查询。

**广告 2。**

由于 Joomla 将类别存储为嵌套集，因此这是通过更改

```
->where("b.state = 1 AND c.parent_id in (23)"); 
```

进入

```
->where('b.state=1')
->where('c.lft BETWEEN parent.lft AND parent.rgt') 
```

# android - 带有加载本地 html 和 javascript 的 web 视图的示例合金 Android 应用程序？

> ID：15708182
> 
> 赞同：4
> 
> 时间：2013-03-29T17:21:35.793
> 
> 标签：android, titanium, android-webview

我正在寻找一个示例 Alloy 应用程序，该应用程序在 Android 上显示一个 Webview，该应用程序加载一个带有 <script> 标记的本地 HTML 文件，该标记成功地加载了一个本地 Javascript 文件。

我正在使用 Titanium SDK 3.0.2.GA 并为 Android 2.2（模拟器）进行编译。如果有人知道问题所在，我有一个应该很容易修复的示例应用程序：

[https://github.com/jbeuckm/AndroidJsFileTest](https://github.com/jbeuckm/AndroidJsFileTest)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T02:07:33.973

这并不需要太多的努力。

**insideAssetsFolder.html**

```
<html>
  <head>
     <title>Whatever</title>
     <script src="insideAssetsFolder.js"></script>
  </head>
  <body>
    // Blah
  </body>
</html> 
```

**索引.xml**

```
<Alloy>
    <Window id="container">
        <WebView id="content" url="/insideAssetsFolder.html" />
    </Window>
</Alloy> 
```

**insideAssetsFolder.js**

```
window.onload = function(e) {
    alert('Window now presentable');
}; 
```

这几乎就是您从空白合金项目中所需要的一切。您可能需要重命名`insideAssetsFolder.js`扩展，因为 Alloy（有时）不会将其构建到最终应用程序中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T18:40:18.993

尝试重命名 assets/test.js 的扩展名。根据我的经验，由于 Titanium 编译 .js 文件，这可能会产生冲突。从 webview 调用 javascript 文件以使用 .wvjs 等备用文件扩展名时，它会有所帮助。你真的可以使用任何扩展，我只是更喜欢 wvjs，因为它可以帮助我识别我专门为 WebView 使用而包含的它的 javascript。

# c# - 如何在 mousedown 和 mousemove 事件期间更改控件属性？

> ID：15708183
> 
> 赞同：0
> 
> 时间：2013-03-29T17:21:45.170
> 
> 标签：c#

我有一组以编程方式生成的标签。我想更改标签的背景和文本，同时：

1-mouse_click 事件
2-鼠标单击并移动到其他标签（我希望用户可以一键更改一些标签（按住它）并移动到相邻标签。我应该将哪个事件用于第二个目的？我使用代码下面是 mouse_click 事件：

```
 private void labels_Click(object sender, EventArgs e)
    {
        Label lbl = (Label)sender;
        if (lbl.Text == "1")
        {
            lbl.Text = "0";
            lbl.BackColor = Color.FromArgb(225, 0, 0);
        }
        else
        {
            lbl.Text = "1";
            lbl.BackColor = Color.FromArgb(224, 224, 226);
        }
        SetHexNumbers();
    } 
```

![在此处输入图像描述](../Images/1af7368ac141d32113f8b7068d2af4f0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:27:02.670

您应该使用`MouseEnter`，但不要忘记将`Capture`sender 的属性设置为`false`。

试试这个：

```
bool isMouseDown;

private void labels_Click(object sender, EventArgs e)
{
    DoAction(sender);
}

private void labels_MouseDown(object sender, MouseEventArgs e)
{
    isMouseDown = true;
    DoAction(sender);
}

private void labels_MouseUp(object sender, MouseEventArgs e)
{
    isMouseDown = false;
}

private void label_MouseEnter(object sender, EventArgs e)
{
    if (isMouseDown)
    {
        DoAction(sender);
    }
}

private void DoAction(object sender)
{
    Label lbl = (Label)sender;
    lbl.Capture = false;           //DO NOT FORGET THIS LINE

    if (lbl.Text == "1")
    {
        lbl.Text = "0";
        lbl.BackColor = Color.FromArgb(225, 0, 0);
    }
    else
    {
        lbl.Text = "1";
        lbl.BackColor = Color.FromArgb(224, 224, 226);
    }
    SetHexNumbers();
} 
```

# xslt - XSLT：解析 .Net Web.Config 并尝试添加节点树（如果它不存在）

> ID：15708186
> 
> 赞同：3
> 
> 时间：2013-03-29T17:22:04.773
> 
> 标签：xslt, configuration

我一直在尝试使用 XSLT 来解析 .net 配置文件（web.config/app.config），然后执行不同的操作（例如替换属性和创建新元素），并且进展顺利，但现在我'一直在尝试重新创建节点树，以防部分或全部不存在。不幸的是，我还没有让它工作。

我想知道是否有人可以帮助我？

示例 Web.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="setting1" value="true" />
    <add key="setting2" value="true" />
    <add key="setting3" value="true" />
  </appSettings>
  <system.serviceModel>
    <client>
      <endpoint name="endpointName1" address="http://endpoint1/endpoint1Service.svc" binding="endpointServiceBinding" />
    </client>
  </system.serviceModel>
 </configuration> 
```

我想这样做，以便我可以添加一个新节点或其他节点，而不会干扰任何其他节点并假设它不存在。

客户端证书节点（xpath？位于下方）

```
/configuration/system.serviceModel/behaviors/endpointBehaviors
       /behavior[@name=service1BehaviorName]/clientCredentials/clientCertificate 
```

如果您害怕 web.config，他是问题的简化版本 :)

```
<Node1>
    <Node2>
        <Node3 name="1" value="value1" />
        <Node3 name="2" value="value3" />
    </Node2>
</Node1> 
```

我需要有关如何执行以下步骤的信息

1.  如果 Node2 不存在，则创建它
2.  以下任一陈述
    *   创建一个具有 name="3" 的新 Node3
    *   修改name="2"的Node3的内容

我可以编写代码来添加一个新节点，但我真的不知道如何连接它们

```
<!-- This should copy everything/be the the base rule -->
<xsl:template name="CopyAll" match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<!-- This will check and see if node2 does not exist, and create it if it does not -->
<xsl:template name="rule_1" match="/Node1">
    <xsl:copy>
        <xsl:if test="not(/Node1/Node2)">
            <Node2>
            <xsl:call-template name="rule_2"/> <!-- call rule 2 to create a node3 -->
            </Node2>
        </xsl:if>
    </xsl:copy>
    <xsl:apply-templates /> <!-- Not sure why this is here, but it seems to need to be here in order to keep copying the xml file-->
</xsl:template>

<!-- Add node3 if it doesn't exist -->
<xsl:template name="rule_2" match="/Node1/Node2/">
    <xsl:if test="not(/Node1/Node2/Node3[@name=1/)>
        <Node3 name="1" value="newValue" />
    </xsl:if>
    <xsl:apply-templates /> <!-- Not sure why this is here, but it seems to need to be here in order to keep copying the xml file-->
 <xsl:template>

 <!-- Change the value of Node3 -->
 <xsl:template match="/Node1/Node2/node3[@name='1']">
<xsl:copy>
     <!-- Blanket statement for keeping all attributes -->
     <xsl:copy-of select ="@*" />
     <!-- Change the below attributes -->
     <xsl:attribute name="value">newValue</xsl:attribute>
     <xsl:apply-templates /><!-- Not sure why this is here, but it seems to need to be here in order to keep copying the xml file-->
</xsl:copy>
 </xsl:template> 
```

编辑：我有另一个问题，但由于我的原始问题已解决，我继续将第一个答案标记为我的问题的答案。公平地说，Dimitre 的解决方案同样有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:21:21.313

这是一种比您最初的尝试更干净的方法。请记住，XPath 区分大小写，并且`node3`不同于`Node3`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:exslt="http://exslt.org/common"
                exclude-result-prefixes="exslt">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:variable name="treeToAddNF">
    <Node2>
      <Node3 name="1" value="">
        <Node4>
          <Node5/>
        </Node4>
      </Node3>
    </Node2>
  </xsl:variable>
  <xsl:variable name="treeToAdd" select="exslt:node-set($treeToAddNF)" />

  <xsl:template match="@*|node()" name="Copy">
    <xsl:param name="contentsToAdd" select="/.." />
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
      <xsl:apply-templates select="$contentsToAdd" />
    </xsl:copy>
  </xsl:template>

  <!-- Add Node2 to any Node1 that does not have a Node2 -->
  <xsl:template match="Node1[not(Node2)]">
    <xsl:call-template name="Copy">
      <xsl:with-param name="contentsToAdd" select="$treeToAdd/Node2" />
    </xsl:call-template>
  </xsl:template>

  <!-- Add node3 if it doesn't exist -->
  <xsl:template match="Node2[not(Node3/@name = 1)]">
    <xsl:call-template name="Copy">
      <xsl:with-param name="contentsToAdd" select="$treeToAdd/Node2/*" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template match="Node3[@name = 1][not(Node4)]">
    <xsl:call-template name="Copy">
      <xsl:with-param name="contentsToAdd" select="$treeToAdd/Node2/Node3/*" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template match="Node3[@name = 1]/Node4[not(Node5)]">
    <xsl:call-template name="Copy">
      <xsl:with-param name="contentsToAdd" select="$treeToAdd/Node2/Node3/Node4/*" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template match="Node3[@name='1']/@value">
    <xsl:attribute name="value">newValue</xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<Node1>

</Node1> 
```

结果是：

```
<Node1>
  <Node2>
    <Node3 name="1" value="newValue">
      <Node4>
        <Node5 />
      </Node4>
    </Node3>
  </Node2>
</Node1> 
```

在此输入上运行时：

```
<Node1>
  <Node2>
    <Node3 name="2" value="value3" />
  </Node2>
</Node1> 
```

结果是：

```
<Node1>
  <Node2>
    <Node3 name="2" value="value3" />
    <Node3 name="1" value="newValue">
      <Node4>
        <Node5 />
      </Node4>
    </Node3>
  </Node2>
</Node1> 
```

在此输入上运行时：

```
<Node1>
  <Node2>
    <Node3 name="1" value="value1" otherAttribute="7" />
    <Node3 name="2" value="value3" otherAttribute="9"  />
  </Node2>
</Node1> 
```

结果是：

```
<Node1>
  <Node2>
    <Node3 name="1" value="newValue" otherAttribute="7">
      <Node4>
        <Node5 />
      </Node4>
    </Node3>
    <Node3 name="2" value="value3" otherAttribute="9" />
  </Node2>
</Node1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:14:13.777

**这是一个较短的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Node1[not(Node2)]">
  <Node1>
   <xsl:apply-templates select="@*|node()"/>
      <Node2>
        <Node3 name="1" value="newValue" />
      </Node2>
  </Node1>
 </xsl:template>

 <xsl:template match="Node3[@name='1']">
  <Node3 value="newValue">
   <xsl:apply-templates select="@*[not(name()='value')]|node()"/>
  </Node3>
 </xsl:template>

 <xsl:template match="Node2[not(Node3[@name='1'])]">
  <Node2>
   <xsl:apply-templates select="@*| node()"/>
    <Node3 name="1" value="newValue" />
  </Node2>
 </xsl:template>
</xsl:stylesheet> 
```

**在此 XML 文档上运行时：**

```
<Node1>

</Node1> 
```

**结果是**：

```
<Node1>
  <Node2>
    <Node3 name="1" value="newValue" />
  </Node2>
</Node1> 
```

**在此 XML 文档上运行时：**

```
<Node1>
  <Node2>
    <Node3 name="2" value="value3" />
  </Node2>
</Node1> 
```

**结果是**：

```
<Node1>
  <Node2>
    <Node3 name="2" value="value3" />
    <Node3 name="1" value="newValue" />
  </Node2>"
</Node1> 
```

**在此 XML 文档上运行时**：

```
<Node1>
  <Node2>
    <Node3 name="1" value="value1" />
    <Node3 name="2" value="value3" />
  </Node2>
</Node1> 
```

**结果是**：

```
<Node1>
  <Node2>
    <Node3 name="1" value="newValue" />
    <Node3 name="2" value="value3" />
  </Node2>
</Node1> 
```

**最后，在此 XML 文档上运行时：**

```
<Node1>
  <Node2>
    <Node3 name="1" value="value1" otherAttribute="7" />
    <Node3 name="2" value="value3" otherAttribute="9"  />
  </Node2>
</Node1> 
```

**结果是**：

```
<Node1>
   <Node2>
      <Node3 value="newValue" name="1" otherAttribute="7"/>
      <Node3 name="2" value="value3" otherAttribute="9"/>
   </Node2>
</Node1> 
```

# c# - C# MVC 4 视图通过查询字符串访问另一个视图

> ID：15708193
> 
> 赞同：0
> 
> 时间：2013-03-29T17:22:18.473
> 
> 标签：c#, asp.net-mvc-4

我是 MVC 的新手，想知道是否有人对如何实现这一目标有任何提示。这是我希望 url 字符串看起来像的示例。

[http://example.com/Controller?View&id&View2](http://example.com/Controller?View&id&View2)

[http://example.com/Management?Schools&ID=20&edit](http://example.com/Management?Schools&ID=20&edit)

管理是控制器，学校是一个视图，如果单击学校上的编辑链接，它将带您进入第二个视图，即编辑页面。

我知道 MVC 4 倾向于以 SEO 方式保留 url，但我个人喜欢我发布的那些不干净的 url。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:25:46.380

控制器可以返回您想要的任何视图。与视图名称匹配的操作只是默认设置

```
public ActionResult Foo(string viewName)
{
     return View(viewName);
} 
```

注意：这是纯示例代码，请确保至少验证您允许的视图名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:28:23.243

不确定是否可以按照您的描述完成。您可以做的是将视图名称作为 View2 的参数传递。（例如学校？ID=20&View2=edit）。然后您可以返回该视图，例如`return View(View2);`查看有关不同路由示例的这篇文章：

[MVC 路由](https://stackoverflow.com/questions/379558/mvc-net-routing)

# cocoa-touch - UIBarButtonItem 自定义字体大小错误（触摸更新）

> ID：15708199
> 
> 赞同：0
> 
> 时间：2013-03-29T17:22:52.367
> 
> 标签：cocoa-touch, ios6

你可以在这里看到它发生：

[http://www.screencast.com/t/mSveqUgPe1](http://www.screencast.com/t/mSveqUgPe1)

类似于我的问题：[UIBarButtonItem Custom Background Appearance 'Jumping' after flip transition](https://stackoverflow.com/questions/15261148/uibarbuttonitem-custom-background-appearance-jumping-after-flip-transition)

它似乎完全是`UIBarButtonItem`通过外观 api 为 s 设置自定义字体引起的。

```
[[UIBarButtonItem appearance] setTitleTextAttributes:
 [NSDictionary dictionaryWithObjectsAndKeys:
  [UIColor colorWithRed:1 green:1 blue:1 alpha:1.0],
  UITextAttributeTextColor,
  [UIColor colorWithRed:4/255.0 green:4/255.0 blue:4/255.0 alpha:0.5],
  UITextAttributeTextShadowColor,
  [NSValue valueWithUIOffset:UIOffsetMake(0, 1)],
  UITextAttributeTextShadowOffset,
  [UIFont fontWithName:@"ProximaNova-Bold" size:16.0],
  UITextAttributeFont,
  nil] forState:UIControlStateNormal]; 
```

如果我只注释掉字体部分，它就可以解决问题。即使使用像 Helvetica 这样的非自定义字体，以这种方式设置也会导致同样的问题。先前调整图像偏移的技巧不适用于此方法，因此尝试找到另一种解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:36:13.380

显然这是一个错误，但这次我在代码中找到了一个新的解决方法。

```
- (void)viewWillLayoutSubviews {
    [super viewWillLayoutSubviews];
    self.navigationItem.rightBarButtonItem.title = @"NEXT";
} 
```

调用后在代码中设置标题`super viewWillLayoutSubviews`。至于为什么要解决它……不知道。

## 不完全的

现在它在跳跃。它呈现错误，然后更新到正确的位置/大小。

# powershell - 具有特殊字符的 Powershell 哈希表键

> ID：15708203
> 
> 赞同：5
> 
> 时间：2013-03-29T17:23:05.963
> 
> 标签：powershell

我在尝试使用键中的 / 访问哈希表时遇到问题。在我的情况下，键是 mime 类型，哈希表的一个简单示例如下所示：

```
PS H:\> $h

Name                           Value                                                                                                                         
----                           -----                                                                                                                         
application/pdf                {application/pdf, application/pdf} 
```

当我尝试通过密钥名称进行访问时，我没有得到任何结果：

```
 PS H:\> $h."application/pdf"

   _______________________________________
   PS H:\> $h["application/pdf"]

   _____________________________________________
   PS H:\> 
```

这里发生了什么，以及如何使用此密钥？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:34:58.020

我认为 Key 不是字符串而是对象？两种方式获得价值我都没有问题：

```
PS> $h=@{'application/pdf'='application/pdf'}
PS> $h["application/pdf"]    
application/pdf

PS> $h."application/pdf"
application/pdf 
```

# sql-server-2005 - SQL Server 2005：尝试在子表上更新 Catch

> ID：15708210
> 
> 赞同：1
> 
> 时间：2013-03-29T17:23:53.283
> 
> 标签：sql-server-2005

我有两张桌子 -`tblRequests`和`tblData`. `tblRequests`有一个名为 的主键`recID`，并且`tblData`有一个指向该主键的外键，称为`requestRecID`。

在 上`tblRequests`，我在两列上有一个唯一索引，可以防止用户输入重复的行。

问题：当我尝试在 上重复插入时`tblRequests`，它会按预期出错，但我`tblData`仍在更新其外键。

那么，我怎么说“`tblData`如果`tblRequests`插入没有发生就不要更新”？

在做一些研究时，这似乎`try/catch`是为了，但我对这个级别的 SQL 完全不熟悉。

我的代码如下：

```
CREATE Procedure [dbo].[spInsert]
(
    @vOpID varchar(3),
    @vSNumb varchar(12)
)
AS
    Declare @vRecID int
BEGIN 
    BEGIN TRANSACTION
        Insert tblRequests
        (
        opID,
        SNumb
        )
        Values 
        (
        @vOpID,
        @SNumb
        )

        Set @vRecID = IDENT_CURRENT ('tblRequests')

    COMMIT TRANSACTION;
    BEGIN TRANSACTION
        Update tblData 
        Set requestRecID = @vRecID 
        Where SNumb = @SNumb And opID = @vOpID 
    COMMIT TRANSACTION;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:33:45.933

你需要这样的东西：

*   **一个**跨越两个操作的事务（因为您真的希望两个操作都成功，或者然后回滚所有内容 - 而不仅仅是事务的一部分......）

*   在一个`TRY...CATCH`块内 - 如果第一个操作 ( `INSERT`) 导致错误，它将直接跳到`CATCH`块中并且不会执行第二个语句，它会回滚事务。

代码：

```
CREATE Procedure [dbo].[spInsert]
(
    @vOpID varchar(3),
    @vSNumb varchar(12)
)
AS
BEGIN 
    DECLARE @vRecID INT

    BEGIN TRANSACTION
    BEGIN TRY
        INSERT INTO dbo.tblRequests(opID, SNumb)
        VALUES(@vOpID, @SNumb)

        SET @vRecID = SCOPE_IDENTITY()

        UPDATE dbo.tblData 
        SET requestRecID = @vRecID 
        WHERE SNumb = @SNumb AND opID = @vOpID 

        COMMIT TRANSACTION
    END TRY
    BEGIN CATCH
        SELECT 
            ERROR_NUMBER() AS ErrorNumber,
            ERROR_SEVERITY() AS ErrorSeverity,
            ERROR_STATE() AS ErrorState,
            ERROR_PROCEDURE() AS ErrorProcedure,
            ERROR_LINE() AS ErrorLine,
            ERROR_MESSAGE() AS ErrorMessage

        ROLLBACK TRANSACTION
    END CATCH
END 
```

# c++ - C++ 文本到多维数组

> ID：15708216
> 
> 赞同：-4
> 
> 时间：2013-03-29T17:24:17.210
> 
> 标签：c++, arrays, file-io, multidimensional-array, fstream

所以我需要制作一个程序来对这个文本文件中的数字求和：

> 3
> 
> 22 5126717910121751622546
> 
> 29 88888888888888888888888888888
> 
> 40 2525255125133485451578436833138834387837

第一行显示行数，以下几行是我需要求和的数字。以下一行中的第一个数字显示第二个数字的位数。

输出文件应该是这样的：

> 2525255125222374345594043632149474899271

我发现我必须使用多维数组。我是 C++ 新手，不习惯多维数组，所以我需要一些帮助。提前致谢！PS对不起，如果我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:31:04.253

由于这些整数非常大，您需要将它们存储在字符串中并为这些字符串定义运算符 +（实际上是大整数）

您可以执行以下操作将它们存储在一维向量中，因为如果您真的添加 BigInteger，则“位数”不相关。同时，您只输出总和而不是结果中的位数。

```
 vector<string> data;
   ifstream dataFile("dataInput.txt");   //or you can use stringstream
   long numbers = 0; 
   dataFile >> numbers;
   long digits = 0;
   string currentNum;   
   while (dataFile >> digits >> currentNum)
   {
     data.push_back(currentNum);
   }
   //now add those integers 
```

为 BigInteger 添加很简单。

# import - 通过导出重新导入更新：我可以通过目标中的非主字段指定查找字段的值吗？

> ID：15708217
> 
> 赞同：1
> 
> 时间：2013-03-29T17:24:18.510
> 
> 标签：import, dynamics-crm-2011, updates

问题看起来比问题更复杂！

我想使用导入向导来更新我们添加到客户记录中的字段。它是对新实体 Constituency 的查找（外键）。选区实体包括一个强制性的、唯一的字段，称为代码。我想通过指定 Constituency.Code 来填充 Account.Constituency。

步骤： - 创建帐户的高级查找 (AF)。- 将相关选区添加到 AF。- 在 AF 输出列中包含选区代码。- 运行 AF 并将其导出到 Excel (XML)，选择“重新导入”选项。- 更新电子表格中的选区代码值。- 导入修改后的电子表格。

所有这些似乎都有效，并且导入没有抱怨（所有记录都作为更新导入；没有失败），但是 Account.Constituency 字段尚未更新 - 它仍然为空。是否必须通过 GUID 或相关记录的主要字段在导入时更新查找字段，还是我遗漏了什么？

我无法通过前端检查映射，因为导入向导“知道”如何映射 XML 并且不提供更改它的机会。检查 XML（我在这里不是专家）表明，尽管 AF 找到了选区代码，但它没有将一组可能的值添加到导出的验证部分。

欢迎任何指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:35:51.380

您需要更新多少条记录？

因为您可以创建一个按需工作流来更新该字段，选择记录并运行工作流。

或者您也可以编写一个小的 C# 应用程序来检索所有帐户并更新字段，只需几行代码。

# java - java TCP服务器接受来自android客户端的图像和字符串

> ID：15708220
> 
> 赞同：0
> 
> 时间：2013-03-29T17:24:22.847
> 
> 标签：java, android, sockets, tcp

我想发送字符串消息以及图像。我正在设计允许用户共享图像和聊天（字符串）的 android 聊天应用程序，Java Server 位于后端，它监听和广播。我正在阅读几篇文章，但仍然感到困惑。1）我如何发送数据并且在接收服务器时可以知道它的字符串或图像？2）我应该有单独的套接字来监听然后分别广播图像和字符串吗 3）我可以有一个对象可以保存字符串以及字节数组中的图像并将其传递给java服务器吗？请帮助我也很困惑，我应该使用 objectoutputstream/dataoutputstream 来实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:04:40.053

```
Keep Seperate Sockets that makes it simpler,or you need syncronisation

1)use objectoutputstream for image thats fastest method of image transfer

2)use dataoutputstream for string

Image Sending code

      File myFile = new File ("d:\\ab.jpg");
      byte [] mybytearray  = new byte [(int)myFile.length()];
      FileInputStream fis = new FileInputStream(myFile);
      BufferedInputStream bis = new BufferedInputStream(fis);
      bis.read(mybytearray,0,mybytearray.length);
      OutputStream os = sock.getOutputStream();
      System.out.println("Sending...");
      os.write(mybytearray,0,mybytearray.length);
      os.flush();
      os.close();

Image receiving code

    int filesize=6022386; // filesize temporary hardcoded
    long start = System.currentTimeMillis();
    int bytesRead;
    int current = 0;

    File f=new File("d:\\ab.jpg");
    f.createNewFile();
    // receive file
    byte [] mybytearray  = new byte [filesize];
    InputStream is = socket.getInputStream();
    FileOutputStream fos = new FileOutputStream(f);
    BufferedOutputStream bos = new BufferedOutputStream(fos);
    bytesRead = is.read(mybytearray,0,mybytearray.length);
    current = bytesRead;
   do {
       bytesRead =
       is.read(mybytearray, current, (mybytearray.length-current));
       if(bytesRead >= 0) current += bytesRead;
    } while(bytesRead > -1);
    count=current;
    Copy=mybytearray.clone();
    bos.write(mybytearray, 0 , current);
    bos.flush();
    long end = System.currentTimeMillis();
    System.out.println(end-start);
    bos.close();
    fos.close();
    Status=true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:30:09.957

您已经发现了应用层协议的全部原因。套接字本身只是提供发送字节的方法，它们没有说明字节的含义。这就是应用层协议发挥作用的地方。

您可以设计一个协议，首先为图像或数据发送一个类型字节（0 或 1）。然后您可能还需要一个整数（4 个字节）作为长度（数据或图像的长度）。这将允许接收端首先读取这些字节并知道要接收多少字节以及这些字节是代表数据还是图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:57:34.910

查看 Java`Serializable`接口：[http ://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)

总而言之，如果一个类的`Serializable`所有字段也是`Serializable`. 所以：

```
public class Message<Img_Type> implements Serializable {
    protected String mText = null;
    protected <Img_Type> mImage = null;    // Img_Type must implement Serializable

    // ... constructor(s), get/set methods        
} 
```

然后，您可以使用`Socket`s、`ObjectInputStream`和来写入和读取这些对象`ObjectOutputStream`。阅读（一）`Message`：

```
 Socket socket;    // initialize your socket
    Message msg;
    try {
        InputStream is = socket.getInputStream();
        ObjectInputStream ois = new ObjectInputStream(is);
        Message msg = (Message) ois.readObject();
        ois.close();
    } catch (ClassNotFoundException e) {
        // handle exception
    }
    // handle message 
```

`Message`可以使用类似的方式编写 a `ObjectOutputStream`。在此示例中，您可以检查`Message`字段`null`以查看其包含的内容。

需要注意的一件事是，for 的构造函数在从输入流中`ObjectInputStream`读取 a 的标头之前不会返回，例如 a已准备好被接收。此外，关闭服务器上的对象输入流将在客户端打开相应的输出流时引发异常，反之亦然。`Object``Message`

# c# - C# HTTP Post 代码导致工作进程挂起

> ID：15708223
> 
> 赞同：1
> 
> 时间：2013-03-29T17:24:37.950
> 
> 标签：c#, asp.net, .net, http

在 IIS 中查看工作进程时，我们一直注意到挂起的请求，我们最初认为指定 HTTP 超时值可以解决问题，但事实并非如此。我们找到了导致问题的代码，但我们仍然不确定是什么导致了它。

以下代码接受键/值对列表并创建 HTTP Post 请求并将值放入 POST 有效负载中。它大部分时间都可以正常工作，但不确定可能导致问题的原因。

```
 public List<KeyValuePair<string, string>> Data { get; set; }

    public string Invoke()
    {
        StringBuilder paramBuilder = new StringBuilder();

        for (int i = 0; i < Data.Count; i++)
        {
            var d = Data[i];
            string delimeter = i < Data.Count - 1 ? "&" : string.Empty;
            paramBuilder.AppendFormat("{0}={1}{2}", d.Key.Trim(), d.Value != null ? HttpUtility.UrlEncode(d.Value.Trim()) : string.Empty, delimeter);
        }

        WebRequest request = WebRequest.Create(Url);
        request.ContentLength = paramBuilder.Length;
        request.ContentType = "application/x-www-form-urlencoded";
        request.Method = "POST";

        Stream rs = request.GetRequestStream();
        ASCIIEncoding encoding = new ASCIIEncoding();
        var postData = encoding.GetBytes(paramBuilder.ToString());
        rs.Write(postData, 0, postData.Length);

        var response = request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string str = reader.ReadToEnd();

        rs.Close();     //JUST ADDED _ MAYBE THESE WERE THE PROBLEM?
        reader.Close(); //JUST ADDED - MAYBE THESE WERE THE PROBLEM?

        return str;
    } 
```

任何想法都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:33:04.260

您可能正在耗尽资源。每当您创建实现 IDisposable 的对象的实例时，您应该将它包装在“使用”语句或 try/finally 块中。否则将导致您的应用程序挂起，直到资源被释放。

这将确保当您离开方法的范围时，资源得到适当的管理和释放。

[http://msdn.microsoft.com/en-gb/library/yh598w02(v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/yh598w02(v=vs.100).aspx)

在您的情况下，您应该包装 Stream rs = request.GetRequestStream(); 和 StreamReader reader = new StreamReader(response.GetResponseStream()); 这样您就不会泄漏资源。

此外，将代码包装在 try/catch 块中并记录异常，以便分析错误。

# python - python3.3 matplotlib 无法导入名称_tkagg

> ID：15708226
> 
> 赞同：4
> 
> 时间：2013-03-29T17:24:51.157
> 
> 标签：python, python-3.x, matplotlib

我的 matplotlib 的默认后端是“agg”。我在 stackoverflow 上读到（[How can I set the 'backend' in matplotlib in Python?](https://stackoverflow.com/questions/4930524/how-to-set-backend-in-matplotlib-in-python)），为了显示图形，我需要使用 TkAgg、WX、QTAgg 或 QT4Agg。我尝试使用所有 4 个（mpl.use('TkAgg') 等）并且 matplotlib 找不到它们中的任何一个（我不能使用 QTAgg 或 QT4Agg，因为根据 matplotlib，它与 python3 不兼容）。我不确定出了什么问题，因为当我转到 /usr/local/lib/python3.3/dist-packages/matplotlib/backends/ 时，tkagg.py 和 backend_tkagg.py 都在那里。这些错误也都适用于 wx。

如果有任何相关性，我会在 Quantal 上使用 python3.3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T09:34:30.810

我在 Fedora 18 上遇到了同样的错误。我从存储库安装了 Python 3 的 matplotib 包。

在 Fedora 上安装软件包`python3-matplotlib-tk`为我消除了这个错误。

在 Ubuntu 上，安装`tk-dev`软件包，然后再次安装 matplotlib：`python3 setup.py build`和`python3 setup.py install`.

然而，我很快在 Fedora 上遇到了这个：[Python 3 and matplotlib lissue on Linux](https://stackoverflow.com/questions/15717119/python-3-and-matplotlib-lissue)

# knitr - knitr：在 fig.cap 块选项中使用内联表达式

> ID：15708231
> 
> 赞同：10
> 
> 时间：2013-03-29T17:25:11.387
> 
> 标签：knitr

我的问题是关于 knitr 选项 fig.cap，使用 LaTeX 时。是否可以在 fig.cap 字符串中包含 \rinline 或 \Sexpr ？

例如，我想要类似的东西（我正在使用 .Rtex 文件）：

```
\documentclass{article}
\begin{document}
%% begin.rcode fig.cap="x is \\rinline{x}"
% x <- 5
% p <- seq(0,5)
% q <- x*p
% plot(p,q)
%% end.rcode
\end{document} 
```

我真的很希望该块在我的 .tex 文档中生成一个图，标题为“x 为 5”。相反，它会在 pdflatex 编译时引发“未定义的控制序列”错误。

如果我不转义 rinline（即只使用 \rinline{x}），那么它会编译，但标题是“x 是 inlinex”。

我问的可能吗？

这是我的第一个 SO 问题（虽然在这里多次使用了答案。谢谢！），所以我很感激任何关于如何提出更好问题的反馈。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T19:04:28.167

`fig.cap`被评估为 R 表达式，因此您可以在 R 中创建标题字符串，而不是使用`\rinline`（并因此再次解析标题）。`knitr`

```
%% begin.rcode fig.cap=paste("x is", x) 
```

但由于默认情况下在创建*之前*`fig.cap`进行评估，因此您需要推迟对 ; 的评估。为此，您可以在文档的开头包含这样的块： *`x``fig.cap`*

 *```
%% begin.rcode setup, include=FALSE
%% opts_knit$set(eval.after = 'fig.cap')
%% end.rcode 
```

它指定`fig.cap`在评估代码块后评估，即何时`x`可以在图形标题中使用。请参阅[`eval.after`文档](http://yihui.name/knitr/options)。

另一种方法是在前一个块中创建`x`，*并*在下`fig.cap=paste("x is", x)`一个*块*中使用。*

# android - 模拟器的10.0.2.2怎么解析成windows的127.0.0.1？

> ID：15708235
> 
> 赞同：3
> 
> 时间：2013-03-29T17:25:21.710
> 
> 标签：android, localhost

我们在 Android 应用程序中使用 10.0.2.2 作为模拟器的本地主机地址。在 windows(127.0.0.1) 上运行的服务如何解析到模拟器的 10.0.2.2？

为什么 10.0.2.2 相当于 Android 中的 localhost？

# django - 通过 Django 通用更新视图使用外键更新模型实例。

> ID：15708236
> 
> 赞同：4
> 
> 时间：2013-03-29T17:25:25.753
> 
> 标签：django, django-generic-views

我有一个名为“分类”的 django 模型，顾名思义，它是一个分类数据库。分类的每个实例都将附加多个图像。因此创建了另一个名为“ClassifiedImage”的模型，并通过外键关联到“分类”模型。我想利用 Django 通用更新视图来更新“分类”模型，但通用视图只接受一个模型和表单实例（请参见下文 *）。但目前通用视图只允许我显示 1 个表单（在本例中为“classifiedForm”），我可以更新分类模型但无法编辑该特定实例的图像。请记住，存储图像并通过以下方式链接的分类图像模型外键。

```
views.py

    def add_classified(request):
          userprofile = User.objects.get(pk=request.user.id)

          if request.method == 'POST':
              form = classifiedForm(request.POST, request.FILES)
              if form.is_valid():
                  classifiedad = form.save(commit=False)
                  image_formset = ImageFormSet(request.POST, request.FILES, instance=classifiedad)
                  classifiedad.submitted_by = request.user
                  classifiedad.save()
                  image_formset.save()
                  slug = classifiedad.slug
                  redirect_to =reverse('classified-detail', kwargs={'slug':slug})
                  return HttpResponseRedirect(redirect_to)
          else:
              form = classifiedForm()
              image_formset = ImageFormSet()
          return render_to_response('shclassified/add_classified.html',{'form':form, 'image_formset':image_formset},context_instance = RequestContext(request))

      def classified_list(request):
          classified_list = classified.objects.all()
          return render_to_response('classified_list.html',
              {'classified_list':classified_list},
              context_instance = RequestContext(request)
              )

      def classified_detail(request,slug):
              classifiedinst = classified.objects.get(slug=slug)
              classifiedimg = ClassifiedImage.objects.filter(classified=classifiedinst)
              '''Create a string representation of classified's address so it can be geocoded'''
              classified_address = "%s %s %s %s"%(classifiedinst.address, classifiedinst.city, classifiedinst.state, classifiedinst.zipcode)
              lat, lng = getLatLng(classified_address)
              constructed_map = getMap(lat, lng, largeMap=False)
              #Get user's full name
              return render_to_response('shclassified/classified_detail.html',
              {
                  'classifiedimg':classifiedimg,
                  'user':request.user,
                  'classified':get_object_or_404(classified,slug=slug),
                  'constructed_map':constructed_map,
                  },
              context_instance = RequestContext(request)
              )
#I NEED TO BE ABLE TO UPDATE THE IMAGES HERE IN THIS VIEW AS WELL. DELETE, REPLACE    #IMAGES ETC...Perhaps generic views are not designed for this purpose?
class ClassifiedUpdate(UpdateView):
     model = classified# ****** <=== ***
     form_class = classifiedForm **** <=== ***
     template_name = 'shclassified/add_classified.html' 
```

模型.py

```
**class classified(models.Model):
    slug = models.SlugField(unique=True,blank=True, null=True)
    submitted_by = models.ForeignKey(User, blank=True, null=True)
    title = models.CharField(max_length=120, blank=True, null=True)
    point = models.PointField(srid=settings.SRID, blank=True, null=True)
    address = models.CharField(max_length=120, blank=True, null=True)
    city = models.CharField(max_length=60, blank=True, null=True)
    state = models.CharField(max_length=60, blank=True, null=True)
    zipcode = models.CharField(max_length=5, blank=True, null=True)
    description = models.TextField(blank=True, null=True)
    objects = models.GeoManager()
    tags = TaggableManager(blank=True)
    submission_date = models.DateTimeField(auto_now_add=True, null=True, blank=True)
    price = models.CharField(max_length=20, blank=True, null=True)
    def __unicode__(self):
        #return "%s %s %s"%(self.title, self.point.x, self.point.y)
        return "%s"%(self.title)
    @models.permalink
    def get_absolute_url(self):
        return ('listing_detail', (),
                    {
                        'slug' :self.slug,
                    })

    def save(self, *args, **kwargs):
        if not self.slug:
            self.slug = slugify(self.title)
        if not self.point:
            location = "%s+%s+%s+%s"%(self.address, self.city, self.state, self.zipcode)
            cord = get_lat_long(location)
            x,y = cord.split(",")
            x = float(x)
            y = float(y)
            self.point = Point(x,y)
            self.point2 = Point(x,y)
            super(classified, self).save(*args, **kwargs)

    class ClassifiedImage(models.Model):
        classified = models.ForeignKey(classified, related_name="images")
        #image = ImageField()
        image = models.ImageField(upload_to='classifieds/%Y/%m/%d',  default='static/img/no-thumb.jpg', null=True, blank=True)** 
```

表格.py

```
class classifiedForm(ModelForm):
      class Meta:
          model = classified
          exclude = ["user","point","submitted_by","slug"]

ImageFormSet = inlineformset_factory(classified, ClassifiedImage, can_delete = False) 
```

# ioc-container - 将 IoC 容器的库放在哪里可以在 Laravel 中工作？

> ID：15708241
> 
> 赞同：1
> 
> 时间：2013-03-29T17:25:49.543
> 
> 标签：ioc-container, laravel

IoC 容器对我来说是一个复杂的主题，并且来自 Codeigniter 背景（您可以在其中复制和粘贴一个库，并且通过包含它来工作`include_once()`），这是一个难以理解的概念。

我正在尝试将[Graufette](https://github.com/KnpLabs/Gaufrette)用于我的项目，并且我认为我需要使用 IoC 容器，以便我可以加载库并使用它。事情是这样的：

*   我不知道将库文件放在哪里
*   我不知道把注册 IoC 容器的代码放在哪里
*   我不知道如何在`libraries`文件夹外加载库

根据 Dayle Rees 先生的说法，[您只需在 application/start.php 中注册容器，](http://codehappy.daylerees.com/ioc-container)然后在控制器中使用`IoC::resolve()`. 问题是他没有指定您将要注册的文件放在*哪里*（或者您是否可以将`IoC::register()`代码放在其他地方）。

我不会盲目地说“在库文件夹中”，因为正如我所见，它们会自动加载（并且可以静态访问）。对于 Gaufrette 和其他库（如 SwiftMailer，但这是另一回事，因为有一个捆绑包），情况并非如此。

我可以将这些文件放在哪里并使用 IoC 容器加载它们？甚至有必要这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:19:22.760

I just briefly looked at the read me for this library and to me it seems like you should drop it in to the `libraries` directory, or create `vendor` directory and drop it in there. From the looks of it you should be autoloading it. Once it's being autoloaded you can use the IoC to bind an instance of it and retrieve that instance every time instead of having to setup the library each and every time you want to use it.

# r - 如果组内出现特定数字，则将数据框中的行标记为“TRUE”

> ID：15708245
> 
> 赞同：4
> 
> 时间：2013-03-29T17:26:12.907
> 
> 标签：r, select, row, conditional-statements

我之前问过你类似的问题，现在反之亦然？我想在最后一次出现定义数字的组内查找行，但如果该数字未出现在组中，则将使用下一个最高数字。

数据如下所示：

```
group <- c("a", "a", "a", "a", "b", "b", "b", "b", "c", "c", "c", "c")
value <- c(1, 3, 2, 1, 1, 1, 2, 1, 2, 3, 3, 2)
dat <- data.frame(group, value)
dat 
```

首先，我想搜索该组是否具有值 3，如果是，则组中最后一个数字 3 的行标记为“TRUE”，如果组中没有数字 3，则查找第一个数字 2，依此类推。最后每组只有一个“真”。所以“RESULT”栏应该是我的问题的结果。我希望这次问题更容易理解，并提前感谢您。

预期结果：

```
 group <- c("a", "a", "a", "a", "b", "b", "b", "b", "c", "c", "c", "c")
 value <- c(1, 3, 3, 1, 1, 1, 2, 1, 2, 3, 3, 2)
 RESULT <- c("FALSE", "FALSE", "TRUE", "FALSE", "FALSE", "FALSE", "TRUE", "FALSE", "FALSE", "FALSE", "TRUE", "FALSE")
 target <- data.frame(group, value, RESULT)
 target 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:45:35.197

干得好。

```
f <- function(v) replace(logical(length(v)), 
                         which(v == max(v) & !duplicated(v, fromLast=TRUE)), 
                         TRUE)
transform(dat, GOAL=as.logical(ave(value, group, FUN=f)))
#    group value  GOAL
# 1      a     1 FALSE
# 2      a     3  TRUE
# 3      a     2 FALSE
# 4      a     1 FALSE
# 5      b     1 FALSE
# 6      b     1 FALSE
# 7      b     2  TRUE
# 8      b     1 FALSE
# 9      c     2 FALSE
# 10     c     3 FALSE
# 11     c     3  TRUE
# 12     c     2 FALSE 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:56:20.270

我会做：

```
is.first.max <- function(x) seq_along(x) == which.max(x)
is.last.max  <- function(x) rev(is.first.max(rev(x)))
transform(dat, RESULT = as.logical(ave(value, group, FUN = is.last.max))) 
```

# orm - 如何使用 Dapper.Rainbow（或可选地使用 Dapper.Contrib）对具有导航属性的对象进行插入和更新

> ID：15708246
> 
> 赞同：14
> 
> 时间：2013-03-29T17:26:14.193
> 
> 标签：orm, dapper, micro-orm, dapper-rainbow

我最近才开始研究 Dapper。我正在对其进行测试，并且能够进行基本的 CRUD，我所说的基本的意思是在具有这种结构的类上工作：

```
public class Product {
    public int Id {get;set;}
    public string Name {get;set;}
} 
```

现在我正在寻找可以更轻松地进行插入和更新的东西，并找到了 Dapper.Rainbow。我检查了它，并能够使用它来获取和插入如上所述的对象。我的问题是，当`Product`有导航属性时，我无法在该字段上进行插入。所以如果我有这个：

```
public class Product {
    public int Id {get;set;}
    public string Name {get;set;}
    public ProductCategory Category {get;set;}
} 
```

我将无法做到这一点：

```
// connection is a valid and opened connection            
 var db = TestDatabase.Init(connection , 300);
 var newId = db.Products.Insert(newProduct); 
```

因为这个原因：

```
The member Category of type ProductCategory  cannot be used as a parameter value 
```

`Category`如果我替换为类型`int`（数据库中的相同数据类型），问题就可以解决。但是，如果我这样做，我将无法使用其类别信息查询产品，而不仅仅是（类别）ID。

因此，如果不使用原始 Dapper，我如何使用具有导航属性的类进行插入和更新？我希望我可以执行以下操作并告诉 Dapper.Rainbow`Category`在插入或更新时忽略。

```
public class Product {
    public int Id {get;set;}
    public string Name {get;set;}
    public ProductCategory Category {get;set;}
    public int CategoryId {get;set;} // this will be the same field name in the database
} 
```

这种情况在 NHibernate 中是可能的，我可以有一个代理对象`Category`并将其分配给`Product`并保存它，并且映射工作完美。但我很想使用 Dapper，这就是为什么我正在探索并想了解如何完成这样的事情。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-12T06:31:23.270

## 不是 Dapper.Rainbow

`Dapper.Rainbow`这在当前形式下是不可能的，但[我在 github 中的拉取请求](https://github.com/SamSaffron/dapper-dot-net/pull/79)使这成为可能。

我很惊讶没有人建议使用`Dapper.Contrib`. 我知道我问过该功能是否在 Rainbow 中。但我没想到没人会注意到这句话（尤其是粗体字）：

> **现在我正在寻找可以更轻松地进行插入和更新的东西，**并找到了 Dapper.Rainbow。我检查了它，并能够使用它来获取和插入如上所述的对象。我的 **问题是，当 Product 具有导航属性时，我无法在该字段上进行插入**。

...并提出替代方案，即 Dapper 库中已有的解决方案。我想我的问题应该更清楚，并明确询问[在 github 中的整个 Dapper 库中是否](https://github.com/SamSaffron/dapper-dot-net)存在解决方案。因此，在图书馆进行更多挖掘之后，我发现我的问题得到了支持。

## Dapper.Contrib 的路径

我的项目一切正常，`Rainbow`直到我需要更多。我得到了一些包含很多字段的表。如果我只是将我的对象提供给 Rainbow，那么它将对所有字段进行更新，这并不是很好。但这并没有让我迅速跳下船回到新罕布什尔州。所以在我实现自己的之前`change tracking`，我不想重新发明轮子，特别是如果有人已经做得很好，我搜索了一下，[发现了这个 SO 线程](https://stackoverflow.com/questions/10030285/dapper-rainbow-vs-dapper-contrib)。该线程证实了我**`Rainbow`不支持更改跟踪**的知识，但还有另一只野兽支持，它被称为`Dapper.Contrib`. 所以我开始尝试它。

## 于是我们又见面了

> ProductCategory 类型的成员 Category 不能用作参数值

我遇到了与`Rainbow`. `Contrib`不支持导航属性！？我开始觉得我在浪费时间`Dapper`，而我非常追求的它提供的性能只是一厢情愿。直到...

## WriteAttribute，来拯救......

此类`SqlMapperExtensions.cs`位于项目中包含的文件中`Dapper.Contrib`。我没有找到关于这个类的任何文档，也没有任何评论可以让它很容易被找到并冲着我大喊大叫`hey I'm the one you're looking for`。当我如上所述将 Rainbow 放在一边时，我偶然发现了这一点。

这个类的用法和我做的一样`IgnorePropertyAttribute`，它是一个属性，你可以用它来装饰你的类的属性。您应该使用此属性来装饰您不希望包含在创建的属性中的任何`sql`属性`Dapper`。因此，在我的示例中，让我告诉 Dapper 排除`Category`我需要执行此操作的字段：

```
public class Product {
    public int Id {get;set;}

    public string Name {get;set;}

    [Write(false)] // tell Dapper to exclude this field from the sql
    public ProductCategory Category {get;set;}

    public int CategoryId {get;set;}
} 
```

## 我快到了

请记住，我选择的原因`Contrib`是因为`change tracking`功能。[这个 SO 线程](https://stackoverflow.com/questions/10030285/dapper-rainbow-vs-dapper-contrib)，与我在上面给出的相同链接，指出要启动更改跟踪，您需要为您的类提供一个接口并将其与`Contrib`. 所以对于我的示例类，我需要：

```
public interface IProduct {
    int Id {get;set;}
    string Name {get;set;}
    ProductCategory Category {get;set;}
    int Category {get;set;}
}

// and implement it on my Product class
public class Product : IProduct {
    public int Id {get;set;}

    public string Name {get;set;}

    [Write(false)]
    public ProductCategory Category {get;set;}

    int Category {get;set;}
} 
```

我以为就是这样，差不多！您可能会问如果我根本不关心它，为什么我需要`Category`在我的界面中定义它。`Dapper`事实上，这只会导致一个问题，一个我会解决的问题。

在我的特定场景中，有时我需要在`Category`现场工作，同时保持`Product`对象的更改跟踪。为了保持跟踪能力，get 调用应该提供如下接口类型：

```
var product = connection.Get<IProduct>(id); 
```

如果我不在我的界面中定义它，我将**无法**通过该调用访问该字段。`Category`但是如果我在我的界面中定义它，我会得到熟悉的错误

> {type} 类型的成员 {member} 不能用作参数值。

真的又来了？请停下来。

## 判决

不用担心，因为这很容易通过装饰接口成员来解决，就像我们为类所做的那样。因此，使一切正常的最终配置应该是：

```
public interface IProduct {
    // I will not discuss here what this attribute does
    // as this is documented already in the github source.
    // Just take note that this is needed,
    // both here and in the implementing class.
    [Key]
    int Id {get;set;}

    string Name {get;set;}

    [Write(false)]
    ProductCategory Category {get;set;}

    int Category {get;set;}
}

// and implement it on my Product class
public class Product : IProduct {
    [Key]        
    public int Id {get;set;}

    public string Name {get;set;}

    [Write(false)]
    public ProductCategory Category {get;set;}

    int Category {get;set;}
} 
```

如果您更喜欢使用`Contrib`具有此`change tracking`功能的方法，则可以使用此方法。如果您想使用`Rainbow`并且像我一样遇到导航属性问题，那么您可以[使用我的 pull request](https://github.com/SamSaffron/dapper-dot-net/pull/79)。它的工作方式与它`WriteAttribute`唯一的工作方式相同`Rainbow`。

如果你不喜欢用属性装饰你的类，那么这两个扩展项目都不适合你。我知道还有另一个扩展项目可以让您进行某种流利类型的配置，但这不**与**`Dapper`github 中的库一起使用（不作为核心部分包含） 。我的偏好是仅使用核心库，这引导我调查整个库，看看是否已经存在或者是否可以对其进行改进以满足我的需求。这就是我在这里所做和解释的，对于`Rainbow`和`Contrib`。

我希望这个贡献，我添加的非常简单的类，我展示的配置技巧，以及引导我这些的场景，将帮助未来希望使用 Dapper 的人，并且会有与我类似的设置。此外，这个答案将使开发人员更多地了解 Dapper 能做什么和不能做什么。这个**很棒的工具**`Dapper` [值得一个更好的 wiki](https://github.com/SamSaffron/dapper-dot-net)，我希望这个答案/文章在 SO 中即使在很小的方面也能有所帮助。

* * *

**如果我在这里写的东西已经写在某个地方，我在等待答案的两周时间内没有发现，那么我很高兴有人能将我链接到它。现在已经两周了，调查我的问题的 29 人没有提出任何链接或解决方案，所以我认为我在这里分享的信息对 Dapper* 来说是新的：)

*注意：我修改了我的问题标题，以便其他人可以看到他们问题的潜在解决方案。新标题是基于我获得的关于 Dapper 的新知识。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-28T01:01:56.063

不是答案，而是提醒......如果您来到这里试图找到错误的修复程序：

> {type} 类型的成员 {member} 不能用作参数值。

不要忘记配置您的映射，例如：

```
DapperExtensions.DapperExtensions.SetMappingAssemblies(new List<Assembly>()
{
    typeof(SomeClassMapConfig).Assembly,

    // ...

}); 
```

和...

```
public class SomeClassMapConfig : ClassMapper<SomeClass>
{
    public SomeClassMapConfig()
    {
        Table("tablename");
        Map(p => p.Id).Key(KeyType.Identity).Column("Id");
        Map(p => p.SomeProp).Column("SomeField");

// etc.. 
```

# javascript - 淘汰赛禁用绑定不适用于jquery ui按钮

> ID：15708249
> 
> 赞同：0
> 
> 时间：2013-03-29T17:26:24.547
> 
> 标签：javascript, jquery, knockout.js

我`disable`在 jquery ui 按钮上使用淘汰赛绑定。当我在应用`data-bind='disable: ture'`了 jquery ui 按钮插件的任何按钮上使用时，它会禁用该按钮，但其外观未设置为禁用。在这里，我创建了一个示例小提琴：

[http://jsbin.com/arotuh/2/edit](http://jsbin.com/arotuh/2/edit)

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:04:01.267

正如 spullen 所提到的，这里是我将如何使用自定义绑定：

```
ko.bindingHandlers.jqButton = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var options = valueAccessor();
        for (var p in options) {
            options[p] = ko.utils.unwrapObservable(options[p]);
        }
        $(element).button(options);
        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            $(element).button("destroy");
        });
    },
    update: function (element, valueAccessor) {
        var options = valueAccessor();
        for (var p in options) {
            options[p] = ko.utils.unwrapObservable(options[p]);
        }
        $(element).button("option", options);
        $(element).button("refresh");
    }
};
ko.applyBindings({
    flag: ko.observable(true)
}); 
```

在 HTML 中：

```
<button  data-bind="jqButton: {disabled: flag} ">Disable state using knockout disable binding</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:40:24.080

看起来当您使用 jqueryui 按钮时，它会覆盖属性的默认行为（因为它可以控制它们，但不确定如何，可能需要进一步研究）。

但是，我能够让它改变顺序：

```
ko.applyBindings();

$("button").eq(0).button();

$("button").eq(1).button({ disabled: true }); 
```

为了让这两个库很好地发挥作用，您还可以编写[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T09:37:15.730

我想通过为 jquery ui 按钮的选项添加对使用 observables 的支持来详细说明 gbs 的示例（效果很好）（例如，禁用映射到可观察对象，而不仅仅是 true 或 false）。

```
ko.bindingHandlers.jqButton = {
init: function (element, valueAccessor, allBindingsAccessor) {
    var options = valueAccessor();
    for (var p in options) {
        // CHANGE STARTS HERE
        if (ko.isObservable(options[p]))
            options[p].subscribe(function (newValue) {
                $(element).button("option", p, newValue);
                $(element).button("refresh");
            });
        // CHANGE ENDS HERE
        options[p] = ko.utils.unwrapObservable(options[p]);
    }
    $(element).button(options);
    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).button("destroy");   
    });
},
update: function (element, valueAccessor) {
    var options = valueAccessor();
    for (var p in options) {
        options[p] = ko.utils.unwrapObservable(options[p]);
    }
    $(element).button("option", options);
    $(element).button("refresh");
} 
```

};

# javascript - 使用 javascript 将样式表添加到 xml 无法正确显示或根本无法显示

> ID：15708260
> 
> 赞同：1
> 
> 时间：2013-03-29T17:27:10.947
> 
> 标签：javascript, xml, xslt, epub

在使用 stackoverflow 一年后，我决定加入，但当然是因为经过一天的挣扎后，我陷入了困境。

我的问题：我正在使用 javascript 构建由 xml 文档和样式表组成的文档。这适用于我的两个案例但不是第三个案例（在 Firefox 中，在 IE 中根本没有）。

javascript=========================================

```
function GetBookInfo(object)
{
    try
    {
        var xmlCont=loadXMLDoc("files/books/"+object.id+"/META-INF/container.xml");
        opfFile=xmlCont.getElementsByTagName("container")[0].getElementsByTagName("rootfiles")[0].getElementsByTagName("rootfile")[0].getAttribute("full-path");        
        xmlCont=loadXMLDoc("files/books/"+object.id+"/"+opfFile);
        xsl=loadXMLDoc("files/content.xsl");         
        displayXML(xmlCont, xsl, object.id);
    }
    catch (EventException)
    {
        alert(EventException.toString());
    }
}

function displayXML(xmlIn, xslIn, place)
{
    // code for IE
    if (window.ActiveXObject)
    {
            ex=xmlIn.transformNode(xslIn);
            document.getElementById(place).innerHTML=ex;
    }
    // code for Mozilla, Firefox, Opera, etc.
    else 
        if (document.implementation && document.implementation.createDocument)
    {
            xsltProcessor=new XSLTProcessor();
            xsltProcessor.importStylesheet(xslIn);
            resultDocument = xsltProcessor.transformToFragment(xmlIn,document);     
            document.getElementById(place).appendChild(resultDocument);
    }
}

function loadXMLDoc(dname)
{
    if (window.ActiveXObject)
    {
        xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    else
    {
        if (window.XMLHttpRequest)
        {
            xhttp=new XMLHttpRequest();
        }
    }
        try
        {
            xhttp.open("GET",dname,false);
            xhttp.send("");
            return xhttp.responseXML;
        }
        catch (EventException)
        {
            alert("Could not open: " +dname);
        } 
} 
```

javascript========================================== xsl======== =======================================

```
<?xml version="1.0"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/package"> 
        <html>
            <head>
            </head>
            <body>
                <div id="METADATA">
                    <p>Hello</p>
                    <div id="title">
                        <xsl:value-of select='metadata/dc:title'/>
                    </div> 
                    <br />                       
                    <div id="creator">
                        <xsl:value-of select='metadata/dc:creator'/>
                    </div>
                    <br />
                    <div id="publisher">
                        <xsl:value-of select='metadata/dc:publisher'/>
                    </div>
                    <br />
                    <div id="language">
                        <xsl:value-of select='metadata/dc:language'/>
                    </div>
                    <br />                        
                    <div id="rights">
                        <xsl:value-of select='metadata/dc:rights'/>
                    </div>                        
                    <br />
                    <div id="subject">
                        <xsl:value-of select='metadata/dc:subject'/>
                    </div>
                    <br />
                    <div id="publicationDate">
                        <xsl:value-of select='metadata/dc:date[@opf:event="publication"]'/>
                    </div>
                    <br />
                    <div id="conversionDate">
                        <xsl:value-of select='metadata/dc:date[@opf:event="conversion"]'/>
                    </div>
                    <br />
                    <div id="source">
                        <xsl:value-of select='metadata/dc:source'/>
                    </div>
                    <br />
                </div>                

            </body>
        </html>
    </xsl:template> 
</xsl:stylesheet> 
```

xsl===============================================

xml 文件是 epub 文件夹中的典型 opf 文件。opf（标准xml）============================================== =====

```
<?xml version='1.0' encoding='UTF-8'?>

<package xmlns:opf="http://www.idpf.org/2007/opf" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.idpf.org/2007/opf" version="2.0" unique-identifier="id">
  <metadata>
    <dc:rights>Public domain in the USA.</dc:rights>
    <dc:identifier id="id" opf:scheme="URI">http://www.gutenberg.org/ebooks/1065</dc:identifier>
    <dc:creator opf:file-as="Poe, Edgar Allan">Edgar Allan Poe</dc:creator>
    <dc:title>The Raven</dc:title>
    <dc:language xsi:type="dcterms:RFC4646">en</dc:language>
    <dc:subject>Poetry, English</dc:subject>
    <dc:date opf:event="publication">1997-10-01</dc:date>
    <dc:date opf:event="conversion">2010-06-08T08:59:43.376234+00:00</dc:date>
    <dc:source>http://www.gutenberg.org/files/1065/1065-h/1065-h.htm</dc:source>
    <meta content="item5" name="cover"/>
  </metadata>
  <manifest>
    <item href="pgepub.css" id="item1" media-type="text/css"/>
    <item href="0.css" id="item2" media-type="text/css"/>
    <item href="1.css" id="item3" media-type="text/css"/>
    <!--Chunk: size=31062-->
    <item href="www.gutenberg.org@files@1065@1065-h@1065-h-0.htm" id="item4" media-type="application/xhtml+xml"/>
    <item href="cover.jpg" id="item5" media-type="image/jpeg"/>
    <item href="toc.ncx" id="ncx" media-type="application/x-dtbncx+xml"/>
  </manifest>
  <spine toc="ncx">
    <itemref idref="item4" linear="yes"/>
  </spine>
</package> 
```

opf（标准xml）============================================== =====

任何帮助将不胜感激。PS：如果有人知道为什么 IE 不显示任何 xsl 创建的文档并出现错误：“样式表不包含文档元素。样式表可能是空的，或者它可能不是格式正确的 XML 文档。” 它也会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:24:47.090

您的样式表失败，因为它无效。它在多个地方使用`dc:`and`opf:`命名空间，但没有声明它们。要解决此问题，请更改开始`xsl:stylesheet`标记以包含必要的命名空间声明。由于源 XML 使用默认名称空间，因此您还需要为这些节点使用名称空间。我还修改了您的 XSLT 以显示如何使其更简洁：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dc="http://purl.org/dc/elements/1.1/"
                xmlns:opf="http://www.idpf.org/2007/opf">
  <xsl:template match="opf:package">
    <html>
      <head>
      </head>
      <body>
        <xsl:apply-templates select="opf:metadata" />
      </body>
    </html>
  </xsl:template>

  <xsl:template match="opf:metadata">
    <div id="METADATA">
      <p>Hello</p>
      <xsl:apply-templates select='dc:title'/>
      <xsl:apply-templates select='dc:creator'/>
      <xsl:apply-templates select='dc:publisher'/>
      <xsl:apply-templates select='dc:language'/>
      <xsl:apply-templates select='dc:rights'/>
      <xsl:apply-templates select='dc:subject'/>
      <xsl:apply-templates select='dc:date[@opf:event="publication"]'>
        <xsl:with-param name='id' select='"publicationDate"' />
      </xsl:apply-templates>
      <xsl:apply-templates select='dc:date[@opf:event="conversion"]'>
        <xsl:with-param name='id' select='"conversionDate"' />
      </xsl:apply-templates>
      <xsl:apply-templates select='dc:source'/>
    </div>
  </xsl:template>

  <xsl:template match='opf:metadata/*'>
    <xsl:param name='id' select='local-name()' />

    <div id='{$id}'>
      <xsl:value-of select='.'/>
    </div>
    <br />
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:14:51.517

在 XSLT 代码中编写路径表达式时，您需要考虑包括默认名称空间在内的名称空间。

所以你的代码应该是

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:opf="http://www.idpf.org/2007/opf"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  exclude-result-prefixes="opf dc">

  <xsl:output method="html" indent="yes"/>

    <xsl:template match="/opf:package"> 
                <div id="METADATA">
                    <p>Hello</p>
                    <div id="title">
                        <xsl:value-of select='opf:metadata/dc:title'/>
                    </div> 
                    <br />                       
                    <div id="creator">
                        <xsl:value-of select='opf:metadata/dc:creator'/>
                    </div>
                    <br />
                    <div id="publisher">
                        <xsl:value-of select='opf:metadata/dc:publisher'/>
                    </div>
                    <br />
                    <div id="language">
                        <xsl:value-of select='opf:metadata/dc:language'/>
                    </div>
                    <br />                        
                    <div id="rights">
                        <xsl:value-of select='opf:metadata/dc:rights'/>
                    </div>                        
                    <br />
                    <div id="subject">
                        <xsl:value-of select='opf:metadata/dc:subject'/>
                    </div>
                    <br />
                    <div id="publicationDate">
                        <xsl:value-of select='opf:metadata/dc:date[@opf:event="publication"]'/>
                    </div>
                    <br />
                    <div id="conversionDate">
                        <xsl:value-of select='opf:metadata/dc:date[@opf:event="conversion"]'/>
                    </div>
                    <br />
                    <div id="source">
                        <xsl:value-of select='opf:metadata/dc:source'/>
                    </div>
                    <br />
                </div>                

    </xsl:template> 
</xsl:stylesheet> 
```

我已经删除了`html`and`body`元素，因为您的 Javascript 代码表明您想要创建一个 HTML 片段以包含在已经具有这些结构元素的现有 HTML 文档中。

# symfony - FOSFacebookBundle 在我的网站上不起作用

> ID：15708264
> 
> 赞同：0
> 
> 时间：2013-03-29T17:27:26.970
> 
> 标签：symfony, fosfacebookbundle

我尝试使用 FOSFacebookBundle 和 FOSUserBundle。
它设置为手册。
不会出现错误。

* * *

FOSUserBundle 的用户注册、登录、注销成功。
并添加了邀请注册。

到目前为止是正常的，我理解操作和处理。

* * *

我尝试添加 FOSFacebookBundle。
它设置为手册。
不会出现错误。
从登录按钮显示弹出窗口，Facebook 登录成功。

我不明白这里之后的动作和处理。

* * *

如果成功，是否将用户添加到数据库？

如果成功，“isGranted”是否有效？

```
if ( $this->container->get('security.context')->isGranted('IS_AUTHENTICATED_REMEMBERED') ) {
    // ...
} 
```

* * *

所以，从我的网站登录 Facebook 是成功的。
但是，在我的网站上，它并没有什么影响。
无法处理通过 Facebook 的登录状态。

没有错误。
如何在控制器中处理用户？
应该在哪里检查？
由于不显示错误，因此不知道应该从哪里调查问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:19:34.880

你检查过你的数据库吗？通常，您应该有一个具有 ROLE_FACEBOOK 的新用户。如果你懂法语，你应该看看[这里](http://devyourdream.net/2012/10/06/fosfacebookbundle-fosuserbundle-installation-et-configuration-pas-a-pas/)。

# stored-procedures - 需要帮助：为批量插入创建存储过程

> ID：15708266
> 
> 赞同：0
> 
> 时间：2013-03-29T17:27:28.743
> 
> 标签：stored-procedures, batch-file, bulkinsert

首先，我是新人。我在 SQL Server 2008 R2 上。我有一个有效的批量插入脚本。我尝试创建一个存储过程，然后将其保存为`storedprocedure.sql`. 最终，我需要一个`.bat`文件来启动批量插入。我有另一个可以运行外部程序的程序，但它只能看到`.bat`或`.exe`。

所以，这是我的批量插入脚本：

```
Bulk Insert MyDatabase.dbo.cust_adj
From 'C:\path\importformat.txt' 
With 
(
   FieldTerminator= '|', 
   Rowterminator= '\n' 
) 
Go

(this works) 
```

然后我尝试创建存储过程：

```
Create Procedure LoadDailyAdjReport
AS
    Bulk Insert MyDatabase.dbo.cust_adj 
    From 'C:\path\importformat.txt' 
    With 
    ( 
       FieldTerminator= '|', 
       Rowterminator= '\n' 
    ) 
Go 
```

它说它成功了......但我不知道如何检查它。

所以然后我尝试制作一个 .bat 文件并尝试：

```
@echo off
sqlcmd -S MyServer\MyDataBase -i C:\mypath\Load_Daily_Adjustment.sql 
```

它不起作用。起初我认为这是我的 .bat 指令（可能不正确），但后来我想知道我的存储过程是否正确。问题是我真的没有足够的知识来解决这个问题。有人可以就这应该是什么样子提供一些建议或指示吗？

真的非常感谢你。

好的，在 SQL Server 上这个 .bat 文件可以工作：

sqlcmd -S MyServerName -E -d MyDatabase -Q "EXEC MyStoredProcedure"

假设服务器： \Server1\ 我运行 bat 文件的程序在另一台服务器上。文件是共享的，用户对 SQL、文件夹、程序等具有安全性。

如何将 .bat 文件更改为位于程序的服务器上？

因此，在 Server2 上，我希望拥有访问和打开 Server1 上的 .bat 的 bat 文件。为此，我是否需要将 .bat 文件更改为具有 \Server1\PathName\File.bat 的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:31:52.407

执行 SP LoadDailyAdjReport 的 SQL 将是`EXEC LoadDailyAdjReport`- 所以在 ypur 批处理文件 SQLCMD 中试试这个：

```
sqlcmd -S YourServerName -E -d YourDataBaseName -Q "EXEC LoadDailyAdjReport" 
```

（-E 使用受信任的连接（Windows 登录）这里有更多详细信息
[http://msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)）

如果您想尝试将 .txt 文件名作为参数传递，请参阅
[如何使用 sqlcmd.exe 调用带有参数的存储过程？](https://stackoverflow.com/questions/6405123/how-do-i-call-a-stored-procedure-with-arguments-using-sqlcmd-exe)

# r - knitr 的缓存结果如何用于重现给定块中的环境？

> ID：15708269
> 
> 赞同：22
> 
> 时间：2013-03-29T17:27:38.067
> 
> 标签：r, knitr

## tl;博士

**我的问题：**在 R 会话中，是否有某种方法可以使用**knitr**的缓存结果“快进”到给定代码块中可用的环境（即对象集），就像它`knit()`本身一样？

* * *

## 设置：

**knitr**内置的代码块缓存是其杀手级功能之一。

当某些块包含耗时的计算时，它特别有用。除非它们（或它们所依赖的块）被更改，否则只需要在第一次`knit`编辑文档时执行计算：在所有后续调用 时`knit`，块创建的对象只会从缓存中加载。

这是一个最小的示例，一个名为的文件`"lotsOfComps.Rnw"`：

```
\documentclass{article}
\begin{document}

The calculations in this chunk take a looooong time.

<<slowChunk, cache=TRUE>>=
Sys.sleep(30)  ## Stands in for some time-consuming computation
x <- sample(1:10, size=2)
@

I wish I could `fast-forward' to this chunk, to view the cached value of 
\texttt{x}

<<interestingChunk>>=
y <- prod(x)^2
y
@

\end{document} 
```

编织和 TeXify 所需的时间`"lotsOfComps.Rnw"`：

```
## First time
system.time(knit2pdf("lotsOfComps.Rnw"))
##   user  system elapsed
##   0.07    0.02   31.81

## Second (and subsequent) runs
system.time(knit2pdf("lotsOfComps.Rnw"))
##   user  system elapsed
##   0.03    0.02    1.28 
```

## 我的问题：

在 R 会话中，是否有某种方法可以使用**knitr**的缓存结果“快进”到给定代码块中可用的环境（即对象集），就像它`knit()`本身一样？

* * *

执行`purl("lotsOfComps.Rnw")`然后运行代码`"lotsOfComps.R"`是行不通的，因为沿途的所有对象都必须重新计算。

理想情况下，可以做这样的事情来结束在开头存在的环境中`<<interestingChunk>>=`：

```
spin("lotsOfComps.Rnw", chunk="interestingChunk")
ls()
# [1] "x"
x
# [1] 3 8 
```

既然`spin()`（还没有？）可用，那么获得等效结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T19:13:18.100

这一定是我一段时间以来写过的最丑陋的东西之一……

基本思想是扫描 .Rnw 文件中的块，提取它们的名称，检测哪些被缓存，然后确定哪些需要加载。一旦我们这样做了，我们将逐步扫描并获取每个需要加载的块名称，从缓存文件夹中检测数据库名称，然后使用`lazyLoad`. 在我们加载所有需要强制评估的块之后。丑陋，我敢肯定有一些错误，但它似乎适用于您提供的简单示例和我创建的其他一些最小示例。这假设 .Rnw 文件位于当前工作目录中......

```
load_cache_until <- function(file, chunk, envir = parent.frame()){
    require(knitr)

    # kludge to detect chunk names, which come before the chunk of
    # interest, and which are cached... there has to be a nicer way...
    text <- readLines(file)
    chunks <- grep("^<<.*>>=", text, value = T)
    chunknames <- gsub("^<<([^,>]*)[,>]*.*", "\\1", chunks)
    #detect unnamed chunks
    tmp <- grep("^\\s*$", chunknames)
    chunknames[tmp] <- paste0("unnamed-chunk-", seq_along(tmp))
    id <- which(chunk == chunknames)
    previouschunks <- chunknames[seq_len(id - 1)]
    cachedchunks <- chunknames[grep("cache\\s*=\\s*T", chunks)]

    # These are the names of the chunks we want to load
    extractchunks <- cachedchunks[cachedchunks %in% previouschunks]

    oldls <- ls(envir, all = TRUE)
    # For each chunk...
    for(ch in extractchunks){   
        # Detect the file name of the database...
        pat <- paste0("^", ch, ".*\\.rdb")
        val <- gsub(".rdb", "", dir("cache", pattern = pat))
        # Lazy load the database
        lazyLoad(file.path("cache", val), envir = envir)
    }
    # Detect the new objects added
    newls <- ls(envir, all = TRUE)
    # Force evaluation...  There is probably a better way
    # to do this too...
    lapply(setdiff(newls, oldls), get)

    invisible()

}

load_cache_until("lotsOfComps.Rnw", "interestingChunk") 
```

让代码更健壮留给读者作为练习。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T02:21:11.547

这是一个解决方案，它仍然有点尴尬，但它有效。这个想法是添加一个名为的块选项，默认情况下`mute`采用`NULL`，但它也可以采用 R 表达式，例如`mute_later()`下面。当`knitr`评估块选项时，`mute_later()`可以评估并`NULL`返回；同时，有副作用`opts_chunk`（设置全局块选项，如`eval = FALSE`）。

现在您需要做的是放入`mute=mute_later()`要跳过其余块的块，例如，您可以将此选项从`example-a`移至`example-b`。因为`mute_later()`返回`NULL`恰好是选项的默认值，所以`mute`即使您移动此选项，缓存也不会被破坏。

```
\documentclass{article}
\begin{document}

<<setup, include=FALSE, cache=FALSE>>=
rm(list = ls(all.names = TRUE), envir = globalenv())
opts_chunk$set(cache = TRUE) # enable cache to make it faster
opts_chunk$set(eval = TRUE, echo = TRUE, include = TRUE)

# set global options to mute later chunks
mute_later = function() {
  opts_chunk$set(cache = FALSE, eval = FALSE, echo = FALSE, include = FALSE)
  NULL
}
# a global option mute=NULL so that using mute_later() will not break cache
opts_chunk$set(mute = NULL)
@

<<example-a, mute=mute_later()>>=
x = rnorm(4)
Sys.sleep(5)
@

<<example-b>>=
y = rpois(10,5)
Sys.sleep(5)
@

<<example-c>>=
z = 1:10
Sys.sleep(3)
@

\end{document} 
```

从某种意义上说，这很尴尬，您必须`, mute=mute_later()`到处剪切和粘贴。理想情况下，您应该像我为 Barry 写的要点一样设置块标签。

我原来的要点不起作用的原因是因为在缓存块时忽略了块挂钩。第二次你`knit()`的文件，块挂钩被跳过，因此`checkpoint`对于其余的块，你看到所有的块都被评估了。相比之下，块选项总是动态评估的。`example-a``eval=TRUE`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T06:49:10.473

Yihui指出了一个几乎完全符合我要求[的要点。](https://gist.github.com/yihui/2629886#file-knitr-checkpoint-rnw)

针对 Barry Rowlingson（又名 Spacedman）提出的问题，Yihui 构建了一个“检查点”钩子，让用户设置将通过调用 knit 处理的最后一个块的名称。要通过一个命名处理块`example-a`，只需`opts_chunk$set(checkpoint = 'example-a')`在初始“设置”块中的某处进行。

该解决方案运行良好 --- 第一次使用给定的检查点运行。不幸的是，第二次和随后的时间`knit`似乎忽略了检查点并处理了所有块。（我在下面讨论了一种解决方法，但这并不理想）。

[以下是易辉要点](https://gist.github.com/yihui/2629886#file-knitr-checkpoint-rnw)的略删减版：

```
\documentclass{article}
\begin{document}

<<setup, include=FALSE>>=
rm(list = ls(all.names = TRUE), envir = globalenv())
opts_chunk$set(cache = TRUE) # enable cache to make it faster
opts_chunk$set(eval = TRUE, echo = TRUE, include = TRUE)

# Define hook that will skip all chunks after the one named in checkpoint
knit_hooks$set(checkpoint = function(before, options, envir) {
if (!before && options$label == options$checkpoint) {
opts_chunk$set(cache = FALSE, eval = FALSE, echo = FALSE, include = FALSE)
}
})

## Set the checkpoint
opts_chunk$set(checkpoint = 'example-a') # restore objects up to example-a
@

<<example-a>>=
x = rnorm(4)
@

<<example-b>>=
y = rpois(10,5)
@

<<example-c>>=
z = 1:10
@

\end{document} 
```

因为`checkpoint="example-a"`，上面的脚本应该运行第二个块，然后抑制所有进一步的块，包括创建`y`和的块`z`。让我们尝试几次，看看会发生什么：

```
library(knitr)

## First time, works like a charm
knit("checkpoint.Rnw")
ls()
[1] "x"

## Second time, Oops!, runs right past the checkpoint
knit("checkpoint.Rnw")
ls()
[1] "x" "y" "z" 
```

我上面提到的解决方法是，在第一次运行之后，

1.  编辑`checkpoint.Rnw`以设置另一个检查点（通过执行，例如，`opts_chunk$set(checkpoint = 'example-b')`）
2.  运行`knit("checkpoint.Rnw")`，
3.  编辑`checkpoint.Rnw`以将检查点设置回`'example-a`, （通过执行 , `opts_chunk$set(checkpoint = 'example-a')`）
4.  再跑`knit("checkpoint.Rnw)`一次。这将再次处理所有块，但不超过`example-a`.

这比重新计算块中的所有对象要快得多，因此了解这一点是件好事，即使它并不理想。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-10T10:04:27.220

在 markdown 文件的底部添加以下代码块怎么样？

```
```{r save_workspace_if_not_saved_yet, echo=FALSE}
if(!file.exists('knitr_session.RData')) {
  save.image(file = 'knitr_session.RData')
}
``` 
```

第一次编织时，将保存流程结束时的工作区状态（假设流程不会产生任何错误）。每次您想要最新版本的工作区时，只需删除工作目录中的文件即可。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-29T19:02:10.110

它们就像任何由`save`. [如果您从它的新位置](https://raw.github.com/yihui/knitr-examples/master/005-latex.Rtex)获取 knitr-cache 示例，它只是：

```
> library(knitr)
> knit("./005-latex.Rtex")
> load("cache/latex-my-cache_d9835aca7e54429f59d22eeb251c8b29.RData")
> ls()
 [1] "x" 
```

# css - 从 Django CMS 中去除默认 CSS

> ID：15708271
> 
> 赞同：1
> 
> 时间：2013-03-29T17:27:39.893
> 
> 标签：css, django, django-cms

我注意到 Django CMS 的文本插件呈现的文本是用自己的 CSS 硬编码的，`p`特别是标签。有没有办法删除这种样式？我希望文本继承我正在使用的主题中指定的样式。在 GUI 中似乎没有执行此操作的选项，并且[文档中也没有提及 text plugin](http://django-cms.readthedocs.org/en/2.3.5/getting_started/plugin_reference.html#text)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:14:52.023

如果您查看[文本插件使用的模板，](https://github.com/divio/django-cms/blob/develop/cms/plugins/text/templates/cms/plugins/text.html)您会注意到它只是呈现 TinyMCE（或您使用的任何所见即所得编辑器）的内容，因此您看到的标记可能来自那里，而不是模板。

您可以自己覆盖此模板，方法是`text.html`在您的模板文件夹（即`/templates/cms/plugins/text.html`）中创建一个文件并添加一个环绕`div`：

```
<div class="cms-text-plugin">{{ body|safe }}</div> 
```

现在您可以使用 CSS 定位元素：

```
.cms-text-plugin p{ ... }
.cms-text-plugin h1{ ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:42:51.123

您可以通过在模板目录中创建相同的目录结构和文件名来覆盖每个 CMS 插件的模板。然后你可以控制标记。这个概念与覆盖 Django 中第三方提供的任何其他模板相同。这就像覆盖管理员提供的模板等。

# c# - 如何在 HTML 中的 SQL 中显示 XML 数据

> ID：15708275
> 
> 赞同：-1
> 
> 时间：2013-03-29T17:27:48.160
> 
> 标签：c#, sql, xml-parsing

我正在重新设计一个将 sql 中的内容存储为 xml 数据的旧应用程序。我知道如果我有一个文件，我可以使用它来以 HTML 格式显示数据：

```
 xmlhttp.open("GET","xmlfile.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML; 
```

现在，假设我在 SQL 中有一个表。在一个列中，我有“xmlfile.xml”的内容。我该如何去显示这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:26:27.120

您是否正在寻找 xml 中的特定字段，SQL Server 可以在 sql server 列行中查询 xml 标记的字段。

[http://msdn.microsoft.com/en-us/library/ms345122(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms345122(v=sql.90).aspx)

# c++ - 使用 C++ 实现 Poppler 时出错

> ID：15708276
> 
> 赞同：1
> 
> 时间：2013-03-29T17:27:55.503
> 
> 标签：c++, pdf, codeblocks, undefined-reference, poppler

我目前正在研究使用 poppler 库的项目。就目前而言，我有以下内容：

在以下文件夹（C:\Users\ ...\Anotation Extraction）中，我将所有与 Codeblocks C++ 项目（包括 main.cpp）关联的文件以及当前版本的 poppler 及其关联文档放在一个文件夹中称为“poppler-0.22.2”。我在这个文件夹中也有一个测试 pdf。（系统：Windows 7，64 位，使用 MinGW 的代码块）

在我的 main.cpp 文件中，我有以下内容：

```
#include <iostream>
#include "poppler-0.22.2/cpp/poppler-document.h"

using namespace std;

int main()
{
const string dir = "C:\\Users\\...\\test.pdf";

poppler::document* doc;
doc = poppler::document::load_from_file(dir);
delete doc;

cout << dir << endl;
return 0;
} 
```

但是，当我尝试构建此代码时，会弹出以下错误，我完全不知道为什么。

> obj\Debug\main.o||在函数'main'中：|
> 
> C:\Users...\Anotation Extraction\main.cpp|11|未定义对` *imp* __ZN7poppler8document14load_from_fileERKSsS2_S2_'的引用|
> 
> C:\Users...\Anotation Extraction\main.cpp|12|未定义对` *imp* __ZN7poppler8documentD1Ev'的引用|
> 
> ||=== 构建完成：2 个错误，0 个警告（0 分钟，1 秒）===|

你们可以提供的任何帮助将不胜感激。

# bash - 有条件的 sed 替换

> ID：15708278
> 
> 赞同：2
> 
> 时间：2013-03-29T17:28:03.767
> 
> 标签：bash

目前，我有一个功能齐全的 sed 命令，它通过以下方式将项目添加到特定文本文件中的列表中......

```
ITEMS="$ITEM1 $ITEM2 $ITEM3" 
```

当我们希望插入时变为以下`$ITEM4`...

```
ITEMS="$ITEM1 $ITEM2 $ITEM3 $ITEM4" 
```

列表中的项目数量未知；它是动态的。并且该文本中的美元符号和引号应按字面意思理解。

我使用以下命令来完成对列表的添加（变量`$itemNum`分配在其他地方）...

```
sed "/^\s*ITEMS=/s/\"$/ \$ITEM$itemNum&/" file.txt 
```

当然，所有这些都是找到以`ITEMS=`（可能还有前导空格）开头的行，并将该行中的最后一个双引号替换为空格加上所需的项目加上双引号（将替换的双引号放回原处）。但是，我还有一个额外的情况，`ITEMS`列表可能是空的，像这样......

```
ITEMS="" 
```

在这种情况下，我的命令会`$ITEM4`像这样插入到列表的末尾...

```
ITEMS=" $ITEM4" 
```

但是，我希望我的命令能够说明一个空列表，并且当列表确实为空时不放置前导空格，所以它看起来像......

```
ITEMS="$ITEM4" 
```

我怎样才能改变我现有的命令来最好地完成这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:09:35.990

以您的主题为指导，这是使用 sed 有条件地执行此操作的一种方法：

```
sed -e '/^\s*ITEMS=/{s/=""/="$ITEM'"$itemNum"'"/;t;s/"$/ $ITEM'"$itemNum&/;}" file.txt 
```

主要变化是我们首先尝试替换空引号（“”）。如果成功，条件分支 t 会将我们发送到脚本的末尾，绕过另一个替换。第二次替换仅在第一次失败时发生。我已经更改了引用以摆脱一些“倾斜的牙签”，但这大约是您原始命令的 66%。

编辑：OP要求的“倾斜牙签”

原文将整个 sed 脚本行放在双引号中，因此所有 " 和大多数 $ 都必须用反斜杠转义。像这样重写我的版本如下所示：

```
sed -e "/^\s*ITEMS=/{s/=\"\"/=\"\$ITEM$itemNum\"/;t;s/\"$/ \$ITEM$itemNum&/;}" file.txt 
```

我只是发现所有这些反斜杠会分散注意力，所以我尽可能多地把它放在单引号中，只在双引号中留下 $itemNum。在 shell 脚本中，如果两个字符串相邻，它们会粘在一起，因此`var1=QRS; var2='ABC'$var1'XYZ'`将 var2 设置为 'ABCQRSXYZ' - 如果您认为变量可能包含空格，那么最好引用它：（`var1=QRS; var2='ABC'"$var1"'XYZ'`' 之间没有空格" 和 "' 在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:43:56.620

在这种情况下，awk 更加灵活：

```
awk -F'"' -vn="$itemNum" '/^\s*ITEMS=/{sub(/"$/,($2?" ":"")"$ITEM"n"&")}1' file 
```

测试：

```
kent$  itemNum=4 
kent$  echo 'ITEMS=""'|awk -F'"' -vn="$itemNum" '/^\s*ITEMS=/{sub(/"$/,($2?" ":"")"$ITEM"n"&")}1'
ITEMS="$ITEM4"
kent$  echo 'ITEMS="$ITEM1 $ITEM2 $ITEM3"'|awk -F'"' -vn="$itemNum" '/^\s*ITEMS=/{sub(/"$/,($2?" ":"")"$ITEM"n"&")}1'                                                       
ITEMS="$ITEM1 $ITEM2 $ITEM3 $ITEM4" 
```

# android - Android 浏览器仅加载一条 Facebook 评论

> ID：15708281
> 
> 赞同：3
> 
> 时间：2013-03-29T17:28:14.830
> 
> 标签：android, html, facebook, browser

我遇到了这个奇怪的问题，Android 股票浏览器只在页面上为 Facebook 社交评论插件加载一条评论。这没什么大不了的，但我的应用程序使用 webview 来显示评论。到目前为止，我已经在我的两台设备上验证了这一点。当我使用 Chrome 时，这个问题不存在，但是当我使用 Android 股票浏览器时，它似乎会切断数据。

我的html代码很简单

```
 <html xmlns:fb="http://ogp.me/ns/fb#">
    <head><title>Facebooktest</title>

    </head>

    <body>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

        <fb:comments href="http://example.com" width="470" num_posts="10" mobile="true"></fb:comments>

    </body>
   </html> 
```

这是我的应用程序中显示的屏幕截图

![在此处输入图像描述](../Images/c6ecb7787c7f671bb40491aa230e3823.png)

这是我的平板电脑在 Android 浏览器中加载网页时的视图

![在此处输入图像描述](../Images/f34b8097e1193b04cbfbb9c36e858835.png)

* * *

# 解决了

大约花了两周时间，但评论又开始出现了。我假设这是 Facebook 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:47:11.933

这个问题又开始了，[https://developers.facebook.com/bugs/240570862734465](https://developers.facebook.com/bugs/240570862734465) 有一张关于这个的ticket提交给FB。评论在短时间内正常工作，然后又开始切断。

# intellij-idea - 配置 IDEA 以使用 ivy 进行部署

> ID：15708282
> 
> 赞同：0
> 
> 时间：2013-03-29T17:28:17.347
> 
> 标签：intellij-idea, ivy

我有一个使用 IVY 的项目。我的构建脚本很好地解决了依赖关系。

我在 IntelliJ iml 文件中配置了一个库（让我们称之为`Project_libs`），这样当我部署应用程序时，jar 就会发布到服务器上。

我有一个 ant 任务`ide-setup`，它从 Ivy 本地 repo 复制必要的 jar，`Project_libs`以便在部署期间这些 jar 可供 IDEA 使用。

假设我对 utils 等通用库进行了更改。

*   构建公共库。
*   转到将这个公共库声明为依赖项的项目并运行`ide-setup`
*   然后启动服务器。

有没有一种直接的方法可以让我配置 IDEA 从 ivy.xml 文件中读取依赖项，而不是执行这个复杂的设置整个过程的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:08:16.117

我对 InelliJ IDEA 一无所知，但我相信你可以使用 ant 和 IVY 完成你想要的。来自[常春藤文档](http://ant.apache.org/ivy/history/latest-milestone/use/buildlist.html)

```
<ivy:buildlist reference="build-path" ivyfilepath="ivy/ivy.xml" leaf="mymodule">
  <fileset dir="projects" includes="**/build.xml"/>
</ivy:buildlist>

Builds a list of build.xml files sorted according to the ivy.xml files found in an
ivy directory relative to those build files. Only build.xml files of modules which
have dependencies (direct or transitive) on mymodule are put in the result list. 
```

因此，如果您将叶子设置为等于 utils，它可能会返回一个 build.xml 文件列表，这些文件按依赖顺序依赖于 utils。然后，您所要做的就是按顺序浏览这些 build.xml 文件并调用它们的构建过程（可能通过 subant 调用）

# c++ - 内存共享；遗产; 基础实例和派生实例；C++

> ID：15708284
> 
> 赞同：0
> 
> 时间：2013-03-29T17:28:26.450
> 
> 标签：c++, memory, inheritance, sharing

好的，这个例子对于我想要理解的概念来说非常简单。我只会给你看代码：

```
class Base
{
protected:
    string name;
public:
    virtual string getName() const { return this->name; }
    virtual void setName(string name) { this->name = name; }
....
}

class Derived : public Base
{
private:
    double price;
....
}

main(int argc, char** argv)
{

    Base* base = new Base("Base Class");
    Derived* derived = new Derived(base, 453.21);
    derived->setName("Name changed!");

    cout << "Name of instance: " << base->getName() << endl;

    // Desired effect
        Output: 'Name changed!'
    // Actual effect
        Output: 'Base Class'
....
} 
```

对我来说问题是这样的。我想参考已经创建的基类实例创建派生类的实例，所以当我通过派生实例更改基类的任何成员变量时，我可以按照上面演示的方式看到先前创建的基实例的更改。

注意：我希望你能理解我的意思，因为我知道我的术语可能有点不对劲。请不要苛刻。:)

注意：我不会显示/编写构造函数，因为我不确定执行此操作的最佳方法是什么，即使存在并且语法可能不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:34:37.853

这似乎表明了问题：

```
Base* base = new Base("Base Class");
Derived* derived = new Derived(base, 453.21); 
```

因为通常不需要单独构建`Base`类。您的派生类将已经`Base`隐式包含一个实例，您不必手动添加指向一个实例并从 ctor 设置它。我不知道你的 ctor 看起来如何，但它*应该*是这样的：

```
Derived(const std::string& name, double p) : Base(name), price( p ) {} 
```

如果这足以自己修复它，很好，否则发布您的示例的***所有***代码。而不是我上面引用的代码中的两行，它应该看起来更像：

```
Derived* derived = new Derived("Base Class", 453.21); 
```

如果您发布 的代码`Derived`，这对我们来说应该是显而易见的，并且在您的具​​体示例中向您解释它会容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:42:18.270

您尝试做的方式很奇怪，但您可以简单地使用继承概念，如下代码：

```
class Base
{
public:
    Base(const string &name) : name(name) {}
    virtual void setName(const string &name) { this->name = name; }
    virtual string getName() const { return name; }
protected:
    string name;
};

class Derived : public Base
{
public:
    Derived(const string &name, double price) : Base(name), price(price) {}
private:
    double price;
};

int main()
{
    Derived* derived = new Derived("Base Class", 453.21);

    derived->setName("Name changed!");

    Base *base = derived;

    cout << "Name of instance: " << base->getName() << endl;
} 
```

输出

> 实例名称：名称已更改！

您不需要创建`Base`对象并将其传递给派生对象。

相反，创建一个派生对象并将其地址传递给一个`Base`指针。

# android - 如何从适配器 startActivityForResult 以将结果返回到 Fragment

> ID：15708285
> 
> 赞同：9
> 
> 时间：2013-03-29T17:28:31.320
> 
> 标签：android, adapter, fragment

我有几个带有自定义 ListViews 的片段。他们使用我的自定义 ListAdapter，我在其中处理对列表元素的点击。我需要从此 OnClickListener 开始另一个活动并将一些信息返回给 Fragment。我尝试使用

```
Intent intent=new Intent(context, DataFillerActivity.class);  
((Activity) context).startActivityForResult(intent, 3); 
```

但 DataFillerActivity 将结果返回给 MainActivity，而不是 Fragment。那么解决这个问题的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-28T04:50:28.013

像这样在 Main Activity 中制作 onActivityResult 方法

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        //super.onActivityResult(requestCode, resultCode, data);
        // Check if image is captured successfully

        super.onActivityResult(requestCode, resultCode, data);
        for (Fragment fragment : getSupportFragmentManager().getFragments()) {
            fragment.onActivityResult(requestCode, resultCode, data);
        }
    } 
```

它将结果代码传递给它的子片段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T16:47:27.983

正如史蒂夫所写，片段应该是模块化的。然而，这意味着通信不应该**通过**任何活动，而是留在片段内。

要解决这个问题，请确保您`ListAdapter`有对片段的引用并使用`fragment.startActivityForResult()`. 然后结果将返回到片段的`onActivityResult()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T18:47:38.587

要更新您的片段，唯一的方法应该是结束活动。那是因为 Fragment 被设计成模块化的。

[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

如果您为结果启动 Acitivity，则结果将传递给启动请求的 Activity。现在您可以将数据传递给您想要的片段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T17:34:14.027

只需`onActivityresult`在您的 Activity 类中覆盖并将结果传递给来自 Activity 的片段，您可以找到片段，但可以找到您的标签

# c# - Console.KeyAvailable - 如何重置此布尔值？

> ID：15708289
> 
> 赞同：3
> 
> 时间：2013-03-29T17:28:38.357
> 
> 标签：c#, boolean

在这里使用 C#。我正在创建一个控制台应用程序。我有两种方法可以滚动文本，而不是立即在屏幕上显示它。一个与 Console.Write() 相同，另一个与 Console.WriteLine() 相同。不同之处在于每个字符之间有 30 毫秒的延迟。我正在努力做到这一点，以便当您按住一个键时，每个字符之间的延迟会加快 5 毫秒。问题是，一旦你按下一个键，Console.KeyAvailable 就为真并且不会重置，因此它只会延迟 5 毫秒。有没有办法将它设置回false，或者我可以做些什么来完成这个？这是我的代码：

```
 //Console.Write() version
    static void RPGWrite(string write)
    {
        char[] writearray = write.ToCharArray();
        int writearraycount = writearray.Count();
        for (int x = 0; x < writearraycount; x++)
        {
            Console.Write(Convert.ToString(writearray[x]));
            if (Console.KeyAvailable == false)
                System.Threading.Thread.Sleep(30);
            else
                System.Threading.Thread.Sleep(5);                   
        }            
    }
    //Console.WriteLine() version
    static void RPGWriteLine(string write)
    {
        char[] writearray = write.ToCharArray();
        int writearraycount = writearray.Count();
        for (int x = 0; x < writearraycount; x++)
        {
            Console.Write(Convert.ToString(writearray[x]));
            if (Console.KeyAvailable == false)
                System.Threading.Thread.Sleep(30);
            else
                System.Threading.Thread.Sleep(5);
        }
        Console.Write("\n");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:12:56.860

[nkvu - 将评论中的项目移至此处，以防对其他人有帮助]

AFAIK，设置[`KeyAvailable`](http://msdn.microsoft.com/en-us/library/system.console.keyavailable.aspx)回 false 是您实际上需要从流中读取密钥（例如，通过使用[`Console.ReadKey`](http://msdn.microsoft.com/en-us/library/x3h8xffw.aspx)）。

Using`Console.ReadKey(true)`将从流中读取一个字符，而不会回显到控制台以供用户查看 - 尽管请注意 MSDN 文档中关于单独按下 Alt、Ctrl 或 Shift 键的备注。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:23:14.863

这是最终为我工作的代码：

```
 //Console.Write() version
    static void RPGWrite(string write)
    {
        char[] writearray = write.ToCharArray();
        int writearraycount = writearray.Count();
        for (int x = 0; x < writearraycount; x++)
        {
            if (Console.KeyAvailable == false)
            {
                Console.Write(Convert.ToString(writearray[x]));
                System.Threading.Thread.Sleep(30);
            }
            else
            {
                Console.Write(Convert.ToString(writearray[x]));
                if (x < (writearraycount - 1))
                {
                    x++;
                    Console.Write(Convert.ToString(writearray[x]));
                }
                if (x < (writearraycount - 2))
                {
                    x++;
                    Console.Write(Convert.ToString(writearray[x]));
                }
                if (x < (writearraycount - 3))
                {
                    x++;
                    Console.Write(Convert.ToString(writearray[x]));
                }
                if (x < (writearraycount - 4))
                {
                    x++;
                    Console.Write(Convert.ToString(writearray[x]));
                }
                Console.ReadKey(true);
            }
        }           
    }
    //Console.WriteLine() version
    static void RPGWriteLine(string write)
    {
        char[] writearray = write.ToCharArray();
        int writearraycount = writearray.Count();
        for (int x = 0; x < writearraycount; x++)
        {
            if (Console.KeyAvailable == false)
            {
                Console.Write(Convert.ToString(writearray[x]));
                System.Threading.Thread.Sleep(30);
            }
            else
            {
                Console.Write(Convert.ToString(writearray[x]));
                if (x < (writearraycount - 1))
                {
                    x++;
                    Console.Write(Convert.ToString(writearray[x]));
                }
                if (x < (writearraycount - 2))
                {
                    x++;
                    Console.Write(Convert.ToString(writearray[x]));
                }
                if (x < (writearraycount - 3))
                {
                    x++;
                    Console.Write(Convert.ToString(writearray[x]));
                }
                if (x < (writearraycount - 4))
                {
                    x++;
                    Console.Write(Convert.ToString(writearray[x]));
                }
                Console.ReadKey(true);
            }
        }
        Console.Write("\n");
    } 
```

# php - SQL：从数据库表中的一列中选择不同的值

> ID：15708291
> 
> 赞同：0
> 
> 时间：2013-03-29T17:28:44.623
> 
> 标签：php, mysql, sql

我有一张桌子叫`replies`. 它里面有一列叫做`approval`.

我使用的值是`yes` `no`, 和`disapproved`

*   `yes`由管理员批准并向所有人展示。
*   `no`尚未批准，仅向管理员显示。
*   `disapproved`被管理员拒绝并且没有显示。

有没有办法在批准列中选择具有两个值的回复？`yes`和`no`。
因为我不想显示`disapproved`回复

我搜索网络和stackoverflow。我没有地方可能是因为我没有为我的问题使用正确的关键词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:37:41.513

```
SELECT * FROM replies WHERE approval IN ('yes', 'no'); 
```

或者，如果除了您提到的三个之外，没有其他可能的值：

```
SELECT * FROM replies WHERE approval <> 'disapproved'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:37:42.277

只需`IN`在`WHERE`子句中使用：

```
SELECT * FROM replies WHERE approval in ('yes', 'no'); 
```

[现场小提琴](http://sqlfiddle.com/#!2/13b44/1/0)。这是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:38:14.483

这会起作用吗：

```
SELECT * FROM replies WHERE approval != 'disapproved' 
```

# database - 获取比 x 更接近的所有坐标 - 如何实现

> ID：15708292
> 
> 赞同：0
> 
> 时间：2013-03-29T17:28:45.180
> 
> 标签：database, coordinates

我有多个带有坐标的位置。我想问什么是最好的（最快的）方法，如何获得比特定点更近的所有点，例如，50 公里。

我是这样做的：我将所有坐标保存到数据库中，并且我正在查询以获取积分。这是一个好的解决方案吗？MySQL适合这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:50:57.893

专业的解决方案是[PostGIS](http://postgis.net/)，一个 PostgreSQL 的“空间数据库扩展器”。

出于简单的目的，这个相关的答案也适用于基本的 Postgres：
[如何从按距离排序的 JPA 实体中获取结果？](https://stackoverflow.com/questions/15588453/how-can-i-get-results-from-a-jpa-entity-ordered-by-distance/15594297#15594297)

# java - 尝试调用不同类中的方法时出现未定义错误

> ID：15708294
> 
> 赞同：-4
> 
> 时间：2013-03-29T17:28:50.713
> 
> 标签：java, methods

我在这里有 2 个用 java 编写的类

```
public class MinHeapify{
public MinHeapify(String a[], int start, int end){
minHeapify(a,start,end);
}
public static void exchange(String a[],int i,int j) {
String temp = a[i];
a[i] = a[j];
a[j] = temp;
}
public static int parent(int i) {
return (int) Math.floor((i - 1)/2);
}
public static int left(int i) {
return 2*i + 1;
}
public static int right(int i) {
return 2*(i+1);
}
public static void minHeapify(String a[], int start,int end) {
int l = left(start); int r = right(start);
int smallest=0;
if(l >= end){
  smallest = (l < start)? l: start;
}
if(r >= end){
  smallest = (r < smallest)? r: smallest;
}
if(smallest != start) {
  exchange(a,start,smallest);
  minHeapify(a,smallest,end);
}
}
}

import java.util.Scanner;

public class ReservationArray{
private String [] array = new String [50];

public ReservationArray(String [] arg){
int next = 0;
int next2 = 0;
while(arg[++next]!= null){
  if(next != arg.length){
    arg[next] = array[next2];
    next = next++;
    next2 = next2++;
  }
  else if(next == array.length && next!= arg.length){
    String [] temp = new String[2*array.length+1];
    for(int i=0; i<next; i++){
      temp[i] = array[i];
      array = temp;
      temp = null;
    }
  } else{
    if(next < (array.length/2)-1){
      String [] temp = new String[1/2*array.length-1];
    for(int i=0; i<next; i++){
      temp[i] = array[i];
      array = temp;
      temp = null;
    }
    }
  }
}
minHeapify(array, 0, array.length-1);

} 
```

当我尝试编译它时出现的错误是“对于类型 ReservationArray，方法 minHeapify(java.lang.String[], int, int) 是未定义的”，我不明白这是什么意思，我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:31:36.997

```
MinHeapify mh = new MinHeapify();
mh.minHeapify(array, 0, array.length-1); 
```

由于您的方法是静态的，因此您应该这样调用。

```
MinHeapify.(array, 0, array.length-1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:31:54.337

该方法`minHeapify`属于`MinHeapify`类而不是`ReservationArray`，因此是错误的。作为它`static`，您可以使用：

```
MinHeapify.minHeapify(array, 0, array.length - 1); 
```

或者，您可以使用`static`导入：

```
import static com.your.package.MinHeapify.minHeapify; 
```

并使用当前不合格的方法调用表示法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:32:01.493

将返回类型添加到它

```
public void MinHeapify(String a[], int start, int end) 
```

和

```
MinHeapify.minHeapify(array, 0, array.length - 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:33:49.413

那么minHeapify是一个方法就是MinHeapify类。除非您使用对 MinHeapify 的引用来访问它，否则您无法在类 ReservationArray 中访问它。

# perl - 从 csh 脚本调用 perl 时如何逐字扩展变量？

> ID：15708295
> 
> 赞同：1
> 
> 时间：2013-03-29T17:28:51.790
> 
> 标签：perl, csh

下面是一个`csh`脚本。

```
#! /bin/csh
set alpha=10\20\30;
set beta = $alpha.alpha;
perl -p -i.bak -e 's/gamma/'$beta'/' tmp; 
```

该`tmp`文件仅包含单词`gamma`. 运行后`tmp.csh`，我希望`10\20\30.alpha`在 tmp 中，但现在是`102030.alpha`.

在这种情况下如何保留斜线？

注意：我不喜欢更改 alpha 变量的定义，因为它仅用于脚本中需要采用这种格式 (10\20\30) 的其他地方。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:47:42.023

在 csh 中，对于您的 alpha 分配，反斜杠被视为“文字 2 或 3”。为了防止 csh 这样做，分配需要用引号引起来。

```
#! /bin/csh
set alpha="10\20\30";
set beta = $alpha.alpha;
perl -p -i.bak -e 's/gamma/'$beta'/' tmp; 
```

如果有疑问，“回显”您的变量以准确查看它们包含的内容通常会有所帮助。我不明白你的最后一点，因为“alpha”变量不等于 10\20\30，就像你最初分配它的方式一样。

# python - 在通配符/模式上解析 Python 中的文本文档行

> ID：15708296
> 
> 赞同：1
> 
> 时间：2013-03-29T17:28:53.560
> 
> 标签：python, string

## 是）我有的

我正在解析一个 .txt 文件，其中包含在给定日期工作的人员的日程安排信息。.txt 文件如下所示：

```
START PAGE 0

XYZ Schedule for:  Saturday, March 30, 2013

Barnes, Michael8:00a10:00aTech

Collins, Jessica8:00a4:00pSupervisor

Hamilton, Patricia8:00a10:00aTech

Smith, Jan8:00a10:00aTech

Park, Kimberly8:00a10:00aTech

Edwards, Terrell10:00a12:00pTech

Green, Harrold12:00p2:00pTech

Tait, Jessica12:00p2:00pTech

Tait, Jessica2:00p4:00pTech

Hernandez, William (Monte)4:00p6:30pSupervisor

Tait, Chioma4:00p6:00pTech

Hernandez, William (Monte)6:30p7:00pSupervisor

Hernandez, William (Monte)7:00p9:00pSupervisor

Tailor, Thomas (Jason)9:00p12:00aSupervisor

Jones, Deslynne10:00p12:00aTech

3/28/2013 2:21:17 PM

END PAGE 0 
```

所以前两行和最后两行不相关，但中间的每一行都是一个人的时间表。

## 我想要的是

我想解析出每一行的片段，以便可以将其写入 .csv 文件。我可以`line.partition(',')[0]`用来获取姓氏（每行的第一部分），但之后我不知所措。我需要将以下内容传达给 Python：

1.  数字后面的部分`,`是一个部分（名字）
2.  从第一个数字到 an`a`或 a `p` （上午或下午）的部分是另一个部分（开始时间）
3.  从数字之后的部分`a`或`p`到下一个`a`或是`p`另一个部分（结束时间）
4.  最后，剩下的部分是另一个部分（班次的类型/位置。）

我生成的 csv 文件中的一行可能如下所示： `Barnes,Michael,8:00a,10:00a,Tech`

## 注意事项

1) 一个人一天可以有多个班次。2）有些人在括号中有昵称，但有些人没有。3）如果 Python 有通配符，比如`#`数字和`*`任何东西，我可以看到我如何能够继续使用`partition`并继续拆分剩余的部分，如下所示：

```
for line in input:
    name = str(line.partition(',')[0]+','+str(line.partition(',')[2].split(#)[0]))
    output.write("".join(x for x in name))
    output.write("\r\n") 
```

但是，Python 似乎没有使用这样的通配符。此外，这似乎是一个非常不雅的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:47:49.890

这应该足以让你开始：

```
import re
data = '''Barnes, Michael8:00a10:00aTech
Collins, Jessica8:00a4:00pSupervisor
Hamilton, Patricia8:00a10:00aTech
Smith, Jan8:00a10:00aTech
Park, Kimberly8:00a10:00aTech
Edwards, Terrell10:00a12:00pTech
Green, Harrold12:00p2:00pTech
Tait, Jessica12:00p2:00pTech
Tait, Jessica2:00p4:00pTech
Hernandez, William (Monte)4:00p6:30pSupervisor
Tait, Chioma4:00p6:00pTech
Hernandez, William (Monte)6:30p7:00pSupervisor
Hernandez, William (Monte)7:00p9:00pSupervisor
Tailor, Thomas (Jason)9:00p12:00aSupervisor
Jones, Deslynne10:00p12:00aTech'''

print re.findall(r'(.*?)(\d{1,2}:\d\d[ap])(\d{1,2}:\d\d[ap])(.*)', data) 
```

印刷

```
[('Barnes, Michael', '8:00a', '10:00a', 'Tech'),
 ('Collins, Jessica', '8:00a', '4:00p', 'Supervisor'),
 ('Hamilton, Patricia', '8:00a', '10:00a', 'Tech'),
 ('Smith, Jan', '8:00a', '10:00a', 'Tech'),
 ('Park, Kimberly', '8:00a', '10:00a', 'Tech'),
 ('Edwards, Terrell', '10:00a', '12:00p', 'Tech'),
 ('Green, Harrold', '12:00p', '2:00p', 'Tech'),
 ('Tait, Jessica', '12:00p', '2:00p', 'Tech'),
 ('Tait, Jessica', '2:00p', '4:00p', 'Tech'),
 ('Hernandez, William (Monte)', '4:00p', '6:30p', 'Supervisor'),
 ('Tait, Chioma', '4:00p', '6:00p', 'Tech'),
 ('Hernandez, William (Monte)', '6:30p', '7:00p', 'Supervisor'),
 ('Hernandez, William (Monte)', '7:00p', '9:00p', 'Supervisor'),
 ('Tailor, Thomas (Jason)', '9:00p', '12:00a', 'Supervisor'),
 ('Jones, Deslynne', '10:00p', '12:00a', 'Tech')] 
```

阅读`re`模块的文档以了解正则表达式。您可以将名称解析为单独的步骤，或者将正则表达式扩展为更具体。我建议使用该`csv`模块写入 csv 文件。

如果您遇到困难，请使用代码发布特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:57:52.450

假设您知道如何删除前两行和最后两行，并且其余行位于名为 的字符串中`s`，那么我将按照您的要求执行以下操作：

```
entries = [x.strip() for x in s.split('\n') if x]

for entry in entries:
    ind = [i for i,x in enumerate(entry) if x.isdigit() and not entry[i-1].isdigit()]
    name = entry[0:ind[0]]
    name = name.split(',')

    other = entry[ind[0]:]
    ind = [-1]+[i for i,x in enumerate(other) if x in ('a', 'p') and other[i-1].isdigit()]
    shifts = []
    for i in xrange(1, len(ind)):
        shifts.append(other[ind[i-1]+1:ind[i]+1])
    position = other[ind[-1]+1:]
    print(name, shifts, position) 
```

这将适用于任意数量的班次。

输出：

```
['Barnes', ' Michael'] ['8:00a', '10:00a'] Tech
['Collins', ' Jessica'] ['8:00a', '4:00p'] Supervisor
['Hamilton', ' Patricia'] ['8:00a', '10:00a'] Tech
['Smith', ' Jan'] ['8:00a', '10:00a'] Tech
['Park', ' Kimberly'] ['8:00a', '10:00a'] Tech
['Edwards', ' Terrell'] ['10:00a', '12:00p'] Tech
['Green', ' Harrold'] ['12:00p', '2:00p'] Tech
['Tait', ' Jessica'] ['12:00p', '2:00p'] Tech
['Tait', ' Jessica'] ['2:00p', '4:00p'] Tech
['Hernandez', ' William (Monte)'] ['4:00p', '6:30p'] Supervisor
['Tait', ' Chioma'] ['4:00p', '6:00p'] Tech
['Hernandez', ' William (Monte)'] ['6:30p', '7:00p'] Supervisor
['Hernandez', ' William (Monte)'] ['7:00p', '9:00p'] Supervisor
['Tailor', ' Thomas (Jason)'] ['9:00p', '12:00a'] Supervisor
['Jones', ' Deslynne'] ['10:00p', '12:00a'] Tech 
```

# javascript - 动态插入的 JQuery Mobile 滑块

> ID：15708297
> 
> 赞同：4
> 
> 时间：2013-03-29T17:28:54.667
> 
> 标签：javascript, jquery-mobile, jquery, jquery-mobile-slider

我正在动态插入滑块。问题是当我动态插入它们时，它们没有 jquerymobile 的主题。这是我使用的代码：

```
for (var i = array_colors_available.length - 1; i >= 0; i--) {
        $('#insert_colors_slider').append('<div data-role="fieldcontain" ><fieldset data-role="controlgroup"> <label for="slider-8">'+array_colors_available[i]+' : '+'</label><input id=slider-'+i+' type="range" name='+array_colors_available[i]+' value="0" min="0" max="25" data-highlight="true" data-theme=c data-track-theme="f"></fieldset></div>');
        if(array_slider_info_value != null) $('#slider-'+i).val(array_slider_info_value[i+1].value);
    }; 
```

![在此处输入图像描述](../Images/f443926d5db1374f7b1d874cb85281b6.png)

如果我使用 JQueryMobile 的方法，那么屏幕上会出现两个滑块：

```
for (var i = array_colors_available.length - 1; i >= 0; i--) {
        $('#insert_colors_slider').append('<div data-role="fieldcontain" ><fieldset data-role="controlgroup"> <label for="slider-8">'+array_colors_available[i]+' : '+'</label><input id=slider-'+i+' type="range" name='+array_colors_available[i]+' value="0" min="0" max="25" data-highlight="true" data-theme=c data-track-theme="f"></fieldset></div>');
        $('#slider-'+i).slider();
        if(array_slider_info_value != null) $('#slider-'+i).val(array_slider_info_value[i+1].value);
    }; 
```

![在此处输入图像描述](../Images/021a83c0343e9f84a7bf966f29a19bfe.png)

我究竟做错了什么？当我不使用这些方法时，没有主题，当我使用它时，我有两个滑块而不是一个...谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T17:45:33.423

这只是 jQuery Mobile 错误之一。您的代码中也有错误，标签必须指向正确的滑块，在您的示例中并非如此。

动态滑块可以通过两种方式创建，它们都不包括**`slider()`**方法：

## 示例 1

在活动期间**`pagebeforecreate`**进行**`pagecreate`**。

工作示例：http: [//jsfiddle.net/Gajotres/caCsf/](http://jsfiddle.net/Gajotres/caCsf/)

```
$(document).on('pagebeforeshow', '#index', function(){    
    // Add a new input element
    $('[data-role="content"]').append('<input type="range" name="slider-2" id="slider-2" value="25" min="0" max="100"  />');
}); 
```

## 示例 2

在**`pagebeforeshow`**或**`pageshow`**事件期间执行此操作并用于**`trigger('create')`**设置滑块样式。

工作示例：http: [//jsfiddle.net/Gajotres/NwMLP/](http://jsfiddle.net/Gajotres/NwMLP/)

```
$(document).on('pagebeforeshow', '#index', function(){    
    // Add a new input element
    $('[data-role="content"]').append('<div data-role="fieldcontain"></div>');
    $('[data-role="fieldcontain"]').append('<fieldset data-role="controlgroup"></fieldset>');
    $('[data-role="controlgroup"]').append('<label for="slider-2">Slider 2</label>');
    $('[data-role="controlgroup"]').append('<input type="range" name="slider-2" id="slider-2" value="25" min="0" max="100"  />');
    // Enhance new input element, unfortunately slider() function is not goinf to work correctly
    //$('[type="range"]').slider();
    $('#index').trigger('create');
}); 
```

在这个例子中，如果我们尝试**`slider()`**只使用除输入框之外的所有样式。

更多关于这个和一些其他相关的东西可以在我的其他**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中找到，或者在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到。

# php - MySQL查询错误，我不知道为什么

> ID：15708298
> 
> 赞同：-2
> 
> 时间：2013-03-29T17:28:59.860
> 
> 标签：php, html, mysql, phpmyadmin, dreamweaver

好的，所以我想要构建：您登录的网站（我稍后会这样做）。有一个表单，您可以在其中提交新闻报道，然后将其输入 MySQL 数据库。然后它会显示在 iPhone 上的表格视图中（稍后会出现）。正如我所提到的，我得到一个“查询数据库时出错”。我试图修复它，但我是 MySQL 和 PHP 的新手，所以我不知道还能做什么。我在家庭服务器（WAMP）上设置了这个。

我的报告.html：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Football Central News Report Submission Page</title>
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
  <h1>Football Central News Report Submission Page</h1>
  <h2>Sumbit your football news report here</h2>
  <h3>CHECK FOR MISTAKES !!!</h3>
  <form method="post" action="report.php">
    <label for="title">Title:</label>
    <input type="text" name="title" />
    <br />
    <label for="author">Author:</label>
    <input type="text" name="author" />
    <br />
    <label for="subtitle">Subtitle:</label>
    <input type="text" name="subtitle" />
    <br />
    <label for="body">Body:</label>
    <textarea name="body"></textarea>
    <br />
    <label for="image">Image:</label>
    <input type="file" id="image" name="image" />
    <br />
    <input type="submit" value="Submit your news report" name="submit" />
  </form>
</body>
</html> 
```

我的报告.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Football Central News Report Submission Page</title>
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
  <h1>Football Central News Report Submission Page (Confirmation)</h1>

<?php
  $title = $_POST['title'];
  $author = $_POST['author'];
  $subtitle = $_POST['subtitle'];
  $body = $_POST['body'];
  $image = $_POST['image'];

  $dbc = mysqli_connect('localhost', 'root', 'xxxxxx', 'news_reports')
    or die('Error connecting to database server.');

  $query = "INSERT INTO news_reports (title, author, subtitle, body) " .
    "VALUES ('$title', '$author', '$subtitle', '$body', '$image')";

  $result = mysqli_query($dbc, $query)
    or die('Error querying database.');

  mysqli_close($dbc);
?>

<p>
-Thanks for submitting the form.<br />
-Your news report has been submitted to the database and should appear in the app shorty.
</p>

</body>
</html> 
```

最后 - 我的数据库结构（我无法发布屏幕截图）字段：report_id（主键，自动增量）标题作者字幕正文图像

PS对于图像/\我正在关注“Head First PHP and MySQL”，所以它是存储在数据库中的图像名称，而不是图像（我没有把这个放到表格中，但我不认为这个是问题）。

对不起，长篇大论的家伙。卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:34:40.777

你有一个不匹配。您命名了 4 个要插入的列，但您定义了 5 个值。添加缺少的列。

```
$query = "INSERT INTO news_reports (title, author, subtitle, body) " .
    "VALUES ('$title', '$author', '$subtitle', '$body', '$image')" 
```

# javascript - 未知提供者：$rootscopeProvider <- $rootscope

> ID：15708300
> 
> 赞同：22
> 
> 时间：2013-03-29T17:29:10.700
> 
> 标签：javascript, web-applications, angularjs, jasmine

我正在尝试注入`$scope`茉莉花测试，但得到异常

```
Unknown provider: $rootscopeProvider <- $rootscope 
```

我的规格文件是这样的：

```
describe("with data returned from NormDefinitions API", function () {
    const dummyData = [
        {"Id": 1, "Name": "Name 1", "Description": "Description 1"},
        {"Id": 2, "Name": "Name 2", "Description": "Description 1"}
    ];

    var $scope,
        mockService = {
            query: function () {
                return  dummyData;
            }
        };

    beforeEach(inject(function ($rootscope) {
         $scope = $rootscope.$new();
    }));

    it("it can be instantiated", inject(function($controller) {
        var controller = $controller("NormDefinitionsController",
            {
                $scope: $scope,
                myService : mockService
            });

        expect(controller).not.toBeNull();
    }));
}); 
```

我错过了什么？

谢谢

戴夫

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-29T18:07:56.737

错字（发生在我们所有人身上）： `$rootScope`大写`S`。

有时人们忘记注射它。然后你会得到这个错误：

```
ReferenceError: $rootScope is not defined 
```

# java - 集合视图上的等于 Java

> ID：15708302
> 
> 赞同：-4
> 
> 时间：2013-03-29T17:29:19.153
> 
> 标签：java, maps, freeze

您是否了解这张幻灯片中[这门 MIT 课程](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-092-java-preparation-for-6-170-january-iap-2006/lecture-notes/lecture3.pdf)（有问题的幻灯片在第 44 页）实际上在谈论什么？冻结键是什么意思？我知道地图的键不能更改，否则键和值都会丢失。但是，我并没有完全理解使用`boolean frozen`. （我只看过可在线免费下载的幻灯片，我没有参加课程）

```
//Freeze Keys
public class Name {
private
String first;
private
String last;
private
boolean frozen = false;

public void setFirst(String s) {
if (!frozen)
first = s;
}
//...
// do same with setLast
public void freeze() {
frozen = true; 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:36:08.427

`freeze`只是一个标志，它告诉类通过跳过变量赋值来*有效地忽略对其设置器的调用。*

创建实例后，调用`setFirst`将设置`first`成员变量。在您调用 之后`freeze`，调用 to`setFirst`将什么也不做，从而“冻结”对象的状态。

# javascript - 如何通过单击更改项目颜色？

> ID：15708313
> 
> 赞同：-4
> 
> 时间：2013-03-29T17:29:39.747
> 
> 标签：javascript, jquery, css

我是编程新手，我想在单击项目颜色时将其更改为一系列颜色。我相信这可以通过 CSS、javascript 或 JQuery 来完成。哪个效率最高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:32:58.990

这是一个简单的例子，所有包含该类的元素`colorable`在单击时都会添加另一个类`red`，这会改变文本的颜色。

[jsFiddle](http://jsfiddle.net/USd5m/)

**HTML**

```
<div class="colorable">Color me in</div> 
```

**CSS**

```
.red {
    color:red;
} 
```

**JavaScript（使用 jQuery）**

```
$('.colorable').click(function () {
    $(this).addClass('red');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:40:11.423

如果您想要随机颜色，可以执行以下操作：

**HTML**

`<div id="button">Button</div>`

**CSS**

`div { user-select: none; }`

**JavaScript**

```
var button = document.getElementById('button');

button.addEventListener('click', changeColor, false);

function changeColor() {
    this.style.color = '#'+Math.floor(Math.random()*16777215).toString(16);
} 
```

[jsFiddle](http://jsfiddle.net/tryzor/HLFuC/)

# javascript - 将 window.location 发送到一个变量，该变量是一个字符串形式的 URL

> ID：15708315
> 
> 赞同：2
> 
> 时间：2013-03-29T17:30:07.617
> 
> 标签：javascript, jquery

我正在尝试将 window.location 发送到一个变量，但我的方法似乎不起作用。

我有一个变量，即名为 query 的查询和另一个调用者 firstPart。我将它们连接起来并尝试将窗口发送到该连接的 URL，但它似乎不起作用。

这是我到目前为止所拥有的：

```
var query = "hello";
var firstPart = "http://google.com/?=";
window.location.assign(firstPart + query); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:31:47.483

像这样做：

```
window.location.href = firstPart + query; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:32:15.550

```
var query = "hello";
var firstPart = "http://google.com/?=";
window.location.href = firstPart + query; 
```

更多关于窗口位置的信息在这里[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

# php - Simplexml_load_file 问题，变量获取 NULL 值

> ID：15708318
> 
> 赞同：0
> 
> 时间：2013-03-29T17:30:19.927
> 
> 标签：php, xml

我在我的一个脚本中使用了 simplexml_load_file 函数（如下所示）：

但是当我尝试显示 xml 文件中的一些数据时，它不起作用。这是我的代码：

```
<?php
$i = 0;
$dir = new DirectoryIterator('Ay');
foreach ($dir as $fileinfo) {
if (!$fileinfo -> isDot()) {
    $XMLFILE = $fileinfo -> getFilename();
    $pathtofile = "http://Mylink.com/Ay/$XMLFILE";
    $xml = simplexml_load_file($pathtofile);
    if ($xml == FALSE) {
        echo "failed to load xml";
    } else {
        echo "$i <br>";
        $A = $xml->Organisme->Nom;
                    echo "$A <br>";
        $i++;
    }
}
}
?> 
```

Nom 的值没有显示在页面上，我尝试显示 $A 的类型及其 NULL

我不知道为什么 $A 变量会得到一个 NULL 值，即使 xml 文件正确加载，如果你能提供帮助，那就太好了，谢谢你

# c++ - 默认预处理器定义和跨平台编译

> ID：15708321
> 
> 赞同：1
> 
> 时间：2013-03-29T17:30:38.900
> 
> 标签：c++, visual-c++, g++, c-preprocessor

我试图找出一种“干净的方式”来使用默认的预处理器定义来确定应该根据平台和编译器编译我的代码的哪些部分。

我当前的测试设置涉及一台带有 Visual C++ 编译器的 Windows 机器和一个带有 g++ 编译器的 Debian。

目前我有这样的事情：

```
#if defined (__GNUG__)
    #define ASMMath_EI __attribute__ ((__visibility__("default")))
#elif defined (WIN32)
    #ifdef ASMMath_EXPORTS
        #define ASMMath_EI __declspec(dllexport)
    #else
        #define ASMMath_EI __declspec(dllimport)
    #endif
#endif

extern void ASMMath_EI AsmProblemOne(); 
```

它有效，但我认为可能而且必须有一些更好的定义我可以检查。或者也许有一些更理想的 CMake 方式？建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:38:00.323

在这些链接中有一个很好的[Compiler](http://sourceforge.net/p/predef/wiki/Compilers/)、[Operating System](http://sourceforge.net/p/predef/wiki/OperatingSystems/)和[Architecture](http://sourceforge.net/p/predef/wiki/Architectures/)预处理器名称列表。您可以为您关心支持/检测的系统和编译器分支。此外，已经使用 Boost 标头完成了很多这项工作`boost/config/`（参见`boost/config/select_compiler_config.hpp`编译器标志的一个示例）。不是每个人都喜欢包括 Boost，这就是为什么第一组链接是通用库特定支持的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T14:44:02.293

OP在问题编辑中回答：

> 从我收集到的以下内容将是实现这一点的理想方法：
> 
> ```
> // MasterHeader.h
> #if defined _MSC_VER // Defined by visual studio
>   #define PROJ_TMP_DLL_IMPORT __declspec(dllimport)
>   #define PROJ_TMP_DLL_EXPORT __declspec(dllexport)
> #else
>   #if __GNUC__ >= 4 // Defined by GNU C Compiler. Also for C++
>     #define PROJ_TMP_DLL_IMPORT __attribute__ ((visibility ("default")))
>     #define PROJ_TMP_DLL_EXPORT __attribute__ ((visibility ("default")))
>   #else
>     #define PROJ_TMP_DLL_IMPORT
>     #define PROJ_TMP_DLL_EXPORT
>   #endif
> #endif
> 
> #ifdef PROJ_EXPORTS
>     #define PROJ_API PROJ_TMP_DLL_EXPORT
> #else
>     #define PROJ_API PROJ_TMP_DLL_IMPORT
> #endif 
> ```
> 
> -
> 
> ```
> // File.h
> #include "MasterHeader.h"
> 
> extern void PROJ_API SomeFunction(); 
> ```

# php - 忽略php cURL中的@而不对其进行编码

> ID：15708324
> 
> 赞同：1
> 
> 时间：2013-03-29T17:30:51.950
> 
> 标签：php, curl, twitter

我将图像和推文（文本）作为 multipart/form-data 发送到 Twitter API。图像以“@someimagefile”开头并按预期工作。推文文本类似于“@username hi”。但失败，因为 cURL 试图将 @username 解释为文件路径并出错。

见王斌的回答：[https ://stackoverflow.com/a/9137917/922522](https://stackoverflow.com/a/9137917/922522)

虽然解决方法是在推文文本前加上一个空格，这样@ 不是第一个字符，但我想知道是否有更好的方法来做到这一点？Twitter 不允许将 @ 符号编码为其他任何内容，[https://dev.twitter.com/discussions/6663](https://dev.twitter.com/discussions/6663)。

有没有办法让 PHP 的 cURL 忽略文本中的 @ 符号（而不是图像）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-04T18:48:27.677

Have you tried encoding the "@" in the tweet?

`str_replace('@', urlencode('@'), $tweet);`

edit: I saw your the forum post you linked and I believe he's saying it needs to be percent encoded which is what urlencode does. Have you tried what I posted above? If not give it a shot.

# php - 启用文件夹权限以允许文件上传。

> ID：15708329
> 
> 赞同：3
> 
> 时间：2013-03-29T17:31:11.263
> 
> 标签：php, apache, upload, xampp

我在 Mac 上使用 xampp。我有以下脚本，我试图用它来将文件上传到文件夹：

**上传.php**

```
<?php
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/png"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

上传表单很简单：

**索引.html**

```
<html>
<body>

<form action="upload.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

我在 htdocs 中的文件夹结构是：

```
-/htdocs
  -index.html
  -upload.php
  -/upload 
```

当我运行脚本时，我收到以下错误：

> 警告：move_uploaded_file(upload/dirt.png) [function.move-uploaded-file]：无法打开流：/Applications/XAMPP/xamppfiles/htdocs/development/Templates/PHP&JS/Upload Files to Server/form upload 中的权限被拒绝/upload.php 在第 29 行
> 
> Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/Applications/XAMPP/xamppfiles/temp/phpAQWDB1' to 'upload/dirt.png' in /Applications/XAMPP/xamppfiles/htdocs/development/Templates/PHP&JS/Upload Files to Server/form upload/upload.php on line 29 Stored in: upload/dirt.png

How do I change the properties of the upload folder to allow uploading of files? I there a config file I should include to enable this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:43:55.807

You need to run the command

```
chmod -Rf 777 FOLDER_PATH 
```

here FOLDER_PATH is the your folder path where the images get stored

# html - 输入类型文件接受不显示 PPS 文件

> ID：15708332
> 
> 赞同：6
> 
> 时间：2013-03-29T17:31:21.327
> 
> 标签：html, mime-types

这是我的上传输入，无论我尝试什么，它都会拒绝显示 Powerpoint PPS 文件。

它显示 PDF、PPT、PPTX、PPSX 但不显示 PPS

```
 <input type="file"
    accept="application/pdf,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.slideshow,application/vnd.openxmlformats-officedocument.presentationml.presentation"
 name="upldInput"/> 
```

所有浏览器的行为都是相同的，没有人显示 PPS 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T23:18:46.960

我找不到有效的 MIME 类型。但是，以下*方法确实*有效：

`<input type="file" accept="application/pdf,.pps" name="upldInput"/>`

显然，您可以[混合和匹配](https://stackoverflow.com/a/10503561/453277)文件扩展名和 MIME 类型。在 Chrome 25 和 IE 10 (PC) 上，这提供了所需的行为，即仅显示匹配的 MIME 类型*或*扩展名。

演示：http: [//jsfiddle.net/GGFVv/](http://jsfiddle.net/GGFVv/)

我也尝试过混合多个扩展和多种 MIME 类型，这似乎也有效。

```
<input type="file" 
    accept=".pps,
    .jpg,
    .txt,
    application/pdf,
    application/vnd.ms-powerpoint,
    application/vnd.openxmlformats-officedocument.presentationml.slideshow,
    application/vnd.openxmlformats-officedocument.presentationml.presentation" name="upldInput"/> 
```

Demo: [http://jsfiddle.net/GGFVv/2/](http://jsfiddle.net/GGFVv/2/)

I should note that file extension filtering does not seem to work in Firefox 19\. I imagine this is because of the differences between the behavior defined by the W3C and the WHATWG.

*   [W3C's definition of `accept`](http://www.w3.org/TR/html-markup/input.file.html#input.file.attrs.accept)
*   [WHATWG's description of how user agents should handle `accept` attribute](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#attr-input-accept)

The original mention of `accept` (in 1995!) is somewhat vague:

> Allow an ACCEPT attribute for INPUT tag, which is a list of media types or type patterns allowed for the input.

Firefox appears to default to "all files" when it finds a value it doesn't recognize, so this is somewhat user-friendly (though not ideal).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:58:42.843

**编辑：**您是否尝试简单地添加：`accept=".pps"`？

```
<input type="file"
   accept="application/pdf,
      application/vnd.ms-powerpoint,
      application/vnd.openxmlformats-officedocument.presentationml.slideshow,
      application/vnd.openxmlformats-officedocument.presentationml.presentation,
      .pps"
   name="upldInput"/> 
```

# mysql - MYSQL：如何将字符串转换为月份（数字）

> ID：15708335
> 
> 赞同：3
> 
> 时间：2013-03-29T17:31:30.467
> 
> 标签：mysql, string-conversion, date-conversion

我有几个月的简短版本：`JAN, FEB, MAR`等。

并希望将它们转换为各自的数值：`1, 2, 3`等

另外，我希望能够在数字月份值之间来回更改，以“短”月份名称（`JAN, FEB, MAR`）和长版本（`January, February, March`等）

**注意：**正如@dipu-raj 指出的那样，这不是重复的，因为我[从数字中询问与 MySQL MONTHNAME()相反](https://stackoverflow.com/questions/7027129/mysql-monthname-from-numbers) **的问题，答案也不同，因为**它需要不同的功能

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T17:46:31.707

要将缩写转换为完整的月份名称，请使用：

```
mysql> select monthname(str_to_date('Mar','%b'));
+------------------------------------+
| monthname(str_to_date('Mar','%b')) |
+------------------------------------+
| March                              |
+------------------------------------+ 
```

要将缩写转换为数字，请使用：

```
mysql> select month(str_to_date('Mar','%b'));
+--------------------------------+
| month(str_to_date('Mar','%b')) |
+--------------------------------+
|                              3 |
+--------------------------------+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:36:49.113

您可能需要熟悉 MySQL 日期函数。对于您的情况`STR_TO_DATE()`，`DATE_FORMAT()`似乎最有用。这是信息的链接：

[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:42:10.797

**JAN**到它的月份数；替换您在`FEB`下面看到的列/值：

```
date_format(str_to_date(concat(2012, 'FEB'), '%Y%b'), '%m')
                                     ^^^^^ 
```

**1**为其短月份名称；在指示的地方替换您的列/值：

```
 date_format(str_to_date(concat('2012-', 1), '%Y-%m'), '%b')
                                         ^ 
```

使用`%M`而不是`%b`作为上面的最后一个值来获取长月份名称。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T17:50:19.247

试试这个：

```
 $date = 'Jan';
    echo 'Month number is '.date('n', strtotime($date)).'</br>';
    echo 'and its '.date('F', strtotime($date)); 
```

使用[PHP 手册 - 日期/时间函数](http://php.net/manual/en/function.date.php)获取更多格式选项。

# c# - 升级到 1.0.1 后，SL5 中的 SignalR 停止工作

> ID：15708343
> 
> 赞同：0
> 
> 时间：2013-03-29T17:31:55.893
> 
> 标签：c#, signalr

我有一个`Hub`在我的网络应用程序和我的 SL5 应用程序之间使用 1.0.0-rc2 的简单程序。

升级到 1.0.1 后，我的 .Net Winform 客户端仍然可以连接到集线器，但我的 SL5 客户端无法再连接。

在调用 Subscribe 时，我可以在 Fiddler 中看到 Negotiate 调用（返回 200，似乎是有效的 JSON），然后是 hub`Closed`事件触发。Error 事件永远不会触发，然后就结束了。至少据我在 Fiddler 中所知，没有尝试实际连接。

有任何想法吗？这是我的 SL5 代码，它非常简单/直接。

```
 hub = new HubConnection("http://localhost/ADE");
        hub.Closed += new Action(hub_Closed);
        hub.Error += new Action<Exception>(hub_Error);
        hub.Reconnected += new Action(hub_Reconnected);
        hub.Reconnecting += new Action(hub_Reconnecting);
        hub.StateChanged += new Action<StateChange>(hub_StateChanged);

        hubProxy = hub.CreateHubProxy(hubName);

        //Removed my hubProxy.On calls for brevity.

        hub.Start().ContinueWith(task =>
                                    // {

                                     //}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:47:35.823

试试[这个](http://blogs.msdn.com/b/webdev/archive/2012/12/17/signalr-building-real-time-web-applications.aspx)使用 SignalR1.0.1 和 SL5 的示例。

要访问 SL5 客户端，请导航至`http://localhost:18628/SignalR.Sample.SilverlightClientTestPage.aspx`

在 Fiddler 上，你应该得到这些 http 请求

`http://localhost:18628/signalr/negotiate?noCache=cd92304d-c824-4c91-abdd-e77c8d096b58`

`http://localhost:18628/signalr/connect?transport=serverSentEvents&connectionToken=rse-NdoiZ1Hi7riN_beL6J-zrkGMPm1A9p8urTZn_1sTuZVeEzVWayykaN-Km_fmqBoV06D1e7h5fPWl4kgggABs3x7wiItdd8zJKE9FSCjZsYEUQOdFrzAg-WmA7rUx0&connectionData=[{"Name":"SampleHub"}]&noCache=0c4c1fa1-9aa9-409b-acf7-165faa0d699a`

`http://localhost:18628/signalr/send?transport=serverSentEvents&connectionToken=rse-NdoiZ1Hi7riN_beL6J-zrkGMPm1A9p8urTZn_1sTuZVeEzVWayykaN-Km_fmqBoV06D1e7h5fPWl4kgggABs3x7wiItdd8zJKE9FSCjZsYEUQOdFrzAg-WmA7rUx0`

# objective-c - 不需要的#import 指令的开销是多少？

> ID：15708349
> 
> 赞同：3
> 
> 时间：2013-03-29T17:32:18.643
> 
> 标签：objective-c, import, llvm

在你的 pch 文件中放很多东西有什么缺点？

如果你有很多“实用程序”类型的类，将它们放在你的 pch 文件中以便它们在任何地方都可用有缺点吗？这是否会使您编译的应用程序的大小膨胀或只是减慢编译速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:42:55.927

假设在你的头文件中只是应该在头文件中的内容，即类型定义、类接口、协议、宏等，那么它只会在编译期间增加编译时间和一些内存消耗。到目前为止，您可以信任编译器和链接器，以至于应用程序根本不会受到影响。

我只是不确定它是否会在调试模式下炸毁符号表。但即使这样也不应该对发布版本产生任何影响。

# javascript - Javascript：字符串到 HTML

> ID：15708353
> 
> 赞同：0
> 
> 时间：2013-03-29T17:32:32.920
> 
> 标签：javascript, dom

给定这样的字符串：

```
<img src="image.png" /><p>some text</p> 
```

如何在不使用 jQuery 的情况下将其附加到 dom 节点？

我可以创建类似的东西：

```
 var string = '<img src="image.png" /><p>some text</p>';
  var div = document.createElement('div');
  div.innerHTML = string; 
```

然后使用 将其附加到节点`appendChild`，但是如何只添加原始字符串而不添加包装`div`？

**像 jquery 的[parseHTML](http://api.jquery.com/jQuery.parseHTML/)之类的东西，我需要一些可以解析字符串并将其作为 html 节点返回的东西。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T17:35:49.613

您可以[`insertAdjacentHTML()`](https://developer.mozilla.org/en-US/docs/DOM/element.insertAdjacentHTML)用于此任务。

**编辑**

如果您需要将字符串解析为元素，您可以执行以下操作：

```
function parseElements(str) {
    var temp = document.createElement('div'),
        nodes, n,
        elements = [];
    temp.innerHTML = str;
    nodes = temp.childNodes;
    for (n = 0; n < nodes.length; n++) {
        elements.push(nodes[n]);
    }
    return elements;
} 
```

# javascript - CasperJS 无法使用 fill() 方法登录

> ID：15708358
> 
> 赞同：1
> 
> 时间：2013-03-29T17:32:57.097
> 
> 标签：javascript, forms, login, fill, casperjs

我是 Casper JS 的新手，我`fill()`对登录网站的方法有疑问。在调试输出中，我到达了登录页面的 url，该网址应该在我登录后到达。但是，它然后将我发送到一个空白页面并中断：

```
[debug] [phantom] Navigation requested: url=about:blank, type=Other, lock=true, isMainFrame=false 
```

我已经测试了下面的代码以登录 facebook 并且它有效。我还使用下面的 Casperjs 代码的 Phantomjs 版本成功登录到下面示例中的站点。所以这个问题似乎是特定于使用 Casperjs fill() 方法登录的。

1）这是html（出于安全目的，我将其设为匿名）：

```
//login form
<form id="***id_form***" class="loginBox" method="post" action="https://***login_link***/">

// input login
<input id="IDToken1" type="text" value="" name="IDToken1">

// input password
<input id="IDToken2" type="password" name="IDToken2"> 
```

2）这是我的 Casperjs 代码：

```
var start_url = 'https://***login_url***'

casper.start(start_url, function() {

    this.test.assertExists('form#***id_form***', 'form is found');
    this.fill('form#***id_form***', {
        'IDToken1': '***MY_ID***',
        'IDToken2': '***MY_PASSWORD***'
    }, true);
});

casper.run(); 
```

3）这是控制台输出（我隐藏了网址）：

```
[info] [phantom] Starting...

[info] [phantom] Running suite: 2 steps

[debug] [phantom] opening url: https://***login_url***, HTTP GET

[debug] [phantom] Navigation requested: url=https://***url***, type=Other, lock=true, isMainFrame=true

[debug] [phantom] Navigation requested: url=https://***url***, type=Other, lock=true, isMainFrame=true

[debug] [phantom] url changed to "https://***url***"

[debug] [phantom] Successfully injected Casper client-side utilities

[info] [phantom] Step 2/2 https://***url*** (HTTP 302)
PASS form is found

[info] [remote] attempting to fetch form element from selector: 'form#***id_form***'

[debug] [remote] Set "IDToken1" field value to ***My_ID***

[debug] [remote] Set "IDToken2" field value to ***My_PASSWORD***

[info] [remote] submitting form to https://***login_link***, HTTP POST

[info] [phantom] Step 2/2: done in 1211ms.

[debug] [phantom] Navigation requested: url=https://***login_link***, type=FormSubmitted, lock=true, isMainFrame=true

[debug] [phantom] Navigation requested: url=https://***url***, type=FormSubmitted, lock=true, isMainFrame=true

[debug] [phantom] Navigation requested: url=http://***url***, type=FormSubmitted, lock=true, isMainFrame=true

[debug] [phantom] url changed to "http://***url***"

[debug] [phantom] Successfully injected Casper client-side utilities

[debug] [phantom] Navigation requested: url=https://***url***, type=Other, lock=true, isMainFrame=true

[debug] [phantom] Navigation requested: url=https://***url***, type=Other, lock=true, isMainFrame=true

[debug] [phantom] Navigation requested: url=https://***landing_page***, type=Other, lock=true, isMainFrame=true

[debug] [phantom] url changed to "https://***landing_page***"

[debug] [phantom] Navigation requested: url=https://***url***, type=Other, lock=true, isMainFrame=false

[debug] [phantom] Navigation requested: url=about:blank, type=Other, lock=true, isMainFrame=false 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T11:35:57.097

尝试以下操作：

```
casper.start(start_url, function() {
    this.waitForSelector('form#***id_form***', function() {
        this.fill('form#***id_form***', {
            'IDToken1': '***MY_ID***',
            'IDToken2': '***MY_PASSWORD***'
        }, true);
    }
});

casper.then(function() {
   ...
} 
```

# javascript - 使用 Bootstrap，我只能让文本像一个链接，而不是整个按钮？

> ID：15708362
> 
> 赞同：1
> 
> 时间：2013-03-29T17:33:03.030
> 
> 标签：javascript, html, css, button, twitter-bootstrap

我只是在学习如何使用 html 和 css，我的老师要求我们使用 Bootstrap。很明显，这真的很酷，但是当我尝试制作一个按钮时，只有按钮内的文本实际上就像一个链接，而不是整个矩形按钮。我不确定我是否需要的不仅仅是缩小的引导 javascript 文件来使它们工作或什么。

这是我的 html，我还在脑海中添加了“$('.nav-tabs').button()” 行以及来自 bootstrap 的 javascript 文件。有什么建议吗？我知道我的 html 可能很笨拙，我的老师不是最擅长解释事情，所以我一直在摆弄事情，直到它们似乎可以工作。

```
<div class="btn-toolbar">
    <div class="row-fluid">
        <div class="span2 offset2">
        <div class="btn btn-primary">
            <a href="http://students.cec.wustl.edu/~amd4/Portfolio/portfolio%20-%20profile%20-%20final.html">
                Profile
            </a>
        </div>
    </div>
    <div class="span2 offset.5">
        <div class="btn">
            <a href="http://students.cec.wustl.edu/~amd4/Portfolio/portfolio%20-%20writing%20-%20final.html">
                Writing
            </a>
        </div>
    </div>
    <div class="span2 offset.5">
        <div class="btn">
            <a href="http://students.cec.wustl.edu/~amd4/Portfolio/portfolio%20-%20music%20-%20final.html">
                Music
            </a>
        </div>
    </div>
    <div class="span2 offset.5">
        <div class="btn">
            <a href="http://students.cec.wustl.edu/~amd4/Portfolio/portfolio%20-%20photos%20-%20final.html">
                Photography
            </a>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:40:27.663

remove the `class="btn btn-primary"` from the `div` tag, put it on the `a` tag

see [http://twitter.github.com/bootstrap/base-css.html#buttons](http://twitter.github.com/bootstrap/base-css.html#buttons)

> ...typically you'll want to apply these to only `<a>` and `<button>` elements for the best rendering.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:41:55.467

Looks like you are not adding the class on the `a` tag. You need to use something like this `<a href="#" class="btn btn-primary">New button</a>` This should give you a button with the text New button.

You use `<a href="#" class="btn btn-primary btn-large">Big Button</a>`

For a large blue button.

# javascript - 如何阻止 Twitter 时间线小部件轮询？

> ID：15708363
> 
> 赞同：2
> 
> 时间：2013-03-29T17:33:03.150
> 
> 标签：javascript, backbone.js, twitter

我在单页 Backbone 应用程序的登录页面上使用 Twitter 嵌入式时间线小部件。当用户登录时，我通过主干路由更改页面，Twitter 小部件不再显示。但是，如果您查看浏览器开发工具的“网络”面板，则每隔 15 秒左右就会有对[http://syndication.twimg.com/widgets/timelines/paged/的请求。](http://syndication.twimg.com/widgets/timelines/paged/)**我怎样才能停止这些请求？**

如果 I `delete window.twittr`，我会从超时回调中得到 6 个“未捕获的 ReferenceError：twttr 未定义”错误……这有效，但看起来不是很干净。**有没有更好的办法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T18:39:28.500

我相信设置 a`Tweet limit`可能是一种选择。

**推文限制：** `To fix the size of a timeline to a preset number of Tweets, use the` **data-tweet-limit="5" 属性** `with any value between 1 and 20 Tweets. The timeline will render the specified number of Tweets from the timeline, expanding the height of the widget to display all Tweets without scrolling.` **由于小部件的大小是固定的，因此在使用此选项时它不会轮询更新。**

[https://dev.twitter.com/docs/embedded-timelines](https://dev.twitter.com/docs/embedded-timelines)

例如

`<a class="twitter-timeline" href="https://twitter.com/twitterapi" data-widget-id="YOUR-WIDGET-ID-HERE" data-chrome="nofooter" data-tweet-limit="3">Tweets by @twitterapi</a>`

然后，如果需要，您可以手动更新小部件，方法是删除它们重新插入 html 然后调用。

`twttr.widgets.load()`

# java - 如何访问 Android 设备的锁屏所有者信息？

> ID：15708367
> 
> 赞同：1
> 
> 时间：2013-03-29T17:33:11.110
> 
> 标签：java, android

我在手机的其中一个设置菜单中安装了 CyanogenMod，它允许我设置锁定屏幕上显示的一些所有者信息。这是一个屏幕截图：

![在此处输入图像描述](../Images/1fdb2fcadc151904db1dae93744a1632.png)

我已经看到很多关于此的问题，但它们似乎都将所有者信息混淆为 ICS 和 JB 设备上的“我”联系人。我指的是设置中配置的所有者信息。

有没有办法可以访问这些信息？

谢谢

# vb.net - 如何从VB中的文本文件中读取特定行

> ID：15708368
> 
> 赞同：3
> 
> 时间：2013-03-29T17:33:13.130
> 
> 标签：vb.net

我正在创建一个应该将文本写入文本文件的程序，并且应该能够从 VB 中的文本文件中读取特定行（因此，如果我需要读取特定名称，我可以选择第 5 行，它将显示在文本框）。我能够从文本文件中读取文本，但我不知道如何控制特定的行。

这是我的代码：

```
Public Class Form1

    Private Sub btnSubmit_Click(sender As System.Object, e As System.EventArgs) Handles btnSubmit.Click
         Dim writer As New System.IO.StreamWriter("/text.txt", True)
         writer.WriteLine(txtFirstName.Text)
         writer.WriteLine(txtLastName.Text)
         writer.WriteLine("-------------------------------------")
         writer.Close()
    End Sub

     Private Sub btnRead_Click(sender As System.Object, e As System.EventArgs) Handles btnRead.Click
        Dim reader As New System.IO.StreamReader("/text.txt")
        Dim FirstName, LastName As String
        FirstName = reader.ReadLine()
        LastName = reader.ReadLine()
        reader.Close()
        txtFirstName.Text = FirstName
        txtLastName.Text = LastName
    End Sub

    Private Sub btnClear_Click(sender As System.Object, e As System.EventArgs) Handles btnClear.Click
        txtFirstName.Clear()
        txtLastName.Clear()
    End Sub
End Class 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T18:01:54.063

您必须阅读所有行，直到您感兴趣的行。例如：

```
Function ReadLineWithNumberFrom(filePath As String, ByVal lineNumber As Integer) As String
    Using file As New StreamReader(filePath)
        ' Skip all preceding lines: '
        For i As Integer = 1 To lineNumber - 1
            If file.ReadLine() Is Nothing Then
                Throw New ArgumentOutOfRangeException("lineNumber")
            End If
        Next
        ' Attempt to read the line you're interested in: '
        Dim line As String = file.ReadLine()
        If line Is Nothing Then
            Throw New ArgumentOutOfRangeException("lineNumber")
        End If
        ' Succeded!
        Return line 
    End Using
End Function 
```

这是因为文本行是可变长度记录，并且无法猜测特定行开始的确切文件偏移量——除非没有索引。

如果您经常需要加载特定行，您还有更多选择：

*   将完整的文本文件加载到内存中，例如使用`File.ReadAllLines("Foobar.txt")`. 这将返回一个`String()`数组，您可以直接按行号访问该数组。

*   手动创建行号索引。也就是说，逐行处理一个文本文件，并在`Dictionary(Of Integer, Integer)`执行过程中填写一个。键是行号，值是文件偏移量。这使您可以`.Seek`直接到特定行的开头，而不必将整个文件保存在内存中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T18:06:00.697

试试这个：

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim reader As New System.IO.StreamReader("C:\text.txt")
    Dim allLines As List(Of String) = New List(Of String)
    Do While Not reader.EndOfStream
        allLines.Add(reader.ReadLine())
    Loop
    reader.Close()
    txtFirstName.Text = ReadLine(5, allLines)
    txtLastName.Text = ReadLine(6, allLines)

End Sub

Public Function ReadLine(lineNumber As Integer, lines As List(Of String)) As String
    Return lines(lineNumber - 1)
End Function 
```

如果你有这个文件：

```
Line 1
Line 2
Line 3
Line 4
My Name
My LastName 
```

您的姓名文本框将包含“我的姓名”，您的姓氏文本框将包含“我的姓氏”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-14T13:40:56.077

这很简单，试试这个：

```
Dim strLineText As String
Dim intLineNumber As Integer
LineNumber=3

myLine = File.ReadAllLines("D:\text.txt").ElementAt(LineNumber).ToString 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T17:01:47.843

另一种选择

```
 Private Function readNthLine(fileAndPath As String, lineNumber As Integer) As String
    Dim nthLine As String = Nothing
    Dim n As Integer
    Try
        Using sr As StreamReader = New StreamReader(fileAndPath)
            n = 0
            Do While (sr.Peek() >= 0) And (n < lineNumber)
                sr.ReadLine()
                n += 1
            Loop
            If sr.Peek() >= 0 Then
                nthLine = sr.ReadLine()
            End If
        End Using
    Catch ex As Exception
        Throw
    End Try
    Return nthLine
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-30T22:08:59.010

我试过了，效果很好。在 test.txt 中使用 VB Express 内容：

```
line1
line2
1
John 
```

然后以我添加的形式

```
textbox1
textbox2
label1
label2 
```

和一个`button`。

按钮内的代码：

```
 Private Sub Button2_Click_1(sender As Object, e As EventArgs) Handles Button2.Click
        Dim myLine As String
        Dim lineNumber0 As Integer
        lineNumber0 = 0
        Dim lineNumber1 As Integer
        lineNumber1 = 1
        Dim lineNumber2 As Integer
        lineNumber2 = 2
        Dim lineNumber3 As Integer
        lineNumber3 = 3

        TextBox1.Text=File.ReadAllLines("D:\test.txt").ElementAt(lineNumber0).ToString
        TextBox2.Text=File.ReadAllLines("D:\test.txt").ElementAt(lineNumber1).ToString
        Label1.Text = File.ReadAllLines("D:\test.txt").ElementAt(lineNumber2).ToString
        Label2.Text = File.ReadAllLines("D:\test.txt").ElementAt(lineNumber3).ToString

    End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-03T07:55:19.007

这是一个简单但有效的解决方案：

```
Dim Reader As String = System.IO.File.ReadAllLines("C:\File.txt")(1)
MsgBox("Line 1: " + Reader) 
```

The `MsgBox` should show the first line of `C:\File.txt`.

# php - 获取数组中匹配项的键

> ID：15708371
> 
> 赞同：0
> 
> 时间：2013-03-29T17:33:26.247
> 
> 标签：php, arrays, csv, if-statement, multidimensional-array

我正在尝试解决 CSV 报告的问题。我正在尝试根据用户选择的报告中的字符串查找特定信息。它是包含有关许多不同事件和日期的信息的报告（一个事件可能有多个日期，因此每个日期都会重复，导致事件名称多次出现）

用户选择多个表演（特定事件/日期组合），然后使用每个表演的编号将这些表演添加到数组中`eventId`：

例如

```
$eventArray = array(232 => 'event one', 21 => 'event four', 443 = 'event one'); 
```

每个存在`eventid => eventName`（可以有重复的事件名称，因为它们在系统中有不同的日期）。

我正在阅读报告，内容如下：

```
 $file_handle = fopen("$reportUrl", "r");
       while(!feof($file_handle))
        {
           $line_of_text = fgetcsv($file_handle, 20000);
           include('logic/finance_logic.php');                                      
        }
       fclose($file_handle); 
```

因此，对于 CSV 中的每一行，它都在运行`finance_logic.php`文件中的代码。我遇到困难的部分如下：

```
// CHECK TO SEE IF THE FIRST LINE IS AN EVENT IN THE ARRAY (NOTE, THERE CAN BE DOUPLICATES)
if(in_array(trim(substr($line_of_text[0],6)), $eventArray)) 
    {
        $f = 1;
        // get event name
        $eventName = trim(substr($line_of_text[0],6));
        // date of event
        $eventDateArray = getEventDateArray($eventName);
    }
    if(isset($f))
        {
            $dateSearch = checkDateInArray($line_of_text[0], $eventDateArray);
            if($f == 1 && $dateSearch[0] == 'found')
                {
                    $eventId = $dateSearch[1];
                    $f = 2;
                } 
```

`checkDateInArray`功能如下：

```
function checkDateInArray($date, $array)
{
    if(is_array($array))
        {
            foreach($array as $key => $d)
                {
                    if (strpos($date, $d) !== false) 
                        {
                            // return array with first value 'found' and second being the key which is the event id
                            return array('found', $key);
                        }
                }
        }
} 
```

注意：时间并不总是以格林威治标准时间结尾，因为它取决于位置，因此在比较日期时也需要忽略这一点。

所有这些都会导致对某些事情的混乱修复，我相信另一种方式要简单得多。我正在考虑的一种方法是创建的事件数组是，`eventId => eventName`但与数据库中的和`eventId`链接。有没有办法我可以创建一个which was然后检查它是否在这些中。我不知道该怎么做。此外，CSV 的布局方式示例如下：`eventName``eventDate``eventArray``eventId => array('eventName', 'eventDate')`

```
"Event: Event One"
""
"Performance Date:  15 Feb 2013 07:30 PM GMT"
""
"Venue: Theatre"
""
"Category: English Comedy"
"Discount","A",
"GENERAL ADMISSION",35.00,
"RESERVED",0.00,
"COMPLIMENTARY",0.00,
"SPECIAL",0.00,
"Holds","A","Face Value Amt",
"H: House Seats",16,16,
"Face Value Amt",,,
"--",,,
"Capacity",371,371,
""
"INT"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"GENERAL ADMISSION",119,4165.00,119,4165.00,
"Totals*",119,4165.00,119,4165.00,
""
"PBO"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"*SPECIAL",10,220.00,10,220.00,
"COMPLIMENTARY",4,0.00,4,0.00,
"GENERAL ADMISSION",22,770.00,22,770.00,
"RESERVED",0,0.00,0,0.00,
"Totals*",36,990.00,36,990.00,
""
"PHO"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"*GENERAL ADMISSION",0,0.00,0,0.00,
"*SPECIAL",42,940.00,42,940.00,
"COMPLIMENTARY",10,0.00,10,0.00,
"GENERAL ADMISSION",68,2380.00,68,2380.00,
"RESERVED",0,0.00,0,0.00,
"Totals*",120,3320.00,120,3320.00,
""
"PERFORMANCE TOTALS"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"*GENERAL ADMISSION",0,0.00,0,0.00,
"*SPECIAL",52,1160.00,52,1160.00,
"COMPLIMENTARY",14,0.00,14,0.00,
"GENERAL ADMISSION",209,7315.00,209,7315.00,
"RESERVED",0,0.00,0,0.00,
"Totals*",275,8475.00,275,8475.00,
""
"Abbreviated Performance Totals"
"Event","Performance Date","Discount","Tickets","Face Value Amt",
Event One,15 Feb 2013 07:30 PM GMT,*GENERAL ADMISSION,0,0.00,
Event One,15 Feb 2013 07:30 PM GMT,*SPECIAL,52,1160.00,
Event One,15 Feb 2013 07:30 PM GMT,COMPLIMENTARY,14,0.00,
Event One,15 Feb 2013 07:30 PM GMT,GENERAL ADMISSION,209,7315.00,
Event One,15 Feb 2013 07:30 PM GMT,RESERVED,0,0.00,
,,,275,8475.00,
""
"Event: Event One"
""
"Performance Date:  16 Feb 2013 07:30 PM GMT+04:00"
""
"Venue: Theatre"
""
"Category: English Comedy"
"Discount","A",
"GENERAL ADMISSION",35.00,
"RESERVED",0.00,
"COMPLIMENTARY",0.00,
"SPECIAL",0.00,
""
"INT"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"GENERAL ADMISSION",203,7105.00,203,7105.00,
"Totals*",203,7105.00,203,7105.00,
""
"PBO"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"GENERAL ADMISSION",36,1260.00,36,1260.00,
"RESERVED",0,0.00,0,0.00,
"Totals*",36,1260.00,36,1260.00,
""
"PHO"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"COMPLIMENTARY",15,0.00,15,0.00,
"GENERAL ADMISSION",99,3465.00,99,3465.00,
"RESERVED",-9,0.00,-9,0.00,
"Totals*",105,3465.00,105,3465.00,
""
"PERFORMANCE TOTALS"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"COMPLIMENTARY",15,0.00,15,0.00,
"GENERAL ADMISSION",338,11830.00,338,11830.00,
"RESERVED",-9,0.00,-9,0.00,
"Totals*",344,11830.00,344,11830.00,
""
"Abbreviated Performance Totals"
"Event","Performance Date","Discount","Tickets","Face Value Amt",
Event One,16 Feb 2013 07:30 PM GMT,COMPLIMENTARY,15,0.00,
Event One,16 Feb 2013 07:30 PM GMT,GENERAL ADMISSION,338,11830.00,
Event One,16 Feb 2013 07:30 PM GMT,RESERVED,-9,0.00,
,,,344,11830.00,
""
"Event: Event Four"
""
"Performance Date:  18 Feb 2013 07:30 PM BST"
""
"Venue: Theatre"
""
"Category: English Comedy"
"Discount","A",
"GENERAL ADMISSION",25.00,
"RESERVED",0.00,
"STUDENT",15.00,
"COMPLIMENTARY",0.00,
"Senior Citizen",10.00,
"SPECIAL",0.00,
""
"INT"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"GENERAL ADMISSION",79,1975.00,79,1975.00,
"Totals*",79,1975.00,79,1975.00,
""
"PBO"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"COMPLIMENTARY",2,0.00,2,0.00,
"GENERAL ADMISSION",32,800.00,32,800.00,
"RESERVED",0,0.00,0,0.00,
"Senior Citizen",4,40.00,4,40.00,
"Totals*",38,840.00,38,840.00,
""
"PHO"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"COMPLIMENTARY",10,0.00,10,0.00,
"GENERAL ADMISSION",100,2500.00,100,2500.00,
"RESERVED",0,0.00,0,0.00,
"STUDENT",4,60.00,4,60.00,
"Senior Citizen",2,20.00,2,20.00,
"Totals*",116,2580.00,116,2580.00,
""
"PERFORMANCE TOTALS"
"Discount","A","A Face Value Amt","Tickets","Face Value Amt",
"COMPLIMENTARY",12,0.00,12,0.00,
"GENERAL ADMISSION",211,5275.00,211,5275.00,
"RESERVED",0,0.00,0,0.00,
"STUDENT",4,60.00,4,60.00,
"Senior Citizen",6,60.00,6,60.00,
"Totals*",233,5395.00,233,5395.00,
""
"Abbreviated Performance Totals"
"Event","Performance Date","Discount","Tickets","Face Value Amt",
Event Four,18 Feb 2013 07:30 PM GMT,COMPLIMENTARY,12,0.00,
Event Four,18 Feb 2013 07:30 PM GMT,GENERAL ADMISSION,211,5275.00,
Event Four,18 Feb 2013 07:30 PM GMT,RESERVED,0,0.00,
Event Four,18 Feb 2013 07:30 PM GMT,STUDENT,4,60.00,
Event Four,18 Feb 2013 07:30 PM GMT,Senior Citizen,6,60.00,
,,,233,5395.00, 
```

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:26:15.420

我做了以下事情：

```
if(!isset($f))
    {
        $eventDateArray = checkIfEventInArray(trim(substr($line_of_text[0],6)), $eventArray);
    }
if($eventDateArray['result'] == true)
    {
        unset($eventDateArray['result']);
        $f = 1;
        // get event name
        $eventName = trim(substr($line_of_text[0],6));
    }
    if(isset($f))
        {
            if($f == 1 && strpos($line_of_text[0], 'Performance Date:') !== false)
                {
                    $dateCheck = checkIfDateInArray($line_of_text[0], $eventDateArray);
                }
            if($f == 1 && $dateCheck['result'] == true)
                {
                    $eventId = $dateCheck['eventId'];
                    $f = 2;
                }
            if($f == 1 && $line_of_text[0] == 'Abbreviated Performance Totals')
                {
                    unset($f);
                } 
```

使用以下功能：

```
function selectedEventsArray($array)
    {
        if(is_array($array))
            {
                $editedArray = '"' . implode('","', $array) . '"';
                $eventArray = array();
                $sql = mysql_query("SELECT id_event, name_event, date_event, time_event FROM event WHERE id_event IN ($editedArray)");
                while ($row = mysql_fetch_array($sql))
                    {
                        date_default_timezone_set('Europe/Dublin');
                        $date = date_create($row['date_event']);
                        $for_date = date_format($date,'d M Y');
                        $time = date_create($row['time_event']);
                        $for_time = date_format($time,'h:i A');
                        $eventDate = "Performance Date:  $for_date $for_time";

                        $eventArray[$row['id_event']] = array($row['name_event'], $eventDate);
                    }
                return $eventArray;
            }
    }

function checkIfEventInArray($str, $eventArray)
    {
        $newArray = array();
        $newArray['result'] = false;
        foreach ($eventArray as $key => $i)
            {
                if(trim(strtolower(strip_tags($str))) == trim(strtolower(strip_tags($i[0]))))
                    {
                        $newArray['result'] = true;
                        $newArray[$key] = $i[1];
                    }
            }
        return $newArray;
    }

function checkIfDateInArray($dateStr, $eventDateArray)
    {
        $newArray = array();
        $newArray['result'] = false;
        foreach ($eventDateArray as $key => $i)
            {
                if (strpos($dateStr, $i) !== false)
                    {
                        $newArray['result'] = true;
                        $newArray['eventId'] = $key;
                    }
            }
        return $newArray;
    } 
```

# javascript - apply() 函数 Internet Explorer

> ID：15708372
> 
> 赞同：1
> 
> 时间：2013-03-29T17:33:27.270
> 
> 标签：javascript, jquery, internet-explorer

有人处理过这个问题吗？

应用后的代码不会在 Internet Explorer 中执行

```
originalFocus.apply(this, arguments);
$(document).scrollTop(300); 
```

scrollTop 在 IE 中根本不执行！

但是如果把 alert() 例如它会工作

```
originalFocus.apply(this, arguments);
alert('ha');
$(document).scrollTop(300); 
```

这是完整的代码：

```
(function($) {
    var originalFocus = $.fn.focus;
    $.fn.focus = function () {
        if (this.hasClass('no-scroll')) {
            var y = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body).scrollTop;

            originalFocus.apply(this, arguments);
            $(document).scrollTop(y);
        } else {
            return originalFocus.apply(this, arguments);
        }
    };
})(jQuery); 
```

**回答**

好吧，伙计们，我发现了一个问题——需要返回一个函数，很简单）

```
(function($) {
var originalFocus = $.fn.focus;
$.fn.focus = function () {

    return function() {
        if (this.hasClass('no-scroll')) {
            var y = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body).scrollTop;

            originalFocus.apply(this, arguments);
            window.scrollTo(x, y);
        } else {
            originalFocus.apply(this, arguments);
        }
    };

};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:41:33.780

有时，试图在事件处理程序中强制焦点可能会导致问题。尝试在计时器处理程序中执行此操作：

```
 var this2 = this;
      setTimeout(function() {
        originalFocus.apply(this2, arguments);
      }, 1); 
```

# visual-studio-2012 - Visual Studio 2012 Express 在格式化文档命令中挂起并显示消息“等待后台操作完成”

> ID：15708373
> 
> 赞同：2
> 
> 时间：2013-03-29T17:33:30.637
> 
> 标签：visual-studio-2012

这只是几天前开始的。每次我使用 Ctrl + K + D 格式化文档时，VS 都会挂起并显示该消息。似乎由于某种原因，运行格式命令需要很长的时间（20 秒左右，有时在较大的文档上更长）。

没有安装任何新的插件（根本没有安装任何插件）。我遵循了这篇文章中的所有建议：[Visual Studio 2012 中的“等待后台操作”是什么？](https://stackoverflow.com/questions/12175784/what-is-this-waiting-for-background-operation-in-visual-studio-2012)这似乎已经解决了一些问题，但他们没有帮助。我在网上看到过一些类似的帖子，但找不到任何有用的东西。

在 Windows 8 上运行 VS 2012 Express。

还有其他人得到这个或知道可能是什么原因造成的吗？

**编辑**- 在剪切、复制和粘贴操作期间也看到了很多问题。

**编辑#2** - 我知道这个问题有点老了，但最近它有点受关注，我看到它被标记为[Visual Studio 2012 中的“等待后台操作”是什么的重复项？](https://stackoverflow.com/questions/12175784/what-is-this-waiting-for-background-operation-in-visual-studio-2012)但绝对不是。此问题与用户方面的两个特定操作有关，其中“重复”据说与任何具体内容无关。另一个问题还谈到了未安装的插件，以及完全不同的应用程序版本。此外，推荐的解决方案（或接受的答案）都没有解决问题，所以它们肯定不是重复的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:00:47.300

不知道为什么这不会是一个更广泛的问题，但我似乎找到了一个（临时？）解决方案。（注意 - 即使在安装更新 2 后，我仍然遇到此问题。）目前，该问题似乎可以通过以管理员身份运行 VS 来解决。似乎它不应该是永久的解决方案，但它暂时有效。

**编辑**- 这也解决了我遇到的一些源代码控制操作需要很长时间以及项目打开速度非常慢的问题。

# javascript - 从 wcf 服务返回的 json 日期不一致

> ID：15708375
> 
> 赞同：1
> 
> 时间：2013-03-29T17:33:44.463
> 
> 标签：javascript, .net, json, wcf

我有一个返回日期的服务。奇怪的是，大多数时候它是这样返回的：`/Date(1364227320000)/`

但有时它会像这样返回日期`/Date(1364050020139-0400)/`

当我打开 Visual Studio 调试器时，每个日期看起来都一样（减去时间差异）

什么可以解释这种差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:42:20.550

这是在`System.Runtime.Serialization.Json.JsonWriterDelegator.WriteDateTimeInDefaultFormat()`. 如果`DateTimeKind`是`Unspecified`或`Local`，则将 UtcOffset 添加到末尾（-400 部分，表示 Utc - 4 小时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:42:54.740

它取决于对象的种类*（*`DateTime`即其`Kind`属性的值）。如果您要返回`DateTime`with `DateTimeKind.Utc`，则不会有偏移量。如果日期时间是 kind`Local`或`Unspecified`，则会写出偏移量。

[您可以在 MSDN 上“Stand-Alone JSON Serialization”页面](http://msdn.microsoft.com/en-us/library/bb412170.aspx)的“DateTime Wire Format”部分找到有关该格式的更多信息。

# bash - 如何尽可能紧凑地确定最新的稳定 TuxOnIce 版本

> ID：15708377
> 
> 赞同：0
> 
> 时间：2013-03-29T17:33:48.440
> 
> 标签：bash, sed, grep, cut, tail

所以我打算在这里做的是从[http://tuxonice.net/downloads/all/](http://tuxonice.net/downloads/all/)（目前`tuxonice-for-linux-3.8.0-2013-02-24.patch.bz2`）确定最新的稳定版TuxOnIce。

使事情复杂化的是没有“当前”链接，所以我们必须遵循版本控制，类似于（这些不存在）：

```
tuxonice-for-linux-3.8.0-2013-4-2.patch.bz2
tuxonice-for-linux-3.8-4-2013-4-16.patch.bz2
tuxonice-for-linux-3.8-11-2013-5-23.patch.bz2 
```

问题是它们将按以下顺序排列：

```
tuxonice-for-linux-3.8-11-2013-5-23.patch.bz2
tuxonice-for-linux-3.8-4-2013-4-16.patch.bz2
tuxonice-for-linux-3.8.0-2013-4-2.patch.bz2 
```

我目前的实现（这是垃圾）是这样的。我考虑过使用日期，但也不知道该怎么做（`/tmp/tuxonice`是索引文件）：

```
_major=3.8 # Auto-generated
_TOI=$(grep ${_major}-1[0-9] /tmp/tuxonice | cut -d '"' -f2 | tail -1)
[ ! $_TOI ] && _TOI=$(grep ${_major}- /tmp/tuxonice | cut -d '"' -f2 | tail -1)
[ ! $_TOI ] && _TOI=$(grep ${_major}.0-2 /tmp/tuxonice | cut -d '"' -f2 | tail -1) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:39:45.083

Use the webserver's feature to sort the index page by modification date in reverse order, grab the page using `lynx -dump`, get the first line matching the filename you are interested in and print the respective column. This gives you the absolute URL to the file, from there you can tweak the command to give you the exact output you want (filename, just the version string, ...).

```
$ lynx -dump 'http://tuxonice.net/downloads/all/?C=M&O=D'|awk '/^[[:space:]]*[[:digit:]]+\..+\/tuxonice-for-linux/ { print $2; exit }'
http://tuxonice.net/downloads/all/tuxonice-for-linux-3.8.0-2013-02-24.patch.bz2 
```

Still not super-robust and will obviously break if the modification dates are not as expected, and you probably also want to tweak the regex a bit to be more specific.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:44:50.473

这不是一个*真正的*答案，但我认为这个“单线”[1] 非常酷：

```
HTML=$(wget -qO- http://tuxonice.net/downloads/all/ | grep tuxonice); TIMESTAMP=$(echo "$HTML" | sed 's/.*\([0-9]\{2\}-[A-Za-z]\{3\}-[0-9]\{4\} [0-9]\{2\}:[0-9]\{2\}\).*/\1/' | while read line; do echo $(date --date "$line" +%s) $line; done | sort | tail -n 1 | cut -d' ' -f2-3); LINK=$(echo "$HTML" | grep "$TIMESTAMP" | sed 's/.*href=\"\(.*\)\".*/\1/'); echo "http://tuxonice.net/downloads/all/${LINK}" 
```

印刷：

```
http://tuxonice.net/downloads/all/tuxonice-for-linux-3.8.0-2013-02-24.patch.bz2 
```

不过，这种方法实际上只是一个笑话。显然，有更好的方法来做到这一点，也许使用支持 XML 解析的脚本语言。

至少，这可能会让您了解如何使用文件的日期/时间值来选择“最新”。但是我会谨慎使用它（因为上传日期可能与版本号不一致），并建议您的版本号想法可能是一个更好的主意，如果您可以以某种方式处理所有各种命名和版本编号方案，它们看起来像用过。

[1] 这不是真正的单班轮

# html-parsing - 我的 xpath 查询字符串不起作用

> ID：15708379
> 
> 赞同：0
> 
> 时间：2013-03-29T17:33:51.993
> 
> 标签：html-parsing, xquery

我想用[xquery](http://www.w3.org/TR/xquery/)在这个网站上获取以下值。尝试了一段时间后，我无法弄清楚。这是我要获取的内容（[图片链接](https://i.stack.imgur.com/wKgoF.jpg)）

![我想抓住的例子](../Images/58aa1e6f8c8ed809cf4f5982f8b7c14f.png)

我尝试使用的代码：

```
$xpath = new DOMXPath( $html );
$nodelist = $xpath->query( "???????????????" ); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:14:51.743

你能从输入中得到价值吗？

```
//form//input[@name="val7"]/@value 
```

更新：

您可以在脚本标签中获得这些东西，但这是您使用 xpath 所能获得的。然后，您需要解析脚本标签的内容以获取该值。

```
//form[@id="werte"]//div[@class="calval7"]//div[@class="values"][1]/script/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:52:42.083

您可以尝试 grep 脚本标签之间的值 Like

```
//form/div/div/div[@class="values span-7"]/skipt/Text() 
```

解析 PHP 中的值后，您可以使用其他语言来获取字符串

# multithreading - 几个生产者，一个消费者：避免饥饿

> ID：15708380
> 
> 赞同：2
> 
> 时间：2013-03-29T17:33:52.027
> 
> 标签：multithreading, concurrency, producer-consumer

给定一个生产者-消费者问题的实例，其中多个生产者向单个消费者发送消息：当*一些*消息“同时”到达消费者时，您建议使用哪些技术来避免生产者饥饿。到目前为止，我正在考虑：

1.  通过采样一些概率分布来选择“非确定性”（不确定如何，考虑到不同数量的消息到达不同的时间戳）。
2.  在发送 n 条消息后，使用一些计数器并让生产者休眠一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:36:05.690

如果你可以有一个优先队列，我认为每个生产者都可以有一个消息发送计数器。并且队列将根据 messageSent 编号和日期进行排序，这样如果一条消息的发送数量小于另一条消息，则一条消息应该在另一条消息之前发送。

在 Java 中

```
class Message { //or you can implement Comparable<Message>
   final Date created = new Date();
   final int messageNumber; 
   public Message(int m ){this.messageNumber = m;}
}
BlockingQueue<Message> queue = new PriorityBlockingQueue<Message>(new Comparator(){
    public int compare(Message m1, Message m2){
        if(m1.messageNumber < m2.messageNumber) return 1;
        if(m2.messageNumber < m1.messageNumber) return -1;
        if(m1.messageNumber == m2.messageNumber) return m1.created.compareTo(m2.created);
    }
});
class Provider{
   int currentMessage = 0;
   void send(){
       queue.offer(new Message(currentMessage++));
   }
} 
```

因此，如果生产者 1 向队列中添加 5 个元素（第一个），生产者 2 向队列中添加 1，则队列将有

```
P1: 5
P1: 4
P1: 3
P1: 2
P2: 1
P1: 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:17:40.740

最简单和最好的方法之一是按照消息到达的顺序处理消息（一个简单的 FIFO 列表就可以了）。即使多条消息同时出现也没关系。通过这种方式，没有一个生产者会挨饿。

我要确保的一件事是消费者比生产者消费消息的速度更快。如果不是这样，它可能最终导致生产者等待消费者，并且为单个消费者拥有多个生产者不会有任何优势。

# android - 如何在选择时突出显示菜单项？

> ID：15708382
> 
> 赞同：1
> 
> 时间：2013-03-29T17:33:54.847
> 
> 标签：android, android-layout

我有四个菜单项，我希望它们在选择时突出显示。我尝试使用 `item.setIcon()`，它工作正常，但是当我选择其他菜单项时，前一个菜单项也会突出显示。是否有可能仅突出显示当前选择？

这是我的 menu.xml

```
<item 
    android:id="@+id/home"
    android:showAsAction="always"
    android:title="Home"
    android:icon="@drawable/home72"/>
<item 
    android:id="@+id/location"
    android:showAsAction="always"
    android:title="Locations"
    android:icon="@drawable/locations72"/>
<item
    android:id="@+id/preQualify"
    android:showAsAction="always"
    android:title="Pre-Qualify"
    android:icon="@drawable/prequalify72"/>
<item 
    android:id="@+id/products"
    android:showAsAction="always"
    android:title="Products"
    android:icon="@drawable/products72"/> 
```

这是我的java文件：

```
public boolean onOptionsItemSelected(MenuItem item) {

    switch(item.getItemId()){

    case R.id.home:
        //item.setIcon(icon);
        final ProgressDialog homeDialog = new ProgressDialog(this);
        homeDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        homeDialog.setCancelable(false);

        storeLocator = (WebView) findViewById(R.id.storeLocator);
        storeLocator.setWebViewClient(new WebViewClient());
        storeLocator.getSettings().setJavaScriptEnabled(true);
        //storeLocator.getSettings().setBuiltInZoomControls(true);
        storeLocator.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                homeDialog.show();
                homeDialog.setProgress(0);
                activity.setProgress(progress * 1000);

                homeDialog.incrementProgressBy(progress);

                if(progress == 100 && homeDialog.isShowing())
                    homeDialog.dismiss();
            }
        });
        storeLocator.loadUrl("xxxx");
        //item.setIcon(R.drawable.homew);
        /*Toast.makeText(this, "Home selected", Toast.LENGTH_SHORT)
        .show();*/
        break;

    case R.id.location:
        final ProgressDialog locationDialog = new ProgressDialog(this);
        locationDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        locationDialog.setCancelable(false);

        storeLocator = (WebView) findViewById(R.id.storeLocator);
        storeLocator.setWebViewClient(new WebViewClient());
        storeLocator.getSettings().setJavaScriptEnabled(true);
        //storeLocator.getSettings().setBuiltInZoomControls(true);
        storeLocator.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                locationDialog.show();
                locationDialog.setProgress(0);
                activity.setProgress(progress * 1000);

                locationDialog.incrementProgressBy(progress);

                if(progress == 100 && locationDialog.isShowing())
                    locationDialog.dismiss();
            }
        });
        storeLocator.loadUrl("xxxx");

        //item.setIcon(R.drawable.lcoationw);
        /*Toast.makeText(this, "Location selected", Toast.LENGTH_SHORT)
        .show();*/
        break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:35:36.487

> 是否有可能仅突出显示当前选择？

跟踪您突出显示的内容。当您突出显示一个时，请从前一个中删除突出显示。

# sockets - 如何将套接字连接更改为超时与完全关闭？

> ID：15708384
> 
> 赞同：0
> 
> 时间：2013-03-29T17:34:02.977
> 
> 标签：sockets, networking, tcp, amazon-ec2, redis

我有一个错误，一个长时间运行的进程在前几天运行良好，但随后对 redis 的查询达到了我设置的 45 秒超时。也就是说，如果 redis 完全崩溃，我的程序就会崩溃，但它不会。它等待并等待（45 秒）超时，然后一遍又一遍地再试 45 秒。

如果我停止该过程并重新启动它，再过几天一切都会好起来的。

这是在具有 Elastic Load Balancing 的 ec2 上运行的，而我的进程在与 redis 不同的盒子上。

我需要在我的本地开发环境中重新创建这种情况。我怎样才能不杀死我的本地redis，而是将其置于读取将超时的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:38:31.093

也许关闭端口？这可能被解释为连接被拒绝/关闭。

也许将另一个非redis应用程序放在所述端口上，让它不响应。换句话说，接受传入连接但不响应。您可能可以编写一个简单的应用程序，它接受 TCP 连接，然后以您选择的语言不执行任何操作，并让它在 Redis 端口上启动以测试这种情况。

# javascript - 将表单转换为 jquery ajax 时本地 Blobstore 失败

> ID：15708388
> 
> 赞同：0
> 
> 时间：2013-03-29T17:34:06.773
> 
> 标签：javascript, jquery, google-app-engine

我在常规表单提交中使用了带有 JAVA GAE 的 blobstore 方法

```
<form id="myform" action="<%= blobstoreService.createUploadUrl("/saveform") %>" method="post" enctype="multipart/form-data">
<input type="file" id="logo" name="logo"/> 
```

当我提交表单时，它按预期工作。图像保存到 blobstore，我有密钥/url。

当我尝试将此表单转换为 ajax 表单时，通过添加以下内容失败。

```
$.ajax({
  'type' : 'POST',
  'url' : $("#myform").attr('action'), 
  'data': $("#myform").serialize()})
.done(function (msg){
  if (msg!="1") {
    $("#errors").empty().append("<p class='error'>" + msg + "</p>");
    return false;
  }
}); 
```

我在控制台中收到以下错误。加载资源失败：服务器响应状态为 500（Java 堆空间）http:///_ah/upload/aglub19hcHBfaWRyGwsSFV9fQmxvYlVwbG9hZFNlc3Npb25fXxgnDA

在eclipse中我得到警告：/_ah/upload/aglub19hcHBfaWRyGwsSFV9fQmxvYlVwbG9hZFNlc3Npb25fXxgnDA java.lang.OutOfMemoryError：Java堆空间错误

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-27T08:44:20.027

这是因为您将数据作为 $("#myform").serialize() 发送，这会产生问题。在这种情况下，您的 contentType 不是“multipart/form-data”，而是“application/x-www-form-urlencoded”。您必须使用类似以下的内容...

```
$.ajax({
   url : blobUrl,
   type : 'POST',
   cache : false,
   data : new FormData($("#myForm")[0]),
   processData : false,
   contentType : false,
   success : function(data) {
        console.log("Success!!!");
    }
}); 
```

由于 blobstore 允许二进制数据，并且此方法中的内容类型将为 multipart/form-data，（您可以在 chrome 开发人员控制台的“网络”选项卡中检查）它会起作用，试试这个。

希望这会有所帮助，谢谢。

# assembly - 汇编中的数据类型转换

> ID：15708395
> 
> 赞同：1
> 
> 时间：2013-03-29T17:34:30.937
> 
> 标签：assembly, x86, dos

这是我的程序。它接受两个字符串的输入，计算它们的长度，检查长度是否相等。如果长度相等，它将反转第一个字符串并检查它是否等于第二个。如果长度不相等或反转后的字符串不相同，则程序将打印`"String is not palindrome"`否则`"String is palindrome"`。我知道这不是实际的回文类型解决方案，但这是我想做的。

问题：`STRLEN1`我创建的变量实际上是一个`DB`类型，所以它给出了一个`"Operand types do not match"`错误。

可能的解决方案：创建另一个`DD`or`DW`类型的变量并将值存储`STRLEN1`到新创建的`STRLEN1_ DW`变量中。这就是问题所在，我不知道该怎么做。

在谷歌上搜索了很多之后，我发现了[https://www.hex-rays.com/products/ida/support/idadoc/453.shtml](https://www.hex-rays.com/products/ida/support/idadoc/453.shtml)并尝试使用它，但只在列表中添加了一个错误: `NEED EXPRESSION`. 我不知道如何解决这个问题。

```
DATA SEGMENT
        STR1 DB 'ENTER STRING ONE : $'
        STR2 DB 'ENTER STRING TWO : $'
    STR_PALIN DB "STRING IS PALINDROME$"
    STR_NOT_PALIN DB "STRING IS NOT PALINDROME$"
        INSTR1 DB 20 DUP("$")
    INSTR2 DB 20 DUP("$")
        RSTR DB 20 DUP("$")
        NEWLINE DB 10,13,"$"
    STRLEN1 DB 0
    STRLEN2 DB 0
    STRLEN1_ DW 0
DATA ENDS

CODE SEGMENT
        ASSUME CS:CODE, DS:DATA

START:
        MOV AX, DATA
        MOV DS, AX
    MOV ES, AX

    LEA SI, INSTR1
    LEA DI, INSTR2

;GET STRING
    MOV AH, 09H
        LEA DX, STR1
        INT 21H

        MOV AH, 0AH
        MOV DX, SI
        INT 21H

        MOV AH, 09H
        LEA DX, NEWLINE
        INT 21H

;GET LENGTH OF STRING ONE
    MOV BL, INSTR1+1
    ADD BL, 30H
    MOV STRLEN1, BL

;TAKE SECOND INPUT OF THE STRING
        MOV AH, 09H
        LEA DX, STR2
        INT 21H

        MOV AH, 0AH
        MOV DX, DI
        INT 21H

        MOV AH,09H
        LEA DX,NEWLINE
        INT 21H

;GET LENGTH OF STRING 2
    MOV BL, INSTR2+1
    ADD BL, 30H
    MOV STRLEN2, BL

;COMPARE STRING LENGTH
    MOV CX, 6
    MOV AL, STRLEN1
    MOV BL, STRLEN2
    CMP AL, BL
    JNE NOT_PALIN

;REVERSE STRING ONE
    MOV STRLEN1 -> STRLEN1_
    MOV CX, STRLEN1
    MOV CX, -2
    LEA DI, RSTR

    ADD SI, STRLEN1
    ADD SI, -2

    L1:
        MOV AL, [SI]
        MOV [DI], AL
        DEC SI
        INC DI
        LOOP L1
        MOV AL, [SI]
        MOV [DI], AL
        INC DI
        MOV DL, '$'
        MOV [DI], DL
        MOV CX, STRLEN1

    LEA SI, RSTR
    LEA DI, INSTR2

    REPE CMPSB
    JNE NOT_PALIN
    JMP PALIN

    NOT_PALIN:
        MOV AH, 09H
        LEA DX, STR_NOT_PALIN
        INT 21H
        JMP EXIT

    PALIN:
        MOV AH, 09H
        LEA DX, STR_PALIN
        INT 21H
        JMP EXIT

    EXIT:
        MOV AX, 4CH
        INT 21H

CODE ENDS
END START 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:41:33.080

如果我对您的理解正确，那么您将无法使用字节大小的值初始化 16 位 CX 寄存器。有几种方法可以做到这一点 - 最直接的可能是：

```
 XOR CX, CX     ; set CX to zero
  MOV CL, STRLEN 
```

CX 现在等于 STRLEN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:46:01.977

如果你想复制`STRLEN1`到`STRLEN1_`你可以这样做：

```
MOVZX AX, BYTE PTR [STRLEN1] ; Zero-extend STRLEN1 into AX
MOV [STRLEN1_], AX 
```

*或者*，您可以简单地定义`STRLEN1`为`db 0,0`并保持高字节清晰。

```
MOV [STRLEN1], BL
ADD SI, WORD PTR [STRLEN1]   ; Whether WORD PTR needs to be specified depends
                             ; on the assembler 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:52:01.600

您能否对 STRLEN1 和 STRLEN2 使用数据字而不是字节？看起来这不会破坏您的代码，并且可以省去您进行转换的麻烦。

# haskell - Fay 代码中的持久模型类型

> ID：15708400
> 
> 赞同：3
> 
> 时间：2013-03-29T17:34:43.533
> 
> 标签：haskell, yesod, fay

我正在使用 Yesod 脚手架站点（yesod 1.1.9.2），昨天花了几个小时来了解 Fay 和 Yesod 的基本用法。我想我现在了解了使用 Fay 向页面添加大量 AJAX 功能的预期工作流程（我在这里会有点迂腐，因为其他人可能会发现逐步的帮助）：

*   将数据构造函数添加`Example a`到`SharedTypes.Command`.
*   在 中的表达式`case readFromFay Command of ...`中`Handler.Fay.onCommand`，添加一个与我的新数据构造函数匹配的案例。
*   在 /fay 中创建一个 Fay 文件“Example.hs”，以 fay/Home.hs 为模板。在这里的某个地方，使用表达式`call (Example "foo") $ myFayCallback`。
*   为将使用我正在生成的 Javascript 的页面定义一个路由和处理程序。在处理程序中，使用`$(fayFile' (ConE 'ScriptR) "Example.hs")`.

我的问题：**在当前的 Yesod/Fay 架构中，我应该如何与我的 Fay 代码共享我的持久模型类型？**

在 Fay 文件中使用`import Model`不起作用 - 当我尝试加载使用此 Fay 文件的页面时，我在浏览器中收到错误（我猜是 Fay 提醒我错误的标准方式），表明它不能找到模块“模型”，但它只搜索了以下目录：

*   projectroot/cabal-dev//share/fay-0.14.2.0/src
*   projectroot/cabal-dev/share/fay-base-0.14.2.0/src
*   projectroot/cabal-dev/share/fay-base-0.14.2.0
*   项目根/fay
*   projectroot/fay-shared

我还尝试在 SharedTypes.hs 中导入和重新导出模型，但这产生了相同的错误。

有没有办法做到这一点？如果不是，为什么不呢？（我是 Haskell 和 Yesod 的相对菜鸟，所以回答“为什么不呢？”这个问题真的很有帮助。）

**编辑：**

我刚刚意识到在这个问题的标题中提到 Persistent 可能会产生误导。为了更清楚我想要做什么：我只想能够使用 Yesod 为我的模型定义的相同数据类型在我的 Fay 代码中表示数据。例如，如果我在 config/models 中定义了一个模型......

```
Foo
    bar BarId
    textThatCanBeNull Text Maybe
    deriving Show 
```

...我希望能够定义一个接收和/或返回类型值的 AJAX“命令”，`Foo`并让我的 Fay 代码在`Foo`s 中处理，而无需编写任何反序列化代码。我知道我将无法直接从我的 Fay 代码中使用 Persistent 的任何查询功能；我只在标题中提到了 Persistent，因为我将 Model.hs 和 config/models 中的所有内容都与 Persistent 联系在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:33:11.617

目前不支持此功能；Persistent 利用了许多 Fay 不支持的功能（例如，模板 Haskell）。现在，拥有一个由 Fay 和 Yesod 共享的中间数据类型并将您的 Persistent 数据转换为/从该类型转换可能是有意义的。

# .net - 与数据库没有任何关系的简单 .NET 事务？

> ID：15708402
> 
> 赞同：2
> 
> 时间：2013-03-29T17:34:51.037
> 
> 标签：.net, transactions

我有一个 .NET WinForms 应用程序。在其中，我运行了 3 个对数据库不做任何事情的函数。如果有任何失败，我只想回滚函数的操作。

所以我正在寻找一个简单的 .NET 事务示例，但我在谷歌上搜索的所有内容似乎都涉及使用 SQL 事务处理。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:52:58.457

你可以看看[实现 IEdtiableObject](http://mvmmapper.codeplex.com/wikipage?title=Implementing%20IEditableObject)，[另一个教程](http://www.paulstovell.com/editable-object-adapter)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:26:30.893

取决于事务失败时要回滚的操作类型。通常，您需要实现一个或多个资源管理器并将它们登记在事务中才能使其工作。

这是一项非常重要的工作，它可能是你需要镊子的大锤，即你可能不应该尝试它（我同意提到 Memento 模式的评论者，这是值得研究的）。简而言之，没有办法简单地“回滚”方法调用，因为它所做的更改可能涉及不同类型的资源（内存、文件系统、Web 服务等）。

我认为它也充满了各种逻辑上的困难，比如事务应该只回滚您的方法执行的更改，还是应该尝试回滚您的方法调用的其他方法执行的更改？您将如何执行事务的[ACID属性？](https://en.wikipedia.org/wiki/ACID)您基本上必须在事务期间阻止任何其他线程访问相同的内存位置，以防止脏读等。关系数据库能够做到这一点，因为它们可以严格控制哪些事务可以访问哪些数据以及何时访问。而在单个进程中，当所有线程共享相同的地址空间时，这要困难得多。

如果您只对逆向内存操作感兴趣，您应该知道，MS 曾一度考虑将软件事务内存 (STM) 作为 .NET 框架的一部分，但由于其困难而[放弃了这些计划。](http://softtalkblog.com/2010/05/18/microsoft-discontinues-software-transactional-memory-experiment/)但是，有一篇非常古老的[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc163688.aspx)试图实现一些类似的功能（它提供了`Transactional<T>`一种用于对内存中的值进行事务访问的类型）。不过，我从未见过在实际代码中使用它。

它可能会成为一个有趣的研究项目。对于其他任何事情，底线是不要这样做。;-)

# haskell - Haskell where 类型声明

> ID：15708408
> 
> 赞同：3
> 
> 时间：2013-03-29T17:35:08.323
> 
> 标签：haskell, types, where-clause

我是 Haskell 的新手，在类型系统方面遇到了麻烦。我有以下功能：

```
threshold price qty categorySize
    | total < categorySize = "Total: " ++ total ++ " is low"
    | total < categorySize*2 = "Total: " ++ total ++ " is medium"
    | otherwise = "Total: " ++ total ++ " is high"
    where total =  price * qty 
```

Haskell 回应：

```
No instance for (Num [Char])
      arising from a use of `*'
    Possible fix: add an instance declaration for (Num [Char])
    In the expression: price * qty
    In an equation for `total': total = price * qty
    In an equation for `threshold':
     ... repeats function definition 
```

我认为问题在于我需要以某种方式告诉 Haskell 总计的类型，并可能将其与类型类 Show 相关联，但我不知道如何实现。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T17:39:13.567

问题是您将其定义`total`为乘法的结果，这迫使它成为 a `Num a => a`，然后您将其用作`++`字符串的参数，迫使它成为`[Char]`。

您需要转换`total`为`String`：

```
threshold price qty categorySize
    | total < categorySize   = "Total: " ++ totalStr ++ " is low"
    | total < categorySize*2 = "Total: " ++ totalStr ++ " is medium"
    | otherwise              = "Total: " ++ totalStr ++ " is high"
    where total    = price * qty
          totalStr = show total 
```

现在，它将运行，但代码看起来有点重复。我会建议这样的事情：

```
threshold price qty categorySize = "Total: " ++ show total ++ " is " ++ desc
    where total = price * qty
          desc | total < categorySize   = "low"
               | total < categorySize*2 = "medium"
               | otherwise              = "high" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:43:06.533

问题似乎是您需要在字符串和数字之间显式转换。Haskell 不会自动将字符串强制转换为数字，反之亦然。

要将数字转换为字符串显示，请使用`show`.

要将字符串解析为数字，请使用`read`. 由于`read`实际上适用于许多类型，您可能需要指定结果的类型，如：

```
price :: Integer
price = read price_input_string 
```

# mysql - 添加子查询后查询慢

> ID：15708409
> 
> 赞同：2
> 
> 时间：2013-03-29T17:35:09.813
> 
> 标签：mysql

运行以下效果很好：

```
SELECT email FROM User WHERE empNum IN (126,513,74) 
```

但是，这需要很长时间才能回复（没有错误）使用：

```
SELECT email FROM table1 WHERE empNum IN (
   SELECT empNum FROM table2 WHERE accomp = 'onhold' GROUP BY empNum
) 
```

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:47:17.903

我认为您需要的 join 语句是：

```
SELECT email FROM table1
INNER JOIN table2
ON table1.empNum=table2.empNum
AND table2.accomp = 'onhold' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:47:43.567

那个怎么样？

```
SELECT DISTINCT table1.email
FROM table1
INNER JOIN table2 USING(empNum)
WHERE table2.accomp = 'onhold' 
```

`table2.accomp`如果您经常使用该查询，您可能应该建立一个索引：

```
CREATE INDEX accomp ON table2 (accomp); 
```

或许

```
CREATE INDEX accomp ON table2 (empNum,accomp); 
```

执行一些粗略的（但决定性的）基准：

1.  登录mysql控制台
2.  清除查询缓存（*）：

    ```
    RESET QUERY CACHE; 
    ```

3.  运行慢查询并记下时间

4.  创建索引
5.  清除查询缓存
6.  运行慢查询并记下时间
7.  删除索引
8.  创建另一个索引
9.  清除缓存
10.  再运行一次慢查询
11.  比较时间并保持最佳索引（通过删除当前索引并在必要时创建正确的索引）

[(*) 您需要相关权限才能运行该命令]

# c++ - 如何处理clang中的全局构造函数警告？

> ID：15708411
> 
> 赞同：29
> 
> 时间：2013-03-29T17:35:27.593
> 
> 标签：c++, clang

Clang 警告（当使用`-Weverything`or时`Wglobal-constructors`）关于静态对象的构造函数。

```
warning: declaration requires a global constructor
      [-Wglobal-constructors]
A A::my_A; // triggers said warning
     ^~~~ 
```

为什么这是相关的，应该如何处理这个警告？

简单示例代码：

```
class A {
  // ...
  static A my_A;
  A();
};

A A::my_A; // triggers said warning 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-29T18:03:13.490

这是一个触发相同警告的更简单的情况：

```
class A {
public:
  // ...
  A();
};

A my_A; // triggers said warning

test.cpp:7:3: warning: declaration requires a global constructor [-Wglobal-constructors]
A my_A; // triggers said warning
  ^~~~
1 warning generated. 
```

这是完全合法且安全的 C++。

但是，对于您拥有的每个重要的全局构造函数，应用程序的启动时间都会受到影响。该警告只是让您了解此潜在性能问题的一种方式。

您可以使用 -Wno-global-constructors 禁用警告。或者您可以更改为这样的惰性初始化方案：

```
A&
my_A()
{
    static A a;
    return a;
} 
```

这完全避免了这个问题（并抑制了警告）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-06T03:23:22.723

@Howard Hinnant 的解决方案避免了全局构造函数，但它仍然退出时间析构函数。可以通过选项找到`-Wexit-time-destructors`

所以理想的解决方案可以基于来自[http://src.chromium.org/svn/trunk/src/base/basictypes.h的 CR_DEFINE_STATIC_LOCAL](http://src.chromium.org/svn/trunk/src/base/basictypes.h)

```
A& my_A()
{
    static A &a = *new A;
    return a;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-26T16:54:42.093

如果您可以声明构造函数`constexpr`，那将抑制警告（因为这保证了[常量初始化](https://en.cppreference.com/w/cpp/language/constant_initialization)）。见[https://godbolt.org/z/s3hY83jdr](https://godbolt.org/z/s3hY83jdr)

# python - Django：按文本字段的长度查找

> ID：15708416
> 
> 赞同：14
> 
> 时间：2013-03-29T17:35:41.070
> 
> 标签：python, sql, django

我有一个带有文本字段的模型。我想做一个查找，它将返回该字段中长度为 7 或更多的字符串的所有项目。可能的？

查找所有没有该字段的对象怎么`''`样？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-29T18:06:22.263

我认为正则表达式查找可以帮助您：

```
ModelWithTextField.objects.filter(text_field__iregex=r'^.{7,}$') 
```

或者您总是可以在 Django 模型上执行原始 SQL 查询：

```
ModelWithTextField.objects.raw('SELECT * FROM model_with_text_field WHERE LEN_FUNC_NAME(text_field) > 7') 
```

其中 len_func_name 是 DBMS 的“字符串长度”函数的名称。例如在 mysql 中它被命名为“长度”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-27T22:45:44.283

从 django 1.8 开始，可以使用[`Length`](https://docs.djangoproject.com/en/1.8/ref/models/database-functions/#django.db.models.functions.Length)数据库功能：

```
from django.db.models.functions import Length
qs = ModelWithTextField.objects \
        .annotate(text_len=Length('text_field_name')) \
        .filter(text_len__gte=7) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-06T16:35:15.167

从 Django 1.9 开始，`Length`数据库函数可以注册为查询集查找：

```
from django.db.models import CharField
from django.db.models.functions import Length
CharField.register_lookup(Length, 'length') 
```

这样您就可以通过以下方式使用它：

```
# Get authors whose name is longer than 7 characters
authors = Author.objects.filter(name__length__gt=7) 
```

请参阅：[数据库函数 -](https://docs.djangoproject.com/en/3.2/ref/models/database-functions/#length)官方 Django 3.2 文档中的Length()

# c# - 不存在查询字符串时显示页面

> ID：15708417
> 
> 赞同：0
> 
> 时间：2013-03-29T17:35:41.397
> 
> 标签：c#, asp.net, query-string

我有一个页面，要求我在页面加载时有一个游戏周 ID 才能运行特定方法。

这通过查询字符串进行解析，并使用以下内容检索：

```
gameweekID = Request.QueryString["gameweekID"]; 
```

例如：

```
page1.aspx?gameweekID=1 
```

但是，我的问题是在 url 是 page1.aspx 的情况下，没有提供查询字符串。

如何将页面默认为 gameweekID = 1，而不是收到错误

`Procedure or function 'GetPredictions' expects parameter '@gameweekID', which was not supplied.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:36:14.933

你可以这样做：

```
gameweekID = Request.QueryString["gameweekID"] ?? "1"; 
```

这意味着使用if 代替，但是`Request.QueryString["gameweekID"]`如果您请求or ，这仍然会产生错误。`null``"1"``page1.aspx?gameweekID=``page1.aspx?gameweekID=foo`

也许更优雅的方法是验证它`gameweekID`实际上是一个整数。像这样：

```
string gameweekIDString = Request.QueryString["gameweekID"];
int gameweekID;
if (!int.TryParse(gameweekIDString, out gameweekID))
{
    gameweekID = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:23:55.313

`if(Request.Querystring["gameweekID"] === null) Response.Redirect("page.aspx?!gameweekID=1")`

# javascript - javascript - 如果元素不可见，是否会在元素上触发点击事件？

> ID：15708418
> 
> 赞同：0
> 
> 时间：2013-03-29T17:35:44.003
> 
> 标签：javascript, css, click, visibility, hidden

如果您更改元素的可见性，`visibility: hidden`如果用户单击它，单击事件是否仍会触发？

我想“隐藏”一个元素（即`<span>`）并禁止点击事件触发，但保留在文档的正常流程中的位置。所以`display: none;`不会工作，因为它会从正常流程中删除文档，但想知道我在没有实际处理点击事件和使用 preventDefault() 的情况下通过 CSS 的其他选项是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:39:01.673

不，它不会触发`visibility:hidden`，这里有证据:)

[jsFiddle](http://jsfiddle.net/PFXC5/1/)

**JS**

```
$('div').click(function() {
    alert('');
}); 
```

**CSS**

```
div {
    background-color:red;
    width:100px;
    height:100px;
}

.hidden {
    visibility:hidden
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:40:51.583

是的可见性隐藏禁用点击事件。

要使用 web-kit 浏览器测试在此页面上的可点击元素，应用样式，`visibility: hidden`您将无法点击它。

# algorithm - 查找树中两个顶点之间的简单路径（无向简单图）

> ID：15708422
> 
> 赞同：0
> 
> 时间：2013-03-29T17:35:56.433
> 
> 标签：algorithm, graph-algorithm, breadth-first-search

给定两个顶点（A 和 B）和一棵树（G）（无向简单图） - 在 G 中的 A 和 B 之间的简单路径中找到顶点。算法应该以 O(V) 复杂度运行。

例如 - 在 a 和 b 之间的简单路径中找到顶点：

```
d<->k
k<->a
k<->b 
```

答案应该是：k

我试图修改 BFS 以实现目标，但到目前为止它似乎没有奏效。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:50:48.763

如果问题是在找到距离后重建路径，请按以下方式调整 BFS：从要连接的两个顶点之一开始，执行 BFS。对于您发现的每个顶点`v`，存储其前身：如果您`w`通过边发现顶点`u->w`，那么前身`w`是`u`。之后，您可以通过从目标顶点开始并从前一个顶点到前一个顶点，直到到达源顶点，以相反的顺序重建路径。

例子：

```
 J
      \
       \
        A
       / \
      /   \
     B     C
    / \     \
   /   \     \
  D     E     F
             / \
            /   \
           G     H
            \
             \
              I 
```

如果你计算从`D`到的路径`I`，那么你有以下前辈：

```
pre[I]=G
pre[G]=F
pre[F]=C
pre[C]=A
pre[A]=B        //A was discovered during the BFS via the edge B->A, so pre[A]=B
pre[B]=D 
```

您还将有一些前辈不在您的道路上，因此在重建过程中它们无关紧要。在示例中，您还将拥有

```
pre[J]=A
pre[E]=B
pre[H]=F 
```

但是对于从 BFS 的源`D`到目标的路径，`I`您在重建过程中不会遇到它们。

当您重建从 开始的路径时`I`，您会得到`I<-G`，然后`I<-G<-F`是 ，依此类推，直到您以相反的顺序获得完整路径。

如果你只关心一个目标的路径，你可以在发现目标后中止 BFS；但这不会改变复杂性。但是，如果您想要从一个源顶点到所有目标的路径，请执行完整的 BFS；如果你这样做，前辈将允许你重建任何目标顶点的路径。

# jquery - 有没有办法在 jQuery 中将回调从一个元素附加到另一个元素？

> ID：15708423
> 
> 赞同：0
> 
> 时间：2013-03-29T17:36:00.257
> 
> 标签：jquery, jquery-callback, replacewith

我有，例如：

```
$first = $('#firstElement').click(function() { }); 
```

但是在页面执行的某个时刻，我将用另一个元素替换该元素：

```
$newElement = jQuery('<div />');
$first.replaceWith($newElement); 
```

但我想将第一个元素的回调保留在第二个元素中......

那可能吗？

**编辑 1**

我已经知道如何使用`.on()`or来做到这一点`.delegate()`。这是我的场景：

一旦选择器更改，我需要加载一些内容，但是，该选择器的内容将根据登录用户的角色而有所不同。我已经将信息存储在`localstorage`. 该选择器的内容通过以下方式加载：

```
window.Core.setBranchesSelector($('#theElementInWhichTheSelectorWillBe')); 
```

该函数创建一个`<select>`元素。我可以在`js`该页面内进行：

```
$('#parent').on('click', '#theElementInWhichTheSelectorWillBe', function() {}); 
```

但我想让该功能尽可能灵活，因此，如果我做出如下想法：

```
$elementToBeReplaced = $('<coolElement />').click(function() {});
/* Something really cool with that element */
Core.setBranchesSelector($elementToBeReplaced); 
```

选择器继承`click`事件的回调...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:44:26.087

对您的问题的简单回答：不，您不能这样做。至少在新版本的 jQuery 中没有（使用 1.7 你可以这样做，因为@undefined 已经在答案#15708467 的评论中声明）。

[但是，这是一个使用.on()](http://api.jquery.com/on/)委托的简单示例：

[http://jsfiddle.net/8dCQT/](http://jsfiddle.net/8dCQT/)

```
$(function() {
    $("#parent").on("click", ".child", function() {
        alert($(this).text());
    });
    $("input").click(function() {
        $(".child").remove();
        $("#parent").append("<div class='child'>I'm a replacement</div>");
    });
}); 
```

单击按钮后，您会注意到，单击替换 div 会调用相同的单击函数并使用新 div 的文本发出警报。

Note: the important part here is that the replacement be selectable with the *same selector* (in this case `.child`) as the original. I used a class here, but I could have used first child of the parent, or whatever else works.

Also note: You don't have to bind to an immediate parent either, you can bind all the way at the top with `document`, but that's not recommended because it will slow down your code. You should bind as close to the elements you want to attach events to as possible so the code won't have to walk too far down the DOM tree.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:39:06.550

jQuery 不提供直接访问已绑定事件的 API。

将事件放在父元素上，替换子元素，并依靠事件冒泡来捕获它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:39:37.067

您要么需要在每个元素中包含相同的 id，要么为每个 div 提供一个公共类。一旦你这样做了，它就像：

```
$(document).on('click','.some-common-class',function(){
}); 
```

# c# - Silverlight 中的数字签名文档

> ID：15708430
> 
> 赞同：0
> 
> 时间：2013-03-29T17:36:20.700
> 
> 标签：c#, silverlight, winapi, marshalling, digital-signature

我在 Silverlight 中获取文件的数字签名时遇到了一些问题。

我正在使用 crypt32.dll 函数来获取签名哈希，但由于 CryptSignMessage 方法，我对意外错误感到困惑 - “参数不正确”。

这是我的代码：

```
 public byte[] SignData(IntPtr certContext, string signingText)
    {
        IntPtr buffer = IntPtr.Zero;
        Crypt32.CRYPT_SIGN_MESSAGE_PARA param = new Crypt32.CRYPT_SIGN_MESSAGE_PARA();
        Byte[] result = null;
        try
        {
            byte[] data = System.Text.Encoding.Unicode.GetBytes(signingText);
            IntPtr[] rgpbToBeSigned = new IntPtr[1];
            int[] rgcbToBeSigned = new int[1];
            IntPtr pSignerCert = certContext;
            buffer = Ole32.CoTaskMemAlloc((uint)(Marshal.SizeOf(data[0]) * data.Length));
            Marshal.Copy(data, 0, buffer, data.Length);
            rgpbToBeSigned[0] = buffer;
            rgcbToBeSigned[0] = 1;
            int resultlength = 0;

            param.dwMsgEncodingType = Crypt32.Constants.X509_ASN_ENCODING;
            param.pSigningCert = certContext;
            param.cbSize = Marshal.SizeOf(param);
            param.HashAlgorithm.pszObjId = "1.2.643.2.2.9";
            param.HashAlgorithm.Parameters.cbData = 0;
            param.HashAlgorithm.Parameters.pbData = null;
            param.pvHashAuxInfo = IntPtr.Zero;
            param.cMsgCert = 1;

            param.rgpMsgCert = kernel32.GlobalAlloc(0, (UIntPtr)(IntPtr.Size));
            Marshal.StructureToPtr(certContext, param.rgpMsgCert, false);
            if (Crypt32.CryptSignMessage(ref param, true, (int)1, rgpbToBeSigned, rgcbToBeSigned, result, ref resultlength) == false)
                throw new DB_Win32Exception(); //throws a string with error message from Getlastresult()

        }
        finally
        {
            if (!(param.rgpMsgCert == IntPtr.Zero))
             kernel32.LocalFree(param.rgpMsgCert);

            if (!(buffer == IntPtr.Zero))
             Ole32.CoTaskMemFree(buffer);
        } 
```

这是我的外部方法声明：

```
 [DllImport("Crypt32.dll", SetLastError = true)]
        public static extern Boolean CryptSignMessage(
            ref CRYPT_SIGN_MESSAGE_PARA pSignPara,
            Boolean fDetachedSignature,
            Int32 cToBeSigned,
            IntPtr[] rgpbToBeSigned,
            Int32[] rgcbToBeSigned,
            Byte[] pbSignedBlob,
            ref Int32 pcbSignedBlob
        );

        [StructLayout(LayoutKind.Sequential)]
        public struct CRYPT_ALGORITHM_IDENTIFIER
        {
            [MarshalAs(UnmanagedType.LPStr, SizeConst = 100)] //???
            public String pszObjId;                             
            public CRYPTOAPI_BLOB Parameters;
        }
        [StructLayout(LayoutKind.Sequential)]
        public struct CRYPT_SIGN_MESSAGE_PARA
        {
            public Int32 cbSize;
            public Int32 dwMsgEncodingType;
            public IntPtr pSigningCert;
            public CRYPT_ALGORITHM_IDENTIFIER HashAlgorithm;
            public IntPtr pvHashAuxInfo;
            public Int32 cMsgCert;
            public IntPtr rgpMsgCert;
            public Int32 cMsgCrl;
            public IntPtr rgpMsgCrl;
            public Int32 cAuthAttr;
            public IntPtr rgAuthAttr;
            public Int32 cUnauthAttr;
            public IntPtr rgUnauthAttr;
            public Int32 dwFlags;
            public Int32 dwInnerContentType;
        }
        public struct CRYPTOAPI_BLOB
        {
            public Int32 cbData;
            [MarshalAs(UnmanagedType.ByValArray,SizeConst=999)] // ??? 
            public Byte[] pbData;
        } 
```

有谁知道我如何确定问题出在哪里？

# eclipse - SBT - Scala 版本不匹配

> ID：15708431
> 
> 赞同：0
> 
> 时间：2013-03-29T17:36:29.927
> 
> 标签：eclipse, scala, sbt, read-eval-print-loop

我在 Eclipse 4.2.2 上安装了最新的 Scala IDE 3.0

我使用安装了最新的 SBT`brew install sbt`

当我运行 SBT 并输入命令时，`console`这就是我得到的

```
> console
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_43).
Type in expressions to have them evaluated.
Type :help for more information.

scala> 
```

Scala REPL 2.9.2 是从哪里来的？

# php - 如何仅删除图像宽度和高度，而不是 iframe？包含代码

> ID：15708432
> 
> 赞同：0
> 
> 时间：2013-03-29T17:36:39.500
> 
> 标签：php, regex, wordpress

我目前在我的 wordpress 函数文件中使用的代码是这样的：

```
function remove_width_attribute( $html ) {
   $html = preg_replace( '/(width|height)=("|\')\d*(|px)("|\')\s/', "", $html );
   return $html;
}
add_filter( 'the_content', 'remove_width_attribute', 10 ); 
```

这里的问题是它也针对 iframe，所以我将如何重写正则表达式来只说图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:59:19.300

我只会使用[非捕获组](http://www.regular-expressions.info/refadv.html)`img`在其他语句之前搜索标签，例如

`(?:img.*)(width|height ?= ?['"].*['"])`

你可以在这里看到工作：[http](http://regex101.com/r/mI1bD5) ://regex101.com/r/mI1bD5 。

请注意，这在许多简单的情况下都会失败（例如，`iframe`与标签在同一行`img`），但它应该将您推向正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T18:45:04.500

感谢特雷弗的有用建议。这是我修改后的表达式，它做得更好，但还不够。 `(?:<img.*){1}((width|height)=['"]\d*['"]) (?:.*\/>|>){1}`

# python - 使用来自另一个 Pandas 数据框的信息填充 Pandas 数据框

> ID：15708434
> 
> 赞同：3
> 
> 时间：2013-03-29T17:36:40.530
> 
> 标签：python, python-2.7, dataframe, pandas

我有一个包含以下信息的 Pandas 数据框：

```
index       year  month day symbol transaction  nr_shares
2011-01-10  2011  1     10  AAPL       Buy       1500
2011-01-13  2011  1     13  GOOG       Sell      1000 
```

我想填充第二个零填充的 Pandas 数据框

```
index        AAPL  GOOG
2011-01-10     0     0
2011-01-11     0     0
2011-01-12     0     0
2011-01-13     0     0 
```

使用来自第一个数据帧的信息，所以我得到

```
index        AAPL  GOOG
2011-01-10   1500    0
2011-01-11     0     0
2011-01-12     0     0
2011-01-13     0  -1000 
```

可以看出，在相关日期，特定数量的股票的买卖交易已输入相应的列，买入订单为正数，卖出订单为负数。

我怎样才能做到这一点？我是否必须遍历第一个数据帧索引并使用嵌套的“if”语句检查符号和事务列，然后写入第二个数据帧，或者是否有更优雅的数据帧方法可以使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:35:53.487

你可以使用`pivot_table`. 从（编辑为稍微复杂一些）开始：

```
>>> df1
        index  year  month  day symbol transaction  nr_shares
0  2011-01-10  2011      1   10   AAPL         Buy       1500
1  2011-01-10  2011      1   10   AAPL        Sell        200
2  2011-01-10  2011      1   10   GOOG        Sell        500
3  2011-01-10  2011      1   10   GOOG         Buy        600
4  2011-01-13  2011      1   13   GOOG        Sell       1000
>>> df2
        index  AAPL  GOOG
0  2011-01-10     0     0
1  2011-01-11     0     0
2  2011-01-12     0     0
3  2011-01-13     0     0 
```

我们可以签署股份：

```
>>> df1["nr_shares"] = df1.apply(lambda row: row["nr_shares"] * (-1 if row["transaction"] == "Sell" else 1), axis=1)
>>> df1
        index  year  month  day symbol transaction  nr_shares
0  2011-01-10  2011      1   10   AAPL         Buy       1500
1  2011-01-10  2011      1   10   AAPL        Sell       -200
2  2011-01-10  2011      1   10   GOOG        Sell       -500
3  2011-01-10  2011      1   10   GOOG         Buy        600
4  2011-01-13  2011      1   13   GOOG        Sell      -1000 
```

然后你可以枢轴`df1`。默认情况下，它使用聚合值的平均值，但我们想要总和：

```
>>> a = df1.pivot_table(values="nr_shares", rows="index", cols="symbol",
                    aggfunc=sum)
>>> a
symbol      AAPL  GOOG
index                 
2011-01-10  1300   100
2011-01-13   NaN -1000 
```

给出`b`相同的索引：

```
>>> b = df2.set_index("index")
>>> b
            AAPL  GOOG
index                 
2011-01-10     0     0
2011-01-11     0     0
2011-01-12     0     0
2011-01-13     0     0 
```

然后添加它们：

```
>>> (a+b).fillna(0)
symbol      AAPL  GOOG
index                 
2011-01-10  1300   100
2011-01-11     0     0
2011-01-12     0     0
2011-01-13     0 -1000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:36:40.890

首先使用[`apply`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html)您可以添加一个带有签名股票的列（正面代表买入，负面代表卖出）：

```
In [11]: df['signed_shares'] = df.apply(lambda row: row['nr_shares']
                                                    if row['transaction'] == 'Buy'
                                                    else -row['nr_shares'],
                                        axis=1)

In [12]: df
Out[12]: 
            year  month  day symbol transaction  nr_shares  signed_shares
index                                                                    
2011-01-10  2011      1   10   AAPL         Buy       1500           1500
2011-01-13  2011      1   13   GOOG        Sell       1000          -1000 
```

仅使用您感兴趣的那些列并[取消堆叠](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.unstack.html)它们：

```
In [13]: df[['symbol', 'signed_shares']].set_index('symbol', append=True)
Out[13]: 
                   signed_shares
index      symbol               
2011-01-10 AAPL             1500
2011-01-13 GOOG            -1000

In [14]: a = df[['symbol', 'signed_shares']].set_index('symbol', append=True).unstack()

In [15]: a
Out[15]: 
            signed_shares      
symbol               AAPL  GOOG
index                          
2011-01-10           1500   NaN
2011-01-13            NaN -1000 
```

在您喜欢的任何日期范围内重新编制索引：

```
In [16]: rng = pd.date_range('2011-01-10', periods=4)

In [17]: a.reindex(rng)
Out[17]: 
            signed_shares      
symbol               AAPL  GOOG
2011-01-10           1500   NaN
2011-01-11            NaN   NaN
2011-01-12            NaN   NaN
2011-01-13            NaN -1000 
```

最后使用 0 填充 NaN [`fillna`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.fillna.html)：

```
In [18]: a.reindex(rng).fillna(0)
Out[18]: 
            signed_shares      
symbol               AAPL  GOOG
2011-01-10           1500     0
2011-01-11              0     0
2011-01-12              0     0
2011-01-13              0 -1000 
```

正如@DSM 指出的那样，您可以使用 [13]-[15] 做得更好[`pivot_table`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.tools.pivot.pivot_table.html)：

```
In [20]: df.reset_index().pivot_table('signed_shares', 'index', 'symbol')
Out[20]: 
symbol      AAPL  GOOG
index                 
2011-01-10  1500   NaN
2011-01-13   NaN -1000 
```

# javascript - 为什么后面的 HTML 代码仍然显示角度代码而不是纯 html？

> ID：15708437
> 
> 赞同：0
> 
> 时间：2013-03-29T17:36:58.587
> 
> 标签：javascript, angularjs

我是 Javascript 世界的新手，正在做 Angular.JS。我编写了一个简单的 hello world 代码，在其中使用 ng-controller 为变量分配“Hello World”，并将值绑定到 HTML 中。

> ```
>  <div ng-controller="Controller">{{DisplayData}}</div> 
> ```

我的控制器是

> 功能控制器（$scope）{$scope.DisplayData =“Hello World”；}

当我运行代码并按预期正确显示“Hello World”时。出于好奇，我检查了背后的代码，并在 div 中期待“Hello World”，而是显示了我的 HTML 代码，其中包含 angular 指令。[我在http://docs.angularjs.org/guide/concepts#startup](http://docs.angularjs.org/guide/concepts#startup)
中阅读了文档，希望了解它为什么这样做，但我不确定我是否理解。 所以这是我的问题；我认为 HTML 是静态的，浏览器会按原样呈现 HTML。因此，如果我们需要创建任何动态的东西，我们会在创建最终的 DOM 对象之前评估值并通过 java 脚本将它们替换为实际值。理解错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:41:39.870

当您使用 JavaScript 更改 HTML 页面时，您实际上并没有更改页面的代码，而是称为 DOM 的东西，它位于内存中，最初是通过阅读后面的代码创建的。当您查看页面源代码或类似内容时，您看到的始终是浏览器从服务器获取的原始代码。大多数浏览器中都有一些工具可以以文本形式查看 DOM。例如，Chrome 中的 F12 会调出开发工具。这将显示 JavaScript 操作的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:40:06.987

当您使用 Javascript 框架来操作页面时，这会在 DOM 或 HTML 加载后发生，因此您在视图源中看到的 DOM 仍然是来自服务器的。如果您使用的是 Chrome 和“检查元素”，您将在 Hello World 中看到最新的 html。

# lucene - 在 lucene 中实现反馈

> ID：15708439
> 
> 赞同：1
> 
> 时间：2013-03-29T17:37:20.233
> 
> 标签：lucene

有人可以给我提示在 lucene 中应用伪反馈吗？我在谷歌上找不到太多帮助。我正在使用相似度类。lucene 中是否有任何类可以扩展以实现反馈？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:46:22.040

假设您指的是[这种相关性反馈方法](http://en.wikipedia.org/wiki/Relevance_feedback#Blind_feedback)，一旦您有了`TopDocs`原始查询，遍历您想要的记录数（假设我们想要原始查询的前 25 个文档的前 25 个术语）记录，并且call `IndexReader.getTermVectors(int)`，它将获取您需要的信息。遍历每个。虽然将术语频率存储在哈希图中将是我立即想到的实现。

就像是：

```
//Get the original results
TopDocs docs = indexsearcher.search(query,25);
HashMap<String,ScorePair> map = new HashMap<String,ScorePair>();
for (int i = 0; i < docs.scoreDocs.length; i++) {
    //Iterate fields for each result
    FieldsEnum fields = indexreader.getTermVectors(docs.scoreDocs[i].doc).iterator();
    String fieldname;
    while (fieldname = fields.next()) {
        //For each field, iterate it's terms
        TermsEnum terms = fields.terms().iterator();
        while (terms.next()) {
            //and store it
            putTermInMap(fieldname, terms.term(), terms.docFreq(), map);
        }
    }
}

List<ScorePair> byScore = new ArrayList<ScorePair>(map.values());
Collections.sort(byScore);

BooleanQuery bq = new BooleanQuery();
//Perhaps we want to give the original query a bit of a boost
query.setBoost(5);
bq.add(query,BooleanClause.Occur.SHOULD);
for (int i = 0; i < 25; i++) {
    //Add all our found terms to the final query
    ScorePair pair = byScore.get(i);
    bq.add(new TermQuery(new Term(pair.field,pair.term)),BooleanClause.Occur.SHOULD);
}
}

//Say, we want to score based on tf/idf
void putTermInMap(String field, String term, int freq, Map<String,ScorePair> map) {
    String key = field + ":" + term;
    if (map.containsKey(key))
        map.get(key).increment();
    else
        map.put(key,new ScorePair(freq,field,term));
}

private class ScorePair implements Comparable{
    int count = 0;
    double idf;
    String field;
    String term;

    ScorePair(int docfreq, String field, String term) {
        count++;
        //Standard Lucene idf calculation.  This is calculated once per field:term
        idf = (1 + Math.log(indexreader.numDocs()/((double)docfreq + 1))) ^ 2;
        this.field = field;
        this.term = term;
    }

    void increment() { count++; }

    double score() {
        return Math.sqrt(count) * idf;
    }

    //Standard Lucene TF/IDF calculation, if I'm not mistaken about it.
    int compareTo(ScorePair pair) {
        if (this.score() < pair.score()) return -1;
        else return 1;
    }
} 
```

（我没有声称这是功能代码，处于当前状态。）

# firefox - Firefox 19.0.2 删除代理扩展文件

> ID：15708441
> 
> 赞同：1
> 
> 时间：2013-03-29T17:37:25.460
> 
> 标签：firefox, firefox-addon

在 Windows 8 64 位、Firefox 19.0.2 上工作。我去了`.../Firefox/Profiles/.../extensions`并把我的`ekons@www.solver.ws`文件包含一个字符串

```
h:\myextensions\ekons\ 
```

目录 h:\myextensions\ekons\ 包含我的扩展的 install.rdf 文件。

每次我重新启动 Firefox 时，它都会删除`.../Firefox/Profiles/.../extensions/ekons@www.solver.ws`文件。当然，无需尝试安装扩展。

有什么建议么？

**另外** 我附上了一个图像FF扩展目录。 ![在此处输入图像描述](../Images/c4bd7dbc11a5862fc7de3365bfc126d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:33:12.307

好吧，这是我的错误：扩展文件名与 install.rdf 中的 ID 不同。FireFox 会默默地从配置文件目录中删除此类文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T21:12:31.753

我有同样的问题，问题是 install.rdf 文件中有一个额外的标签 </em:description>。
当它是一个有效的 XML 时，一切正常。

# php - 如何在代码点火器中实现更多语义 url？

> ID：15708445
> 
> 赞同：0
> 
> 时间：2013-03-29T17:37:39.463
> 
> 标签：php, codeigniter

我只是在学习CI。我正在尝试构建自己的 CMS。我已经成功创建了一个 url 结构`www.mydomain.com/pages/getpage/2`，其中 2 是页面的 id。

但是，我想从 url 中删除“/pages/getpage/2”。相反，我希望域读取`www.mydomain.com/about`，关于作为页面的标题，它是 db 中的一列。

我意识到这与路由有关，也可能与 htaccess 文件有关。

我不确定在路由中添加什么来制作我想要的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:50:57.140

如果您希望 www.mydomain.com/pages/getpage/2 路由到 www.mydomain.com/about，请将此行插入到您的 routes.php

```
$route['about/(:num)'] = "pages/getpage/$1"; 
```

您的 URL 结构将是 www.mydomain.com/about/2，因为您需要该 id 作为对您的内容的引用。

访问[此处](http://ellislab.com/codeigniter/user-guide/general/routing.html)了解有关路由的更多详细信息

# java - 如何使用apache poi突出显示一段docx文档中的子字符串？

> ID：15708450
> 
> 赞同：0
> 
> 时间：2013-03-29T17:37:52.883
> 
> 标签：java, apache-poi, docx

我正在开发一个允许比较 2 个 docx 文档的 Web 应用程序。我想在两个文档中突出显示相似的位置。我使用 apache poi 来处理 docx 文件。此外，为了突出显示，我可以在文本运行中设置一些属性。但是这种方式仅适用于文本运行单元。那么，有没有办法在任意位置突出显示（例如：粗体，设置颜色......）给定段落中的子字符串？

# ios - OSX Xcode 无法从首选项下载额外的 iOS 模拟器 - >下载

> ID：15708455
> 
> 赞同：6
> 
> 时间：2013-03-29T17:38:15.530
> 
> 标签：ios, xcode, macos

我是一个没有经验的iOS开发人员，刚买了一台macbook并安装了xcode 4.6 我去Xcode->preferences->downloads->components下载了额外的模拟器我看到4个选择：1）命令行工具2）iOS 5.0模拟器（大约600 MB) 3) iOS 5.1 模拟器 (大约 600 MB) 4) iOS 6.0 模拟器 (大约 600 MB)

我按下安装 iOS 5.0 模拟器，它显示了一个进度条。但是，进度条移动非常缓慢（大约在 3 小时内完成 20%），然后在下载开始大约 4 小时后中断，并显示“网络连接丢失”消息。

我有超过 20 Mbit/sec 的快速连接，可以立即下载 600MB 大小的文件。我认为这可能是我的特定 ISP 的某种问题，所以我尝试从 4 个不同的地方用不同的 ISP 重复这个（速度总是像 20 Mbit 或更高）。

结果是一样的——它在 3 小时内下载了大约 20-25% 并中断了。对于 600 个文件的 20 Mbit 连接，这真的很慢。

所以它不是 ISP 我不认为这对我的特定 Mac 来说是个问题，因为它以我的互联网连接的正常预期速度从其他网站下载其他文件。

有人知道问题可能是什么吗？Xcode 中的某些设置，例如“将下载速度限制为 3600 波特”？

额外信息：

OSX 版本：10.8 Xcode 版本：4.6 Mac 类型：MacBook Air

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:15:38.820

我又试了 3 次，终于能够下载所有三个包。总共 1.5GB 需要 3 个小时才能完成。所以，这是一些未解决的问题，因为这样的下载速度对于我的 20+ Mbit 连接来说真的不常见。

无论如何，“无法安装”的问题解决了。下载速度的问题依然存在。

感谢所有评论者的想法和支持。

# python - python中的慢速数组操作

> ID：15708461
> 
> 赞同：0
> 
> 时间：2013-03-29T17:38:42.543
> 
> 标签：python, arrays, numpy

我的问题可能很简单，但我想不出办法让这个操作更快

```
 print a[(b==c[i]) for i in arange(0,len(c))] 
```

其中 a,b 和 c 是三个`numpy`数组。我正在处理具有数百万个条目的数组，上面的代码是我程序的瓶颈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:52:18.020

您是否试图获取`a`where的值`b==c`？

如果是这样，你可以这样做`a[b==c]`：

```
from numpy import *

a = arange(11)
b = 11*a
c = b[::-1]

print a        # [  0   1   2   3   4   5   6   7   8   9  10]
print b        # [  0  11  22  33  44  55  66  77  88  99 110]
print c        # [110  99  88  77  66  55  44  33  22  11   0]
print a[b==c]  # [5] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:46:14.100

您可能应该研究广播。我假设您正在寻找类似以下的内容？

```
>>> b=np.arange(5)
>>> c=np.arange(6).reshape(-1,1)
>>> b
array([0, 1, 2, 3, 4])
>>> c
array([[0],
       [1],
       [2],
       [3],
       [4],
       [5]])
>>> b==c
array([[ True, False, False, False, False],
       [False,  True, False, False, False],
       [False, False,  True, False, False],
       [False, False, False,  True, False],
       [False, False, False, False,  True],
       [False, False, False, False, False]], dtype=bool)
>>> np.any(b==c,axis=1)
array([ True,  True,  True,  True,  True, False], dtype=bool) 
```

那么对于大型阵列，您可以尝试：

```
import timeit

s="""
import numpy as np
array_size=500
a=np.random.randint(500, size=(array_size))
b=np.random.randint(500, size=(array_size))
c=np.random.randint(500, size=(array_size))
"""

ex1="""
a[np.any(b==c.reshape(-1,1),axis=0)]
"""

ex2="""
a[np.in1d(b,c)]
"""

print 'Example 1 took',timeit.timeit(ex1,setup=s,number=100),'seconds.'
print 'Example 2 took',timeit.timeit(ex2,setup=s,number=100),'seconds.' 
```

当 array_size 为 50 时：

```
Example 1 took 0.00323104858398 seconds.
Example 2 took 0.0125901699066 seconds. 
```

当 array_size 为 500 时：

```
Example 1 took 0.142632007599 seconds.
Example 2 took 0.0283041000366 seconds. 
```

当 array_size 为 5,000 时：

```
Example 1 took 16.2110910416 seconds.
Example 2 took 0.170011043549 seconds. 
```

当 array_size 为 50,000 (number=5) 时：

```
Example 1 took 33.0327301025 seconds.
Example 2 took 0.0996031761169 seconds. 
```

请注意，我必须更改 np.any() 的哪个轴，以便结果相同。反转 np.in1d 的顺序或切换 np.any 的轴以获得所需的效果。您可以从示例 1 中取出 reshape，但 reshape 确实非常快。切换以获得想要的效果。真的很有趣 - 我将来必须使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:55:48.033

怎么样`np.where()`：

```
>>> a  = np.array([2,4,8,16])
>>> b  = np.array([0,0,0,0])
>>> c  = np.array([1,0,0,1])
>>> bc = np.where(b==c)[0] #indices where b == c
>>> a[bc]
array([4,8]) 
```

这应该可以解决问题。不确定时间是否适合您的目的

```
>>> a = np.random.randint(0,10000,1000000)
>>> b = np.random.randint(0,10000,1000000)
>>> c = np.random.randint(0,10000,1000000)
>>> %timeit( a[ np.where( b == c )[0] ]   )
100 loops, best of 3: 11.3 ms per loop 
```

# .htaccess - 无法让我的 htaccess 重写条件工作......

> ID：15708470
> 
> 赞同：0
> 
> 时间：2013-03-29T17:39:13.617
> 
> 标签：.htaccess

这是我的重写条件：

```
RewriteCond %{HTTP_HOST} ^8wayrun\.com/calibur [NC,OR]  
RewriteCond %{HTTP_HOST} ^www\.8wayrun\.com [NC]
RewriteRule ^(.*)$ http://8wayrun.com/$1 [L,R=301] 
```

它很简单... [http://www.8wayrun.com](http://www.8wayrun.com)被转发到[http://8wayrun.com](http://8wayrun.com) ...这部分工作得很好。但是第一行也应该将[http://8wayrun.com/calibur](http://8wayrun.com/calibur)转发到[http://8wayrun.com](http://8wayrun.com) ...这部分不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:22:48.567

得到它的工作：

```
RedirectMatch ^/calibur(.*) http://www.8wayrun.com/$1
RewriteCond %{HTTP_HOST} ^www\.8wayrun\.com [NC]
RewriteRule ^(.*)$ http://8wayrun.com/$1 [L,R=301] 
```

# php - 如何在 php 中为 OOM linux 杀手定义处理程序

> ID：15708474
> 
> 赞同：1
> 
> 时间：2013-03-29T17:39:22.437
> 
> 标签：php, linux, memory, error-handling, debian

我有一个消耗大量内存的脚本，所以 Linux Out Of Memory 杀手杀死了我的脚本。我如何发送电子邮件通知，该脚本已被 OOM 杀手杀死？PS我用过`set_error_handler`，`register_shutdown_function`他们没有帮助我

**更新：**我想我明白了，只是做`./test.php || mail.sh`，最后`test.php`添加`return true;`

# html - 响应式网站重叠

> ID：15708475
> 
> 赞同：0
> 
> 时间：2013-03-29T17:39:29.177
> 
> 标签：html, css, responsive-design

我正在尝试使网站具有响应性；我几乎完成了它，除了当我缩小窗口时，导航链接与左侧的徽标重叠。看[这里](http://www.rockymountaindesigncollective.com/) 当我重新调整窗口大小时，如何使导航栏移动到徽标下方？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:25:06.433

我玩了你的代码，我发现的第一件事是两个#nav id。每页应该只有一个唯一的 id。

但是，您的主要问题是导航项的固定位置。这导致导航总是在徽标上前进。固定位置忽略文档流并将其放置在您放置的任何位置。

您需要将导航返回到文档流中 将导航项目更改为相对并干预顶部定位。

您应该将这些放置在与您的断点相关的新媒体查询中您还需要删除所有这些定位样式。那应该让你成功了一半。我会提供更多帮助，但我刚喝了朗姆酒和可乐，所以现在最好停下来。

史蒂夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:42:26.317

要么向下移动徽标，要么在其上方创建一些空间并将链接放在所述空间中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:58:28.877

您必须更改许多`position`属性以及`float`属性 - 我在网站上玩过 CSS，这就是我所做的更改：

```
#topBar {
    height: 300px;
}
.BODYcontainer {
    margin-top: 300px;
}
.container .columns {
    float: none;
}
.container .columns.logoBox {
    left: 0;
    position: relative;
    display: block;
    float: none;
    margin-bottom: 50px;
}
#nav {
    position: relative;
    float: none;
    top: 0;
    left: 0;
    right: 0;
    text-align: center;
    display: block;
}
#companyNav {
    float: none;
    position: relative;
    top: 0;
} 
```

# powershell - 在powershell中调用没有空格的变量？

> ID：15708476
> 
> 赞同：0
> 
> 时间：2013-03-29T17:39:35.710
> 
> 标签：powershell

我正在尝试使用导入的 CSV 文件中的变量来替换字符串中的变量。

这是代码。

`param( [string] $CSV) $VMs = Import-Csv $CSV Foreach ($VM in $VMs) { psexec \\$VM.VM_Name -h netsh interface ip set address name='"Local Area Connection"' static $VM.IP_Address 255.255.255.0 $VM.Gateway 1 }`

这是它返回的内容：

psexec \@{VM_Name=TESTCSVVM; IP_地址=10.12.81.82；网关=10.12.81.1；VLAN=H Q_VM_81}.VM_Name -h netsh interface ip set address name="Local Area Connection" static 10.12.81.82 255.255.255.0 10.12.81.1 1

这是我想要的样子：

psexec \TESTCSVVM -h netsh interface ip set address name="本地连接" static 10.12.81.82 255.255.255.0 10.12.81.1 1

这是 CSV 文件：

"VM_Name","IP_Address","Gateway","VLAN" "TESTCSVVM","10.12.81.82","10.12.81.1","HQ_VM_81"

如何确保 \ 和第一个变量 $VM.VM_Name 之间没有空格？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:45:26.983

试试这个 ：

```
Foreach ($VM in $VMs) {
    psexec \\\\$($VM.VM_Name) -h netsh interface ip set address `
        name='"Local Area Connection"' `
        static $VM.IP_Address 255.255.255.0 $VM.Gateway 1 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:28:35.227

此外，通常将变量用引号括起来也可以。

因此，如果：

```
$path = C:\Windows\
$File = MyFile.ext
write-host "$path$File 
```

看起来像：

```
C:\Windows\myFile.ext 
```

# facebook - 检测用户何时离开我的 Facebook 应用程序

> ID：15708478
> 
> 赞同：0
> 
> 时间：2013-03-29T17:39:41.437
> 
> 标签：facebook, facebook-apps, offline

我正在开发一个 Facebook WEB 应用程序，我想知道谁目前在线。

如何检测用户何时离开/关闭我的应用程序以将用户标志更改为离线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:07:34.113

我假设离开/关闭您的应用程序是指导航到不同的网页或关闭浏览器？

实现这一点的最简单方法是使用 ajax 连接和 javascript 计时器定期将轮询发送回您的网络服务器。

当用户通过关闭浏览器或更改网页而与您的应用断开连接时，轮询将停止发生。

在您的服务器上运行的脚本会定期检查“在线”用户投票的时间戳，如果发现不再是最新的，则将该用户标记为离线。

Comet（编程）上的维基百科页面可能是一个不错的起点

[http://en.wikipedia.org/wiki/Comet_（编程）](http://en.wikipedia.org/wiki/Comet_(programming))

# android - ProgressDialog 关闭后如何立即执行指令/方法？

> ID：15708479
> 
> 赞同：1
> 
> 时间：2013-03-29T17:39:41.627
> 
> 标签：android, progressdialog

我试图`doSomeWork();`在我的方法中的 ProgressDialog 消失后执行该方法，该方法`printing();`似乎与其他方法重叠并且对话框未显示。如果我评论方法`doSomeWork();`，对话框将正确显示，直到线程完成。

这是我的方法`printing();`

```
 public void printing()
{

    final ProgressDialog printingDialog = ProgressDialog.show(this, "Printing...", "Please wait", true, false);

    new Thread(new Runnable() {
        @Override
        public void run() 
        {

          //something big executing here
        }
        }).start();

} 
```

他是我的方法`doSomework()`：

```
 public void doSomeWork(){

        Thread receiptPrint = new Thread(new Runnable() {

            @Override
            public void run() {

               //something here

                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        //another dialog here
                    }
                });

            }
            });
} 
```

在这里你可以看到我是如何调用这两种方法的：

```
 private OnClickListener onClickPrint = new OnClickListener() {

    public void onClick(final View v) {

            Log.d("Button","Clicked on Print Order Button");

                    printing();
                    doSomeWork(); 
```

有谁知道`doSomeWork()`只有在`printing();`完全完成时我才能执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:50:04.240

您可以使用异步任务而不是使用线程。在 preexecute 方法中显示进度对话框在完成打印操作后调用后台方法中的打印方法调用 postexecute 方法中的 doSomeWork()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:42:57.620

这是 a 的目的之一`AsyncTask`。它看起来类似于：

```
public void onClick(final View v) {

    new AsyncTask<Void, Void, Void>() {

        @Override
        protected void onPreExecute() {

            //Show your progress dialog in here
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground( Void... params ) {

            printing();
            return null;
        }

        @Override
        protected void onPostExecute( Void result ) {

            //Dismiss your progress dialog here
            doSomeWork();
        }
    }.execute();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:52:07.190

你可以`Handler`在android中使用它。例如考虑下面的一段代码。您可以关闭处理程序中的对话框。可能对你有用。

```
private void printing(){
  Thread receiptPrint = new Thread(new Runnable() {

        @Override
        public void run() {
            retrieveEmails();

            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                  try{
                      //here your code executes
                      //after code executes do following:
                      uiHandler.sendEmptyMessage(0);
                  }catch(Exception ex){
                      errorHandler.sendEmptyMessage(0);
                  }
                }
            });

        }
  });
  receiptPrint.start();
}

final Handler uiHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
            //here execute doSomeWork()
    }
};

final Handler errorHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
            //do other stuff
    }
}; 
```

# java - SQL 更新语句 - 尝试更新整个表错误

> ID：15708482
> 
> 赞同：2
> 
> 时间：2013-03-29T17:40:08.617
> 
> 标签：java, sql, derby

我正在使用 Derby 数据库，并且正在尝试更新我的一个表中的每一列。

我正在使用以下语句：

```
String stmt = "UPDATE APP.DATAVAULT SET DID = ?, DTITLE = ?, DUNAME = ?, DPASS = ?, DSANSWER = ?, DPIN = ?, DURL = ?, DNOTES = ?, PID = ? WHERE DID = ?, DTITLE = ?, DUNAME = ?, DPASS = ?, DSANSWER = ?, DPIN = ?, DURL = ?, DNOTES = ?, PID = ?"; 
```

我之前使用以下语句进行了更新：

```
String stmt = "UPDATE APP.PERSON SET PSNAME = ? WHERE PID = ?"; 
```

有没有更简单的方法来更新整个表？如果不是，我在此声明中做错了什么，因为我不断收到以下错误：

```
Syntax error: Encountered "," at line 1, column 137. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T17:42:24.297

这

```
WHERE DID = ?, DTITLE = ?, DUNAME = ?, DPASS = ?, DSANSWER = ?, DPIN = ?, DURL = ?, DNOTES = ?, PID = ? 
```

应该是这个

```
WHERE DID = ? AND DTITLE = ? AND DUNAME = ? AND DPASS = ? AND DSANSWER = ? AND DPIN = ? AND DURL = ? AND DNOTES = ? AND PID = ? 
```

所以替换`,`为`AND`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T17:43:26.303

应该添加多个子句，`AND`not with comma(,)。一定是`WHERE DID = ? AND DTITLE = ? AND...`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T17:43:42.727

WHERE 子句中的逗号应该是 AND

`String stmt = "UPDATE APP.DATAVAULT SET DID = ?, DTITLE = ?, DUNAME = ?, DPASS = ?, DSANSWER = ?, DPIN = ?, DURL = ?, DNOTES = ?, PID = ? WHERE DID = ? AND DTITLE = ? AND DUNAME = ? AND DPASS = ? AND DSANSWER = ? AND DPIN = ? AND DURL = ? AND DNOTES = ? AND PID = ?";`

# git - 詹金斯挂在“从原点获取上游更改”上

> ID：15708490
> 
> 赞同：31
> 
> 时间：2013-03-29T17:40:46.990
> 
> 标签：git, ssh, jenkins

我正在尝试在 Windows Server 2012 机器上设置 Jenkins，但遇到了很多困难。

我做过的事情：

*   创建了一个无密码的`id_rsa`，并且`id_rsa.pub`
*   使用并接受添加主机`known_hosts`为 bitbucket.org创建了一个文件。`ssh.exe -T bitbucket.org`
*   添加`E:`到系统范围的 HOME 变量
*   我已经将这些文件添加`C:/Windows/SysWOW64/config/systemprofile/.ssh`到`E:/.ssh`
*   我已将我的公钥作为部署密钥链接到 Bitbucket。
*   我已经三次检查了我所有的 URL、用户名等。
*   我什至手动从存储库中提取以设置初始基础`C:/Program Files (x86)/Jenkins/jobs/MyProject/workspace/`

然而它仍然挂在

```
Building in workspace C:\Program Files (x86)\Jenkins\jobs\MyProject\workspace
Checkout:workspace / C:\Program Files (x86)\Jenkins\jobs\MyProject\workspace - hudson.remoting.LocalChannel@13ca972
Using strategy: Default
Fetching changes from 1 remote Git repository
Fetching upstream changes from origin 
```

我给了它大约 20 分钟，所以这不是回购问题的速度/大小。如果我取消，这就是返回的内容：

```
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
hudson.plugins.git.GitException: Error performing command: C:\Program Files     (x86)\Git\bin\git.exe fetch -t origin +refs/heads/*:refs/remotes/origin/*
at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:780)
at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:739)
at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.fetch(CliGitAPIImpl.java:160)
at hudson.plugins.git.GitAPI.fetch(GitAPI.java:230)
at hudson.plugins.git.GitSCM.fetchFrom(GitSCM.java:793)
at hudson.plugins.git.GitSCM.access$000(GitSCM.java:57)
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:976)
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:942)
at hudson.FilePath.act(FilePath.java:865)
at hudson.FilePath.act(FilePath.java:838)
at hudson.plugins.git.GitSCM.determineRevisionToBuild(GitSCM.java:942)
at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1101)
at hudson.model.AbstractProject.checkout(AbstractProject.java:1364)
at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:670)
at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:575)
at hudson.model.Run.execute(Run.java:1575)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:237)
Caused by: java.lang.InterruptedException
at java.lang.ProcessImpl.waitFor(Native Method)
at hudson.Proc$LocalProc.join(Proc.java:319)
at hudson.Launcher$ProcStarter.join(Launcher.java:360)
at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:769)
... 19 more
ERROR: Could not fetch from any repository
FATAL: Could not fetch from any repository
hudson.plugins.git.GitException: Could not fetch from any repository
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:981)
at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:942)
at hudson.FilePath.act(FilePath.java:865)
at hudson.FilePath.act(FilePath.java:838)
at hudson.plugins.git.GitSCM.determineRevisionToBuild(GitSCM.java:942)
at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1101)
at hudson.model.AbstractProject.checkout(AbstractProject.java:1364)
at     hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:670)
at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:575)
at hudson.model.Run.execute(Run.java:1575)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:237) 
```

我在这里束手无策，所以我很感激我能得到的所有帮助。这是我尝试过的几篇文章，但没有任何改进。

[为 Github 私有存储库验证 Jenkins CI](https://stackoverflow.com/questions/5212304/authenticate-jenkins-ci-for-github-private-repository)

[设置 Jenkins 时权限被拒绝（公钥）](https://stackoverflow.com/questions/6515039/jenkins-git-permission-denied-publickey)

[Hudson Git 插件无法在 Windows 上运行](https://stackoverflow.com/questions/3188710/hudson-git-plugin-not-working-on-windows/3188786#3188786)

[http://computercamp.cdwilson.us/jenkins-git-clone-via-ssh-on-windows-7-x64](http://computercamp.cdwilson.us/jenkins-git-clone-via-ssh-on-windows-7-x64)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-18T17:10:37.263

以下是我解决类似问题的方法：

Msysgit 安装两个`git.exe`. `C:\Program Files (x86)\Git\bin`一下，二下`C:\Program Files (x86)\Git\cmd`。第一个不能与 Jenkins 一起使用。它会在完成它的工作后挂起。第二个完美运行。

更新您的 Jenkins Git 设置以指向正确`cmd\git.exe`并享受！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-10T14:17:51.947

这就是我解决它的方法：

我运行了 sysinternals 工具 psexec 来生成一个在 LocalSystem 帐户下运行的 CMD（与 jenkins 服务相同的帐户正在运行）

```
PSEXEC -i -s -d CMD 
```

在这个 cmd 提示符中，我从工作区目录执行了与挂起的 GIT.exe 进程相同的 git 命令。例如

d:\Programs\Jenkins\jobs\jobname\workspace>D:\Programs\Git\bin\git.exe 获取 -t ssh+git://gitpub@my.server.com:9360/data/gitpub/myRepository。 git +refs/heads/ *:refs/remotes/origin/*

瞧：我被提示输入“是”以将 SSH 密钥添加到已知主机的已知列表中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-12T05:45:37.643

在 Windows 上配置 jenkins 时，我发现另一个非常有用的链接，尤其是在使用 MSI 安装程序时：http: [//opensourcetester.co.uk/2013/06/28/jenkins-windows-ssh/](http://opensourcetester.co.uk/2013/06/28/jenkins-windows-ssh/)

还有一件我没有发现明显的事情是：连接到 Github 时必须使用 SSH url 而不是默认的 https 。希望这会为某人节省时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-09T20:51:17.543

只需体验“从原点获取上游更改”的冻结。

在基于 Windows 的机器上运行 Jenkins 作为服务似乎（根据我的经验）在使用 SSL 时会出现问题。

**解决方法]**

1.  更改您的 Jenkins 服务以在本地帐户下运行。
2.  确保您的本地管理员帐户配置为执行与 SSH 的 Git 交互。
3.  重新启动 Jenkins（[详细信息](https://stackoverflow.com/questions/8072700/jenkins-manual-restart)）。
4.  如果 Jenkins 没有启动，那么它在尝试从 Git 中提取时会遇到问题。手动杀死 git 和 ssh 进程，从 Jenkins 中杀死你的 java.exe 并手动启动 Jenkins 服务。

**关于我为什么选择此解决方案的详细信息]**

在设置授权主机以接受服务器并在服务器上注册 Jenkins 的密钥以允许连接之前，我已经遵循了其他步骤。我已经确保我可以在我的本地系统帐户（运行 Jenkins 服务）下成功执行 Git 操作。尽管如此，提取仍会冻结。为了检查我的 Git 和 SSL 配置是否正确，我什至去了我的 Jenkins 作业目录中最初配置的 Git 存储库，并[在本地系统帐户下](https://stackoverflow.com/questions/77528/how-do-you-run-cmd-exe-under-the-local-system-account)成功执行了拉取请求。有效; 因此密钥已正确设置。

我忘记了我在哪里读到的，但我听说在本地系统下处理 Git/SSH 时会出现问题。有了这些知识，我使用了我的 Git 环境并更改了 GIT_SSH 环境变量以使用[plink](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)（结合使用 Putty 来记住服务器密钥、puttygen 将 OpenSSL 密钥转换为 Putty 密钥和选美来记住我的密钥）用于 plink . 一旦我让它与 plink 一起工作，我发现它不是一个可用的解决方案。为了正确使用 plink，我还必须在我的本地系统帐户下运行 pageant 才能让 Jenkins 服务正确协商 SSH 调用。在考虑了如何在重新启动时正确设置我的初始状态之后，我不想把所有这些精力都花在让 SSH 连接正常工作上。

相反，我决定在我的本地管理员帐户下运行 Jenkins 更容易，该帐户也被配置为处理 Git 服务器。无需为本地系统帐户处理配置的 SSH 密钥，我的 git 操作运行良好。

* * *

请注意，David Gageot 的回答可能适用于某些人。我不必更改任何 Git 设置，因为在安装 Git 时，我选择了`Run Git from the Windows Command Prompt`将路径映射到`C:\Program Files (x86)\Git\bin\cmd\`目录的选项。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-28T19:55:09.593

我在笔记本电脑上遇到了同样的问题，我能够找到解决方案，但这仅适用于在设置为 Windows 服务的 Tomcat Web 容器中运行 Jenkins 战争的情况。

我只需要将 Tomcat 服务设置为以我的 Windows 用户身份而不是本地系统身份登录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-04T17:50:52.900

对我来说，这是 $HOME/.ssh 文件夹及其内容的权限。将其设置为对特定用户组可见后，Jenkins 能够在重新启动后获取更改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-14T12:53:38.190

[适用于 Windows 的 Git 客户端 2.6.1 版](https://git-scm.com/downloads) 在 Jenkins 中修复了这个问题。现在“从原点获取上游更改”没有延迟。

我在 Jenkins 中使用 git cmd 从：

> C:\Program Files\Git\cmd\git.exe

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-26T19:25:22.677

我花了几个小时试图弄清楚这一点，我发现将密码添加到 repo URL 解决了这个问题：

```
https://USERNAME:PASSWORD@bitbucket.org/REPO.git 
```

请注意用户名和密码之间的**:**

# ios - 这个声明的含义是什么？

> ID：15708493
> 
> 赞同：1
> 
> 时间：2013-03-29T17:41:09.040
> 
> 标签：ios, objective-c, c, cocoa-touch, cocoa

我不是 C/C++ 方面的专家。

我今天发现了这个声明：

```
typedef NS_OPTIONS(NSUInteger, PKRevealControllerType)
{
    PKRevealControllerTypeNone  = 0,
    PKRevealControllerTypeLeft  = 1 << 0,
    PKRevealControllerTypeRight = 1 << 1,
    PKRevealControllerTypeBoth = (PKRevealControllerTypeLeft | PKRevealControllerTypeRight)
}; 
```

你们能翻译每个值将具有的值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T17:45:54.887

运算符`<<`是 *按位*左移运算符。将所有位左移指定次数：（算术左移并保留符号位）

```
m << n 
```

将 的所有位`m`向左移动`n`多次。（*注意一班 == 乘以二*）。

`1 << 0`表示*没有*移位，因此它等于`1`only。

`1 << 1`表示*一个*班次，因此它仅等于`1*2`= 2。

我用一个字节解释：一个字节是这样的：

```
 MSB
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 0 | 0 | 1 |       1   
+----+----+----+---+---+---+---+---+
  7     6   5    4   3   2   1 / 0  
  |                           /           1 << 1
  |                          | 
  ▼                          ▼
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 0 | 1 | 0 |       2      
+----+----+----+---+---+---+---+---+ 
   7    6   5    4   3   2   1   0 
```

而`1 << 0`除了图一之外什么也不做。（注意第 7 位被复制以保留符号）

OR 运算符：按位或

```
 MSB                            PKRevealControllerTypeLeft
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 0 | 0 | 1 |  == 1
+----+----+----+---+---+---+---+---+
   7    6   5    4   3   2   1   0
   |    |    |   |   |   |   |   |      OR
 MSB                               PKRevealControllerTypeRight
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 0 | 1 | 0 |   == 2
+----+----+----+---+---+---+---+---+
   7    6   5    4   3   2   1   0

 = 

 MSB                    PKRevealControllerTypeBoth
+----+----+----+---+---+---+---+---+
|  0 |  0 | 0  | 0 | 0 | 0 | 1 | 1 |   == 3
+----+----+----+---+---+---+---+---+
   7    6   5    4   3   2   1   0 
```

`|`是位操作符。在下面的代码中它`or` `1 | 2`==`3`

```
PKRevealControllerTypeNone  = 0,             //  is Zero
PKRevealControllerTypeLeft  = 1 << 0,        //  one 
PKRevealControllerTypeRight = 1 << 1,        //  two
PKRevealControllerTypeBoth = (PKRevealControllerTypeLeft |    
                             PKRevealControllerTypeRight)  // three 
```

没有更多的技术原因来初始化这样的值，这样定义会使事情很好地排列起来阅读这个答案：[define SOMETHING (1 << 0)](https://stackoverflow.com/questions/15095350/define-something-1-0)

编译器优化将它们转换为更简单的：（*我不确定第三个，但我认为编译器也会优化它*）

```
PKRevealControllerTypeNone  = 0,     //  is Zero
PKRevealControllerTypeLeft  = 1,     //  one 
PKRevealControllerTypeRight = 2,     //  two
PKRevealControllerTypeBoth  = 3,     // Three 
```

**编辑：** @感谢直到。阅读此答案[带有 BOOL 标志的 App States](https://stackoverflow.com/questions/8956364/app-states-with-bool-flags?answertab=votes#8956606)显示了使用位运算符获得的声明的有用性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:44:51.733

这是位标志的枚举：

```
PKRevealControllerTypeNone  = 0       // no flags set
PKRevealControllerTypeLeft  = 1 << 0, // bit 0 set
PKRevealControllerTypeRight = 1 << 1, // bit 1 set 
```

进而

```
PKRevealControllerTypeBoth = 
  (PKRevealControllerTypeLeft | PKRevealControllerTypeRight) 
```

只是对其他两个标志进行按位或运算的结果。因此，设置了位 0 和位 1。

运算符是`<<`左移运算符。并且`|`运算符是按位或。

总之，结果值为：

```
PKRevealControllerTypeNone  = 0
PKRevealControllerTypeLeft  = 1
PKRevealControllerTypeRight = 2
PKRevealControllerTypeBoth  = 3 
```

但是从位标志的角度来考虑它会更有意义。或者作为通用集的集合：{ PKRevealControllerTypeLeft, PKRevealControllerTypeRight }

要了解更多信息，您需要阅读有关枚举、移位运算符和位运算符的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T17:45:05.077

这一切都归结为按位算术。

PKRevealControllerTypeNone 的值为 0（二进制 0000）

PKRevealControllerTypeLeft 的值为 1（二进制 0001）

PKRevealControllerTypeRight 的值为 2（二进制 0010），因为 0001 左移 1 位是 0010

PKRevealControllerTypeBoth 自 0010 以来的值为 3（二进制 0011）| 0001（或类似加法）= 0011

在上下文中，这最有可能用于确定值。属性 is `&`(or `bitwise-and`) 的作用类似于乘法。如果`1`ands 有一个数字，那么这个数字会被保留，如果`0`ands 有一个数字，那么这个数字就会被清除。

因此，如果你想检查一个特定的控制器是否是特定类型`Left`的并且它的值`0010`（即 type `Right`）`0010 & 0001 = 0`正如我们所期望的那样是 false （因此，你已经确定它不是正确的类型）。但是，如果控制器是`Both` `0011 & 0001 = 1`这样，结果是正确的，因为我们确定这是`Both`类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T17:47:48.793

这看起来像 Objective C 而不是 C++，但无论如何：

```
1 << 0 
```

只是左移（上）0 个位置。任何整数“<<0”都是它自己。

所以

```
1 << 0 = 1 
```

相似地

```
1 << 1 
```

只是左移一位。您可以通过多种方式可视化，但最简单的方法是乘以 2。[注 1]

所以

```
x << 1 == x*2 
```

或者

```
1 << 1 == 2 
```

最后，单管道运算符是[按位或](http://en.wikipedia.org/wiki/Bitwise_operation)。

所以

```
1 | 2 = 3 
```

tl;博士：

```
PKRevealControllerTypeNone  = 0
PKRevealControllerTypeLeft  = 1
PKRevealControllerTypeRight = 2
PKRevealControllerTypeBoth  = 3 
```

[1] 这种泛化存在一些限制，例如，当`x`等于或大于数据类型能够存储的最大值的 1/2 时。

# jquery - 仅在显示中显示预加载图像：无 div 但不显示 div

> ID：15708494
> 
> 赞同：0
> 
> 时间：2013-03-29T17:41:11.010
> 
> 标签：jquery, preloader

我有一个 div **wrapper_**显示 jquery 的结果

```
<div id='ico_wait' class="ico_wait" style='display: none;' >
     <img src ="img/ico_wait.gif" /> 
</div>

<div id='wrapper_' style='display: none;'>  
</div> 
```

在jQuery中

```
 $(document).ready(function () {
     $('#other_stuff').click(function () {
         //show image
         jQuery('#ico_wait').fadeToggle();
         //DO STUFF
         jQuery('#ico_wait').hide();
         //ADD INFO GOTTEN IN WRAPPER
         jQuery('#wrapper_').show();
         jQuery('#wrapper_').html("<b><p style='color:#5b5b5b; float:left; margin-top:0px; padding-top:20px;'>  </p> </b><br/> <br/> ");
     });
 }) 
```

如何添加

```
<div id='ico_wait' class="ico_wait" style='display: none;' >
     <img src ="img/ico_wait.gif" /> 
</div> 
```

里面的包装器_？所以它包含在div中？我的意思是，我想在执行代码时只显示图像而不是所有 div，当我完成获取结果然后隐藏图像并显示整个 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:55:36.363

如果我理解正确，您应该执行以下操作：

```
<div id='wrapper_' style='display: none;'>  
    <div id='ico_wait' class="ico_wait" >
        <img src ="img/ico_wait.gif" /> 
    </div>
</div> 
```

JS：

```
$(document).ready(function () {
    $('#other_stuff').click(function () {
        //show image when stuff inside wrapper is being populated
        $('#wrapper_').show();
        //DO STUFF
        //ADD INFO IN WRAPPER when its ready and hide image
        $('#wrapper_ #ico_wait').fadeToggle();
        $('#wrapper_').html("<b><p style='color:#5b5b5b; float:left; margin-top:0px; padding-top:20px;'>  </p> </b><br/> <br/> ");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:17:27.190

我认为最好的方法是：

CSS

```
.hide {
    display: none;
} 
```

HTML

```
<div id='wrapper_'> 
    <div id='ico_wait' class="ico_wait" class="hide" >
        <img src ="img/ico_wait.gif" /> 
    </div>
</div> 
```

jQuery

```
$(document).ready(function() {
    $('#other_stuff').click(function(){
             //show image
             jQuery('#ico_wait').removeClass('hide'); // Use of CSS Styles to do any animation for fading
             //DO STUFF
             jQuery('#ico_wait').addClass('hide');     
             //ADD INFO GOTTEN IN WRAPPER
             jQuery('#wrapper_').html("<b><p style='color:#5b5b5b; float:left; margin-top:0px; padding-top:20px;'>  </p> </b><br/> <br/> ");

        });
}); 
```

我更喜欢让 CSS 引擎对 HTML 进行任何样式更新和更改，这应该在另一个线程上运行，而不是同一个 JavaScript 执行线程，这样动画就可以在 JavaScript 运行时顺利进行。

您也可以仅使用 jQuery 进行内容交换，但不确定推荐的效果如何。

jQuery

```
$(document).ready(function() {
    $('#other_stuff').click(function(){
             //show image
             jQuery('#wrapper_').html("<img src='img/ico_wait.gif' />");
             //DO STUFF
             jQuery('#wrapper_').html("<b><p style='color:#5b5b5b; float:left; margin-top:0px; padding-top:20px;'>  </p> </b><br/> <br/> ");

        });
}); 
```

如果您在长时间运行的代码中遇到异步问题，您可以使用类似：jQuery Async 来帮助[http://mess.genezys.net/jquery/jquery.async.php](http://mess.genezys.net/jquery/jquery.async.php)

希望这可以帮助。

# susy-compass - susy网格背景显示

> ID：15708501
> 
> 赞同：1
> 
> 时间：2013-03-29T17:41:30.127
> 
> 标签：susy-compass

我无法让*susy-grid-background* mixin 显示我的网格。我已将网格相关变量设置为 true 并提供了网格颜色，但无论我做什么网格都不会显示。

如果我从 Susy 网站运行演示代码，网格会按预期显示。我错过了什么？

```
 .contain {
        @include susy-grid-background;
        @include container($total-columns);
        max-width: 62em;
    }

    header {
        @include span-columns(12 omega, 12);
        padding: 1em;

        .branding {
            font-family: RockSaltRegular;
            font-size: 2em;
        }
    }

    .main[role="main"] {
        @include span-columns(12 omega, 12);
    }

    .content {
        background: white;
        border: 1px solid darken($primary, 30%);
        @include border-radius(1em);
        @include box-shadow(2px 2px 5px 0 hsla(0, 0%, 0%, 0.35));   
        padding: 1em;

        h1 {
            font-size: 1.5em;
        }
    }

    footer {
        @include span-columns(12 omega, 12);
        font-size: 0.75em;

        &.fixed {
            bottom: 5em;    
            position: fixed;    
        }
    }

    .hero {
        @include span-columns(12);  
        margin-top: 20%;

        @include at-breakpoint($iPadPortrait) {
            @include span-columns(7, 12);
            @include isolate(3);    
        }   

        .branding {
            font-family: RockSaltRegular;
            font-size: 2em;
            margin: 0 auto;
            max-width: 6.25em;
            text-align: center;

            @include at-breakpoint($iPadPortrait) {
                font-size: 3em;
            }
        }

        .hero-search {
            margin-top: 1em;
            text-align: center;

            input[type=text],
            input[type=search] {
                border: 1px solid white;
                @include border-radius(1.5em);
                margin: 1em 0 2.5em;
                padding: 1em;
                width: 100%;
                -webkit-appearance: caret;
            }

            button {
                background: rgb(157, 151, 139);
                border: 2px solid rgb(157, 151, 139);
                @include border-radius(1.5em);          
                @include box-shadow(2px 2px 5px 0 hsla(0, 0%, 0%, 0.35));
                color: white;
                font-size: 1em;
                min-width: 4em;
                padding: 0.5em 1.5em;
                text-transform: uppercase;

                &:hover {
                    @include linear-gradient($secondary, set-lightness($secondary,10%));                
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:33:40.143

我能够通过重新排列导入语句来解决这个问题。[工具包](https://github.com/Team-Sass/toolkit)和[波旁威士忌](http://bourbon.io)必须制造一些冲突或覆盖一些使 susy 网格显示的东西。为了让网格显示，我将导入的顺序更改为：

```
@import "compass/reset";
@import "toolkit";
@import "susy";
@import "bourbon"; 
```

# java - 如何从托盘中取消隐藏程序，插入组合键？

> ID：15708510
> 
> 赞同：1
> 
> 时间：2013-03-29T17:42:03.050
> 
> 标签：java, keylistener, tray

我在托盘中有一个程序，我希望它在我输入一个组合键时出现，而不是`Alt + Key`or `Ctrl + Key`，而是像密码，一个完整的字符串。

我必须使用什么？KeyListener 还是 InputEvent？

# azure - Fabric 不断使用 SSH 连接询问密码

> ID：15708516
> 
> 赞同：12
> 
> 时间：2013-03-29T17:42:25.287
> 
> 标签：azure, openssl, fabric, paramiko, openssh

我正在尝试使用结构连接到 Windows azure 实例，但是尽管我配置了 ssh 连接来执行命令，但结构仍然要求输入密码。

这是我的织物文件：

```
def azure1():
    env.hosts = ['host.cloudapp.net:60770']
    env.user = 'adminuser'
    env.key_filename = './azure.key'

def what_is_my_name():
    run('whoami') 
```

我将其运行为：

```
fab -f fabfile.py azure1  what_is_my_name 
```

或者

```
fab -k -f fabfile.py -i azure.key -H adminuser@host.cloudapp.net:60770 -p password what_is_my_name 
```

但是没有任何效果，尽管我输入正确，它仍然要求输入用户密码。

```
Executing task 'what_is_my_name'
run: whoami
Login password for 'adminuser': 
Login password for 'adminuser': 
Login password for 'adminuser': 
Login password for 'adminuser': 
```

如果我尝试直接与 ssh 连接，它会完美运行。

```
ssh -i azure.key -p 60770 adminuser@host.cloudapp.net 
```

我已经尝试过其他问题（[q1](https://stackoverflow.com/questions/10101127/fabric-asks-for-password-even-though-i-can-ssh-using-credential) [q2](https://stackoverflow.com/questions/12795636/fabric-keeps-asking-for-password) [q3](https://stackoverflow.com/questions/4416848/fabric-asks-for-root-password)）中给出的建议，但没有任何效果。

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T22:06:38.130

最后我发现问题是由于公私密钥对的生成。

我按照[windows azure guide](http://www.windowsazure.com/en-us/manage/linux/how-to-guides/ssh-into-linux/?fb=es-es)中提供的步骤操作，那里的密钥是使用 openssl 生成的，因此该过程会产生一个存储在 pem 文件中的公钥，您必须在创建过程中上传到您的实例。

问题是得到的这个私钥没有被paramiko正确识别，所以fabric不起作用。如果您尝试使用 python 解释器中的 paramiko 打开 ssh 连接：

```
>>> import paramiko, os
>>> paramiko.common.logging.basicConfig(level=paramiko.common.DEBUG)
>>> ssh = paramiko.SSHClient()
>>> ssh.load_host_keys('private_key_file.key') # private key file generated using openssl
>>> ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
>>> ssh.connect("web1.cloudapp.net",port=56317) 
```

给我错误：

```
DEBUG:paramiko.transport:Trying SSH agent key a9d8dd41609191ebeedbe8df768ad8c9
DEBUG:paramiko.transport:userauth is OK
INFO:paramiko.transport:Authentication (publickey) failed.
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File ".. /paramiko/client.py", line 337, in connect
    self._auth(username, password, pkey, key_filenames, allow_agent, look_for_keys)
  File ".. /paramiko/client.py", line 528, in _auth
    raise saved_exception
paramiko.PasswordRequiredException: Private key file is encrypted 
```

当密钥文件未加密时。

为了解决这个问题，我使用 openssh 创建了密钥对，然后将公钥转换为 pem 以将其上传到 azure：

```
# Create key with openssh
ssh-keygen -t rsa -b 2048 -f private_key_file.key

# extract public key and store as x.509 pem format
openssl req -x509 -days 365 -new -key private_key_file.key -out public_key_file.pem

# upload public_key_file.pem file during instance creation

# check connection to instance
ssh -i private_key_file.key -p 63534 adminweb@host.cloudapp.net 
```

这解决了问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-07T12:17:52.540

要调试结构的 ssh 连接，请将这些行添加到您的 fabfile：

```
import paramiko, os
paramiko.common.logging.basicConfig(level=paramiko.common.DEBUG) 
```

这将打印 paramiko 的所有调试消息。Paramiko 是 fabric 使用的 ssh 库。

Note that [since Fabric 1.4](http://docs.fabfile.org/en/1.10/usage/env.html#use-ssh-config) you have to specifically enable using ssh config:

```
env.use_ssh_config = True 
```

(Note: I'm ~~pretty sure~~ absolutely certain that my fabfile used to work with Fabric > 1.5 without this option, but it doesn't now that I upgraded to 1.10).

# javascript - 如何通过 Python 使用 GhostDriver 处理警报？

> ID：15708518
> 
> 赞同：7
> 
> 时间：2013-03-29T17:42:27.270
> 
> 标签：javascript, python, selenium, webdriver, ghostdriver

**问题：** GhostDriver API 还不支持警报处理。目前有一个可接受的解决方法，即将您自己的 javascript 注入将处理警报并为您存储其文本的页面。

我在通过 python webdriver 绑定使用此解决方法时遇到问题。这可能与我对javascript的新手级理解有关。

这是我尝试使用的解决方法的一个示例： [https ://github.com/detro/ghostdriver/issues/20#issuecomment-15641983](https://github.com/detro/ghostdriver/issues/20#issuecomment-15641983)

我正在使用一个显示警报的公共网站，以使这更简单：[http ://www.tizag.com/javascriptT/javascriptalert.php](http://www.tizag.com/javascriptT/javascriptalert.php)

这是我的代码：

```
from selenium import webdriver

button_xpath = "/html/body/table[3]/tbody/tr/td[2]/table/tbody/tr/td/div[4]/form/input"

js = """
(function () {
var lastAlert = undefined;
window.alert = function (message) {
    lastAlert = message;
};
window.getLastAlert = function () {
    var result = lastAlert;
    lastAlert = undefined;
    return result;
};
}());
"""

driver = webdriver.PhantomJS()
driver.get('http://www.tizag.com/javascriptT/javascriptalert.php')
driver.execute_script("window.alert = %s" % js)
driver.find_element_by_xpath(button_xpath).click()
#exception just occured
driver.execute_script("return window.getLastAlert && window.getLastAlert();") 
```

例外是：

```
WebDriverException: Message: u'Error Message => \'Click failed: TypeError: \'undefined\' is not a function (evaluating \'alert(\'Are you sure you want to give us the deed to your house?\')\')\'\n caused by Request => {"headers":{"Accept":"application/json","Accept-Encoding":"identity","Connection":"close","Content-Length":"81","Content-Type":"application/json;charset=UTF-8","Host":"127.0.0.1:41752","User-Agent":"Python-urllib/2.7"},"httpVersion":"1.1","method":"POST","post":"{\\"sessionId\\": \\"0eaf7680-9897-11e2-b375-55b9cb6ceb0f\\", \\"id\\": \\":wdc:1364578560610\\"}","url":"/click","urlParsed":{"anchor":"","query":"","file":"click","directory":"/","path":"/click","relative":"/click","port":"","host":"","password":"","user":"","userInfo":"","authority":"","protocol":"","source":"/click","queryKey":{},"chunks":["click"]},"urlOriginal":"/session/0eaf7680-9897-11e2-b375-55b9cb6ceb0f/element/%3Awdc%3A1364578560610/click"}' ; Screenshot: available via screen 
```

我是一个JS菜鸟。我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T16:26:38.383

一个简单的解决方案是重写 window.alert 方法以将参数输出到全局变量。

使用覆盖函数定义 js 注入变量：

```
js = """
window.alert = function(message) {
lastAlert = message;
}
""" 
```

然后只需通过 python 中的 execute_script 调用传递 js 变量，如下所示：

```
driver.execute_script("%s" % js) 
```

然后，当它全部运行后，您可以在全局 lastAlert 上执行 return：

```
driver.execute_script("return lastAlert") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-02T17:46:06.113

这是一些解决方法。

将其用于稍后会发出警报的每个重新加载的页面。

```
driver.execute_script("window.confirm = function(){return true;}"); 
```

这适用于 Selenium/Splinter 中的 PhantomJS。

[在此处](https://github.com/detro/ghostdriver/issues/20)查看更多参考。

# android - Android TabHost 选项卡背景高度较小

> ID：15708519
> 
> 赞同：2
> 
> 时间：2013-03-29T17:42:38.873
> 
> 标签：android, android-tabhost, android-tabs

我在使用标签设置设计时遇到问题。因此，我为在 tabHost 中添加的每个 tabspec 创建了选择器。这是它的样子：

![在此处输入图像描述](../Images/604e3bcb109a4454283420f7e516e6d1.png)

所以这是我的标签活动：

```
public class TabLayouts extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabhost);

        TabHost tabHost = getTabHost();
        tabHost.getTabWidget().setStripEnabled(false);

        TabSpec latest = tabHost.newTabSpec(getString(R.string.latest_title));
        tabHost.setBackgroundResource(R.drawable.tabbar);

        // setting Title and Icon for the Tab
        latest.setIndicator(getString(R.string.latest_title), getResources().getDrawable(R.drawable.latest_albums_sel));
        Intent latestAlbums = new Intent(this, LatestAlbums.class);
        latest.setContent(latestAlbums);

        TabSpec favorites = tabHost.newTabSpec(getString(R.string.favorites_title));
        favorites.setIndicator(getString(R.string.favorites_title), getResources().getDrawable(R.drawable.favorites_sel));
        Intent favoritesInt = new Intent(this, Favorites.class);
        favorites.setContent(favoritesInt);

        TabSpec downloaded = tabHost.newTabSpec(getString(R.string.downloaded_title));
        downloaded.setIndicator(getString(R.string.downloaded_title), getResources().getDrawable(R.drawable.downloaded_sel));
        Intent downloadedIntent = new Intent(this, Downloaded.class);
        downloaded.setContent(downloadedIntent);

        tabHost.addTab(latest);
        tabHost.addTab(favorites);
        tabHost.addTab(downloaded);
    }
} 
```

我的选择器之一：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
     <!-- PRESSED TAB -->
    <item android:top="0dp" android:left="0dp" android:right="0dp" android:bottom="0dp"
        android:state_pressed="true"
        android:drawable="@drawable/menu3_pr"
        />
    <!-- INACTIVE TABS -->
    <item android:top="0dp" android:left="0dp" android:right="0dp" android:bottom="0dp"
        android:state_selected="false"
        android:state_focused="false"
        android:state_pressed="false"
        android:drawable="@drawable/menu3_nr"
        />
    <!-- ACTIVE TAB -->
    <item android:top="0dp" android:left="0dp" android:right="0dp" android:bottom="0dp"
        android:state_selected="true"
        android:state_focused="false"
        android:state_pressed="false"
        android:drawable="@drawable/menu3_pr"
        />
    <!-- SELECTED TAB -->
    <item android:top="0dp" android:left="0dp" android:right="0dp" android:bottom="0dp"
        android:state_focused="true"
        android:state_selected="true"
        android:state_pressed="false"
        android:drawable="@drawable/menu3_pr"
        />
</selector> 
```

还有我的tabhost布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout
        android:background="@drawable/tabbar"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <FrameLayout
            android:background="@drawable/background"
            android:layout_above="@android:id/tabs"
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"/>
        <TabWidget
            android:showDividers="none"
            android:layout_alignParentBottom="true"
            android:id="@android:id/tabs"
            android:scaleY="0.8"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </RelativeLayout>
</TabHost> 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-04T08:04:40.117

这是一种简单的技术，您应该使用`.setIndicator()`传递的一个参数，即

```
latest.setIndicator(getString(R.string.latest_title)). 
```

上面你正在使用

```
.setIndicator(getString(R.string.latest_title), getResources().getDrawable(R.drawable.latest_albums_sel)) 
```

现在删除第二个参数

`getResources().getDrawable(R.drawable.latest_albums_sel)`

从您的代码中以及何时添加所有选项卡，例如

```
tabHost.addTab(latest);
tabHost.addTab(favorites);
tabHost.addTab(downloaded); 
```

使用下面的代码

```
tabHost.getTabWidget().getChildAt(0).setBackgroundResource(R.drawable.latest);
tabHost.getTabWidget().getChildAt(1).setBackgroundResource(R.drawable.favorites);
tabHost.getTabWidget().getChildAt(2).setBackgroundResource(R.drawable.downloaded); 
```

你完成了:) 这对我有帮助，希望你也能解决你的问题。

# c - 谷歌浏览器和代理服务器

> ID：15708528
> 
> 赞同：1
> 
> 时间：2013-03-29T17:43:03.430
> 
> 标签：c, internet-explorer, google-chrome

我正在编写代理服务器，但我遇到了问题。设置代理后，Chrome 会创建一些空连接，并且不会向服务器发送任何数据。很可能在他们身上，没有入口数据。有了IE，就没有这样的问题了。

```
IE: 5 connections - 5 HTTP-requests
Chrome: 10 connections - 5 HTTP-requests 
```

我请专业人士回答我的问题。

# ruby-on-rails - 可以haml渲染吗

> ID：15708532
> 
> 赞同：9
> 
> 时间：2013-03-29T17:43:16.783
> 
> 标签：ruby-on-rails, html, haml

Haml 可以渲染

```
%input{:type=>"text"} 
```

作为

```
<input type="text"> 
```

想知道它在 haml 中应该是什么，所以它在 html 中呈现为

```
<input type="text" required> 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T18:09:25.380

如果[一个属性的值是一个布尔值](http://haml.info/docs/yardoc/file.REFERENCE.html#boolean_attributes)，例如

```
%input{:type=>"text", :required => true} 
```

它将被呈现为

```
<input required type='text'> 
```

如果[`format`选项](http://haml.info/docs/yardoc/Haml/Options.html#format-instance_method)是`:html4`or `:html5`, or as

```
<input required='required' type='text' /> 
```

如果格式是`:xhtml`.

如果该值为 false，则将完全省略：

```
<input type='text' /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T17:48:42.103

`%input{type: "text", required: true}/`

或者

`%input{:required => "", :type => "text"}/`

来源：[http ://www.htmltohaml.com/](http://www.htmltohaml.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:51:13.597

```
%input{:required => "", :type => "text"}/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-14T15:49:22.310

```
%input(type="text" required=true) 
```

[html样式属性](http://haml.info/docs/yardoc/file.REFERENCE.html#htmlstyle_attributes_)

# javascript - 尝试使用 javascript 的 window.location.href 向 Google 发送查询

> ID：15708537
> 
> 赞同：-1
> 
> 时间：2013-03-29T17:43:35.770
> 
> 标签：javascript

我正在尝试使用 javascript 向 Google 发送查询，但窗口只是转到主页。

这是我的代码：

```
var query = "hello world";
var firstPart = "http://google.com/?=";
window.location.href = firstPart + query; 
```

页面的 URl 是正确的，但它没有转到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:46:15.817

改变：

```
var firstPart = "http://google.com/?="; 
```

到：

```
var firstPart = "http://google.com/search?q="; 
```

使用他们的[搜索协议](https://developers.google.com/search-appliance/documentation/62/xml_reference)：

[https://developers.google.com/search-appliance/documentation/62/xml_reference](https://developers.google.com/search-appliance/documentation/62/xml_reference)

# linux - korn shell：在处理命令时如何处理命令？

> ID：15708542
> 
> 赞同：0
> 
> 时间：2013-03-29T17:43:52.287
> 
> 标签：linux, shell, ksh

大家好！
首先是我现在拥有的代码：

```
for CLSGRPID in `${${`/usr/bin/snmpwalk \
    -v 1 -c $COMM $HOST $OID.11.1.1.1`##*:}%\n} | xargs` ; do 
```

我想先处理

```
/usr/bin/snmpwalk -v 1 -c $COMM $HOST $OID.11.1.1.1 
```

单独使用返回行

```
.2.3.1.2.1.5.11.1.1.1.1 = INTEGER: 1
.2.3.1.2.1.5.11.1.1.1.2 = INTEGER: 2
.2.3.1.2.1.5.11.1.1.1.3 = INTEGER: 3 
```

然后对于每条返回线，我想将其切割`${line##*:}`，然后从另一侧切割，`${line%\n}`然后将所有这些线放入`xargs`并处理它。所以请求的输出将是

```
1 2 3 
```

是否可以？请给我一些想法如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:26:59.653

`net-snmp`命令有*许多*选项可以修改它们的行为和输出。我建议您阅读 、 和 的`snmpcmd`手册 `snmpwalk`页`snmp.conf`。

检查`-O`选项组`snmpwalk`（见下文）。

`-Oqv`组合产生一个只有数字的列：

```
$ clsgrpids=$(
    /usr/bin/snmpwalk -Oqv -v 1 -c $COMM $HOST $OID.11.1.1.1
)
$ echo "$clsgrpids"
1
2
3 
```

去掉引号让 shell 打印一行：

```
$ echo $clsgrpids
1 2 3 
```

以下是`-O`选项组中控制输出的其余选项`snmpwalk`：

```
-O OUTOPTS
        Toggle various defaults controlling output display:
        0:  print leading 0 for single-digit hex characters
        a:  print all strings in ascii format
        b:  do not break OID indexes down
        e:  print enums numerically
        E:  escape quotes in string indices
        f:  print full OIDs on output
        n:  print OIDs numerically
        q:  quick print for easier parsing
        Q:  quick print with equal-signs
        s:  print only last symbolic element of OID
        S:  print MIB module-id plus last element
        t:  print timeticks unparsed as numeric integers
        T:  print human-readable text along with hex strings
        u:  print OIDs using UCD-style prefix suppression
        U:  don't print units
        v:  print values only (not OID = value) 
```

**验证**（实际运行代码）

```
$ snmpwalk  -Ov -v1 -c public localhost  sysUptime
Timeticks: (66595) 0:11:05.95
$ snmpwalk  -Oqv -v1 -c public localhost  sysUptime
0:0:11:35.13
$ snmpwalk  -Otqv -v1 -c public localhost  sysUptime
70012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:14:49.560

你可以使用awk。

```
for CLSGRPID in `/usr/bin/snmpwalk -v 1 -c $COMM $HOST $OID.11.1.1.1 | awk '{print $NF}'`; do
    echo $CLSGRPID
done 
```

# java - 如何防止 JXTreeTable 根节点崩溃？

> ID：15708545
> 
> 赞同：2
> 
> 时间：2013-03-29T17:44:23.060
> 
> 标签：java, swing, collapse, swingx, jxtreetable

为了防止`JTree`节点崩溃，您可以使用该`setExpandedState()`方法。

我没有看到 SwingX 类的类似方法`JXTreeTable`，而且似乎`JXTreeTable`没有扩展`JXTree`（扩展 JTree）。

关于如何防止根节点崩溃的任何建议`JXTreeTable`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:45:15.263

您可以添加*tree-will-expand*监听`addTreeWillExpandListener()`器以防止树节点展开或折叠。

例如为了防止崩溃：

```
treeTable.addTreeWillExpandListener(new TreeWillExpandListener() {
    public void treeWillExpand(TreeExpansionEvent e)
            throws ExpandVetoException {
    }

    public void treeWillCollapse(TreeExpansionEvent e)
            throws ExpandVetoException {
        throw new ExpandVetoException(e);
    }
}); 
```

有关一些示例， 请参阅[如何编写 Tree-Will-Expand 侦听器。](http://docs.oracle.com/javase/tutorial/uiswing/events/treewillexpandlistener.html)

`JXTreeTable`还有一组用于折叠和展开树节点的方法 ：`expandPath()`、`expandAll()`和. 也许这些会有所帮助。`collapsePath()``collapseAll()`

# filepicker.io - 同一页面上有多个 filepicker.io 实例？

> ID：15708547
> 
> 赞同：0
> 
> 时间：2013-03-29T17:44:33.943
> 
> 标签：filepicker.io

是否可以在同一页面上有多个 filepicker.io 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:35:29.787

是的，允许多个实例。

# html - 去掉 HTML 文件中的 file:///c://

> ID：15708549
> 
> 赞同：2
> 
> 时间：2013-03-29T17:44:42.650
> 
> 标签：html

我将 html 保存在本地驱动程序 (c:/) 中。

我在我的 html 文件中执行下一个操作：

```
<td><a href="www.google.com">Google</a></td> 
```

当我打开它并单击链接时，它会输入：`file:///C:/www.google.com`

我怎样才能摆脱`file://c:/`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:45:23.330

你需要把`http://`域名放在前面。否则，它将链接到与 HTML 文件位于同一目录中的名为“www.google.com”的文件。

```
<td><a href="http://www.google.com">Google</a></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:45:58.027

您需要 http:// 在您的链接之前。

```
<a href="http://www.google.com"> 
```

否则，它会在您的服务器上查找名为 www.google.com 的文件！

# installshield - InstallShield 调用 advapi32.dll 方法类型不匹配错误

> ID：15708551
> 
> 赞同：0
> 
> 时间：2013-03-29T17:44:57.040
> 
> 标签：installshield, lsa

我正在尝试从基本的 MSI InstallShield 代码调用 Advapi32.LsaOpenPolicy()。我已经成功调用了其他 avdapi32.dll 方法；但是 LsaOPenPolicy 抛出了不匹配的类型错误。

我的原型是：

```
prototype INT Advapi32.LsaOpenPolicy(POINTER, POINTER, INT, POINTER); 
```

窗口定义是：

```
NTSTATUS LsaOpenPolicy(
  _In_     PLSA_UNICODE_STRING SystemName,
  _In_     PLSA_OBJECT_ATTRIBUTES ObjectAttributes,
  _In_     ACCESS_MASK DesiredAccess,
  _Inout_  PLSA_HANDLE PolicyHandle
); 
```

我在 C++ 示例中注意到 ObjectAttriibute 结构被清零。所以我在 InstallShield 代码中做了类似的事情—— pArray 指向数组内容。

```
 for i = 0 to 11
        array(i) = 0;
    endfor;
    array(0) = 24;

    // current error is 80020005 type mismatch.
    try
        i = POLICY_CREATE_ACCOUNT | POLICY_LOOKUP_NAMES;
        pArray = array; 
        pPolicy = NULL;
        nvOSResult = LsaOpenPolicy(NULL, pArray, i, pPolicy);
    catch
        Sprintf(errString, "0x%08x", Err.Number);
        _Logger(hMSI, methodName, "LsaOpenPolicy Exception "+errString, INFORMATION, FALSE);
        nvOSResult = Err.Number;
    endcatch; 
```

除了抛出的 80020005 错误之外，我找不到太多其他信息；我尝试了几种不同的论证结构，但我无法超越这一点。

我已经在 flexera 和 microsoft 论坛上发布了这个——但我在那里没有得到任何关注。（后代参考：[flexera-link](http://community.flexerasoftware.com/showthread.php?205275-Security-operations-%28LSA%29)，[microsoft-link](http://social.msdn.microsoft.com/Forums/en-US/windowssecurity/thread/e219b1c8-72ac-48e1-ac23-dacf83718f0b)）

欢迎任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T19:55:58.740

这个问题的答案是通过将所有工作转移到 C++ DLL 中来实际解决 installshield 和系统 DLL 之间的接口。随着安装变得越来越复杂，我最终得到了两个独立的 DLL 函数，一个在对话框（非管理员）模式下执行，一个在延迟执行（管理员）模式下执行。

为了传递信息，我使用了 MsiGetProperty() API，并将 MSI 属性用于输入和输出变量。

请注意，对于延迟执行，我需要 installshield 端的 CAD 函数将数据编组到自定义操作数据位置，并在 DLL 端提取数据，再次使用 MsiGetProperty() 但获取“CustomActionData”属性然后解析包含封送数据的结果字符串。

# python - App Engine 和与 python 有关系的模型

> ID：15708554
> 
> 赞同：0
> 
> 时间：2013-03-29T17:45:06.077
> 
> 标签：python, google-app-engine, model, google-cloud-datastore

我已经阅读了一些关于建模的谷歌文档（顺便说一句，我是 python 和 GAE/webapp2 的新手）。用关系来做这件事会容易得多，但我正在尝试使用数据存储和/或 ndb 学习谷歌应用程序引擎。

尝试做：我有一个有几个区域的家，每个区域都有一组传感器（光、湿度、tmp），它们读取读数然后将它们发送到服务器。

像这样的东西：

```
Class User(db.Model):
user = db.UserProperty()
usertype = db.StringProperty()(aka mom/father/child)

class Home(db.Model):
zone = db.IntegerProperty() #Zones in home unique int
zonename = db.StringProperty() # optional name for the zone

class Zone(db. Model):
sensortype = db. key or name? # I'd like to model moisture/tmp/light sensors that will be hereSensors in zone (from class sensors ?)
SensorID = #Ideally a key for that sensor in the zone ? 
DateCreated = db.DateProperty()

class Sensors(db.Model): # this will get the actual readings when they come in
Sensortype (moisture, tmp, light)
timeReading = db.DateProperty()
Reading = db.FloatProperty() 
```

稍后我将要读取所有温度读数（来自所有区域或单个区域）、许多传感器或单个传感器。能够按日期/时间排序。我还将这些读数与天气报告进行比较。

我无法确定是否应该使用结构化对象、带有 parents/ancestors 的键或 ReferenceProperty。

从哪儿开始？我不知道最好的模型。

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:23:53.650

这个问题已经被问过很多次了。尝试在 StackOverflow 中搜索它。

这是几个答案，其中又包含指向其他答案的链接。

[谷歌应用引擎数据存储中祖先的目的是什么？](https://stackoverflow.com/questions/12832782/what-is-the-purpose-of-ancestors-in-the-google-app-engine-datastore)

[在 Google App Engine 中使用祖先或引用属性？](https://stackoverflow.com/questions/12123511/using-ancestors-or-reference-properties-in-google-app-engine)

# css - 引导程序没有响应

> ID：15708555
> 
> 赞同：0
> 
> 时间：2013-03-29T17:45:11.563
> 
> 标签：css, twitter-bootstrap, responsive-design

是我还是 Twitter bootstrap 使用 LESS 根本没有响应？

一个测试站点我设置了以下内容：

```
 // Articles

.article {
    .makeRow();        
}

.article-content {
    .makeColumn(7);

} 
```

在调整页面大小时，我得到了水平滚动条。

快速检查 CSS 显示我的文章内容列的宽度为 540 像素；不管我的屏幕尺寸是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:20:33.100

makeColumn mixin 输出静态网格。试试这个：

```
.article-content {
   #grid > .fluid .span(7)
} 
```

# php - 在 PHP 中定义一个无符号 CHAR

> ID：15708556
> 
> 赞同：2
> 
> 时间：2013-03-29T17:45:18.417
> 
> 标签：php, types, integer, imagemagick, int

一个简单的问题，但我在 php 网站上找不到文档。

我正在使用 ImageMagick，我正在将像素导出为 CHAR

```
$pixels = $im->exportImagePixels(0, 0, $im->getImageGeometry()['width'], $im->getImageGeometry()['height'], "RGB", Imagick::PIXEL_CHAR); 
```

我需要定义新的像素，我希望它们是 CHAR 类型。当我在单个像素上使用 var_dump 时，PHP 将它们识别为整数。现在我看到 php 没有 CHAR 数据类型，所以我想定义一个像这样的两字节无符号整数：

我将像素定义为 $pixel = 134; 范围从 0 到 255

我想像这样定义相应的字符：

```
0xFF & $pixel 
```

它不起作用。

任何人都知道为什么？或者我能用它做什么？我尝试使用 PIXEL_FLOAT 数据类型，但它真的很重，而且它会使我的脚本在更大的图片上崩溃。

谢谢任何人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T04:21:35.323

使用[打包](http://www.php.net/manual/en/function.pack.php)功能：

```
function printPacked($base, $packed_value)
{
    $value = unpack($base, $packed_value);
    printf("%08x \n", $value[1]);
}

// Unsigned char
//
$oldpixel = pack( "C", 0xFF );
printPacked("C", $oldpixel);

// Unsigned short, little-endian
//
$newpixel = pack( "v", 0xCDEF );
printPacked("v", $newpixel);

// Assign the short to the char
//
$oldpixel = $newpixel;
printPacked("C", $oldpixel);

// Mask operation on the char
//
$oldpixel = $oldpixel & pack( "C", 0xAB );                                      
printPacked("C", $oldpixel); 
```

上面程序的输出是：

```
000000ff 
0000cdef 
000000ef 
000000ab 
```

# java - 在 JTable 中显示文本文件内容

> ID：15708564
> 
> 赞同：1
> 
> 时间：2013-03-29T17:45:36.777
> 
> 标签：java, swing, jtable, text-files, bufferedreader

我需要将我的文本文件内容拉入 jtable 并显示它们。我尝试了各种代码，但它挂起并出现错误。我认为它一遍又一遍地重复表值，但我不明白为什么会发生这种情况，因为我调用了 reader.close() 命令，如果没有下一行，则阅读器不应该继续。

这是 DefaultTableModel 代码：

```
 String columns[] =  {  "Name", "Age", "Email Address", "Cell Number"  };
    JTable contactTable = new JTable();
    DefaultTableModel tableModel;

    // table with 4 columns
    tableModel = new DefaultTableModel(0,4);
    tableModel.setColumnIdentifiers(columns);
    contactTable.setModel(tableModel); 
```

这是从文本文件代码中读取的内容：

```
 void showContacts(){
    String line;
    BufferedReader reader;

    try{       
        reader = new BufferedReader(new FileReader(file));

        while((line = reader.readLine()) != null)) //this gives me an error???
        {
           tableModel.addRow(line.split(", ")); //this has a comma and a space bc that                        is how the file is written to
        }
        reader.close();
     }
    catch(IOException e){
        JOptionPane.showMessageDialog(null, "Buffered Reader issue.");
    }

} 
```

以下是文本文件内容：

```
 Name, Age, Email Address, Cell Number, 
    John Smith, 21, jsmith@site.com, 1234564789, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:59:53.613

更改此行：

```
while((line = reader.readLine()) != null)) 
```

到

```
while((line = reader.readLine()) != null) 
```

# java - 无法创建连接 JPA + MYSQL

> ID：15708574
> 
> 赞同：0
> 
> 时间：2013-03-29T17:46:05.470
> 
> 标签：java, mysql, jpa, netbeans

![JPA 连接](../Images/bed14e657f8671ccb9060c7fc61b8243.png)

问题是我无法创建与 jpa + mysql (5.5.27) 的连接。我正在使用 netbeans 6.9.1 和正确添加到文件夹中的 mysql connector.jar。但我得到这个错误：

> “不能转换为 java.lang.Comparable”

有什么问题？

我找不到 jar mysql 5.5 的版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:32:56.657

我修复了使用 netbeans 6.9.1 和使用 7.2 的问题！哈哈'这是个不错的选择;D

显然，它最近不支持更多版本的mysql！也许 ：\

# c# - Is it possible to get list of query string parameters and change 1 of the parameter and pass as parameter

> ID：15708575
> 
> 赞同：1
> 
> 时间：2013-03-29T17:46:07.207
> 
> 标签：c#, html, asp.net-mvc, asp.net-mvc-routing

I stuck with one simple thing:

I have URL [http://mydomain.com/PagedPage?Page=1&PageSize=30&SortOrder=Name](http://mydomain.com/PagedPage?Page=1&PageSize=30&SortOrder=Name)

I want to pass list of parameters as parameter to my custom Html.Pager helper but inside pager I should be able to edit the parameter "Page"

Is it possible to do without hardcoding data?

* * *

UPDATED: in cshtml page I have this helper (it is custom helper) @Html.Pager(Model.Page, Model.TotalPages, Model.TotalRecords, )

Inside pager I want to generate links: Page=1, Page=2, Page=3 etc but also ALL parameters which were passed inside html helper must be included.

* * *

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:22:43.747

Yes `Request.QueryString` is the querystring, change one of the entries in the querystring, add rest of them and create a new querystring and pass that to the next page.

# php - Wordpress - 显示最后 5 个帖子 - 留下回复问题

> ID：15708576
> 
> 赞同：0
> 
> 时间：2013-03-29T17:46:08.467
> 
> 标签：php, wordpress, function

我之前在 SO 上提出了一个问题，以获得有关特定类别问题的最后 5 个帖子的帮助。这已解决，但出现了一个新问题，并且仅在我使用简码时才明显。

**问题**

使用下面的代码，当我将简码添加到我的一个页面时，它会在页面底部添加一个“留下回复”框。我关闭了评论，并且当不使用简码时，网站上的“留下回复”不明显 - 它仅在我添加简码时发生，这让我相信问题与下面的 PHP 代码有关添加到我的functions.php。

**编码**

```
function Last5posts()   {
    $args = array( 'showposts' => 5, 'cat' => '3');                  
    $last_5_posts_query = new WP_Query( $args );
    while($last_5_posts_query->have_posts()) : 
    $last_5_posts_query->the_post();
    $link = get_permalink();
    $title = get_the_title();
    $date = get_the_date();                              

    $content .= '<div class="latest-posts">';
    $content .= '<h3><a href='.$link.' target="_top">'.$title.' / '.$date. '</a></h3>';
    $content .= '<p class="excerpt">' .get_the_excerpt(). '</p>';
    $content .= '</div>';
endwhile;

return $content;
}

add_shortcode('Last5Posts', 'Last5posts' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:38:47.633

该问题是由“showposts”被贬低引起的，将其替换为“post_per_page”，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:19:51.927

您在代码中使用自定义 WP_Query。当您在查询中调用 the_post() 时，全局 $post 变量会发生变化。因此，在您的简码方法之后运行的代码将与您的新 $post 值一起使用。

在 endwhile 之后添加 wp_reset_postdata 应该没问题。

# java - 读取字符串数组

> ID：15708592
> 
> 赞同：0
> 
> 时间：2013-03-29T17:47:29.553
> 
> 标签：java, swing, jlabel

我使用 NetBeans IDE 在 java 中创建了一个应用程序，但遇到了问题。它不读取数组元素。这是代码：

```
private void buton1ActionPerformed(java.awt.event.ActionEvent evt) {
       String[] toppings = new String[20];
       toppings[0] = "";
       toppings[1] = "";
       toppings[2] = "";
       toppings[3] = "";

       int size = toppings.length;
       for (int i=0; i<size; i++){
          toppings[i]=textbox.getText();
          label1.setText(toppings[0]); 
          label2.setText(toppings[1]);
          label3.setText(toppings[2]);
          label4.setText(toppings[3]);
       }
} 
```

每次按下按钮并为向量中的新元素添加新值时，我想将数组的每个元素放在标签（label1，label2，label3，label4）上。

此时，当我输入第一个元素的值时，它会将值设置为所有标签。

请问有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:53:51.827

您应该创建 JLabel 数组，然后在 for 循环中填充它们的文本：
![在此处输入图像描述](../Images/5ff5698152356177402b2d440bb54b9e.png)

```
 private javax.swing.JLabel label[];
   //write these lines within constructor or wherever you are creating your GUI

   label = new  javax.swing.JLabel[4];//
   for (int i = 0 ; i < label.length ;i++)
   label[i] = new javax.swing.jLabel(); 
```

然后更改`buton1ActionPerformed`

```
private void buton1ActionPerformed(java.awt.event.ActionEvent evt) {
   String[] toppings = new String[20];
   toppings[0] = "";
   toppings[1] = "";
   toppings[2] = "";
   toppings[3] = "";

   int size = toppings.length;
   for (int i=0; i<size; i++){
      toppings[i]=textbox.getText();
      if (i < 4)
      label[i].setText(toppings[i]); 
   }
} 
```

**编辑**
在这里我放了你的代码的更新版本。只需运行它并告诉我它是否满足您的要求：

```
public class fereastra extends javax.swing.JFrame {

    /**
     * Creates new form fereastra
     */
    public fereastra() {
        initComponents();
        buttonGroup1.add(singleplayer);
        buttonGroup1.add(twoplayers);
        buttonGroup1.add(threeplayers);
        buttonGroup1.add(fourplayers);
        casutatext.setVisible(true);
        panel.setVisible(true);
        text.setText("Wellcome! Please choose the number of players!");

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {
        label = new  javax.swing.JLabel[4];//
        for (int i = 0 ; i < label.length ;i++)
        {label[i] = new javax.swing.JLabel();}

        buttonGroup1 = new javax.swing.ButtonGroup();
        casutatext = new javax.swing.JTextField();
        text = new javax.swing.JLabel();
        buton1 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        panel = new javax.swing.JPanel();
        fourplayers = new javax.swing.JRadioButton();
        twoplayers = new javax.swing.JRadioButton();
        threeplayers = new javax.swing.JRadioButton();
        singleplayer = new javax.swing.JRadioButton();
        test = new javax.swing.JLabel();
        test2 = new javax.swing.JLabel();
        test3 = new javax.swing.JLabel();
        test4 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        casutatext.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                casutatextActionPerformed(evt);
            }
        });

        text.setText("Text");

        buton1.setText("OK");
        buton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buton1ActionPerformed(evt);
            }
        });

        jButton3.setText("Cancel");

        fourplayers.setText("4 players");
        fourplayers.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fourplayersActionPerformed(evt);
            }
        });

        twoplayers.setText("2 players");
        twoplayers.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                twoplayersActionPerformed(evt);
            }
        });

        threeplayers.setText("3 players");
        threeplayers.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                threeplayersActionPerformed(evt);
            }
        });

        singleplayer.setText("Single player");
        singleplayer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                singleplayerActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout panelLayout = new javax.swing.GroupLayout(panel);
        panel.setLayout(panelLayout);
        panelLayout.setHorizontalGroup(
            panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(singleplayer)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(twoplayers)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(threeplayers)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(fourplayers)
                .addContainerGap())
        );
        panelLayout.setVerticalGroup(
            panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(singleplayer)
                    .addComponent(twoplayers)
                    .addComponent(threeplayers)
                    .addComponent(fourplayers))
                .addContainerGap())
        );

        test.setText("test");

        test2.setText("jLabel1");

        test3.setText("jLabel2");

        test4.setText("jLabel3");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(127, 127, 127)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(panel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(casutatext, javax.swing.GroupLayout.PREFERRED_SIZE, 318, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(text, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(158, 158, 158)
                        .addComponent(label[0])
                        .addGap(36, 36, 36)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(buton1)
                                .addGap(35, 35, 35)
                                .addComponent(jButton3))
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(label[1])
                                .addGap(32, 32, 32)
                                .addComponent(label[2])
                                .addGap(31, 31, 31)
                                .addComponent(label[3])))))
                .addGap(93, 93, 93))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(61, 61, 61)
                .addComponent(text)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(casutatext, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(panel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(12, 12, 12)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(buton1)
                    .addComponent(jButton3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 50, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(label[0])
                    .addComponent(label[1])
                    .addComponent(label[2])
                    .addComponent(label[3]))
                .addGap(51, 51, 51))
        );

        pack();
    }// </editor-fold>

    private void casutatextActionPerformed(java.awt.event.ActionEvent evt) {                                          

    }                                          

    private void buton1ActionPerformed(java.awt.event.ActionEvent evt) {                                      
       String[] toppings = new String[20];
   toppings[0] = "";
   toppings[1] = "";
   toppings[2] = "";
   toppings[3] = "";

   int size = toppings.length;
   for (int i=0; i<size; i++){
      toppings[i]=casutatext.getText();
      if (i < 4)
      {label[i].setText(toppings[i]);
      }
   }
    }                                      

    private void singleplayerActionPerformed(java.awt.event.ActionEvent evt) {                                            
        numarjucatori=1;
    }                                            

    private void twoplayersActionPerformed(java.awt.event.ActionEvent evt) {                                          
        numarjucatori=2;
    }                                          

    private void threeplayersActionPerformed(java.awt.event.ActionEvent evt) {                                            
        numarjucatori=3;
    }                                            

    private void fourplayersActionPerformed(java.awt.event.ActionEvent evt) {                                            
        numarjucatori=4;
    }                                          

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(fereastra.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(fereastra.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(fereastra.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(fereastra.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new fereastra().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton buton1;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JTextField casutatext;
    private javax.swing.JRadioButton fourplayers;
    private javax.swing.JButton jButton3;
    private javax.swing.JPanel panel;
    private javax.swing.JRadioButton singleplayer;
    private javax.swing.JLabel test;
    private javax.swing.JLabel test2;
    private javax.swing.JLabel test3;
    private javax.swing.JLabel test4;
    private javax.swing.JLabel text;
    private javax.swing.JRadioButton threeplayers;
    private javax.swing.JRadioButton twoplayers;
    // End of variables declaration
    public int numarjucatori;
    public String p1="", p2="", p3="", p4="";
    private javax.swing.JLabel label[];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:50:38.297

我看到的第一个问题是你试图在 for 循环内设置标签文本，你应该在外面做：

```
for(int i = 0; i < toppings.length; i++){
    toppings[i] = textbox.getText();
}

label1.setText(toppings[0]);
// etc. 
```

# javascript - 具有动态元素属性的多个 :not()

> ID：15708594
> 
> 赞同：1
> 
> 时间：2013-03-29T17:47:34.830
> 
> 标签：javascript, jquery

这是演示[http://jsfiddle.net/NbzaE/3/](http://jsfiddle.net/NbzaE/3/)

我正在尝试做的事情：

**如果.list-item**的属性**data-attr**为**true** ，则禁用动画

 **这是工作示例：

```
$('.list-item > a:not(.active)').hover(function(){
        $(this).clearQueue().stop().animate({
            marginLeft: 40
        }, 250);
    }, function(){
        $('.list-item:not([data-attr="true"]) > a:not(.active)').clearQueue().stop().animate({
            marginLeft: 0
        }, 250);
 }); 
```

但我不确定它是否正确。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:59:48.573

你真的应该使用 mouseenter，mouseleave 事件，基于：http: [//jquery.com/upgrade-guide/1.9/#hover-pseudo-event](http://jquery.com/upgrade-guide/1.9/#hover-pseudo-event)并且在你的小提琴中，你有一部分在点击时设置父元素的数据可能更简单：

```
$('li.list-item').on('mouseenter', '>a:not(.active)', function () {
    $(this).clearQueue().stop().animate({
        marginLeft: 40
    }, 250);
});
$('li.list-item').on('mouseleave', '>a:not(.active)', function () {
    $(this).clearQueue().stop().animate({
        marginLeft: 0
    }, 250);
});

$('.list-item[data-toggle="collapse"] ').on('click', '>a', function () {
    $(this).parent().data('attr', !$(this).parent().data('attr'));
}); 
```

EDIT1：旁注，您还可以在元素上捕获第二个事件，而不是在保存`.parent()`遍历的链接上，如下所示：

```
$('.list-item[data-toggle="collapse"] ').click( function () {
    $(this).data('attr', !$(this).data('attr'));
}); 
```

如果您正在动态创建附加到 ul 的 li 元素：

```
$('ul').on('click', '.list-item[data-toggle="collapse"] ', function () {
    alert($(this).data('attr'));
    $(this).data('attr', !$(this).data('attr'));
}); 
```**

# javascript - CSS文件中的媒体查询根本不起作用

> ID：15708597
> 
> 赞同：0
> 
> 时间：2013-03-29T17:47:40.053
> 
> 标签：javascript, jquery, html, css, media-queries

如何编写 css 媒体查询以使侧边栏捕捉位于标题和页面内容之间？我希望当页面宽度低于 500 像素时发生这种变化。我正在为 chrome 浏览器执行此操作。

请看一下我的 HTML 文件的正文。

正文的内容稍后使用 Javascript 填充。按钮被创建并附加到“buttonAttachPoint”。内容以 HTML-Elements 字符串的形式获取并附加到 pageAttachPoint。

我目前使用以下 css 代码来设置列数。

```
-webkit-column-count:3;
-webkit-column-gap:20px;
-webkit-column-rule:3px; 
```

以下媒体查询似乎没有任何效果：

```
@media screen and (min-width: 500px) {
body
{ background-color: #0f0;
-webkit-column-count:1; }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:51:35.097

我认为你混淆了最大值和最小值。

```
@media screen and (max-width: 500px){
    body { 
        background-color: #0f0;
        -webkit-column-count:1; }
    }
} 
```

Example: [http://jsfiddle.net/HnPSF/1/](http://jsfiddle.net/HnPSF/1/)

# android - findViewById 为首选项布局返回 null

> ID：15708599
> 
> 赞同：9
> 
> 时间：2013-03-29T17:47:42.650
> 
> 标签：android, android-preferences

我有一个首选项屏幕（responder_generic.xml），如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <Preference
        android:defaultValue="false"
        android:key="auto_responder_key"
        android:layout="@layout/preference_header_switch_item_responder"
        android:title="@string/auto_responder">
    </Preference>

</PreferenceScreen> 
```

我将其实例化如下：（在 2.3.3 版中）

```
addPreferencesFromResource(R.xml.responder_generic); 
```

我的布局 =`preference_header_switch_item_responder`如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Layout of a header item in PreferenceActivity. -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="33dp"
    android:gravity="center_vertical"
    android:minHeight="33dp"
    android:id="@+id/preference_header_switch_item_responder"
    style="?android:attr/listSeparatorTextViewStyle" >

    <RelativeLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:singleLine="true"
            android:text="@string/auto_responder"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@android:id/title"
            android:ellipsize="end"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </RelativeLayout>

    <include layout="@layout/compound_button" />

</LinearLayout> 
```

现在，我在`layout`文件夹中定义了复合按钮，`layout/v-14`分别如下：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" >

<CheckBox
    android:id="@+id/switchWidget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:clickable="true"
    android:focusable="false"
    android:padding="8dip"
    android:layout_marginRight="14dip" />

</merge> 
```

和

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Switch
        android:id="@+id/switchWidget"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:clickable="true"
        android:focusable="false"
        android:padding="8dip" 
        android:layout_marginRight="14dip"/>

</merge> 
```

在该`onPostCreate`方法中，我试图在运行时使用`findViewById(R.id.switchWidget)`但它始终返回 null 来查找此复选框/开关。

知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:03:45.320

原因是我在屏幕上添加了多个首选项，因此，我不得不求助于添加自定义首选项。详细解决方案已在以下链接中提供：

解决方案已在以下链接中提供。

[在偏好活动中使用 findviewbyid](https://stackoverflow.com/questions/15728192/usage-of-findviewbyid-in-preferenceactivity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-19T05:56:43.740

原因在于使用了几个PreferenceScreen。每个 Preference 视图都有自己的 id。

要访问视图 ID，您需要创建自己的 Preference 类，继承自 Preference 并覆盖 onBindView

```
public class LogListPreference extends EditTextPreference {

    public LogListPreference(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public LogListPreference(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        this.setLayoutResource(R.layout.preference_widget_loglist);
    }

     @Override
        protected void onBindView(View view) {
            super.onBindView(view);
            EditText edit = (EditText) view.findViewById(R.id.logText);
            ...
        }
} 
```

要在 PreferenceScreen xml 文件中使用您的类，请指定

```
 <PreferenceScreen
 xmlns:android="http://schemas.android.com/apk/res/android">

     <com.company.LogListPreference
         android:title="@string/pref_log_title_log"
         android:key="log_text" />

 </PreferenceScreen> 
```

首选项布局文件/layout/preference_widget_loglist.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Layout used by CheckBoxPreference for the checkbox style. This is inflated
     inside android.R.layout.preference. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget_log_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:gravity="top|left"
    android:orientation="vertical"
    >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
        android:paddingRight="?android:attr/listPreferredItemPaddingRight">
        >

        <TextView
            android:id="@android:id/title"
            android:textAppearance="?android:attr/textAppearanceListItem"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal" />

        <TextView
            android:id="@android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@android:id/title"
            android:layout_alignStart="@android:id/title"
            android:layout_below="@android:id/title"
            android:maxLines="2"
            android:paddingTop="6dp"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="?android:attr/textColorSecondary"
            android:textSize="14sp" />

    </RelativeLayout>

    <EditText
        android:id="@+id/logText"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clickable="false"
        android:defaultValue="@string/pref_default_video_sources"
        android:focusable="false"
        android:gravity="top|left"
        android:inputType="textMultiLine"
        android:key="log331"
        android:lines="10"
        android:maxLines="2000"
        android:minLines="6"
        android:scrollbars="vertical"
        android:scrollbarThumbVertical="?android:attr/colorBackground"
        android:background="?android:attr/colorForeground"
        android:textColor="?android:attr/textColorPrimaryInverse"
        android:text="aaa\nbbb\nccc\naaa\nbbb"
        android:title="@string/pref_title_video_sources" />

</LinearLayout> 
```

# jsonp - 跨域json文件中没有回调函数

> ID：15708612
> 
> 赞同：0
> 
> 时间：2013-03-29T17:48:21.487
> 
> 标签：jsonp

我正在尝试使用跨域 jsonp。在使用来自其他域的 json 文件中的回调函数之前，我已经这样做了。我正在查看 google 在其教程之一中使用的示例 json 数据文件：

[http://earthquake.usgs.gov/earthquakes/feed/geojsonp/2.5/week](http://earthquake.usgs.gov/earthquakes/feed/geojsonp/2.5/week) - 这里显然是回调函数`eqfeed_callback`。在我尝试使用的 json 文件中，没有可以启动所有内容的回调函数，只有一个括号`[`。该文件开始像：

```
[{"Address":"4441 Van Nuys Blvd","City":"Sherman Oaks" ... 
```

并结束如下：

```
}] 
```

我应该怎么办？有没有其他方法可以在没有回调函数的情况下获取数据？我无法编辑此文件。这是我订阅的一项服务。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T16:05:22.337

如果它不是你的服务器，并且服务器不支持 JSONP，那么你无法强制它返回 jsonp。您可以尝试添加`?callback=callback`到您的 url 以查看这是否能说服服务器将其包装在回调中，但如果没有，那么您就不走运了。

嗯，差不多。实际上，您不应该使用一个非常肮脏的技巧，即覆盖 javascript 的标准 Array 构造函数以将数组的内容分配给全局变量。但这非常可怕，我强烈建议不要这样做。

最好询问服务的维护者是否愿意支持 JSONP。或者更好的是，添加一个 CORS 标头。

# python - 重新格式化用户输入

> ID：15708614
> 
> 赞同：0
> 
> 时间：2013-03-29T17:48:23.057
> 
> 标签：python, string, python-3.x, user-input

我想创建一个程序，它将用户输入的字符串重新格式化为更可接受的字符串。

字符串应采用以下格式：

> 作者名单（年份） 标题、其他信息

例如，如果用户输入：

```
"suleman, h (2001) Some Random Piece Of Junk, Journal of Junk, ACM, pp1-100, 2000" 
```

我的程序应该返回：

```
"Suleman, H (2001) Some random piece of junk, Journal of Junk, ACM, pp1-100, 2000." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:28:53.923

这是一个有效的解决方案，基于输入字符串的结构：

```
str="suleman, h (2001) Some Random Piece Of Junk, Journal of Junk, ACM, pp1-100, 2000"

parts=str.split(',')
newparts=[]

for chunk in parts[:-3]:
    newparts.append(chunk.title())

newparts.append(parts[3].upper())

for chunk in parts[4:]:
    newparts.append(chunk.lower())

newstr=",".join(newparts)

print newstr 
```

运行结果：

```
11:41 ~ $ python test.py
Suleman, H (2001) Some Random Piece Of Junk, Journal Of Junk, ACM, pp1-100, 2000 
```

我最初认为 .title() 会为您提供所需的大写字母，但您有需要完全大写的术语，如 ACM，以及需要完全小写的部分，如 'pp1-100 '。所以我采取了更有条理的方法。请注意，这不适用于复合引用。我怀疑必须有一个特定的 python 库来处理正确的大写以供参考。但是，由于规则可能很复杂并且插入并不总是干净的，因此无法保证正确处理。

我在上面详述的方法假定最后三个逗号分隔的术语是特殊情况，但之前的所有内容都遵循 TitleCase 规则。

建议：

对输入字段进行防御性编码，以便将您希望以某种方式大写的信息组合在一起。即，TitleCase 字段、ALL CAPS 字段、ALL LOWER 字段和 LEAVE-AS-IS 字段。

然后在代码中进行相应处理。

# c - 为什么这个C编程不能正确运行？

> ID：15708616
> 
> 赞同：1
> 
> 时间：2013-03-29T17:48:35.027
> 
> 标签：c

这只是一个示例测试，我想在没有重复元素的情况下将列表 Lb 和 La 联合起来。不行，返回-1073741510，我想可能是数组溢出了，但是找不到问题出在哪里

这是我的代码：

```
#include <stdio.h>

void Union(char *La, char *Lb);
int ListLength(char *L);
void GetElem(char *L, int i, char *e);
int LocateElem(char *L, char *e, int (*comp)(char a, char b));
int compare(char a, char b);
void ListInsert(char *, int, char *);

int main(){
    char *La;
    char *Lb;
    int i;
    for(i = 0; i <= 10; ++i){
        La[i] = i;
        Lb[i] = i + 5;
    }
    La[i] = '\0';
    Lb[i] = '\0';
    Union(La, Lb);
    for(i = 0; La[i] != '\0'; ++i){
        printf("%c\n", La[i]);
    }
    return 0;
}

//unite La and Lb without repeat elements
void Union(char *La, char *Lb){
    int La_length = ListLength(La);
    int Lb_length = ListLength(Lb);
    int i = 0;
    char *e;
    for(i; i<= Lb_length; ++i){
        GetElem(Lb, i, e);
        if(!LocateElem(La, e, compare))
            ListInsert(La, ++La_length, e);
    }
}

//caculate the length of L
int ListLength(char *L){
    int i;
    for(i = 0; *(L + i) != '\0'; ++i);
    return i;
}

void GetElem(char *L, int i, char *e){
    *e = *(L + i);
}

//search the element e in L, if exist return the location, else return 0
int LocateElem(char *L, char *e, int (*comp)(char a, char b)){
    int i;
    for(i = 0; *(L + i) != '\0'; ++i){
        if(comp(*(L + i), *e)) return i + 1;
    }
    return 0;
}

//compare the element a and b
int compare(char a, char b){
    if(a == b) return 1;
    return 0;
}

//if e doesn't exit in L, insert the e in L
void ListInsert(char *L, int i, char *e){
    int j;
    for(j = ListLength(L) - 1; j >= i; --j){
        *(L + j + 1) = *(L + j);
    }
    L[ListLength(L)] = '\0';
    *(L + i - 2) = *e;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:54:00.200

首先，这是错误的：

```
char *La;
char *Lb;
int i;
for(i = 0; i <= 10; ++i){
    La[i] = i;
    Lb[i] = i + 5;
} 
```

您需要为`La`和保留内存`Lb`，例如，将它们声明为：

```
char La[12];
char Lb[12]; 
```

然后这个：

```
char *e;
for(i; i<= Lb_length; ++i){
    GetElem(Lb, i, e); 
```

应该读：

```
char e;
for(; i<= Lb_length; ++i){
    GetElem(Lb, i, &e); /* better yet: e=Lb[i] */ 
```

最后，您很可能通过使用`<=`而不是`<`作为`for`退出条件循环了太多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:14:27.087

你有几个问题。我认为您需要阅读更多关于什么是原始指针、固定长度数组、可变长度数组和动态数组的信息。如果您需要您的数组增长，您可以使用 malloc 和 realloc 使其动态化。或者，您可以使用您知道永远不会溢出的“大”数组。

```
int La[12]; //  0 to 10, plus '\0' 
```

但这是固定的，不能增长。你可以使用

```
int La[1000]; // if it solve yours problems 
```

但总的来说，您将需要动态数组。

此外，您需要决定您的数组是否可以容纳`0`或用作终结器。`'\0'`并且`0`，在您使用它的形式中是相等的。您的许多 for 循环不会运行，因为第一个元素是 0。

# ios - 在后台启动另一个应用程序 iOS

> ID：15708618
> 
> 赞同：1
> 
> 时间：2013-03-29T17:48:43.053
> 
> 标签：ios, background-process

我确定我已经知道这个问题的答案，但我认为值得一问。

我正在开发一个应用程序，该应用程序使用另一个应用程序的自定义 URL 方案来启动它，然后将用户发送到另一个应用程序中的特定页面。我用：

```
[[UIApplication sharedApplication] openURL:URLScheme]; 
```

但是，由于其他应用程序中的错误（我无法控制），如果应用程序没有在后台运行，则 URL 将启动应用程序，并将其保留在主页上，而不是将用户发送到应用程序中的正确页面。如果应用程序在后台运行，则该过程按预期工作。我发现这是一种不幸的用户体验，有时链接将它们放在主页上，有时将它们放在正确的页面上。

我正在使用一种方法来检测应用程序是否在后台运行，这是否成功运行。这里的问题是，如果应用程序没有在后台运行，我可以让它启动而不将用户发送到那里直到它启动。或者说不同的方式将用户发送到那里（这将我的应用程序置于后台），一旦用户登陆应用程序，然后再次发送请求以将他们发送到正确的页面？

同样，我确信我已经知道了这个问题的答案，但我想我会看到你们的想法。

# ruby-on-rails-3 - Rails 向每个用户发送单独的电子邮件？

> ID：15708620
> 
> 赞同：1
> 
> 时间：2013-03-29T17:48:49.290
> 
> 标签：ruby-on-rails-3, email, devise, actionmailer

我在 Rails 3 应用程序中使用以下邮件程序一次发送大约 100 封电子邮件：

```
def new_resource_notification(resource, user)
  @resource = resource
  @user = user
  mails = User.where(:email_subscribe => true).map(&:email)
  mail(:to => "admin@domain.com", :bcc => mails, :subject => "New item added")
end 
```

当我查看传出电子邮件日志时，它会`admin@domain.com`按预期发送每封电子邮件并将所有用户添加到密件抄送字段。

如果可能的话，我更希望将每封电子邮件发送到用户电子邮件，而不需要任何密件抄送条目。

这是可能的和/或推荐的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:54:01.237

是的，这是可能的，但是您必须执行一个循环，它将向每个用户发送一封电子邮件。这将需要更多的资源并且会更慢；这就是为什么许多邮寄者使用“密件抄送方法”而不是发送单个电子邮件的原因。

# lua - Lua 中的这个链接列表示例实际上是如何工作的？

> ID：15708621
> 
> 赞同：4
> 
> 时间：2013-03-29T17:48:52.297
> 
> 标签：lua, linked-list

几年后我正在重新学习编程，我目前专注于 C# 和 Lua。我用于 Lua 的书有一个链接列表的例子，但我很难理解它是如何工作的。

```
list = nil
for line in io.lines() do
   list = {next = list, value = line}
end 
```

如果我没看错

*   它正在创建一个新表
*   将列表分配给该表，将“下一个”键/标识符（正确的术语？）设置为指向列表（在第一个创建的表处仍为 nil）
*   然后将“值”键/标识符设置为读入的任何内容
*   那么“列表”现在实际上指向新创建的表

然后在循环的下一次运行中

*   创建下一个表
*   将“下一个”键/标识符设置为指向列表（现在指向先前创建的表）
*   然后将“值”键/标识符设置为读入的任何内容
*   那么“列表”现在实际上指向新创建的表......再次

我只是想确定我完全理解它是如何工作的，因为列表正在尝试创建一个表并指向它当前指向的任何内容，就在该行的执行完成和列表之前，这似乎有点奇怪/奇怪已更新为指向最新创建的表。

还是我离这儿很远？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:19:22.300

[这有点类似于其他语言（如c](/questions/tagged/c "显示标记为“c”的问题")或[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")）中的 LIFO 链表。是的，您正确地遵循了它。

假设我的输入是：（以相同的顺序）

*   21
*   你好
*   35
*   不

然后，我`list`的创建为：

```
list = {
    value = "No",
    next = {
        value = 35,
        next = {
            value = "Hi",
            next = {
                value = 21
                next = nil
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-01T05:44:25.320

本质上发生的事情是，在 for 循环中，您正在创建一个表，并且`next`键最初是 nil。在随后的循环中，您将再次创建一个表并使用`list`变量将其分配给`next`键，该键现在是对前一个表的引用，依此类推。

我给你举个例子。

```
for i=1,3 do
    list = {int=i, next=list}
end 
```

执行此操作时，第一个`next`键将为零，因为`list`尚未定义。但在下一个表中，它的`next`键将是对上一个表的引用，依此类推。如果您尝试打印`list.int`and `list.next`，它们将引用 int=3 的表，因为 for 循环在 3 处结束，因此变量引用该部分。如果您需要更改此设置，只需将数字 for 循环更改为类似

```
for i=3,1,-1 do 
```

所以它实际上看起来像这样：

```
list = {int=1, next=nil}
list = {int=2, next=previousTable}
list = {int=3, next=previousTable} 
```

或者

```
list = {
    int=3, 
    next = {
        int=2, 
        next = {
            int=1, 
            next=nil
        }
    }
} 
```

希望这可以帮助。

# php - onClick - 输入框中选择（单击）的值

> ID：15708623
> 
> 赞同：0
> 
> 时间：2013-03-29T17:49:05.730
> 
> 标签：php, javascript, html

我正在使用搜索查询检索数据表单数据库。

PHP 代码（我在搜索查询中使用它来显示搜索结果）

```
echo "<span style='background-color= #FFFF00'>$query</span><br>";
$count=$dbo->prepare($query);
$count->execute();
$no=$count->rowCount();
if($no > 0 ){echo " <span>No of records = ".$no."</span>"; 
echo "<table><tr><th>PHONE NUMBER</th><th>OWNER NAME</th></tr>";
foreach ($dbo->query($query) as $row){
echo "<tr><td>$row[ROLLNO]</td><td>$row[CNAME]</td></tr>";
}
echo "</table>"; 
```

我想做这样的，

当用户点击一个电话号码时，它应该重定向到一个新页面，在那个新页面中，我的输入框应该填写这个电话号码并应该提交。

**输入框代码（我在第 2 页中使用）**

```
<form name="phone_number_form" id="phone_number_form" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" onsubmit="return vali()" >
<input type="text" name="number" id="number" />
<input type="submit" name="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:21:48.447

查看 w3schools PHP 有一个 $_POST 变量，用于从使用 method="post" 发送的*表单中收集值。*还有 $_GET 和 $_REQUEST 似乎合并了*发布*和*获取*数据。[http://www.w3schools.com/php/php_post.asp](http://www.w3schools.com/php/php_post.asp)

有几个选项，例如从您的第一页发出*请求（获取）*或从您的第一页*发布*数据。

**请求方法**

以下是我认为请求方式的工作方式

*第 1 页*

修改呈现表格行的 foreach 以包含指向第二页的超链接

```
foreach ($dbo->query($query) as $row){
    echo "<tr><td><a href="page2.php?phoneno=$row[ROLLNO]">$row[ROLLNO]</a></td><td>$row[CNAME]</td></tr>";
} 
```

*第2页*

*修改文本框以使用请求*变量中的电话号码填充

```
<input type="text" name="number" id="number" value="<?php echo $_REQUEST["phoneno"]; ?>" /> 
```

**POST 方法**

在您使用 javascript 的第一页中，当用户单击电话号码时设置一个隐藏字段并将表单提交到第二页。同样，您应该能够从 $_REQUEST 变量中读取隐藏字段值

# android - getPackageManger() 完成时出现 NullPointerexception

> ID：15708624
> 
> 赞同：2
> 
> 时间：2013-03-29T17:49:08.097
> 
> 标签：android, nullpointerexception

我对android编码完全陌生，我遇到了一个错误，如果有人可以帮助我修复这个错误，我将非常感激。尽管错误可能很愚蠢，但请尽可能提供解决方案。

```
package com.example.helloworld;

import java.util.ArrayList;
import android.app.Activity;
import android.content.Context;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.pm.PermissionInfo;
import android.os.Bundle;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class CheckPermissions extends Activity {
Context context;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.check);
}

ArrayList<String> list_permission = new ArrayList<String>();
String reqper[] = { "android.permission.ACCESS_CHECKIN_PROPERTIES",
        "android.permission.ACCESS_COARSE_LOCATION" };
{

    if (reqper != null) {
        for (int i = 0; i < reqper.length; i++) {

            String a = reqper[i];
            if (a.contains("android.permission.")) {
                try {

                    PermissionInfo pi = null;
                    PackageManager pm = context.getPackageManager();
                    pi = pm.getPermissionInfo(a,
                            PackageManager.GET_META_DATA);
                    String protctionLevel = "unknown";

                    switch (pi.protectionLevel) {
                    case PermissionInfo.PROTECTION_NORMAL:
                        protctionLevel = "normal";
                        break;
                    case PermissionInfo.PROTECTION_DANGEROUS:
                        protctionLevel = "dangerous";
                        break;
                    case PermissionInfo.PROTECTION_SIGNATURE:
                        protctionLevel = "signature";
                        break;
                    case PermissionInfo.PROTECTION_SIGNATURE_OR_SYSTEM:
                        protctionLevel = "signatureOrSystem";
                        break;
                    case PermissionInfo.PROTECTION_FLAG_SYSTEM:
                        protctionLevel = "system";
                        break;
                    default:
                        protctionLevel = "<unknown>";
                        break;
                    }
                    list_permission.add(a + "        " + protctionLevel);
                } catch (NameNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else {
                list_permission.add(a);
            }
        }
    }

}
TableLayout table = (TableLayout) findViewById(R.id.mytable);
{
    for (int i = 0; i < list_permission.size(); i++) {
        TableRow row = new TableRow(this);
        String sol = list_permission.get(i);

        TextView tvperm = new TextView(this);
        tvperm.setText("" + sol);

        row.addView(tvperm);

        table.addView(row);
    }
}
} 
```

所以这里是Logcat-

```
03-29 18:34:57.201: W/Trace(1785): Unexpected value from nativeGetEnabledTags: 0
03-29 18:34:57.220: W/Trace(1785): Unexpected value from nativeGetEnabledTags: 0
03-29 18:34:57.270: D/AndroidRuntime(1785): Shutting down VM
03-29 18:34:57.270: W/dalvikvm(1785): threadid=1: thread exiting with uncaught    exception (group=0x40a70930) 
03-29 18:34:57.411: E/AndroidRuntime(1785): FATAL EXCEPTION: main
03-29 18:34:57.411: E/AndroidRuntime(1785): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.helloworld/com.example.helloworld.CheckPermissions}: java.lang.NullPointerException
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.os.Looper.loop(Looper.java:137)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at java.lang.reflect.Method.invokeNative(Native Method)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at java.lang.reflect.Method.invoke(Method.java:511)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at dalvik.system.NativeStart.main(Native Method)
03-29 18:34:57.411: E/AndroidRuntime(1785): Caused by: java.lang.NullPointerException
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.app.Activity.findViewById(Activity.java:1839)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at com.example.helloworld.CheckPermissions.<init>(CheckPermissions.java:29)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at java.lang.Class.newInstanceImpl(Native Method)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at java.lang.Class.newInstance(Class.java:1319)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-29 18:34:57.411: E/AndroidRuntime(1785):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-29 18:34:57.411: E/AndroidRuntime(1785):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:50:37.700

您忘记`context` 在使用它之前进行初始化。在方法中将其初始化`onCreate`为：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.check);

    context=CheckPermissions.this;  //<<< initialize context here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:00:55.763

与其使用初始化代码，不如创建一个初始化方法并在为上下文赋值后显式调用它。像这样：

```
TableLayout table;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.check);

    context=CheckPermissions.this;  
    table = (TableLayout) findViewById(R.id.mytable);
    initializeValues();
}

private void initializeValues(){
    if (reqper != null) {
        for (int i = 0; i < reqper.length; i++) {

            String a = reqper[i];
            if (a.contains("android.permission.")) {
                try {

                    PermissionInfo pi = null;
                    PackageManager pm = context.getPackageManager();
                    pi = pm.getPermissionInfo(a,
                            PackageManager.GET_META_DATA);
                    String protctionLevel = "unknown";

                    switch (pi.protectionLevel) {
                    case PermissionInfo.PROTECTION_NORMAL:
                        protctionLevel = "normal";
                        break;
                    case PermissionInfo.PROTECTION_DANGEROUS:
                        protctionLevel = "dangerous";
                        break;
                    case PermissionInfo.PROTECTION_SIGNATURE:
                        protctionLevel = "signature";
                        break;
                    case PermissionInfo.PROTECTION_SIGNATURE_OR_SYSTEM:
                        protctionLevel = "signatureOrSystem";
                        break;
                    case PermissionInfo.PROTECTION_FLAG_SYSTEM:
                        protctionLevel = "system";
                        break;
                    default:
                        protctionLevel = "<unknown>";
                        break;
                    }
                    list_permission.add(a + "        " + protctionLevel);
                } catch (NameNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else {
                list_permission.add(a);
            }
        }
  }
    for (int i = 0; i < list_permission.size(); i++) {
        TableRow row = new TableRow(this);
        String sol = list_permission.get(i);

        TextView tvperm = new TextView(this);
        tvperm.setText("" + sol);

        row.addView(tvperm);

        table.addView(row);
    }
} 
```

我冒昧地将两个初始化部分合并到新方法中。

# ios - UITextField inputView - 所选视图可以引用文本字段吗？

> ID：15708626
> 
> 赞同：0
> 
> 时间：2013-03-29T17:49:12.753
> 
> 标签：ios, uitextfield, uidatepicker

如果我有这样的设置：

```
- (void)textFieldDidBeginEditing:(UITextField* )textField {

    if (textField.tag == 603) { 

        datePicker = [[UIDatePicker alloc]init];
        [datePicker setDatePickerMode:UIDatePickerModeDate];
        [datePicker setDate:[NSDate date]];
        [datePicker addTarget:self action:@selector(showDate:) forControlEvents:UIControlEventValueChanged];
        textField.inputView = datePicker;

    }

} 
```

在 setDate 方法中，我可以引用 UIPickerDate 是哪个 textField 的 inputView 吗？这听起来令人困惑，但就像这样：

```
- (void) showDate: (UIDatePicker*) myDatePicker {

    NSDate* selected = [myDatePicker date];
    NSString* date = [selected description];
    myTextField = myDatePicker.view //I know this is not a property

} 
```

有点像 UITapGestureRecognizer 知道什么视图在调用它......

对 Woz 的解释：我可以，但它会降低应用程序的动态性。这是安装医疗设备的大形式。为了创建表单，我将所有元素属性存储在字典中（标签、类型（文本、复选框、分段控件）、表单部分等），然后以正确的顺序将每个字典存储在数组中。我在数组循环中以编程方式构建所有内容。我想我可以继承 UITextField ......但你必须承认很高兴知道哪个文本字段启动了 inputView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:19:48.847

我只是将 UITextField 子类化并让它工作：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        self.textColor = [colorManager setColor:66.0 :66.0 :66.0];
        self.font = [UIFont fontWithName:@"Helvetica" size:18.0];
        self.backgroundColor = [UIColor whiteColor];
        self.borderStyle = UITextBorderStyleRoundedRect;
        self.returnKeyType = UIReturnKeyDone;
        self.userInteractionEnabled = YES;

        datePicker = [[UIDatePicker alloc]init];
        [datePicker setDatePickerMode:UIDatePickerModeDate];
        [datePicker setDate:[NSDate date]];
        [datePicker addTarget:self action:@selector(setDate:) forControlEvents:UIControlEventValueChanged];
        self.inputView = datePicker;
    }
    return self;
}

- (void) setDate : (UIDatePicker*) myDatePicker {

    NSDateFormatter* myDateFormatter = [[NSDateFormatter alloc] init];
    [myDateFormatter setDateFormat:@"MM/dd/yyyy"];

    NSString* dateString = [myDateFormatter stringFromDate:myDatePicker.date];
    self.text = dateString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:43:52.243

触发 UIDatePicker 的 UITextField 将是当前的 firstResponder。您可以使用此信息来识别与当前活动的 UIDatePicker 关联的文本字段。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T18:53:35.420

将标签添加到 UIDatePicker 并使用该标签从视图中查找 textField。

```
- (void)textFieldDidBeginEditing:(UITextField* )textField {

    if (textField.tag == 603) { 

        datePicker = [[UIDatePicker alloc]init];
        [datePicker setTag:textField.tag];
        [datePicker setDatePickerMode:UIDatePickerModeDate];
        [datePicker setDate:[NSDate date]];
        [datePicker addTarget:self action:@selector(showDate:) forControlEvents:UIControlEventValueChanged];
        textField.inputView = datePicker;

    }

}

- (void) showDate: (UIDatePicker*) myDatePicker {

    NSDate* selected = [myDatePicker date];
    NSString* date = [selected description];

    UITextField *textField = (UITextField *)[self.view viewWithTag:myDatePicker.tag];

} 
```

# java - 如何将 xml 字符串转换为对象。我不知道提前是什么对象。只是几种可能

> ID：15708630
> 
> 赞同：3
> 
> 时间：2013-03-29T17:49:35.163
> 
> 标签：java, jaxb

我有一个字符串，它是一个 XML 字符串，它可能对应于 jaxb 生成的模式文件的几个对象之一。
我提前不知道它是什么对象。

*   如何将此 XML 字符串转换为 jaxb xml 对象？某种类型的解组？
*   如何确定它分配给哪个对象？
*   将对象从 xml 字符串转换为对象后，如何实例化该对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:44:03.000

您可以执行以下操作：

**富**

只要有一个通过`@XmlRootElement`或`@XmlElementDecl`注释与您的类相关联的根元素，您就不需要指定要解组的类的类型（请参阅： [http ://blog.bdoughan.com/2012/07/jaxb-和-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)）。

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Foo {

    private String bar;

    public String getBar() {
        return bar;
    }

    public void setBar(String bar) {
        this.bar = bar;
    }

} 
```

**演示**

从一个`String`简单的包装`String`中解组`StringReader`. 该`unmarshal`操作会将 XML 转换为您的域类的实例。如果您不知道必须使用什么类`instanceof`或`getClass()`确定它是什么类型。

```
import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        String xml = "<foo><bar>Hello World</bar></foo>";
        StringReader reader = new StringReader(xml);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Object result = unmarshaller.unmarshal(reader);

        if(result instanceof Foo) {
            Foo foo = (Foo) result;
            System.out.println(foo.getBar());
        }
    }

} 
```

**输出**

```
Hello World 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:04:19.997

```
Unmarshaller yourunmarshaller = JAXBContext.NewInstance(yourClass).createUnMarshaller();
JAXBElement<YourType> jaxb = (yourunmarshaller).unmarshal(XMLUtils.getStringSource([your object]), [the class of your object].class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:15:46.387

如果您有 XML 对象的模式文件（如果您正在使用 JAXB），请在 XML 上运行验证。

[针对 XSD Schema 的 Java XML 验证](https://stackoverflow.com/questions/2396903/java-xml-validation-against-xsd-schema)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-15T12:57:57.960

如果从 XSD 生成对象，那么 JAXB 会在与所有类型类相同的包中生成一个 ObjectFactory 类。

```
JAXBContext jaxbContext = JAXBContext.newInstance("your.package.name");
Unmarshaller unmarshaller = jaxbContext.createUnmarshaller(); 
```

这里的“your.package.name”代表你的 ObjectFactory 类的包名。

unmarshaller 现在可以将您的 XML 转换为对象：

```
public Object createObjectFromString(String messageBody) throws JAXBException {
    return unmarshaller.unmarshal(new StringReader(messageBody));
} 
```

如果成功，将返回一个 JAXBElement 对象：

```
try {
    JAXBElement jaxbElement= (JAXBElement) createObjectFromString(messageBody);
} catch (JAXBException e) {
    // unmarshalling was not successful, take care of the return object 
} 
```

如果你有一个`jaxbElement`返回的对象，你可以调用`getValue()`被包装的对象，`getDeclaredType()`或者它的类。

使用这种方法，您无需提前知道目标对象的类型。

# php - 使用 PHP 进行 XML 分页

> ID：15708638
> 
> 赞同：2
> 
> 时间：2013-03-29T17:49:47.040
> 
> 标签：php, xml, parsing, pagination, simplexml

下面是我用来解析 XML 文件的代码，但是文件有很多记录，我想对它进行分页，每页显示 20 条记录。

我还想要页面底部的分页链接，以便用户也可以转到其他页面。它应该是这样的，如果没有给出值，那么它将从 0 开始到 20，否则如果值为 2，则从 40 开始并在 60 处停止`test.php?page=2`。

```
$xml = new SimpleXMLElement('xmlfile.xml', 0, true);

foreach ($xml->product as $key => $value) {
    echo "<a href=\"http://www.example.org/test/test1.php?sku={$value->sku}\">$value->name</a>";
    echo "<br>";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:52:38.100

像这样的东西应该工作：

```
<?php
    $startPage = $_GET['page'];
    $perPage = 10;
    $currentRecord = 0;
    $xml = new SimpleXMLElement('xmlfile.xml', 0, true);

      foreach($xml->product as $key => $value)
        {
         $currentRecord += 1;
         if($currentRecord > ($startPage * $perPage) && $currentRecord < ($startPage * $perPage + $perPage)){

        echo "<a href=\"http://www.example.org/test/test1.php?sku={$value->sku}\">$value->name</a>";    

        //echo $value->name;

        echo "<br>";

        }
        }
//and the pagination:
        for ($i = 1; $i <= ($currentRecord / $perPage); $i++) {
           echo("<a href='thispage.php?page=".$i."'>".$i."</a>");
        } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:59:23.147

您可以使用 php 的`array_slice`函数（文档：[http](http://www.php.net/manual/en/function.array-slice.php) ://www.php.net/manual/en/function.array-slice.php ）

开始是`$page * $itemsPerPage`，结束是`$page * $itemsPerPage + $itemsPerPage`，页数是`ceil(count($xml->product) / $itemsPerPage)`。

例子：

```
$allItems = array(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20);
$itemsPerPage = 5;
$page = isset($_GET['page']) ? intval($_GET['page']) : 0;

foreach (array_slice($allItems, $page * $itemsPerPage, $page * $itemsPerPage + $itemsPerPage) as $item) {
    echo "item $item";
} 
```

它甚至可以工作:) 请参阅：[http ://codepad.org/JiOiWcD1](http://codepad.org/JiOiWcD1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T10:09:08.473

作为`SimpleXMLElement`a `Traversable`，您可以[`LimitItertor`](http://php.net/LimitIterator)使用 PHP 附带的 a 进行分页。

要获取产品元素的总数，您可以使用该`SimpleXMLElement::count()`函数。

分页的工作方式与其他数百个问题中概述的一样，我更喜欢使用它的[`LimitPagination`类型](https://gist.github.com/hakre/4469154)。

它以当前页面、元素总数和每页元素作为参数（另请参阅：[PHP 5.2 和 Pagination](https://stackoverflow.com/a/14184729/367456)）。它还有一个辅助函数来提供`LimitIterator`.

例子：

```
$products = $xml->product;

// pagination
$pagination = new LimitPagination($_GET['page'], $products->count(), 20);

foreach ($pagination->getLimitIterator($products) as $product) {
    ...
} 
```

如果您想输出一个允许在页面之间导航的寻呼机，则可以`LimitPagination`提供更多功能以使其更容易，例如仅突出显示当前页面的所有页面（此处为括号示例）：

```
foreach ($pagination->getPageRange() as $page)
{
    if ($page === $pagination->getPage()) {
        // current page
        printf("[p%d] ", $page); 
    } else {
        printf("p%d ", $page);
    }
}

foreach ($pagination->getPageRange() as $page)
{
    if ($page === $pagination->getPage()) {
        // current page
        printf("[p%d] ", $page); 
    } else {
        printf("p%d ", $page);
    }
} 
```

交互式在线演示：[http](http://codepad.viper-7.com/OjvNcO)
://codepad.viper-7.com/OjvNcO 较少的交互式在线演示：[http ://eval.in/14176](http://eval.in/14176)

# javascript - Bootstrap 崩溃为第一次崩溃工作，然后显示，但之后不工作

> ID：15708643
> 
> 赞同：0
> 
> 时间：2013-03-29T17:50:05.240
> 
> 标签：javascript, twitter-bootstrap, collapse

很奇怪..我制作的手风琴是直接从引导页面复制的。第一次单击每个选项卡并展开，然后折叠它们时，它们工作正常......但是，如果您再次尝试，它们不会响应。这可能是什么原因造成的？这让我整天发疯。

你可以在这里看到一个例子 - [http://v2.marlownailandbeauty.co.uk/index.php?option=com_content&view=article&id=18&Itemid=133](http://v2.marlownailandbeauty.co.uk/index.php?option=com_content&view=article&id=18&Itemid=133)

标记：

```
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading"><a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"> Collapsible Group Item #1 </a></div>
        <div id="collapseOne" class="accordion-body collapse in">
             <div class="accordion-inner">Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.</div>
        </div>
    </div>
    <div class="accordion-group">
         <div class="accordion-heading"><a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo"> Collapsible Group Item #2 </a></div>
         <div id="collapseTwo" class="accordion-body collapse">
               <div class="accordion-inner">Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.</div>
         </div>
    </div>
    <div class="accordion-group">
        <div class="accordion-heading"><a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree"> Collapsible Group Item #3 </a></div>
        <div id="collapseThree" class="accordion-body collapse">
            <div class="accordion-inner">Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.</div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T20:14:57.210

Joomla 默认包含 Mootools，删除 Mootools 为我解决了这个**问题**。

您可以通过以下方式删除 Mootools：

```
<?php $headerstuff = $this->getHeadData();
foreach ($headerstuff['scripts'] as $k => $item) {
    if(stristr($k, 'mootools-core.js')) unset($headerstuff['scripts'][$k]);
    if(stristr($k, 'mootools-more.js')) unset($headerstuff['scripts'][$k]);
}
$this->setHeadData($headerstuff); ?> 
```

我已经尝试安装 jQuery Easy 插件，但它并没有解决问题。

# php - 将php与postgresql连接起来

> ID：15708646
> 
> 赞同：1
> 
> 时间：2013-03-29T17:50:31.420
> 
> 标签：php

我是一个新手，刚刚开始建立一个网站..我写了以下代码，但它不起作用。它没有连接到数据库..如果没有，还有其他方法可以将 Dreamweaver 连接到 postgresql ...请帮助..thnx 提前

```
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Bootstrap -->
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
</head>
<body>
<div class="span6">
  <table class="table table-striped">
     <thead>  
          <tr>  
            <th>Scheme-ID</th>  
            <th>Scheme Name</th>  
            <th>Scheme Type</th>  

          </tr>  
        </thead>
        <tbody>
<?PHP

        $conn = pg_connect("host=localhost port=5432 dbname=egram user=postgres password=password") or die("unable to connect to database");
        if ($conn) 
        {   

        echo ("Connection attempt succeeded.");   

        }
         else {   

        echo ("Connection attempt failed.");   

        } 

    $sql = "SELECT scheme_id,scheme_name,scheme_type FROM schemes";
    $result = pg_query($conn,$sql);  //order executes
    if($result)
    {
        echo("query ran successfully");
        while($data = pg_fetch_row($result))
        {
            echo("<tr><td>$data[0]</td><td>$data[1]</td><td>$data[2]</td></tr>");
        }
    }
    else
    {
        echo("error in running query");
    }

?>

    </tbody>  
    </table>
    </div>
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
  <a href="#">#</a>
  </body>
</html> 
```

# jquery - 对于每个循环附加 div

> ID：15708647
> 
> 赞同：0
> 
> 时间：2013-03-29T17:50:34.063
> 
> 标签：jquery, json, html, append

我正在尝试使用 for 循环从*json文件加载产品。*对于我想要有一个 div 的每个产品（一个 div 中的每个项目）。我加载没有问题，但不知何故，第一项数据看起来像是与下一项连接。我试图通过网络解决方案，我得到的最接近的是与父母有关的事情。（我还是 jQuery 的新手）。每个项目的 div 数量正常工作。

```
if($.isArray(item.product_Shorts)){
    $.each(item.product_Shorts, function(i, item){
        $('#CasualItems').append("<div class='title'>");
        $('.title').append(item.product_ID);
    });
} 
```

目前我有两种产品，一种 id 为 3，另一种为 4。（为此，我显示的是 ID 而不是标题。谢谢。

![在此处输入图像描述](../Images/6e7c4c1f23f82f4945f1d188181aea98.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:52:41.680

试试这个：

```
if($.isArray(item.product_Shorts)){
    $.each(item.product_Shorts, function(i, item){
        $('#CasualItems').append("<div class='title'>").html(item.product_ID);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:53:12.167

在第一个循环中，它附加 div 并附加产品 ID 3（到所有“标题”类）。在第二遍中，它附加一个 div，然后添加产品 ID 4（再次添加到所有 'title' 类，现在有 2 个）。

只需这样做：

```
$('#CasualItems').append("<div class='title'>").append(item.product_ID); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:56:14.227

这是因为您将其添加到每个`.title div`. 尝试按`id`或索引。

```
$('.title').eq(i).append(item.product_ID); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T17:58:27.797

试试这个，`id`对每个使用唯一的`div`

```
if($.isArray(item.product_Shorts)){
    $.each(item.product_Shorts, function(i, item){
        $('#CasualItems').append("<div id='title'" + (i + 1) + ">");
        $('#title' + (i + 1)).append(item.product_ID);
    });
} 
```

# html - Bootstrap 覆盖我的风格

> ID：15708657
> 
> 赞同：1
> 
> 时间：2013-03-29T17:51:09.030
> 
> 标签：html, css, twitter-bootstrap

bootstrap.css 压倒了我的风格......我怎样才能避免这种情况发生？如何强制 css 先加载？

一个问题是它需要的网站正在使用`@import`加载css文件（这无法更改，客户不想更改）。

有任何想法吗？

**********注意****** *******

 **我根本无法修改当前站点。我只需要包含 bootstrap.css 而不覆盖其他任何内容。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:56:35.320

您需要编写一个更具体的选择器。请记住，ID 的权重最大。您可以暂时标记它`!important`以检查您是否正确定位它。

例如，如果您的目标是列表项中的锚点，那么要覆盖重置样式，您可以编写类似的内容`nav ul li a{color: black;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:52:19.197

您只需要增加规则的特异性。这意味着向你的选择器添加更多，比如你有`.elem { color: blue; }`，你可以做到`.parent .elem { color: blue; }`

或者使用 !important，比如`.elem { color: blue !important; }`**

# ruby-on-rails - 为什么 variable = true AND false 在rails模型中导致值为true，但在控制台中却没有

> ID：15708658
> 
> 赞同：2
> 
> 时间：2013-03-29T17:51:09.357
> 
> 标签：ruby-on-rails, ruby

为了确定一张照片是否符合指定的纵横比，我使用了这个：

```
exif2 = EXIFR::JPEG.new(photo.queued_for_write[:medium].path)
self.featured = exif2.width == 1250 and exif2.height == 833 
```

但是，如果宽度为 1250 而高度为任意值，则返回 true。如果 exif2.height 不是 833，则在 rails 控制台中运行这个确切的命令会返回 false。但是，将其更改为下面的 if 语句是可行的

```
if exif2.width == 1250 and exif2.height == 833
  self.featured = true
else
  self.featured = false
end 
```

我不明白为什么，我正在尝试学习 Rails，所以我认为理解它对我很有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T17:57:27.497

运算符优先级，`and`甚至低于`=`

所以你的第一个表达式被评估为

```
( self.featured = exif2.width == 1250 ) and ( exif2.height == 833 ) 
```

你的条件是这样评估的

```
if ( exif2.width == 1250 ) and ( exif2.height == 833 ) 
```

. . . 表明您的不同答案虽然令人困惑，但不是由于任何不一致

使用`&&`而不是`and`在你可以使用的地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:38:09.940

要学习的课程是理解运算符的优先级，使用括号来强制操作的顺序，而不是希望你把它们弄对，并避免`and`.

这：

```
exif2.width == 1250 and exif2.height == 833 
```

比以下内容更难阅读和理解：

```
(exif2.width == 1250) and (exif2.height == 833) 
```

但是，由于优先级，您还必须将整个测试括在括号中：

```
(
  (exif2.width == 1250) and
  (exif2.height == 833)
) 
```

这将与`=`作业一起使用。

我避开`and`了，并会使用：

```
(
  (exif2.width == 1250) &&
  (exif2.height == 833)
) 
```

因为这确实是对两个测试的结果进行 AND 的布尔测试。`&&`具有比 更高的优先级`and`，但即便如此，我仍然会用括号将它写在两行上。我经历了太多的解释器和编译器之争，无法让他们决定何时发生什么。

# grails - 从 Grails Twitter-Bootstrap 插件覆盖 CSS

> ID：15708662
> 
> 赞同：5
> 
> 时间：2013-03-29T17:51:18.550
> 
> 标签：grails, plugins, twitter-bootstrap

我有一个使用 Twitter-Bootstrap 插件的 Grails 2.2.1 应用程序，该插件为 Grails 应用程序提供了 Bootstrap 的基本 CSS 和 javascript 元素，以及一个标签库和一些其他功能。

问题是，我想使用一个自定义 CSS 文件来提供我们公司的颜色，而现在我只能通过从应用程序中提取我们自己的 CSS 来覆盖插件自己的 bootstrap.css 文件中的元素，这意味着插件首先加载它的 CSS 文件，然后应用程序加载它自己的。而且这些文件又大又重。

我的用户，尤其是那些在移动设备上的用户，不需要额外的 125k CSS 的负担以及执行每个规则两次所带来的额外处理。

除了构建我自己的插件的自定义版本之外，我能做些什么来阻止插件的 bootstrap.css 文件使用我自己的 boostrap.css 文件进入网页吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T18:26:17.807

该插件使用[资源](https://github.com/groovydev/twitter-bootstrap-grails-plugin/blob/master/grails-app/conf/BootstrapResources.groovy)来声明 twitter 引导文件。幸运的是，资源可以选择覆盖已声明模块的定义。

因此，在您的 ApplicationResources.groovy 中，添加：

```
modules = {
    overrides {
        'bootstrap-css' {
            resource id: 'bootstrap-css', url:'/css/mycustombootstrap.css'
        }
    } 
} 
```

# php - PHP / MySQL 特定列数

> ID：15708664
> 
> 赞同：1
> 
> 时间：2013-03-29T17:51:34.727
> 
> 标签：php, mysql, count

我在论坛上搜索过，但是所有答案似乎都不适用于我我猜这是更多的用户错误。

## 我正在尝试做的事情：

1.  从 MySQL 中检索数据集

2.  计算总行数

3.  具体计算其中有多少在metSLA列中具有值“Y”

4.  具体计算其中有多少在metSLA 列中具有值“N”

5.  将这些metSLA值中的每一个转换为百分比

** MySQL 查询确实有效，并将其存储在变量 $result 中以供参考。

*

```
 //sla and total case count and percentages
        $sla_met_rows = 0;
        $sla_not_met_rows = 0;

        $total_cases = mysql_num_rows($result);

        while ($row = mysql_fetch_array($result)) 
        {
        if `metSLA` = "Y"
            {
            $sla_met_rows ++;
            } else if `metSLA` = "N"
                {
                $sla_not_met_num_rows ++;
                }
        }
        $met_percentage = 100 / $total_cases * $sla_met_rows;
        $not_met_percentage = 100 / $total_cases * $sla_not_met_num_rows; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:56:52.493

You can use a single MySQL query to get the percentage result:

```
SELECT COUNT( CASE WHEN `metSLA` = "Y" THEN 1 ELSE NULL END ) AS `Yes`,
    COUNT( CASE WHEN `metSLA` = "N" THEN 1 ELSE NULL END ) AS `No`,
    COUNT(1) AS `total`
FROM `TableName` 
```

* * *

In your PHP, it'll be referenced as:

```
$result = mysql_query( <<The query above is here>> );
$row = mysql_fetch_array( $result );
$met_precentage = $row['Yes'] * 100 / $row['total'];
$not_met_precentage = $row['No'] * 100 / $row['total']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:56:23.037

改变

```
 if `metSLA` = "Y"
        {
        $sla_met_rows ++;
        } else if `metSLA` = "N"
            {
            $sla_not_met_num_rows ++;
            } 
```

到：

```
 if ($row['metSLA'] == "Y")
    {
      $sla_met_rows ++;
    }

    else if ($row['metSLA'] == "N")
    {
      $sla_not_met_num_rows ++;
    } 
```

你有三个问题：

1.  您缺少条件周围的括号，
2.  您正在分配 ( `=`) 而不是比较 ( `==`)，并且
3.  You're running a [shell command](http://php.net/manual/en/language.operators.execution.php) rather than getting the value from the database row.

# php - 如果有警告消息，则显示不同的内容

> ID：15708666
> 
> 赞同：0
> 
> 时间：2013-03-29T17:51:36.163
> 
> 标签：php, html, include, warnings

我有一个 PHP 警告的小问题：

我基本上想通过单击链接来更改页面的内容，如下所示：

```
<?php $page = ((!empty($_GET['page'])) ? $_GET['page'] : 'home'); ?>
<h1>Pages:</h1>
<ul>
    <li><a href="index.php?page=news">News</a></li>
    <li><a href="index.php?page=faq">F.A.Q.</a></li>
    <li><a href="index.php?page=contact">Contact</a></li>
</ul>
<?php include("$page.html");?> 
```

这真的很好，但是当我使用一个不存在的页面时，例如 `localhost/dir/index.php?page=notapage`我得到以下错误：

```
Warning: include(notapage.html): failed to open stream: No such file or directory in
C:\xampp\htdocs\dir\index.php on line 8

Warning: include(): Failed opening 'notapage.html' for inclusion (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\dir\index.php on line 8 
```

是否可以用自定义消息替换此警告？（如“404 未找到”）

提前致谢，复活节快乐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:02:46.117

您可以使用[file_exists()](http://php.net/manual/en/function.file-exists.php)但请记住，您的方法不是很安全。更安全的方法是使用包含允许页面的数组。这样您就可以更好地控制用户输入。像这样的东西：

```
$pages = array(
    'news' => 'News',
    'faq' => 'F.A.Q.',
    'contact' => 'Contact'
);

if (!empty($pages[$_GET['page']])) {
    include($_GET['page'].'html');
} else {
    include('error404.html');
} 
```

您还可以使用该数组生成菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:56:24.660

你可以做

```
if (file_exists($page.html)) {
include("$page.html");
}
else
{
echo "404 Message";
} 
```

来源：[PHP 手册](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:55:53.740

您可以检查[文件是否存在（）](http://www.php.net/manual/en/function.file-exists.php)，然后包含自定义 404 模板。

```
<?php 
if (file_exists($page + '.html')) { 
    include ($page + '.html') 
} else { 
    include ('404.html'); 
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:57:37.343

这个想法是在尝试 include() 之前检查文件是否存在：

```
if(!file_exists("$page.html"))
{
    display_error404();
    exit;
}

include("$page.html"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T17:59:07.020

是的，这是可能的，但我建议发送 404，除非您还打算使用干净的 url（如 /news、/faq、/contact）在后台重定向到 index.php，并写入页面参数。这是因为 index.php 确实存在，只是参数错误。因此 404 是不合适的。更不用说您实际上不能在此位置设置 404 标头，因为您已经将输出发送到浏览器。

对于您的情况，只需设置 file_exists 是否存在并且像这样可读的条件：

```
$include_file = $page . '.html';
if (file_exists($include_file) && is_readable($include_file)) {
   include($include_file);
} else {
   // show error message
} 
```

# java - 不要接受空值存储到数组中

> ID：15708667
> 
> 赞同：0
> 
> 时间：2013-03-29T17:51:47.270
> 
> 标签：java, arrays, null

我需要如何编码以使数组 token[] 不会读取空值？代码如下。

```
String[] token = new String[0];
String opcode;
String strLine="";
String str="";
    try{
        // Open and read the file
        FileInputStream fstream = new FileInputStream("a.txt");

        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));

        //Read file line by line and storing data in the form of tokens
        if((strLine = br.readLine()) != null){

                token = strLine.split(" |,");//// split w.r.t spaces and ,  

  // what do I need to code, so that token[] doesnt take null values

            }
            }
        in.close();//Close the input stream
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:10:58.290

**免责声明**：我不太确定您的问题是什么，也许您应该添加一些细节。

无论如何，从 split 方法 javadoc 的返回部分：

> **返回**：
> 
> > 通过围绕给定正则表达式的匹配拆分此字符串计算的字符串数组

这是一个链接：[http](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String) ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String , int)

所以 split 方法总是返回一个 String 数组。如果传递的正则表达式不匹配，它将返回一个只有一个元素的字符串数组：原始字符串。

这一行：

```
if(strLine.split(" |,")!=null){ 
```

应该变成这样：

```
String[] splittedStrLine = strLine.split(" |,");
if(splittedStrLine.length > 1) { 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:01:16.137

一种面向对象的处理方式是创建一个封装`token`数组的新类。给这个类一个设置和获取元素的方法。如果传入 null，set 方法将抛出异常。

```
public void setElement(int index, String element) {
    if (element == null)
        throw new IllegalArgumentException();
    //...
} 
```

在您的情况下，由于您没有创建`token`数组，因此您可以从中填充新类：

```
for each t in token
   myEncapsulation.setElement(loopCount, t); 
```

这当然是伪代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:58:02.577

是的，您可以将`null`值设置为数组的元素。如果您希望令牌阻止`null`值，那么您应该在分配之前先检查它。但是在您的代码中，该`token`数组仅接受索引 0 处的一个元素。如果您需要设置许多元素，请考虑使用`List`. 您分配的内容只是被`split`.

```
String[] token = strLine.split(" |,");
if(token!= null && token.lingth >0){

  // use the array 
```

# requirejs - 如何将此代码分解为两个 RequireJs 模块

> ID：15708668
> 
> 赞同：1
> 
> 时间：2013-03-29T17:51:47.753
> 
> 标签：requirejs, amd

我创建了下面的代码以将 2 个按钮动态加载到 ID 为`masthead`. 然后在`showMenus`单击每个按钮时运行一个名为的函数，运行一些 jQuery 动画。一切都包装在 RequireJS 模块中。

代码按原样工作正常，但我认为将其分解为两个单独的 RequireJS 模块/文件可能会更好：一个加载页面上的按钮，另一个运行该`showMenus`功能。我确实参考了[RequireJS API 文档](http://requirejs.org/docs/api.html)，但找不到答案。

任何帮助表示赞赏...在此先感谢！

```
require(['jquery'], function ($) {

  var header = document.getElementById("masthead"),
  $navMenu = $("#site-navigation-list"),
  $searchBox = $("#searchform"),
  menuButton = document.createElement("div"),
  searchButton = document.createElement("div"),
  showMenus;

  $(menuButton).attr("id", "menu");
  $(searchButton).attr("id", "search");

  header.appendChild(searchButton);
  header.appendChild(menuButton);

  // break the code below into its on RequireJS module?

  showMenus = function(btn,el) {
  $(btn).click(function() {
    if (el.is(":visible") ) {
      el.slideUp({
        complete:function(){
          $(this).css("display","");
        }
      });
     } else {
      el.slideDown();
     }
  });
};

showMenus(menuButton, $navMenu);
showMenus(searchButton, $searchBox);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:35:56.320

以下仅是我的意见，但您可能会发现它很有用。

从构成您的应用程序的事物的角度考虑可能会有所帮助，然后它们可能是模块的候选者。因此，在您的示例中，“标头”似乎是您感兴趣的东西。

因此，使用 RequireJS，我们可以创建一个表示通用刊头的新模块：

```
// Masthead module
define(['jquery'], function ($) {

    function showMenus (btn, el) {
        function toggle (el) {
            if (el.is(":visible")) {
                el.slideUp({
                    complete:function(){
                        $(this).css("display","");
                    }
                });
            } else {
                el.slideDown();
            }
        }
        $(btn).click(function() {
            toggle(el);
        });
    }

    // A Masthead is an object that encapsulates a masthead DOM element.
    // This is a constructor function.
    function Masthead (mastheadElement) {
        // 'this' is the masthead object that is created with the 'new'
        // keyword in your application code.
        // We save a reference to the jQuerified version of mastheadElement.
        // So mastheadElement can be a DOM object or a CSS selector.
        this.$mastheadElement = $(mastheadElement);
    }

    // Add a method to Masthead that creates a normal button
    Masthead.prototype.addButton = function (id) {
        var $btn = $("<div/>").attr("id", id);

        this.$mastheadElement.append($btn);

        return $btn;
    };

    // Add a method to Masthead that creates a 'toggling' button
    Masthead.prototype.addTogglingButton = function (id, elementToToggle) {
        // ensure we have a jQuerified version of element
        elementToToggle = $(elementToToggle);

        // Reuse the existing 'addButton' method of Masthead.
        var $btn = this.addButton(id);

        showMenus($btn, elementToToggle);

        return $btn;
    };

    // return the Masthead constructor function as the module's return value.
    return Masthead;
}); 
```

然后在我们的实际应用代码中使用这个模块：

```
// Application code using Masthead module
require(["Masthead"], function (Masthead) {
    // We create a new Masthead around an existing DOM element
    var masthead = new Masthead("#masthead");
    // We add our buttons.
    masthead.addTogglingButton("menu", "#site-navigation-list");
    masthead.addTogglingButton("search", "#searchform");
}); 
```

这种方法的优点是没有 DOM id 被硬编码到模块中。因此，我们可以在其他需要此功能但可能使用不同 DOM id 的应用程序中重用标头广告模块。

*将其视为将事物是什么*与*我们如何使用它们*分开可能会很方便。

This is a simple example, but frameworks/libraries like [Backbone](http://backbonejs.org/) and [Dojo](http://dojotoolkit.org/) (and many, many more) take this further.

# jboss - 在 Eclipse 中安装 drools planner：构造函数 IntConstraintOccurrence(String, Object[]) 不明确

> ID：15708671
> 
> 赞同：0
> 
> 时间：2013-03-29T17:52:03.677
> 
> 标签：jboss, eclipse-plugin, drools, drools-planner, optaplanner

我一直在尝试安装 Drools 规划器。我下载了它，安装了插件，创建了一个运行时，并创建了一个新项目。但是，我在规则文件中遇到了构建错误：构造函数 IntConstraintOccurrence(String, Object[]) 不明确。这段代码在我朋友的计算机上运行良好（也使用 eclipse），所以我知道这不是代码中的错误，但我无法弄清楚问题出在哪里。以前有人有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T08:20:54.813

升级到 OptaPlanner (= [Drools Planner](http://www.optaplanner.org/community/droolsPlannerRenamed.html) ) 6.0.x 并[避免使用 Object[] 参数](http://blog.athico.com/2013/04/score-drl-faster-and-easier-in.html)。

# javascript - 使用批处理脚本获取 wow6432node 中注册表项的值？

> ID：15708681
> 
> 赞同：-2
> 
> 时间：2013-03-29T17:52:41.913
> 
> 标签：javascript, batch-file, dom-events, batch-processing

我在下面有一个批处理脚本（我可以从[Open a file in Visual Studio at a specific line number](https://stackoverflow.com/questions/350323/open-a-file-in-visual-studio-at-a-specific-line-number)和[How can I get the value of a registry key using a batch script?](https://stackoverflow.com/questions/15690211/how-can-i-get-the-value-of-a-registry-key-using-a-batch-script)）中派生出来。

```
@echo off
for /f "tokens=3*" %%x in ('reg query "HKLM\SOFTWARE\Microsoft\Window\CurrentVersion\App Paths\devenv.exe"') do set DEVENV="%%x %%y"

%DEVENV% /Command "Edit.Goto %1" "E:\Bat\Example\Sample\%2"

@echo off 
```

我使用下面给出的 Javascript 代码运行上述批处理脚本，其中 和 的值`%1`由`%2`该 Javascript 作为数字 (10) 和路径 ( `examples/helloWorld/helloWorld.cpp`) 传递，如下所示

```
<html>
<head>
<script language="JavaScript" type="text/javascript">
MyObject = new ActiveXObject( "WScript.Shell" )
function Goto()
{ MyObject.Run("D:/GoToLine2.bat 10 examples/helloWorld/helloWorld.cpp") ;}
</script>
</head>
<body>
<h1>Run a Program</h1>
This script launches a bat file >> <p>
<button onclick="Goto()">Run BatFile</button>
</body>
</html> 
```

我的问题是“E:\Bat\Example\Sample”的注册表项是`HKLM\SOFTWARE\Wow6432Node\BI\Science\AB`并且我不知道如何获取它的值，因此我不必像`E:\Bat\Example\Sample\`批处理文件中那样传递路径，而只需获取它从注册表中，并将“%2”（我从 Javascript 代码中获得 - 即`examples/helloWorld/helloWorld.cpp`）附加到它的值。我正在使用 Windows 7 64 位 PC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:16:14.220

```
@ECHO OFF
SETLOCAL 
FOR /F "tokens=2*" %%A IN (
   'REG QUERY "HKLM\SOFTWARE\Wow6432Node\BI\Science" /v AB'
) DO (set yourpath=%%B%2)
set yourpath=%yourpath:/=\%
ECHO %yourpath% 
```

应该做的任务。这本质上是[您之前](https://stackoverflow.com/questions/15690211/how-can-i-get-the-value-of-a-registry-key-using-a-batch-script/15690677#15690677)尚未接受答案的问题的重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:25:44.373

无论如何，我真的不明白您为什么要打扰批处理脚本。既然您已经创建了一个`WScript.Shell`对象，它既用于[执行程序](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)又[用于从注册表中读取](http://msdn.microsoft.com/en-us/library/x05fawxd%28v=vs.84%29.aspx)，为什么不使用 JavaScript 来完成整个事情呢？

```
<html>
<head>
<script language="JavaScript" type="text/javascript">
function Goto(line, file) {
    var osh = new ActiveXObject("WSH.Shell");
    var devenv = osh.RegRead('HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\App Paths\\devenv.exe');
    // is the file variable a full path?  If not, get path from registry.
    var batsample = /^\w\:\\/.test(file)
        ? file
        : osh.RegRead('HKLM\\SOFTWARE\\Wow6432Node\\BI\\Science\\AB')
        + '\\' + file;
    osh.Run(devenv + ' /Command "Edit.Goto ' + line + '" "'
        + batsample + '"');
}
</script>
</head>
<body>
<h3>Run a Program</h3>
<p>Click this to go to line 10 of helloWorld.cpp.
<button onclick="Goto(10, 'examples\\helloWorld\\helloWorld.cpp')">Run Editor</button>
</p>
<p>Click this to go to line 20 of helloWorld.cpp.
<button onclick="Goto(20, 'examples\\helloWorld\\helloWorld.cpp')">Run Editor</button>
</p>
<p>Click this to go to line <input type="text" id="line" value="10" />
of <input type="file" id="file" />.
<button
onclick="Goto(document.getElementById('line').value, document.getElementById('file').value)">Run Editor</button>
</p>
</body>
</html> 
```

# c# - 通用列表和协/逆变

> ID：15708689
> 
> 赞同：1
> 
> 时间：2013-03-29T17:53:15.693
> 
> 标签：c#, generics, .net-4.0, covariance, contravariance

假设我有一个泛型`List<ICalculation>`，它用作我的应用程序中所有预定义计算的存储库......

我有一个名为的通用接口`ICalculation<T, U>`，它实现了更基本的`ICalculation`.

```
public interface ICalculation
{
    string Identifier { get; }
    object Calculate(object inputData);
}

public interface ICalculation<in TIn, out TOut> : ICalculation
{
    string Identifier { get; }
    TOut Calculate(TIn inputData)
} 
```

我还有一个实现这个接口的抽象类 CalculationBase

```
public abstract class CalculationBase<TIn, TOut> : ICalculation<in TIn, out TOut>, ICalculation
{
    public abstract string Identifier { get; }
    public abstract Func<TIn, TOut> Calculation { get; }
    public virtual TOut Calculate(TIn inputData)
    {
        return Calculate(inputData, Calculation);
    }
    virtual object ICalculation.Calculate(object inputData)
    {
        return (TOut)calculation((TIn)inputData);
    }
    public static TOut Calculate(TIn inputData, Func<TIn, TOut> calculation)
    {
        if (calculation == null || inputData == null)
            return default(TOut);

        return calculation(inputData);
    }
} 
```

所以，现在我有一大堆计算，它们在一些输入上实现了 CalculationBase 函数......一个例子：

```
public sealed class NumberOfBillableInvoices : CalculationBase<IClientAccount, int>
{
    public override string identifier { get { return "@BillableInvoiceCount"; } }
    public override Func<IClientAccount, int> Calculation
    {
        get { return inputData => inputData.Invoices.Count(i => i.IsBillable); }
    }
} 
```

每个计算都针对特定类型的对象，并根据计算的性质返回不同的输出。例如：货币计算可能会返回小数，计数器可能会返回整数或长整数等。

我有一个计算存储库，它会在应用程序负载时自行加载，当必须评估公式时，计算引擎会获取正在查询的对象 - 在这个例子中，如果我们有一些具体的类型实例`IClientAccount`和我们希望针对它评估一些公式 - 例如，对前 5 个发票之后的每张发票征收 1.20 美元：`"Math.Max(@BillableInvoiceCount - 5, 0) * $1.20"`。引擎会抓取所有 TIn 类型为 IClientAccount 的计算，并将计算与公式中找到的令牌（即`@BillableInvoiceCount`）相匹配。然后一些计算引擎，如 NCalc、FLEE 或其他计算引擎将评估最终方程。

所以，我的问题是我不希望遍历*每个*计算来寻找正确的标记——实际上，如果标记跨越多个对象类型，它们可能会发生冲突。例如，我可能想在不同的上下文中使用相同的标记来表示不同的事物。如果我可以将存储库中的计算范围缩小到 TIn 与我试图计算的对象类型匹配的那些，那会更容易。

在这一点上，我有几条思路——

1）。我可以创建一个仅编组对象的 TIn 部分的存储库吗？我认为这个问题的答案很可能，不......但如果有可能，我没有第一个线索如何实现这个 - 有没有人有任何想法？

2）。有没有办法在我的存储库中查询 TIn 与我正在查询的对象的类型匹配的所有计算？如果是这样，怎么做？

3）。我是否有多个存储库基于我计算的所有 TIn/TOut 组合......如果是这样，我如何将正确的存储库与我正在查询的对象结合起来？因为我仍在尝试仅基于 TIn 部分匹配存储库...

4）。让我的所有计算都返回双精度而不是允许它们返回不同的类型，然后我的存储库可以只输入输入类型，从而使它们更简单......但是虽然这很简单，但从语义上讲，它只是感觉不对。

想法？

提前干杯:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:24:54.027

如果你知道一切都来自`CalculationBase<,>`，我想你可以这样做：

```
// can also be made an extension method
static bool HasCorrectInType(ICalculation calc, Type desiredInType)
{
  var t = calc.GetType();
  do
  {
    if (t.IsGenericType && t.GetGenericTypeDefinition() == typeof(CalculationBase<,>))
      return t.GetGenericArguments()[0].IsAssignableFrom(desiredInType);
    t = t.BaseType;
  } while (t != null)

  throw new Exception("The type " + calc.GetType() + " not supported");
} 
```

然后像这样使用它：

```
List<ICalculation> repository = XXX;
var matches = repository.Where(c => HasCorrectInType(c, type)); 
```

**编辑：**新想法：如果你放置一个新属性：

```
public Type InType
{
  get { return typeof(TIn); }
} 
```

进入你的抽象类`CalculationBase<TIn, TOut>`，并将这个属性添加到你的非泛型接口`ICalculation`，那么你就不必遍历基类，但可以`calc.InType.IsAssignableFrom(desiredInType)`直接说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:17:59.947

请记住，泛型是编译时工件，如果您想使用它们，您需要在编写时知道您想要什么类。如果您需要运行时检查，那么非通用方法可能是最好的。

假设您知道您有正确的类型，您的对象 -> 对象重载应该可以正常工作。如果映射失败，.NET 框架将抛出​​异常，因此您不必担心那里的静默失败。

> 1）。我可以创建一个仅编组对象的 TIn 部分的存储库吗？我认为这个问题的答案很可能，不......但如果有可能，我没有第一个线索如何实现这个 - 有没有人有任何想法？

编组是指基础数据的转换，在这种情况下，您可以简单地传递原始对象，因为您的`ICalculation.Calculate`方法会为您进行转换。您可能遇到的唯一问题是 if`TIn`是一个值类型并且您传入一个 null （在这种情况下您的`Calculate`null 处理将不会发生）

> 2）。有没有办法在我的存储库中查询 TIn 与我正在查询的对象的类型匹配的所有计算？如果是这样，怎么做？

我会尝试使用非通用版本，除非你想要更干净的异常树，否则它应该在这种情况下完成这项工作。

> 3）。我是否有多个存储库基于我计算的所有 TIn/TOut 组合......如果是这样，我如何将正确的存储库与我正在查询的对象结合起来？因为我仍在尝试仅基于 TIn 部分匹配存储库...

如果你想这样做，诀窍就是让你的保存方法只保存`TIn`而不是两者兼而有之。例如 a `Dictionary<Type,ICalculation>`where the `Type`is `TIn`。

> 4）。让我所有的计算返回双精度而不是允许它们返回不同的类型，然后我的存储库可以输入到输入类型，使它们更简单......但是虽然这很简单，但从语义上来说，它只是感觉不对。

这里要注意的一件事是，我的建议仅在您没有在方法调用之间进行任何转换时才有效。如果您有一个`int`in`object`并且您尝试将其转换为 a`double`它将失败。

您可以通过调用而不是直接转换来避免这种`Convert.ChangeType`情况。它会像这样工作：

```
object ICalculation.Calculate(object inputData)
{
    if (inputData == null && typeof(TIn).IsValueType)
        return default(TOut);
    return Calculate((TIn)Convert.ChangeType(inputData, typeof(TIn));
} 
```

请注意该方法的一些更改：

*   我`null`为值类型添加了一个显式处理程序，因为`Convert.ChangeType`它只会引发异常。
*   如果它被重载，我称之为通用形式`Calculate`。
*   我把它设为非虚拟的，除非你真的有充分的理由，否则你真的不应该重载这个方法，因为它只是提供了两个接口的对称性。
*   我不转换结果。两者`calculation`和`Calculate`都保证返回`TOut`，因此转换是多余的。
*   添加`ChangeType`它可以让您静默地处理将 a 传递`int`给 a `decimal`。

请注意， 有一个危险`ChangeType`，它将类似于显式强制转换。无论您的数据发生什么变化，它都会尽最大努力进行转换。似乎溢出将按预期处理，但截断会静默发生。

如果您有类似的情况，那么主要的一点是测试您的边缘情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:20:56.940

我认为应该选择最简单的解决方案。您可以使用反射来获取特定类型，或者在所有情况下都返回 double。如果它是一个密集的数据处理，尝试查找特定类型可能会减慢它的速度，因此返回一个双精度或整数是完全可以的。

# java - 删除字符串数组中的位置

> ID：15708690
> 
> 赞同：0
> 
> 时间：2013-03-29T17:53:20.890
> 
> 标签：java, arrays, string, split

您好，我是 Java 新手，遇到了麻烦。

我的程序在 Jframe 中打印字符串。我生成了一个名为 v 的字符串数组。v[0] 始终为空。我请求用户输入以删除数组 v 的一个位置，我称之为 numberdel。如果我有一个数组

> v[0]=[null] v[1]=[hello] v[2]=[my name is] v[3]=[john] and if numberdel=2

最终结果应该是

> v[0]=[null] v[1]=[你好] v[2]=[约翰]

我没有成功，所以我创建了一个名为 b 的新数组。但它仍然没有像想要的那样工作......

```
public static
(...)

String[] b = new String[v.length-1];

boolean jump = false;

for(int j=1; j<b.length; j++){
    if(jump==false){
        if(j != numberdel){
            b[j] = v[j];
        }
        else jump = true;
    }
    else{
        b[j] = v[j+1];
    }
    (...)//action for every cycle
}
(...) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:02:39.250

当 时`j == numberdel`，您的循环将设置`jump`为`true`并跳过该`else`语句。

我建议不要使用该`jump`变量，因为它基本上是假`j < numberdel`的，否则是真的。

```
for(int j = 1; j < b.length; j++)
{
    if (j < numberdel)
        b[j] = v[j];
    else
        b[j] = v[j + 1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:11:24.363

你可以在单个数组本身中完成你的任务......如下......

```
void delet(int numberdel)
{
     for(int i=numberdel ; i< v.length ;i++)
        v[i] = v[i+1];

} 
```

我建议如果你可以在一个数组中做同样的事情，那么为什么要浪费空间......你做的很好，但我想这更好......希望它对你有用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:13:39.607

使用`System.arrayCopy`从数组开始`v`。`numberdel`是要删除的从 0 开始的项目。

```
String[] b = new String[v.length-1];

System.arrayCopy(v, 0, b, 0, numberdel);
System.arrayCopy(v, numberdel + 1, b, numberdel, v.length - numberdel); 
```

# django - 如何访问模板中的自定义会话属性

> ID：15708691
> 
> 赞同：0
> 
> 时间：2013-03-29T17:53:40.930
> 
> 标签：django

我无法访问存储在会话中的值：

# 视图.py

```
...
    request.session['content_lang_code'] = request.GET.get('lang') 
```

# base.html 模板

```
</body>
<p>Hello {{ request.user.username }} your selected content language is:
    session.content_language_code {{ session.content_language_code }} <br>
    request.session.content_language_code {{ request.session.content_language_code }}
</p> 
```

呈现用户名时，不会呈现 content_language_code。调试器显示 content_language_code 在 session._session 中。我也尝试了 session.get('content_language_code') ，但这也没有用。

从模板中检索会话属性的正确方法是什么？

（调试屏幕截图[http://lcrfiles.hoerbe.at/stuff/screenshot2013-03-29.png](http://lcrfiles.hoerbe.at/stuff/screenshot2013-03-29.png)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:59:47.617

您使用密钥将其放入会话中，`content_lang_code`但尝试使用不同的密钥访问它`content_language_code`。如果你改变`{{ request.session.content_language_code }}`它`{{ request.session.content_lang_code }}`应该工作。

# css - 将多个 css 动画组合成一个整体动画

> ID：15708695
> 
> 赞同：40
> 
> 时间：2013-03-29T17:53:55.950
> 
> 标签：css, css-animations

我有一组动画，我一个接一个地排队以创建更大的整体动画。为了简单起见，我创建了一个简单的小提琴来演示我的意思，但它是我想要实现的简化版本（底部的代码）......

[http://jsfiddle.net/UnsungHero97/qgvrs/5/](http://jsfiddle.net/UnsungHero97/qgvrs/5/)

我想要做的是将所有这些组合成一个动画而不是几个。目前，我添加了一个类来触发动画的不同阶段，但我想做的是**只**添加一个类来启动动画，然后它就走了。

我不知道如何将动画组合成一个，因为它们适用于不同的元素。我对 CSS3 动画还很陌生，所以可以这样做吗？

有什么想法吗？

* * *

## 编码

HTML

```
<div class="outside">
    <div class="inside"></div>
</div> 
```

CSS

```
.outside {
    border: 1px solid magenta;
    height: 100px;
    width: 100px;
    position: relative;
}

.inside {
    border: 1px solid skyblue;
    height: 60px;
    width: 60px;
    margin-top: -31px;
    margin-left: -31px;
    position: absolute;
    top: 50%;
    left: 50%;
}

@-webkit-keyframes scale-in {
  0% {
    -webkit-transform: scale(0);
  }
  100% {
    -webkit-transform: scale(1);
  }
}

@-webkit-keyframes bounce {
  0% {
    -webkit-transform: scale(1);
  }
  25% {
    -webkit-transform: scale(.8);
  }
  50% {
    -webkit-transform: scale(1);
  }
  75% {
    -webkit-transform: scale(.9);
  }
  100% {
    -webkit-transform: scale(1);
  }
}

@-webkit-keyframes rotate {
    0% {
    -webkit-transform: rotate(0deg);
    }
    100% { 
    -webkit-transform: rotate(360deg);
    }
}

.bounce {
  -webkit-animation-duration: 500ms;
    -webkit-animation-name: bounce;
}

.animate {
    -webkit-animation-delay: 0s;
    -webkit-animation-fill-mode: forwards;
    -webkit-animation-timing-function: ease;
    -webkit-transform: translateZ(0);
}

.click {
    border: 1px solid skyblue;
    -webkit-animation-duration: 1000ms;
    -webkit-animation-name: rotate;
}

.click .inside {
    border: 1px solid magenta;
    -webkit-animation-duration: 1000ms;
    -webkit-animation-name: rotate;
}

.clicked {
    border: 1px solid magenta;
}

.clicked .inside {
    border: 1px solid skyblue;
    -webkit-animation-duration: 750ms;
    -webkit-animation-name: scale-in;
} 
```

JS

```
$(document).ready(function() {
    $(document).click(function() {
        var jqElement = $('.outside');

        jqElement
          .off()
          .addClass('animate')
          .addClass('bounce');

        jqElement.on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd', function(event) {

          event.stopPropagation();

          jqElement
            .removeClass('bounce')
            .removeClass('animate')
            .off()
            .addClass('animate')
            .addClass('click');

          jqElement.on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd', function(event) {

            event.stopPropagation();

            jqElement
              .removeClass('click')
              .removeClass('animate')
              .off()
              .addClass('clicked');

            setTimeout(function() {
              jqElement.removeClass('clicked');
            }, 500);
          });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-29T18:09:30.463

一个动画一个元素是当动画改变单个元素的样式时它是如何工作的。但是，您可以对动画应用延迟以实现您想要的效果，从而使您几乎可以将所有内容移出 JS。

这个例子合并了你`.outside` 的`.inside`动画，基本上用逗号将它们附加到规则中，你的 JS 现在只需添加这样的类`-webkit-animation-name: button-bounce, rotate, skyblue;`

[jsFiddle](http://jsfiddle.net/sEKnC/3/)

## CSS

```
.outside.animate {
    -webkit-animation-delay: 0s, .5s, .5s;
    -webkit-animation-duration: 500ms, 1000ms, 1000ms;
    -webkit-animation-name: button-bounce, rotate, skyblue;
}

.animate {
    -webkit-animation-fill-mode: forwards;
    -webkit-animation-timing-function: ease;
    -webkit-transform: translateZ(0);
}

.outside.animate .inside {
    -webkit-animation-delay: .5s, .5s, 1.5s;
    -webkit-animation-duration: 1000ms, 1000ms, 750ms;
    -webkit-animation-name: rotate, magenta, scale-in;
} 
```

### 新动画

```
@-webkit-keyframes magenta {
    0% { border: 1px solid magenta; }
    99.99% { border: 1px solid magenta; }
    100% { border: 1px solid skyblue; }
}
@-webkit-keyframes skyblue {
    0% { border: 1px solid skyblue; }
    99.99% { border: 1px solid skyblue; }
    100% { border: 1px solid magenta; }
} 
```

## JavaScript

```
$(document).ready(function() {
    $(document).click(function() {
        var count = 0;
        var jqElement = $('.outside');
        if (!jqElement.hasClass('animate')) {
            jqElement.addClass('animate');
            jqElement.on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd', function(event) {
                count++;
                if (count >= 6) {
                    jqElement.off('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd');
                    jqElement.removeClass('animate');
                }
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-07-22T12:42:19.943

您可以在速记属性中使用逗号分隔的多个动画：

```
.selector
{
    animation: animation-name 2s infinite,
    other-animation-name 1s;
} 
```

# html - 背景附件 CSS 属性不会显示在不同的 html 元素上

> ID：15708701
> 
> 赞同：2
> 
> 时间：2013-03-29T17:54:21.030
> 
> 标签：html, css, background, shadow, border-shadow

我正在学习`background-attachment`CSS 属性，但由于某些原因，它不会显示在 textarea、图像等上。

这是我的 HTML：

```
<div class="scrollbox">
    <ul>
        <li>Ah! Scroll below!</li>
        <li>
            <textarea rows="6" cols="50"></textarea>
        </li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
        <li>9</li>
        <li>10</li>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
        <li>9</li>
        <li>10</li>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>The end!</li>
        <li>No shadow there.</li>
    </ul>
</div> 
```

这是我的CSS：

```
.scrollbox {
    overflow: auto;
    width: 500px;
    max-height: 500px;
    margin: 50px auto;

    background:
        /* Shadow covers */
        linear-gradient(white 30%, rgba(255,255,255,0)),
        linear-gradient(rgba(255,255,255,0), white 70%) 0 100%,

        /* Shadows */
        radial-gradient(50% 0, farthest-side, rgba(0,0,0,.2), rgba(0,0,0,0)),
        radial-gradient(50% 100%,farthest-side, rgba(0,0,0,.2), rgba(0,0,0,0)) 0 100%;
    background:
        /* Shadow covers */
        linear-gradient(white 30%, rgba(255,255,255,0)),
        linear-gradient(rgba(255,255,255,0), white 70%) 0 100%,

        /* Shadows */
        radial-gradient(farthest-side at 50% 0, rgba(0,0,0,.2), rgba(0,0,0,0)),
        radial-gradient(farthest-side at 50% 100%, rgba(0,0,0,.2), rgba(0,0,0,0)) 0 100%;
    background-repeat: no-repeat;
    background-color: white;
    background-size: 100% 40px, 100% 40px, 100% 14px, 100% 14px;

    /* Opera doesn't support this in the shorthand */
    background-attachment: local, local, scroll, scroll;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T14:15:48.960

阴影不会出现在 div 内的任何内容之上，因为它是背景图像。它看起来只是在文本上方，因为它们是相同的颜色，如果您更改文本颜色，您会看到文本也在其上方。

如果您将 div.scrollbox 可视化为文字框，而将 textarea 可视化为第一个内部的较小框。较小的盒子会挡住您对大盒子底部绘制的任何东西的视线。

# git - Windows Git 到 Linux 远程

> ID：15708705
> 
> 赞同：0
> 
> 时间：2013-03-29T17:55:01.140
> 
> 标签：git

我不确定我做错了什么。过去我曾经使用 Zend Studio，它为我处理了与 Git 相关的所有事情，直到现在仍然如此。但我现在正在放弃 Zend Studio 并手动做事。

我当前的设置是 Windows 8，我已经在我的机器上安装了 Git Windows 二进制文件。我能够毫无问题地提交到本地存储库。

在我的远程 Linux 机器上，我在那里设置了存储库，我可以毫无问题地从存储库中提取。

在 Linux 机器上，我像这样启动 Git： `/usr/local/git/libexec/git-core/git-daemon --verbose --export-all --base-path=/usr/local/git/repository --base-path-relaxed --listen=git.sitegoodies.net --enable=receive-pack`

它返回`[1619] Ready to rumble`

在我的 Windows 机器上，我进行了一些更改，现在我想将它们推送到我的远程存储库，我这样做：`git push git://git.sitegoodies.net/test.git master`

我可以看到以下内容：

```
$ git push git://git.sitegoodies.net/test.git master
Counting objects: 6, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (6/6) 
```

但现在它只是坐在那里。所以我从启动 Git 时开始查看我的 linux 控制台，我可以看到：

```
[1619] Ready to rumble
[1622] Connection from [fd35:4776:6804:1::1]:58695
[1622] Extended attributes (26 bytes) exist <host=git.sitegoodies.net>
[1622] Request receive-pack for '/test.git' 
```

所以对我来说，看起来一切都应该正常工作。除了一切都坐在那里，直到我 Ctrl + C 取消它推送到我的删除存储库。我真的不知道出了什么问题，所以我希望这里有人有一个我可以尝试的想法。

我没有任何防火墙。

我的存储库位于 /usr/local/git/repository 要创建 test.git：

*   我将 CD 放入我的存储库目录，`mkdir test.git`
*   CD 进入 test.git 目录并运行`git --bare init`

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:33:50.883

不要那样做——[在 Git for Windows 中](http://code.google.com/p/msysgit/issues/detail?id=457)[推送到`git-daemon`](http://code.google.com/p/msysgit/issues/detail?id=457)被破坏。迄今为止为调试此问题所做的所有尝试都失败了。

所以你最好的选择是使用 SSH 传输，我想——[这并不难](http://nathanj.github.com/gitguide/index.html)。

# java - 如何使用 Mockito 测试 POST 方法

> ID：15708708
> 
> 赞同：2
> 
> 时间：2013-03-29T17:55:19.377
> 
> 标签：java, web-services, unit-testing, mockito

嗨有以下测试，我不能让它工作：

```
protected HttpClient mHttpClientMock;
protected HttpPost mHttpPostMock;
protected HttpResponse mHttpResponseMock;
protected StatusLine mStatusLineMock;
protected HttpEntity mHttpEntityMock;
protected ContentResolver mResolver;

    protected void setUp() throws Exception {
    super.setUp();
    // Create mocks.
    mHttpPostMock = Mockito.mock(HttpPost.class);
    mHttpClientMock = Mockito.mock(HttpClient.class);
    mHttpResponseMock = Mockito.mock(HttpResponse.class);
    mStatusLineMock = Mockito.mock(StatusLine.class);
    mHttpEntityMock = Mockito.mock(HttpEntity.class);

    prepareMocks();

    // Obtain Content Resolver.
    mResolver = getContext().getContentResolver();
}

protected void prepareMocks() throws IOException {
    // Create mocked response.
    // Define expected calls.
    Mockito.when(mHttpClientMock.execute(Mockito.isA(HttpPost.class)));
//Mockito.when(mHttpResponseMock.getStatusLine()).thenReturn(mStatusLineMock);
//  Mockito.when(mStatusLineMock.getStatusCode()).thenReturn(HttpStatus.SC_OK);
//  Mockito.when(mHttpResponseMock.getEntity()).thenReturn(mHttpEntityMock);
    Mockito.when(mHttpClientMock.execute(Mockito.mock(Markup.class)));
 //  Mockito.when(mHttpEntityMock.writeTo(Mockito.mock(Markup.class));
} 
```

我如何准备我的（Markup.class）帖子，以便稍后进行测试。

非常感谢。致以最诚挚的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T02:52:25.673

就是这个！！！

```
 InputStream jsonResponse = createJsonResponse();
    // Define expected calls.
    Mockito.when(mHttpClientMock.execute(Mockito.isA(HttpPost.class))).thenReturn(mHttpResponseMock);
    Mockito.when(mHttpResponseMock.getStatusLine()).thenReturn(mStatusLineMock);
    Mockito.when(mStatusLineMock.getStatusCode()).thenReturn(HttpStatus.SC_OK);
    Mockito.when(mHttpResponseMock.getEntity()).thenReturn(mHttpEntityMock);
    Mockito.when(mHttpEntityMock.getContent()).thenReturn(jsonResponse); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:39:20.560

使用 Mockito 测试 Web 服务是可行的，但如果你想测试动态行为，最好使用[RestAssured](https://code.google.com/p/rest-assured/)测试框架。它主要用于测试 REST Web 服务，但也可用于测试“正常”HTTP 表单帖子。

如果你用 Mockito 模拟一切，你将主要测试你的模拟，而不是真正的行为。

使用 Mockito 进行测试意味着您创建模拟 HTTP 请求，然后将其传递给使用该请求的某个方法。您可以创建一些断言来检查方法是否正确解析请求并给出正确的结果。

# c# - WPF：当您按下此 ListItem 上的按钮时，ListItem 未获得焦点

> ID：15708715
> 
> 赞同：0
> 
> 时间：2013-03-29T17:55:53.413
> 
> 标签：c#, wpf, button, datatemplate, wpf-4.0

我有`ListBox`一个`DataTemplate`。模板上有一个`Button`。列表中的每个项目都显示实体。

```
<ListBox Grid.Column="0"
             x:Name="ThemesList"
             ItemsSource="{Binding Themes}"
             HorizontalAlignment="Left"
             VerticalAlignment="Top"
             SelectedItem="{Binding SelectedTheme}" 
             ItemTemplate="{StaticResource ThemeListTemplate}"/>

<DataTemplate x:Key="ThemeListTemplate">
    <Grid Grid.Column="1"
          Grid.Row="0"
          HorizontalAlignment="Right" 
          Margin="10">

          <Grid.RowDefinitions>
              <RowDefinition/>
              <RowDefinition/>
          </Grid.RowDefinitions>

          <Button Grid.Row="0" 
                  HorizontalAlignment="Left"
                  Style="{StaticResource ElementButton}"
                  Command="{Binding Path=DataContext.ThemeEditorViewModel.OpenThemeEditorCommand, ElementName=ThemesBacklog}"
                  CommandParameter="{Binding Path=SelectedItem, ElementName=ThemesList}">

                <TextBlock Text="Edit"/>
          </Button>

        <Button Grid.Row="1" 
                HorizontalAlignment="Left"
                Style="{StaticResource ElementButton}"
                Command="{Binding Path=DataContext.ThemeDeleteCommand, ElementName=ThemesBacklog}"
                CommandParameter="{Binding Path=SelectedItem, ElementName=ThemesList}">

                <TextBlock Text="Delete"/>
        </Button>
    </Grid>
</DataTemplate> 
```

当您在命令中单击时`Button`传递属性值`SelectedItem`。当您单击`ListItem`然后单击`Button`- 一切都很好。当我立即单击`Button`命令中的 - 时，将传递 null。当您按下位于此的按钮时，它`ListItem`不会获得焦点`ListItem`。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:25:18.903

您可以检查触发器中的`IsKeyboardFocusWithin`属性`ListBoxItems`，以确定子项（如您的按钮）是否具有焦点，`IsSelected`如果是这种情况则设置为 true。

你可以这样设置`ItemContainerStyle`：

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Style.Triggers>
            <Trigger Property="IsKeyboardFocusWithin" Value="True">
                <Setter Property="IsSelected" Value="True" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListBox.ItemContainerStyle> 
```

# java - 如何制作 JavaFX 小部件

> ID：15708717
> 
> 赞同：6
> 
> 时间：2013-03-29T17:55:55.637
> 
> 标签：java, javafx-2, javafx, fxml

可以在桌面上贴一个舞台吗？

我想把我的应用程序当作小部件，所以当它启动时，它应该显示在桌面的正上方，而不是在可能打开的当前应用程序的前面。

小部件的另一个条件是它在任务栏中没有条目。这也可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T09:24:04.903

我用 JavaFX 2.2 尝试过，结果如下：

> 因此，当它启动时，它应该显示在桌面的正上方，而不是在可能打开的当前应用程序的前面

调用[stage.toBack](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#toBack%28%29)将在任何其他窗口后面放置一个舞台。

我能够让一个窗口在大多数情况下始终保持在其他窗口后面（至少在 Mac 上）。为此，我在[时钟应用程序](https://gist.github.com/jewelsea/3388637)中显示舞台之前添加了几个侦听器和过滤器。

```
stage.focusedProperty().addListener(new ChangeListener<Boolean>() {
  @Override
  public void changed(ObservableValue<? extends Boolean> observableValue, Boolean wasFocused, Boolean focused) {
    stage.toBack();
  }
});

stage.addEventFilter(MouseEvent.ANY, new EventHandler<MouseEvent>() {
  @Override
  public void handle(MouseEvent mouseEvent) {
    stage.toBack();
  }
}); 
```

现有的要求是能够设置[舞台以始终处于领先地位](https://javafx-jira.kenai.com/browse/RT-153)。您可以创建一个新的相应请求，以使某个阶段始终落后。

> 小部件的另一个条件是它在任务栏中没有条目

在 Windows 上，我认为如果您[将舞台样式初始化](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#initStyle%28javafx.stage.StageStyle%29)为[StageStyle.UTILITY](http://docs.oracle.com/javafx/2/api/javafx/stage/StageStyle.html#UTILITY)，那么 Windows 不会在 Windows 任务栏中显示舞台图标。

I tried a couple of different stage styles on OS X and a little Java cup icon would always show in the OS X dock when I ran the app and (unlike windows) setting the [icons for the stage](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#getIcons%28%29) did not get rid of the Java cup icon. Perhaps if you created a [self-contained](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm) OS X application you could turn the icon off for it during the packaging step, or set the icon to a transparent image so that it would not be visible to the user.

You could also create a feature request for this (separate from the always to back one) in the [JavaFX issue tracker](https://javafx-jira.kenai.com). If you create any issues related to this, explain your use case and link back to this question.

# php - DOMElement 空节点值

> ID：15708718
> 
> 赞同：0
> 
> 时间：2013-03-29T17:56:01.240
> 
> 标签：php, html, parsing, domdocument

我有一个项目，我需要解析一个 xml 页面并挑选一些数据。domDocument 类看起来很完美，我尝试了一些基本测试，看看它是否能达到我想要的效果。

这是我目前的代码：

```
$dom = new domDocument;
$html = file_get_contents('http://wadmag.com/feed.xml');
$previous_value = libxml_use_internal_errors(TRUE);
$dom->loadHTML("$html");
libxml_clear_errors(); //This here is to clear the errors caused by the page not
libxml_use_internal_errors($previous_value); // being proper html

$links = $dom->getElementsByTagName('item');
echo "Found : ".$links->length. " items";   

foreach ($links as $link) {
    echo $link->nodeValue."<br>";
} 
```

现在的问题是，当我加载页面时，我收到消息“找到：21 个项目”，这意味着 getElementsByTagName 返回了一个列表，但是当我尝试显示列表的内容时，什么都没有显示，好像 nodeValue是空的。

更奇怪的是，如果我用标题或描述替换 getElementsByTagName 中的“链接”，它会按应有的方式显示所有内容。似乎无法理解为什么，我能看到的唯一区别是它可能是正确的 html 而不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-25T01:40:28.000

如果您解析 XML，请使用`$dom->loadXML($response)`而不是`$dom->loadHtml($response)`

# ios - Facebook SDK 的 Track Install 来自 Facebook

> ID：15708721
> 
> 赞同：1
> 
> 时间：2013-03-29T17:56:17.440
> 
> 标签：ios, objective-c, facebook-ios-sdk

我正在使用 facebook iOS 广告将安装发送到我的应用程序。

我正在使用以下代码来跟踪安装。

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
    [FBSession.activeSession handleDidBecomeActive];
    [FBSettings publishInstall:[FBSession defaultAppID]];
} 
```

有没有办法跟踪新安装实际上来自 Facebook？我想将它插入 Flurry 并跟踪我获得的用户质量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:57:36.097

通常，当您跟踪广告提供商（无论是 facebook、graystripe、adcolony 等）时，他们会为每台点击广告的设备记录某种设备标识符。过去它是 UDID，但向前发展，Apple 正在推动他们的广告商标识符。

您需要为安装了您的应用程序的每台设备存储自己的标识符列表，然后与点击广告的设备列表进行交叉引用。广告提供商应该能够提供此列表，包括 Facebook。

我不确定 Flurry 是否支持由广告商创建同类群组，但我知道 Kontagent 有一些管理工具，可让您从广告网络中添加报告以启用供应商跟踪。或者，您总是可以自己滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:46:07.240

不可能。您可以检查用户是否喜欢您的粉丝专页或类似的东西，但您不知道用户打开 AppStore 的链接来自何处。

一种可能性可能是不直接将广告链接到 AppsStore，而是通过可识别用户点击链接的私有代理将其链接，如果在此之后不久，用户下载了您的应用，则可能是 Facebook 用户点击了广告

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T05:45:40.253

您所说的是归因于移动广告活动的安装来源。为此，您需要能够确定安装该应用程序的人与点击相关广告（在 Facebook 或任何其他广告提供商上）的人相同。为了做到这一点，您需要一个唯一标识用户的标识符——过去这是 UDID，现在它正在转向广告标识符。

如果您在用户出于任何原因安装应用程序时向他们报告，许多广告提供商会为您计算这个数字，方法是将您发送给他们的所有安装标识符与点击其广告的用户的标识符进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T15:18:44.373

我想你已经阅读了 SDK 文档。
如果您转到*[设置您的应用以衡量移动应用安装广告](https://developers.facebook.com/docs/tutorials/mobile-app-ads/#u_0_7)*，您可以看到此信息存储在您的 [应用仪表板](https://developers.facebook.com/apps)中。

在此[链接](http://devsbuild.it/resources/type/article/measuring-facebook-mobile-app-install-ads)中清楚地解释了“应用安装广告”的工作原理以及如何管理此信息。

遗憾的是，无法直接从您的应用中导出此信息以发送到 Flurry。

# python - Python 包依赖树

> ID：15708723
> 
> 赞同：21
> 
> 时间：2013-03-29T17:56:20.810
> 
> 标签：python, dependency-management, pypi

我想分析一下Python包的依赖树。我怎样才能获得这些数据？

我已经知道的事情

1.  `setup.py`有时包含一个`requires`列出包依赖项的字段
2.  PyPi 是 Python 包的在线存储库
3.  PyPi 有一个 API

我不知道的事情

1.  PyPi 上很少有项目（大约 10%）明确列出了该`requires`领域的依赖关系，但`pip/easy_install`仍然设法下载正确的包。我错过了什么？例如，用于统计计算的流行库`pandas`, 没有列出`requires`但仍设法安装`numpy`,`pytz`等。有没有更好的方法来自动收集完整的依赖项列表？
2.  某处是否有预先存在的数据库？我在重复现有的工作吗？
3.  是否存在具有分发系统（R、Clojure 等...）的其他语言的类似、易于访问的数据库？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-29T17:57:28.993

您应该查看该`install_requires`字段*，*请参阅[新的和更改的`setup`关键字](http://pythonhosted.org/setuptools/setuptools.html#new-and-changed-setup-keywords)。

`requires`被认为是一个过于模糊的字段，无法依赖依赖项安装。此外，还有运行测试所需的依赖项`setup_requires`和字段。`test_requires``setup.py`

当然，依赖图之前已经分析过了；从[Olivier Girardot 的这篇博客文章中得到了](http://ogirardot.wordpress.com/2013/01/05/state-of-the-pythonpypi-dependency-graph/)这个奇妙的图像：

[![PyPI 依赖项](../Images/cdbe5d18a5241d52d26d7136359f4cd9.png)](http://ogirardot.github.io/meta-deps/)
该图像链接到图形的交互式版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:05:55.613

使用[pip 之](https://pypi.python.org/pypi/pip)类的工具，您可以列出每个包的所有要求。

命令是：

```
pip install --no-install package_name 
```

您可以在脚本中重用 pip 的一部分。负责解析需求的部分是 module [`pip.req`](https://github.com/pypa/pip/tree/develop/pip/req)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-27T03:07:20.793

以下是使用 python`pip`包以编程方式执行此操作的方法：

```
from pip._vendor import pkg_resources  # Ensure pip conf index-url pointed to real PyPi Index

# Get dependencies from pip 
package_name = 'Django'
try:
    package_resources = pkg_resources.working_set.by_key[package_name.lower()] # Throws KeyError if not found
    dependencies = package_resources._dep_map.keys() + ([str(r) for r in package_resources.requires()])
    dependencies = list(set(dependencies))
except KeyError:
    dependencies = [] 
```

以下是如何从 PyPi API 获取依赖项：

```
import requests
import json
package_name = 'Django'
# Package info url
PYPI_API_URL = 'https://pypi.python.org/pypi/{package_name}/json'
package_details_url = PYPI_API_URL.format(package_name=package_name)
response = requests.get(package_details_url)
data = json.loads(response.content)
if response.status_code == 200:
    dependencies = data['info'].get('requires_dist')
    dependencies2 = data['info'].get('requires')
    dependencies3 = data['info'].get('setup_requires')
    dependencies4 = data['info'].get('test_requires')
    dependencies5 = data['info'].get('install_requires')
    if dependencies2:
        dependencies.extend(dependencies2)
    if dependencies3:
        dependencies.extend(dependencies3)
    if dependencies4:
        dependencies.extend(dependencies4)
    if dependencies5:
        dependencies.extend(dependencies5)
    dependencies = list(set(dependencies)) 
```

您可以使用递归来调用依赖项的依赖项以获得完整的树。干杯!

# asp.net - OLEDDB 和 Web 服务器

> ID：15708724
> 
> 赞同：1
> 
> 时间：2013-03-29T17:56:22.040
> 
> 标签：asp.net, webforms, oledb

好的，我对 OLEDB 有疑问。我已经安装了“AccessDataBaseEngine.exe”，并且可以将 Excel 文件上传到本地服务器上的 Gridview。当我尝试在我的在线 Web 应用程序（使用 Windows Azure）上上传时，我收到以下错误：“ **'Microsoft.ACE.OLEDB.1.0' 提供程序未在本地计算机上注册。** ”这对我没有任何意义至于为什么它不起作用，在搜索网络后，每个人都建议安装 AccessDataBaseEngine 2007（我做了），如上所述，它只能在本地服务器上运行。任何人都知道如何解决这个问题？

提前致谢。

# objective-c - xcode 导入文件名冲突

> ID：15708727
> 
> 赞同：1
> 
> 时间：2013-03-29T17:56:26.617
> 
> 标签：objective-c, xcode

假设我试图在一个 xcode 项目中使用一个且只有一个 3rd-party 库 - 一个非常典型的场景，看似无害。

我将包含文件的路径位置插入到项目的“头文件搜索路径”设置中。我什至还没有修改任何代码来使用库中的代码。

事实证明，该项目无法编译。

Xcode 抱怨“找不到 NSObject 的接口声明”之类的东西，这很荒谬。通过检查构建结果，抱怨的错误来自 3rd-party 库的头文件 - 它看起来像 ![在此处输入图像描述](../Images/14e5b337d252c15e003cead7a84da876.png)

因此在 Build Result 中指出 xcode 错误地认为 Foundation.h 指的是该第 3 方库的 assert.h 而不是 iOS 的内置 assert.h（第 4 个子项）

有没有办法修复#import 包含文件的文件名冲突？

（不用说，我是 obj-c 的新手-___-）

# php - PHP not resetting to LTR text after printing RTL text?

> ID：15708728
> 
> 赞同：1
> 
> 时间：2013-03-29T17:56:27.103
> 
> 标签：php, right-to-left

I need to display some RTL text inline on a LTR page.

I'm storing country names in a single field in a MySQL database in the format EnglishName (LocalLanguageName). When the local language is RTL text the output created by my PHP is broken.

For example Israel is stored in the database as:

```
Israel (×™×©×¨××œ) 
```

My PHP code is:

```
print "<li>$row[Country], ";
print date('jS M Y',strtotime($row[StartDate]));
print "</li>\n"; 
```

Which outputs:

```
<li>Israel (ישראל), 1st Jan 2013</li> 
```

If I remove the date line the closing parenthesis and the comma are in the correct position.

If I put `"x".` in front of the date I get the expected:

```
<li>Israel (ישראל), x1st Jan 2013</li> 
```

Adding `dir="LTR"` to the `<li>` element doesn't work because the output html is incorrect.

How do I get an output of `<li>LTR name (RTL name), date</li>`?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:01:00.840

The Arabic characters set the parser into RTL mode, punctuation is ignored, letters from the English alphabet trigger the parser back into LTR mode (which is why adding the `x` character as mentioned in the OP 'fixes' the output), but numerals are still considered to be RTL so the numerals of the date are still considered to be part of the RTL string as is the punctuation `),` that gets caught up between them.

You can force the parser back into LTR mode by using the UTF-8 left to right marker:

```
print "<li>$row[Country]\xe2\x80\x8e, "; 
```

Which results in:

```
<li>Israel (ישראל)‎, 1st Jan 2013</li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T19:01:32.797

It doesn't have a lot to do with PHP, but with HTML and the Unicode bidirectional algorithm. It appears that you always put a number after the country name, and the algorithm does some magic to numbers that are adjacent to words with different directionality. Sometimes this magic is useful and sometimes not.

If your general environment is mostly English, then the simplest thing to do is to add the HTML entity &lrm; after the closing parentheses after the country name. You don't even need a condition and you can just do it after all the country names - it won't hurt after left-to-right country names.

A more elegant way to do it is to put the country name, including the part in the parentheses in the HTML tag <bdi>. It means "bi-directional isolation"; in simple terms, it's like a <span> tag, but it isolates its contents in a way that prevents the bidi magic mentioned in the beginning of the answer. Though it's more elegant, this method has a drawback: it won't work in Microsoft Internet Explorer (saw it coming?). If you don't care about Microsoft Internet Explorer too much, I suggest using <bdi>.

# php - php函数返回isset

> ID：15708731
> 
> 赞同：-3
> 
> 时间：2013-03-29T17:56:37.227
> 
> 标签：php, isset

请任何人都可以解释这一行在 PHP 中的含义

```
function UserFullName()
{
    return isset($_SESSION['name_of_user'])?$_SESSION['name_of_user']:'';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:57:45.743

如果`$_SESSION['name_of_user']`里面有东西，请使用它；否则，使用空字符串。

它使用三元运算符`?:`：

[http://en.wikipedia.org/wiki/%3F](http://en.wikipedia.org/wiki/%3F)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:59:05.630

如果设置了会话变量，则返回会话变量的值，否则返回空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:58:46.810

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php) 如果会话中设置的变量获取值，否则返回空字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:59:11.823

如果变量已在脚本中设置，则isset[函数返回 true。](http://www.php.net/manual/en/function.isset.php)所以这个函数返回`boolean`，真/假

# javascript - JSON位置存储在Javascript中

> ID：15708732
> 
> 赞同：0
> 
> 时间：2013-03-29T17:56:47.383
> 
> 标签：javascript, jquery, html, json

我正在将 JSON 数据转换为列表结构，并且我想将“AAA.BBB[0].CCC.DDD[5].EEE”格式保存为 id，因此当用户修改该列表项的内容时，它会修改与该位置关联的 JSON 数据。

例如 AAA.BBB[0].CCC.DDD[5].EEE = 123

123 是一个列表项，但我希望将 id 保存为“AAA.BBB[0].CCC.DDD[5].EEE”

是否有更好的方法将位置保存在 id 中？

*编辑：

示例代码：

JSON 数据：{"AAA":{"AAB":"Value1","AAC":"Value2","AAD":1,"AAE":"Value3","AAF":"{"ABC":"值4"}}}

Soo 列表项“Value4”的 id 将是 AAA.AAF.ABC

```
function nodeIT(obj,output){    
for (var x in obj){
    if(!(obj[x] instanceof Object)){

        //var str =JSON.stringify(obj);   // Where im stuck!
        output +="<li id='"+str+x +"'>";
        output += (x + "=" + obj[x] + "<br />");
        output +="</li>";
    }
    else if((obj[x] instanceof Object)){

        var obj1 = obj[x];
        output+="<li>" +x + "<ul>";

        output=nodeIT(obj1,output);
    }

}
output += "</ul></li>";
return output; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:42:12.807

您可以利用 jQuery 的方法，而不是使用 ID 属性并被迫使用单个字符串，`.data()`该方法可让您将 javascript 对象与 html 元素相关联。

因此，当您构建列表元素时，您可以执行以下操作：

```
var liElement = $('<li />')
    .text(x + "=" + obj[x])
    .data({
        container: obj,
        key: x
    }); 
```

然后像这样访问数据（其中`this`指的是`li`）：

```
var container = $(this).data('container');
var key = $(this).data('key');
var value = container[key];
// .. modify value
container[key] = value; 
```

请在此处查看完整示例：http: [//jsfiddle.net/h38Ec/](http://jsfiddle.net/h38Ec/)

# c# - HLSL中的奇怪数字错误

> ID：15708736
> 
> 赞同：1
> 
> 时间：2013-03-29T17:57:00.040
> 
> 标签：c#, hlsl, slimdx

我的项目有一个非常奇怪的问题。我试图用我的顶点发送一个索引号，并在 HLSL 着色器中使用这个数字。

但是，当我将此数字设置为一个值（例如 1）时，着色器会从该数字获得非常宽的频谱 - 下降到负值，介于 0-1 和 1 之间。即使我给出无意义的数字，例如 10000

（我使用 C# 和 SlimDX，这是用像素着色器 2.0 制作的，我也尝试了 3.0。）

```
 int c = 0;

        int testValue = 10000;

        for (int i = 0; i < tris.Length; i++)
        {
            vertices[c].Position = tris[i].p0;
            vertices[c].Normal = tris[i].normal;
            vertices[c].Index = testValue;
            vertices[c++].Color = Color.LightBlue.ToArgb();

            vertices[c].Position = tris[i].p1;
            vertices[c].Normal = tris[i].normal;
            vertices[c].Index = testValue;
            vertices[c++].Color = Color.LightBlue.ToArgb();

            vertices[c].Position = tris[i].p2;
            vertices[c].Normal = tris[i].normal;
            vertices[c].Index = testValue;
            vertices[c++].Color = Color.LightBlue.ToArgb();
        } 
```

这就是我创建顶点的方式。除了 Index 值之外，一切都按应有的方式工作。我得到正确的颜色，我得到正确的法线，我得到正确的位置。

这是 HLSL 代码：

```
VertexToPixel IndexedRenderedVS( float4 inPos : POSITION, float4 inColor : COLOR0, float3 inNormal : NORMAL, int inIndex : TEXCOORD0)
{
VertexToPixel Output = (VertexToPixel)0;

float4x4 xWorldViewProjection = mul(xWorld, xViewProjection);

Output.Position = mul(inPos, xWorldViewProjection);

if (inIndex < 0)
    Output.Color = float4(1, 0, 0, 1);

 if (inIndex > 0 && inIndex < 1)
     Output.Color = float4(0, 1, 0, 1);

 if (inIndex > 1)
     Output.Color = float4(0, 0, 1, 1);

 //Output.Color = inColor;

return Output;    
}

 PixelToFrame IndexedRenderedPS(VertexToPixel PSIN)

 {
 PixelToFrame Output = (PixelToFrame)0;

 Output.Color = PSIN.Color;

 return Output;
 } 
```

最后，我的 VertexFormat 结构：

```
 internal Vector3 Position;
    internal int Color;
    internal Vector3 Normal;
    internal int Index;

    internal static VertexElement[] VertexElements = new VertexElement[]
    {
        new VertexElement(0, 0, DeclarationType.Float3, DeclarationMethod.Default, DeclarationUsage.Position, 0),
        new VertexElement(0, sizeof(float) * 3, DeclarationType.Color, DeclarationMethod.Default, DeclarationUsage.Color, 0),
        new VertexElement(0, sizeof(float) * 7, DeclarationType.Float3, DeclarationMethod.Default, DeclarationUsage.Normal, 0),
        new VertexElement(0, sizeof(float) * 10, DeclarationType.Float1, DeclarationMethod.Default, DeclarationUsage.TextureCoordinate, 0),
        VertexElement.VertexDeclarationEnd
    };

    internal static VertexFormat Format
    {
        get { return VertexFormat.Position | VertexFormat.Diffuse | VertexFormat.Normal | VertexFormat.Texture1; }
    } 
```

使用此代码和一个疯狂的索引值（10000 - 我得到相同的图片，无论我给出什么值，0、1，甚至当我输入负数时。它只是不在乎我给出什么）。

我得到这张照片： ![小行星](../Images/618983b625c8dfb62a60b97e8e8ef6df.png)

有人知道我在哪里犯了错误吗？我根本找不到我放错了一些价值的地方。尝试了大量的顶点声明，改变了着色器中的所有内容——现在我正式用完了想法。

任何帮助表示赞赏。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:23:33.557

在 DirectX 中，纹理坐标始终是浮点数，通常是 float2，但有时是 float3 或 float4（您可以指定 float1，但如果这样做，您实际上会在程序集中得到一个 float2，运行时将丢弃第二个通道） . 您在 CPU 端将其输入为 int，然后在顶点描述中输入为 float1，最后在着色器中输入为 int。我建议将所有这些都输入为 float2 开始。

# css - css：链接组放置在包含的 div 之外

> ID：15708741
> 
> 赞同：0
> 
> 时间：2013-03-29T17:57:25.590
> 
> 标签：css

在以下代码中：http: [//6.470.scripts.mit.edu/css_exercises/exercise5.html](http://6.470.scripts.mit.edu/css_exercises/exercise5.html)

```
<html>
<head>
<style type="text/css">
.wrapper1 {
    width: 65%;
    margin: 0px auto 0px auto;
    border: 1px solid;
    text-align: center;
    background: #eeeeee;
}
.wrapper2 {
    clear: left;
    width: 80%;
    margin: auto;
    border: 1px solid;
    background: #111111;
}
.p1 {
    margin: 20px;
    font-size: 70px;
}
.p2 {
    font-size: 50px;
}
.link-gr {
    list-type: none;
}
.link-gr li{
    float: left;
}
.link-gr li a{
    display: block;
    width: 100px;
}
</style>
</head>
<body>
<div class="wrapper1">
    <div class="wrapper2">
<p class="p1">MIT 6.470</p>
<p class="p2">Learn Web Programming this IAP</p>
<ul class="link-gr">
<li><a href="">Comprehensive Curriculum</a></li>
<li><a href="">Insightful Guest Lectures</a></li>
<li><a href="">Interaction with Sponsors</a></li>
<li><a href="">$30,000+ in Total Prizes</a></li>
</ul>
</div>
Copyright © 2012 MIT 6.470
</div>
</body> 
```

ul.link-gr 链接落在 div 之外。我的意思是除链接之外的所有内容都包含在带有边框和黑色背景的 div.wrapper2 中，但链接位于框外（如弃用）。这很奇怪。您的一些解释将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:10:40.807

啊飘了...

# 解释

请参阅 PIE 的这篇旧文章：[Clearing floats](http://www.positioniseverything.net/easyclearing.html) (IE/Win is IE version 6 there)

# 解决方案

应用这个现代的**[clearfix](http://nicolasgallagher.com/micro-clearfix-hack/)**（在非包含浮动的父级上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:05:49.083

我认为这是一个`float`问题：您的代码包含

```
.link-gr li{
    float: left;
} 
```

问题是它的容器不是`float: left`，这意味着列表项可以自由地去任何地方。尝试`float: left`添加`.link-gr`：

```
.link-gr{
    float: left;
} 
```

这可能会解决问题。小提琴：http: [//jsfiddle.net/abZHK/1/](http://jsfiddle.net/abZHK/1/)

# android - Monodroid 和 emgu 的 UnsatisfiedLinkError - libopencv_highgui.so 之前无法加载

> ID：15708743
> 
> 赞同：0
> 
> 时间：2013-03-29T17:57:28.357
> 
> 标签：android, mono, xamarin.android, xamarin, emgucv

**使用Emgu CV (libemgucv-android-2.4.2.1773-RC)**运行 Monodroid 应用程序（Xamarin 试用版）`UnsatisfiedLinkError`在尝试加载**libopencv_highgui.so**时会抛出错误，以响应下面的代码行。其他 Emgu 调用似乎工作正常。

```
var camera = new Capture(); 
```

1.  在调试或发布模式下运行 (Visual Studio 2010) 有相同的错误。
2.  我的解决方案和 APK 包含用于模拟 CPU/ABI 的所有正确 SO 文件（包括 libopencv_highgui.so）。
3.  我尝试了各种 API 级别，都出现相同的错误。
4.  “adb logcat”似乎与下面的 VS 异常堆栈没有什么不同。

下面是异常堆栈。

```
D/dalvikvm( 1228): Trying to load lib /data/app-lib/EyeReaderApp.EyeReaderApp-1/libopencv_highgui.so 0x40ce22a0
E/dalvikvm( 1228): dlopen("/data/app-lib/EyeReaderApp.EyeReaderApp-1/libopencv_highgui.so") failed: Cannot load library: find_library(linker.cpp:889): "/data/app-lib/EyeReaderApp.EyeReaderApp-1/libopencv_highgui.so" failed to load previously
Unhandled Exception:

Java.Lang.UnsatisfiedLinkError: 
Unhandled Exception:

System.TypeInitializationException: 
I/MonoDroid( 1228): UNHANDLED EXCEPTION: System.TypeInitializationException: An exception was thrown by the type initializer for Emgu.CV.CvInvoke ---> Java.Lang.UnsatisfiedLinkError: Exception of type 'Java.Lang.UnsatisfiedLinkError' was thrown.
I/MonoDroid( 1228):   at Android.Runtime.JNIEnv.CallStaticVoidMethod (IntPtr jclass, IntPtr jmethod, Android.Runtime.JValue[] parms) [0x00023] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:973 
I/MonoDroid( 1228):   at Java.Lang.JavaSystem.LoadLibrary (System.String libName) [0x00034] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/platforms/android-14/src/generated/Java.Lang.JavaSystem.cs:259 
I/MonoDroid( 1228):   at Emgu.CV.CvInvoke..cctor () [0x00158] in E:\Visual Studio 2010\Projects\EyeReader\Android\libemgucv-android-2.4.2.1773-RC\Emgu.CV\PInvoke\CvInvokeCore.cs:154 
I/MonoDroid( 1228):   --- End of managed exception stack trace ---
I/MonoDroid( 1228): java.lang.UnsatisfiedLinkError: Cannot load library: find_library(linker.cpp:889): "/data/app-lib/EyeReaderApp.EyeReaderApp-1/libopencv_highgui.so" failed to load previously
I/MonoDroid( 1228):     at java.lang.Runtime.loadLibrary(Runtime.java:371)
I/MonoDroid( 1228):     at java.lang.System.loadLibrary(System.java:535)
I/MonoDroid( 1228):     at mono.android.view.View_OnClickListenerImplementor.n_onClick(Native Method)
I/MonoDroid( 1228):     at mono.android.view.View_OnClickListenerImplementor.onClick(View_OnClickListenerImplementor.java:29)
I/MonoDroid( 1228):     at android.view.View.performClick(View.java:4204)
I/MonoDroid( 1228):     at android.view.View$PerformClick.run(View.java:17355)
I/MonoDroid( 1228):     at android.os.Handler.handleCallback(Handler.java:725)
I/MonoDroid( 1228):     at android.os.Handler.dispatchMessage(Handler.java:92)
I/MonoDroid( 1228):     at android.os.Looper.loop(Looper.java:137)
I/MonoDroid( 1228):     at android.app.ActivityThread.main(ActivityThread.java:5041)
I/MonoDroid( 1228):     at java.lang.reflect.Method.invokeNative(Native Method)
I/MonoDroid( 1228):     at java.lang.reflect.Method.invoke(Method.java:511)
I/MonoDroid( 1228):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
I/MonoDroid( 1228):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
I/MonoDroid( 1228):     at dalvik.system.NativeStart.main(Native Method)
I/MonoDroid( 1228): 
I/MonoDroid( 1228):   --- End of inner exception stack trace ---
I/MonoDroid( 1228): at Emgu.CV.Capture..ctor (int) [0x0001d] in E:\Visual Studio 2010\Projects\EyeReader\Android\libemgucv-android-2.4.2.1773-RC\Emgu.CV\Capture\Capture.cs:162
I/MonoDroid( 1228): at Emgu.CV.Capture..ctor () [0x00000] in E:\Visual Studio 2010\Projects\EyeReader\Android\libemgucv-android-2.4.2.1773-RC\Emgu.CV\Capture\Capture.cs:149
I/MonoDroid( 1228): at EyeReaderApp.MainScreen.StartCamera () [0x00010] in E:\Visual Studio 2010\Projects\EyeReader\Android\EyeReaderApp\Screens\MainScreen.cs:78
I/MonoDroid( 1228): at EyeReaderApp.MainScreen.CameraButton_Click (object,System.EventArgs) [0x00017] in E:\Visual Studio 2010\Projects\EyeReader\Android\EyeReaderApp\Screens\MainScreen.cs:62
I/MonoDroid( 1228): at Android.Views.View/IOnClickListenerImplementor.OnClick (Android.Views.View) [0x0000b] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/platforms/android-14/src/generated/Android.Views.View.cs:1267
I/MonoDroid( 1228): at Android.Views.View/IOnClickListenerInvoker.n_OnClick_Landroid_view_View_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/platforms/android-14/src/generated/Android.Views.View.cs:1238
I/MonoDroid( 1228): at (wrapper dynamic-method) object.7be55d07-8ea3-4414-a38c-584f4ca07a4b (intptr,intptr,intptr) <IL 0x00017, 0x00043>
Unhandled Exception:

System.TypeInitializationException: 
E/mono    ( 1228): 
E/mono    ( 1228): Unhandled Exception:
E/mono    ( 1228): System.TypeInitializationException: An exception was thrown by the type initializer for Emgu.CV.CvInvoke ---> Java.Lang.UnsatisfiedLinkError: Exception of type 'Java.Lang.UnsatisfiedLinkError' was thrown.
E/mono    ( 1228):   at Android.Runtime.JNIEnv.CallStaticVoidMethod (IntPtr jclass, IntPtr jmethod, Android.Runtime.JValue[] parms) [0x00023] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:973 
E/mono    ( 1228):   at Java.Lang.JavaSystem.LoadLibrary (System.String libName) [0x00034] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/platforms/android-14/src/generated/Java.Lang.JavaSystem.cs:259 
E/mono    ( 1228):   at Emgu.CV.CvInvoke..cctor () [0x00158] in E:\Visual Studio 2010\Projects\EyeReader\Android\libemgucv-android-2.4.2.1773-RC\Emgu.CV\PInvoke\CvInvokeCore.cs:154 
E/mono    ( 1228):   --- End of managed exception stack trace ---
E/mono    ( 1228): java.lang.UnsatisfiedLinkError: Cannot load library: find_library(linker.cpp:889): "/data/app-lib/EyeRea
I/mono    ( 1228): [ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: An exception was thrown by the type initializer for Emgu.CV.CvInvoke ---> Java.Lang.UnsatisfiedLinkError: Exception of type 'Java.Lang.UnsatisfiedLinkError' was thrown.
I/mono    ( 1228):   at Android.Runtime.JNIEnv.CallStaticVoidMethod (IntPtr jclass, IntPtr jmethod, Android.Runtime.JValue[] parms) [0x00023] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:973 
The program 'Mono' has exited with code 255 (0xff). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:43:51.277

原来我同时安装了 32 位 JDK 和 64 位 JDK。一旦我卸载了 32 位，我就克服了这个错误。然后我开始得到`initcameraconnect: Unable to connect to CameraService`. 但是，我通过将相机权限添加到 Android 清单（应用程序属性 > android 清单 > 创建 xml 文件 > 权限）来解决这个问题。

# facebook - HTTPS 中的 CakePHP Facebook 插件错误不在 HTTP 中

> ID：15708745
> 
> 赞同：2
> 
> 时间：2013-03-29T17:57:30.217
> 
> 标签：facebook, http, plugins, https, cakephp-2.0

我已经按照说明设置了 facebook 插件。

1.  下载包并安装在 app/plugins/facebook
2.  根据示例配置文件，使用我的应用程序的 ID、密钥和密码创建 app/config/facebook.php
3.  在我的 app_controller.php 中包含 $helpers = array('Facebook.Facebook')
4.  在我的布局中回显了 $this->Facebook->html() 函数（替换了默认的 html 标记）
5.  在布局底部回显 $this->Facebook->init() 函数，之前

我运行这段代码：

```
echo $this->Facebook->share('link'); 
```

如果我访问： http: [//myhomepage.com](http://myhomepage.com)它可以工作，但如果我使用 HTTPS 访问相同的内容，我只会得到一个文本共享。在 IE 10 和 Chrome 中，我得到一个`Not safe content error`. 如果我接受它，它会起作用。

如何通过 SSL 运行它？我已经购买了证书，所以它是有效的，而不是自制的自签名证书。我正在运行 Cake PHP 版本 2。

我试图搜索网络，但我只是发现登录功能的问题，而不是分享按钮的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:52:31.663

请点击以下链接以供参考。

1.  [http://www.afbtemplates.com/tutorials/common-problems-facebook-secure-connections](http://www.afbtemplates.com/tutorials/common-problems-facebook-secure-connections)
2.  [http://developers.facebook.com/blog/post/497/](http://developers.facebook.com/blog/post/497/)
3.  [我是否需要在我的网站上支持允许通过 facebook 连接登录的 ssl](https://stackoverflow.com/questions/7477394/do-i-need-to-support-ssl-on-my-site-that-allows-login-through-facebook-connect)

# javascript - 将窗口发送到 Google 后提交 Google 搜索

> ID：15708757
> 
> 赞同：0
> 
> 时间：2013-03-29T17:58:07.327
> 
> 标签：javascript

我已设法使用 window.location.href 向 Google 发送查询，但我不知道如何提交 Google 搜索表单以便查看结果。

这是我的 javascript 代码，它使用在搜索框中输入的查询将窗口发送到 Google，但是如何提交 Google 的表单？

```
var query = "hello";
var firstPart = "http://google.com/?q=";
window.location.href = firstPart + query; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:02:45.817

[如果您使用此 URL：“ http://google.com/search?q=](http://google.com/search?q=) ”，则无需提交，在您的代码中为：

```
var query = "hello";
var firstPart = "http://google.com/search?q=";
window.location.href = firstPart + query; 
```

# java - 为什么 Java 用 0x1F 屏蔽移位操作数？

> ID：15708760
> 
> 赞同：11
> 
> 时间：2013-03-29T17:58:26.920
> 
> 标签：java, bit-manipulation

在 Java 中：

```
(0xFFFFFFFF <<  1) = 0xFFFFFFFE = 0b1111111111111110
                :         :               :
(0xFFFFFFFF << 30) = 0xE0000000 = 0b1110000000000000
(0xFFFFFFFF << 30) = 0xC0000000 = 0b1100000000000000
(0xFFFFFFFF << 31) = 0x80000000 = 0b1000000000000000 
```

然而：

```
(0xFFFFFFFF << 32) = 0xFFFFFFFF = 0b1111111111111111 
```

从逻辑上讲，这没有任何意义，但我相信正在发生的是 Java 执行类似于：

`a << (b % Integer.SIZE)`[编辑，显然：]`a << (b & 0x1F)`

这也适用于`>>`and `>>>`。

显然，移动 >= 32（在整数的情况下）会从数据类型中删除所有数据，但有时这很有用。例如：

```
int value = 0x3F43F466; // any value
int shift = 17; // any value >= 0
int carry = value & (-1 << (Integer.SIZE - shift));
if (carry > 0)
    ; // code... 
```

当然，这可以修复，但发现这些错误可能非常耗时（我只花了几个小时跟踪一个类似的错误）。所以，我的问题是：将所有位移出时**是否有理由不返回逻辑值？**

## 更新：

我在 C99 中尝试过，使用以下内容：

```
#include<stdio.h>
main()
{
   int i, val;
   for (i = 0; i <=36; i++) {
       val = (-1 << i);
       printf("%d :\t%d\n", i, val);
   }
} 
```

我发现它的行为与 Java 相同， masking `i & 0x1F`，而当给定一个常量值时，它会在编译时提供警告：

```
warning: left shift count >= width of type 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T18:06:30.397

当然，有：这是大多数处理器（特别是 x86）实现位移的方式，并做你想做的事——检查位移是否大于 32，如果是，则返回零——需要一个分支，它可以在现代 CPU 上价格昂贵。这不仅仅是“烦人”，它可以使事情变慢几个数量级。

简而言之，做你想做的事情会给一个预计会因高性能代码而快速运行的操作增加大量开销。

作为参考，逻辑与 不完全相同`%`，它是一个掩码。有关详细信息，请参阅[JLS 15.19](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)：

> If the promoted type of the left-hand operand is int, only the five lowest-order bits of the right-hand operand are used as the shift distance. It is as if the right-hand operand were subjected to a bitwise logical AND operator & (§15.22.1) with the mask value 0x1f (0b11111). The shift distance actually used is therefore always in the range 0 to 31, inclusive.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T18:09:05.920

JLS 15.19 *If the promoted type of the left-hand operand is int, only the five lowest-order bits of the right-hand operand are used as the shift distance. It is as if the right-hand operand were subjected to a bitwise logical AND operator & (§15.22.1) with the mask value 0x1f (0b11111). The shift distance actually used is therefore always in the range 0 to 31, inclusive*

to put it simply `0xFFFFFFFF << 32` is equivalnt `to 0xFFFFFFFF << (32 & 0x1f)` is equivalent to `0xFFFFFFFF << 0`

# c# - 查找嵌套在中继器控件中的控件

> ID：15708766
> 
> 赞同：4
> 
> 时间：2013-03-29T17:58:48.270
> 
> 标签：c#, asp.net, web-applications, user-controls, repeater

我试图找到通过*UserControl*在Repeater 中呈现的TextBoxes 的值，即Repeater 具有UserControl 的占位符，并且在UserControl 内部是TextBox 标记实际存在的位置。我之前已经在Repeater 中*直接*使用TextBoxes 完成了此操作，这非常简单，我想知道为什么这显然不能以相同的方式完成。这是带有中继器的默认页面，其中包含一个占位符...

```
 <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<form class="formee">
    <fieldset>
         <legend>Faculty Information</legend>
         <div class="grid-4-12">
             <asp:Label ID="lblFirstName1" runat="server" Text="First Name"></asp:Label>
             <asp:Label ID="lblFirstName2" runat="server" Text="" ></asp:Label>
             <asp:Label ID ="lblSalary" runat="server" Text="" ClientIDMode="Static"></asp:Label>
        </div>
        <div class="grid-6-12">
            <asp:Label ID="lblLastName1" runat="server" Text="Last Name"></asp:Label>
            <asp:Label ID="lblLastName2" runat="server" Text=""></asp:Label>
        </div>
    </fieldset>
</form>
<div id="repeaterDiv">
    <asp:Repeater ID="rptBudget" runat="server" ClientIDMode="Static">
        <ItemTemplate>
                <asp:PlaceHolder ID="phBudget" runat="server" EnableViewState="true" />
                    <br />
        </ItemTemplate>
    </asp:Repeater>

    <asp:Button ID="btnAddBudgetControl" runat="server" Text="Add"
                CausesValidation="false" OnClick="AddBudgetControl" CssClass="addBudgetControl"/>
    <asp:Button ID="btnDisplayEntries" runat="server" Text="Display Entries" CausesValidation="false" OnClick="DisplayEntries" />
</div>
<div>
    <asp:TextBox ID="txtTotalPercent" runat="server"  ClientIDMode="Static"></asp:TextBox>
    <asp:TextBox ID="txtGrandTotal" runat="server" ClientIDMode="Static"></asp:TextBox>
    <asp:Label ID="lblCtrls" runat="server" Text=""></asp:Label>
</div> 
```

...以及插入占位符位置的用户控件...

```
 <fieldset>
        <legend>Faculty Salary Form</legend>
        <table cellspacing="10" id="values">
            <tr>
                <td>
                    <asp:Label ID="lblServiceType" runat="server" Text="Service"></asp:Label>
                    <asp:DropDownList runat="server" ID="ddlServiceType" CssClass="serviceType" />
                </td>
                <td>
                    <asp:Label ID="lblSpeedCode" runat="server" Text="Speed Code"></asp:Label>
                    <asp:DropDownList runat="server" ID="ddlSpeedCode" CssClass="speedType" />
                </td>
                <td>
                    <asp:Label ID="lblPercentage" runat="server" Text="Percentage"></asp:Label>
                    <asp:Textbox ID="txtPercentage" runat="server" CssClass="percentCommitment" ClientIDMode="Static" EnableViewState="true" />
                </td>
                <td>
                    <asp:Label ID="lblTotal" runat="server" Text="Total"></asp:Label>
                    <asp:TextBox ID="txtTotal" runat="server" CssClass="amountCommitment" ClientIDMode="Static"  EnableViewState="true"/>
                </td>
                <td>
                    <asp:Button ID="btnRemove" runat="server" Text="Remove Item" OnClick="RemoveItem" ClientIDMode="Static" CssClass="btnRemove" />
                </td>
            </tr>
            <tr>
            </tr>
        </table>
    </fieldset> 
```

...但是当为显示按钮的 OnClick 运行以下代码时，我总是为 UserControl 中的任何和所有 TextBoxes（和 DropDowns）获得一个空值...

```
protected void DisplayEntries(object sender, EventArgs e)
{
    foreach (RepeaterItem repeated in rptBudget.Items)
    {
        TextBox txtPercentage = (TextBox)repeated.FindControl("txtPercentage");
        if (txtPercentage == null)
        {
            lblCtrls.Text += " null; ";
        }
        else
        {
            lblCtrls.Text += txtPercentage.Text + "; ";
        }
    }
} 
```

访问这些值的最佳方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T18:06:53.193

txtPercentage 文本框位于 Usercontrol 内部，因此使用以下辅助方法来检索它。

**辅助方法**

```
public static Control FindControlRecursive(Control root, string id)
{
   if (root.ID == id) 
     return root;

   return root.Controls.Cast<Control>()
      .Select(c => FindControlRecursive(c, id))
      .FirstOrDefault(c => c != null);
} 
```

**用法**

```
foreach (RepeaterItem repeated in rptBudget.Items)
{
   TextBox txtPercentage =            
      (TextBox)FindControlRecursive(repeated, "txtPercentage");  
   ...   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:05:10.753

尝试先加载占位符，然后在占位符中查找文本框：

像这样的东西：

伪

```
var ph = repeated.FindControl("phBudget");
var txtBox = ph.FindControl("txtPercentage"); 
```

/伪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:04:45.010

您需要先获取 UserControl，*然后*`FindControl`在 UC 本身上使用。

# c - 标准输入检索的输入行大小

> ID：15708769
> 
> 赞同：0
> 
> 时间：2013-03-29T17:59:01.063
> 
> 标签：c, fgets

我正在使用`fgets()`函数将字符串存储在具有固定大小的结构中。

```
if(fgets(auth_data->user_id, USR_SIZE, stdin) == NULL)
    EXIT_ON_ERROR_("Error on fgets function\n");
fflush(stdin); 
```

我知道所有接收到的大小更大的字符串`USR_SIZE -1`都被剪切了。我需要知道输入字符串的大小正好是那个大小（`USR_SIZE -1`加`'\0'`字符）。

为此，我可以要求`strlen`他们检查字符串是否有长度`< USR_SIZE -1`。但是我如何检查原始字符串是否被`fgets`. 在这两种情况下，我首先知道字符串的格式不正确。

此外`fflush(stdin)`，为了清除输入流真的需要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:11:42.930

fgets 的手册页说说明

```
 The fgets() function reads at most one less than the number of characters
 specified by size from the given stream and stores them in the string
 str.  Reading stops when a newline character is found, at end-of-file or
 error.  The newline, if any, is retained.  If any characters are read and
 there is no error, a `\0' character is appended to end the string. 
```

返回值

```
 Upon successful completion, fgets() and gets() return a pointer to the
 string.  If end-of-file occurs before any characters are read, they
 return NULL and the buffer contents remain unchanged.  If an error
 occurs, they return NULL and the buffer contents are indeterminate.  **The
 fgets() and gets() functions do not distinguish between end-of-file and
 error, and callers must use feof(3) and ferror(3) to determine which
 occurred.** 
```

**它永远不会知道是否有任何字符被截断，因为你让它只从文件中读取那么多字符**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:14:21.980

fgets 在缓冲区中存储一个换行符作为最后一个字符。缓冲区中没有换行符意味着 EOF（使用 feof 检查）或字符串被剪切。

或者，您可以使用读取预设字节数的 fread() 循环替换所有验证代码。

在输入流上调用 fflush 是不正确的。来自 GNU libc 手册：

> 符合 C89、C99、POSIX.1-2001、POSIX.1-2008。
> 
> ```
>  The  standards  do  not  specify the behavior for input streams.  Most
>   other implementations behave the same as Linux. 
> ```

相反，阅读直到流结束（或只是关闭它）。

# ios - UIView clearColor 的问题

> ID：15708779
> 
> 赞同：1
> 
> 时间：2013-03-29T17:59:35.767
> 
> 标签：ios, objective-c, uiview, uiviewcontroller, uikit

我正在为 iOS 构建一个框架。工作方式是说一个应用程序使用我的框架并调用它来工作。该框架在调用应用程序的顶部呈现了一个视图控制器。

现在我卡住的地方是我已将视图的背景颜色设置为`clearColor`. 但是每当框架的视图控制器加载时，背景就会设置为黑色。如果我尝试将颜色设置为红色、蓝色等，效果非常好。但是当我设置它时，`clearColor`它显示一个黑屏！

我已经看到一些关于同一问题的问题，但所有这些问题都建议将视图的透明度设置为“否”。我已经这样做了，但它不起作用。因此，请提出一种解决方案，而不是需要您设置 opaque 属性的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:09:20.040

问题是，如果`clearColor`只有背景为 的视图，屏幕将是黑色的，因为如果视图下方没有任何内容，则视图无法清晰。要使用颜色清晰的视图，它下面必须有一个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:06:01.343

您不想呈现视图控制器，而是想将视图控制器的视图作为子视图添加到当前呈现的视图控制器中。

也就是说，如果我对您的理解正确，听起来您想创建一个叠加层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-04T07:41:48.800

`clearColor`从内部设置`initWithFrame:`自定义 UIView 时遇到了同样的问题。让超级视图将背景颜色设置为`clearColor`有效。

```
CustomView *uv = [[CustiomView alloc] initWithFrame:rect];
uv.backgroundColor = [UIColor clearColor];
[self.view addSubview:cv]; 
```

# javascript - 内部 CSS 准备好后如何显示 div 的内容

> ID：15708781
> 
> 赞同：0
> 
> 时间：2013-03-29T17:59:47.893
> 
> 标签：javascript, jquery

我有这个代码：

```
$.ajax({
    type: 'GET',
    url: 'url.php',
    success: function(data){
        $("div#mainclass").hide().html(data).fadeIn(100);
    }
}); 
```

当 fadeIn 触发时，我看到很短的时间，在应用 CSS 之前，没有应用 CSS 样式的 html 闪烁。这个问题只在 Firefox 中可见，Chrome 似乎足够快。在解析和应用 CSS 之前，如何防止显示？
当然，我已经尝试了一些东西，但没有运气^^

```
$("div#mainclass").hide().html(data).delay(200).fadeIn(100); 
// With Delay -> Same problem 
```

* * *

```
$("div#mainclass").hide().html(data).ready(function(){
     $("div#mainclass").fadeIn(100)
}; 
// Also the ready Function doesn't help here. 
```

* * *

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:04:54.200

尝试`$("div#mainclass").hide()`在 ajax 调用之前移动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:07:43.597

```
$("#mainclass").hide().load('url.php', function() { $(this).fadeIn(100); }); 
```

# android - 翻转 ViewPager？

> ID：15708785
> 
> 赞同：1
> 
> 时间：2013-03-29T18:00:00.883
> 
> 标签：android, android-viewpager

我在我的应用程序中使用 Viewpager.. 当用户向左或向右滑动时，我将显示下一张或上一张图像 - 基本上是幻灯片（图像）类型的应用程序..

如果用户点击应用程序，我想在 ViewPager 中翻转视图。每个视图后面的视图 - 用户必须能够在点击视图时翻转视图。

这是代码，

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);        

    .... <some code> ....

    viewPager = (ViewPager) findViewById(R.id.main_viewpager);

    ImagePagerAdapter adapter = new ImagePagerAdapter();
    viewPager.setAdapter(adapter);

    PageListener pageListener = new PageListener();
    viewPager.setOnPageChangeListener((OnPageChangeListener) pageListener);

    final GestureDetector tapGestureDetector = new GestureDetector(this, new TapGestureListener());

    viewPager.setOnTouchListener(new OnTouchListener() {
         public boolean onTouch(View v, MotionEvent event) {
              tapGestureDetector.onTouchEvent(event);
              return false;
         }
    });
}

private class TapGestureListener extends GestureDetector.SimpleOnGestureListener{
    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {

    // HERE I CAPTURED SINGLE TAP.. HOW DO I CHANGE THE VIEW OF VIEWPAGER?  
            return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:32:18.740

我认为您应该将 onTouchEvent 设置为页面内的 View，而不是整个 viewpager。在 ImageViewPagerAdapter 中，您有

```
@Override
public Object instantiateItem(ViewGroup container, final int position) { 
```

创建视图时，我假设一个 ImageView，将 onTouchListener 设置为它，以便您可以引用可以触摸的视图。

对于翻转本身看一下[这个例子](http://www.edumobile.org/android/android-beginner-tutorials/flip-view-example/)，就很清楚了。

**编辑：**

这是我从我制作的应用程序中复制粘贴的示例，我切断了 onclicklistener 中的实际代码，因为它很长且不相关。我使用这种方法是因为在 istantiateItem() 中创建了要将侦听器附加到的视图。

```
@Override
public Object instantiateItem(ViewGroup container, final int position) {
    Context context = MainActivity.this;
    Log.e("InstantiateItem",Integer.toString(position));
      ImageView imageView = new ImageView(context);

      imageView.setImageResource(mImages[position]);

      imageView.setOnClickListener(new OnClickListener() {
          public void onClick(View v) {
             // do some stuf when clicked...to see if it works you could try
             Log.e("Click on image",Integer.toString(position));
          }
      });
      ((ViewPager) container).addView(imageView, 0);

      return imageView;

} 
```

# django - django sweetpie URL 不起作用

> ID：15708787
> 
> 赞同：0
> 
> 时间：2013-03-29T18:00:05.000
> 
> 标签：django, tastypie

我似乎无法弄清楚如何使美味的 URL 工作。当我在浏览器中转到应用程序的根目录时，调试没有列出 url。我错过了什么？

```
## inventory/models.py
from django.db import models
#
class Server (models.Model):
    server_id  = models.AutoField(primary_key=True)
    server_name = models.CharField("Server Name",max_length=200,unique=True)
    server_ip = models.IPAddressField("Server IP")
    server_serial = models.CharField("Serial No.",max_length=25,null=True,blank=True)
    server_mem = models.PositiveIntegerField("Mem (MB)",null=True,blank=True)
    server_architecture = models.ForeignKey(Architecture)
    server_os = models.ForeignKey(Operating_System)
    server_os_version = models.CharField("OS   Version",max_length="25",null=True,blank=True)
    server_type = models.ForeignKey(Server_Type,null=True,blank=True)
    server_mac = models.ForeignKey(Mac,null=True,blank=True)
    server_digi = models.ForeignKey(Digi,null=True,blank=True)
    server_digi_port = models.PositiveIntegerField("Digi Port",null=True,blank=True)
    server_rack = models.ForeignKey(Rack,null=True,blank=True)
    server_kvm = models.ForeignKey(KVM,null=True,blank=True)
    def __unicode__(self):
            return self.server_name

## inventory/api.py
from tastypie.resources import ModelResource
from inventory.models import *
#
class ServerResource(ModelResource):
 class Meta:
    queryset = Server.objects.all()
    resource_name = 'servers'

## mmi_assets/urls.py
from django.conf.urls import patterns, include, url
#
## our custom stuff
from inventory.api import *
server_resource = ServerResource()
##

urlpatterns = patterns('',
  url(r'^admin/', include(admin.site.urls)),
  url(r'^inventory/', include('inventory.urls')),
  url(r'^api/', include(server_resource.urls)),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:01:11.623

您需要将资源添加到 api，然后包含 api 的 url。[http://django-tastypie.readthedocs.org/en/latest/tutorial.html#adding-to-the-api](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#adding-to-the-api)

```
# urls.py
from django.conf.urls.defaults import *
from tastypie.api import Api
from myapp.api import EntryResource, UserResource

v1_api = Api(api_name='v1')
v1_api.register(UserResource())
v1_api.register(EntryResource())

urlpatterns = patterns('',
    # The normal jazz here...
    (r'^blog/', include('myapp.urls')),
    (r'^api/', include(v1_api.urls)),
) 
```

# javascript - 为什么不调用 JavaScript“onblur”函数？

> ID：15708789
> 
> 赞同：0
> 
> 时间：2013-03-29T18:00:11.510
> 
> 标签：javascript, jquery, function, dom, focus

我有一个网站，上面有一个“商店”，您可以在其中使用“硬币”购买东西。现在，我正在创建商店并对其进行测试，所以请在此处查看它 [http://coinawards.net63.net/structure/shop.php](http://coinawards.net63.net/structure/shop.php)

因此，当您单击“购买 40 个硬币”的框时，它会弹出一个浅蓝色框，上面写着“已添加到您的购物车”。

现在，我的代码说一旦“购买”按钮被模糊，弹出窗口应该消失......但它没有。我将在下面发布我的代码，希望有人知道如何修复它！

代码：

```
function init()
{

    var buyinfobutton = $(".buyinfo");

    buyinfobutton.on("click",AddToCart);

    buyinfobutton.on("blur",popUpVanish);

    $('#confirmbox').hide();

}

onload = init;

var shoppingcart = {};

function AddToCart()
{
    // This is called properly.
    $('#confirmbox').show('normal');

}

function popUpVanish()
{
    // This is never called!
    $('#confirmbox').hide();

} 
```

此外，如果您看到我的网站并认为它需要在某个区域进行一些改进（我知道有些部分很糟糕），请也记下它！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:15:22.590

这就是我想出的，我认为它正在寻找什么。我稍微重构了你的代码。

[http://jsfiddle.net/kYT5U/](http://jsfiddle.net/kYT5U/)

```
$(document).ready(function() {
    $(".buyinfo")
    .click(AddToCart)
    .mouseout(popUpVanish);
    $('#confirmbox').hide();
});

var shoppingcart = {};

function AddToCart() {
    $('#confirmbox').show('normal');
}

function popUpVanish() {
    $('#confirmbox').hide();
} 
```

更新 jsfiddle 延迟和淡出 [http://jsfiddle.net/kYT5U/1/](http://jsfiddle.net/kYT5U/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:17:51.980

问题是您试图在`div`默认不支持焦点的 DOM 元素 ( ) 上使用与焦点相关的事件（在某些浏览器中）。*如果您使用.buyinfo*类设置's的`tabindex`属性，您的代码将按预期工作。您可以[在此处参考答案](https://stackoverflow.com/questions/6754275/set-keyboard-focus-to-a-div)以获取更多详细信息，但是如果您将此属性设置为`div`*`div`*

 *```
$(".buyinfo").attr("tabindex", -1) 
```

然后它将按预期工作。*

# jquery - 在计算同一张表中的另一列时使用总计一列的淘汰赛

> ID：15708790
> 
> 赞同：0
> 
> 时间：2013-03-29T18:00:11.520
> 
> 标签：jquery, knockout.js

我正在寻找执行以下操作。我想在第 2 列的计算函数中使用第 1 列的总数。有没有一种简单的方法可以用敲除和 jquery 做到这一点？

```
col1      | col2
---------------------------
1         | .21 * col1_total
10        | .25 * col1_total
20        | .31 * col1_total
----------------------------
col1_total| col2_total 
```

添加代码以获得更好的示例。问题在于self.col3。self.col1total 在该部分代码中不可用。我怎样才能解决这个问题？

```
function custdata(data) {
var self = this;
self.col1= ko.observable(data.col1);
self.col2= ko.observable(data.col2);

self.col3= ko.computed(function(){
 return self.col1() * self.col1total();
});
}

function guideviewmodel() {
var self = this;
self.custlist = ko.observableArray([]);

        self.col1total = ko.computed(function () {
            var total = 0;
            $.each(self.custlist(), function () { total += this.col1(); });
            return total;
        });

        self.custlist.removeAll();
                    $.getJSON(callPath + "/api/xxx?guid=" + $("#lblFilteredID").text(), function (allData) {
                        var mappedLogs = $.map(allData, function (item) { return new custdata(item) });
                        self.custlist(mappedLogs)
                    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:49:44.193

我根据您的要求创建了一个小提琴，请查看，

[**工作小提琴**](http://jsbin.com/esakiy/4/edit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:35:38.980

这是你想要的？我不确定您要如何计算将第 2 列乘以的百分比。看看这个小提琴[http://jsfiddle.net/G7dye/](http://jsfiddle.net/G7dye/)

```
<div>
<span data-bind="text:$root.columns().length"></span>
<table>
    <thead>
        <th>Col1</th>
        <th>Col2</th>
    </thead>
    <tbody data-bind="foreach:columns">
        <tr>
            <td><span data-bind ='text:num'></span></td>
            <td><span data-bind="text:col2"></span></td>
        </tr>
    </tbody>
</table> 
```

```
var TableItem = function(c){
var self = this;
 this.num = ko.observable(c);
this.col2 = ko.computed(function(){
    return (self.num() * .21);
});
}

var ViewModel = function(){
var self = this;
this.columns = ko.observableArray([new TableItem(5),new TableItem(3)]);
this.columnOneTotal = ko.computed(function(){
    var colOneTot = 0;
    ko.utils.arrayForEach(self.columns(), function(column) {
        colOneTot += column.num();
    });
    return colOneTot;
});
 this.columnTwoTotal = ko.computed(function(){
    var colTwoTot = 0;
    ko.utils.arrayForEach(self.columns(), function(column) {
        colTwoTot += column.col2();
    });
    return colTwoTot;
}); 
```

}

```
ko.applyBindings(new ViewModel()); 
```

# c - C - 将大写字母转换为小写字母

> ID：15708793
> 
> 赞同：5
> 
> 时间：2013-03-29T18:00:24.287
> 
> 标签：c

一个非常简单的程序。我只是想把'A'变成'a'，但输出给了我'A'。

```
#include <stdio.h>

int main(void) {
    putchar(lower('A')); 

}

lower(a) 
int a; 
{
    if ((a >= 65) && (a >= 90))
        a = a + 32; 
    return a;  
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T18:02:32.890

你搞砸了`if`条件的第二部分。那应该是`a <= 90`。

另外，仅供参考，已经有一个 C 库函数`tolower`可以执行此操作：

```
#include <ctype.h>
#include <stdio.h>

int main() {
    putchar(tolower('A'));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T18:02:27.730

我相信你想要 <= 90

```
lower(a) 
int a; 
{
    if ((a >= 65) && (a <= 90))
        a = a + 32; 
    return a;  
} 
```

虽然 tolower 可能只会为您省去麻烦，除非您想自己这样做。[http://www.cplusplus.com/reference/cctype/tolower/](http://www.cplusplus.com/reference/cctype/tolower/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T18:16:07.627

在 ASCII 中，大写和小写字母之间的距离是 0x20，所以这是另一种方法。

```
int lower(int a) 
{
    if ((a >= 0x41) && (a <= 0x5A))
        a |= 0x20; 
    return a;  
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T18:09:55.290

确保它正确的一种方法是使用字符而不是 ascii 代码。

```
if ((a >= 65) && (a <= 90)) 
```

你想要的是降低一个案例。最好使用类似的东西`if (a >= 'A' && a <= 'Z')`。您不必提醒所有 ascii 代码 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-30T15:07:55.760

**您可以使用位操作**将字符从小写转换为大写，反之亦然，如下所示：

```
#include<stdio.h>
int main(){
  char c;
  printf("Enter a character in uppercase\n");
  scanf("%c",&c);
  c|=' '; // perform or operation on c and ' '
  printf("The lower case of %c is \n",c);
  c&='_'; // perform 'and' operation with '_' to get upper case letter. 
  printf("Back to upper case %c\n",c);   
  return 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-01T20:30:27.280

在 ASCII 中，大写和小写字母是 0x20（在 ASCII 中，0x20 是空格 ' '）彼此分开，所以这是另一种方法。

```
int lower(int a) 
{
    return a | ' ';  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-29T18:06:13.380

如果条件不对。还需要较低的返回类型。

```
#include <stdio.h>

int lower(int a)  
{
    if ((a >= 65) && (a <= 90))
        a = a + 32; 
    return a;  
}

int _tmain(int argc, _TCHAR* argv[])
{

    putchar(lower('A')); 
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-29T18:04:07.687

```
#include <stdio.h>
#include <string.h>

int main()
{
    char string[] = "Strlwr in C";

    printf("%s\n",strlwr(string));

    return  0;
} 
```

使用 strlwr 降低大小写

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-07-08T12:24:48.943

使用此代码

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
void main(){
char a[10];
clrscr();
gets(a);
int i,length=0;
for(i=0;a[i]!='\0';i++)
length+=1;
for(i=0;i<length;i++){
a[i]=a[i]^32;
}
printf("%s",&a);
getch();
} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-08-04T17:26:48.150

```
#include<stdio.h>

void main()
{
 char a;

 clrscr();
 printf("enter a character:");
 scanf("%c",&a);

 if(a>=65&&a<=90)
   printf("%c",a+32);
 else
   printf("type a capital letter");

 getch();
} 
```

# css - 使用 Rails 应用程序的页面特定 CSS

> ID：15708794
> 
> 赞同：5
> 
> 时间：2013-03-29T18:00:24.603
> 
> 标签：css, ruby-on-rails

我想为我的 Rails 应用程序测试两个不同的接口。理想情况下，我希望有两个单独的 css 文件，一个与每个接口相关联（例如，new_interface.css 和 old_interface.css）。我目前有两种不同的接口部分，一种称为 _new_interface.html.erb，另一种称为 _old_interface.html.erb。如果我想在加载特定视图时调用正确的 css 文件，我该怎么做？例如，如果我加载 _new_interface.html.erb，我希望它加载 new_interface.css 文件并忽略 old_interface.css 文件。

我的应用程序.css：

```
/*
*= require_tree
*/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T18:49:13.387

这个问题似乎是针对你需要做的：[Using Rails 3.1 assets pipeline to conditionally use certain css](https://stackoverflow.com/questions/7134034/using-rails-3-1-assets-pipeline-to-conditionally-use-certain-css)

简而言之，您需要将 app/assets/stylesheet 文件夹重新组织到一些子目录中并更改清单文件，以便在运行时不会将*所有内容捆绑在一起。*

然后你可以在你的视图中放置一些条件逻辑，以便它为工作加载正确的 css。content_for 标记在这里可能会很有用。您可以编辑 app/views/layouts/application.html.erb 并在其他 javascript <%= yield :view_specific_css %> 之后添加一行。然后在您的视图文件中，您可以使用

```
<% content_for :view_specific_css do %>
    <%= stylesheet_link_tag "whatever %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T06:37:16.280

您应该将它们都保留为 application.css 的一部分并执行以下操作

应用程序.html.haml/erb

```
body{:class => @old_layout ? "old_layout" : "new_layout"} 
```

然后，当您进行的操作与控制器中的旧布局不符时

```
@old_layout = true 
```

然后在你的 css 文件中，要么在所有内容前面加上 body.old_layout 或 body.new_layout，要么使用 scss，sass 的一个子集，然后像这样 rap 你当前的 css 文件

```
body.old_layout{
  #all your old layout css goes here, all but body statements of course
}

body.new_layout{
  #all your new layout css goes here, all but body statements of course
} 
```

这样，您可以使用一个 css 文件使事情变得简单。并且通过一种解决方案，您可以轻松地一次切换每个控制器操作。

# php - php - 带有 html 的自动换行

> ID：15708798
> 
> 赞同：5
> 
> 时间：2013-03-29T18:00:51.783
> 
> 标签：php, tinymce, word-wrap

问题很简单：

使用[tinyMCE](http://www.tinymce.com/)，我将 html 数据存储到数据库中。然后在主页上，我展示了我插入数据库的 5 篇最新帖子。如果它们超过它，我想将每个帖子裁剪到指定的长度并放置一个`continue reading`链接（这里可以是软裁剪，不必是刚性的）。

用 php 的函数裁剪字符串很容易，`wordwrap`但由于字符串是由 html 组成的，我不想通过从错误的地方裁剪它来破坏 html 代码。

所以问题是：有没有一种简单的方法来裁剪它（也可以是 css、javascript 解决方案）或者我是否编写了一个包含大量检查的长函数来实现这样一个基本功能？我正在考虑使用该`DOM`课程，但在创建功能之前，我只想问你们。

**编辑**

造型对我来说很重要。所以没有可能剥离标签。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:10:11.133

一种可能的解决方案是去掉标签，如果这个 HTML 的样式不是很重要，那么你可以随意剪切：http: [//php.net/manual/es/function.strip-tags.php](http://php.net/manual/es/function.strip-tags.php)

CSS3 浏览器的另一个解决方案是使用 text-overflow，阅读更多相关信息： [http ://davidwalsh.name/css-ellipsis](http://davidwalsh.name/css-ellipsis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:57:32.973

假设你使用 jQuery

**javascript**

```
 $(function () {
        $('p').filter(function () {
           return $(this).height() > 50;
        }).addClass('collapsed').css('position', 'relative').append('<a href="#" class="expand">read more</a>');
        $('.expand').on('click', function(){
           if($(this).parents('.collapsed').length)
              $(this).parents('.collapsed:first').removeClass('collapsed')
           else
              $(this).parents(':first').addClass('collapsed')

        })
     }) 
```

**的CSS**

```
.collapsed{overflow: hidden; height: 20px; margin-bottom: 10px; position: relative}
.expand{position: absolute; right: 0; bottom: 0; background: #fff; padding: 0 0 0 15px;} 
```

只是一个概念证明。需要JS优化

# php - 无法让 Google Analytics 事件跟踪工作

> ID：15708800
> 
> 赞同：1
> 
> 时间：2013-03-29T18:01:02.157
> 
> 标签：php, html, events, google-analytics, onsubmit

试图跟踪没有单独登录页面的联系表单。事件跟踪不会显示在 GA 中。看不到我做错了什么。任何指针？

```
<p><input class="submit contact-button" type="submit" value="<?php _e('Submit', 'colabsthemes'); ?>" onSubmit=”_gaq.push(['_trackEvent', 'Email', 'Submit']);” /></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:17:34.143

***onsubmit***需要使用正确的引号进入***表单标签。***

您还需要确保在表单处理程序页面上安装了 Google Analytics。

# javascript - 简单的生成器似乎坏了

> ID：15708803
> 
> 赞同：4
> 
> 时间：2013-03-29T18:01:05.093
> 
> 标签：javascript, generator, yield

我写了一个简单的生成器：

```
function geni()
{
    for(var i = 0; i < 10; i++)
    {
        yield i;
    }
} 
```

我得到如下错误：

> 语法错误：缺少；before 语句 [Break On This Error]
> 
> `yield i;`

浏览器：Firefox 19.0.2 操作系统：Windows 7。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:02:44.280

您是否将其包含在您的头部标签中？

```
<script type="application/javascript;version=1.7"></script> 
```

版本 1.7 是必需的`yield.`

# rest - ColdFusion 10 REST API：如何在有效负载主体中解析 JSON

> ID：15708804
> 
> 赞同：4
> 
> 时间：2013-03-29T18:01:08.983
> 
> 标签：rest, coldfusion, coldfusion-10

我正在使用 ColdFusion 10 的新内置 RESTful Web 服务功能。发布数据时，我想在请求正文中将有效负载作为 JSON 发送。例如：

```
PUT https://mycompany.com/rest/v1.0/widget/261469 HTTP/1.1
Host: mycompany.com
Connection: keep-alive
Content-Length: 13
Content-Type: application/json

{"foo":"bar"} 
```

一旦这些数据通过 API 发布，我应该如何解析和反序列化服务器上​​的 JSON 数据？ColdFusion REST 服务是否具有执行此操作的内置方法？似乎通过将 cfargument 上的 restargsource 属性设置为“form”来反序列化“form”类型（即 content-type application/x-www-form-urlencoded），但我找不到任何示例关于如何本机反序列化 JSON 数据。我希望有类似 restargsource="json" 的东西，但那不存在。推荐的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T19:15:09.453

经过大量研究，ColdFusion 10 的 REST API 请求处理程序似乎没有原生方式为我们自动解析 JSON 请求。我们需要手动执行此操作，如下所示：

```
<cfset var json = ToString(GetHttpRequestData().content) />
<cfif !IsJSON(json)>
    <cfthrow errorCode="400" type="ArgumentException" message="#"Invalid JSON string: " & json#" />
</cfif>

<cfset var jsonObject = DeserializeJSON(json) /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T20:23:17.267

你也可以试试

```
VARIABLES.postJSON = StructNew();
StructInsert(VARIABLES.postJSON, 'parameter1','xxx'); 
```

然后用户`#SerializeJSON(VARIABLES.postJSON)#`

# actionscript-3 - Flash CS5 不再编译任何时间轴 AS3

> ID：15708807
> 
> 赞同：0
> 
> 时间：2013-03-29T18:01:16.437
> 
> 标签：actionscript-3, flash-cs5

突然之间，Flash CS5 停止编译任何 AS3。例如，如果我创建一个新文档并将这些简单脚本放在时间轴上，则生成的 SWF 将完全忽略这些操作：

```
trace("HELLO"); // I get no "HELLO" in the output window

stop(); // on frame 2 I have a square, the SWF just loops endlessly between the two frames

alpha = .1; // the square is not fade as expected 
```

在 AS2 文档中，我没有得到 trace() 输出，但操作确实有效。

有谁知道出了什么问题？除了干净的重新安装之外，任何想法如何解决这个问题？

谢谢。

# c# - 在接收流之前等待服务器

> ID：15708813
> 
> 赞同：0
> 
> 时间：2013-03-29T18:01:54.683
> 
> 标签：c#, sockets, asynchronous, client-server

我正在尝试基于这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)实现一个客户端-服务器套接字系统，并且我已经让它工作了。如果我这样做，当服务器立即返回一个字符串时它工作正常。

```
client.send();
client.receive(); 
```

问题是如果我的 send 方法请求服务器需要几分钟才能处理的内容，例如创建文件的 PDF 版本，则接收调用会立即执行并且什么也没有收到（因为服务器没有发送任何内容，因为它仍然处理 PDF）。

如何让客户端在执行接收方法之前等待一段时间，以便在服务器完成处理并发送文件后调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:07:58.360

这似乎是阻塞和非阻塞接收调用之间的区别。一个阻塞的接收调用会一直等到它实际上有东西要接收或者它会超时。无论数据是否存在，非阻塞接收调用都会立即返回。我不知道这是什么调用，但我知道 C# 有这两种调用。

您提供的链接是异步套接字示例，该示例通常与您尝试执行的操作不同。您尝试做的更类似于同步风格。

就套接字而言，异步通常意味着您将注册一个在接收到数据时要调用的函数。同步意味着以阻塞或非阻塞方式轮询（显式请求数据）。

**编辑：** 你会发送你的数据并设置一个类变量，说你已经发送了一些东西并期待收到一些东西。然后等待那个变量被清除，说你收到了一些东西。

```
sent = 1
client.send()
while(sent); 
```

然后在你的接收回调中，当你真正得到一些东西时，你会设置那个变量。

```
/* receive data and process */
sent = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:15:43.733

使用异步并等待。该函数将在调用返回后被调用。

[http://msdn.microsoft.com/en-us/library/vstudio/hh156513.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh156513.aspx)

# c++ - 如何使用基类指针获取子类的属性

> ID：15708814
> 
> 赞同：1
> 
> 时间：2013-03-29T18:02:01.230
> 
> 标签：c++, class, inheritance, subclass, virtual

我有一个问题，我以类似的方式一次又一次地遇到。

例如：

我有一个抽象基类，它充当一系列具体类的接口，例如，数据容器。

```
class DataInterface
{
public:
    DataInterface();
    ~DataInterface();

    virtual void FetchData(void) = 0;
    virtual void ProcessData(void) = 0;
    virtual void ClearData(void) = 0;
} 
```

具体的类看起来像这样：

```
class BinaryData: public DataInterface
{
public:
    BinaryData();
    ~ BinaryData();

    virtual void FetchData(void);
    virtual void ProcessData(void);
    virtual void ClearData(void);

private:
    bool m_boolData;
}

class IntegerData: public DataInterface
{
public:
    IntegerData();
    ~ IntegerData();

    virtual void FetchData(void);
    virtual void ProcessData(void);
    virtual void ClearData(void);

private:
    int m_intData;
} 
```

子类实现了它们从 DataInterface 继承的接口。但是他们有不同的属性来保存他们的数据。到目前为止，一切都很好。

我可以像这样使用主函数中的类：

```
int main()
{
    int IntegerData;
    bool BoolData;
    DataInterface *pData1 = new BinaryData();
    DataInterface *pData2 = new IntegerData();  

    pData1->FetchData();
    pData2->FetchData();

    pData1->ProcessData();
    pData2->ProcessData();

    // now I want to get the data of pData1 and pData2, for example to write it into a file, show in visualization, ...
    IntegerData = pData2->GetData() ????
    BoolData = pData1->GetData() ????
} 
```

现在问题来了：

如何从具体类中获取数据？我只有基类指针，所以我需要在 DataInterface 中定义一个抽象的 getter 方法。但是 getter 方法的签名会因子类而异。例如一次我需要返回一个整数，一次我需要返回一个布尔类型。

请给我一个提示，这个问题让我发疯：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:29:17.997

`GetData()`在每个派生类上创建一个非虚拟成员。然后，如果您确定您的对象的实际类，您可以简单地执行静态转换并调用`GetData()`：

```
int intData = static_cast<IntegerData*>(pData2)->GetData(); 
```

如果您不知道该类，则需要执行动态转换并检查其结果：

```
if (IntegerData* _pData2 = dynamic_cast<IntegerData*>(pData2))
{
  int intData = _pData2->GetData();
  // Do stuff with the int
}
else if (BinaryData* _pData2 = dynamic_cast<BinaryData*>(pData2))
{
  bool binaryData = _pData2->GetData();
  // Do stuff with the bool
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:34:30.840

我不确定这是一个**“好”的做法**，但这是解决这个问题的一种方法。这样做的一个好处是，如果您尝试获取错误类型的数据，您可以获得自定义错误消息。你可以避免演员表（我不是他们的粉丝）。

```
class DataInterface
{
public:
  DataInterface();
  ~DataInterface();

  virtual void FetchData(void) = 0;
  virtual void ProcessData(void) = 0;
  virtual void ClearData(void) = 0;
  virtual int getIntData() { // Error message }
  virtual bool getBoolData() { // Error message }
};

class BinaryData: public DataInterface
{
public:
    BinaryData();
    ~ BinaryData();

    virtual void FetchData(void);
    virtual void ProcessData(void);
    virtual void ClearData(void);
    virtual int getIntData() { // Error message }
    virtual bool getBoolData() { return m_boolData; }

private:
    bool m_boolData;
}

class IntegerData: public DataInterface
{
public:
    IntegerData();
    ~ IntegerData();

    virtual void FetchData(void);
    virtual void ProcessData(void);
    virtual void ClearData(void);
    virtual int getIntData() { return m_intData; }
    virtual bool getBoolData() { // Error message }

private:
    int m_intData;
}

int main()
{
    int IntegerData;
    bool BoolData;
    DataInterface *pData1 = new BinaryData();
    DataInterface *pData2 = new IntegerData();  

    pData1->FetchData();
    pData2->FetchData();

    pData1->ProcessData();
    pData2->ProcessData();

    // now I want to get the data of pData1 and pData2, for example to write it into a file, show in visualization, ...
    IntegerData = pData2->GetIntData();
    BoolData = pData1->GetBoolData();
    BoolData = pData2->GetBoolData() // This will tell you that you are trying to get bool from int class.
} 
```

* * *

* * *

## 这是使用模板处理它的一种方法。

```
using namespace std;

template<typename T>
class DataInterface
{
public:
    DataInterface(T d) : data(d) {}

    virtual T GetData() = 0;
protected:
    T data;
};

class BinaryData : public DataInterface<bool>
{
public:
    BinaryData(bool b) : DataInterface<bool>(b) {} 

    virtual bool GetData() {return data;}

};

class IntegerData: public DataInterface<int>
{
public:
    IntegerData(int i) : DataInterface<int>(i) {} 

    virtual int GetData() {return data;}

};

int main()
{
    int myint;
    bool mybool;
    DataInterface<bool> *pData1 = new BinaryData(true);
    DataInterface<int> *pData2 = new IntegerData(1);  

    // now I want to get the data of pData1 and pData2, for example to write it into a file, show in visualization, ...
    myint = pData2->GetData();
    mybool = pData1->GetData();

    cout<<myint<<" "<<mybool<<endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T19:02:37.140

如果要将数据传递给另一个实体，则需要对其进行抽象。有两种常见的方法来实现这一点：

**1：** 使用`void*`。

```
class DataInterface
{
public:
   ...
   virtual void* GetData() = 0;
};

class BinaryData: public DataInterface
{
public:
   virtual void* GetData() { return &m_boolData; }

private:
    bool m_boolData;
}; 
```

在`main`这样使用它：

```
int main()
{
    bool BoolData;
    DataInterface *pData1 = new BinaryData();

    pData1->FetchData();
    pData1->ProcessData();
    BoolData = *(bool*))pData1->GetData());
} 
```

这种方法的优点在于它的简单性。缺点是直接访问对象的内部（破坏封装）以及滥用多态性（如果最终强制转换为与具体派生相关的类型，为什么还需要接口？）

**2：**

更健壮的方法是不将原始数据从具体对象发送到客户端，而是使与客户端的通信成为对象的附加角色。

```
class DataInterface
{
public:
   ...
   virtual void SendData() = 0;
};

class BinaryData: public DataInterface
{
public:
   ...
   virtual void SendData() 
   {
        //do your stuff here, you know the exact type of your data
   }
};

int main()
{
    bool BoolData;
    DataInterface *pData1 = new BinaryData();

    pData1->FetchData();
    pData1->ProcessData();
    pData1->SendData();
} 
```

请注意，这是一个非常简单的示例，但它展示了这个想法。通常，在实际用例中，您将向您的类注册客户端并通过定义的接口将数据发送给它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T20:13:36.080

实现这一点的一个非常简单的方法是设计您的基类，以便它返回一个变体类型。变体是一个可区分的联合容器，它保存来自一组异构类型的对象（参见[http://www.boost.org/doc/libs/1_59_0/doc/html/variant.html](http://www.boost.org/doc/libs/1_59_0/doc/html/variant.html)）。这是一个完整的例子：

```
#include <iostream>
#include <algorithm>
#include <boost/variant.hpp>

#include <memory>

using namespace std;

class DataInterface
{
public:
    DataInterface(){};
    virtual ~DataInterface(){};

    virtual void FetchData(void) = 0;
    virtual void ProcessData(void) = 0;
    virtual void ClearData(void) = 0;
    virtual boost::variant<bool,int,double,std::string> GetData()=0;
};

class IntResult : public DataInterface{
public:
    IntResult() : resultInt(0){};
    ~IntResult(){};

    virtual void FetchData() override {resultInt = 10;};
    virtual void ProcessData() override {resultInt *= 10;}
    virtual void ClearData() override {resultInt = 0;};

    virtual boost::variant<bool,int,double,std::string> GetData()override{
        return resultInt;
    };

private:
    int resultInt;
};

class StringResult : public DataInterface{
public:
    StringResult() : resultString(""){};
    ~StringResult(){};

    virtual void FetchData() {
        resultString= "Hello World";
    }

    virtual void ProcessData() override {
        std::transform(resultString.begin(), resultString.end(),resultString.begin(), ::toupper);
    }

    virtual void ClearData() override {resultString = "";}

    virtual boost::variant<bool,int,double,std::string> GetData() override {
        return resultString;
    };

private:
    std::string resultString;
};

int main() {

    DataInterface* data;

    IntResult* intResult = new IntResult;
    StringResult* stringResult = new StringResult;

    data = intResult;

    data->FetchData();
    data->ProcessData();

    switch(data->GetData().which()){
        case 0:
            std::cout << "found bool: " << boost::get<bool>(data->GetData()) << std::endl;
            break;
        case 1:
            std::cout << "found int: " << boost::get<int>(data->GetData()) << std::endl;
            break;
        case 2:
            std::cout << "found double: " << boost::get<double>(data->GetData()) << std::endl;
            break;
        case 3:
            std::cout << "found string: " << boost::get<std::string>(data->GetData()) << std::endl;
            break;
        default:
            break;
    }

    data = stringResult;

    data->FetchData();
    data->ProcessData();

    switch(data->GetData().which()){
        case 0:
            std::cout << "found bool: " << boost::get<bool>(data->GetData()) << std::endl;
            break;
        case 1:
            std::cout << "found int: " << boost::get<int>(data->GetData()) << std::endl;
            break;
        case 2:
            std::cout << "found double: " << boost::get<double>(data->GetData()) <<  std::endl;
            break;
        case 3:
            std::cout << "found string: " << boost::get<std::string>(data->GetData()) << std::endl;
            break;
        default:
            break;
    }

    delete intResult;
    delete stringResult;

    return 0;
} 
```

请注意，在您的情况下，bool 可以隐式转换为 int，因此您可以始终简单地返回 int。如果您需要返回真正的异构类型，则变体方法将起作用。等效地，您可以返回 boost any，它还可以让您统一操作类型的异构联合（请参阅[http://www.boost.org/doc/libs/1_59_0/doc/html/any.html](http://www.boost.org/doc/libs/1_59_0/doc/html/any.html)）。最后，如果您不希望对 boost 有任何依赖，那么推出您自己的变体类型并不难，它可以保存不同的类型集。

# sql - Display MemberPath instead of Value in WPF DataGrid

> ID：15708825
> 
> 赞同：0
> 
> 时间：2013-03-29T18:02:52.987
> 
> 标签：sql, wpf, vb.net, datagrid

I have two SQL tables

In table 1 every row have value(string) in System Code column

In table 2 every row have value(int) in Device column which is ID of related Table 1 row.

Now i want to display Table 2 in WPF DataGrid and in Device Column value of System Code from Table 1\. Now it's displaying ID of Table 1 row.

How can i do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:07:12.023

Just create new class for the itmes, where you can store all needed properties. In your case it will be the projection of the join.

DataGrid's `DisplayMemberPath` relates only to the corresponding item. If data item which stands for representation of table's row allows naviagation to the property `SystemCode` of the Table1 then it is ok.

# php - mySQL - 根据登录用户对重复行求和

> ID：15708826
> 
> 赞同：0
> 
> 时间：2013-03-29T18:02:59.337
> 
> 标签：php, mysql

我正在尝试在 mySQL 中做一些简单的数学运算。我有一个用户表和一个活动表。每个活动都值得这么多积分。当我执行“用户身份验证 > 登录用户”时，我可以根据将用户与 Dreamweaver 设置的 $_SESSION 变量匹配来正确显示活动。我什至可以让它显示列的总和。

我无法做到的是仅使用该用户活动来显示所述列的总分。我是使用 Dreamweaver 完成繁重工作的 mySQL 新手，我已经尝试了我能想到的 WHERE 语句和 SUM() 组合的所有组合。

这是我的选择声明：

```
$MM_Username_physTotal = "username";
if (isset($_SESSION['MM_Username'])) {
  $MM_Username_physTotal = $_SESSION['MM_Username'];
}
mysql_select_db($database_som13connect, $som13connect);
$query_physTotal = sprintf("SELECT SUM(activity.Phys_points) FROM activity WHERE activity.`User` = %s", GetSQLValueString($MM_Username_physTotal, "text"));
$physTotal = mysql_query($query_physTotal, $som13connect) or die(mysql_error());
$row_physTotal = mysql_fetch_assoc($physTotal);
$totalRows_physTotal = mysql_num_rows($physTotal); 
```

这是我选择上述绑定时 Dreamweaver 插入的 CURRENT 语句：

```
<?php echo $physTotal['Phys_points']; ?> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:04:57.977

尝试在周围添加引号`%s`

```
$query_physTotal = sprintf("SELECT SUM(activity.Phys_points) FROM activity WHERE activity.`User` = '%s'", GetSQLValueString($MM_Username_physTotal, "text")); 
```

您需要`varchar/text`在 SQL 查询中用单引号将值括起来

# xcode - 在 xcode 4.6 中从命令行设置 #define

> ID：15708831
> 
> 赞同：8
> 
> 时间：2013-03-29T18:03:29.380
> 
> 标签：xcode, xcode4, xcodebuild

在使用 xcodebuild 进行命令行构建并且没有运气时，我正在尝试设置 #define 宏。

我已经尝试过了`-DMYMACRO=1`，`MYMACRO=1`我能想到的一切都没有，但没有任何效果。

如何从命令行设置#define？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-29T08:31:30.130

罗杰，

您正在寻找的是一种通过命令行工具 xcodebuild 设置 GCC_PREPROCESSOR_MACROS 的方法。xcodebuild 的手册页显示了应用这些设置的格式，但是 SYNOPSIS 部分仅将此称为“setting=value ...”

> ```
>  xcodebuild [-project projectname] -scheme schemename [-configuration configurationname] [-sdk [sdkfullpath | sdkname]] [buildaction ...] [setting=value ...] [-userdefault=value ...]
>  xcodebuild -workspace workspacename -scheme schemename [-configuration configurationname] [-sdk [sdkfullpath | sdkname]] [buildaction ...] [setting=value ...] [-userdefault=value ...] 
> ```

最终，您可以通过使用此格式并知道您希望更改的实际构建设置名称直接在命令行上设置任何构建设置值。自然，这就引出了一个问题……

**如何找到构建设置名称？**

很高兴你问！Xcode 4 的侧边栏是查找实际命令行构建设置名称的最简单位置。

![带注释的构建设置屏幕剪辑](../Images/e38a1ccb3a5c13fb1846140d822895b3.png)

在查找构建设置名称时，Xcode 4 实用工具侧边栏的 Quick Help Inspector 是查找的地方。

1.  访问项目的构建设置屏幕。
2.  通过单击 Xcode 右上角的 Organizer 按钮旁边的“Utilities”按钮，确保 Sidebar（Xcode 称为“Utilities”）可见。
3.  在实用程序侧边栏中，确保“快速帮助检查器”可见。

> 或者，使用 Option+Command+2 直接显示快速帮助检查器！

最后，您已准备好找到您的构建设置：

1.  搜索要更改的构建设置或滚动浏览构建设置列表。
2.  单击您感兴趣的构建设置并观察快速帮助检查器更新。
3.  快速帮助检查器的“声明”部分显示了您要使用的命令行构建设置名称。

对于您最初询问的预处理器宏设置，该设置是：

> GCC_PREPROCESSOR_DEFINITIONS

将其拉回到您的原始问题，您可以在命令行上设置此构建设置，只需提供 SETTING_NAME='DESIRED_VALUE' 以及 xcodebuild 命令的其余部分。对于一个名为“TestApp”的快速小测试项目，我希望将预处理器宏“BKM”设置为值 1，我的 xcodebuild 命令将是：

> xcodebuild -project TestApp.xcodeproj -scheme TestApp GCC_PREPROCESSOR_DEFINITIONS='${inherited} BKM=1'

**你为什么把 ${inherited} 放在那里？**

如果您使用的是预处理器宏，那么您可能使用的不止一个。其中一些您可能不想从命令行更改，但仍已编码到目标或项目的构建设置中。'${inherited}' 的使用指示 xcodebuild 也使用在更高级别定义的构建设置，而不是仅使用我们在 xcodebuild 命令中定义的那些。在大多数情况下，您需要使用 ${inherited} 来提取您设置的任何其他配置值。

**我必须用撇号包装价值吗？**

如果您想设置多个值，那么是的，您需要将值包含在撇号中，否则如果您从命令行设置两个或多个预处理器宏，则第二个 + 宏将被解释为构建设置而不是预处理器宏...不完全正确的行为。撇号用作将多个值收集在一起的一种方式。对于我的示例 xcodebuild 命令，我想让 xcodebuild 使用继承的预处理器宏集以及我的特定 BKM 设置，因此我将值包装在撇号中，以告诉 xcodebuild 将它们都视为预处理器宏。

**这也适用于工作区吗？**

绝对地！只需修改命令以使用 -workspace 参数而不是 -project 参数，您就可以开展业务了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-30T11:30:23.013

### 斯威夫特 5+，Xcode 13+

您可以这样传递`OTHER_SWIFT_FLAGS`给 xcodebuild：

```
xcodebuild \
    build \
    "OTHER_SWIFT_FLAGS=${inherited} -D STAGING" \
    -target "TargetName" \
    -scheme "SchemeName" 
```

这将导致以下结果：

```
#if STAGING
// this will compile
#else
// this won't compile
#endif 
```

# html - Tumblr：询问和自定义页面

> ID：15708832
> 
> 赞同：2
> 
> 时间：2013-03-29T18:03:55.253
> 
> 标签：html, css, themes, tumblr

我正在设计一个主题，但是每当我进入询问页面或自定义/不存在的页面时，它都会显示在永久链接页面上......带有小侧边栏和我为此设置的所有内容......有没有人知道任何方法将它们与此分开，以便它像其他所有内容一样显示在白框中？

[http://iveytesting3.tumblr.com/ask](http://iveytesting3.tumblr.com/ask)

^我正在研究的主题

叹息，我找到了一种非常烦人的方法来解决它..但我仍然想知道是否有更简单的方法？

显然，tumblr 在文本帖子的永久链接页面上加载了询问、提交和自定义/静态页面。为了绕过我所做的文本帖子的永久链接页面的样式，我不得不插入一堆{block:Date} 标签围绕着一切......只是为了提取文本帖子的 {title} 和 {body} 标签......

有人知道更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:34:25.547

包装您不想在索引块中显示的不需要的额外项目？

{块：索引页}

等等等等等等

{/block:索引页}

# ruby - 用 Nokogiri 包裹

> ID：15708839
> 
> 赞同：1
> 
> 时间：2013-03-29T18:04:22.387
> 
> 标签：ruby, svg, nokogiri

如果这个问题已经得到解答，我深表歉意，但我找不到正确的方法来解决这个问题。我正在使用 Nokogiri 修改通过应用程序生成的 SVG 图表，但遇到了一些问题。我正在使用的代码如下所示：

```
<svg>
    <g id="1">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="2">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="3">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
<svg> 
```

我希望将其附加到每个文档中，因为它是由脚本分析的：

```
<svg>
  <g id="scale" transform="scale(1.0)">
    <g id="1">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="2">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="3">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
   </g>
<svg> 
```

我尝试过使用 before 和 after 等方法，但在这种情况下无法正常工作。理想情况下，我只是用 wrap 包装整个节点集，但我不知道如何让它在所有集上工作，而不是在每个节点集上工作。任何指导将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:22:42.567

这是我的做法：

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<svg>
    <g id="1">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="2">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="3">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
</svg>
EOT

svg = doc.at('svg')
svg.children = '<g id="scale" transform="scale(1.0)">' + svg.children.to_xml + '</g>'
puts svg.to_xml 
```

运行输出：

```
<svg>
  <g id="scale" transform="scale(1.0)">
    <g id="1">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="2">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="3">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
</g>
</svg> 
```

Nokogiri 很好地让我们将节点定义为字符串，并将它们强制转换为`XML::Node`对象。给它一个包含 XML 的字符串，它会将其转换为 NodeSet，这样我们就可以干净利落地操作 XML DOM，而无需编写 u-gly 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:04:06.923

```
doc = Nokogiri.XML( raw_svg )
wrapper_g = doc.create_element('g', 'id' => "scale", 'transform' => "scale(1.0)")
doc.xpath('/svg/g').each {|elem| wrapper_g << elem }
doc.root << wrapper_g 
```

可选 - 删除空文本节点：

```
doc.xpath('//text()').each {|t| t.text =~ /\A\s*\z/ and t.remove } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:04:51.147

[备忘单](https://github.com/sparklemotion/nokogiri/wiki/Cheat-sheet)可能会有所帮助。

```
require 'nokogiri'

doc = Nokogiri::XML(%Q{
<svg>
    <g id="1">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="2">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
    <g id="3">
        <text>lorem</text>
        <text>ipsum</text>
    </g>
</svg>
})

svg = doc.xpath('//svg')[0]
wrapper = doc.create_element('g', 'id' => 'scale', 'transform' => 'scale(1.0)')
wrapper.children = svg.children
svg.add_child wrapper

puts doc 
```

请注意，您错过了结束`svg`标记处的斜线。

# unix - 排序 column2 Unix

> ID：15708842
> 
> 赞同：0
> 
> 时间：2013-03-29T18:04:33.230
> 
> 标签：unix, sorting

我在 unix 中的排序命令有问题我有一个包含如下行的文本文件：

```
de la (-0.167969404167593)
de l (-0.137148984295644)
la commission (0.0922090559997898)
à la (-0.115188946405936)
à l (-0.0936395578796088)
c est (0.130628584805583) 
```

我想根据括号中值的降序对这些句子进行排序我这样做命令：

```
sort 2fr -t"(" -k2r > 2frsort 
```

但它没有正确排序有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:47:25.197

你在使用 GNU`sort`吗？如果是这样，`-g`选项处理指数符号

`sort -t '(' -k 2 -g -r`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:08:15.907

您可以在第二列上使用数字排序：

```
$ sort --numeric-sort --field-separator '(' --reverse --key 2 test.dat
c est (0.130628584805583)
la commission (0.0922090559997898)
à l (-0.0936395578796088)
à la (-0.115188946405936)
de l (-0.137148984295644)
de la (-0.167969404167593) 
```

# xcode - Xcode Storyboard 新项目全宽和高

> ID：15708853
> 
> 赞同：1
> 
> 时间：2013-03-29T18:04:47.497
> 
> 标签：xcode, object, storyboard, size, dimensions

当我将对象拖到 Xcode Storyboard 中的视图时，它假定包含视图的完整宽度和高度，而不是默认尺寸。例如，我将一个 UIButton 拖到 iPad 视图上，突然它变成了 1024x768 像素，并且由于某种原因，在右侧标尺的配置窗口中，宽度和高度属性显示为灰色。任何想法为什么会这样以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:12:48.910

根据我们上面的评论，只需先向视图控制器添加一个视图，然后添加按钮。

# sql - SQL - 转换值，计算多列中的实例数

> ID：15708862
> 
> 赞同：1
> 
> 时间：2013-03-29T18:05:21.023
> 
> 标签：sql, sql-server-2008, unpivot

我对 SQL 很陌生，不知道如何完成以下任务：我在表中有一组数据，我需要将数据转换为两个值之一，然后将每个值的总数相加一对汇总列中的行。见下文：

表1：

```
row    P1    P2    P3
---    ---   ---   ---
1      a     b     c
2      a     a     a
3      b     c     b
4      a     b     b
5      NULL  NULL  NULL 
```

转换表为：

```
PNum    PType
----    -----
a       car
b       truck
c       car 
```

期望的最终结果：

```
row    P1    P2    P3    numCars    numTrucks
---    ---   ---   ---   -------    ---------
1      a     b     c     2          1
2      a     a     a     3          0
3      b     c     b     1          2
4      a     b     b     1          2
5      NULL  NULL  NULL  NULL       NULL 
```

获取测试表的代码：

```
DECLARE @tbl1 TABLE(P1 VARCHAR,P2 VARCHAR,P3 VARCHAR)

INSERT INTO @tbl1
SELECT 'a','b','c' UNION ALL
SELECT 'a','a','a' UNION ALL
SELECT 'b','c','b' UNION ALL
SELECT 'a','b','b'

DECLARE @tbl2 TABLE(PNum VARCHAR,PType NVARCHAR(100))

INSERT INTO @tbl2
SELECT 'a','car' UNION ALL
SELECT 'b','truck' UNION ALL
SELECT 'c','car' 
```

我一直在研究 PIVOT，但我很难看到如何实现它，（尤其是转换部分）。我考虑过尝试首先插入一组列来转换值（例如“P1_converted”），然后尝试总结它们，但我的实际表有 10 个这些类型的列，我不想添加额外的 10 列如果有更简单的方法，请放到桌子上。有什么想法吗？谢谢！

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:19:55.850

您可以使用以下内容对数据进行*反透视*以获取汽车和卡车的总数。

您可以使用该`UNPIVOT`函数，但由于您使用的是 SQL Server 2008，因此您可以使用`CROSS APPLY`and`VALUES`将您的`P1`、`P2`和`P3`from 列转换为行。转换数据的代码是：

```
select *
from tbl1 
cross apply 
(
  values ('p1', p1), ('p2', p2), ('p3', p3)
) c(col, value) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/2f2f8/18)。这会将数据转换为以下格式：

```
| P1 | P2 | P3 | COL | VALUE |
------------------------------
|  a |  b |  c |  p1 |     a |
|  a |  b |  c |  p2 |     b |
|  a |  b |  c |  p3 |     c |
|  a |  a |  a |  p1 |     a | 
```

一旦数据在行中，您就可以轻松地加入转换表以获取每行的计数：

```
select rn, p1, p2, p3,
  sum(case when t.ptype = 'car' then 1 else 0 end) numCars,
  sum(case when t.ptype = 'truck' then 1 else 0 end) numTrucks
from
(
  select p1, p2, p3,
    row_number() over(order by p1, p2, p3) rn
  from tbl1
) d
cross apply (values ('p1', p1), ('p2', p2), ('p3', p3)) c(col, value)
inner join tbl2 t
  on c.value = t.pnum
group by rn, p1, p2, p3 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/2f2f8/16)。这给出了结果：

```
| RN | P1 | P2 | P3 | NUMCARS | NUMTRUCKS |
-------------------------------------------
|  1 |  a |  a |  a |       3 |         0 |
|  2 |  a |  b |  b |       1 |         2 |
|  3 |  a |  b |  c |       2 |         1 |
|  4 |  b |  c |  b |       1 |         2 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:40:58.570

这是使用略有不同的方法`PIVOT`：

```
SELECT * FROM 
(
  SELECT d.[row], d.P1, d.P2, d.P3, t.PType,
    [tc] = CASE WHEN t.PNum = d.P1 THEN 1 ELSE 0 END
         + CASE WHEN t.PNum = d.P2 THEN 1 ELSE 0 END
         + CASE WHEN t.PNum = d.P3 THEN 1 ELSE 0 END
  FROM @tbl1 d CROSS JOIN @tbl2 t
) AS x
PIVOT (SUM([tc]) FOR PType IN ([car],[truck])) AS p; 
```

# php - 获取头像返回空值

> ID：15708864
> 
> 赞同：2
> 
> 时间：2013-03-29T18:05:25.883
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在尝试通过以下代码使用 PHP SDK 以指定的宽度和高度访问我的个人资料图片：

```
$picture = $facebook->api('/me/picture', array('width'=>'160', 'height'=>'160')); 
```

这会`null`在转储时给出一个数组！但在 GRAPH API Explorer 中，它提供了一个带有图片 URL 的数组！

在 API Explorer 中，这是我使用的：`/me/picture?width=160&height=160`

同样，我尝试只访问图片，而不传递任何参数。效果也一样！

知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:33:18.303

终于找到了！

我们必须添加`redirect=false`参数。然后只有它会返回数据！

使用 PHP SDK 实现：

```
$picture = $facebook->api('/me/picture', array('width'=>'160', 'height'=>'160', 'redirect'=> 'false')); 
```

# javascript - 导航历史和滚动位置

> ID：15708865
> 
> 赞同：0
> 
> 时间：2013-03-29T18:05:39.277
> 
> 标签：javascript, ajax, angularjs, single-page-application

我试图弄清楚在浏览器中使用后退或前进按钮导航时如何保留视图状态。在 Angular 中处理历史数据和滚动位置的好习惯是什么？

谢谢！

# java - 显示来自不同应用程序的最近 10 个访问页面

> ID：15708870
> 
> 赞同：0
> 
> 时间：2013-03-29T18:05:51.567
> 
> 标签：java, jquery, jsp, android-activity

我有近 20 多个来自不同 Web 应用程序的页面，用户一旦登录就可以访问这些页面。我的主页上有这个“最近的活动”部分，我必须在其中显示用户最近访问的 10 个页面（如果可能的话，还包括访问的日期和时间）。这些页面是jsp页面。我不知道如何实现这一点，基本上我更像是一个前端开发人员，所以我可以使用 jquery、jsp、js 等或任何其他技术来做到这一点。我们也使用 Java 技术。请让我知道任何示例代码或方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:13:31.663

我是一名 php 开发人员，对 jsp 不太熟悉，但我相信这将是相同的逻辑。

您在这里有 2 个选项：

选项 1：创建数据库表并记录用户访问应用程序时的所有用户流。

选项 2：

将所有流保存在 cookie 变量中，这样每当用户登录时，您就可以从 cookie 变量中提取他的所有信息。

我个人宁愿使用选项 1，因为如果使用清除 cookie/会话变量，您将丢失所有信息。

由于我不是 jsp，因此无法提供示例代码。希望这至少能让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:15:36.310

此信息可能存储在 Cookie 或用户会话中。

如果它在 cookie 上可用，您可以使用 JavaScript 或任何其他服务器端语言访问和操作它。

你想要一些关于如何使用 JSP&Servlets 的例子吗？

每种方法都有优点和缺点。

Cookies：用户可以清理私人浏览器数据，cookies 随之消失。

会话：您可以将其存储在某个数据库或日志文件中，以供将来加载或/和分析。

缺点是在任何层中对这些数据的管理。但这不是一个大问题。

# php - 无需在 PHP 中提交表单即可在单击按钮时重定向到页面

> ID：15708878
> 
> 赞同：1
> 
> 时间：2013-03-29T18:06:26.307
> 
> 标签：php, javascript, redirect, buttonclick

我正在尝试通过`addparty.php?edit=true&id=1`单击按钮将我的页面重定向到某个位置 ( )。我将 JavaScript 用于静态值。这是代码：

这是我的 PHP 代码和 JavaScript 函数。

```
$result=mysql_query("SELECT * FROM party ORDER BY partyName");
echo mysql_error();
while($note = mysql_fetch_array($result))
{
  echo "<tr>";
  echo "<td><label>$note[partyId]</label></td>";
  echo "<td><label>$note[partyName]</label></td>";
  echo "<td><label>$note[partyAddress]</label></td>";
  echo "<td><label>$note[partyBankAcc]</label></td>";
  echo "<td><label>$note[partyBankName]</label></td>";
  echo "<td><label>$note[partyRTGSCode]</label></td>";
  echo "<td><label>$note[partyEmail]</label></td>";
  echo '<td><button name="change" id="change" value="$note[partyId]" 
                    onClick="check();">Edit</button>
  echo "</tr>";
} 
```

Javascript代码：

```
function check()
{
    window.location.href="addparty.php?edit=true&id=1";
} 
```

在这里，我从派对表中获取所有值。我想去`addparty.php?edit=true&id=$note[partyId]`。如果你看到`onClick`它调用`check()`函数的事件。现在我`id=1`的是静态的，它可以工作，但我想要那个`id=$note[partyId]`（这是每个派对的唯一派对 ID）。

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:10:13.387

将按钮更改为：

```
echo '<td><button name="change" id="change" onClick="check(' . $note['partyId'].');">Edit</button>'; 
```

将javascript更改为此：

```
function check(id)
{
    window.location.href="addparty.php?edit=true&id=" + id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:11:43.860

尝试将`$note[partyId]`作为参数添加到您的`check()`-

```
function check(partyId)
{
    window.location.href="addparty.php?edit=true&id="+partyid;
} 
```

和

```
echo '<td><button name="change" id="change" onClick="check('.$note['partyId'].');">Edit</button> 
```

# php - 取本月和上月表中的值

> ID：15708879
> 
> 赞同：0
> 
> 时间：2013-03-29T18:06:29.110
> 
> 标签：php, mysql

好吧，我正在使用 DATEDIFF 命令，但是遇到了问题。

```
$sql = "SELECT * FROM usu4r10s WHERE premium IS NULL AND DATEDIFF(NOW(), `data`) < 30";
$sql = "SELECT * FROM usu4r10s WHERE premium IS NULL AND DATEDIFF(NOW(), `data`) > 0"; 
```

据我了解，他选择日期并扣除30天对吗？但该代码有问题，不知道时间戳如何

我们是三月吧？想用更实际的方式得到二月和三月的数值。也许这个问题有点傻，但在发布我的问题之前我尝试了太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:08:36.473

在过去的两个月里，你会使用类似..

```
SELECT ... FROM usu4r10s WHERE date > DATE_SUB(NOW(), INTERVAL 60 DAY) 
```

这将获取`date`大于`January, 28 2013 18:02:24+0000`（截至目前）的记录。

# php - 如何将数组作为变量传递给新函数php

> ID：15708886
> 
> 赞同：-1
> 
> 时间：2013-03-29T18:06:58.297
> 
> 标签：php, arrays, function

我试图让我的头脑围绕数组。这是对上一个问题的跟进。 [PHP 如何将值从一个数组传递到另一个数组？](https://stackoverflow.com/questions/15697292/php-how-can-i-pass-values-from-one-array-to-another)

所以，我已经弄清楚了如何将数据从一个数组传递到另一个数组，这要归功于：[Explosion Pills](https://stackoverflow.com/users/454533/explosion-pills)，但现在我正在尝试获取数组并将其传递给一个新函数，然后在新函数中创建新数组。我猜这比现在对我来说似乎更容易。

这是数组：

```
$theSetup = array(

        'option1' => array('title'=>'my_title','label'=>'The Big Title','val'=>'NoneyoBizness'),
        'option2' => array('title'=>'my_watch,'label'=>'Big Watch','val'=>'Seiko'),
        'option3' => array('title'=>'facebook','label'=>'Facebook Page','val'=>'http://facebook.com/bigwatch'),

); 
```

这是我的测试功能：

```
function testArray($theSetup) {
    foreach($theSetup as $v) {
        $defaultOptions[$v['title']] = $v['val'];
    }
    foreach($defaultOptions as $k=>$v) {
        echo $k .' : '.$v .'<br>';
    }
} 
testArray($theSetup); 
```

运行代码后出现错误：`undefined variable theSetup`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:12:03.400

您需要使用文本编辑器，当您的 PHP 代码出现错误时，该编辑器会向您显示。

这工作正常：

```
<?php
    $theSetup = array(

            'option1' => array('title'=>'my_title','label'=>'The Big Title','val'=>'NoneyoBizness'),
            'option2' => array('title'=>'my_watch','label'=>'Big Watch','val'=>'Seiko'),
            'option3' => array('title'=>'facebook','label'=>'Facebook Page','val'=>'http://facebook.com/bigwatch'),

    );

    function testArray($theSetup) {
        foreach($theSetup as $v) {
            $defaultOptions[$v['title']] = $v['val'];
        }
        foreach($defaultOptions as $k=>$v) {
            echo $k .' : '.$v .'<br>';
        }
    } 
    testArray($theSetup);
?> 
```

这不会：

```
<?php
    $theSetup = array(

            'option1' => array('title'=>'my_title','label'=>'The Big Title','val'=>'NoneyoBizness'),
            'option2' => array('title'=>'my_watch,'label'=>'Big Watch','val'=>'Seiko'),
            'option3' => array('title'=>'facebook','label'=>'Facebook Page','val'=>'http://facebook.com/bigwatch'),

    );

    function testArray($theSetup) {
        foreach($theSetup as $v) {
            $defaultOptions[$v['title']] = $v['val'];
        }
        foreach($defaultOptions as $k=>$v) {
            echo $k .' : '.$v .'<br>';
        }
    } 
    testArray($theSetup);

?> 
```

不同的是我在“my_watch”之后关闭了你的引号。

Output

```
This works fine: my_title : NoneyoBizness
my_watch : Seiko
facebook : http://facebook.com/bigwatch 
```

# windows - 如何跟踪 ADO 调用

> ID：15708893
> 
> 赞同：2
> 
> 时间：2013-03-29T18:07:26.877
> 
> 标签：windows, vb6, ado

朋友们，有没有一种工具可以跟踪在 ADO (legacy vb6) (NOT ADO.NET) 和数据库服务器之间传递的所有 sql 语句？感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:00:47.630

您是否已经看过一些上述软件[的 ADO 应用程序的免费（如啤酒）Statement Tracer ？](http://www.aboves.com/products/statement_tracer_for_ado/)从节目网站：

> 用于监控对 Microsoft® ActiveX® 数据对象 (ADO) 数据源的 SQL 查询的解决方案。
> 
> *   监控任意数量的应用程序。
> *   实时跟踪 ADO 查询。
> *   随时启用和禁用监控。

坦率地说，我以前从未使用过或听说过它。但是使用 VB6 ADO 应用程序与 SQL Server 2008 Express 进行快速测试看起来不错：该工具确实从 ADODB.Connection.Open() 中捕获了连接字符串，并从 ADODB.Connection.Execute() 中捕获了 SQL 语句文本。

# java - Java 编译器中将方法名称替换为文字字符串的机制

> ID：15708894
> 
> 赞同：0
> 
> 时间：2013-03-29T18:07:30.953
> 
> 标签：java

Java中是否有一个关键字（或等价物），编译器用关键字出现的方法（和/或类等）的名称替换？这将类似于

```
__FUNCTION__ 
```

宏是 C/C++。

我知道Java“不支持宏”，但我不是要求用户#define'able 宏，只是用编译器知道的文字字符串替换的一小组关键字。

我知道有一些方法可以让一段代码出现在（[http://www.rgagnon.com/javadetails/java-0420.html](http://www.rgagnon.com/javadetails/java-0420.html)）中，但我假设这些方法不是免费的。毫不奇怪，如果这个功能存在，我想在跟踪中使用它，所以它确实需要零成本或非常接近它。

我想这取决于编译器的实现，所以也许我的问题是通常的 Java 编译器（无论 JDK 附带什么）是否支持这一点。

如果不是，我不明白为什么它不可用，因为它看起来很有用，我认为编译器提供它是微不足道的，因为它肯定知道它正在编译的代码的方法名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:09:10.437

在最终方法的情况下，编译器可能会用方法的实际主体（如宏）替换调用。这种机制称为`inlining`。

在 C++ 中，我们可以选择声明一个函数 a `inline`。

# macos - PyDev 报告站点包中已安装模块的导入错误，但运行代码

> ID：15708896
> 
> 赞同：0
> 
> 时间：2013-03-29T18:07:35.233
> 
> 标签：macos, python-2.7, python-imaging-library, pydev

我刚刚开始在 MacOS 10.8.3 上使用 PyDev for Python 2.7。我唯一的问题是线路...

```
from PIL import Image 
```

它报告“未解决的导入：图像”。但是，我可以从命令行和 PyDev 中运行代码，并且导入在 PyDev 控制台中工作。

我有两个...

```
/Library/Python/2.7/site-packages
/Library/Python/2.7/site-packages/PIL 
```

...在 Preferences->PyDev->Interpreter-Python->Libraries 部分中。我已经运行 Apply，重做整个事情，并尝试了其他一些其他人报告的类似问题的事情。有谁知道解决这个问题的任何明确方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:18:55.593

我找到了两种不同的方法来解决这个问题：

1.  转到 Preferences -> PyDev -> Interpreter - Python -> Forced Builtins，单击“New...”并输入“PIL”（不带引号）。单击确定两次并重新启动 Eclipse。

2.  将您的导入语句更改为“导入图像”而不是“从 PIL 导入图像”。

# c# - 上传图片（blob 类型）-Asp.Net-C#-Oracle 11g ex

> ID：15708903
> 
> 赞同：0
> 
> 时间：2013-03-29T18:08:00.830
> 
> 标签：c#, javascript, asp.net, c#-4.0, oracle11g

我一直在尝试使用 asp FileUpload 控件对图像执行简单的上传操作，并将其保存在 Oracle 数据库中。虽然我已经硬编码了几行，但我还是成功了。但是，我真的很想了解这个问题，并寻求专家的意见。经过大量谷歌搜索后，我尝试在我的 Web 应用程序中使用各种代码片段，但最终失败了。这是部分对我有用的代码。

```
protected void btnSubmit_Click(object sender, EventArgs e)
    {
        String strFileName = Path.GetFileName(imgUpload.PostedFile.FileName);
        String strFileExtension = Path.GetExtension(imgUpload.PostedFile.FileName);
        byte[] byteArray = null;
        if (imgUpload.PostedFile != null)
        {
            using (FileStream fs = new FileStream(strFileName, FileMode.Open, FileAccess.Read, FileShare.Read))
            {
                byteArray = new byte[fs.Length];
                int iBytesRead = fs.Read(byteArray, 0, (int)fs.Length);
            }
            string sql = " INSERT INTO IMAGETBL(ID,IMAGE) VALUES(:ID, :IMAGE) ";
            OracleConnection conn = new OracleConnection("Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVER_NAME=XE)));User Id=sakthi_studdb;Password=sakthi;");
            try
            {
                conn.Open();
                OracleCommand cmd = new OracleCommand(sql, conn);
                cmd.Parameters.Add("ID", OracleDbType.Int32, 4, ParameterDirection.Input);
                cmd.Parameters.Add("IMAGE", OracleDbType.Blob, byteArray, ParameterDirection.Input);
                cmd.ExecuteNonQuery();
                secondlabel.Text = "Image added to blob field";
            }
            catch (Exception ex)
            {
                secondlabel.Text = ex.ToString();
            }
            finally
            {
                conn.Close();
            }
        }

    } 
```

当我运行这段代码时，它会提示 Filenotfound 错误。找不到文件 'C:\Program Files\Common Files\Microsoft Shared\DevServer\10.0' 然后为了让它工作，我必须手动复制粘贴我的图像文件到上述位置。必须有一种方法可以创建一个目录并将图像临时保存在那里。稍后应将相同的图像插入 Oracle 数据库中。

```
 HttpPostedFile imgFile = imgUpload.PostedFile;
            int imgFileLength = imgFile.ContentLength;
            if (imgFileLength > 0)
            {
                var fileName = System.IO.Path.GetFileName(imgFile.FileName);
                var fileUpload = Path.Combine(Server.MapPath("~/user_uploads"), fileName);
                imgFile.SaveAs(fileUpload);
                if (System.IO.File.Exists(fileUpload))
                {
                    using (System.IO.StreamReader sr = new System.IO.StreamReader(fileUpload))
                    {
                        var input = sr.ReadToEnd();
                        var lines = Regex.Split(input, "#!#"); 
```

还有一个。。

`string path = HttpContext.Current.ApplicationInstance.Server.MapPath("~/user_uploads"); string fn = System.IO.Path.GetFileName(imgUpload.PostedFile.FileName); imgUpload.PostedFile.SaveAs(System.IO.Path.Combine(path, fn));
Mylabel.Text = Path.GetFullPath(strFileName); imgUpload.PostedFile.SaveAs(strFileName);`

我几乎看不懂这些片段。此外，如果你知道更简单的方法来完成同样的建议。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:38:13.457

如果您只是上传一个文件并想将其推送到 Db，您应该能够获取并使用 postedFile 值。

调整你的第一个片段：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    if (imgUpload.PostedFile != null)
    {
        BinaryReader b = new BinaryReader(imgUpload.InputStream);
        byte[] byteArray = b.ReadBytes(imgUpload.ContentLength);

        string sql = " INSERT INTO IMAGETBL(ID,IMAGE) VALUES(:ID, :IMAGE) ";
        OracleConnection conn = new OracleConnection("Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVER_NAME=XE)));User Id=sakthi_studdb;Password=sakthi;");
        try
        {
            conn.Open();
            OracleCommand cmd = new OracleCommand(sql, conn);
            cmd.Parameters.Add("ID", OracleDbType.Int32, 4, ParameterDirection.Input);
            cmd.Parameters.Add("IMAGE", OracleDbType.Blob, byteArray, ParameterDirection.Input);
            cmd.ExecuteNonQuery();
            secondlabel.Text = "Image added to blob field";
        }
        catch (Exception ex)
        {
            secondlabel.Text = ex.ToString();
        }
        finally
        {
            conn.Close();
        }
    }

} 
```

# javascript - 如何将javascript对象变量转换为类

> ID：15708908
> 
> 赞同：4
> 
> 时间：2013-03-29T18:08:28.060
> 
> 标签：javascript

如何定义一个以后可以实例化的类？

我使用 jquery 为自己编写了一个旋转器类，如下所示：

```
var Rotator =
{
Loop: null,

init: function(identifierName)
    {
    ........
    }
} 
```

如果我想在我的页面上有一个旋转器，那很好。我只是打电话`Rotator.init()`，它已经准备好了。但是，当我想要 3 个旋转器时，我必须定义 3 次整个类代码更改其名称。

如果我能做到，那就容易多了

```
 Instance1 = new rotator;
  Instance2 = new rotator;
  Instance3 = new rotator; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:10:47.477

以下是您的对象文字可能看起来像一个可以多次实例化的可重用命名函数：

```
var Rotator = function(name) {
    this.Name = name;
    this.Loop = null;

    this.init = function(identifierName)
    {
        this.Name = identifierName;
    };
};

// usage:

var foorotator = new Rotator('foo');
var barrotator = new Rotator('bar');

alert(foorotator.Name);
alert(barrotator.Name); 
```

[http://jsfiddle.net/JzWCL/](http://jsfiddle.net/JzWCL/)

**编辑后：**

[http://jsfiddle.net/mPzsq/](http://jsfiddle.net/mPzsq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:27:29.937

对于只使用一次的类对象，Xander 的解决方案看起来是一种可接受的形式。但是，如果您计划对其进行子类化或多次实例化，则应将方法应用于原型，而不是在主类（构造函数）函数中定义它们。例如：

```
var Rotator = function(name) {
    //run your initialization logic inside this constructor function
    this.Name = name;
    this.Loop = null;
}

Rotator.prototype.someMethod = function() {
    //method code
}

var rotator1 = new Rotator('foo');
var rotator2 = new Rotator('bar'); 
```

使用这种结构的原因是为了防止每次实例化类时都重构方法。通过将方法应用于原型，它们将在类的所有实例之间共享。

我发现这对 JavaScript 类定义的一些基础知识很有帮助： [3 Ways to Define a JavaScript Class](http://www.phpied.com/3-ways-to-define-a-javascript-class/)

# php - codeigniter 网址 http://www.website.com/index.php/index.php/page

> ID：15708910
> 
> 赞同：0
> 
> 时间：2013-03-29T18:08:37.710
> 
> 标签：php, codeigniter

我一直在努力让 .htaccess 文件在 codeigniter 上工作，当你加载除索引之外的任何其他页面时，我遇到了这个问题，每次你点击我导航栏中的链接时，它都会在 index.php/ 上添加，所以在首先点击一个链接，你最终会得到类似[http://www.website.com/index.php/index.php/page](http://www.website.com/index.php/index.php/page)

[当我从网站http://website.com/new/index.php/website.com/new/img/gallery/fw1.jpg](http://website.com/new/index.php/website.com/new/img/gallery/fw1.jpg)打开图像时

我的链接与 index.php/About">Aboutour 团队相同

我的配置文件 $config['base_url'] = 'website.com/new/';

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:27:40.927

我使用以下 .htaccess 文件，该文件一直适用于 CodeIgniter：

```
<IfModule mod_rewrite.c>
     RewriteEngine on

     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d

     RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

您还应该检查您的 application/config/config.php 文件以确保它具有以下行（空白的 base_url 设置意味着 CodeIgniter 将自动生成它）：

```
$config['base_url'] = '';
$config['index_page'] = ''; 
```

您可能还想检查自己是否正确生成了链接。您可以对每个链接使用 site_url() 以确保最大的可移植性。例如

```
<a href='<?=site_url('about')?>>About</a> 
```

# lisp - 你可以在 Lisp 上不使用 REPL 编程吗？

> ID：15708911
> 
> 赞同：3
> 
> 时间：2013-03-29T18:08:44.807
> 
> 标签：lisp, common-lisp, read-eval-print-loop, land-of-lisp

所以我刚拿到Land of Lisp，开始做第一个程序。我有几个问题。

有没有办法只编写一些代码并通过编译器或解释器运行它，而不使用 REPL 东西？我不太喜欢。如果我搞砸了，我似乎无法回去。它只是说“哈，你搞砸了，重新输入整个函数。”

我也想知道 REPL 的意义是什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-29T18:40:10.190

## 非 REPL 工作流程

1.  编辑您的文件
2.  [`compile-file`](http://www.lispworks.com/documentation/HyperSpec/Body/f_cmp_fi.htm)使用;编译文件 修复错误和警告；重复。
3.  [`load`](http://www.lispworks.com/documentation/HyperSpec/Body/f_load.htm)使用;加载文件 评估您想要的形式；重复

## 例子

```
$ cat > f.lisp <<EOF
(defun f (x) (if (zerop x) 1 (* (f (1- x)) x)))
EOF
$ clisp -q -norc -c f.lisp
;; Compiling file /home/sds/f.lisp ...
;; Wrote file /home/sds/f.fas
0 errors, 0 warnings
$ clisp -q -norc -i f.fas -x '(f 10)'
;; Loading file f.fas ...
;; Loaded file f.fas
3628800
$ 
```

## 正确的方式

使用 IDE，例如[带有 SLIME 的 Emacs](http://en.wikipedia.org/wiki/SLIME)。

这样，您可以在支持自动缩进的编辑器中编辑代码，并向您显示每个标准符号的帮助。

您在编写函数后立即编译和测试它们，从而为您提供非常短的开发周期。在后台，这是通过 IDE 与 REPL 交互来完成的（这回答了您的最后一个问题）。

## 什么是 REPL？

Read-Eval-Print 循环是 Edit-Compile-Run 循环的更快、更通用的版本。

不是根据整个程序进行操作（编译起来可能很慢，并且执行导航到被测试的特定位置可能很乏味），而是根据您处理的特定功能进行操作。

例如，在 中`gdb`，您可以使用 执行函数`print my_func(123)`，但如果更改`my_func`，则必须重新编译文件并重新链接整个可执行文件，然后将其重新加载到`gdb`中，然后重新启动该过程。

使用 Lisp 风格的 REPL，您需要做的就是重新`eval`生成，`(defun my-func ...)`并且您可以`(my-func 123)`在提示符处进行操作。

# rest - ServiceStack 为空？

> ID：15708914
> 
> 赞同：2
> 
> 时间：2013-03-29T18:09:03.743
> 
> 标签：rest, servicestack

我想让 R 成为一个可以为空的 int （和一个可以为空的 bool）。我可以`/api/test/1/2`没有问题，但`/api/test/null/2`会导致 SerializationException

```
KeyValueDataContractDeserializer: Error converting to type: Input string was not in a correct format 
```

我尝试这样做`/api/test//2`，但它忽略了双斜杠并认为它是 {Ids}。

如何使 R 可以为空？

```
[Route("/Test")]
[Route("/Test/{Ids}")]
[Route("/Test/{R}/{E}")]
[Route("/Test/a/{Ids}/{R}/{E}/{b}/{f}")]
public class Test
{
    public long[] Ids { get; set; }
    public int? R{get;set;}
    public int E{get;set;}

    public bool? b { get; set; }
    public float f { get; set; }
}
public class TestService : Service
{
    public object Get(Test a)
    {
        return JsonSerializer.SerializeToString(a);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:14:54.137

您的`null`路线中的 被视为字符串文字，显然不是有效数字。基本上，您首先要避免传入 null （即避免指定它），例如，而不是：

```
/api/test/null/2 
```

你可以做：

```
/api/test?E=2 
```

# ruby-on-rails - 使用 rvmrc 或 ruby -version 文件使用 RVM 设置项目 gemset？

> ID：15708916
> 
> 赞同：234
> 
> 时间：2013-03-29T18:09:08.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rvm, rvmrc

我使用 RVM（[Ruby 版本管理器](https://rvm.io/)）为我的每个 Rails 项目指定一个 Ruby 版本和一组 gem。

每当我进入项目目录时，我都有一个`.rvmrc`文件可以自动选择 Ruby 版本和 gemset 。`cd`

安装 RVM 1.19.0 后，我收到一条消息

> 您正在使用`.rvmrc`，它需要信任，速度较慢并且与其他 ruby​​ 管理器不兼容，您可以切换到 `.ruby-version`使用`rvm rvmrc to [.]ruby-version`或忽略此警告`rvm rvmrc warning ignore /Users/userName/code/railsapps/rails-prelaunch-signup/.rvmrc`， `.rvmrc`将继续作为 RVM 1 和 RVM 2 中的默认项目文件，忽略警告所有文件运行`rvm rvmrc warning ignore all.rvmrcs`。

我应该继续使用我的`.rvmrc`文件还是应该切换到一个`.ruby-version`文件？哪个是最优的？有什么后果？

* * *

## 回答 #1

> 赞同：380
> 
> 时间：2013-03-29T18:15:26.593

如果您的`.rvmrc`文件包含自定义 shell 代码，请继续使用`.rvmrc`，因为它允许您包含任何 shell 代码。

如果您的唯一目标是切换 Ruby 版本，请使用`.ruby-version`其他 Ruby 版本切换器（例如[rbenv](https://github.com/sstephenson/rbenv)或[chruby](https://github.com/postmodern/chruby) ）支持的。该文件也不需要信任，因为它只是 Ruby 版本的名称，不会以任何方式执行。

如果您使用`.ruby-version`，您可以包含`@gemset`在文件中，但这将与其他切换器不兼容。`.ruby-gemset`为了保持兼容性，请在其他工具忽略的单独文件中使用 gemset 名称*（它仅与 一起使用`.ruby-version`）*。

例如，如果您有一个简单的`.rvmrc`：

```
rvm use 1.9.3@my-app 
```

它可以转换为`.ruby-version`：

```
1.9.3 
```

并且`.ruby-gemset`：

```
my-app 
```

请务必删除该`.rvmrc`文件，因为它优先于任何其他项目配置文件：

```
rm .rvmrc 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-05-28T13:25:59.587

从 .rvmrc 切换到 .ruby-version + .ruby-gemset 的快捷方式

```
rvm rvmrc to .ruby-version 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-13T20:47:17.733

如果您想以一种简短的方式创建`.ruby-version`and`.ruby-gemset`文件，您可以使用如下命令：

```
rvm use 2.1.1@nancy --create

rvm --create --ruby-version 2.1.1@nancy 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-15T04:50:14.443

你可以两个都试试。转到项目的根目录，创建一个**.rvmrc**文件 ( `touch .rvmrc`)，然后编辑 `rvm use 2.0.0-p451@your_gemset`（您的 ruby​​ 版本和 gemset 名称）。保存此文件后，您可以键入以下命令：

`cd ../your_project`（您在**your_project**目录中），.rvmrc 中的脚本将执行。

RVM 推荐使用 ruby​​-version。您可以运行此命令从 .rvmrc 切换到 .ruby-version

`rvm rvmrc to .ruby-version`

它的作用是创建 2 个文件名**.ruby-version**和**.ruby-gemset**并添加这一行

`ruby-2.0.0-p451`在 .ruby 版本中

`your_gemset`在 .ruby-gemset 中

如果你愿意，你可以尝试手动进行:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-16T11:02:59.677

使用以下命令安装 rvm：

```
\curl -sSL https://get.rvm.io | bash -s stable --rails 
```

安装不同的 ruby​​ 版本：

```
rvm install 1.8.7
rvm install 1.9.2 
```

切换到特定的 ruby​​ 版本。例如 1.8.7：

```
rvm use 1.8.7 
```

要创建宝石：

```
rvm gemset create project_gemset 
```

并使用 gemset：

```
rvm gemset use project_gemset 
```

# pyqt4 - PyQt4 无法导入 QtGui 但可以导入 QtCore

> ID：15708919
> 
> 赞同：6
> 
> 时间：2013-03-29T18:09:19.383
> 
> 标签：pyqt4, python-3.3, qtgui

我在这个 Windows 7 32 位上安装了 python3.3 x86（官方 python.org 安装程序）

然后从此处为 python3.3 windows x86 安装 PyQt4-4.10 [PyQt4-4.10-gpl-Py3.3-Qt5.0.1-x32-2.exe](http://sourceforge.net/projects/pyqt/files/PyQt4/PyQt-4.10/PyQt4-4.10-gpl-Py3.3-Qt5.0.1-x32-2.exe/download)，也是官方安装程序，完整的 PyQt4 安装（包括 Qt 运行时）

我仔细检查了 python 和 PyQt4 都在 $PATH

但似乎我可以导入一些包（例如，QtCore）但不能导入其他包（例如，QtGui）

尽管他们并肩走在同一条路上

```
>>> from PyQt4 import QtCore
>>> QtCore.__file__
'C:\\Python33\\lib\\site-packages\\PyQt4\\QtCore.pyd'
>>> from PyQt4 import QtGui
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    from PyQt4 import QtGui
ImportError: DLL load failed: The specified module could not be found.
>>> import os
>>> os.path.exists('C:\\Python33\\lib\\site-packages\\PyQt4\\QtGui.pyd')
True
>>> from PyQt4 import Qt
>>> from PyQt4 import QtXml
>>> from PyQt4 import QtNetwork
>>> from PyQt4 import QtDesigner
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    from PyQt4 import QtDesigner
ImportError: DLL load failed: The specified module could not be found.
>>> os.path.exists('C:\\Python33\\lib\\site-packages\\PyQt4\\QtDesigner.pyd')
True 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:23:44.653

Qt5Gui.dll 依赖于 D3dCOMPILER_43.dll，它是 DirectX 的一部分。[您可以使用DirectX 最终用户运行时 Web 安装程序](http://www.microsoft.com/en-us/download/details.aspx?id=35)更新您的安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T12:08:56.223

如果您不喜欢安装整个 DirectX，您可以执行以下操作：

First download the Directx redistributable: [http://www.microsoft.com/en-us/download/details.aspx?id=8109](http://www.microsoft.com/en-us/download/details.aspx?id=8109) (this is a kind of self extracting MS-Cabinet-file)

Then in Linux for example (Debian based - should work similar on other distros):

```
sudo apt-get install cabextract
mkdir cabs
cabextract -d cabs -F JUN2010\* directx_Jun2010_redist.exe
cd cabs
mkdir x64
cabextract -d x64 -F \*.dll *_x64.cab 
```

In Windows you can extract cab-files for example with Winrar. Some windows versions included a command line utility for cab-files - I think it was called `extract`.

# javascript - Livescript，如何结束未嵌套的回调？

> ID：15708921
> 
> 赞同：0
> 
> 时间：2013-03-29T18:09:20.930
> 
> 标签：javascript, node.js, callback, livescript

参考：[http](http://livescript.net/) ://livescript.net 未嵌套的回调和括号自由链接：LiveScript

```
<-! $ 'h1' .on 'click'
alert 'boom!' 
```

JavaScript

```
$('h1').on('click', function(){
  alert('boom!');
}); 
```

如何在 Javascript 中编写这样的 livescript？

JavaScript

```
$('h1').on('click', function(){
  alert('boom!');
});
alert('out of callback'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:42:14.693

你不能。那是回拨。

你有两个选择：使用 do （我认为这没有意义）

```
do
  <- $ 'h1' .on 'click'
  alert 'boom!' 
```

...或者只是使用回调？！

```
$ 'h1' .on 'click' ->
  alert 'boom' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T10:55:20.687

这对我有用@ Livescript 1.2.0

```
(
<- $ 'h1' .on 'click'
alert 'boom!'
)
(
<- $ 'h2' .on 'click'
alert 'kaboom!'
) 
```

享受）

# c++ - 为什么函数指针会破坏可替代性而 std::function 不会？

> ID：15708929
> 
> 赞同：3
> 
> 时间：2013-03-29T18:10:05.047
> 
> 标签：c++, function-pointers, liskov-substitution-principle

我们有一个通常的类层次结构：

```
class B
{
public:
    int x;
    B() : x(0) {}
    virtual ~B() {}
};

class D : public B
{
public:
    int y;
    D() : y(0) {}
}; 
```

还有一个接受一个参数的函数 - 对基类对象的引用。

```
void b_set(B& b)
{
    b.x = 5;
} 
```

然后，我想创建类型的函数指针`void (D&)`并存储`b_set`在其中。这应该是有效的操作，因为合法传递给函数指针调用的所有对象也必须是 B 类型。但这是不允许的。

```
typedef void (*fp_d_mutator)(D&);
void fp_test(D& obj)
{
    fp_d_mutator fun = b_set; //invalid conversion from 'void (*)(B&)' to 'fp_d_mutator {aka void (*)(D&)}
    fun(obj);
}

#include <functional>
typedef std::function<void (D&)> stdfun_d_mutator;
void stdfun_test(D& obj)
{
    stdfun_d_mutator fun = b_set; //works 
    fun(obj);
} 
```

所以...

*   那无效转换如何？
*   为什么无效转换？
*   如果允许这样做会破坏什么？
*   std::function 首先是如何避免这个问题的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:20:23.673

接受类型参数的`B&`函数不是接受类型参数的函数`D&`。虽然`D&`可**转换为** `B&`，但它们不是同一类型。如果您可以存储指向作为指针的函数`B&`的指针`D&`，编译器如何知道何时转换参数？（注意转换有时需要调整指针）

不同之`std::function`处在于调用签名（此处`D&`）是函数对象类型的一部分，**而**被调用签名（此处`B&`）是内部存储的一部分。因此，当您应用函数对象时`operator()`，实现的代码`operator()(D&)`会负责转换。

# php - GD2 - 复制两个透明图像会导致黑色背景

> ID：15708935
> 
> 赞同：0
> 
> 时间：2013-03-29T18:10:23.120
> 
> 标签：php, png, transparent, gd2

这让我大吃一惊。我想合并 2 个透明的 PNG。

一个是从方形图像动态生成的圆形（$source）。第二个是带有透明圆圈的地图标记（$marker），以适合第一个后面。

imagepng($source); 和 imagepng($marker); 正如人们所期望的那样输出。具有透明背景。

然后，我创建一个与标记大小相同的空透明图像，将它们放在一起：

```
//NEW BLANK TRANSPARENT IMAGE
$dest = imagecreatetruecolor(50, 61);
$transparent = imagecolorallocatealpha($dest, 0, 0, 0, 127);
imagefill($dest, 0, 0, $transparent);
imagealphablending($dest, true);
imagesavealpha($dest,true);

//COPY THE CIRCLE       
imagecopy($dest, $source, 5, 5, 0, 0, 41, 41);

//AND THE MARKER ON TOP
imagecopy($dest, $marker, 0, 0, 0, 0, 50, 61); 
```

结果，圆圈显示为一个黑色正方形，圆圈在里面。我在 $source 和 $dest 上尝试了很多 imagealphablending 和 imagesavealpha 的组合，但似乎没有任何效果。

如何删除黑色方块并使结果中的 $source 在合并之前保持透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:22:56.957

这里的问题是：

为了动态生成圆圈，我创建了一个圆形蒙版，让其他所有内容都透明，使其变为红色，然后使红色透明。这与 imagesavealpha(true) 不兼容，因为它说 gd 引擎完全忽略透明颜色并保存整个 alpha 通道。

合并两个图像时，曾经透明的颜色现在是黑色。

我的情况的解决方案是对每个像素的像素进行分析，如果它在圆圈内，则使用循环方程将其复制到空白图像。

# javascript - IE7/8 +标签 + jQuery .clone() =?

> ID：15708937
> 
> 赞同：4
> 
> 时间：2013-03-29T18:10:27.403
> 
> 标签：javascript, jquery, html, internet-explorer-8, internet-explorer-7

我会先说我已经通过从根本上改变我的方法解决了这个问题。但在解决它的过程中，我整理了一个让我着迷和烦恼的测试用例。

我有一个从 AJAX 调用返回的字符串。该字符串包含 HTML，其中大部分是无用的。我希望将字符串中的一个元素（及其所有子元素）插入 DOM。对此的模拟是：

```
<!DOCTYPE html>
<html>
<head>
    <title>wtf?</title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        $(document).ready(function() {
            var markup = '<div class="junk"><div class="good"><time datetime="2013-03-29">March 29, 2013</time></div></div>',
                output = $(markup).find('.good').clone().wrap('<div />').parent().html();

            $('body').append(output);
        });
    </script>
</head>

<body></body>
</html> 
```

我在这里有这个文件的托管副本：http: [//alala.smitelli.com/temp/wtf_ie.html](http://alala.smitelli.com/temp/wtf_ie.html)（不会永远存在）。

这*应该*做的是提取`.good`div 和子`<time>`元素，然后将它们插入到正文中。`.wrap().parent()`除了子元素之外，我还提取了我选择的元素（请参阅[此问题](https://stackoverflow.com/questions/6459398/jquery-get-html-of-container-including-the-container-itself)）。`.clone()`和`.html()`是证明问题的设计。

对用户来说，它应该显示今天的日期。它适用于 Chrome、Firefox、IE9 等：

```
March 29, 2013 
```

但在 IE7 和 8 中，显示的文本是：

```
<:time datetime="2013-03-29">March 29, 2013 
```

显示了开口`<`，并且以某种方式插入了冒号。结束`</time>`标签看起来不受影响，并且没有显示为转义。

这里发生了什么？这是某种错误，还是预期的行为？结肠从哪里来？

**编辑：**就添加`document.createElement('time')`或 html5shiv 的建议而言，这些似乎都没有改变行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:36:41.373

**令**我惊讶的是，我发现如果我在实际解析标记方面从等式中删除 jQuery，问题就会消失（在 IE7 和 IE8 上），即使没有`createElement('time')`或 shim/shiv：

```
<!DOCTYPE html>
<html>
<head>
    <title>wtf?</title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        $(document).ready(function() {
          var div, markup, output;

          markup = '<div class="junk"><div class="good"><time datetime="2013-03-29">March 29, 2013</time></div></div>';

          div = document.createElement('div');
          div.innerHTML = markup;

          output = $(div).find('.good').clone().wrap('<div />').parent().html();

          $('body').append(output);
        });
    </script>
</head>

<body></body>
</html> 
```

[实时复制](http://jsbin.com/ifoxed/7)| [来源](http://jsbin.com/ifoxed/7/edit)

那里的变化是我只是使用浏览器自己的处理`innerHTML`和断开连接`div`来解析`markup`，而不是让 jQuery 为我做这件事。

所以我不得不说这可能是 jQuery 在不支持 HTML5 元素的旧浏览器上处理 HTML 片段的问题。但这将是一个重要的主张，而重要的主张需要重要的证据……

但如果我改变这些行：

```
div = document.createElement('div');
div.innerHTML = markup;

output = $(div).find('.good').clone().wrap('<div />').parent().html(); 
```

到：

```
div = $(markup);
output = div.find('.good').clone().wrap('<div />').parent().html(); 
```

我遇到了问题（在 IE7 和 IE8 上）：[Live Copy](http://jsbin.com/ifoxed/9) | [来源](http://jsbin.com/ifoxed/9/edit)

所以它确实开始看起来像一个jQuery问题......

# php - Fancybox 内容不刷新

> ID：15708941
> 
> 赞同：1
> 
> 时间：2013-03-29T18:10:44.627
> 
> 标签：php, jquery, fancybox

我的 Fancybox 有问题，我正在尝试检索一些 php 数据，但没有正确重新加载，我使用 firebug 跟踪页面上的活动，似乎实际上是从我的数据库中检索正确的数据但是Fancybox 不解析该信息，它只显示第一个值。这是我的幻想箱

```
$(document).ready(function() {
$(".various").fancybox({
    fitToView   : false,
    width       : '70%',
    height      : '70%',
    autoSize    : true,
    closeClick  : false,
    scrolling   : 'auto',
    titlePosition     : 'inside',
    openEffect  : 'fade',
    closeEffect : 'fade',
    type : 'inline'
}

});
}); 
```

这是我的一段 php 代码，我在检索 $value['managementSummary'] 时遇到问题：

```
echo '<td><p class="various" href="#inline" title="Reference ID # ' . $referenceId . '">' .$value['managementSummary']. ' ...(+)';  
echo '<div style="display: none;"><div id="inline" style="width:400px;height:200px;overflow:auto;"> '. $value['managementSummary'] .'  </p></td></div>'; 
```

我知道我必须使用某种功能刷新我的内容，例如：

```
beforeLoad : function() {
this.content = '. $value['managementSummary'] .'; 
```

当然它不起作用，有什么想法吗？？？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:41:24.240

所以我能够解决这个问题，我在我的 fancybox 调用中使用了这个代码：

```
afterLoad: function(){
                this.content = $(this.element).attr('rel');
            } 
```

我也更改了我的 php 代码：

```
echo '<td><p>' .truncate($value['managementSummary']). ' <a href="#inline" class="various" rel="'. $value['managementSummary'] .'" title="Reference ID # ' . $referenceId . '">...(+)</a></p></td>';
echo '<div id="inline" style="width:400px;height:200px;display:none;"> '. $value['managementSummary'] .'  </div></td>'; 
```

奇怪的是我的内容没有以正确的方式显示，所以我使用了不同的 div 属性“Rel”来解析我的解决方案。

# android - Android相机setPictureSize扭曲相机预览

> ID：15708944
> 
> 赞同：1
> 
> 时间：2013-03-29T18:10:48.030
> 
> 标签：android, android-camera

由于某些原因，当我使用相机 setPictureSize 时，相机预览会失真。有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:57:36.060

According to my experience there is a dependency between setPictureSize and camera preview size.

Most of tutorials like official ([http://developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)) calculates preview size depending on actual screen size. But this won't work with actual picture size. So I now calculate optimal preview size according to selected picture size.

I would recommend to look at Android camera source code of Android 2.3 that is not so complicated: [https://android.googlesource.com/platform/packages/apps/Camera.git/+/android-cts-2.3_r12](https://android.googlesource.com/platform/packages/apps/Camera.git/+/android-cts-2.3_r12)

# mvvm-light - Where are the MVVM Light snippets?

> ID：15708948
> 
> 赞同：23
> 
> 时间：2013-03-29T18:11:05.310
> 
> 标签：mvvm-light, code-snippets

It seems that snippets of MVVM Light are not installed when we use Nuget to install MVVM Light Toolkit.

Where can I find them ?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-29T18:11:05.310

Snippets are available on [GitHub](https://github.com/lbugnion/mvvmlight).

*   Download the code (upper right *Clone or download* button) and extract it.
*   Use the Visual Studio Code Snippet manager (from the "Tools" menu) to import the snippets located in the `Installer/InstallItems/Snippets/CSharp` folder of the extracted code.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-30T18:19:55.023

For anyone else who didn't find C# snippets in the download specified in the accepted answer, you can download MVVM Light extension

*   for VS2015 (as well as for VS2013 and VS2012) from [this link](https://visualstudiogallery.msdn.microsoft.com/ee36692d-ed3f-4888-b904-281aaaeac529).
*   for VS2017 from [this link.](https://marketplace.visualstudio.com/items?itemName=LaurentBugnion.MVVMLightforVS2017)

这不仅会为您安装 C# 代码片段，还会为您安装相关的项目和项目模板。

下载也适用于 VS2015 的社区版。

# javascript - 用于检查正确 Javascript 语法的工具或实用程序

> ID：15708950
> 
> 赞同：4
> 
> 时间：2013-03-29T18:11:07.167
> 
> 标签：javascript, git

我知道像 JSLint 这样的工具，但我不是在寻找样式正确性，我需要一个可以验证语法正确性的工具或实用程序（最好是在 Linux 上运行的，在 ubuntu 包管理器中的奖励积分） JavaScript 文件。

我只需要知道没有语法错误。

（完全披露，将把这个检查放在一个 git commit 钩子中，以确保不会提交语法不正确的 JavaScript。所以它可以是一个样式工具，但需要能够产生“YES SYNTAX GOOD”，或者“没有语法错误”结果。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T19:53:54.783

我相信您认为 JSLint 不会验证语法，但我认为它完全符合您的要求。现在，为了我的奖励积分！:-) 这是一个快速示例，尽管使用了 JSLint，但它应该可以做任何你想做的事情。

```
sudo apt-get install spidermonkey-bin
wget http://www.jslint.com/fulljslint.js
mv fulljslint.js /home/admin/bin/js 
```

然后创建/home/admin/bin/js/runjslint.js：

```
load('/home/admin/bin/js/fulljslint.js');
var body = arguments[0];
var result = JSLINT(body);
if (result) {
 print('YES SYNTAX GOOD');
} else {
 print('NO SYNTAX BAD');
}
print(JSLINT.report()); 
```

该文件在使用 Spidermonkey 运行时，将检查作为命令行参数传递的 Javascript 数据的语法。最后你可能不想要那个报告，但认为它可能值得你玩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:04:39.370

[acorn.js](https://github.com/marijnh/acorn/)是一个非常小的 javascript 解析器。遇到问题时会引发 javascript 错误。

下载橡子

```
curl https://raw.github.com/marijnh/acorn/master/acorn.js > acorn.js 
```

使用以下内容创建一个名为 acornIt.js 的运行器（需要安装节点）

```
var acorn = require('./acorn');
var fs = require('fs');
var fileName = process.argv[2];
var contents = fs.readFileSync(fileName);

try {
   acorn.parse(contents);
   console.log("YES SYNTAX GOOD");
} catch (e) {
   console.log("NO SYNTAX BAD");
   console.log(e); // See where the error occured
} 
```

并运行它

```
node acornIt.js someTestFile.js 
```

# meteor - Meteor.js - 模板权限

> ID：15708951
> 
> 赞同：2
> 
> 时间：2013-03-29T18:11:11.543
> 
> 标签：meteor

这已经在[这里](https://stackoverflow.com/questions/14716100/meteor-send-only-authorized-templates-down-to-the-client)和[这里](https://stackoverflow.com/questions/14115874/how-can-i-conditionally-send-templates-and-javascript-files-to-the-client-in-met)以类似的形式被问过，但它似乎非常重要，并且框架正在快速发展，所以我要再次提出它：

假设您的登录页面需要面向公共互联网，您如何防止 Meteor 将所有经过身份验证的用户模板发送到未经过身份验证的客户端？

示例用例：您有一些非常独特的分析/性能指标想要保密。您已经构建了模板来可视化每个模板。只需访问登录页面，Meteor 就会向任何随机发送模板，即使是未填充的模板，也会泄露大量专有信息。

我看到了两个建议：

1.  **将管理员分解为一个单独的应用程序。**假设管理员登录面向公共互联网，这并不能解决问题，除非我遗漏了什么。
2.  **将模板放在`public`文件夹或等效文件夹中并动态加载它们。**这也无济于事，因为文件名将从将发送到客户端的其他模板中可见。

我唯一能想到的是将模板字符串存储在`server`文件夹中，并让客户端在登录后调用 a`Meteor.method`来检索和呈现它们。如果你想让它们表现得像普通的客户端模板，你就不得不使用内部 API（例如[Meteor._def_template](https://github.com/meteor/meteor/blob/master/packages/templating/deftemplate.js)）。

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:05:28.840

我在这里问了一个类似的问题： [Segmented Meteor App(s) - loading only half the client or two apps sharing a database](https://stackoverflow.com/questions/15606169/segmented-meteor-apps-loading-only-half-the-client-or-two-apps-sharing-a-dat)

似乎是一个共同的问题，我当然认为这是应该在某个时候解决的问题。

在那之前，我计划制作一个较小的“公共”应用程序并与管理应用程序共享数据库（可能在 Meteor 中，可能在其他东西中，取决于我的管理员的大小/数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T14:26:24.693

这两个包试图解决这个问题：
[https://atmospherejs.com/numtel/publicsources](https://atmospherejs.com/numtel/publicsources)
[https://atmospherejs.com/numtel/privatesources](https://atmospherejs.com/numtel/privatesources)

它使用 Iron-router 插件在每条路线上加载您的特定文件。

我在这里看到的主要缺点是您必须更改应用程序结构，因为受保护的文件需要存储在**/public**或**/private**文件夹中。
你也应该使用铁路由器。

# c# - 如何在 C# 上运行存储在字符串变量中的代码？

> ID：15708957
> 
> 赞同：0
> 
> 时间：2013-03-29T18:11:33.433
> 
> 标签：c#, string, variables, macros

我对 C# 有点陌生。我只是想知道是否有办法运行存储在字符串 var 上的代码，例如：

```
string var = (int num = num1 * num2).ToString(); 
```

我在另一个问题中读到它被称为宏替换（西班牙语中的“macro sustitución”），所以我想知道你们中是否有人知道这样做的方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:20:08.533

我不完全确定您为什么要使用 CSharpCodeProvider，除非您正在构建交互式 CSharp 编译应用程序。不管怎样，看看这些教程。

[在运行时编译和运行代码](http://simeonpilgrim.com/blog/2007/12/04/compiling-and-running-code-at-runtime/)

[CodeProject：在运行时编译和执行代码](http://www.codeproject.com/Articles/9019/Compiling-and-Executing-Code-at-Runtime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:12:06.223

您可以创建一个返回名为 MultipleNumbers 的字符串的方法。它看起来像这样：

```
 public string MultipleNumbers(int firstNumber, int secondNumber)
    {
        string answer;
        return answer = (firstNumber * secondNumber).ToString();
    } 
```

你的字符串是：

```
string answer = MultipleNumbers(2, 4); 
```

我建议不要使用 var 作为变量名，因为它是保留名称。您可以使用 var 代替字符串，如下所示：

```
var answer = MultipleNumbers(2, 4); 
```

我希望这有帮助！

# java - 使用 MongoDB Java 驱动程序更新嵌入式文档中的字段？

> ID：15708958
> 
> 赞同：4
> 
> 时间：2013-03-29T18:11:42.013
> 
> 标签：java, mongodb

我正在尝试使用 Java 驱动程序对 MongoDB 中的嵌入式文档执行更新，但收到 IllegalArgumentException，指出“存储在 db 中的字段不能包含 . 在其中”

我的文档具有以下结构：

```
{
    "_id" : ObjectId("5155d102a47d7b00b7e4bed2"),
    "foo" : {
        "bar" : {
            "name" : "Now"
        }
    }
} 
```

我想执行这样的更新

```
var query = {_id:ObjectId("5155d102a47d7b00b7e4bed2")};
var update = {"foo.bar.time":new Date()};
var withSet = {$set:update};
db.samples.update(query,withSet); 
```

从控制台正确修改文档

```
{
    "_id" : ObjectId("5155d102a47d7b00b7e4bed2"),
    "foo" : {
        "bar" : {
            "name" : "Now",
            "time" : ISODate("2013-03-29T18:02:51.591Z")
        }
    }
} 
```

尝试在 Java 中做同样的事情我没有成功。我试过这个：

```
BasicDBObject query = new BasicDBObject("_id", new ObjectId("5155d102a47d7b00b7e4bed2"));

BasicDBObject time = new BasicDBObject("time", new Date());
BasicDBObject bar = new BasicDBObject("bar", time);
BasicDBObject foo = new BasicDBObject("foo", bar);
BasicDBObject withSet = new BasicDBObject("$set", foo);

samples.update(query, withSet); 
```

但它破坏了嵌入的 bar 对象，破坏了名称。

我也试过：

```
BasicDBObject foo = new BasicDBObject();
foo.append("foo.bar.time", new Date());    
samples.update(query, foo) 
```

但收到 IllegalArgumentException。

我在 Stack Overflow 上看到了其他包含此点符号的答案。有什么我想念的吗？更新嵌入式文档中的字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T21:05:37.493

在您的最后一个示例中，该`$set`部分丢失了，也许这会导致问题。尝试

```
samples.update(
  query,
  new BasicDBObject(
    "$set",
    new BasicDBObject("foo.bar.time", new Date())
)); 
```

反而。

# python - 音乐注释附加到换行符 Python

> ID：15708961
> 
> 赞同：1
> 
> 时间：2013-03-29T18:11:45.430
> 
> 标签：python, file, encoding, character

具体来说，我从 Google Adwords 导出了一个 csv 文件。

我逐行阅读文件并更改电话号码。

这是文字脚本：

```
for line in open('ads.csv', 'r'):
    newdata = changeNums(line)
    sys.stdout.write(newdata) 
```

并且`changeNums()`只是执行一些字符串替换并返回字符串。

问题是在打印换行符的末尾是一个音符。

![音符](../Images/c792d1a68139606219965f195b3394c7.png)

原始 CSV 在行尾没有此注释。另外，我不能复制粘贴笔记。

这是某种编码问题还是发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:40:30.690

尝试使用[通用线路支持](http://docs.python.org/2/glossary.html#term-universal-newlines)打开：

```
for line in open('ads.csv', 'rU'):
    # etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:20:32.737

任何一个：

*   原始文件上有一些字符（它们在终端中显示为这个符号）
*   changeNums 正在创建这些字符
*   stdout.write 正在发送一些未解释的换行符，该符号再次被终端显示为此符号，将此行更改为 print(newdata)

我的猜测：changeNums 正在添加它。

最佳调试命令：

```
print([ord(x) for x in line])
print([ord(x) for x in newdata])
print line == newdata 
```

并检查字符串中存在的字符值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:21:58.860

您可以通过以下方式去除换行符：

```
for line in open('ads.csv', 'r'):
    line = line.rstrip('\n')
    newdata = changeNums(line)
    sys.stdout.write(newdata) 
```

最后一个奇怪的“注释”字符通常是 *nix 和 *dos/*win 环境之间的 CR/LF 换行问题。

# mysql - MySQL 中的 Drupal db_select + 索引提示？

> ID：15708963
> 
> 赞同：0
> 
> 时间：2013-03-29T18:11:48.667
> 
> 标签：mysql, drupal, indexing

在 Drupal 7 中，使用 db_select 时，有谁知道是否有办法指定 MySQL 的 USE INDEX 语法，提示查询应该使用什么索引？

如此处所示：http: [//dev.mysql.com/doc/refman/5.1/en/index-hints.html](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:00:59.077

似乎没有任何本机方法可以这样做。如果它对您的站点至关重要，您始终可以扩展[SelectQueryExtender](http://api.drupal.org/api/drupal/includes!database!select.inc/class/SelectQueryExtender/7)类并编写自己的类。

# mysql - 将新值与先前值进行比较

> ID：15708967
> 
> 赞同：1
> 
> 时间：2013-03-29T18:11:59.653
> 
> 标签：mysql

我希望能够将新插入的值与具有相同 id 的先前值进行比较，并显示差异是变化的百分比。

例子：

```
id | bline_id |  avg   |    date

1  |     1    | 36.500 | 2013-03-28 11:08:10

31 |     1    | 37.130 | 2013-03-29 10:37:11 
```

所以我要找的是 37.130-36.5/36.5 * 100 = 1.73% 的变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:29:15.303

通过在 MySQL 表上使用*自连接*，您将能够计算所有可能的更改组合，为了避免重复，您需要大于/小于 [不是 gt/lt 或等于]。下面的代码应该给出一些关于如何构造这样一个查询的提示，尽管它没有经过测试并且可能包含一两个错误。

```
SELECT ((larger.avg - smaller.avg) / (smaller.avg * 100)) AS change 
  FROM `table` AS smaller JOIN `table` AS larger 
  WHERE larger.id > smaller.id AND larger.bline_id = smaller.bline_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:30:23.057

例如：

```
SELECT a.*
     , ROUND(((a.avg-b.avg)/b.avg)*100,2) pct_change
  FROM
     ( SELECT x.*
            , COUNT(*) rank
         FROM test x 
         JOIN test y 
           ON y.bline_id = x.bline_id 
          AND y.id >= x.id 
        GROUP 
           BY x.id
     ) a
  JOIN
     ( SELECT x.*
            , COUNT(*) rank
         FROM test x 
         JOIN test y 
           ON y.bline_id = x.bline_id 
          AND y.id >= x.id 
        GROUP 
           BY x.id
     ) b
    ON b.bline_id = a.bline_id
   AND b.rank = a.rank+1
 WHERE a.rank = 1; 
```

# javascript - 无法从 Javascript 调用 Flash 函数

> ID：15708968
> 
> 赞同：2
> 
> 时间：2013-03-29T18:12:01.060
> 
> 标签：javascript, flash, function, externalinterface

我一直在这里，找不到答案。我有一个位于 HTML 页面中的 .swf，我试图从 javascript 调用其中的一个函数。我可以从 Flash 与 javascript 对话，但我无法让它重新对话。我知道我正确地定位了对象，因为我在其上使用了 console.log() 并确认了它的目标。

我正在从 Flash 触发测试，从 .swf 内部调用一个 javascript 函数，并让该函数调用内部 Flash 函数。

闪码：

```
//adds callback
ExternalInterface.addCallback("sendToFlash", flashTalkedTo);

//function called by the callback
public function flashTalkedTo():void{
    //runs another function in javascript to log a string
    ExternalInterface.call("callMe")
}

//calls javascript that tries to talk to Flash
ExternalInterface.call("catchFromFlash") 
```

Javascript代码：

```
//function called by Flash that initiates
function catchFromFlash(){
    talkToFlash()
}

//function that tries to talk to flash
function talkToFlash(){
    document.getElementById('Noodleverse').sendToFlash()
}

//function called by Flash in the end to confirm call made
function callMe(){
    console.log("Call Me")
} 
```

任何帮助都有效，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:37:43.870

Flash 和一般的插件都有些繁琐。它们的行为不像普通元素，它们的功能也不像普通函数。例如，您不能将元素保存到值中并从中调用函数。您还需要小心，因为在某些浏览器`object`中使用 ，而在其他浏览器`embed`中使用。

调用函数的最佳方式是使用 swfobject ( [https://code.google.com/p/swfobject/](https://code.google.com/p/swfobject/) ) 来抽象一切。不过就个人而言，我使用它（根据经验，也许有人可以提供改进）：

HTML：

```
<object id="myplugin" ...>
    ...
    <embed name="myplugin" ... />
</object> 
```

JavaScript：

```
var o1=document.myplugin;
if(o1&&!!o1.myFlashFunction){
    return document.myplugin.myFlashFunction(); // DO NOT USE o1 here. It will fail.
}
var o2=window.myplugin;
if(o2&&!!o2.myFlashFunction){
    return window.myplugin.myFlashFunction(); // DO NOT USE o2 here
} 
```

第一种情况 ( `document`) 适用于大多数新浏览器。例如，Chrome 会找到该`embed`对象。第二个 ( `window`) 用于 IE 并找到`object`（IE，至少是旧 IE，忽略`embed`）。我不是 100% 确定需要第二个，因为 IE 也可能与 . 一起使用`document`，所以调用那个 voodoo 代码。还将`window.myplugin`提供 Chrome、FireFox 等中所有匹配元素的数组（但我们希望这些元素已经得到处理）

# haskell - Haskell的Data.Vector没有提供集合操作符，是什么原因

> ID：15708971
> 
> 赞同：4
> 
> 时间：2013-03-29T18:12:26.697
> 
> 标签：haskell, vector, set, operations

我的应用程序涉及繁重的数组操作（例如`log(1)`索引），因此[Data.Vector](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector.html)和[Data.Vector.Unboxed](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector-Unboxed.html)优于[Data.List](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)。它还涉及许多集合操作（​​例如 intersectBy），但是 Data.Vector 不提供这些操作。

这些功能中的每一个都可以像在 Data.List 中一样在 3-4 行中实现。有什么理由他们都没有用 Data.Vector 实现吗？我只能推测。也许出于性能原因不鼓励在 Data.Vector 中设置操作，即 intersectBy 会首先通过列表理解产生交集，然后将列表转换为 Data.Vector？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T19:05:18.243

I assume it's missing because intersection of unsorted, immutable arrays must have a worst-case run time of `Ω(n*m)` without using additional space and `Data.Vector` is optimized for performance. If you want, you can write that function yourself, though:

```
import Data.Vector as V

intersect :: Eq a => V.Vector a -> V.Vector a -> V.Vector a
intersect x = V.filter (`V.elem` x) 
```

Or by using [a temporary set data structure](http://hackage.haskell.org/package/unordered-containers) to achieve an expected `O(n + m)` complexity:

```
import Data.HashSet as HS

intersect :: (Hashable a, Eq a) => V.Vector a -> V.Vector a -> V.Vector a
intersect x = V.filter (`HS.member` set)
    where set = HS.fromList $ V.toList x 
```

If you can afford the extra memory usage, maybe you can use some kind of aggregate type for your data, for example an array for fast random access and a hash trie like `Data.HashSet` for fast membership checks and always keep both containers up to date. That way you can reduce the asymptotic complexity for intersection to something like `O(min(n, m))`

# javascript - 从 Javascript 中的嵌套函数中获取变量

> ID：15708973
> 
> 赞同：0
> 
> 时间：2013-03-29T18:12:36.110
> 
> 标签：javascript

有人可以解释一下为什么下面的代码有效吗？

```
function getLastName()
{
    fullName.lastName = "World";   
}

function writeName()
{
    fullName = {};
    fullName.firstName = "Hello";
    getLastName();
    document.write(fullName.firstName + " " + fullName.lastName);
}

writeName(); 
```

由于某种原因，`getLastName()`可以达到局部其封闭方法的局部状态。这怎么行？而且我应该利用 Javascript 的这个特性还是被认为是一种不好的做法？如果这是一个不好的做法，你能解释一下为什么吗？

您可以在[http://jsbin.com/atituk/2/edit看到实际的代码](http://jsbin.com/atituk/2/edit)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T18:14:02.893

您没有任何需要使用`var`关键字的局部变量。您的所有变量都是全局的，并且可以在 中的任何位置访问`window`，这根本不被认为是好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:14:22.683

您没有在函数内部使用[`var`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)反对，因此您是从范围外部获取它。它继续沿着链向上直到到达最外层范围，此时它创建了一个全局范围。`fullName``writeName``writeName`

一般来说，全局变量是不好的做法，因为它们很难跟踪并且更容易被意外覆盖（例如在竞争条件下）。

如果您使用的是[严格模式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)，这将产生错误而不是全局错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T18:21:31.527

您正在使用您的所有变量作为全局变量。所以到处都是公认的。为了更好地理解 Javascript 中的变量范围，请查看这个很好的示例[https://stackoverflow.com/a/500459/655316](https://stackoverflow.com/a/500459/655316)

# c - 如何在 Visual Studio 2005 上检测未引用的 C/C++ 代码？

> ID：15708980
> 
> 赞同：1
> 
> 时间：2013-03-29T18:13:24.267
> 
> 标签：c, visual-studio-2005, dead-code

我已经使用 Visual Studio 2005 好几年了，通常项目会不断增长，但现在我有一个项目正在缩小规模，我要拿走其中的很大一部分（几乎一半）......我希望通过删除入口点函数，编译器会给我一个未引用函数列表，然后我将删除这些函数，依此类推，直到完全删除整个不需要的代码......但令我惊讶的是，没有列出“未引用函数” .

我记得在 Turbo C 的旧时代，如果有一个没有在任何地方调用的函数，编译器会立即抗议......我不明白为什么 Visual Studio 没有这个功能，我已经检查了整个属性页面并且找不到可以帮助我以系统方式摆脱死代码的东西。

Visual Studio 可以检测到死代码吗？如果是这样，我该如何启用这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:24:29.803

您是否尝试启用 4 级警告？默认情况下，死代码不会链接到二进制文件中，但您可以在每次发生这种情况时启用警告：http: [//msdn.microsoft.com/en-us/library/z85eyax0 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/z85eyax0(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:21:47.493

您可以使用代码覆盖率来确定正在使用程序的哪些部分。当然，您必须小心，因为只考虑在检测运行中采用的代码路径。但无论如何，这可以证明是解决问题的良好开端。

[Visual Studio 2010 本机 C++ 代码覆盖着色不起作用](https://stackoverflow.com/questions/15134644/visual-studio-2010-native-c-code-coverage-coloring-not-working)

我认为您在 Visual Studio 2005 中没有 C++ 代码覆盖率，但您可以尝试将您的解决方案转换为较新的版本。

[http://msdn.microsoft.com/en-us/library/dd537628.aspx](http://msdn.microsoft.com/en-us/library/dd537628.aspx)

# c++ - 如何获取 std::thread() 的 Linux 线程 ID

> ID：15708983
> 
> 赞同：16
> 
> 时间：2013-03-29T18:13:42.797
> 
> 标签：c++, multithreading, c++11, pthreads

我在玩，`std::thread`我想知道如何获得一个新的线程 id `std::thread()`，我不是在谈论，`std::thread::id`而是给线程的 OS Id（你可以使用它查看它`pstree`）。这只是为了我的知识，它只针对 Linux 平台（不需要是可移植的）。

我可以像这样在线程中获取 Linux 线程 ID：

```
#include <iostream>
#include <thread>
#include <unistd.h>
#include <sys/syscall.h>
#include <sys/types.h>

void SayHello()
{
    std::cout << "Hello ! my id is " << (long int)syscall(SYS_gettid) << std::endl;
}

int main (int argc, char *argv[])
{
    std::thread t1(&SayHello);
    t1.join();
    return 0;
} 
```

但是如何在主循环中检索相同的 id 呢？我没有找到使用 `std::thread::native_handle`. `pid_t gettid(void);`我相信由于 c++11 实现依赖于 pthreads，因此有可能让它通过，但我一定是错的。

有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T20:49:01.463

假设您使用的是 GCC 标准库，则返回由 .`std::thread::native_handle()`返回的`pthread_t`线程 ID `pthread_self()`，而不是由`gettid()`. `std::thread::id()`是相同的包装器`pthread_t`，并且 GCC`std::thread`不提供任何获取 OS 线程 ID 的方法，但您可以创建自己的映射：

```
std::mutex m;
std::map<std::thread::id, pid_t> threads;
void add_tid_mapping()
{
  std::lock_guard<std::mutex> l(m);
  threads[std::this_thread::get_id()] = syscall(SYS_gettid);
}
void wrap(void (*f)())
{
  add_tid_mapping();
  f();
} 
```

然后创建你的线程：

```
std::thread t1(&wrap, &SayHello); 
```

然后通过以下方式获取 ID：

```
pid_t tid = 0;
while (tid == 0)
{
  std::lock_guard<std::mutex> l(m);
  if (threads.count(t1.get_id()))
    tid = threads[t1.get_id()];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-22T18:15:02.830

一些 pthread[实现](https://www.minocacorp.com/doc/1375/element/360862/)，例如[Android 21](https://android.googlesource.com/platform/development/+/0fd7f83fce248c4972d5659de975300d8366fbb9/ndk/platforms/android-L/include/pthread.h#191) +，提供

```
pid_t pthread_gettid_np(pthread_t); 
```

该实现可以使用 的内部结构`struct pthread_t`来检索本机线程 ID，与由该线程返回`gettid()`或`syscall(SYS_gettid)`在该线程的上下文中调用时返回的 ID 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:26:30.173

这个怎么样：

```
pid_t gettid (void)
{
    return syscall(__NR_gettid);
} 
```

[http://yusufonlinux.blogspot.com/2010/11/get-thread-id-from-linux.html](http://yusufonlinux.blogspot.com/2010/11/get-thread-id-from-linux.html)

看起来 __NR_gettid 是在 unistd.h 中定义的

# maven-3 - Maven 3.0 包装排除和执行顺序

> ID：15708993
> 
> 赞同：5
> 
> 时间：2013-03-29T18:14:25.083
> 
> 标签：maven-3, packaging

对于所有的maveneers，我想我会传递一个关于maven 3 中用于打包.ear 文件的packagingExcludes 的重要执行顺序说明。在您的 pom.xml 中，要组装一个 .ear 文件，您将拥有类似于以下内容的内容：

```
<build>
       <plugins>
        <plugin>
          <artifactId>maven-ear-plugin</artifactId>
        <version>2.8</version>
         <configuration>
          <packagingExcludes>
           db2jcc**.jar,
           db2jcc_license_cu**,
           osgi-3.6.1.jar,
...
</build> 
```

重要的是`<packagingExcludes>`标签是标签之后的**第一个**元素`<configuration>`。否则，maven 会默默地忽略它。这适用于所有一直想知道为什么 servlet-3.0 仍然出现在您的 .ear 文件中的人。

# c# - 使用静态类访问全局/静态字典时是否有任何问题？

> ID：15708996
> 
> 赞同：1
> 
> 时间：2013-03-29T18:14:32.287
> 
> 标签：c#

我为一个小项目创建了一个简单的验证过程。验证规则被创建为类属性的属性。

我有一个需要传递类类型的静态类。该方法将首先检查给定类的规则集是否已经在字典中，否则，它将使用反射来遍历每个属性。

使用这种方法会不会有什么问题？我担心在多线程环境中访问时可能会导致一些问题。

```
public static class Validator
{
    private static Dictionary<Type, ValidationRulesCollection> _validationRules = new Dictionary<Type, ValidationRulesCollection>();

    public static ValidationRulesCollection GetValidationRules(object obj)
    {
        return GetValidationRules(obj.GetType());
    }

    public static ValidationRulesCollection GetValidationRules(Type t)
    {
        ValidationRulesCollection rules = null;

        /* Check if the centralized rules repository already contains the rules for this class type */
        if (_validationRules.ContainsKey(t) == true)
        {
            rules = _validationRules[t];
        }
        else
        {
            /* Using reflection, get the list of properties for the class type */
            PropertyInfo[] properties = t.GetProperties();

            if (properties != null)
            {
                /* Iterate through each property info and check if it contains a validation rule */
                ValidationAttribute[] attribs = null;
                foreach (PropertyInfo property in properties)
                {
                    /* For each property, check if it contains a validation rule */
                    attribs = (ValidationAttribute[])property.GetCustomAttributes(typeof(ValidationAttribute), true);

                    if (attribs != null)
                    {
                        foreach (ValidationAttribute attrib in attribs)
                        {
                            if (rules == null)
                                rules = new ValidationRulesCollection();

                            /* Add the validation rule to the collection */
                            rules.Add(new ValidationRule(property, attrib));
                        }
                    }
                }
            }

            /* Add the rules collection to the centralized rules repository */
            if (rules.Count > 0)
                _validationRules.Add(t, rules);
            else
                throw new ArgumentNullException("The type " + t.ToString() + " does not have any ValidationAttributes");
        }

        return rules;
    }

    public static ValidationRulesCollection Validate(object obj)
    {
        /* Get the Validation Rules */
        ValidationRulesCollection rules = GetValidationRules(obj);

        /* Validate the rules */
        foreach (ValidationRule rule in rules)
        {
            rule.Validate(obj);
        }

        return rules;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:17:52.990

`Dictionary` is not thread-safe. And your method `GetValidationRules` is reading and writing it. If multiple threads call this method, dictionary data may get corrupt. To avoid this, put a `lock(...){ ... }` that covers all dictionary method calls.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:18:13.447

This could get you in trouble in a multi threaded environment. Generally, the `Dictionary<K,V>` class is not thread safe. Beyound data corruption or correctness issues, in rare circumstances, if one thread hits the dictionary while it is being resized on another thread, you could get a situation where the thread gets stuck in a loop, eating 100% CPU. This happened to me in a production web app once - not a fun thing to debug.

You could either put a lock around the method, or use a [`ConcurrentDictionary<K,V>`](http://msdn.microsoft.com/en-us/library/dd287191.aspx) instead.

请注意，我们可以用不同的方式定义“线程安全”。如果您希望查找属性和属性的整个操作是原子的，您应该在方法周围加一个锁。但请注意，这会在应用程序中引入大量锁定，可能会损害性能。如果您可以在竞态条件下完成两次工作，并且只需要确保字典的行为正确，那么 ConcurrentDictionary 就是要走的路。