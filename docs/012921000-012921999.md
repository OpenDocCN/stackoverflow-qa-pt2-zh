# StackOverflow 问答 12921000-12921999

# php - 使用 Ghostscript 受密码保护的 PDF

> ID：12921006
> 
> 赞同：9
> 
> 时间：2012-10-16T18:21:23.820
> 
> 标签：php, pdf, password-protection, ghostscript

我需要在 php 中使用 ghostscript 为 PDF 文件设置密码保护。

这些文件将使用简单的形式上传到服务器（我不需要任何帮助），但一开始它们不会有任何保护。所以我想在其中使用 exec 函数和 ghostscript 对他们进行密码保护。但是我在任何地方都找不到ghostscript查询应该是什么样的。

例如，我有一个名为 File.pdf 的 PDF 文件。我上传它，然后我需要对其进行保护并将其命名为 File_protected.pdf。

我试图这样做，但“.ps”文件的权重太大，最终的 File_protected.pdf 中没有密码：

```
exec("gs -dNOPAUSE -dBATCH -sDEVICE=pswrite -sOutputFile=File.ps File.pdf");
exec("gs -dNOPAUSE -dBATCH -sPDFPassword=password -sDEVICE=pdfwrite -sOutputFile=File_protected.pdf File.ps"); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T07:24:24.510

好的，首先您不需要将文件转换为 PostScript。Ghostscript 完全能够将 PDF 文件作为输入并生成 PDF 文件作为输出，很多人出于多种原因这样做。

但是，您需要注意，如果您这样做，Ghostscript 不仅仅是“标记”PDF 文件或其他东西，它会将其完全解释为标记操作，然后制作一个包含这些标记的全新 PDF 文件。但是，如果您对转换为 PostScript 并返回 PDF 感到满意，您应该会觉得这很令人满意，它实际上比进行 2 步转换要好。

其次，pdfwrite 设备没有“PDFPassword”开关，这就是它不起作用的原因。有*2 个*开关：`-sOwnerPassword`和`-sUserPassword`。您可能还想提供`-dPermissions`开关。

您应该阅读 PDF 参考手册以收集详细信息，但简而言之，所有者可以对文件执行任何操作，用户仅限于权限（这是一个位字段）。如果您不提供用户密码，那么任何人都可以打开文件（仅限于权限），但您需要提供所有者密码才能执行权限不允许的任何操作。我怀疑这是您想要做的，但这取决于您。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-13T15:48:59.907

开关`-sOwnerPassword`对`-sUserPassword`我不起作用。

然而，`-sPDFPassword`做到了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-04T10:05:01.027

上面的答案对我不起作用，所以我发布了我的答案。

鬼脚本版本：

```
manan@manan-EliteBook-8470p ~ $ gs -v
GPL Ghostscript 9.18 (2015-10-05)
Copyright (C) 2015 Artifex Software, Inc.  All rights reserved. 
```

将起作用的命令...

```
gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dBATCH -dNOPROMPT -dNOPAUSE -dQUIET -sOwnerPassword=mypassword -sUserPassword=manan -sOutputFile=MyOutputFile.pdf MyInputFile.pdf 
```

# ios - 单元测试（Kiwi）：调用 loadView 和 viewDidLoad 后，测试中的属性始终为零

> ID：12921007
> 
> 赞同：1
> 
> 时间：2012-10-16T18:21:25.907
> 
> 标签：ios, unit-testing, tdd, ios6

为了我自己的参考，我正在编写一个单元测试模板项目。这包括所有基本任务的模板代码，例如在 viewDidLoad 之后验证 UILabel 的文本属性是否按预期设置。

我有一个带有一个 UILabel 的 ViewController 的故事板。在 viewDidLoad 我设置它的文本。然后测试断言文本是否已按预期设置，但由于某种原因，UILabel 始终为 nil。当我运行应用程序时，一切都按预期工作（感谢上帝）；显示带有预期文本标签的白色视图。

我使用 Kiwi 作为我的测试框架和 Xcode v4.5。

这是一些代码：

**视图控制器.h：**

```
@property (strong, nonatomic) IBOutlet UILabel *myLabel; 
```

**视图控制器.m：**

```
- (void)viewDidLoad {
    myLabel.text = @"test";
} 
```

**ViewControllerTests.m：**

```
ViewController *vc = [[ViewController alloc] init];

// create view in memory by calling view's getter
[vc view];

// set myLabel.text to "test"
[vc viewDidLoad];

[vc.myLabel shouldNotBeNil];
[[vc.myLabel.text should] equal:@"test"]; 
```

上面的测试失败了，告诉我 myLabel 是 nil。

[这个 StackOverflow 回答](https://stackoverflow.com/questions/8687378/iphone-testing-testing-iboutlets)指出调用 loadView 将在内存中创建视图层次结构，从而准备任何子视图以供使用。[根据文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)，只需调用 ViewController 视图的 getter 即可为您调用 loadView 并创建所有视图。因此，我发现在测试时 myLabel = nil 非常奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:50:41.803

在您的视图控制器中，您没有为`self.myLabel`.

```
self.myLabel = [[UILabel alloc] init]; 
```

这意味着`self.myLabel`有一个 nil 值，所以会发生以下序列：`[self myLabel]`返回 nil，`[nil setText:@"test"]`什么也不做。所有这些都是标准行为。

当您从 nib 或 storyboard 加载视图控制器时，标签是根据在 IB 中绘制的方式分配的，但调用`ViewController *vc = [[ViewController alloc] init]`不会加载 nib 或 storyboard。

* * *

**更新**

重新阅读我的帖子后，我想我留下了错误的印象。

您需要从 nib 或情节提要加载，而不是添加`self.myLabel = [[UILabel alloc] init]`.

要从笔尖加载，请使用`-initWithNibName:bundle:`而不是`-init`. 要从情节提要加载，首先使用情节提要加载`+[UIStoryboard storyboardWithName:bundle:]`，然后使用情节提要加载视图控制器`-[UIStoryboard instantiateViewControllerWithIdentifier:]`。

# windows-8 - 将我的应用设置存储在 SkyDrive 中是否违反“使用条款”？

> ID：12921009
> 
> 赞同：1
> 
> 时间：2012-10-16T18:21:43.923
> 
> 标签：windows-8, onedrive

我的应用程序在 Android、iOS、WebSite、WindowsPhone 和现在的 Windows 8 上运行。我已经使用 SkyDrive。这是我存储我的应用程序创建的文件的地方。

在 SkyDrive 中也存储我的应用程序设置在技术上并不困难。这将使我拥有跨设备的“统一”设置体验。那很好。

这是允许的吗？我可以“技术上”做我可以“合法”做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:21:43.923

**它没有**。SkyDrive 不会阻止您将 SkyDrive 文件夹用于存储设置文件（如 XAML 文件或其他文件）。这不违反 ToS。

> 这过去是不允许的。但是，我已通过 SkyDrive PM 确认了此更改。

**警告**！SkyDrive 没有供应用程序存储此类信息的保护区。因此，用户可以随时删除或篡改设置文件。如果您决定使用 SkyDrive 来存储这些文件，如果它们丢失或损坏，还要制定缓解计划。

# android - android - 进度对话框不会很快出现

> ID：12921015
> 
> 赞同：0
> 
> 时间：2012-10-16T18:21:51.387
> 
> 标签：android, progressdialog

在我的应用程序中，当调用特定活动时，我正在显示来自 url 的图像。由于来自 url 的图像加载缓慢，我试图在这里显示一个进度对话框，

以下是我显示进度对话框的代码，然后出现图像

```
class ShowImageTagList extends AsyncTask<Void, Void, Void> 
{
     ProgressDialog dialog = new ProgressDialog(UploadPhoto.this);
     protected void onPreExecute() 
     {
          Log.e("preexcute ","called");
          this.dialog.setMessage(" Loading ...");
          this.dialog.setCancelable(false);
          this.dialog.show();
     }

     protected Void doInBackground(Void... args) 
     {
        try
        {   
            JSONObject json = new JSONObject(Appconstants.photo_details);
            JSONArray photoperson = json.getJSONArray("photopersons");
            Log.e("photoperson ","value @ photoperson "+photoperson);
            for(int j=0; j < photoperson.length(); j++)
            {
               id.add(photoperson.getJSONObject(j).getString("pid").toString());
               names.add(photoperson.getJSONObject(j).getString("name").toString());
            }
         }
         catch(Exception e)
         {
             Log.e("Eception caught", ""+e);
         }
         return null ;      
      }

      protected void onPostExecute(Void unused) 
      {
           Log.e("post execute ","called");
           Bitmap bm = getBitmapFromURL(Appconstants.image_url.get(Appconstants.img_i));
           img_to_upload.setImageBitmap(bm);
           list_tag.setAdapter(new ListviewAdapter(UploadPhoto.this, names, id));
           dialog.dismiss();
      }
}

public static Bitmap getBitmapFromURL(String src) 
{
    try 
    {
       URL url = new URL(src);
       HttpURLConnection connection = (HttpURLConnection) url.openConnection();
       connection.setDoInput(true);
       connection.connect();
       InputStream input = connection.getInputStream();
       Bitmap myBitmap = BitmapFactory.decodeStream(input);
       return myBitmap;
    }
    catch (IOException e)
    {
        e.printStackTrace();
        Log.e("Exception",e.getMessage());
        return null;
    } 
```

}

进度对话框不会立即出现，它会在图像出现之前出现微秒，但会立即打印预执行和后台执行的日志。当异步任务被调用时，

如何让进度从一开始就运行......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:25:31.077

搬进 `Bitmap bm = getBitmapFromURL(Appconstants.image_url.get(Appconstants.img_i));` 来

`doInBackground`

因为它是主要的漫长过程。你打电话给哪个`onPostExecute`。

`onPostExecute`在主 UI 线程上运行。

# php - 使用 Mysqli 显示循环数据

> ID：12921017
> 
> 赞同：1
> 
> 时间：2012-10-16T18:22:00.970
> 
> 标签：php, mysqli

我试图在我的 SQL 服务器中显示我的导航表中的链接。我选择链接的查询如下，但是当使用时不显示任何链接或仅显示一个链接（IE 不考虑循环）

```
$query = "SELECT link FROM navigation WHERE permission<='3'";
$result = mysqli_query($link, $query);
while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC));
echo '<li>';
echo $row['link'];
echo '</li>'; 
```

我也尝试过使用

```
$query = "SELECT link FROM navigation WHERE permissions<='3'";
$result = mysqli_query($link, $query);
while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC))
echo '<li>';
echo $row['link'];
echo '</li>'; 
```

我的原始代码是一个简单的 mysql_select 并且是

```
 $result=mysql_query("SELECT * FROM navigation WHERE enabled='1' AND permission<='3'");
            while ($row=
            mysql_fetch_array($result))
                {
                echo '<li>';
                echo $row['link'];
                echo '</li>';
                }

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:24:32.727

这个：

```
while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC));
echo '<li>';
echo $row['link'];
echo '</li>'; 
```

应该是这样的：

```
while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC))
{
   echo '<li>';
   echo $row['link'];
   echo '</li>';
} 
```

您必须这样定义代码块。

# performance - 画布渲染性能

> ID：12921018
> 
> 赞同：7
> 
> 时间：2012-10-16T18:22:12.210
> 
> 标签：performance, html, canvas, android-browser, frame-rate

我正在修改 Jump'n'Bump 游戏的 HTML5 端口，以便在基于 Apple 和 Android 的移动设备上运行。我使用便宜的 1 GHz Cortex-A8 Android 4.0.3 平板电脑进行测试。我在系统的浏览器中遇到了奇怪的行为。我通常会得到大约 1 FPS 的非常低的帧速率（每帧都重新绘制整个屏幕，使用 setTimeout ......）。但是，当我在 <canvas> 标记之前添加一个具有 position:fixed CSS 属性的 <div> 时，帧速率会飞涨，游戏变得可玩了。

有人可以解释一下这个奇怪的现象吗？Android 浏览器中是否存在一些影响画布性能的渲染模式？这是一个跨平台的问题吗？如何确保页面在用户浏览器中有效运行？

我正在处理的代码大纲：

```
<!DOCTYPE html>
<html>
<title>Jump'n'Bump - HTML5</title>
<meta http-Equiv="Cache-Control" Content="no-cache">
<meta http-Equiv="Pragma" Content="no-cache">
<meta http-Equiv="Expires" Content="0">
<meta name="viewport" content = "width=400px, user-scaleable=no">

<!-- javascript files included here -->
<script type="text/javascript" src="main.js"></script>

<style type="text/css">
  body { margin: 0px 0px 0xp 0px }
  canvas { border: 0px solid black; }
  img.resource { display:none; }
  #fixed_div { position: fixed; width: 10px; height: 10px; left: 0px; top: 0px; }
  #gameArea { position: absolute; left: 0px; top: 0px; width: 400px; height: 256px; background: red; }
  canvas {
    image-rendering: optimizeSpeed;             // Older versions of FF
    image-rendering: -moz-crisp-edges;          // FF 6.0+
    image-rendering: -webkit-optimize-contrast; // Webkit
    image-rendering: optimize-contrast;         // Possible future browsers.
    -ms-interpolation-mode: nearest-neighbor;   // IE
  }  
</style>
<body onload="init()" text="#FFFFFF" bgcolor="#000000">

<!-- image resources like this here: -->
<img class="resource" id='rabbits' src='rabbit.png'/>

<!-- *** remove the line below and the game slows down *** -->
<div id='fixed_div'></div>

<div id="gameArea"><canvas id="screen" width="400" height="256"></canvas></div> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:56:13.163

这个问题太好奇了。

尝试使用请求动画帧而不是 setInterval（没有魔法 div，=]）

```
function getRequestAnimFrame() {
    var game = this;
    // requestAnim shim layer by Paul Irish
    return  window.requestAnimationFrame       || 
            window.webkitRequestAnimationFrame || 
            window.mozRequestAnimationFrame    || 
            window.oRequestAnimationFrame      || 
            window.msRequestAnimationFrame     || 
            function(/* function */ callback, /* DOMElement */ element) {
                window.setTimeout(callback, 1000 / fps);
            };
} 
```

也许这有助于提高性能。

# java - 正则表达式字符集 [^\\w\\d\\s\\&] 不起作用

> ID：12921019
> 
> 赞同：0
> 
> 时间：2012-10-16T18:22:16.453
> 
> 标签：java, regex

我已经搜索了几篇可能提供我需要的答案的帖子，但我找不到一个。

我想知道为什么这个正则表达式：

```
Pattern.compile("[^\\w\\s\\d\\&]") 
```

不能在像这样的字符串上正常工作：

```
"AE&E randomstr§%%%ing b§)$§$/bla & some text" 
```

结果将是（经测试）：

```
"AE E randomstring blabla some text" 
```

虽然我特别排除了＆符号。以前的令牌是否会推翻它？谁能澄清这背后的逻辑？

我的代码：

```
 String str = "AE&E randomstr§%%%ing b45747bla & some text";
    Pattern pattern = Pattern.compile("[^\\w\\s\\d\\&]");
    Matcher matcher = pattern.matcher(str);
    str = StringUtils.normalizeSpace(matcher.replaceAll(" ")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:24:38.140

它工作正常。& 符号被替换，因为您将它排除在**允许**的字符之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:31:02.663

我必须道歉。我发誓我试过它没有逃脱和逃脱，但它似乎不起作用。冷冻豌豆的罗迪让我再次尝试，神奇的是，现在剧本做了它应该做的事情。

感谢评论者，

-解决了！

工作代码：

```
String str = "AE&E randomstr§%%%ing b45747bla & some text";
Pattern pattern = Pattern.compile("[^\\w\\s\\d&]");
Matcher matcher = pattern.matcher(str);
str = StringUtils.normalizeSpace(matcher.replaceAll(" ")); 
```

# tomcat - 从 webapp 管理 tomcat 日志记录

> ID：12921026
> 
> 赞同：1
> 
> 时间：2012-10-16T18:22:32.823
> 
> 标签：tomcat, logging, log4j, catalina.out

有没有办法从 webapp 的 log4j xml 管理 tomcat 日志记录？

通过这个，我的意思是我特别希望阻止来自 WebappClassLoader 的 SEVERE 级别的日志被放入 catalina.out 日志中。

编辑 ：

在研究过程中，我了解到如果文件存在或 WEB-INF/classes 中存在文件，log4j 将优先考虑来自任何父类加载器的 log4j.xml。如果父类加载器没有其他 log4j.xml 文件，是否会从 webapp log4j.xml 为 tomcat 和特定于应用程序的应用程序采用默认设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:58:11.087

不，我认为没有办法在 Web 应用程序中覆盖 Tomcat 的日志记录设置。

要解决您的问题，您可以尝试更改[Tomcat 的默认日志配置](http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_java.util.logging_%28default%29)。如果您更喜欢 log4j，您可以尝试[将 Tomcat 配置为使用 log4j](http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_Log4j)而不是 java.util.logging。

# response - 在java过滤器中计算响应时间

> ID：12921034
> 
> 赞同：1
> 
> 时间：2012-10-16T18:23:12.370
> 
> 标签：response, servlet-filters

我不知道 java 过滤器中 doFilter() 方法的生命周期。我想知道我是否要在方法开始时在请求中设置开始时间，有没有办法或地方在方法中设置停止时间，这会给我从请求开始到的总经过时间给出答复的时间？我已经看到了一个带有 finally 块的 doFilter() 方法，我想知道在响应中设置停止时间是否合适？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T03:16:25.953

```
import java.io.IOException;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;

public class ResponseTimerFilter implements Filter {
  protected FilterConfig config;

  public void init(FilterConfig config) throws ServletException {
    this.config = config;
  }

  public void destroy() {
  }

  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
      throws ServletException, IOException {
    long startTime = System.currentTimeMillis();
    chain.doFilter(request, response);
    long elapsed = System.currentTimeMillis() - startTime;
    String name = "servlet";
    if (request instanceof HttpServletRequest) {
      name = ((HttpServletRequest) request).getRequestURI();
    }

    config.getServletContext().log(name + " took " + elapsed + " ms");
  }
} 
```

web.xml

```
<filter>
  <filter-name>Timing Filter</filter-name>
  <filter-class>com.omh.filters.ResponseTimerFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>Timing Filter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# php - 网页上打印的两个表格标题

> ID：12921036
> 
> 赞同：0
> 
> 时间：2012-10-16T18:23:15.013
> 
> 标签：php, mysql, header, extra

我必须解决问题，在下面运行脚本后，它会在最后打印出一个额外的标题？

我正在做的是从两个表中获取数据，并带有某些参数，然后将它们放入一个表中。最后的 echo $result 只是为了查看 $result 里面还有什么，它会在额外的标题之前和标题之后打印出一个值。

我怎样才能解决这个问题？

```
 extract(shortcode_atts(array(
                "countryid"=>'',
            ), $atts));

// Setting up variables
// Get all the data from the "example" table

        $joburl = "http://www.x.co.za/job/view/";
        $result = mysql_query("SELECT wpjb_job.company_name , wpjb_job.job_category , wpjb_job.job_country ,
                                        wpjb_job.job_title , wpjb_job.job_slug , 
                                        wpjb_category.id ,  wpjb_category.title 
                                    FROM wpjb_job 
                                        INNER JOIN wpjb_category ON wpjb_job.job_category = wpjb_category.id
                                        WHERE job_country='$countryid'
                                        AND(is_filled='0' AND is_active='1')
                                        ORDER BY job_title") 
                    or die(mysql_error());

        echo "<table border='1'>";
        echo "<tr> <th>Job</th> <th>Company</th> <th>Industry</th> </tr>";

// keeps getting the next row until there are no more to get

    while($row = mysql_fetch_array( $result )) {

// Print out the contents of each row into a table

        echo "<tr><td>"; 
        echo '<a href ="http://www.x.co.za/job/view/'.$row['job_slug'].'"> '.$row['job_title'].' </a>';
        echo "</td><td>"; 
        echo $row['company_name'];
        echo "</td><td>";
        echo $row['title'];
        echo "</td></tr>"; 
    } 
    echo "</table>";
    echo $result;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:09:05.857

好的尝试如下

将表格的标题行和关闭标签置于以下条件

```
 $count = mysql_num_rows($result);

    if($count > 0){
      echo "<table border='1'>";
       echo "<tr> <th>Job</th> <th>Company</th> <th>Industry</th> </tr>";
    }
    //your while loop
    while(...) {
       ....
    }
    if($count > 0){
      echo "</table>";
    } 
```

# github - 如何在 github 上查看我正在观看的所有项目？

> ID：12921040
> 
> 赞同：85
> 
> 时间：2012-10-16T18:23:29.657
> 
> 标签：github

有没有办法查看我正在观看的所有项目的列表，并且可能批量取消观看？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-10-16T18:45:07.933

*   确保您已登录并转到**[https://github.com/watching](https://github.com/watching)**
*   利润！;-)

关于这个和相关功能的更多信息可以在官方**[公告中](https://github.com/blog/1204-notifications-stars)**

![看过](../Images/70424b4e45d67038af78cbe778c1ec70.png)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-04T23:04:26.367

正如@xinthose 评论的那样，2020 年情况发生了变化，包括我们现在已经为 repos 加星标（这通常是你真正想要的）以及不同级别的观看。

对于观看的 repos，请执行以下操作（或`https://github.com/watching`按照@nulltoken 的建议输入 URL）。然后，您将按手表类型分组您的 Watched 存储库。

1.  点击右上角的铃铛

[![github 钟](../Images/b091254afe2fc862fd82a1dae812510c.png)](https://i.stack.imgur.com/NOHig.png)

2.  选择左下角的*管理通知，然后选择**观看的存储库*

[![在此处输入图像描述](../Images/f0d10cf9536ad7cb96048aa7f7e53d09.png)](https://i.stack.imgur.com/PDM9d.png)

对于已加星标的存储库，单击右上角的头像，然后选择*您的星星*。

[![头像菜单](../Images/a1d2fa4086c5d99fb920d759fdefda07.png)](https://i.stack.imgur.com/7W0ek.png)

# pouchdb - PouchDB 未捕获异常：适配器无效

> ID：12921042
> 
> 赞同：1
> 
> 时间：2012-10-16T18:23:34.287
> 
> 标签：pouchdb

我是 javascript 和 pouchdb 的新手。我做了一个简单的html文件

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script src="js/pouch.alpha.js"></script>
        <title>New Web Project Page</title>
    </head>
    <body>
        <h1>New Web Project Page</h1>
        <script>
            Pouch('idb://test', function(err, db) {
                // Use db to call further functions
            });
        </script>
    </body>
</html> 
```

我下载了 pouch.alpha.js 文件并将其放入“js”文件夹中。

我只想尝试 pouchdb.com 网站上的第一个示例来创建数据库，但 Firefox>Tools>Web Developer>Error console 给了我错误：

> 未捕获的异常：无效的适配器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:51:45.337

你安装的是什么版本的火狐？我刚刚复制了您的确切测试，它适用于 Firefox 16

# c# - 在这个简单的多线程示例中，为什么 Main() 中的最后一个方法总是最后执行？

> ID：12921046
> 
> 赞同：1
> 
> 时间：2012-10-16T18:23:45.267
> 
> 标签：c#, multithreading

```
static int i = 0;

static void Main()
{
    ThreadTest tt = new ThreadTest();
    new Thread(tt.Incr).Start();
    tt.I();
    tt.I2();
}

void Incr()
{
    for(int x = 0; x < 3; x++)
    {
        Console.WriteLine(i);
        i++;
    }
}

void I()
{
    while(i <= 3)
    {
        if(i==3)
            break;
        Console.WriteLine("Value of i in I:{0}",i);
    }
}

void I2()
{
    Console.WriteLine("\t\tFinally i is:{0}\n\n",i);
} 
```

我现在已经运行了这段代码大约几百次，发现 I2 总是最后执行。为什么会这样？可能几百次还不足以看到线程真正的不可预测性？

[11 次运行的输出](http://pastebin.com/qmQ7f2zL)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:28:24.580

好吧，`I2()` *是*最后一个方法，`Main()`它没有以任何方式线程化。

那么问题是什么，为什么线程更早完成？

那是因为`I2()`is run *after* `I()`并且 while-loop in`I()`有效地等待线程首先完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:30:25.377

该方法`I2`将始终最后执行。这与线程无关。

```
static void Main()
{
    ThreadTest tt = new ThreadTest();
    new Thread(tt.Incr).Start();
    tt.I(); // This will be executed first
    tt.I2(); // This will be executed last
} 
```

新启动的线程和当前线程的流程是不同步的，但当前线程会以同步的方式继续其操作，按照出现的顺序执行语句。在这种情况下`I()`会在之前调用`I2()`。

# ruby-on-rails - 使用Passenger Enterprise“大规模部署”功能部署Rails 应用程序

> ID：12921049
> 
> 赞同：0
> 
> 时间：2012-10-16T18:23:55.940
> 
> 标签：ruby-on-rails, nginx, passenger

我们正在考虑为Passenger Enterprise 购买许可证，我正在寻找有关Passenger Enterprise Edition 中“大规模部署”功能的更好解释。

假设您有 Rails 3 应用程序 -

*   我的博客
*   新闻网站
*   在线简历

这些都被放到服务器上的一个目录中，我们可以让Passenger查看那个目录并提供这些应用程序。

所以我的问题是：nginx是怎么进来玩的呢？该虚拟服务器的 nginx 配置是否完全被忽略？我们经常需要升级 nginx 配置以进行重写，以及一些乘客配置（例如 min_instances）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:00:59.460

在[Phusion 网站](https://www.phusionpassenger.com/enterprise)上看到乘客大规模部署视频后，我怀疑大规模部署选项仅适用于乘客独立，而不适用于乘客 Nginx 模块。

一种选择是使用Passenger Standalone ( `$ passenger start`) 并通过使用该`proxy_pass`指令将Nginx 用作反向代理，如Phusion 团队的这篇[“Phusion Passenger & running multiple Ruby versions”](http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/)博客文章所示。这是从该帖子中获取的相关 Nginx 配置片段：

```
# Partial Nginx configuration
server {
    listen 80;
    server_name www.fries.com;
    root /webapps/fries.com/public;
    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_set_header Host $host;
    }
} 
```

目前似乎不存在有关此功能的文档，除了上述产品视频。[Vimeo](http://vimeo.com/46042771)上有一个高分辨率版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T00:29:38.700

我自己正在寻找这方面的文档，并认为我会在这里为未来的搜索者提及它。

[Phusion Passenger Standalone：大规模部署](http://www.modrails.com/documentation/Users%20guide%20Standalone.html#mass_deployment "大规模部署")

# javascript - 将 PDF 页面解析为 javascript 图像

> ID：12921052
> 
> 赞同：18
> 
> 时间：2012-10-16T18:24:08.820
> 
> 标签：javascript, image, bash, pdf

根据标题，有什么方法可以将不受保护的 PDF 文件中的页面解析为 javascript Image() 对象？

在运行 javascript 之前转换它们也可以，但我希望这可以自动完成，并且不需要任何需要安装的库的帮助。

网上有人发布了这个 Bash 脚本。不幸的是，我不了解 Bash，但运行它非常简单。

```
#!/bin/bash
PDF='doc.pdf'
NUMPAGES=`identify -format %n "$PDF"`

for (( IDX=0; IDX<$NUMPAGES; IDX++ ))
do
  PAGE=$(($IDX+1))
  convert -resize 1200x900 "$PDF[$IDX]" `echo "$PDF" | sed "s/\.pdf$/-page$PAGE.jpg/"`
done

echo "Done" 
```

但我得到了这些错误：

```
line 3: identify: command not found
line 5: ((: IDX<: syntax error: operand expected (error token is "<") 
```

使用 Bash 脚本预转换 PDF 将是一个很好的解决方案。有人可以修复上面的脚本或提供替代解决方案吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-16T18:38:51.797

[PDF.js](https://github.com/mozilla/pdf.js/)将让您将 PDF 呈现到画布上。然后您可以执行以下操作：

```
var img = new Image();
img.src = pdfCanvas.toDataURL(); 
```

PDF.js 给我留下了深刻的印象。我喜欢让客户的浏览器为我做尽可能多的工作。

演示在这里：http: [//jsbin.com/pdfjs-helloworld-v2/1/edit](http://jsbin.com/pdfjs-helloworld-v2/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:27:55.017

看起来第一个问题是缺少可执行文件：`identify`. 这是 ImageMagick 的一部分：

[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

确保你的路径中也有它。

# mysql - 非常简单的mysql连接

> ID：12921055
> 
> 赞同：0
> 
> 时间：2012-10-16T18:24:27.900
> 
> 标签：mysql

任何人都可以告诉我如何连接这两个表。我自己尝试过..但只是浪费了时间，我知道这很容易，但我不知何故无法理解。表格来自我之前的[问题](https://stackoverflow.com/questions/12920061/multiple-values-in-one-column-or-not/12920201#12920201)

```
Table Articles:

    ID     Content   
    1          bla 
    2          blah 
    3          etc.
    4          whatever

Table Similar:

    ID     Similar_ID   
    3          1
    3          2
    4          1
    4          2
    4          3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:27:46.687

```
select a.ID,a.Content,s.Similar_ID from 
Articles a inner join Similar s
on a.ID=s.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:34:54.643

您想浏览`Similar`表格，并在`Content`（例如“Blah”）中“转换”其 ID（例如 3）。

所以： SELECT * FROM Similar;

将列出所有相似之处。由于我们有两个`Ids`要转换（*某些东西*类似于*其他东西*），我们需要两个单独的 JOINS 与同一个表`Articles`，我们将它们别名为“a”和“b”：

```
 SELECT a.Content, b.Content
     FROM Similar
     JOIN    Articles AS a      ON (Similar.ID = a.ID)
     JOIN    Articles AS b      ON (Similar.Similar_ID = b.ID)
 ; 
```

第一个`JOIN`“解码”Similar 的 ID 字段，第二个解码“Similar_ID”。

所以

```
3     1 
```

变成现在

```
Etc.  Blah 
```

或者你可以写：

```
SELECT CONCAT(a.Content, ' is similar to ', b.Content)
FROM... (same query as above) 
```

并得到

```
Etc. is similar to Blah
Blah is similar to whatever
... 
```

# php - PHP - 在 PDO 连接后消失的语言环境信息 (DB2)

> ID：12921059
> 
> 赞同：4
> 
> 时间：2012-10-16T18:24:36.893
> 
> 标签：php, pdo, db2, locale

PHP 在使用 PDO 连接到 DB2 后丢失所有语言环境信息有什么原因吗？

连接后，我总是必须再次设置语言环境信息。

```
<?PHP
//set locale information
setlocale( LC_MONETARY,'en_US' );

//print location information
print_r(localeconv());

//    Array
//    (
//      [decimal_point] => .
//      [thousands_sep] => 
//      [int_curr_symbol] => USD 
//      [currency_symbol] => $
//      [mon_decimal_point] => .
//      [mon_thousands_sep] => ,
//      ...
//    )

//************************************************
//create conenction to server
$connection= new PDO("odbc:server", 'username', 'password');
//************************************************

//see locale information after creating a connection
print_r(localeconv());

//    Array
//    (
//      [decimal_point] => .
//      [thousands_sep] => 
//      [int_curr_symbol] => 
//      [currency_symbol] => 
//      [mon_decimal_point] => 
//      [mon_thousands_sep] => 
//      ...
//
//    )
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:34:29.320

如果您在 Windows 上，则存在 setlocale() 不起作用的一般问题。在我的情况下，它在脚本中的随机点切换到基本语言环境，在脚本运行时。我赢得了 7 个专业的 64 位。当时没有其他脚本正在运行。

# mysql - MySQL中的特殊字符？

> ID：12921062
> 
> 赞同：0
> 
> 时间：2012-10-16T18:24:44.523
> 
> 标签：mysql

我正在使用 My SQL 数据库在 VS C# 中构建应用程序。但是，每次我尝试从数据库中读取带有特殊字符的值时，它都会崩溃。我的架构排序规则是 utf8-default 排序规则。我不确定下一步该怎么做，有人可以帮忙吗？

错误：“SQL 语法错误，请查看与您的 mySQL 服务器版本对应的手册”

代码：

```
string query = "select description from tableName where description = '"+codeName+"' ";
string codevalue = Browse.selectUsingReader(query); 
```

我试图得到“超出女性生育年龄范围”这一行。存储在我的数据库中以显示给用户。撇号是引发异常的原因，因为如果我删除它，我不会收到任何错误。

此外，当尝试为密码存储特殊字符（如“#@”）时，我遇到了类似的问题。

# c - 打印出c中最长的字符串

> ID：12921064
> 
> 赞同：2
> 
> 时间：2012-10-16T18:24:51.230
> 
> 标签：c

给定命令行输入任意数量的程序参数，计算每个参数的长度，最后输出最长的字符串。这是我的代码，但它似乎是错误的。

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[]) {
  size_t maxlen = 0, len;
  int i;
  int longest;

  for (i = 1; i < argc; i++) {
   len = strlen(argv[i]);
     if (len > maxlen) 
       longest = argv[i];
  }

  printf("The longest string is %s. \n", longest);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:31:00.490

错误：

一。`char max; ... max = strlen(argv[i]);`错误的; `strlen()`返回`size_t`而不是`char`.

二：`if(max < argv[i])`也错了，您正在将字符串的长度与指向字符串的指针进行比较。这甚至没有意义。你可能想要的是

```
size_t maxlen = 0, len;
int i, maxindex = 0;

for (i = 1; i < argc; i++) {
    len = strlen(argv[i]);
    if (len > maxlen) {
        maxlen = len;
        maxindex = i;
    }
}

printf("The longest string is '%s'\n", argv[maxindex]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:27:43.997

你的问题在这里：

```
max = strlen(argv[i]);
if(max < argv[i])
{
  max=argv[i];
} 
```

您似乎`max`对这里的用途有些困惑。你真正想做的是：

*   取`strlen(argv[i])`，并将其存储在变量中
*   检查是否大于`max`
*   如果是，请将其存储在`max`

尝试将其转换为 C 代码并发布您的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:27:48.747

你的意思是：

```
int i;
int max = strlen(argv[0]);

for (i = 0; i < argc; ++i) 
{
    if (max < strlen(argv[i]))
    {
        max = strlen(argv[i]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:29:30.807

```
int max = 0;//assuming  initial max length of 0\. start loop from index 1 (index 0 is program name)
for(i = 1; i < argc; ++i) {

    int len = strlen(argv[i]);//get length of str
    if(max < len )
    {
       max=len;//store the new max length
    }
} 
```

# mercurial - Mercurial 在更新到不同分支期间创建未版本化的文件副本

> ID：12921067
> 
> 赞同：1
> 
> 时间：2012-10-16T18:25:02.527
> 
> 标签：mercurial, branch

不久前，我注意到当我在分支之间更新时，hg 在看似随机的时间开始在存储库中创建未版本化的文件副本。我这辈子都想不出我可能会改变什么来让这种情况开始发生。详细或跟踪输出中没有任何内容表明正在创建这些文件。

新的未版本化文件名都以添加到扩展名末尾的随机字符串结尾：

```
file1.txt-23121dd1  
someotherfile.sql-bc769bd2  
bizarrofile.cs-40a93ed0
hgisinvadingurhead.ppt-f8e9015a 
```

在试图确定这种情况发生的模式时，我注意到以下几点：

*   文件名中添加的字符与存储库中的任何变更集 ID 都不对应。我已经完成了`grep -i`输出，`hg history`并且文件名中的字符串没有出现在输出中的任何位置。
*   在所有情况下，文件都存在于我正在处理的分支中，但不存在于我更新到的分支中。
*   有时只有一两个文件，有时是几个。
*   绝不是这些文件都存在于一个分支中而不是另一个分支中。
*   更新之间永远不会是同一组未版本化的文件。
*   我团队中正在克隆相同存储库的其他人似乎没有遇到这种情况

我想这可能是存储库中的某些东西，但它也发生在其他现有的存储库和全新的存储库中。

例如，我已经这样做了（除了最后的 hg status 输出之外，省略了 hg 输出，但输出没有错误）：

```
c:\> mkdir repo
c:\> cd repo
c:\repo\> hg init
c:\repo\> echo default > default.txt
c:\repo\> hg add
c:\repo\> hg commit -m "Commit default"
c:\repo\> hg branch branch1
c:\repo\> echo branch1 > branch1.txt
c:\repo\> hg add
c:\repo\> hg commit -m "Commit branch1"
c:\repo\> hg update default
c:\repo\> hg status
? branch1.txt-23121dd1 
```

这不是每次都可以重复的。我可以重复这些步骤，有时未版本化的文件会在最后出现，有时不会。这是非常零星的。但是，在较大的存储库中，我几乎总是在分支更新之间看到至少一个未版本控制的文件。

以下的完整输出`hg update default`。无论是否创建了未版本化的文件，输出始终如此显示。

```
resolving manifests
calling hook preupdate.eol: <function preupdate at 0x0000000002571668>
removing branch1.txt
0 files updated, 0 files merged, 1 files removed, 0 files unresolved 
```

当我第一次注意到它时，我使用的是旧版本的 hg，但更新到 2.3.2 后问题仍然存在。我正在使用带有 TortoiseHG 2.5.1 x64 的 Windows 7 Pro x64。但是，我认为它与 Tortoise 无关，因为我可以通过在命令行中使用 hg 来复制问题。

我的 mercurial.ini 文件的内容是：

```
[ui]
username=myname <myname@mydomain.com>
ignore=C:\users\myusername\.hgignore
verbose=true
trace=true

[eol]
native = CRLF
only-consistent = False

[extensions]
purge =
eol = 
```

我可以忍受它，但要确保我不会意外地将这些文件添加到带有其他新文件的变更集中的存储库中，这很痛苦。

如果有人看到了这一点并且可以指出我的罪魁祸首，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:26:21.213

如果在变更集之间更新时文件正在使用中，则使用中的文件将使用添加的数字重命名，以便更新成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:56:55.917

禁用`eol`扩展有帮助吗？我注意到您的测试也没有使用`.hgeol`文件（这是与[此扩展](http://mercurial.selenic.com/wiki/EolExtension)相关的事情之一）。这里有[另一个线程](https://stackoverflow.com/questions/6464824/mercurial-marks-unmodified-files-as-modified-in-working-directory-and-fails-to-r)专门解决此扩展的一些问题。

# internet-explorer - 你能用 Internet Explorer 9 中的 F12 重写谷歌来说出你想要的吗

> ID：12921070
> 
> 赞同：-1
> 
> 时间：2012-10-16T18:25:10.200
> 
> 标签：internet-explorer

我在 IE9 中，我的朋友说你可以使用`F12`命令更改网站，让他们说出你想让他们说的内容。这是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:28:55.080

使用开发者工具，你不能修改 web 服务器上的内容，你只能修改 DOM。DOM 是浏览器表示页面的方式。

# exception - 例外：使用范围

> ID：12921071
> 
> 赞同：0
> 
> 时间：2012-10-16T18:25:10.807
> 
> 标签：exception

我可以使用异常作为跳出当前上下文到某个更高架构层的简单方法，以避免例行返回代码检查（有点`if ($response['code'] != CodeStatus::SUCCESS) return null;`）？我所说的例外通常可能意味着无效的用户帐户或某种东西，即它不是紧急情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:31:54.497

我想我找到的最佳答案在[这里](https://stackoverflow.com/questions/77127/when-to-throw-an-exception)。

还有一些[谷歌研究](https://www.google.ru/search?client=ubuntu&channel=fs&q=exceptions%20as%20control%20flow%20mechanism&ie=utf-8&oe=utf-8&redir_esc=&ei=OYR-UNngF-3S4QTo_oDADQ)。

# android - onClickListener中的Android AlertDialog获取父视图

> ID：12921072
> 
> 赞同：3
> 
> 时间：2012-10-16T18:25:13.370
> 
> 标签：android, android-alertdialog, onclicklistener

我有一个 onClickListener 事件，其中包含一个带有 onClick 事件的 AlertDialog，我想获取父 onClick 事件视图，例如：

```
View.OnClickListener listener = new View.OnClickListener(){
    public void onClick(View v){
        //need to pass v to alert's onClickListener
        AlertDialog.Builder alert = new AlertDialog.Builder(MyClass.this);
        alert.setPositiveButton("Go", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog,int which){
                //need parent onClick's View as v
                String str = v.getTag().toString();
                Toast.makeText(getApplicationContext(),str,Toast.LENGTH_SHORT).show();
            }
        });
    }
}; 
```

知道如何实现这一目标吗？我不能在 onclicklistener 中调用 (View)findViewById(id) 因为这将应用于以编程方式创建的多个项目

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T18:27:46.443

改变

```
public void onClick(View v) 
```

到

```
public void onClick(final View v) 
```

这将允许您访问对话框按钮的 onClickListener 内的单击视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:58:41.000

你忘了打电话

```
alert.show(); 
```

没有这个对话框将不会显示

完整源代码：

```
 someViewItem.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(final View v) {

                AlertDialog.Builder alert = new AlertDialog.Builder(MyActivity.this);
                alert.setMessage("abcd");
                alert.setPositiveButton("Go",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {

                                String str = "aaa";
                                Toast.makeText(getApplicationContext(),
                                        str, Toast.LENGTH_SHORT).show();
                            }
                        });
                alert.show();

            }
        }); 
```

# xcode - 无法在 Xcode 编辑器 (SVN) 中提交/更新文件

> ID：12921076
> 
> 赞同：3
> 
> 时间：2012-10-16T18:25:24.420
> 
> 标签：xcode, svn

我在使用 Xcode 的内置 SVN 管理器时遇到问题。

我检查了一个远程 SVN 存储库，我想在 Xcode 的编辑器中工作时提交更改。如屏幕截图所示，它在管理器窗口和编辑器侧边栏中显示了正确的 SVN 标志（M 表示已修改等），但是当我尝试从编辑器中提交时，我收到错误消息：

> 由于未找到有效的工作副本，因此无法执行该操作。

尽管在管理器窗口中提交/更新等工作正常......</p>

任何想法为什么？

![Xcode SVN 错误](../Images/0dd0f924c83f6a4d06805292c3af073f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:51:13.207

我最近遇到了同样的问题。

对我来说，解决方案是简单地重新启动 Xcode，然后通过右键单击“Source Control >”菜单将所有文件标记为可更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T13:10:26.827

我认为 Xcode 颠覆版本与存储版本不同。如果您使用其他 svn 管理工具，例如“cornerstone”，则必须检查版本。

在终端上检查 subversion 的版本

1.xcode颠覆/Applications/Xcode.app/Contents/Developer/usr/bin/svn --version

2.安装了subversion /usr/bin/svn --version

3.port安装版本/opt/local/bin/svn --version

检查这些版本并升级 Xcode 的 svn 二进制文件。

这就是我所做的。

```
$ cd /Applications/Xcode.app/Contents/Developer/usr/bin
$ mkdir svn_backup
$ mv svn* svn_backup/.
$ ln -s /opt/local/bin/svn* . 
```

并重新启动 Xcode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T05:14:17.453

我今天第一次用 Xcode 尝试 Git 时遇到了这个问题。我使用“创建本地 git 存储库”选项创建了两个演示项目，它们遇到了同样的问题。我能够从管理器窗口提交，但 Xcode 主文件视图似乎根本无法识别 git。

退出并重新启动后，我使用 git 选项创建了第三个演示，主窗口立即识别出更改 - 即在修改后的文件旁边显示“M”。

# chef-infra - 只有在另一个菜谱完成后才执行厨师菜谱

> ID：12921078
> 
> 赞同：0
> 
> 时间：2012-10-16T18:25:30.323
> 
> 标签：chef-infra, chef-recipe

我在不同的食谱中有两个食谱。我需要在第二个配方开始执行之前完全完成第一个配方，因为它放置了第二个需要的一些文件。我在运行列表中将第一个放在第二个之前，但似乎它们是并行执行的。

第一个配方完成后如何触发第二个配方的执行？（请注意，它们在不同的食谱中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:33:46.243

你能发布一段代码。我的猜测是您正在使用 LWRP（可能是内置的）并且它们都在运行结束时执行。这听起来很熟悉吗？

代码如：

```
cookbook_file node['.NET']['FilePath'] do
  source node['.NET']['FileName']
  action :create
end 
```

可以转换为：

```
configFile = cookbook_file node['.NET']['FilePath'] do
  source node['.NET']['FileName']
  action :nothing
end
configFile.run_action(:create) 
```

这意味着在代码的那部分强制执行（即当我们解析配方时）

# string - Bash脚本中的字符串比较不起作用

> ID：12921082
> 
> 赞同：1
> 
> 时间：2012-10-16T18:25:33.963
> 
> 标签：string, bash

我在 Bash 中编写了以下脚本，但它没有打印所需的输出：

```
a="abc"

if (test "$a"="$a ") then 
    echo "true "
else
    echo "false "
fi 
```

该脚本应该打印`false`，但不是。我是 Bash 脚本的新手，所以谁能告诉我为什么它不打印`false`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:30:51.197

您`test`只给出一个参数：`"$a"="$a "`，相当于`"$a=$a "`. 当`test`仅获得一个参数时，`0`如果该参数包含至少一个字符，则计算结果为 /true/success ，否则计算结果为`1`/false/error。最小的解决方法是在 周围放置空格`=`，因此您要给它三个单独的参数：

```
if (test "$a" = "$a ") then 
```

但我真的建议以 Bashier 风格编写它：

```
if [[ "$a" = "$a " ]] then 
```

（请注意，原始版本中的`(`and`)`仅导致`test`在子 shell 中运行，这根本没有任何作用。）

# javascript - 基本的 JavaScript EventListener 不起作用？

> ID：12921083
> 
> 赞同：1
> 
> 时间：2012-10-16T18:25:34.913
> 
> 标签：javascript

我正在尝试学习 JavaScript 的基础知识，但我不知道为什么这不起作用……它是如此基础？

```
<html>
<head>
<meta charset="utf-8" />
<style type="text/css">
    ul{
        list-style-type:none;
    }
    div{
        width:300px;
        height:200px;
        background-color:#0066cc;
    }
</style>

<script language="text/javascript"> 
    var testing = document.getElementById("addBtn");
    testing.addEventListener("click", function(e){ alert("test") } , false);
</script>

</head>
<body>
<ul id="placeholder"></ul>
<a href="#" id="addBtn">Add</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T18:27:09.750

当`addBtn`您尝试访问它时，它不会被加载。您应该在 DOM 加载后执行该操作，或者通过将该代码移动到文件的底部，或者通过`onload`事件：

```
window.onload = function() {
    var testing = document.getElementById("addBtn");
    testing.addEventListener("click", function(e){ alert("test") } , false);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:27:47.750

当代码：

```
var testing = document.getElementById("addBtn"); 
```

运行时，该`addBtn`元素尚未被解析。您可以做的一件事是将`<script>`标签向下移动到页面底部。

您可以做的另一件事是在 onload 事件中运行代码。就像是：

```
<script language="text/javascript">
   window.onload = function () {
      var testing = document.getElementById("addBtn");
       testing.addEventListener("click", function(e){ alert("test") } , false);
   };
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:43:03.483

除了使用`window.onload`（这是您问题的关键答案）之外，请考虑使用`<script>`or `<script type="text/javascript">`，因为“语言”属性已被弃用。[更多信息在这里](https://stackoverflow.com/questions/2267476/html-script-tag-type-or-language)。

# javascript - iFrame Unsafe JavaScript 中的 Facebook 应用程序尝试从仅在 Chrome 上使用 URL 的框架访问具有 URL 的框架

> ID：12921084
> 
> 赞同：0
> 
> 时间：2012-10-16T18:25:44.820
> 
> 标签：javascript, facebook, google-chrome, iframe

我正在使用 jQuery Webcam 插件，当我尝试附加 时，当我的应用程序位于 iFrame 内时，它会给我这个错误，而 chrome 是唯一一个抛出它的人。如果通过 apps.facebook.com 访问我的应用程序一切正常。

整体上的 flash 对象似乎按预期工作并被附加，但是如果您尝试接受和拒绝按钮，则不会响应鼠标输入或键盘输入，因为我尝试使用 TAB 键选择按钮，然后按空格键但是没发生什么事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:17:01.363

在我的头撞到墙上后，我尝试了一些愚蠢的东西，或者可能是一些非常明显的东西，解决这个问题的唯一方法是添加嵌入对象，在这种情况下是网络摄像头 Flash 插件，在用户执行操作之后。所以我必须创建一个按钮来负责添加网络摄像头 Flash 对象，比如“打开你的网络摄像头”。我希望这个答案有帮助，基本上你不能在加载时添加对象，或者已经嵌入 DOM，你必须在用户操作之后添加，通常是点击。

# python - 更新新值以键入字典（python）

> ID：12921086
> 
> 赞同：0
> 
> 时间：2012-10-16T18:25:48.633
> 
> 标签：python

我做了一个最小化的 DFA，为了使用键值样式编码，我使用了字典。

所以有一本字典，

```
{1: {1:2}} 
```

我想更新此字典添加 2:3 以添加键 1 的字典。

```
{1: {1:2, 2:3}} 
```

我不知道该怎么做。

有什么简单的想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:27:35.310

你可以使用`update()`：

```
In [27]: dic={1: {1:2}}

In [28]: dic[1].update({2:3})

In [29]: dic
Out[29]: {1: {1: 2, 2: 3}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:27:28.723

`dict[1][2] = 3`

它访问在 索引的第一个字典`1`，然后`2`将此字典的键分配给`3`。

# java - 使用 xml 中的规则验证 java 对象

> ID：12921087
> 
> 赞同：4
> 
> 时间：2012-10-16T18:25:57.067
> 
> 标签：java, xml, validation, object

这是我的问题的一个例子：

1) 我有一个 XML 文件，其中定义了我的发票规则

```
<rules>
..
  <price>
   <Required>True</Required>
   <MinValue>0.1</MinValue>
  <price>
..
</rules> 
```

2）我在java中有一个发票对象（重要：**这应该保持原样（普通）**。不应该包括任何注释或任何东西。）

```
public class Invoice implements Serializable {

    private String details;
    private String tax;
    private String recipient;
    private double price;

    //getter and setter 
```

}

3）至少我有一个验证器对象

```
public class Validator(){

    public boolean validate(String xmlfile, Invoice i) {
           //todo: Invoice i should be validated with xmlfile
    }
} 
```

我需要什么：验证器应该采用带有规则的 XML 文件，例如

```
 <price>
   <Required>True</Required>
   <MinValue>0.1</MinValue>
  <price> 
```

并使用该规则来验证 Invoice java 对象。

有什么好的框架我可以使用吗？还是教程？方法？非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:30:30.087

您可以使用[Hibernate Validator](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/)，它是 JSR 303 的实现。您可以在 XML 中编写约束，如下所示

```
<field name="x2"  ignore-annotations="true"    >  <!-- XML is stronger -->
        <constraint annotation="javax.validation.constraints.Min">
             <element name="value">2</element>
        </constraint>
    </field> 
```

可以在[这里找到一个完整而漂亮的教程](http://www.aviyehuda.com/2010/04/14/using-hibernate-validator-to-cover-your-validation-needs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:42:45.560

看看这个来自 Apache 的例子。

```
public class ValidateExample extends Object {

     /**
       * We need a resource bundle to get our field names and errors messages 
       * from.  Note that this is not strictly required to make the Validator 
       * work, but is a good coding practice.
       */
      private static ResourceBundle apps =
          ResourceBundle.getBundle(
              "org.apache.commons.validator.example.applicationResources");

      /**
       * This is the main method that will be called to initialize the Validator, create some sample beans, and
       * run the Validator against them.
       */
     public static void main(String[] args)
         throws ValidatorException, IOException, SAXException {

          InputStream in = null;
          ValidatorResources resources = null;

          try {

              // Create a new instance of a ValidatorResource, then get a stream
              // handle on the XML file with the actions in it, and initialize the
              // resources from it.  This would normally be done by a servlet
              // run during JSP initialization or some other application-startup
              // routine.
              in = ValidateExample.class.getResourceAsStream("validator-example.xml");
              resources = new ValidatorResources(in);

          } finally {
              // Make sure we close the input stream.
              if (in != null) {
                  in.close();
             }
          }

         // Create a test bean to validate against.
         ValidateBean bean = new ValidateBean();

          // Create a validator with the ValidateBean actions for the bean
          // we're interested in.
          Validator validator = new Validator(resources, "ValidateBean");

          // Tell the validator which bean to validate against.
          validator.setParameter(Validator.BEAN_PARAM, bean);

          ValidatorResults results = null;

          // Run the validation actions against the bean.  Since all of the properties
         // are null, we expect them all to error out except for street2, which has
         // no validations (it's an optional property)

         results = validator.validate();
         printResults(bean, results, resources);

         // Now set all the required properties, but make the age a non-integer.
         // You'll notice that age will pass the required test, but fail the int
         // test.
         bean.setLastName("Tester");
         bean.setFirstName("John");
         bean.setStreet1("1 Test Street");

       bean.setCity("Testville");

      bean.setState("TE");
         bean.setPostalCode("12345");
         bean.setAge("Too Old");
         results = validator.validate();
         printResults(bean, results, resources);

         // Now only report failed fields
        validator.setOnlyReturnErrors(true);
         results = validator.validate();
         printResults(bean, results, resources);

         // Now everything should pass.
         validator.setOnlyReturnErrors(false);
         bean.setAge("123");
         results = validator.validate();
         printResults(bean, results, resources);
     }

     /**
      * Dumps out the Bean in question and the results of validating it.
      */
     public static void printResults(
         ValidateBean bean,
         ValidatorResults results,
         ValidatorResources resources) {

         boolean success = true;

         // Start by getting the form for the current locale and Bean.
         Form form = resources.getForm(Locale.getDefault(), "ValidateBean");

        System.out.println("\n\nValidating:");
         System.out.println(bean);

         // Iterate over each of the properties of the Bean which had messages.
         Iterator propertyNames = results.getPropertyNames().iterator();
         while (propertyNames.hasNext()) {
             String propertyName = (String) propertyNames.next();

             // Get the Field associated with that property in the Form
             Field field = form.getField(propertyName);

             // Look up the formatted name of the field from the Field arg0
             String prettyFieldName = apps.getString(field.getArg(0).getKey());

             // Get the result of validating the property.
             ValidatorResult result = results.getValidatorResult(propertyName);

             // Get all the actions run against the property, and iterate over their names.
             Map actionMap = result.getActionMap();
             Iterator keys = actionMap.keySet().iterator();
             while (keys.hasNext()) {
                 String actName = (String) keys.next();

                 // Get the Action for that name.
                 ValidatorAction action = resources.getValidatorAction(actName);

                 // If the result is valid, print PASSED, otherwise print FAILED
                 System.out.println(
                     propertyName
                         + "["
                         + actName
                         + "] ("
                         + (result.isValid(actName) ? "PASSED" : "FAILED")
                         + ")");

                 //If the result failed, format the Action's message against the formatted field name
                 if (!result.isValid(actName)) {
                     success = false;
                     String message = apps.getString(action.getMsg());
                     Object[] args = { prettyFieldName };
                     System.out.println(
                         "     Error message will be: "
                             + MessageFormat.format(message, args));

                 }
             }
         }
         if (success) {
             System.out.println("FORM VALIDATION PASSED");
         } else {
             System.out.println("FORM VALIDATION FAILED");
         }

     }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:28:09.293

对于这个用例，我会使用**Bean Validation ( [JSR 303](http://jcp.org/en/jsr/detail?id=303) )的实现。**验证规则可以定义为 XML 文档。

Hibernate Validator 是参考实现，可以在这里下载：

*   [http://www.hibernate.org/subprojects/validator.html](http://www.hibernate.org/subprojects/validator.html)

JSR 303 的实现也将包含在每个 Java EE 6 实现中。

# c# - 在下拉菜单中填充数据

> ID：12921088
> 
> 赞同：1
> 
> 时间：2012-10-16T18:26:01.763
> 
> 标签：c#, asp.net, data-binding, drop-down-menu

我是 c# 的新手，所以有点卡在我认为是一个非常简单的模块上。我只需要在下拉菜单中显示数据，但在绑定时出现一些错误......或者我什至会在绑定之前说。这是我正在尝试做的事情。如果我犯了一个非常简单的错误，我真的很抱歉，但我已尽力而为，现在我想我需要一些指导。

**自定义服务.cs**

```
public partial class CustomService
{
public List<Code> GetDepartment(bool activeOnly)
    {
        List<Code> retVal = new List<Code>();
        ---some code----
        return retVal;
    }
     } 
```

**程序列表.ascx.cs**

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            List<Code> dept = new List<Code>CustomService.GetDepartment(true);
            ddlDepartment.DataSource = dept;
            ddlDepartment.DataBind();
         }
    } 
   //error an object reference is required for an nonstatic field, method or Property CustomService.GetDepartment(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:29:20.047

为了能够调用 GetDepartment 方法，您需要创建一个新的 CustomService 实例：

```
CustomService service = new CustomService();
service.GetDepartment(true); 
```

或使方法静态：

```
public static List<Code> GetDepartment(bool activeOnly) { } 
```

但是，如果将其设置为静态，则该方法使用的驻留在类中的每个变量也需要是静态的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:29:38.760

你忘了先创建对象，然后你可以调用该方法

另一件事是您只需要像我在下面所做的那样直接分配值，无需创建任何新列表

检查下面对您有用的代码

```
CustomService custsrv = new CustomService();
List<Code> dept = custsrv.GetDepartment(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:51:52.200

我认为这会有所帮助。

```
 CustomService custS = new CustomService();
    ddlDepartment.DataSource = custS.GetDepartment(true);
    ddlDepartment.DataBind(); 
```

# ajax - 如何在嵌套的复合组件中使用 Ajax？

> ID：12921090
> 
> 赞同：1
> 
> 时间：2012-10-16T18:26:05.023
> 
> 标签：ajax, jsf, jsf-2, composite-component

我在 ajaxify 嵌套复合组件时遇到了问题。我以下列方式使用它们。（我试图尽可能减少这个例子！）

基本复合组件**base.xhtml**

```
<composite:interface>
    <composite:clientBehavior name="update" event="click" targets="#{cc.clientId}:form:submit" default="true"/>
</composite:interface>

<composite:implementation>
    <h:form id="form">
        // ... some basic content
        <h:commandButton type="submit" id="submit" value="update"/>
    </h:form>   
</composite:implementation> 
```

重用第一个复合组件的复合组件**reuse.xhtml**

```
<composite:interface>
    <composite:clientBehavior name="update" event="update" targets="#{cc.clientId}:test" default="true"/>
</composite:interface>

<composite:implementation>
    <my:base id="test">
        <composite:insertChildren />
    </my:base>
</composite:implementation> 
```

使用这些组件

```
// Ajax works and method "void update(javax.faces.event.AjaxBehaviorEvent)" is exeuted
<my:base>
    <f:ajax event="update" listener="#{controller.update}" render=":some-components"/>
</my:base>

// Ajax doesn't work, so nothing is executed, page reloads according to form submit
<my:reuse>
    <f:ajax event="update" listener="#{controller.update}" render=":some-components" />
</my:reuse> 
```

我的问题主要出在内部，`reuse.xhtml`因为我不知道应该在`<composite:clientBehavior targets="???">`ajaxify 基本组件中的 commandButton 中使用哪个目标以及应该使用哪个事件。我还尝试通过`<composite:clientBehavior name="update" event="click" targets="#{cc.clientId}:test:form:submit" default="true"/>`在声明中定位基本组件中的 commandButton `reuse.xhtml`，但没有任何成功。

# c - 查找 EF 上下文的正确名称

> ID：12921095
> 
> 赞同：0
> 
> 时间：2012-10-16T18:26:55.770
> 
> 标签：c, entity-framework

我使用名为 EnterpriseDownloadRepository.edmx 的向导从数据库中添加了一个实体框架模型

尝试在同一项目中设置上下文时无法访问它。

var context = new FileDownloadEntites()

Visual Studio 2012 无法识别“FileDownloadEntites”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:37:51.567

在设计器窗口的属性中找到它。

右键单击设计器窗口的空白区域，选择属性，它在一个名为“实体容器名称”的属性中

# linux - 在 Linux 上“接受”fd 上的 setsockopt

> ID：12921097
> 
> 赞同：3
> 
> 时间：2012-10-16T18:27:05.900
> 
> 标签：linux, sockets, setsockopt

对于 SO_REUSEADDR 在 Linux 上的 setsockopt 行为，我有一个相当奇怪的观察。在一行中：如果我将 sockopt 应用于“侦听套接字”上的 accept 返回的 fd，则 socketoption 将反映在侦听套接字持有的端口上。

好的一些代码。

服务器：打开一个套接字，应用 SO_REUSEADDR 为真。接受一个连接，然后在接受返回的 fd 上的 fd 上应用 SO_REUSEADDR 为 false。

```
#include <stdio.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <arpa/inet.h>
#include <string.h>

int main(void)
{
        int s,  len;
        int sin_size;
        int reuse = 1;
        int ret;
        struct sockaddr_in my_addr;

        memset(&my_addr, 0, sizeof(my_addr));
        my_addr.sin_family = AF_INET;
        my_addr.sin_addr.s_addr = inet_addr("127.0.0.1");
        my_addr.sin_port = htons(33235);

        if( (s = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        {
               printf("Socket Error\n");
               return -1;
        }

        setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &reuse, sizeof(int));

        if( bind(s, (struct sockaddr*)&my_addr, sizeof(struct sockaddr))  < 0)
        {
               printf("Bind Error\n");
               return -1;
        }

        listen(s, 6);

        reuse = 0;
        memset(&my_addr, 0, sizeof(my_addr));
        while(1) {
           ret = accept(s, (struct sockaddr*)&my_addr, &len);
           if (ret<0) {
              printf("Accept failed\n");
           } else {
              printf("Accepted a client setting reuse add to 0\n");
              setsockopt(ret, SOL_SOCKET, SO_REUSEADDR, &reuse, sizeof(int));
           }
        }

        printf("Server exiting\n");

        return 0;
} 
```

客户端：客户端连接到服务器，之后不做任何事情，确保服务器套接字保持在 TIME_WAIT 状态。

```
#include <stdio.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <arpa/inet.h>
#include <string.h>
#include <errno.h>

int main(void)
{
        int s,  len;
        int sin_size;
        struct sockaddr_in my_addr;

        memset(&my_addr, 0, sizeof(my_addr));
        my_addr.sin_family = AF_INET;
        my_addr.sin_addr.s_addr = inet_addr("127.0.0.1");
        my_addr.sin_port = htons(33235);

        if( (s = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        {
               printf("Socket Error\n");
               return -1;
        }

        if (!connect(s,(struct sockaddr*)&my_addr, sizeof(struct sockaddr)))
        {
           printf("Client Connected successfully\n");
        }
        else
        {
           printf("%s\n",strerror(errno));
        }

        while(1) sleep(1);

        return 0;
} 
```

我所做的步骤重现了该问题。

1.  运行服务器。
2.  连接客户端。
3.  杀死并重新启动服务器。服务器因绑定失败而失败

我在mac os上测试了这个。并且绑定没有失败。我已经挖掘了所有 Posix 规范，但没有一个说这段代码是未定义的。

问题：

在这方面有更多*经验*的人可以分享他们对这个问题的理解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:10:16.457

考虑它的一种方法是 SO_REUSEADDR 确定您是否可以将另一个套接字绑定到同一地址。它是任何套接字（侦听或连接）的属性，但通常通过接受从侦听继承。在 linux 中，它映射到 struct sock "sk_reuse" 标志。

如果您在您“接受”的 FD 上清除此标志，则从该点开始，IP/端口对被视为忙且不可重用。侦听套接字上的 SO_REUSEADDR 标志不会更改，但已接受套接字上的标志会影响绑定逻辑。您可能可以使用 getsockopt 进行检查。

如果您想了解更多信息，可以尝试阅读 inet_csk_get_port 函数：[http](http://lxr.free-electrons.com/source/net/ipv4/inet_connection_sock.c#L100) ://lxr.free-electrons.com/source/net/ipv4/inet_connection_sock.c#L100 。这是实际“绑定”发生的地方。

# jquery - Jquery使用来自JSON调用的数据添加标题属性

> ID：12921099
> 
> 赞同：1
> 
> 时间：2012-10-16T18:27:07.317
> 
> 标签：jquery, json, attributes, each

我正在尝试使用从 JSON 调用中获得的值动态地将标题添加到许多图像中。

这是我到目前为止所拥有的

```
$(".watch_view img").each(function() {
$.ajax({
    url: 'http://gdata.youtube.com/feeds/api/videos/T2aMBeeM4yw?v=2&alt=jsonc',
    dataType: 'json',
    success: function(json) {   
    song_title = json.data.title;// song title is retrieved without issue                           
    }   
    });

   alert(song_title); //this to be removed
   //the title attr below is only added when the above alert is in place    
   $(this).attr('title', song_title);
   $(this).attr('alt', "This works everytime"); 
   }); 
```

现在上述方法有效，但只有当我通过添加不需要的警报“停止”该过程时 - 我只能猜测代码在从 JSON 调用（？）检索数据之前正在执行，并且警报使其能够赶上.

我想我需要另一个在 JSON 调用之后执行的函数，或者让代码进入“成功”函数，但如果是这种情况，我不确定如何保持“this”元素。

非常感谢帮助和建议。

谢谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:29:34.410

请记住，AJAX 代表异步 JavaScript。这意味着在与服务器进行通信时，浏览器不会无响应。

当您调用`$.ajax(...)`函数时，脚本会在它之后继续，而不是等待响应（您可以将其配置为等待，但这将是一个**同步**调用）。

当服务器成功返回时，您应该响应该事件，因此，您的响应处理代码必须在`success`函数体中：

```
$(".watch_view img").each(function (index,element) {
    $.ajax({
        url: 'http://gdata.youtube.com/feeds/api/videos/T2aMBeeM4yw?v=2&alt=jsonc',
        dataType: 'json',
        success: function (json) {
            song_title = json.data.title; // song title is retrieved without issue                           
            $(element).attr('title', song_title);
            $(element).attr('alt', "This works everytime");
        }
    });

}); 
```

在您的旧代码中，警报在服务器返回之前到达。当您放置断点时，它起作用了，因为在您进行人工处理时，服务器有足够的时间返回答案:)

**更新**

此外，您应该知道，回调`this`内部`success`指的是返回的数据，覆盖了预期`this`的`each`（这将是迭代的元素）。您必须实际声明`each`调用的参数，以便您可以在成功调用中引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:30:39.923

```
$(".watch_view img").each(function() {
$.ajax({
    url: 'http://gdata.youtube.com/feeds/api/videos/T2aMBeeM4yw?v=2&alt=jsonc',
    dataType: 'json',
    success: function(json) {   
        song_title = json.data.title;// song title is retrieved without issue 

       $(this).attr('title', song_title);
       $(this).attr('alt', "This works everytime");                           
    }   
    });
}); 
```

您需要正确使用成功回调。希望有帮助。

回调用于异步 javascript，否则你会得到竞争条件（你所看到的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:34:47.177

ajax 调用是异步的，这意味着当您设置标题时，服务器仍在处理您的请求。当您发出不需要的警报时，您会停止客户端一段时间，然后服务器会响应请求，这就是它起作用的原因。

如果你把代码放到success里，如上所述，它会按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:46:26.037

你可以试试这个

```
var _song_title = ''
$(".watch_view img").each(function() {    
$.ajax({
    url: 'http://gdata.youtube.com/feeds/api/videos/T2aMBeeM4yw?v=2&alt=jsonc',
    dataType: 'json',
    success: function(json) {   
    _song_title = json.data.title;// song title is retrieved without issue                           
    }   
    }).done(function(){
        alert(_song_title); //this to be removed
   //the title attr below is only added when the above alert is in place    
   $(this).attr('title', _song_title);
   $(this).attr('alt', "This works everytime");
    }); 
```

# algorithm - 几个传感器 - 需要噪声过滤算法

> ID：12921101
> 
> 赞同：0
> 
> 时间：2012-10-16T18:27:09.020
> 
> 标签：algorithm, filtering, noise

我的软件从多个传感器接收信息。传感器的数量不是固定的 - 它们可以添加和移除，每个传感器都有自己的唯一标识符。传感器不定期地发送数据——它们可以保持沉默数周或每秒推送数据。每个传感器从一组固定的值中生成一个值——因此传感器是离散的。我的程序将来自每个传感器的每条消息记录到 SQL 数据库表（sensorId、时间、值）中。

任务是过滤信息。我只需要从此日志中选择一条记录，我认为它是实际信息。例如，如果我从单个传感器获得最新记录，它说值为 A，但在此之前有 10 个不同的传感器告诉我值为 B，那么我仍然会认为 B 是实际信息。同时，问题不仅仅是通常的噪声过滤，因为如果有一个传感器在一个月内每秒告诉我值为 C，然后最近有五个传感器告诉我实际上值为 D，我将立即尽管历史悠久，但将 D 视为实际数据 - 我想说独立来源的数量也必须具有权重。

所以，我想我得到了一个由两个变量组成的函数——时间（老化）和瞬间独特传感器的数量。所以，我想，我必须以某种方式计算每条记录的权重，然后选择权重最大的一条。而且我认为要计算记录权重，我不仅应该使用当前记录中的信息，还应该使用之前所有记录中的信息。

我需要一些关于算法的帮助。也许实际上有一些我不知道的众所周知的解决方案？

# javascript - 将事件附加到输入和选择框

> ID：12921103
> 
> 赞同：0
> 
> 时间：2012-10-16T18:27:10.813
> 
> 标签：javascript, html, dom, javascript-events

我似乎不知道如何将事件（动态）附加到文本框和选择框：

错误：需要对象，第 19 行

```
<!DOCTYPE html>
<html>

    <head>
        <script type="text/javascript">
            window.onload = function fnOnLoad() {
                var t = document.getElementsByTagName('SELECT');

                var i;
                for (i = 0; i < t.length; i++) {
                    alert(t[i].id)

                    document.getElementById(t[i].id).attachEvent('onfocus', function () {
                        document.getElementById(this.id).style.backgroundColor = "#FFFF80"
                    })
                    document.getElementById(t[i].id).attachEvent('onblur', function () {
                        document.getElementById(this.id).style.backgroundColor = "#FFFFFF"
                    })

                }
            }
        </script>
    </head>

    <body>
        <input id="t1" type="text">
        <input id="t2" type="text">
        <input id="t3" type="text">
        <br>
        <br>
        <select id="d1"></select>
        <select id="d2"></select>
        <select id="d3"></select>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:41:00.367

为什么不使用 jquery 并使用绑定功能：例如：

```
var element = $('#myElementId') // equivalent to document.getElementById
element.bind('click', function() {
    // when the element is clicked, it will do what ever you write here
    alert('i was clicked');
}); 
```

您可以使用 jquery 将此代码放在 onload 或 onready 函数中，如下所示：

```
$(function() {
    var element = $('#myElementId') // equivalent to document.getElementById
    element.bind('click', function() {
        // when the element is clicked, it will do what ever you write here
        alert('i was clicked');
    }); 
}); // this is the onload 
```

或者

```
$(document).ready(function() {
    var element = $('#myElementId') // equivalent to document.getElementById
    element.bind('click', function() {
        // when the element is clicked, it will do what ever you write here
        alert('i was clicked');
    }); 
}); // this is the on ready 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T18:44:47.970

```
<script type="text/javascript">

function fnOnLoad() {

    var t = document.getElementsByTagName('INPUT');
    for (var i = 0; i < t.length; i++) {
            t[i].onfocus = function() { this.style.backgroundColor = '#FFFFC4';};
            t[i].onblur = function() { this.style.backgroundColor = '#FFFFFF'; };
    }

    var d = document.getElementsByTagName('SELECT');
    for (var i = 0; i < d.length; i++) {
            d[i].onfocus = function() { this.style.backgroundColor = '#FFFFC4'; };
            d[i].onblur = function() { this.style.backgroundColor = '#FFFFFF'; };
    }

}
</script> 
```

# css - div 在另一个 div 顶部有边距底部，边距顶部只有 1 个边距

> ID：12921105
> 
> 赞同：5
> 
> 时间：2012-10-16T18:27:22.107
> 
> 标签：css, margin

我有一个 div 在另一个之上。顶部 div 有`margin-bottom: 10px`，底部 div 有`margin-top: 10px`，但两个 div 之间只有 10px 的空间。

现场示例：http: [//jsbin.com/efugok/1/edit](http://jsbin.com/efugok/1/edit)

带有 Css 的 HTML：

```
<div style="margin-bottom:10px; background: #e6e6e6;" id="one">one</div>
<div style="margin-top:10px; background: #ccc" id="two">two</div> 
```

渲染：

![在此处输入图像描述](../Images/0b5c13b22c1249b5247988e277c8261a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:29:27.247

这称为保证金崩溃。这是符合规范的行为。**[阅读更多关于它的信息。](http://reference.sitepoint.com/css/collapsingmargins)**

基本上，当 2 个垂直边距重叠时，只考虑最大的一个。给任何元素一个边距`20px`来修复它。

# python - GAE：从源代码关闭实例

> ID：12921120
> 
> 赞同：0
> 
> 时间：2012-10-16T18:28:08.030
> 
> 标签：python, google-app-engine

在 Google App Engine 的用户界面中，在“实例”中，我可以通过按下“关闭”按钮关闭选定的实例。我可以从源代码中通过程序关闭吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:38:14.700

如果可以禁用整个应用程序（从应用程序设置页面）一段时间然后重新启用它（或者您可以从那时起将其删除）。

您无法“关闭”特定实例。您可以拥有不同版本的应用程序，但在任何时候，您只能拥有一个实例作为应用程序的活动版本。但是，您可以在不同版本之间拆分流量，但这不会更改活动版本。

在性能方面，您可以将 Max Idle Instances 值更改为 1，以便只有一个实例被预加载或处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:24:50.217

实际上，您可以在代码中强制实例关闭，但这并不漂亮。只需分配比您的实例更多的内存，它将为您关闭。

我在一些 python2.5 M/S 应用程序中使用了这种技术，在这些应用程序中，启动期间的 DeadlineExceeded 可能会导致导入不完整的问题。如果下一个处理的请求在某个地方给我一个 ImportError，我知道该实例是 toast，所以我会将用户重定向到该站点，然后创建一个非常大的字符串耗尽内存，然后该实例将被关闭。

理论上你可以做类似的事情。

# tsql - T-SQL 案例 (SQL Server 2000)

> ID：12921123
> 
> 赞同：-1
> 
> 时间：2012-10-16T18:28:17.863
> 
> 标签：tsql, sql-server-2000, union

我有一个 T-SQL 查询，我需要计算`CASE`语句的计数。

我试图添加一个 UNION 但我收到一个错误：

> *包含 UNION 运算符的 SQL 语句中的所有查询在其目标列表中必须具有相同数量的表达式。*

有任何想法吗？谢谢。

询问：

```
SELECT 
   CustomerID, Name, DueDate, 
   CASE WHEN DATEDIFF(Month, PaymentDate, DueDate) >= 1 
            THEN PaymentAmount ELSE 0 
   END AS [Early],
   CASE WHEN DATEDIFF(Month, PaymentDate, DueDate) >=0 
            THEN PaymentAmount ELSE 0 
   END AS [On Time],
   CASE WHEN DATEDIFF(Month, PaymentDate, DueDate) = -1 
            THEN PaymentAmount ELSE 0 
   END AS [Late]
FROM 
    Customers 
WHERE 
    DATEDIFF(MONTH, PaymentDate,DueDate), GetDate()) = 1
    AND PaymentAmount= DuesAmount

UNION

SELECT 
    '-Total', '', CustomerID, Name, DueDate,
    SUM(CASE WHEN DATEDIFF(Month, PaymentDate, DueDate) >= 1 
               THEN PaymentAmount ELSE 0 END) AS [Early],
    SUM(CASE WHEN DATEDIFF(Month, PaymentDate, DueDate) >= 0 
               THEN PaymentAmount ELSE 0 END) AS [On Time],
    SUM(CASE WHEN DATEDIFF(Month, PaymentDate, DueDate) = -1 
               THEN PaymentAmount ELSE 0 END) AS [Late]
FROM 
    Customers
WHERE 
    DATEDIFF(MONTH, PaymentDate,DueDate), GetDate()) = 1
    AND PaymentAmount = DuesAmount 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:38:15.780

错误说：“包含`UNION`运算符的 SQL 语句中的所有查询必须在其目标列表中具有相同数量的表达式。” 这意味着每个`SELECT`必须返回相同数量的表达式。

在您给我们的代码示例中，第一个`SELECT`语句返回 6 个表达式，而第二个语句返回 8 个：

```
SELECT CustomerID,                -- 1
       Name,                      -- 2
       DueDate,                   -- 3
       CASE ... END AS [Early],   -- 4
       CASE ... END AS [On Time], -- 5
       CASE ... END AS [Late]     -- 6
...
UNION
SELECT '-Total',                       -- 1
       '',                             -- 2
       CustomerID,                     -- 3
       Name,                           -- 4
       DueDate,                        -- 5
       SUM(CASE ... END) AS [Early],   -- 6
       SUM(CASE ... END) AS [On Time], -- 7
       SUM(CASE ... END) AS [Late]     -- 8
... 
```

看看第一个如何`SELECT`返回 6 个表达式，而第二个返回 8？在 a`UNION`中，所有`SELECT`语句必须返回相同数量的表达式。

如有必要，您可以`NULL`在第一个查询中返回第二个不匹配的列。例如：

```
SELECT NULL as [RowType],         -- 1
       NULL as [Padding],         -- 2
       CustomerID,                -- 3
       Name,                      -- 4
       DueDate,                   -- 5
       CASE ... END AS [Early],   -- 6
       CASE ... END AS [On Time], -- 7
       CASE ... END AS [Late]     -- 8
...
UNION
SELECT '-Total',                       -- 1
       '',                             -- 2
       CustomerID,                     -- 3
       Name,                           -- 4
       DueDate,                        -- 5
       SUM(CASE ... END) AS [Early],   -- 6
       SUM(CASE ... END) AS [On Time], -- 7
       SUM(CASE ... END) AS [Late]     -- 8
... 
```

另外，请注意在 DueDate 列之后没有逗号。

# linux - 另一个远程的 Git 合并分支

> ID：12921125
> 
> 赞同：39
> 
> 时间：2012-10-16T18:28:28.440
> 
> 标签：linux, git, command-line

现在，我看到很多来自 Linus Torvalds 和/或 Gitster 的提交，看起来像这样：

```
Merge branch 'maint' of git://github.com/git-l10n/git-po into maint …
* 'maint' of git://github.com/git-l10n/git-po:
  l10n: de.po: fix a few minor typos 
```

或者：

```
Merge branch 'upstream' of git://git.linux-mips.org/pub/scm/ralf/upst… …
…ream-linus

Pull MIPS update from Ralf Baechle:
...
* 'upstream' of git://git.linux-mips.org/pub/scm/ralf/upstream-linus: (22 commits)
  MIPS: SNI: Switch RM400 serial to SCCNXP driver
... 
```

我不知道如何做到这一点，尽管我知道用于合并分叉（或“拉取请求”）的**git remote**和**git checkout**和**git merge**，但它不会生成这样的消息，为什么？以及如何做到这一点（请提供示例）？

PS：我是 Linus Torvalds 提交等的粉丝，比如他的合并描述的详细程度；P

PS：这就是我过去合并东西的方式：

```
git remote add anotherremoot
git checkout -b anotherbranch
git pull remoteshortcut
...do tests...
git checkout master
git merge anotherbranch
git push 
```

我从上面学到的例子：http: [//viget.com/extend/i-have-a-pull-request-on-github-now-what](http://viget.com/extend/i-have-a-pull-request-on-github-now-what)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-16T19:12:42.467

只需使用[`git pull`](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)将远程分支拉入`master`：

```
git remote add something git://host.example.com/path/to/repo.git
git checkout master
git pull something master 
```

或者在不添加遥控器的情况下执行此操作：

```
git pull git://host.example.com/path/to/repo.git 
```

`git pull`获取远程分支，并将其合并到本地分支。如果可能，它会进行快进合并，这仅意味着它将当前 master 更新为最新的提交，而不生成合并提交。但是如果双方都有变化，它会进行合并，就像你看到的 Linus 和 Junio 所做的那样，包括远程 URL。

如果您想保证获得合并提交，即使它可以快进，请执行`git pull -no-ff`. 如果您想确保`pull`永远不会创建合并提交（如果双方都有更改则失败），请执行`git pull --ff-only`.

如果您想包含更详细的消息，例如 Linus 提供的完整日志，请执行`git pull --log`. 如果要编辑消息，而不是仅使用自动创建的消息，请使用`git pull --edit`. 有关更多选项，请参阅[文档。`git pull`](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)

# list - 从 Haskell 的列表中获取第一权利

> ID：12921128
> 
> 赞同：3
> 
> 时间：2012-10-16T18:28:28.967
> 
> 标签：list, haskell, either

首先，我有一个（无限的）`Either`s 列表，它的生成方式如下：

```
x :: A
...

f :: A -> Either B A
...

xs :: [Either B A]
xs = iterate (>>=f) (Right x) 
```

该列表将包含几个`Right`s （总是一个有限的数字），然后`Left`重复相同的值。我需要的是把所有的`Right`s 和一个`Left`在他们之后。在这种特殊情况下，例如也可以通过更改函数来完成，但我也对最佳通用方法感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T20:22:48.290

让我提出一个更具侵略性的改变。代替

```
x :: A
f :: A -> Either B A
xs :: [Either B A] 
```

考虑

```
x :: A
f :: A -> Writer [A] B 
```

并完全忘记`xs`。以前`f`是单步迭代，现在是递归的；以前它会回来的地方`Right a`，你现在`tell [a] >> f a`；以前它会回来的地方`Left b`，你现在`return b`。

如果确实有必要，您仍然可以访问 的各个部分`Writer`，即`[A]`and `B`，通过`execWriter`and `evalWriter`（或使用`runWriter`同时访问它们）：

```
xs :: [A]
b :: B
(xs, b) = runWriter (f x) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T18:39:38.183

您可以使用在元素和元素[`span`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3aspan)之间拆分列表，然后进行模式匹配以获取第一个.`Right``Left``Left`

```
(rights, firstLeft : _) = span isRight xs
    where isRight (Right _) = True
          isRight _         = False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:30:33.950

如果您需要将它们全部保存在同一个列表中，我会这样做：

```
answer = map fst . takeWhile snd $ zip xs (True : map isRight xs)
  where isRight (Right _) = True
        isRight _         = False 
```

（为什么不在Data.Either中定义`isRight`和定义？）`isLeft`

# javascript - 通过javascript将simple_form_for对象从一个部分传递到另一个部分

> ID：12921131
> 
> 赞同：2
> 
> 时间：2012-10-16T18:28:48.527
> 
> 标签：javascript, ruby-on-rails, ajax

我有一个表格的部分。它也有一个空的 div。单击第一个部分上的按钮时，我需要使用 ajax 将另一个部分附加到此 div 中。第二部分有一些表单元素要添加到第一个表单中使用的相同表单对象。我试过它通过javascript传递它，但它没有用。

以下是我的第一个部分（HAML），

```
= link_to "Emp", {:action => 'edit', :id => @emp.id, :object => @emp, :f => f}, :remote => true

.div1 
```

我的 javascript 是

```
$(function(){$('.div1').append("<%= escape_javascript(render :partial => 'partial2', :locals => {:id => @emp.id, :f => f, :object => f.object})%>");}); 
```

# jpa - 在字段上设置 where 子句

> ID：12921136
> 
> 赞同：1
> 
> 时间：2012-10-16T18:29:12.897
> 
> 标签：jpa, annotations, where-clause

我有一个基础实体，它包含一个名为 State 的枚举字段。

```
public enum State {

    DELETED(0),
    ACTIVE(1)
    ;

    private int value;

    private State(int value) {
        this.value = value;
    }

    public int getValue() {
        return this.value;
    }

} 
```

是否有 JPA 注释方式来设置生成查询的 where 子句以仅检索状态字段为“ACTIVE”的实体？
原因是，如果我有一个包含实体“B”列表的实体“A”，当我从数据库中检索“A”的实例并初始化它时，我希望“B”的列表只包含提交国家为“活动”的实体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:08:36.070

JPA 中没有过滤器或 where 注释，也无法使用注释过滤集合实体。

我建议您检索 A 实体并仅获取活动的 B 实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:13:44.143

在 JPA 中没有标准的方法来做到这一点。

一种方法可能是创建一个过滤表并映射到视图而不是表的视图。

如果您使用的是 EclipseLink，则可以使用 @AdditionalCriteria

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_additionalcriteria.htm#additionalcriteria](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_additionalcriteria.htm#additionalcriteria)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T00:31:57.843

我建议您使用数据库视图执行此操作。访问包含所有实体（包括软删除实体）的基础表并访问未删除实体的视图

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T18:36:11.777

`@Filter`用作_

```
 @Filter(name, condition) 
```

或`@Where`作为

```
 @where(state = STATE.ACTIVE.getValue()) 
```

# linux - Jenkins & Grails：初始化虚拟机时出错

> ID：12921140
> 
> 赞同：1
> 
> 时间：2012-10-16T18:29:23.803
> 
> 标签：linux, grails, jvm, jenkins

我想在 Jenkins 中使用 Grails 插件。但是每次构建都会失败并显示以下消息：

```
[workspace] $ /usr/local/grails-2.1.1/bin/grails clean --non-interactive
Error occurred during initialization of VM
Incompatible minimum and maximum heap sizes specified
Build step 'Build With Grails' marked build as failure 
```

当我从控制台运行命令时，它会在没有此 Java 错误的情况下执行。我尝试在 GRAILS_OPTS 中设置内存使用情况，但它仍然无法正常工作。我有点卡在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:21:37.990

我不得不手动修改脚本`/usr/share/grails/2.1.1/bin/startGrails`来解决这个问题，因为该参数是由 Jenkins 在 JAVA_OPTS 中传入并在 GRAILS_OPTS 中设置的。

首先，我从 GRAILS_OPTS 中删除了参数：

```
GRAILS_OPTS="-server -Xmx768M -Xms768M -XX:PermSize=256m -XX:MaxPermSize=256m -Dfile.encoding=UTF-8" 
```

离开

```
GRAILS_OPTS="-server -XX:PermSize=256m -XX:MaxPermSize=256m -Dfile.encoding=UTF-8" 
```

然后我添加[了一个符合 POSIX 的`contains`函数](https://stackoverflow.com/a/8811800/16487)：

```
#POSIX compliant contains implementation
#Usage string substring
contains() {
    test "${1#*$2}" != "$1"
} 
```

然后我添加了逻辑来重新添加大小，如果它们不存在（b / c我也使用命令行中的grails）[这些`echo`语句当然仅用于调试]。请注意，这是对已交付文件的更改，如果您升级 Grails，可能必须重新制作。

```
 JAVA_OPTS="$GRAILS_OPTS $JAVA_OPTS $AGENT"
  echo "JAVA_OPTS: $JAVA_OPTS"
  if ! contains "$JAVA_OPTS" -Xms  && ! contains "$JAVA_OPTS" -Xmx
    then
        echo "Setting -Xms"
        JAVA_OPTS="-Xms768M $JAVA_OPTS"
  fi
  if ! contains "$JAVA_OPTS" -Xmx
    then
        echo "Setting -Xmx"
        JAVA_OPTS="-Xmx768M $JAVA_OPTS"
  fi
  echo "JAVA_OPTS: $JAVA_OPTS" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T03:51:47.367

`cd /opt/grails/bin`

查找显示以下内容的行：

```
GRAILS_OPTS="-server -Xmx718M -Xms718M -XX:PermSize=256m -XX:MaxPermSize=256m -Dfile.encoding=UTF-8" 
```

...并将其更改为：

```
GRAILS_OPTS="-server -Xmx512m -Xms512m -XX:PermSize=256m -XX:MaxPermSize=256m -Dfile.encoding=UTF-8" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T15:08:51.393

您正在使用哪些堆大小选项？这听起来像是您使用了错误的单位或将它们关闭。如果我这样做，我会收到相同的错误消息：

```
$ JAVA_OPTS=-Xmx2048 grails run-app
Error occurred during initialization of VM
Incompatible minimum and maximum heap sizes specified 
```

使用`-Xmx2048M`按预期工作。

# perl - 如何从 Perl 中的数组中删除重复值？

> ID：12921151
> 
> 赞同：2
> 
> 时间：2012-10-16T18:29:56.517
> 
> 标签：perl

哈希中的每个键都有多个值。在这里，我打印每个键的值

```
print "$var:",join ',',@{$hash{$var}},"\n"; 
```

上述打印语句的输出为：

```
ABC:1,2,3,1,4,2,
DEF:9,3,4,5,3,5, 
```

现在，我想删除值中的重复项。所需的输出是，

```
ABC:1,2,3,4
DEF:9,3,4,5 
```

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:38:20.250

使用[**`List::MoreUtils::uniq`**](http://search.cpan.org/perldoc?List%3a%3aMoreUtils#uniq)：

```
@$_ = uniq @$_ foreach values %hash; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T19:12:26.197

就个人而言，我喜欢[List::MoreUtils](http://search.cpan.org/perldoc?List%3a%3aMoreUtils)的 uniq 处理这个问题的方式。子程序非常简单，可以按原样使用，也可以通过模块使用。

```
my %seen;
my @dedupe = grep { not $seen{$_}++ } @{$hash{$var}}; 
```

模块中的子例程如下所示：

```
sub uniq (@) {
    my %seen = ();
    grep { not $seen{$_}++ } @_;
} 
```

此代码保留列表的初始顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T18:35:09.523

它在哈希中是无关紧要的。您想要做的是对数组中的值进行重复数据删除。

查看`uniq()`List::MoreUtils 模块中的函数[http://search.cpan.org/dist/List-MoreUtils/](http://search.cpan.org/dist/List-MoreUtils/)

你也可以像这样自己做：

```
my %h = map {($_,1)} @array_with_dupes;
my @deduped_array = keys %h; 
```

这在[Perl 常见问题解答](http://perldoc.perl.org/perlfaq4.html#How-can-I-remove-duplicate-elements-from-a-list-or-array?)中的“数据：数组”下都有广泛的介绍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T18:40:17.103

如果您尝试从数组中删除重复值，您可以使用它

```
#!/usr/bin/perl -w
use strict;
my @array = ('a','b','c','c','e');
my %hash = map { $_ => 1 } @array;
my @out = keys %hash;
printf("%s",join(',',@out)); 
```

# opencart - OpenCart 搜索功能无法正常工作

> ID：12921153
> 
> 赞同：0
> 
> 时间：2012-10-16T18:30:10.680
> 
> 标签：opencart

我在 OpenCart 1.5.4 中的搜索功能有一些问题。今天，我添加了一个带有元标签、关键字、属性等的产品。我填写的所有内容都可以搜索到。因此，如果我有一个名为“A”的产品，关键字为“B”，我可以搜索 B 并获得产品 A 作为搜索结果。

但是，我刚刚添加了一个带有自己的元标记、关键字、属性等的新产品，但现在搜索不再正常工作了。我只能搜索产品名称，如果我搜索关键字或标签，则不会显示任何内容，并且我得到的结果是找不到产品。

我已经删除了这两个产品，所以现在没有产品。我添加了一个新产品，但我仍然只能搜索它的名称。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:24:58.957

opencart 上的默认搜索模式非常严格，它们要求您使用相同的大小写。因此，如果您搜索带有“Gold”标签的产品，搜索脚本会将标签上的所有搜索的大小写切换为小写。我同意这很烦人，我正在尝试自己建立一个解决方法来忽略此案。

问题源于执行搜索的模型在 MATCH MySQL 命令期间使用了 LCASE，这意味着它不会找到任何大小写混合标记等。

希望有帮助

# sql-server-2008 - SQL sServer 和 Crystal Reports 如何将 case...then 0 链接在一起？

> ID：12921156
> 
> 赞同：0
> 
> 时间：2012-10-16T18:30:17.240
> 
> 标签：sql-server-2008, crystal-reports, case

我是 CR 和 SQL Server 的新手。我试图了解如何使用“case some-condition then 0”和“case some-other-condition then 1”来编写 select case 语句，并将其连接到 Crystal 报表中......如果我想要一个特定的要显示的数据年份，我如何在 SQL Server 编码中使用这种特殊风格的 case 语句，以及如何让它连接到 CR 中的变量名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:39:18.287

您的问题在细节上有点简单，但希望这会有所帮助。在 sqlserver 中，case 语句的工作方式是这样的。[您可以通过在线书籍](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)获得更多详细信息。您没有指定哪个版本的 SQL Server，所以我链接到 2008 R2。

```
SELECT
      SomeColumn,
      SomeOtherColumn,
(CASE MyColumn
    WHEN 'First' THEN 1
    WHEN 'Second' THEN 2
    WHEN 'Third' THEN 3
    ELSE 4
END) AS MyNewColumn /* the name can be same as original column if you want */
FROM MyTable 
```

至于将值映射到 Crystal，在比较参数等方面，您可以像对待任何其他列名一样对待 MyNewColumn。

# html - 使用@font-face

> ID：12921157
> 
> 赞同：0
> 
> 时间：2012-10-16T18:30:18.697
> 
> 标签：html, css, font-face

我尝试使用@font-face 使用自定义字体，出于某种原因，它在某些地方而不是在其他地方工作。

**CSS** 这很好用

```
#hero-header .title {
    color: #fff;
    padding-top: 225px;
    font-size: 30px;
    font-family: 'Populaire';
    text-align: center;
    font-size: 64px;
    } 
```

这不

```
ul#reviews h2 {
    font-size: 30px;
    font-family: 'Populaire';
    } 
```

请注意使用自定义字体的英雄区域，但无法在页面下方使用它，即：评论标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:36:34.977

你的 CSS 是：

```
@font-face {
    font-family: 'Populaire';
    src: url('font/Populaire.otf');
} 
```

但是，字体实际上是在`/beta/styles/css/fonts/Populaire.otf`，请将您的 CSS 更新为：

```
@font-face {
    font-family: 'Populaire';
    src: url('/beta/styles/css/fonts/Populaire.otf');
} 
```

# javascript - jQuery随机化图片

> ID：12921159
> 
> 赞同：0
> 
> 时间：2012-10-16T18:30:24.847
> 
> 标签：javascript, jquery, html, gallery

我正在使用 jQuery 制作照片库，我想要一个按钮来显示从相册中的照片中随机拍摄的照片。每次用户单击按钮时，此图片都应更改。我有这段代码，但每次按下按钮时，我都会让 div#images 充满图像，而不是每次都填满图像。

```
<script>
        $('button').on('click', function() {
            $.getJSON('images.json', function(data) {
                imageList = data;               
            });
            $('#images').append('<img src=' + imageList[Math.floor(Math.random() * imageList.length) + 1].img_src + '>').;  
        });
</script> 
```

如您所见，我从 JSON 文件中读取图像并从 1 随机化到文件的长度。任何的意见都将会有帮助。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:32:40.993

您需要在添加新图像之前清除图像 div，否则图像将继续添加。

```
 <script>
            $('button').on('click', function() {
                $.getJSON('images.json', function(data) {
                    imageList = data;  
                    //Also, move the code inside getJson(). getJson is asynchronous.
                    //Clear the images HTML
                    $('#images').empty();
                    $('#images').append('<img src=' + imageList[Math.floor(Math.random() * imageList.length) + 1].img_src + '>').;               
                });
            });
    </script> 
```

只是想知道：为什么不通过 json 调用检索 1 个随机图像，而不是获取所有图像然后选择一个（在服务器上编写随机化代码）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:40:33.837

JSON 数据是否改变？否则，为什么每次都请求？没有必要将下面的`rand`和`image`var 分开，但以后可能很容易被其他人阅读。

```
$('button').on('click', function() {
    if ( typeof imageList == 'undefined' || !imageList.length )
    {
        $.getJSON('images.json', function(data) {
            imageList = data;
            var rand = Math.floor(Math.random() * imageList.length) + 1;
            var image = $('<img />').attr('src', imageList[ rand ].img_src );
            $('#images').html( image );
        });  
    }
    else
    {
       var rand = Math.floor(Math.random() * imageList.length) + 1;
       var image = $('<img />').attr('src', imageList[ rand ].img_src );
       $('#images').html( image );
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:34:29.127

确保关闭图像标签并清除现有图像

```
<script>
    $('button').on('click', function() {
        $.getJSON('images.json', function(data) {
            imageList = data;               
        });
        $('#images').html("");
        $('#images').append('<img src=' + imageList[Math.floor(Math.random() * imageList.length) + 1].img_src + '/>');  
    });
</script> 
```

# javascript - 如何在 JavaScript 中区分 iPhone、iPad 和 iPod？

> ID：12921171
> 
> 赞同：0
> 
> 时间：2012-10-16T18:30:58.533
> 
> 标签：javascript, iphone, ipad, user-agent, ipod

我可以检查用户是否正在使用移动设备，并且我可以检查用户是否正在使用移动 safari。但是我如何才能检查用户正在使用哪种特定类型的移动 iDevice？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:30:58.533

```
var matchiDevice = new RegExp("i[p|P](hone|ad|od)");
var iDeviceTest = matchiDevice.exec(navigator.userAgent);

if (iDeviceTest != null) {
    var iDevice = iDeviceTest[0];
    alert("You are using a " + iDevice + "!");
}
else 
{
    alert("You are not using an iDevice!");
} 
```

这将告诉您它是否是 iDevice，以及是哪一个。

# magento - Magento 图像缓存 URL - 错误的缓存键

> ID：12921175
> 
> 赞同：1
> 
> 时间：2012-10-16T18:31:05.820
> 
> 标签：magento, caching, image-caching

出于某种原因，我的 Magento 试图在前端返回缓存键 040ec09b1e35df139433887a97daa66f，但它应该在寻找 9df78eab33525d08d6e5fb8d27136e95。

我不知道这里出了什么问题。我完全清空了缓存并重新索引。当我访问页面时，它正在创建新的图像缓存。它还使用一个额外的“大小”目录创建它们。

错误的前端：[http :](http://mysite.com/catalog/product/cache/1/image/) **//mysite.com/catalog/product/cache/1/image/040ec09b1e35df139433887a97daa66f** /d/i/dio156c.jpg

正确：[http :](http://mysite.com/catalog/product/cache/1/image/) **//mysite.com/catalog/product/cache/1/image/265x265/9df78eab33525d08d6e5fb8d27136e95** /d/idio156c.jpg

我能做些什么来强制它使用正确的网址吗？

# c# - SQL Server 2012 中的 CREATE PROCEDURE 错误

> ID：12921179
> 
> 赞同：0
> 
> 时间：2012-10-16T18:31:12.710
> 
> 标签：c#, asp.net, stored-procedures, sql-server-2012

我正在尝试在 ASP.net 中创建登录和注册表单，但我遇到了百万分之一的页面，看起来它可以帮助我。问题是当我按照这些步骤进行操作时，我似乎遇到了错误，有人可以告诉我我做错了什么，或者编写这些步骤的人是否错了？

我正在遵循的步骤：

[http://www.c-sharpcorner.com/uploadfile/rohatash/simple-user-login-in-Asp-Net-using-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/rohatash/simple-user-login-in-Asp-Net-using-C-Sharp/)

我做了什么：

我打开 SQL Server Management Studio，创建了一个名为 的数据库`VC_temps`，右键单击，选择新查询并输入以下代码

```
CREATE TABLE Student
(
StudCode        varchar(10),
FirstName       varchar(30),
LastNmae        varchar(30),
Telephone       char(10),
Course          varchar(30),
Pword           varchar(20),
Availability    varchar(50),
JobSkill        varchar(50),
Experience      varchar(50)
)

CREATE PROCEDURE [dbo].[VC-Temps]
(
@StudCode       varchar(10),
@FirstName      varchar(30),
@LastNmae       varchar(30),
@Telephone      char(10),
@Course         varchar(30),
@Pword          varchar(20),
@Availability   varchar(50),
@JobSkill       varchar(50),
@Experience     varchar(50)
)
AS
INSERT INTO Student VALUES (@StudCode, @FirstName, @LastNmae, @Telephone, @Course, @Pword,     @Availability, @JobSkill, @Experience) 
```

我收到的错误似乎是

```
CREATE PROCEDURE [dbo].[VC-Temps] 
```

错误是：

> *消息 111，级别 15，状态 1，过程 VC-Temps，第 27 行
> “CREATE/ALTER PROCEDURE”必须是查询批处理中的第一个语句。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:32:48.820

在`CREATE TABLE`and`CREATE PROCEDURE`块之间插入`GO`，以使 SQL Server 执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:33:08.627

```
CREATE TABLE Student
(
StudCode        varchar(10),
FirstName       varchar(30),
LastNmae        varchar(30),
Telephone       char(10),
Course          varchar(30),
Pword           varchar(20),
Availability    varchar(50),
JobSkill        varchar(50),
Experience      varchar(50)
)
GO

CREATE PROCEDURE [dbo].[VC-Temps]
(
@StudCode       varchar(10),
@FirstName      varchar(30),
@LastNmae       varchar(30),
@Telephone      char(10),
@Course         varchar(30),
@Pword          varchar(20),
@Availability   varchar(50),
@JobSkill       varchar(50),
@Experience     varchar(50)
)
AS
    INSERT INTO Student VALUES (@StudCode, @FirstName, @LastNmae, @Telephone, @Course,     @Pword,     @Availability, @JobSkill, @Experience) 
```

# c# - 使用 ffmpeg-sharp，将 wav 转换为 mp3

> ID：12921181
> 
> 赞同：2
> 
> 时间：2012-10-16T18:31:36.223
> 
> 标签：c#, mp3, wav, sharpffmpeg

使用[ffmpeg-sharp](http://code.google.com/p/ffmpeg-sharp/)项目，如何将 wav 转换为 mp3？
我觉得问起来很傻，但我找不到任何关于如何做到这一点的解释。

# c - malloc，函数中如何自由返回值

> ID：12921186
> 
> 赞同：2
> 
> 时间：2012-10-16T18:31:45.970
> 
> 标签：c, memory-leaks, malloc, return, free

我的应用程序在 stlinux (sh4) 中使用，不幸的是 valgrind 不支持 sh4 cpu。因为我看到我的应用程序存在内存泄漏，所以我使用了 mtrace，它确认某些内存不是空闲的。问题是，在返回中使用了 malloc 的变量，因此我不知道如何释放它（因为如果它是免费的，那么在函数中返回是没有意义的）？

我已经编写了 cs_malloc（将来自 oscam-simple.c 的波纹管代码放在上面的链接中），mtrace 日志说，这符合：

```
*tmp = malloc (size); 
```

内存不是免费的

```
 /* This function encapsulates malloc. It automatically adds an error message to the log if it failed and calls cs_exit(quiterror) if quiterror > -1\. 
       result will be automatically filled with the new memory position or NULL on failure. */
    void *cs_malloc(void *result, size_t size, int32_t quiterror){
        void **tmp = result;
        *tmp = malloc (size);
        if(*tmp == NULL){
            cs_log("Couldn't allocate memory (errno=%d %s)!", errno, strerror(errno));
            if(quiterror > -1) cs_exit(quiterror);
        } else {
            memset(*tmp, 0, size);  
        }
        return *tmp;
    } 
```

然后对于 malloc，我称之为：

```
 // create the AES key entry for the linked list
    if(!cs_malloc(&new_entry, sizeof(AES_ENTRY), -1)) return; 
```

请看一下这 3 个函数（其中 malloc 不是免费的，正如其他用户所说，valgrind 声称这些代码会导致内存泄漏[module-datastruct-llist.c](http://www.streamboard.tv/oscam/browser/trunk/module-datastruct-llist.c?rev=5375)

内存泄漏由 3 个不同的部分引起：

1.  在下面的代码中，“new”永远不会释放，但由于它使用该函数作为回报，我不知道如何释放它：

    ```
    LL_NODE* ll_append_nolock(LLIST *l, void *obj)
    {
    if (l && obj) {
        LL_NODE *new;
        if(!cs_malloc(&new,sizeof(LL_NODE), -1)) return NULL;
        new->obj = obj;

        if (l->last)
            l->last->nxt = new;
        else
            l->initial = new;
        l->last = new;    

        l->count++;
        return new;
        }  
        } 
    ```

2.  在下面的函数中也使用“l”，再次因为它在返回函数中使用，我不知道如何释放它。：

    ```
     LLIST *ll_create()
      {
       LLIST *l = cs_malloc(&l, sizeof(LLIST), 0);
       pthread_mutex_init(&l->lock, NULL);
       return l;
       } 
    ```

3.  与 new 相同的故事：

    ```
     LL_NODE *ll_prepend(LLIST *l, void *obj)
            {             
            if (l && obj) {

            LL_NODE *new;
            if(!cs_malloc(&new,sizeof(LL_NODE), -1)) return NULL;

            new->obj = obj;
            ll_lock(l);
            new->nxt = l->initial;

            l->initial = new;
            if (!l->last)
                l->last = l->initial;
            l->count++;
            ll_unlock(l);

            return new;
        }
           return NULL;
        } 
    ```

有关更多功能，您可以查看[module-datastruct-llist.c](http://www.streamboard.tv/oscam/browser/trunk/module-datastruct-llist.c?rev=5375)

非常感谢，如果有专家告诉我，我该如何解决内存泄漏（如果你觉得应该重写 cs_malloc ，或者需要添加新功能，请编写你想要的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:24:12.517

malloc 最常见的实现使用堆内存，它是全局的，因此在最终释放之前在多个函数之间传递在一个地方分配的存储是很常见的。

现在，例如对 ll_append_nolock 的调用，您忽略了 malloced 返回。IE

```
ll_append_nolock(it->l, obj); 
```

所以为了避免泄漏，你需要做你在其他地方所做的事情，即让调用函数将分配的内存接收到一个指针中：

```
LL_NODE *n = ll_append_nolock(l, obj);
/* do stuff with "n", which points to memory allocated under the name of "new" */
free(n); 
```

当你用完 n 时（如上所述，它指向以“新”名称分配的存储空间，即：相同的内存，不同的名称），你释放它。

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:23:00.787

@Anders感谢您的回复，我会考虑您的笔记，并会按照您的描述进行更改以查看内存泄漏的情况...

**怎么样，这行应该改成你写的新的cs_malloc函数：** 1。

```
 LLIST *l = cs_malloc(&l, sizeof(LLIST), 0);
    pthread_mutex_init(&l->lock, NULL);
    return l; 
```

2.

```
if(!cs_malloc(&para,sizeof(struct read_thread_param), -1)) return FALSE;
            para->id=i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:49:23.340

但是，在您的函数`cs_malloc`中，第一个参数是`result`您永远不会在函数中分配给它的`cs_malloc`。

以后你`cs_malloc`像这样使用

```
if(!cs_malloc(&new,sizeof(LL_NODE), -1)) return NULL;
    new->obj = obj; 
```

这将不起作用，因为“新”未初始化

如果分配失败，您应该分配给您`cs_malloc`的块或只返回块`cs_malloc`，如果您未能分配，则`NULL`改为返回。

例如

```
void *cs_malloc(size_t size, int32_t quiterror)
{
  void* tmp = calloc(1,size);
  if(tmp == NULL)
  {
    cs_log("Couldn't allocate memory (errno=%d %s)!", errno, strerror(errno));
    if(quiterror > -1) cs_exit(quiterror);
  } 
  return tmp;
} 
```

和

```
 if (new = cs_malloc(sizeof(LL_NODE),-1))
  {
    new->obj = obj;
  }
  else
  {
    return NULL;
  } 
```

# xml - 在 Windows 上安装 RCurl 和 XML 包时出错

> ID：12921187
> 
> 赞同：1
> 
> 时间：2012-10-16T18:31:46.777
> 
> 标签：xml, r, installation, rcurl

我正在尝试安装 RCurl 和 XML 包并在 Windows 上出现错误。我尝试过 R 2.15.0 和 2.15.1、cran.r-project.org 和 www.omegahat.org/R，以及二进制和源代码。有什么建议么？谢谢。

```
install.packages('RCurl',repos='http://www.omegahat.org/R', type='source')
Installing package(s) into ‘C:/R/R-2.15.0/library’
(as ‘lib’ is unspecified)
trying URL 'http://www.omegahat.org/R/src/contrib/RCurl_1.95-1.tar.gz'
Content type 'application/x-gzip' length 862526 bytes (842 Kb)
opened URL
downloaded 842 Kb

* installing *source* package 'RCurl' ...
Please set LIB_CURL
cygwin warning:
  MS-DOS style path detected: C:/R/R-2.15.0/library/RCurl/libs
  Preferred POSIX equivalent is: /cygdrive/c/R/R-2.15.0/library/RCurl/libs
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
** libs
Warning: this package has a non-empty 'configure.win' file,
so building only the main architecture

cygwin warning:
  MS-DOS style path detected: C:/R/R-215~1.0/etc/i386/Makeconf
  Preferred POSIX equivalent is: /cygdrive/c/R/R-215~1.0/etc/i386/Makeconf
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
gcc  -I"C:/R/R-215~1.0/include" -DNDEBUG -Wall -I/include -DHAVE_LIBIDN_FIELD=1 -DHAVE_CURLOPT_URL=1 -DHAVE_CURLINFO_EFFECTIVE_URL=1 -DHAVE_CURLINFO_RESPONSE_CODE=1 -DHAVE_CURLINFO_TOTAL_TIME=1 -DHAVE_CURLINFO_NAMELOOKUP_TIME=1 -DHAVE_CURLINFO_CONNECT_TIME=1 -DHAVE_CURLINFO_PRETRANSFER_TIME=1 -DHAVE_CURLINFO_SIZE_UPLOAD=1 -DHAVE_CURLINFO_SIZE_DOWNLOAD=1 -DHAVE_CURLINFO_SPEED_DOWNLOAD=1 -DHAVE_CURLINFO_SPEED_UPLOAD=1 -DHAVE_CURLINFO_HEADER_SIZE=1 -DHAVE_CURLINFO_REQUEST_SIZE=1 -DHAVE_CURLINFO_SSL_VERIFYRESULT=1 -DHAVE_CURLINFO_FILETIME=1 -DHAVE_CURLINFO_CONTENT_LENGTH_DOWNLOAD=1 -DHAVE_CURLINFO_CONTENT_LENGTH_UPLOAD=1 -DHAVE_CURLINFO_STARTTRANSFER_TIME=1 -DHAVE_CURLINFO_CONTENT_TYPE=1 -DHAVE_CURLINFO_REDIRECT_TIME=1 -DHAVE_CURLINFO_REDIRECT_COUNT=1 -DHAVE_CURLINFO_PRIVATE=1 -DHAVE_CURLINFO_HTTP_CONNECTCODE=1 -DHAVE_CURLINFO_HTTPAUTH_AVAIL=1 -DHAVE_CURLINFO_PROXYAUTH_AVAIL=1 -DHAVE_CURLINFO_OS_ERRNO=1 -DHAVE_CURLINFO_NUM_CONNECTS=1 -DHAVE_CURLINFO_SSL_ENGINES=1 -DHAVE_CURLINFO_COOKIELIST=1 -DHAVE_CURLINFO_LASTSOCKET=1 -DHAVE_CURLINFO_FTP_ENTRY_PATH=1 -DHAVE_CURLINFO_REDIRECT_URL=1 -DHAVE_CURLINFO_PRIMARY_IP=1 -DHAVE_CURLINFO_APPCONNECT_TIME=1 -DHAVE_CURLINFO_CERTINFO=1 -DHAVE_CURLINFO_CONDITION_UNMET=1 -DHAVE_CURLOPT_KEYPASSWD=1 -DHAVE_CURLOPT_DIRLISTONLY=1 -DHAVE_CURLOPT_APPEND=1 -DHAVE_CURLOPT_KRBLEVEL=1 -DHAVE_CURLOPT_USE_SSL=1 -DHAVE_CURLOPT_TIMEOUT_MS=1 -DHAVE_CURLOPT_CONNECTTIMEOUT_MS=1 -DHAVE_CURLOPT_HTTP_TRANSFER_DECODING=1 -DHAVE_CURLOPT_HTTP_CONTENT_DECODING=1 -DHAVE_CURLOPT_NEW_FILE_PERMS=1 -DHAVE_CURLOPT_NEW_DIRECTORY_PERMS=1 -DHAVE_CURLOPT_POSTREDIR=1 -DHAVE_CURLOPT_OPENSOCKETFUNCTION=1 -DHAVE_CURLOPT_OPENSOCKETDATA=1 -DHAVE_CURLOPT_COPYPOSTFIELDS=1 -DHAVE_CURLOPT_PROXY_TRANSFER_MODE=1 -DHAVE_CURLOPT_SEEKFUNCTION=1 -DHAVE_CURLOPT_SEEKDATA=1 -DHAVE_CURLOPT_CRLFILE=1 -DHAVE_CURLOPT_ISSUERCERT=1 -DHAVE_CURLOPT_ADDRESS_SCOPE=1 -DHAVE_CURLOPT_CERTINFO=1 -DHAVE_CURLOPT_USERNAME=1 -DHAVE_CURLOPT_PASSWORD=1 -DHAVE_CURLOPT_PROXYUSERNAME=1 -DHAVE_CURLOPT_PROXYPASSWORD=1 -DHAVE_CURLOPT_SSH_HOST_PUBLIC_KEY_MD5=1 -DHAVE_CURLOPT_NOPROXY=1 -DHAVE_CURLOPT_TFTP_BLKSIZE=1 -DHAVE_CURLOPT_SOCKS5_GSSAPI_SERVICE=1 -DHAVE_CURLOPT_SOCKS5_GSSAPI_NEC=1 -DHAVE_CURLOPT_PROTOCOLS=1 -DHAVE_CURLOPT_REDIR_PROTOCOLS=1 -DHAVE_CURLOPT_SSH_AUTH_TYPES=1 -DHAVE_CURLOPT_SSH_PUBLIC_KEYFILE=1 -DHAVE_CURLOPT_SSH_PRIVATE_KEYFILE=1 -DHAVE_CURLOPT_FTP_SSL_CCC=1 -DHAVE_CURLOPT_COOKIELIST=1 -DHAVE_CURLOPT_IGNORE_CONTENT_LENGTH=1 -DHAVE_CURLOPT_FTP_SKIP_PASV_IP=1 -DHAVE_CURLOPT_FTP_FILEMETHOD=1 -DHAVE_CURLOPT_LOCALPORT=1 -DHAVE_CURLOPT_LOCALPORTRANGE=1 -DHAVE_CURLOPT_CONNECT_ONLY=1 -DHAVE_CURLOPT_CONV_FROM_NETWORK_FUNCTION=1 -DHAVE_CURLOPT_CONV_TO_NETWORK_FUNCTION=1 -DHAVE_CURLOPT_CONV_FROM_UTF8_FUNCTION=1 -DHAVE_CURLOPT_MAX_SEND_SPEED_LARGE=1 -DHAVE_CURLOPT_MAX_RECV_SPEED_LARGE=1 -DHAVE_CURLOPT_FTP_ALTERNATIVE_TO_USER=1 -DHAVE_CURLOPT_SOCKOPTFUNCTION=1 
-DHAVE_CURLOPT_SOCKOPTDATA=1 -DHAVE_CURLOPT_SSL_SESSIONID_CACHE=1         -O3 -Wall  -std=gnu99 -mtune=core2 -c base64.c -o base64.o
In file included from base64.c:1:0:
Rcurl.h:4:23: fatal error: curl/curl.h: No such file or directory
compilation terminated.
make: *** [base64.o] Error 1
ERROR: compilation failed for package 'RCurl'
* removing 'C:/R/R-2.15.0/library/RCurl'
Warning in q("no", status = 1, runLast = FALSE) :
  cannot get info on 'C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\Rtmp2fO9aA/R.INSTALL4245e223b81/RCurl', reason 'Access is denied'
Warning in install.packages :
  running command 'C:/R/R-215~1.0/bin/i386/R CMD INSTALL -l "C:/R/R-2.15.0/library"   C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\RtmpclrXFX/downloaded_packages/RCurl_1.95-1.tar.gz' had status 1
Warning in install.packages :
  installation of package ‘RCurl’ had non-zero exit status 
```

下载的源码包在

> C:\Documents and Settings\Administrator\Local Settings\Temp\RtmpclrXFX\downloaded_pa​​ckages

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-11T21:09:48.120

你有 cygwin 问题，所以可能你没有 RTools。

# google-bigquery - bq 命令行中的限定列名称错误

> ID：12921189
> 
> 赞同：0
> 
> 时间：2012-10-16T18:32:11.663
> 
> 标签：google-bigquery

我通过 bq 命令行运行了一个脚本并得到了这个响应（所有列名都是完全限定的）

job_134e61cebe274ba4ab73dd6b22a2f38a 在此查询中无法确定 SELECT * 的架构。请明确列出列名。

粘贴到 Web UI 的完全相同的请求工作正常。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:39:15.223

查看您的查询，查询解析器似乎无法计算查询中所需的列名。一个建议是获取连接操作右侧的表（句点、位置、项目），并将表名包含在子选择中，其中包含您需要的字段 - 例如更改`LEFT OUTER JOIN item`为`LEFT OUTER JOIN (SELECT a, b, c FROM item)`.

让我知道此解决方法是否适合您。我将提交一个内部错误来跟踪这一点。

# c# - visual studio 2010和entity framework 5.0，可以用吗？

> ID：12921194
> 
> 赞同：4
> 
> 时间：2012-10-16T18:32:26.557
> 
> 标签：c#, entity-framework

好吧，我真的想更新实体框架的4.1版本，所以在工具-->库包管理器->包管理器中我使用了这个命令：

安装包EntityFramework

然后更新开始了。我看到一条消息说安装了版本 5。在我的项目文件夹中，我可以看到两个文件夹，一个带有 net4 库，另一个带有 net5 库。

但是，在我在项目中的引用中，将4.1替换为4.4，而不是5.0版本，所以我想知道我是否可以使用5.0版本或只使用4.4版本。如果我只能使用4.4版本，为什么要安装5.0版本？我知道安装了 5.0 版本，因为如果我尝试通过包管理器再次安装实体框架，我会收到以下消息：

“'EntityFramework 5.0.0' 已安装。”

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T18:34:02.897

当您面向 .NET 4.0 时，实体框架将引用 4.4

看到[这个博客](http://brice-lambson.blogspot.com/2012/10/unicorn-myths-debunked-entity-framework.html)。

> 当您将 EntityFramework 5.0 安装到面向 .NET Framework 4.0 的项目中时，4.4 来自 EntityFramework.dll 的程序集版本。这只是运行时加载和绑定到程序集的一种副作用，绝不反映产品的版本。

# javascript - 查找字符串中元音数量的简单程序不起作用

> ID：12921195
> 
> 赞同：0
> 
> 时间：2012-10-16T18:32:29.043
> 
> 标签：javascript

我正在尝试使用 JavaScript，但我的浏览器拒绝执行我使用 switch case 函数编写的程序。目标是查找字符串中元音的数量（考虑全部以小写字母输入）

当我单击“提交”按钮时，框中的文本消失但没有任何反应。警报“你好”也没有出现，所以我假设该函数甚至没有被执行。

```
 <html>
   <head>
   <script>
   function vow(form)
    {
     alert("hello");
     var a = new Array(10);
     a = form.t1.value;
     var flag = 0;
     var i;

     for(i=0;i<10;i++)
       {
     switch (a[i])
      {
       case 'a':
       flag++;
       break;

       case 'e':
       flag++;
       break;

       case 'i';
       flag++;
       break;

       case 'o';
       flag++;
       break;

       case 'u';
       flag++;
       break;
      }
      }
  alert(flag);  
  }
  </script>
  </head>

  <body>
  <form>

  <input type="text" name="t1">
  <input type="submit" value="SUBMIT" onClick="vow(this.form)"/>

  </form>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:36:04.417

您正在使用`;`而不是`:`.

```
case 'i';
      __^__ 
```

`o`和的情况相同`u`。

## 更新：

我还展示了一个（内存密集型）替代版本：

```
var count = input.match(/[aeiou]/gi).length; 
```

## 更新：

```
var vow = function(str) {
    var matches = str.match(/[aeiou]/gi);
    var count = matches ? matches.length : 0;
    alert("'" + str + "' contains " + count + " vowel(s)");
    return false;
}​ ​ 
```

```
<input type="submit" value="SUBMIT" onClick="return vow(this.form.t1.value)"/> 
```

[你可以在这里看到它](http://jsfiddle.net/2QPN2/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T18:36:37.153

你可以做得更简单。例如，从输入中删除元音并检查与原始字符串相比的长度差异。

```
var count = input.length - input.replace(/[aeiou]/gi, '').length; 
```

编辑：或者更简单，删除除元音以外的所有内容;-)

```
function vow(form) {
    alert(form.t1.value.replace(/[^aeiou]/gi, '').length);
}​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T18:41:24.197

您的程序的一个小改进版本：

```
function vow(form) {
    var a = form.t1.value;
        flag = 0;

    for (var i = 0; i < a.length; i++) {
        switch (a[i]) {
            case 'a':
            case 'e':
            case 'i':
            case 'o':
            case 'u':
                flag++;
                break;
        }
    }
    alert(flag);
}​ 
```

[http://jsfiddle.net/b36D6/](http://jsfiddle.net/b36D6/)

但是这个任务可以更简单地处理：

```
function vow(str) {
    return --(str.split(/[aeiou]/).length);
} 
```

所以：`vow("hello!")`-> 2

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T18:47:17.960

您可以将 vow 方法简化为

```
function vow(form) {
  a = form.t1.value;

  var matches = a.toString().match(/[aeiou]/g);

  if( matches != null){
    alert(matches.length);
  } else {
    alert(0);
  }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T18:45:33.973

你用过

```
case 'i'; case 'o'; case 'u'; 
```

应该

```
case 'i': case 'o': case 'u': 
```

并在函数末尾使用 return false ，例如

```
function vow(form)
{

    // code
    return false;
} 
```

并添加`return`喜欢

```
<input type="submit" value="SUBMIT" onClick="return vow(this.form)"/> 
```

[**演示**](http://jsfiddle.net/Hwp6W/2/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T18:39:04.393

> [OP] 当我单击“提交”按钮时，框中的文本会消失，但没有任何反应。警报“你好”也没有出现，所以我假设该函数甚至没有被执行。

您需要使用 onSubmit 事件而不是 onClick 处理程序，如下所示：

```
 <input type="submit" value="SUBMIT" onSubmit ="vow(this.form)"/> 
```

# f# - 为什么管道操作员工作？

> ID：12921197
> 
> 赞同：15
> 
> 时间：2012-10-16T18:32:43.583
> 
> 标签：f#

如果管道运算符是这样创建的：

```
let (|>) f g = g f 
```

并像这样使用：

```
let result = [2;4;6] |> List.map (fun x -> x * x * x) 
```

然后它似乎做的是把 List.Map 放在后面 (fun x -> x * x * x) 并且不会改变 [2;4;6] 的位置

所以现在它看起来像这样：

```
let result2 = [2;4;6] (fun x -> x * x * x) List.map 
```

但是，这不起作用。

我现在才第一次学习 f#。这让我在阅读一本关于 f# 的书时感到困扰。所以我以后可能会知道我错过了什么，但我还是决定问一下。

很明显，我错过了一些重要的东西。因为我可以轻松地重新创建管道运算符。但我不明白为什么它有效。当我了解更多时，我可能很快就会让自己难堪。那好吧。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T18:36:25.780

管道运算符只是链式方法调用的语法糖。它与 C# 中 linq 表达式的表达方式非常相似。

从[这里](http://blogs.msdn.com/b/chrsmith/archive/2008/05/09/f-in-20-minutes-part-ii.aspx)解释：

正向管道操作员 我喜欢这个人。正向管道运算符简单地定义为：

```
let (|>) x f = f x 
```

并且有一个类型签名：

```
'a -> ('a -> 'b) -> 'b 
```

转换为：给定一个泛型类型 'a，以及一个接受 'a 并返回 'b 的函数，然后返回该函数在输入上的应用。

与其解释这一点，让我举一个例子来说明它可以在哪里使用：

```
// Take a number, square it, then convert it to a string, then reverse that string
let square x         = x * x
let toStr (x : int)  = x.ToString()
let rev   (x : string) = new String(Array.rev (x.ToCharArray()))

// 512 -> 1024 -> "1024" -> "4201"
let result = rev (toStr (square 512)) 
```

代码非常简单，但请注意语法看起来多么不守规矩。我们要做的就是获取一次计算的结果并将其传递给下一次计算。我们可以通过引入一系列新变量来重写它：

```
let step1 = square 512
let step2 = toStr step1
let step3 = rev step2
let result = step3 
```

但是现在您需要保持所有这些临时变量的正确性。(|>) 运算符所做的是获取一个值，并将其“转发”到一个函数，本质上允许您在函数调用之前指定函数的参数。这极大地简化了 F# 代码，允许您将函数连接在一起，其中一个函数的结果被传递到下一个函数。因此，使用相同的示例，代码可以清楚地写成：

```
let result = 512 |> square |> toStr |> rev 
```

**编辑**：

在 F# 中，您真正使用方法调用所做的是获取一个函数，然后将其应用于后面的参数，因此在您的示例中，它将`List.map (fun x -> x * x * x)`应用于`[2;4;6]`. 管道运算符所做的只是以相反的顺序获取参数，然后执行应用程序将它们反转回来。

功能：`List.map (fun x -> x * x * x)` 参数：`[2;4;6]`

标准 F# 调用语法：fg

反转 F# 调用语法：gf

标准：

```
let var = List.map (fun x -> x * x * x) [2;4;6] 
```

反转：

```
let var = [2;4;6] |> List.map (fun x -> x * x * x) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T18:49:58.267

括号`|>`表示它是一个中缀运算符，因此可以编写您的示例

```
let result = (|>) [2;4;6] (List.map (fun x -> x * x * x)) 
```

由于`|>`将其第一个参数应用于第二个参数，因此这相当于

```
let result = (List.map (fun x -> x * x)) [2;4;6] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-16T19:26:58.987

正如其他人在上面所说的，基本上你误解了 result2 会解决的问题。它实际上会解决

`List.map (fun x -> x * x * x) [2;4;6]`

List.map 有两个参数：一个应用于列表中所有元素的函数和一个列表。 `(fun x -> x * x * x)`是第一个参数，`[2;4;6]`是第二个。

基本上只是把左边的`|>`东西放在右边的结尾之后。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-16T18:52:49.083

如果您`|>`在 fsi 中输入您的定义并查看由类型推断派生的运算符签名，您会注意到`val ( |> ) : 'a -> ('a -> 'b) -> 'b`，即为`'a`函数`('a -> 'b)`yield提供了参数`'b`。

现在将此签名投影到您的表达式上`[2;4;6] |> List.map (fun x -> x * x * x)`，您将得到`List.map (fun x -> x * x * x) [2;4;6]`，其中参数是列表`[2;4;6]`，函数是一个参数的[部分应用](http://www.uncarved.com/blog/not_currying.mrk)`List.map (fun x -> x * x * x)`函数。

# java - Dom Set 元素错误

> ID：12921198
> 
> 赞同：2
> 
> 时间：2012-10-16T18:32:45.570
> 
> 标签：java, xml, dom

我使用 Dom 创建 xml 文件，但无法编写如下标签属性

```
<m:FC_TargetPath="SyndicationUpdated" m:FC_KeepInContent="false" rt:filterable="false"> 
```

当我设置属性时，我使用名称和值成功，但是带有`m:`or`rt:`前缀我得到一个异常。知道我该如何处理吗？

这是我使用的代码

```
ent.setAttribute("m:FC_TargetPath", "SyndicationUpdated"); 
```

例外是

> ```
> 'Namespace for prefix 'm' has not been declared. 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:35:13.403

要设置命名空间中的属性，您需要使用`setAttributeNS`而不是`setAttribute`，并将适当的命名空间 URI 传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:44:53.973

下面的示例程序：

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Element;

public class Dom
{
   public static void main( String[] args ) throws Throwable
   {
      DocumentBuilderFactory dbf  = DocumentBuilderFactory.newInstance();
      dbf.setNamespaceAware( true );

      DocumentBuilder db = dbf.newDocumentBuilder();
      Document doc = db.newDocument();

      Element root = doc.createElement( "root" );
      root.setAttribute( "xmlns:m" , "http://www.lfinance.fr/blog-rachat-credits" );
      root.setAttribute( "xmlns:rt", "http://www.lfinance.fr/forum-rachat-credits" );
      doc.appendChild( root );

      Element elt = doc.createElement( "simple" );
      elt.setAttribute( "m:FC_TargetPath"   , "false" );
      elt.setAttribute( "m:FC_KeepInContent", "false" );
      elt.setAttribute( "rt:filterable"     , "false" );

      root.appendChild( doc.createTextNode( "\n\t" ));
      root.appendChild( elt );
      root.appendChild( doc.createTextNode( "\n" ));
      TransformerFactory.newInstance().newTransformer().transform(
         new DOMSource( doc ),
         new StreamResult( System.out ));
   }
} 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<root
    xmlns:m="http://www.lfinance.fr/blog-rachat-credits"
    xmlns:rt="http://www.lfinance.fr/forum-rachat-credits">
    <simple
        m:FC_KeepInContent="false"
        m:FC_TargetPath="false"
        rt:filterable="false" />
</root> 
```

# message-queue - 消息的排序

> ID：12921201
> 
> 赞同：10
> 
> 时间：2012-10-16T18:33:02.333
> 
> 标签：message-queue, zeromq

1.  ZeroMQ 是否保证消息的顺序（FIFO）。
2.  有没有持久性的选择。
3.  它是否最适合 IPC 通信。
4.  它是否允许对消息进行优先级排序。
5.  它是否允许对接收器进行优先级排序。
6.  它是否允许同步和异步的通信方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T07:22:54.207

Zeromq 最好理解为类似 udp 的消息传递系统。因此，本质上并不能保证任何这一点。它确实保证单个消息的各个部分被原子地按顺序接收，因为 ZMQ 允许发送由多个部分组成的消息。所有通信在设计上始终是异步的。

有关更高级的模式，请参见[http://zguide.zeromq.org/](http://zguide.zeromq.org/)。

话虽如此，根据定义，所有要求的功能都会使传输速度更慢、更复杂。如果需要它们，您应该实施或使用指南的可用模式之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-06T12:02:27.780

[https://lists.zeromq.org/pipermail/zeromq-dev/2015-January/027748.html](https://lists.zeromq.org/pipermail/zeromq-dev/2015-January/027748.html)

作者说：“**通过 TCP 或 IPC 承载的消息，如果它们通过相同的网络路径，它们将按顺序传递**。这是有保证的，它是 TCP 保证，与 ZeroMQ 无关。ZeroMQ 永远不会重新排序消息。但是如果你通过两个或多个路径传递消息，然后再次合并这些流，你实际上将打乱消息。”

# xml - 如何使用 Django 将本地 JSON 对象加载到 D3.js 前端？

> ID：12921206
> 
> 赞同：3
> 
> 时间：2012-10-16T18:33:24.737
> 
> 标签：xml, django, d3.js

我正在尝试使用 django 后端创建 d3.js 可视化。
我正在尝试将一些 json 渲染到地图中：

```
 d3.json("world-countries.json", function(json) {
        self.countries.selectAll("path")
        .data(json.features)
        .enter().append("path")
        .attr("d", self.path)
        .on("mouseover", function(d) {
            d3.select(this).style("fill","#6C0");})
        .on("mouseout", function(d) {
            d3.select(this).style("fill","#000000");})
    }); 
```

但我不断收到错误：

```
Uncaught TypeError: Cannot read property 'features' of null 
```

我不确定如何通过 Django 访问 json 对象；有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:16:09.740

检查您使用的 D3 版本。我遇到了同样的问题，结果回调需要*两个*参数——错误和数据。

例子：

```
d3.json("world-countries.json", function(error, json) {
   // your code
} 
```

因为第一个参数是“错误”——当没有错误时，json 对象似乎为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:54:13.277

确保从 Web 服务器提供页面以避免路径和跨域问题。这可以使用 node.js 和 connect npm 或使用 python 轻松快速地完成，因为 d3js 的作者曾经这样做过。

我一般要处理json文件应该需要提供一些上传机制。如果您碰巧使用 Chrome，则可能会出现此 stackoverflow 问题中报告的 Switch：

[通过 file:// 加载本地 JSON 文件触发跨域空源冲突，解决方案？(jQuery)](https://stackoverflow.com/questions/3851691/load-local-json-files-via-file-triggers-cross-domain-null-origin-violation-s)

所以这更多的是 Ajax-json-crossdomain 问题而不是 d3js

高温高压

# jquery - jQuery，获取标签中的值

> ID：12921212
> 
> 赞同：1
> 
> 时间：2012-10-16T18:34:01.883
> 
> 标签：jquery

我正在尝试获取此标签的值：

```
 <label id="name" class="sub_heading"><?php echo $_SESSION['lastname'].", ".$_SESSION['firstname']; ?></label> 
```

出于某种原因：

```
 var name = ("#name").val(); 
```

不管用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:34:52.747

使用[`html()`](http://api.jquery.com/html/)或[`text()`](http://api.jquery.com/text/)如下：

```
var name = $("#name").html(); 
```

Method`val()`仅适用于表单元素（例如`<input>`,`<select>`等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:36:42.027

根据[文档，`.val()`](http://api.jquery.com/val/)应仅在表单控件（`input`、`button`、`select`、`textarea`）上使用。如果您想要某个元素的内容，请酌情使用`.text()`或`.html()`。

# java - Java String.split 不起作用

> ID：12921214
> 
> 赞同：0
> 
> 时间：2012-10-16T18:34:04.220
> 
> 标签：java, regex

我有一个以下格式的字符串：

```
CT-d0712728-867d-4cc4-bd0c-b2a679b8385f~#$~2012-10-16 02:13:27 PM 
```

我可以使用`String.split("~#$~")`还是必须使用 StringTokenizer？我将在上面的字符串中只有 2 个参数，这就是为什么我试图使用 String.Split("~#$~") 但它似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T18:36:12.037

`$`是正则表达式中的[特殊字符](http://www.regular-expressions.info/characters.html#special)（表示“行尾”）。为了使其简单文字，您需要对其进行转义，例如使用

*   `"\\$"`,
*   `"[$]"`
*   或使用引号`"\\Q$\\E"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:36:24.837

由于`split()`方法将参数作为`Regex`, 并且`$`是 . 中的特殊元字符`Regex`。您需要转义`$`标志：-

```
 System.out.println(str.split("~#\\$~")[0]);
    System.out.println(str.split("~#\\$~")[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:36:37.260

尝试

```
String s = "CT-d0712728-867d-4cc4-bd0c-b2a679b8385f~#$~2012-10-16 02:13:27 PM";

Arrays.toString(s.split("~#\\$~")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:36:52.327

```
String str = "CT-d0712728-867d-4cc4-bd0c-b2a679b8385f~#$~2012-10-16 02:13:27 PM";
String[] pieces = str.split("~#\\$~"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T18:59:48.690

你可以使用 String.split() 来做到这一点。无需使用 StringTokenizer。请参见下面的示例。

```
String s="CT-d0712728-867d-4cc4-bd0c-b2a679b8385f~#$~2012-10-16 02:13:27 PM";
        String test[]=s.split("\\~\\#\\$\\~");
        System.out.println(test[0]);
        System.out.println(test[1]); 
```

让我知道你有任何问题。

# unix - 在同一命令中组合多个正则表达式

> ID：12921217
> 
> 赞同：0
> 
> 时间：2012-10-16T18:34:24.197
> 
> 标签：unix, solaris, solaris-10

如何在一个命令中组合两个正则表达式

例如，如果有一个文件，如：

```
age22
Helwan University Engineering Faculty
ITI-intake33
bye FOr NOW
i am mahmoud 34
mie 4
a 
```

我想搜索以 by 开头并以 W 结尾的行？

使用**grep**命令

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:36:10.797

为此，您不需要多个正则表达式。

```
grep '^by.*W$' filename.txt 
```

应该足够了。

# python - 当你在列表上调用 `append` 会发生什么？

> ID：12921222
> 
> 赞同：2
> 
> 时间：2012-10-16T18:34:34.273
> 
> 标签：python, class, append, implementation

首先，我不知道这个问题最合适的标题是什么。竞争者：“如何`list.append`在自定义类中实现”。

我有一个`class`叫`Individual`. 这是课程的相关部分：

```
from itertools import count
class Individual:
    ID = count()
    def __init__(self, chromosomes):
        self.chromosomes = list(chromosomes)
        self.id = self.ID.next() 
```

这是我想对这门课做的事情：

假设我实例化一个没有染色体的新个体：`indiv = Individual([])`我想稍后给这个个体添加一条染色体。目前，我必须这样做：

```
indiv.chromosomes.append(makeChromosome(params)) 
```

相反，我最想做的是：

```
indiv.append(makeChromosome(params)) 
```

具有相同的效果。

所以我的问题是：当我调用`append`一个列表时，引擎盖下到底发生了什么？是否有一个`__append__`（或`__foo__`）被调用？在我的课堂上实现这个功能`Individual`会让我得到想要的行为吗？

例如，我知道我可以实现`__contains__`以`Individual`启用`if foo in indiv`功能。我将如何启用`indiv.append(…)`功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T18:36:35.400

[`.append()`](http://docs.python.org/library/stdtypes.html#mutable-sequence-types)只是一种接受一个参数的方法，您可以轻松地自己定义一个：

```
def append(self, newitem):
    self.chromosomes.append(newitem) 
```

不需要魔法方法。

# javascript - 将 javascript XML dom 发送到服务器以保存到本地文件

> ID：12921223
> 
> 赞同：1
> 
> 时间：2012-10-16T18:34:45.953
> 
> 标签：javascript, xml, dom, asp-classic

我已经尝试了几个小时来解决这个问题，但无济于事。在 javascript 中，我创建了一个 XML 字符串：

```
var txt="<bookstore><book type='cooking'>";
txt+="<title>Everyday Italian</title>";
txt+="<author>Giada De Laurentiis</author>";
txt+="<year>2005</year>";
txt+="</book>"; 
```

然后我用它来创建 XML dom：

```
if (window.DOMParser) {
    var parser=new DOMParser();
    var xmlDoc=parser.parseFromString(txt,"text/xml");
}
else{ // Internet Explorer
    var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
    xmlDoc.async=false;
    xmlDoc.loadXML(txt);
} 
```

我需要将 xmlDoc 发送到服务器页面（我认为是 asp 页面），服务器会提示我将 xml 文件保存到本地驱动器。我对此没有太多经验，并且遇到了障碍。我知道我需要创建一个 XMLHttpRequest 并将我的 xmlDoc 发布到一个 asp 页面：

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("POST", "http://MYSERVERURL/xml.ASP", false);  
xmlhttp.send(xmlDoc); 
```

我的问题是我不知道应该进入我的 xml.ASP 页面以接收 xmlDoc 并提示我保存到 xml 文件。

到目前为止我有这个，但真的不知道从这里去哪里：

```
<%
response.ContentType="text/xml"
set xmldoc = Server.CreateObject("Microsoft.XMLDOM")
xmldoc.async=false
xmldoc.load(request)
%> 
```

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:11:02.657

不确定我是否理解您想要实现的目标，但如果您只想强制显示打开/保存对话框并允许保存发布到脚本的任何内容，那么您可以使用以下简单代码执行此操作：

```
<%
Response.ContentType = "application/x-unknown"
Response.Addheader "Content-Disposition", "attachment; filename=""mydoc.txt"""
Response.Write(Request.Form)
%> 
```

更新：URL 解码功能。

```
function URLDecode(sText)
    sDecoded = Replace(sText, "+", " ")
    Set oRegExpr = Server.CreateObject("VBScript.RegExp")
    oRegExpr.Pattern = "%[0-9,A-F]{2}"
    oRegExpr.Global = True
    Set oMatchCollection = oRegExpr.Execute(sText)
    For Each oMatch In oMatchCollection
        sDecoded = Replace(sDecoded,oMatch.value,Chr(CInt("&H" & Right(oMatch.Value,2))))
    Next
    URLDecode = sDecoded
End function 
```

# sql - 如何将两个sql语句的结果连接到一个表和不同的列中

> ID：12921226
> 
> 赞同：9
> 
> 时间：2012-10-16T18:34:51.870
> 
> 标签：sql, sql-server, stored-procedures

我有三个选择查询，它们根据不同的 where 子句从同一个表中返回总记录、成功记录和失败记录。我想将所有这些语句的结果合并到一个表中以制作我的存储过程，但结果表应具有三个不同的 cdr 、成功、失败列

```
SELECT Count(*) AS cdr 
FROM   ABC AS c WITH (NOLOCK) 
WHERE  APPID IN( 1, 2 ) 
       AND CALLDATE = '2012-10-09' 

SELECT Count(*) AS success 
FROM   ABC AS d WITH (NOLOCK) 
WHERE  APPID IN( 44, 45 ) 
       AND CALLDATE = '2012-10-09' 
       AND HANGUPCODE IN ( 'man', 'mach' ) 

SELECT Count(*) AS fail 
FROM   ABC WITH (NOLOCK) 
WHERE  APPID IN( 44, 45 ) 
       AND CALLDATE = '2012-10-09' 
       AND HANGUPCODE NOT IN ( 'man', 'mach' ) 
```

联合在一列中给出结果，因此它不起作用。任何其他想法

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-16T18:38:29.983

只需将每个 select 语句包装在括号中，给每个 select 语句一个别名，然后`SELECT`在顶部使用：

```
SELECT 
  (select count(*) as cdr  
   from abc as c with (nolock) 
   where appid in(1,2)  and calldate = '2012-10-09'
  ) AS Column1,  
  (select count(*) as success  
   from abc as d with (nolock) 
   where appid in(44,45) and calldate = '2012-10-09' 
       and hangupcode in ('man', 'mach')
  ) AS Column2, 
  (select count(*) as fail  
   from abc  with (nolock) 
   where appid in(44,45) and calldate = '2012-10-09' 
       and hangupcode not in  ('man', 'mach')
  ) AS Column3 
```

基本上，您将每个查询视为一个单独的列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:39:17.247

```
 SELECT a.cdr, b.success, c.failure FROM 
  (SELECT count(*) AS cdr  
   FROM abc as c WITH (NOLOCK) 
   WHERE appid IN (1,2) AND
         calldate = '2012-10-09'
  ) AS a,   
  (SELECT count(*) AS success  
   FROM abc AS d WITH (NOLOCK) 
   WHERE appid IN (44,45) AND 
         calldate = '2012-10-09' AND 
         hangupcode IN ('man', 'mach')
  ) AS b,  
  (SELECT count(*) AS fail  
   FROM abc WITH (NOLOCK) 
   WHERE appid IN (44,45) AND
         calldate = '2012-10-09' AND 
         hangupcode NOT IN ('man', 'mach')
  ) AS c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:39:17.490

```
select a.cdr, b.success, c.fail from
( select count(*) as cdr  
from abc as c with (nolock) where appid in(1,2)  
and calldate = '2012-10-09' ) a
, ( select count(*) as success  
from abc as d with (nolock) where appid in(44,45)  
and calldate = '2012-10-09'
and hangupcode in ('man', 'mach') ) b
, ( select count(*) as fail  from abc  with (nolock) where appid in(44,45) and calldate = '2012-10-09'and hangupcode not in  ('man', 'mach') ) c 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T18:45:44.070

```
select
   sum(case when appid in(1,2) and calldate = '2012-10-09' then 1 else 0 end) as cdr,
   sum(case when appid in(44,45) and calldate = '2012-10-09'and hangupcode in ('man', 'mach') then 1 else 0 end) as success,
   sum(case when appid in(44,45) and calldate = '2012-10-09'and hangupcode not in  ('man', 'mach') then 1 else 0 end)as fail
from abc 
```

# asp.net - 在 Windows 8 中开发时浏览器功能受限

> ID：12921228
> 
> 赞同：0
> 
> 时间：2012-10-16T18:34:58.603
> 
> 标签：asp.net, visual-studio, windows-8

有没有其他人遇到过这个问题并解决了它？

我在 Windows 8 的 RTM 的全新安装中使用 Visual Studio 2010 进行开发。在开发 ASP.NET 应用程序并使用附加的调试器运行它时，我无法单击任何应用程序中的 HTML 链接并让它打开浏览器窗口.

我将在 Firefox 中运行（通过 VS 调试）我的应用程序，并且我无法单击在 Google Talk 或 Outlook 中发送的链接。

如果我停止运行应用程序，我可以单击这些链接。

我还看到，在调试时，我在我的应用程序中使用了 jQuery Drag-N-Drop HTML 5 功能。当它在调试器下运行时，我无法使用该功能，它只是不起作用。所有浏览器（Chrome、Firefox 和 IE）都会发生这种情况。但是如果我停止调试，并在没有调试器的情况下运行它，它就会工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:56:54.967

尝试在 Visual Studio 2012 中禁用“Javascript”的调试。

# javascript - 提交表单在 Firefox 中可以正常工作，但在 Safari 中不行

> ID：12921232
> 
> 赞同：0
> 
> 时间：2012-10-16T18:35:09.900
> 
> 标签：javascript, forms, wordpress, firefox, safari

我在我的消息系统中添加了一个 Javascript 代码。当用户单击提交按钮时，此 JS 代码会在文本区域中添加一行 BBCode。

BBCode 在 Firefox 和 Safari 中都可以正常插入。但是，该消息仅在 Firefox 中通过。使用 Safari 发布时，它不会进入数据库。我只用这两个浏览器测试过，很可能是其他浏览器坏了。

这是代码：

```
<!-- Start javascript code for message type -->
<script>
    var messageType = {
        General: "[b][green]General[/green]:[/b]",
        News: "[b][blue]News[/blue]:[/b]",
        Trend: "[b][orange]Trend[/orange]:[/b]",
        Help: "[b][red]Help[/red]:[/b]"
    };

    function submitForm(){
        msgSelText = messageType [document.getElementById('messageSelection').value]
        document.getElementById('wpam_nm_text').value = msgSelText + ' ' +document.getElementById('wpam_nm_text').value;
        document.getElementById('new_post_form').submit();
    }
</script>
<!-- End javascript code for message type -->

<form name="new_post" method="post" action="admin.php?page=wp-admin-microblog/wp-admin-microblog.php" id="new_post_form">
    <table class="widefat">
        <thead>

        <tr>
            <td>
                <div id="postdiv" class="postarea" style="display:block;">
                    <textarea name="wpam_nm_text" id="wpam_nm_text" style="width:100%;" rows="4"></textarea>
                </div>
                Type of message:
                <select id="messageSelection">
                    <option>General</option>
                    <option>News</option>
                    <option>Trend</option>
                    <option>Help</option>
                </select>

                <p style="text-align:right; float:right;"><input name="send" type="submit" class="button-primary" value="<?php _e('Send', 'wp_admin_blog'); ?>" onclick="submitForm()" />
            </td>
        </tr>
        </thead>
    </table>
</form> 
```

我删除了 Javascript 代码，表单在 Safari 中运行良好。这意味着不知何故，JS 代码使它无法运行 -**为什么**？**我该如何解决**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:49:04.020

我通过完全重写 javascript 代码解决了上帝遗弃的事情，现在在两种浏览器中都可以正常工作。我不知道原来的方法出了什么问题，这不是完全不可能是浏览器错误。

这是新方法：

```
<!-- Start javascript code for message type -->
<script type="text/javascript">
function setText(){
  var messageType = document.getElementById('messageType');
   var feed = document.getElementById('feed');
    feed.value= messageType.value + " "  +
    feed.value;
    }
</script>
<!-- End javascript code for message type -->

<form name="new_post" method="post" action="admin.php?page=wp-admin-microblog/wp-admin-microblog.php" id="new_post_form">
    <table class="widefat">
        <thead>
        <tr>
            <th><?php _e('Your Message', 'wp_admin_blog');?><a name="newpost"></a></th>
        </tr>
        <tr>
            <td>
                <div id="postdiv" class="postarea" style="display:block;">
                    <textarea name="wpam_nm_text" id="feed" style="width:100%;" rows="4"></textarea>
                </div>
                Type of message:

                 <select id="messageType" style="width:100px; height:20px; text-align:center;">
                     <option value="[b][green]General[/green]:[/b]">General</option>
                     <option value="[b][blue]News[/blue]:[/b]">News</option>
                     <option value="[b][orange]Trend[/orange]:[/b]">Trend</option>
                     <option value="[b][red]Help[/red]:[/b]">Help</option>
                </select>

                <p style="text-align:right; float:right;"><input name="send" type="submit" class="button-primary" value="<?php _e('Send', 'wp_admin_blog'); ?>" onclick="javascript:setText()" /></p>

            </td>
        </tr>
        </thead>
    </table>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:47:14.450

在 Safari 中，运行此小提琴时出现参考错误：http: [//jsfiddle.net/esCPN/1/](http://jsfiddle.net/esCPN/1/)

如果你打算用来`onclick`触发 javascript 事件（你不应该这样做），那么你应该使用`javascript:`语法。

```
<input name="send" type="submit" class="button-primary" value="Send"
    onclick="javascript:submitForm()" /> 
```

这将停止 Safari 抛出的任何引用错误。

# android - *忽略* 当设备垂直握持时如何执行操作？

> ID：12921233
> 
> 赞同：-1
> 
> 时间：2012-10-16T18:35:15.390
> 
> 标签：android, device, sensors, motion

我想问一下，当应用程序在后台运行时，您如何检查设备是否垂直握持？我想做一个小工具，但我是 android 新手，我已经掌握了用 Java (Android) 编程所需的所有程序，但我想了解更多关于 Java (Android) 编程的信息。您能否举一个这样的代码示例，并解释为什么将参数 0 设置为 0 而不是 1 例如。

在此先感谢，蒂姆

编辑：当我发布这个问题时，我没有意识到当设备旋转时应用程序会自动切换到横向模式。请忽略这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:41:03.213

您可以扩展 OrientationEventListener，这是一个帮助类，用于在设备方向发生变化时从 SensorManager 接收通知。顺便说一句，在尝试运行任何东西之前，请尝试阅读更多的 android 文档。祝你好运！！！

# javascript - jQuery.ajax() 不调用成功函数

> ID：12921235
> 
> 赞同：-2
> 
> 时间：2012-10-16T18:35:30.867
> 
> 标签：javascript, jquery, ajax

Ajax 调用后未调用函数。此 servlet 返回纯文本，并在调用时将结果显示在浏览器中：

[http://ec2-23-20-139-221.compute-1.amazonaws.com:8080/heiper2/heiper?personid=205328&placeid=640161&timeid=1992-03](http://ec2-23-20-139-221.compute-1.amazonaws.com:8080/heiper2/heiper?personid=205328&placeid=640161&timeid=1992-03)

但是如果我使用 jQuery 在 javascript 中调用它，就会出现问题。我首先想到了超时，但调用需要大约 10.000 毫秒，并且我已将超时设置为 60.000。

有任何想法吗？

```
$.ajax({
  url: "http://ec2-23-20-139-221.compute-1.amazonaws.com:8080/heiper2/heiper?personid=205328&placeid=640161&timeid=1992-03&callback=?",
  dataType: 'text',
  timeout: 60000,
  success: function(data){
  alert(data);
  }
}); 
```

响应头看起来也不错

```
Response Headers Δ7515ms
Server:Apache-Coyote/1.1Date:Tue, 16 Oct 2012 18:22:51
GMTContent-Type:text/plain
Content-Length:1146 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:36:52.020

看起来像一个语法错误，你错过了一个结束 }

```
$.ajax({
  url: "http://ec2-23-20-139-221.compute-1.amazonaws.com:8080/heiper2/heiper?personid=205328&placeid=640161&timeid=1992-03&callback=?",
  dataType: 'text',
  timeout: 60000,
  success: function(data){
      alert(data);
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T18:40:39.173

你错过了一个 close } 但也许你得到了一个错误状态代码（它应该在你发布的响应头中。

检查您的浏览器控制台。

可能还值得为错误添加一个处理程序。例子：

```
$.ajax({
  url: "http://ec2-23-20-139-221.compute-1.amazonaws.com:8080/heiper2/heiper?personid=205328&placeid=640161&timeid=1992-03&callback=?",
  dataType: 'text',
  timeout: 60000,
  success: function(data){
      alert(data);
  },
  error: function(){
    alert('error'); // TODO DEBUG HERE
  }
}); 
```

# java - 如何使用相同的 HttpClient 实例选择客户端证书？

> ID：12921239
> 
> 赞同：1
> 
> 时间：2012-10-16T18:35:39.827
> 
> 标签：java, ssl, ssl-certificate, apache-httpclient-4.x, truststore

我有一个由多个客户使用的应用程序（其中一个带有他/她的客户证书）。该应用程序应该通过 HTTPS 与 Web 服务（使用 HttpClient）进行通信。要在此 Web 服务中进行身份验证，需要提供客户端证书。如前所述，每个客户端都有不同的客户端证书，我需要使用当前客户端的证书。我有以下代码正在执行所描述的操作。

```
X509TrustManager trustManager = new X509TrustManager() {

    public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException {
    }

    public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException {
    }

    public X509Certificate[] getAcceptedIssuers() {
        return null;
    }
};
SSLContext sslcontext = SSLContext.getInstance("TLS");
KeyManager[] managers = /* Code that get the current client's KeyManager[] */;

sslcontext.init(managers, trustManager, null);
SSLSocketFactory socketFactory = new SSLSocketFactory(sslcontext);
socketFactory.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

HttpParams params = new BasicHttpParams();
params.setBooleanParameter(ClientPNames.HANDLE_REDIRECTS, true);
HttpClient client = new DefaultHttpClient(params);
Scheme sch = new Scheme("https", socketFactory, 443);

client.getConnectionManager().getSchemeRegistry().register(sch);
HttpPost post = /* Code that get the POST */ 

HttpResponse response = client.execute(post, new BasicHttpContext()); 
```

好的，它正在工作。但是有很多线程向这个服务发送请求。有时它给我一些问题。因此，我发现很多人告诉每个应用程序只有一个 HttpClient 更好，并且可以通过以下方式完成：

```
SchemeRegistry schemeRegistry = new SchemeRegistry();
schemeRegistry.register(new Scheme("http", 80, PlainSocketFactory.getSocketFactory()));
schemeRegistry.register(new Scheme("https", 443, SSLSocketFactory.getSocketFactory()));

PoolingClientConnectionManager cm = new PoolingClientConnectionManager(schemeRegistry);
// Increase max total connection to 200
cm.setMaxTotal(200);
// Increase default max connection per route to 20
cm.setDefaultMaxPerRoute(20);
// Increase max connections for localhost:80 to 50
HttpHost localhost = new HttpHost("localhost", 80);
cm.setMaxPerRoute(new HttpRoute(localhost), 50);

httpClient = new DefaultHttpClient(cm, params); 
```

这样我就有了一个带有连接池的 HttpClient 。但是如何使用这种方法并为特定请求选择客户端证书？提前致谢。

编辑：

我将尝试解释我为什么要尝试这个。我们有时会遇到问题。服务器停止与 Web 服务器的通信，一段时间后，它又开始工作。需要注意的是，在调用 Web 服务之前已经完成了很多处理。因此，有一个池 Executor 创建线程来执行所有处理。工作完成后，该线程创建另一个与 Web 服务通信的线程。因此，第一个线程加入第二个线程超时（thread.join（timeout））。当第一个线程唤醒时，它会中断尝试与 web 服务通信的线程（如果尚未完成）。我不是实现这个的人，但它应该给请求一个超时来完成。在我的开发机器中，我创建了一个 JMeter 测试，它模拟了许多使用此服务的客户端并连接了 JConsole 以查看发生了什么。在完成 300 个任务（其中一些失败）后，Executor 的池创建的线程死亡。但是很多线程仍然活着，它们在 10 分钟后就死了。当我查看堆栈跟踪时，我看到它与 HttpClient 相关。然后，我开始搜索，发现有人说整个应用程序最好只使用一个 HttpClient ，使其汇集连接。我认为 HttpClient 在搜索要连接的端口时被锁定并被第一个线程中断。然后，不知何故，它锁定了很长时间。Executor 池创建的线程死亡。但是很多线程仍然活着，它们在 10 分钟后就死了。当我查看堆栈跟踪时，我看到它与 HttpClient 相关。然后，我开始搜索，发现有人说整个应用程序最好只使用一个 HttpClient ，使其汇集连接。我认为 HttpClient 在搜索要连接的端口时被锁定并被第一个线程中断。然后，不知何故，它锁定了很长时间。Executor 池创建的线程死亡。但是很多线程仍然活着，它们在 10 分钟后就死了。当我查看堆栈跟踪时，我看到它与 HttpClient 相关。然后，我开始搜索，发现有人说整个应用程序最好只使用一个 HttpClient ，使其汇集连接。我认为 HttpClient 在搜索要连接的端口时被锁定并被第一个线程中断。然后，不知何故，它锁定了很长时间。使其汇集连接。我认为 HttpClient 在搜索要连接的端口时被锁定并被第一个线程中断。然后，不知何故，它锁定了很长时间。使其汇集连接。我认为 HttpClient 在搜索要连接的端口时被锁定并被第一个线程中断。然后，不知何故，它锁定了很长时间。

编辑：

这就是我在 JConsole 中看到的。这一次，我只启动了 100 个任务，并且有 15 个线程处于这种状态：

```
Name: Thread-228
State: RUNNABLE
Total blocked: 0  Total waited: 0

Stack trace: 
 java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:129)
com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:798)
   - locked java.lang.Object@7c1975
com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
   - locked java.lang.Object@16b53a6
com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1165)
com.sun.net.ssl.internal.ssl.SSLSocketImpl.getSession(SSLSocketImpl.java:1916)
org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:91)
org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:572)
org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:692)
org.apache.http.conn.scheme.SchemeSocketFactoryAdaptor.connectSocket(SchemeSocketFactoryAdaptor.java:65)
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)
org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
sun.reflect.GeneratedMethodAccessor3671.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:229)
org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:128)
br.com.fibonacci.webservice.InvocacaoDeServico$_monteChamada_closure8.doCall(InvocacaoDeServico.groovy:441)
sun.reflect.GeneratedMethodAccessor3667.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:266)
org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:150)
br.com.fibonacci.webservice.InvocacaoDeServico$_monteChamada_closure8.call(InvocacaoDeServico.groovy)
sun.reflect.GeneratedMethodAccessor3662.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:266)
org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:63)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:124)
br.com.fibonacci.ChamadaComTimeout$_execute_closure1.doCall(ChamadaComTimeout.groovy:19)
sun.reflect.GeneratedMethodAccessor3657.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:266)
org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:51)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:150)
br.com.fibonacci.ChamadaComTimeout$_execute_closure1.doCall(ChamadaComTimeout.groovy)
sun.reflect.GeneratedMethodAccessor3655.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:86)
groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:234)
groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1061)
groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:910)
groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:892)
groovy.lang.Closure.call(Closure.java:279)
groovy.lang.Closure.call(Closure.java:274)
groovy.lang.Closure.run(Closure.java:355)
java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:40:35.967

我认为这是不可能的，因为 IMO 它没有任何意义。
对纯文本重用连接是有意义的，但对于经过**身份验证的加密**连接则**不然。** 每个连接都属于一个用户，应该根据 SSL 参数终止，而不是在用户之间重复使用。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:58:51.507

我发现这篇很棒的博客文章[http://javaeesupportpatterns.blogspot.com.br/2011/04/javanetsocketinputstreamsocketread0.html](http://javaeesupportpatterns.blogspot.com.br/2011/04/javanetsocketinputstreamsocketread0.html)解释了我的问题。它与 HttpClient 并没有真正的关系。问题在于超时实现。**

# java - 在 catch 块中除以零时未引发异常

> ID：12921240
> 
> 赞同：2
> 
> 时间：2012-10-16T18:35:43.003
> 
> 标签：java, exception-handling, divide-by-zero

在玩 Java 中的异常处理时，我注意到在 Java 的**catch**块中执行某些非法运行时操作时不会引发异常。

这是语言中的错误还是我错过了什么？有人可以调查一下吗 - 就像为什么从 catch 块中没有抛出异常一样。

```
public class DivideDemo {

    @SuppressWarnings("finally")

    public static int divide(int a, int b){

    try{
       a = a/b;
    }
    catch(ArithmeticException e){
       System.out.println("Recomputing value");

       /* excepting an exception in the code below*/
       b=0;
       a = a/b;
       System.out.println(a);
    }
    finally{
      System.out.println("hi");
      return a;
    }
  }    
  public static void main(String[] args) {
     System.out.println("Dividing two nos");
     System.out.println(divide(100,0));
  } 
```

}

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T18:37:38.657

> 这是语言中的错误还是我错过了什么？

这是因为您的块`return`中有声明`finally`：

```
finally {
  System.out.println("hi");
  return a;
} 
```

该`return`语句有效地吞下异常并用返回值“*覆盖”它。*

# 也可以看看

*   [Java try-finally 返回设计问题](https://stackoverflow.com/questions/4185340)

# javascript - 如何防止点击事件触发显示/隐藏？

> ID：12921246
> 
> 赞同：1
> 
> 时间：2012-10-16T18:36:01.270
> 
> 标签：javascript, jquery

有一个可点击的图层。单击它会显示/隐藏一些额外的内容。在这一层中，有一个链接会触发另一个页面在浏览器中加载。

单击此链接时，也会单击可单击层，因为它包含链接。我怎样才能避免这种情况？

我希望链接能够正常工作，但是当用户单击它时，不应显示额外的内容。

我试过了

```
$('.link').click(function(event){
     return false;      
}); 
```

但这会禁用隐藏/显示和工作链接。有任何想法吗？这是我的小提琴：http: [//jsfiddle.net/ZkPLD/](http://jsfiddle.net/ZkPLD/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:37:42.790

使用[stopPropagation](http://api.jquery.com/event.stopPropagation/)避免事件冒泡：

```
$('.link').click(function(event){
     event.stopPropagation();
}); 
```

# cygwin - apt-cyg，下载的文件存放在哪里？

> ID：12921249
> 
> 赞同：0
> 
> 时间：2012-10-16T18:36:06.170
> 
> 标签：cygwin, apt-get

当我使用命令“apt-cyg install package-name”时，一旦 Cygwin 下载了包，它会显示“已保存包名”。我似乎无法在硬盘驱动器中找到它。那么它位于哪里呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:16:26.407

我在 /setup 和一个文件夹中找到了它们，该文件夹的名称是用于下载软件包的镜像

# sql - 如何将 SQL Azure 架构复制到另一个 SQL Azure 数据库？

> ID：12921254
> 
> 赞同：2
> 
> 时间：2012-10-16T18:36:09.767
> 
> 标签：sql, azure, azure-sql-database

我已经在 SQL Azure 中开发/管理了我的开发数据库，​​但我不知道如何复制我的开发 SQL Azure 数据库的架构，以便将其上传到我的生产 SQL Azure 数据库？我听说过其他第三方工具，但这是最好的方法吗？如果是这样，什么是用于此的好工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:49:37.133

[http://sqlazuremw.codeplex.com/](http://sqlazuremw.codeplex.com/)也是一个非常简单易用且高效的工具

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T10:10:49.560

使用 SQL 时绝对不能没有的两个工具是 SQL 比较和 Redgate 的 SQL 数据比较。他们为我节省了无数小时的工作时间，并将简化您想做的事情。我已经将它们与 azure 一起使用，它们运行良好并为我们完成了这项工作。

见[http://www.red-gate.com/products/sql-development/sql-developer-bundle/](http://www.red-gate.com/products/sql-development/sql-developer-bundle/)

第一个产品将比较并创建您的架构，第二个产品将让您同步数据。有时，为正确的工具付费会更好，就是这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T20:14:59.377

如果你的生产数据库是空的，你只需要克隆你当前的开发数据库——你可以将你的 DevDB 导出到 .bacpac 文件，然后将它导入到生产服务器上。

旧门户网站在那里具有该功能：数据库->订阅->服务器->选择数据库，顶部的导入\导出。

新门户：DB，单击服务器选项卡，选择服务器 -> 数据库选项卡，底部面板上的 Import\Export 按钮

如果您只需要将架构迁移到生产数据库，该数据库充满数据并且不应被中断 - 您可以创建 SQLProject 类型（如果我没记错的话 - 您需要 SQL Server Data Tools，SSDT。它也可用于 SQL2012 Tools\Studio ) 然后您可以将您的 Azure DB 架构与空项目和脚本架构进行比较回 sql 构造。然后只需将新创建的脚本发布到您的生产数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T08:48:07.597

SQL Azure MW (http://sqlazuremw.codeplex.com/) 工作正常，尽管在使用架构中的大量表时它确实崩溃了几次。

另一种选择也是 Azure 数据同步，但据我所知，如果数据库中有超过 500 个表，它也不会工作。

我最后做的是带有数据库SQL转储的sqlcmd：

[http://msdn.microsoft.com/en-us/library/windowsazure/ee336280.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336280.aspx)

这花了很长时间，但效果很好。最大的问题是如何在本地取回它:-)

# python - 在python中将一个类导入另一个类

> ID：12921260
> 
> 赞同：-1
> 
> 时间：2012-10-16T18:36:26.293
> 
> 标签：python

我正在尝试学习 python 我试图在另一个类中导入一个类但它不起作用

`Application.py`：

```
class Application:

    def example(self):
        return "i am from Application class" 
```

`Main.py`

```
class Main:

    def main():
        application = Application()
        application.example()

if __name__ == "__main__":
    Main.main() 
```

这给了我：

```
File "Main.py", line 11, in <module>
    Main.main()
TypeError: unbound method main() must be called with Main instance as first argument (got nothing instead) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:39:34.743

您应该首先实例化您的 Main 类。

```
if __name__ == '__main__':
    myMain = Main()
    myMain.main() 
```

但这会给你另一个错误：

> TypeError: main() 不接受任何参数（给定 1 个）

有两种方法可以解决此问题。要么让 Main.main 接受一个论点：

```
class Main:
    def main(self):
        application = Application()
        application.example() 
```

或使 Main.main 成为静态方法。在这种情况下，您不必实例化 Main 类：

```
class Main:
    @staticmethod
    def main():
        application = Application()
        application.example()

if __name__ == "__main__":
    Main.main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:46:17.003

该错误与导入无关（尽管您似乎没有在`Application`任何地方导入）。问题是您`main`像使用静态方法一样使用该方法，而没有声明它是静态的。

要解决这个问题，您需要将您的`main`方法声明为静态或创建`Main`该类的实例。

作为静态方法（添加`@staticmethod`装饰器）：

```
class Main():

    @staticmethod
    def main():
       ... 
```

使用实例：

```
class Main():

    def main(self):
        ....

if __name__ == "__main__":
    myMain = Main() #create an instance
    myMain.main()   #call the function on the instance 
```

此外，要从 Application.py 导入您的`Application`类，您只需编写以下代码：

```
from Application import Application 
```

# mongodb - mongodb mongorestore 断言失败

> ID：12921261
> 
> 赞同：3
> 
> 时间：2012-10-16T18:36:27.293
> 
> 标签：mongodb, mongorestore, database

我在生产环境中运行了 mongodb 版本 1.8.2，为此运行了一个 cron 作业以进行数据库转储。我刚刚将我的 ubuntu 升级到 12.04。现在我无法恢复任何数据库/集合。它在给

db.system.indexes 断言失败 _filename.empty() util/mmap.cpp 167

我用谷歌搜索了它，但找不到任何合适的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T10:13:43.750

尝试`ulimit -n 64000`在启动脚本中设置，通常是`/etc/init.d/mongodb`. 这对我有用。

[https://groups.google.com/forum/#!msg/mongodb-user/RNwc6j6oiSg/PspURcJUxMIJ](https://groups.google.com/forum/#!msg/mongodb-user/RNwc6j6oiSg/PspURcJUxMIJ)

# java - 使用递归打印星号

> ID：12921263
> 
> 赞同：1
> 
> 时间：2012-10-16T18:36:27.003
> 
> 标签：java, recursion

有一个方法 ,`printStars(j)`可以返回一个字符串——一行星`j`号。我需要编写一个递归打印`n`星号行三角形的方法。第一行需要有一个 *，第二行需要有两个 *，等等。不能使用迭代循环（所以不能使用 while、do-while 或 for）。

向后执行的代码很简单：

```
public void printTriangle(int n) {
    if(n >= 1) {
        printStars(n));
        printTriangle(n - 1);
    }
} 
```

到目前为止，我的上述代码但相反的代码如下。这是不正确的，因为`i`在每个循环中都重置为 1。我只是不知道该怎么做。我只能使用一个参数函数。

```
public void printTriangle(int n) {
    int i = 1;

    if(i <= n) {
        printStars(i);
        printTriangle(i + 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:39:26.170

只需首先重复，然后打印该行：

```
public void printTriangle(int n) {
    if(n > 1) {
        printTriangle(n - 1);
    }
    System.out.println(makeStars(n));
} 
```

所以首先打印较小的三角形，然后附加较长的线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:38:31.043

```
static int i = 1; 
```

这将确保`i`在调用函数之间保留其值。它第一次初始化为 1，对变量所做的任何更改都将在调用中保持不变。

**编辑**：正如评论所说，这不是正确的方法。Daniel Fischer 的解决方案更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:40:41.313

将 的最大值`i`作为第二个参数传递，以限制要打印的行数，即 . 的最大值`i`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:41:43.900

也许是两个参数函数：

```
public void printTriangle(int i, int n) {
    if(i <= n) {
         System.out.println(printStars(i));
         printTriangle(i+1, n);
    }
} 
```

# git - 如何在 git 中传播分支删除？

> ID：12921275
> 
> 赞同：0
> 
> 时间：2012-10-16T18:37:06.317
> 
> 标签：git, branch

我们的 git 存储库有一个预先测试过的提交结构，类似于[这样](http://www.joergm.com/2011/05/pre-tested-commits-using-git/)，一种自动化的[集成管理器](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows#Integration-Manager-Workflow)。

但是，我们在删除分支时遇到了问题，因为它们可以从 devs 本地存储库中删除，并且该更改可以由 dev 推送到他们的个人存储库，但该更改不会使其成为“绿色”或“祝福的回购作为构建服务器在删除分支时不会触发构建。

如果我编写一个脚本，该脚本从开发人员个人仓库中获取所有分支，并从“绿色”仓库中获取所有分支（请记住，这将有许多其他开发人员的分支）并发出

`git push origin :BranchName`

对于存在于“绿色”中但不在个人中的每个分支，这是否会删除开发人员在其个人仓库中删除的分支，但保留所有其他分支？

这行得通吗？还有比这更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:05:24.883

我不确定您的系统是否能够捕捉到引用的删除以触发构建，但由于 CI 实例是从您的开发远程个人存储库中提取的，您应该使用它`git remote prune origin`来删除 CI 端已删除的分支个人远程仓库（假设 origin 是开发远程仓库的远程名称，因为它是从那里克隆的）

当您的 CI 推送到绿色存储库时，它能够将远程分支的子集与其当前拥有的分支进行比较，并找到已删除的分支。因此，在 CI 方面，您可以在每次推送时执行类似的操作：

```
git branch -a | grep {green_repo_remote_name} 
```

将其与本地分支机构列表进行比较：

```
git branch 
```

并执行

`git push {green_repo_remote_name} :branch_name_that_exists_only_in_green_repo`

**更新：**

根据下面的评论，上面的方法似乎将从绿色仓库中删除其他 devs 分支。我的错。在我看来，有两种方法可以解决这个问题：

一、停止在green repo中创建dev分支，使用CI来实际整合变更：

从开发个人仓库更改后，CI 应检查此更改，从绿色仓库拉出一个众所周知的集成分支，将开发分支合并到其中并编译。如果成功，则将更改推回绿色回购

二、将 CI repos 注册为绿色 repo 中的遥控器，在绿色 repo 端使用 post-receive hook 来触发`git remote prune *`。这将有效地删除从每个遥控器的 CI 存储库中删除的所有分支。

我希望这会有所帮助！

# javascript - 从多个项目中获取平均值

> ID：12921277
> 
> 赞同：0
> 
> 时间：2012-10-16T18:37:10.617
> 
> 标签：javascript

假设我有一个这样的列表

```
[name1, number1], [name2, number2], [name3, number 3] 
```

例如

```
[John, 86], [Joe, 94], [bob, 45], [andy, 34] 
```

我正在尝试打印出 80 号以上的每个人并获得平均值。所以在这种情况下我想输出

```
John Joe 90 
```

我可以用来执行此操作的最简单的结构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:44:14.077

如果你有一个数组数组，每个数组有两个元素，第一个是名字，第二个是年龄，你可以这样表示：

```
var people = [["John", 86], ["Joe", 90], ["Bob", 45], ["Andy", 34]]; 
```

你可以把 80 岁以上的人带上，得到他们的名字列表，然后平均他们的年龄，如下所示：

```
var sum = 0;
var length = 0;
var names = [];
for(var i = 0; i < people.length; i++) {
  var person = people[i];
  if(person[1] >= 80) {
    sum += person[1];
    length++;
    names.push(person[0]);
  }
}
alert(names.join(" "));  //alerts "John Joe"
alert(sum / length);     //alerts 88 
```

[你可以在这个 jsFiddle 页面上](http://jsfiddle.net/LVcLy/)看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:44:16.507

这看起来像一个数组数组。您可以做的是遍历父数组，然后检查每个嵌套数组。如果嵌套数组在第二个点 ( ) 中包含大于 80 的分数，`[1]`那么您可以将该分数添加到总分中，并将第一个点 ( `[0]`) 中的名称添加到字符串中。添加完所有内容后，将总数除以添加数，并将其放在字符串的末尾，其中包含名称。

```
function GetNameAverageString(numberOfUsers,arrayOfData){
 var runningCount = 0;//number of users added to return string
 var total = 0;//total of scores from added users
 var names = "";//return string which will contain names and average
 for( var nestedArray in arrayOfData ){
  if( parseInt(arrayOfData[nestedArray][1]) < 81 ) continue;//only scores over 80
  names += arrayOfData[nestedArray][0] + " ";//append the name to the return string
  runningCount++;//add to the count of users recorded
  total += parseInt(arrayOfData[nestedArray][1]);//add to the score total
 }
 var average = total / runningCount;//calculate average score based on users added
 names += average.toString();//append the score to the end of the names
 return names;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:44:52.950

```
var dataArray = [["John", 86], ["Joe", 94], ["Bob", 45], ["Andy", 34]];
var count = 0;
var total = 0;
var peopleOverEighty = "";
for(var i = 0; i < dataArray.length; i++) {
  if(dataArray[i][1] > 80) {
    count++;
    total += dataArray[i][1];
    peopleOverEighty += dataArray[i][0] + " ";
  }
}
alert(peopleOverEighty + " " + (total/count)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:14:25.670

> *“我能用什么最简单的结构来做到这一点？”*

`Array.prototype.reduce`是为了这个：

```
var arr = [["John", 86], ["Joe", 94], ["bob", 45], ["andy", 34]],
    result;
(result = arr.reduce(function(ret, arr) {
    if (arr[1] >= 80) {
        ret[0].push(arr[0]);
        ret[1] += arr[1];
    }
    return ret;
}, [[], 0]))[1] /= result[0].length; 
```

您可以从 MDN 获得`.reduce()`shim。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T18:46:40.003

你似乎有这样的数据结构：

```
var data = [[john, 86], [joe, 94], [bob, 45], [andy, 34]]; 
```

你想过滤掉80岁以下的所有人：

```
data = data.filter(function(value,index,array){return (value[1]<80);}); 
```

并获得平均值：

```
var total = 0;
for(var i = 0; i < data.length ; i++){
    total += data[i];
}
avg = total/data.length; 
```

这是你要求的吗？

# html - 当存在带有链接顶部的文本时如何使图像可链接

> ID：12921278
> 
> 赞同：0
> 
> 时间：2012-10-16T18:37:12.800
> 
> 标签：html, css

[我的项目需求与我之前的帖子](https://stackoverflow.com/questions/12907384/how-to-make-an-image-with-text-button-on-top-linkable)有所不同。

我现在有一个包含图像的 div，并且内容（带有链接的文本）覆盖在上面。内容与图像具有相同的尺寸。我现在的问题是我无法单击分配给图像的链接。我相信这是因为内容隐藏了背景链接。

[http://jsfiddle.net/2mjne/1/](http://jsfiddle.net/2mjne/1/)

HTML

```
<div class="ad">
    <img src="http://www.placekitten.com/320/200">
    <a href="#">  
        <div class="content">
             text
             <a class="link" href="">link</a>
        </div>
    </a>
</div> 
```

CSS

```
.ad {
    position: relative;
    height: 200px;
    width: 320px;
}
.content {
    position: absolute;
    top: 0;
    height: 200px;
    width: 320px;
}
.link {
    visibility: hidden;
} 
```

JS

```
$(document).ready(function() {
    $('.content').mouseover(function() {
        $(this).find('.link').css('visibility', 'visible');
    });
    $('.content').mouseout(function() {
        $(this).find('.link').css('visibility', 'hidden');
    });
    $('a').click(function() {
        console.log('a clicked');
    });
    $('.link').click(function() {
        console.log('button clicked');
    });
}); 
```

**编辑：**我的模块中有两个不同的链接。一个链接来自背景图片，另一个链接`a`来自`.class`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:41:15.297

您的链接未分配给图片...将您的开始标签移到`img`:

```
<div class="ad">
    <a href="#">
        <img src="http://www.placekitten.com/320/200" />                
        <div class="content">              
            text              
            <a class="link" href="#">link</a>        
        </div>     
    </a> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:34:39.957

这是我的解决方案。我唯一遇到的问题是，您将鼠标悬停在“喵”左侧和“我”一词下方的文本区域上，您会注意到您仍在文本链接区域而不是背景链接区域。这是因为文本链接仍然对该空间具有管辖权。我试图弄清楚如何摆脱它。

[http://jsfiddle.net/WHpMr/](http://jsfiddle.net/WHpMr/)

![在此处输入图像描述](../Images/5a8c1b2f2198f7674db24f35995d777e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:37:47.557

如果图像顶部的文本区域与图像大小相同，则鼠标无法到达图像，因此用户/鼠标组合不存在该链接。

另外，请记住，用户不希望链接在单词之间的空白处发生变化，因此文本链接应该按预期工作。

所以你的解决方案可能是这样的：

检测鼠标的点击，按下鼠标时，向用户提供两个选项，一个用于每个目的地，以及一个简短而清晰的解释。是一种不常见的方式，但它会起作用。

在页面中显示某种图例，提及所有隐藏的链接和键盘访问。您可以使用 accesskey 属性和 JS 来完成这项工作。

再见

# python - Python中的unittest属性是否可变？

> ID：12921279
> 
> 赞同：2
> 
> 时间：2012-10-16T18:37:17.510
> 
> 标签：python, unit-testing

假设我有这个集成测试

```
class TestClass(unittest.TestCase):
    @classmethod
    def setUpClass(cls):
        cls.key = '123'

    def test_01_create_acc(self):
       user = create_account(...)
       self.key = user.key

    def test_02_check_account(self):
       user = check_account(..)
       self.assertEqual(self.key, user.key) 
```

看起来该属性`self.key`是不可变的。它与旧值保持一致`setUpClass`。但不是`setUpClass`只调用一次吗？

帐户功能出于安全原因随机创建一个密钥，因此不允许我传递我的密钥。它返回密钥，所以我需要修改该属性。我可以吗？

看起来每个`test_`案例都是孤立的。

```
my_gloabl = None

def setUpClass(cls):
    cls.key = my_global 
```

如果我`my_global`在 test1 中更改，test2 将得到`None`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:44:03.970

类只设置一次。但是每个测试方法实际上是从该测试的不同实例调用的。

您可以使用该函数来演示这一点，该`id`函数将为每个对象返回不同的数字：

```
import unittest

class TestClass(unittest.TestCase):
    @classmethod
    def setUpClass(cls):
        print "setup"

    def test_01_create_acc(self):
        print id(self)

    def test_02_check_account(self):
        print id(self)

unittest.main() 
```

在我的电脑上，打印出来的是：

```
setup
4300479824
.4300479888 
```

Note how the `setup` method was called only once, *but* the id of the instance for test1 and test2 are different.

# ruby-on-rails - 如何允许用户上传到 s3，但不使用自己的服务器资源

> ID：12921280
> 
> 赞同：1
> 
> 时间：2012-10-16T18:37:23.900
> 
> 标签：ruby-on-rails, amazon-s3

怎么可能允许用户在网站上上传图片，但实际的上传完全是在亚马逊的服务器上完成的（以免给自己的服务器带来上传吞吐量的负担）。

有人可以解释这是如何执行的吗？

即用户想要上传图像，而不是将文件流式传输到我的服务器，然后从我的服务器到亚马逊的 s3 服务，它完全绕过我的服务器并将其发送到亚马逊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:08:32.737

您可以查看亚马逊提供的[这些文档。](http://aws.amazon.com/articles/1434?_encoding=UTF8&jiveRedirect=1)

您可以使用 SWF 上传器或[此 gem](https://github.com/nathancolgate/s3-swf-upload-plugin)来实现该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:13:23.137

[CarrierWave](https://github.com/jnicklas/carrierwave)可以与[CarrierWaveDirect](https://github.com/dwilkie/carrierwave_direct)一起使用，将图像直接上传到 S3。这也将允许您在后台作业中处理图像。

但是，如果您想完全消除测功机的上传和处理负担，请查看[Cloudinary](http://cloudinary.com/)，它的独特之处在于它在其服务器上进行所有图像处理并为它们提供存储。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T19:04:01.643

如果您使用回形针不能执行以下操作？

在配置中创建一个 s3.yml 文件

```
development:
  bucket: bucket-dev
  access_key_id: xxx
  secret_access_key: xxx
test:
  bucket: bucket-test
  access_key_id: xxx
  secret_access_key: xxx
production:
  bucket: bucket-pro
  access_key_id: xxx
  secret_access_key: xxx

#paperclip
has_attached_file :photo,
  :styles => {
   :thumb=> "100x100#",
   :small  => "400x400>" },
   :storage => :s3,
   :s3_credentials => "#{RAILS_ROOT}/config/s3.yml",
   :path => "/:style/:id/:filename" 
```

# c - 什么是 MsgPack 'zone'

> ID：12921281
> 
> 赞同：7
> 
> 时间：2012-10-16T18:37:30.397
> 
> 标签：c, msgpack

我在[MsgPack C 标头](https://github.com/msgpack/msgpack/blob/master/cpp/src/msgpack/zone.h)中看到了对“区域”的引用，但找不到关于它是什么或它的用途的文档。它是什么？此外，C API 的函数文档在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:26:27.610

`msgpack_zone`是用于解包时内存管理和生命周期的内部结构。如果您使用标准的高级接口进行[解包](http://wiki.msgpack.org/display/MSGPACK/QuickStart+for+C+Language#QuickStartforCLanguage-Simpleprogramwithaloop)或替代[流](http://wiki.msgpack.org/display/MSGPACK/QuickStart+for+C+Language#QuickStartforCLanguage-Streamingfeature)版本，我会说您永远不必与它交互。

据我所知，没有详细的文档：相反，您应该参考提供方便的代码示例以实现常见任务的测试套件，例如，请参阅`pack_unpack_c.cc`和`streaming_c.cc`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-13T19:55:07.513

据我所知，它是一种仅移动类型，用于存储 a 的实际数据`msgpack::object`。它很可能打算成为一个实现细节，但它实际上有时会泄漏到用户的代码中。例如，任何时候你想`msgpack::object`在 lambda 中捕获 a，你也必须捕获`msgpack::zone`对象。有时您不能使用移动捕获（例如，在某些情况下，asio 处理程序只会采用可复制的处理程序，或者您的编译器不支持该功能）。要解决此问题，您可以：

```
msgpack::unpacked r;
while (pac_.next(&r)) {
   auto msg = result.get();
   io_->post([this, msg, z = std::shared_ptr<msgpack::zone>(r.zone().release())]() {
                // msg is valid here            
             }));
} 
```

# css - twitter 小部件和 typekit 字体未在 Firefox 中加载

> ID：12921284
> 
> 赞同：0
> 
> 时间：2012-10-16T18:37:48.470
> 
> 标签：css, firefox, twitter, typekit

刚刚完成我的网站[www.petersalvato.com](http://www.petersalvato.com)

由于某种原因，twitter 小部件和 typekit 字体没有在 firefox 中加载，但在大多数其他浏览器中看起来还不错。

我在旧版本的 IE 中也遇​​到了导航问题。

任何帮助或建议阅读以解决这些问题将不胜感激！

/p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:16:28.383

Twitter 小部件和 typekit 字体似乎可以在我的浏览器上运行。

IE7 或更低版本的导航并不奇怪。

首先，对于ie6，height = min-height。所以你不能限制元素的高度。

然后 ie7 上的 position:relative 似乎将项目放在前面（使它们没有部分隐藏）。

我建议您为 ie6/7 添加条件 css。

从. `position:relative`_ 从. _`#nav ul li a`
`height:0.5em;``#nav ul li`

效果与 ie8+/ff/chrome 不同，但至少看起来*不那么糟糕*。

# python - 在一段时间内有条件

> ID：12921286
> 
> 赞同：2
> 
> 时间：2012-10-16T18:38:00.840
> 
> 标签：python, datetime, timedelta

我希望在 10 分钟的时间内比较两个值。如果 A < B 持续 10 分钟，则设置 C 否则什么也不做。

```
from datetime import datetime
curr = datetime.now()
print (curr)
Curr_Plus_Ten = datetime.now() + timedelta(minutes=10)
print (Curr_Plus_Ten) 
```

上面的输出只是 2012-10-16 11:37:55.224999 和 2012-10-16 11:47:55.224999

我想我会使用当前时间和当前时间 + 10 分钟来实现正确的比较持续时间，但是我不知道如何将时间与 If 或 While 结合使用来进行实际比较。A 和 B 都是整数，而 C 是一个布尔值，根据比较结果为真或假。任何帮助将不胜感激。

谢谢，

-标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:13:38.617

也许最简单的解决方案是一个带有睡眠间隔的阻塞 while 循环。请注意，这仅在您的 A 值实际上可以在两者之间更改时才有效（例如，如果它是 SQL 查询或类似查询的结果）。

```
import datetime
import time

def getA():
  import random
  return random.random()

def getB():
  return .01

checkTime = datetime.timedelta(minutes=10)
checkIntervalInSecs = .5

c = False
timeToStop = datetime.datetime.now() + checkTime
while(datetime.datetime.now() < timeToStop):
  if getA() < getB():
    c = True
    break
  time.sleep(checkIntervalInSecs)

print c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:07:17.530

我相信这就是您正在寻找的东西（或类似的东西），这应该能够帮助您解决当前遇到的问题。

```
import threading,random,time
results=[]
a=2
b=3
def check_values():
    if a<b:
        results.append("a<b")
    else:
        results.append("a>=b")
    print "Results-> "+",".join(str(x) for x in results)
check=Timer(30.0,check_values)
check.start()
try:
    while True:
        case=random.randrange(0,100)
        if case>=50:
            a+=1
        else:
            b+=1
        time.sleep(2)
except KeyboardInterrupt:
    check.stop()
    print "Final Results-> "+",".join(str(x) for x in results)
    exit(0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:24:50.957

您可以使用基于属性的方法，如下所示：

```
#a.py
import sys
class Test(object):
    def __init__(self):
        self._a = 0

    @property
    def a(self):
        return self._a

    @a.setter
    def a(self, value):
        self._a = value
        print "New 'a' is: %s" % value
        ######## YOU CAN TEST HERE IF A > B OR WHATEVER ########

sys.modules[__name__] = Test() 
```

然后：

```
>>>import a
>>>a.a
0
>>>a.a = 10
New 'a' is: 10
>>>a.a
10
>>>a.a = 100
New 'a' is: 100 
```

这有点hackish，你必须明确使用aa，但它有效。

# c++ - 简单的 OpenCL 内核在输出图像中生成垂直条而不是纯色。为什么？

> ID：12921288
> 
> 赞同：1
> 
> 时间：2012-10-16T18:38:07.683
> 
> 标签：c++, opencl, cimg

我正在尝试编写图像处理 OpenCL 应用程序，但我的问题是任何更改输入图像的尝试都会产生看起来像垂直条的伪影。如果我复制图像像素而不更改它们，则不会发生这种情况。因此，例如，这一行会产生工件：

```
pixel = (uint4)(image1_pixel.x,
                image1_pixel.y,
                image1_pixel.z,
                255); 
```

...但是这个按预期工作：

```
pixel = (uint4)(image1_pixel.x,
                image1_pixel.y,
                image1_pixel.z,
                image1_pixel.w); 
```

[输入](http://science.su/stuff/so/opencl/2012-10-16/input.png)是不透明的 32 位 PNG 图像，所以我希望两行代码都能产生相同的结果。然而，实际上，只有第二行按预期工作。第一行给出[了 artifacts 的输出](http://science.su/stuff/so/opencl/2012-10-16/output.png)。

这是我的内核：

```
__constant sampler_t sampler = CLK_NORMALIZED_COORDS_FALSE |
                              CLK_ADDRESS_CLAMP |
                              CLK_FILTER_NEAREST;

__kernel void test(__read_only image2d_t image1,
                  __write_only image2d_t out) {
  const int2 pos = (int2)(get_global_id(0), get_global_id(1) );
  uint4 image1_pixel = read_imageui(image1, sampler, pos);
  uint4 pixel = (uint4)(image1_pixel.x,
                        image1_pixel.y,
                        image1_pixel.z,
                        255);
  write_imageui(out, pos, pixel);
} 
```

这是 main.cpp 代码的相关部分：

```
 CImg<unsigned char> image1("../input.png");
  ...
  Image2D clImage1 = Image2D(context,
    CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR,
    ImageFormat(CL_RGBA, CL_UNSIGNED_INT8),
    image1.width(), image1.height(), 0, image1.data() );
  Image2D clResult = Image2D(context, CL_MEM_WRITE_ONLY,
    ImageFormat(CL_RGBA, CL_UNSIGNED_INT8),
    image1.width(), image1.height(), 0, NULL);
  Kernel test = Kernel(program, "test");
  test.setArg(0, clImage1); test.setArg(1, clResult);
  Event kernel_event, read_event;
  queue.enqueueNDRangeKernel(test, NullRange,
    NDRange(image1.width(), image1.height() ),
    NullRange, NULL, &kernel_event);
  cl::size_t<3> origin;
  origin.push_back(0); origin.push_back(0); origin.push_back(0);
  cl::size_t<3> region;
  region.push_back(image1.width() );
  region.push_back(image1.height() ); region.push_back(1);
  queue.enqueueReadImage(clResult, CL_TRUE,
                         origin, region, 0, 0,
                         image1.data(), NULL, NULL);
  kernel_event.wait();
  image1.save("../output.png"); 
```

[这里](http://science.su/stuff/so/opencl/2012-10-16/test.rar)可以下载我的测试应用程序的完整源代码*（它包含 30 行以下的简短 main.cpp、CMakeLists.txt、readme.txt 解释如何编译和运行它、输入图像和内核）*。我使用 CImg 库来加载和保存图像。我仔细检查了输入是否以 32 位 RGBA 图像打开。我尝试使用 AMD 或 NVidia SDK 运行内核并得到相同的结果。

知道为什么我会得到意想不到的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T12:18:39.930

CImg 使用平面格式，而 OpenCL 的 image2d_t 期望交错（例如平面是：R1R2R3R4R5R6...G1G2G3G4G5G6...B1B2B3B4B5B6...，交错是：R1G1B1R2G2B2R3G3B3...）当您复制像素而不改变它们时，平面格式不会丢失并且它可以工作，但是如果您开始修改图像的一个组件，您实际上将修改像素的所有组件，从而修改黑度，因为这个平面/交错问题。

如果您想坚持使用 CImg，您可以在将图像发送到设备之前对图像进行多路复用：

```
CImg<unsigned int> muxRGBA(const CImg<unsigned int>& pic)
{
    assert( pic.spectrum() == 3 );
    CImg<float> mux(pic.width()*4,pic.height(),pic.depth(),1);

    cimg_forXYZ(pic,x,y,z){    
        for(int k=0; k<3; k++) {
            mux(x*4+k,y,z,0) = pic(x,y,z,k);
        }
        mux(x*4+3,y,z,0) = 1.0f; // alpha channel
    }
    return mux;
} 
```

然后在处理后将其解复用，因此您仍然可以使用 CImg 显示/保存它：

```
CImg<unsigned int> demuxRGBA(const CImg<unsigned int>& pic)
{
    assert( pic.spectrum()==1 );
    assert( pic.width()%4 == 0 );
    CImg<float> demux(pic.width()/4,pic.height(),pic.depth(),3);

    cimg_forXYZ(demux,x,y,z) {
        for(int k=0; k<3; k++) {
            demux(x,y,z,k) = pic(x*4+k,y,z,0);
        }
    }
    return demux;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T04:16:54.967

内核是正确的，但 CImg 似乎做错了什么，所以在这种情况下使用它是个坏主意。相反，我使用了 Magick++。它不像 CImg 那样简单，但更可靠且有效。

这就是我从文件中读取图像并将其转换为 RGBA 格式的方式，因此我可以将它与 cl::Image2D 一起使用：

```
Magick::Image image1;
image1.read("input1/0.png");
long image1_size = 4 * image1.rows() * image1.columns();
uint8_t *image1_pixels = new uint8_t[image1_size];
image1.write(0, 0, image1.columns(), image1.rows(),
             "RGBA", CharPixel, image1_pixels);
...
Image2D clImage1 = Image2D(context,
  CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR,
  ImageFormat(CL_RGBA, CL_UNSIGNED_INT8),
  image1.columns(), image1.rows(), 0, image1_pixels); 
```

这就是我将结果写入文件的方式：

```
queue.enqueueReadImage(clResult, CL_TRUE,
                       origin, region, 0, 0,
                       image1_pixels, NULL, NULL);
image1.read(image1.columns(), image1.rows(),
            "RGBA", CharPixel, image1_pixels);
image1.write("../output.png"); 
```

[这里](http://science.su/stuff/so/opencl/2012-10-27/test.7z)可以下载完整的源代码。

# ios - Phonegap 2.1.0 Cordova/CDVViewController.h 文件未找到

> ID：12921295
> 
> 赞同：4
> 
> 时间：2012-10-16T18:38:25.473
> 
> 标签：ios, cordova

我已经安装了 Xcode 4.5（没有安装以前的 phonegap 版本）。我已经通过 Phonegap 教程下载、提取和创建项目：http: [//docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

在终端命令之后：**./create myproject ~/Desktop/myproject com.test.myproject**我已经成功创建了结构。

比我启动 xcode 并想玩这个示例项目。Xcode 构建失败并说：

**找不到词法或处理器问题“Cordova/CDVViewController.h”文件**

我试图将这个丢失的标题添加到类文件夹中，修复了导入语法，但仍然是同样的问题。

有人解决了这个问题吗？/如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T18:28:19.960

经过多次尝试，我决定阅读**Readme.md并使用****./update_cordova_subproject**解决问题！

使用创建项目：

```
./create ~/Desktop/project com.example.project project 
```

更新科尔多瓦子项目参考：

```
./update_cordova_subproject ~/Desktop/project/project.xcodeproj 
```

## 现在构建成功！

# iphone - CFNetwork 读取 http 标头 Transfer-Encoding Identity 但wireshark 显示分块

> ID：12921300
> 
> 赞同：2
> 
> 时间：2012-10-16T18:38:35.420
> 
> 标签：iphone, http, http-headers, chunked-encoding, cfnetwork

我正在使用 CFNetwork 读取标头，并尝试读取我的请求是什么类型的“传输编码”。应该是“分块” Wireshark 显示“Transfer-Encoding: chunked”的正确请求，但使用 CFNetwork 的实际代码将请求标头重新定义为“Transfer-Encoding: Identity”

有人知道为什么会这样吗？

这是我读取标题的代码：

```
if (r->_headers) {
        CFStringRef header_return = CFStringCreateWithFormat (kCFAllocatorDefault, NULL, CFSTR("%@: %@\r\n"), key, value);
        if (header_return) {            
            char temp[256];
            CFStringGetCString(header_return, temp, sizeof(temp), kCFStringEncodingUTF8);

            char *trans_enc = NULL;
            if (pico_http_internal_native_header_get(temp, "Transfer-Encoding:", &trans_enc)) {
                if (strcmp(trans_enc, "chunked") == 0) {  // <-- This always says "Identity"
                    r->_chunked = true; // Never hit, but wireshark shows it would  be correct
                }
            }

            r->_headers(r->_context, temp, strlen(temp));
            pico_cfrelease(header_return);
        }
    } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:26:38.507

我使用以下逻辑来确定它是否被分块：

```
// response header info
    if(CFHTTPMessageIsHeaderComplete(cf_response)) {
        CFDictionaryRef headers = CFHTTPMessageCopyAllHeaderFields(cf_response);
        if (headers) {
            CFDictionaryApplyFunction(headers, pico_http_internal_cfnetwork_header_apply_callback, r);
            if((CFDictionaryContainsKey(headers, CFSTR("Content-Length")) == false) && (CFDictionaryContainsKey(headers, CFSTR("Transfer-Encoding")) == true)
               && (CFDictionaryContainsValue(headers, CFSTR("Keep-Alive")) == true)) {
                r->_chunked = true;
                }
     } 
```

基本上，如果标头中没有“Content-Length”，但标头报告“Transfer-Encoding”，并且报告“Keep-Alive”，则它是一个分块响应。这些是分块响应和非分块响应之间的主要区别。分块响应不使用“Content-Length”，但设置了“Transfer-Encoding”和“Keep-Alive”。

# android - Android：按下按钮后更改图像并保持不变

> ID：12921301
> 
> 赞同：-2
> 
> 时间：2012-10-16T18:38:35.570
> 
> 标签：android, android-layout, android-widget

我希望按钮上的图像在单击后更改。这意味着即使单击了按钮，一旦新图像应该保留

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:43:09.930

做

`yourButton.setOnClickListener(new View.OnClickListener() { yourButton.setBackgroundResource(R.drawable.yourBackgroundImage); });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:09:30.363

1.您需要为您的按钮定义状态，并定义每个状态对应的背景：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_pressed"
          android:state_pressed="true" />
    <item android:drawable="@drawable/button_focused"
          android:state_focused="true" />
    <item android:drawable="@drawable/button_default" />
</selector> 
```

2.改变按钮的状态，一旦它被点击

```
button.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                 button.setEnabled(true);
             }
         }); 
```

# wordpress - 将子域重定向到 wordpress 内容

> ID：12921309
> 
> 赞同：2
> 
> 时间：2012-10-16T18:39:15.107
> 
> 标签：wordpress, .htaccess, redirect, subdomain

我在域 www.mywpsite.com 上有一个单一的 Wordpress 应用程序。

我有静态页面：

```
a. www.mywpsite.com/subsite
b. www.mywpsite.com/subsite/child1
c. www.mywpsite.com/subsite/child2 
```

并且需要使用这样的子域分别处理该内容：

```
a. subsite.mywpsite.com
b. subsite.mywpsite.com/child1
c. subsite.mywpsite.com/child2 
```

注意子域没有物理结构，只是别名的一种方式，一个文档根目录下只有一个Wordpress安装。另外，我有几页，只有一个子域可以使用，因此“逐案”解决方案是有效的。

最终，我还将对一些动态内容使用相同的子域：

```
d. www.mywpsite.com/category/subsitenews => subsite.mywpsite.com/news 
```

最后，如果可能的话，我需要保留在地址栏中的 url 是使用子域的那个，我的意思是：

1.  用户键入 subsite.mywpsite.com/some-static-or-dynamic-content。
2.  重定向到适当的 wordpress 内容，并传递内容。
3.  用户中的 url 使用子域仍然相同，而不是重定向的 url。

我怎样才能做到这一点？

我想我必须使用 .htaccess 但我不知道它是如何工作的。我不确定我发现的其他问题是否与我的问题有关。

[重定向子域并保留 url 结构](https://stackoverflow.com/questions/7475249/redirect-subdomain-and-retain-url-structure)

[.htaccess 重定向 ~ [fake-subdomain.domain.com/*] 到 [domain.com/*]](https://stackoverflow.com/questions/11353139/htaccess-redirect-fake-subdomain-domain-com-to-domain-com)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:46:13.047

如果子域与主域不在同一台服务器上且不在同一文档根目录下，则您需要使用反向代理，或`P`使用 mod_rewrite 的标志。您可以尝试将这些规则添加到文档根目录中的 htaccess 文件中，最好在可能已经存在的任何规则之上：

```
RewriteEngine
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/([^/]+)/?$ http://$1.mywpsite.com/$2 [L,P]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/?$ http://$1.mywpsite.com/ [L,P] 
```

这里的问题是动态内容，即 wordpress 动态生成的内容，也将被发送到子域。没有办法在 htaccess 级别上区分什么是有效的动态内容，什么不是。为了检查这一点，您需要在 wordpress CMS 中执行此操作，这可能是某种方式，但它需要自定义代码或至少一个插件，并且可能需要自定义插件。

# java - OOP：如何强制扩展类提供私有方法？

> ID：12921318
> 
> 赞同：0
> 
> 时间：2012-10-16T18:39:51.017
> 
> 标签：java, oop

**示例：**我如何将进一步的SpecificProcessing 方法设为私有方法？

**原因：**我希望能够新建一个 B 或 C 类型的对象，并且只有 doStuff() 对程序员可见。同时 B 级和 C 级提供附加功能

```
abstract class A
{
  protected abstract void furtherSpecificProcessing();

  //concrete method utilizing abstract method
  public void doStuff()
  { 
   //busy code
   furtherSpecificProcessing();
   //more busy code
  }

public class B extends A
{
  public void furtherSpecificProcessing
  {
    //Class B specific processing
  }
}

public class C extends A
{
 public void furtherSpecificProcessing
 {
   //Class C specific processing
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:41:18.933

我不认为你可以强制返回类型是私有的覆盖方法。

> 访问权限不能更严格。可以少一些限制。

我建议阅读[方法覆盖规则](http://code.google.com/p/learn-java/wiki/OverridenMethod)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:50:26.570

在扩展类中覆盖`furtherSpecificProcessing()`为受保护的，而不是公共的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:51:31.083

在 B 类和 C 类中将方法声明为受保护而不是公共的。比您需要的方法更有效：

```
B b = new B();
b.doStuff(); // Will do stuff
b.furtherSpecificProcessing(); // Will not compile 
```

C类的实例也是如此

# c# - 没有玻璃的扩展标题栏

> ID：12921322
> 
> 赞同：-1
> 
> 时间：2012-10-16T18:39:58.993
> 
> 标签：c#, user-interface, interface, dwm

我看到 Windows 7 向导在不需要 Aero Glass 的情况下扩展了标题栏。看这个：

![没有航空玻璃](../Images/3f5511c680eda969b3b3546df68c2863.png)

![带航空玻璃](../Images/91be78a56b42bd679f8669074704623f.png)

我让我的应用程序与 Aero Glass 一起工作，但是没有它怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:39:29.160

我尚未对此进行测试，但我认为它会起作用，如果您同意，请将其标记为答案：

```
[DllImport("uxtheme")]
static extern int DrawThemeBackground(IntPtr hTheme, IntPtr hdc, int iPartId, int iStateId, ref RECT pRect, ref RECT pClipRect); 
```

这个方法有效，看[这个](http://ciantic.blogspot.ro/2009_10_01_archive.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T18:44:49.520

你不应该做任何事情。使用 Basic 主题时，DWM 仍在运行，只是没有进行任何加速渲染。

# visual-studio - 设置 Inno 以运行 office 插件安装程序并等待它

> ID：12921326
> 
> 赞同：3
> 
> 时间：2012-10-16T18:40:18.567
> 
> 标签：visual-studio, vsto, inno-setup

我正在准备一个 inno 设置来同时安装一个 windows 窗体应用程序和一个 office 插件。我在安装期间部署了所有 Windows 窗体文件（exe 和 dll）和 office 插件部署文件，一切正常。但最后，当office插件“setup.exe”仍在运行时，我得到了“安装完成”屏幕。我不关心在后台看到其他安装的运行或弹出窗口，但我不喜欢在其他应用程序运行时 inno 设置说“完成”。

这是我的代码：

```
[Run]
Filename: "{app}\AddIn\Deploy\setup.exe"; Flags: waituntilterminated runminimized 
Filename: "{app}\MyApp.exe"; Description: {cm:LaunchProgram,{cm:MyAppName}}; Flags: nowait postinstall 
```

所以，它不服从“runminimized”，无论如何我都很好......但它也不服从“waituntilterminated”，我很在意。

请注意，“AddIn\Deploy\setup.exe”是 Visual Studio 通过 office 插件的“发布”向导生成的文件。

如果我只能运行此代码，我会很高兴：

```
[code]
function PrepareToInstall(var NeedsRestart: Boolean): String;
var
  ResultCode : Integer;
begin

  if Exec(ExpandConstant('{app}\AddIn\Deploy\setup.exe'), '', '', SW_SHOW, ewWaitUntilTerminated, ResultCode) then
  begin
    Result := 'AddIn Installed';
  end
  else 
    Result := 'AddIn NOT Installed';

  NeedsRestart := false;
end; 
```

但是，我必须在主 inno 安装程序将文件复制到“AddIn\Deploy”目录之后立即运行......所以，我可能只需要正确的事件来覆盖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-19T10:15:50.997

您提交的代码可以增强为：

```
 [code]
    function PrepareToInstall(var NeedsRestart: Boolean): String;
    var
     ResultCode : Integer;
    begin
     // Your original line: 
     // if Exec(ExpandConstant('{app}\AddIn\Deploy\setup.exe'), '', '', SW_SHOW, ewWaitUntilTerminated, ResultCode) then
     if Exec(AddQuotes(ExpandConstant('{app}\AddIn\Deploy\setup.exe')), AddQuotes(ExpandConstant('{app}\AddIn\Deploy\')), '', SW_SHOW, ewWaitUntilTerminated, ResultCode) then
      begin
       Result := 'AddIn Installed';
      end
     else
      begin // <== 
       Result := 'AddIn NOT Installed';
      end; // <==
     NeedsRestart := false;
    end; 
```

{app} 可能包含空格，如果字符串包含空格，则 AddQuotes 函数会在字符串周围创建引号。在我看来，exec 函数就像一个快捷方式，所以给应用程序一个工作目录。因为我不知道您的 Setup.exe 的性质，所以我将此应用程序作为 workingdir 与应用程序所在的文件夹相同。

有点题外话：在最终版本中使用 SW_Hide。如果选择了除 SW_HIDE 以外的其他模式，则始终可以看到应用程序安装插件的结果：)

# css - 图片浮动问题

> ID：12921341
> 
> 赞同：0
> 
> 时间：2012-10-16T18:41:09.923
> 
> 标签：css, image, html, css-float

我正在做一个有趣的小项目，但在试图让 a`<div>`中的图像漂浮在 said 的右侧时遇到了一些麻烦`<div>`。问题是它似乎忽略了容器（`<div>`它所在的容器）并表现得好像它是父包装器的一部分。我想要发生的是包含元素根据其中的图像调整它的高度......我猜。一直在玩它，但没有任何运气。

**HTML**：

```
<div class="maincontentwrapper">
    <!--First body article on page-->
    <div class="contentpane">
    <img src="images/welcomethumb_small.jpg" alt="" id="infoimg" />
            Filler text. This is the only thing that<br />
            seems to change the height of this div's<br />
            border.
</div>

    <!--Second body article on page-->  
<div class="contentpane">
    Text goes here.
</div>
</div> 
```

**所有可见类的**CSS代码：****

 **```
.maincontentwrapper {margin: 10px 333px 10px 10px;}
.contentpane {border: solid 2px red;
          margin-bottom: 10px;
              padding: 4px 4px 4px 4px;
      text-indent: 1em;}
/* Thumbnail for first article on home page.
   Margins set to push image to align ignoring the container's
   border width and padding width. */
#infoimg {float: right;
      width: 145px;
      height: 150px;
      margin: -6px -6px 4px 4px;}
/* End Main Content Styles */ 
```

编辑：如果您需要网站链接以澄清问题所在，我当然可以添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:55:07.503

> 我想要发生的是包含元素根据其中的图像调整它的高度

您需要清除图像下方，如下所示：http: [//jsbin.com/iduvof/1/edit](http://jsbin.com/iduvof/1/edit)

有几种方法可以做到这一点，您可以在[此处](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)阅读更多信息。

我使用的方法是添加一个具有属性的额外 div `clear: both`。这可能不是最佳实践，因为它是非语义标记，但它很容易！**

# ruby-on-rails - 在 Rails 中检测多个 submit_tag 点击

> ID：12921343
> 
> 赞同：0
> 
> 时间：2012-10-16T18:41:10.787
> 
> 标签：ruby-on-rails, ruby, submit

> **可能重复：**
> [Ruby on Rails：如何让多个提交按钮转到不同的方法（可能使用 with_action？）](https://stackoverflow.com/questions/3086609/ruby-on-rails-how-to-have-multiple-submit-buttons-going-to-different-methods-m)

在一个表单中我有一些 submit_tags 并且在服务器端我必须检测哪个被点击了。这是我尝试过的，但不起作用：在服务器端，我只在参数中获得一个动作名称：

```
<%= form_tag controller_action_path(:id => @project.id), :method => :post do %>
    <% if @project_is_synced %>
        <%= submit_tag 'Update synchronization', :name => 'update' %>
        <%= submit_tag 'Stop synchronization', :name => 'stop' %>
    <% else %>
        <%= submit_tag 'Start synchronization', :name => 'start' %>
    <% end %>
<% end %> 
```

我只有`params[:action]`一个始终相同的当前动作名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:27:06.857

调试它的最简单方法是在本地运行它并查看通过的参数，或在您的操作中记录参数：

```
 if request.post?
    logger.warn "POST #{params}"

 end 
```

您已经命名了 submit_tags，因此每个按钮都有不同的名称，而不是默认名称“commit”，并且您必须检查名为“start”、“stop”或“update”的参数。

最简单的只是删除名称并检查 params[:commit] 的变化值，但是如果您不想更改视图，请使用它（显然替换渲染代码）：

```
 if params[:start]
    render :text => "start"
  elsif params[:update]
    render :text => "update"
  else
    render :text => "stop"
  end 
```

链接帖子中对答案的评论确实解决了这个问题，但我明白你为什么错过它。

# javascript - 在另一个页面上执行 javascript

> ID：12921345
> 
> 赞同：2
> 
> 时间：2012-10-16T18:41:17.037
> 
> 标签：javascript, browser

> **可能重复：**
> [浏览器选项卡/窗口之间的 Javascript 通信](https://stackoverflow.com/questions/4079280/javascript-communication-between-browser-tabs-windows)

如果我的限制是浏览器的功能并且我有两个网页，是否可以在一个页面上编写 javascript 来更改选项卡并在另一个页面上执行一些 javascript？

有没有办法让两个选项卡在服务器外部相互通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:43:49.827

您只能在以下情况下执行此操作：

1.  一个标签打开了另一个。
2.  两个页面都来自同一个域。

打开器选项卡只需要存储一个对从window.open()返回的窗口对象的引用，新的选项卡可以通过window.opener引用父级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:49:11.880

如果 HTML5`SharedWorkers`是一个选项，我会建议使用这些。

引用相同工作人员并具有正确回调的页面可以立即更新，无论它们是不同的页面还是不同的选项卡。只要它们在同一个浏览器中，它就可以工作。

这是一个教程：

[http://www.sitepoint.com/javascript-shared-web-workers-html5/](http://www.sitepoint.com/javascript-shared-web-workers-html5/)

# arrays - 是否可以在不循环的情况下用符合特定条件的行号填充数组？

> ID：12921350
> 
> 赞同：11
> 
> 时间：2012-10-16T18:41:55.013
> 
> 标签：arrays, vba, excel

我想用满足特定条件的行的行号填充 VBA 中的数组。我想要最快的方法（例如，类似`RowArray = index(valRange=valMatch).row`）

下面是（慢）范围循环的代码。

**`Current Code`**

```
Sub get_row_numbers()

Dim RowArray() As Long
Dim valRange As Range
Dim valMatch As String

Set valRange = ActiveSheet.Range("A1:A11")
valMatch = "aa"
ReDim RowArray(WorksheetFunction.CountIf(valRange, valMatch) - 1)

For Each c In valRange
    If c.Value = valMatch Then RowArray(x) = c.Row: x = x + 1
Next c    
End Sub 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T03:29:14.630

仍然是 Chris 的高效变体阵列的 2-3 倍左右，但该技术功能强大并且具有超出这个问题的应用

需要注意的一点是，`Application.Transpose`它仅限于 65536 个单元格，因此需要将更长的范围“分块”成碎片。

```
Sub GetEm()
Dim x
x = Filter(Application.Transpose(Application.Evaluate("=IF(A1:A50000=""aa"",ROW(A1:a50000),""x"")")), "x", False)
End Sub 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T18:50:59.003

首先将范围复制到一个变体数组，然后遍历该数组

```
Arr = rngval
For I = 1 to ubound(arr)
    If arr(I,1) = valMatch Then RowArray(x) = I: x = x + 1
Next 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T10:11:57.930

问题标题中有一个假设：循环解决方案很慢，非循环解决方案更快。因此，我进行了一些比较来检查这一点。

**测试用例**

我创建了一些包含 50,000 个样本和 50% 匹配值的样本数据。对于最快的方法，我创建了另外两个样本集，同样有 50,000 行，一个有 10% 的匹配行，另一个有 90% 的匹配行。

我在循环中对这些数据运行每个发布的方法，重复逻辑 10 次（所以时间总共处理 500,000 行）。

```
 50%        10%        90%  
ExactaBox        1300       1240       1350  ms
Scott Holtzman 415000         
John Bustos     12500       
Chris neilsen     310        310        310
Brettdj           970        970        970
OP               1530       1320       1700 
```

所以道德很清楚：仅仅因为它包含一个循环，并不会使它变慢。*访问工作表很*慢，因此您应该尽一切努力将其最小化。

**更新** 添加了对 Brettdj 评论的测试：单行代码

为了完整起见，这是我的解决方案

```
Sub GetRows()
    Dim valMatch As String
    Dim rData As Range
    Dim a() As Long, z As Variant
    Dim x As Long, i As Long
    Dim sCompare As String

    Set rData = Range("A1:A50000")
    z = rData
    ReDim a(1 To UBound(z, 1))
    x = 1
    sCompare = "aa"
    For i = 1 To UBound(z)
        If z(i, 1) = sCompare Then a(x) = i: x = x + 1
    Next
    ReDim Preserve a(1 To x - 1)    
End Sub 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-22T17:50:39.053

在其他人在这里提供的基础上，我将这两种方法与一些字符串操作结合起来，以获得包含所需匹配的任何给定范围的确切行号，**而无需循环**。

与您的代码不同的唯一说明是它`RowArray()`是一种`String`类型。但是，如果需要，您可以根据需要将数字转换为 Long 使用`CLng`。

```
Sub get_row_numbers()

Dim rowArray() As String, valRange As Range, valMatch As String
Dim wks As Worksheet, I As Long, strAddress As String    
Set wks = Sheets(1)
valMatch = "aa"

With wks    
    Set valRange = .Range("A1:A11")        
    Dim strCol As String
    strCol = Split(valRange.Address, "$")(1)
    '-> capture the column name of the evaluated range
        '-> NB -> the method below will fail if a multi column range is selected

    With valRange        
        If Not .Find(valMatch) Is Nothing Then
        '-> make sure valMatch exists, otherwise SpecialCells method will fail

            .AutoFilter 1, valMatch                    
            Set valRange = .SpecialCells(xlCellTypeVisible)
            '-> choose only cells where ValMatch is found

            strAddress = valRange.Address '-> capture address of found cells
            strAddress = Replace(Replace(strAddress, ":", ""), ",", "") '-> remove any commas and colons
            strAddress = Replace(strAddress, "$" & strCol & "$", ",") '-> replace $column$ with comma
            strAddress = Right(strAddress, Len(strAddress) - 1) '-> remove leading comma

            rowArray() = Split(strAddress, ",")

            '-> test print
            For I = 0 To UBound(rowArray())                    
                Debug.Print rowArray(I)                        
            Next

        End If 'If Not .Find(valMatch) Is Nothing Then            
    End With ' With valRange        
End With 'With wks

End Sub 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T07:35:32.200

您可能想查看[Find vs Match vs Variant Array](http://fastexcel.wordpress.com/2011/10/26/match-vs-find-vs-variant-array-vba-performance-shootout/)得出的结论是，除非命中密度非常低，否则变体数组方法是最快的。

但最快的方法仅适用于排序数据和精确匹配：使用二进制搜索查找第一次和最后一次出现，然后将该数据子集放入一个变体数组中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T05:52:56.653

您在示例中对范围进行了硬编码。右边有备用柱子吗？如果是这样，如果不匹配，您可以使用 0 填充右侧的单元格，或者如果匹配，则使用行号填充。然后将其拉入一个数组并过滤它。没有循环：

```
Sub NoLoop()

Dim valMatch As String
Dim rData As Excel.Range, rFormula As Excel.Range
Dim a As Variant, z As Variant

    Set rData = ThisWorkbook.Worksheets(1).Range("A1:A11") 'hard-coded in original example
    Set rFormula = ThisWorkbook.Worksheets(1).Range("B1:B11") ' I'm assuming this range is currently empty
    valMatch = "aa" 'hard-coded in original example

    'if it's a valid match, the cell will state its row number, otherwise 0
    rFormula.FormulaR1C1 = "=IF(RC[-1]=""" & valMatch & """,ROW(RC),0)"

    a = Application.Transpose(rFormula.Value)
    z = Filter(a, 0, False) 'filters out the zeroes, you're left with an array of valid row numbers

End Sub 
```

[我必须将来自 Excel Range 的一维数组中的](https://stackoverflow.com/questions/7649046/one-dimensional-array-from-excel-range)Jon49 归功于Application.Transpose 技巧以获得一维数组。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-27T09:57:05.803

大家，感谢您的个人意见。

ExactaBox，您的解决方案对我很有帮助。但是，通过公式返回 0 值有一个问题

`rFormula.FormulaR1C1= "=IF(RC[-1]=""" & valMatch & """,ROW(RC),0)".`

由于 VBA 过滤器函数通过进行字符串比较来过滤掉值，因此它也会过滤掉其中包含零的行号。例如有效的行号 20、30、40 等也应该被过滤掉，因为它们包含零，所以最好在公式中写一个字符串来代替 0，因此可以是：

`rFormula.FormulaR1C1= "=IF(RC[-1]=""" & valMatch & """,ROW(RC),""Valid"")"`

正如上面 brettdj 所建议的那样，他使用“x”字符串作为最后一个参数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-22T16:08:21.823

我仍然有一个循环，但只能通过必要的行来填充数组：

```
Sub get_row_numbers()

Dim RowArray() As Long
Dim valRange As Range
Dim valMatch As String

Set valRange = ActiveSheet.Range("A1:A11")
valMatch = "aa"
ReDim RowArray(WorksheetFunction.CountIf(valRange, valMatch) - 1)

Dim c As Range
Dim x As Integer
Set c = valRange.Find(What:=valMatch, LookIn:=xlFormulas, SearchOrder:=xlByRows, SearchDirection:=xlNext)

Do
  RowArray(x) = c.Row
  Set c = valRange.FindNext(after:=c)
  x = x + 1
Loop Until x = UBound(RowArray) + 1

End Sub 
```

# c# - 母版页 ASP.NET 4 中的按钮

> ID：12921352
> 
> 赞同：0
> 
> 时间：2012-10-16T18:42:06.770
> 
> 标签：c#, asp.net

每次我尝试向母版页添加按钮时，都会收到此错误：“按钮”类型的控件“Button1”必须放在带有 runat=server 的表单标记内。

PS：按钮位于带有 runat=server 的 div 标签内！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:43:14.820

它在`div`标签内。它必须在`form`标签内，如下所示：

```
<form runat="server">
 // button here
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:52:19.263

在正文标签内，您有一个像这样的表单标签

```
 <body>
    <form id="form1" runat="server">
    <div>
    </div>
    </form>
 </body> 
```

所有服务器控件都必须出现在一个`<form>`标记内，并且该`<form>`标记必须包含 runat="server" 属性。

[有关表单标签的更多信息..检查此页面](http://www.w3schools.com/aspnet/aspnet_forms.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:53:37.487

现在你可以了吗（如果你想保留你的`Div`）

```
<form Id="MyForm" runat="server">
      <div Id="MyDiv" runat="server">
         // Here your HTML.
      </div>
</form> 
```

这是因为在 ASP.NET 中，一个页面应该有一个`Form`带有`runat = "server"`标签的页面，而在母版页中我们保留此`Form`标签，在内容页面中我们保留其他必需的控件。

# javascript - filepicker.io 替代品

> ID：12921355
> 
> 赞同：4
> 
> 时间：2012-10-16T18:42:13.987
> 
> 标签：javascript, file-upload, filepicker.io

是否有任何 filepicker.io 替代方案可让您将文件上传到自己的服务器？

我们喜欢与 Dropbox、Google Drive 和 Office 365 进行某种集成

# python - python从派生类访问实例中的类变量

> ID：12921356
> 
> 赞同：2
> 
> 时间：2012-10-16T18:42:16.193
> 
> 标签：python, python-2.x

我经历了很多答案，但没有找到我理解的答案。这是一个基于我真实程序中的问题的测试程序。我想要一个可以更改的类变量，并将更改应用于类的所有实例，但不适用于类似的类，即使具有相同的形式。

可能很明显，我在第 3 行为 X 定义了一个类变量，在第 9 行为 Y 定义了一个类变量。我试图在第 23-25 行访问这些变量。

我的模型是

```
 #! /usr/bin/python -t
 class X:
      clsvar = "Animal"
      def show(self):
          clsvar
      def chg(self,creature):
          clsvar  = creature
 class Y:
      clsvar = "Plant"
      def show(self):
          clsvar
      def chg(self,creature):
          clsvar  = creature
 class A(X):
      pass
 class B(X):
      pass
 class C(Y):
      pass
 a = A()
 b = B()
 c = C()
 print "1 " + a.show()
 print "2 " + b.show()
 print "3 " + c.show()
 a.chg( "Dog")
 print "4 " + a.show()
 print "5 " + b.show()
 print "6 " + c.show() 
```

我的结果是

```
Traceback (most recent call last):
  File "180.py", line 23, in ?
    print "1 " + a.show()
  File "180.py", line 5, in show
    clsvar
NameError: global name 'clsvar' is not defined 
```

我原以为 clsvar 会出现在任何派生类中，并且不需要是全局的。我显然在这里很愚蠢，但我已经尝试了几十种方法而没有成功。

顺便说一句，我能够在 Ruby 中做到这一点。

```
 #! /usr/bin/ruby -w
 class X
      @@clsvar = "Animal"
      def self.show
          @@clsvar
      end
      def self.chg(creature)
          @@clsvar  = creature
      end
 end
 class Y
      @@clsvar = "Plant"
      def self.show
          @@clsvar
      end
      def self.chg(creature)
          @@clsvar  = creature
      end
 end
 class A < X
      A.show
 end
 class B < X
      B.show
 end
 class C < Y
      C.show
 end
 a = A
 b = B
 c = C
 puts "1 " + a.show 
 puts "2 " + b.show 
 puts "3 " + c.show 
 a.chg( "Dog")
 puts "4 " + a.show 
 puts "5 " + b.show 
 puts "6 " + c.show 
```

输出是：

```
1 Animal

2 Animal

3 Plant

4 Dog

5 Dog

6 Plant 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:00:12.507

要访问类变量，您必须这样做：

```
MyClass.clsvar 
```

甚至这样：

```
an_instance.clsvar 
```

后者仅在实例没有任何名为`clsvar`.(*)的实例变量时才有效

Python 不像 Java。考虑到，与 Java 不同，Python*确实*有全局变量。例如：

```
a = 1
class MyClass:
    a = 2
    def show(self):
        print(a) 
```

该`show`方法将打印`1`，因为它引用全局变量`a`，而不是`MyClass.a`。

* * *

(*) 对此的说明。可以访问`MyClass.var`使用`self.var`，不修改也没关系。但设置值**并不**等价。如果要设置类变量，则必须使用`MyClass.var = value`and not `an_instance.var = value`。后者将创建一个名为`var`value的新实例变量`value`，因此`MyClass.var`仍将具有旧值。

* * *

顺便说一句，我不了解 Ruby，但我认为`@@`语法用于访问类变量，所以这就是它起作用的原因。

最后，您的代码不正确。您可能希望`return`在这些方法中放置一些语句，否则`TypeError`执行时会得到一些 s。

# php - 将结果集均匀分布在几天内 PHP

> ID：12921359
> 
> 赞同：0
> 
> 时间：2012-10-16T18:42:26.443
> 
> 标签：php, arrays, datetime

我试图在任意天数内以非常具体的方式分散 3 个查询的结果。每个数组的每个结果代表 1 个电话，我想要每天总共 18 个电话。

我每天总共需要 18 个总结果，按以下方式细分：

```
8 $active_costco results
4 $inactive_costso results
3 $bashas results
3 $afs results

$active_costco returns 321 total results
$inactive_costco returns 119 total results 
$bashas returns 64 total results
$afs returns 47 results 
```

**我需要每天的结果总数为 18，因此如果没有更多的 $afs 或 $inactive_costco，请使用 $active_costcos 填写 18。**

这是我目前拥有的 php（它每天只将 active_costcos 分成 8 个）

```
 $active_costco = sql::results($query);

$inactive_costco = sql::results();

$bashas = sql::results("");

$afs = sql::results("");
$date = date('Y-m-d');
$str = 'INSERT pharmacy.dbo.hotlist (employee_id, store_id, follow_up_date, created_at, status, urgency)VALUES';
for ($i = 0; $i < count($active_costco); $i++)
{
    if ($i%8 == 0)
    {
        $date = date('Y-m-d', strtotime($date . '+1 Weekday'));
    }
    $str .= "('0CS',". $active_costco[$i]['id'] . ", '$date', '". date('Y-m-d H:m.s') . "', 1, 3)";
    $str .= ($i == count($active_costco)-1)? '': ',';
    $str .= '<br />';
}
echo $str; 
```

任何帮助，将不胜感激。谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:01:47.933

在花了一点时间之后，这是我想出的解决方案：

```
$str = 'INSERT pharmacy.dbo.hotlist (employee_id, store_id, follow_up_date, created_at, status, urgency)VALUES';
do 
{
    $date = date('Y-m-d', strtotime($date . " +1 Weekday"));
    $today = array();
    for ($i = 0; $i < 3; $i ++)
    {
        $basha = array_pop($bashas);
        $associated = array_pop($afs);
        if (!empty($basha))
            $today[] = $basha;
        if (!empty($associated))
            $today[] = $associated;
    }
    for ($i = 0; $i < 4; $i++)
    {
        $inactive = array_pop($inactive_costco);
        if (!empty($inactive))
            $today[] = $inactive;   
    }

    $count = 18 - count($today);
    for ($i = 0; $i < $count; $i++)
    {
        $active = array_pop($active_costco);
        if (!empty($active))
            $today[] = $active;
    }

    $calls_left = count($active_costco) + count($inactive_costco) + count($bashas) + count($afs);
    foreach ($today as $v)
    {
        echo "Store ID = " . $v['id'] . " Date = " . $date . "<br />";
    }
}while ($calls_left > 0); 
```

它遍历并从每个数组中弹出元素（指定的数字）。如果它的数组是空的（没有什么可以弹出），它不会添加任何东西。然后它计算今天数组中的调用次数，从 18 中减去，然后从 $active_costsco 中获取剩余的调用。

感谢所有投入的人。

# asp.net-mvc - ASP MVC SelectList() 名称连接

> ID：12921360
> 
> 赞同：1
> 
> 时间：2012-10-16T18:42:27.573
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我有以下有效的代码：

```
ViewBag.Resources = New SelectList(db1.Tbl_Resources, "Resource_ID", "Resource_FirstName") 
```

我不仅想显示名字，还想显示姓氏，所以我尝试了这个：

```
ViewBag.Resources = New SelectList(db1.Tbl_Resources, "Resource_ID", "Resource_FirstName" + " " + "Resource_LastName") 
```

但是，它不起作用，因为它似乎在寻找一个名为“ `Resource_FirstNameResource_LastName`.”的模型属性。如何连接这些以在 SelectList() 方法中使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T18:46:51.497

因为 Mvc 中的 SelectList 构造函数使用 dataTextField 参数和反射在运行时“拉”属性值，所以没有办法完成你在那里做的事情，但是，一个简单的解决方法

例如，在名为“Caption”的表类（如果使用 EF，则使用部分类）上正确创建一个新的只读。然后在 getter 中返回 Resource_FirstName" + " " + Resource_LastName

```
class db1.Tbl_Resources
{
    public string Caption { get {return Resource_FirstName + " " + Resource_LastName;}}
} 
```

然后在您的视图或助手中

```
New SelectList(db1.Tbl_Resources, "Resource_ID", "Caption"); 
```

至少我是这样处理这种情况的，这很常见。

# r - Rgraphviz 整洁布局

> ID：12921361
> 
> 赞同：2
> 
> 时间：2012-10-16T18:42:29.517
> 
> 标签：r, graphviz, neato

我正在尝试为我在 R 中构建的邻接矩阵创建一个集群图。我可以让它渲染图，但我不知道如何修改特定于neato的参数，所以图看起来不完全纠结。

这是我到目前为止所拥有的：

```
am.graph<-new("graphAM", adjMat=linkadj, edgemode="undirected")
plot(am.graph, "neato") 
```

在上述命令之间，您似乎应该使用[以下函数](http://rss.acs.unt.edu/Rdoc/library/Rgraphviz/html/layoutGraph.html)，但文档太稀少，我无法理解

# api - 带有 SHA512-hmac 签名的 REST 请求正文的 Coldfusion CFHTTP

> ID：12921362
> 
> 赞同：14
> 
> 时间：2012-10-16T18:42:29.710
> 
> 标签：api, encryption, coldfusion, signed, cfhttp

我正在尝试向 bitfloor.com 上的交易 API 发出签名请求（它是一个 REST API）

Bitfloor 给了我：

1）API密钥（即6bd2b780-00be-11e2-bde3-2837371c3c3a）

2）密钥（即oaFz62YpmbWiXwseMUSod53D8pOjdyVcweNYdiab/TSQqxk6IuemDvimNaQoA==）

**以下是 Bitfloor 提出请求的具体说明：**

请求必须是端口 443 (https) 上的 HTTPS POST 请求。每个请求都必须包含所需的标头（如下所列）。标头识别、验证和验证您的请求以防止篡改。标题

**bitfloor-key**这是由 bitfloor 提供的，用于唯一标识您的帐户。（即 6bd2b780-00be-11e2-bde3-2837371c3c3a）

**bitfloor-sign**符号字段是使用与您的 api 密钥对应的密钥的请求正文的 sha512-hmac。

*要签署您的请求：* base64 将密钥解码为原始字节（64 字节）。将这些字节用于 http 请求正文的 sha512-hmac 签名。Base64 对签名结果进行编码并在此标头字段中发送。

**bitfloor-passphrase**创建此 api 密钥时指定的密码。如果忘记，我们将无法恢复您的密码。您将需要创建一个新的 API 密钥。

**bitfloor-version**你感兴趣的资源的api版本，目前唯一有效的值为1

* * *

经过整整八个小时的反复试验并反复在互联网上搜索任何类型的见解或信息，以下代码尽可能接近我认为可能在如何正确构建请求的方向上的某个地方，唉，无论我做什么，我都会得到他们的 API 返回的“无效签名”。

这是我到目前为止...

首先，我在网上找到了有人写的用于 SHA512 签名的这个函数：

```
<cffunction name="HMAC_SHA512" returntype="binary" access="public" output="false">
    <cfargument name="signKey" type="string" required="true">
    <cfargument name="signMessage" type="string" required="true">

    <cfset var jMsg = JavaCast("string",arguments.signMessage).getBytes("iso-8859-1")>
    <cfset var jKey = JavaCast("string",arguments.signKey).getBytes("iso-8859-1")>
    <cfset var key  = createObject("java","javax.crypto.spec.SecretKeySpec")>
    <cfset var mac  = createObject("java","javax.crypto.Mac")>
    <cfset key  = key.init(jKey,"HmacSHA512")>
    <cfset mac  = mac.getInstance(key.getAlgorithm())>
    <cfset mac.init(key)>
    <cfset mac.update(jMsg)>
    <cfreturn mac.doFinal()>
</cffunction> 
```

我不知道它做了什么，但它似乎可以正常工作并且没有错误。

这是我对这个函数的实现以及我在发出请求时的尝试： 注意：“nonce”值是必须与请求一起发送的必需参数。

```
<cffunction name="myorders">
    <cfset nonce        = dateDiff("s",createDateTime(2012,01,01,0,0,0),now())>
    <cfset requestbody  = "?nonce=#nonce#">
    <cfset key      = "oaFz62YpmbWiXwseMUSod53D8pOjdyVcweNYdiab/TSQqxk6IuemDvimNaQoA==">
    <cfset sign     = HMAC_SHA512(key,requestbody)>
    <cfset signed       = binaryEncode(sign,"Base64")>

    <!--- HTTP REQUEST --->
    <cfhttp url = "https://api.bitfloor.com/orders#requestbody#"
        method  = "post"
        result  = "bitfloor">

    <!--- HEADERS --->
    <cfhttpparam
        type    = "body"
        value   = requestbody>
    <cfhttpparam
        type    = "header"
        name    = "bitfloor-key"
        value   = "6bd2b780-00be-11e2-bde3-2837371c3c3a">
    <cfhttpparam
        type    = "header"
        name    = "bitfloor-sign"
        value   = signed>
    <cfhttpparam
        type    = "header"
        name    = "bitfloor-passphrase"
        value   = "mysecretpassphrase">
    <cfhttpparam
        type    = "header"
        name    = "bitfloor-version"
        value   = "1">
    </cfhttp>
</cffunction> 
```

我认为我的大部分困惑来自不确切地知道“请求主体”是什么。我觉得我可能没有签署正确的协议。

我希望那里有熟悉签名请求的 Coldfusion 程序员。我无计可施。

请帮忙！合十礼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:30:52.707

我没有使用过那个 api，但我运行了一些测试，它似乎可以使用以下调整：

*   由于该`secretKey`值是 base64 编码的，因此需要使用您的签名函数`binaryDecode`来正确提取字节。使用`String.getBytes(...)`会产生完全不同（和错误）的结果。

*   预期的请求正文值只是：（`nonce=#nonceValue#`没有前导`"?"`）

*   好像需要`Content-Type=application/x-www-form-urlencoded`header，否则解析内容失败，响应为：{"error":"no nonce specified"}

**代码**

```
 <cfset apiKey = "6bd2b780-00be-11e2-bde3-2837371c3c3a">
 <cfset secretKey = "oaFz62YpmbWiXwseMUSod53D8pOjdyVcweNYdiab/TSQqxk6IuemDvimNaQoA==">
 <cfset passphrase = "your secret phrase">

 <cfset requestBody  = "nonce="& now().getTime()>
 <cfset signBytes    = HMAC_SHA512(secretKey, requestbody)>
 <cfset signBase64   = binaryEncode(signBytes, "base64")>

 <cfhttp url="https://api.bitfloor.com/orders" method="post" port="443" result="bitfloor">
    <cfhttpparam type="header" name="Content-Type" value="application/x-www-form-urlencoded">
    <cfhttpparam type="header" name="bitfloor-key" value="#apiKey#">
    <cfhttpparam type="header" name="bitfloor-sign" value="#signBase64#">
    <cfhttpparam type="header" name="bitfloor-passphrase" value="#passphrase#">
    <cfhttpparam type="header" name="bitfloor-version" value="1">
    <cfhttpparam type="body" value="#requestBody#">
 </cfhttp>

 <cfdump var="#bitfloor#" label="Response">

<cffunction name="HMAC_SHA512" returntype="binary" access="public" output="false">
    <cfargument name="base64Key" type="string" required="true">
    <cfargument name="signMessage" type="string" required="true">
    <cfargument name="encoding" type="string" default="UTF-8">

     <cfset var messageBytes = JavaCast("string",arguments.signMessage).getBytes(arguments.encoding)>
     <cfset var keyBytes = binaryDecode(arguments.base64Key, "base64")>
     <cfset var key  = createObject("java","javax.crypto.spec.SecretKeySpec")>
     <cfset var mac  = createObject("java","javax.crypto.Mac")>
     <cfset key  = key.init(keyBytes,"HmacSHA512")>
     <cfset mac  = mac.getInstance(key.getAlgorithm())>
     <cfset mac.init(key)>
     <cfset mac.update(messageBytes)>

     <cfreturn mac.doFinal()>
</cffunction> 
```

# concurrency - Linux内核如何处理并发文件查找

> ID：12921365
> 
> 赞同：1
> 
> 时间：2012-10-16T18:42:34.727
> 
> 标签：concurrency, filesystems, linux-kernel

假设有两个进程同时[查找](http://lxr.free-electrons.com/source/fs/dcache.c#L1923)一个文件，而这个文件在 dcache 中还不存在。这两个查找将向进程返回 NULL ( [dentry](http://lxr.free-electrons.com/source/include/linux/dcache.h#L103) )。

我的问题是，Linux 内核如何确保在失败的 dentry 查找之后，它只创建一个 dentry？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:54:50.747

```
1912 /**
1913  * d_lookup - search for a dentry
1914  * @parent: parent dentry
1915  * @name: qstr of name we wish to find
1916  * Returns: dentry, or NULL
1917  *
1918  * d_lookup searches the children of the parent dentry for the name in
1919  * question. If the dentry is found its reference count is incremented and the
1920  * dentry is returned. The caller must use dput to free the entry when it has
1921  * finished using it. %NULL is returned if the dentry does not exist.
1922  */ 
```

`d_lookup`不会`dentry`自己创建任何对象。看一下`do_filp_open`逻辑，它显示了如何`dentries`创建。

# node.js - 使用 Oauth 在 Node.js 中将图像发布到 Twitter

> ID：12921371
> 
> 赞同：7
> 
> 时间：2012-10-16T18:43:04.060
> 
> 标签：node.js, twitter, twitter-oauth

我正在尝试使用 Oauth 模块将图像发布到 Twitter。这是我所拥有的：

它引发 403 错误，我知道我在将媒体添加到帖子的方式上做错了，但我只是不确定从这里去哪里。

```
var https = require('https');
var OAuth= require('oauth').OAuth;
var keys = require('./twitterkeys');
var twitterer = new OAuth(
           "https://api.twitter.com/oauth/request_token",
           "https://api.twitter.com/oauth/access_token",
           keys.consumerKey,
           keys.consumerSecret,
           "1.0",
           null,
           "HMAC-SHA1"
          );

var params = {
    status : "Tiger!",
    media : [("data:" + mimeType + ";base64,") + fs.readFileSync(path,'base64')]
};

//function(url, oauth_token, oauth_token_secret, post_body, post_content_type, callback)
twitterer.post("https://upload.twitter.com/1/statuses/update_with_media.json",
           keys.token, keys.secret, params, "multipart/form-data",
           function (error, data, response2) {
           if(error){
               console.log('Error: Something is wrong.\n'+JSON.stringify(error)+'\n');

           }else{
               console.log('Twitter status updated.\n');
               console.log(response2+'\n');
           }
           }); 
```

这是我认为我应该做的事情，但我不知道如何在 Node.js Oauth 模块中做到这一点。 [使用 Twitter+OAuth 将图像发布到 Twitter](https://stackoverflow.com/questions/9616102/posting-image-to-twitter-using-twitteroauth)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T20:30:45.570

查看代码，看起来包中现在*根本*`multipart/form-data`没有任何处理。您仍然可以使用该函数来创建授权标头，但您必须自己完成多部分的工作。*`node-oauth``node-oauth`*

 *可能有第三方库可以帮助解决这个问题，但这是我手工构建的方法。

```
var data = fs.readFileSync(fileName);
var oauth = new OAuth(
    'https://api.twitter.com/oauth/request_token',
    'https://api.twitter.com/oauth/access_token',
    twitterKey, twitterSecret,
    '1.0', null, 'HMAC-SHA1');

var crlf = "\r\n";
var boundary = '---------------------------10102754414578508781458777923';

var separator = '--' + boundary;
var footer = crlf + separator + '--' + crlf;
var fileHeader = 'Content-Disposition: file; name="media"; filename="' + photoName + '"';

var contents = separator + crlf
    + 'Content-Disposition: form-data; name="status"' + crlf
    + crlf
    + tweet + crlf
    + separator + crlf
    + fileHeader + crlf
    + 'Content-Type: image/jpeg' +  crlf
    + crlf;

var multipartBody = Buffer.concat([
    new Buffer(contents),
    data,
    new Buffer(footer)]);

var hostname = 'upload.twitter.com';
var authorization = oauth.authHeader(
    'https://upload.twitter.com/1/statuses/update_with_media.json',
    accessToken, tokenSecret, 'POST');

var headers = {
    'Authorization': authorization,
    'Content-Type': 'multipart/form-data; boundary=' + boundary,
    'Host': hostname,
    'Content-Length': multipartBody.length,
    'Connection': 'Keep-Alive'
};

var options = {
    host: hostname,
    port: 443,
    path: '/1/statuses/update_with_media.json',
    method: 'POST',
    headers: headers
};

var request = https.request(options);     
request.write(multipartBody);
request.end();

request.on('error', function (err) {
    console.log('Error: Something is wrong.\n'+JSON.stringify(err)+'\n');
});

request.on('response', function (response) {            
    response.setEncoding('utf8');            
    response.on('data', function (chunk) {
        console.log(chunk.toString());
    });
    response.on('end', function () {
        console.log(response.statusCode +'\n');
    });
}); 
```*

# asp.net - .cfm 文件的 ASP.NET 重定向规则

> ID：12921375
> 
> 赞同：0
> 
> 时间：2012-10-16T18:43:08.567
> 
> 标签：asp.net

我有一个 DotNetNuke 应用程序，我将所有旧网站都迁移到门户下。由于用户将旧站点的 URL 存储到书签中，我需要编写重定向规则，以便他们可以在新页面上正确获取。

现在，有一次我卡住了，因为我无法编写规则。

我的条件是 URL A [http://www.mydomain.com.cn/auto.cfm?myurl=domain/notice_article.cfm](http://www.mydomain.com.cn/auto.cfm?myurl=domain/notice_article.cfm) 应该重定向到 [http://www.mynewdomain.com/home.aspx](http://www.mynewdomain.com/home.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:39:35.387

我已经使用redirectMaps 实现了这一点。

例如

```
<rewriteMap name="MyRedirectMap_Entire">
    <add key="whttp://www.mydomain.com.cn/auto.cfm?myurl=domain/notice_article.cfm" value="http://www.mynewdomain.com/home.aspx" />
  </rewriteMap> 
```

在 web.config 文件下正确添加它，我能够正确重定向。

# php - 使用array_diff()，如何从array2而不是array1中获取差异？

> ID：12921381
> 
> 赞同：11
> 
> 时间：2012-10-16T18:43:23.657
> 
> 标签：php, arrays, compare, array-difference

我正在尝试像这样使用array_diff。这是我的两个数组输出：

清单 1 输出

```
Array ([0] => 0022806 ) 
```

清单 2 输出

```
Array ([0] => 0022806 [1] => 0023199 ) 
```

PHP

```
$diff = array_diff($list_1, $list_2);

print "DIFF: " . count($diff) ."<br>";
print_r($diff); 
```

输出是：

```
DIFF: 0
Array ( ) 
```

知道我做错了什么吗？为什么`0023199`不退货？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T18:45:11.073

array_diff() 中的参数顺序很重要

> 返回一个数组，其中包含**array1**中不存在于任何其他数组中的所有条目

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-03-30T09:56:19.277

尝试;

```
$diff = array_merge(array_diff($list_1, $list_2), array_diff($list_2, $list_1));

print "DIFF: " . count($diff) ."<br>";
print_r($diff); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T18:45:59.807

[从文档](http://php.net/manual/en/function.array-diff.php)：

> 返回一个数组，其中包含 array1 中不存在于任何其他数组中的所有条目。

如果您只想检查它们是否相同，您可以使用`$list1 == $list_2`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T18:46:51.303

根据[文档](http://php.net/manual/en/function.array-diff.php)，从第一个数组中减去第二个数组的值。或者，换句话说，从第一个数组开始，然后删除第二个数组中出现的所有值。这将正确产生您在上面看到的空数组

您可能想玩转交[点](http://php.net/manual/en/function.array-intersect.php)，这可能会帮助您获得想要的东西。

# javascript - 自定义 localStorage js 函数未在 Chrome 中运行

> ID：12921382
> 
> 赞同：5
> 
> 时间：2012-10-16T18:43:24.367
> 
> 标签：javascript, google-chrome, local-storage

## 我正在尝试做的事情：

在 localStorage 之上创建我自己的存储 API，以便在我自己的代码中更容易使用。

## 为什么？

所以它有一个用于我目的的 API，以后可以扩展。

## 系统：

Chrome 版本：版本 22.0.1229.94 m

JSFiddle：http: [//jsfiddle.net/ttback/kr88W/](http://jsfiddle.net/ttback/kr88W/)

## 错误

小提琴将在控制台中触发错误：

### TypeError：对象＃的属性“localStorageSave”不是函数

这适用于 IE 8 和 Firefox 16.0.1，所以我想知道我是否遗漏了某些东西或者它是 Chrome 错误。

## 代码：

```
<html>
<head>
<title>JS function not working in Chrome</title>
<script type="text/javascript">
var localStorage = localStorage || {};
localStorage.localStorageSave = function(){
    alert("SAVE");
};
localStorage.localStorageSave();
</script>
</head>
<body>

</body>

</html>​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T18:48:07.193

当你这样做

```
localStorage.localStorageSave = function(){
    alert("SAVE");
}; 
```

你做的和

```
localStorage["localStorageSave"] = function(){
    alert("SAVE");
}; 
```

或者

```
localStorage.setItem("localStorageSave", (function(){
    alert("SAVE");
}).toString()); 
```

实际上，您并没有在 localStorage 中保存函数，因为[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)只保存字符串。

你可以检查它

```
console.log(typeof(localStorage.localStorageSave)); 
```

你得到`"string"`. 这不是功能，是正常的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:50:02.020

试试这个：

```
localStorage.__proto__.localStorageSave = function(){
    alert("SAVE");
}; 
```

**[小提琴](http://jsfiddle.net/wphFJ/1/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T18:58:59.280

您不应该扩展 window.localStorage。更好的方法是：

```
var myNameSpace = {};

myNameSpace.localStorage = {

    save: function (name, object) {

        //save to localStorage
        window.localStorage.setItem(name, window.JSON.stringify(object));

    }

}

myNameSpace.localStorage.save('testObject', {test: true}); 
```

# ios - 如何增加操作表的大小

> ID：12921384
> 
> 赞同：0
> 
> 时间：2012-10-16T18:43:29.407
> 
> 标签：ios, cocos2d-iphone

所以我试图将两个 UIPickerView 添加到一个出现在按钮按下的 ActionSheet 中。

操作表显示，但它太小了，

注意：我也在使用 Cocos2d。我不知道这是否限制了任何东西。

![我的 ActionSheet 示例](../Images/618cb683d973debaad57edf36d161729.png)

如您所见，ActionSheet 太小了。除了滚动时的前几个字母之外，您在选择器视图中看不到任何内容。

我试过了

```
 [actionSheet setFrame:CGRectMake(0, 0, 800, 500)]; 
```

和

```
 [actionSheet setBounds:CGRectMake(0, 0, 800, 500)]; 
```

显示代码：

```
[actionSheet showInView:[[UIApplication sharedApplication] keyWindow]];
    [actionSheet setFrame:CGRectMake(0, 0, 800, 500)]; 
```

我还可以做些什么？我是否应该使用 ActionSheets 以外的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:42:46.650

正如我们在评论中发现的那样，在 iPad 上的弹出视图中显示不同类型的自定义信息最方便的方法是使用`UIPopoverController`类而不是尝试自定义`UIActionSheet`。

> 该类`UIPopoverController`用于管理弹出框中内容的呈现。您可以使用弹出框临时呈现信息，但不会像模态视图那样*占据整个屏幕。*弹出内容在特殊类型的窗口中叠加在现有内容之上。弹出框保持可见，直到用户在弹出框窗口之外点击或您明确将其关闭。Popover 控制器专用于 iPad 设备。尝试在其他设备上创建一个会导致异常。

[UIPopoverController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)

# c++ - 类不能访问公共成员c ++

> ID：12921399
> 
> 赞同：-1
> 
> 时间：2012-10-16T18:44:40.410
> 
> 标签：c++, class, public

我正在编写一个需要一个表的程序，我正在使用一个向量数组来模拟它，我已经制作了一个自定义类来创建表。但是我看不到类表中的任何项目，除了 vec_data。为什么我无法访问此类中的公共成员？由于某种原因，MSVC++ Intellisense 只能看到 vec_data，没有别的。

```
template<class T>
class table
{
  private:
    T* vec_data;// initialize T

    struct tblarray : public T
    {
       std::vector<T> vecTbl[];
       bool operator[](unsigned int i) { return vecTbl[i]; } //redefine operator[] to accept unsigned int
       static void operator new(double n) //redefine new operator
       {
          void *d;
          if(n < 0) throw std::exception("Invalid Allocation to Negative number!");
          if(assert((d=malloc(n)) != 0) = 0) throw std::bad_alloc;
          return d;
      }
      void operator delete(void *d) //redefine delete operator
      {
        if(assert((free(p))) = 0) throw std::exception("Invalid Free of specified data!");
      }
      tblarray(const T&, unsigned int size) : T //one constructor
      {
        vecTbl = this.new std::vector<T>[reinterpret_cast<double>(size)];
      }
      ~tblarray() //one destructor
      {
        this.delete(vecTbl);
      }
}
public:
  table(const T&, unsigned int size) : T
  {
      this.tblarray.tblarray(T, size);
  }
  ~table()
  {
      this.tblarray.~tblarray();
  }
} 
```

例如：

```
table<int> tblOne; //legal
table.table(int, 123); //not legal(probably not legal anyways, but intellisense says the function does not exist?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:00:03.867

如果这是您的真实代码，那么您有一些小错误：

*   在 C++ 中，每个类（包括结构和联合）都必须使用 终止`;`，但您不能`tblarray`使用终止`;`

*   据我所见，在你的模板实例化中，`T`是`int`，而是`tblarray`从T派生的，想想你能有`struct test : int`吗？

*   您的所有属性（您没有任何功能：变量：`vec_data`和类型：）`tblarray`都是私有的，那么您想如何访问它们？

*   在 C++`this`中是指针而不是引用，因此您必须替换`this.`为`this->`

*   为了访问您的专业运算符，请使用保留字`operator`转换`this.delete(vecTbl)`为`operator delete(vecTbl)`（这也不是一个好习惯，`operator delete`声明删除您的类的实例而不是它的成员！）

*   `table`是你的类的构造函数，所以当你想实例化你的变量时应该使用它：`table<...> t(1, 100)`并且由于你声明了一个非默认构造函数并且你没有默认构造函数，所以你不能拥有`table<...> t`它，因为它需要一个默认构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:53:45.983

您在 struct 声明后错过了分号：

```
template<class T>
class table
{
private:
    T* vec_data;// initialize T

    struct tblarray
    {
        std::vector<T> vecTbl[];
        bool operator[](unsigned int i) { return vecTbl[i]; } //redefine operator[] to accept unsigned int
        static void operator new(double n) //redefine new operator
        {
            void *d;
            if(n < 0) throw std::exception("Invalid Allocation to Negative number!");
            if(assert((d=malloc(n)) != 0) = 0) throw std::bad_alloc;
            return d;
        }
        void operator delete(void *d) //redefine delete operator
        {
            if(assert((free(p))) = 0) throw std::exception("Invalid Free of specified data!");
        }
        tblarray(const T&, unsigned int size) : T //one constructor
        {
            vecTbl = this.new std::vector<T>[reinterpret_cast<double>(size)];
        }
        ~tblarray() //one destructor
        {
            this.delete(vecTbl);
        }
    };
public:
    table(const T&, unsigned int size) : T
    {
        this.tblarray.tblarray(T, size);
    }
    ~table()
    {
        this.tblarray.~tblarray();
    }
} 
```

这里也是实例化：

```
int j = 1;
table<int> t(j, 2); 
```

顺便说一句，ctor 中的 const T& 是多余的，模板参数中已经替换了类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:48:28.880

`table.table(1,123)`是非法的。您不能这样调用构造函数。

# python - Mountain Lion 中的 Mac 10.4 SDK

> ID：12921406
> 
> 赞同：2
> 
> 时间：2012-10-16T18:45:07.387
> 
> 标签：python, xcode, macos

我有 Mac OS 10.8.2、Python 2.7.3、Xcode 4.5.1。

我正在尝试按照[http://www.portaudio.com/docs/v19-doxydocs/compile_mac_coreaudio.html](http://www.portaudio.com/docs/v19-doxydocs/compile_mac_coreaudio.html)中的说明安装`portaudio`（以便我可以`import pyaudio`在其中使用） 。`python`

如该站点所述，我从[http://connect.apple.com](http://connect.apple.com)下载了 MacOSX10.4 SDK ，该 SDK 下载为 DMG 文件。我安装成功。但`MacOSX10.4.sdk`从来没有把它自己放在路径`Applications/Xcode.app/Developer/Platforms/MacOSX.platform/Developer/Library/SDKs`中，与`MacOSX10.7.sdk`and一起`MacOS10.8.sdk`。考虑到它的不可用，`./configure && make`显示错误。

这是文件夹的截图 ![](../Images/6814092a0481d8d999ac84b76472521b.png)

这是错误的屏幕截图![在此处输入图像描述](../Images/584a4c87dab0cb718c178f8e20a9f0aa.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:47:10.960

我会使用[homebrew](http://mxcl.github.com/homebrew/)安装它。我正在运行 MountainLion，它在 14 秒内安装完毕。

```
$ brew install portaudio
==> Downloading http://www.portaudio.com/archives/pa_stable_v19_20111121.tgz
######################################################################## 100.0%
==> Downloading patches
######################################################################## 100.0%
==> Patching patching file include/pa_mac_core.h
==> ./configure --prefix=/usr/local/Cellar/portaudio/19.20111121 --enable-mac-universal=no
==> make install /usr/local/Cellar/portaudio/19.20111121: 8 files, 308K, built in 14 seconds 
```

# java - 方法声明

> ID：12921410
> 
> 赞同：-1
> 
> 时间：2012-10-16T18:45:15.990
> 
> 标签：java, methods

我编程时间不长，这是我第一次在我的程序中声明一个方法并在程序中使用这个方法。简单来说，该程序让用户输入一个 5 位数的邮政编码，我创建的方法检查邮政编码是否只有 5 个字符并且都是数字。当我在程序中使用该方法时，无论我输入什么邮政编码，while 语句都会运行，要求我再次输入我的邮政编码。仅当您输入的字符串不是五个字符或只有数字的字符串时才会发生这种情况。但是，现在即使输入了实际的邮政编码，它也会发生，让我假设该方法有问题。我试图在问题中尽可能清楚，但如果需要进一步澄清，我可以尝试澄清问题，您可以提供的任何信息将不胜感激。这是我的代码：

```
import java.util.Scanner;

public class BarCode {
    public static void main(String[] args) {

        String zipcode;

        Scanner in = new Scanner(System.in);
        System.out.println("Please enter a 5 digit zipcode: ");
        zipcode = in.nextLine();

        while (checkInput(zipcode) == false) {
            System.out.println("You did not enter a 5 digit zipcode: ");
            zipcode = in.nextLine();
        } // end while

    } // ends main

    public static boolean checkInput(String zipcode) {
        boolean zipcodeLength = true;
        boolean zipcodeDigits = true;
        if (zipcode.length() != 5) {
            zipcodeLength = false;
        } // end if statement
        for (int i = 0; i <= zipcode.length(); i++) {
            if (!Character.isDigit(i)) {
                zipcodeDigits = false;
            } // end if statement
        } // end for statement
        if (zipcodeLength == false || zipcodeDigits == false) {
            return false;
        } // end if statement
        else {
            return true;
        } // end else statement
    } // end checkInput
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:49:35.257

这是你的问题 ：

```
if(!Character.isDigit(i)) 
```

应该

```
if(!Character.isDigit(zipcode.charAt(i))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:51:03.963

```
import java.util.Scanner;

public class BarCode{ public static void main(String[] args){

    String zipcode;
    Scanner in = new Scanner(System.in);
    System.out.println("Please enter a 5 digit zipcode: ");
    zipcode = in.nextLine();
    while (checkInput(zipcode)==false){
        System.out.println("You did not enter a 5 digit zipcode: ");
        zipcode = in.nextLine();
    }
}

public static boolean checkInput(String zipcode){
    boolean zipcodeLength = true;
    boolean zipcodeDigits = true;
    if (zipcode.length() != 5){
        zipcodeLength = false;
    } // end if statement
    for (int i=0; i<zipcode.length();i++){
        if(!Character.isDigit(zipcode.charAt(i))){
            zipcodeDigits = false;
        }
    }
    return zipcodeLength && zipcodeDigits;
    } // end checkInput
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:57:05.740

```
 while (zipcode.matches("[0-9]{5}"))==false){
    System.out.println("You did not enter a 5 digit zipcode: ");
      zipcode = in.nextLine();
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:01:01.560

```
!Character.isDigit(i) 
```

这对我来说似乎是一个错误。`i`是类型`int`：

```
for (int i = 0; i <= zipcode.length(); i++) {
// ...
} 
```

所以你不是在打电话[`Character.isDigit(char)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#isDigit%28char%29)，你在打电话[`Character.isDigit(int)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#isDigit%28int%29)。这两种方法的行为不同：一种处理文本字符，而另一种处理数字 unicode 值。尝试这个：

```
System.out.println("= char '1' =");
System.out.println(Character.isDigit('1')); // true

System.out.println("= int 1 =");
System.out.println(Character.isDigit(1)); // false

System.out.println("= Unicode 31h (49) =");
System.out.println(Character.isDigit('\u0031')); // true

System.out.println("= int 49 =");
System.out.println(Character.isDigit(49)); // true 
```

你会得到以下输出：

```
= char '1' =
true
= int 1 =
false
= Unicode 31h (49) =
true
= int 49 =
true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T18:50:27.847

```
 public static boolean checkInput(String zipcode){
      if (zipcode.length() != 5){
        return false;
      } 
      for ( int i=0; i<zipcode.length();i++){
char charAt = zipcode.charAt(i);
        if(!Character.isDigit(charAt)){
          return false;
        } 
      } 
     return true;
    } 
```

您需要使用 charAt 而不是查看是否`i`是数字，因为显然它会是。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T18:55:48.120

有两个问题。

第一个是`<=`当你需要做的时候你会去`<`。

第二个是您需要检查`zipcode.charAt(i)`而不是`i`. `i`无论您输入什么邮政编码，检查都会检查数字 0 - 4（您的代码为 5）是否有 5 位邮政编码。

所以这两行变成

```
for ( int i=0; i<zipcode.length();i++){
    if(!Character.isDigit(zipcode.charAt(i))){ 
```

或者，我个人会像这样编写这个方法：

```
public static boolean checkInput(String zipcode){
     if(zipcode.length() != 5) return false; // bad length
     for(int i = 0; i < zipcode.length(); i++) {
         if(!Character.isDigit(zipcode.charAt(i)) // bad digit
             return false;
     }
     return true; // if no bad condition, it's good
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T18:50:07.893

您不需要将布尔值存储`false`在某个布尔变量中。只需返回您发现邮政编码无效的那一刻。

你应该这样做： -

```
!Character.isDigit(zipcode.charAt(i)) 
```

代替：-

```
!Character.isDigit(i) 
```

因此，您可以像这样修改您的方法：-

```
public static boolean checkInput(String zipcode){

  if (zipcode.length() != 5){
    return false;
  } 

  for ( int i = 0; i < zipcode.length(); i++){
    if(!Character.isDigit(zipcode.charAt(i))){
      return false;
    } 
  } 

  return true;
} 
```

此外，您不需要这样做 :- `booleanVar == false`。只需做： -`!booleanVar`就够了。

# .net - 从 .net 程序集中反编译 Linq 查询

> ID：12921415
> 
> 赞同：3
> 
> 时间：2012-10-16T18:45:27.403
> 
> 标签：.net, linq, entity-framework, .net-4.0

我必须反编译一个包含一些 linq-to-sql 代码（大约 30 个方法）的程序集。我尝试了许多反编译器，例如 dotpeek、Telerik 的 just decompile、RedGate 的 .NET reflactor（评估），但它们都以动态 linq 的形式反编译 linq 查询。是否有可以从 .NET 程序集中提取原始 Linq 查询的免费反射器？

# objective-c - 如果我在使用 ARC 时未能初始化变量，clang 如何警告我？

> ID：12921422
> 
> 赞同：2
> 
> 时间：2012-10-16T18:46:15.977
> 
> 标签：objective-c, automatic-ref-counting, clang, clang-static-analyzer

我忘记初始化一个局部变量，使用它时没有收到任何警告。由于我使用的是 ，所以`ARC`变量被初始化为`nil`，所以没有造成任何伤害，但是当我使用未初始化的值时，我仍然想要一个警告。如果我禁用`ARC`，我会收到我期望的警告。

```
NSString *foo;
NSString *baz;
if (bar) {
    foo = @"fizz";
} else {
    foo = @"buzz";
}
NSLog(@"foo: %@", foo);  // foo: (fizz|buzz)
NSLog(@"baz: %@", baz);  // baz: (null) 
```

没有 ARC：

```
/blah/blah/blah/Blah.m:14:18: note: initialize the variable 'foo' to silence this warning
NSString *foo;
             ^ 
```

**- 编辑 -**

[我已经想出了如何使用 local blocks 使未初始化的值变得不可能](http://stackoverflow.com/a/37733359/9636)。这消除了对警告的需要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:49:06.970

使用 ARC，指向 Objective C 对象的指针会自动初始化为`nil`，因此没有编译器可以警告的“未初始化值”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:54:13.663

Clang 有一个`-Wuninitialized`看起来应该做你想做的事情的选项，但正如在另一个答案中指出的那样，变量保证被初始化为`0`/`nil`在 ARC 下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-09T18:14:11.793

[马丁 R 是正确的](https://stackoverflow.com/a/12921467/9636)：

> 使用 ARC，指向 Objective C 对象的指针会自动初始化为 nil，因此没有编译器可以警告的“未初始化值”。

但是，我通过使用本地块来初始化变量完全避免了这个问题。该块保证所有路径都以 a 结尾`return`，这意味着保证我的变量被初始化。

该示例将这样编写：

```
NSString *foo = ^{
    if (bar) {
        return @"fizz";
    } else {
        return @"buzz";
    }
}();
NSLog(@"foo: %@", foo);  // foo: (fizz|buzz) 
```

该块是堆栈分配的，因此它不会产生超出正常函数调用的任何开销。

# android - MapView通过webservice添加多个标记

> ID：12921424
> 
> 赞同：0
> 
> 时间：2012-10-16T18:46:22.523
> 
> 标签：android, web-services, android-mapview

我有一个`MapView`，并且在向网络服务发出请求并在解析后将标记添加到地图中。

现在，我必须等待请求和解析，有时需要很多时间。所以我想知道是否可以在解析标记时将它们添加到地图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:50:11.987

你应该使用一个`ItemizedOverlay`. 您可以将不同的标记添加到此叠加层中，如下所示：

```
public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
} 
```

另请参阅[地图教程](https://developers.google.com/maps/documentation/android/hello-mapview)。

# .net - Winforms 设计器 - 从引用的项目中禁用自定义控件

> ID：12921433
> 
> 赞同：1
> 
> 时间：2012-10-16T18:46:47.740
> 
> 标签：.net, user-controls, windows-forms-designer, multi-project

（使用VB 2010）

我有一个多项目解决方案，其中 ProjectB 引用了 ProjectA。

ProjectA 有几个我想在 ProjectB 中使用的自定义和用户控件。但是，当我在 ProjectB 中打开 winforms 设计器时，ProjectA 组件选项卡不显示。如果我为工具箱启用“全部显示”，则 ProjectA 组件会出现，但每个控件都会褪色，我无法将它们拖到 ProjectB 表单上。

既然我已经设置了对 ProjectA 的引用，为什么不允许这样做？

# linux - 如何检查我有权读取目录中的哪些文件？

> ID：12921438
> 
> 赞同：1
> 
> 时间：2012-10-16T18:47:10.627
> 
> 标签：linux, bash, unix

我可以看到单个文件的权限`ls -l`。

如果一个目录中有成百上千个文件——其中大部分我无法读取，我如何检查我有权读取哪些文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:48:48.430

**试试看**：

```
for i in *; do test -r "$i" && echo "$i is readable for $USER"; done 
```

看`help test`

**你也可以这样做**( `bash test`) ：

```
for i in *; do [[ -r "$i" ]] && echo "$i is readable for $USER"; done 
```

看`man bash | less +/'\[\[ expression'`

**或与`POSIX shell`**：

```
for i in *; do [ -r "$i" ] && echo "$i is readable for $USER"; done 
```

看`help [`

**最后**

`&&`是一个*快捷方式*（布尔**AND**）`if condition; then action; fi`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:49:40.187

您可以使用 stat(1) 来发现文件权限。

# jquery - 调整大小滑块上的响应站点不起作用

> ID：12921441
> 
> 赞同：0
> 
> 时间：2012-10-16T18:47:21.360
> 
> 标签：jquery, css, html, window-resize

我正在制作一个响应式 HTML5[网站](http://datumtech-cnc.com/html5_development)，目前只完成了主页和航天页面。我在主页上使用 2 个滑块。第一个在一定的屏幕尺寸之前是可见的，然后它变得不可见并显示第二个滑块。如果我将屏幕尺寸更改为移动屏幕尺寸并单击任何链接然后调整为原始尺寸，则不会加载第一个滑块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T02:05:21.393

你想通了吗？如果没有，您可以尝试适应屏幕尺寸的[Liquid Slider 。](http://liquidslider.kevinbatdorf.com/)

# android - Android将变量插入网页字段

> ID：12921443
> 
> 赞同：3
> 
> 时间：2012-10-16T18:47:28.520
> 
> 标签：android, eclipse, login, web, pasting

我正在尝试构建一个应用程序，在输入用户名和密码后自动将您登录到网络邮件。这是我的第一次，我一直在玩一些 eclipse 教程并试图建立它们。我现在拥有的是两个 .java 文件，其中一个有两个文本字段供用户输入用户名和密码。一旦他们点击发送它就会加载网页。我遇到的问题是我似乎无法将值粘贴到网页的字段中。我希望有人能帮助我弄清楚我做错了什么。任何帮助，将不胜感激。（这是加载网页和变量的第二页的代码。第一页工作正常。我可以使用 textview 查看变量。）

```
 public class DisplayMessageActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    String username = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    Intent intent1 = getIntent();
    String password = intent1.getStringExtra(MainActivity.EXTRA_MESSAGE1);

    String url = "#############"; 
    Uri uri = Uri.parse(url);
    Intent i= new Intent(Intent.ACTION_VIEW, uri);
    startActivity(i); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:47:13.720

您需要将 javascript 方法添加到要插入数据的网页中，以接受值并将它们存储在表单中...

```
WebView wv = ...
wv.loadUrl("javascript:setUsername('"+username+"')"); 
```

并在您的 html 页面中...

```
function setUsername(username){
    document.loginForm.username.value=username;
}

<form name="loginForm">
   <input name="username" type="text">
</form> 
```

# php - 如何将此 XML 解析为 PHP

> ID：12921444
> 
> 赞同：0
> 
> 时间：2012-10-16T18:47:37.070
> 
> 标签：php, xml, xml-parsing

嗨哟，

我经常使用 XML 和 PHP，但我得到的这个特定回报是关于如何在 PHP 中获得它的曲线球。如果我能以某种方式将“$attribute”和“VALUE”转换为 assoc 数组，我会很高兴。

真的很难过和沮丧 - 雷

```
SimpleXMLElement Object
(
[MULTIPLE] => SimpleXMLElement Object
    (
        [SINGLE] => SimpleXMLElement Object
            (
                [KEY] => Array
                    (
                        [0] => SimpleXMLElement Object
                            (
                                [@attributes] => Array
                                    (
                                        [name] => address
                                    )

                                [VALUE] => SimpleXMLElement Object
                                    (
                                        [@attributes] => Array
                                            (
                                                [null] => null
                                            )

                                    )

                            )

                        [1] => SimpleXMLElement Object
                            (
                                [@attributes] => Array
                                    (
                                        [name] => aim
                                    )

                                [VALUE] => SimpleXMLElement Object
                                    (
                                        [@attributes] => Array
                                            (
                                                [null] => null
                                            )

                                    )

                            )

                        [2] => SimpleXMLElement Object
                            (
                                [@attributes] => Array
                                    (
                                        [name] => auth
                                    )

                                [VALUE] => SimpleXMLElement Object
                                    (
                                        [@attributes] => Array
                                            (
                                                [null] => null
                                            )

                                    )

                            ) 
```

更新：这是 XML 输出：

```
<?xml version="1.0" encoding="UTF-8" ?>
<RESPONSE>
<MULTIPLE>
<SINGLE>
<KEY name="address"><VALUE null="null"/>
</KEY>
<KEY name="aim"><VALUE null="null"/>
</KEY>
<KEY name="auth"><VALUE null="null"/>
</KEY>
<KEY name="city"><VALUE null="null"/>
</KEY>
<KEY name="confirmed"><VALUE null="null"/>
</KEY>
<KEY name="country"><VALUE null="null"/>
</KEY>
<KEY name="deleted"><VALUE null="null"/>
</KEY>
<KEY name="department"><VALUE null="null"/>
</KEY>
<KEY name="description"><VALUE null="null"/>
</KEY>
<KEY name="email"><VALUE null="null"/>
</KEY>
<KEY name="emailstop"><VALUE null="null"/>
</KEY>
<KEY name="error"><VALUE>no match found for idnumber = 301942</VALUE>
</KEY>
<KEY name="firstname"><VALUE null="null"/>
... 
```

我知道如何在以该教程中描述的方式形成 XML 时对其进行解析。但是这个特定的案例让我很难过如何访问我需要的节点（通过 SimpleXML 对象或将其转换为 PHP 数组而不通过这样的节点：

```
$xml_obj->MULTIPLE->SINGLE->KEY[9]->VALUE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:50:52.783

[读一读，它将](http://www.w3schools.com/php/php_xml_simplexml.asp)向您展示一个简短的教程

# c# - Ninject - 不同的解决方案配置

> ID：12921446
> 
> 赞同：1
> 
> 时间：2012-10-16T18:47:43.030
> 
> 标签：c#, asp.net, asp.net-mvc, inversion-of-control, ninject

我正在开发一个应用程序并使用 Ninject 进行 DI。我希望能够根据我使用的解决方案配置将不同的对象注入给定的方法。也就是说，在“模拟”配置模式下，我想注入一个模拟对象，而在调试/发布配置中，我想注入一个真实对象。

阅读了 [Ninject 和配置](https://stackoverflow.com/questions/4639689/ninject-and-configuration)后，我了解到 XML 配置提供了这样的可能性。但是，如果可能的话，我想在没有 XML 的情况下执行此操作。（我倾向于同意 Ninject 的观点，即在已发布的产品中不应配置注入细节……）我也知道我可以使用预处理器指令来执行此操作。我想知道的是 Ninject 中是否存在此功能，或者我是否需要扩展/解决方法来完成它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T15:08:52.873

ninject 配置中的预处理器指令呢？它应该做你想做的事。

```
#if DEBUG
        kernel.Bind<IMyService>().To<MyServiceMock>();
#else
        kernel.Bind<IMyService>().To<MyService>();
#endif 
```

# ios - 每天更新 iPhone 应用程序中的数据？

> ID：12921448
> 
> 赞同：0
> 
> 时间：2012-10-16T18:47:51.297
> 
> 标签：ios, iphone

我想做一个索引卡片应用程序，我想每天添加一个新单词。如果不通过 ITC 更新整个应用程序并等待一周，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:02:06.673

让您的应用程序远程连接到您设置的服务器，以便按照您喜欢的任何时间表动态刷新其数据。

# visual-studio - 我从 2012 年将网站转换为 VB2012 现在我收到此错误服务器标签格式不正确

> ID：12921451
> 
> 赞同：0
> 
> 时间：2012-10-16T18:48:06.247
> 
> 标签：visual-studio, report-viewer2010

我一直在尝试重新打开源，重新绑定源无济于事。

```
<form id="form1" runat="server">

    <div>

        <asp:ObjectDataSource ID="ObjectDataSource1" runat="server"
            SelectMethod="FindAll" TypeName="REPORT SYNTAX" OldValuesParameterFormatString="original_{0}">
            <SelectParameters>
                <asp:Parameter Name="match" Type="Object" />
            </SelectParameters>
        </asp:ObjectDataSource>
<rsweb:reportviewer width="1200" id="ReportViewer" runat="server" font-names="Verdana".
            font-size="8pt" interactivedeviceinfos="(Collection)"
            waitmessagefont-names="Verdana" waitmessagefont-size="14pt">
            <localreport reportpath=".\Reports\REPORT SYNTAX.rdlc">
                <%--<DataSources>
                    <rsweb:ReportDataSource Name="DummyDataSource" DataSourceId="ObjectDataSource1"></rsweb:ReportDataSource>
                </DataSources>--%>
            </localreport>
        </rsweb:reportviewer>
    </div>
</form> 
```

# java - Android : 多部分下载单个文件

> ID：12921452
> 
> 赞同：7
> 
> 时间：2012-10-16T18:48:16.663
> 
> 标签：java, android, eclipse, download, accelerator

我正在开发一个应用程序，例如适用于 Android 的 Internet 下载管理器。

我想知道如何像在 IDM 中那样在 Android 中下载文件的不同部分。

如何在下载前获取文件的元数据以及如何分批下载文件？

下载没有用户名密码或任何限制......只需通过网址简单下载。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T18:52:12.633

假设您使用 HTTP 进行下载，您将需要使用`HEAD`http 动词和`RANGE`http 标头。

`HEAD`会给你文件大小（如果有的话），然后`RANGE`让你下载一个字节范围。

获得文件大小后，将其分成大小大致相等的块，并为每个块生成下载线程。全部完成后，以正确的顺序写入文件块。

编辑：

如果您不知道如何使用`RANGE`标头，这是另一个 SO 答案，它解释了如何：[https ://stackoverflow.com/a/6323043/1355166](https://stackoverflow.com/a/6323043/1355166)

# javascript - SIlkJS 中的准备好的语句

> ID：12921453
> 
> 赞同：2
> 
> 时间：2012-10-16T18:48:20.127
> 
> 标签：javascript, mysql, prepared-statement, v8, silkjs

我正在研究使用 SilkJS (http://silkjs.org/) 来构建一个利用 MySQL 的 Web 应用程序。这个项目的一个要求是它支持对 MySQL 使用准备好的语句。有谁知道在 SilkJS 中使用准备好的语句的方法？

作为对那些可能会说只是“逃避输入”的人的回应，这不是使用 MySQL 的安全方式。

对于那些可能会说只使用 NodeJS 的人，NodeJS 是异步的，我希望使用同步逻辑（SilkJS 是同步的）。对于那些可能会说“习惯异步，因为它好得多”的人，不，不，不是。

# java - Hibernate 每用户数据库

> ID：12921454
> 
> 赞同：3
> 
> 时间：2012-10-16T18:48:22.690
> 
> 标签：java, hibernate, sqlite

我目前正在开展一个（网站）项目，我打算在该项目中将每个用户的数据与另一个用户的数据分开。主数据库（包含有关用户的信息（用户、密码等））是 MySQL 数据库。

每个用户都有很多数据需要存储，重要的是不要与其他用户混淆他/她的数据。现在我正在考虑为每个用户使用一个 sqlite db，但我发现 Hibernate（我选择的 db 框架）默认支持 sqlite。

我发现[http://code.google.com/p/hibernate-sqlite/](http://code.google.com/p/hibernate-sqlite/)作为一个选项。但我想知道是否有任何其他数据库类型可以很容易地为每个用户创建一个，并且最好与休眠兼容？如果有，有哪些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T23:05:38.623

查看 休眠中的[多租户](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html)

# wpf - 如何从 CrystalReportsViewer 获取呈现页面的数量？

> ID：12921457
> 
> 赞同：1
> 
> 时间：2012-10-16T18:48:28.783
> 
> 标签：wpf, crystal-reports

使用 Crystal Reports 13 我可以得到一个呈现的报告来显示；但是，我无法以编程方式从控件中获取呈现页面的数量。

我试过了：

```
reportViewer.ViewerCore.GetLastPageNumber
reportViewer.ViewerCore.TotalPageNumber
report.AfterFormatPage += new FormatPageEventHandler(report_AfterFormatPage); 
```

没有成功。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:59:56.333

报表渲染完成后：

[我如何知道 Crystal Reports 已完成渲染？](https://stackoverflow.com/questions/12959511/how-do-i-know-crystal-reports-is-done-rendering)

只需致电：

```
reportViewer.ViewerCore.GetLastPageNumber(); 
```

# ruby-on-rails - 在我没有设置 attr_accessor 的情况下，Rails 已经有了 getter 和 setter。如何停止所有二传手？

> ID：12921459
> 
> 赞同：1
> 
> 时间：2012-10-16T18:48:39.273
> 
> 标签：ruby-on-rails, attr-accessor

这是我的课程，如您所见，没有 attr_accessor

```
class LegacyBlogPost < ActiveRecord::Base
  establish_connection Rails.configuration.database_configuration['blogs']
  self.table_name = 'blogpost'
  self.primary_key = 'post_id'
end 
```

但我仍然可以读写所有变量。这是默认行为吗？

```
x = LegacyBlogPost.find(172925)
x.title += "."
x.save
=> true 
```

不过，我的主要问题是，我如何避免给这门课写信？我知道我可以让 mysql 用户只被允许做选择语句。此外，我相信我可以重新编写 rails 设置器，以便在方法被命中后立即返回。但我曾假设如果我只是为所有内容设置 attr_reader's，那么作者就不会在那里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:53:29.470

`ActiveRecord`自动为所有列创建 getter\setter 以读取\写入

如果你想让模型成为只读的

```
class LegacyBlogPost < ActiveRecord::Base
  def readonly?
    return true
  end
end 
```

为了防止它被破坏，你可以使用

```
def before_destroy
  raise ActiveRecord::ReadOnlyRecord
end 
```

信用[http://blog.zobie.com/2009/01/read-only-models-in-activerecord/](http://blog.zobie.com/2009/01/read-only-models-in-activerecord/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T18:50:53.173

研究使用[`attr_accessible`](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html).

# objective-c - uiactionsheet 崩溃

> ID：12921460
> 
> 赞同：0
> 
> 时间：2012-10-16T18:48:45.863
> 
> 标签：objective-c, ios, uiactionsheet

我有一个这样的操作表：

```
- (void)Method1 {
    UIActionSheet *photoSourceSheet=[[UIActionSheet alloc]
                                     initWithTitle:@"Options"
                                     delegate:self
                                     cancelButtonTitle:@"Exit"
                                     destructiveButtonTitle:nil
                                     otherButtonTitles:@"opt1",@"opt2", @"opt3", nil];
    photoSourceSheet.tag=1;
    photoSourceSheet.delegate=self;
    [photoSourceSheet showInView:self.view];
}

- (void)Method2 {
    UIActionSheet *photoSourceSheet1=[[UIActionSheet alloc]
                                      initWithTitle:@"Select Video"
                                      delegate:self
                                      cancelButtonTitle:@"Cancel"
                                      destructiveButtonTitle:nil
                                      otherButtonTitles:@"Take New Video", @"Choose Existing Video", nil];
    //   photoSourceSheet.delegate=self;
    photoSourceSheet1.tag=2;
    photoSourceSheet1.delegate=self;
    [photoSourceSheet1 showInView:self.view];
} 
```

然后在我的代表中，我有：

```
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex: NSInteger)buttonIndex {
    if (actionSheet.tag==1) {
        if (buttonindex==2) {
            [self method2];
        }
    } else if (actionSheet.tag==2) {
        // some code
    }
} 
```

我的委托方法被调用为第一个操作表，即 photoSourceSheet，但不是为 photoSourceSheet1。我需要做一些特别的事情吗，比如手动关闭工作表？我的第二个`UIActionSheet`（photoSourceSheet1）出现了，但只要我在工作表上选择一个选项，它就会使应用程序崩溃。它抛出 EXEC_BAD_ACCESS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:41:47.713

上面的代码没有任何问题。EXEC_BAD_ACCESS 基本上是由于内存管理不善造成的。有时您无意中删除了正在使用的对象。尝试启用僵尸它会告诉你确切的问题区域。

步骤： 进入 Edit Scheme Memory Management 检查选项**enable Zombie Objects**

# c++ - 离线嵌入式实时路由

> ID：12921464
> 
> 赞同：0
> 
> 时间：2012-10-16T18:49:00.980
> 
> 标签：c++, map, routing, gps, embedded

我目前正在为学校做一个高级设计项目，遇到了一个我不知道如何解决的设计问题。我需要为嵌入式步行应用程序提供实时离线路由。

我一直无法找到任何适合我需要的库。我知道我可能必须制作自己的当地城镇矢量化地图或路由算法。我不会详细介绍我的项目需要什么，但它不需要大地图。也许是一个 5x5 英里的网格。如果需要更改地图可以由 SD 加载。

我看到有 GpsMid、YOURS 和其他人都在使用 OpenStreetMap 数据。

我们将有一个用于处理的 TI 微控制器和用于实时纬度/经度的 GPS 卡我只是不知道如何使用静态地图获取实时信息和路线。

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:10:11.377

我不太熟悉 GPS 和矢量化地图的实时路由通常使用什么，但我可以推荐一些通用算法，这些算法可以用作帮助您完成项目的工具。

A* 搜索是一种非常典型的寻路算法。[http://en.wikipedia.org/wiki/A_star](http://en.wikipedia.org/wiki/A_star)

根据您组织数据的方式，您可能还会发现 Dijkstra 的算法很有帮助。[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

这些算法非常流行，您应该能够以您想要的任何语言找到示例代码，尽管我对质量持怀疑态度。我建议您自己编写，因为您还在上学，因为在您的职业生涯中至少自己编写和调试过一次对您来说是有益的。完成后，您将拥有一个经过验证的真正实现来调用您自己的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:15:35.183

在我看来，这有两个部分：

1 - 识别告诉您什么是道路/路径（潜在路线）的地图数据，我希望这已经以某种方式存在于数据中。它可以像任何给定线的颜色一样简单。

2 - 计算这些路径上的路线。这是有据可查/讨论的，并且有很多算法等解决这个问题。这些天来，几乎不值得为优雅/效率而努力，你可以只用 CPU 周期来处理它，直到出现答案。

另外，这应该被标记为 [homework] 吗？

# design-patterns - Liskov 替换原则是否也适用于实现接口的类？

> ID：12921465
> 
> 赞同：3
> 
> 时间：2012-10-16T18:49:03.307
> 
> 标签：design-patterns, design-principles, liskov-substitution-principle

LSP 声明类应该可以替代它们的基类，这意味着派生类和基类在语义上应该是等价的。

但是 LSP 是否也适用于实现接口的类？换句话说，如果一个类实现的*接口方法*在语义上与用户期望的不同，这是否会被视为违反 LSP？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:51:03.387

不

它仅适用于子类型。有关简短摘要，请参阅[Wikipedia 文章](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

如果你有一个`class B`继承或扩展的，`class A`你应该能够切换出去`class A`，`class B`一切都应该正常工作。接口通常用于不允许多重继承的语言，因此虽然这两个对象具有共同的行为，但实际执行所述行为的方式在两者之间是不同的，这意味着您不应该能够互换地切换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:01:09.687

是的。接口与类一样具有“是[名词]”的关系，只是名词不是具体类型，而是“作为[形容词短语]的事物”。如果形容词短语是“能够被安全地询问它是否可以接受物品，并且能够接受物品或报告它不会”，那么任何不能安全地被问到它是否可以接受物品的对象，或者可能回答是，但如果实际给定一个项目，则表现不佳，这将不是由此描述的接口的合法实现。

# php - 显示谷歌地图坐标在ajax中不起作用

> ID：12921469
> 
> 赞同：1
> 
> 时间：2012-10-16T18:49:14.093
> 
> 标签：php, javascript, ajax

我有谷歌地图脚本用ajax在页面上显示地图，我在分离页面上使用jquery ajax脚本，然后也使用php分离页面脚本，

我不会在主页上显示谷歌地图，但包含地图的 div 具有可见性：无 css 属性。

**这是我在 php 页面中的谷歌地图脚本：**

```
`<?php
$host="host";
$username="user";
$passowrd="";
$db_name="db";

// Connect to my database and run query
mysql_connect($host,$username,$passowrd) or die("connect to database faild");

mysql_select_db($db_name) or die("ünable to connect to database");

$barcode = mysql_real_escape_string($_POST['barcode']);
// select data from tracking table
$query = "SELECT *
               FROM `table`
               WHERE `col` = '$barcode'";
$query2 = mysql_query($queryWatch);

$cor = mysql_fetch_assoc($2);
/* echo $cor['lat'];
echo $cor['lon'];  */
echo "<script type='text/javascript'>";
echo "var stockholm = new google.maps.LatLng(".$cor['lat']. ",". $cor['lon'].");";
echo "var parliament = new google.maps.LatLng(".$cor['lat']. ",". $cor['lon'].");";
echo "var marker;";
echo "var map;";

echo   "function initialize() {";
echo    "var mapOptions = {";
echo     "zoom: 15,";
echo           "mapTypeId: 

google.maps.MapTypeId.ROADMAP,";
echo          "center: stockholm";
echo        "};";

echo         "map = new google.maps.Map

(document.getElementById('map_canvas'),";
echo         "mapOptions);";

echo        "marker = new google.maps.Marker({";
echo          "map:map,";
echo          "draggable:true,";
echo        "animation: google.maps.Animation.DROP,
          position: parliament
        });
        google.maps.event.addListener(marker, 

'click', toggleBounce);
      }

      function toggleBounce() {

        if (marker.getAnimation() != null) {
          marker.setAnimation(null);
        } else {
          marker.setAnimation

(google.maps.Animation.BOUNCE);
        }
        }";
echo "</script>";
?>` 
```

**这是ajax的脚本：**

```
function get() {
    $.post('fetch-map.php', {barcode: searchBarcode.barcode.value},
    function(output) {
        $('#mapContainer').html(output).show();
    });
} 
```

地图容器的 css 属性再次是可见性：无；但是地图不起作用...我想念什么...？？？帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:46:00.983

如果您的所有 JS 都已发布，那么您没有调用该`initialize()`函数。尝试在最后添加：

```
[..rest of code]
  echo "initialize();"
  echo "</script>"; 
```

# java - 如何检查 Java 中 BigInteger 的每个数字？

> ID：12921470
> 
> 赞同：5
> 
> 时间：2012-10-16T18:49:19.943
> 
> 标签：java, biginteger

如何检查`System.out.println()`Java 中 BigInteger 的每个数字（例如每个数字）？除了将其转换为字符串之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:02:43.883

直截了当的代码从最后一个到第一个打印数字：

```
private static void printDigits(BigInteger num) {
    BigInteger[] resultAndRemainder;
    do {
        resultAndRemainder = num.divideAndRemainder(BigInteger.TEN);
        System.out.println(Math.abs(resultAndRemainder[1].intValue()));
        num = resultAndRemainder[0];
    } while (num.compareTo(BigInteger.ZERO) != 0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:54:20.477

[`BigInteger`API 文档](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)似乎没有提供任何这样的功能。此外，这些数字很可能没有以 10 为基数表示（因为它的效率很低）。因此，检查 BigInteger 十进制数字的唯一方法很可能是查看其字符串表示形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:54:43.353

您当然可以使用基本数学来计算每个数字。特别是该方法`divideAndRemainder`可能在这里有所帮助。但我怀疑这是否比转换为字符串并检查字符更有效。毕竟，数学`BigInteger`比普通`int`或数学更昂贵。`long`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:55:08.043

我认为您可以做到的唯一方法是将其转换为字符串并验证每个字符。这是一个例子：

```
BigInteger bigInteger = new BigInteger("123");
String bigIntegerValue = bigInteger.toString();
for(int i = 0; i < bigIntegerValue.length(); i++) {
    System.out.println(bigIntegerValue.charAt(i));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:00:19.657

也许您可以尝试使用这样的[BitSet](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)检查大整数中的每一位，

```
 BitSet bitSet = BitSet.valueOf(bigInteger.toByteArray()); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-16T18:55:16.567

获取数字的每个数字所需的操作似乎很简单。创建一个循环来跟踪您的数字是否大于 10，然后对其执行 mod 10 操作，然后除以 10。

```
 while (num >10)
{
     System.out.println(num%10);
     num = num/10;

} 
```

# css - 如何用 CSS 实现这种对角下拉效果？

> ID：12921472
> 
> 赞同：3
> 
> 时间：2012-10-16T18:49:31.873
> 
> 标签：css

我正在尝试在 CSS 中实现下拉效果，就像您在此 JPG 中看到的那样。有什么想法可以做到这一点吗？只需要弄清楚如何使它对角线......谢谢！

![在此处输入图像描述](../Images/207b388c798262b020dd0008753b4164.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:37:38.427

试试这个可能有帮助

```
<ul class="menu">
    <li ><p class="inner">Item 1</p>
        <ul>
            <li  class="inner">sub menu 1</li> 
            <li class="inner">sub menu 2</li>   
            <li class="inner">sub menu 3</li>   
            <li class="inner">sub menu 4</li>               
        </ul>     
    </li>
    <li class="inner"><p class="inner">Item 2</p>
        <ul>
            <li class="inner">sub menu 1</li> 
            <li class="inner">sub menu 2</li>   
             <li class="inner">sub menu 3</li>   
            <li class="inner">sub menu 4</li>               
        </ul>     
    </li>
</ul>
​ 
```

CSS：

```
.menu{
   margin:20px;
}
.menu > li {
    margin:0px 10px;            
    width:70px;
    display:inline-block;
    float:left;
    width: 120px;
    height: 100px;
    -webkit-transform: skew(-20deg,0);
       -moz-transform: skew(-20deg,0);
         -o-transform: skew(-20deg,0);     
            -ms-transform: skew(-20deg,0);   
              transform: skew(-20deg,0);  
}
.menu>li:hover{
   background: #4BA2E9;
   color:white;
}
.menu li:hover  ul {
   display:block;
 }

.menu li ul{
    display:none;
    color:Blue;
}
.inner{
        -webkit-transform: skew(20deg,0);
           -moz-transform: skew(20deg,0);
             -o-transform: skew(20deg,0); 
               -ms-transform: skew(20deg,0);   
                  transform: skew(20deg,0);  
} 
```

[演示](http://jsfiddle.net/NYENb/9/)

# firefox - 忽略 Content-Length 标头？

> ID：12921483
> 
> 赞同：1
> 
> 时间：2012-10-16T18:50:01.323
> 
> 标签：firefox, http-headers, wget

一些直播视频的网站将使用 HTTP 直播流。默认情况下，`Content-Length`标题将设置为`2147483647`.

您可以使用`wget`命令行开关忽略此值

```
--ignore-length         ignore `Content-Length' header field. 
```

Firefox 可以在忽略 Content-Length 标头的情况下下载文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T10:47:48.430

我认为网络服务器的行为不正确。如果内容长度未知，HTTP 服务器应该使用分块编码。话虽如此，很容易测试浏览器如何处理不符合标准的 HTTP 服务器。

**测试设置**

创建具有所描述行为的虚拟 HTTP 服务器（我们使用 Python）：

```
#!/usr/bin/python

import SocketServer
import time

class MyHttpHandler(SocketServer.BaseRequestHandler):
    def send_stuff(self, msg):
        print msg
        self.request.send(msg)

    def handle(self):
        print("REQUEST: <<<" + self.request.recv(4096) + ">>>")
        headers = """HTTP/1.1 200 OK\r
Content-Length: 2147483647\r
Content-Type: text/html\r
rn"""
        self.send_stuff(headers)
        self.send_stuff("<html><body>n")
        for count in range(1,10):
            self.send_stuff("Hello, firefox!<p>n")
            time.sleep(1)
        self.send_stuff("</body></html>n")

if __name__ == "__main__":
    HOST, PORT = "0.0.0.0", 8888
    server = SocketServer.TCPServer((HOST, PORT), MyHttpHandler)
    server.serve_forever() 
```

（改编自[http://docs.python.org/3.3/library/socketserver.html](http://docs.python.org/3.3/library/socketserver.html)）。

**解释**

这就是示例程序的作用：

1.  等待传入的 TCP 连接
2.  阅读请求 ( `self.request.recv(4096)`)
3.  写响应头（使用`Content-Length: 2147483647`）
4.  写十次，两次`Hello, Firefox!<p>`之间睡眠 1 秒
5.  关闭连接（通过从`handle()`方法返回。

**插图**

下图说明了响应的样子：

```
$ curl -i 10.20.32.85:8888/
HTTP/1.1 200 OK
Content-Length: 2147483647
Content-Type: text/html

<html><body>
Hello, firefox!<p>
Hello, firefox!<p>
Hello, firefox!<p>
Hello, firefox!<p>
Hello, firefox!<p>
Hello, firefox!<p>
Hello, firefox!<p>
Hello, firefox!<p>
Hello, firefox!<p>
</body></html> 
```

（两`Hello, firefox!`行之间有一秒钟的停顿，需要 10 秒钟才能完成接收内容）。

**回答问题**

我的 Firefox 是 version `17.0.1`，并且（使用例如 URL `http://localhost:8888/`）*这个例子*似乎在等待 TCP 关闭。（相比之下，Chromium 浏览器不会显示任何内容。）由于缓存语义和在浏览器中实现的动态渲染，更大的内容的行为似乎有所不同。

**测试 - 变化**

我修改了`handler()`

```
 def handle(self):
        print("REQUEST: <<<" + self.request.recv(4096) + ">>>")
        headers = """HTTP/1.1 200 OK\r
Content-Length: 2147483647\r
Content-Type: text/html\r
\r\n"""
        self.send_stuff(headers)
        self.send_stuff("<html><body>\n")
        for i in range(1,11):
            for j in range(1,11):
                self.request.send("%d:%d: Hello, firefox!<p>\n" % (i, j))
                #self.send_stuff("Hello, firefox!<p>\n")
            print "i=%d" % i
            time.sleep(3)
        self.send_stuff("</body></html>\n")
        time.sleep(10) 
```

用更大的内容测试浏览器的行为。`(i,j) = (6,10)`在 TCP 关闭之前，我已经看到了内容 。

**TL;博士**

对于较小的内容主体，Firefox（版本`17.0.1`）在渲染任何内容之前等待 TCP 关闭，但如果内容主体较大，它将在 TCP 连接关闭之前开始渲染。请注意，这仅测试 HTML 内容，并且对于不同的内容类型，行为很可能会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:19:17.073

我认为这就是您要寻找的：[wget for firefox](https://addons.mozilla.org/en-us/firefox/addon/cliget/?src=search)

# c++ - 函数调用中释放的结构太多参数

> ID：12921487
> 
> 赞同：1
> 
> 时间：2012-10-16T18:50:13.993
> 
> 标签：c++, function, struct, arguments, free

我有一个列表结构：

```
typedef struct FaceNode{
    FaceNode *next;
    Face *aFace;
    FaceNode *prev; 
} FaceNode; 
```

我将此结构用作成员：

```
FaceNode *myFaces; 
```

并像这样初始化它（在构造函数中）

```
this->myFaces = (FaceNode*)malloc(sizeof(FaceNode)*1); 
```

后来我想按如下方式释放它：

```
FaceNode *theCurrentFaceNode;
Face* theCurrentFace;

while(this->myFaces->next){

   theCurrentFaceNode = this->myFaces;
   theCurrentFace = theCurrentFaceNode->aFace;

   this->myFaces = this->myFaces->next;

   free(theCurrentFace);
   free(theCurrentFaceNode);
} 
```

现在我的 IDE 告诉我：“错误，函数调用中的参数太多”对于免费调用。

那有什么问题呢？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:53:31.760

您显然已经声明了一个您自己的函数 named `free`，并且编译器发现它而不是您认为您正在调用的那个。使用范围解析运算符调用全局函数：

```
::free(theCurrentFace); 
```

或者找到另一个`free`函数并给它一个不同的名称。它可能是您正在实现的类的成员；也可以查看该类的祖先类。

# c# - DataTableReader 未更新

> ID：12921492
> 
> 赞同：1
> 
> 时间：2012-10-16T18:50:28.440
> 
> 标签：c#, ado.net

在 VS 2012 中，我创建了一个 DataTableReader 来读取现有的 DataTable。DataTable 配置为针对 SQLServer 数据库运行查询。当我在 DataSet 设计器中查看 DataTable 并选择 Preview Data 时，我得到了一个适当填充的表。但是，当我尝试在我的代码中使用 DataTableReader 查看它时，它返回为没有行。这是代码：

```
DataTableReader reader = this.myDataSet.myDataTable.CreateDataReader();
reader.Read();
if (reader.HasRows)
{
    while (reader.Read())
       {
           Console.WriteLine("{0}", reader.GetString(0));
       }
}
else
{
    Console.WriteLine("reader returned no rows");
} 
```

在 reader.HasRows 行（或之后）设置断点告诉我 HasRows 是错误的。DataTableReader 似乎与数据库建立了良好的连接，即它没有出错，但它没有返回我知道的行。您能帮我弄清楚为什么 DataSet Designer 中的 DataTable 'Preview Data' 可以工作，但不能在代码中工作吗？

# android - Android：使用 AlertDialog 的偏好

> ID：12921511
> 
> 赞同：3
> 
> 时间：2012-10-16T18:51:12.347
> 
> 标签：android, android-fragments

我`OnPreferenceClickListener`创建了一个新的`AlertDialog`，如下所示。当我运行程序时，我得到了期望

```
android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application 
```

我的代码有什么问题？

```
public static class PrefsFragment extends PreferenceFragment {
    Preference pref= findPreference("text_preference1");
    pref.setOnPreferenceClickListener(new OnPreferenceClickListener() {
        @Override
        public boolean onPreferenceClick(Preference preference) {
            new AlertDialog.Builder(mContext).setTitle(R.string.alert_dialog_title)
                    .setMessage(R.string.alert_dialog_message)
                    .setPositiveButton(R.string.alert_dialog_ok,
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                        }
                    })
                    .setNegativeButton(R.string.alert_dialog_nein, null).show();

                    //do s.th.
        return false;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:02:25.763

我认为你得到了`ApplicationContext`. 但它不应该用于创建对话框。

而不是`mContext`in`new AlertDialog.Builder(mContext)`你应该使用[getActivity()](http://developer.android.com/intl/ru/reference/android/app/Fragment.html#getActivity%28%29)，它返回与片段关联的活动。

由于您使用的是片段，因此只需调用 Fragments`getActivity()`方法即可获取 Activity 的上下文。

# php - 将数组传递给新的 php-script 或在同一个函数中执行（执行时间）

> ID：12921515
> 
> 赞同：0
> 
> 时间：2012-10-16T18:51:23.877
> 
> 标签：php, post, execution-time

我目前正在从事一个数据比其他项目更多的项目。我过滤了不同的 rss-feed 并将它们保存在我们的数据库中（我们已经联系了作者，他们对此表示满意；））。我们已经收集了一些数据，脚本大约需要 8 到 10 秒才能完成。该脚本由 cron-job 每 5 分钟调用一次。来自提要的文章是关于不同艺术家的，系统会检查它是哪些艺术家。

现在我们要添加一个系统，用户可以订阅不同的艺术家并在数据库中保存新文章时收到电子邮件。所以我的想法是简单地将新文章中的 id 传递给我们处理发送邮件的新函数。

现在，如果我们获得越来越多的数据，恐怕执行时间会变长。所以我有两个问题：你如何获得php脚本的执行时间？是服务器需要执行整个 php 文件还是不同的单个函数的时间？

我认为将 id 传递给新文件并执行新脚本可能会更好，因此执行时间不会太长。如果是这样，这是将数据传递到新文件并执行脚本的最佳方式。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:04:41.940

新文件概念最适合您的应用程序。我们每次都可以将单独的 id 传递到单独的页面，我们可以很容易地得到结果。

因此，我们可以使用 Ajax 并且可以显示加载器图标直到结果出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:06:39.557

通过调用 php 打开标记后立即在脚本顶部获取 unix 时间戳中的时间 `date("U");`，然后在执行脚本执行的任何操作时在脚本的最后再次调用它。您现在可以从第二个时间戳中减去第一个时间戳，剩下的就是执行时间（以秒为单位）。如果您想获得更精细的执行时间并使用微秒等，请查看[http://php.net/manual/en/function.date.php 。](http://php.net/manual/en/function.date.php)

如果是很短的运行脚本，可以使用 microtime 代替 date： http: [//php.net/manual/en/function.microtime.php](http://php.net/manual/en/function.microtime.php)

# spring - 使用 apache-ivy 从 3.0.5 迁移到 Spring 3.1：java.lang.IncompatibleClassChangeError：

> ID：12921519
> 
> 赞同：0
> 
> 时间：2012-10-16T18:51:38.860
> 
> 标签：spring, hibernate, maven-2, spring-security, dependency-management

在过去的两周里，我一直在为 Apache Ivy 管理依赖项而苦苦挣扎，但是每个人都在网上谈论的明显易用性（一旦 maven/gradle/apache-ivy 用于 DM）让我望而却步。有人可以帮忙看看我做错了什么吗？我会很感激的。

我正在尝试使用将现有的 Spring/JPA-Hibernate 应用程序迁移到最新的 Spring 和 Hibernate 发行版：

```
Spring 3.1.2
Spring Security 3.1.1
Hibernate 4.1 
```

我的环境：

```
Eclipse Helios
Tomcat 7.23 
```

常春藤.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<ivy-module version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd">    <info
    organisation=""
    module="FocusIvy"
    status="integration">
</info>
<dependencies>  
    <dependency org="org.hibernate" name="com.springsource.org.hibernate.ejb" rev="4.1.0.Final" />
    <dependency org="org.hibernate" name="com.springsource.org.hibernate.annotations" rev="3.4.0.GA-A" />
    <dependency org="org.hibernate.common" name="com.springsource.org.hibernate.annotations.common" rev="4.1.0.Final" />
    <dependency org="org.hibernate" name="com.springsource.org.hibernate" rev="4.1.0.Final" />
    <dependency org="org.hibernate" name="com.springsource.org.hibernate.core" rev="4.1.0.Final" />
    <dependency org="org.hibernate" name="com.springsource.org.hibernate.validator" rev="4.2.0.Final" /> 

    <dependency org="org.springframework" name="org.springframework.core" rev="3.1.2.RELEASE" />
    <dependency org="org.springframework" name="org.springframework.beans" rev="3.1.2.RELEASE" />
    <dependency org="org.springframework" name="org.springframework.context" rev="3.1.2.RELEASE" />
    <dependency org="org.springframework" name="org.springframework.context.support" rev="3.1.2.RELEASE" />
    <dependency org="org.springframework" name="org.springframework.transaction" rev="3.1.2.RELEASE" />
    <dependency org="org.springframework" name="org.springframework.jdbc" rev="3.1.2.RELEASE" />
    <dependency org="org.springframework" name="org.springframework.expression" rev="3.1.2.RELEASE" />  
    <dependency org="org.springframework" name="org.springframework.aop" rev="3.1.2.RELEASE" />
    <dependency org="org.springframework" name="org.springframework.web" rev="3.1.2.RELEASE" /> 
    <dependency org="org.springframework" name="org.springframework.web.servlet" rev="3.1.2.RELEASE" /> 
    <dependency org="org.springframework" name="org.springframework.orm" rev="3.1.2.RELEASE" />

    <dependency org="org.springframework.security" name="org.springframework.security.core" rev="3.1.1.RELEASE" />      
    <dependency org="org.springframework.security" name="org.springframework.security.aspects" rev="3.1.1.RELEASE" />
    <dependency org="org.springframework.security" name="org.springframework.security.taglibs" rev="3.1.1.RELEASE" />
    <dependency org="org.springframework.security" name="org.springframework.security.web" rev="3.1.1.RELEASE" />
    <dependency org="org.springframework.security" name="org.springframework.security.annotation" rev="2.0.6.RELEASE" />

    <dependency org="javax.activation" name="com.springsource.javax.activation"
            rev="1.1.1" />
    <dependency org="net.sourceforge.cglib" name="com.springsource.net.sf.cglib" rev="2.2.0" />             
</dependencies> 
</ivy-module> 
```

ivysettings.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<ivysettings>
<settings defaultResolver="defaultChain"
    defaultConflictManager="all" />

<resolvers>
    <url name="com.springsource.repository.bundles.release">
        <ivy
            pattern="http://repository.springsource.com/ivy/bundles/release/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
        <artifact
            pattern="http://repository.springsource.com/ivy/bundles/release/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
    </url>

    <url name="com.springsource.repository.bundles.external">
        <ivy
            pattern="http://repository.springsource.com/ivy/bundles/external/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
        <artifact
            pattern="http://repository.springsource.com/ivy/bundles/external/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
    </url>
    <chain name="defaultChain" returnFirst="true">
        <resolver ref="com.springsource.repository.bundles.release" />
        <resolver ref="com.springsource.repository.bundles.external" />
    </chain>
</resolvers>
</ivysettings> 
```

Tomcat 服务器启动（和应用程序部署）会导致一系列错误：

```
 WARNING: Unable to load class     [org.springframework.instrument.classloading.jboss.JBossMCAdapter] to check against the     @HandlesTypes annotation of one or more ServletContentInitializers.
 java.lang.IncompatibleClassChangeError: Implementing class
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2823)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1160)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1655)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:1988)
at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1951)
at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1840)
at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1808)
at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1794)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1214)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:828)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:302)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5148)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
 Oct 16, 2012 2:31:42 PM org.apache.catalina.startup.ContextConfig checkHandlesTypes
 WARNING: Unable to load class      [org.springframework.instrument.classloading.jboss.JBossModulesAdapter] to check against   the @HandlesTypes annotation of one or more ServletContentInitializers.
java.lang.IncompatibleClassChangeError: Implementing class
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2823)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1160)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1655)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:1988)
at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1951)
at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1840)
at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1808)
at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1794)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1214)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:828)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:302)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5148)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
   Oct 16, 2012 2:31:44 PM org.apache.catalina.startup.ContextConfig checkHandlesTypes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:03:58.320

**警告：无法加载类 [org.springframework.instrument.classloading.jboss.JBossMCAdapter] 以检查一个或多个 ServletContentInitializer 的 @HandlesTypes 注释。java.lang.IncompatibleClassChangeError：实现类**

总结起来很完美**Apache Tomcat 服务器不是 JBoss 服务器**。

其次，这似乎是 spring 框架内部的一个合理问题，所以是时候看看 spring 需要哪些设置才能在 Tomcat 而不是 JBoss 中加载

# powershell - PowerShell 测试路径返回 false 但应该为 true

> ID：12921521
> 
> 赞同：0
> 
> 时间：2012-10-16T18:51:51.483
> 
> 标签：powershell

在我的 PowerShell 开始时，我让它检查网络位置以确定是否有比当前版本更新的版本。但是，只有在我之前浏览过网络位置时，它才会返回 true。任何建议，我都考虑过映射驱动器然后删除驱动器位置，但我认为这有点极端。

```
$update=Test-Path "\\server\mylocation\Technology\Shared%20Documents\program\XXXXX.zip"
if($update -eq "True")
    {
    The rest of my code
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:56:10.320

尝试用空格替换 %20。%20 用于网址。

# c# - 如何使用 LINQ 从另一个列表中填充对象的属性

> ID：12921524
> 
> 赞同：4
> 
> 时间：2012-10-16T18:51:59.470
> 
> 标签：c#, linq

我有 2 个对象列表。一个有价值观，另一个有名字和价值观。我想在另一个列表中查找值并将结果写入 pref.Name。我知道我可以用 foreach 做到这一点，但我认为在 LINQ 中有一个很好的方法。想法？

```
public class Preference
    {
        public string Category { get; set; }
        public string Name { get; set; }
        public string ItemValue { get; set; }
        public int SortOrder { get; set; }
    }

public class SAPReadOnlyItem
    {
        public string Category { get; set; }
        public string Name { get; set; }
        public string ItemValue { get; set; }
    }

    List<Preference> preferences = getExistingUserPreferences(UserID, ddlCategory.SelectedValue); //this list is just keys
    List<SAPReadOnlyItem> sapReadOnlyItems = getSAPReadOnlyItems(ddlCategory.SelectedValue); //this list is names and keys

    //i want to look up the name from sapReadOnly using the ID from preferences and write it into preferences[n].Name

    //this works, but I want to write it into preferences[n].Name
    var foobar = (from sap in sapReadOnlyItems
                  join pref in preferences 
                  on sap.ItemValue equals pref.ItemValue
                  select new { asdf = sap.Name }).FirstOrDefault(); //instead of "select new" I want to write it into preferences[n].Name 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T11:44:42.747

我建议使用 Lambda foreach

```
preferences.ForEach(preference =>
                {
                    var sap = sapReadOnlyItems.FirstOrDefault(s => s.ItemValue = preference.ItemValue);
                    preference.Name = (sap != null) ? sap.Name : string.Empty;
                }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T20:57:02.400

您可以使用标准 linq 运算符加入和分配名称：

```
var query = preferences.Join(sapReadOnlyItems, 
                             p => p.ItemValue, 
                             s => s.ItemValue, 
                             (p, s) => { p.Name = s.Name; return p; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:02:39.470

我想出了这个：

```
foreach (Preference pref in preferences)
{
    pref.Name = sapReadOnlyItems.Where(sapItem => sapItem.ItemValue == pref.ItemValue).FirstOrDefault().Name;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:17:10.310

我不相信你想要的东西可以用特殊的 c# 语法来完成，而是你需要使用常规的方法链接语法。两种选择：

**方法#1：**

如果您想将它与 Linq 语法一起使用，这是一个 foreach 扩展方法：

```
sapReadOnlyItems.ForEach(s => preferences.Single(p => p.ItemValue == s.ItemValue).Name = s.Name); 
```

与此一起使用：

```
public static void ForEach<T>(this IEnumerable<T> items, Action<T> action)
{
    foreach(T item in items)
    {
        action(item);
    }
} 
```

**方法#2：**

如果您想要更新的首选项，您可以这样做：

```
var updatedPreferences = sapReadOnlyItems.Select(s => 
                         { 
                             var p = preferences.Single(p => p.ItemValue == s.ItemValue);
                             p.Name = s.Name;
                             return p;
                         }); 
```

# asp.net - 如何在单击 ASP.NET 按钮服务器端时切换到不同的 ajax？

> ID：12921526
> 
> 赞同：0
> 
> 时间：2012-10-16T18:52:02.473
> 
> 标签：asp.net, tabs, ajax.net

我在选项卡容器中有一组选项卡，我可以通过手动单击选项卡或使用 javascript 在它们之间自由移动；但是，我想做的是使用 ASP.NET 服务器端按钮在选项卡之间切换。

所以这里是布局。选项卡 1 有一个 ASP.NET 按钮，单击该按钮应转到选项卡 2 并在网格视图中显示查询结果。这是 ASP.NET 按钮的 onclick 代码：

```
 protected void btnOutstandingTasks_Click(object sender, EventArgs e)
    {
        try
        {
            // Load task list by all outstanding tickets
            SqlDSOutstanding.SelectParameters.Clear();
            SqlDSOutstanding.SelectParameters.Add("1", TypeCode.Int64, "3");

            gvxTaskList.DataSourceID = null;
            gvxTaskList.DataSource = SqlDSOutstanding;
            gvxTaskList.DataBind();
            upnlTaskList.Update();

            DispatchTabs.ActiveTabIndex = DispatchTabs.ActiveTabIndex + 1;   

        }
        catch (Exception ex)
        {

        }
    } 
```

不知道为什么它不工作，但我想有人知道怎么做。感谢帮助！

这是客户端显示选项卡容器位于更新面板内。

```
 <asp:UpdatePanel ID="upnlDispatch" UpdateMode="Conditional" runat="server">
        <Triggers></Triggers>
        <ContentTemplate>
            <ajaxToolkit:TabContainer ID="DispatchTabs" runat="server" Height="100%" Width="100%" CssClass="Tab" ActiveTabIndex="0">
                <ajaxToolkit:TabPanel ID="tabDashboard" runat="server" HeaderText="Dashboard" Width="100%" Height="100%">
                    <HeaderTemplate>
                        Dashboard
                    </HeaderTemplate>
                    <ContentTemplate>
                        <asp:UpdatePanel ID="upnlDashboard" UpdateMode="Conditional" runat="server">
                            <ContentTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:01:57.923

将选项卡容器放在更新面板中应该可以解决问题。此外，目前您的代码存在缺陷，您不希望总是只将 1 添加到 ActiveIndex 选项卡，因为如果超出最后一个，您将获得超出范围的异常。

```
if(DispatchTabs.ActiveTabIndex == DispatchTabs.Count() -1)
{
   DispatchTabs.ActiveTabIndex = 0;
}
else
{
   DispatchTabs.ActiveTabIndex = DispatchTabs.ActiveTabIndex + 1;  
} 
```

# ruby - Ruby，如何知道今天是否在批准的日期列表中？

> ID：12921527
> 
> 赞同：0
> 
> 时间：2012-10-16T18:52:08.677
> 
> 标签：ruby, date, weekday

我希望我的一门课只在周二、周三和周四开课​​。我有以下内容：

```
class ReminderJob

  def perform

    begin
        # Days to send: Tuesdays, Wednesdays, Thursdays
        next Date.today.wday.instance_of?('2,3,4') 
```

这个想法是，如果不是星期二，星期三，星期四，则存在该课程。关于如何用红宝石解决这个问题的建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:58:53.303

如果您只想让任务仅在特定日期/时间运行，您可能想要安排一个[cron 作业](http://en.wikipedia.org/wiki/Cron)。

如果你真的想让一个方法不做任何事情，除非它是一周中的某一天，你可以做这样的事情：

```
return unless [ :tuesday?, :wednesday?, :thursday? ].any? { |day| Date.today.send(day) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:07:03.997

不要将日程安排混入课程本身。让班级严格处理执行任务的逻辑。

使用 cron 进行调度。使用when gem 创建cron 作业。您可以指定它只应在一周中的某些日子、一天中的某些时间等执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:59:11.020

尽管您的问题尚不清楚，但这是我认为您确实有疑问的答案：

```
def perform
  return if [2,3,4].include? Date.today.wday
  puts "Your job!!!"
end 
```

# php - 在 PHP 中显示来自外部 XML 的数据

> ID：12921531
> 
> 赞同：1
> 
> 时间：2012-10-16T18:52:27.053
> 
> 标签：php, xml, ftp

我需要显示来自外部 FTP 服务器上的 XML 文档的数据...可以这样做吗？我想将整个文档显示为列表。我真的很难找出这是如何完成的，或者即使它可以完成。抱歉这个相当不具体的问题，但如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:58:51.980

PHP有FTP功能：

ftp_get [http://php.net/manual/en/function.ftp-get.php](http://php.net/manual/en/function.ftp-get.php)

获得文件后，您有几个选择：

将 XML 解析为（我假设）一个 HTML 列表[http://php.net/manual/en/book.xml.php](http://php.net/manual/en/book.xml.php)

或者使用 XSLT 转换[http://php.net/manual/en/xsl.examples.php](http://php.net/manual/en/xsl.examples.php)

# web-services - 您应该如何为多模块 Spring Maven 项目组织 applicationContext 文件？

> ID：12921534
> 
> 赞同：10
> 
> 时间：2012-10-16T18:52:39.323
> 
> 标签：web-services, spring, maven, inversion-of-control

我有一个使用 Spring IoC 的多模块 Maven 项目，例如

```
parent-proj
  - module1
  - module2
  - module3
  - web-module 
```

我的问题是：

组装 applicationContext 文件的最佳实践是什么？我应该在 web 模块中创建一个巨大的 applicationContext-web.xml 吗？或者我应该在每个子模块中创建 applicationContext-module<#>.xml，并将它们全部导入我的 applicationContext-web.xml？

我一直在使用第二个选项。现在看起来事情有点失控（例如，bean 覆盖具有相同 id 的 bean 等）。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T01:40:41.440

首先，如果module1、module2和module3是web-module中引用和使用的纯java库（例如，包含Domain Model、DAO、Service类等），我们通常不会在这个纯java库中操作Spring容器.

其次，您不应该按项目模块拆分 Spring 容器。根据需求，您可以通过应用层溢出 Spring 容器，并在 web 模块项目中定义多个 applicationContext 文件（以避免单个巨大的 applicationContext.xml）。例如，我们通常会这样做：

```
web-module/src/main/webapp/WEB-INF:
  applicationContext-dataAccess.xml
  applicationContext-dataStore.xml
  applicationContext-security.xml
  applicationContext-web.xml
  ... ...
  web.xml 
```

希望这是有道理的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T19:20:20.017

我也更喜欢第二种方法，但使用 Spring`classpath*:`伪 url。就像是：

```
<import resource="classpath*:META-INF/module-context.xml" /> 
```

这将在我的模块 META-INF 文件夹中加载任何模块 xml bean 定义。

> 现在看起来事情有点失控（例如，bean 覆盖具有相同 id 的 bean 等）。

这只是组织项目的问题。我总是尝试使用`@Autowired`Spring 可以根据我声明的接口解决依赖关系。当然，我从不扫描我的模块之外的包来逃避 Id 上的这类问题。

如果无法自动装配，则仅通过 xml 声明 bean 并将它们的 id 放在那里。

基本思想（不是针对 spring，而是针对模块化项目）[在这里](http://ocpsoft.org/java/jsf-java/how-to-modular-jsf-applications-with-cdi-and-prettyfaces/)得到了很好的解释。

# ios - 本地化 iOS 打印对话框

> ID：12921535
> 
> 赞同：0
> 
> 时间：2012-10-16T18:52:47.050
> 
> 标签：ios, localization

我正在为意大利语开发一个 iPhone 应用程序。

我在 info.plist 中设置了语言，但似乎不适用于某些控件作为 AirPrint 对话框。模拟器和 iPhone 设置为意大利语，但对话框是英语...

我正在为 iOS5 和 iOS6 开发应用程序

![信息列表](../Images/6e73e47c8396808b0e2b6fbc12841d11.png)

![在此处输入图像描述](../Images/a55db782316ceb1036f5da65bc403037.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:52:15.227

解决了。我在 plist 文件中创建了“本地化”键，然后删除了项目中的所有 MainStoryboard 引用，并从 it.lproj 文件夹中重新导入了故事板。

现在可以了。

# jquery - columnize jQuery - 强制列不变形

> ID：12921537
> 
> 赞同：1
> 
> 时间：2012-10-16T18:52:54.227
> 
> 标签：jquery, css, html

我使用 columnize 插件将我的长内容制作成报纸专栏。

它看起来像这样：[输入](http://impactweb.pl/columnize/)

问题是我使用了与此处相同的样式：[输入](http://jsfiddle.net/NPzsV/3/)以强制 div 保持在一行中。

他们不排队，这是第一个问题，第二个问题是如何强制这些列具有恒定的高度。

我也愿意接受其他解决方案。需要恒定高度、多列、水平滚动的内容页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:56:50.530

获取文档的宽度和高度。然后基于这两个开始构建你的元素。决定你想要多少列，这将决定它们的宽度。由于您声明高度是恒定的，因此已经处理好了。用于`overflow: auto;`在列内实现滚动条，以便在内容对于空间而言过大时允许水平滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:18:27.867

要使用分栏器保持精确的宽度并水平滚动，只需`height`向输入添加一个属性，如下所示：http: [//jsfiddle.net/NPzsV/3/和](http://jsfiddle.net/NPzsV/3/)[文档页面](http://welcome.totheinter.net/columnizer-jquery-plugin/)上的示例 5 。

```
$('#a').columnize({width: 400, height: 500}) 
```

会成功的

# perl - perl 警报未按预期工作

> ID：12921539
> 
> 赞同：2
> 
> 时间：2012-10-16T18:52:58.197
> 
> 标签：perl, cgi, alarms

我有一个简单的 perl 脚本，它调用一个从浏览器调用时总是“挂起”的 shell 脚本。我只想在 20 秒后强制暂停。当我在命令行中运行它时，没有问题。但是当我从浏览器执行此操作时，脚本已执行但从未完成加载。所以我没有得到页面上的输出。如果我在命令行中杀死 -9 进程，则浏览器完成加载，并在浏览器中显示内容。

我做了很多研究，似乎 Web 服务器正在等待 shell 脚本完成，因为 shell 脚本仍然有一个标准输出的打开文件句柄。

这是我的代码。

```
#!/usr/bin/perl

use strict;
use warnings;

use CGI;

my $q = new CGI;

print $q->header;

my $timeout = 10;
my $pid = fork;

if ( defined $pid ) {
     if ( $pid ) {

         # this is the parent process
         local $SIG{ALRM} = sub { die "TIMEOUT" };

         alarm 10;

         # wait until child returns or timeout occurs    
         eval {
             waitpid( $pid, 0 );
         };

         alarm 0;

         if ( $@ && $@ =~ m/TIMEOUT/ ) {
            # timeout, kill the child process
            kill 9, $pid;
         }
    }
    else {
         # this is the child process
         # this call will never return. Note the use of exec instead of system
         exec "/opt/bea/domains/fsa/scripts/start.sh";
    }
}
else {
     die "Could not fork.";
} 
```

在一定时间后，无论 shell 脚本的状态如何，如何强制页面完成加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:23:53.853

问题是在您的脚本完成后，网络服务器仍在等待所有创建的（甚至是您创建的）子节点完成。如何处理它的最佳方法是使用`setsid`. 或者你甚至可以尝试“[双叉把戏](https://stackoverflow.com/questions/881388/what-is-the-reason-for-performing-a-double-fork-when-creating-a-daemon)”，你从孩子那里分叉，然后再分叉。之后，第一个孩子将退出，第二个孩子成为孩子 if `init`。还要确保（在这两种情况下）在孩子中你这样做：

```
close STDIN;
close STDOUT;
close STDERR; 
```

# xpath - xquery-如何获取数值列表中连续值之间的差异

> ID：12921541
> 
> 赞同：1
> 
> 时间：2012-10-16T18:53:03.180
> 
> 标签：xpath, xquery, flwor, xpath-3.0, xquery-3.0

我已经成功地提取了一个变量中的一个值，以及另一个变量中的值列表（作为我的 XQuery 表达式的一部分）。

现在，假设单值变量是

```
x=1 
```

并且列表变量名为 y ，其值为 2,4,7,11,16

我想提取以下值——(2-1)、(4-2)、(7-4)、(11-7)、(16-11)

即，列表变量的第一个值减去单值变量，然后是列表变量的连续成员之间的差异。

我尝试使用

```
for $pos in list-variable/position() 
-> if clause for $pos=1 (to subtract and shown list variable- single value variable)    
->else show difference b/w consecutive list variables... 
```

但根本没有显示任何输出......我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:36:04.903

**I. 对于 XQuery 3.0 / Xpath 3.0，使用**：

```
let $pVal := 1,
    $vList := (2,4,7,11,16),
    $vList2 := ($pVal, subsequence($vList, 1, count($vList)-1))
 return
    map-pairs(function($m as xs:integer, $n as xs:integer) as xs:integer
                {
                 $m - $n
                },
                $vList,
                $vList2
              ) 
```

**这会产生想要的正确结果**：

```
1 2 3 4 5 
```

* * *

**二、XQuery 1.0 解决方案**：

```
let $pVal := 1,
    $vList := (2,4,7,11,16),
    $vList2 := ($pVal, subsequence($vList, 1, count($vList)-1))
 return
    for $i in 1 to count($vList)
     return
        $vList[$i] - $vList2[$i] 
```

**再次产生相同的正确结果**：

```
1 2 3 4 5 
```

**性能比较**：

令人惊讶的是，当在 BaseX 上运行时，XPath (XQuery) 3.0 查询的执行速度几乎是 XQuery 1.0 的两倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:35:16.127

你的例子太抽象了，你真的不清楚你试图使用什么。

但是您可以像这样减去 $x 或前一个元素：

```
 let $x := 1, $seq := (2,4,7,11,16)  
 for $temp at $pos in $seq 
 return $seq[$pos] - if ($pos eq 1) then $x else $seq[$pos - 1] 
```

如果你想要这个职位，记得使用'at $pos'。

（顺便说一句，XQuery 3 也有专门针对这种情况的 window 子句：

可能看起来像这样：

```
 let $x := 1, $seq := (2,4,7,11,16) 
 for sliding window $w in ($x, $seq)
     start at $s when fn:true()
     only end at $e when $e - $s eq 1
 return $w[2] - $w[1] 
```

看起来并不容易，但它更酷）

# qt - 如何将glew库导入QT

> ID：12921543
> 
> 赞同：1
> 
> 时间：2012-10-16T18:53:15.177
> 
> 标签：qt, import, glew

我想问是否有人可以帮助在 Windows 7 上将 glew 库导入 QT 4.7。我访问了 glew 网站并下载了 glew 库，将 glew32.dll 复制到我的 system32 文件夹中。但我不知道下一步该做什么。当我尝试包含它时，Qt 无法识别 glew。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:56:33.437

对于编译为共享库或静态库的每个库，它都是相同的。

1）将标题放在程序的包含路径中的某个位置。

2) 使用标题中定义的符号。

3) 链接到图书馆。在您的情况下，只需将 dll 放在您编译的可执行文件旁边。

# java - 如何在每个 jsf 页面加载之前调用支持 bean 构造函数/方法？

> ID：12921556
> 
> 赞同：0
> 
> 时间：2012-10-16T18:54:02.993
> 
> 标签：java, jsf, session

我已经使用 session as 管理 bean `managedbean-scope`，现在在支持 bean 的构造函数中，正在做一些验证，但是由于 bean 的范围是`session`当用户第一次尝试点击`upload`页面时，我正在调用托管 bean 的构造函数并进行一些验证以查看用户是否是否可以访问上传页面。

所以在第一次尝试时，我正在调用构造函数，我收到验证错误消息，说`upload`该页面对用户不可用，但现在如果我转到任何其他选项卡并单击返回到`upload`页面菜单选项卡，该页面会显示，我该如何更改行为，以便在每个 pageLoad 上检查验证，我也不能将`managed-scoped`其`request`用于页面，因为我需要在同一会话中的不同请求之间维护一些信息。

这是代码：

支持 Bean 构造函数：

```
public Upload()
{
    ValidationStatus authorizeBean = validateUSER(user);                
} 
```

Faces-config.xml

```
<managed-bean>
        <managed-bean-name>fileUpload</managed-bean-name>
        <managed-bean-class>Upload</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:49:10.667

我认为豆是这样做的错误的地方。我将使用 servlet 过滤器或 JSF Phase 侦听器来处理页面访问。

此处是使用 servlet 过滤器控制页面访问的示例[。](https://stackoverflow.com/questions/12516349/jsf-how-control-access-and-rights-in-jsf)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-16T20:21:09.823

采用`@PostConstruct`

参考在[这里](http://weblogs.java.net/blog/jhook/archive/2007/05/jsf_12_ri_backi.html)。

在你的`JSF`支持豆中

```
@PostConstruct
public void initIt(){
}

@PreDestroy
public void cleanUp(){
} 
```

# debugging - 使用 !obtrace 查找丢失的取消引用

> ID：12921557
> 
> 赞同：1
> 
> 时间：2012-10-16T18:54:07.403
> 
> 标签：debugging, windbg

任何人都知道使用 !obtrace 时找到丢失的取消引用的更简单方法吗？

Windbg 中的示例输出为：

```
kd> !obtrace 0xfa96f700
Object: fa96f700        Image: cmd.exe
Sequence  (+/-)  Stack
--------  -----  ---------------------------------------------------
   2421d    +1  nt!ObCreateObject+180
                nt!NtCreateEvent+92
                nt!KiFastCallEntry+104
                nt!ZwCreateEvent+11
                win32k!UserThreadCallout+6f
                win32k!W32pThreadCallout+38
                nt!PsConvertToGuiThread+174
                nt!KiBBTUnexpectedRange+c

   2421e    -1  nt!ObfDereferenceObject+19
                nt!NtCreateEvent+d4
                nt!KiFastCallEntry+104
                nt!ZwCreateEvent+11
                win32k!UserThreadCallout+6f
                win32k!W32pThreadCallout+38
                nt!PsConvertToGuiThread+174
                nt!KiBBTUnexpectedRange+c

   2421f    +1  nt!ObReferenceObjectByHandle+1c3
                win32k!xxxCreateThreadInfo+37d
                win32k!UserThreadCallout+6f
                win32k!W32pThreadCallout+38
                nt!PsConvertToGuiThread+174
                nt!KiBBTUnexpectedRange+c

   24220    +1  nt!ObReferenceObjectByHandle+1c3
                win32k!ProtectHandle+22
                win32k!xxxCreateThreadInfo+3a0
                win32k!UserThreadCallout+6f
                win32k!W32pThreadCallout+38
                nt!PsConvertToGuiThread+174
                nt!KiBBTUnexpectedRange+c

   24221    -1  nt!ObfDereferenceObject+19
                win32k!xxxCreateThreadInfo+3a0
                win32k!UserThreadCallout+6f
                win32k!W32pThreadCallout+38
                nt!PsConvertToGuiThread+174
                nt!KiBBTUnexpectedRange+c

----  ----------------------------------------------------------
References: 3, Dereferences 2 
```

如果有数千个引用，则几乎不可能找到丢失的取消引用。

# c# - 更新 POCO 实体中的相关属性（如触发器），有可能吗？

> ID：12921559
> 
> 赞同：2
> 
> 时间：2012-10-16T18:54:14.967
> 
> 标签：c#, entity-framework, linq-to-entities, poco

我有以下 POCO 实体：

```
public class User 
{
    [...other properties...]

    public byte Status { get; set; }
    public DateTime? DataStatus { get; set; }  
} 
```

我想要的是：在`set`property 的方法中，用当前日期`Status`更新，这可能吗？`DataStatus``Status`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:59:27.497

如果您首先使用代码，则可以将属性返回到私有字段并实现自己的 getter 和 setter。如果您首先使用 DB/Model，您可以覆盖生成的类中的方法，因为它们是部分的。我猜你的例子，你可以做以下事情。

```
public class User
{
    private byte _status;
    public byte Status
    {
        get { return _status; }
        set
        {
            _status = value;
            this.DataStatus = DateTime.Now;
        }
    }
    public DateTime? DataStatus { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:30:44.197

```
public void SetupDbContext(DbContext context)
{
    (DbContext as System.Data.Entity.Infrastructure.IObjectContextAdapter).ObjectContext.SavingChanges += delegate(object sender, EventArgs e)
    {
        var modified = context.ChangeTracker.Entries<User>().Where(entry => entry.State == EntityState.Modified);
        foreach (var entry in modified)
        {
            if (entry.Property("Status").IsModified)
            {
                entry.Entity.DataStatus = DateTime.Now;
            }
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T19:03:10.530

如果您使用带有支持属性的变量，而不是自动属性：

```
public class User {
    private byte m_Status;
    private DateTime? m_DataStatus;

    public byte Status {
        get { return m_Status; }
        set { m_DataStatus = DateTime.Now; m_Status = value; }
    }
    public DateTime? DataStatus {
        get { return m_DataStatus; }
        set { m_DataStatus = value; }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T19:01:08.660

当然，这很简单。您必须使用支持字段属性而不是自动属性：

```
public class User
{

    private byte _status;
    public byte Status
    {
        get { return _status; }
        set
        {
            _status = value;
            DataStatus = DateTime.Now;
        }
    }
    public DateTime? DataStatus { get; set; }
} 
```

# hibernate - Hibernate 3.5 与 4 IDENTITY_INSERT 问题

> ID：12921560
> 
> 赞同：7
> 
> 时间：2012-10-16T18:54:14.880
> 
> 标签：hibernate, transactions, implicit, identity-insert

我们运行 Spring 3.1/Hibernate 4/Java 7/Tomcat 7/MSSQL 2008 R2 Web 应用程序。我们必须处理遗留数据和存档数据。从存档中提取数据时，我们需要使用原始的唯一标识符，以便其他（非存档）记录正确地重新水合。这些标识符存储在主键/自动增量字段中。

在此之前，当我们使用 Spring 3.0/Hibernate 3.5 时，以下代码可以将提取的记录插入到相应的表中（我们已经有变量`session`,`entity`和`fullTableName`在范围内）：

```
session.doWork( new Work() 
{ 
    @Override
    public void execute(Connection connection) throws SQLException
    {
        PreparedStatement statement = null;
        try
        {
            statement = connection.prepareStatement(String.format("SET IDENTITY_INSERT %s ON", fullTableName));
            statement.execute();

            session.save(entity);

            statement = connection.prepareStatement(String.format("SET IDENTITY_INSERT %s OFF", fullTableName));
            statement.execute();
        }
        finally
        {  /* close the statement */ }
    }
}); 
```

就像我提到的，这在 Hibernate 3.5 中一切正常，但现在我们已经升级到 Hibernate 4，它已经停止工作了。Work和IsolatedWork之间有什么区别吗？

为了解决问题并避免任何工作界面问题，我们尝试了以下方法：

```
session.createSQLQuery(String.format("SET IDENTITY_INSERT %s ON", fullTableName)).executeUpdate();
session.save(entity);
session.createSQLQuery(String.format("SET IDENTITY_INSERT %s OFF", fullTableName)).executeUpdate(); 
```

但是，这也不起作用。具体来说，抛出的异常是`java.sql.SQLException: Cannot insert explicit value for identity column in table 'Employee' when IDENTITY_INSERT is set to OFF.`然而，应该清楚的是，我们正在努力将其设置为 ON。

我们对这种情况进行了 SQL Server Profiler 跟踪，并发现了一些有趣的东西。在我们的每个交易主体中都设置了 IMPLICIT_TRANSACTIONS ON。以下是 Profiler 跟踪的一些示例输出（我已将我们的实际模式替换为`<schema>`，以及一些带有较短标签的大数据位）：

```
SET IMPLICIT_TRANSACTIONS ON
go
declare @p1 int
set @p1=55
exec sp_prepare @p1 output,N'',N'SET IDENTITY_INSERT <schema>.Employee ON',1
select @p1
go
exec sp_execute 55
go

declare @p1 int
set @p1=56
exec sp_prepare @p1 output,N'<parameters for the INSERT>',N'insert into <schema>.Employee (<all the column names>) values ( <all the parameters> )',1
select @p1
go
exec sp_execute 56,<the actual values to insert>
go
IF @@TRANCOUNT > 0 ROLLBACK TRAN
go
IF @@TRANCOUNT > 0 COMMIT TRAN
SET IMPLICIT_TRANSACTIONS OFF
go
exec sp_execute 54,N'Error writing EMPLOYEE archive record. ',<an id>,N'1'
go 
```

现在，我们通过事务中的 Connection.setAutoCommit(false) 专门将 IMPLICIT_TRANSACTIONS 设置为 OFF（通过 Spring @Transactional 和 Hibernate Transaction Manager 管理事务）。显然，这是行不通的，但是除了使用 setAutoCommit 之外还有什么替代方法，为什么它可以在 Spring3.0/Hibernate 3.5 中工作而不是 Spring 3.1/Hibernate 4？

感谢您的任何想法或建议 - 我们很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:24:43.543

嗯，这是一个微妙的解决方案......

我们的 Work 调用在`java.sql.PreparedStatement`内部使用了 a，然后我们调用了该`execute()`方法。显然，这告诉 SQL Server 将命令包装在自己的存储过程中，如一些代码示例所示。

我们从使用 a 更改`PreparedStatement`为简单的 a`java.sql.Statement`并调用它的`execute()`方法：

```
session.doWork( new Work() 
{ 
    @Override
    public void execute(Connection connection) throws SQLException
    {
        Statement statement = null;
        try
        {
            statement = connection.createStatement();
            statement.execute(String.format("SET IDENTITY_INSERT %s ON", fullTableName));

            session.save(entity);

            statement = connection.createStatement();
            statement.execute(String.format("SET IDENTITY_INSERT %s OFF", fullTableName));
        }
        finally
        {  /* close the statement */ }
    }
}); 
```

那么，有什么区别呢？据我们所知，`PreparedStatement`生成预编译的 SQL，而`Statement`生成静态 SQL……正是我们调用`IDENTITY_INSERT`!

教训：人渣和恶棍的蜂巢很多……我们必须小心！

# php - 如何从 chrome 扩展中安全地更新远程数据库？

> ID：12921562
> 
> 赞同：8
> 
> 时间：2012-10-16T18:54:24.943
> 
> 标签：php, mysql, google-chrome-extension, javascript-security

我很难弄清楚这一点。花了大约 4 个小时在网上爬行，没有 SO 帖子来救我。

想象一个场景：

1.  我已经编写了一个 chrome 扩展程序，它可以捕获网页上的一些特定操作（主要是单击按钮）。该动作触发了一个函数，该函数捕获一些用户信息和按钮信息（都存在于页面本身上）并显示它

2.  现在我希望插件应该能够将其更新到远程服务器上的数据库设置中。

由于我精通 PHP（因此 MySQL 是不错的选择），我正在寻找一种解决方案来确保仅且仅从扩展本身进行更新。

为此，我认为最好的选择是运行 GET/POST 请求，例如[http://remoteserver.tld/update-db.php?id=XXXX&action=YYYYY&foo=bar](http://remoteserver.tld/update-db.php?id=XXXX&action=YYYYY&foo=bar) .... 等。但是如果用户在插件外部打开/传递帖子变量到这个 url？

数据仍将更新，完整性将丢失！

下一个最好的想法是在请求中包含密钥，但是扩展是用 JS 编写的，几乎任何人都可以嗅出密钥。

指导我更新远程服务器上的数据库并确保操作经过身份验证的最佳方法。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:37:02.390

这里的问题基本上是身份验证之一，您想防止任何人都能够更新任何其他人的数据存储。

最明显的解决方法是发送一个难以枚举的附加参数（散列是一个很好的例子）并且只分配给扩展的单个实例（因此每个用户都会生成它自己的身份验证散列）。

要使此散列有效，重要的是它不可猜测。不要仅根据 ip-adressess 或用户代理字符串等静态内容创建散列。

您可以包含这些静态字符串以降低冲突的可能性：[pseudo] sha1(ip_address+user_agent+random_integer)。

所以基本上对你来说，这最终会得到以下结果：如果它第一次运行，让扩展为当前实例生成一个哈希，向你的服务器发出初始请求以“注册”这个新实例，所有后续请求都有这个hash 将对该实例进行身份验证。

此外，使用 SSL 加密连接来防止嗅探。

请不要通过像 XORing 这样的默默无闻来解决这个问题，人们会发现的。

哦，顺便说一句，如果你的问题是关于数据完整性本身，你无法解决这个问题。发送的数据始终由用户提供，因为机器所做的一切都在该用户的控制之下（假设）。

# php - 什么会导致 upsert 失败（不插入任何行）？

> ID：12921568
> 
> 赞同：1
> 
> 时间：2012-10-16T18:54:43.957
> 
> 标签：php, mysql, mysqli, upsert

我有一个 INSERT INTO ... ON DUPLICATE KEY UPDATE 查询由于某种原因被mysql服务器忽略，至少据我所知。

它正在更新现有行。

我有一个“id”的主键，part_no 被列为唯一。

这是查询：

```
INSERT INTO parts_prices (cost, 
chatsworth, 
atlanta,
north_carolina,
new_jersey,
arizona, 
colorado,
miami,
indianapolis, 
ohio, 
oregon,
dallas,
san_antonio,
washington,
memphis,
alt_sup,
part_no)
VALUES (0.00, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, '', 'HS3163')
ON DUPLICATE KEY UPDATE 
cost=VALUES(cost), chatsworth=VALUES(chatsworth), atlanta=VALUES(atlanta), north_carolina=VALUES(north_carolina), new_jersey=VALUES(new_jersey), arizona=VALUES(arizona), colorado=VALUES(colorado), miami=VALUES(miami),
indianapolis=VALUES(indianapolis), ohio=VALUES(ohio), oregon=VALUES(oregon), dallas=VALUES(dallas), san_antonio=VALUES(san_antonio), washington=VALUES(washington), memphis=VALUES(memphis), alt_sup=VALUES(alt_sup) 
```

第一列是小数，然后是一堆整数，最后两列是 varchars。这是零件列表数据库中的一个条目（我们碰巧列出了零件编号，但实际上还没有）。我正在遍历所有零件编号的列表（通过使用 last_modified 列），并且此特定查询不会更新时间戳。

这可能是因为行中的信息实际上并没有改变（所有指定的值都与初始值相同）吗？

该查询适用于数据库中的（相当多）以前的条目。

[编辑] 我已经从 PHP 脚本和直接（使用 phpmyadmin）检查了查询中的响应错误，它们不返回任何错误字符串。[/编辑]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:58:47.230

`on update current_timestamp`仅当至少其中一列实际更新时才会生效。如果您尝试使用它已有的值更新行，它不会算作更新（受影响的行数不变）并且`on update`不会生效。

`last_modified=now()`手动添加到您的更新会更可靠。

# windows - 在 Windows 批处理文件的字符串变量中使用 %2*

> ID：12921569
> 
> 赞同：2
> 
> 时间：2012-10-16T18:54:45.227
> 
> 标签：windows, batch-file, variable-assignment

我正在尝试批量创建一个简单的脚本以在 Windows 中运行，该脚本有 3 个变量：

1.  要打开的 URL
2.  要打开的窗口数量
3.  等待新窗口打开的时间

该脚本工作正常，除非 URL 包含像 %20 或 %2F 这样的字符，我猜 cmd.exe 试图将它们用作变量，我将 URL 的值放在引号之间，但这没有帮助。

如果我使用地址：

```
set url="http://domain.com/app.html?path=%2F%2Flocalhost%2Fcode&do_pause=false&go=true" 
```

浏览器打开这个：

```
https://domain.com/app.html?path=FFlocalhostFcode&do_pause=false&go=true 
```

有没有办法可以设置变量或处理它的值，这样它就不会将这些符号解释为变量名？

在此先感谢，这是供参考的代码。这是我第一次尝试批量编写脚本，因此非常感谢任何建议。

```
@echo off

echo "Setting variables..."
set iterations=2
set url="http://domain.com/app.html?path=%2F%2Flocalhost%2Fcode&do_pause=false&go=true"
set time=5

set browser="C:\Program Files\Google\Chrome\Application\chrome.exe"

echo "Running the browser..."
FOR /L %%i IN (1,1,%iterations%) DO (
%browser% %url%
timeout %time%
)

ECHO Browsers are running, press Enter when ready to close this window. . .
pause 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:00:19.337

尝试：

```
set url="http://domain.com/app.html?path=%%2F%%2Flocalhost%%2Fcode&do_pause=false&go=true" 
```

在批处理文件中，您需要 %% 代替 %，因为 %1、%2 等用于命令行参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:57:18.783

~~我不完全确定——那是很久以前的事了。请试试这个：~~

 ~~```
set url="http://domain.com/app.html?path=^%2F^%2Flocalhost^%2Fcode&do_pause=false&go=true" 
```~~  ~~好的，最后我找到了插入符号 ( `^`) 转义的地方以及应该用插入符号转义的内容：

> 第四，所有不在双引号中的保留 shell 字符都必须转义。这些字符对 Windows NT 命令外壳具有特殊意义。保留的 shell 字符是：
> 
> & | ( ) < > ^
> 
> 要将保留的 shell 字符作为命令参数的一部分传递，必须将整个参数括在双引号中，或者必须对保留字符进行转义。在保留字符前加上克拉 (^) 字符以对其进行转义。例如，以下命令示例将无法按预期工作，因为 < 和 > 是保留的 shell 字符：

来源 (http://technet.microsoft.com/en-us/library/cc723564.aspx) 显然是对收集在一个文档中的 CMD 脚本中一些未明确定义的内容的良好阅读。但是它没有描述 '%' 引用。尽管如此，我发现一个地方提到了这个`%%`案例，但不是在一般情况下：

```
Use of CALL to expand a line a second time.
set var=one
(
  set var=two
  echo %var%
  call echo %%var%%
)

Only the second call echo will output two, as the parser will first parse the 
line when parsing the block to call echo %var%, as doubled percents are reduced
to one. 
```

来源：[http ://technet.microsoft.com/en-us/library/cc732835(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc732835(v=ws.10).aspx)

然而，整个**官方** [命令行参考](http://technet.microsoft.com/en-us/library/cc754340%28v=ws.10%29.aspx)充满了“看起来像”这样的词：

```
Reparsing of parenthesis blocks also fails with strange error messages, it seems 
to discover some parser/token internals. 
call (echo one ^| echo two) 
```

因此，我的印象是没有人真正知道甚至试图定义或多或少结构化的`cmd`shell 语法和行为。~~

# javascript - 使用 Jquery 工具动态添加和更改覆盖

> ID：12921574
> 
> 赞同：0
> 
> 时间：2012-10-16T18:55:10.163
> 
> 标签：javascript, jquery, dom, jquery-tools

我正在使用 Jquery 工具，我需要能够动态添加或更改覆盖，但我似乎无法让它工作。基本上，当我从 ajax 调用中获取 html 时，我想删除一个覆盖，然后添加另一个。在某些情况下，我需要一起添加叠加层。我在这个 jsfiddle 中重新创建了问题。

[http://jsfiddle.net/WK9wk/1/](http://jsfiddle.net/WK9wk/1/)

如果您单击覆盖显示的图片。单击按钮，将动态更改叠加层。之后，覆盖不再显示。

# java - 尝试从磁盘上的文件加载类时出现 java.io.InvalidClassException

> ID：12921578
> 
> 赞同：0
> 
> 时间：2012-10-16T18:55:26.910
> 
> 标签：java, exception, serialization

> **可能重复：**
> [Java 序列化 - java.io.InvalidClassException 本地类不兼容](https://stackoverflow.com/questions/8335813/java-serialization-java-io-invalidclassexception-local-class-incompatible)

我编写了一个程序，将对象（比如 A）存储为文件（比如 F）。因此，当您稍后运行程序时，您可以加载它并使用它的内容。到目前为止，一切都很好。但是今天我决定对 A 类进行一些更改。我做了一个备份（称为 Aold）。但我意识到为时已晚的是，存储在 F 上的信息对我来说非常有价值。当然，当我尝试将其作为新对象 A 加载时，它失败了。接下来我写了一个转换器，它将一个带有 Aold 对象的文件作为其内容并将其转换为一个新的 A 类（我还在吗？）然后将它写回磁盘。这样，下次我的程序就可以直接加载了。我再次将 oldA 重命名为 A。

但是恐怖。惊恐的事件。当我尝试从磁盘加载和 A 对象时出现此异常：

java.io.InvalidClassException：模型.A；本地类不兼容：流classdesc serialVersionUID = -4621085703760431015，本地类serialVersionUID = -3183461156231139807

我只是搞砸了，信息丢失了吗？或者有解决办法吗？

# mysql - @Transactional 不执行提交

> ID：12921582
> 
> 赞同：2
> 
> 时间：2012-10-16T18:55:42.817
> 
> 标签：mysql, spring, jpa, transactions

请参阅我的以下代码片段。

```
@Transactional
public void saveMembersService(List<Member> list1, List<Member> list2)
{
    saveMembersDAO(list1); // does not perform commit. Why?
    saveMembersDAO(list2); // does not perform commit. Why?
} // does perform commit only here!

@PersistenceContext
private EntityManager em;

@Transactional
public void saveMembersDAO(List<Member> members)
    throws HibernateException
{
    Iterator<Member> it = members.iterator();
    while (it.hasNext())
    {
        Member wsBean = it.next();
        em.persist(wsBean); // overall commit will be made after method exit
    }
} 
```

我使用 MySQL 作为数据库。在执行上述方法后，我会查看 MySql 日志。*但是在saveMembersService*方法执行后我只能看到**单个**提交。我希望看到每个事务方法调用的**两个**提交。我哪里错了？

 *****更新 1：**对不起，我忘记将 @Transactional 添加到我的服务方法中。现在修好了

**更新 2：**我已经检查了 DAO 的**Propagation.REQUIRES_NEW**属性 - 结果是相同的（在服务方法中使用和不使用 @Transactional）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:05:10.567

当使用@Transactional 时，Spring 会在您的类周围创建一个代理，并且内部调用的方法不会传入代理。

你必须这样做。您可以通过在 Spring 上下文中创建 TransactionTemplate 来清理它。

```
@Autowired
private PlatformTransactionManager transactionManager;

public void saveMembersDAO(List<Member> members)
    throws HibernateException
{
    TransactionDefinition txDef = new DefaultTransactionDefinition(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
    TransactionTemplate txTemplate = new TransactionTemplate(transactionManager, trDef)

    txTemplate.execute(new TransactionCallbackWithoutResult() {

        @Override
        protected void doInTransactionWithoutResult(TransactionStatus status) {
            Iterator<Member> it = members.iterator();
            while (it.hasNext())
            {
                Member wsBean = it.next();
                em.persist(wsBean);
            }
        }
    });
} 
```

如果您正在使用 AspectJ 并且想要进行 2 次提交。您必须在 saveMembersDAO 上使用 @Transactional(propagation = Propagation.REQUIRES_NEW)***

# python - 将数字 5 添加到小于 4 的向量的所有值的循环

> ID：12921589
> 
> 赞同：1
> 
> 时间：2012-10-16T18:56:30.510
> 
> 标签：python

如果向量中的数字小于 4，我试图将 5 添加到该向量。我觉得我很接近，但它运行不正确。谁能给我一些帮助，将 5 添加到向量中小于 4 的任何值？

```
from pylab import * 
numberlist = [3.2,6,7.8,1,3,2.5]
def x(numberlist):
    for num in numberlist:
        if num > 4:
            print(num)
        else :
            print(num + 5)
print x([3.2,6,7.8,1,3,2.5]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:59:14.823

怎么样

```
x = [ v + 5 if v < 4 else v for v in x ] 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:14:12.747

如果我正确理解 PyLab 的含义，那么您应该有一个可用的 numpy 数组，并且应该避免 for 循环并使用数组操作......

```
from pylab import * # which should bring numpy ndarray into scope!?
a = ndarray( [3.2,6,7.8,1,3,2.5] )
a[a < 4] += 5.
print a
# [ 8.2  6\.   7.8  6\.   8\.   7.5] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T19:18:45.137

你所拥有的正是你所描述的。看起来你是 python 的新手，一般来说可能是编程新手。

由于以下原因，代码有点混乱。

1.  您定义一个名为的全局变量`numberlist`并为其分配一个数字数组。
2.  再次`x`命名您函数的参数。`numberlist`
3.  调用时`x`，您传递一个数组，该数组的值与您在开始时分配给全局变量的值相同`numberlist`。

需要注意的要点：

*   全局变量`numberlist`和`x`命名的参数`numberlist`是两个完全不同的变量。您的效果是`numberlist`在您的函数内部无法访问全局变量`x`。您实际上并没有在`numberlist`任何地方使用全局变量。
*   如果您想使用全局变量`numberlist`并将其传递给`x`，而不是`x([3.2,6,7.8,1,3,2.5])`，您只需执行`x(numberlist)`.
*   您应该将`x`的`numberlist`参数重命名为其他名称。 `mylist`例如。
*   你真的不需要顶部的 import 语句。

考虑到这些，您的代码更具可读性，如下所示：

```
def x(mylist):
    for num in mylist:
        if num > 4:
            print(num)
        else :
            print(num + 5)
numberlist = [3.2,6,7.8,1,3,2.5]
print x(numberlist) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:59:30.990

在 python 方面无能为力，但在 R 方面这是微不足道的

```
x <- sample(1:10, 20, rep = T)
> x
 [1]  5  9  1  1  8  9  5 10  2  3  8  1  5  9  7  1  6  2 10  6
 > x[which(x<5)] <- x[which(x<5)] + 5
Arrrr> x
 [1]  5  9  6  6  8  9  5 10  7  8  8  6  5  9  7  6  6  7 10  6 
```

# node.js - 在预构建二进制文件上调整 node_prefix 变量

> ID：12921591
> 
> 赞同：3
> 
> 时间：2012-10-16T18:56:31.993
> 
> 标签：node.js, variables, configuration, precompiled

如果我获得一个预构建的二进制文件，是否有一个简单的地方可以告诉这个二进制文件存储在哪里？例如，如果我从[此处](http://www.petertribble.co.uk/Solaris/node.html)获取二进制文件，则
`process.config.variables.node_prefix == '/opt/Node'`. 那不是我要放的地方。我想分开版本，我想要小写，等等。

我知道这是一个非常小的皱纹，但如果可能的话，我想解决它。

那么有没有地方我可以调整这个变量，而无需重新构建二进制文件？

# google-app-engine - Blobstore POST 重定向到 /undefined - Google App Engine

> ID：12921593
> 
> 赞同：0
> 
> 时间：2012-10-16T18:56:42.737
> 
> 标签：google-app-engine, blobstore

真的很纠结这个。。。

我接受一个内容ID

`app = webapp2.WSGIApplication([('/mobile/upload',MobileUploadHandler), ('/mobile/(.*)',ContentIDHandler)],debug=True)`

如果内容 ID 附加了 post 操作，我会写出一个表单（通过 jinja2 模板）：

`template = jinja_environment.get_template('templates/mobileupload.html') template_values = {'upload_url':blobstore.create_upload_url('/mobile/upload')} self.response.out.write(template.render(template_values))`

Blob 上传 URL 在 HTML 中可见。我不知道它是否正确，但它看起来像一个 blob 上传 URL。

当表单 POST 时，它应该重定向到这个处理程序：

`类MobileUploadHandler（blobstore_handlers.BlobstoreUploadHandler）：

def post(self):`

但是，它永远不会到达那里 - 它会重定向到 /mobile/undefined。

我不太确定这意味着什么。我传递给 create_upload_url 的参数有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:55:10.943

> 但是，它永远不会到达那里 - 它会重定向到 /mobile/undefined。

这正是它应该做的。

> 用户通过提交包含一个或多个文件输入字段的 HTML 表单来创建 Blob。您的应用程序调用 create_upload_url() 来获取此表单的目标（操作），向函数传递应用程序中处理程序的 URL 路径。当用户提交表单时，用户的浏览器将指定的文件直接上传到 Blobstore。Blobstore 重写用户的请求并存储上传的文件数据，将上传的文件数据替换为一个或多个相应的 blob 键，**然后将重写的请求传递给您提供给 create_upload_url() 的 URL 路径的处理程序。**

[https://developers.google.com/appengine/docs/python/blobstore/overview](https://developers.google.com/appengine/docs/python/blobstore/overview)

# html - CSS - 如果孩子有特定的类，则设计父类

> ID：12921596
> 
> 赞同：14
> 
> 时间：2012-10-16T18:56:51.200
> 
> 标签：html, css, web

> **可能重复：**
> [活动子项的父项的复杂 CSS 选择器](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child)
> [是否有 CSS 父项选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

有没有办法根据其子元素是否具有特定类来设计父类？

```
<div class="container">
   <div class="content1">
      text
   </div>
</div> 
```

.

```
<div class="container">
   <div class="content2">
      text
   </div>
</div> 
```

`.container`我想根据子类是`content1`还是来设计第一个不同的`content2`。它必须是纯 css 解决方案，没有 javascript。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:58:28.453

不，你不能那样做。CSS 不能根据子元素选择元素，除了检查元素是否为空。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T19:00:26.857

为什么不使用`container1`+`content`和`container2`+ `content`？

```
<div class="container1">
    <div class="content">
      text
    </div>
</div>

<div class="container2">
    <div class="content">
        text
    </div>
</div> 
```

然后像这样写CSS：

```
.container1 .content {
    /* Container 1 styles here */
}

.container2 .content {
    /* Container 2 styles here */
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T18:59:02.030

您要的是神话般的 CSS 父选择器。也许有一天。

# sql - 每 15 分钟有效地查询一个巨大的时间序列表中的一行

> ID：12921598
> 
> 赞同：4
> 
> 时间：2012-10-16T18:57:02.393
> 
> 标签：sql, postgresql, aggregate, group-by, postgresql-performance

我有两个表，`conttagtable`（t）和`contfloattable`（cf）。T 有大约 43k 行。CF拥有超过90亿。

`tagindex`我在两个表的列上创建了两个表的索引。可以将此列视为 for 的唯一标识符和 for的`conttagtable`外键。我没有在与另一个表相关的任何一个表上显式创建 PK 或外键，尽管此数据在逻辑上与两个表上的列相关，就像a和where a一样。数据来自微软访问转储，我不知道我是否可以相信 tagindex 是唯一的，因此不强制执行“唯一性”。`conttagtable``confloattable``tagindex``conttagtable.tagindex``PRIMARY KEY``contfloattable.tagindex``FOREIGN KEY (tagindex) REFERENCES conttagtable(tagindex)`

数据本身非常庞大。

我需要从`contfloattable`每个. 因此，如果给定的 4000 个样本跨越 30 分钟，我需要一个 0-14 分钟范围内的样本和一个 15-30 分钟范围内的样本。15 分钟范围内的任何一个样品都是可以接受的；第一个，最后一个，随机的，随便什么。`contfloattable.dateandtime``conttagtable.tagid``contfloattable``tagid`

简而言之，我需要每 15 分钟获取一个样本，但每个 t.tagname 只需要一个样本。现在的样本每 5 秒记录一次，数据跨越两年。就 sql 而言，这是一个大数据问题，而且超出了我的想象。我从谷歌搜索或搜索 SO 中尝试的所有时间间隔解决方案都产生了如此长的查询时间，以至于它们不实用。

*   我的索引是否足以进行快速连接？（它们似乎是在省略时间间隔部分时）
*   我会从添加任何其他索引中受益吗？
*   实现上述目标的最佳/最快查询是什么？

这是一个包含架构和一些示例数据的 SQLFiddle：[http ://sqlfiddle.com/#!1/c7d2f/2](http://sqlfiddle.com/#!1/c7d2f/2)

架构：

```
 Table "public.conttagtable" (t)
   Column    |  Type   | Modifiers
-------------+---------+-----------
 tagname     | text    |
 tagindex    | integer |
 tagtype     | integer |
 tagdatatype | integer |
Indexes:
    "tagindex" btree (tagindex)

             Table "public.contfloattable" (CF)
   Column    |            Type             | Modifiers
-------------+-----------------------------+-----------
 dateandtime | timestamp without time zone |
 millitm     | integer                     |
 tagindex    | integer                     |
 Val         | double precision            |
 status      | text                        |
 marker      | text                        |
Indexes:
    "tagindex_contfloat" btree (tagindex) 
```

我想看到的输出是这样的：

```
cf.dateandtime      |cf."Val"|cf.status|t.tagname
--------------------------------------------------
2012-11-16 00:00:02  45       S         SuperAlpha
2012-11-16 00:00:02  45       S         SuperBeta
2012-11-16 00:00:02  45       S         SuperGamma
2012-11-16 00:00:02  45       S         SuperDelta
2012-11-16 00:15:02  45       S         SuperAlpha
2012-11-16 00:15:02  45       S         SuperBeta
2012-11-16 00:15:02  45       S         SuperGamma
2012-11-16 00:15:02  45       S         SuperDelta
2012-11-16 00:30:02  45       S         SuperAlpha
2012-11-16 00:30:02  45       S         SuperBeta
2012-11-16 00:30:02  45       S         SuperGamma
2012-11-16 00:30:02  45       S         SuperDelta
2012-11-16 00:45:02  42       S         SuperAlpha 
```

……等等等等……

正如 Clodoaldo 所建议的，这是我的最新尝试，有什么建议可以加快速度吗？

```
with i as (
    select cf.tagindex, min(dateandtime) dateandtime
    from contfloattable cf
    group by
        floor(extract(epoch from dateandtime) / 60 / 15),
        cf.tagindex
)
select cf.dateandtime, cf."Val", cf.status, t.tagname
from
    contfloattable cf
    inner join
    conttagtable t on cf.tagindex = t.tagindex
    inner join
    i on i.tagindex = cf.tagindex and i.dateandtime = cf.dateandtime
order by floor(extract(epoch from cf.dateandtime) / 60 / 15), cf.tagindex 
```

从上面查询计划： http: [//explain.depesz.com/s/loR](http://explain.depesz.com/s/loR)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:23:42.390

间隔 15 分钟：

```
with i as (
    select cf.tagindex, min(dateandtime) dateandtime
    from contfloattable cf
    group by
        floor(extract(epoch from dateandtime) / 60 / 15),
        cf.tagindex
)
select cf.dateandtime, cf."Val", cf.status, t.tagname
from
    contfloattable cf
    inner join
    conttagtable t on cf.tagindex = t.tagindex
    inner join
    i on i.tagindex = cf.tagindex and i.dateandtime = cf.dateandtime
order by cf.dateandtime, t.tagname 
```

显示此查询的解释输出（如果有效），以便我们尝试优化。您可以将其发布在此答案中。

**解释输出**

```
"Sort  (cost=15102462177.06..15263487805.24 rows=64410251271 width=57)"
"  Sort Key: cf.dateandtime, t.tagname"
"  CTE i"
"    ->  HashAggregate  (cost=49093252.56..49481978.32 rows=19436288 width=12)"
"          ->  Seq Scan on contfloattable cf  (cost=0.00..38528881.68 rows=1408582784 width=12)"
"  ->  Hash Join  (cost=270117658.06..1067549320.69 rows=64410251271 width=57)"
"        Hash Cond: (cf.tagindex = t.tagindex)"
"        ->  Merge Join  (cost=270117116.39..298434544.23 rows=1408582784 width=25)"
"              Merge Cond: ((i.tagindex = cf.tagindex) AND (i.dateandtime = cf.dateandtime))"
"              ->  Sort  (cost=2741707.02..2790297.74 rows=19436288 width=12)"
"                    Sort Key: i.tagindex, i.dateandtime"
"                    ->  CTE Scan on i  (cost=0.00..388725.76 rows=19436288 width=12)"
"              ->  Materialize  (cost=267375409.37..274418323.29 rows=1408582784 width=21)"
"                    ->  Sort  (cost=267375409.37..270896866.33 rows=1408582784 width=21)"
"                          Sort Key: cf.tagindex, cf.dateandtime"
"                          ->  Seq Scan on contfloattable cf  (cost=0.00..24443053.84 rows=1408582784 width=21)"
"        ->  Hash  (cost=335.74..335.74 rows=16474 width=44)"
"              ->  Seq Scan on conttagtable t  (cost=0.00..335.74 rows=16474 width=44)" 
```

看起来你需要这个索引：

```
create index cf_tag_datetime on contfloattable (tagindex, dateandtime) 
```

创建后运行`analyze`。现在请注意，大表上的任何索引都会对数据更改（插入等）产生重大的性能影响，因为它必须在每次更改时更新。

**更新**

我添加了 cf_tag_datetime 索引 (tagindex,dateandtime)，这是新的解释：

```
"Sort  (cost=15349296514.90..15512953953.25 rows=65462975340 width=57)"
"  Sort Key: cf.dateandtime, t.tagname"
"  CTE i"
"    ->  HashAggregate  (cost=49093252.56..49490287.76 rows=19851760 width=12)"
"          ->  Seq Scan on contfloattable cf  (cost=0.00..38528881.68 rows=1408582784 width=12)"
"  ->  Hash Join  (cost=270179293.86..1078141313.22 rows=65462975340 width=57)"
"        Hash Cond: (cf.tagindex = t.tagindex)"
"        ->  Merge Join  (cost=270178752.20..298499296.08 rows=1408582784 width=25)"
"              Merge Cond: ((i.tagindex = cf.tagindex) AND (i.dateandtime = cf.dateandtime))"
"              ->  Sort  (cost=2803342.82..2852972.22 rows=19851760 width=12)"
"                    Sort Key: i.tagindex, i.dateandtime"
"                    ->  CTE Scan on i  (cost=0.00..397035.20 rows=19851760 width=12)"
"              ->  Materialize  (cost=267375409.37..274418323.29 rows=1408582784 width=21)"
"                    ->  Sort  (cost=267375409.37..270896866.33 rows=1408582784 width=21)"
"                          Sort Key: cf.tagindex, cf.dateandtime"
"                          ->  Seq Scan on contfloattable cf  (cost=0.00..24443053.84 rows=1408582784 width=21)"
"        ->  Hash  (cost=335.74..335.74 rows=16474 width=44)"
"              ->  Seq Scan on conttagtable t  (cost=0.00..335.74 rows=16474 width=44)" 
```

它似乎已经及时上升了:(但是，如果我删除 order by 子句（不完全是我需要的，但会起作用），这就是发生的事情，大大减少：

```
"Hash Join  (cost=319669581.62..1127631600.98 rows=65462975340 width=57)"
"  Hash Cond: (cf.tagindex = t.tagindex)"
"  CTE i"
"    ->  HashAggregate  (cost=49093252.56..49490287.76 rows=19851760 width=12)"
"          ->  Seq Scan on contfloattable cf  (cost=0.00..38528881.68 rows=1408582784 width=12)"
"  ->  Merge Join  (cost=270178752.20..298499296.08 rows=1408582784 width=25)"
"        Merge Cond: ((i.tagindex = cf.tagindex) AND (i.dateandtime = cf.dateandtime))"
"        ->  Sort  (cost=2803342.82..2852972.22 rows=19851760 width=12)"
"              Sort Key: i.tagindex, i.dateandtime"
"              ->  CTE Scan on i  (cost=0.00..397035.20 rows=19851760 width=12)"
"        ->  Materialize  (cost=267375409.37..274418323.29 rows=1408582784 width=21)"
"              ->  Sort  (cost=267375409.37..270896866.33 rows=1408582784 width=21)"
"                    Sort Key: cf.tagindex, cf.dateandtime"
"                    ->  Seq Scan on contfloattable cf  (cost=0.00..24443053.84 rows=1408582784 width=21)"
"  ->  Hash  (cost=335.74..335.74 rows=16474 width=44)"
"        ->  Seq Scan on conttagtable t  (cost=0.00..335.74 rows=16474 width=44)" 
```

我还没有尝试过这个索引......不过会这样做。支持。

现在再看一遍，我认为逆索引可能会更好，因为它不仅可以在决赛中使用，`Merge Join`还可以在决赛中使用`Sort`：

```
create index cf_tag_datetime on contfloattable (dateandtime, tagindex) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:05:00.077

这是另一种表述。我很想知道它是如何在整个数据集上扩展的。首先创建这个索引：

```
CREATE INDEX contfloattable_tag_and_timeseg
ON contfloattable(tagindex, (floor(extract(epoch FROM dateandtime) / 60 / 15) )); 
```

然后尽可能多地运行它`work_mem`：

```
SELECT 
  (first_value(x) OVER (PARTITION BY x.tagindex, floor(extract(epoch FROM x.dateandtime) / 60 / 15))).*,
  (SELECT t.tagname FROM conttagtable t WHERE t.tagindex = x.tagindex) AS tagname
FROM contfloattable x ORDER BY dateandtime, tagname; 
```

*Sneaky Wombat*：从上面的 sql 解释完整数据集（没有建议的索引）：[http ://explain.depesz.com/s/kGo](http://explain.depesz.com/s/kGo)

或者，这里只需要一个顺序传递，`contfloattable`将值收集到一个元组存储中，然后对它进行`JOIN`编辑以获取标签名称。它需要很多`work_mem`：

```
SELECT cf.dateandtime, cf.dataVal, cf.status, t.tagname
FROM 
  (
    SELECT (first_value(x) OVER (PARTITION BY x.tagindex, floor(extract(epoch FROM x.dateandtime) / 60 / 15))).*
    FROM contfloattable x
  ) cf
  INNER JOIN
  conttagtable t ON cf.tagindex = t.tagindex
ORDER BY cf.dateandtime, t.tagname; 
```

*Sneaky Wombat*：从上面的 sql 解释完整数据集（没有建议的索引）：[http ://explain.depesz.com/s/57q](http://explain.depesz.com/s/57q)

如果它有效，您将希望`work_mem`在查询中尽可能多地投入。你还没有提到你系统的 RAM，但你会想要相当大的一块；尝试：

```
SET work_mem = '500MB'; 
```

... 或更多，如果您有至少 4GB 的 RAM 并且在 64 位 CPU 上。同样，我真的很想看看它是如何在完整数据集上工作的。

顺便说一句，为了这些查询的正确性，我建议您`ALTER TABLE conttagtable ADD PRIMARY KEY (tagindex);`这样做`DROP INDEX t_tagindex;`。这将需要一些时间，因为它将建立一个唯一索引。这里提到的大多数查询都假设在 中`t.tagindex`是唯一的`conttagtable`，并且确实应该强制执行。唯一索引可用于旧的非唯一索引无法进行的其他优化`t_tagindex`，并且它可以产生更好的统计估计。

Also, when comparing query plans, note that `cost` isn't necessarily strictly proportional to real-world execution time. If the estimates are good then it should roughly correlate, but the estimates are only that. Sometimes you'll see a high-cost plan execute faster than a supposedly low-cost plan due to things like bad rowcount estimates or index selectivity estimates, limitations in the query planner's ability to infer relationships, unexpected correlations, or cost parameters like `random_page_cost` and `seq_page_cost` that don't match the real system.

# http - Haskell SimpleHTTP 获取响应码

> ID：12921600
> 
> 赞同：2
> 
> 时间：2012-10-16T18:57:06.707
> 
> 标签：http, haskell, response, http-response-codes

我正在尝试使用 simpleHTTP 从我认为 HTTP 类中的响应类型获取响应代码（200,404 等）到目前为止：

```
--how to get the http response Int from response
getStatusCode response  = print 0

--this works...
--- othercode ---
rsp <- simpleHTTP (defaultGETRequest_ clean_uri) 
file_buffer <- getResponseBody(rsp)
--this fails
response = (getStatusCode rsp) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:12:31.487

我想你想要的是

```
getResponseCode :: Result (Response ty) -> IO ResponseCode 
```

[`Network.HTTP`](http://hackage.haskell.org/packages/archive/HTTP/4000.2.5/doc/html/Network-HTTP.html)如果您使用的是 HTTP-4000.2.4 或更高版本，请从模块中获取。对于较早版本的[`HTTP`](http://hackage.haskell.org/packages/archive/HTTP/4000.2.5/doc/html/Network-HTTP.html)，您`rspCode`显然必须在字段上进行模式匹配，类似于下面显示的`rspReason`字段方式。

如果您对原因感兴趣，请使用`rspReason`, [`Response`](http://hackage.haskell.org/packages/archive/HTTP/4000.2.5/doc/html/Network-HTTP-Base.html#t%3aResponse)after

```
rsp <- simpleHTTP ... 
```

你有

```
rsp :: Either ConnError (Response ty)  -- Result is a type synonym for (Either ConnError) 
```

并且可以访问每个原因

```
let reason = case rsp of
               Left err -> show err  -- for example
               Right response -> rspReason response
putStrLn $ "Here's why: " ++ reason 
```

# html - 如何使用 NSRegularExpression 在 iOS 上使用 Objective-C 将十六进制 html 实体转换为文本字符串中的十进制 html 实体？

> ID：12921601
> 
> 赞同：1
> 
> 时间：2012-10-16T18:57:07.407
> 
> 标签：html, ios, regex, objective-c-blocks, nsregularexpression

[这个方法](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRegularExpression/enumerateMatchesInString:options:range:usingBlock:)，即 enumerateMatchesInString，与[这个问题的代码有](https://stackoverflow.com/questions/4475796/is-this-a-sane-objective-c-block-implementation)什么不同？

更具体地说，我正在尝试使用 NSRegularExpression 来制作正则表达式，以在字符串中查找匹配项。然后，对于每个这样的匹配，我想用该匹配的修改版本替换它。在一种这样的情况下，我将 HTML 实体中的十六进制更改为十进制，例如 ; -> ; ）。我已经有解决从十六进制到十进制转换的 PHP 代码，但我需要在 Objective-C 中编写基本相同的方法。

这两种方法中的任何一种或两种都可以用于此目的吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:33:18.460

这应该不会太难，正则表达式是`/\&\#x([0-9a-fA-F]+)\;/`.

将捕获的数字包含在字符串中后，您就可以使用`NSScanner`.

```
int value = NSNotFound;
[[NSScanner scannerWithString:capturedHexString] scanHexInt:&value];
NSString *decimalString = [NSString stringWithFormat:@"%d", value]; 
```

希望有帮助。

* * *

**澄清**

我将把它作为一个简单的功能提取出来

```
static inline NSString *MyDecimalStringFromHexString(NSString *hexString)
{
    unsigned value = NSNotFound;
    [[NSScanner scannerWithString:hexString] scanHexInt:&value];

    NSString *decimalString = nil;

    if (value != NSNotFound)
        decimalString = [NSString stringWithFormat:@"%d", value];

    return decimalString;
} 
```

* * *

**把它们放在一起**

这是一个单元测试，它使用正则表达式`/\&\#x([0-9a-fA-F]+)\;/`、您链接的类别以及我创建的十六进制到十进制函数来执行您想要的替换。

```
- (void)testHexEntityToDecimalEntity
{
    NSString *input = @"This &#x0A; is &#xABC; test";
    NSString *expected = @"This &#10; is &#2748; test";

    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\&\\#x([0-9a-fA-F]+)\\;" options:0 error:nil];

    NSString *actual = [regex stringByReplacingMatchesInString:input options:0 range:NSMakeRange(0, input.length) usingBlock:^NSString *(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
        NSRange hexRange = [result rangeAtIndex:1];
        NSString *hexString = [input substringWithRange:hexRange];
        NSString *decimalString = MyDecimalStringFromHexString(hexString);
        return [NSString stringWithFormat:@"&#%@;", decimalString];
    }];

    STAssertEqualObjects(actual, expected, nil);
} 
```

# arm - 如何为 ARM 交叉编译 Expect

> ID：12921606
> 
> 赞同：3
> 
> 时间：2012-10-16T18:57:36.923
> 
> 标签：arm, embedded, expect, configure

如何为 ARM 交叉编译 Expect？

在主机 Ubuntu 机器上从源代码构建它绝对没有问题。但是如果你尝试交叉编译它，configure 脚本会不断地给出以下错误：

```
checking if WNOHANG requires _POSIX_SOURCE... configure: error: Expect can't be cross compiled 
```

似乎有人在这里发现了如何做到这一点（但他没有详细说明）：

*   [https://linuxlink.timesys.com/cross_compiling_expect](https://linuxlink.timesys.com/cross_compiling_expect)

我还从这里获取了源代码和补丁：

*   [http://repository.timesys.com/buildsources/e/expect/expect-5.43.0/](http://repository.timesys.com/buildsources/e/expect/expect-5.43.0/)

但是即使成功应用补丁也会收到相同的错误！

我真的很感激这里的一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:29:50.040

这些补丁所做的是遵循您提供的第一个链接中的解释方法：找到 中的所有`AC_MSG_ERROR([Expect can't be cross compiled])`行`configure.in`，并将它们替换为编码“正确”答案的硬编码行。

所以，要做的第一件事是：如果您在应用补丁后仍然收到该错误，那么补丁一定是错过了一个；你也应该找到它并修复它。

另一件要检查的事情是“它是否已插入”——你是否`configure`在修补文件后运行了相关的自动工具来正确地重新生成`configure.in`文件？看起来那些补丁只是 patch `configure.in`，所以如果你没有进行再生，你就不会改变任何实际运行的东西。

一旦你克服了直接错误，还有一点是你发现的补丁是针对 TimeSys Linux 的（根据名称），它可能与你的系统匹配也可能不匹配——特别是，甚至可能不用于ARM系统。（我看到 TimeSys 现在支持 ARM，但我对它们的熟悉是针对 PowerPC。）因为它用硬编码的答案代替了自动测试，所以这些答案很容易出错。我建议检查补丁中更改的各个行，以确认它们硬编码的答案实际上是正确的。

# php - php。仅从字符串中捕获数字

> ID：12921607
> 
> 赞同：1
> 
> 时间：2012-10-16T18:57:50.947
> 
> 标签：php, string, variables, numbers, int

如果我有一个字符串

> $var = "adf91uaj19jj99877ad009";

从这个变量中获取所有整数并创建一个新整数的最简单方法是什么？在这种情况下

> $newVar="911999877009";

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:58:44.863

就像用大锤敲钉子一样。将所有非数字字符 ( `\D`) 替换为空 ( `''`)。

```
$newVar = preg_replace('/\D/', '', $var); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T18:59:11.613

你可以试试

```
$var = "adf91uaj19jj99877ad009";
$var = filter_var($var,FILTER_SANITIZE_NUMBER_INT); 
```

输出

```
string '911999877009' (length=12) 
```

# html - 哪些 html/css 属性是邮件安全的？

> ID：12921616
> 
> 赞同：19
> 
> 时间：2012-10-16T18:58:36.917
> 
> 标签：html, css, email, outlook, gmail

我最近一直在为我的一个客户编写一份时事通讯。我似乎无法找到关于哪些 css 和 html 可以在主要邮件客户端中安全使用的好信息。

我想也许这里有人有知识，我们可以创建一些在主要邮件客户端中工作的东西的列表。

这是我从活动监视器借来的流行邮件客户端列表。（如果我忘记了什么请告诉我）

```
Microsoft Outlook
Apple Mail
Hotmail
Yahoo! Mail
Gmail 
```

问题是这些主要浏览器中有哪些标签、属性、特殊怪癖以及如何轻松避免它们。

谢谢您的帮助，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T19:24:43.587

在 Campaign Monitor 中，常见邮件客户端中的 CSS 支持的详细而全面的列表。

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T19:09:22.553

[**您可以在电子邮件标准项目**](http://www.email-standards.org/)中找到所有主要电子邮件客户端支持和不支持的 CSS 功能的完整列表[](http://www.email-standards.org/)

 **一个非常有用的开发 HTML 电子邮件的引导程序，它有大量的差异消除器是[**HTML Email Bolerplate**](http://htmlemailboilerplate.com/)

作为一般规则 - 始终使用表格和所有老式 HTML 标记（`align`、`center`、`valign`等`color`）。一些关于该主题的[阅读。](http://24ways.org/2009/rock-solid-html-emails)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T19:08:00.830

这里有几篇文章可以帮助您入门：

[http://css-tricks.com/using-css-in-html-emails-the-real-story/](http://css-tricks.com/using-css-in-html-emails-the-real-story/)

[http://www.sitepoint.com/code-html-email-newsletters/](http://www.sitepoint.com/code-html-email-newsletters/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T19:09:54.810

这是一个电子邮件 css 备忘单。[http://intenseminimalism.com/2010/email-css-cheatsheet/](http://intenseminimalism.com/2010/email-css-cheatsheet/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-18T09:22:11.577

PDF 为不同邮件客户端中的 CSS 支持提供表格格式：为不同操作系统上的 Web 客户端、桌面客户端和移动邮件客户端提供信息。

[不同电子邮件客户端的 CSS 支持](https://i3.campaignmonitor.com/assets/files/css/campaign-monitor-guide-to-css-in-email-may-2014.pdf?ver=5320&_ga=1.228308635.745708791.1442556968)

[https://i3.campaignmonitor.com/assets/files/css/campaign-monitor-guide-to-css-in-email-may-2014.pdf?ver=5320&_ga=1.228308635.745708791.1442556968](https://i3.campaignmonitor.com/assets/files/css/campaign-monitor-guide-to-css-in-email-may-2014.pdf?ver=5320&_ga=1.228308635.745708791.1442556968)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-13T14:03:26.337

Gmail 已经支持`style`头部标签

> 您可以使用 CSS 选择器的子集来应用样式。Gmail 支持类、元素和 ID 选择器。

```
<html>
  <head>
    <style>
      .colored {
        color: blue;
      }
      #body {
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <div id='body'>
      <p>Hi Pierce,</p>
      <p class='colored'>This text is blue.</p=>
      <p>Jerry</p>
    </div>
  </body>
</html> 
```

和媒体查询：

> 您可以使用标准 CSS 媒体查询来调整电子邮件的样式以适应用户当前的设备。Gmail 支持针对屏幕宽度、方向和分辨率的查询。

```
<html>
  <head>
    <style>
      .colored {
        color: blue;
      }
      #body {
        font-size: 14px;
      }
      @media screen and (min-width: 500px) {
        .colored {
          color:red;
        }
      }
    </style>
  </head>
  <body>
    <div id='body'>
      <p>Hi Pierce,</p>
      <p class='colored'>
        This text is blue if the window width is
        below 500px and red otherwise.
      </p>
      <p>Jerry</p>
    </div>
  </body>
</html> 
```**

# scala - scala 未来的垃圾收集

> ID：12921619
> 
> 赞同：3
> 
> 时间：2012-10-16T18:58:40.573
> 
> 标签：scala, future

我有一堆我试图并行处理的 xml 文件。我使用 future 的 scala 代码（2.9.2）开始时很好，但最终吃掉了我机器上近 100% 的 32G。当我按顺序执行此操作时不会发生这种情况，所以我的猜测是在使用 scala 期货时垃圾收集有问题。

这是我的代码的精简版本。谁能告诉我怎么了？

```
val filenameGroups = someStringListOfFilepaths.grouped(1000).toStream
val tasks = filenameGroups.map {
  fg =>
    scala.actors.Futures.future {
      val parser = new nu.xom.Builder() // I'm using nu.xom. Not sure it matters.
      fg.map {
        path => {
          val doc = parser.build(new java.io.File(path))
          val result = doc.query(some xpath query)
          result
        }
      }.toList
    }
}

val pairs = tasks.par.flatMap(_.apply) 
```

ETA：好的，我解决了这个问题，但我仍然不知道为什么这会有所作为。

我抽象了内部循环中的大部分代码，然后重新运行它。并从未来提取解析器实例化。内存使用率现在保持在 17% 的水平。有谁知道为什么这会有所作为？

这是我所做的简化版本：

```
def process(arglist...) = yada

val tasks = filenameGroups.map {
  fg =>
    val parser = new nu.xom.Builder()
    scala.actors.Futures.future {
      process(fg, parser)
    }
}

val pairs = tasks.par.flatMap(_.apply) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:37:39.697

Futures 无法真正预测您需要多少线程或计算将占用多少内存，因此通常您有责任将适当的序列化计算放入适量的 Futures 中。特别是，如果您在 8 核机器上，您可能不希望分组比小于`someStringListOfFilepaths.length/8`（如果您的文件太大以至于您不能一次在内存中拥有 8 个）。如果您想在每台机器上扩展它而无需考虑它，您可以使用检查核心数量的标准 Java 技巧，[涵盖在 SO和许多其他地方。](https://stackoverflow.com/questions/1980832)（在这种情况下也可能需要检查`Runtime.getRuntime.maxMemory`，以防万一您使用的机器有很多内核但内存不多（或为 VM 分配的内存不多）。）

（顺便说一句，在您的最小示例中，有惰性和期货，但惰性对您没有任何帮助。期货在创建时已经没有运行，因此延迟期货的实例化可能对您没有任何帮助。）

另外，请注意，如果您有 200k 个文件，最终将得到 200k 个结果，并且根据结果的大小，这可能会占用大量内存。可能不是 32G，但谁知道文件中有什么？

# .net-4.0 - WebApi + OData = Error -> "该属性不属于指定类型"

> ID：12921626
> 
> 赞同：1
> 
> 时间：2012-10-16T18:58:56.650
> 
> 标签：.net-4.0, asp.net-mvc-4, asp.net-web-api, odata

我在 URI 中使用的任何 OData 命令都会显示以下错误！
当我使用没有任何配置/参数 OData 的 api 时，效果很好！
但是 any`$filter`或会产生以下错误`$top`：`$skip`

# 代码

**ApiController**

```
[Queryable]
public IQueryable<Processo> get()
{
    return _repositorio.Query<Processo>();
} 
```

**Api 路由**

```
public static void Register(HttpConfiguration config)
{
    // Controller Only -> To handle routes like `/api/pessoas`
    config.Routes.MapHttpRoute(
        name: "ControllerOnly",
        routeTemplate: "api/{controller}"
    );

    // Controller with ID -> To handle routes like `/api/pessoas/1`
    config.Routes.MapHttpRoute(
        name: "ControllerAndId",
        routeTemplate: "api/{controller}/{id}",
        defaults: null,
        constraints: new { id = @"^\d+$" } // Only integers 
    );

    // Controllers with Actions -> To handle routes like `/api/pessoas/getProfissoes`
    config.Routes.MapHttpRoute(
        name: "ControllerAndAction",
        routeTemplate: "api/{controller}/{action}"
    );

    config.Formatters.JsonFormatter.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects;
    config.Formatters.Remove(config.Formatters.XmlFormatter);
} 
```

**IRepository 查询实现**

```
public IQueryable<T> Query<T>(params Expression<Func<T, object>>[] includeProperties)
    where T : class, IEntity
{
    return includeProperties.Aggregate<Expression<Func<T, object>>, IQueryable<T>>(Set<T>(), (current, includeProperty) => current.Include(includeProperty));
} 
```

**[添加] 处理类**

```
public class Processo : IEntity, IAuditable
{
    public DateTime CreateAt { get; set; }
    public string CreateBy { get; set; }
    public DateTime? UpdateAt { get; set; }
    public string UpdateBy { get; set; }

    public int Id { get; set; }

    public DateTime DataEntrada { get; set; }
    public virtual Modalidade Modalidade { get; set; }
    public virtual PassoExecucao PassoAtual { get; set; }

    public string Imovel { get; set; }
    public double ValorFinanciado { get; set; }
    public double ValorVenda { get; set; }
    public double? FGTS { get; set; }

    public virtual Pessoa Comprador { get; set; }
    public virtual Pessoa Proprietario { get; set; }

    public virtual Agencia Agencia { get; set; }
    public virtual Empresa Despachante { get; set; }
    public virtual Empresa Originador { get; set; }

    public virtual ICollection<File> Arquivos { get; set; }
    public virtual ICollection<Historico> Historicos { get; set; }
} 
```

# 尝试

1.  网址：`/api/processos?$filter=Id eq 1` **同样的错误**
2.  网址：`/api/processos?$skip=1` **同样的错误**
3.  网址：`/api/processos` **没有错误！**

**[添加] 做一些测试。发现只发生在引用 Person 类的地方。**

```
public class Pessoa : IEntity, IAuditable
{
    public int Id { get; set; }

    public DateTime CreateAt { get; set; }
    public string CreateBy { get; set; }
    public DateTime? UpdateAt { get; set; }
    public string UpdateBy { get; set; }

    public string Nome { get; set; }
    public DateTime? DataNascimento { get; set; }
    public GeneroEnum Genero { get; set; }
    public virtual TipoPessoa Tipo { get; set; }
    public virtual Pessoa Conjuge { get; set; }

    public virtual Nacionalidade Nacionalidade { get; set; }
    public string Naturalidade { get; set; }
    public virtual Profissao Profissao { get; set; }
    public string Empresa { get; set; }
    public double? RendaBrutaMensal { get; set; }
    public DateTime? DataInicioEmpresa { get; set; }
    public DateTime? DataReferenciaEmpresa { get; set; }
    public EscolaridadeEnum Escolaridade { get; set; }

    public string CPF { get; set; }
    public string PIS { get; set; }
    public string RG { get; set; }
    public string OrgaoExpedidor { get; set; }
    public string TipoDocumento { get; set; }
    public DateTime? DataEmissao { get; set; }

    public EstadoCivilEnum? EstadoCivil { get; set; }
    public RegimeCasamentoEnum? RegimeCasamento { get; set; }
    public bool? ComposicaoRenda { get; set; }
    public bool? UniaoEstavel { get; set; }

    public virtual ICollection<Telefone> Telefones { get; set; }
    public virtual ICollection<Endereco> Enderecos { get; set; }
    public virtual ICollection<Email> Emails { get; set; }
} 
```

# 错误

**使用 Processo 类**

```
[Queryable]
public IQueryable<Processo> get()
{
    return _repositorio.Query<Processo>();
} 
```

![在此处输入图像描述](../Images/d56e2a9b1cef53b9fa0b75973a94881c.png)

```
{
    "$id": "1",
    "Message": "An error has occurred.",
    "ExceptionMessage": "The property does not belong to the specified type.\r\nParameter name: navigationProperty",
    "ExceptionType": "System.ArgumentException",
    "StackTrace": "   at System.Web.Http.OData.Builder.EntityTypeConfiguration.AddNavigationProperty(PropertyInfo navigationProperty, EdmMultiplicity multiplicity)\r\n   at System.Web.Http.OData.Builder.ODataConventionModelBuilder.MapEntityType(IEntityTypeConfiguration entity)\r\n   at System.Web.Http.OData.Builder.ODataConventionModelBuilder.AddEntity(Type type)\r\n   at System.Web.Http.OData.Builder.EntityTypeConfiguration.AddNavigationProperty(PropertyInfo navigationProperty, EdmMultiplicity multiplicity)\r\n   at System.Web.Http.OData.Builder.ODataConventionModelBuilder.MapEntityType(IEntityTypeConfiguration entity)\r\n   at System.Web.Http.OData.Builder.ODataConventionModelBuilder.MapTypes()\r\n   at System.Web.Http.OData.Builder.ODataConventionModelBuilder.GetEdmModel()\r\n   at System.Web.Http.HttpActionDescriptorExtensions.<>c__DisplayClass1.<GetEdmModel>b__0(Object _)\r\n   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)\r\n   at System.Web.Http.HttpActionDescriptorExtensions.GetEdmModel(HttpActionDescriptor actionDescriptor, Type entityClrType)\r\n   at System.Web.Http.QueryableAttribute.OnActionExecuted(HttpActionExecutedContext actionExecutedContext)\r\n   at System.Web.Http.Filters.ActionFilterAttribute.CallOnActionExecuted(HttpActionContext actionContext, HttpResponseMessage response, Exception exception)\r\n   at System.Web.Http.Filters.ActionFilterAttribute.<>c__DisplayClass2.<System.Web.Http.Filters.IActionFilter.ExecuteActionFilterAsync>b__0(HttpResponseMessage response)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass41`2.<Then>b__40(Task`1 t)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.ThenImpl[TTask,TOuterResult](TTask task, Func`2 continuation, CancellationToken cancellationToken, Boolean runSynchronously)"
} 
```

**佩索阿类**

```
[Queryable]
public IQueryable<Pessoa> get()
{
    return _repositorio.Query<Pessoa>();
}

{
    "$id": "1",
    "Message": "An error has occurred.",
    "ExceptionMessage": "An item with the same key has already been added.",
    "ExceptionType": "System.ArgumentException",
    "StackTrace": "   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)\r\n   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)\r\n   at System.Web.Http.OData.Builder.EdmTypeBuilder.<GetEdmTypes>d__0.MoveNext()\r\n   at System.Linq.Enumerable.<OfTypeIterator>d__aa`1.MoveNext()\r\n   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)\r\n   at System.Web.Http.OData.Builder.EdmModelHelperMethods.BuildEdmModel(String containerNamespace, String containerName, IEnumerable`1 entityTypeConfigurations, IEnumerable`1 entitySetConfigurations)\r\n   at System.Web.Http.OData.Builder.ODataModelBuilder.GetEdmModel()\r\n   at System.Web.Http.OData.Builder.ODataConventionModelBuilder.GetEdmModel()\r\n   at System.Web.Http.HttpActionDescriptorExtensions.<>c__DisplayClass1.<GetEdmModel>b__0(Object _)\r\n   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)\r\n   at System.Web.Http.HttpActionDescriptorExtensions.GetEdmModel(HttpActionDescriptor actionDescriptor, Type entityClrType)\r\n   at System.Web.Http.QueryableAttribute.OnActionExecuted(HttpActionExecutedContext actionExecutedContext)\r\n   at System.Web.Http.Filters.ActionFilterAttribute.CallOnActionExecuted(HttpActionContext actionContext, HttpResponseMessage response, Exception exception)\r\n   at System.Web.Http.Filters.ActionFilterAttribute.<>c__DisplayClass2.<System.Web.Http.Filters.IActionFilter.ExecuteActionFilterAsync>b__0(HttpResponseMessage response)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass41`2.<Then>b__40(Task`1 t)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.ThenImpl[TTask,TOuterResult](TTask task, Func`2 continuation, CancellationToken cancellationToken, Boolean runSynchronously)"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:47:51.110

*这个答案是对聊天中发生的事情的总结。所以它读起来与标准答案不同。*

* * *

我没有具体收到此错误，但似乎 OData 无法找到“id”属性。一旦 oData 被提取到一个独立的包中，就会发生一些变化。

**版本？**
我要检查的第一件事是你是否有独立的 oData 包（`Microsoft.Data.OData 5.0.1`和`Microsoft.AspNet.WebApi.OData 0.1.0-alpha-120815`）。您可以通过`Get-Package`在包管理控制台中键入来执行此操作。

在聊天中，您发布了这些：

> Microsoft.AspNet.WebApi.OData 0.1.0-alpha-120815
> Microsoft.Data.Edm 5.1.0-rc2
> Microsoft.Data.OData 5.1.0-rc2
> Microsoft.Data.OData.Contrib 5.1.0.50918-rc
> System.Spatial 5.1 .0-rc2

所以看起来你仍在运行产品的 RC。有[一个旧错误](http://aspnetwebstack.codeplex.com/workitem/344)似乎描述了这种行为。该错误的缺点是具有继承属性的类会引发错误。

**当前不这样做**
更新到当前版本似乎并不能解决问题。所以下一步是尝试更新的签名睡衣。

获取签名的夜间构建[的说明在这里](http://aspnetwebstack.codeplex.com/wikipage?title=Use%20Nightly%20Builds)。

签名的夜间构建解决了这个问题。

**另一个想法**

oData 更改后，产品需要能够识别关键属性。 [这篇文章](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)指出

> [Queryable] 属性必须以某种方式找到一个关键属性。如果您的元素类型具有 ID 属性，这会自动发生，否则您可能需要手动配置模型（请参阅设置模型）。

如果您使用的是实体框架，那么人员对象是否定义了实体键？如果没有，您可以尝试`oDataConventionModelBuilder`“设置模型部分”中指定的方法。就像是：

```
ODataModelBuilder modelBuilder = new ODataConventionModelBuilder();
var pessoa= modelBuilder.EntitySet<Pessoa>("Pessoa"); 

 pessoa..HasKey(p => p.Id); 
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:56:33.747

OData 需要您为 Pessoa 类指定主键的概念。通过添加属性来做到这一点：

```
[DataServiceKey("Id")]
public class Pessoa : IEntity, IAuditable
{
    public int Id { get; set; }
    //...
} 
```

[或通过显式构建您的模型，指定 OData Web API 发布博客文章http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)中提到的密钥[-web-api.aspx](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx) “设置您的模型”标题部分。

# facebook-javascript-sdk - 使用 javascript 登录 Facebook 帐户

> ID：12921635
> 
> 赞同：1
> 
> 时间：2012-10-16T18:59:25.210
> 
> 标签：facebook-javascript-sdk, connect

我正在编写一个 javascript 本地应用程序，它需要 Facebook 帐户的登录名和密码并检查隐私设置。
加载 Facebook SDK 并初始化应用程序后，我调用 FB.login() 函数并收到错误消息：

*'APP'*发生错误。请稍后再试。

API 错误代码：191

API 错误描述：指定的 URL 不属于应用程序

错误消息：无效的 redirect_uri：应用程序配置不允许给定 URL。

由于该应用程序是本地应用程序，因此我在没有 URL 的情况下注册了它。我应该使用 Heroku 吗？

错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:47:28.537

错误如所述 - 网址与已注册（或未注册）的网址不匹配。它是本地的（本地主机？）不会改变任何东西。

# linkedin - LinkedIn API：如何显示用户的位置

> ID：12921642
> 
> 赞同：0
> 
> 时间：2012-10-16T18:59:48.453
> 
> 标签：linkedin

我可以使用以下代码获取用户个人资料

```
IN.API.Profile("me")
.fields(["id", "firstName","lastName","positions:(company)"]) 
```

并将其显示为 HTML

```
.result(function(result) {
profile = result.values[0];
profHTML += "<h2 class=myname>" + profile.firstName + " " + profile.lastName + "</a>;
$("#profile").html(profHTML); 
```

但有点困惑如何在上面的代码中显示职位：（公司）。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:40:22.423

遍历返回的位置值 JSON 数组：

```
var positions = profile.positions;
var positionCount = positions._total;
for(var i = 0; i < positionCount; i++) {
  var company = positions.values[i].company;
  var title = positions.values[i].title;
  profHTML += "<div class="position">" + title + ", " + company.name + "</div>";
} 
```

请注意，要从[可用位置数据](https://developer.linkedin.com/documents/profile-fields#positions)中提取标题，您需要在初始查询中指出：

```
.fields('id', 'firstName', 'lastName', 'positions:(title,company)') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:04:19.633

`var positions = $.makeArray(profile.positions)`并遍历位置并将其添加到 DOM

# facebook - 通过一个请求为所有联系人获取高分辨率的个人资料图片网址。脸书 API

> ID：12921646
> 
> 赞同：2
> 
> 时间：2012-10-16T19:00:07.183
> 
> 标签：facebook, facebook-graph-api

我可以获得高分辨率，`/id/picture?type=large&redirect=false&width=400&height=400`但使用这种语法我需要为每个用户建立连接，这并不是我真正想要的。我可以一口气完成吗？`/me/friends?fields=id,name,picture`不是一个选项，因为它为您提供低分辨率图片的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:19:06.983

它应该工作：

```
$facebook->api(me/friends?fields=id,name,picture.type(large)); 
```

# mono - MonoTouch 和 MonoDroid 是否为两个平台生成相同的 ARM6/7 代码？

> ID：12921652
> 
> 赞同：3
> 
> 时间：2012-10-16T19:00:28.760
> 
> 标签：mono, xamarin.ios, garbage-collection, xamarin.android, aot

MonoTouch 和 MonoDroid 是否使用相同的 C#-to-native 编译器和 GC，从而提供相同的性能？与 Mono 用于在 Windows 上生成[AOT 编译程序集的编译器相同吗？](http://en.wikipedia.org/wiki/AOT_compiler)

如果我编写一个完全独立于平台的功能，比如 JPEG 解码器，它会为两个平台生成相同的 ARM6/7 代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:47:55.493

不会。根据您的选择，生成的代码可能*相似*，但绝不会完全相同。

iOS 模拟器上的 MonoTouch 使用 Mono JIT (x86)。

iOS 设备上的 MonoTouch 使用 AOT 编译器，默认情况下它是来自 Mono 的编译器。您可以选择使用 LLVM 支持的 AOT 编译器。那将是 ARMv6、ARMv7 和/或（很快）ARMv7s。

MonoTouch 默认的 GC 是 Boehm。您可以选择使用**sgen**，作为进一步的选项，您可以使用*newrefcount* * 选项。

Mono for Android 在模拟器和设备上都使用 JIT（并非所有设备都是基于 ARM 的，即使大多数设备都是）。它还默认使用**sgen**垃圾收集器（实际上它不能使用 Boehm 收集器，因为它需要与 Java GC 共存）。

# ruby-on-rails - 多种类型的太阳黑子搜索与单一类型

> ID：12921655
> 
> 赞同：2
> 
> 时间：2012-10-16T19:00:43.230
> 
> 标签：ruby-on-rails, solr, sunspot, sunspot-rails

多种类型的太阳黑子搜索与单一类型的优缺点是什么？首选方式是什么？

我浏览了很多文档，似乎找不到答案。

*   [https://github.com/sunspot/sunspot](https://github.com/sunspot/sunspot)
*   [https://github.com/sunspot/sunspot/wiki](https://github.com/sunspot/sunspot/wiki)
*   [http://sunspot.github.com/sunspot/rails/docs/index.html](http://sunspot.github.com/sunspot/rails/docs/index.html)
*   [http://sunspot.github.com/sunspot/docs/Sunspot.html#search-class_method](http://sunspot.github.com/sunspot/docs/Sunspot.html#search-class_method)

多类型搜索示例：

```
Sunspot.search(Post, Comment) do
  with :blog_id, 1
  fulltext 'hello' do
    fields(:comment_body)
  end
end 
```

与另一个模型/类型关联的单一类型搜索示例：

```
class Post < ActiveRecord::Base
  searchable do
    text :comments do
      comments.map { |comment| comment.body }
    end
end

Post.search do
  fulltext 'hello' do
    fields(:comments)
  end
end 
```

看来我可以使用任何一种方法（多种类型或单一类型）来获得相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:58:53.150

在沿着多类型搜索的道路前进之后，让我们看看我是否可以为我的问题提供一些答案。

多类型搜索的缺点

*   大多数人想要返回的是要显示的结果/点击的同质列表。当您执行默认搜索所有类型的 Sunspot.search(Type1, Type2, etc) 或 Sunspot.search 时，调用 .results 会获得混合的数据类型，这使得在视图中更难显示。
*   如果 Post 有很多评论，并且我想查找评论中包含“xyz”的帖子，那么 Sunspot.search(Comment).results 将返回评论列表，而不是我真正想要的帖子列表。我可以使用评论结果/点击中的 post_id 来检索帖子列表，但这会影响性能。
*   对多种类型执行 Sunspot.search.hits 以获取要显示到视图的公共字段列表更加困难。
*   根据[http://sunspot.github.com/sunspot/rails/docs/index.html](http://sunspot.github.com/sunspot/rails/docs/index.html)，“Sunspot 完全不知道搜索是否针对一种或多种类型；唯一的限制是用于限制、排序等的列. 对所有被搜索的类型都以相同的方式定义。” 必须为所有类型定义相同的列。

因此，具有关联和映射到多个模型的单一类型搜索，没有任何这些问题并且可以轻松返回相同的结果，恕我直言。

# node.js - 对除特定路径之外的所有路径使用 Express 中的特定中间件

> ID：12921658
> 
> 赞同：98
> 
> 时间：2012-10-16T19:00:59.670
> 
> 标签：node.js, routes, express, middleware

我在 node.js 中使用 Express 框架和一些中间件功能：

```
var app = express.createServer(options);
app.use(User.checkUser); 
```

我可以使用`.use`带有附加参数的函数来仅在特定路径上使用此中间件：

```
app.use('/userdata', User.checkUser); 
```

是否可以使用路径变量，以便将中间件用于除特定路径（即根路径）之外的所有路径？

我正在考虑这样的事情：

```
app.use('!/', User.checkUser); 
```

`User.checkUser`除了根路径外，总是调用so 。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-10-16T23:01:49.483

我会将 checkUser 中间件添加到我的所有路径中，除了主页。

```
app.get('/', routes.index);
app.get('/account', checkUser, routes.account); 
```

或者

```
app.all('*', checkUser);

function checkUser(req, res, next) {
  if ( req.path == '/') return next();

  //authenticate user
  next();
} 
```

您可以扩展它以在非身份验证路径数组中搜索 req.path：

```
function checkUser(req, res, next) {
  const nonSecurePaths = ['/', '/about', '/contact'];
  if (nonSecurePaths.includes(req.path)) return next();

  //authenticate user
  next();
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-16T19:13:16.260

与其直接注册`User.checkUser`为中间件，不如注册一个新的辅助函数，例如`checkUserFilter`，它会在每个 URL 上调用，但仅在给定的 URL 上将执行传递给 userFiled。例子：

```
var checkUserFilter = function(req, res, next) {
    if(req._parsedUrl.pathname === '/') {
        next();
    } else {
        User.checkUser(req, res, next);
    }
}

app.use(checkUserFilter); 
```

理论上，您可以提供 regexp 路径到`app.use`. 例如：

```
app.use(/^\/.+$/, checkUser); 
```

在 express 3.0.0rc5 上尝试过，但它不起作用。

也许我们可以[开一张新票](https://github.com/visionmedia/express/issues/new)并建议将其作为一项功能？

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-11-22T14:43:34.343

您也可以在每条路由上设置中间件。

```
// create application/x-www-form-urlencoded parser
var urlencodedParser = bodyParser.urlencoded({ extended: false })

// POST /login gets urlencoded bodies
app.post('/login', urlencodedParser, function (req, res) {
  if (!req.body) return res.sendStatus(400)
  res.send('welcome, ' + req.body.username)
}) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-22T13:28:53.997

采用

```
app.use(/^(\/.+|(?!\/).*)$/, function(req, resp, next){... 
```

这会传递除 / 之外的任何 url。除非，它对我有用。

一般来说

```
/^(\/path.+|(?!\/path).*)$/ 
```

（请参阅[如何在正则表达式中否定特定单词？](https://stackoverflow.com/questions/1240275/how-to-negate-specific-word-in-regex)）

希望这可以帮助

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-20T08:58:42.377

使用这个名为[express-unless 的库](https://www.npmjs.com/package/express-unless)

要求对每个请求进行身份验证，除非路径是 index.html。

```
app.use(requiresAuth.unless({
  path: [
    '/index.html',
    { url: '/', methods: ['GET', 'PUT']  }
  ]
})) 
```

路径可以是字符串、正则表达式或任何这些的数组。它也可以是一个对象数组，它是 URL 和方法键对。如果请求路径或路径与方法匹配，则中间件不会运行。

这个库肯定会帮助你。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-06-08T11:34:04.683

解决方案是使用设置api和中间件的顺序。在你的情况下，它必须是这样的。

```
 var app = express.createServer(options);

    // put every api that you want to not use checkUser here and before setting User.checkUser
    app.use("/", (req, res) => res.send("checkUser middleware is not called"));

    app.use(User.checkUser);

    // put every api that you want use checkUser
    app.use("/userdata", User.checkUser, (req, res) =>
      res.send("checkUser called!")
    ); 
```

这是一个完整的例子。

```
const express = require("express");
const app = express();
const port = 3002;

app.get("/", (req, res) => res.send("hi"));

app.use((req, res, next) => {
  console.log("check user");
  next();
});

app.get("/checkedAPI", (req, res) => res.send("checkUser called"));

app.listen(port, () => {
  console.log(`Server started at port ${port}`);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-12T08:47:56.030

@chovy 的解决方案是最好的。

另一种解决方案是：

我面临着类似的问题。所以我所做的就是将“路​​由”文件中的函数拆分成不同的文件，分别导出。同样，我将它们分别导入到“服务器”文件中，并为各自的路由调用中间件。但我不会大规模推荐这个，我有一个不到 10 条路线的小项目，所以我不介意这样做。对于缩放，我会选择 chovy 的方法。

# javascript - JavaScript 中的 Number+number="numbernumber"

> ID：12921667
> 
> 赞同：-1
> 
> 时间：2012-10-16T19:01:32.567
> 
> 标签：javascript, html, textbox, numbers

如果我在文本框中输入 50 并将 0 作为 offsetTop，我会得到 050。为什么？这是代码：

```
alert(allspan[i].offsetTop+document.getElementById("size").value); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T19:02:37.557

的返回类型`.value`是一个字符串，所以你得到的是字符串连接而不是两个数字相加。

您需要`parseInt`使用价值。

```
alert(allspan[i].offsetTop + parseInt(document.getElementById("size").value,10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:03:16.347

您可能需要使用`parseInt(myVar)`或`parseFloat(myVar)`将其转换为数字数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:03:38.253

您将一个整数添加`(allspan[i].offsetTop)`到一个字符串（`document.getElementById("size").value`），这将是一个字符串。

如果你将第二个值设为整数，你会没事的：

```
allspan[i].offsetTop + parseInt(document.getElementById("size").value) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T19:03:57.033

这是一个常见的问题。如果你要在数学方程中使用一个变量，那么你必须通过使用来确保它是一个数字`parseInt(variableName)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T19:04:05.100

尝试 ：

```
alert(parseInt(allspan[i].offsetTop) + parseInt(document.getElementById("size").value)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T19:04:53.197

这是因为`document.getElementById("size").value`返回的是字符串，而不是整数。试试这个：

```
parseInt(document.getElementById("size").value); 
```

# python - 弹出 Twitter 登录窗口时 Webdriver 测试停止

> ID：12921668
> 
> 赞同：1
> 
> 时间：2012-10-16T19:01:36.343
> 
> 标签：python, webdriver, selenium-webdriver

我正在尝试运行一个简单的测试来导航到一个站点并尝试使用 twitter 向该站点注册。出于某种原因，当我单击 twitter 按钮并弹出登录窗口时，测试就停止了。在搜索 google、selenium 用户组或 stackoverflow 时，我一直找不到任何东西（至少到目前为止）。我想知道是否有其他人遇到过类似的问题，或者我是否遗漏了一些非常简单的东西。提前致谢。代码如下：

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re

class TwReg(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "sitename"
        self.verificationErrors = []

    def test_tw_reg(self):
        driver = self.driver
        driver.get(self.base_url + "/")
        driver.find_element_by_id("tw_one_click_btn").click()

    def is_element_present(self, how, what):
        try: self.driver.find_element(by=how, value=what)
        except NoSuchElementException, e: return False
        return True

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
    unittest.main() 
```

为了确保我清楚地表达了正在发生的事情。上面的代码应该在 twitter sing in window 弹出后退出，而不是在那个时候挂起。此代码由 Selenium 的 IDE 生成。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T14:27:07.987

我根本不知道 python，但看起来你的代码没有告诉 webdriver 切换到弹出窗口。网络驱动程序单击按钮后，它试图在登录页面上而不是在弹出窗口中查找元素“what”。因为登录窗口不再具有焦点，所以它不会触发 NoSuchElementException 而是超时。所以你需要在代码中添加一行，以便在它打开后切换到弹出窗口。

# sql-server - SQL Server 导入比批量导入更快

> ID：12921670
> 
> 赞同：1
> 
> 时间：2012-10-16T19:01:42.307
> 
> 标签：sql-server, bulkinsert, sqlbulkcopy

我有一个大的（~50Gb，~3 亿行）制表符分隔文件，我想将它导入到带有列的 SQL Server 表中：`char(10), varchar(512), nvarchar(512), nvarchar(512)`.

[使用 T-SQL、SSIS 或 C# SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类批量导入它大约需要一天时间。

有没有更快的方法来加载这些数据？

或者是否有某种情况会减慢它的速度，我可以删除或更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:39:06.053

如果要插入现有表，请在导入前删除所有索引，并在导入后重新创建它们。

如果您使用的是 SSIS，则可以调整批处理和提交大小。

验证服务器上有足够的内存来处理如此大的数据负载。

在本地服务器上执行加载操作（将文件复制到本地，不要通过网络加载）。

将目标数据库和事务日志自动增长选项配置为合理的值，例如一次几百 MB 块（对于主数据文件 .mdf，默认值通常增长 1MB）。增长操作缓慢/昂贵，因此您希望尽量减少这些操作。

确保您的数据和日志文件位于快速磁盘上，最好位于单独的 LUN 上。理想情况下，您希望日志文件位于与日志文件不同的镜像 LUN 上（您可能需要与存储管理员或托管服务提供商联系以获取选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:41:50.397

在过去的几周里，我自己一直在努力优化一个非常大的负载。BULK INSERT 是最快的方法，我发现 BCP 与 SSIS 或 TSQL 批量插入相反，但是您可以做一些事情来调整它。

*   尝试提高/降低每批设置的行数，以转移 CPU 和内存之间的资源压力（越高将减少 CPU，越低将减少内存）。
*   如果有聚集索引，或非聚集索引删除它们并在插入后重新创建它们
*   使用 .NET 工具将 TSV 拆分为较小的文件，然后将它们并行加载到表中。这要求表是堆（已删除聚集索引）
*   确保它被最低限度地记录。对于堆，这需要 TABLOCK，对于聚集索引，它需要跟踪标志 610，并且要求数据长袍与聚集索引键的顺序相同。两者都需要 SIMPLE 或 BULK LOGGED 恢复模型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T04:46:38.370

您是否尝试过并行加载数据？这是一个简单的 SSIS 解决方案：

1) 安装 SSIS 行号生成器 ( [http://www.konesans.com/products/row-number-transformation.aspx](http://www.konesans.com/products/row-number-transformation.aspx) ) 2) 创建一个 SSIS 包来读取文件。3) 在数据流任务中，读取源文件。4）在数据流任务中，插入行号生成器。5）在数据流任务中，使用行号插入条件拆分并创建多个线程（即rownumber % 3 == 0, rownumber % 3 == 1, rownumber % 3 == 2）。6) 在数据流任务中，插入目标目标表。

希望这可以帮助。

# git - Git 软件（例如 Gitbox、Github、SourceTree）可以使用远程仓库而不是本地仓库吗？

> ID：12921674
> 
> 赞同：6
> 
> 时间：2012-10-16T19:01:57.237
> 
> 标签：git, github, bitbucket, atlassian-sourcetree, gitbox

我喜欢使用 Git 软件来推送提交，但我使用的那些（Gitbox、Github、SourceTree）在向它们添加新仓库时都要求本地仓库。

问题是，我的仓库在我的开发服务器上，而不是我的本地机器上。

那么 Git 软件可以使用远程 Git 存储库作为开发存储库，然后将其推送到您的主存储库（例如 Github 或 Bitbucket）吗？

否则，您似乎无法使用该软件，而不得不通过 SSH 使用命令行。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:36:46.570

一种不依赖前端来支持直接操作远程仓库的解决方案是将远程挂载为网络文件系统。如果您只能通过 SSH 访问远程机器，您可以尝试通过[FUSE](http://fuse.sourceforge.net/)（Linux 上）或Mac OS X 上的[OSXFUSE使用](http://osxfuse.github.com/)[SSHFS](http://fuse.sourceforge.net/sshfs.html)。或者根据您的偏好和设置，您可以使用 SMB、NFS、DAV 或其他网络文件系统.

我在评论中提到的另一种方法是将网络文件系统从您的开发机器导出到您的服务器。我这样做是为了可以一次将我当前的工作副本安装在多台机器上，并且即使我没有连接到服务器，我仍然拥有我的本地工作副本。

你写：

> 我很惊讶 git 软件无法将远程存储库作为工作版本处理。

大多数 Git GUI 通过调用命令来完成一些工作`git`。为了让他们支持远程操作，核心 Git 也必须支持。它是用 C 和 shell 脚本混合编写的；所有这些都必须重写以处理远程文件。

文本编辑器的工作要容易得多；它在您打开文件时读取一个文件，并在您保存时写入，而 Git 在单个操作过程中读取和写入许多文件，例如`commit`.

网络文件系统意味着所有工具（Git 和其他）都可以处理您的远程文件。不是在每个应用程序中构建一个层来支持网络文件访问，而是在内核中（或通过 FUSE）进行，然后将其视为本地文件系统，即可免费为每个应用程序提供支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T18:47:17.390

请记住，Git 是一个[DVCS](https://en.wikipedia.org/wiki/Distributed_revision_control)。您不连接到远程服务器来提交内容的事实是*设计使然*。

您想要做的是让本地 Git 存储库将代码推送到您的集成服务器（实际运行代码的服务器）。这就像部署一样，只是您部署到测试服务器而不是生产服务器。

这通常是通过拥有一个您推送到的共享 Git 存储库来实现的。这个回购[应该是裸露](http://www.gitguys.com/topics/shared-repositories-should-be-bare-repositories/)的。除了裸共享存储库之外，您还需要共享 Git 存储库的非裸克隆，它将用作您的 Apache docroot。

当共享 repo 收到提交时，它将使 docroot repo 执行`git pull`。

这可以通过在共享 repo 上使用[post-receive 挂钩来实现。](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Server-Side-Hooks)

docroot repo 在特定分支上签出（比如说`develop`）。因此，即使您将内容提交到其他分支并推送它们，服务器也不会受到影响。

这允许您设置多个部署存储库，因此您可以拥有另一个`prod`与其中一个相关联的分支，当您将内容推送到它时，这些分支实际上会更新生产代码。

它还允许您将未完成/正在进行的工作存储在根本不部署的共享分支上，这样您就知道您一直在笔记本电脑上工作的东西在共享存储库中是安全的，即使它可以不要被发送到测试服务器，因为它不完整并且会破坏测试服务器，使其他人无法工作或其他东西。

[本文](http://danbarber.me/using-git-for-deployment/)详细介绍了如何设置所有这些。我以前做过，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T18:49:34.893

我为自己找到了一个简单的方法：在传输（FTP 客户端）中，有一个“将收藏夹安装为磁盘”的选项。SourceTree 可以使用这个“虚拟”磁盘按预期工作。

但是有一个限制：只有在对代码进行了所有更改并准备好提交/推送之后，您才能挂载磁盘并启动 SourceTree，如果在处理代码时保持 SourceTree 和 ssh 磁盘挂载，它将无法工作。由于某种原因，Transmit 挂载的磁盘不会实时更新文件内容，而只会在卸载/挂载操作之后更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T08:50:15.663

大约一年前我遇到了这个确切的问题 - 不幸的是，我找不到任何一致、可靠的答案。我用谷歌搜索了几个星期，认为是我的搜索词没有成功——尝试了各种方式。

[我们的设置是每个开发人员都有自己的开发服务器-将它们与机器分开意味着可以在任何地方开发站点，可以将开发服务器设置为与实际环境完全相同，并且系统管理员可以对其进行升级和备份 - 我完全看到了在工作机器上拥有单独的开发服务器的优势，少数缺点之一是没有 git 应用程序！]

依赖文件挂载或欺骗您的计算机认为远程驱动器是本地的一切都适用于一般文件浏览，但当连接断断续续时，Git 应用程序往往会崩溃。其他时候你必须以某种方式做事，只是为了看到一个`git status`

我知道这不是您想听到的答案，就像我前段时间遇到的情况一样，并且确切地知道您的感受，**但是**您能做的最好的事情就是*在命令行上使用 git*。

我讨厌成为那些*命令行更好的*Stack Overflow 回答者之一，但在这种情况下，我找不到任何可以被多个开发人员每天整天使用的东西。

我当时也反对它，我更喜欢更漂亮、更易于使用的 UI，但自从学习了命令行和 git 后，我​​再也没有回头。在家里开始我自己的项目时，我发现自己在任何应用程序上都使用终端，因为我发现其中许多应用程序令人困惑！

它不仅有助于增强您对命令行的信心，而且自从使用终端以来，我的 Git 知识提高了十倍，因为这些应用程序经常隐藏很多发生的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-25T20:36:48.177

7 年后，Git 的目标是能够通过**[VFS for Git](https://vfsforgit.org/)**使用虚拟磁盘。

> Git 虚拟文件系统（以前称为 GVFS）是一个开源系统，它使 Git 能够在企业规模上运行。
> 它使使用和管理大量 Git 存储库成为可能。
> 
> VFS for Git 将您的 Git 存储库下的文件系统虚拟化，以便 Git 工具可以看到看似正常的存储库，而实际上这些文件实际上并不存在于磁盘上。
> VFS for Git 仅在需要时下载文件。

这（还）不是 Git 本身的一部分，但是：

为此，Git 2.22（2019 年第二季度）将通过引入一个**新的钩子 " `post-index-change`"**来帮助管理这样的虚拟磁盘，当磁盘索引文件更改时将调用该钩子：这有助于例如虚拟化工作树的实现。

请参阅[Ben Peart ( ) 的](https://github.com/benpeart)[提交 1956ecd](https://github.com/git/git/commit/1956ecd0ab26dea9c3ed6b9afe334101d9d12f60)（2019 年 2 月 15 日[）](https://github.com/benpeart)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 5795a75](https://github.com/git/git/commit/5795a75f9bd7a7f008b213c2f099e8c6b0468512))^(中，2019 年 4 月 25 日）)[`benpeart`](https://github.com/benpeart)
^([`gitster`](https://github.com/gitster))

> ## `read-cache`: 添加`post-index-change`钩子
> 
> 添加一个`post-index-change`在索引写入后调用的钩子 `do_write_locked_index()`。
> 
> 这个钩子主要用于通知，不会影响触发索引写入的 git 命令的结果。
> 
> 钩子被传递一个标志以指示工作目录是否已更新，以及一个指示`skip-worktree`位是否可能已更改的标志。
> 这些标志使钩子能够优化其对索引更改通知的响应。

# perl - 我可以使用 .perl_env 文件来设置环境变量吗？

> ID：12921676
> 
> 赞同：0
> 
> 时间：2012-10-16T19:01:57.987
> 
> 标签：perl, variables

我是配置 perl 的新手，我正在尝试找到设置一些常用变量的最佳方法。我知道有很多方法可以做到这一点，但我想找到“最好的”；）。我在我的根目录中找到了一个交叉的 .perl_env 文件，但找不到太多关于它的文档。这是我可以保留 BINDIR 和 VARDIR （我在 perl 脚本中使用的位置）等变量的地方，还是有更好的方法。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:06:28.620

嗯，我从来没有听说过`.perl_env`，它不在文档中：

```
$ perldoc perlrun | grep .perl_env || echo "not found"
not found 
```

但无论如何，让我们试一试。

```
$ echo '$ENV{FOO}="BAR";' >~/.perl_env

$ FOO=BAZ perl -E'say $ENV{FOO}'
BAZ 
```

不，不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T04:35:01.517

像其他人一样，我从未听说过`.perl_env`文件。另外我假设您的意思是要设置 Perl 全局变量，因为如果您要设置系统全局变量（环境变量），您应该在 Bash 脚本中执行此操作。

无论如何，如果您真的想这样做，我会创建一个名为的文件`MyGlobalVariables.pm`并将其放在您的 PERL5LIB 目录中。

```
package MyGlobalVariables;

use strict;
use warnings;

use parent 'Exporter';
our @EXPORT = qw/$SomeVar/;

our $SomeVar = 'Some Value'; 
```

请记住，每个变量都必须添加到`@EXPORT`数组中。

然后在你的脚本中你可以写`use MyGlobalVariables;`，瞧，它们就在那里。这种机制很像 LaTeX 中的自定义样式文件；当然那是一种宏语言。

说了这么多，我真的不认为这是一个好主意。为什么？两个原因：

1.  您看不到这些变量的初始化，要记住您必须查看其他文件。
2.  这些变量必须是真正的全局变量而不是词法变量。除非有真正的理由，否则总是应该使用词汇（`my`而不是）。`our`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:13:27.783

如果要处理配置文件以在脚本之间共享变量，请参见以下示例：

**输入文件**：

```
$ cat /tmp/config 
[name1]
    val1=foobar
    val2=qux

[name2]
    val1=10
    val2=100 
```

**Perl代码**：

```
$ perl -we '
    use Data::Dumper;
    use Config::IniFiles;
    my $ini = new Config::IniFiles(
        -file => "/tmp/config", -allowcontinue => 1
    );
    print Dumper $ini->{"myparms"};
' 
```

**输出**：

```
$VAR1 = {
          'name2' => [
                       'val1',
                       'val2'
                     ],
          'name1' => [
                       'val1',
                       'val2'
                     ]
        }; 
```

* * *

相反，如果您需要一个`shell`变量来共享，例如，如果使用`bash`：

```
$ echo "export MYVAR=foobar" >> ~/.bashrc
$ . !$
$ perl -le 'use Env qw/MYVAR/; print $MYVAR;' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T03:24:01.983

对于像这样的全局变量，我将它们设置在环境中（我使用 Windows，但显然你可以在 Unix 中做同样的事情）。在 Perl 中，环境存储在`%ENV`变量（系统的一部分）中。您可以将 BINDIR 称为`$ENV{BINDIR}`.

# c++ - 如何使用 CreateProcess 执行简单的命令行？

> ID：12921680
> 
> 赞同：5
> 
> 时间：2012-10-16T19:02:16.750
> 
> 标签：c++, winapi, command-line

我想执行一个简单的命令行但不显示一个窗口。因此，据我所知，我不能使用 System 并且必须使用 CreateProcess 。所以我有以下代码，例如：

```
//.../

CreateProcess(NULL,input,NULL,NULL,false,NORMAL_PRIORITY_CLASS | 
 CREATE_NO_WINDOW,NULL,NULL,&startInf,&procInf);//)

//.../ 
```

如果输入是像*“ping www.google.com -n 2”*这样的行，它似乎可以工作。我需要的是删除功能。因此，我尝试了很多变体，例如：

```
input = "rd /S /Q \"D:\\ALEX_DATEN\\PC\\C++\\bla\""; 
```

和

```
 input = "rd /S /Q \"D:/DATEN/PC/C++/bla\""; 
```

但是什么也没发生，函数返回失败：/如果我把它写成一个 .bat 文件（不使用“\”转义字符），删除就完美了！

有谁知道我做错了什么？

Ps 不，我不是在编写破坏性病毒.. 如果那是我的目标，我肯定会找到更简单的方法...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:26:52.540

`rd`像,和 ... 之类的一些系统命令`del`不是实际的可执行映像（例如 .exe 文件），因此您不能使用`CreateProcess`它们是已知的内置命令`cmd`（Windows 命令解释器）来执行/运行它们，因此您应该创建`cmd`并将您的命令传递给它：

```
wchar_t cmd[ MAX_PATH ];
size_t nSize = _countof(cmd);
_wgetenv_s( &nSize, cmd, L"COMSPEC" );
BOOL b = CreateProcessW( cmd, input, NULL, NULL, FALSE,
    NORMAL_PRIORITY_CLASS | CREATE_NO_WINDOW, NULL, NULL, &startInf, &procInf ); 
```

注意：请参阅 的参数`cmd`，您必须使用它`/C`来传递您的命令。所以你的命令如下：

```
wchar_t input[] = L"some command";
wchar_t cmd[MAX_PATH] ;
// initialize cmd
wchar_t cmdline[ MAX_PATH + 50 ];
swprintf_s( cmdline, L"%s /c %s", cmd, input );
STARTUPINFOW startInf;
memset( &startInf, 0, sizeof startInf );
startInf.cb = sizeof(startInf);
// If you want to redirect result of command, set startInf.hStdOutput to a file
// or pipe handle that you can read it, otherwise we are done!
PROCESS_INFORMATION procInf;
memset( &procInf, 0, sizeof procInf );
BOOL b = CreateProcessW( NULL, cmdline, NULL, NULL, FALSE,
    NORMAL_PRIORITY_CLASS | CREATE_NO_WINDOW, NULL, NULL, &startInf, &procInf );
DWORD dwErr = 0;
if( b ) {
    // Wait till cmd do its job
    WaitForSingleObject( procInf.hProcess, INFINITE );
    // Check whether our command succeeded?
    GetExitCodeProcess( procInfo.hProcess, &dwErr );
    // Avoid memory leak by closing process handle
    CloseHandle( procInfo.hProcess );
} else {
    dwErr = GetLastError();
}
if( dwErr ) {
    // deal with error here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:04:10.660

正如其他人所说，`rd`不能直接执行，`CreateProcess()`您必须作为其命令行参数执行。而不是像这样使用，你应该使用：`cmd.exe``/C rd ...``CreateProcess()``SHFileOperation()`

```
SHFILEOPSTRUCT FileOp = {0};
FilOp.wFunc = FO_DELETE;
FileOp.pFrom = "D:\\ALEX_DATEN\\PC\\C++\\bla\0"; 
FileOp.fFlags = FOF_SILENT | FOF_NOCONFIRMATION | FOF_NOERRORUI.

int ErrorCode = SHFileOperation(&FileOp);
if (ErrorCode == 0)
{
    if (FileOp.fAnyOperationsAborted)
        // not everything was deleted
    else
        // delete was successful
}
else
{
    // delete failed
    // note that ErrorCode might not be a Win32 error code,
    // so check the SHFileOperation() documentation for
    // possible alternatives
} 
```

# c# - ListView - EditItemTemplate & InsertItemTemplate

> ID：12921683
> 
> 赞同：1
> 
> 时间：2012-10-16T19:02:35.830
> 
> 标签：c#, asp.net, listview, webforms

目前我无法直接访问我的代码库，但希望我可以在不发布实际代码的情况下充分展示我的问题。

为了设置场景，我有一个相当长且笨拙的多页“预订表单”控件，它使用 MultiView，每个页面都有一个视图。我正在尝试对其进行重构以对其进行整理并使其更具可读性（尽管我需要将其保留在一个控件中）。在一个特定视图中，我有一个 ListView，可用于向预订中添加任意数量的额外人员。ListView 手动绑定到一个`List<Person>`（通过`OnItemUpdating`和`OnItemInserting`事件），它是整个`Booking`对象的成员。

我的 ListView 有一个 EditItemTemplate 和一个 InsertItemTemplate。这些几乎是相同的，除了 EditItemTemplate 在顶部有一些关于现有项目的附加信息：

```
<EditItemTemplate>
    <div class="ItemInfo">
        <!-- Controls a & b -->
    </div>
    <div class="FormControls">
        <!-- Controls c, d, & e -->
    </div>
</EditItemTemplate>

<InsertItemTemplate>
    <div class="FormControls">
        <!-- Controls c, d, & e -->
    </div>
</InsertItemTemplate> 
```

我想做的是将这些模板之一建立在另一个模板上，这将允许我删除大约 300 行冗余标记。但是，我仍然仅限于使用一个独立控件。我见过类似情况的例子，这些例子是这样处理的：

```
protected void lvPeople_Init(Object sender, EventArgs e)
{
    lvPeople.InsertItemTemplate = lvPeople.EditItemTemplate;
} 
```

这里的问题是，这也会将控件“a”和“b”放入 InsertItemTemplate。“a”和“b”包含新添加项目尚不存在的信息。我可以输入默认值，但这是不可取的，因为表单将是多语言的，这将意味着内容编辑器不必要的额外工作 - 这些控件最好是 EditItemTemplate 独有的。

有没有一种不使用额外控件的巧妙方法来处理这个问题？

谢谢。

# php - PHP - 数组（来自文本文件）中的多个搜索查询（来自表单）..或其他东西

> ID：12921692
> 
> 赞同：0
> 
> 时间：2012-10-16T19:02:51.083
> 
> 标签：php, file, search

不知道该怎么称呼这个..无论如何：

我有一个文本文件，包括：

```
something;something2;something3;something4\n 
```

我使用常规的 html 表单进行用户输入。用户输入 = $搜索。我将其发送到我的搜索功能：

```
function search($search) {
$lin = file('text.txt');
$lines = array_map('strtolower', $lin);
$found = false;
foreach($lines as $line) {
if(strpos($line, $search) !== false) {
$found = true;
$line = explode(";",$line);
$line[1] = ucwords($line[1]);
$line[2] = ucwords($line[2]);
$line[3] = strtoupper($line[3]);
echo "$hit[0] $hit[1] etc";
}
}
if(!$found) {
echo "No matches";
}
} 
```

如果用户只输入一个单词，这很好用。假设文件的内容是： foo;bar;chuck;hank;

我希望用户能够搜索“foo chuck”并仍然得到结果。即使只有一个单词匹配，也应该回显该行（例如“foo carl”仍然输出整行）。

但话又说回来，如果有一个“foo;bar”和一个“foo;carl”，我不希望 foo bar 显示用户是否搜索“foo carl”..

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:05:35.967

使用[explode](http://php.net/manual/en/function.explode.php)将您的字符串放入一个数组中，然后遍历该数组并检查是否命中 .... 或者更好的是，使用[in_array](http://us1.php.net/manual/en/function.in-array.php)：

```
$string='something;something2;something3;something4';
$array=explode(';',$string);
if(in_array('test',$array) || in_array('othertest',$array) || in_array('thirdval',$array)){
    ;//there's a match
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:10:34.067

您可以获取用户输入，将其拆分为单词，以与规范化文件内容相同的方式对其进行规范化，然后将它们放入数组`$input`中。

然后，对于文件内容中的每一行，都遵循完全相同的过程，再次以数组结尾`$line`。

根据您的描述，当里面`$input`的所有单词也出现在里面时，就会发生搜索命中`$line`，这可以表示为：

```
$hit = count(array_intersect($input, $line)) == count($input); 
```

不要忘记“修剪”`$input`并`$line`使用`array_unique`来涵盖搜索词出现多次的情况。

示例代码：

```
function search($search) {
  // break input into words and normalize
  // explode() is maybe not going to cut it in production, but it's OK here
  $search = array_unique(explode(' ', strtolower($search)));
  $terms = count($search);

  $lines = file('text.txt');
  $found = false;
  foreach($lines as $line) {
    // same treatment as for input
    $line = array_unique(explode(' ', strtolower($line)));

    if(count(array_intersect($search, $line)) == $terms) {
      $found = true;
      $line = explode(";",$line);
      $line[1] = ucwords($line[1]);
      $line[2] = ucwords($line[2]);
      $line[3] = strtoupper($line[3]);
      echo "$hit[0] $hit[1] etc";
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:18:17.680

如果您正在处理大文件，则使用`file`可能不是最好的方法，因为将整个文件读入数组并将其放入内存。您的文件也看起来像 CSV，因此您可以使用`fgetcsv`您需要更改的所有内容是分隔符

尝试

```
$file = "large_file.txt";
$search = "something2";
var_dump(search($file, $search)); 
```

其他用途

```
search($file, $search,true); // Multiple Result
search($file, $search,true,","); // File has , has delimiter Instead of ; 
```

功能

```
function search($file, $search, $multiple = false, $delimiter = ";") {
    $handle = fopen($file, "r");
    $list = array();
    while ( ($data = fgetcsv($handle, 1024, $delimiter)) !== FALSE ) {
        if (in_array($search, $data)) {
            if ($multiple)
                $list[] = $data;
            else
                return $data;
        }
    }

    fclose($handle);
    return $list;
} 
```

# shopify - 您可以通过 Shopify 中的 url 传递值吗？

> ID：12921697
> 
> 赞同：5
> 
> 时间：2012-10-16T19:03:13.613
> 
> 标签：shopify, liquid

胡安

您好，我希望 Shopify 专家可以为我提供建议。

我已经使用了一个集合模板，我需要准备此布局以在 Shopify 中作为整个电子商务功能的补充。

[http://www.psd2htmlservice.com/streetstyles.jpg](http://www.psd2htmlservice.com/streetstyles.jpg)

如您所见，您将单击缩略图，左侧会出现较大的相应图像以及顶部的一些文本。

正如我所说，网站的这一部分没有附加电子商务元素，但我认为每张图片都可以是添加到收藏中的产品。我精通遍历产品图像和集合，但我不确定如何实现所需的功能，记住（据我所知）你不能通过液体中的 url 传递值。我所能想到的就是使用一个新页面，该页面使用一个模板，每次都硬编码一些液体代码......但肯定会有一种更简化的方式。

我将不胜感激任何帮助。

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-07T00:45:25.657

不，很遗憾，您不能（截至 2014 年 6 月）

对此有一个[功能请求](http://ecommerce.shopify.com/c/ecommerce-design/t/url-parameters-in-liquid-171887)，`Expose current URL in Liquid`但尚未实施。

此外，在 Shopify 帮助表单中有几个较旧的页面，可能最直接的是[通过 URL 将变量传递到液体模板，](http://ecommerce.shopify.com/c/shopify-discussion/t/pass-variables-to-liquid-template-via-url-32784)其中提到：

> 你不能这样做：
> 
> `{{ request.myvar }}`
> 
> 阅读`myVal`。

论坛上的常见建议包括：

1.  使用 Javascript 读取 URL 并使用它来修改页面或与用户交互，
2.  创建一个[应用程序代理](http://docs.shopify.com/api/tutorials/application-proxies)，它是您自己服务器上的一个页面，它通过您 Shopify 网站上的特殊链接提供服务（但它实际上仍然不允许您访问 Liquid 中的查询变量）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-10T12:34:46.883

好吧，您`{{content_for_header}}`实际上可以在液体中找到它。我无法回答 Shopify 是否会在未来移除`content_for_header`，但您可以将其放入液体中。

```
{%- capture contentForQuerystring -%}{{ content_for_header }}{%- endcapture -%}

{%- assign pageUrl = contentForQuerystring | split:'"pageurl":"' | last | split:'"' | first | split:'.myshopify.com' | last |
   replace:'\/','/' | 
   replace:'%20',' ' | 
   replace:'\u0026','&'
-%} 
```

查看这个示例，了解我过去是如何使用它的： [https ://www.channelape.com/shopify/build-custom-json-api-shopify-liquid/](https://www.channelape.com/shopify/build-custom-json-api-shopify-liquid/)

# java - 无法为 Jython 类调用 Thread 的 init() 方法

> ID：12921700
> 
> 赞同：0
> 
> 时间：2012-10-16T19:03:22.213
> 
> 标签：java, multithreading, jython, init

这是我在 Jython 中实际编写的类示例：

```
from threading import Thread

class MyClass(Thread)

    def __init__(self, mylist):
        Thread.__init__(self)
        self.mylist = mylist 
```

我得到了错误：

```
File 'myfile.py', line 4, in __init__   at java.lang.Class.isAssignableFrom(Native Method)

java.lang.NullPointerException: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:22:29.517

虽然这并不能直接回答为什么会发生这种情况，但我几乎总是会选择创建 a`Runnable`并将其传递给`Thread(Runnable)`构造函数，而不是对其进行子类化`Thread`。

这可能会解决您的问题。

# c - 无需等待LF即可读取密钥的功能

> ID：12921701
> 
> 赞同：2
> 
> 时间：2012-10-16T19:03:27.860
> 
> 标签：c, io, ansi, gcc-pedantic

我正在整个互联网上寻找一些可以从键盘读取键而无需等待 LF 的功能（例如 conio.h 中的 getch() ）。不幸的是，我必须使用开关 -ansi 和 -pedantic 使用 gcc 编译它，这使得 getch() 对我来说毫无用处。也许您知道其他符合标准的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:55:50.697

您可以使用标准`setvbuf`功能来禁用缓冲（参见下面的示例）。请注意，这将导致从程序的角度禁用缓冲，但不会禁用终端中的缓冲（这也可能是您想要的）。示例代码：

```
#include <stdio.h>

int main()
{
        char c;
        setvbuf(stdin, 0, _IONBF, 0);
        c = getc(stdin);
        printf("read %c\n", c);

        return 0;
} 
```

像这样运行它仍然会从终端逐行读取输入，但只会消耗输入的第一个字符：

```
$ ./buf
ab
read a
$ b 
```

删除该`setvbuf`行将导致您的程序消耗整行输入。

如果仅使用 C 标准库，则没有可移植的方法来禁用终端的行缓冲，因为它不了解终端。

编辑：

一种 POSIX 可移植的方法是使用 termios 函数：

```
#include <stdio.h>
#include <unistd.h> /* for STDIN_FILENO */
#include <termios.h>

int main()
{
        char c;
        struct termios old, t;

        tcgetattr(STDIN_FILENO, &old);
        t = old;
        cfmakeraw(&t);
        tcsetattr(STDIN_FILENO, TCSANOW, &t);
        c = getc(stdin);
        tcsetattr(STDIN_FILENO, TCSANOW, &old);
        printf("\rread %c\n", c);

        return 0;
} 
```

# performance - Matlab：从循环中重复调用相同的 mex 函数会产生太多开销吗？

> ID：12921705
> 
> 赞同：8
> 
> 时间：2012-10-16T19:03:45.253
> 
> 标签：performance, matlab, mex

我有一些需要加速的 Matlab 代码。通过分析，我确定了一个特定的函数是减慢执行速度的罪魁祸首。这个函数在一个循环中被调用了几十万次。

我的第一个想法是将函数转换为 mex（使用 Matlab Coder）以加快速度。但是，常识告诉我 Matlab 和 mex 代码之间的接口会导致一些开销，这意味着调用这个 mex 函数数千次可能不是一个好主意。它是否正确？或者当重复调用同一个 mex 以消除开销时，Matlab 是否会发挥一些作用？

如果有*很大的*开销，我正在考虑重组代码，以便将循环添加到函数本身，*然后*创建一个 mex。在此之前，我想验证我的假设，以证明在此花费的时间是合理的。

更新：

我尝试了@angainor 的建议，并使用以下代码创建了 donthing.m：

```
function nothing = donothing(dummy) %#codegen
nothing = dummy;
end 
```

然后，我从中创建了一个 mex 函数作为 donothing_mex，并尝试了以下代码：

```
tic;
for i=1:1000000
    donothing_mex(5);
end
toc; 
```

结果是对该函数的一百万次调用花费了大约 9 秒。对于我们的目的来说，这不是一个显着的开销，所以现在我想我会将被调用的函数单独转换为 mex。然而，回想起来，从一个执行大约一百万次的循环中调用一个函数确实是一个非常愚蠢的想法，考虑到这是性能关键代码，因此将循环移动到 mex 函数仍然在书中，但优先级要低得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:09:58.477

像往常一样，这完全取决于您在 MEX 文件中所做的工作量。调用 MEX 函数的开销是恒定的，不取决于问题的大小等。这意味着参数**不会**复制到新的临时数组中。因此，如果工作量足够，调用 MEX 文件的 MATLAB 开销将不会显示。无论如何，根据我的经验，MEX 调用开销仅在第一次调用 mex 函数时显着 - 必须加载动态库、解析符号等。后续 MEX 调用的开销非常小并且非常高效。

由于这种高级语言的性质，MATLAB 中的几乎所有内容都与一些开销有关。除非你有一个代码，你确定它是用 JIT 完全编译的（但是你不需要 mex 文件:)）所以你可以选择一个开销而不是另一个开销..

总结一下 - 我不会太害怕 MEX 调用开销。

**编辑**正如在这里和其他地方经常听到的那样，在任何特定情况下唯一合理的做法当然是**BENCHMARK**并自己检查它。您可以通过编写一个简单的 MEX 函数轻松估计 MEX 调用开销：

```
#include "mex.h"
void mexFunction(int nlhs, mxArray *plhs[ ], int nrhs, const mxArray *prhs[ ]) 
{      
} 
```

在我的电脑上你得到

```
tic; for i=1:1000000; mexFun; end; toc
Elapsed time is 2.104849 seconds. 
```

这是每个 MEX 调用 2e-6s 的开销。添加您的代码，计时并查看开销是否处于可接受的水平。

正如 Andrew Janke 在下面指出的（谢谢！），MEX 函数开销显然取决于您传递给 MEX 函数的参数数量。这是一个小的依赖，但它存在：

```
a = ones(1000,1);
tic; for i=1:1000000; mexFun(a); end; toc
Elapsed time is 2.41 seconds. 
```

它与 的大小无关`a`：

```
a = ones(1000000,1);
tic; for i=1:1000000; mexFun(a); end; toc
Elapsed time is 2.41805 seconds. 
```

但这与参数的数量有关

```
a = ones(1000000,1);
b = ones(1000000,1);
tic; for i=1:1000000; mexFun(a, b); end; toc
Elapsed time is 2.690237 seconds. 
```

因此，您可能希望在测试中考虑到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:53:02.467

您绝对应该毫不犹豫地将循环移动到 mex 文件中。下面的示例演示了 for 循环中几乎空的工作单元的 1000 倍加速。显然，随着 for 循环中工作量的变化，这种加速会降低。

这是差异的示例：

没有内部循环的 Mex 函数：

```
#include "mex.h"
void mexFunction(int nlhs, mxArray *plhs[ ], int nrhs, const mxArray *prhs[ ]) 
{      
    int i=1;    
    plhs[0] = mxCreateDoubleScalar(i);
} 
```

在 Matlab 中调用：

```
tic;for i=1:1000000;donothing();end;toc
Elapsed time is 3.683634 seconds. 
```

带有内部循环的 Mex 函数：

```
#include "mex.h"
void mexFunction(int nlhs, mxArray *plhs[ ], int nrhs, const mxArray *prhs[ ]) 
{      
    int M = mxGetScalar(prhs[0]);
    plhs[0] = mxCreateNumericMatrix(M, 1, mxDOUBLE_CLASS, mxREAL);
    double* mymat = mxGetPr(plhs[0]);
    for (int i=0; i< M; i++)
        mymat[i] = M-i;
} 
```

在 Matlab 中调用：

```
tic; a = donothing(1000000); toc
Elapsed time is 0.003350 seconds. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T09:01:26.617

好吧，这是我在 Matlab 中能做到的最快速度：

```
%#eml
function L = test(s,t)

    m = numel(s);
    n = numel(t);

    % trivial cases
    if m==0 && n==0
        L = 0; return; end
    if n==0
        L = m; return; end
    if m==0
        L = n; return; end

    % non-trivial cases
    M = zeros(m+1,n+1);    
    M(:,1) = 0:m;

    for j = 2:n+1
        for i = 2:m+1
            M(i,j) = min([
                M(i-1,j) + 1
                M(i,j-1) + 1
                M(i-1,j-1) + (s(i-1)~=t(j-1));
                ]);
        end
    end

    L = min(M(end,:));

end 
```

你能编译这个并运行一些测试吗？（出于某种奇怪的原因，编译无法在我的安装上运行......）如果您认为这更容易，也许可以更改`%#eml`为first。`%#codegen`

注意：对于 C 版本，您还应该交换 for 循环，以便循环`j`是内部循环。

此外，`row1`and`row2`方法的内存效率要高得多。如果你无论如何都要编译，我会使用这种方法。

# plone - 在自定义脚本适配器中将 PloneFormGen 数据发布到外部站点

> ID：12921710
> 
> 赞同：1
> 
> 时间：2012-10-16T19:04:17.700
> 
> 标签：plone, ploneformgen

有没有办法通过自定义脚本适配器中的发布请求将 PloneFormGen 表单数据传递到外部站点？

我的外部站点仅对服务器可见

帖子的网址是`http://app.com/issues_form/issues`

我在自定义剥离适配器中的脚本：

```
import urllib
import urllib2

url = "http://app.com/issues_form/issues"
values = {'issue' : request.form['issue'] }
data = urllib.urlencode(values)
urllib2.Request(url,data) 
```

提交时我得到未经授权的访问或具有权限的东西

```
http://ploneapp.com/acl_users/credentials_cookie_auth/require_login?came_from=http%3A/ploneapp.com/structure/test/issue_form 
```

当我使用 urllib.urlencode 时似乎会发生错误。

当我尝试对“请求”库使用另一种方式时，情况也是如此。也许我无法在这样的地方访问这样的图书馆。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:44:16.670

这是不可能通过自定义脚本适配器实现的，除非您绕过一些安全措施——这是不可取的。问题是 urllib 和 urllib2 库在受限 Python 中没有被标记为“安全”。“受限 Python”是可用于 TTW 脚本的 Python 子集。

如果你需要做这样的事情，你需要添加一个文件系统产品，可能是一个浏览器视图。您将在 Plone.Org 的产品部分中找到使用 PFG 输入执行此操作的包示例。大多数人关注外部支付或会员系统。你会发现他们处理了很多棘手的问题，比如线程和超时，以确保 Plone 不会因为等待帖子处理而陷入困境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T18:34:25.307

实际上，如果您将浏览器重定向到新站点，浏览器会自动将表单及其所有数据重新发布到该系统。确实，它不是在幕后发送这些数据，对用户隐藏，但是现在传递数据的站点现在可以开始显示其他选项/处理它。这很好，例如，如果有需要向其发布字段的在线付费类型的服务。比如信用卡处理。

然而，对于“隐藏”系统来说，没有那么好。这仍然有一些用途。

以下应该工作。我使用不同的版本，它获取文件夹中的图像列表并随机选择一个显示在网站上。

* * *

```
# REDIRECTING to a specific URL
# NOTE: Form Submissions will cause the browser to resend the data to the new site.
# get the HTML request and response objects.
# redirect the page to the other site and end function at the same time
return context.REQUEST.RESPONSE.redirect("http://app.com/issues_form/issues") 
```

* * *

# javascript - Google Maps infoWindow 显示来自 mysql 的最后数据

> ID：12921712
> 
> 赞同：2
> 
> 时间：2012-10-16T19:04:19.823
> 
> 标签：javascript, google-maps

我知道这个问题有很多答案。我已经测试了所有，但它们不适用于我的代码。当我在脚本中使用代码时，它停止工作。

```
function createMarker(latlng) {
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon:'images/intake.png',   
        html:(contentString,contentString1,contentStringPhoto)
    });

    infoBubble = new InfoBubble({
      maxWidth: 400
    });
    var div = document.createElement('DIV');
    div.innerHTML = 'NN-Gis';

    infoBubble.addTab('Information', contentString);
    infoBubble.addTab('Information', contentString1);
    infoBubble.addTab('Photo', contentStringPhoto);

    google.maps.event.addListener(marker, 'click', function() {
      if (!infoBubble.isOpen()) {

          infoBubble.setContent(contentString,contentString1,contentStringPhoto);

          infoBubble.open(map,marker);
      }
    });

  }
  google.maps.event.addDomListener(window, 'load', init);

  function updateStyles() {
    var shadowStyle = document.getElementById('shadowstyle').value;
    infoBubble.setShadowStyle(shadowStyle);

    var padding = document.getElementById('padding').value;
    infoBubble.setPadding(padding);

    var borderRadius = document.getElementById('borderRadius').value;
    infoBubble.setBorderRadius(borderRadius);

    var borderWidth = document.getElementById('borderWidth').value;
    infoBubble.setBorderWidth(borderWidth);

    var borderColor = document.getElementById('borderColor').value;
    infoBubble.setBorderColor(borderColor);

    var backgroundColor = document.getElementById('backgroundColor').value;
    infoBubble.setBackgroundColor(backgroundColor);

    var maxWidth = document.getElementById('maxWidth').value;
    infoBubble.setMaxWidth(maxWidth);

    var maxHeight = document.getElementById('maxHeight').value;
    infoBubble.setMaxHeight(maxHeight);

    var minWidth = document.getElementById('minWidth').value;
    infoBubble.setMinWidth(minWidth);

    var minHeight = document.getElementById('minHeight').value;
    infoBubble.setMinHeight(minHeight);

    var arrowSize = document.getElementById('arrowSize').value;
    infoBubble.setArrowSize(arrowSize);

    var arrowPosition = document.getElementById('arrowPosition').value;
    infoBubble.setArrowPosition(arrowPosition);

    var arrowStyle = document.getElementById('arrowStyle').value;
    infoBubble.setArrowStyle(arrowStyle);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:47:06.203

我相信您会收到此错误，因为变量`contentString`,等在被调用`contentString1`时超出范围或未定义。`createMarker`

确保在调用函数之前定义了这些`createMarker`，例如

```
var contentString="abc";
var contentString1="abcdef";
var contentStringPhoto="abcfegggg"; 
```

或者，将这些变量作为参数添加到您的函数中。定义：

`function createMarker(latlng,contentString,contentString1,contentStringPhoto) {`

# javascript - 对 Javascript 代码进行去混淆处理以使其再次可读

> ID：12921713
> 
> 赞同：28
> 
> 时间：2012-10-16T19:04:20.610
> 
> 标签：javascript, deobfuscation

我讨厌把这个带到这里，在学习混淆 JS 代码时，我对代码进行了编码，然后在没有任何备份的情况下重写了原始代码：) 以下是我的混淆代码。

```
var _0xf17f=["\x28","\x29","\x64\x69\x76","\x63\x72\x65\x61\x74\x65\x45\x6C\x65\x6D\x65\x6E\x74","\x69\x64","\x53\x74\x75\x64\x65\x6E\x74\x5F\x6E\x61\x6D\x65","\x73\x74\x75\x64\x65\x6E\x74\x5F\x64\x6F\x62","\x3C\x62\x3E\x49\x44\x3A\x3C\x2F\x62\x3E","\x3C\x61\x20\x68\x72\x65\x66\x3D\x22\x2F\x6C\x65\x61\x72\x6E\x69\x6E\x67\x79\x69\x69\x2F\x69\x6E\x64\x65\x78\x2E\x70\x68\x70\x3F\x72\x3D\x73\x74\x75\x64\x65\x6E\x74\x2F\x76\x69\x65\x77\x26\x61\x6D\x70\x3B\x20\x69\x64\x3D","\x22\x3E","\x3C\x2F\x61\x3E","\x3C\x62\x72\x2F\x3E","\x3C\x62\x3E\x53\x74\x75\x64\x65\x6E\x74\x20\x4E\x61\x6D\x65\x3A\x3C\x2F\x62\x3E","\x3C\x62\x3E\x53\x74\x75\x64\x65\x6E\x74\x20\x44\x4F\x42\x3A\x3C\x2F\x62\x3E","\x69\x6E\x6E\x65\x72\x48\x54\x4D\x4C","\x63\x6C\x61\x73\x73","\x76\x69\x65\x77","\x73\x65\x74\x41\x74\x74\x72\x69\x62\x75\x74\x65","\x70\x72\x65\x70\x65\x6E\x64","\x2E\x69\x74\x65\x6D\x73","\x66\x69\x6E\x64","\x23\x53\x74\x75\x64\x65\x6E\x74\x47\x72\x69\x64\x56\x69\x65\x77\x49\x64"];function call_func(_0x41dcx2){var _0x41dcx3=eval(_0xf17f[0]+_0x41dcx2+_0xf17f[1]);var _0x41dcx4=document[_0xf17f[3]](_0xf17f[2]);var _0x41dcx5=_0x41dcx3[_0xf17f[4]];var _0x41dcx6=_0x41dcx3[_0xf17f[5]];var _0x41dcx7=_0x41dcx3[_0xf17f[6]];var _0x41dcx8=_0xf17f[7];_0x41dcx8+=_0xf17f[8]+_0x41dcx5+_0xf17f[9]+_0x41dcx5+_0xf17f[10];_0x41dcx8+=_0xf17f[11];_0x41dcx8+=_0xf17f[12];_0x41dcx8+=_0x41dcx6;_0x41dcx8+=_0xf17f[11];_0x41dcx8+=_0xf17f[13];_0x41dcx8+=_0x41dcx7;_0x41dcx8+=_0xf17f[11];_0x41dcx4[_0xf17f[14]]=_0x41dcx8;_0x41dcx4[_0xf17f[17]](_0xf17f[15],_0xf17f[16]);$(_0xf17f[21])[_0xf17f[20]](_0xf17f[19])[_0xf17f[18]](_0x41dcx4);} ; 
```

谁能指导我 URL 或任何使其可读的方法。我是从[这个](http://www.jsobfuscate.com/)网站上做的，他们似乎在他们的网站上提供了单向混淆服务......这是我在学习期间的测试代码，所以如果有人能帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-06-04T12:09:35.447

Here's a new automated tool, JSNice, to try to deobfuscate/deminify it. The tool even tries to guess the variable names, which is unbelievably cool. (It mines Javascript on github for this purpose.)

[http://www.jsnice.org](http://www.jsnice.org)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-16T19:07:40.397

试试这个：http: [//jsbeautifier.org/](http://jsbeautifier.org/)

我用你的代码进行了测试，并尽可能好地工作。=D

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-16T19:27:51.547

这里是：

```
function call_func(input) {
    var evaled = eval('(' + input + ')');
    var newDiv = document.createElement('div');
    var id = evaled.id;
    var name = evaled.Student_name;
    var dob = evaled.student_dob;
    var html = '<b>ID:</b>';
    html += '<a href="/learningyii/index.php?r=student/view&amp; id=' + id + '">' + id + '</a>';
    html += '<br/>';
    html += '<b>Student Name:</b>';
    html += name;
    html += '<br/>';
    html += '<b>Student DOB:</b>';
    html += dob;
    html += '<br/>';
    newDiv.innerHTML = html;
    newDiv.setAttribute('class', 'view');
    $('#StudentGridViewId').find('.items').prepend(newDiv);
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T19:09:23.860

从谷歌的第一个链接；

```
function call_func(_0x41dcx2) {
 var _0x41dcx3 = eval('(' + _0x41dcx2 + ')');
 var _0x41dcx4 = document['createElement']('div');
 var _0x41dcx5 = _0x41dcx3['id'];
 var _0x41dcx6 = _0x41dcx3['Student_name'];
 var _0x41dcx7 = _0x41dcx3['student_dob'];
 var _0x41dcx8 = '<b>ID:</b>';
 _0x41dcx8 += '<a href="/learningyii/index.php?r=student/view&amp; id=' + _0x41dcx5 + '">' + _0x41dcx5 + '</a>';
 _0x41dcx8 += '<br/>';
 _0x41dcx8 += '<b>Student Name:</b>';
 _0x41dcx8 += _0x41dcx6;
 _0x41dcx8 += '<br/>';
 _0x41dcx8 += '<b>Student DOB:</b>';
 _0x41dcx8 += _0x41dcx7;
 _0x41dcx8 += '<br/>';
 _0x41dcx4['innerHTML'] = _0x41dcx8;
 _0x41dcx4['setAttribute']('class', 'view');
 $('#StudentGridViewId')['find']('.items')['prepend'](_0x41dcx4);
}; 
```

它不会让你一路回到源头，这实际上是不可能的，但它会让你摆脱困境。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-01-05T02:27:15.720

两种在线jsbeautifier(jsbeautifier, jsnice)我都试过了，这些工具给了我漂亮的js代码，

但无法复制非常大的js（一定是bug，当我复制时，复制的缓冲区只包含一个字符'-'）。

我发现唯一可行的解​​决方案是 prettyjs：

[http://www.thaoh.net/prettyjs/](http://www.thaoh.net/prettyjs/)

# ruby-on-rails - strftime 无法识别 ruby on rails 中的美国格式

> ID：12921715
> 
> 赞同：0
> 
> 时间：2012-10-16T19:04:28.710
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, datetime-format, strftime

我从视图中有一个以“MM-DD-YYY”格式出现的日期，我想以日期时间格式保存它。我正在尝试使用转换为日期时间格式，`strftime`但它正在识别“DD-MM-YYYY”格式的日期，因此每当我的日期超过 12 时，我的代码就会中断。请帮忙。

调试后我发现另一个问题，当日期超过12时，日期不来，这意味着如果日期不是“DD-MM-YYYY”格式，它不会显示在控制器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:22:23.660

[您可以使用DateTime.strptime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-strptime)解析具有指定格式的字符串：

```
str = '12-31-1999' # intended to mean "December 31st, 1999"
parsed = DateTime.strptime(str, '%m-%d-%Y')
parsed.month
# => 12 
```

# c++ - 向量中的自动迭代器

> ID：12921717
> 
> 赞同：0
> 
> 时间：2012-10-16T19:04:31.133
> 
> 标签：c++

为什么 auto 关键字不起作用...????

```
s.push_back(11);
s.push_back(22);
s.push_back(33);
s.push_back(55);

for (auto it = s.begin(); it != s.end(); it++){
    cout << (*it) << endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:06:59.420

它应该工作。为此，您需要 C++11 支持。在 GCC 上，您需要 4.4 或更高版本，并确保使用`std=c++0x`标志（或可能`std=c++11`用于最新版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:07:25.677

看看你的编译器是否支持 auto 关键字，因为它是在 C++11 标准中正式引入的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:08:23.173

您需要 Visual Studio 2010（或更高版本）或 GCC 标志`-std=c++11`来编译它。您还可以在 VC++11 或 GCC 4.6 及更高版本中将其重写为 for-range 循环。

```
for(auto& it : s) {
    std::cout << it << '\n';
} 
```

# c - 2字节短成C中的2字节字符串？

> ID：12921727
> 
> 赞同：2
> 
> 时间：2012-10-16T19:05:08.217
> 
> 标签：c, string, byte, short, htonl

在该短片上使用 htons 后，任何将 2 字节短片（普通短片）转换为 2 字节字符串（char*）的方法。问题是 htons 方法返回一个 int（4 个字节），我如何将它放入一个 2 个字节的字符串？

注意：我需要能够对结果使用 ntohs 来获得原始值。

感谢您的建议：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:11:00.473

ahm，怎么说htons返回一个4字节的整数，在我的linux上，htons的原型是

```
uint16_t htons(uint16_t hostshort); 
```

这样你就可以做到

```
uint16_t value;
value = htons(hostshort);
char *bytes = &value;
// now the first 2 bytes pointed to by "bytes" are the value in network byte order 
```

这意味着返回值只有 2 个字节。

然后我认为在 htons 之后，返回值的这种位表示是这样的，即值的第一个字节 (((unsigned char *)value)[0]) 是最重要的，第二个是最不重要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:07:32.677

```
short i;
// ...
char s [3];
s [0] = (i >> 8) & 0xFF;
s [1] = i & 0xFF;
s [2] = '\0'; 
```

# r - 从数据框的因子中删除引号

> ID：12921730
> 
> 赞同：3
> 
> 时间：2012-10-16T19:05:13.267
> 
> 标签：r, plyr

我有一个我正在`discretized`使用的数据框`RWeka`。RWeka 的离散化创建了带有单引号的 bin。尽管它们没有引起任何问题，但在绘制带有`'All'`类别的变量时看起来很难看。

这是离散化的数据框：

```
structure(list(outlook = structure(c(1L, 1L, 2L, 3L, 3L, 3L, 
2L, 1L, 1L, 3L, 1L, 2L, 2L, 3L), .Label = c("sunny", "overcast", 
"rainy"), class = "factor"), temperature = structure(c(1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "'All'", class = "factor"), 
humidity = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L), .Label = "'All'", class = "factor"), 
windy = c(FALSE, TRUE, FALSE, FALSE, FALSE, TRUE, TRUE, FALSE, 
FALSE, FALSE, TRUE, TRUE, FALSE, TRUE), play = structure(c(2L, 
2L, 1L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 2L), .Label = c("yes", 
"no"), class = "factor")), .Names = c("outlook", "temperature", 
"humidity", "windy", "play"), row.names = c(NA, -14L), class = "data.frame") 
```

如何从数据中删除单引号并重新创建因子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:10:50.863

这应该这样做：

```
df$temperature <- gsub("\\'", "", df$temperature)
df$humidity <- gsub("\\'", "", df$humidity)
> df
    outlook temperature humidity windy play
1     sunny         All      All FALSE   no
2     sunny         All      All  TRUE   no
3  overcast         All      All FALSE  yes
4     rainy         All      All FALSE  yes
5     rainy         All      All FALSE  yes
6     rainy         All      All  TRUE   no
7  overcast         All      All  TRUE  yes
8     sunny         All      All FALSE   no
9     sunny         All      All FALSE  yes
10    rainy         All      All FALSE  yes
11    sunny         All      All  TRUE  yes
12 overcast         All      All  TRUE  yes
13 overcast         All      All FALSE  yes
14    rainy         All      All  TRUE   no 
```

如果您需要在多个列上执行相同的操作，这可能会更有效。

```
df[, 2:3] <- apply(df[, 2:3], 2, function(x) { 
    gsub("\\'", "", x)
    }) 
```

# php - 参数化查询不起作用PHP

> ID：12921737
> 
> 赞同：1
> 
> 时间：2012-10-16T19:05:36.093
> 
> 标签：php, sql, parameters

我有一个非常复杂的 if/else 语句系统，它最终会生成一个 SQL。但是，最后，我收到“错误的参数计数”消息，我不知道出了什么问题？希望大家能帮忙！我的代码：

```
$sql = "SELECT * FROM profiles";

if($bedrijfvariabele != " zoek op bedrijfsnaam.." && $bedrijfvariabele != "") {

$params = array($bedrijfvariabele);
$sql .= " WHERE bedrijfsnaam = ?";

}

if($rubriekvariabele != " zoek op rubriek.." && $rubriekvariabele != "" && $bedrijfvariabele != " zoek op bedrijfsnaam.." && $bedrijfvariabele != "") {

array_push($params, $rubriekvariabele);  
$sql .= " AND (hoofdrubriek = ? OR subrubrieken LIKE '%' + ? + '%')";

}

if($rubriekvariabele != " zoek op rubriek.." && $rubriekvariabele != "" && ($bedrijfvariabele == " zoek op bedrijfsnaam.." || $bedrijfvariabele == "")) {

$params = array($rubriekvariabele);
$sql .= " WHERE (hoofdrubriek = ? OR subrubrieken LIKE '%' + ? + '%')";

}

if($plaatsvariabele != " zoek op plaatsnaam.." && $plaatsvariabele != "" && (($bedrijfvariabele != " zoek op bedrijfsnaam.." && $bedrijfvariabele != "") || ($rubriekvariabele != " zoek op rubriek.." && 

$rubriekvariabele != ""))) {

array_push($params, $plaatsvariabele);  
$sql .= " AND plaats = ?";

}

if($plaatsvariabele != " zoek op plaatsnaam.."  && $plaatsvariabele != "" && (($bedrijfvariabele == " zoek op bedrijfsnaam.." || $bedrijfvariabele == "")  && ($rubriekvariabele == " zoek op rubriek.." || 

$rubriekvariabele == ""))) {

$params = array($plaatsvariabele);
$sql .= " WHERE plaats = ?";

}

$sql .= " ORDER BY
(
(case when ID is not null then 1 else 0 end) +
(case when username is not null then 1 else 0 end) +
(case when password is not null then 1 else 0 end) +
(case when voornaam is not null then 1 else 0 end) +
(case when achternaam is not null then 1 else 0 end) +
(case when telefoonnummerP is not null then 1 else 0 end) +
(case when emailP is not null then 1 else 0 end) +
(case when functie is not null then 1 else 0 end) +
(case when bedrijfsnaam is not null then 1 else 0 end) +
(case when bedrijfsslogan is not null then 1 else 0 end) +
(case when bedrijfslogo is not null then 1 else 0 end) +
(case when bedrijfsfoto is not null then 1 else 0 end) +
(case when bedrijfsfoto2 is not null then 1 else 0 end) +
(case when bedrijfsfoto3 is not null then 1 else 0 end) +
(case when bedrijfsfoto4 is not null then 1 else 0 end) +
(case when bedrijfsomschrijving is not null then 1 else 0 end) +
(case when bedrijfsspecialiteiten is not null then 1 else 0 end) +
(case when bedrijfsgeschiedenis is not null then 1 else 0 end) +
(case when openingstijden is not null then 1 else 0 end) +
(case when kvk is not null then 1 else 0 end) + 
(case when straatnaam is not null then 1 else 0 end) + 
(case when huisnummer is not null then 1 else 0 end) + 
(case when postcode is not null then 1 else 0 end) + 
(case when plaats is not null then 1 else 0 end) + 
(case when nevenvestigingen is not null then 1 else 0 end) + 
(case when telefoonnummer is not null then 1 else 0 end) + 
(case when fax is not null then 1 else 0 end) + 
(case when email is not null then 1 else 0 end) + 
(case when website is not null then 1 else 0 end) + 
(case when twitter is not null then 1 else 0 end) + 
(case when facebook is not null then 1 else 0 end) + 
(case when youtube is not null then 1 else 0 end) + 
(case when linkedin is not null then 1 else 0 end) + 
(case when hoofdrubriek is not null then 1 else 0 end) + 
(case when subrubrieken is not null then 1 else 0 end) + 
(case when merken is not null then 1 else 0 end) +
(case when diensten is not null then 1 else 0 end) +
(case when productsoorten is not null then 1 else 0 end) +
(case when brancheverenigingen is not null then 1 else 0 end)
) DESC, bedrijfsnaam LIMIT $start_from, 10";  

echo $sql;
print_r($params);

$rs_result = mysql_query($conn, $sql, $params); 
```

如果我填写一个字段，SQL 的 ECHO 会给出：

```
SELECT * FROM profiles WHERE plaats = ? ORDER BY ( (case when ID is not null then 1 else 0 end) + (case when username is not null then 1 else 0 end) + (case when password is not null then 1 else 0 end) + (case when voornaam is not null then 1 else 0 end) + (case when achternaam is not null then 1 else 0 end) + (case when telefoonnummerP is not null then 1 else 0 end) + (case when emailP is not null then 1 else 0 end) + (case when functie is not null then 1 else 0 end) + (case when bedrijfsnaam is not null then 1 else 0 end) + (case when bedrijfsslogan is not null then 1 else 0 end) + (case when bedrijfslogo is not null then 1 else 0 end) + (case when bedrijfsfoto is not null then 1 else 0 end) + (case when bedrijfsfoto2 is not null then 1 else 0 end) + (case when bedrijfsfoto3 is not null then 1 else 0 end) + (case when bedrijfsfoto4 is not null then 1 else 0 end) + (case when bedrijfsomschrijving is not null then 1 else 0 end) + (case when bedrijfsspecialiteiten is not null then 1 else 0 end) + (case when bedrijfsgeschiedenis is not null then 1 else 0 end) + (case when openingstijden is not null then 1 else 0 end) + (case when kvk is not null then 1 else 0 end) + (case when straatnaam is not null then 1 else 0 end) + (case when huisnummer is not null then 1 else 0 end) + (case when postcode is not null then 1 else 0 end) + (case when plaats is not null then 1 else 0 end) + (case when nevenvestigingen is not null then 1 else 0 end) + (case when telefoonnummer is not null then 1 else 0 end) + (case when fax is not null then 1 else 0 end) + (case when email is not null then 1 else 0 end) + (case when website is not null then 1 else 0 end) + (case when twitter is not null then 1 else 0 end) + (case when facebook is not null then 1 else 0 end) + (case when youtube is not null then 1 else 0 end) + (case when linkedin is not null then 1 else 0 end) + (case when hoofdrubriek is not null then 1 else 0 end) + (case when subrubrieken is not null then 1 else 0 end) + (case when merken is not null then 1 else 0 end) + (case when diensten is not null then 1 else 0 end) + (case when productsoorten is not null then 1 else 0 end) + (case when brancheverenigingen is not null then 1 else 0 end) ) DESC, bedrijfsnaam LIMIT 0, 10 
```

打印 $params 给出了这个：

```
Array ( [0] => \'s-Gravenmoer ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:09:24.000

在几个地方：

```
array_push($params, $rubriekvariabele);  
$sql .= " AND (hoofdrubriek = ? OR subrubrieken LIKE '%' + ? + '%')";

} 
```

您在查询中有两个参数，但只将一个值推送到 params 数组中。您必须对每个参数进行一次推送。

# objective-c - CocoaLumberjack FileLogger 记录到多个文件

> ID：12921740
> 
> 赞同：8
> 
> 时间：2012-10-16T19:05:44.113
> 
> 标签：objective-c, logging, cocoalumberjack

我正在使用这个 CocoaLumberjack 框架来记录我在 Objective-C 设计中的所有消息。现在我想将所有错误记录到一个文件中，将所有其他消息记录到另一个文件中。我知道我可以使用格式化程序来过滤这些信息。我在 AppDelegate 中创建了两个 DDFileLogger 实例，但这两个记录器一直写入同一个文件。我想知道是否有一种方法可以指定日志记录目标，以便两个记录器写入两个不同的文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T10:43:27.963

实现这项工作的关键是为每个 DDFileLogger 设置其自己的 DDLogFileManager，并为每个 DDLogFileManager 设置单独的日志目录路径。DDLogFileManager 使用日志目录路径来确定要记录到哪个文件，因此如果您有两个指向同一个目录，它们将记录到同一个日志文件。所以关键是为每个日志使用单独的目录。

对于两种不同的日志类型：“一”和“二”：

```
// Set the base log directory
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *baseDir = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString *logsDirectory = [baseDir stringByAppendingPathComponent:@"Logs"];

// set up file logger One to log to subdirectory "One"
DDLogFileManagerDefault *fileManagerOne = [[DDLogFileManagerDefault alloc] initWithLogsDirectory:[logsDirectory stringByAppendingPathComponent:@"One"]];
DDFileLogger *loggerOne = [[DDFileLogger alloc] fileManagerOne];

// Use the filter formatter to make sure only "One" logs go to the "One" log files
ContextWhitelistFilterLogFormatter *formatterOne = [[ContextWhitelistFilterLogFormatter alloc] init];
[formatterOne addToWhitelist:LOG_CONTEXT_ONE];
[loggerOne formatterOne];

[DDLog loggerOne];

    // set up file logger Two to log to subdirectory "Two"
DDLogFileManagerDefault *fileManagerTwo = [[DDLogFileManagerDefault alloc] initWithLogsDirectory:[logsDirectory stringByAppendingPathComponent:@"Two"]];
DDFileLogger *loggerTwo = [[DDFileLogger alloc] fileManagerTwo];

// Use the filter formatter to make sure only "Two" logs go to the "Two" log files
ContextWhitelistFilterLogFormatter *formatterTwo = [[ContextWhitelistFilterLogFormatter alloc] init];
[formatterTwo addToWhitelist:LOG_CONTEXT_TWO];
[loggerTwo formatterTwo];

[DDLog loggerTwo]; 
```

那么当然你仍然需要定义宏来做你的日志记录：

```
#define LOG_CONTEXT_ONE    1
#define LOG_CONTEXT_TWO    2

#define LogOne(frmt, ...) SYNC_LOG_OBJC_MACRO(0, 0, LOG_CONTEXT_ONE, frmt, ##__VA_ARGS__)
#define LogTwo(frmt, ...) SYNC_LOG_OBJC_MACRO(0, 0, LOG_CONTEXT_TWO, frmt, ##__VA_ARGS__) 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T10:26:29.790

您可以通过使用新功能（每个记录器的不同日志级别）来实现非常接近的目标。请参阅[https://github.com/robbiehanson/CocoaLumberjack/wiki/PerLoggerLogLevels](https://github.com/robbiehanson/CocoaLumberjack/wiki/PerLoggerLogLevels)。创建 2 个文件记录器（一个具有错误级别，另一个具有详细级别）与您描述的不完全一样，因为错误日志将进入这两个文件。这够好吗？

# bash - 递归打印目录中的所有文档

> ID：12921741
> 
> 赞同：-4
> 
> 时间：2012-10-16T19:05:49.060
> 
> 标签：bash, netbeans

我想使用 bash 脚本从目录中打印所有源代码，但我找不到好的命令来执行此操作。我在网上进行了深入搜索，但没有找到任何有用的东西。

这个 bash 脚本每天都会使用 cron 执行。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:14:31.753

像这样的东西应该工作：

```
find . -type f -exec lpr {} \; 
```

这假定您要打印当前目录`.`或其任何子目录中的所有文件。如果您需要将该命令限制为某些类型的文件，请使用`-name`或`-iname`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:30:55.317

我建议你看看[`dirent.h`](http://pubs.opengroup.org/onlinepubs/007908799/xsh/dirent.h.html)。通过使用中定义的功能，`dirent.h`您应该能够实现您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:12:48.047

您可以编写一个简单的脚本，从文本文件中获取名称并以特定间隔打印它们。您可以查询打印文件夹的内容以获取文档名称，将它们放入文本文件中，然后循环浏览文本文件，并在中间等待，直到打印完所有文档。

伪代码看起来像这样。

```
Populate Text File Function ()  
{  
  Set Folder Path  
  Get Document Names in folder  
  Write Document Names to Text File  
}  
Print Function  
{  
  While Not End of File{  
  Get Document Name  
  Print Document Name  
  Move down 1 line  
      Wait a timed interval  
 }  
} 
```

# ruby - Ruby-基于索引中的字符串对数组进行排序

> ID：12921742
> 
> 赞同：2
> 
> 时间：2012-10-16T19:05:50.017
> 
> 标签：ruby, arrays, string, sorting, indexing

我现在一直盯着排序论坛，我正式接受我不明白发生了什么。

我有一个名为“people”的数组，有多个索引，每个数组索引看起来像这样

```
("Steven", "32", "Detroit", "single")

("Fred", "19", "Boston", "married")

("Jason", "25", "san_fransisco" "single") 
```

我想按城市对这些索引进行排序（索引的第三个条目）

我看过这么多不同的网站，我根本没有关注这个。有人可以帮助我回答并简要解释发生了什么吗？这甚至可以使用数组吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T19:10:09.803

```
people = [
  ["Steven", "32", "Detroit", "single"],
  ["Fred", "19", "Boston", "married"],
  ["Jason", "25", "san_fransisco", "single"],
]

people.sort_by{|p| p[2]} 
```

# mysql - 在响应/更新中查找日期之间最长和最快的差异

> ID：12921745
> 
> 赞同：3
> 
> 时间：2012-10-16T19:06:06.863
> 
> 标签：mysql, sql, datetime, datediff

我在找到最长的响应时间和最短的响应时间时遇到了问题。

三张表：

```
T1.RESPONCE
resp_id (bigint)
resp_text (text)
resp_created_date (datetime)
resp_closed_date (datetime)

T2.RESP_UPDATE_RELATION
resp_id (bigint)
update_id (bigint)

T3.UPDATES
update_id (bigint)
update_text (text)
update_created_date (datetime)
update_closed_date (datetime) 
```

T2.RESP_UPDATE_RELATION 是为每个响应的多个更新创建的

我想为每个响应找到最长和最快的更新时间。

有什么聪明的mysql吗？或者我需要为此包含 PHP 代码吗？

- - - - - - - - - - - - - - - - - - 编辑 - - - - - - - ------------------

刚刚醒来..和thoughth。我已经尝试了一个星期了，看来我做得对。结果让我很困惑。所以也许我没有做错 - 而是问了错误的问题。

所以，上面的要求有点错误！

我真正的要求是：

```
I would like the result from the last 30 days of
the fastest opening update (update_created_date)
the slowest opening update (update_created_date)
the fastest closing update (update_closed_date)
the slowest closing update (update_closed_date) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:11:38.570

加入所有三个表的外键并按 resp_id 分组。您现在可以使用/上`MIN`的`MAX`聚合函数选择第一个和最后一个更新。如果您希望查询产生时间差，您可以使用顶部的or函数。`update_created_date``update_closed_date``TIMEDIFF``TIMESTAMPDIFF`

# c++ - 加入两个 time_t 值的日期和时间

> ID：12921746
> 
> 赞同：2
> 
> 时间：2012-10-16T19:06:10.227
> 
> 标签：c++, datetime, time

我编写了一个函数，我相信它将加入一个 time_t 的日期组件和另一个 time_t 的时间组件：

```
time_t joinDateTime( time_t date, time_t time )
{
    tm tm_date( *gmtime( &date ) ), tm_time( *gmtime( &time ) );

    tm_date.tm_hour = tm_time.tm_hour;
    tm_date.tm_min = tm_time.tm_min;
    tm_date.tm_sec = tm_time.tm_sec;

    return mktime( &tm_date );
} 
```

此函数不应执行任何时区转换，但`mktime()`显然假定您提供的时间结构在您的本地时区，并将其转换为 UTC 0。如何修改此函数以不应用`mktime()`提供的时区转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:37:51.457

A`time_t`始终采用 UTC 时间。如果这是您想要的，还有一种更直接的方式来加入日期和时间。由于测量以秒为单位，因此您可以除以天数，然后将余数作为时间。

```
time_t joinDateTime( time_t date, time_t time )
{
    time_t days = date / (24*60*60);
    time_t seconds = time % (24*60*60);

    return days*24*60*60 + seconds;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:27:14.383

时间

```
struct tm * gmtime ( const time_t * timer ); 
```

将 time_t 转换为 tm 作为 UTC 时间

使用 gmtime 时会发生转换

`struct tm * localtime ( const time_t * timer );`改为使用

# vim - Ctags - 仅显示相关或上下文标签

> ID：12921750
> 
> 赞同：3
> 
> 时间：2012-10-16T19:06:26.390
> 
> 标签：vim, ctags

我有一个使用 Vim 的 Ctags 设置。
我目前的设置如下：

```
set tags=./tags;/
set tags+=~/.ctags/*/tags 
```

它基本上在当前目录中查找一个`tags`文件，直到`/`，并且还查找`tags`内部`~/.ctags`目录，我在其中`tags`对不同目录中的不同项目进行了排序。

现在，一切正常，除了以下情况： - 我有两个标记文件定义为：`~/.ctags/ruby/tags`和`~/.ctags/php/tags` - 我在一个 PHP 项目中工作并将`CTRL+]`我带到一个 Ruby 项目的标记（由于上面定义的第二条规则） - 当我期望它在内部搜索相关标签`~/.ctags/php/tags`- 它反而在内部找到匹配`~/.ctags/ruby/tags`- 因此，行为。

那么，我是否可以要求 Vim 只`~/.ctags/php/tags`在我使用 PHP 时查看内部​​，仅`~/.ctags/ruby/tags`在我使用 ruby​​ 时查看，让我说`~/.ctags/xxxx/tags`当我使用`xxxx`

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T20:08:11.137

我在我的`.vimrc`文件中完成它的方式是设置一个局部`tags`变量：

```
augroup TagFileType
    autocmd!
    autocmd FileType * setl tags<
    autocmd FileType * exe 'setl tags+=~/.ctags/' . &filetype . '/tags'
augroup END 
```

这是做什么的：每当您打开一个文件时，它会将全局`tags`变量的当前内容复制到局部`tags`变量，并添加`~/.ctags/[filetype]/tags`到它。这意味着只会在 php 缓冲区`~/.ctags/php/tags`中搜索，而在 ruby​​ 缓冲区`~/.ctags/ruby/tags`中。如果您有任何要在所有缓冲区中搜索的标签，您可以将全局`tags`变量设置为指向这些标签，它们将被加载到所有缓冲区中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:08:38.100

Daan 的解决方案看起来不错。

您可能想看看自动生成标签的[easytags](https://github.com/xolox/vim-easytags)插件。它可以选择基于文件类型。

# apache - Apache 代理服务器收到 POST 请求但转换为 GET？

> ID：12921753
> 
> 赞同：0
> 
> 时间：2012-10-16T19:06:31.037
> 
> 标签：apache, post, https, get, reverse-proxy

我正在将 Apache 设置为前端服务器并向服务器发出命令行请求。Apache 以 POST 形式接收请求（从日志中确认），但代理服务器将其转换为 GET 请求。知道为什么会这样吗？我已经使用 Apache 设置了一个简单的反向代理。是否需要进行任何特殊的 URL 重写？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:55:47.573

你能分享一下代码片段吗？如果你已经有了解决方案，请也分享一下……

*不确定评论是否应该放在这里，但我可以选择将其放在其他地方..*

# search - Solr 每个字段的多个方面

> ID：12921755
> 
> 赞同：4
> 
> 时间：2012-10-16T19:06:36.597
> 
> 标签：search, solr, faceted-search

默认情况下，Solr 返回一个字段的构面，然后如果您为该字段选择一个构面值，则所有其他先前的选择不再作为该字段的构面的一部分返回。

我正在尝试开发一个更像亚马逊搜索引擎的搜索引擎（它基于他们自己的 A9 搜索引擎，因此可能类似于 Amazon CloudSearch）。

当您缩小到亚马逊搜索中的某些“方面”时，它们会继续显示其他选项，以及如果您将该区域添加到搜索中的计数。

Solr 中有内置的方法吗？如果没有，我将如何自己滚动。显然，我需要缓存为该字段返回的原始方面。但是，一旦我已经为该字段选择了一个（或多个）刻面，那么计算其他刻面区域的计数的最有效方法是什么。Obviously when additional facets are selected, you're doing an "OR" query between those values, as you're trying to show things with either of the two values.

例如，我在亚马逊的珠宝部门搜索了钻石戒指，然后缩小到黄金作为金属类型。然后我可以选择多个克拉刻面：

![亚马逊分面示例](../Images/ff22032164f9762cd3dc717239343fae.png)

有人可以提供一个关于我如何（有效地）使用 Solr 做到这一点的例子吗？

未来版本的 Solr 是否有任何功能可以提供开箱即用的功能（假设它还没有在盒子里）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:27:45.273

`Tagging and excluding Filters`Solr 中的功能可能是您正在寻找的功能，这里是解释[Multi Select Faceting](http://wiki.apache.org/solr/SimpleFacetParameters#Multi-Select_Faceting_and_LocalParams)的 Wiki 链接。

**例如：** : ../solr/select/?q=*&rows=0&facet=on&fq={!tag=krt}KARAT:10k_Gold&facet.field={!ex=krt}KARAT

我猜这个功能从 Solr 1.4 开始就存在了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-25T17:31:00.920

使用 Solr 的新 JSON Facet API 进行多选分面的工作方式略有不同。您仍然以相同的方式标记过滤器，但有不同的排除语法。

```
&q="running shorts"
&fq={!tag=COLOR}color:(Blue Black)
&json.facet={
      sizes:{type:terms, field:size},
      colors:{type:terms, field:color, domain:{excludeTags:COLOR} },
      brands:{type:terms, field:brand, domain:{excludeTags:BRAND} }
} 
```

注意为蓝色或黑色项目选择的过滤器上的 tag=COLOR。当我们考虑颜色时，我们希望忽略（或排除）带有该标签的过滤器，因此我们仍然可以恢复其他颜色计数。这就是 domain:{excludeTags:COLOR} 所做的。

这个例子取自[http://yonik.com/multi-select-faceting/](http://yonik.com/multi-select-faceting/)

# c - 指向结构或结构本身的指针？

> ID：12921758
> 
> 赞同：6
> 
> 时间：2012-10-16T19:06:40.100
> 
> 标签：c, performance, pointers, struct

考虑这段代码：

```
struct s { /* ... */ };

void f(struct s x) { /* ... */) /* (1) */
/* or */
void f(const struct s *x) { /* ... */ } /* (2) */ 
```

什么时候`struct s`有合适的尺寸，在哪种情况下我们应该更喜欢第一种形式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:08:34.717

你问哪个更好？

这取决于您要做什么 - 带有指针的第二种形式会更有效。但是，如果您只想传递一个值`f`而不必担心副作用，那么您可能会使用第一个签名——只要`struct`不是太大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T19:16:28.730

我建议阅读[这个](https://stackoverflow.com/questions/161788/are-there-any-downsides-to-passing-structs-by-value-in-c-rather-than-passing-a)。

正如您所说，当`struct s`大小合适时，您应该避免按值传递它，尤其是在递归函数中。

按值传递结构意味着它在函数调用之前被复制。这会导致执行速度变慢，内存利用率更高。另请注意，将`struct`在堆栈中分配，并且在某些系统中，堆栈大小非常有限。

我建议在每种情况下都使用指针，除非您需要由函数修改结构的多个副本，并且您不希望这些修改仅在每个函数的范围内可见。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-16T19:10:01.363

`f`当您想要获取 的副本`x`而不是指向 的`const`指针时，首选第一种形式`x`。

# android - 安卓：通知

> ID：12921763
> 
> 赞同：0
> 
> 时间：2012-10-16T19:07:12.520
> 
> 标签：android

在我的应用程序中，我需要在每天上午 9 点、下午 3 点、晚上 8 点显示通知。怎么做...我应该使用警报管理器吗？我应该创建 3 个警报管理器还是一个可以为我做这些事情？最简单的方法是什么？有教程吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:10:22.953

我会使用 AlarmManager 设置早上 9 点的闹钟。然后，当 BroadcastReceiver 处理警报时，我会让它为下午 3 点设置一个新警报。当该 BroadcastReceiver 被触发时，将其设置为晚上 8 点，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:26:55.207

使用一个警报管理器。

像这样的东西（只是粗略的代码）

```
int duration = 0; // seconds
int now = getTwentyFourHrTime();
if (now == 9) { duration = 6*60*60; }
if (now == 15) { duration = 5 * 60 * 60 ; }
if (now == 20) { duration = 13 * 60 * 60 ; }

AlarmManager alarmMgr = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(this, MyAlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0);
 Calendar time = Calendar.getInstance();
time.setTimeInMillis(System.currentTimeMillis());
time.add(Calendar.SECOND, duration);
alarmMgr.set(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(), pendingIntent); 
```

# android - getResourceName() 返回错误的名称

> ID：12921770
> 
> 赞同：1
> 
> 时间：2012-10-16T19:07:50.787
> 
> 标签：android, junit

我正在尝试为 Android 库运行 JUnit 测试。所以我在 Eclipse 中创建了一个新的 Android 应用程序项目，但没有任何活动。然后我更改了 AndroidManifest.xml 以便它使用“android.test.InstrumentationTestRunner”的检测，并且还添加了

```
<uses-library android:name="android.test.runner" /> 
```

接下来，我将我的 Android 库添加到项目属性中的库引用中。

我的问题是我想使用测试项目中的资源来驱动库上的测试。例如，我在测试项目的 res/raw 文件夹中添加了一个“hello_world”文本文件。

此资源现在显示在 R.raw.hello_world

问题是当我调用 context.getResources().getResourceName(R.raw.hello_world) 它返回错误的名称。这是我要测试的库中资源的名称。

运行测试时，我的测试项目中的资源似乎丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:11:22.723

问题是使用了错误的上下文。

我使用的是 AndroidTestCase 类和 getContext() 方法，但该上下文不包含与测试一起打包的资源。因此，将类更改为 InstrumentationTestCase 并使用 getInstrumentation().getContext() 解决了这个问题。

# google-apps-script - Google Drive 查找和替换 API

> ID：12921775
> 
> 赞同：0
> 
> 时间：2012-10-16T19:08:03.977
> 
> 标签：google-apps-script, google-drive-api, google-docs-api

我需要用谷歌文档/谷歌驱动器做一些非常简单的事情：我需要用另一个词大规模替换谷歌文档文档中的某些词。

目前我将文件下载为 html，在本地进行更改并再次上传更新的文件。对于一些相当简单的事情来说，这似乎是一个巨大的过程。

有没有办法可以通过 HTTP 请求执行此操作？API将来会支持吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:59:42.383

您可以使用 Apps 脚本中的文档服务轻松替换文档中的文本：

[https://developers.google.com/apps-script/class_document#replaceText](https://developers.google.com/apps-script/class_document#replaceText)

# c# - .NET 中的值类型实际上是如何工作的？

> ID：12921777
> 
> 赞同：7
> 
> 时间：2012-10-16T19:08:08.397
> 
> 标签：c#

我在理解 .NET 中的值类型表示时遇到了问题。每个 Value Type 都派生自 System.ValueType 类，那么这是否意味着 Value Type 是一个类？

例如，如果我写：

```
int x = 5; 
```

这意味着我创建了一个`System.Int32`类的实例并将其写入变量 x??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:32:46.487

System.ValueType 类实际上只是一个“元”类，其内部处理方式与普通类不同。结构和原始类型隐式继承 System.ValueType，但该类型在运行时实际上并不存在，它只是程序集标记应将类视为值类型结构并采用按值传递语义的一种方式。

与其他答案相反，值类型并不总是在堆栈上分配。当它们是类中的字段时，它们就像实例化该对象时的其他类数据一样位于堆上。当在迭代器或闭包中使用时，局部变量也可以提升到隐式类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:42:45.030

请参阅[Eric Lippert 的文章](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)。

简而言之，值类型是按值复制的。值类型就像引用类型一样是类，值类型的实例是对象。`5`是一个对象，是`System.Int32`（`int`简称）的一个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:38:57.507

现在，有很多话要说。说真的，网上关于这个话题的内容大约有数百页，其中大部分都以惊人的速度烧毁了我的大脑。

我真正记得的是，int 和 Int32 是同一个东西，两者都像一个结构，而不是一个类。“int”是 Int32 的快捷方式。（如果将鼠标放在一个 int 上，工具提示会显示为“struct System.Int32”。这意味着：

```
public class BoxedInt
{
    public int x;

    public BoxedInt(int i) { x = i; }
}

public Test()
{
    BoxedInt bi = new BoxedInt(10);
    Boxed(bi);
    Console.WriteLine(bi.x); // Returns 11, as any reference type would.

    int vi = 10;
    Valued(vi);
    Console.WriteLine(vi); // Returns 10, because it acts like a struct. (Which it is)
}

public void Boxed(BoxedInt i)
{
    i.x++;
}

public void Valued(int i)
{
    i++;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-16T19:26:11.557

值类型不是类。这些是语言中的内置类型，由 .NET CTS（通用类型系统）处理。CTS 是 CLR 内部的一个组件，它负责处理值类型，如 bool、int、double、float 等。当您创建值类型的对象时，它会在堆栈上创建。当您将它传递给函数或从函数返回时，会在 ram 中为它创建一个新对象。但是在引用类型的情况下，只传递对象的引用并且不会在内存中创建新对象。有一些用户定义的值类型不在语言规范中，而是由用户定义的。此类值类型继承自 System.ValueType。这种值类型的示例是复数。我们可以使用 System.ValueType 创建我们自己的用户定义的复数类型。

# servicestack - OrmLite/MySql/SqlExpressionVisitor - 需要“like”子句

> ID：12921779
> 
> 赞同：7
> 
> 时间：2012-10-16T19:08:11.093
> 
> 标签：servicestack, ormlite-servicestack

我是 LINQ 和 OrmLite/MySql 的新手。我有一个需要导致 where 子句的服务请求参数：

```
`Name` LIKE '%something%' OR `Name` LIKE '%something%else%' 
```

我知道我可以通过以下方式创建一个`IN()`或一个`=`子句：

```
ev.Where(rn => Sql.In(rn.Name, request.Name));  // Assuming an array here
ev.Where(rn => rn.Name== request.Name)); 
```

但我似乎找不到一个可以让我建立一个`LIKE`. 此外，`Name`实际上是一个别名，所以我试图避免手动构建 where 子句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:25:02.967

您可以使用 构建该特定示例`Contains`，即：

```
ev.Where(rn => rn.Contains(rn.Name, "something") 
    || rn.Contains(rn.Name, "something%else")); 
```

`StartsWith`并且`EndsWith`通常在 LINQ 中用于生成`LIKE`仅在一端带有通配符的子句（但似乎 MySql 方言的定义`StartsWith`有所[不同](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite.MySql/MySqlExpressionVisitor.cs)，可能是为了提高效率。）

您可以检查默认方言[源代码](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite/Expressions/SqlExpressionVisitor.cs)以确认为`EndsWith`和生成的内容`Contains`。

# jquery - 使用jquery垂直居中图像

> ID：12921780
> 
> 赞同：0
> 
> 时间：2012-10-16T19:08:21.487
> 
> 标签：jquery, image, center

为了使图像垂直居中（[此页面](http://www.lolaartgallery.com/manufacturer.php?id_manufacturer=39)上的缩略图），我尝试了以下操作：

```
//Center the images (thumbnails) in the slideimg.js
$(document).ready(function() {
    $('.work-view img').load(function(){
        //get img dimensions
        var h = $(this).height();
//alert(h);
        //set img position
        $(this).css('position','absolute');
        $(this).css('top','50%');
        $(this).css('margin-top',-Math.round(h/2) + 'px');
    });
}); 
```

但它适用于 Chrome，但不适用于 firefox，因为 firefox 将图像放在缓存中，而 .load 仅用于加载图像。所以我正在尝试这个：

```
//Center the images (thumbnails) in the slideimg.js
$(document).ready(function() {
    function imageLoaded() { // function to invoke for loaded image
    //get img dimensions
    var h = $(this).height();
//alert(h);
    //set img position
    $(this).css('position','absolute');
    $(this).css('top','50%');
    $(this).css('margin-top',-Math.round(h/2) + 'px');
    }
    $('.work-view img').each(function(){
    if( this.complete ) {
        imageLoaded.call( this );
    } else {
        $(this).one('load', imageLoaded);
    }
    });
}); 
```

但它不起作用......`$(this).css('position','absolute');`将它们向右移动而不是让它们水平放置......我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:13:07.097

试试这个，我认为你正在失去你的形象的目标。

```
//Center the images (thumbnails) in the slideimg.js
function imageLoaded(thisImage) { // function to invoke for loaded image
  //get img dimensions
  var h = $(thisImage).height();
  //set img position
  $(thisImage).css('position','absolute');
  $(thisImage).css('top','50%');
  $(thisImage).css('margin-top',-Math.round(h/2) + 'px');
}
$(document).ready(function() {
 $('.work-view img').each(function(){
  if( this.complete ) {
    imageLoaded.call( this );
  } else {
    var self = this;
    $(this).one('load', function(){ imageLoaded(self); });
  }
 });
}); 
```

我所做的是将函数分解出来，并为其添加一个参数，因为您试图`this`多次传递给该函数，但该函数不接受参数。在函数中，`this`正如它所写的那样，指的是`window`.

# django - 实例需要有一个主键值才能使用多对多关系

> ID：12921783
> 
> 赞同：2
> 
> 时间：2012-10-16T19:08:33.197
> 
> 标签：django, django-models, django-orm

我现在要生气了——我无法创建新的团队实例。Django 总是显示错误：`'Team' instance needs to have a primary key value before a many-to-many relationship can be used.`

这是我的模型：

```
from django.contrib.auth.models import User
from django.db import models

class Team(models.Model):
    name = models.CharField(max_length=10)
    members = models.ManyToManyField(User)

    def save(self, *args, **kwargs):
        if self.pk:
            # for later use
            pass
        super(Team, self).save(*args, **kwargs) 
```

现在我想创建一个新团队...

```
from django.contrib.auth.models import User
from models import Team

user_obj = User.objects.get(pk=1)
new = Team()
new.name = 'aaa'
new.save()
new.members.add(user_obj) 
```

有人能看出错误吗？

**编辑** 我已经阅读了文档和这个（非常棒的）答案[如何为具有多对多字段的 Django 模型创建对象？](https://stackoverflow.com/questions/6996176/how-to-create-an-object-for-a-django-model-with-a-many-to-many-field)- 仍然无法弄清楚出了什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:31:00.013

啊，它在你的 save() 方法中。试试这个修复：

```
def save(self, *args, **kwargs):
    obj = super(Team, self).save(*args, **kwargs)
    if obj.id:
        # for later use
        pass
    return obj 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T16:53:58.323

@init3 接受的答案对我不起作用，因为 obj 一直解析为“NoneType”，换句话说，对 super 的调用没有返回任何内容。让它工作：

```
def save(self, *args, **kwargs):
    super(Team, self).save(*args, **kwargs)
    if self.pk:
        pass 
```

# php - 将自定义数据库与 Wordpress 集成

> ID：12921785
> 
> 赞同：0
> 
> 时间：2012-10-16T19:08:34.780
> 
> 标签：php, mysql, wordpress

我有一个 Wordpress 网站，其中很少有我的大学生用户

他们使用他们的 RollNumbers/HallTicket 号码作为他们在 Wordpress 网站中的用户名进行注册

现在我有另一个数据库，其中包含他们的个人详细信息，例如分数、排名等

现在我想将此数据库集成到 Wordpress，以便当学生/用户登录时，他/她可以看到他们各自的分数和其他详细信息

我只是想要你的建议/想法来实现这一点，而不是要求一个完整的解决方案

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:19:39.977

一个简单的谷歌搜索 wp 自定义查询已经产生了一些有趣的结果。

我为你选择了这个：[http ://wp.tutsplus.com/tutorials/creative-coding/writing-custom-queries-in-wordpress/](http://wp.tutsplus.com/tutorials/creative-coding/writing-custom-queries-in-wordpress/)

如果你能把它和你想做的事情放在一起，它应该提供足够的信息。

# python - 在 Windows 7 中硬链接整个目录的内容

> ID：12921788
> 
> 赞同：0
> 
> 时间：2012-10-16T19:08:46.013
> 
> 标签：python, scripting, batch-file, windows-7-x64, hardlink

归档这个的最好方法是什么？我正在考虑一个批处理脚本，该脚本将源文件夹和目标文件夹作为输入，然后递归地遍历源文件夹，并为每个文件在目标文件夹中创建指向该文件（同名）的硬链接。

```
hardlink.bat "src dir" "dst dir"

results:
->src dir\file1 <==> dst dir\file1
->src dir\subdir\file2 <==> dst dir\subdir\file2 
```

我尝试使用 for 循环执行此操作，但我对批处理脚本的经验有限，而且我不知道如何拆分源文件夹名称以在目标文件夹中重新创建相同的目录结构。任何提示将不胜感激！

PD：该解决方案可以使用任何脚本语言。我目前安装了 python 2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:31:59.627

我喜欢免费的[Link Shell Extension](http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html)，它为您提供创建硬链接的 GUI 工具，并直接集成到 Explorer 中。

如果您想从脚本中执行此操作，您可以执行 Windows 的[fsutil](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/fsutil_hardlink.mspx?mfr=true)实用程序。另一个非常好的免费替代品是[SysInternals的](http://technet.microsoft.com/en-us/sysinternals)[junction](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)实用程序。

任何一个都可以从批处理脚本中调用。同样，要从 Python 脚本执行一个或另一个，您可以使用该`os.system()`函数或可能使用该类的实例`subprocess.Popen()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T13:57:26.060

我试图用 Windows 批处理文件做同样的事情，这真的花了我很长时间......但这里是：

```
@echo off
setlocal
set target=%~f2
if not "%target:~-1%"=="\" set target=%target%\
xcopy /t /e /y "%~f1" "%target%"
cd %1
forfiles /s /c "cmd /v:on /s /c set relpath=@relpath&set relpath=!relpath:~3,-1!&if @isdir==FALSE fsutil hardlink create """%target%!relpath!""" @file>nul&if errorlevel 1 echo Failed for !relpath!"
endlocal 
```

它必须在提升的命令提示符下运行。

**此外，所有路径都不得包含`!`字符（感叹号）。如果您知道如何处理，请发表评论！**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-09T08:57:16.677

我希望我可以简单地将其作为对 user1537366 的评论，但我需要 50 声望才能评论：S

要使批处理文件也与感叹号一起使用，请尝试以下代码：

```
@echo off

    set source=
    set target=

    forfiles /s /P "%source%" /C "cmd /c if @isdir==TRUE (mklink /j \"%target%\@relpath\" @path ) else (mklink /h \"%target%\@relpath\" @path )" 
```

# django - Django：将身份验证用户导入模型

> ID：12921789
> 
> 赞同：86
> 
> 时间：2012-10-16T19:08:46.927
> 
> 标签：django, django-models

在 Django 中，我创建了一个新模型：

```
from django.db import models
from django.contrib.auth import user

class Workers(models.Model):
    user = models.OneToOneField(User, primary_key=True)
        work_group = models.CharField(max_length=20)
        card_num = models.IntegerField()
    def __unicode__(self):
            return self.user 
```

但它不起作用：`ImportError: cannot import name user`

如何解决？

我想在数据库中创建一个新表“workers”，它`OneToOne`与表“auth_user”有关系。

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-10-16T19:09:57.830

```
from django.contrib.auth.models import User 
```

您错过了模型 - 并且用户大写。

如果您使用自定义用户模型，您应该使用：

```
from django.contrib.auth import get_user_model
User = get_user_model() 
```

更多细节可以在[docs](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#referencing-the-user-model)中找到。

> **在 Django 1.11 中更改：**
> 
> 添加了在导入时调用 get_user_model() 的功能。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-10-26T03:05:07.363

如果您使用的是自定义 User 模型，请执行以下操作来引用它：

```
from django.contrib.auth import get_user_model
User = get_user_model() 
```

或者如果在外键或多对多关系中使用它：

```
from django.conf import settings
....
user = models.ForeignKey(settings.AUTH_USER_MODEL) 
```

[文档](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#referencing-the-user-model)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-10T04:51:51.203

`AUTH_USER_MODEL`是一个很好的解决方案。这是根据问题的完整解决方案。

```
from django.db import models
from django.conf import settings

class Workers(models.Model):
    user = models.ForeignKey(settings.AUTH_USER_MODEL)
    work_group = models.CharField(max_length=20)
    card_num = models.IntegerField()

    def __unicode__(self):
        return self.user.id 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-06T20:44:53.167

为了保持您的代码通用，在定义模型与用户模型的关系时，使用`get_user_model()`检索用户模型的方法和`AUTH_USER_MODEL`设置来引用它，而不是直接引用 auth 用户模型。

参考：[Django 示例](https://www.packtpub.com/web-development/django-example)书

# linux - Rsync 排除除 1 个目录树之外的所有内容

> ID：12921790
> 
> 赞同：6
> 
> 时间：2012-10-16T19:08:50.170
> 
> 标签：linux, rsync

我有一个目录结构，其中包含可变数量的子目录和文件。我想排除除 1 子目录树之外的所有内容。

我努力了

```
rsync -a --include 'wanted_dir' --exclude '*' 1/ 2/ 
```

但它只给了我`wanted_dir`目录（它下面没有文件）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T14:04:25.350

要包含目录中的所有文件，请添加三颗星：

```
rsync -a --include 'wanted_dir/***' --exclude '*' 1/ 2/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:17:44.400

将它添加到包含目录不是更有意义吗？

```
rsync -a --include 'wanted_dir/1/' 
```

您的代码中发生了什么使您需要包含根目录？

# ruby-on-rails - rails3-jquery-autocomplete 不工作

> ID：12921791
> 
> 赞同：2
> 
> 时间：2012-10-16T19:08:50.290
> 
> 标签：ruby-on-rails, gem, jquery-autocomplete

我正在关注本教程 [https://github.com/crowdint/rails3-jquery-autocomplete][1]，但我遇到了问题。

我的模型：

```
class Category < ActiveRecord::Base
  attr_accessible :name

  has_many :products
end

class Product < ActiveRecord::Base
  attr_accessible :name, :category_id

  belongs_to :category
end 
```

架构：

```
 create_table "categories", :force => true do |t|
    t.string   "name"
  end

  create_table "products", :force => true do |t|
    t.string   "name"
    t.integer  "category_id"
  end 
```

这是我的控制器：

```
autocomplete :category, :name 
```

我的布局是这样的：

```
<%= javascript_include_tag :defaults, "autocomplete-rails.js"  %> 
```

我的路线有这个：

```
 resources :products do
    get :autocomplete_category_name, :on => :collection
  end 
```

我的表格有这个：

```
<%= f.autocomplete_field :category_name, autocomplete_category_name_products_path %> 
```

我的 app/assets/javascript 文件夹中有 autocomplete-rails.js。但是由于某种原因，我不断收到此错误：

```
undefined method `category_name' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:26:53.117

你应该使用

```
<%= f.autocomplete_field :category, autocomplete_category_name_products_path, :id_element => '#product_category_id' %>
<%= f.hidden_field :category_id %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:50:34.420

确保您已安装并捆绑了 gem，然后再次重新启动服务器

```
gem 'rails3-jquery-autocomplete` 
```

# sql - Oracle数据库在所有表中搜索字符串，返回行数据

> ID：12921792
> 
> 赞同：2
> 
> 时间：2012-10-16T19:08:51.410
> 
> 标签：sql, database, oracle, oracle11g

我需要在 oracle 数据库中的所有表中搜索特定字符串并返回找到该字符串的所有记录。我正在使用 SQL Developer。网上已经发布了几个非常有用的脚本和存储过程，它们提供了一种搜索整个数据库的方法，它们似乎都能够返回找到字符串的表名和列名。我实际上希望看到像 select * 语句这样的行，但我希望它适用于我数据库中的所有表。我想指出，我是一个非常初学者，我不熟悉高级 PL/SQL 脚本和数据库概念，所以虽然我已经尝试并尝试过，但我似乎无法弄清楚，所以任何输入都将不胜感激。

这是我试图修改的脚本（其他人的解决方案）

```
declare
 l_count number := 0;
 l_str varchar2(20) := '%test%';
begin
 for rec in (select table_name, column_name
             from user_tab_columns
             where data_type in ( 'VARCHAR2' , 'VARCHAR', 'CHAR' ) ) loop
  execute immediate 'select count(*) from '||rec.table_name||
                ' where '||rec.column_name||' like '''||l_str||'''' into l_count;
  if l_count > 0 then
   dbms_output.put_line('Table : '||rec.table_name||'  '||rec.column_name);
  end if;
 end loop;
end;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:03:14.077

您是否正在尝试基于关键字构建完整的数据库搜索？您可以通过以下代码获取表名、表列名和行数。但是您无法在同一代码中获取行数据，您可以根据搜索结果获取行数据。

```
 --Set output size
   SET serveroutput ON size 1000000

   DECLARE
      -- var table Name for cursor loop.
      t_c1_tname      user_tab_columns.table_name%TYPE;
      -- var column name for dynamic sql statement.
      t_c1_cname      user_tab_columns.column_name%TYPE;
      -- var string for dynamic sql statement.
      t_command       VARCHAR2(200);
      -- var for your search key word.
      l_str varchar2(20) := '%test%';
      -- var for dynamic cursor.
      t_cid           INTEGER;
      -- var for total row counts.
      t_total_records NUMBER(10);
      -- var for stat of executing dynamic sql statement.
      stat            INTEGER;
      --var for each loop row counts.
      row_count       INTEGER;
      -- var for minimum search result, here I set value = 0;
      t_limit         INTEGER := 0;    -- Only show tables with more rows

      -- cursor gets all table name, column name.
      CURSOR c1 IS select table_name, column_name
        from user_tab_columns
        where data_type in ( 'VARCHAR2' , 'VARCHAR', 'CHAR' );
    BEGIN
      t_limit := 0;
      OPEN c1;
      LOOP
      FETCH c1 INTO t_c1_tname,t_c1_cname;
      EXIT WHEN c1%NOTFOUND;
      -- Here create dynamic sql statement. 
      t_command := 'SELECT COUNT(0) FROM '||t_c1_tname || ' where ' || t_c1_cname ||' like '''|| l_str||'''';
      t_cid := DBMS_SQL.OPEN_CURSOR;
      DBMS_SQL.PARSE(t_cid,t_command,DBMS_SQL.native);
      DBMS_SQL.DEFINE_COLUMN(t_cid,1,t_total_records);
      -- Here execute dynamic sql statement. 
      stat := DBMS_SQL.EXECUTE(t_cid);
      row_count := DBMS_SQL.FETCH_ROWS(t_cid);
      -- Here get total row counts for each loop.
      DBMS_SQL.COLUMN_VALUE(t_cid,1,t_total_records);
      IF t_total_records > t_limit THEN
         --Here output results
         DBMS_OUTPUT.PUT_LINE(RPAD(t_c1_tname,55,' ')||RPAD(t_c1_cname,55,' ')||
                        TO_CHAR(t_total_records,'99999999')||' record(s)');
         -- here you can insert results into your table.
         --INSERT INTO search_db_results VALUES (t_c1_tname,t_c1_cname,t_total_records);
      END IF;
      DBMS_SQL.CLOSE_CURSOR(t_cid);
      END LOOP;
      CLOSE c1;

     -- COMMIT if you have any insert statement.
     -- COMMIT;
    END;
    / 
```

# asp.net-mvc - Ext.NET 未与 ASP.NET MVC 4 集成

> ID：12921793
> 
> 赞同：4
> 
> 时间：2012-10-16T19:08:53.517
> 
> 标签：asp.net-mvc, ext.net

我在 VS 2012 中创建了一个 MVC 4 Web 应用程序。通过 NuGet 下载了 Ext.Net 2。在我的 view/home/index.cshtml 文件中，我尝试输入：

```
@Html.X().ResourceManager() 
```

当我运行时，我得到以下信息：

> CS1061：“System.Web.Mvc.HtmlHelper”不包含“X”的定义，并且找不到接受“System.Web.Mvc.HtmlHelper”类型的第一个参数的扩展方法“X”（您是否缺少使用指令还是程序集引用？）

这是我的 web.config

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <section name="extnet" type="Ext.Net.GlobalConfig" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MvcApplication3-20121016104640;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-MvcApplication3-20121016104640.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
      <controls>
        <add tagPrefix="ext" namespace="Ext.Net" assembly="Ext.Net" />
      </controls>
    </pages>
    <httpHandlers>
      <add path="*/ext.axd" verb="*" type="Ext.Net.ResourceHandler" validate="false" />
    </httpHandlers>
    <httpModules>
      <add name="DirectRequestModule" type="Ext.Net.DirectRequestModule, Ext.Net" />
    </httpModules>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
      <add name="DirectRequestHandler" verb="*" path="*/ext.axd" preCondition="integratedMode" type="Ext.Net.ResourceHandler" />
      <add name="ExtNetHandler" path="*/ext.axd" verb="*" type="Ext.Net.ResourceHandler" />
    </handlers>
    <modules>
      <add name="DirectRequestModule" preCondition="managedHandler" type="Ext.Net.DirectRequestModule, Ext.Net" />
    </modules>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.5.7" />
        <assemblyIdentity name="Ext.Net.Utilities" publicKeyToken="2c34ac34702a3c23" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0" newVersion="2.0.1" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <extnet theme="Gray" />
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:56:25.240

1.  将 Ext.Net 添加到程序集`<system.web>`

    ```
     <compilation debug="true" targetFramework="4.0">
          <assemblies>
            ....
              <add assembly="Ext.Net"/>
          </assemblies>
     </compilation> 
    ```

2.  在中添加命名空间`<system.web>`

    ```
    <pages>
      <namespaces>
         ....
        <add namespace="Ext.Net"/>
        <add namespace="Ext.Net.MVC"/>
      </namespaces>
    </pages> 
    ```

3.  像 geoffrey.mcgill 帖子中一样正确组装绑定

4.  在 Views 文件夹中的 web.config 中添加命名空间（在`<system.web.webPages.razor>`部分中）

    ```
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
        <namespaces>
           ....
           <add namespace="Ext.Net" />
           <add namespace="Ext.Net.MVC" />
        </namespaces>
     </pages> 
    ```

5.  在 Views 文件夹的 web.config 中添加 Ext.Net 程序集（在`<system.web>`部分中）

    ```
     <pages ....>
        <controls>
            ....
           <add assembly="Ext.Net" namespace="Ext.Net" tagPrefix="ext" />
        </controls>
     </pages> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:11:43.687

您能否确认您在项目中添加了对 Ext.Net.dll 的正确引用？

编辑：我相信你`<runtime>`里面的节点`<system.webserver>`是不正确的。应该如下，其中每个 Assembly 被定义为一个单独的`<assemblyBinding>`.

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" />
            <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.5.7" />
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="Ext.Net.Utilities" publicKeyToken="2c34ac34702a3c23" />
            <bindingRedirect oldVersion="0.0.0.0-2.0.0" newVersion="2.0.1" />
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
        </dependentAssembly>
        <dependentAssembly>
            <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
            <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

我相信 NuGet 可能存在缺陷。我们已经看到其他关于 NuGet 将这些程序集配置添加到 on 的报告`<dependentAssembly>`。

如果您对 进行上述更改`<runtime>`，您的项目应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:13:10.447

请不要使用 Nuget 获取 Ext.Net dll。我相信 Ext.Net 团队不会尽快更新 Nuget 中的 Ext.Net dll。因为我发现版本是 Nuget 是 2.1.1.11828，它没有 Ext。 Net.Mvc 命名空间。但最新发布的版本是 2.1.1.18233，它有 Ext.Net.Mvc 命名空间...

# ios - 带有自定义单元格/自定义背景图像的分组 UITableView

> ID：12921794
> 
> 赞同：1
> 
> 时间：2012-10-16T19:08:58.380
> 
> 标签：ios, uitableview

我有一个自定义 UITableViewCell。xib 文件如下所示：

![在此处输入图像描述](../Images/00dd0ea2bf5c33cabd573d09389eee6a.png)

可以通过选择它来打开和关闭单元格。当单元格关闭时，只有标题标签和顶部背景图像可见。这是模拟器上的表格视图，打开和关闭的样子：

![在此处输入图像描述](../Images/50110dcef4b06e2c3d064bbb001c1f2b.png) ![在此处输入图像描述](../Images/2a33b7e44e56517275597f995c5277fa.png)

我试图弄清楚如何处理圆角。目前，我正在检查单元格是第一个单元格、最后一个单元格还是中间单元格，并应用蒙版：

```
if (row == 0)
{
    // Create the path (with only the top corners rounded)
    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:cell.titleBackgroundImageView.bounds
                                                   byRoundingCorners:(UIRectCornerTopLeft | UIRectCornerTopRight)
                                                         cornerRadii:CGSizeMake(10.0, 10.0)];

    // Create the shape layer and set its path
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = cell.titleBackgroundImageView.bounds;
    maskLayer.path = maskPath.CGPath;

    // Set the newly created shape layer as the mask for the image view's layer
    cell.titleBackgroundImageView.layer.mask = maskLayer;
    cell.bodyBackgroundImageView.layer.mask = nil;
}
else if ((row + 1) == [itemsForSection count])
{
    // Create the path (with only the bottom corners rounded)
    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:cell.titleBackgroundImageView.bounds
                                                   byRoundingCorners:(UIRectCornerBottomLeft | UIRectCornerBottomRight)
                                                         cornerRadii:CGSizeMake(10.0, 10.0)];
    CAShapeLayer *maskLayer = [CAShapeLayer layer];

    // Create the shape layer and set its path
    BOOL isOpened = [[[self.cellOpenedStatusMutableDictionary objectForKey:sectionTitle] objectAtIndex:row] boolValue];
    if (isOpened)
    {
        cell.titleBackgroundImageView.layer.mask = nil;
    }
    else
    {
        maskLayer.frame = cell.titleBackgroundImageView.bounds;
        maskLayer.path = maskPath.CGPath;        
        cell.titleBackgroundImageView.layer.mask = maskLayer;
    }
        // Create the path (with only the bottom corners rounded)
    maskPath = [UIBezierPath bezierPathWithRoundedRect:cell.bodyBackgroundImageView.bounds
                                     byRoundingCorners:(UIRectCornerBottomLeft | UIRectCornerBottomRight)
                                           cornerRadii:CGSizeMake(10.0, 10.0)];

    // Create the shape layer and set its path
    maskLayer = [CAShapeLayer layer];
    maskLayer.frame = cell.titleBackgroundImageView.bounds;
    maskLayer.path = maskPath.CGPath;

    cell.bodyBackgroundImageView.layer.mask = maskLayer;
}
else
{
    cell.titleBackgroundImageView.layer.mask = nil;
    cell.bodyBackgroundImageView.layer.mask = nil;
} 
```

但正如您所看到的，它对底部单元格不起作用 - 表格视图的边框被遮挡了。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:43:35.430

看起来您只需将表格视图的分隔符样式设置为“单线”（`UITableViewCellSeparatorStyleSingleLine`）而不是“单线蚀刻”。

# jquery - jQuery 不会从 MVC 视图中调用

> ID：12921797
> 
> 赞同：0
> 
> 时间：2012-10-16T19:09:08.713
> 
> 标签：jquery, asp.net-mvc-3, html

我在我的网络应用程序的许多地方都使用了[jQuery DateTimePicker](http://trentrichardson.com/examples/timepicker/)。它在任何地方都可以正常工作，除了一个日历不会弹出的地方。这是页面的源代码（在 Chrome 中查看）。

```
<script>
    $('#example9').datetimepicker({ timeFormat: 'h:mm', stepMinute: 5, dateFormat: 'yy-mm-dd'
</script>

<div>
    <input type="text" name="example9" id="example9" value="2012-10-16 15:00" />
</div> 
```

如您所见，我已将代码简化为最简单的代码并添加了一个事件侦听器。每当我单击输入时，什么都不会触发，也不会发生任何事情。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:19:31.377

你为什么要那样做？无需根据 ID 在每个特定输入上调用日期选择器，只需创建一个所有日期选择器输入都将具有的 HTML 类。然后在您的 _Layout 或其他总是被调用的 JavaScript 文件中，将该类的所有内容转换为 DatePicker。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T22:18:56.847

确保

1.  jQuery 和您的插件已加载。
2.  您的脚本在加载 DOM 后运行（*或至少在渲染使用的元素后*）。所以在元素之后移动你的`script`代码，或者使用`div``$(document).ready(function(){/*your-code*/});`
3.  在`id`html 中是唯一的，否则它将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:13:24.083

你正在这样做

```
.data("events") 
```

我没有看到文本框的**数据事件**属性

# artificial-intelligence - FANN中位失败的目的是什么？

> ID：12921798
> 
> 赞同：10
> 
> 时间：2012-10-16T19:09:09.943
> 
> 标签：artificial-intelligence, neural-network, fann

我收到了如下来自范恩的回复

```
 Epochs            1\. Current error: 0.2500066161\. Bit fail 4.
    Epochs           58\. Current error: 0.0000930788\. Bit fail 0. 
```

位失败在这里意味着什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-20T10:52:29.230

The bit fail limit is the maximum difference between the expected and actual output neuron value that is allowed.[The default bit fail limit is 0.35](http://leenissen.dk/fann/html/files/fann_train-h.html#fann_get_bit_fail_limit). If the difference between the expected and actual output neuron value is more that the bit fail limit, this counts as 1 bit fail. In the sample output you gave, at 58 epochs all the output neurons gave actual outputs close enough to the expected outputs and hence the bit fail was 0 and training stopped. In other words all the training examples gave outputs that were close enough to the expected outputs. During the first epoch, 4 of the training samples gave outputs resulting in bit fails.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:35:13.953

来自 FANN 的文档

失败位数；表示超过位失败限制的输出神经元的数量 [http://leenissen.dk/fann/html/files/fann_train-h.html#fann_get_bit_fail](http://leenissen.dk/fann/html/files/fann_train-h.html#fann_get_bit_fail)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T13:41:01.710

是的，我也发现这令人困惑，并认为这可能是“ruby-fann”中的一个错误。

FANN 手册指出它是失败的输出神经元的数量，但没有说它是提供的样本集的输出神经元数量的总和。因此，最坏的情况“位失败”是所有样本的所有输出神经元都失败（超出指定的位失败限制）。

# java - 如何在 STS 中使用 JAXB 创建 WSDL 到客户端

> ID：12921800
> 
> 赞同：0
> 
> 时间：2012-10-16T19:09:15.847
> 
> 标签：java, web-services

我正在开始使用 Spring Web 服务，但我已经从 w3school 网站下载了 WSDL，但是当我尝试为此 WSDL 创建客户端时，我没有在 SpringSource 中获得 JAXB 选项，它只显示 apache 轴和 apache 轴 2。请告诉我如何使用 springSource 从 WSDL 生成 Web 服务客户端。虽然我已经添加了 JAXB 插件是 spring 源另一件事是如果我使用 apache axis2 ii 无法找到服务请帮助我理解。

wsdl 是

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://tempuri.org/" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <s:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
      <s:element name="FahrenheitToCelsius">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="Fahrenheit" type="s:string" />
          </s:sequence>
        </s:complexType>
      </s:element>
      <s:element name="FahrenheitToCelsiusResponse">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="FahrenheitToCelsiusResult" type="s:string" />
          </s:sequence>
        </s:complexType>
      </s:element>
      <s:element name="CelsiusToFahrenheit">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="Celsius" type="s:string" />
          </s:sequence>
        </s:complexType>
      </s:element>
      <s:element name="CelsiusToFahrenheitResponse">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="CelsiusToFahrenheitResult" type="s:string" />
          </s:sequence>
        </s:complexType>
      </s:element>
      <s:element name="string" nillable="true" type="s:string" />
    </s:schema>
  </wsdl:types>
  <wsdl:message name="FahrenheitToCelsiusSoapIn">
    <wsdl:part name="parameters" element="tns:FahrenheitToCelsius" />
  </wsdl:message>
  <wsdl:message name="FahrenheitToCelsiusSoapOut">
    <wsdl:part name="parameters" element="tns:FahrenheitToCelsiusResponse" />
  </wsdl:message>
  <wsdl:message name="CelsiusToFahrenheitSoapIn">
    <wsdl:part name="parameters" element="tns:CelsiusToFahrenheit" />
  </wsdl:message>
  <wsdl:message name="CelsiusToFahrenheitSoapOut">
    <wsdl:part name="parameters" element="tns:CelsiusToFahrenheitResponse" />
  </wsdl:message>
  <wsdl:message name="FahrenheitToCelsiusHttpPostIn">
    <wsdl:part name="Fahrenheit" type="s:string" />
  </wsdl:message>
  <wsdl:message name="FahrenheitToCelsiusHttpPostOut">
    <wsdl:part name="Body" element="tns:string" />
  </wsdl:message>
  <wsdl:message name="CelsiusToFahrenheitHttpPostIn">
    <wsdl:part name="Celsius" type="s:string" />
  </wsdl:message>
  <wsdl:message name="CelsiusToFahrenheitHttpPostOut">
    <wsdl:part name="Body" element="tns:string" />
  </wsdl:message>
  <wsdl:portType name="TempConvertSoap">
    <wsdl:operation name="FahrenheitToCelsius">
      <wsdl:input message="tns:FahrenheitToCelsiusSoapIn" />
      <wsdl:output message="tns:FahrenheitToCelsiusSoapOut" />
    </wsdl:operation>
    <wsdl:operation name="CelsiusToFahrenheit">
      <wsdl:input message="tns:CelsiusToFahrenheitSoapIn" />
      <wsdl:output message="tns:CelsiusToFahrenheitSoapOut" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:portType name="TempConvertHttpPost">
    <wsdl:operation name="FahrenheitToCelsius">
      <wsdl:input message="tns:FahrenheitToCelsiusHttpPostIn" />
      <wsdl:output message="tns:FahrenheitToCelsiusHttpPostOut" />
    </wsdl:operation>
    <wsdl:operation name="CelsiusToFahrenheit">
      <wsdl:input message="tns:CelsiusToFahrenheitHttpPostIn" />
      <wsdl:output message="tns:CelsiusToFahrenheitHttpPostOut" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="TempConvertSoap" type="tns:TempConvertSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="FahrenheitToCelsius">
      <soap:operation soapAction="http://tempuri.org/FahrenheitToCelsius" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="CelsiusToFahrenheit">
      <soap:operation soapAction="http://tempuri.org/CelsiusToFahrenheit" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="TempConvertSoap12" type="tns:TempConvertSoap">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="FahrenheitToCelsius">
      <soap12:operation soapAction="http://tempuri.org/FahrenheitToCelsius" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="CelsiusToFahrenheit">
      <soap12:operation soapAction="http://tempuri.org/CelsiusToFahrenheit" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="TempConvertHttpPost" type="tns:TempConvertHttpPost">
    <http:binding verb="POST" />
    <wsdl:operation name="FahrenheitToCelsius">
      <http:operation location="/FahrenheitToCelsius" />
      <wsdl:input>
        <mime:content type="application/x-www-form-urlencoded" />
      </wsdl:input>
      <wsdl:output>
        <mime:mimeXml part="Body" />
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="CelsiusToFahrenheit">
      <http:operation location="/CelsiusToFahrenheit" />
      <wsdl:input>
        <mime:content type="application/x-www-form-urlencoded" />
      </wsdl:input>
      <wsdl:output>
        <mime:mimeXml part="Body" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="TempConvert">
    <wsdl:port name="TempConvertSoap" binding="tns:TempConvertSoap">
      <soap:address location="http://www.w3schools.com/webservices/tempconvert.asmx" />
    </wsdl:port>
    <wsdl:port name="TempConvertSoap12" binding="tns:TempConvertSoap12">
      <soap12:address location="http://www.w3schools.com/webservices/tempconvert.asmx" />
    </wsdl:port>
    <wsdl:port name="TempConvertHttpPost" binding="tns:TempConvertHttpPost">
      <http:address location="http://www.w3schools.com/webservices/tempconvert.asmx" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:50:43.333

JAXB 是一种从 XML 创建 Java 对象的 API，反之亦然。大多数 Web 服务工具在内部使用 JAXB 来解析您的 wsdl。当您使用 eclipse 服务客户端创建时，您应该会看到许多生成的源文件，其中一个是代理类，另一个代表端口类型。Jdk 提供了名为 Service 的 API，您可以使用它来创建实例，然后调用服务实现方法。

Web 服务客户端创建在任何 Eclipse IDE 中都很常见，这里有一些有用的链接

[http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jst.ws.cxf.doc.user%2Ftasks%2Fcreate_client.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jst.ws.cxf.doc.user%2Ftasks%2Fcreate_client.html) [1](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

[如何在 Eclipse 中创建 Axis2 Web 服务客户端？](https://stackoverflow.com/questions/6782782/how-to-create-an-axis2-web-service-client-in-eclipse)

# xcode4 - 如何在 Xcode4 中定义库运行时位置？

> ID：12921804
> 
> 赞同：0
> 
> 时间：2012-10-16T19:09:25.420
> 
> 标签：xcode4

在我的 Cocoa 应用程序中，我使用了在命令行中编译并在自定义位置可用的第三方 C 库。

在我的 Xcode 项目中，我可以定义库的头文件所在的位置以及在链接期间查看库的位置：

头文件位置（`HEADER_SEARCH_PATHS`）：

```
Target > Build Settings > Search Paths > Header Search Paths 
```

链接期间的库位置 ( `LIBRARY_SEARCH_PATHS`)：

```
Target > Build Settings > Search Paths > Library Search Paths 
```

但是如何定义库的运行时位置？当我在 Xcode ( `cmd-r`) 中运行我的 Cocoa 应用程序时，我从动态链接器中得到一个错误：

```
dyld: Library not loaded: /usr/local/lib/libfoo.1.dylib
  Reason: image not found 
```

当我创建目录`/usr/local/lib`和库的符号链接时，我的应用程序运行没有问题。

`man dydl`讲述了三个相关的环境变量：

*   `DYLD_LIBRARY_PATH`
*   `DYLD_FALLBACK_FRAMEWORK_PATH`
*   `DYLD_FALLBACK_LIBRARY_PATH`

我知道如何在 bash 终端上设置变量（请参阅[我在哪里设置 Mac OS X 上的 DYLD_LIBRARY_PATH，这是个好主意吗？](https://superuser.com/questions/282450/where-do-i-set-dyld-library-path-on-mac-os-x-and-is-it-a-good-idea)），但是如何为 Xcode 设置环境变量？

我正在运行 OS X 10.8.x 和 Xcode 4.5.x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:09:25.420

在 Xcode 4.5中*，一个方案*指定了启动目标时的可执行环境（包括环境变量）。

有关方案的详细信息，请参阅[Xcode 4 用户指南](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide)中的[构建和运行您的应用](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/055-Build_and_Run_Your_App/build_app.html)一章。

# nsis - insertmacro 被调用两次

> ID：12921807
> 
> 赞同：0
> 
> 时间：2012-10-16T19:09:37.523
> 
> 标签：nsis

嗨，我有以下代码

文件：setup.nsi

```
Function .onInit
    Call functionXXX
FunctionEnd 
```

文件：Utils.nsh

```
!define someFunc "!insertmacro someFunc"
!macro someFunc source destination
    MessageBox "${source}, ${destination}"
!macroend 

Function functionXXX
    ${someFunc} "C:\MyApp\test.txt" "C:\MyApp\backup\test.txt"
FunctionEnd 
```

如果我运行脚本，宏被调用两次，我会看到两次具有相同值的消息框。为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:07:01.010

此处发布的此代码不可能两次 MessageBox。

必须有其他代码调用它，尝试：

```
Function .onInit
    Messagebox mb_ok before
    Call functionXXX
    Messagebox mb_ok after
FunctionEnd 
```

您还应该能够看到编译器输出中的所有步骤...

# sql - 转换为 MM/YYYY 格式

> ID：12921808
> 
> 赞同：0
> 
> 时间：2012-10-16T19:09:43.423
> 
> 标签：sql, sql-server-2008, tsql, date, datetime

我在数据库中有一些关于 varchar 字段的错误数据。数据包括：

```
10/2012
May, 2010
August., 2010
05/10/2009 
```

但现在我需要清理这些数据并使用 MM/YYYY 格式更新列。有人有任何建议可以更轻松地做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:46:17.560

您可以使用 spt_values 创建月/年转换表来创建您要查找的月和年的组合。

然后通过格式化月/年值来加入它以符合不同的版本。请注意，您只需为 ISDATE(field) <> 1 执行此操作

```
;With ConversionTable as (
SELECT 
    months.number month, 
    years.number year,
    right('00' + cast( months.number as varchar(2)), 2) 
    + '/' + cast(years.number as char(4)) Final
FROM  
     master..spt_values months
    CROSS JOIN master..spt_values years 
WHERE 
     months.NUMBER  between 1 and 12
     and months.type = 'P'
     AND years.NUMBER  between 2000 and 2012
     and years.type = 'P')

SELECT t.baddate , ct.final
FROM 
    TEST t
    INNER JOIN 
    ConversionTable  ct 
    ON t.BadDate = 
         DateName( month , DateAdd( month , ct.month , 0 ) - 1 ) 
         + ', '
         + cast(ct.year as char(4)) 
    OR
      t.BadDate = 
         DateName( month , DateAdd( month , ct.month , 0 ) - 1 ) 
         + '., '
         + cast(ct.year as char(4)) 
    OR 
         t.BadDate = ct.Final

   --- Add more OR statements for your different varieties 
WHERE
     ISDATE(t.badDate) <> 1
UNION
SELECT 
     t.BadDate ,  
        right('00'  + cast(MONTH(Cast(t.BadDate as datetime)) as varchar(2)),2) + '/'
       + cast(year(Cast(t.BadDate as datetime)) as varchar(4))
FROM
     test t
WHERE
     ISDATE(t.badDate) = 1 
```

[演示](http://sqlfiddle.com/#!3/6ccf6/33)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:35:33.403

**更新**

```
SELECT badDate,
right(convert(varchar(10),cast(replace(CASE len(badDate) - len(replace(badDate, '/', '')) WHEN 1 THEN substring(badDate,1,2)+'/01/'+right(badDate,4) ELSE badDate END,'.', '') AS datetime),103),7)
FROM test 
```

[演示](http://sqlfiddle.com/#!3/6e0ca/8/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:26:39.953

我建议在代码中执行此操作（不确定有哪些语言可用）。与普通 sql 相比，大多数语言将对日期时间处理和异常处理提供更丰富的支持。

如果您必须支持 SQL Server 2000 和 2005 以及 2008，则尤其如此。

# java - 创建自定义 Jackson 注释

> ID：12921812
> 
> 赞同：17
> 
> 时间：2012-10-16T19:09:58.480
> 
> 标签：java, annotations, marshalling, jackson

一个项目需要大量使用杰克逊注解的以下组合。那么，有没有办法创建另一个注释以避免丑陋的复制/粘贴：

```
public class A {
    @JsonProperty("_id")
    @JsonSerialize(using=IdSerializer.class)
    @JsonDeserialize(using=IdDeserializer.class)
    String id;
}

public class B {
    @JsonProperty("_id")
    @JsonSerialize(using=IdSerializer.class)
    @JsonDeserialize(using=IdDeserializer.class)
    String id;
}

public class C {
    @CustomId // don't repeat that configuration endlessly
    String id;
} 
```

**更新：**我试过这个，没有成功:-(

```
@Retention(RetentionPolicy.RUNTIME)
@JacksonAnnotationsInside
@JsonProperty("_id")
@JsonSerialize(using=IdSerializer.class, include=JsonSerialize.Inclusion.NON_NULL)
@JsonDeserialize(using=IdDeserializer.class)
public @interface Id {}

public class D {
    @Id
    private String id;
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-17T08:36:14.523

使用`@JacksonAnnotationsInside`解决问题：

```
public class JacksonTest {

    @Retention(RetentionPolicy.RUNTIME)
    @JacksonAnnotationsInside
    @JsonProperty("_id")
    @JsonSerialize(using=IdSerializer.class, include=Inclusion.NON_NULL)
    @JsonDeserialize(using=IdDeserializer.class)
    public @interface Id {
    }

    public static class Answer {
        @Id
        String id;
        String name;

        public Answer() {}
    }

    @Test
    public void testInside() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        VisibilityChecker<?> checker = mapper.getSerializationConfig().getDefaultVisibilityChecker();
        mapper.setVisibilityChecker(checker.withFieldVisibility(JsonAutoDetect.Visibility.ANY));

        String string = "{ 'name' : 'John' , '_id' : { 'sub' : '47cc'}}".replace('\'', '"');
        Answer answer = mapper.reader(Answer.class).readValue(string);
        Assertions.assertThat(answer.id).isEqualTo("47cc");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:46:37.170

我猜你可以编写自己的注释类

```
package org.codehaus.jackson.annotate ;

public @ interface JsonProperty
{
      String value ( ) default "_id" ;
}

public @ interface JsonSerialize
{
      Class using ( ) default IdSerializer.class ;
}

... 
```

编译这些类并确保它们在原始版本之前的类路径中。这会减少但不会消除复制/粘贴。

然后您的代码示例变为

```
public class A {
    @JsonProperty
    @JsonSerialize
    @JsonDeserialize
    String id;
}

public class B {
    @JsonProperty
    @JsonSerialize
    @JsonDeserialize
    String id;
} 
```

我意识到这并不是你真正想要的，但它是一个开始。

# compression - MsgPack 用于压缩 json 数据，为什么不使用 gzip/deflate？

> ID：12921821
> 
> 赞同：19
> 
> 时间：2012-10-16T19:10:17.493
> 
> 标签：compression, gzip, deflate, msgpack

我听说了一些关于[MsgPack](http://msgpack.org/)可用于压缩 json 消息的信息，但我有一个问题，为什么不简单地使用 Gzip/Deflate 而不是 MsgPack？我认为调试也更好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-17T08:43:12.190

msgpack 是一种*高效的二进制序列化格式*，您可能希望根据您的用例选择它作为 JSON 的替代方案。

即使它被宣传为*像 JSON，但又快又小*，它**也不**是为了*压缩 JSON 数据*。再次将其视为一种替代方案，并请记住，正如其作者所说：

> 在许多情况下，它根本无法为 JSON 提供足够的优势

我强烈建议您阅读这篇文章 -[我对 MessagePack 的看法](https://gist.github.com/2908191)，由 msgpack 的作者撰写，其中包括您需要了解的所有内容与推荐的 msgpack 用例、优点/缺点以及与 msgpack 和 JSON 相关的其他有用指针。

# html - 在 CSS 中定位一个类的多个元素

> ID：12921826
> 
> 赞同：0
> 
> 时间：2012-10-16T19:10:37.527
> 
> 标签：html, css, css-selectors

我正在尝试选择具有特定类的表的多个元素。什么是正确的方法，因为我不相信我在下面的示例中做对了？我希望 .myTable 类的 th 和 td 都应用指定的样式。

请记住，我可能想在其他地方做类似的事情，例如，所有的 p 和 div 的跨度与类 .myDiv 具有蓝色或类似的背景颜色。所以不是特定于表的解决方案。

```
.myTable th, td
{
    border: 1px;
    border-color: #D3D3D3;
    text-align: left;
    padding-left: 10px;
} 
```

编辑：我很抱歉，因为我意识到这个问题并不清楚。在我的情况下，元素`th`和`td`是 a`table`类的子级`.myTable`。在我的场景中，`th`and`td`元素没有任何类直接应用于它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:12:14.240

你需要这个（`.myTable`之前添加`td`）：

```
.myTable th, .myTable td
{
    border: 1px;
    border-color: #D3D3D3;
    text-align: left;
    padding-left: 10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:13:24.617

这是你想要的？

```
th.myTable, td.myTable {
    border: 1px;
    border-color: #D3D3D3;
    text-align: left;
    padding-left: 10px;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:15:49.913

你几乎拥有它。

```
.myTable th, .myTable td 
```

您正在做的是选择 .myTable 中的所有 th 标签和页面上的所有 td 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:13:05.373

如果 .myTable 类是 th 和 td 的父类，则必须使用 .myTable th、.myTable td。如果这是正确的，它应该工作。我还认为您应该阅读一些有关 CSS 中的“特异性”的信息。如果您正在编辑主题或模板文件，有时这种事情不会起作用，因为另一个规则比您的更“具体”。例如，ID 比类更具体。检查一下，它将避免将来给您带来问题！

# html - 如何用CSS和HTML实现如下导航

> ID：12921830
> 
> 赞同：1
> 
> 时间：2012-10-16T19:10:52.033
> 
> 标签：html, css

我正在尝试实现这样的导航系统：

![在此处输入图像描述](../Images/205bce37ccab6b7c2c24ac7ffd4f5553.png)

我尝试从像这样的简单 HTML 和 CSS 结构开始，但直到现在才成功。

```
 <div id="categoryWrapper">
            <ul>
                <li><a href="#"><img src="/assets/sample.png"><span>Diyet</span></a></li>
                <li><a href="#"><img src="/assets/sample.png"><span>Diyet</span></a></li>
                <li><a href="#"><img src="/assets/sample.png"><span>Diyet</span></a></li>
            </ul>
    </div>

#header #center #categoryWrapper ul{
    width:300px;
    margin:0 auto;
    height: 100%;

}

#header #center #categoryWrapper ul li{
    display:inline-block;
    height:54px;
    list-style-type: none;
}

#header #center #categoryWrapper ul li a{
    display:inline-block;
    position:relative;
}

#header #center #categoryWrapper ul li a img{
    position:absolute;
    top:-2px;
} 

#header #center #categoryWrapper ul li span{
    display:inline-block;
    position:relative;
    top:10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:24:48.733

这是一个演示：http: [//jsbin.com/uruqur/1/edit](http://jsbin.com/uruqur/1/edit)

基本造型是

```
#categoryWrapper ul { 
  margin: 0; 
  padding: 0;  /* reset margin/padding */
  text-align: center;
}

#categoryWrapper li { 
 display: inline-block;
} 
```

然后最重要的是，您可以添加任何需要的填充/颜色来匹配您的设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:20:25.930

你试过`<div>`里面`<li>`吗？
像这样的东西（未经测试）：

```
<ul>
<li>

<div id="image"><a href="#"><img src="/assets/sample.png"/></a></div>
<div class="clear"></div>
<div id="text"><a href="#">Diyet</a></div>

</li>
</ul> 
```

```
#image{
float:none;
margin:0 auto; //for center alignment but you have to define the width
position:relative;
width:20px; //your img width here
}

#text{
float:none;
margin:0 auto;
position:relative;
width:30px; //your text width here
}

ul,
li{
margin:0;
padding:0;
}

.clear{
clear:both;
} 
```

让我们知道它是否有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T19:21:19.947

试试这个 -[**演示**](http://jsfiddle.net/7Zz3Y/)

```
#categoryWrapper ul{
    width:300px;
    margin:0 auto;
    height: 100%;
    background: #333;
    padding: 10px 0 5px;
}

#categoryWrapper ul li {
    display:inline-block;
    height:54px;
    list-style-type: none;
    width: 70px;
    text-align: center;
}

#categoryWrapper ul li a{
    display:inline-block;
    color: #fff;
    text-decoration: none;
}

#categoryWrapper ul li span{
    display:block;
    margin-top: 5px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:21:58.340

你可以这样做：

```
 <div id="categoryWrapper">
            <ul>
                <li><a href="#"><img src="/assets/sample.png"><span>Diyet</span></a></li>
                <li><a href="#"><img src="/assets/sample.png"><span>Diyet</span></a></li>
                <li><a href="#"><img src="/assets/sample.png"><span>Diyet</span></a></li>
            </ul>
    </div>

#categoryWrapper {
    position:relative;
    width:363px;
    height:59px;
    padding:0 15px;
    background-color:#414141;
}

#categoryWrapper ul li {
    display:block;
    float:left;
    margin-left:25px;
    /** for test without image **/
    height:50px;
    width:50px;
    background-color:red;
} 
```

# cocos2d-iphone - Cocos2D 忽略一个 CCAction

> ID：12921833
> 
> 赞同：0
> 
> 时间：2012-10-16T19:11:11.193
> 
> 标签：cocos2d-iphone, ccaction

我试图`CCMoveTo`在我的精灵上运行两个动作，如下所示：

```
[mySprite runAction:moveUp];
[mySprite runAction:moveRight]; 
```

我知道我可以将此运动组合成一个单独的运动，`CCMoveTo`但是将它们分开有一些好处（例如，我可以独立地反转 x 或 y 运动）。

不幸`moveUp`的是完全被忽略了。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:54:20.923

您不能在同一节点上运行多个 CCMoveTo。相同类型的其他操作完全覆盖任何先前操作的结果。运行两个 CCRotate*、CCScale* 等操作也是如此。

如果您希望能够反转方向，或者在一般情况下灵活移动，那么根本不要使用 CCMove* 动作。它们不是为游戏目的而设计的。

相反，使用计划更新并根据速度手动更新位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:23:13.313

使用 CCSpawn 动作，它允许你同时运行两个动作[http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_spawn.html](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_spawn.html)

# spring - 从 spring 上下文创建 spring bean 后的 Spring set 属性

> ID：12921836
> 
> 赞同：1
> 
> 时间：2012-10-16T19:11:19.217
> 
> 标签：spring

我有一个如下的弹簧数据源，在具有自己的弹簧上下文的核心模块中，我不想设置 maxActivetime

```
<bean id="wssModelDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="net.sourceforge.jtds.jdbcx.JtdsDataSource"/>
    <property name="url" value="com.wss.jdbc.ConnectionUrl=jdbc:jtds:sqlserver://x-x2/x_control_QA;appName=wss;sendStringParametersAsUnicode=false;loginTimeout=20;socketTimeout=180"/>
    <property name="username" value="xxx"/>
    <property name="password" value="xxx"/>
  </bean> 
```

我有依赖模块，它依赖于核心模块，它有自己的 spring 上下文，在这个组件中我想设置数据源 maxIdle 时间

```
<property name="wssModelDataSource.maxIdle" value="40"/> 
```

还有许多其他模块也依赖于 wssModelDataSource 但我不想为它们更改 maxIdle 时间。

我的问题是，如果我把它放在`<property name="wssModelDataSource.maxIdle" value="40"/>`spring 上下文文件的根目录下，它会给我错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:26:00.373

您可以改为这样做：

定义一个带有通用 props 的抽象基 bean：

```
<bean id="baseDatasource" abstract="true" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="net.sourceforge.jtds.jdbcx.JtdsDataSource"/>
    <property name="url" value="com.wss.jdbc.ConnectionUrl=jdbc:jtds:sqlserver://x-x2/x_control_QA;appName=wss;sendStringParametersAsUnicode=false;loginTimeout=20;socketTimeout=180"/>
    <property name="username" value="xxx"/>
    <property name="password" value="xxx"/>

  </bean> 
```

现在定义您的子数据源，并根据需要进行特定修改：

```
<bean id="wssModelDataSource" parent="baseDatasource">
    <property name="maxIdle" value="40">
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:02:07.923

```
<bean class="com.wss.spring.DataSourcePropertyOverrider" >
    <property name="maxIdle" value="#{com.wss.jdbc.MaximumIdleConnections}"/>
    <property name="minIdle" value="#{com.wss.jdbc.MinimumIdleConnections}"/>
    <property name="initialSize" value="#{com.wss.jdbc.InitConnectionSize}"/>
      </bean> 
```

创建 BeanFactoryPostProcessor 实现并覆盖 postProcessBeanFactory 方法

```
public class DataSourcePropertyOverrider implements BeanFactoryPostProcessor {

    private int maxIdle;
    private int minIdle;
    private int initialSize ;
    /**
     *
     * @param beanFactory
     * @throws BeansException
     */
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {
        BasicDataSource dataSource  = (BasicDataSource)beanFactory.getBean("wssModelDataSource");

        if(dataSource != null){
            dataSource.setMaxIdle(maxIdle);
            dataSource.setMinIdle(minIdle);
            dataSource.setInitialSize(initialSize);
        }

        //To change body of implemented methods use File | Settings | File Templates.
    }

    public int getMaxIdle() {
        return maxIdle;
    }

    public void setMaxIdle(int maxIdle) {
        this.maxIdle = maxIdle;
    }

    public void setMinIdle(int minIdle) {
        this.minIdle = minIdle;
    }

    public int getMinIdle() {

        return minIdle;
    }

    public int getInitialSize() {
        return initialSize;
    }

    public void setInitialSize(int initialSize) {
        this.initialSize = initialSize;
    }
} 
```

# android - 如何加快 AutoCompleteTextView 下拉列表？也许与哈希表？

> ID：12921838
> 
> 赞同：0
> 
> 时间：2012-10-16T19:11:32.253
> 
> 标签：android, hashtable, autocompletetextview

我有一个包含 2000 多个字符串的数组的 AutoCompleteTextView。所有这些字符串的下拉列表太慢了。

是否存在加快下拉列表的方法？也许使用哈希表？

我在谷歌上找不到任何关于此的内容。

谢谢

# bash - 仅删除括号内的数字

> ID：12921839
> 
> 赞同：1
> 
> 时间：2012-10-16T19:11:33.903
> 
> 标签：bash, sed

如何仅删除括号内的数字？例如，我有以下文本：

```
This is 14 April [988] text.. 
```

我想删除`[988]`并`14`保持原样。

到目前为止我已经尝试过：

```
sed 's@\[[0-9]\]@@g' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:20:16.533

您可以使用：

在 Mac 上：

```
sed -E 's@\[[0-9]+\]@@g' 
```

在 Linux 上：

```
sed -r 's@\[[0-9]+\]@@g' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T19:15:19.297

您需要启用*重复*（多个）数字字符才能完成这项工作 - 就目前而言，您的正则表达式将仅删除一位数字。如果您想要由至少一个（一个或多个）数字字符组成的数字，请尝试

```
sed -E 's/\[[0-9]+\]//g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:15:06.830

这应该有效（添加了转义的`+`）

```
sed 's@\[[0-9]\+\]@@g' 
```

# javascript - 删除日期框验证

> ID：12921841
> 
> 赞同：0
> 
> 时间：2012-10-16T19:11:44.060
> 
> 标签：javascript, jquery

如何删除脚本中的 JQuery 验证？我有 2 个日期框，无法删除“必需”的东西，也无法禁用此字段。我试过了，`removeClass("required", true)`还有`document.getElementById("#element").disabled= true`。请指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:13:10.070

请试试这个：

但元素应该是 id。

```
document.getElementById("element").disabled= true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:05:58.323

我用这行解决了它：

```
("element").datebox((disabled:true));
("element").datebox((required:false)); 
```

# math - 通过像素数学计算移动条

> ID：12921843
> 
> 赞同：0
> 
> 时间：2012-10-16T19:11:56.950
> 
> 标签：math, pixel, bar-chart, pixels

我有一个最大高度为 500 像素的条形图。该图表本身的价格从 0 美元到 1050 万美元不等。

我可以每 1 个像素移动一次条。我正在尝试计算能够以 100 万美元的价格移动柱状图。

我已经尝试过 10500000 / 500 ，它只产生了 21000 ，远远超出了 500px 的限制。

所以数学大师......数学应该是什么？:o)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:20:46.400

如果您希望图表一直到顶部 500 像素，则应为：

```
500 pixels / 10.5 million = 48 pixels / million 
```

如果您想在顶部留出一些空间，只需将分母增加到您希望最大值的位置，例如：

```
500 pixels / 12 million = 42 pixels / million 
```

（你的计算是对的，它只是给你 $ / 像素，而我认为在这里以像素 / 百万美元来考虑更方便）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:26:18.813

> 以美元为单位的条形长度 / 以像素为单位的条形长度 = 10,500,000 美元 / 500 像素

交叉乘以得到：

> 以美元为单位的条形长度 * 500 像素 = 以像素为单位的条形长度 * 10,500,000 美元

除以获取“以像素为单位的条形长度”：

> 以像素为单位的条形长度 = 以美元为单位的条形长度 * 500 像素 / $10,500,000

现在只需插入您想要获得像素值的任何货币价值。例如，如果你希望酒吧是 300 万美元，

> 条形长度（以像素为单位） = 3,000,000 美元 * 500 像素 / 10,500,000 美元 = 143 像素

# git - .tmux.conf：更新面板焦点上的状态命令

> ID：12921852
> 
> 赞同：5
> 
> 时间：2012-10-16T19:12:31.300
> 
> 标签：git, bash, shell, tmux

我的 .tmux.conf 中有一行，它简单地显示了我所在的 git 分支。

`set -g status-right ' #[bg=colour33] Branch #[(git branch)] '`

在 tmux 中工作时，我经常在不同的目录中有面板。所以我的问题变成了，有没有办法让状态命令根据我的“面板的 cwd”重新执行，而不是它现在正在做的事情，它似乎只是保留了我第一次打开 tmux 时所在的目录.. ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-05T07:17:04.537

在较新版本的 tmux 中，您可以使用它`pane_current_path`来实现：

```
set -g status-right '#(cd #{pane_current_path}; git rev-parse --abbrev-ref HEAD)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:45:34.530

请参阅此答案 - [Tmux 中的窗格标题](https://stackoverflow.com/questions/9747952/pane-title-in-tmux)- 您可能需要覆盖`chpwd`每当您更改 bash/zsh 中的工作目录时调用的函数。

# php - 资产 css 图像消失了

> ID：12921854
> 
> 赞同：-1
> 
> 时间：2012-10-16T19:12:40.450
> 
> 标签：php, symfony, yui-compressor

我有这张图片： Symfony/web/bundles/BackendBundle/images/main.png

我为这种风格启用了 yui 压缩器：Symfony/web/bundles/BackendBundle/images/main.css，它很好。

我在 config.yml 中有这个：cssrewrite:~

但是 main.css 的图像不起作用，为什么？

我尝试这种不同的格式：

```
background-image: url(/bundles/BackendBundle/images/main.png);
background-image: url(bundles/BackendBundle/images/main.png);
background-image: url(../images/main.png); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:31:40.560

我找到了解决方案，我回答了我的问题： {% stylesheets "bundles/BackendBundle/css/*" filter=" **cssrewrite,** yui_css" %} 我把 cssrewrite 放在资产声明和相对路径中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:19:01.657

CSS 文件与图像位于同一目录中，您只需调用：

```
background-image: url('main.png'); 
```

此外，您没有在上面列出“main_bg2.png”已上传，只有 main.png。您可能会丢失您尝试使用 CSS 调用的文件 - 如果没有，请上传它们。有时，对于同一个文件名的多个扩展名，事情会变得混乱。

# python - 使用类字典映射到 Python 中的实例方法

> ID：12921857
> 
> 赞同：12
> 
> 时间：2012-10-16T19:12:55.637
> 
> 标签：python, dictionary, control-flow

我有一个很长的 if-elif 链，如下所示：

```
class MyClass:
    def my_func(self, item, value):
        if item == "this":
            self.do_this(value)
        elif item == "that":
            self.do_that(value)
        # and so on 
```

我觉得这很难阅读，所以我更喜欢使用字典：

```
class MyClass:
    def my_func(self, item, value):
        do_map = {
            "this" : self.do_this,
            "that" : self.do_that,
            # and so on
        }

        if item in do_map:
            do_map[item](value) 
```

每次调用函数时都重新创建地图是愚蠢的。如何重构此类，以便为所有实例只创建一次字典？我可以以某种方式`do_map`变成一个类成员，但仍然映射到实例方法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T19:14:21.120

你有很多选择！

您可以在方法中初始化地图`__init__`：

```
def __init__(self):
    self.do_map = {"this": self.do_this, "that": self.do_that} 
```

`self`现在，由于已在实例上查找方法，这些方法已绑定到。

或者，您可以使用 string-and-getattr 方法，这也可以确保绑定方法：

```
class Foo(object):
    do_map = {"this": "do_this", "that": "do_that"}

    def my_func(self, item, value):
        if item in self.do_map:
            getattr(self, self.do_map[item])(value) 
```

[`__get__`或者您可以使用描述符协议方法](https://docs.python.org/3/reference/datamodel.html#object.__get__)手动将类级别字典中的函数绑定到您的实例：

```
class Foo(object):
    def do_this(self, value):
        ...

    def do_that(self, value):
        ...

    # at class creation time, the above functions are 'local' names
    # so can be assigned to a dictionary, but remain unbound
    do_map = {"this": do_this, "that": do_that}

    def my_func(self, item, value):
        if item in self.do_map:
            # __get__ binds a function into a method
            method = self.do_map[item].__get__(self, type(self))
            method(value) 
```

这就是`self.method_name`引擎盖下的作用；在类层次结构中查找`method_name`属性并将其绑定到方法对象中。

或者，您可以`self`手动传入：

```
class Foo(object):
    def do_this(self, value):
        ...

    def do_that(self, value):
        ...

    # at class creation time, the above functions are 'local' names
    # so can be assigned to a dictionary, but remain unbound
    do_map = {"this": do_this, "that": do_that}

    def my_func(self, item, value):
        if item in self.do_map:
            # unbound functions still accept self manually
            self.do_map[item](self, value) 
```

你选择什么取决于你对每个选项的感觉有多舒服（开发人员的时间很重要！），你需要多久进行一次查找（每个实例一次或两次，或者这些调度是否在每个实例中完成了很多？然后也许将绑定方法放入预先缓存映射的`__init__`方法），以及这需要多么动态（您是否经常将其子类化？然后不要将映射隐藏在方法中，这无济于事）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:35:37.680

我的（未经测试）采取，有一点缓存：

```
class Something(object):
    def __init__(self):
        self.__do_map = {}

    def my_func(self, item, value):
        self.__do_map.setdefault(item, getattr(self, 'do_{}'.format(item)))(value) 
```

OTOH，您可以获得未绑定的方法，然后将 self 作为第一个实例显式传递...

```
class Something(object):
    _do_methods = {}
    def __init__(self:
        pass

    def my_func(self, item, value):
        ubf = Something._do_methods.setdefault(item, getattr(Something, 'do_{}'.format(item)))
        ubf(self, value)

    def do_test(self, value):
        print 'test is', value 
```

# javascript - 作用于 DOM 元素

> ID：12921861
> 
> 赞同：3
> 
> 时间：2012-10-16T19:13:06.660
> 
> 标签：javascript, jquery

我只是想清理一些 jQuery，并不能完全弄清楚将 jQuery 调用范围限定为特定 dom 元素的调用是什么。举个例子，我有以下代码：

```
$('#outer-element .first-class').html('wanna');
$('#outer-element .second-class').html('scope');
$('#outer-element .third-class').html('better'); 
```

我猜将这些第一/第二/第三类调用中的每一个调用到一个常见的外部元素调用是一种更优雅的方法，我只是不确定这样做的语法是什么。我猜是这样的

```
$('#outer-element').SOMETHINGGOESHERE(function() {
  $(this).find('.first-class').html('wanna');
  $(this).find('.second-class').html('scope');
  $(this).find('.third-class').html('better');
}); 
```

有任何想法吗？有什么比我上面建议的更优雅的吗？简而言之 - 我知道上面的内容很丑陋。我正在寻找一种更漂亮的 JavaScript 方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:15:29.950

只要代码量是可管理的，我通常将所有内容与穿插的[`.end()`](http://api.jquery.com/end/)调用链接在一起：

```
$('#outer-element')
    .find('.first-class').html('wanna').end()
    .find('.second-class').html('scope').end()
    .find('.third-class').html('better').end(); 
```

如果你这样做，你必须非常小心地`.end()`为每个遍历操作包含一个；出于这个原因，以一种让人想起 Python 的方式使用空格来超越职责范围可能是一个好主意：

```
$('#outer-element')
    .find('.first-class')
        .html('wanna')
    .end()
    .find('.second-class')
        .html('scope')
    .end()
    .find('.third-class')
        .html('better')
    .end(); 
```

最后一个`.end()`不是必需的，但如果代码被修改，它可能在将来。安全总比后悔好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T19:15:59.590

将对象存储在变量中并在缓存对象中找到它

```
var $this = $('#outer-element');

  $this.find('.first-class').html('wanna');
  $this.find('.second-class').html('scope');
  $this.find('.third-class').html('better'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T19:15:55.450

您可以缓存对象：

```
var $outer = $('#outer-element');
$outer.find('.first-class').html('wanna');
$outer.find('.second-class').html('scope');
$outer.find('.third-class').html('better'); 
```

# jquery - ajax返回值

> ID：12921862
> 
> 赞同：0
> 
> 时间：2012-10-16T19:13:10.223
> 
> 标签：jquery, ajax, post

我正在做噩梦试图做到这一点。到目前为止，我一定已经尝试了大约 15 种不同的方法，这些方法来自我读过的不同帖子，但都失败了。

我只是想从 ajax 帖子中获取返回值。这是我的代码

```
var test = compareNew(this.name, "remove");
alert(test);

function compareNew(obj, action) {
  $.ajax({
    url: "AJAX_compare_server.php",
    type: 'post',
    data: {
      compare_id:  obj,
      action:   action
    },
      success: function (result) {
      var myObject = eval("(" + result + ")");
      alert(myObject.html);
      return(result);
    }
  });
} 
```

警报（myObject.html）；正确地向我显示了返回的 html 但警报（测试）；显示“未定义”。我已经花了几个小时在这上，但无法弄清楚。你能看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:32:12.850

实际上`return`在`asynchronous`调用中不起作用，但如果你设置`async:false`了它就会起作用，在这种（同步调用）情况下，你可以试试这个

```
function compareNew(obj, action) {
    $.ajax({
        url: "AJAX_compare_server.php",
        type: 'post',
        data: {
            compare_id:  obj,
            action:   action
        },
        success: function(result) { 
            returnresult(result); // will call the function and will alert
        }
    });
}

function returnresult(ret){
    // Do whatever you want to do with the result
    if(ret) alert(ret);
}
compareNew(this.name, "remove"); 
```

你也可以像这样使用它

```
function compareNew(obj, action, callBack) {
    $.ajax({
        //...
        success: function(result) { 
            callBack(result);
        }
    });
} 
```

并称它为

```
compareNew(this.name, "remove", function(data){
    alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:28:12.017

函数只会返回值。你应该使用 ajax 的 return out .....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:22:56.853

将 async 设置为 false，然后在成功语句中设置返回值。在您的方法结束时（在您的 ajax 请求之外），返回 retVal。

```
function compareNew(obj, action) {
  var retVal;
  $.ajax({
    url: "AJAX_compare_server.php",
    type: 'post',
    data: {
      compare_id:  obj,
      action:   action
    },
    async: false,
    success: function (result) {
      var myObject = eval("(" + result + ")");
      retVal = myOBject.html;
      alert(myObject.html);
    }
  });
  return retVal;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:20:22.877

Ajax 是异步的，因此`alert(test);`在 ajax 调用的结果完成之前执行。这就是你不确定的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:29:56.587

如果您有 Firefox 进行测试，您可以通过将警报转换为 console.log() 来了解异步调用的工作原理；并打开控制台。这将向您显示您正在转储的文本，并为您的 ajax 帖子提供可视化的表示（以及即将到来的数据）。您可以看到 test var 是如何立即执行的，顺便说一句，如果您希望 test 至少被定义，请尝试让 compareNew 返回“something”；在底部，好像 ajax 甚至不存在。

```
var test = compareNew(this.name, "remove");
console.log(test);

function compareNew(obj, action) {
  $.ajax({
    url: "AJAX_compare_server.php",
    type: 'post',
    data: {
      compare_id:  obj,
      action:   action
    },
      success: function (result) {
      var myObject = eval("(" + result + ")");
      console.log(myObject.html);
      //return(result); //this line isn't gonna do anything.
    }
   return "something";
  });
} 
```

`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T19:31:57.673

您无法从异步调用（如 AJAX 请求）中获取返回值。原因是等待响应的代码在收到响应时已经执行。解决方案是在`success:`回调中运行必要的代码。

```
function compareNew(obj, action) {
  $.ajax({
    url: "AJAX_compare_server.php",
    type: 'post',
    data: {
      compare_id:  obj,
      action:   action
    },
      success: function (result) {
        // Run the code here that needs
        //    to access the data returned
        return result;
    }
  });
} 
```

或者你可以在`success:`回调中调用另一个函数

```
function compareNew(obj, action) {
      $.ajax({
        url: "AJAX_compare_server.php",
        type: 'post',
        data: {
          compare_id:  obj,
          action:   action
        },
          success: function (result) {
            callFuction(result)
            return result;
        }
      });
    } 
```

你也可以让它同步。你需要`async:false`让它发生。

```
function compareNew(obj, action) {
var return_this;
$.ajax({
url: "AJAX_compare_server.php",
type: 'post',
async: false,
data: {
  compare_id:  obj,
  action:   action
},
success: function (result) {
            return_this = result;
    }
  });
return return_this;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T19:17:24.577

ajax 调用是异步的。一旦启动，javascript 将继续执行并且您的函数退出。成功处理程序中的 return 语句是对该匿名函数的返回，而不是对 compareNew 函数的返回语句。`undefined`是我希望从您的脚本中得到的结果。

您可能应该做的是让成功函数调用您定义的另一个函数，并且该函数应该对从您的 ajax 调用返回的值执行工作。

如果您希望您的方法是同步的，您可以设置一个选项（可能是您已经尝试过的选项之一）。在您的成功处理程序中，将一个作用于您的函数的变量设置为您要返回的值，然后在 ajax 方法调用之后，返回该值。我建议不要这样做，因为使 ajax 调用同步会阻止任何其他 javascript 在调用等待返回时执行，这通常会导致用户体验不佳。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T19:17:47.770

这里需要注意两点。

1.  您的 ajax 调用是异步的，这意味着它完全有可能在`alert(test)`运行后返回。
2.  `return (result)`不是从`compareNew`. 它从`success`您创建的函数返回

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-16T19:17:57.080

您**不能**从 Ajax 获得返回值..

它是异步的

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-16T19:18:01.883

你正在使用`return`作为一种方法

正确的是：

```
return result; 
```

# xcode - 如何在 Interface Builder 中删除 Xcode 中的垂直指南？

> ID：12921864
> 
> 赞同：16
> 
> 时间：2012-10-16T19:13:15.990
> 
> 标签：xcode, interface-builder

我使用“编辑器->添加垂直指南”在我的 nib 文件中添加了垂直指南。但是，现在我想摆脱它，但我看不到任何选择吗？我对水平指南有同样的问题。帮助！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-16T19:20:10.460

要删除水平或垂直参考线，只需用鼠标选择参考线并将其拖出 Interface Builder 的 nib 视图，然后它将显示一个“噗”的云，然后将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T10:24:03.773

这也适用于我，但必须重新启动 Xcode。没有重新启动“移动”光标由于某种原因没有出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-29T18:03:55.543

请记住将**垂直参考线水平**拖动和**水平参考线垂直**拖出窗口边界然后你应该看到“噗”！

此外，我必须在我的视图中添加一个额外的指南，以使之前添加的那些可见。

# selenium - 如何使用 webdriver 在 IE 中单击选择选项？

> ID：12921867
> 
> 赞同：2
> 
> 时间：2012-10-16T19:13:23.453
> 
> 标签：selenium, webdriver, selenium-webdriver

```
private void select(WebDriver driver, String select_text) {
    System.out.println("Selecting "+select_text+" from drop down menu");
    Select select = new Select(driver.findElement(By.name("roomMenu")));
    select.selectByVisibleText(select_text);
} 
```

该功能在firefox上运行良好，但在IE中运行时，它不会点击任何选项。有没有一种特定的方式我必须为 IE 做这件事？

编辑：
我在不使用 Select 对象的情况下重写了它，它仍然拒绝单击该选项。

```
private void select(WebDriver driver, String select_text) {
    System.out.println("Selecting "+select_text+" from drop down menu");

    WebElement select = driver.findElement(By.name("roomMenu"));
    List<WebElement> options = select.findElements(By.tagName("option"));

    for (WebElement option : options) {
        if (option.getText().equals(select_text)) {
            System.out.println(option.getText());
            option.click();
        }
    }
} 
```

它打印出正确的选项，所以我知道它找到了正确的选项，但是当我执行 option.click() 时，IE 中没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:37:02.827

我用 -

```
private boolean selectFromDropDown(String locator, String value) {
    try {
        new Select(driver.findElement(By.xpath(locator))).selectByVisibleText(value);
        return true;
    }
     catch (Exception e) {
            verificationErrors.append(e.toString());
            System.out.println("Could not find element");
            return false;
        }
} 
```

在 IE 中也可以正常工作！[从这里](https://stackoverflow.com/questions/6430462/how-to-select-get-drop-down-option-in-selenium-2)得到它。

# opencv - 如何在 JavaCV 中移动 Cvmat 的元素

> ID：12921868
> 
> 赞同：1
> 
> 时间：2012-10-16T19:13:25.637
> 
> 标签：opencv, shift, javacv

及时我正在写一个小`seam-carving`应用程序

我的问题是以有效的方式从图像中删除检测到的“接缝”。

我有以下代码：

```
 private void removePathFromImageV(CvMat img, int[] path){

    int band = 3;

    double ch = 0.0;
        for (int y = 0; y < img.rows()-1; ++y){
            for (int x = path[y]-1; x < img.cols()-1; ++x){

                for (int b = 0; b < band; ++b){
                ch = img.get(y,x+1,b);
                img.put(y,x,b,ch);
            }
        }
    }

} 
```

有没有将元素从 path[y]-1 转移到 img.cols()-1 的选项？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:45:00.743

您的问题是您必须为每一行抑制不同位置的像素，并且具有执行此操作的图像结构效率不高，因为您必须在删除的像素之后移动所有像素。您可以尝试将整个图像转换为对删除操作有效的数据结构，例如在 C++ 中`std::deque`，一个带有随机访问迭代器的双端队列。然后，您可以轻松地抑制每一行中的元素。最后，您可以从结构复制回正确的图像。

这是C++中的想法

```
// assuming image is a CV_8UC3 image
std::deque<std::deque<cv::Vec3b> > pixelsDeq(image.rows, std::deque<cv::Vec3b>(image.cols));
for (int i = 0; i < image.rows; ++i)
  for (int j = 0; j < image.cols; ++j)
    pixelsDeq[i][j] = image.at<cv::Vec3b>(i, j);

// then remove pixels from the path (remove sequentially for all the paths you probably have)
  for (int j = 0; j < image.rows; ++j) {
    pixelsDeq[j].erase(pixelsDeq[j].begin() + paths[j]);

// at the end, copy back to a proper image
cv::Mat output = cv::Mat::zeros(pixelsDeq.size(), pixelsDeq[0].size(), CV_8UC3);
for (int i = 0; i < output.rows; ++i) {
  for (int j = 0; j < output.cols; ++j) {
    output.at<cv::Vec3b>(i,j) = pixelsDeq[i][j];
  } 
} 
```

# bash - 解析子目录中的文件

> ID：12921873
> 
> 赞同：0
> 
> 时间：2012-10-16T19:13:39.250
> 
> 标签：bash, sh

我将 Zarafa 用作 XMail 服务器的组件（仅用于测试目的）。要将邮件导入 Zarafa 系统，需要使用名为“zarafa-dagent”的二进制文件对其进行解析。

文件夹结构是：`/var/MailRoot/domains/xxxxx.xxx/$user/Maildir/` 这些文件夹有子目录`tmp`，`new`和`cur`。

我的问题是我无法让脚本在 10 或 12 中解析所有电子邮件`$userdirs`。

这是我当前的脚本：

```
userlist=`ls /var/MailRoot/domains/xxx.xx/`
filelist="/var/MailRoot/domains/xxx.xx/$userlist/Maildir/new/*"

for user in $userlist;
  do
   cd "/var/MailRoot/domains/xxx.xx/"$user"/Maildir/new/";
   "/usr/bin/zarafa-dagent $user -f *"
done 
```

该脚本输出一条关于找不到要解析的文件的消息。

zarafa-dagent 二进制文件需要 2 个参数：1 个用户名，-f file_to_parse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:30:42.977

试试看：

```
userlist=/var/MailRoot/domains/xxx.xx/*
#filelist=/var/MailRoot/domains/xxx.xx/$userlist/Maildir/new/*

for user in $userlist; do
   cd ${userlist%/*}
   /usr/bin/zarafa-dagent ${userlist##*/} -f *
done 
```

`${userlist%/*}`等等是参数*扩展*。`bash`

**一些建议**：

*   `filelist`变量从未在您的脚本中使用
*   不解析`ls`输出
*   阅读有关正确引用的信息
*   受引号保护的 glob 不会被插值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:32:03.503

一方面，您在包含对`zarafa-dagent`;的调用的行周围有引号。我很惊讶它正在被执行。

定义的行`filelist`是错误的，但未使用。

看起来`zarafa-dagent`需要一个包含电子邮件的文件，而不是目录列表。当 shell 扩展该命令时，它将扩展为`/usr/bin/zarafa-dagent someuser -f tmp new cur`. 但它只期望一个参数，并且它可能期望它是一个文件，而不是一个目录，基于[文档](http://linux.die.net/man/1/zarafa-dagent)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:28:55.957

我能看到的唯一错误是调用`zarafa-dagent`. 删除行周围的引号，这应该至少修复一个错误：

```
/usr/bin/zarafa-dagent $user -f * 
```

with 的行`filelist`也是错误的，但没关系，因为它从未使用过。

**编辑：**当它只处理一封电子邮件时，您必须按照@Brian 的建议遍历所有文件：

```
for mail in *; do
    /usr/bin/zarafa-dagent $user -f $mail
done 
```

# java - Google App Engine 后端 servlet 没有响应

> ID：12921874
> 
> 赞同：1
> 
> 时间：2012-10-16T19:13:41.870
> 
> 标签：java, google-app-engine, backend

我构建了一个试图在后端运行的 servlet。但是在启动后端并将发布消息发送到[http://mybackend.myapp.appspot.com/update](http://mybackend.myapp.appspot.com/update)之后，什么都没有出现。
当我访问： http: [//myapp.appspot.com/update](http://myapp.appspot.com/update) servlet 正在工作但不在后端。
我究竟做错了什么？

**小服务程序代码：**

```
public class UpdateServlet extends HttpServlet
{   
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException 
    {
        System.out.println("start long task");              
    }
} 
```

**后端.xml**

```
<backends>
  <backend name="mybackend">
    <class>B1</class>
    <options>
      <dynamic>true</dynamic>
      <public>true</public>
    </options>
  </backend>
</backends> 
```

**web.xml**

```
<servlet>
    <servlet-name>update</servlet-name>
    <servlet-class>server.UpdateServlet</servlet-class> 
</servlet>

<servlet-mapping>
    <servlet-name>update</servlet-name>
    <url-pattern>/update</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:04:45.513

servlet`http://mybackend.myapp.appspot.com/update`发送 HTTP 302 重定向`http://my-life.appspot.com`。所以是你的代码在做这件事。

# java - mac osx，运行带有输出的外部jar

> ID：12921875
> 
> 赞同：0
> 
> 时间：2012-10-16T19:13:44.867
> 
> 标签：java

我正在尝试在 mac osx 中运行一个外部 jar，我想要它的输出并设置一个属性

我的代码：

```
ProcessBuilder pb = new ProcessBuilder();
System.setProperty("user.home", file1);
Console.Out(System.getProperty("user.home"));
ArrayList<String> args = new ArrayList<String>();
args.add("java");
args.add("-jar");
args.add(jarFile);
pb.command(args);
Process p = pb.start();
System.setProperty("user.home", ModMaker.Root + "/MCP/jars");
BufferedReader bf = new BufferedReader(new InputStreamReader(p
        .getInputStream()));
while(bf.readLine() != null)
    ;
if(!new File(somedir).exists()) {
    int result = Joptionpane.showConfirmDialog(Gui.getFrame(),
            "Program isn't installed properly!\n\nRun It again?",
            "Not installed!", JOptionPane.YES_OPTION,
            JOptionPane.WARNING_MESSAGE);
    if(result == 0) {
        runAgain();
    }
} 
```

但是当我运行它时， bf.readLine 立即为空，它说它已停止。但它不是。并且属性在外部过程中没有改变。

编辑：当我在 Windows 中运行它时它工作正常！

# html - 谷歌脚本进入谷歌网站，如何调整大小？

> ID：12921878
> 
> 赞同：0
> 
> 时间：2012-10-16T19:14:09.100
> 
> 标签：html, google-apps-script, google-sites

我正在制作一个脚本，当我将它放在谷歌网站上并按下更改脚本大小的按钮（在 UI 中添加 n 行）时，该网站不适合它的新页面大小，因为我这样做了它会自动调整大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:04:11.930

如果您说 UI 将`n`行添加到小部件，那么您将需要调整小部件本身的大小。由于小部件框架在用户添加行之前加载，因此在页面加载*后*确实无法更改小部件大小。

如果您可以提供有关您的 Apps 脚本功能的更多详细信息，我可能会更改我的答案，但这是我基于小部件在 Google 协作平台上加载方式的一般反馈。

# javascript - 原始像素数据到 PNG 或绘制原始像素数据

> ID：12921880
> 
> 赞同：2
> 
> 时间：2012-10-16T19:14:14.093
> 
> 标签：javascript, html, canvas, png

```
this.terrain = new jaws.Sprite({ x: 0, y: 0, image: this.currentLevel.terrainImage, scale_image: 6 });
var rawTerrain = this.terrain.asCanvasContext();
this.rawPixelData = rawTerrain.getImageData(0, 0, this.terrain.width, this.terrain.height).data; 
```

这是我在 HTML5 游戏上创建新地图的代码。我正在使用 .png 地图。我还提取了它的原始像素数据，以便我可以读取地图中的碰撞和其他内容。

我想实现手榴弹，这些手榴弹实际上会改变地图。我无法更改.png。您如何建议我在不使用另一种地图加载的情况下执行此操作（我想继续使用 .png 地图）？

我的想法是操纵原始像素数据（非常可行）然后绘制它，但我不知道该怎么做。我可以将原始像素数据转换为 .png 然后绘制它吗？

我用 Javascript 寻找 libpng 并找到了 pnglets，但我认为重新制作 png 需要很长时间，而且它只会让游戏冻结很多。

有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:28:25.557

您可以使用`canvas`'`putImageData`方法将原始数据绘制到画布上：

```
this.terrain = new jaws.Sprite({ 
    x: 0, 
    y: 0, 
    image: this.currentLevel.terrainImage, 
    scale_image: 6 
});
var rawTerrain = this.terrain.asCanvasContext();
this.rawPixelData = rawTerrain.getImageData(
    0, 0, this.terrain.width, this.terrain.height
).data;

// modify the pixel data and return updated data..
var modifiedPixelData = modifyPixelData(rawTerrain.getImageData(
    0, 0, this.terrain.width, this.terrain.height
));
// Put the data back into the canvas.
rawTerrain.putImageData(modifiedPixelData, 0, 0) 
```

# php - PHP 或 PHPUnit 自定义函数

> ID：12921881
> 
> 赞同：-2
> 
> 时间：2012-10-16T19:14:14.047
> 
> 标签：php, phpunit

这是我在 PHPUnit 中的自定义函数。

```
protected function checkIfSetGlobalTest($VARIABLE, $ASSIGNMENT) {
    global $VARIABLE;
    if(!isset($VARIABLE) == true) {
        $VARIABLE = $ASSIGNMENT;
    }
} 
```

这是我调用该函数的时间。

```
protected function setUp() {
    $this->checkIfSetGlobalTest("$URL", "http://google.com");
    $this->setBrowser("*firefox");
    $this->setBrowserUrl($URL);

} 
```

我想查看是否设置了变量，如果没有，则将该 URL 分配给该变量。就像下面的代码。

```
global $URL;
if(!isset($URL) == true) {
    $URL = "http://google.com";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:19:42.847

听起来你需要[变量。](http://php.net/manual/en/language.variables.variable.php)

您可以像这样使用此功能：

```
protected function checkIfSetGlobalTest($VARIABLE, $ASSIGNMENT) {
    $VARIABLE = ltrim($VARIABLE, '$');
    global $$VARIABLE;
    if(!isset($$VARIABLE) == true) {
        $$VARIABLE = $ASSIGNMENT;
    }
} 
```

或者只使用[$GLOBALS superglobal](http://www.php.net/manual/en/reserved.variables.globals.php)：

```
protected function checkIfSetGlobalTest($VARIABLE, $ASSIGNMENT) {
    $VARIABLE = ltrim($VARIABLE, '$');
    if(!isset($GLOBALS[$VARIABLE]) == true) {
        $GLOBALS[$VARIABLE] = $ASSIGNMENT;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:17:08.123

您需要通过引用传递第一个变量，以便在您的函数中对其进行修改：

```
protected function checkIfSetGlobalTest(&$VARIABLE, $ASSIGNMENT) 
```

此外，您不应在传递时传递引用的变量，否则它将传递值。

```
$this->checkIfSetGlobalTest($URL, "http://google.com"); 
```

这样做，您将不需要`global`在您的函数中使用来检查它是否已设置。

# perl - 无法在 windows 环境中生成与 perl 中输入相同的俄语字符

> ID：12921882
> 
> 赞同：0
> 
> 时间：2012-10-16T19:14:16.473
> 
> 标签：perl, character-encoding

我有一组俄语字符串，我将其作为输入传递给 perl 脚本以将其存储到数据库中，但是当我在 Windows 控制台上打印相同的字符串时，我会从输入中获取字符。此外，数据库在列中插入了不同的字符。您能否分享一些有关该问题的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:00:33.023

解码输入。编码输出。

* * *

数据库中数据的编码是什么？

说它是UTF-8。您将使用以下内容：

```
use Encode qw( decode );
my $row = ...;
$row->{text_field} = decode('UTF-8', $row->{text_field}); 
```

* * *

您的控制台期望的编码是什么？

`chcp`您可以通过在提示符处运行并添加`cp`到数字来找到答案。例如，在要使用的编码为 的机器上`cp437`，您将获得以下输出：

```
>chcp
Active code page: 437 
```

您将按如下方式处理编码：

```
use open ':std', ':encoding(cp437)'; 
```

# pentaho - 如何使用 Pentaho Spoon 在每次 INSERT 之前执行 SQL 脚本？

> ID：12921888
> 
> 赞同：2
> 
> 时间：2012-10-16T19:14:25.363
> 
> 标签：pentaho, sap-ase, kettle

我正在尝试使用 Spoon 将数据库从 PostgreSQL 数据库迁移到 Sybase 安装中。

我现在面临的问题是 Sybase 有这种模式，当你想明确设置一个 id 时，你必须启用这种模式。您必须执行命令`SET IDENTITY_INSERT table_name ON`，这将启用为当前连接插入指定 id 的数据。

是否可以设置转换以在“表输出”步骤之前执行该转换，使用将用于插入数据的相同连接？

还是我以错误的方式接近这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:23:56.307

我遇到了这个，这很烦人。我最终做的是为每个要插入身份的表创建一个自定义连接定义。

在自定义连接定义中，有一个高级选项卡。在高级选项卡上，有一个空间可以输入连接后立即执行的自定义 SQL。将您的 SET 语句放在那里，然后在表输出步骤中选择该连接。

这在 Sybase 和 MS SQL Server 中都是很常见的问题，我可能应该将其作为功能请求发布给 Pentaho。

布赖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:28:25.750

如果此 ID 用于数据仓库，您可能需要考虑使用 {Dimension lookup/update} 步骤（在数据仓库文件夹中）为您管理代理键。但是，此步骤非可选地添加行版本控制，如果您不需要它可能会很尴尬。

否则，也许您可​​以使用 {Execute SQL script} 步骤（内联或单独的转换）来发出 {SET} 命令。

# sql - sql server 2008 查询内联

> ID：12921894
> 
> 赞同：0
> 
> 时间：2012-10-16T19:14:47.797
> 
> 标签：sql, sql-server-2008

`select devicename, name, value, timestamp from table1`给了我以下，

```
DEVICENAME     NAME     VALUE    TIMESTAMP
123            CURRENT  130      2012-10-16 13:00:00.000
123            AVG      140      2012-10-16 13:00:00.000
123            MIN      100      2012-10-16 13:00:00.000
123            MAX      160      2012-10-16 13:00:00.000 
```

我如何在 sql 查询中像这样得到它们，

```
123, 130, 140, 100, 160 2012-10-16 13:00:00.000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:28:54.540

`PIVOT`如果你想在单独的列中使用它，你可以使用它：

```
select devicename, [Current], [Avg], [Min], [Max], timestamp
from
(
  select devicename, name, value, timestamp
  from table1
) x
pivot
(
  max(value) 
  for name in ([Current], [Avg], [Min], [Max])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/84c19/2)

如果您希望同一列中的所有值，那么您可以使用以下内容：

```
select devicename,
  STUFF((SELECT distinct ', ' + cast(value as varchar(10))
              from table1 t2
              where t1.DEVICENAME = t2.DEVICENAME
            FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') name,
  timestamp
from table1 t1
group by devicename, timestamp 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/42b2c/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:20:11.423

```
select 
  devicename, 
  MAX(CASE WHEN Name = 'CURRENT' THEN value ELSE NULL END), 
  MAX(CASE WHEN Name = 'AVG' THEN value ELSE NULL END), 
  MAX(CASE WHEN Name = 'MIN' THEN value ELSE NULL END), 
  MAX(CASE WHEN Name = 'MAX' THEN value ELSE NULL END), 
  timestamp 
from table1
GROUP BY devicename, timestamp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T19:16:47.920

您可以将它们连接成一列

```
select a + ' '+ b as Column1 from yourtable 
```

或将它们作为输出变量返回

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:25:53.483

```
SELECT x.devicename, *
FROM 
    (SELECT devicename, value as 'current', timestamp 
    FROM table1 WHERE name = 'current') x 
INNER JOIN 
    (SELECT devicename, value as [avg] FROM table1 WHERE name = 'avg') y 
    ON x.devicename = y.devicename
INNER JOIN (SELECT devicename, value as [min] FROM table1 WHERE name = 'min') z 
    ON x.devicename = z.devicename
INNER JOIN (SELECT devicename, value as [max] FROM table1 WHERE name = 'max') q 
    ON x.devicename = q.devicename 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T20:04:55.153

```
create table table1 (devicename varchar(10)
              ,name varchar(100)
              ,value varchar(10)
              ,TimeSTamp datetime)

INSERT INTO table1 
SELECT '123','CURRENT','130','2012-10-16 13:00:00.000'
UNION
 SELECT '123','AVG','140','2012-10-16 13:00:00.000'
UNION
 SELECT '123','MIN','100','2012-10-16 13:00:00.000'
UNION
 SELECT '123','MAX','160','2012-10-16 13:00:00.000'

select devicename, name, value, timestamp from table1 

SELECT DISTINCT t1.devicename
     , value_list
     , t1.timestamp
  FROM table1 t1
 INNER JOIN (SELECT t2.devicename
                  , t2.timestamp
                  , value_list = SUBSTRING((SELECT t3.value
                                                 + ', '
                                              FROM table1 t3
                                             WHERE t3.devicename = t2.devicename
                                               AND t3.timestamp  = t2.timestamp
                                             ORDER BY t3.value
                                               FOR XML PATH('')),1,LEN((SELECT t3.value
                                                                             + ', '
                                                                          FROM table1 t3
                                                                         WHERE t3.devicename = t2.devicename
                                                                           AND t3.timestamp  = t2.timestamp
                                                                         ORDER BY t3.value
                                                                           FOR XML PATH(''))) -1)
               FROM table1 t2
              GROUP BY t2.devicename
                     , t2.timestamp) t4 on t4.devicename  = t1.devicename
                                       AND t4.timestamp   = t1.timestamp

drop table1 
```

# java - 调整框架大小时，JLabel 的位置变为奇怪的位置

> ID：12921901
> 
> 赞同：3
> 
> 时间：2012-10-16T19:15:15.007
> 
> 标签：java, swing, jframe, jlabel

我只是在做我的个人项目，使用 Swing 绘制基本地图。

我有很多问题，但最糟糕的是`JLable`每次我 s 的位置都会改变

1.  调整框架大小
2.  再次将它们设置为不可见和可见 (setvisible(false)->setvisible(true))
3.  将屏幕移动到另一个选项卡“地图 2”并返回到地图 1（框架有`JTabbedPane`）

很遗憾我没有足够的声誉来上传图片:(

所有`JLable`s 都位于`JPanel`.

就像是

之前
.------------------------------------------------
。 -----------------------------------------------------------
.-- --------标签1-----------------
.------------ ------------------------------------
.------------- ----标签2--------
.------------------------ -----------------------
.---------------------------- -----标签3--------
.------------------------------------ ----------
.---------------------------------------- ---------
.---------------------------------------- --------

在
.------------------------------------------------------------之后
。 ---------标签1 标签2 标签3------------
.------------------------- ---------------------
.---------------------------- ------------------
.-------------------------------------------- -----------------
.-------------------------------- -------------
.------------------------------------ -------------
.------------------------------------ ----------
.---------------------------------------- ---------
.---------------------------------------- --------

我也尝试`setLocation(new Point(x,y));`在调整大小后使用，但没有任何结果。

任何提示将不胜感激。:) ![在此处输入图像描述](../Images/eb94748204c7e265613969436b41bcf7.png) ![在此处输入图像描述](../Images/8d85a05651d6ac61000ff7a111e6e876.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T19:22:13.937

您使用了[绝对定位](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)而没有相应地设置布局。在 存在的情况下刷新显示`FlowLayout`，默认为，会导致您在*之后*`JPanel`看到的布局。使用可能有效，但首选方法是使用预期的[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。*`setLayout(null)`*

# sql - 根据不同表的 2 列更新整个列

> ID：12921907
> 
> 赞同：0
> 
> 时间：2012-10-16T19:15:42.820
> 
> 标签：sql, sql-server-2005, datetime

我在表中添加了一个新列。该表的列是：

```
Identifier(unique identity but not joinable to the other table)
ClinicalID(int)
senttime(datetime)
orgID(int-new column) 
```

我需要根据发送时间从不同的表中更新新列。我应该检查发送时间的日期范围并相应地更新 orgID。另一个表的列：

```
ClinicalIDentifier
org ID(int) 
old orgID(int)
effectivefromtime
effectivethrutime 
```

我面临的问题是，如果发送时间 > 另一个表的有效起始时间，它会显示相同临床 ID 的其他组织 ID，其中发送时间 > 有效起始时间。

我一直在比较日期范围。

如果您需要任何进一步的信息，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:48:05.323

```
WITH CTE AS
(
SELECT
    FirstTable.OrgID NewOrgID,
    SecondTable.OrgID
FROM
    FirstTable
    LEFT JOIN SecondTable 
        ON FirstTable.ClinicalID = SecondTable.ClinicalIndetifier 
        AND FirstTable.SentTime > SecondTable.EffectiveFromTime 
        AND FirstTable.SentTime < SecondTable.EffectiveThruTime
)
UPDATE CTE
    SET NewOrgID = OrgID 
```

我无法从您的问题中看出表名是什么或它们是如何连接的，但我认为应该这样做。要测试 CTE，您应该替换上面的整个`UPDATE`语句，`SELECT * FROM CTE`这将显示每个 NewOrgID 的 NULL，并且 OrgID 将显示将在每一行中填充的值。如果您想确定可以修改 CTE，使其包含 FirstTable 和 SecondTable 中的所有列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:47:57.880

知道了！！

```
select  
case when (effectivethrutime is null and senttime >= effectivefromtime) then orgid  
when (effectivethrutime is not null and senttime >= effectivefromtime) then orgID  
when (effectivethrutime is not null and senttime between effectivethrutime and   effectivefromtime) then orgid  
end as orgid  
from ac  
left join op  
on ac.clinicalidentifier=op.clinicalidentifier  
where ac.senttime>op.effectivefromtime   
and ac.senttime<=isnull(op.effectivethrutime,ac.senttime) 
```

到目前为止，这有效。
让我知道是否需要更正。
谢谢维哈尔
_

# c++ - Mingw libgcc_s_sjlj-1.dll 丢失

> ID：12921911
> 
> 赞同：18
> 
> 时间：2012-10-16T19:15:55.847
> 
> 标签：c++, windows-7, mingw

我正在尝试使用 mingw 在代码块中编译程序。我必须包含 libw2_32.a 我没有得到任何编译器错误。该程序编译得很好，但是当我想运行它时，它说 libgcc_s_sjlj-1.dll 丢失。

我在我的 mingw 安装中搜索了这个 dll，但我找到的唯一 dll 是：libgcc_s_dw2-1.dll

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-16T19:30:50.633

您必须在使用 mingw 的 g++ 编译时使用 -static-libgcc 以消除对 LIBGCC_S_SJLJ-1.DLL 的依赖。您可以通过将 static-libgcc 添加到链接器标志来做到这一点。

我在这篇文章中找到了这个信息： [http ://www.qtcentre.org/threads/39639-MinGW-w64-dependency-on-LIBGCC_S_SJLJ-1-DLL](http://www.qtcentre.org/threads/39639-MinGW-w64-dependency-on-LIBGCC_S_SJLJ-1-DLL)

# towerjs - Tower.js：“工厂‘帖子’不存在”

> ID：12921913
> 
> 赞同：0
> 
> 时间：2012-10-16T19:15:59.397
> 
> 标签：towerjs

使用 Tower 0.4.2-20：我已经按照示例进行了操作，所有代码似乎都已生成，但在运行测试时出现工厂未定义错误。

更加具体：

```
tower new app
cd app
npm install
tower generate scaffold Post title:string body:text
tower generate scaffold User firstName:string lastName:string email:string
npm test 
```

产量：

```
 1) PostsController routes show:

      actual expected

      /posts/undefined

  2) PostsController routes edit:

      actual expected

      /posts/undefined/edit

  3) PostsController #index "before each" hook:
     Error: Factory 'post' doesn't exist.
      at Function.Tower.Factory.options [as get] (/home/jeremy/repos/tower/lib/tower-support/shared/factory.js:84:13)
      at Function.Tower.Factory.factory [as create] (/home/jeremy/repos/tower/lib/tower-support/shared/factory.js:73:17)
      at global.factory (/home/jeremy/test/towapp/test/server.coffee:21:42)
      at Context.get.format (/home/jeremy/test/towapp/test/cases/controllers/server/postsControllerTest.coffee:46:16)
      at Hook.Runnable.run (/home/jeremy/test/towapp/node_modules/mocha/lib/runnable.js:187:15)
      at next (/home/jeremy/test/towapp/node_modules/mocha/lib/runner.js:201:10)
      at Runner.hook (/home/jeremy/test/towapp/node_modules/mocha/lib/runner.js:212:5)
      at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我尝试自己调试它，并从 Github 构建了 Tower 并链接到那个，正如您在上面看到的那样，它正在使用我的存储库版本的 Tower 代码，但我也被困在那里。我不确定制作调试打印/记录语句的正确方法；我已经尝试过 console.log 和 this.debug.log ，在这两种情况下，都没有将日志消息写入控制台或日志文件 - 事实上，日志目录中根本没有创建任何日志。

编辑添加：取得了更多进展。未调用 Tower.Factory.define 方法。Factory 类确实存在：

```
Tower.Factory.define 'post', ->
  title: Tower.random('words') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:00:37.870

一旦我让孩子们上床睡觉，这实际上很容易解决:)。工厂文件根本不包括在内。我将此行添加到我的 test/server.coffee 文件中，它解决了这个问题：

```
app.requireDirectory('./test/factories') 
```

我在其中一个生成器 (tower-generator/server/generators/tower/app/templates/data/seeds.coffee) 中发现了类似的东西，但我不了解生成器，所以不确定这是真的打算在哪里去。

至于console.log - 我只是忽略了它 - 一旦我实际调用define方法就在控制台中:)

# objective-c - 当我想滚动时，Tableview 变空

> ID：12921919
> 
> 赞同：0
> 
> 时间：2012-10-16T19:16:18.763
> 
> 标签：objective-c, ios, uitableview, uiview, uiviewcontroller

我有一个带有自定义表格视图单元格的表格视图。它用数据加载表格视图。但是当我尝试滚动它时它会变空。我正在将此表视图添加到这样的另一个视图中。它在我按下按钮后加载。

```
-(IBAction)chooseFirstController:(id)sender {
    UIViewController *nextController = [[FirstController alloc] initWithNibName:@"FirstController" bundle:nil];
    [self.contentView addSubview:nextController.view];

} 
```

对于我的 tableview，我有这个方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *simpleTableIdentifier = @"StaffCustomCell";
        StaffCustomCell *cell = (StaffCustomCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
        if (cell == nil)
        {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"StafCustomCell" owner:self options:nil];
            cell = [nib objectAtIndex:0];
        }
        Staff *staff = [self.fetchedResultsController objectAtIndexPath:indexPath];

        cell.lblName.text = staff.name;
        cell.lblGeboortePlaats.text = staff.birthplace;
        cell.lblGeboorteDatum.text = staff.birthday;

       return cell;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.fetchedResultsController.sections count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    NSInteger count = [sectionInfo numberOfObjects];

    return count;

}

- (NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = self.fetchedResultsController.sections[section];

    return [sectionInfo name];
} 
```

有人可以帮忙吗？

亲切的问候。

**编辑**

在这里你可以看到我的 staffCustomCell.m

```
#import "StaffCustomCell.h"

@implementation StaffCustomCell

@synthesize lblContract         = _lblContract;
@synthesize lblDebuut           = _lblDebuut;
@synthesize lblFunction         = _lblFunction;
@synthesize lblGeboorteDatum    = _lblGeboorteDatum;
@synthesize lblGeboortePlaats   = _lblGeboortePlaats;
@synthesize lblKinderen         = _lblKinderen;
@synthesize lblName             = _lblName;
@synthesize lblNationaliteit    = _lblNationaliteit;
@synthesize lblPartner          = _lblPartner;
@synthesize lblVorigeClubsS     = _lblVorigeClubsS;
@synthesize lblVorigeClubsT     = _lblVorigeClubsT;
@synthesize imgTrainer          = _imgTrainer;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.backgroundColor = [UIColor blackColor];
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:15:49.203

在您的 IBAction 方法中，您没有使用 nextController 的属性，因此一旦该方法超出范围，它将被释放。为 nextController 创建一个属性（类型为 strong），这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:12:41.790

问题是当您滚动时，它不会重新加载，因为您刚刚添加了 nextController 的视图。一种解决方案是在同一个类中添加 tableview 及其委托方法，然后将其隐藏在 viewdidLoad 中。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableView.hidden = YES;
} 
```

在 IBAction 上

```
tableView.hidden = NO;
[tableView reloadData]; 
```

在某处使用并再次隐藏它之后。希望这能解决你的问题。

# javascript - 将军用时间转换为标准时间

> ID：12921923
> 
> 赞同：-1
> 
> 时间：2012-10-16T19:16:36.907
> 
> 标签：javascript

```
function checkTime(item) {
    if((item.value == "") || (doc.findItem('warning_checkbox').value == '1'))
        return true;
    if(fixtime(item,true,2)) {
        if(item.value/1 < "0800" || item.value > "1700") {
            item.value = "";
            alert("between 8 AM and 5 PM.");
            return true;
        }
    } else {
        item.value = "";
        alert("Invalid Time.  Time must be between 8 AM and 5 PM.");
        return true;
    }
    if(item.value < "0800" && item.value > "1700") {
        item.value = "";
        alert("between 8 AM and 5 PM.");
        return true;
    }
    fixtime(item,true,0);
} 
```

我正在使用此功能将标准时间转换为军用时间，但我不知道如何将军用时间转换为标准时间。一个例子是`1525 = 03:25 pm`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:35:59.810

这应该这样做：

```
function checkTime(item) {
    var time = parseInt(item.value);
    if(isNaN(time) || (doc.findItem('warning_checkbox').value == '1'))
        return true;
    if(fixtime(item,true,2)) {
        if(time > 800 && time < 1700) {
            item.value = "";
            alert("between 8 AM and 5 PM.");
            return true;
        }
    } else {
        item.value = "";
        alert("Invalid Time.  Time must be between 8 AM and 5 PM.");
        return true;
    }
    if(time > 800 && time < 1700) {
        item.value = "";
        alert("between 8 AM and 5 PM.");
        return true;
    }
    fixtime(item,true,0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:18:38.770

您正在尝试将字符串与整数进行比较。您可以使用[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)将字符串转换为整数。如果您没有将数字作为字符串检索，而只是比较两个数字，请跳过引号。

您更新的代码应该是：

```
function checkTime(item) {
    if((parseInt(item.value) == "") || (doc.findItem('warning_checkbox').value == '1'))
        return true;
    if(fixtime(item,true,2)) {
        if((parseInt(item.value) / 1) < 0800) || parseInt(item.value) > 1700) {
            item.value = "";
            alert("between 8 AM and 5 PM.");
            return true;
        }
    } else {
        item.value = "";
        alert("Invalid Time.  Time must be between 8 AM and 5 PM.");
        return true;
    }
    if(parseInt(item.value) < 0800 && parseInt(item.value) > 1700) {
        item.value = "";
        alert("between 8 AM and 5 PM.");
        return true;
    }
    fixtime(item,true,0);
} 
```

# php - 在数组的每个位置获取数组函数加倍值？

> ID：12921939
> 
> 赞同：1
> 
> 时间：2012-10-16T19:18:03.163
> 
> 标签：php, mysql, arrays, fetch

我从这个函数中得到了奇怪的行为。

**输入**

```
 public function fetch_array($result_set) 
{
        $rows = array();
        while ($row = mysql_fetch_array($result_set)) 
        {
            $rows[] = $row;
            print_r($row);
            break;
        }
        return $rows;

} 
```

我已经使该函数运行一次，但它从我的 MySQL 查询结果中复制了一行。

**输出**

```
Array ( [0] => Sarah [first_name] => Sarah [1] => Palin [second_name] => Palin ) 
```

它应该是

**正确输出**

```
Array ( [first_name] => Sarah [second_name] => Palin ) 
```

我用了这个 SO question example

[使用 mysql_fetch_array() 和 foreach() 而不是 while()](https://stackoverflow.com/questions/3442895/use-mysql-fetch-array-with-foreach-instead-of-while)

**不是我的查询或 Mysql 结果错误**

[http://i.imgur.com/CZnIF.png](https://i.imgur.com/CZnIF.png)

![在此处输入图像描述](../Images/23a46ffc4f872c79934935b959f978df.png)

* * *

这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:22:03.277

这不是错误，这是`mysql_fetch_array()` [http://us.php.net/manual/en/function.mysql-fetch-array.php的预期行为](http://us.php.net/manual/en/function.mysql-fetch-array.php)

您可以设置`result_type`标志，也可以直接使用`mysql_fetch_assoc()`。[http://us.php.net/manual/en/function.mysql-fetch-assoc.php](http://us.php.net/manual/en/function.mysql-fetch-assoc.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:20:31.740

使用 mysql_fetch_array 时，向它提供 MYSQL_ASSOC 标志。

编辑：这是您的代码，并进行了适当的更改

```
while ($row = mysql_fetch_array($result_set, MYSQL_ASSOC)) 
```

此外，您可以通过输入 MYSQL_NUM 来仅使用数字索引来获取它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:21:46.880

您得到一个结果并想要另一个结果的原因是因为您将一个数组（$row）推入一个新数组（$rows）中。通过在数组中推一些东西（你使用的括号），你会得到一个自动递增的键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T19:22:12.133

试试这个：

```
$rows['name'] = $row['name'];
$rows['second_name] = $row['second_name']; 
```

...

代替

```
$rows[] = $row; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T19:24:56.487

默认情况下`mysql_fetch_array`，每个数据库列都有两个键——一个是数字键，一个是关联键。您可以这样做来告诉它只获取数字键：

```
mysql_fetch_array($result, MYSQL_NUM); 
```

[http://us2.php.net/manual/en/function.mysql-fetch-array.php](http://us2.php.net/manual/en/function.mysql-fetch-array.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T19:25:41.650

这是完全正常和预期的行为。如果您只想要关联数组，请使用

```
while ($row = mysql_fetch_array($result_set, MYSQL_ASSOC)) 
```

# ruby - 字符串值的 Ruby 多重 OR 求值

> ID：12921940
> 
> 赞同：2
> 
> 时间：2012-10-16T19:18:08.383
> 
> 标签：ruby, refactoring

我想知道在 Ruby 中是否有一种干巴巴的方式来编写以下内容：

```
ext == ".xlsx" || ext == ".xls" || ext == ".ods" 
```

我最初的想法是以下似乎没有按预期工作：

```
ext == ".xlsx" || ".xls" || ".ods" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:19:41.177

就在这里...

```
['.xlsx','.xls','.ods'].include? ext 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T19:21:54.737

```
%w(.xlsx .xls .ods).include? ext 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:30:11.887

```
ext =~ /(.xlsx$)|(.xls$)|(.ods$)/

irb(main):009:0> '.xlsx' =~ /(.xlsx$)|(.xls$)|(.ods$)/
=> 0
irb(main):010:0> '.xlsa' =~ /(.xlsx$)|(.xls$)|(.ods$)/
=> nil 
```

# python - Eclipse 中未解决的导入、urllib2 错误

> ID：12921942
> 
> 赞同：0
> 
> 时间：2012-10-16T19:18:11.067
> 
> 标签：python, eclipse, python-2.7

我刚刚在 Eclipse 中安装了 PyDev，以下行在我身上失败了：

```
import urllib2 
```

因此，为了验证，我以解释器模式（在 Eclipse 之外）打开了 python 并尝试导入 urllib2，它似乎可以工作。

我在 Eclipse 中尝试过`import sys`，这似乎工作正常。

我认为 urllib2 与标准 Python 安装打包在一起。我需要在我的 Eclipse 中设置一个明确的路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:21:39.740

您需要`python.exe`在 Eclipse 中的以下路径中添加路径：-

**Windows** ->**首选项**-> **PyDev** ->**解释器 Python** -> 新建

然后将 Python 主目录中的文件夹列表添加到您的`PYTHON PATH`

# mongodb - 为什么在插入过程中不尊重我的模型名称

> ID：12921945
> 
> 赞同：0
> 
> 时间：2012-10-16T19:18:32.423
> 
> 标签：mongodb, mongoose

我是猫鼬的新手，我试图插入一些数据，但是当我查看rockmongo时，应该是“用户”的模型是“用户”，“统计”是“统计”等等......

以下是架构：

```
var UserSchema = new mongoose.Schema({
    username: String,
    facebook_id: String,
    facebook_token: String,
    img: String,
    email: String,
    created_at: { type: Date, default: Date.now }
});

var StatSchema = new mongoose.Schema({
    user_id: {type: mongoose.Schema.Types.ObjectId, ref: 'User'},
    detail: {
        right: [{type: mongoose.Schema.Types.ObjectId, ref: 'Question'}],
    wrong: [{type: mongoose.Schema.Types.ObjectId, ref: 'Question'}],
        score: Number
    },
    created_at: { type: Date, default: Date.now }
});

var User = db.model('User', UserSchema);
var Stat = db.model('Stat', StatSchema); 
```

这段代码创建了“users”和“stats”集合：

```
 var U1 = new User({ username: "toto", facebook_id: req.params.facebook_id, facebook_token: req.params.facebook_token })
    U1.save(function (err) {
        if (err)
        console.log('U1 save error');
        var S1 = new Stat({ user_id: U1.id })
        S1.save(function (err) {
            if (err)
                console.log('S1 save error');
        });
    }); 
```

为什么 ？谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:02:35.137

因为默认行为是使用模型名称的小写复数版本，这在[文档](http://mongoosejs.com/docs/api.html#index_Mongoose-model)中大部分都有描述（它没有提到小写部分）。

`model`如果你想要别的东西，你可以提供你自己的集合名称作为第三个参数：

```
var User = db.model('User', UserSchema, 'User');
var Stat = db.model('Stat', StatSchema, 'Stat'); 
```

# css - 100% 宽度的绝对定位

> ID：12921947
> 
> 赞同：0
> 
> 时间：2012-10-16T19:18:39.713
> 
> 标签：css, css-position

这个问题已经被问了很多次，但解决方案似乎对我不起作用。也许是因为我太迟钝了，无法将简单的解决方案应用于我更“复杂”的情况。

我只需要我的页眉 div 下面的内容 div，然后是下面的页脚 div，同时为页眉和页脚 div 使用 100% 的宽度。这是在 WordPress 网站中，因此 div 更有趣。我尝试了各种溢出：隐藏等。我很好地掌握了绝对定位使 div 脱离流程的概念，只是不知道如何解决这种情况。我也尝试将顶部位置应用于内容 div，但这对页脚 div 没有帮助。

任何帮助将不胜感激。如果有另一种方法可以做到这一点，我全神贯注！

请看这个小提琴：http: [//jsfiddle.net/M8Wy6/1/](http://jsfiddle.net/M8Wy6/1/)

```
<div id="home-page-wrap">
    <div id="container">
            <div id="header">
                <div class="top-header">
                    <div id="logo">logo</div>
                    <div id="header-nav">header nav</div>
                </div>
                <div id="home-slider">slider</div>
                <div id="main-nav">main nav</div>                
            </div><!-- header -->

            <div id="content">
                 <div class="hentry">
                        <div id="side-bar">the sidebar</div>
                        <div class="entry-home">thecontent</div>
                </div>
                <div class="home-bottom">home bottom</div>
           </div>
           <div id="footer">footer</div>
    </div>
</div>​ 
```

```
body {background:#F2F2F2;}

#home-page-wrap {min-height:100%; height:auto !important; height:100%; width: auto; margin:0 auto; padding:0; background:#F2F2F2;}

#container {width:260px; min-height:100%; height:auto !important; height:100%; margin:0 auto; padding:0 40px; background:#F2F2F2;}

#header {float:left; height:50px; width:100%; left:0; position:absolute; margin:0 auto; padding:0; overflow:visible; background:#FFF;}

.top-header {width:260px; margin:0 auto; height:50px;}

#logo {float:left; position:relative; width:50px; height:25px; margin:0; padding:0; overflow:visible; border:2px solid red;}

#header-nav {float:right; display:block; height:25px; width:50px; padding:0; margin:0; color:#919395; border:2px solid red;}

#home-slider {float:left; width:100%; height:120px; margin:0 auto; background:#404040; border:2px solid red;}

#main-nav { float:left; display:block; width:100%; height:50px; margin:6px auto 6px; padding:0; z-index:100; background:#999; border:2px solid red;}

#content {width:260px; min-height:260px; height:auto !important; height:260px; padding:0; margin:0 auto; background:#F2F2F2; position:absolute; left:0; border:2px solid green;}

.hentry {width:260px; position:relative; margin:0 auto; overflow:hidden;}

.entry-home {float:left; width:100px; min-height:100px;height:auto !important;height:100px; margin:25px 0; padding: 20px 0 0 0;}

#side-bar {float:right; width:50px; min-height:100px; height:auto !important; height:100px; margin:25px; padding:0; background:#F2F2F2;}

#footer {width:100%; height:50px; padding:0; margin:0 auto; background:#666666; position:absolute; left:0; overflow:visible;} 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:33:25.253

> 我只需要我的页眉 div 下面的内容 div，然后是下面的页脚 div，同时为页眉和页脚 div 使用 100% 的宽度。

这是 div 的默认行为：它们将水平扩展以填充其父元素，并垂直扩展以包含其子/内容。因此，您可以通过删除页眉、页脚和内容 div 上的绝对定位、浮动和宽度属性来获得所需的内容。

演示：http: [//jsbin.com/ibexuy/1/edit](http://jsbin.com/ibexuy/1/edit)

# eclipse - 自动完成并在 FXML 中自动添加导入？

> ID：12921950
> 
> 赞同：1
> 
> 时间：2012-10-16T19:18:45.693
> 
> 标签：eclipse, autocomplete, javafx-2, fxml

我正在使用 Eclipse 来编辑/创建 .fxml 文件。我在这里缺少的是自动导入（“组织导入”）和键入时的自动完成。如何将这些功能添加到 Eclipse？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:35:25.427

从顶部的帮助菜单转到 eclipse 市场并搜索 javafx。结果应该是e(fx)clipse，下载。

您可能需要备份您的 eclipse 目录（带有 exe 和插件的目录，而不是工作区），以防在安装过程中出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T13:20:19.823

据我了解，目前不可能。见这里： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=444927](https://bugs.eclipse.org/bugs/show_bug.cgi?id=444927)

如果你安装了 e(fx)clipse 插件，你可以从 Eclipse 中打开 SceneBuilder，它可以让你组织导入。

[![在此处输入图像描述](../Images/29fd3ada506464fe7f2bdd9647569b2c.png)](https://i.stack.imgur.com/4kf54.png)

# ios6 - initWithAppID 未通过 iOS SDK 3.1.1 使用本机 Facebook 登录

> ID：12921951
> 
> 赞同：3
> 
> 时间：2012-10-16T19:18:46.010
> 
> 标签：ios6, facebook-ios-sdk

我有 2 个 iOS 应用程序使用相同的 Facebook APP ID。

第一个适用于新的原生 Facebook 登录。

在与付费版本集成时，我按照[本指南](https://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/)在两个应用程序之间共享应用程序 ID。

**问题：**由于某种原因，以下代码没有使用本机 Facebook 登录，而是打开 Safari 进行 Web 登录。

```
BOOL result = NO;

FBSession *session = [[FBSession alloc] initWithAppID:nil
                                          permissions:permissions
                                      urlSchemeSuffix:@"paid"
                                   tokenCacheStrategy:nil];

if (allowLoginUI || (session.state == FBSessionStateCreatedTokenLoaded)) {
    [FBSession setActiveSession:session];
    [session openWithCompletionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
     }];
    result = session.isOpen;
}

return result; 
```

我在 iPhone 的设置窗口仔细检查了我是否使用我的 Facebook 帐户登录。

Facebook 文档对此一无所知。

他们是否发布了未完成/有漏洞的 SDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:09:12.787

我认为您需要使用**openWithBehavior:completionHandler:**变体来打开会话并明确指定**FBSessionLoginBehaviorUseSystemAccountIfPresent**的行为。

# java - 我的 Boggle 程序找不到所有有效单词 - Java

> ID：12921953
> 
> 赞同：0
> 
> 时间：2012-10-16T19:19:02.507
> 
> 标签：java, recursion, boggle

所以我正在用java开发一个Boggle程序，我很难让它找到每一个可能的单词。

它几乎可以找到所有这些，但对于我的生活，我无法弄清楚为什么它不会全部获得。

```
private void findWords( TreeSet<String> foundWords, String word, Tile t ){
    int i=t.getRow();
    int j=t.getCol();

    //Make sure the tile isn't visited
    if(visited[i][j]) return;

    //Set the current tile to visited
    visited[i][j]=true;

    //Decide what the current word is
    if(t.getLetter().equalsIgnoreCase("q")) word=word+"qu";
    else word=word+t.getLetter();

    //If the string is a word
    if(Boggle.dictionary.search(word)==1){
        //If the word length is greater than or equal to the prefix length
        if(word.length()>=Dictionary.prefixLength){
            //If the word has not already been found
            if(!foundWords.contains(word)){
                //Add the word to the found list
                foundWords.add(word);   
            }
        }
    }

    //Recurse through all neighbor tiles
    for(int curRow=0; curRow<=nRows; curRow++){
        for(int curCol=0; curCol<=nCols; curCol++){
            //Make sure it is not out of bounds
            if((i+curRow<nRows)&&(j+curCol<nCols)){
                findWords(foundWords, word, board[i + curRow][j + curCol]); 
                findWords(foundWords, word, board[i - curRow][j - curCol]); 

                findWords(foundWords, word, board[i + curRow][curCol]); 
                findWords(foundWords, word, board[i - curRow][curCol]); 

                findWords(foundWords, word, board[curRow][j + curCol]); 
                findWords(foundWords, word, board[curRow][j - curCol]); 

                findWords(foundWords, word, board[i + curRow][j - curCol]);
                findWords(foundWords, word, board[i - curRow][j + curCol]);
            }
        }
    }

    //Reset the tile to be not visited
    visited[i][j] = false;
} 
```

这是有问题的方法；它递归地在 Boggle 板上找到单词。

有人知道为什么它只能找到大约 75% 的单词吗？

如果需要，我可以附加更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:21:46.027

我建议编写一些测试用例——我总是发现这样做要么立即发现问题，要么至少允许您使用调试器单步执行代码，并找到实际与您的期望不同的地方。

编辑：另外，你的两个 for 循环看起来很奇怪。您不应该在每个方向上查看 -1,0 和 1 的偏移量（并折扣 0,0），而不是 0 -> nRows？看来你只看一个方向。

# geany - Geany 无法加载我的基本目录中的文件

> ID：12921956
> 
> 赞同：1
> 
> 时间：2012-10-16T19:19:13.077
> 
> 标签：geany

我刚从 Mac OS X Leopard 迁移到 Ubuntu 12.04。我下载了 Geany，我想继续在那里编码。但是，当我创建一个新项目时，Geany 不会导入我的文件，它只显示“无标题”文件。基本目录是正确的。我尝试将文件移动到另一个目录（更改基本目录），将权限更改为 777，重新安装 Geany，下载所有插件，但无济于事。任何人都知道可能会发生什么？这可能是一个菜鸟错误，但我找不到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T05:24:08.437

如果您设置了正确的项目基目录（听起来像您所做的那样），Geany 在打开文件时将默认使用该目录。与更复杂/高级的 IDE 不同，Geany 的项目支持非常简单，它只是指向您打开文件的目录并保存您上次关闭/关闭时打开的文件。没有“导入”功能，如果您在项目基础目录中有支持的源文件，Geany 将允许您编辑它们而无需做任何特别的事情。

有关 Geany 项目[的更多信息，请查看手册](http://www.geany.org/manual/current/index.html#project-management)。如果您想要比 Geany 内置的简单项目更高级的东西，您可能还想查看一些更高级的项目插件，例如[GProject 。](http://plugins.geany.org/gproject.html)

# jquery - 如何使用带有 var 的 jquery 自动完成功能？

> ID：12921974
> 
> 赞同：2
> 
> 时间：2012-10-16T19:20:19.387
> 
> 标签：jquery, autocomplete, closures

我有一个在其中使用 jQuery 自动完成功能的函数：

```
var row_num = 5;
function addModule() {
    // function addModule code
    $('input[name=\'product\']').autocomplete({
        delay: 0,
        source: function(request, response) {
            //function code
        },
        select: function(event, ui) {
            //function code
            $('input[name=\'module[' + row_num + '][featured]\']').attr('value',
            data.join());
        },
        focus: function(event, ui) {
            return false;
        }
    });
    // function addModule code continues
});​ 
```

var row_num 在自动完成的正文中不起作用。我试图在“选择”和其他不同的地方另外声明它，但没有。浏览 ui 自动完成文档不会带来任何结果。

如何使用我的 var 自动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:27:51.390

更改此行

```
 $('input[name=\'module[' + row_num + '][featured]\']').attr('value', data.join()); 
```

对此

```
 var t = 'input[name=\'module[' + row_num + '][featured]\']'
            alert("This is the value: "+t.toString());
            $(t).attr('value', data.join()); 
```

也许你并不期待你所看到的？

* * *

这应该是关闭的一部分。你试过这样吗？

```
function addModule() {
    var row_num = 5;
    // function addModule code
    $('input[name=\'product\']').autocomplete({
        delay: 0,
        source: function(request, response) {
            //function code
        },
        select: function(event, ui) {
            //function code
            $('input[name=\'module[' + row_num + '][featured]\']').attr('value',
            data.join());
        },
        focus: function(event, ui) {
            return false;
        }
    });
    // function addModule code continues
});​ 
```

# google-sheets - 如何防止 Google 电子表格在移动浏览器上以列表视图模式打开？

> ID：12921981
> 
> 赞同：1
> 
> 时间：2012-10-16T19:20:33.810
> 
> 标签：google-sheets, google-sites

似乎无论我做什么，我插入谷歌网站页面的谷歌电子表格都会在移动浏览器的列表视图中打开（但不是在桌面上）。

虽然在某些情况下它是一个很棒的功能，但有时它只是“太多”，因为我不需要用户能够排序或过滤。如何防止站点以该列表视图模式打开电子表格？

# c# - 如何在 FakeItEasy 中为基于自定义委托的事件引发事件？

> ID：12921983
> 
> 赞同：6
> 
> 时间：2012-10-16T19:20:37.653
> 
> 标签：c#, mocking, fakeiteasy

我正在测试的应用程序充满了基于自定义委托的事件，例如：

```
public delegate void NameChangedHandler(string name);
public event NameChanged OnNameChanged;
...
public void ChangeYourName(string newName)
{
    if( NameChanged != null )
        NameChanged(newName);
} 
```

我想模拟产生这些事件的类，并将这些事件提交给被测类。

我知道 FakeItEasy 可以使用 or的`Raise.With()`传统事件签名来引发事件 ，但我不知道在我的情况下该怎么做。 `MyHandler(object sender, EventArgs e)``MyHandler(EventArgs e)`

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-27T20:39:05.887

从[FakeItEasy 2.0.0 开始](https://github.com/FakeItEasy/FakeItEasy/releases/tag/2.0.0)，这已经成为可能。

[Raising Events 文档主题](http://fakeiteasy.readthedocs.io/en/stable/raising-events/)有完整的故事，但要点是您将使用

```
fake.OnNameChanged += Raise.With<NameChanged>(newName); 
```

与往常一样，活动必须是虚拟的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T17:45:22.077

您始终可以使`ChangeYourName`虚拟化并替换该方法。

```
A.CallsTo(()=>fakeClass.ChangeyourName(A<string>._)).Invokes((x)=>invokeMockEvent(x)); 
```

如果那不是你想要的，我想如果`ChangeYourName`是公开的，你可以创建你的假课程

```
var class = new Class();
class.OnNameChanged += (x)=>
{
    Assert.AreEqual(x,"tim");
};

class.ChangeYourName("tim"); 
```

# sql - 数据库引擎优化向导“应用建议”已禁用

> ID：12921984
> 
> 赞同：0
> 
> 时间：2012-10-16T19:20:39.393
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我只是强制 ssms 2008 中的数据库引擎调整向导分析 5mb 跟踪。

根据要实施的索引，我收到了一份返回给我的建议清单；但是，我无法应用这些建议，因为它是灰色的：

![在此处输入图像描述](../Images/f02bc111e5d7c16acd656640c1ee32f3.png)

有谁知道这是否是一个错误？我将如何手动实施更改？

非常感谢您的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:18:29.303

您可以简单地单击看起来像超链接的最右侧列，它将打开一个弹出窗口，其中将以查询形式显示推荐的索引或统计信息。您可以从弹出窗口中单击复制到剪贴板。现在将其粘贴到您的 SSMS 新查询窗口并执行它。

我认为“应用建议”菜单项被禁用的唯一原因是您没有足够的权限进行这些更改或会话已超时。

希望这可以帮助！

# windows-8 - Windows RT 数据库

> ID：12921990
> 
> 赞同：6
> 
> 时间：2012-10-16T19:21:15.643
> 
> 标签：windows-8, sql-server-express, windows-rt

有人知道 Windows RT 是否会提供某种形式的 SQL Express 吗？希望对 C# 友好而不是 C++。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T19:36:14.543

SQLite 似乎是 WinRT 应用程序最常用的选项。正如您[在此处](http://kennykerr.ca/2012/06/21/sqlite-on-windows-8/)看到的，他们使 WinRT 支持 3.7.13 版本的关键功能。我对 SQLite 不太熟悉，但我认为它也可以（很容易？）从 C# 中使用。

似乎有些人成功地为 ARM 处理器构建了 SQLite，请参见[此处](https://stackoverflow.com/questions/11169315/how-can-i-deploy-sqlite-in-winrt-devices-with-an-arm-cpu)。

鉴于 Windows 应用商店应用程序中不允许使用 ADO.NET 和 ODBC，即使 SQL Server Express 可以在 ARM 上运行，您也无法连接到它。可以安全地假设 SQL Server Express 和 SQL Server Compact 不会很快用于 Windows 应用商店应用程序（如果有的话）。