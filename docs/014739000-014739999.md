# StackOverflow 问答 14739000-14739999

# excel - VBA，语法，将单元格范围组合在一起以获取公共变量

> ID：14739001
> 
> 赞同：0
> 
> 时间：2013-02-06T21:19:24.160
> 
> 标签：excel, vba

我正在编写一个小脚本（如下）。该脚本遍历数据集上的行，并根据 2 个选择案例语句的某些意外情况将 1 或 0 放置在单元格中。它工作得很好，但我想知道是否有一种方法可以将单元格范围分组在一起，在其中放置一个 0。

```
Sub compVal()

Dim WB As Workbook  'an object of type workbook
Dim WS1 As Worksheet ' objects of type worksheet

Set WB = ActiveWorkbook ' reference WB to the current Workbook
Set WS1 = Worksheets("Sheet1") 'Reference to Sheet 1 of the current workbook

'loop through sheet1's rows
Dim i As Integer

For i = 2 To WS1.UsedRange.Rows.Count

   Select Case WS1.Cells(i, 1).Value 'first cell from row i

      Case "Target"

         Select Case WS1.Cells(i, 2).Value

            Case 1

               WS1.Cells(i, 3).Value = 1
               WS1.Cells(i, 4).Value = 0
               WS1.Cells(i, 5).Value = 0
               WS1.Cells(i, 6).Value = 0

            Case 2

               WS1.Cells(i, 3).Value = 0
               WS1.Cells(i, 4).Value = 0
               WS1.Cells(i, 5).Value = 1
               WS1.Cells(i, 6).Value = 0

         End Select

      Case "NonTarget"

         Select Case WS1.Cells(i, 2).Value

            Case 1

               WS1.Cells(i, 3).Value = 0
               WS1.Cells(i, 4).Value = 1
               WS1.Cells(i, 5).Value = 0
               WS1.Cells(i, 6).Value = 0

            Case 2

               WS1.Cells(i, 3).Value = 0
               WS1.Cells(i, 4).Value = 0
               WS1.Cells(i, 5).Value = 0
               WS1.Cells(i, 6).Value = 1
         End Select

      End Select
Next i 
```

结束子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:24:41.623

这是代码重用的一个很好的例子：

```
Sub compVal()

Dim WB As Workbook  'an object of type workbook
Dim WS1 As Worksheet ' objects of type worksheet

Set WB = ActiveWorkbook ' reference WB to the current Workbook
Set WS1 = Worksheets("Sheet1") 'Reference to Sheet 1 of the current workbook

'loop through sheet1's rows
Dim i As Long ' USE LONG FOR CELL REFERENCES, THERE ARE A LOT OF ROWS POSSIBLE : )

For i = 2 To WS1.UsedRange.Rows.Count

   Select Case WS1.Cells(i, 1).Value 'first cell from row i

      Case "Target"

         Select Case WS1.Cells(i, 2).Value

            Case 1

               AddColumns WS1, i, 1, 0, 0, 0

            Case 2

               AddColumns WS1, i, 0, 0, 1, 0

         End Select

      Case "NonTarget"

         Select Case WS1.Cells(i, 2).Value

            Case 1

               AddColumns WS1, i, 0, 1, 0, 0

            Case 2

               AddColumns WS1, i, 0, 0, 0, 1

         End Select

      End Select
Next i
End Sub

Sub AddColumns(WS As Worksheet, i As Long, c As Variant, d As Variant, e As Variant, f As Variant)
    WS.Cells(i, 3).Resize(1, 4).Value = Array(c, d, e, f)

End Sub 
```

还可以引入其他效率，例如将四个参数 c、d、e 和 f 替换为单个整数，其中

```
0  = 0,0,0,0
1  = 1,0,0,0
2  = 0,1,0,0
...
15 = 1,1,1,1 
```

# facebook-javascript-sdk - fb-js-sdk：为什么在使用 www 网站时不调用 getLoginStatus

> ID：14739006
> 
> 赞同：1
> 
> 时间：2013-02-06T21:20:06.733
> 
> 标签：facebook-javascript-sdk

如果我将 www 用于我的网站，我的 FB.getLoginStatus 处理程序不会*触发。*

我像往常一样将 fb-js-sdk 加载到我的网站中：

```
var e   = document.createElement('script') ;                                    
e.type  = 'text/javascript'                ;                                     
e.src   = document.location.protocol + '//connect.facebook.net/en_US/all.js';
e.async = true;                                                                    
document.getElementById('fb-root').appendChild(e); 
```

当我的*fbAsyncInit*被调用时，我会：

```
FB.init( ... )
FB.getLoginStatus( my_handler ) 
```

# grails - Grails - 在控制器之间传递域类

> ID：14739008
> 
> 赞同：1
> 
> 时间：2013-02-06T21:20:14.760
> 
> 标签：grails, controller

在我的 Grails 应用程序中，我创建了一个 User 类。在一个控制器中，我查询数据库以确认用户提供的信息是有效的。然后，我想将该 User 对象传递给另一个控制器以对其进行更多处理。这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:36:25.130

对于您在控制器之间传递对象的问题，如果您使用的是 a`redirect`或 a`forward`您可以在参数映射中添加对象：

```
redirect(action: "actionName", user: userInstance) 
```

或者

```
forward(action: "actionName", user: userInstance) 
```

另一种解决方案是将用户存储在`flash`对象中（下一个请求后清除的临时存储映射）或`session`：

```
flash.user = userInstance 
```

或者

```
session.user = userInstance 
```

但在您的情况下，正如 tim_yates 所述，您应该创建一个服务来处理用户实体。为此，请执行以下命令：

```
create-service com.package.user 
```

然后在新创建的类中添加您对用户执行的所有处理，并将用户服务注入控制器中，如下所示：

```
def controller{

    def userService

    def action(){
        userService.validate(...)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:22:42.650

本质上，@tim_yates 得到的是所有控制器的逻辑都应该在服务中。然后任何控制器中的任何操作都可以执行该逻辑，而无需重定向/转发请求。由于服务的交易性质，这也是应该的方式。

# javascript - iPhone：关闭 Safari 并使用脚本返回主屏幕？

> ID：14739013
> 
> 赞同：0
> 
> 时间：2013-02-06T21:20:21.540
> 
> 标签：javascript, iphone, mobile-safari, url-scheme

我有一个在加载时加载 javascript 的 .html 文件。我用它来打开/关闭家里的电子设备。

目前我已将链接保存在我的主屏幕（iPhone）上，并且我已将窗口设置为在打开 1 秒后自动关闭（这足以让我的 javascript 运行）。

但是，我认为如果我能在关闭窗口后以某种方式让 Safari 关闭，那会更酷。这样我就可以回到我的主屏幕，所以我不必触摸主屏幕按钮，从而使用这个链接作为我主屏幕上的一种“开关”来打开/关闭我的电子设备。

我曾想过使用一些代码，例如：

```
function redirection() {
var userAgent = window.navigator.userAgent;
if (userAgent.match(/iPad/i) || userAgent.match(/iPhone/i)) {
    window.location = "myapp://"    
}
}
</script> 
```

但这需要仪表板的 URL 方案，我认为不存在（？）。

您还有其他建议吗？还是无法执行此任务？:)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:25:51.377

Apple 没有经过批准的退出应用程序的方式，尤其是没有他们的应用程序之一，例如 Safari。就像加利福尼亚酒店一样，您可以启动另一个应用程序，但您永远不能离开。

# nhibernate - Fluent NHibernate 映射受保护的属性：无法解析属性：BookingNumber of：B

> ID：14739019
> 
> 赞同：1
> 
> 时间：2013-02-06T21:20:48.923
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

假设以下类：

```
public class A
{
  public virtual ind Id { get; set; }
  public virtual int Number { get; protected set; }
}

public class B : A
{
  public virtual string SomeValue { get; set; }

  public virtual int BookingNumber
  {
    get { return Number; }
    set { Number = value; }
  }
}

public class C : A
{
  public virtual string SomeOtherValue { get; set; }

  public virtual int AccountNumber
  {
    get { return Number; }
    set { Number = value; }
  }
} 
```

如您所见，我想以不同的名称公开属性 Number 。

现在我想映射 A、B、C。

```
public class AMap : ClassMap<A>
{
  public AMap()
  {
    Id(x => x.Id);
    Map(x => x.Number);
  }
}

public class BMap : SubclassMap<B>
{
  public BMap()
  {
    Map(x => x.SomeValue);
  }
}

public class CMap : SubclassMap<C>
{
  public CMap()
  {
    Map(x => x.SomeOtherValue);
  }
} 
```

使用此映射，我可以将内容保存到数据库中。

但是，当我查询 B 或 C 时：

```
Session.QueryOver<B>().Where(x => x.BookingNumber).List(); 
```

我收到错误`could not resolve property: BookingNumber of: B`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:54:13.847

怎么了？在未映射的属性上构建查询。

> *（在派生类中使用不同名称包装基本属性至少很奇怪）*，如果确实需要这种方法，因为某些上层需要为同一属性使用不同的名称......那么，好吧。但是，NHibernate 必须提供不同的信息集。

考虑一下您的查询，作为自我描述信息，包含足以转换为 SQL 语句的信息。

所以如果你使用`QueryOver<B>.Where(x => x.BookingNumber == 1)...`. 信息是（在解析 lambda 表达式时）：

1.  使用 C# 对象`B`，
2.  找到它的属性`BookingNumber`，
3.  找到它的映射表示：列名`BookingNumberColumn`，
4.  取值：`1`和
5.  建立了一个查询`WHERE BookingNumberColumn = 1`

在这种情况下，第 3 步失败。没有列映射到`BookingNumber`...

解决方案是，至少在数据（NHibernate）层上，应用基于基类`A`映射的过滤器

```
Session
  .QueryOver<B>()
  .Where(x => x.Number == 1) // use the A.Number MAPPED property
  .List<B>(); 
```

但是，根据我的经验，我们主要做的是转换持久性的差异（不同的 id 列名称，不同的代码列）并将它们映射到 C# 基类或具有通用、简化结构的接口。

更多内容：[16\. QueryOver 查询](http://nhforge.org/doc/nh/en/index.html#queryqueryover)

# frameworks - LÖVE 和 Lua。制作 .EXE 文件

> ID：14739020
> 
> 赞同：2
> 
> 时间：2013-02-06T21:20:54.317
> 
> 标签：frameworks, lua, love2d

我正在使用 2D 框架“LÖVE”制作 Lua 游戏。

我需要知道如何用它制作一个 .exe 文件！我已经完成了命令行，成功压缩了我的 main.lua 和图像，我已将文件扩展名重命名为 .exe！当我运行 .exe 时，会出现一个文件提取应用程序。这不应该发生，对吧？我希望它作为游戏运行，而不是作为自解压应用程序运行。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-24T04:29:47.900

从它的声音来看，您正在尝试使用 .exe 扩展名保存您的“lovechive”；假设您打算创建一个自提取器，您的存档器可能“有帮助”，而您没有这样做。

* * *

好的，让我们先来谈谈可运行的“lovechives”是如何工作的：当`love.exe`启动时，它首先检查自己的名字，如果它被称为其他东西，`love`或者`love.exe`它立即检查是否有东西粘在它的末尾。如果有，那么它会尝试将其解释为“lovechive”。

所以基本上，我们想在爱的底部贴一个 zip 文件（别担心，它喜欢它）。

1.  首先为您的游戏目录创建一个普通的 zip 存档。

    *   请记住检查您实际上并不打算运送的任何东西；大量包含源代码备份副本、测试艺术品和人们的购物清单的爱情游戏已经问世。不要成为一个统计数字。
2.  文件名与这里所做的事情无关，所以不要担心将其重命名为`.love`. 只要确保您拥有的是普通的普通拉链即可。
3.  下一步取决于你的主机平台，但基本上你现在需要做整个“坚持爱的底部”部分，通常这是从命令行完成的：
    *   `copy /b love.exe+YourGame.zip TheGame.exe`
        在Windows 上，命令是：`love.exe`主“love”可执行文件`YourGame.zip`的名称是包含您的游戏的 zip 文件的名称，并且`TheGame.exe`是您希望最终游戏可执行文件的名称。
    *   在 Linux 或 OSX 上，命令是：“love”主可执行文件的名称
        `cat love YourGame.zip > TheGame`
        在哪里，包含游戏的 zip 文件的名称，以及您希望最终游戏可执行文件的名称。`love``YourGame.zip``TheGame`

这些替换相关文件名应该可以让您为 Linux 和 Windows 生成版本（我所知道的关于制作“合并”OSX 应用程序的是它更复杂。）

* * *

作为记录，从“合并”游戏中提取文件是非常简单的。通常无非就是更改文件扩展名，有时甚至没有。不，zip 加密在这里没有帮助；它不会运行，因为爱无法读取存档。（非常明智，真的。）

最后，如果您向 Love 社区分发，他们通常*更喜欢*您只给他们“lovechive”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:49:10.677

来自[https://love2d.org/wiki/Game_Distribution](https://love2d.org/wiki/Game_Distribution)：

这是在 Windows 上执行此操作的方法。在控制台中，键入：

```
copy /b love.exe+game.love game.exe 
```

然后，您所要做的就是压缩 game.exe 和所需的 DLL，然后分发它们。是的; 这确实意味着游戏将拥有 LÖVE 的私人副本，但这并没有错。这也意味着您必须为想要支持的每个平台创建一个包，或者只为其他平台单独提供 .love。

# multithreading - 具有共享上下文和多线程的 OpenGL / OpenCL 互操作

> ID：14739025
> 
> 赞同：3
> 
> 时间：2013-02-06T21:20:59.133
> 
> 标签：multithreading, opengl, interop, opencl, shared

我正在开发一个使用 OpenCL / OpenGL 互操作性和多线程的项目。Thread1 仅用于渲染 VBO，Thread2 用于运行 OpenCL 内核，处理存储在 VBO 中的几何图形。内核被多次调用，我想在每次迭代后可视化处理过的网格。因此，我需要两件事 - 在 Thread1 和 Thread2 中共享 openGL 上下文以共享 VBO 并共享 OpenCL / OpenGL 上下文。第一个可以使用 wglShareLists(HLRC2, HLRC2) 来实现。第二步是使用共享 OpenGL 上下文创建 OpenCL 上下文。为此，我必须使用 Thread2 的上下文 - 处理线程。

据我了解，命令的顺序应该如下：

// 创建上下文

```
hlrc1 = wglCreateContext(m_hdc);
hlrc2 = wglCreateContext(m_hdc); 
```

// 在没有为每个线程设置为当前资源时共享资源

```
wglShareLists(hlrc1, hlrc2); 
```

// 使线程 1 中的 hlrc1 和线程 2 中的 hlrc2 成为当前的

```
wglMakeCurrent(m_hdc, hlrc1) / wglMakeCurrent(m_hdc, hlrc2) 
```

// 现在为 openCL 设置共享上下文

```
cl_context_properties properties[] = {
CL_GL_CONTEXT_KHR, (cl_context_properties)wglGetCurrentContext(), // WGL   Context
CL_WGL_HDC_KHR, (cl_context_properties)wglGetCurrentDC(), // WGL HDC
CL_CONTEXT_PLATFORM, (cl_context_properties)cpPlatform, // OpenCL platform
0   };

cl_device_id devices[32]; size_t sizedev;
clGetGLContextInfoKHR_fn clGetGLContextInfo = (clGetGLContextInfoKHR_fn)clGetExtensionFunctionAddressForPlatform(cpPlatform, "clGetGLContextInfoKHR");

clGetGLContextInfo(properties, CL_DEVICES_FOR_GL_CONTEXT_KHR, 32 * sizeof(cl_device_id), devices, &sizedev);

cl_uint countdev = (cl_uint)(sizedev / sizeof(cl_device_id));
context = clCreateContext(properties, countdev, devices, NULL, 0, 0); 
```

// 然后创建共享互操作内存对象并将其作为内核参数传递给 openCL

```
cl_mem vbo_cl = clCreateFromGLBuffer(context, CL_MEM_READ_WRITE, vboID, NULL); 
```

麻烦就来了。如果调用命令 wglShareLists(hlrc1, hlrc2)，共享 VBO 只有零而不是顶点位置。如果跳过命令 wglShareLists(hlrc1, hlrc2)，VBO 具有有效值，OpenGL / OpenCL 互操作之间一切正常，但我无法渲染进程，因为 Thread1 和 Thread2 中的 OpenGL 上下文之间的资源无法共享。

有没有人尝试过这样的事情，可能吗？还是我做错了什么？

# .net - .net 服务函数参数，转换自定义对象

> ID：14739028
> 
> 赞同：0
> 
> 时间：2013-02-06T21:21:09.600
> 
> 标签：.net, service

二有服务。我创建了一个参数不是常规的函数。

参数是一个 List(Of KeyValuePair(Of MyObjectType, Integer))

但这使我的函数需要一个 KeyValuePairOfMyObjectTypeInt32 数组。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:47:49.730

不幸的是，泛型对 SOAP 不友好。

有许多限制需要考虑。请参阅[此](http://msdn.microsoft.com/en-us/library/vstudio/hh273127%28v=vs.100%29.aspx#w)MSDN 帖子中的接口和泛型部分。

或者，请参阅对此线程的回复： [链接](https://stackoverflow.com/a/5554873/1195927)

> 事实证明，XML Serializer 可以序列化某种泛型类型。正如neontapir 正确指出的那样，XML 序列化程序不完全支持泛型类型，但它仍然可以序列化泛型类型，因为它创建了我在问题中提到的 ItemResponseOfType[TheType] 类型。
> 
> XML 序列化器只是不会将类型反序列化为泛型类型。

就优雅的解决方案而言，我真的没有。如果其他人想介入，我会很想了解自己。

就个人而言，在极少数情况下（类似于您所描述的），我在服务器端使用了泛型，而客户端使用了 WSDL 定义的类（即：GenericObjectTypeOfPersonTypeInt32）

只是为了澄清（并重新格式化下面评论中的内容），您仍然可以在客户端调用以下内容：

```
KeyValuePairOfMyObjectTypeInt32.Key
KeyValuePairOfMyObjectTypeInt32.Value 
```

# c++ - 您应该将 SFML RenderWindow 继承到自定义渲染类中，还是将其作为字段？

> ID：14739032
> 
> 赞同：0
> 
> 时间：2013-02-06T21:21:21.493
> 
> 标签：c++, sfml

在用 Java 编写了一段时间并使用了 Graphics2d 之后，我想到了使用我在其他语言中学到的东西，例如 C++。我通常使用 SFML，并有一个 Render 类，以减少其他类对 SFML 的依赖（例如，如果我必须切换库，我不需要在不相关的类中切换太多代码）。我想知道我是否应该让这个 Render 类继承 RenderWindow，或者只是将它作为一个成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:47:07.233

当前经常被建议的成语是“组合优于继承”。从你对你在做什么的模糊描述来看，实际上不可能给出准确的答案。我假设您正在谈论您的框架和任何图形库之间的简单接口。

在这种情况下，答案很简单，因为继承会自动更改渲染的 API，并且它会随着您使用的每个图形库而改变，从而破坏了它的整个目的。因此，如果您将其用作成员变量，您可以为您的框架制作一个稳定的 API，并在渲染类的范围内对不同的库进行所有适配。

# php - 使用 https 使 html 表单安全

> ID：14739033
> 
> 赞同：0
> 
> 时间：2013-02-06T21:21:33.073
> 
> 标签：php, javascript, html, https

现在，我知道在我们输入的每一行代码中，它都会在我们的脑海中挥之不去。我最近让自己和我的公司不再使用在线表单生成器，而是自己编写所有表单。在线表单构建器的一个非常好的功能是所有表单都使用 HTTPS 保护。

我想知道使用 HTML、Javascript、PHP 和 CSS 制作自编码表单必须采取的确切步骤。HTTPS 安全。

我知道，无论我们如何确保在线表格的安全，它永远不会 100% 保证永远不会被黑客入侵，也没有什么是 100% 万无一失的。我只是想让我的访问者知道我们正在尽自己的一份力量保护他们在线提供给我们的信息。

谢谢你，任何建设性的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:24:40.820

我不完全理解你的问题：但只要你遵循一个规则，你应该没问题：

*   **不要相信任何用户输入**

来自任何用户的任何输入都必须被视为危险的。因此，使用前必须对其进行消毒。任何清理都必须在服务器端执行，因为用户可以操纵您的 javascript（或只是禁用它）。

为防止您的数据被网络上的其他人窥探，请使用`HTTPS`. 您不应该只在使用表单的页面上使用 HTTPS，而是**在整个网站上**使用 HTTPS 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:31:40.663

这些组件是传输中的数据、您的 Web 应用程序以及应保护的存储中的数据。对于传输中的数据使用 HTTPS，对于存储中的数据，您应该对其进行加密，对于 Web 应用程序的安全性应该在开发生命周期中考虑。

在将数据保存到数据库之前：

*   在处理之前检查令牌。
*   过滤所有用户输入。
*   使用准备好的语句（PDO 和 mysqli）

# r - 使用 `[` 的子集，解释 NA 输出

> ID：14739034
> 
> 赞同：0
> 
> 时间：2013-02-06T21:21:37.533
> 
> 标签：r

如果我们最近[在这里使用了](https://stackoverflow.com/questions/14737773/replacing-occurrences-of-a-number-in-multiple-columns-of-data-frame-with-another)他的数据：

```
data <- data.frame(name = rep(letters[1:3], each = 3), 
                   var1 = rep(1:9), var2 = rep(3:5, each = 3))

  name var1 var2
1    a    1    3
2    a    2    3
3    a    3    3
4    b    4    4
5    b    5    4
6    b    6    4
7    c    7    5
8    c    8    5
9    c    9    5 
```

我们可以查找 var2 == 4 的行。

```
data[data[,3] == 4 ,] # equally data[data$var2 == 4 ,]

#  name var1 var2
#4    b    4    4
#5    b    5    4
#6    b    6    4 
```

或 var1 和 var2 ==4 的行

```
data[data[,2] == 4 &  data[,3] == 4,]

#  name var1 var2
#4    b    4    4 
```

我不明白这是为什么：

```
data[ data[ , 2:3 ] == 4 ,] 
```

给出了这个：

```
 name var1 var2
4       b    4    4
NA   <NA>   NA   NA
NA.1 <NA>   NA   NA
NA.2 <NA>   NA   NA

#I would still hope to get 
 #  name var1 var2
#4    b    4    4 
```

NA 是从哪里来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:27:33.767

您要进行子集化的逻辑是一个矩阵：

```
> sel <- data[ , 2:3 ] == 4
> sel
       var1  var2
 [1,] FALSE FALSE
 [2,] FALSE FALSE
 [3,] FALSE FALSE
 [4,]  TRUE  TRUE
 [5,] FALSE  TRUE
 [6,] FALSE  TRUE
 [7,] FALSE FALSE
 [8,] FALSE FALSE
 [9,] FALSE FALSE 
```

根据`help("[.data.frame")`：

> 不推荐使用 [ 的矩阵索引（具有逻辑或 2 列整数矩阵 i 的 x[i]），并且几乎不支持。对于提取，首先将 x 强制转换为矩阵。对于替换，可以使用逻辑矩阵（仅）以与矩阵相同的方式选择要替换的元素。

但这意味着这种形式：

```
> data[ sel ]
[1] "b" "4" "5" "6" "4" 
```

坏事。但是，您所做的甚至更不明智，因为您告诉它您只想要行（带有尾随逗号），然后给它一个矩阵来索引！

```
> data[sel,]
     name var1 var2
4       b    4    4
NA   <NA>   NA   NA
NA.1 <NA>   NA   NA
NA.2 <NA>   NA   NA 
```

如果您真的想使用矩阵形式，您可以使用`apply`跨行应用逻辑运算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:30:25.153

你`data[,2:3]==4`的如下：

```
R> data[,2:3]==4
       var1  var2
 [1,] FALSE FALSE
 [2,] FALSE FALSE
 [3,] FALSE FALSE
 [4,]  TRUE  TRUE
 [5,] FALSE  TRUE
 [6,] FALSE  TRUE
 [7,] FALSE FALSE
 [8,] FALSE FALSE
 [9,] FALSE FALSE 
```

然后你尝试用这个矩阵索引你的数据框的行。为此，R 似乎首先将您的矩阵转换为向量：

```
R> as.vector(data[,2:3]==4)
 [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[12] FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE 
```

`data`然后它根据这个向量选择行。第 4 个`TRUE`值选择第 4 行，但其他三个`TRUE`值选择“越界”行，因此它们返回`NA`'s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:27:27.490

```
 data[ data[ , 2 ] == 4 | data[,3] == 4,]

    name  var1 var2
 4    b    4    4
 5    b    5    4
 6    b    6    4 
```

我怀疑您的方法不起作用，因为 c() 构建了一个向量，而您需要比较原子元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:27:53.993

因为您没有将向量而是矩阵传递给索引：

```
> data[ , 2:3 ] == 4
       var1  var2
 [1,] FALSE FALSE
 [2,] FALSE FALSE
 [3,] FALSE FALSE
 [4,]  TRUE  TRUE
 [5,] FALSE  TRUE
 [6,] FALSE  TRUE
 [7,] FALSE FALSE
 [8,] FALSE FALSE
 [9,] FALSE FALSE 
```

如果您想将矩阵折叠成一个可以使用索引的向量，这里有两个选项：

```
data[ apply(data[ , 2:3 ] == 4, 1, all) ,]
data[ rowSums(data[ , 2:3 ] == 4) == 2 ,] 
```

# php - drupal 形式不支持的操作数类型

> ID：14739039
> 
> 赞同：0
> 
> 时间：2013-02-06T21:21:58.717
> 
> 标签：php, drupal

这是我的表格

```
function dreamcharts_step7_form(&$form, &$form_state) {
   $dream = &$form_state['dream_obj'];
   $form['weight'] = array(
    '#type' => 'textfield',
    '#title' => 'Weight',
   );

    $form['tall'] = array(

    '#title' => 'How tall are you?',
    '#type' => 'select',
    '#required' => 1,
    '#default_value' => $dream->tall,
    '#value' => array( 
      '0' => '58',
      '1' => '59',
      '2' => '60',
      '3' => '61',
      '4' => '62',
      '5' => '63',
      '6' => '64',
      '7' => '65',
      '8' => '66',
      '9' => '67',
      '10' => '68',
      '11' => '69',
      '12' => '70',
      '13' => '71',
      '14' => '72',
      '15' => '73',
      '16' => '74',
      '17' => '75',
      '18' => '76',

    ),
    '#options' => array(
      '0' => '4\' 10"',
      '1' => '4\' 11"',
      '2' => '5\' 0"',
      '3' => '5\' 1"',
      '4' => '5\' 2"',
      '5' => '5\' 3"',
      '6' => '5\' 4"',
      '7' => '5\' 5"',
      '8' => '5\' 6"',
      '9' => '5\' 7"',
      '10' => '5\' 8"',
      '11' => '5\' 9"',
      '12' => '5\' 10"',
      '13' => '5\' 11"',
      '14' => '6\' 0"',
      '15' => '6\' 1"',
      '16' => '6\' 2"',
      '17' => '6\' 3"',
      '18' => '6\' 4"',
    )
  );

   $form['tip'] = array(
    '#type' => 'markup',
    '#prefix' => '<div id="hint">',
    '#suffix' => '</div>',
    '#value' => 'The combination of your weight and height lets us know your Body Mass Index or BMI.',
   );   

  $form_state['no buttons'] = TRUE; 
} 
```

这是我计算表单值的地方

```
function dreamcharts_step7_form_submit(&$form, &$form_state) {

  $tall = $form_state['values']['tall'];
  $weight =  $form_state['values']['weight'];

  $form_state['dream_obj']->bmi = (($weight * 703) / ($tall * $height)); 

} 
```

我在这一行得到了不受支持的操作数类型

```
 $form_state['dream_obj']->bmi = (($weight * 703) / ($tall * $height)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:25:49.960

我怀疑 5'3" 不是算术运算的正确形式。尝试 var_dumping 以查看其实际形式（我只是在这里猜测，它可能是一个数组吗？）

将其转换为 int 或 float 值（例如，使用公制。为什么不将值转换为厘米？）以便将其用作操作数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:06:48.973

“#select”类型不支持“#values”。这些值取自选项数组中的键。

例如。

```
$form['tall'] = array(

'#title' => 'How tall are you?',
'#type' => 'select',
'#required' => 1,
'#default_value' => $dream->tall,
'#options' => array(
  '58' => '4\' 10"',
  '59' => '4\' 11"',
  '60' => '5\' 0"',
  '61' => '5\' 1"',
  '62' => '5\' 2"',
  '63' => '5\' 3"',
  '64' => '5\' 4"',
  '65' => '5\' 5"',
  '66' => '5\' 6"',
  '67' => '5\' 7"',
  '68' => '5\' 8"',
  '69' => '5\' 9"',
  '70' => '5\' 10"',
  '71' => '5\' 11"',
  '72' => '6\' 0"',
  '73' => '6\' 1"',
  '74' => '6\' 2"',
  '75' => '6\' 3"',
  '76' => '6\' 4"',
)
); 
```

# c - 建设波特米迪

> ID：14739041
> 
> 赞同：2
> 
> 时间：2013-02-06T21:22:13.363
> 
> 标签：c, build, static-libraries, midi

[我一直在尝试在 OSX 10.8.2 http://sourceforge.net/apps/trac/portmedia/wiki/Installing%20portmidi%20on%20Mac](http://sourceforge.net/apps/trac/portmedia/wiki/Installing%20portmidi%20on%20Mac)上构建 portmidi

无论如何，自述文件告诉我首先使用命令：

```
 make -f pm_mac/Makefile.osx 
```

但 bash 返回以下错误消息：

```
 [~/Desktop/portmedia/portmidi]
 DanMoore -> make -f pm_mac/Makefile.osx
 rm -f CMakeCache.txt
 mkdir -p Release
 cd Release; cmake .. -G "Unix Makefiles" -DCMAKE_BUILD_TYPE=Release
 -- The C compiler identification is GNU 4.2.1
 -- The CXX compiler identification is Clang 4.0.0
 -- Checking whether C compiler has -isysroot
 -- Checking whether C compiler has -isysroot - yes
 -- Checking whether C compiler supports OSX deployment target flag
 -- Checking whether C compiler supports OSX deployment target flag - yes
 -- Check for working C compiler: /usr/bin/gcc
 -- Check for working C compiler: /usr/bin/gcc -- works
 -- Detecting C compiler ABI info
 -- Detecting C compiler ABI info - failed
 -- Check for working CXX compiler: /usr/bin/c++
 -- Check for working CXX compiler: /usr/bin/c++ -- works
 -- Detecting CXX compiler ABI info
 -- Detecting CXX compiler ABI info - failed
 -- SYSROOT: /Developer/SDKs/MacOSX10.5.sdk
 -- DEFAULT_DEBUG_FLAGS not nil: -g
 -- SYSROOT: /Developer/SDKs/MacOSX10.5.sdk
 -- Configuring done
 -- Generating done
 -- Build files have been written to: /Users/DanMoore/Desktop/portmedia/portmidi/Release
 cd Release; make
 Scanning dependencies of target pmjni
 [  3%] Building C object pm_common/CMakeFiles/pmjni.dir/__/pm_mac/pmmacosxcm.c.o
 llvm-gcc-4.2: error trying to exec '/usr/bin/../llvm-gcc-4.2/bin/powerpc-apple-darwin11-llvm-gcc-4.2': execvp: No such file or directory
 lipo: can't figure out the architecture type of: /var/folders/y4/p_kjk8692z73xy4nhwx6h_100000gn/T//cc73yejt.out
 make[3]: *** [pm_common/CMakeFiles/pmjni.dir/__/pm_mac/pmmacosxcm.c.o] Error 255
 make[2]: *** [pm_common/CMakeFiles/pmjni.dir/all] Error 2
 make[1]: *** [all] Error 2
 make: *** [all] Error 2 
```

我并不期待一个简单的构建，但这些错误对我来说看起来很陌生。谁能解释发生了什么？？

我正在尝试为简单的 C 程序呈现一个库文件。（.a 或 .la）

提前感谢任何看的人！

# python - 使用 Python NDB 有效实现一对多关系

> ID：14739044
> 
> 赞同：11
> 
> 时间：2013-02-06T21:22:24.413
> 
> 标签：python, google-app-engine, app-engine-ndb

我想听听您对有效实现与 Python NDB 的一对多关系的看法。（例如人（一个）到任务（许多））

在我的理解中，有三种方式来实现它。

1.  使用“父”参数
2.  使用“重复”结构化属性
3.  使用“重复”键属性

我通常根据以下逻辑选择一种方式，但这对您有意义吗？如果你有更好的逻辑，请教我。

1.  使用“父”参数

    *   这些实体之间需要进行交易操作
    *   这些实体之间需要双向引用
    *   强烈打算“亲子”关系
2.  使用“重复”结构化属性

    *   不需要单独使用“许多”实体（始终与“一个”实体一起使用）
    *   “许多”实体仅由“一个”实体引用
    *   “重复”的次数少于 100
3.  使用“重复”键属性

    *   需要单独使用“许多”实体
    *   “许多”实体可以被其他实体引用
    *   “重复”次数超过 100

No.2 增加了实体的大小，但我们可以节省数据存储操作。（我们需要使用投影查询来减少反序列化的 CPU 时间）。因此，我尽可能多地使用这种方式。

我真的很感激你的意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T22:25:28.077

您缺少的一个关键问题：您如何读取数据？

如果您在请求中显示给定人员的所有任务，则 2 有意义：您可以查询此人并显示他的所有任务。

但是，如果您需要查询说在某个时间到期的所有任务的列表，那么查询重复的结构化属性是很糟糕的。您将需要单独的实体来完成您的任务。

还有第四个选项，即在您的任务中使用指向您的个人的 KeyProperty。当您需要某人的任务列表时，您可以发出查询。

如果您需要搜索单个任务，那么您可能想要使用#4。您也可以将它与#3 结合使用。

此外，重复属性的数量与 100 无关。它与您的 Person 和 Task 实体的大小有关，以及 1MB 可以容纳多少。这有潜在的危险，因为如果您的 Task 实体可能很大，您的 Person 实体中的空间可能会比您预期的更快用完。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T10:37:40.563

大多数 GAE 用户迟早会意识到的一件事是，数据存储不鼓励根据正式规范化原则进行设计，这在关系数据库中被认为是一个好主意。相反，它似乎经常鼓励不直观的设计和对既定规范的厌恶。尽管关系数据库设计原则有其位置，但它们在这里不起作用。

我认为数据存储设计的基础分为两个问题：

1.  我将如何读取这些数据以及如何以最少的读取操作次数读取它？

2.  以这种方式存储它会导致写入和索引操作的数量激增吗？

如果你用尽可能多的远见和实际测试来回答这两个问题，我认为你做得很好。您可以将其他规则和特定案例正式化，但这些问题在大多数情况下都会起作用。

# vb.net - vb.net：如何防止选中或取消选中项目后关闭已选中组合框的下拉菜单

> ID：14739047
> 
> 赞同：0
> 
> 时间：2013-02-06T21:22:33.107
> 
> 标签：vb.net, combobox, checked

当用户选中或取消选中选中组合框中的复选框时，我想防止下拉列表关闭。

我复制了一些 Microsoft 代码来创建一个选中的组合框。由于它不是开箱即用的，我做了一些定制。

这是我的代码：

```
 Imports System.ComponentModel
Imports System.Collections.ObjectModel

Public Class CheckedCombobox
    Inherits ComboBox
    Public Event ItemCheck(ByVal sender As Object, ByVal e As System.Windows.Forms.ItemCheckEventArgs)

    <Browsable(False)> _
    Public Overloads ReadOnly Property Items() As ComboBox.ObjectCollection
        Get
            Return MyBase.Items
        End Get
    End Property

    Private WithEvents _ItemCollection As New ObservableCollection(Of String)
    Public Property ItemCollection As ObservableCollection(Of String)
        Get
            Return _ItemCollection
        End Get
        Set(value As ObservableCollection(Of String))
            _ItemCollection = value
        End Set
    End Property

    Private _ItemDictionary As New Dictionary(Of String, Boolean)
    Public ReadOnly Property ItemDictionary As Dictionary(Of String, Boolean)
        Get
            Return _ItemDictionary
        End Get
    End Property
    Public ReadOnly Property CheckedItemCollection As List(Of String)
        Get
            Return New List(Of String)(From item In ItemDictionary Where item.Value = True Select item.Key)
        End Get
    End Property
    Public ReadOnly Property UnCheckedItemCollection As List(Of String)
        Get
            Return New List(Of String)(From item In ItemDictionary Where item.Value = False Select item.Key)
        End Get
    End Property

    Public Sub setCheckState(ByVal key As String, ByVal checkstate As Boolean)
        _ItemDictionary(key) = checkstate
    End Sub

    Public Function getCheckState(ByVal key As String)
        Return (_ItemDictionary(key))
    End Function

    Public Sub New()
        Me.DrawMode = Windows.Forms.DrawMode.OwnerDrawVariable
    End Sub

    Protected Overrides Sub OnCreateControl()
        MyBase.OnCreateControl()
        For Each item In ItemCollection
            _ItemDictionary.Add(item, False)
        Next
    End Sub

    Private Sub ItemsChanged(ByVal sender As Object, ByVal e As System.Collections.Specialized.NotifyCollectionChangedEventArgs) Handles _ItemCollection.CollectionChanged

        Select Case e.Action

            Case Specialized.NotifyCollectionChangedAction.Add
                If e.NewStartingIndex = ItemDictionary.Count Then
                    _ItemDictionary.Add(e.NewItems(0), False)
                    MyBase.Items.Add(e.NewItems(0))
                End If

            Case Specialized.NotifyCollectionChangedAction.Remove

                _ItemDictionary.Remove(MyBase.Items(e.OldStartingIndex))
                MyBase.Items.RemoveAt(e.OldStartingIndex)

            Case Specialized.NotifyCollectionChangedAction.Move

                Dim _item As Object = MyBase.Items(e.OldStartingIndex)
                MyBase.Items.RemoveAt(e.OldStartingIndex)
                MyBase.Items.Insert(e.NewStartingIndex, _item)

            Case Specialized.NotifyCollectionChangedAction.Replace

                Throw New Exception("Not implemented yet!")

            Case Specialized.NotifyCollectionChangedAction.Reset

                Dim _checkeditems As New List(Of String)(CheckedItemCollection)

                MyBase.Items.Clear()
                MyBase.Items.AddRange(_ItemCollection.ToArray)

                _ItemDictionary.Clear()
                For Each item In _ItemCollection
                    _ItemDictionary.Add(item, _checkeditems.Contains(item))
                Next

        End Select
        Me.Invalidate()
    End Sub

    Protected Overrides Sub OnDrawItem(ByVal e As System.Windows.Forms.DrawItemEventArgs)
        e.DrawBackground()
        Dim p As Point = e.Bounds.Location

        If e.Index >= 0 Then
            p.Offset(1, 1)
            If getCheckState(MyBase.Items(e.Index)) Then
                CheckBoxRenderer.DrawCheckBox(e.Graphics, p, VisualStyles.CheckBoxState.CheckedNormal)
            Else
                CheckBoxRenderer.DrawCheckBox(e.Graphics, p, VisualStyles.CheckBoxState.UncheckedNormal)
            End If

            p.Offset(12, 0)
            e.Graphics.DrawString(MyBase.GetItemText(Me.Items(e.Index)), e.Font, New SolidBrush(e.ForeColor), p.X, p.Y)
        End If
        If e.State = DrawItemState.Selected Then
            e.DrawFocusRectangle()
        End If
        MyBase.OnDrawItem(e)
    End Sub

    Private Sub checkedChanged(ByVal index As Integer)
        Dim checked As Boolean = _ItemDictionary(MyBase.Items.Item(index))
        If checked Then
            _ItemDictionary(MyBase.Items.Item(index)) = False
            RaiseEvent ItemCheck(Me, New ItemCheckEventArgs(index, CheckState.Unchecked, CheckState.Checked))
        Else
            _ItemDictionary(MyBase.Items.Item(index)) = True
            RaiseEvent ItemCheck(Me, New ItemCheckEventArgs(index, CheckState.Checked, CheckState.Unchecked))
        End If
        Me.Invalidate()
    End Sub

    Private n As nWindow = Nothing
    Private Const WM_CTLCOLORLISTBOX As Integer = &H134
    Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
        MyBase.WndProc(m)
        If m.Msg = WM_CTLCOLORLISTBOX Then
            If n Is Nothing Then
                n = New nWindow(Me)
                n.AssignHandle(m.LParam)
                AddHandler n.checkedChanged, AddressOf checkedChanged
            End If
        End If
    End Sub

    Private Sub CheckedCombobox_Click(sender As Object, e As System.EventArgs) Handles Me.SelectedIndexChanged
        Debugger.Break()
    End Sub
End Class

Public Class nWindow
    Inherits NativeWindow

    Private Const WM_LBUTTONDOWN As Integer = &H201

    Private _combobox As CheckedCombobox

    Public Event checkedChanged(ByVal index As Integer)

    Public Sub New(ByVal cb As CheckedCombobox)
        _combobox = cb
    End Sub

    Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
        If m.Msg = WM_LBUTTONDOWN Then
            Dim itemHeight As Integer = _combobox.ItemHeight
            If New Point(m.LParam.ToInt32).Y \ itemHeight <= _combobox.Items.Count - 1 And New Point(m.LParam.ToInt32).Y \ itemHeight >= 0 Then
                If New Point(m.LParam.ToInt32).X >= 1 And New Point(m.LParam.ToInt32).X <= 11 Then
                    RaiseEvent checkedChanged(_combobox.SelectedIndex)
                End If
            End If
        End If
        MyBase.WndProc(m)
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:32:18.243

下面的代码似乎可以正常工作。它完成了我打算做的事情。

（注：我只展示了改变的例程）

```
 Private Sub checkedChanged(ByVal index As Integer)
    Dim checked As Boolean = _ItemDictionary(MyBase.Items.Item(index))
    If checked Then
        _ItemDictionary(MyBase.Items.Item(index)) = False
        RaiseEvent ItemCheck(Me, New ItemCheckEventArgs(index, CheckState.Unchecked, CheckState.Checked))
    Else
        _ItemDictionary(MyBase.Items.Item(index)) = True
        RaiseEvent ItemCheck(Me, New ItemCheckEventArgs(index, CheckState.Checked, CheckState.Unchecked))
    End If
    Me.SelectedIndex = -1
End Sub

Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
    If m.Msg = WM_LBUTTONDOWN Then
        Dim itemHeight As Integer = _combobox.ItemHeight
        If New Point(m.LParam.ToInt32).Y \ itemHeight <= _combobox.Items.Count - 1 And New Point(m.LParam.ToInt32).Y \ itemHeight >= 0 Then
            If New Point(m.LParam.ToInt32).X >= 1 And New Point(m.LParam.ToInt32).X <= 11 Then
                RaiseEvent checkedChanged(_combobox.SelectedIndex)
                Return
            End If
        End If
    End If
    MyBase.WndProc(m)
End Sub 
```

我不能百分百确定不调用 MyBase.WndProc()，但我还没有注意到任何副作用。

# ios - UIRefreshControl 被我的 UINavigationController 的 UINavigationBar 隐藏/遮挡

> ID：14739048
> 
> 赞同：18
> 
> 时间：2013-02-06T21:22:35.117
> 
> 标签：ios, uitableview, cocoa-touch, uinavigationcontroller, uirefreshcontrol

我正在尝试使用`UIRefreshControl`inside my `UITableViewController`，它本身位于 a 内部`UINavigationController`，其`hidesNavigationBar`属性设置为`NO`（因此导航栏可见）。

`UIRefreshControl`作品，但被`UINavigationBar`. 我很惊讶我找不到其他遇到这个问题的人。

可能的相关点：

*   我将 my 设置`rootViewController`为`UIWindow`my `UINavigationController`。
*   我通过`UINavigationController`设置`viewControllers`.`UINavigationController`
*   我的`UITableViewController`子类是用笔尖实例化的。
*   我在我的子类`UIRefreshControl`的`viewDidLoad`方法中实例化我的`UITableViewController`。我在这个方法中设置`refreshControl`了子类的属性。`UITableViewController`
*   `UIRefreshControl`效果很好，我可以看到其中的一部分，但它被我的`UINavigationBar`. 如果我设置`hidesNavigationBar`为`YES`（但我不想隐藏它），它看起来完全正常。

# 编辑：

用于创建和定位 my 的代码`UIRefreshControl`是：

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self 
                   action:@selector(toggleRefresh:) 
         forControlEvents:UIControlEventValueChanged];
self.refreshControl = refreshControl; 
```

此代码片段在`viewDidLoad`我的`UITableViewController`子类的方法中，它是`UINavigationViewController`.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-09-18T14:57:52.713

对于那些以 iOS 7 为目标的用户，似乎存在一个新问题，`UIRefreshControl`即. 在以编程方式初始化和从情节提要中初始化时，我都经历了这一点。一个简单的解决方法是更新您的in ：`UITableView``backgroundView``UIRefreshControl``zPosition``UIRefreshControl``viewDidLoad``UITableViewController`

```
self.refreshControl.layer.zPosition = self.tableView.backgroundView.layer.zPosition + 1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-15T06:29:21.643

我找到了一个真正的解决方案，这里是：

我有一个带有半透明的`UIViewController`内部。里面有。`UINavigationController``NavigationBar``UIViewController``UITableView`

我想添加一个`UIRefreshControl`但是当我这样做时，它被隐藏了`NavigationBar`，就像你解释的那样。

这是我使它工作的代码：

```
// Add a UITableViewController
self.tblViewController = [[UITableViewController alloc] init];

// Set the UITableView to it
self.tblViewController.tableView = self.tblView;

// Initialize the UIRefreshControl and set it's method
self.refreshControl = [[UIRefreshControl alloc] init];
[self.refreshControl addTarget:self action:@selector(refreshTable) forControlEvents:UIControlEventValueChanged];

// Set the RefreshControl to the UITableViewController
self.tblViewController.refreshControl = self.refreshControl;

// Here is the thing ! Just change the contentInset to push down the UITableView content to 64 pixels (StatusBar + NavigationBar)
self.tblView.contentInset = UIEdgeInsetsMake(64.f, 0.f, 0.f, 0.f); 
```

使用此代码，您`UITableViewController`将在向下滚动单元格时`RefreshControl`完美显示并保持半透明效果。`NavigationBar`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-27T10:11:00.077

对我来说它看起来像一个错误，因为它仅在 tableView 的 contentOffset 属性为 0 时发生

看到这个问题

[调用 beginRefreshing 并且 contentOffset 为 0 时 UIRefreshControl 不显示刺](https://stackoverflow.com/questions/16120797/uirefreshcontrol-not-showing-spiny-when-calling-beginrefreshing-and-contentoffse)

我用以下代码（UITableViewController 的方法）修复了这个问题：

```
- (void)beginRefreshingTableView {

    [self.refreshControl beginRefreshing];

    if (self.tableView.contentOffset.y == 0) {

        [UIView animateWithDuration:0.25 delay:0 options:UIViewAnimationOptionBeginFromCurrentState animations:^(void){

            self.tableView.contentOffset = CGPointMake(0, -self.refreshControl.frame.size.height);

        } completion:^(BOOL finished){

        }];

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-22T06:45:26.893

在iOS 7中，self.view在navigationBar下，只不过你写了如下内容，

```
self.edgesForExtendedLayout = UIRectEdgeNone; // or UIRectEdgeAll & ~UIRectEdgeTop 
```

或者

```
self.navigationViewController.navigationbar.translucent = NO; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-15T14:08:34.387

使用@Jonathan 的回答，我得到了很好的效果。但是由于我使用的是故事板，所以我将内容插图设置为：以防万一有人需要：

[![在此处输入图像描述](../Images/6a2f4df8dcd1b9835b88c9d60779c91b.png)](https://i.stack.imgur.com/o3zNO.png) (xcode 6.4)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-23T19:25:24.533

不要调用`-setTranslucent:`您的`UINavigationBar`. 然后，您的刷新控件将被正确定位在导航栏下方。

# css - 你如何垂直居中文本并隐藏溢出的文本？

> ID：14739053
> 
> 赞同：2
> 
> 时间：2013-02-06T21:22:51.037
> 
> 标签：css

垂直居中文本的典型解决方案是：

```
p {
    width: 10em;
    height: 2.4em;
    display: table-cell;
    vertical-align: middle;
} 
```

效果是：

```
 _________________
|                 |
|                 |
| Line 1 of text  |
|                 |
|_________________|

 _________________
|                 |
| Line 1 of text  |
| Line 2 of text  |
| Line 3 of text  |
|_________________| 
```

当我尝试隐藏太长而无法放入框中的文本时，此解决方案对我不起作用：

```
p {
    ...
    ...
    overflow: hidden;
} 
```

由于某种原因，表格单元格会忽略溢出规则。

```
 _________________
| Line 1 of text  |
| Line 2 of text  |
| Line 3 of text  |
| Line 4 of text  |
| Line 5 of text  |
 -----------------
  Line 6 of text
  Line 7 of text 
```

许多其他规则也停止工作，包括保证金。有没有其他方法可以在不破坏许多其他关键 CSS 规则的情况下垂直居中任意数量的文本行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-18T09:01:21.223

现在有一个很好的解决方案，使用 flexbox 可以解决这个问题。我准备了一个代码片段：

```
div {
    width: 10em;
    height: 2.4em;

    display: flex;
    align-items: center;
    overflow: hidden;

    background: blue;
    color: white;
}
```

```
<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <div>
      asjdg<br>
    </div>

    <br>

    <div>
      asjdg<br>
      asdsad<br>
      asdh<br>
      asdhsjkadh<br>
      asgdh<br>
      asdasd<br>
      asdasd<br>
    </div>
  </body>
</html>
```

# ruby-on-rails - RoR 应用程序的服务器配置和部署

> ID：14739054
> 
> 赞同：0
> 
> 时间：2013-02-06T21:22:52.020
> 
> 标签：ruby-on-rails, capistrano

我目前正在致力于为某些项目提供服务器配置和部署自动化。我决定使用 Sprinkle & Capistrano。实际上，我一直在处理 ssh 用户的事情，因为我想在使用 Sprink 的配置阶段创建一个“部署”用户，Capistrano 应该使用该用户来执行部署。我面临的问题与我应该配置 deploy.rb 的方式有关，我不知道如何设置用户和密码（比如说“root”）以供洒水使用，然后将它们更改为新创建的“部署”用户使用 Capistrano 执行部署。配置和部署是两个不同的阶段，但它们共享相同的配置，也许有一些技巧可以做到这一点；有人在这方面有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:46:55.817

您可以像这样配置 Capistrano 的部署用户：

```
set :user, "deploy_username" 
```

您也可以使用 设置密码`set :password, "secret_password"`，但最好手动输入密码，或者为您设置 SSH 密钥。这将避免密码以明文形式存储。

Sprinkle 在`ssh`块下有类似的设置：

```
ssh do
  user 'sprinkle_user' # defaults to 'root'
  password 'secret'
end 
```

但同样的问题也适用于此 - 您可能应该为此手动提供密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T15:57:58.727

我建议使用 ElasticBox 在任何云中配置您的 Rails 服务器。

您只需要为此目的创建一个自定义框或使用 Rails 框来自动化它。

框抽象为您提供了向文件（如 deploy.rb）添加任何自定义步骤的灵活性，您还可以在部署时添加用于对服务器执行任何 ssh 配置的脚本。

这是一篇很好的博客文章，解释了**如何使用 ElasticBox 部署多服务器 Rails 应用程序：** [https ://elasticbox.com/blog/deploy-multi-server-rails-app/](https://elasticbox.com/blog/deploy-multi-server-rails-app/)

# php - twitter返回解码的json

> ID：14739055
> 
> 赞同：-1
> 
> 时间：2013-02-06T21:23:03.270
> 
> 标签：php, twitter

到目前为止，事情进展顺利，我查看了有关特定主题标签（例如#jb）的所有信息，我正确查看了它，并看到了具有特定元素（例如“created_at”等）的不同数组的负载。

我试图通过这样做来定位特定元素`echo $decode[0]['created_at']."<br>";` 但它给了我一个错误“未定义的偏移量：第 6 行 C:\xampp\htdocs\test\hashtag.php 中的 0” - 我认为我一直在走正确的路线，直到这个，任何指导将不胜感激

可以在此处查看有关数组的特性[http://search.twitter.com/search.json?q=%23jb](http://search.twitter.com/search.json?q=#jb)

问候

```
<?php
$json = file_get_contents("http://search.twitter.com/search.json?q=%23jb", true); //getting the file content
$decode = json_decode($json, true); //getting the file content as array

echo "<pre>";
echo $decode[0]['created_at']."<br>"; //user location
echo "</pre>";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:28:51.773

你需要：

```
echo "<pre>";
echo $decode['results'][0]['created_at']."<br>"; //user location
echo "</pre>"; 
```

我认为。但`created_at`不返回位置 - 它返回日期。

# actionscript-3 - AS3 字体嵌入 - 错误消息

> ID：14739056
> 
> 赞同：0
> 
> 时间：2013-02-06T21:23:06.830
> 
> 标签：actionscript-3, font-embedding

我想使用“swf 方法”在 AS3 中嵌入字体。

我得到的错误是：

无法创建字体“myFont”../assets/swf/myFont.swf 无法转码。

根据谷歌，这个问题是因为路径错误。但我认为我设定了正确的道路，不是吗？

我的文件夹结构

```
main.fla
../com
..../subfolder
....../testButton
......../testButton.as
....../assets
......../swf
........../myFont.swf 
```

在我的 testButton.as 我试图嵌入 myFont.swf：

```
public class testButton extends Sprite {
[Embed(source="../assets/swf/myFont.swf", fontName="myFont",
        fontWeight='bold', mimeType="application/x-font")] 
        private var myEmbeddedFont:Class; 
```

在 main.fla 我正在创建一个类的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:59:27.407

只需将原始字体文件转换为 .otf 并安装即可。Flash 会检测到它，您将能够像使用普通字体一样使用它而无需嵌入。

# linux - 将 awk 与列值条件一起使用

> ID：14739057
> 
> 赞同：122
> 
> 时间：2013-02-06T21:23:16.757
> 
> 标签：linux, shell, awk

我正在从[The AWK Programming Language](https://ia802309.us.archive.org/25/items/pdfy-MgN0H1joIoDVoIC7/The_AWK_Programming_Language.pdf)学习 awk，但其中一个示例有问题。

如果我想打印 $3 如果 $2 等于一个值（例如`1`），我正在使用这个工作正常的命令：

```
awk '$2==1 {print $3}' <infile> | more 
```

但是当我用另一个搜索条件（例如`findtext`）替换 1 时，该命令不起作用：

```
awk '$1== findtext {print $3}' <infile> | more 
```

它不返回任何输出，我确定输入文件中存在“findtext”。

我也试过这个，但它不起作用：

```
awk '$1== "findtext" {print $3}' <infile> | more 
```

这是我的名为“test”的测试文件，它有 9 行和 8 个字段，以空格分隔：

```
1 11 0.959660297 0 0.021231423 -0.0073 -0.0031 MhZisp
2 14 0.180467091 0.800424628 0 0.0566 0.0103 ClNonZ
3 19 0.98089172 0 0 -0.0158 0.0124 MhNonZ
4 15 0.704883227 0.265392781 0.010615711 -0.0087 -0.0092 MhZisp
5 22 0.010615711 0.959660297 0.010615711 0.0476 0.0061 ClNonZ
6 23 0.715498938 0 0.265392781 -0.0013 -0.0309 Unkn
7 26 0.927813163 0 0.053078556 -0.0051 -0.0636 MhZisp
8 44 0.55626327 0.222929936 0.201698514 0.0053 -0.0438 MhZisp
9 31 0.492569002 0.350318471 0.138004246 0.0485 0.0088 ClNonZ 
```

这是我所做的和输出：

```
$awk '$8 == "ClNonZ" {print $3}' test 

$ grep ClNonZ test 
2 14 0.180467091 0.800424628 0 0.0566 0.0103 ClNonZ
5 22 0.010615711 0.959660297 0.010615711 0.0476 0.0061 ClNonZ
9 31 0.492569002 0.350318471 0.138004246 0.0485 0.0088 ClNonZ 
```

我希望看到这是 3 美元，其中 8 美元中有“ClNonZ”。

```
0.180467091 
0.010615711 
0.492569002 
```

不知道为什么 awk 命令没有返回任何内容。有什么想法吗？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-02-06T21:25:39.650

如果您要查找特定字符串，请在其周围加上引号：

```
awk '$1 == "findtext" {print $3}' 
```

否则，awk 将假定它是一个变量名。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-12-28T16:54:48.713

此方法使用正则表达式，它应该可以工作：

```
awk '$2 ~ /findtext/ {print $3}' <infile> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-02-06T22:57:39.340

根据`AWK`您使用的实现是否可以`==`。

你试过`~`吗？例如，如果您希望 $1 成为“你好”：

```
awk '$1 ~ /^hello$/{ print $3; }' <infile> 
```

`^`意味着 $1 开始，并且`$`是 $1 结束。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-04T13:57:17.633

这对我来说更具可读性

```
awk '{if ($2 ~ /findtext/) print $3}' <infile> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-07T02:15:20.973

我的 awk 版本是 3.1.5。

是的，输入文件是空格分隔的，没有制表符。

根据 arutaku 的回答，这是我尝试过的有效方法：

```
awk '$8 ~ "ClNonZ"{ print $3; }' test  
0.180467091
0.010615711
0.492569002

$ awk '$8 ~ "ClNonZ" { print $3}' test  
0.180467091
0.010615711
0.492569002 
```

什么不起作用（我不知道为什么，也许是由于我的 awk 版本:)，

```
$awk '$8 ~ "^ClNonZ$"{ print $3; }' test
$awk '$8 == "ClNonZ" { print $3 }' test 
```

感谢大家的回答、评论和帮助！

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-12-28T16:48:31.000

请试试这个

```
echo $VAR | grep ClNonZ | awk '{print $3}'; 
```

或者

```
echo cat filename | grep ClNonZ | awk '{print $3}'; 
```

# extjs - ExtJS 在远程排序存储上设置默认排序？

> ID：14739059
> 
> 赞同：7
> 
> 时间：2013-02-06T21:23:21.290
> 
> 标签：extjs

ExtJS 4.1.3 中有没有办法在 Grid 上设置默认排序，并将后备存储设置为`remoteSort: true`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T21:51:06.743

我错过了文档中的[排序](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Sortable-cfg-sorters)器配置，默认排序可以通过

```
sorters: [ {
    property: 'valuetosort',
    direction: 'ASC'
} ], 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T16:35:23.957

此外，如果您想动态设置排序器并且 remoteSort 为真，那么您可以使用方法[排序](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.data.Store-method-sort)并将排序器配置传递给单个参数。

```
store.sort([{
    property: 'valuetosort',
    direction: 'ASC'
}]) 
```

# c++ - 带有副作用的断言

> ID：14739060
> 
> 赞同：1
> 
> 时间：2013-02-06T21:23:22.363
> 
> 标签：c++

在我今天愉快的调试会话中，我意识到分段错误的原因或多或少如下：

```
assert(functionWithSideEffect());
doSomethingWhichSegfaultsUnlessSideEffectHappens(); 
```

我很清楚你不应该做这样的事情，我显然修复了代码，但我仍然很困惑为什么在使用调试可执行文件进行测试时会发生分段错误，即没有定义 NDEBUG。

*在这种情况下不应该执行断言参数中的函数吗？*

# python - 如何获取最近修改的文件

> ID：14739062
> 
> 赞同：6
> 
> 时间：2013-02-06T21:23:24.690
> 
> 标签：python

我有一个包含一堆文件的文件夹。有没有办法选择最近更新的文件？

例如：

```
FTP_FOLDER = os.path.join(os.getcwd(), 'ftp_folder')
xml_files = [file for file in glob.glob(os.path.join(FTP_FOLDER, '*.xml'))] 
```

现在，如何获取最新的 xml_file？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T21:26:09.513

用于`os.path.getmtime`获取文件修改时间：

```
import os
xml_files.sort(key=os.path.getmtime)
print xml_files[-1] # most recent file 
```

# android - 带有字符串值的枚举？

> ID：14739064
> 
> 赞同：0
> 
> 时间：2013-02-06T21:23:30.353
> 
> 标签：android, enums

在 Android 中，是否可以使用 a`String`作为 a 的基础值`enum`？

还是我必须使用`R.string.myString`（一个`int`值）作为基础`enum`值，然后查找这个整数？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:14:51.063

您可以像这样访问枚举的名称：

```
enum MyEnum { SOMETHING, ANOTHER_THING }

...

MyEnum enum = <either something or another thing>;
enum.name(); // This gets you the string "SOMETHING" or "ANOTHER_THING" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T21:37:55.250

我还没有听说过像你描述的那样。但是，编写一个查找函数相对简单：

```
public String lookupMyEnum(myEnum enum)
{

switch (enum)
{
    case val1:
    return "val1";
    break;
    case val2:
    return "val2";
    break;
    default:
    return NULL;
}

} 
```

这样做是相当标准的。除了，你知道，适当的缩进。

# android - Jelly Bean 4.2 webview显示问题

> ID：14739067
> 
> 赞同：0
> 
> 时间：2013-02-06T21:23:36.033
> 
> 标签：android, webview, android-4.2-jelly-bean

我的应用程序没有在我们的 Jelly Bean（htc evo 4g lte）上显示它的 webview，但在大多数使用 api 16 及更低版本的东西上运行良好。在过去的几个小时里，我一直在网上四处寻找，但还没有找到令人满意的答案，说明为什么我的 webview 不会出现在 4.2 手机上。

这是MainActivity，

```
package com.example;

import java.net.URL;
import android.R.color;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.graphics.Color;
import android.os.Bundle;
import android.text.Html;
import android.view.KeyEvent;
import android.view.View;
import android.webkit.JavascriptInterface;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;
import android.widget.LinearLayout;

import com.example.*;
import com.google.ads.*;

public class MainActivity extends Activity {

private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Request an ad
    AdView ad = (AdView) findViewById(R.id.adView);
    ad.loadAd(new AdRequest());

    Button myButton = (Button) findViewById(R.id.button1);
    myButton.setBackgroundColor(0);
    myButton.setBackgroundResource(color.darker_gray);
    myButton.setOnClickListener(new View.OnClickListener() {  
        public void onClick(View v) {  
            Intent sharingIntent = new Intent(Intent.ACTION_SEND);

            sharingIntent.setType("text/html");

            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml("<p>This is the text that will be shared.</p>"));

            startActivity(Intent.createChooser(sharingIntent,"Share using"));  
                }  
    }); 

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.addJavascriptInterface(webView, DISPLAY_SERVICE);
    webView.getSettings().setLoadsImagesAutomatically(true);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    webView.setScrollbarFadingEnabled(true);
    webView.loadUrl("http://example.com");
    WebView myWebView = (WebView) findViewById(R.id.webView1);
    webView.setBackgroundColor(Color.parseColor("#000000"));
    WebView webView=(WebView)this.findViewById(R.id.webView1);
    Intent intent = new Intent(Intent.ACTION_VIEW);
    webView.getSettings().setAllowFileAccess(true);
    setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
    myWebView.onPause();
    webView.getSettings().setSupportZoom(false);
    webView.getSettings().setDisplayZoomControls(false);
    WebView myWebView1 = (WebView) findViewById(R.id.webView1);
    myWebView1.setWebViewClient(new WebViewClient());
    webView.canGoBack();
    WebSettings config = webView.getSettings();
    config.setJavaScriptEnabled(true);

}

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (webView != null && (keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) {
        webView.goBack();
        return true;
    }
    return true;

}

} 
```

# oop - 关于 OOP 中的方法

> ID：14739072
> 
> 赞同：0
> 
> 时间：2013-02-06T21:23:48.917
> 
> 标签：oop, class, methods

我在 OOP 方面相对较新。

我了解课程、方法等，但我在哲学上遇到了麻烦。

现在，我正在做一个项目来管理项目，包括项目管理、类、方法、变量、用户、组、日志和任务管理。

所以，从`Project`课堂开始，我有：

```
public function create_project()
public function get_projects()
public function delete_project() 
```

然后，`ProjectClass`上课：

```
public class create_class()
public class get_classes()
public class delete_class() 
```

但是，我虽然这不是正确的方法，所以我改为：

`Project`类方法：

set_name、get_name（和类似方法） add_class get_classes add_log get_logs

`ProjectClass`类方法：

set_project_id （并获取） add_variables （并获取） add_method ...

所以，在第一种情况下，是`Project`创建新项目的`ProjectClass`类，创建类和`Method`创建方法的类，在第二种情况下，是`Project`创建和管理其类的类，也是`ProjectClass`创建类的类并管理其方法。

那么，这些“风格”是否正确？

如果第二种情况是正确的情况，谁创建了项目？本身？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:18:56.520

在一般情况下，如果您没有明确的责任分配（我指的是 getter 和 setter 之外的行为），真的很难判断一个设计是否比另一个更好。随着时间的推移，我从前期设计转向迭代/增量设计，一次解决一个问题并根据需要重构设计。在这种情况下，我会尝试制定系统的基本要求，并为每个要求开始一个设计实施周期，并在处理新要求时重新构建模型。

只是一个例子，考虑这个问题：拥有一个不受项目限制的类是否有意义？如果答案是**否定**的，那么使用类似的方法可能是个好主意`Project>>createClass(aClassName)`，因为您明确声明类是在项目的上下文中创建的。您还可以在方法的实现中在类和它所属的项目之间建立适当的连接。然而，在`ProjectClass`将项目作为参数的类。这样你就是说“如果你想创建一个新类，那么你必须提供它所属的项目”。使用哪种方法取决于很多事情，其中​​之一是程序员的品味:)，因此如果没有特定的上下文来评估它们，很难说一种方法是否比另一种更好。

最后，如果有帮助，还有几点值得一提：

*   假设这`public function create_project()`是一个实例方法，为什么一个实例`Project`知道如何创建其他项目？起初它没有多大意义，因为这基本上是类方面的责任，除非您对此有特定的动机（例如，像[原型](http://www.oodesign.com/prototype-pattern.html)模式）。
*   为什么一个项目要回答`get_projects()`？它们有某种关联吗？还是只列出所有项目？话又说回来，这听起来像是类方面的责任。
*   我一般不喜欢添加消息接收者作为消息的一部分表示的概念。所以，我不会调用 message `delete_project()`，因为它是多余的`$project->delete_project()`（你已经知道消息的接收者是一个项目）。
*   您应该与您的班级名称保持一致。如果您使用`ProjectClass`来表示类，那么您应该使用`ProjectMethod`来表示方法（尽管我个人不喜欢这些名称，恕我直言，它们具有误导性）。选择正确的名称并使它们在您的域模型中保持一致是非常重要的。

高温高压

# c++ - win32 控制台应用程序中的打印参数

> ID：14739077
> 
> 赞同：1
> 
> 时间：2013-02-06T21:24:04.787
> 
> 标签：c++, visual-c++

这是我的代码：

```
int _tmain(int argc, _TCHAR* argv[])
{   
    for (int i = 1;i<argc;i++) printf("Argument %d:%s\n",i,argv[i]);
    // output = Argument 1:param

    for (int k = 1; k < argc; k++) cout << "Argument " << k << ": " << argv[k];
    // output =  Argument 1: 00BF5878
    return(0);
} 
```

我的问题是：为什么我在 cout 和 printf 上看到不同的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:28:43.927

您在输出中看到了一个地址，`cout`因为您已经使用`UNICODE`或`_UNICODE`定义了程序。可能是通过 Visual Studio 项目中的设置。然后`_tmain`扩展为 MIcrosoft 的 non-standard `wmain`，并`_TCHAR`扩展为`wchar_t`.

并且`cout`不知道指向的指针`wchar_t`应该如何指向以空字符结尾的宽字符字符串。

我不确定为什么不会发生这种情况`printf`。让我检查一下。

* * *

好的，我已经检查过了，您`printf`没有*按照*您的指示打印“参数”。

这是我检查过的更正代码：

```
#include <iostream>
#include <stdio.h>
#include <tchar.h>
using namespace std;

int _tmain( int argc, _TCHAR* argv[] )
{
    for( int i = 0;i < argc; ++i )
    {
        printf("printf Argument %d:%s\n",i,argv[i]);
    }

    for( int i = 0;  i < argc;  ++i )
    {
        cout << "cout Argument " << i << ": " << argv[i] << endl;
    }
} 
```

结果如下：

```
[D:\开发\测试]
> cl foo.cpp /D _UNICODE
foo.cpp

[D:\开发\测试]
> 富参数
printf 参数 0:f
printf 参数 1:p
cout 参数 0：004F9A9C
cout 参数 1：004F9AA4

[D:\开发\测试]
> _

```

换句话说，明显的难题完全是由于您对结果的不准确报告造成的。

* * *

解决方案：不要使用微软的非标准`wmain`，特别是不要使用现在完全没有意义的 Windows 9x 支持宏！，使用**标准的 C++`main`**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:46:22.757

不同之处在于它`printf`采用参数的内容并*强制*数据与格式说明符匹配。由于格式说明符 ， 的内容`argv[i]`将被视为以 nul 结尾的字符串。`%s`

`cout`结合流插入操作符将根据参数的类型输出。编译器将搜索所有`operator<<()`方法`cout`并选择与参数最匹配的方法。

在您的情况下，编译器正在寻找该方法`operator<<(TCHAR *)`，但没有找到完全匹配的。相反，编译器识别出参数是一个指针，并选择`operator<<(void *)`打印出一个指针。

尝试定义`operator<<(TCHAR*)`，看看会发生什么。

# html - IE CSS 不兼容

> ID：14739078
> 
> 赞同：0
> 
> 时间：2013-02-06T21:24:09.193
> 
> 标签：html, css, internet-explorer

应该如何： [http ://thc-cup.ucoz.com/How_is_should_be_Chrome_and_Firefox.png](http://thc-cup.ucoz.com/How_is_should_be_Chrome_and_Firefox.png)

在 IE 上有多糟糕：http: [//thc-cup.ucoz.com/How_bad_it_is_on_IE.png](http://thc-cup.ucoz.com/How_bad_it_is_on_IE.png)

有什么办法可以让头像区域像 Chrome 和 Firefox 一样显示？

链接：thc-cup.ucoz.com/forum/2-1-1

来自那个盒子的CSS：

```
.postTdInfo { 
text-align:center;
background:#e0e0e0;
display: inline-block; 
margin: 0px 0px 0px 35px; 
padding: 1px; 
border: 1px solid #cfcfcf; 
background: #e0e0e0; 
border-radius: 5px; 
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:35:32.450

我认为这个脚本可以帮助你解决[CSS3 PIE](http://css3pie.com/)

# php - 从 PHP 服务器执行 hadoop jar 失败。没有权限

> ID：14739079
> 
> 赞同：1
> 
> 时间：2013-02-06T21:24:11.173
> 
> 标签：php, hadoop, jar, hbase

我正在尝试从 PHP 服务器执行一个 jar 文件来对我的 HBase 数据库进行简单查询，这样我就可以将结果打印到网页上。

PHP 服务器配置为与 hadoop 用户相同的用户名，以及相同的组。

PHP 执行命令是：

```
exec("bash /usr/local/hadoop/bin/hadoop  jar myjar.jar my.package.MyClass   2> php_error.log", $result); 
```

当我尝试执行命令时出现此异常（在 php_error.log 中）：

```
Exception in thread "main" java.io.IOException: Permission denied
    at java.io.UnixFileSystem.createFileExclusively(Native Method)
    at java.io.File.createTempFile(File.java:1879)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:115) 
```

我知道它与权限有关，但即使在我的 HDFS 和 hadoop 安装文件夹上使用 777，它也不起作用。

有任何想法吗？谢谢你。

另外，这个临时文件要在哪里创建？Hadoop目录？高清晰度电视？在哪里？

编辑：在本地运行它，它工作得很好！没有权限错误！hadoop jar myjar.jar my.package.MyClass

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:37:56.080

你的PHP没问题。问题是，您正在运行的命令正在尝试将文件复制到 hadoop.tmp.dir。它的默认位置是`/tmp/hadoop-${user.name}`. 您也必须授予**该**`/tmp/hadoop`文件夹的权限，或者递归地授予完整目录

**编辑：**

在这种情况下，发现 apache 不是有效用户。解决方法是新建一个用户，加入hadoop组，设置权限为jar，hadoop.tmp.dir，将网页所有者改成创建的用户

# linux - 如何在不使用 yum 或 rpm 的情况下手动将程序安装到 CentOS 6？

> ID：14739082
> 
> 赞同：1
> 
> 时间：2013-02-06T21:24:29.527
> 
> 标签：linux, centos

我在虚拟机中创建了一个 CentOS 服务器，现在我想知道如何在不使用 yum 或 rpm 的情况下从头开始安装程序。我尝试过的每一次搜索关于如何查找每个单独的程序以及我将使用哪些命令来安装它们都返回了非常有用的信息，这些信息说明了为什么使用 yum 会更好，以及如果我没有它如何安装 yum .

所以基本上我只想知道如何找到单个程序的下载链接，如何下载它们（因为我只使用我不熟悉整个过程的文本），以及我需要使用哪些命令来安装它们一旦我有了它们。

多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:38:53.320

在罗马时，伙计。他们告诉你这样做是因为 CentOS*真的*更喜欢基于 rpm 的软件包。它们更易于管理、升级、卸载等。

但是，由于这是一个学习练习，请忽略所有这些。

每个软件都是独一无二的，您需要阅读项目**源代码**附带的安装说明。那里有很多软件使用称为“automake”的系统，其命令通常非常可预测。体验通常是这样的：

1.  从网站下载源代码（通常是 .tar.gz 或 .zip）您可以使用`wget`从网站下载文件。
2.  在本地提取源代码（使用 tar 或解压缩）
3.  设置一些编译器变量（除非您知道自己在做什么，否则不要这样做——默认值通常就足够了，尤其是对于学习练习）。例如`export CFLAGS="-O2 -pipe"`
4.  运行配置脚本`--help`以确定哪些类型的选项是可配置的。`./configure --help`
5.  使用您想要的选项运行配置：`./configure --prefix=/usr/local --enable-option1 --with-library=/path/to/lib --without-cowbell`
6.  这将设置要编译的项目。现在你需要运行make。只需键入`make`
7.  一切编译完成后（假设没有编译错误）运行`make install`. 您通常必须以 root 身份运行此命令。
8.  多田。该软件包已从源代码安装。

当然还有其他编译系统（例如 cmake），但我不会涵盖所有这些系统。事情**会**为你打破。发生这种情况时，Google 是您的朋友。通常这是由于（a）糟糕的源代码，或（b）系统上缺少/过时的库。

还要记住，仅仅因为一个包编译并不意味着它会为你开箱即用。大多数软件包需要一定数量的配置才能真正正常运行，因此请务必阅读您可用的任何文档。

**编辑**

此外，如果你真的想要完整的体验，总有[从头开始的 linux](http://www.linuxfromscratch.org/)可以，并且会教你所有你害怕从源代码编译的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:27:57.583

编译像 tar.bz2 这样的档案。使用 ./configure ， make 和 sudo make install 之后。

# r - r cran 中的 hist vs histogram 函数

> ID：14739085
> 
> 赞同：1
> 
> 时间：2013-02-06T21:24:43.460
> 
> 标签：r, function, histogram

通过在 R 中意外使用函数“直方图”（例如，直方图（myvector）），我能够制作出漂亮的直方图。我关闭了 R，5 分钟后在同一台计算机上打开了相同的脚本，现在 R 是告诉我没有找到功能。我通常使用的函数 hist() 在轴标签的位置和使用频率而不是 y 轴上的百分比方面给出了看起来略有不同的直方图。

只是好奇！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:28:17.190

该`hist`函数是基础 R 的一部分：

```
R> hist
function (x, ...) 
UseMethod("hist")
<bytecode: 0x28fd968>
<environment: namespace:graphics> 
```

直方图函数（很可能）是格子包的一部分

```
R> library(lattice)
R> histogram
function (x, data, ...) 
UseMethod("histogram")
<environment: namespace:lattice> 
```

你加载格子包了吗？如果没有，你加载了什么包？`.Rhistory`如果您不记得，请查看您的文件。或者，您可以使用搜索所有可能的包`??histogram`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:28:13.537

神秘`histogram`功能可能在包装中`lattice`（尽管实际上有数百个）。你`library("lattice")`在之前的课程中做过吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:28:44.317

如果你输入

```
??histogram 
```

在 R 提示符下，它会为您提供一个包含名为 histogram 的函数的所有包的列表。您使用的那个可能来自 lattice。

# java - 计算应税收入 Java

> ID：14739094
> 
> 赞同：2
> 
> 时间：2013-02-06T21:25:08.620
> 
> 标签：java

我刚刚在大学完成了 Java 测试，我知道我回答错了一个特定的问题，希望得到一些帮助/澄清吗？

问题如下：

实施一种获取某人收入并计算税款的方法。如果该人的收入低于 7500，则税金 = 0。如果该人的收入在 7501 和 45000 之间，则税金 = 20%，减去 7500，即免税。最后，如果该人的收入高于 45001，则税 = 40%，减去 20% 范围内的收入，然后减去免税的 7500。

由于时间不多了，我只是做了一个基本的 if else 声明，显示了收入和税级，下面的例子。

```
public static double incomeTax(double income){

    if(income <= 7500){
           income = income * 0;
       }
     else if(income >= 7501 && income <= 45000){
           income = income * 0.8;
       }
     else(income >= 45001){
           income = income * 0.6;
       }
     return income;
} 
```

我知道代码不正确，离我们很近，但在测试即将结束时，我试了一下，希望只是为 if else 语句打分。

我真的很感激这里的任何帮助。

谢谢你。

在得到很好的反馈之后，这就是我回来的结果（有很多帮助！！：]）...

```
import java.util.Scanner;

public class TaxableIncome
{
public static void main(String[] args){
    netIncome();
}

public static double netIncome() {
    double income = 0;

    Scanner in = new Scanner(System.in);

    System.out.print("Enter income: ");
    income = in.nextDouble();
    System.out.println();

    double tax1 = 0;
    double tax2 = 0;
    double totalTax = tax1 + tax2;

    // high income bracket
    if (income > 45000) {
        double part1 = income - 45000; // part = income - 45000
        tax1 += part1 * 0.4; // tax = tax + part * 0.4
        System.out.println("High Tax Band - Greater than 45000: " + tax1);
    }

    // medium income bracket
    if (income >  7500) {
        double part2 = income - 7500;
        tax2 += part2 * 0.2;
        System.out.println("Medium Tax Band - Greater than 7500: " + tax2);
    }

    System.out.println("Total Tax = " + (tax1 + tax2));

    // tax for low income is zero, we don't need to compute anything.

    return totalTax;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:31:50.383

一个简单的答案是这样的：

```
public static double netIncome(double income) {

  double tax = 0;

  // high income bracket
  if (income > 45000) {
    double part = income - 45000;
    tax += part * 0.4;
    income = 45000;
  }

  // medium income bracket
  if (income >  7500) {
    double part = income - 7500;
    tax += part * 0.2;
  }

  // tax for low income is zero, we don't need to compute anything.

  return tax;
} 
```

这样您就可以计算每个税级的税额并将它们相加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:35:42.170

您需要多次尝试应用税率。您的代码只达到一个税级。如果我赚了 100k，我会为整个 100k 缴纳 40% 的税。这是我很快想到的。

```
public static double incomeTax(double income)
{
    double tax = 0.0;
    int midLevel = 7500;
    int highLevel = 45000;

    if (income <= 7500)
    {
        // Could early exit at this point and return already set tax
        tax = 0.0;
    }

    if (income > midLevel)
    {
        // Find range of income > 7500, less than 4500\. 37499 max
        double taxableIncome = Math.min(income - midLevel, highLevel - midLevel - 1);
        tax += taxableIncome * 0.2;
    }

    if (income > highLevel)
    {
        // Income above 45k
        double taxableIncome = income - highLevel;
        tax += taxableIncome * 0.4;
    }

    return tax;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:29:47.247

我看不出逻辑有什么问题。您遇到的主要问题是您只需要退还所得税，而不是总收入。所以你需要返回的值是收入*whateverPercentTax。

另外，我会尝试过：

```
if(income < 7001){
}else if(income >=45001){
}else{} 
```

但是，这只是我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:30:25.647

您必须对乐队征税。脏（未经测试）代码：

```
public static double incomeTax(double income){
    double tax = 0;
    if(income > 7500){
        tax += Math.min(45000-7500, income-7500)*.2;
    }

    if(income > 45000){
        tax += (income-45000)*.4;
    }
    return tax;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-05T04:30:53.450

你可以试试这个，只需将你的收入括号复制到**括号**数组中。确保**括号**数组中有*无穷大*，并从**速率**数组中的*0*开始。

 *****```
import java.util.Scanner;
import java.text.DecimalFormat;
class IncomeTaxWithBrackets {
public static void main(String[] args) {

    double infinity = Double.POSITIVE_INFINITY;
    double [] bracket = {0, 7565, 25903, 54987, 121121, 567894, infinity}; 
    double [] rate = {0, 0.10, 0.15, 0.20, 0.25, 0.30, 0.35};
    // bracket[0] to bracket[1] are assigned rate[1]

    double income = 0;
    double tax = 0;

    System.out.print("\nPlease enter your income: ");

    Scanner keyboard = new Scanner (System.in);
    DecimalFormat dollar = new DecimalFormat ("$#,##0.00");

    income = keyboard.nextDouble();

    int x,i;

    for (i=0; i <= 5; i++) {
        if (income > bracket[i] && income <= bracket[i+1]) {
            for (x=0; x<i; ++x) {
                tax = tax + (bracket[x+1] - bracket[x]) * rate[x+1];
            }   
            tax = tax + (income - bracket[i]) * rate[i+1];
        }
    }       
    System.out.println("\nWith a taxable income of "+dollar.format(income)+", your personal income tax is "+dollar.format(tax));
}
  } 
```

让我知道你的想法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T21:44:37.807

我会从这样的事情开始：

```
public static double incomeTax(int income) {
    final double band00Income = (double) Math.min(income, 7500);
    final double band20Income = (double) Math.min(income - band00Income, 45000 - 7500);
    final double band40Income = (double) Math.max(income - 45000, 0);

    final double tax = band20Income * 0.2 + band40Income * 0.4;

    return tax;
} 
```

请注意，由于英国税收计算的特殊性，收入是一个整数 - 它还解决了 7500.01 和 7500.99 （含）之间未指定情况的问题。

更好的解决方案是提取所有幻数的常量。一个更好的解决方案是将频段和速率概括到一个表格中，以便可以轻松更改它们。

一个完整的答案可能包括这样的测试用例：

```
import org.junit.Assert;
import org.junit.Test;

public class TestTax
{
    public static final double DELTA = 0.1;

    @Test
    public void testTax() {
        Assert.assertEquals(0.0, incomeTax(-3000), DELTA);
        Assert.assertEquals(0.0, incomeTax(0), DELTA);
        Assert.assertEquals(0.2, incomeTax(7501), DELTA);
        Assert.assertEquals(3000.0, incomeTax(22500), DELTA);
        Assert.assertEquals(7500.0, incomeTax(45000), DELTA);
        Assert.assertEquals(7500.4, incomeTax(45001), DELTA);
        Assert.assertEquals(25500.0, incomeTax(90000), DELTA);
    }

    public static double incomeTax(int income) {
        final double band00Income = (double) Math.min(income, 7500);
        final double band20Income = (double) Math.min(income - band00Income, 45000 - 7500);
        final double band40Income = (double) Math.max(income - 45000, 0);

        final double tax = band20Income * 0.2 + band40Income * 0.4;

        return tax;
    }
} 
```*****

# appharbor - 未应用 AppHarbor Web.config 转换

> ID：14739099
> 
> 赞同：11
> 
> 时间：2013-02-06T21:25:34.853
> 
> 标签：appharbor

我正在 ServiceStack 中开发一个应用程序，并试图整理 AppHarbor 上的部署，但是由于某种原因，我的 web.config 转换没有被应用。

我最初有一个 Web.AppHarbor.config 文件并将环境设置更改为“AppHarbor” - 一旦经过几次更新后仍无法正常工作，我放弃并将环境设置更改为“发布”并将所需的转换复制到 Web 中。 Release.Config 文件。

应用程序部署正常，但配置设置不反映转换文件中的值（我通过使用 twitter 登录并查看 Twitter Auth 的回调 url 来验证这一点，仍然试图将我重定向到 localhost，这是我更改的设置之一我的转换文件）

我还尝试了转换测试器工具，所有工作都按预期工作。

手动将 Web 应用程序发布到本地文件夹会根据所选配置正确应用转换

有人有这个工作吗？我有什么明显的遗漏吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T04:19:28.070

听起来该`Web.Release.config`文件未包含在构建输出中。您需要将`Build Action`属性设置为将`Content`其包含在构建输出中。

您可以通过从日志页面下载构建来确认该文件是否包含在输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T20:22:36.490

我偶然发现了这篇文章，因为我自己也看到了同样的缺乏行动。在仔细检查（大约 15 次）我的 Web.Release.config 后，我意识到我的配置文件中的一个节点没有标记为 xdt:Transform="Replace"。不出所料，它在部署时什么也没做。

# php - php filter_var FILTER_FLAG_ENCODE_HIGH

> ID：14739110
> 
> 赞同：2
> 
> 时间：2013-02-06T21:25:54.260
> 
> 标签：php, sanitize, filter-var

我有 php 函数 function_var() 的休闲测试用例：

```
<?php
$inputvalue = "Ž"; //NUM = 142 on the ASCII extended list

$sanitized = filter_var($inputvalue, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_HIGH);

echo 'The sanitized output: '.$sanitized."\n"; // --> & #197;& #189; (Å ½)
?> 
```

如果你运行上面的代码片段，输出不是我期望返回的。Ž 是 ASCII 扩展列表中的第 142 位（参见：ascii-code[dot]com）。所以我期望得到的是'' （字符串，没有空格）。

我得到了[帮助](http://gathering.tweakers.net/forum/list_message/39702978)，找出出了什么问题，我只是不知道如何解决它。

如果将 'Ž' 转换为 Hex UTF-8 字节，则会得到：C5 BD。这些十六进制字节对应于 ISO-8859 十六进制值：Å ½（参见：[http](http://cs.stanford.edu/~miles/iso8859.html) ://cs.stanford.edu/~miles/iso8859.html ）。然后这 2 个字符被 filter_var 解码为 '& #197;& #189;'。

[看到这个在线转换器！！！： http](http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=%C5%BD&mode=char) ://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=%C5%BD&mode=char

所以基本上会发生什么：UTF-8 字节用于将它们转换为 Latin-1 字符字节。转换器页面显示以下内容：“UTF-8 字节作为 Latin-1 字符”是您在使用仅知道 8 位字符的终端或编辑器显示 UTF-8 文件时通常看到的内容。

我不认为我的编辑是问题。我正在使用带有 Coda 2（默认为 UTF-8）的 Mac。该测试还在元字符设置为 utf-8 的 html5 页面上进行了测试。此外，我使用的是默认的 XAMPP localhost 服务器。使用 Firefox 中的 Firebug，我还检查了文件是否以 UTF-8 格式提供（它是）。

任何人都知道如何解决这个编码问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:50:30.623

我要放弃这个，因为我没有找到任何解决方案。email() 函数也不安全，我将使用 phpmailer 或 swiftmailer（我倾向于后者）。

# c# - 在 Where LINQ 查询中使用 Contains()

> ID：14739112
> 
> 赞同：3
> 
> 时间：2013-02-06T21:25:59.017
> 
> 标签：c#, linq, entity-framework, list, contains

我正在使用这段代码从表中获取所需的行列表：

```
_userObjectSet = EntityFrameWorkContext.CreateObjectSet<User>();
List<int> selectedUserIDs = Method(); //Returns a specific set of int user IDs...
var results = _userObjectSet.Where(c => selectedUserIDs.Contains(c.ID)).ToList(); 
```

这确实有效，因为“结果”将仅包含 ID 字段与 selectedUserIDs 列表中的元素匹配的记录。

问题是，如果我查看 Windows 任务管理器，LINQ 似乎加载了表的所有行，然后将它们过滤掉。这张表中有大量的行，很快进程的权重就超过了 1GB，我不太喜欢。

我也可以说它这样做是因为它需要时间来完成。

有什么方法可以告诉 LINQ 生成如下所示的查询：

```
SELECT * FROM Users WHERE ID IN (34,55,66,77, etc.) 
```

这只会返回我正在寻找的确切行并使用更少的内存？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:47:36.187

尝试加入.. 我想你可以找到不同的...

```
List<int> selectedUserIDs = Method(); //Returns a specific set of int user IDs...
var results = (from u in _userObjectSet 
               join id in selectedUserIDs on u.Id equals id
               select u); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T21:34:37.290

为此，您将需要[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx "LinqKit")之类的东西。具体来说，请查看套件随附的 PredicateBuilder，因为我认为您需要它来解决您的问题。

# jquery - jQuery 导航问题

> ID：14739116
> 
> 赞同：0
> 
> 时间：2013-02-06T21:26:09.777
> 
> 标签：jquery

我目前有一个下拉式导航结构构建和工作。我正在尝试通过添加以下元素来扩展导航：

当前工作： 1\. 当悬停在“li”链接上时，与列表相邻的 div 容器显示与链接相关的内容。2.“li”和child“div”背景颜色改变为容器的宽度。 3.当鼠标悬停在链接/div区域时出现容器“.servBox”。

问题：我希望能够将鼠标悬停在“servBox”上而不隐藏它。

这是我目前拥有的......

[http://jsfiddle.net/Robbo/mTNJf/](http://jsfiddle.net/Robbo/mTNJf/)

```
jQuery(".flyout").on('hover', function(){
var num = $(this).data('contentid');
jQuery('#serv-hover-' + num).toggle();
});

.megamenu .col_2,
.megamenu .col_3 {
float: left;
display:inline;
position: relative;
margin-left: 15px;
margin-right: 15px;
}
.megamenu .col_2 {width:149px}
.megamenu .col_3 {width:210px;}
.mm-level-1 ul {}
li.flyout { margin:0; padding: 0;display:block}
li.flyout > div:hover {background-color: #ff0000;margin-right:-100px;padding-right:50px;}

.servBox {
display: none;
top: -1px;
background: #ff0000;
min-height: 230px;
width: 230px;
}

<div class="megamenu">
<div class="col_2">
    <ul class="mm-level-1">
        <li class="flyout" data-contentid="as-1"><div><a href="#">Link 1</a></div></li>
        <li class="flyout" data-contentid="as-2"><div><a href="#">Link 2</a></div></li>
    </ul>
</div>
<div class="col_3">
    <div id="serv-hover-as-1" class="servBox" style="display:none;">Content 1</div>
    <div id="serv-hover-as-2" class="servBox" style="display:none;">Content 2</div>
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:53:37.270

这样的事情怎么样

**jQuery**

```
$(".flyout").hover(
                function(){
                    var num = $(this).data('contentid');
                    $('#serv-hover-' + num).show();
                    $(this).addClass("active");
                },
                 function(){
                     /*on moiuseleave, do nothing*/
                 });
$(".servBox").hover(
                function(){
                     /*on moiuseenter, do nothing*/
                },
                 function(){
                    $(this).hide();
                     $(".flyout").removeClass("active");
                 }); 
```

**附加 CSS**

```
li.active,
li.flyout > div:hover {
   background-color: #ff0000;
   margin-right:-100px;
   padding-right:50px;
} 
```

[http://jsfiddle.net/daCrosby/rn6e5/](http://jsfiddle.net/daCrosby/rn6e5/)

**编辑**

您可以创建一个函数来停用 servBox 并随时调用它 - 例如，在悬停函数中设置活动状态之前。

```
function hideServBox(){
    $(".servBox").hide();
    $(".flyout").removeClass("active");
} 
```

[http://jsfiddle.net/daCrosby/rn6e5/1/](http://jsfiddle.net/daCrosby/rn6e5/1/)

**此外，**

当鼠标离开导航栏区域时，要使这些框也消失，只需[在](http://jsfiddle.net/daCrosby/rn6e5/2/)[悬停的第二个功能上](http://jsfiddle.net/daCrosby/rn6e5/2/)[运行该`hideServBox``.megamenu`](http://jsfiddle.net/daCrosby/rn6e5/2/)功能。或者，像这样组合它们：

```
$(".servBox, .megamenu").mouseleave(
                function(){
                     hideServBox();
                 }); 
```

[http://jsfiddle.net/daCrosby/rn6e5/3/](http://jsfiddle.net/daCrosby/rn6e5/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:56:29.230

使用以下代码：

```
 jQuery(".flyout").on('hover', function(){
var num = $(this).data('contentid');
jQuery(".servBox").hide();
jQuery('#serv-hover-' + num).show(); 
```

});

这只是一个快速修复。也可能有更好的方法。

# css - Ruby -- Escape 变量名中的单引号

> ID：14739126
> 
> 赞同：0
> 
> 时间：2013-02-06T21:26:43.400
> 
> 标签：css, ruby, string

我有这个： `my_variable = "You\'re It"`

我想在页面上的 a 标签中找到它，所以如果我这样做：

```
page.parser.xpath("//a[contains(text(),'#{my_variable}')]")
page.parser.css('a:contains("#{temp_account_name}")')
page.parser.css("a:contains('#{temp_account_name}')") 
```

我收到以上所有错误。

但如果我这样做：

```
page.parser.css('a:contains("You\'re It")') 
```

有用。问题是我不能在上面使用它并在那里放置一个变量。

`'`使用变量并从页面解析时如何转义字符？

在页面上，我正在搜索的文本是 You're It。所以我将转义字符添加到我的变量中以匹配并查找页面上的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:55:11.240

...我认为这是 asp.net？如果是这样，请使用 .replace("'", "''") 。Server.HTMLEncode 也存在有趣的解决方案，但对于 URLS 来说更是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:36:20.730

尝试取消转义所有字符：

```
my_variable.gsub /[^\\](\\)[^\\]/, '' 
```

# django - Django - Slug 字段对于用户必须是唯一的，但不是对所有用户都是唯一的

> ID：14739128
> 
> 赞同：1
> 
> 时间：2013-02-06T21:26:48.040
> 
> 标签：django, django-models

我知道我们可以使用 unique=True 选项要求 SlugField 是唯一的，但是是否可以要求它仅对特定用户是唯一的，所以两个不同的用户可以有相同的 SlugField 但一个用户不能有两个相同的 slugField？

楷模。py:

```
from django.db import models
from django.contrib.auth.models import User

class ezApp(models.Model):
    name = models.SlugField(max_length=50, unique=True )
    date_created = models.DateTimeField('date created')
    date_updated = models.DateTimeField('date updated')
    created_by = models.ForeignKey(User)
    in_use = models.BooleanField() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:37:14.783

您将需要使用 unique_together，如下所述：
[https ://docs.djangoproject.com/en/dev/ref/models/options/#unique-together](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)

```
class MyModel(models.Model):
    # ...

    class Meta:
        unique_together = ('name', 'created_by') 
```

您还必须在表单级别进行一些保姆，因此用户在尝试添加重复名称时会收到可用的错误消息。

# sql-server - 如何使 SQL Server 数据库在附加用户和角色成员资格时继承它们？

> ID：14739131
> 
> 赞同：-1
> 
> 时间：2013-02-06T21:26:56.470
> 
> 标签：sql-server, permissions, utilities

当我附加一个数据库时，我希望在其上创建多个用户并将他们分配给某些固定的数据库角色。有什么方法可以确保这种情况自动发生（可能一次连接数百个数据库），或者是否有任何工具/实用程序可用于此类事情？

如果无法为附加数据库执行此操作，有没有办法为新创建的数据库执行此操作？例如，如果我将用户和角色添加到模型数据库，这些对象和成员资格会被新创建的数据库继承吗？到目前为止它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:14:42.020

A way to handle this by an activation initiated via the SQL Server Service Broker Event:

[Implementing Internal Activation](http://msdn.microsoft.com/en-us/data/ff663135.aspx)

# razor - MVC4 中的数据类型属性

> ID：14739132
> 
> 赞同：1
> 
> 时间：2013-02-06T21:26:57.797
> 
> 标签：razor, asp.net-mvc-4

我的 MVC4 ViewModel 中有以下属性：

```
[DataType(DataType.PhoneNumber)]
public string PhoneNumber { get; set; } 
```

在我看来：

```
@Html.EditorFor(model => model.PhoneNumber) 
```

DataTypeAttribute 有什么好处？它似乎没有进行任何验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:28:07.857

如果您创建一个名为 的编辑器模板`EditorTemplates/PhoneNumber.cshtml`，MVC 将自动将其用于具有该属性的属性。

# sql - SQL 查询以查找 False Negatives wrt 数据匹配或实体解析

> ID：14739134
> 
> 赞同：2
> 
> 时间：2013-02-06T21:27:05.630
> 
> 标签：sql, sql-server, entity, resolution, matching

假设我为同一记录分配了两个不同的 ID。例如

```
记录ID | ID1 | ID2
--------------------
1 | X | 一个
2 | X | 乙
3 | 是 | C
4 | 是 | C
5 | 是 | D
6 | Z | 乙
7 | Z | 乙

```

现在，我想获取`ID1`分配给相同值的记录，其中`ID2`分配给不同的值。

例如，我想得到：

```
1, X, A
2, X, B 
```

这里 ID1 分配了 X，而 ID2 分配了 A 和 B，这是两个不同的值。

是否可以在 SQL 或 SQL 服务器中编写一个返回此类记录的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:58:09.550

如果这是 SQL Server 2005+：

```
WITH minmax AS (
  SELECT
    *,
    minID2 = MIN(ID2) OVER (PARTITION BY ID1),
    maxID2 = MAX(ID2) OVER (PARTITION BY ID1)
  FROM atable
)
SELECT
  RecordID,
  ID1,
  ID2
FROM minmax
WHERE minID2 <> maxID2
; 
```

在`minmax`CTE 中，添加了另外两列，它们`ID2`为每组具有相同`ID1`. `ID2`主查询仅返回相应最小值与最大值不匹配的那些行`ID2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:33:33.147

您需要使用子查询，对于每一行，您都可以浏览表并查看是否有任何其他行符合与其相关的特定条件。

伪sql：

```
select 
      t1.id, 
      t1.variable, 
      t1.value 
   from 
      table t1 
   where 
      exists ( select 1 
                  from t2 
                  where t2.id != t1.id 
                    and t2.variable == t1.variable 
                    and t2.value != t1.value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:47:11.847

我想你正在寻找这个：

```
SELECT RecordID, ID1, ID2
FROM yourtable
WHERE ID1 IN (SELECT ID1
              FROM yourtable
              GROUP BY ID1
              HAVING COUNT(DISTINCT ID2)>1); 
```

[在这里](http://sqlfiddle.com/#!6/e02fa/1)看小提琴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T21:45:18.313

假设我了解您的要求，我认为您所需要的只是`INNER JOIN`：

```
SELECT DISTINCT T.*
FROM YourTable T
  JOIN YourTable T2 ON T.ID1 = T2.ID1 AND T.ID2 <> T2.ID2 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/23b82/2)。

请注意，在此示例中，它返回 X 和 Y 中的所有行。X 因为 A 和 B；Y 因为 C 和 D。这是正确的吗？

祝你好运。

# c# - 尝试使用 .net DevKit 2.0 创建新客户时出错

> ID：14739135
> 
> 赞同：1
> 
> 时间：2013-02-06T21:27:07.640
> 
> 标签：c#, intuit-partner-platform, intuit

当我尝试在 Quickbooks Desktop 中创建新客户时出现错误。

错误：对象引用未设置为对象的实例。

当我尝试为客户创建地址时发生错误。

```
 Customer qbdCustomer = new Customer();
                qbdCustomer.Name = txtCompany.Text;
                qbdCustomer.GivenName = txtFName.Text;
                qbdCustomer.FamilyName = txtLName.Text;                    
                qbdCustomer.Address[0].Line1 = txtAddress.Text;
                qbdCustomer.Address[0].Line2 = txtAddress2.Text;
                qbdCustomer.Address[0].City = txtCity.Text;
                qbdCustomer.Address[0].CountrySubDivisionCode = drpState.SelectedItem.Value;
                qbdCustomer.Address[0].PostalCode = txtZip.Text;
                qbdCustomer.Phone[0].FreeFormNumber = txtPhone.Text;
                qbdCustomer.Email[0].Address = txtEmail.Text;
                Customer customerAdded = (new DataServices(context)).Add(qbdCustomer); 
```

就像我说的那样，当它到达第一个地址行时就会发生错误。Name、GivenName 和 FamilyName 字段有效，因此它必须与地址数组有关。我已经坚持了几天，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:50:13.290

创建一个 PhysicalAddress 对象并将其分配回 Customer Address 属性：

```
Intuit.Ipp.Data.Qbd.PhysicalAddress customerAddress = new Intuit.Ipp.Data.Qbd.PhysicalAddress();
customerAddress.Line1 = txtAddress.Text;
customerAddress.Line2 = txtAddress2.Text;
customerAddress.City = txtCity.Text;
customerAddress.CountrySubDivisionCode = drpState.SelectedItem.Value;
customerAddress.PostalCode = txtZip.Text;
qbdCustomer.Address = new Intuit.Ipp.Data.Qbd.PhysicalAddress[]{ customerAddress }; 
```

这同样适用于电话和电子邮件属性。

# r - 频率计数，按 R 中的两个计数分组

> ID：14739140
> 
> 赞同：1
> 
> 时间：2013-02-06T21:27:36.313
> 
> 标签：r

如何计算出现在两列中的频率？样本数据：

```
> sample <- dput(df)
structure(list(Nom_xp = c("A1FAA", "A1FAJ", "A1FBB", "A1FJA", 
"A1FJR", "A1FRJ"), GB05.x = c(100L, 98L, NA, 100L, 102L, 98L), 
    GB05.1.x = c(100L, 106L, NA, 100L, 102L, 98L), GB18.x = c(175L, 
    173L, 177L, 177L, 173L, 177L), GB18.1.x = c(177L, 175L, 177L, 
    177L, 177L, 177L)), .Names = c("Nom_xp", "GB05.x", "GB05.1.x", 
"GB18.x", "GB18.1.x"), row.names = c(NA, 6L), class = "data.frame") 
```

计数频率：

```
apply(sample[,2:5],2,table) 
```

现在，如何按列的前缀或每两列组合计数？前四列的预期输出将是一个列表：

```
$GB05
98 100 102 106
3  4   2   1
$GB18
173 175 177
2   2   8 
```

获取前两列计数的一种方法：

```
 table(c(apply(sample[,2:3],2,rbind)))
98 100 102 106 
  3   4   2   1 
```

但是如何将其应用于整个 data.frame ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:34:45.433

如果要应用于`table`整个数据框，可以使用：

```
table(unlist(sample[,-1])) 
```

这使 ：

```
 98 100 102 106 173 175 177 
  3   4   2   1   2   2   8 
```

如果您想按列名前缀分组，例如第 4 个第一个字符，您可以执行以下操作：

```
cols <- names(sample)[-1]
groups <- unique(substr(cols,0,4))
sapply(groups, function(name) table(unlist(sample[,grepl(paste0("^",name),names(sample))]))) 
```

这使 ：

```
$GB05

 98 100 102 106 
  3   4   2   1 

$GB18

173 175 177 
  2   2   8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:11:26.590

这是另一个答案，它是安东尼的答案和朱巴的答案之间的混合体。

第一步是将 转换`data.frame`为 "long" `data.frame`。我通常尽可能使用`stack`，但您也可以这样做`library(reshape2); df2 <- melt(df)`以获得类似于我的`df2`对象的输出。

```
df2 <- data.frame(df[1], stack(df[-1]))
head(df2)
#   Nom_xp values    ind
# 1  A1FAA    100 GB05.x
# 2  A1FAJ     98 GB05.x
# 3  A1FBB     NA GB05.x
# 4  A1FJA    100 GB05.x
# 5  A1FJR    102 GB05.x
# 6  A1FRJ     98 GB05.x 
```

接下来，我们需要知道 的唯一值`ind`。juba 是用 做的`substr`，但我在这里用`gsub`和一个正则表达式做的。我们不需要将它添加到我们的`data.frame`; 我们可以直接在我们的其他函数中调用它。立即想到的两个函数是`by`和`tapply`，它们都给你你正在寻找的输出。

```
by(df2$values, 
   list(ind = gsub("([A-Z0-9]+)\\..*", "\\1", df2$ind)), 
   FUN=table)
# ind: GB05
# 
#  98 100 102 106 
#   3   4   2   1 
# ------------------------------------------------------------------------------ 
# ind: GB18
# 
# 173 175 177 
#   2   2   8 

tapply(df2$values, gsub("([A-Z0-9]+)\\..*", "\\1", df2$ind), FUN = table)
# $GB05
# 
#  98 100 102 106 
#   3   4   2   1 
# 
# $GB18
# 
# 173 175 177 
#   2   2   8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:46:23.393

我会说朱巴的答案是正确的，但是鉴于您正在寻找其他东西，也许是这个？

```
library(reshape2)

x <- melt( sample[ , 2:5 ] )

table( x[ , c( 'variable' , 'value' ) ] ) 
```

这使

```
 value
variable   98 100 102 106 173 175 177
  GB05.x    2   2   1   0   0   0   0
  GB05.1.x  1   2   1   1   0   0   0
  GB18.x    0   0   0   0   2   1   3
  GB18.1.x  0   0   0   0   0   1   5 
```

请提供您所需的输出结构的示例:)

# python - 具有作为参数传递的依赖项的函数

> ID：14739142
> 
> 赞同：1
> 
> 时间：2013-02-06T21:27:45.687
> 
> 标签：python

我正在一个项目中批量生成 XML 文件，这些文件可以导入到工业触摸屏的 IDE 中。

每个 XML 文件代表一个屏幕，大多数屏幕需要相同的功能，处理它们的过程是相同的，只是每种屏幕类型都有独特的配置功能。

我正在使用一个`ScreenType`类来保存特定于屏幕类型的属性，因此我决定为每种类型编写一个唯一的配置，并将其作为参数传递给`__init__()`这个类。这样，当我`ScreenType`根据需要传递 my 时，它的配置功能将保持捆绑状态，并且可以在需要时使用。

但是我不确定如果我的配置函数本身具有依赖关系会发生什么。例如：

```
def configure_inputdiag(a, b, c):
    numerical_formatting = get_numerics(a)
    # ...
    return configured_object 
```

然后，当需要创建一个实例时`ScreenType`

```
myscreentype = ScreenType(foo, man, shoe, configure_inputdiag) 
```

`get_numerics`是一个模块范围的函数，但`myscreentype`可以（并且确实）在其他模块中传递。

这会产生依赖关系问题吗？我会尝试自己测试它，但是当我将函数作为参数传递时，我似乎对发生的事情没有基本的了解。我不想对正在发生的事情得出错误的结论。

我尝试过：谷歌搜索，搜索 SO，但我没有找到任何专门用于 Python 的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:36:17.777

这里没有问题。

该函数`configure_inputdiag`将始终`get_numerics`在定义它的上下文中引用。因此，即使您`configure_inputdiag`从其他对 . 一无所知的模块调用`get_numerics`，它也可以正常工作。

将函数作为参数传递会产生对该函数的引用。通过该引用，您可以像按名称调用函数一样调用函数，而无需实际知道名称（或它来自的模块）。该引用在程序的生命周期内有效，并且始终引用相同的函数。如果您存储函数引用，它基本上会成为同一函数的不同名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:36:02.000

您正在尝试做的事情在 Python 中以非常自然的形式工作 -

在上面的示例中，您不需要在“configure_inputdiag”所在的命名空间（模块）中导入“get_numerics”函数 - 您只需将其作为普通参数传递（例如，将其称为“函数”），然后您在这个例子中是这样的：

模块 A：

```
def get_numerics(parm):
    ...

input diag = module_B.configure_inputdiag(get_numerics, a) 
```

模块 B：

```
def configure_inputdiag(function, parm):
     result = function(parm) 
```

哦-我看到您的怀疑是另一种方式-无论如何，没有问题-在Python中，函数是一流的对象-就像整数和字符串一样，它们可以像您一样作为参数传递给其他模块中的其他函数希望。我认为上面的例子说明了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T21:36:11.360

`get_numerics`是在函数体的范围内解析的，所以它也不需要在调用者的范围内。

# java - 如何删除链表中的第一个节点？

> ID：14739143
> 
> 赞同：0
> 
> 时间：2013-02-06T21:27:45.737
> 
> 标签：java, linked-list

我知道这是一个愚蠢的问题，但我很难删除链表中的第一个节点，即使该算法在它不是第一个节点时有效。

```
public boolean eliminarInscripcion(int DNI)
{
    boolean flag=false;
    Nodo aux, aux2;        //Nodo=Node

    if(Raiz!=null) //If the list isn't empty
    {
        aux=Raiz;  //Raiz=Root
        if(aux.getInfo().getDni() == DNI)  //Is the first node the one i'm looking for?
        {
            aux.setProx(aux.getProx()); //Here is the main problem. (I've tried many things, this is one of them, looks silly anyway.)
            flag=true;
        }
        else
        {
            aux2=aux.getProx();  //getProx=getNext
            while(aux.getProx()!=null)
            {
                if (aux2.getInfo().getDni()==DNI)
                {
                    aux.setProx(aux2.getProx());
                    flag=true;
                    break;
                }
                else
                {
                    aux=aux.getProx();
                    aux2=aux2.getProx();
                }
            }
        } 
    }
    return flag;   
} 
```

哦，非常感谢！

编辑：我将添加更多信息：List 类只有 1 个属性，即 Nodo (Raiz)，nodo 类是这个：

```
public class Nodo
{
private Inscripcion Info;
private Nodo Prox;

public Nodo()
{
    Info = null;
    Prox = null;
}

public Nodo(Inscripcion info, Nodo prox)
{
    this.Info = new Inscripcion(info);
    this.Prox = prox;
}

public Inscripcion getInfo() 
{
    return Info;
}

public void setInfo(Inscripcion I) 
{
    this.Info = new Inscripcion(I);
}

public Nodo getProx() 
{
    return Prox;
}

public void setProx(Nodo P) 
{
    this.Prox = P;
}

@Override
public String toString()
{
    return Info.toString();
} 
```

}

Inscripcion 是另一个具有大量数据的类，我认为它在这里不会有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:32:38.577

在链表中，您有一个指向第一个节点的指针和一个指向最后一个节点的指针。您将在（伪代码）中执行以下操作

```
LinkedList list = myList
Node node = list.head // get head
list.head = node.next // set new head to the second node in the list
node.next = null // remove the reference to the next node from the old head 
```

您可能还必须重新分配尾部。

如果您发布您的链表类，我们可以进一步帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:00:56.177

解决了！

```
if(aux.getInfo().getDni() == DNI)
        {
            Raiz=aux.getProx();
            flag=true;
        } 
```

这就是我删除列表中第一个节点的方式！感谢大家的提问/回答！

# .net - TFS 速成版 - 安装在服务器或本地机器上？

> ID：14739144
> 
> 赞同：2
> 
> 时间：2013-02-06T21:27:50.417
> 
> 标签：.net, version-control, tfs

这就是我们在 5 个开发人员中设置 TFS 速成版的方式。我们让首席程序员在他的机器上安装 TFS 2012 Express 版本。附带安装 SQL Server Express 2012 版本。其余 4 名开发人员也在各自的机器上安装了 TFS Express 和 SQL Server express 2012。从他们各自机器的 Visual Studio 内部，这 4 位开发人员连接到 tfs 代码的主要程序员路径。这是正确的设置吗？我在想，如果主要开发人员关闭他的机器，代码数据库也会关闭，因此其他开发人员无法再访问源存储库？那是对的吗？为避免这种情况发生，我是否需要在其自己的专用服务器盒上安装 TFS 2012 express edition 并让所有 5 个开发人员都连接到它，这样至少服务器将始终可以访问。我的想法正确吗？请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T23:58:55.933

TFS 是服务器软件，Visual Studio 是客户端软件。

要使用 TFS，您通常会在**一**台计算机上安装 TFS 服务器（包括 SQL 等），然后您的所有开发人员将从他们安装的 Visual Studio 连接到它。开发人员不应在自己的 PC 上安装 TFS。

如果您关闭 TFS 计算机，则服务器将不会运行，因此任何开发人员都无法访问它 - 没有它，他们将无法使用源代码控制、报告错误等。但是，他们可以“离线”工作，直到服务器重新打开——只要他们的 PC 上有他们需要的代码，他们就不需要服务器运行。

大多数人会建议使用专用 PC 作为 TFS 服务器 - 将服务器用作开发 PC 并不是一个好主意。对于 5 个用户，服务器上的负载将非常低，因此它不需要特别强大的 PC 来运行 SQL 和 TFS，只要它有足够的磁盘空间用于其源代码控制数据库（最好有冗余RAID 和/或一个不错的备份解决方案，因此如果服务器出现故障，您不会丢失所有源代码）。

我建议您在开始安装之前对 TFS 进行更多阅读，以更好地了解它的工作原理 - 这是一个严肃/复杂的软件，您需要仔细遵循安装说明。

# infopath2010 - 是否可以在 infopath 表单按钮规则中调用 NotifyHost 方法？

> ID：14739146
> 
> 赞同：0
> 
> 时间：2013-02-06T21:27:56.153
> 
> 标签：infopath2010

我需要在 infoptah 表单中的按钮控件中调用 NotifyHost 方法。需要使用规则调用它。这可能吗？如果是这样，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:48:54.397

为什么必须使用规则来完成？您可以将按钮的操作更改为“规则和自定义代码”并从那里访问 NotifyHost。您也可以在后面的代码中执行按钮之前执行的任何操作（例如提交、规则、验证等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:53:55.950

通过创建数据连接向主机提交数据并在按钮规则中调用数据连接向主机提交数据解决了问题

# registry - 如何使用 Inno Setup pascal 脚本从注册表中读取 MachineGuid

> ID：14739148
> 
> 赞同：1
> 
> 时间：2013-02-06T21:27:57.343
> 
> 标签：registry, inno-setup, pascalscript

我正在尝试使用 Inno setup pascal 脚本函数 RegQueryStringValue 从 Windows 注册表中读取机器 GUID。我之后的注册表项是 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Cryptography\MachineGuid

```
procedure StoreHwID();
    var
    HwId: String;

begin
   RegQueryStringValue(HKEY_LOCAL_MACHINE, 'SOFTWARE\Microsoft\Cryptography','MachineGuid', HwId);
   MsgBox('Value is "' + HwId + '"', mbInformation, MB_OK);
end; 
```

这无法在 HwId 变量中设置值。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:08:00.373

InnoSetup 是一个 32 位进程。如果您在 64 位操作系统上运行，则需要使用`HKEY_LOCAL_MACHINE_64`而不是指定 64 位注册表`HKEY_LOCAL_MACHINE`。您可能需要打两个`RegQueryStringValue`电话。一个用于 64 位，一个用于 32 位。

# reporting-services - 我如何使用表格或矩阵重新创建它（合并单元格）

> ID：14739158
> 
> 赞同：0
> 
> 时间：2013-02-06T21:28:22.430
> 
> 标签：reporting-services, bids

在这里，我有一个使用列表对象内的文本框手动创建的表：

![在此处输入图像描述](../Images/02ef89eb724c3f0512f513600d5f4c7a.png)

这样做的问题是，如果其中一个文本框的文本过多，它只会增长，而其他文本框将保持相同的高度。

现在另一个问题是您不能合并同一列中的两个单元格（垂直合并）。有没有一种方法可以使用控件组合来复制图片中的内容，这样如果“发布说明”文本框中有太多文本并且它会增长，其他控件也会随之增长？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:27:58.997

两个建议：

**1）**如果您想保留当前的解决方法，并希望避免文本框的增长，您可以将`CanGrow`属性设置为`False`.

长文本的 UI 解决方案将使用`ToolTip`：假设您的文本框只能包含 60 个字符，在文本框表达式中使用以下内容：

`=iif(Len(Fields!YourField.Value)>60, Left(Fields!YourField.Value,57) + "...",Fields!YourField.Value)`

表示文本框中仅显示 57 个字符，全文应显示将悬停在文本框上（使用工具提示）。

**2）**如果你想垂直合并单元格，你可以做一些变通方法。您可以将一个表格放在另一个表格的单元格中，这样您就可以使用多个表格来执行您想要的输出。

在另一个表中附加使用表的示例（我使用 3 个表）：

![在此处输入图像描述](../Images/d8a334a47e3eed663ada3b13df9f6bfb.png)

# java - 无法查看使用 spring 指标注释捕获的指标

> ID：14739159
> 
> 赞同：3
> 
> 时间：2013-02-06T21:28:26.377
> 
> 标签：java, spring, time, jmx, metrics

我该怎么做相当于：

```
 @Override
  public void init(final ServletConfig config) throws ServletException {
    super.init(config);
    CsvReporter.enable(new File("/tmp/measurements"), 1, TimeUnit.MINUTES);
    GraphiteReporter.enable(1, TimeUnit.MINUTES, "my.host.name", 2003);
  }

  @Override
  protected void doGet(final HttpServletRequest req,
          final HttpServletResponse resp) throws ServletException,
          IOException {
    final TimerContext timerContext = Metrics.newMeter(CreateSessionServlet.class,"myservlet-meter", "requests", TimeUnit.SECONDS).time();
    try {
...
  } finally {
      timerContext.stop();
    } 
```

[使用这里](http://metrics.codahale.com/manual/spring/)提到的弹簧注释和 codahale 指标？

我认为这很简单：

- 像这样注释我的 servlet（我最终将需要仪表和计量）：

```
@Timed
@Gauge
@Metered
@Override
protected void doGet(final HttpServletRequest req,
        final HttpServletResponse resp) throws ServletException, IOException { 
```

- 并更新我的 spring-servlet 以启用 spring 注释，如上述页面中所述。

但是当我使用 jconsole 时，我在 MBeans 部分中没有看到我检测的那个 servlet 的任何额外条目，而不是其他不使用任何注释的 servlet

所以我的两个问题：

1.  我是否遗漏了什么，以便我的 Web 应用程序实际上通过 JMX 发送指标数据？

2.  如果我希望带有 spring 注释的代码开始报告到 CSV 文件或石墨，我需要添加什么？

令人惊讶的是，我在网络上或 codahale 的文档中没有找到完整的示例。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-08T08:57:13.410

不幸的是，指标仅基于 AOP，因此它只能用于公共方法

# css - 使用css按对角线分割的双色调背景

> ID：14739162
> 
> 赞同：30
> 
> 时间：2013-02-06T21:28:45.163
> 
> 标签：css, css-transitions

我正在尝试使用 css 创建一个背景，其中一侧是纯色，另一侧是纹理：两者被对角线分割。我希望这是 2 个单独的 div，因为我计划使用 jQuery 添加一些动作，如果单击右侧，灰色三角形会变小，如果单击左侧，纹理三角形会变小（如窗帘效果）。任何建议将不胜感激。

![背景被对角线分割](../Images/f4e56a4e5118c146362a587990dc6932.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-09-20T09:41:53.430

我认为使用带有硬过渡的背景渐变是一个非常干净的解决方案：

```
.diagonal-split-background{
  background-color: #013A6B;
  background-image: -webkit-linear-gradient(30deg, #013A6B 50%, #004E95 50%);
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-06T21:43:08.313

以下是实际示例：http: [//jsbin.com/iqemot/1/edit](http://jsbin.com/iqemot/1/edit)

您可以使用边框像素更改对角线的位置。但是，使用这种方法，您必须将内容放置在背景设置上。

```
#container {
  height: 100px;
  width: 100px;
  overflow: hidden;
  background-image: url(http://www.webdesign.org/img_articles/14881/site-background-pattern-07.jpg);
}

#triangle-topleft {
  width: 0;
  height: 0;
  border-top: 100px solid gray;
  border-right: 100px solid transparent;
}
```

```
<div id="container">
  <div id="triangle-topleft"></div>
</div>
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-07-03T18:04:17.900

对于这类事情，您可以使用伪选择器，例如CSS 中的`:before`或`:after`，以尽量减少不必要的 HTML 标记。

### HTML：

```
<div id="container"></div> 
```

### CSS：

```
#container {
    position: relative;
    height: 200px;
    width: 200px;
    overflow: hidden;
    background-color: grey;

}

#container:before { 
    content: '';
    position: absolute;
    left: 20%;
    width: 100%; 
    height: 200%; 
    background-color: rgb(255, 255, 255); /* fallback */
    background-color: rgba(255, 255, 255, 0.5);
    top: 0;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    transform: rotate(45deg);
} 
```

[JSFiddle](http://jsfiddle.net/b5TnZ/)

然后，我尝试制作它，以便每个部分都可以根据您单击的位置进行扩展。不幸的是，这需要一点额外的 jQuery，因为您的点击位置（相对于框）需要计算出来。

然后将一个类添加到更改`:before`伪对象的框中。使用类的好处是 CSS 动画比 jQuery 动画更适合浏览器。

[JSFiddle](http://jsfiddle.net/PchSZ/)

### 资源：

[使用 jQuery 选择和操作 CSS 伪元素，例如 ::before 和 ::after](https://stackoverflow.com/questions/5041494/manipulating-css-pseudo-elements-using-jquery-e-g-before-and-after)

[使用jQuery如何获取目标元素上的点击坐标](https://stackoverflow.com/questions/3234977/using-jquery-how-to-get-click-coordinates-on-the-target-element)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-29T22:21:53.237

此方法在不同大小的窗口上使用文字并填满屏幕。甚至可以在手机上工作。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Diagonal</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }

        .diagonalimg{
            width: 100%;
            height: 100vh;
            background-image: linear-gradient(to top left, #e394a3 50%, #8dd6a6 50%);
        }
    </style>
</head>
<body>
    <div class="diagonalimg">

    </div>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-17T06:25:36.420

这是一个完全响应的解决方案。请注意第二个停止点的 50.3%，这避免了@timlg07 上述评论中提到的线条像素化

```
.responsive-diagonal {
width: 50vw;
height: 20vh;
background: linear-gradient(to right bottom, #ff0000 50%, #0000ff 50.3%);
}
```

```
<div class="responsive-diagonal"></div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-23T22:04:39.013

方法一：

```
<div class="triangle"></div> 
```

```
body {
  margin: 0;
}

.triangle {
  background-image: linear-gradient(to bottom right, LightGray 50%, Salmon 50%);
  height: 100vh;
} 
```

[https://codepen.io/x-x00102/pen/ZEyEJyM](https://codepen.io/x-x00102/pen/ZEyEJyM)

方法二：

```
<div class="triangle"></div> 
```

```
body {
  margin: 0;
}

div {
  width: 100vw;
  height: 100vh;
}

.triangle::after {
  content: '';
  position: absolute;
  border-top: 100vh solid LightGray;
  border-right: 100vw solid Salmon;
} 
```

[https://codepen.io/x-x00102/pen/VwWwWGR](https://codepen.io/x-x00102/pen/VwWwWGR)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-13T16:10:23.217

这是在一个部分的末尾添加一个对角线三角形的解决方案，它要求两个部分中的一个具有纯色 BG，但允许另一个是渐变或图像。

下面的演示显示了它的主要部分具有渐变，下面的部分是纯色（在本例中为白色）。

```
/* Cruft for the demo */

body {
  margin: 0;
  padding: 0;
}

.gray-block {
  background-image: linear-gradient(to bottom right, #000, #ccc);
  color: #fff;
}

.gray-block__inner {
  padding: 20px;
}

/* The actual solution */

.diagonal-end::after {
  content: "";
  display: block;
  margin-top: -6vw; /* optionally move the diagonal line up half of its height */
  border-top: 12vw solid transparent; /* change 12vw to desired angle */
  border-bottom: 0px solid transparent;
  border-right: 100vw solid #fff;
}
```

```
<div class="gray-block diagonal-end">
  <div class="gray-block__inner">
    <span>Some content</span>
  </div>
</div>
```

# android - 为什么我的应用程序崩溃？我正在使用服务

> ID：14739165
> 
> 赞同：0
> 
> 时间：2013-02-06T21:29:04.243
> 
> 标签：android, android-layout, android-intent, android-service

我做了一项服务，他每 5 秒在屏幕上放一个 TAG（我想这就是它的名称）。当我启动时，它需要将 TAG 放在屏幕上，但他说应用程序崩溃了。为什么？代码：Android清单：

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <receiver android:name="com.YuvalFatal.MyBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
    <service android:enabled="true" android:name="com.YuvalFatal.MyService"/> 
```

广播接收器：

```
 package com.YuvalFatal.ineedhelp;

import java.util.Timer;
import java.util.TimerTask;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyBroadcastreceiver extends BroadcastReceiver {

@Override
public void onReceive(final Context arg0, Intent arg1) {
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        public void run() {
            Intent startServiceIntent = new Intent(arg0, MyService.class);
            arg0.startService(startServiceIntent);
        }
    }, 0, 5000);
}
} 
```

意向服务：

```
package com.YuvalFatal.ineedhelp;

import android.app.IntentService;
import android.content.Intent;
import android.util.Log;

public class MyService extends IntentService {

private static final String TAG = "com.YuvalFatal.ineedhelp";

public MyService(String name) {
    super(name);
    // TODO Auto-generated constructor stub
}

@Override
protected void onHandleIntent(Intent intent) {
    // TODO Auto-generated method stub
    Log.i(TAG, "Intent Service started");
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:27:15.147

我认为（是的，我是魔术师并且有很好的直觉:) 你的 Service 构造函数应该是默认的：

```
public class MyService extends IntentService {
    ...

    public MyService() { // Default constructor! Without params!
        super("MyService"); // Or another string
    }

...
} 
```

其他代码看起来正常

# html - 在小胡子模板中突出显示搜索词

> ID：14739167
> 
> 赞同：0
> 
> 时间：2013-02-06T21:29:08.647
> 
> 标签：html, css, mustache

我有这个简单的胡须模板来列出歌曲标题：

```
<h1>{{#term}}Search: <i>{{.}}</i>{{/term}}{{^term}}Every song{{/term}}</h1>

<ul>
{{#songs}}
    <li><a href="song/{{id}}">{{title}}</a>
{{/songs}}
</ul> 
```

有什么好的方法可以`term`在这里突出`title`使用 mustache 的实例吗？或者我必须在将它传递给模板之前修复它吗？

`<span>`通过突出显示，我的意思是用 a或类似内容包装文本的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:12:47.340

根据您使用的 mustache 实现，您可以使用 lambda 部分来处理您的标题（请参阅[本页上](http://mustache.github.com/mustache.5.html)的“Lambdas” ），但实际上，最好在准备视图时这样做。

# asp.net - 将 Windows 服务迁移到 WCF 以监视表并执行作业处理

> ID：14739168
> 
> 赞同：1
> 
> 时间：2013-02-06T21:29:09.513
> 
> 标签：asp.net, windows, wcf, timer, monitoring

我有一个非常复杂的 Windows 服务，它使用 Timer 并每 3 秒安排一次。它触发 Elapsed 事件处理程序，该处理程序又调用我的 ProcessJob() 方法。这个 ProcessJobMethod() 将调用 BO 和 DO 并为我执行该功能。

我们计划将其移至 WCF，但我对此没有什么疑问

1) 性能是关键 2) 有没有我可以参考的示例 3) 我应该从哪里开始，我的合同应该包含哪些内容以及需要多少个端点？4）现在有复杂的结构，都应该通过DataContracts吗？因为大多数函数的返回类型都是自定义的，如 JObFile.. 5) 将这个项目移至 WCF 的建议是什么？6) 当 WCF 托管在 Windows 服务中时.. 那么消费者是谁？我不需要或没有任何要求来构建控制台或赢取应用程序。只有 Windows 服务 - 我应该将其称为消费者吗

谢谢，我期待一些好的答案，这将为我指明前进的方向。

# windows-runtime - 将 XML 文档添加到 WinRT 项目的最简单方法

> ID：14739172
> 
> 赞同：0
> 
> 时间：2013-02-06T21:29:22.017
> 
> 标签：windows-runtime, sandcastle, ndoc, xml-documentation

我们有一群开发人员从 C++ 转向 C# 和 WinRT。我们将 D'Oxygen 用作 C++ 开发人员构建的一部分，我希望继续将文档生成作为 C#/WinRT 开发人员构建的一部分。

启用 XML Doc 生成很容易，我相信这会为格式错误的标签提供警告，但如果没有实际的 HTML 输出，我认为我们的开发人员会错过有价值的反馈。

看起来 NDoc 现在已经不复存在了，我快速浏览了 Sandcastle，但发现它相当复杂。理想情况下，我正在寻找不会给开发人员造成过度负担或要求他们在编辑、构建、测试和提交时记住额外步骤的东西。换句话说，最好的解决方案是“刚刚发生”的事情，比如构建后的步骤，并且不会显着增加每个开发人员的构建时间。

如果有人在 C#/WinRT 中有过执行此操作的经验，我肯定希望得到一些建议。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:37:09.677

1.  获取[Sandcastle 帮助文件生成器](http://shfb.codeplex.com/)。
2.  在 Visual Studio 解决方案中为您的库创建一个帮助项目。
3.  从调试解决方案配置中删除构建复选标记以仅在发布配置中构建文档项目，因为调试在开发过程中最常使用。对于发布构建测试或性能测试，您可以创建另一个解决方案配置或简单地来回切换选项。
4.  构建文档一次
5.  在解决方案中包含文档文件，以便在文件更改时显示在 Pending Changes 窗口中。
6.  请让您的开发人员在签入之前使用更新文档的发布配置进行构建，或使用任何其他策略来要求更新文档。

![配置管理器启动](../Images/dda7e594971e896e10ae1d290232fb5a.png) ![为调试配置禁用文档构建的配置管理器](../Images/21df87f4d9b2791f8d238e8b5813c021.png) ![便于查看和签入 .chm 文件更新的解决方案结构](../Images/9625b4879f92efc4815026ad02ec33f2.png)

我不认为一直构建文档是有意义的，但它有助于简化操作，以便在您真正需要更新版本时 - 您可以非常快速地构建它。

您还可以确保使用 FXCop 或 StyleCop（忘记了）并将其配置为将缺少的 XML 文档警告视为错误 - 至少在发布版本中。为调试配置执行此操作可能会减慢开发速度并使更改变得困难，因为开发人员通常希望在提交值得记录的最终实现之前尝试一下。

编辑*

Sandcastle 提供了各种输出格式，如项目属性所示：

![在此处输入图像描述](../Images/1a016360902fc7b329b3a0f30ab7bcde.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T06:31:16.667

我想提一下[ForgeDoc](http://www.forgedoc.com/)（我是其中的开发人员），它可能是您正在寻找的东西。它的设计目的是快速和简单，并生成适当的类似 MSDN 的 HTML 输出。它还具有命令行界面，因此您可以从 Visual Studio 中的构建后事件命令中调用它。

我认为你应该试一试，因为我真的很想听听你的想法。

# c# - 使用 Automapper 在 DataReader 中将字符串转换为布尔值

> ID：14739173
> 
> 赞同：2
> 
> 时间：2013-02-06T21:29:38.540
> 
> 标签：c#, .net, automapper

这似乎是一个非常简单的问题，所以希望这很容易。

我在 Automapper 中有一个自定义映射，它简单地将`string`and转换为and 。它并没有变得更简单：`bool``"Y"``"N"``true``false`

```
Mapper.CreateMap<string, bool>().ConvertUsing(str => str.ToUpper() == "Y"); 
```

这在这个原始示例中工作正常：

```
public class Source
{
    public string IsFoo { get; set; }
    public string Bar { get; set; }
    public string Quux { get; set; }
}

public class Dest
{
    public bool IsFoo { get; set; }
    public string Bar { get; set; }
    public int Quux { get; set; }
}

// ...

Mapper.CreateMap<string, bool>().ConvertUsing(str => str.ToUpper() == "Y");
Mapper.CreateMap<Source, Dest>();
Mapper.AssertConfigurationIsValid();

Source s = new Source { IsFoo = "Y", Bar = "Hello World!", Quux = "1" };
Source s2 = new Source { IsFoo = "N", Bar = "Hello Again!", Quux = "2" };
Dest d = Mapper.Map<Source, Dest>(s);
Dest d2 = Mapper.Map<Source, Dest>(s2); 
```

但是，假设我想`Source`从 a 获取数据`DataReader`：

```
Mapper.CreateMap<string, bool>().ConvertUsing(str => str.ToUpper() == "Y");
Mapper.CreateMap<IDataReader, Dest>();
Mapper.AssertConfigurationIsValid();

DataReader reader = GetSourceData();
List<Dest> mapped = Mapper.Map<IDataReader, List<Dest>>(reader); 
```

对于每个`Dest`人来说`mapped`，`IsFoo`财产都是`true`. 我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:04:37.500

我最终放弃了`string`to`bool`映射，而是为`IMemberConfigurationExpression<IDataReader>`. *扩展方法*复数，因为我也遇到了[这个问题](https://stackoverflow.com/questions/2429194/automapper-mapping-ienumerable-to-datareader-issue)，从数据库返回的数字数据与目标类型不完全匹配，导致不一致的大数字。由于数据库内容超出了我的控制范围，我不得不强制映射器将其读取为某种类型。所以这就是我最终的结果：

```
public static class Mapping
{
    public static void Init()
    {
        Mapper.CreateMap<IDataReader, Dest>()
            .ForMember(s => s.IsFoo, opt => opt.ReadAsBoolean("IsFoo"))
            .ForMember(s => s.Quux, opt => opt.ReadAsNumber("Quux"));

        Mapper.AssertConfigurationIsValid();
    }

    public static void ReadAsBoolean(this IMemberConfigurationExpression<IDataReader> opt, string fieldName)
    {
        opt.MapFrom(reader => reader.GetString(reader.GetOrdinal(fieldName)).ToUpper() == "Y");
    }

    public static void ReadAsNumber(this IMemberConfigurationExpression<IDataReader> opt, string fieldName)
    {
        opt.MapFrom(reader => reader.GetDecimal(reader.GetOrdinal(fieldName)));
    }
} 
```

将属性名称重复为字符串不符合我的要求，但我怀疑具有更多 Automapper 技能的人可以使它更优雅。目前，这至少有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:42:21.177

内部`IDataReader`数据存储为对象而不是字符串。所以我假设`AutoMapper`正在评估任何不为空的东西`true`。

# dojo - 默认情况下在蜘蛛图中隐藏一个系列

> ID：14739176
> 
> 赞同：3
> 
> 时间：2013-02-06T21:29:48.720
> 
> 标签：dojo, graphing, dojox.charting

在使用 Dojo 的图形库时，我有一个蜘蛛图，定义如下：

```
require([
    "dojox/charting/Chart", 
    "dojox/charting/themes/Claro", 
    "dojox/charting/plot2d/Spider", 
    "dojox/charting/action2d/Tooltip", 
    "dojox/charting/widget/SelectableLegend", 
    "dojox/charting/axis2d/Default"
    ], function (Chart, theme, Spider, Tooltip, Legend, Default) {
        var chart = new Chart(element).setTheme(theme).addPlot("default", {
            type: Spider,
            radius: 200,
            fontColor: "black",
            labelOffset: "-20"
        });
        var colors = ["blue", "red", "green", "yellow", "purple", "orange", "teal", 
                    "maroon", "olive", "lime", "aqua", "fuchsia"];
        $.each(factors, function (index, factor) {
            chart.addAxis(factor.name, {
                 type: Default,
                 min: factor.min,
                 max: factor.max
             });
        });
        $.each(presets, function (pIndex, preset) {
            var data = [];
            $.each(factors, function (fIndex, factor) {
                 data[factor.name] = preset.values[fIndex];
            });
            chart.addSeries(preset.short, data, {
                 fill: colors[pIndex % colors.length]
            });
        });
        new Tooltip(chart, "default");
        chart.render();
        new Legend({
            chart: chart,
            horizontal: false
        }, $(element).next(".legend")[0]);
    }); 
```

我为调用的数组的每个成员添加了一个系列，`presets`并使用了一个可选择的图例，让用户可以根据需要打开或关闭它们。但是，我在文档中似乎找不到的是如何在未选择、不可见的状态下开始一个系列？我最理想的做法是限制页面加载时可见的系列数量，因为在某些情况下，我有多达 14 个预设，而且在用户取消选择一堆之前，它看起来一团糟。因此，我希望在开始时隐藏前 5 个以上的每个预设。

这是我敲过的一个粗略的[小提琴来演示。](http://jsfiddle.net/92Dzv/)我想要的是在第一次显示情节时取消选择一些系列。

**更新**：我在添加我的系列后尝试添加这个：

```
var checkboxes = $(".dijitCheckBoxInput").each((index, elem) => {
     if (index > 4) {
         elem.click();
     }
}); 
```

哪个有效，但似乎非常脆弱。如果他们更改分配给复选框的类，它将中断。此外，它禁止我使用一组以上的 dojo 复选框，因为我没有很好的方法来区分它们。`SelectableLegend`（注意，由`dijit_form_CheckBox_0`,等添加的复选框的 ID`dijit_form_CheckBox_1`也没有提供有关它们相关内容的有用信息）。我想我也许可以使用图例占位符 div 作为选择后代复选框的一种方式，但似乎 Dojo 完全用表格替换了占位符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:32:55.723

dojox/charting/Series 有一个名为dirty 的属性，根据[API 文档](http://dojotoolkit.org/api/1.8/dojox/charting/Series)，它是一个“指示此元素是否需要呈现的标志”。

或者，如果您要限制某些系列的显示，您可以编写一个单独的界面来添加它们。例如，循环前 5 个。然后创建一个选择框或复选框列表，其中包含所有条目和一个调用 chart.addSeries 的 onchange 事件。

如果用户不再希望显示它，保留对您创建的每个系列的引用将允许您稍后在其上调用 destroy() 或 destroyRecursive()。

因此，虽然理想情况下您可以切换这些系列的显示，但最坏的情况是您只是根据一些用户输入添加、销毁和读取。

使用[模板化小部件](http://dojotoolkit.org/documentation/tutorials/1.8/templated/)将允许您保持此界面和图表紧密链接并支持重用。

顺便说一句，考虑使用“dojo/_base/array”和“dojo/query”代替 jquery

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:38:13.953

我查看了 dojo 代码，发现在 SelectableLegend.js 中打开和关闭形状的区域：

> ```
>  var legendCheckBox = query(".dijitCheckBox", legend)[0];
>           hub.connect(legendCheckBox, "onclick", this, function(e){
>               this._toggle(shapes, i, legend.vanished, originalDyn, seriesName, plotName);
>               legend.vanished = !legend.vanished;
>               e.stopPropagation();
>           }); 
> ```

切换过程非常复杂，并且基于许多本地属性：

```
_toggle: function(shapes, index, isOff, dyn, seriesName, plotName){
            arrayUtil.forEach(shapes, function(shape, i){
                var startFill = dyn.fills[i],
                    endFill = this._getTransitionFill(plotName),
                    startStroke = dyn.strokes[i],
                    endStroke = this.transitionStroke;
                if(startFill){
                    if(endFill && (typeof startFill == "string" || startFill instanceof Color)){
                        fx.animateFill({
                            shape: shape,
                            color: {
                                start: isOff ? endFill : startFill,
                                end: isOff ? startFill : endFill
                            }
                        }).play();
                    }else{
                        shape.setFill(isOff ? startFill : endFill);
                    }
                }
                if(startStroke && !this.outline){
                    shape.setStroke(isOff ? startStroke : endStroke);
                }
            }, this);
        } 
```

我还尝试手动检查和取消选中图例中的 dijit/form/Checkbox，但这在任何情况下都不会触发 _toggle 函数，即使您在图表上执行 render() / fullrender() 也是如此。

**考虑到这一点，除了手动触发 onclick 事件之外，似乎没有其他方法可以打开和关闭系列。**

为了使您的代码不那么脆弱，您可以使用以下方法手动访问图例中的 Checkbox 小部件：

> 查询（“.dijitCheckBox”，图例）；// 应该提供一个包含小部件的数组。

并触发它们的 onclick 事件。它们在数组中的键号应与添加的系列的顺序相对应...

Dojo 是一个很好的作品，请不要停止使用它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T04:18:16.907

我已经更新了你的代码[http://jsfiddle.net/92Dzv/18/](http://jsfiddle.net/92Dzv/18/)

这是toggle的关键。

```
dom.byId(le._cbs[0].id).click();
dom.byId(le._cbs[2].id).click(); 
```

选择图例的索引并设置为`_cbs`。

通过这种方式`le._cbs[0].id`，您将获得复选框的真实 ID（在小部件中），然后使用`click()`

注意：`le`来自这里。

```
var le = new Legend({
                chart: chart,
                horizontal: false
             }, legend); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T00:00:12.030

我想我明白了！

我找到了另一种访问复选框的方法！这与 dojo 在内部使用的将“切换代码”连接到 onclick 事件的方式相同。首先看一下 SelectableLegend.js（第 150 - 156 行）中的内容：

> ```
>  //  toggle action
>           var legendCheckBox = query(".dijitCheckBox", legend)[0];
>           hub.connect(legendCheckBox, "onclick", this, function(e){
>               this._toggle(shapes, i, legend.vanished, originalDyn, seriesName, plotName);
>               legend.vanished = !legend.vanished;
>               e.stopPropagation();
>           }); 
> ```

看起来他们使用“.dijitCheckBox”类来查找复选框 dom 元素并使用 dojo/connect 连接到它。现在基于此，我做了这个功能：

> 函数 toggleSeries (legend,num) {
> 
> dojo.query("*",legend.legends[num])[0].click();
> 
> dijit.findWidgets(legend.legends[num])[0]._onClick(); }

它不使用任何类定义（因为*****）并且它访问 SelectableLegend 中复选框所在的区域。它需要 SelectableLegend 和要停用的系列的编号作为参数。这里是带有此功能的 jsfiddle 示例并用它隐藏您的所有 4 个系列：

[http://jsfiddle.net/luciancd/92Dzv/17/](http://jsfiddle.net/luciancd/92Dzv/17/)

另请注意 jsfiddle 中的“onDomReady”选项，没有它：在 IE 中不起作用。以及代码中的 ready 函数！

卢西安

# symfony - Symfony - FOSUser 捆绑样式表单元素

> ID：14739177
> 
> 赞同：0
> 
> 时间：2013-02-06T21:29:49.757
> 
> 标签：symfony, fosuserbundle

我正在尝试添加类来设置 FOSUser Bundle 使用的某些表单元素的样式...例如；

我想`{{ form_widget(form.plainPassword.first) }}`在我使用的树枝上做造型。

我如何为这个调用添加样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:40:32.880

首先，一定要了解如何[自定义表单元素](http://symfony.com/doc/current/cookbook/form/form_customization.html)

接下来，如[FosuserBundle 文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md)中所述，您将需要创建一个像这样扩展 FosuserBundle 的包

```
namespace Acme\UserBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class AcmeUserBundle extends Bundle
{
    public function getParent()
    {
        return 'FOSUserBundle';
    }
} 
```

FosuserBundle 现在将查看您的资源

**编辑：**

更新表单元素类

```
{{ form_widget(form.plainPassword.first, { 'attr': {'class': 'myformclass'} }) }} 
```

希望这有帮助

# teamcity - 无法找到文件 'C:\BuildAgent\temp\buildTmp\SYSTEM_[AGENT NAME] 2013-02-06 16_25_11\

> ID：14739178
> 
> 赞同：4
> 
> 时间：2013-02-06T21:29:49.530
> 
> 标签：teamcity, mstest

我的 TeamCity 构建中有一个 MSTest 构建步骤。一些测试正在寻找他们无法找到的相对路径中的文件，并且测试正在抛出错误......

找不到路径...

'C:\BuildAgent\temp\buildTmp\SYSTEM_[代理名称] 2013-02-06 16_25_11\Documents\json.value.list.txt'

我有一个 PowerShell 脚本，我想用它来创建文件并将其复制到上述路径。但是，我似乎无法弄清楚用于构建路径的适当 TeamCity 参数......

我有...

%system.teamcity.build.tempDir%\%teamcity.agent.name%\documents

然而，这给了我...

'C:\BuildAgent\temp\buildTmp[代理名称]\Documents\'

我可以使用哪些参数或 TeamCity 变量来构造...

C:\BuildAgent\temp\buildTmp\SYSTEM_[代理名称] 2013-02-06 16_25_11\Documents

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:54:24.113

如果您的测试正在读取文件的内容，这将确保正确解析相对路径，以便可以在 TeamCity 和本地运行测试：

```
string currentDir = new System.Diagnostics.StackFrame(true).GetFileName();
var workingFile = new FileInfo(currentDir);
string fileContents = File.ReadAllText(workingFile.Directory + relativeFilePath); 
```

relativeFilePath 是包含文件的变量。从 TeamCity 或本地运行时，fileContents 将包含此文件的内容。

# ios - 如何在 iPhone 上从 UIWebView 的 HTML 中引用本地图像文件？

> ID：14739179
> 
> 赞同：2
> 
> 时间：2013-02-06T21:30:10.853
> 
> 标签：ios, uiwebview

我想在我的 UIWebView 的 HTML 中使用。 如何引用名为以节省宝贵的加载时间的本地文件？`<img src="`**`temp.jpg`**`" />`
**`temp.jpg`**

当然，显而易见的选择是，但我不知道我的根在哪里......`<img src="`**`.\temp.jpg`**`" />`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T22:22:44.253

这将创建一个 URL 对象，其中包含文件在磁盘上的位置。然后，您可以使用它来输出`file://`可在`img`标签中使用的有效 URL 字符串。

```
NSURL* fileURL = [[NSBundle mainBundle] URLForResource:@"temp" withExtension:@"jpg"];

NSLog(@"<img src=\"%@\" />", fileURL.absoluteString); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T23:07:53.117

```
NSURL *url=[[NSBundle mainBundle] bundleURL];
[webView loadHTMLString:string baseURL:url]; 
```

这让根成为应用程序的主要捆绑包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-25T02:02:51.813

我一直在寻找解决方案，发现以下
在我的情况下工作正常，我有一个本地 HTML 字符串和一个本地图像，我将图像转换为 base 64

您可以使用此网站将图像转换为 base64 编码

[转换器](https://www.base64-image.de/)

并重写 HTML 字符串以在图像标记中包含 base64 图像，如下所示

```
 <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QCMRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAABmgAwAEAAAAAQAAABkAAAAA/+0AOFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/AABEIABkAGQMBEQACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2wBDAAkGBxISEhISEhAQFRUXFRUVEhIQDxAQEBUVFRIWFxUVExUYHSggGBolGxUVITEhJSorLi4uFx8zODMtNygtLiv/2wBDAQoKCg4NDhcQEBctHR0dLS0tLS0rLS0rLS0tLTctLS0tLS4tLS0tLS0tLS0uKy0tLS0tLS0vLSstLS0tLS0rLS3/3QAEAAT/2gAMAwEAAhEDEQA/APTbvxzYRSPE85DoxR18qU4YYyMgc9R0rN1YJ2bO2ll2IqxUoRun5ohPxBsO0sh/3bec/wDstQ8TT7/gdCyXGP7K/wDAo/5iR+PrRnjjQTku6ICYSiguwUElscc0LERbsipZLiYxlKVkkm977a9Dq63PIP/Q6bWbLSftc/nzxLNvLOjXZjJyqnlQeDjHHoRWUqMJO7O+jmWIoxUYSVl5JlOW50RHQLNYsn/LQteM5Xn0zWboJSVo3XU0eb4t/wDLy3okizaeJ9CjlRYRCzl0VWitmcBmkVVzIRgckd62jShHZHPUzDE1FadWTXa56dVnIf/R6/xH8J7W9upbqS4ulaRlYpE0SoCsapwSpPRB3oASD4Pacv3nvG+t0y/+ggUAalh8NNMiIYWxYgggzTTS8g5BwzYzkCgDrsUAf//S9xoAKACgAoA//9k=" alt="Red dot" > 
```

要测试结果，请使用以下在线 HTML 编辑器

[W3学校](https://www.w3schools.com/css/tryit.asp?filename=trycss_default)

希望它对其他人有所帮助，或者可能得到更好的解决方案，祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:33:54.933

> 我不知道我的根在哪里...

`UIWebView`查找与您在其中加载的 HTML 文件相关的文件。所以也许它会是你的应用程序包。

# java - Java如何知道外部jar的方法？

> ID：14739180
> 
> 赞同：4
> 
> 时间：2013-02-06T21:30:13.633
> 
> 标签：java, methods, jar, external

我不明白的是Java如何知道引用的jar的方法？如果它只是为了运行而编译并且您无法阅读它，我看不出您仍然如何看到这些方法。我的问题的一个例子是，如果你使用一种名为“ShowABox”的方法制作了一个让一个盒子出现在屏幕上的罐子。然后将它添加到另一个 Java 项目中。那么IDE如何知道jar已经编译后存在一个名为“ShowABox”的方法呢？您无法在 IDE 中读取类文件，为什么它可以读取方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:34:46.183

由于这个原因，您所引用的所有信息实际上都存储在类文件中。

至于看class文件里的代码，当然可以，也证明信息被保留了。看看[Java 反编译器](http://java.decompiler.free.fr/)。请注意，如果您想直接在那里看到它，您甚至可以将其构建到 eclipse 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:41:27.077

编译的类包含字节码。方法仍然有它们的真实名称，但它们的代码编译为 JVM 指令。

您可以阅读[wiki 上的 java 类文件格式规范](http://en.wikipedia.org/wiki/Java_class_file)，阅读“常量池”段落，方法名称（作为其他类信息）包含在常量池中。

只需尝试在文本编辑器中打开一些 .class 文件，您就会在其中找到方法名称。（.class 文件通常在 project/bin 文件夹中，或者打开 .jar 作为存档并从那里获取 .class 文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:34:32.440

JAR 只不过是压缩在单个文件中的所有类文件，并附有清单。每个类文件都完整地描述了它的公共接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:35:55.120

JAR 文件具有非常特定的格式 - 请参阅[http://en.wikipedia.org/wiki/JAR_(file_format)](http://en.wikipedia.org/wiki/JAR_%28file_format%29) - 它们包含类文件，它们也具有非常特定的格式 - 请参阅[http://en.wikipedia .org/wiki/Java_class_file](http://en.wikipedia.org/wiki/Java_class_file)。这种格式除了为 Java 虚拟机提供执行代码所需的信息外，还为 IDE 和编译器提供查找类、接口、字段、方法等所需的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T21:36:37.870

jar 只不过是一个包含 Java 编译的 .class 二进制文件的存档，压缩成一个单一文件。它的内容是以目录结构组织的编译后的二进制文件。因此，您可以将其视为包含文件但压缩为单个存档的目录（就像 zip 文件一样）。jar 本身不是二进制文件（“自从 jar 已经编译后就存在”）——它不会自己编译，而是包含已编译的元素。

# c - 一种可能的算法来确定两个字符串是否是彼此的字谜？

> ID：14739186
> 
> 赞同：8
> 
> 时间：2013-02-06T21:30:31.350
> 
> 标签：c, string, algorithm, math, anagram

我有这个想法（使用 C 语言）来检查由 ASCII 字母组成的两个字符串是否是彼此的字谜：

1.  检查字符串的长度是否相同。

2.  检查两个字符串的所有字符的 ASCII 值的总和是否相同。

3.  检查两个字符串的所有字符的 ASCII 值的乘积是否相同。

我相信如果这三个都是正确的，那么这些字符串必须是彼此的字谜。但是，我无法证明。有人可以帮我证明或反驳这行得通吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T21:52:09.067

我写了一个快速程序来蛮力搜索冲突，发现这种方法并不**总是**有效。字符串 ABFN 和 AAHM 具有相同的 ASCII 和和积，但不是彼此的字谜。它们的 ASCII 和是 279，ASCII 积是 23,423,400。

还有比这更多的冲突。我的程序搜索所有长度为四个的字符串，发现了 11,737 个冲突。

作为参考，这里是 C++ 源代码：

```
#include <iostream>
#include <map>
#include <string>
#include <vector>
using namespace std;

int main() {
  /* Sparse 2D table where used[sum][prod] is either nothing or is a string
   * whose characters sum to "sum" and whose product is "prod".
   */
  map<int, map<int, string> > used;

  /* List of all usable characters in the string. */
  vector<char> usable;
  for (char ch = 'A'; ch <= 'Z'; ch++) {
    usable.push_back(ch);
  }
  for (char ch = 'a'; ch <= 'z'; ch++) {
    usable.push_back(ch);
  }

  /* Brute-force search over all possible length-four strings.  To avoid
   * iterating over anagrams, the search only explores strings whose letters
   * are in increasing ASCII order.
   */
  for (int a = 0; a < usable.size(); a++) {
    for (int b = a; b < usable.size(); b++) {
      for (int c = b; c < usable.size(); c++) {
        for (int d = c; d < usable.size(); d++) {
          /* Compute the sum and product. */
          int sum  = usable[a] + usable[b] + usable[c] + usable[d];
          int prod = usable[a] * usable[b] * usable[c] * usable[d];

          /* See if we have already seen this. */
          if (used.count(sum) &&
              used[sum].count(prod)) {
            cout << "Conflict found: " << usable[a] << usable[b] << usable[c] << usable[d] << " conflicts with " << used[sum][prod] << endl;
          }

          /* Update the table. */
          used[sum][prod] = string() + usable[a] + usable[b] + usable[c] + usable[d];
        }
      }
    }
  }
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T21:50:38.610

你的方法是错误的；我无法解释为什么，因为我不明白，但至少对于基数 3 有不同的集合，它们具有相同的总和和乘积：[https ://math.stackexchange.com/questions/38671/two-sets- of-3-positive-integers-with-equal-sum-and-product](https://math.stackexchange.com/questions/38671/two-sets-of-3-positive-integers-with-equal-sum-and-product)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-06T22:17:21.293

字母 az 和 AZ 用于索引 26 个素数的数组，这些素数的乘积用作单词的哈希值。相等的产品 <--> 相同的字母。

（以下片段中 primes26[] 数组中哈希值的顺序基于荷兰语中的字母频率，试图模仿预期的产品）

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#define COUNTOF(a) (sizeof (a)/ sizeof (a)[0])

typedef unsigned long long HashVal;
HashVal hashmem (char *str, size_t len);

unsigned char primes26[] =
{
5,71,79,19,2,83,31,43,11,53,37,23,41,3,13,73,101,17,29,7,59,47,61,97,89,67,
};

struct anahash {
        struct anahash *next;
        unsigned freq;
        HashVal hash;
        char word[1];
        };

struct anahash *hashtab[1024*1024] = {NULL,};
struct anahash *new_word(char *str, size_t len);
struct anahash **hash_find(struct anahash *wp);

/*********************************************/

HashVal hashmem (char *str, size_t len)
{
size_t idx;
HashVal val=1;

if (!len) return 0;
for (idx = 0; idx < len; idx++) {
        char ch = str[idx];
        if (ch >= 'A' && ch <= 'Z' ) val *= primes26[ ch - 'A'];
        else if (ch >= 'a' && ch <= 'z' ) val *= primes26[ ch - 'a'];
        else continue;
        }
return val;
}

struct anahash *new_word(char *str, size_t len)
{
struct anahash *wp;
if (!len) len = strlen(str);

wp = malloc(len + sizeof *wp );
wp->hash = hashmem(str, len);
wp->next = NULL;
wp->freq = 0;
memcpy (wp->word, str, len);
wp->word[len] = 0;
return wp;
}

struct anahash **hash_find(struct anahash *wp)
{
unsigned slot;
struct anahash **pp;

slot = wp->hash % COUNTOF(hashtab);

for (pp = &hashtab[slot]; *pp; pp= &(*pp)->next) {
        if ((*pp)->hash < wp->hash) continue;
        if (strcmp( wp->word, (*pp)->word ) > 0) continue;
        break;
        }
return pp;
}

char buff [16*4096];
int main (void)
{
size_t pos,end;
struct anahash *wp, **pp;
HashVal val;

memset(hashtab, 0, sizeof hashtab);

while (fgets(buff, sizeof buff, stdin)) {
        for (pos=0; pos < sizeof buff && buff[pos]; ) {
                for(end = pos; end < sizeof buff && buff[end]; end++ ) {
                        if (buff[end] < 'A' || buff[end] > 'z') break;
                        if (buff[end] > 'Z' && buff[end] < 'a') break;
                        }
                if (end > pos) {
                        wp = new_word(buff+pos, end-pos);
                        if (!wp) {pos=end; continue; }
                        pp = hash_find(wp);
                        if (!*pp) *pp = wp;
                        else if ((*pp)->hash == wp->hash
                         && !strcmp((*pp)->word , wp->word)) free(wp);
                        else { wp->next = *pp; *pp = wp; }
                        (*pp)->freq +=1;
                        }
                pos = end;
                for(end = pos; end < sizeof buff && buff[end]; end++ ) {
                        if (buff[end] >= 'A' && buff[end] <= 'Z') break;
                        if (buff[end] >= 'z' && buff[end] <= 'a') break;
                        }
                pos = end;
                }
        }
for (pos = 0;  pos < COUNTOF(hashtab); pos++) {
        if (! &hashtab[pos] ) continue;

        for (pp = &hashtab[pos]; wp = *pp; pp = &wp->next) {
                if (val != wp->hash) {
                        fprintf (stdout, "\nSlot:%u:\n", pos );
                        val = wp->hash;
                        }
                fprintf (stdout, "\t%llx:%u:%s\n", wp->hash, wp->freq, wp->word);
                }
        }

return 0;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-07T00:44:30.513

谢谢你提出这么好的问题！我没有试图完全反驳你的主张，而是花了一些时间试图找到方法来增强它，使它成为真的。我的感觉是，如果标准差相等，则两者相等。但是，我没有进行那么远的测试，而是进行了更简单的测试，并且还没有找到反例。这是我测试过的：

除了你之前提到的条件，

*   平方和的 ASCII 平方根必须相等：

我使用以下 python 程序。我没有完整的证据，但也许我的回答会有所帮助。无论如何，看看。

```
from math import sqrt

class Nothing:

def equalString( self, strA, strB ):
    prodA, prodB = 1, 1
    sumA, sumB = 0, 0
    geoA, geoB = 0, 0

    for a in strA:
      i = ord( a )
      prodA *= i
      sumA += i
      geoA += ( i ** 2 )
    geoA = sqrt( geoA )

    for b in strB:
      i = ord( b )
      prodB *= i
      sumB += i
      geoB += ( i ** 2 )
    geoB = sqrt( geoB )

    if prodA == prodB and sumA == sumB and geoA == geoB:
      return True
    else:
      return False

  def compareStrings( self ):
    first, last = ord( 'A' ), ord( 'z' )
    for a in range( first, last + 1 ):
      for b in range( a, last + 1 ):
        for c in range( b, last + 1 ):
          for d in range( c, last + 1 ):
            strA = chr( a ) + chr( b ) + chr( c ) + chr( d )
            strB = chr( d ) + chr( c ) + chr( b ) + chr( a )

            if not self.equalString( strA, strB ):
              print "%s and %s should be equal.\n" % ( strA, strB )

    print "Done" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T22:08:19.160

如果您不介意修改字符串，请对每个字符串进行排序并比较两个签名。

# nginx - 如何阻止访问 nginx 中的 php 波浪号文件

> ID：14739187
> 
> 赞同：1
> 
> 时间：2013-02-06T21:30:36.597
> 
> 标签：nginx

出于某种原因，我无法弄清楚如何阻止对备份 PHP 文件的访问，这些文件在 PHP 之后直接使用波浪号重命名为 PHP 波浪号

```
php~ 
```

上面的示例我尝试了一些变体，但似乎无法解决，并且无法在网上任何地方找到答案。

```
location ~ /\.php~ {
      deny  all;
} 
```

这不起作用....谁能告诉我如何实现这一目标？如果您导航到其中一个文件，它将下载它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:33:32.890

你有一个固定的位置集。`/.php~`，仅表示站点根目录中的 .php~ 文件。尝试：

```
location ~ \.php~$ 
```

相反，它将查找以 .ENDS 结尾的任何文件`.php~`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T19:10:59.960

Marc B 是对的，这对我有用：

```
location ~ \.php~$ 
{
    deny all;
} 
```

前提是我将它添加到服务器块的末尾，如下所示：

```
server 
{
   listen          80 default_server;

   index           index.html;
   root            /var/www/default;

   [... other stuff ...]

   location ~ \.php~$ 
   {
      deny all;
   }

} 
```

如果之后还有其他匹配的规则，那么它将匹配它们..

# go - 如何修复此错误“runtime.main: undefined main.init”

> ID：14739188
> 
> 赞同：26
> 
> 时间：2013-02-06T21:30:47.543
> 
> 标签：go

尝试运行一个简单的 hello world go 程序会返回错误。

```
# command-line-arguments
runtime.main: undefined: main.init
runtime.main: undefined: main.main 
```

文件内容：

```
package main    
import "fmt"
func main() {
  fmt.Println("Hello, World!")
} 
```

`main`显然已定义并且添加`func init() {}`无济于事。

`run`和命令都`build`导致相同的错误。

```
go build hello_test.go
go run hello_test.go 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-06T21:52:32.750

将 hello_test.go 重命名为 hello.go，它应该可以按预期工作。以 _test 结尾的 Go 源文件是特殊的（对于 go 构建系统）。它们是为`go test`命令保留的。

# arduino - 处理到 Arduino “IllegalAccessError”

> ID：14739189
> 
> 赞同：2
> 
> 时间：2013-02-06T21:30:52.460
> 
> 标签：arduino, processing

我希望这个确切的问题还没有得到解决。我确实搜索了一段时间。

所以我正在使用[Arduino 库](http://playground.arduino.cc/interfacing/processing)进行处理，只需让它闪烁我已连接到我的 Arduino UNO 的 LED 即可对其进行测试。我正在关注[本教程](http://www.sundh.com/blog/2011/05/get-processing-and-arduino-to-talk/)，但遇到的问题与该教程页面上的问题略有不同。这是我的处理代码：

```
import processing.serial.*;

import cc.arduino.*;

Arduino arduino;

int ledPin = 13;

void setup()
{

  //println(Arduino.list());

  arduino = new Arduino(this, Arduino.list()[0], 57600); //error here

  arduino.pinMode(ledPin, Arduino.OUTPUT);

}

void draw()

{

  arduino.digitalWrite(ledPin, Arduino.HIGH);

  delay(1000);

  arduino.digitalWrite(ledPin, Arduino.LOW);

  delay(1000);

} 
```

这是我的错误：

**IllegalAccessError：试图从类 cc.arduino.Arduino$SerialProxy 访问类 processing.core.PApplet$RegisteredMethods**

```
Stable Library

=========================================

Native lib Version = RXTX-2.1-7

Java lib Version   = RXTX-2.1-7

Exception in thread "Animation Thread" java.lang.IllegalAccessError: tried to access class processing.core.PApplet$RegisteredMethods from class cc.arduino.Arduino$SerialProxy

at cc.arduino.Arduino$SerialProxy.<init>(Arduino.java:119)

at cc.arduino.Arduino.<init>(Arduino.java:168)

at sketch_130206a.setup(sketch_130206a.java:29)

at processing.core.PApplet.handleDraw(PApplet.java:2117)

at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:193)

at processing.core.PApplet.run(PApplet.java:2020)

at java.lang.Thread.run(Thread.java:680) 
```

由于我的错误显然与访问权限有关，因此我尝试通过转到 /var/lock 文件夹来按照教程页面上的说明进行操作，但 /lock 文件夹不存在！我使用的是 Mac 10.8.2。我四处搜索并找到了这个线程（arduino dot cc/forum/index.php?topic=135164.0）并决定在终端中尝试“sudo mkdir -p /var/lock”和“sudo chmod 777 /var/lock”，但是即使重新启动它，它也没有改变我在处理中的错误。我还尝试打开 Arduino 应用程序并上传 StandardFirmata 草图，如 ProcessngxArduino 库下载页面 (playground.arduino dot cc/interfacing/processing) 中所述，同时尝试运行处理草图，但同样的错误。我使用 Arduino UNO 而不是 Duemilanove 的事实不应该 这不是问题，因为 UNO 显然只是它的更新版本。有什么想法我可以尝试下一步吗？

更新：好的，所以我的代码中突出显示的错误是以任何速率打开我正在使用的串行端口（我认为在这种情况下为 57600 位/秒）。所以我认为问题出在前面提到的 adrunio x 处理信息页面的说明中的这个特定步骤（playground dot arduino dot cc/interfacing/processing），第 3 步：“为串行配置处理：处理点 org/reference/libraries /serial/"... 链接转到处理的“串行”参考页。我对“配置”的含义感到困惑？我究竟如何找出我的“正确的串口”？我浏览了串行参考页面上的其余说明和示例，但仍然不知道我在寻找什么。

更新 #2：我的 arduino 串行端口是“/dev/tty.usbmodem1411”。不过，我仍然对如何将其插入到我的处理代码中感到困惑。我刚刚在最近两次更新中学到的东西可能与我的错误无关，我仍然不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:13:52.207

问题是我使用的是 Processing (2.0) 的 beta 版本。使用最新的稳定版本（1.5.1），它应该可以工作。

# python - 使用推荐的python parse.com库来包装他们的REST api，为什么会出现以下情况

> ID：14739197
> 
> 赞同：0
> 
> 时间：2013-02-06T21:31:33.453
> 
> 标签：python, rest, parse-platform

代码：

```
for k in dir(parse_rest.User):
    print parse_rest.User[k] 
```

错误：

```
Traceback (most recent call last):
   File "/home/ntresch/Development/webapp/appcode.py", line 53, in <module>
     for k in dir(parse_rest.User):
AttributeError: 'module' object has no attribute 'User' 
```

[文档](https://github.com/dgrtwo/ParsePy)显示以下内容：

```
#Users
#You can sign up, log in, modify or delete users as well, using the User object. You sign a user up as follows:

u = parse_rest.User.signup("dhelmet", "12345", phone="555-555-5555")

#or log in an existing user with

u = parse_rest.User.login("dhelmet", "12345")
# Once a User has been logged in, it saves its session so that it can be edited or deleted:

u.highscore = 300
u.save()
u.delete() 
```

我真的很想知道我能用用户对象做什么。这种行为似乎很不稳定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T17:25:46.863

这是（当时）过时文档的情况，已于 2013 年 3 月 11 日[修复](https://github.com/dgrtwo/ParsePy/commit/5884cffddee2c0801e654e1cd8eb5fe2f576d98c)。访问 User 类的方法不是`parse_rest.User`但是：

```
from parse_rest.user import User 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:55:28.227

答案是不要使用那个库。我的同事有一个我们回家滚动检查到我们的源代码树，我们正计划发布一个。当我们这样做时，我将在此处发布一个链接以确保完整性。:)

# mongodb - MongoDB 如何同时进行分片和复制？

> ID：14739198
> 
> 赞同：9
> 
> 时间：2013-02-06T21:31:37.107
> 
> 标签：mongodb, replication, sharding

对于扩展/故障转移，mongodb 使用“副本集”，其中有一个主服务器和一个或多个辅助服务器。Primary 用于写入。次要用于读取。这几乎是 SQL 编程中使用的主从模式。如果主节点出现故障，辅助节点集群中的辅助节点将取而代之。因此，水平扩展和故障转移的问题得到了解决。但是，这似乎不是一个允许分片的解决方案。一个真正的分片只保存整个数据的一部分，所以如果副本集中的辅助是分片，当它没有服务请求所需的所有数据时，它怎么能成为主分片？

我们不是必须为每个分片都有一个副本集吗？

这显然是一个初学者的问题，因此视觉或以其他方式说明如何完成的链接将很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:57:39.423

您的假设是正确的，每个分片都包含一个单独的副本集。当有写入请求进来时，MongoS 会根据 shard key 为它找到正确的 shard，并将数据写入该 shard 中包含的副本集的 Primary。这会导致写入扩展，因为（精心选择的）分片键应该将写入分布在所有分片上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:59:09.207

**分片是主要和**次要（副本集）的总和，所以是的，您必须在每个分片中都有一个副本集。

整个数据的一部分保存在主数据库中，并与辅助数据库共享以保持一致性。如果主节点出现故障，辅助节点将被选为新的主节点，并具有与其前任相同的数据以立即开始服务。这意味着分片数据仍然存在并且没有丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:50:51.157

您通常会将各个分片映射到单独的副本集。有关MongoDB 分片的概述，请参阅[http://docs.mongodb.org/manual/core/sharded-clusters/ 。](http://docs.mongodb.org/manual/core/sharded-clusters/)

# ruby-on-rails - 为什么 Bundler 不让我更新一些 gem？

> ID：14739204
> 
> 赞同：-1
> 
> 时间：2013-02-06T21:31:49.643
> 
> 标签：ruby-on-rails, ruby, bundle, gemfile

..................................................... ……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:39:52.283

由于版本要求，您需要同时更新两个 gem。

尝试： `bundle update rspec-rails rspec-core`

编辑：

感谢您发布您的 Gemfile。真正的问题是你已经锁定了你的 rspec-rails 版本。

换行：

`gem 'rspec-rails', '2.1.0'`

到

`gem 'rspec-rails', '~> 2.12.2'`

之后`bundle update rspec-rails` 应该可以完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:45:35.430

在没有看到 Gemfile 的情况下很难准确回答，但该消息表明您在 Gemfile 中依赖于 rspec-core 的 2.10.1 版本，但您还依赖于依赖于 rspec-core 的 rspec-rails 2.1.0 `~> 2.1.0`，这意味着 rspec-core 版本 2.1.0-2.1.x。使用`~>`和 补丁级别版本号，补丁版本（最后一个数字）可以与指定的相同或更高，但不能是次要版本（第二个数字）或主要版本（第一个数字）。

修复方法是，如果您在 Gemfile 中定义了 rspec-rails，则只需从 Gemfile 中删除 rspec/rspec-core，并且 rspec-core 将由 rspec-rails 加载。在撰写本文时 (2013-02-06)，最新的 rspec-rails 是 2.12.2，因此您可能希望使用：`gem 'rspec-rails', '~> 2.12.2'`，然后更新您的测试以使用最新的语法。这样你是最新的，但如果你以后使用`bundle update`，如果新版本是 2.12.3 或更高版本，它会更新，但不会更新到 2.13.x 或更高版本，因为该版本可能与你的测试。

有关更多信息，请阅读：

*   宝石版本：[http ://docs.rubygems.org/read/chapter/16#page74](http://docs.rubygems.org/read/chapter/16#page74)
*   捆绑器文档： http: [//gembundler.com/](http://gembundler.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:29:20.163

@Daniel Evan 的回答应该对你有用，但要解释你问题的下一部分......

bundle install 将使用您当前的 Gemfile.lock 来安装 gem。Gemfile.lock 会在您第一次进行捆绑安装时生成，并在您进行捆绑更新时进行更新。所以，如果你做一个

```
 bundle update 
```

它将使用新生成的依赖树更新您的 Gemfile.lock。这应该可以解决您的问题。

# asp.net - 在剃须刀页面内插入 aspx 页面作为局部视图

> ID：14739206
> 
> 赞同：0
> 
> 时间：2013-02-06T21:31:53.237
> 
> 标签：asp.net, razor

我正在尝试在我的剃须刀代码 (mypage.cshtml) 中加载一个 aspx 页面。我有以下代码，它不起作用：

```
@Html.Partial("~/Video/Upload.aspx") 
```

它给出的错误是：未找到部分视图“~/Video/Upload.aspx”或没有视图引擎支持搜索的位置。搜索了以下位置：~/Video/Upload.aspx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:04:07.820

将 Upload.aspx 移动到您的 Views/Shared 文件夹以使其可访问，并且您的部分将起作用。

# c++ - CUDA 中 2D 三角形平滑的正确网格和块尺寸是多少？

> ID：14739207
> 
> 赞同：1
> 
> 时间：2013-02-06T21:31:53.003
> 
> 标签：c++, cuda

我有一个顺序平滑算法

```
void triangularSmooth(unsigned char *grayImage, unsigned char *smoothImage, const int width, const int height, const float *filter, NSTimer &timer, dim3 grid_size, dim3 block_size) {
for ( int y = 0; y < height; y++ ) {
    for ( int x = 0; x < width; x++ ) {
        unsigned int filterItem = 0;
        float filterSum = 0.0f;
        float smoothPix = 0.0f;

        for ( int fy = y - 2; fy < y + 3; fy++ ) {
            for ( int fx = x - 2; fx < x + 3; fx++ ) {
                if ( ((fy < 0) || (fy >= height)) || ((fx < 0) || (fx >= width)) ) {
                    filterItem++;
                    continue;
                }

                smoothPix += grayImage[(fy * width) + fx] * filter[filterItem];
                filterSum += filter[filterItem];
                filterItem++;
            }
        }

        smoothPix /= filterSum;
        smoothImage[(y * width) + x] = static_cast< unsigned char >(smoothPix);
    }
}
} 
```

我在 CUDA 中实现并希望使用共享变量来保存 grayImage 中的像素。但是在此之前，我正在尝试按原样运行它。为此，我有内核代码：

```
__global__ void smooth(unsigned char *grayImage, unsigned char *smoothImage, const int width, const int height, const float *filter)
{

        int x = blockIdx.x*blockDim.x + threadIdx.x;
        int y = blockIdx.y*blockDim.y + threadIdx.y;

        unsigned int filterItem = 0;
        float filterSum = 0.0f;
        float smoothPix = 0.0f;

        for ( int fy = y - 2; fy < y + 3; fy++ ) {
            for ( int fx = x - 2; fx < x + 3; fx++ ) {
                if ( ((fy < 0) || (fy >= height)) || ((fx < 0) || (fx >= width)) ) {
                    filterItem++;
                    continue;
                }

                smoothPix += grayImage[(fy * width) + fx] * filter[filterItem];
                filterSum += filter[filterItem];
                filterItem++;
            }
        }
        smoothPix /= filterSum;
        smoothImage[(y * width) + x] = static_cast< unsigned char >(smoothPix);
} 
```

并调用：

```
const float filter[] = {1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 2.0f, 2.0f, 2.0f, 1.0f, 1.0f, 2.0f, 3.0f, 2.0f, 1.0f, 1.0f, 2.0f, 2.0f, 2.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f};
dim3 gridSize((width*height)/1024,(width*height)/1024,1);
dim3 blockSize(256,256,1);
smooth <<< gridSize, blockSize >>> (grayImage, smoothImage, width, height, filter);
cudaDeviceSynchronize(); 
```

问题在于，生成的平滑图像看起来像像素都在错误的其他位置（混合在一起）。这是来自网格和块的尺寸吗？我尝试了很多其他可能的尺寸。什么是正确的方法？

我正在使用 GTX480，版本 - 2.x，线程块网格的最大维度 - 3，线程块网格的最大 x、y 或 z 维度 - 65535，每个块的最大线程数 - 1024

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:23:00.900

查看与图像过滤相关的[答案](https://stackoverflow.com/a/14336124/1746411)，我建议您为图像创建块和网格，如下所示：

```
dim3 blockSize(16,16,1);
dim3 gridSize((width + blockSize.x - 1)/blockSize.x,(height + blockSize.y - 1)/blockSize.y,1); 
```

您犯的另一个非常常见的错误是您传递给内核的过滤器数组是在主机上分配的。在设备上创建一个相同大小的数组并将系数从主机复制到设备。将该设备数组传递给内核。

此外，强烈建议在主机端计算滤波器系数的总和并将其作为参数传递给内核，而不是在每个线程中一次又一次地计算总和。

边界条件可能会导致超出范围的内存访问。在内核中显式处理边界条件。或者简单的方法是对输入图像使用 CUDA 纹理，以便自动处理边界条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:14:13.460

首先，尺寸完全无效。在这种情况下，以下应该起作用；

```
dim3 blockSize(16, 16, 1);
dim3 gridSize((width + blockSize.x - 1)/ blockSize.x, (height + blockSize.y - 1) / blockSize.y, 1);
smooth <<< grid_size, block_size >>> (grayImage, smoothImage, width, height); 
```

更正后，使用 cuda-memcheck 产生的结果类似于；

```
========= Invalid __global__ read of size 4
=========     at 0x00000120 in cudaFilter
=========     by thread (4,1,0) in block (1,0,0)
=========     Address 0x05100190 is out of bounds 
```

这表明内核代码中的值超出范围（很可能是数组索引）。检查各种变量导致确定 filter[] 为空。

最后，如果要将 filter[] 传递给内核，则应使用类似的方法将其从 CPU 复制到 GPU

```
cudaMemcpy(filterGpu, filter, 25 * sizeof(float), cudaMemcpyHostToDevice); 
```

或者，如果其他任何地方都不需要过滤器（如这里的情况），则可以在内核中声明它。

# javascript - 如何从 JayData 事务中获取最后插入 ID？

> ID：14739212
> 
> 赞同：1
> 
> 时间：2013-02-06T21:32:34.037
> 
> 标签：javascript, sqlite, lastinsertid, jaydata

使用 JayData 将新对象（记录）插入 Sqlite 数据库，如何查询最后插入 id？我可以这样做，但它似乎不优雅：

```
DB.Members.orderByDescending('member.Id').take(1).toArray(function(member){    
        alert(member.Name);    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:45:31.697

如果您定义了具有自动递增 Id 的 Member 类，则无需编写额外的查询，因为 Id 属性在**saveChanges()**之后自动填充。

要为您的班级定义一个自动递增的 Id，请检查您是否编写了以下内容：

```
$data.Entity.extend("Member", {
    Id: { type: "int", key: true, computed: true },
    ...
});

var member = new Member();
member.Name = "a";
DB.Members.add(member);
DB.Members.saveChanges(function(){alert(member.Id);}); 
```

如果 Id 是手动设置的，那么您的查询仅在应用的单个用户手动插入记录的情况下有效。如果您从在线数据存储同步数据，我们必须共同制定解决方案。

它有效吗？

# javascript - 将动态 Grails g:select 值发送到 JavaScript

> ID：14739215
> 
> 赞同：0
> 
> 时间：2013-02-06T21:32:41.237
> 
> 标签：javascript, grails

我需要帮助尝试从 ag:select 语句中获取值并将它们传递给 JavaScript 函数。

到目前为止，我有按钮

```
 <a href='javascript:void(0)' onclick='runReport("${reportInstance.name}")'>Run Report</a> 
```

它调用了一个 .js 文件

```
function runReport(reportIn){
var url = reportViewerPath + reportDirectory + reportIn + reportSuffix + promptChain;
window.open(url,'Report Viewer','fullscreen=yes,menubar=yes,status=yes');
} 
```

这很好用。现在的挑战是我们在主 .gsp 页面上有 g:select 语句，但它们的数量是可变的。可能没有，也可能有 20 个，这取决于最终用户选择的报告。

```
<g:select id="${prompt.name}" from="${listPromptValues[prompt.name]*.values().collect()}" name="prompt" value="" noSelection="['':'']"/> 
```

这会生成下拉菜单，其中包含任何提示的值。

如何获取页面上每个提示的 ${prompt.name} 和选定值，然后也将其传递给 .js 文件？

理想情况下，当调用 runReport() 时，它将传递报告名称，并且提示将作为

```
&Phone=867-5309&City=NewYork&Name=Jenny 
```

每个 url 变量都是一个可选的 g:select，所以它也可以是

```
&City=NewYork&Name=Jenny 
```

我觉得像这个[相关堆栈溢出问题](https://stackoverflow.com/questions/10904066/retrieving-gselect-value-from-within-gsp-no-form?rq=1)这样的事情会走上正轨。

```
var prompts = "";
$('$prompt.name').change(function() {

    prompts += $(this).text();
    $("a").attr('href', function(i, h) {
        return h + (h.indexOf('?') != -1 ? "&" : "?") + "selectValue="+val;

    });
}); 
```

然而，提示必须是全局的，这样每次发生变化时它都不会被覆盖。

编辑：这是 .gsp 页面上的 DOM 对象

```
<div id="runButton">
    <g:form controller="report">
        <g:if test="${reportInstance?.id}">
            <a href='javascript:void(0)' onclick='runReport("${reportInstance.name}")'>Run Report</a>
        </g:if>
    </g:form>
 </div>

<ol class="property-list report">
    <g:if test="${reportInstance?.prompts}">
    <hr>
    <li class="fieldcontain" id="prompt">
        <g:each var="prompt" in="${reportInstance.prompts}">
                <span id="prompts-label" class="property-label">
                    <g:message code="report.prompts.label" default="${prompt.description}:" />
                </span>
                <g:if test="${prompt.datatype.type == 'DropDown'}">
                    <g:select id="${prompt.name}" from="${listPromptValues[prompt.name]*.values().collect()}" name="prompt" value="" noSelection="['':'']"/>
                  <br>                            
              </g:if>
          </g:each>
        </li>
    </g:if>
</ol> 
```

然后在 run.js

```
function runReport(reportIn){
    var promptChain = $("#prompt :select[name=prompt]").serialize();
    reportName = reportIn;
    ...
} 
```

我做错了吗？

编辑 2： 抓住它应该的提示

```
...
<g:if test="${prompt.datatype.type == 'DropDown'}">
    <g:select id="${prompt.name}" from="${listPromptValues[prompt.name]*.values().collect()}" name="${prompt.name }" value="" noSelection="['':'']"/>
    <br>                            
</g:if>
... 
```

和 jQuery

```
var promptChain = jQuery('select').serialize(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:25:10.080

您正在使用 jQuery，因此只需序列化表单的选择元素。不管他们有多少。无需跟踪一些全局变量。

```
function runReport(reportIn) {
   var promptChain = $("select[name=prompt]").serialize();
   ....
} 
```

这是一个[jsFiddle](http://jsfiddle.net/Uf8LR/)

# c# - 从通用方法调用中转换结果？

> ID：14739216
> 
> 赞同：5
> 
> 时间：2013-02-06T21:32:50.000
> 
> 标签：c#, .net, generics

我目前正在搞乱泛型，我正在尝试编写一个函数，我可以调用它来简单地通过指定表名来从数据库表中加载所有内容。

我大部分时间都在那里；我的通用方法似乎都有效，但我不太确定如何将我的结果转换为可用的东西。

到目前为止，这是该方法的核心：

```
private static List<EntityCodeBase> GetCodeLoadResults(CodeTables table)
{
    List<EntityCodeBase> results = new List<EntityCodeBase>();
    Assembly assm = Assembly.Load(new System.Reflection.AssemblyName("RR"));
    Type tableType = assm.GetTypes().Where(u => u.Name.ToLower() == table.ToString().ToLower()).FirstOrDefault();
    MethodInfo mi = typeof(SpecificEntity).GetMethod("LoadAll");

    mi = mi.MakeGenericMethod(tableType);
    mi.Invoke(null, null); //how can I cast the resulting object into a List<EntityCodeBase> ?

    return results;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:44:24.960

假设`SpecificEntity.LoadAll`返回从 派生的某种类型的列表`EntityCodeBase`，您不能直接转换为 a`List<EntityCodeBase>`但可以转换为`IEnumerable<EntityCodeBase>`。然后您可以创建一个新列表：

```
var ecbList = (IEnumerable<EntityCodeBase>)mi.Invoke(null, null);
return list.ToList(); 
```

但是，如果您可以直接通过名称、使用属性或使用映射从实体类型中获取表名，它可能会更简洁。然后你可以`GetCodeLoadResults`在结果类型中进行泛型，例如

```
private static List<T> GetCodeLoadResults() where T : EntityCodeBase
{
    Assembly assm = Assembly.Load(new System.Reflection.AssemblyName("RR"));
    Type tableType = //get table type from T
    MethodInfo mi = typeof(SpecificEntity).GetMethod("LoadAll");

    mi = mi.MakeGenericMethod(tableType);
    return (List<T>)mi.Invoke(null, null);
} 
```

如果您不使用 .Net 4，则不能将 a`List<TDerived>`转换为 a `IEnumerable<TBase>`，因此您必须先转换为`IEnumerable`：

```
return ((System.Collections.IEnumerable)mi.Invoke(null, null))
    .Cast<EntityCodeBase>()
    .ToList(); 
```

# msmq - MSMQ Listener（windows服务）安装后无法独立接收消息

> ID：14739220
> 
> 赞同：0
> 
> 时间：2013-02-06T21:33:14.963
> 
> 标签：msmq

我有两个异步运行的服务。service1 正在向 service2（响应队列）中的 MessageQueue 发布消息。Service2 正在从队列中提取每条消息并对其进行处理。问题是当 service1 因为完成发送消息而停止运行时...... service2 无法从队列中读取消息（仍然 service2 正在运行）（仍然队列有一些消息要读取）。

当服务一结束并且应用程序关闭时，就像服务 2 进入休眠状态一样。这是预期的行为吗？有没有解决办法。

我想让我的 service2（msmq 侦听器）继续独立于服务 1 接收消息。

```
 using System; 
using System.Diagnostics; 
using System.Net.NetworkInformation; 
using System.ServiceModel; 
using System.ServiceProcess; 
using System.Threading; 
using LOGGER; 
using MSMQ.INTERFACE; 
using RightFax; 
using Tools.Helper; 
using Microsoft.VisualBasic; 
using RFCOMAPILib; 
using FAXHandlerClass = FAXHandlerClass; 
using FAXHandlerState = CONTENT.SYSTEM.FAXHandlerState; 

namespace MSMQ.LISTENER 
{ 
    public partial class Service1 : ServiceBase 
    { 
        public static FaxServer RFFaxApi; 
        private const string LogClass = "MSMQ.LISTENER.PROGRAM::"; 
        private static bool _mBoolMustStop; 
        private static readonly RF2MQCounter Counter = new RF2MQCounter(); 
        private static RFaxServerStatus _rightFaxServerStatus; 
        public static FAXHandlerState MThState = new FAXHandlerState(); 
        private IMessageQueueHandler _queue; 
        public Service1() 
        { 
            InitializeComponent(); 
        } 

        protected override void OnStart(string[] args) 
        { 
            try 
            { 
                var logRoust = "OnStart"; 
                Generic.ConfigParam = LoadConfig.Invoke(LogClass); 

                //Ping the server 
                PingReply rep; 
                var mac = PingServer.Mac(out rep, Generic.ConfigParam.RightFax.server); 
                if (rep != null) 
                { 
                    Logger.Log(string.Format(@"Pinging {0} [{1}]", mac, rep.Address)); 
                    Logger.Log(string.Format("Reply From {0} : time={1} TTL={2}", rep.Address, rep.RoundtripTime, 
                                             rep.Options.Ttl)); 
                    //Connect to the Right Fax Server 
                    Actions.Connect(LogClass, Counter, ref RFFaxApi); 

                    //Start readin gthe queue 
                    IMessageQueueHandler _queue = new Test(); 
                    var threadQueuet = new Thread(_queue.StartRead); 
                    Logger.Log(string.Format("Start reading {0} queue...", 
                                             Generic.ConfigParam.MSMQ.responseQueue)); 
                    threadQueuet.Start(); 
                } 
                else 
                { 
                    Logger.Log(string.Format("Not able to  get a reply From {0} : time={1} TTL={2}", rep.Address, 
                                             rep.RoundtripTime, rep.Options.Ttl)); 
                } 
            } 
            catch (PingException e) 
            { 
                throw; 
            } 
            catch (Exception e) 
            { 
                Logger.Log(string.Format("{0} ::Not able to  start the  MSMQ.LISTENER Service on : {1}  Mesage:: {2}", LogClass, Generic.ConfigParam.RightFax.server, e.Message )); 
                throw; 
            } 
        } 

        protected override void OnStop() 
        { 
            if (_queue != null) 
                _queue.StopRead(); 
            Logger.Log(string.Format("Stopping MSMQ.LISTENER Service {0} queue...", Generic.ConfigParam.MSMQ.responseQueue)); 
        } 

        /// <summary> 
        /// Connect to the Rightfax server 
        /// </summary> 
        /// <param name="ref">Used for logging the routine</param> 
        /// <returns>The RightFax server connection status</returns> 
        /// <remarks></remarks> 
        public static RFaxServerStatus ConnectToRightFax(string @ref) 
        { 
            var logRoust = @ref + LogClass + "CONNECTION::"; 

            var retryCounter = 0; 

            Generic.ConfigParam = LoadConfig.Invoke(LogClass,Counter); 
            Logger.Log(string.Format("{0} - Connecting to {1} as user {2}", logRoust, Generic.ConfigParam.RightFax.server, "")); 
            _rightFaxServerStatus = RFaxServerStatus.Connecting; 

            try 
            { 
                if ((RFFaxApi != null)) 
                    RFFaxApi.CloseServer(); 
            } 
            catch 
            { 
                //We do nothing.... We will destroy the object anyway 
                //return false; 
            } 
            RFFaxApi = null; 

            do 
            { 
                MThState.AddEventState = new FAXHandlerClass(FaxHandlerStateEnum.ConnectingRfax); 

                try 
                { 
                    //********************************************************************************************** 
                    //    This section determines how quickly we try to reconnect 
                    //    Try the 1st 5 times 5 second apart 
                    //        the 2nd 5 times 30 seconds apart 
                    //        the 3rd 5 times 60 seconds apart 
                    //        every 300 seconds (5 mins) forever after that 
                    //********************************************************************************************** 
                    int sleepInterval; 
                    if (retryCounter > 15) 
                    { 
                        sleepInterval = 300000; 
                    } 
                    else 
                    { 
                        if (retryCounter > 10) 
                        { 
                            sleepInterval = 60000; 
                        } 
                        else 
                        { 
                            sleepInterval = retryCounter > 5 ? 30000 : 5000; 
                        } 
                    } 

                    //************************************************** 
                    //    Connect to the RightFax Server 
                    //************************************************** 
                    Logger.Log(string.Format("{0} - Attempt # {1}", logRoust, retryCounter)); 

                    if (retryCounter > 0) 
                    { 
                        Logger.Log(string.Format("{0} - Waiting # {1} seconds before trying to reconnect.", logRoust, sleepInterval / 1000)); 
                        Thread.Sleep(sleepInterval); 
                    } 

                    Logger.Log(string.Format("{0} - Initializing Connection to RightFax.", logRoust)); 

                    RFFaxApi = new FaxServer 
                    { 
                        ServerName = Generic.ConfigParam.RightFax.server.Trim(), 
                        UseNTAuthentication = RFCOMAPILib.BoolType.False, 
                        AuthorizationUserID = Generic.ConfigParam.RightFax.userID, 
                        AuthorizationUserPassword = Generic.ConfigParam.RightFax.password, 
                        Protocol = (CommunicationProtocolType)Generic.ConfigParam.RightFax.communicationProtocol 
                    }; 
                    //Verify if the RightFax Service is runing before connecting 
                    //var controller = new ServiceController("RightFax Server Module", _rfFaxApi.ServerName); 
                    //if ((controller.Status.Equals(ServiceControllerStatus.Running))) 
                    //{ 
                    try 
                    { 
                        RFFaxApi.OpenServer(); 
                        _rightFaxServerStatus = RFaxServerStatus.Connected; 
                        retryCounter = 0; 
                        Logger.Log(string.Format("{0} - Connected to {1} (V. {2}) as user {3}", logRoust, RFFaxApi.ServerName, RFFaxApi.Version, RFFaxApi.AuthorizationUserID)); 

                    } 
                    catch (Exception ex) 
                    { 

                        Logger.Log(string.Format("{0} - ERROR Connected to {1} (V. {2}) as user {3} MESSAGE: {4}", logRoust, RFFaxApi.ServerName, RFFaxApi.Version, RFFaxApi.AuthorizationUserID, ex.Message)); 
                    } 

                } 
                catch (System.Runtime.InteropServices.COMException ex) 
                { 
                    //Its OK not to end the loop. This is possibly a temporary error condition. 
                    Logger.Log(string.Format("{0} - Connection failed Message: {1}", logRoust, ex.Message), EventLogEntryType.Warning); 
                } 
                catch (Exception ex) 
                { 
                    if (Strings.InStr(ex.Source, "RFComAPI.FaxServer") > 0 | Strings.InStr(ex.Source, "Interop.RFCOMAPILib") > 0) 
                    { 
                        //Its OK not to end the loop. This is possibly a temporary error condition. 
                        Logger.Log(string.Format("{0} - Connection failed : Message {1} ", logRoust, ex.Message), EventLogEntryType.Warning); 
                    } 
                    else 
                    { 
                        _rightFaxServerStatus = RFaxServerStatus.NotConnected; 
                        Logger.Log(string.Format("{0} - Connection failed. Message: {1}", logRoust, ex.Message), EventLogEntryType.Error); 
                        throw new Exception(string.Format("{0} - Connection failed. Message: {1}", logRoust, ex.Message)); 
                    } 

                } 
                finally 
                { 
                    retryCounter += 1; 
                } 

            } while (!(_rightFaxServerStatus == RFaxServerStatus.Connected | _mBoolMustStop)); 
            return _rightFaxServerStatus; 

        } 
    } 
} 

--------------------------------------------- 
using System.Net.NetworkInformation; 
using System.ServiceProcess; 
using System.Threading; 
using LOGGER; 
using MSMQ.INTERFACE; 
using .RightFax; 
using Tools.Helper; 
using RFCOMAPILib; 
using FAXHandlerState = HandlerState; 

namespace MSMQ.LISTENER 
{ 
    static class Program 
    { 

        private const string LogClass = "MSMQ.LISTENER.PROGRAM::"; 
        public static FaxServer RFFaxApi; 

        private static bool _mBoolMustStop; 
        private static readonly RF2MQCounter Counter = new RF2MQCounter(); 
        private static RFaxServerStatus _rightFaxServerStatus; 
        public static FAXHandlerState MThState = new FAXHandlerState(); 

        /// <summary> 
        /// The main entry point for the application. 
        /// </summary> 
        static void Main() 
        { 
             Run(); 
            //OR comment above to be able to Debug 
            //Uncomment below to start in debug mode 
         // Start(); 
        } 

        private static void Run() 
        { 
            var servicesToRun = new ServiceBase[] 
                                              { 
                                                  new Service1() 
                                              }; 
            ServiceBase.Run(servicesToRun); 
        } 
        public static void StartThreadProc(object stateInfo) 
        { 
            Start(); 
        } 

        public static void Start() 
        { 
            try 
            { 
                var logRoust = "OnStart"; 
                Generic.ConfigParam = LoadConfig.Invoke(LogClass); 

                //Ping the server 
                PingReply rep; 
                var mac = PingServer.Mac(out rep, Generic.ConfigParam.RightFax.server); 
                if (rep != null) 
                { 
                    Logger.Log(string.Format(@"Pinging {0} [{1}]", mac, rep.Address)); 
                    Logger.Log(string.Format("Reply From {0} : time={1} TTL={2}", rep.Address, rep.RoundtripTime, 
                                             rep.Options.Ttl)); 
                    //Connect to the Right Fax Server 
                    Actions.Connect(LogClass, Counter, ref RFFaxApi); 

                    //Start readin gthe queue 
                    IMessageQueueHandler _queue = new Isoconvoceresponse(); 
                    var threadQueuet = new Thread(_queue.StartRead); 
                    Logger.Log(string.Format("Start reading {0} queue...", 
                                             Generic.ConfigParam.MSMQ.responseQueue)); 
                    threadQueuet.Start(); 
                } 
                else 
                { 
                    Logger.Log(string.Format("Not able to  get a reply From {0} : time={1} TTL={2}", rep.Address, 
                                             rep.RoundtripTime, rep.Options.Ttl)); 
                } 
            } 
            catch (PingException e) 
            { 
                throw; 
            } 
        } 

    } 
} 

___________________________ 
namespace MSMQ.INTERFACE 
{ 
    public interface IMessageQueueHandler 
    { 
        void StartRead(); 
        void StopRead(); 
    } 
} 
-------------- 
using System; 
using System.Diagnostics; 
using System.Globalization; 
using System.Messaging; 
using System.Net.NetworkInformation; 
using System.ServiceModel; 
using System.ServiceProcess; 
using System.Threading; 
using CONTENT.SYSTEM; 
using LOGGER; 
using MSMQ.INTERFACE; 
using RightFax; 
using RightFax.Tools.Helper; 
using RFCOMAPILib; 
using MessageQueue = System.Messaging.MessageQueue; 
using RF2MQCounter = RF2MQCounter; 

namespace MSMQ.LISTENER 
{ 

    public class Test : IMessageQueueHandler 
    { 
        private MessageQueue _queue; 
        private readonly string _queueName; 
        private const string LogClass = ".MSMQ.LISTENER::"; 
        private readonly ManualResetEvent manualResetEvent = new ManualResetEvent(true); 
        private long handle ; 

        /// <summary> 
        /// 
        /// </summary> 
        public Test() 
        { 

            const string logroust = LogClass + "Isoconvoceresponse"; 
            Generic.ConfigParam = LoadConfig.Invoke(logroust); 
            _queueName =Generic.ConfigParam.MSMQ.responseQueue; 
        } 

        /// <summary> 
        /// 
        /// </summary> 
        public void StartRead() 
        { 

           // System.Diagnostics.Debugger.Break(); 
            const string logRoust = LogClass + "StartRead::"; 
            try 
            { 
                Logger.Log(String.Format("{0} - Start Reading the {1} Queue .", logRoust, Generic.ConfigParam.MSMQ.responseQueue )); 
                _queue = new MessageQueue(_queueName) {Formatter = new XmlMessageFormatter(new[] {typeof (string)})}; 

                _queue.MessageReadPropertyFilter.SetAll(); 
                var objDefProps = new System.Messaging.DefaultPropertiesToSend 
                { 
                    Priority = MessagePriority.High, 
                    Recoverable = true, 
                    UseDeadLetterQueue = true, 
                    UseJournalQueue = true, 

                }; 
                _queue.DefaultPropertiesToSend = objDefProps; 

                _queue.PeekCompleted += QueuePeekCompleted; 
                _queue.BeginPeek(); 
                //_queue.ReceiveCompleted += QueueReceiveCompletedd;//Event handler 
                //_queue.BeginReceive(); 

            } 
            catch (Exception ex) 
            { 
                Actions.SetGenericFlagOff(handle.ToString(CultureInfo.InvariantCulture),Generic.ConfigParam.dbConnectionString); 
                Logger.Log( 
                    String.Format("{0} - Start Reading the {1} failed  : Error: {2}.", logRoust, Generic.ConfigParam.MSMQ.responseQueue, ex.Message), 
                    EventLogEntryType.Error); 
                throw; 
            } 
        } 

        public static void OnServiceFaulted(object sender, EventArgs e) 
        { 

            Logger.Log(string.Format("{0} ::Service Faulted: {1}  Mesage:: {2}", LogClass, Generic.ConfigParam.RightFax.server, e.ToString())); 

        } 

        public void StopRead() 
        {//make the process synchronous before closing the queue 
            manualResetEvent.WaitOne(); 

            if (_queue == null) return; 
            _queue.Close(); 
            _queue = null; 
        } 

        /// <summary> 
        /// 
        /// </summary> 
        /// <param name="sender"></param> 
        /// <param name="e"></param> 
        private void QueuePeekCompleted(object sender, PeekCompletedEventArgs e) 
        { 

           // System.Diagnostics.Debugger.Break(); 
            const string logRoust = LogClass + "QueuePeekCompleted::"; 

            var message = _queue.EndPeek(e.AsyncResult); 
            _queue.Receive(); 
            _queue.BeginPeek(); 

          var allMessagesOnResponseQueue = _queue.GetAllMessages(); 

          foreach (var msg in allMessagesOnResponseQueue) 
          { 
              Logger.Log(String.Format("{0} - Messages QueuePeekCompleted event handler {1}", logRoust, message.Label + " - " + message.Id)); 

          } 
          do 
            { 

                try 
                { 
                    if (message.MessageType == MessageType.Acknowledgment) 
                        switch (message.Acknowledgment) 
                        { 
                            case Acknowledgment.Purged: 
                                Logger.Log("Message Purged {0}", message.Body.ToString()); 
                                break; 
                            case Acknowledgment.QueueExceedMaximumSize: 
                                Logger.Log("Message Queue Exceed MaximumSize {0}", message.Body.ToString()); 
                                break; 
                            case Acknowledgment.QueuePurged: 
                                Logger.Log("Message Queue Purged {0}", message.Body.ToString()); 
                                break; 
                            case Acknowledgment.ReceiveTimeout: 
                                Logger.Log("Message ReceiveTimeout {0}, Now restarting MSMQ.LISTENER Service", 
                                           message.Body.ToString()); 
                                var controller = new ServiceController("MSMQ.LISTENER", "STHA38994.iad.ca.inet"); 
                                if (controller.Status.Equals(ServiceControllerStatus.Running)) 
                                    controller.Start(); 
                                break; 
                            case Acknowledgment.ReachQueue: 
                                Logger.Log("Message Reached Queue {0}", message.Body.ToString()); 
                                break; 
                            case Acknowledgment.Receive: 
                                Logger.Log("Message Received {0}", message.Body.ToString()); 
                                break; 
                        } 

                    /
                    if (message.MessageType == MessageType.Normal) 
                    { 
                        var messageDetail = message.Label.Split(' '); 
                        var pdfFileDetails = messageDetail[1].Split('_'); 
                         handle = Convert.ToInt64(pdfFileDetails[0]); 
                        var isSucessfull = false; 

                        FaxServer faxServer = null; 
                        if (MSMQ.LISTENER.Service1.RFFaxApi == null) 
                        { 
                            Generic.ConfigParam = LoadConfig.Invoke(LogClass); 
                            var counter = new RF2MQCounter(); 

                            Actions.Connect(LogClass, counter, ref faxServer); //you can pass a null faxserver 

                        } 

                        if (faxServer != null) 
                        { 

                            try 
                            { 
                                Logger.Log("Getting Fax {0}", handle.ToString(CultureInfo.InvariantCulture)); 
                                var rfaxFax = Actions.GetFax(handle, ref faxServer); 
                                Logger.Log("Getting Fax {0} SUCESS", handle.ToString(CultureInfo.InvariantCulture)); 
                                Generic.NumberOfRecordsSent++; 
                                Logger.Log("Processing message {0}", handle.ToString(CultureInfo.InvariantCulture)); 
                                isSucessfull = RFServiceClass.ProcessMessage(message, ref rfaxFax); 
                                Logger.Log("Processing message SUCESS {0}", 
                                           handle.ToString(CultureInfo.InvariantCulture)); 

                            } 
                            catch (Exception ex) 
                            { 
                                Generic.NumberOfRecordsSent--; 
                                Logger.Log( 
                                    String.Format("{0} - ERROR processinf fax from the queue.. {1}", logRoust, 
                                                  ex.Message), EventLogEntryType.Error); 
                                Actions.SetGenericFlagOff(handle.ToString(CultureInfo.InvariantCulture), 
                                                          Generic.ConfigParam.dbConnectionString); 
                            } 
                        } 
                    } 
                } 
                catch (MessageQueueException msq) 
                { 
                    var messageDetail = message.Label.Split(' '); 
                    var pdfFileDetails = messageDetail[1].Split('_'); 
                    long handle = Convert.ToInt64(pdfFileDetails[0]); 
                    Actions.SetGenericFlagOff(handle.ToString(CultureInfo.InvariantCulture), Generic.ConfigParam.dbConnectionString); 
                    switch (msq.MessageQueueErrorCode) 
                    { 
                        case MessageQueueErrorCode.IOTimeout: 
                            Logger.Log( 
                                String.Format("{0} - Error Message IOTimeout Exception: {1}.", logRoust, msq.Message), 
                                EventLogEntryType.Error); 
                            Actions.SetGenericFlagOff(handle.ToString(CultureInfo.InvariantCulture),Generic.ConfigParam.dbConnectionString ); 
                            break;                     
                         default: 
                            Logger.Log( 
                                String.Format("{0} - Error Message DEFAULT Exception: {1}.", logRoust, msq.Message), 
                                EventLogEntryType.Error); 
                            break; 
                    } 

                } 
                catch (Exception ex) 
                { 
                    Actions.SetGenericFlagOff(handle.ToString(CultureInfo.InvariantCulture), Generic.ConfigParam.dbConnectionString); 
                    Logger.Log( 
                        String.Format("{0} - Error QueuePeekCompleted: {1}.", logRoust, ex.Message), 
                        EventLogEntryType.Error); 
                    message = null; 
                } 
            } while (message != null); 

        } 
        } 

        public override string ToString() 
        { 
            return _queueName; 
        } 
    } 
} 
```

# objective-c - 根据需要有条件地链接 i386 或 armv7

> ID：14739226
> 
> 赞同：0
> 
> 时间：2013-02-06T21:34:09.853
> 
> 标签：objective-c, xcode, cocoa, cordova

我有一个 Xcode 项目，目前正在使用 Apache Cordova 的静态库。我希望能够在模拟器和 iOS 设备上运行它。我目前已将两个不同的库添加到 Xcode 项目中（一个支持 i386，一个支持 armv7），但我似乎无法弄清楚如何告诉链接器链接哪个。到目前为止，我一直在使用“其他链接器标志”来告诉它到 Cordova 库的路径。

我如何告诉链接器它应该使用的库版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:21:22.333

我已经想通了

您要做的就是将两个不同的静态库添加到项目中。然后将它们从正常的构建阶段以及可能在构建设置下的源文件搜索位置中删除。然后您必须转到其他链接器标志，单击调试或发布，然后单击右下角的“添加构建设置”->“条件构建设置”。它将弹出一个新的构建设置，您可以为其指定应在其下链接的平台。如果您希望它工作，您必须为调试和发布添加两种架构。

查看[Apple 的](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/Adding%20a%20Conditional%20Build%20Setting.html)教程。

# jquery - 仅在折叠时将 jQuery-UI sortable() 应用于手风琴() 元素

> ID：14739233
> 
> 赞同：2
> 
> 时间：2013-02-06T21:34:35.073
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-sortable

仅当所有元素都折叠时，是否可以使 jquery 手风琴可排序？我有一个可排序的手风琴，但是当活动元素被移动时，它会破坏页面上的 css（重新排列列）。我知道这可能是网站上的 css 而不是手风琴的问题，但我无权调整所有 css。下面是我用来创建手风琴的代码：

```
<script type='text/javascript'>

    var selected = new  Array();
    var ids = new Array();
    var counter = <?php echo (req('fd_id'))? count($results): 0;?>;
    $(document).ready(function(){
        $("#livesearch").bind("keyup", function () {
                var value = escape($("#livesearch").val());
                if (value.length == 0)
                    $("#results").fadeOut(500);
                else
                {
                    $("#results").fadeIn(500);
                    $("#results").load("<?php echo matry::base_to('utilities/search/referral_search&str=')?>" + value);
                }
            });
        $(function () {
            $("#trip_list").accordion({
                header: ">li >h3",
                collapsible: true
            }).sortable({
                axis: 'y',
                handle: 'h3',
                stop: function(event, ui)
                {
                    ui.item.children( "h3" ).triggerHandler( "focusout" );
                }
            });

            });
        $("#livesearch").blur(function(){$("#livesearch").val(""); $("#results").fadeOut(500);});
        $("#reset").click(function(){$("#trip_list").html("");});
        $("button.remove").on('click', function (){
                $(this).parents('li').remove();
            });
        $("button#save").on('click', function (){
                $.ajax({
                    type: 'POST',
                    url: '<?php echo matry::base_to('utilities/crm/field_day_save');?>',
                    data: $("form#trip_form").serialize(),
                    dataType: 'json',
                    success: function (data)
                    {
                        $("#alerts").html(data.alert);
                        $("#form_id").val(data.id);
                    }
                    });
            });
    });

    function selectItem(id)
    {
        if (counter < 20) //only allow 20 referral sources at a time
        {
            $.get("<?php echo matry::base_to('utilities/field_day'); ?>&rfcode=" + id + "&count=" + counter, function(data){
                        $("#trip_list").append(data).accordion('destroy').accordion({header: "li >h3", collapsible: true});}); 
            counter++;
        }
    }

</script> 
```

**更新**

我添加了以下内容，但它仅适用于第二个或更多面板。第一个面板忽略它。有什么建议么？

```
$(function () {
            $("#trip_list").accordion({
                header: "li >h3",
                active: false,
                collapsible: true,
                activate: function(){if($(this).accordion('option', 'active')){$(this).sortable('disable');}else $(this).sortable('enable');}
            }).sortable({
                axis: 'y',
                handle: 'h3',
                stop: function(event, ui)
                {
                    ui.item.children( "h3" ).triggerHandler( "focusout" );
                }
            }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:45:37.900

**1\. 在手风琴() 事件中使用 sortable() 方法**

使用在[`accordionactivate`](http://api.jqueryui.com/accordion/#event-activate)手风琴面板打开或关闭时触发的手风琴事件，您可以检查手风琴是否折叠，并根据需要应用[`.sortable('enable')`](http://api.jqueryui.com/sortable/#method-enable)or[`.sortable('disable')`](http://api.jqueryui.com/sortable/#method-disable)方法。

**2.检测手风琴是否折叠**

要在事件处理程序中检测手风琴的状态，可以检查`ui.newPanel`属性，它是一个包含新打开的手风琴面板的 jQuery 对象。如果`ui.newPanel`不是空对象，则表示手风琴未折叠（即单击了关闭的面板）。类似地，如果`ui.newPanel`是一个空对象，则意味着手风琴完全折叠（即单击了一个打开的面板并且没有在其位置打开新面板）。

**示例和演示**

```
$('#accordion').accordion({...}).sortable({...});

$('#accordion').on('accordionactivate', function (event, ui) {
     // Accordion is not collapsed
    if (ui.newPanel.length) {
        $('#accordion').sortable('disable');
     // Accordion is collapsed
    } else {
        $('#accordion').sortable('enable');
    }
}); 
```

参见**[jsFiddle 演示](http://jsfiddle.net/Vaybz/)**

# ios - iOS 中的 TextInput 获得然后立即失去焦点不会打开软键盘。FocusManager 说仍然有焦点。Flex Flash Builder AIR 移动版

> ID：14739239
> 
> 赞同：1
> 
> 时间：2013-02-06T21:34:55.093
> 
> 标签：ios, apache-flex, mobile, textinput, flash-builder

**开发环境：** Flash Builder 4.7
**SDK：** Flex 4.6.0 (build 23201) AIR 3.5
**参数：** -local en_US -swf-version=16
**测试平台：** iPad 2 上的 iOS 6

**严重的错误，**我相信。使使用这些技术开发的 iOS 应用程序完全无法使用。

**情况：每当我在测试平台设备上触摸 TextInput 组件时，它会执行以下两种操作之一：**

1.  它将按预期执行。它获得焦点（调度了 focusIn 事件），围绕它的蓝色焦点矩形，提示文本被闪烁的光标替换，软键盘激活并显示（调度所有预期的事件）。
2.  它会失败。它将获得焦点（调度focusIn事件），蓝色焦点矩形会短暂出现然后消失，提示文本保持显示并且字段中没有光标（调度focusOut事件）。调度 softKeyboardActivate 事件并立即调度 softKeyboardDeactivate 事件。键盘甚至没有短暂出现。

我可以轻敲轻敲，最终轻敲（与其他任何轻敲）都会成功，并且会发生＃1而不是＃2。

这是最奇怪的事情。focusManager 告诉我，在调度 focusIn 事件和调度 focusOut 事件后，具有焦点的 DisplayObject 是同一个对象（如果我使用计时器每 10 毫秒检查一次，结果不会改变......正确DO有重点。

代码下方是跟踪输出。

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                            xmlns:s="library://ns.adobe.com/flex/spark" 
                            xmlns:mx="library://ns.adobe.com/flex/mx" 
                            xmlns:c="components.*"
                            width="100%"
                            creationComplete="creationCompleteHandler()">

    <fx:Declarations>
            <s:DropShadowFilter id="dropShadowFilter" blurX="6" blurY="6" alpha="0.5" distance="6" angle="60" strength=".5" quality="{BitmapFilterQuality.HIGH}"/>
    </fx:Declarations>

    <fx:Script>
            <![CDATA[
                    import flash.filters.BitmapFilterQuality;

                    import mx.utils.ObjectProxy;

                    import spark.skins.mobile.TextAreaSkin;

                    import views.tools.MakeAToolBase;

                    [Bindable]
                    private var pad:Number = 15;

                    [Bindable]
                    public var dataProxy:ObjectProxy;

                    [Bindable]
                    public var v:MakeAToolBase;

                    protected function creationCompleteHandler():void
                    {
                            trace("LearnItListItemRenderer FUNCTION creationCompleteHander()");
                            dataProxy = new ObjectProxy(data);
                            dataProxy.choosePictureButton = choosePictureButton;
                    }

            ]]>
    </fx:Script>

    <s:layout>
            <s:HorizontalLayout horizontalAlign="center"/>
    </s:layout>

    <s:HGroup id="listItem" gap="33" paddingTop="15" paddingBottom="15" horizontalAlign="center" paddingLeft="15" paddingRight="44"
                      verticalAlign="middle" width="100%" height="210" filters="{[dropShadowFilter]}">

            <s:Group height="100%">
                    <s:Rect height="100%" width="100%" radiusX="5" radiusY="5">
                            <s:fill>
                                    <s:SolidColor color="0xffffff" alpha="1"/>
                            </s:fill>
                            <s:stroke>
                                    <s:SolidColorStroke weight=".5" color="0x000066"/>
                            </s:stroke>
                    </s:Rect>

                    <s:Label text="{dataProxy.numberLabel}" fontSize="32" color="#000072" verticalAlign="middle" verticalCenter="0" paddingLeft="12" paddingRight="12"/>
            </s:Group>

            <c:ChoosePictureButton id="choosePictureButton" height="{listItem.height-pad-pad}" width="{(4*(listItem.height-pad-pad))/3}"/>

            <s:VGroup id="textInputBoxesGroup" height="100%" width="100%">
                    <s:TextInput id="behaviorNameTextInput" color="#000000" textAlign="left" width="100%"
                                            prompt="Enter Behavior Name..."
                                            needsSoftKeyboard="true"
                                            interactionMode="touch"
                                            skinClass="spark.skins.mobile.TextInputSkin"
                                            returnKeyLabel="done"
                                            showPromptWhenFocused="true"
                                            touchBegin="trace('touch');"
                                            softKeyboardActivate=  "trace('#############################    SoftKeyboardActive    #####################################');"
                                            softKeyboardDeactivate="trace('############################# SoftKeyboardDeactivating #####################################');"
                                            softKeyboardActivating="trace('#############################  SoftKeyboardActivating  #####################################');"
                                            focusIn="trace('TEXTINPUT FOCUSIN: '+this.focusManager.getFocus())"
                                            focusOut="trace('TEXTINPUT FOCUSOUT: '+this.focusManager.getFocus())"
                                            creationComplete="{data.behaviorNameTextInput=behaviorNameTextInput;}"
                                            />

                    <s:Spacer id="behaviorSpacer" height="2"/>

                    <s:TextArea id="behaviorDescriptionTextArea"
                                            fontFamily="verdana" fontSize="16"
                                            verticalAlign="top" textAlign="left" width="100%" height="100%"
                                            verticalScrollPolicy="on"
                                            interactionMode="touch"
                                            color="#000000" prompt="Enter Behavior Description..."
                                            softKeyboardType="{SoftKeyboardType.DEFAULT}"
                                            needsSoftKeyboard="true"
                                            showPromptWhenFocused="true"
                                            skinClass="spark.skins.mobile.TextAreaSkin"
                                            creationComplete="{data.behaviorDescriptionTextArea=behaviorDescriptionTextArea}"/>
            </s:VGroup>
            <c:YesNoVerticalButtonsGroup/>
    /s:HGroup>
</s:ItemRenderer> 
```

**跟踪输出 [为简洁而编辑]**

```
TEXTINPUT FOCUSIN: PictureToolsOnTheMoveMakeIt0.TabbedViewNavigatorApplicationSkin6.tabbedNavigator.TabbedViewNavigatorSkin8.contentGroup._PictureToolsOnTheMoveMakeIt_ViewNavigator3.ViewNavigatorSkin35.contentGroup.MakeAToolLearnItView471.SkinnableContainerSkin472.contentGroup.itemList.ListSkin475.Scroller477.ScrollerSkin478.DataGroup476.LearnItListItemRenderer566.listItem.textInputBoxesGroup.behaviorNameTextInput

#############################  SoftKeyboardActivating  #####################################

############################# SoftKeyboardDeactivating #####################################

TEXTINPUT FOCUSOUT: PictureToolsOnTheMoveMakeIt0.TabbedViewNavigatorApplicationSkin6.tabbedNavigator.TabbedViewNavigatorSkin8.contentGroup._PictureToolsOnTheMoveMakeIt_ViewNavigator3.ViewNavigatorSkin35.contentGroup.MakeAToolLearnItView471.SkinnableContainerSkin472.contentGroup.itemList.ListSkin475.Scroller477.ScrollerSkin478.DataGroup476.LearnItListItemRenderer566.listItem.textInputBoxesGroup.behaviorNameTextInput

############################# SoftKeyboardDeactivating ##################################### 
```

**[ 失败的尝试 2 - 22 为了可读性而删除]**

```
TEXTINPUT FOCUSIN: PictureToolsOnTheMoveMakeIt0.TabbedViewNavigatorApplicationSkin6.tabbedNavigator.TabbedViewNavigatorSkin8.contentGroup._PictureToolsOnTheMoveMakeIt_ViewNavigator3.ViewNavigatorSkin35.contentGroup.MakeAToolLearnItView471.SkinnableContainerSkin472.contentGroup.itemList.ListSkin475.Scroller477.ScrollerSkin478.DataGroup476.LearnItListItemRenderer566.listItem.textInputBoxesGroup.behaviorNameTextInput

#############################  SoftKeyboardActivating  #####################################

#############################    SoftKeyboardActive    ##################################### 
```

# oop - 有限状态机能否在不破坏 FSM 封装的情况下持久工作？

> ID：14739242
> 
> 赞同：0
> 
> 时间：2013-02-06T21:35:10.447
> 
> 标签：oop, design-patterns, persistence

假设我们有一个（英国）交通灯模拟应用程序，并且一个类**TrafficLight**有一个相关的有限状态机，定义为：-

```
*  -->  RED  -->  RED_AMBER  -->  GREEN  -->  AMBER  -->  RED  --> ...
(repeat until the proverbial cows make an appearance ) 
```

在构建**时 TrafficLight**的状态是 RED 某种时间触发器会导致状态变化。

在应用程序中可能有一些代码，例如（删除任何带走点的代码）......

```
TrafficLight trafficLightsAtBigJunction = new TrafficLight();  // state = RED
trafficLightsAtBigJunction.setState( TrafficLightState.RED_AMBER );
trafficLightsAtBigJunction.setState( TrafficLightState.GREEN );
trafficLightsAtBigJunction.setState( TrafficLightState.AMBER );
trafficLightsAtBigJunction.setState( TrafficLightState.RED );
trafficLightsAtBigJunction.setState( TrafficLightState.RED_AMBER );
:
:
: 
```

关键是，使用状态模式来实现状态机，如果我们这样做

```
TrafficLight trafficLightsAtBigJunction = new TrafficLight();  // state = RED
trafficLightsAtBigJunction.setState( TrafficLightState.GREEN ); // Exception!!!!! 
```

抛出异常（根据我们的设计），因为它是非法的状态移动。这就是我们想要的。世界上的一切都很好。

但是，如果我们继续保持红绿灯并且它恰好处于状态 = AMBER 说那么似乎有问题。当我们的用户在 3 天后回来观看令人敬畏的交通灯模拟时，它会从某些（谁在乎）持久存储中的当前状态恢复。

**我们如何在不破坏此处状态模式提供的封装的情况下使交通灯实例处于状态 AMBER？**

似乎有 2 个选择：- (1) 创建一个新实例并运行相关状态 (2) 提供一种**特殊方法**来将状态设置为我们想要的任何状态，按照惯例，只有在从一些持久性存储中读取后才会使用. 例如

```
trafficLight.setStateAfterReadingFromPersistanceSource( AMBER ); 
```

我看到的（1）的问题是，在运行状态时很可能会出现我不想要的副作用，而且逻辑可能非常复杂，具体取决于状态机

(2) 的问题显然是它只能按约定工作，因此可能会在不知道何时不正确使用的情况下引入错误。更重要的是，它几乎打破了所有你想要的漂亮模式封装。

问题与持久性技术无关 - ORM、文件、序列化等问题相同

我假设这里有一个解决方案，但我自己想不出一个解决方案，而且我的谷歌搜索技能还不够。

任何指针都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:09:52.317

通过将状态和转换表示为对象来实现状态机当然是可能的，但是这些对象需要初始化（这似乎是您的问题）并占用宝贵的 RAM。

但是，还有一种完全不同的方式将状态机实现为纯代码。这有很多优点，我永远不会回到“状态机作为数据”的方法。

[举一个具体的例子， http://www.drdobbs.com/architecture-and-design/uml-statecharts-at-1099/188101799](http://www.drdobbs.com/architecture-and-design/uml-statecharts-at-1099/188101799)上的 DDJ 文章“UML Statecharts at $10.99”准确地展示了如何实现 Pedestrian LIght CONtrolled ( PELICAN) 交叉作为分层状态机。

此示例用 C 语言编写，用于低端微控制器。如果您对 C++ 实现感兴趣，可以查看 SourceForge.net 上的开源 QP/C++ 框架，网址为[https://sourceforge.net/projects/qpc/files/QP_C%2B%2B/](https://sourceforge.net/projects/qpc/files/QP_C%2B%2B/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:43:12.363

在我看来，您需要两种方式来操纵状态：

1）从这个状态转换到另一个状态，执行这个转换的所有副作用，如果非法则抛出异常等

2) 将机器直接设置为一个状态/一组内部值。什么都不做。

你应该坚持所有描述 FSM 内部状态的东西，并有两种方法，一种是前者，一种是后者。

后者将在设置或取消持久化时使用。编码也更简单，因为它只是将值转换为变量，而不用担心还需要发生什么。

前者将在模拟过程中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T15:35:33.320

对于简短的回答，我同意皮特的观点，在这个简单的示例中，您可以将其作为构造函数 arg 传递。

但老实说，我认为整个设计是有缺陷的。我认为这应该使用标准的状态设计模式来建模。像这样的东西：

```
class TrafficLight 
{
   private TrafficLightState _lightState;

   TrafficLight(initialState)
   {
      // utilize lookup table or factory-method to assign _lightState with  the correct TrafficLightState subclass
   }

   // UI can use this to identify/render the appropriate color
   Color getColorCode()
   {
      return _lightState.getColorCode();
   }

   // UI uses this to know when to signal the next light change (each color can have different duration)
   int getDuration()
   {
      return _lightState.getDuration();
   }

   // assuming the UI has a timer that is set based on the current light's duration
   void changeLight()
   {
      TrafficLightState nextState = _lightState.onChangeLight();
      _lightState = nextState;
   }

}

abstract class TrafficLightState
{
   abstract Color getColorCode()
   abstract TrafficLightState onChangeLight()
   abstract int getDuration()
}

class RedLight : TrafficLightState
{

   Color getColorCode()
   {
      return Color.Red;
   }

   TrafficLightState  onChangeLight()
   {
      return new RedAmberLight();
   }

   int getDuration() 
   {
      return 30;
   }
}

class RedAmberLight : TrafficLightState
{

   Color getColorCode()
   {
      return Color.Orange;
   }

   TrafficLightState  onChangeLight()
   {
      return new GreenLight();
   }

   int getDuration() 
   {
      return 10;
   }
}

class GreenLight: TrafficLightState
{

   Color getColorCode()
   {
      return Color.Green;
   }

   TrafficLightState  onChangeLight()
   {
      return new AmberLight();
   }

   int getDuration() 
   {
      return 25;
   }
}

class AmberLight: TrafficLightState
{

   Color getColorCode()
   {
      return Color.Yellow;
   }

   TrafficLightState  onChangeLight()
   {
      return new RedLight();
   }

   int getDuration() 
   {
      return 10;
   }
} 
```

状态机不应具有用于在正常操作中转换的明确公开的“更改状态”方法。相反，将它们视为具有允许状态机转换其自身状态的刺激。在此示例中，刺激非常简单，但通常您会有一组可能导致状态转换的输入。但是通过适当的封装，调用者不需要过分了解细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T22:39:48.730

最简单的方法可能只是将初始状态作为构造函数参数传递 - 这只是您的约定，系统以所有灯为红色开始。

另一种方法是使从商店中提取数据的功能成为朋友或会员（取决于您是使用 operator>> 来阅读它还是其他东西）。这使您可以选择根据您的示例转换到状态，或从商店读取初始状态。对于正在发生的事情并没有太多的歧义，并且在持久化时由 FSM 拉取其状态以及它需要进出存储的任何其他内容。

# java - 刽子手错误的猜测没有正确打印

> ID：14739243
> 
> 赞同：0
> 
> 时间：2013-02-06T21:35:11.323
> 
> 标签：java

我有一个正在为学校工作的 Hangman 程序，当用户猜错字母时，我无法正确打印错误猜测的数量。这是我到目前为止得到的代码，我将不胜感激任何提示。

```
import java.util.Scanner;

public class HangmanTest {
    public static void main(String[] args) {

        String[] wordBank = { "madelynn", "crystal", "mcbride", "daughter",
                "adorable", "beautiful", "andrew", "programming", "alyssa",
                "computers", "mcbreezy", "maddy", "happy", "vacation", "beach",
                "java", "benefical", "military", "veteran", "standale",
                "lions", "tigers", "redwings", "pistons", "michigan",
                "football", "baseball", "hockey", "basketball", "golf" };
        int minimum = 0;
        int maximum = wordBank.length - 1;
        String again;

        do {
            int choice = minimum + (int) (Math.random() * maximum);

            String word = wordBank[choice];

            // Converts the random word to asterix
            String userWord = "";
            for (int i = 0; i < word.length(); i++) {
                userWord += "*";
            }

            // Breaks into a bunch of characters
            char[] userWordCh = userWord.toCharArray();

            // Show the random word
            System.out.println("The word for you to guess is " + userWord);

            // instantiate a scanner object
            Scanner input = new Scanner(System.in);

            int size = word.length();
            int rightGuesses = 0;
            int wrongGuesses = 0;

            while (size != rightGuesses) {
                System.out.println("Enter a character: ");
                String response = input.next();
                char ch = response.charAt(0);

                char[] wordChars = word.toCharArray();

                for (int i = 0; i < word.length(); i++) {
                    if (wordChars[i] == ch) {
                        userWordCh[i] = ch;
                        ++rightGuesses;
                    } else {
                        ++wrongGuesses;
                    }
                } // end of for loop

                System.out.print("The word is: ");
                for (int j = 0; j < userWordCh.length; j++)
                    System.out.print(userWordCh[j]);

                System.out.println();
            } // end of while loop

            System.out.println("You had " + wrongGuesses + " wrong guesses.");

            System.out.println("Would you like to play again y/n: ");
            again = input.next();

        } while (again.equals("y"));

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:40:22.083

```
for (int i = 0; i < word.length(); i++) {
    if (wordChars[i] == ch) {
        userWordCh[i] = ch;
        ++rightGuesses;
    } else {
        ++wrongGuesses;
    }
} // end of for loop 
```

在这个循环中，每次猜测与单词中的字母匹配时将 rightGuesses 加 1，每次猜测与单词中的字母不匹配时将 wrongGuesses 加 1。正如你可以想象的那样，这将导致数字集体增加与字母数量相同的数字，而它应该只增加一次。

尝试类似：

```
boolean foundMatch = false;
for (int i = 0; i < word.length(); i++) {
    if (wordChars[i] == ch) {
        userWordCh[i] = ch;
        if (!foundMatch)
        {
            ++rightGuesses;
            foundMatch = true;
        }
    }
}
if (!foundMatch)
{
    ++wrongGuesses;
}
// end of for loop 
```

现在我们只增加一次 rightGuesses 和 wrongGuesses —— rightGuesses 只能在我们没有找到匹配项的情况下增加（将找到的匹配项设置为 true），而 wrongGuesses 只能在我们没有找到匹配项的情况下增加一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:41:00.023

我在这里猜测，但我认为这可能是错误的：

```
for (int i = 0; i < word.length(); i++) {
     if (wordChars[i] == ch) {
         userWordCh[i] = ch;
         ++rightGuesses;
     } else {
         ++wrongGuesses;
     }
} // end of for loop 
```

这将为匹配/不匹配输入字符的单词中的每个字符增加`rightGuesses`和变量。`wrongGuesses`相反，您需要在字符“匹配”时设置一个标志，然后在末尾检查该标志以更新`rightGuesses`和`wrongGuesses`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:41:08.070

问题出在你的 for 循环中。您正在迭代每个字母，并且对于每个与您的不匹配的字母，您将其标记为不正确的猜测。如果没有一个字母是正确的，它应该只被标记为不正确。此外，仅当您尚未标记它时，才应将其标记为正确。

```
import java.util.Scanner;
import java.util.ArrayList;

public class HangmanTest {
    public static void main(String[] args) {

        String[] wordBank = { "madelynn", "crystal", "mcbride", "daughter",
                "adorable", "beautiful", "andrew", "programming", "alyssa",
                "computers", "mcbreezy", "maddy", "happy", "vacation", "beach",
                "java", "benefical", "military", "veteran", "standale",
                "lions", "tigers", "redwings", "pistons", "michigan",
                "football", "baseball", "hockey", "basketball", "golf" };
        int minimum = 0;
        int maximum = wordBank.length - 1;
        String again;

        do {
            int choice = minimum + (int) (Math.random() * maximum);

            String word = wordBank[choice];

            // Converts the random word to asterix
            String userWord = "";
            for (int i = 0; i < word.length(); i++) {
                userWord += "*";

            }

            String guessedLetters="";
            // Breaks into a bunch of characters
            char[] userWordCh = userWord.toCharArray();

            // Show the random word
            System.out.println("The word for you to guess is " + userWord);

            // instantiate a scanner object
            Scanner input = new Scanner(System.in);

            int size = word.length();
            int rightGuesses = 0;
            int wrongGuesses = 0;
            boolean foundLetter;
            char[] wordChars = word.toCharArray();

            guessLoop:
            while (size != rightGuesses) {
                System.out.println("Enter a character: ");
                String response = input.next();
                char ch = response.charAt(0);

                foundLetter=false;
                for (int i=0;i<guessedLetters.size();i++){
                    if (ch == guessedLetters.charAt(i)){
                         System.out.println("Already guessed that letter!");
                         continue guessLoop;
                    }
                }

                guessedLetters+=response;
                for (int i = 0; i < word.length(); i++) {
                    if (wordChars[i] == ch) {
                           foundLetter=true;
                           userWordCh[i] = ch;
                           ++rightGuesses;                            
                    } 
                } // end of for loop
                if(!foundLetter)
                     ++wrongGuesses;
                System.out.print("The word is: ");
                for (int j = 0; j < userWordCh.length; j++)
                    System.out.print(userWordCh[j]);

                System.out.println();
            } // end of while loop

            System.out.println("You had " + wrongGuesses + " wrong guesses.");

            System.out.println("Would you like to play again y/n: ");
            again = input.next();

        } while (again.equals("y"));

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:43:06.730

```
for (int i = 0; i < word.length(); i++) {
                if (wordChars[i] == ch) {
                    userWordCh[i] = ch;
                    ++rightGuesses;
                } else {
                    ++wrongGuesses;
                }
            } // end of for loop 
```

这个 for 循环会导致您出现错误猜测的问题，因为它会说一个字符是错误的猜测，即使它在单词中。您可以做的一个选择是在找到字母时将一些布尔值切换为 true。这样，当您离开 for 循环时，您会检查该值是否为真。如果不是，则增加错误的猜测。

# regex - grep 通过彩色文本，例如 gcc | 颜色gcc | grep 正则表达式

> ID：14739252
> 
> 赞同：6
> 
> 时间：2013-02-06T21:35:41.100
> 
> 标签：regex, perl, grep

grep 管道输出时如何使 grep 尊重 ANSI 颜色转义？我很高兴使用其他东西（perl？）而不是 grep。

我的用户案例：我想要

```
 gcc foobar.c | colorgcc | grep regexp
 ls --color | grep filename 
```

可以很好地处理颜色（在使用 ANSI 转义的 unix 终端上）。

我想要的行为测试示例：

```
echo -e "he\e[35mllo\e[00m" world |grep hell ==> he\e[35mllo\e[00m world 
echo -e "\e[35m removed line\nhello\e[00m" world |grep hell ==> \e[35mhello\e[00m world
echo -e "\e[35m rem\e[1moved line\nhello\e[00m" world | grep hell ==> \e35m\e1mhello\e[00m world 
```

目前第一行给出空字符串，第二行给出未着色的字符串'hello\e[00m world'。这里 \e[35m 和 \e00m 是颜色（属性）修饰符：字母的颜色由形式 \e[P1; 的最后几个颜色（属性）转义序列确定。P2; .. m 其中 P1、P2 等是数字序列；\e[P1m\e[P2m 等价于 \e[P1;P2m 。\e[0m 使颜色默认并忘记所有先前的 \e[..m 序列：\e[34m\e[0m 等价于 \e[0m。有几个独立的属性（粗体、背景颜色、前景/字母颜色）；转义序列中的每个数字只影响其中一个。因此 \e[1m\e[35m 等价于 \e[1;35m 但不是 \e[35;1m 也不 \e[35m ; 但是，\e[34m\e[35m 等价于 \e[35m，因为它们都影响相同的属性（即，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:50:02.040

这是一个非常有趣的问题，这就是我想出的。它很丑陋，但似乎完成了工作：

```
sed -n '1s/^/\x1b[0m/;H;x;s/\n//;p;s/.*\(\x1b\[[0-9]*m\(;[0-9]*m\)*\).*/\1/;h' |
  grep `sed 's/./\0\\\\(\x1b\\\\[[0-9]*m\\\\(;[0-9]*m\\\\)*\\\\)*/g' <<< hell` 
```

您正在搜索的术语将放在最后（代替“地狱”），以下是您提供的文本的一些示例（使用 hexdump 显示颜色）：

```
$ echo -e "he\e[35mllo\e[00m" world |
> sed -n '1s/^/\x1b[0m/;H;x;s/\n//;p;s/.*\(\x1b\[[0-9]*m\(;[0-9]*m\)*\).*/\1/;h' |
> grep `sed 's/./\0\\\\(\x1b\\\\[[0-9]*m\\\\(;[0-9]*m\\\\)*\\\\)*/g' <<< hell` |
> hexdump -C
00000000  1b 5b 30 6d 68 65 1b 5b  33 35 6d 6c 6c 6f 1b 5b  |.[0mhe.[35mllo.[|
00000010  30 30 6d 20 77 6f 72 6c  64 0a                    |00m world.|
0000001a

$ echo -e "\e[35m removed line\nhello\e[00m" world |
> sed -n '1s/^/\x1b[0m/;H;x;s/\n//;p;s/.*\(\x1b\[[0-9]*m\(;[0-9]*m\)*\).*/\1/;h' |
> grep `sed 's/./\0\\\\(\x1b\\\\[[0-9]*m\\\\(;[0-9]*m\\\\)*\\\\)*/g' <<< hell` |
> hexdump -C
00000000  1b 5b 33 35 6d 68 65 6c  6c 6f 1b 5b 30 30 6d 20  |.[35mhello.[00m |
00000010  77 6f 72 6c 64 0a                                 |world.|
00000016 
```

第一个 sed 命令将当前颜色设置添加到每行的开头，这对于第二个示例是必要的，其中颜色设置在 grep 将跳过的行上。作为 grep 参数的 sed 命令插入一个正则表达式，该正则表达式将匹配搜索词中每个字符之间的任意数量的颜色转义。

这是 egrep 版本：

```
sed -n '1s/^/\x1b[0m/;H;x;s/\n//;p;s/.*\(\x1b\[[0-9]*m\(;[0-9]*m\)*\).*/\1/;h' |
  egrep `sed 's/./\0(\x1b\\\\[[0-9]*m(;[0-9]*m)*)*/g' <<< hell` 
```

# php - PHP - 执行 bash .sh 文件以从不同的服务器中删除文件

> ID：14739254
> 
> 赞同：-2
> 
> 时间：2013-02-06T21:35:46.633
> 
> 标签：php, linux, bash, shell

我想运行一个包含 IP 数组的 PHP，并从每个 IP 中删除一个特定文件。

像这样的东西：

```
foreach($servers as $ip){           
   shell_exec("sh /my/dir/delete.sh ".$ip." ".$file);
} 
```

在 delete.sh 文件中我会有这样的东西

```
ssh user@$1 'rm /my/dir/filespath/$2 ' 
```

所有服务器都有相同的路径和文件，还有用户名和密码有什么建议吗？

编辑：

执行 sh 文件的 PHP 文件位于安全管理员页面中，IP 是本地 IP (192.168.1.25, 26, 27)

如果我想从路径中删除所有文件，我会做这样的事情（就像我现在正在做的那样）

```
ssh user@192.168.1.25 '/usr/bin/find /my/dir/filespath/* -type d -exec /bin/rm -fr {} \;'
ssh user@192.168.1.26 '/usr/bin/find /my/dir/filespath/* -type d -exec /bin/rm -fr {} \;'
ssh user@192.168.1.27 '/usr/bin/find /my/dir/filespath/* -type d -exec /bin/rm -fr {} \;' 
```

但我只想删除一个特定文件，例如：/my/dir/filespath/other/folder/file.txt

由于我将添加更多服务器或更改它们的 IP，我需要它们是可变的 [这现在不是强制性的]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:33:18.310

** 解决了 **

我做了管理员的这个请求

```
if($file){
    $res = file_get_contents("http://[current server IP]/delete.php?token=12345&p=".$file);
    echo $file;
}
echo $res; 
```

delete.php 文件有这个

```
if($_GET['token']!='12345') exit();

$ips = array(192.168.1.25,192.168.1.26,192.168.1.27);

$file = $_GET['p'];
$file = str_replace(array('../','*','./'),'',$file);
if($file != ""){
    $command = '"/bin/rm -f /my/dir/filespath/'.$file.'"';
    foreach($ips as $ip){
        echo shell_exec('ssh user@'.$ip.' '.$command);
        sleep(1);// sleep 1 sec for letting the command time to delete the file (could be less)
    }
}
exit(); 
```

完美运行！当然，delete.php 文件的安全性更高，这只是一个示例版本

谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:08:45.600

在您的远程服务器上，您可以托管一个文件，我们称之为 callme.php

callme.php 会像

```
<?php
exec("/bin/sh /path/to/deletefiles.sh");
echo 'OK';
?> 
```

deletefiles.sh 会是这样的

```
#!/bin/sh 
rm -rf /path/to/file/to/delete.txt
echo 'Ok' 
```

最后在你的命令服务器上你可以有一个像这样的 bash 文件：

```
#!/bin/sh
servers+=("http://1.2.3.4")
servers+=("http://1.2.3.5")
servers+=("http://1.2.3.6")
servers+=("http://www.yoursite.com")
file='/callme.php'

for i in "${servers[@]}"
do
:
  echo $i$file
  curl -s $i$file
  sleep 5
done 
```

或者如果您更愿意在 php 中调用远程文件

```
 <?php

 $servers[]="http://1.2.3.4";
 $servers[]="http://1.2.3.5";
 $servers[]="http://1.2.3.6";
 $servers[]="http://www.yoursite.com";

 $file = "/callme.php";

 foreach ($servers as $k => $v){
         $url = $v.$file;
         $results[] = curl_download($url);
 }
 var_dump($results);

 function curl_download($Url) {
        if (!function_exists('curl_init')) {
            die('Sorry cURL is not installed!');
        }
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $Url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        $output = curl_exec($ch);
        curl_close($ch);
        return $output;
    }
   ?> 
```

这可能不是最好的方法，但它可以工作......我刚刚快速写出的上述代码，所以一些代码可能需要精打细算，您需要确保所有文件都具有适当的权限。

# powershell - 从powershell显示exe安装进度？

> ID：14739257
> 
> 赞同：2
> 
> 时间：2013-02-06T21:36:03.183
> 
> 标签：powershell

我正在通过powershell静默安装文件，但想就安装进度提供反馈。我似乎无法在任何地方找到这些信息。这是我用于运行 exe 的代码：

```
$exe = "wls1033_oepe111150_win32.exe"
$xmlLocation = Resolve-Path "silent_install.xml"
$xmlLocation = "-silent_xml=" + $xmlLocation
$installLogLoc = Resolve-Path "wls_install.log"
$installLogLoc = "-log=" + $installLogLoc
$AllArgs = @('-mode=silent', $xmlLocation, $installLogLoc)
$filePath = Resolve-Path $exe
$p = New-Object System.Diagnostics.Process
$p.StartInfo.Filename = $filePath
$p.StartInfo.Arguments = $AllArgs
$p.Start();
$p.WaitForExit(); 
```

有没有办法做到这一点？我确实在安装 exe 的备用命令窗口中获得了提取过程的进度表，但除此之外，它在那里停留了大约 10 分钟，没有任何指示。

编辑：所以看到这是不可能的，有没有办法在运行 exe 时进行异步管道调用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:45:26.043

如果我错了，请纠正我，但我 99% 确定这是不可能的。您的 exe 文件是单独的进程，而不是 PowerShell 脚本。它将无法将状态消息传递到您的 PowerShell 会话。唯一的可能性是检测设置日志文件，跟踪它并根据日志中的关键字更新 PowerShell 中的进度条。然而，这是一项艰巨的任务，您需要为每个设置文件进行自定义。

我会尝试查看您的 exe 文件，看看它是否具有可以使用的“基本 ui”（或类似类型）模式，而不是静默选项。最后一种选择是使用这样的选项重新打包设置（仅使用进度条使安装自动化）。此解决方案仍将仅在单独的窗口中显示进度条，而不是在 PowerShell 本身中。

# c# - SQLiteDatabaseScope 引用错误

> ID：14739258
> 
> 赞同：1
> 
> 时间：2013-02-06T21:36:07.247
> 
> 标签：c#, sqlite

在一个解决方案中，我`SQLiteDatabaseScope`正确引用了没有错误。在另一种解决方案中，我感到沮丧，因为我无法使用 nuget 或在解决方案一个硬盘位置上显式引用 dll 引用此 dll。

```
using System.Data.SQLite;
SQLiteDatabaseScope DbScope; // the type or namespace could not be found 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:54:42.147

`SQLiteDatabaseScope`不是[SQLite 适配器的](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)*一部分*，而是[来自基本上](http://code.google.com/p/basiclyeverything/source/browse/trunk/NStackExample/Part10/CSharp/System.Data.SQLite.DatabaseScope/SQLiteDatabaseScope.cs?r=3)所有东西或其他来源。

确保引用了正确的程序集（来自“基本上所有内容”）*或*项目中包含了适当的类源文件。

请记住，程序集名称和命名空间*不需要*在 .NET 中对齐 - 这样做只是一种微妙之处。

# colors - 为多窗格 Highstock 图表中的一个窗格设置背景颜色

> ID：14739263
> 
> 赞同：2
> 
> 时间：2013-02-06T21:36:20.210
> 
> 标签：colors, highcharts, highstock

在这个例子中：[http://www.highcharts.com/stock/demo/candlestick-and-volume](http://www.highcharts.com/stock/demo/candlestick-and-volume)，有没有办法设置第二个窗格的背景颜色？

例如，如果您添加`plotBackgroundColor: '#FCFFC5'`到图表定义中，则两个窗格都会变为黄色。

是否可以只使第二个（下部）窗格变黄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:09:28.823

可以使用 plotBands 在第二个窗格中更改特定范围的背景颜色。

例如 yAxis : {[ ... plotBands : {color : '#f7d724', from : -50, to : 50}, ... ]}

# c# - 为什么 Context.RewritePath 维护查询字符串？

> ID：14739266
> 
> 赞同：3
> 
> 时间：2013-02-06T21:36:35.170
> 
> 标签：c#, asp.net, url-rewriting

在查看下面的代码后，我注意到调用以[`Context.RewritePath`](http://msdn.microsoft.com/en-us/library/sa5wkk6d.aspx)某种方式不会丢失查询字符串，即使它在没有查询字符串的情况下被调用。是否有任何文档解释为什么要维护查询字符串？

```
//URL relative path to ashx files is wrong to to path rewriting.
if (Request.Url.LocalPath.EndsWith(".ashx")) {
    Context.RewritePath(Request.Url.LocalPath
        .Substring(Request.Url.LocalPath.LastIndexOf("/") + 1));
} 
```

**编辑：**我不是在问如何解决这个问题；代码行为正确。我只是要求提供有关此行为的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:47:52.153

您实际上是在对路径进行重写，并且在大多数情况下，需要维护查询以传递给新路径。

以一个名为“getDocumentWithEnhancements.aspx”的新文档检索页面为例，而不是旧的“getDocument.aspx”。两者都需要一个有用的参数，但您希望使用新的参数。RewritePath 可以完成这项工作，因为它将查询传递给旧的，然后传递给新的。如果您想显示某种错误页面或其他内容，那么您可以使用重定向，或者您要重写的任何页面都将忽略查询字符串。

为什么不希望通过查询？你到底在用这个做什么？也许它不是您需要的正确功能。

编辑：有一个带有 3 个参数的重载函数，其中一个是查询字符串，您可以将其作为 null 传入以不使用查询字符串。

# ruby-on-rails-3 - 在这样的控制器操作中使用 respond_to 块有什么问题吗？

> ID：14739270
> 
> 赞同：2
> 
> 时间：2013-02-06T21:36:46.283
> 
> 标签：ruby-on-rails-3, coding-style, ruby-on-rails-3.2, convention-over-configur

我正在对现有的 Rails 3.2 应用程序进行 AJAX 化，并且从客户端发出的一些请求最好异步完成。为了促进这一点，并减少渲染时间，我通过警报向用户提供反馈。我的 application.html.erb 文件中有一个空白 div，我根据需要从某些控制器操作中添加警报，如下所示：

```
def my_async_controller_action
  @user = User.find(params[:id])
  begin
    #@user.import
    flash[:notice] = "Your data is being downloaded."
  rescue Exception => bang
    flash[:alert] = "There was an error downloading your data: #{bang.message}"
  end

  respond_to do |format|
    format.js { render 'common/flashes' }
  end
end 
```

我的`common/flashes`文件只是使用 jQuery 来`append`向空白 div 发出警报。虽然它工作正常，但我从未见过像这样传递的警报，只能通过重定向。采用这种方法是否有任何不成文（或成文）的 Rails 约定或规则被打破？另外，有没有办法将其作为respond_with 来代替？我看不到如何从一行中进行两种不同类型的渲染。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:17:15.487

1.  如果`js`您正在渲染的文件与控制器的操作具有相同的名称，则不需要`respond_to`块。

    但是，由于您将`js`文件放在一个公共文件夹中，为了在您的控制器之间重用，您必须明确告诉 Rails 渲染该文件。这完全没问题。

2.  如果您的操作仅响应`js`，则可以使用括号而不是`do ... end`块来使其成为单行：

    ```
    respond_to { |format| format.js } 
    ```

    但是，由于您必须指定`js`文件的名称，这可能会变得非常难看，因此您可以省略该`respond_to`块并执行以下操作：

    ```
    render 'common/flashes' 
    ```

    然而，这带来的不便是，如果您的控制器收到`html`请求，它将搜索`flashes.html`公共文件夹内命名的文件。这很可能会返回`Template is missing`错误。如果要解决此问题，则必须为格式[添加一些约束。](https://stackoverflow.com/questions/4997788/rails-3-restricting-formats-for-action-in-resource-routes)

3.  但是，如果您的操作也响应`html`，那么您应该像这样声明该块：

    ```
    respond_to do |format|
      format.html
      format.js { render 'common/flashes' }
    end 
    ```

    您不需要`format.html`，但是当您查看代码时，您可以立即看出它同时响应`html`和`js`请求。

4.  使用`respond_with`块来呈现不同的文件不适用于您的情况，因为您只呈现一些 javascript。`respond_with`用于以各种格式（html、json、xml）返回一些**资源**。[这篇文章](http://archives.ryandaigle.com/articles/2009/8/6/what-s-new-in-edge-rails-cleaner-restful-controllers-w-respond_with)更详细一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T04:00:10.253

```
respond_to do |format|
    format.js 
end 
```

我从您的控制器方面看没有问题。

请务必在 .js.erb 中渲染时使用 escape_javascript

# skype - 如何以编程方式获取 Skype 状态？

> ID：14739271
> 
> 赞同：2
> 
> 时间：2013-02-06T21:36:47.707
> 
> 标签：skype

我想创建一个小型控制台应用程序来返回本地 Skype 应用程序的当前 Skype 状态，如果它正在运行（在线/离开/请勿打扰/不可见/离线）并将其更改历史记录写入文本文件。

我怎样才能做到这一点？从哪儿开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-05T06:53:08.860

## tl;博士;

状态检查 URL 不见了，最好的选择是[API](https://dev.skype.com)。

## 细节

有一个 API 面向 Web 开发人员，可在其网站上集成调用功能。它似乎受到高度限制，完全缺少旧 API 中的状态检查和许多其他功能：http: [//msdn.microsoft.com/en-us/library/office/dn745882.aspx](http://msdn.microsoft.com/en-us/library/office/dn745882.aspx)

Microsoft 在 2013 年底取消了对旧开发人员 API 的支持。状态检查 URL ( `http://mystatus.skype.com/[username].txt`) 一直存在到 2019 年初。它**不再可用**。

它要求 Skype 用户主动启用网络状态检查（默认情况下似乎禁用）。它可以`Preferences -> Privacy`通过勾选`Show my status on the web`从 Skype 版本 6.19 开始启用。如果未启用，用户将显示为离线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:47:42.097

您可以为此使用 Skype4Py：

[https://github.com/awahlig/skype4py](https://github.com/awahlig/skype4py)

它有 GET/SET USERSTATUS 命令

[http://dev.skype.com/desktop-api-reference#COMMANDS](http://dev.skype.com/desktop-api-reference#COMMANDS)

# domain-driven-design - 当相关实体位于同一聚合中时使用延迟加载

> ID：14739276
> 
> 赞同：0
> 
> 时间：2013-02-06T21:37:15.847
> 
> 标签：domain-driven-design

来自 [DDD：解决软件核心的复杂性](https://rads.stackoverflow.com/amzn/click/com/0321125215)（第 177 页）：

> 添加处理事件时需要更新交付历史记录会导致交易中涉及的 Cargo AGGREGATE。

a）在页面下方作者确实提出了一个替代解决方案，但仍然 - 上述摘录中的作者不是在本质上建议我们通过每次访问该*属性*时让属性查询数据库（通过*存储库）来实现**关联*吗？`DeliveryHistory.Events`

 **b）由于作者“提出”的实现几乎与*延迟加载*的实现方式相同（除了*延迟加载*仅在我们第一次需要数据时查询数据然后缓存它），我还会问以下问题：

许多人通常反对*延迟加载，但无论如何，我认为如果**相关实体*驻留在*同一个聚合*中，我们不应该使用延迟加载，因为这样的*关联*是用*对象引用*表示的，当我们需要*事务完整性*时实现？

原因是如果从不访问*相关数据*（因此从不检索），这种*完整性*可能会受到损害，因为在修改*聚合*时不能正确执行*不变量*？

 *****更新：**

一种）

> 当存储库加载 DeliveryHistory 实体时，可以加载 DeliveryHistory.Events 集合。它也可以通过延迟加载来加载，在这种情况下，ORM 会注入一个集合代理，该集合代理在迭代时会调用数据库。

但是作者不是提出了第三种选择，即每次访问（或者每次调用）都查询*事件吗？*`DeliveryHistory.Events``DeliveryHistory.GetEvents()`

b)

> 它类似于延迟加载，但重要的区别在于，借助存储库查询可以省略对象模型中的 Events 属性。这减少了 DeliveryHistory 实体的“足迹”。

我-我假设通过“*类似于延迟加载*”，您指的是每次请求事件时都从数据库中检索*事件的设计？！*

II - 无论如何，如果我们省略该`DeliveryHistory.Events`属性（并且可能没有定义为替代 a `DeliveryHistory.GetEvents()`），那么我们如何实现作者提出的设计（如我原来的帖子中所述，我知道在页面作者的下方是否提出了更好的选择）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:59:10.397

a)`DeliveryHistory.Events`当存储库加载 DeliveryHistory 实体时，可以加载集合。它也可以通过延迟加载来加载，在这种情况下，ORM 会注入一个集合代理，该集合代理在迭代时会调用数据库。

b) 它类似于延迟加载，但重要的区别在于，借助存储库查询可以省略对象模型中的 Events 属性。这减少了`DeliveryHistory`实体的“足迹”。

延迟加载的问题不是数据可能永远不会被访问，而是第一次访问延迟加载的属性会导致数据库调用，您必须确保连接仍然存在。从某种意义上说，这可能会损害应该被视为一个整体的聚合的完整性。

**更新**

a) 无论哪种方式，最终结果都是相同的。我不确定创建代理集合是否是本书写作时使用的一种技术（2003 年）。

b1) 是的，它们的相似之处在于事件不与 DeliveryHistory 实体一起加载，而只是按需加载。

b2) 将通过调用存储库来访问事件，而不是 DeliveryHistory 实体上的 events 属性。存储库本身将由周围的应用程序服务调用。它将检索事件并将它们传递到需要它们的地方。或者，如果用例正在添加事件，应用程序服务将调用存储库来持久化事件。*****

# c# - c#打印函数隐藏窗口

> ID：14739282
> 
> 赞同：2
> 
> 时间：2013-02-06T21:37:38.530
> 
> 标签：c#, printing, window

我有我的主要表格，然后启动一个新表格。新表格在前面。我将数据发送到打开打印窗口弹出窗口的打印机。（打印为默认值，没有打印机可供选择）然后默认返回到我的第一个表单，我必须在 1 毫秒后在第二个表单上执行 BringtoFront。这是一个好的修复，因为它只是一个小问题，但是有没有办法将打印窗口弹出窗口全部隐藏起来，以便它只在后台打印？

```
// code to print

PrintDocument prnDocument;
string printername;              //Get the default printer name.                
prnDocument = new PrintDocument();
printername = Convert.ToString(prnDocument.PrinterSettings.PrinterName);

if (string.IsNullOrEmpty(printername))
    throw new Exception("No default printer is set.Printing failed!");               

prnDocument.PrintPage += new PrintPageEventHandler(prnDoc_PrintPage);
prnDocument.Print(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:45:17.660

根据这个[SO post](https://stackoverflow.com/questions/5511138/can-i-disable-the-printing-page-x-of-y-dialog)，您应该能够通过执行以下操作来隐藏打印对话框：

```
PrintDocument printDocument = new PrintDocument();
PrintController printController = new StandardPrintController();
printDocument.PrintController = printController; 
```

你是这个意思吗？

# c# - 使用 c# windows 服务不断读取目录中的文件

> ID：14739283
> 
> 赞同：0
> 
> 时间：2013-02-06T21:37:43.820
> 
> 标签：c#, windows-services

我正在寻找一个好的解决方案来不断读取我的 Windows 服务目录中的文件。目前，我正在使用 FileSystemWatcher 来处理添加到目录中的 xml 文件。这在服务运行时效果很好。但是，如果服务因某种原因停止，则在服务停止时添加到目录中的文件永远不会得到处理。最好的解决方案是什么？下面是我为 FileSystemWatcher 提供的代码。也许 FileSystemWatcher 可以做到这一点，但是，我可能使用不正确。

```
// Setup FileSystemWatcher to watch 'IN' directory...
FileSystemWatcher watcher = new FileSystemWatcher();
watcher.Path = ConfigurationManager.AppSettings["InputPath"];
watcher.EnableRaisingEvents = true;
watcher.Filter = "*.xml";
watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite | NotifyFilters.FileName;
watcher.Created += new FileSystemEventHandler(FileAdded); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:49:19.940

您正在陈述两个不同的用例 - 启动和监控。FileSystemWatcher 仅用于监视。

但是在启动时，您必须查看文件系统本身，看看是否有任何文件在等待，如果有，请处理它们。理想情况下，您应该能够使用 FileAdded 函数，或者至少让 FileAdded 调用相同的函数来处理文件。

在启动时，我会做一个简单的循环：while（InputPath 中有任何文件）{ process a file(); } 添加 FileSystemEventHandler 代码；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:00:10.083

`FileSystemWatcher`只会让您在文件处于活动状态时查看当前对文件的更改。要在未更改时捕获更改，您必须在单独的持久（外部文件，DB）列表中跟踪它们。醒来后，您的进程必须根据您的列表检查目录中的文件，以查看是否有新文件。

其他注意事项：如果您的系统正在监视从可能较慢的连接写入的目录（例如，监视 FTP 目录），您将需要设置另一个监视程序或其他机制来检查文件是否仍在更改添加后的一段时间。

同样如其他地方所述，请注意您的目录不要太忙，否则您会错过更新。

# session - 托管缓存上的 Azure 会话

> ID：14739284
> 
> 赞同：1
> 
> 时间：2013-02-06T21:37:48.450
> 
> 标签：session, azure, sync

我有 2 个 webrole 实例。会话存储在 2 个 webroles 中的每一个中的并置缓存中。

由于我使用的是同位缓存，这意味着信息对于每个 webroles 都是本地的。我想知道 Azure 如何在 2 个 Web 角色实例中跟踪我的会话。不知何故，它正在工作，因为对各种网页的重复请求 - 我假设这两个 webrole 中的每一个都在处理这些请求，并没有抛出任何错误，即每个 webrole 都以某种方式知道我的会话。有谁知道本地信息如何通过 Colocated 缓存获得共享？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:53:37.303

好吧 - 如果我理解正确的话 - 你假设缓存对于每个 Web 角色都是本地的，这是不准确的。

Azure 跨两个角色创建分布式缓存，由两个角色共同使用。换句话说 - 每个角色都像远程访问数据一样，不知道数据实际存储在哪里，缓存实现负责从正确的位置获取正确的数据，因此会话数据始终可用，不无论用户的请求到达何处。

# javascript - 如何指定 yepnope.js 放置加载脚本的位置？

> ID：14739289
> 
> 赞同：1
> 
> 时间：2013-02-06T21:38:03.927
> 
> 标签：javascript, jquery, yepnope

我有点 JS 菜鸟。

这是一个粗略的例子，但它说明了我的问题。yepnope 运行良好，但它在堆栈顶部添加了 yep 脚本 (jquery.selectBoxIt.min.js)。问题是如果将加载的脚本放在它在 JQuery 库之前加载的堆栈的顶部。问题是它依赖于 jQuery 才能运行。我查看了 yepnope 文档，但没有看到任何提及它的内容。

这是我的代码（在我的文档底部：

```
<script src="js/jquery.js"></script>
<script src="js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="js/jquery.infieldlabel.min.js"></script>
<script src="js/jquery.colorbox-min.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/modernizr.js"></script>
<script type="text/javascript">
Modernizr.load([
    {
    // Let's check something simple
    test : Modernizr.borderradius,
    // this should then satisfy the yep and load this script
    yep : ['js/jquery.selectBoxIt.min.js']
    }
]);
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:20:28.617

我本人对 Modernizr/yepnope 还很陌生，但是从[yepnode 文档中](http://yepnopejs.com/)我相信关键是使用 yepnope（或 Modernizr，它们是同一件事）以正确的顺序加载您需要的脚本，并且 yepnope 将确保它们按照您指定的顺序执行。

所以我相信你需要的是这样的：

```
<script src="js/modernizr.js"></script>
<script type="text/javascript">   

Modernizr.load([
    {
        // Load jQuery first
        load : ['js/jquery.js', 
                // ... and your other JS files
               ]
    },
    {
        // Let's check something simple
        test : Modernizr.borderradius,
        // this should then satisfy the yep and load this script
        yep : ['js/jquery.selectBoxIt.min.js']
    }
]);

</script> 
```

还可以查看那些 yepnode 文档，了解他们尝试从 CDN 加载 jquery 并在加载失败时回退到本地副本的示例——这让我更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:43:53.887

只需将上面的静态 JS 代码添加到函数中并将其放入 $(document).ready() - 这将确保在调用脚本时加载 jquery。如果这不可行，请尝试使用 javascript 加载 jquery，并在回调中放置静态 JS。请参阅[动态加载 jQuery](https://stackoverflow.com/questions/11212809/load-jquery-using-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:49:21.730

在没有 jquery 的情况下做到这一点：

```
function init(){
  Modernizr.load([
  {
  test : Modernizr.borderradius,
  yep : ['js/jquery.selectBoxIt.min.js']
  }
  ]);
}
document.addEventListener('DOMContentLoaded', init, false) 
```

# python - wxPython wx.TextCtrl 选项卡宽度

> ID：14739293
> 
> 赞同：0
> 
> 时间：2013-02-06T21:38:15.453
> 
> 标签：python, wxpython, wxtextctrl

如何在 wx.TextCtrl 中将 Tab 宽度设置为 4 而不是 8？
如果不可能，可以使用什么替代 wx.TextCtrl？

**注意：**
mytxtCtrl.setDefaultStyle(wx.TextAttr().setTabs([...]) 不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:42:30.507

[`SetTabs`](http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.TextAttr.html#SetTabs)以十分之一毫米为单位。不知道为什么，这很残酷！

```
import wx

TAB = 4

TEST = "".join([" "*i*TAB + "|\n" + "\t"*i + "|\n" for i in range(1, 30, 2)])

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)
        self.text = wx.TextCtrl(self.panel, style=wx.TE_PROCESS_TAB | wx.TE_RICH | wx.TE_MULTILINE)

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.text, 1, wx.ALL | wx.EXPAND)

        self.text.Bind(wx.EVT_SIZE, self.SetTabs)

        self.panel.SetSizerAndFit(self.sizer)
        self.Show()

        self.text.SetValue(TEST)

    def SetTabs(self, e):  
        pixel_width_in_mm = 25.4 / wx.ScreenDC().GetPPI()[0]
        space_width_in_pixels = self.text.GetTextExtent(" ")[0]
        tab_width_in_tenth_of_mm = (10 * TAB * space_width_in_pixels * pixel_width_in_mm)
        textctrl_width_in_mm = (10 * self.text.GetSize()[0] * (1 / pixel_width_in_mm))
        nr_of_tabs = int(textctrl_width_in_mm / tab_width_in_tenth_of_mm)
        tabs = [int((i+1)*tab_width_in_tenth_of_mm) for i in range(nr_of_tabs)]
        attr = wx.TextAttr()
        attr.SetTabs(tabs)
        self.text.SetDefaultStyle(attr)

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T21:43:01.690

像这样：

```
 wx.TextCtrl(panel, pos = (10, 10), size = (40, 20)) 
```

# javascript - 尝试使用 JQuery 突出显示表格行但不起作用，谁能告诉我为什么以及如何解决它？

> ID：14739302
> 
> 赞同：0
> 
> 时间：2013-02-06T21:38:44.673
> 
> 标签：javascript, jquery, html, css

尝试使用 JQuery 突出显示表行但不工作，谁能告诉我为什么以及如何解决它？

桌子：

```
<table id="customers">
    <caption>Customers</caption>
    <thead>
        <tr>
            <th>Customer no</th>
            <th>Last name</th>
            <th>First name</th>
            <th>Options</th>
        </tr>
    </thead>
    <tbody>
        <tr class="alt">
            <td>1</td>
            <td>Jackson</td>
            <td>Simon</td>
            <td>
                <div class="align-left">
                    <input type="submit" name="View" id="view" value="View" />
                </div>
                <div class="align-right">
                    <input type="submit" name="Rent" id="rent" value="Wants to rent" />
                </div>
            </td>
        </tr>
        <tr class="alt">
            <td>1</td>
            <td>Miller</td>
            <td>Darren</td>
            <td>
                <div class="align-left">
                    <input type="submit" name="View" id="view" value="View" />
                </div>
                <div class="align-right">
                    <input type="submit" name="Rent" id="rent" value="Wants to rent" />
                </div>
            </td>
        </tr>
    </tbody>
</table> 
```

查询：

```
 $("#customers tbody tr").hover(

    function () {
        $(this).css({
            background: 'yellow'
        });
    },

    function () {
        $(this).css("background", "");
    }); 
```

发生的情况是当将鼠标悬停在表格行上时不会突出显示，另请注意，当我调整选择器时它适用于 td，但不适用于 tr 行。

CSS：

```
 ...
    /* table data style */

    table {

        border-collapse: collapse;    
        width: 400px;
        color: grey;
        font-family: sans-serif;

    }

    th, td {

        border-bottom: 1px solid brown;
        padding: 5px;
        background-color: seashell;
        text-align: left;    

    }

    th {

        width: 200px;

    }

    td {

        width: 200px;

    }

    tr.alt td, tr.alt th {

        background-color: white;

    }

    tr:last-child td, tr:last-child th {

        border-bottom: 0;

    }

    caption {

        font-weight: bold;
        padding-bottom: 5px;

    }

    .main-font {

        font-family: sans-serif;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:46:08.820

我将在 sbeliv01 的正确答案中添加不需要 Javascript，它可以通过纯 CSS 实现，我强烈建议您将其用于此类事情：

```
#customers tbody tr:hover
{
  background: yellow;
} 
```

**在 OP 发布完整的 CSS 代码后编辑**：是的，您的 CSS 正在“阻止”悬停效果，因为您正在应用`background-color`您的`td`元素。因此，您的`tr`背景颜色已正确更改`yellow`，但您看不到它，因为您`td`的 s 仍然是`seashell`/ `white`。

要解决您的问题，请将背景颜色应用于`tr`您的 CSS 中的 s 而不是您`td`的 s：

```
table {

    border-collapse: collapse;
    width: 400px;
    color: grey;
    font-family: sans-serif;

}

th, td {
    /* Remove background-color here */
    border-bottom: 1px solid brown;
    padding: 5px;
    text-align: left;

}

/* Add this declaration (with the color previously applied to "th, td") */
tr
{
    background-color: seashell;
}

th {

    width: 200px;

}

td {

    width: 200px;

}

/* Change your selector from "tr.alt td, tr.alt th" to this */
tr.alt {

    background-color: white;

}

tr:last-child td, tr:last-child th {

    border-bottom: 0;

}

caption {

    font-weight: bold;
    padding-bottom: 5px;

}

.main-font {

    font-family: sans-serif;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:42:23.377

如果那是您正在使用的确切代码，那么`});`在 jQuery 末尾会有一个额外的代码，它会引发错误。用下面的代码替换它，它应该可以正常工作。

```
$("#customers tbody tr").hover(
    function ()
    {
        $(this).css({background: 'yellow'});
    },

    function ()
    {
        $(this).css("background", "");
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:49:12.270

你可以试试这个

```
$('#customers tbody tr').mouseenter(function(){
    $(this).css({ background: 'yellow' });
}).mouseleave(function(){
    $(this).css({ background: '' });
}); 
```

# java - JAX-RS/Jersey + text/xml：我可以指定一个 xml 样式表吗？

> ID：14739303
> 
> 赞同：1
> 
> 时间：2013-02-06T21:38:45.950
> 
> 标签：java, xslt, jersey, jax-rs

我已经使用[jersey](http://jersey.java.net/)实现了 REST 服务。当响应的 mime 类型为“text/xml”时，有没有办法指定关联的[xml-stylesheet](http://www.w3.org/TR/xml-stylesheet/)？

谢谢你。

更新：这是一段代码：

```
@Path("/service")
@Stateless
public class MyServices
    {
    @PersistenceContext(unitName = "em")
    private EntityManager em;

    @Path("/id/{id}")
    @GET
    public MyClass getById(@PathParam("id")long id)
        {
        MyClass o=em.find(MyClass.class, id);
        return o;
        }
     } 
```

.

```
@Entity(name="X")
@XmlRootElement(name="X")
@NamedQueries(...)
public class MyClass
    implements Serializable
    {
    private static final long serialVersionUID = 1L;

    ...
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:56:21.740

请参阅：[有没有办法修改 Jersey 生成的 XML 响应以包含样式表信息？](https://stackoverflow.com/questions/12218591/is-there-a-way-to-modify-jersey-generated-xml-response-to-include-stylesheet-inf)

有一个很好的[XmlHeader](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/api/provider/jaxb/XmlHeader.html)注释可以很好地与 JAXB 配合使用。

```
@Path("/id/{id}")
@GET
@Produces("application/xml")
@XmlHeader("<?xml-stylesheet type=\"text/css\" href=\"something.css\"?>")
public MyClass getById(@PathParam("id")long id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:43:42.907

用 OP 评论编辑：

我会使用 StringWriter 首先将样式表信息写入其中，然后将对象编组到其中：

```
StringWriter writer = new StringWriter();
//add processing instructions "by hand" with escaped quotation marks
//or single marks
writer.println("<?xml version='1.0'?>");
writer.println("<?xml-stylesheet type=\"text/xsl\" href=\"\">");

//create and configure marshaller to leave out processing instructions
Marshaller marshaller = context.createMarshaller();
marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.TRUE);

//marshal to the StringWriter
marshaller.marshal(someObject,writer);
//get the string representation 
String str = writer.toString(); 
```

当然，您也可以直接打印到您想要的每个其他输出流，例如文件或 Sytstem.out。

放在`<?xml-stylesheet href="my-style.css"?>`文档的其余部分之前？

# javascript - 在 JavaScript 中 me = this 是支持缩小的好习惯吗？

> ID：14739306
> 
> 赞同：2
> 
> 时间：2013-02-06T21:38:59.027
> 
> 标签：javascript, minify

所以在我的 JavaScript 代码库中，我一直在使用这个`var me = this`成语来支持缩小。但我最近开始质疑这一点，我想知道是否`this`可以使用更智能的缩小工具来避免分配给变量？

似乎一个工具应该能够检测到创建一个变量来表示的函数`this`会在多次调用`this`. 布尔值也可以这样做，例如`var yes = true, nope = false`.

有没有我可以使用的工具来避免设置`var me = this`我的代码库？一般来说，更改代码库以更好地支持缩小是一个好主意吗？

请记住，我确实了解在某些情况下，我需要分配一个变量`this`来引用 JavaScript 闭包内的外部范围。`var me = this`I amtaking about的使用仅用于支持缩小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:42:40.677

在准备好实时部署代码之前，您不必担心缩小问题。完成后，我建议使用 Google 的闭包编译器来缩小所有代码。在这里查看：[http ://code.google.com/p/closure-compiler/](http://code.google.com/p/closure-compiler/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T15:12:45.447

它不仅支持缩小，还可以用于闭包。当您创建函数时，例如在回调中使用时，您必须注意调用函数时的“this”是什么。开始使用 Javascript 时的一个常见错误是得到错误的“this”。“var me = this”模式有助于避免这种情况。例如

```
function doSomething() {
    var me = this;
    callSomethingAsynchronous(42, function (result) {
        // Here 'this' will depend on the caller of the callback functon.
        me.theResult = result;
    });
} 
```

请注意，像 Ext 这样的框架不鼓励这样做，并让您将范围变量与回调一起传递。

```
callSomethingAsynchronous(42, me.handlerFunction, me); 
```

它允许您将 handlerFunction 的定义保留在原型上，而不是继续创建它们。有时闭包只是更好的方法，因为您必须包含仅在运行时才知道的信息

```
function sayHelloInAContrivedWay (name) {
    getTheGreetingAsync(function (greeting) {
        console.log(greeting + name);
    });
} 
```

每当我在一个函数中多次访问它时，我都会使用“var me = this”。缩小器确实将其减少为单个字符。如果我正在访问一个子对象，我也会为此创建一个 var

```
function keepInnerWombatFit () {
   var me = this,
       wombat = me.inner.wombat;

   wombat.run();
   wombat.jump();
   wombat.sitDown();

   me.excerciseCount++;
} 
```

我已经看到一次又一次地输入（或剪切和粘贴）大量嵌套访问的代码，这些代码无法缩小，可能会花费一点性能并且更难阅读和维护。

```
this.inner.wombat.run();
this.inner.wombat.jump();
this.inner.wombat.sitDown(); 
```

# log4j - 如何从本地运行的电锯查看远程服务器上的日志

> ID：14739309
> 
> 赞同：3
> 
> 时间：2013-02-06T21:39:19.433
> 
> 标签：log4j, apache-chainsaw

在我的 log4j.properties

# 定义一个向电锯发送消息的套接字附加程序

```
log4j.appender.Chainsaw=org.apache.log4j.net.SocketAppender
log4j.appender.Chainsaw.remoteHost=localhost
log4j.appender.Chainsaw.port=29678
log4j.appender.Chainsaw.locationInfo=true
log4j.appender.Chainsaw.Threshold=INFO 
```

我运行chainsaw.bat 并定义了一个侦听端口29678 的套接字接收器，我可以在电锯上看到我本地的日志。

但是当我将我的应用程序部署到我们的远程服务器上时

```
#Define a socket appender that sends messages to the chainsaw
log4j.appender.Chainsaw=org.apache.log4j.net.SocketAppender
log4j.appender.Chainsaw.remoteHost=vlslcsdbx04.regence.com
log4j.appender.Chainsaw.port=29678
log4j.appender.Chainsaw.locationInfo=true
log4j.appender.Chainsaw.Threshold=INFO 
```

并使用主机 vlslcsdbx04.regence.com 和端口 29678 定义和 sockethubreciever，Chainsaw 似乎不想连接。

如何使用本地计算机上的电锯从远程服务器查看日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:47:57.790

您必须在远程服务器部署的 log4j 配置文件中使用带有 Chainsaw SocketHubReceiver 条目的 SocketHubAppender 以允许 Chainsaw 连接到远程服务器。

此外，我建议尝试最新的 Chainsaw 开发人员快照 - 可在此处获得 - 许多新功能/修复：

[http://people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# javascript - JavaScript Object vs Map - 如何处理特殊键？

> ID：14739312
> 
> 赞同：3
> 
> 时间：2013-02-06T21:39:28.417
> 
> 标签：javascript, node.js, object, map

在 Java 中，我发现直接获取一个字符串并将其用作`LinkedHashMap`. 我什至可以毫不费力地将它翻译成 JSON 并返回。

我现在使用的是 Node.JS/JavaScript，有一种特殊情况没有处理。

```
var makesSense = '{"__proto__":"foo","toString":"bar"}'
var noSense = JSON.stringify(JSON.parse('{"__proto__":"foo","toString":"bar"}'))
console.log(noSense) // outputs {"toString":"bar"} 
```

推荐的处理方式`__proto__`和其他类似的方法是什么。看起来这`toString`不会造成任何麻烦，但假设我需要一致地处理不受信任的数据。推荐的解决方案是什么？

*   在每个键之前添加一个额外的字符？如果是这样，哪个角色最有意义？我知道它不能是下划线，那么空格呢？
*   使用一个为我处理这个的模块？我想要一个可以方便地处理这个并且没有过多功能的人。（虽然有些功能会很好）
*   还有什么？有没有兼容的解决方案`JSON.parse`？

为什么这很重要？当然，实际上没有人会`__proto__`意外地打字。但是，如果他们是故意这样做的。他们知道我在使用 JavaScript，那又怎样？- 除以下情况外没有问题：

*   软件有一个字符串数组。碰巧这些字符串中的一个说`__proto__`是因为有人试图破坏我的软件。
*   软件使用这些字符串作为键创建地图，并用一些不错的数据填充地图。
*   软件稍后会遍历字符串数组，并从 Map 中收集信息。Map 返回一些空值，然后是*繁荣*：空指针异常。
*   软件现在不起作用。这相当于拒绝服务。

我知道这种情况非常罕见，但我不喜欢它。我不记得我正在使用的编程语言的所有怪癖，所以如果有足够的时间，我一定会编写这种代码。

我以创建不受篡改的代码而自豪。所以，我试图从我的软件中消除这些针孔。

是的，这些都是非常次要的，但至少值得一个 StackOverflow 问题，看看人们是否有比我知道的更好的答案。我通过这种方式学到了很多东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:42:48.443

> 在每个键之前添加一个额外的字符？如果是这样，哪个角色最有意义？我知道它不能是下划线，那么空格呢？

我使用 an `x`，但它是任意的。只要您使用不太可能形成特殊属性名称的东西，例如（在某些引擎上）`__proto__`、或`toString`、或`valueOf`（我不知道任何以 开头的特殊属性名称`x`），您就可以了。

# xcode - uipicker替换键盘

> ID：14739314
> 
> 赞同：0
> 
> 时间：2013-02-06T21:39:30.567
> 
> 标签：xcode, replace, keyboard, uitextfield, uipicker

好的，我正在尝试用 UIpicker 替换键盘。我输入了代码，Uipicker 总是显示，当你点击文本字段时，键盘当然会出现......我什至在里面设置了断点，看看它是否进入了告诉它隐藏键盘，它永远不会......有人会看看它，看看我哪里出错了

```
 #import "collectionViewViewController.h"
#import "activityCell.h"

@interface collectionViewViewController ()
{
    NSArray *imageArray;
    NSArray *labelArray;
}

@end

@implementation collectionViewViewController
@synthesize pickerViewContainer;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    //picker exists in the view, but is outside visible range
    UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(200, 780, 400, 270)];
    pickerView.delegate = self;
    pickerView.showsSelectionIndicator = YES;
    [self.view addSubview:pickerView];

    [[self collectionView]setDataSource:self];
    [[self collectionView]setDelegate:self];

    imageArray = [[NSArray alloc]initWithObjects:
        @"act_blank.png",
        @"act_blank.png",
       @"act_blank.png",
       @"act_blank.png",
       @"act_blank.png",
        @"act_blank.png",
        @"act_1.png",
        @"act_2.png",
        @"act_3.png",
        @"act_4.png",
        @"act_5.png",
        @"act_6.png",
        @"act_7.png",
        @"act_8.png",
        @"act_9.png",
        @"act_10.png",
        @"act_11.png",
        @"act_12.png",
        @"act_13.png",
        @"act_14.png",
        @"act_15.png",
        @"act_16.png",
        @"act_17.png",
        @"act_18.png",nil];

    [[self pickerView]setDataSource:self];
    [[self pickerView]setDelegate:self];

    arrayHour = [[NSMutableArray alloc] init];
    [arrayHour addObject:@"0 h"];
    [arrayHour addObject:@"1 h"];
    [arrayHour addObject:@"2 h"];
    [arrayHour addObject:@"3 h"];
    [arrayHour addObject:@"4 h"];
    [arrayHour addObject:@"5 h"];
    [arrayHour addObject:@"6 h"];
    [arrayHour addObject:@"7 h"];
    [arrayHour addObject:@"8 h"];

    arrayMinute = [[NSMutableArray alloc] init];
    [arrayMinute addObject:@"0 min"];
    [arrayMinute addObject:@"15 min"];
    [arrayMinute addObject:@"30 min"];
    [arrayMinute addObject:@"45 min"];
    pickerViewContainer.hidden = YES;

    //labelArray = [[NSArray alloc] initWithObjects:@"1st",@"2nd", nil];

    // Do any additional setup after loading the view.
}

//animate the picker into view
- (void)textFieldDidEndEditing:(UITextField *)textField {

    [UIView beginAnimations:@"picker" context:nil];
    [UIView setAnimationDuration:0.5];

    _pickerView.transform = CGAffineTransformMakeTranslation(0,-236);
    [UIView commitAnimations];

}

//animate the picker out of view
- (void)textFieldDidBeginEditing:(UITextField *)textField {

    [UIView beginAnimations:@"picker" context:nil];
    [UIView setAnimationDuration:0.5];

    _pickerView.transform = CGAffineTransformMakeTranslation(0,236);
    [UIView commitAnimations];
}

//just hide the keyboard in this example
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return NO;
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectioinView
{
    return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return [imageArray count];
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier=@"cell";
    activityCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    [[cell imageView]setImage:[UIImage imageNamed:[imageArray objectAtIndex:indexPath.item]]];

      UITextField *nameLabel = (UITextField *)[cell viewWithTag:1];

    nameLabel.text = @"HERRO";
    //[[cell textField]setText:[labelArray objectAtIndex:indexPath.item]];

    return cell;

}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView
{

    return 2;

}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {
    if (component == HOUR)
        return [arrayHour count];
    if (component == Minutes)
        return [arrayMinute count];

    return 0;
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{

    if (component == HOUR)
        return [arrayHour objectAtIndex:row];
    if (component == Minutes)
        return [arrayMinute objectAtIndex:row];

    return 0;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
//    static NSString *CellIdentifier=@"cell";
//    
//    activityCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
//
//    
//    
//    UITextField *nameLabel = (UITextField *)[cell viewWithTag:1];

    //nameLabel.text = [NSString stringWithFormat:@"%@  %@",[arrayHour objectAtIndex:[pickerView selectedRowInComponent:0]], [arrayMinute objectAtIndex:[pickerView    selectedRowInComponent:1]]];

    //textLabel.text = [NSString stringWithFormat:@"%@  %@",[arrayHour objectAtIndex:[pickerView selectedRowInComponent:0]], [arrayMinute objectAtIndex:[pickerView    selectedRowInComponent:1]]];

    //[[cell textField]setText:[labelArray objectAtIndex:indexPath.item]];
    //textField.text = [NSString stringWithFormat:@"%@  %@",[arrayHour objectAtIndex:[pickerView selectedRowInComponent:0]], [arrayMinute objectAtIndex:[pickerView    selectedRowInComponent:1]]];

    return 0;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidUnload {
    [self setCollectionView:nil];
    [self setPickerView:nil];
    [self setPickerViewContainer:nil];
    [self setTimeText:nil];
    collectionView = nil;
    [super viewDidUnload];
}
- (IBAction)closePicker:(id)sender {
    pickerViewContainer.hidden = YES;
}

- (IBAction)showPicker:(id)sender {
    pickerViewContainer.hidden = NO;
}
@end 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T22:48:57.747

看看[这里](https://stackoverflow.com/questions/14597902/bringing-up-a-uipickerview-rather-than-keyboard-input-ios/14613437#comment20594691_14613437)的这个问题和下面我的回答，看看这是否有帮助。基本上处理这个问题的最好方法是将键盘类型实际设置为 UIPicker：

```
UIPickerView *pickerView = [[UIPickerView alloc] init];
pickerView.dataSource = self;
pickerView.delegate = self;
// ... ...
self.pickerTextField.inputView = pickerView; 
```

把它放在你的 viewDidLoad 或某个地方，这样当用户选择 UITextField 时，它实际上会拉出一个 UIPicker 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:41:48.880

您没有覆盖正确的委托方法：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    <code that presentes the picker view>
    return NO;
} 
```

这应该会阻止文本字段显示键盘，而是做任何你想做的事情。

# c++ - 如何解决 *** 缺少分隔符。编译 QT（或支持库）时？

> ID：14739316
> 
> 赞同：0
> 
> 时间：2013-02-06T21:39:48.840
> 
> 标签：c++, qt, makefile, libqxt

在为 Windows 编译 QXT 时（按照[这些说明](http://dev.libqxt.org/libqxt/wiki/user_guide)），从命令行运行“make”时，我从 Makefile.Debug 收到以下错误：

```
*** missing separator.  Stop. 
```

我一直在使用 QT 生成 Visual Studio 项目文件，但不知道为什么会这样。

这也可能发生在支持库（例如 quazip）或您在 Windows 上使用 qmake 生成 Makefile 时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:39:48.840

确保验证您的 QMAKESPEC 设置是否正确。如果您以前生成过 Visual Studio 项目，它可能会设置为此，请确保将其更改为：

```
QMAKESPEC = QTDIR\mkspecs\win32-g++ 
```

否则 Makefile 将无法正确生成。

请参阅[此处](http://qt-project.org/forums/viewthread/3865)了解更多信息。

* * *

我的部分职责是帮助他人避免[这个问题](http://xkcd.com/979/)

# asp.net - ASP.NET 表在 PostBack 发生后导致 500 错误

> ID：14739320
> 
> 赞同：0
> 
> 时间：2013-02-06T21:40:06.483
> 
> 标签：asp.net, ajax

再会！我花了好几个小时试图弄清楚这一点，现在我需要一些帮助。

我有一个 ASP.NET AjaxToolKit `TabContainer`，它有四个`TabPanel`孩子。这些孩子中的每一个都有自己的`UpdatePanel`，因此我可以在每个面板中运行逻辑而无需重新加载所有内容（AJAX）。

这是我的问题：

在我的 SECOND`TabPanel`中，我有一些看起来像这样的标记：

```
<div id="ProgramMilestonesDiv" style="margin-left: 6px;">
    <asp:Table ID="ProgramMilestonesTable" runat="server" Visible="true">
    </asp:Table>
</div> 
```

在我的`Page_Init`例程中，我动态地将行/单元格/标签/texboxes 添加到控件中。

当我在 SECOND`TabPanel`中进行回发时，FIRST 中的任何回发现在都会`TabPanel`导致从服务器返回 500 错误。如果我从未在 SECOND 中进行回发，则第一次回发运行良好。即使我没有在为表动态创建的控件中放置任何值（即，我没有在其中放置任何无效字符来触发页面验证）也是如此。

如果我删除文本框的动态创建，它可以工作，但我很难理解为什么，因为它们是空白的，并且我确保所有控件 ID 都是唯一的。我什至在页面上有一堆其他动态创建的文本框，使用相同的代码隐藏方法，它们工作正常（它们在`Accordion`控件的表中）。

关于可能出现问题的任何建议？关于调试它以查看它失败的具体原因的任何建议？

我用于创建文本框的代码隐藏如下所示：

```
 public static void AddVariableCostRowToTable(Table TargetTable, string CostArea, string CostType, Extender Extender)
    {
        string[] quarters = { "Q1", "Q2", "Q3", "Q4", "Q5", "Q6", "Q7", "Q8", "Q9", "Q10", "Q11", "Q12" };

        TableRow row = new TableRow(); // New row we'll add to table.

        // First cell is just the name of the cost.
        TableCell cell = new TableCell();
        Label label = new Label();
        label.Width = new Unit(175);
        label.Text = CostType.Replace('_', ' ') + ":";
        cell.Controls.Add(label);
        row.Controls.Add(cell);

        // Create all the textboxes for the individual quarters.
        foreach (string q in quarters)
        {
            row.Controls.Add(CreateNewCellWithTextBox(CostArea, CostType, q, Extender));
        }

        TargetTable.Controls.Add(row); // Add the row to the table.
    }

 public static TableCell CreateNewCellWithTextBox(string CostArea, string CostType, string Quarter, Extender Extender)
    {
        TableCell cell = new TableCell();
        TextBox textbox = new TextBox();

        textbox.ID = CostArea + CostType + Quarter; // string
        textbox.Width = new Unit(65); // Pixels wide.
        textbox.Text = "";
        if (Extender == Extender.MASKED_EDIT_EXTENDER) textbox.Text = "0"; // Only initialize to 0 if textbox is for money.
        textbox.Style.Add(HtmlTextWriterStyle.TextAlign, "right");
        textbox.ClientIDMode = ClientIDMode.Static;

        cell.Controls.Add(textbox);

        if (Extender == Extender.MASKED_EDIT_EXTENDER) // If calling routine wanted a $$$ filter on the textbox.
        {
            // Add an ajaxtoolkit extender so we can enforce currency formatting.
            MaskedEditExtender extender = new MaskedEditExtender();
            extender.ID = "MaskedEditExtender" + textbox.ID;
            extender.TargetControlID = textbox.ID;
            extender.Mask = "999999";
            extender.OnFocusCssClass = "MaskedEditFocus";
            extender.MaskType = MaskedEditType.Number;
            extender.InputDirection = MaskedEditInputDirection.RightToLeft;
            extender.AcceptNegative = MaskedEditShowSymbol.Left;
            extender.DisplayMoney = MaskedEditShowSymbol.Left;

            cell.Controls.Add(extender);
        }

        return cell;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:58:30.340

事实证明，我超出了单个回发中允许的控件数量。

你可以在这里读到它：

[ASP.NET MS11-100：如何更改发布表单值的最大数量限制？](https://stackoverflow.com/questions/8684049/asp-net-ms11-100-how-can-i-change-the-limit-on-the-maximum-number-of-posted-for)

我使用这个 web.config 设置来增加它：

```
<appSettings>
    <add key="aspnet:MaxHttpCollectionKeys" value="2000" />
</appSettings> 
```

我是否应该使用那么多控件是一个完全不同的问题。:)

我通过删除页面上的其他内容来解决这个问题。当我这样做时，它又开始工作了。

这几乎把我逼到了精神错乱的边缘。万岁！

# ios - 返回到应用程序后关闭选项卡

> ID：14739322
> 
> 赞同：2
> 
> 时间：2013-02-06T21:40:20.510
> 
> 标签：ios, mobile-safari, box-api

我正在实现一个在 iOS 6.1 上使用 box-api 的应用程序。

该应用程序调用移动 safari，返回时 Box 上的登录页面保持打开状态。我想做的是在收到登录名和令牌后告诉移动 Safari 关闭选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:10:12.330

我们使用 API v1 auth 为 Web 应用程序完成此操作，因此您可以尝试在 iOS 上执行相同的操作以查看它是否有效。

基本上，如果你去编辑你的应用程序，有一个名为“后端参数：”的部分，带有一个选项“重定向 url：”。我们将重定向 URL 设置为具有以下脚本的网页：

```
<script>window.close();</script> 
```

当用户在身份验证过程之后被重定向到该页面时，这将关闭窗口。请注意，此 javascript 命令仅适用于已由 javascript 打开的窗口，因此如果您在浏览器中手动导航到该窗口，*它将不会*关闭。我不确定在移动 Safari 中打开标签的行为会是什么。

# asp.net - 在 asp.net webform 中将自定义对象从一个页面传递到另一个页面的方法

> ID：14739324
> 
> 赞同：0
> 
> 时间：2013-02-06T21:40:22.863
> 
> 标签：asp.net

我想在 C# asp.net 中将自定义对象从一个页面传递到另一个页面> 据我所知，以下是可用的方法：

1.  PreviousPage 中的公共属性（如果导航是通过 Server.Transfer 发生的）
2.  会议
3.  曲奇饼
4.  作为表单控件（如果页面没有母版页。）
5.  查询字符串（不适合自定义对象）

有没有替代方法？由于各种原因，我无法使用其中的任何一个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:16:32.150

至于传递自定义对象，一种替代方法是使用 jQuery 从页面 A 上的链接的 onclick 事件和页面 B 上的 $(document).ready 函数（或页面加载方法）调用 Web 服务并传递 JSON来回序列化对象。

但是，要使其正常工作，您仍然需要通过某种方式识别页面 B 上的用户，以便从页面 A 中获取该用户的正确对象。如果您可以使用 Session、Cookie 或 QueryString 来传递 guid或其他一些唯一标识符，你都设置好了。如果不是，我认为您已经排除了所有选项，您需要提供更多详细信息，说明您如何验证您的用户、您需要的站点安全性以及页面之间的安全性。

# php - 如何使用 Twitter 的 API (1.1) 设置最大限制（3200 条推文）

> ID：14739329
> 
> 赞同：0
> 
> 时间：2013-02-06T21:40:35.157
> 
> 标签：php, refactoring, twitter

我已经能够做到，但这是一种相当“丑陋”的方式。

我在重构时面临的一个问题是我需要调用“max_id”，但在第一次调用之前我需要使用占位符。我尝试对 $max_id 使用 'null' 和 '' 但都不起作用。另外，我感觉它可以在不使用手动“for”循环的情况下编写。

到目前为止，这是我的代码：

```
 $i = 1;
  $content = $connection->get('statuses/user_timeline', array('screen_name' => 'username', 'count' => '200'));
  foreach ($content as $item) {
    echo $i . " : " . $item->text;
    echo("<hr>");
    $i++;
  }
  $lastTweet = end($content);
  $max_id = $lastTweet->id_str;

  for ($l = 0; $l<15; $l++) {
    $content = $connection->get('statuses/user_timeline', array('screen_name' => 'username', 'count' => '200', 'max_id' => $max_id));
    foreach ($content as $item) {
      echo $i . " : " . $item->text;
      echo("<hr>");
      $i++;
    }
    $lastTweet = end($content);
    $max_id = $lastTweet->id_str;
  } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:47:22.600

我知道这并不漂亮，但在循环内部你不能只设置一个测试变量。有点像第一次通过实例，还是会破坏重构的意义？

```
$maxID = false;
if(!$maxID) $content = $connection->get('statuses/user_timeline', array('screen_name' => 'username', 'count' => '200'));
else { $content = $connection->get('statuses/user_timeline', array('screen_name' => 'username', 'count' => '200', 'max_id' => $max_id)); 
$maxID = true; } 
```

如果你小心点，而不是 for 循环，你可能会用一个 while 循环（）来解决你返回的项目的计数，然后只需通过每次传递返回的推文数来增加该变量。只是永远不要意外地让你的 while 循环永远运行，或者你可以暂时告别 twitter api 请求。

```
$countTweets = 0;
 while($countTweets < 3200)
 { //code for your calls, do what you gotta do
   $countTweets += count($content);
 } 
```

我使用与您所拥有的非常相似的东西，除了我只是将下一组推文合并到一个总数组中，然后处理那个大推文列表。我也只是测试总合并数组的计数，而不是添加到计数变量。

# c# - 在文本框中键入时导致数字一个接一个出现，但在出现 0 时也会使它们相加

> ID：14739332
> 
> 赞同：1
> 
> 时间：2013-02-06T21:40:44.733
> 
> 标签：c#, textbox, numbers

**任务**

1.  在单个字段中创建一个接受整数作为输入的 Windows 应用程序，一次一个。
2.  按钮 Process 会导致在输入字段的正下方显示该数字，但前提是它大于当前显示的数字（或者它是第一个处理的数字）。处理完零（0）后，停止接受更多输入。
3.  作业的第三部分：显示（在输入字段上方）所有已处理数字的总和。

所以这是我的任务。

到目前为止，我完成了作业的第一部分和第三部分。我不知道如何开始第二部分。到目前为止我所拥有的是

```
 label1.Text = textBox1.Text;
 label2.Text = textBox1.Text;
 label3.Text =(Convert.ToInt32(label1.Text) + Convert.ToInt32(label2.Text)).ToString(); 
```

如果我不明白，让我试着解释一下

*   我的第一个问题是如何使这个更具体..我希望能够在我的文本框中输入一个数字并将其发送到我的 label1 然后..当我输入下一个数字时它会转到标签 2 而不是label1.. 并重复到 label3-9..
*   第二个问题：如何限制数字，以便标签 1（如果它是一个更大的数字）导致标签 2 不出现。
*   最后一个问题，一旦在文本框中输入 0 并显示为标签，我如何才能到达哪里，它会导致所有数字的总和出现在另一个标签中......

很抱歉，如果这太过分了，我可以把这些问题分开......

这是我的作业看起来像 atm

```
private void textBox1_TextChanged(object sender, KeyPressEventArgs e)
{
    textBox1.MaxLength = 1;
    Char digit = e.KeyChar;
    if (!Char.IsDigit(digit) && digit != 8)
        e.Handled = true;
    for (int i = 0; i < Text.Length; i++)
    {
        int c = Text[i];
        if (c < '0' || c > '9')
        {
            Text = Text.Remove(i, 1);
        }
    }
}

private void processBtn1_Click(object sender, EventArgs e)
{
    int current = 0;
    int sum = 0;
    int num = Int32.Parse(textBox1.Text);
    if (num > 0)
    {
        sum += num;
        if (num > current)
        {
            label1.Text = num.ToString();
            current = num;
        }
    }
} 
```

这就是我所拥有的..但是程序不像我想要的那样工作..我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:55:36.530

将输入的数字存储在标签中效果不佳。您可能会受到表单中标签数量的限制，或者您需要动态创建标签。您可以将数字存储在数组或列表中，但实际上您根本不需要存储数字，您可以保留数字的总和并在处理完每个数字后忘记它。

将当前显示的数字存储在变量中。如果你的程序不需要处理负数，你可以让它从零开始：

```
int current = 0; 
```

您还需要一个变量来总结所有数字：

```
int sum = 0; 
```

在按钮的事件处理程序中，解析文本框中的文本，检查是否为零，将其添加到总和中，并将其与当前显示的数字进行比较。如果较大，请将其放入标签中，并放入变量中：

```
int num = Int32.Parse(textBox1.Text);
if (num > 0)
{
    sum += num;
    if (num > current)
    {
        label1.Text = num.ToString();
        current = num;
    }
}
else
{
    label2.Text = sum.ToString();
    // stop accepting input, perhaps exit?
} 
```

# opengl - openGL 像素坐标

> ID：14739337
> 
> 赞同：2
> 
> 时间：2013-02-06T21:41:13.323
> 
> 标签：opengl

我正在尝试使用 openGL 中的纹理来进行并行计算（openCL 不是一个选项）。我知道从左下角开始，每个轴上的域是 0.0 到 1.0。但是，渲染过程中像素的坐标是映射到像素的左上角，还是像素的中间？

前任。如果我有一个 100x100px 的纹理。最左上角像素的坐标是（0.0,1.0）还是（0.005,0.995）？我以为是前者，但得到了一些意想不到的结果。我想知道我是否正在访问“像素边界”上的数据，并且 openGL 正在插入一个平均两个相邻像素的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-24T02:35:36.790

OpenGL 像素/片段在概念上是以半整数像素为中心的 1x1 正方形。OpenGL 4.5 规范指出：

> 片段位于其左下角，位于整数网格坐标上。光栅化操作还涉及片段的中心，该中心从其左下角偏移 (1/2,1/2)（因此位于半整数坐标上）。

所以对于 100x100 像素，纹素之间的水平距离是 1/100 = 0.01。因此左边缘和第一个纹素中心之间的距离是 0.01/2 = 0.005。

从左下角开始的第一个垂直纹素中心也是 0.005，所以从顶部开始，第一个纹素中心是 1.0 - 0.005 = 0.995。

这就是为什么你会得到这些数字。

您可以[在此处查看我的帖子](https://stackoverflow.com/questions/25457323/how-to-rasterize-opengl-triangle-on-half-integer-pixels-centers)以获取更多详细信息（tex 坐标内容接近尾声）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:07:26.500

像素的中心其实是后者，即(0.005,0.995)。

`GL_NEAREST`正如 Nicol Bolas 在评论中提到的那样，您可以通过将过滤方法更改为创建纹理时来防止 opengl 跨像素插值。

# ruby-on-rails - 如果我们只是编写一个 GET 服务，我们需要验证器吗？

> ID：14739338
> 
> 赞同：0
> 
> 时间：2013-02-06T21:41:15.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

如果我正在编写模型，我能知道添加验证器以使存在为真，......等等，但我想知道这个模型是否旨在用于 GET RESTful 服务，那么我是否仍然需要有这样的验证器我的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:06:03.187

您不需要验证 GET 数据，那么您将如何获取信息？

[仅当您按照Ruby on Rails 指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html)中所述将数据保存到数据库时才会运行验证

# jquery - 使用变量将元素设置为百分比宽度？

> ID：14739339
> 
> 赞同：-1
> 
> 时间：2013-02-06T21:41:17.620
> 
> 标签：jquery

如何使用变量将元素设置为百分比宽度？

```
var progBarValue = $('.days-due').text();

$('.bar').width(progBarValue%); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:42:17.590

该值是一个字符串，因此您只需将百分号附加到它。

```
var width = parseInt(progBarValue);
if (width > 100)
{
    width = 100;
}

$('.bar').width(width +"%"); 
```

# ruby-on-rails - 用户模型：用户名格式方法

> ID：14739341
> 
> 赞同：0
> 
> 时间：2013-02-06T21:41:19.243
> 
> 标签：ruby-on-rails, ruby, format

好的，所以在我的用户模型中，我创建了 get_username 以尝试格式化用户名。

这个想法是能够使用

```
TheUser.get_username 
```

它会根据用户级别（管理员）正确格式化用户名。作为测试，我创建了这个：

```
 def get_username 
    fname = '<span style="color:red">John</span>'
    fname
  end 
```

但是，它使用显示的代码逐字显示值。

我怎样才能插入用户名并正确显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:44:26.303

您可以使用[`html_safe`](http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/).

```
 def get_username 
   fname = '<span style="color:red">John</span>'
   fname.html_safe
 end 
```

* * *

要获取用户名，请使用：

```
def get_username 
  fname = "<span style='color:red'>#{user_name}</span>"
  fname.html_safe
end 
```

请注意，这是非常糟糕的代码，这不仅滥用了 MVC 的职责分离，还可能引入安全漏洞。

像这样的代码应该在视图中或助手中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:38:33.690

模型不应该创建 html。你在视图中这样做。我可以建议另一种方法吗：

我想，你有一些变量来存储`user_level`. 在视图中使用它，如下所示：

```
# .ERB-File
<span class="<%= user.user_level %>"><%= user.user_name %></span> 
```

现在用 css 格式化它：

```
# .css-File
span.normal_user {
  color: green;
}
span.admin {
  color: red;
} 
```

PS：我不确定 ERB 语法（我使用 haml）。

# javascript - JavaScript：如何在字符串中设置变量

> ID：14739344
> 
> 赞同：0
> 
> 时间：2013-02-06T21:41:34.417
> 
> 标签：javascript

我想为所有 id 以“id-”开头的元素设置属性，后跟一个数字[例如 id="id-0", id="id-1) 等等]。我想到了这样的事情：

```
<script type="text/javascript" >

function Prepare() {
    var = 0
    while(document.getElementById("id-{var}")) {
        document.getElementById("id-{var}").setAttribute("rows", "60");
        var += 1
    }

</script> 
```

如何在 JavaScript 中设置这样的 var？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:44:02.007

这应该完成任务：

```
<script type="text/javascript" >

function Prepare() {
    var ct = 0
    while(document.getElementById("id-"+ct)) {
        document.getElementById("id-"+ct).setAttribute("rows", "60");
        ct += 1
    }

</script> 
```

或者：

```
<script type="text/javascript" >
function Prepare() {
    for(var ct = 0;document.getElementById("id-"+ct);ct++) {
       document.getElementById("id-"+ct).setAttribute("rows", "60");
     }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:55:09.527

根据兼容性，您可以使用[`querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)：

```
function Prepare(){
    var els = document.querySelectorAll("[id^=id]");

    for(var i=0; i<els.length; i++){
        els[i].setAttribute("rows", 60);
    }
} 
```

**[例子](http://jsfiddle.net/ChaseWest/Adnhz/3/)**

# asp.net - 解锁会员 asp.net 中的锁定帐户

> ID：14739346
> 
> 赞同：0
> 
> 时间：2013-02-06T21:41:53.983
> 
> 标签：asp.net, asp.net-membership, unlock

我忘记在我的网络配置中更改“maxInvalidPasswordAttempts”，它是 5！现在我的一个用户被锁定了。我已将 Islocked 列更改为 false，但它保持解锁状态。任何机构都可以帮助我如何解锁该用户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:16:22.863

您想在 Membership 表的两列中进行更新。

IsLockedOut 为 0

失败密码尝试计数为 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:02:10.730

`UnlockUser()`在您的代码中使用该方法。

[http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.unlockuser.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.unlockuser.aspx)

# javascript - Box2DWeb - GetBody() 不工作

> ID：14739348
> 
> 赞同：0
> 
> 时间：2013-02-06T21:41:57.183
> 
> 标签：javascript, box2d, box2dweb

我需要获取夹具的主体，但是当我调用 fixture.GetBody() 函数时，它返回此错误： Object # has no method 'GetBody';

这是代码：

var bodyDef = 新 b2BodyDef;

```
var bouncebodyDef = new b2BodyDef;

bouncebodyDef.type = b2Body.b2_dynamicBody;   

var bounceDef = new b2FixtureDef;
    bounceDef.density = 1;
    bounceDef.body = bouncebodyDef;
    bounceDef.friction = 1;
    bounceDef.restitution = 0;
    bounceDef.userData = 'bounce';

bounceDef.shape = new b2PolygonShape;
bounceDef.shape.SetAsBox(1.5, 0.1);
bouncebodyDef.position.Set(2, 12);
bouncebodyDef.angle = (3.4);
world.CreateBody(bouncebodyDef).CreateFixture(bounceDef);

console.log(bounceDef.GetBody()); 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:49:30.900

`b2FixtureDef`没有 getBody()，所以这就是错误的含义。[b2FixtureDef](http://www.box2dflash.org/docs/2.1a/reference/)的文档链接在那里。看起来 Fixture 类型甚至没有可以设置的主体，就像在行中一样`bounceDef.body = bouncebodyDef;`

# google-analytics - Core Reporting API 唯一访问者

> ID：14739349
> 
> 赞同：0
> 
> 时间：2013-02-06T21:41:57.823
> 
> 标签：google-analytics, google-api

我对从 Core Reporting API 返回的数据有疑问。我使用[http://ga-dev-tools.appspot.com/explorer/](http://ga-dev-tools.appspot.com/explorer/)工具来获取数据。Metric = ga:visitors 当我尝试获取期间的数据 - “2013-01-30” - “2013-02-06”时，我得到了 ga:visitors 的“2306”。之后，我尝试获取“2013-01-31”-“2013-02-06”期间的数据-我得到了 ga:visitors 的“2368”。更小的周期但更大的价值？？同样在我添加 ga:date 维度并自己汇总所有“2013-01-30”-“2013-02-06”结果后，我总共得到了“3024”……有人遇到同样的问题吗？

谢谢，任何回复...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:58:46.117

您不能传递任何基于时间的维度（ga:date、ga:day、ga:week 等），也不能自己添加行总计。这是因为每日或每周唯一身份访问者的总和与从开始日期和结束日期开始到结束的唯一身份访问者数量不同。

此外，请省略该细分，除非您需要特殊的细分（例如移动访问或搜索访问）。也就是说，传递 segment=gaid::-1 会导致值在 UI 中不可见。

传递开始日期、结束日期和指标 ga:visitors，您应该会得到您在 UI 中看到的内容。

# jstl - 当未指定默认命名空间时，该函数必须与前缀一起使用

> ID：14739350
> 
> 赞同：7
> 
> 时间：2013-02-06T21:42:05.263
> 
> 标签：jstl

以下是我在正文中编写的代码

```
 <% List<UserInfo> userInfoList = new ArrayList<UserInfo>();
    UserInfo userInfo = new UserInfo();
    userInfoList = new CRUDOps().retrieveUserDataList();
    pageContext.setAttribute("userInfoList", userInfoList);%> 
```

下面是我在 div 中写的代码

```
 <c:forEach var="userInfo" items="${userInfoList}">
    <input type="radio" name="buyer"  value="hhhh">${userInfo.get(0).getFirstName()}/><br /> 
    <c:forEach> 
```

上面的代码，必须显示 UserInfo 表中的名字和姓氏... UserInfoList 包含 UserInfo 对象，并且 UserInfo 有名字和姓氏。因此，使用索引值为“0”的 userInfoList 调用 POJO 中定义的 getFirstName。

我得到的错误是

> org.apache.jasper.JasperException: /requestorGroup.jsp(63,59) 当未指定默认命名空间时，函数 get 必须使用前缀

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T21:45:53.633

如果`UserInfo`有一个名字和一个姓氏，并且`userInfo`是 type `UserInfo`，那么调用`get(0)`它是没有意义的：它不是一个列表，它没有任何第一个元素。它有名字和姓氏。

你只需要

```
<c:forEach var="userInfo" items="${userInfoList}">
    <input type="radio" name="buyer"  value="hhhh">${userInfo.firstName}/><br /> 
<c:forEach> 
```

JSP 表达式语言 ( *EL* ) 通过 getter 访问属性。所以你不应该使用getter，而只是使用属性的名称：`firstName`。

您还应该避免在 JSP 中使用 scriptlet，而是将从数据库获取数据的代码放入 servlet。此外，四行中的两行是完全没有必要的。代码应简化为：

```
List<UserInfo> userInfoList = new CRUDOps().retrieveUserDataList();
pageContext.setAttribute("userInfoList", userInfoList); 
```

# c# - 什么构成 Web 应用程序实例/会话？

> ID：14739357
> 
> 赞同：1
> 
> 时间：2013-02-06T21:42:38.663
> 
> 标签：c#, asp.net

有一点我不清楚。

假设我有 SomeModule.dll

它有一个名为 UserSession 的静态类。

例如，我可以在此处安全地存储用户特定信息吗：例如：

```
UserSession.Name = "xxx" 
```

我知道我可以使用 HTTPConext.Session .... 但我想知道会话的范围/主要是，如果用户有一个长时间的会话。假设用户登录并且我在 Session(user) 中存储了一些东西......

如果他在 3 周内回来，我读了他的 cookie 并且它仍然有效，那么页面应该看起来和感觉就像他从未离开过。HTTPContext 或任何会话变量何时被删除并且必须重新查询和重置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:47:07.327

用户会话从上次请求开始只持续一定时间，我相信 20 分钟是默认值。之后，它可能会持续几分钟，具体取决于垃圾收集器何时执行其操作。它不会持续三周。您可以将必要的值存储在 cookie 中，或者更好的 cookie 中引用数据库记录。然而，所有这些都忽略了安全问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:53:11.463

无论持续时间长短，会话变量都不一定是好方法。当您将应用程序部署到网络场时，它们会增加显着的复杂性。如果它是非敏感数据，则使用 cookie 是可行的方法。如果是大量数据的敏感数据，您可以考虑创建某种用户身份验证和/或加密 cookie 数据。

# vim - 在 Vim 中合并多个文本文件

> ID：14739363
> 
> 赞同：3
> 
> 时间：2013-02-06T21:42:57.107
> 
> 标签：vim

我有一个相当简单的问题，我找不到答案，而且似乎无法为我工作。

我需要在 Vim 中附加多个文本文件（都在同一个目录中）。我需要在 Vim 中执行此操作的原因是我正在运行 windows 并且无法访问 *nix 实用程序。

所有文件的名称中都有一个模式 ( `ex1.sql`, `ex2.sql`, `ex3.sql`)。

我需要做的就是从它们中提取文本（按照它们在目录中的顺序），然​​后将它们附加到一个新的空白文件中。

我已经制作了参数列表

```
:args ex*.sql 
```

并希望对所有 args 执行命令到`a`寄存器中。

```
:argdo gg"AyG 
```

它说这些行是从每个文件中复制的。

但是，当我将寄存器粘贴到新文件中时，什么也没有打印。

```
:"ap 
```

所以我检查了寄存器：

```
:reg 
```

`a`寄存器充满了胡言乱语（）`^]Jyecw?`。

有没有更好的方法来解决这个问题？为什么说是复制到寄存器里，其实是在输入一堆奇怪的字符呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T22:43:24.067

`argdo`在参数列表的每个文件中执行一个`ex-mode`命令。你想要做的`gg"AyG`是执行一个`normal`命令。尝试：

```
:argdo normal gg"AyG 
```

# jquery - 试图使这个 div 居中，我做错了什么？（有点偏）

> ID：14739371
> 
> 赞同：0
> 
> 时间：2013-02-06T21:43:22.393
> 
> 标签：jquery

我正在尝试将 div 水平居中到一个标记，如您在此处看到的[http://jsfiddle.net/rKejG/8/](http://jsfiddle.net/rKejG/8/)，但是它比它应该的更靠右一点。

这是我的代码

```
$("#infobox").css({
    marginLeft: (parseInt($("#content").width(), 10) / 2) - (parseInt($("#infobox").width(), 10) / 2) + 'px'
}); 
```

然后我意识到我可能应该添加 和 的一半`content`并将`infobox`它们放在负边距中，但这使它变得更糟：

```
$("#infobox").css({
    marginLeft: '-' + (parseInt($("#content").width(), 10) / 2) + (parseInt($("#infobox").width(), 10) / 2) + 'px'
}); 
```

`Result: margin-left: -16110.5px`

我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:07:53.643

我清理了 html 并将`marker`类设置为`position: relative`. 这似乎已经解决了你的问题。我还去掉了额外的填充，并删除了标记类中的额外边距。我想我在css中做了一些其他的改变，你必须比较原始的。有很多东西要清理。

[小提琴](http://jsfiddle.net/bfelda/rKejG/17/)

更新：现在我回去了，相对于绝对定位元素的父级的位置是很好的做法，但不是必需的，也不是解决此问题的原因。信息框类中的额外填充和内容类中的静态边距以及未嵌套的 html 解决了该问题。

[更新][更新]

根据您所拥有的，我认为您需要一个带有 css 的包装器，`width:100%; padding-top:45%; position:relative`然后设置您的子 div，`margin: 0 auto`如本小提琴[http://jsfiddle.net/bfelda/rKejG/22/](http://jsfiddle.net/bfelda/rKejG/22/)所示 您可以将容器的顶部填充设置为当然是你想要的。但是我可能错过了重点。无论标记位于何处，您都希望文本居中在标记上方吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:08:29.303

试试这个，我稍微改变了你的脚本，但它产生了正确的结果。

[http://jsfiddle.net/rKejG/15/](http://jsfiddle.net/rKejG/15/)

JS代码：

```
 //for vertical center position
   var top = +$("#content").offset().top + +$("#content").height();
   $("#infobox").css("top", top);

   //for horizontal center position
   var left = +$("#content").offset().left - +$("#infobox").width()/2;
   $("#infobox").css("left", left); 
```

HTML：

```
 <div id="content" class="marker"></div>
  <div id="infobox" class="infobox">BEER PALACE Restaurant & Pub</div> 
```

我不明白你为什么要使用边距来对齐你的“信息框”div，所以我只使用了绝对定位。无论“内容” div 位于页面上的哪个位置，这都应该有效。

我也无法弄清楚为什么您将“信息框” div 附加到“内容” div 中，如果这应该在事件之后显示“信息框”（我根据您的命名做出的假设），您可能不希望它是一个孩子，而是一个兄弟姐妹。当然让我知道如果这个假设是错误的，我可以随时修改小提琴。

# php - 通过电子邮件发送带有文件的 PHP 表单

> ID：14739374
> 
> 赞同：0
> 
> 时间：2013-02-06T21:43:35.457
> 
> 标签：php, html, forms, email

我有一个小的 php 表单，我希望能够在其中上传文档，然后将其发送到我的电子邮件。我已经翻遍了，我找不到任何对我有帮助的东西。下面是我必须从表单中检索信息并通过电子邮件发送的代码，但我不知道如何包含该文件并将其作为附件发送。任何帮助将不胜感激。

```
<body>
<?php
  $name=addslashes($_POST['name']);
  $Email=addslashes($_POST['email']);
  $number=addslashes($_POST['number']);

  $toemail = "email@email.com";
  $subject = "Submission website";

  $headers = "MIME-Version: 1.0\n"
            ."From: \"".$name."\" <".$Email.">\n"
            ."Content-type: text/html; charset=iso-8859-1\n";

  $body = "Name: ".$name."<br>\n"
            ."Email: ".$Email."<br>\n"
            ."Phone: ".$number."<br>\n"
            ."Message: ".$message."<br>\n";

    mail($toemail, $subject, $body, $headers);

?>
</body>
</html> 
```

# c# - 如果在 sql server 中回滚事务，它会删除临时表（在事务中创建）吗？

> ID：14739380
> 
> 赞同：1
> 
> 时间：2013-02-06T21:43:55.623
> 
> 标签：c#, .net, sql, sql-server, sql-server-2008

在事务中，我创建了一些临时表并插入了一些数据。如果一切顺利，临时表将被删除，然后事务将被提交。如果有异常，连接将关闭。

我的问题是：我必须在关闭连接之前回滚事务吗？或者，只要连接关闭就可以了？

如果我回滚，我假设在事务中创建的临时表也将被删除（回滚），对吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:52:52.920

临时表超出范围时将被删除。

但是，在打开事务时失去连接会创建一个孤立的事务，并且它持有的任何锁都将保留。

一旦遇到运行时错误，使用 SET XACT_ABORT 应该回滚任何事务。

[http://msdn.microsoft.com/en-us/library/ms188792.aspx](http://msdn.microsoft.com/en-us/library/ms188792.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:50:03.417

临时表一旦超出范围就会立即删除。无论它是否回滚，关闭连接都会使其超出范围。

# c++ - C++ 中的隐式转换

> ID：14739381
> 
> 赞同：5
> 
> 时间：2013-02-06T21:43:56.357
> 
> 标签：c++, casting, implicit-conversion, conditional-operator

在 C++ 中，我试图将隐式转换与条件运算符一起使用。考虑这个例子：

```
class MyFloat
{ 
    public:                                                                    
        MyFloat(float val){m_val = val;}
        operator float(){return m_val;}
    protected:
        float m_val;
};

int main(int argc, char **argv)
{
    MyFloat a = 0.5f;
    MyFloat b = 1.0f;                            
    float x = true ? a-0.5f : b;
    return 0;
} 
```

它会导致编译器错误：

```
error: operands to ?: have different types ‘MyFloat’ and ‘float’ 
```

我希望条件运算符隐式转换`b`为`a-0.5`浮点类型。但这不会发生。我如何实现这种隐式转换？

理想情况下，我想避免静态强制转换或访问器方法，如`float MyFloat::getValue()`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T21:47:31.550

问题是有两个转换。编译器可以转换`a-0.5`为`MyFloat`，也可以转换`b`为`float`. 只要您有两种转换并且两者都没有被标记`explicit`，您就会一直得到这种模棱两可的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:55:29.073

只为您完成了一些转换。来自[http://msdn.microsoft.com/en-us/library/e4213hs1(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/e4213hs1(v=vs.71).aspx)

第一个操作数必须是整数或指针类型。以下规则适用于第二个和第三个表达式：

*   如果两个表达式属于同一类型，则结果属于该类型。
*   如果两个表达式都是算术或枚举类型，则执行通常的算术转换（在算术转换中介绍）以将它们转换为通用类型。
*   如果两个表达式都是指针类型，或者一个是指针类型而另一个是计算结果为 0 的常量表达式，则执行指针转换以将它们转换为通用类型。
*   如果两个表达式都是引用类型，则执行引用转换以将它们转换为公共类型。
*   如果两个表达式都是 void 类型，则公共类型是 void 类型。
*   如果两个表达式都属于给定的类类型，则通用类型是该类类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:53:36.247

如果我没记错的话，三元运算符不会进行任何隐式转换。你需要写

```
static_cast<MyFloat>(a-0.5) 
```

或者

```
static_cast<float>(b). 
```

回到家后，我将深入研究 C++ 标准文档以了解更多详细信息。

# c++ - 为什么我不能初始化 WNDCLASSEX wc？

> ID：14739385
> 
> 赞同：0
> 
> 时间：2013-02-06T21:44:07.340
> 
> 标签：c++, initialization, directx-9

`WNDCLASSEX wc`我在头文件中声明该属性，如下所示：

```
private:
    HWND hWnd;
    LPDIRECT3D9 g_pD3D; // Used to create the D3DDevice
    LPDIRECT3DDEVICE9 g_pd3dDevice; // Our rendering device
    WNDCLASSEX wc; 
```

我想在我的 Init() 函数中初始化它，如下所示：

```
void RAT_RendererDX9::Init(RAT_WindowManager* argWMan)
{
    wMan = argWMan;

    // Register the window class
    wc  =
    {
        sizeof( WNDCLASSEX ), CS_CLASSDC, MsgProc, 0, 0,
        GetModuleHandle( NULL ), NULL, NULL, NULL, NULL,
        "D3D Tutorial", NULL
    };
    RegisterClassEx( &wc );

       hWnd = CreateWindow( "", "abc", WS_OVERLAPPEDWINDOW, 10, 10, 20, 20,
                     NULL, NULL, wc.hInstance, NULL );

        g_pD3D = (LPDIRECT3D9)Direct3DCreate9( D3D_SDK_VERSION );

        D3DPRESENT_PARAMETERS d3dpp;
        ZeroMemory( &d3dpp, sizeof( d3dpp ) );
        d3dpp.Windowed = TRUE;
        d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;
        d3dpp.BackBufferFormat = D3DFMT_UNKNOWN;

    g_pD3D->CreateDevice( D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hWnd,
                              D3DCREATE_SOFTWARE_VERTEXPROCESSING,
                              &d3dpp, &g_pd3dDevice );
} 
```

但是，由于它，我收到以下错误：

> 1>e:\rat_engine\rat_engine\rat_engine\rat_rendererdx9.cpp(18): 错误 C2059: 语法错误: '{'
> 
> 1>e:\rat_engine\rat_engine\rat_engine\rat_rendererdx9.cpp(18)：错误 C2143：语法错误：缺少 ';' 前 '{'
> 
> 1>e:\rat_engine\rat_engine\rat_engine\rat_rendererdx9.cpp(19): 错误 C3867: 'RAT_ENGINE::RAT_RendererDX9::MsgProc': 函数调用缺少参数列表；使用 '&RAT_ENGINE::RAT_RendererDX9::MsgProc' 创建指向成员的指针
> 
> 1>e:\rat_engine\rat_engine\rat_engine\rat_rendererdx9.cpp(22): 错误 C2143: 语法错误: 缺少';' 前 '}'

但是我实际上从教程中复制了该初始化，唯一的例外是 wc 在 WinMain() 函数中初始化，而不是在 Init() 函数中初始化。

为什么它不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:48:27.433

该语法适用于*复制初始化*聚合，但您的实际上是一个*assignment*。`wc`当您执行类的构造函数时，该对象将默认构造`RAT_RendererDX9`。

您的函数中的分配`Init`实际上等同于：

```
wc.operator = (...); 
```

如果您想使用该语法，您可以尝试将您的分配更改为以下内容：

```
WNDCLASSEX wndClass =
{
    sizeof( WNDCLASSEX ), CS_CLASSDC, MsgProc, 0, 0,
    GetModuleHandle( NULL ), NULL, NULL, NULL, NULL,
    "D3D Tutorial", NULL
};

wc = wndClass; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-04T01:11:34.053

```
WNDCLASSEX wndClass = { NULL }; 
```

# android - 如何在 android 模拟器中模拟真实的移动互联网连接

> ID：14739386
> 
> 赞同：1
> 
> 时间：2013-02-06T21:44:13.677
> 
> 标签：android, connection, emulation

我想知道是否有某种方法可以让模拟器在访问互联网时表现得像真实设备一样。在任何需要互联网访问的操作之前，我通常会像这样检查连接

```
public boolean internet(){
            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnectedOrConnecting()) {
                return true;
            }
            return false;
    } 
```

但是在真实设备上并且当移动接收很差时，互联网连接实际上不可用，认为 internet() 返回 true。这不仅仅是延迟问题或低速问题，它根本没有发送请求（或者永远不会得到响应，我不知道）。目前我在打电话时遇到这个问题

```
HttpGet request = new HttpGet(new URI(url));
HttpResponse response = httpclient.execute(request); 
```

并且不知道如何在真实设备上调试它。我很确定这是移动互联网连接的问题，因为当通过 wi-fi 连接同一设备时我没有问题。我认为设置 httpclient 套接字和连接超时可以解决问题，但我仍然遇到崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:47:35.970

您可以在启动模拟器时使用一些参数来模拟它。它们都记录在这里： [Android Emulator](http://developer.android.com/tools/help/emulator.html)。

在这种情况下，您想要的参数是：

`-netdelay <delay`

`-netspeed <speed>`

它们设置您的模拟器使用的连接的延迟和速度。

对于任何其他问题，您可能需要发布您的 logcat 日志，它可能是连接的，并且在请求的中间，连接断开并且设备断开连接。

# jquery - kendo 数据源服务器分页和 json 中的总计

> ID：14739394
> 
> 赞同：1
> 
> 时间：2013-02-06T21:44:32.100
> 
> 标签：jquery, kendo-ui, kendo-grid

对于我的 Kendo 数据源，生成的 json 有一列“TotalRecords”，我如何将这个总数设置为 Kendo 数据源总数，以便我的服务器分页可以工作。我的代码如下：

```
 var iDataSource = new kendo.data.DataSource({
            transport: {
                read:
                    {
                        url: service_URL + "GetUnconfirmedppointments",
                        datatype: "json",
                        type: "GET"
                    },
                parameterMap: function (options) {
                    return {
                        appointmentNos: Appointment_Number.value,
                        loadNumbers: Load_Number.value,
                        purchaseOrders: Purchase_Orders.value,
                        dateFrom: Date_From.value,
                        dateTo: Date_To.value,
                        warehouse: warehouses.value,
                        carrierId: cr_carrier_id,
                        sortColum: getOrderBy(options.sort),
                        sortDirection: getOrderDir(options.sort),
                        pageSize: options.pageSize,
                        pageNumber: options.page
                    };
                }
            },
            schema: {
                model: {
                    fields: {
                        APP_APPOINTMENT_ID: { type: "number" },
                        APPOINTMENT_DATE: { type: "date" },
                        LO_LOAD_NUMBER: { type: "number" }
                    }
                }
            },
            pageSize: 5,
            total: function (response) {
               return response[0].TotalRecords;
            },
            serverPaging: true,
            serverFiltering: true,
            serverSorting: true
        }); 
```

当前实现不起作用，即使我提供了硬编码的总记录数，当此数据源绑定到网格时，总计数仅显示 json 中返回的记录数，即 pagesize。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T22:22:01.950

我假设您的总数在每条记录上？如果不是，你可以这样做...

```
schema: {
  total: "TotalRecords"
} 
```

理想情况下，您的 JSON 应该是这样的结构......

```
{ data:[...], total: 100 } 
```

但是，如果您不能像这样从服务器发送模式，则可以解析模式。如果总计数附加到每条记录，您可以添加一个字段来保存它并在解析中填充它。

```
schema: {
  parse: function(data) {
      // assign top level array to property
      data.data = data;
      // assign the count off one of the fields to a new total field
      data.total = data.data[0].TotalRecords;

      return data;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:56:32.127

As my response has total records fields with each record therefore I just moved the below into schema and it fixed it.

```
total: function (response) { return response[0].TotalRecords; } 
```

# java - 在 Jetty 实例之间共享 Memcached

> ID：14739399
> 
> 赞同：2
> 
> 时间：2013-02-06T21:44:39.930
> 
> 标签：java, google-app-engine, memcached, jetty, guice

我正在针对在本地 Jetty 实例上运行的 Google App Engine 项目编写集成测试。

在运行测试之前，我在`http://localhost:8083`. 启动时，Web 服务会创建一个 memcached 实例，它将向其中写入数据。我们使用的是 Google Guice，所以这是通过如下所示的绑定完成的：

```
bind(AsyncMemcacheService.class).toInstance(MemcacheServiceFactory.getAsyncMemcacheService());
bind(MemcacheService.class).toInstance(MemcacheServiceFactory.getMemcacheService()); 
```

Web 服务启动并运行后，我将开始集成测试。至关重要的是，它们是在一个单独的 Jetty 实例上启动的，该实例创建了自己的 memcached 绑定。

我编写了一个如下所示的集成测试：

```
@Test(groups = "integration")
private void doSomeTest() {
    //set up some precondition for the test
    String id = "myIntegerObject";
    this.memcached.putSomeObject(id, 0);

    try {
        //call an endpoint that relies on the previously set value
        String url = "http://localhost:8083/api/increment/" + id;
        this.http.post(url);
    } catch (Exception e) {
        e.printStackTrace();
        Assert.fail("Test failed. See inner exception for details.", e);
    }

    //verify that hitting the url had the desired effect
    Assert.assertEquals(this.memcached.getSomeObject(id), 1);
} 
```

这个测试总是`Assert.assertEquals(...);`在线失败，因为我的 web 服务和我的集成测试正在写入不同的 memcached 实例。

有没有办法设置我的 Web 服务、单元测试和集成测试都共享的系统范围的 memcached 实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:35:30.913

[远程 API](https://developers.google.com/appengine/docs/java/tools/remoteapi)在这里对你有用吗？虽然它旨在允许您连接到生产`appspot.com`应用程序，但您也可以使用它连接到本地 dev_appserver：

```
new RemoteApiOptions().server("localhost", 8083).credentials("test@example.com", ""); 
```

您进行的任何 API 调用都将使用远程 API 来访问其他实例。请注意，远程 API 不限于文档建议的数据存储 API。Memcache 以同样的方式工作。

我创建了一个[示例 Eclipse 项目](https://code.google.com/p/sauer/source/checkout?repo=java-remote-api)，它既是一个“hello world”App Engine 应用程序，您可以在本地部署或运行​​它，又是一个`TestClient.java`使用远程 API 执行远程 memcache`get()`和`put()`调用的 trivial 应用程序：

```
$ java client.TestClient localhost 8083 test@example.com pass foo bar

new RemoteApiOptions()
.server("localhost", 8083)
.credentials("test@example.com", "pass")
mc.get("foo") -> null
mc.put("foo", "bar")
mc.get("foo") -> bar 
```

# string - 创建和编辑二维可变字符串数组

> ID：14739400
> 
> 赞同：0
> 
> 时间：2013-02-06T21:44:43.113
> 
> 标签：string, cocoa, nsmutablestring

在我的 iOS 应用程序中，我想最初用每个包含 13 个空格的字符串填充一个数组。然后在以随机顺序对数组的每一行进行处理期间，我希望逐个字符地用字符串“NESW”中的单个字符替换每个空格，具体取决于过程的进行方式。

这是初始化数组的正确方法吗？下一个代码行是否是我如何将位置 [0][3] 中的字符串中的第二个空格替换为“N”的示例？

```
[deals[0][3] replaceCharactersInRange:NSMakeRange(1, 1) withString:@"N"];

NSString* spaces = @"             ";  // 13 spaces
+(NSMutableString* [2][4])deals{
    return (NSMutableString* [2][4]){
        {spaces,spaces,spaces,spaces},
    {spaces,spaces,spaces,spaces}

};
} 
```

# postgresql - PostgreSQL group by date_trunc 聚合索引和大于不使用索引

> ID：14739402
> 
> 赞同：3
> 
> 时间：2013-02-06T21:44:51.740
> 
> 标签：postgresql, heroku, group-by, indexing, postgresql-9.2

我有一个包含几百万行的表。我在这张表上有一个表达式索引（我创建了两个方向以查看它是否有效果。

```
CREATE INDEX ON statuses (date_trunc('hour', created_at) ASC)
CREATE INDEX ON statuses (date_trunc('hour', created_at) DESC) 
```

我正在尝试进行查询，使用 group by 收集每小时的状态计数，但仅针对今天（或过去 7 天）创建的状态。但是，尝试在某个日期之前删除所有条目不会使用索引，而是过滤所有行。但是，如果我删除大于并使用等于，则使用索引。我把输出放在`EXPLAIN`下面。希望有人可以帮助我使此查询使用索引或至少提高性能，使其以毫秒而不是秒为单位。

使用 equals 正确使用索引：

```
=> EXPLAIN ANALYSE SELECT date_trunc('hour', created_at) as hour, COUNT(*) FROM statuses GROUP BY hour HAVING date_trunc('hour', created_at) = '2013-02-06 00:00:00';
                                                                       QUERY PLAN                                                                        
---------------------------------------------------------------------------------------------------------------------------------------------------------
 GroupAggregate  (cost=132.48..29443.34 rows=1653 width=8) (actual time=4.362..4.363 rows=1 loops=1)
   ->  Bitmap Heap Scan on statuses  (cost=132.48..29419.22 rows=18337 width=8) (actual time=0.209..2.159 rows=1319 loops=1)
         Recheck Cond: (date_trunc('hour'::text, created_at) = '2013-02-06 00:00:00'::timestamp without time zone)
         ->  Bitmap Index Scan on statuses_date_trunc_idx1  (cost=0.00..131.57 rows=18337 width=0) (actual time=0.178..0.178 rows=1319 loops=1)
               Index Cond: (date_trunc('hour'::text, created_at) = '2013-02-06 00:00:00'::timestamp without time zone)
 Total runtime: 4.416 ms
(6 rows) 
```

但是，一旦我使用大于（或小于），这将导致查询对没有索引的表进行过滤。

```
=> EXPLAIN ANALYSE SELECT date_trunc('hour', created_at) as hour, COUNT(*) FROM statuses GROUP BY hour HAVING date_trunc('hour', created_at) > '2013-02-06 00:00:00';
                                                              QUERY PLAN                                                              
--------------------------------------------------------------------------------------------------------------------------------------
 HashAggregate  (cost=185386.54..185772.10 rows=110160 width=8) (actual time=2915.495..2915.774 rows=21 loops=1)
   ->  Seq Scan on statuses  (cost=0.00..184164.06 rows=1222485 width=8) (actual time=1676.827..2869.748 rows=47070 loops=1)
         Filter: (date_trunc('hour'::text, created_at) > '2013-02-06 00:00:00'::timestamp without time zone)
         Rows Removed by Filter: 3620426
 Total runtime: 2916.049 ms
(5 rows) 
```

在这种情况下，我可以通过在我想选择的区域内每小时使用`IN`和列出来解决这个问题，但我真的很想弄清楚为什么索引没有用于大于查询？

```
=> EXPLAIN ANALYSE SELECT date_trunc('hour', created_at) as hour, COUNT(*) FROM statuses GROUP BY hour HAVING date_trunc('hour', created_at) IN ('2013-02-06 00:00:00', '2013-02-06 01:00:00');
                                                                       QUERY PLAN                                                                        
---------------------------------------------------------------------------------------------------------------------------------------------------------
 HashAggregate  (cost=51988.38..51999.94 rows=3305 width=8) (actual time=7.218..7.223 rows=2 loops=1)
   ->  Bitmap Heap Scan on statuses  (cost=262.96..51951.70 rows=36675 width=8) (actual time=0.376..4.576 rows=2507 loops=1)
         Recheck Cond: (date_trunc('hour'::text, created_at) = ANY ('{"2013-02-06 00:00:00","2013-02-06 01:00:00"}'::timestamp without time zone[]))
         ->  Bitmap Index Scan on statuses_date_trunc_idx1  (cost=0.00..261.13 rows=36675 width=0) (actual time=0.341..0.341 rows=2507 loops=1)
               Index Cond: (date_trunc('hour'::text, created_at) = ANY ('{"2013-02-06 00:00:00","2013-02-06 01:00:00"}'::timestamp without time zone[]))
 Total runtime: 7.305 ms
(6 rows) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:54:56.820

`statuses`该表的估计值是“坏”查询返回的实际行数的[26 倍。](http://explain.depesz.com/s/lMV)

1.  尝试运行`VACUUM ANALYZE statuses;`
2.  如果运气不好，增加该`statuses.created_at`列的统计目标`ALTER TABLE statuses ALTER created_at SET STATISTICS 500;`并再次分析。

这应该会有所帮助。

* * *

**编辑：**您需要检查您的`autovacuum`设置。

阅读[这](http://www.postgresql.org/docs/current/interactive/runtime-config-autovacuum.html)部分手册并检查您的配置，如下所示：

```
SELECT name,setting,source FROM pg_settings WHERE name ~ 'autovacuum'; 
```

如果您的表格太大，您可以调整`autovacuum_analyze_threshold`和/或`autovacuum_analyze_scale_factor`使用[`ALTER TABLE tab SET (storage_parameter = ...)`](http://www.postgresql.org/docs/current/interactive/sql-createtable.html#SQL-CREATETABLE-STORAGE-PARAMETERS)语法。

# java - 在 Java 中传递多维 POST 数据

> ID：14739403
> 
> 赞同：2
> 
> 时间：2013-02-06T21:44:56.333
> 
> 标签：java, php

在 HTML 中，可以传递多维键，例如

```
<input type="text" name="user_profile[name]" />
<input type="type" name="user_profile[id]" /> 
```

在我的 PHP 脚本中，我可以通过`$_POST['user_profile']`

可以用 Java 传递这些多维键值对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T10:20:23.597

您可以使用字符串操作技术。

**从：** `<input type="text" name="user_profile[name]">`

**至：** `<input type="text" name="user_profile_name">`

然后在 JS/jQuery 中执行：

```
$('user_profile_name')... 
```

或者：

如果“id”元素对您来说意义不大，那么请执行以下操作：

```
<input type="text" name="user_profile[name]" id="user_profile_name"> 
```

# c++ - 两个 C++ 程序之间的区别

> ID：14739407
> 
> 赞同：-2
> 
> 时间：2013-02-06T21:45:04.077
> 
> 标签：c++, debugging, gdb, valgrind, kcachegrind

我有一个具有两个版本的 C++ 程序，一个版本的功能正在运行，而另一个版本则没有。有没有办法调试这两个版本之间的差异？具体来说，我使用的是 Linux 和 g++。有没有办法使用[KCachegrind](http://kcachegrind.sourceforge.net/html/Home.html)之类的东西来查看差异调用图？或者 gdb 中有什么东西可以更快地查看这些函数调用的差异吗？

更新中...该程序太大，无法查看所有差异。首先，我想知道函数调用差异之间的路径，然后我将可以选择仅在此函数中执行 diff 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:52:13.963

我推荐的是编写最简单的工作测试输入，它会导致新版本失败但旧版本成功。一旦你有了这个测试用例，从你的源存储库中的不同中间提交构建中间版本（我建议做一个二进制搜索来限制重新编译的数量，`git bisect`如果你碰巧使用，这是一个很好的工具`git`）。

一旦隔离了有问题的提交，请仔细查看它，或者在必要时使用调试器通过测试输入来跟踪代码。希望您最终应该得到一个相对较小的更改来验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:01:35.993

使用 gdb 最接近的方法是使用多进程调试 [1] 和一些自定义 gdb 和 python 脚本，至少有一个这样的例子以这种方式使用 gdb [2]

我认为它不太可能按您的意愿工作。虽然如果你决定以这种方式使用 gdb，它可能会给你一些想法。

[1] [http://sourceware.org/gdb/current/onlinedocs/gdb/Inferiors-and-Programs.html#Inferiors-and-Programs](http://sourceware.org/gdb/current/onlinedocs/gdb/Inferiors-and-Programs.html#Inferiors-and-Programs)

[2] [http://gitorious.org/misc-gdb-stuff/misc-gdb-stuff/trees/master/misc_gdb/lockstep](http://gitorious.org/misc-gdb-stuff/misc-gdb-stuff/trees/master/misc_gdb/lockstep)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T01:30:37.610

你考虑过使用 gprof 吗？一旦你安装了它（我相信大多数专业发行版默认都有它）用'-pg'选项编译你的代码。当您运行可执行文件时，它将生成一个 gmon.out 文件，其中包含分析信息，包括调用图。

查看[本教程](http://www.thegeekstuff.com/2012/08/gprof-tutorial)以更好地了解其工作原理。

# nhibernate - 使用 nhibernate 获取最后一个值？

> ID：14739411
> 
> 赞同：1
> 
> 时间：2013-02-06T21:45:09.150
> 
> 标签：nhibernate

对于我对项目所做的每个修订，我都有一个 int 列。我想获取该项目的最后一个修订号并将其加一并将其保存到我正在制作的这个新修订版中。

我有点担心我会遇到一个问题，即同一项目同时被修订，突然之间我得到了两个相同编号的修订。

例子

```
Item1  Revision 1
Item1  Revision 2
Item2  Revision 1
Item2  Revision 2
Item3  Revision 1 
```

以上可能已经在我的数据库中。现在我想向 Item1 添加另一个修订。它应该是修订版“3”。

我想发现第 1 项的最后一个修订版是“2”，然后用它来确定山雀应该是修订版“3”。

尽管我担心多个人会开始修订第 1 项并大约在同一时间提交，并且我会为所有 3 人修订第 1 项的所有 3 人重新获得修订 2，我最终会得到

```
Item1 Revision 1
Item1 Revision 2
Item1 Revision 3
Item1 Revision 3 (should be 4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:22:26.940

编辑：1）如果更新同一行

NHibernate 有一个特性：`Version`or`Timestamp`属性和围绕它的强大管理。尝试在这里阅读：[何时使用 Nhibernate ？](https://stackoverflow.com/a/7575759/1679310)更多细节。提炼

> ...实体实例有一个版本，可以是数字或时间戳。Hibernate 在对象被修改时增加它的版本，自动比较版本，如果检测到冲突则抛出异常。因此，您将此版本属性添加到所有持久实体类以启用乐观锁定。...版本号只是一个计数器值——它没有任何有用的语义值。

NHibernate 文档：

*   [5.1.7。版本（可选）](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-version)
*   [5.1.8。时间戳（可选）](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-timestamp)

因此，当您使用*版本*时，您将获得：

*   NHibernate 将增加*版本*值。
*   如果有人试图用旧的*版本*值更新行，陈旧的... StaleException 将被抛出。
*   您可以附加处理程序来解决此问题，这取决于您的代码。

然后，您可以使用更多标准功能（例如拦截器）并审核所有更新到不同表中的更改......使用当前版本号。

总结：NHibernate 中的版本控制系统并不能解决所有问题。您将获得 StaleExceptions... 并且必须处理它们。但是，您可以确定，当时只有一个版本以相同的版本号存储

编辑：2）跟踪新的变化作为新行

请根据我们的方法将此作为建议。这就是我们作为审计跟踪系统实施变更的方式

业务对象（例如 IAuditable）定义为：

```
public class Article : IAuditable
{
  public virtual int ID { get; set; }
  public virtual string Text { get; set; }
  ...
  // if possible to move it to base for more Business Objects
  // public virtual IList<IHistory> History { get; set; }

  public virtual IList<ArticleHistory> History { get; set; }
} 
```

每当有更新时，都会更新 Article 自身，并创建新的 ArticleHistory 实例。使用 HiLo 生成器作为其 ID，即使在网络农场中也能正确插入。

这种方法允许使用最新的文章实例，提高性能（历史在单独的表中）并支持 AOP（通过注入 AuditAOPFilter 打开/关闭历史跟踪。仅在细节上我们加载历史集合。

这是一个建议。我可以理解这不适合您的场景（并且不回答问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:50:26.280

在主键和修订号的组合上创建唯一键。这至少可以防止数据库中的重复。

剩下的问题是，如果您希望这种并行编辑经常发生 - 如果是这样，您可能希望添加一些机制来更早地检测它以节省用户时间。一种方法是对原始行使用悲观锁定。

# facebook - Like Box 适用于登录 FB 的用户 - 但并非如此

> ID：14739414
> 
> 赞同：0
> 
> 时间：2013-02-06T21:45:14.033
> 
> 标签：facebook

我有一个奇怪的问题，我无法让我的 FB Like 框显示在 Chrome、Chrome Incognito / Firefox / Opera 中，它根本不呈现。如果我先登录 Facebook，它会显示得很好。

内部`<head>`：

```
 <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=409074972499544";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script> 
```

打开标签后`<body>`

```
 <div id="fb-root"></div> 
```

位于我希望将框呈现在的位置：

`<div style="padding-bottom: 10px;"><fb:like-box href="https://www.facebook.com/LeagueOfLegendsFinland" width="250" show_faces="false" colorscheme="dark" stream="false" header="false"></fb:like-box></div>`

我的脸书应用程序：![http://dl.dropbox.com/u/2188345/fb.jpg](../Images/a6e1780de92d30cf75c50d8386d68e67.png)

那么那里有经验丰富的开发人员可以指出我的错误吗？:) 我已经尝试过 HTML5/Iframe 版本，但还是一样。还尝试在正文关闭之前移动代码。

哦，如果有人想直接去检查页面： http: [//leagueoflegends.fi](http://leagueoflegends.fi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T16:51:22.143

如果有任何限制，请检查您的页面数据。这是由于我们做出的限制而发生的。年龄限制，国家之类的。只需删除该限制，它就可以正常工作。使用任何 iframe fb 框或 javascript.It wrks 罚款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:11:23.763

解决方案：

> 如果“赞”框不会向已注销的用户显示内容，那几乎可以肯定是因为您的页面存在人口统计限制。API（和社交插件）只会将有关此类页面的信息返回给满足限制的用户。
> 
> 很可能您尚未发布该页面，已将该页面标记为供大于 18 岁的用户使用，供某个国家/地区的用户使用，或者已将该页面标记为“与酒精有关”（这将其限制为合法用户他们国家的饮酒年龄）

对页面本身有国家限制。

# html - 当 div 超出我的内容宽度时，如何防止水平滚动条出现？

> ID：14739415
> 
> 赞同：0
> 
> 时间：2013-02-06T21:45:15.920
> 
> 标签：html, css

我已经看到这个问题以多种不同的方式提出，但我只是不明白答案，因为应用程序或场景似乎与我的不同。

基本上我的内容宽度为 940 像素，我想使用“画架”作为幻灯片的背景，但是画架图像在 940 像素的内容宽度之后延伸了大约 400 像素，导致水平滚动条显示在 940 像素 +画架宽度（400 像素） - 但我希望滚动条仅在内容为 940 像素或更少时显示 - 是否有一个简单的修复我忽略？

```
<div id="showcase">
            <div class="content">
                <div class="left">
                    <h1>Lidya Aaghia Tchakerian</h1>
                    <p>
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
                        Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.
                    </p>
                </div>

                <div id="slideshowArea">
                    <div id="slideshow">
                        <ul class="bjqs">
                            <li><img src="images/slider1.jpg" width="326" height="534" alt="" /></li>
                            <li><img src="images/slider1.jpg" width="326" height="534" alt="" /></li>
                            <li><img src="images/slider1.jpg" width="326" height="534" alt="" /></li>
                            <li><img src="images/slider1.jpg" width="326" height="534" alt="" /></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div> 
```

我的CSS：

```
 /* showcase
------------------------------------------*/
#showcase {
    position: relative;
    padding: 40px 0 0 0;
    height: 828px;
    background: #fafafa;
    border: 1px solid #d8d8d8;
}

#showcase .left {
    position: absolute;
    width: 388px;
    top: 200px;
    text-align: center;
}

#showcase .left  h1 {
    color: #cd6d6d;
}

#slideshowArea {    
    position: absolute;
    width: 824px;
    left: 495px;
    height: 875px;
    background: url('../images/easel.png') no-repeat;
}

#slideshow {
    display: block;
    position: relative;
    left: 72px;
    height: 534px;
    width: 326px;
    border: none;
    top: 107px;
}

#slideshow ul {
    position: relative;
    z-index: 99;
    width: 326px;

}

ul .traits {
    padding: 0;
    float: left;
    margin: 10px 0 0 30px;
}

.traits li {
    color: #fff;
    float: left;
    display: block;
    margin-right: 25px;
    padding: 6px 0 0 22px;
    background: url('../images/checkbox.png') no-repeat 0 0;
    height: 30px;
    list-style: none;
} 
```

非常感谢任何和所有帮助。

谢谢，内森

编辑：查看页面访问[http://www.digicrest.com/lidya](http://www.digicrest.com/lidya)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:31:13.800

使用媒体查询，您可以为您的 css 元素指定溢出属性。目前尚不清楚您要定位哪个 id 或类，所以我在下面的示例中将其命名为 #your_id。

首先对于低于 940px 的所有内容：

```
@media only screen and (max-width: 940px) {
body {
overflow-x:visible;
}
} 
```

然后对于 940px 以上的所有内容：

```
@media only screen and (min-width: 940px) {
body {
overflow-x:hidden;
}
} 
```

在此处了解有关@media 查询的更多信息：[http ://webdesign.about.com/od/css3/a/css3-media-queries.htm](http://webdesign.about.com/od/css3/a/css3-media-queries.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:24:31.153

也许是这样：

```
#slideshowArea {    
  position: absolute;
  width: 824px;
  max-width: 940px;
  overflow-x: hidden; /* Maybe overflow-y instead ?? */
  left: 495px;
  height: 875px;
  background: url('../images/easel.png') no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:24:52.000

我正在理解以下两种方式之一：

1）如果您希望您的#slideshow div 没有滚动条，您可以将其溢出属性设置为“隐藏”：

```
#slideshow {
display: block;
position: relative;
left: 72px;
height: 534px;
width: 326px;
border: none;
top: 107px;
overflow-x: hidden; /*ADD THIS*/ 
```

}

2）我理解的另一种方式是，您有一个带有画架背景图像的 div，它应该“容纳”您的#slideshow div，但该背景图像超出了它所需的尺寸。如果您使用的是固定设计，一种解决方案是将背景图像制作成容器 div 的大小，这样您就或多或少地知道事物应该在哪里。

另一种解决方案是使用 CSS background-size 属性；如果你希望你的背景是 940px 宽，你可以这样做：

```
 #container {
     background: url('directory/file.jpg');
     background-size: 940px auto;
 } 
```

希望这可以帮助！

# high-availability - 如果 HAProxy 集群将相同的虚拟 IP 分配给多台机器会发生什么？

> ID：14739419
> 
> 赞同：0
> 
> 时间：2013-02-06T21:45:32.027
> 
> 标签：high-availability, haproxy, virtual-ip-address, stonith, pacemaker

假设我在集群中运行了两个[HAProxy](http://haproxy.1wt.eu/)实例，为其他事物提供负载平衡。两个节点的 HAProxy 集群可以使用 Pacemaker 和 Corosync 来实现。

考虑两个节点彼此失去联系（但外部世界仍然可以访问）的情况。在这种情况下，他们将决定两者都采用与该集群关联的虚拟 IP。会不会出现这种情况？如果是这样，您是否必须实施 STONITH 来保护虚拟 IP 资源？没有 STONITH 有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:50:51.127

您不需要 stonith，因为 HAProxy 不需要共享存储容器。如果您的集群对进入裂脑情况，这有什么关系？您的路由器选择击中哪一个都可以正常工作。

```
You will probably want the following in sysctl.conf:
#Allow haproxy to start without the interface present - Required for stick table     replication:
net.ipv4.ip_nonlocal_bind = 1 
```

还要确保您的 HA 解决方案正常失败，即在脑裂场景中确保两个节点都尝试并上线（在 Loadbalancer.org，我们使用了几个补丁来修复 HA-Linux 心跳以确保发生这种情况）但是在说了这么多之后STONITH 的硬件实现也可以。

# fortran77 - FORTRAN 中对“继续”和“继续”的混淆

> ID：14739422
> 
> 赞同：0
> 
> 时间：2013-02-06T21:45:36.673
> 
> 标签：fortran77, do-loops

坏消息大家，

我最近开始学习 FORTRAN 来理解代码并将其翻译为 C++（我
知道代码的作用对于这个问题并不重要，但为了提供一些背景知识，
这段代码使用自适应网格上的搭配方法解决了边界值问题）。
查看代码，有一些“go to”语句与“do continue”相结合，
这让我很困惑。

这是一个例子：

```
do 100 i=1, n
    C DO SOMETHING HERE
    if (some condition) go to 90
    C DO SOME MORE STUFF HERE
    90 continue
    C EVEN MORE STUFF HERE
100 continue 
```

我有一些用 C 编程的经验，所以我将用 C 编写我的两种解释
如下，但我不确定哪一种（如果有的话！）是正确的翻译：

```
for(int i=1;i<=n;i++)
{
    //DO SOMETHING HERE
    if(some condition) continue;
    //DO SOME MORE STUFF HERE
    //EVEN MORE STUFF HERE
} 
```

或者：

```
for(int i=1;i<=n;i++)
{
    //DO SOMETHING HERE
    if(!some condition)
    {
        //DO SOME MORE STUFF HERE
    }
    //EVEN MORE STUFF HERE
} 
```

我想知道是否有人可以帮助我理解语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:43:49.417

`continue`Fortran的声明什么也没做。它只是作为跳转的参考。在您的 Fortran 代码中，程序会跳过`DO SOME MORE STUFF HERE`if `some condition`is `true`。因此，您的第二个 C 版本是正确的。

# java - 带有套件的 Junit 测试运行程序

> ID：14739424
> 
> 赞同：5
> 
> 时间：2013-02-06T21:45:38.313
> 
> 标签：java, unit-testing, junit, junit4, junit-runner

是否可以让 TestRunner 运行以编程方式创建的测试套件？

例如 Block4JunitTestRunner 将 Suite 类作为构造函数参数。但是，我不能这样做，因为套件不是具体的套件。我将 TestCases 动态添加到 TestSuite，现在我需要一个 TestRunner 来运行它，这样我才能让 Junit 正常报告测试失败/成功/错误。(

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:49:46.757

[SuiteRunner](https://github.com/robobario/junit-instance-runner/blob/master/src/main/java/SuiteRunner.java)

[BlockJunit4ClassRunnerForInstance](https://github.com/robobario/junit-instance-runner/blob/master/src/main/java/BlockJUnit4ClassRunnerForInstance.java)

[示例套件](https://github.com/robobario/junit-instance-runner/blob/master/src/test/java/TestA.java)

此套件运行程序要求您提供一个静态方法，返回测试实例列表，例如

```
public static List<Object> testInstances(){
    ArrayList<Object> objects = new ArrayList<Object>();
    ..
    return objects;
} 
```

块运行器的原始行为是为每个测试方法创建一个新实例，因此您可能需要在设置中做更多工作以保持测试独立。

# pyqt4 - 如何将 IPython 内核嵌入到 PyQt4 程序中？

> ID：14739425
> 
> 赞同：2
> 
> 时间：2013-02-06T21:45:47.480
> 
> 标签：pyqt4, ipython

因此，根据[github 上的这个 PR，](https://github.com/ipython/ipython/pull/2724)将内核嵌入到 PyQt4 程序中的功能现在在 master 中。谁能举例说明如何实际做到这一点？我找不到任何文档。以前有过这样的尝试：[epatter's gist](https://gist.github.com/epatters/3659874)但模块的名称必须更改，因为我什至无法导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T02:08:05.523

这段代码可能会对您有所帮助。

```
#!/usr/bin/env python
# Set the QT API to PyQt4
import os
os.environ['QT_API'] = 'pyqt'
import sip
sip.setapi("QString", 2)
sip.setapi("QVariant", 2)
from PyQt4.QtGui  import *
# Import the console machinery from ipython
from IPython.qt.console.rich_ipython_widget import RichIPythonWidget
from IPython.qt.inprocess import QtInProcessKernelManager
from IPython.lib import guisupport

class QIPythonWidget(RichIPythonWidget):
    """ Convenience class for a live IPython console widget. We can replace the standard banner using the customBanner argument"""
    def __init__(self,customBanner=None,*args,**kwargs):
        if customBanner!=None: self.banner=customBanner
        super(QIPythonWidget, self).__init__(*args,**kwargs)
        self.kernel_manager = kernel_manager = QtInProcessKernelManager()
        kernel_manager.start_kernel()
        kernel_manager.kernel.gui = 'qt4'
        self.kernel_client = kernel_client = self._kernel_manager.client()
        kernel_client.start_channels()

        def stop():
            kernel_client.stop_channels()
            kernel_manager.shutdown_kernel()
            guisupport.get_app_qt4().exit()            
        self.exit_requested.connect(stop)

    def pushVariables(self,variableDict):
        """ Given a dictionary containing name / value pairs, push those variables to the IPython console widget """
        self.kernel_manager.kernel.shell.push(variableDict)
    def clearTerminal(self):
        """ Clears the terminal """
        self._control.clear()    
    def printText(self,text):
        """ Prints some plain text to the console """
        self._append_plain_text(text)        
    def executeCommand(self,command):
        """ Execute a command in the frame of the console widget """
        self._execute(command,False)

class ExampleWidget(QWidget):
    """ Main GUI Widget including a button and IPython Console widget inside vertical layout """
    def __init__(self, parent=None):
        super(ExampleWidget, self).__init__(parent)
        layout = QVBoxLayout(self)
        self.button = QPushButton('Another widget')
        ipyConsole = QIPythonWidget(customBanner="Welcome to the embedded ipython console\n")
        layout.addWidget(self.button)
        layout.addWidget(ipyConsole)        
        # This allows the variable foo and method print_process_id to be accessed from the ipython console
        ipyConsole.pushVariables({"foo":43,"print_process_id":print_process_id})
        ipyConsole.printText("The variable 'foo' and the method 'print_process_id()' are available. Use the 'whos' command for information.")                           

def print_process_id():
    print 'Process ID is:', os.getpid()        

def main():
    app  = QApplication([])
    widget = ExampleWidget()
    widget.show()
    app.exec_()    

if __name__ == '__main__':
    main() 
```

# php - 更新页面时如何保留当前选项卡？

> ID：14739428
> 
> 赞同：0
> 
> 时间：2013-02-06T21:45:58.447
> 
> 标签：php, html, css

我有一个像这样设置的水平选项卡系统：

```
<a id="default" class="link" href="#">Tab 1</a>
<a class="link" href="#">Tab 2</a>
<a class="link" href="#">Tab 3</a> 
```

它使用基本的 HTML 和 CSS 工作。

我还有一个表格，每个表格可以处理通过 PHP 进行的排序，这会导致页面重定向，将新的排序类型放在 URL 中。

但是，如果我在第三个选项卡中，然后单击更改排序类型，页面更改并且排序类型更改现在它返回到选项卡 1。我怎样才能让它保留它是哪个选项卡在以前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:06:26.160

不知何故，在使用服务器端排序的表上，您正在传递服务器信息。它可能带有表格

```
<form method="post" action="http://www.example.com/tabs.php?sortTab2=a" /> 
```

或链接

```
<a href="http://www.example.com/tabs.php?sortTab2=a">Sort</a> 
```

无论哪种方式，如果您在查询字符串中添加一个名为 的参数`tab`，您可以使用 php`id="default"`在当前选项卡中打印。

```
<?php
$activeTab = isset($_REQUEST['tab']) ? $_REQUEST['tab'] : 1;
?>

<a <?php if($activetab == 1) echo 'id="default" '; ?>class="link" href="#">Tab 1</a>
<a <?php if($activetab == 2) echo 'id="default" '; ?>class="link" href="#">Tab 2</a>
<a <?php if($activetab == 3) echo 'id="default" '; ?>class="link" href="#">Tab 3</a> 
```

然后，在每个选项卡中，确保您指定`tab`查询参数，但您正在调用您的 php 排序。

```
<form method="post" action="http://www.example.com/tabs.php?sortTab2=a&tab=2" />
<a href="http://www.example.com/tabs.php?sortTab2=a&tab=2">Sort</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:10:42.147

您可以使用 jquery，为每个选项卡分配一个 ID，然后使用 .show() 和 .hide() 。如果您有数据，好处包括没有回发和闪电般的快速标签切换。

# c - 将 char 数组中的内容转换为 C 中的十六进制（例如：{'5', 'A'} 到 0x5A）

> ID：14739432
> 
> 赞同：1
> 
> 时间：2013-02-06T21:46:09.570
> 
> 标签：c, arrays, pointers, char, hex

我需要将我拥有的东西修改`stringList`为十六进制，并且我需要在内部进行修改，`MyFunction`因为`WriteI2C`需要采用十六进制值。例如，如果`stringList`包含“5”和“A”，我想将 0x5A 传递到`WriteI2C`.

```
char* stringList[5]; // array of strings (max 5 strings)
char* (*stringListPtr); // pointer to a string

void MyFunction(char* (char* (*stringListPtr))
{
    WriteI2C(a hex value); // ex: WriteI2C(0x5A);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:51:35.690

你可以使用以 NUL 结尾的数组`char`（又名 C 字符串）吗？如果是这样的话：

```
const char *str = "5A";
int val = strtol(str, NULL, 16);
WriteI2C(val); 
```

如果没有，您可能想要制作一个以 NUL 结尾的副本，或者重新发明轮子（注意：不要重新发明轮子）：

```
int ch2hex(char ch)
{
    if (isdigit(ch)) return ch - '0';
    if (islower(ch)) return ch - 'a' + 10;
    if (isupper(ch)) return ch - 'A' + 10;
    // if this is reached, something very nasty is going on
}

int str2hex(char arr[2])
{
    return (ch2hex(arr[0]) << 4) | ch2hex(arr[1]);
} 
```

# asp.net - MvcContrib Grid 未列出数据，尽管它存在

> ID：14739433
> 
> 赞同：0
> 
> 时间：2013-02-06T21:46:11.520
> 
> 标签：asp.net, asp.net-mvc, mvccontrib, mvccontrib-grid

在我看来，以下代码输出以下内容：

```
ViewBag.Count = 4
39d3fe7f-fb1c-4c0f-948e-43093f1d7f85    265ca3c1-9890-4680-b10c-8c7c5e22b26f
f07f0aee-3948-473a-873f-74d446030d36    229db054-e62c-4981-878e-cd0bd5c9a1ac
a92440cd-9393-4d1b-abfb-e705ea739c59    4cd997cf-1715-43b0-9354-0ddf90f33fe6
7c265ae0-7c8e-4dd3-ae76-f52e95138b6e    45254c9a-f078-4d50-bdc8-3e823bdcce41 
```

看法：

```
ViewBag.Count = @ViewBag.Count
<table>
@foreach (var item in Model)
{
    <tr>
        <td>@item.ID</td>
        <td>@item.USER_ID</td>
    </tr>
}
</table>
@Html.Grid(Model) 
```

如果 ViewBag 中有四条记录，那么为什么 MvcContrib Grid 没有列出它们？

这是我的控制器：

```
 public ActionResult Index()
    {
        ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

        ViewBag.Count = db.Directories.Count();

        return View(db.Directories.ToList());
    } 
```

谢谢你。

**编辑：**

查看源代码只显示一个空表：

```
<table class="grid"><thead><tr></tr></thead><tbody><tr class="gridrow"></tr><tr class="gridrow_alternate"></tr><tr class="gridrow"></tr><tr class="gridrow_alternate"></tr></tbody></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:14:18.620

我只是用这个，而不是：

[http://msdn.microsoft.com/en-gb/magazine/hh288075.aspx](http://msdn.microsoft.com/en-gb/magazine/hh288075.aspx)

```
@{

  var grid = new WebGrid(Model, defaultSort:"Name");

}

@grid.GetHtml() 
```

# ruby-on-rails - Ruby 排序问题

> ID：14739434
> 
> 赞同：0
> 
> 时间：2013-02-06T21:46:19.390
> 
> 标签：ruby-on-rails, ruby

我正在尝试按数组`@users`的数量对数组进行排序`posts`。这是我的控制器中的内容：

```
@users = User.includes([:posts]).where("user_type = ?", "A")        
@users.sort {|a,b| (a.posts.size <=> b.posts.size)} 
```

以下是我的观点：

```
<% @users.each do |user| %>
  <%= user.name %>: <%= user.posts.size %>
  <br>
<% end %> 
```

我的用户列表非常随机，并且没有正确排序。如果我没记错的话，`<=>`操作符就是我想要使用的。我想返回`1`if `a`has more posts than `b`, `-1`if `b`has more posts than `a`and `0`if`a`并且`b`有相同数量的帖子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:49:15.017

这只是缺少的砰砰声。

```
@users.sort! {|a,b| (a.posts.size <=> b.posts.size)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:49:27.387

您正在使用`sort`而不是`sort!`. 将就地`sort!`排序。`@users`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:32:29.693

我看到两件事：

当您必须深入研究对象时，不要使用`sort`，而是使用。`sort_by`对于您正在使用的短方法链，它不应该是一个很大的加速，但它可以加起来：

```
@users.sort_by! {|a| a.posts.size } 
```

如果您从数据库中检索数据，而不是在 Ruby 中进行排序，请使用[`order`](http://guides.rubyonrails.org/active_record_querying.html#ordering)或`order_by`（取决于支持的选项）让 DBM 按您想要的顺序对数据进行排序。DBM 针对排序进行了优化，并且可以非常快速地完成排序。

# android - Android - 试图保存 ArrayList 使用 GSON 作为 JSON 字符串进入 SharedPreferences - 但出现肮脏的 NullPointerException

> ID：14739437
> 
> 赞同：0
> 
> 时间：2013-02-06T21:46:23.220
> 
> 标签：android, json, arraylist, sharedpreferences, gson

有一段时间了，似乎看不出问题出在哪里。

尝试将 ArrayList 保存到 JSON 时，我收到 NullPointerException，一定要跳到标记它的底部。

我以前使用 GSON 将对象保存到 JSON 和从 JSON 保存对象，但它们是整个对象而不是 ArrayLists..

相关代码：

```
private static final String SHARED_PREFERENCES = "shared_preferences";

// Shared Preferences containing JSON object of saved usernames
SharedPreferences sharedPreferences;

// Saved usernames
ArrayList <String> savedUsernames; 
```

在创建（）...

```
// Get sharedPreferences
    sharedPreferences = this.getSharedPreferences(SHARED_PREFERENCES, Context.MODE_PRIVATE); 
```

尝试任何一种方式都可以确保将 savedUsernames 初始化为某些东西。

```
// If usernames are saved, initialize savedUsernames with them or else initiliaze blank but ready
    if (sharedPreferences.contains(SAVED_NAMES))
    {
        getSavedUsernames();
    }
    else
    {
        savedUsernames = new ArrayList<String>();
    } 
```

将当前显示的用户名保存到 savedUsernames ArrayList 的按钮监听器

```
case R.id.bSaveUsername:

            // Add textview text to ArrayList
            savedUsernames.add(tvCurrentUsername.getText().toString());

            // Addition, add change for deletion
            changeHasBeenMade = true;

            // Toast for feedback
            Toast.makeText(MainScreen.this, "Added to list", Toast.LENGTH_SHORT).show();
            break; 
```

我有一个布尔值，在每次更改时都为真。这是 onPause()

```
// If there is anything to save, save
    if (changeHasBeenMade)  
    {
        Toast.makeText(this, "Success", Toast.LENGTH_SHORT).show(); 
        saveUsernames();
    } 
```

调用 saveUsernames() 这是问题所在（下面突出显示的行）

```
// On pause, saveUsernames
private void saveUsernames()
{
    if (D) Log.i(TAG, "savedUsernames() start");

            /**** PROBLEM LINE ****/
    String savingNamesJSON = gson.toJson(savedUsernames);
            /**** PROBLEM LINE ****/

    // Create editor, save JSON string and commits
    Editor editor = sharedPreferences.edit();
    editor.putString(SAVED_NAMES, savingNamesJSON).commit();

    if (D) Log.i(TAG, "savedUsernames() end");
} 
```

非常感谢您的时间！欣赏它

# .htaccess - .htaccess 将子域添加到永久链接（开发服务器到登台）

> ID：14739439
> 
> 赞同：0
> 
> 时间：2013-02-06T21:46:35.893
> 
> 标签：.htaccess, mod-rewrite, development-environment, subdirectory, staging

我开发了一个在本地服务器上运行良好的静态站点：`mysite.dev`

但是，在我的登台服务器中，我将它放入了一个子目录：
`sites.domainname.com/mysite`

虽然它在我的本地服务器（MAMP Pro）上工作，但当我将文件 FTP 到目录时，实际上`/mysite`应该是一个链接（完全省略了子目录文件夹“ ”）`sites.domainname.com/mysite/about/index.php``sites.domainname.com/about/index.php``mysite`

如何使用`mysite`文件夹中的 .htaccess 解决此问题？

# php - 从 db onclick 传递参数，在 JS 中设置变量并通过 ajax 将变量传递给 php 函数

> ID：14739442
> 
> 赞同：0
> 
> 时间：2013-02-06T21:46:52.377
> 
> 标签：php, javascript, ajax, jquery

我早些时候发布了一个问题，但由于我的代码错误，我无法让它工作。正如标题所说，我正在从数据库中提取一些数据并将其回显到 div 中。单击时，我想获取此数据并将其传递给 javascript 文件，设置变量并将这些变量发送到要插入数据库的 php 文件。我想做这一切，所以页面不会刷新。这是我的 div：

```
echo "<div><a href='javascript:void(0);' onClick='wish(".$title.", ".$link."); 
return false;'>Add to Wish List</a></div>"; 
```

标题和链接是从数据库中提取的数据。JS脚本：

```
$(function() {
function wish(title, link){
var title = //how to set this to the title passed??
    var link = //how to set this to the link passed??
}
$.ajax({
  type: "POST",
  url: "wish_list.php",
  data: title and link //what's the correct syntax to pass these two vars???
  success: function(){
    alert("Item added to your wish list");
}
});
}); 
```

在 PHP wish_list.php 文件中，我将使用：

```
if (isset($_POST['title']) && isset($_POST['link'])){
   echo"<script>
     alert("variables passed");
   </script>";
} 
```

那我离我有多远？我错过了什么还是一切都错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:53:03.377

你很接近，但你只需要决定使用什么数据格式，如果你想使用 JSON，你可以在 PHP中使用[json_encode](http://php.net/manual/en/function.json-encode.php)和[json_decode ，在 JavaScript 中使用](http://php.net/manual/en/function.json-decode.php)[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)和[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)。

## 将变量传递给 PHP 并从 PHP 获取 JSON

PHP：

```
$url = json_decode($_POST['url']); // You have a php array of the details now
var_dump($url); 
```

JS：

```
var url = { 
    title: 'Home Page', 
    link: location.href
};

jQuery.ajax({
    type: 'POST',
    url: "wish_list.php",
    data: JSON.stringify(url),
    dataType: "json",
    success: function(data){ console.log(data); }
}); 
```

## 将变量从 PHP 传递到 JavaScript

下面的灵感来自 Drupal 是如何做到的。在包含jQuery**之后**但**在**包含其他脚本之前包含它：

```
<script>
  var Globals = { 'settings': {}, 'somethingelse': {} };
  jQuery.extend(Globals.settings, {'phpVersion':'<?php print phpversion() ?>', link:'http://www.google.com', title:'Google'});
</script> 
```

然后在 JavaScript 中，您可以读取和写入设置：

```
// Add this device's window width
jQuery.extend(Globals.settings, {'deviceWidth':$(window).width()});

// Now print everything Global.settings has including the variable set by PHP
console.dir(Global.settings);

// Or get a specific variable:
console.log('This server is running PHP ' + Globals.settings.phpVersion); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:00:14.643

您已经在使用 jquery，所以首先让我们清理您的 html：

```
echo "<div><a class=\"wishable\" href=\"#\" data-wishlist-title=\"$title\" data-wishlist-link=\"$link\">Add to Wish List</a></div>" 
```

我从 html 中删除了所有 js。如果您使用 jQuery，则没有真正的理由将功能内联到 html。为了访问我们想要的数据，我将其编码为可以使用`jQuery.attr`或访问的数据属性`jQuery.data`。我还添加了一个类，`wishable`以便我们可以将点击处理程序附加到所有链接。

所以不要让我们连接你拥有的旧内联函数：

```
$(function() {
    $(document).on('click.wishable', 'a.wishable', function (e) {
         var $this = $(this), // the <a />
             title = $this.data('whishlistTitle'), // pull the title from the data attr
             link = $this.data('wishlistLink');  // pull the link from the data attribute

         e.preventDefault(); // prevent default link handling

         $.ajax({
           type: "POST",
           url: "wish_list.php",
           data: {"title": title, "link": link },
           success: function(){
             alert("Item added to your wish list");
           }
         });         
    });
}); 
```

现在我们如何获得链接和标题：

```
title = $this.data('whishlistTitle')
link = $this.data('wishlistLink') 
```

与数据属性一起使用`jQuery.data`时，会转换属性名称。`data-`前缀被删除，然后其余部分从连字符转换为驼峰式。此外，该值将被转换为原生 javascript 类型。这对于不是真正数字的数字字符串非常重要（例如 0 填充产品 SKU），但对于您的示例而言，这无关紧要。然而，这确实`data`比`attr`.

我们也可以使用`jQuery.attr`，但需要使用完整的属性名称：

```
title = $this.attr('data-whishlist-title')
link = $this.attr('data-wishlist-link') 
```

这是一个小提琴：http: [//jsfiddle.net/hyFXM/1/](http://jsfiddle.net/hyFXM/1/)

对于测试，您可以回显您传入的内容并发出警报。所以`jQuery.ajax`看起来像：

```
 $.ajax({
           type: "POST",
           url: "wish_list.php",
           data: {"title": title, "link": link },
           success: function(text){
             alert(text);
           }
         }); 
```

然后你的 php 看起来像：

```
if (isset($_POST['title']) && isset($_POST['link'])){
   echo 'SUCCESS - $_POST[\'title\'] =' . $_POST['title'] . ' $_POST[\'link\'] = '. $_POST['link'];
} else {
   echo 'FAIL WHALE!!!!!!';
} 
```

# gnuplot - Gnuplot：在曲面上绘制路径

> ID：14739445
> 
> 赞同：3
> 
> 时间：2013-02-06T21:47:05.077
> 
> 标签：gnuplot

我想在 gnuplot 的 3d 表面上绘制一条路径，但我不知道该怎么做。3d 表面由一个函数生成，我可以用等高线图显示，路径是一系列数据点 [x, y, f(x,y)]，我可以用线条调色板显示（所以值f(x,y) 改变线的颜色。但是有没有办法在等高线图上覆盖线？我无法让它工作。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T01:20:22.930

它应该很简单......这是一个带有数据文件的小示例脚本：

数据文件 ( `test.dat`):

```
.1 .1
.2 .2
.3 .3
.4 .4
.5 .5
.6 .6 
```

绘图脚本：

```
set yrange [0:1]
set xrange [0:1]
f(x,y) = sin(x*10)*cos(y*10)
splot f(x,y),'test.dat' u 1:2:(f($1,$2)) w lines 
```

如果要根据调色板为线段着色：

```
splot f(x,y),'test.dat' u 1:2:(f($1,$2)):(f($1,$2)) w lines palette 
```

# blackberry - 防止 MenuItem 关闭菜单 - 黑莓

> ID：14739450
> 
> 赞同：0
> 
> 时间：2013-02-06T21:47:23.623
> 
> 标签：blackberry, menu, menuitem

我在尝试实现以下目标时遇到问题：我需要在单击 Blackberry 菜单中的项目 (MenuItem) 时，菜单保持打开状态。我试图自己创建一个菜单自定义并覆盖关闭功能，但没有奏效。因此，如果有人有更好的想法，请发布。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:16:44.050

你想要达到的目标有点奇怪，我强烈建议不要这样做。它不直观，您可能可以使用其他机制来做同样的事情。

但无论如何，一旦选择了 MenuItem，您可以尝试以编程方式再次打开菜单。

# c++ - 什么会导致 VS2010 无法从头文件中包含，但不能从实现文件中包含？

> ID：14739459
> 
> 赞同：2
> 
> 时间：2013-02-06T21:47:54.343
> 
> 标签：c++, visual-studio-2010, cmake, sfml

我有一个 CMake 使用 SFML 库生成的 VS2010 项目。项目是这样设置的，将*lib/SFML-2.0-rc/include*添加到包含目录中：

```
/lib
+   /SFML-2.0-rc
    +   /include
        +   /SFML
            +   Graphics.hpp
    +   /lib
/project
+   /src
    +   /engine
        +   /assets
            +   CMakeLists.txt
            +   asset.hpp
        +   CMakeLists.txt
        +   engine.hpp
        +   engine.cpp
    +   CMakeLists.txt
    +   main.cpp
+   CMakeLists.txt 
```

我正在尝试使用`#include <SFML/Graphics.hpp>`assets.hpp *，*但出现以下错误：

```
fatal error C1083: Cannot open include file: 'SFML/Graphics.hpp': No such file or directory 
```

尝试从*engine.hpp*中包含时，我也会收到该错误。但是，在*engine.cpp*中，我已经在使用该包含行，并且可以成功构建和运行该项目。

Visual Studio 能够自动完成 SFML 包含路径，并且在*Configuration Properties > C/C++ > Additional Include Directories*我可以看到所有库都已配置。

所以我的问题是：**什么可能导致此错误仅在包含头文件时发生？**

# CMakeLists 文件

这些是生成 VS2010 解决方案的 CMake 构建文件。

### 项目/CMakeLists.txt

```
cmake_minimum_required (VERSION 2.8)
project (project)

set (project_SOURCE 
    ""
)
include_directories("src")
add_subdirectory (src)

add_executable (project ${project_SOURCE})
target_link_libraries (project Engine) 
```

### 项目/src/CMakeLists.txt

```
set (project_SOURCE
    ${project_SOURCE}
    "${CMAKE_CURRENT_SOURCE_DIR}/main.cpp"
    PARENT_SCOPE
)
include_directories ("engine")
add_subdirectory (engine) 
```

### 项目/src/engine/CMakeLists.txt

```
set (HEADERS
    "${CMAKE_CURRENT_SOURCE_DIR}/engine.hpp"
)
set (SOURCE
    "${CMAKE_CURRENT_SOURCE_DIR}/engine.cpp"
)
include_directories("assets")
add_subdirectory(assets)
add_library(Engine 
    ${SOURCE} ${HEADERS}
)

set (LIBS_ROOT "" CACHE PATH "Root directory of external libs")
set (LIBS_SFML_FOLDER "SFML-2.0-rc" CACHE STRING "Name of the SFML external folder")
set (SFMLDIR "${LIBS_ROOT}/${LIBS_SFML_FOLDER}")

## SFML
if (NOT SFMLDIR)
    message (FATAL_ERROR "SFML directory hasn't been specified")
endif()

set (CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${SFMLDIR}/cmake/Modules")
set (SFML_STATIC_LIBRARIES TRUE)
set (SFML_COMPONENTS system window graphics network audio main)
find_package (SFML 2 COMPONENTS ${SFML_COMPONENTS} REQUIRED)
if (SFML_FOUND)
    include_directories(${SFML_INCLUDE_DIR})
    target_link_libraries (Engine ${SFML_LIBRARIES})
endif () 
```

### 项目/src/engine/assets/CMakeLists.txt

```
set (HEADERS
    ${HEADERS}
    "${CMAKE_CURRENT_SOURCE_DIR}/asset.hpp"
    PARENT_SCOPE
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:28:34.293

指示的目录结构表明您需要编写

```
#include <SFML/include/Graphics.hpp> 
```

这将解释错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:43:28.847

### 长答案

通过一个包含链，应用项目中的*main.cpp通过**engine/engine.hpp*间接包含“engine/assets/asset.hpp*” 。因此，在应用项目构建期间*asset.hpp*试图包含一个SFML库，并且无法找到它。

engine.cpp （和其他实现文件）能够包含 SMFL 标头的原因是它们的依赖关系是在库项目构建期间链接的，该库项目构建了依赖关系*。*实现所需的外部库中的所有内容都包含在生成的*Engine.lib*文件中。

### TL;博士

*简而言之，问题在于解决方案分为两个项目：引擎库和应用程序可执行文件。前者被配置为访问 SFML 库，但后者不是。*

### 使固定

解决方案是将外部库包含到应用程序项目配置中，或者更加小心地在头文件中公开库依赖项。

不幸的是，我没有在原始问题中发布必要的细节来查明问题，所以我添加了 CMakeLists.txt 文件的内容，这有助于揭示问题。

# ios - 如何在不使用 UINavigationController 的情况下过渡到新的非模型视图控制器？

> ID：14739461
> 
> 赞同：1
> 
> 时间：2013-02-06T21:48:00.040
> 
> 标签：ios, objective-c, uikit

以下似乎是一个典型的用例：您使用显示登录屏幕的 LoginViewController 启动应用程序。用户成功登录后，您希望显示应用程序的主视图（我们称之为 MainViewController）。

您不想将 LoginViewController 放入 UINavigationController 并随后将 MainViewController 推到它上面，因为没有理由将 LoginViewController 保持在堆栈底部，因为它永远不会再次显示。此外，在应用程序的后续启动中，您将确定您已经获得了某种登录令牌，并且根本不会显示 LoginViewController，因此从启动到启动导航控制器堆栈会出现不一致.

出于同样的原因，您也不想从 LoginViewController 模态显示 MainViewController（如果它是模态的，它将保持 LoginViewController 加载在后面）。

您也不想将窗口的 rootViewController 设置为 MainViewController（之前设置为 LoginViewController），因为这不允许您进行转换。

我想要一些关于我上面的逻辑是否有缺陷的反馈，实际上这些场景之一是正确的吗？或者如果没有，其他人在为这种情况做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:53:04.043

如果您没有登录令牌，为什么不将 MainViewController 设为您应用的根视图控制器，并在启动时以模态方式显示 LoginViewController？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:52:48.487

我有这种应用程序，我已经通过删除作为当前对象的 LoginViewController 并添加 TabBarController 和 HomeViewController 来实现这样的焦点

```
 /* remove the  current Login screen and show the 2nd tab */ 
    NSMutableArray* newArray = [NSMutableArray arrayWithArray:self.tabBarController.viewControllers];
    [newArray removeObject:self];
    [self.tabBarController setViewControllers:newArray animated:YES]; 
```

当使用从应用程序注销时，我创建登录屏幕并添加到堆栈中，否则直接进入 HomeViewController

当从应用程序中使用注销时，我将 LoginViewController 添加回堆栈并将 UITabBarController 的当前索引分配给 LoginViewController 类似这样

```
 NSMutableArray *array =[NSMutableArray arrayWithObject:loginController];
        NSMutableArray* oldArray = [NSMutableArray arrayWithArray:self.tabBarController.viewControllers];
        [array addObjectsFromArray:oldArray];

        [self.tabBarController setViewControllers:array animated:YES];
        [self.tabBarController setSelectedIndex:0];

        self.tabBarController.tabBar.hidden=YES; 
```

# ios - Monotouch - 访问本地库的标准错误

> ID：14739462
> 
> 赞同：0
> 
> 时间：2013-02-06T21:48:01.290
> 
> 标签：ios, objective-c, logging, xamarin.ios, stderr

我正在使用 LinkWith 属性链接第三方本机库。这个原生库在 stderr 通道中输出各种日志。我想访问这些日志，因为我需要报告上述第三方库中的错误。

我尝试使用 Console.SetError(Console.out) 重定向 stderr 以将其放在我的控制台中，但没有骰子。我还尝试使用 -keeptemp 额外参数将其输出到 Environment.SpecialFolder.Personal 文件夹中，以将其保存在我的磁盘上，但这种替代方法也失败了。有没有其他方法可以访问链接本机库的标准错误？

这是我尝试的一些代码：

```
var now = DateTime.Now.ToString("yyyyMMddHHmm");
Console.WriteLine(Environment.GetFolderPath (Environment.SpecialFolder.Personal));

string path = Environment.GetFolderPath (Environment.SpecialFolder.Personal);
string filePath = Path.Combine(path, now + ".txt");

TextWriter errStream = new StreamWriter(filePath);

// Redirect standard error stream to file.
Console.SetError(errStream);

Console.Error.WriteLine();
Console.Error.WriteLine("Application started at {0}.", now);
Console.Error.WriteLine(); 
```

谢谢你的时间，保罗

# sql-server - Google Apps 脚本获取文本框值插入数据库

> ID：14739464
> 
> 赞同：0
> 
> 时间：2013-02-06T21:48:04.547
> 
> 标签：sql-server, jdbc, google-apps-script

有人可以帮我弄清楚如何获取文本框的值以写入 MS SQL 数据库吗？我的数据库连接工作正常，现在我只需要确定如何获取文本框的值并使用 Google Apps 脚本**将其写入数据库。**

现在下面的代码只会将单词 TEXT 插入数据库，而不是文本框的值。

```
function doGet() {
  var app = UiApp.createApplication();

  var panel = app.createAbsolutePanel();
  var label = app.createLabel('Test Textbox');
  var text = app.createTextBox();
  var submit = app.createButton('Submit');

  panel.add(label);
  panel.add(text);
  panel.add(submit);

  app.add(panel);

  // Handlers
  var handler = app.createServerClickHandler('write');
  handler.addCallbackElement(panel);
  submit.addClickHandler(handler);

  return app;
} 

// submit text to database
function write(e) {
  var app = UiApp.getActiveApplication();
  var text = e.parameter.text;

  var conn = Jdbc.getConnection("jdbc:sqlserver://IPAddress:1433;" +
   "databaseName=name;userusername;password=password;");

  var stmt = conn.createStatement();
  var sql = "INSERT INTO dbo.tbl_Student (studentFName) VALUES ('text')";
  var count = stmt.executeUpdate(sql,1)//pass in any integer to get auto incremented IDs back

  // check to see any auto generated keys come back. that is optional. 
  var rs = stmt.getGeneratedKeys();
  while(rs.next()) {
    Logger.log(rs.getString(1));
  }

  rs.close();
  stmt.close();
  conn.close();    

  return app.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:59:51.563

为了获取传入的文本框的值，您需要为文本框创建一个名称：

修改`var text = app.createTextBox();`为`var text = app.createTextBox().setName('mytb');`.

然后，在您的处理程序函数中，您可以通过`var text = e.parameter.mytb;`.

另外，我认为您只是在数据库中插入文字“文本”。相反，尝试使用 text 变量创建字符串，如下所示：

`var sql = "INSERT INTO dbo.tbl_Student (studentFName) VALUES ("+text+")";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:53:33.390

有效的代码：

```
function doGet() {
  var app = UiApp.createApplication();

  var panel = app.createAbsolutePanel();
  var label = app.createLabel('Test Textbox');
  var text = app.createTextBox().setName('mytb').setId('mytb');
  var submit = app.createButton('Submit');

  panel.add(label);
  panel.add(text);
  panel.add(submit);

  app.add(panel);

  // Handlers
  var handler = app.createServerClickHandler('write');
  handler.addCallbackElement(text);
  submit.addClickHandler(handler);

  return app;
}  

// submit text to database
function write(e) {
  var app = UiApp.getActiveApplication();
  var textbox = app.getElementById('mytb');
  var text = e.parameter.mytb;

  var conn = Jdbc.getConnection("jdbc:sqlserver://IPAddress;" +
   "databaseName=database;user=user;password=password;");

  var stmt = conn.createStatement();
  var sql = "INSERT INTO dbo.tbl_Student (studentFName) VALUES ('"+text+"')";
  var count = stmt.executeUpdate(sql,1)//pass in any integer to get auto incremented IDs back

  // check to see any auto generated keys come back. that is optional. 
  var rs = stmt.getGeneratedKeys();
  while(rs.next()) {
    Logger.log(rs.getString(1));
  }

  rs.close();
  stmt.close();
  conn.close();

  return app.close();
} 
```

# django - django south：模型显示为未同步，即使它们是（或应该是）

> ID：14739465
> 
> 赞同：2
> 
> 时间：2013-02-06T21:48:13.597
> 
> 标签：django, django-south, migrate, syncdb

我在syncdb之后得到这个：

```
clime@den /var/www/loserti $ ./manage.py syncdb
Syncing...
Creating tables ...
Creating table tagging_tag
Creating table tagging_taggeditem
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)

Synced:
 > django.contrib.auth
 > django.contrib.contenttypes
 > django.contrib.sessions
 > django.contrib.sites
 > django.contrib.messages
 > django.contrib.staticfiles
 > django.contrib.admin
 > django.contrib.admindocs
 > django.contrib.flatpages
 > debug_toolbar
 > filebrowser
 > grappelli
 > tagging
 > south

Not synced (use migrations):
 - photologue
 - web
(use ./manage.py migrate to migrate these) 
```

所以我运行迁移：

```
clime@den /var/www/loserti $ ./manage.py migrate
Running migrations for photologue:
- Nothing to migrate.
 - Loading initial data for photologue.
Installed 0 object(s) from 0 fixture(s)
Running migrations for web:
- Nothing to migrate.
 - Loading initial data for web.
Installed 0 object(s) from 0 fixture(s) 
```

但是syncdb的结果还是一样的：

```
clime@den /var/www/loserti $ ./manage.py syncdb
Syncing...
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)

Synced:
 > django.contrib.auth
 > django.contrib.contenttypes
 > django.contrib.sessions
 > django.contrib.sites
 > django.contrib.messages
 > django.contrib.staticfiles
 > django.contrib.admin
 > django.contrib.admindocs
 > django.contrib.flatpages
 > debug_toolbar
 > filebrowser
 > grappelli
 > tagging
 > south

Not synced (use migrations):
 - photologue
 - web
(use ./manage.py migrate to migrate these) 
```

这怎么可能以及如何解决？

编辑：这是一个微弱的想法。难道是我在某些时候使用 ./manage.py syncdb 为这些应用程序创建新表，而我应该使用迁移？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:01:37.470

这只是一个警告，因为这些表由 south 管理并且在 syncdb 上被忽略。

一种解决方案是将所有表转换为南并始终运行 migrate 而不是 syncdb。我假设您可以以某种方式编辑 manage.py 来运行迁移而不是返回消息。

如果您不再为这些应用程序使用 south，请删除应用程序中的迁移目录。

# javascript - 使用 AngularJS 基于来自另一个字段的输入的数据将选项填充到选择中

> ID：14739469
> 
> 赞同：2
> 
> 时间：2013-02-06T21:48:34.540
> 
> 标签：javascript, angularjs

我有一个带有地址的表格。我收集的第一个地址字段是邮政编码。输入邮政编码后，自定义指令会查询外部 API 并获取包含城市、州、县和该州所有县的列表的对象。

在 zipcode 字段中，我在分配给 City、State 和 County 输入字段的模型中传递了属性。该指令接受这些并填充`scope`变量，以便同步每个变量的值。

我的问题在县选择框上。我需要首先使用该州所有县的列表填充该字段（同样，所有可用选项都由 API 响应提供）。填充该字段后，我需要设置该值。

设置很容易。有用。我一生都无法弄清楚如何使用可用选项填充该字段。

*   我不能使用元素 ID，因为我需要此指令可重复用于此表单中的多个地址。
*   我不能使用 ng-options，至少在我看来，因为在输入邮政编码之前我没有要填充的数据。

这是我的表单的一小段，显示了邮政编码和县域：

```
<div class="form--row">
  <div class="form--col5">
    <label class="form--label" for="nbZip">Zip</label>
    <input
      id="nbZip"
      class="form--input"
      type="text"
      ng-model="data.ClientDetails.zip"
      ng-required="data.Client == 'true'"
      blur="update()"
      ziplookup
      zip-city="data.ClientDetails.city"
      zip-state="data.ClientDetails.state"
      zip-county="data.ClientDetails.county"
    >
  </div>

<!-- First Client NB County -->
<div class="form--row">
  <div class="form--col5">
    <label class="form--label" for="nbCounty">County</label>
    <select class="form--input" id="nbCounty" ng-model="data.ClientDetails.county" ng-required="data.Client == 'true'" change="update()">
      <!-- generate county list! -->
    </select>
  </div>
</div> 
```

还有我的指令：（ZipCode 是我注入指令的自定义服务。）

```
directives.directive(
'ziplookup',
['ZipCode',
function (ZipCode) {
  var scope
    , element
    , zipData;

  var getZipData = function (event) {
    // When this function is called, `this` is
    // bound to the scope matching the element.
    scope = this;

    // We also get access to the element itself.
    element = $(event.target);

    ZipCode
      // Shoot off our call for the location data,
      // using the value in the `<input>`.
      .getLocationData(element.val())

      // When data is returned, we will set the
      // returned data.
      .then(setZipData)

      // Update the view with the returned data.
      .then(updateCity)
      .then(updateState)
      .then(updateCounty)
  };

  var setZipData = function (data) {
    // This function makes the scope and data
    // accessible from the `update___` functions
    // that follow.

    // We'll set `zipData` to the returned data.
    zipData = data.data;
  };

  var updateCity = function () {
    scope.city = zipData.city;
  };

  var updateState = function () {
    scope.state = zipData.state;
  };

  var updateCounty = function () {
    scope.county = zipData.county;
  };

  var link = function (scope, elem) {
    elem.bind('blur', angular.bind(scope, getZipData));
  };

  return {
    restrict: 'A',
    scope: {
      city: '=zipCity',
      state: '=zipState',
      county: '=zipCounty'
    },
    link: link
  };
}]); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T23:25:39.717

即使没有任何可用数据，您也可以使用`ng-options`，您只需在收到 API 响应后立即填充正确的模型。

例如，假设 API 响应将填充`$scope.availableCounties`：

```
$scope.availableCounties = ZipCodeAPI.getCounties(zipCode); 
```

然后您可以使用它来定义`ng-options`：

```
<select class="form--input" id="nbCounty" change="update()"
        ng-model="data.ClientDetails.county" ng-required="data.Client == 'true'"
        ng-options="county.id as county.name for county in availableCounties">
</select> 
```

最初它不会显示任何内容，因为`$scope.availableCounties`will be `undefined`，但是一旦您填充模型（并且如果一切都正确连接），Angular 就会自动将选项添加到该`<select>`字段。

检查这个例子：http: [//jsfiddle.net/bmleite/tD9B4/](http://jsfiddle.net/bmleite/tD9B4/)

# powershell - Powershell - 获取日志文件的内容，日志名称使用当前日期存储

> ID：14739472
> 
> 赞同：0
> 
> 时间：2013-02-06T21:48:43.030
> 
> 标签：powershell

我需要使用 solarwinds 设置对日志文件的监视，在我可以这样做之前，我需要将日志文件的内容读入 Solarwinds。日志文件保存在“c:\logs”中，但日志文件名每天都在变化——它将当前日期附加到日志文件名的末尾，例如*日志文件***20130602** .log。能否请您帮助我需要能够使用 powershell 读取这些日志文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:58:18.120

您可以访问 .NET DateTime 对象并相应地格式化您的日期。这将为您提供当前日志的文件名：

```
> 'C:\logs\log' + [System.DateTime]::Now.ToString('yyyyMMdd') + '.log'
C:\logs\log20130206.log 
```

你可以使用`Get-Content`

```
Get-Content ('C:\logs\log' + [System.DateTime]::Now.ToString('yyyyMMdd') + '.log') 
```

### 编辑

只是注意到您想改用`yyyyddMM`日期格式，而不是理智的；P

# asp.net - 有没有办法判断我的 FormView 是否处于编辑模式？

> ID：14739473
> 
> 赞同：1
> 
> 时间：2013-02-06T21:49:03.453
> 
> 标签：asp.net, formview

我有一些在 DataBound 事件上触发的 FormView 代码。不幸的是（无论如何，对于我正在做的事情）无论是第一次渲染页面还是我只是单击编辑，它都会触发相同的事件。如果它`ItemTemplate`在`EditItemTemplate`. 到目前为止，我对该主题的搜索没有结果。有没有一种简单的方法来做一些事情`if(IsEditItemTemplate)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:58:27.843

`FormView.CurrentMode`是你的朋友

更多解释[在这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.currentmode.aspx)

* * *

**从引用的网站：**

```
模式说明
FormViewMode.Edit FormView 控件处于编辑模式，允许
                       用户更新记录的值。
FormViewMode.Insert FormView 控件处于插入模式，允许
                       用户将新记录添加到数据源。
FormViewMode.ReadOnly FormView 控件处于只读模式，即
                       正常显示模式。

```

**示例代码**

```
void EmployeeFormView_OnPageIndexChanging(Object sender, FormViewPageEventArgs e)
{
    // Cancel the paging operation if the user attempts to navigate 
    // to another record while the FormView control is in edit mode. 
    if (EmployeeFormView.CurrentMode == FormViewMode.Edit)
    {
        e.Cancel = true;
        MessageLabel.Text = 
          "Please complete the update before navigating to another record.";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T14:44:40.510

更好地使用正确的功能：

```
 Private Sub EmployeeFormView_ModeChanged(sender As Object, e As EventArgs)
 Handles EmployeeFormView.ModeChanged 
```

# jsf-2 - jsf2 facelets：在模板中声明 utf-8 还不够吗？

> ID：14739478
> 
> 赞同：1
> 
> 时间：2013-02-06T21:49:19.443
> 
> 标签：jsf-2, encoding, utf-8, facelets

你好

我有一个问题，如果我将我的模板定义为 UTF-8 页面，该行为不应该应用于所有调用它的包含吗？

我创建了一个简单的模板，它打印“a ñu is a gnu (this one works)”，这意味着它可以理解并正确处理“ñ”字符。但是，当我包含另一个页面 (chupacabra) 时，如果我尝试打印一个包含相同 'ñ' 字符的单词，我会得到一个 com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException:invalid byte

**simple_template.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >

    <h:head> 

    </h:head>
    <h:body style="background-color:black;" >
        a ñu is a gnu  (this one works)
        <ui:insert name="contenido"/>
    </h:body>
</html> 
```

**chupacabra.xhtml**

```
<ui:composition 
   template="/paginas/comun/simple_template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:dabit="http://java.sun.com/jsf/composite/components"> 
            <ui:define name="contenido">
<h:form>
    añoo (this one wont work)

    </h:form>
    </ui:define>
    </ui:composition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:08:42.160

您的 Facelets 文件以错误的字符编码保存。您需要使用 UTF-8 保存它们。在 Eclipse 中，您可以通过*Window > Preferences > General > Workspace > Text File Encoding*进行设置：

![在此处输入图像描述](../Images/2fca2cfa14a0d19f4ec86cf95e93fb05.png)

修复后编辑并重新保存**所有模板。**即使只使用错误的编码保存了一个包含文件或主模板，那么整个事情仍然会失败。

请注意，XML 序言`<?xml ... ?>`是不必要的。它只告诉 XML 解析器（阅读：Facelets 的 SAX 编译器）有关已保存 XML 文件的版本和编码。但它已经默认为 UTF-8。您可以安全地摆脱它们。这对 MSIE 浏览器也更加友好。

# objective-c - Objective-C 中的移动平均线

> ID：14739481
> 
> 赞同：3
> 
> 时间：2013-02-06T21:49:26.380
> 
> 标签：objective-c, nsarray, moving-average

我试图弄清楚如何从我从麦克风收到的某个值中获得移动平均值。我有一个`frequencyChangedWithValue`调用我的测量方法的函数。这意味着我在一秒钟内获得了多达 10 次的频率变化值。我现在很感兴趣如何从所有这些变化的值中得出一个平均数。我该怎么做？

### 代码

```
- (void)frequencyChangedWithValue:(float)newFrequency{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    self.currentFrequency = newFrequency;

    [self performSelectorInBackground:@selector(filterFrequencyToGetBeats) withObject:nil];
    [pool drain];
    pool = nil;
}

- (void) filterFrequencyToGetBeats {

    if (self.currentFrequency > 1000 && pointInTime % 2 == 0)
    {
        tm_start = mach_absolute_time();
        pointInTime = pointInTime + 1;
    }
    else
        if (self.currentFrequency > 1000 && pointInTime % 2 == 1)
        {
            pointInTime = pointInTime + 1;

            tm_end = mach_absolute_time();
            tm_elapsed = tm_end - tm_start;
            mach_timebase_info(&info);
            tm_nanoSeconds = tm_elapsed * info.numer / info.denom;
            tm_milliSeconds = tm_nanoSeconds / (1000000);
            tm_seconds = (tm_milliSeconds/1000);

            fflush(stdout);
            printf ( "| allocateAudio: %5lld milliseconds, (%12lld nano seconds)\n",     tm_milliSeconds, tm_nanoSeconds );
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:25:03.190

我有其中一个：

```
// MovingAverage.h

@interface MovingAverage : NSObject

@property (readonly, nonatomic) float movingAverage;
@property (readonly, nonatomic) float cumulativeAverage;

- (id)initWithPeriod:(NSUInteger)period;
- (void)addDatum:(NSNumber *)datum;

@end

// MovingAverage.m

#import "MovingAverage.h"

@interface MovingAverage ()
@property (strong, nonatomic) NSMutableArray *queue;
@property (assign, nonatomic) NSUInteger period;
@property (assign, nonatomic) NSUInteger count;
@property (assign, nonatomic) float movingAverage;
@property (assign, nonatomic) float cumulativeAverage;
@end

@implementation MovingAverage

- (id)initWithPeriod:(NSUInteger)period {

    self = [self init];
    if (self) {
        _period = period;
        // with arc
        _queue = [NSMutableArray array];
        // without arc
        _queue = [[NSMutableArray alloc] init];
    }
    return self;
}

- (void)addDatum:(NSNumber *)datum {

    [self.queue insertObject:datum atIndex:0];

    float removed = 0;
    float datumf = [datum floatValue];

    if (self.queue.count > self.period) {
        removed = [[self.queue lastObject] floatValue];
        [self.queue removeLastObject];
    }

    self.movingAverage = self.movingAverage - (removed / self.period) + (datumf / self.period);

    // compute the cumulative average
    self.cumulativeAverage = self.cumulativeAverage + (datumf - self.cumulativeAverage) / ++self.count;
}

// if non-ARC
- (void)dealloc {
    [_queue release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:41:44.290

您可以通过保存一个数组和元素总数来简单地做到这一点。由于它是移动平均值，因此元素计数可能高于数组元素的总计数，您需要计算此计数的剩余部分。

例如：

```
@property (nonatomic,retain) NSMutableArray* elements;   
@property (nonatomic,assign) NSUInteger lastIndex;
@property (nonatomic,assign) double average; 
```

初始化元素并使其保存 N 个值（长值的 NSNumber）。您应该能够通过调用像这样的简单方法来更改平均值：

```
- (void) changeAverage: (long) newValue
{
    NSUInteger index= (++lastIndex) % elements.count;
    NSNumber* oldValue= elements[index]; // same as [elements objectAtIndex: index];
    average+= (double)newValue/elements.count -  (double)[oldValue longValue]/elements.count;   
    // The cast is to don't lose the decimal precision while dividing these numbers.
    [elements replaceObjectAtIndex: index withObject: @(newValue)];  
    // @(newValue) is the same as [NSNumber numberWithLong: newValue];
} 
```

# linux - 如何格式化 ifconfig 的输出

> ID：14739483
> 
> 赞同：4
> 
> 时间：2013-02-06T21:49:29.087
> 
> 标签：linux, bash, sed

我需要将命令的结果`ifconfig -a`转换为以下格式

```
IFACE eth0 192.168.30.8 Ethernet
IFACE eth1 212.233.112.171 Ethernet
IFACE lo 127.0.0.1 Local Loopback 
IFACE pan0 0.0.0.0 Ethernet
IFACE tunl0 0.0.0.0 IPIP Tunnel 
```

我知道我应该用 the`sed`或类似的东西来做。现在我有以下“脚本”：

```
ifconfig -a | sed -r -n -e 'N' -e 's/(\w+)(\s*)(Link\sencap:)(\w+(\s\w+)*)([^\n]*)\n\s+(inet\saddr:)([0-9]{1,3}(\.[0-9]{1,3}){3}).*/IFACE \1 \8 \4/p' 
```

原始`ifconfig -a`输出是（`...`表示省略的部分）

```
eth0      Link encap:Ethernet  HWaddr f4:ce:46:99:22:57
          inet addr:192.168.30.8  Bcast:192.168.31.255  Mask:255.255.254.0
          ...
eth1      Link encap:Ethernet  HWaddr 00:23:7d:fd:a2:d0
          inet addr:212.233.112.171  Bcast:212.233.112.175  Mask:255.255.255.240
          ...
lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          ...
pan0      Link encap:Ethernet  HWaddr f6:d0:8a:0e:7b:95
          BROADCAST MULTICAST  MTU:1500  Metric:1
          ...
tunl0     Link encap:IPIP Tunnel  HWaddr
          NOARP  MTU:1480  Metric:1
          ... 
```

**这种转换的第一个问题**是 IP 地址位于接口名称和类型的第二行。A 使用`-N`参数来连接行，但它们是成对连接的，如果接口的名称在奇数行 - 我有麻烦：脚本跳过奇数行上的接口，像这样（注意没有在输出中提到 pan0。）：

```
IFACE eth0 192.168.30.8 Ethernet 
IFACE eth1 212.233.112.171 Ethernet 
IFACE lo 127.0.0.1 Local Loopback
IFACE tunl0 IPIP Tunnel 
```

**第二个问题**是，当输出中没有 IP 地址时，我不知道如何插入零地址`ifconfig -a`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T00:38:44.743

请注意，`ifconfig`输出因平台而异，因此这不是一种非常便携的方式。

至于 sed 解决方案，我认为您需要将解析分成多个步骤，这样的事情应该可以工作（GNU sed）：

*解析.sed*

```
s/^([^ ]+) */\1\n/                               # interface name
s/Link encap:(.*)(  |$).*/\1/                    # link encapsulation
N                                                # append next line to PS
/inet addr/! s/\n[^\n]*$/\n0.0.0.0\n/            # use 0.0.0.0 if no "inet addr"
s/ *inet addr:([^ ]+).*/\1\n/                    # capture ip address if present
s/\n[^\n]*$//                                    # cleanup the last line
s/([^\n]+)\n([^\n]+)\n([^\n]+)/IFACE \1 \3 \2/p  # print entry
s/.*//                                           # empty PS
: loop                                           # \
N                                                #  \
/^\n$/b                                          #   skip until next empty line
s/.*//                                           #  /
b loop                                           # / 
```

*解释*

这个想法是使用换行符来捕获模式空间中的所有相关信息。

*测试*

像这样运行：

```
ifconfig -a | sed -rf parse.sed 
```

输出：

```
IFACE eth0 192.168.30.8 Ethernet
IFACE eth1 212.233.112.171 Ethernet
IFACE lo 127.0.0.1 Local Loopback
IFACE pan0 0.0.0.0 Ethernet
IFACE tunl0 IPIP Tunnel 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:12:26.700

我已经接受了雷神的回答，但这是我的解决方案，有点不同。我在等待答案的时候考虑了一下。

```
ip addr | sed -r ':a;N;$!ba;s/\n\s/ /g' | sed -r -n -e 's/^([0-9]+):\s(\w+).*(link\/(\w+))\s[a-f0-9:.]{,17}\sbrd\s[a-f0-9:.]{,17}\s*(inet\s([0-9]{1,3}(\.[0-9]{1,3}){3})).*/IFACE \2 \6 \4/p' -e 's/^([0-9]+):\s(\w+).*(link\/(\w+))\s[a-f0-9:.]{,17}\sbrd\s[a-f0-9:.]{,17}.*/IFACE \2 0.0.0.0 \4/p' 
```

输出：

```
IFACE lo 127.0.0.1 loopback
IFACE eth0 192.168.30.8 ether
IFACE eth1 212.233.112.171 ether
IFACE pan0 0.0.0.0 ether
IFACE tunl0 0.0.0.0 ipip 
```

主要优点 - 它可以按原样调用。第二个优点是接口的顺序与接口索引一致（我在开始比较`ifconfig`and的结果时得到了这个`ip addr`）。

但是 Thorn 的解决方案更具可读性和可维护性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T00:35:19.043

我有东西！

```
ifconfig -a | tr -s ' ' | awk -F'[: ]' '
  {if (/^[a-z]/) printf "IFACE " $1 " " $4}
  {if (/inet addr:/) print " " $4}' 
```

解释：

*   `tr -s ' '`删除多个空格。
*   `-F'[: ]'`定义多个分隔符：`:`和`（空格）。`
`*   `{if (/^[a-z]/) ...`每当某事以字母开头时，打印字段 1 和 4。*   `{if (/inet addr:/) ...`每当某些东西包含时`_inet addr_`，打印字段 $4`

 `输出：

```
IFACE lo Local127.0.0.1
IFACE wlan0 Ethernet192.168.1.61 
```

如您所见，它们的顺序不同，但我无法得到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T01:30:32.400

为了更好的可读性和可维护性，您可以为此使用 awk。这是使用 GNU awk 的一种方法：

*解析.awk*

```
function get2(s) {
  split(s, a, ":")
  return a[2]
}

{
  link = ip = ""
  for(i=2; i<=NF; i++) {
    switch($i) {
      case /Link encap/ : link = get2($i); break
      case /inet addr/  : ip   = get2($i); break
    }
  }

  print "IFACE", $1, (ip=="")?"0.0.0.0":ip, link
} 
```

像这样运行它：

```
ifconfig -a | awk -f parse.awk RS='\n\n' FS=' {2,}|\n' 
```

输出：

```
IFACE eth0 192.168.30.8 Ethernet
IFACE eth1 212.233.112.171 Ethernet
IFACE lo 127.0.0.1 Local Loopback
IFACE pan0 0.0.0.0 Ethernet
IFACE tunl0 0.0.0.0 IPIP Tunnel 
````

# winforms - Powershell - 如何使用下拉菜单进行实时 Active Directory 搜索

> ID：14739488
> 
> 赞同：1
> 
> 时间：2013-02-06T21:49:45.467
> 
> 标签：winforms, powershell, drop-down-menu, powershell-2.0

对于像你这样有经验的人来说，这可能是一个简单的问题，但是我怎样才能在下拉菜单中对用户名进行实时 Active Directory 搜索，获取所选结果并将值传递给`$var`

这是我的 from 和我的两个下拉菜单，我希望下拉菜单`manager`根据我输入的字符串在我的 Active Directory 中进行查找。即，如果我输入`Macdonald`下拉项目，将在我的 AD 中显示所有 Macdonald 的名字或姓氏。

```
function GenerateForm {

[reflection.assembly]::loadwithpartialname("System.Windows.Forms") | Out-Null
[reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null

$form1 = New-Object System.Windows.Forms.Form
$DropDownLabel = new-object System.Windows.Forms.Label
$DropDownLabel2 = new-object System.Windows.Forms.Label
$DropDown = new-object System.Windows.Forms.ComboBox
$DropDown2 = new-object System.Windows.Forms.ComboBox

$InitialFormWindowState = New-Object System.Windows.Forms.FormWindowState

$OnLoadForm_StateCorrection=
{#Correct the initial state of the form to prevent the .Net maximized form issue
    $form1.WindowState = $InitialFormWindowState
}

#----------------------------------------------
#region Generated Form Code
$form1.Text = "User Creation software"
$form1.Name = "form1"
$form1.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Width = 400
$System_Drawing_Size.Height = 200
$form1.ClientSize = $System_Drawing_Size

$DropDownArray = "Site1" , "Site2" , "Site3"

$DropDown2.Location = new-object System.Drawing.Size(125,80)
$DropDown2.Size = new-object System.Drawing.Size(150,27)
$dropdown2.DataBindings.DefaultDataSourceUpdateMode = 0
$dropdown2.TabIndex = 5
$dropdown2.Name = "dropdown2"
$Form1.Controls.Add($DropDown2)

$DropDownLabel2 = new-object System.Windows.Forms.Label
$DropDownLabel2.Location = new-object System.Drawing.Size(50,80)
$DropDownLabel2.size = new-object System.Drawing.Size(50,27)
$DropDownLabel2.Text = "Manager:"
$Form1.Controls.Add($DropDownLabel2)

$DropDown.Location = new-object System.Drawing.Size(125,55)
$DropDown.Size = new-object System.Drawing.Size(150,27)
$dropdown.DataBindings.DefaultDataSourceUpdateMode = 0
$dropdown.TabIndex = 4
$dropdown.Name = "dropdown1"

$DropDownLabel = new-object System.Windows.Forms.Label
$DropDownLabel.Location = new-object System.Drawing.Size(50,58)
$DropDownLabel.size = new-object System.Drawing.Size(50,27)
$DropDownLabel.Text = "Location:"

$Form1.Controls.Add($DropDown)
$Form1.Controls.Add($DropDownLabel)

ForEach ($Item in $DropDownArray) {
$DropDown.Items.Add($Item) | Out-Null
}

#Save the initial state of the form
$InitialFormWindowState = $form1.WindowState
#Init the OnLoad event to correct the initial state of the form
$form1.add_Load($OnLoadForm_StateCorrection)
#Show the Form
$form1.ShowDialog()| Out-Null
} #end of function
GenerateForm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:55:04.477

要进行实时更新，您需要在修改 Dropbox 中的文本时更新列表。当您在其中写入时，至少会触发 2 个事件：`TextUpdate`和`KeyPress`. 选一个。我建议`TextUpdate`，因为它在文本更改后`KeyPress`做出反应，而在之前做出反应。您可以使用例如添加事件监听器：

```
$DropDown2.add_TextUpdate({ Write-Host "TextUpdate. Updated text is: $($Dropdown2.Text)" }) 
```

在脚本块中，您需要运行一个查询 DC 的函数，但这个问题没有用 ADSI、AD、LDAP 等标记，所以这是另一个问题。

**请注意**，每次更改导致 DC 额外负载的字母时，都会运行查询。例如，如果你想写“Mark”，它会在你写完之前搜索至少 4 次。

我建议使用带有搜索按钮的文本框来尽量减少不必要的流量。

# java - Struts2 推送通知/WebSocket 交互最佳实践

> ID：14739492
> 
> 赞同：1
> 
> 时间：2013-02-06T21:50:00.187
> 
> 标签：java, jsp, sockets, model-view-controller, struts2

我正在编写一个 Struts 2 应用程序。在视图中，我有一个触发动作的按钮。该操作调用 Runtime.exec 来启动一个进程。此过程创建一个套接字，通过该套接字发送状态更新（以简单的分隔文本字符串的形式）。我希望这些状态更新反映在视图中。

我知道如何在服务器端编写一个套接字，但是我根本不清楚在哪里合并它以及当客户端在套接字上发送数据时如何更新 JSP。

我应该在哪里放置服务器套接字：在侦听器线程中还是在启动进程的操作类中？

一旦我有了状态更新，更新页面的最佳方式是什么？

另外，我想在不刷新页面的情况下进行更新——我打算为此使用 AJAX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:09:02.763

我无法让它与 Struts 2 一起使用，因为过滤器不能很好地与我最终使用 Atmosphere 构建的 servlet 配合使用。[基本上我在这里](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22org.atmosphere.samples%22%20AND%20a%3a%22atmosphere-meteor-pubsub%22)使用了 Meteor pub 示例，并修改了 servlet 以适应我们的应用程序。

此外，[dojo 工具包](http://dojotoolkit.org/features/1.6/dojo-websocket)支持 websockets。我没有对此进行测试，但看起来它也可能是一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:06:20.947

看看我在 jboss 应用服务器[https://github.com/harrybabu/struts2-cometd](https://github.com/harrybabu/struts2-cometd)上使用 cometd 和 struts2 构建的示例。希望能帮助到你...

# php - 数据映射器 php 关系

> ID：14739495
> 
> 赞同：-2
> 
> 时间：2013-02-06T21:50:09.707
> 
> 标签：php, codeigniter, relationship, datamapper, codeigniter-datamapper

好吧，我有 3 个表：sorty 字段 id、name、fStart、fEnd bol 字段 id、fol 和 bol_sorty 字段 id、bol_id、sorty_id

当我向 sorty 添加一个新寄存器时，它必须添加从 fstart 到 fEnd 的项目数。我知道如何创建一个新对象并将其插入表中，但我无法取消任何关于关系的内容 [我正在尝试]，已经阅读了代码点火器和数据映射器指南，我对此很陌生。

像这样的东西：模型：

```
 public function agregar() {
        $nombre=$this -> input -> post('nombre');
        $folio_inicial=$this -> input -> post('folioInicial');
        $folio_final= $this -> input -> post('folioFinal');

        $u = new Sorteo();
        $u -> nombre = $nombre;
        $u -> folio_inicial = $folio_inicial;
        $u -> folio_final = $folio_final;
        $u -> costo = $this -> input -> post('costo');
        $u -> save();

        /*for( $i=$folio_inicial; $i<=$folio_final; $i++ ){

            $b=new Boleto();
            $b->folio=$i;
            $b->estado=2;
            $b->condicion=2;
            $b->campus=4;
            $b->save();
            //$u->save($b);  
        }

       /* $this->load->model('sorteos/model_boleto');
        $this->model_boleto->agregar($nombre, $folio_final,$folio_inicial);

        /*if ($u -> save())
            return true;
        else
            return false;*/
    } 
```

和控制器

```
 public function procesar_sorteo_nuevo() {
        $this -> form_validation -> set_rules('nombre', 'Nombre', 'trim|required|is_unique[sorteos.nombre]');
        $this -> form_validation -> set_rules('folioInicial', 'Folio Inicial', 'trim|required|callback_chequear');
        $this -> form_validation -> set_rules('folioFinal', 'Folio Final', 'trim|required');
        $this -> form_validation -> set_rules('costo', 'Costo', 'trim|required');

        if ($this -> form_validation -> run()) {
            if ($this -> model_sorteo -> agregar()) {
                echo "Sorteo Creado";
            } else {
                echo "ERROR FATAL";
            }
            //redirect('/sorteos/sorteos/');
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:35:18.433

为每个表添加一个父 id 以匹配子表。

```
 sorty---------id-------fstart------fend
    bol-----------id-------sortyid  Parent For Sorty
    bol_sorty-----id-------bolid-------sortyid   parent for sorty and bol.
    and if bol_sorty needs a parent in both.
    bol_sorty-----id-------parent_bol----parentsorty--
    Then--select from bol_sorty where bolid="'.$value.'" and sortyid="'.$value.'", etc. 
```

多插入查询示例。
if(mysql_query('insert into sorty (id, fstart, fend) select "'.$id1.'", "'.$fstart.'", "'.$fend.'" from sorty where id="'. $id.'"') 和 mysql_query('insert into bol (id, bol, bolsorty) select "'.$bolid.'"--etc-- where id="'.$id.'" and bolid=" '.$bolid.'" '))---etc.can 添加第三个插入使用---- 和 (mysql_query( insert into bol_sorty(etc.) select "'.$id.'",--etc.我建议为每个后续表命名字段 id ---id、bid、sid 并设置父母---pid1、pid2。

# javascript - 从 JavaScript 禁用中恢复 - 卡在 Alt 上 Page

> ID：14739503
> 
> 赞同：1
> 
> 时间：2013-02-06T21:50:31.310
> 
> 标签：javascript, page-refresh, noscript

I'm using `<noscript>` to show, in some cases, alternate content and, in other cases, alternate pages when JavaScript is disabled.

`<noscript><meta http-equiv="refresh" content="1;url=index-alt.php"></noscript>`

I'm using the Firefox plugin to enable/disable JavaScript for testing, but the effect is the same when using the Edit > Preferences option in Linux FF.

Basically, when JS is re-enabled, the alternate page (eg, `index-alt.php`) remains, and I'm stuck on that page. I guess I really didn't consider this all that much after I implemented it and that was a mistake.

Is there a enable/disable JavaScript event I can bind to refresh my page to the default?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:54:29.593

重新启用 JavaScript 后，您需要返回原始页面以测试启用脚本的页面。

如果您担心“在现实生活中”会发生这种情况，您可以在无脚本页面上有一个脚本标签，该标签重定向到脚本页面，这将与您的无脚本标签相反：

```
document.location.href = "/index.php"; 
```

# ruby-on-rails - Returning a non-standard format for Date in a JSON response from Rails using as_json on the model

> ID：14739505
> 
> 赞同：0
> 
> 时间：2013-02-06T21:50:36.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, rails-activerecord

I'm attempting to reformat a date being returned by from the database (Date format) as a formatted string (format: %m%d%y) in order for it to be output by a separate client application.

Formatting it on the client side is not an option as only the web app is under our control.

```
def as_json(options={})
  super(
    :except => [:id, :created_at, :updated_at],
    :include => {
      :children => {
        :except => [:created_at, :updated_at]
      }
    }
  ).merge(:tasks_total => self.tasks_total)
end 
```

I've attempted to use a after_initialize callback, however that simply result in a nill value being passed to the client.

Any help much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:50:09.203

为了解决 Rails 对 as_json 中的属性强制执行数据类型的问题，我使用了类似的东西，并带有一个哈希：

```
def as_json(options={})
  {
    name: name,
    date_of_birth: self.date_format(date_of_birth),
    more_info: more_info,
    children: children.map(&:as_json)
  }
end 
```

调用是因为这个`date_format`模型实际上有多个日期需要以相同的方式格式化。

感谢@rbates 的帮助。

# ios - Using gdb to dump memory for jailbroken iOS app

> ID：14739508
> 
> 赞同：0
> 
> 时间：2013-02-06T21:50:48.350
> 
> 标签：ios, gdb, jailbreak

I'm developing an app to be run on jailbroken devices and I'm a little stuck.

My app requires gdb to dump memory from an app. The problem I have is that creating or modifying files only works within code, when I try and run a command from shell, it won't run as root, and therefore won't let me write outside my sandbox (Which doesn't exist cause the app is for jailbroken devices).

So I have 2 theoretical solutions to my problem.

1) Find a way to run /bin/sh as root *preferred

2) If there's a way to dump memory to the terminal, I can grab with NSData and then create a file for it within my code. However I haven't seen away to do that.

Those are just the 2 ideas I came up with, let me know if this is possible, or if you know another way.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:35:14.610

任何用户都可以在 /tmp 目录中写入....

我只是更改了将内存转储到 /tmp/file.bin 的位置，然后我可以通过代码随意移动它。

# javascript - if statement within a ng-repeat directive on Angular.js

> ID：14739511
> 
> 赞同：15
> 
> 时间：2013-02-06T21:51:01.940
> 
> 标签：javascript, html, angularjs

I am trying to implement an if into a ng-repeat directive but I am having a hard time. my code which work for now is:

```
<p ng-repeat="list in lists">{{list[id].title}}</p> 
```

What I want to do is basically

```
<p ng-repeat="list in lists if list[id].selected">{{list[id].title}}</p> 
```

Of course, on the second line I am getting an error. Any advice on this?

Thank you.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-06T22:05:21.300

正如我在评论中所写，您可以使用过滤器来实现这一点。这是示例：http: [//jsfiddle.net/sebmade/ZfGx4/44/](http://jsfiddle.net/sebmade/ZfGx4/44/)

```
ng-repeat="list in lists | filter:myFilter" 
```

和过滤代码：

```
$scope.myFilter = function(item) {
    return item.selected == true;
}; 
```

**编辑：**
我发现可以使用这样的内联过滤器来做到这一点：

```
ng-repeat="list in lists | filter:{selected: true}" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-06T22:11:56.297

您需要在此处添加一个过滤器：

```
<p ng-repeat="list in lists | filter:{selected:true}">test {{list.title}}</p> 
```

我添加[了一个 plnkr 作为示例](http://plnkr.co/edit/eQGx2FA8VwTYlC3zHFQT?p=preview)。

# ruby-on-rails-3.1 - stack level too deep error when running any rake task

> ID：14739515
> 
> 赞同：2
> 
> 时间：2013-02-06T21:51:33.093
> 
> 标签：ruby-on-rails-3.1, rake

I'm upgrading an application from Rails 3.0 to Rails 3.1\. The tests run ok, as the unicorn server. However, when I run any rake task (being 'rake routes' or even 'rake about'), it returns 'stack level too deep'. This doesn't happen using Rails 3.0.20.

I've tracked down the Rails stack, requiring the libraries individually, and the error happens when I require ActiveRecord or ActionController.

I've tried different versions of Rails (from 3.1.0 until 3.2.11), different versions of rake (0.8.7, 0.9.2, 10.0.3), different versions of bundler (1.1.5 and 1.2.3) and the result is the same. I always use with 'bundle exec', and tried using binstubs ('bin/rake').

I'm still not using the asset pipeline, so no sass-rails issue.

I'm using RVM under OS X Mountain Lion and also reinstalled ruby 1.9.3-p374\. I've even used Ubuntu under Vagrant, same results.

Did anyone have the same problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:57:34.717

发现问题：在某些任务中，我们已经`ActionView::Helpers`包含（例如使用 number_to_currency），这就是导致堆栈级别太深错误的原因。

当您创建一个全新的应用程序和一个带有 .rake 文件的 .rake 文件时，也会发生这种情况`include ActionView::Helpers`。我将在 Ruby on Rails 上打开一个关于此的问题。

# c# - async/await for high performance server applications?

> ID：14739517
> 
> 赞同：14
> 
> 时间：2013-02-06T21:51:56.170
> 
> 标签：c#, sockets, asynchronous, async-await

the new async/await keywords in C# 5 look very promising but I read an article about the performance impact on those applications since the compiler will generate a quite complex state machine for async methods.

Async-programming using these keywords is so much easier but is it as good as say SocketAsyncEventArgs for Sockets ?

Second question: Are asynchronous IO methods like Stream.WriteAsync really asynchronous (Completion Ports on .Net or epoll/poll on Mono) or are these methods cheap wrappers for pushing a write call to a threadpool ?

Third question: Beside the SynchronizationContext of an UI application, is there a way to implement some kind of sinlge-threaded context ? Something like an event loop so that finished tasks continues on the main thread ? I discovered the Nito.AsyncEx library, but I'm not quite sure whether or not this is what i need.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-07T00:33:39.650

`async`本身性能相当不错。为此投入了大量的工作。

一般来说，在服务器端，您关心的是`async`I/O。我将忽略`async`受 CPU 限制的方法，因为`async`无论如何开销都会在噪音中消失。

异步 I/O 会增加每个请求的内存使用量，但会减少每个请求的线程使用量。所以你最终会赢（边缘病态的极端案例除外）。这适用于所有异步 I/O，包括`async`.

`await`设计有一个模式 - 不仅仅是`Task`类型 - 所以如果你需要尽可能多地挤出性能，你可以。

> 我阅读了一篇关于对这些应用程序的性能影响的文章，因为编译器将为异步方法生成一个非常复杂的状态机。

[您阅读](http://msdn.microsoft.com/en-us/magazine/hh456402.aspx)的 Stephen Toub的文章非常棒。我还推荐[Zen of Async 视频](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-829T)（也是 Stephen Toub 的）。

> 使用这些关键字进行异步编程要容易得多，但它和 SocketAsyncEventArgs for Sockets 一样好吗？

首先，了解它`SocketAsyncEventArgs`更具可扩展性，因为它减少了内存垃圾。使用`async`套接字的更简单的方法会产生更多的内存垃圾，但是由于`await`是基于模式的，因此您可以为[API](http://blogs.msdn.com/b/pfxteam/archive/2011/12/15/10248293.aspx)[定义自己的`async`兼容包装器`SocketAsyncEventArgs`](http://blogs.msdn.com/b/pfxteam/archive/2011/12/15/10248293.aspx)（如 Stephen Toub 的博客中所见......我在这里感觉到了一种模式；）。这使您可以挤出每一盎司的性能。

尽管从长远来看，设计横向扩展系统通常比扭曲代码以避免一些内存分配更好。恕我直言。

> 第二个问题：像 Stream.WriteAsync 这样的异步 IO 方法真的是异步的（.Net 上的 Completion Ports 或 Mono 上的 epoll/poll）或者这些方法是用于将写入调用推送到线程池的廉价包装器吗？

我不知道单声道。在 .NET 上，*大多数*异步 I/O 方法都基于完成端口。该类`Stream`是一个明显的例外。默认情况下`Stream`，基类将执行“廉价包装”，但允许派生类覆盖此行为。`Stream`来自网络通信的 s 总是覆盖它以提供真正的异步 I/O。**如果**流是为异步 I/O 显式构造的，则`Stream`处理文件的 s 只会覆盖它。

 **> 第三个问题：除了 UI 应用程序的 SynchronizationContext 之外，有没有办法实现某种单线程上下文？

ASP.NET 也有一个`SynchronizationContext`，所以如果你使用 ASP.NET 你已经设置好了。

如果您正在做自己的基于套接字的服务器（例如，Win32 服务），那么您*可以*使用`AsyncContext`我的 AsyncEx 库中的类型。但听起来这并不是你真正想要的。`AsyncContext`将在当前线程上创建一个单线程上下文。但是对于服务器应用程序的真正力量`async`来自扩展*请求*而不是*线程*。

考虑一下 ASP.NET是如何`SynchronizationContext`工作的：当每个*请求*进来时，它会抓取一个线程池线程并构造一个`SynchronizationContext`（针对那个*请求*）。当该请求有异步工作要做时，它会注册到`SynchronizationContext`并且运行该请求的线程返回到线程池。稍后，当异步工作完成时，它会抓取一个线程池线程（*任何*线程），在其上安装现有`SynchronizationContext`的，并继续处理该请求。当请求最终完成时，它`SynchronizationContext`被释放。

该过程的关键在于，当请求正在等待 ( `await`) 异步操作时，*没有*专用于该请求的线程。由于与*线程相比，**请求*是相当轻量级的，这使服务器能够更好地扩展。

 *如果您为每个请求提供了一个单线程`SynchronizationContext`，例如`AsyncContext`，这会将一个线程绑定到每个请求，即使它无事可做。这几乎不比同步多线程服务器好。

如果您想解决自己的发明，您可能会发现我的[MSDN 文章`SynchronizationContext`](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)`SynchronizationContext`很有用。在那篇文章中，我还介绍了异步方法如何“注册”和“安装”上下文；这主要是自动完成的`async void`，`await`因此您不必明确地进行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T22:16:57.510

1.  如果您在异步 IO 的上下文中使用它，那将是一个有争议的问题。花费在数据库操作、文件/网络 IO 等上的时间最多只有几毫秒。如果没有纳秒，那么最坏的开销`async`将是微秒。您需要小心的地方是当您有*大量*等待操作（如数千、数万或更多）并且这些操作*非常*快时。当这些异步操作代表 CPU 密集型工作时，使用的开销当然可能`await`至少是显而易见的。请注意，就人类的理解能力而言，为状态机生成的代码有些复杂，但状态机总体上往往表现得相当好。

2.  这些方法不仅仅是阻塞线程池线程的包装器，不。那将破坏`await`代表的目的。这些方法不会阻塞*任何*线程，而是依靠操作系统挂钩来完成任务。

3.  当然，您可以创建自己的`SynchronizationContext`，而不是完全依赖 UI 框架提供的现有框架。 [这](http://blogs.msdn.com/b/pfxteam/archive/2012/02/02/await-synchronizationcontext-and-console-apps-part-3.aspx)是一个很好的例子。使用这样的东西时要小心；它是完成正确任务的好工具，但是当您应该只异步执行所有操作时，它可能会被滥用以找到一种更具创造性的阻塞方式。***

# c++ - Are functions written in other languages subject to the rules of C++ regarding UB?

> ID：14739520
> 
> 赞同：2
> 
> 时间：2013-02-06T21:51:59.957
> 
> 标签：c++, undefined-behavior, language-lawyer

This question might make no sense, but I'll ask anyway with an example. Does this code exhibit undefined behaviour?

```
int main() {
    int a, b; // uninitialised

    memcpy(&a, &b, sizeof(int));
} 
```

I would usually say yes, because causing an lvalue-to-rvalue conversion of an uninitialised object is UB, something which must be done to copy the bytes of `b` to `a`.

However, `memcpy` may or may not be implemented in C++. If `memcpy` is written in assembly for example, then there are no such rules. Do programs that do things that would normally cause undefined behaviour still cause it if they outsource the offending operations to other languages with dissimilar rules?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:56:15.133

在您描述的情况下，`a`由 C++ 程序分配并传递给`memcpy()`. 这意味着该行为仍未定义。

但是，这并不意味着行为将是随机的或在运行之间发生变化。未定义意味着行为未定义。这意味着您不能依赖任何特定行为，包括程序中断。在 C 或 C++ 中调试的一些最困难的问题是编译器将未定义的构造转换为按预期工作的东西。然后，当您更改编译器标志时，事情突然停止工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T23:45:55.690

这有点像问，“在 C++ 中，过度烧焦牛排会导致未定义行为吗？”

所有未定义的行为意味着 C++（或 C 等）标准不保证在翻译和/或执行程序时会发生什么。毫不奇怪，C++ 标准对来自其他语言的函数没有太多说明。

唯一有点相关的报价来自 7.4

> `asm`声明是有条件支持的；它的含义是实现定义的。

从 7.5

> [在*链接规范*语法中...] 本国际标准规定了*字符串文字* `"C"`和`"C++"`. 使用除or之外的*字符串文字*是有条件支持的，具有实现定义的语义。`"C"``"C++"`

所以基本上，可能可以使用其他语言和 C++，但除了将这些部分粘合在一起所需的语法之外，本文档不会讨论其他语言。

从 C++ 标准的角度来看，来自其他语言的函数对 C++ 程序具有实现定义的影响。实现定义通常被认为比未定义行为更好，尽管不可移植。但是，使用 C++ 和 C 以外的东西并不一定可以移植到每个 C++ 实现中，这不足为奇。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:22:10.173

实现可以自由地扩展语言并将定义的行为赋予 C 未定义的行为。在读取具有自动存储持续时间（C 中的 UB）的未初始化对象的示例中，它可以说它的值是未指定的，但评估对象不会调用未定义的行为。

在 C89 和 C99 基本原理中，C 委员会说：

> 未定义的行为允许实现者不捕获某些难以诊断的程序错误。它还确定了可能符合语言扩展**的区域：实现者可以通过提供官方未定义行为的定义来扩充语言**。*

这样的程序将是该实现的有效程序，但仍将是无效的 C 程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T22:02:53.443

UB 不是特定于语言的“事物”。它是“你正在做的事情没有明确的行为”。所以“使用未初始化的内存是未定义的”的原因是C语言无法规定如果您读取尚未写入的内存会发生什么。正如另一个答案中所讨论的，如果内存未初始化，它可能有奇偶校验或 ECC 错误，因为奇偶校验位在第一次写入时设置正确。当内存包含“上电时出现的任何内容”时，它很可能具有错误的奇偶校验/ecc 值。

ECC 或奇偶校验错误通常会导致系统停止，因为它不会有坏内存！

因此，重要的不是您执行的代码是用什么语言编写的，而是“如果您从尚未初始化的内存中读取的行为可能会出错”。读取内存的行为，无论代码是用 C、C++、汇编程序、Pascal、Fortran 还是 LisP 编写的。

请记住，未定义不一定是“坏事发生”，只是“规范没有解释结果是什么，并且允许在 UB 中发生坏事”。除以零并不能保证让你的程序崩溃——它很可能会崩溃，但它也可能只会给你返回与你在另一边输入的值相同的值`/`——这将是完全有效的 UB。读取未初始化的内存可能会导致“你得到零”，或“你得到所有的”，或“你得到一些 1 和 0 的混合，没有人知道哪些”，或“可能导致系统因怀疑内存错误而重新启动”。当然，它也可能不是每次都一样——例如，有时奇偶校验位是“正确的”，有时不是。

澄清一下：我不是那些了解 C 或 C++ 标准每一部分的每一段的人。我以编写代码为生，并且我对处理器和连接硬件的方式有足够的了解，可以理解为什么规范说“当你......时这是未定义的行为”[它可能根本不使用这些词，因为标准没有' t use second person] - 在使用尚未初始化的变量的情况下，C 语言不会尝试强制执行任何特定行为，因为它可能会限制语言在特定平台上使用，因为平台可以'不保证该行为[如果您指定一种行为，迟早会有人依赖该行为，使其成为在每个平台上实现的必要部分]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T21:34:47.513

这指的是`http://blog.regehr.org/archives/213`我建议的。如果你想争论下面的定义，请到那边去。IMO，这是您所问的核心，大多数答案都试图传达。你可以不同意。

让我们考虑其中的＃1和＃2：

```
Type 1: Behavior is defined for all inputs 
Type 2: Behavior is defined for some inputs and undefined for others 
Type 3: Behavior is undefined for all inputs 
```

类型 1 表示该函数引发错误和异常以防止进入 UB。类型 2 意味着代码不会引发所有可能的错误和异常，并且可能会进入 UB。

关键是：您正在使用记录在案的库调用。让我们使用 strcpy 或 gets 的示例。众所周知，您可以提供这些库调用长字符串并溢出内存，从而导致 UB。有一些实现定义的约束可能会阻止这种情况，但你知道得更好。因此，您的问题实际上与标准无关，而是关于库调用文档的所有内容，以及它是类型 1 还是类型 2。strcpy、gets 和其他库函数显然是类型 2。所以它是对图书馆用户的警告。我是2型，被激怒可能会爆炸。

IMO，标准无法处理库附加组件，因为它们是实现定义的。所以答案是：它与 C++ 标准无关。

# matlab - integrating and solving for a variable

> ID：14739522
> 
> 赞同：0
> 
> 时间：2013-02-06T21:52:04.417
> 
> 标签：matlab, math, maple

I want to solve this probability density function f(v)=Av^2e^(-v^2(m/2KT)) integrate it and make it equal to 1 and solve it for A. In Maple:

what i have tried is:

```
> restart;
> pdf := v-> Av^2*exp(-(1/2)*mv^2/KT);
> assume(m > 0, K > 0, T > 0);
> g := solve(int(pdf(v), v = 0 .. infinity) = 1, A); 
```

but what i get as an answer is just `g:=`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:26:20.937

您不只是缺少`A`and `v^2`、 between `m`and`v^2`和 between `K`and之间的乘法符号`T`吗？

```
restart;

pdf := v-> A*v^2*exp(-(1/2)*m*v^2/K*T):

assume(m > 0, K > 0, T > 0);

g := solve(int(pdf(v), v = 0 .. infinity) = 1, A);

                        (3/2)       
                   /m T\       (1/2)
                   |---|      2     
                   \ K /            
                   -----------------
                          (1/2)     
                        Pi 
```

也许您正在使用 Maple 的 2D 数学输入模式，并认为您正在隐式地获得这些名称的乘法，但缺少名称之间的空格来表示这一点。

我不知道你是否想要括号`K*T`。

# .net - Couchbase 桶/视图限制 - 设计

> ID：14739531
> 
> 赞同：2
> 
> 时间：2013-02-06T21:52:35.450
> 
> 标签：.net, couchbase

我有一个关于 Couchbase 存储桶结构的快速问题。我正在运行 2.0 和 .net 客户端。我们即将推出一些东西，只想用“正确”的存储桶设计进行最终测试，但已经意识到这并不像我们想象的那么容易。

我们有什么：

基本上，我们目前在 1 个存储桶上有 11 个视图。然而，每个视图都被写入以不同的方式返回数据......

假设一个文档具有以下值（json doc）：Value1，Value2，Value3，... Value50

编写视图以便它发出多个结果，即：

`emit ([1, Value1, Value2, Value3], null)`

和

`emit ([2, Value10, Value20, Value30], null)`

然而，每个视图仅在 1 个“文档类型”上，即所有视图在开始时都有一个类似的 if 条件`if(doc.docType = "Blah")`

然后在 .net 代码中，当我们需要基于 value10、value20 和 value30 的文档时，通过让开始键和结束键以“2”开头，我们得到了我们想要的。

**问题一：**这个设计好吗？我见过很多这样的例子，但是我们在每个视图中都有 5-10 个不同的发射，所以 Couchbase 必须对其进行索引。与将每个人放在自己的视图中相比，这有什么性能问题吗？

其次，我们目前使用 1 个存储桶并收到超过 10 个视图的警告。所以我们要拆分桶。我们在想我们可以根据逻辑组将它分成大约 7-8 个不同的桶。我们意识到有 10 个桶的限制。

**问题2：**我在一个论坛的一篇文章中读到.net SDK一次只能连接到1个桶......这似乎是错误的。我的意思是关于 SO 的其他问题，即像[这里](https://stackoverflow.com/questions/10554175/couchbase-multiple-buckets-in-net-app-config)他们使用了多个存储桶。我们将在 global.asax 中为每个存储桶“打开”连接，然后通过应用程序使用它。即`client1.getview...`然后`client2.getview...`这意味着 1 个页面 (.aspx) 将从 1 个存储桶进行 1 次调用，并从另一个存储桶调用另一个来填充页面。我快速尝试了一下它，它似乎工作......但只是想知道这是否是使用 CB 的可接受方式。我对将与 1 个逻辑应用程序相关的所有文档放在一个存储桶中的最佳实践建议感到困惑......：SI 会为每个文档制作“几乎”1 个存储桶（这样我们最多可以对其进行 10 次查看） ) 然后当我们达到 10 个桶的限制时，刚刚启动了一个新集群（注意：我们处于独特的位置，我们有很多未使用的硬盘，即一台服务器有 64gb 未使用/未分配的 ram，资源不是一个特别的问题。 ...性能是！）

我希望我的问题是有意义的。如果没有请告诉我

干杯

罗宾

注意：.net 4.0，Couchbase 2.0。我已经阅读了这两本手册，但仍不清楚上述内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:30:37.570

关于您的意见设计。

你的视图的全局设计是好的，这意味着有一个单一的视图来测试文档的“类型/值”并根据这个值发出不同的索引。

你说你有 11 个视图，它们是如何组织的？多少设计文件？意见/设计文件？

我问这个是因为设计文档中的所有视图都是同时更新的。看看“查看设计最佳实践”一章：

> [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-bestpractice.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-bestpractice.html)

你的数据集/集群也很大吗？

# jquery - 将纯文本转换为 HTML

> ID：14739537
> 
> 赞同：5
> 
> 时间：2013-02-06T21:52:57.790
> 
> 标签：jquery, text

我有一个脚本，在某个时候我通过 Ajax 调用获取 HTML（数据）。我必须将此 HTML 转换为纯文本，如下所示：

```
$("#div").text(data); 
```

我现在想扭转这种局面并再次制作文本 HTML。我有一个简单的 Jquery 方法来做到这一点吗？我试过了：

```
$("#div").text(data).end().html(); 
```

没运气。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T21:56:38.527

您需要保留原始响应才能执行此操作...

```
$("#hiddendiv").html(data);
$("#div").text(data); 
```

然后你可以把它拿回来...

```
var html = $("#hiddendiv").html(); 
```

**根据评论更新...**

您可以在显示之前删除该元素...

```
var html = $(data);
$('#cookiediv', html).hide();
$('#div').html(html); 
```

cookie 消息所在的`id="cookiediv"`位置 - 您可能需要调整选择器以获取此 div，但几乎可以肯定可以抓取它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T21:55:44.873

您在问题中使用的 html 函数也可以带参数。在这里阅读所有相关信息：http: [//api.jquery.com/html](http://api.jquery.com/html)

基本上你需要做的就是

```
var div = $(yourdiv);
div.html(div.text()) 
```

例如在这个例子中：http: [//jsfiddle.net/273Jx/](http://jsfiddle.net/273Jx/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-23T16:10:35.053

```
$.fn.toHtml=function(){
   return $(this).html($(this).text())
} 
```

然后

```
$('#div').toHtml() 
```

[http://jsfiddle.net/abdennour/fcn9d/](http://jsfiddle.net/abdennour/fcn9d/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T22:01:15.657

如果您的意思是获取文本并使其工作为 HTML。**[工作演示](http://jsfiddle.net/BG8Uh/1)**

```
<div id="div"></div> 
```

jQuery：

```
var data='<a href="blah">blah</a>';
$('#div').text(data);
alert('ready...'); // just making you see the html
$('#div').html($('#div').text()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T21:56:18.240

尝试将其直接传递给 jQuery 本身（[http://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)）。它将获取原始 HTML 字符串并尝试将其解析为新的 DOM 片段。

# matlab - 在 Matlab 的匿名函数中使用 for/while 循环

> ID：14739538
> 
> 赞同：7
> 
> 时间：2013-02-06T21:52:58.707
> 
> 标签：matlab, loops, anonymous-function

我发现匿名函数非常有用，但很多时候我需要使用循环才能使函数工作。例如：

```
while val<tolerance
     .....
end 
```

我知道我可以将函数保存在单独的文件中，有时我可以对代码进行矢量化，然后匿名函数就可以工作，但在某些情况下，很难找到 for 循环的替代方法。

Matlab 文档没有讨论它或说它是不可能的。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T03:10:30.790

Mathworks 文件交换上的[函数式编程](http://www.mathworks.com/matlabcentral/fileexchange/39735-functional-programming-constructs)结构正是您所需要的。这些函数中的每一个都设计为在匿名函数中使用。*在Loren on the Art of MATLAB*博客的 3 部分系列中详细讨论了它们：[第 1](http://blogs.mathworks.com/loren/2013/01/10/introduction-to-functional-programming-with-anonymous-functions-part-1/)部分、 [第 2](http://blogs.mathworks.com/loren/2013/01/24/introduction-to-functional-programming-with-anonymous-functions-part-2/)部分和[第 3 部分](http://blogs.mathworks.com/loren/2013/02/07/introduction-to-functional-programming-with-anonymous-functions-part-3/)。

特别是[第 3 部分](http://blogs.mathworks.com/loren/2013/02/07/introduction-to-functional-programming-with-anonymous-functions-part-3/)讨论了将循环实现为函数。为了完整起见，我将借用[函数式编程 FEX 提交](http://www.mathworks.com/matlabcentral/fileexchange/39735-functional-programming-constructs)的一些代码来演示如何在 m 代码中在匿名函数中使用 while 循环。首先，定义一个`loop`函数：

```
 function x = loop(x, continueFcn, f)
   % Inputs:
   % x           - Initial state (can be cell array of arguments to f)
   % continueFcn - Continue function, returns true iff the loop should go on
   % f           - Function of the state (x) to run every iteration
       while ~continueFcn(x{:})
           x = f(x{:});
       end
   end 
```

例如，提供`val`一些初始值`val0`。此外，假设这`StuffDoneEachWhileLoop`是一个定义变量`val`应如何在每个 while 循环中更新的函数。然后：

```
myFunc = @(n) loop(val0, ...                    % Initialize state
                  @(val) val < tolerance, ...   % OP condition
                  @(val) StuffDoneEachWhileLoop(val));    % 
```

上述想法的各种扩展是可能的。有关详细信息，请参阅 Tucker McClure 的[函数式编程 FEX 提交](http://www.mathworks.com/matlabcentral/fileexchange/39735-functional-programming-constructs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:55:54.993

如果您的主要烦恼是每次您想使用一个简单的函数时都必须创建一个新的 m 文件，那么这对您来说可能是一个简单的解决方案。

如果您正在编写一个函数，并且只想在此范围内使用另一个函数，则无需创建新的 m 文件。相反，您可以只定义一个在本地可用的第二个函数。

例如检查这个：

```
function [m,s] = stat2(x)
n = length(x);
m = avg(x,n);
s = sqrt(sum((x-m).^2/n));
end

function m = avg(x,n)
m = sum(x)/n;
end 
```

[http://www.mathworks.nl/help/matlab/ref/function.html;jsessionid=903a612c197e288e7cf631d7a434](http://www.mathworks.nl/help/matlab/ref/function.html;jsessionid=903a612c197e288e7cf631d7a434)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:36:27.920

Matlab 的文档实际上确实讨论了它，但是解释可能被认为有些模糊。从[匿名函数文档](http://www.mathworks.com/help/matlab/matlab_prog/anonymous-functions.html)：

> 就像标准函数一样，匿名函数可以接受输入并返回输出。但是，它们只能包含*一个可执行语句*。

我在“可执行语句”下理解的实际上是一个获得一些价值的表达式。

据我所知，Matlab 中的循环没有值，因此不能用作匿名函数内的单个可执行语句。此外，仅*单个*语句的约束意味着您不能使用循环进行某些计算，然后在匿名函数内使用第二条语句返回某个值。

# php - 我想使用数组的键为数据库表中的列分配 NULL 值...如何？

> ID：14739543
> 
> 赞同：2
> 
> 时间：2013-02-06T21:53:21.980
> 
> 标签：php, mysql, arrays

在以下代码中，我收到以下错误：

无法获取 mysqli_stmt

```
// assign
$title = 'this is the title';
$caption = 'description goes here...';
$filename = '43534b34.jpg';

$thumb = array();
$thumb['basename'] = null;
$thumb['width'] = 0;
$thumb['height'] = 0;

// insert new record in db
$sql = 'INSERT INTO image (title, caption, filename, thumb_filename, thumb_width, thumb_height) VALUES(?, ?, ?, ?, ?, ?)';

$stmt = $conn->stmt_init();

$stmt->prepare($sql);
$stmt->bind_param('ssssii', $title, $caption, $filename, $thumb['basename'], $thumb['width'], $thumb['height']);
$stmt->execute(); 
```

如果我替换数组中的键 `$thumb['basename'] = 'test';`，那么一切正常！

如何将 NULL 值分配给数据库表中的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:06:51.260

尝试

```
$stmt->bind_param('ssssii', $title, $caption, $filename, empty($thumb['basename']) ? NULL : $thumb['basename'] , $thumb['width'], $thumb['height']); 
```

# ruby - elasticsearch中的数组字段仅返回匹配元素

> ID：14739547
> 
> 赞同：8
> 
> 时间：2013-02-06T21:53:53.167
> 
> 标签：ruby, elasticsearch, tire

我在弹性搜索（轮胎）中有一个索引，其中包含一个数组字段和用于 ngram 的自定义分析器，min_ngram = 1 和 max_ngram = 10。

字段示例

```
field1: [foo, bar, bof] 
```

我构造了一个值为 field1 'f' 的查询，它返回在 field1 中的一个值中包含 'f' 的文档。

问题：是否可以只返回数组中的匹配值，例如在 field1 和查询 'f' 的情况下，只有 'foo' 和 'bof' 将被返回并且 'bar' 将被省略，例如 field1: [foo, bof ]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-03T07:54:26.853

您可以在弹性搜索查询中应用荧光笔。在响应中，您将获得仅包含匹配值的额外突出显示字段。

# java - getClass().getClassLoader().getResource() 和 getClass.getResource() 的区别？

> ID：14739550
> 
> 赞同：63
> 
> 时间：2013-02-06T21:54:07.163
> 
> 标签：java

`getClass().getClassLoader().getResource()`和 和有什么不一样`getClass.getResource()`？

从资源中检索文件时，在什么情况下应该使用哪一个？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-02-06T21:57:31.783

第二个调用第一个。javadoc中描述了差异。

第一个采用不以 a`/`开头的路径，并且始终从类路径的根目录开始。

第二个采用可以以 . 开头的路径`/`。如果是这样，它将从类路径的根目录开始。如果不是，它从调用该方法的类的包开始。

所以`getClass().getClassLoader().getResource("foo/bar.txt")`等价于`getClass().getResource("/foo/bar.txt")`。

并且，假设 getClass() 返回包中的类`foo`，`getClass().getResource("bar.txt")`相当于`getClass().getClassLoader().getResource("foo/bar.txt")`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-06T22:32:29.427

> 我应该在什么情况下使用哪一个？

两者都不。你应该打电话`Thread.currentThread().getContextClassLoader()`。

这样做的好处是不需要根据您是从静态方法还是实例方法调用而进行更改。

And more important, it will properly handle classloader delegation inside a container. If you don't use it, you might find that an "application" resource isn't found because the class that's loading it was loaded by a classloader higher up the delegation hierarchy.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-06T21:56:58.150

基本上，`Class.getResource()`允许您指定相对于类的包的路径，而`ClassLoader.getResource()`始终是“绝对”路径。

所以：

```
foo.bar.Baz.class.getResource("data.txt") 
```

相当于：

```
some.Other.class.getResource("/foo/bar/data.txt") 
```

它们都相当于：

```
some.Other.class.getClassLoader().getResource("foo/bar/data.txt") 
```

（假设`some.Other`和`foo.bar.Baz`由同一个类加载器加载，当然。）

# html - Excel VBA打开google的第一个搜索结果页面

> ID：14739552
> 
> 赞同：3
> 
> 时间：2013-02-06T21:54:08.183
> 
> 标签：html, vba, excel, html-parsing, msxml

我必须使用 excel 宏打开谷歌搜索页面。在我在 excel 中提供搜索参数后，我能够成功打开谷歌搜索页面。但是，我的任务是打开第一个返回的搜索结果页面并在该页面中进行一些数据提取。我使用了下面的代码。

假设如果我搜索“ **Sachin Tendulkar wiki** ”，我应该能够打开搜索结果中的第一页。到目前为止，我的代码如下。

```
Dim ie As InternetExplorer
Dim RegEx As RegExp, RegMatch As MatchCollection
Dim MyStr As String
Dim pDisp As Object
Set ie = New InternetExplorer
Set RegEx = New RegExp
Dim iedoc As Object

'Search google for "something"
ie.Navigate "http://www.google.com.au/search?hl=en&q=sachin+tendulkar+wiki&meta="

'Loop unitl ie page is fully loaded
Do Until ie.ReadyState = READYSTATE_COMPLETE
Loop

MyStr = ie.Document.body.innertext
Set RegMatch = RegEx.Execute(MyStr)

'If a match to our RegExp searchstring is found then launch this page
If RegMatch.Count > 0 Then
    ie.Navigate RegMatch(0)
    Do Until ie.ReadyState = READYSTATE_COMPLETE
    Loop
         MsgBox "Loaded"
         'show internet explorer
    ie.Visible = True
    'Private Sub ie_DocumentComplete(ByVal pDisp As Object, URL As Variant)
    Set iedoc = ie.Application.Document
    'iedoc.getElementById("divid").Value = "poS0"
    'MsgBox iedoc

    'ie.Navigate iedoc.getelementsbytagname("ol")(0).Children(0).getelementsbytagname("a")(0).href
    ie.Navigate iedoc.getelementsbyclassname("divid")("poS0").href
    Else
    MsgBox "No linkedin profile found"
End If

Set RegEx = Nothing
Set ie = Nothing 
```

我在谷歌搜索页面中查看了页面源。我有一个特定的 div id = "pos0" 这是第一个搜索结果的 id。我必须让 IE 导航到 div id = "pos0" 的页面。我无法在 VBA 中完成这件事。有人可以帮我吗？

谢谢和问候， 拉梅什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:55:51.773

你有几个问题。首先访问文档对象它`ie.Document`不是`ie.Application.Document`。我已经更新了您的代码，以显示如何使用子字符串快速找到第一个 url。

```
Dim ie As InternetExplorer
Dim RegEx As RegExp, RegMatch As MatchCollection
Dim MyStr As String
Dim pDisp As Object
Set ie = New InternetExplorer
Set RegEx = New RegExp
Dim iedoc As Object

'Search google for "something"
ie.Navigate "http://www.google.com.au/search?hl=en&q=sachin+tendulkar+wiki&meta="

'Loop unitl ie page is fully loaded
Do Until ie.ReadyState = READYSTATE_COMPLETE
Loop

MyStr = ie.Document.body.innertext
Set RegMatch = RegEx.Execute(MyStr)

'If a match to our RegExp searchstring is found then launch this page
If RegMatch.Count > 0 Then
    ie.Navigate RegMatch(0)
    Do Until ie.ReadyState = READYSTATE_COMPLETE
    Loop
         MsgBox "Loaded"
         'show internet explorer
    ie.Visible = True
    'Private Sub ie_DocumentComplete(ByVal pDisp As Object, URL As Variant)
    '****************************************
    'EDITS
    '****************************************
    Set iedoc = ie.Document

    'create a variable to hold the text
    Dim extractedHTML As String
    'start and end points for the substring
    Dim iStart, iEnd As Integer
    'get the element with ID of search - this is where the results start
    extractedHTML = iedoc.getElementById("search").innerHTML
    'find the first href as this will be the first link, add 1 to encompass the quote
    iStart = InStr(1, extractedHTML, "href=", vbTextCompare) + Len("href=") + 1
    'locate the next quote as this will be the end of the href
    iEnd = InStr(iStart, extractedHTML, Chr(34), vbTextCompare)
    'extract the text
    extractedHTML = Mid(extractedHTML, iStart, iEnd - iStart)
    'go to the URL
    ie.Navigate extractedHTML

    '****************************************
    'End EDITS
    '****************************************
    Else
    MsgBox "No linkedin profile found"
End If

Set RegEx = Nothing
Set ie = Nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-06T04:14:08.380

您可以考虑使用 xmlHTTP 对象而不是使用 IE。
HTTP 请求更简单，更快

下面是示例代码

```
Sub xmlHttp()

    Dim URl As String, lastRow As Long
    Dim xmlHttp As Object, html As Object, objResultDiv As Object, objH3 As Object, link As Object

    lastRow = Range("A" & Rows.Count).End(xlUp).Row

    For i = 2 To lastRow

        URl = "https://www.google.co.in/search?q=" & Cells(i, 1)

        Set xmlHttp = CreateObject("MSXML2.XMLHTTP")
        xmlHttp.Open "GET", URl, False
        xmlHttp.setRequestHeader "Content-Type", "text/xml"
        xmlHttp.send

        Set html = CreateObject("htmlfile")
        html.body.innerHTML = xmlHttp.ResponseText
        Set objResultDiv = html.getelementbyid("rso")
        Set objH3 = objResultDiv.getelementsbytagname("H3")(0)
        Set link = objH3.getelementsbytagname("a")(0)

        str_text = Replace(link.innerHTML, "<EM>", "")
        str_text = Replace(str_text, "</EM>", "")

        Cells(i, 2) = str_text
        Cells(i, 3) = link.href
    Next
End Sub 
```

![在此处输入图像描述](../Images/1a5f099ad969f3b82ca4c9d55df53baa.png)

HTH
**桑托什**

# sql - 选择前 2 个逗号分隔 w/SQL

> ID：14739553
> 
> 赞同：0
> 
> 时间：2013-02-06T21:54:08.310
> 
> 标签：sql, sql-server, tsql

我正在尝试选择前 2 条记录并将它们放在以逗号分隔的一列中。

这是我到目前为止所拥有的，但我无法让它工作。

```
UPDATE #Temp 
SET TopTwoInactiveDDSRenewalFeeID = ( STUFF (
SELECT TOP 2 ',' + I.InvoiceID 
FROM DB..rInvoice I
WHERE I.rUltimateEntityID = entID
AND I.ObjectID = 18
AND I.ObjectTypeIDRAW = 1741
AND I.rParentObjectID = 2
AND I.rParentPK = LicID
FOR XML PATH ('')),1,2,'')

) 
```

> *消息 156，级别 15，状态 1，第 3 行
> 关键字“SELECT”附近的语法不正确。
> 消息 102，级别 15，状态 1，第 10 行
> ')' 附近的语法不正确。*

我使用这篇文章作为参考，但它对我不起作用：[以逗号分隔在一列中显示前 3 条记录](https://stackoverflow.com/questions/3368204/display-the-top-3-records-in-a-comma-separated-in-one-column)

这个不知道怎么写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:10:42.753

我会尝试更改以下行。逗号后有空格是 STUFF 正常工作所必需的。如果您可以将测试数据加载到 sqlfiddle [http://sqlfiddle.com/](http://sqlfiddle.com/)中会更好。

```
SELECT TOP 2 ',' + I.InvoiceID 
```

至

```
SELECT TOP 2 ', ' + I.InvoiceID 
```

这是给你的另一个例子，

```
IF OBJECT_ID('TempDB..#Values') IS NOT NULL
BEGIN
DROP TABLE #Values
END

IF OBJECT_ID('TempDB..#Temp') IS NOT NULL
BEGIN
DROP TABLE #Temp
END

CREATE TABLE #Temp
(
ID                  INT
,CommaDelimited     VARCHAR(500)
)
INSERT INTO #Temp
(
ID
)
SELECT 1

CREATE TABLE #Values
(
Value               CHAR(1)
)

INSERT INTO #Values
(
Value
)
SELECT '1'
UNION ALL SELECT '2'
UNION ALL SELECT '3'
UNION ALL SELECT '4'

UPDATE #Temp 
SET CommaDelimited = STUFF((SELECT TOP 2 ', '+Value FROM #Values FOR XML PATH('')),1,2,'')

SELECT * FROM #Temp 
```

# android - Android 开发：跨活动存储数据

> ID：14739554
> 
> 赞同：0
> 
> 时间：2013-02-06T21:54:10.643
> 
> 标签：android, multithreading

如前所述，我刚刚开始进行 android 开发，现在已经开始从一个活动转移到另一个活动。我想知道存储数据的最佳方式是什么，以便在需要时用于各种活动。

来自 Web 开发背景，我认为这有点像将数据存储在会话或 cookie 中。存在于后台并在需要时可以访问的东西。（我知道您也可以使用数据库，但如果可能的话，我想避免为这个特定的应用程序使用数据库）

为了争论，假设我想要一个员工对象的链表，它在多个活动中是持久的。如果我在工作线程中创建了所述链接列表，那么该线程是否会在应用程序的整个生命周期中存在，从而允许数据随时可供 UI 线程使用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:07:13.247

您的内容应该可以通过 ContentProviders 访问，它可以从 Web 或数据库中检索数据。应用程序中的所有活动和片段都可以在需要时向内容提供者请求数据。

在您拥有员工列表的示例中，员工应该位于“员工”数据库表中，并且您的提供者应该返回包含基于您放在一起的 SQL 查询的响应的[Cursor对象。](http://developer.android.com/reference/android/database/Cursor.html)

对于数据库访问，请参阅[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

对于内容提供者，请参阅[ContentProviders](http://developer.android.com/guide/topics/providers/content-providers.html)

这不是一个简单的主题，有很多东西要学，但是如果你按照自己的方式学习它，它会极大地提高你的应用程序的质量。[有关此主题的教程](http://developer.android.com/guide/topics/providers/content-providers.html)，请参阅此链接。

我也很乐意帮助解决任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:12:12.393

要存储数据，您可以将`SharedPreferences`其用于小型数据存储，例如设置、用于大型关系信息的数据库，甚至是文件。在您的情况下，这取决于数据大小。

但在我看来，您的问题更多是关于如何从不同的活动中访问这些数据，而不是存储它。

我建议你看看[Application](http://developer.android.com/reference/android/app/Application.html)对象。这通常是一个单例，只要应用程序存在，它就会保留在内存中。因此，您可以加载数据并从任何您想要的地方检索它。如果您想从不同的线程访问，请记住防止并发问题，就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:18:55.833

如您所见，您有几个选项，但正如您特别说的那样，您希望在应用程序的生命周期内访问某些东西，您应该参考文档所说的 Application 类

> 需要维护全局应用程序状态的基类

您需要在清单中指定扩展 Application 的类的名称，然后在应用程序进程启动时将其实例化，并且您可以确保只要您的应用程序处于活动状态，它就在那里。

您可以在此处参考文档

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

例如，您需要创建一个扩展应用程序的类，例如：-

```
public class MyApplication extends Application {
    ...
} 
```

并编辑您的清单以包含引用上述类的标签：-

```
<application ... android:name="com.fullpat.to.MyApplication"> 
```

谢谢，

瑞安

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T22:00:46.313

共享偏好是常见的做法。尽管根据您的列表，它可能并不那么简单。如果您可以将其调整为 StringSet，那么您就可以在没有任何对象数据对流的情况下共享首选项。

实际上，另一个想法是将您的列表作为应用程序的应用程序类的对象。您的应用程序中的活动可以访问应用程序类，它通常用于保存“全局变量”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T22:02:10.443

我曾经像过去一样传递数据`Intent Extra`，但后来我发现 ReplicaIsland [Rep](http://code.google.com/p/replicaisland/)的源代码中使用了一个很好的设计模式。

这个想法是使用一个类作为 SystemRegistry 并将您的数据作为静态对象。

它如下所示：

```
public class SystemRegistry {
         public static LinkedList<Object> myList;

 } 
```

以及来自您的应用程序和活动的任何部分。你只要打电话

```
SystemRegistry.myList 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T22:06:32.173

我认为，您可以为此使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)，它的 api 非常简单。此外，您可以清理应用程序关闭或其他方面的数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T22:10:44.223

对于仅保留对象列表的特定需求，您可以扩展应用程序类并将此列表“存储”在那里。在其他情况下，在活动、内容提供者和当然 sqlite 数据库之间的意图中使用 Extras 似乎“更干净”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-06T22:11:27.560

在面向对象的开发视图中，我会说您想要的非常简单：

在您的 MainActivity（在应用程序生命周期开始时启动的活动）上，您有 LinkedList

```
public class MainActivity extends Application {    

  private LinkedList<employee> employees = new LinkedList<employee>();

  public LinkedList getEmployees() {
    return this.employees;
  } 
```

在您的第二个活动中：

```
public class SeconActivity extends Activity {

  private MainActivity         app;
  private LinkedList<employee> emp;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.app = (MainActivity) getApplication();
    this.emp = app.getEmployees(); 
```

对于应用程序中的少量数据，您可以使用[SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences.html)类。

# python - 逻辑方程代码

> ID：14739555
> 
> 赞同：4
> 
> 时间：2013-02-06T21:54:15.490
> 
> 标签：python, numpy, pythonxy

我正在尝试理解以下逻辑地图图像的代码，但我被困在

```
ys = [ ]
rs = numpy.linspace(0, 4, 400) 
```

是什么`rs`意思？什么`i in range()`意思？我将衷心感谢您的帮助！

```
def f(x, r):
    """Discrete logistic equation with parameter r"""
    return r*x*(1-x)

if __name__ == '__main__':
    # initial condition for x
    ys = []
    rs = numpy.linspace(0, 4, 400)
    for r in rs:
        x = 0.1
        for i in range(500):
            x = f(x, r)

        for i in range(50):
            x = f(x, r)
            ys.append([r, x])

    ys = numpy.array(ys)
    pylab.plot(ys[:,0], ys[:,1], '.')
    pylab.show() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:01:38.127

```
rs = numpy.linspace(0, 4, 400) 
```

创建一个 numpy 数组，其中 400 个值在 0 和 4 之间等距（包括端点）。

以下是一些较小的示例：

```
In [17]: import numpy as np

In [18]: np.linspace(0, 4, 5)
Out[18]: array([ 0.,  1.,  2.,  3.,  4.])

In [19]: np.linspace(0, 4, 10)
Out[19]: 
array([ 0\.        ,  0.44444444,  0.88888889,  1.33333333,  1.77777778,
        2.22222222,  2.66666667,  3.11111111,  3.55555556,  4\.        ]) 
```

* * *

`for i in range(50)`在[Python 教程](http://docs.python.org/2/tutorial/controlflow.html#for-statements)（第 4.2 和 4.3 节）中进行了解释。

* * *

这里有一些注释可以帮助解释代码。

```
import numpy as np
import matplotlib.pyplot as plt
import pylab
import numpy

def f(x, r):
    """Discrete logistic equation with parameter r"""
    return r*x*(1-x)

if __name__ == '__main__':
    # initial condition for x
    ys = []
    rs = numpy.linspace(0, 4, 400)

    # Loop through `rs`. `r` is assigned the values in `rs` one at a time. 
    for r in rs:
        x = 0.1
        # Repeat this loop 500 times. 
        # i is just a dummy variable since it is not used inside the for-loop.
        for i in range(500):
            # Evaluate f at (x, r). The return value is assigned to x.
            # x is then fed back into f(x, r). 
            # This makes x jump around 500 times according to the logistic equation.
            # r remains fixed.
            x = f(x, r)

        # Do this 50 times
        for i in range(50):
            # Again make the x jump around according to the logistic equation
            x = f(x, r)
            # Save the point (r, x) in the list ys
            ys.append([r, x])

    # ys is a list of lists.
    # You can also think of ys as a list of [r, x] point.
    # This converts the list of lists into a 2D numpy array.
    ys = numpy.array(ys)

    # ys[:,0] is a 1D array of r values
    # ys[:, 1] is a 1D array of x values
    # This draws a scatter plot of (r, x) points.
    pylab.plot(ys[:,0], ys[:,1], '.')
    pylab.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:08:24.423

```
for i in range(500) 
```

意味着循环的内容将被评估 500 次（`i`将采用从 0 到 499 的整数值）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-03T10:53:37.517

数组的索引也存在语法错误`ys`。应该是`ys[:][0]`和`ys[:][1]`。Python 的数组语法来自 C 和 Java。

# jquery - Jquery - 将控件更改为标签（仅查看表单）

> ID：14739558
> 
> 赞同：0
> 
> 时间：2013-02-06T21:54:30.227
> 
> 标签：jquery, asp.net, asp.net-mvc, plugins, asp.net-mvc-4

我们的客户需要一个仅查看表单（将控件设为只读不是可接受的解决方案：-（），当用户具有只读访问权限时，它将文本框/下拉列表/列表框（逗号分隔值）的值显示为标签表单。是否有一个 Jquery 插件可以做到这一点？我不想创建一组单独的部分视图来完成这个。

非常感谢这方面的任何帮助。

谢谢，

拉贾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:12:57.187

是的你可以。我不建议这样做。

用一个 CSS 类声明你的助手，这样你就可以用一个 JQuery 选择器来获取它们

```
@Html.TextBox("txtName", "20", new { @class = "cssChange" }) 
```

使用 JQuery 将其形式更改为标签

```
$( ".cssChange" ).replaceWith( function() {
    return "<input type=\"label\" value=\"" + $( this ).html() + "\" />";
}); 
```

我的代码没有*经过测试*。这纯粹是有指导意义的。

我建议反对它。相反，我会推荐另一个带有标签和切换的 div。但是这个选项是可用的。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:52:26.853

```
 public static MvcHtmlString EditorOrDisplayFor<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression,
        bool canEdit, int boxWidth = 100)
    {
        var sb = new StringBuilder();

        if (canEdit)
        {
            var editor = htmlHelper.TextBoxFor(expression, new { style = "width: " + boxWidth + "px;" });
            sb.AppendFormat("<div class=\"TextEditor\">{0}</div>", editor);
        }
        else
        {
            var lbl = htmlHelper.LabelFor(expression);
            var hid = htmlHelper.HiddenFor(expression);
            sb.AppendFormat("<div class=\"CanNotEdit\">{0}{1}</div>", lbl, hid);
        }
        return MvcHtmlString.Create(sb.ToString());
    } 
```

# apache - mod_rewrite 规则层次结构

> ID：14739562
> 
> 赞同：0
> 
> 时间：2013-02-06T21:54:51.707
> 
> 标签：apache, .htaccess, mod-rewrite

我有一行代码使用 mod_rewrite 从数据库中提取结果：

`example.com/anytext/itemid` 使用以下 URL：`example.com/item.php?id=itemid`

一个简单的重写。但是，我想制定一个优于它的规则。跟随以了解我的意思：

.htaccess 文件示例：

```
RewriteRule ^products/[^/]+/(.*)$    products/item.php?id=$1 [L] 
```

此规则告诉`example.com/products/anytext/itemid` 使用`item.php`“/”之后使用 URL 的最后一部分显示，即项目 ID。

但是，我希望一些 URL 被重定向而不是重写。例如：

`products/green-dress/4023`成为：

`products/green-dress-with-stain/4023` 没有重写规则！

现在，我在 .htaccess 中尝试了一个简单的 301 重定向，但它以某种方式干扰了重写规则。

而不是去

`products/green-dress-with-stain/4023`它去：

`products/green-dress-with-stain4023?id=4023`

看看最后的 URL 是如何获取变量的？诡异的！

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:57:58.710

文件中的规则按`.htaccess`顺序执行，因此如果您需要一个规则优先于其他规则，只需将其放在文件的首位即可。

# windows-phone-7 - windows phone Virtualized Canvas 用于更高效和灵活的列表框，这是一种正确的方法吗？

> ID：14739563
> 
> 赞同：0
> 
> 时间：2013-02-06T21:54:55.573
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

背景：我正在开发应用程序。其中一页是新闻提要。新闻中的数据是动态的：它可能包含多个文本块、许多图像，并且根据内容为每个新闻项计算布局。

由于不可能（我不知道如何）使其与 ListBox/DataTemplate/Binding 一起使用，我采用较低级别的方法并尝试实现虚拟化画布： [https ://dl.dropbox.com/u/16063542/ MyVirtualizingPanel.cs](https://dl.dropbox.com/u/16063542/MyVirtualizingPanel.cs)

想法很简单：

每个包含的项目都实现：

公共接口 IVirtualizable { void ChangeState(VirtualizableState newState);

```
 VirtualizableState CurrentState { get; }

    double FixedHeight { get; }

    FrameworkElement View { get; }

    Thickness Margin { get; }
} 
```

-panel 应放入 ScrollViewer 并初始化：

```
public void InitializeWithScrollViewer(ScrollViewer _scrollViewer)
    {
        _listScrollViewer = _scrollViewer;
        EnsureBoundToScrollViewer();
    }

    protected void EnsureBoundToScrollViewer()
    {
        Binding binding = new Binding();
        binding.Source = _listScrollViewer;
        binding.Path = new PropertyPath("VerticalOffset");
        binding.Mode = BindingMode.OneWay;
        this.SetBinding(ListVerticalOffsetProperty, binding);

    } 
```

Panel 实现 AddItems 方法：

公共无效AddItems（IEnumerable _itemsToBeAdded）{

```
 double topMargin = 0;

        foreach (var itemToBeAdded in _itemsToBeAdded)
        {

            itemToBeAdded.View.Margin = new Thickness(0, itemToBeAdded.Margin.Top + topMargin, 0, 0);

            _virtualizableItems.Add(itemToBeAdded);

            topMargin += itemHeightIncludingMargin;
        }

        Height = topMargin;

    } 
```

然后根据滚动位置的变化加载和卸载项目：

private void LoadItemsInSegment(Segment segment, VirtualizableState desiredState) { for (int i = segment.LowerBound; i <= segment.UpperBound; i++) { var item = _virtualizableItems[i];

```
 item.ChangeState(desiredState);

            if (!Children.Contains(item.View))
            {
                Children.Add(item.View);
            }
        }
    } 
```

private void LoadItemsInSegment(Segment segment, VirtualizableState desiredState) { for (int i = segment.LowerBound; i <= segment.UpperBound; i++) { var item = _virtualizableItems[i];

```
 item.ChangeState(desiredState);

            if (!Children.Contains(item.View))
            {
                Children.Add(item.View);
            }
        }
    }

 private void UnloadItemsInSegment(Segment segment)
    {
        for (int i = segment.LowerBound; i <= segment.UpperBound; i++)
        {
            var item = _virtualizableItems[i];

            Children.Remove(item.View);

            item.ChangeState(VirtualizableState.Unloaded);

        }
    } 
```

或多或少，它有效。但是，随着布局变得更加复杂并获得多个图像，滚动性能变得有些差。除此之外，在渲染时有时会出现明显的问题：突然（一帧）元素出现错位，看起来像“眨眼”，不知道如何解释。无论如何，我的问题是：这种方法最初是否有缺陷？还是我应该继续努力让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:28:10.647

我认为您的虚拟化面板不会虚拟化任何东西。

在上下文中，虚拟化按以下方式工作。您需要显示 10000 个数据项。屏幕仅适合 15 个 UI 元素。系统提供的 VirtualizingStackPanel 创建约 17 个 UI 元素，当用户滚动浏览您的列表时重用这些元素。当 UI 元素离开屏幕时，面板会“释放” UI 元素（如果需要，您可以进行干预，请参阅`ClearContainerForItemOverride`方法）。并为以后的重用做准备（同样，您可以根据需要进行干预，请参阅`PrepareContainerForItemOverride`）。如果需要更多元素（例如，因为数据项变得更小），则会创建新的 UI 元素。

重点是您有 10000 个虚拟物品，而实际物品只有约 17 个，因此是虚拟化。

但是，在您的代码中，我看到

```
public interface IVirtualizable
{
    FrameworkElement View { get; }
} 
```

这意味着您的数据项和 UI 元素之间存在一对一的关系。UI 元素很昂贵，它们拥有 GPU 纹理和其他系统资源。这就是为什么您在添加更多元素时会遇到性能问题。

重新实现 VirtualizingStackPanel 很困难。它的代码是 MyVirtualizingPanel 类的 3-4 倍。幸运的是，您不需要这样做，它已经在框架中，而且用途广泛。如果你不喜欢列表框，因为它选择/未选择的东西，使用普通的 ItemsControl，将 ItemContainer 设置为 VirtualizingStackPanel。

# c# - System.Drawing 不在添加引用中

> ID：14739569
> 
> 赞同：0
> 
> 时间：2013-02-06T21:55:09.007
> 
> 标签：c#

写一个Winphone应用，需要用到System.Drawing，我在网上发现要先添加引用，它不在.NET列表中，怎么办？

它是 Visual Studio 2010。

在一个解决方案中，它说 .NET 4.0 及更高版本支持这一点，我应该在哪里查看版本信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:58:27.150

您正在尝试编写一个*Windows Phone*应用程序。您没有使用 .NET 4。目前尚不清楚您使用的是哪个*版本*的 Windows Phone，但我认为它们都不支持`System.Drawing`.

您需要找到您正在开发的 Windows Phone 版本的 API 文档，并参考这些文档。

例如，[这里是 Windows Phone 8 API 参考](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626516%28v=vs.105%29.aspx)。

# windows - 适用于 Windows 的 Twitter 命令行

> ID：14739570
> 
> 赞同：1
> 
> 时间：2013-02-06T21:55:09.570
> 
> 标签：windows, twitter, command, message, send

我正在寻找适用于 Windows 的“文本发送者”twitter 命令行，但只有一个唯一的 .exe（并且没有 .net 依赖项）。不是 python、perl 和其他脚本。我测试了“twt.exe”，但它们在 Windows x64 中崩溃。欢迎任何帮助。谢谢

# css - 图标：使用数据 URI 还是嵌入字体？

> ID：14739572
> 
> 赞同：1
> 
> 时间：2013-02-06T21:55:13.487
> 
> 标签：css, icons, embedded-fonts, data-uri

我有一组大约 10 个 25x25 或更小的单调图标。哪个性能更好：

1) 使用数据 URI 将它们嵌入 CSS

2）将它们加载为字体（[IcoMoon](http://icomoon.io/app/)等）

加载为字体似乎不太有用，因为它会进行 http: 调用，除非我... 2b）自己嵌入字体文件。

上个月我在这个项目上一直在使用 IcoMoon，但是如果我需要对 SVG 进行更改并重新上传到应用程序，那就有点乏味了。在处理字体与图像时，CSS 也相当混乱。似乎我可以用 base64 编码 SVG 来避免头痛并完成它。

那么你会说什么是最好的方法？还是那些的替代品？我正在针对 Webkit、Mozilla 和 IE8+ 进行优化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-19T08:18:38.140

这取决于™。

似乎数据 URI 在移动设备上速度较慢，但​​小于 1KB 的图标在嵌入时性能更好。它还取决于每页使用图像的频率——数据 URI 显然必须在每次使用时解压缩，因此如果您多次使用它们，可能会影响页面性能。

不幸的是，似乎还没有人比较数据 URI 和 @font-face 图标字体的移动性能。理想情况下，做一些真实世界的 RUM 测试并发布你的发现 ^_^ 如果你这样做，请检查在 CSS 中嵌入图标字体作为 Base64 编码的数据 URI：D

最后，有一些[Grunt 插件](http://gruntjs.com/plugins/font)可以为您自动化工作流程，并且使用`[data-icon]`-style 嵌入图标字体减少 CSS 混乱（在 IE8+ 中支持 attr()）。

*   [为什么内联一切都不是答案](http://calendar.perfplanet.com/2011/why-inlining-everything-is-not-the-answer/)——Guy Podjarny，Perf Planet 2011
*   [CSS Sprites 与 Data URIs：移动端哪个更快？](http://www.mobify.com/blog/css-sprites-vs-data-uris-which-is-faster-on-mobile/)——彼得麦克拉克伦，2013 年 8 月 29 日

PS对不起，我也想要这个信息……</p>

# java - 具有封装、多态性和继承性的 Java 示例？

> ID：14739586
> 
> 赞同：6
> 
> 时间：2013-02-06T21:56:05.343
> 
> 标签：java, inheritance, polymorphism, encapsulation

我需要制作一个项目，其中列出了使用 Java 的面向对象编程的特征。

有人可以查看我的快速示例程序以确认我了解这些特性是如何实现的，并且它们都存在并且正确完成了吗？

```
package Example;

public class Parent {

    private int a;
    public void setVal(int x){
        a = x;
    }
    public void getVal(){
        System.out.println("value is "+a);
    }
}

public class Child extends Parent{

    //private fields indicate encapsulation
    private int b;
    //Child inherits int a and getVal/setVal methods from Parent
    public void setVal2(int y){
        b = y;
    }
    public void getVal2(){
        System.out.println("value 2 is "+b);
    }
    //having a method with the same name doing different things
    //for different parameter types indicates overloading,
    //which is an example of polymorphism
    public void setVal2(String s){
        System.out.println("setVal should take an integer.");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:02:27.160

有几件事：

*   Getter 方法应该返回值。
*   重载不同于重载。您可能希望在子类中覆盖 setVal() （或者其他更合适的方法）以演示多态性。

* * *

请参见下面的示例。父级实现 fooMethod()。然后，Parent 通过添加 fooMethod(String str) 重载 fooMethod()。将它们视为两个独立的、完全不相关的方法——它们只是碰巧具有非常相似的名称。重载与多态性没有任何关系。

然后子扩展父。Child 最初从 Parent 继承 fooMethod，但在调用 fooMethod() 时它需要不同的功能。所以 Child 用自己的实现覆盖 fooMethod() 。现在当 Child 的对象调用 fooMethod() 时， fooMethod() 的 Child 版本将运行，打印“bar”，而不是“foo”。

```
public class Parent {
  public void fooMethod() {
    System.out.println("foo");
  }

  public void fooMethod(String str) {  // overloading Parent.fooMethod()
    System.out.println("foo " + str);
  }
}

public class Child extends Parent {
  public void fooMethod() {
    System.out.println("bar");  // overriding Parent.fooMethod()
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T22:06:13.227

您的*多态性*示例只是*方法重载*，而这实际上并不是面向对象的人们所说的多态性。它们意味着您如何拥有一个公开方法的接口，以及可以实现该方法以具有不同行为 的各种`classes`实现。`interface`

看到[这个](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。特别是引言的最后一段。

另外，我建议在代码中展示多态性知识的最佳方式必然包括一些客户端代码，这些代码使用多态性对象来展示它们可以具有不同的，即多态的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:02:46.097

您的覆盖示例不正确（例如，未演示多态性）。

您展示了两个具有不同签名的函数（参数的类型是函数签名的一部分）。仅仅因为它们具有相同的名称并不能使它们成为覆盖的示例。

最重要的是，如果班级孩子有类似的东西

```
public void setVal(int x){
    a = x+10;
} 
```

这将覆盖其超级（父）类中的 setVal(int) 方法。

然而，展示多态性的更好方法是类似于

```
Parent guy = new Child();
guy.getVal(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-17T10:19:25.153

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
class Parent_1
{
    private int i;//encap
    private int j;

    public  void display() {            
        System.out.println("these are the 2 answer");
    }
}

class child extends Parent_1   //inher
{
    public void display()  //method overiding
    {
        System.out.println("this is for method overriding");
    }

    public void mul(int i, int j)
    {
        int k=i*j;
        System.out.println("mul of 2 int val is:"+k);
    }

    public void mul(double i,double j)  //poly
    {
         double z=i*j;
         System.out.println("mul val of 2 double is:"+z);
    }
}

class Son
{
    public static void main(String args[])
    {
         Parent_1 p=new Parent_1();

         Parent_1 pt=new child();
         child cd=new child();
         p.display();
         cd.mul(2, 20);
         cd.mul(2.2, 1.1);
         pt.display();
    }
} 
```

# ruby - 如何以编程方式获取 ruby 方法的内部主体（代码）

> ID：14739587
> 
> 赞同：0
> 
> 时间：2013-02-06T21:56:06.637
> 
> 标签：ruby

无论如何以编程方式将ruby方法的内容作为字符串返回？例如像这样的东西？

```
class Foo
  def foo_method
    some_code = "goes here"
  end
end

puts Foo.method_body(:foo_method) # => "some_code = \"goes here\"" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:02:43.693

是的，有点。:-)

作为[Wrong的一部分，我必须实现一个类似的功能（获取块的源），您可以在](http://github.com/sconover/wrong)[chunk.rb](https://github.com/sconover/wrong/blob/master/lib/wrong/chunk.rb#L106)（依赖于 Ryan Davis 的 RubyParser 以及一些非常有趣的）中看到如何（甚至可能重用代码）源文件[glomming 代码](https://github.com/sconover/wrong/blob/master/lib/wrong/chunk.rb#L67)）。您必须对其进行修改才能使用`Method#source_location`，并可能调整其他一些东西，使其包含或不包含`def`.

顺便说一句，我认为 Rubinius 内置了这个功能。由于某种原因，它被排除在 MRI（标准 Ruby 实现）之外，因此被破解了。

更新：[这个答案](https://stackoverflow.com/a/11544229/190135)将我们指向[method_source gem](https://github.com/banister/method_source)，它似乎是一个（相对）干净的一次性解决方案，使用类似的算法（保持源文件中的行，直到您停止出现解析错误）。

# javascript - 在 Internet Explorer 9 上启用/禁用文本框的 Javascript

> ID：14739588
> 
> 赞同：0
> 
> 时间：2013-02-06T21:56:06.820
> 
> 标签：javascript, web, checkbox

不可能是因为浏览器的差异。我也在 Chrome 中进行了测试。这可能是我的代码中的错误吗？当我按下复选框时，文本框应该被禁用。到目前为止还没有。这是我的代码：我将脚本放在页面部分的顶部。

表格名称：frmPost

```
 <script type="text/javascript">
      function enabledisable() {
                if (document.getElementById("ePrice").checked) {    
                    document.frmPost.txtPrice.disabled=false;
                } else {
                    document.frmPost.txtPrice.disabled=true;
                }
            }​
    </script>

<input type="text" name="txtPrice" id="txtPrice" size="5">
<input type="checkbox" id="ePrice" name="ePrice"  onclick="enabledisable()"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:59:43.547

```
<input type="text" name="txtPrice" id="txtPrice" size="5">
<input type="checkbox" id="ePrice" name="ePrice"/>

$("input[name='ePrice']").click(function() {
    $("input[name='txtPrice']").attr("disabled", this.checked);
 }); 
```

我有更新给你这是最新的

[http://jsfiddle.net/H8VPY/84/](http://jsfiddle.net/H8VPY/84/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:02:04.707

在 IE9、Chrome 和 Firefox 上检查过

```
 <script type="text/javascript">
      function enabledisable() {
                if (document.getElementById("ePrice").checked) {    
                    document.frmPost.txtPrice.disabled=false;
                } else {
                    document.frmPost.txtPrice.disabled=true;
                }
            }
    </script>
<form name="frmPost">
<input type="text" name="txtPrice" id="txtPrice" size="5" disabled="disabled">
<input type="checkbox" id="ePrice" name="ePrice"  onclick="enabledisable()"/>
</form> 
```

一切正常。您确定您的表单名为 frmPost 吗？而且我相信默认情况下应该禁用输入 txtPrice

# php - PHP语法中的明显错误？

> ID：14739589
> 
> 赞同：0
> 
> 时间：2013-02-06T21:56:13.287
> 
> 标签：php, sql, syntax

我收到以下错误：错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“.98.229)”附近使用正确的语法

在我的 PHP 代码上，如下所示：

```
<?php
$con = mysql_connect("****", "****", "****");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("****", $con);
$ip=$_SERVER['REMOTE_ADDR'];

$sql="INSERT INTO users (fname, lname, email, password, ip)
VALUES
('$_POST[fname]', '$_POST[lname]', '$_POST[email]', '$_POST[password]', $ip)";

if (!mysql_query($sql,$con))
  {
die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

有什么建议吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:57:30.070

`$ip`应该是`'$ip'`把它变成一个字符串。

我敢肯定，我不会是最后一个对您说您应该使用带有参数化输入的[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO的人。](http://www.php.net/manual/en/book.pdo.php)允许用户输入成为查询字符串的一部分是一个巨大的安全禁忌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:00:47.293

您应该真正使用 PDO 并在执行操作之前检查您的 POST。您完全容易受到 SQL 注入的攻击。

[PDO 准备好的语句是否足以防止 SQL 注入？](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:58:57.723

`IP`架构中的列是什么类型的字段？我想它需要像您声明中的其他字符串一样被引用。

你熟悉[SQL 注入](https://www.owasp.org/index.php/SQL_Injection)和[PDO](http://php.net/manual/en/book.pdo.php)吗？

此外，您可能想对如何在数据库中最好地存储 IP 地址进行一些研究。

# c# - 如何通过c#调用重载的oracle过程

> ID：14739592
> 
> 赞同：0
> 
> 时间：2013-02-06T21:56:21.317
> 
> 标签：c#, oracle, overloading, odp.net

我在一个包 (TEST_PAK) 中有两个在 Oracle 9i 上过载的过程。一个接受一个字符串，一个接受一个数组作为参数。我遇到的问题是当我尝试使用 null 作为参数调用时。我正在使用 C# 和 ODP.NET 来调用这些程序。

这是两个过程的负责人：

```
PROCEDURE get_requests_with_files
(
    o_results OUT sys_refcursor, 
    in_communicator IN VARCHAR2, 
    in_state        IN VARCHAR2  -- State of requests wanted (use NULL for ALL records)
) 
```

和

```
PROCEDURE get_requests_with_files
(
     o_results OUT SYS_REFCURSOR,    
     in_communicator IN VARCHAR2,    
     in_states       IN flagTableType 
) 
```

flagTypeTable 是我将 PLSQLAssociativeArray 传递给我的过程的方式，而不是问题的一部分（我认为）。

这是我用来调用 proc 的 C# 代码。

```
private static DataSet GetRequests(String consumer, List<string> states)
{
    try
    {
        const string query = "TEST_PAK.get_requests_with_files";

        var retVal = new DataSet();
        var oComm = new OracleCommand(query, _oConn);
        var oDa = new OracleDataAdapter(oComm);
        oComm.CommandType = CommandType.StoredProcedure;
        oComm.CommandTimeout = CommandTimeout;

        //Parameters

        oComm.Parameters.Add("o_results", OracleDbType.RefCursor);
        oComm.Parameters["o_results"].Direction = ParameterDirection.Output;

        oComm.Parameters.Add("in_communicator", OracleDbType.Varchar2);
        oComm.Parameters["in_communicator"].Value = consumer;

        if (states.Count != 0)
        {
            oComm.Parameters.Add(new OracleParameter("in_states", OracleDbType.Varchar2)
            {
                CollectionType = OracleCollectionType.PLSQLAssociativeArray,
                Value = states.ToArray()
            });
        }
        else
        {
            oComm.Parameters.Add("in_state", OracleDbType.Varchar2);
            oComm.Parameters["in_state"].Value = null;
        }

        _oConn.Open();

        oDa.Fill(retVal);
        return retVal;
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
        return null;
    }
    finally
    {
        if (_oConn.State != ConnectionState.Closed) _oConn.Close();
    }
} 
```

我尝试在参数前面放置冒号，认为命名参数会成功，但没有运气。

我知道我可以像这样调用 SQLDeveloper 中的代码：

```
variable o_results refcursor;
execute Apps.Base_communicator.get_requests_with_files(:o_results, in_communicator => 'MYCOMM', in_state => null);
print o_results; 
```

所以我知道重载是有效的，只是不知道如何在 c# 中调用它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:27:08.993

我发现解决方案是添加`BindByName`到`OracleCommand`对象中。这样做（并删除冒号）允许它按名称绑定到变量。只要名称不同，这就会让重载工作。

# ios - 为 NSMutableArrary 中的对象分配数值

> ID：14739595
> 
> 赞同：0
> 
> 时间：2013-02-06T21:56:36.310
> 
> 标签：ios, nsmutablearray, nsnumber, nsinteger

我有一个 NSMutableArray 的扑克牌。为简洁起见，我将只显示梅花套装中的对象，但所有 52 张牌都出现在此数组中。

```
deckOfCards = [[NSMutableArray alloc] initWithObjects:
         @"AC",
         @"2C",
         @"3C",
         @"4C",
         @"5C",
         @"6C",
         @"7C",
         @"8C",
         @"9C",
         @"10C",
         @"JC",
         @"QC",
         @"KC",...nil]; 
```

我需要为这些对象中的每一个分配其相应的数值（即 A = 1、J = 10 等），但最好不要从对象上剥离花色标识符（例如俱乐部的“C”）。作为一个额外的障碍，需要一个洗牌方法（它使用在[这里](http://www.gorbster.net/blog/archives/118)找到的代码），我认为这会阻止制作第二个正确数字的数组来检查主数组。

有没有一种方法可以检查数组中的特定对象并为其设置数值？（类似于在 Interface Builder 中为元素设置标签）我的方法是否正确？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:00:14.727

就个人而言，我会创建一个 Card 类，该类将具有数值和花色的属性。然后，您可以将这些卡添加到阵列中。洗牌只是使用数组的索引，所以不必担心会弄乱它的那部分。

# javascript - 用javascript读取文件

> ID：14739597
> 
> 赞同：0
> 
> 时间：2013-02-06T21:56:37.837
> 
> 标签：javascript

我是 javascript 新手，正在尝试读取文件并将其内容显示在浏览器上。

到目前为止我有这个代码：

```
<script type="text/javascript">
        var fname ;
        if(navigator.appName.search('Microsoft')>-1) { fname = new ActiveXObject('MSXML2.XMLHTTP'); }
        else { fname = new XMLHttpRequest(); }

        function read(filename) {
            fname.open('get', filename, true);
            fname.onreadystatechange= steady;
            fname.send(null);
        }

        function steady() {
            if(fname.readyState==4) {
                var el = document.getElementById('read_file');
                el.innerHTML = fname.responseText;
            }
        }
    </script> 
```

但我得到的输出是：

```
x   y 5 90 25   30 45   50 65   55 85   25 
```

而数据是格式：

```
 x    y
 5    90
 25   30   
 45   50   
 65   55 
 85   25 
```

两个问题：

1）我如何以上述格式显示它

2）截至目前，当我点击一个按钮时会发生这种情况..有什么方法可以自动读取这个给定的文件而不是点击一个按钮

所以这就是我的html代码的样子

```
<input type="button" value="load file"  onclick="read('data.tsv')"> 
```

我想摆脱这个“onclick”并阅读文件

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:01:23.163

> 如何以上述格式显示？

确保插入内容的元素`white-space: pre`用于样式，否则会压缩空格。另外，请注意特殊字符，如`<`, `>`,`"`和`&`需要转义才能与 . 一起使用`innerHTML`。通常`<pre>`在必须保留间距时使用元素。

> 到目前为止，当我单击一个按钮时会发生这种情况..有什么方法可以自动读取这个给定的文件而不是单击一个按钮

如果在元素`<script>`之后执行，您可以简单地调用该函数：`#read_file`

```
read('data.tsv'); 
```

如果没有，您可以设置一个`onload`在页面完成加载时执行的事件处理程序：

```
window.onload = function () {
    read('data.tsv');
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:01:53.757

要删除该按钮，只需将调用添加到 JavaScript 的末尾：

```
 // ...

    read('data.tsv');
</script> 
```

当您在文件中找到数据时，有几种方法可以显示数据。

第一个是将它包装在一个保留空白的元素中......

```
el.innerHTML = '<pre>' + fname.responseText + '</pre>'; 
```

或者您可以用 HTML 替换所有换行符和制表符/空格，例如，可以将换行符转换为`<br>`标签，并且可以将空格替换为不间断空格：`&nbsp;`.

您甚至可以通过换行符和空格将其拆分，以便将其显示在表格中，这将是显示您拥有的信息类型的正确方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:01:25.723

你必须替换**<br>**而不是 newline.in 浏览器换行不显示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T22:01:47.000

关于你应该使用`<pre>`标签的格式，所以原始格式将被保留，更多细节在这里：[http ://www.w3schools.com/tags/tag_pre.asp](http://www.w3schools.com/tags/tag_pre.asp)

并在没有用户干预的情况下运行，使用`<body onload="read('data.tsv')">`

玩得开心 ！

# ruby-on-rails - 当我保存嵌套模型仅更改文件字段时，未触发保存事件

> ID：14739611
> 
> 赞同：1
> 
> 时间：2013-02-06T21:57:40.083
> 
> 标签：ruby-on-rails, mongoid, carrierwave, nested-forms

我正在使用 rails 3.2.11、mongoid 3.0.18、carrierwave (0.7.1) 和carrierwave-mongoid (0.3.0)

两种型号：产品有很多组件。组件有一个文件字段。我使用 gem nested_form 在产品页面上添加许多组件表单。

```
class Product
  include Mongoid::Document
  include Mongoid::Timestamps

  field :title
  field :image

  embeds_many :components, cascade_callbacks: true
  accepts_nested_attributes_for :components, allow_destroy: true
end

class Component
  include Mongoid::Document
  include Mongoid::Timestamps
  field :title
  field :author
  field :file

  embedded_in :product

  mount_uploader :file, BaseFileUploader
end 
```

控制器：

```
class ProductsController < BaseController

  def update
    resource = Product.find(params[:id])
    if resource.update_attributes(params[:product])      
      redirect_to collection_path
    else
      resource.components.build unless resource.components # there should be always one component
      render :edit
    end
  end
end 
```

当我更改（！这个字段已经有值）只有一个文件字段时，没有保存查询到 db。

但是当我在控制器中添加强制保存时

```
class ProductsController < BaseController

  def update
    resource = Product.find(params[:id])
    if resource.update_attributes(params[:product])
      resource.components.each do |component|
       component.save!
      end      
      redirect_to collection_path
    else
      resource.components.build unless resource.components # there should be always one component
      render :edit
    end
  end
end 
```

它有效！你知道这里的原因是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T10:52:03.443

我也看到了这个问题。如果我更新另一个字段以及嵌入文档上的文件，则会触发上传。如果它只是文件，则不会发生任何事情。

# .net - Selenium IE 驱动程序在远程执行期间间歇性停止

> ID：14739614
> 
> 赞同：1
> 
> 时间：2013-02-06T21:57:48.993
> 
> 标签：.net, selenium, webdriver, virtual-machine

*我的印象是这是人们在使用 Selenium 时面临的一个常见问题，但惊讶地发现只有[这个问题](https://stackoverflow.com/questions/5271473/selenium-test-fails-on-build-server-with-no-response-from-server-error)。该问题仅针对较旧版本的 Selenium，并建议放置粗略的“睡眠等待”，到目前为止，这对我没有用。*

可以在[以下博客文章](http://jimevansmusic.blogspot.com.au/2012/11/net-bindings-whaddaymean-no-response.html)中找到对我的问题的精彩解释。
简而言之，当我在看似零星的时间使用 Selenium WebDriver 运行远程测试时，我遇到了一些停滞不前的测试。停止是指浏览器窗口关闭并且驱动程序（在这种情况下为 IEDriverServer）无限期地运行，直到它被手动杀死。

我想知道是否有人找到解决方法？*我需要在第一次出现“没有来自 url 的响应*”异常时终止 WebDriver 进程，或者完全避免它。当前浏览器关闭，但驱动程序挂起，直到通过远程连接手动关闭。

其他一些可能有用的信息：

*   测试通常在**IE7**上运行，有时在**IE8上运行** *（似乎在 7 上更频繁地停止，但这可能只是巧合，我无法用数据支持它）*。
*   停顿发生在从构建到构建的不同测试中，但那些停顿是整个测试套件的一个子集。
*   我正在一台**XP 客户端机器上运行我的测试，该机器正在访问我们在****Windows 2008 R2 服务器**上部署的页面。这些机器位于相同的**实验室管理环境*(2010)***中。
*   有一段时间我没有得到任何停止的测试。但是，由于没有签入解决方案，测试已经开始间歇性地停止。
*   我正在用**C#**编写测试，并且正在使用**Selenium .NET Bindings**、**WebDriver 2.28.0**和**IEDriverServer.exe**。
*   测试通过客户端上的 TestAgent 运行，QTAgent.exe 进程与测试控制器通信。

我尝试过的一些关键事情：

*   实现了一个 javascript 错误检测器，它将向日志报告（在停滞的测试中为空）。
*   对元素的所有操作都先于 waitForElementToExist 调用（最多 5 秒）。
*   测试不会在本地停止。
*   在测试中看似有问题的区域周围进行额外的睡眠等待。
*   环境娱乐。

或者，如果没有直接的解决方法来防止测试停止，那么将杀死停止的测试的解决方案也将受到欢迎作为答案。

# msbuild - msbuild，覆盖不同文件中的属性值

> ID：14739618
> 
> 赞同：2
> 
> 时间：2013-02-06T21:58:08.483
> 
> 标签：msbuild, msbuild-propertygroup, msbuild-target

我正在尝试根据另一个文件中的特定条件修改属性值。例如。我有一个调用目标文件的文件。

```
<Import Project="sample.vcxproj"/>
<PropertyGroup>
    <Gender>Boy</Gender>
    <Search>UNIQUE_NAME</Search>
</PropertyGroup>

<Target Name="Build">
    <callTarget Targets="SetName"/>
    <Message Text="$(Person)"/>
</Target> 
```

我有一个文件，其中包含要决定的项目组和修改的目标

```
<ItemGroup>
    <Name Include="UNIQUE_NAME">
        <Boy>DAVID</Boy>
        <Girl>REBECCA</Girl>
    </NAME>
</ItemGroup>

<Target Name="SetName">
    <PropertyGroup Condition="'$(Search)'=='@(Name)'">
        <Person>@(Name->'%($(Gender))')</Person>
    </PropertyGroup>
</target> 
```

但是当我打印“人”时，我得到空字符串。我检查了是否调用了“SetName”并设置了正确的名称。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:45:49.473

这与 MSBuild 属性的可访问性有关，具体取决于您使用的是**DependsOnTargets**还是**CallTarget**。使用**DependsOnTargets**时，您将对属性有更大的访问权限。这就是为什么您的示例在使用该方法时有效的原因。

有一篇现有的[stackoverflow 文章](https://stackoverflow.com/questions/2816094/when-should-we-call-a-target-using-dependsontargets-and-calltarget)谈到了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:49:18.870

使用“DependsOnTarget”属性而不是 callTarget 任务可以正常工作

# android - 使用或不使用反向地理编码来索引约 500,000 行的 MySQL 表？

> ID：14739625
> 
> 赞同：1
> 
> 时间：2013-02-06T21:58:48.533
> 
> 标签：android, mysql, sql, geolocation, geocoding

我有一个包含大约 5,000 行的表，其中包含地标上的地理坐标（纬度+经度）和位置信息（城市、州和国家/地区）。我使用这个表来检索离用户位置最近的位置（例如附近的公园等）。

至于现在，我通过对用户的 gps 坐标进行反向编码来过滤查询，以获得他的城市、州和国家（我正在使用 Android 的地理编码器）。但是，我开始意识到地理编码器偶尔会失败，因此我的云服务器上的 SQL 查询不会返回任何结果。

因此，我正在考虑跳过反向编码以确保每次都能获得良好的结果。我将只使用地理坐标来获得我想要的东西，如下所示：

```
SELECT p.placeId, p.name,( 6371 * acos( cos( radians($latitude) ) * cos( radians( p.latitude ) ) * cos( radians( p.longitude ) - radians($user_longitude) ) + sin( radians($user_latitude) ) * sin( radians( p.latitude  ) ) ) ) AS distance ORDER BY distance 
```

但是，我的桌子每天都在增加，最终可能会增长到 500,000。您是否认为当我的表扩展到该大小时，对每一行执行距离计算可能会成为性能问题？或者 500,000 行的表真的不是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:38:58.737

是的。您可以使用空间索引。例如，Mssql 使用空间填充曲线。曲线减小了维度，不与自身相交并保留了一些原始位置信息。曲线常用于制图应用。在 nick 的空间四叉树希尔伯特曲线博客中了解它。我写了一个希尔伯特曲线搜索 lat lng 对，它非常快。您可以使用包含 4 个字母的字符串来代替数字来索引位置。然后您可以从左到右搜索字符串中的位置。当然，您可以将索引反转为 lat-lng 并返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:39:02.920

您可以将搜索限制在所需的范围和记录数内。在这种情况下，25 公里和 20 条记录。

```
SELECT  placeId, name, lat, lng,
( 3959 * acos( cos( radians($user_latitude) ) * cos( radians( lat ) ) 
* cos( radians( lng ) - radians($user_longitude)) + sin( radians($user_latitude))
* sin( radians( lat ) ) ) ) AS distance FROM myTable HAVING distance < 25 
ORDER BY distance LIMIT 0 , 20 
```

此查询在 500,000 行 MySQL 数据库上运行耗时 2.08 秒。

建议将[**PDO**](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)与准备好的语句一起使用

# ios - 如何使用正则表达式查找以三个字符前缀开头的单词

> ID：14739627
> 
> 赞同：6
> 
> 时间：2013-02-06T21:58:52.950
> 
> 标签：ios, regex, nsregularexpression

我的目标是计算以多个字母的指定前缀开头的单词（在字符串中）的数量。格是以“非”开头的词。所以在这个例子中......

```
NSString * theFullTestString = @"nonsense non-issue anonymous controlWord"; 
```

...我想获得关于“废话”和“非问题”的点击，而不是关于“匿名”或“controlWord”的点击。我的点击总数应该是 2。

所以这是我的测试代码，看起来很接近，但我尝试过的正则表达式形式都不能正常工作。此代码捕获“废话”（正确）和“匿名”（错误），但没有捕获“非问题”（错误）。它的计数是 2，但出于错误的原因。

```
NSUInteger countOfNons = 0;
NSString * theFullTestString = @"nonsense non-issue anonymous controlWord";
NSError *error = nil;

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"non(\\w+)" options:0 error:&error];

NSArray *matches = [regex matchesInString:theFullTestString options:0 range:NSMakeRange(0, theFullTestString.length)];

for (NSTextCheckingResult *match in matches) {
    NSRange wordRange = [match rangeAtIndex:1];
    NSString* word = [theFullTestString substringWithRange:wordRange];
    ++countOfNons;
    NSLog(@"Found word:%@  countOfNons:%d", word, countOfNons);
} 
```

我难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:04:33.743

正则表达式`\bnon[\w-]*`应该可以解决问题

```
\bnon[\w-]*
^ (\b) Start of word
  ^ (non) Begins with non
     ^ ([\w-]) A alphanumeric char, or hyphen
          ^ (*) The character after 'non' zero or more times 
```

所以，在你的情况下：

```
NSUInteger countOfNons = 0;
NSString * theFullTestString = @"nonsense non-issue anonymous controlWord";
NSError *error = nil;

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(\\bnon[\\w-]*)" options:0 error:&error];

NSArray *matches = [regex matchesInString:theFullTestString options:0 range:NSMakeRange(0, theFullTestString.length)];

for (NSTextCheckingResult *match in matches) {
    NSRange wordRange = [match rangeAtIndex:1];
    NSString* word = [theFullTestString substringWithRange:wordRange];
    ++countOfNons;
    NSLog(@"Found word:%@  countOfNons:%d", word, countOfNons);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:02:55.720

我认为正则表达式在这里有点矫枉过正。

```
NSString *words = @"nonsense non-issue anonymous controlWord";
NSArray *wordsArr = [words componentsSeparatedByString:@" "];
int count = 0;
for (NSString *word in wordsArr) {
    if ([word hasPrefix:@"non"]) {
        count++;
        NSLog(@"%dth match: %@", count, word);
    }
}

NSLog(@"Count: %d", count); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T18:09:22.247

有更简单的方法可以做到这一点。您可以使用 NSPredicate 并使用此格式 BEGINSWITH[c] %@。

示例代码

```
NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"Firstname BEGINSWITH[c] %@", text];
NSArray *results = [People filteredArrayUsingPredicate:resultPredicate]; 
```

# android - android 备份代理和 SherlockMapActivity

> ID：14739630
> 
> 赞同：1
> 
> 时间：2013-02-06T21:59:02.387
> 
> 标签：android, actionbarsherlock, android-backup-service, actionbarsherlock-map

我尝试在我的 Android 应用程序中实现备份代理，但每次恢复时都会遇到一个奇怪的问题（首次启动时）：

```
Unable to resolve superclass of Lcom/actionbarsherlock/app/SherlockMapActivity; (916)
Link of class 'Lcom/actionbarsherlock/app/SherlockMapActivity;' failed
Unable to resolve superclass of Lnet/myapp/activity/impl/MapActivity; (674)
Link of class 'Lnet/myapp/activity/impl/MapActivity;' failed
Could not find class 'net.myapp.activity.impl.MapActivity', referenced from method net.myapp.helper.SlidingMenuHelper.<clinit>

VFY: unable to resolve const-class 1520 (Lnet/myapp/activity/impl/MapActivity;) in Lnet/myapp/helper/SlidingMenuHelper;
VFY: replacing opcode 0x1c at 0x0081
     Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lnet/myapp/helper/SlidingMenuHelper; 
```

在此处完成日志：[https ://gist.github.com/romainguefveneu/1acc78cabbed65fba4b7](https://gist.github.com/romainguefveneu/1acc78cabbed65fba4b7)

恢复过程运行良好，当我第二次打开该应用程序时，我的数据已正确恢复。

加载 SherlockMapActivity 似乎是一个问题，我在我的项目中使用了所有这些库：

*   actionbarsherlock-plugin-maps-4.2.0.jar
*   bugsense-3.0.1.jar
*   commons-io-2.0.1.jar
*   gson-2.2.2.jar
*   joda-time-2.1.jar
*   ocpsoft-pretty-time-1.0.7.jar

有人有想法吗？

# asp.net-mvc-4 - Web.API 和 FromBody

> ID：14739631
> 
> 赞同：3
> 
> 时间：2013-02-06T21:59:04.713
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我有点困惑。我有一个具有以下方法的控制器（从 ApiController 派生）：

```
[ActionName("getusername")]
public string GetUserName(string name)
{
    return "TestUser";
} 
```

我的路由设置如下：

```
config.Routes.MapHttpRoute(
    name: "ActionApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

当我尝试`/api/mycontroller/getusername/test`在提琴手中使用 GET 时，我不断收到 400 错误。

`[FromBody]`当我在 GetUserName 中添加 name 参数时，我发现一切正常。

我以某种方式认为它`[FromBody]`用于`HttpPost`，表明该参数位于帖子的正文中，因此`GET`. 看来我错了。

这是如何运作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T23:05:41.997

您需要将路由更改为：

```
config.Routes.MapHttpRoute(
    name: "ActionApi",
    routeTemplate: "api/{controller}/{action}/{name}",
    defaults: new { name = RouteParameter.Optional }
); 
```

或将参数名称更改为：

```
[ActionName("getusername")]
public string GetUserName(string id)
{
    return "TestUser";
} 
```

注意：其他路由参数必须与方法参数名称匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:17:18.900

如果它更接近您要查找的内容，您还可以执行以下操作：

```
// GET api/user?name=test
public string Get(string name)
{
    return "TestUser";
} 
```

这假设您使用的是`ApiController`命名`UserController`并允许您将`name`参数作为查询字符串传递。这样，您不必指定`ActionMethod`而是依赖 HTTP 动词和匹配的路由。

# java - 从 LKM/内核空间启动 Android Activity

> ID：14739637
> 
> 赞同：0
> 
> 时间：2013-02-06T21:59:23.500
> 
> 标签：java, android, c, linux, linux-kernel

我正在开发一个安全模块，我想从可加载内核模块 (LKM) 启动一个活动，以便在用户尝试访问某些安全内容时对其进行身份验证。

我曾在 Android 上工作过，我也曾在 Linux 桌面上工作过，但我不知道如何从 Android 的内核空间启动活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T19:38:30.253

您可以从您的 lkm 执行 /system/bin 中的“am”可执行文件（活动管理器）。

```
adb shell am start -a android.intent.action.MAIN -n com.android.mms/.ui.ConversationList 
```

从 lkm 内部执行此操作的方法是使用内核函数“call_usermodehelper”

例子：

```
#include <linux/kmod.h>

char *argv[] = { "/system/bin/am", "start", "-a", "android.intent.action.MAIN",  
"-n", "com.android.mms/.ui.ConversationList",  NULL};

static char *envp[] =  { 
  "HOME=/", 
  "PATH=/sbin:/system/sbin:/system/bin:/system/xbin", NULL };

call_usermodehelper (argv[0], argv, envp, 1); 
```

# ruby - 类中的 Ruby 类（或模块中的模块）

> ID：14739640
> 
> 赞同：40
> 
> 时间：2013-02-06T21:59:27.987
> 
> 标签：ruby

在阅读不同的 Ruby 书籍时，我注意到可以在其他 Ruby 类或模块中定义 Ruby 类。这是类中的类的示例：

```
class Outerclass
  def foobar
    puts "FOOBAR"
  end

  class Innerclass   
    def barfoo
      puts "BARFOO"
    end
  end
end 
```

这是我在 IRB 中运行的一些代码，试图从概念上理解这一点：

```
oc = Outerclass.new # => #<Outerclass:0x00000100a46478>

Outerclass.instance_methods(false) # => [:foobar]

ic = Outerclass::Innerclass.new # => #<Outerclass::Innerclass:0x00000100a0b120>

ic = Outerclass::Innerclass.instance_methods(false) # => [:barfoo] 
```

以下是我的问题：

1.  当 ruby​​ 解释器第一次遇到我上面的 Class 定义代码时，它是否会通过我编写的方法并将其存储在某个地方？我知道实例方法“foobar”实际上并没有运行，因为在 Outerclass 定义中没有对其进行调用。

2.  捎带第一个问题，当 Ruby 遇到类 Innerclass 时会怎样？这里会发生什么？

3.  一般来说，您希望在类中拥有类的一些原因是什么？这样做有什么好处吗？

4.  Outerclass 的实例是否知道有关 Innerclass 的任何信息？

5.  Innerclass 的实例是否知道有关 Outerclass 的任何信息？

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-06T22:53:54.353

当解释器通过这个文件时，它会分配这样的类：

```
OuterClass = Class.new do 
  def foobar
    puts "FOOBAR"
  end

  InnerClass = Class.new do   
    def barfoo
      puts "BARFOO"
    end
  end
end 
```

因此，当 Ruby 遇到嵌套类时，它会将其`InnerClass`分配给分配给常量的常量，`OuterClass` 它们彼此之间没有任何关系。

`InnerClass`没有继承`OuterClass`到：

```
 InnerClass.ancestors
  => [InnerClass, Object, Kernel, BasicObject] 
```

当您调用`OuterClass::InnerClass`常量时，您指的`InnerClass`是在常量下命名空间的常量，该`OuterClass`常量等于分配给它的 Class.new 语句。

一本关于这方面的好书是“Metaprogramming Ruby”。它详细介绍了类、单例、模块等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-05T02:32:18.043

Jörg W Mittag 在他对 Michael Papile 回答的评论中说得最好：

没有内部和外部类。只有两个完全不相关的类。一个恰好被分配给另一个内部命名空间的常量。

# jquery - 为什么我不能制作切换效果。并且 jquery 没有注册类更改

> ID：14739641
> 
> 赞同：0
> 
> 时间：2013-02-06T21:59:33.467
> 
> 标签：jquery, function, events, toggle

我现在一直在尝试为 jquery 中的很多东西进行切换，我对 jquery 还是很陌生。我试过切换一个类，复制其他脚本。还有正常的切换功能。

```
$(function(){
    $('div').toggle(function(){
        $(this).text('odd clicks');
    }, function(){
        $(this).text('even clicks');
    });
}); 
```

[https://www.jsfiddle.net/bVr2r/84](https://www.jsfiddle.net/bVr2r/84)

这是一个例子。有人可以向我解释为什么我选择的内容会淡出吗？

这里还有一个我的想法与类交换的例子：

[http://www.jsfiddle.net/bVr2r/85](http://www.jsfiddle.net/bVr2r/85)

我知道它并不完美，是匆忙制作的，但重点仍然存在。任何人都知道为什么其中 1 不起作用？或者有其他想法可以让它发挥作用？我尝试了很多不同的线程，但我似乎无法获得切换效果。

最后一个例子。我试图制作一个下一步按钮，只需在单击时更改类即可。Firebug 显示该类已更改，但 jquery 似乎没有意识到新类是存在的。它是同样的问题，但不同的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:08:57.247

将 jQuery 的版本切换到 pre-1.9 将使其工作。

它与升级指南的其余部分一起记录在[http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:10:14.323

您正在尝试使用 .toggle() 事件，该事件在 jQuery 1.8 中已被弃用并在 1.9 ( [http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/) ) 中被删除。另外，您正在尝试将它与仍处于测试阶段的 jQuery 2 一起使用。要么使用支持toggle() 的不同版本的jQuery pre 1.8。或使用 .on() 绑定您的鼠标点击并计算点击次数并相应地触发您的功能。

# php - 为什么我的 LIKE 搜索会返回所有内容？

> ID：14739642
> 
> 赞同：0
> 
> 时间：2013-02-06T21:59:40.193
> 
> 标签：php, mysql, sql-like

我正在尝试在充满图像的页面中进行图像搜索。

无论我搜索什么，它总是返回数据库中带有标签信息的所有图像。

我这样做是为了当有人在搜索框中输入文本时，页面被重定向到：

```
ob_start();

$input = abs($_GET['input']);
$query = "SELECT * FROM `photo`.`photo` WHERE `tags` LIKE '%$input'";
$result = mysql_query($query);
$data = mysql_fetch_array($result) or die (mysql_error());
$rows = mysql_num_rows($result);
$image = $data['image'];

if ($rows==0) {
    echo 'no results found';
}  else {
    $jpgimage = imagecreatefromstring($image);

    $image_width = imagesx($jpgimage);
    $image_height = imagesy($jpgimage);

    $new_size = ($image_width + $image_height)/($image_width*($image_height/45));
    $new_width = $image_width * $new_size;
    $new_height = $image_height * $new_size;

    $new_image = imagecreatetruecolor($new_width, $new_height);

    imagecopyresized($new_image, $jpgimage, 0, 0, 0, 0, $new_width, $new_height, $image_width, $image_height);
    $imagearray = imagejpeg($new_image, null);
    header('Content-type: image/jpeg');

    echo $imagearray;
} 
```

照片存储为 BLOBS，所以在这里我将它们转换为 jpeg 并调整它们的大小。

其中大部分只是重新调整图像大小，但我不知道为什么我的 mysql 查询行中的 LIKE 部分不起作用。它总是给我所有带有标签的图片的图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:03:00.743

我怀疑 $input 是空的。如果您的变量 $input 为 null 或空字符串，它将创建一个 where 子句：

```
 SELECT * FROM `photo`.`photo` WHERE `tags` LIKE '%' 
```

这会将通配符 '%' 匹配到所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:05:36.877

我看到的一个问题是第一行的腹肌。如果你对一个文本字符串做一个绝对值，你会得到一个零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:24:57.470

您编码`$input = mysql_real_escape_string($_GET['input'])`用于更安全的代码。在您的情况下无需使用该`abs()`功能。

# mysql - 如何在mysql中创建一个没有密码的root用户

> ID：14739645
> 
> 赞同：3
> 
> 时间：2013-02-06T21:59:45.710
> 
> 标签：mysql

我可以使用我创建的用户名和密码登录 mysql。

我跑了`SELECT user FROM mysql.user;`

它显示了我创建的帐户和 3 个 root 实例。

1.) 如何查看任何 root 用户的密码？

2.）如果不能关闭，如何删除那些root用户，并创建一个没有密码的新root用户？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T22:05:36.263

您看不到纯文本密码。

```
DELETE FROM mysql.user WHERE user='root' AND host <> 'localhost';
UPDATE mysql.user SET password = '' WHERE user='root';
FLUSH PRIVILEGES; 
```

在此之前，您应该运行[mysql_secure_installation](http://dev.mysql.com/doc/refman/5.5/en/mysql-secure-installation.html)。

如果您无法在`root@localhost`没有密码的情况下重新登录，请执行以下操作：

```
SQLSTMT="GRANT ALL PRIVILEGES ON *.* to root@localhost"
SQLSTMT="${SQLSTMT} IDENTIFIED BY 'resetpwd' WITH GRANT OPTION;"
echo ${SQLSTMT} > /var/lib/mysql/init.sql
service mysql restart --init-file=/var/lib/mysql/init.sql
rm -f /var/lib/mysql/init.sql
SQLSTMT="UPDATE mysql.user SET password = '' WHERE user='root'"
SQLSTMT="${SQLSTMT} AND host='localhost'; FLUSH PRIVILEGES;"
mysql -uroot -presetpwd -e"${SQLSTMT}"
mysql -uroot 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:05:27.683

不建议使用密码为空的root mysql用户！！

但是，这里是如何做到这一点

```
SET PASSWORD FOR root@127.0.0.1=PASSWORD(''); 
```

请注意，您必须以 root 身份登录 mysql！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:16:14.040

的 3 个实例`root`可能用于主机变体。换句话说，可能有一个 for`root@localhost`和一个 for `root@%`。

如果您使用的是 phpMyAdmin，您可以删除不需要的用户，或者通过单击`Users`选项卡来重置密码。

您可以检查您不想要的用户，然后`Go`单击`Remove selected users`。

或者要重置特定用户的密码，您可以单击`Edit privileges`，向下滚动到该`Change password`部分，选择`No password`，然后点击`Go`。

[您可以在此处](http://www.phpmyadmin.net)下载 phpMyAdmin ，当然您需要以 root 身份登录才能执行此操作。

![用户](../Images/91639726abb2757a5d6146284abb55be.png) ![重置通行证](../Images/6b2b90f0b3ad0d96c18cfe29cb14b6e5.png)

# jquery - 如何清除 .hover() 事件中的超时功能？

> ID：14739646
> 
> 赞同：0
> 
> 时间：2013-02-06T21:59:50.287
> 
> 标签：jquery

下面的代码基本上是我想做的，我理解是不正确的代码。

所以对于下拉菜单，我想延迟隐藏它。问题是，当我在隐藏延迟完成之前将鼠标悬停在另一个菜单项上时，它会覆盖下一个`handlerIn`.

那么有没有一种简单的方法来清除`setTimeout`下一个队列`hover()`？

同样，下面的错误代码仅用于解释。

```
$('nav > ul > li').hover(function() {
    clearTimeout(menuHide);
    $(this).find('ul').show();
}, function() {
    var menuHide = setTimeout(function() {
        $(this).find('ul').hide();
    }, 150);
}); 
```

更新：似乎`clearInterval()`不是我想要的，因为我仍然想让它完成，而不是中止它。

有`completeInterval()`没有机会？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:03:59.417

目前，您的悬停事件没有引用，`menuHide`因此必须事先声明。

```
var menuHide;

$('nav > ul > li').hover(function() {
    clearTimeout(menuHide);
    $(this).find('ul').show();
}, function() {
    menuHide = setTimeout(function() {
        $(this).find('ul').hide();
    }, 150);
}); 
```

**编辑**

在评论部分进行了一些合作之后，我们确定将代码放在方法的完整部分中是可行的`animate`方法：

`.animate( properties [, duration ] [, easing ] [, complete ] )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:01:29.200

做`menuHide`一个全局变量。

# android - 在自定义 Android 中，如何将 STREAM_RING 覆盖为响应音量按钮的默认 AudioService

> ID：14739652
> 
> 赞同：3
> 
> 时间：2013-02-06T22:00:03.157
> 
> 标签：android, rom

谷歌文档指出，如果应用程序没有播放任何内容，按音量键可调整铃声音量。见[http://developer.android.com/training/managing-audio/volume-playback.html#HardwareVolumeKeys](http://developer.android.com/training/managing-audio/volume-playback.html#HardwareVolumeKeys)

我确信可以通过从源代码创建自定义构建来更改除了 STREAM_RING（比如 STREAM_MUSIC）之外的这种“默认”行为，这样如果用户在启动器上，并按下音量按钮，STREAM_MUSIC 音量将改变。（这是因为设备没有电话，所以铃声音量是无操作的）。

我查看了启动器代码，但它没有显示（至少我看不到）音量按钮是通过 AudioManager 定向/使用到 STREAM_RING 的。此外，当在“设置”中时，音量按钮会更改 STREAM_RING，这让我进一步相信存在“上链”或“在应用程序框架或 Android 运行时中的堆栈下”。

是否有一个“更高”的活动或系统进程正在运行，以 STREAM_RING 作为通道处理将 VOLUME 分派到 AudioManager？或者 AudioManager 中是否有可以设置的东西，以便它处理对 STREAM_MUSIC 的 VOLUME 更改（从源头看来这似乎不太可能，因为它似乎只在应用程序首选 STREAM 的上下文中处理 STREAM。

我使用的来源是 Ice Cream Sandwich 4.0.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:17:51.330

该解决方案似乎将“config_voice_capable”设置为false。此值位于 frameworks/base/core/res/res/values/config.xml

我使用覆盖将“config_voice_capable”设置为false，然后构建了rom。

设备启动后，音量控制不再默认为 RINGER 流。我无法找到有关表格和支持电话的设备之间差异的文档，但该解决方案有效。

# scala - 比 acc.reverse ::: b?

> ID：14739653
> 
> 赞同：3
> 
> 时间：2013-02-06T22:00:07.103
> 
> 标签：scala, scala-collections

我正在优化递归函数。最后，结果将是`acc.reverse ::: b`。这是 O(n) 因为`reverse`和`:::`。有没有更好的性能方式来组合这两个列表？谢谢。

前任。结合`List(3, 2, 1)`并 `List(4, 5, 6)`_`List(1, 2, 3, 4, 5, 6)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:04:55.200

标准库包括`reverse_:::`用于此的方法：

```
scala> List(3, 2, 1) reverse_::: List(4, 5, 6)
res0: List[Int] = List(1, 2, 3, 4, 5, 6) 
```

这仍然是 O(n)，但避免了单独调用`:::`.

* * *

只是为了乐趣和学习，您可以轻松地将其实现为尾递归函数：

```
@tailrec
def reverseConcat[A](lefts: List[A], rights: List[A]): List[A] =
  lefts match {
    case Nil => rights
    case head::tail => reverseConcat(tail, head::rights)
  } 
```

或使用`foldLeft`：

```
def reverseConcat[A](lefts: List[A], rights: List[A]): List[A] =
  lefts.foldLeft(rights)((xs, x) => x :: xs) 
```

注意`reverse_:::`不是使用尾递归实现的；它`var`在幕后使用 a ，因此可能表现不同。

# laravel - Laravel 3 Eloquent ORM 用法

> ID：14739671
> 
> 赞同：0
> 
> 时间：2013-02-06T22:00:52.520
> 
> 标签：laravel, eloquent, laravel-3

我有以下代码有效，但似乎没有遵循 laravel 雄辩的方式：

```
Article::left_join('images', 'articles.id', '=', 'images.article_id')
            ->join('article_category', 'articles.id', '=', 'article_category.article_id')
            ->where('article_category.category_id', '=', $category_id)
            ->get(); 
```

我有 4 张桌子；彼此具有多对多关系的文章和类别，包含文章 ID 和类别 ID 的数据透视表 article_category 表和与文章具有一对一关系的图像表。

我将模型设置为：

```
class Category extends Eloquent {
    public static function get_articles($category_id) {
        return static::find($category_id)->has_many_and_belongs_to('Article');
    }

class Article extends Eloquent {
    public function categories() {
        return $this->has_many_and_belongs_to('Category');
    }

    public function image() {
        return $this->has_one('Image');
    } 
```

但是，我似乎无法将所有三个信息放在一起。我可以：

```
Category::get_articles($current_category)->get(); 
```

要获取给定类别中的所有文章，但我似乎无法获取文章的图像，似乎没有什么可以链接到？除非我做错了？有没有我错过的技巧？

我什至尝试了文档中的精简版本：

```
foreach (Article::with('image')->get() as $article) {
    echo $article->image->foo;
} 
```

但是我收到一个错误：尝试获取非对象的属性，即使 var_dump 显示 $article->image 是一个对象！诡异的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:52:37.140

如果您尚未为图像表设置模型，请执行此操作。ORM 需要那里的模型，因此它知道“图像”指的是什么。

你可以使用 ::with 方法获取类别信息还是很麻烦？

# c++ - 将 wstring 转换为 TCHAR 的问题

> ID：14739672
> 
> 赞同：0
> 
> 时间：2013-02-06T22:00:52.107
> 
> 标签：c++, cstring, wstring, tchar

我对编程很陌生，我正在尝试编写一个程序，用户输入一个日期，然后将该日期添加到文件目录名称中，然后搜索该文件目录。

下面是我正在使用的内容。我有很多功能可以做到这一点。我在网上搜索并尝试用几种不同的方式进行转换，但我只是不理解它......所以我离开了（我知道的是不正确的）a静态转换。

也许我只是没有做正确的转换......基本上这会将它扔回使用 WINAPI 处理程序的函数。我能否让它发挥作用是一个完全不同的故事......在此先感谢您的帮助！

```
wstring fDate;
wstring fileDin;

const TCHAR* s = _T (fileDin);

std::wstring(fDate);
std::wstring(fileDin) =L"Z:\\software\\A\\AC\\" + fDate;
wcout<< fileDin;
cout <<endl;

//wstring fileDin(&arc[1]);
fileDin = static_cast<TCHAR>(arc[1]);
dir(2, arc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:11:37.060

`TCHAR`可以是`wchar_t`（当您使用 Unicode 时）或`char`（当您使用多字节时）。
另一方面，`std::wstring`总是包含 type 的字符`wchar_t`，所以最好`wchar_t*`直接使用而不是`TCHAR*`（如果可能的话）。

然后可以通过使用以下构造函数来完成`wchar_t*`转换：`std::wstring``std::wstring`

```
wchar_t* wcstr = L"my string";
std::wstring wstr(wcstr); 
```

并`std::wstring`通过`wchar_t*`简单的调用`c_str()`方法：

```
wchar_t* wcstr = wstr.c_str(); 
```

然后有时您可能需要在“宽”字符串（`std::wstring`s 保存`wchar_t`字符）和多字节字符串（`std::string`s 保存`char`s）之间进行转换。我通常使用以下助手：

```
// multi byte to wide char:
std::wstring s2ws(const std::string& str)
{
    int size_needed = MultiByteToWideChar(CP_UTF8, 0, &str[0], (int)str.size(), NULL, 0);
    std::wstring wstrTo(size_needed, 0);
    MultiByteToWideChar(CP_UTF8, 0, &str[0], (int)str.size(), &wstrTo[0], size_needed);
    return wstrTo;
}

// wide char to multi byte:
std::string ws2s(const std::wstring& wstr)
{
    int size_needed = WideCharToMultiByte(CP_ACP, 0, wstr.c_str(), int(wstr.length() + 1), 0, 0, 0, 0); 
    std::string strTo(size_needed, 0);
    WideCharToMultiByte(CP_ACP, 0, wstr.c_str(), int(wstr.length() + 1), &strTo[0], size_needed, 0, 0); 
    return strTo;
} 
```

# c++ - C ++将整数字符串转换为整数数组？

> ID：14739673
> 
> 赞同：-1
> 
> 时间：2013-02-06T22:00:56.843
> 
> 标签：c++, arrays, string, integer

我正在从诸如“5 8 12 45 8 13 7”之类的文件中读取一行输入。

我可以将这些整数直接放入数组中，还是必须先将它们放入字符串中？

如果最初必须使用字符串，我将如何将此整数字符串转换为数组？

输入：“5 8 12 45 8 13 7”=> 到数组中：{5,8,12,45,8,13,7}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T22:04:32.143

不，您不需要将它们转换为字符串。使用 C++ 标准库的容器和算法，这实际上非常简单（只要分隔符是空格或空格序列，它就可以工作）：

```
#include <iterator>
#include <iostream>
#include <vector>

int main()
{
    std::vector<int> v;

    // An easy way to read a vector of integers from the standard input
    std::copy(
        std::istream_iterator<int>(std::cin), 
        std::istream_iterator<int>(), 
        std::back_inserter(v)
        );

    // An easy wait to print the vector to the standard output
    std::copy(v.cbegin(), v.cend(), std::ostream_iterator<int>(std::cout, " "));
} 
```

# string - Ada 字符串比较

> ID：14739675
> 
> 赞同：3
> 
> 时间：2013-02-06T22:01:06.190
> 
> 标签：string, ada, string-comparison

我是 Ada 的新手，目前正在尝试编写一个涉及 if-else if 语句的简单程序。代码如下：

```
with Ada.Text_IO; use Ada.Text_IO;
with Ada.Integer_Text_IO; use Ada.Integer_Text_IO;
procedure Year_Codes is

  Year : String(1..9) := "         ";
  CharsRead : Natural;

  function YearCode(Name : in String) return Integer is
  begin
    if(Name = "freshman")then
      return 1;
    elsif(Name = "sophomore")then
      return 2;
    elsif(Name = "junior")then
      return 3;
    elsif(Name = "senior")then
      return 4;
    else
      return 0;
    end if;
  end YearCode;

begin
  Put("Enter your academic year: ");           -- Prompt for input
  Get_Line(Year, CharsRead);                   -- Input
  Put( YearCode(Year) );                       -- Convert and output
  New_Line;
end Year_Codes; 
```

每个答案我都得到 0。关于我做错了什么的任何意见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T22:05:27.517

对字符串的`"="`操作比较整个字符串。如果用户的输入是`"freshman"`，则 的值为，`Name`而`"freshman "`不是`"freshman"`。阅读该`Get_Line`过程的文档。

您可能应该传递*字符串*`YearCode`的一部分，而不是整个字符串；告诉你那个切片应该是什么。*`Year``CharsRead`*

 *具体来说，调用应该是：

```
Put( YearCode(Year(Year'First..CharsRead)) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T07:37:26.467

这是使用属性的不区分大小写的版本：

```
function YearCode(Name : in String) return Integer is
    Type Class is (Freshman, Sophmore, Junior, Senior);
begin
    Return 1 + Class'Pos(Class'Value(Name));  
exception
    When CONSTRAINT_ERROR => Return 0;
end YearCode; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T09:50:49.183

有了缓冲区中的额外字符，在我看来，您正在考虑 C 语言中的字符串。你需要阻止它。**在语言中的所有内容中，字符串处理是 Ada 和 C 之间最大的不同。**

虽然 C 字符串以 null 结尾，但 Ada 字符串**不是**. 相反，Ada 字符串被假定为字符串数组对象的大小。这是一个简单的区别，但它对您处理字符串的方式产生了巨大的影响。

我在回答[如何从 Ada 中的其他字符串构建字符串？](https://stackoverflow.com/questions/2263512/how-to-i-build-a-string-from-other-strings-in-ada)基本要点是，在 Ada 中，您总是尝试动态构建完美大小的字符串对象。

遗憾的是，Text_IO 输入是传统上很难做到这一点的地方，因为它是基于字符串缓冲区的输入。在这种情况下，您被迫使用过大的字符串对象作为缓冲区，并使用返回的值作为缓冲区定义区域的结尾，如 Keith 所示。

但是，如果您有新版本的编译器，您可以使用 Get_Line 的函数版本来修复它。只需将中间两行更改为：

```
Put( YearCode(Get_Line) ); 
```*

# c++ - 创建全局动态分配数组

> ID：14739680
> 
> 赞同：1
> 
> 时间：2013-02-06T22:01:20.187
> 
> 标签：c++

我是 C/C++ 新手，我有一个关于动态分配数组的问题。你不能做一个全局动态分配的数组吗？如果我想让 arr 被多个函数使用怎么办？我必须将 arr 传递给每个函数吗？基本上我想我仍然对动态分配数组的概念以及如何创建一个可由几个函数使用的数组感到困惑。

以下产生：错误：'arr'没有命名类型，但我不确定为什么。

```
#include <iostream>      

using namespace std;

int * arr = NULL;
arr = new int [10];

int main() {
   arr[0] = 1;
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:04:57.527

无效的原因与无效的原因相同

```
#include <iostream>      

using namespace std;

int a = 0;
a = 2;

int main() {

} 
```

您不能在函数之外运行语句，只能运行初始化程序。结果，这有效：

```
#include <iostream>      

using namespace std;

int *arr = new int[10];

int main() {
   arr[0] = 1;
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T22:07:28.713

您甚至不必使数组动态化，只需将数组放在 main 外部的静态内存中，它就会与程序一样长。

```
#include <iostream>     

int arr[10];

int main() {
   arr[0] = 1;
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:04:35.703

您不能在函数之外拥有“代码”。您需要将调用`new`放在一个函数中 - 您的代码中只有一个：`main`，但只要它是在您访问数组之前执行的函数，就可以了。

正如评论所说，您也可以这样做`int *arr = new int[10];`- 只要它是初始化的一部分，而不是在单独的行上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T22:07:50.247

```
int* arr = new int[10]; 
```

或（因为您分配了一个恒定大小的数组）：

```
int arr[10]; 
```

# java - ProccessBuilder 中的 javac 在 .jar 中不起作用？

> ID：14739683
> 
> 赞同：0
> 
> 时间：2013-02-06T22:01:27.790
> 
> 标签：java, process, javac

我的问题是，当我使用它的 .jar（分发就绪）构建和运行应用程序时，此代码不起作用。

```
 filepath = classpath + classname;   
 ProcessBuilder builder = new ProcessBuilder("javac", filepath + ".java");
 builder.redirectErrorStream(true);
 process = builder.start(); 
```

当我使用 Netbeans 执行程序时，它可以正常工作。但是当它单独使用时，它不起作用。

我正在使用`ProcessBuilder`，`Process`以便以后可以获取进程的 I/O 流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:08:01.450

在 Netbeans 中有一个集成到环境中的开发工具包。因此，它将始终在那里工作。确保您的环境变量设置为链接到您的 JDK。

您可以通过进入 cmd.exe 窗口并键入“javac -version”来尝试此操作。如果操作正确，它应该会显示您系统上的默认 JDK。如果它说找不到，请按照以下指南操作：

[http://java.com/en/download/help/path.xml](http://java.com/en/download/help/path.xml)

# java - 单击即可获得 xText 编辑器支持

> ID：14739691
> 
> 赞同：7
> 
> 时间：2013-02-06T22:01:42.270
> 
> 标签：java, xtext

在我目前的工作中，我想为我的领域特定语言的程序员提供 xText 编辑器支持（因为它的代码完成、语法突出显示）。我在 xText 中写过语法。

为了提供 xText 编辑器支持，我将为程序员提供安装了 xText 插件的完整 eclipse IDE（可在 xText 网站上获得）。但是，我以以下手动手动步骤为代价获得了 xText 编辑器工具（如 5 分钟 xText 教程中所述）。

1.  程序员必须去 File -> New -> Project -> xText Project
2.  程序员必须用我的语言语法替换“hello world”示例语法。
3.  他们必须去 RunAs -> Generate Xtext Artifacts。
4.  最后，他们要做的是：运行 -> Eclipse Application 以获取编辑器支持。因此，他们可以编写 dsl 规范。

我的问题是，有**什么方法可以通过单击来原子化（以最小的努力）这些任务（任何脚本或任何其他事情）？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T23:06:17.833

好的，我真的不确定我是否理解您的问题。所以我会重新陈述我*认为*你在问什么，然后回答。抱歉，如果我误解了 - 请告诉我。

所以 - 我想你是在说：

1.  您已经为您的语言开发了 xtext 语法
2.  您希望您的用户能够使用 xtext 为该语言生成的编辑器
3.  现在，你知道如何做到这一点的唯一方法是让你的用户模仿你所做的（安装 xtext，创建一个新项目，复制你的语法，运行生成器，创建一个运行时实例，然后最后在你的DSL）

您想修复第 3 步。因此您的用户可以创建一个新项目，然后使用您的 DSL 扩展名创建一个新文件并开始编辑。

***如果这是正确***的，那么最简单的方法是：

1.  选择`File->Export...->Plug-in Development->Deployable Features`并单击下一步
2.  在功能列表中选择您的 DSL 项目 ( `<your.dsl>.sdk`)
3.  为生成的存储库选择一个目录，然后单击`Finish`

Eclipse 将在目标目录中为您生成一个可安装的功能。然后，您需要通过在用户可以访问的地方发布来使存储库目录可供用户使用。这是你的`Repository URL`。

然后，您的用户需要：

1.  安装标准的 eclipse 发行版（适合的建模工具）
2.  选择`Help->Install New Software`
3.  单击`Add`以添加新存储库，然后输入您的`Repository URL`
4.  在列表中选择您的功能并安装

他们可以从那里创建新的项目和文件。如果他们使用您的 DSL 扩展名创建文件，您的 xtext 生成的编辑器将自动加载。

您可以通过生成 eclipse 产品使他们的工作更加轻松。为此，您首先需要创建产品规范，然后使用`File->Export->Plugin Development->Eclipse Product`. 这将创建一个预安装插件的独立 Eclipse IDE。因此，您的用户只需安装即可使用。[这里](http://kthoms.wordpress.com/2010/11/12/setting-up-a-rcp-product-for-a-dsl/)有一个很好的教程。

hth。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T23:13:53.750

有三个选项可以为您执行此类自动化：

1- 使用通用的*宏录制*软件，如[`AutoHotkey`](http://www.autohotkey.com/)or [`Sikuli Script`](http://www.sikuli.org/)，这样您就可以录制这些步骤并回放它们。[您也可以在此 Wikipedia 文章](http://en.wikipedia.org/wiki/Comparison_of_macro_recorder_software)中找到类似的软件

2- 使用*eclipse*宏插件，例如[`Practically Macro`](http://sourceforge.net/projects/practicalmacro/files/)eclipse 的开源插件

3- 使用 Java[`Robot`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html)类编写您自己的实现，它可以简单地生成自动化所需的事件，例如`keyPress`，`mousePress`和`mouseMove`

# javascript - 禁用提交按钮

> ID：14739692
> 
> 赞同：-1
> 
> 时间：2013-02-06T22:01:42.830
> 
> 标签：javascript

我的网站上有一个联系表格，可以通过电子邮件向我发送有关各方的信息。由于各种原因，我不想使用验证码。我只想做一些简单的事情，比如禁用表单上的提交按钮，直到用户回答一个简单的问题。希望这至少可以阻止一些机器人。我在网上找到了这个，但它什么也没做：

```
<script>
document.getElementById("Submit").disabled=true;
</script> 
```

有人可以纠正这个或给我更好的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:09:25.577

首先确保如果您只是测试该代码，那么您在 onload 函数中拥有它：

```
window.onload = function(){
    document.getElementById("Submit").disabled=true;
} 
```

还要确保 ID 是实际的`Submit`，而不是`submit`因为 JavaScript 区分大小写。

[JSFiddle：](http://jsfiddle.net/Qrpqp/)禁用按钮的示例。

# javascript - IE8 在 titleCase 函数的返回行上失败

> ID：14739695
> 
> 赞同：0
> 
> 时间：2013-02-06T22:01:47.127
> 
> 标签：javascript, internet-explorer, cross-browser

我在 SO 上找到的这个脚本似乎给 IE8 带来了问题。它可能有什么问题？

```
function titleCase (str, glue){
    glue = (glue) ? glue : ['of', 'for', 'and'];
    return str.replace(/(\w)(\w*)/g, function(_, i, r){
        var j = i.toUpperCase() + (r !== null ? r : "");
        return (glue.indexOf(j.toLowerCase())<0)?j:j.toLowerCase();
    });
} 
```

它说关于这条线`return (glue.indexOf(j.toLowerCase())<0)?j:j.toLowerCase();`

> 错误：对象不支持此属性或方法

此外，jquery 的第 14 行似乎存在问题。这是不是评论的第一行`(function( window, undefined ) {`。但那是我让它“显示所有脚本错误”的时候，所以也许这只是一个警告，而不是真正导致它出现实际问题的东西。

# xslt - 处理另一个 XSLT 样式表的输出

> ID：14739696
> 
> 赞同：2
> 
> 时间：2013-02-06T22:01:46.923
> 
> 标签：xslt

我有一个 XSLT 样式表，可以在 XML 中生成一些输出。我想用另一个样式表处理该输出。有没有办法告诉后者样式表“运行和使用”前者的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:36:26.137

据我所知，没有一种标准方法可以告诉 XSLT 处理器在给定的输入上运行另一个样式表并对输出做一些事情。在某些情况下，您可以针对一组模板处理输入并将结果保存在变量中，然后将一组不同的模板应用于变量的值，如下所示：

```
<xsl:template match="/">
  <xsl:variable name="temp">
    <xsl:apply-templates mode="first-pass"/>
  </xsl:variable>
  <xsl:apply-templates select="$temp" mode="second-pass"/>
</xsl:template> 
```

这假设您正在运行 XSLT 2.0。在 XSLT 1.0 中，您将需要一个支持节点集扩展的处理器（很多都支持），并且您需要将对 $temp 的引用更改为类似 exslt:nodeset($temp) 的内容。

如您所见，如果您的两个样式表都使用默认模式并在重叠的元素类型集上进行操作，这将不会很好地工作。因此，一些 XSLT 处理器添加了扩展来提供您所描述的那种功能（例如，参见 Xalan pipe:pipeDocument 扩展元素的讨论）。

当然，您也可以在 XSLT 之外处理管道。最简单的方法取决于您运行的环境。

如果您从操作系统 shell 运行 XSLT，并且您的 XSLT 处理器接受标准输入上的输入，您可以将输出从一个样式表通过管道传输到另一个：

```
xsltproc a.xsl in.xml | xsltproc b.xsl - > out.xml 
```

正如 mohammed moh 已经指出的那样，许多脚本环境可以做类似的事情：他提到了 PHP，当然还有 XProc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:22:42.280

是的你可以。您必须将源节点转换为 DOMDocument 我不知道您的编程语言是什么。例如 php 中的**transformToDoc()**在转换后可以在 DOMDocument 输出上运行新的 XSLT 样式表

# lex - lex：无法识别的字符串的默认规则

> ID：14739706
> 
> 赞同：5
> 
> 时间：2013-02-06T22:02:13.040
> 
> 标签：lex, flex-lexer

在 ocamllex 中，我可以`_`用作词法分析器规则来匹配任何与先前定义的规则不匹配的字符串，并引发错误。如何在 lex/flex 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:06:51.120

通常，您会定义这样的规则，该规则将在最后执行：

```
.|\n         { /* process default here */ } 
```

此规则将匹配任何其他规则不匹配的任何字符。

希望这可以帮助！

# xcode - iOS - 如何在仪器中读取内存泄漏报告

> ID：14739709
> 
> 赞同：0
> 
> 时间：2013-02-06T22:02:19.280
> 
> 标签：xcode, cocoa-touch, memory-leaks, instruments

我在 xcode 中使用工具发现我的应用程序中似乎有很多内存泄漏。当我从 UIImagePickerController 选择/压缩视频时，我发现大约 4.5MB 存储在我的文档和手机上的数据中，主要问题就出现了。当我删除视频的引用时，4.5MB 仍然存在并且没有被删除。有人能告诉我如何处理这份报告吗？这是否与我的随机数据存储在我的文档和数据中的问题有关。谢谢。

![在此处输入图像描述](../Images/c6ca53be72b8d806d45a483804ebd19a.png)

![在此处输入图像描述](../Images/8611612c08b3180f41f7cac1b9728d71.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:32:22.590

显然您有一个多线程应用程序（因为您使用的是 NSOperationQueue）。我假设您正在使用 ARC。可能是您的线程没有设置自动释放池吗？在这种情况下，在这样的线程中创建的所有自动释放对象都会泄漏，因为没有存储对它们的引用的自动释放池。请检查是否每个线程都有一个`@autoreleasepool{}`块设置，其中包含任何可以创建自动释放对象的指令（例如 getter）。

# android - 安卓4.2后台短信

> ID：14739715
> 
> 赞同：-5
> 
> 时间：2013-02-06T22:02:34.140
> 
> 标签：android, android-widget, android-service

我希望制作可以通过 SMS 查询监控我的余额的小部件。Nexus 4 现在会通知有关 SMS 的信息。但我希望它不要通知并不断查询我的余额。这些短信对我来说是免费的。

有没有办法实现这样的服务/小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:18:09.387

您应该将您的应用注册为“android.provider.Telephony.SMS_RECEIVED”广播事件的接收者。

正确处理短信有很多难点，试试看[这篇文章](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)

# windows - Oracle dbms_scheduler.run_job 用户名/密码无效

> ID：14739728
> 
> 赞同：2
> 
> 时间：2013-02-06T22:03:09.263
> 
> 标签：windows, oracle, security, scheduler

我正在尝试使用 Oracle 调用批处理文件来设置计划的外部作业。我在网上找到了很多关于这个的材料，但是我错过了一些东西。

我在 SQL Developer 中运行我的 PL/SQL（但我也在 SQLPlus 中尝试过）。我在输出窗口中遇到的错误如下。

```
Error starting at line 7 in command:
exec dbms_scheduler.run_job('my_job')
Error report:
ORA-27369: job of type EXECUTABLE failed with exit code: The storage control blocks were destroyed.
ORA-06512: at "SYS.DBMS_ISCHED", line 185
ORA-06512: at "SYS.DBMS_SCHEDULER", line 486
ORA-06512: at line 1
27369\. 00000 -  "job of type EXECUTABLE failed with exit code: %s"
*Cause:    A problem was encountered while running a job of type EXECUTABLE.
           The cause of the actual problem is identified by the exit code.
*Action:   Correct the cause of the exit code and reschedule the job. 
```

我在 dba_scheduler_job_run_details 中遇到的错误如下。

```
"EXTERNAL_LOG_ID="job_167045_46155",
ORA-27369: job of type EXECUTABLE failed with exit code: The storage control blocks were destroyed.
STANDARD_ERROR="Launching external job failed: Invalid username or password"" 
```

我认为这是我的批处理文件所在位置的某种权限问题。我正在尝试以维护帐户的身份运行该作业。如果我使用 Windows cmd 行“runas”命令并直接运行我的批处理文件，一切都很好。如果我通过 Oracle 运行，它不会。我尝试过不同的帐户，例如管理员帐户，但没有任何区别。

我用来创建我的凭证/工作的代码如下。

```
exec dbms_scheduler.create_credential( credential_name => 'oracle_cred', username => 'user', password => 'password', windows_domain => 'domain' );

DBMS_SCHEDULER.create_job ('my_job',
                          job_action => 'C:\WINDOWS\SYSTEM32\CMD.EXE',
                          number_of_arguments => 2,
                          start_date=> sysdate+1,
                          auto_drop=>FALSE,
                          job_type => 'executable',
                          enabled => FALSE
);   

DBMS_SCHEDULER.set_job_argument_value ('my_job', 1, '/C');
DBMS_SCHEDULER.set_job_argument_value ('my_job', 2, 'C:\maintenance\audit.bat');
dbms_scheduler.set_attribute('my_job', 'credential_name', 'oracle_cred');
DBMS_SCHEDULER.enable('my_job'); 
```

任何建议表示赞赏，

米

# ruby-on-rails - Rails 如何从我的 applicationController 中的查询中显示我的布局中的计数

> ID：14739731
> 
> 赞同：0
> 
> 时间：2013-02-06T22:03:37.107
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想在每一页的布局顶部都有一个计数器。计数器仅显示查询的计数。

我怎样才能让这个方法在每个页面上运行？

/控制器/ApplicationController.rb

```
def unviewed_count
    p 'we in unviewed_count'
    @count = Person.where("viewed = ?", '0').count
    p @count
end 
```

/views/layouts/layout.html.erb

```
<%= @count %> 
```

我试过`<%= @count %>`了`<%= unviewed_count%>`。前者只是不显示任何内容，而后者则显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:15:38.930

`before_filter`您需要使用 a 调用该方法`ApplicationController`：

```
class ApplicationController < ActionController::Base
  before_filter :unviewed_count

  ....
end 
```

# c# - 如何在asp.net mvc 4中将数据库中的项目显示为标签文本

> ID：14739737
> 
> 赞同：2
> 
> 时间：2013-02-06T22:04:02.967
> 
> 标签：c#, asp.net-mvc-4

所以我试图显示一些我从数据库中检索到的文本，并希望将它们显示为标签或只是显示在页面上。我无法显示此文本，这就是我所拥有的：

控制器：

```
public ActionResult _StudentName(int id)
    {
        id = 12;
        var model = new StudentNameModel();
        using (var db = new School())
        {
            var result = from s in db.Students
                         where s.ID == id
                         select s.StudentName;
            model.StudentName = result.ToString();
        }
        return View(model);
    } 
```

我的模型：

```
public class StudentNameModel
{
    [Display(Name = "Student Name")]
    public string StudentName { get; set; }
} 
```

我的观点：

```
 @model Adams.Models.StudentNameModel
     <fieldset>
     @Html.LabelFor(m => m.StudentName)
     @Html.TextBoxFor(m => m.StudentName)
</fieldset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:06:26.770

看来你只需要

```
@Html.DisplayFor(m => m.StudentName) 
```

代替

```
@Html.TextBoxFor(m => m.StudentName) 
```

顺便说一句，将您的查询更改为类似

```
var studentName = (from s in from s in db.Students
                         where s.ID == id
                         select s.StudentName)
                  .FirstOrDefault();
if (student != null)
   model.StudentName = studentName; 
```

# razor - ViewModel 中的 StringLength 未在文本框上设置 maxlength

> ID：14739738
> 
> 赞同：9
> 
> 时间：2013-02-06T22:04:05.987
> 
> 标签：razor, asp.net-mvc-4

这是我的 ViewModel 中的属性：

```
[Display(Name = "Ext.")]
[MaxLength(6, ErrorMessage = "Must be a maximum of 6 characters")]
[StringLength(6)]
public string Extension { get; set; } 
```

在我看来：

```
@Html.EditorFor(model => model.Extension) 
```

它呈现：

```
<input class="text-box single-line" data-val="true" data-val-length="The field Ext. must be a string with a maximum length of 6." data-val-length-max="6" id="Extension" name="Extension" type="text" value="" /> 
```

这应该在我的文本框上设置 maxlength 属性吗？如果没有，我怎么能用 DataAttributes 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T20:49:39.040

> *如果可能的话，我希望我在 ViewModel 中设置的属性来控制它。*

ASP.NET MVC 为此提供了一个可扩展的系统。这是您需要做的：

1.  实现一个自定义`ModelMetadataProvider`.
2.  查找`StringLengthAttribute`或`MaxLengthAttribute`，提取信息并将其添加到`ModelMetadata`。
3.  提供使用该信息的自定义编辑器模板。

**第 1 步：**实现自定义`ModelMetadataProvider`.

创建一个派生自`ModelMetadataProvider`. `DataAnnotationsModelMetadataProvider`通常你会从`CreateMetadata`.

**第二步：**提取信息：

要获取信息，您需要查找属性，提取最大长度信息并将其添加`AdditionalValues`到`ModelMetadata`. 实现看起来像这样（这是整个实现）：

```
public class CustomModelMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(
        IEnumerable<Attribute> attributes, 
        Type containerType, 
        Func<object> modelAccessor, 
        Type modelType, 
        string propertyName)
    {
        // Call the base class implementation to create the default metadata...
        var metadata = base.CreateMetadata(
            attributes, 
            containerType, 
            modelAccessor, 
            modelType, 
            propertyName);

        // Extract the stringLengthAttribute (you can do the same for the
        // MaxLengthAttribute if you want).
        var attr = attributes
            .OfType<StringLengthAttribute>()
            .First();

        // This could be getting called on a property that doesn't have the
        // attribute so make sure you check for null!
        if (attr != null)
        {
            metadata.AdditionalValues["maxLength"] = attr.MaximumLength;
        }

        return metadata;
    }
} 
```

为了让 ASP.NET MVC 使用它，您需要`Application_Start`在`Global.asax`.

```
ModelMetadataProviders.Current = new CustomModelMetadataProvider(); 
```

**第 3 步：**创建自定义编辑器模板。

您现在需要创建一个使用该信息的视图。`String`在`Views\Shared\`文件夹中创建一个名为的新视图。

**字符串.cshtml**

```
@{
    object maxLength;
    if (!ViewData.ModelMetadata.AdditionalValues
            .TryGetValue("maxLength", out maxLength))
    {
        maxLength = 0;
    }

    var attributes = new RouteValueDictionary
    {
        {"class", "text-box single-line"},
        { "maxlength", (int)maxLength },
    };
}

@Html.TextBox("", ViewContext.ViewData.TemplateInfo.FormattedModelValue, attributes) 
```

当您运行您的应用程序时，您将通过调用获得以下 HTML 输出`@Html.EditorFor`。

```
<input class="text-box single-line" id="Extension" maxlength="6" name="Extension" type="text" value="" /> 
```

如果您想了解有关模型元数据提供程序系统的更多信息，[B​​rad Wilson 有一系列博客文章](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)详细说明了它是如何工作的（这些是在 Razor 视图引擎之前编写的，因此某些视图语法有点时髦，但除此之外的信息是声音）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-13T19:54:13.540

基本上基于 Brad 的回答，使用 lambda 语法包装在 Html 助手的扩展中，这样您就不会用反射的东西污染 Razor 视图：

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;
using System.Web.Mvc;

public static class HtmlHelper
{
    public static int? MaxLength<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, TProperty>> expression)
    {
        MemberExpression memberExpression = (MemberExpression)expression.Body;

        PropertyInfo property = typeof(TModel)
            .GetProperty(memberExpression.Member.Name);

        StringLengthAttribute attribute = (StringLengthAttribute)property
            .GetCustomAttributes(typeof(StringLengthAttribute), true)
            .FirstOrDefault();

        if (attribute != null)
        {
            return attribute.MaximumLength;
        }

        return null;
    }
} 
```

像这样使用它：

```
@Html.TextBoxFor(x => x.Name, new { maxlength = Html.MaxLength(x => x.Name) }) 
```

其中`x`是指您的模型。

如果`StringLengthAttribute`未为该属性声明 ，`null`则将返回该属性，并且该`maxlength`属性在文本框元素上将为空。

请记住在您的剃须刀页面中包含使用，以便您可以访问该方法。

```
@using HtmlHelper 
```

您还需要对该方法使用不可为空的结果来克服编译错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-01T23:42:19.650

我遇到了类似的事情，这是我快速而肮脏的解决方案：

在 .cshtml 文件的顶部添加以下行：

```
@{
var max = ((System.ComponentModel.DataAnnotations.StringLengthAttribute)(typeof(MyType))
.GetProperty("MyProp")
.GetCustomAttributes(typeof(System.ComponentModel.DataAnnotations.StringLengthAttribute), true)[0]).MaximumLength;    
} 
```

在您的 html 中将 EditorFor 替换为以下内容：

```
@Html.TextBoxFor(model => model.Extension, htmlAttributes: new {maxlength=max }) 
```

我最终决定我宁愿只用脚本来做：

```
<script>
    $(function ()
    {
        var max = $("#myinput").attr("data-val-length-max");
        $("#myinput").attr("maxlength", max);
    });
</script> 
```

但是如果您不想添加脚本，第一个示例应该可以工作。

# razor - 乌姆布拉科的后裔或自我

> ID：14739739
> 
> 赞同：1
> 
> 时间：2013-02-06T22:04:06.503
> 
> 标签：razor, umbraco

我正在尝试在 razor 中为 umbraco 网站做一个 if 语句。我需要通过 Name 属性获取页面及其所有子级，以便能够向该页面和树中的任何子级添加样式表

我可以让父母没问题，但我对后代有困难，因为我不确定它会去哪里？

到目前为止，我有：

```
@{
    var selectedNode = @Model.Name();  
    if(@selectedNode == "blue")
    {
        do this
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:17:01.140

看起来你对剃须刀有点陌生。[这个答案](https://stackoverflow.com/questions/11116644/umbraco-razor-getting-fields-from-content/11119812#11119812)列出了一些很好的资源，可帮助您开始学习 Umbraco 的剃刀语法。

在回答您的问题时，我不确定我是否完全理解您要完成的工作。据我所知，您希望根据页面的名称或其祖先之一的名称向页面添加样式表。我建议关闭名称可能不是最佳选择。更稳定的解决方案是使用节点的 id。但是，这是一个希望能有所帮助的代码示例：

```
@{ 
    var nodes = Model.AncestorsOrSelf().Where("Name == @0", "Blue");

    if (nodes.Count() > 0)
    { 
        <link type="text/css" rel="Stylesheet" href="/css/style.css" />
    }
} 
```

上面的代码片段获取节点的祖先（包括它自己）并通过节点的名称（“蓝色”）过滤它们。然后它检查集合中是否有任何节点。如果有，那么当前节点要么是“蓝色”，要么它有一个名为“蓝色”的祖先，因此应用了该样式。

# php - 如何使用 Twig 和 Symfony2 创建确认框以将用户重定向到页面

> ID：14739740
> 
> 赞同：1
> 
> 时间：2013-02-06T22:04:14.587
> 
> 标签：php, javascript, symfony, twig, confirm

按下删除按钮时，我希望弹出一个警报，以确保用户没有犯任何错误。

因此，在 codeIgniter 中，我的这个效果很好：

按钮：

```
<td><a class='Right btn btn-danger' onClick="ConfirmMessage('news', <?php echo $new->id ?>,'news')">
                        <i class="icon-remove-sign icon-white"></i>
                    </a></td> 
```

Javascript：

```
function ConfirmMessage(type, id, types) {
    if (confirm("Are you sure you want to delete this "+type+" ?")) { // Clic sur OK
     document.location.href='<?php echo site_url(); ?>/'+types+'/delete/'+id;
    }
  } 
```

但是现在，使用 Symfony2，我不能这样做：

按钮

```
<td><a class='Right btn btn-danger' onClick="ConfirmMessage('artist', {{ artist.id }},'news')">
                            <i class="icon-remove-sign icon-white"></i>
                        </a></td> 
```

Javascript

```
function ConfirmMessage(type, id, types) {
    if (confirm("Are you sure you want to delete this "+type+" ?")) { // Clic OK
        document.location.href="{{ path('ymtest_Delete'"+types+", {'id': "+id+"}) }}";
    }
} 
```

因为当 Symfony 想要生成一个 url 时我得到一个错误。

有什么解决办法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:17:08.093

你不能写

```
 document.location.href="{{ path('ymtest_Delete'"+types+", {'id': "+id+"}) }}"; 
```

您正在混合树枝函数和 javascript 函数。Twig 将在后端解析和编译 收到 html 页面后，Javascript 将在您的客户端执行

您必须生成每个 url 类型并将其分配给 javascript 变量。

一种更优雅的方法是将您的 url 和消息存储在数据属性中

```
<a class="Right btn btn-danger" data-url="{{ path('ymtest_EditMusician', {'id': artist.id}) }}" data-message="Are you sure you want to delete this type ?" ></a> 
```

您现在可以将事件单击与 javscript 绑定并检索您的数据属性值。没有更多的 javascript 测试

# javascript - 在没有 Ajax 的 Javascript 中使用 C# 对象的属性更新输入元素？

> ID：14739741
> 
> 赞同：2
> 
> 时间：2013-02-06T22:04:21.217
> 
> 标签：javascript, asp.net, asp.net-mvc

根据组合框的选定值，我想更新表单中的一些输入元素。`List<Person>`组合框由控制器通过 ViewBag 传递的 a 填充：

```
@Html.DropDownListFor(x => x.Person, new SelectList(ViewBag.Persons, "Id", "Name"), "Choose", new { id = "comboBox" }) 
```

现在我想知道是否可以在不执行 Ajax 请求的情况下更新元素：

```
$(function () {
    $('#comboBox').change(function () {
        var person = this.options[this.selectedIndex];
        document.getElementById("Age").value = person.Age; // fault!
    });
}); 
```

换句话说：有没有办法将 .Net 对象传递给 JavaScript？也许通过一个额外的图书馆？或者我是否通过创建`SelectList`组合框来丢失所有信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:38:46.857

`person`是一个`HTMLOptionElement`。它没有`Age`属性。您可以访问`text`和`value`属性。

`document.getElementById("Age").value = person.value;`

在您的页面中插入一个 Person 对象的 Javascript 数组，然后您可以`Person`通过 Id 获取选择的对象并`Age`根据需要使用其中的属性。

```
<script type="text/javascript">
var people = [{"id": 1, "name": "foo", "age": 10}, {"id": 2, "name": "bar", "age": 20}, {"id": 3, "name": "baz", "age": 30}];

function getPerson(id) {
    for(var i=0, max = people.length;i<max;i++) {
        if(people[i].id === id) {
            return people[i];
        }
    }
    return null;
}
</script> 
```

# arrays - 在数组中使用间接

> ID：14739747
> 
> 赞同：0
> 
> 时间：2013-02-06T22:04:42.963
> 
> 标签：arrays, excel

我正在尝试使用其中包含间接的数组公式。该公式返回 #VALUE 但是，如果我使用 F9 求解数组的“间接”部分，然后求解数组的其余部分，它就可以工作。有任何想法吗？

以下是公式，希望在没有原始数据的情况下会有所帮助：

```
=SUM((dat = x)*(dat)*(INDIRECT(ADDRESS((MATCH(dat)),MATCH(dat)))) 
```

# java - Java 抽象类不能改装到现有的类上

> ID：14739748
> 
> 赞同：2
> 
> 时间：2013-02-06T22:04:49.773
> 
> 标签：java, abstract-class, mixins

我一直在阅读“Effective Java”我并没有真正遵循以下论点。如果有人可以帮我清除这个

抽象类不能用于定义 mixins，原因与它们不能改装到现有类上的原因相同：

特别是“我不明白‘抽象类不能改装到现有类’”

你能举个例子吗？

[http://books.google.se/books?id=ka2VUBqHiWkC&lpg=PA93&dq=Abstract%20classes%20cannot%20be%20used%20to%20define%20mixins%20for%20the%20same%20reason%20that%20they%20can't%](http://books.google.se/books?id=ka2VUBqHiWkC&lpg=PA93&dq=Abstract%20classes%20cannot%20be%20used%20to%20define%20mixins%20for%20the%20same%20reason%20that%20they%20can) _ 20be%20retrofitted%20onto%20existing%20classes&pg=PA93#v=onepage&q=Abstract%20classes%20cannot%20be%20used%20to%20define%20mixins%20for%20the%20same%20reason%20that%20they%20can't%20be% 20改造%20到%20现有%20类&f=false

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:16:47.213

想象一下，如果 Java 中不存在接口，但 Java 仍然是单继承。

现在想象一下，如果你想编写一个类，它是一种流，所以你让它从现有的 Stream 类继承，以防止重写所有代码。啊 - 但你也希望你的类是可序列化的，所以你从 Serializ 继承 - 等一下......你已经从 Stream 继承了。你也不能从那个类继承。所以，你现在处于一个困难的境地，你必须重写很多代码或者干脆放弃。

这就是“抽象类不能改装到现有类”的意思——如果一个类处于某种类型层次结构中，那么如果不重写类型层次结构，就不可能实现/继承新抽象类的行为。

（我也同意这本书解释得很清楚的评论）

# java - Android gif - 将位图转换为电影

> ID：14739749
> 
> 赞同：1
> 
> 时间：2013-02-06T22:04:53.983
> 
> 标签：java, android, gif

我正在为我的应用程序编写 .GIF 支持。

现在，我有一个不错的子系统，它可以下载大图像并调整它们的大小以适应屏幕，取自[这里](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

我需要找到一种将[Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html)实例转换为[Movie](http://developer.android.com/reference/android/graphics/Movie.html)实例的方法。

方法有：

```
Movie.decodeByteArray(byte[] data, int offset, int length)
Movie.decodeFile(String pathName)
Movie.decodeStream(InputStream is) 
```

也许解决方案隐藏在其中，也许没有，但现在我看不到从一个实例到另一个实例的任何路径。从 android-dev 页面更改方法不是解决方案（因为缓存仅适用于位图实例）。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:22:22.697

您在对象 Movie 上有“绘制”方法，如果您创建所需大小的画布，绘制位图，然后将此画布传递给 Movie 对象，该怎么办？

或者从您的 Bitmap 对象中获取字节：

```
Bitmap bmp...
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

# php - for 循环中的 If 语句难以为 SVG 图形生成正确的高度值

> ID：14739750
> 
> 赞同：0
> 
> 时间：2013-02-06T22:04:54.503
> 
> 标签：php, if-statement, graph, svg

重复上一篇文章，这次使用原始代码。

我正在创建 SVG 烛台图，但无法生成适当的高度。

x 值由**开盘价**决定。在某些情况下收盘价**高于**开盘价，因此需要相应调整仓位。

因为负值会产生错误，即根本没有矩形，所以我需要取**开盘价**和**收盘**价之间的差值并将这个值添加到 x 位置。

这是我现在拥有的代码。我将如何有效地执行这种类型的调整？

我考虑了一个 foreach 语句，但我的 php 知识有限，而且我一直遇到错误。

**已编辑**

X 值递增。Y值是开盘价。

```
 <?php

$open_price = array(5,10,15,20,25,30);
$closing_price = array (3,15,50,15,14);

$svg = '<svg id="main_graph" xmlns="http://www.w3.org/2000/svg" version="1.1" height="400" width="600" style="border:1px solid black;">';

$bars;

    for ($i=0, $count = count($open_price); $i<$count; $i++)

    {        
      $calculation = ($open_price[$i])-($closing_price[$i]);                    
      $bars .= '<rect x="'. $i * 5 . '" y="' . $open_price[$i] . '" width="20" height="' . $calculation . '" fill="blue"/>';                
    };

echo $graph = $svg . $bars . '</svg>';

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Crazy Bars</title>
    <style type="text/css">

        #main_graph {margin-left: 100px;}

    </style>

</head>
<body>    
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:30:42.287

您可能希望高度是`absolute value`收盘价和开盘价之间的差值。使用php的`abs()`函数来计算它。

```
$calculation = ($open_price[$i])-($closing_price[$i]); 
$abscalc = abs($calculation); 
```

然后，如果您希望柱在负价格变动的情况下向下显示，您还需要调整 y 值。

```
$y = $open_price[$i];
if ($calculation < 0) $y = $closing_price[$i];
$bars .= '<rect x="' . $i * 5 . '" y="'.$y.'" width="20" height="' . $abscalc . '" fill="blue"/>'; 
```

此代码将保持您的 x 值不变，并使条形图显示价格范围。柱高度将是价格差异的绝对值，柱的 y 位置将是开盘价或收盘价中的较低者。

# vb.net - 参数异常 - 路径不是合法形式 (vb.net)

> ID：14739756
> 
> 赞同：0
> 
> 时间：2013-02-06T22:05:20.133
> 
> 标签：vb.net, argumentexception

我目前在我正在制作的程序中遇到了最令人恼火的错误，我非常感谢任何可以帮助我解决它的帮助或建议。我遇到问题的程序部分是一个表单，它将所选图像加载到图片框中，然后在单击“保存”按钮时将其保存到 MS Access 数据库中。执行“Browse_Click”事件时，它会提示您搜索图像位置并将其加载到图片框（pbImage）中。该位工作正常并成功将其加载到图片框中。我遇到的问题是当我尝试将图像保存到我的访问数据库时，我收到以下参数异常错误“路径不是合法形式”。据我所知，我所有的代码都是功能齐全的，因为它以前可以工作，

下面的第一段代码是当我想将图片加载到图片框中时执行的。下面的部分是“保存”代码。

```
Public Class Manage_Cottages
Dim imgName As String
Dim daImage As OleDbDataAdapter
Dim dsImage As DataSet
Private Sub btnBrowse_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnBrowse.Click
    Dim dlgImage As FileDialog = New OpenFileDialog()
    dlgImage.Filter = "Image File (*.jpg;*.bmp;*.gif)|*.jpg;*.bmp;*.gif"
    If dlgImage.ShowDialog() = DialogResult.OK Then
        imgName = dlgImage.FileName
        Dim selectedFileName As String = dlgImage.FileName
        txtPath.Text = selectedFileName
        Dim newimg As New Bitmap(imgName)
        pbImage.SizeMode = PictureBoxSizeMode.StretchImage
        pbImage.Image = DirectCast(newimg, Image)
    End If
    dlgImage = Nothing
    imgName = " "
End Sub' 
```

保存代码

```
Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
    Dim cnString As String = "Provider=Microsoft.Jet.OLEDB.4.0;Persist Security Info=False;Data Source=..\Debug\CourseworkDatabase.mdb"
    Dim CN As New OleDbConnection(cnString)
    CN.Open()

     If imgName <> "" Then
        Dim fs As FileStream
        fs = New FileStream(imgName, FileMode.Open, FileAccess.Read) <----- where the error occurs.
        Dim picByte As Byte() = New Byte(fs.Length - 1) {}
        fs.Read(picByte, 0, System.Convert.ToInt32(fs.Length))
        fs.Close()
        Dim strSQL As String
        strSQL = "INSERT INTO Cottage_Details([Image]) values (" & " @Img)"
        Dim imgParam As New OleDbParameter()
        imgParam.OleDbType = OleDbType.Binary
        imgParam.ParameterName = "Img"
        imgParam.Value = picByte
        Dim cmd As New OleDbCommand(strSQL, CN)
        cmd.Parameters.Add(imgParam)
        cmd.ExecuteNonQuery()
        MessageBox.Show("Image successfully saved.")
        cmd.Dispose()
        CN.Close()
    End If
End Sub 
```

下面也是即时窗口中显示的前几行（不确定是否有助于诊断问题）

类型为“System.ArgumentException”的第一次机会异常发生在 mscorlib.dll System.Transactions 严重：0：http: [//msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled](http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled) Unhandled exceptionAlphaHolidayCottages .vshost.exeSystem.ArgumentException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089路径不是合法形式。在 System.IO.Path.NormalizePath（字符串路径，布尔 fullCheck，Int32 maxPathLength）

感谢您的时间和帮助，如果有人可以帮助我解决问题，那就太高兴了。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:46:47.313

您在末尾将 imgName 设置为“” `btnBrowse_Click`，因此当您保存文件时，`btnSave_Click`您会尝试将其保存为文件名“”。

尝试`imgName = " "`在 末尾删除`btnBrowse_Click`，或在保存之前为 imgName 分配一个正确的文件名。

# antlr - 与 AND 不匹配的 Antlr 标识符

> ID：14739760
> 
> 赞同：1
> 
> 时间：2013-02-06T22:05:24.087
> 
> 标签：antlr, antlr3

使用 Antlr 3.5 规则：

```
ID
 : ':'? ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*
 ; 
```

不匹配：**标准**

谁能解释为什么？

下面是完整的语法。您可以使用规则**colname**来测试“标准”。

```
grammar Sql;

options {
  language = Java;
  output = AST;
}

@rulecatch {catch (RecognitionException e) { throw e;}}

@header {
  package com.something.antlr.sql;
  import java.util.ArrayList;
}

@lexer::header {
  package com.something.antlr.sql;
}

@members {
 private List<Table> tables = new ArrayList<Table>();
 private List<Column> columns = new ArrayList<Column>();

 private StringBuilder joinClauses = new StringBuilder();

 private String withClauseAsString;
 private String tablesAsString;
 private String columnsAsString;
 private String aggregate;
 private String whereClauseAsString;
 private String orderByAsString;
 private String groupByAsString;
 private String limitAsString;

 public List<Table> getTables() {
  return tables;
 }

 public String getColumnsAsString() {
    return columnsAsString;
 }

 public List<Column> getColumns() {
    return columns;
 }

 public String getTablesAsString() {
    return tablesAsString;
 }

 public String getJoinClauseAsString() {
    return joinClauses.toString();
 }

 public String getWhereClauseAsString() {
    return whereClauseAsString;
 }

 public String getOrderByAsString() {
    return orderByAsString;
 }

 public String getAggregate() {
    return aggregate;
 }

 public String getGroupByAsString() {
    return groupByAsString;
 }

 public String getWithClauseAsString() {
    return withClauseAsString;
 }

 public String getLimitAsString() {
    return limitAsString;
 }

}

sql_statement
  : sql EOF;
   catch [RecognitionException e]{ throw e;}

sql
:
  (WITH with_clause)?
    {withClauseAsString = $with_clause.text;}
  SELECT DISTINCT? (TOP LPAREN? t=number_or_param RPAREN?)? columns?
      {
        StringBuilder sb = new StringBuilder();

        if ($DISTINCT.text != null) {
          sb.append(" distinct ");
        }

        if ($TOP.text != null) {
          sb.append(" top ");
        }

        if ($t.text != null) {
          sb.append(" ");
          if ($LPAREN.text != null) {
            sb.append("(");
          }
          sb.append($t.text);
          if ($RPAREN.text != null) {
            sb.append(")");
          }
          sb.append(" ");
        }

        sb.append($columns.text);
        columnsAsString = sb.toString();
      }
      (
      FROM tables*
           {tablesAsString = $tables.text;}

    (join_type? JOIN join_clause)*
     {
       String joinClauseAsString = "";

       if ($join_type.text != null) {
         joinClauseAsString = $join_type.text + " ";
       }

       if ($join_clause.text != null) {
        joinClauseAsString += $join_clause.text;
       }

       if (joinClauseAsString.length() > 0) {
          joinClauses.append("\n ");
          joinClauses.append(joinClauseAsString);
       }

     }

    (WHERE where_clause)?
          {whereClauseAsString = $where_clause.text;}

    (ORDER_BY order_by_clause)?
          {orderByAsString = $order_by_clause.text;}

    (GROUP_BY group_by_clause)?
          {groupByAsString = $group_by_clause.text;}
    (LIMIT t2=number_or_param)?
          {
            if ($t2.text != null) {
              limitAsString = " limit " + $t2.text;
            }
          }

    (UNION ALL? alt_sql)?
    )?
  ;

with_ident
:
  ID
;

with_clause
:
  with_ident (LPAREN columns RPAREN)? AS alt_sql
;

alt_sql
:
  LPAREN?
  (
  SELECT DISTINCT? (TOP number_or_param)? columns?
    FROM tables*
    (join_type? JOIN join_clause)*
    (WHERE where_clause)?
    (ORDER_BY order_by_clause)?
    (GROUP_BY group_by_clause)?
    (LIMIT NUMBER)?
    (UNION ALL? alt_sql)?
  )
  RPAREN?
;

exists_select
:
  SELECT NUMBER FROM tables (WHERE where_clause)?
;

in_select
:
  SELECT colname FROM tables (WHERE where_clause)?
;

colname_or_operand
:
 colname | LPAREN ID RPAREN | RANGE | CONSTANT |  TICK '*' TICK | alt_sql
;

case_test
:
  (ID '.')? function (CALC function)* operator (ID | NUMBER)
;

colname
:
  //CASE WHEN case_test ( (AND | OR) case_test)* THEN (NUMBER | ID) ELSE (NUMBER | ID) END alias
  CASE (WHEN where_logical THEN (ID | NUMBER | LITERAL))+ ELSE (ID | NUMBER | LITERAL) END alias
  |
  col = ID alias?
    {
    Column c = new Column($col.text, "");
    columns.add(c);
    }
  |
  tbl=ID '.' col=ID ('::' ID)? alias?
    {
    Column c = new Column($tbl.text + "." + $col.text, $alias.text);
    columns.add(c);
    }
  |
  (ID '.')? '*'
  |
  (ID '.')? func_name = function alias?
    {
    Column c = new Column($func_name.text, $alias.text);
    columns.add(c);
    }
  |
  col = (ID '::' ID)
    {
    Column c = new Column($col.text, "");
    columns.add(c);
    }
  |
  ('?' | NUMBER | LITERAL) (('::' | AS) ID)?
    {
    Column c = new Column("?", "");
    columns.add(c);
  }
;

columns
:
  (colname (CONCAT colname)* | alt_sql alias?) (',' (colname (CONCAT colname)* | alt_sql alias?))*
;

tablename
:
  ID alias?
    {
    Table tbl = new Table($ID.text, $alias.text);
    tables.add(tbl);
    }
  |
  (ID '.')? function alias?
  |
  t = TABLE LPAREN func = ID LPAREN arguments RPAREN RPAREN alias?
    {
    Table tbl = new Table($t.text + "(" + $func.text + "(" + $arguments.text + ")" + ")", $alias.text);
    tables.add(tbl);
    }
;

arguments
:
  argument (',' argument)*
;

argument
:
  colname
;

tables
  : tablename (',' tablename)*;

join_sql
:
  LPAREN
  SELECT DISTINCT? columns
  FROM tables*
  (WHERE where_clause) RPAREN alias
  ON where_expression
;

join_type
:
  ('left' 'outer'? | 'LEFT' 'OUTER'? | 'Left' 'Outer'?) | ('right' 'outer'? | 'RIGHT' 'OUTER'?  | 'Right' 'Outer'?)
;

join_clause
  :  (alt_sql alias | tablename alias? | colname) ON where_clause
  ;

alias
:
  AS? ID
;

exists_clause
:
  EXISTS LPAREN exists_select RPAREN
;

in_clause
:
  LPAREN (LPAREN in_select RPAREN alias? | in_values) (',' (LPAREN in_select RPAREN alias? | in_values))* RPAREN
;

in_values
:
  (NUMBER | LITERAL) (',' (NUMBER | LITERAL))*
;

where_expression
:
  LPAREN* ((colname operator (colname_or_operand | in_clause)) | exists_clause?) RPAREN*
;

where_logical
:
  LPAREN* where_expression ((AND | OR) where_expression)* RPAREN*
;

where_clause
:
  where_logical ((AND | OR) where_logical)*
;

number_or_param
:
  NUMBER | '?'
;

order_by
:
  (ID | NUMBER) (ASC | DESC)?
;

order_by_clause
  : order_by (',' order_by)*;

group_by_clause
:
  ID ('.' ID)? (',' ID ('.' ID)?)*
;

BETWEEN
:
 'between' | 'BETWEEN' | 'Between'
;

operator
  : '=' | '<' | '>' | '<=' | '>=' | '<>' | 'is' | 'Is' | 'IS' | BETWEEN |  IN |  'like' | '&lt;=' | '&gt;=' | '&lt;&gt;';

CALC
:
  '+' | '-' | '/'
;

function
:
  ID LPAREN DISTINCT? arguments? RPAREN ('::' ID)?
;

CONSTANT
:
  TICK ID TICK
;

LITERAL
:
  TICK .* TICK
;

TABLE : ('t' | 'T') ('a' | 'A') ('b' | 'B') ('l' | 'L') ('e' | 'E');
WITH : 'with' | 'WITH' | 'With';
SELECT : 'select' | 'SELECT' | 'Select';
DISTINCT : ('d' | 'D') ('i' | 'I') ('s' | 'S') ('t' | 'T') ('i' | 'I') ('n' | 'N') ('c' | 'C') ('t' | 'T');
TOP : 'top' | 'TOP' | 'Top';
CASE : ('case' | 'Case' | 'CASE');
WHEN: ('when' | 'When' | 'WHEN');
THEN : 'then' | 'Then' | 'THEN';
ELSE : 'else' | 'Else' | 'ELSE';
END : 'end' | 'END' | 'End';
FROM : 'from' | 'FROM' | 'From';
EXISTS : 'exists' | 'EXISTS' | 'Exists';
WHERE : 'where' | 'WHERE'| 'Where';
JOIN : ('left' | 'LEFT' | 'Left' | 'right' | 'RIGHT' | 'Right')? 'join' | 'Join' | 'JOIN';
ON : 'on' | 'ON' | 'On';
AND : ('a' | 'A') ('n' | 'N') ('d' | 'D');
AS : ('a' | 'A') ('s' | 'S');
OR : ('o' | 'O') ('r' | 'R');
IN : 'in' | 'IN' | 'In';
ORDER_BY : ('o' | 'O') ('r' | 'R') ('d' | 'D') ('e' | 'E') ('r' | 'R') ' ' ('b' | 'B') ('y' | 'Y');
ASC : ('a' | 'A') ('s' | 'S') ('c' | 'C');
DESC : ('d' | 'D') ('e' | 'E') ('s' | 'S') ('c' | 'C');
GROUP_BY : 'group by';
UNION : ('u' | 'U') ('n' | 'N') ('i' | 'I') ('o' | 'O') ('n' | 'N');
ALL :  ('a' | 'A') ('l' | 'L') ('l' | 'L');
LIMIT : 'limit' | 'LIMIT' | 'Limit';
CONCAT : '||';
TICK: '\u0027';

LPAREN
: '('
;

RPAREN
: ')'
;

RANGE
:
  (ID | '?') AND (ID | '?')
;

NUMBER
  : ('0'..'9')+;

ID
 : ':'?('a'..'z' | 'A'..'Z' | '_')('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;

WHITESPACE
 : (' ' | '\t' | '\n' | '\r' | '\f')+  {$channel = HIDDEN;}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:33:37.463

词法分析器有问题，`"standard"`因为您还定义了一个`RANGE`规则：

```
RANGE
 : (ID | '?') AND (ID | '?')
 ; 
```

可以标记`"standard"`为：

*   `ID`( `"st"`)
*   `AND`( `"and"`)
*   `ID`( `"ard"`)

请注意，这样的规则不应该是词法分析器规则，因为它不要求这些标记之间有任何空格。这是一个解析器规则：

```
range
 : (ID | '?') AND (ID | '?')
 ; 
```

进行更改后，我确定`"standard"`将被标记为`ID`令牌。

# java - 错误 java.sql.SQLException：参数索引超出范围

> ID：14739767
> 
> 赞同：0
> 
> 时间：2013-02-06T22:05:38.480
> 
> 标签：java

我仍然收到错误，即我没有为 1 个参数提供值，而且我不知道出了什么问题。

```
ps("INSERT INTO slide (presentation_id, duration, position, type) values (?, ?, ?, ?)     ").set(this.getId()).set(slide.getDuration()).set(slide.getPosition()).set(slide.getType().ordinal()).update(); 
```

在表中，我只为设置了自动增量的一列提供值。

对我来说一切似乎都很好，但请给出任何可能出错的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:09:22.003

不要在列列表中包含 auto inc 字段。

```
ps("INSERT INTO slide (duration, position, type) values (?, ?, ?)     ").set(slide.getDuration()).set(slide.getPosition()).set(slide.getType().ordinal()).update(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:14:00.400

尝试做一些更干净的事情而不是这个“训练代码”

这是一个例子：

```
String insertTableSQL = "INSERT INTO DBUSER"
        + "(USER_ID, USERNAME, CREATED_BY, CREATED_DATE) VALUES"
        + "(?,?,?,?)";
PreparedStatement preparedStatement = dbConnection.prepareStatement(insertTableSQL);
preparedStatement.setInt(1, 11);
preparedStatement.setString(2, "mkyong");
preparedStatement.setString(3, "system");
preparedStatement.setTimestamp(4, getCurrentTimeStamp());
// execute insert SQL stetement
preparedStatement .executeUpdate(); 
```

这是要遵循的链接：[http ://www.mkyong.com/jdbc/jdbc-preparestatement-example-insert-a-record/](http://www.mkyong.com/jdbc/jdbc-preparestatement-example-insert-a-record/)

# emacs - 在 emacs 中使用 Alt 键作为 Meta

> ID：14739778
> 
> 赞同：8
> 
> 时间：2013-02-06T22:06:23.653
> 
> 标签：emacs

不知何故，我正在使用的 emacs 不会将 Alt 视为 Meta。它只使用ESC。如果我按 Alt+x，它会告诉我“AX”未定义。我试图弄清楚如何将它映射到元，但在网络上没有运气，因为在我搜索的大多数结果中，人们默认将 Alt 作为元。我想这样的事情应该有效：

`global-set-key Alt(?) 'meta`

但我不确定如何在 lisp 中表示 Alt .. 有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-01T12:00:48.210

大多数解决方案会告诉您在 X11 级别更改键盘映射。wiki 存在信息过多的问题。如果您只想要一个仅在 emacs 级别上工作的解决方案（对 VNC/远程桌面非常有用），那么将以下行添加到您的 emacs 初始化文件中

```
;; Map Alt key to Meta
(setq x-alt-keysym 'meta) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-07T23:16:11.053

在 shell（甚至）中输入此命令`M-x shell`对我有用。

```
xmodmap -e "clear mod4" 
```

当问题是输出`xmodmap`包含显示 Meta_L 设置为 mod4 的行时，此方法有效：

```
mod4        Meta_L (0x73) 
```

Emacs 认为您的键盘具有 Meta 键，因此它不会将 Alt 解释为 Meta。上面的命令告诉 X 你没有 Meta 键，所以 Emacs 会按照我们习惯的方式解释 Alt。

我从[https://www.emacswiki.org/emacs/MetaKeyProblems](https://www.emacswiki.org/emacs/MetaKeyProblems)了解到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T13:56:38.800

我遇到了同样的问题，把它放在 ~/.emacs 中帮助了我。

```
(set-keyboard-coding-system nil) 
```

如果您需要更多帮助，请参阅此 [http://www.emacswiki.org/emacs/MetaKeyProblems#toc15](http://www.emacswiki.org/emacs/MetaKeyProblems#toc15)

# java - 如何在 XPages 中使用 java 向 Active Directory 进行身份验证

> ID：14739783
> 
> 赞同：0
> 
> 时间：2013-02-06T22:06:32.743
> 
> 标签：java, active-directory, xpages

我需要知道用户是否在 Microsoft Active Directory 中输入了正确的登录信息

我希望用户在 xpage 上输入用户名和密码，并且只有在这些值输入正确与否的情况下才会返回。

我知道我可以使用 ldap 请求并发送凭据，但还没有看到任何可行的解决方案。

我需要使用java，因为代码应该能够在非windows服务器上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:47:52.237

您可以采取多种方法：

*   最简单的方法是使用 DirectoryAssistance 将 AD 链接到 Domino，并让用户首先使用他们的 AD 凭据登录。
*   如果 IIS 在 AD 服务器上运行，您可以使用 Apache HTTPClient（和基本身份验证）发送 HTTP 请求并查看返回的内容
*   [最好的 Java 库在Apache Directory 项目](http://directory.apache.org/api/)中列出。在那里你会做一个 LDAP 查询（例如用户自己）

让我们知道哪一个适合您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:16:17.783

您可以使用 JNDI 访问 Active Directory。网上有很多关于如何做到这一点的资源，例如看看[http://mhimu.wordpress.com/2009/03/18/active-directory-authentication-using-javajndi/](http://mhimu.wordpress.com/2009/03/18/active-directory-authentication-using-javajndi/)

您已将问题标记为 XPage，您想从多米诺骨牌内部进行身份验证吗？在这种情况下，多米诺服务器可以进行身份​​验证。

# c# - 获取 OData 中子集合的下一页（WCF 数据服务）

> ID：14739785
> 
> 赞同：0
> 
> 时间：2013-02-06T22:06:45.417
> 
> 标签：c#, .net, wcf-data-services, odata, page-size

我有一个 WCF 数据服务 (OData V3)，它的页面限制为 100 个项目（对于所有实体）。

通常，如果我需要超出该限制，没有问题，因为我可以使用内置分页来获取下一页结果。

但是，我看不到“子结果”中内置的任何分页。我非常需要那个！

让我用一个订单列表的示例数据结构来说明：

```
List<Order> Orders
    |
  Order #1:---
    |        |
    |        |-- Customer
    |        |-- List<Item> ItemsOrdered
    |                | -- Wigdet Type 1
    |                | -- Wigdet Type 2
    |                | -- Wigdet Type 3
    |                | -- Wigdet Type 4
    |                | -- Wigdet Type 5
    |                | -- Wigdet Type 6
    |                | -- Wigdet Type 7
    | 
  Order #2:-
             |
             |-- Customer
             |-- List<Item> ItemsOrdered
                     | -- Wigdet Type 8
                     | -- Wigdet Type 4
                     | -- Wigdet Type 2 
```

如果我的页面限制设置为 5，那么我无法查询 ItemsOrdered 列表的其余部分。

**有没有办法对 OData 中的“子列表”进行延续？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:18:50.463

在协议级别，内部提要（或集合）将包含下一个链接，就像顶级链接一样。因此，您需要做的就是向该下一个链接发出 GET（它将继续枚举该扩展实体的实体，正确的内容被编码在下一个链接中）。

如果您使用的是 WCF DS 客户端库，则需要确保扩展属性的类型是 DataServiceCollection。因此，在您的情况下，ItemsOrdered 属性的客户端类型应该是 DataServiceCollection （请注意，这仅在客户端上是必需的，与数据在服务器上的建模方式无关）。

一旦你知道 DataServiceCollection 有一个 Continuation 属性，它就是下一个链接的表示。要发出加载更多的请求，最方便的方法是调用 context.LoadProperty(orderInstance, "ItemsOrdered", orderInstance.ItemsOrdered.Continuation);

# c - 在 C unix 中获取 CPU 指令时间而不考虑内存访问时间的函数

> ID：14739795
> 
> 赞同：1
> 
> 时间：2013-02-06T22:07:19.850
> 
> 标签：c, linux, performance, linux-kernel

我有下一个简单的功能，以便按进程测量计算时间：

```
double get_cpu_time()
{
  //LINUX      
  const static int64_t NANOS_PER_SEC = 1000000000L;
  struct timespec time;
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time);
  return (((int64_t) time.tv_sec) * NANOS_PER_SEC) + ((int64_t) time.tv_nsec);

}

ini_time = get_cepu_time();

//intesive computation code

end_time = get_cepu_time();

end_time = end_time - ini_time 
```

;

该函数返回每个过程的计算时间，在一个简单的等式中可以如下：

Tcomp = Tcpu + Taccmen => inst * ILP + #miss cache * 延迟时间

有趣的是只获取 Tcpu 时间（执行指令的时间，不考虑查找数据的时间），你知道任何函数来获取这个时间，或者返回内存访问时间的函数，那么我可以 sustract(tcomp - 塔克梅姆）

此致，

仁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:35:38.153

使用`perf`linux 上的命令来获取这种性能数据。

例如，在 x86 平台上

```
perf stat -B sleep 5

Performance counter stats for 'sleep 5':

      0.344308 task-clock                #    0.000 CPUs utilized          
             1 context-switches          #    0.003 M/sec                  
             0 CPU-migrations            #    0.000 M/sec                  
           154 page-faults               #    0.447 M/sec                  
        977183 cycles                    #    2.838 GHz                    
        586878 stalled-cycles-frontend   #   60.06% frontend cycles idle   
        430497 stalled-cycles-backend    #   44.05% backend  cycles idle   
        720815 instructions              #    0.74  insns per cycle        
                                         #    0.81  stalled cycles per insn
        152217 branches                  #  442.095 M/sec                  
          7646 branch-misses             #    5.02% of all branches        

   5.002763199 seconds time elapsed 
```

这将运行`sleep 5`命令并为您提供从 x86 处理器上的性能计数器收集的详细信息。您感兴趣的是查看执行的指令计数和周期数，该比率是它为您计算的每个周期的指令，它还告诉您处理器平均每条指令停顿了多少个周期。要获得缓存引用的数量和未命中的数量，您需要明确要求

```
perf stat -B -e cache-references,cache-misses,cycles,instructions 
```

请参阅[为什么 perf 不报告缓存未命中？](https://stackoverflow.com/questions/14674463/why-doesnt-perf-report-cache-misses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:54:43.447

...评论空间用完了...

如果您对分析算法感兴趣，并且想要抽象出内存访问时间，那么您将不得不将您的测试数据直接放在通用寄存器中......这样就可以组装了。但是如果你对堆栈内存访问时间没问题，那么你可以存根一些堆栈变量并使用它们......你可能真的不需要做任何这些，只需做

```
struct timespec time;
struct timespec time2;
clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time); 
something();
clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time2); 
```

然后担心完成后解码时间......你不想在你的get time函数中做一堆计算......如果你真的试图获得有意义的数据，那会导致问题......

如果您不担心时间，而是担心计算复杂性和指令数量，那么您应该编译为汇编并尝试遵循它......（有时说起来容易做起来难......）

```
 void simple()
{
    int i = 0;
    for (int j=0;j<25;j++)
        i+=j;
} 
```

//-> gcc -S -std=c99 simple.c

```
_simple:

Leh_func_begin1:
    pushq   %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    movl    $0, -4(%rbp)
    movl    $0, -8(%rbp)
    jmp LBB1_2
LBB1_1:
    movl    -4(%rbp), %eax
    movl    -8(%rbp), %ecx
    addl    %ecx, %eax
    movl    %eax, -4(%rbp)
    movl    -8(%rbp), %eax
    addl    $1, %eax
    movl    %eax, -8(%rbp)
LBB1_2:
    movl    -8(%rbp), %eax
    cmpl    $24, %eax
    jle LBB1_1
    popq    %rbp
    ret
Leh_func_end1: 
```

你可以理解它`LBB1_2:`对应于 for 循环的条件部分，然后跳回到`LBB1_1:`for 循环的内部，然后是 for 循环的增量部分，然后`LBB1_2:`再次下降到......凉爽的。

# sql - SQL 日期格式 [h]:mm:ss 像 Excel 一样，超过 24 小时

> ID：14739800
> 
> 赞同：1
> 
> 时间：2013-02-06T22:07:29.790
> 
> 标签：sql, tsql, format, sql-date-functions

Excel 内置日期**格式**[h] 的翻译：`mm:ss`在 T-SQL 或任何 SQL 平台中？

例子：

```
 General [h]:mm:ss   [mm]:ss     [ss]
   1.00000  24:00:00    1440:00         86400
   1.00000  24:00:00    1440:00         86400 
```

和

```
 2.00000  48:00:00    2880:00         172800 
```

对于 T-SQL，我将选择

```
Without century (yy) (1)    With century (yyyy) Standard    Input/Output (3)
  14                             114                   -    hh:mi:ss:mmm(24h) 
```

或者默认为 108，我很清楚我是否必须重新创建一个可以执行 `hh:mi:ss:mmm`( **+24h** ) 的函数？

非常欢迎评论；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:31:27.970

虽然 SQL Server 的`time`数据类型应该[映射到 CLR 的时间跨度数据类型](http://msdn.microsoft.com/en-us/library/ms131092.aspx)，但它只支持小于 24 小时的间隔。

SQL Server[`datediff`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)在计算间隔时也很棘手，因为它计算了两个日期时间之间的日期部分*边界*。例如，这应该是 1 秒的间隔，但如果您询问小时，datediff 会告诉您这是一个小时：

```
select datediff(hh, '2013-01-01T23:59:59', '2013-01-02T00:00:00')
-- Returns 1 
```

因此，您可能不得不推出自己的功能，但希望[这个答案](https://stackoverflow.com/a/13867469/880904)可以帮助您入门：

```
-- Setup test data
declare @minDate datetime = '2012-12-12 20:16:47.160'
declare @maxDate datetime = '2012-12-17 15:10:12.050'

-- Get timespan in hh:mi:ss
select cast(
        (cast(cast(@maxDate as float) - cast(@minDate as float) as int) * 24) /* hours over 24 */
        + datepart(hh, @maxDate - @minDate) /* hours */
        as varchar(10))
    + ':' + right('0' + cast(datepart(mi, @maxDate - @minDate) as varchar(2)), 2) /* minutes */
    + ':' + right('0' + cast(datepart(ss, @maxDate - @minDate) as varchar(2)), 2) /* seconds */

-- Returns 114:53:24 
```

# mysql - 从数据库中存储和检索用户购物车 - 购物车类 - CodeIgniter

> ID：14739803
> 
> 赞同：0
> 
> 时间：2013-02-06T22:07:44.517
> 
> 标签：mysql, codeigniter, shopping-cart

我还没有开始编码，真的只是想得到关于我的想法的反馈。

我想知道如何存储用户购物车内容，以便在他们返回网站后能够检索它们。

我对允许用户创建帐户的想法感到困惑，正如我在这个网站上看到的那样，强迫人们创建一个帐户以便将物品放入他们的购物篮是不好的做法。但是，如果我确实能够拥有一个帐户，那么我可以创建一个包含帐户信息的表，以及一个用于通过 CI Cart 类的函数存储用户购物车内容的列`$this->cart->contents;`（然后我必须在将其放入表之前进行序列化，对吗？）。

我还想知道是否可以将用户购物篮的内容存储到上述列中，然后在用户重新登录后将其检索回来以显示为用户购物篮内容。

拥有一个帐户将使您的购物车项目在不同的浏览器中可用，因为它们将与帐户相关联，而不是与您的会话相关联。

但是如果我不想实现拥有账户的客户，我是否只需要实现 Cart 类，而不与数据库交互（只需将配置文件中的会话变量设置为不过期，或在一年内过期等)? 我不明白为什么在这种情况下我需要 ci_sessions 表（使用它的任何论据？）

真的很困惑，因为我已经思考了很长时间，随着时间的推移变得更加困惑:(。有人可以为我解释一下。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:22:23.500

我认为让客户创建帐户总是一个好主意，因为

*   这是停止跨度的好方法。只允许注册和登录的用户访问结帐阶段比让任何人都可以访问要好得多
*   这也是收集可用于营销的客户信息的好方法

关于购物车，您可以通过确保 sess_use_database 在配置文件中设置为 true 来将会话保存到数据库

```
$config['sess_use_database'] = TRUE; 
```

这样，您可以在客户重新登录时将之前的商品添加到购物车中。

但我同意@dispake 你已经问了很多问题所以很难给你一个明确的答案

# cytoscape.js - 选择节点与在 cytoscape.js 中拖动图形

> ID：14739804
> 
> 赞同：1
> 
> 时间：2013-02-06T22:07:49.087
> 
> 标签：cytoscape.js

我在这里有一个小的 cytoscape.js 示例：

[https://s3.amazonaws.com/cyprob/standalone.html](https://s3.amazonaws.com/cyprob/standalone.html)

请注意，如果我单击一个节点，然后单击节点外部（但仍在图形 div 中），我会进入这种奇怪的模式，当我移动鼠标时，整个图形都会移动。除非重新加载页面，否则我无法退出此模式。

我有同一页面的另一个版本：

[https://s3.amazonaws.com/cyprob/standalone-noevents.html](https://s3.amazonaws.com/cyprob/standalone-noevents.html)

在这个版本中，我可以单击节点或图形中的任何位置，并且不会进入那种奇怪的图形拖动模式。

这两个版本的唯一区别是第一个版本在 ready 方法中有一个事件监听器：

```
cy.on('click', function(evt){
    console.log("the cytoscape graph was clicked");
    window.evt = evt;
    console.log( 'clicked ' + evt.cyTarget.id() );
}); 
```

所以我的问题是......我如何摆脱这种图形拖动模式？我可以有一个不会导致我进入该模式的事件侦听器吗？

# python - Python类装饰器扩展类导致递归

> ID：14739809
> 
> 赞同：5
> 
> 时间：2013-02-06T22:08:10.510
> 
> 标签：python, django, forms, recursion, save

我正在覆盖 a 的 save 方法，但`ModelForm`我不知道它为什么会导致递归：

```
@parsleyfy
class AccountForm(forms.ModelForm):
    def save(self, *args, **kwargs):
        # some other code...
        return super(AccountForm, self).save(*args,**kwargs) 
```

导致这个：

```
maximum recursion depth exceeded while calling a Python object 
```

Stacktrace 显示此行重复调用自身：

```
return super(AccountForm, self).save(*args,**kwargs) 
```

现在，欧芹装饰器是这样的：

```
def parsleyfy(klass):
    class ParsleyClass(klass):
      # some code here to add more stuff to the class
    return ParsleyClass 
```

正如@DanielRoseman 建议Parsley 装饰器扩展`AccountForm`原因`super(AccountForm,self)`以继续调用自身，解决方案是什么？

我也无法理解为什么这会导致递归。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T05:12:59.030

你可以做的就是直接调用父母的方法：

```
@parsleyfy
class AccountForm(forms.ModelForm):
    def save(self, *args, **kwargs):
        # some other code...
        return forms.ModelForm.save(self, *args,**kwargs) 
```

这应该可以巧妙地避免您的类装饰器引入的问题。另一种选择是在不同命名的基类上手动调用装饰器，而不是使用`@`语法：

```
class AccountFormBase(forms.ModelForm):
    def save(self, *args, **kwargs):
        # some other code...
        return super(AccountFormBase, self).save(*args,**kwargs)

AccountForm = parsleyfy(AccountFormBase) 
```

但是，您可能还想考虑使用[预保存信号](https://docs.djangoproject.com/en/dev/ref/signals/#pre-save)，这取决于您要尝试做什么 - 这是一个通常应该在 Django 中的模型保存过程的其余部分之前发生的添加功能的方式。

* * *

至于*为什么*会发生这种情况，请考虑评估代码时会发生什么。

首先，声明一个类。我们将引用这个原始类定义，`Foo`以将其与装饰器将创建的后续类定义区分开来。这个类有一个调用的`save`方法。`super(AccountForm, self).save(...)`

然后这个类被传递给装饰器，它定义了一个我们将调用的新类`Bar`，并继承自`Foo`。因此，`Bar.save`等价于`Foo.save`- 它也调用`super(AccountForm, self).save(...)`. 然后从装饰器返回第二个类。

返回的类 ( `Bar`) 分配给 name `AccountForm`。

因此，当您创建一个`AccountForm`对象时，您正在创建一个类型为 的对象`Bar`。当你调用`.save(...)`它时，它会向上查找`Bar.save`，这实际上是`Foo.save`因为它继承自`Foo`并且从未被覆盖。

正如我们之前提到的，`Foo.save`调用`super(AccountForm, self).save(...)`. **问题是由于类装饰器，`AccountForm`is not `Foo`，它是`Bar`- 并且`Bar`'s parent is `Foo`。**

因此，当`Foo.save`查找`AccountForm`的父母时，它会`Foo`...... 这意味着当它试图调用`.save(...)`那个父对象时，它实际上只是调用了自己，因此是无休止的递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:42:00.817

这是我为使其工作所做的工作，我可以更改 parsleyfy 类以覆盖保存方法，如下所示：

```
def parsleyfy(klass):
    class ParsleyClass(klass):
        def save(self, *args, **kwargs):
            return super(klass, self).save(*args, **kwargs)
    return ParsleyClass 
```

或将 AccountForm 的保存方法更改为：

```
@parsleyfy
class AccountForm(forms.ModelForm):
    def save(self, *args, **kwargs):
        return super(forms.ModelForm, self).save(*args,**kwargs) 
```

我没有什么区别的一件事是`super(Class, self)`vs`super(Parent, self)`我问过这个[问题](https://stackoverflow.com/questions/14743787/python-superclass-self-method-vs-superparent-self-method)

# html - 跳转 (#name) 不适用于 .asp 文件

> ID：14739816
> 
> 赞同：2
> 
> 时间：2013-02-06T22:08:38.780
> 
> 标签：html

页面名称是experts.asp。我想使用跳转来浏览一长串人员，并将他们名字的 h1 元素放在窗口顶部。我已经测试了跳转，它们在 HTML 页面上运行良好，而不是在我的 asp 页面上。请帮我这样做..

我的代码在这里..

```
<ul class="experts">
    <li><a href="#sami">Sami</a></li>
    <li><a href="#michael">Michael</a></li>
    <li><a href="#greg">Greg</a></li>
    <li><a href="#david">David</a></li>
    <li><a href="#tom">Tom</a></li>
    <li><a href="#gaston">Gaston</a></li>
    <li><a href="#matt">Matt</a></li>
    <li><a href="#dennis">Dennis</a></li>
    <li><a href="#michelle">Michelle</a></li>
    <li><a href="#maria">Maria</a></li>
    <li class="last"><a href="#greg">Greg</a></li>
  </ul> 
```

这是我想跳到的部分之一：

```
<h1 name="michael">Michael</h1> <img src="..." alt="Michael " class="expert">
 <p></p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:13:11.610

使用`id`属性而不是`name`.

```
<h1 id="michael">Michael</h1> <img src="..." alt="Michael " class="expert">
 <p></p> 
```

# php - curl 无法在 wamp 上运行可以打开 WordPress 安装程序，但是当单击 go 时会出现以下提示：C:\wamp\www\installer.php 中的 curl_init() 在第 364 行

> ID：14739819
> 
> 赞同：0
> 
> 时间：2013-02-06T22:08:43.070
> 
> 标签：php, wordpress, apache, localhost

这是一场噩梦，每当我点击我想出的安装程序页面时

```
Fatal error: Call to undefined function curl_init() in C:\wamp\www\installer.php on line 364 
```

我不知道该怎么做，已经编辑了 Apache 和 PHP 以删除 curl 代码，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:13:01.793

启用 php 扩展，然后重新启动 wampserver

![在此处输入图像描述](../Images/72e8843a4fb1c143a7296d5e91b979fc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:00:11.727

我有同样的问题，从这里下载 curl 修复扩展 ->

[http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)

先试试这个链接 -> php_curl-5.3.13-VC9-x64.zip

这似乎是一个 Windows 7 64 位问题。更改后不要忘记重新启动所有服务。

# internet-explorer - 提交按钮取消

> ID：14739822
> 
> 赞同：0
> 
> 时间：2013-02-06T22:09:05.347
> 
> 标签：internet-explorer, http, google-chrome, firefox, browser

首先让我说我不是网络人。我们有一个带有提交按钮的 html 表单，还定义了一个 onClicked 事件。onClicked 事件只是对几个字段进行数据验证。

在即，当按钮被单击两次时，似乎第一个请求被取消并且连接被切断。

在 Firefox 中，当按钮被单击两次时，似乎第一个请求已完成，而第二个请求从未发生。

在 Chrome 中，当按钮被点击两次时，第一个请求完成但在后台并且不会加载到浏览器中，而是第二个请求的结果是显示给用户的结果。

另一个有趣的转折是，如果我运行 fiddler，IE 会表现出与 Chrome 相同的行为。

有人可以向我解释这种行为吗？或者至少告诉我我描述的方式是否是它实际工作的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:44:54.870

当然我能感觉到你的痛苦，但这取决于浏览器。

我也很痛苦。但是我没有经历所有这些事情（如果你有兴趣，那没关系），我通过正确处理提交按钮来修复它。

当用户`submit`第一次点击按钮时..我禁用按钮，如果我的验证函数返回 true，表单将提交。

否则我将`submit` 再次启用该按钮。

这就是我为我的所有形式所做的，以摆脱我们的不同行为`TOP BROWSERS`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:50:47.010

您可以将`submit`事件用于表单验证，而不是`onClick`. [它在所有浏览器中都是一致的](http://www.quirksmode.org/dom/events/submit.html)，即使用户使用 enter 键提交表单也会触发。

[jQuery`submit`事件文档](http://api.jquery.com/submit/)

# java - 提高 BigDecimal 到双倍转换的性能

> ID：14739823
> 
> 赞同：6
> 
> 时间：2013-02-06T22:09:05.717
> 
> 标签：java, performance, double, bigdecimal

这是Jdk7-b147版本的[`BigDecimal.doubleValue()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/math/BigDecimal.java#BigDecimal.toString%28%29)

```
public double doubleValue(){
  if (scale == 0 && intCompact != INFLATED)
    return (double)intCompact;
  // Somewhat inefficient, but guaranteed to work.
  return Double.parseDouble(this.toString());
} 
```

他们承认这种方式效率低下！有没有比使用这种方法更好/更快的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T22:55:30.107

没有更好的方法将 a 转换`BigDecimal`为 a `double`。`foo * 10^bar`这是因为要高效地转换为的算法`baz * 2^quux`，同时保持非常具体的舍入语义，是非常讨厌和不愉快的——请参阅[`sun.misc.FloatingDecimal`](http://www.docjar.com/html/api/sun/misc/FloatingDecimal.java.html)详细信息，或阅读[本文](ftp://ftp.ccs.neu.edu/pub/people/will/howtoread.ps)。

`BigInteger.doubleValue()`另一方面，*它确实*有很多优化的机会，因为它不需要处理小数，而只需要处理整数。我有一个[JDK 补丁待定](http://hg.openjdk.java.net/jdk8/jdk8/jdk/rev/814759462705)，优化`BigInteger.doubleValue()`了两个数量级以上，尽管它仍在等待审查。

**更新：**该修复已添加到 OpenJDK 8 中，于 2014 年 3 月 18 日向公众提供。

# spring - 泽西岛的“默认应用程序上下文”是什么？

> ID：14739826
> 
> 赞同：3
> 
> 时间：2013-02-06T22:09:25.050
> 
> 标签：spring, jersey

我正在使用 Jersey 对 RESTful Web 服务执行验收测试。看起来好像我的 applicationContext.xml 在客户端加载时没有被加载。我看到以下日志输出：

```
INFO: Using default applicationContext 
```

泽西岛在找不到我的文件时会加载这个“默认”文件吗？或者这是否表明找到了我的文件？

```
@ContextConfiguration(locations={"/applicationContext.xml", "/applicationContextTest.xml"})
public class BaseResourceTest extends JerseyTest {

    final static URI baseUri = UriBuilder.fromUri( "http://localhost" ).port( 9998 ).build();

    public BaseResourceTest() throws Exception {        
        super(new WebAppDescriptor.Builder("xxx.yyy.zzz").contextPath(baseUri.getPath())
                .contextParam(
                    SpringServlet.CONTEXT_CONFIG_LOCATION, "classpath:applicationContextTest.xml" )
                .servletClass(SpringServlet.class )
                .contextListenerClass( ContextLoaderListener.class )                
                .build());
    }

.......
some tests
.......

} 
```

我的 web.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>xxx.yyy.LoggingAssuranceListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>jersey-servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>xxx.yyy.zzzz</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
         <param-name>com.sun.jersey.config.property.WadlGeneratorConfig</param-name>
         <param-value>xxx.yyy.zzz.BroadsoftWadlGeneratorConfig</param-value>
    </init-param> 
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-servlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

# java - 如何使带有匿名内部类 actionlistener 的 JButton 在单击时自行删除？

> ID：14739828
> 
> 赞同：0
> 
> 时间：2013-02-06T22:09:30.350
> 
> 标签：java, swing, jbutton, actionlistener

您好，感谢您提前阅读本文，这是我的问题：

```
final JButton button = new JButton();

        button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent actionevent)
            {
                button.setVisible(false);
                button.validate();
                button.invalidate();
                button.revalidate();
                button.repaint();
            }
        }); 
```

我已经尝试了所有这些来让那个按钮消失，我也禁用了它，但我需要它只是消失，而不是淡出或其他东西。背景是可变的，所以我无法制作它，所以它的颜色与它相同，并假装它不存在。有没有人有任何线索如何让它消失？

**编辑**：到目前为止，我已经尝试了所有答案，非常感谢你，但按钮仍然存在 :(

**EDIT2**：我认为我犯了一个很大的错误，因为我的计时器不断添加按钮，感谢所有帮助，这仍然非常有用！

**EDIT3**：非常感谢大家，我已经在你们的帮助下解决了这个问题:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:14:31.323

如果要删除按钮：

```
Container parent = button.getParent();
parent.remove(button);
((JComponent) parent).revalidate();
parent.repaint(); 
```

如果要从按钮中删除动作侦听器：

```
public void actionPerformed(ActionEvent actionevent)
{
  button.removeActionListener(this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:14:15.547

如果您在“处理”后不需要它，请随时将其从父代中移除。

`button.getParent().remove(button);`

否则，请遵循 HoverCraftFullOfEel 的建议。

# ios - AFNetworking JSONRequestOperation

> ID：14739829
> 
> 赞同：0
> 
> 时间：2013-02-06T22:09:38.280
> 
> 标签：ios, objective-c, afnetworking

`AFJSONRequestOperation`当请求成功时有一个`successBlock`块，但是除了在操作本身之外，没有办法设置“身份验证块”，所以如果失败，那么就没有办法将`AFJSONRequestOperation`. 这是正确的，还是我错过了什么？

我希望能够告诉调用者整个操作失败，因为授权失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:14:55.310

实际上该方法将两个块作为参数成功和失败

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:successBlock failure:failureBlock]; 
```

所以在失败块中你应该能够通知调用者失败

# c++ - 文件未正确读入

> ID：14739830
> 
> 赞同：0
> 
> 时间：2013-02-06T22:09:43.547
> 
> 标签：c++, fstream

我有一个读取文件的程序。我所有的类都编译得很好，但是当我读入文件时似乎有错误。Eclipse 显示正在读取一个空字符串 ("")，这不是我想要的。

我在下面有一个带有 while 循环的 main 代码。我放置循环只是为了看看它在调试时如何运行，它运行一个无限循环，因为它总是在“”中读取，并且永远不会到达文件末尾。为了确定，我已将文件放在工作目录和所有其他文件夹中，但即使文件中充满了字符串和整数，它也总是这样做。我在这里做错了什么吗？

```
#include "Translator.h"
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string>

using namespace std;

int main(int argc, char* argv[])
{
    ifstream readFile;
    readFile.open("sample.html");

    while (!readFile.eof()) // for debugging purposes only
    {
    string x;

    readFile >> x; // x is "" everytime through the loop
    readFile >> x; // x is also ""
    }
    Translator t(readFile);

    readFile.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:24:01.643

我的猜测是您的文件实际上并未打开，`eof`因此未设置该位。您永远不会测试文件是否已成功打开。可能是您的工作目录不是您认为的那样，或者文件被另一个进程锁定（可能在文本编辑器中打开）。

官方是`readFile.fail()`在尝试打开后进行测试。

我发现检查`readFile.good()`也很好——事实上你可以用它作为你的循环条件。

我更喜欢代码中“好”的积极信息，而不是可能令人不安的“失败”。

当您阅读数据时，您还应该按照 WhozCraig 在评论中的建议测试您的流。您不能假设操作是成功的。如果它因 EOF 以外的原因而失败，您需要知道。

由于这些原因，请勿`readFile.eof()`用作循环条件。

# java - 参数中的 3 个点是什么？/什么是可变参数 (...) 参数？

> ID：14739831
> 
> 赞同：8
> 
> 时间：2013-02-06T22:09:45.967
> 
> 标签：java, arrays, methods, parameters, arguments

我想知道`...`Java 中的参数是如何工作的。例如：

```
public void method1(boolean... arguments)
{
  //...     
} 
```

这像`array`吗？我应该如何访问参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:10:56.617

它称为[**变量参数**](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)或简称**var-args**，在 Java 1.5 中引入。优点是您可以在调用该方法时传递任意数量的参数。

例如：

```
public void method1(boolean... arguments) throws Exception {
    for(boolean b: arguments){ // iterate over the var-args to get the arguments.
       System.out.println(b);
    }
 } 
```

上面的方法可以接受下面所有的方法调用。

```
method1(true);
method1(true, false);
method1(true, false, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:33:04.637

根据其他答案，它是一个“可变参数”参数。这是一个数组。

很多人没有意识到的是两个重要的点：

*   您可以*不*带参数调用该方法：`method1();`
*   当你这样做时，参数是一个空数组

许多人认为如果您不指定参数，它将为 null，但 null 检查是不必要的。

* * *

您可以通过像这样调用它来*强制传递一个空值：*

```
method1((boolean[])null); 
```

但我说如果有人这样做，就让它爆炸吧。

# java - OpenGL初始化方法

> ID：14739833
> 
> 赞同：0
> 
> 时间：2013-02-06T22:09:49.730
> 
> 标签：java, opengl, lwjgl

我已经在 OpenGL 中编码了几个月，并且主要从事 3D 工作。我的 init 方法如下所示：

```
private void initGl() {
    glViewport(0, 0, Display.getWidth(), Display.getHeight());
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    GLU.gluPerspective(45.0f, Display.getWidth() / Display.getHeight(), 1.0f, 100.0f);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClearDepth(1.0f);
    glDepthFunc(GL_LEQUAL);
    glEnable(GL_DEPTH_TEST);
    glShadeModel(GL_SMOOTH);
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
    glEnable(GL_FOG);
    glFogi(GL_FOG_MODE, GL_EXP2);
    glFogf(GL_FOG_DENSITY, density);
    glHint(GL_FOG_DENSITY, GL_FASTEST);
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);

    vbo = new VBO();
} 
```

这一切都是必要的吗？我想知道我是否在正确的地方调用 loadIdentity()，我也应该在 gluPerspective 之后调用它吗？基本上，何时是调用 loadIdentity() 的合适时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:57:07.077

OpenGL 新手的一个常见误解是，OpenGL 以某种方式被“初始化”。OpenGL 是一个基于状态的绘图机。这意味着“init”函数中的所有这些函数都设置了一些与绘图相关的状态。状态机的特殊之处在于，在实际使用时，您可以在每次需要时设置所有状态，就在您需要的时候。或者换句话说：没有像“OpenGL 初始化”阶段这样的东西。“init”函数中的大多数调用实际上都属于绘图代码。

主要的例外是真正一次性初始化的 OpenGL 对象，如纹理或 VBO。

# postgresql - plpython 获取 INSERT TRIGGER 上的所有行

> ID：14739834
> 
> 赞同：1
> 
> 时间：2013-02-06T22:09:54.530
> 
> 标签：postgresql, plpython

我正在尝试使用 python 触发器过程实现类似于复制的东西。

**程序**

```
CREATE OR REPLACE FUNCTION foo.send_payload()
RETURNS trigger AS
$$
  import json, zmq

  try:
    payload = json.dumps(TD)
    ctx = zmq.Context()
    socket = ctx.socket(zmq.PUSH)
    socket.connect("ipc:///tmp/feeds/0")
    socket.send(payload)
    socket.close()
  except:
    pass
$$
LANGUAGE plpython VOLATILE; 
```

**扳机**

```
CREATE TRIGGER foo.my_trigger
  AFTER INSERT
  ON foo.my_table
  FOR EACH ROW
  EXECUTE PROCEDURE foo.send_payload(); 
```

这确实有效，但效率不高。行是批量插入的，我想重用套接字来发送所有行。但是，当我执行语句级触发器时，我无权访问这些行。

我正在考虑定义一个序列，该序列将是最后处理的行 id。然后使用它`SELECT`在语句级触发器内部获取过程中的所有数据。问题是似乎没有一种方法可以在不增加序列值的情况下获取它。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:19:45.557

使用两个触发器。“FOR EACH ROW”会将行堆叠在某个临时位置（可能是[SD](http://www.postgresql.org/docs/current/interactive/plpython-sharing.html)），“FOR EACH STATEMENT”将从共享位置获取数据，发送并清除共享位置。

或者（我认为这是更好的主意），您可以使用 LISTEN/NOTIFY，正如我曾经在我的博客中[描述的那样。](http://www.depesz.com/2012/06/13/how-to-send-mail-from-database/)

# dom - 来自dom的Angular JS更新模型

> ID：14739836
> 
> 赞同：7
> 
> 时间：2013-02-06T22:10:10.677
> 
> 标签：dom, angularjs

我已经看到很多关于此的问题，所有这些问题似乎都可以通过调用[$scope.$apply()](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)、[$scope.$digest()](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24digest)或触发输入上的 change() 方法来解决。但我似乎无法让它与任何这些方法一起工作。在这个小提琴中，我可以在框中键入一个名称，并在我键入时获取要更新的模型值。但是当我单击链接时，要将输入名称设置为某个值，我希望更新模型名称。我需要做什么？

我尝试这样做的原因是我希望能够在用户使用浏览器自动填充或 LastPass 或类似工具自动填充表单时刷新我的角度模型。当然有一些角度命令可以从 DOM 刷新模型？

[http://jsfiddle.net/PXCUq/](http://jsfiddle.net/PXCUq/)

```
$(function () {
    $('#setFirstName').click(function () {
        $('input.firstname').val('Test Name');
        angular.element($('input.firstname')[0]).scope().$apply();
        // Model still not updated
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T22:40:27.393

获取范围，然后更改 ng-model 属性：

```
$('#setFirstName').click(function() {
    var scope = angular.element($('input').get(0)).scope()
    scope.firstname = 'Test Name';
    scope.$apply();
}); 
```

你可以想出一个更好的 jQuery 选择器。我只关注 Angular 部分。

[小提琴](http://jsfiddle.net/mrajcok/XysvF/)。

# jquery - 设置宽度不高于 100%

> ID：14739837
> 
> 赞同：1
> 
> 时间：2013-02-06T22:10:10.650
> 
> 标签：jquery

如何`width`根据变量值进行设置，使其永远不会高于 100%？

```
var progBarValue = $(this).find('.days-due').text();

$(this).find('.bar').width(progBarValue +"%"); 
```

我需要将该`width`值限制为最大 100%。

例如：如果 progBarValue 返回 250%，`width`则仍将是 100%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:14:58.180

我认为您将不得不修改变量本身，因为宽度属性可以> 100％。

```
var progBarValue = $(this).find('.days-due').text();
progBarValue = progBarValue > 100 ? 100 : progBarValue;
$(this).find('.bar').width(progBarValue +"%"); 
```

# javascript - Prototype JS - 计算剩余宽度

> ID：14739841
> 
> 赞同：2
> 
> 时间：2013-02-06T22:10:32.647
> 
> 标签：javascript, prototypejs, width

对于这样的 div

```
<div style="width:200px;">
    <span>Element 1</span>
    <span>Element 2</span>
    <span>Element 3</span>
    <span>Element 4</span>
    <span>Element 5</span>
</div> 
```

如何使用 javascript 或 Prototype JS 计算最后一个 span 元素右侧的剩余空间。Span 元素具有动态宽度，我必须在 div 的最后一行右侧找出剩余的空白空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:02:09.923

您可以尝试以下方法：

```
var div = $("divId"); // Get the extended div element
var width = div.measure("width");
var offset = div.cumulativeOffset();

var span = document.createElement("span");
div.appendChild(span); // Append an empty span at the end of the last line
var spanOffset = span.cumulativeOffset();

var emptySpace = (width - (spanOffset.left - offset.left)) % width;
span.remove(); 
```

根据 div 样式（边框、填充等），这可能会变得更加复杂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:12:17.630

这是我从父 div 开始的方式...

```
var t = $$('div span')[4];

var width = t.up().getWidth() - t.getWidth(); 
```

您可以根据自己的喜好修改 CSS 选择器，`$$()`但我是基于您提供的 HTML。

[http://api.prototypejs.org/dom/Element/prototype/getWidth/](http://api.prototypejs.org/dom/Element/prototype/getWidth/)

# apache - 使用 IE8 无法通过 SSL 加载网站

> ID：14739845
> 
> 赞同：0
> 
> 时间：2013-02-06T22:10:39.490
> 
> 标签：apache, ssl, internet-explorer-8, windows-xp

在最终找到我的 SSL 证书在 IE8 (SNI) 中被拒绝的原因后，我修复了这个问题，但现在网站根本无法加载（最终超时）。

我不太确定如何诊断，因为所有 SSL 验证工具都检查正常，它适用于所有其他浏览器，而谷歌没有发现任何有用的东西。

该网站是：[https ://api.atlanticpharmaceutical.ca/test.php](https://api.atlanticpharmaceutical.ca/test.php)

该站点可以在 IE 中的其他浏览器中运行，并且 IE 可以正常加载其他 HTTPS 站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:48:44.640

问题最终成为 SSL 验证器之一告诉我添加的配置选项，特别是：

```
SSLProtocol -ALL +SSLv3 +TLSv1
SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP 
```

# iphone - 我如何了解 IOS 应用程序是否进入后台？

> ID：14739849
> 
> 赞同：0
> 
> 时间：2013-02-06T22:10:54.020
> 
> 标签：iphone, ios, ios5, mobile, ios6

在我的应用程序中，我在某些部分增加了屏幕的亮度，当然我需要在退出我的应用程序之前将其恢复为原来的值。但我无法捕捉到用户是否使用按钮并将应用程序置于后台。有什么方法可以了解应用程序是否可以在后台运行，这样我就可以将屏幕亮度更改为旧值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:13:25.713

您需要使用以下 AppDelegate 方法来实现您的代码，这是要走的路

```
- (void)applicationDidEnterBackground:(UIApplication *)application
- (void)applicationWillEnterForeground:(UIApplication *)application
- (void)applicationWillResignActive:(UIApplication *)application
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:39:29.113

为了完成，我将补充一点，您可以像其他人已经说过的那样在您的应用程序委托中执行此操作。
**但**有时在应用程序委托中执行此操作没有意义，对于这种情况，有`NSNotification`类似 :的情况`UIApplicationWillEnterForegroundNotification`。[您将在UIApplication 类参考](http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/data/UIApplicationWillResignActiveNotification)的底部找到这些通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:13:26.293

在您的 appDelegate 类中`- (void)applicationWillResignActive:(UIApplication *)application` 实现代码 `- (void)applicationDidBecomeActive:(UIApplication *)application`

# javascript - 使用 $(document).on 将多个事件绑定到同一个元素

> ID：14739854
> 
> 赞同：8
> 
> 时间：2013-02-06T22:11:11.790
> 
> 标签：javascript, jquery

我正在尝试习惯 jQuery 中新的正确做事方式，但我不知道如何进行与原始绑定一样优雅/干燥的“实时”绑定。以前，使用“live”我相信你可以做到这一点，只提到一次元素：

```
$("#element_id").live("click",function(){
  //stuff
}).live("mouseover", function(){
  //stuff
}).live("mouseout", function(){
  //stuff
}); 
```

现在，`$(document).on`看来我需要这样做：

```
$(document).on("click","#element_id",function(){
  //stuff
}).on("mouseover","#element_id",function(){
  //stuff
}).on("mouseout","#element_id",function(){
  //stuff
}); 
```

这不太简洁并且重复了元素。有没有明显更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T22:13:13.283

```
$(document).on({
    click: function () {},
    mouseover: function () {},
    mouseout: function () {}
}, '#element_id'); 
```

小心使用`document`；您可能想要使用更具体的选择器。此外，我不一定会说动态加载 ID 元素是不好的做法，但它看起来很可疑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T22:19:56.430

如果您的回调需要共享代码，我发现这种方法很有用：

```
var handler = function ( event ) {

    var $target = $( event.target );

    if ( $target.is( '#element_id' ) ) }

        switch ( event.type ) {
            case 'click':
                // stuff
            break;
            case 'mouseenter':
                // stuff
            break;
            case 'mouseleve':
                // stuff
            break;
        }

    }

};

$( document ).on({
    click: handler,
    mouseenter: handler,
    mouseleave: handler,
}); 
```

# facebook - og:image 和 facebook linter 显示 2 个不同的图像

> ID：14739859
> 
> 赞同：1
> 
> 时间：2013-02-06T22:11:23.293
> 
> 标签：facebook, facebook-opengraph

一周前我更改了这篇文章中使用的 og:image，当您在 linter 中检查 url 时，旧的仍然出现。元标记中的网址相同，但图片不同。会不会是 FB 缓存问题？一个星期？如果是这样，有没有办法清除 fb 缓存？

[http://blogs.edweek.org/edweek/Bridging-Differences/2013/02/dear_alfie_i_follow_your.html](http://blogs.edweek.org/edweek/Bridging-Differences/2013/02/dear_alfie_i_follow_your.html) 应该出现的图像

但是您会看到 linter 仍然显示旧图像（太小）。我的印象是 linter 会刷新缓存。我确实读过在其中放置了一个完全不同的图像网址，然后将其切换回来，但它没有用。当我更改 url 时，它确实得到了更新，但是当我将 url 放回另一个文件名时。即使该网址中的图像不同，旧图像仍会显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:23:20.577

> Facebook 有一个名为[Debugger](https://developers.facebook.com/tools/debug)（以前称为 URL Linter）的工具。（...）我们可以将这个工具用于任何 url，它会获取最新的标题、描述、摘录和其他将在共享链接时显示的内容。如果您在此工具中使用已共享的 URL，则 Facebook 会获取最新内容，并使用最新内容更新其缓存。

更多信息[在这里](http://umairj.com/146/how-to-clear-facebook-shares-cache/)。我还发现您可以尝试`fbrefresh`在此调试器中使用参数 - [Facebook Open Graph not clearing cache](https://stackoverflow.com/questions/5776567/facebook-open-graph-not-clearing-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T02:41:10.540

是的，在用于导致 Facebook 更新 og:image 的 URL 上运行 lint 检查器/调试器。我只是为此苦苦挣扎，并通过将“？1”附加到我为图像提供的 URL 来解决问题。我再次通过 lint checker 运行它，Facebook 更新为新图像。

Apache 忽略静态文件上的查询参数。我不知道其他网络服务器。如果虚拟查询参数有问题，您可以尝试更改图像的文件名。

我怀疑 Facebook 已经改变了他们的缓存。感谢您自己完成了该实验，让我免于等待缓存过期的痛苦。

# c# - 如何解决 .NET Dll Hell？

> ID：14739862
> 
> 赞同：11
> 
> 时间：2013-02-06T22:11:29.380
> 
> 标签：c#, .net, dll

怎么修？

我有 2 个使用 NewtonSoftJson.dll 的第 3 方程序集。问题是其中一个使用较旧的 3.xx，另一个使用 4.5.x。因此，在运行时，至少 2 个程序集中的 1 个会抱怨另一个程序集。

我该如何解决这个问题？我可以设置服务，但代码和环境目前没有这样设置。在给定的时间内，重构也太多了，无法安全地完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:21:45.370

我碰巧遇到了 Newtonsoft 和另一个第三方库的确切问题。Newtonsoft v3.x 和 v4.x 的问题在于，较新的库现在带有公钥令牌。这使得程序集重定向解决方案毫无用处；但对于大多数其他情况，这是一个完全有效的解决方案。

我最终自己重新实现了第三方库。如果您有权访问第三方库的源代码，则始终可以使用较新的 Newtonsoft DLL 重新构建库。如果任何方法签名发生更改，您可能需要进行细微更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T22:16:35.580

微软文章“[重定向程序集版本](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)”有这样的说法：

> 以下示例显示如何将 myAssembly 的一个版本重定向到另一个版本，并关闭 mySecondAssembly 的发布者策略。

```
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="myAssembly"
          publicKeyToken="32ab4ba45e0a69a1"
          culture="en-us" />
        <!-- Assembly versions can be redirected in application, 
          publisher policy, or machine configuration files. -->
        <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
      <assemblyIdentity name="mySecondAssembly"
        publicKeyToken="32ab4ba45e0a69a1"
        culture="en-us" />
        <!-- Publisher policy can be set only in the application 
          configuration file. -->
        <publisherPolicy apply="no" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T22:17:56.743

通常，您可以通过 app/web 配置中的配置来解决此问题。您可以使用探测元素指定私有路径并将两个版本放在不同的文件夹中：

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <probing privatePath="bin;bin2\subbin;bin3"/>
      </assemblyBinding>
   </runtime>
</configuration> 
```

另一种方法是使用程序集绑定重定向。但这只有在您知道版本兼容时才有效。由于您没有直接使用它们，我不确定您是否知道这一点，并且发布者通过更改程序集版本表明存在一些不兼容性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T23:44:50.473

最终使用反编译器，将项目添加到解决方案，引用新的 dll，修复错误并重新编译，指向最近添加的项目。

由于公钥令牌已更改，我无法使用程序集重定向。显然，使用不同的密钥来编译 1 个引用的程序集。不得不采取更严厉的措施。

# php - PHP cURL 获取动态内容

> ID：14739865
> 
> 赞同：0
> 
> 时间：2013-02-06T22:11:34.840
> 
> 标签：php, curl

我正在尝试使用 cURL 和 PHP 从网页上抓取代理。但是，当我使用 cURL 时，我得到的只是 $content 中的 CSS。该页面使用 wordpress，因此它可以动态加载内容，但我没有找到任何可以帮助我下载动态内容的内容。我在 linux 中使用 wget 并且页面下载正常。

```
 <?php
//$source1 = file_get_contents('http://www.new-fresh-proxies.blogspot.com/');
$source1 = get_data("http://www.new-fresh-proxies.blogspot.com/");

$array = array();
$source1 = preg_grep('/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\:\d{1,5}\b/', $array);

//download webpage
function get_data($url) {
    $options = array(
            CURLOPT_RETURNTRANSFER => 1,     // return web page
            CURLOPT_HEADER         => true,    // don't return headers
            CURLOPT_FOLLOWLOCATION => true,     // follow redirects
            CURLOPT_ENCODING       => "",       // handle all encodings
            CURLOPT_USERAGENT      => "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13", // who am i
            CURLOPT_AUTOREFERER    => true,     // set referer on redirect
            CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
            CURLOPT_TIMEOUT        => 120,      // timeout on response
            CURLOPT_MAXREDIRS      => 50,       // stop after 10 redirects
    );

    $ch      = curl_init( $url );
    curl_setopt_array( $ch, $options );
    $content = curl_exec( $ch );
    $err     = curl_errno( $ch );
    $errmsg  = curl_error( $ch );
    $header  = curl_getinfo( $ch );
    curl_close( $ch );

    $header['errno']   = $err;
    $header['errmsg']  = $errmsg;
    $header['content'] = $content;
    return $header; 
```

我的输出：

```
 (

string:203221) HTTP/1.1 200 OK
Content-Type: text/html; charset=UTF-8
Expires: Wed, 06 Feb 2013 22:09:23 GMT
Date: Wed, 06 Feb 2013 22:09:23 GMT
Cache-Control: private, max-age=0
Last-Modified: Wed, 06 Feb 2013 20:39:30 GMT
ETag: "c6675d47-80ec-48ee-9c0f-613c9419f172"
Content-Encoding: gzip
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Content-Length: 47132
Server: GSE

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<script type="text/javascript">(function() { var a=window,b="jstiming",d="tick";var e=function(c){this.t={};this.tick=function(c,p,h){h=void 0!=h?h:(new Date).getTime();this.t[c]=[h,p]};this[d]("start",null,c)},f=new e;a.jstiming={Timer:e,load:f};if(a.performance&&a.performance.timing){var g=a.performance.timing,j=a[b].load,k=g.navigationStart,l=g.responseStart;0<k&&l>=k&&(j[d]("_wtsrt",void 0,k),j[d]("wtsrt_","_wtsrt",l),j[d]("tbsd_","wtsrt_"))}
try{var m=null;a.chrome&&a.chrome.csi&&(m=Math.floor(a.chrome.csi().pageT),j&&0<k&&(j[d]("_tbnd",void 0,a.chrome.csi().startE),j[d]("tbnd_","_tbnd",k)));null==m&&a.gtbExternal&&(m=a.gtbExternal.pageT());null==m&&a.external&&(m=a.external.pageT,j&&0<k&&(j[d]("_tbnd",void 0,a.external.startE),j[d]("tbnd_","_tbnd",k)));m&&(a[b].pt=m)}catch(n){};a.tickAboveFold=function(c){var i=0;if(c.offsetParent){do i+=c.offsetTop;while(c=c.offsetParent)}c=i;750>=c&&a[b].load[d]("aft")};var q=!1;function r(){q||(q=!0,a[b].load[d]("firstScrollTime"))}a.addEventListener?a.addEventListener("scroll",r,!1):a.attachEvent("onscroll",r);
 })();</script>
<meta content='true' name='MSSmartTagsPreventParsing'/>
<meta content='blogger' name='generator'/>
<link href='http://www.new-fresh-proxies.blogspot.com/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://new-fresh-proxies.blogspot.com/' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="New Fresh Proxies - Atom" href="http://new-fresh-proxies.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="New Fresh Proxies - RSS" href="http://new-fresh-proxies.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="New Fresh Proxies - Atom" href="http://www.blogger.com/feeds/2001908494944967755/posts/default" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.blogger.com/rsd.g?blogID=2001908494944967755" />
<link rel="openid.server" href="http://www.blogger.com/openid-server.g" />
<link rel="openid.delegate" href="http://new-fresh-proxies.blogspot.com/" />
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>New Fresh Proxies</title>
<link type='text/css' rel='stylesheet' href='//www.blogger.com/static/v1/widgets/3950009988-widget_css_bundle.css' />
<link type="text/css" rel="stylesheet" href="//www.blogger.com/dyn-css/authorization.css?targetBlogID=2001908494944967755&zx=c6675d47-80ec-48ee-9c0f-613c9419f172"/>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Theme Name: Harmonika
Theme URL: http://newwpthemes.com/wordpress-theme/harmonika/
Description: Harmonika is a free WordPress theme with options page and supports the post thumbnails. Suitable for any niche.
Author: NewWpThemes.com
Author URI: http://newwpthemes.com/
Version: 1.0
Tags: Ads Ready, Two Columns, Right Sidebar, Fixed Width, Blogging, Options Page
Template Name: Harmonika
Template URI: http://themecraft.net/2010/06/harmonika-blogger-template
Version: 1.0
Author: Theme Craft
Author URI: http://www.themecraft.net
Harmonika Blogger Template comes under a Creative Commons Attribution-Noncommercial-Share Alike 2.5 Malaysia License.
This means it is free to use on your blog, and you must keep the footer link intact, also as a respect to the designer and converter.
We sincerely need your respect to continue our free Blogger template production, thank you.
ThemeCraft.net
----------------------------------------------- */
/* Use this with templates/template-twocol.html */
#navbar-iframe{
height:0px;
visibility:hidden;
display:none;
}
/* -----------------------------------------------------------------------
Blueprint CSS Framework 0.8
http://blueprintcss.org
* Copyright (c) 2007-Present. See LICENSE for more info.
* See README for instructions on how to use Blueprint.
* For credits and origins, see AUTHORS.
* This is a compressed file. See the sources in the 'src' directory.
----------------------------------------------------------------------- */
/* reset.css */
html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, code, del, dfn, em, img, q, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {margin:0;padding:0;border:0;font-weight:inherit;font-style:inherit;font-size:100%;font-family:inherit;}
body {line-height:1.5;}
caption, th, td {text-align:left;font-weight:normal;}
blockquote:before, blockquote:after, q:before, q:after {content:"";}
blockquote, q {quotes:"" "";}
img {max-width: 100%; /* not working in IE6*/}
a img {max-width: 100%; /* not working in IE6*/ border:none;}
/* typography.css */
body {font-size:75%;color:#222;background:#000;font-family:"Helvetica Neue", Arial, Helvetica, sans-serif;}
h1, h2, h3, h4, h5, h6 {font-weight:normal;}
h1 {font-size:3em;line-height:1;margin-bottom:0.5em;}
h2 {font-size:2em;margin-bottom:0.75em;}
h3 {font-size:1.5em;line-height:1;margin-bottom:1em;}
h4 {font-size:1.2em;line-height:1.25;margin-bottom:1.25em;}
h5 {font-size:1em;font-weight:bold;margin-bottom:1.5em;}
h6 {font-size:1em;font-weight:bold;}
h1 img, h2 img, h3 img, h4 img, h5 img, h6 img {margin:0;}
p {margin:0 0 1.5em;}
p img.left {float:left;margin:1.5em 1.5em 1.5em 0;padding:0;}
p img.right {float:right;margin:1.5em 0 1.5em 1.5em;}
a:focus, a:hover {color:#000;}
a {color:#009;text-decoration:underline;}
blockquote {margin:1.5em;color:#666;font-style:italic;}
strong {font-weight:bold;}
em, dfn {font-style:italic;}
dfn {font-weight:bold;}
sup, sub {line-height:0;}
abbr, acronym {border-bottom:1px dotted #666;}
address {margin:0 0 1.5em;font-style:italic;}
del {color:#666;}
pre {margin:1.5em 0;white-space:pre;}
pre, code, tt {font:1em 'andale mono', 'lucida console', monospace;line-height:1.5;}
li ul, li ol {margin:0 1.5em;}
ul, ol {margin:0 1.5em 1.5em 1.5em;}
ul {list-style-type:disc;}
ol {list-style-type:decimal;}
dl {margin:0 0 1.5em 0;}
dl dt {font-weight:bold;}
dd {margin-left:1.5em;}
table {margin-bottom:1.4em;width:100%;}
th {font-weight:bold;}
thead th {background:#c3d9ff;}
tr.even td {background:#e5ecf9;}
tfoot {font-style:italic;}
caption {background:#eee;}
.small {font-size:.8em;margin-bottom:1.875em;line-height:1.875em;}
.large {font-size:1.2em;line-height:2.5em;margin-bottom:1.25em;}
.hide {display:none;}
.quiet {color:#666;}
.loud {color:#000;}
.highlight {background:#ff0;}
.added {background:#060;color:#fff;}
.removed {background:#900;color:#fff;}
.first {margin-left:0;padding-left:0;}
.last {margin-right:0;padding-right:0;}
.top {margin-top:0;padding-top:0;}
.bottom {margin-bottom:0;padding-bottom:0;}
/* forms.css */
label {font-weight:bold;}
fieldset {padding:1.4em;margin:0 0 1.5em 0;border:1px solid #ccc;}
legend {font-weight:bold;font-size:1.2em;}
input.text, input.title, textarea, select {margin:0.5em 0;border:1px solid #bbb;}
input.text:focus, input.title:focus, textarea:focus, select:focus {border:1px solid #666;}
input.text, input.title {width:300px;padding:5px;}
input.title {font-size:1.5em;}
textarea {width:390px;height:250px;padding:5px;}
.error, .notice, .success {padding:.8em;margin-bottom:1em;border:2px solid #ddd;}
.error {background:#FBE3E4;color:#8a1f11;border-color:#FBC2C4;}
.notice {background:#FFF6BF;color:#514721;border-color:#FFD324;}
.success {background:#E6EFC2;color:#264409;border-color:#C6D880;}
.error a {color:#8a1f11;}
.notice a {color:#514721;}
.success a {color:#264409;}
/* grid.css */
.container {width:950px;margin:0 auto;}
.showgrid {background:url(src/grid.png);}
.column, div.span-1, div.span-2, div.span-3, div.span-4, div.span-5, div.span-6, div.span-7, div.span-8, div.span-9, div.span-10, div.span-11, div.span-12, div.span-13, div.span-14, div.span-15, div.span-16, div.span-17, div.span-18, div.span-19, div.span-20, div.span-21, div.span-22, div.span-23, div.span-24 {float:left;margin-right:10px;}
.last, div.last {margin-right:0;}
.span-1 {width:30px;}
.span-2 {width:70px;}
.span-3 {width:110px;}
.span-4 {width:150px;}
.span-5 {width:190px;}
.span-6 {width:230px;}
.span-7 {width:270px;}
.span-8 {width:310px;}
.span-9 {width:350px;}
.span-10 {width:390px;}
.span-11 {width:430px;}
.span-12 {width:470px;}
.span-13 {width:510px;}
.span-14 {width:550px;}
.span-15 {width:590px;}
.span-16 {width:630px;}
.span-17 {width:670px;}
.span-18 {width:710px;}
.span-19 {width:750px;}
.span-20 {width:790px;}
.span-21 {width:830px;}
.span-22 {width:870px;}
.span-23 {width:910px;}
.span-24, div.span-24 {width:950px;margin:0;}
input.span-1, textarea.span-1, input.span-2, textarea.span-2, input.span-3, textarea.span-3, input.span-4, textarea.span-4, input.span-5, textarea.span-5, input.span-6, textarea.span-6, input.span-7, textarea.span-7, input.span-8, textarea.span-8, input.span-9, textarea.span-9, input.span-10, textarea.span-10, input.span-11, te... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:16:53.370

Curl 无法直接获取它，因为它不会执行 javascript。但如果它来自 ajax 请求，您可以直接向该端点发出请求。

使用开发工具/萤火虫看看发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:21:22.313

几件事：

*   你的“输出”来自哪里？我在您的代码中没有看到任何显示...
*   我也认为你的`preg_grep`说法是不正确的。您正在搜索一个空白数组并将结果保存到您刚刚将数据提取到的变量中。尝试：

`$array = preg_grep('/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\:\d{1,5}\b/', $source1);`

`$source1['content']`当我在调用后直接运行代码并转储`get_data`时，我得到了大量的 IP 地址......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:30:46.237

在我看来，要么是超时，要么是你的正则表达式有问题。

`file_get_contents`为什么不像你一开始尝试的那样坚持？

```
$content = file_get_contents('http://www.new-fresh-proxies.blogspot.com.au');

preg_match_all('/(\d+\.\d+\.\d+\.\d+(:\d+)?)/', $content, $matches);

print_r($matches[1]); 
```

这将打印出 IP 列表：

```
Array
(
    [0] => 1.204.168.15:6673
    [1] => 1.234.45.130:80
    [2] => 1.34.163.101:8080
    [3] => 1.34.29.89:8080
    [4] => 1.34.8.221:3128
    .... 
```

希望有帮助。

# visual-studio - 无需编译即可链接的 Visual C++ 项目

> ID：14739874
> 
> 赞同：0
> 
> 时间：2013-02-06T22:12:17.433
> 
> 标签：visual-studio, visual-c++, visual-studio-2012

我正在尝试创建一个 vc++ 项目，它将几个库链接在一起，而无需先编译任何东西。我创建了一个空项目，在链接器选项中添加了附加依赖项，但是当我尝试构建它时，我得到以下信息：

```
1>------ Rebuild All started: Project: sde-mix-mt, Configuration: Release x64 ------
1>Build started 2/6/2013 11:32:49 PM.
1>_PrepareForClean:
1>  Deleting file "x64\Release\sde-mix-mt.lastbuildstate".
1>InitializeBuildStatus:
1>  Creating "x64\Release\sde-mix-mt.unsuccessfulbuild" because "AlwaysCreate" was specified.
1>FinalizeBuildStatus:
1>  Deleting file "x64\Release\sde-mix-mt.unsuccessfulbuild".
1>  Touching "x64\Release\sde-mix-mt.lastbuildstate".
1>
1>Build succeeded.
1>
1>Time Elapsed 00:00:00.04
========== Rebuild All: 1 succeeded, 0 failed, 0 skipped ========== 
```

尽管它说它`Build succeeded`实际上并没有构建任何东西（检查经过的时间）。

# drupal - Drupal 7 Zen 子主题 IE8 响应性

> ID：14739878
> 
> 赞同：0
> 
> 时间：2013-02-06T22:12:34.793
> 
> 标签：drupal, internet-explorer-8, media-queries, drupal-theming, drupal-zen

使用 Drupal 7 的 Zen 入门主题，我创建了这个站点：[www.nettango.com](http://www.nettango.com)。一切似乎都很好，我一直在解决问题。然而，我一直试图让 IE8 尊重响应式风格。这是我所做的：

**站点设置：**
*选中*- 添加 Respond.js JavaScript 以将基本的 CSS3 媒体查询支持添加到 IE 6-8。
*选中*- 添加 HTML5 shim JavaScript 以添加对 IE 6-8 的支持。
*选中*- 添加元标记以支持移动设备上的响应式设计。

这将其付诸行动：

```
<script src="/themes/zen/js/html5-respond.js"></script> 
```

该脚本正在加载，但它不服从我的媒体查询。

之后，我用这些替换了 Zen 的脚本：

```
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!--[if lt IE 9]>
<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]--> 
```

这有同样的效果 - 没有。

这是我的 css 文件中的一个示例，用于显示媒体查询的设置方式：

```
@media screen and (max-width:1100px) {
    html{font-size: 83%;}
    #header {background:blue;}
} 
```

随意检查[www.nettango.com](http://www.nettango.com)网站文件。我花了我一天的大部分时间试图解决这个问题并且没有运气。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T11:48:55.620

这很可能是因为您在开发模式下尝试使用 css3-mediaqueries。Drupal 7 在非 CSS 聚合模式下对样式表使用 @import 规则。

来自[css3-mediaqueires.js 项目摘要](https://code.google.com/p/css3-mediaqueries-js/)：

> 注意：不适用于 @import'ed 样式表...

因此，css3-mediaqueries.js 只会在 CSS 聚合开启时生效（在生产中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:19:00.353

似乎媒体查询在实时服务器上工作，但不在我们的本地服务器上。奇怪的。不知道为什么会这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:25:28.630

我还注意到您必须在 config.rb 文件中将 firesass 设置为 false。如果启用 Firesass，它将无法在 IE8 中工作。

# google-app-engine - 如何在 Google App Engine 上按需运行计划任务？

> ID：14739880
> 
> 赞同：2
> 
> 时间：2013-02-06T22:12:54.013
> 
> 标签：google-app-engine, scheduled-tasks

我想在我的生产应用程序中按需运行计划任务。与开发不同，没有我可以单击的“运行此任务”按钮。当我尝试直接访问 URL 时，我收到 500 错误。日志是这样说的：

> 仅当请求来自该域的子域或已通过 Google Apps 控制面板批准时，才能对 Google Apps 域 webfilings.com 进行身份验证

我已确认我已登录并且我是此 apppot 的所有者。

我也尝试通过远程 api 工具运行任务，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:30:40.057

抱歉，Cron 任务目前没有“立即运行”按钮。如果您想提交，这是一个合理的功能请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:30:17.280

身份验证错误是由于您的应用程序的配置方式造成的。如果您将身份验证类型（在创建应用程序时或在应用程序设置中）设置为 Google Apps 域，则会发生这种情况。这会导致应用程序要求使用由该域管理的帐户完成所有登录，但还要求域管理员在 Google Apps 控制面板中配置应用程序。您（或您的域管理员）可以通过转到 appengine.google.com 上的应用程序设置并单击添加域来执行此操作。您还可以将身份验证类型重置为允许所有帐户的 Google Accounts API。

[https://developers.google.com/appengine/articles/auth](https://developers.google.com/appengine/articles/auth)有更多信息，但现在允许在某些条件下更改身份验证类型。

# c# - 在按钮单击时设置用户控件的公共属性

> ID：14739891
> 
> 赞同：1
> 
> 时间：2013-02-06T22:13:27.940
> 
> 标签：c#, asp.net, properties, user-controls, public

我在页面上有一个用户控件。用户控件上有一个公共属性，我需要在单击按钮后设置它。你怎么做到这一点？看来控件是在按钮单击事件触发之前呈现的，因此设置属性无效。

页面：<%@ 注册 src="Email.ascx" tagname="Email" tagprefix="uc2" %>

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
        EmailList.IsEditable = false;
}

protected void btn_Click(object sender, EventArgs e)
{
    EmailList.IsEditable = true;
} 
```

用户控制： public bool IsEditable { get; 放; }

当我在页面加载事件中设置公共属性时，它会正确设置，但不是在按钮单击时。该按钮用于将表单从只读模式更改为编辑模式。有没有办法在按钮单击事件中设置公共属性？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:44:08.927

该属性设置得很好。问题是在您的用户控件中，您将其控件设置为只读/启用。

如果您希望能够影响用户控件的呈现方式，则必须执行在`Page_PreRender`用户控件事件中设置子控件的只读/启用属性的逻辑。此事件在 buttonclick 事件之后执行。

必读 msdn：[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx#lifecycle_events)。您会注意到在 after`Page_Load`和 before处理控制事件`Page_LoadComplete`。

# javascript - AngularJS：将 $scope 传递给指令

> ID：14739895
> 
> 赞同：2
> 
> 时间：2013-02-06T22:13:42.890
> 
> 标签：javascript, angularjs, angularjs-directive, jquery-file-upload

尝试使用 jQuery File Upload 插件和该指令的要点创建文件上传指令[https://gist.github.com/thoughtpalette/4726114](https://gist.github.com/thoughtpalette/4726114)

我需要将 profile-ctrl.js 中对象的 id 传递到上传表单的提交功能中。

我的指令位于控制器之外，我无法将对象设置为 $rootScope 以在指令中捕获/传递它。

url: in fileupload 是魔法发生的地方。通过 api 调用我的控制器并传递文件信息，并希望在 profile-ctrl.js 中的商家对象中传递 vendorId。`$scope.merchant`

**不幸的是，由于项目结构，我无法在小提琴中发帖**

**我的指令：**

```
//jqueryFileUpload-Plugin 
//https://github.com/blueimp/jQuery-File-Upload
define(['jquery',
        'angular',
        'core',
        'source/core/helpers/urlHelper.js'],
    function ($, angular, core, urlHelper) {
    "use strict";
    return [ function ($compile) {
        return {
            restrict:'E',
            scope: {
                merchant: '=ngModel'
            },
            compile:function(el,attrs, scope){
                var compiler = this,
                elem = el,
                vendorId = scope.merchant.id;
                instanceFn = function() {
                    var currentScope = this,
                        fileInputDiv = $(' <span class="btn btn-success fileinput-button">'+
                        '<i class="icon-plus icon-white"></i>'+
                        '<span>Upload Logo</span>'+
                        '<input type="file" name="files[]" single>'+
                        '</span>').appendTo(elem),
                        fileInput = fileInputDiv.find('input'),
                        fileList = $('<div class="UploaderList">'+
                        '<table>'+
                        '<tr>'+
                        '<td>File to Upload</td>'+
                        '</tr>'+
                        '</table>'+
                        '</div>').appendTo(elem),
                        button = $('<button class="btn">Submit</button>').appendTo(elem);

                    button.hide();
                    $('<div class="uploader">').appendTo(elem);
                    $('</div>').appendTo(elem);

                    fileInput.fileupload({
                        url:urlHelper.vendor.uploadLogo(vendorId),
                        dataType: 'json',
                        add:function (e, data) {

                            button.show();

                            // this will add a handler which will submit this specific file
                            button.bind('click.uploadsubmit', function(){ 
                                data.submit();
                            });
                            $.each(data.files, function (index, file) {
                                $("<tr><td>"+file.name+"</td><td></td><tr>").appendTo(fileList.find('table:first'));
                            });
                        },
                        // for each file
                        done: function (e, data) {

                            button.hide();

                            var result = "",
                                r = data.result,
                                file = data.files[0]; // we only support single file upload by now
                            // error

                            // CHANGE THIS PART FOR YOUR REQUIREMENTS (I have a json repsonse)

                            if(r.success !== undefined && r.success === false){
                                result = "<span class='error'>Unknown error</span>";
                                if(r.errors !== undefined && r.errors.length > 0 && r.errors[0].message !== undefined)
                                {
                                    result = "<span class='error'>"+r.errors[0].message+"</span>";
                                }
                            }
                            else{
                                result = "<span class='success'>OK</span>";
                            }

                            $("td:contains('"+file.name+"')").next().html(result);
                        },
                        progressall:function (e, data) {
                            var progress = parseInt(data.loaded / data.total * 100, 10);
                        },
                        // called only once... (wen submit button is clicked)
                        start:function(e){

                            // we start the upload, so we do also cleanup jobs right now:
                            button.unbind('click.uploadsubmit'); // importan - remove all event handlers
                            button.hide();
                            fileInputDiv.hide();

                        }
                    });

                };
                return instanceFn;
            }

        };
    }]; 
}); 
```

**通过 html 的指令调用：**

```
<jquery-File-Upload ng-model="merchant"></jquery-File-Upload> 
```

所以现在商家在指令中返回未定义。有人可以帮我把它传进去吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:21:34.853

正如评论中提到的，编译函数的第三个参数不是范围，它是一个嵌入链接函数。如果你好奇的话，这里有一个如何使用它[的例子。](https://stackoverflow.com/questions/13183005/what-exactly-do-you-do-with-the-transclude-function-and-the-clone-linking-functi)

您定义的 instanceFn 是您的链接函数，因为它是由 compile 函数返回的。链接函数的第一个参数是作用域，`merchant`应该在其上定义。

尝试 $watch()ing `merchant`，然后在您注意到更改后执行您的逻辑。

# mediaelement.js - 使用 mediaelement 作为 mysql 查询返回的列表的播放器

> ID：14739896
> 
> 赞同：0
> 
> 时间：2013-02-06T22:13:43.127
> 
> 标签：mediaelement.js

我正在建立一个站点，其中包含 MP3 目录和相同曲目的 mysql 数据库。我运行查询，它返回列表中匹配的曲目 - 每个曲目我都有一个下载选项和 - 当前 - 一个 Flash 播放器。因为它是为每个返回的轨道加载的，所以它使页面加载非常重。

现在我想用一个简单的音频播放器替换它，它位于页面顶部，每个返回的曲目名称中都有一个链接，以使播放器播放该曲目（将这个曲目“发送”到音频播放器的链接）

在线搜索把我带到了这里，但在我开始学习如何实现和使用这个播放器之前，我想知道是否可以按照我想要的方式使用它，如果可以，你能建议一种在这种程度上实现它的方法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:05:06.037

```
function playme(src){

var getAudioSource = src; //pass a link's attribute as a parameter, i.e. <a href="etc" name="linktomp3.mp3></a>"

var mymp3 = new MediaElementPlayer('#mymp3', {
     translationSelector: true,
     success: function (mediaElement) {

        var sources = [{ src: getAudioSource, type: 'audio/mp3' }];

        mediaElement.setSrc(sources);
        mediaElement.pause();
        mediaElement.load(); }
     });
} 
```

# jquery - 颜色框内联不起作用

> ID：14739897
> 
> 赞同：0
> 
> 时间：2013-02-06T22:13:47.353
> 
> 标签：jquery, colorbox

```
<script type="text/javascript" charset="utf-8">
      $(document).ready(function(){        
        $(".popup-thumb").colorbox({inline:true, width:"50%"});       
      });
</script>

<a href="#bap1" class="popup-thumb">
            <img src="projects/bachelor/thumb001.png">
            <div class="summary">
              <h5>..</h5>
              <p>...</p>
            </div>
     </a>
     <div style="display: none;">
          <div class="popup" id="bap1">
            <p>...</p>
            <img src="projects/bachelor/001.png">
            <ul>..
            </ul>
          </div>
        </div> 
```

我不知道为什么它不起作用。弹出 div 根本不出现。我认为这是一些简单的技巧...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:31:21.193

您在块元素周围包裹了一个锚标记，这在非 HTML5 环境中不是语义的。

所以如果你修复你的 HTML 它应该在这里工作是一个小提琴[http://jsfiddle.net/bNa3Z/](http://jsfiddle.net/bNa3Z/)

```
<a href="#bap1" class="popup-thumb">Show</a>

<div style="display: none;">
    <div class="popup" id="bap1">
        <p>Hello World</p>
    </div>
</div> 
```

添加了 jQuery：

```
$(document).ready(function(){        
    $(".popup-thumb").colorbox({inline:true, width:"50%"});       
}); 
```

*注意 - 这是小提琴中看到的工作代码，所以如果这仍然不适合您，请务必确保 jQuery 正在运行*-

```
$(function(){
    alert('jQuery is running.');
}); 
```

并且您正确地包含了您的插件。

# c++ - Scons 和 Boost.Test，我的测试项目无法与我的主项目目标文件链接

> ID：14739898
> 
> 赞同：3
> 
> 时间：2013-02-06T22:13:56.900
> 
> 标签：c++, scons

我想使用 Boost.Test 进行测试驱动开发。

我让 scons 创建两个可执行文件，一个是主要的，一个是测试的。我所有的主要项目文件都在`./src/`，我所有的测试专用文件都在`./test/`

问题是：

*   主要项目目标文件放在 ./build/src/
*   测试项目目标文件放在 ./build/test/

在这样的配置中，我的可执行测试无法链接，因为所有主要项目对象文件（我执行测试的类的）都不在同一个目录中。

您知道如何调整我的 scons 文件，以便可执行测试的链接可以使用中的目标文件`./src./`吗？

下面是我的`main.scons`文件：

```
import os
env=Environment(CPPPATH=['/usr/local/boost/boost_1_52_0/boost/','./src/'],
                CPPDEFINES=[],
                LIBPATH=['/usr/local/boost/boost_1_52_0/boost/libs/','.'],
                LIBS=['boost_regex'],
                CXXFLAGS="-std=c++0x")
env['ENV']['TERM'] = os.environ['TERM']
env.Program('Main', Glob('src/*.cpp'))

#
testEnv = env.Clone()
testEnv['CPPPATH'].append('./test/')
testEnv['LIBS'].append('boost_unit_test_framework')
testEnv.Program('Test', Glob('test/*.cpp')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:50:18.450

虽然“重复对象列表”方法适用于简单项目，但您可能会遇到测试代码不需要链接到主程序的整个对象空间的限制。例如，存根不是特定单元测试重点的数据库层。

作为替代方案，您可以创建（静态）通用代码库，链接到您的主要可执行文件和测试框架。

```
common_sources = ['src/foo.cpp', 'src/bar.cpp'] # or use Glob and then filter
env.Library("common", common_sources)
program_sources = ['src/main.cpp']
env.Program("my_program", program_sources, LIBS=['common'])
...
testEnv['LIBPATH'] = ['.']  # or wherever you build the library
testEnv.Program("unit_test", test_sources, LIBS=['common']) 
```

`main()`这也避免了您提到的重复问题，因为只有`program_sources`and`test_sources`列表应该包含带有主例程的适当文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:21:24.307

我继续搜索，并使用 scons[在网络上找到了这个](http://old.nabble.com/Two-different-environments-were-specified-for-target-td20809260.html)`env.Object`引起我兴趣的帖子。实际上，该对象包含所有目标对象文件的列表。

稍作修改，我就有了 scons 文件，它可以满足我的要求（尽管现在我遇到了重复主函数的问题，但这是另一个问题）：

```
import os

env=Environment(CPPPATH=['/usr/local/boost/boost_1_52_0/boost/','./src/'],
                CPPDEFINES=[],
                LIBPATH=['/usr/local/boost/boost_1_52_0/boost/libs/','.'],
                LIBS=['boost_regex'],
                CXXFLAGS="-std=c++0x")
env['ENV']['TERM'] = os.environ['TERM']

# here I keep track of the main project object files
mainObjectFiles = env.Object( Glob('src/*.cpp')) 

env.Program('PostgresCpp', mainObjectFiles)

#
testEnv = env.Clone()
testEnv['CPPPATH'].append('./test/')
testEnv['LIBS'].append('boost_unit_test_framework')

# here I append all needed object files
testObjectFiles =  Glob('test/*.cpp')
testedObjectFiles = Glob('src/*.cpp')
allObjectFilesExceptMain = [x for x in mainObjectFiles if x != 'src/main.o']
allObjectFilesExceptMain.append(testObjectFiles)

testEnv.Program('Test',allObjectFiles) 
```

# sql - 是否有批处理脚本命令可以更改 .sql 文件中的变量值？

> ID：14739899
> 
> 赞同：0
> 
> 时间：2013-02-06T22:13:57.123
> 
> 标签：sql, sql-server, batch-file, sqlcmd

我正在创建一个批处理文件，我在其中从 IP 地址恢复数据库，然后在数据库上执行几个 .sql 文件。在几个 .sql 文件中，声明和设置了变量。但是这个过程必须在许多机器上完成，每台机器的每个变量都有不同的值。

所以我可以通过用户输入 IP 来恢复数据库，但我不确定如何使用批处理脚本命令来更改变量值。

例如，在其中一个 .sql 文件中，声明了一个变量 @store 并将其设置为某个随机数。我想通过批处理文件更改该数字。

我正在使用 windows 和 sql server express 2008 r2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:25:12.080

您可以在 SQLCMD中使用[“脚本变量” 。](http://msdn.microsoft.com/en-us/library/ms188714.aspx)

这是该 MSDN 页面中的一个示例：

> 您还可以使用 -v 选项设置脚本中存在的脚本变量。在以下脚本（文件名为 testscript.sql）中，ColumnName 是一个脚本变量。
> 
> `USE AdventureWorks2012;`
> `SELECT x.$(ColumnName)`
> `FROM Person.Person x`
> `WHERE c.BusinessEntityID < 5;`
> 
> 然后，您可以使用 -v 选项指定要返回的列的名称：
> 
> `sqlcmd -v ColumnName ="FirstName" -i c:\testscript.sql`
> 
> 要使用相同的脚本返回不同的列，请更改 ColumnName 脚本变量的值。
> 
> `sqlcmd -v ColumnName ="LastName" -i c:\testscript.sql`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:20:33.073

如果您在 Unix/Linux 系统上工作，您可以使用`sed`搜索字符串。

**示例：**假设您需要替换`127.0.0.1`为`192.168.1.1`，您可以使用以下指令：

```
$ sed 's/127.0.0.1/192.168.1.1/g' script.sql > newScript.sql 
```

这将替换旧的 ip`script.sql`并将此脚本的副本保存在`newScript.sql`.

在 Windows 上，我不知道该怎么做，但您可以随时下载并安装 Cygwin 以完全按照上述方式进行操作。

希望这对您有所帮助。

# c++ - 是否有 std::function 的独立实现？

> ID：14739902
> 
> 赞同：13
> 
> 时间：2013-02-06T22:14:00.787
> 
> 标签：c++, stl, functional-programming, embedded

我正在研究嵌入式系统，因此代码大小是一个问题。使用标准库将我的二进制大小增加了大约 60k，从 40k 增加到 100k。我想使用 std::function，但我不能证明它是 60k 的。是否有我可以使用的独立实现，或类似的东西？我正在使用它在 c++ 11 中使用绑定变量在成员函数中隐式转换 lambda。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T23:52:46.550

这是 std::function-like 类模板的简单实现，不包含任何标题。您可以根据需要自定义行为（如移动/转发、空呼叫响应等）：

[live_demo](http://ideone.com/zY2p2q)

```
// Scroll down for example of usage
namespace bicycle
{
    template<typename Result,typename ...Args>
    struct abstract_function
    {
        virtual Result operator()(Args... args)=0;
        virtual abstract_function *clone() const =0;
        virtual ~abstract_function() = default;
    };

    template<typename Func,typename Result,typename ...Args>
    class concrete_function: public abstract_function<Result,Args...>
    {
        Func f;
    public:
        concrete_function(const Func &x)
            : f(x)
        {}
        Result operator()(Args... args) override
        {
            return f(args...);
        }
        concrete_function *clone() const override
        {
            return new concrete_function{f};
        }
    };

    template<typename Func>
    struct func_filter
    {
        typedef Func type;
    };
    template<typename Result,typename ...Args>
    struct func_filter<Result(Args...)>
    {
        typedef Result (*type)(Args...);
    };

    template<typename signature>
    class function;

    template<typename Result,typename ...Args>
    class function<Result(Args...)>
    {
        abstract_function<Result,Args...> *f;
    public:
        function()
            : f(nullptr)
        {}
        template<typename Func> function(const Func &x)
            : f(new concrete_function<typename func_filter<Func>::type,Result,Args...>(x))
        {}
        function(const function &rhs)
            : f(rhs.f ? rhs.f->clone() : nullptr)
        {}
        function &operator=(const function &rhs)
        {
            if( (&rhs != this ) && (rhs.f) )
            {
                auto *temp = rhs.f->clone();
                delete f;
                f = temp;
            }
            return *this;
        }
        template<typename Func> function &operator=(const Func &x)
        {
            auto *temp = new concrete_function<typename func_filter<Func>::type,Result,Args...>(x);
            delete f;
            f = temp;
            return *this;
        }
        Result operator()(Args... args)
        {
            if(f)
                return (*f)(args...);
            else
                return Result{};
        }
        ~function()
        {
            delete f;
        }
    };
}

// ___________________[ Example of usage ]___________________ //

int func1(double)
{
    return 1;
}
struct Functor2
{
    int operator()(double)
    {
        return 2;
    }
};

double func3(bool,int)
{
    return 3.0;
}
struct Functor4
{
    double operator()(bool,int)
    {
        return 4.0;
    }
};

int main()
{
    int res = 10;
    {
        bicycle::function<int(double)> f{func1};

        res -= f(1.0);
        f = Functor2{};
        res -= f(2.0);
    }
    {
        bicycle::function<double(bool,int)> f1;
        f1 = func3;

        bicycle::function<double(bool,int)> f2{f1};
        res -= f2(true,1);

        f1 = Functor4{};
        f2 = f1;
        res -= f2(false,2);
    }
    return res;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-06T23:01:34.263

60k 来自编译器添加的异常处理，因为 std::function 需要异常。std::function 只抛出一个异常，“bad_function_call”。所以我删除了引发异常的代码，现在如果调用一个空函数，它会出现错误，我为自己节省了 60k。

# assembly - 无限精度整数的实现

> ID：14739903
> 
> 赞同：0
> 
> 时间：2013-02-06T22:14:04.857
> 
> 标签：assembly, integer, ocaml, imp, imperative

问题：“大整数表示为（小）整数列表。”

假设有：

```
type reg = string;;   (* "$0" models register set to constant 0 *)
type label = string;; (* empty string models no label *)

type asmistr =
   AsmHalt
 | AsmNop
 | AsmAdd of reg * reg * reg
 | AsmAddi of reg * int * reg
 | AsmSub of reg * reg * reg
 | AsmMul of reg * reg * reg
 | AsmLoad of reg * reg * reg
 | AsmStore of reg * reg * reg
 | AsmJmp of label
 | AsmBne of reg * reg * label
 | AsmBeq of reg * reg * label
 | AsmSlt of reg * reg * reg
;;

type asmprog = AsmProg of (label * asmistr) list;;

type asmline = 
    AsmIstr of label * asmistr 
  | AsmComment of string 
  | AsmDebugReg of reg 
  | AsmDebugMem of int * int
;; 
```

这组定义用于定义像汇编这样的语言，使用寄存器、指令和标签（用于跳转）

现在我需要实现一个从命令式语言（具有“while”“if”等指令）到 ASM 的编译器

我的老师建议的实现是使用一个列表，其中每个元素都是给定数字的数字（数字只能是整数），例如 11000 是 [1, 1, 0, 0, 0]

第一个差距是：考虑到通用的 O'Caml 程序，我该如何实现呢？假设我必须插入一个大整数，我可以使用什么逻辑来允许“计算”？因为最后一个ASM程序也可以做add、sub mul等可以包含大整数的指令，所以不知道怎么处理寄存器、大整数和指令

我需要的是如何实现大整数的一般方案，可能用 O'Caml 语言，以及如何考虑类似于汇编的语言（在本例中为 ASM）来实现这一点

提前感谢，如果不清楚，对不起我的英语，如果有人可以帮助我，如果需要，我会提供更多细节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:18:02.293

我对你的问题的理解如下：你想编译一个简单的命令式语言，它有无界整数来汇编，编译器将用 OCaml 编写。那正确吗？您的问题是“我应该如何编译无界整数的算术运算？”。

如果这确实是问题，一个很好的练习是首先在 OCaml 中实现那些大数操作（使用`int`; 的列表，注意每个元素不需要是`0`or `1`，您可以使用任何更大的基数，其加法不会溢出您的本地 OCaml 整数，这将使操作更快），然后想知道如何将其移植到本地汇编程序。首先，您将如何编译列表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:51:26.310

首先，您应该了解数字有一个基础。通常人们使用十进制（以 10 为底），但程序员也使用十六进制（以 16 为底）和二进制（以 2 为底）。你的老师是对的（使用一个列表，其中每个元素都是给定数字的数字）；但可能没有提到这些数字可以是任何基数。为了性能/效率，您可能应该使用基数 256（其中每个数字是一个 8 位整数），或者可能使用基数 65536（其中每个数字是一个 16 位整数）、基数 2^32 或基数 2^64。选择取决于底层硬件预计能够处理的内容（例如，如果代码打算在 16 位 CPU 上运行，那么您将使用 base 65536）。

接下来要决定的是如何存储数字。通常，您需要一些东西来跟踪有多少位数字、一些标志和数字列表。对于标志，您需要一个标志来指示数字是正数还是负数，但您可能会使用更多标志来表示数字是否无穷大、数字是否有精度损失等。例如，“5/(- 6)" 可能导致“位数”为零的数字；设置了负数和精度标志。

一旦确定了这一点，您就想实现正数的加法。这主要只是添加带有进位的数字，其中结果可能（最多）比最大的源数字多一位。例如，如果您添加一个 2 位数字和一个 4 位数字，那么您将为 5 位结果分配内存，然后使用以下方式一次添加一个数字：

```
for(n = 0; n < result_digits; n++) {
    digit = source1[n] + source2[n] + carry;
        if(digit > DIGIT_MAX) {
            carry = 1;
            digit &= DIGIT_MASK;
        } else {
            carry = 0;
        }
        result[n] = digit;
    }
} 
```

下一步是编写代码来处理从较大的正数中减去较小的正数。这只是从最重要的数字开始用进位从另一个数字中减去一个数字。一旦这个工作正常，您将扩展它以处理从较小的正数中减去较大的正数，这涉及事先交换数字并随后否定结果。例如，“3 - 10 = -( 10 - 3)”。

一旦正数的加法和减法开始工作，您就可以开始支持负数了。这主要是摆弄符号标志并选择是加还是减。例如，对于“8 + (-3) = 8 - 3”、“8 - (-3) = 8 + 3”、“-8 + 3 = 3 - 8”、“-8 + -3 = -( 8 + 3)”等。在所有情况下，它都可以重新排列并作为正数的加法或减法完成。

下一步是正数的乘法。这只是将每个数字相乘并添加前一个数字的溢出：

```
for(n = 0; n < result_digits; n++) {
    digit = source1[n] * source2[n] + temp;
    temp = digit >> DIGIT_BITS;
    digit &= DIGIT_MASK;
    result[n] = digit;
} 
```

然后你会担心负数的乘法。在这里，您只需将源数设为正数并乘以正数，然后设置结果的符号。

# asp.net - 贝宝 nvp .net sdk 错误

> ID：14739908
> 
> 赞同：0
> 
> 时间：2013-02-06T22:14:20.793
> 
> 标签：asp.net, .net, sdk, paypal, nvp

伙计们，

我们有一个使用 PayPal Express Checkout for Digital Goods 进行软件销售的网站。它已经工作了5个月。上周我们开始收到错误“请求被中止：无法创建 SSL/TLS 安全通道。” 关闭实时站点。当我在开发服务器上运行该站点时，它运行良好，我们可以处理交易。所有这些都针对实时贝宝站点。在查看此论坛和其他论坛上的许多问题时，主要问题似乎是使用错误的端点。我正在使用.NET SDK和nvp方法。我检查了端点，它们是paypal为nvp交易提供的当前端点。甚至查看了dll以确保我们没有旧版本。我们在那里很好。

然后我认为托管服务器可能会建立一个到贝宝的安全链接，因此创建了一个测试页面，其中包含一个带有查询字符串的 URL 到端点，例如（[https://api-3t.paypal.com/nvp?USER =XXXX_api1.XXX.com&PWD=XXX&SIGNATURE=XXXXXX&VERSION=60.0&PAYMENTACTION=Authorization&AMT=1.95&RETURNURL=https://www.paypal.com&CANCELURL=https://www.paypal.com&METHOD=SetExpressCheckout](https://api-3t.paypal.com/nvp?USER=XXXX_api1.XXX.com&PWD=XXX&SIGNATURE=XXXXXX&VERSION=60.0&PAYMENTACTION=Authorization&AMT=1.95&RETURNURL=https://www.paypal.com&CANCELURL=https://www.paypal.com&METHOD=SetExpressCheckout) )。

这有效并返回了预期的交易令牌。所以我们可以从托管服务器连接。然后考虑我们的凭据或凭据检索代码可能是问题，我将凭据从我们的数据库中提取出来并按如下方式运行测试。

使用服务器数据代码测试查询字符串=======================================

这很有效，因此凭据和端点在托管服务器上很好。

```
 ( Dim sCEnvironment As String =   System.Configuration.ConfigurationManager.AppSettings("Environment")
    Dim dtsettings As DataTable
    dtsettings = Dac.ExecuteDataTable("GetCredentials", Dac.Parameter("@Environment", sCEnvironment))

    '// Set up your API credentials, PayPal end point, API operation and version.
    Dim sAPIUsername As String = dtsettings.Rows(0).Item("UserName").ToString
    Dim sAPISignature As String = dtsettings.Rows(0).Item("Signature").ToString
    Dim sAPIPassword As String = dtsettings.Rows(0).Item("Password").ToString
    Dim sEnvironment As String = dtsettings.Rows(0).Item("Environment").ToString

    Dim QS As String = "https://api-3t.paypal.com/nvp?USER=" & sAPIUsername & "&PWD=" & sAPIPassword & "&SIGNATURE=" & sAPISignature & "&VERSION=60.0&PAYMENTACTION=Authorization&AMT=1.95&RETURNURL=https://www.paypal.com&CANCELURL=https://www.paypal.com&METHOD=SetExpressCheckout"
    Response.Redirect(QS) 
```

然后我继续使用 sdk dll (paypal_base.dll) 测试令牌生成。请参阅下面的代码。在生成每一行时，我向其中添加了一个写入测试页面的字符串，这样我就可以了解我们的托管服务器上发生了什么。我们对数字商品流程使用快速结账。我从[https://cms.paypal.com/cms_content/FR/fr_FR/files/developer/nvp_DoAuthorization_cs.txt](https://cms.paypal.com/cms_content/FR/fr_FR/files/developer/nvp_DoAuthorization_cs.txt)获得了基本代码，并根据在线文档添加了数字商品查询参数。这适用于我的开发服务器并返回令牌。它在托管网站上运行了大约四个月，直到 1 月 27 日到 1 月 30 日之间的某个时候，我收到了客户无法购买产品的第一个通知。

在我们的托管服务器上运行时，我们得到“请求被中止：无法创建 SSL/TLS 安全通道”。下面突出显示的代码行上的错误消息。查询字符串由编码器生成并保存在变量 pStrrequestforNvp 中，因此编码器可以工作。

我很茫然。托管服务器与我们的开发服务器有什么不同？dll中是否有一种方法可以用来写出对paypal服务器的实际调用？我将我们在开发中使用的相同 dll 文件放在托管站点上，但有些不同。

测试sdk生成的查询============================

```
Dim caller As NVPCallerServices = New NVPCallerServices
    Dim profile As IAPIProfile = ProfileFactory.createSignatureAPIProfile
    Dim sCEnvironment As String = System.Configuration.ConfigurationManager.AppSettings("Environment")
    Dim dtsettings As DataTable
    Dim sMsg As String
    dtsettings = Dac.ExecuteDataTable("GetCredentials", Dac.Parameter("@Environment", sCEnvironment))

    profile.APIUsername = dtsettings.Rows(0).Item("UserName").ToString
    sMsg = "APIUserName = " & dtsettings.Rows(0).Item("UserName").ToString & "<br/>"

    profile.APISignature = dtsettings.Rows(0).Item("Signature").ToString
    sMsg = sMsg & "APISignature = " & dtsettings.Rows(0).Item("Signature").ToString & "<br/>"

    profile.APIPassword = dtsettings.Rows(0).Item("Password").ToString
    sMsg = sMsg & "APIPassword = " & dtsettings.Rows(0).Item("Password").ToString & "<br/>"

    profile.Environment = dtsettings.Rows(0).Item("Environment").ToString
    sMsg = sMsg & "Environment = " & dtsettings.Rows(0).Item("Environment").ToString & "<br/>"

    caller.APIProfile = profile
    Dim encoder As NVPCodec = New NVPCodec
    encoder("VERSION") = "65.1"
    encoder("METHOD") = "SetExpressCheckout"
    encoder("RETURNURL") = "http://www.multiware.biz/return.aspx"
    encoder("CANCELURL") = "http://www.multiware.biz/cancel.aspx"

    encoder("PAYMENTREQUEST_0_CURRENCYCODE") = "USD"
    encoder("PAYMENTREQUEST_0_PAYMENTACTION") = "Sale"
    encoder("PAYMENTREQUEST_0_AMT") = "1.95"
    encoder("PAYMENTREQUEST_0_ITEMAMT") = "1.95"
    encoder("PAYMENTREQUEST_0_DESC") = "Software"
    encoder("L_PAYMENTREQUEST_0_ITEMCATEGORY0") = "Digital"
    encoder("L_PAYMENTREQUEST_0_NAME0") = "Test"
    encoder("L_PAYMENTREQUEST_0_NUMBER0") = "123"
    encoder("L_PAYMENTREQUEST_0_QTY0") = "1"
    encoder("L_PAYMENTREQUEST_0_AMT0") = "1.95"
    encoder("L_PAYMENTREQUEST_0_DESC0") = "Download"
    encoder("REQCONFIRMSHIPPING") = "0"
    encoder("NOSHIPPING") = "1"
    encoder("SOLUTIONTYPE") = "Sole"
    Try

        Dim pStrrequestforNvp As String = encoder.Encode
        sMsg = sMsg & "pStrrequestforNvp = " & pStrrequestforNvp & "<br/>"

        Dim pStresponsenvp As String = caller.Call(pStrrequestforNvp)     ***Error occurs here***
        sMsg = sMsg & "pStresponsenvp = " & pStresponsenvp & "<br/>"

        Dim decoder As NVPCodec = New NVPCodec
        decoder.Decode(pStresponsenvp)
        Dim Token As String = decoder("TOKEN")
        sMsg = sMsg & "Token = " & Token & "<br/>"
        Me.lblResponse.Text = sMsg.ToString
    Catch ex As Exception
        sMsg = sMsg & "<br/>" & ex.Message.ToString & "<br/>" _
            & ex.StackTrace.ToString
        Me.lblResponse.Text = sMsg.ToString
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:58:36.537

我会回答我自己的问题。在与网络托管服务和 PayPal 反复多次后，我们将问题缩小到服务器未授权安全证书。必须在我们的页面上留下痕迹才能找到它并证明它是站在他们这边的。我怀疑是 MS 更新搞砸了。一天该网站正常工作，但第二天就不行了。

有关该主题的进一步阅读，请参阅[http://forum.arvixe.com/smf/other-programs-promotions-graphics/need-urgent-help!-(paypal-checkout-not-working-any-more)上的对话框/msg39498/#msg39498](http://forum.arvixe.com/smf/other-programs-promotions-graphics/need-urgent-help!-(paypal-checkout-not-working-any-more)/msg39498/#msg39498)

值得称赞的是，Arvixe 的人追查了问题，并在我们反复讨论了几次之后最终解决了这个问题。

# matlab - 在多个本地线程上运行相同的 Matlab 脚本

> ID：14739909
> 
> 赞同：0
> 
> 时间：2013-02-06T22:14:27.727
> 
> 标签：matlab, parallel-processing

*   我有一台四核台式电脑
*   我在 Matlab 中有并行计算工具箱。
*   我有一个脚本文件，我需要在每个内核上同时运行

我不确定最有效的方法是什么，我知道我可以创建一个包含 4 个本地工作人员的“matlabpool”，但是我如何为每个工作人员分配相同的脚本？或者我可以使用“批处理”命令在特定线程上运行脚本，然后为每个线程执行此操作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:51:48.347

您可以使用 Parallel Computing 工具箱使用多个内核运行单个脚本，方法是使用 matlabpool open local 4 并使用 parfor 而不是 for 循环来跨四个线程执行循环中的任何内容。我不确定并行计算工具箱是否支持在每个内核上单独运行整个脚本，您的硬件可能不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:43:10.260

不确定这是否有效，但可以尝试以下方法：

当试图并行化计算时，它们通常用类似的东西包裹起来`parfor`

所以我建议对你的脚本做同样的事情，确保所有必需的输入和输出都具有必要的尺寸，然后调用：

```
parfor ii = 1:4
   myscript;
end 
```

* * *

旁注：在尝试这种东西之前，您可能需要检查您的 CPU 利用率。如果它已经很高，则意味着代码的内部部分使用并行处理，您不应该期望有太多的加速。

# iphone - iOS - 旋转后整个视图向上移动

> ID：14739913
> 
> 赞同：2
> 
> 时间：2013-02-06T22:14:55.220
> 
> 标签：iphone, ios, ipad, video

做一个非常简单的 iPad 应用程序，可以全屏播放视频。我希望视频完全居中，但在初始加载时它有点太低了。当我旋转它时，视图会正确重置为完全居中。显然，我希望从一开始就让它看起来像这样。

这是我在 viewDidLoad 中的代码：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"movie" ofType:@"m4v"]];
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[moviePlayer prepareToPlay];
CGRect screenBounds = [UIScreen mainScreen].bounds;
[moviePlayer.view setFrame:CGRectMake(0, 0, screenBounds.size.height, screenBounds.size.width)];
[self.view addSubview:moviePlayer.view];
moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
[moviePlayer play];
[super viewDidLoad]; 
```

该应用程序设置为仅在横向模式下显示，因此旋转每 180 度（而不是 90 度）生效。顺便说一句，moviePlayer var 在 .h 文件中设置，如下所示：

```
@property (nonatomic, strong) MPMoviePlayerController *moviePlayer; 
```

然后在我的 ViewController 中合成：

```
@synthesize moviePlayer; 
```

那么有人有什么想法吗？我尝试将“setFrame”更改为从 0,-20 而不是 0,0 开始，但这在后来的旋转中搞砸了。如果有办法在初始加载时忽略愚蠢的状态栏，我很想知道。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:18:42.297

尝试将框架设置为`-viewDidLayoutSubviews`. 布局应该在那里处理，而不是在设置方法中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:46:17.043

试着打电话

```
[self setWantsFullScreenLayout:YES]; 
```

在视图控制器实现中。这应该迫使它“忽略初始加载时的哑状态栏”。

# .net - TinyIOC 构造函数注入

> ID：14739917
> 
> 赞同：1
> 
> 时间：2013-02-06T22:15:09.463
> 
> 标签：.net, dependency-injection, tinyioc

在 Tiny IOC 中，如何获得要解决的类型。例如日志记录：

```
 container.Register<ILogger>((c, p) =>
                                        {
                                            return LoggerFactory.CreateLog(typeofCALLER);
                                        }); 
```

我正在尝试添加工厂来构建 ILogger，但没有注入信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:08:09.007

在这种情况下，简单地使用 TinyIoC 的开放泛型功能可能就足够了。

```
public class Consumer
{
    public Consumer(ILogger<Consumer> logger) {}
}

public interface ILogger<T>
{
    string Log(string message);
}

public class ConcreteLogger<T>:ILogger<T>
{
    public string Log(string message)
    {
        return string.Format("{0}: {1}", typeof (T), message);
    }
} 
```

然后做

```
container.Register(typeof (ILogger<>), typeof (ConcreteLogger<>)); 
```

这将导致一个实例`ConcreteLogger<Consumer>`被注入到`Consumer`构造函数中。

**编辑**

如果您需要`ILogger`参考，您可以只制作`ILogger<T>`一个“标记界面”并让它“派生”自`ILogger`：

```
public interface ILogger<T> : ILogger
{
} 
```

该类`Consumer`仍然需要依赖于`ILogger<Consumer>`，但`ConcreteLogger<T>`会直接实现`ILogger`成员。

我认为没有更好的方法，特别是如果`ILogger`接口是固定的，因为它不是你自己的。我认为没有办法向 TinyIoC 询问它当前尝试解析的类型然后能够对其采取行动，因此如果您需要特定于类型的实现，则必须通过其他方式知道类型 - 和泛型通常（并非总是）对此有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T08:06:34.610

注意：我`ILog`在我的示例中使用，这就是 log4net 所称的特定于类型的记录器类。但它的创建和使用方式似乎与您示例中的 ILogger 完全相同，并且 log4net 类似于`LogManager.GetLog(Type t)`您的`LoggerFactory.CreateLog(typeofCALLER)`.

这需要做更多的工作，但您可以创建一个通用工厂类来生成特定类型的记录器。将此工厂类注入到构造函数中，而不是`Ilog`.

TinyIoC 的注册 API 不允许您指定一个知道当前解析类型正在注入的包含类型的工厂。以下解决方法有效，因为 TinyIoC 注入了 or 的正确通用实例`LogFactory<Foo>`，`LogFactory<Bar>`然后我们捕获了由 .`ILog`返回的正确生成的实例`logFactory.Get()`。与我们使用 autofac 相比，需要额外的一些击键——它确实支持你所追求的——但它们不需要太多思考。

假设你想做一些登录类`Foo`，并且`Bar`. 您`LogFactory<T>`只需定义一次，并在 Foo、Bar 和任何其他需要使用特定于类型的 ILog 实例进行日志记录的类中使用它：

```
public class LogFactory<T> {
    public LogFactory() {} //empty
    public ILog Get() { return LogManager.GetLogger(typeof(T)); }
}

public class Foo {
    private readonly ILog _log; 

    public Foo(LogFactory<Foo> logFactory, ...) {
        _log = logFactory.Get();
    }
}

public class Bar{
    private readonly ILog _log; 

    public Bar(LogFactory<Bar> logFactory, ...) {
        _log = logFactory.Get();
    }
} 
```

# r - 使用插值的 R 热图

> ID：14739918
> 
> 赞同：-5
> 
> 时间：2013-02-06T22:15:15.480
> 
> 标签：r, interpolation, heatmap

该[线程](https://stackoverflow.com/questions/8508059/simple-r-3d-interpolation-surface-plot)解释了如何使用 akima 包从 x/y/z 坐标创建矩阵，但我宁愿不使用新包。毕竟，您可以在 gnuplot 的一个命令中执行相同的操作：[gnuplot interpolation](https://stackoverflow.com/questions/13282302/reduce-distance-between-points-in-splot)。

在上述 gnuplot 线程中使用数据点矩阵的图像绘图可以在 R 中通过调用 image() 命令来实现。

那么曲面图呢，我们如何插入 x/y/z 点以生成 2d 热图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T23:35:52.257

好吧，如果你不喜欢`akima::interp`，也许`stats::loess`是你的口味？

```
topo.loess <- loess (z ~ x * y, topo, degree = 2, span = 0.2)
x <- seq (min (topo$x), max (topo$x), .05)
y <- seq (min (topo$y), max (topo$y), .05)
interpolated <- predict (topo.loess, expand.grid (x = x, y = y))
image (x= x, y= y, z = interpolated, asp = 1)
points (topo) 
```

（也沿着 MASS 的路线）

![平滑插值](../Images/6402e707795da10298e0f55afb603527.png)

否则：为什么不使用 gnuplot？虽然它也可能被认为是一个不同的软件......

# java - 方法中的短缩窄转换

> ID：14739919
> 
> 赞同：0
> 
> 时间：2013-02-06T22:15:27.787
> 
> 标签：java, methods, short

正如这个问题的答案中所解释的：[Eclipse bug？什么时候短不是短？](https://stackoverflow.com/questions/14297113/eclipse-bug-when-is-a-short-not-a-short) 在将 int 隐式转换为 short 的方法中是不合法的。这与将 int 作为参数传递有关，其中方法中的参数很短。

但是，对于返回类型，情况似乎有所不同。

```
public short doStuff(){
System.out.println("ciao");
return 4;
} 
```

它仍然在方法范围内，即使它将被分配到方法之外（也许这就是原因）。不过有点疑惑，我想问问你对它的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:24:49.833

它之所以有效，是因为它是一个字面常量。这将给出编译器错误：

```
public short doStuff(int test)
{
    System.out.println("ciao");
    return test;  // error
} 
```

# regex - grep 如何匹配一些字母或行尾

> ID：14739924
> 
> 赞同：2
> 
> 时间：2013-02-06T22:15:49.213
> 
> 标签：regex, grep, newline

我有一些带有这样行的文件：

```
vi
vi-sw600dp
ddnki
xhdpi 
```

我想使用 grep 仅匹配行首有两个字母的行，之后字母为破折号或无（新行）。

所以输出将是这样的：

```
vi
vi-sw600dp 
```

我尝试这样的事情：

```
grep '^[A-Za-z]\{2\}[-\n]' 
```

我希望，它匹配带有两个起始字母 az、AZ 的行，然后是破折号或换行符。但它不起作用。\n 不是假定换行而是字符，所以它输出如下：

```
vi
vi-sw600dp
ddnki 
```

你能帮我么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:31:57.563

你很亲密。您需要使用行尾锚点`$`而不是`\n`. `$`不能是字符组的一部分，因此您应该改用原子分组：

```
 grep '^[A-Za-z]\{2\}\(-\|$\)' 
```

或与`-E`：

```
grep -E '^[A-Za-z]{2}(-|$)' 
```

# javascript - 将 Html 添加到没有子元素的文本

> ID：14739927
> 
> 赞同：0
> 
> 时间：2013-02-06T22:16:02.080
> 
> 标签：javascript, jquery

我对如何完成这项工作感到非常困惑，在网上做了很多研究以帮助找到解决方案，但一无所获。在此处找到此链接：http: [//viralpatel.net/blogs/jquery-get-text-element-without-child-element/](http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/)但仍然没有多大帮助

这就是我想要完成的，系统正在输出这样的文本，我无法控制 html。

```
<div class="myclass"> 
Text 1 
Text 2
Text 3        
</div>` 
```

但想使用 jquery 在这些文本周围插入 html 例如：

```
<div class="myclass"> 
 <span>Text 1 </span> 
 <span> Text 2 </span> 
 <span> Text 3</span>
 </div> 
```

任何帮助表示赞赏

非常感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:29:58.497

```
$('.myclass').html(function(i, v){
    return '<span>' + $.trim(v).split('\n').join('</span><span>') + '</span>';
}); 
```

[http://jsfiddle.net/vDp6A/](http://jsfiddle.net/vDp6A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:21:17.070

还有其他方法。这将满足这个问题。

```
$(function(){

  stuff=$('.myclass').text().split("\n");

  newhtml='';
  $.each(stuff, function(i,o){
    if (o!=''){
      newhtml +='<span>' + o + '</span>'."\n";
    }
  });
  $('.myclass').html(newhtml);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:21:57.990

这应该对其进行排序：

```
var theDivs = document.getElementsByClassName('myclass');

for(var i in theDivs)
{
    if(parseInt(i)==i)
    {
        var div = theDivs[i];
        var text = div.innerHTML.split("\n");
        for(var k in text)
        {
            var trimmed = text[k].replace(/^\s+|\s+$/,'');
            if(trimmed != '') text[k] = '<span>'+trimmed+'</span>';
            else text[k] = trimmed;
        }
        div.innerHTML = text.join("\n");
    }
} 
```

# java - JTable 重复行

> ID：14739928
> 
> 赞同：1
> 
> 时间：2013-02-06T22:16:04.217
> 
> 标签：java, swing, jtable

我的 jtable 应该读取一个文本文件并显示它们。

它正确读取所有数据，但只显示文件中的最后一行记录，在其所有行中重复。

我的错误在哪里？

我的文本文件：

```
uiui     898     666999
vvvv     6666     7777
hfsn     5356     56
ds     232     2212
bbnn     2013     211 
```

我的 AllBooks 课程：

```
public class AllBooks extends AbstractTableModel{

BookInformation Binfos=new BookInformation();

String[] Bcol=new String[]{"Name","Date","Id"};
List<BookInformation> Bdata=new ArrayList<BookInformation>();

public AllBooks(){
    try{
        FileReader fr=new FileReader("AllBookRecords.txt");
        BufferedReader br=new BufferedReader(fr);
        String line;

        while( (line=br.readLine()) !=null){
            Bdata.add(initializeUserInfos(line));
        }
        br.close();
    }
    catch(IOException ioe){

    }
}

public BookInformation initializeUserInfos(String str){
    System.out.println(str);
    String[] bookCellArray=str.split("     ");
    Binfos.setBookName(bookCellArray[0]);
    Binfos.setBookDate(bookCellArray[1]);
    Binfos.setBookID(bookCellArray[2]);
    return Binfos;
}

@Override
public String getColumnName(int col){
    return Bcol[col];
}

@Override
public int getRowCount() {
    if(Bdata !=null){
    return Bdata.size();
    }
    else{
        return 0;
    }
}

@Override
public int getColumnCount() {
    return Bcol.length;
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    BookInformation binfo=Bdata.get(rowIndex);
    Object value;

    switch(columnIndex){

        case 0:
            value=binfo.getBookName();
            break;
        case 1:
            value=binfo.getBookDate();
            break;
        case 2:
            value=binfo.getBookID();
            break;
        default :
            value="...";  
    }
    return value;

}

} 
```

我的 AllBooksM 课程：

```
public class AllBooksM {
   final AllBooks rbftl=new AllBooks();
   final JFrame Bframe=new JFrame("All Book List");
   final JTable Btable=new JTable(rbftl);

public AllBooksM(){

    JPanel Bpanel=new JPanel();
    Bpanel.setLayout(new FlowLayout());
    JScrollPane sp=new JScrollPane(Btable); 
    Bpanel.add(sp);
    Bframe.add(Bpanel);
    Btable.setAutoCreateRowSorter(true);
    Bframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Bframe.setBounds(300, 60, 550, 550);
    Bframe.setResizable(false);
    Bframe.setVisible(true);
}

public static void main(String[] args){
    new AllBooksM();
}
} 
```

我的 BookInformation 类：

```
public class BookInformation {

private String BookName;
private String BookDate;
private String BookID;

public String getBookName() {
    return BookName;
}

public void setBookName(String book_name) {
    this.BookName = book_name;
}

public String getBookDate() {
    return BookDate;
}

public void setBookDate(String book_date) {
    this.BookDate = book_date;
}

public String getBookID() {
    return BookID;
}

public void setBookID(String Book_id) {
    this.BookID = Book_id;
}

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:19:37.133

您在 while 循环的每次迭代中使用相同的 BookInformation 对象，而需要在每次迭代中创建一个新对象。否则，相同的对象将被表模型的所有行保存，导致相同的信息将显示在每一行上。

例如，您可以通过这样做来解决它。

```
public BookInformation initializeUserInfos(String str){
    System.out.println(str);
    String[] bookCellArray=str.split("     ");

    // create and use a local BookInformation variable and object:
    BookInformation bInfos = new BookInformation(); // *****

    bInfos.setBookName(bookCellArray[0]);
    bInfos.setBookDate(bookCellArray[1]);
    bInfos.setBookID(bookCellArray[2]);
    return bInfos;
} 
```

# node.js - mongoose、express 和 EJS 的奇怪行为

> ID：14739930
> 
> 赞同：1
> 
> 时间：2013-02-06T22:16:06.903
> 
> 标签：node.js, mongodb, express, mongoose

这是猫鼬和快递代码：

```
app.get('/:user/:id', function (req, res){

   usermodel.findOne({ user: req.params.user }, function (err, user){

   var imagen = user.imagen.id(req.params.id);

   console.log(imagen);

    res.render('photo.ejs', {

         user: user,
         photo: imagen

    });
   }); 
```

});

这是 EJS 模板中的输出：

```
<img src="/users/<%= user._id %>/<%= user.avatar %>" class="img-circle" alt=""> 
```

我有一个 console.log，返回 imagen 对象。就一次。但我收到这个：

```
{ title: 'Slimes',
  name: 'slimes.png',
  author: 'Mrmangado',
  description: 'A collection of Slimes',
  index: 1,
  views: 7,
  fav: 0,
  path: '/users/5112b8da8a63aae76f000005/',
  _id: 5112b91a8a63aae76f000006,
  comments: [],
  date: Wed Feb 06 2013 23:12:10 GMT+0300 (MSK),
  tags: [ '#Slimes', '#DQ', '#Sprites' ] }
null
TypeError: /root/views/photo.ejs:92

  >> 1|       <img src="/users/<%= user._id %>/<%= photo.name %>" alt=""/> 
```

我得到了两次 imagen 对象，第一次是定义的，但第二次的值为 null，所以我得到一个错误。为什么？为什么我收到两个请求，也许是对那个 URL 的请求，这真的很奇怪。对此有什么解决方案...？

谢谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:24:34.193

我认为请求 `/user/id`和`/usr/id/photoname` 执行相同的代码。此外，错误转储中的错误行也不是您之前复制的行。

# c++ - 无法打开相对路径

> ID：14739937
> 
> 赞同：1
> 
> 时间：2013-02-06T22:16:34.243
> 
> 标签：c++, file, relative-path

在我正在处理的项目中，在运行时我需要打开一些文件并阅读它

```
std::ifstream vSettings(".\\..\\..\\Data\\data.xml");
if (vSettings.good())
{

    //file found ,work with it

} 
```

我从来没有真正`good()`理解上面的电话。我手动检查了该文件相对于 .exe 是否确实存在。

exe的路径是\main\proj\bin\Debug-Win32。文件的路径是main\proj\Data。在用户电脑上运行时，会相对于.exe安装目录

我在调试模式下工作，路径是从“bin”目录的角度来看的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:03:11.627

转到调试设置

![在此处输入图像描述](../Images/a185650bd1da0e0f019eae90bb7b5325.png)

并将 $(ProjectDir) 更改为 $(OutDir)，它的行为应该像你期望的那样

# mysql - 我可以在不使用过程/函数的情况下在 MySQL 中运行循环吗？

> ID：14739940
> 
> 赞同：26
> 
> 时间：2013-02-06T22:16:48.013
> 
> 标签：mysql, mysql-workbench

对于测试，是否可以从 MySQL 工作台或类似工具运行循环？我试过了，但出错了。

如果可能，请提供一个我可以运行的简单示例。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-06T23:05:21.587

如果没有存储过程，就不能在 SQL 编辑器中执行 for 循环。我将[TOAD 用于 MySQL](https://www.quest.com/products/toad-for-mysql/)。

一个快速的存储过程应该可以完成这项工作：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS proc_loop_test$$
CREATE PROCEDURE proc_loop_test()
BEGIN
  DECLARE int_val INT DEFAULT 0;
  test_loop : LOOP
    IF (int_val = 10) THEN
      LEAVE test_loop;
    END IF;

    SET int_val = int_val +1;
    SELECT int_val; 
  END LOOP; 
END$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-12T21:12:53.960

有限的用例有一个“类似循环”的技巧。

我想为测试创建一个随机整数的大（1~200万）行表：

```
INSERT INTO test_table (num) VALUES(ROUND(RAND() * 1E6));

-- calling this will insert once for every row in test_table
INSERT INTO test_table (num)
SELECT ROUND(RAND() * 1E6)
FROM test_table; 
```

所以我很快就把行数增加了一倍，直到我得到了我需要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-16T12:07:37.503

假设您已经有一个足够长的任意表 myOldTable，您可以使用以下技巧：

```
set @counter = 0;
select (@counter := @counter+1), @counter*@counter from myOldTable limit 1000; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:39:28.170

如果您只想阻塞当前线程，则使用，`select sleep(seconds);`否则您可以使用存储过程（如果您想循环某些内容）或 UDF（用户定义函数）。

# ruby - 卸载 rdoc 可以使 Ubuntu 免受 Ruby RDoc XSS 漏洞的影响吗？

> ID：14739942
> 
> 赞同：2
> 
> 时间：2013-02-06T22:16:53.797
> 
> 标签：ruby, ubuntu, xss, rdoc

我刚刚阅读了[http://www.ruby-lang.org/en/news/2013/02/06/rdoc-xss-cve-2013-0256/](http://www.ruby-lang.org/en/news/2013/02/06/rdoc-xss-cve-2013-0256/)，关于 RDoc 中的 XSS 漏洞利用的报告。

我在 Ubuntu 12.04 上，我怀疑 Ubuntu 很快就会处理这个漏洞。

删除所有 RDoc 文档并卸载`rdoc`可执行文件会使我免受此漏洞的影响吗？

我不向公众托管 RDoc 文档，但`gem server`如果我忘记了这个漏洞，我偶尔可能会跑去查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:00:33.600

`gem server`如果您调整其启动方式，则在本地运行应该是安全的：

```
宝石服务器 -b 127.0.0.1
服务器启动于 http://127.0.0.1:8808

```

请注意，它位于 IP 127.0.0.1 上，其他机器无法访问，只能访问您的机器。它是环回，仅用于内部连接。

我在我的一个开发主机上启动了上面的服务器，并试图从我的桌面上点击它。连接失败，说它无法建立连接。

在 IRB 中使用 OpenURI 和 Nokogiri 从该框中击中它会返回：

```
Nokogiri::HTML(open('http://127.0.0.1:8808')).at('title').text
=> "RubyGems Documentation Index" 
```

所以有些东西在那里还活着，我的日志显示：

```
localhost - - [06/Feb/2013:16:08:56 MST] "GET / HTTP/1.1" 200 52435
- -> / 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:05:09.120

在您的情况下，除非您有恶意用户向您提供指向您自己服务器的精心设计的链接，否则您是安全的。基本上，如果有人使用此漏洞托管 rdoc，则恶意用户可以通过将代码放入 URL 中的目标引用中，向某人发送精心设计的链接。如果您查看 CVE 中的差异，您可以看到最初变量“target”被传递给未受保护的包装代码。然后有人可以发送类似的东西`http://example.com/rdoc/File.html#code to inject cookie stealing stuff`，这些东西将由受害者浏览器呈现。

# gem - 使用 Rubber gem 设置 Varnish 服务器

> ID：14739947
> 
> 赞同：0
> 
> 时间：2013-02-06T22:17:18.407
> 
> 标签：gem, runtime-error, varnish, net-ssh

我正在尝试在缓存服务器上安装清漆。我的以下堆栈与...

HA 代理服务器 ----> 缓存（清漆）服务器 ----> Nginx + Unicorn 服务器

我已经能够正确设置 HAProxy 和 Varnish 的所有配置文件，以沿管道移动流量。但是，当我尝试引导我的缓存服务器时出现错误。

`** ERROR: While executing gem ... (Gem::DependencyError) ** Unable to resolve dependencies: rubber requires net-ssh (~> 2.4.0); fog requires net-ssh (>= 2.1.3); capistrano requires net-ssh (>= 2.0.14); net-ssh-gateway requires net-ssh (>= 2.6.4); net-scp requires net-ssh (>= 2.6.4); net-sftp requires net-ssh (>= 2.6.4) ** /tmp/gem_helper:32:in `block in <main>' ** : Unable to install versioned gem rubber:2.1.2 (RuntimeError ** ) ** from /tmp/gem_helper:30:in `each' ** from /tmp/gem_helper:30:in `<main>'`

我似乎无法弄清楚为什么会这样。任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:53:16.330

我遇到了这个问题，我发现的解决方案有点不令人满意和暂时的，但它奏效了。

此错误发生在`rubber:install_gems`任务期间。失败后，通过ssh登录ec2服务器。此时，如果您尝试`gem install rubber -v=2.1.2`在远程控制台中手动运行，则会失败并显示与上面显示的完全相同的错误。（版本号对您来说可能不同，这取决于您执行此操作时使用的橡胶版本）。

所以现在创建一个任意名称的空文件夹，并在其中创建一个几乎为空的 Gemfile。

```
$ mkdir dummy && cd dummy
$ nano Gemfile 
```

然后用以下内容填充 Gemfile：

```
source 'http://rubygems.org'
gem 'rubber', '2.1.2' 
```

同样，橡胶的版本可能对您有所不同。

创建此文件后，运行`bundle install`，一切都会正确安装。但是不要问我为什么通过 bundler 安装橡胶与通过普通旧的`gem install`.

因此，在实现这一点后，从 ec2 注销并重新运行`cap rubber:bootstrap`，它应该可以工作。

令人不满意的是，如果您决定在 ec2 上创建新实例，它将在同一点再次失败，您必须重复此步骤并手动重新启动该过程才能完成。因此，如果有人能想出更好的解决方案，比如改性橡胶之类的，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:41:11.967

让我先说我有同样的问题并解决了它，但我没有使用清漆或独角兽。

看起来您缺少 capistrano，将其添加到您的 gemfile 中，它应该会处理大多数依赖项。但是在我的情况下，橡胶抱怨需要 net-ssh (~> 2.4.0) 并且 capistrano 安装了最新的 net-ssh gem。因此，要修复此问题，请编辑您的 Gemfile.lock 以使用 net-ssh (2.4.0) 而不是最新版本，然后运行 ​​bundle install 应该修复依赖关系。

# python - 你如何在 Python 中格式化？这些只是 6 条记录作为 Json 对象

> ID：14739950
> 
> 赞同：-3
> 
> 时间：2013-02-06T22:17:24.793
> 
> 标签：python, python-2.7, json

我需要格式化这个字符串。这些只是 JSON 数组/对象的 6 条记录。我需要编写一个 python 代码来删除所有`" ,`. 我只想在一行中查看真实数据。

有人可以帮我写代码吗？我有一个截止日期..请帮忙..

```
{"status": "ok", "items": [{"1": {"Work_Phone_Extension": null, "Residential_Postal_OR_Zip_Code": "", "Residential_Street_Address_line_2": "", "Residential_Street_Address_line_1": "", "Work_Phone": "", "Name_Part": ["PATIENT", "TEST"], "Residence_Phone": "416-", "Mailing_City": "Toronto", "Mailing_Postal_OR_Zip_Code": "", "Mailing_Street_Address_line_2": "", "Mailing_Street_Address_line_1": "", "Cell_Phone": null, "Residential_City": "Toronto", "Residential_Country_AND_Province_OR_State": "CA_ON", "Mailing_Country_AND_Province_OR_State": "CA_ON"}, "3": {"Work_Phone_Extension": null, "Residential_Postal_OR_Zip_Code": "", "Residential_Street_Address_line_2": "", "Residential_Street_Address_line_1": "", "Work_Phone": "", "Name_Part": ["WOLFIE", "HOWLETT"], "Residence_Phone": "416-", "Mailing_City": "Toronto", "Mailing_Postal_OR_Zip_Code": "", "Mailing_Street_Address_line_2": "", "Mailing_Street_Address_line_1": "", "Cell_Phone": null, "Residential_City": "Toronto", "Residential_Country_AND_Province_OR_State": "CA_ON", "Mailing_Country_AND_Province_OR_State": "CA_ON"}, "2": {"Work_Phone_Extension": null, "Residential_Postal_OR_Zip_Code": "", "Residential_Street_Address_line_2": "", "Residential_Street_Address_line_1": "18 Yonge St", "Work_Phone": "", "Name_Part": ["Steve", "TEST"], "Residence_Phone": "416-555-5555", "Mailing_City": "Toronto", "Mailing_Postal_OR_Zip_Code": "", "Mailing_Street_Address_line_2": "", "Mailing_Street_Address_line_1": "18 Yonge St", "Cell_Phone": null, "Residential_City": "Toronto", "Residential_Country_AND_Province_OR_State": "CA_ON", "Mailing_Country_AND_Province_OR_State": "CA_ON"}, "5": {"Work_Phone_Extension": null, "Residential_Postal_OR_Zip_Code": "", "Residential_Street_Address_line_2": "", "Residential_Street_Address_line_1": "", "Work_Phone": "", "Name_Part": ["BUTTERS", "STOTCH"], "Residence_Phone": "416-", "Mailing_City": "Toronto", "Mailing_Postal_OR_Zip_Code": "", "Mailing_Street_Address_line_2": "", "Mailing_Street_Address_line_1": "", "Cell_Phone": null, "Residential_City": "Toronto", "Residential_Country_AND_Province_OR_State": "CA_ON", "Mailing_Country_AND_Province_OR_State": "CA_ON"}, "4": {"Work_Phone_Extension": null, "Residential_Postal_OR_Zip_Code": "91041", "Residential_Street_Address_line_2": "", "Residential_Street_Address_line_1": "1 Manhattan Ave.", "Work_Phone": "", "Name_Part": ["SUE", "STORM"], "Residence_Phone": "416-555-5556", "Mailing_City": "Star City", "Mailing_Postal_OR_Zip_Code": "91041", "Mailing_Street_Address_line_2": "", "Mailing_Street_Address_line_1": "1 Manhattan Ave.", "Cell_Phone": null, "Residential_City": "Star City", "Residential_Country_AND_Province_OR_State": "CA_ON", "Mailing_Country_AND_Province_OR_State": "CA_ON"}, "6": {"Work_Phone_Extension": null, "Residential_Postal_OR_Zip_Code": "", "Residential_Street_Address_line_2": "", "Residential_Street_Address_line_1": "1 Rural Rd E", "Work_Phone": "", "Name_Part": ["CLARK", "KENT"], "Residence_Phone": "416-606-0001", "Mailing_City": "Smallville", "Mailing_Postal_OR_Zip_Code": "", "Mailing_Street_Address_line_2": "", "Mailing_Street_Address_line_1": "1 Rural Rd E", "Cell_Phone": null, "Residential_City": "Smallville", "Residential_Country_AND_Province_OR_State": "CA_ON", "Mailing_Country_AND_Province_OR_State": "CA_ON"}}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:21:54.467

```
import json
l_dict = json.loads(long_string) 
```

然后，您有一本字典，您可以根据需要对其进行格式化/迭代。

```
In [192]: l_dict
Out[192]: 
{u'items': [{u'1': {u'Cell_Phone': None,
    u'Mailing_City': u'Toronto',
    u'Mailing_Country_AND_Province_OR_State': u'CA_ON',
    u'Mailing_Postal_OR_Zip_Code': u'',
    u'Mailing_Street_Address_line_1': u'',
    u'Mailing_Street_Address_line_2': u'',
    u'Name_Part': [u'PATIENT', u'TEST'],
    u'Residence_Phone': u'416-',
    u'Residential_City': u'Toronto',
    u'Residential_Country_AND_Province_OR_State': u'CA_ON',
    u'Residential_Postal_OR_Zip_Code': u'',
    u'Residential_Street_Address_line_1': u'',
    u'Residential_Street_Address_line_2': u'',
    u'Work_Phone': u'',
    u'Work_Phone_Extension': None},
   u'2': {u'Cell_Phone': None,
    u'Mailing_City': u'Toronto',
    u'Mailing_Country_AND_Province_OR_State': u'CA_ON',
    u'Mailing_Postal_OR_Zip_Code': u'',
    u'Mailing_Street_Address_line_1': u'18 Yonge St',
    u'Mailing_Street_Address_line_2': u'',
    u'Name_Part': [u'Steve', u'TEST'],
    u'Residence_Phone': u'416-555-5555',
    u'Residential_City': u'Toronto',
    u'Residential_Country_AND_Province_OR_State': u'CA_ON',
    u'Residential_Postal_OR_Zip_Code': u'',
    u'Residential_Street_Address_line_1': u'18 Yonge St',
    u'Residential_Street_Address_line_2': u'',
    u'Work_Phone': u'',
    u'Work_Phone_Extension': None},
   u'3': {u'Cell_Phone': None,
    u'Mailing_City': u'Toronto',
    u'Mailing_Country_AND_Province_OR_State': u'CA_ON',
    u'Mailing_Postal_OR_Zip_Code': u'',
    u'Mailing_Street_Address_line_1': u'',
    u'Mailing_Street_Address_line_2': u'',
    u'Name_Part': [u'WOLFIE', u'HOWLETT'],
    u'Residence_Phone': u'416-',
    u'Residential_City': u'Toronto',
    u'Residential_Country_AND_Province_OR_State': u'CA_ON',
    u'Residential_Postal_OR_Zip_Code': u'',
    u'Residential_Street_Address_line_1': u'',
    u'Residential_Street_Address_line_2': u'',
    u'Work_Phone': u'',
    u'Work_Phone_Extension': None},
   u'4': {u'Cell_Phone': None,
    u'Mailing_City': u'Star City',
    u'Mailing_Country_AND_Province_OR_State': u'CA_ON',
    u'Mailing_Postal_OR_Zip_Code': u'91041',
    u'Mailing_Street_Address_line_1': u'1 Manhattan Ave.',
    u'Mailing_Street_Address_line_2': u'',
    u'Name_Part': [u'SUE', u'STORM'],
    u'Residence_Phone': u'416-555-5556',
    u'Residential_City': u'Star City',
    u'Residential_Country_AND_Province_OR_State': u'CA_ON',
    u'Residential_Postal_OR_Zip_Code': u'91041',
    u'Residential_Street_Address_line_1': u'1 Manhattan Ave.',
    u'Residential_Street_Address_line_2': u'',
    u'Work_Phone': u'',
    u'Work_Phone_Extension': None},
   u'5': {u'Cell_Phone': None,
    u'Mailing_City': u'Toronto',
    u'Mailing_Country_AND_Province_OR_State': u'CA_ON',
    u'Mailing_Postal_OR_Zip_Code': u'',
    u'Mailing_Street_Address_line_1': u'',
    u'Mailing_Street_Address_line_2': u'',
    u'Name_Part': [u'BUTTERS', u'STOTCH'],
    u'Residence_Phone': u'416-',
    u'Residential_City': u'Toronto',
    u'Residential_Country_AND_Province_OR_State': u'CA_ON',
    u'Residential_Postal_OR_Zip_Code': u'',
    u'Residential_Street_Address_line_1': u'',
    u'Residential_Street_Address_line_2': u'',
    u'Work_Phone': u'',
    u'Work_Phone_Extension': None},
   u'6': {u'Cell_Phone': None,
    u'Mailing_City': u'Smallville',
    u'Mailing_Country_AND_Province_OR_State': u'CA_ON',
    u'Mailing_Postal_OR_Zip_Code': u'',
    u'Mailing_Street_Address_line_1': u'1 Rural Rd E',
    u'Mailing_Street_Address_line_2': u'',
    u'Name_Part': [u'CLARK', u'KENT'],
    u'Residence_Phone': u'416-606-0001',
    u'Residential_City': u'Smallville',
    u'Residential_Country_AND_Province_OR_State': u'CA_ON',
    u'Residential_Postal_OR_Zip_Code': u'',
    u'Residential_Street_Address_line_1': u'1 Rural Rd E',
    u'Residential_Street_Address_line_2': u'',
    u'Work_Phone': u'',
    u'Work_Phone_Extension': None}}],
 u'status': u'ok'} 
```

# android - 在 Android 中，图像大小同时支持多种屏幕尺寸

> ID：14739951
> 
> 赞同：0
> 
> 时间：2013-02-06T22:17:28.540
> 
> 标签：android, xml

在我的 android 应用程序中，我想支持多种屏幕尺寸。我意识到对于 Android 来说，“大”意味着很多当前的手机屏幕都是 480 x 800 像素，以及像 Nexus 7 这样的 7 英寸平板电脑，它有 800 x 1280 像素。但我想为这两种显示尺寸。我发现不是使用`res/layout-large`，而是使用`res/layout-h800dp`让我更好地控制哪种尺寸的屏幕使用哪种布局。（我使用的是纵向，因此是 h800dp） 我遇到的问题是：有时 h800dp 布局使用 drawable-mdpi 文件夹中的图像，有时它使用 drawable-hdpi 文件夹中的图像。我在 xml 中使用相同的语法来调用图像：`android:src="@drawable/image"，但在一个活动中，它在 mdpi 可绘制文件夹中查找，在下一个活动中，它在 ldpi 中查找可绘制文件夹。有什么方法可以让 h800dp 布局始终在 ldpi 文件夹中查找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:24:17.347

[此链接](http://developer.android.com/guide/practices/screens_support.html)几乎解释了有关屏幕属性（DPI、物理尺寸、分辨率等）的所有内容。

您可以做的是指定文件夹，如 layout-large-hdpi、layout-large-mdpi 和 layout-large-ldpi。

尝试在文件夹名称中将这些类型混合在一起。

# java - 设置日期对象 Java

> ID：14739953
> 
> 赞同：1
> 
> 时间：2013-02-06T22:17:33.513
> 
> 标签：java, date

**我有一个日期对象 myDate(say)。执行以下操作后：**

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.MONTH, 9);
cal.set(Calendar.DATE, 24);
cal.set(Calendar.YEAR, 2013);
cal.set(Calendar.HOUR,13);
cal.set(Calendar.MINUTE,45);
cal.set(Calendar.SECOND,52); 
```

**我想将 myDate 对象设置为上述值，从而显示以下输出。**

```
Mon Sep 09 13:45:52 PST 2013 
```

**请让我知道该怎么做。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:21:41.293

```
import java.util.*;

public class DateTest {
    public static void main(String[] args) {
        Date myDate;
        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.MONTH, 8);
        cal.set(Calendar.DATE, 24);
        cal.set(Calendar.YEAR, 2013);
        cal.set(Calendar.HOUR,13);
        cal.set(Calendar.MINUTE,45);
        cal.set(Calendar.SECOND,52);
        myDate = cal.getTime();
        System.out.println(myDate);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:02:30.193

月份属性**从一月 = 零开始**。为什么哦，为什么 Sun 做这种违反直觉的事情，我不知道。

```
导入 java.util.*；

公共类 DateTest {
    公共静态无效主要（字符串[]参数）{
        日期我的日期；
        日历 cal = Calendar.getInstance();
        cal.set(Calendar.MONTH, 8);
        cal.set（日历.日期，24）；
        cal.set（日历年，2013 年）；
        cal.set(Calendar.HOUR,13);
        cal.set(Calendar.MINUTE,45);
        cal.set(Calendar.SECOND,52);
        myDate = cal.getTime();
        System.out.println(myDate);
    }
}

```

另一个考虑因素是，输出中有一个时区 - 如果您想要 Java 安装的时区，没有问题。如果您想要 PST*并且 Java 时区默认值位于 else 某个地方*，请使用以下构造函数：

```
TimeZone timezone = TimeZone.getTimeZone("America/Los_Angeles");
Calendar cal = Calendar.getInstance(timezone); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:20:31.830

你可以写：

```
myDate.setTime(cal.getTimeInMillis()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T22:21:17.580

使用[**SimpleDateFormat**](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：

```
new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy").format(cal.getTime()) 
```

# javascript - 如何使用 nvd3、d3、javascript 错开子弹图

> ID：14739961
> 
> 赞同：2
> 
> 时间：2013-02-06T22:18:21.783
> 
> 标签：javascript, svg, d3.js

我正在尝试制作 5 个相互堆叠的子弹图，例如在此示例中：http: [//boothead.github.com/d3/ex/bullet.html](http://boothead.github.com/d3/ex/bullet.html)

我正在为图表使用 d3 和 nvd3 包。如何遍历并在页面下方进一步翻译每个图表？我的工作代码是：

```
for (var i =0; i<5;i++){

  nv.addGraph(function() {
    var chart = nv.models.bulletChart();
    d3.select('#chart svg') 
      .append("svg:g")
      .datum(exampleData())
      .transition().duration(1000)
      .call(chart);
      return chart;
  }); 
} 
```

但这只是将所有图表堆叠在一起。

我尝试在附加 svg:g 元素之后使用 .attr("transform", "translate(0,"+i*50+")") 并在之后做一些事情，例如，

```
d3.selectAll("svg:g").attr("transform", function(i){ return "translate(0,"+i*50+")" }); 
```

我似乎无法在范围内获得计数器变量，或者由于某种原因它无法正确显示。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:55:15.200

要检查的两件事：

*   用于`d3.selectAll`获取所有 svg 节点
*   您的`transform`函数需要采用两个参数，如`function(d,i) {...}`. `d`指正在处理的数据，`i`是你要用于置换的索引

# php - Yii relations and findAllByAttributes

> ID：14739966
> 
> 赞同：0
> 
> 时间：2013-02-06T22:18:49.603
> 
> 标签：php, yii

In order to find all records with a given quantity I have the following code. This is giving me the proper records back but it only shows the 'id' of each record. How can I display 'AttributeB' instead of 'id' in my results.

```
$qty = $model->relation->Quantity;
$item = ModelB::model()->findAllByAttributes(array('Quantity'=>$qty));

echo $form->dropDownList($model, 'Attribute', $item); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:50:31.113

try this

```
echo $form->dropDownList($model,'Attribute',CHtml::listData($item, 'id', 'attributeB')); 
```

# c++ - devIL .so 在 ubuntu 上我应该把它们放在哪里 - 运行时错误

> ID：14739967
> 
> 赞同：1
> 
> 时间：2013-02-06T22:18:55.313
> 
> 标签：c++, linux, devil

我目前正在将我的游戏从 Windows 移植到 Linux。Debian(home) 和 Fedora(uni)。它构建得很好，但是在运行时是预期的 `error while loading shared libraries: libIL.so.1`。

首先 .1 到底是什么？我尝试使用将 libIL.so 和 .1 放在可执行文件旁边，但仍然有相同的错误。我该怎么办？- 请记住，我在 Fedora 机器上没有 root 访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:22:46.427

放入`libIL.so`与您的可执行文件相同的目录`mygame`，然后为您的游戏创建一个启动脚本，例如`mygame.sh`：

```
#!/bin/sh
LD_PRELOAD=. ./mygame 
```

现在您可以从命令行使用`./mygame.sh`.

* * *

编辑：我上面的实际意思是`LD_LIBRARY_PATH`而不是`LD_PRELOAD`. 将所有库与可执行文件放在一起并使用`LD_LIBRARY_PATH=.`，然后库加载器将在当前文件夹中查找它需要的所有库。

# python - 使用 matplotlib 保存散点图动画

> ID：14739969
> 
> 赞同：6
> 
> 时间：2013-02-06T22:18:59.600
> 
> 标签：python, 3d, matplotlib, avi, scatter-plot

我一直在尝试使用 matplotlib 保存动画散点图，我希望它不需要完全不同的代码来查看动画图形和保存副本。该图完美地显示了保存完成后的所有数据点。

此代码是 Giggi 在 matplotlib 中 Animating 3d scatterplot 的修改版本，修复[了](https://stackoverflow.com/questions/11376898/animating-3d-scatterplot-in-matplotlib)[Yann](https://stackoverflow.com/a/12741231/786020)对[Matplotlib 3D scatter color 在重绘后丢失的回答](https://stackoverflow.com/a/8974087/786020)中[的颜色](https://stackoverflow.com/questions/8971309/matplotlib-3d-scatter-color-lost-after-redraw)（因为颜色在我的视频中很重要，所以我想确保它们有效）。

```
import matplotlib.pyplot as plt
import matplotlib.animation as animation
import numpy as np
from mpl_toolkits.mplot3d import Axes3D

FLOOR = -10
CEILING = 10

class AnimatedScatter(object):
    def __init__(self, numpoints=5):
        self.numpoints = numpoints
        self.stream = self.data_stream()
        self.angle = 0

        self.fig = plt.figure()
        self.fig.canvas.mpl_connect('draw_event',self.forceUpdate)
        self.ax = self.fig.add_subplot(111,projection = '3d')
        self.ani = animation.FuncAnimation(self.fig, self.update, interval=100, 
                                       init_func=self.setup_plot, blit=True,frames=20)

    def change_angle(self):
        self.angle = (self.angle + 1)%360

    def forceUpdate(self, event):
        self.scat.changed()

    def setup_plot(self):
        X = next(self.stream)
        c = ['b', 'r', 'g', 'y', 'm']
        self.scat = self.ax.scatter(X[:,0], X[:,1], X[:,2] , c=c, s=200, animated=True)

        self.ax.set_xlim3d(FLOOR, CEILING)
        self.ax.set_ylim3d(FLOOR, CEILING)
        self.ax.set_zlim3d(FLOOR, CEILING)

        return self.scat,

    def data_stream(self):
        data = np.zeros(( self.numpoints , 3 ))
        xyz = data[:,:3]
        while True:
            xyz += 2 * (np.random.random(( self.numpoints,3)) - 0.5)
            yield data

    def update(self, i):
        data = next(self.stream)
        #data = np.transpose(data)

        self.scat._offsets3d = ( np.ma.ravel(data[:,0]) , np.ma.ravel(data[:,1]) , np.ma.ravel(data[:,2]) )

        plt.draw()
        return self.scat,

    def show(self):
        plt.show()

if __name__ == '__main__':
    a = AnimatedScatter()
    a.ani.save("movie.avi", codec='avi')
    a.show() 
```

由此生成了一个完全有效的 .avi，但除了轴之外，它在所有四秒内都是空白的。实际的数字总是准确地显示我想看到的。如何以与填充正常运行的动画相同的方式填充保存函数的绘图，或者在 matplotlib 中是否可以？

**编辑：**在更新中使用分散调用（没有像在初始化程序中那样设置边界）导致 .avi 显示轴增长，表明数据每次都在运行，它只是没有显示在视频本身上。我将 matplotlib 1.1.1rc 与 Python 2.7.3 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:14:00.170

`blit=True`从`FuncAnimation`和`animated=True`从删除`scatter`，它的工作原理。我怀疑确保只有需要更新的艺术家在帧之间更新/重绘（而不是仅仅重新绘制所有内容）的逻辑出了问题。

下面正是我运行的内容，我得到了预期的输出电影：

```
import matplotlib.pyplot as plt
import matplotlib.animation as animation
import numpy as np
from mpl_toolkits.mplot3d import Axes3D

FLOOR = -10
CEILING = 10

class AnimatedScatter(object):
    def __init__(self, numpoints=5):
        self.numpoints = numpoints
        self.stream = self.data_stream()
        self.angle = 0

        self.fig = plt.figure()
        self.fig.canvas.mpl_connect('draw_event',self.forceUpdate)
        self.ax = self.fig.add_subplot(111,projection = '3d')
        self.ani = animation.FuncAnimation(self.fig, self.update, interval=100, 
                                       init_func=self.setup_plot, frames=20)

    def change_angle(self):
        self.angle = (self.angle + 1)%360

    def forceUpdate(self, event):
        self.scat.changed()

    def setup_plot(self):
        X = next(self.stream)
        c = ['b', 'r', 'g', 'y', 'm']
        self.scat = self.ax.scatter(X[:,0], X[:,1], X[:,2] , c=c, s=200)

        self.ax.set_xlim3d(FLOOR, CEILING)
        self.ax.set_ylim3d(FLOOR, CEILING)
        self.ax.set_zlim3d(FLOOR, CEILING)

        return self.scat,

    def data_stream(self):
        data = np.zeros(( self.numpoints , 3 ))
        xyz = data[:,:3]
        while True:
            xyz += 2 * (np.random.random(( self.numpoints,3)) - 0.5)
            yield data

    def update(self, i):
        data = next(self.stream)
        self.scat._offsets3d = ( np.ma.ravel(data[:,0]) , np.ma.ravel(data[:,1]) , np.ma.ravel(data[:,2]) )
        return self.scat,

    def show(self):
        plt.show()

if __name__ == '__main__':
    a = AnimatedScatter()
    a.ani.save("movie.avi", codec='avi')
    a.show() 
```

# c# - 如何将默认 TabPage 样式与程序创建的标签页相匹配？

> ID：14739971
> 
> 赞同：0
> 
> 时间：2013-02-06T22:19:12.127
> 
> 标签：c#, winforms, tabs, tabpage

以编程方式插入标签页时，创建的标签页与使用设计器时所期望的颜色方案类型不同。从下面的屏幕截图中可以看出，“活动”选项卡的背景颜色保持不变。我如何以编程方式将 TabPages 添加到选项卡控件，使其表现得就像我使用设计器添加它们一样？

![在此处输入图像描述](../Images/9bc6ff837458f4632ca2f9b47860606c.png)

我有以下代码以编程方式将选项卡页插入到我使用 WinForms 创建的选项卡控件上（它位于 foreach 循环中）。

```
TabPage tPage = new TabPage();
tPage.Text = item.DisplayName + " Options";

FlowLayoutPanel flowPanel = new FlowLayoutPanel();
Label lblLocationField = new Label();
lblLocationField.Text = "Insert into location field:";
CheckBox chkLocationField = new CheckBox();
chkLocationField.Name = "locationField";
flowPanel.Controls.Add(lblLocationField);
flowPanel.Controls.Add(chkLocationField);

tPage.Controls.Add(flowPanel);

this.tabControlConfiguration.Controls.Add(tPage); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:57:50.520

事实证明，TabPage 的新实例将 UseVisualStyleBackColor 属性默认设置为 false，而设计器将其设置为“true”。

因此，只需将下面的一行添加到我的代码中，我就能让它正确渲染！

```
tPage.UseVisualStyleBackColor = true; 
```

![在此处输入图像描述](../Images/dc2e3b1a194433ef5caced5b7956c1a9.png)

# php - Php 正则表达式 - 删除 $ 和换行符之间的任何内容，但保留换行符

> ID：14739974
> 
> 赞同：1
> 
> 时间：2013-02-06T22:19:32.063
> 
> 标签：php, regex, preg-replace

好的，我有一个生成这样的字符串的 php 循环：

```
$string = "1st fee - $500.00<BR>
           2nd fee - $500.00<BR>
           3rd fee - $750.00<BR>" 
```

我想删除美元金额，但我不确定这是否可能。我一直在尝试使用 preg_replace 来删除之间的所有内容`$`，`<`包括`$`但不是`<`得到这样的东西：

```
 $string = "1st fee - <BR>
               2nd fee - <BR>
               3rd fee - <BR>" 
```

对我来说不幸的是，我不得不离开，因为有时单行`-`会有多个实例，如下所示：`-`

```
$string = "1st fee - Brian - $500.00<BR>
           2nd fee - John - $500.00<BR>
           3rd fee - Bob - $750.00<BR>" 
```

任何帮助将不胜感激，即使它只是告诉我放弃，不可能。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:21:05.740

所以基本上你只想匹配`- $`从`<br>`. 模式的第一部分`- \\$`（需要转义 $，因为这是一个正则表达式关键字）将匹配您要删除的内容的开始部分，然后`[^<]*`将获取所有内容，直到找到一个左箭头。

```
$string = "1st fee - Brian - $500.00<BR>
           2nd fee - John - $500.00<BR>
           3rd fee - Bob - $750.00<BR>";

$replaced = preg_replace("# - \\$[^<]*#", "", $string); 
```

输出：

```
string '1st fee - Brian<BR>
        2nd fee - John<BR>
        3rd fee - Bob<BR>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:24:33.187

您可以使用以下示例删除金额**和最后一个 -**

```
<?php

$string = "1st fee - $500.00<BR>
           2nd fee - $500.00<BR>
           3rd fee - Bob - $750.00<BR>";

$pattern = '/\- \$[0-9]+\.[0-9]+\<BR>$/m';

echo preg_replace($pattern, '', $string); 
```

请注意，由于`/m`修饰符，模式匹配多行，其中`$`( 在模式的末尾) 匹配一行的末尾。这样就可以从右到左匹配每一行并删除数量，并且只删除其中的最后一个`-`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:51:17.420

我认为您应该使用完整格式。您想替换金额，因此您应该使用与金额相对应的正则表达式。

```
$reg = '/ - \$[0-9]+\.[0-9]{2}/';
$withoutAmount = preg_replace($reg, '', $string); 
```

您可以使用其他货币改进正则表达式：

```
$reg = '/ - (\$|£|€)[0-9]+\.[0-9]{2}/': 
```

测试它： http: [//phpfiddle.org/main/code/auw-gb4](http://phpfiddle.org/main/code/auw-gb4)

# jquery-mobile - 使用 jQuery Mobile 和 MVC 实现列表分页的最佳方法是什么？

> ID：14739982
> 
> 赞同：1
> 
> 时间：2013-02-06T22:19:59.920
> 
> 标签：jquery-mobile, asp.net-mvc-4

我正在根据教程构建一个媒体库，以加快 MVC 4 的速度。我完成了整个工作，现在我正在使用 jQuery Mobile 重新构建它。我还没有找到简单的唯一部分是分页，这应该很容易。有人可以引导我朝着这个主题的一个很好的教程方向发展吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T08:13:37.423

我们确实有类似的用例。

将Data in Session对象以Dictionary的形式存储在这种形式中。

在分页控件中单击下一个或上一个按钮时，从控制器中获取数据，将数据绑定到 UI 中的适当控件并显示数据。

确保在 UI 中仅显示有限的数据。限制数量[每页最多10个]

格式化字典

# extjs4 - 区域中的 ExtJS4 选择器

> ID：14739985
> 
> 赞同：2
> 
> 时间：2013-02-06T22:20:10.957
> 
> 标签：extjs4, css-selectors

我正在尝试引用一个区域中的网格：

```
...
region: 'south',
layout: 'fit',
split: true,
items:[{
     xtype: 'grid',
     border: false
     ...
}]
... 
```

在我的控制器的 refs 部分，但我不知道如何引用该区域内的实际网格：

```
{ref: 'myGrid',selector:'????'} 
```

请有人朝正确的方向踢我，拜托。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:26:43.440

我没有使用 ref，而是向网格组件添加了 itemId，并且可以使用 Ext.ComponentQuery() 在控制器中访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:38:50.050

refs 用于视图，而不是组件。原因是只有一个控制器可以引用特定视图。您用作选择器的是视图的别名之一。因此，您必须创建一个扩展 Ext.panel.Panel 并包含 Ext.grid.Panel 的视图或扩展 Ext.grid.Panel 的视图。此视图必须有自己的别名，并且该别名就是您用作选择器的别名。

# python - 金字塔遍历 HTTP PUT 到不存在的 URI

> ID：14739993
> 
> 赞同：1
> 
> 时间：2013-02-06T22:21:02.920
> 
> 标签：python, pyramid, traversal

所以我有一个金字塔遍历应用程序，我希望能够 PUT 到不存在的 URI。有没有办法在视图配置中做到这一点？

所以例如我有这个

```
@view_defaults(context=models.Groups, renderer='json')
@view_config(request_method='GET')
class GroupsView(object):

    def __call__(self):
        ''' This URI corresponds to GET /groups '''
        pass

    @view_config(request_method='PUT')
    def put(self):
        ''' This URI should correspond to PUT /groups/doesnotexist '''
        pass 
```

当然，put 不起作用。上下文会在 上引发 keyerror `doesnotexist`，但在这种情况下如何让遍历器匹配视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:13:59.953

`Group`对于具有`Group`上下文和上下文的对象，这听起来像是一个单独的类`UndefinedGroup`。大多数视图都适用于`Group`，但您可以有一个特殊的方法来响应对`UndefinedGroup`对象的 PUT 请求。注意不`UndefinedGroup`应该子类化`Group`。

```
@view_defaults(context=Group, renderer='json')
class GroupView(object):
    def __init__(self, request):
        self.request = request

    @view_config(request_method='GET')
    def get(self):
        # return information about the group

    @view_config(context=UndefinedGroup, request_method='PUT')
    def put_new(self):
        # create a Group from the UndefinedGroup

    @view_config(request_method='PUT')
    def put_overwrite(self):
        # overwrite the old group with a new one 
```

然后，如果您的遍历树`UndefinedGroup`找不到`Group`.

# selenium - 尝试在 Mac 上的 Selenium 中联系 RemoteTestNG 时超时

> ID：14739996
> 
> 赞同：1
> 
> 时间：2013-02-06T22:21:14.637
> 
> 标签：selenium, testng, osx-mountain-lion, ubuntu-12.04

我有一个在 Eclipse Indigo 20120216-1857 和 TestNG for Eclipse v2.0 上运行的 TestNG 设置。开发环境是 Mac OSX 10.8.2。Target 是在 Ubuntu 12.04 上运行的 Web 服务器。

错误：'无法联系 RemoteTestNG 客户端。确保你的类路径上没有旧版本的 testng.jar。

此错误仅在我运行 selenium 脚本时发生。不在我的其他面向 api 的测试用例中。我正在运行 selenium-server-standalone-2.25.0.jar。

同样的设置在我的 Windows 7 开发环境中运行。

这是 mac 上全新的 eclipse 设置和工作区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-16T03:40:01.187

我遇到了同样的问题。我希望我解决的方法可以帮助你。

方法：请打开Eclipse->Preferences->然后点击TestNG->Restore Defaults

根本原因：我使用 ReportNG 而不是 testng 默认报告，但之后我忘记恢复配置。因此，当我创建一个新项目时，以 TestNG 运行，但不添加 ReportNG jar，它会报告错误。