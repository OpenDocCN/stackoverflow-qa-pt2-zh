# StackOverflow 问答 12548000-12548999

# ios - Cocos2d 回归场景

> ID：12548000
> 
> 赞同：0
> 
> 时间：2012-09-22T21:53:41.350
> 
> 标签：ios, cocos2d-iphone

所以基本上我有一个“白板”场景，可以让人们在上面画画，然后你可以回到原来的场景。

一切正常，但可以说我画了一条线，然后回到原来的场景。我点击白板按钮，原来的那条线消失了。我希望线路保持不变。

我试过像这样保存 CCScene 的一个实例，

```
-(CCScene*)getWhiteboardScene {
    if(whiteboardScene == nil) {
        NSLog(@"Set whiteboardscene.");
        whiteboardScene = [NewWhiteBoardTest node];
    }
    return whiteboardScene;
} 
```

但是在我第一次使用白板之后（当它设置它时），它会使应用程序崩溃并出现 EXC_BAD_ACCESS 错误。

编辑：我开始这样的场景，

```
CCScene* scene = [self getWhiteboardScene];
    [[CCDirector sharedDirector] pushScene:scene]; 
```

那么我应该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:43:27.543

一种方法 - 创建单调场景实例。让你的`whiteboardScene`静态。

第二种方法是创建一些场景控制器并让它拥有（存储和保留）所有场景实例，以确保它们在被替换后不会被破坏。

# xcode - Phonegap 2.1 支持 Iphone 5 显示屏

> ID：12548003
> 
> 赞同：4
> 
> 时间：2012-09-22T21:54:08.893
> 
> 标签：xcode, cordova, ios-simulator

我更新到 phonegap 2.1，希望能够处理新 Iphone 5 的 4 英寸视网膜显示屏。（我不确定他们是否曾经承诺支持它）

问题是（如您所料），当我在 IOS 模拟器中将设备更改为 Iphone 4 英寸显示器时，它的外观是这样的。如何处理顶部和底部的黑色条纹？

![在此处输入图像描述](../Images/0ce19c8cd6f668c69c2a7197480c591c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T12:46:54.373

您需要做的就是添加另一个启动图像：添加一个 640 x 1136 像素的 Default-568h@2x.png 图像，它会起作用。

下次：谷歌是你的朋友；）

# joomla - 我如何在 Joomla 中设置页面，所以只有当用户付费时，他们才能查看它

> ID：12548005
> 
> 赞同：-2
> 
> 时间：2012-09-22T21:54:12.963
> 
> 标签：joomla, permissions, payment

主题说明了一切...我如何在 Joomla 中设置页面，因此只有当用户付款时，他们才能查看它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:06:05.530

使用[Akeeba 订阅](http://extensions.joomla.org/extensions/e-commerce/membership-a-subscriptions/19528)。这将允许您让人们付费加入 joomla 用户组。然后分配文章，以便只有该用户组中的人才能看到它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T22:39:25.760

OSE Membership Control 和 PayPlans 是另外两个非常好的 Joomla 扩展，允许您建立一个订阅会员站点，只有付费会员才能访问某些内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T22:33:11.777

我的实现方法是将这些文章配置为“访问级别=已注册”（当访问级别为“公开”时，所有用户都可以查看文章！），请参见“文章管理器”屏幕的以下屏幕截图：

![在此处输入图像描述](../Images/0f542b11ec40989063cd50d9efe19e22.png)

当用户付款时 - 我生成新的凭据（以编程方式），他/她可以使用它来访问“会员区域”（您必须在“模块管理器”部分下启用“mod_login”）。

# .net - 过滤或从列表中删除（Of T）

> ID：12548008
> 
> 赞同：2
> 
> 时间：2012-09-22T21:54:43.537
> 
> 标签：.net, vb.net, generics

我有一个方法，它需要一个对象列表。
在持久化对象之前，我必须在某些给定条件下删除其中一些

例如（不是理想的！）：

> 一个公司可以有一个 ID 和一个分支列表和一个 IsDeleted 标志。
> 一个分支可以有一个 Id 和一个经理列表和一个 IsDeleted 标志
> 一个经理可以有一个 Id 和一个 IsDeleted 标志
> Company -->Branches-->Managers

什么是最简单或最好的过滤方式来省略 Id = 0 和 IsDeleted = True 的组合，所以我可以迭代它并做一些细节 - 请参阅下面的函数

*   那就是如果公司被标记为`Id = 0 and IsDeleted`那么我想完全省略
*   但是如果只有分公司被标记为`Id=0 and Isdeleted`那么公司应该在那里没有分公司
*   如果只有经理被选为`Id=0 and Isdeleted`那么公司和分公司应该在那里

```
Private Function(comp as List(Of Company)) as Boolean
    'filter comp here and pass it to for loop??
    Dim filteredList as ...
    For each c as Company in filteredList 
    'do company specifis here
        For each b as Branch in c.Branches
        'do branch specific here
            For Each m as Manager in b.Managers
            'do manager specific here
            Next
        Next
    Save(c) ' saves child objects as well    
    Next
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:12:45.760

你可以使用 Linq：

```
Dim filtered = From c In comp Where Not c.IsDeleted OrElse c.Id <> 0
             From b In c.Branches Where Not b.IsDeleted OrElse b.Id <> 0
             From m In b.Managers Where Not m.IsDeleted OrElse m.Id <> 0
             Select New With {.Company = c, .Branch = b, .Manager = m}

For Each x In filtered
    Dim c As Company = x.Company
    Dim b As Branch = x.Branch
    Dim m As Manager = x.Manager
Next 
```

或者，如果您想分别枚举每种类型：

```
Dim filteredComp = From c In comp Where Not c.IsDeleted OrElse c.Id <> 0
Dim filteredBranch = From c In filteredComp
                   From b In c.Branches Where Not b.IsDeleted OrElse b.Id <> 0
                   Select b
Dim filteredManager = From b In filteredBranch
                   From m In b.Managers Where Not m.IsDeleted OrElse m.Id <> 0
                   Select m

For Each c In filteredComp

Next
For Each b In filteredBranch

Next
For Each m In filteredManager

Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:13:47.473

这会解决你的问题吗？

```
Dim filtererdComp = comp _
    .Where(Function(c) c.Id<>0 Or Not c.IsDeleted)
    .ToList()
For each c as Company in filtererdComp
    c.Branches = c.Branches _
        .Where(Function(b) b.Id<>0 Or Not b.IsDeleted) _
        .ToList()
    For each b As Branch in c.Branches
        b.Managers = b.Managers _
            .Where(Function(m) m.Id<>0 Or Not m.IsDeleted) _
            .ToList()
    Next
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T22:15:06.660

在迭代的每个级别中，循环遍历该级别上的所有现有元素。使用 if 语句检查 ID=0 和 IsDeleted 是否为真，在这种情况下删除条目。

# c# - 创建安装包后程序看不到数据库

> ID：12548010
> 
> 赞同：0
> 
> 时间：2012-09-22T21:55:18.220
> 
> 标签：c#, visual-studio-2010, database-connection, mdf

我已经用 c# 开发了 windows 窗体应用程序。我用过这个Microsoft Visual Studio 2010。现在我想生成安装包（或者可以让我把我的程序给别人的东西），但是我遇到了一些奇怪的问题。

当我使用调试模式时 - 一切正常，所以我从 MyDocuments\Visual 2010\Solution name\Project Name\bin\Debug 获取编译程序并将其交给我的妻子进行测试......但在她的计算机程序上不运行并给出此错误：

```
System.Data.SqlClient.SqlException: An error has occurred with the onset of the network or connect to a SQL Server server. Can not find server or it is not available. Verify that the instance name is correct and that the configuration of SQL Server allow remote connections. (Provider: SQL Network Interfaces, error: 26 - Error locating a specific server / instance)
   in System.Data.ProviderBase.DbConnectionPool.GetConnection (DbConnection owningObject)
   in System.Data.ProviderBase.DbConnectionFactory.GetConnection (DbConnection owningConnection)
   in System.Data.ProviderBase.DbConnectionClosed.OpenConnection (DbConnection outerConnection, DbConnectionFactory connectionFactory)
   in System.Data.SqlClient.SqlConnection.Open ()
   in System.Data.Common.DbDataAdapter.QuietOpen (IDbConnection connection, ConnectionState & originalState)
   in System.Data.Common.DbDataAdapter.FillInternal (DataSet dataset, DataTable [] DataTables, Int32 startRecord, Int32 MaxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill (DataTable [] DataTables, Int32 startRecord, Int32 MaxRecords, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill (DataTable dataTable)
   in Home_Video_Catalog.HVCDBDataSetFilmsTableAdapters.FilmsTableAdapter.Fill (FilmsDataTable dataTable) in C: \ Documents and Settings \ Aru \ My Documents \ Visual Studio 2010 \ Projects \ Home Video Catalog \ Home Video Catalog \ HVCDBDataSetFilms.Designer.cs: line 868
   in Home_Video_Catalog.MainWindow.MainWindow_Load (Object sender, EventArgs e) in C: \ Documents and Settings \ Aru \ My Documents \ Visual Studio 2010 \ Projects \ Home Video Catalog \ Home Video Catalog \ MainWindow.cs: line 27
   in System.Windows.Forms.Form.OnLoad (EventArgs e)
   in DevComponents.DotNetBar.Office2007RibbonForm.OnLoad (EventArgs e)
   in System.Windows.Forms.Form.OnCreateControl ()
   at System.Windows.Forms.Control.CreateControl (Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl ()
   in System.Windows.Forms.Control.WmShowWindow (Message & m)
   at System.Windows.Forms.Control.WndProc (Message & m)
   in System.Windows.Forms.ScrollableControl.WndProc (Message & m)
   in System.Windows.Forms.ContainerControl.WndProc (Message & m)
   in System.Windows.Forms.Form.WmShowWindow (Message & m)
   in System.Windows.Forms.Form.WndProc (Message & m)
   in DevComponents.DotNetBar.Office2007RibbonForm.WndProc (Message & m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage (Message & m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc (Message & m)
   at System.Windows.Forms.NativeWindow.Callback (IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

...所以我想如果我创建安装程序项目并为我的项目创建设置就可以了...但是错误与以前的错误代码相同。

我不太明白，因为在我的项目配置文件（项目下的 app.config 和 Properties\settings.settings）中是正确的连接字符串：

```
connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\HVCDB.mdf;Integrated Security=True;User Instance=True" 
```

同样有趣的是错误消息中的路径在我的计算机上有效（这是我的项目）

请帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:16:04.310

连接字符串中的语法 Data Source=.\SQLEXPRESS 指的是安装在本地计算机上的 SqlServer Express 实例。
从错误消息中，我假设您的目标安装计算机上没有安装 SqlServer Express。
所以你有两个选择：

*   在目标安装机器上安装 Sql Server Express
*   更改连接字符串以引用您的工作机器并使用在那里找到的数据库目录。

    ```
    Data Source=YOURMACHINENAME\SQLEXPRESS;Initial Catalog=YOURDATABASENAME;..... 
    ```

当然，从另一台连接到您的开发机器需要打开防火墙端口，配置 Sql Server 以进行远程连接，配置用户安全......

[远程连接](http://www.linglom.com/2009/03/28/enable-remote-connection-on-sql-server-2008-express/)
[防火墙](http://msdn.microsoft.com/en-us/library/cc646023.aspx)

如果您不想在您的应用程序运行的每台机器上安装 SQL Server，那么您可以调查其他数据库，如[SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)、[Sql Compact Edition](http://www.microsoft.com/en-us/download/details.aspx?id=17876)或称为[LocalDB的 SqlServer 的非共享版本](https://stackoverflow.com/questions/9655362/localdb-deployment-on-client-pc)

# php - PHP多文件上传返回码数组

> ID：12548013
> 
> 赞同：0
> 
> 时间：2012-09-22T21:55:40.357
> 
> 标签：php, file-upload

我正在尝试上传多个文件，但出现“错误：数组”。我已经在下面发布了表单和 php。

```
if(isset($_POST['upload'])){
        $count = 0;
        foreach($_FILES["file"]["name"] as $filename){
            $count = $count + 1;
            $tmp = $_FILES["file"]["tmp_name"][$count];
            $size = $_FILES["file"]["size"];
            $error = $_FILES["file"]["error"];
            $type = $_FILES["file"]["type"];
        }
        if($error > 0){
            $stat = "Error: $error<br />";
        } else {
            move_uploaded_file($tmp,"uploads/$filename");
        }   
    }

<form method="POST" enctype="multipart/form-data">
    <input type="file" name="file[]" id="file" multiple/><br />
    <input type="submit" name="upload" value="Upload">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:13:43.433

问题是 $_FILES 是一个多维数组。如果您提交了 2 个文件字段，则每个索引下将有两个值（例如 ['tmp_name'][0] 和 ['tmp_name'][1]）。

因此 $_FILES['file']['error'] 包含文件字段的错误数组。

您可以循环浏览这些以查看它们，例如：

```
foreach($error AS $err) {
  echo $err . '<br />';
} 
```

或 print_r($error); 打印出数组（仅适用于开发，不适用于生产）。

希望有帮助。

# javascript - HTML5 搜索字段图标新闻事件？

> ID：12548016
> 
> 赞同：0
> 
> 时间：2012-09-22T21:57:00.927
> 
> 标签：javascript, jquery, html

我有一个 html5 搜索字段`<input type='search'>`，并且我有一个关于 key up 事件的 jquery 来监视它并进行排序。但是，如果我按下右侧出现的小搜索图标 x 它不会触发 jquery keyup，但按下删除键或退格键会触发。

如何监控小出口以及是否按下“取消排序”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:05:15.107

你需要使用 onsearch 事件

```
<input type=search onsearch="javascript:alert('SEARCH: ' + this.value);" /> 
```

# java - Hashtable 帮助 - 使用字符串

> ID：12548018
> 
> 赞同：0
> 
> 时间：2012-09-22T21:57:31.883
> 
> 标签：java, string, hashtable

我想获取一个 String str 和一个 int wSize 并使用它来创建一个哈希表。一个例子是解释我想要什么的最好方法。

例如：str = "alphabet" wSize = 2

我想要一个看起来像这样的哈希表： al 0 lp 1 ph 2 ha 3 ab 4 be 5 et 6

这是我到目前为止所拥有的

```
public static void hashTableCreator (String str, int wSize) {
    Hashtable ht = new Hashtable();
    str = "alphabet";
    wSize = 2;
    String str2;

    for (int i = 0; i < str.length(); i++) {
      int value = 0;
      ht.put(str.substring(i, i + 1), value);
      value++;
    }

    Set set = ht.keySet(); 

    Iterator itr = set.iterator();
    while(itr.hasNext()) {
      str2 = (String) itr.next();
      System.out.println(str2 + ": " +
                         ht.get(str2));
    }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:02:33.377

在 string.substring(a,b) 第一个参数是零索引，第二个参数是 1 索引。例如：

```
 "smiles".substring(1, 5) returns "mile" 
```

如果您想从字符串“alphabet”中获取 al，您必须这样做

```
 LinkedHashMap<String, Integer> ht = new LinkedHashMap<String, Integer>();
 int value=0;
     for(int i=0; i<str.length()-1; i++) {
         ht.put(str.substring(i, i+2), value);
         value++;
     }
     Set<String> set = ht.keySet();
     Iterator<String> itr = set.iterator();
     while(itr.hasNext()) {
         String d = itr.next();
         System.out.println(d+ " "+ ht.get(d));
     }
    } 
```

**输出：** al 0 lp 1 ph 2 ha 3 ab 4 be 5 et 6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:05:17.010

```
int value = 0;
for (int i = 0; i < str.length()-1; i++) {
  ht.put(str.substring(i, i + 2), value);
  value++;
} 
```

# jquery - Jquery 行为怪异？IE8

> ID：12548019
> 
> 赞同：2
> 
> 时间：2012-09-22T21:57:35.480
> 
> 标签：jquery, jquery-ui, internet-explorer-8, error-handling

我目前正在我的网站[**safedealing.com**](http://www.safedealing.com)上开发。在我完成今天的最后一次修改后，我正在从不同的浏览器检查网站。**当我使用internet explorer 8**进入该站点时，我注意到按钮没有正确加载。

刷新页面后，我的按钮工作正常。然后我再次刷新页面，按钮再次出现奇怪的行为。

我认为使用 jQuery 初始化对象的方式会出错。但我看不到它的错误。

它看起来如下：

```
function InitializeFactors() {
/*
    I have all my initialize mechanisms here. This is a very long source
    However; I will show you an example from the source

        $('#login-incorrect-input').dialog({
            autoOpen: false,
            resizable: false,
            modal: false,
            show: 'highlight',
            hide: 'highlight',
            width: 200,
            buttons: { 
                "OK": function() { 
                    $(this).dialog("close");
                }
            }
        });
    */
}

$(document).ready(function(){
    InitializeFactors();
}); 
```

**我怀疑是 $(document).ready 在 IE8 中工作不正常，但我不确定？我该如何解决这个问题？**

提前感谢，拉斯穆斯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:06:29.007

您可以创建一个`div`with `id="hiddendiv"`，最初是隐藏的，然后执行：

```
$(document).ready(function(){
    $('#hiddendiv').show();
}); 
```

这将显示`div`，所以如果它是可见的，你就知道是否`document.ready`有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:22:47.540

**已修复**
我的 jQuery 版本是 1.8.1，在将其更新到 1.8.2 后它可以正常工作。
正如`Fabrício Matté`对原始帖子的评论所建议的那样。

# python - Python - 从文件中获取列迭代器（不读取整个文件）

> ID：12548021
> 
> 赞同：5
> 
> 时间：2012-09-22T21:58:13.173
> 
> 标签：python, numpy, median

我的主要目标是从一个巨大的浮点矩阵计算中位数（按列）。例子：

```
a = numpy.array(([1,1,3,2,7],[4,5,8,2,3],[1,6,9,3,2]))

numpy.median(a, axis=0)

Out[38]: array([ 1.,  5.,  8.,  2.,  3.]) 
```

该矩阵太大而无法放入 Python 内存（约 5 TB），因此我将其保存在 csv 文件中。所以我想遍历每一列并计算中位数。

有没有办法让我在不读取整个文件的情况下获得列迭代器？

关于计算矩阵中位数的任何其他想法也很好。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T22:16:52.420

如果您可以将每一列放入内存中（您似乎暗示可以），那么这应该有效：

```
import itertools
import csv

def columns(file_name):
   with open(file_name) as file:
       data = csv.reader(file)
       columns = len(next(data))
   for column in range(columns):
       with open(file_name) as file:
           data = csv.reader(file)
           yield [row[column] for row in data] 
```

这通过找出我们有多少列，然后循环文件，从每一行中取出当前列的项目来工作。这意味着，我们最多一次使用列的大小加上一行内存的大小。这是一个非常简单的生成器。请注意，我们必须继续重新打开文件，因为我们在循环遍历它时会耗尽迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:05:02.223

我会通过初始化 N 个空文件来做到这一点，每列一个。然后一次读取一行矩阵并将每个列条目发送到正确的文件。处理完整个矩阵后，返回并按顺序计算每个文件的中位数。

这基本上使用文件系统进行矩阵转置。一旦转置，计算每行的中位数就很容易了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T22:34:28.123

使用 csv 文件可能没有直接的方法来完成您所要求的事情（除非我误解了您）。问题在于，除非文件专门设计为具有固定宽度的行，否则任何文件都没有“列”的意义。CSV 文件通常不是这样设计的。在磁盘上，它们只不过是一根巨大的字符串：

```
>>> import csv
>>> with open('foo.csv', 'wb') as f:
...     writer = csv.writer(f)
...     for i in range(0, 100, 10):
...         writer.writerow(range(i, i + 10))
... 
>>> with open('foo.csv', 'r') as f:
...     f.read()
... 
'0,1,2,3,4,5,6,7,8,9\r\n10,11,12,13,14,15,16,17,18,19\r\n20..(output truncated).. 
```

如您所见，列字段无法按预期排列。第二列从索引 2 开始，但在下一行中，列的宽度增加了 1，从而导致对齐失效。当输入长度变化时，情况会更糟。结果是 csv 阅读器将不得不读取整个文件，丢弃您不使用的数据。（如果您不介意，那就是答案 - 逐行读取整个文件，丢弃您不会使用的数据。）

如果您不介意浪费一些空间并且知道您的数据不会超过某个固定宽度，您可以创建一个具有固定宽度字段的文件，然后您可以使用偏移量来查找它。但是，一旦你这样做了，你还不如开始使用真正的数据库。[PyTables](https://stackoverflow.com/a/10079788/577088)似乎是许多存储 numpy 数组的首选。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T22:18:54.477

您可以使用 bucketsort 对磁盘上的每一列进行排序，而无需将它们全部读入内存。然后你可以简单地选择中间值。

或者，您可以使用 UNIX`awk`和`sort`命令来拆分，然后在选择中位数之前对列进行排序。

# c++ - 从 catch 块重新抛出异常时丢失异常类型

> ID：12548022
> 
> 赞同：16
> 
> 时间：2012-09-22T21:58:26.413
> 
> 标签：c++, exception, try-catch

今天我在一个`catch`块中发现了一个错误：

```
catch (const exception& e){
    // do something
    // throw e; <-- bug!
    throw;    // <-- right thing to do
} 
```

基本上，如果我`e` *明确地*重新抛出异常，我会得到一个新的`std::exception`重建，实际上来自该`what()`方法的消息是默认的`std::string`，而不是我自定义的消息。

解释是什么？我以为这`throw;`只是`throw ExceptionJustCaught;`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-22T23:08:59.063

异常对象有点特殊。它们是在内存中的一个特殊位置构建的，它们的生命周期由它们被捕获的 catch 块决定。

如果您说`throw e;`，原始异常的生命周期在 catch 块的末尾结束，并且您通过复制抛出一个新异常`e`，从而产生一个经典的**切片**问题：Since`e`是对动态类型通常更多的对象的多态引用-derived than `std::exception`，你最终会切掉对象的派生部分。

相比之下，`throw;`是重新激活原始异常的特殊语句，使其不再被捕获，并且其生命周期不再*在*块的末尾结束。事实上，如果您通过非常量引用捕获，您可以继续修改异常对象并重新抛出，从而将状态更改传递到较低的捕获块。但请记住，重新抛出与抛出新异常不同！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-22T22:02:02.333

只是`throw`通过引用抛出当前异常。`throw e`copy 构造一个要抛出的新异常。这与工作方式大致相同`return`。

# ruby-on-rails - ActionView::Template::Error ('twitter/bootstrap/bootstrap.less' 没有找到

> ID：12548026
> 
> 赞同：2
> 
> 时间：2012-09-22T21:59:20.347
> 
> 标签：ruby-on-rails, twitter-bootstrap

试图让引导程序工作，它在本地服务器上，但在部署到 heroku 后，页面不会加载。我尝试将 gem 移到资产之外，但无论哪种方式，我都会遇到相同的错误。任何帮助将不胜感激

Heroku 日志

```
2012-09-22T21:51:41+00:00 app[web.1]: Processing by MainController#admin as HTML
2012-09-22T21:51:41+00:00 app[web.1]:   Rendered main/admin.html.erb within layouts/admin (43.1ms)
2012-09-22T21:51:41+00:00 app[web.1]:     8: 
2012-09-22T21:51:41+00:00 app[web.1]: Completed 500 Internal Server Error in 574ms
2012-09-22T21:51:41+00:00 app[web.1]:     10:   
2012-09-22T21:51:41+00:00 app[web.1]:     12:   <%= stylesheet_link_tag    "tableStyle", :media => "all" %>
2012-09-22T21:51:41+00:00 app[web.1]:     11:  <%= stylesheet_link_tag    "bootstrap_and_overrides", :media => "all" %>
2012-09-22T21:51:41+00:00 app[web.1]: 
2012-09-22T21:51:41+00:00 app[web.1]: 
2012-09-22T21:51:41+00:00 app[web.1]: ActionView::Template::Error ('twitter/bootstrap/bootstrap.less' wasn't found.
2012-09-22T21:51:41+00:00 app[web.1]:   (in /app/app/assets/stylesheets/bootstrap_and_overrides.css.less)):
2012-09-22T21:51:41+00:00 app[web.1]:     9:   <title>Live Well Chicago L.L.C</title>
2012-09-22T21:51:41+00:00 app[web.1]:   app/views/layouts/admin.html.erb:11:in `_app_views_layouts_admin_html_erb__2391414357054926185_30786800'
2012-09-22T21:51:41+00:00 app[web.1]: 
2012-09-22T21:51:41+00:00 app[web.1]: 
2012-09-22T21:51:41+00:00 app[web.1]:   app/controllers/main_controller.rb:19:in `admin'
2012-09-22T21:51:41+00:00 app[web.1]:     13:   <%= javascript_include_tag "application" %> 
```

宝石文件

```
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'twitter-bootstrap-rails'

   # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
    end 
```

[编辑] 好吧，我已经将问题缩小到 bootstrap_and_overrides.css.less，几乎所有的导入语句

```
@import "twitter/bootstrap/responsive";
@import "twitter/bootstrap/responsive";
@import "fontawesome"; 
```

我有点不高兴，因为当从终端导轨运行服务器时能够检索适当的资产，但是，在部署后它不知道它们在哪里。我也不确定这些文件是否应该被隐藏，但是在我的项目文件夹中找不到“twitter”文件夹，至少它不可见

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-03T21:59:32.737

你在用宝石吗？确保您的 gem 不是资产组的一部分，并且可以在生产环境中访问。

来自 GemFile

# Gems 仅用于资产，默认情况下不用于生产环境。

因此，只需将宝石移出任何组，就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T23:55:58.963

好吧，显然在某个时候（不完全确定什么时候）摆弄 rails g bootstrap:install 错误开始引发 JS Parse 错误，我已经在这个项目的不同阶段遇到过几次错误，基本上我要做的就是删除了前面命令生成的 application.html 布局文件的 require_tree 部分，现在它运行顺利

# git - 为什么“原始”存储库被称为“上游”（经常）？

> ID：12548030
> 
> 赞同：0
> 
> 时间：2012-09-22T21:59:48.027
> 
> 标签：git, mercurial, github, bitbucket

在 bitbucket/github 上 fork 时，有时需要将原始存储库添加为远程存储库，以便您可以将最近的更改拉入您的 fork。我已经看到，在其他帖子中（例如[，我如何更新 GitHub 分叉存储库？](https://stackoverflow.com/questions/7244321/how-to-update-github-forked-repository)），原始称为上游。

为什么 github/bitbucket 托管的 fork 是原始的“上游”和“起源”？还有其他我们应该注意的约定吗？

我想这可能有助于将其想象为“很难逆流而上”，因此更难向上游推进……但是，这是一个不充分的类比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:11:47.610

**上游**是软件开发（尤其是开源项目）中的一个常用术语，指的是你所依赖的原始项目。

该术语用于表达代码更改向一个方向“流动”的想法；在项目分叉的情况下，从原始项目到您的分叉副本。

例如，Linux 发行版为其用户打包软件，有时会对代码应用小补丁。当用户在其中一个包中发现缺陷并将其报告给发行版的错误跟踪器时，如果问题过于广泛或打包者无法解决，它可能会被标记为“上游”以传达它应该转发给软件原作者待解决。或者，如果发行版可以应用小的修正，最好将其“转发到上游”，以便同一软件产品的其他用户可以从中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:06:27.947

类比是指变更的影响会向下游传播，但您不能使变更向上游传播。

[这里](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream)有一个类似问题的答案。

# ruby - Ruby Datamapper .count 总是返回 0

> ID：12548032
> 
> 赞同：0
> 
> 时间：2012-09-22T22:00:29.557
> 
> 标签：ruby, postgresql, datamapper

每当我尝试计算从 datamapper 返回的记录时，它总是返回为 0，无论是否有用户。

```
User.count(:username=>params[:username])

class User
  include DataMapper::Resource

  property :id,  Serial
  property :username,  String, unique_index: true, required: true, length: 3..32
  property :password,  String, required: true, length: 5..64
  property :email,  String, unique_index: true, required: true, format: :email_address

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:51:53.400

您可以`User.all(:username=>params[:username])`在控制台中尝试然后尝试

`User.count(:username=>params[:username])`对于那个 ENV

# powershell - 通过 PowerShell 的本地计算机策略

> ID：12548034
> 
> 赞同：1
> 
> 时间：2012-09-22T22:00:38.400
> 
> 标签：powershell, policy

我正在编写一个 C++ 代码，它使用 OpenLocalMachineGPO 添加一个注册表项来为其所有用户设置一个主题。OpenLocalMachineGPO 打开计算机的默认 GPO。

我打算通过 Powershell cmdlet 执行相同的操作，但我无法理解在上述 C++ 代码中获取机器默认 GPO 的方法。Get-GPO 似乎仅适用于域或站点上的组策略。我找不到设置本地组策略编辑器显示的本地计算机策略的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:03:47.713

我认为使用 PowerShell 的正确方法是访问注册表驱动器。您会在这里找到一种安装方式`HKUSERS`，您可以找到`.DEFAULT`适合您主题的地方。

```
PS C:\Users\JPB> $hkusers = New-PSDrive -Name HKUSERS   -PSProvider Registry -Root Registry::HKEY_USERS
PS C:\Users\JPB> cd hkusers:
PS C:\Users\JPB> dir .DEFAULT

    Hive: HKEY_USERS\.DEFAULT

SKC  VC Name                           Property
---  -- ----                           --------
  9   0 Control Panel                  {}
  0   2 Environment                    {TEMP, TMP}
  4   0 EUDC                           {}
  3   0 Keyboard Layout                {}
  4   0 Printers                       {}
  9   0 Software                       {}
  1   0 SYSTEM                         {} 
```

# java - ObjectEncoderOutputStream 可能出现内存不足异常？

> ID：12548036
> 
> 赞同：0
> 
> 时间：2012-09-22T22:01:00.727
> 
> 标签：java, netty

我注意到[`ObjectEncoderOutputStream`](https://docs.jboss.org/netty/3.1/api/org/jboss/netty/handler/codec/serialization/ObjectEncoderOutputStream.html)使用`ObjectOutputStream`. 如果不定期重置，传统上`ObjectOutputStream`可能会导致 OOME。`ObjectEncoderOutputStream`易受此影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:58:04.040

**不**，`ObjectEncoderOutputStream`由于它使用`ObjectOutputStream`.

对于每个`writeObject`调用，都会创建一个*新* `ObjectOutputStream`的（特别是 a `CompactObjectOutputStream`）来写入该单个对象，然后再次将其关闭。

因此，`ObjectOutputStream`永远不会保留旧的引用，因此不会以这种方式导致 OOM。

# windows - ExpandConstant 函数似乎不适用于 Windows 7

> ID：12548039
> 
> 赞同：2
> 
> 时间：2012-09-22T22:01:27.203
> 
> 标签：windows, inno-setup

我正在尝试使用此函数在运行时转换 {app} 变量。它适用于 Windows 2008（64 位），但不适用于 Windows 7（64 位）。

这是我使用的代码：

```
[Registry]
    Root: HKLM; Subkey: "SYSTEM\CurrentControlSet\Control\Session Manager\Environment"; ValueType: expandsz; ValueName: "Path"; ValueData: "{olddata};{app}"; Check: ExpandConstant(NeedsAddPath('{app}'))

function NeedsAddPath(Param: string): boolean;
var
  OrigPath: string;
begin
  if not RegQueryStringValue(HKEY_LOCAL_MACHINE,'SYSTEM\CurrentControlSet\Control\Session Manager\Environment', 'Path', OrigPath)
  then begin
    Result := True;
    exit;
  end;
  // look for the path with leading and trailing semicolon
  // Pos() returns 0 if not found
  Result := Pos(';' + UpperCase(Param) + ';', ';' + UpperCase(OrigPath) + ';') = 0;  
  if Result = True then
     Result := Pos(';' + UpperCase(Param) + '\;', ';' + UpperCase(OrigPath) + ';') = 0; 
end; 
```

你知道原因吗？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:56:05.403

您的代码在任何操作系统上都无法正常工作，因为您的操作顺序错误。（如果你认为它确实在 Win2008 上工作，那仅仅意味着你没有测试你认为的东西，或者错误地解释了结果。）

您的代码的主要问题是您调用 Check 函数的方式：

```
Check: ExpandConstant(NeedsAddPath('{app}')) 
```

您正在扩展 的结果`NeedsAppPath`，而当传入参数时，显然内部的代码`NeedsAppPath`已经`{app}`被扩展了。

将其更改为：

```
Check: NeedsAppPath(ExpandConstant('{app}')) 
```

（事实上​​，你上面的代码甚至不应该编译，因为 Check 函数需要返回布尔值而 ExpandConstant 不这样做。所以同样，你显然没有测试你认为你是什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:22:58.743

像下面这样的东西可能会更好，但是它不能解释为什么原始版本不能工作。有一件事是肯定的，原始代码作为结果传递给[`Check`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptcheck)参数字符串，而不是布尔值，这基本上是错误的，但它没有解释为什么它在 Windows 2008 上有效：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

#define KeyPath "SYSTEM\CurrentControlSet\Control\Session Manager\Environment"

[Registry]
Root: HKLM; Subkey: "{#KeyPath}"; ValueType: expandsz; ValueName: "Path"; ValueData: "{olddata};{app}"; Check: NeedsAddPath

[Code]
function NeedsAddPath: Boolean;
var
  AppPath: string;
  OrigPath: string;
begin
  Result := True;
  if RegQueryStringValue(HKEY_LOCAL_MACHINE, '{#KeyPath}', 'Path', OrigPath) then
  begin  
    AppPath := ExpandConstant('{app}');
    Result := Pos(';' + UpperCase(AppPath) + ';', ';' + UpperCase(OrigPath) + ';') = 0;  
    if Result then
      Result := Pos(';' + UpperCase(AppPath) + '\;', ';' + UpperCase(OrigPath) + ';') = 0; 
  end;
end; 
```

# google-chrome - Chrome 偶尔要求我错误地安装 GWT Developer Plugin

> ID：12548042
> 
> 赞同：2
> 
> 时间：2012-09-22T22:01:38.450
> 
> 标签：google-chrome, gwt

Chrome 偶尔会错误地给我以下消息：

*   开发模式需要 Google Web Toolkit Developer Plugin 下载即表示您同意条款和条件以及隐私政策。下载 GWT 开发者插件

我已经安装了插件。有人可以给我指点来解决这个问题吗？

以下是有关我的开发环境的一些信息：Chrome：21.0.1180.89 m Eclipse 版本：Juno Release Build id：20120614-1722

在此先感谢您的帮助。

-Otosaat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:20:17.207

不要使用直接链接添加 gwt 插件。转到设置，然后在扩展选项中找到 gwt 插件并添加它。. 可能这会对你有所帮助。

# ruby - 这个 RSpec 错误告诉我什么？

> ID：12548046
> 
> 赞同：0
> 
> 时间：2012-09-22T22:02:33.753
> 
> 标签：ruby, rspec

我有一个类和一个这样的方法......

```
class Player

  attr_reader :boardpiece # i exist so game can read me

  def initialize(letter)
    @boardpiece = letter
  end

  def move_human(game, board)
    @game_two = game

    puts "human move..."

    human_move = gets.chomp

    human_symbol = human_move.to_sym

    # look for move as key in board.grid
    if board.grid.has_key?(human_symbol)
      if board.grid[human_symbol] == " "
        #puts "bingo"  
        @move = human_symbol            
      else
        puts "spot taken...try again"
        move_human(@game_two, board)
      end
    else
      puts "invalid move...try again"
      move_human(@game_two, board)
    end 

  end
end 
```

我正在尝试在 RSpec 中为它编写一个测试...

```
require 'game'
require 'board'

describe Player do
  describe 'move_human' do
    it 'receives cli input' do
      player_h = Player.new('X')
      player_c = Player.new('O')
      board = Board.new
      game = Game.new(player_h, player_c, board)          

      player_h.move_human('X', board).should_receive(:puts).with('human move...')

      game.play
    end
    xit 'and returns a move value'

  end
end 
```

我收到此错误作为输出....我做错了什么？

```
gideon@thefonso ~/Documents/ca_ruby/rubytactoe (development)$ rspec spec

Board
  creates a blank board with nine spaces
  can set the value of a specified cell
  checks if a space is taken or not
  drawgrid
    draws a blank grid given no input

Player
  move_human
human move...
    receives cli input (FAILED - 1)
    and returns a move value (PENDING: Temporarily disabled with xit)

Pending:
  Player move_human and returns a move value
    # Temporarily disabled with xit
    # ./spec/player_spec.rb:16

Failures:

  1) Player move_human receives cli input
     Failure/Error: player_h.move_human('X', board).should_receive(:puts).with('human move...')
     Errno::EISDIR:
       Is a directory - spec
     # ./lib/player.rb:21:in `gets'
     # ./lib/player.rb:21:in `gets'
     # ./lib/player.rb:21:in `move_human'
     # ./spec/player_spec.rb:12:in `block (3 levels) in <top (required)>'

Finished in 0.00977 seconds
6 examples, 1 failure, 1 pending

Failed examples:

rspec ./spec/player_spec.rb:6 # Player move_human receives cli input
gideon@thefonso ~/Documents/ca_ruby/rubytactoe (development)$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:30:46.443

@thefonso，不完全是。您想要存根发生在播放器对象上的“获取”调用，而不是 move_human 方法调用的结果。

所以，你会说 player_h.stub(:gets).and_return("some input from the user")。同样的事情也适用于你的 should_receive(:puts) 位。在调用这些方法的地方发生方法调用之前，您需要设置这些期望。因此，您的规范可能具有以下内容：

```
# These setup expectations for when "gets" and "puts" are called later...
player_h.stub(:gets).and_return("some input from the user")
player_h.should_receive(:puts).with("human move...")

# And then we run the method where those expectations above will get triggered:
player_h.move_human('X', board) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:05:04.717

您可以为您的课程存根该方法。

```
player_h.stub(:gets).and_return("Some string") 
```

# c++ - 类类型作为参数和作为属性

> ID：12548047
> 
> 赞同：1
> 
> 时间：2012-09-22T22:03:05.377
> 
> 标签：c++, class, templates, types, parameters

我有一个类（MyFactory），它产生 A 类型的对象。（myFactory 将是一个实例）我想允许用户扩展 A 类（例如到 B 类），并覆盖 A 的虚拟方法。

例如，不想扩展 A 的用户：

```
A* myObject = myFactoryInstance.createObject(); 
```

而我目前对使用 B 扩展 A 的用户的技巧：

```
B* myObjectPrepare = new B()
myFactoryInstance.setNextObject( myObjectPrepare );
A* myObject = myFactoryInstance.createObject(); // Will look for a "next_object"
     /* Here, myObject (which is myObjectPrepare modified by createObject) 
        methods will dynamically link to B class methods. */ 
```

我的目标是促进这个操作。

.

我试过 ：

```
 template <class T>
  void MyFactory::set_requests_class() {
      new T(); 
      /* I don't want an instance, now. Just memorize class type
         at compilation time, and make instances of T along exec
      */
  } 
```

（用法：set_requests_class()；问题：我不想生成实例）

* * *

这可能是一个解决方案：

```
myFactoryInstance.createObject<YourObjectTypeHere>(); 
```

但我不想强制模板参数（属性的默认参数只能从 c++11 开始）：我想让不想扩展 A 的用户保持非常简单。我*不能*出于同样的原因，修改“createObject”签名。

（我未来的技巧是实例化 B 对象，将其保留为属性并为新实例克隆它）

提前感谢您（任何建议将不胜感激）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:17:33.790

最简单的方法就是重载`createObject`。看这个例子：

```
class A
{
public:
    A() { std::cout << "A"; }
};

class Subclass1 : public A
{
public:
    Subclass1() { std::cout << "Subclass1"; }
};

class AFactory
{
public:
    A* createInstance()
    {
        return new A();
    }
    template<typename Tsubclass>
    A* createInstance()
    {
        return new Tsubclass();
    }
};

int main()
{
    AFactory fact;
    A* pa = fact.createInstance();// creates A
    A* psubclass1 = fact.createInstance<Subclass1>();// creates Subclass1

    delete pa;
    delete psubclass1;
    return 0;
} 
```

如果您需要保留您的设计，在实际创建对象之前设置要创建的类型，那么您可以使用如下所示的辅助工厂来完成。不过，这不是一个很好的设计。基本上，工厂类现在基本上只是充当转换结果的包装器。从外面看，似乎有更好的设计。

```
struct A
{
    A() { std::cout << "A"; }
};

struct Subclass1 : A
{
    Subclass1() { std::cout << "Subclass1"; }
};

struct GenericAFactoryBase
{
    virtual A* createInstance() = 0;
};

template<typename Tsubclass>
struct GenericAFactory : GenericAFactoryBase
{
    A* createInstance() { return new Tsubclass(); }
};

struct AFactory
{
    std::shared_ptr<GenericAFactoryBase> genericFactory;

    AFactory()
    {
        genericFactory.reset(new GenericAFactory<A>());
    }

    A* createInstance()
    {
        return genericFactory->createInstance();
    }
    template<typename Tsubclass>
    void SetType()
    {
        genericFactory.reset(new GenericAFactory<Tsubclass>());
    }
};

int main()
{
    AFactory fact;
    A* pa = fact.createInstance();// creates A

    fact.SetType<Subclass1>();
    A* psubclass1 = fact.createInstance();// creates Subclass1

    delete pa;
    delete psubclass1;
    return 0;
} 
```

# jquery - Keyup() 延迟

> ID：12548048
> 
> 赞同：1
> 
> 时间：2012-09-22T22:03:18.393
> 
> 标签：jquery, keyup

我在 JQuery 上使用 keyup 函数在用户按下字符或其他东西时向 div 添加一个类，并在他们按下退格键时删除一个类。但是 keyup 函数有一个小的延迟。我试过使用按键，它没有延迟，但是，它没有检测到退格，所以我不能使用它。

有谁知道如何停止 keyup 的延迟或我可以使用的替代功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:12:11.860

```
$(function(){

    $('html').keyup(function(e){

        var d1 = new Date().getMilliseconds();

        if(e.which === 8){
            alert('Backspace pressed, delay: ' + new Date().getMilliseconds() - d1) + 'ms';
        }   

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:26:35.183

你在考虑这样的事情吗？

```
$(document).ready(function() {
    var timer,
        container = $('p');

    function doSomething()
    {
        container.text(new Date());
    }

    $('#find').keyup(function() {
        clearTimeout(timer);
        timer= setTimeout(doSomething, 200);
    });
 }); 
```

演示：http: [//jsfiddle.net/tXJAz/](http://jsfiddle.net/tXJAz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T22:35:55.050

> 但是 keyup 函数有一个小的延迟。我试过使用按键，它没有延迟，但是，它没有检测到退格，所以我不能使用它。

`keyup`您遇到的小延迟是由于在用户释放密钥之前不会触发的事实。

如果您**不想**延迟，请改用[keydown](http://api.jquery.com/keydown/)。

```
$('#target').keydown(function(eventData) {

    if(eventData.which === 8){
        // Backspace was pressed
    } else {
        // another key was pressed
    }
}); 
```

### [演示](http://jsfiddle.net/FranWahl/M8dF3/)

# java - 使用@ManyToMany 时如何将其他列添加到结果表中？

> ID：12548049
> 
> 赞同：0
> 
> 时间：2012-09-22T22:03:21.093
> 
> 标签：java, mysql, jpa

如何从与 @ManyToMany 映射注释一起映射的两个实体中添加结果表中的其他列？

我有两个课程：

```
package com.rachid.jpa;

import java.io.Serializable;
import java.lang.Integer;
import java.lang.String;
import java.util.Collection;
import java.sql.Date;
import javax.persistence.*;

/**
 * Entity implementation class for Entity: Project
 *
 */
@Entity
@Table(name="PROJECT")

public class Project implements Serializable {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer idProj;

private String projectName;
private Date startDate;
private Date endDate;

@ManyToMany(mappedBy="projects")
private Collection<Employee> employees;
private static final long serialVersionUID = 1L;

@OneToOne
@JoinColumn(name="matriculeChef")
private Employee chef;

public Project() {
    super();
}   
public Integer getIdProj() {
    return this.idProj;
}

public void setIdProj(Integer idProj) {
    this.idProj = idProj;
}   
public String getProjectName() {
    return this.projectName;
}

public void setProjectName(String projectName) {
    this.projectName = projectName;
}   

public Date getStartDate() {
    return startDate;
}
public void setStartDate(Date startDate) {
    this.startDate = startDate;
}
public Date getEndDate() {
    return endDate;
}
public void setEndDate(Date endDate) {
    this.endDate = endDate;
}
public Collection<Employee> getEmployees() {
    return employees;
}
public void setEmployees(Collection<Employee> employees) {
    this.employees = employees;
}
public Employee getChef() {
    return chef;
}
public void setChef(Employee chef) {
    this.chef = chef;
}

    } 
```

和

```
 package com.rachid.jpa;

   import java.io.Serializable;
   import java.lang.Integer;
   import java.util.Collection;
   import javax.persistence.*;

  /**
    * Entity implementation class for Entity: Employee
    *
    */
    @Entity
    @Table(name="EMPLOYEE")

    public class Employee implements Serializable {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer idEmp;

@Embedded
private Personne personne;

@ManyToMany
@JoinTable(name="EMP_PROJ",
joinColumns = @JoinColumn(name="EMP_ID"),
inverseJoinColumns = @JoinColumn(name="PROJ_ID"))
private Collection<Project> projects;

@ManyToOne
@JoinColumn(name="matriculeChef")
private Employee chef;

@OneToMany(mappedBy="chef")
private Collection<Employee> manaedEmployees;

@OneToOne(mappedBy="employee")
private User user;

@OneToOne(mappedBy="chefEntite")
private Entite entite;

@OneToOne(mappedBy="chef")
private Project projet;

@OneToMany(mappedBy="employee")
private Collection<Conge> conges;

@ManyToOne
@JoinColumn(name="idEntite")
private Entite entiteTravail;

@ManyToMany
@JoinTable(name="EMP_FORM",
joinColumns = @JoinColumn(name="EMP_ID"),
inverseJoinColumns = @JoinColumn(name="FROM_ID"))
private Collection<Formation> formations;

private String fonction;

private static final long serialVersionUID = 1L;

public Employee() {
    super();
}   
public Integer getIdEmp() {
    return this.idEmp;
}

public void setIdEmp(Integer idEmp) {
    this.idEmp = idEmp;
}   

public Collection<Project> getProjects() {
    return projects;
}
public void setProjects(Collection<Project> projects) {
    this.projects = projects;
}
public User getUser() {
    return user;
}
public void setUser(User user) {
    this.user = user;
}
public Entite getEntite() {
    return entite;
}
public void setEntite(Entite entite) {
    this.entite = entite;
}
public Project getProjet() {
    return projet;
}
public void setProjet(Project projet) {
    this.projet = projet;
}
public Collection<Conge> getConges() {
    return conges;
}
public void setConges(Collection<Conge> conges) {
    this.conges = conges;
}
public Entite getEntiteTravail() {
    return entiteTravail;
}
public void setEntiteTravail(Entite entiteTravail) {
    this.entiteTravail = entiteTravail;
}
public Collection<Formation> getFormations() {
    return formations;
}
public void setFormations(Collection<Formation> formations) {
    this.formations = formations;
}
public Personne getPersonne() {
    return personne;
}
public void setPersonne(Personne personne) {
    this.personne = personne;
}
public Employee getChef() {
    return chef;
}
public void setChef(Employee chef) {
    this.chef = chef;
}
public Collection<Employee> getManaedEmployees() {
    return manaedEmployees;
}
public void setManaedEmployees(Collection<Employee> manaedEmployees) {
    this.manaedEmployees = manaedEmployees;
}
public String getFonction() {
    return fonction;
}
public void setFonction(String fonction) {
    this.fonction = fonction;
}

   } 
```

我需要在结果表**EMP_PROJ中添加两列**

感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T22:07:59.130

我想说的是，当您需要向 NN 关系添加属性时，您没有 NN 关系，而是一个中间对象，每个对象都有 1-N 关系。

用 OOP 术语来考虑它......这些属性属于哪个对象？它不可能是任何一个原始的，所以需要一个新的。

# html - 以 DIV 为中心的问题

> ID：12548050
> 
> 赞同：0
> 
> 时间：2012-09-22T22:03:30.507
> 
> 标签：html, css, twitter-bootstrap, centering

我似乎无法让我的登录 div 居中，我在想它与我正在使用的 Twitter Bootstrap 冲突，希望有人能帮我弄清楚是什么原因造成的。

我正试图让它在桌面、iPhone 和 iPad 上工作。它很接近，以 iphone 为中心，但桌面和 ipad 非常偏离中心

[http://jsfiddle.net/urkd4/1/](http://jsfiddle.net/urkd4/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:18:43.837

如果您从 span9 中删除样式，您的 div 将居中。

我只是更改了跨度的类名，因此样式不适用...

```
 <div class="container-fluid">
    <div class="row-fluid">

        <!--/span-->
        <div class="span">
            <div class="loginContainer">
<form class="form-horizontal" action="dashboard.html" id="loginForm">
    <div class="form-row row-fluid">
        <div class="span12">
            <div class="row-fluid">
                <label class="form-label span12" for="username">
                    Username: 
```

它的工作原理是 span9 类上面有一些宽度:)

[http://jsfiddle.net/urkd4/2/embedded/result/](http://jsfiddle.net/urkd4/2/embedded/result/)

# eclipse - 使用 eGit (Eclipse) 删除未跟踪的文件

> ID：12548056
> 
> 赞同：6
> 
> 时间：2012-09-22T22:04:40.967
> 
> 标签：eclipse, git

我对 eGit 有以下问题：

*   我在提交 A 中，存储库刚刚拉出。
*   我创建了一个文件 FILE，后来我决定丢弃它并返回到上一点（在创建 FILE 之前）。

我有这个动作，但没有奏效：

*   使用选项选择重置项目`Hard (HEAD, index and working directory updated)`
*   存储项目并签出其他分支
*   签出其他分支（在此之后文件仍然存在！）
*   将文件添加到索引之前并尝试上面的3个选项

在所有情况下，文件都保留有问号或加号图标，具体取决于它是在索引中还是在索引中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-14T08:33:03.747

自[Egit 3.0 Kepler](http://eclipsesource.com/blogs/2013/06/11/egit-3-0-top-eclipse-kepler-feature-9/)（2013 年 6 月）以来，已将清理操作添加到存储库视图中。

![清白行动](../Images/75132c56ffbc6895628ef32b548a17b8.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T06:34:14.310

这是[在 Egit 版本 2.1 中实现的，该版本](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.1#Delete_untracked_files_in_Staging_View_and_Repositories_View)于 2012-09-27 发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T22:11:27.477

```
git clean -fdx -n  # remove the -n when you are sure you are ready 
```

# file - 从 AppEngine 部署中删除不需要的上传

> ID：12548064
> 
> 赞同：2
> 
> 时间：2012-09-22T22:05:27.137
> 
> 标签：file, google-app-engine, gwt, deployment

我正在处理一个 GWT/AppEngine 项目，并注意到我所有的 GWT java 类最终都以编译形式出现在appcfg 暂存目录的**WEB-INF/classes/ *projectpackage* /client/文件夹中。**这不仅会为每次部署创建一堆不需要的上传数据，而且我真的不想与全世界共享这些文件。

有没有办法从上传中排除这些文件？Eclipse 中的设置会很棒，但是，appengine-web.xml 中的条目当然也可以做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:44:51.963

您可以使用 Ant 来完成此操作，并通过让您的类 jarred 获得额外的性能优势。

1）从eclipse运行gwt编译

2) 运行类似于下面的 ant 任务（使用 Eclipse 使用 Ant 视图轻松完成）：

```
 <property name="staging.dir" value="war" />

 <property name="classes.dir" value="${staging.dir}/WEB-INF/classes" />

    <target name="jarClasses">
       <delete file="${staging.dir}/WEB-INF/lib/classes.jar" />
       <echo> ${staging.dir}/WEB-INF/lib/classes.jar DELETED </echo>
       <jar destfile="${staging.dir}/WEB-INF/lib/classes.jar" basedir="${classes.dir}"
           excludes="${classes.dir}/projectpackage/client/*.*"/>
       <echo> ${staging.dir}/WEB-INF/lib/classes.jar JARRED </echo>
       <delete dir="${classes.dir}" />
       <echo> ${classes.dir} DELETED </echo>
    </target> 
```

3）使用appcfg.sh（或windows版本）进行上传

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:20:19.180

我认为最好的方法是将客户端和服务器分成两个项目。GPE 喜欢将它们放在同一个项目中，但这具有单个输出文件夹和单个类路径的烦人副作用。

你不能告诉它把你的输出编译到不同的文件夹，因为那样你的服务器类文件就不会被传递到那里！

除了将两个项目分开之外，我认为最好的答案是在上传之前编写一个脚本来删除客户端/子目录。由于 GPE 部署按钮缺乏可编写脚本，我们感到很沮丧，因此我们将编译/部署过程切换为 ant 任务。

注意：WEB-INF 不是公开可见的，所以你可能没有向全世界展示你的类文件。

# java - 将新数据追加到 Arraylist

> ID：12548075
> 
> 赞同：0
> 
> 时间：2012-09-22T22:06:52.750
> 
> 标签：java, android, arraylist, android-asynctask, append

我正在制作一个显示来自`tumblr`帐户的图像的应用程序。它一次显示 20 张图像，底部有一个 botten，按下时应将 20 张新图像加载到列表中（仅显示新的 20 张图像）。我`AsyncTask`用来执行这个过程。我已经走了很远，但是当单击“加载更多”按钮时，应用程序会`NullPointerException`在以下行崩溃：`tumblrs.add(tumblr);`在`DoInBackground`类内。我似乎无法找到问题并卡在这一点上。

代码如下所示：

```
public class Example extends Activity {

ArrayList<Tumblr> tumblrs;
Context context = null;
ListView listView = null;
TextView footer;
int offset = 0;
ProgressDialog pDialog;

private String searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY&offset=0";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<Tumblr> tumblrs;
    try {
        tumblrs = getTumblrs();
        listView = (ListView) findViewById(R.id.list);
        View v = getLayoutInflater().inflate(R.layout.footer_layout, null);
        footer = (TextView) v.findViewById(R.id.tvFoot);
        listView.addFooterView(v);
        listView.setAdapter(new UserItemAdapter(this, R.layout.listitem,
                tumblrs));

    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }

    footer.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            new loadMoreListView().execute();
        }
    });

}

public class UserItemAdapter extends ArrayAdapter<Tumblr> {
    private ArrayList<Tumblr> tumblrs;

    public UserItemAdapter(Context context, int imageViewResourceId,
            ArrayList<Tumblr> tumblrs) {
        super(context, imageViewResourceId, tumblrs);
        this.tumblrs = tumblrs;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {

            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitem, null);

        }

        Tumblr tumblr = tumblrs.get(position);
        if (tumblr != null) {

            ImageView image = (ImageView) v.findViewById(R.id.avatar);

            if (image != null) {
                image.setImageBitmap(getBitmap(tumblr.image_url));
            }
        }
        return v;
    }
}

public Bitmap getBitmap(String bitmapUrl) {
    try {
        URL url = new URL(bitmapUrl);
        return BitmapFactory.decodeStream(url.openConnection()
                .getInputStream());
    } catch (Exception ex) {
        return null;
    }
}

public ArrayList<Tumblr> getTumblrs() throws ClientProtocolException,
        IOException, JSONException {
    searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY&offset=0";

    ArrayList<Tumblr> tumblrs = new ArrayList<Tumblr>();

    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(searchUrl);

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    String responseBody = null;
    try {
        responseBody = client.execute(get, responseHandler);
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    JSONObject jsonObject = new JSONObject(responseBody);

    JSONArray posts = jsonObject.getJSONObject("response").getJSONArray(
            "posts");
    for (int i = 0; i < posts.length(); i++) {
        JSONArray photos = posts.getJSONObject(i).getJSONArray("photos");
        for (int j = 0; j < photos.length(); j++) {
            JSONObject photo = photos.getJSONObject(j);
            String url = photo.getJSONArray("alt_sizes").getJSONObject(0)
                    .getString("url");

            Tumblr tumblr = new Tumblr(url);
            tumblrs.add(tumblr);
        }
    }
    return tumblrs;
}

public class Tumblr {

    public String image_url;

    public Tumblr(String url) {

        this.image_url = url;
    }
}

private class loadMoreListView extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        // Showing progress dialog before sending http request
        pDialog = new ProgressDialog(Example.this);
        pDialog.setMessage("Please wait..");
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... unused) {
        // TODO Auto-generated method stub
        runOnUiThread(new Runnable() {
            public void run() {
                // increment current page
                offset += 20;

                // Next page request

                searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY&offset="
                        + offset;

                HttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(searchUrl);

                ResponseHandler<String> responseHandler = new BasicResponseHandler();

                String responseBody = null;
                try {
                    responseBody = client.execute(get, responseHandler);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

                JSONObject jsonObject;
                try {
                    jsonObject = new JSONObject(responseBody);

                    JSONArray posts = jsonObject.getJSONObject("response")
                            .getJSONArray("posts");
                    for (int i = 0; i < posts.length(); i++) {
                        JSONArray photos = posts.getJSONObject(i)
                                .getJSONArray("photos");
                        for (int j = 0; j < photos.length(); j++) {
                            JSONObject photo = photos.getJSONObject(j);
                            String url = photo.getJSONArray("alt_sizes")
                                    .getJSONObject(0).getString("url");

                            Tumblr tumblr = new Tumblr(url);
                            tumblrs.add(tumblr);

                        }
                    }

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                // get listview current position - used to maintain scroll
                // position
                int currentPosition = listView.getFirstVisiblePosition();

                // Setting new scroll position
                listView.setSelectionFromTop(currentPosition + 1, 0);

            }
        });

        return null;
    }

    protected void onPostExecute(Void unused) {
        pDialog.dismiss();
    }

}

} 
```

帮助非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:14:48.320

该`tumblrs`字段未初始化。在 onCreate 方法中，您初始化一个也名为 的**局部**变量`tumblrs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:15:14.553

看起来您可能无法在 onCreate 方法中初始化字段“tumblrs”（在第 3 行中声明），因为您在第 17 行将其重新声明为局部变量。

# objective-c - 为什么这个非常简单的空白屏幕保护程序不起作用？（它是黑色的）

> ID：12548078
> 
> 赞同：2
> 
> 时间：2012-09-22T22:07:55.683
> 
> 标签：objective-c, macos, cocoa, screensaver

我正在尝试通过 XCode 中的 Objective-C 制作一个简单的 macOS 屏幕保护程序，它只会用白色填充整个屏幕。（因为[这个](http://support.apple.com/kb/HT2807?viewlocale=en_US)。）简单，对吧？我也是这么想的，但是不管我做什么，我都会得到一个空白的黑屏。似乎我的 drawRect 方法甚至没有被调用。知道我错过了什么吗？

```
#import "Blank_WhiteView.h"

@implementation Blank_WhiteView

- (id)initWithFrame:(NSRect)frame isPreview:(BOOL)isPreview {
    [super animateOneFrame];
    [self setNeedsDisplay:YES];
    return self;
}

- (void)drawRect:(NSRect)rect {

    [super drawRect:rect];
    CGContextRef context = (CGContextRef) [[NSGraphicsContext currentContext] graphicsPort];
    CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextFillRect(context, NSRectToCGRect(rect));
}

- (BOOL)hasConfigureSheet {
    return NO;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:15:35.177

`ScreenSaverView`画出一切`-animateOneFrame`。为了能够使用`-drawRect`（在你的情况下，你应该，因为你没有动画任何东西）实现`animateOneFrame`这样的：

```
- (void)animateOneFrame {
    [self setNeedsDisplay:YES]; // -drawRect will be called next draw loop
} 
```

这种方式，`-drawRect`将在适当的时候被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T06:37:48.020

Quartz composer 甚至图片屏幕保护程序可能是很好的非代码方式来做到这一点。

# java - 如何用数字元素和空格分割字符串并将其存储到Java中的可索引数组中？

> ID：12548082
> 
> 赞同：0
> 
> 时间：2012-09-22T22:08:38.547
> 
> 标签：java, arrays, data-structures, queue

我在获取输入并将其存储到数组中时遇到了一些困难。我正在制作一个证券交易所类型的程序，如果用户想要购买、出售或计算其股票的资本收益，他们将进入该程序。所以基本上输入将被使用扫描仪接收并将其存储到变量中。然后它会调用一个方法，使用参数中的变量并对其进行解析，以便将其拆分为 3 个部分。

我的输入将包含一个字符串元素，后跟整数类型值。所以这就是我的输入在程序启动时的样子：

乙 20 300

这意味着我将以 300 美元的价格购买 20 股。有没有办法让我将所有这些首先作为一个字符串存储到一个数组中，然后将索引 1 和 2 处的值转换为一个 int？我真的很感激一些帮助，以便我可以开始工作。这就是我一直在尝试做的事情：

```
import java.util.Scanner;
import java.util.StringTokenizer;

public class StockTran {
static String command = "";
String[] stockParts = null;
CircleArrayQueue Q = null;

public StockTran(String inputCommand) {
    try {
        this.stockParts = this.parseInput(command);
        System.out.println(stockParts[0]);
        System.out.println(stockParts[1]);
        System.out.println(stockParts[2]);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private String[] parseInput(String inputLine) throws Exception {
    String[] temp = inputLine.split("\\s");
    return temp;
}

public static void main(String[] args) {
    Scanner reader = new Scanner(System.in);

    System.out.println("Enter 'B' to purchase share, 'S' to sell share, 'C' for capital gain, or 'Q' to quit: ");
    command = reader.next();

    StockTran tran = new StockTran(command);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:20:09.083

您需要阅读完整的行以传递给构造函数以拆分为元素：

```
command = reader.nextLine(); 
```

作为

```
command = reader.next(); 
```

只会读取第一个令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T07:45:20.790

```
import java.util.Scanner;
public class tcs {

/**
 * @param args
 */
public static void main(String[] args) {
    Scanner scanner = new Scanner(System.in);
    String customerDetails = scanner.nextLine();
    String string[]=customerDetails.split("\\s");
    for (int i = 0; i < string.length; i++) {
        System.out.println(string[i]);
    }
    //System.out.println(string[0]);
    //System.out.println(string[1]);
    //System.out.println(string[2]);
    int total=Integer.parseInt(string[1])*(Integer.parseInt(string[2]));
    System.out.println(total);
    }
} 
```

# python - 如何在python中实现队列的深度复制

> ID：12548083
> 
> 赞同：2
> 
> 时间：2012-09-22T22:08:46.603
> 
> 标签：python, data-structures, queue

我想维护两个队列，队列A用于pop，队列B用于备份，所以如果我从A弹出所有对象，如何从B恢复队列A？

```
while (still has input)
     A.push(input)
     B.push(input)

while A is not empty
      A.pop() 
```

那我怎么从B恢复A？？？同时，我仍然想保留B作为我的备份。

我知道一些非常愚蠢的方法，比如再分配一个队列 C，然后弹出所有 Bout。然后从队列 C 中恢复 B

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T22:11:03.107

一种方法是使用`copy`模块。

```
import copy

while (still has input)
    A.push(input)
    B.push(input)

while A is not empty
    A.pop()

A = copy.deepcopy(B) 
```

# css - 在 CSS 中，如何将背景悬停在图像上

> ID：12548084
> 
> 赞同：0
> 
> 时间：2012-09-22T22:08:54.553
> 
> 标签：css

我在页面上有一个简单的`<img>`图像，当悬停在其顶部时，我想显示一个深色背景。听起来微不足道的东西似乎更难以归档。

这是我当前的代码。即使设置一个`z-index`位置，背景总是放在`src`图像后面的问题。

```
<style>
  img:hover { 
    background: black;
    z-index: 999;
  }
</style>

<img src="image.jpg" /> 
```

知道如何存档吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T22:20:38.600

您可以在图像的包装上设置黑色背景并使图像`opacity: 0`悬停。

# [演示](http://dabblet.com/gist/3768033)

**HTML**：

```
<div class='wrapper'><img src='image.jpg'></div> 
```

相关**CSS**：

```
.wrapper { background: black; }
.wrapper img:hover { opacity: 0; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:13:52.960

我不确定你要做什么，但如果你想用黑色方块覆盖图像，那么你必须在它上面使用其他对象，因为背景永远不会停止成为 BACKground。

# jquery - 空 div 验证问题

> ID：12548085
> 
> 赞同：0
> 
> 时间：2012-09-22T22:09:12.093
> 
> 标签：jquery, html, validation

我想检查一个 div 是否为空。

**HTML**

```
<div id="check"> </div> 
```

**脚本**

```
$(document).ready(function() {
var $tr = $('#check');

if ($tr.text())
{
    alert("success");
}
else
{
    alert("fail");
}
}); 
```

问题是空白空间也被视为文本。只有当 div 中存在内容时，这才应该成功。

你能帮我完成这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:14:45.060

改变：

```
if ($tr.text()) 
```

至：

```
if( $.trim($tr.text()).length > 0) 
```

这将删除字符串前后的所有空格，然后检查结果长度。

**[jsFiddle 示例](http://jsfiddle.net/j08691/YPMBY/)**

参考：[http ://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

# html - 包含三个部分的列表容器，希望中间扩大到填充高度

> ID：12548089
> 
> 赞同：0
> 
> 时间：2012-09-22T22:10:04.050
> 
> 标签：html, css, height

我有一个由页眉、正文和页脚组成的容器。页眉需要能够移动一点（通过设置最大高度似乎可以正常工作），身体要多一点，我的页脚是固定高度。整个 mapsidebar 容器不能增长到超过 400 像素，当发生这种情况时，我希望页眉和页脚始终可见，并且出现滚动条的主体。

我在让身体膨胀以填充容器的高度时遇到问题。任何帮助将不胜感激。我对 SA 有点陌生，所以我一直希望我提供了足够的信息。

关于行为的注释，listofplaces 由用户生成的内容填充，因此它可以是一个列表项或 20 个。

这是我的 HTML：

```
<div id="mapsidebar">
            <div id="listheader">
                <div id="mapTitleLbl" tabindex="2">Untitled Map</div>
                <input id="mapTitleInput" type="text" maxlength="45" tabindex="-1"/>
                <div id="mapDescriptionLbl" tabindex="3">Map Description</div>
                <textarea id="mapDescriptionInput"rows="4" cols="4" maxlength="130" tabindex="-1"> </textarea> 
           </div>               
            <div id="listbody">
                <div class="places"><ol id="listofplaces"></ol>
                </div>
            </div>
            <div id="listfooter">
                <div id="count"><font id="countView" weight="bold">0</font> views
                </div> 
                <div id="share">
                    <div id="zerocopydiv" title="Copy map link to your clipboard"></div>
                    <a id="facebookpopup" title="Share to facebook" href=""></a>   
                    <a id="twitterpopup" title="Share to twitter" href=""></a>
                    <div id="sharetext">Share this map</div> 
                </div>
                <div id="lockPanel">
                    <div id="unlockable">This map is editable by everyone.</div>
                    <div id ="unlock"><a id="lockcheck" href="" title="Lock/Unlock this map" onclick="javascript:onUnlockClick();return false;"></a>
                    </div>
                </div>
            </div>
       </div> 
```

这是CSS：

```
#mapsidebar {
position: absolute;
top: 215px;
right: 0px;
background-color: #fff;
color: #41414C;
font-size: 13px;
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px;
-moz-box-shadow: 0 0 1px #bab9b9;
-webkit-box-shadow: 0 0 1px #bab9b9;
box-shadow: 0 0 1px #bab9b9;
overflow: auto;
padding: 0;
opacity: 0.95;
width: 200px;
border: 3px solid #E6E6E6;}

#listheader{
max-height: 168px;
width: 100%;
font-size: 12px;
text-align: left;
border-bottom: 1px dashed #e6e6e6;
overflow-y: scroll;}

#listbody{
min-height:150px;
height: auto;
overflow: auto;}

.places{
overflow-y: scroll;}

#listofplaces,
#listofplaces li{
padding: 0px 0px 5px;
margin: 0 0 0 14px;}

#listfooter {
position: absolute;
bottom: 0;
width: 100%;
height: 90px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:00:04.830

ficho，看看这个 jsfiddle。我对您的 CSS 所做的更改将允许正文无限增长，同时仍将页脚保持在底部。

[http://jsfiddle.net/GC3yn/](http://jsfiddle.net/GC3yn/)

我从#listbody 中删除了最小高度，因为如果列表没有项目，则使用不必要的空格是没有意义的。

我还从页脚中删除了绝对定位和高度，因为由于 HTML 元素的页面流，它应该始终出现在 #mapsidebar 的底部。

希望这可以帮助。

# ember.js - 通过 sortProperty mixin 对 Ember-Data 支持的 ArrayController 进行排序

> ID：12548092
> 
> 赞同：8
> 
> 时间：2012-09-22T22:10:11.047
> 
> 标签：ember.js, ember-data

我希望能够对`ArrayController`内容来自 ember-data 查询的内容进行排序。不幸的是，`sortProperty`在这种情况下，mixin 似乎不起作用。

我希望能够做到以下几点：

```
App = Ember.Application.create();
App.store = DS.Store.create({ revision: 4});

App.Item = DS.Model.extend({
    id: DS.attr('string'),
    name: DS.attr('string')
});

App.store.createRecord(App.Item, {id: '4', name: 'banana' });
App.store.createRecord(App.Item, {id: '2', name: 'apple'});
App.store.createRecord(App.Item, {id: '6', name: 'spaghetti'}); 

App.ItemsController = Ember.ArrayController.create({
    content: App.store.findAll(App.Item),
    sortProperties: ['name']
}); 
```

使用最新版本的`Ember`Ember-data，这给出了输出：

```
[ id: 4, name: banana ]

[ id: 2, name: apple ]

[ id: 6, name: spaghetti ] 
```

这里的问题是`App.store.findAll()`返回`RecordArray`的内容属性不仅仅是一个`App.Item`实例数组（在这种情况下，内容是 [2, 3, 4]）

要真正掌握实例，我需要使用类似`objectAt()`. 但即使我`App.Item`从 中提取实例`RecordArray`并将它们转储到普通数组中，事情也不会按预期工作。

我是否错过了执行此操作的明显方法，或者这只是框架的当前状态？我宁愿不必为了对它们进行排序而将所有模型复制为普通对象。

**编辑：**

我通过自己定制解决了这个问题`ArrayController`。不过，如果事情像上面那样工作，那就太好了。

**编辑＃2：**

原始车把模板：

```
<script type="text/x-handlebars">
    {{#each App.ItemsController.content }}
        <p>[ id: {{id}}, name: {{name}} ]</p>
    {{/each}}
</script> 
```

（另外，我在上面的代码中使用了`sortProperty`属性而不是`sortProperties`，但这只是一个错字。）

是的，如果有人改为使用

```
<script type="text/x-handlebars">
    {{#each App.ItemsController.arrangedContent }}
        <p>[ id: {{id}}, name: {{name}} ]</p>
    {{/each}}
</script> 
```

然后我们得到我们想要的：

```
[ id: 2, name: apple ]

[ id: 4, name: banana ]

[ id: 6, name: spaghetti ] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T12:24:28.253

我有同样的问题。花了我一段时间，但最终这个通用解决方案解决了它：

```
App.ArrayController = Ember.ArrayController.extend({
  sortProperties: ['id'],
  sortAscending: true,

  sortedContent: (function() {
    var content;
    content = this.get("content") || [];
    return Ember.ArrayProxy.createWithMixins(Ember.SortableMixin, {
      content: content.toArray(),
      sortProperties: this.get('sortProperties'),
      sortAscending: this.get('sortAscending')
    });
  }).property("content.@each", 'sortProperties', 'sortAscending'),

  doSort: function(sortBy) {
    var previousSortBy;
    previousSortBy = this.get('sortProperties.0');
    if (sortBy === previousSortBy) {
      return this.set('sortAscending', !this.get('sortAscending'));
    } else {
      set('sortAscending', true);
      return this.set('sortProperties', [sortBy]);
    }
  }
}); 
```

现在我的大多数 ArrayControllers 扩展`App.ArrayController`而不是`Ember.ArrayController`，特别是那些以 Ember/Data`RecordArray`作为内容的。

现在，在您的车把模板中，执行以下操作：

```
 {{#each item in sortedContent}}
   ...          
 {{/each}} 
```

代替

```
 {{#each item in content}}
   ...          
 {{/each}} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-07T01:57:09.423

从 Ember 1.1.2 和 ember-data 1.0.0-beta.3 开始，可能更早，只需在 Controller 上设置 sortProperties 就足够了。`sortAscending`可以设置为`true`或`false`取决于您要排序的方向。

```
App.ArrayController = Ember.ArrayController.extend({
  sortProperties: ['name'],
  sortAscending: true
}) 
```

但是，请注意

```
sortProperties: ['id'] 
```

似乎是按词汇排序而不是按数字排序。我通过 created_at 时间戳绕过了词法排序，但可能还有另一种方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-11T16:21:27.017

我遇到了类似的问题，并通过 我使用 sortBy() 方法的路线[中的数组类的文档对其进行了整理。](http://emberjs.com/api/classes/Ember.Array.html)
所以在你的情况下，它可能类似于

```
App.store.findAll().sortBy('name'); 
```

我知道这是一个老问题，但如果有人像我这样偶然发现

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-10T18:46:03.347

从 Ember 版本 1.0.0-rc.4 开始 `Ember.ArrayProxy.create(Ember.SortableMixin ....`，它似乎不再工作了。使用 `Ember.ArrayProxy.createWithMixins(Ember.SortableMixin ....`或使用 Ember.ArrayController 中的内置排序功能。

# php - 使用 DOMDocument php 检索一个类

> ID：12548093
> 
> 赞同：-1
> 
> 时间：2012-09-22T22:10:15.543
> 
> 标签：php, domdocument

我是 php 新手，我尝试了在互联网上找到的每一个提示，但我没有找到如何获取“schmsg1”类的内容：

```
<div class="space3"></div>
<div class="subtitle">Direction&nbsp;<b class="bwhite">Val de Fontenay RER</b></div>
<div class="bg1">&gt;&nbsp;Val de Fontenay</div>
<div class="schmsg1"><b>3 mn</b></div>
<div class="bg3"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:22:22.587

这不是 PHP 问题！您可以轻松地制作读取该类文本内容的客户端代码（使用 Javascript），然后使用 ajax 您可以将其发送到 php 脚本来处理它。我向你推荐 Jquery。

# c# - 在 C# 中一定数量的单词或字符后中断文本的方法？

> ID：12548100
> 
> 赞同：3
> 
> 时间：2012-09-22T22:11:08.647
> 
> 标签：c#, .net, text, newline, line-breaks

给定一个**字符串**：

" `Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut`", 之后打破它

1.  **4 个字**
2.  **40 个字符**

使用最高语言版本`C# 4`（为了与 Mono 平台兼容）。

* * *

更新/编辑：

**正则表达式实现**：

广告 #2 - 在 40 个字符后拆分（请参阅此[要点](https://gist.github.com/2759399)）

```
using System;
using System.Text.RegularExpressions;
Regex.Split(
"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut"
, "(.{40})"
, RegexOptions.Multiline)
.Where(s => !string.IsNullOrEmpty(s))
.ToArray(); 
```

* * *

这篇文章作为一个**社区维基**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T22:24:46.193

> 4 个字

正如 OR Mapper 在他的评论中所说，这实际上取决于您在给定字符串中定义“单词”的能力以及单词之间的分隔符是什么。但是，假设您可以将分隔符定义为空格，那么这应该可以工作：

```
using System.Text.RegularExpressions;

string delimiterPattern = @"\s+"; // I'm using whitespace as a delimiter here

// find all spaces between words
MatchCollection matches = Regex.Matches(text, delimiterPattern);

// if we found at least 4 delimiters, cut off the string at the 4th (index = 3)
// delimiter. Else, just keep the original string
string firstFourWords = (matches.Count >= 4)
    ? (text.Substring(0, matches[3].Index))
    : (text); 
```

* * *

> 40 个字符

```
string firstFortyCharacters = text.Substring(0, Math.Min(text.Length, 40)); 
```

* * *

> 两个都

结合两者，我们可以得到更短的：

```
using System.Text.RegularExpressions;

string delimiterPattern = @"\s+"; // I'm using whitespace as a delimiter here

// find all spaces between words
MatchCollection matches = Regex.Matches(text, delimiterPattern);

// if we found at least 4 delimiters, cut off the string at the 4th (index = 3)
// delimiter. Else, just keep the original string
string firstFourWords = (matches.Count >= 4)
    ? (text.Substring(0, matches[3].Index))
    : (text);

string firstFortyCharacters = text.Substring(0, Math.Min(text.Length, 40));

string result = (firstFourWords.Length > 40) ? (firstFortyCharacters) : (firstFourWords); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T23:11:59.897

回答你的问题#2：把它放在一个静态类中，你会得到一个很好的扩展方法，它以给定的间隔在另一个字符串中插入一个字符串

```
public static string InsertAtIntervals(this string s, int interval, string value)
{
    if (s == null || s.Length <= interval) {
        return s;
    }
    var sb = new StringBuilder(s);
    for (int i = interval * ((s.Length - 1) / interval); i > 0; i -= interval) {
        sb.Insert(i, value);
    }
    return sb.ToString();
} 
```

# java - 了解 Spring 3.0 中的 Ajax 简化示例

> ID：12548103
> 
> 赞同：2
> 
> 时间：2012-09-22T22:11:48.617
> 
> 标签：java, ajax, json, spring, spring-mvc

我试图了解[http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/](http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/)上的 Spring 示例。

我有一个问题要澄清我的一些担忧：

问题一：

在 $.getJSON("account/availability",.... 他们是否传递了一个对象帐户并调用 RequestMapping 可用性？

```
function checkAvailability() {
    $.getJSON("account/availability", { name: $('#name').val() }, function(availability) {
        if (availability.available) {
            fieldValidated("name", { valid : true });
        } else {
            fieldValidated("name", { valid : false,
                message : $('#name').val() + " is not available, try " + availability.suggestions });
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:22:10.960

对于完整的图片，这里是处理请求的控制器：

```
@RequestMapping(value="/availability", method=RequestMethod.GET)
public @ResponseBody AvailabilityStatus getAvailability(@RequestParam String name) { 
```

[`@RequestParam`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html)注释至关重要。它：

> 表示方法参数应绑定到 Web 请求参数

现在在调用时：

```
$.getJSON("account/availability", { name: $('#name').val() } 
```

jQuery 将向以下 URI 发出 GET 请求：`account/availability?name=foo`. 服务器端的`@RequestParam`注释将提取`name`参数并注入它，因此`name`控制器中的参数等于`"foo"`.

更新：

关于`/account`URI的一部分，原文章中没有提到，但似乎上面的处理程序方法放在了一个具有类似声明的控制器中：

```
@Controller
@RequestMapping("/account")
public class AccountController { 
```

当请求到达`/account/availability`服务器时，Spring MVC 首先找到匹配 URI ( `/account`) 开头的控制器，然后寻找匹配其余部分 ( `/availability`) 的方法。可惜这部分在文章中没有解释，也许你可以要求作者更新它？

# ios - CCSprite 中的 iPod 图稿尺寸问题？

> ID：12548104
> 
> 赞同：0
> 
> 时间：2012-09-22T22:11:50.857
> 
> 标签：ios, cocos2d-iphone, ipod, ccsprite, artwork

所以我在我的应用程序的一个场景中有一个 CCSprite。我通过执行 initWithSpriteFrameName 将精灵表中的图像加载到其中。然后稍后，当用户从他们的 iPod 库中播放一首歌时，我尝试这样做：

（专辑Artwork是CCSprite）

```
MPMediaItemArtwork *itemArtwork = [musicPlayer.nowPlayingItem valueForProperty:MPMediaItemPropertyArtwork];
UIImage *artworkImage = [itemArtwork imageWithSize:CGSizeMake(albumArtwork.boundingBox.size.width, albumArtwork.boundingBox.size.height)];
CCTexture2D *tex = [[CCTextureCache sharedTextureCache] addCGImage:resizedArtworkImage.CGImage forKey:@"albumArtwork"];
[albumArtwork setTexture:tex]; 
```

但是，图像必须很大，因为 CCSprite 本身只显示了专辑封面的 1/4。我试图降低图像的大小，但没有帮助。有谁知道为什么会这样？

谢谢！

# objective-c - Objective-C iOS 如何将图像绘制到屏幕上

> ID：12548105
> 
> 赞同：1
> 
> 时间：2012-09-22T22:12:00.457
> 
> 标签：objective-c, image, graphics, drawing

我打算为 iOS 设备创建游戏，我希望能够使用我自己的图像渲染器类将图像绘制到屏幕上。

我正在寻找一种类似于 microsoft XNA 中使用的方法，您可以在每帧中绘制图像，我想知道如何去做。

我之前在 Objective-c 方面有过经验，并且我在 C# 方面非常有经验（我确实理解这是一个不同的球类游戏），但我有一半期望 CoreGraphics 就像 c# 中的图形对象。但是，我无法将头绕在屏幕上。我能找到的唯一方法是重写他的 drawRect 方法，但这对我来说没用，因为我将在不同的时间绘制不同的东西并且需要它是动态的。

我曾考虑过使用核心图形绘制每个图像，并且我还考虑过另一种方法，该方法涉及为每个图像中的每个像素绘制一个 1 px 矩形，但我不知道它的效果如何。

所以我需要帮助： - 从单独的图像渲染器类中的方法绘制图像（或矩形）。

*   如何绘制类似于 microsoft xna 中的每一帧的图像。

在此先感谢您的帮助，我对这篇长文表示赞同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:36:51.347

> 从单独的图像渲染器类中的方法绘制图像（或矩形）。

这可以使用 UIGraphicsBeginImageContext 和 UIGraphicsEndImageContext 代码块来完成。该技术基本上是，您开始图像上下文，使用您的绘图代码，从图像上下文获取 UIImage 引用并结束图像上下文。

例如[，问题“如何使用 NSString 绘制功能从文本创建 UIImage”的答案](https://stackoverflow.com/a/2768081/212923)显示了如何从字符串创建图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:32:31.027

1）对于所有“同步”部分，即每次刷新屏幕时绘制一个新帧，您应该使用[`CADisplayLink`](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html#//apple_ref/doc/c_ref/CADisplayLink)允许您指定每次需要绘制帧时调用您选择的方法的类。

被调用的方法会将`CADisplayLink`对象作为其参数传递，您可以向其查询时间戳，以便您知道需要绘制哪个帧。例如，如果您有一个球在移动的游戏，您可以将当前帧的时间戳与上一帧的时间戳进行比较，并知道经过了多少时间，因此您可能知道球的速度和最后位置，您可以轻松确定您需要绘制它的新位置。

2）其余的，即所有的绘图部分，除非你选择使用OpenGL（在这种情况下看一下[`GLKit`](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKit_Collection/Introduction/Introduction.html)以使你的代码更容易）你可以使用Core Graphics自己做低级绘图。为此，您将在**[Quartz 2D Programming Guide](https://developer.apple.com/library/ios/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html)**中找到所需的一切，包括如何绘制像素贝塞尔路径/矢量图形，以及如何在位图上下文中绘制屏幕外。

# ruby - 对虾 - 边界不粘在边缘

> ID：12548111
> 
> 赞同：0
> 
> 时间：2012-09-22T22:12:54.520
> 
> 标签：ruby, prawn

我基于一些带有 ruby​​ pdf libary - prawn 的模板生成 PDF。我的脚本只是在第一个模板页面的顶部添加了一个签名。

我注意到，当我打开模板并执行 stroke_bounds 时，有时它们不会粘在页面的边缘 - 所以签名的位置错误（因为它取决于边界）。

有没有办法让它正常化？感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:13:51.780

如果我没记错的话，有一个默认边距（0.5 英寸）。但是您可以使用`:margin`选项更改它。( `:left_margin, :right_margin, :top_margin, :bottom_margin`)。希望这很有用。

# python - 接收器的scapy？

> ID：12548113
> 
> 赞同：1
> 
> 时间：2012-09-22T22:13:07.813
> 
> 标签：python, sockets, udp, scapy

我想制作一个客户端-服务器模型，服务器将发送一些 UDP 数据包，客户端将接收它们。我正在考虑使用 Scapy 发送数据包。Scapy 是否提供任何接收数据包的工具（监听数据包）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T20:11:30.870

Scapy 能够制作数据包，即根据您的需要构建特定的数据包。是的，[发送和接收功能](http://www.secdev.org/projects/scapy/doc/usage.html#send-and-receive-packets-sr)是 scapy 的核心功能。但是，这更多是出于调试目的而不是生产系统。您应该考虑直接使用 Python 的`socket`模块。

# ios - xcode 4.5 - 将 UIWebview 从 Mainstoryboard 传播到特定语言的 Storyboard

> ID：12548134
> 
> 赞同：0
> 
> 时间：2012-09-22T22:16:34.090
> 
> 标签：ios, localization, uiwebview, xcode4.5, propagation

我正在开发一个简单的双语应用程序。我在 MainStoryboard 中放置了一个 UIWebview --> 它会传播到英文版（以便它运行良好），但法文版是空的（UIWebView 不会传播到法文版）。关于如何使 UIWebview 传播到第二个故事板的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:33:34.507

我找到了一个非常简单的解决方案：[http](http://techblog.41concepts.com/) ://techblog.41concepts.com/ 感谢“mmc”。

# paypal - Magento 1.7.0.2 和 Paypal Advanced 无法正常工作

> ID：12548139
> 
> 赞同：1
> 
> 时间：2012-09-22T22:17:10.023
> 
> 标签：paypal, magento-1.7

我一直在尝试在 Magento 1.7.0.2 中激活 Paypal Payments Advanced，但它根本不起作用。我相信整个设置是正确的，在购物车和 Paypal 帐户中，我已经根据 Paypal 文档进行了验证，并在网络上进行了研究。

我可以通过整个结帐并在付款选项中选择信用卡，其中显示消息“您下订单后将需要输入您的付款详细信息。”，然后当我点击下订单按钮时​​，它会转到购物车页面没有要求付款，购物车是空的。然后订单在后台显示为待付款状态。

我在控制台上注意到，在重定向到购物车页面之前，此 url 出现 500 错误 .../checkout/onepage/saveOrder/

在调用与 Paypal Advanced 相关的其他页面时，我似乎也出现了 500 个错误，例如：.../index.php/paypal/payflowadvanced/cancelPayment 或 .../index.php/paypal/payflowadvanced/returnUrl

任何帮助将不胜感激，我已经确认 Curl 已安装并正常工作，SSL 证书已安装并正常工作，Paypal 帐户中的设置（如 Enable Secure Token）是 Yes，Service Summary 下的所有服务都说 Live，所以我有一种感觉在 Magento 中损坏。

你有没有出现过这个问题？或者您是否能够在任何 Magento 1.7.0.2 中安装 Paypal Advanced？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:49:53.940

对此主题进行了更多搜索并遇到了：[https ://stackoverflow.com/questions/12898392/magento-500-error-paypal-payments-advanced](https://stackoverflow.com/questions/12898392/magento-500-error-paypal-payments-advanced)

从我的自定义主题目录中删除我的 paypal.xml 文件为我解决了这个问题。PayPay 现在可以正常工作了！

# jquery - JQuery在PX中获取元素宽度

> ID：12548141
> 
> 赞同：2
> 
> 时间：2012-09-22T22:17:28.117
> 
> 标签：jquery, html, css

我有一个固定的 DIV，它沿着页面底部运行，并且有几个使用 css width % 设置的 DIV。

例如：HTML

```
 <div id="footerHide" class="footerDivRightContainers">
      <img src="../../images/footer-divider.png" id="footerDividerHide" class="footerDivider">
      <h3 id="footerHide">Hide</h3>
    </div> 
```

CSS：

```
div#footerHide {
    position: relative;
    cursor: pointer;
    width: 6%;
    min-width: 50px;
} 
```

我正在使用百分比，因此它会根据页面重新调整大小。

我需要以像素为单位获取宽度，并且在运行时：

```
alert($('div#footerHide').width()); 
```

我得到 6 的结果 - 这与宽度有关：6%。

有没有办法在像素中获得这个值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:39:04.173

尝试将其用于 webkit 和 Mozilla

```
alert(window.getComputedStyle(document.getElementById("footerHide")).width); 
```

这对于 IE

```
alert(document.getElementById("footerHide").currentStyle.width); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:17:54.557

jQuery[`width()`](http://api.jquery.com/width/)返回元素的*计算*宽度值。您的错误无法在 jsfiddle 中使用它们支持的任何较新版本的 jQuery 或您提供的代码重现。

然而，这可能是[检索具有生成内容的隐藏元素的宽度值的问题](https://stackoverflow.com/q/6208951/1081234)- 因为你说有更多代码我只能假设这是没有提供足够详细的代码片段的情况。

# php - 在 localhost 的 php 中创建个性化的 404 错误页面

> ID：12548143
> 
> 赞同：5
> 
> 时间：2012-09-22T22:17:33.550
> 
> 标签：php, .htaccess, localhost, http-status-code-404

我想`404 error page`在 php 中创建一个个性化的，我想它在 localhost 中工作，因为你知道 localhost 没有 .htaccess 文件！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T22:23:14.647

您可以在本地主机中创建一个 .htaccess 文件。只需确保它位于 Web 服务器的根目录中（我相信 WAMP，它是*www*文件夹）。在 XAMPP 中，它是*htdocs*文件夹

然后在您的 .htaccess 文件中，您只需要以下内容：

```
ErrorDocument 404 /path/to/error/404/page 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T13:33:17.850

您可以在本地主机中创建一个 .htaccess 文件。只需确保它位于 Web 服务器的根目录中（我相信 WAMP，它是 www 文件夹）。在 XAMPP 中，它是 htdocs 文件夹

# magento - 在magento中清理system.log但遇到问题

> ID：12548145
> 
> 赞同：1
> 
> 时间：2012-09-22T22:17:45.540
> 
> 标签：magento

我的日志中出现了一些我无法识别的错误。此外，我在 php/xml 方面还不是很有经验，但我正在尽力而为。我一直在google'in ot试图找到有关如何追踪错误的答案，但没有运气。

```
Warning: simplexml_load_string(): Entity: line 120: parser error : Premature end of data in tag layout line 29  in /var/www/site.com/../Update.php on line 432 
```

和

```
Warning: simplexml_load_string():     &lt;/customer_account&gt;  in /var/www/site.com/../Update.php on line 432 
```

据我所知，这可能是由于其中一个 XML 文件中的一些错误？我一直在看很多，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:43:40.550

我发现了一个失踪

```
</reference> 
```

在一个里面

```
<customer_account>..</customer_account> 
```

似乎已经解决了问题！

# php - 基于列表项类别的搜索

> ID：12548151
> 
> 赞同：0
> 
> 时间：2012-09-22T22:18:29.437
> 
> 标签：php, class, search, html-lists

除了编写标记和 CSS，我对任何东西都不太熟悉，我有一个问题..

如果我有一个结构如下的 .html 页面：

```
<ul>
<li></li>
<li></li>
<li></li>
</ul> 
```

现在让我们假设这些列表项中的每一个都分配有一个类，但该类不是唯一的，并且被多次使用。是否可以将基于某个类的所有列表项提取到另一个 .html 页面？例如，将所有具有“red”类的列表项调用到名为 red.html 的页面，并将所有具有“blue”类的项调用到 blue.html。

是否有任何简单的方法可以使用 PHP 或其他基本方法来做到这一点？

任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:49:28.050

可以说这是您的html：

```
<ul id="list">
<li class="red"></li>
<li class="blue"></li>
<li class="red"></li> 
```

然后你可以用 javascript 通过抓取所需的元素然后使用 ajax 方法将这些发送到所需的页面来完成此操作。

```
$(function(){

var elements = $('#list').children('.red');

$('#button').click(function(){  
    $.ajax({
        method: 'POST',
        url: 'somepage.php',
        data: elements,
        success: function(data) {
            $('#result').html(data);
      }
    });   
}); 
```

});

请注意，我在这里使用 jQuery，它在普通 javascript 中看起来会有所不同......希望这会有所帮助:)

# ruby-on-rails - Ruby on Rails 错误 - 状态中的 NoMethodError#new

> ID：12548152
> 
> 赞同：0
> 
> 时间：2012-09-22T22:18:32.573
> 
> 标签：ruby-on-rails

**添加表单字段后，当我尝试在我的应用程序中查看页面时，我在 Statuses#new 中**收到此错误NoMethodError ...我是 ruby​​ on rails 的新手，所以很想能够完全理解这一点...

```
<%= f.input :user_id %> 
```

这是完整的错误消息：

```
NoMethodError in Statuses#new

Showing /Users/danlee/Projects/treebook/app/views/statuses/_form.html.erb where line #14 raised:

undefined method `user_id' for #<Status:0x007feb53cdd138>
Extracted source (around line #14):

11:     </div>
12:   <% end %>
13: 
14:   <%= f.input :user_id %>
15:   <%= f.input :content %>
16:   <div class="form-actions">
17:     <%= f.button :submit %>
Trace of template inclusion: app/views/statuses/new.html.erb

Rails.root: /Users/danlee/Projects/treebook

Application Trace | Framework Trace | Full Trace
app/views/statuses/_form.html.erb:14:in `block in _app_views_statuses__form_html_erb__4012047659275744874_70324335923840'
app/views/statuses/_form.html.erb:1:in `_app_views_statuses__form_html_erb__4012047659275744874_70324335923840'
app/views/statuses/new.html.erb:3:in `_app_views_statuses_new_html_erb___64465850179705865_70324349236340'
app/controllers/statuses_controller.rb:29:in `new'
Request

Parameters:

None
Show session dump

Show env dump

Response

Headers:

None 
```

该应用程序的 Github 存储库也在这里：[https ://github.com/pixeljugglerdan/treebook](https://github.com/pixeljugglerdan/treebook)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T22:23:00.573

看起来您尚未将 :user_id 列添加到您的状态中。此文件未在 #change 方法中运行任何代码：[https ://github.com/pixeljugglerdan/treebook/blob/master/db/migrate/20120911210237_add_user_id_to_statuses.rb](https://github.com/pixeljugglerdan/treebook/blob/master/db/migrate/20120911210237_add_user_id_to_statuses.rb)

您可能希望使用以下内容重新运行迁移：

```
class AddUserIdToStatuses < ActiveRecord::Migration
  def change
    add_column :statuses, :user_id, :integer
  end
end 
```

# css - 如何仅在元素顶部获得 CSS3 边框半径？

> ID：12548154
> 
> 赞同：3
> 
> 时间：2012-09-22T22:18:41.813
> 
> 标签：css

嗨，我正在将此代码用于 CSS3 边框半径，我该如何调整它以便只在顶部获得边框半径？

```
border-radius: 15px;
-moz-border-radius: 15px;
-webkit-border-radius: 15px; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T22:20:33.023

使用侧面特定的边界半径规则。

前任：

```
-moz-border-radius-topleft:15px;
-moz-border-radius-topright:15px;
-webkit-border-top-left-radius:15px;
-webkit-border-top-right-radius:15px;
border-top-left-radius:15px;
border-top-right-radius:15px; 
```

请注意，Chrome 和 Firefox 的最新版本都支持没有前缀 whis 的边界半径规则，只有旧版本才需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T22:21:34.250

采用：

```
border-radius:15px 15px 0 0;
-moz-border-radius:15px 15px 0 0;
-webkit-border-radius:15px 15px 0 0; 
```

顺序为：左上、右上、右下、左下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T22:21:37.583

使用`border-radius`简写属性：

```
border-radius:15px 15px 0 0; /* top-left, top-right, bottom-right, bottom-left */ 
```

# php - PHP 中的 Xdebug 返回什么？

> ID：12548157
> 
> 赞同：6
> 
> 时间：2012-09-22T22:18:55.803
> 
> 标签：php, code-coverage, xdebug

这段代码带有 PHP/Xdebug（在 Windows 7 x64 上使用 Xdebug 2.2.1 和 PHP 5.4，我还添加了一个行计数器以提高可读性）：

```
1: xdebug_start_code_coverage();
2:
3: for ($ii = 0; $ii < 3; ++$ii)
4:    $x = time();
5:
6: if (false)
7:    echo "Never executed.";
8:
9: echo var_dump(xdebug_get_code_coverage()); 
```

..我得到这个输出（我修改了一些值以使其更具可读性）：

```
array (size=1)
  '..\testpage.php' => 
    array (size=4)
      3 => int 1
      4 => int 1
      7 => int 1
      9 => int 1 
```

Xdebug 网站上的文档说：

> “元素中的值表示该行已执行的执行单元总数。”

来源：[http ://www.xdebug.com/docs/code_coverage](http://www.xdebug.com/docs/code_coverage)

所以显然输出是错误的。第 3 行和第 4 行应该执行了 3 次，而 Xdebug 分别执行了 1 次。第6行应该执行过一次，Xdebug根本没话说。第 7 行绝对不应该被执行，但是 Xdebug 说它确实执行了一次。应该说，无论有没有大括号，输出都保持不变。

在这个网址：http: [//xdebug.org/archives/xdebug-general/0377.html](http://xdebug.org/archives/xdebug-general/0377.html)

.. Derick Rethans 说（7 年前！）不知何故文档是错误的（现在仍然是），Xdebug 只返回 -1、0 或 1。但是，正如我的示例所示，Xdebug 直接返回 1 并且被操纵的柜台似乎使他的选择任意。即使 Xdebug 确实返回 -1、0 或 1，我也不知道这些值是什么意思。

那么，你们中的任何精英编码人员都有一个想法吗？如果这里的 Xdebug 有严重问题，这是否意味着我不能信任任何其他用于分析和代码覆盖的应用程序和插件，而这些应用程序和插件又使用 Xdebug？我在想 Phing 和 PHPUnit 这似乎是一个共同的婚姻。

另外，如果您想详细说明此问题；如果 Xdebug 出现故障，那么所有依赖的应用程序，你在 PHP 中使用什么来报告代码覆盖率？

**编辑**：如果我将参数`XDEBUG_CC_UNUSED`或`XDEBUG_CC_DEAD_CODE`作为参数发送到`xdebug_start_code_coverage`. 我开始认为 Xdebug 根本不适用于代码覆盖，而不是在我的系统上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:23:52.287

我知道在使用带有缩进语法的条件时会出现问题。

XDebug 只知道“语句”，实际上并不理解“行”，即使它是这样显示和讨论的。

这个：

```
1  <?php
2
3  xdebug_start_code_coverage();
4
5  for ($ii = 0; $ii < 3; ++$ii) {
6     $x = time();
7  }
8 
9  if (false) {
10    echo "Never executed.";
11 }
12 
13 echo var_dump(xdebug_get_code_coverage()); 
```

产生：

```
array(1) {
  ["./test.php"]=>
  array(5) {
    [5]  => int(1)
    [6]  => int(1)
    [7]  => int(1)
    [9]  => int(1)
    [13] => int(1)
  }
} 
```

有关更多信息，请参阅：PHPUnit 手册中的[边缘案例](http://www.phpunit.de/manual/current/en/code-coverage-analysis.html#code-coverage-analysis.edge-cases)

和其他问题：

*   [为什么 PHPUnit 显示一些大括号没有被覆盖？](https://stackoverflow.com/questions/8827132/why-does-phpunit-show-some-close-curly-braces-as-not-being-covered)
*   [使用 PHPUnit 达到 100% 的代码覆盖率](https://stackoverflow.com/questions/8804095/reaching-100-code-coverage-with-phpunit)
*   [xDebug 和 PHPUnit 的代码覆盖率说是 100%，其实不是](https://stackoverflow.com/questions/9307774/code-coverage-of-xdebug-and-phpunit-says-100-in-fact-it-is-not?rq=1)

# android - iOS 相当于 Android MODE_WORLD_READABLE

> ID：12548158
> 
> 赞同：1
> 
> 时间：2012-09-22T22:18:58.627
> 
> 标签：android, ios, file-permissions, sandbox

正如标题所说 - iOS 中有什么东西可以让你说“这个文件允许被其他应用程序访问” - 最好只可读，但读/写就足够了。

基本上我试图将一个文件放在沙箱之外，以便其他应用程序可以读取它 - 最好是通过指向本地文件而不是 http 地址的 openURL。

谢谢

编辑：我刚收到 Apple 技术支持的答复，他们告诉我这目前是不可能的（就在 iOS 6 发布之后）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:52:28.800

我认为不可能按照您描述的方式进行。最后我检查了一下，应用程序只能在其沙箱目录中写入，而不能在其他应用程序的沙箱中读取（尽管 IIRC 曾经有一些其他可写目录）。

你想要达到的最终结果究竟是什么？

如果您知道要读取数据的应用程序，则可以使用自定义 URL 方案。

如果您有某种类型的文件（我认为是扩展名/内容类型），您可以使用 UIDocumentInteractionController 让用户选择一个应用程序来打开它。

如果您只想与任何应用程序共享一些数据，我能想到的最接近的是自定义 UIPasteboard。OpenUDID 这样做的目的有点可疑。

# c# - Linq 到 DataGridView 并返回到 KeyValuePair （或类似的）

> ID：12548159
> 
> 赞同：1
> 
> 时间：2012-09-22T22:19:01.863
> 
> 标签：c#, winforms, datagridview

我有以下代码来填充 DataGridView

```
 var results = from loc in dtLocations.AsEnumerable()
                      join con in dtContacts.AsEnumerable() on (int)loc["contactid"] equals (int)con["id"]
                      select new
                      {
                          id = con["id"],
                          mpoc = loc["mpoc"],
                          directno = loc["directno"],
                          extension = loc["extension"],
                          faxno = loc["faxno"],
                          billing = con["billing"],
                          fullname = con["fullname"],
                          mobno = con["mobno"],
                          email = con["email"]
                      };

        dgv.AutoGenerateColumns = false;
        dgv.DataSource = results.ToList<object>(); 
```

但是当我单击一个单元格时，我无法将其读回

```
 private void dgvLocations_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        DataGridView dgv = sender as DataGridView;
        ????? vals = ((List<object>)dgv.DataSource)[e.RowIndex];
        object id = vals.id;  //errors of course
    } 
```

我可以在 Visual Studio 的 Watcher 面板中看到它可以确定列表中的元素，但我无法弄清楚我需要将 vals 设置为哪种类型才能再次读取它们:(

![在此处输入图像描述](../Images/7c11f13983f6248554c8ce7e365b30e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:22:28.957

它( `new { .. }`) 引入了一个[*匿名类型*](http://msdn.microsoft.com/en-us/library/bb397696.aspx)。匿名类型*不能*由静态已知（“编译时”）名称指定。

使用命名（非匿名）类型（其中`MyRow`是已定义的具有所需属性的类）：

```
// Put data in non-anonymous type
select new MyRow {
   id = ..,
}

// Now can use a name statically
MyRow row = (MyRow)data[rowIndex]; 
```

该[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264736.aspx)类型也可以与 C#/.NET4+ 一起使用。或者，甚至更古怪、更`object`明确的反思。（请注意，`dynamic`-typed 表达式自动有效地处理 icky 反射；就像使用`object`，静态类型信息仍然丢失。）

# jsp - Preety 打印 JSP 输出

> ID：12548160
> 
> 赞同：0
> 
> 时间：2012-09-22T22:19:05.303
> 
> 标签：jsp, tomcat

我有以下jsp

```
 <jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" 
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns="http://www.w3.org/1999/xhtml"
 version="2.0">

 <jsp:directive.page contentType="text/html" pageEncoding="UTF-8" />
 <jsp:output omit-xml-declaration="true" />
 <jsp:output doctype-root-element="html" doctype-system="about:legacy-compat"/>

 <html lang="en">
  <head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>HTML5</title>
  </head>
  <body>
   <h1>HTML5</h1>
  </body>
 </html>

</jsp:root> 
```

而默认的tomcat7生成的html看起来像

```
<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="content-type"/><title>HTML5</title></head><body><h1>HTML5</h1></body></html> 
```

我希望它被打印出来（更适合调试）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta content="text/html; charset=us-ascii" http-equiv="content-type" />

  <title>HTML5</title>
</head>

<body>
  <h1>HTML5</h1>
</body> 
```

我想如果我编写与 html 相同的页面并将其命名为 jsp 它将保留它的格式并且我仍然可以使用 jsp 标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:34:32.083

您遇到的问题是您使用的是 JSP 的 XML 版本，而不是典型的 JSP。这就是为什么你所有的空白都被消耗掉了。

您可以转换为普通 JSP，也可以添加一个过滤器来使用整个内容，然后重新格式化它。后者不是微不足道的，但也不是超级困难。

# javascript - 如何从响应中获取 html 和 javascript

> ID：12548168
> 
> 赞同：0
> 
> 时间：2012-09-22T22:20:37.513
> 
> 标签：javascript, jquery

我有以下 javascript

```
$.ajax({
    type: ... url: ... data: ... bla bla...

    success: function( html ) {

        var response = $( html ).filter( '#targetID' ).html();

        $( 'body' ).html( response ).show('slow');

    }
}); 
```

它工作正常，除了用 javascript 加载页面，javascript 消失。那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:06:20.640

您应该在正文中使用容器，而不是将代码直接放在正文中。

IE。在主体内添加 div 标签，这将是容器

```
<div class="container"></div> 
```

然后在JS调用

```
 $( '.container' ).html( response ).show('slow'); 
```

这样，内容会加载到容器中，而不是直接加载到正文中，这将替换页面的所有内容，包括您在那里的 JS。

此外，当使用 Ajax 调用时，我相信它可以使代码更简洁，将响应传递给其他函数以进行处理。这样，您将拥有更小的功能来调试并且更容易理解代码。

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {

      //Here you pass the response to the other function
      processSuccess(data);
  },
  fail: function(data) {

      //Here you pass the response to the other function
      processFail(data);
  }

});

function processSuccess(response) {
     //Print the response in the console (ie. Firebug console) 
     //if console is available
     if(console) {
        console.log(response);
     }
};

function processFail(response) {
     //Print the response in the console (ie. Firebug console) 
     //if console is available
     if(console) {
        console.log(response);
     }
}; 
```

当然，命名空间内的所有内容都会使它变得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:59:03.733

您的意思是您正在通过 Ajax 请求获取 javascript。

在这种情况下，您需要真正确保其中包含正确的代码。因为兼容性是那种东西的婊子。我认为当他加载结果时，JQuery duos 一个 eval 函数，所以应该加载 js。但这可能是您的代码有一些通常在页面上被忽略的错误，但是当您将其与 eval 一起使用时，您会在某些浏览器中出错。

你用的是哪个兄弟？

将代码加载到指定的 div 后尝试评估代码。

# go - 在编程中打勾

> ID：12548169
> 
> 赞同：1
> 
> 时间：2012-09-22T22:20:40.653
> 
> 标签：go

我在 go 网站之旅中运行以下代码

```
package main

import "time"
import "fmt"

func main() {
    c := time.Tick(1 * time.Minute)
    for now := range c {
         fmt.Printf("%v\n", now)
    }
} 
```

但它说 throw: all goroutines are sleep - 死锁！

```
goroutine 1 [chan receive]:
main.main()
    /tmpfs/gosandbox-25c44134_87776a49_1b5620b3_abba0ea7_70540ccf/prog.go:8 +0x53 
```

这是他们方面的问题还是我的代码中的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T22:30:19.563

`[WorksForMe]`

如果您在 golang.org 上运行此代码，它将无法正常工作。它的规则有些不同，它不允许这样的睡眠。而是在本地安装 Go 编译器并在您自己的计算机上运行它。

此外，您可能希望更改`time.Minute`为`time.Second`，这样您就可以看到它实际上在做什么，而无需等待一整分钟。

# cuda - CUDA内核中数组的内存空间

> ID：12548171
> 
> 赞同：2
> 
> 时间：2012-09-22T22:21:18.603
> 
> 标签：cuda

内核中声明的数组的内存空间是多少？例如，在下面的代码中，我声明了 array `a`。该阵列将位于何处？我对本地内存和寄存器感到困惑？如果它在寄存器中，那么它们究竟是如何映射的？

```
__device__ int ptr=0;  

__global__ void a()  
{  
    int b[9][9];                                         
    atomicAdd(&ptr,1);  
    b[0][0]=ptr;                                       
    for(int i=1;i<9;i++)  
    {  
        for(int j=1;j<9;j++)  
        {  
            b[i][j]=b[i-1][j-1]+1;  
        }  
    }  
    ptr=b[7][7]+1;                                                 
}     

int main()  
{
    a<<<1,1>>>();  
    return 0;  
} 
```

一般来说，有没有办法通过`.ptx`文件查看每个变量的内存空间？我用`--ptxas-options=-v`但没有有用的信息编译了这个。我查看`.o`了文件，但它不包含我想要的内容。我想要的只是内核中使用的变量的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:45:05.087

我正在回答这个问题，因为我从 GTC 中的一个演示文稿中得到了确认。因此，如果它们足够小，编译器将尝试将这些数组放入寄存器中。如果它们不能容纳在寄存器文件中，它将被溢出到本地内存。但主要存储区域是寄存器！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T07:53:20.013

Thread 的私有数组肯定存储在本地内存空间中，在片外 DRAM 中，并且可能缓存在内存层次结构中。通常，非数组变量被认为是 PTX 中的虚拟寄存器，并且 PTX 中的寄存器数量是无限的。然而，显然所有这些虚拟寄存器都没有映射到物理寄存器。PTX 后处理器根据为 NVCC 指定的微架构标志将一些寄存器溢出到本地空间，并优化寄存器的使用。

# javascript - 通过定义要查看的类来加速 Facebook / Twitter / G+ 按钮

> ID：12548176
> 
> 赞同：3
> 
> 时间：2012-09-22T22:22:12.917
> 
> 标签：javascript, twitter, facebook-like, google-plus-one, getelementsbytagname

我的社交分享链接要花很长时间才能加载到我的页面上（它仍在我的沙箱中，所以我无法提供访问权限）。浏览所有三个主要参与者，他们都在使用`getElementsByTagName`并正在搜索页面的所有元素。

由于我已经为所有社交实例分配了类，我不能只调整函数以仅查看具有正确类的元素吗？

也许这不会看到巨大的速度提升，但我想尽可能地挤出每一毫秒的性能。

**Facebook 异步 JavaScript：**

```
<script>
    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=356176301083466";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
</script> 
```

**Twitter 异步 JavaScript：**

```
<script>
    !function(d,s,id){
        var js,fjs=d.getElementsByTagName(s)[0];
        if(!d.getElementById(id)){
            js=d.createElement(s);
            js.id=id;js.src="//platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);
        }
    }(document,"script","twitter-wjs");
</script> 
```

**Google+ 异步 JavaScript：**

```
<script type="text/javascript">
    (function() {
        var po = document.createElement('script'); 
        po.type = 'text/javascript'; 
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; 
        s.parentNode.insertBefore(po, s);
    })();
</script>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:53:24.467

刚刚遇到几乎相同的事情。[CSS-Tricks](http://css-tricks.com/snippets/javascript/async-sharing-buttons-g-facebook-twitter/)有一个片段：

```
(function(doc, script) {
var js, 
  fjs = doc.getElementsByTagName(script)[0],
  frag = doc.createDocumentFragment(),
  add = function(url, id) {
      if (doc.getElementById(id)) {return;}
      js = doc.createElement(script);
      js.src = url;
      id && (js.id = id);
      frag.appendChild( js );
  };
// Google+ button
add('http://apis.google.com/js/plusone.js');
// Facebook SDK
add('//connect.facebook.net/en_US/all.js#xfbml=1&appId=200103733347528', 'facebook-jssdk');
// Twitter SDK
add('//platform.twitter.com/widgets.js');
fjs.parentNode.insertBefore(frag, fjs);
}(document, 'script')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:13:10.433

首先，我怀疑是 DOM 遍历真正减慢了速度（DOM 遍历在现代浏览器中通常很快）——通常是对 iframe 源的 HTTP 请求让用户看起来“慢”。

但是，如果您想尝试一下，可以为 Facebook 做以下事情（如果其他人提供类似的东西，您必须查看他们的文档）：

*   *在没有*xfbml=1的情况下初始化 JS SDK ，那么它将不会在您的文档中查看 XFBML 标签以自动呈现。

*   之后使用[FB.XFBML.parse](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)。不幸的是，这个方法只接受一个对单个 DOM 元素的引用作为参数——所以你不能传递像“选择器”之类的东西。但是您可以使用 jQuery 或其他东西来获取页面中的相关元素，然后在循环中对每个元素调用该方法。

但是，正如我在一开始所说的那样——我怀疑它会显着加快速度。

# asp.net - 解析器错误消息：无法加载类型“ContextModule”

> ID：12548179
> 
> 赞同：1
> 
> 时间：2012-09-22T22:22:38.133
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我刚刚开始学习 asp.net MVC3，我遇到了这个问题：

![错误信息](../Images/0c4ab5db0e05700b4580e50bc4ec4c64.png)

我正在使用 Visual Studio 2010，并且在构建过程中没有错误，只有当我尝试运行应用程序时。我正在谷歌上寻找答案，但没有成功。有谁知道如何解决这个问题？

谢谢！

**EDIT-ContextModule 代码：**

```
using System;
using System.Web;

namespace testbaza.Models
{
    public class ContextModule : IHttpModule
    {

        internal const string CONTEXT_KEY = "datacontext";

        public void Dispose()
        {

        }

        public void Init(HttpApplication context)
        {
            context.PostRequestHandlerExecute += new EventHandler(context_PostRequestHandlerExecute);
            context.PreRequestHandlerExecute += new EventHandler(context_PreRequestHandlerExecute);
        }

        private void context_PreRequestHandlerExecute(object sender, EventArgs e)
        {
            if (HttpContext.Current.Session != null)
            {
                HttpContext.Current.Session[CONTEXT_KEY] = new EntitiesModel();
            }
        }

        private void context_PostRequestHandlerExecute(object sender, EventArgs e)
        {
            CommitTransactions();

            DisposeContext();

            ClearSession();

        }

        private void CommitTransactions()
        {
            if (HttpContext.Current.Session == null)
            {
                return;
            }

            EntitiesModel dbContext =
                HttpContext.Current.Session[CONTEXT_KEY] as EntitiesModel;
            if (dbContext != null)
            {

                dbContext.SaveChanges();
            }
        }

        private void DisposeContext()
        {
            if (HttpContext.Current.Session == null)
            {
                return;
            }

            EntitiesModel dbContext =
                HttpContext.Current.Session[CONTEXT_KEY] as EntitiesModel;
            if (dbContext != null)
            {

                dbContext.Dispose();
            }
        }

        private void ClearSession()
        {

            if (HttpContext.Current.Session == null)
            {
                HttpContext.Current.Session.Remove(CONTEXT_KEY);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:40:57.493

我相信您应该从标签中删除该`, testbaza`部分。`add`

```
<configuration>
    <system.web>
        <httpModules>
            <add name="MyModule" type="MyModule" />
        </httpModules>
    </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:42:32.967

您似乎附加了一个找不到的 HTTP 模块。您是如何创建项目的？该模块可以在 web.config 中删除。

**编辑**
您需要更改：

```
<httpModules>
  <add name="ContextModule" type="testbaza.ContextModule, testbaza" />
</httpModules> 
```

到

```
<httpModules>
  <add name="ContextModule" type="testbaza.Models.ContextModule, testbaza" />
</httpModules> 
```

注意更改的命名空间。

# php - 选择带有标签和其余标签的所有线程？

> ID：12548188
> 
> 赞同：1
> 
> 时间：2012-09-22T22:23:42.623
> 
> 标签：php, mysql, sql

例如，我正在尝试获取标签名称为“test”的所有线程以及所有其他标签。如果我在我的 INNER JOIN 选择中添加 where 子句，那么它会获取带有该标签的线程，但不会获得该线程的剩余标签（每个标签都是单独的行，我使用组 concat 将它们组合在一起）。我怎样才能得到剩余的标签呢？

我有以下 SQL

```
SELECT `threads`.`id`,
       `threads`.`title` AS `title`,
       `threads`.`created_at` AS `created_at`,
       `threads`.`views` AS `views`,
       `threads`.`comments` AS `comments`,
       `threads`.`user_id` AS `user_id`,
       `tags`
FROM `threads`
INNER JOIN
  (SELECT threads_id,
          GROUP_CONCAT(DISTINCT `thread_tags`.`thread_tags_title`) AS tags
   FROM `thread_tags`
   WHERE `thread_tags`.`thread_tags_title` = 'test'
   GROUP BY threads_id) thread_tags ON `threads`.`id` = `thread_tags`.`threads_id`
WHERE `threads`.`status` = '1'
ORDER BY `threads`.`views` DESC, `threads`.`created_at` DESC LIMIT 25
OFFSET 0 
```

以及以下方案

标签

```
CREATE TABLE `tags` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(200) NOT NULL,
  `status` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `description` varchar(255) DEFAULT NULL,
  `doctors` int(11) DEFAULT NULL,
  `threads` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1; 
```

线程标签（带有线程 ID 和标签 ID 的表）

```
CREATE TABLE `thread_tags` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `threads_id` int(11) NOT NULL,
  `tag_id` int(11) NOT NULL,
  `thread_tags_title` varchar(255) NOT NULL DEFAULT '',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `description` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1; 
```

线程

```
CREATE TABLE `threads` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `title` varchar(200) NOT NULL,
  `body` text NOT NULL,
  `status` int(11) NOT NULL,
  `views` int(11) NOT NULL,
  `rating` int(11) NOT NULL,
  `comments` int(11) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `metadata` text,
  PRIMARY KEY (`id`),
  KEY `title` (`title`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:31:22.713

就像是

```
SELECT threads.*, GROUP_CONCAT(tags.title)
FROM threads AS t
LEFT JOIN thread_tags AS tt ON t.id = tt.threads_id
LEFT JOIN tags AS tt ON tt.tag_id = tags.id
WHERE t.id IN (
    SELECT tt.threads_id
    FROM thread_tags AS tt
    JOIN tags ON tt.tag_id = tags.id 
             AND tags.title = "test"
)
GROUP BY t.id 
```

# android - 操作栏刷新

> ID：12548192
> 
> 赞同：1
> 
> 时间：2012-09-22T22:24:42.127
> 
> 标签：android, android-actionbar, android-support-library

我正在使用 Android 兼容库在屏幕顶部显示一个 ActionBar。actionBar 包含一个刷新按钮，如果它被按下，它是一个旋转的圆圈。

要激活 actionBar 中圆圈的旋转，我使用以下方法：

```
getActionBarHelper().setRefreshActionItemState(true); 
```

如果我通过单击按钮或通过 onOptionsItemSelected() 调用它，这很好用。

但是，如果我在 onCreate 或 onStart 中调用它，则不会发生任何事情。我想知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:44:29.313

请记住，旋转圆仅`onCreateOptionsMenu`在执行一次后出现。`getActionBarHelper().setRefreshActionItemState(true)`这意味着如果您尝试在您的活动“onCreate”上执行它不会出现。如果您尝试“onResume”，它将起作用。执行后，您可以在任何需要`onCreateOptionsMenu`的地方使用它。

我希望它对你有帮助。

# django - Facebook无限期发布为页面，无需用户登录

> ID：12548193
> 
> 赞同：0
> 
> 时间：2012-09-22T22:24:42.440
> 
> 标签：django, facebook-graph-api, facebook-access-token

我想让我的应用程序能够发布为我自己的页面（和单独的应用程序），并试图找出如何最好地以编程方式获取合适的访问令牌。我在视图中嵌入了以下代码，它可以工作，但取决于我现在手动插入的访问令牌。

```
event = Event.objects.get(pk=1)
try:
    graph = GraphAPI(access_token)
    graph.post(
                path = '/42636472/events', 
                name = event.name,
                location = event.location,
                start_time = '2012-11-04T19:00:00-0700',
                )
    print event.date
except GraphAPI.OAuthError, e:
    print e.message 
```

Facebook 的此更新表明硬编码访问令牌是不可持续的，需要定期关注： [https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

在这种情况下，人们在做什么，让应用更新属于应用组织的页面，或者只是让 access_tokens 授予页面管理访问权限而无需任何人登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:34:24.323

您链接的同一文档解释说，如果使用页面管理员的长期令牌检索页面访问令牌将继续无限 - 请参阅**场景 5**

# xcode - 更新到 Xcode 4.5 和 IOS6 后无法锁定纵向模式

> ID：12548197
> 
> 赞同：1
> 
> 时间：2012-09-22T22:25:29.223
> 
> 标签：xcode, ios6, landscape-portrait

我有一个应用程序，其中包含多个具有不同视图控制器的视图。一种是地图视图，另一种是我希望在纵向/横向中都可用的网络视图。在我只是在我的所有视图控制器中将所有这些代码锁定为纵向的代码之前：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

但是当我更新到 Xcode 4.5/IOS6 时，它们突然都可以翻转了。所以现在我决定保持地图视图/网络视图可翻转。但我有一个菜单，我想锁定纵向，我不使用上面的代码，也不使用：

```
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation     {
return NO;
} 
```

有任何想法吗？

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:56:21.307

您可以从 Project -> Targets -> Project Name -> Summary -> Supported Interface Orientations -> Portrait 中的项目设置中执行此操作。

或者，您可以将以下内容添加到您的 appdelegate -

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown; 
```

}

并将以下内容添加到您的视图控制器 -

```
- (NSUInteger)supportedInterfaceOrientations
{
//    UIInterfaceOrientationMaskLandscape;
//    24
//
//    UIInterfaceOrientationMaskLandscapeLeft;
//    16
//
//    UIInterfaceOrientationMaskLandscapeRight;
//    8
//
//    UIInterfaceOrientationMaskPortrait;
//    2

//    return UIInterfaceOrientationMaskPortrait;
//    or
return UIInterfaceOrientationMaskPortrait;
}

-(BOOL) shouldAutorotate
{
    return YES;
} 
```

# javascript - HTML5 shiv/shim JS 脚本的最常见用例

> ID：12548202
> 
> 赞同：3
> 
> 时间：2012-09-22T22:26:59.677
> 
> 标签：javascript, html, internet-explorer, shim, html5shiv

我经常看到有人建议我包含[HTML5 shiv JS 脚本](http://code.google.com/p/html5shiv/)以使 HTML5 在 Internet Explorer 中工作，但我无法找到关于这将涵盖的最常见用例的明确解释。

有人会给出为什么需要这个 JS 脚本的**常见场景吗？**

此外，它是否需要放在标签`<head>`底部，或者我可以将它与我的 JS 的其余部分放在标签底部，`<body>`这样它就不会阻塞 UI 线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T23:54:20.760

版本 9 之前的 Internet Explorer 拒绝将任何 CSS 样式应用于它无法识别的 HTML 元素，这包括 HTML5 引入的新元素。通过 JavaScript DOM 创建元素，它突然神奇地意识到元素确实应该设置样式。

您可以编写一个简单的脚本，循环遍历您想要调用的 HTML5 标记名称数组`document.createElement(tagName)`。在大多数情况下，这可能对您有用，但是，在 IE 中打印 HTML5 页面并通过 innerHTML 添加 HTML5 内容会导致您遇到更多问题，此时最好切换到 shiv。

HTML5 shiv 可以，据我所知，如果您愿意，可以将其放在头部或正文标记之后。我建议使用条件注释，以便只有 IE 加载它。

# android - 尝试将带有图像的表单发送到 PHP 服务器时，Android 中的内存泄漏

> ID：12548203
> 
> 赞同：8
> 
> 时间：2012-09-22T22:27:14.950
> 
> 标签：android, memory-leaks, bitmap, android-asynctask

我在这个文件中有内存泄漏，我找不到确切的位置，但我认为是 --> 周围的图像`(Bitmap bm = BitmapFactory.decodeFile(filename))`，我尝试了很多不同的方法，但我无法让它工作。

```
package prod.vegs;

//All imports here but not need to write them all now :-)

public class ProductForm extends Activity {

private static int TAKE_PICTURE = 1;
private static int SELECT_PICTURE = 2;

//JSON Response node names
private static String KEY_SUCCESS = "success";
private static String ERROR_MSG = "error_msg";
private static String KEY_TYPES = "subtypes";
private static String TYPE_NAME = "name";
private static String TYPE_ID = "id_type";
private static String PRODUCT_ID = "id_product";

private JSONObject json;
private JSONParser jsonParser;
private String barcodeStr;
private String filename;
private int code;
private ProgressDialog dialog;
private TypeClass[] items;
private TypeClass[] sub_items;

//Declare assets objects
Spinner type;
Spinner subtype;
TextView errorMsg;
TextView description;
TextView name;
Button camera;
Button gallery;
Intent intent;
ImageView preview;
Bundle bundle;
LinearLayout errorMsgContainer;

Context context;

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.product_form);
    context = this;

    Bundle b = getIntent().getExtras();
    barcodeStr = b.getString("barcode");

    jsonParser = new JSONParser();
    dialog = new ProgressDialog(this);
    dialog.setMessage(getString(R.string.loading));
    dialog.setTitle(getString(R.string.progress));
    dialog.setCancelable(true);

    //Set assets
    name = (TextView) findViewById(R.id.productName);
    description = (TextView) findViewById(R.id.productDescription);
    errorMsg = (TextView) findViewById(R.id.error_msg);
    errorMsgContainer = (LinearLayout) findViewById(R.id.error_msg_container);
    type = (Spinner) findViewById(R.id.productParentType);
    subtype = (Spinner) findViewById(R.id.productType);
    camera = (Button) findViewById(R.id.productCamera);
    gallery = (Button) findViewById(R.id.productGallery);
    preview = (ImageView) findViewById(R.id.productPreview);
    filename = Environment.getExternalStorageDirectory() + String.format(getString(R.string.api_product_form_picture_file), barcodeStr);

    Boolean fromScanner = b.getBoolean("scanner");
    if (fromScanner == true) {

        AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
        alertbox.setMessage(getString(R.string.insert_product));
        alertbox.setPositiveButton(getString(R.string.yes), 
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg_1, int arg_num) {
                    final Functions function = new Functions();
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    String url = String.format(getString(R.string.api_product_form_types_url), getString(R.string.api_url));
                    json = function.loadJSONUrl(url, params);
                    if(json != null){
                        try {
                            if (json.getString(KEY_SUCCESS) != null) {
                                String res = json.getString(KEY_SUCCESS);
                                if(Integer.parseInt(res) == 1){

                                    JSONArray types = json.getJSONArray(KEY_TYPES);
                                    items = convertJSONArray(types);

                                    SpinAdapter listViewArrayAdapter = new SpinAdapter(context, android.R.layout.simple_spinner_item, items);
                                    listViewArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                                    type.setAdapter(listViewArrayAdapter);
                                    type.setOnItemSelectedListener(new OnItemSelectedListener(){
                                        public void onItemSelected(AdapterView<?> parent, View v, int pos, long id) {
                                            try {
                                                String url = String.format(getString(R.string.api_subtypes_id_url), getString(R.string.api_url), ((TypeClass) type.getSelectedItem()).getId());
                                                List<NameValuePair> params = new ArrayList<NameValuePair>();
                                                JSONObject json_subtypes = function.loadJSONUrl(url, params);
                                                if (json_subtypes.getString(KEY_SUCCESS) != null) {
                                                    JSONArray subtypes = json_subtypes.getJSONArray(KEY_TYPES);
                                                    sub_items = convertJSONArray(subtypes);
                                                    SpinAdapter subTypeAdapter = new SpinAdapter(context, android.R.layout.simple_spinner_item, sub_items);
                                                    subTypeAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                                                    subtype.setAdapter(subTypeAdapter);
                                                    subtype.setPrompt("Selecciona la cateogría");
                                                }
                                            } catch (Exception e) {
                                                e.printStackTrace();
                                            }
                                        }

                                        public void onNothingSelected(AdapterView<?> args) {
                                            //Auto-generated method stub
                                        }
                                    });
                                    type.setPrompt("Selecciona la cateogría");

                                    //camera action
                                    camera.setOnClickListener(new View.OnClickListener() {
                                        public void onClick(View view) {
                                            intent =  new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                                            int timeMili = (int) (System.currentTimeMillis());
                                            filename = Environment.getExternalStorageDirectory() + "/" + timeMili + ".jpg";
                                            Uri output = Uri.fromFile(new File(filename));
                                            intent.putExtra(MediaStore.EXTRA_OUTPUT, output);
                                            code = TAKE_PICTURE;
                                            startActivityForResult(intent, code);   
                                        }
                                    });

                                    //gallery action
                                    gallery.setOnClickListener(new View.OnClickListener() {
                                        public void onClick(View view) {
                                            intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
                                            code = SELECT_PICTURE;
                                            startActivityForResult(intent, code);
                                        }
                                    });

                                    //button of the form
                                    Button button = (Button) findViewById(R.id.button);
                                    button.setOnClickListener(new View.OnClickListener() {
                                        public void onClick(View view) {
                                            if (!NetworkHelper.CheckNetworkStatus(view.getContext())) {
                                                return;
                                            }
                                            bundle = new Bundle();
                                            bundle.putString("barcode", barcodeStr.toString());
                                            bundle.putString("name", name.getText().toString());
                                            bundle.putString("description", description.getText().toString());
                                            bundle.putString("type_id", ((TypeClass) subtype.getSelectedItem()).getId());

                                            if (_checkFormValues()) {
                                                new SendDataJSON().execute(view);
                                            } else {
                                                Toast.makeText( view.getContext(), getString(R.string.error_form_incomplete), Toast.LENGTH_LONG).show();
                                            }
                                        }
                                    });

                                }  else {
                                    errorMsg.setText(json.getString(ERROR_MSG));
                                    errorMsgContainer.setVisibility(LinearLayout.VISIBLE);
                                }
                            }
                        } catch (JSONException e) {
                            e.printStackTrace();
                        }
                    } else {

                    }
                }
        }).setNegativeButton("No", 
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) {
                    Intent myIntent = new Intent(ProductForm.this, CaptureActivity.class);
                    startActivity(myIntent);
                    finish();
                }
        }).show();

    } else {
        finish();
    }  

}

class SendDataJSON extends AsyncTask<View, Void, View>{

    @Override
    protected View doInBackground(View... views) {

        String url = String.format(getString(R.string.api_product_form_url),getString(R.string.api_url)); 
        HttpPost httpPost = new HttpPost(url);

        try {
            // Add your data
            MultipartEntity entity = new MultipartEntity();

            File photo = new File(filename);
            if (photo.exists()) {
                //create the compressed image to send                   
                //create the file to send the image
                File sd = Environment.getExternalStorageDirectory();
                File data = Environment.getDataDirectory();
                if (!sd.canWrite()) { sd = data; }
                String destinationFolderPath = sd + "/" + getString(R.string.app_dir) + "/";
                String destinationImageName= "photo_" + bundle.getString("barcode") + ".jpg";

                //create the folder to store it
                File destinationFolder = new File(destinationFolderPath);
                if (!destinationFolder.exists()) {
                    destinationFolder.mkdirs();
                }

                File destination = new File(destinationFolder, destinationImageName);
                FileOutputStream out = new FileOutputStream(destination);

                Bitmap bm = BitmapFactory.decodeFile(filename);                 
                int width = bm.getWidth();
                int height = bm.getHeight();
                int max_value = 1024;
                int max = Math.max(width,height);
                if (max > max_value) {
                    width = width * max_value / max;
                    height = height * max_value / max;
                }

                //Make the new image with the new size values
                try {
                    Bitmap bm2 = Bitmap.createScaledBitmap(bm, width, height, true);
                    //Compress the image
                    bm2.compress(CompressFormat.JPEG, 75, out);                     
                    out.flush();
                    out.close();                        
                    destination = new File(destinationFolder, destinationImageName);                        
                    FileBody filePhoto = new FileBody(destination);
                    entity.addPart("image", filePhoto);
                } catch (Exception e) {
                    Log.w(ProductForm.class.getSimpleName(), e);
                }

            }
            SharedPreferences userSettings = getSharedPreferences("UserPreferences", Context.MODE_PRIVATE); 
            Charset chars = Charset.forName("UTF-8");
            entity.addPart("barcode", new StringBody(bundle.getString("barcode"),chars));
            entity.addPart("name", new StringBody(bundle.getString("name"),chars));
            entity.addPart("description", new StringBody(bundle.getString("description"),chars));
            entity.addPart("id_type", new StringBody(bundle.getString("type_id")));
            entity.addPart("uid",new StringBody(userSettings.getString("uid", ""),chars));
            httpPost.setEntity(entity);
            HttpClient httpclient = new DefaultHttpClient();
            httpclient.execute(httpPost);

        } catch (IOException e) {
            //
        }

        return views[0];
    }

    @Override
    protected void onPreExecute() {
        dialog.setMax(100);
        dialog.setProgress(0);
        dialog.show();
    }

    @Override
    protected void onPostExecute(View view) {
        //redirect to the product page          
        setContentView(R.layout.product_barcode);           
        String url = String.format(getString(R.string.api_product_barcode_url), getString(R.string.api_url), bundle.getString("barcode"));  
        new LoadJSONBarcode().execute(url);
    }
}

//Send data to server and receive respond
private class LoadJSONBarcode extends AsyncTask<String, Void, JSONObject>{

    @Override
    protected JSONObject doInBackground(String... urls) {
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        json = new JSONObject();
        json = jsonParser.getJSONFromUrl(urls[0], params);
        return json;
    }

    @Override
    protected void onPreExecute() {
        dialog.setMax(100);
        dialog.setProgress(0);
        dialog.show();
    }

    @Override
    protected void onPostExecute(JSONObject json) {

        if (json != null) {
            try {

                if (json.getString(KEY_SUCCESS) != null) {
                    String res = json.getString(KEY_SUCCESS);
                    if(Integer.parseInt(res) == 1){
                        View view = findViewById(R.id.productBarcodeXML);                       
                        Intent myIntent = new Intent(view.getContext(), Product.class);
                        Bundle b = new Bundle();
                        b.putString("id", json.getString(PRODUCT_ID));
                        myIntent.putExtras(b);
                        view.getContext().startActivity(myIntent);
                    } else {
                        errorMsg.setText(json.getString(ERROR_MSG));
                        errorMsgContainer.setVisibility(LinearLayout.VISIBLE);
                    }
                    dialog.dismiss();
                }

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == TAKE_PICTURE) {
        if (data != null) {
            if (data.hasExtra("data")) { 
                preview.setImageBitmap((Bitmap) data.getParcelableExtra("data"));
                preview.setVisibility(ImageView.VISIBLE);
            }
        } else {
            preview.setImageBitmap(BitmapFactory.decodeFile(filename));
            preview.setVisibility(ImageView.VISIBLE);
            new MediaScannerConnectionClient() {
                private MediaScannerConnection msc = null; {
                    msc = new MediaScannerConnection(getApplicationContext(), this); msc.connect();
                }
                public void onMediaScannerConnected() { 
                    msc.scanFile(filename, null);
                }
                public void onScanCompleted(String path, Uri uri) { 
                    msc.disconnect();
                } 
            };              
        }
    } else if (requestCode == SELECT_PICTURE){
        if (data != null){ 
            Uri selectedImage = data.getData();
            InputStream is;
            String[] filePathColumn = {MediaStore.Images.Media.DATA};
            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            filename = cursor.getString(columnIndex);
            cursor.close();

            try {
                is = getContentResolver().openInputStream(selectedImage);
                BufferedInputStream bis = new BufferedInputStream(is);
                Bitmap bitmap = BitmapFactory.decodeStream(bis);            
                preview.setImageBitmap(bitmap);     
                preview.setVisibility(ImageView.VISIBLE);
            } catch (FileNotFoundException e) {

            }
        }
    } 
}

private TypeClass[] convertJSONArray(JSONArray jsonArray){
    int len = jsonArray.length();
    TypeClass[] t = new TypeClass[len];
    if (jsonArray != null) { 
        for (int i=0;i<len;i++){ 
            try {
                JSONObject o = jsonArray.getJSONObject(i);
                t[i] = new TypeClass();
                t[i].setName(o.getString(TYPE_NAME));
                t[i].setId(o.getString(TYPE_ID));
            } catch (JSONException e) {
                e.printStackTrace();
            }
       } 
    } 
    return t;
}

protected boolean _checkFormValues() {

    boolean result = true;

    if (name.getText().length() == 0) {
        name.requestFocus();
        result = false;
    }
    if (((TypeClass) subtype.getSelectedItem()).getId() == null){
        subtype.requestFocus();
        result = false;
    }
    return result;
}

} 
```

错误日志

```
11-07 23:55:26.914: E/AndroidRuntime(15457): FATAL EXCEPTION: AsyncTask #3
11-07 23:55:26.914: E/AndroidRuntime(15457): java.lang.RuntimeException: An error occured while executing doInBackground()
11-07 23:55:26.914: E/AndroidRuntime(15457):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at java.lang.Thread.run(Thread.java:864)
11-07 23:55:26.914: E/AndroidRuntime(15457): Caused by: java.lang.OutOfMemoryError: (Heap Size=35491KB, Allocated=27993KB)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at android.graphics.BitmapFactory.nativeDecodeFile(Native Method)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:373)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:443)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at prod.vegs.ProductForm$SendDataJSON.doInBackground(ProductForm.java:272)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at prod.vegs.ProductForm$SendDataJSON.doInBackground(ProductForm.java:1)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-07 23:55:26.914: E/AndroidRuntime(15457):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-07 23:55:26.914: E/AndroidRuntime(15457):    ... 4 more 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T15:51:54.263

位图是非常大的内存消耗者。将两个加载到内存中可能是个大问题。解码新位图时应考虑使用[BitmapFactory.Options 。](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)此外，您不需要`bm2`. 相反，将该行替换为：

```
bm = Bitmap.createScaledBitmap(bm, width, height, true); 
```

最后，如果您没有其他选择，您可以使用`android:largeHeap="true"`AndroidManifest.xml 中*的*Application 属性来增加应用程序的堆大小。不需要此选项 - 仅应考虑用于图形密集型应用程序。

**编辑**

您可能会发现另一个有助于优化位图使用的链接：http: [//developer.android.com/training/tv/optimizing-layouts-tv.html#HandleLargeBitmaps](http://developer.android.com/training/tv/optimizing-layouts-tv.html#HandleLargeBitmaps)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T05:57:27.900

位图占用大量内存是清楚的。您需要注意以下事项才能有效地使用位图

*   请记住，您在drawables中的png会根据android的屏幕尺寸自动调整大小。这会占用大量内存。如果在正确的可绘制文件夹中找到所需大小/比例的图像，Android 不会调整图像大小。因此，首先将所有 ldpi 文件也复制到 hdpi。这将至少减少 40% 的内存使用率。我知道这听起来如何，但这是真的，在清单中使用 debuggable=true 来分析您的应用程序，并使用 ddms 来分析堆利用率。进行更改并运行完全相同的场景，您会注意到减少了 40%。
*   当您阅读位图时，将其缩小。不要使用 just `CreateBitmap`，因为它会读取整个文件并占用更多内存。而是使用`BitmapOptions`并缩小它。要缩小它，您首先需要设置选项，然后将此选项用作`CreateBitmap`调用的参数。[这](https://stackoverflow.com/questions/3331527/android-resize-a-large-bitmap-file-to-scaled-output-file)是一个很好的链接。在 stackoverflow 上搜索更多内容，您会发现一些更有趣的响应。
*   如果您的可绘制文件中有任何 1024X512 的文件，请按比例缩小它们。或 创建清晰但较小的新文件。将这些文件用于 mdpi，删除 ldpi。使用 1024X512 作为 hdpi 文件夹。
*   探索使用较小文件的可能性，按大小排序并尝试一下。xml 文件的 eclipse 图形视图非常简洁，并且相对没有错误。用它。
*   编辑：不要忘记为垃圾收集清空您的位图。这是最重要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T15:05:46.140

一些一般提示：

*   正如@Phil 建议的那样，`Bitmap`对象往往会在 Android 中占用大量内存。您应该始终使用`SoftReferences`来保存位图，以便操作系统可以在需要时释放内存。
*   当您完成转换位图（即您的变量）时，您还应该使用该`recycle()`方法丢弃它们。`bm2`
*   听起来很偏执，将位图设置为`NULL`当您完成它们时是向垃圾收集器提示可以收集它们的好习惯。但是，作为一般规则，在 Android 中手动调用 gc 要么使事情变得更糟，要么没有效果。
*   最后，[使用](https://stackoverflow.com/questions/3112671/android-memory-analysing-eclipse-memory-analyzer)`ddms`!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T07:03:48.910

不能肯定地说，因为我不是 Java 开发人员，但在 .NET 中，`BitMap`calss 是 IDisposable，建议在不使用时立即回收。
也许你应该在加载位图后释放你的内存？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T10:16:50.117

是 内存高速缓存以占用宝贵的应用程序内存为代价提供对位图的快速访问。如果[LruCache](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#memory-cache)不能解决问题，你可以试试这个：[ImageManager](http://blog.pseudoblue.com/2010/08/15/android-bitmaps-and-memory-leaks/)，在 ImageManager 类中，它有一个方法 recycleBitmaps。

# java - 类型参数 T 将类型 T 隐藏在 T[] toArray(T[] a) 使用 Eclipse

> ID：12548205
> 
> 赞同：7
> 
> 时间：2012-09-22T22:28:12.903
> 
> 标签：java, eclipse, generics, warnings

将 eclipse 4.2 与 Java 7 一起使用并尝试实现 List 接口的以下方法，我收到了警告。

```
public <T> T[] toArray(T[] a) {
    return a;

} 
```

警告说：

> 类型参数 T 隐藏了类型 T

![截屏](../Images/620655a5034e2eec7a35219fdcc20e3a.png)

为什么 ？我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T22:30:43.823

List 接口也是通用的。确保你没有在你的类中使用 T 作为泛型类型。请注意，在[http://docs.oracle.com/javase/6/docs/api/java/util/List.html](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)中，他们使用“E”作为类泛型参数，使用“T”作为 toArray() 泛型参数. 这可以防止重叠。

```
public class MyList<T> implements List<T> {

// V1 (compiler warning)
public <T> T[] toArray(T[] array) {
    // in this method T refers to the generic parameter of the generic method
    // rather than to the generic parameter of the class. Thus we get a warning.
    T variable = null; // refers to the element type of the array, which may not be the element type of MyList
} 

// V2 (no warning)
public <T2> T2[] toArray(T2[] array) {
    T variable = null; // refers to the element type of MyList
    T2 variable2 = null; // refers to the element type of the array
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T21:51:58.563

另一种选择是您导入了一个名为“T”的类，这就是您收到警告的原因。在发现我有一个无用的导入后，我刚刚解决了我的问题：

```
org.apache.poi.ss.formula.functions.T 
```

tl;博士：检查你的进口！

# objective-c - 如何使用 -[NSSound setVolume:] 设置绝对音量？与系统体积无关？

> ID：12548207
> 
> 赞同：4
> 
> 时间：2012-09-22T22:28:38.987
> 
> 标签：objective-c, macos, cocoa

我有警报声。我从不希望它“响亮”和令人吃惊，所以我通过 [NSSound setVolume] 将它降低到不响亮的音量。

但似乎音量是相对于当前系统音量设置的。因此，如果我在最大系统音量的情况下减少它，我在低系统音量的情况下听不到它。

如果我使用：`[sound setVolume:0.1];`

当系统设置为全音量时，这听起来很棒。但如果系统音量为 1/3，则根本听不到声音。

基本上我想为声音设置一个最大音量。如果系统音量高于此，它将以我预设的最大音量播放。但是如果系统音量低于这个值，它会根据系统音量降级。

像这样：

系统 = 1
-声音 = .3

系统 = .7
-声音 = .3

系统 = .3 -
声音 = .3

系统 = .2 -
声音 = .2

这样做的唯一方法是手动检查系统音量并相应地设置我的声音吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:44:10.733

我怀疑是这样（考虑如果用户在播放声音时更改系统音量会发生什么）。

您可能还希望使其可由用户设置。昂贵的耳机通常非常敏感（即响亮）；如果刻度是线性的，我怀疑 0.1 响亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T18:54:50.403

NSSound 的音量对应于您在 QuickTime Player、iTunes 等中看到的音量滑块。它是特定声音的音量，与系统音量分开并（如您所见）从属于系统音量。

您可以通过查询音频硬件 API 来获取当前系统音量。获取默认声音输出设备，然后获取其音量。然后您可以查看它是否高于或低于您所需的音量。

（值得注意的是，真正的全局“系统音量”并不存在。默认输出设备有两个，具体的输出设备数量不限，而且每个设备都有自己的音量。“系统音量”一般指的是默认输出设备的音量。）

但是请注意，这不是系统上任何其他应用程序的工作方式，因此这种行为对用户来说似乎是不可预测的。预计会出现类似于“当系统音量高于某个级别时音量滑块不起作用”的错误报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T23:37:20.887

不是对我原来的确切问题的答案，而是它导致的问题：将声音文件播放为尊重用户的“警报音量”和警报声音设备的“系统声音”：

[http://iosdeveloperzone.com/2011/05/23/snippet-playing-a-system-sound/](http://iosdeveloperzone.com/2011/05/23/snippet-playing-a-system-sound/)

```
// Required import... Also need AudioToolbox.framework
#import <AudioToolbox/AudioToolbox.h>

// ivar 
SystemSoundID mBeep;

// Create the sound ID
NSString* path = [[NSBundle mainBundle] 
                     pathForResource:@"Beep" ofType:@"aiff"];
NSURL* url = [NSURL fileURLWithPath:path];
AudioServicesCreateSystemSoundID((__bridge CFURLRef)url, &mBeep);

// Play the sound
AudioServicesPlaySystemSound(mBeep);

// Dispose of the sound
AudioServicesDisposeSystemSoundID(mBeep); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T01:06:32.203

无法设置系统音量。无论 Objective-c 允许您走多低的级别，您都只能设置相对音量级别。即使使用 coreaudio，您也只能设置相对级别。

GW

# php - 如果 URL 包含我从我的网站禁止的字词，则尝试重定向页面

> ID：12548208
> 
> 赞同：1
> 
> 时间：2012-09-22T22:28:46.960
> 
> 标签：php, wordpress, search, redirect, search-engine

如果人们尝试在 Wordpress 中使用我的搜索表单来搜索粗俗或成人字词，我已获得重定向页面的代码。

我这样做的原因是因为谷歌可以禁止人们使用 Adsense，即使是在任何 URL 中使用粗鲁的话，即使是那些由搜索功能生成的。

这是我从 Google 收到的消息：

“广告服务已被禁用：examplesite.com

发生违规的示例页面：[http](http://examplesite.com/?s=somekeyword+tv+sex) ://examplesite.com/?s=somekeyword+tv+sex "

我已提出上诉，但我需要将访问重定向到我网站上的任何其他此类搜索，因为搜索会生成 URL，然后 Google 会将其编入索引。

我已经尝试了这个脚本，但将它插入到我的 Wordpress search.php 中，但我收到了这个错误：

解析错误：语法错误，意外的 ';' 在第 83 行的 /home/name/public_html/sitename.com/wp-content/themes/heatmap-adsense-theme/search.php

第 83 行引用以下代码： if($pageURL;

完整代码如下：

```
 <?php
   function curPageURL() {
   $pageURL = 'http';
   if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
   $pageURL .= "://";
   if ($_SERVER["SERVER_PORT"] != "80") {
   $pageURL .= 

   $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
     } else {
      $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
     }
     if($pageURL;
     $string = "/sex/";

     if (preg_match_all($string, $pageURL, &$matches)) {
          header("Location: http://www.example.com/"); /* Redirect browser */
      }
   }
   ?> 
```

代码看起来很完整，但请有人帮我解决这个错误以及之后的任何问题。

提前致谢。

PS：对不起，如果这是消息格式错误。尽我所能，但看不到任何预览按钮。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T23:02:20.660

我很确定如果您使用 404 或 410 Gone 标题，您可以告诉谷歌不要索引该页面，因此当使用特定关键字搜索词时，会在其中弹出该额外标题，或者只是重定向到警告页面。

如果您想使用 PHP 而没有正则表达式：

```
<?php 
$bad_words = array('some','bad','words','sex');

foreach($bad_words as $bad_word){
    if(stristr($_SERVER["REQUEST_URI"], $bad_word) !== false) {
        exit(header("Location: http://www.example.com/"));
        //exit(header("HTTP/1.0 410 Gone"));
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:53:24.267

我建议通过服务器配置使用重定向：

```
#.htaccess
RewriteEngine On
RewriteCond %{QUERY_STRING} (place|bad|words|here) [NC]
RewriteRule ^(.*)$ http://www.example.com/? [R=302,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T22:58:55.533

上面的脚本似乎有一个错误：

```
if($pageURL;
 $string = "/sex/"; 
```

这应该被删除，因为以下 if 语句正在执行正则表达式匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T23:47:04.973

这对我来说效果最好。

```
<?php $bad_words = array('some','bad','words','sex'); foreach($bad_words as $bad_word){ if(stristr($_SERVER["REQUEST_URI"], $bad_word) !== false) { echo "Have a nice weekend!"; } else { echo "Have a nice day!"; } } ?> 
```

# java - 如何从命令行编译/运行 netbeans 项目？

> ID：12548217
> 
> 赞同：0
> 
> 时间：2012-09-22T22:30:43.073
> 
> 标签：java, netbeans, javac

我有这个 netbeans 项目结构：

```
/my_project
|__/controllers
|   |__/factories
|      |__Factory.java
|   |__/integrator
|      |__Integrator.java
|
|__/models
|   |_Models.java
|
|__/main
    |_Main.java 
```

但是，如何从命令行编译/运行它？

这篇[文章](https://stackoverflow.com/a/3512668/1094999)适用于我编译，但不适用于运行它。

有没有一种方法可以在不使用 Ant 之类的工具的情况下运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:42:12.457

如果您不使用任何外部 jar，您可以轻松编写一个调用`javac`所有这些`.java`文件的 OS 脚本（sh 或 bat），然后（另一个）调用包含该方法`java`的文件并设置类路径。`.class``void main(String[] args)`

如果您想使用其他库（在 jar 文件中提供）并且您希望保持脚本相同；您可以将它们复制到以下位置：JAVA_HOME/lib/ext，其中 JAVA_HOME 是指向 JVM (jre) 安装位置的环境变量

# java - BufferedReader readLine() - 输入特定字符串时退出

> ID：12548220
> 
> 赞同：1
> 
> 时间：2012-09-22T22:31:52.513
> 
> 标签：java, bufferedreader

作为标题，我希望它在输入特定关键字时退出循环。

```
try {
    buf = br.readLine();
    while (buf != "doh") {
        buf = br.readLine();
    }
} 
```

两个问题：

1.  当我`doh`从命令提示符输入时，它不会退出循环。

2.  如果我`"buf != null"`说它只有在我按`Ctrl`+时才有效`Z`。如果我什么都不输入（只需按回车键）它不会退出循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T22:32:51.853

改变：

```
buf != "doh" 
```

到：

```
!buf.equals("doh") 
```

并阅读：[Java String.equals 与 ==](https://stackoverflow.com/questions/767372)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:33:05.953

使用`equals`方法而不是`!=`. 仅当对对象的引用不相同时，运算符`!=`才会返回 true。方法`equal`将逐个字符地比较字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T22:34:27.133

您不应该将字符串（和一般的对象）与`==`仅用于基元（`int`、`char`等`boolean`）的字符串（和一般对象）进行比较。对于对象，您使用`[equals](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)`方法。

```
try {
    buf = br.readLine();
    while (! buf.equals("doh")) {
        buf = br.readLine();
    }
} 
```

# c# - 对 Web 应用程序使用 GetLastInsertId 是否安全？

> ID：12548228
> 
> 赞同：1
> 
> 时间：2012-09-22T22:33:23.680
> 
> 标签：c#, servicestack, ormlite-servicestack

此代码在 Web 应用程序中是否安全！

```
public Insert(Student s)
{
    con.Save<Student>(s);
    s.Id=con.GetLastInsertId();
} 
```

我研究了 servicestack ormlite 的代码

```
public override long GetLastInsertId(IDbCommand dbCmd)
{
    dbCmd.CommandText = "SELECT SCOPE_IDENTITY()";
    return dbCmd.GetLongScalar();
} 
```

那么这对初学者来说是个大陷阱吗？

我们如何才能像 EF 一样获得填充的 Student 实例？（只需要填写id）

# java - 如何通过输入更改二维数组？

> ID：12548230
> 
> 赞同：1
> 
> 时间：2012-09-22T22:34:04.183
> 
> 标签：java, arrays, 2d

我有一个 5 行 5 列的 2D 数组，全部填充值 0。我怎样才能让我的程序做到这一点：

> > 1.  输入任意行和列的任意组合，如 2-5，不带 [] 括号。只需输入 2-5 就足以让我的程序理解我的意思是第 2 行第 5 列
> >     
> >     
> > 2.  将我输入的值分配给行列组合中的所述数组。

这是我到目前为止得到的。如您所见，我只设法输出了所有数组元素的值。

```
import java.util.*;

public class stink {

    public static void main(String[]args){
        int[][] kuk = new int[5][5];
        printMatrix(kuk);
    }

    public static void printMatrix(int[][] matrix)
    {
        for (int row = 0; row < matrix.length; row++)
        {
            for (int col = 0; col < matrix[row].length; col++)
                System.out.printf("%2d", matrix[row][col]);
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:45:19.520

您应该使用 Java API 中的 Scanner 类来获取用户的输入，如下面的代码所示。使用分隔符传递输入，例如如果您想要 2X3 数组传递，例如 2-3，其中“-”是分隔符。这是[String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)和[扫描器](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)java API 的链接。

```
 Scanner sc = new Scanner(System.in);
    System.out.println("please enter two numbers");
    String inputs = sc.next();
    int a=Integer.valueOf(inputs.split("-")[0]);
    int b=Integer.valueOf(inputs.split("-")[1]);;
    System.out.println(a + " " + b);
    int[][] x = new int[a][b];
    System.out.println(x.length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:36:55.490

这不是一个复制/粘贴准备好的答案，但它至少应该给你一个关于如何处理这个问题的指示。

```
 int rows = 0;
        int columns = 0;
        Scanner scan = new Scanner(System.in);
        System.out.println("Rows: ");
        rows = scan.nextInt();
        System.out.println("Columns: ");
        columns = scan.nextInt();           
        int[][] kuk = new int[rows][columns]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T22:37:37.637

```
import java.util.*;
public class stink
{
    public static void main(String[]args)
    {
        int[][] kuk = new int[5][5];
        // Where x and y are keys, integer is the integer you want to push
        pushIntoMatrix(kuk, x, y, integer);
        //kuk = pushIntoMatrix(kuk, x, y, integer); // Use if you want the method to return a value.
    }
    public static void pushIntoMatrix(int[][] matrix, int x, int y, int integer)
    //public static int[][] pushIntoMatrix(int[][] matrix, int x, int y, int integer) // Use if you want to return the array.
    {
        matrix[x][y] = integer;
        //return matrix; // Use if you want to return the array.
    }
} 
```

如您所知，Java 中任何非原始数据类型都是引用，因此将 kuk 数组传递给方法会影响实际的数组引用。如果需要，可以在 pushIntoMatrix() 中设置返回值，但不是必须的。

# javascript - 使用 NodeJS 解析 HTML 文件

> ID：12548236
> 
> 赞同：2
> 
> 时间：2012-09-22T22:35:16.243
> 
> 标签：javascript, node.js

我在 Nodejs 中有一个简短的 html 文件作为字符串加载。

```
<html>
<head>
    <title>NodeJS</title>
    <link href="/style/application.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="/scripts/script.js"></script>
    <link rel="shortcut icon" href="/favicon.ico">
  </head>
<body>
<center>
<h1><a href="#"><% title %></a></h1><br>
</center>
</body>
</html> 
```

我需要获取 和 之间的每个字符串的`<%`数组`%>`。在这种情况下只有标题。

尝试了一些javascript字符串函数和正则表达式，但找不到任何东西......

也许找到所有位置`<%` `%>`并以编程方式切割字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:54:59.090

真正的正则表达式可以为您解决问题：

```
var str = document.getElementById('template').innerHTML,
    re = /<%\s*(.*?)\s*%>/g,
    matches,
    results = [];

while((matches = re.exec(str)) !== null) {
    results.push(matches[1]);
}

console.log(results); 
```

​</p>

**[演示](http://jsfiddle.net/f0t0n/Jwbu5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:42:01.707

如果您调用`.split("%")`有问题的字符串，那么只要您`%`在页面上没有任何实例，则返回的数组中的每个奇数索引都应该包含您想要的字符串。

另一种做事的方法是首先调用`string.split("<%")`，然后调用`string.split("%>")`奇数索引，如果你碰巧有实例，其中`%`是页面中使用的字符。

# jquery - 在反弹之前将 div 移动指定距离

> ID：12548237
> 
> 赞同：0
> 
> 时间：2012-09-22T22:35:19.513
> 
> 标签：jquery, html

我有一个 div 在反弹之前从上到下移动，我需要使移动的距离更大。我的实际代码是这样的：

**HTML：**

```
<div id=popup>
    <p>Please, choose what type of puzzle you'd like to play</p>
</div> 
```

**jQuery：**

```
 $(document).ready(function(){    
           $('#popup').show('bounce', { times:3 }, 300);
            }); 
```

我试图添加距离参数，但它没有做我需要的。

```
 $(document).ready(function(){    
           $('#popup').show('bounce', { times:3 , distance: 200 }, 300);
        });//No effect what ever value i give to the `distance` argument. 
```

你可以看到我正在关注[的演示。](http://spyrestudios.com/demos/cute-bar/)我需要在它被反弹之前将它移动到页面的中心（从顶部到中心）。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:11:24.553

设置`distance`和`direction`选项应该有效：

```
$('#bounce').show("bounce", {
    times: 3,
        direction: "down",
        distance: $(window).height()/2
}, 300); 
```

[在此处](http://jsfiddle.net/45RmZ/)查看演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:50:00.133

你问的不是很清楚......我仍然认为这应该有所帮助：

Javascript

```
$('#popup').animate({
    top: (($(window).height()/2) - ($('#popup').outerHeight()/2)
)}, 2000, 'easeOutBounce'); 
```

缓动功能可以在[这里找到](http://gsgd.co.uk/sandbox/jquery/easing/jquery.easing.1.3.js)

# matlab - 在 MATLAB 中不使用 numden() 获取分子和分母

> ID：12548238
> 
> 赞同：1
> 
> 时间：2012-09-22T22:35:34.207
> 
> 标签：matlab

无论如何在不使用 numden() 函数的情况下在 MATLAB 中获取分子和分母？例如： `format rational x=5/2;`

我想获得 5 作为 num 和 2 作为 den。你能帮我解决这个棘手的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:07:06.553

怎么样

```
[N,D] = rat(2.5) 
```

否则，如果你坚持自己做，你可以做类似的事情

```
N = 2.5;

D=1; while (int64(N)~=N), N=N*10; D=D*10; end

g = gcd(N,D);

D = D/g;
N = N/g; 
```

# scheme - 复活旧的 PLT-Scheme 项目（1999 年之前）

> ID：12548243
> 
> 赞同：5
> 
> 时间：2012-09-22T22:36:34.417
> 
> 标签：scheme, racket

我正在尝试恢复一个用 Scheme（PLT-Scheme，使用`mzscheme`解释器（？）命令行工具）编写的旧（1999 年或更早）项目。更糟糕的是，我不知道 Scheme 或 Lisp（其实我也想学，但那是另一回事了）。

我有该项目的源代码：

> [github.com/akavel/sherman](https://github.com/akavel/sherman)

现在，在运行代码时，它会退出并显示如下错误消息：

```
Sherman runtime version 0.5
Hosted on MzScheme version 52, Copyright (c) 1995-98 PLT (Matthew Flatt)
reference to undefined identifier: list->block 
```

（我尝试过PLT-Scheme版本[52、53、103、103p1](https://github.com/akavel/pltscheme-cvs-cvs2git-1)。早期版本不允许`mzscheme -L`选项，`sherman.bat`在项目中使用的脚本中引用了该选项。后来的版本在代码或选项方面也存在一些更严重的问题。 )

困难在于，据我所见，`list->block`实际上***已***定义-请参见：[`collects/sherman/BLOCK.SS`第 48 行](https://github.com/akavel/sherman/blob/master/collects/sherman/BLOCK.SS#L48)。那么，有什么问题呢？

要运行代码，我执行以下步骤：

1.  下载 PLT-Scheme v. 103p1（从[旧版本下载页面](http://download.plt-scheme.org/mzscheme/all-versions.html)- 首先关闭*“PLT Scheme is now Racket”*横幅） - 对于 Windows，使用：[mz-103p1-bin-i386-win32.zip](http://download.plt-scheme.org/bundles/103p1/mz/mz-103p1-bin-i386-win32.zip)。
2.  解压缩（例如到目录`c:\PLT`）。
3.  将包含内容的目录复制`c:\sherman\collects\sherman`到：（`c:\PLT\collects\sherman`其中`c:\sherman`包含[github 存储库](https://github.com/akavel/sherman)的内容）。
4.  运行`cmd.exe`，然后`cd c:\sherman`。
5.  `set PATH=c:\PLT;%PATH%`
6.  `sherman.bat run trivial.s`
    *   这个命令实际上，据我了解，相当于：

```
（需要库“runtime.ss”“谢尔曼”）
（参数化（（当前命名空间谢尔曼命名空间））（加载“trivial.s”））
（当前命名空间谢尔曼命名空间）

```

*   之后，我收到上述错误（MzScheme 版本将报告为 103p1 或其他）。

你能帮我解决问题吗？

***编辑 2：已解决！***

对于它可能关心的人，我[在项目页面上添加了一个完全成熟的“如何使用这个项目”说明，在](https://github.com/akavel/sherman#how-to-use-this-project)[*soegaard*的帮助下](https://stackoverflow.com/a/12551836/98528)详细说明了问题的解决方案。

简而言之：

```
copy trivial.s trivial.rs
rem (the above is workaround for problems with 'r2s.exe < trivial.r > trivial.rs')
sherman.bat compile trivial.rs
sherman.bat run trivial.zo
rem (or: sherman.bat run trivial.ss) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T11:13:07.163

不是答案，而是一些注释太大而无法评论。

```
1\. Sanity Check 
```

错误消息说`list->block`未定义。确保代码`block.ss`运行，插入只是`(display "block.ss is loaded!")`为了`block.ss` 确保代码运行。

* * *

```
2\. Random Thoughts 
```

该文件`blocks.ss`以：

```
(require-library "functios.ss")
(require-library "synrule.ss")
(require-library "stream.ss" "sherman") 
```

文件“sherman/stream.ss”在存储库中，但“synrule.ss”和“functios.ss”在哪里？

啊...这个代码是旧的！这是如何`require-library`工作的描述。它列出`functios.ss` 并`synrule.ss`作为 MzLib 的一部分。

[http://www.informatik.uni-kiel.de/~scheme/doc/mzscheme/node158.htm](http://www.informatik.uni-kiel.de/~scheme/doc/mzscheme/node158.htm)

让我们看看是如何`require-library`工作的：

> 当 require-library 用于加载文件时，库名称和结果值将记录在与当前命名空间关联的表中。如果为已经在当前命名空间的加载表中注册的库评估 require-library，则不会再次加载该库；而是返回负载表中记录的结果。

因此，当`block.ss`运行中的代码时，名称存储在命名空间中。如果当前命名空间是错误的，那么在`block.ss`评估代码时，它会向您解释`list->block`未定义的错误消息。

# objective-c - 使用委托将数组从一个类传递到另一个类 - 最佳设计模式？

> ID：12548247
> 
> 赞同：0
> 
> 时间：2012-09-22T22:36:56.480
> 
> 标签：objective-c, ios, design-patterns, singleton

**问题**

我有一个类，它计算用户使用 CoreLocation 和包含每个点坐标的数组数组（在用户位置更改时获取）的路径。我的视图控制器正在调用此类方法，但我想将其设置为另一个类，该类将结果存储在 Core Data 中或将其上传到数据库。我可以使用以下方法将数组返回到视图控制器：

```
PathFinder.delegate = self 
```

然后让我的视图控制器实现我的委托协议，但这不是我想要的。

**我所考虑的**

我考虑过让将数据上传到数据库/将其存储在 Core Data 中的类作为单例类，以便我可以从我的视图控制器轻松访问它。例如

```
PathFinder.delegate = <MY SINGLETON CLASS> 
```

**结论**

最好的方法是什么？将用于将数组上传到我的服务器的代码放在 PathFinder 类中会是不好的做法吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:47:16.060

我有这样的东西 - 一个管理图像核心数据存储库的单例类（一些在存储库中，一些在文件系统中，但在实体中的 URL）。

为什么不拥有一个所有需要服务的对象都导入的单例类？这样，你告诉某个对象做某事，当工作完成时，他们告诉存储库保存它。您可以使用委托协议来了解它是否成功，但只需将其保存与驱动过程和了解结果分离。

# jquery - jQuery Masonry 格式不正确的结果

> ID：12548250
> 
> 赞同：2
> 
> 时间：2012-09-22T22:37:41.487
> 
> 标签：jquery, html, css, web, jquery-masonry

我正在尝试创建一个简单的图像拼贴，并且由于这个问题需要使用 Masonry：[div grid of squares, float:left issue (image included)](https://stackoverflow.com/questions/8028332/div-grid-of-squares-floatleft-issue-image-included)。

我认为这很简单，但我无法弄清楚我的实现有什么问题：http: [//classicopia.ivointeractive.com/](http://classicopia.ivointeractive.com/)。路径尽头的房子图片应该在右上角。间距是完美的 (970=2*291+388) 并且图像通过它的 float:left 属性获得位置，但砌体脚本将其拉出位置。

如果我增加整个容器的宽度，这两个图像会保持堆叠，但会向右移动。这是否意味着砌体无论如何只能创建 2 列？我将如何更改此号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:29:18.373

砌体需要等宽的柱子才能正常工作。.masonry-bricks 按照它们在 DOM 中出现的顺序排列在#container 中。如果您有跨越两列或一列半的大型 .masonry-bricks，您将无法获得合适的布局；另请参阅不适合的“秋季样式...” .col6 div。

请参阅[http://masonry.desandro.com/demos/basic-multi-column.html](http://masonry.desandro.com/demos/basic-multi-column.html)以了解何时以及为何会出现差距。您将看到任何数量的列都是可能的，但布局取决于基本列宽和匹配该模块化的元素以及 .masonry-brick 宽度的最小公约数。

在您的情况下，固定宽度的#container 没有多大意义，因为 Masonry 的目的是在浏览器窗口上启用灵活的布局，跨浏览器和设备调整大小。不过，您可以有一个居中的#container。

有关类似问题，另请参阅[https://stackoverflow.com/a/12525917/963514](https://stackoverflow.com/a/12525917/963514)。

# c# - 如何在.net 中的套接字编程（TCP/IP）中收集接收到的缓冲区？

> ID：12548252
> 
> 赞同：0
> 
> 时间：2012-09-22T22:38:28.510
> 
> 标签：c#, .net, sockets, io, tcpclient

我正在使用服务器-客户端模型与使用套接字编程的硬件板进行通信。

我使用“NetworkStream”类的“read()”方法从板上接收数据，该方法读取具有指定最大大小的缓冲区并返回缓冲区中有效数据的长度。我已经考虑了足够大的缓冲区的最大大小。

该板每 100 毫秒发送一组消息。每条消息都包含一个 2 字节的常量标头和可变数量的字节作为标头字节之后的数据。

问题是我没有收到一条一条的消息！相反，我收到的一个缓冲区可能包含 2 或 3 条消息，或者一条消息分散在两个缓冲区之间。

目前，我正在使用一个 DFA，它使用恒定的标头字节收集消息的内容（我们不知道消息的长度，我们只知道标头字节），但问题是数据字节可能随机包含标头字节！ ！

有没有任何有效的方法可以使用任何特定的流或类从缓冲区中收集每条消息的字节？我该如何克服这个问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:10:04.507

您需要在您的消费者 DFA 和套接字客户端之间添加一个额外的缓冲区组件。

每当`NetworkStream`缓冲区组件中的数据可用时，将读取它并将其附加到自己的私有缓冲区，增加“可用字节”计数器。缓冲区组件至少需要向其用户公开以下功能：

1.  一个`BytesAvailable`属性——返回计数器的值
2.  一个`PeekBytes(int count)`方法——这将返回`count`缓冲区的第一个字节，如果至少有那么多可用，并且不修改计数器或缓冲区
3.  一个`ReadBytes(int count)`方法——如上，但它递减计数器`count`并删除从缓冲区读取的字节，以便后续`PeekBytes`调用将永远不会再次读取它们

请记住，您不需要能够为任意高的`count`参数提供服务；如果您可以`count`随时接收最长的消息就足够了。

显然，缓冲区组件需要保留某种允许“环绕”的数据结构；您可能想研究一个循环（环形）缓冲区实现，或者您可以只使用两个固定大小的缓冲区，`N`其中`N`最长消息的长度是最长消息的长度，并在它们变满时从一个缓冲区切换到另一个缓冲区。您应该小心，以便在`NetworkStream`缓冲区已满时停止从 中提取数据，并且仅在 DFA 调用`ReadBytes`以释放一些缓冲区空间后继续提取。

每当你的 DFA 需要读取数据时，它会首先询问你的缓冲阶段它已经积累了多少数据，然后进行相应的处理。它看起来像这样：

```
if BytesAvailable < 2
    return; // no header to read, cannot do anything

// peek at the header -- do not remove it from the buffer!
header = PeekBytes(2);

// calculate the full message length based on the header
// if this is not possible from just the header, you might want to do this
// iteratively, or you might want to change the header so that it is possible
length = X; 

if BytesAvailable < X
    return; // no full message to read, cannot continue

header = ReadBytes(2); // to remove it from the buffer
message = ReadBytes(X); // remove the whole message as well 
```

这样，您的 DFA 将永远只处理整个消息。

# c# - 带有私有变量的 C# 歧义

> ID：12548253
> 
> 赞同：2
> 
> 时间：2012-09-22T22:38:53.690
> 
> 标签：c#

让我给你一个简单的例子来说明我的问题。我似乎无法理解错误：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NetApp.Manage;

namespace Toaster.Library
{
    class NetappConnection
    {
        private string Hostname     {get; set;}
        private int ApiMajor        {get; set;}
        private int ApiMinor        {get; set;}
        private string Username     {get; set;}
        private string Password     {get; set;}

        private NaServer NetappServer {get; set;}

        public void NetappConnection(string Hostname, int ApiMajor, int ApiMinor,     string Username, string Password)
        {
            this.Hostname = Hostname;
            this.ApiMajor = ApiMajor;
            this.ApiMinor = ApiMinor;
            this.Username = Username;
            this.Password = Password;

            this.ConnectToNetapp();
        }

        private void ConnectToNetapp()
        {
            NaServer s = new NaServer(this.Hostname, this.ApiMajor, this.ApiMinor);
            s.ServerType = NaServer.SERVER_TYPE.FILER;
            s.TransportType = NaServer.TRANSPORT_TYPE.HTTP;
            s.Port = 80;
            s.Style = NaServer.AUTH_STYLE.LOGIN_PASSWORD;
            s.SetAdminUser(this.Username, this.Password);

            this.NetappServer = s; <<-- Error: Ambiguity between 'Toaster.Library.NetappConnection.NetappServer' and 'Toaster.Library.NetappConnection.NetappServer()'
        }

        public NaServer NetappServer()
        {
            return this.NetappServer;
        }
    }
} 
```

老实说，我是一个 C# 新手。但我不明白为什么这是不可能的。是因为我将 o 的引用传递给 this.Variable 吗？

这样做的目标应该是我能够重用 NaServer 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:51:24.797

```
private NaServer NetappServer {get; set;} 
```

和

```
public NaServer NetappServer() 
```

同名，换一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:52:34.507

属性有 getter 和/或 setter `get; set;`。变量没有。关键字`class`是小写的（根据 CodesInChaos）。字段（或类成员变量，如果您愿意的话）通常用前导下划线书写并具有_camelCase，即第一个字母小写，后续部分以大写字母开头。

```
class MyClass 
{
   private SomeObject _variable;

   public void SomeMethode()
   {
      _variable = new SomeObject();
   }
} 
```

* * *

Visual Studio 的 C# 编辑器和 C# 编译器可以很好地提示您可能出现的问题。考虑到他们！

# php - PHP 究竟是如何实现“动态”变量的？

> ID：12548258
> 
> 赞同：7
> 
> 时间：2012-09-22T22:39:51.893
> 
> 标签：php, variables, interpreter

今天测试下面代码的时候惊呆了：

```
$star = "Aquarius";
$star = 11; 
```

在调试时，我观察到`$star`只是从`string`类型到`integer`类型的变化。我对这个功能感到惊讶。例如，在 C++ 中，这是不可能的，但在 c# 中，我考虑了 var 变量，但它并不相同。

例如你不能这样做：

```
var dynamic = "Hello";
dynamic = 3; 
```

我开始想知道当我基本上说 $star = 11 时到底发生了什么。我的猜测是它`$star`只是被重新初始化，因为它被直接分配给（但这似乎很奇怪，因为解释器已经知道`$star`之前已经声明了一个变量） . 任何人都可以提供一些明确或*官方来源支持的*解释吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T22:49:07.957

在 C/C++ 中，类型是在编译时定义的，因为可以基于它进行各种优化。

在 C# 中，编译器根据上下文推断类型，而在编译器大脑中，它用`var`关键字替换类型。这就是为什么在编译器做出初始推断后您无法更改类型的原因。

在 PHP 等脚本语言中，变量是哈希映射（关联数组，符号表）中的一个条目。这定义了命名空间（和范围）。实际值部分是存储值和类型的通用对象类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:48:31.940

PHP 是一种动态语言，在精神上类似于 Perl、Ruby、Python 或许多其他语言。另一方面，C++ 是编译和静态类型的，要求每个变量在编译时定义一个类型。

查看 PHP 文档以深入了解 PHP 的动态类型实现： http: [//php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T22:52:51.287

PHP 是一种松散类型的语言。PHP 根据值将变量转换为正确的数据类型。

看看这个 - [http://php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php)

# javascript - 需要 Mailhandler.php 帮助

> ID：12548259
> 
> 赞同：1
> 
> 时间：2012-09-22T22:40:01.560
> 
> 标签：javascript, forms

我不明白如何使我的模板表单提交中的 MailHandler 工作。我下载了一个我一直在单独使用 DW6 手动处理的模板，但我无法确切知道要更改什么才能使“联系”部分中的表单将表单信息发送到我的电子邮件地址。任何帮助深表感谢。

从我的 index.html

```
<form action="#" id="ContactForm">  
                                    <div class="success"> Enviado!&nbsp; <strong>Nos contactaremos a la brevedad</strong></div> 
                                        <fieldset class="left"> 
                                                    <div class="block">
                                                    <label class="name">
                                                        <span class="textStyle3">Nombre</span>
                                                        <span class="bg"><input type="text" value="" class="input"></span>
                                                        <span class="error">*Éste no es un nombre válido.</span> <span class="empty">*Campo Obligatorio.</span> </label>
                                                     <label class="email">
                                                        <span class="textStyle3">e-mail</span>
                                                        <span class="bg"><input type="text" value="" class="input"></span>
                                                        <span class="error">*Dirección de email no válida.</span> <span class="empty">*Campo Obligatorio.</span> </label>

                                                     </div>
                                                     <div class="block">
                                                     <label class="message">
                                                        <span class="textStyle3">Mensaje</span>
                                                        <span class="bg"><textarea rows="1" cols="2"></textarea></span>
                                                        <span class="error">*Este mensaje es muy corto.</span> <span class="empty">*Campo Obligatorio.</span> </label>
                                                     </div>
                                                      <div class="formBtn right">
                                                            <a href="#" data-type="submit" class="more">Enviar</a>
                                                      </div>
                                                      <div class="formBtn left">
                                                             <a href="#" data-type="reset" class="more">Limpiar</a>
                                                      </div>
                                            </fieldset>
                                        </form> 
```

从我的 MailHandler.php

```
<?php
$owner_email = $_POST["owner_email"];
$headers = 'From:' . $_POST["email"];
$subject = 'A message from your site visitor ' . $_POST["name"];
$messageBody = "";

if($_POST['name']!='nope'){
    $messageBody .= '<p>Visitor: ' . $_POST["name"] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['email']!='nope'){
    $messageBody .= '<p>Email Address: ' . $_POST['email'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}else{
    $headers = '';
}
if($_POST['state']!='nope'){        
    $messageBody .= '<p>State: ' . $_POST['state'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['phone']!='nope'){        
    $messageBody .= '<p>Phone Number: ' . $_POST['phone'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}    
if($_POST['fax']!='nope'){        
    $messageBody .= '<p>Fax Number: ' . $_POST['fax'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['message']!='nope'){
    $messageBody .= '<p>Message: ' . $_POST['message'] . '</p>' . "\n";
}

if($_POST["stripHTML"] == 'true'){
    $messageBody = strip_tags($messageBody);
}

try{
    if(!mail($owner_email, $subject, $messageBody, $headers)){
        throw new Exception('mail failed');
    }else{
        echo 'mail sent';
    }
}catch(Exception $e){
    echo $e->getMessage() ."\n";
}
?> 
```

来自我的 scripts.js

```
//forms
;(function($){
$.fn.forms=function(o){
    return this.each(function(){
        var th=$(this)
            ,_=th.data('forms')||{
                errorCl:'error',
                emptyCl:'empty',
                invalidCl:'invalid',
                notRequiredCl:'notRequired',
                successCl:'success',
                successShow:'4000',
                mailHandlerURL:'bin/MailHandler.php',
                ownerEmail:'info@pacificbayhotel.com',
                stripHTML:true,
                smtpMailServer:'localhost',
                targets:'input,textarea',
                controls:'a[data-type=reset],a[data-type=submit]',
                validate:true,
                rx:{
                    ".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:'input'},
                    ".state":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:'input'},
                    ".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:'input'},
                    ".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:'input'},
                    ".fax":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:'input'},
                    ".message":{rx:/.{20}/,target:'textarea'}
                },
                preFu:function(){
                    _.labels.each(function(){
                        var label=$(this),
                            inp=$(_.targets,this),
                            defVal=inp.val(),
                            trueVal=(function(){
                                        var tmp=inp.is('input')?(tmp=label.html().match(/value=['"](.+?)['"].+/),!!tmp&&!!tmp[1]&&tmp[1]):inp.html()
                                        return defVal==''?defVal:tmp
                                    })()
                        trueVal!=defVal
                            &&inp.val(defVal=trueVal||defVal)
                        label.data({defVal:defVal})                             
                        inp
                            .bind('focus',function(){
                                inp.val()==defVal
                                    &&(inp.val(''),_.hideEmptyFu(label),label.removeClass(_.invalidCl))
                            })
                            .bind('blur',function(){
                                _.validateFu(label)
                                if(_.isEmpty(label))
                                    inp.val(defVal)
                                    ,_.hideErrorFu(label.removeClass(_.invalidCl))                                          
                            })
                            .bind('keyup',function(){
                                label.hasClass(_.invalidCl)
                                    &&_.validateFu(label)
                            })
                        label.find('.'+_.errorCl+',.'+_.emptyCl).css({display:'block'}).hide()
                    })
                    _.success=$('.'+_.successCl,_.form).hide()
                },
                isRequired:function(el){                            
                    return !el.hasClass(_.notRequiredCl)
                },
                isValid:function(el){                           
                    var ret=true
                    $.each(_.rx,function(k,d){
                        if(el.is(k))
                            ret=d.rx.test(el.find(d.target).val())                                      
                    })
                    return ret                          
                },
                isEmpty:function(el){
                    var tmp
                    return (tmp=el.find(_.targets).val())==''||tmp==el.data('defVal')
                },
                validateFu:function(el){                            
                    el.each(function(){
                        var th=$(this)
                            ,req=_.isRequired(th)
                            ,empty=_.isEmpty(th)
                            ,valid=_.isValid(th)                                

                        if(empty&&req)
                            _.showEmptyFu(th.addClass(_.invalidCl))
                        else
                            _.hideEmptyFu(th.removeClass(_.invalidCl))

                        if(!empty)
                            if(valid)
                                _.hideErrorFu(th.removeClass(_.invalidCl))
                            else
                                _.showErrorFu(th.addClass(_.invalidCl))                             
                    })
                },
                getValFromLabel:function(label){
                    var val=$('input,textarea',label).val()
                        ,defVal=label.data('defVal')                                
                    return label.length?val==defVal?'nope':val:'nope'
                }
                ,submitFu:function(){
                    _.validateFu(_.labels)                          
                    if(!_.form.has('.'+_.invalidCl).length)
                        $.ajax({
                            type: "POST",
                            url:_.mailHandlerURL,
                            data:{
                                name:_.getValFromLabel($('.name',_.form)),
                                email:_.getValFromLabel($('.email',_.form)),
                                phone:_.getValFromLabel($('.phone',_.form)),
                                fax:_.getValFromLabel($('.fax',_.form)),
                                state:_.getValFromLabel($('.state',_.form)),
                                message:_.getValFromLabel($('.message',_.form)),
                                owner_email:_.ownerEmail,
                                stripHTML:_.stripHTML
                            },
                            success: function(){
                                _.showFu()
                            }
                        })          
                },
                showFu:function(){
                    _.success.slideDown(function(){
                        setTimeout(function(){
                            _.success.slideUp()
                            _.form.trigger('reset')
                        },_.successShow)
                    })
                },
                controlsFu:function(){
                    $(_.controls,_.form).each(function(){
                        var th=$(this)
                        th
                            .bind('click',function(){
                                _.form.trigger(th.data('type'))
                                return false
                            })
                    })
                },
                showErrorFu:function(label){
                    label.find('.'+_.errorCl).slideDown()
                },
                hideErrorFu:function(label){
                    label.find('.'+_.errorCl).slideUp()
                },
                showEmptyFu:function(label){
                    label.find('.'+_.emptyCl).slideDown()
                    _.hideErrorFu(label)
                },
                hideEmptyFu:function(label){
                    label.find('.'+_.emptyCl).slideUp()
                },
                init:function(){
                    _.form=_.me                     
                    _.labels=$('label',_.form)

                    _.preFu()

                    _.controlsFu()

                    _.form
                        .bind('submit',function(){
                            if(_.validate)
                                _.submitFu()
                            else
                                _.form[0].submit()
                            return false
                        })
                        .bind('reset',function(){
                            _.labels.removeClass(_.invalidCl)                                   
                            _.labels.each(function(){
                                var th=$(this)
                                _.hideErrorFu(th)
                                _.hideEmptyFu(th)
                            })
                        })
                    _.form.trigger('reset')
                }
            }
        _.me||_.init(_.me=th.data({forms:_}))
        typeof o=='object'
            &&$.extend(_,o)
    })
}
})(jQuery)
$(window).load(function(){
$('#ContactForm').forms({
    ownerEmail:'#'
})
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:51:13.367

在您的 scripts.js 中找到这一行 ownerEmail:'#'

并在该字段中为您提供自己的电子邮件，例如 ownerEmail:'info@mysite.com'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:36:23.137

您需要将您的电子邮件地址放在加载脚本的索引页面（或contact.html）上。寻找 ：

```
<script>
    $(function(){

        //  Initialize Contact Form
        $('#YOUR_FORM_ID').forms({
            ownerEmail:'#' //CHANGE # TO YOUR E-MAIL
        });
    })
</script> 
```

# c# - 为什么在使用 ContinueWith 时会收到编译器警告？

> ID：12548261
> 
> 赞同：7
> 
> 时间：2012-09-22T22:40:10.877
> 
> 标签：c#, .net-4.5, compiler-warnings, async-await

我有这行代码：

```
t.ContinueWith(_ => form.Close(), 
                  TaskScheduler.FromCurrentSynchronizationContext()); 
```

...关于编译器有这样的说法：

> 警告 2 由于不等待此调用，因此在调用完成之前继续执行当前方法。考虑将“等待”运算符应用于调用结果。

现在，这不是我编写的代码，但我认为它只是在现有任务的末尾添加一个延续。我不认为它实际上*正在运行*任务（或延续）。那么这个仅仅修改任务的过程肯定是同步操作吗？我为什么要这样做`await`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T00:16:45.200

> 我为什么要这样做`await`？

您不必这样做`await`，这就是为什么它是警告而不是错误的原因。但是，如果你在一个`async`方法中并且你有一个返回一个等待对象的方法，大多数时候你不应该忽略它。

在正常的同步代码中，您不必做任何特殊的事情来等待您调用的方法完成，每个方法调用总是阻塞。`await`但是对于异步方法，如果您想等到它们完成，您实际上必须使用它们。此外，如果异步操作失败并引发异常，则在获得方法的结果之前您不会知道它`await`（或以其他方式从结果中获取异常，例如`Wait()`如果 awaitable 为 a 则调用`Task`）。

因此，如果您忽略方法中返回的可等待值`async`，则代码中可能存在错误，而这正是警告试图避免的。

在您的情况下，`ContinueWith()`返回 a `Task`，*可以*`await`编辑，因此编译器假定您应该*这样* `await`做。但是在这种情况下，您不想等到继续完成并且`Close()`很可能不会抛出异常。因此，在这种情况下，警告是误报，它实际上并不表示代码中存在问题。

# php - 带会话的文件下载登录保护

> ID：12548264
> 
> 赞同：1
> 
> 时间：2012-09-22T22:40:37.370
> 
> 标签：php, security, session, authentication, download

我想通过会话身份验证保护一些文件。有些文件可以被用户查看，有些则不能。

我用 mod_rewrite 和 readfile() 实现了一个解决方案。我的问题是这个功能会使用大量内存，当更多用户下载文件时服务器会关闭。

我试过这个： 1）通过 php 处理程序传递一个文件并使用 prepend 函数。它不起作用，因为当 prepend php 文件完成处理程序处理文件时，在我的情况下，处理程序由于无效的 ASCII 字符而被阻止。我无法阻止处理程序处理但输出文件。2) 将会话、ip 和文件夹名称放在一个临时文件中，我试图在我的 nginx.conf 中检查以排除重写。我失败了，因为我无法仅将 nginx 中的文件夹名称提取到变量中。

我怎么解决这个问题？有人建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T22:54:39.983

如果我正确理解了这个问题，您正在尝试创建一个仅允许授权用户查看某些文件，而其他用户查看其他文件的系统。

如果我的理解是正确的，那么我会亲自将文件存储在根目录之上或安全的位置，然后在 URL 中有一个带有唯一标识符的访问脚本（例如 fetch_file.php）（例如 fetch_file.php?uid= 1234）。

如果用户被授权访问唯一id为1234的文件；从数据库中的位置详细信息中提供文件，否则拒绝请求。

这样，用户无法在没有正确权限的情况下访问该文件，因为它安全地存储在不应从 Internet 访问的根目录之上。

# iphone - iOS6 在 cocos2d 1.0 beta 中打破了默认的自动旋转和横向

> ID：12548270
> 
> 赞同：1
> 
> 时间：2012-09-22T22:41:47.043
> 
> 标签：iphone, uitableview, cocos2d-iphone, ios6

在默认的 cocos2d 1.0 beta 模板中，AppDelegate.m 有一些代码：

```
// AppDelegate.m
// IMPORTANT:
// By default, this template only supports Landscape orientations.
// Edit the RootViewController.m file to edit the supported orientations.

#if GAME_AUTOROTATION == kGameAutorotationUIViewController
    [director setDeviceOrientation: kCCDeviceOrientationPortrait];
#else
    [director setDeviceOrientation: kCCDeviceOrientationLandscapeLeft];
#endif 
```

接下来，在 GameConfig.h 中，我们定义了：

```
// GameConfig.h
#define kGameAutorotationNone 0
#define kGameAutorotationCCDirector 1
#define kGameAutorotationUIViewController 2
//
// Define here the type of autorotation that you want for your game
#define GAME_AUTOROTATION kGameAutorotationUIViewController 
```

一起，这正在努力产生一个横向设置，根据您持有设备的方式自动旋转到横向左侧或横向右侧。TableViews 也自动旋转（我有几个表放在一些 cocos2d CCScenes 的顶部）。

但是......我昨晚更新到iOS6。以及 XCode 4.5。

我希望不只是我，而是我的应用程序的轮换现在完全被打破了。我正在尝试通过至少一个 tableview 的代码来修复它...更改 GAME_AUTOROTATION 似乎对 tableviews 没有影响，只是 cocos2d CCScenes（在某种程度上是解决方案的一半）。

我可能只是从头开始构建一些东西而不是使用预先编写的代码，这真是令人沮丧！非常感谢，苹果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:06:09.197

我的部分解决方案是

```
#if GAME_AUTOROTATION == kGameAutorotationUIViewController
    //[director setDeviceOrientation:kCCDeviceOrientationPortrait];
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeRight];
#else
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];
#endif 
```

你有更好的解决方案吗？

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:11:16.163

答案是将我的东西升级到 cocos2d 2.0 并删除对不再使用的 RootViewController 的依赖。

```
navController_ = [[UINavigationController alloc] initWithRootViewController:director_];
navController_.navigationBarHidden = YES;

[window_ setRootViewController:navController_]; 
```

# android - 后台服务器方法

> ID：12548272
> 
> 赞同：2
> 
> 时间：2012-09-22T22:41:59.677
> 
> 标签：android

我已经构建了一个 Android 聊天应用程序。它有一个 TCP 服务器，该服务器使用`Socket`.

我希望服务器连接始终在后台工作 - 即使应用程序不在前台 - 并监听从服务器发送的数据。

现在我正在使用一个`while`循环来检查是否有新的东西，但是当 Android 需要资源时操作系统会关闭我的线程。

我考虑过`readline()`在我的线程中使用该方法而不是使用`while`循环，因为`readline()`它是一种阻塞方法。

这是采取正确的方法吗，这将导致防止操作系统杀死我的应用程序？

有什么办法，比如只有当传入套接字可用时才会启动的自定义广播接收器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:21:17.217

简而言之，Android 可以并且将会杀死任何占用资源以继续运行的应用程序。如何处理可能威胁您的应用程序被杀死的场景是**您**的**责任。**

 **我建议查看[开发](http://developer.android.com/reference/android/app/Service.html)者网站上的服务生命周期。

首先，任何占用太多的应用程序，无论是服务/活动，以这种方式被认为是......在Android眼中是“粗鲁”的，因此无论如何都准备以这种方式被杀死！

例如，在`onLowMemory`覆盖方法中监听并采取相应的行动，例如保存数据等。

真正应该发生的事情是，服务会生成一个线程，以这种方式*定期*侦听传入的连接，

```
while (!terminating){
     Socket incomingClientSocket = ourServerSocket.accept();
     // How you handle this part is up to you?
     Thread.sleep(500); // Sleep for 500 ms
} 
```

`terminating`变量是 a`boolean`并且是控制何时终止循环的决定性变量。注意该`Thread.sleep`方法是如何使用的，以“冷静”执行，如果省略，Android 将在应用程序上放置一个十字准线并终止它，换句话说，对系统资源有礼貌。

***提示：***扩展`Thread`类，以保持通过该`accept()`方法处理传入连接的功能。

当`incomingClientSocket`变为非空时，将创建另一个线程，在该线程中它打开 的输入/输出流并使用*二进制*`incomingClientSocket`方式对其进行读/写。

 *不要使用该`readline`方法，因为这表明设计不佳并假设数据是文本的，因为到客户端的一个传入数据包可能是例如 720 字节，之后传入的下一个数据包很可能是 564 字节，这就是 TCP/IP 的本质。

你需要想出一种更可靠的方式来建立数据传输的边界，例如开始和结束标记，并让服务器读取传入的数据并区分由开始和结束标记组成的字节流，一次两者都存在，然后提取标记之间的真实数据并据此采取行动。

例如，您可以说，当`incomingClientSocket`它实际上变为非空时，向您的活动发送广播以对其进行操作，并让活动，获取该套接字，并打开连接并从输入/输出读/写与套接字关联的流。***

# c++ - 'ios' : 不是类或命名空间名称

> ID：12548273
> 
> 赞同：5
> 
> 时间：2012-09-22T22:42:00.337
> 
> 标签：c++, file, iostream

我正在尝试使用上述代码将矩阵写入文件。但我收到以下错误：“ios”：不是类或命名空间名称。我的代码：

```
std::ofstream myfile;
myfile.open ("C:/Users/zenitis/Desktop/bots/Nova/data/ownStatus.txt", ios::out | ios::app);               

for (int i = 0; i< 21; i++){
    myfile << featureMatrix[i] << "          ";
}
myfile << "\n";
myfile.close(); 
```

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T22:45:07.283

`ios`是 的成员`std`。也就是说，您想使用以下方法之一来引用它：

```
using namespace std; // bad
using std::ios;      // slightly better

int main() {
    std::ofstream myFile("name", std::ios::app); // best
} 
```

顺便说一句，您可以直接`open()`在`std::ofstream`构造函数中。此外，对于`std::ofstream`标志`std::ios_base::out`（打开标志实际上是在`std::ios`的基类中定义的`std::ios_base`）是自动添加的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T22:45:17.337

它实际上是`std::ios::out`。

# three.js - 从 Collada 加载调用中克隆 Object3D 模型

> ID：12548280
> 
> 赞同：0
> 
> 时间：2012-09-22T22:43:18.210
> 
> 标签：three.js

我正在尝试克隆 ThreeJS Object3D 模型。我在这里和 GitHub 上找到了各种代码，但没有什么对我有用。下面的代码部分来自[How to clone an object3d in Three.js?](https://stackoverflow.com/questions/11919694/how-to-clone-an-object3d-in-three-js)

```
var loader = new THREE.ColladaLoader();
loader.load('../Model.dae', function (result) {
    var loadedMesh = // No sure where this comes from

    // Create X of these
    for ( var i = 0; i < 10; i ++ ) {
        var mesh = new THREE.Mesh( loadedMesh.geometry, loadedMesh.material );
        mesh.position.set( i * 100, 0, 0 );
        scene.add( mesh );
    }
} 
```

你能帮忙填空吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:00:23.280

这最终起作用了：

```
var loader = new THREE.ColladaLoader();
loader.load('../Turn.dae', function colladaReady(result) {
    var piece = result.scene.children[0];
    for (var i = 0; i < 10; i++) {
        var newPiece = new THREE.Object3D();

        for (var j = 0; j < piece.children.length; j++) {
            newPiece.add(new THREE.Mesh(piece.children[j].geometry, piece.children[j].material));
        }

        newPiece.position.set(i * 100, 0, 0);
        newPiece.scale.set(30, 30, 30);
        scene.add(newPiece);
    }

    renderer.render(scene, camera);
}); 
```

所以我没有得到一个网格，而是得到了一组网格。我是新手，所以我不知道为什么这与我见过的所有其他答案不同。dae 文件是直接从 Sketchup 导出的。我很想知道是否有更容易/更好的方法来做到这一点。

# jquery-mobile - 基于骨干哈希的导航和 jqm

> ID：12548284
> 
> 赞同：3
> 
> 时间：2012-09-22T22:44:17.457
> 
> 标签：jquery-mobile, backbone.js

我有以下路线：

```
routes: {
        "home": "login",
        "login": "login",
        "forum": "forum",           
        "group/:id/:group": "group",
        "": "login",
} 
```

如果我在页面论坛上，则 URL 是 url.com/#forum，但如果我从论坛视图导航到组视图：

```
router.navigate("group/:123/:nicegroup", {trigger: true}); 
```

1.  问题：然后网址更改为“url.com/group/123/nicegroup”。与此同时，“”路线将被调用，因为我认为没有“#”并且空路线“”触发。我最终进入了登录页面。

2.  问题：如果我删除“”路由，然后从#forum 导航到页面组：

    router.navigate("group/:123/:nicegroup", {trigger: true});

url 更改为 url.com/group/123/nicegroup，组前没有 #。它工作正常，但如果我返回按浏览器的后退按钮，则 url 再次更改为 url.com/#forum 并且没有任何反应。我仍然停留在群组页面上，但出现错误：

```
Uncaught TypeError: Cannot call method 'indexOf' of undefined jquery.mobile-1.1.0.js:3791
$.extend.resetUIKeys jquery.mobile-1.1.0.js:3791
$.extend.hashValueAfterReset jquery.mobile-1.1.0.js:3803
$.extend.onPopState jquery.mobile-1.1.0.js:3863
jQuery.event.dispatch require-jquery.js:5385
jQuery.event.add.elemData.handle.eventHandle 
```

同样，在第二个问题中，我已经删除了 "" 路线，这样它就不会打扰我，但这仍然是我的第一个问题。

我禁用了所有 jqm 导航。

```
 $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:53:05.630

不久前有人问过这个问题 - 但是您是否在应用程序启动时启用了[Backbone.History](http://backbonejs.org/#History-start)？

```
Backbone.history.start() 
```

# php - 确定文件是否使用 codeigniter 提交

> ID：12548292
> 
> 赞同：0
> 
> 时间：2012-09-22T22:45:44.137
> 
> 标签：php, codeigniter, upload

我基本上有一个编辑个人资料页面，与其他字段一起可以选择上传图片。现在我遇到的问题是确定他们是否提交了文件或将其留空（默认）。

我当前的代码：

```
if($this->input->post('user_pic') === FALSE)
    {
        //Don't do anything.
    } else {
        //Proccess upload.
    } 
```

该表单使用多部分和全部正确完成，并且其他值确实更新，所以我假设这个确切的代码不起作用。

问题是即使我确实提交了一个文件，它仍然保持原样，或者另一个词没有做任何事情。我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:50:08.363

你可以这样检查：`if(isset($_FILES['user_pic']))`

CodeIgniter 方法：

```
$this->load->library('upload');

if ($this->upload->do_upload('user_pic'))
  //good
else
  //errors display $this->upload->display_errors() 
```

[CodeIgniter 文件上传类](http://codeigniter.com/user_guide/libraries/file_uploading.html)

# c - fgets 在退出 EOF 之前多次循环

> ID：12548293
> 
> 赞同：5
> 
> 时间：2012-09-22T22:45:58.817
> 
> 标签：c, while-loop, fgets

我正在制作一个简单的外壳。它还需要能够逐行读取文本文件。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/stat.h>

// Exit when called, with messages
void my_exit() {
    printf("Bye!\n");
    exit(0);
}

int main(void) {

  setvbuf(stdout, NULL, _IONBF, 0);

  // Char array to store the input
  char buff[1024];

  // For the fork
  int fid;

  // Get all the environment variables
  char dir[50];
  getcwd(dir,50);
  char *user = getenv("USER");
  char *host = getenv("HOST");

  // Issue the prompt here.
  printf("%s@%s:%s> ", user, host, dir);

  // If not EOF, then do stuff!
  while (fgets(buff, 1024, stdin) != NULL) {

    // Get rid of the new line character at the end
    // We will need more of these for special slash cases
    int i = strlen(buff) - 1;
    if (buff[i] == '\n') {
      buff[i] = 0;
    }

    // If the text says 'exit', then exit
    if (!strcmp(buff,"exit")) {
      my_exit();
    }

    // Start forking!
    fid = fork();

    // If fid == 0, then we have the child!
    if (fid == 0) {

      // To keep track of the number of arguments in the buff
      int nargs = 0;

      // This is a messy function we'll have to change. For now,
      // it just counts the number of spaces in the buff and adds
      // one. So (ls -a -l) = 3\. AKA 2 spaces + 1\. Really in the
      // end, we should be counting the number of chunks in between
      // the spaces.
      for (int i = 0; buff[i] != '\0'; i++) {
        if (buff[i] == ' ') nargs ++;
      }

      // Allocate the space for an array of pointers to args the
      // size of the number of args, plus one for the NULL pointer.
      char **args = malloc((sizeof(char*)*(nargs + 2)));

      // Set the last element to NULL
      args[nargs+1] = NULL;

      // Split string into tokens by space
      char *temp = strtok (buff," ");

      // Copy each token into the array of args
      for (int i = 0; temp != NULL; i++) {
        args[i] = malloc (strlen(temp) + 1);
        strcpy(args[i], temp);
        temp = strtok (NULL, " ");
      }

      // Run the arguments with execvp
      if (execvp(args[0], args)) {
        my_exit();
      }
    }

    //  If fid !=0 then we still have the parent... Need to
    //  add specific errors.
    else {
        wait(NULL);
    }

    // Issue the prompt again.
    printf("%s@%s:%s> ", user, host, dir);
  }

  // If fgets == NULL, then exit!
  my_exit();
  return 0;
} 
```

当我将它作为 shell 单独运行时，它工作得很好。当我运行 ./myshell < commands.txt 时，它不起作用。

commands.txt 是：

```
ls -l -a
pwd
ls 
```

但输出是：

```
>Bye!
>Bye!
>Bye!
>Bye!
>Bye!
>Bye!>Bye!
>Bye!
>Bye!
>Bye! 
```

甚至不运行我的命令。有任何想法吗？我认为我的 while 循环非常简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T22:55:03.293

我不知道这是否*是*问题所在，但您（正确地）在评论中提到您必须在`*args`数组中分配“为 NULL 指针加一个”。

但是，您实际上并没有将最后一个指针设置`*args`为 NULL。

`execvp()`不会喜欢的。

这并不能解释为什么重定向输入与非重定向输入之间可能存在差异，除了未定义的行为是混蛋。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:06:55.860

对不起大家 - 原来我的文本文件是来自 Mac 的 TextEdit GUI 的某种疯狂格式。一切都很好。

我非常感谢所有有用的回复

# uinavigationcontroller - 为什么使用 UINavigationController 推送时标签栏项目标签会发生变化？

> ID：12548295
> 
> 赞同：1
> 
> 时间：2012-09-22T22:46:15.690
> 
> 标签：uinavigationcontroller, uitabbarcontroller, uitabbar, title

我用三个选项卡创建了 UITabController。一个 Tab 具有 UINavigationController，它推动三个控制器 A、B 和 C。

当我将 segue 从 A 推到 B 或 B 推到 C 时，我会更改 A、B 和 C 上的标题。更改 A、B 或 C 上的标题也会更改我在主 tabController 中的第三个选项卡项的标题。如何使主控制器上的标签栏项目标签固定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:23:38.247

我有同样的问题，这个线程解决了我的问题：[self.title 设置 navigationController 和 tabBarItem 的标题？为什么？](https://stackoverflow.com/questions/1540718/self-title-sets-navigationcontroller-and-tabbaritems-title-why)

您基本上需要在 UIViewController（由 UINavigationController 显示）中的 viewDidLoad 方法中设置标题，如下所示：

```
self.navigationItem.title = @"Your Title"; 
```

而不是这个

```
self.title = @"Your Title"; 
```

# mysql - MySql - 将数组值（匹配和不匹配）插入数据库匹配列

> ID：12548296
> 
> 赞同：0
> 
> 时间：2012-09-22T22:46:51.313
> 
> 标签：mysql, arrays, for-loop, foreach, pdo

所以我有一个可选服装项目列表作为复选框，可能比下面的 5 个更多。

```
shoes, pants, skirt, socks, jacket //list of possible choices 
```

在所选项目的 jquery 中创建一个逗号分隔的数组。假设选择了以下内容：

```
shoes, socks, jacket //array posted as $_POST['clothes'] 
```

在数据库中，每个客户在衣服表中都有这些选项，衣服项目下有“是”或“否”。但是，服装项目的名称略有不同，但映射到相同的选项：

```
'clothes' table before insert
customer_id  dress_shoes  elegant_pants  long_skirt  ankle_socks  biker_jacket
     1            no            yes           no           no           no 
```

使用 $_POST['clothes']，我试图遍历数组，将数据库中的相应字段更新为“是”，将非对应字段更新为“否”。我很难做到这一点。

```
'clothes' table after insert
customer_id  dress_shoes  elegant_pants  long_skirt  ankle_socks  biker_jacket
     1            yes            no           no          yes          yes 
```

我做了一个 array_intersect 来让项目标记为“是”：

```
$clothesArray = array("shoes", "socks", "jacket"); // Posted clothes
$clothesArrayAll = array("shoes", "pants", "skirt", "socks", "jacket"); // All clothes
$common = array_intersect($clothesArrayAll,$clothesArray);
print_r($common);
Array ( [0] => shoes [3] => socks [4] => jacket ) 
```

我试图以某种方式遍历 $clothesArrayAll，对普通衣服表示“是”，对数组中的所有其他人表示“否”。然后，我尝试通过 PDO 更新“衣服”表，以最有效的方式将每个相应的字段设置为“是”或“否”。在得到上面的普通衣服阵列后，我被卡住了，不知道如何进行。

有人能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:55:51.243

我认为你在正确的轨道上。我只需添加一个包含字段映射的附加数组，例如

```
$mappingArray = array('shoes' => 'dress_shoes', 'socks' => 'ankle_socks', ...); 
```

使用这个数组和前面的数组，您可以循环并根据`$common`字段中的键值相应地设置您的 SQL`$mappingArray`

用示例编辑（可能不是最优化的）：

```
$finalArray = array();

foreach ($mappingArray as $key => $value) {
   $finalArray[$value] = in_array($key, $common) ? 'yes' : 'no';
} 
```

`$finalArray`现在将为与您的数据库表匹配的每个值都有一个是/否语句。

编辑以包含 PDO：我实际上会按如下方式更新上述循环：

```
$finalArray = array();
$sql = "INSERT INTO cloths (" . implode(",", array_values($mappingArray)) . ") VALUES (:" . implode(",:", array_values($mappingArray)) . ")";;
foreach ($mappingArray as $key => $value) {
    $finalArray[":" . $value] = in_array($key, $common) ? 'yes' : 'no';
}

$q = $conn->prepare($sql);
$q->execute($finalArray); 
```

和这个一起飞翔，所以类似的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:03:53.033

为什么不更改您的 HTML 字段名称以匹配您的数据库名称，然后在数据库中设置默认值“否”...

```
$cols='INSERT INTO clothes ';
$values=' VALUES ';

$join='(';
foreach ($_POST as $key=>$val) {
    $cols.=$join . $key;
    $values=$join . ':' . $key;
    $join=',';
}
$qry=$cols . ')' . $values . ')';
$stmt = $dbh->prepare($qry);
foreach ($_POST as $key=>$val) {
    $stmt->bindParam(':' . $key, $_POST[$key]);
} 
```

但是您可能想检查发布的名称是否是有效的列名 - 您可以使用从表中获取列名和类型

```
DESC clothes; 
```

# php - 页面加载由 PHP 触发时保存会话，但在 Javascript 触发时不保存

> ID：12548301
> 
> 赞同：0
> 
> 时间：2012-09-22T22:48:14.620
> 
> 标签：php, javascript, jquery, session, cookies

我正在使用 cURL 登录网站。[编辑：他们设置 cookie 并生成令牌。我抓住他们的令牌。用它做一些计算并登录。这就是保持会话打开很重要的原因。] 我有一个文件可以加载另一个文件。这是在PHP中：

**文件1.php**

```
<?php
session_start();
$_SESSION['var'] = $var;

header("Location: file2.php");

?> 
```

**文件2.php**

```
<?php
session_start();

$var = $_SESSION['var'];

?> 
```

这行得通，但是，我必须使用 Javascript 进行一些计算，然后使用 GET 将这些变量传递给 file2.php（并且有一个变量是会话变量）。所以：

**文件1.php**

```
<?php
session_start();
$_SESSION['var'] = $var;
?>
<script type="text/javascript">
var var1 = 'car';
window.location = "file2.php?var1=" + var1;
</script> 
```

**文件2.php**

```
<?php
session_start();
$var1= $_GET['var1'];
$var2 = $_SESSION['var'];
?> 
```

我尝试`window.location.href`了而不是`window.location` 尝试使用`document.cookie`并尝试将cookie（with `setcookie("PHPSESSID", [string]`）设置为存储在PHPSESSID中的内容（其他变量- JSESSIONID 和`session_id`- 都是NULL）。我尝试将其设置为整个字符串。

我试过了

```
session_name('login_session');
session_set_cookie_params(0, '/');
session_start(); 
```

我在这里找到的：[https](https://stackoverflow.com/a/5438521) ://stackoverflow.com/a/5438521 。在两个页面上的脚本开头。

我还尝试`session_write_close();`在**file1.php**中的 php 脚本末尾。

* * *

更新。我一直在阅读并认为如果我使用 Ajax/jquery，我也许可以让它工作。我试过了：

**文件1.php**

```
<html><head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</script>
</head></html>

<?php
session_start();
$_SESSION['var'] = $var;
?>

<script type="text/javascript">
var var1 = 'car';

 function runLogin() {  
 $.ajax({  
 <strike>type: "GET",</strike>
 type: "POST",  
 url: "file2.php",  
 <strike>data: "var="+var1</strike>
 data: {'var': var1}
 });  
 }

 runLogin();
</script> 
```

**文件2.php**

```
<?php
session_start();
<strike>$var1= $_GET['var1'];</strike>
$var1 = $_REQUEST;
$var2 = $_SESSION['var'];
?> 
```

但是会话仍然丢失。我第一次运行它时，我做了上面的事情。我`include_once('file2.php');`在 session_start() 下的 file1.php 中添加了第二个，在 file2.php 中添加了相反的内容

* * *

解决了：

**文件1.php**

```
<?php
$session = session_id();
$_SESSION['var'] = var;
?>
<script type="text/javascript">
var var1= "<?=$session ?>";

function runLogin(session) {  
 $.ajax({  
type: "POST",  
url: "file2.php",  
data: {'session': session}
 });  
}

runLogin(var1);

</script> 
```

**文件2.php**

```
<?php 
$posted = $_REQUEST;
$sew = $posted['session'];
session_id($sew);
session_start();

$var = $_SESSION['var'];
?> 
```

我搜索了我的历史记录，但找不到我发现这个想法的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:25:24.780

但这不是跟进和becarfull初始化一些值的好习惯`$var`

```
<?php
session_start();
$_SESSION['var'] = $var;
?>

<script type="text/javascript">
var var1 = "<?php echo $_SESSION['var']; ?>";
window.location = "file2.php?var1=" + var1;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:52:14.237

您缺少`$`变量中的： `$_SESSION['var'] = var;`并且`var var1;`永远不会设置

**文件1.php**

```
<?php
session_start();
$_SESSION['var'] = 'your_var_value';
?>
<script type="text/javascript">
window.location = "file2.php?var1=<?php echo $_SESSION['var'];?>";
</script> 
```

**文件2.php**

```
<?php
session_start();
$var1 = (isset($_GET['var1'])?$_GET['var1']:null);
$var2 = (isset($_SESSION['var'])?$_SESSION['var']:null);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T00:58:33.040

您正在使用 cURL 访问 file1.php？cURL 不包含 Javascript 解释器，因此不会执行任何 Javascript。

# iphone - 如何在 ios 设备上将 mov 转换为 mp4

> ID：12548304
> 
> 赞同：6
> 
> 时间：2012-09-22T22:48:33.890
> 
> 标签：iphone, ios, video, ios4, avfoundation

我正在编写应该将 mov 文件转换为 mp4 的 ios 应用程序。有什么方法可以使用 AVFoundation 或类似的东西吗？

我将非常感谢您的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T19:45:19.987

你需要做 AV 媒体转码，还是只是改变容器？标准（非流式传输）MOV 容器将/应该与 MP4 容器兼容（检查来自 iOS 的一些测试文件表明它们是相同的）。因此，您可以将文件重命名为 MP4。这确实假设容器中的媒体受 MP4 容器支持。仅供参考，MP4 的 ISO 规范基于 Quicktime 文件格式。此外，如果您在设备上录制媒体，则可以选择 MP4 作为媒体的容器。

# sqlite - 缺少“14 秒 SQLite 数据库”性能的案例

> ID：12548307
> 
> 赞同：0
> 
> 时间：2012-09-22T22:49:15.873
> 
> 标签：sqlite

我开发了一个使用 SQLite 3.7 ... 数据库的程序，其中有一个相当广泛的写入/读取模块，可以导入、检查和更新数据。这个过程在我的 PC 上需要 14 秒，我对性能感到满意。

我对所有事物都使用事务处理，我的 PC 是带有 18gig ram 的 Intel i7。我没有在数据库中设置任何东西。我使用 SQLite Expert 创建数据库并创建包括表和列的数据结构，并检查是否创建了所有索引。换句话说，一切正常。

我已经将程序/数据库部署到另外 2 台机器上。这 14 秒的过程在其他机器上需要 5 分钟以上。相同的程序，相同的数据，相同的数据库。这些机器是最新的，一台是上周购买的第三代 Intel i7，另一台也很快，所以硬件应该不是问题。

我只是不明白问题可能是什么？是数据库本身吗？我没有在上面设置任何其他内容。记住我运行相同，它需要 14 秒。难道数据库是针对我的电脑“优化”的吗？所以当我把它给别人时它没有优化？

我知道我可以关闭 jurnaling 以获得更好的性能，但这只会加快进程并且仍然会留下问题。

任何想法都会受到欢迎。

编辑：我已经在我的 7yo Dual Athelon 上测试了这个程序，用 3gig 的 ram 在 HDD 上运行 XP，这个过程花了 35 秒。考虑到在可容忍的范围内。我只是不明白是什么让 2 台现代机器需要 5 分钟？我有一个想法，这是一个写入问题，因为使用阅读器它们速度较慢但完全可以接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:10:43.767

*   SQLite 速度受磁盘随机读写的影响最大；任何 SSD 在这方面都比任何旋转磁盘要好得多。
*   每当更改溢出内部缓存时，都必须将它们写入磁盘。您应该使用[`PRAGMA cache_size`](http://www.sqlite.org/pragma.html#pragma_cache_size)将缓存增加到超过默认的 2 MB。
*   必须在每个事务结束时将更改的数据写入磁盘。确保在一个事务中进行尽可能多的更改。
*   如果您的大部分处理涉及临时表或索引，则速度受主磁盘速度的影响。如果您的机器有足够的 RAM，您可以使用[`PRAGMA temp_store`](http://www.sqlite.org/pragma.html#pragma_temp_store).
*   您应该启用[预写日志记录](http://www.sqlite.org/wal.html)。

注意：默认的 SQLite 发行版没有加密。

# arrays - 在数组中查找长度为 k 的所有子集

> ID：12548312
> 
> 赞同：38
> 
> 时间：2012-09-22T22:50:04.343
> 
> 标签：arrays, algorithm, subset, powerset

给定一组`{1,2,3,4,5...n}`n 个元素，我们需要找到长度为 k 的所有子集。

例如，如果 n = 4 且 k = 2，`output`则`{1, 2}, {1, 3}, {1, 4}, {2, 3}, {2, 4}, {3, 4}`.

我什至不知道如何开始。我们不必使用诸如 next_permutation 等内置库函数。

需要 C/C++ 或 Java 中的算法和实现。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-22T23:02:52.203

递归是您完成此任务的朋友。

对于每个元素-“猜测”是否在当前子集中，并使用猜测和可以从中选择的较小超集递归调用。对“是”和“否”的猜测都这样做 - 将导致所有可能的子集。
将自己限制在一定的长度可以很容易地在停止子句中完成。

Java代码：

```
private static void getSubsets(List<Integer> superSet, int k, int idx, Set<Integer> current,List<Set<Integer>> solution) {
    //successful stop clause
    if (current.size() == k) {
        solution.add(new HashSet<>(current));
        return;
    }
    //unseccessful stop clause
    if (idx == superSet.size()) return;
    Integer x = superSet.get(idx);
    current.add(x);
    //"guess" x is in the subset
    getSubsets(superSet, k, idx+1, current, solution);
    current.remove(x);
    //"guess" x is not in the subset
    getSubsets(superSet, k, idx+1, current, solution);
}

public static List<Set<Integer>> getSubsets(List<Integer> superSet, int k) {
    List<Set<Integer>> res = new ArrayList<>();
    getSubsets(superSet, k, 0, new HashSet<Integer>(), res);
    return res;
} 
```

调用：

```
List<Integer> superSet = new ArrayList<>();
superSet.add(1);
superSet.add(2);
superSet.add(3);
superSet.add(4);
System.out.println(getSubsets(superSet,2)); 
```

将产生：

```
[[1, 2], [1, 3], [1, 4], [2, 3], [2, 4], [3, 4]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T03:51:04.000

使用集合的位向量表示，并使用类似于 std::next_permutation 对 0000.1111 所做的算法（nk 个零，k 个）。每个排列对应于大小为 k 的子集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-19T17:00:05.910

这是蟒蛇。对不起西班牙语;）

```
from pprint import pprint
conjunto = [1,2,3,4, 5,6,7,8,9,10]
k = 3
lista = []
iteraciones = [0]
def subconjuntos(l, k):
    if k == len(l):
        if not l in lista:
            lista.append(l)
        return
    for i in l:
        aux = l[:]
        aux.remove(i)
        result = subconjuntos(aux, k)
        iteraciones[0] += 1
        if not result in lista and result:
            lista.append( result)

subconjuntos(conjunto, k)
print (lista)
print ('cant iteraciones: ' + str(iteraciones[0])) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-24T20:43:47.263

查看我的解决方案

```
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Set;

 public class Subset_K {
public static void main(String[]args)
{
    Set<String> x;
    int n=4;
    int k=2;
    int arr[]={1,2,3,4};
    StringBuilder sb=new StringBuilder();
    for(int i=1;i<=(n-k);i++)
        sb.append("0");
    for(int i=1;i<=k;i++)
        sb.append("1");
    String bin=sb.toString();
    x=generatePerm(bin);
    Set<ArrayList <Integer>> outer=new HashSet<ArrayList <Integer>>();
    for(String s:x){
        int dec=Integer.parseInt(s,2);
        ArrayList<Integer> inner=new ArrayList<Integer>();
        for(int j=0;j<n;j++){
            if((dec&(1<<j))>0)
                inner.add(arr[j]);
        }
        outer.add(inner);
    }
    for(ArrayList<?> z:outer){
        System.out.println(z);
    }
}

    public static Set<String> generatePerm(String input)
{
    Set<String> set = new HashSet<String>();
    if (input == "")
        return set;

    Character a = input.charAt(0);

    if (input.length() > 1)
    {
        input = input.substring(1);

        Set<String> permSet = generatePerm(input);

        for (String x : permSet)
        {
            for (int i = 0; i <= x.length(); i++)
            {
                set.add(x.substring(0, i) + a + x.substring(i));
            }
        }
    }
    else
    {
        set.add(a + "");
    }
    return set;
}
} 
```

我正在研究用于测试目的的 4 元素集并使用 k=2。我尝试做的是最初生成一个二进制字符串，其中设置了 k 位而未设置 nk 位。现在使用这个字符串，我找到了这个字符串的所有可能排列。然后使用这些排列，我输出集合中的相应元素。如果有人能告诉我这个问题的复杂性，那就太好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-30T18:24:37.520

```
 #include<iostream>
   #include<cstdio>
   #include<vector>
   using namespace std;
   vector<int> v;
   vector<vector<int> > result;

  void subset(int arr[],int k,int n,int idx){
  if(idx==n)
 return;

if(k==1){
    for(int i=idx;i<n;i++)
     {
        v.push_back(arr[i]);
        result.push_back(v);
        v.pop_back();
     }
}

 for(int j=idx;j<n;j++) {
  v.push_back(arr[j]);
  subset(arr,k-1,n,j+1);
  v.pop_back();
  }
 }

int main(){
int arr[] = {1,2,3,4,5,6,7};
int k = 4;
int n =sizeof(arr)/sizeof(arr[0]);
subset(arr,k,n,0);

for(int i = 0;i<result.size();i++)
 { 
  for(int j = 0;j<result[i].size();j++)
   {
     cout << result[i][j] << " ";
   }
   cout << endl;
 }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-08T05:25:09.470

另一个有趣的解决方案。

```
#include<bits/stdc++.h>
using namespace std;
long factorial(int n) { return (n==1|| n==0|| n < 0) ? 1 : n *factorial(n-1) ;}
void printS(int set[],int n,int k) 
{ 

   long noofsubset =  factorial(n) / (factorial(n-k)*factorial(k));
   bitset<32> z ((1 << (k)) - 1);
   string s = z.to_string();
    int i = 0;
        while(i<noofsubset)
        { 
                  for (int j = 0; j  < n;j++)
                  {
                      if(s[(32-n)+j] == '1')
                        cout << set[j]<<" ";
                  }
                    cout << endl;
                next_permutation(s.begin(),s.end());
                i++;
        } 
}

void printSubsetsOfArray(int input[], int size) {
    int k  = 3;
  printS(input,size,k)  ;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-23T09:39:16.487

@amit 票数最高的答案略有改进：

即使组合没有任何机会达到所需长度，他的代码也会不断检查组合。我们可以更早地停止创建组合：

例如，对于 [1,2,3,4,5,6,7,8,9,10] ，长度 = 8 ，代码仍然会尝试长度为 7,6,5,4,3,2,1 的所有组合尽管它们显然会被丢弃，仅在 idx 到达列表末尾时才停止。

当我们已经知道我们构建的集合 + 可选的剩余数字仍然太短时，我们可以通过提前停止来改善运行时间。

改变 ：

```
//unsuccessful stop clause
if (idx == superSet.size()) return; 
```

进入：

```
// unsuccessful stop clause
Integer maxFutureElements = superSet.size() - idx;
if (current.size() + maxFutureElements < length) return; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-27T06:06:27.490

请检查我的解决方案：-

```
private static void printPermutations(List<Integer> list, int subSetSize) {
    List<Integer> prefixList = new ArrayList<Integer>();
    printPermutations(prefixList, list, subSetSize);
}

private static void printPermutations(List<Integer> prefixList, List<Integer> list, int subSetSize) {
    if (prefixList.size() == subSetSize) {
        System.out.println(prefixList);
    } else {
        for (int i = 0; i < list.size(); i++) {
            Integer removed = list.remove(i);
            prefixList.add(removed);
            printPermutations(prefixList, list, subSetSize);
            prefixList.remove(removed);
            list.add(i, removed);
        }
    }
} 
```

这类似于字符串排列：-

```
private static void printPermutations(String str) {
    printAllPermutations("", str);
}

private static void printAllPermutations(String prefix, String restOfTheString) {
    int len = restOfTheString.length();
    System.out.println(prefix);
    for (int i = 0; i < len; i++) {
        printAllPermutations(prefix + restOfTheString.charAt(i), restOfTheString.substring(0, i) + restOfTheString.substring(i + 1, len));
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-04T18:14:50.347

这是 F# 中的一个实现：

```
// allSubsets: int -> int -> Set<Set<int>>
let rec allSubsets n k =
    match n, k with
    | _, 0 -> Set.empty.Add(Set.empty)
    | 0, _ -> Set.empty
    | n, k -> Set.union (Set.map (fun s -> Set.add n s) (allSubsets (n-1) (k-1)))
                        (allSubsets (n-1) k) 
```

您可以在 F# REPL 中尝试：

```
> allSubsets 3 2;;

val it : Set<Set<int>> = set [set [1; 2]; set [1; 3]; set [2; 3]]

> allSubsets 4 2;;

val it : Set<Set<int>> = set [set [1; 2]; set [1; 3]; set [1; 4]; set [2; 3]; set [2; 4]; set [3; 4]] 
```

这个 Java 类实现了相同的算法：

```
import java.util.HashSet;
import java.util.Set;

public class AllSubsets {

    public static Set<Set<Integer>> allSubsets(int setSize, int subsetSize) {
        if (subsetSize == 0) {
            HashSet<Set<Integer>> result = new HashSet<>();
            result.add(new HashSet<>());
            return result;
        }
        if (setSize == 0) {
            return new HashSet<>();
        }
        Set<Set<Integer>> sets1 = allSubsets((setSize - 1), (subsetSize - 1));
        for (Set<Integer> set : sets1) {
            set.add(setSize);
        }
        Set<Set<Integer>> sets2 = allSubsets((setSize - 1), subsetSize);
        sets1.addAll(sets2);
        return sets1;
    }
} 
```

如果您不喜欢 F# 或 Java，请访问此网站。它列出了各种编程语言中特定问题的解决方案：

[http://rosettacode.org/wiki/Combinations](http://rosettacode.org/wiki/Combinations)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-10T05:33:03.700

JavaScript 实现：

```
var subsetArray = (function() {
  return {
    getResult: getResult
  }

  function getResult(array, n) {

    function isBigEnough(value) {
      return value.length === n;
    }

    var ps = [
      []
    ];
    for (var i = 0; i < array.length; i++) {
      for (var j = 0, len = ps.length; j < len; j++) {
        ps.push(ps[j].concat(array[i]));
      }
    }
    return ps.filter(isBigEnough);
  }
})();

 var arr = [1, 2, 3, 4,5,6,7,8,9];
 console.log(subsetArray.getResult(arr,2)); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-27T07:46:51.023

这是python中的迭代版本。它的本质是 increment_counters() 函数，它返回所有可能的组合。我们知道它需要被调用 C(n,r) 次。

```
def nchooser(n,r):
    """Calculate the n choose r manual way"""
    import math
    f = math.factorial
    return f(n) / f(n-r) / f(r)

def increment_counters(rc,r,n):
    """This is the essense of the algorithm. It generates all possible indexes.
    Ex: for n = 4, r = 2, rc will have values (0,1),(0,2),(0,3),(1,2),(1,3),(2,3).
    You may have better understanding if you print all possible 35 values for
    n = 7, r = 3."""

    rc[r-1] += 1     # first increment the least significant counter
    if rc[r-1] < n:  # if it does not overflow, return
        return

    # overflow at the last counter may cause some of previous counters to overflow
    # find where it stops (ex: in n=7,r=3 case, 1,2,3 will follow 0,5,6)
    for i in range(r-2,-1,-1): # from r-2 to 0 inclusive
        if rc[i] < i+n-r:
            break
    # we found that rc[i] will not overflow. So, increment it and reset the
    # counters right to it. 
    rc[i] += 1
    for j in range(i+1,r):
        rc[j] = rc[j-1] + 1

def combinations(lst, r):
    """Return all different sub-lists of size r"""
    n = len(lst)
    rc = [ i for i in range(r) ]  # initialize counters
    res = []
    for i in range(nchooser(n,r)): # increment the counters max possible times 
        res.append(tuple(map(lambda k: lst[k],rc)))
        increment_counters(rc,r,n)

    return res 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-09T20:23:40.670

这是我认为 Simple 所说的 Java 版本，使用幂集中所有集合的二进制表示。这类似于 Abhiroop Sarkar 的做法，但我认为当您仅表示二进制值时，布尔数组比字符串更有意义。

```
private ArrayList<ArrayList<Object>> getSubsets(int m, Object[] objects){
    // m = size of subset, objects = superset of objects
    ArrayList<ArrayList<Object>> subsets = new ArrayList<>();
    ArrayList<Integer> pot = new ArrayList<>();
    int n = objects.length;
    int p = 1;
    if(m==0)
        return subsets;
    for(int i=0; i<=n; i++){
        pot.add(p);
        p*=2;
    }
    for(int i=1; i<p; i++){
        boolean[] binArray = new boolean[n];
        Arrays.fill(binArray, false);
        int y = i;
        int sum = 0;
        for(int j = n-1; j>=0; j--){
            int currentPot = pot.get(j);
            if(y >= currentPot){
                binArray[j] = true;
                y -= currentPot;
                sum++;
            }
            if(y<=0)
                break;
        }
        if(sum==m){
            ArrayList<Object> subsubset = new ArrayList<>();
            for(int j=0; j < n; j++){
                if(binArray[j]){
                    subsubset.add(objects[j]);
                }
            }
            subsets.add(subsubset);
        }
    }

    return subsets;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-12T11:39:20.673

如果您正在寻找迭代器模式的答案，那么您就可以了。

```
public static <T> Iterable<List<T>> getList(final Iterable<? extends T> list) {

    List<List<T>> listOfList = new ArrayList<>();

    for (T t: list)
        listOfList.add(Collections.singletonList(t));

    return listOfList;
}
public static <T> Iterable<List<T>> getIterable(final Iterable<? extends T> list, final int size) {

    final List<T> vals = new ArrayList<>();
    int numElements = 0;
    for (T t : list) {
        vals.add(t);
        numElements++;
    }

    if (size == 1) {
        return getList(vals);
    }
    if (size == numElements) {
        return Collections.singletonList(vals);
    }

    return new Iterable<List<T>>() {

        @Override
        public Iterator<List<T>> iterator() {
            return new Iterator<List<T>>() {

                int currPos = 0;                    
                Iterator<List<T>> nextIterator = getIterable(
                    vals.subList(this.currPos + 1, vals.size()), size - 1).iterator();

                @Override
                public boolean hasNext() {
                    if ((this.currPos < vals.size()-2) && (this.currPos+size < vals.size()))
                        return true;
                    return false;
                }

                @Override
                public List<T> next() {
                    if (!nextIterator.hasNext()) {
                        this.currPos++;
                        nextIterator = getIterable(vals.subList(this.currPos+1, vals.size()), size-1).iterator();
                    }
                    final List<T> ret = new ArrayList<>(nextIterator.next());
                    ret.add(0, vals.get(this.currPos));
                    return ret;
                }
            };
        }
    };
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-20T12:41:32.280

这是一个简短的python算法。我没有使用任何预定义的函数，所以我相信它可以很容易地翻译成 Java/C

```
def subs(l,n):

if(len(l)<k):

return []

elif(k==0):

return [[]]

else:

lis=[[l[0]]+b for b in (subs(l[1:],k-1))]

return (lis+subs(l[1:],k)) 
```

这里 l 是列表 [1,2,...,m]

# python - 将 Blob 绑定到数据存储实体

> ID：12548315
> 
> 赞同：0
> 
> 时间：2012-09-22T22:50:26.507
> 
> 标签：python, google-app-engine, google-cloud-datastore, image-uploading, blobstore

我一直在用头撞墙，由于某种原因，我无法将 Google App Engine 的不同方面联系在一起以使其工作。

基本上我想让用户将照片上传到 Blobstore，我在下面的代码中工作，然后我想将 BlobKey 放入将存储在数据库实体中的列表中。所以这是我上传图像的代码，在这里我可以在哪里获取 BlobKey 以便我可以存储它？

```
class MainHandler(BlogHandler):
    def get(self):
        upload_url = blobstore.create_upload_url('/upload')
        self.response.out.write('<html><body>')
        self.response.out.write('<form action="%s" method="POST" enctype="multipart/form-data">' % upload_url)
        self.response.out.write("""Upload File: <input type="file" name="file"><br> <input type="submit" name="submit" value="Submit"> </form></body></html>""")
        #there is a lot more code in here where I get all the following info but it isn't relevant
        location_db = Location(
                    description=description,
                    submitter=submitter,
                    user_id=user_id, 
                    title=title,
                    locationtype = locationtype)
            #This is what I would like to do but I don't know where to get thr BlobKey
            location_db.blobRefs.append(BlobKey)
            location_db.put()

        for b in blobstore.BlobInfo.all():
            self.response.out.write('<li><a href="/serve/%s' % str(b.key()) + '">' + str(b.filename) + '</a>')

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        upload_files = self.get_uploads('file')
        blob_info = upload_files[0]
        self.redirect('/main')

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
    def get(self, blob_key):
        blob_key = str(urllib.unquote(blob_key))
        if not blobstore.get(blob_key):
            self.error(404)
        else:
            self.send_blob(blobstore.BlobInfo.get(blob_key), save_as=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T23:41:23.887

这里：

```
blob_info = upload_files[0]
self.redirect('/serve/%s' % blob_info.key()) 
```

我想就是这样

```
blob_info.key() 
```

你不见了。抓住它，把它塞进你的清单。文档还指出：

> 在此处理程序中，您可以将 blob 键与应用程序数据模型的其余部分一起存储。Blob 键本身仍可从数据存储中的 Blob 信息实体访问。 [https://developers.google.com/appengine/docs/python/blobstore/overview#Serving_a_Blob](https://developers.google.com/appengine/docs/python/blobstore/overview#Serving_a_Blob)

# android - 如何为每个设备生成 GCM 的唯一注册 ID？

> ID：12548316
> 
> 赞同：0
> 
> 时间：2012-09-22T22:50:37.370
> 
> 标签：android, google-cloud-messaging

我必须`GCM`在大约 10 个或更多的模拟器上测试我的应用程序的多播。为此，我需要创建 10 个可以为我提供唯一注册 ID 的模拟器。

**我尝试使用谷歌帐户**克隆一个模拟器并将 userdata-qemu.img 加载到新的模拟器中。在这种情况下，新模拟器返回的注册 id 与旧模拟器相同。

我在两个单独创建的具有相同谷歌帐户的模拟器上测试了该应用程序，在这种情况下它们返回不同的注册 ID。当然`GCM`不会为此使用帐户信息。

我了解注册 ID`GCM`是从“**应用程序包和设备**”生成的。Google 如何唯一标识设备或模拟器实例。

还尝试更改 emulator-user.ini 文件中提供的模拟器的 uuid，但没有用。

当然我可以手动进行，但每次都太麻烦了。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:11:11.497

ID 生成的确切算法是一个实现细节——它没有被披露，谷歌可以随时更改它，依赖它是不明智的。

# types - 为什么 (Set -> Set) 不能有 Set 类型？

> ID：12548317
> 
> 赞同：25
> 
> 时间：2012-09-22T22:50:59.647
> 
> 标签：types, lambda-calculus, agda

在 Agda 中， a 的类型以如下方式`forall`确定：`Set1``Set1``Set``A``Set`

```
Set → A
A → Set
Set → Set 
```

但是，以下具有类型`Set`：

```
A → A 
```

我知道如果`Set`有 type `Set`，会有矛盾，但我看不出，如果上述三个术语中的任何一个有 type `Set`，我们就会有矛盾。这些可以用来证明False吗？它们可以用来证明`Set : Set`吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-23T13:13:01.470

很明显，这`Set : Set`会引起矛盾，比如[罗素悖论](http://www.cs.nott.ac.uk/~txa/g53cfr/l20.html/l20.html)。

现在考虑`() -> Set`where`()`是[unit type](https://en.wikipedia.org/wiki/Unit_type)。这显然与 同构`Set`。所以若然`() -> Set : Set`也`Set : Set`。事实上，如果`A`我们有任何有人居住，`A -> Set : Set`那么我们可以使用一个常量函数：`Set``A -> Set`

```
wrap1 : {A : Set} -> Set -> (A -> Set)
wrap1 v = \_ -> v 
```

并在需要时获取值

```
unwrap1 : {A : Set}(anyInhabitant : A) -> (A -> Set) -> Set
unwrap1 anyInhabitant f = f anyInhabitant 
```

所以我们可以重建罗素悖论，就好像我们有`Set : Set`.

* * *

这同样适用于`Set -> Set`，我们可以`Set`换成`Set -> Set`：

```
data Void : Set where

unwrap2 : (Set -> Set) -> Set
unwrap2 f = f Void

wrap2 : Set -> (Set -> Set)
wrap2 v = \_ -> v 
```

在这里，我们可以使用任何类型的`Set`代替`Void`。

* * *

我不知道如何做类似的事情`Set -> A`，但直觉上这似乎比其他类型更有问题，也许其他人会知道。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T21:17:29.070

我认为理解这一点的最佳方法是将这些事物视为集合论集合，而不是 Agda `Set`。假设你有`A = {a,b,c}`. 函数的一个示例`f : A → A`是一组对，假设`f = { (a,a) , (b,b) , (c,c) }`它满足一些对本次讨论无关紧要的属性。也就是说，`f`' 元素与 ' 元素是同一类东西`A`——它们只是值，或者成对的值，没有什么太大的“大”。

现在考虑 a 函数`F : A → Set`。它也是一组对，但它的对看起来不同：`F = { (a,A) , (b,Nat) , (c,Bool) }`让我们说。每对的第一个元素只是 的一个元素`A`，所以很简单，但每对的*第二个*元素是*`Set`*! 也就是说，第二个元素本身就是一个“大”的东西。所以`A → Set`不可能设置，因为如果是，那么我们应该能够有一些`G : A → Set`看起来像`G = { (a,G) , ... }`. 只要我们有这个，我们就可以得到罗素悖论。所以我们说`A → Set : Set1`。

这也解决了是否`Set → A`也应该 in`Set1`而不是 的问题`Set`，因为 in 中的函数与`Set → A`中的函数一样`A → Set`，只是`A`s 在对的右边，`Set`s 在左边。

# google-maps - Jquery mobile 不遵循来自另一个 JQM 页面的链接

> ID：12548318
> 
> 赞同：0
> 
> 时间：2012-09-22T22:51:03.410
> 
> 标签：google-maps, jquery-mobile, jquery-ui-map

我正在使用 jquery-ui-map 插件，当我单击按钮时，我的测试页面 (test.html) 会正确加载 Google 地图。如果从另一个 jquery 移动页面加载，这个相同的 test.html 不起作用。我做错了什么或我错过了什么？接下来是重要代码：

标头中的 Javascript（如基本地图的示例）：

```
var mobileDemo = { 'center': '57.7973333,12.0502107', 'zoom': 10 };
$('#basic_map').live('pageinit', function() {
  demo.add('basic_map', function() {
    $('#map_canvas').gmap({
      'center': mobileDemo.center, 
      'zoom': mobileDemo.zoom,
      'disableDefaultUI':true,
      'callback': function() {
    var self = this;
    self.addMarker({'position': this.get('map').getCenter() }).click(function() {
      self.openInfoWindow({ 'content': 'Hello World!' }, this);
      });
    }});
  }).load('basic_map');
});

$('#basic_map').live('pageshow', function() {
  demo.add('basic_map', function() { $('#map_canvas').gmap('refresh'); }).load('basic_map');
}); 
```

还有 html（对不起，我不能发布 HTML 代码，因为它是被解释的，但链接在下面）：

[http://www.medlifesolutions.com.mx/locations/mobile/test.html](http://www.medlifesolutions.com.mx/locations/mobile/test.html)

正如我所说，如果我直接在浏览器中编写 test.html 但如果来自另一个页面，这将非常有效：

[http://www.medlifesolutions.com.mx/locations/mobile/main.php](http://www.medlifesolutions.com.mx/locations/mobile/main.php)

它只是忽略“点击”或触摸按钮以显示地图。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:06:19.747

我在您的代码中看到的一个问题是使用`live`. 建议更换`live`为`on`.

# c# - caliburn micro 向对话框发送数据

> ID：12548324
> 
> 赞同：0
> 
> 时间：2012-09-22T22:52:05.797
> 
> 标签：c#, caliburn.micro, coroutine

对不起，我对这个框架还很陌生，但我开始理解它和它的内部工作原理。

简单地说我想要的是：shellview 从视图上发生的事情接收事件，记录问题并显示一个对话框，通知用户发生了错误。

为了创建对话框，我使用[了这个](http://caliburnmicro.codeplex.com/discussions/250303)线程，它没有任何问题，但是我不知道如何在视图/视图模型上设置属性消息。

帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:16:17.013

我会直接使用[WindowManager](http://www.mindscapehq.com/blog/index.php/2012/03/13/caliburn-micro-part-5-the-window-manager)。或者，您可以修改代码以创建一个`ShowDialog`构造函数，该构造函数采用对话框视图模型的现有实例。

事实上，代码有点乱，`ShowDialog`应该是通用的并采用对话视图模型的类型，因此不需要强制转换即可获得对话结果。

# php - 注意：未定义的索引 - 用 isset 解决？

> ID：12548332
> 
> 赞同：5
> 
> 时间：2012-09-22T22:53:54.693
> 
> 标签：php, magento

```
Notice: Undefined index: extension  in /var/www/.. on line 187

    //185 - $f_name = $this->filename;
    //186 - $path_parts = pathinfo($f_name);
    //187 - $file_ext = $path_parts['extension']; 
```

* * *

经过一些谷歌搜索后，我看到很多 Isset 被使用。但我很怀疑，在这种情况下如何使用它？它甚至可以解决问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T22:56:10.683

是的，您可以[`isset`](http://www.php.net/isset)在这种情况下使用。在尝试访问之前，您首先检查是否设置了密钥。如果需要，我会使用三元运算符来设置默认值。

```
$file_ext = isset($path_parts['extension']) ? $path_parts['extension'] : null; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-02T18:08:08.617

从 php 7.0 开始，您可以使用 null 合并运算符

```
$file_ext = $path_parts['extension'] ?? null; 
```

[https://www.php.net/manual/en/migration70.new-features.php](https://www.php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-op)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T23:00:08.217

如果路径有扩展名，pathinfo 只会返回“扩展名”索引，否则不会返回此索引。

应该使用简单的检查来确定路径是否有索引，例如：

```
if(!empty($path_parts['extension'])) {
  // Extension exists
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T22:56:19.407

`$f_name`没有扩展名，所以`$path_parts['extension']`没有设置。

[pathinfo](http://php.net/manual/en/function.pathinfo.php)，看示例 #2

# javascript - 通过 AJAX 进行动画无限滚动：返回 JSON 还是 HTML？

> ID：12548333
> 
> 赞同：0
> 
> 时间：2012-09-22T22:53:56.417
> 
> 标签：javascript, html, json, infinite-scroll

我正在尝试创建一个无限滚动页面 - 有点类似于这样的 tumblr 存档[页面](http://rickerlrthemes.tumblr.com/archive)。我理解我必须通过服务器调用加载内容的概念，但我不知道如何像在 Tumblr 中那样实现这种“动画加载”设计。

我不想知道确切的代码，只想知道解决方案的整体概念。那么做这样的事情的最佳做法是什么？

我应该从服务器得到什么：一堆**JSON 数据**或一个**完整的 HTML 页面**？

我尝试解码上面的 Tumblr 页面，并且在我的网络流量页面上看到，在每个滚动事件中都有一个 POST 请求，它返回一个*完整*的HTML 页面，该页面有自己的 JavaScript 和 CSS 内容！

我猜动画逻辑在这个 JavaScript 内容中。

但我对这种方法有两个问题：

*   当我从服务器获取完整的 HTML 页面（其中也包含新页面）时，如何丢弃当前显示的 HTML 文档并设置新的？
*   从性能的角度来看，每次都返回一个完整的 HTML 文档是不是太糟糕了？因为完整的文档也将包含存档的先前“页面”的结果。还是我想错了？

从服务器返回纯 JSON 结果不是更好吗？（它必须在客户端上解析，但我猜它对网络流量更友好）

如果返回 JSON 会更好，为什么 Tumblr 以另一种方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:35:15.513

不发送大量不会使用的数据肯定是有益的。但是，如果您的服务器有很多资源，您可以在服务器上而不是客户端上进行一些预处理。这意味着，您可以发送一个 HTML 片段，而不是 JSON，而该片段将被添加。此外，如果您的 HTML 结构非常复杂，您不希望实现两次；一次在 HTML 中，一次在 Javascript 中。

Tumblr 的工作方式可能是因为他们不想向服务器代码库添加更多内容，而是将工作卸载到客户端。**由于一次只发送一页，因此开销**与页数相同。客户端可以获取完整的 HTML，通过 DOM 操作找到相应的元素并将其放置在某个地方。

事实上，这就是 AutoPager 插件所做的：它从用户那里学习“下一个”链接和页面正文，然后从毫无戒心的服务器获取额外的*完整*页面并将其内容插入页面（并读取下一页 url） .

简而言之：

*   JSON 的好处是带宽使用率低。
*   HTML 片段的好处是对客户端处理能力的要求低，几乎没有代码重复。
*   完整 HTML 的好处是服务器不需要关心它是在提供第一页还是其他任何页面。

# ios - 过滤自定义对象的 NSMutable 数组

> ID：12548340
> 
> 赞同：0
> 
> 时间：2012-09-22T22:55:19.153
> 
> 标签：ios, nspredicate

我有一个包含 Episode 类型的自定义对象的 NSMutableArray。这些对象中的每一个都有多个 NSStrings 作为属性。现在我想过滤数组以检查我是否已经有这个情节（从 XML 解析）并更新它或创建一个新的情节对象。

我使用以下代码：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"weblink = %@", currentEpisode.weblink];

NSArray* hits = [appDelegate.episodesList filteredArrayUsingPredicate:predicate]; 
```

currentEpisode 是我从 XML 中解析出来的剧集，我想检查一下，episodeList 是我的 NSMutableArray 和 Episode 对象。weblink 是包含 URL 的 NSString 属性之一。

当我检查网络链接时，一切正常。但是 Podcastfeeds 中的 URL 可以更改，因此我想检查另一个名为 kuhid 的属性，它是提要中提供的唯一标识符。'kuhid' 也是一个 NSString（例如：644ED540-EDCA-4D4F-882E-4B3106DDAAB3）。当我检查“kuhid”时，谓词永远不会匹配，我得到重复。这两个属性都是 NSStrings，都正确合成。如果我尝试我的其他 NSString（例如标题）属性之一，则相同。

有谁知道为什么这只适用于网络链接而不适用于我的任何其他属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:43:27.847

您确定您的字符串完全匹配，即您没有前导或尾随空格，或小写与大写，或使用不同的破折号（例如长破折号与短破折号）或不可见字符？

尝试记录`NSData`两个字符串的表示，以便在调试器中逐字节比较它们，以确保

# http - 如何解决在 302 重定向上将 POST 更改为 GET 的问题？

> ID：12548341
> 
> 赞同：7
> 
> 时间：2012-09-22T22:55:41.653
> 
> 标签：http, post, https, get, http-status-code-302

我网站的某些部分只能通过 HTTPS 访问（而不是整个网站 - 安全性与性能妥协），并且如果通过纯 HTTP 发送请求，则通过 302 重定向对安全部分的请求强制执行 HTTPS。

问题在于所有主要浏览器，如果您在 POST 上执行 302 重定向，它将自动切换到 GET（afaik 这应该只发生在 303 上，但似乎没有人关心）。另一个问题是所有 POST 数据都丢失了。

那么，除了接受通过 HTTP 保护站点的 POST 并随后重定向或更改代码负载以确保所有用于保护网站安全部分的帖子从一开始就通过 HTTPS 之外，我还有什么选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T23:05:39.673

你是对的，这是唯一可靠的方法。POST 请求应该从一开始就通过 https 连接。此外，建议将导致此类 POST 的表单也通过 https 加载。通常，在您拥有 https 连接之后的第一个表单是登录表单。所有浏览器对通过 http 和 https 加载的页面应用不同的安全限制。因此，这降低了在拥有一些敏感数据的上下文中执行一些恶意脚本的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T23:27:01.917

我认为这就是 307 的用途。 [RFC2616](http://www.ietf.org/rfc/rfc2616.txt)确实说：

> 如果收到 307 状态代码以响应 GET 或 HEAD 以外的请求，则用户代理不得自动重定向请求，除非用户可以确认，因为这可能会改变发出请求的条件。

但它对 302 也说了同样的话，我们知道那里会发生什么。

不幸的是，您遇到的问题比浏览器没有按照 RFC 所说的方式处理响应代码更大，这与 HTTP 的工作方式有关。简化后，过程如下所示：

1.  浏览器发送请求
2.  浏览器表明它已经发送了整个请求
3.  服务器发送响应

大概您的用户在他们的帖子中发送了一些敏感信息，这就是您希望他们使用加密的原因。但是，如果您向用户未加密的 POST（第 1 步）发送重定向响应（第 3 步），则用户已将*所有*敏感信息未加密发送出去。

可能是您不考虑用户发送的敏感信息，而只考虑您发送的响应敏感。然而，事实证明这是没有意义的。敏感信息应该只对某些个人可用，并且用于验证用户身份的信息必然是请求的一部分，这意味着您的响应现在可供任何人使用。因此，如果响应是敏感的，那么请求也是敏感的。

似乎您将要更改大量代码以确保所有安全帖子都使用 HTTPS（您可能一开始就应该这样编写它们）。您可能还想重新考虑仅在 HTTPS 上托管您的部分网站的决定。您确定您的基础架构无法处理使用所有 HTTPS 连接吗？我怀疑它可以。如果没有，可能是升级的时候了。

# ruby-on-rails - Rails 3.2.8 模型 before_save 在繁重的服务器负载下无法正常工作

> ID：12548348
> 
> 赞同：3
> 
> 时间：2012-09-22T22:56:34.033
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2, ruby-1.9.3

几天前，我们的网站流量激增。当我们扩大规模以处理负载时，我们的单个服务器已达到极限并且请求开始超时。在此期间，一些请求仍在创建记录。问题来自以下模型：

```
class List < ActiveRecord::Base
  before_save :set_published_at
  def set_published_at
    if published? && published_changed?
      self.published_at = Time.now
    end
  end
end 
```

出于某种原因，在此期间发布的一些列表已发布=true 但已发布_at=nil。

此模型上还有许多其他回调和一个观察者，但它们都不会影响 published_at 属性。这发生在集中到五分钟窗口的五条记录上。

publish_at 属性如何为 null 并且模型仍然使用 publish=true 保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:33:19.150

也许出于某种原因`published? && published_changed?`，评估到`false`您承受重负载时。

# python - 从 python pandas 中的 DataFrame 中删除特定行

> ID：12548349
> 
> 赞同：5
> 
> 时间：2012-09-22T22:56:42.073
> 
> 标签：python, pandas

我有一个大的 .txt 格式的数据。我想删除一些行并将其余数据转换为浮点数。我想用`'X'`or删除行`'XX'`，其余的我应该转换为浮点数，类似的数字`4;00.1`应该转换为`4.001`文件看起来像这个示例：

```
0,1,10/09/2012,3:01,4;09.1,5,6,7,8,9,10,11
1,-0.581586,11/09/2012,-1:93,0;20.3,739705,,0.892921,5,,6,7
2,XX,10/09/2012,3:04,4;76.0,0.183095,-0.057214,-0.504856,NaN,0.183095,12
3,-0.256051,10/09/2012,9:65,1;54.9,483293,0.504967,0.074442,-1.716287,7,0.504967,0.504967
4,-0.728092,11/09/2012,0:78,1;53.4,232247,4.556,0.328062,1.382914,NaN,4.556,4
5,4,11/09/2012,NaN,NaN,6.0008,NaN,NaN,NaN,6.000800,6.000000,6.000800
6,X,11/09/2012,X,X,5,X,8,2,1,17.000000,33.000000
7,,11/09/2012,,,,,,6.000000,5.000000,2.000000,2.000000
8,4,11/09/2012,7:98,3;04.5,5,6,3,7.000000,3.000000,3.000000,2
9,6,11/09/2012,2:21,4;67.2,5,2,2,7,3,8.000000,4.000000 
```

我将它读到 DataFrame 并选择行

```
from pandas import *
from csv import *
fileName = '~/data.txt'
colName = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l']
df = DataFrame(read_csv(fileName, names=colName))
print df[df['b'].isin(['X','XX',None,'NaN'])].to_string() 
```

最后一行的输出只给了我：

```
>>> print df[df['b'].isin(['X','XX',None,'NaN'])].to_string()
    b           c     d       e         f          g         h   i         j   k   l
a                                                                                   
2  XX  10/09/2012  3:04  4;76.0  0.183095  -0.057214 -0.504856 NaN  0.183095  12 NaN
6   X  11/09/2012     X       X  5.000000          X  8.000000   2  1.000000  17  33 
```

不拿起第 7 行，我想通过所有 df 不仅是一列（原始文件非常大）。

目前我使用如下转换，但需要先删除不需要的行才能将其应用于所有 df.

```
convert1 = lambda x : x.replace('.', '')
convert2 = lambda x : float(x.replace(';', '.'))
newNumber = convert2(convert1(df['e'][0])) 
```

选择行后，我想从 df 中删除它们，我尝试`df.pop()`但它仅适用于列而不适用于行。我尝试命名行但不走运。在这个特定的 .txt 文件中，我应该以行 [0,3,8,9] 中的新 df 结束，其中列“c”作为日期格式，“d”作为时间格式，其余作为浮点数。我想弄清楚很长一段时间，但不知道该搬到哪里，在熊猫中是否有可能（可能应该是）还是我需要更改为`ndarray`或其他什么？感谢您的意见

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T01:33:09.643

您的原始过滤器的问题是它检查 'NaN' 而不是 'NaN' `numpy.nan`，这是默认情况下解析的空字符串。如果要过滤所有列，以便只获取没有元素为“X”或“XX”的行，请执行以下操作：

```
In [45]: names = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l']

In [46]: df = pd.read_csv(StringIO(data), header=None, names=names)

In [47]: mask = df.applymap(lambda x: x in ['X', 'XX', None, np.nan])

In [48]: df[-mask.any(axis=1)]
Out[48]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 5 entries, 0 to 9
Data columns:
a    5  non-null values
b    5  non-null values
c    5  non-null values
d    5  non-null values
e    5  non-null values
f    5  non-null values
g    5  non-null values
h    5  non-null values
i    5  non-null values
j    4  non-null values
k    5  non-null values
l    5  non-null values
dtypes: float64(6), int64(1), object(5) 
```

# c - Sprintf 影响格式化中使用的其他字符串？

> ID：12548350
> 
> 赞同：0
> 
> 时间：2012-09-22T22:56:48.937
> 
> 标签：c, printf

出于某种原因，我的`sprintf`调用影响了我用来格式化新字符串的字符串。这是我的代码：

```
string foo = "bar";
char salt[] = "";
sprintf(salt, "%c%c", foo[0], foo[1]); 
```

`foo`当我在 之后尝试打印时`sprintf`，它没有任何价值。如果我在 sprintf 之前打印它，那很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:58:23.087

您的结果缓冲区（`salt`）太小而无法容纳该值。

```
string foo = "bar";
char salt[3] = "";
sprintf(salt, "%c%c", foo[0], foo[1]); 
```

# c# - html代码的动态加载

> ID：12548352
> 
> 赞同：2
> 
> 时间：2012-09-22T22:56:48.937
> 
> 标签：c#, jquery, asp.net

在我的 Asp.net 网站中，我有一个从代码隐藏动态加载的转发器。在中继器外部的代码中，我有一个“添加”按钮。单击时，我想从转发器异步添加相同的控件。单击“添加”按钮功能`NewRow()`被调用：

```
function NewRow(){
    var guid = jQuery.guid++;
    var panel = $('#MainContent_Panel1');
    var textboxText = $('#MainContent_TextBox');

    panel.after("<span LabelGroup="+i+">Test Text:</span>
                 <span TextGroup="+i+">"+textboxText.val()+"<br /></span>
                 <span LabelGroup="+i+">Test Text : </span>
                 <input  type='text' customID="+guid+"/>
                 <input type='button' Class='Button' ButtonGroup='"+i+"' value='Button Text' /></br>
   ");

   i++;
} 
```

我讨厌我目前正在做的事情，因为有太多硬编码的代码。有什么办法可以让它更有活力吗？

有什么方法可以更精确地将我新添加的行放置在中继器等动态控制中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:36:53.273

您可以尝试使用 mustache.js 之类的模板引擎，也可以像这样手动完成：

在您的 HTML 中，包含一个 script 标签，type="text/html"。这将告诉渲染引擎不要尝试渲染内容。在此标记内，您将为每一列编写模板代码。

我将每个变量部分标记为 $variable：

*   $i
*   $文本框文本
*   $指导

```
​&lt;script type="text/html"​​​​​​​​​​​​​​​​ id="template">

  <span LabelGroup='$i'>Test Text:</span>
  <span TextGroup='$i'>$textboxText<br /></span>
  <span LabelGroup='$i'>Test Text : </span>
  <input  type='text' customID='$guid'/>
  <input type='button' Class='Button' ButtonGroup='$i' value='Button Text' /></br>

</script>

<!-- And here, some testing elements -->

​&lt;input type="button" id="New" value="New Row">
<input type="text" id="MainContent_TextBox" value="Some Value">

<div id="MainContent_Panel1"></div>​​​​​​​ 
```

然后，在您的 javascript 中，您只需要获取 script 标签的 html 内容，然后将每个 $variable 替换为要使用的值。请注意，调用 .replace 时应使用 /g 来替换模板中 $variable 的所有出现。

```
i = 1;

$("#New").click(NewRow);

function NewRow(){
    var guid = jQuery.guid++;
    var panel = $('#MainContent_Panel1');
    var textboxText = $('#MainContent_TextBox').val();

    var html = $("#template").html()
        .replace(/\$i/g,i)
        .replace(/\$guid/g,guid)
        .replace(/\$textboxText/g,textboxText);

    panel.append(html);

    i++;
​}​ 
```

使用这种方法，您将 html 与 js 代码分开。如果您必须保持这一点，那么将来会对您有所帮助。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:10:37.080

您可以像这样即时创建标签：

```
var $span1 = $("<span />").text("your text").attr("TextGroup", i);
...
var $text = $('<input type="text" />').attr("customID", guid);
...
var $button = $('<input type="button" />').addClass("Button").val("Button text").attr("ButtonGroup", i); 
```

然后只需将它们添加到控制容器中

```
$panel.append($span1).append(...); 
```

[在 Fiddler 上试用](http://jsfiddle.net/jupaol/TKjW3/)

# wordpress - Wordpress 使用 slug 获取分类名称

> ID：12548353
> 
> 赞同：10
> 
> 时间：2012-09-22T22:56:58.623
> 
> 标签：wordpress, taxonomy

如何仅使用分类 slug 获得分类 ID 或名称？

我想我正在寻找`get_term_by()`分类法的等价物。

编辑：我必须指定我正在尝试获取 WooCommerce 产品属性的税号。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-05-10T14:22:07.527

WordPress 确实提供了从其 slug 中获取分类信息的功能。

```
$taxonomy_details = get_taxonomy( $slug ); 
```

这会将分类详细信息作为对象返回，其中包括分类的各种标签。例如，这是标准类别分类法调用时返回的对象，例如`get_taxonomy( 'category' );`

```
stdClass Object
(
    [labels] => stdClass Object
        (
            [name] => Categories
            [singular_name] => Category
            [search_items] => Search Categories
            [popular_items] => 
            [all_items] => All Categories
            [parent_item] => Parent Category
            [parent_item_colon] => Parent Category:
            [edit_item] => Edit Category
            [view_item] => View Category
            [update_item] => Update Category
            [add_new_item] => Add New Category
            [new_item_name] => New Category Name
            [separate_items_with_commas] => 
            [add_or_remove_items] => 
            [choose_from_most_used] => 
            [not_found] => No categories found.
            [menu_name] => Categories
            [name_admin_bar] => category
        )

    [description] => 
    [public] => 1
    [hierarchical] => 1
    [show_ui] => 1
    [show_in_menu] => 1
    [show_in_nav_menus] => 1
    [show_tagcloud] => 1
    [show_in_quick_edit] => 1
    [show_admin_column] => 1
    [meta_box_cb] => post_categories_meta_box
    [rewrite] => Array
        (
            [hierarchical] => 1
            [slug] => category
            [with_front] => 1
            [ep_mask] => 512
        )

    [query_var] => category_name
    [update_count_callback] => 
    [_builtin] => 1
    [cap] => stdClass Object
        (
            [manage_terms] => manage_categories
            [edit_terms] => manage_categories
            [delete_terms] => manage_categories
            [assign_terms] => edit_posts
        )

    [name] => category
    [object_type] => Array
        (
            [0] => post
        )

    [label] => Categories
) 
```

来源：[https ://codex.wordpress.org/Function_Reference/get_taxonomy](https://codex.wordpress.org/Function_Reference/get_taxonomy)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-04T16:29:44.353

由于接受的答案没有回答这个问题，即使这个问题很老，我也在这里提供一个答案。

第三个（必需）参数`get_term_by()`是分类本身的名称，因此不能使用此函数。

`get_taxonomies()`也不能使用，因为那样你就必须匹配整个重写数组，你可能无权访问。

所以我发现的唯一方法是使用私有数组`$wp_taxonomies`：

```
function get_tax_name_from_slug($slug){
  foreach ($wp_taxonomies as $key => $value) {
    if ($value->rewrite['slug'] === $slug){
        return $key;
    }
  }
} 
```

我真的希望 Wordpress 能够提供一种方法来做到这一点，而无需访问其内部数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-07T13:33:51.390

```
$args = array(
                    'post_type' => 'awards',
                    'post_status' => 'publish',
                    'posts_per_page' => 4,
                     'orderby' => 'ID',
                     'order' => 'DESC',
                    'tax_query' => array(
                        'relation' => 'AND',
                        array(
                            'taxonomy' => 'awards_categories',
                            'field' => 'slug',
                            'terms' => $award_solution
                        ),
                        array(
                            'taxonomy' => 'year',
                            'field' => 'slug',
                            'terms' => $yearvalue
                        ),
                    )
                ); 
```

我们如何使用 wp select 查询来获取它

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-09-22T22:58:18.940

```
<?php 
    $term = get_term_by('slug', $slug, 'category'); 
    $name = $term->name; 
    $id = $term->term_id;
?> 
```

# chat - Meteor：如何在聊天室实现私信？

> ID：12548354
> 
> 赞同：1
> 
> 时间：2012-09-22T22:57:06.420
> 
> 标签：chat, meteor, privacy

实际上，我对用于完成此任务的技术比真正构建聊天系统更感兴趣（这是一个很好的具体示例）。我看到两个部分：

1.  客户需要在某个地方注册，然后我们需要每个客户的唯一 ID。
2.  服务器应该只能从另一个客户端向客户端发送一些东西。

对于第一部分，我不知道如何获得这个唯一的 id。可能使用新的流星身份验证套件？

对于第二部分，我考虑构建一个每个客户端的集合，其中一个且只有一个客户端可以访问，但这听起来很沉重，而且我认为这并不是 Meteor 的最佳实践。然后我想在消息中添加“发件人”和“字段”（参见常规[聊天示例](https://github.com/AVGP/meteor.js-chat-example)）。这样做可以，但我想知道他们没有隐私。自定义发布是否会返回过滤后的查找，或者这样做也有风险，即其他客户也会获得这些项目吗？就像是：

```
Meteor.publish("message", function (clientID) {
  return Messages.find({"dest":clientID }, {});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:53:48.360

最新的 Meteor 待办事项示例使用新的身份验证系统来识别私有待办事项条目。我想您可以使用相同的机制在类似聊天的系统中识别私人消息的发起者和接收者。

当然，过滤某人看到的消息需要在服务器端进行过滤以维护隐私。

# grails - 在 JBoss 6.1.0 上部署 Grails 2.1.0 应用程序没有成功

> ID：12548356
> 
> 赞同：2
> 
> 时间：2012-09-22T22:57:32.290
> 
> 标签：grails, deployment, jboss

我正在尝试在 JBoss 6.1.0 上部署 Grails 2.1.0 应用程序，但没有成功。我安装了[JBoss AS Plugin](http://grails.org/plugin/jbossas)，但出现以下错误。我也尝试了[这里](https://stackoverflow.com/questions/12027088/grails-2-app-wont-deploy-on-jboss-beancreationexception)建议的解决方案，但错误仍然存​​在。有没有人遇到过这个问题或知道如何克服它？

```
19:30:23,818 ERROR [[/painel]] Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.NullPointerException
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) [:3.1.0.RELEASE]
at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:126) [:2.1.0]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [:3.1.0.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [:3.1.0.RELEASE]
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [:3.1.0.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [:3.1.0.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [:3.1.0.RELEASE]
at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:707) [:3.1.0.RELEASE]
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449) [:3.1.0.RELEASE]
at org.codehaus.groovy.grails.commons.spring.DefaultRuntimeSpringConfiguration.getApplicationContext(DefaultRuntimeSpringConfiguration.java:153) [:2.1.0]
at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:170) [:2.1.0]
at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:127) [:2.1.0]
at org.codehaus.groovy.grails.web.context.GrailsConfigUtils.configureWebApplicationContext(GrailsConfigUtils.java:121) [:2.1.0]
at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:104) [:2.1.0]
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [:3.1.0.RELEASE]
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3369) [:6.1.0.Final]
at org.apache.catalina.core.StandardContext.start(StandardContext.java:3828) [:6.1.0.Final]
at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:294) [:6.1.0.Final]
at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:146) [:6.1.0.Final]
at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:476) [:6.1.0.Final]
at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118) [:6.1.0.Final]
at org.jboss.web.deployers.WebModule.start(WebModule.java:95) [:6.1.0.Final]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_35]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_35]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_35]
at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_35]
at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157) [:6.0.0.GA]
at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96) [:6.0.0.GA]
at org.jboss.mx.server.Invocation.invoke(Invocation.java:88) [:6.0.0.GA]
at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:271) [:6.0.0.GA]
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:670) [:6.0.0.GA]
at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206) [:2.2.0.SP2]
at $Proxy41.start(Unknown Source)   at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:53) [:2.2.0.SP2]
at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:41) [:2.2.0.SP2]
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:301) [:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.system.ServiceController.doChange(ServiceController.java:671) [:6.1.0.Final (Build SVNTag:JBoss_6.1.0.Final date: 20110816)]
at org.jboss.system.ServiceController.start(ServiceController.java:443) [:6.1.0.Final (Build SVNTag:JBoss_6.1.0.Final date: 20110816)]
at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:189) [:6.1.0.Final]
at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:102) [:6.1.0.Final]
at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:49) [:6.1.0.Final]
at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:63) [:2.2.2.GA]
at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:55) [:2.2.2.GA]
at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) [:2.2.2.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1832) [:2.2.2.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1550) [:2.2.2.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1571) [:2.2.2.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1491) [:2.2.2.GA]
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.deployers.plugins.deployers.DeployersImpl.change(DeployersImpl.java:1983) [:2.2.2.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:1076) [:2.2.2.GA]
at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:679) [:2.2.2.GA]
at org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.process(MainDeployerPlugin.java:106) [:6.1.0.Final]
at org.jboss.profileservice.dependency.ProfileControllerContext$DelegateDeployer.process(ProfileControllerContext.java:143) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileDeployAction.deploy(ProfileDeployAction.java:151) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileDeployAction.installActionInternal(ProfileDeployAction.java:94) [:0.2.2]
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.profileservice.dependency.ProfileActivationWrapper$BasicProfileActivation.start(ProfileActivationWrapper.java:190) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileActivationWrapper.start(ProfileActivationWrapper.java:87) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileActivationService.activateProfile(ProfileActivationService.java:215) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileActivationService.activate(ProfileActivationService.java:159) [:0.2.2]
at org.jboss.profileservice.bootstrap.AbstractProfileServiceBootstrap.activate(AbstractProfileServiceBootstrap.java:112) [:0.2.2]
at org.jboss.profileservice.resolver.BasicResolverFactory$ProfileResolverFacade.deploy(BasicResolverFactory.java:87) [:0.2.2]
at org.jboss.profileservice.bootstrap.AbstractProfileServiceBootstrap.start(AbstractProfileServiceBootstrap.java:91) [:0.2.2]
at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceBootstrap.start(BasicProfileServiceBootstrap.java:132) [:6.1.0.Final]
at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceBootstrap.start(BasicProfileServiceBootstrap.java:56) [:6.1.0.Final]
at org.jboss.bootstrap.impl.base.server.AbstractServer.startBootstraps(AbstractServer.java:827) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-6]
at org.jboss.bootstrap.impl.base.server.AbstractServer$StartServerTask.run(AbstractServer.java:417) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-6]
at java.lang.Thread.run(Thread.java:662) [:1.6.0_35] 
```

# php - 数组字段为所有字段保存相同的值

> ID：12548357
> 
> 赞同：0
> 
> 时间：2012-09-22T22:57:52.107
> 
> 标签：php, arrays, duplicates, field

当我将图像和“有序”字段保存到数据库时，它会保存图像，但每个“有序”字段都保存相同的值。关于如何修复它以便“有序”字段正确保存我为每个字段输入的值的任何想法？

例如：

```
image_id | 产品编号 | 订购 | 图片 | 缩略图
-------------------------------------------------- ------------------
第593章 94 | 35 | a23145b.jpg | a231458.jpg
-------------------------------------------------- ------------------
第592章 94 | 35 | 1348352.jpg | 1348358.jpg

```

这是我目前所拥有的：

```
 if (isset($_FILES['product_image'])) {

        $files = array();

        foreach ($_FILES['product_image'] as $key => $values) {

            foreach ($values as $i => $value)
                $files[$i][$key] = $value;

        }

        foreach ($files as $file) {

            if (!empty($file['name'])) {

                $image = $upload->upload_image($file);
                $thumb = $upload->upload_image($file);

                $values = array(
                    'product_id'    => $product_id, 
                    'image'         => $image,
                    'thumbnail'     => $thumb,
                    'ordered' =>  $_POST['ordered'][0]
                );  

                $db->insert(config_item('cart', 'table_product_images'), $values);

            }

        }

    } 
```

和字段的js

```
var image_row = 0;

$('#add_image').click(function() {

    html  = '<tr id="image' + image_row + '">';
    html += '<td><input type="file" name="product_image[' + image_row + ']" /></td>';
    html += '<td><input type="text" name="ordered[' + image_row + ']" /></td>';
    html += '<td><a href="#" id="remove_' + image_row + '" class="remove_image button orange">Remove</a></td>';
    html += '</tr>';

    $('#images table > tbody').append(html);

    image_row++;

    return false;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:59:52.020

那是因为你正在使用`$_POST['ordered'][0]`. 索引应该是动态的。将您的代码更改为：

```
foreach ($files as $key => $file) {

        if (!empty($file['name'])) {

            $image = $upload->upload_image($file);
            $thumb = $upload->upload_image($file);

            $values = array(
                'product_id'    => $product_id, 
                'image'         => $image,
                'thumbnail'     => $thumb,
                'ordered' =>  $_POST['ordered'][$key]
            );  

            $db->insert(config_item('cart', 'table_product_images'), $values);

        }

    } 
```

# javascript - Telerik MVC，组合框更改项目的 CSS

> ID：12548360
> 
> 赞同：0
> 
> 时间：2012-09-22T22:58:23.833
> 
> 标签：javascript, asp.net-mvc-3, combobox, telerik-mvc

我的 ASP.NET MVC-3 应用程序正在使用[以前版本](http://www.telerik.com/community/forums/aspnet-mvc/general/telerik-mvc-extensions-resources.aspx)的[Telerik MVC Extensions combobox](http://demos.telerik.com/aspnet-mvc/combobox)。我正在尝试更改列表中某个项目的样式。

这是模型：

```
public class Person
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public bool DisplayBold { get; set; }
        public string Value
        {
            get
            {
                return string.Format("{0}|{1}", this.Id, this.DisplayBold.ToString());
            }
        }
    } 
```

控制器：

```
var people = new List<Person>();
people.Add(new Person { Id = 1, Name = "John Doe", DisplayBold = true });
people.Add(new Person { Id = 2, Name = "Jayne Doe", DisplayBold = false });
ViewData["people"] = people;
return View(); 
```

组合框：

```
<% Html.Telerik().ComboBox()
   .Name("ComboBox")
           .BindTo(new SelectList((IEnumerable<Person>)ViewData["people"], "Id", "Name"))
           .ClientEvents(events => events
        .OnChange("ComboBox_onChange")
        .OnLoad("ComboBox_onLoad")
        .OnOpen("ComboBox_OnOpen"))
    .Render();
%> 
```

我尝试了以下方法，它确实改变了第一项：

```
var item = combobox.dropDown.$items.first();
item.addClass('test'); 
```

但是，当我尝试更改 CSS 时：

```
var combobox = $(this).data('tComboBox');
$.each(combobox.dropDown.$items, function (idx, item) {
    if (combobox.data[idx].Value.split('|')[1] == 'True') {
        alert(item);
        $(item).addClass('test');

    }
}); 
```

那没起效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:00:07.217

## 这是 user373721 将其标记为已回答之后的版本

当我重写[我之前的答案](https://stackoverflow.com/revisions/673dad4e-d86d-4947-bff5-1c54743906dc/view-source)并浏览论坛时，user373721 将[我的旧版本](https://stackoverflow.com/revisions/673dad4e-d86d-4947-bff5-1c54743906dc/view-source)标记为已回答。

很抱歉，我[搜索了telerik 的论坛，](http://www.telerik.com/community/forums/search.aspx?rtf=Forum&fid=358&start=160&sid=1&q=ComboBox()%2bBindTo%2b)看看你如何挂钩数据绑定来影响[css](http://www.telerik.com/community/forums/search.aspx?rtf=Forum&fid=554&start=0&sid=1&q=setting%2bcss%2bclass%2bof%2bcombobox%2bitem)。我找不到适合您的问题的匹配项。

一种混乱的解决方法（在这里变得绝望）可能是将 html 添加到应该显示为粗体的名称中：

```
public class Person
{
    public string NameText { get; }
    {
        get
        {
            if(this.DisplayBold) {
                 return "<b>" + this.Name + "</b>";
            } else
                 return this.Name; 
        }
    }
} 
```

因此，您将绑定到 NameText，而不是绑定到 Name。您可能需要处理 html 转换。

在[我最后一次搜索](http://www.telerik.com/community/forums/search.aspx?rtf=Forum&fid=554&start=0&sid=1&q=custom%2bcss)中，我发现[了一个可能有帮助的帖子](http://www.telerik.com/community/forums/aspnet-mvc/combobox/feature-request-combobox-item-image-icons-custom-css.aspx)。现在我找到[了一个可能来自你的帖子](http://www.telerik.com/community/forums/aspnet-mvc/combobox/custom-attributes-on-dropdownlist-items.aspx)

*   顺便说一句，我在论坛中读到有几个错误修复可能对您的目标很重要。 **您使用的是哪个telerik mvc-release？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:12:22.447

# 使用新的 mvc-telerik 扩展 (kendo) 设置样式的解决方案

嗨，基于[Telerik mvc comboBox 使用](http://demos.kendoui.com/web/combobox/index.html)中的示例，我使用了模板方法。在 jsfiddle，您可以找到新的 Telerik mvc 扩展 (kendo)[的工作示例](http://jsfiddle.net/nDS3S/16/)。

使用模板根据底层数据源设置样式：

```
<script id="template" type="text/x-kendo-tmpl">
  # if (data.displayBold) { #
    <span style="font-weight: bolder;">${ data.name }</span>
  # } else { #
    <span style="font-weight: normal;">${ data.name }</span>
  # } #
</script> 
```

在 document.ready 上绑定组合框：

```
 // use of templates
    $("#titles").kendoComboBox({
         dataTextField: "name",
         dataValueField: "Id",
         // define custom template
         template: kendo.template($("#template").html()),
         dataSource: musicians
                }); 
```

dataSource 是一个对象数组，类似于您的 person 类：

```
var musicians= [{ id: 1, name: "Melody Gardot", displayBold: true }
 , { id: 2, name: "Lynn Withers", displayBold: false }
 , { id: 3, name: "Blue Ray", displayBold: true }    
 , { id: 4, name: "Club de Belugas", displayBold: true }    
 , { id: 5, name: "Mizzy Li", displayBold: false }    
]; 
```

hth

# javascript - 确定输入是否是一组值的一部分

> ID：12548362
> 
> 赞同：0
> 
> 时间：2012-09-22T22:58:35.080
> 
> 标签：javascript, html

我正在寻找一些关于完成手头任务的最佳方式的建议。我允许用户编写一个十六进制操作码程序，代表 14 个类似汇编的函数。我需要“错误检查”我的用户程序，以确保他们输入的程序只包含我的 14 个操作码列表中的操作码。有人可以建议我完成这样的任务的最佳做法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:03:21.127

根据您的用户正在编写的“程序”的格式，有很多不同的方法可以解析程序并确定操作码。假设您只有他们程序中的操作码列表（即：字符串列表，每个代表一个操作码），您可以快速验证每个操作码的有效性：

```
is_valid_opcode = function(opcode) {
    var valid_opcodes = ["a023", "bcdd", ... ];
    return valid_opcodes.indexOf(opcode) > -1;
} 
```

如果您确实需要验证每个程序的语法，您可以考虑实现一个[parser](http://en.wikipedia.org/wiki/Parser)。

# ios - MKCircle-添加/删除覆盖

> ID：12548364
> 
> 赞同：1
> 
> 时间：2012-09-22T22:58:58.667
> 
> 标签：ios, mkoverlay

想象一下，我有 6 个圆圈。我的计时器在开始时调用前 2 个圆圈并将它们覆盖在地图视图上。然后在 2 秒后，它会调用其他圈子并将它们添加到地图视图中。我的问题是如何删除以前的叠加层。我想看到例如雷达地图的平滑过渡。

简而言之，它想删除以前的叠加层并添加新的叠加层而不闪烁！非常感谢提前！！

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize mapView;
@synthesize timer;
@synthesize circle1,circle2,circle3,circle4,circle5,circle6;

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    CLLocationCoordinate2D zoomLocation1;

zoomLocation1.latitude=29.830071;
zoomLocation1.longitude=-95.319099;
circle1 = [MKCircle circleWithCenterCoordinate:zoomLocation1 radius:15000];
circle1.title=@"first level";

CLLocationCoordinate2D zoomLocation2;
zoomLocation2.latitude=29.830071;
zoomLocation2.longitude=-95.319099;
circle2 = [MKCircle circleWithCenterCoordinate:zoomLocation2 radius:4000];
circle2.title=@"first level";

CLLocationCoordinate2D zoomLocation3;
zoomLocation3.latitude=29.830071;
zoomLocation3.longitude=-95.319099;
circle3 = [MKCircle circleWithCenterCoordinate:zoomLocation3 radius:6000];
circle3.title=@"second level";

CLLocationCoordinate2D zoomLocation4;
zoomLocation4.latitude=29.830071;
zoomLocation4.longitude=-95.319099;
circle4 = [MKCircle circleWithCenterCoordinate:zoomLocation4 radius:18000];
circle4.title=@"second level";

CLLocationCoordinate2D zoomLocation5;
zoomLocation5.latitude=29.830071;
zoomLocation5.longitude=-95.319099;
circle5 = [MKCircle circleWithCenterCoordinate:zoomLocation5 radius:1000];
circle5.title=@"third level";

CLLocationCoordinate2D zoomLocation6;
zoomLocation6.latitude=29.830071;
zoomLocation6.longitude=-95.319099;
circle6 = [MKCircle circleWithCenterCoordinate:zoomLocation6 radius:13000];
circle6.title=@"third level";

    MKCoordinateRegion viewRegion=MKCoordinateRegionMakeWithDistance(zoomLocation1, 60*1609, 60*1609);

MKCoordinateRegion adjustedRegion=[mapView regionThatFits:viewRegion];

[mapView setRegion:adjustedRegion animated:YES];
mapView.mapType=MKMapTypeStandard;
[mapView setDelegate:(id)self];
i=0;
}

- (void)viewDidUnload
{
[self setMapView:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)drawButton:(id)sender {
timer = [NSTimer scheduledTimerWithTimeInterval:(2.0) target:self     selector:@selector(addingOverlay) userInfo:nil repeats:YES];

}

- (void)addingOverlay {

i=i+1;    
switch(i%3)
{
    case 1:
        [mapView removeOverlays: [mapView overlays]];
        [mapView addOverlay:circle1];
        [mapView addOverlay:circle2];
        break;
    case 2:
        [mapView removeOverlays: [mapView overlays]];
        [mapView addOverlay:circle3];
        [mapView addOverlay:circle4];
        break;
    case 3:
        [mapView removeOverlays: [mapView overlays]];
        [mapView addOverlay:circle5];
        [mapView addOverlay:circle6];
        break;

}

}

-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay> )overlay
{
MKCircleView *circleView = [[MKCircleView alloc] initWithOverlay:overlay];
if ([overlay.title isEqualToString:@"first level"]) 
{
circleView.strokeColor = [UIColor redColor];
circleView.lineWidth = 2;
circleView.fillColor=[UIColor yellowColor];
}
else if([overlay.title isEqualToString:@"second level"])
{
circleView.strokeColor = [UIColor whiteColor];
circleView.lineWidth = 2;
circleView.fillColor=[UIColor blackColor];
}
else{
circleView.strokeColor = [UIColor greenColor];
circleView.lineWidth = 2;
circleView.fillColor=[UIColor redColor];

}

return circleView;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:52:03.047

我刚刚[发布了一个类似问题的答案](https://stackoverflow.com/a/12537971/119114)。

它有一个函数，我使用 ( `drawRangeRings`) 绘制**两个**圆圈。在我的示例中，两个圆的中心坐标相同，但半径值和颜色不同。如果需要，您可以轻松更改代码以对每个圆使用不同的中心坐标。

基本上，我`drawRangeRings`在中心坐标发生变化时调用，它**会删除**原来的两个圆，并在不同的位置绘制两个**新圆。**

如果这不是您所需要的，请告诉我。

当我在我的应用程序中使用它时，我没有看到任何闪烁。

# ruby-on-rails - 使用 haml 在 erb 行上打印附加信息

> ID：12548367
> 
> 赞同：0
> 
> 时间：2012-09-22T22:59:34.287
> 
> 标签：ruby-on-rails, haml, erb

我有这个：

```
<h1 class="left"><%= pluralize @player_to_team_histories_count.count, "Player" %> Found 
```

（注意“发现”一词的添加）

我该如何在haml中做到这一点？

```
%h1.left= pluralize(@player_to_team_histories_count.count, "Player") Found 
```

抱怨`Found`不是一个定义的常量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:02:30.693

哎呀，问，你会弄明白的：

```
%h1.left= "#{pluralize(@player_to_team_histories_count.count, 'Player')} Found" 
```

# ruby-on-rails - 如何获取排队（尚未工作）Resque 工作人员的有效负载/参数？

> ID：12548373
> 
> 赞同：0
> 
> 时间：2012-09-22T23:00:52.293
> 
> 标签：ruby-on-rails, background-process, resque

我有一个带有 Resque 的 rails 应用程序。如果一个工人失败了，我想杀死所有与模型相关的工人，这产生了那个工人。

我知道我可以得到 Resque.workers 但遍历它们会显示 :idle 用于排队的工人。

执行 Resque.queues 会将队列作为数组返回，我可以获得它们的大小，但是如何访问正在等待的工作人员？

我想要类似的东西：

```
 parent_id = 999
 Resque.queues.each do |q|
  q.workers.each do |w|
    if w.job.payload.args[0] == parent_id.to_s?
      #kill worker
    end
  end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T02:14:06.027

`Resque::Worker.working`应该给你一个所有非空闲工人的集合。您可以遍历它们，并调用`shutdown!`要关闭的工作人员。我会`puts`先让`worker.job`每个`worker`人看看它的结构，这样你就会知道如何检查它的论点是什么。所以它应该是这样的

```
Resque::Worker.working.each do |worker|
  worker.shutdown! if worker.job["something"]["maybe_something_else"] == parent_id.to_s
end 
```

# ruby-on-rails - 如何使 lib 模块方法在项目范围内可用并且特定于 Ruby on Rails 中的类？

> ID：12548376
> 
> 赞同：0
> 
> 时间：2012-09-22T23:01:17.703
> 
> 标签：ruby-on-rails

例如，我想创建一个`current_server_host`返回应用程序当前运行的当前主机的方法。

库/实用程序.rb：

```
module Utility
  def current_server_host
    request.env['HTTP_HOST']
  end
end 
```

我如何使它在项目范围内可用，我不需要包含任何东西，但可以通过调用 `Utility.current_server_host`？

如何使其特定于我需要调用的类（模型/控制器/视图）`include`？

请回答 RoR 3.2+。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:05:13.300

要使实用程序方法可用作另一个类中的类方法，请使用扩展：

```
class Widget
  extend Utility
end

# provides
Widget.current_server_host 
```

ruby 模块可以以与扩展类相同的方式扩展自身：

```
module Utility
  extend self

  def current_server_host
    request.env['HTTP_HOST']
  end
end

# provides
Utility.current_server_host 
```

如果要为类的实例提供 Utility 方法，请使用 include：

```
class Widget
  include Utility
end

widget = Widget.new
widget.current_server_host 
```

# java - 从 servlet 转发到 jsp 导致表单提交错误

> ID：12548382
> 
> 赞同：2
> 
> 时间：2012-09-22T23:02:55.570
> 
> 标签：java, jsp, session, servlets

我正在转发到一个 jsp，它显示了一个表格和一个由 jstl sql 标记填充的评论表单。

问题是如果我使用表格可以正常工作`response.sendRedirect("comments.jsp");`

但是因为我需要保留页面之间的会话信息，所以我想使用 `request.getRequestDispatcher("comments.jsp").forward(request, response);` 它来触发帖子表单并将后续帖子重定向到 servlet url。

登录Servlet

```
public class LoginServlet extends HttpServlet {
    Connection connection = null;
    PreparedStatement ptmt = null;
    ResultSet resultSet = null;
    User user = null;
    boolean fail = true;

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String email = request.getParameter("email");
        String password = request.getParameter("password");
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        if (null != email && null != password) {
            try {
                connection = ConnectionFactory.getInstance().getConnection();
                user = new User();
                String queryString = "SELECT * FROM USERINFO WHERE EMAIL=?";
                ptmt = connection.prepareStatement(queryString);
                ptmt.setString(1, email);
                resultSet = ptmt.executeQuery();
                resultSet.next();
                user.setEmail(resultSet.getString("EMAIL"));
                ...                    
                user.setSecret3(resultSet.getString("SECRET3"));
            } catch (SQLException e) {
                System.out.println(e.getMessage());
            } finally {
            }
        }
        if (null != user.getPassword() && user.getPassword().equals(password)) {
            request.setAttribute("user",user);
            request.getRequestDispatcher("comments.jsp").forward(request, response);  
//            response.sendRedirect("comments.jsp");  

        } 
```

评论.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Comments</title>
    </head>
    <body>
        <sql:setDataSource var="dataSource" driver="org.apache.derby.jdbc.ClientDriver"
                           url="jdbc:derby://localhost:1527/mp1"
                           user="app"  password="app"/>

        <sql:setDataSource var="dataSource2" driver="org.apache.derby.jdbc.ClientDriver"
                           url="jdbc:derby://localhost:1527/mp1"
                           user="app"  password="app"/>

        <H2>Comments</H2>

        <sql:query dataSource="${dataSource}" sql="SELECT * FROM COMMENTS" var="comments" />
        <table border=1>
            <c:forEach var="row" items="${comments.rows}">
                <tr>
                    <c:forEach var="col" items="${row}">
                        <td><c:out value="${col.value}" /></td>
                    </c:forEach>  
                </tr>
            </c:forEach>
        </table>  

        <form method="post">
            <table>
                <tr>
                    <td>Enter Email</td>
                    <td><input type="text" name="EMAIL"></td>
                </tr>
                <tr>
                    <td>Enter Comment</td>
                    <td><input type="text" name="COMMENT"></td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="submit" value="submit"></td>
                </tr>
            </table>
        </form>
        <c:if test="${pageContext.request.method=='POST'}">
            <c:catch var="exception">
                <sql:update dataSource="${dataSource2}" var="updatedTable">
                    INSERT INTO 
                    COMMENTS (EMAIL,COMMENT) 
                    VALUES (?, ?)
                    <sql:param value="${param.EMAIL}" />
                    <sql:param value="${param.COMMENT}" />
                </sql:update>
                <c:if test="${updatedTable>=1}">
                    <c:redirect url="/comments.jsp"/>
                </c:if>
            </c:catch>
            <c:if test="${exception!=null}">
                <c:out value="Unable to add comment." />
            </c:if>
        </c:if>
    </body>
</html> 
```

顺便说一句，这是一个家庭作业，老师希望我们学习如何以旧方式完成。因此，安全性和使用更好的技术并不是真正的问题。

PS。我通过分离评论并将评论添加到单独的页面中解决了这个问题。也许更好的解决方案是使用会话而不是对象传输请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:49:20.407

1.  重定向和转发都应该保留会话，因为 cookie 支持会话（在大多数情况下）。

2.  您的表单没有`action`参数，因此其行为取决于浏览器当前 URL（表单被发布到当前 URL 而不是在操作中定义），并且当前 URL 在重定向和转发的情况下是不同的。

# c - 为什么我在使用 Make 和 Emacs 时会出现此错误？

> ID：12548384
> 
> 赞同：0
> 
> 时间：2012-09-22T23:03:39.973
> 
> 标签：c, emacs, makefile

我有一个 C 程序如下：

```
#include<stdio.h>

void main()
{
 printf("Hello");

} 
```

文件名是linkedlist.c

和makefile在同一目录下如下

```
build: linkedlist.c
       gcc -Wall -g -pedantic linkedlist.c -o linkedlist
run:
     ./linkedlist 
```

我首先做 Mx compile 然后 make build 然后是 Mx compile ->make run 输出如下：

```
-*- mode: compilation; default-directory: "/home/amey/test/" -*-
Compilation started at Sat Sep 22 16:59:13

make run
./linkedlist
Hello make: *** [run] Error 5

Compilation exited abnormally with code 2 at Sat Sep 22 16:59:13 
```

以 ./ 运行时生成的文件没有错误。有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T23:06:30.133

由于您的 main 没有返回值或调用退出，因此您将获得一个随机返回码......在这种情况下，5（这并非完全巧合，是“Hello”的长度和 printf 返回的值） . 由于它不是 0，因此 make 将其解释为错误。

要在托管环境中成为符合标准的 C 程序，您的 main 必须被声明`int`，并且函数的结尾几乎不会到达（没有 return 语句）。返回值的解释取决于实现，但通常 0 被认为是成功，非 0 被认为是错误。

# jquery - 动态分组 SVG 元素

> ID：12548386
> 
> 赞同：5
> 
> 时间：2012-09-22T23:03:49.890
> 
> 标签：jquery, dom, svg, dom-manipulation

我正在尝试使用javascript（jQuery）将某些`svg`元素（如`rect`，`text`等）动态包装成一个单一的元素`g`

这是 svg 最初的样子

```
<div id="container">
   <svg ...>
     <rect .../>
     <circle .../>
     <text ...>...</text>
   </svg>
</div> 
```

我用来包装到标签中的脚本（基于我收到的有用答案[@Inserting a (g) node in the middle of a tree (SVG) using jQuery ）。](https://stackoverflow.com/questions/12547194/inserting-a-g-node-in-the-middle-of-a-tree-svg-using-jquery/12547219#12547219)`g`

```
$("#container svg > *").wrapAll('<g id="parent" />'); 
```

变形后的`svg`样子是这样的

```
<div id="container">
   <g id="parent">
     <svg ...>
       <rect .../>
       <circle .../>
       <text ...>...</text>
     </svg>
   </g>
</div> 
```

但是 UI 上什么也没有显示。甚至萤火虫也显示`g`为灰色（就像隐藏元素一样）。

![在此处输入图像描述](../Images/cc73b7ef23325d70f49bed887808aedb.png)

呼叫`$("#parent").show();`在[**某些情况下**](http://jsfiddle.net/jugal/94xUT/)有效，但[**并非全部**](http://jsfiddle.net/jugal/mxc2x/3/)

**问题：**

*   为什么`g`动态创建，默认隐藏？
*   为什么`$("#parent").show()`工作不一致？
*   是否有另一种（更好的）动态分组元素的方法？
*   我对 SVG 完全陌生，但对 jQuery 和 DOM 操作相对熟悉。我将 SVG 视为另一个标签的方式是错误的吗？

*在 Firefox (15.0.1) 和 Chrome (21.0.1180.89) 上都试过了，结果相同*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:24:51.190

我相信原因是由于 SVG 实际上位于与包含 HTML 不同的命名空间内。当您将 HTML 片段传递给 JQuery（`<g id="parent" />`在您的情况下）时，它是在 HTML 文档的命名空间中创建的，而不是在 SVG 中创建的。

JQuery 并不真正适合创建和操作非 HTML 元素，尽管您可以通过使用原生 JavaScript + JQuery 的组合来实现中途旅行：

```
$("#btn").click(function() {
    var el = document.createElementNS('http://www.w3.org/2000/svg', 'g');
    var $el = $(el);
    $el.attr('id', 'parent');
    $("#container svg > *").wrapAll($el);
}); 
```

我之前曾使用 JQuery 使用[Keith Wood 的优秀 JQuery 插件](http://keith-wood.name/svg.html)成功地操作 SVG 元素。你可能想看看那个。

[这个答案](https://stackoverflow.com/a/3642265/981208)更详细地讨论了 SVG 和 HTML 命名空间。

# php - 为什么我的日期时间选择器不起作用？

> ID：12548390
> 
> 赞同：0
> 
> 时间：2012-09-22T23:04:15.880
> 
> 标签：php, javascript, html, codeigniter

我正在使用代码点火器，我想使用 datetimepicker 添加一个日期时间选择器。脚本可以在[这里找到](http://www.javascriptkit.com/script/script2/tengcalendar.shtml)

我的网页上有 2 个部分 - 标题和内容。在控制器上，我将它们都加载了。这是我的 javascript 头

```
<script href="<?php echo base_url(); ?>js/datetimepicker.js" type="text/javascript"></script> 
```

这是我的文本框代码 `<input id="tanggal" type="text" class="textbox" disabled="disabled"> <a href="javascript:NewCal('tanggal','ddmmyyyy')"><img src="<?php base_url(); ?>img/cal.gif"></a>`

当我刷新页面时，我可以将 cal.gif 悬停，但是当我单击 em 时，cal.gif 没有响应。我的代码出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:08:08.267

这不是包含 javascript 文件的正确方法：

```
<script href="<?php echo base_url(); ?>js/datetimepicker.js" type="text/javascript"></script> 
```

它应该是：

```
<script src="<?php echo base_url(); ?>js/datetimepicker.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T04:26:33.617

请记住，`base_url`允许这样做：

```
<script src="<?php echo base_url('js/datetimepicker.js')?>" type="text/javascript"></script> 
```

# c# - C# 声明一个跨越多行的字符串

> ID：12548391
> 
> 赞同：13
> 
> 时间：2012-09-22T23:04:16.773
> 
> 标签：c#, string, newline, declare

我正在尝试创建一个类似这样的字符串

```
string myStr = "CREATE TABLE myTable
(
id text,
name text
)"; 
```

但我收到一个错误：http: [//i.stack.imgur.com/o6MJK.png](https://i.stack.imgur.com/o6MJK.png)

这里发生了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-22T23:06:19.540

*通过在at 符号*( `@`)前面添加一个逐字字符串。普通字符串文字不能跨越多行。

```
string myStr = @"CREATE TABLE myTable
(
    id text,
    name text
)"; 
```

* * *

请注意，在逐字字符串（以 a 引入`@`）中，反斜杠 ( `\`) 不再被解释为转义字符。[这对于正则表达式](https://en.wikipedia.org/wiki/Regular_expression)和文件路径很实用

```
string verbatimString = @"C:\Data\MyFile.txt";
string standardString = "C:\\Data\\MyFile.txt"; 
```

双引号现在必须加倍才能转义

```
string verbatimString  = @"This is a double quote ("")";
string standardString  = "This is a double quote (\")"; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-22T23:05:48.610

```
string myStr = @"CREATE TABLE myTable
(
id text,
name text
)"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T23:06:04.490

在字符串前面使用@ 符号。

# java - Java 泛型限制或错误用法？

> ID：12548394
> 
> 赞同：12
> 
> 时间：2012-09-22T23:05:04.133
> 
> 标签：java, generics

我有一个类表示一对相同类型的两个值（类型可以是一组特定类型中的任何一个）：

```
 public class Pair<E extends AClass>{
      private E var1;
      private E var2; 
  } 
```

此类由框架使用，因此它需要一个无参数构造函数，我必须在其中实例化 2 个变量（var1，var2）：

```
 public class Pair<E extends AClass>{
      private E var1;
      private E var2; 

      public Pair(){
           var1 = invoke constructor of type E; 
           var2 = invoke constructor of type E 
      }
  } 
```

这里显然有很多问题：

1.  为了实例化变量，我应该以某种方式知道它的确切类型并调用该特定类型的构造函数；在最好的情况下，这意味着在构造函数中有一个相当大的 if else 语句，例如：

    ```
     public Pair(){
           if(var1 instanceof SpecificType1){
              var1 = new SpecificType1(); 
              var2 = new SpecificType2();
           }
      } 
    ```

2.  即使我按照上述方式进行操作，我也会遇到一些问题，因为 var1 被声明为 E 类型，并且在尝试实例化 SpecficType1 并将结果对象分配给 var1/var2 时会出现类型不匹配错误。为了使其工作，我必须转换为 E ：

    ```
     var1 = (E)new SpecificType1(); 
    ```

但这破坏了编译时类型检查，因为我试图将特定类型转换为泛型类型。

这是 Java 中泛型的限制，还是这种情况不适合使用泛型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T23:09:35.803

> 为了实例化变量，我应该以某种方式知道它的确切类型并调用该特定类型的构造函数；在最好的情况下，这意味着在构造函数中有一个相当大的 if else 语句，例如：

在此之前你会遇到问题。

```
 if(var1 instanceof SpecificType1){
      var1 = new SpecificType1(); 
      var2 = new SpecificType2();
   } 
```

`var1`在`null`这一点上，`var1 instanceof T`对`false`所有人都是如此`T`。

* * *

Java 泛型的一个限制是泛型类型参数被[删除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，因此您无法从零参数构造函数中反映类型参数。

调用者必须提供一些上下文来告诉您如何初始化`var1`and `var2`，提供该上下文的典型方法是通过构造函数参数。

* * *

您最好的选择可能是让`var1`并`var2`开始`null`，然后延迟初始化，直到您可以获得所需的上下文。

也许

```
void init(Class<E> type) {
  if (type.isAssignableFrom(ConcreteType1.class)) {
    var1 = type.cast(new ConcreteType1(...));
    var2 = type.cast(new ConcreteType1(...));
  } else { /* other branches */ }
} 
```

这并不完美，因为您仍然无法区分`E extends List<String>`，`E extends List<Number>`但它对于您的情况可能已经足够了，并且该[`.cast`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)方法将为您提供类型安全的转换为`E`.

* * *

或者，Guava、Guice 和相关库提供了[`Supplier<E>`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Supplier.html)接口之类的东西，这些东西可能在方法中派上用场`init`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T23:11:35.863

您不能实例化泛型类型 - 例如，如果泛型类型是 会发生什么`SomeAbstractClass`？什么会被实例化？（这不是原因，只是直觉）

但是，您可以使用**[java 反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html)**来实例化该对象 - 但您将需要特定的类对象。

一个更优雅的替代方案是使用**[抽象工厂设计模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)**，并将工厂对象传递给您的配对，并使用它来构造所需的对象。

* * *

代码示例：

```
public class Pair<S> {
    public final S var1; 
    public final S var2;
    public Pair(Factory<S> builder) {
        var1 = builder.build();
        var2 = builder.build();

    }
}

public interface Factory<S> { 
    public S build();
}

public class IntegerBuilder implements Factory<Integer> {
    private int element = 5;
    public Integer build() {
        return new Integer(element++);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T00:28:55.827

如果框架要实例化它，它将作为原始类型进行，相当于`new Pair()`没有类型参数。

我想你必须创建简单的单线类，如：

```
class SpecificType1Pair extends Pair<SpecificType1> {} 
```

并将它们传递给框架。您可以将实际类型参数作为`getClass().getGenericSuperclass()).getActualTypeArguments()[0]`. 你的班级对看起来像这样：

```
public abstract class Pair<E extends AClass> {
    private E var1;
    private E var2;

    public Pair() {
        ParameterizedType superclass = (ParameterizedType) getClass().getGenericSuperclass();
        @SuppressWarnings("unchecked")
        Class<E> clazz = (Class<E>) superclass.getActualTypeArguments()[0];
        try {
            var1 = clazz.newInstance();
            var2 = clazz.newInstance();
        } catch (InstantiationException e) {
            handle(e);
        } catch (IllegalAccessException e) {
            handle(e);
        }
    }
} 
```

# c++ - Python对象删除检测

> ID：12548407
> 
> 赞同：1
> 
> 时间：2012-09-22T23:07:13.980
> 
> 标签：c++, python, oop, wrapper, swig

我正在为 C++ 程序的 swig 接口构建一个 Python 包装器。

我很想知道 Python 对象是否有办法“知道”它是如何被删除的。这个想法很简单，如果垃圾收集器删除了对象，则包装器不会对底层 C++ 对象做任何事情，但如果用户故意删除了对象（``del 对象），那么包装器会检测到该对象并取消引用底层对象，以便它也被删除。

我已经尝试过用谷歌搜索，但找不到任何东西。我发现的唯一一件事是（显然）`__del__`被垃圾收集器和del命令调用，并且似乎无法区分是哪个调用它。

希望有人证明我错了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:15:54.790

CPython 使用引用计数来跟踪对象的生命周期。因此，*所有*删除都由垃圾收集器完成。

例如，下面的代码创建了*两个*引用；在删除对该对象的第二次引用后，该`__del__`挂钩仅被调用*一次：*

```
>>> class Foo(object):
...     def __del__(self):
...         print "Bye bye!"
... 
>>> spam = Foo()
>>> bar = spam
>>> del spam
>>> del bar
Bye bye! 
```

因此，无法通过钩子检测单个`del`语句；`__del__`它总是只被垃圾收集器调用。

请注意，某些 python 实现（尤其是 cpython）*不会*`__del__`使用作​​为循环依赖的一部分的钩子清除对象。这并不适用于所有实现，但值得记住。

在任何情况下，使用引用计数来实现对象删除和垃圾回收本身就是一个实现细节，非 CPython 实现可以（并且确实）完全不同地处理对象删除。

# seo - 我的元描述长度为 146 个字符，在 Google 上被截断

> ID：12548410
> 
> 赞同：-1
> 
> 时间：2012-09-22T23:08:32.573
> 
> 标签：seo, meta-tags

我的网站有**146 个字符长的**描述，并被谷歌截断。

**说明如下：**

“BETA-CRET PROMERA 健康：Conheça e compre aqui o BETA-CRET。O mais poderoso pré-treino do mundo。BETA-CRET, os treinos mais intensos da sua vida。”

**谷歌展示了这一点：**

“BETA-CRET PROMERA HEALTH: Conheça e compre aqui o BETA-CRET. O mais poderoso pré-treino do mundo. BETA-CRET, os treinos mais intensos da sua ...”

对可能发生的事情有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:21:46.907

谷歌的[元描述政策](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35624)状态（强调我的）：

> 谷歌**有时会**在搜索结果片段中使用页面的元描述，如果我们认为它为用户提供的描述比纯粹来自页面内容的**描述更准确。**

他们可能不会显示完整的描述 - 或根本不显示任何描述 - 这取决于他们的启发式对您的网站的看法。最简单的解决方案可能是缩短您的描述，但仍不能保证 Google 会全部显示。SEO不是一门精确的科学！

# mysql - 运行cakephp的centos服务器无法访问远程mysql服务器但可以通过pdo connect在cake外访问

> ID：12548416
> 
> 赞同：0
> 
> 时间：2012-09-22T23:09:23.540
> 
> 标签：mysql, cakephp

我也在stackexchange上问过这个问题，但它开始看起来更像是一个编程问题而不是配置

运行cakephp的centos服务器无法访问远程mysql服务器但可以通过pdo connect在cake外访问

我可以使用 mysql 命令行客户端使用相同的凭据和选项进行连接。但是，当蛋糕尝试连接到远程服务器时，我得到的只是

```
Error: SQLSTATE[HY000] [2003] Can't connect to MySQL server on 'subdomian.domain.com' (13) requires a database connection 
```

我试着运行这个

```
 GRANT ALL PRIVILEGES ON *.* TO 'myrootuser'@'webserver.domain.com' WITH GRANT OPTION; 
```

这对我没有帮助，因为我知道我可以通过 cli 连接

我可以从我的家用电脑蛋糕实例远程连接没有问题相同的主机相同的凭据相同的一切

然而，我的 centos apache 服务器运行 cake 并安装了所有正确的 mysql 包无法连接

我使用正确的用户名密码端口一切，我不断收到该错误

我已经清除了 tmp 文件夹缓存 我使用 apc 清除缓存 我什至重新启动了 httpd

我已经做了一切。没有任何效果。

我有事件尝试暂时关闭两台机器上的防火墙......没有骰子同样的错误

我什至尝试创建一个仅使用 pdo 连接到数据库并从命令行运行它的 php 文件，它显示已连接到数据库！

为什么蛋糕不能用蛋糕做。它显然可以从一个单独的 php 文件中工作

我一遍又一遍地验证了我的信誉和主机

我再次能够在本地机器上使用完全相同的代码库进行连接

所以必须有类似神秘蛋糕或centos apache之类的东西

我也在运行 APC Restarting mysqld 并且 httpd 并没有改变任何东西。我对这种废话束手无策。

这是我正在测试的 php 脚本

```
$hostname = "my.dns.name.tohost";
$username = "myrootuser";
$password = "myrootuserpass";

try {
  $db = new PDO("mysql:host=$hostname;dbname=myDbSchemaName", $username, $password);
  echo "Connected to database";
}
catch(PDOException $e) {
  echo $e->getMessage();
} 
```

// 控制台输出

```
Connected to database[root@localhost ~]# service httpd restart
Stopping httpd:                                            [  OK  ]
Starting httpd:                                            [  OK  ]
[root@localhost ~]# php connectInt.php
Connected to database[root@localhost ~]# 
```

所以我很酷，让我们再次尝试站点。

```
Error: SQLSTATE[HY000] [2003] Can't connect to MySQL server on 'subdomian.domain.com' (13) requires a database connection 
```

没有任何作用

我什至在php中尝试了其他方法我使用相同的credentails做了一个普通的mysql连接脚本它可以连接它可以看到所有的数据库。

```
<?php
$hostname = "dns.name.com";
$username = "mygoodtestednonrootuser";
$password = "somepasswoerd";

try {
  $db = new PDO("mysql:host=$hostname;dbname=int_zzipline", $username, $password);

$link = mysql_connect($hostname, $username, $password);
$db_list = mysql_list_dbs($link);
while ($row = mysql_fetch_object($db_list))
{
    echo 'Connected to database';
    echo $row->Database . "\n";
}   

}
catch(PDOException $e) {
  echo $e->getMessage();
}
?>

[root@localhost ~]# php connectInt.php
information_schema
mydbname1
myotherdb
mysql
test 
```

所以我很酷，让我们再试试这个网站

```
Error: SQLSTATE[HY000] [2003] Can't connect to MySQL server on 'subdomian.domain.com' (13) requires a database connection 
```

这至少可以说是令人愤怒的。

所以 cakephp 不喜欢在没有打开任何防火墙的情况下连接到同一子网中的其他 linux 服务器，但使用相同凭据执行的任何其他 php 都可以工作。我的本地电脑运行完全相同的代码库，与同一台服务器通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:48:04.777

SELINUX 是罪魁祸首。一旦我禁用它并重新启动，一切都很好。我在 /opt 中运行我的网络虚拟主机以帮助进行混淆，但它似乎是我最大的痛苦，你知道一直以来使用简单的东西，比如给 apache 对日志的写访问权限，上传，一切都是因为 SELINUX。它甚至阻止 cake 与它可以正常通信的数据库通信。

我知道 centos 作为老板是安全的，但现在我知道为什么了。SELINUX

了解它，它的作用并发现一个 centos 不再固执己见的世界 SELinux 是 CentOS 的他的小朋友，它会遮盖你的屁股而不是破坏你的蛋蛋。

权力伴随着巨大的责任。当我克服这个问题时，我将开始重新配置我的服务器以负责任地使用 SELINUX，而不是在不知道我为什么使用它的情况下使用它。哦，当然还有解决方案：

```
# This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#       enforcing - SELinux security policy is enforced.
#       permissive - SELinux prints warnings instead of enforcing.
#       disabled - SELinux is fully disabled.
#SELINUX=enforcing
SELINUX=disabled
# SELINUXTYPE= type of policy in use. Possible values are:
#       targeted - Only targeted network daemons are protected.
#       strict - Full SELinux protection.
SELINUXTYPE=targeted
SETLOCALDEFS=0 
```

哦，我差点忘了……**你可以在 /ect/selinux 中找到配置文件**

只要把你的改成这样，你就可以做任何你喜欢的事情了。但h4x0rz也会如此

# ruby-on-rails - 如何获取与 MongoDB 中的数组匹配的哈希键的计数？

> ID：12548417
> 
> 赞同：0
> 
> 时间：2012-09-22T23:09:26.130
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在使用 mongoid for rails（最新版本）。

我有一个完整的文档集合，每个文档都有一个哈希属性。

我想做一个查询，以确定给定数组的多少元素是单个文档中数组中的哈希键。

就像是：

```
@count = Product.where('id':'343434343').vendors_in_array('Walmart','Kmart').count() 
```

这可能吗，还是我需要撤回整个文档并在 RoR 中找出答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:39:55.670

我会以其他方式处理这个问题，因为它似乎不是最好的方法。

# wordpress - 如何输出特定分类的计数？

> ID：12548424
> 
> 赞同：0
> 
> 时间：2012-09-22T23:10:55.960
> 
> 标签：wordpress, taxonomy, woocommerce

我正在尝试输出为自定义帖子类型 product_cat 创建的产品类别的计数。

当我使用：

```
<?php
$count_posts = wp_count_posts('product_cat');
echo $count_posts->publish; 
?> 
```

尽管已经创建了 3 个类别，但它输出“0”。我已经搜索了所有他的插件文件，以查看计数是如何在 Wordpress 管理界面的编辑产品类别页面上输出的。我通常不会提问，因为我是新手并且是自学成才的，如果我的术语不是 100% 正确，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:52:25.897

使用[wp_count_terms](http://codex.wordpress.org/Function_Reference/wp_count_terms)：

```
<?php
    $product_cat_count = wp_count_terms( 'product_cat' );
    echo $product_cat_count; 
?> 
```

# php - 我的随机生成方法有缺陷吗？(PHP)

> ID：12548430
> 
> 赞同：0
> 
> 时间：2012-09-22T23:11:43.133
> 
> 标签：php, random

我有一个小型内部项目，可以将偶尔的条目插入 MySQL 数据库。我有一个名为“idChar”的列，如果我将它的值设置为使用 62 个可能的长度为 31 的字符的随机生成的字符串。

今天我发现一个新条目恰好与几个月前的条目具有相同的 idChar。我现在在保存之前检查重复条目，但这让我想到了发生这种情况的可能性，我很想知道我生成这些随机密钥的实现是否有缺陷。得到一个副本应该大约是 1 in 62^31 对吧？

```
function getCode($len)
{
    //$len = 10;
    $base='ABCDEFGHIJKLMNOPQRSTWXYZabcdefghijklmnopqrstwxyz123456789';
    $max=strlen($base)-1;
    $linkCode='';
    mt_srand((double)microtime()*1000000);
    while (strlen($linkCode)<$len+1)
      $linkCode.=$base{mt_rand(0,$max)};

    return $linkCode;
}

$idChar=getCode(30);

//code to insert into MySQL here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:21:07.693

获得重复的几率将根据[生日问题](http://en.wikipedia.org/wiki/Birthday_problem)计算，因为这就是计算从离散余域产生随机选择的输出的函数的输出的[冲突机会的方式。](http://en.wikipedia.org/wiki/Birthday_problem#Cast_as_a_collision_problem)实际上，您想计算在随机选择的选择池中任何两个选择相同的机会。

您还应该完全放弃`mt_srand`调用，因为它不是必需的，并且它可能提供比 PHP 自动执行的更糟糕的种子。考虑到`microtime`（至少在我的系统中）的输出就像

```
0.29574400 1348356024 
```

这意味着您只有 100 万个不同的种子可用，因为浮点数的最后两位数字始终为零，并且`(double)microtime()`演员完全忽略了秒部分（无论如何这将是一个糟糕的种子）。

假设随机数生成器在使用相同种子播种时产生相同的随机数序列，那么实际上*您只有 100 万个可能的随机码而不是 62^31* - 相当减少！幸运的是，据记录，这在 PHP 5.2.1 及以后的版本[中不会发生。](http://php.net/manual/en/function.mt-srand.php)

# playframework-2.0 - 播放 2.0 小部件

> ID：12548435
> 
> 赞同：3
> 
> 时间：2012-09-22T23:13:55.630
> 
> 标签：playframework-2.0, typesafe-stack

我正在阅读 Play 2.0 with Scala 的教程，并且正在研究表单模板和字段构造函数。

有没有一种添加日历字段的好方法，就像使用 Primefaces (JSF) 一样：

```
<p:calendar value="#{home.to}" pattern="dd.MM.yyyy" /> 
```

我可以想象一个像这样的助手：

```
@helper.calendar(form("to")) 
```

如果它不存在，它是否在管道中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:41:42.773

Play 中没有日期/时间选择器标签，原因很简单：因为 Play 是一个框架而不是 CMS，所以没有默认的前端库，包含的 Bootstrap 标签*事实上*被放置在 Play 中......*意外*:)。

上次当我需要这样的字段时，我使用了两个 Bootstrap 插件的组合：

*   [http://www.eyecon.ro/bootstrap-datepicker](http://www.eyecon.ro/bootstrap-datepicker)
*   [http://www.github.com/jdewit/bootstrap-timepicker](http://www.github.com/jdewit/bootstrap-timepicker)

因为我分别喜欢它们......当然，您可以搜索结合日期和时间选择器的另一种解决方案，即：[http](http://dl.dropbox.com/u/143355/datepicker/datepicker.html) ://dl.dropbox.com/u/143355/datepicker/datepicker.html ，这完全取决于您的需求和使用 FE 解决方案（如果您不使用 Bootstrap，您可以使用[jQuery UI](http://jqueryui.com/demos/datepicker/)示例）。

**编辑：** `helpers`除了准备使用内置在 Play 中的迷你模板之外，别无其他，使用 Scala 语法编写的动态部分，唯一的工作就是生成 HTML 片段。正如我所说，Play 没有您展示的那么大的库，但是您也可以`tags`使用动态参数编写这些东西（即放入包中），然后以与它们作为助手的方式完全相同的方式使用它。

实际上，我正在使用这些提到的 Bootstrap 插件：

`app/views/tags/datePickerJs.scala.html`

```
<!-- first line has to be empty, as that's place for defining views arguments - remove this comment...-->
<script type="text/javascript">
    function setToday(datePickerSetId) {
        var currentServerDate = "@DatepickerUtils.getCurrentDate()";
        var currentServerTime = "@DatepickerUtils.getCurrentTime()";
        $("#" + datePickerSetId + "Date").val(currentServerDate);
        $("#" + datePickerSetId + "Time").val(currentServerTime);
        $("#" + datePickerSetId + "DateContainer").data('date', currentServerDate);
        $("#" + datePickerSetId + "DateContainer").datepicker('update');
    }
</script> 
```

`app/views/tags/dateTimePicker.scala.html`

```
@(label: String, prefix: String, dateString: String=null)

<label for="@{prefix}Date">@label </label>

<btn id="@{prefix}" class="datePickerSetNow btn pull-left" onclick="setToday('@{prefix}'); return false;">teraz</btn>
<div class="input-append date pull-left datePickerDateContainer" id="@{prefix}DateContainer" data-date='@DatepickerUtils.splitDateTime(dateString, 0, true)' da$
<input class="span2" size="16" type="text" value='@DatepickerUtils.splitDateTime(dateString, 0)' name="@{prefix}Date" id="@{prefix}Date">
<span class="add-on"><i class="icon-calendar"></i></span>
</div>

<div class="input-append bootstrap-timepicker-component datePickerTimeContainer">
    <input type="text" class="@{prefix}Time input-small" name="@{prefix}Time" id="@{prefix}Time">
    <span class="add-on"><i class="icon-time"></i></span>
</div>

<script type="text/javascript">
    $('#@{prefix}DateContainer').datepicker({weekStart:1, language:'pl'});
    $('#@{prefix}Time').timepicker({
        minuteStep:5, template:'dropdown', showMeridian:false, defaultTime:'@DatepickerUtils.splitDateTime(dateString, 1)'
    });</script> 
```

因此，在任何视图中，您都可以稍后将其用于：

```
@tags.dateTimePicker(
   "Event's start",
   "eventStartDate",
   myForm("eventStart").value
)

@tags.dateTimePicker(
   "Event's end",
   "eventEndDate",
   myForm("eventEnd").value
)

<!-- once per view at the end -->
@tags.datePickerJs() 
```

当然，Bootsrtap 的示例是为我的字段准备的，并且需要 Java 类中的其他方法，因此如果不进行修改，它将无法工作。一般来说，我想向您展示`tags`.

当然，我同意你的观点，如果有类似的 API 可用于轻松安装 Play 框架，那将是完美的，但我不确定 Play 的开发人员是否正在计划它......你应该问他们。很可能这是针对某些 JS 库的独立模块的任务，正如我在没有您必须使用的默认前端库之前所写的那样。

# javascript - slideToggle() 和未知高度的表格标签

> ID：12548436
> 
> 赞同：2
> 
> 时间：2012-09-22T23:14:06.177
> 
> 标签：javascript, jquery

我正在尝试`slideToggle()`没有`table`设定高度。这可能吗？

```
<div class="container">
  <h3>Title</h3>
  <p class="expand-close"><a href="">Expand/Close</a></p>
  <table>
    <tbody>
      <tr>
        <td>Head 1</td>
        <td>Stuff</td>
      </tr>
      <tr>
        <td>Head 2</td>
        <td>More stuff</td>
      </tr>
    </tbody>
  </table>
</div> 
```

还有我的 jQuery：

```
$("p.expand-close").parent().click(function (event) {
    $(this).parent().find("table").slideToggle(400);
    event.preventDefault();
}); 
```

和CSS：

> 表{显示：无；}

没有幻灯片动画，我假设是因为没有设置高度`table`？如果是这样，有没有办法做幻灯片动画？

这是一个小提琴：

[http://jsfiddle.net/BRuvf/](http://jsfiddle.net/BRuvf/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:27:41.387

`slideToggle`向您的表格添加`display: table`属性，因为它不是块元素，所以您看不到动画效果。你可以把你的表格放在一个 div 标签中，然后滑动它：

```
<div id='table'>
   <table>
     // ..
   </table>
</div> 
```

```
#table {
    display: none;
} 
```

```
$("p.expand-close a").click(function (event) {
    $(this).parent().next().slideToggle(400);
    event.preventDefault();
}); 
```

[http://jsfiddle.net/NrkCg/](http://jsfiddle.net/NrkCg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:16:58.237

这解决了你的问题

**CSS**

```
table{
    display:block;
}
.container table{
    display: none;
} 
```

**jQuery**

```
$("p.expand-close").parent().click(function (event) {
     var block = $(this).parent().find("table");

    if(block.is(':visible'))
        $(block).slideUp(400);
    else
       $(block).slideDown(400, function(){$(this).css('display', 'block')});

    event.preventDefault();
});​ 
```

[http://jsfiddle.net/2G2mD/](http://jsfiddle.net/2G2mD/)

# ruby-on-rails - Rails 控制器 - format.png

> ID：12548440
> 
> 赞同：1
> 
> 时间：2012-09-22T23:14:55.287
> 
> 标签：ruby-on-rails, controller, download, format, png

试图让rails中的控制器块工作。响应 url 时，我想显示与模型关联的 .png 文件。

```
respond_to do |format|
format.html  { render :blank }
format.json { render json: @play }
format.png  do  
send_data data, :type => "image/png", :filename => 'screenshot.png'
end 
```

数据工作正常，是一个 200Kb 的文件。问题是当我转到网址时：

```
http://localhost:8080/plays/testing1.png 
```

它把我带到了一个空白页面（我创建了 show.png.erb 并且里面什么都没有）。不知道如何让 png 文件显示为内联或可下载。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:25:18.257

尝试使用 Conent-Disposition，您可以将其设置为附件或内联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T15:18:58.720

老问题，但我已经在同一个问题上苦苦挣扎了几个小时，所以万一有人在未来发现这个问题：

我也遇到了同样的问题，在 Chrome 中生成的文档带有损坏的图像和标签，即`<img style="-webkit-user-select: none" src="http://localhost:3000/open/28">`. 同样在 Firefox 中，我收到一条错误消息，指出图像存在问题。

解决方案：我更改`send_data`为`send_file`which 给了我以下代码：

```
respond_to do |format|
  format.png {  send_file img ,type: "image/png", disposition: 'inline' }
end 
```

[有关 send_file 的更多信息在这里](http://apidock.com/rails/v4.2.1/ActionController/DataStreaming/send_file)

之后，路由通过提供没有损坏图像标签的 PNG 图像来响应。

希望能帮助别人。

# php - Codeigniter 控制器变量

> ID：12548441
> 
> 赞同：0
> 
> 时间：2012-09-22T23:15:05.683
> 
> 标签：php, codeigniter

我有一个控制器，如：

```
class listItems extends CI_Controller{
    private $num;

    public class __construct(){
        parent::__construct();
        $this->num=10;
    }

    public class index(){
        echo $this->num;
    }
} 
```

当我这样做时，我什么都没有。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:16:13.553

两个不同的班级。需要下相同，所以`function`改用。

```
class listItems extends CI_Controller {

    private $num;

    public function __construct() {
        parent::__construct();
        $this->num=10;
    }

    public function index() {
        echo $this->num;
    }

} 
```

# git - Github Branch is ahead 消息不清楚

> ID：12548442
> 
> 赞同：1
> 
> 时间：2012-09-22T23:15:29.283
> 
> 标签：git, github

[git：您的分支领先于 X 次提交](https://stackoverflow.com/questions/2432579/git-your-branch-is-ahead-by-x-commits)

[Git 分支在 origin/master 之前](https://stackoverflow.com/questions/11687102/git-branch-is-ahead-of-origin-master)

我已经阅读了上面的两个问题，但它仍然没有回答我的问题。基本上我所做的是

1.  在 GitHub 中创建一个新的存储库。
2.  克隆并在我的本地 linux 机器中获取数据
3.  进行更改，执行“git add”，然后执行“git commit -m”message”
4.  最后做一个“git push [https://github.com/username/sandbox.git](https://github.com/username/sandbox.git) ”。这工作正常，我使用建议的 https 协议而不是 SSH 协议（请注意，如果我只是“git push”它使用我尚未配置的 SSH 协议并且它失败了）
5.  执行“git pull [https://github.com/username/sandbox.git](https://github.com/username/sandbox.git) ”和“git fetch [https://github.com/username/sandbox.git](https://github.com/username/sandbox.git) ”，所有这些都成功执行，说“已经是最新的” .
6.  访问 github 网站，我可以看到更改。
7.  现在运行“git status”，我现在看到以下内容

    > 在分支 master
    > 您的分支比 'origin/master' 领先 9 次提交。

这不是我所期望的。有人能告诉我为什么 git 认为我在 9 次提交之前领先于 origin/master。我已经推送和拉取数据，所以我希望我的本地仓库与远程主/原始仓库完美同步。

命令“git branch -av”显示如下

```
 * master                a99daf0 [ahead 9] submit
  remotes/origin/HEAD   -> origin/master
  remotes/origin/master 81c7ec1 remove out files 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:40:08.450

您领先于 origin/master，因为您已将自己的补丁提交到当前分支。

这可以通过以下方式显示：

```
$ git branch -av
master         0123abcd [ahead 9] Current commit comment 
```

这样做的原因是您的本地分支是您自己的私有副本，实际上与 origin/master 不同。尽管您的本地分支机构`master`设置为跟踪`origin/master`. 所以 git 会告诉你两个分支之间的区别。

上面的命令将显示`master`is 的位置，您将看到另一个条目`origin/master`。

现在，如果您执行了您的`push`然后 a`fetch`和 a，则`pull`当前的提交 ID（显示在 中`git branch -av`）应该是相同的。如果不是，你需要弄清楚为什么不。也许：

```
$ git log origin/master..master   # this can help explain ?  OR...
$ git diff origin/master..master  # this can help explain 
```

检查您在 github 上通过 HTTP/浏览器看到的提交 ID 是否与来自`git branch -av`.

如果事实证明没有区别，您始终可以`checkout`创建一个新分支，切换到它，然后尝试删除旧的 master 分支`git branch -d master`，默认情况下它不会让您丢失补丁（因为它们还没有被合并并推送到上游主服务器）。

如果它不允许您删除分支。您可以要求 git 告诉您两个分支在哪个 commit-id 处共享相同的遗产（“它们都以相同的版本开始生活，那是什么时候？”）。

```
$ git merge-base origin/master master 
```

这将显示两个分支共享的最后一次提交。从那时起，每个分支都以自己的方式分道扬镳。您可以获取该提交 ID，然后比较日志输出：

```
$ git log <commit-id>..<branch_name> --oneline
$ git log <commit-id>..<other_branch_name> --oneline 
```

您现在可以看到它们是如何变得不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:27:56.607

作为一个新手，我真正需要的是“Mims H Wright”在[我如何在 git 中找到原点/主人的位置，以及如何更改它所描述的答案？](https://stackoverflow.com/questions/277077/why-is-git-telling-me-your-branch-is-ahead-of-origin-master-by-11-commits-a)最终指向链接[http://fvue.nl/wiki/Git%3a_Your_branch_is_ahead_of_the_tracked_remote_branch](http://fvue.nl/wiki/Git%3a_Your_branch_is_ahead_of_the_tracked_remote_branch)。

基本上我必须做

```
git push origin master:master 
```

# c# - WebClient 在 404 上抛出异常

> ID：12548443
> 
> 赞同：1
> 
> 时间：2012-09-22T23:15:41.613
> 
> 标签：c#, .net, webclient

我偶然发现了 WebClient 的疯狂行为，它在 404 代码上引发 WebException。

这种行为是错误的，因为 404 代码可以与内容数据一起返回，例如 Facebook：`https://graph.facebook.com/sadfsa.dsadsasadsa`

所以这段代码抛出异常

```
 var json = webClient.DownloadString("https://graph.facebook.com/sadfsa.dsadsasadsa"); 
```

如何读取 404 Facebook 返回的 json？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T23:20:34.573

我不认为 WebClient 有疯狂的行为。尝试捕捉`WebException`和阅读`webException.Response.GetResponseStream`

看到一个类似的问题：[C# WebException how to get whole response with a body？](https://stackoverflow.com/questions/11828843/c-sharp-webexception-how-to-get-whole-response-with-a-body)

# c++ - 信号的总能量

> ID：12548447
> 
> 赞同：1
> 
> 时间：2012-09-22T23:16:26.730
> 
> 标签：c++, math, signals

我已经给出了这个方程来计算信号的总能量：

```
Ex= ∑ n|x[n]|2 
```

对我来说，这建议您将每个块平方，然后得到整个块的总和。我想知道我编写的代码/算法对于这个方程是否准确，并且我以最有效的方式完成了它。

```
double totalEnergy(vector<double> data, const int rows, const int cols)
{
vector<double> temp;
double energy = 0;

for(int i=0; (i < 2); i++)
{
    for(int j=0; (j < 2); j++)
    {
        temp.push_back( (data[i*2+j]*data[i*2+j]) );
    }
}

energy = accumulate (temp.begin(), temp.begin()+(rows*cols), 0);
return energy;
 }
 int main(int argc, char *argv[]) {

vector<double> data;
data.push_back(4);
data.push_back(4);

data.push_back(4);
data.push_back(4);

totalEnergy(data, 2, 2);

 } 
```

结果：64

任何帮助/建议将不胜感激:)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:37:23.397

尽管我认为实现几乎是正确的，但这肯定不是进行此计算的最有效方法：尽管乘以`n`某种方式丢失了。由于我看不到总和索引和界限是什么，我不打算解决这个问题，但我会重现实现的结果，只是“更好”。有两点明显可以改进：

1.  该代码不使用位于特定列或行中的任何用途。也就是说，它也可以将输入视为一个平面数组，其大小实际上可以从输入向量的大小中得知。
2.  该函数使用两个临时向量（一个传递给函数，一个在函数内部）。创建一个`std::vector<T>`需要分配内存的操作并不便宜。

作为第一个近似值，我将就地转换输入向量，然后累积结果：

```
double square(double value) {
    return value * value;
}

double totalEnergy(std::vector<double> data) {
    std::transform(data.begin(), data.end(), data.begin(), &square);
    return std::accumulate (data.begin(), data.end(), 0);
} 
```

该函数仍然会复制数据并对其进行修改。我不喜欢这个。奇怪的是，您实现的操作基本上是向量与自身的内积，即，这会产生相同的结果而无需创建额外的向量：

```
double totalEnergy(std::vector<double> const& data) {
    return std::inner_product(data.begin(), data.end(), data.begin(), 0);
} 
```

假设这实现了正确的公式（尽管我仍然怀疑`n`原始公式中的 ），这可能要快得多。它似乎也更简洁......

# cakephp - CakePHP：将数据传递给插件

> ID：12548454
> 
> 赞同：0
> 
> 时间：2012-09-22T23:17:40.450
> 
> 标签：cakephp, plugins, registration, user-management

我已经为用户注册安装了一个插件（[SignMeUp](https://github.com/voidet/sign_me_up/tree/2.0)），根据文档，我的用户控制器内的注册功能必须如下所示：

```
public function register() {
    $this->SignMeUp->register();
} 
```

查看此函数中的 $this->data 数组表明一切正常。但是，当我使用

```
debug($this->data); 
```

在插件的 registration() 函数（我刚刚将我的函数指向的那个）内，数组是空的。不知何故，数据没有被传递。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:01:56.823

解决！这可以通过用 $this->controller->request->data 替换 SignMeUpComponent 中的所有 $this->data 来解决

这是从 Cake 1.3 到 Cake 2.x 的变化

# java - 如何将字符串存储在 Int 数组中？

> ID：12548456
> 
> 赞同：0
> 
> 时间：2012-09-22T23:18:00.987
> 
> 标签：java, string, multidimensional-array, int

我有个问题。作为我作业的一部分，我的老师要求将数组中的所有 0（零）替换为星号（*）。

这是我的程序的输出示例：

```
Best Tour: #31
Number of Moves: 57
=====================================
 1   16   57    6    0   36   47    0   
56    7    0    3   46    5   32   37   
17    2   15    8   33   30   35   48   
14   55   22   45    4   49   38   31   
23   18   13   50    9   34   29   42   
54   51   24   21   44   41   26   39   
0    12   19   52   25   10   43   28   
0    53    0   11   20   27   40    0   
===================================== 
```

基本上，只要有一个零，他就希望它显示一个星号。这是一个 int 数组。我尝试创建一个值为“ * ”的字符串。然后我尝试将其解析为 int，但我得到：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "*" 
```

我应该尝试其他任何建议吗？

* * *

非常感谢你们！我只是没有正确地看待事物。在阅读了一些评论后，我意识到尝试将数组本身中的零更改为星号并没有多大意义。

所以我修改了我的 printArray() 方法，这样在任何 0 的实例中，它都会打印 *; 否则它只会打印应该存在的任何数字。

这是它现在的样子：

```
Best Tour: #45
Number of Moves: 58
=====================================
 1   42   13   18   31   44   27    *   
58   11   32   43   14   17   30   45   
41    2   57   12   19   26   15   28   
56   33   10    5   16   29   46    *   
 3   40   55   34    9   20   25   50   
 *   37    4   53    6   49   22   47   
39   54   35    8   21   24   51    *   
36    *   38    *   52    7   48   23   
===================================== 
```

你们都很有帮助，我可能会很快添加！太感谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T23:25:03.293

如果您也关心整数的值，那么您不能可靠地将除整数以外的任何内容存储在整数数组中。`*`（如果你真的想要，你可以将 char 转换为 int，但是它的 ASCII 代码 (42) 会将它放在那里，并带有潜在的 int 有效值，并在以后给你带来各种悲伤。）

所以你有两个现实的选择：

*   存储字符串而不是整数，将所有内容转换为字符串，并存储`"*"`而不是`"0"`; 或者
*   *只需在输出*数组时担心星号，只要值为 0，只需输出即可`"*"`。

后者要简单得多，并且将您的整数保留为整数，因此您以后仍然可以根据需要轻松地对它们进行数学运算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T23:23:17.380

与其尝试将星号放在 int 数组中，不如关注将区域输出到屏幕的时间。创建一个方法来显示您在问题中格式化的数组，并且当您打印数字时，请务必仔细检查它们的值。

*注意：*我不会给出答案，因为这个问题是[作业](/questions/tagged/homework "显示标记为“作业”的问题")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:26:36.967

`*`您应该在打印时处理s，而不是`0`在数组本身中用它们替换 s。像这样的东西（类似的方法可以在二维情况下使用）：

```
int[] a = new int[]{1, 2, 0, 5, 9, 3, 0};
for (int i : a)
    // If ("a" is 0) then print "*", otherwise print "a" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T23:35:25.517

第一：您不能将 String 添加到 int[] 数组中。因此，您可以执行以下操作。作为一个家庭作业，我力图编写整个代码。

```
int[] x= {0,2,4,0,7};
String[] str= new String[x.length];
for(loop thru int array) {
    // check if the indexed element is equal to 0
    // if it is equal to 0 then add '*' into str
    // else add the number at the index into str
} 
```

如果你想通过 str[] 循环打印它们并打印每个元素

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-09-22T23:21:16.923

我看到有 8 个数组，如果数组包含零，请确保一一验证数组，将零替换为 *

# python - Python QT 创建应用程序。可以交互地从 CLI 脚本接收和发送到 CLI 脚本

> ID：12548459
> 
> 赞同：0
> 
> 时间：2012-09-22T23:18:39.450
> 
> 标签：python, command-line, pyqt, interaction

我编写了一个基于文本 CLI 的脚本来测试某些设备。一些测试需要输入是/否答案以及阅读脚本的输出。我想看看创建一个 PyQT 应用程序是否可行。可以在这种类型的交互上放置一个 GUI 前端吗？例如，当用户单击按钮运行脚本时，脚本运行时将其输出行一次发送到 GUI 上的文本窗口，并且从 GUI 输入的任何行也向下发送到脚本。

TIA，弗雷德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:13:12.327

你判断它是否可行的标准是什么？

这当然是可能的。[QProcess](http://www.pyside.org/docs/pyside/PySide/QtCore/QProcess.html#PySide.QtCore.PySide.QtCore.QProcess.readAllStandardOutput)类提供了在 Qt 应用程序中运行和与外部进程交互所需的一切。从本质上讲，它可以做所有`subprocess`可以做的事情（尽管不太方便）。这是一个人为的用法示例：

```
button = QPushButton('start')
textedit = QTextEdit()
process = QProcess()

button.clicked.connect(on_clicked)

def on_clicked():
    process.readyReadStandardOutput.connect(read_ready)
    process.start('/bin/sh',
       ('-c', "while /bin/true; do echo hello world ; sleep 1; done"))

def read_ready(self):
    chunk = process.readAllStandardOutput()
    textedit.append(str(chunk)) 
```

既然您仍处于规划阶段，为什么不考虑使用[zenity](http://linux.byexamples.com/archives/265/a-complete-zenity-dialog-examples-2/)之类的工具作为 GUI 部分呢？它可以为您节省大量工作。获取复选框列表并将命令的输出发送到 textarea 变成：

```
parameters=$(
zenity --list --text "Test parameters:" \
       --checklist --column "Check" --column "Parameter" \
       TRUE "One" TRUE "Two" TRUE "Three" FALSE "Four" \
       --separator=":");

# parameters -> One:Two:Three
./instrument-test.py $parameters | zenity --text-info 
```

祝你的项目好运！

# php - 使用 PHP 生成随机图像

> ID：12548462
> 
> 赞同：0
> 
> 时间：2012-09-22T23:19:04.870
> 
> 标签：php

好的，所以我有一个正在开发的网站，需要在页面上显示两张随机的图像。我正在运行 XAMPP 以在它上线之前在本地对其进行测试。图像库存储在根目录中的“图像”文件夹中。我正在使用的代码是：

```
<img src="images/image<?php echo rand(1,9)); ?>.jpg" /> 
```

我所有的图像都遵循 image*n*.jpg 的命名约定，其中 n 通过文件名递增。据我所知，我认为这段代码没有理由不在页面上生成随机图像。我得到的只是一个损坏的链接图像。

编辑：错过了 src 标签的右引号。代码确实有这个，但它不适用于它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:28:32.557

您可能还想使用[mt_rand()](http://php.net/manual/en/function.mt-rand.php)因为它比[rand()](http://php.net/manual/en/function.rand.php)更随机，并且会给您更多的机会使图像不会重复。

`<img src="./images/image<?=mt_rand(1,9);?>.jpg" />`

如果您有损坏的图像，请查看页面源和图像的正确路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:20:07.540

你错过了右引号 for`src`并且你有一个额外的右括号。这是更正后的代码：

```
<img src="images/image<?php echo rand(1,9); ?>.jpg" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:25:00.783

试试这样

```
$imagename = "image" . rand(1, 9) . ".jpg";

<img src="images/<?php echo $imagename; ?>" /> 
```

# javascript - 重绘一个简单的图形

> ID：12548463
> 
> 赞同：1
> 
> 时间：2012-09-22T23:19:09.997
> 
> 标签：javascript, graph, svg, line, d3.js

我有一个非常简单的折线图，由下面的代码呈现。我创建了一个简单的计时器来将项目推送到数据数组中，然后重绘图表。问题是图表没有被重绘。我可以看到 line 函数按预期每 1.5 秒调用一次，但图表没有重绘。

我尝试了许多不同的事情，并尝试遵循与 SO 类似的先前问题的一些答案，但我只是卡住了。

```
 var data = getData();
    var graph;
    var line;

    function getData() {
        var arr = [];
        for (var x = 0; x < 30; x++) {
            arr.push(rand(100));
        }
        return arr;
    }

    function rand(max) {
       return Math.floor(Math.random() * (max + 1))
    }

    setInterval(function() {
        data.shift();
        data.push(rand(100));
        redraw();
    }, 1500);

    function redraw() {
        graph.select("svg path")
             .data([data])
             .attr("d", line);
    }

    var m = [80, 80, 80, 80]; // margins
    var w = 1000 - m[1] - m[3]; // width
    var h = 400 - m[0] - m[2]; // height

    var x = d3.scale.linear().domain([0, data.length]).range([0, w]);
    var y = d3.scale.linear().domain([0, d3.max(data)]).range([h, 0]);

    line = d3.svg.line()
             .x(function(d,i) { return x(i); })
             .y(function(d) { return y(d); })

    graph = d3.select("#graph").append("svg:svg")
              .attr("width", w + m[1] + m[3])
              .attr("height", h + m[0] + m[2])
              .append("svg:g")
              .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

    var xAxis = d3.svg.axis().scale(x).tickSize(-h).tickSubdivide(true);
    graph.append("svg:g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + h + ")")
          .call(xAxis);

    var yAxisLeft = d3.svg.axis().scale(y).ticks(4).orient("left");
    graph.append("svg:g")
          .attr("class", "y axis")
          .attr("transform", "translate(-25,0)")
          .call(yAxisLeft);

    graph.append("svg:path")
         .data([data])         
         .attr("d", line); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:13:05.517

问题是您的选择器“svg path”不够具体：它与您的轴绘制的域路径匹配。您可以通过以下两种方式之一解决此问题。您可以在添加时保存对行路径的引用：

```
var path = graph.append("path")
    .datum(data)
    .attr("d", line); 
```

或者您可以为其分配一个特定的类（“line”），然后使用更具体的选择器（“.line”）。这也将使样式更容易。

```
graph.append("path")
    .datum(data)
    .attr("class", "line")
    .attr("d", line); 
```

# c++ - 如何使用 MathGL 在屏幕上显示图形

> ID：12548464
> 
> 赞同：2
> 
> 时间：2012-09-22T23:19:34.933
> 
> 标签：c++, opengl, mathgl

我正在学习 MathGL，一个 C++ 库，但我发现自己即使使用他们提供的“示例代码”也无法在屏幕上绘制图形，尽管我可以成功地将图形绘制到文件中。他们官网上的“示例代码”如下：

```
#include <mgl2/window.h>
int sample(mglGraph *gr)
{
  gr->Rotate(60,40);
  gr->Box();
  return 0;
}
//-----------------------------------------------------
int main(int argc,char **argv)
{
  mglWindow gr(sample,"MathGL examples");
  return gr.Run();
} 
```

我将此代码编译为：

```
g++ test.cpp -o test.o -lmgl-wnd 
```

正如开发人员建议的那样。这段代码可以编译成功，但是我执行“test.o”时什么也没发生。有人知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T08:43:10.530

我认为您可能已经安装了“不支持 gsl 和 HDF5”（Win32 LGPL）的 MathGL 库。我也有同样的问题。然后，我发现 Win32 LGPL 不支持“包装小部件类”（我认为“mglWindow”来自[http://mathgl.sourceforge.net/web_en/web_en_1.html#Main](http://mathgl.sourceforge.net/web_en/web_en_1.html#Main)）。所以当我安装了“with gsl and HDF5 Support”（Win32 GPL，当然安装了gsl库，gsl安装大约需要1个小时），就成功了。

# c++ - 将 offsetof 与 GLM 一起使用（OpenGL 数学）

> ID：12548465
> 
> 赞同：0
> 
> 时间：2012-09-22T23:20:04.400
> 
> 标签：c++, opengl, offsetof

我正在使用 GLM OpenGL 数学库编写一个 OpenGL 程序。我想像这样将顶点位置、法线和纹理坐标组合成一个类

```
class Vertex {
    public:
       glm::vec4 position;
       glm::vec4 normal;
       glm::vec2 texcoord;
}; 
```

然后使用这些数组作为我的顶点缓冲区对象（VBO）。但是，当调用 映射我的 VBO 时，我需要为and成员`glVertexAttribPointer`在这个组合的 Vertex 结构中给它一个偏移量。`normal``texcoord`

如果这些只是 POD，我可以使用类似的东西

```
offsetof(Vertex, position)
```

但这不适用于 glm 数据类型（或至少 g++ 4.4.3 退出）。

获取 Vertex 成员偏移量的推荐方法是什么？

*（我理解为什么我不能拥有`offsetof`任意 C++ 对象的一般原因，但在这种特殊情况下，事情似乎是明确定义的）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:56:16.960

> （我理解我不能对任意 C++ 对象使用 offsetof 的一般原因，但在这种特殊情况下，事情似乎是明确定义的）

根据 C++98/03 标准，它们没有很好的定义。C++11 通过放宽对被认为是[“标准布局”的类型的要求来改进这一点，这是一组更弱的规则](https://stackoverflow.com/a/7189821/734069)（`offsetof`在 C++11 中需要标准布局类型，而不是 POD）。我不知道 GLM 的课程是否遵循标准布局规则。

当然，这都无关紧要，因为您正在处理 C++98/03 编译器。标准不需要任何机制来从非 POD 类型中获取成员的偏移量。您的选择是要么坚持标准，通过不使用 GLM 类型来制作你的顶点数据 POD，要么只做对你感兴趣的编译器有用的事情。

从实际的角度来看，后一种情况实际上并不算太糟糕。之所以在 C++11 中更改 POD 的定义，是因为大多数编译器*已经遵循*新规则；标准委员会只是将广为人知的跨编译器的行为合法化。所以你可以简单地这样做。您知道 a 的大小为`glm::vec4`16 个字节，因此请手动计算偏移量。

# c# - 返回 IEnumerable 不起作用 - 必须使用 IEnumerable 反而

> ID：12548476
> 
> 赞同：0
> 
> 时间：2012-09-22T23:21:19.107
> 
> 标签：c#, .net

我正在尝试返回`IEnumerable<IMyInterface>`。我有一个类，`MyClass:IMyInterface`我从一个函数返回。

```
IEnumerable<IMyInterface> test() {
    tmpList = new List<MyClass>();
    tmp1 = new MyClass();
    tmp2 = new MyClass();
    tmpList.Add(tmp1);
    tmpList.Add(tmp2);
    return tmpList;
} 
```

编译器不允许，这对我来说似乎很奇怪，因为 MyClass:MyInterface。编译器给出错误`'cannot implicitly convert type System.Collections.Generic.IEnumerable<MyClass> to System.Collections.Generic.IEnumerable<IMyInterface. An explicit conversion exists. Are you missing a cast?'`

我无法`(IEnumerable<IMyInterface>)tmp`在运行时执行没有强制转换异常的返回。我错过了什么？我希望返回接口的 IEnumerable 应该可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T23:51:54.877

你应该做这个：

```
IEnumerable<IMyInterface> test() {
    tmpList = new List<IMyInterface>();  // this is the important bit
    tmp1 = new MyClass();
    tmp2 = new MyClass();
    tmpList.Add(tmp1);
    tmpList.Add(tmp2);
    return tmpList;
} 
```

或者，您可以这样做：

```
return tmpList.Cast<IMyInterface>(); // requires using System.Linq in usings 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T23:23:29.890

使用`yield return`而不是仅`return`. 这会将一个简单的对象变成对象的枚举！

```
IEnumerable<IMyInterface> test() {
    yield return new MyClass();
    yield return new MyClass();
    yield return new MyClass();
} 
```

创建实现接口的三个对象的枚举。

* * *

编辑：

或者更改方法的返回类型以返回单个项目。

```
IMyInterface test() {
    return new MyClass();
} 
```

# javascript - 从子域读取 .domain cookie

> ID：12548480
> 
> 赞同：3
> 
> 时间：2012-09-22T23:22:31.653
> 
> 标签：javascript, cookies

我正在尝试在 invisionfree.com 论坛上添加一个链接，将用户 ID 传递给链接的目标。例如。example.com/index.php?userid=17

用户 ID 位于论坛设置的 cookie 中，域为 .invisionfree.com，路径为 /forumname

我正在尝试使用在 z8.invisionfree.com/forumname 上运行的代码来阅读它

根据我读过的各种文章和帖子，这应该没问题。cookie 的域以“.”开头 所以它应该可以被任何子域读取。但它不起作用。如果我写出整个 document.cookie，它只包含 z8.invisionfree.com 设置的 cookie。有谁知道为什么？

# python - 如何在 Python 中检查双端队列长度

> ID：12548481
> 
> 赞同：62
> 
> 时间：2012-09-22T23:22:59.827
> 
> 标签：python, python-3.x, python-2.7, data-structures

如何在python中检查双端队列的长度？

我没有看到他们在 Python 中提供 deque.length ...

[http://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)

```
from collections import deque
queue = deque(["Eric", "John", "Michael"]) 
```

如何检查这个双端队列的长度？

我们可以像这样初始化吗

```
queue = deque([])   #is this length 0 deque? 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-22T23:24:48.113

`len(queue)`应该给你结果，在这种情况下是 3。

具体来说，`len(object)`函数会调用`object.__len__`方法[[参考链接](http://docs.python.org/reference/datamodel.html#object.__len__)]。而本例中的对象是`deque`，它实现`__len__`了方法（您可以通过 看到它`dir(deque)`）。

* * *

```
queue= deque([])   #is this length 0 queue? 
```

是的，空的将为 0 `deque`。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2016-09-27T06:24:11.980

这很简单，只需使用 .qsize() 示例：

```
a=Queue()
a.put("abcdef")
print a.qsize() #prints 1 which is the size of queue 
```

上面的代码片段适用于`Queue()`python 类。感谢[@rayryeng](https://stackoverflow.com/users/3250829/rayryeng)的更新。

因为[我们](https://stackoverflow.com/a/12548492/6663095)`deque from collections`可以按照[KZ](https://stackoverflow.com/users/853611/k-z)`len()`的说明使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-22T12:37:31.963

是的，我们可以检查从集合创建的队列对象的长度。

```
from collections import deque
class Queue():
    def __init__(self,batchSize=32):
        #self.batchSie = batchSize
        self._queue = deque(maxlen=batchSize)

    def enqueue(self, items):
        ''' Appending the items to the queue'''
        self._queue.append(items)

    def dequeue(self):
        '''remoe the items from the top if the queue becomes full '''
        return self._queue.popleft() 
```

创建类对象

```
q = Queue(batchSize=64)
q.enqueue([1,2])
q.enqueue([2,3])
q.enqueue([1,4])
q.enqueue([1,22]) 
```

现在检索队列的长度

```
#check the len of queue
print(len(q._queue)) 
#you can print the content of the queue
print(q._queue)
#Can check the content of the queue
print(q.dequeue())
#Check the length of retrieved item 
print(len(q.dequeue())) 
```

检查附加屏幕截图中的结果

[![在此处输入图像描述](../Images/d91e4a68e9e66720136f20c9c55fcc32.png)](https://i.stack.imgur.com/GCWhW.png)

希望这可以帮助...

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2015-12-06T09:28:08.240

用于`queue.rear+1`获取队列长度

# c# - C# 单声道诊断 bash 与 perl 反引号

> ID：12548483
> 
> 赞同：1
> 
> 时间：2012-09-22T23:23:09.433
> 
> 标签：c#, perl, bash, mono

我已经在我的 ubuntu 机器上安装了 mono，我正在尝试启动一个使用 C# 启动其他几个子进程的进程，但是该程序有非常严格的要求，并且由于环境变量问题而无法正确启动。当我在 perl 中使用反引号调用程序时，它工作正常。有人可以告诉我如何在 C# 中模拟反引号函数吗？

```
 System.Diagnostics.ProcessStartInfo ps = new System.Diagnostics.ProcessStartInfo("bash");//perl /home/casey/Downloads/rosetta3.4/rosetta_tools/fragment_tools/make_fragments.pl tempsequence.fa
        ps.RedirectStandardInput=true;
            ps.RedirectStandardOutput = true;
        ps.RedirectStandardError = true;
        System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo = ps;
        ps.UseShellExecute = false;
        proc.Start();
        proc.StandardInput.WriteLine("cd "+ projectfolder+"/"+projectname+" ; perl /home/casey/Downloads/rosetta3.4/rosetta_tools/fragment_tools/make_fragments.pl tempsequence.fa;exit;");
            proc.WaitForExit(); 
```

这是它在 C# 下运行时生成的错误，它在 perl 中运行良好。

```
/home/casey/Downloads/sparks-x/bin/buildinp_query.sh: 4: [: /home/casey/Downloads/sparks-x: unexpected operator
/home/casey/Downloads/sparks-x/bin/psiblast.sh: 21: /home/casey/Downloads/sparks-x/bin/psiblast.sh: /blast/bin/blastpgp: not found
Traceback (most recent call last):
  File "/home/casey/Downloads/sparks-x/bin/buildinp.py", line 255, in run1
    buildinp(fphipsiss, fmat, finp)
  File "/home/casey/Downloads/sparks-x/bin/buildinp.py", line 238, in buildinp
    seq1, ssec1, phipsi1, Fphipsi = rdphipsi(fphipsiss)
  File "/home/casey/Downloads/sparks-x/bin/buildinp.py", line 9, in rdphipsi
    for line in file(fn):
IOError: [Errno 2] No such file or directory: 't001_.fasta.phipsi'
sparks failed!

no id specified. parsing filename instead.
INTERMEDIATE: tempsequence.fa
ID: t001 CHAIN: _
File for psipred not found! Generating from scratch instead.
picking fragments with options:
                       DEBUG: 1
            add_pdbs_to_vall: 
                       chain: _
                     cleanup: 1
exclude_homologs_by_pdb_date: 0
                           f: tempsequence.fa
                   fastafile: t001_.fasta
                        homs: 1
                          id: t001
                n_candidates: 1000
                     n_frags: 200
             old_name_format: 0
                  pick_frags: 1
                      porter: 0
                 porter_file: 
                     psipred: 1
                psipred_file: 
                      rundir: /media/d5ad6bd2-65b3-498f-8355-5b2c55ee42b2/top10demo/automate/projects/showerror
                       runid: t001_
                         sam: 0
                    sam_file: 
                 torsion_bin: 0
--------------------------------------------------------------------------------

FILENAME: t001_.fasta
Sequence: GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
running sparks for phi, psi, and solvent accessibility predictions
/home/casey/Downloads/sparks-x/bin/buildinp_query.sh t001_.fasta
running psiblast for sequence: t001_.fasta
At line 180 of file phipsi_ss0.f
Fortran runtime error: Bad real number in item 3 of list input
Aborting: Can't run first SS0 predictor
Error in file: t001_.fasta.phipsi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:13:22.583

我认为这里的问题是由创建的进程`System.Diagnostics`有一个默认的 EnvironmentVariables `null`。在这里查看 System.Diagnostics.ProcessStartInfo() 的定义：

[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)

EnvironmentVariables 属性是这样描述的：

> 获取文件的搜索路径、临时文件的目录、特定于应用程序的选项和其他类似信息。

而且，进一步看，EnvironmentVariables 文档在这里：

[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.environmentvariables.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.environmentvariables.aspx)

摘录：

> 提供适用于此进程和子进程的环境变量的字符串字典。默认值为空。

因此，您生成的“bash”外壳根本没有环境变量。如果您希望某些东西在 PATH 上或对您的 shell 可见，则需要确保它们已设置。或者，您可以对所有内容使用绝对路径。

在示例中，以下代码添加了一个 TempPath 环境变量：

```
myProcess.StartInfo.EnvironmentVariables.Add("TempPath", "/tmp")
myProcess.StartInfo.UseShellExecute = false; 
```

在更改 EnvironmentVariables 属性后，您必须将 UseShellExecute 属性设置为 false 才能启动进程。

# dojo - 无法在 Dojox 中关闭和重新打开浮动面板

> ID：12548488
> 
> 赞同：0
> 
> 时间：2012-09-22T23:24:05.847
> 
> 标签：dojo, floating

我正在尝试使用 onClick 事件打开一个浮动面板，它可以正常打开，但在控制台中显示此错误，`this.onClick is not a function`.

如果我关闭浮动面板然后尝试重新打开，它将不会再次打开，并且我会在控制台中不断收到相同的错误。

这是我的[应用程序](http://msgist2011.grd.arizona.edu/project/begin.html)。当您单击`Layers`工具栏中的按钮时，您可以看到一个浮动面板出现。

这是打开浮动面板的主要功能，

```
function addFloatingPanel() {
    var fp = new dojox.layout.FloatingPane({
        title: "Layers",
        resizeable: true,
        dockable: false,
        closable: true,
        style: "position:absolute; top:0; left:50px; width:245px; height: 175px; z-index: 100; visibility: hidden;",
        id: 'floater'
    }, dojo.byId('floater'));
    fp.startup();
    if (dojo.byId('floater').style.visibility === 'hidden') {
        dijit.byId('floater').show();
    } else {
        dojo.byId('floater').style.visibility = 'hidden'
        dijit.byId('floater').show();
    }
} 
```

我哪里错了？此外，浮动面板在 Firefox 中可见，但在 chrome 中不可见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:54:52.530

需要创建`dojo.connect`函数

```
<div data-dojo-type="dijit.form.Button" id="searchTool" >Search</div> 
```

对于`onclick`事件，

```
searchTl = dojo.byId('searchTool');
dojo.connect(searchTl, "onclick", openSrFp); 
```

并添加此功能，

```
var fp = dojo.byId('floater');
            if (fp.style.visibility=="hidden") {
                fp.style.visibility="";
            } else {
                fp.style.visibility="hidden";
            } 
```

# c++ - 如何编写可在 C++ 程序中使用的 C 头文件？

> ID：12548490
> 
> 赞同：13
> 
> 时间：2012-09-22T23:24:41.507
> 
> 标签：c++, c, macros

> **可能重复：**
> [如何检查（通过预处理器）是否将 C 源文件编译为 C++ 代码](https://stackoverflow.com/questions/4149229/how-to-check-via-the-preprocessor-if-a-c-source-file-is-being-compiled-as-c)

我正在尝试找到一个标准宏来测试头文件是被编译为 C 还是 C++。这样做的目的是标头可以包含在 C 或 C++ 代码中，并且必须根据具体情况略有不同。具体来说：

在 C 中，我需要这是代码：

```
extern size_t insert (const char*); 
```

在 C++ 中，我需要将其作为代码：

```
extern "C" size_t insert (const char*); 
```

此外，有没有办法避免在标题中的每个声明周围放置#ifdef？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-22T23:54:48.253

通常将 C 头文件如下括起来，以便它们可以在 C++ 程序中使用。检查您的系统头文件，例如 stdio.h，您可能会看到：

```
#ifdef __cplusplus
extern "C" {
#endif

...

#ifdef __cplusplus
}
#endif 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-22T23:24:41.507

答案是使用宏__cplusplus。在这种情况下，最直接的方法是：

```
extern
#ifdef __cplusplus
"C"
#endif
size_t insert (const char*); 
```

该宏是 C++ 标准的一部分。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-23T06:48:38.360

您可能会发现定义三个宏来帮助解决这个问题是合理的：

```
#ifdef __cplusplus
#define EXTERN_C_BEGIN extern "C" {
#define EXTERN_C_END   }
#define EXTERN_C       extern "C"
#else
#define EXTERN_C_BEGIN /* Nothing */
#define EXTERN_C_END   /* Nothing */
#define EXTERN_C       extern /* Or Nothing */
#endif /* __cplusplus */ 
```

这在项目中大多数地方都包含的标准标题中最有用。对于单个函数，您可以编写：

```
EXTERN_C size_t insert(const char *name); 
```

对于一组函数，您可以编写：

```
EXTERN_C_BEGIN

size_t other_insert(const char *name);
size_t other_delete(const char *name);
size_t other_update(const char *old_name, const char *new_name);

EXTERN_C_END 
```

允许在to块`extern`内的各个函数前面包含。`EXTERN_C_BEGIN``EXTERN_C_END`

# java - java - panel.getVisible？

> ID：12548493
> 
> 赞同：0
> 
> 时间：2012-09-22T23:24:50.913
> 
> 标签：java, swing, if-statement, jpanel, visible

这可能是一个愚蠢的问题，但我没有在谷歌等上找到任何东西......所以我有一个面板，想知道它是否可见

```
if (pnlUnten.getVisible == false) 
```

这个似乎不起作用。

```
if (pnlUnten.isVisible == false)

if (pnlUnten.isVisible) 
```

两者都不是

我认为我的问题有一个非常简单的解决方案，但我无法弄清楚..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T01:03:26.817

看起来 isVisible 只是面板是否可见的指示。如果它是真的，那么它是可见的，如果它的*父母*是可见的。因此，如果您想使用此属性，您似乎需要将其与检查父级结合起来。我有一个快速的去，但没有彻底。

我的代码：`if (panel.isVisible() && panel.getParent().isVisible())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T01:07:58.090

`JPanel#getVisible()`不是方法，而是[`JPanel#isVisible()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#isVisible%28%29)继承自 Component。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-21T10:18:35.013

您需要做的就是：

```
//this code checks if its visible

if (pnlUntel.isVisible())
    //do something

//this code below checks if its not visible

if (!pnlUntel.isVisible())
    //do something 
```

[例子]

# c - 逐行读取字典文件需要带有大量空格的字符串

> ID：12548496
> 
> 赞同：0
> 
> 时间：2012-09-22T23:25:12.153
> 
> 标签：c, file-io, strcmp

我正在逐行读取字典文件并取每一行，然后将其与字符串进行比较。我的问题是我不知道如何在每一行上动态分配字符串的长度以删除空格。看到我的代码后，我会解释这一点：

```
FILE *f;
f = fopen("/usr/share/dict/words", "r");
if (f != NULL)
{
    // maximum size of line, keep it at 128 just in case
    char line[128] = "";

    // run through every line of file
    while (fgets(line, sizeof(line), f))
    {
        if (strcmp("hello", line) == 0)
            printf("The string is %s!", line);
    }
} 
```

所以我必须初始化“行”变量以获取任何行的最大长度。只是如果该行小于该值 128，它只会在末尾添加空格，从而导致无效比较。我该如何改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:26:34.220

不，它不会添加大量的空格，但会将`fgets`换行符留在缓冲区中。所以你通常有一个尾随空格字符。修复它

```
int len = strlen(line);
if (line[len-1] == '\n') {
    line[len-1] = 0;
} 
```

# c++ - OS X 中的 C++ 生成 shell

> ID：12548498
> 
> 赞同：1
> 
> 时间：2012-09-22T23:25:20.437
> 
> 标签：c++, macos, shell, terminal

如果有人问过并回答过这样的问题，我很抱歉；我环顾四周，但找不到任何东西。

我是 C++ 的超级新手，我在 XCode 中创建了一个命令行二进制文件，该二进制文件从 GUI 应用程序中调用。命令行二进制文件执行一个 shell 脚本。（在你说什么之前，是的，我已经意识到这是一个不必要的事件链，但不幸的是它必须是这样。）所以操作的顺序是 GUI -> 二进制 -> shell 脚本。一切运行良好，除了没有输出可言。我想以某种方式，以某种方式，产生一个终端，并让在 shell 脚本中执行的命令的输出回显到终端。这在 C++ 中有可能吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:56:07.763

我设法让终端运行`ls`：

```
#include <stdlib.h>

int main() {
  system("open -a Terminal /bin/ls");
  return 0;
} 
```

至于调用可执行文件的GUI，正常的架构是将可执行文件的核心逻辑放在一个共享库中。这样，GUI 和命令行程序都可以通过链接库来获得所需的功能。

# php - 嵌入式 PHP 不执行或呈现

> ID：12548499
> 
> 赞同：0
> 
> 时间：2012-09-22T23:25:58.003
> 
> 标签：php

我有一个这样的 PHP 页面：

```
<?
... Some PHP code here ...
?>
<html>
    <head>
        <script>
            ... Some JavaScript code here ...
            <?= $someVariable ?>
            ... Some more JavaScript code here ...
        </script>
    </head>
    <body>
    </body>
</html> 
```

问题是代码：

```
<?= $someVariable ?> 
```

在生成的 HTML 中看起来没有变化：它没有被执行或呈现。然而，最初的 PHP 部分正常执行（我通过在第一个 PHP 块中添加“echo”调用来验证这一事实）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T23:30:15.800

使用**完整**的语法`<?php ... ?>`

如果您的 PHP 低于 5.4，您可以在 php.ini 中启用 shorttag 将“short_open_tag”设置为“On”

从**PHP 5.4**开始，您可以使用短标签，而不管短标签设置如何

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T23:30:09.273

您正在使用一种称为短标签的功能，默认情况下通常禁用该功能。将这些标签替换为`<?php print $someVariable ?>`或[启用短标签](https://stackoverflow.com/questions/2185320/how-to-enable-php-short-tags)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:59:31.823

```
<?php echo $someVariable; ?> 
```

# tcp - TCP 中的重复段

> ID：12548501
> 
> 赞同：2
> 
> 时间：2012-09-22T23:26:14.847
> 
> 标签：tcp

在阅读[RFC793](http://www.rfc-editor.org/rfc/rfc793.txt)时，我了解到应该以防止段重叠的方式选择初始序列号。

有人可以解释重复段如何影响发生重叠的 TCP 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:33:05.837

不同的操作系统有不同的行为。[请参阅http://insecure.org/stf/secnet_ids/secnet_ids.html](http://insecure.org/stf/secnet_ids/secnet_ids.html)的第 4.3.2 节

我在这里复制了该表：

```
Operating System    Overlap Behavior
Windows NT 4.0  Always Favors Old Data
4.4BSD  Favors New Data for Forward Overlap
Linux Favors New Data for Forward Overlap
Solaris 2.6 Always Favors Old Data
HP-UX 9.01  Favors New Data for Forward Overlap
Irix 5.3    Favors New Data for Forward Overlap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:28:59.950

它不会发生。序号选择在`a way that segment-overlapping is prevented`

**更新**

初始序列号*优选地*是随机数。在此之后，为每个段分配一个序列号，该序列号等于其距数据流开头的偏移量和初始序列号的总和。因此，即使某些实现决定重新发送某个段甚至将其拆分为多个段，也不会发生任何危险 - 如果我们将流视为内存空间，则该段在流中具有它的“地址”

**更新**

考虑到您的问题的编辑。实际上确实发生了段的重复。例如，当接收器检测到它错过了某个段时，就会发生这种情况。然后它通过发送拒绝请求发送方重新发送该段。但是随后丢失的、最初发送的段到达了。在此之后，被重新发送的第二段到达。然后接收器要么只是丢弃已经接收到的段，要么用最新版本覆盖其缓冲区中的数据。在任何情况下，如果堆栈错过了该数据之前的某个段，则堆栈不会以任何方式通知上层某些数据已到达。

# python - Python mechanize 在某个 if 条件下失败，但在另一个条件下成功......不知道为什么

> ID：12548507
> 
> 赞同：1
> 
> 时间：2012-09-22T23:27:34.037
> 
> 标签：python, mechanize

这是一个简单的机器人，它登录到 vbulliten 留言板，扫描线程中的某些文本，然后以新格式的方式发布此文本。在我的 while 循环中，我有一个 if else 条件，其中 x == 1 用于测试目的。当我这样做时，mechanize 工作正常，它选择了正确的形式，并且代码运行良好。但是，当我简单地将 if else 更改为基于某个时间时，我会收到“formnotFound”错误。

```
from BeautifulSoup import BeautifulSoup
from datetime import datetime
import mechanize
import re
import sqlite3
import time

def login(page):

    br = mechanize.Browser()
    br.set_handle_redirect(True)
    br.set_handle_referer(True)
    br.set_handle_equiv(True)
    br.set_handle_refresh(True)
    br.set_handle_robots(False)
    br.addheaders = [('User-agent', 'Firefox')]

    br.open("http://www.nottherealsite.com")

    br.select_form(nr=0)
    br.form['vb_login_username']='notrealusername'
    br.form['vb_login_password']='notrealpassword'
    br.form['cookieuser'] = ['1']
    br.submit()
    br.open(page)

    return br

br = login("http://www.nottherealsite.com")
html = br.response().read()
soup = BeautifulSoup(html)
x = 1

# Ahead you'll see two functions, insertData() and extraction().
# I didn't include them in my submission here 
# because I don't think it's necessary. they dont involve anything to do with 
# mechanize, they just strip data out of the pages. The functions also work fine
# with the x==1 conditional, fyi

while True:
    now = datetime.now()
    minute = now.minute 
```

这工作正常：

```
 if x == 1:

        print "it is working . . ."
        insertData()
        votes = extraction()
        br.select_form(nr=6)
        br.form['message'] = votes
        br.submit()

        x = 2

    else:

        print "we are now done"
        break 
```

如果我替换`x== 1`为`minute > 30`，我会在 mechanize 中收到一个 form not found 错误（是的，时间已超过 30 分钟）：

```
 if minute > 30:

            print "it is working . . ."
            insertData()
            votes = extraction()
            br.select_form(nr=6)
            br.form['message'] = votes
            br.submit()

            # remember, I am just concerned about mechanize going through
            x = 2

        else:

            print "we are now done"
            break 
```

我知道可能很难说出我在做什么实际的事情，但请记住，上面的代码现在是用于测试目的。有谁知道为什么当我更改 if else 语句时机械化会失败？这对我来说没有任何意义。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:48:00.387

几天前，我曾经在其他语言（C#）中遇到过类似的问题。我不知道我的解决方案是否适用于您。

我的解决方案是：等到网页完全加载。如果您的库 (machanize) 在页面完全加载时提供了回调，请使用它。或者等待几秒钟。

# javascript - 树形结构——仅从根节点onload开始

> ID：12548509
> 
> 赞同：0
> 
> 时间：2012-09-22T23:27:57.367
> 
> 标签：javascript, d3.js, tree-structure

我正在构建一个树形图，如下所示：[http](http://bl.ocks.org/2503502) ://bl.ocks.org/2503502 。

我想要一棵所有节点都折叠的树，所以初始图应该只包含一个节点（根）。页面加载时，只应显示根节点，然后单击时，将显示其余的子节点。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:16:23.247

我可以看到这是不久前被问到的，但无论如何我都会回答，因为我处于类似的情况。

您在这里有几个选项，具体取决于您是否希望根节点可单击以及子节点完整显示（单击根节点后），因为它当前显示在您提供的示例中，或者您是否希望所有子节点也会崩溃。

**选项 1**（仅根节点折叠）

在初始化`d3`对象时，在函数中使用`update(root);`（为其执行`ctrl`+`f`或`cmd`+ `f`）进行编码，放入`toggle(root)`. 变量名称`root`根据给出的示例，您的版本和函数名称可能不同（因为您没有提供示例代码来解决）。

**选项 2**（所有节点折叠）

您执行与上面的选项 1 相同的操作，但就在新插入之前，`toggle(root);`您还放置了`root.children.forEach(toggleAll);`where`toggleAll`是您还需要插入的函数：

```
function toggleAll(d) {
    if (d.children) {
        d.children.forEach(toggleAll);
        toggle(d);
    }
} 
```

**替代选择**

我给出的选项不限于以上。如果您按照 brantolsen.github.com 的这个示例（[https://stackoverflow.com/a/11649427](https://stackoverflow.com/a/11649427)），您会发现其他实现您想要实现的目标的示例。

# ruby - 在 Rails 中导致 session_store 语法错误的 ruby 1.8.7 和 1.9.3 有什么区别？

> ID：12548511
> 
> 赞同：0
> 
> 时间：2012-09-22T23:28:33.533
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在关注 Mike Hartl 的 rails 教程，并使用 rails 3.2.8 创建了一个简单的应用程序。

“rails 控制台”命令爆炸了；稍加修改后发现我的 ruby​​ 环境神秘地恢复到 ruby​​ 1.8.7。（为什么还不明白。）错误信息：

...path.../lib/active_support/dependencies.rb:245 in 'load': ...path.../demoapp/config/initializers/sessions_store.rb:3: 语法错误，意外':'，期待 $end (SyntaxError)

快速切换回 ruby​​ 1.9.3p194（使用 RVM）似乎已经成功了。我的开发平台是 Ubuntu 12.04。

像往常一样，Rails 错误消息堆栈没有多大帮助。导致此错误的 1.8.7 和 1.9.3 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:28:50.710

在 1.8 中不起作用的行是

```
 Xxx::Application.config.session_store :cookie_store, key: '_xxx_session' 
```

它使用新的哈希表示法。为了使其适用于 1.8 将其更改为

```
 Xxx::Application.config.session_store :cookie_store, :key => '_xxx_session' 
```

# r - 对具有逻辑条件的向量进行子集化

> ID：12548517
> 
> 赞同：3
> 
> 时间：2012-09-22T23:29:09.240
> 
> 标签：r

```
> x1=c(4,5,6,7,8)
> x1
[1] 4 5 6 7 8
> x2=x1[x1!=6]
> x2
[1] 4 5 7 8
> x3=x1[x1=6]
> x3
[1] NA 
```

为什么`x3`不是6？我不明白。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T23:37:08.773

`=`是赋值运算符。通过使用`x1[x1=6]`，您正在分配`6`to的值，而`x1`不是检查它们是否匹配。在`?assignOps`R 提示符下输入以获取更多信息。改为使用`==`。

```
x3=x1[x1==6] 
```

# content-management-system - CMS 系统是否应该使用消息队列架构？

> ID：12548518
> 
> 赞同：0
> 
> 时间：2012-09-22T23:29:58.593
> 
> 标签：content-management-system, rabbitmq, message-queue

最近，我一直在涉足内容管理系统，并从 twitter 阅读了一些“经验教训”，他们的主要瓶颈之一是他们一开始没有使用消息队列系统。现在，我的 CMS 没有使用消息队列架构，但我越来越看到它的好处。所以我一直在想，我应该使用消息队列系统吗？如果可以，其中应该包含多少功能（即内容发布、通知等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:40:43.563

使用消息队列的几个很好的理由。1\. 它们是不稳定系统的良好前端。如果系统关闭，仍然可以捕获该操作。2\. 节流 - 动作来得太快，系统无法处理，但需要记录并延迟处理。3\. 事件触发：如果多个服务需要对单个客户端事件做出反应，则让消息队列系统负责此通信。4.帮助异步处理事件。

我没有看到内容发布受益于消息队列。听起来无论如何都应该同步完成。然而，通知可能是一个不错的选择。

# jquery - 无法在选项卡悬停状态下生成 jQuery 淡入/淡出

> ID：12548521
> 
> 赞同：0
> 
> 时间：2012-09-22T23:30:39.163
> 
> 标签：jquery

只是为了设置场景，我对 jQuery（但不是网页设计）缺乏经验，所以在这里我会很感激一些帮助！

基本上，我试图让导航栏上的悬停状态淡入（悬停时）和淡出（鼠标关闭）。这是一个简单的导航栏，没有图像，只是伪选择器加倍作为类，这样 jQuery 就可以实际选择 CSS 好了。

我尝试了许多脚本，但似乎找不到我要找的东西。代码很简单，解决方案很简单，但我绝对没有运气，所以我们开始吧。

**HTML：**

```
<ul>
    <li><a class = "tab selected" href = "index.html">home</a></li>
    <li><a class = "tab" href = "portfolio.html">portfolio</a></li>
    <li><a class = "tab" href = "index.html">contact</a></li>
</ul> 
```

**CSS：**

```
nav ul li a.tab { 
    display: inline-block; 
    padding: 15px 20px; 
    min-width: 40px; 
}   

nav ul li a.tab:link, nav ul li a.tab.link { 
    padding: 15px 20px; 
    color: #656359; 
    text-align: center; 
}

nav ul li a.tab:visited, nav ul li a.tab.visited { color: #656359; }

nav ul li a.tab:hover, nav ul li a.tab.hover { 
    padding: 15px 20px; 
    background-color: #d5d1bc; 
}

nav ul li a.tab:active, nav ul li a.tab.active { color: #901f78; } 
```

**jQuery：**

```
$('.tab.hover').hover(
    function(){
        $(this).fadeIn();
    }, 
    function(){
        $(this).fadeOut();
    }        
); 
```

我也尝试使用 mouseover/mouseout 功能，但没有运气。我只是在浏览器中没有任何变化。我的 jQuery 文件也正确连接。

这是一个非原创的帖子，但经过 2 天的研究，我没有想法，所以提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:48:41.773

这可以通过 CSS3 完成。

您可以通过将以下 CSS 放入类中来设置项目的背景过渡以缓入和缓出`tab`：

```
transition: background .5s ease-in-out;
-moz-transition: background .5s ease-in-out;
-webkit-transition: background .5s ease-in-out; 
```

您可以通过更改第二个参数的值来更改淡入淡出时间（.5s 为 0.5 秒）

工作示例：http: [//jsfiddle.net/BGKyp/1/](http://jsfiddle.net/BGKyp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:04:35.303

尝试这样的事情：

```
$(function(){
  $('.tab').parent().hover(
    function(){
        //$(this).find('.tab').stop().fadeIn();
        $(this).find('.tab').stop().fadeTo("fast",1);
    }, 
    function(){
        //$(this).find('.tab').stop().fadeOut(); //this sets display to 'none'; so we cant have hover events again; switch to 'fadeTo()' instead
        $(this).find('.tab').stop().fadeTo("fast",0.01);        
    }        
  );  
}); 
```

和CSS如下：（我假设你`<ul>`在里面`<nav>`）

```
nav ul li{
    height: 40px;
}
nav ul li a.tab {  
    padding: 15px 20px; 
    min-width: 40px; 
}   

nav ul li a.tab:link, nav ul li a.tab.link { 
    color: #656359; 
    text-align: center; 
}

nav ul li a.tab:visited, nav ul li a.tab.visited { color: #656359; }

nav ul li a.tab:hover, nav ul li a.tab.hover { 
    background-color: #d5d1bc; 
} 
```

# javascript - 页面通过AJAX调用多次调用，找不到原因

> ID：12548527
> 
> 赞同：0
> 
> 时间：2012-09-22T23:32:24.093
> 
> 标签：javascript, jquery, wordpress

我觉得这是我只需要别人看的那些事情之一。我正在尝试通过后端加载我的页面，但我遇到了一个小问题。如果您可以推荐一种更清洁的方法，请这样做。但是现在我的问题是偶尔，特别是如果我快速连续点击，它实际上会多次获取页面。当然，这使它看起来令人难以置信的错误并破坏了我正在做的事情的全部意义。

[您可以在http://new.potentstudios.com](http://new.potentstudios.com)上查看该网站

点击页面足够，你会看到我在说什么。

我不太确定需要什么样的更多信息。我完全被难住了。我今天花了几个小时在它上面，它有这个问题。我怀疑这与哈希更改检测有关，但我无法确认。

谁至少能帮我找到答案，谁就是我永远的好朋友。

编辑：这是有问题的 Javascript 源文件。在 IMO 代码标签中发布太长了。

[http://new.potentstudios.com/wp-content/themes/Potent/scripts/main.js](http://new.potentstudios.com/wp-content/themes/Potent/scripts/main.js)

EDIT2：我现在可以确认它与 hashchange 有关，但是我不知道为什么它会这样做两次。谁能看到我在哪里更改哈希两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:06:20.763

我不知道我是否正确理解了您的问题，但看起来您在另一个完成之前发送了一个 ajax 请求。如果是这种情况，请尝试使用以下方法中止前一个：

```
jsXHR=null;
$('#myLink').click(function(){
     if(jsXHR)
         jsXHR.abort();
     jsXHR=$.get('my.url',function(data){
           jsXHR=null;
           $('#myTarget').html(data);
           //(...)
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:09:11.610

甚至无需查看您的代码就可以建议两件事。

1.  从 Ajax 函数返回 false
2.  在你的 $(".class").click(function(){ 添加 $(this).unbind('click');

# vba - 为什么 Excel/VBA 不显示“黑色大圆圈”标志？

> ID：12548530
> 
> 赞同：1
> 
> 时间：2012-09-22T23:33:15.647
> 
> 标签：vba, unicode

为什么 ChrW 在我的系统上不接受“BLACK LARGE CIRCLE”（U+2B24）（参见 [http://www.fileformat.info/info/unicode/char/2b24/index.htm](http://www.fileformat.info/info/unicode/char/2b24/index.htm)）？我只看到一个空方块（◻）......

我试过这个：

```
ActiveSheet.Cells(1, 1) = ChrW(9608) 'works fine, gives 'FULL BLOCK' (U+2588)
ActiveSheet.Cells(1, 1) = ChrW(9608) 'works fine, gives 'BLACK CIRCLE' (U+25CF)
ActiveSheet.Cells(1, 1) = ChrW(11044) 'does not work, should give 'BLACK LARGE CIRCLE' (U+2B24) 
```

我的系统是 Windows 7，我使用的是 MSO 2007。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T23:45:12.570

CharW 正确接受 Unicode U+2B24 字符，但您使用的字体没有为 U+2B24 定义[字形。](http://en.wikipedia.org/wiki/Glyph)

假设您使用的是默认 Arial，如果您运行 Character Map，您将看到 Arial 没有为 U+266F 和 U+2C60 之间的任何内容定义任何字形。

任何未定义的 Unicode 字符都显示为一个块，这就是您所看到的。如果您想使用 U+2B24，您将必须找到一个为该代码点定义了字形的字体。

# html - css - 背景太宽

> ID：12548531
> 
> 赞同：-1
> 
> 时间：2012-09-22T23:33:49.180
> 
> 标签：html, css, background

我的 CSS 网站的小问题。我正在将我的 PS 设计转换为 html5 和 css3 网站，看起来我的页面顶部和底部的背景图像太大（1600 像素）。如果我想保持整个网站的外观和感觉，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:44:52.163

你让你的CSS如下

```
body, elementID, elementClass{
    margin: 0px;
    width: 100%;
} 
```

无论用户的屏幕分辨率如何，您的页面或 div 或容器都将适合屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:42:51.410

如果您的问题更清楚一点，那就太好了，但这里是：

网站的浏览方式很大程度上取决于访问者使用的屏幕分辨率。例如，用户 A 的分辨率可能为 1920 x 1080。这意味着他们可以轻松查看您的所有网站。而另一个用户可能只有 1024 x 768，这显然不足以看到所有 1600 像素！

要解决这个问题，很大程度上取决于您网站的设计，背景是可以重复的（例如渐变），还是有点棘手，例如天际线？

如果很简单，您可以使用 CSS 水平、垂直或同时重复背景。

您还可以使用 CSS 定位背景（例如顶部居中），这将使您的背景居中，切断越过屏幕两侧的边缘，同时保持中间部分可见。

在 CSS3 中，您还可以获得一个名为“background-size”的属性，它允许您定义背景的反应方式。这可以有几个值，它们是：

*   *封面*- 这确保整个图像适合它的容器（以便整个图像可见）。
*   *包含*- 这使图像适合整个容器，因此它的某些部分可能不可见。
*   *dimensionx dimensiony* - 如果您指定一个值/百分比，第一个值/百分比将是宽度，第二个值/百分比是高度。如果只提供一个，它用于宽度和高度设置为自动。

请注意，并非所有浏览器都支持背景大小。

背景大小的演示：http: [//davidwalsh.name/demo/background-size.html](http://davidwalsh.name/demo/background-size.html)

# java - 如何翻转像素图以绘制到 libgdx 中的纹理？

> ID：12548532
> 
> 赞同：12
> 
> 时间：2012-09-22T23:33:57.057
> 
> 标签：java, textures, libgdx, flip

所以我要做的是通过将像素图绘制到纹理来为我的游戏生成背景图像。到目前为止，我可以做到这一点，但现在我需要将在 X 或 Y 轴上翻转的像素图绘制到纹理上。但是我找不到任何事情要做。pixmap 类不提供该功能。然后我想我可以将翻转的纹理区域绘制到纹理上，但到目前为止我还没有找到如何做到这一点。所以我想知道我该怎么做这样的事情，是否可以使用其他 java 库翻转 png 图像，然后从翻转的图像创建像素图？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-02T20:53:42.710

除了迭代像素，我也看不到其他选项：

```
public Pixmap flipPixmap(Pixmap src) {
    final int width = src.getWidth();
    final int height = src.getHeight();
    Pixmap flipped = new Pixmap(width, height, src.getFormat());

    for (int x = 0; x < width; x++) {
        for (int y = 0; y < height; y++) {
            flipped.drawPixel(x, y, src.getPixel(width - x - 1, y));
        }
    }
    return flipped;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T04:11:39.873

这是一个不需要创建新像素图的解决方案。还可以修改此代码以通过交换像素图图像的角而不是交换图像相对两侧的像素来水平和垂直翻转像素图。

```
public static void flipPixmap( Pixmap p ){
    int w = p.getWidth();
    int h = p.getHeight();
    int hold;

    //change blending to 'none' so that alpha areas will not show
      //previous orientation of image
    p.setBlending(Pixmap.Blending.None);
    for (int y = 0; y < h / 2; y++) {
        for (int x = 0; x < w / 2; x++) {
            //get color of current pixel
            hold = p.getPixel(x,y);
            //draw color of pixel from opposite side of pixmap to current position
            p.drawPixel(x,y, p.getPixel(w-x-1, y));
            //draw saved color to other side of pixmap
            p.drawPixel(w-x-1,y, hold);
            //repeat for height/width inverted pixels
            hold = p.getPixel(x, h-y-1);
            p.drawPixel(x,h-y-1, p.getPixel(w-x-1,h-y-1));
            p.drawPixel(w-x-1,h-y-1, hold);
        }
    }
    //set blending back to default
    p.setBlending(Pixmap.Blending.SourceOver);
} 
```

# compiler-construction - 为什么相同的脚本语言不使用“var”字来声明？

> ID：12548533
> 
> 赞同：0
> 
> 时间：2012-09-22T23:34:24.107
> 
> 标签：compiler-construction

例如，在 Lua 和 Python 中：

```
num = 3; 
```

另一方面，其他语言如 JavaScript 使用 'var'：

```
var num = 3; 
```

我认为使用“var”字应该比“num = 3”更快地将“var num = 3”解析为变量声明（或者我错了吗？）。

那么，为什么相同的脚本语言不使用“var”字来声明变量呢？这无关紧要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:38:38.630

有几个可能的原因：

1.  语义可能不同（例如在 JavaScript 中`foo = 1`做`var foo = 1`不同的事情）
2.  语言的语法可能需要它（帮助解析器在多个解析树之间消除歧义）
3.  它可能存在，因为语言的设计者决定它以这种方式读取更一致（IIRC 我在某处读到，从解析器的角度来看，C# 可能已经删除了`var`in 隐式类型变量，但保持它使语言保持一致）

# r - R找不到函数pure.error.anova

> ID：12548535
> 
> 赞同：0
> 
> 时间：2012-09-22T23:34:32.797
> 
> 标签：r, anova

我正在尝试创建一个带有纯错误和的**ANOVA**`lack-of-fit errors`表，但是当我尝试使用该函数时， **R**`pure.error.anova`给了我以下消息：

```
Error: could not find function pure.error.anova 
```

为什么找不到这个函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T23:43:56.740

那是因为该功能现在已被弃用。改为使用`pureErrorAnova`。

```
library(alr3)
?pureErrorAnova # to see the help file. 
```

# internet-explorer - HTML 中的 IE 注释会触发怪癖模式吗？

> ID：12548536
> 
> 赞同：0
> 
> 时间：2012-09-22T23:34:38.347
> 
> 标签：internet-explorer, quirks-mode

我准备在接下来的一周发布一些东西，我相信一切都已经完成，直到我在 IE 中查看了该网站。

我对所有这些东西完全是新手，只是在学习。我决定进行一些搜索并尝试修复它。我仍然不完全理解 Quirks 模式，但我遇到了这条评论，说如果在 DOCTYPE 之前除空格之外的任何内容（包括评论），任何版本的 IE 中的 Quirks 模式也会被触发。

我在 DOCTYPE 之前没有任何内容——但我很好奇评论是否会触发怪癖模式？这是要查看的当前代码：

```
<html>
  <head>
    <title>Lunity Inc.</title>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="css/styles.css" id="styles" />
    <script language="javascript" type="text/javascript" src="http://www.onbile.com/redirection/77kzusf6mr3skx3ctwqt18n6fgzuc47meo0qeccyexto4fovio">   </script>
<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<!--[if IE 7]>
    <link media="screen,projection" type="text/css" rel="stylesheet" href="css/ie7.css" />
<![endif]-->
<!--[if IE 8]>
    <link media="screen,projection" type="text/css" rel="stylesheet" href="css/ie8.css" />
<![endif]-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="js/full_bg.js"></script>
<script type="text/javascript" src="js/myscript.js"></script>
<script type="text/javascript">
    jQuery(window).load(function() {
        jQuery(".bg").fullBg();
    });
  </script>
 </head> 
```

如果这被接受，那么为什么我的网站在 IE 中显示不同？在 IE8 中，它看起来好像根本没有应用 css，而在 IE9 中，字体和字体大小都关闭了。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:42:14.810

你真的在使用任何 DOCTYPE 吗？（如果不是，你应该）

```
<!DOCTYPE html>
<html>
<head> 
```

[是] DOCTYPE 之前的任何字符都可能使 IE 进入怪癖模式...

注释不应触发 quirksmode（除非将一个放在 doctype :p 之前）

# css - 固定高度元素下侧边栏中的动态高度元素

> ID：12548537
> 
> 赞同：0
> 
> 时间：2012-09-22T23:35:11.977
> 
> 标签：css, height, stylesheet, html

我有一个用户应用程序的流畅 CSS 布局。目标是大内容区域（白色）和深蓝色#notiarea 将扩展以填充客户端桌面。目标是让#notiarea 扩展以填充用户桌面的其余部分。

#notiarea 和内容 div 将具有如下图所示内容的滚动条。

我的问题是如何让深蓝色 (#notiarea) 元素仅扩展到应用程序视图区域高度的其余部分？**我如何让#notiarea 在所有固定高度元素下的高度保持流动**，而不是我需要使用 css 标签“overflow:auto;”的能力？我更喜欢 css 解决方案，但我会接受 jQuery 解决方案。

![例子](../Images/d1837642bf53c5b7b76a0183ba60eeb3.png)

**源代码：**这是一个用于快速实验的 jsfiddle：http: [//jsfiddle.net/YLZRb/](http://jsfiddle.net/YLZRb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:01:49.733

好吧，不用解释（我希望代码自己说话）我给你语义方法..

[http://jsfiddle.net/YLZRb/6/](http://jsfiddle.net/YLZRb/6/)

```
<header>

</header>
<div class="content">
    <aside>
        <section class="post">

        </section>
    </aside>
    <section class="main">

    </section>
</div> 
```

和CSS

```
html,body{
    height: 100%;
    width: 100%;
    padding: 0px;
    margin: 0px;
}
body {
    background-color: #a3badc;
}
header {
    background-color: #515c6e;
    height:67px;
    box-shadow: rgba(0, 0, 0, 0.746094) 0px 5px 5px 0px;
    position: fixed;
    width: 100%;
    top: 0px;
    left: 0px;
    z-index: 9999;
}

.content {
    height: 100%;

}
.content aside {
    position: fixed;
    background-color: #032d3b;
    width: 230px;
    height: 100%;
    top: 67px;
    left: 0px;
}
.content aside .post {
    width: 100%;
    height: 220px;
    background-color: #1d779c;
}
.main {
    margin-top: 67px;
    display: inline-block;
} 
```

​ ​</p>

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:39:41.363

演示：[http ://dabblet.com/gist/3768929](http://dabblet.com/gist/3768929)

我使用*非常*有用的“box-sizing:border-box”属性来获得这个结果，请在此处阅读：paulirish.com/2012/box-sizing-border-box-ftw/

它与 IE8+ 兼容，您只需为 IE7 及以下版本稍微调整布局即可。你可以给侧边栏“位置：绝对”......这是最好的一个（没有太多麻烦）。

好吧，我之前已经做了无数次类似的布局，并且非常感谢 box-sizing 属性。以下是对更改的快速回顾：

#sidebar 现在有一个 'padding-top' 值等于 #newpostcreator 的高度。然后，#newpostcreator 再次使用负顶部定位将其拉回原位，其值等于其高度，在我们的示例中为：-206px。

请注意，我还使用“*”通用选择器为每个元素“位置：相对”。当您在页面上有多个绝对定位元素时，这非常有用，因此您不必为每个相应的容器指定相对定位。这主要是一个 DRY（不要重复自己）的事情，并使代码更清晰。这也通过'top''left''right'和'bottom'为每个元素提供了额外的位置控制。

此外，由于#sidebar 是“位置：固定”，它会从布局中移除并相对于视口定位。所以我们需要一些空白空间让它在不中断/重叠页面内容的情况下休息。我通过给 #container 一个等于侧边栏宽度的 padding-left 值来做到这一点。但我看到你已经在你的小提琴中做到了。我只是稍微改进了一下。

现在回到侧边栏，我提到给它一个 206 像素的 padding-top。要了解这背后的逻辑，您应该了解 box-sizing 在布局中的作用。基本上，带有“border-box”的元素的填充和边框都位于*容器内*。因此，无论您指定元素的宽度如何，添加填充/边框都不会添加其最终宽度/高度，它将包含在其中。请记住，这不适用于边距。

因此，侧边栏中剩余的空间减去 206px 的填充是 100%，我们现在将其分配给 #notiarea。

差不多就是这样。如果您研究代码，您将获得比我能够提供的更好的理解。请务必查看链接，并记得为旧版本的 Firefox、Opera 和 Chrome 添加供应商前缀到 box-sizing。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:57:23.727

好的！，就在这里.. [http://jsfiddle.net/Ghcgr/](http://jsfiddle.net/Ghcgr/)

Jsfiddle 有 css 问题，因为它的 iframe 属性和 css 将在独立页面上工作.. 确保你确定`clear`，`float`并且`width`[sidebar and ajxpage]

# c# - 如何读取文本文件中的所有文本并将其添加到自动完成？

> ID：12548543
> 
> 赞同：-1
> 
> 时间：2012-09-22T23:37:35.717
> 
> 标签：c#, .net, autocomplete, io, autofill

如何读取文本文件中的所有文本并将其添加到自动完成？（C# Windows 应用程序）

我想要的是：-

```
foreach (string str in File.ReadAllLines("sometext.txt"))
{
    AutoComplete.Items.Add(str);//this code not works it's just example
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:57:21.527

在您的文本框 (textBox1) 属性中将您的 AutoCompleteMode 设置为您想要的，然后将您的源设置为“自定义”然后将文件中的每一行或字符或任何内容加载到字符串数组中，最后使用 AddRange 函数：

字符串[]颜色=新字符串[] {“红色”、“蓝色”、“绿色”、“黄色”}; textBox1.AutoCompleteCustomSource.AddRange(colors);

因此，对于您的情况，请使用： StreamReader sr = new StreamReader("somefile.txt");

while ((line = sr.ReadLine()) != null) { //将您的行添加到字符串数组中，无论您的标准可能是数组中的每个元素 }

textBox1.AutoCompleteCustomSource.AddRange(/*你的字符串数组在这里*/);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-22T17:28:51.347

`MultiLine`如果为文本框启用，请取消选中`Multiline`选项并加载此代码以形成加载。这将从`autocomplete.txt`项目目录中加载行。

```
string[] autosource= File.ReadAllLines(@"autocomplete.txt");
for(int g = 0; g < autosource.Length; g++)
{
    textboxname.AutoCompleteCustomSource.Add(autosource[g]);
}
textboxname.AutoCompleteMode = AutoCompleteMode.SuggestAppend; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-27T14:38:53.297

将此代码放在您的 Form_load 或任何其他方式中，以便可以启动它。

```
 string[] autosource= File.ReadAllLines("C:\\autocomplete.txt");
        for(int i = 0; i < autosource.Length; i++)
        {
            txt_searchfiled.AutoCompleteCustomSource.Add(autosource[i]);
        } 
```

希望这有帮助。

# jquery - Ajax 获取调用以填充数组变量

> ID：12548544
> 
> 赞同：1
> 
> 时间：2012-09-22T23:37:38.977
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, tag-it

我正在使用 Jquery Tagit。

它提供了一个选项“AvailableTags”，它接受一个项目数组来填充自动完成。

当我将接收到的数组传递给 Tagit 调用时，我的 ajax get 调用似乎不起作用，即使它似乎正在生成我需要的适当数据（填充数组）。

AJAX

```
$.ajax({
type: 'get',
url: 'gettags.php',
data: "",
dataType: 'json',
success: function(data) {
sampleTags = data;
}
})

$('#singleFieldTags').tagit({
availableTags: sampleTags,
singleField: true,
singleFieldNode: $('#mySingleField'),
allowSpaces: true
}); 
```

PHP

```
$sql = "SELECT tag FROM tags"; 
$result = mysql_query($sql);

$data = array[];

while ($row = mysql_fetch_row($result)) {
$data[] = $row;
}

echo json_encode($data); 
```

我只是试图通过变量 sampleTags 将返回的数组传递给 Tagit 的“availableTags”，但它似乎不想继续。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:39:03.173

`$.ajax()`是异步执行的，所以你需要在`success`回调中直接处理数据：

```
$.ajax({
    type: 'get',
    url: 'gettags.php',
    data: "",
    dataType: 'json',
    success: function(data) {
        var sampleTags = data;
        $('#singleFieldTags').tagit({
            availableTags: sampleTags,
            singleField: true,
            singleFieldNode: $('#mySingleField'),
            allowSpaces: true
        });
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:14:55.540

我的函数在一个外部 JS 文件中。通过将代码移回到同一个文件中，我能够做一个简单的 php 包含来获得我想要的东西。

```
$('#singleFieldTags').tagit({ 
availableTags: <? include("file_that_outputs_what_I_want.php") ?>,  
singleField: true, 
singleFieldNode: $('#mySingleField'), 
allowSpaces: true 
}); 
```

# c++ - Conway 在 C++ 问题中的生命游戏

> ID：12548545
> 
> 赞同：2
> 
> 时间：2012-09-22T23:37:56.047
> 
> 标签：c++, function, vector

我在用 C++ 编写康威的生命游戏时遇到了一些问题。我觉得我有一个好的开始，我只是需要一些方向。首先，当我尝试运行程序时，我总是得到一个空白的控制台。而且我也不确定为董事会上没有完整八个邻居的地方编码的最佳方式。任何帮助，将不胜感激。

规则：

> 您将“硬编码”一个起始配置。用户不需要能够提供不同的启动配置（这只会使您的程序复杂化）。
> 
> 建议：寻找稳定的配置。也就是说，寻找不断重复模式的社区。重复中的配置数称为周期。有一些配置是固定的，它们会继续不变。一个可能的项目是找到这样的配置。
> 
> 提示：定义一个名为 generation 的 void 函数，它接受我们称为 world 的向量（通过引用调用或使用指针），其中包含当前（或初始）配置。该函数扫描向量并修改单元格，按照前面列出的规则标记单元格的出生和死亡。这涉及依次检查每个细胞，要么杀死细胞，让它存活，要么如果细胞是空的，则决定是否应该出生一个细胞。请注意，如果您的代码在它正在修改的同一向量中计算邻居，则游戏将无法运行。在修改之前必须创建世界向量的副本，并且该副本用于计算邻居，同时在原始向量中打开或关闭单元格。
> 
> 应该有一个函数 display 接受向量世界并在屏幕上显示网格。在调用生成和显示之间存在某种时间延迟是合适的。为此，您的程序应在您按下 Return/Enter 时生成并显示下一代。您可以自由地自动执行此操作（设置实时延迟，而不是等待用户按键），但程序不需要自动化。
> 
> 如果您想“延迟”网格的显示，而不是等待用户键入内容并在显示下一个网格之前按 Enter，那么您将需要以某种方式暂停或“休眠”您的程序。如果您使用的是 Microsoft Windows，请执行以下操作：
> 
> 我们将每个小区定义为有八个相邻小区。单元格的邻居是直接在上方、下方、右侧、左侧、左右斜上方和左右斜下方的单元。检查边缘的邻居时要小心；您可以决定边缘单元是否在边缘之外有活的或死的邻居。
> 
> 如果一个被占用的细胞有零个或一个邻居，它就会死于孤独。如果一个被占用的小区有超过三个邻居，它就会死于过度拥挤。
> 
> 如果一个空单元格恰好有三个被占用的相邻单元格，则会生成一个新单元格来替换该空单元格。
> 
> 出生和死亡是瞬时的，发生在世代的变化中。一个因任何原因而死亡的细胞可能有助于出生，但一个新生的细胞不能使一个正在死亡的细胞复活，一个细胞的死亡也不会阻止另一个细胞的死亡，例如，通过减少当地人口。

到目前为止我的代码：

```
/*

Filename: main.cpp
Author:
Version: 20120920
Description:

*/

#include<iostream>
#include<vector>
#include<unistd.h>
#include<cstdlib>

using namespace std;

/*Change the values of your world matrix*/
#define ROWS 21
#define COLS 80

/*Change the values for dead or alive*/
#define DEAD  ' '
#define ALIVE '*'

/*Function Prototype for generation*/
void generation (vector< vector<char> > &world, vector< vector<char> > &world_copy);

/*Function Prototype for display*/
void display(vector< vector<char> >);

int main()
{

    vector< vector<char> > world(ROWS, vector<char>(COLS, DEAD));
    vector< vector<char> > world_copy(ROWS, vector<char>(COLS, DEAD));

    /*Set ALIVE cells*/
    world[1][1] = world[1][2] = world[1][3] = ALIVE;

    while(true);
    {
        /*Clear screen and display world*/
        system("cls");
        display(world);

        /*Wait*/
        usleep(8000);

        /*Update World*/
        generation(world, world_copy);

    }
    return 0;
}

/*Copy the contents of world into world_copy*/
void generation (vector< vector<char> > &world, vector< vector<char> > &world_copy)
{
    int ALIVE_count = 0;

    for (int i = 0; i < ROWS; i++)
    {
        for (int j = 0; j < COLS; j++)
        {
            /*Checks neighbors for life*/
            if(world_copy[i-1][j+1] == ALIVE)
            {
                ALIVE_count++;
            }
            if(world_copy[i][j+1] == ALIVE)
            {
                ALIVE_count++;
            }
            if(world_copy[i+1][j+1] == ALIVE)
            {
                ALIVE_count++;
            }
            if(world_copy[i-1][j] == ALIVE)
            {
                ALIVE_count++;
            }
            if(world_copy[i+1][j] == ALIVE)
            {
                ALIVE_count++;
            }
            if(world_copy[i-1][j-1] == ALIVE)
            {
                ALIVE_count++;
            }
            if(world_copy[i][j-1] == ALIVE)
            {
                ALIVE_count++;
            }
            if(world_copy[i+1][j-1])
            {
                ALIVE_count++;
            }

            /*Rule Section*/
            /*Death by loneliness. 0 or 1 neighbors.*/
            if (world_copy[i][j] == ALIVE && (ALIVE_count == 0 || ALIVE_count == 1))
            {
                world[i][j] = world_copy[i][j];
                world[i][j] == DEAD;
            }
            /*Live to next generation. 2 or 3 neighbors.*/
            else if(world_copy[i][j] == ALIVE && (ALIVE_count == 2 || ALIVE_count == 3))
            {
                world[i][j] = world_copy[i][j];
                world[i][j] == ALIVE;
            }
            /*Death by overcrowding. More than 3 neighbors.*/
            else if (world_copy[i][j] == ALIVE && ALIVE_count > 3)
            {
                world[i][j] = world_copy[i][j];
                world[i][j] == DEAD;
            }
            /*Birth. Exactly 3 neighbors.*/
            else if (world_copy[i][j] == ALIVE && ALIVE_count ==3)
            {
                world[i][j] = world_copy[i][j];
                world[i][j] == ALIVE;
            }
        }
    }
}

/*Display the world*/
void display(vector< vector<char> > &world)
{
    for (int i = 0; i < ROWS; i++)
    {
        for (int j = 0; i < COLS; j++)
        {
            cout << world[i][j];
        }

        cout << endl;
    }
} 
```

更新：

在 main 的 while 语句中发现了一个问题。我曾有一个 ; 过了一会儿：

```
while(true);
{
/*Clear screen and display world*/
system("cls");
display(world);

/*Wait*/
Sleep(800);

/*Update World*/
generation(world, world_copy);
} 
```

我继续把它拿出来，但现在我得到了一个未定义的引用，指向“在 while 循环中显示”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T23:44:41.700

## 不正确的循环条件

```
void display(vector< vector<char> > &world)
{
    for (int i = 0; i < ROWS; i++)
    {
        for (int j = 0; i < COLS; j++)
        {
            cout << world[i][j];
        }

        cout << endl;
    }
} 
```

应该：

```
void display(vector< vector<char> > &world)
{
    for (int i = 0; i < ROWS; i++)
    {
        for (int j = 0; j < COLS; j++)
        {
            cout << world[i][j];
        }

        cout << endl;
    }
} 
```

注意内部 FOR 循环的条件子句。

## 不正确的 while() 循环终止

```
while(true); 
```

应该：

```
while(true) 
```

## 赋值操作不当

这种模式在代码中重复了很多次。保留第一个任务。第二个根本没有完成。这是一个条件表达式求值。看起来像这样：

```
world[i][j] = world_copy[i][j];
world[i][j] == DEAD; 
```

应该看起来像这样（注意我猜测副本是先前的状态。不确定您的意图是什么）：

```
world_copy[i][j] = world[i][j];
world[i][j] = DEAD; 
```

## 链接期间未定义的符号 display()

文件顶部的函数原型是：

```
void display(vector< vector<char> > ); 
```

然而下面的实现是：

```
void display(vector< vector<char> >& ) 
```

注意第二个中的引用参数，第一个中的 by-val 参数。不同的参数列表 = 不同的签名。可能第二个是您的想法，因此更改原型（第一个）以匹配实现（第二个）。

## 数组索引超出范围

您的代码中有几个地方（特别是 generation() 函数）索引超出了分配向量的末尾。例如，

```
/*Checks neighbors for life*/
if(world_copy[i-1][j+1] == ALIVE)
{
    ALIVE_count++;
}
if(world_copy[i][j+1] == ALIVE)
{
    ALIVE_count++;
}
if(world_copy[i+1][j+1] == ALIVE) 
```

这些`[j+1]`和`[i+1]`索引一旦达到`(i==(ROWS-1))`or的条件就会使您的流程出错（如果您幸运的话） `(j==(COLS-1))`，因为 ROWS 和 COLS 是您战场的分配大小。同样的 for`[i-1]`和`[j-1]`when`i`和`j`are 在它们的循环开始处（i=0 或 j=0）

有很多方法可以解决这个问题，从逻辑到不检查会溢出的内容（易于检测）到用一个从不触及的死区（涉及更多，但编码更有趣）来构建你的字段。

底线：**你必须学会​​有效地调试你的程序**。如果您认为专业工程师只是喷出正确的代码，请再想一想。平均而言，我们花费一半的时间（字面意思）调试*编写*的代码。如果您发现自己花费更少，很可能您没有对代码进行所需的尽职调查（坦率地说，这是应得的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:45:47.727

> 我不确定为板上没有完整八个邻居的地方编码的最佳方法

您可能应该将这些视为特殊情况。例如，`i=0`与循环分开的代码可以从`i = 1`.

# c# - Windows 8 消息应用程序创建帐户提供程序

> ID：12548547
> 
> 赞同：2
> 
> 时间：2012-09-22T23:38:15.317
> 
> 标签：c#, windows-8

我正在考虑为 Windows 8 开发一个应用程序，并想知道是否可以“扩展”内置应用程序的功能以添加帐户类型的消息。有可能吗？

# javascript - 获取数组中每个元素的第一个孩子的第一个孩子

> ID：12548548
> 
> 赞同：0
> 
> 时间：2012-09-22T23:38:19.970
> 
> 标签：javascript

`table`我已经使用 构建了一个匹配特定条件的元素数组`querySelectorAll()`，但我想有条件地创建一个新的、单独的数组，其中包含每个元素的第一个子元素的第一个子元素。
但是，我不确定如何执行此操作。我的数组目前看起来像这样：

```
var arr = [
    <table class="matchedCriterion">…&lt;/table>,
    <table class="matchedCriterion">…&lt;/table>
]; 
```

有没有办法让我在每个元素上运行`querySelector()`或`querySelectorAll()`匹配我想要使用的内容`:first-child:first-child`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T23:41:15.263

该`.map`函数允许您从另一个数组构建一个新数组。

```
var newarr = arr.map(function(el) { return el.firstChild.firstChild; }); 
```

如果您`arr`实际上不是数组，请执行此操作。

```
var newarr = [].map.call(arr, function(el) { return el.firstChild.firstChild; }); 
```

请注意，如果这些恰好是第一个孩子，这将获得文本节点。如果您只想要元素，请使用`.firstElementChild`而不是`.firstChild`.

# jquery - 隐藏容器外的元素而不溢出：隐藏

> ID：12548550
> 
> 赞同：2
> 
> 时间：2012-09-22T23:38:44.073
> 
> 标签：jquery, css, positioning

我想在元素移出容器时隐藏它。但我有 1 个限制：我不能`overflow: hidden;`在容器中用作永久样式。

这是我需要的链接：

[http://jsfiddle.net/WVYpg/](http://jsfiddle.net/WVYpg/)

我想知道是否有办法完成它，比如在它消失时消失？`overflow: hidden`...可能会在它完成动画时暂时给予。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T23:49:33.910

```
$().ready( function(){
  $( "#hide-span" ).click( function(){
    $( ".contained" ).animate( {
        left: "-250",opacity:"0"
    }, 1000 );
  } );
} );​ 
```

[演示](http://jsfiddle.net/afshinprofe/WVYpg/2/)

或者

```
$().ready( function(){
$( "#hide-span" ).click( function(){
    $( ".contained" ).animate( {
        left: "-250"
    }, 1000 );
    $( ".contained" ).fadeOut(200);
 } );
} );​ 
```

[演示 2](http://jsfiddle.net/afshinprofe/WVYpg/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T23:48:01.540

[您可以通过在元素移动到这样](http://jsfiddle.net/WkBfu/)`z-index`的点处绝对定位一个更高的不透明元素来伪造它，但如果那里已经有其他内容，这并不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:42:55.630

您可以将`z-index`要移动的容器的 设置为小于要移出的容器，这应该提供您正在寻找的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T00:11:26.883

使用afshin关于不透明度的想法，我想通了。这是我的完整代码：（您可以在这里找到：http: [//jsfiddle.net/WVYpg/3/](http://jsfiddle.net/WVYpg/3/)）

CSS：

```
body{
    background: #0000ff;
    position: relative;
    z-index: 100;
}
div.container{
    width: 300px;
    height: 300px;
    background: #c3f1d3;
    margin: 50px auto;
    border: 1px solid #f00;
    position: relative;
    z-index: 50;
/*    overflow: hidden; */
}
div.contained{
    display: block;
    width: 200px;
    height: 200px;
    border: 1px solid #ff6600;
    margin: 50px auto 0px auto;
    position: relative;
    z-index: 0;
}
span.text-to-hide{
    display: block;
    border: 1px solid #0ec;
    width: 175px;
    font: bold 12px/20px "Trebuchet MS", Arial;
    text-align: center;
    margin: 75px auto;
    padding: 0px;
}
p{
    display: block;
    text-align: center;
    margin: 10px auto;
    padding: 0px;
}
input{
    width: 100px;
    font: bold 12px/20px "Trebuchet MS", Arial;
}
.ohidden{
    overflow: hidden;
}​ 
```

​ jQuery：

```
/* $().ready( function(){
    $( "#hide-span" ).click( function(){
        $( ".container" ).css( "overflow", "hidden" );
        $( ".contained" ).animate( {
            left: "-250"
        }, 1000, function(){
            $( ".contained" ).css( "opacity", "0" );
            $( ".container").css( "overflow" ); 
        } );
    } );
} );​ */
$().ready( function(){
    $( "#hide-span" ).click( function(){
        $( ".container" ).addClass( "ohidden" );
        $( ".contained" ).animate( {
            left: "-250"
        }, 1000, function(){
            $( ".contained" ).css( "opacity", "0" );
            $( ".container").removeClass( "ohidden" ); 
        } );
    } );
} );​ 
```

HTML：

```
<body>
    <div class="container" id="container">
        <div class="contained">
            <span class="text-to-hide">Move this text outside of container and hide it</span>
        </div>
        <p><input type="button" value="Hide span" id="hide-span"></p>
    </div>
</body>​ 
```

# javascript - raphaeljs 如何通过受约束的移动来限制元素拖动（在父边界框内）

> ID：12548551
> 
> 赞同：3
> 
> 时间：2012-09-22T23:38:44.203
> 
> 标签：javascript, raphael, constraints, drag, bounding-box

我正在尝试调整此示例[http://raphaeljs.com/graffle.html](http://raphaeljs.com/graffle.html)以将拖动限制在容器 svg 内。

有点像[http://bl.ocks.org/1557377](http://bl.ocks.org/1557377)或[http://jqueryui.com/demos/draggable/#constrain-movement](http://jqueryui.com/demos/draggable/#constrain-movement)基本上我想限制对象在拖动时从边界框移出。

这是添加到移动功能的调整代码（[http://jsfiddle.net/f4mFQ/1/](http://jsfiddle.net/f4mFQ/1/)）

```
 if(thisBox.x < 0){
        ddx = 0;
    }else if(thisBox.x>width-thisBox.width ){
        ddx = width-thisBox.width;
    }else {
        ddx = this.ox + dx;
    }

    if(thisBox.y < 0){
        ddy = 0;
    }else if(thisBox.y>height-thisBox.height ){
        ddy = height-thisBox.height;
    }else{
        ddy = this.oy + dy;
    } 
```

这部分有效，当矩形移动超出边界时，它会在边缘跳舞！而圆和椭圆卡在边缘。

那么在这种情况下，如何在父边界框内限制元素拖动并限制移动

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-02T11:25:40.323

一个问题是，当您设置`ddx`或`ddy`定位在一侧时，您会将该值作为椭圆的中心点反馈回来，以便它们“捕捉”到一侧。

第二件事是你在这个边界框的左上角进行计算，而不是这个（ox + dx）的实际计算位置。这就是造成混乱的原因。

这不是最漂亮的实现，但我想尽量减少对代码的更改，用这个替换 move 函数：

```
 move = function (dx, dy) {
    var width =this.paper.width,
    height = this.paper.height,
    thisBox = this.getBBox()
    //, box = {
    //     "x"      :thisBox.width,
    //     "y"      :thisBox.height,
    //     "x2"     :width-thisBox.width,
    //     "y2"     :height-thisBox.height,
    //     "width"  :width-thisBox.width,
    //     "height" :height-thisBox.height
    // };
    // var outOfBound=!Raphael.isBBoxIntersect(thisBox,box)
    ;

    console.log(thisBox.width,width,thisBox.x,thisBox
                ,this.ox);

    var ddx = this.ox + dx;
    var ddy = this.oy + dy;
    if (this.type == 'ellipse') { 
        ddx -= thisBox.width / 2;
        ddy -= thisBox.height / 2;
    }

    if(ddx < 0){
        ddx = 0;
    }else if(ddx>width-thisBox.width ){
        ddx = width-thisBox.width;
    }

    if(ddy < 0){
        ddy = 0;
    }else if(ddy>height-thisBox.height ){
        ddy = height-thisBox.height;
    }

    var att = this.type == "rect" ? {x: ddx, y: ddy} : {cx: ddx + (thisBox.width / 2), cy: ddy + (thisBox.height / 2)};
    this.attr(att);

    for (var i = connections.length; i--;) {
        r.connection(connections[i]);
    }
    r.safari();
} 
```

在开始时，我们根据 的位置计算`ddx`和`ddy`作为左上角`this`。（如果是椭圆，则进行调整，如`ox`中心`oy`坐标）。

然后它与以前大致相同，尽管当我们将值设置回来时，我们会重新调整椭圆的值。您可以更改存储/使用的值以避免重复计算。

这对我行得通。

**编辑**

将代码复制到它自己的[fiddle](http://jsfiddle.net/cYDPX/1/)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T07:37:19.533

嗨，我已经用这段代码更新了小提琴，这似乎工作虽然不完美，

代码变了

```
 if (thisBox.x < 0) {
            ddx = 0 + thisBox.width/2;//the position 0 was problem
        } else if (thisBox.x > width - thisBox.width) {
            ddx = width - thisBox.width;
        } else {
            ddx = this.ox +dx;
        }

        if (thisBox.y < 0) {
            ddy = 0+thisBox.height/2;//the position 0 was problem
        } else if (thisBox.y > height - thisBox.height) {
            ddy = height - thisBox.height;
        } else {
            ddy = this.oy + dy;
        } 
```

我已经更新了[`fiddle`](http://jsfiddle.net/MarmeeK/f4mFQ/8/)

我还更新了一些 CSS 以使其更加清晰和无错误。

更新：振动，

我已经更新[`fiddle2`](http://jsfiddle.net/MarmeeK/f4mFQ/12/)，消除了顶部和左侧的振动，

请检查并回复

另请参阅此[`fiddle3`](http://jsfiddle.net/MarmeeK/f4mFQ/13/)可以很好地与圆形/椭圆一起使用，但矩形有问题

# android - 重新启动已经运行的活动

> ID：12548553
> 
> 赞同：4
> 
> 时间：2012-09-22T23:39:03.637
> 
> 标签：android, android-activity, android-lifecycle

这就是问题所在。我有一个应用程序，我想按下一个按钮，启动一个显示项目列表的新活动，允许用户选择任意数量的项目，单击提交并将该数据发送到调用新活动的原始活动物品清单。这是基本结构：

```
Activity A -> Activity B (select items, press submit) -> [already running] Activity A (receive sent items) 
```

我来回发送数据没有问题。我确实遇到的问题是，当我尝试重新启动 Activity A 时，它会通过 Activity 的`onCreate()`方法。我不喜欢这样做，因为我希望能够在`onCreate()`方法中预先设置所有内容，然后通过方法补充已经存在的内容`onRestart()`。我不确定为什么`onCreate()`每次重新启动活动时都会调用该方法。我的猜测是我在活动 B 中调用活动的方式：

```
Intent intent = new Intent(this, PatientChartActivity.class);
intent.putExtra("checked", checked);
intent.putStringArrayListExtra("checked", checked);
startActivity(intent); 
```

我一直在查看 Android 活动生命周期，但我不确定为什么它不会自动返回到以前的活动，除非我确实必须强制它这样做。我确信的一件事是正在运行的活动没有被破坏。我在方法中输入了一条`Log.v(TAG, "DESTROY")`日志消息，以`onDestroy()`确保它不会破坏活动。我尝试在启动活动时使用不同的标志来告诉系统我要恢复以前启动的活动，但这些标志似乎也不起作用。我可能会误解他们。我已经对这个主题进行了广泛的研究，但我发现的解决方案都没有帮助。[这里](https://stackoverflow.com/questions/7293820/how-to-open-already-opened-activity-instead-of-creating-new-one)是我发现的一个问题，似乎与我的相同，但似乎并没有解决我正在寻找的问题。我还查看了以下链接以了解解决此问题的其他可能途径，但没有奏效。

[http://www.droidnova.com/use-intents-to-start-other-activities,76.html](http://www.droidnova.com/use-intents-to-start-other-activities,76.html)

[http://www.warriorpoint.com/blog/2009/05/24/android-how-to-switch-between-activities/](http://www.warriorpoint.com/blog/2009/05/24/android-how-to-switch-between-activities/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:51:50.993

代替

```
startActivity(intent); 
```

在您的活动 A 中，使用

```
startActivityForResult(intent); 
```

这样，当该特定活动完成时，您将获得结果。在活动 A 中覆盖它：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    //TODO handle here. 
} 
```

活动 B 完成后，调用 this.finish()。然后它会返回到Activity A，并调用上面的方法，这意味着你在Activity A中的onCreate不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:02:17.967

根据您所说的实际完成的事情（“活动A->活动B（选择项目，按提交）-> [已经运行]活动A（接收发送的项目）”）是：

活动 A = 新实例 -> 前往活动 B = 新实例 -> 再次前往活动 A =**新实例**

因此，您的活动“堆栈”实际上是活动 A 的 2 个实例和活动 B 的一个实例。这就是为什么您在活动 A 中的第二次调用会对其进行初始化并再次调用“onCreate()”。该问题的解决方案之一，可能是最好的解决方案是：

从活动 A 使用此方法启动活动 B：'startActivityForResult()'。然后在活动 B 中，尽管像当前一样启动活动 A，但尝试通过此函数将结果设置回活动 A：'setResult (int resultCode, Intent data)'，然后在活动 B 中调用'finish()'。在活动中A 实现 'onActivityResult()' 方法。

我现在将解释应用程序生命周期如何：

*   活动 A 被初始化并启动活动 B 等待结果以便用它做“某事”。到目前为止，一切都很好。
*   活动 B 被初始化，提交后它确实为活动 A 设置了一个结果。然后它自己完成并自动将结果传递给前一个活动。
*   活动 A 再次获得焦点，**已经初始化**并且调用了 'onActivityResult()' 方法。在活动 B 中设置的“意图”现在在活动 B 中传递。

告诉我这是否有帮助以及您是否需要一些示例代码。

# maven - eclipselink maven存储库不工作

> ID：12548556
> 
> 赞同：3
> 
> 时间：2012-09-22T23:39:25.207
> 
> 标签：maven, eclipselink, pom.xml

我收到此错误：

org.eclipse.persistence:eclipselink:jar:2.3.2 的 POM 丢失，没有可用的依赖信息 org.eclipse.persistence:javax.persistence:jar:2.0.3 的 POM 丢失，没有可用的依赖信息

当我去[http://download.eclipse.org/rt/eclipselink/maven.repo/](http://download.eclipse.org/rt/eclipselink/maven.repo/)显示没有文件和其他页面抛出 404。

我似乎无法找到解决方案。我使用 Netbeans。有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T03:36:11.403

我想也许你的 jar 在你的本地存储库中损坏了。

转到 ~/.m2/repository/org/eclipse/persistence 并尝试删除该文件夹结构，这将强制 maven 重新下载。

也尝试运行：

```
mvn install -U 
```

如果这不起作用，请清除您的回购：

```
mvn dependency:purge-local-repository 
```

也尝试从命令行构建，因为有时 IDES 不会重建 Maven 索引，直到你重新启动它。

# mysql - 我可以安全地切换到 Innodb file-per-table 并删除 ibdata1 吗？

> ID：12548559
> 
> 赞同：1
> 
> 时间：2012-09-22T23:40:31.967
> 
> 标签：mysql, innodb

我可以安全地切换到 Innodb file-per-table 并删除 ibdata1 吗？这是我的进攻计划。我最近备份了所有数据。

1.  我将 innodb_file_per_table=1 添加到 /etc/my.cnf，然后重新启动
2.  我跑了 ALTER tablename ENGINE=InnoDB; 在每个 Innodb 表上

接下来，我想：

1.  停止 MySQL
2.  删除 ibdata1、ib_logfile0、ib_logfile1
3.  启动 MySQL

这行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:42:35.200

根据[文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-multiple-tablespaces.html)：

> 启用多个表空间后，InnoDB 将每个新创建的表存储在相应数据库目录中自己的 tbl_name.ibd 文件中。与 MyISAM 存储引擎不同，它具有单独的 tbl_name.MYD 和 tbl_name.MYI 文件用于索引和数据，InnoDB 将数据和索引一起存储在单个 .ibd 文件中。tbl_name.frm 文件仍照常创建。
> 
> 如果从 my.cnf 中删除 innodb_file_per_table 行并重新启动服务器，InnoDB 会在共享表空间文件中创建任何新表。
> 
> 无论 file-per-table 设置如何，您始终可以访问系统表空间中的两个表和它们自己的表空间中的表。

您的问题的答案：不，您不能删除 ibdata1、ib_logfile0 或 ib_logfile1，因为仅启用该选项不会移动您现有的数据。

# c++ - vector::constructor 的模板参数

> ID：12548565
> 
> 赞同：0
> 
> 时间：2012-09-22T23:41:55.670
> 
> 标签：c++, templates, c++11

我正在尝试编写 GSL 集成例程的小型 C++ 重新实现作为学习 C++ 元编程的实践项目。我有以下问题。

我已经定义了一些类型特征（使程序同时使用双精度和浮点数）

```
template<typename T> class IntegrationWorkspaceTraits;

template<> class IntegrationWorkspaceTraits<double>
{
     public:
     typedef double ft; //float_type
     static constexpr ft zero = 0.0;
}; 

template<> class IntegrationWorkspaceTraits<float>
{
    public:
    typedef float ft; //float_type
    static constexpr ft zero = 0.0f;
}; 
```

现在我有一个使用这个特征的类，看起来像这样

```
template< typename T, typename AT = IntegrationWorkspaceTraits<T> >    GslIntegrationWorkspace
{
    typedef typename AT::ft   ft;
    typedef typename AT::zero zero;

    public:
    GslIntegrationWorkspace(size_t size);

    private:
    typename std::vector<ft> alist;
} 
```

我的问题是：如何使用在特征上定义的零常数来设置成员向量的初始值。我的猜测是

```
template<typename T, typename AT> 
GslIntegrationWorkspace::GslIntegrationWorkspace( size_t size ):
alist(size, typename AT::zero),   
{}; 
```

但编译器 g++ 抱怨“gsl_integration.h:63:42: 错误：在没有参数列表的情况下无效使用模板名称‘GslIntegrationWorkspace’”

最好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:43:49.563

`zero`是一个值，而不是一个类型！你需要这个：

```
typedef typename AT::ft ft;
static constexpr ft     zero = AT::zero; 
```

现在您可以使用`GslIntegrationWorkspace<double>::zero`等。在构造函数中您当然只需要`alist(size, zero)`.

如果您不使用 ODR 值（例如获取其地址），您甚至不需要定义它 - 内联声明和初始化就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T23:45:45.943

你需要像这样实现你的构造函数：

```
template<typename T, typename AT> 
GslIntegrationWorkspace<T, AT>::GslIntegrationWorkspace( size_t size ):
    alist(size, AT::zero),   
{
} 
```

`class`您的帖子在定义时也缺少 a `GslIntegrationWorkspace`。

# javascript - javascript正则表达式返回null，试图在括号之间获取文本

> ID：12548570
> 
> 赞同：4
> 
> 时间：2012-09-22T23:43:13.083
> 
> 标签：javascript, regex, match

试图将“表 2”或任何可能的表编号（有时是 2 位）放入变量中。知道为什么这会回来`null`吗？

```
 var productText = '25-08-12 Boat Cruise (Table 2)';
 var rgx = /^\(\)$/;
 var newText = productText.match(rgx);
 alert(newText); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T23:45:16.427

请改用以下内容：

```
var rgx = /\(([^)]+)\)/;
var match = productText.match(rgx);
var newText = match && match[1];
// newText's value will be "Table 2" if there is match; null otherwise 
```

当你有 时`/^\(\)$/`，你实际上是在尝试[匹配](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)字符串`"()"`，不多也不少。相反，您应该匹配文本中的任何位置 a `(`，将它与下一个之间的所有内容存储`)`在一个捕获组`([^)]+)`中，以便您以后可以使用 来引用捕获的组`match[1]`。

如果您只想要数字，请使用`/\(Table (\d+)\)/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:52:30.850

```
var rgx = /\((.*)\)/ 
```

将捕获表号成一个组。

您的正则表达式目前说

'give me () 开头 (^) 和字符串结尾 ($)'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T00:20:05.130

^ 表示行开始，并且

$ 表示行尾。

此外，您需要一些内容来匹配 中的文本`()`，例如：`.*`

指出这一点后，`/^\(\)$/`只会匹配到`()`。

然后，一个工作示例可能是：

```
var productText = '25-08-12 Boat Cruise (Table 2)';
var rgx = /\(.*\)/;
var newText = productText.match(rgx)[0];
newText = newText.replace('(','');
newText = newText.replace(')','');
alert(newText); 
```

* * *

在[看到你需要](https://stackoverflow.com/questions/12548570/javascript-regex-returning-null-trying-to-get-text-between-parentheses/12548734#comment16899654_12548581)的东西后，我会推荐使用[jQuery 的数据](http://api.jquery.com/data/)。

# python - 从 str 派生的类的构造函数，具有不同的签名

> ID：12548572
> 
> 赞同：3
> 
> 时间：2012-09-22T23:43:43.733
> 
> 标签：python, string, python-2.x

我正在尝试创建一个基于 的简单派生类`str`，并添加一个实例变量`flag`. 由于我不明白的原因，如果我尝试将标志传递给构造函数，则会收到错误消息：

```
>>> class Strvalue(str):
        def __init__(self, content, flag=None):
                str.__init__(self, content)
                self.flag = flag

>>> Strvalue("No problem")
'No problem'

>>> Strvalue("Problem", flag=None)
Traceback (most recent call last):
  File "<pyshell#113>", line 1, in <module>
    Strvalue("Problem", flag=None)
TypeError: str() takes at most 1 argument (2 given) 
```

我已经检查过，在成功的调用中，`Strvalue`构造函数确实被调用了——我没有输入错误`__init__`或类似的东西。那么发生了什么？

**编辑：**根据[这个问题](https://stackoverflow.com/questions/12231894/overloading-str-in-python)（和@Martijn 的回答），这个问题也可以通过覆盖来避免`__new__`。问题是*为什么*会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T23:49:01.897

您需要在子类化时使用`__new__`而不是，请参阅[基本自定义](http://docs.python.org/reference/datamodel.html#basic-customization)。`__init__``str`

```
>>> class Strvalue(str):
...     def __new__(cls, content, flag=None):
...         inst = str.__new__(cls, content)
...         inst.flag = flag
...         return inst
... 
>>> Strvalue('foo', True)
'foo'
>>> foo = Strvalue('foo', True)
>>> foo
'foo'
>>> foo.flag
True 
```

您的代码不会覆盖`str.__new__`，因此使用您的两个参数调用原始`str.__new__`构造函数，并且它只接受一个。

`str`对象是不可变的，它们在 中构造一个新实例`__new__`，然后不能再更改；`__init__`被调用的时候，`self`是一个不可变的对象，所以`__init__`for`str`没有意义。您仍然*可以*定义一个`__init__`方法，但是由于您已经有了`__new__`，因此实际上没有必要将工作划分为两个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T23:49:06.453

您需要覆盖`__new__`而不是（或以及）`__init__`。

# asp.net - 如何操作数据库结果以将链接添加到我的 Gridview？

> ID：12548574
> 
> 赞同：0
> 
> 时间：2012-09-22T23:43:52.507
> 
> 标签：asp.net, sql-server, url, gridview

我有一个 GridView，用于显示我在 asp.net 代码隐藏文件中制作和执行的查询结果。问题是，我有一个列返回一个相当长的 URL。我宁愿将此网格视图显示为带有锚标记的图像或文本，并带有原始链接。

我该如何做到这一点，以便我在列的每一行上都有相同的图像，但不同的 URL 取决于最初返回给我的内容？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:57:11.780

```
 <asp:GridView ID="GridView1" runat="server"  DataSourceID="SqlDataSource1" >
        <Columns>
            <asp:HyperLinkField HeaderText="Header"
               Text ="TextYouWantToAppearOnColumn"
               DataNavigateUrlField="FieldNameFromDataSource" 
               DataNavigateUrlFormatString="http://{0}" />
        </Columns>
  </asp:GridView> 
```

如果没有图像的超链接对您来说就足够了，那么上述解决方案应该适合您。`{0}`是来自数据库的值，您可以以任何您想要的方式格式化 url。在这种情况下，我假设它是网站的外部 url，没有`htpp://`，这就是我添加它的原因。

# c - OpenGL 不正确的纹理坐标仅具有多个纹理四边形

> ID：12548576
> 
> 赞同：0
> 
> 时间：2012-09-22T23:44:23.073
> 
> 标签：c, opengl, textures

当我有多个使用相同纹理但坐标不同的纹理四边形时，纹理会变形。这是我的代码的样子：

```
glBindTexture(GL_TEXTURE_2D, texture_id);
glBegin(GL_QUADS);
    glVertex2f(0, 0);    glTexCoords2f(0, 0);
    glVertex2f(32, 0);    glTexCoords2f(.5, 0);
    glVertex2f(32, 32);    glTexCoords2f(.5, .5);
    glVertex2f(0, 32);    glTexCoords2f(0, .5);
glEnd();

glTranslatef(32, 0, 0);

glBegin(GL_QUADS);
    glVertex2f(0, 0);    glTexCoords2f(.5, .5);
    glVertex2f(32, 0);    glTexCoords2f(1, .5);
    glVertex2f(32, 32);    glTexCoords2f(1, 1);
    glVertex2f(0, 32);    glTexCoords2f(.5, 1);
glEnd(); 
```

有谁知道这是什么原因以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:08:10.637

您以错误的顺序调用 glTexCoord 和 glVertex 。glVertex 应该始终是调用完成顶点的最后一个属性。

应该：

```
glBegin(GL_QUADS);
    glTexCoords2f(0, 0);    glVertex2f(0, 0);    
    ... 
```

# c# - 获取静态类的泛型

> ID：12548592
> 
> 赞同：-1
> 
> 时间：2012-09-22T23:48:13.303
> 
> 标签：c#, reflection

我有通用静态类：

```
 public static class IsolatedStorageCacheManager<BagType>
 {
 } 
```

和方法：

```
 public static BagType Retrieve()
    {
        BagType obj = default(BagType);
        try
        {
            IsolatedStorageFile appStore = IsolatedStorageFile.GetUserStoreForApplication();
            string fileName = string.Format(CultureInfo.InvariantCulture, "{0}.xml", obj.GetType().Name);
            if (appStore.FileExists(fileName))
            {
                using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream(fileName, FileMode.Open, appStore))
                {
                    using (StreamReader sr = new StreamReader(isoStream))
                    {
                        System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(obj.GetType());
                        obj = (BagType)x.Deserialize(sr);
                    }
                }
            }
        }
        catch (Exception ex)
        {
            log.Error(ex.Message);
        }

        return obj;
    } 
```

如何在 Retrive 方法中将特定类型作为 BagType 发送？我尝试使用反射但没有结果；/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:43:22.133

我不太确定你想要什么，但这有帮助吗？

```
public static class IsolatedStorageCacheManager<BagType>
{
    public static Type Retrieve()
    {
        return typeof(BagType);
    }
} 
```

# laravel - 基本路由在 Laravel 中生成 404

> ID：12548593
> 
> 赞同：1
> 
> 时间：2012-09-22T23:48:24.653
> 
> 标签：laravel, url-routing, mamp, laravel-routing

我正在尝试使用 Laravel 框架来构建我的应用程序。但是，我遇到了路由问题。

**路线**

```
Route::get('ecatalogs', 
    array('as' => 'ecatalog_latest', 'uses' => 'ecatalogs@latest')); 
```

**控制器**

```
class Catalogs_Controller extends Base_Controller
{
    public $restful = true;

    public function get_latest()
    {
        return "wohoooooo!";
    }
} 
```

我的 localhost 文件存储在`/Users/ariefbayu/Sites/`，我的 Laravel 应用程序存储在`/Users/ariefbayu/Sites/ecatalog/`. 在这个目录中，我有一个`info.php`文件来确认我的路径设置是否有效，并且它们确实有效。但是，当我导航到`http://localhost/ecatalog/public/index.php/ecatalogs`它时，总是返回 404 错误。我知道这是基本的，但我不知道为什么这不起作用。

仅供参考，我使用的是 MAMP 服务器，并且我已将所有源文件的访问权限设置为`777`以测试这是否是权限问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:00:08.737

您指定要在控制器中调用“最新”操作`ecatalogs`，但实际上调用的是控制器`catalogs`。将您的使用参数更改为`catalogs@latest`（或重命名文件和类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:37:52.363

```
Route::get('ecatalogs', array('as'=>'ecatalog_latest', 'uses'=>'ecatalogs@latest')); 
```

注意`ecatalogs@latest`指针。这告诉Laravel调用`get_latest()`.`Ecatalog_Controller`

这是您的控制器`Catalogs_Controller`和功能`get_latest()`。你需要`get_latest()`用这个来调用：

```
Route::get('ecatalogs', array('as'=>'ecatalog_latest', 'uses'=>'catalogs@latest')); 
```

# java - XStream 在琐碎的 xml 上失 败

> ID：12548594
> 
> 赞同：0
> 
> 时间：2012-09-22T23:48:27.827
> 
> 标签：java, xml, xstream

我有非常简单的 xml 文件：

**testSimple2.txt**

```
<root>
  <document>
  </document>
</root> 
```

但由于某种原因，我不能用 XStream 反序列化它。

**根.java**

```
@XStreamAlias("root")
public class Root {

 @XStreamAlias("document")
 static public class Document {
 }
 @XStreamAlias("document")
 Document document;

} 
```

**主.java**

主要代码：

```
XStream xstream = new XStream();
xstream.autodetectAnnotations(true);
xstream.processAnnotations(Root.class);
Root newJoe = (Root) xstream.fromXML(new File("testSimple2.txt"), Root.class); //Exception here 
```

抛出以下异常。

```
com.thoughtworks.xstream.converters.ConversionException: Element document of type verySimple.Root$Document is not defined as field in type java.lang.Class
---- Debugging information ----
class               : verySimple.Root
required-type       : verySimple.Root
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /root/document
line number         : 3
version             : null
-------------------------------
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.writeValueToImplicitCollection(AbstractReflectionConverter.java:403)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:334)
    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:50)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:134)
    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)
    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1058)
    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1042)
    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:1006)
    at verySimple.RootProcess.main(RootProcess.java:26) 
```

我知道一定有一些简单的错误，但我看不到。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T13:03:03.530

我不敢相信我犯了这个错误。它在第 4 行：

```
Root newJoe = (Root) xstream.fromXML(new File("testSimple2.txt")); 
```

我所需要的只是删除“Root.class”，或者用实例替换它。在谷歌搜索和发布此类问题之前检查方法签名和文档的另一个原因......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:52:11.367

可能是您缺少 xml 标题行：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <document>
  </document>
</root> 
```

但我知道 XStream 不应该需要它。

# java - 组合数组中的字符串值

> ID：12548601
> 
> 赞同：0
> 
> 时间：2012-09-22T23:49:54.620
> 
> 标签：java

我创建了一个循环，它接受一个 int，将其转换为字符数组，并根据数组中的字符显示值。如何在同一行打印值？换句话说，而不是：

> 价值
> 
> 价值
> 
> 价值

我需要：

> 价值价值价值

```
public static int getValue(int number) {
  final PrintStream ps = System.out;
  for (char c : Integer.toString(number).toCharArray())
    switch (c) {
    case '0':
      ps.println('a');
      break;
    case '1':
      ps.println('b');
      break;
    case '2':
      ps.println('c');
      break;
    // etc.
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T23:51:29.720

替换除最后一个以外的所有内容

```
System.out.println(); 
```

与声明

```
System.out.print(); 
```

这是同一件事，但最后没有添加换行符。

# ruby - 用于基于命令提示符的应用程序的 Ruby 库

> ID：12548602
> 
> 赞同：2
> 
> 时间：2012-09-22T23:50:30.947
> 
> 标签：ruby, command-line, command-prompt

我正在寻找一个带有基于命令提示符的界面的 Ruby 应用程序。“command-prompt-interface”是指类似于 irb 的东西，但请注意，我并不是指实际执行 Ruby 代码。我通过 Google 找到的 gem 似乎更适合像 git 这样的 CLI，而不是像 irb 这样的实际提示。

我需要能够为这些命令定义命令和处理程序，例如：

```
(prompt) helloworld
Hello World
(prompt) 
```

验证和内置帮助系统也是很好的附加功能，从命令行执行单个命令的能力（从 shell 调用它`cliapp.rb -c helloworld`）也是如此。

我可以从头开始创建它，但是如果有任何可用的库，我宁愿使用它而不是重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:14:29.977

您可能想试试[美沙酮](http://www.naildrivin5.com/blog/2011/12/19/methadone-the-awesome-cli-library.html)，它是由“[用 Ruby 构建出色的命令行应用程序](http://pragprog.com/book/dccar/build-awesome-command-line-applications-in-ruby)”一书的作者大卫·布莱恩特·科普兰 (David Bryant Copeland) 创建的。你可能也想看看这本书。

有关更多信息，请参阅[此博客文章](http://www.naildrivin5.com/blog/2011/12/19/methadone-the-awesome-cli-library.html)。

# java - 在普通 Java 应用程序中使用 JavaFX MediaPlayer 播放音频？

> ID：12548603
> 
> 赞同：8
> 
> 时间：2012-09-22T23:50:37.723
> 
> 标签：java, audio, javafx-2

我需要能够在普通 Java 项目中播放音频文件（MP3 / Wav）。我更喜欢使用新的 JavaFX MediaPlayer 而不是 JMF。我写了一些代码来测试这个：

```
public void play()
{
    URL thing = getClass().getResource("mysound.wav");
    Media audioFile = new Media( thing.toString() );     
    try
    {                                       
        MediaPlayer player = new MediaPlayer(audioFile);
        player.play();
    }
    catch (Exception e)
    {
        System.out.println( e.getMessage() );
        System.exit(0);
    }        
} 
```

当我运行它时，我得到了异常： Toolkit not initialized

我知道这与 JavaFX 线程有关。我的问题是，我该如何解决这个问题？我是否需要创建一个 JavaFX 面板只是为了在我的普通应用程序的后台播放一些音频文件，还是有其他方法？

编辑：堆栈跟踪：

```
java.lang.IllegalStateException: Toolkit not initialized
    at com.sun.javafx.application.PlatformImpl.runLater(PlatformImpl.java:121)
    at com.sun.javafx.application.PlatformImpl.runLater(PlatformImpl.java:116)
    at javafx.application.Platform.runLater(Platform.java:52)
    at javafx.scene.media.MediaPlayer.init(MediaPlayer.java:445)
    at javafx.scene.media.MediaPlayer.<init>(MediaPlayer.java:360)
    at javaapplication6.JavaApplication6.play(JavaApplication6.java:23)
    at javaapplication6.JavaApplication6.main(JavaApplication6.java:14) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-23T01:00:22.607

**对于在 Swing 中集成 JavaFX MediaPlayer 的解决方案**

使用[JFXPanel](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html)并注意仅在 JavaFX 线程上和 JavaFX 系统正确初始化后才使用 JavaFX 对象。

JavaFX 是普通的 Java，这使问题有点混乱，但我猜你的意思是 Swing。

这是从 Swing 启动的示例音频播放器。该示例假定 Windows 7 的默认公共示例音乐文件夹 (C:\Users\Public\Music\Sample Music) 中有一堆 mp3 文件，并依次播放每个文件。

[![应用截图](../Images/3fe42ee218d660acccc05aa4b3639f76.png)](https://i.stack.imgur.com/Bg7fZ.png)

*JavaFXMediaPlayerLaunchedFromSwing.java*

此代码负责创建一个 Swing 应用程序，该应用程序反过来初始化 JavaFX 工具包并在 JavaFX 应用程序线程上创建一个 JavaFX 场景。

```
import javafx.application.Platform;
import javafx.embed.swing.JFXPanel;
import javafx.scene.Scene;

import javax.swing.*;

/**
 * Example of playing all mp3 audio files in a given directory
 * using a JavaFX MediaView launched from Swing
 */
public class JavaFXMediaPlayerLaunchedFromSwing {
    private static void initAndShowGUI() {
        // This method is invoked on Swing thread
        JFrame frame = new JFrame("FX");
        final JFXPanel fxPanel = new JFXPanel();
        frame.add(fxPanel);
        frame.setBounds(200, 100, 800, 250);
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.setVisible(true);

        Platform.runLater(() -> initFX(fxPanel));
    }

    private static void initFX(JFXPanel fxPanel) {
        // This method is invoked on JavaFX thread
        Scene scene = new MediaSceneGenerator().createScene();
        fxPanel.setScene(scene);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(
            JavaFXMediaPlayerLaunchedFromSwing::initAndShowGUI
        );
    }
} 
```

*MediaSceneGenerator.java*

创建一个 JavaFX 媒体播放器，它按顺序播放`.mp3`给定文件夹中的所有媒体文件。它为媒体提供了一些控制（播放、暂停、跳过曲目、当前曲目播放进度指示器）。

```
import javafx.application.Platform;
import javafx.beans.value.ChangeListener;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.layout.VBox;
import javafx.scene.media.*;
import javafx.util.Duration;

import java.io.File;
import java.util.*;

public class MediaSceneGenerator {
    private static final String MUSIC_FOLDER = "C:\\Users\\Public\\Music\\Sample Music";
    private static final String MUSIC_FILE_EXTENSION = ".mp3";

    private final Label currentlyPlaying = new Label();
    private final ProgressBar progress = new ProgressBar();
    private ChangeListener<Duration> progressChangeListener;

    public Scene createScene() {
        final StackPane layout = new StackPane();

        // determine the source directory for the playlist
        final File dir = new File(MUSIC_FOLDER);
        if (!dir.exists() || !dir.isDirectory()) {
            System.out.println("Cannot find media source directory: " + dir);
            Platform.exit();
            return null;
        }

        // create some media players.
        final List<MediaPlayer> players = new ArrayList<>();
        for (String file : Objects.requireNonNull(dir.list((dir1, name) -> name.endsWith(MUSIC_FILE_EXTENSION))))
            players.add(
                    createPlayer(
                            normalizeFileURL(dir, file)
                    )
            );
        if (players.isEmpty()) {
            System.out.println("No audio found in " + dir);
            Platform.exit();
            return null;
        }

        // create a view to show the mediaplayers.
        final MediaView mediaView = new MediaView(players.get(0));
        final Button skip = new Button("Skip");
        final Button play = new Button("Pause");

        // play each audio file in turn.
        for (int i = 0; i < players.size(); i++) {
            MediaPlayer player = players.get(i);
            MediaPlayer nextPlayer = players.get((i + 1) % players.size());
            player.setOnEndOfMedia(() -> {
                final MediaPlayer curPlayer = mediaView.getMediaPlayer();
                nextPlayer.seek(Duration.ZERO);
                if (nextPlayer != curPlayer) {
                    curPlayer.currentTimeProperty().removeListener(progressChangeListener);
                }
                mediaView.setMediaPlayer(nextPlayer);
                nextPlayer.play();
            });
        }

        // allow the user to skip a track.
        skip.setOnAction(actionEvent -> {
            final MediaPlayer curPlayer = mediaView.getMediaPlayer();
            MediaPlayer nextPlayer = players.get((players.indexOf(curPlayer) + 1) % players.size());
            nextPlayer.seek(Duration.ZERO);
            mediaView.setMediaPlayer(nextPlayer);
            if (nextPlayer != curPlayer) {
                curPlayer.currentTimeProperty().removeListener(progressChangeListener);
            }
            nextPlayer.play();
        });

        // allow the user to play or pause a track.
        play.setOnAction(actionEvent -> {
            if ("Pause".equals(play.getText())) {
                mediaView.getMediaPlayer().pause();
                play.setText("Play");
            } else {
                mediaView.getMediaPlayer().play();
                play.setText("Pause");
            }
        });

        // display the name of the currently playing track.
        mediaView.mediaPlayerProperty().addListener(
                (observableValue, oldPlayer, newPlayer) -> setCurrentlyPlaying(newPlayer)
        );

        // start playing the first track.
        mediaView.setMediaPlayer(players.get(0));
        mediaView.getMediaPlayer().play();
        setCurrentlyPlaying(mediaView.getMediaPlayer());

        // silly invisible button used as a template to get the actual preferred size of the Pause button.
        Button invisiblePause = new Button("Pause");
        invisiblePause.setVisible(false);
        play.prefHeightProperty().bind(invisiblePause.heightProperty());
        play.prefWidthProperty().bind(invisiblePause.widthProperty());

        // layout the scene.
        HBox controls = new HBox(10, skip, play, progress);
        controls.setAlignment(Pos.CENTER);
        VBox mediaPanel = new VBox(10, currentlyPlaying, mediaView, controls);

        layout.setStyle("-fx-background-color: cornsilk; -fx-font-size: 20; -fx-padding: 20; -fx-alignment: center;");
        layout.getChildren().addAll(
                invisiblePause,
                mediaPanel
        );
        progress.setMaxWidth(Double.MAX_VALUE);
        HBox.setHgrow(progress, Priority.ALWAYS);

        return new Scene(layout);
    }

    /**
     * sets the currently playing label to the label of the new media player and updates the progress monitor.
     */
    private void setCurrentlyPlaying(final MediaPlayer newPlayer) {
        progress.setProgress(0);
        progressChangeListener = (observableValue, oldValue, newValue) ->
                progress.setProgress(
                        1.0 * newPlayer.getCurrentTime().toMillis() / newPlayer.getTotalDuration().toMillis()
                );
        newPlayer.currentTimeProperty().addListener(progressChangeListener);

        String source = getUserFriendlyMediaName(newPlayer);
        currentlyPlaying.setText("Now Playing: " + source);
    }

    /**
     * @return a MediaPlayer for the given source which will report any errors it encounters
     */
    private MediaPlayer createPlayer(String aMediaSrc) {
        System.out.println("Creating player for: " + aMediaSrc);
        final MediaPlayer player = new MediaPlayer(new Media(aMediaSrc));
        player.setOnError(() -> System.out.println("Media error occurred: " + player.getError()));
        return player;
    }

    private String normalizeFileURL(File dir, String file) {
        return "file:///" + (dir + "\\" + file).replace("\\", "/").replaceAll(" ", "%20");
    }

    private String getUserFriendlyMediaName(MediaPlayer newPlayer) {
        String source = newPlayer.getMedia().getSource();

        source = source.substring(0, source.length() - MUSIC_FILE_EXTENSION.length());
        source = source.substring(source.lastIndexOf("/") + 1).replaceAll("%20", " ");

        return source;
    }
} 
```

**如果您只想要一个带有 MediaPlayer 而没有 Swing 的本机 JavaFX 应用程序**

上面使用 Swing 的解决方案回答了所提出的问题。但是，我注意到有时人们已经选择了这个答案并使用它来创建基于 Java 的媒体播放器，即使他们没有将应用程序嵌入其中的现有 Swing 应用程序。

如果您没有现有的 Swing 应用程序，则从您的应用程序中完全消除 Swing 代码，并改为编写本机 JavaFX 应用程序。为此，请使用`JavaFXMediaPlayer`下面的类而不是`JavaFXMediaPlayerLaunchedFromSwing`上面示例中的类。

*JavaFX媒体播放器*

```
import javafx.application.Application;
import javafx.stage.Stage;

public class JavaFXMediaPlayer extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        stage.setScene(new MediaSceneGenerator().createScene());
        stage.show();
    }
} 
```

**后续问题的答案**

> 一旦我将通过 swing 构建的 .JAR 文件添加到 netbeans 中的库，它会自动添加 JavaFX 吗？

*注意：此关于包装的后续答案中的信息现在可能已过时，此时存在其他首选包装选项（例如[https://github.com/openjfx/javafx-maven-plugin](https://github.com/openjfx/javafx-maven-plugin)）。*

从技术上讲，Swing 不会构建 Jar 文件，但 javafx 打包命令的 jar 会。

如果您的应用程序包含 JavaFX，那么最好[使用 JavaFX 打包工具](http://docs.oracle.com/javafx/2/deployment/deploy_swing_apps.htm)。如果没有它们，您可能会遇到一些部署问题，因为 Java 运行时 jar (jfxrt.jar) 不会自动出现在 jdk7u7 的 java 引导类路径中。用户可以手动将其添加到他们的运行时类路径中，但这可能有点麻烦。在未来的 jdk 版本（可能是 jdk7u10 或 jdk8）中，jfxrt.jar 将位于类路径中。即便如此，仍然建议使用 JavaFX 打包工具，因为这将是确保您的部署包以最兼容的方式工作的最佳方式。

SwingInterop NetBeans 项目是一个[示例](http://www.oracle.com/technetwork/java/javafx/samples/index.html)NetBeans 项目，它利用 JavaFX 部署工具来嵌入 JavaFX 组件的 Swing 项目。SwingInterop 的源代码是[JDK 7 和 JavaFX Demos and Samples](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载的一部分。

# php - php邮件仍在查看html标签

> ID：12548605
> 
> 赞同：-1
> 
> 时间：2012-09-22T23:51:10.027
> 
> 标签：php, html, email, header, tags

这是我当前的代码，但它在发送时继续显示 html 标签 :( 帮助？

```
<?php
    $personip = $_POST['name'];
    $personip = getenv("REMOTE_ADDR");
    $typesup = $_POST['typesupport'];
    $timesent = date("F j, Y, g:i a");
    $personemail = $_POST['email'];
    $message = $_POST['message'];
    $headers = "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

    $body = "<html><body>"."Support Request - iSter"."<br>"."Sent from IP:"."$personip"." "."from:"."$personemail"."At time:"."$timesent"."<br>"."Message:"."<br>"."$message";

    $to      = 'jon*******5@gmail.com, anotheruser@example.com';
    $subject = "Request on $typesup"." from $personemail";

    $headers = 'From: support@mysite.im';

    mail($to, $subject, $body, $headers);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:55:38.503

您在发送之前覆盖了您的标题：

```
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$body = "<html><body>"."Support Request - iSter"."<br>"."Sent from IP:"."$personip"." "."from:"."$personemail"."At time:"."$timesent"."<br>"."Message:"."<br>"."$message";

$to      = 'jon*******5@gmail.com, anotheruser@example.com';
$subject = "Request on $typesup"." from $personemail";

$headers = 'From: support@mysite.im'; // THIS LINE IS OVERWRITING IT! 
```

将 = 更改为 .=

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:55:04.720

您需要正确关闭 html 标签：

```
$body = "<html><body>"."Support Request - iSter"."<br>"."Sent from IP:"."$personip"." "."from:"."$personemail"."At time:"."$timesent"."<br>"."Message:"."<br>"."$message</body></html>"; 
```

`</body></html>`留言后忘记添加了。

# ruby - 在 macbook air 上通过 rvm 安装 ruby 时出错

> ID：12548606
> 
> 赞同：1
> 
> 时间：2012-09-22T23:51:15.143
> 
> 标签：ruby, macos, rvm

刚拿到我的第一台 Mac，我正在尝试建立一个 ruby​​ 开发环境。我已经更新了 XCode、Homebrew 和 RVM。我试图让 RVM 安装 Ruby 1.9.2 但它失败了。

有任何想法吗？

```
Fetching yaml-0.1.4.tar.gz to /Users/mlanza/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/mlanza/.rvm/src
Error running 'tar xmzf /Users/mlanza/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/mlanza/.rvm/src ', please read /Users/mlanza/.rvm/log/ruby-1.9.2-p320/yaml/extract.log
Configuring yaml in /Users/mlanza/.rvm/src/yaml-0.1.4.
Error running ' ./configure --prefix="/Users/mlanza/.rvm/usr"  ', please read /Users/mlanza/.rvm/log/ruby-1.9.2-p320/yaml/configure.log
Compiling yaml in /Users/mlanza/.rvm/src/yaml-0.1.4.
Error running 'make ', please read /Users/mlanza/.rvm/log/ruby-1.9.2-p320/yaml/make.log
Installing Ruby from source to: /Users/mlanza/.rvm/rubies/ruby-1.9.2-p320, this may take a while depending on your cpu(s)...

ruby-1.9.2-p320 - #downloading ruby-1.9.2-p320, this may take a while depending on your connection...
ruby-1.9.2-p320 - #extracted to /Users/mlanza/.rvm/src/ruby-1.9.2-p320 (already extracted)
ruby-1.9.2-p320 - #configuring 
Error running ' ./configure --prefix=/Users/mlanza/.rvm/rubies/ruby-1.9.2-p320 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/mlanza/.rvm/usr ', please read /Users/mlanza/.rvm/log/ruby-1.9.2-p320/configure.log
There has been an error while running configure. Halting the installation. 
```

我熟悉 Ubuntu，并且没有问题。我期待 Mac 会更容易一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:17:35.827

升级到 Mountain Lion 后，我遇到了同样的问题。如果我没记错的话，那是因为最新版本的 Xcode 不再与命令行工具捆绑在一起。

您仍然可以通过访问[https://developer.apple.com/downloads/](https://developer.apple.com/downloads/)并搜索 Xcode 4.5 (OS X Mountain Lion) 的命令行工具来免费下载它们。您需要一个免费的开发者帐户才能访问下载区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:42:20.447

您需要阅读`rvm requirements`- 它告诉您如何安装`gcc-4.2`在 osx 上成功安装 Ruby 所需的内容，您可以尝试使用`clang`（最新的 xcode 附带），但它可能会给您带来随机问题，尤其是使用 Fibers。

# javascript - 在 Chrome 扩展弹出窗口中保存滚动位置时遇到问题

> ID：12548611
> 
> 赞同：0
> 
> 时间：2012-09-22T23:52:01.353
> 
> 标签：javascript, google-chrome-extension, scroll

我对编程比较陌生，并且正在开发带有弹出窗口的 Chrome 扩展程序。我想保存弹出调用之间的滚动位置。似乎我在互联网上找到了很多信息，但到目前为止我还没有能够解决我的问题。保存滚动位置几乎可以在我的扩展中使用，但我看到了 2 个问题：

**1）**要在每个滚动事件中保存滚动位置，我使用：

```
addEventListener('scroll', function(){
   localStorage.scrollTop = document.body.scrollTop;
}); 
```

当弹出窗口打开时，我使用：

```
document.body.scrollTop = localStorage.scrollTop 
```

这似乎工作正常，直到我的滚动位置超过弹出高度。Chrome 扩展中可见内容的最大弹出高度为 600 像素。`document.body.style.height`也始终是大于 600px 的固定值。当滚动位置大于`document.body.style.height`- 600px，比如 900px - 600px，`document.body.scrollTop`重置为 300px。即使`document.body.scrollTop`在弹出窗口关闭之前最后滚动位置 ( ) 是 400 像素，当重新打开弹出窗口时，滚动位置也会重置为 300 像素。显然，我得到了错误的滚动位置，因为正确的滚动位置值 400px（例如）然后被 300px 覆盖。

然而，它并不总是发生。有时我可以正确保存滚动位置，例如 500 像素，窗口高度为 900 像素，而其他时候我不能。我不确定为什么这会产生任何影响，但是随着弹出窗口中的内容更高，问题似乎神奇地消失了，并且保存了正确的滚动位置。

在这种情况下滚动位置时如何正确保存滚动位置？也许我在做一些根本错误的事情？

（这似乎令人困惑。我希望可以对上面的代码有所帮助。）

**2）**我认为可能与上述问题交织在一起，但我不确定。对于每个滚动事件（本文中的第一个代码块），我看到触发了一对滚动事件。

如果我只是打开弹出窗口但不滚动鼠标滚轮，我会看到事件侦听器中的代码触发。当第一个事件发生时，`document.body.scrollTop`重置为“错误”值（在上面的示例中为 300px）。我认为这可能是这两个问题的根本原因。

事件监听器不应该只在鼠标滚轮被移动时触发，因此如果弹出窗口打开但鼠标滚轮未被触摸，事件监听器内的代码不会执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:19:43.727

问题实际上出在相应的 CSS 代码中。不可滚动，因此`<div>`它不允许保存大于弹出窗口可见区域的滚动位置。

解决方案是向CSS 元素添加`position: relative;`and `overflow-y: auto;`(也可以) 属性。`overflow-y: scroll;`

添加这些属性后，我可以正确地将滚动位置保存到对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:58:36.337

我知道这不应该是一个答案，但我无法在评论中格式化代码：

我将冒险出去并建议您尝试测试一个基本假设： **滚动事件是否按顺序触发？**

试试这个，看看是否添加了一些有用的调试信息：

```
var scrollCounter = 0;
addEventListener('scroll', function(){
   localStorage.scrollTop = document.body.scrollTop;
   console.log({counter: scrollCounter, scrollTop: document.body.scrollTop});
   scrollCounter++
}) 
```

看看这些数字是否似乎在跳跃，或者它们是否按递增顺序排列。

**编辑：可能解决方案的 P 代码**

我想我对 a 有一个想法`fix`，尽管我在这里松散地使用了 fix 这个词。

```
var captureSemaphore; // Use this to flag exactly when we want the `scrollTop` captured.
captureSemaphore = true; // Go into catch mode

addEventListener('scroll', function(){
   if (captureSemaphore) {
     localStorage.scrollTop = document.body.scrollTop;
    }
});

// then later, right before you open your popup
captureSemaphore = false; // Disable catch mode because the screen is about to change
openPopup();              // Open the popup

// Elsewhere

closePopup();            // Close the popup
captureSemaphore = true; // Go into catch mode 
```

# c++ - 模板化函数应该通过值还是通过右值引用来获取 lambda 参数？

> ID：12548614
> 
> 赞同：37
> 
> 时间：2012-09-22T23:52:17.920
> 
> 标签：c++, templates, lambda, c++11, g++

C++11 模式下的 GCC 4.7 让我定义了一个采用 lambda 的函数，有两种不同的方式：

```
// by value
template<class FunctorT>
void foo(FunctorT f) { /* stuff */ } 
```

和：

```
// by r-value reference
template<class FunctorT>
void foo(FunctorT&& f) { /* stuff */ } 
```

但不是：

```
// by reference
template<class FunctorT>
void foo(FunctorT& f) { /* stuff */ } 
```

我知道我可以取消对函数的模板化，而只使用 std::functions ，但是`foo`它很小而且是内联的，我想给编译器最好的机会来内联对它内部的 f 的调用。在前两个中，如果我特别知道我正在传递 lambda，这对于性能来说更可取，为什么不允许将 lambda 传递给最后一个？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-22T23:56:09.920

`FunctorT&&`是一个*通用参考*，可以匹配任何东西，而不仅仅是右值。这是在 C++11 模板中传递内容的首选方式，除非您绝对需要副本，因为它允许您使用完美转发。通过 访问该值，如果它是以前的，它将再次`std::forward<FunctorT>(f)`创建`f`一个右值，否则将其保留为左值。[在此处](https://stackoverflow.com/q/3582001/500104)阅读有关转发问题的更多信息，`std::forward`并[在此处](https://stackoverflow.com/a/8527373/500104)`std::forward`阅读有关实际工作原理的分步指南。[这](https://stackoverflow.com/questions/5481539/what-does-t-mean-in-c11)也是一本有趣的读物。

`FunctorT&`只是一个简单的左值引用，您不能将临时变量（lambda 表达式的结果）绑定到它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T23:59:28.300

当你创建一个 lambda 函数时，你会得到一个临时对象。您不能将临时绑定到非常量左值引用。实际上，您不能直接创建引用 lambda 函数的左值。

`T&&`当你使用函数的参数类型声明你的函数模板时，`T const&`如果你将一个`const`对象传递给函数，`T&`如果你传递一个非常量左值对象给它，`T`如果你传递一个临时对象。也就是说，当传递一个临时函数声明时，函数声明将采用一个 r 值引用，该引用可以在不移动对象的情况下传递。当通过值显式传递参数时，临时对象在概念上被复制或移动，尽管此复制或移动通常被省略。如果您只将临时对象传递给您的函数，则前两个声明会做同样的事情，尽管第一个声明可能会引入移动或复制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-23T02:50:21.440

这是一个很好的问题——第一部分：按值传递或使用转发。我认为第二部分（`FunctorT&`作为论点）已经得到了合理的回答。

我的建议是：仅在函数对象已知时才使用转发，以修改其闭包（或捕获列表）中的值。最好的例子：std::shuffle。它需要一个统一随机数生成器（一个函数对象），每次调用生成器都会修改其状态。函数对象被转发到算法中。

在所有其他情况下，您应该更喜欢按值传递。这不会阻止您通过引用捕获本地变量并在您的 lambda 函数中修改它们。这将像您认为的那样工作。正如 Dietmar 所说，复制不应该有任何开销。内联也将适用，并且可以优化引用。

# python - 限制GAE url_fetch get方法的返回大小？

> ID：12548618
> 
> 赞同：2
> 
> 时间：2012-09-22T23:53:17.700
> 
> 标签：python, google-app-engine, urllib2

我试图从在线存储的 Mp3 文件中获取 Id3 信息而不获取整个文件，并且从大量谷歌搜索中，最好的方法似乎是获取文件的前几个 kb，然后从中获取它。谷歌应用引擎（python）中有没有办法从它的 URL 获取文件的开头？

就像是

```
rpc.size_limit = 4096
rpc = urlfetch.create_rpc(deadline=10.0)
     urlfetch.make_fetch_call(rpc, url, method=method, headers=headers,
       payload=payload, allow_truncated=True)
return rpc 
```

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T12:24:54.110

找到了！如果网站接受如下标题，您可以在标题中放置一个范围

```
headers["Range"] = "bytes = 0-4096" 
```

或者，如果网站不喜欢范围标头，您可以使用以下内容（到目前为止，我尝试过的少数都有）

```
host = 'http://www.wikipedia.org/somepath/tosome/file.mp3'
req = urllib2.Request(host, headers={'User-Agent' : "Magic Browser"})
response = urllib2.urlopen(req).read(4*1024) 
```

希望这可以为将来的人节省一些时间！

# c++ - 安全地转换结构指针

> ID：12548619
> 
> 赞同：3
> 
> 时间：2012-09-22T23:53:28.440
> 
> 标签：c++, casting, struct

我一直认为在将 void* 转换为 struct* 后检查指针是避免无效转换的有效方法。就像是

```
MyStructOne* pStructOne = (MyStructOne*)someVoidPointer;
if(!pStructOne)
   return 0; 
```

看来情况并非如此，因为我可以将相同的数据转换为两个不同的结构并获得相同的有效地址。然后程序很乐意用其中的任何随机数据填充我的结构字段。

**什么是转换结构指针的安全方法？**

我不能使用 dynamic_cast<> 因为它不是一个类。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:15:53.607

如果您对结构布局有任何控制权，则可以将自己的类型枚举放在每个结构的前面以验证类型。这适用于 C 和 C++。

如果由于并非所有类型都提前知道而无法使用枚举，则可以使用 GUID。或者指向每个结构唯一的静态变量或成员的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T23:59:45.653

您可以`dynamic_cast`与结构或类一起使用，只要它具有虚拟方法即可。我建议您重新设计更广泛的系统，使其在`void*`任何地方都没有 s。这是非常糟糕的实践/设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T00:07:36.233

一般来说，没有“安全的转换方式”，因为转换指针本质上是一个不安全的过程。铸造说你比类型系统更了解，所以你不能指望类型系统在你开始铸造指针之后有任何帮助。

在 C++ 中，您永远不应该使用 C 风格的强制转换（如`(T) x`），而应使用 C++ 强制转换。现在有一些简单的规则可以让您确定是否可以转换指针或引用：

*   如果您`const_cast`在错误的方向上修改了对象，则必须确保该对象实际上是可变的。

*   您只能`static_cast`在多态层次结构中使用指针或引用，或者从/到 void 指针。您必须确保对象的动态类型是强制转换目标的子类型，或者在 void 指针的情况下，该指针是正确类型对象的地址。

*   `reinterpret_cast`只能用于`char *`类型（可能是`signed`or `unsigned`）或从类型转换，或将指针转换为`(u)intptr_t`.

在任何情况下，*您*都有责任确保所讨论的指针或引用引用您在强制转换中声明的类型的对象。没有其他人可以为您验证这一点的检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T00:09:06.697

您正在使用的（C 风格）强制转换是编译时操作 - 也就是说，编译器生成指令来修改指向一个事物的指针，使其指向另一个事物。

对于继承关系，这只是指针的加法或减法。

就您的代码而言，编译器不会生成*任何代码*。演员表只是告诉编译器你知道你在做什么。

编译器不会生成任何代码来检查您的操作的有效性。如果`someVoidPointer`为空，则`pStructOne`在演员表之后也是如此。\

使用 a`dynamic_cast<>()`并不能验证被强制转换的东西实际上是一个对象 - 它只是告诉您具有 RTTI 的对象是（或可以转换为）您期望的类型。如果它不是一个开始的对象，你很可能会崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T00:00:42.853

没有一个。坦率地说，不可能。

`struct`只是编译器以`sizeof()`特定语义方式处理下一个字节的指令-仅此而已。

您可以将任何指针转换为任何指针 - 所改变的只是编译器如何解释内容。

使用`dynamic_cast<>`是唯一的方法，但它会调用 RTTI（运行类型类型信息）来考虑分配的潜在合法性。是的，它不再是`reinterpret_cast<>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T00:04:05.013

听起来您想确保作为 a 传递`void*`给您的函数的对象确实是您期望的类型。最好的方法是声明函数原型，`MyStructOne*`而不是`void*`让编译器进行类型检查。

如果你真的想要做一些更动态的事情（比如可以将不同类型的对象传递给你的函数），你需要启用[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information%5d)。这将允许您询问传入的对象并询问它是什么类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-23T00:16:13.830

> 什么是转换结构指针的安全方法？

首先，尽量避免一开始就*需*要这样做。如果您不想包含它们的标题，请对结构使用前向声明。*通常，如果一个函数可以采用多种*类型的数据，您应该只需要从签名中隐藏数据类型。类似的例子是一个消息传递系统，你希望能够传递任意数据。发送者和接收者知道他们期望什么类型，但消息系统本身不需要知道。

假设您没有其他选择，请使用[`boost::any`](http://www.boost.org/doc/libs/1_51_0/doc/html/any.html). 这本质上是类型安全的`void*`；尝试将其转换为错误的类型将引发异常。请注意，这需要 RTTI 才能工作（您通常应该有）。

请注意，`boost::variant`如果可以使用一组固定的、有限的可能类型，则可能会出现这种情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-23T00:19:06.940

由于您必须使用`void*`，您的选择是：

1.  创建一个包含虚拟析构函数（和/或其他虚拟方法）的单个基类，并在 libev 接口中独占使用它。包装 libev 接口以强制执行此操作，并且仅使用 C++ 代码中的包装器。然后，*在*您的 C++ 代码中，您可以`dynamic_cast`创建基类。

2.  接受您没有关于您`void*`真正指向的类型的任何运行时信息，并且只是构造您的代码，以便您*始终*静态地知道。也就是说，请确保首先转换为正确的类型。

3.  使用`void*`来存储一个简单的标签/cookie/id 结构，并使用它来查找您的真实结构或其他任何东西 - 这实际上只是 #1 的一个更手动的版本，并且会导致额外的间接引导。

* * *

直接回答

> 什么是转换结构指针的安全方法？

是：

> 转换为正确的类型，或您知道与布局兼容的类型。

*静态*地知道正确的类型是什么，没有任何替代品。您大概将*某些东西*作为 a传入`void*`，因此当您取回它时，`void*`您应该能够知道它是什么类型。

# php - 无法让 CodeIgniter 中的上传表单正常工作

> ID：12548620
> 
> 赞同：1
> 
> 时间：2012-09-22T23:53:41.930
> 
> 标签：php, codeigniter, upload

我有一个表单，用户可以在其中编辑他们的公共个人资料并在此过程中上传图片。一切正常，除了当用户上传照片或只是将其留空而不更改它时，它仍然会继续并尝试上传它并在它为空时抛出错误......我确实有一个检查，但是它只是忽略它。

```
if(isset($_FILES['userfile']))
    {
        $file_name = $this->session->userdata('user_id');
        $img = $this->custom_lib->img_upload('./upload/user/', $file_name);
        $user_pic = 'upload/user/'.$file_name.$img['file_ext'];
    } else {
        $user_pic = 'upload/default.png';
    } 
```

我认为问题出在 if 语句中，但我看不出它可能是什么。如果我确实选择了一张图片，它会很好地上传它并且一切正常。如果我将图像字段留空（不选择文件）而不是这样做：

```
$user_pic = 'upload/default.png'; 
```

它尝试上传一个文件......它不存在......然后它抛出一个错误。img_upload() 函数在我制作的自定义库中，但是如果没有提交文件，甚至不应该调用该函数。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:59:14.337

*即使您正在检查的项目不包含任何内容、为 null 或为 false，*isset也会返回 true。**

 *为避免此问题，您可以像这样使用*empty*：

```
if(!empty($_FILES['userfile'])) 
```

仅当 $_FILES['userfile'] 包含不为 null、false 或空的值时，这将返回 true。

希望有帮助:-)。*

# validation - 使用 express-validator 验证密码

> ID：12548624
> 
> 赞同：12
> 
> 时间：2012-09-22T23:55:01.640
> 
> 标签：validation, node.js, express

我正在使用 express 3.x 的 express-validator - 当用户更改密码或注册新帐户时，他们必须输入两次密码。

如果两个密码（两个字符串）不匹配，我将如何编写一个自定义验证器，它将错误推送到 express-validator 中的错误堆栈？

像这样的东西：

```
req.assert('password1', 'Passwords do not match').isIdentical(password1, password2);
var mappedErrors = req.validationErrors(true); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-23T00:31:46.333

我找到了答案

```
req.assert('password2', 'Passwords do not match').equals(req.body.password1);
var mappedErrors = req.validationErrors(true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-27T15:14:53.453

This one works!

```
req.checkBody('password2','Passwords do not match.').equals(req.body.password1);
var errors = req.validationErrors(); 
```

*notice the use of* `checkBody()` *in this case*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-14T15:14:12.740

这是我找到的答案

```
const { body } = require('express-validator/check');
app.post('/user', body('passwordConfirmation').custom((value, { req }) => {
if (value !== req.body.password) {
    throw new Error('Password confirmation does not match password');
    }
  }), (req, res) => {
// Handle the request
});` 
```

检查此文档[https://express-validator.github.io/docs/custom-validators-sanitizers.html](https://express-validator.github.io/docs/custom-validators-sanitizers.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-04T07:02:42.737

正确方法： [express-validator doc：检查密码确认是否与密码匹配](https://express-validator.github.io/docs/custom-validators-sanitizers.html)

```
const RegistrationRules = [
  check("password")
    .notEmpty().withMessage("Password should not be empty"),
  check("confirmPassword")
    .notEmpty().withMessage("Confirm Password should not be empty")
    .custom((value,{req}) =>{
        if(value !== req.body.password){
            throw new Error('Password confirmation does not match with 
            password')
        }
        return true;
    }),] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-19T16:52:50.367

我用自定义方法制作它：

```
.custom(() => {
      if (req.body.password === req.body.confirmPassword) {
        return true;
      } else {
        return false;
      }
    })
```

这是密码验证器的完整代码：

```
exports.userRegisterValidator = (req, res, next) => {

//
  // ─── CHECK FOR PASSWORD ─────────────────────────────────────────────────────────
  //
  req
    .check("password", "Password is required")
    .notEmpty()
    .isLength({
      min: 6
    })
    .withMessage("Password must contain at least 6 characters")
    .isLength({
      max: 20
    })
    .withMessage("Password can contain max 20 characters")
    .custom(() => {
      if (req.body.password === req.body.confirmPassword) {
        return true;
      } else {
        return false;
      }
    })
    .withMessage("Passwords don't match.");

  //
  // ─── CHECK FOR ERRORS ───────────────────────────────────────────────────────────
  //
  const errors = req.validationErrors();

  // if error show the first one as they happen
  if (errors) {
    const firstError = errors.map(error => error.msg)[0];
    return res.status(400).json({ error: firstError });
  }

  // proceed to next middleware
  next();
};
```

# jquery - 定位特定的 div

> ID：12548629
> 
> 赞同：0
> 
> 时间：2012-09-22T23:55:35.000
> 
> 标签：jquery, html, targeting

好的，我想弄清楚如何使用 jQuery 来计算`div`当前选择的内容、突出显示等，然后将代码应用于该`div`.

例如，我将三个`div`s 排成一排。每个`div`都有一个`class`。`.box`每个内部都有`div`另一个`div`具有`.overlay`. 默认情况下`.overlay`设置为`display: none;`，但是当我将鼠标滚动到每个`div`我想要覆盖的地方时，`div`仅设置为可见 - 所有其他`div`的覆盖应该保持隐藏。

看看，[http://jsfiddle.net/j76s2/](http://jsfiddle.net/j76s2/)

我有 JS 让覆盖显示鼠标滚过`div`s 时，但它会显示所有覆盖，只要你将鼠标滚过任何`div`. 我知道为什么会发生这种情况，但我无法解决的是如何让代码运行起来，当鼠标悬停在它上面`div`时，它应该只显示第一个覆盖`div`，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:57:53.777

您只需要使用以下内容引用特定元素`this`：

```
$(".box").mouseover(function(){
    $(".overlay", this).css({"display" : "block"});
});

$(".box").mouseleave(function(){
    $(".overlay", this).css({"display" : "none"});
}); 
```

这样，您将选择范围缩小到`.box`包含在悬停元素内的元素。

另外，考虑使用`.hide()`and`.show()`而不是`.css()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:08:23.707

您可以使用`.hover()`具有两个功能的事件，一个用于悬停，一个用于悬停。然后，您可以将`this`其用作当前悬停`.box`元素的上下文以在其中找到`.overlay`它，然后使用`.hide()`并`.show()`更改它的可见性。

```
$(".box").hover(
    function(){$(this).find(".overlay").show()},
    function(){$(this).find(".overlay").hide()}
); 
```

工作演示：http: [//jsfiddle.net/jfriend00/wa5Bn/](http://jsfiddle.net/jfriend00/wa5Bn/)

您可能还喜欢使用`fadeIn()`并`fadeOut()`喜欢这样：

```
$(".box").hover(
    function(){$(this).find(".overlay").stop(true, true).fadeIn(500)},
    function(){$(this).find(".overlay").stop(true, true).fadeOut(500)}
);​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/4qeqm/](http://jsfiddle.net/jfriend00/4qeqm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:58:52.793

`.overlay`您正在更改具有该类的所有元素的 CSS 。要仅影响您当前鼠标悬停的那个，您应该使用`$(this)`选择当前元素，然后`find()`定位其中包含的类。

```
$(".box").mouseover(function(){
    $(this).find(".overlay").css({"display" : "block"});
});

$(".box").mouseleave(function(){
    $(this).find(".overlay").css({"display" : "none"});
}); 
```

​</p>

# java - 安卓文件下载。不以文件名和类型结尾的媒体 URL，问题

> ID：12548631
> 
> 赞同：2
> 
> 时间：2012-09-22T23:55:39.307
> 
> 标签：java, android, http, download, video-streaming

我正在为 Android 开发一个下载任何应用程序，它在大多数情况下都能正常工作。

我遇到过一些网站，其 URL 的末尾带有一个长哈希签名（似乎）。但是适用于 Android 的标准视频应用程序和我的网络浏览器能够直接播放它，流式传输。

我不知道如何将其流式传输到文件（渐进式下载？），这应该是可能的。'?' 之后的 URL 参数 用于某事。正如 Jessica 指出的，下面的 URL 可能用于带有 rtmp://...的 RTMP 流。

URL 示例（主机域已编辑）：

```
 http://blush.im.54ca3830.919727.x.yesitisporn.com/videos/3gp/d/b/f/
      filthysite.com_dbf7f0a9c3913d4d0e09a36fe8ab3aba.mp4?e=1348368010&ri=1024&rs=85&h=c81c6707b13714ac65b651ba2939d94a 
```

在上面的 URL 中有一个 mp4 视频文件的链接。尝试用这个较短的 URL 下载它是行不通的：`http://blush.im.54ca3830.919727.x.yesitisporn.com/videos/3gp/d/b/f/ filthysite.com_dbf7f0a9c3913d4d0e09a36fe8ab3aba.mp4`. 返回一个空文档。

由于流行的视频应用程序和浏览器选择了这些类型的 HTTP 链接，因此可以很好地播放；应该有一种获取字节流并将其写入文件的标准方法。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:04:15.967

**针对最初提出的问题：** 添加 URL 参数，用问号将 url 与参数分开，并用 & 号分隔参数是很常见的。如果存在问号，则将所有内容的子字符串提取到 url 中的第一个非转义问号，否则使用整个字符串。

**基于新的反馈：** 就像我在评论中所说的那样，并且正如您在没有参数的情况下进行的测试所证实的那样，我认为您正在寻找错误的树来尝试更改 URL。我怀疑您无法保存这些特定流的原因是文件格式或服务器配置与可用的不同。特别是，我的第一个想法是这些 URL 可能由流服务器提供服务（例如：[Icecast](http://icecast.org))，而不是普通的基于文件的 HTTP 服务器。流媒体服务器的优点包括能够即时提供不同带宽版本的流，以及即时搜索文件的任何部分等等，但对于试图构建下载任何应用程序的人来说，缺点是那些服务器不将数据作为单个文件发送，他们以块的形式发送数据 - 尽量不要太疯狂的技术，基本上，一个块可能有第一帧加上一堆差异，用于接下来几帧的视频内容和音频，重复。当它这样做时，它可以根据它看到的延迟或屏幕的分辨率来限制发送的质量，或者如果你调整窗口大小等，它会调整它发送的大小。这种流媒体特别适用于现场活动，但它对于记录事件也并非没有优势——尤其是随机搜索。为了使捕获数据的事情复杂化，一些流媒体服务器实际上通过 RTMP、RTSP 或 MMS 协议而不是通过 HTTP 传输视频数据。[HTTP 伪流式传输](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12534/video-delivery-http-pseudo-streaming)或直接 HTTP 下载将比[通过 RTMP 流式传输](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12535/video-delivery-rtmp-streaming)更容易保存。某些流媒体类型您几乎必须从单个数据包重新创建文件，或者在实时播放时从屏幕上播放的内容对其进行转码。因此，您可能需要花一些时间了解不同的流协议，以找出保存您正在查看的特定流的最佳方法。

# d3.js - 带有实时数据的 NVD3 折线图

> ID：12548640
> 
> 赞同：10
> 
> 时间：2012-09-22T23:57:21.583
> 
> 标签：d3.js, nvd3.js

我有一个使用 NVD3.js 编写的非常简单的折线图。我写了一个基于计时器的简单重绘，从我见过的例子中提取，但我得到了错误

未捕获的类型错误：无法读取未定义的属性“y”

JS是

```
 var data = [{
        "key": "Long",
        "values": getData()
    }];
    var chart;

    nv.addGraph(function () {
          chart = nv.models.cumulativeLineChart()
                      .x(function (d) { return d[0] })
                      .y(function (d) { return d[1] / 100 })
                      .color(d3.scale.category10().range());

        chart.xAxis
            .tickFormat(function (d) {
                return d3.time.format('%x')(new Date(d))
            });

        chart.yAxis
            .tickFormat(d3.format(',.1%'));

        d3.select('#chart svg')
            .datum(data)
            .transition().duration(500)
            .call(chart);

        nv.utils.windowResize(chart.update);

        return chart;
    });

    function redraw() {
        d3.select('#chart svg')
            .datum(data)
          .transition().duration(500)
            .call(chart);
    }

    function getData() {
        var arr = [];
        var theDate = new Date(2012, 01, 01, 0, 0, 0, 0);
        for (var x = 0; x < 30; x++) {
            arr.push([theDate.getTime(), Math.random() * 10]);
            theDate.setDate(theDate.getDate() + 1);
        }
        return arr;
    }

    setInterval(function () {
        var long = data[0].values;
        var next = new Date(long[long.length - 1][0]);
        next.setMonth(next.getMonth() + 1)
        long.shift();
        long.push([next.getTime(), Math.random() * 100]);
        redraw();
    }, 1500); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T15:12:19.643

**第二个答案**（评论后）

我查看[了累积线图的来源](https://github.com/novus/nvd3/blob/master/src/models/cumulativeLineChart.js)。您可以看到在图表创建期间创建了 display.y 属性。它依赖于一个私有方法：“indexify”。如果该方法的某些派生被公开，那么也许您可以`chart.reindexify()`在重绘之前做一些事情。

作为临时解决方法，您可以在每次更新时从头开始重新创建图表。如果您删除过渡，那似乎可以正常工作。jsfiddle 示例：http: [//jsfiddle.net/kaliatech/PGyKF/](http://jsfiddle.net/kaliatech/PGyKF/)。

**第一个答案**

我相信累积线图有错误。看来，cumulativeLineChart 将“display.y”属性动态添加到系列中的数据值。但是，当将新值添加到系列以进行重绘时，它不会重新生成此属性。尽管我是 NVD3 的新手，但我不知道怎么做。

你真的需要一个 CumulativeLineChart，还是一个正常的折线图就足够了？如果是这样，我必须对您的代码进行以下更改：

*   从**累积线图更改为线图**
*   从使用二维数据数组更改为使用数据**对象（具有 x,y 属性）**
    *   （我对 NVD3 不够熟悉，无法说出预期的数据格式。2D 数组显然适用于初始加载，但我认为它不适用于后续重绘。这可能与您遇到的同一个问题有关，cumulativeLineChart .我认为更改为对象也会修复累积线图，但似乎没有。）

我还更改了以下内容，尽管不是那么重要：

*   修改了您的 getData 函数以**创建 Date 的新实例，**以避免在日期增加时共享引用的意外后果。

*   修改了更新间隔函数，以天（不是月）为增量生成新数据，其中 y 值与 getData 函数的范围相同。

这是一个带有这些更改的工作jsfiddle：

*   [http://jsfiddle.net/kaliatech/4TMMD/](http://jsfiddle.net/kaliatech/4TMMD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T12:51:10.267

我发现了我认为更好的解决方案。出现此问题的原因是累积图表在处理过程中设置了 y 函数。每当您想刷新图表时，首先将其设置回返回正确原始 y 的默认值。在您的重绘功能中，在更新之前执行此操作：

```
chart.y(function (d) { return d.y; }); 
```

Even better would be if the cumulative chart could do this for itself (store the original access function before setting the new one, and put it back before re-indexing). If I get a chance, I'll try to push a fix.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T15:49:42.800

我遇到了同样的问题。我更改了 y() 函数从

```
.y(function(d) { return d.display.y }) 
```

到

```
.y(function(d) { return d.display ? d.display.y : d.y }) 
```

这消除了错误。显然它不会在错误情况下显示（不存在的）索引值，但根据我的经验，图表会再次更新并定义显示，并且看起来正确。

# c# - 此代码段中的竞争条件在哪里？（简而言之，来自 C# 5.0）

> ID：12548642
> 
> 赞同：3
> 
> 时间：2012-09-22T23:57:38.747
> 
> 标签：c#, wpf, multithreading

这是来自 Joseph Albahari 的优秀 C# 5.0 in a Nutshell book

在他的一章中，他提到了这个代码块中的一个竞争条件。我的猜测是它的意思是不言而喻的，因为他没有费心指定它在哪里，但是多次运行代码我无法产生上述竞争条件

```
_button.Click += (sender, args) =>
{
   _button.IsEnabled = false;
   Task.Run (() => Go());
};

void Go()
{
    for (int i = 1; i < 5; i++)
    {
        int result = GetPrimesCount (i * 1000000, 1000000);
        Dispatcher.BeginInvoke (new Action (() =>
       _results.Text += result + " primes between " + (i*1000000) + " and " + 
                                   ((i+1)*1000000-1) + Environment.NewLine));
    }

    Dispatcher.BeginInvoke (new Action (() => _button.IsEnabled = true));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:26:06.110

我不同意@Serge 的回答。您甚至不需要多个线程来查看问题。尝试以原始形式运行您的代码并注意输出。对我来说，它是以下内容，有时是随机的（我固定了第一个值）：

```
1000000 primes between 5000000 and 5999999
1000000 primes between 5000000 and 5999999
1000000 primes between 5000000 and 5999999
1000000 primes between 5000000 and 5999999 
```

注意最后 2 个值。它们都是一样的，但它们应该依赖于`i`. 问题不在于操作不是原子的，因为 GUI 线程无论如何都会按顺序执行操作。

发生这种情况的原因是传递给的 lambda 函数在执行时`BeginInvoke`获取值`i` **，而不是在初始化**时，因此它们都会在执行`i`时看到最后一个值。解决方案是像这样显式地将`i`参数作为参数传递给 lambda：

```
for (int i = 1; i < 5; i++)
{
    int result = 1000000;
    Dispatcher.BeginInvoke(new Action<int>(j =>
    results.Text += result + " primes between " + (j * 1000000) + " and " +
                              ((j + 1) * 1000000 - 1) + Environment.NewLine), i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T00:20:23.150

这条线不会被原子计算：

```
_results.Text += result + " primes between " + (i*1000000) + " and " + ((i+1)*1000000-1) + Environment.NewLine)); 
```

因此，从 5 个并发运行的线程执行它可能会产生不同的有趣结果。

# linux - 将两个 grep 和 awk 应用于相同的输入

> ID：12548645
> 
> 赞同：3
> 
> 时间：2012-09-22T23:58:12.217
> 
> 标签：linux, bash, unix

我在我的 python 脚本中使用了两个简短的 UNIX 命令来获取有关附近无线接入点的一些数据。

*   n°1，获取接入点的 ESSID：

`"iwlist NIC scan | grep ESSID | awk '{print $1}'"`

*   n°2，获取接入点的信号强度：

`"iwlist NIC scan | grep level | awk '{print $3}'"`

我的问题是我一个接一个地使用这两个命令，这意味着它不会生成“对称”数据。您可能会获得 6 个 ESSID 和 4 个信号强度数据。

因为第一次，脚本找到了 6 个 AP（A、B、C、D、E 和 F），而下一次只找到了 4 个 AP（A、C、E 和 F）。

我的一些问题如下：

*   有没有办法“拆分”第一个结果，`iwlist NIC scan`然后将两个不同的`grep`和`awk`序列应用于同一个输入？

只是为了让你至少得到一个对称的结果列表。

先感谢您 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T00:33:40.040

`awk`使用as怎么样`grep`：

```
iwlist NIC scan | awk '/ESSID/ {print $1} /level/ {print $3}' 
```

这会同时为您提供 ESSID 和电平线。你可能想要更复杂一点，至少用它所代表的来标记线条；选项很多。从您的代码中不清楚您将如何使用输出，所以我不会尝试并猜测如何最好地呈现它（但我希望同一行上的网络 ID 和级别会是一个很好的输出——这是可行的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T13:09:10.807

In general, you can accomplish this type of routing using `tee` and process substitution:

```
iwlist NIC scan | tee >( grep -i ESSID | awk '{print $1}' ) | grep -i level | awk '{print $3}' 
```

but this is inferior in this situation for several reasons:

1.  `grep` is superfluous, since `awk` can do the filtering itself
2.  The two branches are similar enough to fold into a single `awk` command, as Jonathan Leffler points out.
3.  The two output streams are merged together in a nondeterministic manner, so it may be difficult or impossible to determine which level corresponds to which ESSID. Storing the output of each branch in a file and later matching them line by line helps, but then this is not much better than asgs's solution.

But the technique of passing one command's output to two different pipelines without an explicit temporary file may be useful elsewhere; consider this answer just a demonstration.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T00:14:31.207

```
#!/bin/bash
iwlist <NIC> scan > tmpfile
grep -i ESSID tmpfile | awk '{print $1}'
grep -i level tmpfile | awk '{print $3}'
rm tmpfile 
```

像这样的脚本可能会做你所期望的。

# objective-c - 设置自定义 UIPickerView

> ID：12548647
> 
> 赞同：2
> 
> 时间：2012-09-22T23:58:23.667
> 
> 标签：objective-c, ios, xcode

我希望能够将我的设置`UIPickerView`为 1 列和 10 行。在此列中，有一个标题 ( `UILabel`) 和旁边的图像（图像是星星，可能有 1-3 颗星）。我已将图像放入一个名为“showImages”的数组中。我已将其`UILabels`放入一个`NSString`名为“currentNames”的数组中。两个数组的索引相互对应。由于某种原因，我的代码在我实现时不起作用

```
 - (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
    forComponent:(NSInteger)component reusingView:(UIView *)view 
```

我相信这是因为我使用“行”来索引不正确的数组。有谁知道我怎么能正确地做到这一点？在此先感谢，我的其余代码如下。

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
    forComponent:(NSInteger)component reusingView:(UIView *)view {

NSString *imageName= [imageNames objectAtIndex:row];

if(component == 0)
{
NSString *imageName= [imageNames objectAtIndex:row];
        UIImage *img = [UIImage imageNamed:imageName];
        UIImageView *temp = [[UIImageView alloc] initWithImage:img];        
        temp.frame = CGRectMake(120, 15,70, 27);

    UILabel *channelLabel = [[UILabel alloc] initWithFrame:CGRectMake(-80, 0, 320, 60)];
    channelLabel.text = [currentLottoNames objectAtIndex:row];
    channelLabel.textAlignment = UITextAlignmentLeft;
    channelLabel.backgroundColor = [UIColor clearColor];
    channelLabel.font = [UIFont boldSystemFontOfSize:20];
    channelLabel.backgroundColor = [UIColor clearColor];
    channelLabel.shadowColor = [UIColor whiteColor];
    channelLabel.shadowOffset = CGSizeMake (0,1);

    UIView *tmpView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 60)];

    [tmpView insertSubview:channelLabel atIndex:0];
    [tmpView insertSubview:temp atIndex: 1];
      i++;
      return tmpView;
     }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:11:25.417

I don't know how that could be wrong -- the row parameter being passed in should go from 0 to [imageNames count] - 1, so it should never be out of range. If you log row does it give you a number higher than [imageNames count] - 1? You should probably log [imageNames count] in the pickerView:numberOfRowsInComponent: method too, to make sure it's giving you what you think it is.

# java - 如何在C和java中产生cpu缓存效果？

> ID：12548651
> 
> 赞同：8
> 
> 时间：2012-09-22T23:59:26.693
> 
> 标签：java, c, linux, cpu-cache

在 Ulrich Drepper 的论文[What every developer should know about memory](http://www.akkadia.org/drepper/cpumemory.pdf)中，第 3 部分：CPU Caches，他展示了一个图表，显示了“工作集”大小和每个操作消耗的 cpu 周期之间的关系（在这种情况下，顺序读取）。图中有两个跳跃，分别表示 L1 缓存和 L2 缓存的大小。我编写了自己的程序来重现 c 中的效果。它只是简单地从头到尾顺序读取一个 int[] 数组，我尝试了不同大小的数组（从 1KB 到 1MB）。我将数据绘制成图表，没有跳跃，图表是一条直线。

我的问题是：

1.  我的方法有问题吗？产生cpu缓存效果的正确方法是什么（查看跳转）。
2.  我在想，如果是顺序读取，那么它应该是这样操作的：当读取第一个元素时，它是缓存未命中，并且在缓存行大小（64K）内，会有命中。在预取的帮助下，读取下一个缓存行的延迟将被隐藏。它将连续读取数据到 L1 缓存，即使工作集大小超过 L1 缓存大小，它也会驱逐最近最少使用的数据，并继续预取。所以大部分缓存未命中将被隐藏，从 L2 获取数据所消耗的时间将隐藏在读取活动的后面，这意味着它们是同时操作的。关联性（在我的例子中是 8 种方式）将隐藏从 L2 读取数据的延迟。那么，我的程序现象应该是正确的，我错过了什么吗？
3.  是否有可能在java中获得相同的效果？

顺便说一句，我在linux中这样做。

* * *

## 编辑 1

感谢 Stephen C 的建议，这里有一些额外的信息：这是我的代码：

```
int *arrayInt;

void initInt(long len) {
    int i;
    arrayInt = (int *)malloc(len * sizeof(int));
    memset(arrayInt, 0, len * sizeof(int));
}

long sreadInt(long len) {   
    int sum = 0;
    struct timespec tsStart, tsEnd;

    initInt(len);

    clock_gettime(CLOCK_REALTIME, &tsStart);
    for(i = 0; i < len; i++) {
        sum += arrayInt[i];
    }
    clock_gettime(CLOCK_REALTIME, &tsEnd);
    free(arrayInt);
    return (tsEnd.tv_nsec - tsStart.tv_nsec) / len;
} 
```

在 main() 函数中，我尝试了从 1KB 到 100MB 的数组大小，仍然相同，每个元素的平均耗时为 2 纳秒。我认为时间是L1d的访问时间。

我的缓存大小：

L1d == 32k

L2 == 256k

L3 == 6144k

* * *

## 编辑 2

我已将代码更改为使用链表。

```
// element type
struct l {
    struct l *n;
    long int pad[NPAD]; // the NPAD could be changed, in my case I set it to 1
};

struct l *array;
long globalSum;

// for init the array
void init(long len) {
    long i, j;

    struct l *ptr;

    array = (struct l*)malloc(sizeof(struct l));
    ptr = array;
    for(j = 0; j < NPAD; j++) {
        ptr->pad[j] = j;
    }
    ptr->n = NULL;

    for(i = 1; i < len; i++) {
        ptr->n = (struct l*)malloc(sizeof(struct l));
        ptr = ptr->n;
        for(j = 0; j < NPAD; j++) {
            ptr->pad[j] = i + j;
        }
        ptr->n = NULL;
    }

}

// for free the array when operation is done
void release() {
    struct l *ptr = array;
    struct l *tmp = NULL;
    while(ptr) {
        tmp = ptr;
        ptr = ptr->n;
        free(tmp);
    }
}

double sread(long len) {
    int i;
    long sum = 0;

    struct l *ptr;
    struct timespec tsStart, tsEnd;

    init(len);

    ptr = array;

    clock_gettime(CLOCK_REALTIME, &tsStart);
    while(ptr) {
        for(i = 0; i < NPAD; i++) {
            sum += ptr->pad[i];
        }
        ptr = ptr->n;
    }
    clock_gettime(CLOCK_REALTIME, &tsEnd);

    release();

    globalSum += sum;

    return (double)(tsEnd.tv_nsec - tsStart.tv_nsec) / (double)len;
} 
```

最后，我将打印出 globalSum 以避免编译器优化。如您所见，它仍然是顺序读取，我什至尝试了高达 500MB 的数组大小，每个元素的平均时间约为 4 纳秒（可能是因为它必须访问数据'pad'和指针' n', 两次访问), 与 1KB 的数组大小相同。所以，我认为这是因为像预取这样的缓存优化很好地隐藏了延迟，对吗？我会尝试随机访问，稍后再放上结果。

* * *

## 编辑 3

我尝试了对链表的随机访问，结果如下： ![随机访问一个链表](../Images/046f96d346807e77c6ac605c25301499.png)

第一条红线是我的 L1 缓存大小，第二条是 L2。所以我们可以看到那里有一点跳跃。有时延迟仍然被很好地隐藏起来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T13:52:43.947

这个答案不是答案，而是更多的一组笔记。

首先，CPU 倾向于在高速缓存行上运行，而不是在单个字节/字/双字上运行。这意味着如果您按顺序读取/写入整数数组，那么对缓存行的第一次访问可能会导致缓存未命中，但随后对同一缓存行中不同整数的访问不会。对于 64 字节缓存行和 4 字节整数，这意味着每 16 次访问只会出现一次缓存未命中；这会稀释结果。

其次，CPU 有一个“硬件预取器”。如果它检测到正在按顺序读取高速缓存行，则硬件预取器将自动预取它预测接下来需要的高速缓存行（以尝试在需要之前将它们提取到高速缓存中）。

第三，CPU 会做其他事情（比如“乱序执行”）来隐藏获取成本。您可以测量的时间差（缓存命中和缓存未命中之间）是 CPU 无法隐藏的时间，而不是获取的总成本。

这三件事结合在一起意味着；对于顺序读取整数数组，CPU 可能会在您从前一个缓存行读取 16 次时预取下一个缓存行；并且任何缓存未命中成本都不会引起注意，并且可能完全隐藏。为了防止这种情况；您希望“随机”访问每个缓存行一次，以最大化“工作集适合缓存/秒”和“工作集不适合缓存/秒”之间测量的性能差异。

最后，还有其他可能影响测量的因素。例如，对于使用分页的操作系统（例如 Linux 和几乎所有其他现代操作系统），在所有这些之上都有一整层缓存（TLB/翻译后备缓冲区），一旦工作集超过一定大小，TLB 就会丢失; 这应该在图中作为第四个“步骤”可见。还有来自内核的干扰（IRQ、页面错误、任务切换、多个 CPU 等）；这可能在图中显示为随机静态/错误（除非经常重复测试并丢弃异常值）。还有一些缓存设计（缓存关联性）的伪影，它们会以依赖于内核分配的物理地址的方式降低缓存的有效性；这可能被视为“步骤”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T00:57:52.943

> 我的方法有问题吗？

可能，但没有看到无法回答的实际代码。

*   您对代码正在执行的操作的描述并没有说明您是读取数组一次还是多次。

*   阵列可能不够大……取决于您的硬件。（一些现代芯片不是有几兆字节的第三级缓存吗？）

*   特别是在 Java 案例中，您必须以正确的方式做很多事情来实现有意义的微基准测试。

* * *

在 C 情况下：

*   您可以尝试调整 C 编译器的优化开关。

*   由于您的代码正在串行访问数组，因此编译器可能能够对指令进行排序，以便 CPU 可以跟上，或者 CPU 可能会乐观地预取或进行广泛的取指。您可以尝试以不太可预测的顺序读取数组元素。

*   甚至有可能编译器已经完全优化了循环，因为循环计算的结果没有用于任何事情。

（根据这个 Q&A - [How much time it take to fetch one word from memory?](https://stackoverflow.com/questions/3142779/how-much-time-does-it-take-to-fetch-one-word-from-memory)，从 L2 高速缓存中提取约 7 纳秒，从主存储器中提取约 100 纳秒。但你得到约 2 纳秒。一些聪明的东西必须在此处进行以使其运行速度与您观察到的一样快。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T06:36:26.013

使用 gcc-4.7 和编译，`gcc -std=c99 -O2 -S -D_GNU_SOURCE -fverbose-asm tcache.c`您可以看到编译器已优化到足以删除 for 循环（因为`sum`未使用）。

[我必须改进你的源代码；`#include`缺少一些-s，并且`i`未在第二个函数中声明，因此您的示例甚至无法按原样编译。]

创建一个全局变量，或以某种方式将`sum`其传递给调用者（可能使用全局变量`int globalsum;`并放在`globalsum=sum;`循环之后）。

而且我不确定您是否正确使用`memset`. 我可以想象一个足够聪明的编译器理解你正在对所有零求和。

最后，您的代码具有非常规则的行为和良好的局部性：偶尔会发生缓存未命中，加载整个缓存行并且数据足以进行多次迭代。一些巧妙的优化（例如`-O3`或更好）可能会产生好的`prefetch`指令。这对于高速缓存来说是最优的，因为对于 32 字 L1 高速缓存行，高速缓存未命中每 32 个循环发生一次，因此可以很好地摊销。

制作数据链表会使缓存行为变得更糟。相反，在一些实际程序中，在几个精心选择的地方仔细添加[__builtin_prefetch](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)可能会提高 10% 以上的性能（但添加太多会*降低*性能）。

在现实生活中，处理器大部分时间都在等待某个缓存（很难衡量；这种等待是 CPU 时间，而不是空闲时间）。请记住，在 L3 缓存未命中期间，从 RAM 模块加载数据所需的时间就是执行*数百*条机器指令所需的时间！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T06:30:45.917

从图 3.26 可以看出，英特尔酷睿 2 在读取时几乎没有任何跳跃（图顶部的红线）。它是在跳跃清晰可见的地方书写/复制。最好做一个写测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T00:13:10.357

我不能肯定地说 1 和 2，但是在 Java 中成功运行这样的测试会更具挑战性。特别是，我可能担心像自动垃圾收集这样的托管语言功能可能会在您的测试过程中发生并影响您的结果。

# html - 对于这种输出，什么是好的 css 方法？

> ID：12548658
> 
> 赞同：0
> 
> 时间：2012-09-23T00:01:31.777
> 
> 标签：html

我当前的输出：

![在此处输入图像描述](../Images/afb5bdb518fc4aa9eef23f22383b4e49.png)

我想做这种输出：

![在此处输入图像描述](../Images/daf0842d4468ba3d9c73d5d131591cb7.png)

我该怎么做？我对此真的没有任何想法。

到目前为止，这是我的 Html 代码：

```
<div id="Profile">
    <p class="cover">
        <img src="resources/default-cover.png" alt="">
    </p>
    <p class="profile-pic">
        <a href="#"><img src="resources/default-male.png" alt="Male"></a>
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:07:14.130

首先，您的第二堂课在错误的地方；它应该在开头段落标签中，而不是结尾。

其次，尝试以下方法（假设您的班级布置正确）：

```
.profile-pic {
    margin-top: -50px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:06:34.160

**HTML**

```
<div id="Profile">
<p class="cover">
    <img src="resources/default-cover.png" alt="">
</p>
<p class="profile-pic">
    <a href="#"><img src="resources/default-male.png" alt="Male"></a>
</p>
</div> 
```

**CSS**

```
.profile-pic{
margin-top: -20px;
border-bottom: 40px solid white;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T00:39:40.567

您的 html 对于放置在结束 p 标记中的类无效。有很多方法可以做到这一点。这是清理您的html的一个。我通常尽量避免使用 p 标签，除非里面有大块的文本。

```
 <div id="Profile"> 

 <img src="resources/default-cover.png" alt="" class="cover"> 

 <a href="#"><img src="resources/default-male.png" alt="Male" class="profile-pic"></a>

 </div> 
```

这是实现效果的css。将 .profile-pic 的大小放在 css 中。

```
 <style type="text/css">
 .cover {display:block;}
 .profile-pic {position:relative; margin-top: -25px;height: 50px; width: 50px;}
 </style> 
```

# python - 在 django 管理面板中选择图像时，Filebrowser 不会将斜杠附加到文件路径

> ID：12548659
> 
> 赞同：1
> 
> 时间：2012-09-23T00:01:34.453
> 
> 标签：python, django, django-models, django-admin, django-filebrowser

使用 python 2.7、django 1.4.1、filebrowser 3.5.0、grappelli 2.4.2、win7 x64

所以这是我的问题：

我正在创建一个对象，并尝试将图像附加到它：

点击搜索： ![文件浏览器附加文件](../Images/f4c4a9ba500914a8bf52d038fdc1c472.png)

浏览文件夹以获取我的文件，然后选择它： ![在此处输入图像描述](../Images/9c1385db4225eb9dcd4df802b87f7d58.png)

在我选择它之后，这是它返回的路径：

![在此处输入图像描述](../Images/51e87b81a4b53e406c6061729c0549c3.png)

附加模型本身：

```
class EntryManager(models.Manager):
    def active(self):
        return super(EntryManager, self).get_query_set().filter(is_active=True)

class Services(models.Model):
    name = models.CharField(max_length = 20, help_text = 'Nazwa oferowanej usługi', verbose_name='Usługa')
    slug = models.SlugField(max_length=255, help_text = 'Odnośnik, generowany automatycznie na podstawie nazwy', unique=True,verbose_name='Odnośnik')
    icon = FileBrowseField(verbose_name='Ikona', max_length=255, directory="images/", extensions=[".jpg",'.png','.gif'], blank=True, null=True,help_text = '.jpg, .png, .gif')
    is_active = models.BooleanField(help_text='Zaznacz aby obiekt był widoczny dla użytkowników', default=False)

    objects = EntryManager()

    class Meta:
        ordering = ['name']
        verbose_name = "Usługę"
        verbose_name_plural = "Usługi"
    def __str__(self):
        return self.name
    def __unicode__(self):
        return self.name
    def get_absolute_url(self):
        return '/uslugi/%s/' % self.slug 
```

我现在不知道在哪里搜索问题，有什么帮助吗？

**编辑：**

网址.py

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

from filebrowser.sites import site

#when on dev, serve media files
from django.conf import settings

urlpatterns = patterns('',

    url(r'^grappelli/', include('grappelli.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^admin/filebrowser/', include(site.urls)),
    url(r'^uslugi/?$', 'services.views.services'),
)

#when on dev, serve media files
if settings.DEBUG:
    # static files (images, css, javascript, etc.)
    urlpatterns += patterns('',
        (r'^media/(?P<path>.*)$', 'django.views.static.serve', {
        'document_root': settings.MEDIA_ROOT})) 
```

和 settings.py 的一部分

```
import os
PROJECT_DIR = os.path.abspath(os.path.dirname(__file__) + "../../")
MEDIA_ROOT = os.path.join(PROJECT_DIR, 'site_media/media')
STATIC_ROOT = os.path.join(PROJECT_DIR, 'site_media/static')
ADMIN_MEDIA_PREFIX = os.path.join(PROJECT_DIR, 'site_media/admin_media')

INSTALLED_APPS = (
    'grappelli',
    'filebrowser',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'services'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:05:24.063

阅读您的之后`urls.py`，我需要向您展示[文档](http://django-filebrowser.readthedocs.org/en/latest/quickstart.html#installation)：

> 在您的 url.py 中导入默认的 FileBrowser 站点：

```
from filebrowser.sites import site 
```

> 并添加以下 URL 模式**（在任何 admin-url 之前）：**

```
urlpatterns = patterns('',
   url(r'^admin/filebrowser/', include(site.urls)),
) 
```

所以你和我的新项目之间的唯一区别是：

1.  我在 VirtualBox undex Windows 7 上使用 Linux Ubuntu x86
2.  我`/admin/file-browser`之前有任何管理员网址：

> ```
> from django.conf.urls import patterns, include, url
> from django.contrib import admin
> from filebrowser.sites import site
> from django.conf.urls.static import static
> from django.conf import settings
> 
> admin.autodiscover()
> 
> urlpatterns = static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) + patterns('',
>     url(r'^grappelli/', include('grappelli.urls')),
>     url(r'^admin/filebrowser/', include(site.urls)),    
>     url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
>     url(r'^admin/', include(admin.site.urls)),
>     url(r'^i18n/', include('django.conf.urls.i18n')),
>     url(r'^',  include('django.contrib.flatpages.urls')),
> ) 
> ```

# opencv - 提取手势识别的最佳特征？

> ID：12548660
> 
> 赞同：0
> 
> 时间：2012-09-23T00:01:38.470
> 
> 标签：opencv, classification, feature-detection

我正在用 OpenCV 做一个关于手部姿势识别的项目。

我已经完成了分割，`normalizedRGB`并使用`cvFindContours`. 现在我需要找到要提取的特征。

提取的最佳特征是什么？这种情况下最好的分类方法是什么？

谢谢您的帮助 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:44:11.463

1.  如果您的手是静止的...您可以将多边形拟合到您的轮廓并尝试根据您的手势来表征多边形...例如多边形的边数...边之间的角度...A的面积,B,C,D...如下图... ![在此处输入图像描述](../Images/a42900075db0e45a62fb7189f4cc3894.png)

2.  如果您的手在移动，那么您可以使用 cvCalcOpticalFlow 来跟踪手，并根据两个连续帧之间的位移来确定运动方向并做出一些决定......

# c++ - 使用 WIC 高效编码多个图像

> ID：12548664
> 
> 赞同：0
> 
> 时间：2012-09-23T00:02:30.760
> 
> 标签：c++, image, encoding, wic

我正在使用 Windows 图像处理组件库对大量图像进行编码。理想情况下，我想使用某些属性设置一次编码器，然后为我的所有图像重新使用该编码器。但是，在我看到的所有示例中，似乎为单个图像创建了一个编码器。

我正在读取和写入字节流，而不是文件，并且可能有多个线程同时运行。

这是一段代码：

```
CComPtr<IWICBitmapEncoder> pEncoder;
CComPtr<IWICBitmapFrameEncode> pBitmapFrame;
CComPtr<IPropertyBag2> pPropertyBag;
CComPtr<IWICStream> pStream;
CComPtr<IStream> pOutputStream;

HRESULT hr;
//  Setup memory stream, which is needed to stage raw image bits
if (CreateStreamOnHGlobal(NULL, TRUE, &pOutputStream) != S_OK)
{
    LogAssert(false, "Could not create pOutputStream. Err (%d)", GetLastError());
}
//Setup WIC stream which encapsulates the output stream
hr = m_pFactory->CreateStream(&pStream);

hr = pStream->InitializeFromIStream(pOutputStream);
hr = m_pFactory->CreateEncoder(GUID_ContainerFormatWmp, NULL, &pEncoder);
hr = pEncoder->Initialize(pStream, WICBitmapEncoderNoCache);
hr = pEncoder->CreateNewFrame(&pBitmapFrame, &pPropertyBag);
SetEncodingProperties(pPropertyBag);
hr = pBitmapFrame->Initialize(pPropertyBag); 
```

问题 1：我正在写入使用 CreateStreamOnHGlobal 创建的 IStream。我可以重复使用`pStream`多个`pOutputStream`图像吗？任何线程安全问题？

问题2：这段代码的哪些部分可以做一次，哪些部分需要针对不同的图像重复？所有的初始化似乎都相互关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:47:13.287

所有内置 WIC 对象都在 Windows 7 中更新为线程安全的，如下所述：http: [//msdn.microsoft.com/en-us/library/ee720061%28v=vs.85%29.aspx#_multi_threaded_apartment_support](http://msdn.microsoft.com/en-us/library/ee720061%28v=vs.85%29.aspx#_multi_threaded_apartment_support)

在以前的 Windows 版本中，对象不是线程安全的，Windows 会自动将调用编组到另一个线程中，以便可以从多个线程访问它。这仅在您正确初始化 COM 时才有效 - 如果您要从多个线程访问对象，您需要使用多线程选项从所有可以访问您的对象的线程中调用 CoInitializeEx，并且您需要确保 CoInitializeEx 返回成功（ S_OK 或 S_FALSE）。

一次为单个 IStream 对象使用两个不同的编码器是不安全的。在编码器对象上调用 Commit 后，在其他地方使用流是安全的，但与另一个编码器一起使用它并没有真正意义。您不能在一个文件中包含多个图像（除非图像格式支持多个帧，但您只需要一个编码器对象）。我想您可以在将流大小与另一个编码器一起使用之前将其设置为 0，但分配 HGLOBAL 流可能并不比这样做快。

在您的情况下创建 IWICStream 没有意义，因为您已经有一个 IStream，而这正是编码器所需要的。IWICStream 主要作为一种便利函数而存在，用于从文件、固定大小的内存缓冲区或现有流的一部分创建流。InitializeFromIStream 方法存在的原因是 IWICStream 不支持 Clone 方法。InitializeFromIStream 是一种变通方法，当不支持 Clone 时，它​​可以使用独立游标获取新的 IStream 对象，但这样做的方式不是（也不能是）线程安全的。（为了让它工作，底层流一次只能被一个线程访问。通常，编码器或解码器对象会确保这一点，只要流一次只分配给一个编码器/解码器。 )

由于您关心性能，因此您应该知道像 WIC 编码器可能做的那样，分段写入 HGLOBAL 流是 O(n**2)，因为扩大 HGLOBAL 涉及将所有现有数据复制到新位置.

如果您要在 Windows 7 之前从多个线程访问 WIC，我建议使用单线程单元并确保您在一个线程中初始化的对象只能从该线程访问。这将为您节省将调用编组到另一个线程的成本。

只要编码器类相同并且您不尝试使用多个单线程单元（或单线程和多线程单元）。

但是，我认为您太关心对性能影响可以忽略不计的事情，而您应该更关心写入图像数据的过程。如果您的图像文件很大（尽管，如果您正在处理非常大的图像，您可能应该考虑使用 imagemagick 代替）。为每个线程提供完全独立的对象（因为单个对象很可能一次只能在单个线程中工作）也可能有所帮助。

# c# - 在导出网格视图时从 asp.net 运行宏

> ID：12548665
> 
> 赞同：0
> 
> 时间：2012-09-23T00:02:37.883
> 
> 标签：c#, asp.net

我有一个gridview，我需要将gridview 导出到MS word，这工作正常，但我需要在Ms word 的每一页上放置自定义页眉和页脚。是否可以在导出的 gridview 上从 asp.net 运行宏，以便我可以将自定义页眉和页脚放在导出的 gridview 上，并调整打印页面上的一些边距。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:36:27.993

[本教程](http://support.microsoft.com/kb/306683)将向您展示如何使用 .NET 调用宏。这是与您的方案相关的步骤的摘要（如果您已经设法导出 GridView，您可能已经有一些此设置）：

添加对 Microsoft Word 库的引用：

1.  在项目菜单上，单击添加引用。
2.  在 COM 选项卡上，找到`Microsoft Word 10.0 Object Library`或`Microsoft Word 11.0 Object Library`
3.  点击`Select`

然后将这些引用添加到您的代码后面：

```
using System.Reflection;
using Word = Microsoft.Office.Interop.Word;
using Microsoft.Office.Core; 
```

添加这个辅助方法（处理运行宏）：

```
private void RunMacro(object oApp, object[] oRunArgs)
{
    oApp.GetType().InvokeMember("Run",
    System.Reflection.BindingFlags.Default |
    System.Reflection.BindingFlags.InvokeMethod,
    null, oApp, oRunArgs);
} 
```

然后调用您的宏使用以下（您需要修改它以满足您的特定需求）：

```
private void CallCustomHeaderFooterMacro(string filename, string pageTitle, string author)
{
    Word.ApplicationClass oWord = new Word.ApplicationClass();
    oWord.Visible = false;
    Word.Documents oDocs = oWord.Documents;
    object oFile = filename;

    // Used for optional arguments
    object oMissing = System.Reflection.Missing.Value;

    // CHOOSE THE APPROPRIATE CALL, DEPENDING ON THE LIBRARY YOU REFERENCE
    // Microsoft Word 10.0 Object Library
    Word._Document oDoc = oDocs.Open(ref oFile, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);

    // Microsoft Word 11.0 Object Library
    // Word._Document oDoc = oDocs.Open(ref oFile, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);

    // Run the 'CustomHeaderFooter' Macro.
    /* Change "CustomHeaderFooter" to your macro name.
     * You can send parameters to your macro such as: 
     * a Page title, author, date or other data you need to create the customised 
     * header and footer. You add and remove these as required. I have used pageTitle
     * and author as an example
    */
    RunMacro(oWord, new Object[]{"CustomHeaderFooter", pageTitle, author});

    // Save (as required)

    // Quit Word and clean up.
    oDoc.Close(ref oMissing, ref oMissing, ref oMissing);
    System.Runtime.InteropServices.Marshal.ReleaseComObject (oDoc);
    oDoc = null;
    System.Runtime.InteropServices.Marshal.ReleaseComObject (oDocs);
    oDocs = null;
    oWord.Quit(ref oMissing, ref oMissing, ref oMissing);
    System.Runtime.InteropServices.Marshal.ReleaseComObject (oWord);
    oWord = null;
} 
```

如果您在文档中设置了诸如此类的宏，这将起作用。

```
Public Sub CustomHeaderFooter(sPageTitle As String, sAuthor As String)
    ' Your code to create the header and footer as required.
    ' The easiest way to get the macro code is to open the base document and
    ' and record the actions that you need such as adjusting the print margins
    ' and adding the custom headers and footers, then modify the resultant code
    ' to accept your parameters.
End Sub 
```

在您的 ASP.NET 中，您将调用（调整您的文件路径和适当的参数）：

```
CallCustomHeaderFooterMacro(Server.MapPath("~/mydocument.docx"), "Sample Title", "John Smith"); 
```

我希望这很清楚。显然我无法提供宏代码来生成实际的页眉和页脚，但如上所述，最简单的方法是记录动作并手动调整生成的代码。

* * *

*编辑：*就像旁注一样。Microsoft 不建议从服务器端应用程序使用 Office 自动化，即从 ASP.NET 调用。[本文](http://support.microsoft.com/kb/257757/en-us)在此处进行了解释，并提供了用于处理 Office 文档的替代机制，这可能对您有用，也可能对您没有用。但我认为这可能会有所帮助，具体取决于您的项目所需的可扩展性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T18:18:37.243

我不认为你可以从 asp.net 做到这一点。但是您是否可以创建一个在 Word 打开且文件名与 asp.net 导出创建的相同文件名时运行的 VBA？

# python - 应用引擎编码

> ID：12548667
> 
> 赞同：1
> 
> 时间：2012-09-23T00:02:56.877
> 
> 标签：python, google-app-engine, encoding

我的 App Engine/Python 应用程序有一些编码问题。例如“ô”字符转换为“=F4”。这很奇怪。甚至一些没有重音的字符也会被转换。问题没有出现在本地，而是出现在在线应用程序中。

编辑

问题解决了。问题是由于 App Engine 上的一个错误造成的，当您在表单中包含图片上传时，该错误会将数据提供为可引用打印。此评论解释了如何解决该问题并包含 appengine_config.py，它使一切正常[http://code.google.com/p/googleappengine/issues/detail?id=2749#c54](http://code.google.com/p/googleappengine/issues/detail?id=2749#c54)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:09:57.603

问题是由于编码。我的猜测是你有一个表单，浏览器将接受编码数据，例如像“ô”这样的字符。但是，在服务端，当您从请求对象中读取此数据时，此数据将被视为纯 ascii 字符串。

您需要明确告知请求数据的格式以成功存储（或显示）它。

# php - 根据主键将html表单连接到php页面

> ID：12548671
> 
> 赞同：0
> 
> 时间：2012-09-23T00:05:04.390
> 
> 标签：php, mysql, html, database, primary-key

好的，所以基本上我想要做的是向我的网站添加一个问答组件（第一个网站，所以我目前的 php 知识很少）。我有记录用户输入并添加到数据库的 html 页面，但是我无法从数据库中提取特定信息。

我当前的 php 页面正在数据库中提取信息 where `the questiondetail`= `the question detail`( `detail='$detail'`)，但是如果两个用户输入与他们的问题详细信息相同的信息，这可能会出现问题（不太可能，但仍然可能，特别是如果同一个人不小心提交了两次问题） ）。我想要做的是根据数据库的 question_id（主键）加载页面，这是唯一始终唯一的东西。

HTML 代码：

```
<form id="question_outline" action="process.php" method="get">
<p><textarea name="title" id="title_layout" type="text"  placeholder="Question Title" ></textarea> </p>
<textarea name="detail"  id= "detail_layout" type="text" placeholder="Question Details"  ></textarea>
<div id="break"> </div>
<input id="submit_form" name="submit_question" value="Submit Question" type="submit" /> 
</form> 
```

过程.PHP代码：

```
$name2 = $_GET['name2'];
$title = $_GET['title'];
$detail = $_GET['detail'];

$query= "INSERT INTO questions (title, detail) VALUES ('$title', '$detail')";

$result = mysql_query("SELECT * FROM questions where detail='$detail' ") 
or die(mysql_error()); 
```

信息已正确存储在数据库中，并且在 detail=$detail 时成功提取，但我要做的是根据 question_id 将其提取出来，因为这是唯一始终唯一的值. 任何回应将不胜感激！

***更新后的版本***

QUESTION_EXAMPLE.PHP 代码

```
<?php
$server_name = "my_servername";
$db_user_name ="my_username";
$db_password = "my_password";
$database = "my_database";
$submit = $_GET['submit'];
$title = $_GET['title'];
$detail = $_GET['detail'];
$conn = mysql_connect($server_name, $db_user_name, $db_password);

mysql_select_db($database) or die( "Unable to select database");

$result = mysql_query("SELECT title, detail FROM questions WHERE id =" .
mysql_real_escape_string($_GET["id"]), $conn);

$row = mysql_fetch_assoc($result);

mysql_close($conn);

?>

<h1><?php echo htmlspecialchars($row["title"]);?></h1>
<p><?php echo htmlspecialchars($row["detail"]);?></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:24:53.017

首先，如果这是要在生产中使用的代码，请确保在将 SQL 参数插入语句之前转义它们。没有人喜欢 SQL 注入攻击。我建议改用 PDO，因为它支持准备好的语句和参数绑定，这要安全得多。

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

所以你有一个表格...

```
[title]

[details]

[submit] 
```

然后将其插入到您的数据库中...

```
INSERT INTO questions (title, details) VALUES (?, ?) 
```

[您可以使用http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)获取最后一个插入 ID `mysql_insert_id`。

```
$id = mysql_insert_id(); 
```

然后就可以拿到记录了...

```
SELECT title, details FROM questions WHERE id = ? 
```

并在预览页面中输出。

我已经使用 PDO 而不是基本的 mysql 函数编写了一个示例。

`form.php`：

```
<form action="process.php" method="post">
    <label for="question_title">Title</label>
    <input id="question_title" name="title"/>
    <label for="question_detail">Detail</label>
    <input id="question_detail" name="detail"/>
    <button type="submit">Submit</button>
</form> 
```

`process.php`：

```
<?php

// Create a database connection
$pdo = new PDO("mysql:dbname=test");
// Prepare the insert statement and bind parameters
$stmt = $pdo->prepare("INSERT INTO questions (title, detail) VALUES (?, ?)");
$stmt->bindValue(1, $_POST["title"], PDO::PARAM_STR);
$stmt->bindValue(2, $_POST["detail"], PDO::PARAM_STR);
// Execute the insert statement
$stmt->execute();
// Retrieve the id
$id = $stmt->lastInsertId();

// Prepare a select statement and bind the id parameter
$stmt = $pdo->prepare("SELECT title, detail FROM questions WHERE id = ?");
$stmt->bindValue(1, $id, PDO::PARAM_INT);
// Execute the select statement
$stmt->execute();
// Retrieve the record as an associative array
$row = $stmt->fetch(PDO::FETCH_ASSOC);

?>

<h1><?php echo htmlspecialchars($row["title"]);?></h1>
<p><?php echo htmlspecialchars($row["detail"]);?></p> 
```

没有 PDO...

`form.php`：

```
<form action="process.php" method="post">
    <label for="question_title">Title</label>
    <input id="question_title" name="title"/>
    <label for="question_detail">Detail</label>
    <input id="question_detail" name="detail"/>
    <button type="submit">Submit</button>
</form> 
```

`process.php`：

```
<?php

// Create a database connection
$conn = mysql_connect();
// Execute the insert statement safely
mysql_query("INSERT INTO questions (title, detail) VALUES ('" . 
    mysql_real_escape_string($_POST["title"]) . "','" .
    mysql_real_escape_string($_POST["detail"]) . "')", $conn);
// Retrieve the id
$id = mysql_insert_id($conn);
// Close the connection
mysql_close($conn);

header("Location: question_preview.php?id=$id"); 
```

`question_preview.php`：

```
<?php

// Create a database connection
$conn = mysql_connect();
// Execute a select statement safely
$result = mysql_query("SELECT title, detail FROM questions WHERE id = " .
    mysql_real_escape_string($_GET["id"]), $conn);
// Retrieve the record as an associative array
$row = mysql_fetch_assoc($result);
// Close the connection
mysql_close($conn);

?>

<h1><?php echo htmlspecialchars($row["title"]);?></h1>
<p><?php echo htmlspecialchars($row["detail"]);?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:09:54.003

我假设您想根据 question_id 对问题进行排序。您可以尝试使用 ORDER BY 命令

例子 -

```
$result = mysql_query("SELECT * FROM questions where detail='$detail' ORDER BY question_id") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T00:21:30.393

对于这些类型的示例，您需要在下面的数据库中运行事务是

[http://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

要不然

创建一个存储在会话中的随机变量并插入到数据库中，然后从数据库中调用它，您可以轻松预览它。

```
id | question_code | q_title 
```

`question_code`是插入数据库之前生成的随机值，

并将其保存`question_code`在会话中并再次调用它进行预览。

# jquery - Jquery +将事件绑定到具有负z-index的元素

> ID：12548676
> 
> 赞同：0
> 
> 时间：2012-09-23T00:06:11.040
> 
> 标签：jquery, html, css

我有一个固定的 DIV（页脚横幅），里面有几个 DIV。

![在此处输入图像描述](../Images/7314e8267c44068fbbe0303c8d58eb33.png)

在右侧有一个 HIDE DIV（页脚横幅的一部分），单击它会隐藏 DIV 的其他部分并将整体 z-index（页脚横幅）设置为 -1，因此此横幅下方的网站是可点击/可访问。

单击隐藏后，它看起来像这样 - 只是隐藏 DIV 保留在右侧（稍后一旦最小化，这将重命名为“显示”，如下所示：

![在此处输入图像描述](../Images/4740b63af165a26dbdf2161ddebbf8ac.png)

我这样做是为了保持这个 DIV 的宽度 - 如果用户放大/缩小页面并取决于用户的屏幕大小，它将重新调整大小。

我遇到的问题是我希望能够单击此剩余的隐藏 DIV，捕获单击事件并重新显示此固定页脚 DIV 的所有方面，但是由于父级上的 z-index -1 我不能捕获点击事件。

我尝试了 mousein/mouseout，但这不起作用。

我尝试在剩余的隐藏 DIV 上增加 z-index，但这似乎并没有覆盖其父 DIV 具有负 z-index 的事实。

有没有办法可以捕获此 DIV 上的点击事件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:32:47.073

不要将父级的 z-index 设置为 -1，而是选择那些确切的 div 以使用 jQuery 隐藏并在单击按钮时调用 hide/show:`$('.divs').hide()`并重新出现: `$('.divs').show()`。

# android - ContentAdapter Sqlite 数据库 多个数据库

> ID：12548679
> 
> 赞同：-1
> 
> 时间：2012-09-23T00:06:44.067
> 
> 标签：android, sqlite, android-contentprovider

这实际上是两个问题：

1.  如果我在我的应用程序中公开我的 SQLite，`ContentProvider`它会以异步方式工作吗？

2.  想象一下，我的数据库中有以下表：

`TableChats TableChatMessages`

我也有一堂课 `Message`

要使用`ListViews`并让这些列表视图使用`ContentProvider`返回的数据必须是 Cursor 的数据吗？或者是否可以查询聊天中的所有消息并返回一个`Message`. 抱歉，我知道这可能是一个愚蠢的问题，但我是 android 开发的新手，我还不太清楚它们的概念以及如何连接它们`ContentProvider`。`ListViews`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:42:10.740

据我所知

1.  A`content provider`管理对多个应用程序之间共享的中央数据存储库的访问。通常所有访问数据的方法都在`UI thread`. 如果你想要异步，他们建议使用[`CursorLoader`](http://developer.android.com/guide/topics/providers/content-provider-basics.html#SimpleQuery).
2.  您可以查询所有消息，从对象中获取数据`Cursor`并将其放入`Message`对象。

样本：

```
 Cursor sampleCursor = getContentResolver().query("Your query");
    ArrayList<Message> list;
        if(sampleCursor!=null){
    while(sampleCursor.moveNext()){
        Message item = new Message();

        item.sender = sampleCursor.getString(senderColumnIndex);
        item.messageBody= sampleCursor.getString(messageBodyColumnIndex);
    list.add(item);
    }}
//Pass your list to your adapter. 
```

或者直接使用`CursorAdapter`

# xpath - 使用 xpath 查找重复的兄弟姐妹

> ID：12548680
> 
> 赞同：2
> 
> 时间：2012-09-23T00:06:54.550
> 
> 标签：xpath, duplicates, xpath-2.0, siblings

如何使用 Xpath 仅查找具有至少相似/相等同级节点的节点？

例如：

```
<root>
  <parent>
    <node>...</node>
    <node_unique>...</node_unique>
    <node>...</node>
    <another_one>...</another_one>
    <another_one>...</another_one>
  </parent>
</root> 
```

在示例中，xpath 仅支持选择`<node>`，`<another_one>`因为它们出现了不止一次。

我试图为此找到一个解决方案几个小时而没有成功（现在我认为 XPath 是不可能的......）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T04:14:24.073

**这些是不可能用单个 XPath 1.0 表达式选择的**（由于 XPath 1.0 中缺少范围变量）。

一种可能的解决方案是选择所有`/*/*/*`元素，然后获取每个元素的名称，使用`name()`关闭该元素，然后评估`/*/*/*[name() = $currentName][2]`（其中`$currentName`应该用刚刚获得的名称替换。如果最后一个表达式选择一个元素，那么`currentName`是一个名称这至少发生两次 - 因此您保留该元素。对所有元素及其名称执行此操作。作为辅助步骤，可以通过将名称（和选定的元素）放在哈希表中来删除它们。

**在 Xpath 2.0 中，使用单个 XPath 表达式选择给定父级的所有子级是微不足道的，这些子级至少有一个具有相同名称的其他兄弟**：

```
/*/*/*
   [name() = following-sibling::*/name()
  and
    not(name() = preceding-sibling::*/name())
   ] 
```

**一个更紧凑的表达式**：

```
/*/*/*[index-of(/*/*/*/name(), name())[2]] 
```

**基于 XSLT 2.0 的验证**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "/*/*/*[index-of(/*/*/*/name(), name())[2]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
  <parent>
    <node>...</node>
    <node_unique>...</node_unique>
    <node>...</node>
    <another_one>...</another_one>
    <another_one>...</another_one>
  </parent>
</root> 
```

**上面的 XPath 表达式被评估，并且从这个评估元素中选择的元素被复制到输出**：

```
<node>...</node>
<another_one>...</another_one> 
```

**注意**：有关相关问题/答案，请参阅**[此](https://stackoverflow.com/a/287360/36305)**。

# c++ - c ++将指针传递给函数，用于将int数组传入和传入函数

> ID：12548683
> 
> 赞同：1
> 
> 时间：2012-09-23T00:07:14.933
> 
> 标签：c++, arrays, pointers

我正在尝试传递一个 int 数组。下面是我想做的一个例子。基本上，我可以编写一个函数，通过返回一个指针来返回一个 int 数组。现在我想采用该函数并将其用作另一个函数的参数。目标是让一个函数创建一个 int 数组，然后将其放入另一个以 int 数组作为输入的函数。它不起作用。在接受 int * 指针的函数内部，int * 指针刚刚变为 -8435432，并且在将其分配给另一个 int * 指针后无法读取其元素。我不明白。为什么我可以从函数中获取一个 int 数组，但它不能用作另一个函数的输入？

```
int * returnIntArray()
{
    int * thePointer;
    int j[3];
    thePointer = j;

    j[0] = 1;
    j[1] = 3;
    j[2] = -1;
    return thePointer;
}

//
int * takesTheIntArray(int * anIntArray)
{
    int x,y,z;
    int * returnIt;
    returnIt = anIntArray;
    x = returnIt[0];
    y = returnIt[1];
    z = returnIt[3];
    return returnIt;
}

int _tmain(int argc, _TCHAR* argv[])
{
    int y,z,p;
    int * x;
    x = returnIntArray();
    y = x[0];
    z = x[1];
    x = takesTheIntArray(returnIntArray());
    cout << x[0] << ",  " << x[1];
    //cout << theVector[1];
    cout << "hello";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T00:12:26.663

```
int * thePointer;
    int j[3];
    thePointer = j; 
```

应该：

```
int* thePointer = new int[3]; 
```

第一个版本的问题是您返回的东西是静态分配的（分配在堆栈上）。当函数返回时，它将超出范围。在第二个版本中，它是动态分配的（在堆上分配）。完成后记得调用`delete[]`指针（否则会泄漏内存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T21:28:21.967

您可以重写 returnIntArray() 如下：

```
int * returnIntArray()
{
    static int j[3];

    j[0] = 1;
    j[1] = 3;
    j[2] = -1;
    return j;
} 
```

您不需要“thePointer”变量，它只会隐藏您的 j 是在作用域末尾被销毁的局部变量这一事实。您可能已经尝试不使用“thePointer”变量并获得“警告 C4172：返回局部变量或临时地址的地址”，这意味着您返回的值在返回后将无效（与 thePointer 相同的问题）。j 声明之前的 static 使 j 成为全局的（但只能通过它在函数中的名称获得），因此 j 包含的值不会在作用域的末尾丢失。

我不明白“takesTheIntArray”的意义是什么，也许是在调试器中查看 x、y、z 值的调试目的？如果是这种情况，您不需要复制指针，只需执行以下操作：

```
//
int * takesTheIntArray(int * anIntArray)
{
    int x,y,z;
    x = anIntArray[0];
    y = anIntArray[1];
    z = anIntArray[2];
    return anIntArray;
} 
```

保留您的主要内容，这应该可以按您的意愿工作:) [edit] 在“takesTheIntArray”中有一个错字，我在重新发布时没有注意到：z var 的 anIntArray 索引应该是 2 而不是 3[/edit]

# c++ - C++ std::map vs 动态数组

> ID：12548684
> 
> 赞同：1
> 
> 时间：2012-09-23T00:07:21.293
> 
> 标签：c++, map, std, time-complexity

我正在尝试制作一个 3 维布尔数组，它告诉我是否以前访问过 3d 空间中的某个位置以进行简单的导航算法。该数组可能非常大（大约为 1,000,000 x 1,000,000 x 1,000,000 或更大），所以我想知道声明该大小的数组并将每个布尔值设置为 false 是否会更快，或者使带有坐标键 (x, y, z) 和 bool 类型值的映射。

据我所知，数组需要 O(1) 来查找或修改坐标，而地图需要 O(log n) 来查找或插入值。显然，对于访问值，数组更快。但是，这会抵消声明这样一个数组所需的时间吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T00:23:08.460

即使每个布尔值 1 位，您的数组也将占用 2**39 个字节。`set`如果没有太多元素，我会建议`true`.

您可以使用一个类来隐藏实现细节，并使用一维集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:26:52.613

您是否尝试过计算这样的数组需要多少内存？很多！如果点的顺序很重要，则使用 std::map，否则使用 std::unordeded_map。此外，无序映射为您提供了恒定的时间插入和查找。我想某种搜索树可能是您正在寻找的（例如 kd 树）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:13:29.407

假设您每点使用 8 位，您将创建一个 1 EB 的数组？哇，你有很多内存！

我认为你应该重新考虑你的方法。

# android - 在编译时从 Android Dex 文件中去除 AWT 引用

> ID：12548688
> 
> 赞同：0
> 
> 时间：2012-09-23T00:08:30.697
> 
> 标签：android, jvm, dalvik, dex, dx

我在我的`Android`应用程序中收到警告，说我的`bytecode makes illegal references to java.awt`，在某些情况下是`runtime seems to replace invalid opcodes`.

```
09-22 19:36:41.688: W/dalvikvm(831): VFY: unable to find class referenced in signature (Ljava/awt/Component;)
09-22 19:36:41.688: W/dalvikvm(831): VFY: unable to resolve virtual method 523:   Ljava/awt/Component;.isLightweight ()Z
09-22 19:36:41.688: D/dalvikvm(831): VFY: replacing opcode 0x6e at 0x0000 
```

我可以做些什么来告诉`DX`工具更早地清除或替换这些引用（比如在编译时），以便生成的 dex 文件不再有这些引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:34:44.677

你可以试试proguard。我不知道它是否可以去除类中未使用的方法，或者它是否只去除整个类。如果是前者，它可能会摆脱有问题的引用。如果是后者，可能不会。

但无论如何，这些只是警告，而且大多是无害的。唯一的“危害”是它会给你的 dex 文件增加一点膨胀，这需要一点额外的内存/磁盘空间。

# opengl-es - 我应该将 OpenGL 2.0 或 1.0 与 libgdx 一起使用吗？

> ID：12548691
> 
> 赞同：3
> 
> 时间：2012-09-23T00:09:10.173
> 
> 标签：opengl-es, opengl-es-2.0, libgdx

所以我已经使用 libgdx 几个星期了，只是为了检查我能做什么，现在我记得读过有关使用 OpenGL 1.0 和 2.0 的文章。我想知道当与 libgdx 一起使用时 2 之间到底有什么区别，我可以只在我的项目中使用 OpenGL 2.0 而不担心任何事情，或者它有什么缺点吗？到目前为止，我只使用了 1.0，我还了解到使用 OpenGL 2.0 时的兼容性问题，这是真的吗？我对我未来项目的兼容性很感兴趣，所以只使用 OpenGL 2.0 可以吗？

编辑：对不起，我在谈论 OpenGL ES 1.0 和 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:36:34.113

是的，OpenGL ES 2.0 有一些缺点：并非每部手机都已经支持它。我有一个简单的规则来决定使用 2.0 还是 1.0：如果你只想创建 2D 游戏，请使用 1.0。相反，如果3D游戏对你有利，你必须使用2.0。

此外，您必须从一开始就做出决定，否则您将遭受他们的不一致。

# html - 为什么人们不直接写“at”符号？

> ID：12548693
> 
> 赞同：0
> 
> 时间：2012-09-23T00:09:34.753
> 
> 标签：html, email, character

我经常看到人们在 Internet 上不会为他们的电子邮件帐户或类似帐户写*at符号 (@)。*

他们做这样的事情：“my_username(AT)domain(DOT)com”，而不是“my_username@domain.com”

你知道为什么吗？我调查了很多，我找不到任何答案。感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:12:12.270

这只是一种防止垃圾邮件的方法（对于扫描带有@符号的电子邮件的机器人）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:12:27.510

很简单：他们试图保护他们的电子邮件不被机器人自动收集，以保护自己免受垃圾邮件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T00:13:16.700

互联网上有很多简单的*机器人*从各个网站收集电子邮件。当它们处于最简单的形式（例如 bob@website.com）时，它们很容易被拾取。通过更改其中的某些部分，例如将 @ 更改为 (AT)，可以帮助防止此类机器人意识到它是一个电子邮件地址。

但是 - 大多数机器人更聪明，您需要采取进一步措施来保护您在网站上的电子邮件地址，例如用 JavaScript 隐藏它。

可以在这里找到很多关于通过 JavaScript 隐藏电子邮件的示例：[https ://www.google.co.uk/search?q=javascript+email+cloak](https://www.google.co.uk/search?q=javascript+email+cloak)

希望这能回答你的问题 ：-）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T00:13:56.003

这是因为垃圾邮件机器人。通常，它们被编程为扫描网络以查找电子邮件地址，通常用@ 符号编写，它们包含在一些用于垃圾邮件轰炸的数据库中。这是减少垃圾邮件的第一次简单尝试.. :D

（在网络上安全发布电子邮件的最佳技术是使用 Javascript 制作的）

# java - 本地类和匿名类之间的 Java“闭包”比较

> ID：12548696
> 
> 赞同：2
> 
> 时间：2012-09-23T00:09:57.357
> 
> 标签：java, closures

我已经对使用匿名类和本地类实现闭包的区别进行了一些搜索。我试图找出两者之间的所有差异，因此我知道哪种方法在哪种情况下更好。

~~如果我错了，请纠正我：~~

 ~~*   每次创建新实例时，匿名类都会创建一个类实例和对象实例。
*   每次创建新实例时，本地类只创建一个对象实例。~~ 

~~因此，是否有时间或地点我应该使用匿名类而不是本地类？~~

*编辑：看起来两者之间没有真正的区别，只取决于样式以及是否要重用该类。*

为了澄清我的意思是我正在谈论的一个例子：

```
public class ClosureExample {
interface Function {
    void func(int value);
}

public static void main(final String[] args) {
    final Function local1 = localClassClosure("Local1");
    final Function local2 = localClassClosure("Local2");

    final Function anonymous1 = anonymousClassClosure("Annonymous1");
    final Function anonymous2 = anonymousClassClosure("Annonymous2");

    for (int i = 0; i < 3; i++) {
        local1.func(i);
        local2.func(i);
        anonymous1.func(i);
        anonymous2.func(i);
    }
}

private static Function localClassClosure(final String text) {
    // Local class name is irrelevant in this example
    class _ implements Function {
        @Override public void func(final int value) {
            System.out.println(text + ":" + value);
        }
    }
    return new _();
}

private static Function anonymousClassClosure(final String text) {
    return new Function() {
        @Override public void func(final int value) {
            System.out.println(text + ":" + value);
        }
    };
}
} 
```

希望有人可以详细解释这种细微的差异以及在哪种情况下应使用哪种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:34:38.193

这引起了我的兴趣，我打开 JD-GUI 来查看反编译的类。编译后的两个匿名内部类其实完全没有区别：

本地类：

```
class ClosureExample$1t implements ClosureExample.Function{
  ClosureExample$1t(String paramString){
  }

  public void func(int value){
    System.out.println(this.val$text + ":" + value);
  }
} 
```

匿名类：

```
class ClosureExample$1 implements ClosureExample.Function{
  ClosureExample$1(String paramString){
  }

  public void func(int value){
    System.out.println(this.val$text + ":" + value);
  }
} 
```

这两种方法都是实现匿名内部类的有效方法，而且它们似乎做同样的事情。

编辑：我将 _ 类重命名为 t

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:30:48.307

1.  本地类对象在初始化时更快（因为该类在启动时已经在内存中）
2.  匿名类对象的内存消耗更少（因为惰性求值）

注意：因为 java 不是真正的函数式语言。匿名类将被预先评估，甚至存储在类文件中。所以真的不会有太大的区别。

在函数式语言中，例如 scheme ：

```
(define inc (lambda (a) (lambda () (+ 1 a))))
(display ((inc 5))) 
```

函数 (lambda () (+ 1 a)) 实际上会在每次匿名调用时重新创建，例如 ((inc 5))。这是匿名类**背后的概念。**

相对于：

```
(define inc (lambda (a) (+ 1 a)))
(display (inc 5)) 
```

其中 (lambda (a) (+ 1 a)) 将在编译时存储在内存中，对 (inc 5) 的调用只会引用它。**这是本地**类背后的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T00:39:50.713

只是关于这一点的说明：

> 因此，是否有时间或地点我应该使用匿名类而不是本地类？

如果您需要在`KeyListener`组件内快速设置事件侦听器 [例如 ]，您可以这样做：

```
addKeyListener(new KeyListener(){

    public void keyPressed(KeyEvent ke){ ... }

    // further implementation here

}); 
```

虽然它根本不能重复使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T00:21:08.803

我很确定没有像 object instance 这样的东西，只是 class instance 。所以是的，为本地和匿名类型创建了一个对象。但是不同之处在于你不能重用匿名类（除非通过你在方法中使用它的方式——它有效但不是真正可维护的），所以你使用它当你正在做的事情都是一次性的。例如事件监听器。

我更喜欢命名类型而不是匿名类型。

[您可能会发现这很有用](http://www.cs.rit.edu/~tmh/courses/allJava/Anonymous.html)

**编辑：** 你会发现我的[问题](https://stackoverflow.com/questions/7778556/the-anonymous-class-conundrum)在这里很有用。

# iphone - CustomTabBarController 未响应委托回调

> ID：12548699
> 
> 赞同：2
> 
> 时间：2012-09-23T00:10:51.723
> 
> 标签：iphone, ios, delegates, callback, tabbarcontroller

我`UITabBarController`使用 Martin 的[教程](http://www.martinhoeller.net/2011/05/07/custom-tab-bars/)创建了一个自定义。我的子类`FSTabBarController`在视图控制器之间切换，并且据我所见表现正常。

问题是，当我将 tabBarContoller 更改为我的子类时，它不会响应我的委托；

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

如果我将它改回 -`UITabBarController`当我使用默认值`UITabBarController`时 - 代表会正常工作。

自定义子类使用以下函数来表示选项卡选择：

```
- (void)_buttonClicked:(id)sender
{
    self.selectedIndex = [sender tag];
    [self _updateTabImage];
} 
```

**编辑：**

AppDelegate.h

```
...
@interface AppDelegate : UIResponder <UIApplicationDelegate,UITabBarControllerDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) FSTabBarController *tabBarController; 
```

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
...
    self.tabBarController = [[FSTabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:peopleViewController,viewController,profileViewController, nil];
    self.tabBarController.delegate = self;
...
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
   // not called when FSTabBarController, called when UITabBarController !!
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:58:21.483

好的，从他的网站下载样本并进行测试。是的，您需要从子类手动调用委托：

这就是你应该如何改变 buttonClicked 函数：

```
- (void)_buttonClicked:(id)sender
{
    self.selectedIndex = [sender tag];
    if (self.delegate) {
        [self.delegate tabBarController:self didSelectViewController:self.selectedViewController];
    }
    [self _updateTabImage];
} 
```

# wxpython - wxpython 设置器

> ID：12548700
> 
> 赞同：0
> 
> 时间：2012-09-23T00:10:55.210
> 
> 标签：wxpython

Notebook 的 page1 中的 panel1 使用 Size(400,100) 定义..我不希望 Sizer 调整我的面板大小..

测试.py

```
import random
import wx

########################################################################
class TabPanel1(wx.Panel):
    #----------------------------------------------------------------------
    def __init__(self, parent):
        """"""
        wx.Panel.__init__(self, parent=parent)

        colors = ["red", "blue", "gray", "yellow", "green"]
        self.SetBackgroundColour(random.choice(colors))

    panel1 = wx.Panel(self,size=(400,100))
    panel1.SetBackgroundColour('brown')

    panel1gs = wx.GridSizer(2,2,1,2)

    panel1gs.AddMany( [ (wx.StaticText(panel1,label='FirstLabel'),0,wx.EXPAND),
            (wx.StaticText(panel1,label='SecondLabel'),0,wx.EXPAND),
            (wx.StaticText(panel1,label='ThirdLabel'),0,wx.EXPAND),
            (wx.StaticText(panel1,label='FourthLabel'),0,wx.EXPAND)
            ] )

    panel1.SetSizer(panel1gs)

    panel2 = wx.Panel(self,size=(400,100))
    panel2.SetBackgroundColour('#4f5042')

    panel3 = wx.Panel(self,size=(400,100))
    panel3.SetBackgroundColour('#4f5042')

        btn = wx.Button(self, label="Press Me")
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(btn, 0, wx.ALL, 5)
    sizer.Add(panel1, 0, wx.ALL, 5)
    sizer.Add(panel2, 0, wx.ALL, 5)
    sizer.Add(panel3, 0, wx.ALL, 5)

        self.SetSizer(sizer)

class TabPanel2(wx.Panel):
    #----------------------------------------------------------------------
    def __init__(self, parent):
        """"""
        wx.Panel.__init__(self, parent=parent)

        colors = ["red", "blue", "gray", "yellow", "green"]
        self.SetBackgroundColour(random.choice(colors))

        btn = wx.Button(self, label="Press Me")
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(btn, 0, wx.ALL, 10)

        self.SetSizer(sizer)

########################################################################
class DemoFrame(wx.Frame):
    """
    Frame that holds all other widgets
    """

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""        
        wx.Frame.__init__(self, None, wx.ID_ANY, 
                          "Notebook Tutorial",
                          size=(800,600)
                          )
        panel = wx.Panel(self)

        notebook = wx.Notebook(panel)
        tabOne = TabPanel1(notebook)
        notebook.AddPage(tabOne, "Tab 1")

        tabTwo = TabPanel2(notebook)
        notebook.AddPage(tabTwo, "Tab 2")

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(notebook, 1, wx.ALL|wx.EXPAND, 5)
        panel.SetSizer(sizer)
        self.Layout()

        self.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = wx.App(False)
    frame = DemoFrame()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:43:19.030

sizer 可以通过两种方式更改其中项目的大小。

首先是一个[`wx.EXPAND`标志](http://wxpython.org/docs/api/wx.SizerFlags-class.html#Expand)，它“将导致项目被扩展以填充由 sizer 提供的尽可能多的空间”。你正在使用这个标志，但你不想要这种行为，所以你应该删除它们。

其次，`wx.BoxSizer`s 可以使用[和](http://wxpython.org/docs/api/wx.Sizer-class.html#Add)[方法](http://wxpython.org/docs/api/wx.Sizer-class.html#Add)`proportion`中的参数调整对象的大小。[的文件](http://wxpython.org/docs/api/wx.BoxSizer-class.html)指出“[`Add()``AddMany()`](http://wxpython.org/docs/api/wx.Sizer-class.html#Add)[`wx.BoxSizer`](http://wxpython.org/docs/api/wx.BoxSizer-class.html)

> [sizer 中的对象] 可以在两个方向（高度和宽度）上增长 [...] 这是由添加到 sizer 时赋予项目的比例参数决定的。它被解释为权重因子，即它可以为零，**表示窗口可能根本不会调整大小**，或者高于零。

（重点补充）

在您的情况下，您已经将比例设置为 0 并且您甚至没有使用 a`wx.BoxSizer`所以这对您来说不是问题，但是将来要记住这一点。

# c# - 外部财产

> ID：12548701
> 
> 赞同：1
> 
> 时间：2012-09-23T00:11:18.133
> 
> 标签：c#, properties, interpreter

我正在创建一个从 IL（已编译的 C#\VB 代码）到 C 的解释器。我试图在解释它时创建[extern](http://msdn.microsoft.com/en-us/library/e59b22c5.aspx)属性，我将设置我自己的代码。

例如：

```
struct String {
    public extern override ValueType Clone( ); //Works but with some warnings.
    public char this[ int index ] {
        extern get;
        //'System.String.this[int].get' must declare a body because it is not marked abstract, extern, or partial
        //The modifier 'extern' is not valid for this item
        extern set; //Didn't work either.
    }
} 
```

我如何制作没有身体的吸气剂和二传手？（顺便说一句，我也不能将其标记为[抽象](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.71%29.aspx)而不会出错。）

我知道这个问题没有用。但对我来说非常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:41:17.823

我认为您想建议您的解释器使用替代实现（而不是 IL 使用您的自定义代码）。大多数 CLR 友好的方式是创建您的解释器将读取的属性并相应地使用您自己的一些代码，有点像反向 PInvoke。

```
struct MyString { 
[WhenRunningInInterpretator(implementationFunction="function42")]
public char this[ int index ] { 
    get {...}  set {....};    } 
} 
```

# .net - 从 Visual Studio 创建时 wcf 服务使用什么绑定？

> ID：12548716
> 
> 赞同：0
> 
> 时间：2012-09-23T00:14:31.967
> 
> 标签：.net, wcf, .net-4.0

当我决定设置它的安全性时，我很高兴在我的服务和客户端上工作，一切正常，我很惊讶 .config 文件上没有绑定信息。无协议，无编码...

我如何找出它正在使用的绑定？它绝对是 http，因为我能够在 IIS 上托管（我猜没有 WAS ..）

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:25:40.890

默认值为`BasicHttpBinding`和`NetTcpBinding`。请参阅此处：[开发人员对 Windows Communication Foundation 4 的介绍 (MSDN)](http://msdn.microsoft.com/en-us/library/ee354381.aspx)

# php - 使用 REGEXP 准备的 PHP PDO 语句

> ID：12548719
> 
> 赞同：1
> 
> 时间：2012-09-23T00:15:45.650
> 
> 标签：php, mysql, regex, pdo

> **可能重复：**
> [PHP 准备好的语句...将变量绑定为 REGEXP 中的数字范围？](https://stackoverflow.com/questions/12548926/php-prepared-statements-bind-variable-as-numeric-range-in-regexp)

```
$query = "SELECT * FROM `mytable` WHERE `file` REGEXP 'This string :var'";
$stmt = $dbh->prepare($query);
$stmt->bindValue(':var', 'exists');
$stmt->execute(); 
```

这会引发错误：

> SQLSTATE[42000]：语法错误或访问冲突

当我在执行前回显 $query 时，我得到：

```
SELECT * FROM `mytable` WHERE `file` REGEXP 'This string :var' 
```

你到底是如何在正则表达式中绑定变量的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:44:17.077

两件事：您需要告诉 mysql 您希望应用`REGEXP`到哪个列，并且占位符只能用于可以出现值的位置（感谢@Barmar）。例如，如果你想搜索`col1`你`'This string :var'`需要做

```
SELECT * FROM `mytable` WHERE col1 REGEXP CONCAT('This string ', :var) 
```

# c# - DNN PayPal 设置检查 receiver_email

> ID：12548721
> 
> 赞同：1
> 
> 时间：2012-09-23T00:16:01.640
> 
> 标签：c#, dotnetnuke, paypal-ipn

在我的 DNN 网站的一个页面上，我在 HTML/Text 模块内设置了一个 BuyNow 按钮。该按钮在提交到 PayPal Sandbox URL 时执行 POST。我还设置了一个基于 REST 的服务，PayPal 会将 IPN 信息发布到该服务。

在此服务中，我发送带有 cmd_notify 参数的 POST 并取回与交易相关的信息。

此时，我想检查一下 PayPal 发送的 receiver_email 参数是否与 Sandbox 帐户中的卖家电子邮件地址一致。但是我不想硬编码后者的值。我注意到 DNN 在 Admin->Advanced Settings 下有一个“Payment Settings”部分。

**[TL;博士]**

如何从后端 Web 服务 C# 代码以编程方式访问存储在管理->高级设置->付款设置中的 PayPal 电子邮件地址信息？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:16:55.507

这作为名为“ProcessorUserId”的设置键存储在 HostSettings 表中：

```
 select * from hostsettings where settingname='ProcessorUserId' 
```

以编程方式，如果您在 DNN 中，您可以通过以下方式访问它：

```
 DotNetNuke.Common.Globals.HostSettings(KEY) 
```

那是：

```
 string pid= DotNetNuke.Common.Globals.HostSettings("ProcessorUserId"); 
```

希望它有所帮助，人。

# c# - 使用代码隐藏执行 sql 查询时，如何避免 Gridview 中的列重复？

> ID：12548724
> 
> 赞同：0
> 
> 时间：2012-09-23T00:16:17.217
> 
> 标签：c#, asp.net, gridview, code-behind, sqldatareader

我有一个 sql 查询，我在后面的代码中执行它返回多行长和多列宽的数据。我的 aspx 页面上有一个 GridView，我只提到某些列，因为我想更改列的显示名称，或者使用 HyperLinkField 操作它以将其呈现为链接。我在代码隐藏中将 SqlDataReader 绑定到 gridview。

问题是，我注意到在实际页面上重复的列。我该如何避免这种情况？

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:22:49.143

你`AutoGenerateColumns="false"`在GridView上设置了吗？

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogeneratecolumns.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogeneratecolumns.aspx)

# javascript - window.innerHeight vs window.outerHeight 计算密度？

> ID：12548726
> 
> 赞同：4
> 
> 时间：2012-09-23T00:17:30.940
> 
> 标签：javascript, android, cordova

当我开始用一个标尺 PhoneGap 开发一个简单的应用程序时，我遇到了一个问题。我的大部分移动背景都是原生 Android，所以我从它开始。我是 javascript 和 html5 的初学者，一般来说是 web 开发。

[在这里](https://stackoverflow.com/questions/12547716/how-to-draw-a-simple-ruler-with-javascript/12547974#12547974)，您可以看到我与该问题相关的第一个问题。

这是我第一次尝试计算一毫米内有多少像素。这在 Android 本机代码中运行良好。

```
 public float getYdpi() {
        return displayMetrics.ydpi;
    }
function getPixelsPerMillimeter(){
    return YDpi/25.4f;        
} 
```

但是毫米标记画错了。最后经过一番尝试后，我按照以下方式替换了该方法

```
 function getPixelsPerMillimeter(){
    var pixelsPerMms = window.innerHeight/heightInMms;
    return pixelsPerMms;    
} 
```

HeightInMms 是用原生 android 代码计算的，简单的数学高度（以像素为单位）除以每英寸的密度像素，乘以 25.4，即一英寸有多少毫米。

```
public float getPhoneHeightInMillimeters(){     
    metrics = gap.getResources().getDisplayMetrics();                   
    return (metrics.heightPixels     / metrics.ydpi)*25.4f; 
```

长话短说，我从本机代码或使用 window.outerHeight 获得的 dpi（或每英寸像素，这是我的最终目标）与我从 window.innerHeight 获得的不同。为什么？

给出真实值，我在一个高度为 800 像素的 Galaxy s2 设备上进行测试。window.outerHeight 返回 800，作为 metrics.heightPixels，但 window.innerHeight 给我 533。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T20:35:56.010

您可以创建一个 1 英寸宽的元素，然后询问该元素的 clientWidth（它以像素为单位）

例子：

```
function getPixelsPerInch() {
  var d = document.createElement("div");
  var ret;
  d.style.opacity = 0;
  d.style.width = "1in";
  d.style.position = "fixed";
  d.style.padding = 0;
  document.body.appendChild(d);
  ret = d.clientWidth;
  document.body.removeChild(d);
  return ret; 
}
alert(getPixelsPerInch()); 
```

我建议尽可能避免进行单位计算并在浏览器上中继，例如，您可以通过这种方式计算**每毫米像素：**

```
function getPixelsPerMillimeter() {
  var d = document.createElement("div");
  var ret;
  d.style.opacity = 0;
  d.style.width = "1mm";
  d.style.position = "fixed";
  d.style.padding = 0;
  document.body.appendChild(d);
  ret = d.clientWidth;
  document.body.removeChild(d);
  return ret; 
}
alert(getPixelsPerMillimeter()); 
```

或者更通用的方法：

```
function getPixelsPer(unit) {
  var d = document.createElement("div");
  var ret;
  d.style.opacity = 0;
  d.style.width = unit;
  d.style.position = "fixed";
  d.style.padding = 0;
  document.body.appendChild(d);
  ret = d.clientWidth;
  document.body.removeChild(d);
  return ret; 
}
function getPixelsPerInch() {
  return getPixelsPer("1in");
}
function getPixelsPerMillimeter() {
  return getPixelsPer("1mm");
}
alert(getPixelsPerInch());
alert(getPixelsPerMillimeter());
alert(getPixelsPer("1cm")); // and so on... 
```

# ruby-on-rails - 活动记录信誉系统

> ID：12548727
> 
> 赞同：0
> 
> 时间：2012-09-23T00:17:35.103
> 
> 标签：ruby-on-rails, gem

我在我的投票系统应用程序中使用 gem Active Record Reputation System。在这个 gem 中，add_evaluation 方法有 3 个参数。

```
@blog.add_evaluation(:likes, value, source_object) 
```

源对象应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:42:35.433

在 Blog 模型中，您定义 has_evaluation 并在那里定义谁在进行评估。那是源对象（最典型的是用户）

# r - 如何使用名称在变量中的 R 加载和使用数据文件？

> ID：12548728
> 
> 赞同：0
> 
> 时间：2012-09-23T00:17:34.220
> 
> 标签：r, bioconductor

我想使用 R 在 R 中加载一个数据文件，`data()`数据集的名称存储在一个变量中。在没有存储在变量中的数据集名称的情况下执行此操作很简单：

```
> library(ChIPpeakAnno)
> data(TSS.human.NCBI36)
> # Use data:
> TSS.human.NCBI36 # Prints out contents of data set 
```

但是，当数据集名称存储在变量中时，我不确定如何完成相同的任务。

```
> library(ChIPpeakAnno)
> assembly <- 'TSS.human.NCBI36'
> data(list=c(assembly)) # Hackish way of loading the data from a variable
> # Now I wish to access the data, but I don't know how. 
```

`data()`的返回值只是加载的数据集的名称。我试图加载的数据文件位于`~/R/2.15/library/ChIPpeakAnno/data/TSS.human.NCBI36.rda`——我不相信它有任何特定于 Bioconductor 的东西。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T00:59:40.737

如果您在字符向量中只有对象名称时试图弄清楚如何以编程方式访问数据，您可以使用`get`.

```
library(ChIPpeakAnno)
assembly <- 'TSS.human.NCBI36'
data(list=c(assembly)) 

# Now store the data into 'dat'
dat <- get(assembly)
# Now you can use 'dat' anywhere you would normally use TSS.human.NCBI36
head(start(dat))
#[1]  1873  4274 20229 24417 24417 42912
head(start(TSS.human.NCBI36))
#[1]  1873  4274 20229 24417 24417 42912 
```

# php - PHP 传递 URL 参数最佳实践

> ID：12548730
> 
> 赞同：1
> 
> 时间：2012-09-23T00:17:42.847
> 
> 标签：php

我有一个输出搜索结果的搜索页面。在运行搜索之前，您可以根据以下条件过滤结果。

```
1\. status 
2\. order by
3\. record type 
```

查看记录会将用户重定向到编辑表单页面，如果他们单击取消按钮，他们会重定向回搜索结果。

这是我所做的：

1.  我将 GET 参数（status、order_by 和 record_type）存储在会话变量中
2.  当用户在编辑表单上单击取消时，我使用会话变量重定向回搜索结果，如下所示：

    如果（@$_POST['cancelbtn']）{

    ```
     if (isset($_SESSION['searchForm'])){
                header("location:searchForm.php?products=".$_SESSION['product']."&ticket_status=".$_SESSION['status']."&order_by=".$_SESSION['order_by']."&record_type=".$_SESSION['record_type']."&searchbtn=Go!");
        } 
    ```

    }

以上对我有用，但我想知道这是否是最好的方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:44:43.343

这不是一个*糟糕*的方法，但我会尝试并在未来证明它。不要在会话中存储每个单独的变量，而是尝试存储 URL。这样，如果您将搜索表单更改为具有一些附加参数，则无需更改大部分代码。

```
//Your search results page
$_SESSION['searchResults'] = $_SERVER['REQUEST_URI'];

//Your form page
if (array_key_exists('cancelButton', $_POST) {
    header('Location: '.$_SESSION['searchResults']);
    exit;
} 
```

希望这可以帮助

# javascript - 拉斐尔悬停错误？

> ID：12548733
> 
> 赞同：3
> 
> 时间：2012-09-23T00:19:10.030
> 
> 标签：javascript, hover, mouse, tooltip, raphael

我用 Raphael JS 编写了一个图形小部件。数据取自数据库并在画布中绘制。当我尝试为数据点创建工具提示时，问题出现了。工具提示淡入，但淡出时有问题。有时会淡出，有时不会（鼠标快速移动时似乎不会淡出）。应该注意的是，当鼠标悬停在数据点上时，数据点会增长。改进我的代码的任何帮助都会有所帮助。谢谢。下面的代码：

```
circle2[<?php echo $i?>].hover(function () {
circle2[<?php echo $i?>].attr({"stroke": "#000"});
circle2[<?php echo $i?>].attr({"r": "8"});
rect.toFront();
text.toFront();
rect.attr({"x":30+50*<?php echo $i ?>,"y":220-250*<?php echo $time_value[$i]/100000;?>});
text.attr({"text":"<?php echo $date[$i]?>\nValue: $<?php echo $time_value[$i]?>\nInvested: $<?php echo $time_value[$i]?>","y":250-250*<?php echo $time_value[$i]/100000;?>,"x":33+50*<?php echo $i ?>});
rect.animate({"opacity":0.8},500);
text.animate({"opacity":1.0},500);
},
    function () {
         rect.attr({"opacity":0});
         text.attr({"opacity":0});
         circle2[<?php echo $i?>].attr({"stroke": "none"});
         circle2[<?php echo $i?>].attr({"r": "5"});
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T22:36:37.737

这是问题（95% 的确定性）：如果发生快速悬停，并且悬停的持续时间小于悬停开始动画的持续时间（在这种情况下为 500 毫秒），则悬停功能将设置元素在动画结束之前将不透明度设置为 0，并将背景和文本的不透明度分别设置回 0.8 和 1.0。

解决方案是在悬停周期结束时停止正在进行的动画。您应该能够按如下方式更新悬停处理程序：

```
... 
function () {
    rect.stop().attr({"opacity":0});
    text.stop().attr({"opacity":0});
    circle2[<?php echo $i?>].attr({"stroke": "none"});
    circle2[<?php echo $i?>].attr({"r": "5"});
} 
```

# javascript - 调用默认的 Phonegap 后退按钮处理程序

> ID：12548735
> 
> 赞同：6
> 
> 时间：2012-09-23T00:20:16.027
> 
> 标签：javascript, android, iphone, cordova

我有一个 phonegap 应用程序，需要我捕获后退按钮。这可以很好地工作，但是当我在主屏幕并按下后退按钮时，我想调用原始事件处理程序并让应用程序关闭或通过这样的按下来执行平台自然而然的任何事情。我知道我可以告诉应用程序退出，但理解这对于 iPhone 应用程序来说是一种糟糕的形式。

无论我尝试什么（并且我已经尝试了很多事情），我都无法触发原始处理程序。有什么建议吗？

在我的代码中，我的后退按钮事件处理程序中有一个 switch 语句，它根据需要引导应用程序达到以下效果：

```
switch blahBlah
{
    case 'this' :
        doThis() ;
        break;
    case 'main' :
        // What do I do here that is well behaved for all platforms??? 
        break;
    default:
        doFoo() ;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T08:36:01.920

检测您何时登陆主屏幕并删除您的自定义事件处理程序。

```
document.removeEventListener( "backbutton", function(){}, false ); 
```

并在其他页面（或部分）上添加事件侦听器。

```
document.addEventListener( "backbutton", OverrideBackButton, false ); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T15:09:06.927

这是我用过的，它似乎可以很好地满足我的需要

```
 function pageinit() {
            document.addEventListener("deviceready", deviceInfo, true);
        }

        function deviceInfo() {
            document.addEventListener("backbutton", onBackButton, true);
        } 

        function onBackButton(e) {
            try{
                var activePage = $.mobile.activePage.attr('id');

                if(activePage == 'Options'){
                    closeOptions();
                } else if(activePage == 'Popup'){
                    closePopup();
                } else if(activePage == 'HomePage'){

                function checkButtonSelection(iValue){
                    if (iValue == 2){
                            navigator.app.exitApp();
                        }
                    }

                e.preventDefault();
                navigator.notification.confirm(
                    "Are you sure you want to EXIT the program?",
                    checkButtonSelection,
                    'EXIT APP:',
                    'Cancel,OK');
                } else {
                     navigator.app.backHistory();
                }
            } catch(e){ console.log('Exception: '+e,3); }
        } 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-03T18:26:10.747

Cordova 7.x，至少在 Android 上，似乎没有正确更新覆盖状态。因此，**[@SHANK 的答案](https://stackoverflow.com/a/14333820/1090166)**不再有效。

作为一种解决方法，您可以手动禁用后退按钮覆盖，从而导致默认行为：

```
navigator.app.overrideBackbutton(false); 
```

要重新激活自定义处理，类似地执行以下操作：

```
navigator.app.overrideBackbutton(true); 
```

*我提交[了一份关于 Apache 问题跟踪器的错误报告](https://issues.apache.org/jira/browse/CB-13947)。*

# javascript - 如何设置扩展菜单在页面加载时关闭

> ID：12548737
> 
> 赞同：0
> 
> 时间：2012-09-23T00:20:23.077
> 
> 标签：javascript, html, css, drop-down-menu, expando

我有一个在单击时展开的 div，但我不知道如何在页面关闭时将其设置为不展开？

```
 <script>
     function toggleDiv(id1,id2) {
      var tag = document.getElementById(id1).style;
      var tagicon = document.getElementById(id2);

      if(tag.display == "none") {
       tag.display = "block";
       tagicon.innerHTML = "&nbsp;-&nbsp;";
      } else {
       tag.display = "none";
       tagicon.innerHTML = "&nbsp;+&nbsp;";
      }
     }
</script> 
```

和 HTML：

```
<div class="title" onClick="javascript:toggleDiv('content1','icon1');">
     <span style="float:left">Options</span>
     <span id="icon1" style="float:right">&nbsp;-&nbsp;</span> 
    </div>
    <div id="content1" class="item">
     <div><input type="button" onclick="changeBG('#FF0097')" value="Magenta"/></div>
     <div><input type="button" onclick="changeBG('#A200FF ')"  value="Purple"/></div>
     <div><input type="button" onclick="changeBG('#00ABA9')"  value="Teal"/></div>
     <div><input type="button" onclick="changeBG('#8CBF26')"  value="Lime"/></div>
     <div><input type="button" onclick="changeBG('#F09609')" value="Orange"/></div>
     <div><input type="button" onclick="changeBG('#1BA1E2')"  value="Blue"/></div>
     <div><input type="button" onclick="changeBG('#E51400')"  value="Red"/></div>
     <div><input type="button" onclick="changeBG('#339933')"  value="Green"/></div>
    </div> 
```

CSS incase 你需要它：

```
.title {
      padding:5px; 
      border:1px solid #CCCCCC;
      font:15px arial; 
      width:100px; 
      cursor:pointer;
      height:20px;
     }

     .item {
      padding:5px; 
      border:1px solid #CCCCCC; 
      font:12px verdana; 
      width:100px;
     }

     .item div {
      border-bottom:1px solid #CCCCCC;
      padding:5px;
     }

     .button {
      border:1px solid #CCCCCC; 
      padding:5px;
      cursor: pointer;
     } 
```

如您所见，下拉菜单允许用户更改网站的背景颜色。我想知道是否可以创建一个 cookie 来存储更改，以便在用户选择颜色之前它不会首先默认为白色背景？

谢谢堆栈溢出（：

感谢所有和任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:06:27.030

我确定您的 html 页面上有正文。只需添加如下所述的功能。有用。我测试过

```
<body onLoad="toggleDiv('content1','icon1')"> 
```

# vb.net - DataGridView 不刷新/更新/重新加载数据。子窗体关闭后

> ID：12548738
> 
> 赞同：2
> 
> 时间：2012-09-23T00:20:55.777
> 
> 标签：vb.net

这是一个 VB.NET，Winforms 应用程序。我在“Form1”上有一个 datagridview，它使用一个 databinding.datasource，它是一个实体框架表。我在 Form1 上使用以下函数填充 datagridview：

```
Sub PM_UnitViewGrid()
    Try

        _form1.UnitsBindingSource.DataSource = db.units.Where(Function(f) f.propertyId = _form1.CurrentPropertyId).OrderBy(Function(F) F.unitNumber)
        _form1.UnitDataGridView.DataSource = _form1.UnitsBindingSource.DataSource
        Dim iCount As Integer = _form1.UnitDataGridView.RowCount
        For x As Integer = 0 To iCount - 1
            If Not IsNothing(_form1.UnitDataGridView.Rows(x).Cells(4).Value) Then
                Dim tid As Integer = _form1.UnitDataGridView.Rows(x).Cells(4).Value
                Dim _ten As tenant = db.tenants.Single(Function(f) f.Occupantid = tid)
                _form1.UnitDataGridView.Rows(x).Cells(1).Value = _ten.first_name + ", " + _ten.last_name
            Else
                Dim btnColumn As DataGridViewButtonCell = CType(_form1.UnitDataGridView.Rows(x).Cells(1), DataGridViewButtonCell)
                btnColumn.Style.BackColor = Color.Green
                _form1.UnitDataGridView.Rows(x).Cells(1).Value = "VACANT"
            End If
        Next

    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try

    Return
End Sub 
```

这很好用，并且还将所需的值分配给未绑定的列。问题是单元格（1）是一个按钮。单击哪个时会将用户带到另一个表单作为新的对话框窗口。其功能如下。但是，一旦以该表单进行更改，我需要 datagridview 刷新其从数据库中使用的数据并显示正确的数据。就目前而言，除非应用程序完全退出并重新启动，否则数据网格视图上的值不会更新。我发现似乎没有任何工作，刷新和更新只重绘控件。我需要刷新基础数据源，然后在退出子表单后刷新 datagridview。这让我已经困惑了 36 个小时，我不知道为什么我没有尝试任何工作。任何和所有的帮助将不胜感激。

根据单击的单元格（1）按钮加载子窗体的子窗体如下：

```
Private Sub UnitDataGridView_CellContentClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles UnitDataGridView.CellContentClick
    UnitDataGridView.CommitEdit(DataGridViewDataErrorContexts.CurrentCellChange)
    Dim y As DataGridViewCellEventArgs = e
    Dim Tid As Integer = Nothing
    If e.ColumnIndex = 1 Then
        If Not e.RowIndex = -1 Then
            If Not IsNothing(UnitDataGridView.Rows(e.RowIndex).Cells(4).Value) Then
                currentTenent = UnitDataGridView.Rows(e.RowIndex).Cells(4).Value
                TenentIdentification = currentTenent
                If Not IsNothing(e) Then
                    If Not IsNothing(UnitDataGridView.Rows(e.RowIndex).Cells(4).Value) Then
                        Tid = UnitDataGridView.Rows(e.RowIndex).Cells(4).Value
                        Dim _ten As tenant = db.tenants.Single(Function(f) f.Occupantid = Tid) 'tenant is a table entity 
                        TenantViewSubs.tenId = _ten.Occupantid
                        Dim t As New TenantView
                        t.tenId = tid
                        t.ShowDialog()
                    End If
                End If

                PropertyManagSubs.PM_UnitViewGrid() 'This is the function that is above that fills the datagridview
            Else
                Dim uTview As New UnassignedTenants
                uTview.selectedProperty = selectedProperty 'selectedProperty is Integer 
                uTview.ShowDialog()

                PropertyManagSubs.PM_UnitViewGrid() 'This is the function that is above that fills the datagridview
            End If
        End If
    End If
End Sub 
```

我在 t.ShowDialog() 行之后尝试了以下每个代码块，根本没有任何变化。

```
UnitDataGridView.Refresh() 
```

.

```
UnitsBindingSource.Dispose()
UnitsBindingSource.DataSource = db.units.Where(Function(f) f.propertyId = selectedProperty).OrderBy(Function(f) f.unitNumber)
UnitDataGridView.DataSource = UnitsBindingSource.DataSource 
```

.

```
UnitsBindingSource.DataSource = nothing
unitsBindingSource.DataSource = db.units.Where(Function(f) f.propertyId = selectedProperty).OrderBy(Function(f) f.unitNumber)
UnitDataGridView.DataSource = UnitsBindingSource.DataSource 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:05:06.790

我终于自己解决了这个问题。这是我将数据库上下文传递给数据绑定的方式。

我只是写了以下子：

```
Private Sub UpdateValues()
    Dim context As New storageEntities 'storageEntities is an Entity
    Dim query = context.units.Where(Function(F) F.propertyId = selectedProperty).OrderBy(Function(f) f.unitNumber)
    UnitDataGridView.DataSource = query
End Sub 
```

然后任何时候我只需调用一个子表单更新数据

```
 UpdateValues() 
```

对话框关闭后。

这可能会帮助其他有同样问题的人，所以这就是我发布它的原因。

# php - 重定向网站用户

> ID：12548741
> 
> 赞同：-2
> 
> 时间：2012-09-23T00:21:20.647
> 
> 标签：php, html

如果用户使用任何形式的 Internet Explorer，我想禁止他们使用我的网站？如果使用 IE，我如何编写一个 php 脚本将用户重定向到不同的页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:22:36.253

这应该可以解决服务器端的问题。

```
<?php
    function ae_detect_ie()
    {
        if (isset($_SERVER['HTTP_USER_AGENT']) && 
        (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false))
            return true;
        else
            return false;
    }

    [...]

    if(ae_detect_ie()) 
        header('Location:/my_IE_webpage.php'); 
?> 
```

来源：[http ://www.anyexample.com/programming/php/how_to_detect_internet_explorer_with_php.xml](http://www.anyexample.com/programming/php/how_to_detect_internet_explorer_with_php.xml)

您也可以使用 Javascript 在客户端执行此操作：

```
function getInternetExplorerVersion()
// Returns the version of Internet Explorer or a -1
// (indicating the use of another browser).
{
  var rv = -1; // Return value assumes failure.
  if (navigator.appName == 'Microsoft Internet Explorer')
  {
    var ua = navigator.userAgent;
    var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
    if (re.exec(ua) != null)
      rv = parseFloat( RegExp.$1 );
  }
  return rv;
}

if(getInternetExplorerVersion() > 0) 
    window.location.href = "/my_IE_webpage.php"; 
```

来源： http: [//msdn.microsoft.com/en-us/library/ms537509 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx)

**编辑**

或者使用[Vulcan](https://stackoverflow.com/users/1247781/vulcan)的解决方案（客户端也是）：

> ```
> <!--[if IE]>
> <script type="text/javascript">
>     window.location = "http://example.com";
> </script>
> <![endif]--> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:27:38.200

您可能会发现 JavaScript 比 PHP 更容易做到这一点。使用 JavaScript，您可以在 IE 条件语句中包含脚本，以便它仅在用户运行 IE 时运行。

```
<!--[if IE]>
<script type="text/javascript">
    window.location = "http://example.com";
</script>
<![endif]--> 
```

# r - 使用多个条件对向量进行子集化

> ID：12548744
> 
> 赞同：1
> 
> 时间：2012-09-23T00:22:14.637
> 
> 标签：r

```
> which(LETTERS=="A")
[1] 1
> which(LETTERS=="B")
[1] 2 
```

我可以使用一个语句来获得 1,2 的值吗？

```
which(LETTERS=="B" or "A")
Error: unexpected symbol in "which(LETTERS=="B" or" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T00:24:18.173

```
which(LETTERS == "A" | LETTERS == "B") 
```

或者：

```
which(LETTERS %in% c("A", "B")) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-11T16:12:38.547

作为标题的答案，如何使用多个条件对向量进行子集化：

```
# Random Data 
  test1 <- sample(x = c(1:30),size = 15,replace = TRUE)
  test2 <- sample(x = c(70:75),size = 15,replace = TRUE)
  test3 <- sample(x = c(1:100),size = 15,replace = TRUE)

# actual data
  # test1
  # [1] 19  1  9  6 15  1 16  4  1 10 11 19 24  1 17
  # test2
  # [1] 71 72 70 74 71 74 74 75 73 73 72 74 74 73 71
  # test3
  # [1] 24 95 66  8  9 97 85  1 40 55 37 84 95 93 95

# subsetting vector 3 with multiple conditons
  test3[test1 > test3 & test2 < 5 * test1]
# [1] 9 
```

# ruby-on-rails - 在迁移中添加 Id 列

> ID：12548746
> 
> 赞同：22
> 
> 时间：2012-09-23T00:22:38.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个 Rails 应用程序，其中一个模型没有`id`列。做一些研究，我发现了创建它的迁移：

```
create_table(:the_model, :id => false) do |t|
  # columns
end 
```

现在，在新的迁移中，我想以`id`Rails 标准方式添加列（不使用特定于数据库的 sql）。我怎样才能做到这一点？

我已经尝试过了，但没有成功：

```
change_table(:the_model, :id => true) do |t|
end 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-23T00:43:16.943

您可以手动添加 id 列：

```
add_column :table_name, :id, :primary_key 
```

或清除（或备份）您的数据，回滚到此迁移，摆脱选项`:id => false`，然后重新迁移。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-17T09:14:41.567

你不需要提及`:integer`

`rails g migration add_id_to_model id:primary_key`为我工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T06:17:00.310

您已经得到了答案，但是在这种情况下，这是一个可以完成所有工作的衬垫

```
rails generate migration AddIdToModel id:integer 
```

查看迁移文件名的语法 Add *ColumnName* To *TableName*跟在列描述后面。它将生成如下所示的内容

```
class AddIdToModel < ActiveRecord::Migration
  def change
    add_column :models, :id, :integer
  end
end 
```

现在，如果您有其他感觉，您可以更改这条线。然后运行`rake db:migrate`。

# php - > 和 < 打破 json 编码，如何编码属性？

> ID：12548748
> 
> 赞同：0
> 
> 时间：2012-09-23T00:22:55.637
> 
> 标签：php, jquery, json

我试图在 PHP 的 json 中编码一些 html。该函数从 PHP 文件请求数据，然后将`append`其放入 html 页面。该函数可以正常工作，直到我尝试传递的字符串中有 < 或 >。这是我的 PHP 代码：

```
$append = "<b>Edit</b>";
for($i=0;$i<count($atarray);$i++)
{
    $append .= $atarray[0]['atname'];
}
$json = json_encode(array('ok' => '0', 'apso' => $append));
echo $json; 
```

这很好用，如果不是`"<b>edit</b>"`我使用`"Edit"`，有没有办法让它工作，包括 HTML 标签？

控制台中出现的错误是`Uncaught SyntaxError: Unexpected token < jquery-1.7.js:2`每当我运行该功能时。

JavaScript

我正在使用 jQuery 表单插件-> [http://archive.plugins.jquery.com/project/form](http://archive.plugins.jquery.com/project/form) 它正在将变量作为`POST`数据发送

但这是我的功能

```
$(function(){
$("#change").submit(function(e){
    e.preventDefault();
    $(this).ajaxSubmit({
        beforeSubmit:function(before){
            $('#loadingsignup').show();
            $("#resultsignup").empty().hide();
        },
        success:function(retour){
            $('#loadingsignup').hide();
            res=jQuery.parseJSON(retour);
            if(res.ok==1){
                $('#resultsignup').append('<p class="good"><?php echo $lang['107']; ?></p>');
                if(res.img!==undefined){
                    $('#eaim').attr('src','/images/artistsprofilepic/'+res.img);
                }
            }else if(res.apso!==undefined){
                var ap=res.apso;
                $('#apso').append(ap);
            }else{
                $('#resultsignup').append('<p class="pasgood">'+res.err+'</p>');
            }
            $("#resultsignup").hide().fadeIn(500);
            setTimeout("$('#resultsignup').fadeOut();",5000);
        }
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T01:43:01.667

尝试摆脱对 的调用`jQuery.parseJSON`，并使用该选项`dataType: 'json'`。`.ajaxSubmit`uses `jQuery.ajax`，它试图找出响应的格式，它可能已经确定它是 JSON，所以它已经被解析了。再次解析它会导致此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T00:34:35.013

这只是一个猜测，但请尝试在您的 JSON 回显之前添加它（它应该在那里）。

```
header('Content-type: application/json'); 
```

这将设置[https://stackoverflow.com/questions/267546/correct-http-header-for-json-file](https://stackoverflow.com/questions/267546/correct-http-header-for-json-file)，否则它将默认内容类型为`text/html`，我认为这会混淆 jQuery。

另外，根据评论，请显示您正在使用的javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T01:05:21.243

设置响应数据类型：

```
$(this).ajaxSubmit({
  dataType: "json",
  ....
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T00:25:50.810

您可以使用它们对它们进行编码`htmlentities()`

```
$json = htmlentities(json_encode(array('ok' => '0', 'apso' => $append)), ENT_NOQUOTES, 'UTF-8'); 
```

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

您还可以选择只对`$append`变量中的值进行编码，如下所示：

```
$json = json_encode(array('ok' => '0', 'apso' => htmlentities($append, ENT_NOQUOTES, 'UTF-8'))); 
```

# vba - 如何从单元格中提取特定文本？

> ID：12548751
> 
> 赞同：0
> 
> 时间：2012-09-23T00:23:18.803
> 
> 标签：vba, excel

在这种情况下，我想提取单元格中的开始文本并保持其余部分不变。例如，一系列单元格包含：

```
2nd Unit. Miami
3rd Production Staff. Toronto
1st Ad. San Francisco 
```

我想在不使用 Text to columns 的情况下将其分解，因为前几行的格式不同，而最后几行是我想要处理的异常值。

我认为正则表达式可能会做到这一点，但这似乎有点复杂。

我的算法思路是： 1\. 抓取想要的文本（什么函数或自定义子会这样做？） 2\. 将文本粘贴到新位置 3\. 从单元格中剪切文本，留下剩余的文本。

看起来很简单，但我仍然在 VBA 森林中前进，而且按照我的速度，它最终会更快地手工完成。但这似乎是学习一些 VBA 技巧的好机会。

TIA

更新：我想将文本带到“。\”并将其移动到不同的列，将其余部分保持在原处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T02:18:24.913

VBA 是不必要的。获取单元格 A1:`=MID(A1,FIND(".\",A1,1)+2,LEN(A1))`中 .\ 之后的文本 获取 A1: 中 .\ 之前的文本`=LEFT(A1,FIND(".\",A1,1)-1)`。

作为附加信息，`Find`返回字符串中`.\`出现的位置。它相当于`InStr`在 VBA 中。如果`.\`不在单元格中，它将显示`#VALUE`，因为我没有费心添加错误检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T02:27:31.117

由于您似乎想就地修改单元格文本，因此需要 VBA。

`cl`在设置为要处理的单元格的循环内：

```
str = cl.value
i = Instr(str, ".\")
cl = Trim(Mid$(str, i + 2))  ' assuming you want to exclude the ".\"
cl.Offset(0, 1) Trim(Left$(str, i - 1)) ' Places the original first part one cell to the right 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:39:58.763

为了任何有同样问题的人，这里是经过全面测试的工作代码。

```
Function RE6(strData As String) As String
  Dim RE As Object, REMatches As Object

  Set RE = CreateObject("vbscript.regexp")
  With RE
      .MultiLine = False
      .Global = False
      .IgnoreCase = True
      .Pattern = "[0-9][0-9][0-9][0-9]B"
      RE6 = .test(strData)
  End With

  Set REMatches = RE.Execute(strData)
  If REMatches.Count > 0 Then
      RE6 = True
  Else
      RE6 = False
  End If
End Function

Sub territory()
Dim strTest As String, str As String, cl As Range
  strTest = ActiveCell.Value
  Set cl = ActiveCell
  If RE6(strTest) = True Then
      str = cl.Value
      i = InStr(str, ". ")
      cl = Trim(Mid$(str, i + 2))
      cl.Offset(0, 1) = Trim(Left(str, i - 1))
      cl.Offset(0, 2) = "Instance"
      MsgBox RE6(strTest)
  End If
End Sub 
```

# ios - iOS webview缩放以匹配视网膜显示

> ID：12548752
> 
> 赞同：4
> 
> 时间：2012-09-23T00:23:37.197
> 
> 标签：ios, uiwebview, retina-display

我正在使用全屏 UIWebView 在 iOS 下容纳/渲染 HTML5 应用程序。非常像 Cordova/phonegap，虽然我没有使用它们。我尝试使我的 webview 大小与底层显示相匹配。不幸的是，在视网膜显示器上，self.view.bounds 返回的值依赖于 UIScreen 缩放因子。所以我得到 1024x768 而不是 2048x1536。这不是一个大问题，除非我使用较小的边界（在调整状态栏之后）实例化 UIWebView，并且有些事情变得有点锯齿状。特别是，我在几个点上使用了画布，并且圆形边框看起来很厚。需要明确的是，这不是缩放栅格资源的情况。

我没有使用该 UIWebView 获得屏幕的完整分辨率。理想情况下，我想将屏幕比例设置为 1.0，但这似乎不受支持。关于如何最好地充分利用屏幕的任何建议？

这个问题在 iPhone 5 模拟器上最为明显。我没有要测试的硬件。iPad/新 iPad 我认为有问题，但锯齿不那么明显。

更新：我越看这个，我就越认为它可能仅限于画布。

解决方案：以防其他人到达这里。根据下面的答案，我创建了宽度和高度乘以 window.devicePixelRatio 的所有画布元素，然后将它们的样式属性设置为具有原始（与设备无关）大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:55:56.213

请参阅[https://stackoverflow.com/a/7736803/341994](https://stackoverflow.com/a/7736803/341994)。基本上你需要检测到你有双倍的分辨率并有效地使画布的分辨率加倍。

# javascript - 轮播可滚动？

> ID：12548753
> 
> 赞同：-1
> 
> 时间：2012-09-23T00:24:08.087
> 
> 标签：javascript, sencha-touch, extjs, carousel

轮播可滚动？

是否有在轮播中滚动图像的解决方案？可滚动，滚动，不工作

谢谢...

代码：

```
Ext.define('carousel.view.test', {    extend: 'Ext.carousel.Carousel',

    xtype:'test',

    config: {
        fullscreen: true,
       scrollable: 'vertical,

        items: [
            {
                xtype: 'image',
                html: '<img src=./resources/images/1.png />',
                            scrollable: 'vertical'                   

            },
            {
                xtype: 'image',
                html: '<img src=./resources/images/2.png />'

            }
        ]
    }

}); 
```

编辑 ：

我可能找到了解决方案，但它适用于 chrome，不适用于 android 或 Ios，为什么？

有用

```
config: {     

        items: [
            {xtype: 'container',

                scrollable: 'vertical',
                directionLock:true,
                items:[
                           { xtype: 'image',                         

                            html: '<img src=./resources/images/1.png />'}
                ]                            
            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:07:28.113

根据 sencha 成员在其论坛上的说法，

```
scrollable : {
    direction     : 'vertical',
    directionLock : true
}, 
```

忘记贴这里了，不好意思

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:17:25.740

```
scrollable : {
     direction : 'both',
     directionLock : true
} 
```

# php - 带有单选按钮的 PHP 邮件表单使用 AJAX 发送

> ID：12548759
> 
> 赞同：5
> 
> 时间：2012-09-23T00:25:05.783
> 
> 标签：php, javascript, ajax, phpmailer, mailer

**TL; DR 解决方案：**将 javascript 中的 .val 更改为 .serialize 以用于任何无线电输入。

我一直在使用[本教程](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)构建一个表单，当按下提交按钮时，按钮淡出并淡出“谢谢”消息并在后台发送 mailer.php。我的表单有单选按钮，我似乎无法弄清楚如何让 javascript 将选择的按钮发送到我的电子邮件。

这是html表单：

```
<form action="" method="" name="rsvp" id="rsvp-form">
<fieldset>
                <legend>RSVP</legend>

                    <ol>
                        <li>
                            <input id="accepts1" class="rsvps" name="rsvps" type="radio" value="Graciously_Accepts" />
                            <label for="accepts1">Graciously Accepts</label>
                        </li>
                        <li>
                            <input id="declines1" class="rsvps" name="rsvps" type="radio" value="Regretfully_Declines" />
                            <label for="declines1">Regretfully Declines</label>
                        </li>
                        <li>
                            <input id="accepts2" class="rsvps" name="rsvps" type="radio" value="Regretfully_Accepts" />
                            <label for="accepts2">Regretfully Accepts</label>
                        </li>
                        <li>
                            <input id="declines2" class="rsvps" name="rsvps" type="radio" value="Graciously_Declines" />
                            <label for="declines2">Graciously Declines</label>
                        </li>
                    </ol>
            </fieldset>
<div id="rsvp-wrapper">
    <fieldset>
     <button class="button" type="submit" value="send">RSVP!</button>
</fieldset>

</form>
<div class="success"></div>
</div> 
```

的JavaScript：

```
<script type="text/javascript">

$(function() {  

$(".button").click(function() {  

var rsvps = $(".rsvps").val();

var dataString = 'rsvps=' + rsvps;  

    $.ajax({  
      type: "POST",  
      url: "rsvp-mailer.php",  
      data: dataString,  
      success: function() {  
        $('#rsvp-wrapper').html("<div class='success'></div>");  
        $('.success').html("<p class='italic'>Thanks!</p>")   
        .hide()  
        .fadeIn(500, function() {  
          $('.success');  
        });  
      }  
    });  
    return false;   
});  
});  

</script> 
```

和mailer.php：

```
<?php 

$rsvps = $_POST['rsvps'];

$formcontent="

RSVP: $rsvps \n";

$recipient = "myemail@domain.com";

$subject = "RSVP";

$mailheader = "RSVP \r\n";

mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");

?> 
```

非常感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T00:58:42.407

试试这个。有关更多信息，请参阅[jQuery.post()](http://api.jquery.com/jQuery.post/)。

```
<script type="text/javascript">
    $('form').submit(function() {
        var data = $(this).serialize();

        $.post("rsvp-mailer.php", data, function() {
            $('#rsvp-wrapper').html("<div class='success'></div>");  
            $('.success').html("<p class='italic'>Thanks!</p>")   
            .hide()  
            .fadeIn(500, function() {  
                $('.success');  
            });  
        }

    return false;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:54:40.777

不要通过类选择器访问单选按钮，请尝试以下操作：

```
var rsvps = $('input[name=rsvps]:radio').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T01:06:22.533

您不需要 javascript 来获取值以便将它们发送到电子邮件。改用 PHP。

```
 $formcontent .= $_POST['rsvp']; 
```

该行将在 $recipient 发送单选按钮的值之前添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T01:27:50.253

更改`var rsvps = $(".rsvps").val();`为`var rsvps = $(".rsvps[selected=selected]").val();`

此外，dataString 需要是这样的 json 对象`var dataString = { rsvps : rsvps };`才能通过 ajax POST 访问。

# jquery - 使用jquery高度动态获取两个嵌套框的高度？

> ID：12548766
> 
> 赞同：0
> 
> 时间：2012-09-23T00:26:33.683
> 
> 标签：jquery, css, height

我想动态获取框的高度（在我的示例中为黄色背景） - 取决于其内容的长度。所以如果它有一个长文本，它的高度会增加。这个黄色盒子有一个父容器（在我的例子中是蓝色背景）。

我不明白为什么他们有相同的高度 - 这是`100`？

蓝色框应该有更高的数字，因为它有**padding top 20px**和**padding bottom 20px**。因此，如果黄色框为**100**，则蓝色框应为**140**。

 **jQuery,

```
// Set the object.
var object = $(".box");
//var object_height = parseInt(object.css('min-height'),10) || parseInt(object.css('height'),10);
var object_height = object.height();

var scrollable = $(".scrollable");
//var scrollable_height = parseInt(scrollable.css('min-height'),10) || parseInt(scrollable.css('height'),10);
var scrollable_height = scrollable.height();

alert(object_height);
alert(scrollable_height); 
```

html,

```
<div class="box">

    <div class="scrollable">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>

</div> 
```

来自[jsfiddle](http://jsfiddle.net/sTgvm/)的链接。

任何想法如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:28:50.763

你可以使用`outerHeight()`方法。

> 获取匹配元素集中第一个元素的当前计算高度，包括填充、边框和可选的边距。如果在一组空元素上调用，则返回值的整数（不带“px”）表示形式或 null。

```
object.outerHeight() 
```

[http://jsfiddle.net/GMtBa/](http://jsfiddle.net/GMtBa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:30:13.940

您应该使用`outerHeight()`来获得正确的高度值。

```
// Set the object.
var object = $(".box");
var object_height = object.outerHeight();

var scrollable = $(".scrollable");
var scrollable_height = scrollable.outerHeight();

alert(object_height);
alert(scrollable_height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T00:30:45.217

你应该使用`outerHeight()`方法，它计算高度+边距/填充**

# javascript - 将视图注入 div 标签

> ID：12548772
> 
> 赞同：0
> 
> 时间：2012-09-23T00:28:00.693
> 
> 标签：javascript, jquery, html, asp.net-mvc

我不禁觉得这是在单击按钮时将视图放在屏幕上（不刷新）的错误方式。当我通过 jquery 单击按钮时，我正在注入一个视图。我的问题是它在 IE 和我使用引导程序时效果不佳，所以当我去最小化/缩小屏幕时，响应进来但另一个导航栏出现在注入的视图上，所以当我有 2 个导航栏时屏幕很小。有没有另一种完整的方法来做到这一点？在控制器中调用操作并注入视图的更有效方法？谢谢。

```
 <script type="text/javascript">
function ViewMyTutorials() {
    if (event.preventDefault) {
        event.preventDefault();
    } else {
        event.returnValue = false;
    }
    $.get('@Url.Action("MyTutorials", "Account")', function (result) {

        $("#TutorialInjectionId").html(result);
    });
} 
```

```
 <div id="TutorialInjectionId"> 

   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T13:05:41.430

这种 AJAX 方法是正确的。我看不出有什么问题。我怀疑你有一些 CSS/HTML 问题，与 jQuery AJAX 方法无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T13:49:12.680

尝试查看以下文章，它们与您所做的非常相似。如果你做得对，这将增强你的信心，或者你会找到如何做得更好/其他方式的想法......

*   [ASP.NET MVC – 使用 Ajax 的 PartialView](http://evolpin.wordpress.com/2011/04/12/asp-net-mvc-partialview-with-ajax/)
*   [ASP.NET MVC 局部视图和 Ajax “真实世界”示例](http://evolpin.wordpress.com/2011/04/26/asp-net-mvc-partial-view-and-ajax-real-world-example/)

希望这可以帮助

# cuda - 使用 CUDA 优化嵌套 for 循环

> ID：12548778
> 
> 赞同：0
> 
> 时间：2012-09-23T00:28:52.393
> 
> 标签：cuda, gpu

所以我有一个我正在做的项目，它使用 OpenCV 来检测移动物体的运动。我正在尝试加快检测速度，并有一个我想使用 CUDA 加速的嵌套 for 循环。我在 Visual Basic 中设置了 CUDA 集成。这是我的 .cpp 文件中的嵌套 for 循环。

```
 for (int i=0; i<NumberOfFeatures; i++)
  {
    // Compute integral image.
    cvIntegral(mFeatureImgs[i], mFirstOrderIIs[i]);

    for (int j=0; j<NumberOfFeatures; j++)
    {
      // Compute product feature image.
      cvMul(mFeatureImgs[i], mFeatureImgs[j], mWorker);

      // Compute integral image.
      cvIntegral(mWorker, mSecondOrderIIs[i][j]);
    }
  } 
```

我对 CUDA 比较陌生，所以我的问题是，有人可以向我展示一个示例，说明我将如何使用 CUDA 使这个嵌套的 for 循环运行得更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:41:57.397

正如 sgar91 所指出的，OpenCV 包括一个 GPU 模块，如下所述：

[http://opencv.willowgarage.com/wiki/OpenCV_GPU](http://opencv.willowgarage.com/wiki/OpenCV_GPU)

该 wiki 还建议如何在 Yahoo 的 OpenCV 帮助论坛上询问与 GPU 相关的问题。

有一个gpu加速的图像积分功能。如果您环顾四周，您可能还会发现 cvMul 的等价物。

您不能在非 GPU 代码和 GPU 版本中使用完全相同的数据类型。看看我之前发布的 wiki 页面上给出的“简短示例”示例。您将看到您需要执行以下操作来将现有数据传输到可由 GPU 操作的数据结构：

```
 cv::gpu::GpuMat dst, src;  // this is defining variables that can be accessed by the GPU
    src.upload(src_host);      // this is loading the src (GPU variable) with the image data

    cv::gpu::threshold(src, dst, 128.0, 255.0, CV_THRESH_BINARY);  //this is causing the GPU to act 
```

您将需要做一些类似的事情，例如：

```
 cv::gpu::GpuMat dst, src;
    src.upload(src_data);

    cv::gpu::integral(src, dst); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:01:00.753

cv_integral 基本上总结了两个维度上的像素值——这只能通过矩阵运算来完成。因此，如果您愿意，也可以尝试使用 arrayfire。我为您创建了一个如何使用矩阵进行图像处理的小示例：

```
// computes integral image
af::array cv_integral(af::array img) {

  // create an integral image of size + 1
  int w = img.dims(0), h = img.dims(1);
  af::array integral = af::zeros(w + 1, h + 1, af::f32);

  integral(af::seq(1,w), af::seq(1,h)) = img;

  // compute inclusive prefix sums along both dimensions
   integral = af::accum(integral, 0);
   integral = af::accum(integral, 1);

   std::cout << integral << "\n";

   return integral;
}

void af_test()
{
 int w = 6, h = 5; // image size
 float img_host[] = {5,2,3,4,1,7,
                    1,5,4,2,3,4,
                    2,2,1,3,4,45,
                    3,5,6,4,5,2,
                    4,1,3,2,6,9};

  //! create a GPU image (matrix) from the host data
  //! NOTE: column-major order!!
  af::array img(w, h, img_host, af::afHost);

   //! create an image from random data
   af::array img2 = af::randu(w, h) * 10;
   // compute integral images
   af::array integral = cv_integral(img);
   // elementwise product of the images
   af::array res = integral * img2;
   //! compute integral image
   res = cv_integral(res);
   af::eval(res);
   std::cout << res << "\n";
} 
```

# jquery - 在可调整大小和可拖动之间设置 jQuery 事件切换

> ID：12548788
> 
> 赞同：0
> 
> 时间：2012-09-23T00:31:41.237
> 
> 标签：jquery, jquery-ui, jquery-ui-resizable

我的屏幕上有一个 div 框。我希望用户可以随时调整 jquery 框的大小，并同时取消 jquery 可拖动事件，反之亦然。我正在为可拖动部分使用一个插件，当我调整框的大小时它会出现故障，因此解决方案是在我调整它的大小时取消可拖动事件。我在下面尝试了这段代码，但它不起作用，我知道逻辑不正确。我的问题是我将如何解决这个问题以使其工作？

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">
</script>

<script src="js/easing.js" ></script>
<script src="js/animadrag.js" ></script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs
/jqueryui/1.7.1/themes/blitzer/jquery-ui.css">

<div class="body">
    <div class="move"></div>
</div>

<script type="text/javascript" >

$('.move').resizable();     

$('.move').on('hover',function (event) {
//something, although I don't know what, should be put here to cancel resizable
    $('.move').animaDrag({ 
                speed: 150, 
                interval: 120, 
                easing: null, 
                cursor: 'move', 
                boundary: '.body',
                grip: null,  
                overlay: true           
});     

</script> 
```

这是有效的 jsbin 示例。[http://jsbin.com/obovof/2/edit](http://jsbin.com/obovof/2/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:10:30.970

我不明白为什么要在调整大小期间禁用可拖动。从技术上讲，用户将无法在调整大小期间拖动元素。无论如何，如果你使用 jqueryui 方法可拖动而不是 animaDrag: 你可以这样做：

```
$('.move').draggable().resizable({
    start: function(e, ui) {$(this).draggable( "disable" )},
    stop: function(e, ui) {$(this).draggable( "enable" )}
}); 
```

# objective-c - xcode 4.5 是否更改了 sortedArrayUsingComparator + 块？

> ID：12548789
> 
> 赞同：2
> 
> 时间：2012-09-23T00:31:45.223
> 
> 标签：objective-c, objective-c-blocks

刚刚将 xcode 更新到 4.5，我在我的一个 iOS 应用程序中收到了一个我以前没有收到的错误。更新前没有出现问题。

基本上，我有一个需要排序的数组，基于其他一些不相关的测试..

```
NSArray *sortedArray = [arrayFiles sortedArrayUsingComparator:^(id a, id b) {
    NSString *first = [(PPFile*)a name];
    NSString *second = [(PPFile*)b name];

    if ([a isFileAvailableForRead] && ![b isFileAvailableForRead]) {

        return  NSOrderedAscending;
    }else if(![a isFileAvailableForRead] && [b isFileAvailableForRead]) {

        return  NSOrderedDescending;
    }

    return [first compare:second];

}]; 
```

错误出现在块的最后一次返回上：

```
 Return type 'NSComparisonResult' (aka 'enum NSComparisonResult') must match previous type 'NSInteger' (aka 'int') when block literal has unspecified explicit return type 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T00:48:05.050

您忘记了返回值类型：

```
NSArray *sortedArray = [arrayFiles sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    < your code>
}]; 
```

# c# - 如何从寻找上午/下午变为寻找秒

> ID：12548792
> 
> 赞同：-1
> 
> 时间：2012-09-23T00:31:55.920
> 
> 标签：c#, regex

在 RegExLib 站点中找到此日期时间正则表达式 -> [http://regexlib.com/REDetails.aspx?regexp_id=361](http://regexlib.com/REDetails.aspx?regexp_id=361)

```
 string pattern = @"(((((0[13578])|([13578])|(1[02]))[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9])|(3[01])))|((([469])|(11))[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9])|(30)))|((02|2)[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9]))))[\-\/\s]?\d{4})(\s(((0[1-9])|([1-9])|(1[0-2]))\:([0-5][0-9])((\s)|(\:([0-5][0-9])\s))([AM|PM|am|pm]{2,2})))?";
    var match = Regex.Match("test 123 11/30/2003 10:12:24 am", pattern, RegexOptions.IgnoreCase); 
```

我正在寻找的日期时间格式是 m/d/yyyy hh:mm:ss

以上查找 m/d/yyyy hh:mm am|pm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:23:23.953

一般来说，它应该类似于以下内容。

```
(0?[1-9]|1[012])        // month
[\s\/-]                 // delimiter - space, fwd. slash or dash
(0?[1-9]|[12]\d|3[01])  // day
[\s\/-]                 // delimiter - space, fwd. slash or dash
\d{4}                   // year
\s                      // delimiter - space
(0?\d|1\d|2[0-3])       // hours
\:                      // delimiter - colon
(0?\d|[1-5]\d)          // minutes
\:                      // delimiter - colon
(0?\d|[1-5]\d)          // seconds 
```

如果您不想将 0、1、2 等数字用于单个数字，请删除零旁边的问号，以便它们需要前面的零。此外，您应该在下一步中验证日期以确保它存在。例如，31.02.2012 不应该通过。您可能需要一个结束规则，例如对空格、punc 的积极前瞻。标记，词尾等，以避免在**:90**或**:231**时验证秒数。

无论如何，我没有使用 c#，所以我不确定如何正确包装它，但我希望这会有所帮助。

**编辑 1：**缩短了正则表达式 - 所有的出现都`[0-9]`变成了`\d`
**编辑 2：**这是需要在单个数字前面加上零的版本：

```
(0[1-9]|1[012])        // month
[\s\/-]                // delimiter - space, fwd. slash or dash
(0[1-9]|[12]\d|3[01])  // day
[\s\/-]                // delimiter - space, fwd. slash or dash
\d{4}                  // year
\s                     // delimiter - space
([01]\d|2[0-3])        // hours
\:                     // delimiter - colon
[0-5]\d                // minutes
\:                     // delimiter - colon
[0-5]\d                // seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:51:29.780

[使用RegexBuddy](http://www.regexbuddy.com)的两分钟工作给了我一个解决方案：

```
string pattern = @"(((((0[13578])|([13578])|(1[02]))[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9])|(3[01])))|((([469])|(11))[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9])|(30)))|((02|2)[\-\/\s]?((0[1-9])|([1-9])|([1-2][0-9]))))[\-\/\s]?\d{4})(\s(((0[1-9])|([1-9])|([0-2][0-3]))\:([0-5][0-9])((\s)|(\:([0-5][0-9])))))"; 
```

这与`11/30/2003 10:12:24`您的测试表达式匹配。它也匹配`11/30/2003 23:12:24`和`11/30/2003 00:00:01`

# python - Python刮美汤——输出到excel

> ID：12548793
> 
> 赞同：2
> 
> 时间：2012-09-23T00:32:06.940
> 
> 标签：python, screen-scraping, beautifulsoup

我想写一个博客，让我们以此为例...www.forbes.com/sites/zillow 并使用以下输出在所有页面上抓取它的内容[如果可能的话，在 csv 中]

```
link = http://www.forbes.com/sites/zillow/2012/09/14/underwater-and-under-40-a-list-of-the-top-u-s-metros/
title = Underwater and Under 40: A List of the Top U.S. Metros
inlinks = #list the links in the article
picture = #list eider the number of pictures or their links
wordcount = #if this is possible
Views = #in the html of the page there is a span div tag with the number of views 
```

任何帮助将非常感激

这是我到目前为止...更新

```
import urllib2
from bs4 import BeautifulSoup
import datetime
import re

now = datetime.datetime.now()

# Create CSV
f = open('data.csv', 'w')

# Make the header rows.
f.write("date" + "," + "title" + "," + "link" + "," + "img" + "," + "inlinks" + "\n")

# URL
url = 'http://blogs.forbes.com/zillow/'
page = urllib2.urlopen(url)
soup = BeautifulSoup(page)

events = soup.findAll('div', attrs={'class': 'post'})
for x in events:

# What event is being scraped
print "Getting data for " + x.find('').text

# Information scrape
date = x.find('span', attrs={'class': 'views'}) 
link = x.find('a')
headline = x.find('h2')
description = x.find('div', attrs={'class': 'entry'})
image = x.find('img')

# Extract that information in strings
date2 = str(date)
link2 = str(link)
headline2 = str(headline)
image2 = str(image)

# outside the loop
description2 = str(description)

#  replace commas with dashes so we don't screw up the CSV.
date3 = date2.replace(",", " -") 
link3 = link2.replace(",", " -")
headline3 = headline2.replace(",", " -")
description3 = description2.replace(",", " -")
image3 = image2.replace(",", " -")

# adjust the width of all images to 300 pixels.
image4 = re.sub(r'width="\d\d\d"', 'width="300"', image3)
image5 = image4.replace('None', "")

# Extra formatting needed for dates to get rid of em tags and unnecessary formatting
date4 = date3.replace('<span>', "")
date5 = date4.replace('</span>', "")
date6 = date5.replace('- ', "")
date7 = date6.replace("at ", "")

headline4 = headline3.replace('<h2 class', "")
headline5 = headline4.replace('</h2>', "")
headline6 = headline5.replace('- ', "")
headline7 = headline6.replace("at ", "")

date8 = date7.replace('[<em class="item-updated badge">Updated:', str(now.strftime("%Y-%m-%d %H:%M")))

# Extra formatting is also need for the description to get rid of p tags and new line returns
description4 = description3.replace('[<p>', "")
description5 = description4.replace('</p>]', "")
description6 = description5.replace('\n', " ")
description7 = description6.replace('[]', "")

link4= link3.replace('<a href', "")
link5 = link4.replace('</a>', "")
link6 = link5.replace('h2', " ")
link7 = link6.replace('=', "")

# Write the information to the file. The HTML code is based on coding recognized by TimelineSetter
f.write(date8 + "," + description7 + "," + link3 + "," + headline3 + '</h2>' + image5 + "\n")

f.close() 
```

# .net - Parallel.For 在 VB.NET 中给出数组边界之外的索引

> ID：12548802
> 
> 赞同：1
> 
> 时间：2012-09-23T00:33:59.413
> 
> 标签：.net, vb.net

我有这段代码：

```
noObjs = 0
Dim oName As String
Dim i As Integer
Dim tripleIndex As Integer = 0
Do While sr.Peek() <> -1
   readCSV = sr.ReadLine.Split(sepChar(0))
   If readCSV.Length >= 3 Then
       oName = readCSV(0)
       For i = noObjs - 1 To 0 Step -1
           If oName = objNames(i) Then
               obIndOfTriple(tripleIndex) = i
               Exit For
           End If
       Next i
       If i = -1 Then
           objNames(noObjs) = oName
           obIndOfTriple(tripleIndex) = noObjs
           noObjs += 1
       End If
   End If
   tripleIndex += 1
Loop
sr.Close() 
```

我正在尝试这样并行化：

```
noObjs = 0
Dim oName As String
Dim i As Integer
Dim tripleIndex As Integer = 0
Dim allData() As String = File.ReadAllLines(in_file)
Parallel.For(0, allData.Count, Sub(k)
                               readCSV = allData(k).Split(sepChar(0))
                               If readCSV.Length >= 3 Then
                                   oName = readCSV(0)
                                   For i = noObjs - 1 To 0 Step -1
                                       If oName = objNames(i) Then
                                           obIndOfTriple(tripleIndex) = i
                                           Exit For
                                       End If
                                   Next i
                                   If i = -1 Then
                                       objNames(noObjs) = oName
                                       obIndOfTriple(tripleIndex) = noObjs
                                       noObjs += 1
                                   End If
                               End If
                               tripleIndex += 1
                               End Sub) 
```

但是，我在以下位置得到一个“索引超出了数组的范围”：

```
If oName = objNames(i) Then 
```

我还应该在这里提到 objNames() 和 obIndOfTriple() 是全局声明的（具有固定大小）。通过一些搜索，我了解到这与线程安全有关，尽管我仍然是并行性的新手。谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:15:35.833

看来您正在寻找唯一的字符串。

而不是蛮力

```
For i = noObjs - 1 To 0 Step -1
   If oName = objNames(i) Then
   obIndOfTriple(tripleIndex) = i
Exit For 
```

尝试

```
Dictionary<String,Int32> 
```

和 ContainsKey

字典有快速查找

[这个页面有一个并行锁定的例子](http://msdn.microsoft.com/en-us/library/ff963547.aspx)。但不确定它是您需要的锁类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T02:42:34.223

问题的症结在于您有多个线程访问共享资源而没有同步对这些资源的访问，从而引入了竞争条件。

例如，考虑`noObjs`与 相关`objNames`。我怀疑你想`noObjs`总是反映实际项目的数量`objNames`。现在假设您有两个同时到达`objNames(noObjs) = oName`的线程，当时`noObjs`是 4 个。一个线程将写入一个值`objNames(4)`，然后另一个线程将立即覆盖它。第一个线程还没有到达要增加的行`noObjs`！此外，当两个线程都执行时`noObjs += 1`，`noObjs`将为 6，但您将没有任何内容存储在`noObjs(5)`. 这不是您所看到的异常的确切情况，但它是实施脆弱性的另一个症状。

在每个线程执行的代码中，您要确保每个线程都有自己的变量空间可以使用。你*可以*通过拥有`objNames`和`objIndOfTriple`成为二维数组来做到这一点。第一个维度是循环迭代，`k`第二个维度是该迭代的数组索引。同样，`noObjs`将是一个数组，并且是与循环索引关联`noObjs(k)`的数组中的元素数。`objNames``k`

从技术上讲，这应该可行，但是您需要`objNames`在执行之后将一堆小数组合并为一个大数组`Parallel.For`- 基本上完成了 map-reduce 模式的实现。

如果你确实实现了所有这些，你可能想看看性能。您正在对单行输入进行并行处理，并且从代码来看，您似乎没有为每一行做很多工作。换句话说，将它逐行并行化，实际上可能会比仅按顺序执行它时增加更多开销。如果你有 1000 行，你实际上要求同时运行 1000 个小任务，因此管理这些任务比实际执行它们要多。现在，TPL 可能会根据其认为最好的方式来决定是否真正并行执行某些操作，以减轻对性能的影响。

# wxpython - WxPanel 父参数

> ID：12548805
> 
> 赞同：0
> 
> 时间：2012-09-23T00:34:28.893
> 
> 标签：wxpython

我正在创建一个 Tabpanel1，Tabpanel2，它将成为 Notebook 的一部分。在该 TabPanel1 中，还有 3 个面板。panel1a，panel1b，panel1c

panel1a 的父 id 参数应该是什么。它应该是 TabPanel1 吗？

代码.py

```
import random
import wx

########################################################################

class TabPanel1(wx.Panel):
    #----------------------------------------------------------------------
    def __init__(self, parent):
        """"""
        wx.Panel.__init__(self, parent=parent)

        colors = ["red", "blue", "gray", "yellow", "green"]
        self.SetBackgroundColour(random.choice(colors))

    panel1 = wx.Panel(self,size=(400,100))
    panel1.SetBackgroundColour('brown')

    panel1gs = wx.GridSizer(2,2,1,2)

    panel1gs.AddMany( [ (wx.StaticText(panel1,label='FirstLabel'),0,wx.EXPAND),
            (wx.StaticText(panel1,label='SecondLabel'),0,wx.EXPAND),
            (wx.StaticText(panel1,label='ThirdLabel'),0,wx.EXPAND),
            (wx.StaticText(panel1,label='FourthLabel'),0,wx.EXPAND)
            ] )

    panel1.SetSizer(panel1gs)

    panel2 = wx.Panel(self,size=(400,100))
    panel2.SetBackgroundColour('#4f5042')

    panel3 = wx.Panel(self,size=(400,100))
    panel3.SetBackgroundColour('#4f5042')

        btn = wx.Button(self, label="Press Me")
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(btn, 0, wx.ALL, 5)
    sizer.Add(panel1, 0, wx.ALL, 5)
    sizer.Add(panel2, 0, wx.ALL, 5)
    sizer.Add(panel3, 0, wx.ALL, 5)

        self.SetSizer(sizer)

class TabPanel2(wx.Panel):
    #----------------------------------------------------------------------
    def __init__(self, parent):
        """"""
        wx.Panel.__init__(self, parent=parent)

        colors = ["red", "blue", "gray", "yellow", "green"]
        self.SetBackgroundColour(random.choice(colors))

        btn = wx.Button(self, label="Press Me")
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(btn, 0, wx.ALL, 10)

        self.SetSizer(sizer)

########################################################################
class DemoFrame(wx.Frame):
    """
    Frame that holds all other widgets
    """

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""        
        wx.Frame.__init__(self, None, wx.ID_ANY, 
                          "Notebook Tutorial",
                          size=(800,600)
                          )
        panel = wx.Panel(self)

        notebook = wx.Notebook(panel)
        tabOne = TabPanel1(notebook)
        notebook.AddPage(tabOne, "Tab 1")

        tabTwo = TabPanel2(notebook)
        notebook.AddPage(tabTwo, "Tab 2")

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(notebook, 1, wx.ALL|wx.EXPAND, 5)
        panel.SetSizer(sizer)
        self.Layout()

        self.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = wx.App(False)
    frame = DemoFrame()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T02:50:32.203

简单地说，`parent`对象的 是它将出现在里面的对象。此外，当父级被销毁时，子级将被销毁，在隐藏时隐藏，等等。

因此，如果`panel1a`、`panel1b`和`panel1c`都出现*在 内部* `panel1`，那么`panel1`对于父母来说是最好的选择，因为它最接近那些孩子。`panel1`，反过来，在里面`TabPanel1`，所以它的父母是`TabPanel1`。理解？

`TabPanel1.__init__()`顺便说一句，您的方法中似乎存在一些缩进错误。希望这只是剪切和粘贴到 SO 中的错误。

# html - ms访问解析html文件获取数据

> ID：12548807
> 
> 赞同：1
> 
> 时间：2012-09-23T00:34:34.577
> 
> 标签：html, ms-access, vba

我已经编写了必要的代码来解析一个目录并找到所有的 html 文件。但是，我需要解析每个文件以获取必要的信息。我需要提取每个故事的故事标题、作者、类别、章节数、来源和摘要，并将它们添加到数据库中的正确字段中。每个 html 文件都以相同的方式设置。如果可能的话，我也想为每个故事计算字数。字数将是每个 CHAPTER TEXT 区域中所有单词的总和。下面是每个 html 文件的编写方式的概要。请让我知道实现这一目标的最佳方法。

```
<html>
<head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
    <meta name="author" content="AUTHOR">
    <title>AUTHOR: TITLE</title>
</head>
<body>
    <br/><br/>
    <div style="text-align:center">
        <h1>TITLE</h1>
    </div>
    <b>Story:</b> TITLE<br>
    <b>Storylink:</b> <a href="URL">URL
    <b>Category:</b> CATEGORY<br>
    <b>Author:</b> AUTHOR<br/>
    <b>Last updated:</b> 10/16/2011<br/>
    <b>Status:</b> STATUS<br/>
    <b>Content:</b> Chapter 1 to 16 of 16 chapters<br/>
    <b>Source:</b> SOURCE<br><br>
    <b>Summary:</b> SUMMARY

    <!--CHAPTERAREA START-->
        <h2 class=chapterffdl>*Chapter 1*: Chapter 1</h2>
        CHAPTER TEXT CHAPTER TEXT CHAPTER TEXT

        <h2 class=chapterffdl>*Chapter 2*: Chapter 2</h2>
        CHAPTER TEXT CHAPTER TEXT CHAPTER TEXT

        ...

    <!--CHAPTERAREA STOP-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:11:17.610

一个开始：

```
Sub ParseHTML()
''Requires that you add a reference to the
''Windows Script Host Object Model
''Use Tools->References

Dim fs As New FileSystemObject
Dim fl As Folder
Dim f As File
Dim ts As TextStream
Dim sList As Variant
Dim rs As Recordset

''s="create table stories (story text,author text,category text,content text,source text,summary text)
''CurrentDb.Execute S

Set rs = CurrentDb.OpenRecordset("stories")

sList = Split("story,author,category,content,source,summary", ",")

Set fl = fs.GetFolder("Z:\docs\")
For Each f In fl.Files
    If f.Type Like "*HTML*" Then
        Debug.Print f.Name
        Set ts = fs.OpenTextFile(f.Path, ForReading)
        Do While Not ts.AtEndOfStream
            a = ts.ReadLine
            For i = 0 To UBound(sList)
                If Left(Trim(a), Len(sList(i)) + 4) = "<b>" & sList(i) & ":"
                    If Trim(a) Like "<b>Story:*" Then
                        rs.AddNew
                    End If
                    rs(sList(i)) = Trim(a)
                    If Trim(a) Like "<b>Summary:*" Then
                        rs.Update
                        Exit Do
                    End If
                End If
            Next
        Loop
    End If
Next

End Sub 
```

# excel - Excel VBA 将 ShapeEffect 应用于图表系列

> ID：12548814
> 
> 赞同：0
> 
> 时间：2012-09-23T00:36:42.670
> 
> 标签：excel, excel-2007, vba

我有我编写的 VBA 代码，它创建了一个 Excel Column Cluster 图表，并且我的所有代码都有效，但是我对图表的外观不满意，所以我试图对其进行修饰。该图表是自动报告的一部分，因此我只想能够安排我的宏运行，而不必手动更改数据系列。因为 Excel 2007 将图表的属性和方法设置为只读，所以在您录制宏时不会填充它们。

因此，我正在尝试做与以下帖子类似的事情 [如何使用 VBA 将 ShapeStyle 应用于 Excel 中的特定图表系列？](https://stackoverflow.com/questions/12527336/how-to-apply-shapestyle-to-a-specific-series-of-a-chart-in-excel-using-vba)

但是我正在尝试将形状效果应用于图表系列。手动获得形状效果，我希望您必须选择图表中的系列，然后选择图表工具 > 格式 > 形状效果 > 预设 > 预设 2。这使得数据系列显示为 3D，没有 3D 图表的麻烦。此外，我不能使用 3D 图表，因为我在第二次访问时有第四个数据系列，而您不能使用 3D 柱状图来执行此操作。

任何帮助将不胜感激。

更新

我回去了，我在 2010 年查看了这个，看看是否有任何改变。您仍然不能直接将预设应用于图表，但记录宏确实会尝试记录某些内容。

如果您选择一个系列并应用预设，然后查看 3-D 选项，您可以看到设置了哪些值。从那里只需在您的 VBA 中设置它们。

以下是 3-D 选项的类

```
 Selection.Format.Line
 Selection.Format.Fill
 Selection.Format.Shadow
 Selection.Format.Glow
 Selection.Format.ThreeD 
```

属性比较多，就不一一列举了。我确实发现，如果你录制一个宏并设置一个属性，它就会被录制下来，这样可以帮助你更接近应用所需的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:04:28.147

您可以尝试以下尝试之一：

```
Chart.ApplyLayout(1) 
```

使用您之前定义的 Diagrammlayoutpreset。

或者使用这个：

```
with Chart.SeriesCollection(1).Format.ThreeD
     .visible = true  
     .depth = 50
end with 
```

在 Excel-Help 中查找 ThreeDFormat-Object 以获得所有可能的设置。这不是 3D 样式图表，而是 3D 样式系列；）要获得与预设 2 相同的结果，只需在预设 2 系列的格式对话框中查找格式更改。

# ios - UICollectionViewController 未从 NIB 有效加载

> ID：12548816
> 
> 赞同：6
> 
> 时间：2012-09-23T00:37:24.930
> 
> 标签：ios, ios6, uicollectionview

iOS 6.0，在 iPhone 5 上测试

我正在`UICollectionViewController`从笔尖加载一个子类。当我使用该`awakeFromNib`方法时，它声称已加载视图。调用`collectionView`返回`nil`。

因此，我在注册要从中加载我的单元格的笔尖时遇到问题。

```
- (void)awakeFromNib {
  if ([self isViewLoaded])
    NSLog(@"[%@ %@] registered with %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd),
          self.collectionView);

  UINib *nib = [UINib nibWithNibName:@"MyCollectionCell" bundle:nil];
  [self.collectionView registerNib:nib forCellWithReuseIdentifier:NIB_ID];
} 
```

上面的输出：

```
2012-09-22 19:21:49.129 myApp[7182:907] [MyCollectionViewController awakeFromNib] registered with (null) 
```

此外，`loadView`并且`viewDidLoad`不被调用（从笔尖加载时预期）。

尝试加载单元格时出现异常失败。

当前的解决方法，在以下位置冗余注册 nib `collectionView:cellForItemAtIndexPath:`：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
  UINib *nib = [UINib nibWithNibName:@"MyCollectionCell" bundle:nil];
  [collectionView registerNib:nib forCellWithReuseIdentifier:NIB_ID]; 
```

**问题：**你遇到过这个吗？你看到我的方式的错误吗？这是一个已知的错误？

* * *

**编辑**：附加信息……</p>

闯入 awakeFromNib，`collectionView`似乎无法访问

```
(lldb) po [self view]
(UIView *) $1 = 0x1f158400 <UICollectionView: 0x1f158400; frame = (0 0; 320 548); clipsToBounds = YES; opaque = NO; autoresize = W+H; gestureRecognizers = <NSArray: 0x1ed8fcf0>; layer = <CALayer: 0x1ed8f790>; contentOffset: {0, 0}> collection view layout: <UICollectionViewFlowLayout: 0x1ed919a0>
(lldb) po [self collectionView]
(UICollectionView *) $2 = 0x00000000 <nil> 
```

修改`wakeFromNib`使用`view`而不是`collectionView`是一个更好的解决方法：

```
 [(UICollectionView *)self.view registerNib:nib forCellWithReuseIdentifier:NIB_ID]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-20T11:21:28.963

从 nib 加载视图控制器并不是为了加载视图。iOS 延迟加载方案只会在尝试访问视图时加载视图。这是为了限制没有放在屏幕上的东西的内存消耗。

当您使用“self.view”时，“view”属性的 UIViewController 基类访问器将加载未加载的视图。（然后您的 viewDidLoad 将被调用。）

如果你为你的 viewController 提供了一个 viewDidLoad 方法，你可以在那里注册你的 UINib。

# linux - 任何 dotfile 的类似 ssh-agent 的行为

> ID：12548818
> 
> 赞同：2
> 
> 时间：2012-09-23T00:37:50.497
> 
> 标签：linux, ssh, dotfiles

我正在尝试构建（或查找它是否存在）一些东西，它可以让我将我的点文件带到我访问的服务器，就像 ssh-agent 为我的密钥所做的那样。

我花了很多时间在 EC2 上工作，当我启动一个新实例时，我不喜欢没有我的点文件（主要是 .vimrc、.gitconfig 和我的别名）。

我将所有 dotfiles 都保存在 git 下并且是公开可用的，但这还不足以解决问题，原因如下：

1.  我通过 ssh 连接到无法安装 git 且无法轻松访问 Internet 的生产主机。
2.  我不控制我们运行的 AMI，因此我无法将我的点文件放入其中，而且我通常共享 ubuntu 或 root 用户，并且很少在主机上拥有专用的用户名（所以我不能只是克隆并将我的点文件留在那里）。

现在我很高兴将其构建为仅使用一个级别的 ssh。那是 A -> B -> C （如果只有 B 可以访问点文件并且 C 丢失它们就可以了）。

我正在考虑类似的事情：

`ssh -t -R 1234:localhost:1234 user@server 'export USE_DOTFILES_AGENT=1 ; exec $SHELL'`

在我的本地主机上为 1234 上的点文件提供服务，所以我的问题是：

使删除端的程序从套接字读取其点文件的最佳方法是什么（很高兴将任何必要的东西放在另一端）。

**编辑：**虽然 apmasell 的回答很有帮助，但我并没有想到这样的高科技解决方案。可能更多的东西沿着 wget 从那个端口到 /tmp/_vimrc 然后让 vim 以某种方式加载它（通过运行`alias vim=vim <flag for where to find vimrc>`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:06:43.573

SSH 对任何文件都没有什么特别的作用。SSH 代理能够从该点文件工作，因为`ssh`二进制知道尝试通过设置的命名管道打开到代理的连接，`$SSH_AUTH_SOCK`并且因为 SSH 客户端和服务器可以同意代理该请求。

简单地说，其他没有内置任何逻辑来执行此操作的程序不能。他们没有办法知道他们不应该`open`对文件制定标准。

如果您真的非常想要，您可以创建一个`$LD_PRELOAD`'ed 库来覆盖`open`以检查文件是否可用并尝试模拟对文件的访问，就像 ALSA 可以假装为不可用的程序提供 OSS 支持一样通过捕获他们打开的尝试`/dev/dsp`然后将请求转换到 ALSA 音频层来了解 ALSA。

编写这样一段代码非常棘手，因为它需要正确模拟本地系统的行为。例如，当程序写入时你会做什么？如果连接消失了怎么办？当你 fork 一个守护进程时会发生什么？根据设计，可能会有很多延迟。

# c# - VS 2010 调试器有枚举问题？

> ID：12548822
> 
> 赞同：0
> 
> 时间：2012-09-23T00:38:24.193
> 
> 标签：c#, visual-studio-2010, visual-studio, enums

我正在考虑为我的权限类型创建一个枚举，而不是将它们全部存储为 db 中的真值或假值。

```
class Program
{
    static void Main(string[] args)
    {
        Test addEdit = Test.AddEdit;
        bool hasEdit = addEdit.HasFlag(Test.Edit);
        bool hasAdd = addEdit.HasFlag(Test.Add);
        bool hasDelete = addEdit.HasFlag(Test.Delete);
        Console.WriteLine(hasEdit);
        Console.WriteLine(hasAdd);
        Console.WriteLine(hasDelete);
        Console.Read();
    }
}

   [Flags]
    public enum Test
    {
        Add = 0,
        Edit = 1,
        Delete = 2,
        AddEdit = Add | Edit
    } 
```

所以我做了这个。我发现的有趣的事情是 addEdit 变量在通过 VS 调试器查看时仅显示“编辑”的值。起初我认为它没有存储两个值。

我使用了 hasFlag 方法，果然它知道这两个值。

那么它是一个错误还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T00:43:44.717

`AddEdit== Edit == 1`. 所以调试器不知道你是想把 1 转换成“Edit”还是“AddEdit”。

很可能你想要

```
[Flags] 
public enum Test 
{ 
    None = 0,
    Add = 1, 
    Edit = 2, 
    Delete = 4, 
    AddEdit = Add | Edit 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T01:10:13.920

[MSDN](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)提到枚举中的所有值都`[Flags]`应该是 2 的幂（即`1,2,4,8.....`）。

如果您有`'None'`枚举，则可以分配 0。

检查[[Flags]](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)文档中标题为“ **FlagsAttribute 和 Enum 指南”**的部分。

当您将一个值与零 ( `0`) 进行或运算时，结果将再次是相同的值。因此，在您的情况下， ' `AddEdit`' 将导致 '1' 代表 ' ' 枚举`Edit`中的 ' '。`Test`

# ios - xCode 4.5 git merge 无法提交或给出错误

> ID：12548825
> 
> 赞同：6
> 
> 时间：2012-09-23T00:39:01.887
> 
> 标签：ios, xcode, git, merge, xcode4.5

我有两个分支，我试图在 xCode 4.5 中合并。在我解决两个冲突的文件并按下“合并”按钮后，合并屏幕消失，没有错误出现，看起来成功了。但与我之前使用 xCode 4.4 的经验不同，实际上没有任何承诺。如果我尝试手动对所有更改的文件进行提交，则会出现错误提示“致命：在合并期间无法进行部分提交”。没有迹象表明如何在 xCode 中进行。

这是我从命令行执行 git status 得到的结果。两个“未暂存以供提交”文件是我在 xCode 中解决的冲突文件。我知道我可以尝试使用不同的工具进行合并，但我喜欢 xCode 实用程序，如果它不再可靠地工作，我会有点沮丧。其他人看到并解决了这个问题吗？

```
# On branch ios6
# Changes to be committed:
#
#   modified:   Flurry/libFlurry.a
#   modified:   Network Commuting/Constants.h
#   modified:   Network Commuting/LegMapViewController.m
#   modified:   Network Commuting/Logging.h
#   modified:   Network Commuting/Nimbler Caltrain-Info.plist
#   modified:   Network Commuting/Plan.m
#   modified:   Network Commuting/PlanStore.m
#   modified:   Network Commuting/RouteDetailsViewController.h
#   modified:   Network Commuting/RouteDetailsViewController.m
#   modified:   Network Commuting/RouteOptionsViewController.m
#   modified:   Network Commuting/SettingInfoViewController.m
#   modified:   Network Commuting/TEXTConstant.h
#   renamed:    Network Commuting/TestFlightSDK1/TestFlight.h -> Network Commuting/TestFlightSDK1-1/TestFlight.h
#   new file:   Network Commuting/TestFlightSDK1-1/libTestFlight.a
#   deleted:    Network Commuting/TestFlightSDK1/README.txt
#   deleted:    Network Commuting/TestFlightSDK1/libTestFlight.a
#   deleted:    Network Commuting/TestFlightSDK1/release_notes.txt
#   modified:   Network Commuting/ToFromViewController.h
#   modified:   Network Commuting/ToFromViewController.m
#   modified:   Network Commuting/TransitCalendar.m
#   modified:   Network Commuting/nc_AppDelegate.h
#   modified:   Network Commuting/nc_AppDelegate.m
#   modified:   Network CommutingTests/Network_CommutingTests.h
#   modified:   Network CommutingTests/Network_CommutingTests.m
#   modified:   Nimbler Caltrain.xcodeproj/project.pbxproj
#   modified:   Nimbler Caltrain.xcodeproj/xcuserdata/apprikamac1.xcuserdatad/xcschemes/Nimbler CaltrainTests.xcscheme
#
# Unmerged paths:
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#   deleted by us:      Network Commuting/DateTimeViewController.xib
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   Network Commuting/ToFromViewController.m
#   modified:   Nimbler Caltrain.xcodeproj/project.pbxproj
# 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T13:17:15.890

我一直都知道，因为有 3 个人在编写应用程序。这似乎与各种人混合添加和删除文件有关，但坦率地说不确定。也许 git guru 会在这里插话，但这就是我解决问题的方法。

首先在 Xcode 中关闭项目并退出 Xcode，然后在终端导航到项目的根目录。为您必须更正的任何冲突文件运行“git add”（谁为此想出了“add”？？？）。

运行 'git status' 并确保一切正常。

现在是魔法咒语：`git commit -i -m "hoping and praying" .`- 魔法选项是`-i`- 有了它，提交总是成功（对我来说）。

现在您可以重新启动 Xcode 并重新打开项目。

# php - 如何添加body类

> ID：12548833
> 
> 赞同：0
> 
> 时间：2012-09-23T00:41:37.527
> 
> 标签：php, wordpress

我的 functions.php 文件中有以下代码。我想要做的是在我的简码 [模板] 中再添加一个属性（比方说 - “extraclass”）。属性的值应该是额外类的名称，我希望我的代码将这个类添加到 body 标记中。我知道 add_filter 函数，我尝试使用它但没有成功。

```
function templatefn($atts, $content = null) {
    extract(shortcode_atts(array(
        "content" => ""
    ), $atts));

    ob_start();
    get_template_part('content', $content);
    $ret = ob_get_contents();  
    ob_end_clean();  
    return $ret;   
}
add_shortcode('template', 'templatefn'); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:40:11.217

在您的模板中，如果您使用函数[body_class()](http://codex.wordpress.org/Function_Reference/body_class)为 body 元素提供不同的 css 类（基于您当前的条件样式页面），您应该能够[使用列出的示例对其进行过滤](http://codex.wordpress.org/Plugin_API/Filter_Reference/body_class)以实现您的结果。

# ruby-on-rails - 您如何找到在 Ruby on Rails 中定义 request.host 的位置？

> ID：12548834
> 
> 赞同：0
> 
> 时间：2012-09-23T00:41:37.590
> 
> 标签：ruby-on-rails

我正在尝试放入`request.host`一个模块，但它无法识别函数调用。我如何找出来自哪里`request.host`，以便我可以补课？

实用程序.rb：

```
module Util
  extend self

  def host
    request.host
  end
end 
```

`request.host`在我的 application.html 视图中运行可以正常工作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:38:10.257

`request.host`由“中间件”层（通常是机架）向下传递到控制器、视图和辅助模块。您不能期望从代码中的任何其他点访问它，除非您从其中之一传入它。

# django - Django - ModelForm 无效语法错误

> ID：12548835
> 
> 赞同：0
> 
> 时间：2012-09-23T00:42:08.233
> 
> 标签：django, django-forms

很简单。

这是我的个人资料模型：

```
class Profile(models.Model):
      owner = models.OneToOneField(User)
      slogan = models.TextField(null=True)
      twitter = models.CharField(max_length = 100,null=True)
      web_site = models.CharField(max_length=100,null=True)
      email = models.CharField(max_length = 100,null=True)

      def create_user(sender,instance,created,**kwargs):
          if created:
              Profile.objects.create(owner=instance)

          post_save.connect(create_user, sender=User)

      def __unicode__(self):
          return self.email 
```

和模型形式：

```
class profile_form(ModelForm):
      slogan   = forms.CharField(required=False,max_length=100,widget=forms.Textarea(attrs={'placeholder':'Site Sloganı','rows':'4',}))
      #title    = forms.CharField(required=False,max_length=20,widget=forms.TextInput(attrs={'placeholder': 'Site Başlığı',}))
      email    = forms.CharField(required=False,widget=forms.TextInput(attrs={'placeholder':'E-Mail Adresi',}))
      twitter  = forms.CharField(required=False,widget=forms.TextInput(attrs={'placeholder':'Twitter Adresi',}))
      web_site = forms.CharField(required=False,widget=forms.TextInput(attrs={'placeholder':'Web Siteniz',})

      class Meta:
          model = Profile 
```

当我尝试导入 blog.forms 时，它会在第 50 行抛出无效的语法错误，其中包括“class Meta”。

没有这样的。它刚刚显示。

谢谢你;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:09:16.883

在行

```
web_site = forms.CharField(required=False,widget=forms.TextInput(attrs={'placeholder':'Web Siteniz',}) 
```

它缺少右括号

`)`在末尾添加一个。

所以它会变成

```
web_site = forms.CharField(required=False,widget=forms.TextInput(attrs={'placeholder':'Web Siteniz',})) 
```

# php - 我有一个可以上传代码的 Apache + PHP 服务器。我可以使用 PHP 以外的语言进行服务器端编码吗？

> ID：12548838
> 
> 赞同：2
> 
> 时间：2012-09-23T00:43:12.877
> 
> 标签：php, javascript, apache, clojure, programming-languages

如果您的服务器仅支持 Apache，那么除了 PHP 之外，您还可以使用哪些服务器端脚本语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T00:53:03.170

If I understand your question correctly, you have a Apache + PHP server that you can upload code to and you can install Lisp etc on, but you can't reconfigure Apache?

The best answer would really be to talk to whoever controls your server and get them to enable the appropriate mods or mod_proxy-ing to whichever language or application you want.

But if this isn't an option, you could implement a [reverse proxy](http://en.wikipedia.org/wiki/Reverse_proxy) in PHP that passes all calls through to your Lisp application.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T00:54:42.180

Apache 通常在编译时支持*模块*。PHP 就是这样一个模块，通常在您的`apache.conf`文件中配置。如果您有权编辑您的 apache.conf，您可以编辑`include`系统上已经存在的其他模块，或者您添加到系统中的模块。

您可以添加的另一个模块的示例是`mod_wsgi`，允许您从`python`文件中提供服务。

您要搜索的是`apache modules`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T00:53:57.553

Apache supports a lot of languages besides PHP, you can check all of them here and how to get it: [http://projects.apache.org/indexes/language.html](http://projects.apache.org/indexes/language.html)

Most of these language can be supported at the same time, you can install them by using modules or scripts in cgi-bin-

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T00:51:46.213

The Apache feature you were describing before question edit runs PHP files via a module. Another commonly used apache module is CGI, which allows you to use any language, but it's discouraged because of performance and security.

You're better off using FastCGI (which isn't normal CGI) or similar. If you can't make any modifications to the apache config file, you're boned. No non-php auto-evaluating scripts in public_html.

# mysql - MySQL慢子查询

> ID：12548842
> 
> 赞同：1
> 
> 时间：2012-09-23T00:43:43.123
> 
> 标签：mysql, performance, subquery

我有一个支持票务系统。我正在添加部门部分，其中用户可以是多个部门的成员。

问题是我正在使用子查询来获取具有该用户的部门访问表中的部门 ID 的票证。

这是子查询：

```
t.department_id IN (SELECT utd.department_id FROM users_to_departments utd WHERE utd.user_id = :department_or_assigned_or_user_id AND utd.site_id = :site_id) 
```

这会减慢查询速度。一张包含 110,000 张票的表格大约需要 2 秒。子查询是原因。

我尝试将其转换为 LEFT JOIN，然后使用 HAVING utd.id IS NOT NULL，但速度更差。

我想知道是否可以将其转换为内部联接。

问题是我总是想获得由该用户创建的票，即使票现在在不同的部门。

目前在子查询之后使用以下内容：

```
OR (t.assigned_user_id = :department_or_assigned_or_user_id OR t.user_id = :department_or_assigned_or_user_id) 
```

所有正确的列都被索引，所以 MySQL 不做任何文件排序等。

users_to_departments 表只是 user_id 和 department_id。

任何帮助都是极好的。

这是我的完整查询。

```
SELECT 
t.* , 
u.pushover_key AS `owner_pushover_key`, 
u.name AS `owner_name`, 
u.id AS `owner_id`, 
u.email AS `owner_email`, 
u.phone_number AS `owner_phone`, 
u.email_notifications AS `owner_email_notifications`, 
u2.pushover_key AS `assigned_pushover_key`, 
u2.name AS `assigned_name`, 
u2.id AS `assigned_id`, 
u2.email AS `assigned_email`, 
u2.email_notifications AS `assigned_email_notifications`, 
u3.name AS `submitted_name`, 
u3.id AS `submitted_id`, 
u3.email AS `submitted_email`, 
u3.email_notifications AS `submitted_email_notifications`, 
tp.name AS `priority_name`, 
td.name AS `department_name`, 
ts.name AS `status_name`, 
ts.colour AS `status_colour`, 
ts.active AS `active`, 
pa.name AS `pop_account_name` 
FROM 
tickets t 
LEFT JOIN users u ON u.id = t.user_id 
LEFT JOIN users u2 ON u2.id = t.assigned_user_id 
LEFT JOIN users u3 ON u3.id = t.submitted_user_id 
LEFT JOIN ticket_priorities tp ON tp.id = t.priority_id 
LEFT JOIN ticket_departments td ON td.id = t.department_id 
LEFT JOIN ticket_status ts ON ts.id = t.state_id 
LEFT JOIN pop_accounts pa ON pa.id = t.pop_account_id 
WHERE   
1 = 1 
AND t.site_id = :site_id 
AND ( 
    t.department_id IN (SELECT utd.department_id FROM users_to_departments utd WHERE utd.user_id = :department_or_assigned_or_user_id AND utd.site_id = :site_id)
OR 
    (t.assigned_user_id = :department_or_assigned_or_user_id OR t.user_id = :department_or_assigned_or_user_id)
)
ORDER BY 
t.last_modified DESC 
LIMIT :limit OFFSET :offset 
```

这是 MySQL 解释结果的链接：http: [//michaeldale.com.au/images/explain.html](http://michaeldale.com.au/images/explain.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:13:33.403

`enter code here`如果您非常确定您的缓慢是由于引用的子查询，那么您的表**users_to_departments**似乎应该有一个基于**user_id** + **site_id**字段的索引。

此外，将 IN/NOT IN 或 EXISTS/NOT EXISTS 替换为 LEFT JOIN 并结合 NULL 或 NOT NULL（在 WHERE 子句上）对连接表的约束确实提高了 SQL Server 引擎的性能。

好吧，考虑到我对表格内容并不完全了解，我只会向您提出两个建议（我您只能使用选项 2 或将两者结合使用）：

1 - 我会将当前查询拆分为两个查询，并使用子句**UNION ALL**将它们连接到一个结果集中（通常我也使用子句**ALL**使任何重复项可见，因为它们通常代表设计不良的查询或数据库设计不足）

2 - 我会尝试用**LEFT JOIN替换****IN**子查询，以评估性能提升是否符合您的需要。请注意，由于子查询可能在 [ **department_id** ] 上包含重复项，因此您可能需要或不需要在您的选择之上使用**DISTINCT子句。**

 ******```
SELECT 
DISTINCT 
t.* ,  
u.pushover_key AS `owner_pushover_key`,  
u.name AS `owner_name`,  
u.id AS `owner_id`,  
u.email AS `owner_email`,  
u.phone_number AS `owner_phone`,  
u.email_notifications AS `owner_email_notifications`,  
u2.pushover_key AS `assigned_pushover_key`,  
u2.name AS `assigned_name`,  
u2.id AS `assigned_id`,  
u2.email AS `assigned_email`,  
u2.email_notifications AS `assigned_email_notifications`,  
u3.name AS `submitted_name`,  
u3.id AS `submitted_id`,  
u3.email AS `submitted_email`,  
u3.email_notifications AS `submitted_email_notifications`,  
tp.name AS `priority_name`,  
td.name AS `department_name`,  
ts.name AS `status_name`,  
ts.colour AS `status_colour`,  
ts.active AS `active`,  
pa.name AS `pop_account_name`  
FROM  
tickets t  
LEFT JOIN users u ON u.id = t.user_id  
LEFT JOIN users u2 ON u2.id = t.assigned_user_id  
LEFT JOIN users u3 ON u3.id = t.submitted_user_id  
LEFT JOIN ticket_priorities tp ON tp.id = t.priority_id  
LEFT JOIN ticket_departments td ON td.id = t.department_id  
LEFT JOIN ticket_status ts ON ts.id = t.state_id  
LEFT JOIN pop_accounts pa ON pa.id = t.pop_account_id 
LEFT JOIN users_to_departments utd ON utd.department_id = t.department_id AND utd.user_id = :department_or_assigned_or_user_id AND utd.site_id = :site_id
WHERE    
1 = 1  
AND t.site_id = :site_id  
AND (
    utd.department_id NOT NULL
OR  
    (t.assigned_user_id = :department_or_assigned_or_user_id OR t.user_id = :department_or_assigned_or_user_id) 
) 
ORDER BY  
t.last_modified DESC  
LIMIT :limit OFFSET :offset 
```

希望能帮助到你******

# php - 样式化 WP 上的帖子评论

> ID：12548844
> 
> 赞同：0
> 
> 时间：2012-09-23T00:43:53.420
> 
> 标签：php, html, css

我无法对仅在页面上显示带有 CSS 文件的注释（等）`<comments>`的元素进行样式化。`<commentlist>`我让它像这样工作

```
<?php here it calls the comments if any ?>
<style>
 .comments{}
</style> 
```

我想知道为什么会发生这种情况以及是否有更好的方法来处理这个问题。谢谢

德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:29:43.280

无需通过 PHP 动态添加 CSS。

如果您不使用[`header(“Content-type: text/css”);`](https://stackoverflow.com/questions/5413107/headercontent-type-text-css-is-working-in-ff-cr-but-in-ie9-it-shows-up-as)之前的输出，那么动态生成的 CSS 会减慢您的页面速度。它将表现为内部 CSS，因此更好的解决方案是缓存它。

# shell - 使用 sed 进行字符串转换

> ID：12548852
> 
> 赞同：0
> 
> 时间：2012-09-23T00:45:24.337
> 
> 标签：shell, unix

我的输入中有几行我正在初始化结构。每次我在输入文件中看到类似以下行的内容时：

某事1 =（结构某事2）{某事3，某事4}；

我需要将其转换为：

init_something2( &something1, something3, something4);

我使用了以下功能，它可以工作。

```
sed -e 's/\([a-zA-Z0-9]*\)\s*=\s*(\s*struct\s\([a-zA-Z0-9]*\)\s*)\s*{\s*\([a-zA-Z0-9]*\)\s*,\s*\([a-zA-Z0-9]*\)\s*}\s*;/init_\2( \&\1, \3, \4);/g' 
```

我的问题是如何修改它，以便它适用于许多输入。你能修改它来做任意数量的输入吗？例如：

```
something = ( struct something2) {something3, something4, something5, something6..}; 
```

应该成为

```
init_something2( &something1, something3, something4, something5, something6..); 
```

（注意括号与大括号）非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T00:48:12.270

Sure. Just use `([^}]*)}` to capture everything before the brace, e.g.

```
sed -e 's/\([a-zA-Z0-9]*\)\s*=\s*(\s*struct\s\([a-zA-Z0-9]*\)\s*)\s*{\([^}]*\)}\s*;/init_\2( \&\1, \3);/g' 
```

# android - prevent task manager from recreating last displayed activity in a task

> ID：12548853
> 
> 赞同：4
> 
> 时间：2012-09-23T00:45:41.630
> 
> 标签：android, android-intent, flags, activity-lifecycle

The scenario is:

launch app, start activity A, navigate to B, then to C press home button. C gets destroyed. Bring up task manager, press on my app's icon. Activity C is being recreated. How can I make this behaviour cease ? What I would like would be to go back to activity A.

The closest I could get to this was by launching activities B,C with Intent.FLAG_ACTIVITY_NO_HISTORY. But the problem with this flag is that it prevents activities B,C from ever being re-created throughout the app's life (they should be creatable once task manager leads user to A).

EDIT: same behaviour observed as in Intent.FLAG_ACTIVITY_NO_HISTORY case if I use this approach instead:

```
class C extends Activity
{
...
    @Override
    protected void onDestroy() 
    {
        // last resort
        finish();
        super.onDestroy();      
                //finish();
    }
} 
```

I can not navigate back to activity C once it its onDestroy() has been called once :(

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T18:56:16.743

编辑您的 Manifest.xml 文件并在您不想重新创建的活动中指定：

```
android:launchMode="singleTask" 
```

或根据您的要求使用其他属性。去[**这里**](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode) 详细解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:54:27.083

经过一个周末的人机大战，这就是我所经历的：

noHistory ="true" 活动属性阻止它们从活动堆栈中位于它们下方的另一个活动启动 (startActivity())。事情是整个活动导航逻辑通过一个方法传递这个标志添加到意图：

```
context.startActivity(intent.setFlags(intent.getFlags() | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT)); 
```

Android 无法“重新排序”“noHistory”活动，我认为这是一个错误。由于 noHistory 活动已经完成（），它应该召唤一个新的实例......有效的是在活动 A 上使用 FLAG_ACTIVITY_CLEAR_TOP（参见 OP）。这样，B 和 C 在所有场景中都得到了正确的实例化。然而，这还不够，我最终完成（）所有活动，因为我一方面因为 OOM 错误而离开它们，另一方面是生命周期/应用程序逻辑的复杂性。

# wpf - which component is responsible for setting regionManager?

> ID：12548855
> 
> 赞同：0
> 
> 时间：2012-09-23T00:46:16.610
> 
> 标签：wpf, prism, unity-container

which component is responsible for setting regionManager?

I am following the hands-on lab on prism on [http://msdn.microsoft.com/en-us/library/ff921141(v=pandp.40).aspx](http://msdn.microsoft.com/en-us/library/ff921141(v=pandp.40).aspx)

```
public HelloWorldModule(IRegionManager regionManager)
    {
        this.regionManager = regionManager;
    } 
```

I am wondering which component is setting regionManager?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:37:23.460

这是一种依赖注入模式；Unity 框架（[`UnityBootstrapper`](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.unityextensions.unitybootstrapper%28v=pandp.38%29.aspx)准确地说）正在设置`regionManager`. 您可以在[Prism 下载中看到](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=28950)*Prism.UnityExtensions\UnityBootstrapper.cs*下的代码：

在`ConfigureContainer`方法中：

```
RegisterTypeIfMissing(typeof(IRegionManager), typeof(RegionManager), true); 
```

在`Run`方法中：

```
RegionManager.SetRegionManager(this.Shell, this.Container.Resolve<IRegionManager>()); 
```

您会注意到`HelloWorldModule`继承`IModule`是~~Unity~~ Prism 接口，其实现`UnityBootstrapper`注入到类中。

* * *

如果你不熟悉依赖注入，这是它的经典模式；一个类通过其构造函数请求任何外部依赖项（在本例中为*IRegionViewRegistry*），DI 框架负责注入实际的实现。

# virtual - iOS6 中的 CoreMIDI/PGMidi 虚拟 MIDI 错误

> ID：12548856
> 
> 赞同：10
> 
> 时间：2012-09-23T00:46:17.617
> 
> 标签：virtual, midi, coremidi

面临两个错误。

此代码在 iOS 4 和 5 中工作，但更新到 6 后，它不工作（

我发现了以下内容，但不知道如何在代码中修复它。

**从 iOS 6 开始，应用程序需要在其 UIBackgroundModes 中包含音频键才能使用 CoreMIDI 的 MIDISourceCreate 和 MIDIDestinationCreate 函数。如果没有键集，这些函数将返回 kMIDINotPermitted (-10844)。**

2012-09-23 03:40:04.773 MidiStudio [1017:907] 错误（创建 MIDI 虚拟源）：-10844：错误域 = NSMachErrorDomain 代码 = -10844“操作无法完成。（马赫错误 -10844。 )"

2012-09-23 03:40:04.777 MidiStudio [1017:907] 错误（创建 MIDI 虚拟目标）：-10844：错误域 = NSMachErrorDomain 代码 = -10844“操作无法完成。（马赫错误 -10844。 )"

这是“来源”的代码：

```
-(void)setVirtualSourceEnabled:(BOOL)virtualSourceEnabled {
    if ( virtualSourceEnabled == self.virtualSourceEnabled ) return;

    if ( virtualSourceEnabled ) {
        NSString *name = virtualEndpointName ? virtualEndpointName : [[[NSBundle mainBundle] infoDictionary] valueForKey:(NSString*)kCFBundleNameKey];

        OSStatus s = MIDISourceCreate(client, (CFStringRef)name, &virtualSourceEndpoint);
        NSLogError(s, @"Create MIDI virtual source");
        if ( s != noErr ) return;

        virtualSourceDestination = [[PGMidiVirtualSourceDestination alloc] initWithMidi:self endpoint:virtualSourceEndpoint];

        [delegate midi:self destinationAdded:virtualSourceDestination];
        [[NSNotificationCenter defaultCenter] postNotificationName:PGMidiDestinationAddedNotification
                                                            object:self 
                                                          userInfo:[NSDictionary dictionaryWithObject:virtualSourceDestination
                                                                                               forKey:PGMidiEndpointKey]];

    } else {
        [delegate midi:self destinationRemoved:virtualSourceDestination];

        [[NSNotificationCenter defaultCenter] postNotificationName:PGMidiDestinationRemovedNotification
                                                            object:self 
                                                          userInfo:[NSDictionary dictionaryWithObject:virtualSourceDestination
                                                                                               forKey:PGMidiEndpointKey]];

        [virtualSourceDestination release]; virtualSourceDestination = nil;
        OSStatus s = MIDIEndpointDispose(virtualSourceEndpoint);
        NSLogError(s, @"Dispose MIDI virtual source");
        virtualSourceEndpoint = NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T15:17:42.920

[只是把我的笔记放在 Kurt 的出色答案上。]

首先，这在名为“iOS 6.0 Release Notes”的文档中都有提及。那里的行说：

> 从 iOS 6 开始，应用程序需要在其 UIBackgroundModes 中包含音频键才能使用 CoreMIDI 的 MIDISourceCreate 和 MIDIDestinationCreate 函数。如果没有键集，这些函数将返回 kMIDINotPermitted (-10844)。

因此，您唯一需要做的事情（同样，只是指定 Kurt 回答的内容）在**每个目标的 plist**中是这样的：

```
<key>UIBackgroundModes</key>
<array>
    <string>audio</string>
</array> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-23T03:24:02.453

您无需更改任何代码。再次阅读该消息：

> 从 iOS 6 开始，应用程序需要在其 UIBackgroundModes 中包含音频键

`UIBackgroundModes`是[应用程序 Info.plist 中的一个键](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)。因此，[使用 Xcode 编辑您的应用程序的 Info.plist](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html)，并使该键的值成为包含字符串的数组`audio`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-18T16:57:47.753

我的应用程序使用 MIDIDestinationCreate 播放 MIDI 文件，而应用程序审查团队确实在制造臭味。他们坚持认为应用程序必须在后台播放一些音频。他们引用“2.16：多任务应用程序只能将后台服务用于其预期目的：VoIP、音频播放、位置、任务完成、本地通知等。”

我已将他们推荐给此处提到的 iOS6 发行说明，他们只是不断回来说它必须在后台播放音频。

我已向 Apple 开发者技术支持提交了请求。希望他们能改变他们的团队遵循的应用审查指南。

# java - Multiple conditions in ternary conditional operator?

> ID：12548857
> 
> 赞同：20
> 
> 时间：2012-09-23T00:46:34.360
> 
> 标签：java, conditional, operator-keyword

I am taking my first semester of Java programming, and we've just covered the conditional operator (? :) conditions. I have two questions which seem to be wanting me to "nest" conditional operators within eachother, something that I could easily (yet tediously) do with if-else-if statements.

1) "Assume that month is an int variable whose value is 1 or 2 or 3 or 5 ... or 11 or 12\. Write an expression whose value is "jan" or "feb" or "mar" or "apr" or "may" or "jun" or "jul" or "aug" or "sep" or "oct" or "nov" or "dec" based on the value of month. (So, if the value of month were 4 then the value of the expression would be "apr".)."

an idea I had looks something like this:

```
(month==1)?"jan":(month==2)?"feb": (month==3)?"mar": (month==4)?"apr": 
(month==5)?"may":(month==6)?"jun": (month==7)?"jul":(month==8)?"aug":
(month==9)?"sep": (month==10)?"oct": (month==11)?"nov": (month==12)?"dec": 
```

(I know this isn't a complete expression, but I'm not sure how to phrase the operator to handle so many conditions.)

2) Assume that credits is an int variable whose value is 0 or positive. Write an expression whose value is "freshman" or "sophomore" or "junior" or "senior" based on the value of credits. In particular: if the value of credits is less than 30 the expression's value is "freshman"; 30-59 would be a "sophomore", 60-89 would be "junior" and 90 or more would be a "senior".

again, I've been toying around and the best I can come up with is something like(and I'm probs missing some necessary parentheses):

```
credits < 30 ? "freshman": credits >= 30 && <=59 ?
 "sophomore": credits >= 60 && <= 89 ? "junior": "senior" 
```

I've Googled around and checked the database here, but I don't THINK that there's anything exactly like this question; forgive me if I'm wrong. The program (CodeLab) won't take Switch-Case or the if-else-if solution, always suggesting I should be using the conditional ? : operator, but everywhere I've looked I haven't figured out how to rig the operator to handle so many conditions. We aren't far past this in the book, so if you guys could help me find a solution, it'd be great if it's one that jives with the little bit I've learned so far.

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-23T00:54:22.247

For the **first** question, you *can* indeed use the ternary operator, but a simpler solution would be to use a `String[]` with the month descriptions, and then subscript this array:

```
String[] months = { "jan", "feb", "mar", ... };
int month = 1; // jan
String monthDescription = months[month - 1]; // arrays are 0-indexed 
```

Now, for your **second** question, the ternary operator seems more appropriate since you have fewer conditions, although an `if` would be much easier to read, imho:

```
String year = "senior";
if (credits < 30) {
  year = "freshman";
} else if (credits <= 59) {
  year = "sophomore";
} else if (credits <= 89) {
  year = "junior";
} 
```

Contrast this with the ternary operator:

```
String year = credits < 30 ? "freshman" : credits <= 59 ? "sophomore" : credits <= 89 ? "junior" : "senior"; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-23T00:50:37.523

Parentheses are like violence: if it's not working, use more.

But seriously:

```
( condition A ? value A :
  ( condition B ? value B : 
    ( condition C ? value C :
       ...
    )
  )
) 
```

And please, don't ever write code like that for anything important.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T13:36:16.460

`(month==1)?"jan":(month==2)?"feb": (month==3)?"mar": (month==4)?"apr": (month==5)?"may":(month==6)?"jun": (month==7)?"jul":(month==8)?"aug": (month==9)?"sep": (month==10)?"oct": (month==11)?"nov": (month==12)?"dec":null`

你做对了，你唯一需要的就是当你完成这一切时最后的空值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-06T22:14:28.823

我在学习时也有同样的问题。感谢您提供有关`if`和的信息`else`。除了作业要求我们专门使用条件运算符外，这也是我的选择。所以基本上他们要求我们以不可读的方式编写它。

```
(credits < 30) ? "freshman" : (credits >= 30 && credits < 60) ?"sophomore" : (credits >= 60 && credits < 90) ? "junior" : "senior" 
```

这是我的，它是正确的。我想知道是否有更短的代码（仅使用条件运算符。）。

顺便说一句，埃文你的代码几乎是好的。只是错过了每个表达式周围的一些括号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T00:51:58.873

You are handling the idea of a if-else-if situation in a ternary correctly, but your syntax was slightly off (as you said it might be).

I would, however, change it slightly so that extra conditions aren't checked unnecessarily.

```
String year = credits < 30 ? "freshman": credits <= 59
       ? "sophomore": credits <= 89 ? "junior" : "senior"; 
```

But your best option is just to use if and else statements for the sake of code readability.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-14T12:25:13.433

-在我的情况下，我有一个**“isloadingMakePayment”**标志，基于我必须在该标签上实现**加载栏**的标志。这意味着当**isloadingMakePayment**为真时，标签显示**“正在加载数据......”**。实现了多个条件。

- **“isPolicyRename”**也是我用于内部条件的标志**。MeanWhile“renamePolicy”**是变量，其中包含一些我用来显示在 HTML 页面上的值

*   只需使用此模式：

`<a class="btn btn-orange" (click)="onMakePayment()"> <span *ngIf="isloadingMakePayment"><i class='fa fa-spinner fa-spin'></i>Loading Data...</span>{{isloadingMakePayment ? '' : isPolicyRename 'Make Payment to ' + renamePolicy : 'Make Payment' }} </a>`

* * *

谢谢你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-24T02:56:16.190

将您的代码放在括号中并在末尾添加 null ，您就可以了。

# algorithm - Calculating the running time of insertion sort

> ID：12548860
> 
> 赞同：0
> 
> 时间：2012-09-23T00:47:41.233
> 
> 标签：algorithm

```
INSERTION_SORT (A)

FOR j ← 2 TO length[A]           //c1*n
    key ← A[j]                   //c2*(n-1)
    i ← j − 1                    //c3*(n-1)
    WHILE i > 0 and A[i] > key   //c4*sigma(j=2 to n)of(tj)
         A[i +1] ← A[i]          //c5*sigma(j=2 to n)of(tj-1)
         i ← i − 1               //c6*sigma(j=2 to n)of(tj-1)
    A[i + 1] ← key               //c7*(n-1) 
```

c1,c2,c3,c7 make total sense. What doesn't make sense is why:

```
c4*sigma(j=2 to n)of(tj) becomes c4*sigma(j=2 to n)of(j) 
```

Let's say that we are calculating a worst case of an array of size 5\. What the above line is saying is that the time on line 4 is:

```
c4*(1+2+3+4) 
```

When in reality it is:

~~c4*((1)+(1+2)+(1+2+3)+(1+2+3+4))~~

~~What am I missing? I know the book has to be right.~~

**EDIT** Screwed up, should be:

```
 c4*((1)+(1+1)+(1+1+1)+(1+1+1+1))
=c4*(1+2+3+4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:11:29.347

但是第 4 行的时间*是*2 + 3 + 4 + 5。第一次（j = 2）是 2（i = 1 和 i = 0）。第二次 (j = 3) 是 3 (i = 2, i = 1, i = 0)...

# c - C 比较类型

> ID：12548864
> 
> 赞同：0
> 
> 时间：2012-09-23T00:48:29.880
> 
> 标签：c, types, char, int

```
int main(void) {
  int x = 0;
  int* p = &x;
  char* q = p;
  while (*p == *q) { //What happens here?
     x = x + 1;
  }
  printf(“%d\n”, x);
} 
```

好吧，我在这里有这个简单的程序。我对这是如何工作的感到困惑。如果你能帮助我，我将不胜感激。

我有一个测试，想了解它是如何工作的。先感谢您。

**Q 指针问题**

|-----------------------------|
               0x00<-------------Q点在这里？
|-----------------------------|
               0x00
|-----------------------------|
               0x00
|-----------------------------|
               0x00<-------------Q点在这里？
|-----------------------------|

**所以在 x = x+1 之后。是吗？**

|-----------------------------|
               0x00<-------------0x01 在这里？
|-----------------------------|
               0x00
|-----------------------------|
               0x00
|-----------------------------|
               0x00<-------------0x01 在这里？
|-----------------------------|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T00:53:30.720

它取决于字节顺序，但本质上是：

```
while (x == ((char) x)) {
    ++x;
} 
```

循环将终止一次`((int) x) != ((int) lowest byte of x)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:51:51.933

首先，`p`并被`q`取消引用（通过 *）以获取它们指向的 int 和 char。然后，将 char 提升为 int，并比较这些值是否相等。

# networking - Create hostname for a computer on the network

> ID：12548867
> 
> 赞同：1
> 
> 时间：2012-09-23T00:49:31.517
> 
> 标签：networking, dns

I would like a hostname like mycomp.net and be assigned through DNS of the router to go to an **internal** ip address.

The end result should be people within the network can use that hostname to connect to the internal server, and outsiders cannont

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:53:52.403

For the computer that is running it, simply use the `host` file. Could do the same for others if there is only a handful...

For the other computers re the router, it will depend on the router you have or the firewall depeding on setup. Can you please advise...

Ps. I do this with pfsesnse but not sure if you can/do run this....

Note: host file sits: C:\Windows\System32\drivers\etc

usually....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:01:48.503

如果您使用安装了 DD-WRT 的路由器，您可以使用服务选项卡中的 DHCP 服务器选项来设置基于 MAC 地址的主机名。结合“LAN Domain”选项，这允许您通过 my_computer.my_domain.local 访问机器

如果您没有使用安装了 DD-WRT 的路由器，您应该尝试一下。

# c - Why am I getting this memory access error 'double free or corruption'?

> ID：12548868
> 
> 赞同：11
> 
> 时间：2012-09-23T00:49:56.537
> 
> 标签：c, memory-access

I am getting the following type of error. I know it has something to do with me improperly accessing memory, but I don't exactly how. Please help me see where I have gone wrong.

*note I have simplified my function and it is not obvious what the variables are doing, I just need to know how I am implementing the function incorrectly or where I am misusing memory access.

```
int my_function(char const *file_name, size_t max)
        {

        myStruct.pStore = fopen(file_name,"w+");      //pStore is a FILE* 
        myStruct.max = max;                 

        // fill the with zeros ('0')
        int numberOfZeros = max*SIZE;
        char zeros[numberOfZeros];                      

        int i=0;
        while(i<numberOfZeros)         // insert zero's 
        {
                zeros[i]='0';
                i++;
        }
        fwrite(zeros,sizeof(char),numberOfZeros,myStruct.pStore);
        fclose(myStruct.pStore);

        return EXIT_SUCCESS; 
```

The error I am given:

```
*** glibc detected *** /home/.../: double free or corruption (top): 0x0804c008 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x73e42)[0xb7e82e42]
/lib/i386-linux-gnu/libc.so.6(fclose+0x154)[0xb7e72384]
/home/2012/spatar/cs/specs/release[0x80486b0]
/home/2012/spatar/cs/specs/release[0x8048acd]
/home/2012/spatar/cs/specs/release[0x8048af0]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb7e284d3]
/home/2012/spatar/cs/specs/release[0x80484e1]
 ======= Memory map: ========
08048000-0804a000 r-xp 00000000 00:3b 2331829    /home/2012/spatar/cs/Aspecs/release
0804a000-0804b000 r--p 00001000 00:3b 2331829    /home/2012/spatar/cs/specs/release
0804b000-0804c000 rw-p 00002000 00:3b 2331829    /home/2012/spatar/cs/specs/release
0804c000-0806d000 rw-p 00000000 00:00 0          [heap]
b7e0e000-b7e0f000 rw-p 00000000 00:00 0 
b7e0f000-b7fae000 r-xp 00000000 00:11 5415       /lib/i386-linux-gnu/libc-2.15.so
b7fae000-b7fb0000 r--p 0019f000 00:11 5415       /lib/i386-linux-gnu/libc-2.15.so
b7fb0000-b7fb1000 rw-p 001a1000 00:11 5415       /lib/i386-linux-gnu/libc-2.15.so
b7fb1000-b7fb4000 rw-p 00000000 00:00 0 
b7fbc000-b7fd8000 r-xp 00000000 00:11 5426       /lib/i386-linux-gnu/libgcc_s.so.1
b7fd8000-b7fd9000 r--p 0001b000 00:11 5426       /lib/i386-linux-gnu/libgcc_s.so.1
b7fd9000-b7fda000 rw-p 0001c000 00:11 5426       /lib/i386-linux-gnu/libgcc_s.so.1
b7fda000-b7fdd000 rw-p 00000000 00:00 0 
b7fdd000-b7fde000 r-xp 00000000 00:00 0          [vdso]
b7fde000-b7ffe000 r-xp 00000000 00:11 5405       /lib/i386-linux-gnu/ld-2.15.so
b7ffe000-b7fff000 r--p 0001f000 00:11 5405       /lib/i386-linux-gnu/ld-2.15.so
b7fff000-b8000000 rw-p 00020000 00:11 5405       /lib/i386-linux-gnu/ld-2.15.so
bffdf000-c0000000 rw-p 00000000 00:00 0          [stack] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T01:01:52.553

看起来您正在尝试释放已释放或取消引用的内存。

将您的程序与[efence链接或使用](http://linux.die.net/man/3/efence)[valgrind](http://linux.die.net/man/1/valgrind)运行它。

这将告诉您指针在何处被取消引用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T05:32:49.370

内存损坏通常是由超出分配内存末尾的写入引起的，并且通常是一个字节，因为有人忘记添加空值终止字符串所需的一个字节。

Double free 意味着 free(x) 连续调用两次，x 的值相同。在您的代码中某处 free(x) 被调用，然后很可能在另一段代码中 free(x) 再次被调用。

隔离问题的最简单方法是使用 gdb 并在单步执行代码时观察正在发生的情况。

在上面的 my_function 代码中，没有调用 malloc 或 free。zeros 缓冲区在堆栈上，while 循环不会写入超出缓冲区的末尾。问题出在代码的其他部分。解决问题需要多长时间取决于从多少地方调用 malloc/free/strdup 等。

# macos - Hg extensions + merge tool on mac os x

> ID：12548870
> 
> 赞同：0
> 
> 时间：2012-09-23T00:50:17.860
> 
> 标签：macos, mercurial

I am working on setup of my hg for django projects on my mac.

I need to do two things :

*   set some mechanism to save my password and use it whenever I use repo again

I've tried to do that by adding **keyring extension** to my .hg/hgrc file like this :

```
[extensions]
mercurial_keyring = 
```

but it doesn't work. I am getting such an error :

```
*** failed to import extension mercurial_keyring: No module named mercurial_keyring 
```

Should I install that extension with pip / easy_install before?

Because on Windows using HgTortoise I modified my hgrd file, added those two lines and it works just fine.

I thought it would do the work on mac os x as well.

*   set some default merge-tool, which would be launched whenever I use **hg merge** command and there would be some confilicts to resolve

How can I do that?

Here is my current hg files configuration :

~/.hgrc

```
[ui]
username = johny bravo <johny.bravo@gmail.com> 
```

.../myproject/.hg/hgrc

```
[paths]
default = https://bitbucket.org/johnybravo/firstdjango

[extensions]
mercurial_keyring = 
```

According to some tutorials and articles about hg I'd read before that should do the work.

But doesn't work in my case.

Btw. Is there any nice external merge tool for hg? Vimdiff is terrible for me...

I also use SourceTree for version control sometimes, but it seems it doesn't contain any merge tool.

Is there any tool that looks similar to SourceTree? ( nice, readable, colorful GUI ).

A perfect merge-tool would be one compatibile both with SourceTree and hg merge from command line so I coulde use them alternately.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:14:58.387

[路径] 默认 = [https://bitbucket.org/johnybravo/firstdjango](https://bitbucket.org/johnybravo/firstdjango)

* * *

添加：“default-push = [https://username:password@bitbucket.org/johnybravo/firstdjango](https://username:password@bitbucket.org/johnybravo/firstdjango) ”，不带引号。

使用 ssh 是另一种更复杂的设置方式，无需输入用户名/密码即可推送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T04:16:28.530

根据[Keyring 扩展 wiki](http://mercurial.selenic.com/wiki/KeyringExtension)

> 此扩展不随 Mercurial 分发

因此：如您所见，在没有完整路径或一些初步操作的情况下向 hgrc 添加扩展将不起作用

[这个答案](https://stackoverflow.com/a/4653223)展示了 Keyring 的正确完整 pip 类型安装

关于“hg 的不错的外部合并工具？” 我不得不说“口味可能不同”，但任何适用于 Mac 的 diff-merge 工具都可以在 Mercurial 中使用

*   从我的观点来看，[Araxis Merge](http://www.araxis.com/merge_mac/)并不可怕
*   [DeltaWalker被](http://www.deltopia.com/compare-merge-sync/macosx/)[一些用户](http://www.mac-forums.com/forums/os-x-apps-games/99976-looking-mac-equivalent-beyond-compare.html)推荐为“超越 Mac 的比较”
*   适用于 Mac 的[P4Merge](http://osx.iusethis.com/app/p4merge)

# javascript - 如何使用正则表达式表示这个集合

> ID：12548874
> 
> 赞同：1
> 
> 时间：2012-09-23T00:50:47.983
> 
> 标签：javascript, regex

我正在尝试测试我的“操作码”列表，以查看它们是否与我的有效操作码一致，这些有效操作码是一对数字 0-9，我通过以下方式测试：`var isValidNumericOpcode = (/^[0-9]{2}$/i);`或包含字母的操作码（我的示例）和一个数字或两个字母（在我的示例中为 A 或 D）。如果我要查找与这样的集合匹配的任何内容，例如 ["A9", "AD", "8D"] 忽略大小写（即其中任何一个都是有效的），我将如何检查第二种情况`["A9", "a9", "AD", "aD", "Ad", "ad", "8D", "8d"]`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:04:57.087

如果您的“示例”是一个详尽的列表，最简单的是一组替代方案：

```
/^([0-9]{2}|a[9d]|8d)$/i 
```

还有其他可能的替代方案，但我认为这些涵盖了它。

# java - Java 字符串中的不可见字符

> ID：12548875
> 
> 赞同：12
> 
> 时间：2012-09-23T00:51:13.013
> 
> 标签：java

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T01:00:21.247

[`U+200E`](http://en.wikipedia.org/wiki/Left-to-right_mark) and [`U+200F`](http://en.wikipedia.org/wiki/Right-to-left_mark) are **not** printable characters. They're both control characters which dictate how the text should be rendered - either left to right, or right to left.

You won't see these in the terminal, and they shouldn't be equivalent strings.

^(`0x200E ^ 0x200F != 0`)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-23T00:52:46.383

Because the character sequences are not identical. Just because it appears the same on the console does not mean the objects are identical.

# javascript - 'body' undefined depending on location of script tags

> ID：12548886
> 
> 赞同：0
> 
> 时间：2012-09-23T00:52:25.723
> 
> 标签：javascript, backbone.js

I'm doing a hello world example of a backbone app, and it only works if the script src tags are contained in the body, not in the header (where I'd expect them to be). If I have them in the header and do alert(el) it says undefined. However, if I have the script src tags in the body and do alert(el) it says `object HTMLBodyElement` and the hello world example works. I also note that the tutorial I'm looking at has the script src tags inside the body [http://arturadib.com/hello-backbonejs/](http://arturadib.com/hello-backbonejs/) (which is the only way I can get it to work)

Why is that?

**Doesn't work**

```
 <!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <title>hello-backbonejs</title>
    <link rel="stylesheet" href="static/style.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
  <script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
  <script src="http://documentcloud.github.com/backbone/backbone-min.js"></script>
  <script src="static/backbone.localStorage-min.js"></script>
  <script src="app.js"></script>

  </head>
  <body>

  </body>
  </html> 
```

**Works**

```
 <!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <title>hello-backbonejs</title>
    <link rel="stylesheet" href="static/style.css">

  </head>
  <body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
  <script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
  <script src="http://documentcloud.github.com/backbone/backbone-min.js"></script>
  <script src="static/backbone.localStorage-min.js"></script>
  <script src="app.js"></script>

  </body>
  </html> 
```

**This is the javascript**

```
(function($){
  // **ListView class**: Our main app view.
  var ListView = Backbone.View.extend({    
    el: $('body'), // attaches `this.el` to an existing element.
    // `initialize()`: Automatically called upon instantiation. Where you make all types of bindings, _excluding_ UI events, such as clicks, etc.
    initialize: function(){
      _.bindAll(this, 'render'); // fixes loss of context for 'this' within methods

       this.render(); // not all views are self-rendering. This one is.

    },
    // `render()`: Function in charge of rendering the entire view in `this.el`. Needs to be manually called by the user.
    render: function(){
      $(this.el).append("<ul> <li>hello world</li> </ul>");
      alert(this.el);
    }
  });

  // **listView instance**: Instantiate main app view.
  var listView = new ListView();      
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:43:34.883

当你这样做时：

```
<body>
   <script src="..."></script>
   ...
</body> 
```

`<body>`加载脚本时，您的 DOM中将有一个。`<body>`特别是，当你点击这个时，你会有一个：

```
el: $('body') 
```

当你这样做时：

```
<head>
    <script src="..."></script>
</head>
<body>
    ...
</body> 
```

`<body>`当你击中时不会有一个，`el: $('body')`所以你`el`会`undefined`在 Backbone unwraps 之后结束`$('body')`。

我认为您对以下之间的区别感到困惑：

```
(function($) { /* ... */ })(jQuery); 
```

和

```
$(function() { /* ... */ }); 
```

第一个立即执行函数，第二个同

```
$(document).ready(function() { /* ... */ }); 
```

并且在 DOM 准备好时执行该函数。您可能希望您的 JavaScript 看起来更像这样：

```
$(function() {
  var ListView = Backbone.View.extend({ /* ... */ });
  var listView = new ListView();
  // And now do something with listView
}); 
```

# iphone - cocos2d不能换场景？

> ID：12548901
> 
> 赞同：0
> 
> 时间：2012-09-23T00:54:53.590
> 
> 标签：iphone, cocos2d-iphone

我是 cocos2d 的新手并且一般都在开发，所以这可能是一个非常愚蠢的错误。我到处搜索并比较了示例，但我看不到问题所在。我有一个简单的菜单，只有一个播放按钮。当它点击时，我试图去另一个场景。错误是

使用未声明的标识符“gameScene”

但据我所见，它被宣布...

这是我的代码。

```
CCMenuItemImage *play = [CCMenuItemImage
                             itemFromNormalImage:@"PlayButton.png"
                             selectedImage:@"PlayButtonPressed.png"
                             target:self
                             selector:@selector(gameScene)];

    CCMenu *selectMenu = [CCMenu menuWithItems:play, nil];
    //[selectMenu alignItemsVertically];
    [self addChild:selectMenu];

    -(void)gameScene:(id)sender
    {
        [[CCDirector shareDirector] replaceScene:GameScene node];
    } 
```

谢谢你的帮助

编辑：我现在没有错误，我错过了 GameScene 节点周围的 []。但它一直在崩溃。这是我的新代码。

```
CCMenuItemImage *play = [CCMenuItemImage
                                 itemFromNormalImage:@"PlayButton.png"
                                 selectedImage:@"PlayButtonPressed.png"
                                 target:self
                                 selector:@selector(playGame)];

        CCMenu *selectMenu = [CCMenu menuWithItems:play, nil];
        //[selectMenu alignItemsVertically];
        selectMenu.position = ccp(160, 300);
        [self addChild:selectMenu];

    }
    return self;
}

-(void)playGame:(id)sender{
    [[CCDirector sharedDirector]replaceScene:[GameScene node]];
} 
```

它似乎没有到达 CCMenu？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:59:53.773

您的替换场景参数不正确。您必须定义一个它将切换到的实际场景，而不仅仅是一个空节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T12:49:18.917

我解决了这个问题。这似乎是选择器的问题。我只是将其更改为：

```
CCMenuItemImage *play = [CCMenuItemImage
itemFromNormalImage:@"PlayButton.png"
selectedImage:@"PlayButtonPressed.png"
target:self
selector:@selector(playGame)]; 
```

到：

```
CCMenuItemImage *play = [CCMenuItemImage
itemFromNormalImage:@"PlayButton.png"
selectedImage:@"PlayButtonPressed.png"
target:self
selector:@selector(playGame:)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T23:20:21.057

我一直想念这些。在你的计时器中也要注意这一点，我已经花了几个小时来追踪由 [self schedule:@selector(gameLogic)]; 导致的错误。任何时候你有一个选择器，无论是在计时器、菜单还是其他任何地方，你都需要把它放进去传递数据。

此外，如果您想在不按下按钮的情况下进行虚假菜单调用，也许是为了强制它调用计时器或其他东西，这是一个我发现有用的 hacky 解决方案：

```
id fakeButton;
[self playGame:fakeButton]; 
```

# version-control - 用于版本控制、wiki 和持续集成的开发服务器

> ID：12548903
> 
> 赞同：0
> 
> 时间：2011-07-25T14:23:15.770
> 
> 标签：version-control, continuous-integration

我熟悉典型的开发服务器堆栈：

1.  SVN
2.  追踪
3.  詹金斯/哈德森

现在我正在寻找可以处理分布式版本控制的东西（我倾向于 Mercurial）。

当然，如果我能拥有上述堆栈的所有特权，那就太好了！

*   平台无关（客户端在 Windows、Mac、Linux 上运行）
*   语言/技术无关（即 Java**和**.NET 编译）
*   服务器与平台无关（CI 和 Wiki 可以在任何服务器上运行）
*   上述平台（Eclipse、Visual Studio 等）的 IDE 集成
*   切片、切丁并制作数千条切丝薯条！

如果我应该在 StackOverflow 上交叉发布，请告诉我。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-07-25T14:39:42.723

[Redmine](http://www.redmine.org/)是我首选的 FOSS 解决方案。[使用Hudson 到 Redmine 插件](http://wiki.hudson-ci.org/display/HUDSON/Redmine+Plugin)，以及[Redmine 到 Hudson 插件](http://code.google.com/p/r-labs/downloads/list)，将这一切联系在一起。

# apache-flex - 在 Flex 4.6 上使用 ViewNavigatorApplication 浏览视图

> ID：12548906
> 
> 赞同：0
> 
> 时间：2012-09-23T00:56:47.820
> 
> 标签：apache-flex, mobile, flex4

我正在`ViewNavigatorApplication`使用 Flex 并试图弄清楚如何正确使用`navigator`.

我的问题是，如果您有以下情况：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                            xmlns:s="library://ns.adobe.com/flex/spark"
                            firstView="views.IntroView">

    <s:navigationContent>
        <s:Button label="Home" click="navigator.popToFirstView()"/>
        <s:Button label="Start" click="navigator.pushView(StartView)"/>
    </s:navigationContent>
</s:ViewNavigatorApplication> 
```

并`Start`多次按下按钮，`StartView`创建多个实例，这是合理的，因为这或多或少是一堆视图。您可以通过点击移动设备的后退按钮来确认。

有没有办法轻松避免这种情况，或者我是否必须编写一个（非常复杂的）“控制器”来跟踪内容并确保每个视图只能推送一个实例，`popView()`在需要的地方等等。

我似乎找不到任何文档，但如果我遗漏了什么，请与我分享。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:16:28.443

如果您的`StartView`课程扩展了`View`课程，您可以将其`destructionPolicy`属性设置为“从不”。这将`ViewNavigator`重新使用该特定视图，而不是每次导航到时都创建一个新视图。

在 Flex 中，这样的东西被重用是典型的，但在移动应用程序中，Adobe 似乎在释放内存方面犯了错误。

# svn - 从雪豹升级到雪狮后，monodevelop 失去了颠覆支持

> ID：12548907
> 
> 赞同：2
> 
> 时间：2012-09-23T00:57:17.773
> 
> 标签：svn, xamarin.ios, monodevelop

我的 monodevelop (3.0.4) 在 Snow leopard 中运行良好。我按照以下程序升级到雪狮： 1- 升级到雪狮 2- 安装 monotouch 3- 安装 xcode

我不需要安装 monodevelop，因为它已经安装了。

在此之后，我的 MD 环境在发布菜单中没有颠覆选项。

该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T02:09:22.157

我通过这样做解决了它：

启动 xCode 首选项/下载选项卡/安装命令行工具

# html - CSS 打印问题：边距、文本、背景色

> ID：12548911
> 
> 赞同：3
> 
> 时间：2012-09-23T00:57:59.083
> 
> 标签：html, css, printing

与使用 Word 的旧方法相比，我正在创建一个名称标签解决方案，这会导致文件变大和文件损坏。我正在使用 PHP 从数据库中获取名称并将它们打印到 html 页面中。该页面也完美地显示了我想要的内容。

我的问题是，在打印时，应用了背景颜色的文本无法正常工作。

我正在使用这种打印样式来打印背景颜色：`-webkit-print-color-adjust: exact;`

这很好用，直到我读到正文。

显示为什么
![页](../Images/3e5848f97b8f0fa444467cdd8ef1e35a.png)

在输出页面上，打印为
![打印](../Images/9a1de85e906fec68f307450286a21537.png)

我的 CSS：

```
.top-bar {
    width:100%;
    height:0.65in;
    background-color:#FFCC00;
    display:block;
    font-size:20pt;
    line-height:200%;
    font-family: Stencil;
    color:#008000;
    position:absolute;
    top:0;
    left:0;
} 
```

我尝试了不同的字体，但似乎没有什么不同。

我正在使用 Windows，从 Chrome 打印。我正在使用cutepdf 打印到PDF，但物理打印产生了相同的结果。

有什么办法可以修复字母的打印方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:03:19.837

> `-webkit-print-color-adjust: exact;`

这就是解决方案...将其应用于周围的 div。删除文本上的背景颜色并将其放在 div 上。

# python - 如何在 python 中输出 JSON，以便它可以用于 Geckoboard 的 Highcharts 插件

> ID：12548917
> 
> 赞同：4
> 
> 时间：2012-09-23T00:58:48.630
> 
> 标签：python, json, formatting, highcharts

我觉得我的问题有一个相当简单的解决方案。

我正在做一些数据操作，最终以[highcharts](http://www.highcharts.com)的格式打印出来。目前，我将整套嵌套字典分开并打印出每个部分，但我希望有类似 JSON.dumps(dict) 的输出格式，所有键均未引用。所以，在代码中：

```
{
    'chart': {'backgroundColor': 'Blue',
              'borderColor': 'Black',
              'renderTo': 'container'},
    'xAxis': { ... },
...
} 
```

输出到

```
{
    chart: {
        backgroundColor: 'Blue',
        borderColor: 'Black',
        renderTo: 'container'},
    xAxis: { ... },
...
} 
```

如果我不能像这样输出，有没有一种从 python 与 HighCharts 交互的好方法？尽管有一些合理的 Google-Fu，但我还没有真正遇到过。

编辑：我正在努力使其与[Geckoboard - Highcharts 插件](http://docs.geckoboard.com/custom-widgets/highchart.html)兼容，其中我无法访问 javascript 解析输出的全部功能。当我发送数据时，我需要将其格式化并准备好滚动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T03:15:11.927

只需提供有效的 json 文本。您问题中的示例不是有效的 json。使用[推送 API](http://docs.geckoboard.com/custom-widgets/push.html)：

```
#!/usr/bin/env python
import json
import urllib2

try:
    r = urllib2.urlopen("https://push.geckoboard.com/v1/send/" + widget_key,
                        json.dumps(nested_dict))
except IOError as e:
    if hasattr(e, 'reason'):
       print "connection error:", e.reason
    elif hasattr(e, 'code'):
       print "http error:", e.code
       print e.read()
    else:
       print "error:", e
else: # success
    assert json.load(r)["success"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T01:03:29.317

是的。您必须在客户端解码字符串（使用 javascript）：

```
JSON.parse('{"background": "black"}') 
```

此方法将返回您可以传递给 Highcharts 的 javascript 对象。

因此，您需要将 python 输出保存为 js 字符串，然后将其转换为 JS-object。

# c - 为什么这个缓冲区是在循环内定义的？

> ID：12548918
> 
> 赞同：6
> 
> 时间：2012-09-23T00:59:12.070
> 
> 标签：c, sockets, tcp

我一直认为我不应该在循环内定义变量，因为它是不必要的或浪费的。这让我想知道以下 recv() 函数是否需要为循环的每次迭代提供一个新的缓冲区：

```
while (totalBytesRecvd < echoStrLen)
{
    char buffer[BUFSIZE];
    numBytes = recv(sock, buffer, BUFSIZE - 1, 0);
    ...
    totalBytesRecvd += numBytes;
    buffer[numBytes] = '\0';
    fputs(buffer, stdout);
} 
```

recv() 的文档没有提到它如何使用缓冲区指针。为了更好地理解，我尝试在循环之前定义缓冲区，并且 recv() 似乎覆盖了缓冲区，而不是重新定义它。这是有道理的，因为 recv() 传递了一个指向缓冲区开头的指针。

是否有特定的原因在循环内一遍又一遍地定义缓冲区？还是我对此的基本理解正确？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T01:04:37.593

`recv`, as`read`和其他类似的函数，不关心缓冲区之前的内容，它只是使用它来写入结果。

并不是说无论如何都会有所作为：由于您没有初始化缓冲区，因此即使您将变量声明为循环的本地变量，它的内容也将是“未定义的”。

此外，在大多数 C 实现中：

*   不初始化该变量意味着它将采用该位置堆栈上发生的任何内容，这反过来意味着它将采用与前一次迭代时相同的位置，从而有效地为您提供与具有完全相同的结果循环外的变量。
*   堆栈分配很便宜——通常它们只需要调整一个寄存器；
*   实际上，它们甚至更便宜：通常寄存器调整只是在函数的开头完成，占所有局部变量；局部变量的作用域只是一个编译时构造，因为它是在函数启动时分配的。

显然，相反，如果您*初始化*变量，它会有所不同——执行初始化的代码必须在每次迭代时运行；但是，如上所述，不需要初始化任何东西，`recv`只是不关心缓冲区的当前状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T01:02:09.340

这不是浪费。它声明了这个变量的范围。编译器可能会回收堆栈上的空间用于其他目的，而不是从堆栈中分配更多超出此范围的空间。它在运行时不需要额外的费用——编译器在编译时计算必要的堆栈空间，并且只在函数开始时调整堆栈指针一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T01:02:04.923

在循环中声明一个变量只是为它保留堆栈空间；它不会清除内容或以其他方式触摸变量。因此，这种声明方式并不比在循环外声明它更昂贵。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T01:04:48.513

只有在构造成本高昂的情况下，才在循环中定义变量是不好的，而在 C 中很少出现这种情况。

即使是最基本的优化，它甚至都不会在循环的每次迭代中修改堆栈指针。许多编译器会在调试模式下对数组进行零初始化，但除非这个缓冲区很大，否则这不太可能是一个大问题。

在 C++ 中，您可能会考虑不使用昂贵的构造函数声明变量，如果您可以只在循环外构造一次就可以逃脱，但这在这里不会成为问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T02:02:39.097

> 我一直认为我不应该在循环内定义变量，因为它是不必要的或浪费的。

你总是有一个不正确的印象，而且这种印象不仅毫无根据，而且将一种非常糟糕的做法——过早优化——与一个非常好的做法相提并论，声明变量尽可能接近它们的用途。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-23T02:53:25.667

我还曾经认为，将声明移出循环会导致代码更快，尤其是对于更大的结构，例如数组。我认为这对于 malloc 的（堆）数据通常是正确的，因为在循环中调用 malloc 和 free 会浪费很多开销。对于堆栈数据（如您的），我认为这不是什么大问题。

但是，我最近遇到了相反的情况，我将声明移出内部循环，实际上最终得到了*较慢*的代码。我对此提出了一些可能的解释：

1.  当声明被移动到更广泛的范围时，编译器无法有效地优化代码。
2.  在循环迭代之间，大量数据被保存在内存中，导致缓存使用效率低下。

Anyway I don't have a good reference for this, but moving definitions in or out of loops can make the code faster or slower depending on the situation. You have to measure the performance before and after changing the code to see if there is a difference.

# deadlock - NBD 客户端和服务器在同一台机器上

> ID：12548923
> 
> 赞同：3
> 
> 时间：2011-09-21T13:40:44.330
> 
> 标签：deadlock

有*什么方法可以在**同一*台机器上运行 NBD（网络块设备）客户端和服务器而不会使系统死锁？

我已经筋疲力尽地寻找这个问题的答案。如果有人可以提供帮助，我将不胜感激。

更新：

我正在编写一个与谷歌存储系统对话的 NBD 服务器。我想在 NBD 上挂载一个文件系统并备份我的文件。如果我最终不得不在另一台机器上运行服务器，我会非常失望。我已经有的几个想法似乎无济于事：

*   告诉文件系统使用 O_DIRECT 标志打开块设备以绕过 linux 缓冲区缓存
*   使用原始设备（不幸的是，原始设备是字符设备，FSes 拒绝将它们用作底层设备）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-17T20:36:19.123

[仅作记录，自2008 年](https://github.com/torvalds/linux/commit/48cf6061b30205b29b306bf9bc22dd6f0b091461)以来就有可能在同一台机器上拥有 NBD 客户端和服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-29T11:14:00.270

使用虚拟机（不是容器）——你需要两个内核，但不需要两台物理机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-21T13:54:32.997

由于NBD 的 Sourceforge 项目的[首页](http://nbd.sourceforge.net/)说在这种情况下会在“几秒钟内”发生死锁，我猜答案是一个很大的“不”。

尝试写一个更完整的问题，说明您要实现的实际目标。有时您需要解决一个小问题，有时您需要着眼于全局。

# php - PHP Prepared Statements... 将变量绑定为 REGEXP 中的数字范围？

> ID：12548926
> 
> 赞同：3
> 
> 时间：2012-09-23T01:00:03.100
> 
> 标签：php, mysql, regex, pdo

```
$query = "SELECT * FROM `mytable` WHERE `file` REGEXP '[:val-9]'";
$stmt = $dbh->prepare($query);
$stmt->bindValue(':val', '1'); //I have also tried 1 without quotes
$stmt->execute(); 
```

引发此错误：

> 语法错误或访问冲突：1139 从正则表达式中得到错误“无效字符范围”

是否有可能做到这一点..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T01:21:24.467

占位符只能用于可以出现值的地方，不能嵌入字符串中。尝试：

```
$query = "SELECT * FROM `mytable` WHERE `file` REGEXP CONCAT('[', :val, '-9]')"; 
```

# c - 遍历所有可能的字符值？

> ID：12548930
> 
> 赞同：-2
> 
> 时间：2012-09-23T01:00:54.040
> 
> 标签：c, character

如何编写一个运行单个字符所有可能值的程序？例如，A、B、C、D 等，甚至转到 '、:、/ 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T01:06:37.963

输出所有可打印 ASCII 字符的简单方法可能是：

```
for (char c = ' '; c < 0x7f; c++) {
    putchar(c);
} 
```

可打印的 Unicode 字符集要大得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T01:33:07.833

```
#include <stdio.h>
#include <ctype.h>

/* For ASCII */
for (int c = 0; c < 128; c++)
{
    if (isprint(c))
        putchar(c);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T01:53:50.707

```
char aestheticChars = "ABCD':/"; // add whatever characters you consider aesthetic

char c, char* p;
for (p = aestheticChars; (c = *p) != '\0'; p++)
{
  // do something with c
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T01:26:22.480

对于 ASCII，请查看[http://www.cplusplus.com/reference/clibrary/cctype/](http://www.cplusplus.com/reference/clibrary/cctype/)以获取关于什么被认为是空白、什么被认为是字母数字、可打印、图形等的表格。然后遍历范围对你感兴趣。

@GregHewgill 的解决方案将为您提供所有“可打印”字符，但您可能需要对其进行调整以获取所有“图形”字符或所有“字母数字”字符。

# jquery - 为什么 jQuery 对插件使用原型属性？

> ID：12548952
> 
> 赞同：4
> 
> 时间：2012-09-23T01:05:57.263
> 
> 标签：jquery

将一个插件分配给 jQuery 原型属性。当一个人不使用 jQuery 的“新”时，这样做有什么意义？只有一个 jQuery 实例不是吗？那么插件不能直接分配给单例jQuery对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T01:17:42.773

插件方法必须自动添加到创建的每个新 jQuery 对象中。

`jQuery.fn`与`jQuery.prototype`将插件方法分配给将`jQuery.fn`其添加到 jQuery 原型中相同，因此每当创建新的 jQuery 对象时，该方法将自动可用。从技术上讲，它是一个`jQuery.fn.init`对象，但想法是一样的。

使用这样的字符串调用 jQuery：

```
$(".foo") 
```

创建一个新的 jQuery.fn.init 对象，该对象从 jQuery.fn（定义插件方法的地方）获取其原型。

下面是相关的 jQuery 代码，它显示了一个正在创建的新对象：

```
// Define a local copy of jQuery
var jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
},

// Give the init function the jQuery prototype for later instantiation
jQuery.fn.init.prototype = jQuery.fn; 
```

# javascript - 引导轮播转换和上一个/下一个按钮不起作用

> ID：12548954
> 
> 赞同：8
> 
> 时间：2012-09-23T01:06:21.520
> 
> 标签：javascript, jquery, twitter-bootstrap, slideshow, carousel

我正在尝试实现 twitter 引导轮播，但它不起作用 - 它不会自动切换图像，并且上一个/下一个按钮不起作用。

[我已经尝试按照Bootstrap Carousel Not Automatically Sliding](https://stackoverflow.com/questions/11233449/bootstrap-carousel-not-automatically-sliding)和[Bootstrap Carousel Not working](https://stackoverflow.com/questions/9353294/bootstrap-carousel-not-working)上的建议切换到 jquery 1.7.1 ，但似乎没有任何帮助。

任何想法，将不胜感激。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Slideshow Test</title>
        <link href="css/bootstrap.css" rel="stylesheet" type="text/css" />
        <script src="js/bootstrap.js"></script>
        <script src="js/jquery-1.7.1.min.js"></script>
        <script src="js/bootstrap-transition.js"></script>
    </head>
    <body>
        <div id="myCarousel" class="carousel slide" style="width:450px">
            <!-- Carousel items -->
            <div class="carousel-inner">
                <div class="item active"><img src="img/IMG_2.jpg"></div>                
                <div class="item"><img src="img/IMG_3.jpg"></div>
                <div class="item"><img src="img/IMG_1.jpg"></div>
                <!-- Carousel nav -->
                <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
            </div>
        </div>    
    </body>
</html> 
```

[您可以在www.abbymilberg.com/bootstrap](http://www.abbymilberg.com/bootstrap)查看它及其链接文件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-06T09:11:58.183

我遇到了同样的问题，即使在propper顺序中包含.js，我也修复了它在'onclick'事件上取消javascript，如下所示：

```
<a class="left carousel-control" href="#myCarousel" data-slide="prev" onclick="$('#myCarousel').carousel('prev')">‹&lt;/a>
<a class="right carousel-control" href="#myCarousel" data-slide="next" onclick="$('#myCarousel').carousel('next')">›&lt;/a> 
```

我知道这不是最干净的解决方案，但它确实有效。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-23T01:14:10.690

在包含 jquery.js 之后，您应该包含 bootstrap.js：

```
<script src="js/jquery-1.7.1.min.js"></script>
<script src="js/bootstrap.js"></script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-19T21:05:47.760

我有同样的问题，我通过将 z-index 添加到 css 来修复它：

```
.carousel-control.left, .carousel-control.right {
  left: 0;
  z-index: 1;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-27T05:44:01.877

```
<div class="left carousel-control" data-target="#myCarousel" data-slide="prev"/>
          <span class="glyphicon glyphicon-chevron-left"></span>
          <span class="sr-only">Previous</span>
</div>
<div class="right carousel-control" data-target="#myCarousel" data-slide="next"/>
          <span class="glyphicon glyphicon-chevron-right"></span>
          <span class="sr-only">Next</span>
</div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-23T01:14:31.017

尝试在控件开始之前关闭“carousel-inner”

```
<div id="myCarousel" class="carousel slide" style="width:450px">
    <div class="carousel-inner">
        <div class="item active"><img src="img/IMG_2.jpg"></div>                
        <div class="item"><img src="img/IMG_3.jpg"></div>
        <div class="item"><img src="img/IMG_1.jpg"></div>
    </div>
    <!-- Carousel nav -->
    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>

</div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-22T15:36:57.197

我有同样的症状，但我的问题是我没有在我的轮播中包含一个 id。`.carousel`正如评论中其他用户所建议的那样，在具有该类的同一个 div 上添加一个 id ，并`href="#my-carousel"`在按钮/链接上使用为我解决了这个问题。

```
<div id="my-carousel" class="carousel slide" style="width:450px">
            ^----------------------------------v
    <a class="carousel-control left" href="#my-carousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#my-carousel" data-slide="next">&rsaquo;</a>
</div> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-12T01:41:07.447

除了答案之外`user2139170`，这是构建轮播的正确方法（BootStrap 3.3.5）：

`[**jsFiddle Example**](http://jsfiddle.net/yv80533m/)`

```
<div id="myCarousel" class="carousel slide text-center" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <h4>A mind-bending lecture on applied philosophy by Oxford lecturer Ravi Zacharias.</h4>
            <br>
            <span class="font-normal">youtube/watch?v=3ZZaoavCsYE</span>
        </div>
        <div class="item">
            <h4>Director of the Human Genome Project discusses the greatest mystery of life</h4>
            <br>
            <span class="font-normal">youtube/watch?v=EGu_VtbpWhE</span>
        </div>
    </div>

    <a href="" class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a href="" class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div><!-- #myCarousel -->

<script>
    $(function(){

        $('.carousel-control').click(function(e){
            e.preventDefault();
            $('#myCarousel').carousel( $(this).data() );
        });

    });//END document.ready
</script> 
```

* * *

*注意：此答案需要 jQuery，因此请确保已加载库。当然，bootstrap 需要 jQuery，所以你应该已经引用了它。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-25T05:03:54.697

> 使用下面的代码将帮助你

**按钮功能良好**

*运行代码片段以检查它是否解决了您的问题*

```
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h2>Carousel Example</h2>  
  <div id="myCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      <li data-target="#myCarousel" data-slide-to="1"></li>
      <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner">
      <div class="item active">
        <img src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/4-col/img%20(2).jpg" alt="Los Angeles" style="width:100%;">
      </div>

      <div class="item">
        <img src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/4-col/img%20(4).jpg" alt="Chicago" style="width:100%;">
      </div>

      <div class="item">
        <img src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/4-col/img%20(6).jpg" alt="New york" style="width:100%;">
      </div>
    </div>

    <!-- Left and right controls -->
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

</body>
</html>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-07T03:49:52.327

我的上一个/下一个按钮不起作用。这是因为旧版本的引导 js 脚本。

我使用了bootstrap网站中提到的最新推荐版本的javascripts（jquery和bootstrap）并且它有效

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-03T08:13:25.667

检查您是否在 head 标签中粘贴了正确的引导链接。它对我有用。

# objective-c - NSCFData fastCharacterContents 崩溃？

> ID：12548961
> 
> 赞同：2
> 
> 时间：2012-09-23T01:07:06.493
> 
> 标签：objective-c, ios

我目前在控制台中收到此崩溃日志：

> 2011-08-23 19:18:40.064 App[1697:707]-[__NSCFData_fastCharacterContents]：无法识别的选择器发送到实例 0x1dbed0 2011-08-23 19:18:40.075 App[1697:707] ***由于未捕获而终止应用程序异常“NSInvalidArgumentException”，原因：“-[__NSCFData _fastCharacterContents]：无法识别的选择器发送到实例 0x11f1c0”

有谁知道这意味着什么？可能是什么原因造成的？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:26:53.857

[`NSData`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)对象不响应选择器`_fastCharacterContents`，因此会引发运行时异常。

`NSString`，但是，**确实**有一个具有该名称的私有方法，因此很可能您将`NSData`对象存储到假定为`NSString`.

# ios - 使用 Objective-C 将数据输入游戏的方法

> ID：12548962
> 
> 赞同：1
> 
> 时间：2012-09-23T01:07:52.763
> 
> 标签：ios, objective-c

我即将从事一个 Objective-C 游戏项目，我很好奇将恒定数据导入游戏的选项是什么。我作为 Flash 开发人员已经工作了很多年，在 Flash 中，我只需设置一个类文件并将像这样的对象放入其中......

```
static var arrowData:Object = {
                elementType:"projectile",name:"arrow",sourceType:"library", imgSource:"arrow", imageSourceSub:"",cellsX:1, cellsY:1,    
                bounderyType:"none",bounderyLeft:0,bounderyRight:1200, bounderyTop:80, bounderyBottom:580,
                position:{rotateToDir:false,positionType:"movieclip", randomX:false, randomY:false, endRandomX:600, endRandomY:400, startX:0, startY:0},
                visual:{imgLabel1:"", imgNumFrames1:15,imgFramesLoop1:true,runOnFrame1:0,runOnFrameFN1:"",runOnLastFN1:""},
                movement:{moveType:"arc", maxDistance:400, atTarget:"remove", target:"mouse", targetData1:"mouseX", targetData2:"none"},            
                physical:{physData:"spritesLayer"},
                interactive:{interactionType:"rect", removeOnInteraction:true, interactionResult:"ingame", interactionData1:"badGuysArray", interactionData2:"projectileCollision"},
                character:{damage:10}
            }; 
```

我在对象中有对象，但似乎没有任何明确的方法可以用 Objective-C 做同样的事情，所以我的问题是......

1.  有没有办法在Objective-C中做与上述相同的事情？
2.  将数据导入 Objective-C 的其他方法是什么？XML？
3.  iOS 游戏开发者通常如何存储他们不断的游戏数据？
4.  我将在这个项目中使用解析托管服务，是否有使用它来存储数据并从那里加载数据的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T13:26:24.230

正如@tc 的评论所提到的，维护相关信息组的常用方法是在 NSDictionaries（或其可变表亲）中。字典也可以嵌套。您有两种方法可以轻松保存这些内容：作为每个评论的 plist 或在“默认”系统中。后者对其存储的数据类型有更多限制。Apple 还有一个类可以在 JSON 和原生对象之间进行转换。我对问题 4 没有经验-希望其他人可以回答。

# objective-c - XCode 4.5 UiScrollView 问题

> ID：12548964
> 
> 赞同：3
> 
> 时间：2012-09-23T01:08:01.660
> 
> 标签：objective-c, xcode, ios5

我正在尝试使用带有图像数组的页面控件实现 UIScrollView。我使用了另一个项目的同一段代码，但它不适用于 Xcode 4.5。调试时ScrollView框架属性都是0，但是scrollview Outlet连接良好。图像不显示在卷轴中。这真的很奇怪。我观察到属性不会像以前的版本那样自动合成。这是代码：

```
@interface dashboardViewController : UIViewController <UIScrollViewDelegate>{

    BOOL pageControlBeingUsed;

}

@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;
@property (strong, nonatomic) IBOutlet UIPageControl *pageControl;

- (IBAction)changePage;

@end

   - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageWithContentsOfFile:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"fondo.jpg"]]];

        pageControlBeingUsed=NO;

        scrollView.delegate=self;

        [self buildScrollView];

        // Do any additional setup after loading the view.
    }

    -(void)buildScrollView{

        NSArray *imagesQueue = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"icoblog.png"], [UIImage imageNamed:@"icogaleria.png"], [UIImage imageNamed:@"icobio.png"], nil];

        for(int i = 0; i < imagesQueue.count; ++i) {

            UIImageView *image = [[UIImageView alloc] initWithImage:[imagesQueue objectAtIndex:i]];

            CGFloat xOrigin = i * (scrollView.frame.size.width);

            image.frame = CGRectMake(xOrigin, 0, scrollView.frame.size.width, scrollView.frame.size.height);

            [scrollView addSubview:image];

            image=nil;

        }

        scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * imagesQueue.count, self.scrollView.frame.size.height);

} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T18:17:42.847

在情节提要中选择您的滚动视图并取消选中文件属性下的“自动布局”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T01:12:47.613

尝试推动“自我”。在你没有的所有“scrollView”面前。

# visual-c++ - 一个错误直到它起作用......如何修复？

> ID：12548966
> 
> 赞同：-1
> 
> 时间：2012-09-23T01:08:50.130
> 
> 标签：visual-c++

```
#include <iostream>
#include <iomanip>
using namespace std;

int main () // print to console: 3.0*5.0=15.00
{
    double a;
    double b;
    a =(3.0);
    b =(5.0);
    cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
    cout << "* " << b << "\n" << endl;
    cout << "------" << endl;
    cout << fixed << setprecision (2) << a*b << "\n" << endl;

    return 0;
}

int calculate () // print to console: (7.1*8.3)-2.2=56.73
{
    double a;
    double b;
    double c;
    a = (7.1);
    b = (8.3);
    c = (2.2);
    cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
    cout << "* " << b << "\n" << endl;
    cout << "- " << c << "\n" << endl;
    cout << "------" << endl;
    cout << setprecision(2) << (a*b)-c << "\n" << endl;
}
int calculation () // print to console: 3.2/(6.1*5.0)=0.10
{
    double a;
    double b;
    double c;
    a=(3.2);
    b=(6.1);
    c=(5.0);
    cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
    cout << b << "*" << c << endl; //how can I use variables instead of using quotes?
    cout << "------" << endl;
    cout << setprecision(2) << a/(b*c) << "\n" << endl;

    system("PAUSE");

    return 0;
} 
```

这个输出错误是什么意思？我如何解决它？有人请给我解释一下。我应该添加：`int calculate(int a, int b, int c)`？

输出：

```
(32): error C4716: 'calculate' : must return a value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:11:49.333

您已将函数声明为返回`int`值但没有`return`声明的函数。`void calculate()`如果您不需要从中返回值，请尝试将声明更改为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:12:21.687

该`calculate`函数需要返回一个值。您需要在末尾添加类似这样的内容`calculate`：

```
return (a*b)-c; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T01:13:48.693

这只是因为您的计算函数应该返回一个`int` 并且您的函数中没有返回。

如果你不想返回任何东西，你可以`void calculate()`把

# jquery - 检索标签兄弟时的标签搜索

> ID：12548981
> 
> 赞同：2
> 
> 时间：2012-09-23T01:11:32.927
> 
> 标签：jquery, mysql, sql, database

如果我需要从表 A 中获取具有表 B 中匹配标记的行，我只需执行一个简单的 JOIN ON/WHERE B.name=X。但是 MySQL 将只返回来自 A 的行和来自 B 的匹配标记。

如果我想从表 A 中检索所有在表 B 中具有匹配项的所有内容，*同时*从表 B 中检索所有链接到表 A 中的行的所有内容，我该怎么办。

```
A:
a.id
1
2
3

B: 
b.id   | b.a_id   | b.name
1      | 1        | foo
2      | 1        | bar
3      | 1        | derp
4      | 2        | foo
5      | 2        | derp
6      | 3        | bar

A search for "foo" should then return
a.id   | b.id     | b.a_id   | b.name
1      | 1        | 1        | foo
1      | 2        | 1        | bar
1      | 3        | 1        | derp
2      | 4        | 2        | foo
2      | 5        | 2        | derp 
```

感谢我能得到的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T01:14:20.343

```
 SELECT * FROM a JOIN b on b.a_id = a.id 
    WHERE EXISTS (SELECT 1 from b where a_id = a.id and b.name = 'foo') 
```

在评论风暴之后，我意识到你想问什么。这应该是比 IN 子句更快的解决方案。

IN 子句有一些令人讨厌的问题，即必须为返回的每一行重新打开游标，因为 MySQL 必须检查其中的每个值。EXIST 子句可以重用游标，因为它只是检查它是否存在。请记住，在这种情况下实际需要运行的不同查询的数量等于 a 中值的数量。由于游标只是打开以测试是否存在而不是读取，因此除非查询不同，否则无需创建新游标。

我必须找到一些文档来支持 MySQL，但 Oracle 就是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:21:43.713

```
SELECT a.id, b.id, b.name FROM a 
RIGHT JOIN b ON (a.id = b.a_id) 
WHERE a.id IN (SELECT b.a_id FROM b WHERE b.name = 'foo') 
```

我想这就是你要找的。可能不是最高效的解决方案，但我希望它能奏效。

编辑：

```
SELECT a_new.id, b.id, b.name FROM 
    (SELECT b.a_id FROM b WHERE b.name = 'foo') AS a_new
RIGHT JOIN b ON (a_new.id = b.a_id) 
```

我不认为它会比这更好，基本上你不需要再查询表 a 了；您从 b 中获取与“foo”匹配的所有行，然后将这些行与所有相关项连接起来。

# function - 算子的部分应用

> ID：12548982
> 
> 赞同：0
> 
> 时间：2012-09-23T01:11:33.730
> 
> 标签：function, haskell, types, currying, partial-application

如果我想在字符末尾添加一个空格以返回一个列表，如果我不传递任何参数，我将如何使用部分应用程序来完成此操作？

类型也是？

```
space :: Char -> [Char] 
```

由于使用 ++ 和 : 运算符的“解析错误”，我无法在末尾添加空格。

到目前为止，我所拥有的是：

```
space :: Char -> [Char]
space = ++ ' ' 
```

任何帮助将非常感激！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T02:25:13.647

做你想做的事在 Haskell 中很常见，它有自己的语法，但作为 Haskell，它非常轻量级。例如，这有效：

```
space :: Char -> [Char]
space = (:" ") 
```

所以你离正确的解决方案不远了。（与.`[Char]`相同的是包含字符的字符串。）让我们先看看使用类似的函数来了解它的窍门。库中有一个名为 的函数，用于测试两个文件名或文件夹名是否代表同一事物。（这解决了 unix上与.`String``" "``' '``equalFilePath :: FilePath -> FilePath -> Bool``mydir``MyDir`

```
isMyBestFile :: FilePath -> Bool
isMyBestFile fp = equalFilePath "MyBestFile.txt" fp 
```

但是由于函数首先吞噬它们的第一个参数，然后返回一个新函数来吞噬下一个，等等，我可以把它写成更短的

```
isMyBestFile = equalFilePath "MyBestFile.txt" 
```

这是可行的，因为`equalFilePath "MyBestFile.txt"`它本身就是一个接受一个参数的函数：它的类型是`FilePath -> Bool`. 这是部分应用程序，它非常有用。也许我不想费心编写单独的`isMyBestFile`函数，但想检查我的列表中是否有它：

```
hasMyBestFile :: [FilePath] -> Bool
hasMyBestFile fps = any (equalFilePath "MyBestFile.txt") fps 
```

或者只是部分应用的版本：

```
hasMyBestFile = any (equalFilePath "MyBestFile.txt") 
```

请注意我需要如何将括号括起来`equalFilePath "MyBestFile.txt"`，因为如果我写了`any equalFilePath "MyBestFile.txt"`, 那么`filter`将尝试使用`equalFilePath`不带 , 的`"MyBestFile.txt"`函数，因为函数首先会吞噬它们的第一个参数。`any :: (a -> Bool) -> [a] -> Bool`

现在有些函数是中缀运算符——从之前和之后获取它们的参数，比如`==`or `<`。在 Haskell 中，这些只是常规函数，没有硬连线到编译器中（但指定了优先级和关联性规则）。如果我是一个从未听说过`equalFilePath`并且不关心它解决的可移植性问题的 unix 用户，那么我可能会想要做

```
hasMyBestFile = any ("MyBestFile.txt" ==) 
```

它也可以工作，因为 == 是一个常规函数。当您使用运算符函数执行此操作时，它称为运算符部分。

它可以在前面或后面工作：

```
hasMyBestFile = any (== "MyBestFile.txt") 
```

你可以用任何你喜欢的操作员来做：

```
hassmalls = any (< 5) 
```

一个方便的列表运算符是`:`. `:`左边有一个元素，右边有一个列表，依次创建一个新的两个列表，所以`'Y':"es"`给你`"Yes"`. （秘密地，`"Yes"`实际上只是`'Y':'e':'s':[]`因为`:`是一个构造函数/元素组合器的值的简写，但这在这里不相关。）使用`:`我们可以定义

```
space c = c:" " 
```

`c`我们可以像往常一样摆脱

```
space = (:" ") 
```

希望现在对您更有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T01:20:59.163

你在这里想要的是一个[operator 部分](http://www.haskell.org/haskellwiki/Section_of_an_infix_operator)。为此，您需要用括号将应用程序括起来，即

```
space = (: " ") 
```

这是语法糖

```
space = (\x -> x : " ") 
```

`(++)`在这里不起作用，因为它需要一个字符串作为第一个参数，比较：

```
(:)  :: a -> [a] -> [a]
(++) :: [a] -> [a] -> [a] 
```

# objective-c - 检测到自动释放对象

> ID：12548988
> 
> 赞同：1
> 
> 时间：2012-09-23T01:12:51.783
> 
> 标签：objective-c, tdd, autorelease

我在 iOS 和 Mac OS X 开发中使用 Objective-C 中的测试驱动开发，我希望能够编写测试来验证我使用类工厂方法创建的对象是否返回自动释放对象。

有人如何编写一个测试来验证提供的对象是自动释放的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:40:30.077

简而言之，你不能。无法知道对象的自动释放状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T04:40:52.680

在某些情况下，您可以推断对象是否被放置在自动释放池中。这个想法是声明一个指向对象的指针，在一个`@autoreleasepool`块中实例化它，然后验证它是否`dealloc`在块结束后调用。

通过您选择的混合或覆盖的任何组合`dealloc`，您必须首先提供一种方法来验证`dealloc`已调用。我编写了一个`NSObject`具有以下接口和实现的类别，它提供了一个`deallocationDelegate`属性，该属性将接收有关`handleDeallocation:`何时释放对象的消息。

```
@interface NSObject (FunTimes)

@property (nonatomic, assign) id deallocationDelegate;

@end

@implementation NSObject (FunTimes)

+ (void)load
{
    Class klass = [NSObject class];
    SEL originalSelector = @selector(dealloc);
    Method originalMethod = class_getInstanceMethod(klass, originalSelector);
    SEL replacementSelector = @selector(funDealloc);
    Method replacementMethod = class_getInstanceMethod(klass, replacementSelector);
    if(class_addMethod(klass, originalSelector, method_getImplementation(replacementMethod), method_getTypeEncoding(replacementMethod)))
    {
        class_replaceMethod(klass, replacementSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod));
    }
    else
    {
        method_exchangeImplementations(originalMethod, replacementMethod);
    }
}

- (void)funDealloc
{
    if (self.deallocationDelegate)
        [self.deallocationDelegate performSelector:@selector(handleDeallocation:) withObject:self];

    [self funDealloc];
}

static char myKey;

- (void)setDeallocationDelegate:(id)deallocationDelegate
{
    objc_setAssociatedObject(self, &myKey, deallocationDelegate, OBJC_ASSOCIATION_ASSIGN);
}

- (id)deallocationDelegate
{
    return objc_getAssociatedObject(self, &myKey);
}

@end 
```

我在我的应用程序委托中运行了一些测试代码，只是为了看看它是否有效。我声明了一个实例，该`NSMutableArray`实例旨在保存`NSValue`从调用对象的指针派生的实例`-handleDeallocation`，我将其实现如下所示：

```
- (void)handleDeallocation:(id)toDie
{
    NSValue *pointerValue = [NSValue valueWithPointer:toDie];
    [self.deallocatedPointerValues addObject:pointerValue];
} 
```

现在，这是我运行的一个片段。`SomeClass`是`NSObject`没有附加属性或方法的子类。

self.deallocatedPointerValues = [NSMutableArray 数组];

```
SomeClass *arsc = nil;
@autoreleasepool {
    arsc = [[[SomeClass alloc] init] autorelease];
    arsc.deallocationDelegate = self;
    NSValue *prePointerValue = [NSValue valueWithPointer:arsc];
    BOOL preDeallocated = [self.deallocatedPointerValues containsObject:prePointerValue];
    NSLog(@"PreDeallocated should be no is %d",preDeallocated);
}

NSValue *postPointerValue = [NSValue valueWithPointer:arsc];
BOOL postDeallocated = [self.deallocatedPointerValues containsObject:postPointerValue];
NSLog(@"Post deallocated should be yes is %d",postDeallocated); 
```

在这种情况下，可以验证由`arsc`（代表自动释放的SomeClass）指向的对象由于结束`@autoreleasepool`块而被释放。

这种方法有几个重大限制。`retain`一，当其他消息可能发送到从您的工厂方法返回的对象时，这不起作用。此外，这不言而喻，swizzling`dealloc`应该只在实验环境中进行，我认为有些人会争辩说它不应该在测试中被 swizzled（显然它不应该在生产中被 swizzled！）。最后，更重要的是，这不适用于 Foundation 对象，例如`NSString`那些已经优化的方式，您是否正在创建一个新实例并不总是很清楚。因此，如果有的话，这对于您自己的自定义对象是最合适的。

最后，我认为真正做到这一点并不实际。我觉得这比它值得做的工作更多，并且适用范围如此之小，因为在内存管理方面，花时间学习工具更好，成为更好的投资。而且，当然，由于 ARC 的优势，这种方法从一开始就是过时的。无论如何，如果您确实需要编写此类测试，并且可以解决这里的限制，请随意调整此代码。我很想知道它在实际测试环境中的表现如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T05:25:04.110

我赞扬您对 TDD 的奉献。但是内存管理是一个你只需要遵循公认的约定的领域：“当返回一个对象时，它需要照顾自己的生命周期。” 当我不小心过度释放某些东西时，我的单元测试会抓住我，但它们不会发现泄漏。为此，我首先依靠分析，然后依靠运行泄漏仪器。

# html - 左键复制到剪贴板

> ID：12548997
> 
> 赞同：0
> 
> 时间：2012-09-23T01:14:22.733
> 
> 标签：html

> **可能重复：**
> [如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)

假设我有一个包含以下内容的网页：

```
<h1 id="foo"> Some string </h1> 
```

现在我想复制`Some string`到剪贴板。但条件是：

*   我的网页（应用程序）是面向鼠标的，所以我不想让用户触摸键盘。
*   右键已经在从事另一个任务，所以我不能使用右键。

唯一的方法是将鼠标悬停在`<h1>`with 上`id="foo"`并按下鼠标左键。

我用谷歌搜索它并找到了一种 JavaScript 方法来做到这一点。但很快我就知道那不是跨浏览器。那么，有没有办法在鼠标左键单击时复制文本`h1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:23:59.710

使用 adobe flash call 可能是您最好的选择。

我已经用这个成功了：[http ://code.google.com/p/zeroclipboard/](http://code.google.com/p/zeroclipboard/)

如果 java 方法不可接受，因为它不兼容跨浏览器，我什至不会建议一些陈旧的（并且可能导致安全漏洞的）Active X 组件，它实际上只能是 IE（除了少数例外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:34:57.383

在这里开始搜索，发现[http://www.steamdev.com/zclip](http://www.steamdev.com/zclip)

* * *

该插件与所有浏览器交叉兼容并且运行良好： http: [//plugins.jquery.com/project/clipboard](http://plugins.jquery.com/project/clipboard)