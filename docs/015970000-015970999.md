# StackOverflow 问答 15970000-15970999

# python - 如何将另一个字典中的字典写入 Python 中的 CSV 文件

> ID：15970009
> 
> 赞同：0
> 
> 时间：2013-04-12T11:19:20.677
> 
> 标签：python, csv, dictionary

我在字典中有一本字典，如下所示：

```
{'ID1':{'sam':1,'maj':5, 'tif':7, 'paul':1},
 'ID2':{'maj':4,'bib':5},
 ...} 
```

如何将其写入 CSV 文件？我想为主键设置单独的积云，为内部键设置单独的列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:33:51.783

希望这能为您指明正确的方向。假设您想按 ID 的排序顺序排列。

```
>> import csv
>>> d = {'ID1':{'sam':1,'maj':5, 'tif':7, 'paul':1},'ID2':{'maj':4,'bib':5},}
>>> with open('test.csv', 'w') as f:
        fieldnames = ('sam', 'maj', 'tif', 'paul', 'bib')
        w = csv.DictWriter(f, fieldnames)
        for k, row in sorted(d.items()):
            w.writerow(row)

>>> with open('test.csv') as f: # showing contents
        print f.read()

1,5,7,1,    
,4,,,5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:11:10.630

![在此处输入图像描述](https://i.stack.imgur.com/tdE3v.png)我想这就是你要找的东西：

```
import csv
with open('/home/test/kelvin1/add.csv', 'wb') as csvfile:
    kev = csv.writer(csvfile, delimiter=' ',
                 quotechar='|', quoting=csv.QUOTE_MINIMAL)
    k ={'ID1':{'sam':1,'maj':5,'tif':7,'paul':1},'ID2':{'maj':4,'bib':5}}
    for i in k:
          kev.writerow(i)
          for j in k[i]:
              kev.writerow(j)
              kev.writerow('%d' % (k[i][j])) 
```

这段代码对我有用

# javascript - 是否有最大的 javascript 文件大小，浏览器可以处理什么？

> ID：15970010
> 
> 赞同：8
> 
> 时间：2013-04-12T11:19:21.287
> 
> 标签：javascript, browser, webkit, filesize

设计令人难以置信的大型 web 应用程序，我们对这些大型项目中的文件大小是否有任何上限或限制或最佳实践？我见过的最大的可能是 twitter/gmail，它有大约 1mb（缩小）javascript - 但是浏览器可以处理多少？

如果有一个 5mb、10mb 或 100mb javascript 缩小的大型应用程序怎么办？它什么时候会严重影响性能或内存使用（即使应用程序编写和优化得很好） - jit 处理程序可以采取任何措施吗？有没有收益递减？

除了 gmail、twitter、facebook、googledocs 等常见的应用程序之外，是否有任何应用程序如此大的真实示例？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:42:56.137

据我所知，现在对 JavaScript 文件有这样的限制，对各种文件也没有限制。

唯一的限制是您运行 Web 应用程序的系统：

浏览器将消耗尽可能多的 CPU 和 RAM 来处理您的 Web 应用程序。互联网连接也是一个瓶颈。

尽管 Web 应用程序可以增长到相当大的大小，但没有这样一个真实的（生产性使用的）应用程序提供最大 100 MB 大小的 JavaScript 文件的示例——我的意思是，想想看，100 MB 大小的 JavaScript 文件（ ！），没有人会访问该页面，停留在页面上并等待 JavaScript 文件的下载完成*并且*浏览器的 JavaScript 引擎处理此文件。

但是请随意尝试编写一个大小为 100 MB 的 JavaScript 文件，该文件执行多项任务，例如执行`console.log()`一千次，并在此处向我们报告当时发生的情况。

* * *

一些怀旧：我从 Mozilla 找到了这个[错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=21637)，它已经有将近*13 年*的历史了。

# android - 在 TabHost 中屏幕旋转时更改片段布局时出现异常

> ID：15970012
> 
> 赞同：2
> 
> 时间：2013-04-12T11:19:32.893
> 
> 标签：android, android-layout, android-tabhost, screen-rotation, onconfigurationchanged

同事！我有一个例外，我不知道如何避免。我在 SherlockFragmentActivity 中使用 ViewPager 创建了 TabHost。TabHost 包含片段。

活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.tabs_fragment_layout);
    mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mViewPager = (ViewPager) findViewById(R.id.pager);

    mTabHost.setup();
    setupTabs();

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString(CURRENT_TAB_KEY));
    }
}

private void setupTabs() {
    nameTabs = getResources().getStringArray(R.array.tabs);

    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

    mTabsAdapter.addTab(newTab(TABS_TAG_1, R.drawable.ic_action_countries, 
            nameTabs[COUNTRIES_TAB_INDEX]), CountryTabFragment.class, null);
    mTabsAdapter.addTab(newTab(TABS_TAG_2, R.drawable.ic_action_settings_dark, 
            nameTabs[SETTINGS_TAB_INDEX]),UltiPreferenceFragment.class, null);
    mTabsAdapter.addTab(newTab(TABS_TAG_3, R.drawable.ic_action_about, 
            nameTabs[ABOUT_TAB_INDEX]), AboutFragment.class, null);
}

private TabSpec newTab (String tag, int iconId, String tabTitle) {
    TabSpec tab = mTabHost.newTabSpec(tag);
    tab.setIndicator(tabTitle, getResources().getDrawable(iconId));
    return tab;
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString(CURRENT_TAB_KEY, mTabHost.getCurrentTabTag());
}

 private Fragment getFragmentByIndex(ViewPager container, int position) {
     String name = makeFragmentName(container.getId(), position);
     return  getSupportFragmentManager().findFragmentByTag(name);
 }

 private String makeFragmentName(int viewId, int index) {
     return getString(R.string.fragment_name_pattern, viewId, index);
 }

public static class TabsAdapter extends FragmentPagerAdapter 
        implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {

     private final Context mContext;
     private final TabHost mTabHost;
     private final ViewPager mViewPager;
     private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

     static final class TabInfo {
         private final String tag;
         private final Class<?> clss;
         private final Bundle args;

         TabInfo(String tag, Class<?> clss, Bundle args) {
             this.tag = tag;
             this.clss = clss;
             this.args = args;
         }
     }

     static class DummyTabFactory implements TabHost.TabContentFactory {
         private final Context mContext;

         public DummyTabFactory(Context context) {
             mContext = context;
         }

         @Override
         public View createTabContent(String tag) {
             View view = new View(mContext);
             view.setMinimumWidth(0);
             view.setMinimumHeight(0);
             return view;
         }
     }

     public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
         super(activity.getSupportFragmentManager());
         mContext = activity;
         mTabHost = tabHost;
         mViewPager = pager;
         mTabHost.setOnTabChangedListener(this);
         mViewPager.setAdapter(this);
         mViewPager.setOnPageChangeListener(this);
         mViewPager.setId(R.id.view_pager);
     }

     public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
         tabSpec.setContent(new DummyTabFactory(mContext));
         String tag = tabSpec.getTag();

         TabInfo info = new TabInfo(tag, clss, args);
         mTabs.add(info);
         mTabHost.addTab(tabSpec);
         notifyDataSetChanged();
     }

     @Override
     public int getCount() {
         return mTabs.size();
     }

     @Override
     public Fragment getItem(int position) {
         TabInfo info = mTabs.get(position);
         return Fragment.instantiate(mContext, info.clss.getName(), info.args);
     }

     @Override
    public int getItemPosition(Object object) {
        return PagerAdapter.POSITION_NONE;
    }

    @Override
     public void onTabChanged(String tabId) {
         int position = mTabHost.getCurrentTab();
         mViewPager.setCurrentItem(position);
     }

     @Override
     public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
     }

     @Override
     public void onPageSelected(int position) {
         TabWidget widget = mTabHost.getTabWidget();
         int oldFocusability = widget.getDescendantFocusability();
         widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
         mTabHost.setCurrentTab(position);
         widget.setDescendantFocusability(oldFocusability);
     }

     @Override
     public void onPageScrollStateChanged(int state) {
     }
} 
```

在 7 英寸设备上，我有 2 种布局用于 TabHost 的 FirstFragment，一种用于纵向和横向。当我旋转屏幕时，它必须更改布局。不幸的是，我无法重新创建活动，因为在这种情况下，我会丢失对话（DialogFragment）和其他长期进程的上下文，这些进程在旋转屏幕时在应用程序中可用。所以，1）我在 AndroidManifest.xml 中使用

```
android:configChanges="orientation|screenSize" 
```

2）覆盖Activity中的onConfigurationChanged（）方法：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    int oldConfigOrientation = getRequestedOrientation();
    super.onConfigurationChanged(newConfig);
    if (newConfig.orientation != oldConfigOrientation) {
        Toast.makeText(this, "orientation changed!", Toast.LENGTH_SHORT).show();
        mTabsAdapter.notifyDataSetChanged();
    }
} 
```

3) 和 FragmentPagerAdapter 中的 ovveride getItemPosition()-方法用于选项卡的重新布局。当我旋转屏幕时出现问题，它应该加载一个片段而不是两个面板布局的单面板布局：

```
04-12 12:30:44.019: E/AndroidRuntime(11151): java.lang.IllegalArgumentException: No view found for id 0x7f05004f (com.ziko.widget:id/setup_layout_fragment) for fragment SetupCityFragment{410fac80 #1 id=0x7f05004f}
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1861)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1474)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.view.ViewPager.populate(ViewPager.java:1011)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:522)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:494)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.view.ViewPager.dataSetChanged(ViewPager.java:874)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.view.ViewPager$PagerObserver.onChanged(ViewPager.java:2688)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:35)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.support.v4.view.PagerAdapter.notifyDataSetChanged(PagerAdapter.java:276)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at com.ziko.widget.ui.ConfigurationActivity.onConfigurationChanged(ConfigurationActivity.java:140)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.app.ActivityThread.performConfigurationChanged(ActivityThread.java:3461)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.app.ActivityThread.handleConfigurationChanged(ActivityThread.java:3585)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1220)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.os.Looper.loop(Looper.java:137)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at java.lang.reflect.Method.invokeNative(Native Method)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at java.lang.reflect.Method.invoke(Method.java:511)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-12 12:30:44.019: E/AndroidRuntime(11151):    at dalvik.system.NativeStart.main(Native Method) 
```

当我将屏幕从单面板（纵向）布局旋转到两面板（横向）时，从来没有发生过这个问题，但总是相反。调用方法 mTab​​sAdapter.notifyDataSetChanged() 时抛出异常；在 onConfigurationChanged() 中。

谁能解释异常的原因以及将来如何避免它？也许还有另一种方式如何在旋转屏幕时提供更改选项卡的布局？

# c++ - 使用 boost::filesystem 遍历目录而不抛出异常

> ID：15970013
> 
> 赞同：7
> 
> 时间：2013-04-12T11:19:34.083
> 
> 标签：c++, boost, boost-filesystem

我有一个目录的路径，我想遍历它的所有子目录，顺便收集文件的路径。

```
namespace fs = boost::filesystem;

std::vector<fs::path> traverse_if_directory(fs::path& f) {
    std::vector<fs::path> result;
    if (fs::is_directory(f)) {      
        for (fs::recursive_directory_iterator it(f), eit; it != eit; ++it) {
            if (!fs::is_directory(it->path())) {
                result.push_back(it->path());
            }       
        }
    }
    else {
        result.push_back(f);
    }

    return result;
} 
```

不幸的是，在遍历的过程中，我偶然发现了一个我无权查看的目录，并且上面的代码抛出了。但显然，在这种情况下也不例外，我应该继续，跳过这个锁定的目录。

但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T12:20:06.440

哈，想通了，有办法：

```
std::vector<fs::path> traverse_if_directory(fs::path& f) {
    std::vector<fs::path> result;
    boost::system::error_code ec;

    if (fs::is_directory(f)) {      
        for (
             fs::recursive_directory_iterator it(f, ec), eit;
             it != eit;
             it.increment(ec)
            ) {
            if (ec) {
                it.pop();
                continue;
            }
            if (!fs::is_directory(it->path())) {
                result.push_back(it->path());
            }
        }
    }
    else {
        result.push_back(f);
    }

    return result;
} 
```

有一个非抛出重载，它接受 type 的输出参数`boost::system::error_code`，所以我可以在每次增量后检查是否有任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-29T12:21:44.217

当最后一个目录条目发生错误时，Joker_vD 的答案会崩溃。例如，当目标目录包含一个没有权限的子目录时。原因是显然不需要的“it.pop()”。此外，不应执行“继续”，因为它会跳过下一个条目。发生错误后，迭代器已经指向下一个有效条目，或者等于结束迭代器。

这是一个更正的版本：

```
std::vector<fs::path> traverse_if_directory(const fs::path& f) {
    std::vector<fs::path> result;
    boost::system::error_code ec;

    if (fs::is_directory(f)) {
        for (fs::recursive_directory_iterator it{f, ec}, end; it != end; it.increment(ec)) {
            if (!fs::is_directory(it->path())) {
                result.push_back(it->path());
            }
        }
    }
    else {
        result.push_back(f);
    }

    return result;
} 
```

# algorithm - 在c ++中找到所有对欧几里得距离的更快方法

> ID：15970015
> 
> 赞同：0
> 
> 时间：2013-04-12T11:19:36.187
> 
> 标签：algorithm, geometry

说，在 D 维欧几里得空间中，给定 N 个格点，（例如：最高 6D 空间是可能的），现在你必须找到所有对欧几里得距离。现在我们一般用 n^2 循环，但是如果 N = 5000，那么这个 O(n^2) 太慢了，那么有什么有效的方法来找到距离吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:24:25.733

有 N*(N-1)/2 对，所以 O(N^2) 是可能的最佳时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:47:55.437

虽然@MBo 是正确的，因为这`O(N^2)`是最好的大 O 时间，但如果这些点确实位于一种特殊的格子上，即矩形格子上，您可以利用对称性来降低前置因子。一般来说，我们可以假设我们有一个 D 维方格，`m`在每个方向上最多向外延伸。这给出了`N=2*d*m`分数。我们只需要计算这个格子中的上象限，因为其他维度将是相同的。例如，在 2D 中考虑以下点：

```
(3,4)   -> 5
(-3,4)  -> 5 
(3,-4)  -> 5 
(-3,-4) -> 5 
```

通常，您可以将计算量减少一个因子`(2^d-1)`点，这对于更高的维度非常重要。在 6 维中，这是一个常数因子`63`。

# c# - 向下滚动时加载 GridView

> ID：15970017
> 
> 赞同：1
> 
> 时间：2013-04-12T11:19:52.833
> 
> 标签：c#, javascript, jquery, asp.net, sql

我有一个 UserControl，它是一个嵌套的 GridView（facebook 像墙），我想在向下滚动时加载帖子。我正在关注这篇文章.. [点击我](http://www.go4coding.com/post/2011/04/11/Auto-loading-content-on-page-scroll-in-aspnet-using-jquery.aspx)

问题是这种方法使用第一列的最后一行来获取最后一个 productid 像这样

```
var lastProductId = $("#GridViewUserScraps tr:last").children("td:first").html(); 
```

但在我的情况下，尽管我在数据库中有一个 ScrapId 列（主键），但我没有在 UserControl 的 GridView 的任何列中显示任何 id。如何在向下滚动时加载帖子？我怎样才能让它工作？

我的用户控件：

```
<div id="divProducts" style="height:700px;overflow:auto">
            <asp:GridView ID="GridViewUserScraps" ItemStyle-VerticalAlign="Top" AutoGenerateColumns="False"
                GridLines="None" Width="100%" ShowHeader="False" runat="server" AlternatingRowStyle-BackColor="#A5A5A5"
                CellPadding="4" ForeColor="#333333" DataKeyNames="ScrapId" OnRowCommand="GridViewRowCommand">
                <Columns>
                    <asp:TemplateField>
                        <FooterTemplate>
                            <asp:LinkButton ID="LinkButton1" runat="server">Load More</asp:LinkButton>
                        </FooterTemplate>
                        <ItemTemplate>
                            <table align="left" cellpadding="1" cellspacing="2">
                                <tr>
                                    <td>
                                        <a href='<%#getUserHREF(Container.DataItem)%>'>
                                            <img align="middle" src='<%#getSRC(Container.DataItem)%>' border="0" width="50px" /></a>
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                            </table>
                            <div align="justify">
                                <b>
                                    <%#DataBinder.Eval(Container.DataItem,"firstname")%>
                                    <div>

         <asp:HiddenField ID="hiddenLastProductID" runat="server" Value='<%# Eval("id") %>' />
    </div>
                                </b>
                                <br />
                                <%#DataBinder.Eval(Container.DataItem, "Message")%>
                                <br />
                                <asp:Image ID="Image" runat="server"  ImageUrl='<%# Eval("url") %>' style="max-width:500px;" />
                            </div>
                            <span class="SmallBlackText">Posted On: &nbsp;</span>
                            <asp:Label ID="lblSendDate" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"SendDate")%>'></asp:Label>
                            </span>
                            <br />
                            <%-- <asp:LinkButton ID="lnklike" runat="server" 
                                CommandArgument="<%# ((GridViewRow) Container).RowIndex %>" 
                                CommandName="LikeCmd">Like</asp:LinkButton>
                            &nbsp;&nbsp;&nbsp;
                            <asp:LinkButton ID="lnkunlike" runat="server">unlike</asp:LinkButton>--%>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;
                            <asp:ImageButton ID="lnklike" runat="server" ImageUrl="~/Images/thumbsup.png" Height="20px"
                                Width="20px" CommandName="like" CommandArgument='<%# Eval("ScrapId")%>' />
                            <asp:UpdatePanel runat="server" ID="UpdatePanel" UpdateMode="Conditional">
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="lnklike" EventName="Click" />
                                </Triggers>
                                <ContentTemplate>
                                    &nbsp;<asp:Label ID="Label1" runat="server" Text='<%# Controls_GetUserScraps.abc((int)Eval("ScrapId")) %>' />
                                </ContentTemplate>
                            </asp:UpdatePanel>
                            <%--<asp:Label ID="Label1" runat="server" Text='<%# WebPageName.StaticMethodName((int)Eval("ScrapId")) %>' />--%>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:ImageButton ID="lnkunlike" runat="server" CommandArgument='<%# Eval("ScrapId")%>'
                                CommandName="unlike" Height="20px" ImageUrl="~/Images/thumbsdown.png" Width="20px" />
                            <asp:UpdatePanel runat="server" ID="UpdatePanel2" UpdateMode="Conditional">
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="lnkunlike" EventName="Click" />
                                </Triggers>
                                <ContentTemplate>
                                    &nbsp;<asp:Label ID="Label2" runat="server" Text='<%# Controls_GetUserScraps.xyz((int)Eval("ScrapId")) %>'></asp:Label>
                                    &nbsp;&nbsp;
                                </ContentTemplate>
                            </asp:UpdatePanel>
                            <asp:LinkButton ID="lnkcomment" runat="server">Comment</asp:LinkButton>
                            &nbsp;&nbsp;
                            <asp:LinkButton ID="lnkviewall" runat="server" CommandName="viewall" CommandArgument='<%# Eval("ScrapId")%>'>View All</asp:LinkButton>
                            <br />
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:Panel ID="Pnlchildgrid" runat="server">
                                <asp:GridView ID="childgrid" runat="server" AutoGenerateColumns="False" OnRowCommand="childgrid_RowCommand"
                                    Style="width: 450px; float: right;">
                                    <Columns>
                                        <asp:TemplateField>
                                            <ItemTemplate>
                                                <table align="left" cellpadding="1" cellspacing="2">
                                                    <tr>
                                                        <td>
                                                            <a href='<%#getUserHREF(Container.DataItem)%>'>
                                                                <img align="middle" src='<%#getSRC(Container.DataItem)%>' border="0" width="30px" /></a>
                                                        </td>
                                                        <td>
                                                            &nbsp;
                                                        </td>
                                                    </tr>
                                                </table>
                                                <div align="justify">
                                                    <b>
                                                        <%#DataBinder.Eval(Container.DataItem, "firstname")%></b><br />
                                                    <%#DataBinder.Eval(Container.DataItem, "commentmsg")%>
                                                    <br />
                                                </div>
                                                <span class="SmallBlackText">Posted On: &nbsp;</span>
                                                <asp:Label ID="lblSendDate" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"SendDate")%>'></asp:Label>
                                                </span>
                                                <br />
                                                <asp:ImageButton ID="lnklike" runat="server" Height="20" Width="20" CommandName="childlike"
                                                    CommandArgument='<%# Eval("commentid")%>' ImageUrl="~/Images/thumbsup.png" />
                                                &nbsp;
                                                <asp:Label ID="Label1" runat="server" Text='<%# Controls_GetUserScraps.abc1((int)Eval("commentid")) %>' />
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <asp:ImageButton ID="lnkunlike" runat="server" CommandArgument='<%# Eval("commentid")%>'
                                                    CommandName="childunlike" Height="20" ImageUrl="~/Images/thumbsdown.png" Width="20" />
                                                &nbsp;<asp:Label ID="Label2" runat="server" Text='<%# Controls_GetUserScraps.xyz1((int)Eval("commentid")) %>'></asp:Label>
                                                &nbsp;&nbsp;
                                                <%--  <asp:LinkButton ID="lnkcomment" runat="server">Comment11111</asp:LinkButton>--%>
                                                <br />
                                            </ItemTemplate>
                                        </asp:TemplateField>
                                    </Columns>
                                </asp:GridView>
                                <br />
                                <asp:Panel ID="Panel1" runat="server">

                                    <asp:TextBox ID="txtcomment" runat="server" Width="500px" ></asp:TextBox>
                                    <asp:Button ID="Button1" runat="server" Text="Comment" CommandName="comment" CommandArgument='<%# Eval("ScrapId")%>' />
                                </asp:Panel>
                            </asp:Panel>
                            <br />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
                <RowStyle BackColor="#EFF3FB" />
                <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#2461BF" />
                <AlternatingRowStyle BackColor="White" />
            </asp:GridView>
            </div> 
```

# java - 带有 ehcache 的 Hibernate 4 是否需要 ehcache-core 库？

> ID：15970019
> 
> 赞同：9
> 
> 时间：2013-04-12T11:19:54.780
> 
> 标签：java, hibernate, ehcache

我正在尝试将应用程序从 Hibernate 3 升级到 Hibernate 4。该应用程序使用 ehcache。

升级到 Hibernate 4.2.0.Final 时，我按照建议添加了对 hibernate-ehcache-4.2.0.Final 的依赖。

当我启动应用程序时，我收到以下错误：

```
Caused by: java.lang.NoClassDefFoundError: org/hibernate/cache/TimestampsRegion 
```

根据[http://www.javacraft.org/2012/03/migrate-to-hibernate-4-ehcache.html](http://www.javacraft.org/2012/03/migrate-to-hibernate-4-ehcache.html)我应该删除对 ehcache-core 的依赖，只使用 hibernate 提供的 jar 来解决这个错误。

现在，如果我按照这些说明删除此依赖项，我使用 net.sf.ehcache.CacheManager 的应用程序将不再编译。

```
// For example, this no-longer works
CacheManager manager = CacheManager.getInstance(); 
```

所以我的问题是，我可以使用这两个库并像以前一样继续工作（不更新应用程序），还是我必须更改应用程序，在这种情况下，hibernate-ehcache 甚至提供访问缓存所需的功能？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-10T19:41:55.677

使用 Hibernate 4 时，您必须使用 org.hibernate 打包类。**net.sf.ehcache**的目标是 Hibernate 3。

Form 4 他们直接在 Hibernate repo 中移植到 4（在我们看来，这是最明智的做法）。

所以使用**org.hibernate.cache.ehcache.EhCacheRegionFactory**应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-20T09:41:06.163

检查您的项目中是否有任何 .properties 文件，如 hsqlDatabaseConfig.properties，尝试更新属性如下

```
sessionFactory.hibernateProperties = hibernate.cache.use_second_level_cache=true\n\
                                     hibernate.cache.use_query_cache=true\n\
                              hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.internal.EhcacheRegionFactory\n\ 
```

# javascript - 使用 jQuery/AJAX 用新的表单/内容重新填充 div

> ID：15970023
> 
> 赞同：0
> 
> 时间：2013-04-12T11:20:05.980
> 
> 标签：javascript, jquery, ajax

是否有任何 jQuery/AJAX 函数在显示表单（或任何相关内容）时，按下按钮时包含原始表单的 div 会被新表单替换？本质上，一个多部分的表单，无需重新加载页面。

我可以使用这样的东西吗？

```
$('form#myForm').submit(function(event) {
    event.preventDefault();
        $.ajax({
            type: '',
            url: '',
            data: $(this).serialize(),
            success: function(response) { 
                $('#divName').html(response); 
                //somehow repopulate div with a second form?
            }
        })
        return false;
 }); 
```

我以前用它来将项目添加到列表中，但我从来没有用它来完全重新填充不同的内容。我怎样才能将它引导到第二种形式？

**编辑 - 我让它工作，但只有当我为替换写'#form2'时。我提醒了响应，我得到了`{"formToShow":"show2"}`。我试过做 response.formToShow 但它是未定义的。**

```
<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
</head>

<div id="divName">
    <form method="POST" action = "#" id="form1">
        <input type="textbox" name="textbox1" value="1"/>
        <input type="submit" name="submit1"/>
    </form>

    <form method="POST" action = "#" id="form2" style="display: none">
        <input type="textbox" name="textbox2" value="2"/>
        <input type="submit" name="submit2"/>
    </form>
</div>

<script>
 $('form#form1').submit(function(event) {
    event.preventDefault();
        $.ajax({
            type: 'JSON',
            url: 'receiving.php',
            data: $(this).serialize(),
            success: function(response) { 
                $('#form1').hide();  //hides
                //$('#form2').show();  //this will show
                $(response.formToShow).show(); //this does not display form 2
            }
        })
        return false;
    });
</script> 
```

这里是接收.php。当我查看此页面时`{"formToShow":"show2"}`显示

```
<?php
echo json_encode(array("formToShow" => "#form2"));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:23:20.930

检查[JQuery 加载函数](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:25:16.373

这是个人喜好，但我永远不会通过响应发送 HTML 并像那样显示它，我要做的是：

从服务器发回一个 JSON 数组，例如`{ formToShow: "#form1" }`

然后你可以简单地这样做：

```
success: function(response) { 
   $('form').hide();
   $(response.formToShow).show();
} 
```

显然，使用这种方法，您还必须在标记中使用第二种形式，如下所示：

```
<form method="POST" action = "#" id="form2" style="display: none">
<input type="textbox" name="textbox2"/>
<input type="submit" name="submit2"/>
</form> 
```

您还必须更改（拾取阵列）：

```
 $.ajax({
        type: 'JSON' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:29:29.603

尝试这个

```
$('form#myForm').submit(function(event) {
    event.preventDefault();
    $.ajax({
        type: '',
        url: '',
        data: $(this).serialize(),
        success: function(response) {
        $('#divName').html(response); 
        $('#form1').hide();
        $('#form2').show();
        }
    })
    return false;
 });

<form method="POST" action = "#" id="form1">
    <input type="textbox" name="textbox1"/>
    <input type="submit" name="submit1"/>
</form>

<form method="POST" action = "#" id="form2" style="dispay:none;">
    <input type="textbox" name="textbox2"/>
    <input type="submit" name="submit2"/>
</form> 
```

# iphone - #define 值中的不同文本字体 - iOS

> ID：15970025
> 
> 赞同：-2
> 
> 时间：2013-04-12T11:20:11.247
> 
> 标签：iphone, ios, fonts, colors, uialertview

我正在尝试为标签设置文本。我想为不同的句子设置不同的字体大小和颜色。说

```
#define Label @"This is a label Title. This is label subscript" 
```

在这里，我需要一种字体的“这是一个标签标题”。以及其他字体的“这是标签下标”。可能吗。我试着做

`#define Label @"This is a label Title. <b>This is label subscript <b>"`和其他几件事。但没有变化。

谢谢吉腾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:26:06.450

字符串没有字体。您需要设置标签本身的字体，或使用[属性字符串](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/AttributedStrings/Concepts/AttrStrings.html)

下面是一个简单示例，说明如何在属性字符串中使用多个属性：

```
NSString *s1 = @"Hello ";
NSString *s2 = @"World";

NSDictionary *attr1 = [NSDictionary dictionaryWithObjectsAndKeys:
    [UIFont fontWithName:@"Arial" size:20] , NSFontAttributeName, nil];

NSDictionary *attr2 = [NSDictionary dictionaryWithObjectsAndKeys:
    [UIFont fontWithName:@"Georgia" size:40] , NSFontAttributeName, nil];

NSMutableAttributedString *as = [[NSMutableAttributedString alloc] 
    initWithString:[s1 stringByAppendingString:s2] attributes:attr1];

[as setAttributes:attr2 range:NSMakeRange(s1.length, s2.length)]; 
```

要将文本放入标签中，您可以使用：

```
myLabel.attributedText = as; 
```

我建议不要将这种格式放在宏中，因为代码变得混乱且难以维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:35:42.360

您可以使用此方法。

```
+ (void)setMultiColorAndFontText:(NSString *)text rangeString:(NSArray *)rangeString label:(UILabel*) label font:(NSArray*) fontName color:(NSArray*) colorName{
label.layer.sublayers = nil;

NSMutableAttributedString *mutableAttributedString = [[ NSMutableAttributedString alloc]initWithString:text];

for (int i =0 ; i<[rangeString count]; i++)
{
    CTFontRef  ctFont = CTFontCreateWithName((__bridge CFStringRef) [UIFont fontWithName:[fontName objectAtIndex:i] size:10.0].fontName, [UIFont fontWithName:[fontName objectAtIndex:i] size:10.0].pointSize, NULL);

    NSRange whiteRange = [text rangeOfString:[rangeString objectAtIndex:i]];

    if (whiteRange.location != NSNotFound)
    {
        [mutableAttributedString addAttribute:(NSString *)kCTForegroundColorAttributeName value:(id)[colorName objectAtIndex:i] range:whiteRange];
        [mutableAttributedString addAttribute:(NSString*)kCTFontAttributeName
                                        value:( __bridge id)ctFont
                                        range:whiteRange];
    }
}

CGSize expectedLabelSize = [text sizeWithFont:[UIFont fontWithName:@"HelveticaNeue-CondensedBold" size:10.0f] constrainedToSize:CGSizeMake(186,100) lineBreakMode:UILineBreakModeWordWrap];

CATextLayer   *textLayer = [[CATextLayer alloc]init];
textLayer.frame =CGRectMake(0,0, label.frame.size.width,expectedLabelSize.height+4);
textLayer.contentsScale = [[UIScreen mainScreen] scale];
textLayer.string=mutableAttributedString;
textLayer.opacity = 1.0;
textLayer.alignmentMode = kCAAlignmentLeft;
[label.layer addSublayer:textLayer];
[textLayer setWrapped:TRUE];

label.lineBreakMode = UILineBreakModeWordWrap;

[label setText:@""]; 
```

}

使用此方法，您可以在同一标签中显示不同大小和不同颜色的文本。

# mysql - 使用 MySQL 中的加密 blob 字段匹配一行中的所有关键字

> ID：15970029
> 
> 赞同：1
> 
> 时间：2013-04-12T11:20:33.710
> 
> 标签：mysql, select, encryption, blob

我有一个 MySQL 表，其中文本字段使用 AES_ENCRYPT 存储为 BLOB。我需要将几个关键字与行匹配，条件是所有关键字必须存在于一行中才能返回。虽然这在非加密字段上使用 MATCH/AGAINST 效果很好，但我的设置不走运。

我的“人”表：

```
+============+===========+
| name_first | name_last |
+============+===========+
| John       | Smith     |
+------------+-----------+
| Jane       | Smith     |
+============+===========+ 
```

例如，在搜索“John”和“Smith”时，只应返回实际包含这两个关键字的行。名“Jane”和姓“Smith”的行不应匹配。

唯一似乎有效的选择是使用 LIKE 时：

```
SELECT 
AES_DECRYPT(name_first,"MyKey"),
AES_DECRYPT(name_last,"MyKey") 
FROM people 
WHERE (LOWER(CONVERT(AES_DECRYPT(name_first,"MyKey") USING latin1)) LIKE "%john%" 
OR LOWER(CONVERT(AES_DECRYPT(name_last,"MyKey") USING latin1)) LIKE "%john%" 
OR LOWER(CONVERT(AES_DECRYPT(name_first,"MyKey") USING latin1)) LIKE "%smith%" 
OR LOWER(CONVERT(AES_DECRYPT(name_last,"MyKey") USING latin1)) LIKE "%smith%") 
```

但是，我的 SELECT 返回 John 和 Jane 记录。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:48:58.987

您是否尝试过类似的方法：

```
SELECT 
  AES_DECRYPT(name_first,"MyKey"),
  AES_DECRYPT(name_last,"MyKey") 
FROM people 
  WHERE (LOWER(CONVERT(AES_DECRYPT(name_first,"MyKey") USING latin1)) LIKE "%john%" 
     AND LOWER(CONVERT(AES_DECRYPT(name_last,"MyKey") USING latin1)) LIKE "%smith%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T21:59:28.063

经过一段时间的研究，我发现我的问题的唯一解决方案是创建一个临时 MySQL（仅在执行 PHP 脚本期间存在），从我的加密表中提供非加密数据，然后执行 MATCH/AGAINST . 由于表很大，因此搜索速度非常慢，但是您能做什么？

# python - POS标记的NLTK语料库中的正则表达式

> ID：15970033
> 
> 赞同：2
> 
> 时间：2013-04-12T11:20:43.607
> 
> 标签：python, regex, nlp, nltk

我正在 NLTK 中加载带有 POS 标记的语料库，我想找到某些涉及 POS 标记的模式。这些模式可能非常复杂，包括许多不同的 POS 标签组合。示例输入字符串：

> 我们/PRP花费/VBD一些/DT时间/NN阅读/NN关于/IN/DT历史/JJ重要性/NN的/IN茶/NN**在/IN韩国/NNP和/CC中国/NNP**和/CC然后/ RB尝过/VBD最/DT最/JJS贵/JJ绿/JJ茶/NN I/PRP有/VBP曾经/RB见过/VBN./.

在这种情况下，POS 模式类似于：`(IN) (THE)? (NNP) (CC)? (NNP)`...

我正在加载我的语料库：

```
 reader = TaggedCorpusReader(corpus_dir, r'.*\.pos') 
```

显然，我可以使用 Python 的`re`包来做到这一点，但这样的正则表达式很快就会变得难以理解、调试和更新其他开发人员。

在 NLTK 中这样做最优雅的方式是什么？是否有辅助函数可以在 POS 标记的文本中找到比通常的正则表达式更具可读性的模式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T00:50:29.387

NLTK 中有一个名为[str2tuple](http://nltk.org/_modules/nltk/tag/util.html)的函数，它将标记的句子解析为元组列表，然后您可以轻松地将 POS 标记提取到单独的列表中。不需要正则表达式。

# java - 为什么要编译 XPath 表达式？

> ID：15970034
> 
> 赞同：3
> 
> 时间：2013-04-12T11:20:43.933
> 
> 标签：java, xml, xpath

我有以下两个代码段，它们做同样的事情，除了一个正在编译表达式，一个只是评估它。

```
 //1st option - compile and run

    //make the XPath object compile the XPath expression
    XPathExpression expr = xpath.compile("/inventory/book[3]/preceding-sibling::book[1]");
    //evaluate the XPath expression
    Object result = expr.evaluate(doc, XPathConstants.NODESET);
    nodes = (NodeList) result;
    //print the output
    System.out.println("1st option:");
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println("i: " + i);
        System.out.println("*******");
        System.out.println(nodeToString(nodes.item(i)));
        System.out.println("*******");
    }

    //2nd option - evaluate an XPath expression without compiling

    Object result2 = xpath.evaluate("/inventory/book[3]/preceding-sibling::book[1]",doc,XPathConstants.NODESET);
    System.out.println("2nd option:");
    nodes = (NodeList) result2;
    //print the output
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println("i: " + i);
        System.out.println("*******");
        System.out.println(nodeToString(nodes.item(i)));
        System.out.println("*******");
    } 
```

输出完全相同。编译和仅评估有什么区别？为什么要编译/不编译表达式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T11:25:40.920

编译 XPath 表达式会将其保存为可以立即使用的格式。评估表达式时也会编译，但编译后的结果会被丢弃。

当反复使用相同的表达式时（例如在循环中），建议进行编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:26:32.410

第二个`evaluate`也隐式编译表达式，但在评估后立即丢弃编译的形式。在您的示例中，这没有任何区别，因为您只使用了一次表达式。

但是，如果您多次使用该表达式，则编译一次并多次重新使用已编译的表单与每次重新编译相比可以节省大量的处理时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:23:30.790

编译 xpath 需要时间。`xpath.evaluate`每次调用它时都会编译 xpath。使用预编译表达式可以提高性能。

# google-maps - 页面加载后立即激活谷歌地图键盘绑定

> ID：15970035
> 
> 赞同：1
> 
> 时间：2013-04-12T11:20:44.660
> 
> 标签：google-maps, google-maps-api-3, google-street-view

是否可以在页面加载后立即激活谷歌地图（街景）的键盘绑定？[我在这里](http://devfiles.myopera.com/articles/523/demo04.html)找到了一个工作示例，不幸的是它使用了不再支持的 Google Maps API v2。如果您嵌入了普通的 Google Maps StreetView，则在您最初单击地图之前，键盘绑定不起作用（请参阅[此处](https://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-map)）。

有没有可能在 v3 中做到这一点？我已经尝试过[这个](https://stackoverflow.com/questions/10334380/arrow-keys-navigation-on-google-maps-without-clicking-the-map)和[这个](https://stackoverflow.com/questions/9195814/google-maps-v3-keyboard-accessibility/9218055#9218055)但没有成功，因为那不适用于街景。

**更新：**使用键盘绑定，我特别想到了箭头键可以在地图上移动

谢谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:09:26.627

好的，找到了一个解决方案并为此创建了一个[Gist](https://gist.github.com/christian-bromann/5392762)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T06:10:20.537

@ChristianB 提出的解决方案对我不起作用。可能是因为它适用于旧版本的 Google Maps API（我的是 v3），或者它使用了不同的渲染模式（我的是 webgl，它使用画布）。

我所做的是等待position_changed事件触发，然后在canvas元素上设置一个tabIndex属性，然后在canvas元素上触发focus()。之后，键盘绑定工作。

编码：

```
var panorama = new google.maps.StreetViewPanorama({
  ...
  //forcing webgl 
  mode: 'webgl'
});

//Set an event listener for position_changed, 
//this will be triggered the first time the panorama is loaded, 
//and every time the position changes
google.maps.event.addListener(panorama, 'position_changed', function() {
  //This is how to get the canvas in my current version of the Google Maps API, 
  //note that this might change in the future.
  var canvas = document.querySelector('canvas.widget-scene-canvas');

  //first set a tabindex on the canvas, 
  //without it focus will not make the canvas the active element
  canvas.setAttribute("tabindex", "-1");
  canvas.focus();

  //To test that it worked you can check that document.activeElement is the canvas
  console.log(document.activeElement);
}); 
```

您可能希望将代码放在一个单独的函数中，并在画布失去焦点时调用它。

在 Google Chrome v55 中测试的代码。

# magento - 将数据从块传递到控制器 Magento 的其他方式

> ID：15970036
> 
> 赞同：1
> 
> 时间：2013-04-12T11:20:50.853
> 
> 标签：magento

我对 PHP 编程和 Magento 还是很陌生。我想将当前 ProductId 从自定义块中的表单传递给控制器​​（新操作）。

是的，我知道一种方法是在自定义块表单中添加一个隐藏的输入（使用我的产品 ID），然后通过常规检索值：

```
$this->getRequest()->getPost('myvalue')) 
```

Magento 是否有更好的方法来检索控制器中的值而无需声明额外的秘密输入字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:05:42.390

对您希望在 Magento 中坚持最佳实践有好处！然而，将数据传递给控制器​​是相当标准的。如果我们查看如何从产品页面添加产品，我们实际上会在表单操作 URL 的参数中看到产品 ID：

`http://domain.com/checkout/cart/add/uenc/uenc_value/product/45573/`

...`45573`产品 ID 在哪里。当然，这也可以通过我一直使用的隐藏输入字段发送到控制器。请注意，以上内容与 Magento 中的相同`http://domain.com/checkout/cart/add/?uenc=uenc_value&product=45573`。

另一种存储数据以供将来使用的控制器的方法是将数据设置到会话中。对于将数据发布到控制器，我不推荐这种方法，但要记住这一点：

```
$session = Mage::getSingleton('core/session');
$session->setMyValue(true); 
```

`my_value`然后，我们可以稍后通过实例化会话来检索数据。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:05:43.557

Magento 提供了一种方法来构造具有必要值的 URL，根据配置 DOM 计算。块（以及块模板）可以`Mage_Core_Block_Abstract::getUrl()`直接调用：

```
$this->getUrl('some_handle/foo/test',array('id'=>'some_value'));
// Mage::getUrl() will work as well 
```

以上将导致以下 URL：

```
http://base_url/frontname/foo/action/id/some_value/ 
```

...可以在`FooController` `testAction()`as中读取

```
$this->getRequest()->getParam('id') // 'some_value' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:21:37.830

可以通过不同的方式传递您的数据：

1.  您可以使用 Magento 的[魔法 setter 和 getter](http://codemagento.com/2011/02/where-are-my-getters-and-setters/)。
    所以你必须这样做来设置值：

    ```
    Mage::getSingleton('core/session')->setSomeVariable($value); 
    ```

    这要检索它：

    ```
    Mage::getSingleton('core/session')->getSomeVariable(); 
    ```

2.  或者你可以使用寄存器。

    ```
    Mage::register('key', $value); //to set your data
    Mage::registry('key'); //to get your data 
    ```

# salesforce - Salesforce Apex - 从 SOQL 查询填充对象

> ID：15970038
> 
> 赞同：1
> 
> 时间：2013-04-12T11:20:55.760
> 
> 标签：salesforce, apex-code, soql

我有一个简单的 SOQL 查询，它返回与联系人和 CampaignMember 相关的信息。我正在尝试使用 SOQL 查询的结果填充自定义对象。但是，加载 Visualforce 页面时出现以下错误：

**CampaignMember 的字段 Campaign.name 无效**

```
列出campaignMembers = [从CampaignMember中选择campaign.name、contact.id、contact.firstname、contact.lastname、status、campaignId，其中contactId = '003U000000U0eNq'和campaigns中的campaignId]；

for (整数 i = 0; i < campaignMembers.size(); i++) {
    results.add（新的 CampaignMemberResult（
        (String)campaignMembers[i].get('CampaignId'),
        (String)campaignMembers[i].get('campaign.name'),
        真的
    ));
}

```

我已经在开发者控制台中单独运行了 SOQL 查询，并且查询成功。为什么我不能从 for 循环中的 SOQL 查询中提取活动名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:47:55.183

您看到的错误是由于您应该将其写为`campaignMembers[i].Campaign.Name`. 或者，如果您坚持使用 getter 语法，[`campaignMembers[i].getSobject('Campaign').get('Name')`](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_sobject.htm).

您需要包装器对象（或其他任何东西`CampaignMemberResult`）的任何特殊原因？我有一种奇怪的感觉，您编写了太多代码来实现简单的事情；） 语法`campaignMembers[i].Campaign.Name`也意味着您不必对字符串使用强制转换。

* * *

另外-如果您需要知道“*此联系发生在哪些活动中*”，您有两种方法：

**平坦的**

```
select contact.id,contact.firstname, contact.lastname, 
    campaignid, campaign.name, 
    status 
from CampaignMember 
where contactId = '003U000000U0eNq' 
```

**子查询**

从联系人向下到活动成员的相关列表，然后向上到活动以获取他们的姓名

```
SELECT Id, FirstName, LastName,
    (SELECT CampaignId, Campaign.Name FROM CampaignMembers)
FROM Contact WHERE Id = '003U000000U0eNq' 
```

示例如何在视觉力中直接使用“平面”结果（不带`CampaignMemberResult`）：

顶尖：

```
public List<CampaignMember> flatMembers {get;set;} // insert dick joke here

flatMembers = [select contact.id,contact.firstname, contact.lastname, 
    campaignid, campaign.name, 
    status 
from CampaignMember 
where contactId = '003U000000U0eNq']; 
```

音频：

```
<apex:pageBlockTable value="{!flatMembers}" var="cm">
    <apex:column value="{!cm.Contact.LastName}" />
    <apex:column value="{!cm.Status}" />
    <apex:column value="{!cm.Campaign.Name}" /> 
```

* * *

**编辑**

> 我的最终目标是在联系人记录上显示一个 Visualforce 页面，该页面显示所有活动的列表，每个活动旁边都有一个复选框，指示联系人是否是成员。

你真的意识到它可以很快变成一张很长的桌子吗？也许对活动进行一些过滤（如果您想阅读一些高级的东西 - 检查“StandardSetController”的文档）。此外，我很确定有一些方法可以从活动报告中将联系人/潜在客户添加到活动中 - 也许开箱即用的东西可以节省您的时间并且更易于维护......

但是代码解决方案非常简单，从一个辅助包装类开始：

```
public class CampaignWrapper{
    public Boolean selected {get;set;}
    public Campaign c {get; private set;}
    public CampaignWrapper(Campaign c){
        this.c = c;
        selected = !c.CampaignMembers.isEmpty();
    }
} 
```

然后查询并构建包装器列表：

```
List<CampaignWrapper> wrappers = new List<CampaignWrapper>();
for(Campaign c : [SELECT Id, Name, (SELECT Id FROM CampaignMember WHERE ContactId = '...')
    FROM Campaign
    LIMIT 1000]){
    wrappers.add(new CampaignMember(c));
} 
```

你应该准备好了;）如果它只是为了显示 - 你甚至可能不需要包装类（visualforce表达式中的一些技巧可能甚至使用`Map<Campaign, Boolean>`......

1000 条记录是传递给 Visualforce 的集合的限制（如果您的页面是只读的，则为 10K）。过去 - 分页，很可能与上述 StandardSetController 一起使用。

# breakpoints - Chrome 开发工具 - 断点之间经过的时间

> ID：15970041
> 
> 赞同：4
> 
> 时间：2013-04-12T11:21:08.547
> 
> 标签：breakpoints, google-chrome-devtools

在 Chrome 开发者工具中，在 JavaScript 文件中添加两个断点并执行整个代码后，有没有办法测量它们之间经过的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T13:00:10.293

您可以使用控制台对象的[time 和 timeEnd 方法](https://developers.google.com/chrome-developer-tools/docs/console-api#consoletimelabel)来记录代码中两点之间的经过时间。

# hadoop - 如何指定 mapreduce 应该在其上运行的单个任务跟踪器（节点）？

> ID：15970044
> 
> 赞同：0
> 
> 时间：2013-04-12T11:21:20.390
> 
> 标签：hadoop, mapreduce

在 mapreduce 作业期间，各个任务将在随机节点上运行，有没有办法限制任务应该运行的节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:05:43.083

Hadoop 不会随机选择节点来运行任务。考虑数据局部性，否则会有很多网络开销。

任务和它们运行的​​节点之间没有关联。Hadoop 不提供任何此类功能。

# java - 属性的 JAXB 解组返回 null

> ID：15970046
> 
> 赞同：6
> 
> 时间：2013-04-12T11:21:23.423
> 
> 标签：java, xml, jaxb, unmarshalling

解组 XML 文件后，作为 XML 文件中属性的所有属性的值都为 NULL（fileDateTime、fileId 等...）

我真的不明白为什么，因为我有正确的注释`@XmlAttribute(name = "FileDateTime")`和`@XmlAttribute(name = "FileId")`

如您所见，我不使用任何命名空间（所以我认为不是命名空间问题！）

我正在使用 JDK 1.6、Sax 2.0.1 和 XercesImpl 2.9.1

谢谢你的帮助。

**测试.xml**

```
<KeyImport_file FileDateTime="2013-05-30T09:00:00" FileId="KeyImport_source_20121231124500">
    <!--1 or more repetitions:-->
    <record record_number="10">
    ...
    </record>
</KeyImport_file> 
```

**KeyImportFile.java**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "record"
})
@XmlRootElement(name = "KeyImport_file")
public class KeyImportFile {

    @XmlElement(required = true)
    protected List<KeyImportFile.Record> record;

    @XmlAttribute(name = "FileDateTime")
    @XmlSchemaType(name = "dateTime")
    protected XMLGregorianCalendar fileDateTime;

    @XmlAttribute(name = "FileId")
    protected String fileId;
etc...
etc... 
```

**解析方法（解组和 XSD 验证）：**

```
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import javax.xml.XMLConstants;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.UnmarshallerHandler;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;
import java.io.InputStream;

private KeyImportFile parseXML(final InputStream xmlInputStream, final StreamSource xsdSource)
        throws Exception
{
    KeyImportFile keyImportFile;

    SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = schemaFactory.newSchema(xsdSource);

    JAXBContext jc = JAXBContext.newInstance(KeyImportFile.class);

    UnmarshallerHandler unmarshallerHandler = jc.createUnmarshaller().getUnmarshallerHandler();

    SAXParserFactory saxParserFactory = SAXParserFactory.newInstance();
    saxParserFactory.setSchema(schema);

    SAXParser saxParser = saxParserFactory.newSAXParser();
    XMLReader xmlReader = saxParser.getXMLReader();
    xmlReader.setContentHandler(unmarshallerHandler);
    xmlReader.setErrorHandler(keyImportErrorHandler);

    InputSource inputSource = new InputSource(xmlInputStream);
    xmlReader.parse(inputSource);
    xmlInputStream.close();

    keyImportFile = (KeyImportFile) unmarshallerHandler.getResult();

    return keyImportFile;
} 
```

**编辑**

只需在不使用 sax 的情况下更改我的解析方法，它就可以工作。知道为什么吗？我想将 sax 与 jabx 一起使用来解决性能问题。

```
KeyImportFile keyImportFile;

SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
Schema schema = schemaFactory.newSchema(xsdSource);

JAXBContext jc = JAXBContext.newInstance(KeyImportFile.class);

Unmarshaller unmarshaller = jc.createUnmarshaller();
unmarshaller.setSchema(schema);
keyImportFile = (KeyImportFile) unmarshaller.unmarshal(xmlInputStream); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:08:32.840

**解决**

似乎 JAXB 不能与 SAX 解析器一起正常工作，除非解析器设置为可识别名称空间。

刚刚添加了这一行，它工作正常

```
saxParserFactory.setNamespaceAware(true); 
```

# apache - Apache 403 仅在 DocumentRoot 上的某些文件夹的禁止问题

> ID：15970051
> 
> 赞同：0
> 
> 时间：2013-04-12T11:21:45.440
> 
> 标签：apache, permissions, http-status-code-403, document-root, windows-2003-webserver

当我将 documentroot 设置在以下位置时，我收到 403 Apache Forbidden 错误：

> C:\Google%20Drive\public_html

但是当我放的时候它工作正常

> C:\public_html

我认为问题是由于 Windows 文件夹权限，但我试图复制为好的，它似乎是准确的。请参阅随附的屏幕截图。似乎没问题，但它不起作用 ![附截图](https://i.stack.imgur.com/yBdRf.png)

请你帮助我好吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:50:06.993

我找到了自己的解决办法。它正在将文件夹更改为另一个文件夹。如果不是，这是不可能的......谢谢谁试图帮助我。

# c# - 在 c# 中单击按钮更改 tabPage.text 中显示的整数

> ID：15970052
> 
> 赞同：0
> 
> 时间：2013-04-12T11:21:49.137
> 
> 标签：c#, numbers, int, buttonclick, tabpage

我似乎无法通过在 c# 中单击按钮来更改 tabPage.text 中显示的整数。

我试图将其更改为字符串，但这并没有帮助。

tabPage上显示数字“24”，但按下按钮时不会增加或减少。有任何想法吗？

这是代码：

```
public partial class Form1 : Form
    {
        static int ledigeRom = 24;    
        public Form1()
        {
            InitializeComponent();
        }            
        private void Form1_Load(object sender, EventArgs e)
        {

        }               
        private void Rom1_Click_1(object sender, EventArgs e)
        {                  
           if (Rom1.BackColor == Color.Red)
            {
                Rom1.BackColor = Color.Green;
                ledigeRom++;
            }    
            else
            {
                Rom1.BackColor = Color.Red;
                ledigeRom--;
            }            
        } 
```

这是来自 Form1.Designer.cs 的代码：

`this.tabPage1.Text = "1.Etasje " + ledigeRom;`（这就是为什么 int 的静态）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:27:48.417

您应该使用变量而不是静态。

> int ledigeRom = 24;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:49:04.260

试试这个代码：

```
private void button1_Click(object sender, EventArgs e)
        {
            if (button1.BackColor == Color.Red)
            {
                button1.BackColor = Color.Green;
                this.tabPage1.Text="1.Etasje" + ledigeRom++;
             }
            else
            {
                button1.BackColor = Color.Red;
                this.tabPage1.Text = "1.Etasje" + ledigeRom--;

            }  
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:39:34.740

`Rom1_Click_1`将您的活动 更改为

```
 private void Rom1_Click_1(object sender, EventArgs e)
    {                  
       if (Rom1.BackColor == Color.Red)
        {
            Rom1.BackColor = Color.Green;
            ledigeRom++;
        }    
        else
        {
            Rom1.BackColor = Color.Red;
            ledigeRom--;
        }   
     //include this
      this.tabPage1.Text = "1.Etasje " + ledigeRom;          
    } 
```

# mysql - 为什么在使用 utf8_unicode_ci 索引时 = 与 LIKE 不同？

> ID：15970053
> 
> 赞同：3
> 
> 时间：2013-04-12T11:21:51.420
> 
> 标签：mysql, collation, equality, sql-like

我有一个数据库表，其列`name`定义为`VARCHAR(255) COLLATE utf8_unicode_ci`具有唯一索引。它包含名称`"Grosse"`。

以下语句不返回任何行：

```
SELECT name FROM authors WHERE name LIKE 'Große' COLLATE 'utf8_unicode_ci' 
```

我已经尝试过添加和不`COLLATE`添加（这可能不是必需的）。

以下语句返回正确的行：

```
SELECT name FROM authors WHERE name = 'Große' 
```

为什么我得到不同的结果，两个语句都不应该返回该行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:52:35.520

`LIKE`操作员逐个字符地执行匹配。当然`Große`和`Grosse`长度甚至不相等，所以无法匹配。

试一试`SELECT 'ß' LIKE 'ss' COLLATE 'utf8_unicode_ci'`，你会收到'假'（0）

尝试`SELECT 'ß' = 'ss' COLLATE 'utf8_unicode_ci'`，您将收到“真实”（1）

顺便说一句，同样的行为适用于空格：

`'x' LIKE 'x '`将不匹配，而`'x'='x '`将匹配。

请注意，`=`在 mysql*中*的含义与`==`在任何编程语言中的含义不同。`=`在 mysql 中有`.equal()`. 如果您想*模仿*编程语言`==`，您应该执行二进制比较：`SELECT BINARY 'ss'='ß'`-> false。

# html - 滚动内滚动不起作用

> ID：15970055
> 
> 赞同：0
> 
> 时间：2013-04-12T11:21:59.673
> 
> 标签：html, css, overflow

我在一个带有类`poptable`的 div 中有一个带有类的表`popBody`。我申请了 div。`overflow-y:auto;`它工作正常。

我在一个带类`tblcheckbox`的表的一个 tr 中有另一个带类的表`poptable`。我也申请了

```
overflow:auto;
position:absolute; 
```

为表。滚动工作正常。但是当我用类滚动 div 时， 由于 css ，类`popBody`的表没有滚动。通过滚动 div来查看这里的问题[**FIDDLE 。**](http://jsfiddle.net/nn7WF/)我想要两个卷轴。请帮我。`tblcheckbox``position:absolute;`[](http://jsfiddle.net/nn7WF/)

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:27:04.120

您需要为此元素删除`position: absolute`和添加。`display: inline-block`

检查此更新：http: [//jsfiddle.net/nn7WF/2/](http://jsfiddle.net/nn7WF/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:38:02.833

添加`position:relative;`到`.poptable` `class`.

[它完成了更新后的 jsFiddle](http://jsfiddle.net/nn7WF/3/)中所示的工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:33:50.023

改变你的CSS

```
#Ingredients {
    display: block;
    height: 160px;
    overflow: auto;
    width: 250px;
} 
```**

# javascript - javascript检测浏览器/设备是否支持屏幕旋转

> ID：15970057
> 
> 赞同：5
> 
> 时间：2013-04-12T11:22:14.247
> 
> 标签：javascript, screen-rotation

有没有办法检测浏览器/设备是否支持屏幕旋转，而不必等待*orientationchange*事件？仅当浏览器或设备支持时，我才尝试检测旋转本身。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:24:13.547

我认为您可以像这样检测它：

```
if( 'onorientationchange' in window) { /* supported! */ } 
```

但是，我不确定某些浏览器是否会支持该事件，即使它们从未触发它。

# java - 从 Facebook 下载个人资料图片

> ID：15970058
> 
> 赞同：0
> 
> 时间：2013-04-12T11:22:19.627
> 
> 标签：java, android, facebook

我正在尝试使用 AsyncTask 下载 facebook 图像配置文件，但是我知道下载的位图为空，因此我得到一个 nullPointerExceprion。

这是我的代码：

```
private synchronized void downloadAvatar(final String user_id,final ImageView iv) {
        AsyncTask<Void, Void, Bitmap> task = new AsyncTask<Void, Void, Bitmap>() {

            @Override
            public Bitmap doInBackground(Void... params) {
                URL fbAvatarUrl = null;
                Bitmap fbAvatarBitmap = null;
                try {
                    fbAvatarUrl = new URL("http://graph.facebook.com/"+user_id+"/picture");
                    fbAvatarBitmap = BitmapFactory.decodeStream(fbAvatarUrl.openConnection().getInputStream());
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                return fbAvatarBitmap;
            }

            @Override
            protected void onPostExecute(Bitmap result) {

                iv.setImageBitmap(result);
            }

        };
        task.execute();
    } 
```

(user_id) 是一个存在的配置文件 id -我在调试模式下检查了它..

我在这一行得到一个 nullPointerException：

```
iv.setImageBitmap(result); 
```

（结果为空）

另外，这里是logcat：

```
04-12 14:16:40.140: E/AndroidRuntime(19304): FATAL EXCEPTION: main
04-12 14:16:40.140: E/AndroidRuntime(19304): java.lang.NullPointerException
04-12 14:16:40.140: E/AndroidRuntime(19304):    at com.example.sal.ProfileActivity$15.onPostExecute(ProfileActivity.java:1998)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at com.example.sal.ProfileActivity$15.onPostExecute(ProfileActivity.java:1)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at android.os.AsyncTask.finish(AsyncTask.java:602)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at android.os.Looper.loop(Looper.java:137)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at android.app.ActivityThread.main(ActivityThread.java:4575)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at java.lang.reflect.Method.invokeNative(Native Method)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at java.lang.reflect.Method.invoke(Method.java:511)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
04-12 14:16:40.140: E/AndroidRuntime(19304):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:51:16.947

我复制了您的代码并对其进行了测试，并且可以正常获取图像..

你放的log显示图片设置为null，就是try部分从url获取图片失败，能否请把try catch部分的logcat，如果在NULL之前出现异常指针一？

我还建议您在“try”中设置图像，这样只有在成功获取图像时才会设置它，并且在 catch 中您可以设置 toast 定义错误..

现在仔细检查一下，您添加了互联网权限，并在空指针异常之前向我们显示完整的日志，请...

# delphi - GetMemoryManagerState, ReservedAddressSpace 在 Delphi 中有什么作用？

> ID：15970063
> 
> 赞同：3
> 
> 时间：2013-04-12T11:22:26.683
> 
> 标签：delphi

我有一个代码，它给了我一些数字。我不知道这些数字是什么意思。我很好奇，这些数字是什么意思。谢谢您的回答！

```
procedure usdmem(var stradd,stpadd:array of Integer);
var
st: TMemoryManagerState;
sb: TSmallBlockTypeState;
i:Integer;
begin
 GetMemoryManagerState(st);
 i:=0;
 for  sb in st.SmallBlockTypeStates do
 begin
   stradd[i]:=sb.ReservedAddressSpace;
   stpadd[i]:=stradd[i]+sb.UseableBlockSize*8;
   inc(i);
 end;
end;
//-----------------------------------
usdmem(stradd,stpadd);
for I := 0 to 10 do
begin
  Write(inttostr(stradd[I]));
  Write(' - ');
  WriteLn(inttostr(stpadd[I]));
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:37:58.570

该信息可以在程序文档中找到：[TMemoryManagerState](http://docwiki.embarcadero.com/Libraries/en/System.TMemoryManagerState)。[内存管理索引](http://docwiki.embarcadero.com/RADStudio/en/Managing_Memory_Index)的多个主题索引中提供了更多信息。

如果你想真正了解 FastMM 的工作原理，那么你应该[下载并阅读源代码](http://sourceforge.net/projects/fastmm/)。例如，定义`TSmallBlockTypeState`如下：

```
TSmallBlockTypeState = record
  {The internal size of the block type}
  InternalBlockSize: Cardinal;
  {Useable block size: The number of non-reserved bytes inside the block.}
  UseableBlockSize: Cardinal;
  {The number of allocated blocks}
  AllocatedBlockCount: NativeUInt;
  {The total address space reserved for this block type (both allocated and
   free blocks)}
  ReservedAddressSpace: NativeUInt;
end; 
```

如您所见，注释记录了记录的字段。

# mysql - 与 Mysql 中的 PDO 等效查询

> ID：15970065
> 
> 赞同：1
> 
> 时间：2013-04-12T11:22:28.363
> 
> 标签：mysql, pdo

以下等效 PDO 的等效项是什么？

```
$i=0;
while ($i < $num_articles){
$title=mysql_result( $sql_result_article,$i,"Article_Title");
$id =mysql_result( $sql_result_article,$i,"Article_Id");
$i++;
} 
```

我尝试使用：

```
$title = $select_spec_article_stmt->fetchColumn(0);
$nc=$select_spec_article_stmt->fetchColumn(1); 
```

但我仍然面临一个问题，因为它没有显示正确的记录。当我`$title`在 PDO 中评论它时，它会显示正确的记录`$nc`。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:52:33.213

`mysql_result`一直是处理mysql数据的最丑陋的方式。请不要将这种方法带入 PDO 的勇敢新世界。

即使使用 mysql ext，您也可以使用*数组*。所以你必须使用PDO。
你不需要也不`mysql_result`需要`num_articles.`

首先获取您的数据：

```
$data = $stmt->fetchAll(); 
```

现在在 foreach 循环中，您可以将每个变量作为数组成员寻址

```
<table>
<? foreach ($data as $row): ?>
  <tr>
    <td>
      <a href="news.php?<?=$row['Article_Id']?>">
        <?=htmlspecialchars($row['Article_Title'])?>
      </a>
    </td>
  </tr>
<? endforeach ?> 
```

或者，如果您想坚持使用标量变量，请使用 extract()：

```
<table>
<? foreach ($data as $row): extract($row); ?>
  <tr>
    <td>
      <a href="news.php?<?=$Article_Id?>">
        <?=htmlspecialchars($Article_Title)?>
      </a>
    </td>
  </tr>
<? endforeach ?> 
```

如果您不喜欢这些花哨的浓密字段名称 - 不要在数据库中使用

# android - 当参数为微调器的变量时，android setselection 不起作用

> ID：15970066
> 
> 赞同：3
> 
> 时间：2013-04-12T11:22:31.203
> 
> 标签：android, android-spinner, android-4.2-jelly-bean

我已经尝试了很多解决方案，但是当位置对于微调器来说是可变的（即不是恒定的）时 setSelection(position) 不起作用。
以下是我尝试过的方法，所有方法都是在 setAdapter for spinner 之后编写的。
此外，我在调用此方法之前检查了 pos 变量值，该方法具有预期的值，但是在所有情况下，我都得到了第 0 个位置的默认元素。

1）通过使用处理程序：

```
int pos=getPos();  // some method to return default position to be displayed for spinner

    new Handler().postDelayed(new Runnable() {
        public void run() {
            clinicListSpinner.setSelection(pos,true);
        }
    }, 100); 
```

2）设置动画参数为真：

```
clinicListSpinner.setSelection(position,true); 
```

3）设置动画参数为假：

```
 clinicListSpinner.setSelection(position,false); 
```

4）正常设置调用：

```
clinicListSpinner.setSelection(position); 
```

在 android 4.1 上没有什么对我有用

但是当我将硬编码或常量值发送到变量时，它在上述所有情况下都很好用

```
e.g. clinicListSpinner.setSelection(1,true); 
```

我已经搜索了很多，但没有得到任何解决我的问题的方法，请帮助我。提前致谢

# kendo-ui - 在选择剑道下拉列表时填充剑道网格视图

> ID：15970067
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:22:33.517
> 
> 标签：kendo-ui

如何将 Kendo 下拉列表的选定值作为参数传递给使用 .net mvc 4 填充 Kendo gridview 的函数（Action）？

尊重用户

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-16T11:58:21.643

读取网格的方法

```
.Read(read => read.Action("GetAllMessage", "Account").Data("getMsgType")).PageSize(10) 
```

这是将读取下拉列表值的函数；

```
 function getMsgType()
{
    return {
        SpecialityIn: $("#MsgType").val()
    };
} 
```

$("#MsgType") 将是您的 dropdownListId

下拉菜单的handel更改事件为

```
 @(Html.Kendo().DropDownListFor(m => m.MsgType)
                .Events(events=>events.Change("OnMsgTypeChange"))
                        .Name("MsgType")
                        .HtmlAttributes(new { style = "width:200px;font-size:12px;margin-top:6px;" })
                        .DataTextField("Description")
                        .DataValueField("MsgType")
                        .DataSource(source => { source.Read(read => { read.Action("readMsgType", "Account") })})
                        .OptionLabel("Select")
                        .Enable(false)
                        .AutoBind(true)

                ) 
```

在网格的 onChageEevent 上绑定网格为

```
 function OnMsgTypeChange() {
    $("#GridMsgList").data("kendoGrid").dataSource.read();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:18:49.910

你试过剑道 UI 下拉列表事件吗

[http://demos.kendoui.c​​om/web/dropdownlist/events.html](http://demos.kendoui.com/web/dropdownlist/events.html)

```
 function onSelect(e) {
                        if ("kendoConsole" in window) {
                            var dataItem = this.dataItem(e.item.index());
                            kendoConsole.log("event :: select (" + dataItem.text + " : " + dataItem.value + ")" );
                        }
                    };

 $("#dropdownlist").kendoDropDownList({
                        dataTextField: "text",
                        dataValueField: "value",
                        dataSource: data,
                        select: onSelect
                    }); 
```

# c# - 使用 autofac 解决动态对象创建（在另一个动态创建的对象内）

> ID：15970068
> 
> 赞同：0
> 
> 时间：2013-04-12T11:22:33.703
> 
> 标签：c#, dependency-injection, autofac

我正在尝试创建一个具有特定要求的模块（将在一个简单的 ASP 站点中引用，使用 Autofac Web 表单集成）。它应该返回使用一组特定规则创建的字符串。这些规则由策略定义，每个“参与者”都不同。“Actor”将在运行时根据来自请求的值进行选择。为了让事情变得更难，一些“演员”可以根据请求的国家/地区等不同的具体实施策略。

我已经使用抽象和具体工厂解决了这个问题（第一个了解使用哪个“演员”具体工厂，第二个确定我是否需要特定或通用演员的策略）。问题是，在采用了强模块化设计后，我需要使用反射来获得对特定参与者策略类的间接引用（否则我应该引用包含所有特定策略实现的所有 dll）。

我很想避免这种方法，主要是因为我想使用一种独特的方式来动态加载所需的组件。

我已经查看了一些 Autofac 的可能性，据我所知，我可以注册同一接口的不同实现并使用此处解释的密钥解决它们（[https://code.google.com/p/autofac /wiki/TypedNamedAndKeyedServices](https://code.google.com/p/autofac/wiki/TypedNamedAndKeyedServices)）。问题是我不知道如何在我的抽象和具体工厂中解决它们（我没有提到那里的解析器......我认为我应该避免它）。

所以我的问题是：

1）我如何在那种情况下使用 Autofac？什么是最佳实践（我肯定错过了一些巨大的东西）

2) 我必须重新考虑这个模块的所有设计吗？我的意思是，我还需要使用抽象工厂和具体工厂吗？

3）谁能指出一些可能与我的问题有关的示例或教程？

非常感谢您的帮助，对于这个冗长且不太清楚的问题，我们深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:34:39.857

一种可能的方法是将您的策略​​分为通用策略和特定于参与者的策略。您已经在脑海中做到了这一点，但我不知道您的代码是否反映了这一点。

*   有两个接口`IActorSpecificStrategy`和`IGenericStrategy`.
*   将方法添加`bool CanHandleActor(IActor actor)`到两个接口（或两个派生自的接口）。
*   将两个枚举注入到您的工厂中：一个包含`IActorSpecificStrategy`，一个包含`IGenericStrategy`.
*   当请求参与者的策略时，首先枚举所有`IActorSpecificStrategy`实例并返回第一个返回的`CanHandleActor`实例`true`。否则，返回第一个`IGenericStrategy`返回`CanHandleActor`的`true`。

如果这不适用于您的问题，请更详细地说明如何选择策略。

# networking - 配置网关 IP 的规则

> ID：15970069
> 
> 赞同：0
> 
> 时间：2013-04-12T11:22:41.363
> 
> 标签：networking, gateway

我只是想知道将 IP 地址分配给默认网关是否有任何规则。是否有一些规则需要遵循，具体取决于子网掩码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:31:12.027

默认网关地址由**DHCP 分配**。如果您的计算机正在使用此方法获取**IP**并且没有获取网关，则路由器没有完成它的工作，需要检查。要手动设置默认网关，您还必须为计算机分配静态**IP**地址和**DNS**服务器地址。
要在 XP 或 Vista 上执行此操作，您需要转到“控制面板”（每种方法的访问方式不同）并选择“网络连接”小程序。选择您的互联网接口（假设您可能有多个列表）并右键单击并选择属性。这将打开连接属性表。在已安装的项目列表中，您将选择 Internet 协议（Vista 上的 IPv4）并再次单击属性。这将打开您需要输入计算机的静态 IP 和网关和 DNS 的地方。除非您是高级计算机用户并且可以很好地排除计算机网络故障，否则不建议您执行此操作。在具有非托管 DHCP 服务器的网络上设置静态 IP 可能会导致重复 IP 地址错误并阻止两台计算机访问 Internet。

[默认网关定义](http://en.wikipedia.org/wiki/Default_gateway)。

# javascript - 在浏览器中测试网站

> ID：15970071
> 
> 赞同：1
> 
> 时间：2013-04-12T11:22:50.093
> 
> 标签：javascript, unit-testing, web

我需要在浏览器中自动测试我的网站的功能，即我想启动网络浏览器，打开我的网站，发出一些鼠标点击和键盘输入，检查 HTML DOM 是否根据输入进行了适当的修改。
有没有能够做到这一点的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:24:52.560

看看[硒](http://docs.seleniumhq.org/)。

> Selenium 使浏览器自动化。就是这样。你用这种力量做什么完全取决于你。主要是为了测试目的而自动化 Web 应用程序，但当然不仅限于此。

如果你想要完整的测试，在我看来，这是可以使用的工具。

# ios - iOS：配置 SVN 时 Xcode 崩溃

> ID：15970078
> 
> 赞同：1
> 
> 时间：2013-04-12T11:23:13.287
> 
> 标签：ios, xcode, svn, xcode4, xcode4.2

当时我在 XCODE 中使用本地文件路径签出和克隆项目时崩溃了。

当我在位置字段中输入文件路径“file:///iOS/svnProject”时，xcode 崩溃了，请帮助解决问题，请参阅附图。![在此处输入图像描述](https://i.stack.imgur.com/ZWjNR.png)

我的 Xcode 版本是 4.6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:26:07.767

尝试使用外部客户端，例如[svnx](https://code.google.com/p/svnx/)。无论如何，XCode 在正确处理存储库和工作副本方面并不是最强的。

# c#-4.0 - VS2010出错导致Excel插件调试失败

> ID：15970090
> 
> 赞同：0
> 
> 时间：2013-04-12T11:23:41.977
> 
> 标签：c#-4.0, plugins, configuration, excel-2010, platform

我正在尝试了解一个 Excel 插件项目。通常，它必须通过将 Excel 插件加载到 MS Excel 应用程序来开始调试。在这里，项目是正确构建的，但是当我运行项目时，它给出了一个错误，如下所示。

系统找不到指定的文件。它找到了office excel的32版本，但我有64位版本。它不会自动识别。

![在此处输入图像描述](https://i.stack.imgur.com/gR5GG.jpg)

我没有`excel.exe`这条路，因为我的 Office 包是`X64`. 我现有的 excel.exe 文件存在于`C:\Program Files\Microsoft Office\Office14\excel.exe`路径中。

但奇怪的是，如果我构建项目并安装项目，它会正确安装到 Excel 中。但问题在于Visual Studio中的调试。除了`Solution => Properties => Configuration Properties`. 我不明白为什么这不走现有`excel.exe`路径。有没有办法强制项目搜索现有的办公室安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:19:23.157

我相信你必须按照这个过程来调试一个 64 位的插件。

[http://www.mztools.com/articles/2012/MZ2012014.aspx](http://www.mztools.com/articles/2012/MZ2012014.aspx)

# ajax - Difference between 2 ways of using AJAX

> ID：15970091
> 
> 赞同：0
> 
> 时间：2013-04-12T11:23:48.177
> 
> 标签：ajax, jquery

I want to understand the difference between using AJAX like this,

```
function showHint(str)
{
var xmlhttp;
if (str.length==0)
  { 
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","db_update?q="+str,true);
xmlhttp.send();
} 
```

and using it like this..

```
$.ajax({
     url: "db_update.php",
     type: "POST",
     data: { id: id, state: state },
     cache: false,
     success: function (response) {
         $('#text').html(response);
     }
 }); 
```

how different is one from the other? which is efficient?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:16:39.610

如评论部分所述，第一个是使用标准 Javascript 来发出 Ajax 请求，而第二个是使用 JQuery。这基本上做同样的事情，但是第二个版本不那么乏味和清晰。关于性能，我猜想 JQuery 应该被优化，所以它不应该有太大的不同。最后它只是一个包装器。通过编写自己的特定代码，您可能会做得更好，但您必须注意跨浏览器兼容性和其他问题，而 JQuery 会为您处理这些问题。

# asp.net-mvc-3 - 如何访问 ValidationAttribute 中的导航属性集合？

> ID：15970093
> 
> 赞同：4
> 
> 时间：2013-04-12T11:24:09.180
> 
> 标签：asp.net-mvc-3, data-annotations, unobtrusive-validation

在`IsValid`实现 的类的函数中`ValidationAttribute`，我使用以下代码获取另一个属性的值：

```
Dim AccessToRoomsinfo = validationContext.ObjectType.GetProperty("AccessToRooms")
Dim AccessToRooms = 
    Convert.ChangeType(
        AccessToRoomsinfo.GetValue(validationContext.ObjectInstance, Nothing), 
        GetType(System.Data.Objects.DataClasses
            .EntityCollection(Of CM_CONTRACTACTIVATIONACCESSTOROOM))) 
```

但是当我`AccessToRooms`在 Watch 窗口中检查时，集合是空的。

我怎样才能访问这个集合？

# android - .net web service returning NULL objects in the beginning of data

> ID：15970094
> 
> 赞同：7
> 
> 时间：2013-04-12T11:24:12.613
> 
> 标签：android, asp.net, web-services, android-ksoap2

I have web service, which is returning XML data. but in the data I am receiving Null fields in the beginning of it. The actual data is also available but followed by Null fields. I am accessing the webservice in Android using ksoap2\. SoapObject variable has full data but also have those null field, which is kinda creating problem to work with this service. here you can see, in the starting it has nothing but later it has data starting with Tag "Title"

```
04-12 10:55:09.405: D/ENVELOPE(1394): GetGuestEventsListingForServiceResponse{GetGuestEventsListingForServiceResult=anyType{schema=anyType{element=anyType{complexType=anyType{choice=anyType{element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; }; }; }; }; }; }; }; diffgram=anyType{NewDataSet=anyType{Table=anyType{Title=THE CLUSTER DAY-1,  JUNKOVATION; Description=anyType{}; EventDate=Apr 12, 2013; EventTime=5:00 PM; Venue=BLOCK 13-306; CreatedBy=16689; CreatedOn=2013-04-11T09:52:07.163+05:30; EventFor=All; Type=Internal; IsActive=true; }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:43:07.630

我不明白问题出在哪里。如果将结果字符串格式化为 xml，您将获得以下信息：

```
<GetGuestEventsListingForServiceResponse>
  <GetGuestEventsListingForServiceResult>
     <schema>
        <element>
          <complexType>
            <choice>
              <element>
                <complexType>
                   <sequence>
                     <element/>
                     <element/>
                     <element/>
                     <element/>
                     <element/>
                     <element/>
                     <element/>
                     <element/>
                     <element/>
                     <element/>
                   </sequence>
                </complexType>
              </element>
            </choice>
          </complexType>
        </element>
     </schema>
    <diffgram>
      <NewDataSet>
        <Table>
          <Title>THE CLUSTER DAY-1, JUNKOVATION</Title>
          <Description/>
          <EventDate>Apr 12, 2013</EventDate>
          <EventTime>5:00 PM</EventTime>
          <Venue>BLOCK 13-306</Venue>
          <CreatedBy>16689</CreatedBy>
          <CreatedOn>2013-04-11T09:52:07.163+05:30</CreatedOn>
          <EventFor>All</EventFor>
          <Type>Internal</Type>
          <IsActive>true</IsActive>
        </Table>
      </NewDataSet>
    </diffgram>
  </GetGuestEventsListingForServiceResult>
</GetGuestEventsListingForServiceResponse> 
```

如果您的意思是为什么会有这些空元素，则必须检查服务器端的 Web 服务。如果您在服务器端与“.NET”Web 服务交互，请尝试将绑定设置为 BasicBinding

# qt - gxx personality not found CODEBLOCKS

> ID：15970097
> 
> 赞同：2
> 
> 时间：2013-04-12T11:24:18.647
> 
> 标签：qt, mingw, codeblocks, libstdc++

While trying to run `c++` programs with MINGW & CODEBLOCKS I am getting the following error

```
The procedure entry point `_gxx_persopnality _v0` could not be located in the dynamic link library `libstdcc++-6.dll` 
```

![http://i50.tinypic.com/256wgfd.png](https://i.stack.imgur.com/0wTIP.png)

This is a picture of the current setting I am using. I am using `G++` and NOT gcc

![http://i49.tinypic.com/2z8cg8n.png](https://i.stack.imgur.com/PJ1E5.png)

Note :

1.  I have set the path of MINGW in my path(environment variables)
2.  Getting this error since i downloaded QT SDK which comes with its own Mingw
3.  Reinstalled both Codeblocks and MINGW several times.
4.  Both my path and system variables are set to point to my installation location of MinGW's bin directory.

How do I resolve this error? I want to use both codeblocks and qt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:17:37.013

似乎您也已将 Qt 自己的 MinGW 添加到其中`PATH`。优先级是在 中遇到的第一个`PATH`。因此，您似乎在`PATH`.

你似乎已经用你原来的 MinGW 发行版编译了你的应用程序，然后你安装了 Qt 的一个，因此你的应用程序现在加载了错误的`libstdcc++-6.dll`（即来自 Qt 的 MinGW 的那个），而它应该从你原来的 MinGW 发行版中加载那个.

您应该选择要用于开发的哪一个，因为它们具有不同的版本，因此它们的动态库（如`libstdcc++-6.dll`）具有不同的布局。

因此，如果您只是希望您的应用程序现在可以正常运行 - 只需将原始 MinGW 放在`PATH`Qt 之前。

如果您想使用 Qt 开始开发（我怀疑这是真的，因为您已经下载了它），那么您有 2 个选项可供选择：

1.  您希望保留原来的 MinGW 发行版并使用它构建 Qt 应用程序，而不是使用 Qt 的内置版本。例如，我确实喜欢这样，即我从不使用 MinGW 中内置的 Qt，因为它非常过时并且不支持 64 位 Windows 目标。为此，您必须使用原始 MinGW 发行版从源代码构建 Qt 本身。

2.  您不在乎（或懒得从源代码构建 Qt），那么您最好使用 MinGW 中内置的 Qt 进行一般开发，并可能完全删除原始的 MinGW 发行版。

**注意：**我想强调的是，您不能混合使用这 2 个 MinGW 发行版。好吧，这实际上并非如此，当然，如果您知道何时可以做到以及如何做到这一点，当然可以，但这需要深入了解链接过程以及与之相关的许多陷阱，我想您还没有（对不起，如果我错了）。然而，即便如此，您也不是 100% 安全，仍然会遇到奇怪的错误和崩溃。这就是为什么，为了避免这些头痛，只是不要混合它们。

# outlook - 触发office配置窗口

> ID：15970101
> 
> 赞同：1
> 
> 时间：2013-04-12T11:24:31.183
> 
> 标签：outlook, ms-office

安装office 2010应用程序MUI补丁（Word MUI补丁、Excel MUI补丁等）后，Outlook无法使用，出现如下错误信息：

```
------------------------------------
Setup Error
------------------------------------
The setup controller has encountered a problem during install.  Please review the log files for further information on the error.
------------------------------------
OK   
------------------------------------ 
```

这里我找到了一个解决问题的方法，就是手动启动Word，在Word准备好使用之前，会触发一个配置窗口。配置成功后，Outlook 将恢复正常工作。我发现配置窗口来自“C:\Program Files\Common Files\Microsoft shared\OFFICE14\Office Setup Controller\Setup.exe”

我的问题是：如何通过避免手动启动 Word 来触发任何脚本（c#、vbs）中的配置窗口，或者是否有替代方法？这对我来说是一个关键问题，因此非常感谢任何输入！

# xcode4.5 - iTunes Connect 中的“身份”是什么

> ID：15970102
> 
> 赞同：1
> 
> 时间：2013-04-12T11:24:31.930
> 
> 标签：xcode4.5

我试图将我的应用程序上传到 iTunes Connect。

我收到一条消息： `No identities are available for signing`。

我按下载身份 `An administrator must request identities before they can be downloaded`。

我使用钥匙串中的私钥创建了一个证书。证书是我的身份吗？我的私钥是我的身份吗？

无论如何，在那之后，我又试了一次。

同样的问题。

我可以在苹果开发者中心创建新证书。我可以创建新的配置文件。我看不到在哪里可以创建新的“身份”。那是什么以及如何制作？

我创建了配置文件。还是一样的问题。我认为有一种叫做开发者ID的东西。如何创建它？我还有私钥。我没有导出开发者 ID。

# c++ - 如何将未经预处理的 C/C++ 源代码转换为语法树（并返回）？

> ID：15970103
> 
> 赞同：1
> 
> 时间：2013-04-12T11:24:32.437
> 
> 标签：c++, c, converter, abstract-syntax-tree

我想在这之间有一个转换器

```
#include <ololo.h>
#ifdef HAVE_QQQ
  #include <qqq.h>
#endif

char* ololize(char* s) {
   #ifdef HAVE_QQQ
      return qqq(s);
   #else
      return ololo(s);
   #endif
} 
```

和这样的东西

```
(include_angular "ololo.h")
(p_ifdef "HAVE_QQQ"
 (include_angular "qqq.h"))
(define_function "ololize" [(ptr char) "s"] (ptr char)
 (p_ifdef "HAVE_QQQ"
  (return (qqq s))
  :else
  (return (ololo s))))) 
```

即将源代码表示为易于管理的树，不是从编译器的角度来看，而是从程序员的角度来看。

我不希望 100% 正确的工作，但它应该适用于大多数现有的源文件。如果我可以将代码“往返”到树并返回，则可以加分。

是否有任何现有的工具或库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:33:15.697

我们的 DMS 软件再造工具包及其 C++ 前端可以做到这一点。DMS 提供语言精确解析（包括处理 GCC 和 MS 方言以及 C++11），并构建 AST。根据它的配置方式，它还可以构建完整的符号表，并且目前可以为 C++ 进行控制流分析（但对于 C++11 还不能）。

从*内部*AST，DMS 可以重新生成将产生相同编译结果的合法源，无论是漂亮打印还是保留空间（“保真模式”）几乎完全一样。我们也可以要求将 AST 导出为 XML。

对于 OP 的小程序，这里是直接从我们的 GCC4 方言解析器呈现为 XML 的 AST（DMS 库中有一个“PrintASTasXML”函数）。注意 AST 包含 INCLUDE 和预处理器条件。

```
<?xml version="1.1" encoding="UTF-8"?>
<!-- Using DMS PrintASTasXML (v.1.00) -->
<!-- XML generated on 2013/04/13 15:24:44 -->
<DMSForest>
  <tree node="translation_unit" type="2" domain="1" id="1iity" parents="0" line="1" column="1" file="1">
<tree node="declaration_seq" type="994" domain="1" id="1iitt" line="1" column="1" file="1">
  <tree node="declaration_seq" type="994" domain="1" id="1iepb" line="1" column="1" file="1">
    <tree node="control_line" type="2133" domain="1" id="1ieos" line="1" column="1" file="1">
      <tree node="'#'" type="2908" domain="1" id="1ieoi" literal="0" line="1" column="1" file="1"/>
      <tree node="'include'" type="2759" domain="1" id="1ieok" literal="0" line="1" column="2" file="1"/>
      <tree node="ANGLED_HEADER_NAME" type="2951" domain="1" id="1ieom" line="1" column="10" file="1">
    <literal>ololo.h</literal>
      </tree>
      <tree node="new_line" type="2946" domain="1" id="1ieoo" literal="0" line="1" column="19" file="1"/>
    </tree>
    <tree node="pp_declaration_seq" type="997" domain="1" id="1ieph" line="2" column="1" file="1">
      <tree node="if_directive" type="2113" domain="1" id="1iep4" line="2" column="1" file="1">
    <tree node="'#'" type="2908" domain="1" id="1iep1" literal="0" line="2" column="1" file="1"/>
    <tree node="'ifdef'" type="2756" domain="1" id="1ieov" literal="0" line="2" column="2" file="1"/>
    <tree node="IDENTIFIER" type="2646" domain="1" id="1ieol" line="2" column="8" file="1">
      <literal>HAVE_QQQ</literal>
    </tree>
    <tree node="new_line" type="2946" domain="1" id="1ieoz" literal="0" line="2" column="16" file="1"/>
      </tree>
      <tree node="control_line" type="2133" domain="1" id="1iepi" line="3" column="3" file="1">
    <tree node="'#'" type="2908" domain="1" id="1iep6" literal="0" line="3" column="3" file="1"/>
    <tree node="'include'" type="2759" domain="1" id="1iep8" literal="0" line="3" column="4" file="1"/>
    <tree node="ANGLED_HEADER_NAME" type="2951" domain="1" id="1iepa" line="3" column="12" file="1">
      <literal>qqq.h</literal>
    </tree>
    <tree node="new_line" type="2946" domain="1" id="1iepe" literal="0" line="3" column="19" file="1"/>
      </tree>
      <tree node="endif_directive" type="2117" domain="1" id="1ieoy" line="4" column="1" file="1">
    <tree node="'#'" type="2908" domain="1" id="1iepl" literal="0" line="4" column="1" file="1"/>
    <tree node="'endif'" type="2743" domain="1" id="1iepk" literal="0" line="4" column="2" file="1"/>
    <tree node="new_line" type="2946" domain="1" id="1iepn" literal="0" line="4" column="7" file="1"/>
      </tree>
    </tree>
  </tree>
  <tree node="function_definition" type="1616" domain="1" id="1iito" line="6" column="1" file="1">
    <tree node="function_head" type="1628" domain="1" id="1iiow" line="6" column="1" file="1">
      <tree node="simple_type_specifier" type="1104" domain="1" id="1iep9" line="6" column="1" file="1">
    <tree node="'char'" type="2723" domain="1" id="1iepd" literal="0" line="6" column="1" file="1"/>
      </tree>
      <tree node="ptr_declarator" type="1398" domain="1" id="1iio3" line="6" column="5" file="1">
    <tree node="ptr_operator" type="1436" domain="1" id="1iepq" line="6" column="5" file="1">
      <tree node="'*'" type="2903" domain="1" id="1iep7" literal="0" line="6" column="5" file="1"/>
    </tree>
    <tree node="noptr_declarator" type="1402" domain="1" id="1iioc" line="6" column="7" file="1">
      <tree node="IDENTIFIER" type="2646" domain="1" id="1iepm" line="6" column="7" file="1">
        <literal>ololize</literal>
      </tree>
      <tree node="'('" type="2887" domain="1" id="1iepr" literal="0" line="6" column="14" file="1"/>
      <tree node="parameter_declaration" type="1591" domain="1" id="1iion" line="6" column="15" file="1">
        <tree node="simple_type_specifier" type="1104" domain="1" id="1iioe" line="6" column="15" file="1">
          <tree node="'char'" type="2723" domain="1" id="1iio0" literal="0" line="6" column="15" file="1"/>
        </tree>
        <tree node="ptr_declarator" type="1398" domain="1" id="1iiom" line="6" column="19" file="1">
          <tree node="ptr_operator" type="1436" domain="1" id="1iiof" line="6" column="19" file="1">
        <tree node="'*'" type="2903" domain="1" id="1iio1" literal="0" line="6" column="19" file="1"/>
          </tree>
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iio8" line="6" column="21" file="1">
        <literal>s</literal>
          </tree>
        </tree>
      </tree>
      <tree node="')'" type="2888" domain="1" id="1iiol" literal="0" line="6" column="22" file="1"/>
      <tree node="function_qualifiers" type="1418" domain="1" id="1iio2" line="6" column="24" file="1"/>
    </tree>
      </tree>
    </tree>
    <tree node="compound_statement" type="873" domain="1" id="1iitn" line="6" column="24" file="1">
      <tree node="'{'" type="2940" domain="1" id="1iiov" literal="0" line="6" column="24" file="1"/>
      <tree node="statement" type="853" domain="1" id="1iitw" line="7" column="4" file="1">
    <tree node="if_directive" type="2113" domain="1" id="1iipc" line="7" column="4" file="1">
      <tree node="'#'" type="2908" domain="1" id="1iip4" literal="0" line="7" column="4" file="1"/>
      <tree node="'ifdef'" type="2756" domain="1" id="1iip2" literal="0" line="7" column="5" file="1"/>
      <tree node="IDENTIFIER" type="2646" domain="1" id="1iip5" line="7" column="11" file="1">
        <literal>HAVE_QQQ</literal>
      </tree>
      <tree node="new_line" type="2946" domain="1" id="1iip0" literal="0" line="7" column="19" file="1"/>
    </tree>
    <tree node="jump_statement" type="984" domain="1" id="1iisg" line="8" column="7" file="1">
      <tree node="'return'" type="2780" domain="1" id="1iiox" literal="0" line="8" column="7" file="1"/>
      <tree node="$NONTERMINALAMBIGUITY" type="2999" nonterminalname="postfix_expression" nonterminaltype="402" domain="1" id="1iiou" children="2" line="8" column="14" file="1">
        <tree node="postfix_expression" type="380" domain="1" id="1iipi" line="8" column="14" file="1">
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iip8" parents="2" line="8" column="14" file="1">
        <literal>qqq</literal>
          </tree>
          <tree node="'('" type="2887" domain="1" id="1iip6" parents="2" literal="0" line="8" column="17" file="1"/>
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iipb" parents="2" line="8" column="18" file="1">
        <literal>s</literal>
          </tree>
          <tree node="')'" type="2888" domain="1" id="1iip1" parents="2" literal="0" line="8" column="19" file="1"/>
        </tree>
        <tree node="postfix_expression" type="368" domain="1" id="1iipk" line="8" column="14" file="1">
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iip8" parents="2" alreadyprinted="true"/>
          <tree node="'('" type="2887" domain="1" id="1iip6" parents="2" alreadyprinted="true"/>
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iipb" parents="2" alreadyprinted="true"/>
          <tree node="')'" type="2888" domain="1" id="1iip1" parents="2" alreadyprinted="true"/>
        </tree>
      </tree>
      <tree node="';'" type="2939" domain="1" id="1iisb" literal="0" line="8" column="20" file="1"/>
    </tree>
    <tree node="else_directive" type="2116" domain="1" id="1iisi" line="9" column="4" file="1">
      <tree node="'#'" type="2908" domain="1" id="1iism" literal="0" line="9" column="4" file="1"/>
      <tree node="'else'" type="2742" domain="1" id="1iisp" literal="0" line="9" column="5" file="1"/>
      <tree node="new_line" type="2946" domain="1" id="1iiso" literal="0" line="9" column="9" file="1"/>
    </tree>
    <tree node="jump_statement" type="984" domain="1" id="1iit5" line="10" column="7" file="1">
      <tree node="'return'" type="2780" domain="1" id="1iish" literal="0" line="10" column="7" file="1"/>
      <tree node="$NONTERMINALAMBIGUITY" type="2999" nonterminalname="postfix_expression" nonterminaltype="402" domain="1" id="1iio5" children="2" line="10" column="14" file="1">
        <tree node="postfix_expression" type="380" domain="1" id="1iit6" line="10" column="14" file="1">
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iisk" parents="2" line="10" column="14" file="1">
        <literal>ololo</literal>
          </tree>
          <tree node="'('" type="2887" domain="1" id="1iisu" parents="2" literal="0" line="10" column="19" file="1"/>
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iisv" parents="2" line="10" column="20" file="1">
        <literal>s</literal>
          </tree>
          <tree node="')'" type="2888" domain="1" id="1iit2" parents="2" literal="0" line="10" column="21" file="1"/>
        </tree>
        <tree node="postfix_expression" type="368" domain="1" id="1iiti" line="10" column="14" file="1">
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iisk" parents="2" alreadyprinted="true"/>
          <tree node="'('" type="2887" domain="1" id="1iisu" parents="2" alreadyprinted="true"/>
          <tree node="IDENTIFIER" type="2646" domain="1" id="1iisv" parents="2" alreadyprinted="true"/>
          <tree node="')'" type="2888" domain="1" id="1iit2" parents="2" alreadyprinted="true"/>
        </tree>
      </tree>
      <tree node="';'" type="2939" domain="1" id="1iit4" literal="0" line="10" column="22" file="1"/>
    </tree>
    <tree node="endif_directive" type="2117" domain="1" id="1iitp" line="11" column="4" file="1">
      <tree node="'#'" type="2908" domain="1" id="1iits" literal="0" line="11" column="4" file="1"/>
      <tree node="'endif'" type="2743" domain="1" id="1iitr" literal="0" line="11" column="5" file="1"/>
      <tree node="new_line" type="2946" domain="1" id="1iitq" literal="0" line="11" column="10" file="1"/>
    </tree>
      </tree>
      <tree node="'}'" type="2941" domain="1" id="1iitm" literal="0" line="12" column="1" file="1"/>
    </tree>
  </tree>
</tree>
  </tree>
  <FileIndex>
<File index="1">C:/temp/small.cpp</File>
  </FileIndex>
  <DomainIndex>
<Domain index="1">Cpp~GCC4</Domain>
  </DomainIndex>
</DMSForest> 
```

它不会完全从 XML 往返；没有预先配置的 XML 阅读器来构建 AST。然而，DMS 是高度可定制的，并且有一个 XML 解析器作为选项；读取 XML 树，重新生成 C++ AST，然后调用 prettyprinter 会很简单。

我不太确定您的意思是“从程序员的角度来看是可管理的”。这是一棵精确的树。如果它包含太多细节，欢迎您应用您认为合适的 XSLT 转换来简化它，但这样做可能会失去语义准确性。而且您也可能会失去往返的能力。

我们认为这种 XML 导出的需求不大。DMS 生态系统的设计为分析/转换程序（包括 C++ 程序）提供了大量的基础设施；我们已经使用 DMS 完成了大量的 C++ 源代码解析/转换。因此，为了做一些有用的事情而进行 XML 导出的需求并不是很高*。*我们无论如何都会提供它，因为人们总是要求它。令我们惊讶的是，我们有一些实际使用它的客户。

# batch-file - escape double quotes in param file to batch script

> ID：15970104
> 
> 赞同：0
> 
> 时间：2013-04-12T11:24:36.510
> 
> 标签：batch-file

I have the following batch script:

Copied it from internet. Need help to modify the script per my requirement.

```
@ECHO OFF
IF "%~1"=="" GOTO :EOF
SET "filename=%~1"
SET fcount=0
SET linenum=0
FOR /F "usebackq tokens=1-30 delims=|" %%a IN ("%filename%") DO ^
CALL :process "%%a" "%%b" "%%c" "%%d" "%%e" "%%f" "%%g" "%%h" "%%i" "%%j" "%%k" "%%l" "%%m" "%%n" "%%o" "%%p" "%%q" "%%r" "%%s" "%%t" "%%u" "%%v" "%%w" "%%x" "%%y" "%%z" "%%?" "%%_" "%%@" "%%\"
GOTO :EOF

:trim
SET "tmp=%~1"
:trimlead
IF NOT "%tmp:~0,1%"==" " GOTO :EOF
SET "tmp=%tmp:~1%"
GOTO trimlead

:process
SET /A linenum+=1
IF "%linenum%"=="1" GOTO picknames

SET ind=0
:display
IF "%fcount%"=="%ind%" (ECHO.&GOTO :EOF)
SET /A ind+=1
CALL :trim %1
SETLOCAL ENABLEDELAYEDEXPANSION
ECHO !tmp!
ENDLOCAL
SHIFT
GOTO display

:picknames
IF %1=="" GOTO :EOF
CALL :trim %1
SET /a fcount+=1
echo %tmp%
SET "f%fcount%=%tmp%"
SHIFT
GOTO picknames 
```

I have the following feed file that I supply as parameter to the batch script above.

```
aa"aaaaa|bbbbbbbb|cccccc
ddddddd|eeeeeeee|ffffff
ggggggg|hhhhhhhh|iiiiii
jjjjjjj|kkkkkkkk|llllll
mmmmmmm|nnnnnnnn|oooooo 
```

Notice that the feed file has double quotes. This breaks the script when I try to run the batch script. plz help. Please help in handling other special characters also.

Also, the script above treats the first line differently from other lines. I want it to treat the first line also as any other line. plz help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:09:32.330

这会做你期望我想的。这是一个批处理 + Jscript 混合脚本。与纯批处理相比，JScript 对标准输入的读取和对标准输出的回显对特殊字符的容忍度要高得多。`.bat`使用扩展名保存它并通过以下任何方法运行它：

> `parser.bat feedfile.txt`
> 
> `parser.bat < feedfile.txt`
> 
> `type feedfile.txt | parser.bat`
> 
> `feedgenerator.exe | parser.bat`
> 
> `parser.bat` *（然后将内容粘贴到控制台中。点击*`Enter`*空白行停止。）*

这是脚本。

```
@if (@a==@b) @end /*

:: batch portion

@ECHO OFF
setlocal

if exist "%~1" (
    cscript /nologo /e:jscript "%~f0" < "%~1"
) else (
    cscript /nologo /e:jscript "%~f0"
)

exit /b

:: JScript portion */

while (!WSH.StdIn.AtEndOfLine) {
    var line=WSH.StdIn.ReadLine();
    WSH.Echo(line.split('|').join('\r\n'));
    WSH.Echo();
} 
```

示例输出：

```
C:\Users\me\Desktop>test.bat < test.txt
aa"aaaaa
bbbbbbbb
cccccc

ddddddd
eeeeeeee
ffffff

ggggggg
hhhhhhhh
iiiiii

jjjjjjj
kkkkkkkk
llllll

mmmmmmm
nnnnnnnn
oooooo 
```

它似乎也适用于百分比、& 符号、克拉以及我能想到的任何其他内容。

# hibernate - 基于子集合语法访问父类的 HQL 查询

> ID：15970105
> 
> 赞同：0
> 
> 时间：2013-04-12T11:24:41.213
> 
> 标签：hibernate, hql

我有组成地址类列表的人员类。现在我想编写 HQL，它将*只*返回具有至少一个地址（更多是零）的 Person 对象。

会不会像“From Person where count(personaddressList) > 0”一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:29:11.780

```
select p from Person p where size(p.addresses) > 0 
```

请参阅[http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_arithmetic](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_arithmetic)和/或[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-表达式](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-expressions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:36:25.143

总部：

```
from Person p where size(p.addresses) > 0 
```

或者，如果您使用与域类的关联，则：

```
if (p.getAddresses().size() > 0){
    ...
} 
```

# jquery - jquery mobile在网格和列表视图之间切换

> ID：15970107
> 
> 赞同：0
> 
> 时间：2013-04-12T11:24:50.530
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-listview, jquery-mobile-grid

我正在尝试创建一个 jquery 函数，该函数在我的 jqm 页面上的元素的网格和列表类型布局之间切换。这是我的html结构：

```
<div data-role="page" id="portfolio">
<div data-role="header">
    <a href="#main" data-role="button" data-icon="arrow-l" data-iconpos="notext" data-theme="b" data-inline="true"></a>
    <h1>Projects</h1>
    <a href="javascript:changeLayout()" id="changelayout" class="ui-btn-right" data-role="button" data-icon="grid" data-iconpos="notext" data-theme="b" data-inline="true"></a>
</div>
<div data-role="content">
    <ul id="projects">
        <li><a href="#incarpi"><img src="images/incarpi.jpg" ><div class="portfoliotext">Raspberry Pi In-car computer</div></a></li> 
```

...

这是我的功能：

```
function changeLayout() {
if ($('#changelayout').attr('data-icon') == 'grid'){
    $('#changelayout').attr('data-icon', 'bars');
    $('#changelayout .ui-icon').addClass('ui-icon-bars').removeClass('ui-icon-grid');
    $('#changelayout').buttonMarkup('refresh');
    $('#projects li img').width('100%');
    $('#projects li').display('none');
    $('.portfoliotext').show();
}
else {
    $('#changelayout').attr('data-icon', 'grid');
    $('#changelayout .ui-icon').addClass('ui-icon-grid').removeClass('ui-icon-bars');
    $('#changelayout').buttonMarkup('refresh');
    $('#projects li img').width('20%');
    $('#projects li').margin('0');
    $('#projects li').display('inline-block');
    $('.portfoliotext').hide();
} 
```

}

然而，这些元素仍然只是一个在另一个之上。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:08:28.007

工作示例：http: [//jsfiddle.net/Gajotres/PMrDn/](http://jsfiddle.net/Gajotres/PMrDn/)

```
$(document).on('pagebeforeshow', '#index', function(){ 
    $(document).on('click', '#changelayout', function(){             
        if ($('#changelayout').attr('data-icon') == 'grid'){
            $('#changelayout').buttonMarkup({ icon: "bars" });
            $( "#projects li" ).each(function( index ) {
                $(this).width('100%');
                $(this).css('float','clear');            
                $(this).find('.portfoliotext').css('display','none');
            });            
        } else {
            $('#changelayout').buttonMarkup({ icon: "grid" });            
            $( "#projects li" ).each(function( index ) {            
                $(this).width('20%');
                $(this).css({'float':'left','margin':'0'});                        
                $(this).find('.portfoliotext').css('display','block');                   
            });                         
        }
    });        
}); 
```

我希望就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:05:41.987

你试过这个吗？

```
$("#changelayout").attr('data-icon','bars').button().trigger("refresh"); 
```

或者你也可以这样做。

```
$("#changelayout").find(".ui-icon").removeClass("ui-icon-bars").addClass("ui-icon-grid"); 
```

# c# - 使用实体框架将字符串保存到数据库时出现语言问题

> ID：15970110
> 
> 赞同：1
> 
> 时间：2013-04-12T11:24:56.670
> 
> 标签：c#, asp.net, entity-framework

我有一个带有文本框和按钮的 aspx 页面。当我单击按钮时，它会将文本框的文本发送到一个函数并使用实体框架将其保存到数据库中。问题是当我在文本框中使用本地字符时，例如 ş, ğ, ı, ö , ü, 这些字符被保存为 s, g, i, o, u。问题是什么？

我的代码 (Product.aspx)

```
 <asp:TextBox ID="txtTitle" runat="server"></asp:TextBox> 
 <asp:Button ID="btnUpdate" runat="server" Text="Update" OnClick="btnUpdate_Click" /> 
```

（产品.aspx.cs）

```
 protected void btnUpdate_Click(object sender, EventArgs e)
    {
        Product p = new Product ()
        {
            Id = Int32.Parse(Session["ProductId"].ToString()),
            Title = txtTitle.Text
        };
        int productId = ProductManager.UpdateProduct (p);
        if (productId != -1)
        {
            // SUCCESS
        }
        else
        {
             // ERROR
        }
    }

  public static int UpdateProduct(Product product)
    {
        using (var context = new LidyaEntities())
        {
            Product pUpd = context.Product.FirstOrDefault(p => p.Id == product.Id);
            if (pUpd != null)
            {
                pUpd.Title = product.Title;
            }
            return context.SaveChanges();
        }
    } 
```

数据库表（SQL SERVER）；

```
 (Id, int)
  (Title, text) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:34:22.613

用来`"N"`解决这个问题。。

如果你想在`"ҤїАͻ"`数据库中插入一个字符串

那么您的查询必须是这样的

**询问：**

```
INSERT INTO TableName VALUES (N'ҤїАͻ') 
```

我认为它会解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:31:01.123

首先检查数据库并确认值已正确存储。如果不是，您将需要更改字符串列的字符类型集。但在您这样做之前，请确认后面代码中的文本值也是正确的。

# javascript - Onchange 操作下拉列表

> ID：15970111
> 
> 赞同：0
> 
> 时间：2013-04-12T11:24:59.390
> 
> 标签：javascript, onchange, html-select

当我更改下拉值时，没有任何反应？

这有什么问题吗？

```
<option value='8' onchange="window.open('availability.jsp?user=99&clickeddate=2013-04-12&month=8','_self')">September</option>< 
```

Onchange 是正确的操作吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:38:53.337

该`onChange`事件与`<select>`标签相关联，而不是与`<option>`标签相关联。

尝试

```
<select onChange="window.open('availability.jsp?user=99&clickeddate=2013-04-12&month=8','_self')">
<option>option 1</option>
<option>option 2</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:40:02.477

这是因为`onchange`事件需要在父`select`元素中。

# iphone - 计算一个单词中的相同字母

> ID：15970113
> 
> 赞同：0
> 
> 时间：2013-04-12T11:25:01.000
> 
> 标签：iphone, ios

我需要计算一个单词中相同的字母。例如：apple 是我的话，首先我发现这封信中是否存在“a”。之后，我想计算那个单词中“a”的数量，但我做不到。这是我找到特定字母的代码；

```
if([originalString rangeOfString:compareString].location==NSNotFound)
{
    NSLog(@"Substring Not Found");
}

else
{
    NSLog(@"Substring Found Successfully");

} 
```

originalString 是我随机从数据库中取出的一个词。那么，如何计算呢？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:35:24.560

我有不同的想法让我们试试...

```
 NSString *string = @"appple";
    int times = [[string componentsSeparatedByString:@"p"] count]-1;

    NSLog(@"Counted times: %i", times); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:29:31.517

您可以只[遍历字符串一次](https://stackoverflow.com/questions/4158646/most-efficient-way-to-iterate-over-all-the-chars-in-an-nsstring)，将每个字母添加到一个`NSMutableDictionary`（作为键）并记录该字母出现的次数（作为值）。

结果`NSMutableDictionary`将保存每个唯一字母的出现次数，从而您可以提取您喜欢的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:54:13.690

```
NSString *strComplete = @"Appleeeeeeeeeeeeeee Appleeeeeeeee Aplleeeeeeeeee";
NSString *stringToFind = @"e";
NSArray *arySearch = [strComplete componentsSeparatedByString:stringToFind];
int countTheOccurrences = [arySearch count] - 1; 
```

**输出 ：**

```
countTheOccurrences --- 34 
```

# php - PHP 使用 preg_replace 创建 BB 代码请帮忙

> ID：15970120
> 
> 赞同：1
> 
> 时间：2013-04-12T11:25:28.393
> 
> 标签：php, preg-replace

所以我目前正在创建一个项目，在这个项目中，它需要用户添加有关其服务器/游戏的信息。

我通过添加一些 BB 代码使信息字段有点独特，到目前为止我已经添加了几乎所有但我需要一点帮助。

我想添加添加

`[img w=100 h=100]IMG link here[/img]`

“100”表示金额，只是一个随机数。这是我使用的PHP代码：

`preg_replace('/\[img w=(.*?) h=(.*?)](.*?)\[\/img\]/i', '<img src="$3" height="$2" width="$1" draggable="false" />', $str); '`

但代码返回： `<img src="IMG LINK" height="100 h=100" draggable="false" />`

如果有人可以帮助我，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:48:02.317

您的代码可以正常工作（PHP 5.2.8）：

```
$str = "[img w=100 h=200]IMG link here[/img]";

echo preg_replace('/\[img w=(.*?) h=(.*?)](.*?)\[\/img\]/i', '<img src="$3"     height="$2" width="$1" draggable="false" />', $str); 
```

输出

```
<img src="IMG link here" height="200" width="100" draggable="false" /> 
```

如果您得到不同的结果，请分享您的 PHP 版本和类似于我上面的示例。

# php - PHP通过特定符号在.txt文件中拆分文本

> ID：15970128
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:26:04.287
> 
> 标签：php

我想将其显示为我的输出。

```
John Michael - 103542 - St. Michael
Kent Yorch - 80410 - St. Regina
Lovely May - 98745 - St. Rosalia
Mark Jess - 45604 - St. Salome 
```

这是我的 .txt 文件

```
John Michael||St. Michael||103542
Kent Yorch||St. Regina||80410
Lovely May||St. Rosalia||98745
Mark Jess||St. Salome||45604 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:52:03.727

```
$file_content = file_get_contents("test.txt");

file_put_contents("test.txt", str_replace(array('|~','~|'),' - ', $file_content)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:30:05.113

尝试这个，

```
str_replace(array("|~","~|"), " - ", $txt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:33:00.863

尝试这个，

```
$txt=file_get_contents('filename.txt');
$new_txt=str_replace(array("|~","~|"), " - ", $txt);
echo $new_txt; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:38:30.230

作为您的问题的解决方案，请尝试执行下面提到的代码片段。

```
 $file_contents=file_get_contents('abc.txt');
 $contents=str_replace('|~','-',$file_contents); 
 $contents=str_replace('~|','-',$contents);
 echo $contents; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T11:30:59.870

在这里，您可以使用[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)并设置可选参数以匹配您的文本格式。

因此，如果我们从该链接中获取示例，我们可以将其修改为：

```
if (($handle = fopen("file.txt", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, "|", "~")) !== FALSE) {
        $sOut = implode(' - ', $data);
        echo $sOut . "<br />\n";
    }
    fclose($handle);
} 
```

# cryptography - RSA-OAEP：密码散列函数如何扩展位数？

> ID：15970132
> 
> 赞同：2
> 
> 时间：2013-04-12T11:26:15.850
> 
> 标签：cryptography, sha1, cryptographic-hash-function

首先，这个问题与代码无关，但我试图了解代码背后发生了什么。希望有人知道这个问题的答案，因为它困扰了我一段时间。

我正在用 c# 编写一个程序，它使用 RSA 加密服务提供程序。据我所知，该课程在其填充中按标准使用 SHA1。我一直试图了解填充过程中实际发生的情况，但似乎无法理解该过程中的一个步骤。

我目前正在查看的 OAEP 算法只是 wiki 算法。 [http://en.wikipedia.org/wiki/OAEP](http://en.wikipedia.org/wiki/OAEP)

困扰我的步骤是3）。我认为散列函数总是返回一定数量的位（SHA1 - 160bits），那么它如何简单地将位数扩展到 n-k0，而标准的 1024 密钥位强度将是 864 位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:59:58.000

我从未对 OAEP 做过任何事情，但加密哈希函数（如步骤 3 中所述）使用[http://en.wikipedia.org/wiki/PBKDF](http://en.wikipedia.org/wiki/PBKDF)中说明的过程。基本上，为了扩展输出位数，您首先使用与被散列的参数连接的递增计数器重复散列，然后连接这些结果，直到您有足够的位。这种技术不会给结果增加熵，但允许您创建更长的输出比特流。

来自维基百科：如果你想要一个 dklen 长的密钥，并且你的加密哈希函数 U 只输出 hlen 位：

```
DK = T1 || T2 || ... || Tdklen/hlen
Ti = F(Password, Salt, Iterations, i)

F(Password, Salt, Iterations, i) = U1 ^ U2 ^ ... ^ Uc

U1 = PRF(Password, Salt || INT_msb(i))
U2 = PRF(Password, U1)
...
Uc = PRF(Password, Uc-1) 
```

（如果只需要加密哈希函数的一次迭代，c=1，那么就不需要异或运算符^，并且对于每个i，只需要计算U1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:42:05.593

特别是对于 OAEP，建议使用一种称为 MGF1 的算法来运行。通过反复散列种子和计数器，并将结果连接在一起，spe I 固定来自[RfC 2437](http://www.ietf.org/rfc/rfc2437.txt)

从 RfC 文本中，`Z`种子在哪里`l`，输出的长度在哪里：

> 3.对于从0到{l / hLen}-1的计数器，请执行以下操作：
> 
> a. 使用原语 I2OSP 将 counter 转换为长度为 4 的八位字节串 C：C = I2OSP (counter, 4)
> 
> b. 将种子 Z 和 C 的哈希连接到八位字节字符串 T：

```
T =    T || Hash (Z || C) 
```

> 4\. 输出 T 的前 1 个八位字节作为八位字节串掩码。

# c++ - 用于比较的不同值的 C++ int 包装类不起作用

> ID：15970133
> 
> 赞同：0
> 
> 时间：2013-04-12T11:26:16.687
> 
> 标签：c++

为什么以下用法会给我一个错误：未定义的对“Environment::self”的引用所以下面是我的测试用例，类就在它下面，标题和cpp：测试：

```
Environment bla;
bla=Environment::CTE;
if(bla==1){
    printf("CTE!");
}else if(bla==Environment::PPE){
    printf("NO: its ppe");
} 
```

标题：

```
class Environment{
public:
enum{CTE, PTE, PPE, LOCALHOST};
static int self;
bool operator==(const int& rhs)const;
Environment& operator=(const int &rhs);
}; 
```

和 CPP：

```
#include "Environment.h"

bool Environment::operator==(const int& rhs)const{
if (this->self ==rhs)
    return true;
return false;
}

Environment& Environment::operator=(const int &rhs) {
  if (this->self != rhs) {
  this->self=rhs;
}

  return *this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:30:40.367

您已声明`self`为`static`. 这表示：

1.  你必须在某个地方定义它。也就是说，放入`int Environment::self;`一个 .cpp 文件。此填充修复您的“Unresolver reference”链接器错误。

2.  存在`static`意味着整个班级只有一个实例`self`。因此，通过它访问它`this->self`是没有必要的，实际上是令人困惑的。这似乎暗示类的每个实例`Environment`都有自己的副本，但实际上并非如此。

如果您希望 的每个实例`Enviornment`都有自己的值，只需从的声明中`self`删除`static`关键字即可。`self`

# java - Desire2learn - 从大学数据库中提取大数据

> ID：15970134
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:26:22.240
> 
> 标签：java, javascript, desire2learn, valence

我们正在研究大数据分析，以帮助为我们大学开发电子学习平台，并寻求您的一些信息！！！！请通过澄清向我们提供倡议！

1.  我们需要从我所在大学的数据库中获取以下大数据信息：数据库中存储的注册学生名单、课程资料、成绩和相关大学信息。我已经看到了 D2L 的 Valence REST API，因此考虑使用它们从数据库中获取信息。**有可能获得大学的数据吗？如果是这样，请指导我如何做到这一点或参考任何文档？**

***注意：[我的大学使用 Desire2learn 共享课程资料、作业、成绩等，因此我们希望获得必要的授权来访问其数据库信息]***

1.  我需要有大学后端网络服务器地址吗？我怎样才能获得所需的信息？（我不确定数据存储在哪里，因为我在 valence 网站上找不到任何数据库信息或数据模型）

2.  如果 2 为真 => 在我们的应用程序中使用 api 是否是正确的资源？ [http://docs.valence.desire2learn.com/basic/apicall.html](http://docs.valence.desire2learn.com/basic/apicall.html)

3.  最后，我在哪里可以了解数据库结构/组织/模型？数据是在数据库中以日志或文件的形式存储的，可以作为文件/日志拉出来吗？？？

请让我们知道....任何其他信息/帮助表示赞赏！！！！

谢谢， Desire2Learn 用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:17:21.970

为了使用 Valence 学习框架 API，您需要：

*   一组应用程序凭据（应用程序 ID/密钥对），仅限于`LMSID`您要使用的 LMS 的域（或 ）：您的 LMS 管理员可以告诉`LMSID`您 LMS 的实际是什么，但您[申请您​​的 Application ID/Key credentials](http://docs.valence.desire2learn.com/basic/firstlist.html#acquire-an-app-id-key-pair)时必须准确提供（区分大小写）。

*   LMS 用户帐户。Valence 学习框架 API 通过为您提供绑定到您的特定 App ID/Key*和*已知经过身份验证的 LMS 用户的 ID/Key 对来进行身份验证。

    **笔记！**您对 LMS 功能和数据的访问权限仅限于您的 LMS 用户帐户的权限。也就是说，如果您拥有一个具有最低权限的学生用户帐户，那么您对 ​​LMS 功能或数据的访问权限将是最低的。一般来说，Learning Framework API 功能反映了用户可以通过 Web UI 执行的操作，因此将其用作粗略的指南——您将无法执行您的用户帐户无法通过 Web UI 执行的操作。

您需要开始使用的所有资源都在[Valence 项目网站上](http://docs.valence.desire2learn.com/)。开始的步骤清楚地列在首页上，更详细的信息可在[开始使用 Valence](http://docs.valence.desire2learn.com/basic/firstlist.html)主题页面上找到。

请确保您已阅读并理解描述平台所有基本概念的[核心概念](http://docs.valence.desire2learn.com/basic/index.html)主题，以及我们在项目文档中使用的约定。

[API 参考主题](http://docs.valence.desire2learn.com/reference.html)都描述了各种类似REST 的路由，它们充当通过学习框架 API 可用的 API 函数。参考主题还描述了您将从 LMS 调用中收到的所有 JSON 结构，并有望在调用中提供给 LMS。

要开始使用，我建议您首先阅读所有入门/概念主题，然后选择要使用的[客户端库](http://docs.valence.desire2learn.com/clients/index.html)，并尝试启动并运行[入门示例。](http://docs.valence.desire2learn.com/samples/gettingStarted.html)如果在那之后，您有关于如何使用学习框架 API 的具体问题，您可以在此处提问，并标记为`desire2learn`，社区可以尝试回答您的具体问题。

如果您与 D2L（以及客户经理或客户支持帐户）有现有业务关系，那么您也可以通过他们的客户支持台寻求支持。

# javascript - 如何自动播放下一首曲目

> ID：15970139
> 
> 赞同：0
> 
> 时间：2013-04-12T11:26:32.973
> 
> 标签：javascript, jquery, coldfusion

我一直在为我的网站创建一个弹出式播放器，用户可以在其中播放其他用户上传到网站的音乐播放列表。但是目前我不得不手动单击每首曲目来播放它，我想知道是否有人设法创建了一个`<cfmediaplayer>`自动播放播放列表中的下一首歌曲。它知道当前播放哪首歌的方式是在 url 变量中定义的，该变量发送用户点击的曲目名称，然后调用数据库以查看是否可以找到匹配项，然后我使用源输出位置我存储的曲目。生病发布代码以更清楚地了解我在做什么：

```
<cfquery datasource="#mydatabase#" name="getsongs">
    Select *
    From artists, songs
    Where artist_id = song_artistid
</cfquery>

<cfif IsDefined("URL.song")>
    <cfquery datasource="#mydatabase#" name="playsong">
        Select *
        From songs
        Where artist_id = song_artistid
        And song_name = '#URL.song#'
    </cfquery>
</cfif>

<div style="margin: 0 auto; width: 800px;>
    <div style="width: 300px; float: left; overflow: scroll;">
        <cfoutput query="getartists">
            <a href="popup_player.cfm?song=#song_name#>#artist_name# - #song_name#</a>
        </cfoutput>
    </div>

    <cfif IsDefined("URL.song")>
        <div style="width: 500px; float: right;">
            <cfoutput>
                <cfmediaplayer name="song" source="artists/songs/#playsong.song_location#" autoplay="yes" height="500" width="500"></cfmediaplayer>
            </cfoutput>
        </div>
    </cfif>
</div> 
```

如您所见，我有一个滚动 div，其中列出了用户播放列表中的所有歌曲。通过单击歌曲，它会更新在媒体播放器中播放的曲目。我想知道是否有任何方法可以在歌曲完成后自动单击下一个链接，并且也许有一种方法，如果一个变量已设置为在到达最后一首曲目时重复播放列表，它会再次回到第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:42:40.040

请参阅 CFMEDIAPLAYER 的参考指南 ( [http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSE66DB0CD-E16D-49e7-AAEE-F51F9580554E.html](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSE66DB0CD-E16D-49e7-AAEE-F51F9580554E.html) )。它支持在轨道结束时运行 JavaScript。您可以使用它来自动调用下一首曲目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:05:48.343

好的，我以前从未使用过 cfmediaplayer，但是这个伪代码应该可以让你到达你需要的地方。

这些是我使用的资源。

1.  [在 ColdFusion 中使用 JavaScript 和 CFMEDIAPLAYER 标签动态启动和停止视频](http://coldfusionexamples.com/2010/11/23/dynamically-starting-and-stopping-a-video-using-javascript-and-the-cfmediaplayer-tag-in-coldfusion/)
2.  [ColdFusion.Mediaplayer.setSource](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WS0ef8c004658c1089-6262c847120f1a3b244-7fda.html)
3.  [媒体播放器](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSE66DB0CD-E16D-49e7-AAEE-F51F9580554E.html)

* * *

```
<cfquery ...>
Select
   songUrl
from
   songs
</cfquery>
<!--- build your coldFusion array of song URLs --->
<cfset urlList = valueList(query.songURL)>
<cfset urlArray = listToArray(urlList)>

<script>
    <cfoutput>
    #toScript(urlArray)#
    var songIndex = #query.currentRow-1#; <!--- or url.currentRow, whatever you're using --->
    </cfoutput>
    startNext(){
        songIndex++;
        if(songIndex <= urlArray.length){                
            ColdFusion.Mediaplayer.setSource('mediaPlayerName', urlArray[songIndex]);
            ColdFusion.Mediaplayer.startPlay('mediaPlayerName');
        }
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:52:11.090

您可以在歌曲结束时运行 javascript。添加到您当前的代码：

```
 <cfmediaplayer onComplete=" YOUR_PLAY_NEXT_FUNCTION"  name="song"
 source="artists/songs/#playsong.song_location#" autoplay="yes"
 height="500" width="500"></cfmediaplayer> 
```

**从评论中添加**

我没试过，但这对你有用吗？

```
var i = 0; // This should be the current song_no 
$("#button").on('click', function(){ 
    // Adds +1 to the current song number
    i++  
    // Create a variable using the standard url + the added song-number
    var curr_song = "artists/songs/#playsong.song_location#"+i;  
    // Changes the attribute to the new song-url 
    $('cfmediaplayer').attr("name",curr_song); 
}); 
```

# java - 如何在 UI jsp 页面上显示计时器并且此客户端计时器应与 Spring 3 + Tiles 中的服务器端计时器同步？

> ID：15970142
> 
> 赞同：0
> 
> 时间：2013-04-12T11:26:38.707
> 
> 标签：java, spring-mvc, timer, scheduling, quartz-scheduler

我必须在客户端显示计时器，并且该计时器应该与基于 Spring 3 + Tiles 的 Web 应用程序中的服务器端计时器同步。每当我访问包含计时器的页面时，它都应该显示服务器端计时。我需要一些建议和帮助来实现计时器。

# browser - 从浏览器执行批处理文件

> ID：15970143
> 
> 赞同：1
> 
> 时间：2013-04-12T11:26:42.267
> 
> 标签：browser, batch-file, firefox-addon, execute

我有一个批处理文件。当我在浏览器（Firefox）中时，我主要必须执行它。所以我不想去目录并执行它。我想在我的浏览器中有一些东西。

首先，我想制作一个 Firefox 插件。像一个按钮，它执行我的批处理文件。但我失败了。然后我为文件做了一个书签，但它只显示了批处理文件的内容。

是否有任何其他选项可以从浏览器执行批处理文件？

编辑：我找到了一个附加组件，它创建了一个执行文件的按钮：

[https://addons.mozilla.org/de/firefox/addon/external-application-button/](https://addons.mozilla.org/de/firefox/addon/external-application-button/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:25:51.523

我不知道您可以从浏览器中运行它的方法，但也许您不需要这样做。我会创建一个全局键盘快捷键。你没有提到你的操作系统，所以我假设是 Windows。

1.  转到您的桌面，右键单击并选择`New`> `Shortcut`。

2.  浏览到您的 .bat 文件。

3.  将快捷方式命名为您喜欢的任何名称 - 可能最好使用`yourfile.bat shortcut`或类似名称。

4.  右键单击新创建的快捷方式并选择`Properties`.

5.  在`Shortcut`选项卡上，单击进入该`Shortcut key`区域。

6.  按`Ctrl`+ `Alt`+ `B`。我用过`B`bat - 你可以使用你喜欢的，尽管你的浏览器中可能已经使用了一些快捷方式 - 如有必要，请进行测试和调整。

7.  点击`OK`- 你很高兴！

# scala - Scala 中的函数式断言

> ID：15970145
> 
> 赞同：4
> 
> 时间：2013-04-12T11:26:50.477
> 
> 标签：scala, functional-programming, assert

是否有对返回结果的断言的内置支持？

这样做是非常无效的：

```
 def addPositive(a: Int, b: Int) = {
    assert(a > 0 && b > 0)
    a + b
  } 
```

我宁愿做类似的事情：

```
 def addPositive(a: Int, b: Int) = 
    assert(a > 0 && b > 0)(a + b) 
```

通过这种方式，我可以避免断言的命令性方面。（后者不编译）有类似的东西吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T12:58:42.067

函数式编程将函数视为纯数学函数（理想情况下）。那么数学上说一个函数对某些参数不起作用并且必须爆炸的方式是什么？

[**偏函数**](http://en.wikipedia.org/wiki/Partial_function)

事实证明，Scala 对这个概念有很好的支持：[PartialFunction](http://www.scala-lang.org/api/current/index.html#scala.PartialFunction)。这是使用部分函数重写代码的方式：

```
val addPositive: PartialFunction[(Int, Int), Int] = {
  case (a, b) if a > 0 && b > 0 => a + b
} 
```

这有几个好处：

如果您使用错误的参数调用它，它将引发`MatchError`异常。

```
addPositive(-1, 2) => Exception in thread "main" scala.MatchError: (-1,2) (of class scala.Tuple2$mcII$sp) 
```

您实际上可以对函数的域进行采样，以检查某些值是否非常适合作为函数的参数：

```
addPositive.isDefinedAt(-1, 2) => false 
```

如果您想将该函数应用于某些参数并获得一个结果或某个指示失败的值，您可以`lift`将其返回`Option`

```
addPositive.lift(-1, 2) => None
addPositive.lift(1, 2) => Some(12) 
```

您可以将其与其他函数组合，以在参数无效的情况下提供回退：

```
val fallback: PartialFunction[(Int, Int), Int] = { case (a, b) => Int.MinValue }
val f = addPositive orElse fallback

f(-1, 2) => -2147483648 
```

或者以自定义方式处理错误：

```
val raiseError: PartialFunction[(Int, Int), Int] = {
  case (a, b) => throw new IllegalArgumentException(s"Cannot apply addPositive to arguments $a and $b")
}
val g = addPositive orElse raiseError

g(-1, 2) => Exception in thread "main" java.lang.IllegalArgumentException: Cannot apply addPositive to arguments -1 and 2 
```

它适用于标准库：请参阅`Seq.collect`和`Seq.collectFirst`.

也是`PartialFunction`一个普通的一元函数，所以你也继承了所有的函数操作。

这是一篇文章，非常优雅地解释了 Scala 中的偏函数：

[**Scala 部分函数（没有博士学位）**](http://blog.bruchez.name/2011/10/scala-partial-functions-without-phd.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T11:43:41.553

您可以推出自己的实现：

```
def assert[T](cond: =>Boolean)(expr: =>T): T = {
  assert(cond)
  expr
} 
```

您还可以使用选项类型来避免异常，但这意味着您稍后必须对结果进行模式匹配：

```
def addPositive(a: Int, b: Int): Option[int] =
  if (a > 0 && b > 0) Some(a + b)
  else None 
```

这可以以与上述`assert`变体类似的方式重构。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-04-12T12:24:40.063

有`require`前置条件的功能，它几乎可以完成你想要的。你可以做

```
def addPositive(a: Int, b: Int) = 
   require (a > 0 && b > 0, a + b) 
```

有一部分[scala.Predef](http://www.scala-lang.org/api/current/index.html#scala.Predef%24)，所以它们总是被包括在内。参数（`a+b`在示例中）是按名称传递的，因此只有在条件不成立时才会执行。

`requires`始终处于激活状态，如果您希望能够停用它，您也可以使用它`assert`，例如：

```
assert(a > 0 && b > 0, a + b) 
```

# javascript - JavaScript - 将数组分成一对数组

> ID：15970147
> 
> 赞同：1
> 
> 时间：2013-04-12T11:26:55.117
> 
> 标签：javascript

我有一组团队名称，如下所示：

`teams = ['team1', 'team2', 'team3', 'team4']`

我想基于此创建一组匹配，所以目前，对于使用 teams 数组的一组匹配，您将获得：

```
teamMatches : [
  [ teams[0],  teams[1] ],
  [ teams[2],  teams[3] ]
] 
```

我的问题是，任何人都可以想出一种方法来基于长度为的团队数组生成这个 teamMatches 数组`n`。团队数组将始终是正确的数字，4,8,16 等。我尝试使用`Math.pow`with 2 来尝试生成括号但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:41:44.077

程序解决方案：

```
xs = [0,1,2,3,4,5,6,7,8,9]
result = []
n = 2 // n=3 gives a list of triples, etc
for(var i = 0; i < xs.length; i += n)
    result.push(xs.slice(i, i + n)) 
```

函数式编程解决方案：

```
function zip() {
    var args = [].slice.call(arguments, 0);
    return args[0].map(function(_, n) {
        return args.map(function(a) {return a[n] })
    })
}

xs = [0,1,2,3,4,5,6,7,8,9]
result = zip(
    xs.filter(function(_, n) { return n % 2 == 0 }),
    xs.filter(function(_, n) { return n % 2 != 0 })
)
// [[0,1],[2,3],[4,5],[6,7],[8,9]] 
```

解释：`zip`是一个函数（在某些编程语言中内置，但不是在 Javascript 中），它采用 N 个数组并将元素组合在一起位于同一位置：

```
zip([1,2,3], [10,20,30]) -> [ [1,10], [2,20], [3,30] ] 
```

我们将数组拆分为偶数和奇数部分：

```
[0,2,4,6...]
[1,3,5,7...] 
```

并将`zip`它们放在一起，得到有序对的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:48:47.813

这个怎么样

```
var teams = ['team1', 'team2', 'team3', 'team4'];
var teamMatches = new Array();
for(var i=0;i<teams.length; i+=2)
{       
  teamMatches.push([teams[i],teams[i+1]]);
} 
```

# jquery - 首先li的身高一样吗？

> ID：15970150
> 
> 赞同：0
> 
> 时间：2013-04-12T11:27:06.633
> 
> 标签：jquery, height, html-lists, equal-heights

我有一个带有 li 的 ul 菜单：

这里是 JSFiddle：http: [//jsfiddle.net/uvkQp/](http://jsfiddle.net/uvkQp/)

每行有 3 个 Top 项目 li，然后是其下的子项目，然后是 3 个 Top 项目及其下的子项目。我怎样才能让 Top 项目 li 的高度每次都是均匀的（其中包含最多子项目的最大高度）。

HTML：

```
<ul class="menu">
    <li>
         <a href="#">Top item</a>
         <ul>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
         </ul>
    </li>
    <li>
         <a href="#">Top item</a>
         <ul>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
         </ul>
    </li>
    <li>
         <a href="#">Top item</a>
         <ul>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
         </ul>
    </li>
    <li>
         <a href="#">Top item</a>
         <ul>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
         </ul>
    </li>
    <li>
         <a href="#">Top item</a>
         <ul>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
             <li><a href="#">Subitem</a></li>
         </ul>
    </li>
</ul> 
```

CSS：

```
#content{
float : left;
position : relative;
overflow : hidden;
padding : 0 28px 0 0;
width : 728px;
}

ul.menu,
ul.menu ul{
display : inline-block;
margin : 0;
padding : 0;
list-style : none;
width : 100%;
}

ul.menu li{
float : left;
font : 17px/1.0em open_sansbold;
margin : 0 0 0 28px;
color : #2780af;
text-transform : uppercase;
width : 224px;
}

ul.menu li:first-child,
ul.menu li:first-child + li + li + li + li {
margin : 0;
}

ul.menu li li{
font : 12px/1.0em open_sansregular;
margin : 0;
padding : 5px 0;
color : #777777;
text-transform : normal;
}

ul.menu li a, ul.menu li a:link, ul.menu li a:active, ul.menu li a:visited, ul.menu li a:hover {
display : block;
background : url(gfx/line-dotted.gif) repeat-x left bottom #FFFFFF;
margin : 0 0 5px;
padding : 0 0 11px;
color : #2780af;
text-decoration : none;
cursor : text;
}

ul.menu li li a, ul.menu li li a:link, ul.menu li li a:active, ul.menu li li a:visited {
display : block;
background : #FFFFFF;
margin : 0;
padding : 0;
color : #777777;
text-decoration : underline;
cursor : pointer;
}

ul.menu li li a:hover {
color : #000000;
text-decoration : none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:55:07.647

请在这里找到小提琴。[http://jsfiddle.net/ardeezstyle/aBUhJ/](http://jsfiddle.net/ardeezstyle/aBUhJ/)

这是代码

```
$(function(){
    maxH=0;
    $('.menu > li').each(function(){
        maxH = $(this).height() > maxH ? $(this).height() : maxH;
    })
    $('.menu > li').height(maxH);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:57:06.533

这是我的解决方案：

```
$("ul.menu > li:nth-child(3n+1)").css("clear","both"); 
```

我希望这可以帮助更多的人:-)

# c# - MVC4 mobile 动态使用 _Layout.cshtml 而不是 _Layout.Phone.cshtml

> ID：15970151
> 
> 赞同：1
> 
> 时间：2013-04-12T11:27:07.447
> 
> 标签：c#, asp.net-mvc, layout, asp.net-mvc-4, overriding

请对我温柔一点，这是我潜伏多年后关于 StackOverflow 的第一个问题。

我有一个 MVC4 站点已经启动并运行。我正在向网站添加移动支持，使用标准 MVC 功能一切顺利：

**如果没有“.Phone”版本的视图，我需要一些代码来允许框架使用 Layout.cshtml**

# 示例 1

我有以下文件：

```
Views/Home/HasBoth.cshtml
Views/Home/HasBoth.Phone.cshtml

Views/Shared/Layout.cshtml
Views/Shared/Layout.Phone.cshtml 
```

## 用桌面调用

1.  致电 /Home/HasBoth
2.  框架拿起**不是**移动设备
3.  框架调用 Layout.cshtml
4.  框架调用 HasBoth.cshtml

这很棒。

## 用手机打电话

1.  致电 /Home/HasBoth
2.  框架拿起**是**移动设备
3.  框架调用 Layout.Phone.cshtml
4.  框架调用 HasBoth.Phone.cshtml

同样，这也很棒。

# 示例 2

我有以下文件：

```
Views/Home/HasNoPhone.cshtml

Views/Shared/Layout.cshtml
Views/Shared/Layout.Phone.cshtml 
```

注意：没有 Views/Home/HasNoPhone.Phone.cshtml

## 用桌面调用

1.  致电/首页/HasNoPhone
2.  框架拿起**不是**移动设备
3.  框架调用 Layout.cshtml
4.  框架调用 HasNoPhone.cshtml

这很棒。

## 用手机打电话

1.  致电/首页/HasNoPhone
2.  框架拿起**是**移动设备
3.  **这里的代码解决没有 HasNoPhone.Phone.cshtml 视图**
4.  框架调用**Layout.cshtml**
5.  框架调用**HasNoPhone.cshtml**

以上是我想要实现的。

# 编辑

# 使用的解决方案

感谢 Zoka，我现在正在为其他希望做类似事情的人使用以下内容：

辅助方法：

```
/// <summary>
/// Looks to see if the view the exists.
/// </summary>
/// <param name="viewName">The view name.</param>
/// <param name="controllerContext">The controller context.</param>
/// <returns>True if the view exists.</returns>
public static bool ViewExists(string viewName, ControllerContext controllerContext)
{
  ViewEngineResult result = ViewEngines.Engines.FindView(controllerContext, viewName, null);
  return result.View != null;
} 
```

_ViewStart.cshtml：

```
@{                                                                                                             
  Layout = "~/Views/Shared/_Layout.cshtml";                                                                    

  // If a mobile viewing and no <view>.Phone.cshtml file is found set the override to desktop.                 
  // This will ensure _Layout.Phone.cshtml and yyy.Phone.cshtml partials are not called.                       
  string action = (string)ViewContext.Controller.ValueProvider.GetValue("action").RawValue;                    
  string controller = (string)ViewContext.RouteData.Values["Controller"];                                      
  string viewPhoneName = "~/Views/" + controller + "/" + action + ".Phone.cshtml";                             
  if (ViewContext.HttpContext.GetOverriddenBrowser().IsMobileDevice &&                                         
    MvcHelperAbove.ViewExists(viewPhoneName, ViewContext.Controller.ControllerContext) == false) 
  {                                                                                                            
    ViewContext.HttpContext.SetOverriddenBrowser(BrowserOverride.Desktop);                                     
  }                                                                                                            
} 
```

_Layout.Phone.cshtml

```
...
@* Below is essential to allow css to work when going from Mobile to Desktop *@
<script>
  $(document).ready(function () {
    $.mobile.ajaxEnabled = false;
  });
</script>
... 
```

再次感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:02:00.083

您可以使用现有的 jquery 移动包：

[http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx](http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx)

编辑：也许您可以使用页面安装程序并在容器中注册您的页面。这样你的控制器可以询问你的容器他应该返回哪个视图。

[创建 WindsorViewPageActivator](https://stackoverflow.com/questions/4433485/creating-windsorviewpageactivator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:34:51.697

据我了解您的问题，您需要了解是否存在某些观点。我使用放置在可从视图访问的任何类中的此类函数：

```
public static bool ViewExists(string _name, ControllerContext _controller_context)
{
    ViewEngineResult result = ViewEngines.Engines.FindView(_controller_context, _name, null);
    return (result.View != null);
} 
```

然后把它放到_ViewStart.cshtml中：

```
string action = (string)ViewContext.Controller.ValueProvider.GetValue("action").RawValue;
string controller = (string)ViewContext.RouteData.Values["Controller"];
var viewPhoneName = "~/Views/" + controller + "/" + action + ".Phone.cshtml";
if (YourNamespaceAndClassForAboveHelper.ViewExists(viewPhoneName, ViewContext.Controller.ControllerContext)) {
    Layout = "~/Views/Shared/Layout.Phone.cshtml"
} else {
    Layout = "~/Views/Shared/Layout.cshtml"
} 
```

最后在 Layout.cshml 中（分别在 Layout.Phone.cshtml 中），而不是调用`RenderBody`

```
string action = (string)ViewContext.Controller.ValueProvider.GetValue("action").RawValue;
string controller = (string)ViewContext.RouteData.Values["Controller"];
@RenderPage("~/Views/" + controller + "/" + action + ".cshtml"); @* .Phone.cshtml in Layout.Phone.cshtml *@ 
```

# matlab - MATLAB：获取按第一列排序的前 n 个值的平均值

> ID：15970152
> 
> 赞同：2
> 
> 时间：2013-04-12T11:27:07.773
> 
> 标签：matlab, mean

我有一个按第 1 列排序的 21128x9 单元格数组，例如（大量简化）：

```
 A=[1 3; 1 5; 1 3; 2 1; 2 2; 2 3; 3 5; 3 5]

    A =

         1     3
         1     5
         1     3
         2     1
         2     2
         2     3
         3     5
         3     5 
```

其中第 1 列中的某些值比其他值重复更多。

我想要做的是为第一列的每个值获取第二列的平均值，但仅针对前两个值。

IE

```
 ans= 1 4
         2 1.5
         3 5 
```

我正在尝试使用这个基本功能

```
 means = accumarray(A(:,1) ,A(:,2),[],@mean); 
```

但我不知道如何让它只适用于每组的前两个值。我假设我需要一个*for*循环，类似于：

```
 for ;
        means = accumarray(A(:,1) ,A(:,2),[],@mean);
    end 
```

我不知道*for*需要什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:34:25.513

`accumarray`将向量传递给匿名函数，因此您可以这样做，例如：

```
A = [1 3; 1 5; 1 3; 2 1; 2 2; 2 3; 3 5; 3 5];
maxAvgs = 3;
accumarray(A(:, 1), A(:, 2), [], @(x)mean(x(1:min(length(x), maxAvgs))))

ans =

3.6667
2.0000
5.0000

maxAvgs = 2;
accumarray(A(:, 1), A(:, 2), [], @(x)mean(x(1:min(length(x), maxAvgs))))

ans =

4.0000
1.5000
5.0000 
```

每当您在涉及匿名函数的情况下不确定时，您可以将匿名函数编写为`@(varargin)disp(varargin)`; 这将显示输入参数。在这种情况下，这不起作用，因为`accumarray` **要求**您传递给它的函数返回一个参数。但是，您仍然可以将其设置为匿名函数并从脚本运行您的代码；在编辑器窗口的行上设置断点，确保为断点的位置选择“匿名函数”。

**编辑：**

> 在我的实际数据中，有些有 60 个值，有些有 120，有些有 180。此外，是否可以对下一批值（即值 61-120，然后 121-180）运行均值函数？

要按照您在评论中提出的要求，我建议创建一个函数`splitMean`并将其传递给`accumarray`：

```
function y = splitMean(x, n)
% If length of x doesn't divide by n, the extra elements will be averaged
% separately
extra = mod(length(x), n);
M = length(x)-extra;

meanData = reshape(x(1:M), M / n, n);

extraMean = [];
if extra > 0, extraMean = mean(x(M+1:end)); end
if ~isempty(meanData)
    y = {[mean(meanData).'; extraMean]};
else
    y = {extraMean};
end 
```

然后，

```
maxAvgs = 2;
cell2mat(accumarray(A(:, 1), A(:, 2), [], @(x)splitMean(x, maxAvgs)))

ans =

4.0000
3.0000
1.5000
3.0000
5.0000

%%% Without the cell2mat:

ans =

[2x1 double]
[2x1 double]
[         5] 
```

这样，您就可以获得每个组可以同时提供的所有方法。注意`cell2mat`. 如果您希望它们按组索引拆分，则将其删除，您将获得一个元胞数组。

# javascript - 如何修复错误：this.parentNode 为空？

> ID：15970153
> 
> 赞同：0
> 
> 时间：2013-04-12T11:27:10.883
> 
> 标签：javascript, jquery, google-maps

我正在开发一个应用程序，您可以在其中显示根特（比利时）的所有纪念碑和地点。主页上有一个全屏地图（使用 jQuery 和 Google Maps API v3 编程），在左侧，有一个可以显示的项目列表。用户可以选择是单独显示该类别，还是将其添加到他们之前单击的类别中。

这就是发生的事情：我加载页面，然后单击一个类别。一切正常。但只有当我单击同一类别中的跨度时。每当我单击另一个类别中的某些内容时，firebug 都会抛出错误：parent is null (or this.parentNode is null)

我最初尝试使用 $(this).parent().html()... 在 jQuery 中执行此操作，但它给了我一个类似的错误：'TypeError: parent.html(...) is undefined'。

这是我的代码...

**HTML**

```
<section class="category transport">
     <h1>Transport</h1>
     <ul class="clearfix">
          <li><span class="category_li">Parkings</span></li>
          <li><span class="category_li">Stations</span></li>
     </ul>
</section> 
```

**JQUERY（悬停效果）** 这是我将“add_on_map”跨度添加到列表项的地方

```
$('.category ul li').hover(
        //mouse-enter
        function()
        {
            if($(this).children('.add_on_map').length == 0)
            {
                $(this).append(add_marker_sign);
                $('.add_on_map').click(showCategory);
            }
            else
            {
                $(this).children('.add_on_map').show();
            }
        }, 
        //mouse-leave
        function()
        {
            $(this).children('.add_on_map').hide();
        }
    ); 
```

**JQUERY（点击事件）**

```
function showCategory(e)
{
var parent = null;
parent = this.parentNode;

var add_marker_sign = '<span class="add_on_map plus"> +</span>';
var remove_marker_sign = '<span class="add_on_map minus"> -</span>';

var element;
var to_removed_marker_sign = parent.innerHTML.replace(add_marker_sign, remove_marker_sign);
var to_add_marker_sign = parent.innerHTML.replace(remove_marker_sign, add_marker_sign);

   //User clicks span -> If you click on the word:
   //                    All markers are deleted and the clicked category is added
   //So when the clicked item doesn't have the 'add_on_map' class:
   if(!$(this).hasClass('add_on_map')){
    console.log('remove all markers and add new');
    removeAllMarkers();
    element = $(this).text().toLowerCase();
    $(this).parent().html(to_removed_marker_sign);
    $('.category ul li').removeClass('active_subcategory');
    addMarkers(element);
    $('.category ul li span').click(showCategory);
   }
   //When clicked item DOES have 'add_on_map' class:
   else
   {
    element = $(this).parent().children('.category_li').text().toLowerCase();
    //Check if markers should be ADDED or DELETED
    if($(this).hasClass('plus')) {
        console.log('add markers');
        $(this).parent().html(to_removed_marker_sign);
        addMarkers(element);
        $('.category ul li span').click(showCategory);
    }
    if($(this).hasClass('minus')) {
        console.log('remove markers');
        $(this).parent().html(to_add_marker_sign);
        removeMarkers(element);
        $('.category ul li span').click(showCategory);
    }
   }
 } 
```

我在 jsfiddle 上做了一个小型现场[演示！](http://jsfiddle.net/98gmn/2)

如果有人可以帮助我解决这个问题，我会很感激！提前致谢。

海伦娜·S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:03:32.097

我基于您的 JSFiddle 并得出了该解决方案：http: [//jsfiddle.net/98gmn/6/](http://jsfiddle.net/98gmn/6/)（只有 jQuery 部分已更改）

## jQuery

```
var add_marker_sign = '<span class="add_on_map plus"> +</span>';
var remove_marker_sign = '<span class="add_on_map minus"> -</span>';

$('.category ul li').click(showCategory);

$('.category ul li').hover(
//mouse-enter
function () {
if ($(this).children('.add_on_map').length == 0) {
    $(this).append(add_marker_sign);
} else {
    $(this).children('.add_on_map').show();
}
},
//mouse-leave
function () {
$(this).children('.add_on_map').hide();
});

function showCategory() {
var element;
var $this = $(this);
var $marker = $this.find('span.add_on_map');

element = $(this).text().toLowerCase();
$this.toggleClass('show_on_map');
$marker.toggleClass('plus').toggleClass('minus');

if($marker.hasClass('plus'))
{
    $marker.html(' +');
}
else
{
    $marker.html(' -');
}
} 
```

它简化了 DOM 和事件操作，在要在地图上显示的列表元素上设置类“show_on_map”。

# html - html标签是干什么用的？

> ID：15970155
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:27:11.210
> 
> 标签：html

您好，我正在尝试撰写有关 html 标准的报告，但除了“其良好的标准”之外，我一生都无法找到有关 html 标记的任何信息，我的问题是为什么需要这样做？假设我正在使用严格的文档类型，如果您从文档中省略它会发生什么情况。如果您还知道我可以在哪里找到支持和反对 html 标记的好信息/论据，那将是非常棒的，感谢您的所有帮助。我正在开发一个类似于 w3schools 的教程类型的网站，但是对于 html 新手的学生来说，这是一个封闭的系统，所以我试图将内容放在一起，获取阅读材料等，以使这个在线系统成为最好的真的可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:44:21.110

HTML 文档必须有一个根节点。该根节点必须是 HTML 元素。

该规范允许省略 html 元素的开始标记（可以隐含该元素的存在，因此您无需具体说明它。）

但是，如果您没有 HTML 标记，那么您就不能在其上具有任何属性。如果你不能有属性，你就不能有一个`lang`属性。如果您没有`lang`属性，那么客户必须通过猜测来确定文档的语言。

这可能会导致问题，尤其是在文档中使用多种语言的情况下，例如页面出现在不同的搜索结果集中（该文档似乎是法语，所以我们不要对讲英语的人进行高度评价）和不正确的发音指南由屏幕阅读器选择。

还有一些其他属性可以出现在`html`标签上，但这可能是不包括在内的最严重后果的一个。其他可能会产生影响的内容包括`class`可以`id`用于样式化页面的样式，它们共享样式表，但方式不同。

简而言之：HTML 标记仅对您可以附加到它的属性有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T11:34:00.607

SGML 语法（从中派生出 HTML）规定文档中应该只有一个最顶层的元素：[http ://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language#Syntax](http://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language#Syntax)

无需争论它是否需要：如果您的文档没有`<html>`标签，那么它就不是 HTML 文档，就像没有法拉利标志的法拉利不是法拉利（抱歉，强制性汽车类比）。

省略`<html>`标签很可能会导致应用程序无法正确处理您的文档；某些浏览器（例如 IE6）可能会尝试通过在不完整的 HTML 文档中添加缺少的标签来找到解决方法，但是是全局的；这将导致不可预测的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T11:28:47.513

告诉浏览器它是一个 html 文档的开始和结束

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-12T11:29:41.547

它标记 html 文档的开始或结束。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T11:29:04.593

它告诉浏览器这是一个 HTML 文档。它也是`HTML`根节点。您应该始终将它包含在您的 HTML 文件中，并且永远不要忽略它（即使浏览器正确呈现页面）。

您可以通过以下方式验证 HTML 文档是否有效：

[http://validator.w3.org/](http://validator.w3.org/)

# codeigniter - Datamapper ORM：通过ID数组获取对象

> ID：15970156
> 
> 赞同：0
> 
> 时间：2013-04-12T11:27:12.767
> 
> 标签：codeigniter, orm, datamapper

我有一个这样的数组：

```
$arr = (1, 3, 87, 200); 
```

我只想获取这些 ID 的对象

我这样做：

```
$object = new Object($arr);

foreach($object as $o)
{
$o->user->get()
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:04:14.333

您可以使用该[`where_in`](http://datamapper.wanwizard.eu/pages/get.html#where_in)方法。

```
$arr = array(1, 3, 87, 200);

$o = new Object();
$o->where_in('id', $arr);
$o->get();

// When $o->get() is called, all records where
// the id is 1, 3, 87 or 200 will be returned 
```

如果您想订购它们，您可以在调用之前使用以下命令`get()`。

```
$o->order_by("column_1", "column_2"); 
```

有关您可以在获取之前执行的更多操作，请参阅手册页

[http://datamapper.wanwizard.eu/pages/get.html](http://datamapper.wanwizard.eu/pages/get.html)

# objective-c - WebView 页数

> ID：15970159
> 
> 赞同：9
> 
> 时间：2013-04-12T11:27:28.053
> 
> 标签：objective-c, cocoa, webview

我有一个`WebView`显示一些经常更新的内容。我想在我的 UI 中显示一个页面计数器，它会告诉用户如果他们要打印它，网页视图会有多少页面。

我试过做：

```
NSRange r = NSMakeRange(0, 0);
BOOL knows = [[[[webView mainFrame] frameView] documentView] knowsPageRange: &r]; 
```

它给出`knows = YES`但`r.length`总是等于 1。

我怎样才能获得这些信息？（如果可能，最好以高性能的方式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T00:10:47.640

不是一个完美优雅的解决方案，但可能包括：

```
NSString *heightStr = [webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"]; // Get the height of our webView
int height = [heightStr intValue];

CGFloat maxHeight   = kDefaultPageHeight - 2*kMargin;
CGFloat maxWidth    = kDefaultPageWidth - 2*kMargin;
int pages = ceil(height / maxHeight);
return pages; 
```

通过[克里斯米尔斯的博客。](http://coderchrismills.wordpress.com/2011/06/25/making-a-pdf-from-a-uiwebview/)

# java - 在 Java 客户端和服务器应用程序之间共享配置

> ID：15970160
> 
> 赞同：0
> 
> 时间：2013-04-12T11:27:35.423
> 
> 标签：java, client-server, data-sharing

我正在构建一个 java 客户端服务器应用程序（两者都是 JSE），这里有一个简短的描述。

*   **服务器**
    服务器与接收“请求”并通过 TCP/IP 对这些请求提供“响应”的外部系统进行交互。“响应”的内容取决于描述成“​​规则押金”的“规则”。

*   **客户**
    端客户 端是通过 HornetMQ 连接到服务器的 Java 应用程序。我有多个客户端（不是同时）可以更改“规则存款”以更新/更改或更正响应行为。

我的问题是：我如何实施这种共享的“规则存款”？我可以使用常见的框架吗？

一些注意事项： 我不能使用共享文件 我没有义务使用 HornetMQ 我不想使用数据库 RDBMS

# c# - 读取xml文件的多个子节点

> ID：15970161
> 
> 赞同：14
> 
> 时间：2013-04-12T11:27:37.180
> 
> 标签：c#, xml, visual-studio-2010

我创建了一个带有示例内容的 XML 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<Periods>
  <PeriodGroup name="HER">
    <Period>
      <PeriodName>Prehistoric</PeriodName>
      <StartDate>-500000</StartDate>
      <EndDate>43</EndDate>
    </Period>
    <Period>
      <PeriodName>Iron Age</PeriodName>
      <StartDate>-800</StartDate>
      <EndDate>43</EndDate>
    </Period>
    <Period>
      <PeriodName>Roman</PeriodName>
      <StartDate>43</StartDate>
      <EndDate>410</EndDate>
    </Period>
  </PeriodGroup>
  <PeriodGroup name="CAFG">
    <Period>
      <PeriodName>Prehistoric</PeriodName>
      <StartDate>-500000</StartDate>
      <EndDate>43</EndDate>
    </Period>
    <Period>
      <PeriodName>Roman</PeriodName>
      <StartDate>43</StartDate>
      <EndDate>410</EndDate>
    </Period>
    <Period>
      <PeriodName>Anglo-Saxon</PeriodName>
      <StartDate>410</StartDate>
      <EndDate>800</EndDate>
    </Period>   
  </PeriodGroup>
</Periods> 
```

我需要能够读取选定 PeriodGroup 中的 Period 子节点。我猜 PeriodName 可能是 Period 的一个属性，如果这更明智的话。

我查看了大量示例，但似乎没有一个是完全正确的，而且似乎有几十种不同的方法，有些使用 XmlReader，有些使用 XmlTextReader，有些没有使用。由于这是我第一次阅读 Xml 文件，我想我会问是否有人可以给我一个指针。我有一些工作只是为了尝试一下，但感觉很笨重。我正在使用 VS2010 和 c#。另外，我看到很多人都在使用 LINQ-Xml，所以我很欣赏使用这种方法的利弊。

```
string PG = "HER";
XmlDocument doc = new XmlDocument();
doc.Load(Server.MapPath("./Xml/XmlFile.xml"));
string text = string.Empty;
XmlNodeList xnl = doc.SelectNodes("/Periods/PeriodGroup");
foreach (XmlNode node in xnl)
{
    text = node.Attributes["name"].InnerText;
    if (text == PG)
    {
        XmlNodeList xnl2 = doc.SelectNodes("/Periods/PeriodGroup/Period");
        foreach (XmlNode node2 in xnl2)
        {
            text = text + "<br>" + node2["PeriodName"].InnerText;
            text = text + "<br>" + node2["StartDate"].InnerText;
            text = text + "<br>" + node2["EndDate"].InnerText;
        }
    }
    Response.Write(text);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T11:43:48.953

您可以像这样使用 XPath 方法：

```
XmlNodeList xnl = doc.SelectNodes(string.Format("/Periods/PeriodGroup[@name='{0}']/Period", PG)); 
```

虽然更喜欢 LINQ to XML 因为它的可读性。

这将`Period`根据提供的`PeriodGroup` `name`属性返回节点子节点，例如`HER`：

```
XDocument xml = XDocument.Load(HttpContext.Current.Server.MapPath(FileLoc));

var nodes = (from n in xml.Descendants("Periods")
            where n.Element("PeriodGroup").Attribute("name").Value == "HER"
            select n.Element("PeriodGroup").Descendants().Elements()).ToList(); 
```

结果：

```
<PeriodName>Prehistoric</PeriodName>
<StartDate>-500000</StartDate>
<EndDate>43</EndDate>

<PeriodName>Iron Age</PeriodName>
<StartDate>-800</StartDate>
<EndDate>43</EndDate>

<PeriodName>Roman</PeriodName>
<StartDate>43</StartDate>
<EndDate>410</EndDate> 
```

查询非常简单

```
from n in xml.Descendants("Periods") 
```

将返回 element 的后代元素的集合`Periods`。然后我们使用`where`基于属性值过滤这个节点集合：

```
where n.Element("PeriodGroup").Attribute("name").Value == "HER" 
```

然后将集合过滤到具有值为的属性的`PeriodGroup`元素`name``HER`

最后，我们选择`PeriodGroup`元素并获取它的后代节点

```
select n.Element("PeriodGroup").Descendants().Elements() 
```

**编辑（见评论）**

由于这个表达式的结果只是一个查询，我们用它`.ToList()`来枚举集合并返回一个包含您需要的值的对象。您还可以创建匿名类型来存储元素值，例如：

```
var nodes = (from n in xml.Descendants("Period").
             Where(r => r.Parent.Attribute("name").Value == "HER")
             select new
             {
                  PeriodName = (string)n.Element("PeriodName").Value,
                  StartDate = (string)n.Element("StartDate").Value,
                  EndDate = (string)n.Element("EndDate").Value
             }).ToList();

//Crude demonstration of how you can reference each specific element in the result
//I would recommend using a stringbuilder here..
foreach (var n in nodes)
{
      text += "<br>" + n.PeriodName;
      text += "<br>" + n.StartDate;
      text += "<br>" + n.EndDate;
} 
```

这是`nodes`查询运行后对象的样子：

![在此处输入图像描述](https://i.stack.imgur.com/dk0Oo.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T11:39:36.040

由于该`XmlDocument.SelectNodes`方法实际上接受 XPath 表达式，因此您可以像这样自由地进行：

```
XmlNodeList xnl = doc.SelectNodes("/Periods/PeriodGroup[@name='" + PG + "']/Period");
foreach (XmlNode node in xnl) {
    // Every node here is a <Period> child of the relevant <PeriodGroup>.
} 
```

[您可以在w3schools](http://www.w3schools.com/xpath/)了解有关 XPath 的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-29T09:52:05.083

通过这个

```
 public static void XMLNodeCheck(XmlNode xmlNode)
    {
        if (xmlNode.HasChildNodes)
        {
            foreach (XmlNode node in xmlNode)
            {
                if (node.HasChildNodes)
                {
                    Console.WriteLine(node.Name);
                    if (node.Attributes.Count!=0)
                    {
                        foreach (XmlAttribute att in node.Attributes)
                        {
                            Console.WriteLine("----------" + att.Name + "----------" + att.Value);
                        }
                    }

                    XMLNodeCheck(node);//recursive function 
                }
                else
                {
                    if (!node.Equals(XmlNodeType.Element))
                    {
                        Console.WriteLine(node.InnerText);
                    }

                }
            }
        }
    } 
```

# iphone - 如何从 PhotoAlbum 中获取所选图像以及如何将其保存在应用程序文档目录中？

> ID：15970165
> 
> 赞同：-4
> 
> 时间：2013-04-12T11:27:46.997
> 
> 标签：iphone

在我的 iOS 应用程序中，如何从 PhotoAlbum 中获取所选图像以及如何将其保存在应用程序文档目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:35:29.440

[你可以在UIImagePickerController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class)的帮助下做到这一点

```
-(void)showImagePicker
{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];        
    imagePicker.sourceType =  UIImagePickerControllerSourceTypeSavedPhotosAlbum;  
    imagePicker.delegate = self;
    [self presentModalViewController:imagePicker animated:YES];
} 
```

现在使用以下委托方法处理用户选择的图像

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];//Do whatever you want to do with your image.
} 
```

为了更清楚事情是如何工作的，请阅读[本教程](http://www.techotopia.com/index.php/An_Example_iOS_4_iPhone_Camera_Application_%28Xcode_4%29)

希望这可以帮助。

# php - 在使用 PHP 进行数据库操作时使用 .sql 文件

> ID：15970169
> 
> 赞同：0
> 
> 时间：2013-04-12T11:27:51.323
> 
> 标签：php, mysql, phpmyadmin, mysql-workbench

我对整个开发方面有点陌生，但我想做个好人。

在数据库创建中，我曾经通过 PHPMyAdmin --> Wamp Server 来执行此操作。

我必须学习如何使用 MySQL Workbench，我很喜欢这种体验。

问题是，当我通过使用 Work Bench 创建 .sql 文件时，例如 data.sql，我无法将其导入 PHPMyAdmin，以便继续我的开发（与网络相关），因为出现了许多错误例如#1146。

这真的很令人沮丧，因为我必须做双重工作并创建我在 PHP MyAdmin 的 Work Bench 中所做的事情。

有没有更简单的方法？

就像我可以连接到 .sql 文件（作为数据库）并继续执行我的项目吗？（它有点愚蠢，但我已经沦为那个。）

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:43:46.573

这篇文章似乎可能对您有所帮助，您是否检查了转储的默认编码并确保 mysql 期望正确的编码类型？

[http://forums.mysql.com/read.php?103,275798,275798](http://forums.mysql.com/read.php?103,275798,275798)

另外：请在提问之前阅读董事会的政策。它声明在问这样的问题之前要做一些研究......我用谷歌搜索“mysql workbench dump to phpmyadmin”，弹出的第一个项目是解释这种确切情况的[**视频。**](http://www.screenr.com/vtps):)

# apache - RewriteCond 中的 %N 反向引用

> ID：15970170
> 
> 赞同：18
> 
> 时间：2013-04-12T11:27:53.037
> 
> 标签：apache, .htaccess, mod-rewrite, wildcard-subdomain, backreference

我正在开发一个虚拟域系统。我将通配符 DNS 设置为`*.loc`，并且正在尝试处理我的`.htaccess`文件。以下代码有效：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?example\.loc$ [NC]
RewriteCond %{REQUEST_URI} !^/example/
RewriteRule (.*) /example/$1 [L,QSA] 
```

但是，我希望它可以与我输入的任何内容一起使用。但是，我需要`%{REQUEST_URI}`针对作为域找到的文本进行检查。我尝试使用此代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?([a-zA-Z0-9-]*.)?([a-zA-Z0-9-]+)\.loc$ [NC]
RewriteCond %{REQUEST_URI} !^/%3/
RewriteRule (.*) /%3/$1 [L,QSA] 
```

但是该行`RewriteCond %{REQUEST_URI} !^/%3/`导致我的代码引发内部服务器错误。我知道这是因为我的代码中有 %N，但是有没有办法可以使用它？我需要这一行，否则我的代码会因内部重定向而失败。

我希望这对某人有意义。我所需要的只是能够在后面的 RewriteCond 中反向引用 RewriteCond。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-12T21:21:57.160

您在这里做错了两件事。

首先，你的`%{HTTP_HOST}`正则表达式不好。您需要转义这些`.`点，否则它们将被视为“任何不是换行符的字符”。这实质上使`%3`反向引用成为 TLD 之前主机名的最后一个字符（例如`http://blah.bar.loc`% **3** = `r`）。

其次，您不能在 a 的正则表达式中使用反向引用`RewriteCond`，只能在左侧字符串中使用，这是一种奇怪的限制。但是，您可以`\1`在正则表达式中使用引用，以便您可以构造一个聪明的左侧字符串来匹配。像这样的东西`%3::%{REQUEST_URI}`，然后你可以像这样匹配：`!^(.*?)::/\1/?`. 这个正则表达式本质上说：“匹配并分组 :: 之前的第一个文本块**，***然后*确保:: 之后的文本块**以**”开头。**`/(first block)`**

 **所以你的规则应该是这样的：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?([a-zA-Z0-9-]*\.)?([a-zA-Z0-9-]+)\.loc$ [NC]
RewriteCond %3::%{REQUEST_URI} !^(.*?)::/\1/?
RewriteRule (.*) /%3/$1 [L,QSA] 
```**

# c++ - 为什么我可以将字符串文字分配给 char* 指针

> ID：15970171
> 
> 赞同：4
> 
> 时间：2013-04-12T11:27:54.303
> 
> 标签：c++, visual-c++

我认为字符串中的文字`c++`是`const char*`. 而且您不能将`const char*`对象分配给`non-constant char*`对象。但在 Visual Studio 2010 中。以下代码可以编译而不会出现错误或警告，但会产生运行时错误。

```
int main(void)
{      
    char *str2 = "this is good";
    str2[0] = 'T';
    cout << str2;
    getchar();
    return 0;
} 
```

而如果我们不修改字符串的值，读取值是可以的：

```
for(char *cp = str2; *cp !=0; ++cp) {
    printf("char is %c\n", *cp);
}
getch();
return 0; 
```

**那么为什么我们可以在这里将 const char* 分配给 char* 呢？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:38:01.857

问题在 VC++ 下，但在 GCC 中有一个有意义的警告：

> 警告：不推荐将字符串常量转换为 'char*' [-Wwrite-strings]

此警告意味着编译器将应用隐式转换，尽管有 const/non-const 差异。所以，这段代码是可以的（在运行时没有任何修改）：

```
char *str2 = "this is good"; 
```

但是，修改`str2`会产生未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:35:12.373

字符串文字确实是恒定的。但是，数组衰减为指针，您将非`const`指针指向数组中的第一个元素：

```
char *str2 = "this is good"; 
```

修改 const char 数组的任何值都会产生未定义的行为。

这不会在 gcc 4.7.2 下编译干净。如果在 MSVC 下将警告级别提高到警告级别 4，它也可能会在那里发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:56:44.987

让我们看一下 C++03 而不是 C++11：

[conv.array]

> 不是宽字符串文字的字符串文字（2.13.4）可以转换为“pointer to char”类型的右值；

实际上，任何窄字符串文字都是“n const char 数组”类型，但正如您在上面所读到的，有一个（在 C++03 中已弃用）功能可以将它们隐式转换为 rvalues 类型`char *`。

仍然不允许您更改字符串的内容，就像您做了一样`const_cast`：指针指向的对象已被声明为 const，因此不允许修改（未定义的行为）。

# matlab - dlmwrite 用于 matlab 中的特定行和列

> ID：15970174
> 
> 赞同：0
> 
> 时间：2013-04-12T11:28:11.000
> 
> 标签：matlab

我有 10x10 矩阵的 2D 数据，看起来像 [这里的表格](http://i46.tinypic.com/2ex4tv6.gif)

但是，数据正在更新并附加每个 dt 计算，因此我想为特定列重新组织和编写它，您可以在[链接中看到此表](http://i49.tinypic.com/5v83sy.gif)

我通常使用那些代码来编写

```
 t=t+dt;

    if ss==2000
     dlmwrite('d:\Model_Results_Theta.txt', Tnew,'-append');
    ss=0;
    end 
```

您能否推荐我使用 matlab 代码根据特定行和列组织数据的任何不同方法？提前致谢 ！！

# ios - 如何判断这款 iPhone 是否支持 Game Center 挑战？

> ID：15970175
> 
> 赞同：1
> 
> 时间：2013-04-12T11:28:12.997
> 
> 标签：ios, game-center

Game Center 挑战仅在 iOS 6 中可用，但 Game Center 本身更早可用（iOS 5？）。

如果我想在我的游戏中显示挑战按钮，则在旧设备上玩时需要将其隐藏。可以只测试版本字符串> 6，还是有更可靠的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T08:15:44.847

简单地测试为`GKChallenge`我工作的存在：

```
bool gameCenterAreChallengesAvailable()
{
    return NSClassFromString(@"GKChallenge"); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T21:11:03.780

您可以使用此测试来查看相关方法是否存在：

```
if ([GKAchievement instancesRespondToSelector:@selector(issueChallengeToPlayers:message:)])
{
    // Challenges exist on this device, show button.
} 
```

# java - 第二次启动android应用程序时如何修复eclipse gc开销错误

> ID：15970182
> 
> 赞同：1
> 
> 时间：2013-04-12T11:28:30.333
> 
> 标签：java, android, eclipse

我在 Eclipse 中遇到问题，当我第二次启动我的 android 应用程序时，它显示错误消息。Eclipse GC 开销（堆内存开销）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:23:26.503

右键单击项目
选择 RunAs
运行配置
选择您的项目作为 BaseDirectory。代替目标给 eclipse:eclipse install
在第二个选项卡中给 -Xmx1024m 作为 VM 参数。

另一种简单的方法是
打开`eclipse.ini`并将 Xms（堆的起始内存）和 Xmx（堆的最大内存）值增加到您认为对您的系统和项目合理的值，例如：

```
-Xms512m
-Xmx1024m 
```

试试这个。如果问题仍然存在，请告诉我

# mysql - 跟踪谁更改了 mysql 中的字段

> ID：15970183
> 
> 赞同：0
> 
> 时间：2013-04-12T11:28:32.107
> 
> 标签：mysql

是否可以判断数据库中的特定字段是否由 mysql 中的特定用户名更新？

例子：

DBNumber1 包含联系人表。联系人表包含名字、姓氏、电话号码。

UserA（数据库帐户）创建一条记录（id=102）。该记录的每个字段都是他在某个日期和时间“最后更新的”。UserB 更新该记录 (102)。他更改了错误的电话号码。firstName 和 lastName 应为“UserA 在日期+时间最后更新”，phoneNumber 应为“UserB 在不同日期+时间最后更新”。

到目前为止，我所做的是向上次更新的数据库添加一列，但我希望这适用于每个字段，而不仅仅是记录。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:36:19.940

创建一个在更新时执行的触发器。让它比较新旧值并采取行动，例如在单独的“记录”表中插入事务数据，例如用户名和当前时间、行 ID 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:32:18.130

我几乎可以肯定 Mysql 不知道这一点。您可以做的是为您要记录的每一列添加一个 last_updated 列。或者如果您需要非自动日志记录，则打开二进制日志（您需要检查日志是否包含用户名，我猜他们确实如此）。但是，从那里获取数据会涉及到相当多的工作（相对而言），所以这只是在您*认为*您很少需要它的情况下。

# laravel - 如何使用 Artisan 的 CLI 选项在不同的 Laravel 环境中执行

> ID：15970184
> 
> 赞同：0
> 
> 时间：2013-04-12T11:28:36.340
> 
> 标签：laravel, laravel-3

我是第一次在我的应用程序上安装迁移脚本。我想做的是使用 /config/test/database.php 下的配置来运行我的迁移安装脚本。

我在paths.php 上的条目如下

```
 $environments = array(
     'test' => array('http://test.*'),
     'local' => array('http://localhost.*')
); 
```

我在 /application/config/test/database.php 上的条目

```
return array(
     'connections' => array(
     'mysql' => array('driver' => 'mysql',
     'host' => 'localhost',
     'database' => 'new_db',
     'username' => 'root',
     'password' => 'root',
     'charset' => 'utf8',
     'prefix' => '')
     ),
); 
```

和 /application/config/database.php

```
return array(
    'connections' => array(
    'mysql' => array('driver' => 'mysql',
    'host' => 'localhost',
    'database' => 'default_db',
    'username' => 'root',
    'password' => 'root',
    'charset' => 'utf8',
    'prefix' => '')
    ),
); 
```

每次我运行`php artisan migrate:install --env=test`它时，它总是安装在 /application/config/database.php 上定义的数据库上，而不是使用 /application/config/test/database.php 中的配置。

感谢有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:38:46.563

我自己想通了。我不确定这是否已在 Laravel 中针对多种环境进行了记录。path.php 上的环境定义需要一个附加参数

```
$environments = array(
     'test' => array('http://test.*','MY_COMPUTER_NAME'),
     'local' => array('http://localhost.*')
); 
```

现在，`php artisan migrate:install --env=test`正确运行会在 /application/config/test/database.php 上定义的数据库配置上执行迁移脚本。

希望这对其他人有帮助

# jquery - 多表单验证

> ID：15970186
> 
> 赞同：0
> 
> 时间：2013-04-12T11:28:45.267
> 
> 标签：jquery, html

在一个页面上，我有一个表单，我需要使用某种按钮进行验证，但是可以复制该表单，因此有多个具有相同 classid 的表单。没问题，这可以通过

```
$(button.validate).click(function (){
  $(this.form).validate();    
}); 
```

validate() 函数不能像其他函数一样与此运算符一起使用，所以我问有没有其他方法可以做到这一点？我不能给每个表单唯一的 ID...我只是在表单中有一个按钮，用于验证其附加的表单。

```
function validate(targetform){

    $(targetform).validate({ 

            errorPlacement: function (error, element) {                 
            error.appendTo( element.parent("div").next("div"));   
             }           
       });
    } 
```

html

```
<button onclick="validate($(this).closest('form'))">validate</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:33:26.547

您可以使用每个按钮访问表单

```
$(document).ready(function () {
    $('.myButtonClass').click(function () {
        var relevantFormID = $(this).closest('form').prop('id');
        ValidateForm(relevantFormID);
    });
} 
```

然后，一个单独的`ValidateForm`函数可以完成所有工作：

```
function ValidateForm(targetFormID) {
    $targetForm = $('form[id="' + targetFormID + '"]');
    //Your target form is now available as a jQuery object, all perks included
    //validation goes here
} 
```

# database - 如何在教义上使用“外键”？

> ID：15970191
> 
> 赞同：12
> 
> 时间：2013-04-12T11:28:56.173
> 
> 标签：database, symfony, doctrine-orm

我正在制作关于 symfony2 和教义的课程管理系统

我很困惑在教义中使用外键。

/Entity/User.php

```
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     *@ORM\OneToOne(targetEntity="Acme\UserBundle\Entity\Lesson", inversedBy("teacher"))
     */
    protected $id;
    .
    .
} 
```

/Entity/Lesson.php

```
class Lesson
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;
    /**
     *
     * @ORM\OneToOne(targetEntity="Acme\UserBundle\Entity\User", inversedBy("id"))
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    private $teacher;
    .
    .
} 
```

每个“课程”都有一位在 User.php 中注册的老师。

我该如何为此目的编写注释？

我还计划每节课都有多个来自 /Entity/User 的学生。我该如何为此目的编写注释？（多对多？）

我进行了研究，但找不到用于学说注释的好文档。

多谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T11:43:49.750

这里有一些教义注释的备忘单：[链接](https://blog.elao.com/en/dev/symfony-2-doctrine-2-cheat-sheets/)

对于您的问题，您需要在关联的每一侧定义变量。

在 Lesson.php 中：

```
/**
 * @ORM\OneToOne(
 *     targetEntity="Acme\UserBundle\Entity\User", 
 *     inversedBy="lessons*removethis : name of the variable in user.php*"
 * )
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
private $teacher; 
```

在 User.php 中：

```
/**
 * @ORM\OneToOne(
 *     targetEntity="Acme\UserBundle\Entity\Lesson", 
 *     mappedBy="teacher*removethis : name of the variable in lesson.php*"
 * )
 */
private $lessons; 
```

是的，ManyToMany 非常适合您正在寻找的目的:)

# sql - 如果（可选）参数为空，则选择无

> ID：15970194
> 
> 赞同：1
> 
> 时间：2013-04-12T11:29:06.363
> 
> 标签：sql, sql-server-2008, select

事情是这样的：我有一个表 DailyContent (dailyContentId, userId, weekDayId, eventId)，我在其中存储某些天的项目（对于每个用户）。天分为不同的事件（每天更多的事件）。我想做的是选择项目（对于一个事件），但要选择不同的天数。天的 ID 从 1 到 7。如果“选择”天，我得到 dayId，否则我得到 null 作为输入参数。

如果选择多于一天，则仅返回所有天共有的项目。

如果没有选择日期，则不返回任何内容

我已经尝试过这样的事情，但我只得到了一天的结果。如果我选择超过一天，则返回 NOTHING（应返回为该事件存储两天的项目，如上所述）。

```
DECLARE @daysCount int -- only for incitation how many days are actually set
SET @daysCount = 0
IF (@mon IS NOT NULL)
    BEGIN
        SET @daysCount = @daysCount+1
    END
IF (@tue IS NOT NULL)
    BEGIN
        SET @daysCount = @daysCount+1
    END
IF (@wed IS NOT NULL)
    BEGIN
        SET @daysCount = @daysCount+1
    END
IF (@thu IS NOT NULL)
    BEGIN
        SET @daysCount = @daysCount+1
    END
IF (@fri IS NOT NULL)
    BEGIN
        SET @daysCount = @daysCount+1
    END
IF (@sat IS NOT NULL)
    BEGIN
        SET @daysCount = @daysCount+1
    END
IF (@sun IS NOT NULL)
    BEGIN
        SET @daysCount = @daysCount+1
    END

-- Insert statements for procedure here
SELECT 
    DailyContent.dailyContentId

            FROM DailyContent

    WHERE
    eventId=@eventId AND (weekDayId=@mon OR
            weekDayId=@tue OR
            weekDayId=@wed  OR
            weekDayId=@thu  OR
            weekDayId=@fri  OR
            weekDayId=@sat  OR
            weekDayId=@sun)
    GROUP BY DailyContent.dailyContentId
    HAVING (COUNT(dailyContentId) = @daysCount) 
```

这个 HAVING COUNT 有问题。如果我删除它，它可以正常工作，但前提是选择了一天。

实际上，我想要“如果参数为空则全选”的反面。

我正在使用 MS SQL 服务器 2008。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:18:54.213

您是否尝试过使用额外的`if condition`方法来处理“未选择任何一天”的情况，例如：

```
IF (@daysCount<>0)
SELECT DailyContent.dailyContentId, DailyContent.itemId, title, defaultSmallImagePath
    FROM DailyContent
    LEFT OUTER JOIN
        itemsTranslations ON itemsTranslations.itemId = DailyContent.itemId
    LEFT OUTER JOIN
        itemAdditionalInformation ON itemAdditionalInformation.itemId = DailyContent.itemId
    WHERE
    eventId=@eventId AND (weekDayId=@mon OR
            weekDayId=@tue OR
            weekDayId=@wed  OR
            weekDayId=@thu  OR
            weekDayId=@fri  OR
            weekDayId=@sat  OR
            weekDayId=@sun)
    GROUP BY DailyContent.dailyContentId, DailyContent.itemId, title, defaultSmallImagePath
    HAVING (COUNT(weekDayId) = @daysCount) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T17:08:37.930

试试这个——

```
DECLARE @daysCount INT
SELECT @daysCount = 
    CASE WHEN @mon IS NOT NULL THEN 1 ELSE 0 END +
    CASE WHEN @tue IS NOT NULL THEN 1 ELSE 0 END +
    CASE WHEN @wed IS NOT NULL THEN 1 ELSE 0 END +
    CASE WHEN @thu IS NOT NULL THEN 1 ELSE 0 END +
    CASE WHEN @fri IS NOT NULL THEN 1 ELSE 0 END +
    CASE WHEN @sat IS NOT NULL THEN 1 ELSE 0 END + 
    CASE WHEN @sun IS NOT NULL THEN 1 ELSE 0 END 

SELECT dc.dailyContentId
FROM dbo.DailyContent dc
WHERE eventId = @eventId 
    AND weekDayId IN (@mon, @tue, @wed, @thu, @fri, @sat, @sun)
GROUP BY DailyContent.dailyContentId
HAVING COUNT(dailyContentId) = @daysCount 
```

# c# - 将 Python (pyelliptic, openssl) ecc 密钥和签名转换为 c# (BouncyCastle?)

> ID：15970195
> 
> 赞同：2
> 
> 时间：2013-04-12T11:29:09.423
> 
> 标签：c#, cryptography, openssl, bouncycastle, pyopenssl

项目[https://github.com/Bitmessage/PyBitmessage](https://github.com/Bitmessage/PyBitmessage)使用库[https://github.com/yann2192/pyelliptic](https://github.com/yann2192/pyelliptic)来使用 openssl。

pyelliptic 测试用例：

```
#!/usr/bin/python
import pyelliptic
from pyelliptic import arithmetic as a

#privkey  = a.changebase('02ca0020215c5516f277ac6246cbbaad81cd848328bf9bf11e98959e2b991191a71ad81a',16,256)
pubkey    = a.changebase('02ca0020012e0e59b564c025b15a587da5d33d3599df5e04deca47c783eaed25ebe5af46002032e00af993efc71a2c033a45187918f5b3c03e0e7bb539cecdc0aaa237717db1',16,256)
signature = a.changebase('30450221008538ac52dbe2b67148e99f23ad78b4c6c4939a26d789ece590c6f1e44a271454022027d4a09e5e74bb3445019a557bd2202154d2510a4df939b9f4645b311255ee37',16,256)

ecc = pyelliptic.ECC(curve='secp256k1',pubkey=pubkey)
print ecc.verify(signature,'hello') 
```

我将 PyBitmessage 移植到 c# [https://github.com/sharpbitmessage/SharpBitmessage/](https://github.com/sharpbitmessage/SharpBitmessage/)。对于 openssl，我使用 BouncyCastle。

我的测试用例是（写假）：

```
using System;
using System.Text;
using Org.BouncyCastle.Asn1;
using Org.BouncyCastle.Asn1.Sec;
using Org.BouncyCastle.Asn1.X9;
using Org.BouncyCastle.Crypto.Parameters;
using Org.BouncyCastle.Crypto.Signers;
using Org.BouncyCastle.Utilities.Encoders;

namespace ConsoleApplication2
{
internal class Program
{
    //private static readonly byte[] _privkey  = "02ca0020215c5516f277ac6246cbbaad81cd848328bf9bf11e98959e2b991191a71ad81a".HexToBytes();
    private static readonly byte[] _pubkey =
        Hex.Decode(
            "02ca0020012e0e59b564c025b15a587da5d33d3599df5e04deca47c783eaed25ebe5af46002032e00af993efc71a2c033a45187918f5b3c03e0e7bb539cecdc0aaa237717db1");

    private static readonly byte[] _signature =
        Hex.Decode(
            "30450221008538ac52dbe2b67148e99f23ad78b4c6c4939a26d789ece590c6f1e44a271454022027d4a09e5e74bb3445019a557bd2202154d2510a4df939b9f4645b311255ee37");

    private static readonly byte[] _hello = Encoding.ASCII.GetBytes("hello");

    private static byte[] ConvertKeyFormat(byte[] k)
    {
        // convert key to 04012e0e59b564c025b15a587da5d33d3599df5e04deca47c783eaed25ebe5af4632e00af993efc71a2c033a45187918f5b3c03e0e7bb539cecdc0aaa237717db1
        byte[] result = new byte[k.Length-4+1-2];
        result[0] = 4;
        Buffer.BlockCopy(k,4     ,result,1 ,32);
        Buffer.BlockCopy(k,4+32+2,result,33,32);
        return result;
    }

    private static void Main()
    {
        var signer = new ECDsaSigner();

        X9ECParameters secp256K1 = SecNamedCurves.GetByName("secp256k1");
        ECDomainParameters ecParams = new ECDomainParameters(secp256K1.Curve, secp256K1.G, secp256K1.N, secp256K1.H);
        ECPublicKeyParameters param = new ECPublicKeyParameters(ecParams.Curve.DecodePoint(ConvertKeyFormat(_pubkey)), ecParams);

        signer.Init(false, param);

        DerSequence seq = (DerSequence)(new Asn1InputStream(_signature)).ReadObject();
        DerInteger r = (DerInteger)seq[0];
        DerInteger s = (DerInteger)seq[1];

        Console.WriteLine(signer.VerifySignature(_hello, r.Value, s.Value));
    }
}
} 
```

**如何在 C# 中验证来自 pyelliptic 的签名？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:55:23.097

我拒绝 BouncyCastle 支持 OpenSSL。

下面的工作代码（评论是来自pyelliptic的python代码）：

```
using System;
using System.Text;
using OpenSSL.Core; // I get Native.cs from http://openssl-net.sourceforge.net/
using Org.BouncyCastle.Utilities.Encoders; // only for Hex.Decode

namespace openssl
{
class Program
{
    private static readonly byte[] _signature =
        Hex.Decode(             "30450221008538ac52dbe2b67148e99f23ad78b4c6c4939a26d789ece590c6f1e44a271454022027d4a09e5e74bb3445019a557bd2202154d2510a4df939b9f4645b311255ee37");

    private static readonly byte[] _hello = Encoding.ASCII.GetBytes("hello");

    static void Main(string[] args)
    {
//curve    = pubkey[0:2])[0]                      !!! 714
//tmplen1  = unpack('!H', pubkey[2:4])[0]         !!!  32
//pubkey_x = pubkey[4:4 + tmplen1]
//tmplen2  = unpack('!H', pubkey[4 + tmplen1:4 + tmplen1 + 2])[0]
//pubkey_y = pubkey[4 + tmplen1 + 2:4 + tmplen1 + 2 + tmplen2]

    //private static readonly byte[] _pubkey =
    //  Hex.Decode(
    //      "02ca" +
    //      "0020" +
    //      "012e0e59b564c025b15a587da5d33d3599df5e04deca47c783eaed25ebe5af46" +    !!!!!
    //      "0020" +
    //      "32e00af993efc71a2c033a45187918f5b3c03e0e7bb539cecdc0aaa237717db1");    !!!!!

        string pubkey_x = "012e0e59b564c025b15a587da5d33d3599df5e04deca47c783eaed25ebe5af46";
        string pubkey_y = "32e00af993efc71a2c033a45187918f5b3c03e0e7bb539cecdc0aaa237717db1";

//digest = OpenSSL.malloc(0, 64)
//dgst_len = OpenSSL.pointer(OpenSSL.c_int(0))
        byte[] digest = new byte[64];
        uint dgst_len = 0;

//key = OpenSSL.EC_KEY_new_by_curve_name(curve)
//if key == 0:
//  raise Exception("[OpenSSL] EC_KEY_new_by_curve_name FAIL ...")
        IntPtr key = Native.EC_KEY_new_by_curve_name(714);

//pub_key_x = OpenSSL.BN_bin2bn(pubkey_x, len(pubkey_x), 0)
//pub_key_y = OpenSSL.BN_bin2bn(pubkey_y, len(pubkey_y), 0)

        IntPtr pub_key_x;
        Native.BN_hex2bn(out pub_key_x, Encoding.ASCII.GetBytes(pubkey_x));

        IntPtr pub_key_y;
        Native.BN_hex2bn(out pub_key_y, Encoding.ASCII.GetBytes(pubkey_y));

//group = OpenSSL.EC_KEY_get0_group(key)
        IntPtr group = Native.EC_KEY_get0_group(key);
//pub_key = OpenSSL.EC_POINT_new(group)
        IntPtr pub_key = Native.EC_POINT_new(group);

//if (OpenSSL.EC_POINT_set_affine_coordinates_GFp(group, pub_key, pub_key_x, pub_key_y, 0)) == 0:       !!!!!!!!!
//  raise Exception("[OpenSSL] EC_POINT_set_affine_coordinates_GFp FAIL ...")
        if(Native.EC_POINT_set_affine_coordinates_GFp(group, pub_key, pub_key_x, pub_key_y, IntPtr.Zero)==0)
            throw new Exception("[OpenSSL] EC_POINT_set_affine_coordinates_GFp FAIL ...");

//if (OpenSSL.EC_KEY_set_public_key(key, pub_key)) == 0:
//  raise Exception("[OpenSSL] EC_KEY_set_public_key FAIL ...")
        if (Native.EC_KEY_set_public_key(key, pub_key) == 0)
            throw new Exception("[OpenSSL] EC_KEY_set_public_key FAIL ...");

//if (OpenSSL.EC_KEY_check_key(key)) == 0:
//  raise Exception("[OpenSSL] EC_KEY_check_key FAIL ...")
        if (Native.EC_KEY_check_key(key) == 0)
            throw new Exception("[OpenSSL] EC_KEY_check_key FAIL ...");

//md_ctx = OpenSSL.EVP_MD_CTX_create()
        var md_ctx = Native.EVP_MD_CTX_create();
//OpenSSL.EVP_MD_CTX_init(md_ctx)
        Native.EVP_MD_CTX_init(md_ctx);
//OpenSSL.EVP_DigestInit(md_ctx, OpenSSL.EVP_ecdsa())
        Native.EVP_DigestInit_ex(md_ctx, Native.EVP_ecdsa(), IntPtr.Zero);
//if (OpenSSL.EVP_DigestUpdate(md_ctx, inputb, len(inputb))) == 0:
//  raise Exception("[OpenSSL] EVP_DigestUpdate FAIL ...")
        if (Native.EVP_DigestUpdate(md_ctx, _hello, (uint)_hello.Length)==0)
            throw new Exception("[OpenSSL] EVP_DigestUpdate FAIL ...");
//OpenSSL.EVP_DigestFinal(md_ctx, digest, dgst_len)
        Native.EVP_DigestFinal_ex(md_ctx, digest, ref dgst_len);

//ret = OpenSSL.ECDSA_verify(0, digest, dgst_len.contents, sig, len(sig), key)
        //key.Verify(null, _signature);
        int ret = Native.ECDSA_verify(0, digest, (int) dgst_len, _signature, _signature.Length, key);

        Console.WriteLine(ret == 1);

        Console.ReadKey();

        //  todo free memory from openssl resource!!!
    }
} 
```

}

# android - 单击 DialogFragment 正按钮后如何执行操作

> ID：15970196
> 
> 赞同：8
> 
> 时间：2013-04-12T11:29:09.970
> 
> 标签：android, android-listfragment, android-dialogfragment

我创建了以下从 Android 文档派生的 DialogFragment：

公共类 PayBillDialogFragment 扩展 DialogFragment{

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState){

        final Bundle b = this.getArguments();
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setMessage("Paga bollettino")
               .setPositiveButton("Paga", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // FIRE ZE MISSILES!

                   }
               })
               .setNegativeButton("Cancella", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // User cancelled the dialog
                   }
               });
        // Create the AlertDialog object and return it
        return builder.create();

    }

} 
```

从另一个片段（ListFragment）中，当单击列表的一行时，应该打开 DialogFragment 并且在按下 DialogFragment 的肯定按钮后，我希望能够删除 ListFragment 的选定行并调用一个方法来执行与删除相关的远程操作。我实现了 ListFragment 如下：

```
public static class ListFragment extends android.support.v4.app.ListFragment {

        ArrayList<String> listItems=new ArrayList<String>();

        ArrayAdapter<String> adapter;

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            final View rootView = inflater.inflate(R.layout.list_fragment_view,
                    container, false);

            ListView lv = (ListView)rootView.findViewById(android.R.id.list);

            }});
            adapter=new ArrayAdapter<String>(this.getActivity(),
                    android.R.layout.simple_list_item_1,
                    listItems);
                setListAdapter(adapter);
            return rootView;
        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {

            //opening the dialogfragment

        }

    }

    } 
```

我不知道的是如何处理DialogFragment的正按钮点击后的动作。你能帮助我吗？

编辑：澄清一下，这是工作流程：单击列表-> 显示 DialogFragment -> 单击 DialogFragment 后从列表中删除元素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T14:21:35.513

这就是我处理片段和对话片段之间的通信的方式

示例片段：

```
public class MainFragment extends Fragment {

    private static final int REQ_CODE = 1;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.main_fragment, container, false);
        Button b = (Button) v.findViewById(R.id.button);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                MyDialog dialog = new MyDialog();
                dialog.setTargetFragment(MainFragment.this, REQ_CODE);
                dialog.show(getFragmentManager(), "dialog");
            }
        });
        return v;
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        Toast.makeText(getActivity(), "Result: " + resultCode,
                Toast.LENGTH_SHORT).show();
        super.onActivityResult(requestCode, resultCode, data);
    }

} 
```

示例对话框片段：

```
public class MyDialog extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setMessage("My dialog message")
                .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        notifyToTarget(Activity.RESULT_OK);
                    }
                })
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                notifyToTarget(Activity.RESULT_CANCELED);
                            }
                        });
        return builder.create();
    }

    private void notifyToTarget(int code) {
        Fragment targetFragment = getTargetFragment();
        if (targetFragment != null) {
            targetFragment.onActivityResult(getTargetRequestCode(), code, null);
        }
    }

} 
```

这也是我在改变方向时得到的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:58:14.120

您有两个选项可以调用`ListFragment`from `PayBillDialogFragment`。

**第**一个是 Android 指南推荐的。所有通信都通过托管`Activity`。这就是您`Activity`通过调用`((HostingActivity)PayBillDialogFragment.getActivity()).deleteItem()`inside获得托管的方式`PayBillDialogFragment.setPositiveButton(onClick())`。在`HostingActivity.deleteItem()`获取膨胀`PayBillDialogFragment`并在其中调用一些删除方法。

请参阅[http://developer.android.com/guide/components/fragments.html#EventCallbacks](http://developer.android.com/guide/components/fragments.html#EventCallbacks)

**第二**。您可以`DialogFragment.setTargetFragment()`在创建 DialogFragment 对象时，然后在内部`PayBillDialogFragment.setPositiveButton(onClick())`您可以`PayBillDialogFragment`通过`DialogFragment.getTargetFragment()`并在那里调用 delete 方法。

请参阅[从 DialogFragment 回调片段](https://stackoverflow.com/questions/13733304/callback-to-a-fragment-from-a-dialogfragment)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T06:46:58.000

列表片段将使用适配器来显示元素。适配器需要一些集合形式的输入。因此，您可以做的是，当用户按下对话框片段上的说确定按钮并将其传达回列表片段时，您可以从集合中删除该特定元素并再次使用修改的集合设置列表片段的适配器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:43:26.373

要调用对话框，您可以使用它：

```
android.support.v4.app.FragmentManager fm = getSupportFragmentManager();
if (fm.findFragmentByTag("PayBillDialogFragment") == null) {
    PayBillDialogFragment payBillDialogFragment = new PayBillDialogFragment();
    payBillDialogFragment.show(fm, "PayBillDialogFragment");
} 
```

在您的对话框片段中，

```
setPositiveButton("Paga", new DialogInterface.OnClickListener() {
   public void onClick(DialogInterface dialog, int id) {
       //Add your code here that should execute
       //when positive button is clicked
   }
}); 
```

# sml - 我的 ML 代码中出现未捕获的异常错误

> ID：15970204
> 
> 赞同：1
> 
> 时间：2013-04-12T11:29:38.377
> 
> 标签：sml

当我使用 Emacs 运行我的 SML 代码以了解错误时，我收到一条错误消息。无论我的代码是什么，每次我尝试`SML/Process/start SML repl` 然后键入`use "project name";`时，都会收到以下消息：

```
use "New_Pro";
[Opening New_Pro]
[use failed: Io: OpenIn failed on "New_Pro", Win32TextPrimIO:openRd: failed]

uncaught exception Error
    raised at: .../compiler/TopLevel/interact/interact.sml:24.14-24.28
- 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:25:44.913

我可以`C-c C-l`用来加载我的项目。

# php - 下拉 onchange 事件不起作用

> ID：15970207
> 
> 赞同：0
> 
> 时间：2013-04-12T11:29:43.113
> 
> 标签：php, javascript, mysql, jquery

我想填充另一个下拉列表的下拉列表，例如国家更改，然后状态 dorpdown 应该填充并更改州城市。我正在尝试通过 Ajax 执行此操作，但它没有响应。我写的代码是

```
<script type="text/javascript">
    $(document).ready(function(){
        load_options('','country');
    });

    function load_options(id,index){
        $("#loading").show();

        if(index=="state"){
            $("#city").html('<option value="">Select city</option>');
        }

        $.ajax({
            url: "/ajax.php?index="+index+"&id="+id,
            complete: function(){$("#loading").hide();},
            success: function(data) {
                $("#"+index).html(data);
            }
        })
    }
</script> 
```

### HTML：

```
<label>Select Country</label>
<select name="country" id="country" onChange="load_options(this.value,'state');">
    <option value="">Select country</option>
</select>

<label>Select State</label>
<select name="state" id="state" onChange="load_options(this.value,'city');">
    <option value="">Select state</option>
</select>

<label>Select city</label>
<select name="city" id="city">
    <option value="">Select City</option>
</select> 
```

### 阿贾克斯.php：

```
<?php
    class AJAX {
        private $database = NULL;
        private $_query = NULL;
        private $_fields = array();
        public  $_index = NULL;
        const DB_HOST = "localhost";
        const DB_USER = "root";
        const DB_PASSWORD = "12345";
        const DB_NAME = "AnandDb";

        public function __construct(){
            $this->db_connect();                 // Initiate Database connection
            $this->process_data();
        }
        /*
         *  Connect to database
        */

        private function db_connect(){
            $this->database = mysql_connect(self::DB_HOST,self::DB_USER,self::DB_PASSWORD);

            if($this->database){
                $db =  mysql_select_db(self::DB_NAME,$this->database);
                echo "Db connect.";
            } else {
                echo mysql_error();die;
                echo "Db Not connected.";
            }
        }

        private function process_data(){
            $this->_index = ($_REQUEST['index'])?$_REQUEST['index']:NULL;
            $id = ($_REQUEST['id'])?$_REQUEST['id']:NULL;
            switch($this->_index){
                case 'country':
                $this->_query = "SELECT country_id,country_name FROM tbl_country";
                $this->_fields = array('id','country_name');
                break;

                case 'state':
                $this->_query = "SELECT * FROM tbl_state WHERE country_id=$id";
                $this->_fields = array('id','state_name');
                break;

                case 'city':
                $this->_query = "SELECT * FROM tbl_city WHERE state_id=$id";
                $this->_fields = array('id','city_name');
                break;

                default:
                break;
            }
            $this->show_result();
        }

        public function show_result(){
            echo '<option value="">Select '.$this->_index.'</option>';
            $query = mysql_query($this->_query);
            while($result = mysql_fetch_array($query)){
                $entity_id = $result[$this->_fields[0]];
                $enity_name = $result[$this->_fields[1]];
                echo "<option value=".$entity_id.">".$enity_name."</option>";
            }
        }
    }
    $obj = new AJAX;
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:22:38.703

我觉得没有任何其他错误。但不要在 javascript 函数中使用 id 和 index。重命名这些变量并尝试。试着提醒那两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:28:38.693

尝试这个：

```
<select name="country" id="country" 
onChange="load_options(this.options[this.selectedIndex].value,'state');"> 
```

# javascript - Dojo/Dijit：在选择中设置条目 id 属性

> ID：15970209
> 
> 赞同：1
> 
> 时间：2013-04-12T11:29:50.787
> 
> 标签：javascript, select, dojo, dijit.form

我正在尝试使用具有 JsonRest 存储的 dijit\dojo 构建一个 < select >（通过调用远程 Rest 服务获得）。

代码是：

```
var storeEntity = new JsonRest({
    target: contextPath + "/api/myEntity/?param=123",
    identifier : "idEntity"
});

var selectEntity = new Select({
    id: "selectEntity",
    name: "selectEntity",
    style: "width:250px",
    store: storeEntity,
    labelAttr : "someProperty"
}, "selectEntityContainer"); 
```

有了这个我可以设置标签（它可以工作），但我不能设置值的 id，我也不能选择值。我知道如果我的 Json 具有属性“id”，它会自动作为条目的 id，但是如果我想更改作为 id 的属性，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:27:43.843

根据[API Documentation](http://dojotoolkit.org/api/1.8/dojo/store/JsonRest)`idProperty` ，您的`JsonRest`商店中有一个属性。所以应该是：

```
var storeEntity = new JsonRest({
    target: contextPath + "/api/myEntity/?param=123",
    idProperty : "idEntity"
}); 
```

# windows - Windows 8 应用商店应用中的 XAML 对齐

> ID：15970210
> 
> 赞同：1
> 
> 时间：2013-04-12T11:29:54.080
> 
> 标签：windows, xaml, windows-8, winrt-xaml

完全不熟悉 XAML，我试图设计一个非常简单的布局，其中主页由两部分组成：

1.  在左侧，我想要一个可以缩放以适应可用高度但保持其纵横比的图像。
2.  在右边，我想要一个最终包含文本和控件的面板——目前我只有文本。

我可以通过使用 a 使图像表现良好，`ViewBox`但我似乎无法让屏幕的右侧来填补剩余的空白。看截图：

![显示对齐错误的屏幕截图](https://i.stack.imgur.com/S4LhH.jpg)

我想要的是包含文本的区域向右伸展，文本居中。

相关的 XAML 代码是：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
  <StackPanel Orientation="Horizontal">
    <Viewbox HorizontalAlignment="Right">
      <Image Source="Assets/ABCImage.png"></Image>
    </Viewbox>
    <StackPanel Orientation="Vertical">
      <TextBlock Text="ABC Viewer"
                 TextAlignment="Center"
                 FontSize="48"></TextBlock>
      <TextBlock Text="Test application"
                 TextAlignment="Center"
                 FontSize="24"></TextBlock>
    </StackPanel>
  </StackPanel>
</Grid> 
```

这让我花了很长时间才弄清楚。有人可以让我摆脱痛苦吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:06:57.807

尝试这个 ：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="Auto" />
    <ColumnDefinition Width="*" />
  </Grid.ColumnDefinitions>
  <Viewbox Grid.Column="0"
           HorizontalAlignment="Right">
    <Image Source="Assets/ABCImage.png"></Image>
  </Viewbox>
  <StackPanel Grid.Column="1">
    <TextBlock Text="SEM Viewer"
               TextAlignment="Center"
               FontSize="48" />
    <TextBlock Text="Test application"
               TextAlignment="Center"
               FontSize="24" />
  </StackPanel>
</Grid> 
```

# facebook - Facebook Graph API - 事件 ticket_uri

> ID：15970211
> 
> 赞同：1
> 
> 时间：2013-04-12T11:29:56.910
> 
> 标签：facebook, events, facebook-graph-api

我正在尝试将 ticket_uri 添加到我正在创建的事件中。我在我的应用设置中启用了“事件时区”迁移。我代表作为页面管理员的用户发布。

目前，当我创建一个新事件时它不起作用。新活动没有门票 uri。如果我更新新事件，则在它创建之后，票证 uri 就可以工作......

**这是一个错误还是我做错了什么？**

```
 $fbEvent = $facebook->publish('/events', $event);

    if(isset($fbEvent['id']))
    {
        $facebook->publish('/' . $fbEvent['id'], array('ticket_uri' => 'http://lowiebenoot.be'));
    } 
```

创建后立即更新只是愚蠢的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T20:20:50.777

您必须获得“页面访问令牌”，然后发布到 {page_id}/events。这是我在几个地方发布的步骤的副本：

1.  启用“事件时区迁移”
2.  以在我们希望将事件发布到的 FB 页面上具有管理员权限的用户身份登录 FB
3.  使用 APPLICATION 的 ID 构建此链接以授权管理页面 [https://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=MY_SITE_URL&scope=manage_pages,create_event&response_type=token](https://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=MY_SITE_URL&scope=manage_pages,create_event&response_type=token)
4.  perm 的交换令牌（更长的令牌） [https://graph.facebook.com/oauth/access_token?client_id=MY_APP_ID&client_secret=MY_CLIENT_SECRET&grant_type=fb_exchange_token&fb_exchange_token=](https://graph.facebook.com/oauth/access_token?client_id=MY_APP_ID&client_secret=MY_CLIENT_SECRET&grant_type=fb_exchange_token&fb_exchange_token=(token) （来自步骤 3 的令牌）
5.  访问此页面，找到您要发布的页面并复制新的 access_token [https://graph.facebook.com/me/accounts?access_token=](https://graph.facebook.com/me/accounts?access_token=) （来自步骤 4 的令牌）
6.  [根据https://developers.facebook.com/docs/reference/api/page/#events](https://developers.facebook.com/docs/reference/api/page/#events)上的说明，使用最后一个令牌（来自第 5 步）和 PAGE 的 ID 发布事件

请注意，如果您创建了很多事件，您将向每个点赞该页面的用户发送“垃圾邮件”。FB 最近添加了“no_feed_story”选项来防止这种情况。

# php - 检查是否设置了变量，然后在不重复的情况下回显它？

> ID：15970220
> 
> 赞同：12
> 
> 时间：2013-04-12T11:30:35.493
> 
> 标签：php, variables, isset

有没有一种简洁的方法来检查是否设置了变量，然后在不重复相同变量名的情况下回显它？

而不是这个：

```
<?php
    if(!empty($this->variable)) {
        echo '<a href="', $this->variable, '">Link</a>';
    }
?> 
```

我正在考虑这个 C 风格的伪代码中的一些内容：

```
<?php
    echo if(!empty($this->variable, '<a href="', %s, '">Link</a>'));
?> 
```

PHP 有[sprintf](http://www.php.net/manual/en/function.sprintf.php)，但它并没有达到我的预期。如果我当然可以用它制作一个方法/功能，但肯定有一种方法可以“原生”地做到这一点？

更新：三元运算也会重复这`$this->variable`部分，如果我理解的话？

```
echo (!empty($this->variable) ? '<a href="',$this->variable,'">Link</a> : "nothing"); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T11:46:14.770

最接近您正在寻找的内容是使用短形式的三元运算符（自 PHP5.3 起可用）

```
echo $a ?: "not set"; // will print $a if $a evaluates to `true` or "not set" if not 
```

但这会触发“未定义变量”通知。你显然可以用它来压制`@`

```
echo @$a ?: "not set"; 
```

不过，这不是最优雅/干净的解决方案。

所以，你可以期望的最干净的代码是

```
echo isset($a) ? $a: ''; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-27T23:02:23.483

**更新：**

PHP 7 引入了一个新特性：[**空合并运算符**](http://php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-op)

这是来自 php.net 的示例。

```
<?php
// Fetches the value of $_GET['user'] and returns 'nobody'
// if it does not exist.
$username = $_GET['user'] ?? 'nobody';
// This is equivalent to:
$username = isset($_GET['user']) ? $_GET['user'] : 'nobody';

// Coalescing can be chained: this will return the first
// defined value out of $_GET['user'], $_POST['user'], and
// 'nobody'.
$username = $_GET['user'] ?? $_POST['user'] ?? 'nobody';
?> 
```

对于那些还没有使用 PHP7 的人来说，这是我原来的答案......

我使用一个小功能来实现这一点：

```
function ifset(&$var, $else = '') {
  return isset($var) && $var ? $var : $else;
} 
```

例子：

```
$a = 'potato';

echo ifset($a);           // outputs 'potato'
echo ifset($a, 'carrot'); // outputs 'potato'
echo ifset($b);           // outputs nothing
echo ifset($b, 'carrot'); // outputs 'carrot' 
```

* * *

**警告**：正如 Inigo 在下面的评论中指出的那样，使用此函数的一个不良副作用是它可以修改您正在检查的对象/数组。例如：

```
$fruits = new stdClass;
$fruits->lemon = 'sour';
echo ifset($fruits->peach);
var_dump($fruits); 
```

将输出：

```
(object) array(
  'lemon' => 'sour',
  'peach' => NULL,
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T11:38:22.250

像这样使用[`isset`](http://php.net/manual/en/function.isset.php) php的功能：

```
<?php

  echo $result = isset($this->variable) ? $this->variable : "variable not set";

 ?> 
```

我认为这会有所帮助。

# performance - 本地主机上的 TCP/IP 慢

> ID：15970221
> 
> 赞同：0
> 
> 时间：2013-04-12T11:30:39.383
> 
> 标签：performance, tcp, localhost

我有两个 C 应用程序，都在 Windows XP 上的同一台机器上运行。基于此线程中的数据：[Windows 和 Linux 的同一台机器上的套接字](https://stackoverflow.com/questions/1644851/sockets-on-same-machine-for-windows-and-linux)我应该看到此连接的速度非常快。但我不能传输超过 500mbit/s。我使用 127.0.0.1 作为 IP 地址，以及 nodelay 选项。一条消息大约有 3.5 兆字节，我必须每秒发送多达 30 条这样的消息。如果不可能，我将不得不以某种方式压缩这些消息，但这会产生巨大的 CPU 负载开销。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:05:14.040

您发送的缓冲区大小会对性能产生很大影响。例如，如果您使用一个小缓冲区，您将进行大量昂贵的写入，而只需要一个。

我建议您也写入 1492 字节，这大约是 TCP 通常处理的大小。您可以使用其他值来查看是否获得更好的性能。

# javascript - 通过函数后无法将对象添加到对象 - jQuery

> ID：15970224
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:30:57.837
> 
> 标签：javascript, jquery

我有一个函数，它通过其参数中的一个对象，然后对该对象执行某些操作。

```
function theFunction (theButton) {
    theButton.addClass('inactive');
}

$('.button').click(function () {
    theFunction($(this));
    return false;
}); 
```

问题是它没有将该类应用于按钮。我在这里想念什么？

这是一个带有代码的[JS Fiddle](http://jsfiddle.net/hNYmd/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:35:06.153

您的代码运行良好。你只是忘了包括`jquery`小提琴。这是更正后的：http: [//jsfiddle.net/hNYmd/3/](http://jsfiddle.net/hNYmd/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:34:25.650

你没有加载任何 jQuery

我更新了你的小提琴

**看**

[http://jsfiddle.net/hNYmd/4/](http://jsfiddle.net/hNYmd/4/)

也更新你的代码

```
$(document).ready(function(){
        $('.button').click(function () {
            theFunction($(this));
            return false;
        });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:44:11.063

你应该像这样把你的代码放在 dom 上，[FIDDLE](http://jsfiddle.net/hNYmd/14/)

```
 function theFunction (theButton) {
        theButton.addClass('inactive');
    }
    $(function(){
        $('.button').click(function () {
            theFunction($(this));
            return false;
        })
    }) 
```

# opengl - 使用垂直同步时，可接受的时序策略是什么？

> ID：15970231
> 
> 赞同：1
> 
> 时间：2013-04-12T11:31:11.163
> 
> 标签：opengl, graphics, 3d, vsync

来自对 OpenGL 编程的基本了解，所有必需的绘图操作都按顺序执行，每帧重绘一次。硬件的性能基本上决定了这种情况发生的速度。据我了解，游戏将尝试尽快绘制，因此重绘操作基本上包含在一个 while 循环中。然后将优化图形操作（图形引擎）以确保应用程序可以接受帧速率。

但是，支持垂直同步的图形硬件会将帧速率锁定到显示速率。第一个问题是图形引擎应该如何与硬件同步进行交互？这甚至可能还是渲染器以最大速度工作并且硬件有选择地调用最新帧，丢弃所有未使用的先前帧..？

这个问题的动机不是我立即打算编写一个图形引擎，而是正在调试现有系统的问题，其中移动场景的图形在屏幕上似乎结结巴巴。症状上，当 VSync 关闭时，口吃很轻微，当它打开时，要么有明显的周期性口吃，要么完全解决了口吃。对于正在发生的事情或原因，我有些抓不住，想了解更多有关图形系统的背景信息。

总而言之，问题在于人们应该如何与硬件重绘事件进行交互，以及这是否可能。但是，欢迎提供任何其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:57:30.810

> 第一个问题是图形引擎应该如何与硬件同步进行交互？

为了避免闪烁，现代渲染系统使用双缓冲，即有两个颜色平面缓冲区，在完成绘制到一个之后，显示读出指针设置为完成的缓冲区平面。此*缓冲区交换*可以同步或非同步发生。启用垂直同步后，缓冲区交换将同步，渲染线程会阻塞，直到缓冲区交换发生。

由于双缓冲要求缓冲区交换，这隐含地引入了同步机制。这就是交互式渲染系统锁定显示刷新的方式。

> 症状上，当 VSync 关闭时，口吃很轻微，当它打开时，要么有明显的周期性口吃，要么完全解决了口吃。

这听起来像是一个写得很糟糕的动画循环，它假设帧速率比显示刷新间隔更快，并且可以及时发出缓冲区交换以发生下一次回溯，从而假设帧速率锁定在显示刷新率上。

处理垂直同步的唯一可靠方法是实际测量帧渲染之间的时间并将渲染循环提前该时间量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:56:39.610

这是一个猜测，但是：

**问题不在于垂直同步**

我不知道您正在使用什么操作系统，但是有多种方法可以获取有关显示器的信息以及屏幕刷新的速度（出于此答案的目的，我们假设您的显示器是最新的并重绘以 60 Hz 的速率，或每秒 60 次，或每 16.66666... 毫秒一次）。

渲染器通常与应用程序的“逻辑”端配对：输入、ui 计算、模拟运行等。看起来应用程序的逻辑端运行得足够快，但渲染端 - 即`Draw Call`as它通常总结为 - 限制了您的应用程序的速度。

垂直同步可能会加剧这种情况，因为如果您的 Draw Call 每 16.66666 毫秒发生一次 - 但它需要的时间比 16.666666 毫秒*长得*多 - 那么您会感觉到帧速率下降（即帧会“卡顿”，因为它们花费的时间太长生成单帧）。VSync - 以及启用或禁用它 - 不会成为您代码的瓶颈：它只是说“嘿，由于硬件每 16.666666 毫秒只会从我们这里获取 1 帧，为什么要进行比每 16.66666 毫秒更多的绘制调用？ ? 只要我们每次经过一次绘制调用，我们的应用程序就会看起​​来尽可能流畅，而且我们不必浪费时间进行更多调用！”

问题在于它假设您的代码运行**速度足够快，**可以在 16.6666 毫秒内完成。如果没有，卡顿、滞后、视觉伪影、冻结帧和其他事情会在屏幕上显现出来。

当您关闭 VSync 时，您是在告诉您的渲染调用尽可能频繁、尽可能快地被调用。这可能会在 Logic 调用旁边给它一些额外的摆动空间来渲染帧，这样当硬件说“我现在要拍照并把它放在屏幕上！”时 一切都被美化了，及时，进入姿势并说`cheese!`（尽管你说的话，它几乎没有做到）。

**该怎么办：**

首先分析您的代码。找出哪些功能花费的时间最多。从口吃来看，您的代码中的某些内容花费的时间比预期的要长，并且给您带来了不良的性能。确保首先进行*概要分析*以找到您正在消耗时间的关键部分，并弄清楚如何*保持正确* ***并***使其尽可能快。您可能想弄清楚在渲染调用中调用了什么，并具体分析完成一个周期所需的时间。然后为逻辑调用计时，并查看执行这些调用需要多长时间。然后，砍掉。

祝你好运！

# android - 在android中使用蓝牙传输数据

> ID：15970234
> 
> 赞同：0
> 
> 时间：2013-04-12T11:31:21.977
> 
> 标签：android, bluetooth, android-broadcast

谁能指导我在我的应用程序中实现以下功能，我是 Android 开发的新手，想尝试蓝牙。

我有一个应用程序可以创建商务卡或个人卡（包含所有信息）并将它们作为 Json 字符串存储在数据库中。

现在，我想将此卡（相应的 JSON 字符串）发送给其他用户（他也通过蓝牙拥有我的应用程序）。

现在，我知道如何做一些简单的事情，例如，打开蓝牙，发现设备并将其展示给用户（用户可以从中选择他想要发送卡的设备）

现在，我该怎么做剩下的事情？那是：

1）实际发送json字符串？任何人都可以建议一个很好的教程，其中实际上某种数据是通过蓝牙传输的。

2）现在，当数据传输到用户的手机时，它应该由我的应用程序处理。那就是将接收到的字符串应该存储在应用程序的数据库中。但是，我的应用程序如何知道通过蓝牙接收的数据与应用程序有关。（我的意思是，任何其他应用程序的任何类型的数据都可以通过蓝牙传输，但我的应用程序如何知道我的应用程序中的字符串（卡）已收到）。我认为它必须与 bradCast 意图或 BroadCAst 接收器有关？

但是我应该如何实现呢？

如果接收端的应用程序没有运行并且向它发送了卡片怎么办？我的应用程序应该如何反应并将卡片存储在应用程序的数据库中？

3）什么是UUID？我的申请是否需要它。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:36:52.430

1.  如果您尝试在两个 android 设备之间进行通信，那么示例 BluetoothChat 代码最好了解基本通信 ...Helpul links::: [**link1**](http://developer.android.com/tools/samples/index.html) [**link2**](http://manojprasaddevelopers.blogspot.in/2012/02/bluetooth-data-transfer-example.html)
2.  区分发送的数据:: 在你的应用程序中你可以使用你的消息头，在接收数据的另一端检查头文件是否与你的应用程序有关

示例:: 在接收到 msg 检查标头时，如下所示

```
public static boolean isValidHeader(EnhancedByteBuffer paramEnhancedByteBuffer)
{
 boolean bool = false;
  while (true)
  {

  paramEnhancedByteBuffer.order(ByteOrder.LITTLE_ENDIAN);
  int i = paramEnhancedByteBuffer.position();
  long l = paramEnhancedByteBuffer.getUint32();
  int k = paramEnhancedByteBuffer.getUint16();
  paramEnhancedByteBuffer.position(i);
  if ((l == userdefined1) && (k =userdefined2 )
    bool = true;
       return bool;
  }
 } 
```

在这里 `userdefined1`，`userdefined2`可以是一些你用来区分你的味精的值，如果它返回`true`它理解的它你的应用程序味精，否则不是......

3.UUID 是 128 位通用唯一标识符 (UUID) 的不可变表示。是的，您的应用程序确实需要它[UUID 的额外详细信息](http://www.enough.de/javadoc/j2me/de/enough/polish/android/bluetooth/UUID.html)

# javascript - 为什么内联 JavaScript 在 Internet Explorer 9 中不起作用？

> ID：15970236
> 
> 赞同：0
> 
> 时间：2013-04-12T11:31:23.867
> 
> 标签：javascript, internet-explorer, html, inline, show-hide

我正在写一个 PHP 站点并有一个博客。我在 div 标签中有一个带有 textarea 和一个提交按钮的评论字段（适用于所有博客文章），但我似乎无法在 Internet Explorer 中使用它。它在谷歌浏览器中运行良好。谁能告诉我我做错了什么并指出我正确的方向。

您还可以[在此 jsfiddle 中的 My Code 中找到代码](http://jsfiddle.net/ksdenmark/MrKq6/)

我的 PHP 的 HTML 模板如下所示：

```
<div class="blogbubble">
<table border="0" align="right" width="100%">
    <tr>
        <td rowspan="2" valign="top" width="60px"></td>
        <td align="right"><font size="2"></font>
        </td>
    </tr>
    <tr>
        <td valign="top">   <b><font size="4">Hello</font></b>
            <br /><font size="3">Hello</font>
        </td>
    </tr>
</table>
<div class="show_hide" id="comnr">
    <hr>
    <table border="0">
        <tr>
            <td>
                <textarea id="message" name="message" rows="5" style="width:300px;margin-left:60px"></textarea>
            </td>
        </tr>
        <tr>
            <td>
                <button style="float:right">Comment</button>
            </td>
        </tr>
    </table>
    <hr>
    <button style="float:right" onclick= 'document.getElementById("comnr").classList.toggle("show_hide")&document.getElementById("comknap").classList.toggle("show_hide")'>Cancel</button>
</div>
<button id="comknap" onclick='document.getElementById("comnr").classList.toggle("show_hide")&document.getElementById("comknap").classList.toggle("show_hide")'>Comment</button> 
```

## 我的 CSS：

```
.show_hide { display:none; }

.blogbubble {
    background-color: #4D4D4D;
    width: 95%;
    float: left;
    padding: 5px 5px 5px 5px;
    border-radius: 5px 5px 5px 5px;
    overflow: none;
    margin-right: 5px;
    margin-bottom:5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:02:51.260

Kolink has the correct answer as to why the problem is occuring, but if you have the option of using JQuery I recommend the following [solution (fiddle)](http://jsfiddle.net/iantsmall/j7zQS/2/) which is more stable for cross browser coding.

The core change is this [JQuery selector](http://api.jquery.com/category/selectors/) and the [JQuery toggle function](http://api.jquery.com/toggle/);

```
 $('[id="comnr"][class="show_hide"],#comknap').toggle(); 
```

I used three features of JQuery selector here.

The first selection feature used is the [multiple-attribute selector](http://api.jquery.com/multiple-attribute-selector/) which itself is a combination of two [attribute equals selectors](http://api.jquery.com/attribute-equals-selector/) as requirements:

```
//A selection of elements whose id is "comnr" and whose class is "show_hide"
var selectionByMultipleRequirements= $('[id="comnr"][class="show_hide"]'); 
```

The second selection feature used is the [id selector](http://api.jquery.com/id-selector/):

```
//A selection of elements whose id is "comknap"
var selectionById = $('#comknap'); 
```

The third selection feature used is the [multiple selector](http://api.jquery.com/multiple-selector/) which allows us to combine the previous selections into a list of separate criteria sets (selections returned match at least one of the sets of criteria, each set being separated by a comma):

```
//A selection of elements who either have an id of "comnr" and whose class is "show_hide" OR have an id of "comknap"
var selectionByMultipleCriteria = $('[id="comnr"][class="show_hide"],#comknap'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:42:22.030

`classList`只添加到 IE10。之前的任何版本都不支持。请参阅[此 MDN 文章](https://developer.mozilla.org/en-US/docs/DOM/element.classList)以获取 shim。

# c# - 使用 JSON.NET 升级 JSON 文档

> ID：15970237
> 
> 赞同：3
> 
> 时间：2013-04-12T11:31:31.247
> 
> 标签：c#, .net, serialization, json.net

我们已经定义了一些 JSON 文档，它们用作文档数据库中的存储格式，也可以通过服务总线发送。

这些使用 JSON.NET 反序列化为具体的类。我现在想修改一个现有的属性来保存额外的数据（例如，目前我的一个类包含一个字符串数组，但现在我希望它是一个包含字符串和时间戳的类的数组。）

但是，我仍然需要能够反序列化旧的文档格式。有没有办法，也许是使用 custom `JsonConverter`，在旧文档格式出现时无缝转换为新文档格式？在序列化时，我希望所有文档都以新格式保存。

由于我被要求添加技术细节，这里有一个人为的例子供讨论：

```
public class Document
{
    public string[] Array { get; set; }
} 
```

这升级为：

```
public class Document
{
    public class Entry
    {
        public string Value { get; set; }
        public DateTime Timestamp { get; set; }
    }

    public Entry[] Array { get; set; }
} 
```

在此示例中，我们假设传入的任何旧格式文档的时间戳都应为`DateTime.UtcNow`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:35:31.820

在当前示例中，您可以将[CustomCreationConverter](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Serialization_IContractResolver.htm)用于 Entry 类。实施`CustomCreationConverter<Entry>`：

```
public class DocumentEntryCreationConverter : CustomCreationConverter<Document.Entry>
{
    public override Document.Entry Create(Type objectType)
    {
        return new Document.Entry();
    }

    public override object ReadJson(
        JsonReader reader, 
        Type objectType,
        object existingValue, 
        JsonSerializer serializer)
    {
        // If this is not an object - looks like an old format
        // So we need only set a value
        if (reader.TokenType == JsonToken.String) 
        {
            Document.Entry entry = this.Create(objectType);
            entry.Value = reader.Value as string;
            return entry;
        }
        else
        {
            // This is new format, we can recognise it as an object
            Debug.Assert(
                reader.TokenType == JsonToken.StartObject, 
                "reader.TokenType == JsonToken.StartObject");
            return base.ReadJson(reader, objectType, existingValue, serializer);
        }
    }
} 
```

这就是您如何将其应用于 Entry 类：

```
public class Document
{
    [JsonConverter(typeof(DocumentEntryCreationConverter))]
    public class Entry
    {
        public string Value { get; set; }
        public DateTime Timestamp { get; set; }
    }

    public Entry[] Array { get; set; }
} 
```

# iis - ASP MVC 4 和 IIS

> ID：15970241
> 
> 赞同：0
> 
> 时间：2013-04-12T11:31:43.500
> 
> 标签：iis, asp.net-mvc-4, windows-server-2003

我正在开发一个`ASP MVC 4`应用程序，我要求`Hardware configuration`和`Windows compatibility`.

是否可以运行此应用程序`Windows 2003`？需要哪个 IIS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:37:39.780

是的，您可以在 Windows 2003 Server 上运行它。Windows 2003 Server 附带 IIS 6。这里的帖子显示了如何在其上配置 ASP.NET MVC4
[http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough .aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

确保你在下`Application Configuration`，你**取消选中** `Verify that file exists`。

# web-services - Perl 中的 AWS 开发工具包

> ID：15970245
> 
> 赞同：1
> 
> 时间：2013-04-12T11:31:57.213
> 
> 标签：web-services, perl, sdk, amazon-web-services, transcoding

是否可以在 Perl 中创建 AWS 开发工具包？我需要从我的 perl 脚本中使用 AWS 转码器服务。但我想知道 AWS SDK 不适用于 Perl（[http://aws.amazon.com/code](http://aws.amazon.com/code)）。或者他们有任何其他方法可以在 Perl 脚本中使用 PHP SDK？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:34:23.873

API 只是“通过 HTTP 发送特定的东西”。您不需要为此使用特定于语言的库，尽管它确实使事情变得更容易。任何人都可以编写这样的包装器，[有些人已经为 Perl 做到了](https://metacpan.org/search?q=aws)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-30T01:01:40.857

多年后，现在有了[Paws](https://metacpan.org/pod/Paws)，一个 Perl AWS 接口。它在 CPAN 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T22:01:24.920

[http://www.timkay.com/aws/](http://www.timkay.com/aws/)

我发现 Tim Kay 的“aws”和“s3”工具非常有用。它们是用 Perl 编写的。它具有 --exec 的额外优势，因此您可以直接将命令附加到输出，以 AWS 的原始状态。让国际字符和其他垃圾作为文件名的可悲借口对我来说是一种恐惧。使用 Tim 的工具集，我能够通过使用 --exec 调用文件名的前缀（也是唯一的）然后直接对其进行操作来解决该问题，而不是使用元字符和其他废话。

例如：

```
/123/456/789/You can't be serious that this is really a filename.txt
/123/456/901/Oh!Yes I can! *LOL* Honest!.txt 
```

核对第一个：

```
aws ls  --no-vhost mybucketname/123/456/789/  --exec='system "aws", "rm", "--no-vhost", "$bucket/$key"' 
```

简而言之，该工具在 S3 存储桶上针对该前缀执行等效的“ls”，并返回该前缀中的所有文件名，这些文件名将传递给 exec 函数。从那里，您可以看到我正在盲目地删除其中包含的所有文件。

（注意：--no-vhost 有助于解析带有句点的存储桶名称，您不需要使用长 URL 来从 a 点到 b 点。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T14:27:01.987

编写自己的 Perl 模块以使用 AWS API 相当容易。如上所述，如果您可以进行 HTTP 调用并创建 HMAC 签名，那么任何语言都可以做到。

但是，CPAN 上已经有很多 Perl 模块处理特定的 AWS 功能，例如 S3 或 EC2。访问[http://www.cpan.org/src/](http://www.cpan.org/src/)搜索您需要的内容（例如，SNS）。您通常会找到满足您需求的东西。

# android - Android proguard - Proguard 对代码进行了混淆，但某些文件是可读格式

> ID：15970246
> 
> 赞同：1
> 
> 时间：2013-04-12T11:31:59.643
> 
> 标签：android, proguard

我在我的应用程序中使用 Proguard，在导出构建后，我在 dex2jar 的帮助下对其进行了逆向工程，但一些 java 类名仍然是可读格式，但方法名被混淆了。例如，如果我在混淆之后的混淆之前有一个名为 TestClass.java 的类，它期望像 a.java 或 b.java 之类的东西......

但它在我的项目中显示为 Activity 类的 TestClass.java。

有人知道我错在哪里活动类名称是可读格式吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:00:08.037

ProGuard 已集成到 Android 构建系统中，因此您不必手动调用它。**ProGuard 仅在您以发布模式构建应用程序时运行，因此您在以调试模式构建应用程序时不必处理混淆代码**。运行 ProGuard 是完全可选的，但强烈推荐。

**当您在发布模式下构建应用程序时**，无论是通过运行 ant release 还是**使用 Eclipse 中的导出向导**，构建系统都会自动检查是否设置了 proguard.config 属性。如果是，ProGuard 会在将所有内容打包成 .apk 文件之前自动处理应用程序的字节码。**在调试模式下构建不会调用 ProGuard，因为它使调试更加麻烦**。

[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)。

以上引用来自文档。您的应用程序是否处于发布模式？

[http://developer.android.com/tools/publishing/app-signing.html#releasemode](http://developer.android.com/tools/publishing/app-signing.html#releasemode)

编辑：

什么是混淆？

默认情况下，编译后的字节码仍然包含大量调试信息：**源文件名、行号、字段名、方法名、参数名、变量名**等。这些信息可以直接反编译字节码和对整个程序进行逆向工程。有时，这是不可取的。诸如 ProGuard 之类的混淆器可以删除调试信息并用无意义的字符序列替换所有名称，从而使对代码进行逆向工程变得更加困难。它进一步压缩代码作为奖励。除了在异常堆栈跟踪中给出的类名、方法名和行号之外，该程序在功能上保持相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T08:33:18.613

因为在 \sdk\tools\proguard\proguar-android 文件中，写了这样的东西 -keep public class * extends android.app.Activity 所以这意味着当 proguard 运行时，这些类将保留它们的 CustomNames。否则程序找不到你的类

# c# - 从后台进程记录键盘活动

> ID：15970247
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:32:00.827
> 
> 标签：c#, logging, keyboard

我有一个托盘应用程序（用 C# 编写），它控制（启动/停止）对我在桌面上的活动的监视。监控的活动被记录到日志文件中。每当访问文件时，Atm 都会根据对当前文件长度的更改记录有关编辑的信息。我想使用一种更简洁的方法，基于在窗口处于焦点时是否记录击键。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:36:05.100

[我认为本文](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)中描述了您要查找的内容。当您的应用程序启动/结束并在`Console.WriteLine((Keys)vkCode)`每次按下键时调用时，代码会安装和卸载钩子。您可以在代码中更改该点；`vkCode`包含按下键的虚拟键代码。您可以通过将其转换为[`System.Windows.Forms.Keys`](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)然后使用[`System.Windows.Forms.KeysConverter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.keysconverter.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:52:18.203

仅在 C# 中是不可能的，您将需要一个非托管 dll 来安装 Windows 挂钩 (SetWindowsHookEx) 并将该 dll 注入目标进程。

# wpf - WPF：鼠标离开事件不会在鼠标按下时触发

> ID：15970248
> 
> 赞同：17
> 
> 时间：2013-04-12T11:32:04.403
> 
> 标签：wpf, events, mouse

我遇到了鼠标进入/离开事件的问题。当鼠标按钮被按下并按住控件内的光标然后光标足够快地移出控件时，此事件不会触发。

你能告诉我为什么会这样吗？有没有办法正确获取这些事件？

请检查示例项目以查看它的实际效果：[https ://www.dropbox.com/s/w5ra2vzegjtauso/SampleApp.zip](https://www.dropbox.com/s/w5ra2vzegjtauso/SampleApp.zip)

**更新。**我在[这里](https://stackoverflow.com/questions/3797844/wpf-mousedown-no-mouseleave-event?rq=1)发现了同样的问题，没有答案。在那里开始赏金。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T14:43:38.623

编辑：在 Sisyphe 正确指出该行为不适用于具有鼠标交互的元素后，我重写了代码。

该行为可以附加到窗口或任何其他 FrameworkElement。默认情况下，当鼠标左键按下并执行处理程序时，将监视所有包含的元素的 MouseLeave。该行为也可以通过设置仅应用于其关联元素`MonitorSubControls="False"`。

基本上，该行为的作用（有关更多详细信息，请参阅代码中的注释）：

*   仅在按下鼠标左键时才“活动”
*   监视鼠标位置从元素内部到外部的变化。在这种情况下，执行事件处理程序。

已知的限制（我认为，都可以通过更多的努力来解决，但对我来说似乎不太重要）：

*   不执行转换到包含元素（“内部”边界）的处理程序
*   不保证处理程序的正确执行顺序
*   不能解决缓慢转换到窗口外部的问题，e.LeftButton 被报告为已释放（错误？）。
*   我决定不使用 Win32 钩子，而是使用一个计时器，它不会超过大约每 0.15 秒触发一次（尽管设置的间隔更小，时钟漂移？）。对于快速鼠标移动，评估点可能相距太远，错过刚刚掠过的元素。

![在此处输入图像描述](https://i.stack.imgur.com/BU5NS.png)

此脚本产生以下输出： 将行为附加到窗口，在橙色边框内移动（在释放鼠标按钮的情况下将蓝色边框留在内边界：0），在橙色边框内按下鼠标左键并在窗口外移动（快速）执行离开处理程序 (1 - 4)。释放窗口外的鼠标按钮，移回 goldTextBox (5)，在文本框中按下鼠标左键，离开（快或慢）窗口外再次执行正确的处理程序 (6 - 9)。

![在此处输入图像描述](https://i.stack.imgur.com/BSjzU.png)

Xaml（示例）：

```
<Window x:Class="WpfApplication1.MouseLeaveControlWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
            xmlns:beh="clr-namespace:WpfApplication1.Behavior"
            Title="MouseLeaveControlWindow" Height="300" Width="300" x:Name="window" MouseLeave="OnMouseLeave">
    <i:Interaction.Behaviors>
        <beh:MonitorMouseLeaveBehavior />
    </i:Interaction.Behaviors>
    <Grid x:Name="grid" MouseLeave="OnMouseLeave" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border x:Name="blueBorder" MouseLeave="OnMouseLeave" Background="SteelBlue" Margin="50" Grid.RowSpan="2" />
        <Border x:Name="orangeBorder" MouseLeave="OnMouseLeave"  Background="DarkOrange" Margin="70, 70, 70, 20" />
        <TextBox x:Name="goldTextBox" MouseLeave="OnMouseLeave" Background="Gold" Margin="70, 20, 70, 70" Grid.Row="1" Text="I'm a TextBox" />
    </Grid>
</Window> 
```

后面的代码（仅用于调试目的）：

```
public partial class MouseLeaveControlWindow : Window
{
    public MouseLeaveControlWindow()
    {
        InitializeComponent();
    }

    private int i = 0;
    private void OnMouseLeave(object sender, MouseEventArgs e)
    {
        FrameworkElement fe = (FrameworkElement)sender;
        if (e.LeftButton == MouseButtonState.Pressed)
        {
            System.Diagnostics.Debug.WriteLine(string.Format("{0}: Left {1}.", i, fe.Name)); i++;
        }
        else
        {
            System.Diagnostics.Debug.WriteLine(string.Format("{0}: Left {1} (Released).", i, fe.Name)); i++;
        }
    }
} 
```

MonitorMouseLeaveBehavior：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Timers;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Interactivity;
using System.Windows.Interop;
using System.ComponentModel;
using System.Windows.Media;
using WpfApplication1.Helpers;

namespace WpfApplication1.Behavior
{
    public class MonitorMouseLeaveBehavior : Behavior<FrameworkElement>
    {
        [DllImport("user32.dll")]
        [return: MarshalAs(UnmanagedType.Bool)]
        internal static extern bool GetCursorPos(ref Win32Point pt);

        [StructLayout(LayoutKind.Sequential)]
        internal struct Win32Point
        {
            public Int32 X;
            public Int32 Y;
        };

        [DllImport("user32.dll")]
        public static extern short GetAsyncKeyState(UInt16 virtualKeyCode);

        private enum VK
        {
            LBUTTON = 0x01
        }

        private bool _tracking;
        private const int _interval = 1;
        private Timer _checkPosTimer = new Timer(_interval);
        private Dictionary<FrameworkElement, RoutedEventHandlerInfo[]> _leaveHandlersForElement = new Dictionary<FrameworkElement, RoutedEventHandlerInfo[]>();
        private Window _window;
        private Dictionary<FrameworkElement, Rect> _boundsByElement = new Dictionary<FrameworkElement, Rect>();
        private Dictionary<FrameworkElement, bool> _wasInside = new Dictionary<FrameworkElement, bool>();
        private List<FrameworkElement> _elements = new List<FrameworkElement>();

        /// <summary>
        /// If true, all subcontrols are monitored for the mouseleave event when left mousebutton is down.
        /// True by default.
        /// </summary>
        public bool MonitorSubControls { get { return (bool)GetValue(MonitorSubControlsProperty); } set { SetValue(MonitorSubControlsProperty, value); } }
        public static readonly DependencyProperty MonitorSubControlsProperty = DependencyProperty.Register("MonitorSubControls", typeof(bool), typeof(MonitorMouseLeaveBehavior), new PropertyMetadata(true, OnMonitorSubControlsChanged));

        private static void OnMonitorSubControlsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            MonitorMouseLeaveBehavior beh = (MonitorMouseLeaveBehavior)d;
            beh.AddOrRemoveLogicalChildren((bool)e.NewValue);
        }

        /// <summary>
        /// Initial actions
        /// </summary>
        protected override void OnAttached()
        {
            _window = this.AssociatedObject is Window ? (Window)this.AssociatedObject : Window.GetWindow(this.AssociatedObject); // get window
            _window.SourceInitialized += (s, e) =>
            {
                this.AddOrRemoveLogicalChildren(this.MonitorSubControls); // get all monitored elements
                this.AttachHandlers(true); // attach mousedown and sizechanged handlers
                this.GetAllBounds(); // determine bounds of all elements
                _checkPosTimer.Elapsed += (s1, e1) => Dispatcher.BeginInvoke((Action)(() => { CheckPosition(); }));
            };
            base.OnAttached();
        }

        protected override void OnDetaching()
        {
            this.AttachHandlers(false);
            base.OnDetaching();
        }

        /// <summary>
        /// Starts or stops monitoring of the AssociatedObject's logical children.
        /// </summary>
        /// <param name="add"></param>
        private void AddOrRemoveLogicalChildren(bool add)
        {
            if (_window != null && _window.IsInitialized)
            {
                AddOrRemoveSizeChangedHandlers(false);
                _elements.Clear();
                if (add)
                    _elements.AddRange(VisualHelper.FindLogicalChildren<FrameworkElement>(this.AssociatedObject));
                _elements.Add(this.AssociatedObject);
                AddOrRemoveSizeChangedHandlers(true);
            }
        }

        /// <summary>
        /// Attaches/detaches size changed handlers to the monitored elements
        /// </summary>
        /// <param name="add"></param>
        private void AddOrRemoveSizeChangedHandlers(bool add)
        {
            foreach (var element in _elements)
            {
                element.SizeChanged -= element_SizeChanged;
                if (add) element.SizeChanged += element_SizeChanged;
            }
        }

        /// <summary>
        /// Adjusts the stored bounds to the changed size
        /// </summary>
        void element_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            FrameworkElement fe = sender as FrameworkElement;
            if (fe != null)
                GetBounds(fe);
        }

        /// <summary>
        /// Attaches/Detaches MouseLeftButtonDown and SizeChanged handlers 
        /// </summary>
        /// <param name="attach">true: attach, false: detach</param>
        private void AttachHandlers(bool attach)
        {
            AddOrRemoveSizeChangedHandlers(attach);

            if (attach)
                _window.PreviewMouseLeftButtonDown += window_PreviewMouseLeftButtonDown;
            else // detach
                _window.PreviewMouseLeftButtonDown -= window_PreviewMouseLeftButtonDown;
        }

        /// <summary>
        /// Gets the bounds for all monitored elements
        /// </summary>
        private void GetAllBounds()
        {
            _boundsByElement.Clear();
            foreach (var element in _elements)
                GetBounds(element);
        }

        /// <summary>
        /// Gets the bounds of the control, which are used to check if the mouse position
        /// is located within. Note that this only covers rectangular control shapes.
        /// </summary>
        private void GetBounds(FrameworkElement element)
        {
            Point p1 = new Point(0, 0);
            Point p2 = new Point(element.ActualWidth, element.ActualHeight);
            p1 = element.TransformToVisual(_window).Transform(p1);
            p2 = element.TransformToVisual(_window).Transform(p2);

            if (element == _window) // window bounds need to account for the border
            {
                var titleHeight = SystemParameters.WindowCaptionHeight + 2 * SystemParameters.ResizeFrameHorizontalBorderHeight; //  not sure about that one
                var verticalBorderWidth = SystemParameters.ResizeFrameVerticalBorderWidth;
                p1.Offset(-verticalBorderWidth, -titleHeight);
                p2.Offset(-verticalBorderWidth, -titleHeight);
            }

            Rect bounds = new Rect(p1, p2);

            if (_boundsByElement.ContainsKey(element))
                _boundsByElement[element] = bounds;
            else
                _boundsByElement.Add(element, bounds);
        }

        /// <summary>
        /// For all monitored elements, detach the MouseLeave event handlers and store them locally,
        /// to be executed manually.
        /// </summary>
        private void RerouteLeaveHandlers()
        {
            foreach (var element in _elements)
            {
                if (!_leaveHandlersForElement.ContainsKey(element))
                {
                    var handlers = ReflectionHelper.GetRoutedEventHandlers(element, UIElement.MouseLeaveEvent);
                    if (handlers != null)
                    {
                        _leaveHandlersForElement.Add(element, handlers);
                        foreach (var handler in handlers)
                            element.MouseLeave -= (MouseEventHandler)handler.Handler; // detach handlers
                    }
                }
            }
        }

        /// <summary>
        /// Reattach all leave handlers that were detached in window_PreviewMouseLeftButtonDown.
        /// </summary>
        private void ReattachLeaveHandlers()
        {
            foreach (var kvp in _leaveHandlersForElement)
            {
                FrameworkElement fe = kvp.Key;
                foreach (var handler in kvp.Value)
                {
                    if (handler.Handler is MouseEventHandler)
                        fe.MouseLeave += (MouseEventHandler)handler.Handler;
                }
            }

            _leaveHandlersForElement.Clear();
        }

        /// <summary>
        /// Checks if the mouse position is inside the bounds of the elements
        /// If there is a transition from inside to outside, the leave event handlers are executed
        /// </summary>
        private void DetermineIsInside()
        {
            Point p = _window.PointFromScreen(GetMousePosition());
            foreach (var element in _elements)
            {
                if (_boundsByElement.ContainsKey(element))
                {
                    bool isInside = _boundsByElement[element].Contains(p);
                    bool wasInside = _wasInside.ContainsKey(element) && _wasInside[element];

                    if (wasInside && !isInside)
                        ExecuteLeaveHandlers(element);

                    if (_wasInside.ContainsKey(element))
                        _wasInside[element] = isInside;
                    else
                        _wasInside.Add(element, isInside);
                }
            }
        }

        /// <summary>
        /// Gets the mouse position relative to the screen
        /// </summary>
        public static Point GetMousePosition()
        {
            Win32Point w32Mouse = new Win32Point();
            GetCursorPos(ref w32Mouse);
            return new Point(w32Mouse.X, w32Mouse.Y);
        }

        /// <summary>
        /// Gets the mouse button state. MouseEventArgs.LeftButton is notoriously unreliable.
        /// </summary>
        private bool IsMouseLeftButtonPressed()
        {
            short leftMouseKeyState = GetAsyncKeyState((ushort)VK.LBUTTON);
            bool ispressed = leftMouseKeyState < 0;

            return ispressed;
        }

        /// <summary>
        /// Executes the leave handlers that were attached to the controls.
        /// They have been detached previously by this behavior (see window_PreviewMouseLeftButtonDown), to prevent double execution.
        /// After mouseup, they are reattached (see CheckPosition)
        /// </summary>
        private void ExecuteLeaveHandlers(FrameworkElement fe)
        {
            MouseDevice mouseDev = InputManager.Current.PrimaryMouseDevice;
            MouseEventArgs mouseEvent = new MouseEventArgs(mouseDev, 0) { RoutedEvent = Control.MouseLeaveEvent };

            if (_leaveHandlersForElement.ContainsKey(fe))
            {
                foreach (var handler in _leaveHandlersForElement[fe])
                {
                    if (handler.Handler is MouseEventHandler)
                        ((MouseEventHandler)handler.Handler).Invoke(fe, mouseEvent);
                }
            }
        }

        /// <summary>
        /// Sets the mouse capture (events outside the window are still directed to it),
        /// and tells the behavior to watch out for a missed leave event
        /// </summary>
        private void window_PreviewMouseLeftButtonDown(object sender, MouseEventArgs e)
        {
            System.Diagnostics.Debug.WriteLine("--- left mousebutton down ---"); // todo remove

            this.RerouteLeaveHandlers();
            _tracking = true;
            _checkPosTimer.Start();
        }

        /// <summary>
        /// Uses the _tracking field as well as left mouse button state to determine if either 
        /// leave event handlers should be executed, or monitoring should be stopped.
        /// </summary>
        private void CheckPosition()
        {
            if (_tracking)
            {
                if (IsMouseLeftButtonPressed())
                {
                    this.DetermineIsInside();
                }
                else
                {
                    _wasInside.Clear();
                    _tracking = false;
                    _checkPosTimer.Stop();
                    System.Diagnostics.Debug.WriteLine("--- left mousebutton up ---"); // todo remove

                    // invoking ReattachLeaveHandlers() immediately would rethrow MouseLeave for top grid/window 
                    // if both a) mouse is outside window and b) mouse moves. Wait with reattach until mouse is inside window again and moves.
                    _window.MouseMove += ReattachHandler; 
                }
            }
        }

        /// <summary>
        /// Handles the first _window.MouseMove event after left mouse button was released,
        /// and reattaches the MouseLeaveHandlers. Detaches itself to be executed only once.
        /// </summary>
        private void ReattachHandler(object sender, MouseEventArgs e)
        {
            ReattachLeaveHandlers();
            _window.MouseMove -= ReattachHandler; // only once
        }
    }
} 
```

VisualHelper.FindLogicalChildren，ReflectionHelper。[GetRoutedEventHandlers](https://stackoverflow.com/a/9436960/385995)：

```
public static List<T> FindLogicalChildren<T>(DependencyObject obj) where T : DependencyObject
{
    List<T> children = new List<T>();
    foreach (var child in LogicalTreeHelper.GetChildren(obj))
    {
        if (child != null)
        {
            if (child is T)
                children.Add((T)child);

            if (child is DependencyObject)
                children.AddRange(FindLogicalChildren<T>((DependencyObject)child)); // recursive
        }
    }
    return children;
}
/// <summary>
/// Gets the list of routed event handlers subscribed to the specified routed event.
/// </summary>
/// <param name="element">The UI element on which the event is defined.</param>
/// <param name="routedEvent">The routed event for which to retrieve the event handlers.</param>
/// <returns>The list of subscribed routed event handlers.</returns>
public static RoutedEventHandlerInfo[] GetRoutedEventHandlers(UIElement element, RoutedEvent routedEvent)
{
    var routedEventHandlers = default(RoutedEventHandlerInfo[]);
    // Get the EventHandlersStore instance which holds event handlers for the specified element.
    // The EventHandlersStore class is declared as internal.
    var eventHandlersStoreProperty = typeof(UIElement).GetProperty("EventHandlersStore", BindingFlags.Instance | BindingFlags.NonPublic);
    object eventHandlersStore = eventHandlersStoreProperty.GetValue(element, null);

    if (eventHandlersStore != null)
    {
        // Invoke the GetRoutedEventHandlers method on the EventHandlersStore instance 
        // for getting an array of the subscribed event handlers.
        var getRoutedEventHandlers = eventHandlersStore.GetType().GetMethod("GetRoutedEventHandlers", BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);
        routedEventHandlers = (RoutedEventHandlerInfo[])getRoutedEventHandlers.Invoke(eventHandlersStore, new object[] { routedEvent });
    }
    return routedEventHandlers;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T15:22:42.720

**方法 #1** - 如果您确定具体细节，它仍然是有效的（作为纯托管解决方案）。
（可以将捕获赋予特定控件以避免问题，但我没有尝试过）

这应该可以帮助您获取事件（“固定”事件）。

关键是在窗口外跟踪鼠标移动（并且仅在鼠标按下时）。

为此，您需要执行此操作`capture`（但与建议的略有不同，因为这不起作用 - 改为向下/向上）。

```
private void Window_MouseDown(object sender, MouseEventArgs e)
{
    this.CaptureMouse();
}
private void Window_MouseUp(object sender, MouseEventArgs e)
{
    this.ReleaseMouseCapture();
}
private void Window_MouseLeave(object sender, MouseEventArgs e)
{
    test1.Content = "Mouse left";
}
private void Window_MouseEnter(object sender, MouseEventArgs e)
{
    test1.Content = "Mouse entered";
}
private void Window_MouseMove(object sender, MouseEventArgs e)
{
    if (Mouse.Captured == this)
    {
        if (!this.IsMouseInBounds(e))
            Window_MouseLeave(sender, e);
        else
            Window_MouseEnter(sender, e);
    }
    test2.Content = e.GetPosition(this).ToString();
}
private bool IsMouseInBounds(MouseEventArgs e)
{
    var client = ((FrameworkElement)this.Content);
    Rect bounds = new Rect(0, 0, client.ActualWidth, client.ActualHeight);
    return bounds.Contains(e.GetPosition(this));
}
private Point GetRealPosition(Point mousePoint)
{
    return Application.Current.MainWindow.PointFromScreen(mousePoint);
} 
```

注意：
您需要根据您的情况完成此操作。我只是将鼠标“虚拟连接”到那里`Enter`，`Leave`并且那里没有任何智能算法（即`generated`进入/离开将继续触发）。即添加一些标志来实际保存`state`正确的进入/离开。

此外，我正在测量鼠标是否在窗口的“客户端范围”内。如果您需要在边界等方面进行调整，则需要进行调整。

我也忘了添加明显的 - 连接新事件`MouseDown="Window_MouseDown" MouseUp="Window_MouseUp"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T13:05:08.360

这是“正常”的行为。在 MouseEnter 处理程序中捕获鼠标。

```
Mouse.Capture(yourUIElement); 
```

然后在 MouseLeave 中释放它，

```
Mouse.Capture(null); 
```

编辑：更多解释。WPF 不会精确地跟踪鼠标移动。您可以从这样一个事实中推断出，如果您捕获 MouseMove 事件，您可以看到它每隔 20 毫秒报告一次事件，而不是按像素精度......更像是每个事件 8 个像素。

现在这并没有那么可怕，但是如果您碰巧移动了鼠标，WPF 也不会报告窗口外的鼠标移动。这是默认行为。您可以通过 Mouse.Capture 更改它。

现在，您可以想象为什么会出现这个问题。如果您可以将鼠标移到窗口外的速度比鼠标移动报告发生的速度快，那么 WPF 仍然认为它在应用程序内部。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T19:12:37.100

### 编辑

> 如果您需要它 - 我在**一个简化的包装器中进行了编辑以便于使用**（只需在您的视图模型中添加命令）

**方法 #2** - 使用全局鼠标挂钩来跟踪鼠标移动 - 其余的类似于 #1。
实际上，这更多是关于如何从 C# 执行全局挂钩的示例。

* * *

在 XAML 中，您可以连接所有 3 个或仅一个、两个事件

```
my:Hooks.EnterCommand="{Binding EnterCommand}"
my:Hooks.LeaveCommand="{Binding LeaveCommand}"
my:Hooks.MouseMoveCommand="{Binding MoveCommand}" 
```

在您的视图模型中定义命令

```
RelayCommand _enterCommand;
public RelayCommand EnterCommand
{
    get
    {
        return _enterCommand ?? (_enterCommand = new RelayCommand(param =>
        {
            var point = (Point)param;
            test1.Content = "Mouse entered";
            // test2.Content = point.ToString();
        },
        param => true));
    }
} 
```

以及附加的属性（“漂亮”的包装器）......

```
public static class Hooks
{
    private static Dictionary<ContentControl, Action> _hash = new Dictionary<ContentControl, Action>();

    #region MouseMoveCommand

    public static ICommand GetMouseMoveCommand(ContentControl control) { return (ICommand)control.GetValue(MouseMoveCommandProperty); }
    public static void SetMouseMoveCommand(ContentControl control, ICommand value) { control.SetValue(MouseMoveCommandProperty, value); }
    public static readonly DependencyProperty MouseMoveCommandProperty =
        DependencyProperty.RegisterAttached("MouseMoveCommand", typeof(ICommand), typeof(Hooks), new UIPropertyMetadata(null, OnMouseMoveCommandChanged));
    static void OnMouseMoveCommandChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        ContentControl control = depObj as ContentControl;
        if (control != null && e.NewValue is ICommand)
            SetupMouseMove(control);
    }
    static void Instance_MouseMoveLL(object sender, WinHook.MouseLLMessageArgs e)
    {
    }
    static void OnAutoGeneratingColumn(ICommand command, object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        if (command.CanExecute(e)) command.Execute(e);
    }

    #endregion

    #region EnterCommand

    public static ICommand GetEnterCommand(ContentControl control) { return (ICommand)control.GetValue(EnterCommandProperty); }
    public static void SetEnterCommand(ContentControl control, ICommand value) { control.SetValue(EnterCommandProperty, value); }
    public static readonly DependencyProperty EnterCommandProperty =
        DependencyProperty.RegisterAttached("EnterCommand", typeof(ICommand), typeof(Hooks), new UIPropertyMetadata(null, OnEnterCommandChanged));
    static void OnEnterCommandChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        ContentControl control = depObj as ContentControl;
        if (control != null && e.NewValue is ICommand)
            SetupMouseMove(control);
    }

    #endregion

    #region LeaveCommand

    public static ICommand GetLeaveCommand(ContentControl control) { return (ICommand)control.GetValue(LeaveCommandProperty); }
    public static void SetLeaveCommand(ContentControl control, ICommand value) { control.SetValue(LeaveCommandProperty, value); }
    public static readonly DependencyProperty LeaveCommandProperty =
        DependencyProperty.RegisterAttached("LeaveCommand", typeof(ICommand), typeof(Hooks), new UIPropertyMetadata(null, OnLeaveCommandChanged));
    static void OnLeaveCommandChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        ContentControl control = depObj as ContentControl;
        if (control != null && e.NewValue is ICommand)
            SetupMouseMove(control);
    }

    #endregion

    static void SetupMouseMove(ContentControl control)
    {
        Action onmove;
        if (_hash.TryGetValue(control, out onmove) == false)
        {
            onmove = () =>
            {
                var entered = false;
                var moveCommand = control.GetValue(Hooks.MouseMoveCommandProperty) as ICommand;
                var enterCommand = control.GetValue(Hooks.EnterCommandProperty) as ICommand;
                var leaveCommand = control.GetValue(Hooks.LeaveCommandProperty) as ICommand;

                // hook is invoked on the 'caller thread' (i.e. your GUI one) so it's safe
                // don't forget to unhook and dispose / release it, handle unsubscribe for events
                WinHook.Instance.MouseMoveLL += (s, e) =>
                {
                    Point point = control.PointFromScreen(new Point(e.Message.Pt.X, e.Message.Pt.Y));

                    if (moveCommand != null && moveCommand.CanExecute(point))
                        moveCommand.Execute(point);

                    var newEntered = control.IsMouseInBounds(point); // don't use 'IsMouseOver'
                    if (newEntered != entered)
                    {
                        entered = newEntered;
                        if (entered)
                        {
                            if (enterCommand != null && enterCommand.CanExecute(point))
                                enterCommand.Execute(point);
                        }
                        else
                        {
                            if (leaveCommand != null && leaveCommand.CanExecute(point))
                                leaveCommand.Execute(point);
                        }
                    }
                };
            };
            control.Loaded += (s, e) => onmove();
            _hash[control] = onmove;
        }
    }
    private static bool IsMouseInBounds(this ContentControl control, Point point)
    {
        var client = ((FrameworkElement)control.Content);
        Rect bounds = new Rect(0, 0, client.ActualWidth, client.ActualHeight);
        return bounds.Contains(point);
    }
} 
```

您可以使用文章中的[HookManager](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)。

或最小的钩子代码（请注意，需要正确的 IDisoposable、异常处理等）：

```
public sealed class WinHook : IDisposable
{
    public static readonly WinHook Instance = new WinHook();

    public const int WH_MOUSE_LL = 14;
    public const uint WM_MOUSEMOVE = 0x0200;

    public delegate void MouseLLMessageHandler(object sender, MouseLLMessageArgs e);
    public delegate int HookProc(int nCode, IntPtr wParam, IntPtr lParam);

    [DllImport("kernel32.dll", ExactSpelling = true, CharSet = CharSet.Auto)]
    public static extern int GetCurrentThreadId();

    [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall, SetLastError = true)]
    public static extern int SetWindowsHookEx(int idHook, HookProc lpfn, IntPtr hInstance, int threadId);

    [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall, SetLastError = true)]
    public static extern bool UnhookWindowsHookEx(int idHook);

    [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall, SetLastError = true)]
    public static extern int CallNextHookEx(int idHook, int nCode, IntPtr wParam, IntPtr lParam);

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    public static extern IntPtr GetModuleHandle(string lpModuleName);

    [StructLayout(LayoutKind.Sequential)]
    public struct POINT
    {
        public int X;
        public int Y;
    }

    [StructLayout(LayoutKind.Sequential)]
    public class MouseLLHookStruct
    {
        public POINT Pt;
        public uint mouseData;
        public uint flags;
        public uint time;
        public uint dwExtraInfo;
    }

    public class MouseLLMessageArgs : EventArgs
    {
        public bool IsProcessed { get; set; }
        public MouseLLHookStruct Message { get; private set; }
        public MouseLLMessageArgs(MouseLLHookStruct message) { this.Message = message; }
    }

    static IntPtr GetModuleHandle()
    {
        using (Process process = Process.GetCurrentProcess())
        using (ProcessModule module = process.MainModule)
            return GetModuleHandle(module.ModuleName);
    }

    public event MouseLLMessageHandler MouseMoveLL;

    int _hLLMouseHook = 0;
    HookProc LLMouseHook;

    private WinHook()
    {
        IntPtr hModule = GetModuleHandle();
        LLMouseHook = LowLevelMouseProc;
        _hLLMouseHook = SetWindowsHookEx(WH_MOUSE_LL, LLMouseHook, hModule, 0);
        if (_hLLMouseHook == 0) { } // "failed w/ an error code: {0}", new Win32Exception(Marshal.GetLastWin32Error()).Message
    }

    public void Release()
    {
        if (_hLLMouseHook == 0) return;
        int hhook = _hLLMouseHook;
        _hLLMouseHook = 0;
        bool ret = UnhookWindowsHookEx(hhook);
        if (ret == false) { } // "failed w/ an error code: {0}", new Win32Exception(Marshal.GetLastWin32Error()).Message
    }

    public int LowLevelMouseProc(int nCode, IntPtr wParam, IntPtr lParam)
    {
        if (nCode >= 0 && lParam.ToInt32() > 0
            && wParam.ToInt32() == (int)WM_MOUSEMOVE)
        {
            MouseLLHookStruct msg = (MouseLLHookStruct)Marshal.PtrToStructure(lParam, typeof(MouseLLHookStruct));
            MouseLLMessageArgs args = new MouseLLMessageArgs(msg);
            if (MouseMoveLL != null)
                MouseMoveLL(this, args);
            if (args.IsProcessed)
                return -1; // return 1;
        }
        return CallNextHookEx(_hLLMouseHook, nCode, wParam, lParam);
    }
    // implement IDisposable properly and call `Release` for unmanaged resources / hook
    public void Dispose() { }
} 
```

* * *

**注意：**全局鼠标挂钩因性能问题而臭名昭著。而且你不能使用本地的（推荐但大多数时候没用） - 因为它不会让鼠标移动。

还要**避免在事件中放置任何“重”的**东西 - 或从中“产生”的任何东西。实际上，您可以花在处理事件上的时间是有限制的——否则您的钩子将被移除，即停止工作。如果你需要从事件中做一些处理，弹出一个新线程并调用回来。
我最喜欢的解决方案实际上是给钩子自己的线程，然后需要调用事件——但这超出了范围并且有点复杂（你需要一个“泵”等）。

**至于“为什么”这一切都是必要的：**
我不喜欢猜测，但似乎事件受到了限制——当“越界”时，关键的“一个”被错过了，类似的事情。无论如何，无论您怎么看，这都是关于鼠标移动的。

# c++ - 在 C++ 中比较两个字符串

> ID：15970259
> 
> 赞同：1
> 
> 时间：2013-04-12T11:32:24.907
> 
> 标签：c++, string

我在比较 C++ 中的两个字符串时遇到了一个奇怪的问题。

c 指向 "dreamy" ，我已经从 printf 声明中确认了这一点。现在我想将它与“梦幻”字符串进行比较，但每次它进入其他部分并显示不匹配。

Str1 和 Str2 的 cout 语句也打印相同的输出“梦幻”，但 Str1 的长度显示为 7，而 Str2 的长度为 6。

谁能告诉我是什么问题以及如何解决它。

谢谢。

```
 char *c;
        c = strtok (temp,",");   
                    // Here   printf ("%s\n",c);   prints    dreamy
        while (c != NULL)
        {
            std::string Str1 = std::string(c);
            std::string Str2 = std::string("dreamy");
            cout << "Str1  " << Str1 << "Len" << Str1.length() <<endl;  //  Len = 7 showing for  c = "dreamy"
            cout << "Str2  " << Str2 << "Len" << Str2.length() <<endl;  //  Len = 6 for "dreamy"
            if(Str1.compare(Str2) == 0)
            {
                cout << "Finally Match";
                presence[1] = 1;
            }
            else
                cout << " Dont Match";
            printf ("%s\n",c); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:35:06.657

`Len = 7`表明第一个字符串中有一个虚假字符（可能是空格或换行符）。

# image - 两张图片之间的百分比差异

> ID：15970261
> 
> 赞同：0
> 
> 时间：2013-04-12T11:32:43.940
> 
> 标签：image, image-processing, automation, pixel

我有两个相同高度/宽度的图像，它们看起来很相似。但它们逐个像素并不完全相似。即其中一个图像向右移动了几个像素。

我目前正在使用 imagemagick 比较命令。它在逐像素比较时显示差异。我也尝试使用它的 fuzz 属性。

请建议任何其他工具来比较此类图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:25:03.673

我不知道你真正想要实现什么，但如果你想要一个度量来表达两个图像之间的相似性而不考虑图像位移，那么也许你应该在频域工作。

例如，图像的 DFT 的频率部分应该几乎相同，因此如果您计算两个频率部分的 SNR，它实际上应该为空。

事实上，根据傅里叶位移定理，您甚至可以通过计算两个 DFT 组合的逆 DFT 来估计位移偏移量。

# apache - Nutch bin/crawl 脚本失败 - 手动步骤工作正常

> ID：15970263
> 
> 赞同：0
> 
> 时间：2013-04-12T11:32:56.107
> 
> 标签：apache, shell, solr, nutch

我正在尝试运行 Nutch 1.6“bin/crawl”中提供的脚本，该脚本执行以下所有手动步骤，以启动并爬取站点。

当我手动运行这些步骤时，一切正常，我的页面按预期编入索引（尽管只有一页，但会调查）

创建的包含 URL @seeds/urls.txt 的文本文件

```
bin/nutch inject crawl_test/crawldb seeds/

bin/nutch generate crawl_test/crawldb crawl_test/segments

export SEGMENT=crawl_test/segments/`ls -tr crawl_test/segments|tail -1`

bin/nutch fetch $SEGMENT -noParsing

bin/nutch parse $SEGMENT

bin/nutch updatedb crawl_test/crawldb $SEGMENT -filter -normalize

bin/nutch invertlinks crawl_test/linkdb -dir crawl_test/segments

bin/nutch solrindex http://dev:8080/solr/ crawl_test/crawldb -linkdb crawl_test/linkdb crawl_test/segments/* 
```

bin/crawl 脚本给出了这个错误......

> ```
> Indexing 20130412115759 on SOLR index -> someurl:8080/solr/
> SolrIndexer: starting at 2013-04-12 11:58:47
> SolrIndexer: deleting gone documents: false
> SolrIndexer: URL filtering: false
> SolrIndexer: URL normalizing: false
> org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: file:/opt/nutch/20130412115759/crawl_fetch
> Input path does not exist: file:/opt/nutch/20130412115759/crawl_parse
> Input path does not exist: file:/opt/nutch/20130412115759/parse_data
> Input path does not exist: file:/opt/nutch/20130412115759/parse_text 
> ```

知道为什么这个脚本不起作用吗？我认为这一定是脚本本身的错误，而不是我的配置，因为它正在寻找的路径不存在，也不知道为什么它甚至会在那里寻找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:40:47.997

看起来[bin/crawl](https://issues.apache.org/jira/browse/NUTCH-1500)脚本存在错误

```
-  $bin/nutch solrindex $SOLRURL $CRAWL_PATH/crawldb -linkdb $CRAWL_PATH/linkdb $SEGMENT
+  $bin/nutch solrindex $SOLRURL $CRAWL_PATH/crawldb -linkdb $CRAWL_PATH/linkdb $CRAWL_PATH/segments/$SEGMENT 
```

# android - 在textview中通过文本画线

> ID：15970267
> 
> 赞同：22
> 
> 时间：2013-04-12T11:33:02.467
> 
> 标签：android, textview

我已经开始制作一个类似于“待办任务管理器”概念的应用程序，其中我需要使文本视图可取消，例如，当用户单击完成的图像时，视图中的整个文本将被取消。

谁能指导我，如何实现这个机制？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-12T11:42:40.057

这可以帮助你。

```
 TextView tv = (TextView) findViewById(R.id.mytext);
    tv.setText("This is strike-thru");
    tv.setPaintFlags(tv.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

您可以在代码中使用它，但有必要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-05T11:41:54.490

在科特林

```
tv.text = "This is text"
tv.paintFlags = tv.paintFlags or Paint.STRIKE_THRU_TEXT_FLAG 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-21T02:20:04.873

如果您只想删除 TextView 文本的一部分，您可以使用[SpannableStringBuilder](https://developer.android.com/reference/android/text/SpannableStringBuilder)。请注意，它`tv.text = ssb`不是`tv.text = ssb.toString()`

```
val text = "tv.text = ssb.toString()"
val ssb = SpannableStringBuilder(text)
ssb.setSpan(
    StrikethroughSpan(),
    13, // start of the span (inclusive)
    24, // end of the span (exclusive)
    Spanned.SPAN_EXCLUSIVE_EXCLUSIVE
)
tv.text = ssb 
```

当你运行它时，它会是这样的：

```
tv.text = ssb .toString()
```

# android - 点击按钮切换语言

> ID：15970271
> 
> 赞同：9
> 
> 时间：2013-04-12T11:33:12.020
> 
> 标签：android, localization, resources

当我单击“sub_changelang”按钮时，它应该将程序语言更改为例如法语。我得到了以下代码来更改语言环境，但我不知道如何刷新/更新应用程序以将语言更改为法语。

```
Button cl = (Button) findViewById(R.id.sub_changelang); 
cl.setOnClickListener(new OnClickListener()
{ 
    @Override 
    public void onClick(View v)
    { 
        Locale locale = new Locale("fr_FR"); 
        Locale.setDefault(locale); 
        Configuration config = new Configuration(); 
        config.locale = locale; 
    } 
}); 
```

它不起作用。我该如何解决？我试图添加：

```
MainActivity.this.getResources().updateConfiguration(config, MainActivity.this.getResources().getDisplayMetrics()); 
```

但它没有用。我也试过：

```
getBaseContext().getResources().updateConfiguration(config,
                          getBaseContext().getResources().getDisplayMetrics()); 
```

它也没有工作。

```
android:configChanges="locale" 
```

在 application -> activity 下的 AndroidMainfest.xml 中设置

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T12:34:16.717

我正在使用此代码设置语言环境

```
String languageToLoad  = "fr_FR";
     Locale locale = new Locale(languageToLoad); 
     Locale.setDefault(locale);
     Configuration config = new Configuration();
     config.locale = locale;
     context.getResources().updateConfiguration(config,context.getResources().getDisplayMetrics());

Intent intent = new Intent(XYZ.this, XYZ.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这里的上下文是应用程序基础上下文。 **也请尝试“fr”而不是“fr_FR”**，因为我正在为阿拉伯语语言环境工作并且它工作正常。

更改语言环境后，您需要重新启动 Activity。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T11:52:26.450

您可以使用 activity.this.recreate()。但它将支持 API 级别 11。

# javascript - 无法正确安装 Meteor 0.6.1

> ID：15970272
> 
> 赞同：0
> 
> 时间：2013-04-12T11:33:12.770
> 
> 标签：javascript, meteor

我最近想从 0.5.4 更新到 Meteor 0.6.1，只是做了一个`meteor update`终端。当我尝试任何事情时，我的终端立即出现了一个错误。

```
/Volumes/Macintosh HD/Users/martijn/.meteor/meteor: line 35: cd: /Volumes/Macintosh: No such file or directory

module.js:340
    throw err;
          ^
Error: Cannot find module '/Volumes/Macintosh HD/Users/martijn/tools/meteor.js'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我删除了所有 Meteor 以进行完全重新安装：

```
rm /usr/local/bin/meteor
rm -rf /usr/local/meteor

curl https://install.meteor.com | /bin/sh 
```

当我尝试在我的站点目录中创建 Meteor 项目时出现同样的错误。无法弄清楚是什么原因造成的，它曾经在我的站点目录中运行良好。避免此错误的唯一方法是将所有文档、示例、包、脚本和工具文件夹`/Volumes/Macintosh HD/Users/martijn/`与我的项目一起粘贴到我的目录中，这非常混乱。

我在想这可能与我在我的 Macbook 中运行两个硬盘驱动器有关，一个用于操作系统的 SSD 和一个用于我的文档的 HDD。`/usr/local/bin`安装流星的位置在我的 SSD 上。在我看来，这似乎与安装路径有关，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:24:05.810

这似乎是我们如何转义目录名称的一个错误。你点击这个是因为你的主目录中有一个空格（“Macintosh HD”）。我相信我刚刚修复了这个问题，修复程序应该在 0.6.2 中发布：[https ://github.com/meteor/meteor/commit/c059c384fdf9e7169f25cc36d86fbc0ed0a9da83](https://github.com/meteor/meteor/commit/c059c384fdf9e7169f25cc36d86fbc0ed0a9da83)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:46:42.460

我有同样的问题。幸运的是，我有另一台装有 Meteor 的计算机，升级工作正常。所以这就是我所做的：

我注意到 usr/local/bin 在工作和不工作的计算机中有非常不同的文件。所以我只是将所有文件从工作计算机复制到非工作计算机中。现在流星对两者都有效。不确定这是最好的方法，但解决了我的问题。Meteor 命令再次起作用。

希望这可以帮助，

保罗

# jakarta-ee - 如何配置activemq使用informix数据库？

> ID：15970274
> 
> 赞同：2
> 
> 时间：2013-04-12T11:33:18.053
> 
> 标签：jakarta-ee, activemq, informix

我正在使用 apache activemq 5.8。这是我所做的：

1）将informix jdbc jar（ifxjdbc-3.70-JC3.jar）放入activemq/libs/optional

2）在activemq.xml中声明bean：

```
 <bean id="informix-ds" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="com.informix.jdbc.IfxDriver"/>
    <property name="url" value="jdbc:informix-sqli://192.168.7.30:21893/activemq_nightly:informixserver=ol_informix1170_1;IFX_LOCK_MODE_WAIT=20;IFX_ISOLATION_LEVEL=TRANSACTION_READ_UNCOMMITTED"/>
    <property name="username" value="XXXX" />
    <property name="password" value="XXXX" />
    <property name="maxActive" value="200" />
    <property name="poolPreparedStatements" value="true"/>
</bean> 
```

3) 在 activemq.xml 中更改持久性适配器：

```
 <persistenceAdapter>
    <jdbcPersistenceAdapter dataSource="#informix-ds"/>
    </persistenceAdapter> 
```

我在informix 连接字符串中设置了隔离级别，因为在启动activemq 时出现“不支持事务”错误。现在我得到了这个例外：

```
2013-04-12 14:21:23,196 | ERROR | Failed to start Apache ActiveMQ (localhost, null). Reason: java.io.IOException: Cannot create PoolableConnectionFactory (Transaction not available.) | org.apache.activemq.broker.BrokerService | main 
```

getConnection(BasicDataSource.java:1044) at org.apache.activemq.store.jdbc.TransactionContext.getConnection(TransactionContext.java:58) ... 45 更多原因：java.sql.SQLException：事务不可用。在 com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:413) 在 com.informix.jdbc.IfxSqli.a(IfxSqli.java:3550) 在 com.informix.jdbc.IfxSqli.E(IfxSqli.java:3871 ) 在 com.informix.jdbc.IfxSqli.dispatchMsg(IfxSqli.java:2662) 在 com.informix.jdbc.IfxSqli.receiveMessage(IfxSqli.java:2578) 在 com.informix.jdbc.IfxSqli.c(IfxSqli.java:第 1512 章:393) 在 com.informix.jdbc.IfxStatement.a(IfxStatement.java:1326) 在 com。

当我启动 activemq 时，出现以下错误：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:42:09.733

1) 下载最新的activemq版本

2) vi ACTIVEMQ_HOME/conf/activemq.xml

3）添加以下bean配置来配置informix ds：

```
<bean id="informix-ds" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
<property name="driverClass" value="com.informix.jdbc.IfxDriver"/>
<property name="jdbcUrl" value="jdbc:informix-sqli://192.168.7.30:21893/XXX:informixserver=ol_informix1170_1;IFX_LOCK_MODE_WAIT=20;IFX_ISOLATION_LEVEL=TRANSACTION_READ_UNCOMMITTED"/>
<property name="user" value="XXXXX" />
<property name="password" value="XXXX" /> 
```

注意：Informix 连接字符串应包含：IFX_ISOLATION_LEVEL=TRANSACTION_READ_UNCOMMITTED。数据源实现应该是 com.mchange.v2.c3p0.ComboPooledDataSource

4) 将 ds 注册为持久化适配器：

```
 <persistenceAdapter> 
```

--> 5) 下载 c3p0-0.8.4.5.jar 和 ifxjdbc-3.70-JC3.jar 并复制到 ACTIVEMQ_HOME/lib/optional

6) 启动activemq，尽情享受吧！

注意：如果 activemq 抱怨缺少 db 表，请检查您的数据库是否使用单字节字符集或手动创建具有适当约束的缺少表（仅适用于 dev env）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:46:01.527

一个很好的猜测是[informix帮助中描述的](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.em.doc/errors_ids100.html)

> -122 ISAM 错误：事务不可用。
> 
> 已要求 ISAM 处理器标记事务的开始或结束，但事务日志记录未生效。对于 C-ISAM 程序，此文件未通过日志记录打开。查看对 isopen 的调用，并确保包含 ISTRANS 参数。对于 SQL 产品，此数据库不支持事务日志记录。如果您正在使用数据库服务器，请让数据库服务器管理员为此数据库启用日志记录。否则，使用 START DATABASE 语句开始事务记录。在所有情况下，日志记录只应在数据库完全备份后立即开始。

# sql - 与Oracle sql中的日期比较

> ID：15970277
> 
> 赞同：0
> 
> 时间：2013-04-12T11:33:27.417
> 
> 标签：sql, oracle, date

我有一个`'creation_date'`类型为的列`'date'`，当我根据`'creation_date'`我得到 6 条记录查询我的表以获取不同的记录时：

```
select distinct creation_date from test_table; 
```

输出：

```
06-APR-11
06-APR-11
28-MAR-11
06-APR-11
06-APR-11
18-MAR-11 
```

在这个输出中，即使我在查询中使用 distinct，4 月 6 日也会显示 4 次。此外，当我试图找出与`creation_date`of匹配的所有记录时，`6th April 2011`我没有得到任何结果。以下是我的查询：

```
select * from  test_table where creation_date = to_date('06-APR-11','DD-MON-YY'); 
```

请帮助我在这**两个**查询中做错了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T11:43:56.143

问题是双重的。首先，日期几乎肯定有时间成分。`to_date('06-MAR-11','DD-MON-YY')`相当于`2011/03/06 00:00:00`。如果您使用该[`TRUNC()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions220.htm#SQLRF06151)功能，您将能够看到当天的所有内容：

```
select * 
  from test_table
 where trunc(creation_date) = to_date('06-MAR-11','DD-MON-YY'); 
```

我*不会*使用 MON[日期时间格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#SQLRF00212)。正如我[在这里](https://stackoverflow.com/questions/10178292/comparing-dates-in-oracle-sql/10178346#10178346)解释的那样，这取决于您的地区和设置。使用数字月份格式模型更安全。同样，始终将世纪指定为年份的一部分。

```
where trunc(creation_date) = to_date('06-03-YY11','DD-MM-YYYY'); 
```

您的第二个问题几乎肯定是您的[NLS_DATE_FORMAT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams145.htm#REFRN10119)；它似乎没有考虑时间，因此为什么您会看到 4 个相同的日期。这仅控制数据的*显示*方式，而不是数据的存储方式。

您可以使用以下方式更改此设置：

```
ALTER SESSION SET NLS_DATE_FORMAT = "DD/MM/YYYY HH24:MI:SS" 
```

如果我使用以下设置测试环境：

```
create table test_table ( creation_date date );
insert into test_table values ( sysdate );
insert into test_table values ( sysdate - 0.01 );
alter session set nls_date_format = "YYYY/MM/DD"; 
```

您可以看到返回的数据不包含时间（尽管 SYSDATE 包含）：

```
SQL> select * from test_table;

CREATION_D
----------
2013/04/12
2013/04/12 
```

更改 NLS_DATE_FORMAT 并执行相同的 SELECT，您现在得到一个时间组件：

```
SQL> alter session set nls_date_format = "YYYY/MM/DD HH24:MI:SS";

Session altered.

SQL> select * from test_table;

CREATION_DATE
-------------------
2013/04/12 12:48:41
2013/04/12 12:34:17 
```

最后，当尝试单独选择今天的日期时，不会返回任何行：

```
SQL> select *
  2    from test_table
  3   where creation_date = to_date('20130412','yyyymmdd');

no rows selected 
```

但是，当`TRUNC()`用于仅比较字段的日期部分时，您会再次获得所有行：

```
SQL> select *
  2    from test_table
  3   where trunc(creation_date) = to_date('20130412','yyyymmdd');

CREATION_DATE
-------------------
2013/04/12 12:48:41
2013/04/12 12:34:17 
```

要真正回答您的第二个问题，如果您想要唯一的日期，您可以重复使用该`TRUNC()`功能：

```
select distinct trunc(creation_date)
  from test_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:44:52.567

DATE 数据类型存储年（包括世纪）、月、日、小时、分钟和秒（午夜之后）。您还必须考虑这一点。

# c# - 从数据库中检索数据并显示在详细信息视图中

> ID：15970278
> 
> 赞同：0
> 
> 时间：2013-04-12T11:33:30.963
> 
> 标签：c#, asp.net, database, sharepoint

我想从当前登录的 SharePoint 用户的数据库中检索数据，并将其显示在详细信息视图中的控件上。但我真的不知道如何以最好的方式实现这一目标。这是我尝试过的代码，但它显示`null`.

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if(!IsPostBack)
        {
            GetEmployeeCv();
        }
    }

    private void GetEmployeeCv()
    {
        using (var db = new KnowItCvdbEntities())
        {
            SPWeb theSite = SPControl.GetContextWeb(Context);
            SPUser theUser = theSite.CurrentUser;
            string strUserName = theUser.LoginName;

            var theEmpl =(from p in db.EMPLOYEES
                          where p.username == strUserName
                         select p).FirstOrDefault();

            if(theEmpl != null)
            {
                Image empImg = (Image)DetailsViewShowFullCv.FindControl("imageProfPic");
                empImg.ImageUrl = theEmpl.image;                    
            }
        }            
    } 
```

如果我想数据绑定我的详细信息视图，例如：

```
 Image empImg = (Image)DetailsViewShowFullCv.FindControl("imageProfPic");
                empImg.ImageUrl = theEmpl.image;                    

                DetailsViewShowFullCv.DataSource = ??;
                DetailsViewShowFullCv.DataBind(); 
```

我真的不知道该怎么做。有谁可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:22:33.197

a) DataSource 应该是保存数据的变量。在这种情况下，它将是 theEmpl

b) 通过调试器运行它以检查 strUserName 是否是您所期望的。LoginName 字段通常返回域和用户名，如“DOMAIN\UserName”，因此如果您仅将 UserName 部分存储在数据库中而没有 Domain\，则它可能会返回 null（默认为 null）值

c) 对于数据绑定，要么将 LINQ 查询更改为 p.FieldNameToDatabind，要么知道如何在 asp 标记中编写数据绑定代码，以便实际显示该字段。

# cmusphinx - 在 Sphinx 4.0-“helloLinguist”属性中出现以下错误：“语法”-未设置强制属性

> ID：15970280
> 
> 赞同：0
> 
> 时间：2013-04-12T11:33:33.623
> 
> 标签：cmusphinx, sphinx4

我正在使用 sphinx 4.0 识别器。在运行我的应用程序以在运行时交换两个静态定义的语法时，我在 ecllipse 中收到错误为“'helloLinguist' property:'grammar' - 未设置强制属性！”。我正在使用链接[http://cmusphinx.sourceforge.net/wiki/sphinx4:swappinggrammars](http://cmusphinx.sourceforge.net/wiki/sphinx4:swappinggrammars)上提供的配置 xml 文件。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:43:20.103

您一定是不小心编辑了配置并删除/注释了该条目，或者您`grammar`在运行时删除了该元素。在您链接的配置中设置了属性：

```
<component name="helloLinguist" 
            type="edu.cmu.sphinx.linguist.flat.FlatLinguist">
    <property name="grammar" value="helloGrammar"/>
</component> 
```

# windows-runtime - Winrt 滚动条不起作用

> ID：15970281
> 
> 赞同：1
> 
> 时间：2013-04-12T11:33:41.623
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml

我正在尝试在窗口存储应用程序中使用滚动条（不是滚动查看器），似乎有一个错误。它根本不显示。它按照设定的宽度占据空间，但没有其他可见的。

我设置了视口，小变化大变化最大值等，但没有任何效果。（下面的代码）

```
 <ScrollBar  Orientation="Horizontal"   ViewportSize="500" SmallChange="10" LargeChange="20" Maximum="1000" Minimum="20" Height="20" Margin="130,5,433,5" >

        </ScrollBar> 
```

我不能使用滚动查看器，所以只需要滚动条的具体帮助。

请帮忙。这很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T11:40:02.513

见这篇文章：

[在 WinRT 中，如何像在 WPF 中一样使用 ScrollBar 控件](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/69842a0e-6f1f-43eb-a49f-12b92094a61d)

建议您使用`ScrollViewer`Windows Store App。您想要使用的具体需求是什么`ScrollBar`？

此外，本文还讨论了 的行为`ScrollBar`，这可能会解释您的问题。

# objective-c - 如何使用 Objective-c 解析书签 xml？

> ID：15970282
> 
> 赞同：0
> 
> 时间：2013-04-12T11:33:42.723
> 
> 标签：objective-c, xml, macos, bookmarks

我想解析从Web浏览器导入的书签xml。我从本地文件中读取了一个NSString，该文件是书签xml文件并创建了一个`NSXMLDocument`。代码是

```
NSXMLDocument* document = [[NSXMLDocument alloc] initWithXMLString:htmlStr options:NSXMLDocumentTidyXML error:nil]; 
```

但是 htmlStr 中有几个 DT 元素，它们不是对的。我如何解析它，任何人都可以帮助我吗？或者你有一些样品吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:38:09.497

DT标签和P标签似乎没用。在从xml文件加载的htmlStr中，我将它们替换为nil。所以其余的都是对的，我可以得到正确的`NSXMLDocument`。这解决了我的问题，但是不好。

# java - 熔断 sshfs 和 java 文件写入失败

> ID：15970286
> 
> 赞同：2
> 
> 时间：2013-04-12T11:33:47.863
> 
> 标签：java, java-io, fuse, sshfs

我在农场上有两个 VPS，我想将它们与 sshfs 连接，以在 java 应用程序上共享一些目录。

```
Source                  Destination
-------------------------------------------
VPS1:/app/path/data --> VPS2:/app/path/data 
```

VPS 2 在 sshfs 挂载和通过 shell 脚本中读取和写入，由于千兆以太网连接，这确实可以定期且非常快速地工作。

当我的应用程序开始在 VPS 2 上写入文件时，无法以不可预测的方式写入文件。

我尝试卸载位置并在本地写入文件，它工作正常，无一例外。

java.io.FileWriter 和 fuse 之间有一些奇怪的不兼容？或者我只是在安装 fs 时错过了一些东西？

我尝试了这个安装选项：

```
sshfs user@VPS1_IP:/app/path/data /app/path/data 
      -o rw,allow_other,uid=${uid},gid=${gid} 
```

还有一个附件：

```
reconnect,cache=no 
```

我用java做的唯一**非标准的事情是写文件，而不是重命名它，进行原子操作，但是当它失败时，什么都没有被写入或重命名..**

任何帮助表示赞赏！

非常感谢，戴维德

# c# - 当我构建要与 c# 集成的 dll（使用 OpenCv 库在 VS C++ 中实现）时要考虑哪些事项

> ID：15970290
> 
> 赞同：0
> 
> 时间：2013-04-12T11:33:56.977
> 
> 标签：c#, c++, opencv, image-processing

我已经使用 OpenCv 库在 Vs c++ 中设计和实现了算法，现在我需要检查我构建的 dll 是否能够集成到 c# 中。

1.  构建 dll 时需要考虑哪些事项（使用 OpenCv 库在 VS C++ 中实现）

2.  如何在 c# 中集成 dll（dll，使用 OpenCv 库在 VS C++ 中实现）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:42:33.550

任何 dll 都可以集成到 C# 中。但是，如果你想让 C# 端的实现者更容易，你可以做一些事情：

仅保持界面清洁 C。原始数据类型。尽量减少字符串和结构。

如果您的 dll 无法做到这一点，请考虑编写[C++/CLI](http://en.wikipedia.org/wiki/C%2B%2B/CLI)包装器。这将使您更容易使用您的 dll。

# asp.net - TinyMCE 编辑器，具有 ASP.Net MVC4 的文件上传功能

> ID：15970294
> 
> 赞同：2
> 
> 时间：2013-04-12T11:34:12.647
> 
> 标签：asp.net, asp.net-mvc-4, tinymce

我需要具有文件上传功能的编辑器。[这个问题](https://stackoverflow.com/questions/19604/best-tinymce-editor-image-manager-file-upload-for-asp-net-mvc)提出了一些选择，但听起来都不合适。[这个问题](http://aspnetadvimage.codeplex.com/)是`Asp.net MVC2`我正在使用的`ASP.Net MVC4`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T18:32:02.173

为什么不使用 CKEditor 和 CKfinder 进行文件上传？CKFinder 是付费的，但你可以找到几个免费的 Ckfinder 替代品。

pdwfilebrowser 是免费的，并且可以与 TinyMCE 或 Ckeditor 配合使用。您可以为两者找到更多免费的上传插件。 [http://sourceforge.net/projects/pdwfilebrowser/](http://sourceforge.net/projects/pdwfilebrowser/)

# wcf - 从 Silverlight 访问 WCF 服务

> ID：15970295
> 
> 赞同：0
> 
> 时间：2013-04-12T11:34:16.783
> 
> 标签：wcf, silverlight, crm

我正在尝试从 silverlight 应用程序访问 WCF 服务。我已在本地 IIS 中托管此服务并检查我是否正确获得服务，但是当我尝试从 silverlight 访问它时出现跨域错误。

我检查了 MSDN 上的几个线程，stackoverflow 将 clientaccesspolicy.xml 和跨域文件放在了我的 IIS 的根文件夹中，但我仍然遇到同样的错误。

谁能帮我吗 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:37:44.620

如果您安装[fiddler](http://fiddler2.com/)之类的工具（或任何其他可让您查看发出的请求的软件），您可以跟踪策略文件需要在哪个路径上。在大多数情况下，您为文件使用了错误的目录，或者没有发出请求，因为它缓存在某处。

检查您的文件是否在应有的位置。很可能不是。

# javascript - 如何修改现有的电子邮件 CSV 脚本以跳过空白行或任一字段中包含单个零的行？

> ID：15970296
> 
> 赞同：0
> 
> 时间：2013-04-12T11:34:17.050
> 
> 标签：javascript, csv, google-apps-script

我一直在使用 Google 提供的脚本从 Google 表格生成和发送 CSV。我对其进行了自定义，使其不要求范围或文件名。这样，它会定期自动向我发送电子邮件，其中包含我的范围内的内容。

问题是 CSV 最后包含空行，我希望脚本自动过滤掉这些行（我无法实现，因为我只是没有知识）。反过来，这样做的原因是该*范围*包含空行 - 但有一个很好的理由，即范围中的行有时会扩展，有时会收缩，具体取决于基础数据。（该范围实际上与数据透视表有关）。

作为奖励，如果行中的两列中的任何一列中有一个零，我也非常希望它跳过行。（我应该能够在数据透视表中过滤掉它；我可以，但是如果出现新值，过滤器将无法正常工作）。

这是我通过电子邮件发送的 CSV 目前正在查看的示例：

```
0,0
,0
0.65,0
0.75,16900
0.78,2000
0.79,500
0.8,110800
0.83,1200
0.85,20000
0.87,4500
0.9,3500
1,5000
1.1,4000
1.2,41500
,
,
,
,
,
,
,
,
,
,
,
,
,
, 
```

这是我希望如何接收该 CSV 的示例：

```
0.75,16900
0.78,2000
0.79,500
0.8,110800
0.83,1200
0.85,20000
0.87,4500
0.9,3500
1,5000
1.1,4000
1.2,41500 
```

对此的任何帮助将不胜感激。谢谢。

这是我目前使用的脚本：

```
var settings = {
  "recipients": "myemailaddress",
  "emailSubject": "CSV file",
  "emailMessage": "Your CSV file is attached",
  "fileExtension": ".csv",
  "carriageReturn": "\r\n"
};

function onOpen() {
  var subMenus = [];
  subMenus.push({name: "Email Named Range as CSV", functionName: "run"});
  SpreadsheetApp.getActiveSpreadsheet().addMenu("CSV", subMenus);
}

function run() {
  /var namedRange = Browser.inputBox("Enter named range to convert to CSV (e.g. sampleDataRange):");/
  var namedRange = "FORCSVEXPORT";
  var fileName = "EPCSELLOFFERS.CSV";

  if (namedRange.length !== 0 && fileName.length !== 0) {  
    settings.dataRangeName = namedRange;
    settings.csvFileName = fileName + settings.fileExtension;
    var csvFile = convertNamedRangeToCsvFile_(settings.dataRangeName, settings.csvFileName);
    emailCSV_(csvFile);
  }
  else {
    Browser.msgBox("Error: Please enter a named range and a CSV file name.");
  }
}

function emailCSV_(csvFile) {
  MailApp.sendEmail(settings.recipients, settings.emailSubject, settings.emailMessage, {attachments: csvFile});
}

function convertNamedRangeToCsvFile_(rngName, csvFileName) {
  var ws = SpreadsheetApp.getActiveSpreadsheet().getRangeByName(rngName);
  try {
    var data = ws.getValues();
    var csvFile = undefined;

    if (data.length > 1) {
      var csv = "";
      for (var row = 0; row < data.length; row += 1) {
        for (var col = 0; col < data[row].length; col += 1) {
          if (data[row][col].toString().indexOf(",") != -1) {
            data[row][col] = "\"" + data[row][col] + "\"";
          }
        }

        // Join each rows columns
        // Add carriage return to end of each row
        csv += data[row].join(",") + settings.carriageReturn;
      }
      csvFile = [{fileName: csvFileName, content: csv}];
    } 
    return csvFile;
  }
  catch(err) {
    Logger.log(err);
    Browser.msgBox(err);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:10:49.563

`convertNamedRangeToCsvFile_()`我建议在您的 中添加一个额外的步骤，而不是破解原始`run()`文件，这将调用一个新函数来从 csv 文件中删除不需要的行。这里是：

```
/**
 * Remove unwanted lines from given csvFile
 */
function minimizeCsvFile( csvFile ) {
  // take apart the csv file contents, into an array of rows
  var rows = csvFile[0].content.replace(/\r\n/g, "\n").split("\n");
  var newRows = [];
  for (var i = 0; i < rows.length; i++ ) {
    if (rows[i] == "") continue;   // skip blanks
    if (rows[i] == ",") continue;  // skip null values
    // skip rows with either numeric value == 0
    var vals = rows[i].split(",");
    if (parseFloat(vals[0]) == 0.0 || parseFloat(vals[1]) == 0.0) continue;
    // If we got here, we have a keeper - add it to newRows
    newRows.push(rows[i]);
  }
  debugger;   // pause to observe in debugger
  var csv = newRows.join(settings.carriageReturn);
  // Return a single element array with an object, exactly like
  // the one from convertNamedRangeToCsvFile_.
  return [{fileName: csvFile[0].fileName, content: csv}];
} 
```

要使用它，请将`emailCSV_()`行更改`run()`为：

```
var minimizedCsvFile = minimizeCsvFile(csvFile);
emailCSV_(minimizedCsvFile); 
```

而至于这个...

> 作为奖金...任何对此的帮助将不胜感激。谢谢。

我们在这里想要的只是让 StackOverflow 的新成员在收到帮助时确认！查看[此答案](https://meta.stackexchange.com/a/5235/206345)以获取有关如何接受答案的提示。（您可以通过提问、回答和接受答案来建立代表！）

但我一直想要一辆法拉利...

# c++ - 对指向 int 的指针的引用输出错误

> ID：15970297
> 
> 赞同：0
> 
> 时间：2013-04-12T11:34:18.573
> 
> 标签：c++

我正在尝试`int`在下面的程序中使用对指向 like 的指针的引用。但我没有得到预期的输出。

输出：

```
9 5
5 9 
```

期待：

```
9 5
9 5 
```

代码：

```
#include <iostream>
using namespace std;

void swap (int *& a, int *&b)
{
    int *t = a;
    a = b;
    b = t;
}

int main()
{
    int a = 5, b = 9;       
    int *p = &a;
    int *q = &b;

    swap (p, q);
    cout << *p << " " << *q << endl;
    cout << a << " " << b << endl;

    return 0;
} 
```

为什么我的期望是错误的？我认为引用只是目标变量的另一个名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:37:20.897

您交换指针，而不是值。你的期望是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:41:39.993

您正在交换指针的值。

看这个插图：

首先，`p`是指着`a`，`q`是指着`b`：

```
 p         a
+---+     +---+
+ ------> | 5 |
+---+     +---+

  q         b
+---+     +---+
+ ------> | 9 |
+---+     +---+ 
```

交换`p`和后`q`,`q`指向`a`, 并且`p`指向`b`:

```
 q         a
+---+     +---+
+ ------> | 5 |
+---+     +---+

  p         b
+---+     +---+
+ ------> | 9 |
+---+     +---+ 
```

但两者`a`仍然`b`有它们的旧价值观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:48:54.377

> 我认为引用只是目标变量的另一个名称

是的，在您的情况下，*目标变量*是变量的指针，而不是变量。因为您`*`在函数声明中使用。然后，您交换的是指针而不是值。

使用以下方法之一：

```
void swap(int &a, int &b)
{
    int t=a;
    a=b;
    b=t;
}
// ...

int a=5,b=9;        
swap(a,b); 
```

或者

```
void swap(int *a, int *b)
{
    int t=*a;
    *a=*b;
    *b=t;
}
// ...

int a=5,b=9;        
swap(&a,&b); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:38:35.597

通常，您交换的是两个指针，而不是它们指向的指针。

当您调用值 a 和 b 时，您的函数可能会让您感到困惑。您的函数交换两个指针，这样第一个指针现在指向第二个指向的位置，第二个指向第一个指向的位置。

`p`以前指向`a`和`q`to `b`。现在`p`指向`b`并`q`指向`a`因此您的输出为 9 5 5 9

`swap`您的函数中有引用。这些是对指针的引用，因此在函数范围内， `a`and`b`成为传入参数的别名，即`p`，`q`and 从而修改`p`and `q`（指向别处）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T11:38:57.423

在您的情况下，您正在交换指针（而不是值）。由于您正在交换指针，因此内部的实际*值*`a`并`b`保持不变。因此，为什么当您打印 的值时`a`，您会得到`5`，而当您打印时，`b`您会得到`9`。

# eclipse - 项目在 Eclipse 中丢失

> ID：15970302
> 
> 赞同：2
> 
> 时间：2013-04-12T11:34:24.630
> 
> 标签：eclipse, project

我几乎完成了我的安卓应用程序，我的课程将在 10 天内完成。我已经从 Eclipse 中删除了我的项目。我已经在 AVD 上安装了可运行版本。有什么方法可以转移回 Eclipse 吗？

> 适用于移动开发人员的 MAC OS X 10.8.2 Eclipse 版本：Juno Service Release 1 Build id：20120920-0800

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:39:12.577

查看这两个链接[http://www.java-tips.org/other-api-tips/eclipse/how-to-restore-deleted-files-in-eclipse.html](http://www.java-tips.org/other-api-tips/eclipse/how-to-restore-deleted-files-in-eclipse.html)

[http://www.nodans.com/index.cfm/2008/1/18/How-to-recover-a-deleted-file-in-Eclipse](http://www.nodans.com/index.cfm/2008/1/18/How-to-recover-a-deleted-file-in-Eclipse)

并在此处回答此问题[是否可以从 Eclipse 工作区获取已删除的文件？](https://stackoverflow.com/questions/5451175/is-it-possible-to-get-the-deleted-file-from-eclispe-workspace)

**您可以使用“从本地历史记录还原”**选项取回您的项目，在我提供的链接上解释了如何操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:40:23.173

如果您有它的 .class 文件，您可以尝试将其重新转换为 java 项目。在谷歌上找到类文件转换器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:38:43.150

您是否也将其从磁盘中删除？查看eclipse的`workspace`目录。要知道那在哪里，请`File > Workspace > Other ...`查看建议的地点。点击`Cancel`这里。

如果您的项目仍然存在，`File > Import > Android > Existing Android Code`请在 Eclipse 中使用以恢复您的项目。

# php - 使用 jQuery 的动态链式选择框

> ID：15970315
> 
> 赞同：2
> 
> 时间：2013-04-12T11:34:55.643
> 
> 标签：php, jquery, ajax, select

我正在使用 jQuery/JS/Ajax 脚本从我的数据库中动态填充 SELECT 框，每个后续 SELECT 框都根据前一个 SELECT 填充。

例如。有人从我的第一个 SELECT 中选择“英格兰”，然后在下一个 SELECT 中填充英格兰的城镇等。

我遇到的麻烦是让第二个 SELECT 函数识别一个变量。这是很多代码，所以我不想全部粘贴，但是……这是在页面加载时填充第一个 SELECT 框的第一个函数：

```
function getTierOne()
{   
 $tblname = $_SESSION['country'];
 $result = mysql_query("SELECT DISTINCT county FROM $tblname ORDER BY county") 
 or die(mysql_error()); 
 while($tier = mysql_fetch_array( $result ))  
 {
  echo '<option value="'.$tier['county'].'">'.$tier['county'].'</option>';
 }
} 
```

这很好，$tblname 是一个已发布的 $_SESSION 变量，其中包含用户国家 obvs。

问题是第一个 SELECT 框的“onBlur”，使用此 JS 函数和 PHP 调用会调出第二个 SELECT 框：

```
$(document).ready(function() 
{
    $('#wait_1').hide();
    $('#drop_1').change(function()
        {
            $('#wait_1').show();
            $('#result_1').hide();
            $.get("func.php", 
                {
                    func: "drop_1",
                    drop_var: $('#drop_1').val()
                }, 
            function(response)
                {
                    $('#result_1').fadeOut();
                    setTimeout("finishAjax('result_1', '"+escape(response)+"')", 400);
                });
            return false;
        });
}); 
```

...

```
if (isset($_GET['func'])&& $_GET['func'] == "drop_1") {
drop_1($_GET['drop_var']);
} 
```

调用此函数：

```
function drop_1($drop_var)
{  
  include_once('functions.php');
  $result = mysql_query("SELECT DISTINCT town FROM $tblname WHERE county='$drop_var'") 
  or die(mysql_error());

  echo '<select name="drop_2" id="drop_2">
  <option value=" " disabled="disabled" selected="selected">Select Your Town/Nearest Town</option>';

  while($drop_2 = mysql_fetch_array( $result )) 
  {
  echo '<option value="'.$drop_2['town'].'">'.$drop_2['town'].'</option>';
  }
  echo '</select>';
  echo '<input type="submit" name="submit" value="Continue" />';
} 
```

但是这个函数不会识别我的 $tblname 变量，即使我使用 Global！它识别的唯一变量是 $drop_var，它是第一个 SELECT 框的结果。

有谁知道我如何将 $tblname 变量传递给

```
function drop_1($drop_var) { ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:40:25.990

如果您使用 PHP 会话来存储用户的国家/地区（并且从 getTierOne() 的 line1 看起来像您一样），您应该能够将该行添加到您的 drop1() PHP 函数的开头：

```
function drop_1($drop_var)
{  
  $tblname = $_SESSION['country'];
  include_once('functions.php');
  ... 
```

Jquery 应该与 GET 参数（func 和 dropvar）一起发送用户的 cookie，这允许 PHP 知道哪个会话属于用户，并返回他们的会话变量（您可以使用 Firebug 的“网络”选项卡检查这一点/ Chrome 检查器 - 在 onBlur 触发后查找对 func.php 的调用并查找“Cookie”请求标头）。

或者，如果您不使用会话，但您将国家/地区存储在客户端（例如，作为第一个“drop_0”选择框？），您可以让 jquery 传递来自 tier1（县）选择框的选择接听电话。IE。

```
$.get("func.php", 
{
  func: "drop_1",
  country: "VALUE OF COUNTRY HERE",
  drop_var: $('#drop_1').val()
}, 
function(response)
{ ... 
```

并修改您的服务器端 PHP 代码以接受 2 个参数而不是 1 个。

从可维护性的角度来看，请考虑不要使用多个表（每个国家/地区一个），而是使用带有附加“国家/地区”列的单个表。拥有多个结构相同的表几乎不是一个好主意，MySQL 通常处理数百万行比处理数百个表好得多，并且它使连接和更改表结构更加困难。您还应该清理输入，而不是直接在 SQL 查询中使用 $GET['drop_var'] ，否则它会中断引号并使您面临 SQL 注入攻击。（如果您有充分的理由这样做，请道歉：显然您比我更了解您的具体要求！）

# jquery - 由于 css 的溢出属性，Jquery 拖放无法正常工作

> ID：15970334
> 
> 赞同：1
> 
> 时间：2013-04-12T11:36:12.220
> 
> 标签：jquery, css, jquery-ui

[我从Jquery Drag and Drop](http://jqueryui.com/droppable/#revert)下载了 jquery 插件

代码运行良好.. 但在我的设计中，我有一个可拖动项目的特定区域，所以我使用以下 css 设置该区域：-

```
.overflow_test {
           width:500px;
          float:left;
          overflow:auto;
          height:200px;
} 
```

现在这些项目可以在固定区域内滚动。但是，当我从项目部分拖动一个项目时，它无法正常工作意味着功能正常但该项目不显示..

这是我的演示[演示](http://www.apprs.com/test/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:46:14.777

这是因为当使用拖放时，可拖动的项目停留在同一个 DOM 位置（即在同一个 div 内），只是它的位置发生了变化。即使您删除了 overflow:auto 设置，从技术上讲，拖动的项目仍将保留在原始 DIV 内。

您可以做的一些事情：如果您不需要水平滚动条，那么您只能根据您的需要将overflow-y 设置为auto 并将overflow-x 设置为调整大小或隐藏来启用垂直滚动条。

如果您需要两个滚动条，您可以考虑在成功放置后将相应的可拖动项附加到可放置项，将其从原始 DIV 中删除。

# excel - 在 Excel 窗口/工作表上定位 FreezePanes 点

> ID：15970343
> 
> 赞同：3
> 
> 时间：2013-04-12T11:36:30.657
> 
> 标签：excel, vba

我有一个 Excel 工作簿，我想以编程方式将活动单元格设置为左上角。在某些情况下，窗口有 freezepane = true，在这种情况下，我想将活动单元格设置为设置冻结的单元格。但我看不到任何获取该单元格引用的方法。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:42:31.120

您需要使用`ActiveWindow.SplitRow`And`ActiveWindow.SplitColumn`来查找是否有任何窗格被冻结

看到这个

```
Sub test()
    Dim Rw As Long, Col As Long

    'change sheet as applicable
    Sheets("Sheet1").Select

    With ActiveWindow
        If .SplitRow = 0 And .SplitColumn = 0 Then
            'no panes are frozen
            Sheets("Sheet1").Range("A1").Select
        Else
            Rw = .SplitRow + 1
            Col = .SplitColumn + 1
            'select top left cell below the freeze pane
            Sheets("Sheet1").Cells(Rw, Col).Select
        End If
    End With
End Sub 
```

# parsing - 解析 EKEvent 描述文本

> ID：15970344
> 
> 赞同：1
> 
> 时间：2013-04-12T11:36:30.887
> 
> 标签：parsing, ekevent

我目前正在开发一个上传 EKEvent 的 iOS 应用程序，`event.description`它是一个基本的 NSString。

问题是，当我在上传文件后从服务器下载文件时，解析字符串很麻烦。

目前，这是我下载文本文件时正在查看的字符串

`"EKEvent <0x9dd50b0> {EKEvent <0x9dd50b0> {title = Another Event SC; location = A House; calendar = EKCalendar <0x994e7f0> {title = Calendar; type = Local; allowsModify = YES; color = #0E61B9;}; alarms = (null); URL = (null); lastModified = 2013-04-11 20:44:58 +0000; timeZone = (null)}; location = A House; startDate = 2012-10-11 07:00:00 +0000; endDate = 2012-10-13 06:59:59 +0000; allDay = 1; floating = 1; recurrence = (null); attendees = (null)}"`

我认为解析这个文件不会很糟糕，但我对目标 C 相当陌生。

这是我到目前为止所做的

```
NSString *anotherString = [NSString stringWithFormat:components[i]];
NSLog(@"%@", anotherString);

//EKEventStore *eventStore = [[EKEventStore alloc] init];
//EKEvent *event  = [EKEvent eventWithEventStore:eventStore];

NSArray *totalEventInfo = [anotherString componentsSeparatedByString:@"= "];

NSLog(@"%@",totalEventInfo); 
```

假设`anotherString`包含之前显示的下载文本文件字符串。这是分离字符串并将每个分离的字符串存储到 totalEventInfo 的增量组件后的输出。

```
"EKEvent <0x9dbe430> {EKEvent <0x9dbe430> {title ",
"Another Event SC; location ",
"A House; calendar ",
"EKCalendar <0x99e9570> {title ",
"Calendar; type ",
"Local; allowsModify ",
"YES; color ",
"#0E61B9;}; alarms ",
"(null); URL ",
"(null); lastModified ",
"2013-04-11 20:44:58 +0000; timeZone ",
"(null)}; location ",
"A House; startDate ",
"2012-10-11 07:00:00 +0000; endDate ",
"2012-10-13 06:59:59 +0000; allDay ",
"1; floating ",
"1; recurrence ",
"(null); attendees ",
"(null)}" 
```

)

如何指定字符串的域？前任。从一个字符串中读入，从一个字符'='开始的一串字符并在下一个';'处结束。

也许这不是解析信息的好方法。

我在考虑不是上传包含 EKEvent 的 event.description 的文件，而是上传一个带有 event.title、event.startdate、event.enddate 等的文件，而不是 event.description 并且每次都必须解析文件下载。

建议或意见表示赞赏:)

# c++ - 如何将基类添加到派生类的向量中

> ID：15970348
> 
> 赞同：0
> 
> 时间：2013-04-12T11:36:40.067
> 
> 标签：c++, pointers, casting

我有一个`std::vector`指向派生类的`cDerivedClass`共享指针，我也有基类的共享指针。所以是这样的：

```
typedef SHARED_PTR<cBaseClass> cBaseClassPtr;

typedef SHARED_PTR<cDerivedClass> cDerivedClassPtr;

std::vector<cDerivedClassPtr> vDerivedPtrList; 
```

现在，如果我想要一个`CDerivedClass::AddComponent(cBaseClassPtr inpBaseClass)`方法接受 cBaseClassPtr 类型的参数并将其添加到派生类的向量 (vDerivedPtrList) 中，我该怎么做呢？

我知道 dynamic_cast 不起作用，因为除非基类是多态的，否则动态转换不允许基到派生的转换。我尝试将 cBaseClassPtr 静态转换为 cDerivedClassPtr，但我抛出了一个错误。

```
void cDerivedClass::AddComponent(cBaseClassPtr inpBaseClass)
{
    MY_ASSERT(inpBaseClass, "Component cannot be NULL");

    cDerivedClassPtr pDerviedPtrToAdd = static_cast<cDerivedClassPtr>(inpBaseClass);

    this->mvComponentList.push_back(pDerviedPtrToAdd);
} 
```

编辑：确切地说，这是我得到的错误：

```
No matching conversion of static_cast from 'cBaseClassPtr' (aka 'shared_ptr<cBaseClassPtr>') to 'cDerivedClassPtr' (aka 'shared_ptr<cDerivedClassPtr>'); 
```

我正在使用 boost 的智能指针实现[`boost::shared_ptr`](http://www.boost.org/doc/libs/1_42_0/libs/smart_ptr/shared_ptr.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:57:03.780

很难确切地知道您在这里尝试做什么，以及您正在使用什么智能指针实现。

为什么你的基类不是多态的？如果是这样，您可以使用某种双重调度来让它自己添加到适当的集合中。

如果每个派生都有不同的向量，那么每个派生类都会知道应该将自己添加到哪个向量。

您将需要您的基类从 enable_shared_From_this 派生，因此如果它当前已经是 shared_ptred （大概是这样），它可以共享指针本身：尽管这会将 shared_ptr 本身转换为基类型，然后您可以根据生命周期创建另一个 shared_ptr第一个并将其放入集合中。

（假设您使用的是 boost 并且我认为 std 具有相同的接口）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:42:39.357

如果您的`CDerivedClass::AddComponent`函数只能真正处理`cDerivedClassPtr`s，则相应地调整其签名：

```
CDerivedClass::AddComponent(cDerivedClassPtr inpDerivedClass) 
```

如果它应该能够处理`cBaseClassPtr`，则调整 的定义`vDerivedPtrList`以保持`cBaseClassPtr`s ：

```
std::vector<cBaseClassPtr> vBasePtrList; 
```

# javascript - 谷歌地图问题

> ID：15970353
> 
> 赞同：0
> 
> 时间：2013-04-12T11:37:05.210
> 
> 标签：javascript, google-maps

我正在尝试在联系我们页面中显示谷歌地图，不知道它没有显示的实际问题是什么，下面是我的代码

```
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=places">

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success);
    } else {
        alert("Geo Location is not supported on your current browser!");
    }
    function success(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var city = position.coords.locality;
        var myLatlng = new google.maps.LatLng(latitude, longitude);
        var myOptions = {
            center: myLatlng,
            zoom: 12,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        var marker = new google.maps.Marker({
            position: myLatlng,
            title: "lat: " + latitude + " long: " + longitude
        });

        marker.setMap(map);
        var infowindow = new google.maps.InfoWindow({ content: "<b>User Address</b><br/> Latitude:" + latitude + "<br /> Longitude:" + longitude + "" });
        infowindow.open(map, marker);
    </script> 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:49:08.963

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
<script type="text/javascript">
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(success);
} else {
    alert("Geo Location is not supported on your current browser!");
}
.....
</script> 
```

请使用上面的代码，它正在解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:29:09.867

Mayur 的建议很好。但是您的函数末尾也缺少一个结束 }。尝试这个：

```
function success(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var myLatlng = new google.maps.LatLng(latitude, longitude);
        var myOptions = {
            center: myLatlng,
            zoom: 12,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        var marker = new google.maps.Marker({
            position: myLatlng,
            title: "lat: " + latitude + " long: " + longitude
        });

        marker.setMap(map);
        var infowindow = new google.maps.InfoWindow({ content: "<b>User Address</b><br/> Latitude:" + latitude + "<br /> Longitude:" + longitude });
        infowindow.open(map, marker);
} 
```

你也不需要`+ ""`在你的信息窗口内容的末尾做。我还删除了未使用的变量`city`

# css - 响应式 css div 不会彼此相邻

> ID：15970360
> 
> 赞同：0
> 
> 时间：2013-04-12T11:37:28.167
> 
> 标签：css, html, responsive-design

我正在尝试制作响应式网页布局。在首页有一个 div，里面有两个 div。一个用于标题，一个用于图像。标题应始终位于图像旁边，但图像和标题应针对较小的屏幕进行缩放。

这是我的html；

```
<div class="content">
        <div class="caption">
        <h1>Blablabla</h1>
        <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ac ipsum quam, semper volutpat massa. Cras mattis malesuada sagittis. Cras luctus erat quis orci condimentum quis vulputate lectus venenatis. Proin lorem lorem, vehicula in porta id, facilisis id massa. Phasellus venenatis eros et diam dictum faucibus. Donec at rutrum orci. Vivamus quam sapien, mollis sed aliquet blandit, viverra nec enim. In sapien lectus, fringilla pretium sollicitudin eu, eleifend id mi. Phasellus ullamcorper massa vitae mauris</p>
        </div>
        <div class="image">
            <img src="pics02.jpg">
        </div>
    </div> 
```

这是我的CSS；

```
 .content {
    margin: 0px auto;
    width:60%;
    background-color:black;
    margin-top:4em;
    display:block;
}

.caption {
    width:30%;
    background-color:white;
    height: auto;
    display:inline;
    margin:0px;
    color:green;
    float:left;
    padding:6px;
    display:block;
}

.image {
    display:inline;
    margin:0px;
    float:right;
    display:block;
}

.image img {
      max-width:100% !important;
    max-height:100% !important;
    display:block;
} 
```

在堆栈上的另一个主题中，我发现我应该将 img 标签设置为最大宽度和高度，并将显示设置为在任何地方阻塞。不幸的是，当我缩放时这不起作用，当你缩放时图像会变小，但它会在标题下方滑动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:41:16.190

**[现场演示](http://jsfiddle.net/PU6Sp/)**

你为什么习惯于多重价值

```
.caption {
    width:30%;
    background-color:white;
    height: auto;
    display:inline;   // used to any one value
    margin:0px;
    color:green;
    float:left;   // used to any one value
    padding:6px;
    display:block; // used to any one value
} 
```

习惯了你班上的一处房产`.caption`

不习惯`multiple display value`_`single class`

我想你想要这个**[现场演示](http://jsfiddle.net/PU6Sp/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:44:33.480

只需将其添加到您的图像 css 类中：

```
 .image {
    display:inline;
    margin:0px;
    float:right;
    display:block;
    width: 60%;
} 
```

希望这是你想要的。

否则，如果您可以使用真实图片等更新此示例，我们可以提供更多帮助：http: [//jsfiddle.net/BJ8gK/30/](http://jsfiddle.net/BJ8gK/30/)

# android - 从日历广播接收器意图获取事件数据

> ID：15970361
> 
> 赞同：2
> 
> 时间：2013-04-12T11:37:32.790
> 
> 标签：android, android-calendar, android-broadcast

我正在尝试使用 Android Calendar API，但遇到了一些问题。我创建了一个广播接收器，并将意图过滤器添加到清单中，如下所示：

```
<receiver android:name="com.project.receivers.CalendarEventReceiver">
   <intent-filter>
      <action android:name="android.intent.action.PROVIDER_CHANGED" />
         <data android:scheme="content"/>
         <data android:host="com.android.calendar"/>
   </intent-filter>     
</receiver> 
```

所以，我可以在我的 BroadcastReceiver 中成功拦截 onReceive(Context context, Intent intent) 方法中的事件，但是！- 我应该如何解析这个意图，如何在不查询日历内容提供者的情况下从这个意图中获取有关日历事件的信息？有可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T01:06:35.200

如果你`print`取出 Intent 的内容，你会看到 Intent 没有携带任何额外的数据。因此，日历提供程序中没有随更改提供的元数据。我假设您希望知道更改的事件 ID、实例 ID 和操作（插入/更新/删除）。

# c# - C# 正则表达式我怎样才能快捷方式所有这些匹配

> ID：15970362
> 
> 赞同：0
> 
> 时间：2013-04-12T11:37:34.253
> 
> 标签：c#, .net, regex

```
 var match = Regex.Match(GetActiveWindowTitle(), "(?i)ab.*?");
    var match2 = Regex.Match(GetActiveWindowTitle(), "(?i)bc.*?");
    var match3 = Regex.Match(GetActiveWindowTitle(), "(?i)de.*?");
    var match4 = Regex.Match(GetActiveWindowTitle(), "(?i)ef.*?");
    var match5= Regex.Match(GetActiveWindowTitle(), "(?i)gh.*?");
    var match6= Regex.Match(GetActiveWindowTitle(), "(?i)ij.*?");
    var match7 = Regex.Match(GetActiveWindowTitle(), "(?i)kl.*?");

 if (match4.Success || match.Success || match2.Success || match3.Success etc....)
            {
                MessageBox.Show("Sucess");
            } 
```

我怎样才能缩短一些东西，是否有任何 Regex 类函数可以重新组合许多匹配项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T11:39:31.980

```
"(?i)(?:ab|bc|de|ef|gh|ij|kl).*?" 
```

使用管道`|`令牌进行交替。

请注意，`?:`表示这些是“非捕获括号”。它是可选的，但通常是为了性能而完成的，以表明您不需要捕获括号内的内容（默认行为）。在这种情况下，我们只使用括号来包含替代选项。

# java - 有人可以解释一下 Ektorp 中的 Cascading 和 FetchType 懒惰吗？

> ID：15970364
> 
> 赞同：3
> 
> 时间：2013-04-12T11:37:38.940
> 
> 标签：java, nosql, couchdb, ektorp

我是 CouchDB 和 Ektorp 的新手（我实际上是从今天开始尝试使用它）。我发现可以帮助我入门的最详细的文档是这个：

[http://www.ektorp.org/reference_documentation.html#d100e394](http://www.ektorp.org/reference_documentation.html#d100e394)

我的用例是我想将一个非常复杂的类保存为文档（到目前为止我已经做到了），但我不想一直加载所有字段（因为其中一些可能是其他更简单的大集合文件）。

这是我所拥有的一个示例（它只是我用来学习使用 Ektorp 和 CouchDB 的实验课

```
@JsonSerialize(include = Inclusion.NON_NULL)
public class Player extends CouchDbDocument {

    private int xp = 0;

    @JsonDeserialize(using = CoinPouchDeserializer.class)
    private CoinPouch coins = new CoinPouch(); // subclass of enumMap not
                           // complex
    @DocumentReferences(backReference = "playerId", fetch = FetchType.LAZY, descendingSortOrder = true, orderBy = "itemid")
    private Inventory inventory = new Inventory();// subclass of Map<String,
                          // Item> Items are document
                          // themselves
} 
```

我设法保存它并通过 id 获取它就好了。但是如何在不加载库存的情况下获得它？
我也很感激任何指向其他资源的链接，我应该检查一下开始使用 couchdb 或 ektorp 和 java（或 scala），干杯。

感谢您提供任何有用的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:57:53.937

像这样的文档引用基本上类似于 SQL DB 中的 JOIN，但是您不能像使用 SQL 那样在一个请求中执行 JOIN。相反，您需要先请求获取您要查找的核心文档，然后再请求获取任何参考文档。

将 FetchType 设置为 eager 会告诉 Ektorp 在您阅读第一个文档时立即执行此操作，因此会立即对所有引用的文档发出一系列请求，确保在您开始使用之前加载所有内容。FetchType lazy 不会这样做，而是会忽略引用的文档，直到您尝试使用它们。

通常，如果您不太可能使用引用的文档，则需要延迟加载。如果您总是要使用它们，那么急切加载*可能会*更好，因为它至少可以为您提供一致的前期加载时间，而不是在流程后期出现不可预测的请求。听起来你不想在加载播放器时加载库存，所以是的，将 FetchType 设置为惰性应该可以解决这个问题。

同时 cascade 参数允许您配置如果您对该文档执行操作（更新删除等），引用的文档会发生什么。默认情况下，引用的文档需要自己显式保存或删除，您不能只保存主文档并期望其他文档也被保存。从它的声音来看，这实际上是您想要的行为（否则保存对播放器的更改将加载然后保存库存，我相信）。

此外，您应该注意，根据文档，您的示例实际上并不有效，因为您只能使用 DocumentReferences 来引用其他文档的 Sets（实际的真正 Java Set 实现），而您的示例是 Map。

# sql - 为每个客户 ID 选择最后下单日期

> ID：15970366
> 
> 赞同：2
> 
> 时间：2013-04-12T11:37:40.333
> 
> 标签：sql, sql-server-2008, tsql

我有一个 customerids、orderids 和订单日期的列表，我想在另一个查询中使用它们来确定客户自此日期以来是否再次订购。

示例数据：

```
CustomerID  OrderID OrderDate
6619    16034   2012-11-15 10:23:02.603
6858    18482   2013-03-25 11:07:14.680
4784    17897   2013-02-20 14:45:43.640
5522    16188   2012-11-22 14:53:49.840
6803    18016   2013-02-28 10:41:16.713 
```

询问：

```
SELECT    dbo.[Order].CustomerID, dbo.[Order].OrderID, dbo.[Order].OrderDate
FROM         dbo.[Order] INNER JOIN
                  dbo.OrderLine ON dbo.[Order].OrderID = dbo.OrderLine.OrderID 
WHERE     (dbo.OrderLine.ProductID in (42, 44, 45, 46,47,48)) 
```

如果您需要其他任何东西，请询问。

更新：：

此查询带回如上所示的结果

需要知道客户是否再次订购，对于订购上述查询中的产品之一后的任何产品 ID..

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:43:46.333

如果您只对每个客户的最后订购日期感兴趣

```
select customerid, max(orderdate) from theTable group by customerid; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:46:40.217

在 MS SQL 中，您可以为此使用 TOP 1，您还需要按订单日期列按降序排序。

请参阅此处[SQL Server - 如何选择每个用户的最新记录？](https://stackoverflow.com/questions/6320677/sql-server-how-to-select-the-most-recent-record-per-user)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:54:43.630

`ROW_NUMBER`在一个`CTE`应该工作：

```
WITH cte 
     AS (SELECT customerid, 
                orderid, 
                orderdate, 
                rn = Row_number() 
                       OVER( 
                         partition BY customerid 
                         ORDER BY orderdate DESC) 
         FROM   dbo.tblorder 
         WHERE  orderdate >= @orderDate 
                AND customerid = @customerID) 
SELECT customerid, orderid, orderdate
FROM   cte 
WHERE  rn = 1 
```

[**演示**](http://sqlfiddle.com/#!3/2136c/1/0)

（我省略了连接，因为不需要其他表中的列，只需添加它）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T11:44:06.207

```
SELECT    dbo.[Order].CustomerID, MAX(dbo.[Order].OrderDate)
FROM         dbo.[Order] INNER JOIN
                  dbo.OrderLine ON dbo.[Order].OrderID = dbo.OrderLine.OrderID 
WHERE     (dbo.OrderLine.ProductID in (42, 44, 45, 46,47,48))
GROUP BY dbo.[Order].CustomerID 
```

获取客户的最新订购日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T12:13:11.720

在订购任何一组产品后订购任何产品的客户的 CustomerID 和最新 OrderDate
我怀疑它们是促销产品

```
SELECT [Order].[CustomerID], max([Order].[OrderDate])
FROM [Order]
JOIN [Order] as [OrderBase]
  ON [OrderBase].[CustomerID] = [Order].[CustomerID] 
 AND [OrderBase].[OrderDate]  < [Order].[OrderDate]
JOIN [OrderLine] 
  ON [OrderLine].[OrderID] = [OrderBase].[OrderID]
 AND [OrderLine].[ProductID] in (42,44,45,46,47,48)
GROUP BY [Order].[CustomerID] 
```

# android - Android 从数据库中获取地图上的多个引脚

> ID：15970373
> 
> 赞同：0
> 
> 时间：2013-04-12T11:38:08.487
> 
> 标签：android, sqlite, google-maps

我有 SQlite DB，目前我有 4 个 La/Long 和 Names 值我关注[了这个](https://developers.google.com/maps/documentation/android/v1/hello-mapview#top)链接，但没有帮助从 DB 获取多个引脚我想在 MapView 和我的主类上获取多个引脚我已经完成了这个编码：

```
package com.example.demo;

import java.io.IOException;
import java.lang.reflect.Array;
import java.util.ArrayList;
import java.util.List;

import android.database.Cursor;
import android.database.SQLException;
import android.graphics.drawable.Drawable;

import android.os.Bundle;
import android.util.Log;

import com.example.tabhost.MyTabHostProvider;
import com.example.tabhost.TabHostProvider;
import com.example.tabhost.TabView;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class MapViewActivity extends MapActivity{

private MapView mapView;
public ArrayList lati,longi;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TabHostProvider tabProvider = new MyTabHostProvider(MapViewActivity.this);
    TabView tabView = tabProvider.getTabHost("Map");
    tabView.setCurrentView(R.layout.map);
    setContentView(tabView.render(2));
     mapView = (MapView)findViewById(R.id.map_view);
     mapView.setBuiltInZoomControls(true);

     DataBaseHelper myDbHelper = new DataBaseHelper(this);
        myDbHelper = new DataBaseHelper(this);

        try {

            myDbHelper.createDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        myDbHelper.openDataBase();
        // --- Cursor Coding

        Cursor cursor = myDbHelper.getAllContacts();
          //  int a = cursor.getCount();
          //    Log.d("GH:", String.valueOf(a));
            String[] names = cursor.getColumnNames();  
            System.out.print(names[1]);
            Log.v("Name :", names[3]);

             lati = new ArrayList();
             longi = new ArrayList();

                String latitudes = "";
                String longitudes = "";
                String result = "";

for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()){

                latitudes = latitudes + cursor.getDouble(3) + "\n";
                    longitudes = longitudes + cursor.getDouble(4) + "\n";
                result = result + cursor.getString(2) + "\n";
               //   Log.d("Latitude222 :", latitudes);

                }
lati.add(latitudes);
longi.add(longitudes);

int b = lati.size(); // returns 1
Log.d("Size :", String.valueOf(b));

//   List<Overlay> mapOverlays = mapView.getOverlays();
    // Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
    // MapItemizedOverlay itemizedoverlay = new MapItemizedOverlay(drawable, this);

        for (int i=0; i<b; i++){

//          Log.d("Hello :", String.valueOf(al.get(i)));
            Log.d("Hello :", (String) lati.get(i));

            // GeoPoint point2 = new GeoPoint(35410000, 139460000);
        //   OverlayItem overlayitem2 = new OverlayItem(point2, "Hi!", "I'm in Japan!");

            // itemizedoverlay.addOverlay(overlayitem2);

        }

            Log.d("Hello22 :", (String) lati.get(0));   // here i am getting all the 4 values of latitude at zero index :(
    //   GeoPoint point = new GeoPoint((int)(Double.parseDouble((String) lati.get(1)) * 1E6),(int)(Double.parseDouble((String) longi.get(1)) * 1E6));
        // OverlayItem overlayitem = new OverlayItem(point, "Hello!", "I'm in Mexico City!");
    //   itemizedoverlay.addOverlay(overlayitem);
    //  mapOverlays.add(itemizedoverlay); 

         cursor.close();
      // ---- End Cursor coding 
        }catch(SQLException sqle){

            throw sqle;

        }

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

我的 DB Helper 类有这个代码

```
 ...............    private SQLiteDatabase myDataBase; 

private final Context myContext;

private DataBaseHelper ourHelper;

/**
 * Constructor
 * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
 * @param context
 */
public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, DB_VERSION);
    this.myContext = context;
}   

/**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
        Log.v("DB:", "Exist");
        //do nothing - database already exist
    }else{
        Log.v("DB:", "Else is called");
        //By calling this method and empty database will be created into the default system path
           //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();

        try {
            Log.v("DB:", "copy DB");
            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }catch(SQLiteException e){

        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    Log.v("DB:", "Opened");
}

@Override
public synchronized void close() {

        if(myDataBase != null)
            myDataBase.close();
        Log.v("DB:", "Closed");
        super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

public Cursor getAllContacts()
{
return myDataBase.query("Points", new String[] {"_id", "p_id", "name", "latitude", "longitude"},
null, null, null, null, null);
}
} 
```

我的 MapItemizedOverlay 类是这样的：

```
package com.example.demo;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class MapItemizedOverlay extends ItemizedOverlay {

Context mContext;

private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

public MapItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
     return mOverlays.get(i);
//  return null;
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return mOverlays.size();
    // return 0;
}

public MapItemizedOverlay(Drawable defaultMarker, Context context) {
      super(boundCenterBottom(defaultMarker));
      mContext = context;
    }

@Override
protected boolean onTap(int index) {
  OverlayItem item = mOverlays.get(index);
  AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
  dialog.setTitle(item.getTitle());
  dialog.setMessage(item.getSnippet());
  dialog.show();
  return true;
}
  } 
```

请任何人告诉我我需要在我的主地图类中进行哪些更正才能获得 MapView 上的所有图钉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:32:21.920

这可以帮助您在此功能中传递您的纬度和经度

```
 for(int j= 0;j<arrofLatLOng.size();j++) {

       String  checklat = "your latitude"    
       String   checklon = "your longitude"

                 point = new GeoPoint((int) ((Double.parseDouble(checklat) * 1E6)),(int)((Double.parseDouble(checklon)) * 1E6));
                 Log.i(tag, "Geo Point is...."+point);
                  overlayitem = new OverlayItem(point,checktitle,checksdateformate);             
                  abc = imgloader.getBitmap(checkimg);
                  d = new BitmapDrawable(abc);
                  itemizedoverlay = new CheckInMapItemizedOverlay(d,mapview,true,streventid);
                  itemizedoverlay.addOverlay(overlayitem);
                  mapOverlays.add(itemizedoverlay);
                  mapController.animateTo(point);             

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:43:23.173

```
private class SitesOverlay extends ItemizedOverlay<CustomItem> {
        private View view = null;
        private List<CustomItem> items = new ArrayList<CustomItem>();

        public SitesOverlay() {
            super(null);

                // array list = yout lat and long array size
                for (int i = 0; i < arrayList.size(); i++) {
                    slat = Double.parseDouble(arrayList.get(i).getLat());
                    vlong = Double.parseDouble(arrayList.get(i).getvLong());
                    pt = new GeoPoint((int) (slat * 1E6), (int) (vlong * 1E6));
                    Log.e("lat long", "--- "+slat);
                    MapviewActivity.this.mc.animateTo(pt);
                    items.add(new CustomItem(pt, arrayList.get(i).getBuissnessName(), "Bendigo", marker));
                    boundCenter(marker);

populate();
        } 
```

在 MapItemizedOverlay 类中设置 lat 和 long，如上面的代码所示

```
if(c.moveToFirst()){
do{
// YOUR CODE FOR EACH CURSOR ITEM HERE.
// the cursor moves one field at a time trhough it's whole dataset
}while(c.moveToNext())
} 
```

# javascript - 使用 jQuery 显示/隐藏表格列

> ID：15970382
> 
> 赞同：5
> 
> 时间：2013-04-12T11:38:30.947
> 
> 标签：javascript, jquery

我有一张有五列的表

```
column1 column2 column3 column4 column5
------- ------- ------- ------- ------- 
```

当第一个复选框被选中时，我有一些复选框，每个复选框对应一个列，然后我需要显示第一列，如果未选中，我需要隐藏第一列。像我需要为所有列做的那样。

我找到了一些答案，但没有找到任何解决方案。第一次它隐藏然后其他操作不起作用。

```
 $('#tableId td:nth-child(column number)').hide(); 
```

请帮助我。在此先感谢....

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T11:49:00.797

给你，完整的解决方案：

[http://jsfiddle.net/vXBtP/](http://jsfiddle.net/vXBtP/)

并在这里更新：http: [//jsfiddle.net/vXBtP/5/](http://jsfiddle.net/vXBtP/5/)

```
<table>
   <thead>
       <td><input type="checkbox" checked="checked" /></td>
       <td><input type="checkbox" checked="checked" /></td>
       <td><input type="checkbox" checked="checked" /></td>
       <td><input type="checkbox" checked="checked" /></td>
       <td><input type="checkbox" checked="checked" /></td>
    </thead>
    <tbody>
    <tr>
       <td>column 1</td>
        <td>column 2</td>
        <td>column 3</td>
        <td>column 4</td>
        <td>column 5</td>
    </tr>
    </tbody>
</table>

$(document).on('change', 'table thead input', function() {
    var checked = $(this).is(":checked");

    var index = $(this).parent().index();
    if(checked) {
        $('table tbody tr td').eq(index).show();
    } else {
        $('table tbody tr td').eq(index).hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T11:41:32.950

根据您要隐藏的列 #，使用这个被盗的一个衬垫：

```
$('td:nth-child(2)').hide(); 
```

如果你使用

```
$('td:nth-child(2),th:nth-child(2)').hide(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T12:03:02.663

如果我明白你的意思，你可以使用`tr th, tr td`和`nth-child`选择器让它变得非常简单。您可以基于索引，但您需要添加 1，因为`nth-child`不是 0 索引，就像 jQuery 中的元素一样。并且 JS 并不真的必须被抽出。我应该提到，放在`tr`前面`td:nth`非常重要，因为你不想要“只有第 n 个 td”。如果是这样的话，你不会隐藏每一行的每一列。

# [请参阅您的示例的 WORKING jsFIDDLE](http://jsfiddle.net/SpYk3/FyMRy/)

* * *

仅供参考：如果您想要看起来“更干净”的东西（例如在 turbotax 网站上），请**不要**隐藏 td 本身。而是让它比你最大的一段文本略宽，并将每段文本放在里面`p`或`div`在每个单元格内放置标签。然后更改您`column`的选择器以获取每个单元格的**内部**元素并隐藏它。

## [请在此处查看此替代方式的示例！](http://jsfiddle.net/SpYk3/FyMRy/11/)

* * *

### HTML

```
<table>
    <thead>
        <tr>
            <th>
                <input id="chk1" type="checkbox" />
            </th>
            <th>
                <input id="chk1" type="checkbox" />
            </th>
            <th>
                <input id="chk1" type="checkbox" />
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                col1
            </td>
            <td>
                col2
            </td>
            <td>
                col3
            </td>
        </tr>
        <tr>
            <td>
                col1
            </td>
            <td>
                col2
            </td>
            <td>
                col3
            </td>
        </tr>
        <tr>
            <td>
                col1
            </td>
            <td>
                col2
            </td>
            <td>
                col3
            </td>
        </tr>
        <tr>
            <td>
                col1
            </td>
            <td>
                col2
            </td>
            <td>
                col3
            </td>
        </tr>
    </tbody>
</table>
<button>Reset</button> 
```

### JavaScript

```
$(function() {
    //  Selects your table by id, then the input checkboxes inside the table, you can 
    //  alternate this call with classnames on your inputs if you're going to have 
    //  more inputs than what's desired in call here.
        //  also note i'm using the "change" function and not "click", this simply 
        //  provides easier control of what's going on with your inputs and makes 
        //  later calls (like reset) a much easier call. Less thinking required
    $("#tableId input[type=checkbox]").on("change", function(e) {
        //  First variable grabs the inputs PARENT index, this is the TH containing 
        //  the input, thus the column you want hidden.
        //  The second is calling ALL TH's && TD's having that same index number
        var id = $(this).parent().index()+1,
            col = $("table tr th:nth-child("+id+"), table tr td:nth-child("+id+")");
        //  This simple inline "if" statement checks if the input is checked or now
        //  and shows the columns based on if it IS checked
        $(this).is(":checked") ? col.show() : col.hide();
    }).prop("checked", true).change(); // here i set all inputs to checked without having to write it in the above HTML

    $("button").on("click", function(e) {
        $("input[type=checkbox]").prop("checked", true).change();
    });
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T11:45:10.513

您可以获取表格的表头索引并隐藏表头和 td 元素。像这样
假设表头的索引是 index = 2;

```
var index= tableHeaderIndex; // 2 here

$('th:nth-child('+index+')').hide();
$('td:nth-child('+index+')').hide(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T11:59:10.870

像[这样？](http://jsfiddle.net/PottyMonster/YeFm5/)

快速捆绑在一起，但应该可以工作。

```
<table id="TabToHide">
    <tr>
        <td class="Col1">Col 1</td>
        <td class="Col2">Col 2</td>
        <td class="Col3">Col 3</td>
        <td class="Col4">Col 4</td>
        <td class="Col5">Col 5</td>
    </tr>
    <tr>
        <td class="Col1">Stuff 1</td>
        <td class="Col2">Stuff 2</td>
        <td class="Col3">Stuff 3</td>
        <td class="Col4">Stuff 4</td>
        <td class="Col5">Stuff 5</td>
    </tr>    
</table>

<br />

<table>
    <tr>
        <td><input name="Col1" type="checkbox" checked="checked" /></td>
        <td><input name="Col2" type="checkbox" checked="checked" /></td>
        <td><input name="Col3" type="checkbox" checked="checked" /></td>
        <td><input name="Col4" type="checkbox" checked="checked" /></td>
        <td><input name="Col5" type="checkbox" checked="checked" /></td>
    </tr>
</table> 
```

Javascript

```
 $('input:checkbox').change(function(){
   var ColToHide = $(this).attr("name");    
    if(this.checked){
        $("td[class='" + ColToHide + "']").show();        
    }else{
        $("td[class='" + ColToHide + "']").hide();
    }

    $('div#Debug').text("hiding " + ColToHide);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T12:37:22.483

```
 $(document).ready(function(){
    $('table tr input:checkbox').change(function(){
        var num = $(this).parents("th").index(); 
        alert(num);
        if($(this).is(":checked"))
        {

            $('table tbody tr td').eq(num).show();   
        }else
        {
            $('table tbody tr td').eq(num).hide(); 
        }

    });
}); 
```

[JS 小提琴链接](http://jsfiddle.net/rahularyansharma/t6V6J/5/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-13T13:51:17.410

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Show and Hide Columns in a Table</title>
    <link href="CSS/table.css" rel="stylesheet" />
    <script src="scripts/jquery-1.11.1.min.js"></script>
    <script>
        $(function () {
            var $chk = $("#grpChkBox input:checkbox");
            var $tbl = $("#someTable");
            $chk.prop('checked', true);
            $chk.click(function () {
                var colToHide = $tbl.find("." + $(this).attr("name"));
                $(colToHide).toggle();
            });
        });
    </script>
</head>
<body>
    <h2>Show and Hide Columns in a Table</h2>
    <p>Click on each Checkbox to hide corresponding Column</p>
    <div id="grpChkBox">
        <p><input type="checkbox" name="empid" /> Employee ID</p>
        <p><input type="checkbox" name="fname" /> First Name</p>
        <p><input type="checkbox" name="lname" /> Last Name</p>
        <p><input type="checkbox" name="email" /> Email</p>
        <p><input type="checkbox" name="phone" /> Phone</p>
    </div>

    <table id="someTable">
        <thead>
            <tr>
                <th class="empid">EmpId</th>
                <th class="fname">First Name</th>
                <th class="lname">Last Name</th>
                <th class="email">Email</th>
                <th class="phone">Phone</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="empid">E342</td>
                <td class="fname">Bill</td>
                <td class="lname">Evans</td>
                <td class="email">Bill@devcurry.com</td>
                <td class="phone">234-2345-2345</td>
            </tr>
            <tr>
                <td class="empid">E343</td>
                <td class="fname">Laura</td>
                <td class="lname">Matt</td>
                <td class="email">laura@devcurry.com</td>
                <td class="phone">123-1234-5678</td>
            </tr>
            <tr>
                <td class="empid">E344</td>
                <td class="fname">Ram</td>
                <td class="lname">Kumar</td>
                <td class="email">ram@devcurry.com</td>
                <td class="phone">345-3456-7890</td>
            </tr>
        </tbody>
    </table>

</body>
</html> 
```

# sqlite - 在 VxWorks 上将 SQLite 集成到 RTP 应用程序中时 pthreads 崩溃

> ID：15970387
> 
> 赞同：2
> 
> 时间：2013-04-12T11:38:50.377
> 
> 标签：sqlite, embedded, pthreads, vxworks

我正在尝试将 SQLite 库集成到 VxWorks 上的 RTP 应用程序中。我构建了 SQlite 并静态链接它。我运行在其他系统上运行良好的简单测试。测试非常原始：sqlite_open()、sqlite_exec()、sqlite_close()。参数正确（适用于其他系统）。

我体验过 SIGSEGV（信号代码 11）。我使用“printf()s”追踪到崩溃点，发现它在调用 pthread_mutex_lock() 后崩溃。有趣的是 - 它从函数调用返回然后崩溃。我检查了堆栈大小（在实际崩溃之前有一个 taskDelay() ）。堆栈足够大，远未达到极限。

我尝试使用**SQLITE_HOMEGROWN_RECURSIVE_MUTEX**构建 SQlite，而没有。我一直使用**SQLITE_THREADSAFE 1**构建。

如果有人经历过类似的事情并设法解决它 - 请告诉我。

这里有一些细节，只是为了概述它们。

*   VxWorks 版本：6.8
*   SQlite 来源：3.7.16.1
*   开发环境：Windriver
*   CPU架构：PowerPC

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:37:14.453

我找到了。我的 VxWorks 操作系统中没有 pthread。现在它起作用了。

奇怪的是，在针对 pthreads 库构建应用程序时，无法验证这一点。

没有简单的方法可以做到这一点，但至少有某种“存根”功能，而不是 SIGSEGV。还是我对这种钱的要求太高了？

# javascript - 如何在 JavaScript 块上使用 razor 注释/

> ID：15970392
> 
> 赞同：8
> 
> 时间：2013-04-12T11:38:59.513
> 
> 标签：javascript, asp.net-mvc, visual-studio, razor

当我在 cshtml 文件中的脚本块中创建一个 razor 注释块时，javascript intelisense 给了我错误。我们如何解决这个问题？提示：我使用 VisualStudio 2012 和 Resharper 7.1.2

我知道我们可以使用如下代码的嵌套注释（剃刀注释和外部的 javascript 注释）

```
<script type="text/javascript">
    //@*
    var something = "bla bla";
    //*@
    var other = "something else";
</script> 
```

它必须正常工作，但有两个问题 1- 智能感知让我出错 2- 由于剃刀忽略空格，关闭注释符号 ( *@ ) 后的其余代码

编辑1：

我尝试过的其他事情是：

```
/*@*
var something = "bla bla";
*@*/
var other = "something else"; 
```

和

```
/*@*
var something = "bla bla";
*@*/
var other = "something else"; 
```

. 但他们也有一些问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:49:43.957

如果我理解您的问题，您想根据某些条件定义一个 javascript 变量。

如果是真的，你可以试试下面的

```
<script type="text/javascript">
@if (Model.UserCanSee)
{

    <text>
        var uiEnabled=true;         
    </text>
}
else{

    <text>
        var uiDisabled=true;         
    </text>
}
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T04:30:44.730

我发现我的答案是：

```
<script type="text/javascript">
/*@*
var something = "bla bla";
*@//*/
var other = "something else";
</script> 
```

它将呈现为

```
/*//*/
var other = "something else"; 
```

visual studio intelisense 和 resharper 工作正常！！！

# iphone - 由于 tableView 的委托实现而导致的遗留单元格布局

> ID：15970396
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:39:13.370
> 
> 标签：iphone, ipad, uitableview

警告：由于`tableView:accessoryTypeForRowWithIndexPath:`in的委托实现，使用旧版单元格布局`<Settings: 0x250c60>`。请删除此方法的实现并设置单元格属性附件类型和/或`editingAccessoryType`移动到新的单元格布局行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:53:45.997

此处， `accessoryTypeForRowWithIndexPath`在 iPhone OS 3.0 中已弃用。

而是这样设置。

```
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton; 
```

现有答案 -[这里](https://stackoverflow.com/questions/6741551/legacy-cell-layout)

# linux - 在不创建本地文件的情况下执行 ELF 二进制文件？

> ID：15970400
> 
> 赞同：2
> 
> 时间：2013-04-12T11:39:19.763
> 
> 标签：linux, elf

是否可以执行二进制文件而不将其复制到硬盘驱动器？

我知道`/lib/ld-linux.so.2`可以加载任意二进制文件，但这仍然需要一个本地存储的文件，我的想法是分配一个内存区域，将内容复制到内存并执行它。

那有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:39:22.287

> 我的想法是分配一个内存区域，将内容复制到内存并执行它。

对于静态链接的`a.out`，您*可以*这样做。

对于动态链接的，您需要类似[dlopen_phdr](http://sourceware.org/bugzilla/show_bug.cgi?id=11767)的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T19:13:53.363

这是可能的，但非常困难。[几年前我在这里](http://hurd.cvs.sourceforge.net/viewvc/hurd/gnumach-otop/linux/i386/ptest.c?revision=1.5&view=markup)研究过类似的问题。（注意！该代码不完整并且包含严重的错误。）

困难的部分是确保您的进程的地址空间要求不与二进制文件或动态链接器的（例如，/lib/ld-linux.so.2）冲突。如果您控制两个程序的内存布局（因为您链接了它们），您可以避免这个问题。（我的代码不承担这种控制，如果有必要，它会很费力地将自己移开。）

如果没有地址空间冲突，那就是为 exe 的 PT_LOAD 段（以及链接器的，如果有的话）分配内存，对齐和复制段，保护只读段，分配堆栈，初始化堆栈和寄存器[内核的方式](http://asm.sourceforge.net/articles/startup.html)，并跳转到 exe 或链接器的入口地址。

# html - IE9+ 不能在 HTML5 视频标签中播放纵向视频

> ID：15970409
> 
> 赞同：0
> 
> 时间：2013-04-12T11:39:40.260
> 
> 标签：html, video, ffmpeg, html5-video

由于某种原因，在使用 HTML5 视频标签时，我无法让 IE9/10 播放高于宽度的视频。

演示： [http ://s.l6.no/demo/video+html5/](http://s.l6.no/demo/video+html5/)

该演示显示了一个从 1280x720 缩小的视频，在所有测试的浏览器中都可以正常播放，一个从 720x1280 缩小的视频可以在**除**IE9/10 之外的所有浏览器中播放。

经过测试并适用于：

*   Chrome 26、Windows 7 64 位
*   铬 24，Ubuntu 64 位
*   火狐 14、Windows 7 64 位

经过测试，不适**用于**：

*   Internet Explorer 9、Windows 7 64 位
*   Internet Explorer 10、Windows 7 64 位

我正在使用 FFmpeg 将视频编码为 MP4（x264）和 WebM（VP8），当前命令被简化为：

```
ffmpeg -i in.mp4 -vcodec libx264 -pix_fmt yuv420p -y -b:v 4000k out.mp4 
```

缺少配置文件设置将是我的第一点，但由于其他视频播放得很好，我看不出它为什么重要。

有任何想法吗？

编辑：软旋转视频并不是一个真正的选择，因为用户能够下载视频以离线播放。我可以为 IE 转码一个额外的版本，但是来吧，一定有另一种方式，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:45:53.183

这有点难看，但您可以添加`-webkit-transform:rotate(90deg);`到视频标签的样式属性。但是，这也会旋转您的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T16:47:23.910

问题是视频高度。它必须小于 1088 像素。 [更多在这里](https://msdn.microsoft.com/en-us/library/windows/desktop/dd797815(v=vs.85).aspx)

# c - 此代码是否会导致内存泄漏

> ID：15970414
> 
> 赞同：0
> 
> 时间：2013-04-12T11:39:54.820
> 
> 标签：c, pointers, memory, variable-assignment, memory-leaks

```
int main()
{
    char* str;

    str = "string one";
    str = "string two";
    str = func();
    str = "string four";
    return 0;
}

char* func()
{
    char* tmp;

    tmp = "string three";
    return tmp;
} 
```

我知道 `str = "string one";` 为此字符串分配内存并将该内存的地址分配给 `str` . 正确地，在执行和 `str = "string two";` 执行时应该发生同样的事情，现在我想知道在这种情况下如何处理内存。当新分配发生时分配给这些字符串的内存是否会释放或者它是一种内存泄漏形式？ `str = func();` `str = "string four";`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:41:09.357

您的代码中没有内存泄漏，因为它没有分配任何东西。每个赋值的右侧只有字符串文字，不需要（也不能）解除分配。

请参阅[C 中字符串文字的“生命周期”](https://stackoverflow.com/questions/9970295/life-time-of-string-literal-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:51:52.727

不需要`free`这种类型的分配。因为它们仅分配在`stack`（临时）内存中。如果您已使用分配内存`malloc`（它们在 中分配`heap`），则必须`free`

# mysql - 在数据库表中插入空白行

> ID：15970420
> 
> 赞同：0
> 
> 时间：2013-04-12T11:40:04.983
> 
> 标签：mysql, database

我有一个使用 MySQL 的 CakePHP 开发的项目。问题是每天有 2-3 条记录被输入到“产品”表中，字段中的值为 0。

通过应用程序输入数据的方式有两种 - 前端和管理面板。两种形式都经过身份验证（通过 ACL）并具有验证（客户端和服务器端）。但无法找到这些空白记录是如何每天出现的。

关于我必须在哪个领域解决问题的任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:27:33.000

人们怎么会说**行会自动插入数据库**？

**除非**您**指示****计算机去做，否则计算机**不会自己做任何事情。

 ******当前问题**的位置*

我看到两种**可能性**：

**1.您的数据库**中可能有一个**[事件调度程序](http://dev.mysql.com/doc/refman/5.1/en/events.html)**在固定时间运行。**[解释](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)**

 ****[从这里引用](https://stackoverflow.com/questions/6597850/how-to-run-a-mysql-query-on-a-pre-defined-fixed-time/6597896#6597896)**

2\. 可能有人在你不知情的情况下这样做。******

# python - Python - 读取 2D 代码，Tkinter 中的输出不正确

> ID：15970421
> 
> 赞同：0
> 
> 时间：2013-04-12T11:40:05.197
> 
> 标签：python, tkinter

我正在使用 libdmtx 使用以下代码从 png 文件中读取 2D 代码：

```
#!/usr/bin/python
import os
import Tkinter
from Tkinter import *
from tkFileDialog import askopenfilename

top = Tkinter.Tk()
top.geometry("200x200")
content = StringVar()
label = Message( top, textvariable=content, width='180' )
content.set ("Choose file to read 2D code")
label.pack()

def selector():
   filename = askopenfilename() 
   cmd = "dmtxread -n %s" % (filename)
   res = Text(top)
   res.insert (INSERT, os.system(cmd))
   res.pack()

B = Tkinter.Button(top, text ="Choode file", command = selector)
B.pack()

top.mainloop() 
```

一切正常，但在 GUI 中我无法获得完整的输出。只有 0，但在控制台中我得到了 2D 代码中的内容。我应该怎么做才能在 GUI 中获得完整的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:13:54.280

那是因为[`os.system`](http://docs.python.org/2/library/os.html#os.system)不返回`stdout`你执行的命令的，它只是返回它的退出状态，在这种情况下是`0`.

您应该使用该`subprocess`模块，如下所示：

```
import subprocess

def selector():
    filename = askopenfilename() 
    p = subprocess.Popen(["dmtxread", "-n", filename], stdout=subprocess.PIPE)
    stdout, stderr = p.communicate()
    res.insert(INSERT, stdout)
    res.pack() 
```

# solr - 更像 Solr 查询过滤

> ID：15970422
> 
> 赞同：3
> 
> 时间：2013-04-12T11:40:06.873
> 
> 标签：solr, solrj, morelikethis

我试图使用 SOLR 的 MLT（更像这样）功能，但被困在如何使用相关内容的过滤上。例如，我在 solr 中的文档有以下不同的类别：体育、娱乐、搞笑、商务等

我想要每个类别的相关内容（基于用户查询）。因此，我想过滤类别类型的 solr 的 MLT 结果。我可以以某种方式过滤结果吗？

如果不可能，我能否以某种方式使用 solr 函数查询来确保相关内容按类别分组？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:11:55.077

需要定义 /mlt 请求处理程序，然后使用 fq= 过滤 MLT 的查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T14:18:08.290

在 solrconfig.xml 定义中，您应该定义一个请求处理程序，如下所示：

```
<requestHandler name="/mlt" class="solr.MoreLikeThisHandler">
</requestHandler> 
```

然后，您需要向指定“fq”参数的此处理程序发出请求。这将过滤您的 MoreLikeThis (MLT) 结果。请参阅以下示例，其中 documentid 是要查找相似结果的文档的 ID，而 searchtext 是用于比较两个文档是否相似的字段。“rows”是请求应返回的 MLT 结果数。

```
'http://solrserver.local:4562/solr/mlt?rows=2&fl=id&mlt.fl=searchtext&fq=category:<category>&q=id:<documentid>', 
```

请参阅过滤器查询文档： [https ://cwiki.apache.org/confluence/display/solr/Common+Query+Parameters#CommonQueryParameters-Thefq(FilterQuery)Parameter](https://cwiki.apache.org/confluence/display/solr/Common+Query+Parameters#CommonQueryParameters-Thefq(FilterQuery)Parameter)

# android - 上传大尺寸文件下载到谷歌驱动器给出错误

> ID：15970423
> 
> 赞同：3
> 
> 时间：2013-04-12T11:40:09.147
> 
> 标签：android, http, google-drive-api

我正在从该用户创建一个小应用程序，可以将他的 MS office 文件从 android 设备上传到他的注册邮件 ID G_Drive 帐户。并将该文件导出为 PDF 格式。

为此，我采取了以下链接的帮助表格：

[https://developers.google.com/drive/v2/reference/files/insert#examples](https://developers.google.com/drive/v2/reference/files/insert#examples)

[https://developers.google.com/drive/manage-downloads#downloading_google_documents](https://developers.google.com/drive/manage-downloads#downloading_google_documents)

我创建了应用程序，它适用于小尺寸（< 1MB）文件，但是当我向 g_Drive 发送大尺寸文件时，我收到以下错误：

```
java.io.exception Unexpected End of Stream
java.net.SocketTimeoutException: Read timed out 
```

我尝试了可恢复上传，但插入方法没有参数来设置它。如果我将上传类型设置为可恢复

```
service.files().insert(body, mediaContent).set("upload type", "resumable"); 
```

或者

```
Insert insertService = service.files().insert(body, mediaContent).setConvert(true);
insertService.getMediaHttpUploader().setDirectUploadEnabled(false);         insertService.getMediaHttpUploader().setChunkSize(MediaHttpUploader.DEFAULT_CHUNK_SIZE);
file = insertService.execute(); 
```

而不是它产生相同的错误。

同样的情况与下载也......

请给我一些解决方案...为此...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:06:42.997

不要对大于 5MB 的文件使用基本上传。

您需要在开始上传之前设置媒体内容的内容长度。否则，Google 端点可能无法识别上传已完成，它会一直等到套接字超时。

```
InputStreamContent mediaContent = new InputStreamContent("image/jpeg", new   BufferedInputStream(
    new FileInputStream(UPLOAD_FILE)));
mediaContent.setLength(UPLOAD_FILE.length());

Insert insert = drive.files().insert(fileMetadata, mediaContent);
MediaHttpUploader uploader = insert.getMediaHttpUploader();
uploader.setDirectUploadEnabled(false);
uploader.setProgressListener(new FileUploadProgressListener());
insert.execute(); 
```

[[1]](https://code.google.com/p/google-api-java-client/source/browse/drive-cmdline-sample/src/main/java/com/google/api/services/samples/drive/cmdline/DriveSample.java?repo=samples&r=08555cd2a27be66dc97505e15c60853f47d84b5a)上实际上有一个完整的基于 Android 的可恢复上传示例。

# javascript - 使用 javascript 和 css 有条件地隐藏按钮

> ID：15970424
> 
> 赞同：0
> 
> 时间：2013-04-12T11:40:15.390
> 
> 标签：javascript

我需要使用 Javascript 和 Css 有条件地显示我的购物车按钮。我的目标是在购物车内没有物品时隐藏按钮。

我的按钮代码是：

```
<span id="mycartbutton" style="float: right; clear: both;">
<a class="button"href="$(shopping_cart_url)">Mon panier</a>
</span> 
```

当购物车中没有任何内容时，url 看起来就像这样：

```
/.../mode=show_cart 
```

当存在一个或多个项目时，URL 如下所示：

```
/.../mode=show_cart&cart_id=10332&first_reservation_id=717 
```

不幸的是，我不是编码员，也没有任何 javascript 知识，但我想可以根据呈现的 url 进行检查。

实际上我使用以下javascript：

```
<script type='text/javascript'>
function on_site_form_loaded(event) {
    if (event=='product_list')
        document.getElementById('mycartbutton').style.display='none';
    }
</script> 
```

..这让我可以根据需要隐藏产品列表上的按钮，但即使有些物品在购物车内。

有人可以告诉我必须使用哪个条件代码来检查 url 是否包含例如文本“cart_id”？这意味着购物车内有东西，让我隐藏按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:44:29.783

如果你的页面是这样设置的：

```
<ul id="cart">
   <li>Item 1</li>
   <li>Item 2</li>
</ul>
<span id="mycartbutton"...>...</span> 
```

然后你可以使用这个 CSS：

```
#cart:empty~#mycartbutton {display:none} 
```

但是，这仅在购物车按钮是购物车本身的兄弟（如果它们之间有元素，请使用`+`而不是`~`），并且仅当购物车的项目是购物车元素的第一级子元素时才有效。

如果这不可能，您将需要使用 JavaScript。基本上，您可以随时检查项目的数量，例如`document.getElementById('cart').children.length`，并使用该信息来设置`display:none`或`display:block`在您的按钮上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:44:53.920

`url.indexOf()`应该为你工作。尝试这个：

```
<script>
    function check(url){
        if(url.indexOf("cart_id")>-1){
            // cart_id present do something
        }
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:45:41.073

如果总 URL 在字符串 Url 中，则搜索搅拌“cart_id”并将其放在布尔值中。

```
cartIDFound = Url.search("cart_id");

if (cartIdFound){
    // ... cart id is found. items are in cart .. do domething
    // .. first,show button by setting visibility to visible and showing display
    document.getElementById('mycartbutton').style.visibility='visible';
    document.getElementById('mycartbutton').style.display='inline';
    // ... next, continue

}
else {
      //  .. cart id wasn't found; no items in cart.. do something different
      // first, hide the cart button
      document.getElementById('mycartbutton').style.visibility='hidden';
     document.getElementById('mycartbutton').style.display='none';
     // ... next, continue
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:46:14.773

使用 jQuery [**hide()**](http://api.jquery.com/hide/)函数

```
<script type='text/javascript'>
    function on_site_form_loaded(event) {
        if (event=='product_list')
            $("#mycartbutton").hide();
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T22:41:44.520

我终于找到了使用 CSS 的最佳解决方案：

```
#mycartbutton a.button {
    display: none; 
}

#mycartbutton a.button[href*=cart_id] { 
    display: inline-block; 
} 
```

Iit 更容易，更可靠，因为在我的案例中使用 JavaScript 时遇到了一些冲突。

# c# - 如果 ID 匹配，C# 合并字段值

> ID：15970425
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:40:16.663
> 
> 标签：c#, .net, list, merge

如果它们的 ID 匹配并且它们的文本不匹配，我如何匹配列表中的 2 个对象？

我的对象被添加到列表中：

```
List<MyObject> list = New List<MyObject>(); 
```

这可能是我的清单（这是一个对象）：

```
ID      Text
1       this is some text
2       text1
1       more text
1       a little more
2       text 2
3       XXX 
```

然后我希望结果是：

```
ID      Text
1       this is some text more text a little more
2       text1 text2
3       XXX 
```

我已经尝试在 for 循环中使用 for ，但我可以弄清楚..

```
for (int i = 0; i < OrderList.Count; i++)
        {
            bool existsMoreThanOnce = false;

            for (int j = i; j < OrderList.Count; j++)
            {
                duplicates.Add(OrderList[i]);
                if (OrderList[i].OrderNumber == OrderList[j].OrderNumber && OrderList[i].OrderText != OrderList[j].OrderText)
                {
                    if(!uniques.Contains(OrderList[j]))
                    {
                        duplicates.Add(OrderList[j]);
                        existsMoreThanOnce = true;
                    }
                }
            }

            if (existsMoreThanOnce == false)
            {
                uniques.Add(OrderList[i]);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:17:46.967

首先我创建一个类

```
public class Items
{
    public int ID { get; set; }
    public string Text { get; set; }

    public Items(int id, string text)
    {
        ID = id;
        Text = text;
    }
} 
```

现在我的代码逻辑是

```
List<Items> objItems = new List<Items>();
        objItems.Add(new Items(1,"Rahul"));
        objItems.Add(new Items(2, "Rohit"));
        objItems.Add(new Items(1, "Kumar"));
        objItems.Add(new Items(2, "Verma"));
        List<Items> objNew = new List<Items>(); //it will hold result
        string str = "";

        for (int i = 0; i < objItems.Count; i++)
        {
            if (objItems[i].ID > 0)
            {
                str = objItems[i].Text;
                for (int j = i + 1; j < objItems.Count; j++)
                {
                    if (objItems[i].ID == objItems[j].ID)
                    {
                        str += objItems[j].Text + " ";
                        objItems[j].ID = -1;
                    }
                }
                objNew.Add(new Items(objItems[i].ID, str));
            }
        } 
```

ObjNew 对象包含所需的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:46:27.740

首先我创建了一个类来保存你的列表

```
public class MyObject
{
    public int ID { get; set; }
    public string Text { get; set; }
} 
```

然后我将虚拟值插入其中

```
List<MyObject> obj = new List<MyObject>
{
     new MyObject{ID=1, Text="this is some text"},
     new MyObject{ID=2, Text="text1"},
     new MyObject{ID=1, Text="more text"},
     new MyObject{ID=1, Text="a little more"},
     new MyObject{ID=2, Text="text 2"},
     new MyObject{ID=3, Text="XXX"}
};

List<MyObject> obj2 = new List<MyObject>(); //this list will hold your output
//the linq query will filter out the uniques ids.
var uniqueIds = (from a in obj select new { a.ID, a.Text }).GroupBy(x => x.ID).ToList();
//then iterated through all the unique ids to merge the texts and list them under the unique ids.
int id=0;
foreach (var item in uniqueIds)
{
    string contText = "";
    for (int j = 0; j < item.Count(); j++)
    {
        contText += item.ElementAt(j).Text + " ";
        id = item.ElementAt(j).ID;
    }

    obj2.Add(new MyObject { ID = id, Text = contText });               
 } 
```

列表 obj2 将具有您想要的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:41:49.677

您可以从 LINQ 的`GroupBy`.

```
var output = input.GroupBy(i => i.ID)
                  .Select(i => new { ID = i.Key, 
                                   Text = String.Join(" ", 
                                        i.Select(x => x.Text).ToArray()) }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:48:04.527

```
var result = list1.Concat(list2)
                .GroupBy(x => x.ID)
                .Where(g => g.GroupBy(x=>x.Text).Count() > 1)
                .Select(x => x.Key)
                .ToList(); 
```

# turnjs - turnjs steve jobs 示例 - 如何加载前 4 页

> ID：15970433
> 
> 赞同：2
> 
> 时间：2013-04-12T11:40:27.607
> 
> 标签：turnjs

我是 turn.js 的新手，我正在尝试修改它附带的 steve 工作手册。

这本书的前 3 页是图像，并设置在 css 中，如下所示

```
.sj-book .p1,
.sj-book .p2,
.sj-book .p3, 
.sj-book .p111, 
.sj-book .p112{
    background-color:white;
    background-image:url(../pics/book-covers.jpg) !important;
} 
```

但是，我想像其他页面（例如 page1.html）一样将前 4 个页面加载为普通的 html 页面。但是代码似乎只在第 5 页开始加载页面。如果我向缺少动态加载页面的函数添加警报，则加载的第一页是第 5 页

缺少：功能（e，页面）{

```
for (var i = 0; i < pages.length; i++) {
alert(pages[i]);
addPage(pages[i], $(this));} 
```

}

当书籍第一次加载时，此警报出现两次 - 第 5 页和第 6 页 - 这是有道理的，因为这本书仅在内存中保留 6 页 - 但为什么书籍没有加载第 1 到第 4 页？我已经为 pages 目录中的第 1-4 页创建了必要的 html 文件，但它们没有被加载。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-19T06:42:56.953

正如参考链接所示：[https ://github.com/blasten/turn.js/issues/306](https://github.com/blasten/turn.js/issues/306)

我们需要执行以下步骤

1）删除以下 HTML（作为对 pages 的静态引用）

```
<div depth="5" class="hard">
      <div class="side"></div>
</div>

<div depth="5" class="hard front-side">
      <div class="depth"></div>
</div>

<div class="own-size"></div>    
<div class="own-size even"></div> 
```

2) 删除相应的 CSS 作为 ques 中的地址

```
.sj-book .p1,
.sj-book .p2,
.sj-book .p3, 
.sj-book .p111, 
.sj-book .p112{
    background-color:white;
    background-image:url(../pics/book-covers.jpg) !important;
} 
```

3) 将相应的页面复制到名为 Page1.html Page2.html 的页面文件夹中，依此类推..

# php - 循环显示数据库中的信息

> ID：15970434
> 
> 赞同：0
> 
> 时间：2013-04-12T11:40:28.240
> 
> 标签：php, html, sql

在我的网站上，我目前有一个活动页面。使用数据库读取和显示每个事件。对于数据库中的每一行，我都创建了一个新的 div，例如：

```
<body>
<?php

define('INCLUDE_CHECK',true);
require 'connect.php';
 $result = mysql_query('SELECT * FROM test ORDER BY timestamp DESC LIMIT 3;') ?>
<?php while($row = mysql_fetch_assoc($result)) : ?>

    <div class="aboutUsContenttest">
        <div class="boxheader"><?php echo $row['a'] ?><br></div>
          <div class="aboutUsContentText">  <?php echo $row['b'] ?></div>
    </div>
<?php endwhile ?>
</body> 
```

这显示了 3 个不同的事件.....

我想做的是有一个“阅读更多”选项，这意味着我可以点击一个链接，将我带到一个单独的页面，其中包含有关每个事件的更多信息。对于第二个事件，我将如何实现这一目标？它怎么知道从第二行或已创建的 div 中获取信息？

我希望这有某种意义

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:49:29.707

传递地址中的参数：

```
$limit = isset($_GET['view_all']) ? "" : "LIMIT 3";
$result = mysql_query("SELECT * FROM test ORDER BY timestamp DESC {$limit};"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:38:38.147

只需有一个名为 $row['b'] 的值并带有 php 文件扩展名的页面，并创建一个将 href 设置为 '$row['b'].php' 的锚点

或者，您可以将页面名称添加为数据库中的字段。

```
<body>
<?php

define('INCLUDE_CHECK',true);
require 'connect.php';
$result = mysql_query('SELECT * FROM test ORDER BY timestamp DESC LIMIT 3;') ?>
<?php while($row = mysql_fetch_assoc($result)) : ?>

    <div class="aboutUsContenttest">
        <div class="boxheader"><?php echo $row['a'] ?><br></div>
          <div class="aboutUsContentText">  <?php echo $row['b'] ?></div>
             <div><?php echo '<a href="./'.$row['b'].php.'">Read More</a>'?></div>
    </div>
<?php endwhile ?>
</body> 
```

# jquery - 在 jquery 中获取复选框的文本（不是值）

> ID：15970435
> 
> 赞同：0
> 
> 时间：2013-04-12T11:40:39.870
> 
> 标签：jquery, checkbox

动态`checkboxes`是使用下面的代码创建的。

```
 var list = new Array();
    for(var i=0; i<data.length; i++)
    {
         $('#cContainer').append('<input type="checkbox" name="catChkBox" class="ckbox"
          id = "'+ data[i].id +'" value="'+ data[i].id + '" /> ' + data[i].name + '<br 
          />');
    } 
```

上面的代码在`document.ready`函数内部。我想收集检查的值，即。`data[i].name`外面`document.ready`并把它放在一个列表中。

我尝试了下面的代码，它只显示`id`. 但我需要的是文字。在这里`data[i].name`（我从 dwr 电话中得到这个）

```
function showSelectedValues()
{
  alert("--------------" + $("input[name=catChkBox]:checked").map(
     function () {return this.value;}).get().join(","));
} 
```

我将从`showSelectedValues()`其他一些方法调用，我将在其中使用这些值。有什么想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:43:35.763

```
$("input[name=catChkBox]:checked").val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:55:13.270

为每个`checkbox`添加一个`label`

```
var list = new Array();
for(var i=0; i<data.length; i++)
{
     $('#cContainer').append('<input type="checkbox" name="catChkBox" class="ckbox"
      id = "'+ data[i].id +'" value="'+ data[i].id + '" /><label for="'+ data[i].id +'">' + data[i].name + '</label><br/>');
} 
```

然后使用下面的代码获取与每个检查相关联的文本`checkbox`

```
$("input[name=catChkBox]:checked + label").text(); 
```

*更新 ：*

要将值保存到数组中，请使用以下代码：

```
function ConvertSelectedValuesToList()
{
  list = $("input[name=catChkBox]:checked + label").map(function () {
      return $(this).text();
  }).get();
} 
```

如果您想创建一个逗号分隔的值字符串，请在 . 之后添加`join(",")`，`get()`但它不再是数组了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:56:06.683

`data[i].name`永远不会写入输入元素，因此不是它的一部分。它只是元素后面的文本。

我建议添加一个包含您感兴趣的值的数据属性**，**类似于：

```
var list = new Array();

for (var i = 0; i < data.length; i++) {
    $('#cContainer').append('<input type="checkbox" data-name="' + data[i].name + '" name="catChkBox" class="ckbox" id = "' + data[i].id + '" value="' + data[i].id + '" /> ' + data[i].name + '<br/>');
} 
```

注意`data-name="' + data[i].name + '"`上面。

然后你可以更新你的方法来简单地查询数据属性，类似于这样：

```
function showSelectedValues() {
    alert("--------------" + $("input[name=catChkBox]:checked").map(function () {
        return $(this).data('name');
    }).get().join(","));
} 
```

* * *

[**演示**](http://jsfiddle.net/eHmjs/)- 使用数据属性

* * *

# ios - 更改模态对话框 ios 的大小

> ID：15970437
> 
> 赞同：1
> 
> 时间：2013-04-12T11:40:40.027
> 
> 标签：ios, objective-c, modal-dialog

如何更改模态对话框的大小？为什么这不起作用？

```
SlingDialogViewController *slingDialog = [[SlingDialogViewController alloc] init];

    slingDialog.modalPresentationStyle = UIModalPresentationFormSheet;
    slingDialog.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    slingDialog.view.superview.frame = CGRectMake(0, 0, 900, 700);
    [self presentModalViewController:slingDialog animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:54:26.623

做这个：

```
SlingDialogViewController *slingDialog = [[SlingDialogViewController alloc] init];

slingDialog.modalPresentationStyle = UIModalPresentationFormSheet;
slingDialog.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self presentViewController:navController animated:YES completion:nil];

slingDialog.view.superview.frame = CGRectMake(0, 0, 900, 700);
slingDialog.view.superview.center = self.view.center; 
```

`presentViewController:animated:completion`至少从我的经验来看，首先打电话很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:49:19.210

iOS 中的模态控制器具有固定大小。我不建议尝试更改它们，它永远不会可靠地工作。

一种解决方法是自己实现它。模态（显示）控制器是一个非常简单的功能：

1.  与您的呈现控制器重叠的视图，因此无法单击它（并且它使内容变暗以使它们看起来像背景）

2.  添加到您的控制器的子视图控制器（及其视图）。

# php - php - sqlsrv 编码

> ID：15970444
> 
> 赞同：1
> 
> 时间：2013-04-12T11:41:13.440
> 
> 标签：php

我的项目基于 PHP 构建并连接到 MS SQL Server。我正在使用 sqlsrv 库。MS SQL 中的字段类型是 nvarchar。当我定义连接参数时，我还输入了“utf8”。这是：

```
global $cnf;
$cnf = array();
$cnf["mssql_user"]  = "xxx";
$cnf["mssql_host"]  = "xxx";
$cnf["mssql_pw"]    = "xxx";
$cnf["mssql_db"]    = "xxx";
$cnf["CharacterSet"]    = "**UTF-8**"; 
```

将记录插入数据库时​​，对于越南语内容和中文内容，我使用：

```
$city = iconv('UTF-8', 'utf-16le', $post['city']);
$params = array(array($city, null, SQLSRV_PHPTYPE_STRING(SQLSRV_ENC_BINARY)));
$sql= "INSERT INTO tblCityGarden (city) VALUES(?)
$stmt   = sqlsrv_query( $this->dbhandle, $sql, $params); 
```

越南文和中文插入数据OK（越南文和中文数据库中存储的数据是正确的）。

但是，当我将记录加载回网络时，会出现奇怪的字符 (?, �)。我尝试了一些 php 作为 iconv、mb_detect_encoding、mb_convert_encoding 并在互联网上搜索了许多结果，但它无法正常工作。如何显示正确的数据

请有此问题经验的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-16T18:29:15.320

我遇到了同样的问题 (�)，但使用了单引号、双引号和“保留权利”字符……这是我发现的：

*   指定的`CharacterSet`似乎是“全部规则”，因此您将其设置为将确定连接的编码（应该如此）。我的连接上没有任何`CharacterSet`配置。简单地设置这个解决了我的问题，同时确保插入到我的数据库中的值不是通过`htmlspecialchars()`.
*   header() 必须在任何输出之前设置（这非常重要）
*   标题不能在文档后面设置为不同的东西
*   有时`?>`在 PHP 文件中关闭之前和/或之后的尾随空格可能会导致问题（我不使用此结束标记，但我在搜索时看到很多提及）

我不熟悉`iconv()`，而且我肯定没有一般的编码经验，但我只是通过花时间检查我的标题并确保它们符合上述标准来解决我的问题......

您的查询参数也看起来很奇怪： `$params = array(array($city, null, SQLSRV_PHPTYPE_STRING(SQLSRV_ENC_BINARY)));`

我还没有看到传递给该参数的多维数组......（只是一个注释）

# javascript - 如何将捕获的图片作为 blob 保存到 SQLite 并在 Phonegap 中检索？

> ID：15970446
> 
> 赞同：2
> 
> 时间：2013-04-12T11:41:20.170
> 
> 标签：javascript, html, cordova

[我有一个创建的 Phonegap 项目，它按照教程http://mobile.tutsplus.com/tutorials/phonegap/phonegap-from-scratch-camera-exporting/](http://mobile.tutsplus.com/tutorials/phonegap/phonegap-from-scratch-camera-exporting/.Now)使用相机捕获图片。现在我想将图像保存为 blob一个sqlite数据库。也一旦保存检索并显示图像。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:54:48.997

**请按照以下步骤**
**1.**使用手机间隙相机 API 将您的图片作为 base 64
**2.**现在将 Base 64 转换为 Blob 对象

```
function convertDataURIToBlob(dataURI, mimetype) {
    var BASE64_MARKER= ';base64,';
    var base64Index = dataURI.indexOf(BASE64_MARKER) + BASE64_MARKER.length;
    var base64 = dataURI.substring(base64Index);  
    var raw = window.atob(base64);
    var rawLength = raw.length;
    var uInt8Array = new Uint8Array(rawLength);
    for (var i = 0; i < rawLength; ++i) {
        uInt8Array[i] = raw.charCodeAt(i);   
    }
    var bb = new BlobBuilder();
    bb.append(uInt8Array.buffer);
    return bb.getBlob(mimetype); 
} 
```

您应该从数据 url 中提取它并将其与 getBlob() 一起使用，而不是传入 mimetype。
或
使用此[插件](https://github.com/blueimp/JavaScript-Canvas-to-Blob)
**3.**现在您可以使用 phonegap Storage API 将图像保存到 Sqlite，您所需的列数据类型是字符串。
**4.**使用 Phone gap Storage API 从 Sqlite 获取您的 blob 对象
**5.**现在使用 Java 脚本将此对象表示为 HTMl 标记。这里是 HTML 5 的示例 blob 对象

```
<!DOCTYPE html>    
<html>    
<head>    
    <meta charset="utf-8" />    
    <title>Blob</title>    
    <script type="text/javascript">    
        (function () {    
            window.URL = window.URL || window.webkitURL;    
            function contentLoaded() {    
                var blob = new Blob(['alert("hello")'], { type: 'text/javascript' });    
                var script = document.createElement('script');    
                script.setAttribute('src', window.URL.createObjectURL(blob));    
                document.body.appendChild(script);    
            }    
            window.addEventListener('DOMContentLoaded', contentLoaded, false);    
        } ());    
    </script>    
</head>    
<body>    
    <div id="container">    
    </div>    
</body>    
</html> 
```

# c++ - R调用Cpp代码：全局变量未重新初始化

> ID：15970450
> 
> 赞同：0
> 
> 时间：2013-04-12T11:41:41.123
> 
> 标签：c++, r, global-variables

我正在编写一个 R 包，它在某一时刻调用一个 Cpp 程序。

我不是 R 和 Cpp 编程方面的专家，但我会尽量清楚地解释这个问题：

*   Cpp 代码创建一些全局变量，然后对其进行修改（我知道它很糟糕......）。

*   当我打开 R 并运行一次我的包中的 R 函数时，一切都很好。但是当我重新运行它时，似乎 Cpp 代码创建的全局变量没有重新初始化，而是使用了修改后的值。换句话说，似乎由 Cpp 创建的全局变量“留在内存中”并且当我再次调用程序时不会重新编写。

我希望我的问题足够清楚，并且有人可以向我解释它为什么会这样。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:48:48.210

实际上，您确实解释得有些差，但本质上您需要了解

*   函数调用只是暂时的，无论它是否涉及 R 中的 C++

*   所以你设置的任何东西*都会在之后消失，*除非你说返回一个值，或者......

*   如果您想保持“状态”，请创建一个适当的类，先实例化它，然后使用该对象进行调用。Rcpp 可以帮助 R / C++ 接口。

# xamarin.ios - 在没有完整 AOT 的 Xamarin.iOS 中使用 Protobuf-Net

> ID：15970459
> 
> 赞同：1
> 
> 时间：2013-04-12T11:41:51.803
> 
> 标签：xamarin.ios, protobuf-net

除了此方法之外，是否有任何替代方法可以使用 protobuf-net 在 Xamarin.iOS（Monotouch）中实现对象的序列化和反序列化：

[http://www.frictionpointstudios.com/blog/2011/3/31/using-protobuf-net-serialization-in-unity-iphone.html](http://www.frictionpointstudios.com/blog/2011/3/31/using-protobuf-net-serialization-in-unity-iphone.html)

阅读周围的一些人声称他们已经做到了（没有提供证据），但我的理解是 [iOS JIT==NO] 所以不太有意义。

如果唯一可能的解决方案是完全 AOT 所有相关类，那么合适的构建前/构建后事件命令行可能会自动为任何相关程序集执行此 AOT？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:59:21.530

我听说很多人通过这条路线取得了成功，但我也无法提供书面证据。

这种方法有点过时了——我已经简化了几个步骤；有一个独立的预编译工具应该可以工作：

*   为要序列化的 DTO 创建一个项目/程序集，该项目/程序集引用**适当版本**的 protobuf-net；大概是CoreOnly / ios，理想情况下将该dll设置为复制到输出目录中（它只是让生活更轻松）
*   跑

    ```
    precompile "SomePath/YourDto.dll" -t:MySerializer -o:MySerializer.dll 
    ```

    （也许在此`mono`之前有一个单声道来托管 exe）

    这应该解决框架并编译一个`MySerializer.dll`您可以引用的，这涉及零 JIT（`MySerializer.dll`将引用您的 dto dll 和您的 dto dll 引用的 protobuf-net 的版本）

*   现在引用您的 dto dll、序列化程序 dll 和 protobuf-net dll，它应该都可以通过使用`new MySerializer().Serialize(...)`
*   当你编译你的解决方案时，这些项目都应该很好地 AOT

我很乐意提供指导，但目前我没有 mac，所以我现在无法检查。如果您遇到任何问题，请告诉我。如果它不能解析框架，你可以添加`-f:{path to the framework assemblies}`给它一个线索。

# java - 具有时区格式的 Java 日期时间

> ID：15970462
> 
> 赞同：5
> 
> 时间：2013-04-12T11:41:57.700
> 
> 标签：java, datetime, timezone

我目前正在使用`SimpleDateFormat`格式创建日期时间值`yyyy-MM-dd HH:mm:ss`。这是我的代码：

```
 Date date = new SimpleDateFormat("yy-M-d H:m:ss").parse(datetime);
     String Dtime = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(date); 
```

但是，我希望格式改为：

```
 2013-04-12T13:38:48+02:00 
```

如何添加时区以获得所需的格式？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T11:45:48.297

查看SimpleDateFormat[的 API 文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。在那里您可以看到，您可以使用字符“z”作为时区信息。

示例：“yyyy.MM.dd G 'at' HH:mm:ss z”将为您提供“2001.07.04 AD at 12:08:56 PDT”

要在日期上设置时区，请查看[此问题和答案](https://stackoverflow.com/questions/2891361/java-how-to-set-timezone-of-a-java-util-date)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T11:49:12.643

这是 XML/XSD dateTime 数据类型格式。使用 javax.xml.datatype.XMLGregorianCalendar

```
 XMLGregorianCalendar gc = DatatypeFactory.newInstance().newXMLGregorianCalendar("2013-04-12T13:38:48+02:00");
    System.out.println(gc); 
```

输出

```
2013-04-12T13:38:48+02:00 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-27T18:44:39.343

如果您使用“z”或“Z”，那么您仍然无法确定您的时区会是什么样子。这取决于您的本地人和 JVM 版本，将选择哪个 ISO8601 版本。

使时区始终采用“+02:00”格式的一种方法是请求它。使用以下日期格式：

```
DateTimeFormatter formatter = 
    new DateTimeFormatterBuilder()
        .appendPattern("yyyy-MM-dd'T'HH:mm:ss")
        .appendOffset("+HH:MM","+00:00")
        .toFormatter(); 
```

并始终与`ZonedDateTime`类型一起使用。它是线程安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-23T19:25:43.813

我一直在寻找完全相同的答案。我必须向后兼容现有的日期格式，就像在示例中一样 - “2013-04-12T13:38:48+02:00”，我的另一个限制是我不能使用任何开源库，除了Java 6 提供了什么。因此，在没有在这里找到解决方案之后，我想出了这个简单的转换技术，这很丑陋，但我发现我把它贴在这里以防有人需要一个快速而肮脏的解决方案。如果有人知道如何做得更好（有我提到的限制），请纠正我。

因此，要以所需格式生成输出：

```
private DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");

public GregorianCalendar stringToCalendar(String v) 
{
    // 22 is an idx of last ':', you can replace with v.lastIndex(':') to be neat  
    String simpleV = v.substring(0, 22).concat(v.substring(23));   

    GregorianCalendar gc = (GregorianCalendar) df.getCalendar();

    gc.setTime(df.parse(simpleV));
    return gc;
}

public String calendarToString(GregorianCalendar v) 
{
    df.setCalendar(v); 

    String out = df.format(v.getTime());

    return out.substring(0, 22).concat(":").concat(out.substring(22)); // read above on '22'
} 
```

就像我说的，这远非完美，但我没有找到更好的东西..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-06T06:53:31.953

有一种简单的方法可以做到这一点。您可以定义格式，如： `String Dtime = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssXXX").format(date);`

这应该这样做。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-12T11:52:34.973

您可以通过包轻松实现`java.util.Calendar`

试试下面的代码

```
 import java.util.Calendar; //Import package

        String month_order[]={"Select...","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"};
        Calendar cal = Calendar.getInstance();
        int month = cal.get(Calendar.MONTH) + 1;
        int dom = cal.get(Calendar.DAY_OF_MONTH);
        int doy=cal.get(Calendar.YEAR);
        System.out.println("Current date: "+month_order[month]);
        System.out.println("Current Month:  "+dom);
        System.out.println("Current year: "+doy); 
```

# java - 如何在 println 的方法中使用返回给我的内容？

> ID：15970465
> 
> 赞同：0
> 
> 时间：2013-04-12T11:42:05.687
> 
> 标签：java

我的代码片段：

```
...
    System.out.println("\t" + "MONTH |" + "\t" + "HIGH | " + "\t" + "LOW |" + "\t" + "AVERAGE |" + "\t" + "RANGE");
    System.out.println("\t" + "______________________________________________");

    main.averageMonthOne(hightemp, lowtemp);

    in1.close();
    out.close();                
}//end of main 

private static double averageMonthOne (int hightemp, int lowtemp)
{
    double avgM = (hightemp + lowtemp)/2;
    System.out.println(avgM);
    return avgM;
} 
```

我希望能够使用我收到的平均值`averageMonthOne`并将其分别放在 println 中的“AVERAGE”一词下。那可能吗？

预期输出：

```
MONTH | HIGH | LOW | AVERAGE | RANGE
_____________________________________
                      30.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:49:34.340

相应地使用`System.out.printf()`和格式化！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:51:43.803

很有可能只需将您的代码更改为如下所示：

```
...
System.out.println("\t" + "MONTH |" + "\t" + "HIGH | " + "\t" + "LOW |" + "\t" + "AVERAGE |" + "\t" + "RANGE");
System.out.println("\t" + "______________________________________________");

double myresult = main.averageMonthOne(hightemp, lowtemp);
System.out.println("\t\t\t\t" + myresult);

in1.close();
out.close(); 
```

}//主程序结束

private static double averageMonthOne (int hightemp, int lowtemp) { double avgM = (hightemp + lowtemp)/2; System.out.println(avgM); 返回平均值；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:54:34.213

如果我在你的位置，我会创建一个字符串数组，你可以在其中放置你得到的数字。例如：

```
try{
    BufferedReader bufferedReader = new BufferedReader(new FileReader("fileName.txt"));
    String[] numbers = new String[5];

    for(int i=0; i<5; i++){     // here you only read 5 values from a file, line by line. If the file is formatted differently you have to read them differently.
       numbers[i] = bufferedReader.readLine();
    }
}catch(IOException io){ ... } 
```

然后将字符串数组格式化为一个字符串行，如下所示：

```
String printedNumbers = "";
for(int i=0; i<numbers; i++){
    printNumbers+="\t";            // every table cell is seperated by a TAB
    if(numbers[i] == null){        // if the cell is empty
        printNumbers +=\t;         //    fill it with a TAB
    }else{ 
        printNumbers +=numbers[i]; // otherwise put the number in
    }
} 
```

对于只有 5 个值，这可能有点多，但是您不必用空白填充“表格单元格”之间的空白。最后打印你的表做：

```
System.out.println("\t" + "MONTH |" + "\t" + "HIGH | " + "\t" + "LOW |" + "\t" + "AVERAGE |" + "\t" + "RANGE");
System.out.println("\t" + "______________________________________________");
System.out.println(printNumbers); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:55:06.510

如果您有固定数量的字符串，则此方法可以填充或为空。准备好一堆变量，如下所示：

```
String avg = "", high = "", low = "", ...; 
```

接下来，用值填充您需要的那些：

```
avg = averageMonthOne(hightemp, lowtemp);
high = ...;
low = ...; 
```

最后，调用 String.format 方法将其全部收集起来：

```
String s = String.format("%s %s %s", avg, high, low);
System.out.println(s); 
```

您可以将上述内容缩短为

```
System.out.format("%s %s %s", avg, high, low); 
```

根据[http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)，有很多用于格式化和间隔输出的选项，只需相应地更改格式方法的第一个参数.

# java - 判断存储在bytearray中的音频文件的音频格式并播放

> ID：15970466
> 
> 赞同：0
> 
> 时间：2013-04-12T11:42:16.790
> 
> 标签：java, audio, encryption

我已经加密了一个音频文件（.wav、.midi、.au、.mid）并且想要解密它并播放音频而不将其存储到磁盘。解密音频文件后我有一个字节数组，现在我必须播放它。

我的问题是如何从这个结果字节数组中**找到音频格式并****播放它**。

```
byteoutput=new byte[(int) fileSize]; 
```

# ajax - 使用 PrimeFaces 选择器的非 JSF 组件的 Ajax 更新

> ID：15970471
> 
> 赞同：1
> 
> 时间：2013-04-12T11:42:25.557
> 
> 标签：ajax, jsf, primefaces

是否可以使用 Primefaces 选择器 - PFS 更新任何 html 片段？考虑一下：

```
<h:outputText id="test" value="#{testBean.date}"/>
<span id="test2"><h:outputText value="#{testBean.date}"/></span>

<p:commandButton value="test" process="@none" update="@(#test)"/>
<p:commandButton value="test2" process="@none" update="@(#test2)"/> 
```

只有第一个按钮正在刷新。这是一个简单的例子——我真正需要的是更新数据表的某些部分，而不是刷新整个组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:48:47.007

不，那是不可能的。更新目标不仅在客户端可以在 HTML DOM 树中通过 获取`document.getElementById()`，而且在服务器端通过[`UIViewRoot#findComponent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponentBase.html#findComponent%28java.lang.String%29)获取，以便 JSF 可以重新生成最终在 ajax 更新期间应用的所需 HTML 输出。

如果您向 JSF 提供纯 HTML 元素的 ID，那么它将在组件树中找不到任何内容来重新生成所需的新 HTML 输出。只需将纯 HTML 元素替换为 JSF 组件即可。

PrimeFaces 选择器最终会转换为 HTML 元素 ID。PrimeFaces 将遍历 jQuery 选择器找到的元素，并`id`在传递给 JSF 之前提取它们的属性。因此，这基本上与此处已经回答的问题相同：[Is it possible to update non-JSF components (plain HTML) with JSF ajax?](https://stackoverflow.com/questions/13009174/jsf-update-with-ajax-non-jsf-things/13011934#13011934) .

# c# - 如何在 WinForm 应用程序的文本框中显示特定的数据库条目

> ID：15970472
> 
> 赞同：1
> 
> 时间：2013-04-12T11:42:27.853
> 
> 标签：c#, sql-server, windows, winforms, forms

更新：谢谢大家，代码不是问题，虽然有关 SQL 注入的信息很有用，但我的问题是我使用的是旧版本的数据库，它没有相应的产品 ID，所以它使用的是第一个产品它可以找到。现在感觉很愚蠢，但感谢您的建议。

我目前有以下代码：

```
SqlConnection connection = new SqlConnection(@"Data Source=(LocalDB)\v11.0 AttachDbFilename=C:\Users\h8005267\Desktop\Practical Project\Build\System4\System\StockControl.mdf;Integrated Security=True;Connect Timeout=30");
connection.Open();
SqlCommand cmd = new SqlCommand("SELECT * FROM Product WHERE ProductID='" + textBox3.Text + "'", connection); 
SqlDataReader re = cmd.ExecuteReader();

if (re.Read())
{
  textBox4.Text = re["ProductTitle"].ToString(); // only fills using first product in table
  textBox5.Text = re["ProductPublisherArtist"].ToString();
  comboBox1.Text = re["ProductType"].ToString();
  textBox6.Text = re["Price"].ToString();
}
else
{
  MessageBox.Show("Please enter a valid item barcode");
}
re.Close();
connection.Close(); 
```

我目前遇到的问题是虽然文本框显示按钮单击的信息，但显示的信息只是数据库中的第一行数据，而不是sql语句中textbox3对应的行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:50:32.290

试试这个。避免按照您的方式动态构建 SQL 语句。您正在向 SQL 注入的风险打开数据库。使用参数 insead。

```
using (var connection = new SqlConnection("connection string"))
{
    connection.Open();
    using (var cmd = new SqlCommand("SELECT * FROM Product WHERE ProductID=@MYVALUE", connection))
    {
        cmd.Parameters.Add("@MYVALUE", SqlDbType.VarChar).Value = textBox3.Text;
        SqlDataReader re = cmd.ExecuteReader();

        if (re.Read())
        {
            textBox4.Text = re["ProductTitle"].ToString(); // only fills using first product in table
            textBox5.Text = re["ProductPublisherArtist"].ToString();
            comboBox1.Text = re["ProductType"].ToString();
            textBox6.Text = re["Price"].ToString();
        }
        else
        {
            MessageBox.Show("Please enter a valid item barcode");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:50:08.117

在该行放一个断点

```
SqlDataReader re = cmd.ExecuteReader(); 
```

并在 textBox3 中输入以下内容

```
'; DROP TABLE Product; SELECT ' 
```

' 将被输入到您的文本框中。现在执行您的方法并仔细阅读生成的 sql 命令...欢迎使用 sql 注入 ;)

@M Patel：谢谢您的评论，您是完全正确的

结果将是以下 SQL

```
SELECT * FROM Product WHERE ProductID=''; DROP TABLE Product; SELECT '' 
```

这将允许恶意用户破坏您的数据库。

为了防止您应该使用像 M Patel 在他的回答中建议的准备好的陈述

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T11:53:06.467

你有 SQL 注入问题`'" + textBox3.Text + "'"`

而且您不必像那样命名您的控件，您必须使用有意义的名称

你可以使用这个代码

```
using (SqlConnection connection = new SqlConnection(@"Data Source=(LocalDB)\v11.0 AttachDbFilename=C:\Users\h8005267\Desktop\Practical Project\Build\System4\System\StockControl.mdf;Integrated Security=True;Connect Timeout=30"))
{
    connection.Open();
    SqlCommand cmd = new SqlCommand("SELECT * FROM Product WHERE ProductID=@ProductID", connection);
    cmd.Parameters.AddWithValue("@ProductID", textBox3.Text);
    SqlDataReader re = cmd.ExecuteReader();
    if (re.Read())
    {
        textBox4.Text = re.GetString(re.GetOrdinal("ProductTitle")); // only fills using first product in table
        textBox5.Text = re.GetString(re.GetOrdinal("ProductPublisherArtist"));
        comboBox1.Text = re.GetString(re.GetOrdinal("ProductType"));
        textBox6.Text = re.GetString(re.GetOrdinal("Price"));
    }
    else
    {
        MessageBox.Show("Please enter a valid item barcode");
    }
    re.Close();
} 
```

# php - 使用 htaccess 从 index.php 重写 URL 到 index.html

> ID：15970473
> 
> 赞同：0
> 
> 时间：2013-04-12T11:42:29.963
> 
> 标签：php, mod-rewrite

我想重写网址

我使用 .htaccess 代码作为

```
RewriteEngine on
RewriteRule ^index.html$ index.php [L] 
```

网址是[http://www.example.com/dashboard/index.php](http://www.example.com/dashboard/index.php)

我想将 url index.php 重写为 index.html

有人可以给我重写的想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:45:21.063

尝试这个

```
RewriteEngine on
RewriteRule ^(.*)\.html$ $1.php [nc] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:46:30.950

取决于您的 .htaccess 文件在哪里。如果它在您的根文件夹中，那么您将拥有

```
 RewriteEngine on
 RewriteRule ^dashboard/index.html$ /dashboard/index.php [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:47:50.783

你可以使用下面的代码

```
RewriteEngine On
RewriteRule ^(.*)\.html$ $1.php [L] 
```

如果您希望它作为重定向而不只是重写来完成，请将 [L] 修改为 [L,R]

# xml - 从 xsl1.0 中的两个 xml 文件中选取值

> ID：15970475
> 
> 赞同：-2
> 
> 时间：2013-04-12T11:42:31.860
> 
> 标签：xml, xslt, xslt-1.0

我有两个 XML 文件，Input1 和 Input2。我必须在输出中生成总和，但从两个输入中选择值。

例如 -

```
<xsl:value-of select="sum(//INVOICE/DOC/EINV[document('input2.xml')/Codes/Description[@code=../ABC][@type = '2']]/BET)"/> 
```

此语句中的路径用于 Input1.xml。在这两者之间，它正在检查文档 Input2.xml，@type 将始终为 '2'，@code(@ in input2.xml) 值将是 /abc(element of input1.xml) 元素值。

Input1.xml -

```
INVOICE
 DOC
  EINV
   ABC
   BET
  EINV
 DOC
INVOICE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:22:33.420

我想你正在寻找这个：

```
 <xsl:param name="file1" select="//INVOICE/DOC/EINV/BET"/>
  <xsl:param name="file2" select="document('input2.xml')/Codes/Description[@code=../ABC][@type = '2']/BET"/>
  <xsl:value-of select="sum($file1,$file2)"/> 
```

# android - 安卓彩信接收器

> ID：15970480
> 
> 赞同：1
> 
> 时间：2013-04-12T11:42:52.870
> 
> 标签：android, mms

我发现默认消息应用程序在收到新的彩信时会显示下载内容的选项，并且在下载内容后会被下载。但是我们如何才能获得图像下载链接并从内部数据库中识别出没有下载 mms 并且需要显示下载选项。我收到以下代码中提到的数据.. 感谢您的关注。

```
 byte[] pushData = intent.getByteArrayExtra("data");
            PduParser parser = new PduParser(pushData);
            GenericPdu pdu = parser.parse();

            if (null == pdu) {
                Log.e(TAG, "Invalid PUSH data");
                return null;
            }

            PduPersister p = PduPersister.getPduPersister(mContext);
            ContentResolver cr = mContext.getContentResolver();
            int type = pdu.getMessageType(); 
```

# facebook-javascript-sdk - 如何设置提要对话框

> ID：15970482
> 
> 赞同：1
> 
> 时间：2013-04-12T11:42:53.840
> 
> 标签：facebook-javascript-sdk, fb.ui

我在设置提要对话框时遇到问题。我已经创建了一个开发者帐户和一个新应用程序，但我找不到有关如何设置它以创建提要对话框的任何信息。FB.ui 脚本本身有很多信息。

目前 FB.ui 脚本返回错误：

API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序错误消息：redirect_uri 不属于应用程序。

我需要在开发者帐户中做什么才能正确设置 Feed 对话框？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:09:32.900

转到[https://developers.facebook.com/apps](https://developers.facebook.com/apps)
单击“编辑应用程序”
选择“使用 Facebook 登录的
网站” 在“站点 URL”字段中输入您的网站 URL。记得添加尾随'/'

这里有两个很好的教程可以帮助您入门：

[使用 Facebook Javascript SDK](http://www.loginworks.com/technical-blogs/404-working-with-facebook-javascript-sdk)

[使用 Facebook Javascript SDK 发布操作](http://www.loginworks.com/technical-blogs/406-publish-actions-with-facebook-javascript-sdk)

# android - 检查服务是否正在运行

> ID：15970484
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:42:56.810
> 
> 标签：android

我想在用户强制关闭应用程序后检查服务是否正在运行。我怎样才能做到这一点。我在广播接收器的 onReceive 中执行此操作。但即使在强制关闭后，它也会显示服务正在运行 Toast。

```
 boolean isServiceRunning = AppSettings.getServiceRunning(context);       
    if (isServiceRunning)
    {
        Toast.makeText(context,"service running", Toast.LENGTH_LONG).show();

    } 
    else 
    {   
        Toast.makeText(context,"service stopped", Toast.LENGTH_LONG).show();        
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:51:28.730

尝试这个：

```
public boolean checkRunningService() {
        ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        for (RunningServiceInfo myService : activityManager
                .getRunningServices(Integer.MAX_VALUE)) {
            if ("com.main.YOUR_SERVICE_NAME".equals(myService.service
                    .getClassName())) {
                return true;
            }
        }
        return false;
    } 
```

希望这可以帮助。

**编辑：-**

您在清单文件中的服务应该是这样的：

```
<service
            android:name="com.main.YOUR_SERVICE_NAME"
            android:enabled="true" /> 
```

# c++ - C 和 C++ 中的优化关键字是否合理？

> ID：15970486
> 
> 赞同：23
> 
> 时间：2013-04-12T11:42:59.533
> 
> 标签：c++, c, performance, optimization, compiler-construction

所以我们都听说过 don't-use-`register`这一行，原因是试图优化编译器是徒劳的。

`register`，据我所知，实际上并没有说明任何关于 CPU 寄存器的内容，只是不能间接引用给定的变量。我会冒险猜测它通常被称为过时，因为编译器可以自动检测到缺少寻址，从而使这种优化变得透明。

但是，如果我们对这个论点持坚定态度，难道不能把它放在 C 中每个优化驱动的关键字上吗？为什么我们使用`inline`和 C99 的`restrict`例子？

我想像别名这样的东西使得推导出一些优化变得**困难**甚至不可能，那么在我们开始冒险进入[足够智能的编译器](http://c2.com/cgi/wiki?SufficientlySmartCompiler)领域之前，界限在哪里？

应该在 C 和 C++ 中在舀入编译器优化信息和假设它知道它在做什么之间划清界限？

**编辑**： Jens Gustedt 指出我将 C 和 C++ 混为一谈是不对的，因为其中两个关键字具有语义差异，而标准 C++ 中不存在一个。我`register`在 C++ 中有一个很好的链接，如果我找到它，我会添加它......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T11:48:18.077

我同意这一点，`register`并且`inline`在这方面有些相似。如果编译器在编译调用站点时可以看到被调用者的主体，它应该能够对内联做出正确的决定。在 C 和 C++中，关键字的使用`inline`更多地与使函数体可见的机制有关，而不是与其他任何事情有关。

`restrict`，然而，是不同的。编译函数时，编译器不知道调用站点将是什么。能够假设没有混叠可以实现原本不可能的优化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T11:49:00.000

`inline`用于在标头中实现非模板化函数然后从多个编译单元包含它的场景。

这确保编译器应该只创建一个函数实例，就好像它是内联的一样，因此您不会收到多重定义符号的链接错误。然而，它并不要求编译器实际内联它。

我认为有 GNU 标志 force-inline 或类似的，但这是一种语言扩展。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-12T11:56:11.600

`register`甚至没有说你不能间接引用变量（至少在 C++ 中）。它说在原始C中，但已被删除。

试图优化编译器是否是愚蠢的差事取决于优化。例如，没有多少编译器会转换`sin(x) * sin(x) + cos(x) * cos(x)`为`1`.

今天，大多数编译器都忽略`register`了 ，也没有人使用它，因为编译器在寄存器分配方面已经变得足够好，可以做得比使用 . 时做得更好`register`。事实上，尊重`register`通常会使生成的代码变慢。or的情况*并非*如此：在这两种情况下，至少在理论上存在技术，这可能导致编译器做得比你做得更好。然而，这种技术并不普遍，并且（至少据我所知）具有非常高的编译时间开销，在某些情况下编译时间会随着程序的大小呈指数增长（这使它们或多或少在大多数实际程序上无法使用——以年为单位的编译时间确实是不可接受的）。`inline``restrict`

至于在哪里画线……它会随着时间而变化。当我第一次开始用 C 编程时，`register`做出了显着的改变，并被广泛使用。今天不。我想随着时间的推移，同样的情况可能会发生，`inline`或者`restrict`——一些实验性编译器已经非常接近了`inline`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-12T11:58:17.747

这是一个诱饵问题，但无论如何我都会深入研究。

编译器在优化普通程序员方面要好得多。有一段时间我在 25MHz 68030 上编程，我从使用中获得了一些优势，`register`因为编译器的优化器太差了。但那是在 1990 年。

我认为`inline`和 一样糟糕`register`。

一般来说，在修改之前先测量。如果你发现你的代码性能太差了，你想使用`register`or `inline`，深呼吸，退后一步，先寻找更好的算法。

最近（即过去 5 年），我浏览了代码库并删除了大量`inline`功能，但性能没有明显的变化。然而，代码大小总是从`inline`方法的删除中受益。对于现代标准 x86 风格的怪物多核奇迹来说，这不是什么大问题，但如果您在嵌入式领域工作，这确实很重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T13:47:11.970

这是一个移动的目标，因为编译器技术正在改进。（嗯，有时它的变化多于改进，但这与使您的优化尝试无效或更糟的效果相同。）

通常，您不应该猜测优化关键字或其他优化技术是否良好。人们必须对计算机的工作方式有相当多的了解，包括您所针对的特定平台以及编译器的工作方式。

所以关于使用各种优化技术的规则是问我是否**知道**编译器不会在这里做得最好？我是否愿意承诺一段时间——编译器会在使用这段代码时保持稳定，当编译器改变这种情况时我是否愿意重写代码？通常，您必须是一位经验丰富且知识渊博的软件工程师，才能知道何时可以比编译器做得更好。如果您可以与编译器开发人员交谈，这也会有所帮助。

这意味着人们不能在这里给你一个有明确指导方针的答案。这取决于您使用的是什么编译器、您的项目是什么、您的资源是什么以及您的目标是什么，等等。

尽管有些人说不要尝试对编译器进行优化，但在软件工程的各个领域，人们都比编译器做得更好，并且为此付出代价是值得的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-12T16:58:46.840

没有提到的一件事是，许多非 x86 编译器在优化方面不如`gcc`其他“现代”C 编译器那么好。

例如，[PIC 的编译器](https://stackoverflow.com/questions/2185221/free-pic-c-compiler)在优化方面绝对糟糕。此外，*（**[CUDA](http://en.wikipedia.org/wiki/CUDA)**编译器）*[的优化](http://www.open64.net/)器虽然好得多，但似乎仍然错过了很多相当简单的优化。`cicc`

对于这些情况，我发现 、 和 等优化提示`register`非常`inline`有用`#pragma unroll`。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-12T19:54:29.543

区别如下：

*   `register`是非常局部的优化（即在一个函数内）。寄存器分配是一个相对解决的问题，通过更智能的编译器和更多的寄存器（主要是前者，但说 x86-64 比 x86 有更多的寄存器，并且都有更大的数量，然后说 8 位处理器）
*   `inline`更难，因为它是过程间优化。然而，由于它涉及相对较小的递归深度和少量过程（如果内联过程太大，则没有内联的意义），它可以安全地留给编译器。
*   `restrict`更难。要完全了解这两个指针没有别名，您需要分析整个程序（包括库、系统、插件等） - 甚至会遇到问题。然而，对于程序员来说，信息更清楚，它是规范的一部分。

考虑非常简单的代码：

```
void my_memcpy(void *dst, const void *src, size_t size) {
    for (size_t i = 0; i < size; i++) {
        ((char *)dst)[i] = ((const char *)str)[i];
    }
} 
```

使这段代码高效有什么好处？是的 -`memcpy`往往非常有用（比如复制 GC）。这段代码可以向量化吗（这里 - 用文字移动 - 说 128b 而不是 8b）？编译器必须推断出这一点，`dst`并且`src`不会以任何方式别名，并且它们指向的区域是独立的。`size`可能取决于用户输入或运行时行为或其他元素，这使得分析实际上不可能 - 与停止问题类似的问题 - 通常我们无法在不运行它的情况下分析所有内容。或者它可能是 C 库的一部分（我假设是共享库）并且由程序调用，因此所有调用站点在编译时甚至都不知道。如果没有这样的分析，程序将在优化时表现出不同的行为。另一方面，程序员可以通过*了解*（甚至更高级别的）设计而不是自下而上的分析来确保它们是不同的对象。

`restrict`也可以是文档的一部分，因为可能是*程序员*以无法处理 2 个别名指针的方式编写了该过程。例如，如果我们想从别名位置复制内存，上面的代码是不正确的。

综上所述 - 足够智能的编译器将*无法*在不了解整个程序的*情况*下推断出`restrict`（除非我们转向理解代码含义的编译器） 。即使那样，它也接近于不可判定性。然而，对于*本地*优化，编译器已经足够聪明了。我猜想，具有整个程序分析的 Sufficiently Smart Compiler 将能够在许多有趣的情况下进行推断。

 **PS。本地我的意思是单一功能。所以局部优化不能假设任何关于参数、全局变量等的东西。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-14T18:57:44.800

根据我在更多地参与 C/C++ 的日子里所看到的，这些只是直接给编译器的命令。编译器可能会尝试*内联*一个函数，即使它没有被直接命令这样做。这实际上取决于编译器，甚至可能会引发一些交叉编译器问题。例如，Visual Studio 提供了不同级别的优化，对应于编译器的不同智能级别。我已经读过所有类函数都是隐式*内联*的，以给编译器一个提示以最小化函数调用开销。在任何情况下，这些指令在您使用不太智能的编译器时非常有用，而在智能情况下，编译器进行一些优化可能非常明显。

此外，请确保这些关键字是安全的。某些编译器优化可能不适用于某些库，例如 OpenGL（我自己也看到过）。因此，在您觉得编译器优化可能有害的情况下，您可以使用这些关键字来确保它按照您想要的方式完成。

现在的 g++ 等编译器对代码的优化非常好。您不妨在其他地方搜索优化，可能在您使用的方法和算法中，或者通过使用 TBB 或 CUDA 使您的代码并行。**

# internet-explorer - IE10 控制台通过命令 document.cookie 看不到 cookie

> ID：15970490
> 
> 赞同：2
> 
> 时间：2013-04-12T11:43:04.623
> 
> 标签：internet-explorer, cookies, session-cookies, internet-explorer-10

IE10 控制台无法通过命令查看 cookie `document.cookie`，但在请求中发送它们！

更新： ![在此处输入图像描述](https://i.stack.imgur.com/T8hPS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:25:58.943

有趣的是，我正在使用 10.0.9200.16519，它似乎对我有用。

![在此处输入图像描述](https://i.stack.imgur.com/qXiIS.png)

# oracle - 在插入新行之前检查表中的重复数据

> ID：15970493
> 
> 赞同：0
> 
> 时间：2013-04-12T11:43:15.430
> 
> 标签：oracle, oracle10g, oracle11g

我有表 USERS，其中包含以下列：user_id、user_name、user_uname、user_pass

我需要检查 user_name 是否存在并返回 -2，如果 user_uname 存在则返回 -3 else insert 并返回新行的插入 id。

我怎样才能在查询中做到这一点？如果使用函数我需要将查询作为参数传递给函数？

有什么方法可以加密函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:06:16.393

为什么你需要加密函数？您的应用程序用户不应直接访问数据库层。如果他们这样做，您需要更改此设置。

首先，您需要在用户名上创建一个[唯一约束](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1642)。我个人会允许存在多个相同的用户名，但这是您的决定：

```
alter table your_table 
  add constraint ui_your_table_username 
      unique (username); 
```

这将确保当您尝试插入重复项时会引发错误。

接下来，您需要创建一个函数来插入数据。您可以使用 INSERT 语句中的[RETURNING INTO](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9014.htm#SQLRF01604)语法来获取您要插入的新 ID。目前，如果用户名已经存在，您要求返回 -2 和 -3 。我只会选择其中之一，因为两者都不可能。

```
create or replace function insert_new_user ( 
    Pusername in varchar2
  , Pother_value in varchar2 
    ) return number is

   l_user_id users.id%type;

begin

   insert into users (id, username, other_column)
   values (user_id_seq.nextval, Pusername, Pother_column)
   returning id into l_user_id;

   return l_user_id;

-- An exception is raised if the unique index is violated.
-- Catch this and use it to return the default error value.
exception when dup_val_on_index then
   return -2;

end;
/ 
```

我假设了以下内容（您没有提供太多信息）：

1.  您的用户 ID 列是一个数字。
2.  你有一个序列。
3.  您的用户表称为 USERS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:00:07.993

伙计，我已经通过使用 **触发器**尝试过。这段代码可以做到，当你对表执行插入操作时，它会检查该表是否包含重复项，如果是，那么它将引发异常并中止操作。触发器创建：

```
create or replace
trigger schema2.ins_tri
before insert  on schema2.users for each row
declare
  usr_ex exception;
  tmp number(30);
begin

    tmp:=schema2.ins_fun('schema2.users',:new.USER_NAME,:new.USER_UNAME );
    if(tmp!=0)
    then
    raise usr_ex;
    else 
      dbms_output.put_line('inserted successfullly');
    end if; 

exception
  when usr_ex then
      raise_application_error
            (-20001
             , 'there is some dupticate values in the table'
             , true); 
end; 
```

返回函数：-

```
create or replace
function         ins_fun(table_name in varchar2,u_name varchar2,name_1 varchar2)return number 
is 
type col_1 is table of number;
c1 col_1;
type col_2 is table of  number;
c2 col_2;
type col_3 is table of  number;
c3 col_3;
begin

  select  tmp bulk collect into c1 from  (select count(*) tmp  from schema2.users u  group by (u.user_name))  where tmp>=2; 
   select  tmp bulk collect into c1 from  (select count(*) tmp  from schema2.users u where u.user_name=u_name  group by (u.user_name))  where tmp>=1;--check new insert value matches form the table
  dbms_output.put_line(c1.count||'c2 count');
  select * bulk collect into c3 from  (select count(*) tmp  from schema2.users u group by (u.user_uname))  where tmp>=2; 
   select * bulk collect into c3 from  (select count(*) tmp  from schema2.users u where u.user_uname=name_1 group by (u.user_uname))  where tmp>=1; 
    dbms_output.put_line(c3.count||'c3 count');
  if(c1.count>=1)
  then
     return -2;
  elsif(c3.count>=1)
  then
     return -3;
  else
     return 0;
  end if ;

end; 
```

如果你愿意，你可以提出不同的异常！基于返回值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:28:04.880

你可以使用 wrap 实用程序包装你的函数。[http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/wrap.htm](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/wrap.htm)

但是当您将代码动态传递给函数时，不需要包装您的代码

# ios - 将 UIImage 和文本发送到服务器

> ID：15970500
> 
> 赞同：1
> 
> 时间：2013-04-12T11:43:29.653
> 
> 标签：ios, http, post, nsurlconnection

我有一个简单的问题 - 我目前正在我的应用程序中编写与向服务器发送数据相关的特定部分。

我试着发短信，成功了。发送图片，成功。我现在要做的是在一个 POST 请求中同时发送它们。我发现我需要使用称为 multipart/form-data 和边界的东西，但我还没有找到关于它的更多信息。

那么如何在一个简单的 POST 请求中同时发送文本和图像呢？以及如何在上传过程中检查错误，之后等等？

谢谢！

我编写的参考代码但发送了 0 个字节的信息：

```
NSData *imageData = UIImageJPEGRepresentation(sendImage, 1.0);
    // setting up the request object now
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:@"http://posttestserver.com/post.php?dir=something"]];
    [request setHTTPMethod:@"POST"];
    NSString *boundary = @"---------------------------54737809831466490885746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"rn--%@rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Disposition: form-data; name=\"userfile\"; filename=\"reportingImage.jpg\"rn" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: application/octet-streamrnrn" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"rn--%@--rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
     [body appendData:[@"Content-Type: text/xml" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[[alertView textFieldAtIndex:0] text] dataUsingEncoding:NSUTF8StringEncoding]];
    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // now lets make the connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(returnString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:46:43.027

这是一个发送文本和图像的工作片段，可选的几个文本，每个文本有几个参数

```
//After dismissing the alert, we get its text (user location and notes) and the picture he took

     NSMutableData *body = [NSMutableData data];
     NSURL *url = [NSURL URLWithString:@"http://posttestserver.com/post.php?dir=Doda"]; //Test server, you can access it online to see the upload
     NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
     [req setHTTPMethod:@"POST"];
     NSString *boundary = @"---------------------------14737809831466499882746641449"; //I have no idea what this is, but without it the code won't work
     NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
     [req setValue:contentType forHTTPHeaderField: @"Content-Type"];

     //Attaching image
     [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
     [body appendData:[@"Content-Disposition: attachment; name=\"imageOfReport\"; filename=\"imageOfReport.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
     [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
     [body appendData:[NSData dataWithData:UIImageJPEGRepresentation(sendImage, 1.0)]]; //Crucial, getting a JPEG version of the image and sending it
     [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

     [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
     [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"report_description\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
     [body appendData:[[[alertView textFieldAtIndex:0] text] dataUsingEncoding:NSUTF8StringEncoding]]; //Crucial, taking the text from the Alert and sending it
     [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
     [req setHTTPBody:body];

     //Below are few lines which can add other parameters and text
     /*        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
     [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"spid\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
     [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
     [req setHTTPBody:body];*/

    NSURLConnection *sendingTheData2 = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES]; //Sent! ;) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:54:39.440

您可能想使用像[AFNetworking](http://github.com/afnetworking/afnetworking)这样的网络库，并节省一些时间:)

# python - 如何使用 HTMLParser 读取内部标签？

> ID：15970501
> 
> 赞同：0
> 
> 时间：2013-04-12T11:43:34.683
> 
> 标签：python, html, python-3.x, html-parsing

在 HTML 文件的某处，我有一个`div`带有这样的内部标签：

```
<div class="mydiv">
    <h3><a href="#">TEXT</a></h3>
</div> 
```

如何`a`使用 Python 中的 HTMLParser 类查找元素内的文本？我想用 HTMLParser 来做，而不是 BeautifulSoup。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T18:39:41.003

这应该有效：

```
"""innerlink.py - print text of e.g. `<div><h3><a>This</a></h3></div>`."""

from html.parser import HTMLParser

class InnerLinkParser(HTMLParser):

    """A parser for HTML with links in h3s in divs."""

    def __init__(self):
        HTMLParser.__init__(self)
        self.stack = []

    def handle_starttag(self, tag, attrs):
        self.stack.append(tag)

    def handle_endtag(self, tag):
        while self.stack:
            item = self.stack.pop()
            if item == tag:
                break
        else:
            raise ValueError("unmatched closing %r tag." % tag)

    def handle_data(self, data):
        if self.stack[-3:] == ["div", "h3", "a"]:
            print(data)

def parse(html):
    """Feed the parser with some HTML."""
    parser = InnerLinkParser()
    parser.feed(html) 
```

用法：

```
>>> from innerlink import parse
>>> with open("fragment.html") as f:
...     parse(f.read())
... 
TEXT 
```

编写该`handle_endtag()`方法是为了应对隐式封闭标签的可能性；你可能需要也可能不需要。

# php - PHP SOAP WSDL 缓存不起作用

> ID：15970505
> 
> 赞同：0
> 
> 时间：2013-04-12T11:43:44.217
> 
> 标签：php, soap, wsdl

我对我设置为保存我的肥皂对象的肥皂 wdl 缓存目录感到困扰。我已经`soap.wsdl_cache_dir="/tmp"`在 php.ini 中设置了。我不知道创建对象后它如何不保存 /tmp 文件夹中的任何文件，它只是在那里保持空白。我也设置`soap.wsdl_cache_enabled=3`并重新启动了 apache 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:52:58.943

问题解决了。在制作新的肥皂对象时提供`cache_wsdl`选项。

```
$client = new SoapClient("https://blahblah.blah?wsdl",array("trace"=>true,'cache_wsdl' => WSDL_CACHE_BOTH)); 
```

# sql - SQL 查询 SUM DATEDIFF MAX

> ID：15970508
> 
> 赞同：2
> 
> 时间：2013-04-12T11:43:45.440
> 
> 标签：sql, group-by, sum, datediff

我对 SQL 查询有疑问。我想计算使用过的应用程序的运行时间。但是在数据库中，日期值被插入不止一次。我只需要 pk_date 列的最大值，并且不需要 starttime 列中的重复条目。

这是 SQL 查询：

```
SELECT DISTINCT Standortname,
DATEPART(YEAR,PK_Date) AS Jahr,
DATEPART(month,PK_Date) AS Monat,
Lizenzname,
COUNT(DISTINCT username) AS AnzahlUser,
SUM(DISTINCT DATEDIFF(minute,starttime ,pk_date))  AS RuntimeMinute,
endtime,
pk_date

FROM BenutzerLizenz,Benutzer,Abteilung,Lizenz,Standort
WHERE 
BenutzerLizenz.PK_ID_user=Benutzer.PK_ID_user
AND BenutzerLizenz.PK_ID_lic=Lizenz.PK_ID_lic
AND PK_ID_standort=FK_ID_standort
AND DATEPART(month,PK_Date) = '04'
AND DATEPART(YEAR,PK_Date) = '2013'
AND Lizenzname = 'iman_1st'
AND Standortname = 'Unterlüß'

GROUP BY
 Standortname,
 DATEPART(YEAR,PK_Date),
 DATEPART(month,PK_Date),
 Lizenzname,
 starttime,
 endtime,
 pk_date 
```

结果如下：

```
... RuntimeMinute   starttime                   pk_date
    339         2013-04-11 11:05:00.0000000 2013-04-11 16:44:37.9650000
    346         2013-04-11 11:05:00.0000000 2013-04-11 16:51:25.4800000
    356         2013-04-11 11:05:00.0000000 2013-04-11 17:01:19.9670000
    475         2013-04-11 10:06:00.0000000 2013-04-11 18:01:15.6620000 
```

上面的前三个运行时来自同一个用户和会话，最后一个来自另一个用户和会话。我只想计算和总结同一开始时间的最后一次运行时间，插入的最大日期 (pk_date) -> 356 + 475 是我想要的值。

在另一个类似的查询中，所有值都被累积（列 starttime、endtime、pk_date 不包括在其中，因此查询为所有用户构建所有运行时值的总和）。我尝试使用 DISTINCT 和 MAX(pk_date) 但它没有按预期工作。我必须使用子查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:41:39.400

我会为此使用`RANK()`函数。

```
SELECT * FROM
(
SELECT DISTINCT Standortname,
DATEPART(YEAR,PK_Date) AS Jahr,
DATEPART(month,PK_Date) AS Monat,
Lizenzname,
COUNT(DISTINCT username) AS AnzahlUser,
SUM(DISTINCT DATEDIFF(minute,starttime ,pk_date))  AS RuntimeMinute,
endtime,
pk_date,
RANK() Over (PARTITION BY username ORDER BY pk_date DESC) As Rank

FROM BenutzerLizenz,Benutzer,Abteilung,Lizenz,Standort
WHERE 
BenutzerLizenz.PK_ID_user=Benutzer.PK_ID_user
AND BenutzerLizenz.PK_ID_lic=Lizenz.PK_ID_lic
AND PK_ID_standort=FK_ID_standort
AND DATEPART(month,PK_Date) = '04'
AND DATEPART(YEAR,PK_Date) = '2013'
AND Lizenzname = 'iman_1st'
AND Standortname = 'Unterlüß'

GROUP BY
 Standortname,
 DATEPART(YEAR,PK_Date),
 DATEPART(month,PK_Date),
 Lizenzname,
 starttime,
 endtime,
 pk_date,
 username
) tmp where Rank=1 
```

这些`RANK()`函数按照 定义的顺序对结果集的每一行进行排序`ORDER BY`。与 配合使用`PARTITION BY`，可以进一步划分数据进行排名。

由于您已经拥有所需的数据，因此您将对结果进行分区`username`并对其进行排名`pk_date`以获得最高的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:12:25.263

听起来您想进行一个查询，只保留每个开始时间和用户/会话组合的 max(pk_date) 。然后将该查询添加到您的 FROM 子句（假设为 adhoc）。然后你输入 WHERE 子句 pk_date = adhoc.pkdate AND username = adhoc.username 等...

简化示例：

```
(SELECT username, startdate, max(pk_date) as pk_date 
FROM <whatever> 
GROUP BY username, startdate) (= <new>) 
```

现在，在您的主要查询中...

```
SELECT ... FROM ...,<new> adhoc 
WHERE adhoc.username = username 
AND adhoc.startdate = startdate 
AND pk_date = adhoc.pk_date ... 
```

这有帮助吗？

# c# - PayPal - 自动处理交易

> ID：15970510
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:43:48.220
> 
> 标签：c#, transactions, paypal

假设我有以下 PayPal URL

```
https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_donations&business=blablabla@gmail.com&item_name=BlaBlaBla&currency_code=EUR&amount=200 
```

如果用户单击 URL，他将被重定向到 PayPal 页面，他必须在其中输入用户名和密码。之后，他将被要求授权交易到 blablabla@gmail.com 商家帐户。

有没有办法使上述自动化？例如，假设我有一个服务器，我将我的 PayPal 用户名和密码以及交易号和商家帐户等其他信息发送到服务器。然后，服务器将使用 PayPal**自动处理交易。**

是否有任何 API 可用于执行此操作？请不要涉及道德问题等。我这样做有我的理由。我知道实际上人们可以登录他们的 PayPal 账户并从那里付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:49:18.043

你看过他们的 API 值得吗？

[https://www.paypal.com/cgi-bin/webscr?cmd=_dcc_hub-outside](https://www.paypal.com/cgi-bin/webscr?cmd=_dcc_hub-outside)

和

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_masspay](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_masspay)

# android - 在运行时更改应用程序文件

> ID：15970513
> 
> 赞同：0
> 
> 时间：2013-04-12T11:43:52.730
> 
> 标签：android

在我的应用程序中，我有一些配置信息存储在`xml`文件中，我想在运行时更新这些信息并存储新的配置`xml`文件。但是我无法将它们保存在`res`目录下或其中，`assets`最好的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:00:02.313

1）你为什么不使用内置`SharedPreferences`？那将是最佳做法。

顺便说一句，Android 已经使用一些 xml 初始化设置：搜索“android 首选项 xml”并查看结果，例如[http://rominirani.com/android-preferences-tutorial/](http://rominirani.com/android-preferences-tutorial/)

2) 你可以将它存储在 assets/ 或 raw/ 中，但你必须自己解压文件

要打印资产列表：

```
 String[] assets = getAssets().list(subdir);
    {
        String list = subdir + " files:";
        for (String asset: assets) {
            list += " ";
            list += asset;
        }
        list += " (total "+assets.length+")";
        Log.d(DEBUGTAG,list);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:55:02.507

下载文件并将其保存到内部存储设备（例如，在您的或其他设备`getFilesDir()`上调用）。要阅读，请使用内部存储上的文件（如果存在），否则回退到使用您与应用程序打包的文件。`Activity``Context`

# python - 通过 API（来自 S3）将大文件发送到 GAE Blobstore

> ID：15970514
> 
> 赞同：1
> 
> 时间：2013-04-12T11:43:55.767
> 
> 标签：python, google-app-engine, amazon-s3, blobstore, filepicker.io

我正在尝试将使用 filepicker.io 存储在 S3 中的大文件（50MB-2GB）发送到 Google App Engine Blobstore（在 Python 中）。我希望在不通过客户端浏览器上的表单的情况下发生这种情况，因为它不符合项目要求（并且经常挂起非常大的文件）。

我尝试了多种解决方案，包括：

*   尝试[使用 urlfetch 将文件加载到 GAE](https://stackoverflow.com/questions/12149315/how-do-i-integrate-filepicker-io-with-google-app-engine-blobstore)（但GAE对请求/响应[有 32MB 的限制）](https://stackoverflow.com/questions/6898736/upload-file-bigger-than-40mb-to-google-app-engine/6899157#6899157)
*   在python中构建一个多部分表单并将其发送到`blobstore.create_upload_url()`（无法通过url传输文件，并且由于32MB限制而无法在脚本中加载它）
*   使用[boto 将文件直接读取到 blobstore 中](https://stackoverflow.com/questions/3948391/is-is-possible-to-read-a-file-from-s3-in-google-app-engine-using-boto)（连接超时，并且从 boto 显示的日志从 GAE`encountered HTTPException exception`触发`CancelledError: The API call logservice.Flush() was explicitly cancelled.`，导致进程崩溃。

我正在努力寻找可行的解决方案。任何关于我如何执行此传输的提示，或如何将 s3 中的文件作为表单附件传递而不首先将其加载到 python 中（即仅指定其 url）将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:11:00.327

BlobstoreUploadHandler 不受 32MB 限制：[https](https://developers.google.com/appengine/docs/python/tools/webapp/blobstorehandlers) ://developers.google.com/appengine/docs/python/tools/webapp/blobstorehandlers 。但是，我不确定这如何适合您的应用程序。如果您可以将文件发布到由 BlobstoreUploadHandler 处理的端点，那么您应该很高兴。

# flash - ActionScript 3.0 类

> ID：15970520
> 
> 赞同：0
> 
> 时间：2013-04-12T11:44:16.307
> 
> 标签：flash, class, actionscript, adobe

我有一个关于动作脚本类的问题。我想知道我是否可以在一个 fla 中拥有多个课程？或者不同帧或场景上的不同类？例如，第二帧/场景上的井字游戏和第三帧或场景上的记忆游戏（需要不同的外部 as. 文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:56:49.897

每个 .fla 只能有一个文档类 - 但您可以拥有任意数量的“普通”类（您可以将其与电影剪辑相关联，但不能与场景相关联）。

如果您想在一个“包”中包含多个游戏，最好的方法是为每个游戏创建单独的 Flash 电影（swf 文件），然后创建一个“主”swf，将每个游戏 swf 文件加载到自身中。

# android - 使用 Android ADT Bundle 在 Titanium 中设置 Android

> ID：15970522
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:44:24.817
> 
> 标签：android, eclipse, titanium, adt

我正在尝试设置 android 环境以使用 Titanium 进行编程。我已经设置了 Titanium 和 Eclipse 附带的 Android ADT Bundle。有没有人设法设置给我一个指南或链接到它可以提供帮助的地方。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:45:11.680

[以下是安装指南。](http://docs.appcelerator.com/titanium/latest/#!/guide/Installation_and_Configuration)

[这是特定于android的指南。](http://docs.appcelerator.com/titanium/latest/#!/guide/Installing_the_Android_SDK)

确保您已确认 android 在您的系统上工作，然后尝试使用钛，我将首先创建一个示例 eclipse / android 项目“Hello, World”。一般来说，这很简单。

# javascript - 如何找到 JS 内存泄漏？

> ID：15970525
> 
> 赞同：62
> 
> 时间：2013-04-12T11:44:32.057
> 
> 标签：javascript, google-chrome

我一直在努力使用 chrome 中的堆分析器，但它非常令人困惑。特别是如果里面有最小化的库。但即使是 DOMElements 视图，可能不会被删除的元素也非常不清楚。

是否有任何提示如何使用 chrome 中的堆转储来查找导致内存泄漏的 JS 代码、无法被 GC 清理的代码......以及即使从 dom 中删除也如何找到乱七八糟的元素？

换句话说，如何正确读取 chrome 中的堆转储？统治者观点？比较？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2017-06-09T09:53:57.423

与大多数答案相比，Chrome 现在提供了更好的工具来查找内存泄漏。

这是使用最近的 Chrome 浏览器查找 javascript 中的内存泄漏：

1.  按**F12**打开开发人员工具并转到**Memory Tab**。

[![Chrome 开发者工具 - 内存选项卡](https://i.stack.imgur.com/rRL0z.png)](https://i.stack.imgur.com/rRL0z.png)

2.  选择要检查泄漏的功能或应用程序的一部分。例如，当一个对话框再次打开和关闭时，它所使用的内存应该被释放。

3.  执行一次您想要检查内存泄漏的操作（例如打开一个对话框），以便可以加载潜在的全局服务。这可以防止故意保留的这些对象显示为泄漏。

4.  现在选择**Record Allocation Timeline**并按**Start**。重复您要检查泄漏的操作几次。因此，例如打开一个对话框，关闭它并重复。当您执行此操作时，Chrome 会使用部分灰色或蓝色条来绘制时间线。通常，您每次在页面上执行操作时都会看到一个条形图。**当先前几次操作迭代的条保持部分蓝色时，通常意味着存在内存泄漏。条形的蓝色部分代表此时已分配的内存，尚未再次释放。**按开发者工具左上角的红点停止录制。

[![记忆时间线](https://i.stack.imgur.com/hx6rb.png)](https://i.stack.imgur.com/hx6rb.png)

5.  当您看到潜在的泄漏时，您必须检查时间线的这一部分以找到源头。选择时间线的一部分，它是您过去操作的几次迭代。Chrome 将显示仍然存在于内存中的对象类型列表。**保留大小**列让您了解仍然使用了多少内存。浏览到其中一种对象类型并选择一个对象。如果你这样做，保留者列表将出现在下面。

[![保持者名单](https://i.stack.imgur.com/casq0.png)](https://i.stack.imgur.com/casq0.png)

6.  保持器列表显示引用所选对象的“父”对象。现在您需要查看保留器和您的代码，以了解内存没有被释放的原因。例如，在图像中，您可以看到类型范围的对象。第二行说范围是“initFormat() 中的上下文”。问题是 initFormat 是一个事件侦听器，在离开对话框后没有解除绑定。

7.  修复代码后，检查问题是否已解决。刷新页面并再次重复步骤 3 至 6。如果您之前从未检查过内存泄漏，那么您发现多个问题的可能性不大。

**附加提示：**

*   有时会有缓存保留部分内存。通常你可以忽略它们。
*   当您`HTMLDivElement`在对象类型列表中看到 或其他 DOM 元素时，请看一下。如果此列表中的对象以红色突出显示，则表示它们不再出现在您的页面中。这意味着它们必须在代码中的某处被引用。您可能忘记取消绑定事件侦听器。
*   [阅读有关一般内存泄漏的信息](https://auth0.com/blog/four-types-of-leaks-in-your-javascript-code-and-how-to-get-rid-of-them/)，以便您可以在代码中更快地识别它们。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-12T11:55:43.380

在 Chrome 开发者工具中，有一个 Timeline - Memory 选项卡：

![在此处输入图像描述](https://i.stack.imgur.com/6zHFc.png)

我们可以观察它占用的内存。

还有 Profiles - Memory，我们可以在其中拍摄快照并查看里面的内容。快照可以相互比较：

![在此处输入图像描述](https://i.stack.imgur.com/EpvmK.png)

大多数时候，它什么也没告诉你。但至少你可以看到哪些对象在堆积，并且可能是泄漏的结构。

另一种方法是在这里使用`'Task Manager'` 关于此的文章：

[http://www.javascriptkit.com/javatutors/closuresleak/](http://www.javascriptkit.com/javatutors/closuresleak/)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-12T11:51:54.870

谷歌为此目的开源了一个工具，[leak-finder-for-javascript](https://code.google.com/p/leak-finder-for-javascript/)。他们还提出了一种所谓的[三快照技术](https://docs.google.com/presentation/d/1wUVmf78gG-ra5aOxvTfYdiLkdGaR9OhXRnOlIcEmu2s/pub?start=false&loop=false&delayms=3000#slide=id.g1d65bdf6_0_0)（另见[本文](http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/)的简要说明）。

[泄漏查找器链接的第一段](https://code.google.com/archive/p/leak-finder-for-javascript/)

> **注意：不再支持 jsleakcheck！它与用于获取堆快照的非官方且不稳定的开发工具协议相冲突。该协议正在开发中，但它不够稳定，因此我可以让 jsleakcheck 与各种 Chrome 版本一起工作。此外，jsleakcheck 用来与开发工具通信的较低级别的兼容性工具 remote_inspector_client.py 已被删除。**

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-07-15T09:53:26.817

我发现这篇文章很有见地：

[http://addyosmani.com/blog/taming-the-unicorn-easing-javascript-memory-profiling-in-devtools/](http://addyosmani.com/blog/taming-the-unicorn-easing-javascript-memory-profiling-in-devtools/)

它确实广泛地涵盖了 chrome 开发人员工具，并很好地解释了当您的应用程序似乎有内存问题时如何处理。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-05T05:36:10.667

引用自[JavaScript Kit](http://www.javascriptkit.com/javatutors/closuresleak/index.shtml)：

> 如果您正在开发客户端可重用脚本对象，您迟早会发现自己发现内存泄漏。您的浏览器很可能会像海绵一样吸走内存，而且您几乎找不到原因，为什么您可爱的 DHTML 导航的响应能力在访问了您网站中的几个页面后会严重下降。
> 
> Microsoft 开发人员 Justin Rogers[在其出色的文章](https://web.archive.org/web/20060617212645/http://msdn.microsoft.com/library/en-us/IETechCol/dnwebgen/ie_leak_patterns.asp)（来自 web.archive.org）中描述了 IE 泄漏模式。
> 
> 在本文中，我们将从稍微不同的角度回顾这些模式，并用图表和内存利用率图来支持它。我们还将介绍几个更微妙的泄漏场景。在我们开始之前，如果您还没有阅读，我强烈建议您阅读该文章。
> 
> ### 为什么内存泄漏？
> 
> 内存泄漏问题不仅限于 Internet Explorer。如果您提供足够的条件，几乎所有浏览器（包括但不限于 Mozilla、Netscape 和 Opera）都会泄漏内存（这并不难，我们很快就会看到）。但是（在我看来，ymmv 等）Internet Explorer 是泄密者之王。
> 
> 不要误会我的意思。我不属于大喊“嘿 IE 有内存泄漏，检查这个新工具 [link-to-tool] 并自己看看”的人群。让我们讨论一下 Internet Explorer 有多糟糕，并掩盖其他浏览器中的所有缺陷”。
> 
> 每个浏览器都有自己的长处和短处。比如 Mozilla 在初始启动时消耗太多内存，不擅长字符串和数组操作；如果你编写了一个复杂得离谱的 DHTML 脚本，它会混淆它的渲染引擎，Opera 可能会崩溃。
> 
> 尽管我们将关注 Internet Explorer 中的内存泄漏情况，但此讨论同样适用于其他浏览器。

[继续阅读...](http://www.javascriptkit.com/javatutors/closuresleak/index.shtml)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-12T11:47:46.653

这是一篇关于如何使用 Google 开发者工具查找内存泄漏的非常好的帖子：http: [//gent.ilcore.com/2011/08/finding-memory-leaks.html](http://gent.ilcore.com/2011/08/finding-memory-leaks.html)

这是另一个很好的网页：http: [//javascript.crockford.com/memory/leak.html](http://javascript.crockford.com/memory/leak.html)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-02-18T23:49:35.937

我没有看到提到`window.performance.memory`的 ，它使您能够在运行时根据内存使用情况进行监控和采取行动。

```
window.performance.memory:

MemoryInfo {
  totalJSHeapSize: 7084834,
  usedJSHeapSize: 6486770,
  jsHeapSizeLimit: 4294705152
} 
```

要获得方便的百分比，请使用以下命令：

```
window.performance.memory.usedJSHeapSize / window.performance.memory.jsHeapSizeLimit 
```

[https://developer.mozilla.org/en-US/docs/Web/API/Window/performance](https://developer.mozilla.org/en-US/docs/Web/API/Window/performance)

# api - 高图表从折线图中删除点

> ID：15970527
> 
> 赞同：27
> 
> 时间：2013-04-12T11:44:38.317
> 
> 标签：api, graph, highcharts

我正在使用高图表来绘制折线图。我在 API 中找不到任何东西来删除行中的点。如果您知道要更改哪些设置以删除这些点，请分享。

[http://gyazo.com/ba33b6a6cc1a3898fee00b737111da4c](http://gyazo.com/ba33b6a6cc1a3898fee00b737111da4c)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-12T11:49:05.307

我认为您需要编辑的是标记：

[http://api.highcharts.com/highcharts/plotOptions.line.marker.enabled](http://api.highcharts.com/highcharts/plotOptions.line.marker.enabled)

您应该能够将其设置为 false 并且将隐藏点。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-12T11:51:22.143

您只需禁用标记，此处演示：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series -启用标记/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-enabled/)

```
chart.plotOptions.line.marker.enabled = false 
```

# html - jquery ajax调用中的语法错误

> ID：15970528
> 
> 赞同：0
> 
> 时间：2013-04-12T11:44:39.977
> 
> 标签：html, jquery

我的**HTML**是这样的

```
<tbody>
    <tr>
        <td ><img src="" alt="close" /></td>
        <td><input type="hidden" name="addproducts" value="141420">141420</td>
        <td class="prd"><strong><a href=""></a></strong></td>
        <td><a rel="prettyPhoto" href=""><img src="" alt="Product"></a></td> 
    </tr>
    <tr>
        <td ><img src="" alt="close" /></td>
        <td><input type="hidden" name="addproducts" value="1213143">1213143</td>
        <td class="prd"><strong><a href=""></a></strong></td>
        <td><a rel="prettyPhoto" href=""><img src="" alt="Product"></a></td> 
    </tr>
    <tr>
        <td ><img src="" alt="close" /></td>
        <td><input type="hidden" name="addproducts" value="242424">242424</td>
        <td class="prd"><strong><a href=""></a></strong></td>
        <td><a rel="prettyPhoto" href=""><img src="" alt="Product"></a></td> 
    </tr>
</tbody> 
```

我想从中选择名称为 addproducts 的所有隐藏输入并添加到 ajax 调用。问题是我无法预测在代码执行之前会有多少元素。我正在尝试制作的**ajax url将是这样的**

```
http://mydomain.com?addproducts=141420&q141420=16&addproducts=X945X2MG&qX945X2MG=1&addproducts=8382355&q8382355=10&addproducts=146353&q146353=3 
```

我在 url 中的特定参数的常用代码将是这样的

```
 ajaxManager.add(({
    type: 'GET', url: '/ajaxhandler', data: { addproducts: X945X2MG,qX945X2MG:1} 
```

但在这里我不能使用它，因为不可预测的参数。我尝试过的任何方式都以语法错误告终。代码是这样的

```
 ajaxManager.add(({
            $(this).parent().parent().find(".antal").find("input:hidden[name='addproducts']").map(function () {
                 return
            type: 'GET', data: {addproducts:this.value,'&q'+$(this).val():$(this).next().val()} 
```

编辑：从 Alnitak 的帖子我试图编辑这个。新代码

```
 var data = $(this).parent().parent().find(".antal")
          .find("input:hidden[name='addproducts']").map(function () {
                 return
               { addproducts: this.value}

                data['q' + $(this).val()] = $(this).next().val();
                   }).get().join(',')

  ajaxManager.add(({
            type: 'GET', data: data 
```

但不幸的是它结束了我的ajax调用是这样的

```
http://mydomain.com?_=1365768440633 
```

我确信我做了一些非常错误的事情。有人能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:55:49.230

您应该使用已知键创建一个对象文字，然后`obj[key]`对变量键使用语法：

```
var data = { 'addproducts[]': [] };

$(this).parent().parent().find(".antal")
       .find("input:hidden[name='addproducts']")
       .each(function () {
            data['addproducts[]'].push(this.value);
            data['q' + this.value] = $(this).next().val();
       });

$.ajax({
    ...,
    data: data
}); 
```

请注意使用`addproducts[]`允许对该特定参数的值*数组进行编码。*请注意，实际上并没有一个定义的标准来传递具有相同`x-www-form-urlencoded`数据键的多个值，但这适用于 PHP。您应该考虑更改添加产品的方式 - 也许是逗号分隔的列表？

# php - 大网址中的禁止响应

> ID：15970529
> 
> 赞同：0
> 
> 时间：2013-04-12T11:44:41.560
> 
> 标签：php, apache, http, apache2, centos

我需要生成一个像这样的大网址：

`/backend.php/Inscription/export/1577,1578,1579,..., 1580 etc....`

但是当 URL 有超过 400 个 ID 时，我得到以下错误：

`You don't have permission to access /backend.php/Inscription/export/1577..... on this server.`

我在服务器上的配置有问题吗？

# jquery - 在跨越标签的范围内换行

> ID：15970532
> 
> 赞同：0
> 
> 时间：2013-04-12T11:44:46.223
> 
> 标签：jquery, string, split

**我需要在单独的跨度中将文本换行。**
我找到了一个（几乎）完全符合我需要的答案......

> [用于包装文本示例的插件](http://pmbennett.net/demos/jquery-finding-lines-of-text.html)

```
$.fn.wrapLines = function (options) {
    var options = $.extend({
        lineWrap: 'span',
        lineClassPrefix: 'wrapliner wrap_line_',
        wordClassPrefix: 'w_line_',
        index: 0,
        offsetTop: 0,
        offsetLeft: 0
    }, options);
    return this.each(function () {
        options.index = 0;
        options.offset = 0;
        var parentElm = $(this);
        var elmText = $(parentElm).text();
        $(parentElm).html(function (ind, htm) {
            var $repText = '<' + options.lineWrap + '>' + elmText.replace(/\s+/g, ' </' + options.lineWrap + '> <' + options.lineWrap + '>');
            $repText = $repText + '</' + options.lineWrap + '>';
            return $repText;
        });
        $(options.lineWrap, parentElm).each(function () {
            var spanOffset = $(this).offset();
            if (spanOffset.top > options.offsetTop) {
                options.offsetTop = spanOffset.top;
                options.index++;
            }
            $(this).addClass(options.wordClassPrefix + options.index);
        });

        if ($.browser.msie && ($.browser.version == 7 || $.browser.version == 8)) {
            for (var x = 1; x <= options.index; x++) {
                var $spans = $('.' + options.wordClassPrefix + x);
                $spans
                .eq($spans.length - 1)
                .removeClass(options.wordClassPrefix + x)
                .addClass(options.wordClassPrefix + (x + 1))
            }
        }
        for (var x = 1; x <= options.index; x++) {
            $('.' + options.wordClassPrefix + x, parentElm)
            .wrapAll('<' + options.lineWrap + ' class="' + options.lineClassPrefix + x + '" />')
            .append("");
            var innerText = $('.' + options.lineClassPrefix + x, parentElm).text();
            $('.' + options.lineClassPrefix + x, parentElm).html(function () {
                return innerText;
            });
        }
    });
}; 
```

然而，我想保留标签。

我尝试更改`.text`to`.html`并调整正则表达式，但似乎找不到答案。...我不是正则表达式专家

### 也许有人可以帮助我。

这是我当前实现的一个小提琴，它只获取文本。

> [只使用文本 jsFiddle](http://jsfiddle.net/pixelass/jpvKQ/1/)

这是一个保留标签的小提琴，但没有正确包装标签之前的文本

> [在标签 jsFiddle 之前不换行](http://jsfiddle.net/pixelass/jpvKQ/2/)

这是我发现的另一个例子。它完美地包装了单词，但不换行

> [换行保留标签jsFiddle的单词](http://jsfiddle.net/5wabK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:17:03.137

所以我终于找到了正确的模式。

> > [工作在 jsFiddle](http://jsfiddle.net/pixelass/jpvKQ/4/)

这是我使用的模式`/(<\s*.*?[^>]*>(.*?)<\s*\s*.*?>)|(\s+)/ig`

```
// returns all spaces or tags with their content
.replace(/(<\s*.*?[^>]*>(.*?)<\s*\s*.*?>)|(\s+)/ig, '$1') 
```

这仍然不是完美的，因为它不允许在子标签内换行，但出于我的特定原因，它可以满足我的需求。

也许有人可以使用它。

仍然期待其他实现。

# sql - PL/SQL 包和包体

> ID：15970535
> 
> 赞同：0
> 
> 时间：2013-04-12T11:44:49.473
> 
> 标签：sql, database, oracle, plsql

我在包体内创建了一个函数，用于计算客户数据库中当前客户的数量，并创建了一个创建客户的函数。但我不确定我需要在包装本身里面放什么。这是包体内的代码。

```
 FUNCTION count_customer
 RETURN NUMBER is
 total NUMBER;
 BEGIN
 SELECT COUNT(*) into total FROM customer;
 RETURN (total);
 END;

FUNCTION CREATE_CUSTOMER(        
       Country IN VARCHAR2
      ,First_Name IN VARCHAR2
      ,Last_Name IN VARCHAR2
      ,Birth_Date IN VARCHAR2
      ,Customer_Type IN VARCHAR2
      ,Address IN VARCHAR2
) return VARCHAR2 IS
  new_customer_id VARCHAR2(8);
BEGIN
SELECT custid_seq.NEXTVAL
INTO new_customer_id
FROM DUAL;
INSERT INTO customer (Customer_id, Country, First_Name, Last_name, Birth_date, Customer_Type, Address)
VALUES (new_customer_id, Country, First_Name, Last_name, Birth_date, Customer_Type, Address);
total_customers := total_customers + 1;
RETURN (new_customer_id);
end; 
```

然后稍后在包体中我有这个来计算新的计数。

```
BEGIN
total_customers := count_customer();
END; 
```

我遇到的问题是在实际包装中放入什么。我已经让创建客户在包内工作，这只是客户数量我遇到问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:07:18.423

您需要声明您希望在包外部可以访问的任何过程或函数。默认情况下它们是私有的，这意味着它们只能在同一个包中调用。

要公开这两个功能：

```
CREATE PACKAGE my_package AS
    FUNCTION count_customer
     RETURN NUMBER;

    FUNCTION CREATE_CUSTOMER(        
       Country IN VARCHAR2
      ,First_Name IN VARCHAR2
      ,Last_Name IN VARCHAR2
      ,Birth_Date IN VARCHAR2
      ,Customer_Type IN VARCHAR2
      ,Address IN VARCHAR2
    ) return VARCHAR2;
END my_package;

CREATE PACKAGE BODY ... 
```

[文档中](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/packages.htm#i2412)有更多内容。

不过，从你所拥有的情况来看，我怀疑你并不想`count_customers()`被曝光。您需要一个单独的公共函数来返回`total_customers`. 虽然这假设所有插入和删除总是通过包，否则计数将失步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:06:10.983

将要从“外部”访问的任何函数或过程的声明性部分放入，例如：

```
FUNCTION count_customer RETURN NUMBER; 
```

# regex - 使用 sed 用文件替换字符串，而不使用两个 sed 命令？

> ID：15970540
> 
> 赞同：1
> 
> 时间：2013-04-12T11:45:03.287
> 
> 标签：regex, bash, shell, sed, posix

在自动化许可证标头的过程中，我有一个占位符：`/* @@LICENSE_HEADER@@ */`，我可以将其替换为`license`具有以下名称的文件：

```
sh-3.2$ sed -e $'/\/\* @@LICENSE_HEADER@@ \*\//{r license\n}' \
-e $'/\/\* @@LICENSE_HEADER@@ \*\//d' file.c 
```

我是从其他来源拼凑起来的。是否可以*替换*字符串，而不是发出第二个命令来删除字符串出现的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:25:55.060

尝试`sed -e $'/\/\* @@LICENSE_HEADER@@ \*\//{r license\n;d;}' file.c`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:17:04.143

Sed 是一种用于编辑的编程语言，因此您可以每行使用多个命令。

顺便说一句，我建议您将许可证字符串更改为不包含任何特殊正则表达式字符的内容。在这里，我刚刚做到了`@@@LICENSE NUMBER@@@`，所以我不必一直转义正则表达式字符。毕竟，它是**你的**字符串，所以你可以随心所欲地制作它：

```
sed  '/@@@LICENSE NUMBER@@@/ {
r license.txt
d
}' file.c 
```

# android - Android MediaPlayer 无法在三星 Galaxy S2 上运行

> ID：15970541
> 
> 赞同：0
> 
> 时间：2013-04-12T11:45:07.687
> 
> 标签：android, streaming, media-player, datasource, galaxy

我正在开发一个流媒体播放器，我有 2 个测试设备：

1) 三星 Galaxy y (s5360) 安卓版本 2.3.5

2) 三星 Galaxy S2 (i9100g) 安卓版本 2.3.4

MediaPlayer 在“Galaxy y”上运行得很好，但是当我尝试用“Galaxy S2”运行它时，它给了我这个错误：

```
setdatasource outside path in jni is �x@ 
```

然后它给出了这个错误

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp.MainActivity}: java.lang.NullPointerException 
```

这是来自 MediaPlayer 的代码：

```
**
  package com.adventure.agadir;

  import android.media.MediaMetadataRetriever;
  import android.media.MediaPlayer;
  import android.os.Bundle;
  import android.app.Activity;
  import android.content.Intent;
  import android.view.KeyEvent;
  import android.view.Menu;
  import android.view.View;
  import android.view.View.OnClickListener;
  import android.widget.ImageView;
  import android.widget.TextView;

  public class MainActivity extends Activity {

private ImageView bannerView;
private int[] pub = {R.drawable.banner, R.drawable.pubnautic, R.drawable.pubquad};
private int i = 0;

private ImageView play;
private ImageView pause;
private ImageView stop;
private TextView title;
private MediaPlayer mediaPlayer;
private MediaMetadataRetriever retriever;
private String url = "http://support.k-designed.net/test-z/music/Accordossie.mp3";

private ImageView exit;

private ImageView wish;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    bannerView = (ImageView) findViewById(R.id.banner);

    play = (ImageView) findViewById(R.id.play);
    pause = (ImageView) findViewById(R.id.pause);
    stop = (ImageView) findViewById(R.id.stop);
    exit = (ImageView) findViewById(R.id.exit);
    title = (TextView) findViewById(R.id.title);

    retriever = new MediaMetadataRetriever();
    mediaPlayer = new MediaPlayer();

    wish = (ImageView) findViewById(R.id.wish);

    try {
        mediaPlayer.setDataSource(url);
        retriever.setDataSource(url);
        mediaPlayer.prepare();
    } catch (Exception e) {
        e.printStackTrace();
    }

    play.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            try {
                mediaPlayer.start();
                String out =  "Song: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE) + " \nSinger: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ARTIST);
                title.setText(out);
                play.setVisibility(ImageView.GONE);
                pause.setVisibility(ImageView.VISIBLE);

            } catch(Exception e) {
                e.printStackTrace();
            }
        }
    });

    pause.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            pause.setVisibility(ImageView.GONE);
            play.setVisibility(ImageView.VISIBLE);
            mediaPlayer.pause();
        }
    });

    stop.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            pause.setVisibility(ImageView.GONE);
            play.setVisibility(ImageView.VISIBLE);
            mediaPlayer.stop();
            mediaPlayer = null;
            retriever.release();
            retriever = new MediaMetadataRetriever();
            mediaPlayer = new MediaPlayer();
            try {
                mediaPlayer.setDataSource(url);
                retriever.setDataSource(url);
                mediaPlayer.prepare();
            } catch (Exception e) {
                e.printStackTrace();
            } 
        }
    });

    wish.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent wishIntent = new Intent(MainActivity.this, Wish.class);
            startActivity(wishIntent);

        }
    });

    exit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mediaPlayer.stop();
            onBackPressed();
        }
    });

    Runnable r = new Runnable() {

        @Override
        public void run() {
            bannerView.setImageResource(pub[i]);
            i++;
            if(i >= pub.length) {
                i = 0;
            }
            bannerView.postDelayed(this, 3000);
        }
    }; 
    bannerView.postDelayed(r, 3000);

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

 } 
```

**

谢谢你的帮助！

PS：这是Logcat：

```
04-12 15:05:03.023: E/MediaPlayer-JNI(4377): setDataSource: outside path in JNI is �x@
04-12 15:05:06.734: E/AndroidRuntime(4377): FATAL EXCEPTION: main
04-12 15:05:06.734: E/AndroidRuntime(4377): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.adventure.agadir/com.adventure.agadir.MainActivity}: java.lang.NullPointerException
04-12 15:05:06.734: E/AndroidRuntime(4377):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at android.os.Looper.loop(Looper.java:130)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at android.app.ActivityThread.main(ActivityThread.java:3691)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at java.lang.reflect.Method.invoke(Method.java:507)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at dalvik.system.NativeStart.main(Native Method)
04-12 15:05:06.734: E/AndroidRuntime(4377): Caused by: java.lang.NullPointerException
04-12 15:05:06.734: E/AndroidRuntime(4377):     at com.adventure.agadir.MainActivity.onCreate(MainActivity.java:76)
04-12 15:05:06.734: E/AndroidRuntime(4377):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-12 15:05:06.734: E/AndroidRuntime(4377):     atandroid.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-12 15:05:06.734: E/AndroidRuntime(4377):     ... 11 more 
```

# json - 如何在 extjs4 的网格中显示关联的 json 数据？

> ID：15970546
> 
> 赞同：1
> 
> 时间：2013-04-12T11:45:26.083
> 
> 标签：json, extjs, extjs4.1, extjs-mvc

我在 extjs4 mvc 中工作，我遇到了一个问题。其实我想在 extjs4 的网格中显示关联的 json 数据。我尝试并搜索了很多，但尚未解决问题。

这是我的一些代码

1.  我的视图文件：

    ```
    Ext.define('AM.view.user.List' ,{
        extend: 'Ext.grid.Panel',
        alias : 'widget.userlist',
        title : 'All Users',
        store: 'Users',
        columns: [
            {header: 'Name',  dataIndex: 'name',  flex: 1},
            {header: 'Email', dataIndex: 'email', flex: 1},
            {header:'title',dataIndex:'title',flex:1}       //I tried 
        ]
     }); 
    ```

2.  控制器文件：

    ```
    Ext.define('AM.controller.Users', {
        extend: 'Ext.app.Controller',
        stores: ['Users'],
        models: ['User','Book'],
        views: ['user.Edit', 'user.List'],
        refs: [{
            ref: 'usersPanel',
            selector: 'panel'
        }],
        init: function() {

         this.control({
                 'viewport > userlist dataview': {
                     itemdblclick: this.editUser
                 },
                 'useredit button[action=save]': {
                     click: this.updateUser
                 }
             });

        }
    }); 
    ```

3.  用户模型文件：

    ```
     Ext.define('AM.model.User', {
        extend: 'Ext.data.Model',
    fields: ['id', 'name', 'email'],
    hasMany: {
        model: 'AM.model.Book',
        //model: 'Book', 
        foreignKey: 'userId', 
        name: 'books'
    },
    proxy: {
        type: 'ajax',
        api: {
            read: 'data/users.json',
            update: 'data/updateUsers.json'
        },
        reader: {
            type: 'json',
            root: 'users',
            successProperty: 'success'
        }
    }
    }); 
    ```

4.  用户存储文件：--

    ```
    Ext.define('AM.store.Users', {
       extend: 'Ext.data.Store',
       model: 'AM.model.User',
       autoLoad: true
    }); 
    ```

5.  图书模型文件：

    ```
    Ext.define('AM.model.Book',{
        extend: 'Ext.data.Model',
        fields: [
            {name: 'id', type: 'int'},
            {name: 'title', type: 'string'}, //,mapping:'record[0].title'    not working
            {name: 'userId', type: 'int'}
        ]     
    }); 
    ```

6.  .json 文件：

    ```
    {
    "success": "true",
    "users": [
        {
            "id": "1",
            "name": "shilpa",
            "email": "shilpa@sencha.com",
            "books": [
                {
                    "id": "10",
                    "title": "c++",
                    "userId": "1"
                }
            ]
        }
    ]
    } 
    ```

7.  这是屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/lsuJW.png)

请给我一些建议以在网格中显示相关数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:50:39.113

您可以访问列渲染器中的所有书籍并构造您需要的字符串。它会是这样的：

```
{
    text: 'Books',
    renderer: function (val, meta, record) {
        var books = '';
        record.books().each(function(bookRecord, index, count) {
            books = books + bookRecord.get('title') + ',';
        });
        return books;
    }
} 
```

[http://jsfiddle.net/alexrom7/YQXC8/1/](http://jsfiddle.net/alexrom7/YQXC8/1/)

# c# - 如果也有 DataTextValueField，asp.net 下拉列表不显示 DataTextField

> ID：15970548
> 
> 赞同：0
> 
> 时间：2013-04-12T11:45:30.010
> 
> 标签：c#, asp.net, drop-down-menu, datatextfield

我`DataValueField`的. `DataTextField`_ `DropDownList`数据来自 a `DataSet`，我希望将我`dropdownlist`的文本字段显示`Dataset`为预选文本。由 a 中的`Dataset`数据填充`mysql table`，包含“ `id`”和“ `text`”。`DropDownList`代码是：

```
<asp:DropDownList runat="server" DataValueField="id" 
DataTextField="text" ID="statusList" CssClass="viewItemRight" 
AutoPostBack="true"></asp:DropDownList> 
```

如果没有`DataValueField`-Tag 则`DropDownList`正确显示 my 中的文本值作为 my`DataSet`中的预选文本`DropDownList`。但是，如果我`DataValueField`在.`DataTextField``DropDownList`

数据的代码是：

```
//load statusList
            cmd = new MySqlCommand();
            cmd.CommandText = "SELECT * FROM statuslist WHERE active = '1' ORDER BY sorting ASC";
            cmd.Connection = con;
            sda = new MySqlDataAdapter(cmd);
            ds = new DataSet();
            sda.Fill(ds);
            statusList.DataSource = ds;
            statusList.DataBind();
            statusList.Items.Insert(0, " "); 
```

如何同时使用 the`DataValueField`和 the `DataTextField`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:03:50.333

尝试这样的事情

代码：

```
DataTable dt = populatedd();
   statusList.DataSource = dt;
   statusList.DataTextField = "name";
   statusList.DataValueField = "id";
   statusList.DataBind();

    public DataTable populatedd()
    {
        string myQuery = "select id,name from yourtable order by name";
        SqlDataAdapter dap = new SqlDataAdapter(myQuery, con);
        DataSet ds = new DataSet();
        dap.Fill(ds);
        return ds.Tables[0];
    } 
```

标记

```
<asp:DropDownList runat="server" ID="statusList" CssClass="viewItemRight" 
AutoPostBack="true"></asp:DropDownList> 
```

# javascript - 在 JavaScript 中传递数组 HTML 元素

> ID：15970550
> 
> 赞同：2
> 
> 时间：2013-04-12T11:45:31.860
> 
> 标签：javascript, jquery

我有一系列复选框，如下所示，

```
<input type="checkbox" value="1" id="a_r_id[1]" name="a_r_id[1]">
<input type="checkbox" value="1" id="a_r_id[2]" name="a_r_id[2]">
<input type="checkbox" value="1" id="a_r_id[3]" name="a_r_id[3]">
<input type="checkbox" value="1" id="a_r_id[4]" name="a_r_id[4]"> 
```

在我的页面中......我只想通过 JavaScript（jQuery AJAX）提交选中的一个......我该怎么做？

编辑：

实际上，我想在选中的复选框上获取所有数组键，以便我可以通过 ajax 发布它。像“1,4”这样的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:47:41.660

```
var keys = [],
    keystring;
$('input[name^="a_r_id"]:checked').each(function () {
    keys.push($(this).attr('name').replace(/a_r_id\[(\d+)\]/, '$1'));
});
keystring = keys.join(); 
```

当然，有更好的方法可以做到这一点，但这回答了你提出的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:05:26.790

你想要的方法似乎有点倒退；浏览器将只提交选中的复选框，但这里是：

```
var re = /\[(\d+)\]$/,
    numbers = [];

$('input[name^="a_r_id\\["]:checked').each(function() {
    numbers.push(+this.name.match(re)[1]);
});

console.log(numbers.join(',')); 
```

它选择所有名称以“a_r_id[”开头的复选框。然后，使用正则表达式提取方括号之间的数字部分并添加到值列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:55:46.647

最后，我为我上面的问题找到了答案。我就在这里写下来。

问题：如何从数组 HTML 元素中获取“键”？（在我的情况下，只选中我想要的复选框）

我的答案代码是这样的：

```
//first, i get every checked checkbox using jQuery selector,
//as mentioned by DerekHenderson.
var list_agent = $('input[name^="a_r_id"]:checked');
var l_c_agent = new Array();
//then, i create a loop to loop each object returned.
for(var i=0;i<list_agent.length;i++){
    //after that, i'm using Regular Expression ( match() ) on every returned object id and throw it into some array.
    l_c_agent[i] = list_agent[i].id.match(/[0-9]+/);
}
//finally, i join the array using javascript join() method so that i can pass it using jQuery AJAX as a string to my controller and process it.
var clean_agent_list = l_c_agent.join();
var add_url = 'test.php';
$.ajax({
    url: add_url,
    type: "GET",
    data : { 'list_agent' : clean_agent_list },
    success: function(data_return) {
        //alert(data_return);
    }
}); 
```

输出将是这样的（如果使用我上面的示例问题并且我们只检查 id 为 1,3 和 4 的元素）

```
1,3,4 
```

如果有人有更好的代码，请写在这里，以便我们讨论哪个更好地解决我的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T11:53:52.737

单选按钮似乎在这里更适用，而不是复选框试试这个：

```
<input type="radio" name="radiogroup" value="1" id="a_r_id[1]" name="a_r_id[1]">
<input type="radio" name="radiogroup" value="2" id="a_r_id[2]" name="a_r_id[2]">
<input type="radio" name="radiogroup" value="3" id="a_r_id[3]" name="a_r_id[3]"> 
```

您可以使用

```
$("input:radio[name=radiogroup]").click(function() {
var value = $(this).val();
//
do something with var
//
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T11:47:10.043

我想你想做这样的事情

```
<input type="checkbox" value="1" id="a_r_id_1" name="a_r_id[]">
<input type="checkbox" value="2" id="a_r_id_2" name="a_r_id[]">
<input type="checkbox" value="3" id="a_r_id_3" name="a_r_id[]">
<input type="checkbox" value="4" id="a_r_id_4" name="a_r_id[]"> 
```

# grep - 如何使用正则表达式提取数据？

> ID：15970551
> 
> 赞同：0
> 
> 时间：2013-04-12T11:45:35.290
> 
> 标签：grep

> **crawl-66-249-64-13.hero.com** - - [ **17/Oct/2004:04:40:15** +0100] "GET / **rubbish.txt** HTTP/1.0" **200 25** "-" "Hero/2.1 ( + [http://www.Hero.com/rub.html](http://www.Hero.com/rub.html) )"

粗体部分是我要提取的部分

我目前有

```
"^(.*) - .* \[" 
```

我在 grep 中使用正则表达式有人有什么想法吗？我正在使用 bash 脚本，我知道 awk 是一种很好的方法，但我希望它在一个表格中，而不仅仅是打印

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:22:21.950

```
#!/bin/sh
var='crawl-66-249-64-13.hero.com - - [17/Oct/2004:04:40:15 +0100] "GET /rubbish.txt HTTP/1.0" 200 25 "-" "Hero/2.1 (+http://www.Hero.com/rub.html)"'
echo "${var}" | \
    sed -e 's/^\([-a-zA-Z0-9.]*\)\( - - \[\)\([A-Za-z0-9\/:]*\)\(.*GET \/\)\([A-Za-z0-9.]*\)\(.*" \)\([0-9]* [0-9]*\)\( .*\)/\1\t\3\t\5\t\7/g' 
```

不漂亮但有效:)

```
Output: crawl-66-249-64-13.hero.com 17/Oct/2004:04:40:15    rubbish.txt 200 25 
```

基本上你必须把它分解成你想要的块，然后只输出你想要的。sed 命令中的“\1”将显示第一个匹配的部分。\t 是在它们之间添加一个选项卡。更改为您想要的任何内容。您想匹配 8 个块中的项目。这就是输出为 \1\3\5\7 的原因

# java - 如何在同一个项目中为两个不同的测试套件管理 POM Surefire 插件

> ID：15970565
> 
> 赞同：1
> 
> 时间：2013-04-12T11:46:40.293
> 
> 标签：java, junit

我正在使用带有 surefire 插件的 Maven 来运行我的测试。我有几个不同的测试，并且为了运行所有我使用相同的 POM。目前一切正常，但现在我有两个不同的属性文件来获取我的测试用例的一些条目，所以我想为这两个不同的属性一个接一个地运行所有这些测试用例。我的意思是我想为它使用两个不同的测试套件，那么我该如何管理 POM 呢？任何帮助将不胜感激..！！！

使用 - JDK 1.6 和 Maven 3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:02:41.953

如果您可以一个接一个地启动两个 Maven 构建，那么请尝试以下操作：

 `````
 <execution>
                            <id>integration-test</id>
                            <phase>integration-test</phase>
                            <goals>
                                <goal>integration-test</goal>
                                <goal>verify</goal>
                            </goals>
                            <configuration>
                                <excludes>
                                       <exclude>**/test/**${dontUse}.properties</exclude>
                                </excludes>
                                <includes>
                                    <include>**/test/**${use}.properties</include>
                                </includes>
                            </configuration>
                        </execution> 
````  `并将 dontUse 和 use 作为参数传递给 maven。或者您可以定义两个配置文件——一个包含第一个，一个包含另一个属性文件——然后使用这两个配置文件开始构建。编辑：使用一个类加载属性文件，您可以在其中检查文件是否存在。无论是第一个还是第二个。像这样的东西：

 `````
public Properties load() {
    Properties prop = new Properties();
    try {
        InputStream in;
        in = getClass().getResourceAsStream("first.properties");
        if (in == null)
            in = getClass().getResourceAsStream("second.properties");
        prop.load(in);
        in.close();
        return prop;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return prop;
} 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-11T00:10:11.113

为什么不使用标准：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14.1</version>
            <configuration>
                <suiteXmlFiles>
                    <suiteXmlFile>suite1.xml</suiteXmlFile>
                    <suiteXmlFile>suite2.xml</suiteXmlFile>
                </suiteXmlFiles>
            </configuration>
        </plugin> 
```````

# java - 如何从新线程中取出变量？

> ID：15970573
> 
> 赞同：0
> 
> 时间：2013-04-12T11:47:09.017
> 
> 标签：java, android, json, multithreading

如何从使用以下命令创建的新线程中获取变量：

```
public class ParseJson 
{
    public static String parsejson(String strHttpGet)
    {
        Thread thread = new Thread(new Runnable()
        {
            public String run(String strHttpGet)
            {
                String decodeJson = "someJson";
                return decodeJson;
            }
        });
            thread.start();
    }
} 
```

我的意思是如何将解码的 json 取回给我的函数 parseJson 并将其返回给我的函数调用`String decodedJson = ParseJson.parseJson(strHttpGet);`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:49:18.597

您不能从Java 中的 a*返回值。*`Thread`实际上，[`run()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#run())没有返回类型。

您可以使用`Object`将保存结果的共享自定义。将其声明为`final`，以便您可以在匿名子类中访问它（这相当于传递对子类的引用），并在工作完成后对其调用 setter。

```
public class ParseJson {
    public static String parsejson(final String strHttpGet) {
        final StringHolder ob = new MyObject();
        Thread thread = new Thread() {
            public String run() {
                String decodeJson = "someJson";
                ob.setResult(decodeJson);
            }
        };
        thread.start();
    }
    private static class StringHolder (){
        private String result;
        public String getResult() { return result; }
        public void setResult(String r) { result = r; }
    }
} 
```

我不确定我是否理解您为什么说*将解码后的 json 返回给我的函数 parseJson 并将其返回给我的函数调用*。你的意思是你会在那个函数中等待直到`Thread`完成？如果这就是你想要的（同样，为什么要开始一个`Thread`？），你可以使用[`Thread.join()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join()).

尽管如果您想在`Thread`完成时收到通知，您确实应该考虑另一种选择。Neil 和 Waqas 给出了[很好的](https://stackoverflow.com/a/15970652/851811) [方法](https://stackoverflow.com/a/15970858/851811)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:59:41.553

在您已将此问题标记为的 android 中，在这种情况下使用 AsyncTask 会更简单，因为当您覆盖该`onPostEXecute`方法时，您可以放入各种东西：

*   更新用户界面
*   发送意图和消息
*   如果在其中定义了 AsyncTask 类，则访问父类的变量。

    ```
    class MyClass {
        Button b;
        boolean flag = false;
        // Stuff

        class MyAsyncClass extends AsyncTask {
            // All the stuff, core work in doInBackground

            @Override
            void onPostExecute(/*vars*/) {
                b.setText("Done");
                flag = true;
            }
        }
    } 
    ```

*   使用 AsyncTask 的一般原则：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

*   教程：[http ://samir-mangroliya.blogspot.co.uk/p/android-asynctask-example.html](http://samir-mangroliya.blogspot.co.uk/p/android-asynctask-example.html)
*   教程：[http ://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:50:53.963

您甚至可以[**`Observer/Observable`**](http://www.javaworld.com/jw-10-1996/jw-10-howto.html)为此使用模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:23:05.753

你可以使用[未来](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html "未来")

```
public class Json {
    private static final ExecutorService executor = Executors.newCachedThreadPool();

    public static String parse(final String strHttpGet)
            throws TimeoutException, InterruptedException, ExecutionException {
        Future<String> jsonTask = executor.submit(new Callable<String>() {
                    @Override
                    public String call() throws Exception {
                        String decodeJson = decodeJson(strHttpGet);
                        return decodeJson;
                    }

                    private String decodeJson(String strHttpGet) {
                        // TODO do actual parsing
                        return null;
                    }
                });
        // Allow the parsing to take one second
        return jsonTask.get(1, TimeUnit.SECONDS);
    }
} 
```

# string - 将字符串解析为 C# DateTime 对象

> ID：15970575
> 
> 赞同：0
> 
> 时间：2013-04-12T11:47:12.860
> 
> 标签：string, parsing, c#-4.0, datetime

在我正在解析的 XML 中，我有以下内容：

```
<event>
    <book>Felicity Fly</book>
    <author>Christina Gabbitas</author>
    <bookImgUrl>http://www.whsmith.co.uk/Images/Products\957\255\9780957255203_t_f.jpg</bookImgUrl>
    <info>Christina Gabbitas will be signing copies of her new book, Felicity Fly. Books should be bought from WHSmith. Proof of purchase may be necessary</info>
    <date>20 Apr 2013</date>
    <startTime>10:30</startTime>
    <location>
        <name>WHSmith Chester</name>
        <address>5-7 Foregate Street</address>
        <city>Chester</city>
        <county>Cheshire</county>
        <postcode>CH1 1HH</postcode>
        <tel>01244 321106</tel>
    </location>
</event> 
```

我想从两个节点 <`date>`和创建一个 DateTime 对象`<startTime>`。所以我这样做：

```
var EventEntity = new Event()
{
    Book = e.Book,
    BookImgUrl = e.BookImgUrl,
    Info = e.Info,
    Start = new DateTime().**?**
}; 
```

但是当我在 DateTime 对象之后按点 [.] 时，我没有从 Intellisense 获取 Parse 方法，这是为什么呢？我究竟做错了什么？

我正计划使用[这篇文章](https://stackoverflow.com/a/7580837/613605)中概述的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:51:09.603

Parse 是一个静态方法，但您调用它是因为它是一个实例方法。你应该这样称呼它：

```
var EventEntity = new Event()
{
    Book = e.Book,
    BookImgUrl = e.BookImgUrl,
    Info = e.Info,
    Start = DateTime.ParseExact(...) // or DateTime.TryParseExact(...)
}; 
```

# c# - 脚手架还是其他框架？

> ID：15970578
> 
> 赞同：0
> 
> 时间：2013-04-12T11:47:20.923
> 
> 标签：c#, asp.net, .net, vb.net

我有点困惑。我在我们使用 Linq To SQL 的一个项目中看到了一些代码

```
<MetadataType(GetType(Customer.CustomerMeta))> Partial Public Class Customer
Friend Class CustomerMeta

    <Required(), StringLength(50)> Public Name As String
    <Required(), StringLength(50)> Public Address As String
    <Required(), StringLength(20)> Public EmailAddress As String
    <StringLength(20)> Public Country As String
End Class 
```

并且不确定为什么会这样创建它，但看起来使用的方法与我以前使用的方法不同。

在阅读之后，似乎该技术可能是脚手架（[http://msdn.microsoft.com/en-us/library/cc488469(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/cc488469(v=vs.90).aspx)），但在本演练进行到一半时，我意识到很多领域都没有存在（如 global.asax 文件）或应用于我在其中看到上述代码的项目，因此我可能在错误的轨道上。

有谁知道上面使用了什么技术/框架，如果有我可以参考的文章，以加快速度？如果这里需要书籍或培训课程，那么我很高兴有人能指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:54:40.510

这些是数据验证注释（我不知道在你的情况下使用它们的确切“框架”，因为它们暴露在 .NET 框架中，任何针对它编程的人都可以使用它们）：基本上，你可以用这些装饰成员属性（[`ValidationAttribute`s](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute.aspx)），然后可以使用此元数据进行一些验证，无论是手动还是由某些数据模式规则检查器自动进行。

在这种情况下，属性`Name`是：-

*   一个必填字段（即其中必须包含某些内容，并且不能为空），
*   并且长度必须为 50 个字符

等等等等。

后一种约束可能会使前者变得多余，具体取决于分析规则的内容。

# javascript - jQuery：仅当用户将鼠标移出容器时才触发“mouseout”？

> ID：15970579
> 
> 赞同：0
> 
> 时间：2013-04-12T11:47:21.543
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个带有两个内部 div 的父 div，它们是 Google Maps OverlayView 的一部分：

```
<div id="container">
    <div id="inner1">inner 1</div>
    <div id="inner2">inner2</div>
</div> 
```

我只想`mouseout`在用户将鼠标移到`#container`. 目前我有这个代码：

```
 google.maps.event.addDomListener(this.$content.get(0), "mouseout", function (e) {
      console.log('InfoWindow mouseleave', $(e.fromElement));
    }); 
```

但只要用户将鼠标移入，它就会触发`#inner1`。事实上，看起来`e.fromElement`，每当用户将鼠标移入容器时，它似乎都会触发！我能做些什么？

jQuery 中的正确答案似乎是使用 mouseleave 事件，但我**似乎无法在 Google 地图中访问**该事件 - 至少，如果我将 mouseout 更改为 mouseleave，则该事件将不再触发。

这个 jsFiddle 演示了基本问题：http: [//jsfiddle.net/pvB4u/1/](http://jsfiddle.net/pvB4u/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:57:01.537

如果它不起作用，您可以尝试替代方法。获取鼠标指针的 pageX 和 pageY（需要在 document.ready() 中对其进行初始化。然后检查它是否在最外层容器的边界内。
像这样的东西

```
$(document).mousemove(function (e) {                        

                            if ($("#container").offset().left > e.pageX || (parseInt($("#container").offset().left) + $("#container").width()) < e.pageX
                        || $("#container").offset().top > e.pageY || (parseInt($("#container").offset().top) + $("#container).height()) < e.pageY) {
                                // This will be your required mouseout event
                            }

                    }); 
```

# php - schema.org 的动态开放时间

> ID：15970580
> 
> 赞同：3
> 
> 时间：2013-04-12T11:47:30.997
> 
> 标签：php, schema.org

我是这个论坛的新手，想寻求帮助。最近我不得不在一组网站中实现 schema.org/LocalBusiness 微数据，但问题是我需要动态添加它。在开放时间出来之前，一切都很容易。因此，架构希望显示小时数的方式是：

```
 <meta itemprop="openingHours" content="Mo-Sa 11:00-14:30">Mon-Sat 11am - 2:30pm
  <meta itemprop="openingHours" content="Mo-Th 17:00-21:30">Mon-Thu 5pm - 9:30pm
  <meta itemprop="openingHours" content="Fr-Sa 17:00-22:00">Fri-Sat 5pm - 10:00pm 
```

我只设法分别显示每天的营业时间，但我需要将它们显示为上面的代码。

我所做的尝试是从我的营业时间表格中获取数据到一个数组中。例如：

```
$days = array('mo' => '13:00-20:00',
        'tu' => '13:00-20:00',
        'we' => '13:00-20:00',
        'th' => '11:00-18:00',
        'fr' => '11:00-18:00',
        'sa' => '15:00-22:00',
        'su' => '13:00-20:00',); 
```

我需要从此数组显示的结果是：

```
<meta itemprop="openingHours" content="Mo-We 13:00-20:00">Mon-We 13:00-20:00
  <meta itemprop="openingHours" content="Th-Fr 11:00-18:00">Th-Fr 11:00-18:00
  <meta itemprop="openingHours" content="Sa 15:00-22:00">Sat 15:00-22:00
  <meta itemprop="openingHours" content="Su 13:00-20:00">Sun 13:00-20:00 
```

并尝试循环这个数组，里面有很多 if。所以，可能你们中的大多数人都知道，像这样我不会一事无成。这是我的代码。我没有测试过这段代码，因为我不知道如何检索 $last_key's_value_equal。希望任何人都能理解我，因为我的解释不是很好，但如果有人能帮助我，我将不胜感激。

```
foreach($day as $key=>$value){
    if($value == next($day)){
        if($value == next($day)){
            if($value == next($day)){
                if($value == next($day)){
                    if($value == next($day)){
                        if($value == next($day)){
                        $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
                        }else{
                        $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
                        }
                    }else{
                    $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
                    }
                $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
                }else{
                $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
                }
            $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
            }else{
            $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
            }
        $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
        }else{
        $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
        }
    $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
    else{
    $opening_hours .= $key.'-'.$last_key's_value_equal.' '.$value;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:49:24.697

保留一系列连续的组。当您遍历您的`$days`时，检查最后一项是否具有相同的小时数。如果是，将日期添加到同一组；如果没有，请创建一个新组。

例如，这个函数，当应用于你的`$days`数组时：

```
function group_contiguous_values($arr) {
    $groups = array();
    foreach ($arr as $k => $v) {
        $lastidx = count($groups)-1;
        if (isset($groups[$lastidx][$v])) {
            $groups[$lastidx][$v][] = $k;
        } else {
            $groups[] = array($v => array($k));
        }
    }
    return $groups;
} 
```

会产生这样的结果：

```
array(
  array('13:00-20:00' => array('mo', 'tu', 'we')),
  array('11:00-18:00' => array('th', 'fr')),
  array('15:00-22:00' => array('sa')),
  array('13:00-20:00' => array('su')),
); 
```

从那里获得您想要的人类可读版本只是一件麻烦事。此代码将处理 itemprop*值*：

```
$time_templ = '<time itemprop="openingHours" datetime="%s %s">%s %s</time>'."\n";

foreach ($business_hours as $group) {
    list($hours, $days) = each($group);
    list($open, $close) = explode('-', $hours, 2);
    $firstday = ucfirst($days[0]);
    $lastday = (count($days)>1) ? ucfirst(end($days)) : null;
    $meta_days = $firstday;
    if ($lastday) {
        $meta_days .= "-$lastday";
    }
    $meta_hours = $hours;

    printf($time_templ, $meta_days, $meta_hours, $meta_days, $meta_hours);
} 
```

哪个打印：

```
<time itemprop="openingHours" datetime="Mo-We 13:00-20:00">Mo-We 13:00-20:00</time>
<time itemprop="openingHours" datetime="Th-Fr 11:00-18:00">Th-Fr 11:00-18:00</time>
<time itemprop="openingHours" datetime="Sa 15:00-22:00">Sa 15:00-22:00</time>
<time itemprop="openingHours" datetime="Su 13:00-20:00">Su 13:00-20:00</time> 
```

# css - Joomla 3：如何应用我自己的菜单样式

> ID：15970583
> 
> 赞同：1
> 
> 时间：2013-04-12T11:47:45.480
> 
> 标签：css, joomla, menu

我已经建立了自己的（简单）模板。菜单模块是这样的：

```
<jdoc:include type="modules" name="modHNavBar"  /> 
```

template.css 文件中的 CSS 是这样的：

```
.TopMenuItem {
    padding: 5px 15px;  
    background: #000063;
    color: #DEE7EF;
    font-size: 1.1em;
    border: 1px solid #DEE7EF;
    float:left;
} 
```

为了设置它的样式，我必须选择每个菜单项并从管理后端应用链接 CSS 样式。

这似乎需要做很多工作。有没有更简单的方法可以简单地将样式应用于整个菜单？

仅作记录，以下内容不起作用：

```
<jdoc:include type="modules" name="modHNavBar" style="TopMenuItem" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:21:18.880

有几种方法可以设置菜单样式。

1.  **包装`<jdoc />`在 div**：`<div class="TopMenuItem"><jdoc:include type="modules" name="modHNavBar" />`
2.  **使用菜单类后缀**：Extensions > Modules > [menu module] > Options > Advanced Options > Menu Class Suffix / Menu Tag ID
3.  **使用模块 chrome**：在您的模板文件夹中创建文件`html/modules.php`，在文档页面中创建`function modChrome_mymenu($module, &$params, &$attribs)`阅读更多内容：[应用自定义模块 chrome](http://docs.joomla.org/Applying_custom_module_chrome)，[模块 chrome](http://docs.joomla.org/Module_chrome)

如果要单独设置每个菜单项的样式，可以为每个菜单项添加类：菜单 > 主菜单 > [菜单项] > 高级选项 > 链接 CSS 样式

或添加 css 样式，如下所示：nav.menu .item-101 { background: green }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T12:45:58.337

在 Joomla 面板中：

菜单 -> 主菜单 -> “主页”，或一些菜单项 -> 高级选项 -> 链接 CSS 样式 -> “主页”，或一些名称。-> 保存

在 CSS 中：
`#nav ul li a.home{background-color:#4E5426; color:#FFFFFF;}`
`#nav ul li a.home:hover{background-color:#9A9B19; color:#FFFFFF;}`

# mysql - 为每一行添加注释

> ID：15970588
> 
> 赞同：0
> 
> 时间：2013-04-12T11:47:58.160
> 
> 标签：mysql

我有一张`customer`桌子。我有一个新要求，我需要用户为添加到系统中的每个新客户添加评论或为现有客户添加评论。

到目前为止，我知道如何在表格和列上添加注释。我已经参考了[这个](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)细节。

**我已经考虑添加一个名为`comments`该表的新列。**我还能做些什么来为`customer`表中的每个客户实施评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:51:22.037

您需要一个单独的表格来记录声音的评论，因此每个客户都可以有多个评论：

```
CustomerTable
    CustomerId int
    CustomerName varchar(100)

CommentsTable
    CommentId int
    CommentDateTime datetime
    CustomerId
    Comment varchar(4000) 
```

# java - 多个 EditTexts

> ID：15970592
> 
> 赞同：0
> 
> 时间：2013-04-12T11:48:08.060
> 
> 标签：java, android, object, android-edittext

我在多个表行中有多个编辑文本。我知道我可以通过 findViewById 访问它们。有没有办法在 onFocusChange 中找出哪个 edittext 具有焦点，而不是使用 findViewById？

```
public void onFocusChange(View v, boolean hasFocus) {
// TODO Auto-generated method stub
int edit1 = 0, edit2 = 0, result = 0;
if(hasFocus == true) 
{

}   
else {
edit1 = Integer.parseInt(et1.getText().toString());
result = Integer.parseInt(et3.getText().toString());
edit2 = result - edit1;
et2.setText(Integer.toString(edit2));
et3.setText(Integer.toString(edit2));
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:51:05.440

```
getWindow().getCurrentFocus(); 
```

当然，在此之后您将需要做一些聪明的事情 - 即使只是假设焦点是 EditText 的尝试/捕获可能就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:01:30.557

当用户从一个EditText切换到另一个时，`onFocusChange()`会被调用两次；一次用于失去焦点的视图，第二次用于现在拥有它的视图。（编辑：这听起来像是这些事件到达的顺序，但即使是这样，也不能保证，你不能依赖它。）

因此，在您的`hasFocus == true`分支中，您只需检查`View v`，看看它是否是一个`instanceof` `EditText`，并且您有您的 View 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:08:40.193

检查 View v 参数是否等于 EditText 的实例。

```
if(hasFocus && v == et1) {
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:49:08.010

您可以在每个 edittext 视图中 setTag() 并在每个视图中设置焦点侦听器。如果您不想使用 findViewById() 找到它，则可以以编程方式从父视图中检索视图并为其分配标签并设置单击侦听器。

# javascript - TYPO3 gzip 压缩

> ID：15970594
> 
> 赞同：3
> 
> 时间：2013-04-12T11:48:22.320
> 
> 标签：javascript, css, compression, gzip, typo3

我想在我的 TYPO3 网站上启用 gzip 压缩。这是一个共享主机，我无权访问服务器配置。这是我到目前为止所做的：

*   取消注释 TYPO3 .htaccess-file（压缩部分）

    ```
    ### Begin: Compression via TYPO3 ###

    <FilesMatch "\.js\.gzip$">
        AddType "text/javascript" .gzip
    </FilesMatch>
    <FilesMatch "\.css\.gzip$">
        AddType "text/css" .gzip
    </FilesMatch>

    AddEncoding gzip .gzip

    ## End: Compression via TYPO3 ### 
    ```

*   在我的 TYPO3 主模板中写了这个

    ```
    config.compressJs = 1
    config.compressCss = 1 
    ```

*   localconf.php：

    ```
    $TYPO3_CONF_VARS['BE']['compressionLevel'] = '9'
    $TYPO3_CONF_VARS['FE']['compressionLevel'] = '9' 
    ```

Google Pagespeed 仍然指出，我应该压缩我的 css 和 js。我不知道为什么？这里是网站：[http ://preview-list.lmenges.de/index.php?id=fahrschule](http://preview-list.lmenges.de/index.php?id=fahrschule)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:20:17.780

看看 mod_deflate：[http ://httpd.apache.org/docs/2.2/mod/mod_deflate.html](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)

> AddOutputFilterByType DEFLATE text/html text/plain text/xml text/javascript text/css

# java - 为许多按钮实现 ClickHandlers 的最佳实践

> ID：15970595
> 
> 赞同：0
> 
> 时间：2013-04-12T11:48:24.373
> 
> 标签：java, gwt, handler, rpc

我目前正在为带有 GWT 的 NAO 机器人设计一个遥控器，并且我正在寻找通过 RPC 执行按钮的假定方法的最佳实践。目前我正在检查带有 event.getSource() 标题的按钮名称。但这会导致大量的 if else 语句。我怎么能做得又好又整洁？;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:13:01.533

您可以使用命名良好的方法和一些方法反射。

假设您有名为：action1 action2 action3 的按钮

如果这是本地的，您可以为每个添加不同的侦听器。因为它很遥远，我知道你只知道名字。

在您的远程 impl 类中有方法调用：

doAction1 doAction2 doAction3

在你得到远程调用的地方看名字，把初始化字母变成大写，加上do然后得到方法。您甚至可以按名称缓存 Map 中的方法

地图

获得方法后，在一个实例工作者上调用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:13:19.300

您可以使用枚举或整数作为您使用 Button 构造函数设置的标识符。然后在服务器端，您可以使用 switch case 语句保存一些代码行。

```
 public enum MyButtons {
  WALK,
  SIT,
   ...
   }
[...]
 //ON CLIENT
 Button whatever = new Button(MyButtons.WALK);

 //ON SERVER
 MyButtons action = whatever.getType(); 
// getType() should provide the value from the constructor

 switch(action)
   {
    case WALK : doStuff();
    case SIT : doStuff();
     ...
   } 
```

# php - 使用 $_POST 发送 $_SESSION 的问题

> ID：15970597
> 
> 赞同：-3
> 
> 时间：2013-04-12T11:48:26.327
> 
> 标签：php, mysql

我有一个更新表中一行的函数，当我对电子邮件值进行硬编码时，查询可以工作，但是当我想发送该值`$_SESSION`时，因为行中没有任何事情发生，我也不会收到任何错误。

我的工作查询是：

```
function profile_name($profile_name){
    $profile_name = mysql_real_escape_string(htmlentities($profile_name)); 
    mysql_query("UPDATE user SET user_name = '{$profile_name}' WHERE user_email = 'my@email.com' ");
} 
```

当我`my@email.com`使用以下代码发送 as 会话时：

```
(isset($_POST['profile'], $_POST["{$_SESSION['email']}"])){ } 
 function profile_name($profile_name, $email){
    $profile_name = mysql_real_escape_string(htmlentities($profile_name)); 
        mysql_query("UPDATE user SET user_name = '{$profile_name}' WHERE user_email = '{$email}' ");
    } 
```

什么都没发生。

如果我回显会话`$_SESSION['email']`，它会打印`my@email.com`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:19:46.430

仍然试图通过“发送 $_SESSION”来理解您的意思，但是这个语句看起来很奇怪：

```
$_POST["{$_SESSION['email']}"] 
```

它的作用是`$_SESSION`使用 key 从数组中获取一个值`email`，然后将此值用作`$_POST`数组的键。

假设您`$_SESSION['email']`设置为`myemail@hotmail.com`，它会期望`$_POST['myemail@hotmail.com']`返回一个值。为此，您的表单必须有一个带有 name 的输入控件`myemail@hotmail.com`。

由于这是一种非常不规则的做事方式，我认为这可能是一个问题，除非它是您问题中的拼写错误。

您可能打算这样做：

```
if (isset($_POST['profile'], $_SESSION['email'])) {... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:49:35.160

我认为两列都不是整数，所以值应该用单引号引起来，

```
UPDATE user SET user_name = '{$profile_name}' WHERE user_email = '{$email}' 
```

我会建议你打开使用`PDO`or `MySQLi`。

# javascript - 为什么我的回调函数最后调用？

> ID：15970598
> 
> 赞同：0
> 
> 时间：2013-04-12T11:48:36.320
> 
> 标签：javascript, asynchronous, callback

我现在真的很困惑，请参阅下面的代码：

```
var getImageFromUrl = function(url, callback) {
var img = new Image, data, ret={data: null, pending: true};

img.onError = function() {
    throw new Error('Cannot load image: "'+url+'"');
}
img.onload = function() {
    var canvas = document.createElement('canvas');
    document.body.appendChild(canvas);
    canvas.width = img.width;
    canvas.height = img.height;

    var ctx = canvas.getContext('2d');
    ctx.clearRect( 0, 0, canvas.width, canvas.height );
    ctx.drawImage(img, 0, 0);
    // Grab the image as a jpeg encoded in base64, but only the data
    data = canvas.toDataURL('image/jpeg').slice('data:image/jpeg;base64,'.length);
    // Convert the data to binary form
    data = atob(data)
    document.body.removeChild(canvas);

    ret['data'] = data;
    ret['pending'] = false;
    if (typeof callback === 'function') {
        callback(data);
    }
}
img.src = url;

return ret;
} 
```

这是我的呼吁：

```
getImageFromUrl('pdfconversion/roundel.jpg', addImage); 
```

所以基本上，为了让我的方法做我真正想要它做的事情（这里没有显示），我需要回调函数，在这种情况下，它是在访问 getImageFromUrl 方法后立即调用的“addImage”。目前，调用 getImageFromUrl 方法，然后在最终调用“addImage”的回调函数之前运行我的其余代码（上面未显示）。我怎样才能让它成为下一个电话？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:54:53.877

删除回调并按顺序调用它：

```
getImageFromUrl('pdfconversion/roundel.jpg');
addImage(); 
```

# magento - 如何在 onepage/checkout/success 中设置模板

> ID：15970600
> 
> 赞同：5
> 
> 时间：2013-04-12T11:48:46.717
> 
> 标签：magento, magento-1.7

我在 onepage/checkout/success 页面遇到问题，因为我想将根模板从 2columns-right.phtml 设置为 1column.phtml。应该不是问题...

我有带有基本主题和自定义主题的默认包：

*   前端/基础/默认/
*   前端/默认/自定义/

首先，我尝试更改我的 local.xml 中的模板

*前端/默认/自定义/布局/local.xml*

```
<layout>
...
<checkout_onepage_success>
        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
</checkout_onepage_success>
...
</layout> 
```

没有任何影响。

然后我再次尝试使用自定义 checkout.xml （同上）没有任何效果。此外，当我复制 base/default/layout/checkout.xml 的全部内容并“仅”更改模板文件时，没有任何效果。

我已经清理/禁用了所有缓存并卸载了所有非标准插件。

Magento 是 V.1.7.0.2。

有任何想法吗？

--

`/base/default/layout/checkout.xml`=> 2columns-left.phtml

`/default/custom/layout/checkout.xml`=> 1column.phtml

前端/浏览器 => 2columns-right.phtml

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-02T17:15:55.250

Christian，您自己说过，包和主题设置在“默认配置”范围内。当您将文件放在 /default/custom/layout/ 中时，您会将文件放在不同的模板文件夹中。您可以做两（三）件事之一：

### 更改设计设置

在**System > Configuration > Design > Themes**下，将**Templates**、**Skin**和**Layout**设置为**"custom"**。

刷新您的缓存，它应该开始使用文件夹 /design/frontend/default/custom/...

### 使用默认/默认主题包

您可以只编辑默认主题。您可以将文件从“基本/默认”复制到“默认/默认”并将其设置为不覆盖任何文件，然后将文件从“默认/自定义”移动并覆盖默认文件夹。

**注意：**这可以完成工作，但通常不建议这样做。（继续阅读；D）

### 更改设计设置并使用 local.xml

如上所述更改您的配置。如今，在 Magento 中更改布局最被接受的方法是使用**local.xml**。这将位于您的**Default/Custom/Layout/**文件夹中。这个文件将是您完成所有布局更新的地方，您无需在此过程中触及任何核心文件。

您习惯做的一些事情将不得不改变，因为您不会直接编辑基本文件。local.xml 最后加载，因此此处所做的任何调整都不应被覆盖。为了完成您的目标，您的 local.xml 可能会像这样开始：

### 本地.xml

```
<?xml version="1.0"?>

<layout version="0.1.0">

    <checkout_onepage_success>
        <reference name="root">
            <action method="setTemplate">
                <template>page/1column.phtml</template>
            </action>
        </reference>
    </checkout_onepage_success>

    <checkout_onepage_failure>
        <reference name="root">
            <action method="setTemplate">
                <template>page/1column.phtml</template>
            </action>
        </reference>
    </checkout_onepage_failure>

</layout> 
```

您将不得不调整删除内容的方式，它不再像注释掉、删除或移动一行那么简单。

### 完全删除一个块

要删除一个块，请获取它的块名称（或 as=""）并在适当的参考中插入以下代码。

```
<remove name="left.permanent.callout" /> 
```

### 将块移到别处

移动块是一个两部分，首先您必须在包含引用中**取消setChild并将块****插入**其新位置。例如：

```
<reference name="left">
    <action method="insert">
        <!-- Name of Block -->
        <blockName>right.poll</blockName>
        <!-- Name of Adjacent Block -->
        <siblingName>left.newsletter<siblingName>
        <!-- Does it Come Before(0)? Or After(1)? Adjacent Block  -->
        <after>0</after>
    </action>
</reference>

<reference name="right">
    <action method="unsetChild">
        <name>right.poll</name>
    </action>
</reference> 
```

**注意：**这里，**0**通常只适用于其 phtml 文件包含**echo $this->getChildHtml('') 的**块。这意味着它正在加载 xml 中列出的所有引用的子块。

**另请注意，使用块名称（例如getChildHtml('top_links')** ）使用相同功能的文件通常需要您将该模板文件克隆到您的设计中（默认/自定义/模板/）并手动添加**echo $this- >getChildHtml('your_block_name')**你希望你的块出现的地方（在你的 local.xml 中放置之后）。

那应该可以帮助您入门，网上有很多好文章，堆栈溢出也是获取信息的好地方。

# sql-server - 获取 XML 信息到 SQL

> ID：15970604
> 
> 赞同：0
> 
> 时间：2013-04-12T11:48:50.703
> 
> 标签：sql-server, xml, import

您好我试图从 XML 文件中获取一些信息到我的 MSSQL 数据库中，任何人都可以发现错误。

这是我的 sql 代码（现在修复了遍历整个目录和错误陷阱的循环）

使用 mydb

```
IF OBJECT_ID('mydb..tempList') IS NOT NULL
DROP TABLE tempList

CREATE TABLE tempList ([FileName] VARCHAR(500))

--plain vanilla dos dir command with /B switch (bare format)
INSERT INTO tempList
EXEC MASTER..XP_CMDSHELL 'dir C:\Data\icecat\xmls /B'

--delete the null values
DELETE tempList WHERE [FileName] IS NULL

-- Delete all the files that don't have xml extension
DELETE tempList WHERE [FileName] NOT LIKE '%.xml'

--this will be used to loop over the table
alter table tempList add id int identity
go

truncate table dbo.XMLImportRelated --in case you want to rerun just this codeblock

DECLARE @Directory varchar(100)
SELECT @Directory = 'C:\Data\icecat\xmls\'

DECLARE @FileExist int
DECLARE @FileName varchar(500),@DeleteCommand varchar(1000),@FullFileName varchar(500), @SQLFullFileName varchar(500)

DECLARE @ProductID int  
DECLARE @RelatedID int 
```

--这是为了让我们知道循环持续多长时间 DECLARE @LoopID int, @MaxID int SELECT @LoopID = min(id),@MaxID = max(ID) FROM tempList

```
WHILE @LoopID <= @MaxID
BEGIN

SELECT @FileNAme = filename
FROM tempList
WHERE id = @LoopID

SELECT @FullFileName = @Directory + @FileName

EXEC xp_fileexist @FullFileName , @FileExist output
IF @FileExist =1 --sanity check in case some evil person removed the file
BEGIN

DECLARE @x XML, @sql NVARCHAR(MAX);
BEGIN TRY 
SELECT @sql = N'SELECT @X = CONVERT(xml,[ICECAT-interface],2) 
FROM OPENROWSET(BULK ''' + @FullFileName + ''' ,SINGLE_BLOB)
 ---------------------^^ escaped quotes are important  
 AS Import([ICECAT-interface]);';

EXEC sp_executesql @sql, N'@x XML OUTPUT', @x OUTPUT;

END TRY
BEGIN CATCH  
PRINT 'Error'  
END CATCH

INSERT XMLImportRelated ([ProductID],RelatedID)

select P1.X.value('@ID', 'int') as ProductID,
        P2.X.value('@ID', 'int') as RelatedID

 from @X.nodes('/ICECAT-interface/Product') as P1(X)
      cross apply P1.X.nodes('ProductRelated') as PR(X)
      cross apply PR.X.nodes('Product') as P2(X)

 -- SET @DeleteCommand = 'del ' +  @Directory + @FileName
END

SELECT @LoopID = min(id)
FROM tempList
WHERE id > @LoopID
END 
```

这是我试图使用的 xml 的 url

[http://www.metatronics.co.uk/XML/3326091.xml](http://www.metatronics.co.uk/XML/3326091.xml)

谢谢伙计们，我一直在得到空值，所以我错过了一些小东西，但是在整个早上看着它之后，我快疯了，约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:05:40.347

在您提供的 XML 中有四个属性，但`/ICECAT-interface/Product/ProductRelated`不是`path`其中之一。

尝试：

```
SELECT
  Product.value('@ID', 'int'),
  Product.value('@Category_ID','int'),
  Product.value('@Reversed','bit'),
  Product.value('@Preferred','bit')
FROM ... 
```

如果您想从中选择属性，则`/ICECAT-interface/Product/ProductRelated/Product`需要更改`nodes`子句以包含`Product`并指定在字段列表中使用的属性。

要从 ProductRelated 和 Product 中获取值，您应该使用`cross apply`.

```
select PR.X.value('@ID', 'int') as ProductRelatedID,
       PR.X.value('@Category_ID','int') as Category,
       PR.X.value('@Reversed','bit') as Reversed,
       PR.X.value('@Preferred','bit') as Preferred,
       P.X.value('@ID', 'int') as ProductID,
       P.X.value('@Prod_id', 'nvarchar(500)') as Prod_id,
       P.X.value('@ThumbPic', 'nvarchar(500)') as ThumbPic,
       P.X.value('@Name', 'nvarchar(500)') as Name
from @X.nodes('/ICECAT-interface/Product/ProductRelated') as PR(X)
  cross apply PR.X.nodes('Product') as P(X) 
```

**更新：**

```
select P1.X.value('@ID', 'int') as ProductID,
       PR.X.value('@ID', 'int') as ProductRelatedID,
       PR.X.value('@Category_ID','int') as Category,
       PR.X.value('@Reversed','bit') as Reversed,
       PR.X.value('@Preferred','bit') as Preferred,
       P2.X.value('@ID', 'int') as ProductID,
       P2.X.value('@Prod_id', 'nvarchar(500)') as Prod_id,
       P2.X.value('@ThumbPic', 'nvarchar(500)') as ThumbPic,
       P2.X.value('@Name', 'nvarchar(500)') as Name
from @X.nodes('/ICECAT-interface/Product') as P1(X)
  cross apply P1.X.nodes('ProductRelated') as PR(X)
  cross apply PR.X.nodes('Product') as P2(X) 
```

结果：

```
ProductID   ProductRelatedID Category    Reversed Preferred ProductID   Prod_id            ThumbPic                                        Name
----------- ---------------- ----------- -------- --------- ----------- ------------------ ----------------------------------------------- --------------------------------------------------------------
3326091     57050234         258         0        0         1220634     WS-C2960-24-S      http://images.icecat.biz/thumbs/1220634.jpg     Catalyst 2960-24-S
3326091     68385107         258         0        0         2708530     WS-C2960-48TC-S-RF http://images.icecat.biz/thumbs/2708530.jpg     Catalyst 2960-48TC-S
3326091     57050235         258         0        0         1220633     WS-C2960-24TC-S    http://images.icecat.biz/thumbs/1220633.jpg     Catalyst 2960-24TC-S
3326091     57050236         258         0        0         3328069     WS-C2960-24PC-S    http://images.icecat.biz/thumbs/3328069.jpg     WS-C2960-24PC-S
3326091     0                182         0        0         16646       DFE-690TXD         http://images.icecat.biz/thumbs/16646.jpg       32 Bit Card Bus 10/100Mbps Ethernet Adapter with Direct Port
3326091     57050238         258         0        0         1710023     WS-C2960-48TT-S    http://images.icecat.biz/thumbs/1710023.jpg     Catalyst 2960-48TT-S
3326091     0                182         0        0         468298      LC102              http://images.icecat.biz/thumbs/468298.jpg      LAN PC Card Gigabit
3326091     57050239         258         0        0         1220632     WS-C2960-48TC-S    http://images.icecat.biz/thumbs/1220632.jpg     Catalyst 2960-48TC-S
3326091     0                883         0        0         1549666     UT012                                                              UTP Cable Cat5E 3M Grey
3326091     57050233         258         0        0         1710024     WS-C2960-8TC-S     http://images.icecat.biz/thumbs/1710024.jpg     Catalyst 2960-8TC-S
3326091     0                182         0        0         1959688     LC103              http://images2.icecat.biz/thumbs/1959688.jpg    Gigabit Network Card PCI Express
3326091     57050237         258         0        0         3326672     WS-C2960-24LC-S    http://images.icecat.biz/thumbs/3326672.jpg     CATALYST 2960 24 10/100 Port & 8 PoE
3326091     0                244         0        0         1320852     BR-6624            http://images.icecat.biz/thumbs/1320852.jpg     BR-6624 Load Balancing Router
3326091     0                182         0        0         489937      LC101              http://images.icecat.biz/thumbs/489937.jpg      Gigabit Network Card PCI
3326091     0                182         0        0         72364       DGE-530T           http://images.icecat.biz/thumbs/72364.jpg       32-Bit 10/100/1000 Base-T PCI Adapter
3326091     0                1505        0        0         1318217     N-707522           http://images.icecat.biz/thumbs/1318217.jpg     UTP Crimping Tang
3326091     0                244         0        0         1684822     20002427           http://images2.icecat.biz/thumbs/1684822.jpg    FRITZ!Box Fon WLAN 7270 International Edition
3326091     0                883         0        0         1318218     N-707523           http://images.icecat.biz/thumbs/1318218.jpg     UTP CAT5 Pullbox Network Cable, 100m
3326091     0                1172        0        0         1318117     N-707521           http://images.icecat.biz/thumbs/1318117.jpg     UTP Shieldcaps for RJ45, 10 Pieces
3326091     0                244         0        0         859910      20002387           http://images.icecat.biz/thumbs/859910.jpg      FRITZ!Box Fon WLAN 7170 Annex A
3326091     0                244         0        0         859908      20002388           http://images.icecat.biz/thumbs/859908.jpg      FRITZ!Box Fon WLAN 7170 Annex B 
```

# c#-4.0 - 如何强制实体框架不查询为 sp_executesql

> ID：15970605
> 
> 赞同：10
> 
> 时间：2013-04-12T11:48:52.533
> 
> 标签：c#-4.0, entity-framework-5

我有一个有 100 亿行的表。当我使用 where clausule 和一个值进行硬编码查询时（`tabulka = tabulka.Where(x => x.Value.Contains("value")`sql 查询作为批处理发送到 sql。大约需要 5 秒。当值未硬编码（`tabulka = tabulka.Where(x => x.Value.Contains(value)`）时，查询发送一个 RPC，需要 15 秒。

这是 EF 发送到 SQL 的真实示例（来自 Profiler）：

```
exec sp_executesql N'SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM [dbo].[Tabulka] AS [Extent1]
    WHERE ([Extent1].[Column] LIKE @p__linq__0 ESCAPE N''~'') AND ([Extent1].[Column] LIKE @p__linq__1 ESCAPE N''~'')
)  AS [GroupBy1]',N'@p__linq__0 nvarchar(4000),@p__linq__1 nvarchar(4000)',@p__linq__0=N'%text1%',@p__linq__1=N'%text2%' 
```

这需要 15 秒。

当我添加 OPTION (RECOMPILE) 需要 5 秒：

```
exec sp_executesql N'SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM [dbo].[Tabulka] AS [Extent1]
    WHERE ([Extent1].[Column] LIKE @p__linq__0 ESCAPE N''~'') AND ([Extent1].[Column] LIKE @p__linq__1 ESCAPE N''~'')
)  AS [GroupBy1] OPTION (RECOMPILE)',N'@p__linq__0 nvarchar(4000),@p__linq__1 nvarchar(4000)',@p__linq__0=N'%text1%',@p__linq__1=N'%text2%' 
```

如果我将其重写为简单查询，也需要 5 秒：

```
SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM [dbo].[Tabulka] AS [Extent1]
    WHERE ([Extent1].[Column] LIKE '%text1%' AND [Extent1].[Column] LIKE '%text2%')
)  AS [GroupBy1] 
```

问题是如何强制 EF 将其作为 Batch 发送或执行某些操作以花费 5 秒而不是 15 秒。

这些查询仅作为演示，真正的查询可能要复杂得多，我不知道要重建它而不使用 IQueryable。

任何帮助都会得到帮助。[以下是查询的执行计划](http://www.ulozto.net/xjYkL4QT/query-docx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-06T17:31:41.010

我可以想出几种方法来解决它，但从 EF 6.2 及更早版本开始，没有标准/内置方法可以更改 EF 创建查询以添加提示/选项的方式。您面临的问题是由于查询计划效率低下，该查询计划被保留在统计信息中，并且在您使用另一个值调用它时被重新使用。我会首先尝试弄清楚为什么要创建错误的查询计划，也许有比操纵代码更好的方法来解决它。为此，请尝试在 Ms Sql 论坛中提出问题（减去 EF 部分），并包括查询、架构详细信息和您的执行计划，就像您在本文中所做的那样。

如果您的 nvarchar/varchar 列在 DbContext 映射中设置为正确的编码（ascii/unicode），还请检查您的映射。

可选的解决方法

1.  使用字符串生成器以传统/旧方式构建查询。一旦有了查询，就使用 SqlQuery 函数在 DbContext 上的 DbSet 上执行它。这使您可以完全控制查询的构建以及包含的内容，但存在明显的缺点，例如无法使用 Linq-to-Sql 进行查询构建。
2.  创建一个存储过程并将其映射到 EF。在存储过程中，您可以根据需要构建查询。存储过程的结果可能是一个或多个副作用（如果我没记错的话，也是一个表）并使用 EF 映射回一个对象。
3.  挂钩 DbContext 并在执行之前捕获构建的 sql，然后操作 Sql 以添加您的选项语句。您可以使用**IDbCommandInterceptor**接口的自定义实现来执行此操作，然后重新编写 sql 以包含 OPTION 语句以重新生成执行计划。我会将此作为最后的手段。

# html - 用于 FireFox 的 HTML5 MP3 音频播放器，隐形 SWF 后备？

> ID：15970610
> 
> 赞同：0
> 
> 时间：2013-04-12T11:48:57.890
> 
> 标签：html, firefox, mp3

有没有办法为 HTML5 音频播放器创建一个 SWF 回退，它只是一个可以向 JavaScript/JQuery 来回报告的不可见 SWF？

这样，我可以拥有一个 HTML5 播放器，保留控件，但是当它需要使用 Flash 作为后备时，它只需调用 swf 文件作为在 Firefox 中播放 MP3 的引擎，并且所有 html 控件都保留下来。

我试图避免的是完全在 Flash 中为 Firefox 用户创建一个重复的界面。我还试图避免将我的 150mb mp3 音频文件库复制为 OGG 格式，只是为了让该应用程序适用于 FireFox 用户。这似乎不合逻辑。

BandCamp 是如何做到的？还是音频 JS？

[http://kolber.github.io/audiojs/](http://kolber.github.io/audiojs/)

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:52:55.300

你可以看看[JW Player](http://www.longtailvideo.com/jw-player/)，它提供了一个带有 SWF 后备的 HTML5 播放器。

# php - Wordpress：如何挂钩 get_the_content

> ID：15970625
> 
> 赞同：0
> 
> 时间：2013-04-12T11:49:20.840
> 
> 标签：php, wordpress, plugins, filter, hook

我正在寻找一种正确的方法来挂钩`get_the_content`Wordpress 中的方法。Wordpress 为 提供挂钩`the_content`，`the_excerpt()`但`get_the_excerpt()`不为`get_the_content()`. 我有一个插件，我维护它在内容帖子中附加和前置一些 HTML。`the_excerpt()`我对和使用了相同的方法`get_the_excerpt()`。我应该做些什么来支持`get_the_content()`以及我看到大多数主题现在使用`get_the_content()`？即：如果主题使用`get_the_content()`而不是`the_content()`，我的插件将失败。

我的插件代码如下：

```
add_action('init', 'my_init');

function my_init() {
  add_filter('the_content', 'my_method', 12);
  add_filter('get_the_content', 'my_method', 12);
}

function my_method($content) {
  $content = "blah blah".$content."blah blah";

  return $content;
} 
```

上面的代码（在我的插件中）`the_content call`从主题中监听并将我自己的内容添加到文章中。

假设这是主题文件中的方法：

```
<div class="entry-content">
  <?php the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentytwelve' ) ); ?>
</div><!-- .entry-content --> 
```

在上述情况下它可以正常工作。

但是如果主题代码是这样的（注意从 the_content() 到`get_the_content())`.

```
<div class="entry-content">
  <?php echo get_the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentytwelve' ) ); ?>
</div><!-- .entry-content --> 
```

我的插件失败，因为没有为`get_the_content`. 由于我无法控制主题代码，Wordpress 在[文档](http://codex.wordpress.org/Function_Reference/get_the_content)中解释的解决方案对我没有帮助：

```
<?php apply_filters('the_content',get_the_content( $more_link_text, $stripteaser, $more_file )) ?> 
```

更新：为清楚起见，扩展了问题定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:13:30.207

您是否尝试过以下操作？

根据法典：

> 如果您使用过滤内容的插件（add_filter('the_content')），那么这将不会应用过滤器，除非您以这种方式调用它（使用 apply_filters）：

```
<?php apply_filters('the_content',get_the_content( $more_link_text, $stripteaser, $more_file )) ?> 
```

它记录在[**wordpress codex**](http://codex.wordpress.org/Function_Reference/get_the_content)中。

## 已编辑

尝试使用输出缓冲来放入`the_content`一个变量。

这样你就不用担心`get_the_content`

```
ob_start();
the_content();
$newContent = ob_get_clean(); 
```

现在它存储在一个名为`$newContent`easy to 操纵的变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:18:31.750

***只需尝试以下内容：***

***使用 Cform 的示例：***

```
add_filter('get_the_content', 'cforms_insert',10); 
```

供您[参考](http://www.deliciousdays.com/cforms-forum/troubleshooting/fix-the_content-vs-get_the_content/)

（或者）

```
$content = get_the_content();
$content = apply_filters('the_content', $content);
$panels = explode("[newpage]", $content); 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-30T16:43:31.933

以下代码可以解决问题（请注意`my_post`）：

```
add_action('init', 'my_init');

function my_init() {
  add_filter('the_content', 'my_method', 12);
  add_filter('the_excerpt', 'my_method', 12);
  add_filter('the_post', 'my_post');
}

function my_post($post) {
  $post->post_excerpt = get_the_excerpt();
  $post->post_content = get_the_content();
  return $post;
}

function my_method($content) {
  $content = "blah blah".$content."blah blah";
  return $content;
} 
```

# css - 如何使身体背景图像移动滚动 - 右

> ID：15970628
> 
> 赞同：0
> 
> 时间：2013-04-12T11:49:30.027
> 
> 标签：css

我看过一个网站，它的正文背景图像向右滚动，并且一直向右滚动。图像一次又一次地向右滚动。

我希望它出现在我的网站上，这样每个用户都可以在那里设置自己的选择背景。

只想知道有没有人知道诀窍

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:40:58.070

您可以使用 CSS 动画为背景位置设置动画。

```
body {
    background-image: url("path/to/image.png");
    /*vendor prefix*/animation: 3s slideBg infinite linear;
}
@/*vendor prefix*/keyframes slideBg {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 200px 0; /* 200px = width of background image */
    }
} 
```

[http://jsfiddle.net/Kc6Rk/](http://jsfiddle.net/Kc6Rk/)上的演示（用于 webkit 和 firefox）

阅读[css 动画](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)和[背景位置](https://developer.mozilla.org/en-US/docs/CSS/background-position)

# java - JLabel 仅在调整窗口大小后显示在 JFrame 中

> ID：15970633
> 
> 赞同：1
> 
> 时间：2013-04-12T11:49:45.457
> 
> 标签：java, swing, jframe, jlabel

在我制作的游戏中，我有一个显示您的分数的结束屏幕，但`JLabel`只有在我调整窗口大小时才会显示该结束屏幕。但是当我参加游戏课程并且只在没有主要课程的情况下玩它时，文本显示得很好。

这是我的代码：

```
package Game;

import com.sun.j3d.utils.geometry.Sphere;
import com.sun.j3d.utils.universe.SimpleUniverse;
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import javax.media.j3d.AmbientLight;
import javax.media.j3d.Appearance;
import javax.media.j3d.Background;
import javax.media.j3d.BoundingSphere;
import javax.media.j3d.BranchGroup;
import javax.media.j3d.Canvas3D;
import javax.media.j3d.DirectionalLight;
import javax.media.j3d.Material;
import javax.media.j3d.Transform3D;
import javax.media.j3d.TransformGroup;
import javax.swing.*;
import javax.vecmath.Color3f;
import javax.vecmath.Point3d;
import javax.vecmath.Vector3d;
import javax.vecmath.Vector3f;

public class GameTest extends JFrame{
    private PAPITest2 papi;
    public TestPane panel;
    private boolean inMenu = true;
    private ImageIcon ii;
    private Image image;

    public static void main(String[] args){
        final GameTest gt = new GameTest();
    }

    public GameTest(){
        setFocusable(true);
        requestFocusInWindow();
        requestFocus();
        ii = new ImageIcon("Ball Jump.png");
        image = ii.getImage();
        papi = new PAPITest2();
        panel = new TestPane();
        add(panel);
        setSize(600,600);
        setVisible(true);
    }

    public void paint(Graphics g){
        if(inMenu == true){
            Graphics2D g2D = (Graphics2D) g;
            g2D.drawImage(image, 0, 0, this);
            repaint();
        }
    }

    public class TestPane extends JPanel {

        public TestPane() {
            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, false), "pressed");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, true), "released");

            am.put("pressed", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if(inMenu == true){
                        inMenu = false;
                        remove(panel);
                        papi.setSize(600,600);
                        papi.setAlive(true);
                        add(papi);            
                        setVisible(true); 
                    }

                    if (papi.isAlive() != true){ 
                        setSize(60,60);                       
                        setVisible(true);
                        repaint();
                        remove(papi);
                        papi = new PAPITest2();
                        papi.setSize(600,600);
                        add(papi); 
                        repaint();
                    } 
                }
            });

            am.put("released", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if(inMenu == true){
                        inMenu = false;
                        remove(panel);
                        papi.setSize(600,600);
                        papi.setAlive(true);
                        add(papi);            
                        setVisible(true); 
                    }

                    if (papi.isAlive() != true){ 
                        remove(papi);
                        papi = new PAPITest2();
                        papi.setSize(600,600);
                        add(papi);
                        setVisible(true);
                        repaint();    
                    }
                }
            });

            setFocusable(true);
            requestFocusInWindow();        
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(600, 600);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2D = (Graphics2D) g;
            g2D.drawImage(image, 0, 0, this);
            repaint();
        }
    }
}

class PAPITest2 extends Applet implements ActionListener,KeyListener{
    private TransformGroup objTrans,objTrans2, objTrans3, objTrans4, objTrans5, objTrans6, objTrans7;
    private Transform3D trans = new Transform3D();
    private BranchGroup objRoot = new BranchGroup();
    private BranchGroup objRoot2 = new BranchGroup();
    private BranchGroup objRoot3 = new BranchGroup();
    private BranchGroup objRoot4 = new BranchGroup();
    private BranchGroup objRoot5 = new BranchGroup();
    private BranchGroup objRoot6 = new BranchGroup();
    private BranchGroup objRoot7 = new BranchGroup();
    private SimpleUniverse u;
    private Canvas3D c;
    private BranchGroup scene, scene2, scene3, scene4, scene5, scene6, scene7;
    private Sphere sphere, sphere2, sphere3, sphere4, sphere5, sphere6, sphere7;
    private float height = 0.0f, sign = 1.0f, xloc = 0.0f;
    private float height2 = 0.0f, sign2 = -1.0f;
    private float rightX, right, rightDx, leftX, left, leftDx, rightX2, leftX2;
    private boolean isAlive = true;
    private JLabel scoreLabel;
    private JLabel label;
    private int score = -400;
    private Timer timer;
    private int sumScore;
    private JPanel panel2;
    private boolean isEndscreen = true;

    public boolean isAlive(){
        return isAlive;
    }

    public void setAlive(boolean isAlive){
        this.isAlive = isAlive;
    }

    public BranchGroup createSceneGraph(){
        Color3f ambientColourRSphere = new Color3f(0.6f,0.0f,0.0f);
        Color3f emissiveColourRSphere = new Color3f(0.0f,0.0f,0.0f);
        Color3f diffuseColourRSphere = new Color3f(0.8f,0.0f,0.4f);
        Color3f specularColourRSphere = new Color3f(0.3f,0.0f,0.0f);
        float shininessRSphere = 20.0f;
        Appearance redSphereApp = new Appearance();
        redSphereApp.setMaterial(new Material(ambientColourRSphere,emissiveColourRSphere,
                             diffuseColourRSphere,specularColourRSphere,shininessRSphere));
        objRoot.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot.addChild(objTrans);
        sphere = new Sphere(0.15f,redSphereApp);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans.setTransform(pos1);
        objTrans.addChild(sphere);
        objRoot.addChild(objTrans);
        BoundingSphere bounds = new BoundingSphere
                (new Point3d(0.0,0.0,0.0),100.0);
        Color3f light1Color = new Color3f(0.2f,0.2f,1.0f);
        Vector3f light1Direction = new Vector3f(+4.0f,-7.0f,-12.0f);
        DirectionalLight light1 = new DirectionalLight
                (light1Color,light1Direction);
        light1.setInfluencingBounds(bounds);
        objRoot.addChild(light1);
        Color3f ambientColor = new Color3f(1.0f,1.0f,1.0f);
        AmbientLight ambientLightNode = new AmbientLight(ambientColor);
        ambientLightNode.setInfluencingBounds(bounds);
        objRoot.addChild(ambientLightNode); 
        Color3f bgColor = new Color3f(0.0f, 0.2f, 1.0f);
        Background bg = new Background(bgColor);
        bg.setApplicationBounds(bounds);
        objRoot.addChild(bg);
        return objRoot;
    }

    public BranchGroup createSceneGraph2(){
        objRoot2.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot2.addChild(objTrans2);
        sphere2 = new Sphere(0.18f);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans2.setTransform(pos1);
        objTrans2.addChild(sphere2);
        objRoot2.addChild(objTrans2);
        return objRoot2;
    }

    public BranchGroup createSceneGraph3(){
        objRoot3.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans3 = new TransformGroup();
        objTrans3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot3.addChild(objTrans3);
        sphere3 = new Sphere(0.18f);
        objTrans3 = new TransformGroup();
        objTrans3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans3.setTransform(pos1);
        objTrans3.addChild(sphere3);
        objRoot3.addChild(objTrans3);
        return objRoot3;
    }

    public BranchGroup createSceneGraph4(){
        objRoot4.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans4 = new TransformGroup();
        objTrans4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot4.addChild(objTrans4);
        sphere4 = new Sphere(0.45f);
        objTrans4 = new TransformGroup();
        objTrans4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans4.setTransform(pos1);
        objTrans4.addChild(sphere4);
        objRoot4.addChild(objTrans4);
        return objRoot4;
    }

    public BranchGroup createSceneGraph5(){
        objRoot5.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans5 = new TransformGroup();
        objTrans5.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot5.addChild(objTrans5);
        sphere5 = new Sphere(0.45f);
        objTrans5 = new TransformGroup();
        objTrans5.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans5.setTransform(pos1);
        objTrans5.addChild(sphere5);
        objRoot5.addChild(objTrans5);
        return objRoot5;
    }

    public BranchGroup createSceneGraph6(){
        objRoot6.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans6 = new TransformGroup();
        objTrans6.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot6.addChild(objTrans6);
        sphere6 = new Sphere(0.18f);
        objTrans6 = new TransformGroup();
        objTrans6.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans6.setTransform(pos1);
        objTrans6.addChild(sphere6);
        objRoot6.addChild(objTrans6);
        return objRoot6;
    }

    public BranchGroup createSceneGraph7(){
        objRoot7.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans7 = new TransformGroup();
        objTrans7.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot7.addChild(objTrans7);
        sphere7 = new Sphere(0.18f);
        objTrans7 = new TransformGroup();
        objTrans7.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans7.setTransform(pos1);
        objTrans7.addChild(sphere7);
        objRoot7.addChild(objTrans7);
        return objRoot7;
    }

    PAPITest2(){
        setFocusable(true);
        setLayout(new BorderLayout());
        setVisible(true);
        setSize(505,525);
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        c = new Canvas3D(config);
        Color color = new Color(0.0f, 0.2f, 1.0f);
        setBackground(color);
        setSize(600,600);
        Font font = new Font("Helvatica",Font.BOLD,24);      
        scoreLabel = new JLabel("Score: 0");       
        add(BorderLayout.PAGE_START,scoreLabel);
        add("Center",c);
        c.addKeyListener(this);
        c.setSize(600,600);
        timer = new Timer(60,this);
        timer.start();
        scene = createSceneGraph();
        scene2 = createSceneGraph2();
        scene3 = createSceneGraph3();
        scene4 = createSceneGraph4();
        scene5 = createSceneGraph5();
        scene6 = createSceneGraph6();
        scene7 = createSceneGraph7();
        u = new SimpleUniverse(c);
        u.getViewingPlatform().setNominalViewingTransform();
        u.addBranchGraph(scene);
        u.addBranchGraph(scene2);
        u.addBranchGraph(scene3);
        u.addBranchGraph(scene4);
        u.addBranchGraph(scene5);
        u.addBranchGraph(scene6);
        u.addBranchGraph(scene7);
        rightX = 2.5f;
        right = 4.0f;
        float randomSpawn = (float) Math.random() * -2.7f + -3.1f;
        float randomSpawn2 = (float) Math.random() * -5.7f + -15.1f;
        float randomSpawn3 = (float) Math.random() * 5.7f + 18.1f;
        leftX = randomSpawn;
        left = randomSpawn;
        rightX2 = randomSpawn3;
        leftX2 = randomSpawn2;
        rightDx = -.05f;
        leftDx = .05f;  
    }

    public void keyPressed(KeyEvent e){
        if(e.getKeyChar() == 'd'|e.getKeyChar() == 'D'|e.getKeyCode() == e.VK_RIGHT){
            xloc = xloc + .1f;
        }

        if(e.getKeyChar() == 'a'|e.getKeyChar() == 'A'|e.getKeyCode() == e.VK_LEFT){
            xloc = xloc - .1f;
        }
    }    

    public void keyReleased(KeyEvent e){

    }

    public void keyTyped(KeyEvent e){

    }

    public void actionPerformed(ActionEvent e){
        height += .1f * sign;
        if(Math.abs(height * 2) >= 1)
            sign = -1.0f * sign;
        height2 += .1f * sign2;
        if(Math.abs(height2 * 2) >= 1)
            sign2 = -1.0f * sign2;
        Vector3d vec;
        int thing = 1;
        int thing2 = 2;
        if(height < -.4f){
          vec = new Vector3d(1.0,.8,1.0);
        }else{
          vec = new Vector3d(1.0,1.0,1.0);
          thing = 2;
        }
        trans.setScale(vec);
        trans.setTranslation(new Vector3f(xloc,height - .15f,0.0f));
        objTrans.setTransform(trans);
        if(height < -.10f){
          vec = new Vector3d(1.0,1.0,1.0);
          thing2 = 1;
        }
        if(height < -.4f){
          trans.setScale(new Vector3d(1.0,1.0,1.0));
        }
        if(score >= 1000){
            rightDx = -.06f;
            leftDx = .06f; 
        }
        if(score >= 2000){
            rightDx = -.07f;
            leftDx = .07f; 
        }
        if(score >= 4000){
            rightDx = -.08f;
            leftDx = .08f; 
        }
        if(score >= 5000){
            rightDx = -.1f;
            leftDx = .1f; 
        }
        if(score >= 10000){
            rightDx = -.2f;
            leftDx = .2f; 
        }
        if(score >= 15000){
            rightDx = -.3f;
            leftDx = .3f; 
        }
        Vector3f vector = new Vector3f(rightX += rightDx,-.7f,0.0f);
        trans.setTranslation(vector);
        objTrans2.setTransform(trans);
        Vector3f vector2 = new Vector3f(leftX += leftDx,-.7f,0.0f);
        trans.setTranslation(vector2);
        objTrans3.setTransform(trans);
        Vector3f vector3 = new Vector3f(rightX2 += rightDx,-.4f,0.0f);
        trans.setTranslation(vector3);
        objTrans4.setTransform(trans);
        Vector3f vector4 = new Vector3f(leftX2 += leftDx,-.4f,0.0f);
        trans.setTranslation(vector4);
        objTrans5.setTransform(trans);
        Vector3f vector5 = new Vector3f(right += rightDx,-.7f,0.0f);
        trans.setTranslation(vector5);
        objTrans6.setTransform(trans);
        Vector3f vector6 = new Vector3f(left += leftDx,-.7f,0.0f);
        trans.setTranslation(vector6);
        objTrans7.setTransform(trans);
        float leftXDistance = vector2.x - xloc - .22f;
        float xDistance = vector.x - xloc + .22f;
        float yDistance = -.7f - height;
        float xDistance2 = vector3.x - xloc - .05f;
        float yDistance2 = -.4f - height + .22f;
        float xDistance3 = vector5.x - xloc + .22f;
        float leftXDistance2 = vector4.x - xloc + .05f;
        float leftXDistance3 = vector6.x - xloc - .22f;
        double distance = Math.sqrt((xDistance * xDistance) + (yDistance * yDistance));
        double distance2 = Math.sqrt((xDistance2 * xDistance2) + (yDistance2 * yDistance2));
        double distance3 = Math.sqrt((xDistance3 * xDistance3) + (yDistance * yDistance));
        double leftDistance = Math.sqrt((leftXDistance * leftXDistance) + (yDistance * yDistance));
        double leftDistance2 = Math.sqrt((leftXDistance2 * leftXDistance2) + (yDistance2 * yDistance2));
        double leftDistance3 = Math.sqrt((leftXDistance3 * leftXDistance3) + (yDistance2 * yDistance2));
        if(distance < vec.x / 2 + .09f){
            if(thing == 2){

                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 2.5f + 3.1f;
                rightX = randomSpawn;
                trans.setTranslation(vector);
                objTrans2.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(distance3 < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 2.5f + 3.1f;
                right = randomSpawn;
                trans.setTranslation(vector5);
                objTrans6.setTransform(trans);
            }
            if(thing == 1){
                score -= 100;
                objRoot.detach();
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(distance2 < vec.x / 2 + .09f){
            if(thing2 == 2){
                score += 200;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 4.1f + 20.9f;
                rightX2 = randomSpawn;
                trans.setTranslation(vector3);
                objTrans4.setTransform(trans);
            }
            if(thing2 == 1){
                score -= 200;
                objRoot.detach();
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftDistance < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -1.5f + -2.7f;
                leftX = randomSpawn;
                trans.setTranslation(vector2);
                objTrans3.setTransform(trans);
            }
            if(thing == 1){
                score -= 100;
                objRoot.detach();
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftDistance3 < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -1.5f + -2.7f;
                left = randomSpawn;
                trans.setTranslation(vector6);
                objTrans7.setTransform(trans);
            }
            if(thing == 1){
                score -= 100;
                objRoot.detach();
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftDistance2 < vec.x / 2 + .09f){
            if(thing2 == 2){
                score += 200;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -3.1f + -17.9f;
                leftX2 = randomSpawn;
                trans.setTranslation(vector4);
                objTrans5.setTransform(trans);
            }
            if(thing2 == 1){
                score -= 200;
                objRoot.detach();
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(rightX < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            rightX = randomSpawn;
            trans.setTranslation(vector);
            objTrans2.setTransform(trans);
        }
        if(leftX > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            leftX = randomSpawn;
            trans.setTranslation(vector2);
            objTrans3.setTransform(trans);
        }
        if(right < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            right = randomSpawn;
            trans.setTranslation(vector);
            objTrans2.setTransform(trans);
        }
        if(left > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            left = randomSpawn;
            trans.setTranslation(vector2);
            objTrans3.setTransform(trans);
        }
        if(rightX2 < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            rightX2 = randomSpawn;
            trans.setTranslation(vector3);
            objTrans4.setTransform(trans);
        }
        if(leftX2 > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            leftX2 = randomSpawn;
            trans.setTranslation(vector4);
            objTrans5.setTransform(trans);
        }
        if(xloc > .8f){
            xloc = .8f;
        }
        if(xloc < -.8f){
            xloc = -.8f;
        }
        sumScore = score;
        if(!isAlive && !isEndscreen){
            endScreen();
        }
    }

    public void endScreen(){
        isEndscreen = true;
        remove(scoreLabel);
        remove(c);
        setSize(600,600);
        setVisible(true);
        setLayout(new BorderLayout(1,1));
        Font font = new Font("Helvatica",Font.BOLD,24);
        if(sumScore < 0){
            sumScore = 0;
        }
        label = new JLabel("Your Score: " + sumScore);  
        JLabel label2 = new JLabel(" Press Space");
        label2.setFont(font);
        label.setFont(font);
        setBackground(Color.white);
        add(BorderLayout.NORTH,label);
        add(BorderLayout.CENTER,label2);
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T12:02:59.997

1.  您`paint()`无需调用即可覆盖`super.paint()`--> 这将导致许多绘画问题
2.  考虑覆盖`paintComponent()`而不是`paint()`，并调用该`super`方法
3.  永远不要调用`repaint()`inside `paint()/paintComponent()`，这将创建一个无限循环，会消耗资源。
4.  正如@AndrewThompson 和@mKorbel 提到的那样，不要覆盖任何顶级容器（Frame/Dialog/...）的方法，而是扩展`JPanel`or `JComponent`，覆盖其 paintComponent() 方法并调用 super，并将其设置为内容顶级容器的窗格。

# java - 如何使用“x <= y && x >= y && x != y”使循环无限？

> ID：15970639
> 
> 赞同：23
> 
> 时间：2013-04-12T11:50:06.863
> 
> 标签：java

几年前我有这个面试问题，但我还没有找到答案。

x 和 y 应该是什么才能形成无限循环？

```
while (x <= y&& x >= y && x != y) {

} 
```

我们尝试了`Nan`, `infinity+/-`,`null`

`float`与`int`。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-12T11:52:50.383

您需要两个可比较的变量，具有相同的值，但代表不同的实例，例如：

```
Integer x = new Integer(0);
Integer y = new Integer(0); 
```

`x <= y`并且`y <= x`都是正确的，因为它们`Integer`是未装箱的，但是实例相等性`x == y`是错误的。

请注意，它也适用于`Float`,`Long`并且`Double`任何值（不仅仅是 0）都适用。

* * *

您还可以使用 JVM 的复杂性——它们通常只缓存高达 127 的整数，所以这也可以：

```
Integer x = 128;
Integer y = 128; 
```

（但它不会与 127）。

或者更简单地说，因为`Double`s 通常根本不缓存：

```
Double x = 0d;
Double y = 0d; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T11:53:58.460

您必须创建两个整数对象，例如：

```
Integer x = new Integer(2);
Integer y = new Integer(2); 
```

因为`x`and`y`是 Objects 而没有序数类型，所以你会得到一个无限循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T12:10:05.580

你已经得到了答案，我只是想说我是如何得到同一个答案的。在正常情况下，这样的测试是没有用的，两个数字不可能这样工作。所以这意味着它必须是特定于 java 的。

x 和 y 可以是简单的类型 - 这使得它不可能马上。

x 和 y 可以是对象。但是哪些对象与 <= 或 >= 进行比较？只有“盒装”数字。因此，答案来得非常快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:55:32.673

这里是。

```
Integer x =1;
Integer y = new Integer(1);
while(x <= y&& x >= y && x != y) {
    System.out.println("Success");
} 
```

# java - 使用MongoDB更新文档内数组中的元素不保留其类型

> ID：15970641
> 
> 赞同：2
> 
> 时间：2013-04-12T11:50:09.437
> 
> 标签：java, mongodb, database

在我的项目中有这样的结构：

```
class User {
  private List<MapObject> mapObjects;
}

class MapObject {
  ... some fields...
}

class SubMapObject {
  ... some additional fields
} 
```

最初，User 类填充了来自模板的数据（还包括 SubMapObject 类的实例），并通过 Spring 集成中的 MongoTemplate 存储在 MongoDB 中，如下所示：

```
mongoOps.insert(u); 
```

并且mapObjects字段中每个条目的信息都被保留了，还有它是什么**_class**的信息。（如果它是子类）

然后，我们需要更新 User 的 mapObjects 字段中的单个元素。我们这样做：

```
mongoOps.updateFirst(
                query(where("_id").is(userObjectId).and("mapObjects._id")
                        .is(mo.get_id())), update("mapObjects.$", mo),
                User.class); 
```

例如，其中**mo**是 SubMapObject。

每当传递任何（MapObject）实例的子类时，该对象的 MongoDB 记录中有关它是什么类（_class）字段的信息都会丢失，它被视为其父级 - MapObject。所以我们有以下问题:)

1）我们在哪里做错了以及如何保存该对象类的信息？

2）此外，我们想知道更新整个 mapObjects 字段是否比仅更新其中的特定元素更快（因为在这种情况下它必须迭代才能找到它）。一个用户很可能在其 mapObjects 列表中有 300-400 个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T16:45:14.093

我刚刚遇到了这个并管理了一个解决方案。我假设您也在使用 Spring Data for MongoDB Repository 接口，如果是这样，请在此处查看相关问题：[How would I do $push using MongoRepository in Spring Data?](https://stackoverflow.com/q/14247573) 更多细节。

基本思想是，一旦你为你的存储库连接了自定义类，那么最后一步就是使用从你的上下文中注入 mongo 映射转换器。然后，与其传递您的对象，不如先将其转换为 DBObject 并保存该 DBObject。转换器应按预期写出一个 _class 字段。

# python - 将 dict 转换为配置文件，然后从 config 恢复 dict

> ID：15970647
> 
> 赞同：5
> 
> 时间：2013-04-12T11:50:35.880
> 
> 标签：python, text, configuration, dictionary

例如，我在 Python 中有这样的字典：

```
{"a_summary" : 
   {"data1":{"length":100, "quality":10}, 
    "data2":{"length":90, "quality":9}},
"b_summary" :  
   {"data1":{"comments":19, "views":100}, 
    "data2":{"comments":9, "views":4}}} 
```

然后我想把它转换成这样的conf文件：

```
[a_summary]
data1_length=100
data1_quality=10
data2_length=90
data2_quality=9

[b_summary]
data1_comments=19
data1_views=100
data2_comments=9
data2_views=4 
```

虽然看起来有点奇怪`data1_`或者`data2_`需要表示嵌套，但现在看起来还可以。

但是后来我需要把这个 conf 文件发送给另一个用户，他需要从这个 conf 文件中恢复原始字典。似乎用户必须编写更多代码来恢复字典。但是，这个解决方案看起来很脏。

我想知道是否有一种 Pythonic 方式可以让我将 dict 保存到 conf 文件中（如果 conf 文件不合适，其他可读的纯文本格式也是可以接受的），然后从该纯文本文件中恢复 dict。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T11:58:30.427

查看[configparser](http://docs.python.org/3.2/library/configparser.html)模块。它可以帮助你做你想做的事。

```
import configparser

data = {"a_summary" : {"data1":{"length":100, "quality":10}, 
            "data2":{"length":90, "quality":9}},
        "b_summary" :  {"data1":{"comments":19, "views":100}, 
            "data2":{"comments":9, "views":4}}}
config = configparser.ConfigParser()
for key1, data1 in data.items():
    config[key1] = {}
    for key2, data2 in data1.items():
        for key3, data3 in data2.items():
            config[key1]["{}_{}".format(key2, key3)] = str(data3)
with open('example.ini', 'w') as configfile:
    config.write(configfile) 
```

再读一遍：

```
config2 = configparser.ConfigParser()
config2.read('example.ini')
data = {}
for key in config2.sections():
    data[key] = {}
    for key2 in config2[key]:
        k1, k2 = key2.split('_')
        if k1 not in data[key]:
            data[key][k1] = {}
        data[key][k1][k2] = int(config2[key][key2]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T11:52:48.207

或许将其另存为 JSON：

```
import json

with open('configfilename', 'w') as configfile:
    json.dump(yourdict, configfile, indent=2) 
```

我设置[`json.dump()`](http://docs.python.org/2/library/json.html)缩进以使文件具有合理的可读性。

加载：

```
import json

with open('configfilename', 'r') as configfile:
    yourdict = json.load(configfile) 
```

`indent`设置为`2`，您的结构将被写为：

```
{
  "a_summary": {
    "data1": {
      "length": 100, 
      "quality": 10
    }, 
    "data2": {
      "length": 90, 
      "quality": 9
    }
  }, 
  "b_summary": {
    "data1": {
      "comments": 19, 
      "views": 100
    }, 
    "data2": {
      "comments": 9, 
      "views": 4
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-21T15:18:27.367

如果是 .ini 文件，您可以使用 configobj 模块。读书：

```
from configobj import ConfigObj
dict = ConfigObj(path) 
```

保存：

```
from configobj import ConfigObj
config = ConfigObj(dict)
config.filename = "config.ini"
config.write() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-17T03:45:05.770

可以在没有循环或 3rd 方模块的情况下执行此操作。

无论字典有多深，这都会起作用。

```
from configparser import ConfigParser

data = {"a_summary" : {"data1":{"length":100, "quality":10}, 
            "data2":{"length":90, "quality":{"q1":1, "q2":{"am": "high", "pm": "low"}}}},
        "b_summary" :  {"data1":{"comments":19, "views":100}, 
            "data2":{"comments":9, "views":4}}}

# dict -> ConfigParser
config = ConfigParser()
config.read_dict(data)
with open('example.ini', 'w') as configfile:
    config.write(configfile)

# check result
with open('example.ini', 'r') as configfile2:
    print(configfile2.read())

# ConfigParser -> dict
config2 = ConfigParser()
config2.read('example.ini')
data2 = {section: dict(config2[section]) for section in config2.sections()}
print(data2) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T11:52:56.487

只需将其写为 JSON 并从中恢复即可。它仍然非常易读，并且很容易支持超出“INI”语法的基本数据结构。

# html - Outlook 表格宽度问题中的 HTML 电子邮件 - 内容比指定的表格宽度宽

> ID：15970660
> 
> 赞同：38
> 
> 时间：2013-04-12T11:51:17.963
> 
> 标签：html, email, templates, outlook, width

我的 HTML 电子邮件模板在 Gmail、Apple Mail 和 iOS Mail 中正确显示，没有出现重大问题。然而，前景是一个可怕的混乱，我无法终生弄清楚我做错了什么？？？

我的电子邮件模板没有使用任何过于疯狂的 CSS，而是使用表格进行布局，我为所有内容设置了固定的像素宽度。

问题是我的布局中的每个表格都拉伸到 100%，尽管我将容器设置为 580 像素，内部内容设置为 450 像素。

**编码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <!-- Facebook sharing information tags -->
        <meta property="og:title" content="*|MC:SUBJECT|*" /><title>*|MC:SUBJECT|*</title>
        <style type="text/css">
            /* Client-specific Styles */
            #outlook a{padding:0;} /* Force Outlook to provide a "view in browser" button. */
            body{width:100% !important;} /* Force Hotmail to display emails at full width */
            body{-webkit-text-size-adjust:none;} /* Prevent Webkit platforms from changing default text sizes. */

            /* Reset Styles */
            body{margin:0; padding:0;}
            img{border:none; font-size:14px; font-weight:bold; height:auto; line-height:100%; outline:none; text-decoration:none; text-transform:capitalize;}
        </style>
    </head>
    <body bgcolor="#444444">
        <center>
            <table border="0" cellpadding="0" cellspacing="0" width="580px" style="background-color: #0290ba;">
                <tr>
                    <td align="center" valign="top">
                <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/header.png" width="580px" />
                    </td>
                </tr>
                <tr>
                    <td align="center" valign="top">
                        <table border="0" cellpadding="0" cellspacing="0" width="450px">
                                <tr>
                                    <td align="center" valign="top" width="450px">
                                        <br />
                                        <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/hello_header.png" width="450px" />
                                    </td>
                                </tr>
                            </table>
                            <table border="0" cellpadding="0" cellspacing="0" width="450px">
                                <tr>
                                    <td align="center" valign="top" width="214px">
                                        <br />
                                        <div style="color:#004c63; font-family: Georgia, serif; font-size: 17px; line-height:100%; text-align:left; font-style: italic;">
                                            We consider ourselves partners in your business with the specific purpose of making your profit grow.
                                        </div>
                                    </td>
                                    <td width="236px"></td>
                                </tr>
                            </table>
                            <table border="0" cellpadding="0" cellspacing="0" width="450px">
                                <tr>
                                    <td align="center" valign="top" width="214px">
                                        <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                            We have been pretty busy for the last 2 1/2 years getting our business up and running, busy doing day to day and long term projects for our clients. But it's come to our attention not everyone is aware of all the cool (and not so cool but just as important) things we do. So we're going to show off a bit, tell you a bit more about what we do so you can benefit from our wide range of skills, services and experiences. This email is the start of that process: we're going to show you a small (we don't want to annoy you with too much stuff) but diverse selection of projects each <!-- month to hopefully inspire you. Then if you want any information or ideas on how we could do something similar for you just let us know - we'd love to help! We are also in the process of building ourselves a new web site (finally) - we'll let you know when its live but check out our temporary page in the mean time - here. -->
                                        </p>
                                    </td>
                                    <td width="236px">
                                        <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                            <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/world-icon-image.png" width="110%" style="margin-left: 20px;" />
                                        </p>
                                        <br />
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr style="background-color: #d82445;">
                        <td align="center" valign="top">
                            <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/divider_showcase.png" width="580px" />
                        </td>
                    </tr>
                    <tr style="background-color: #d82445;">
                        <td align="center" valign="top">
                            <table border="0" cellpadding="0" cellspacing="0" width="450px">
                                <tr>
                                    <td>&nbsp;</td>
                                </tr>
                                <tr>
                                    <td valign="top" width="124px">
                                        <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/showcase_image1.png" width="124px" />
                                    </td>
                                    <td width="10px"></td>
                                    <td>
                                        <table border="0" cellpadding="0" cellspacing="0" width="316px">
                                            <tr>
                                                <td valign="top">
                                                    <div style="color:#6c1e2c; font-family: Georgia, serif; font-size: 17px; line-height:100%; text-align:left; font-style: italic; font-weight: 500;">
                                                        Title Goes Here
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td valign="top" width="150px">
                                                    <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                                        Sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem .
                                                    </p>
                                                </td>
                                                <td width="10px"></td>
                                                <td valign="top" width="160px">
                                                    <p style="margin-top: 20px;">
                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_showcase_forward.png" style="margin-top: -10px;" /></a>

                                                        <br />
                                                        <br />

                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_showcase_moreinfo.png" /></a>
                                                    </p>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                </tr>
                                <tr>
                                    <td valign="top" width="124px">
                                        <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/showcase_image1.png" width="124px" />
                                    </td>
                                    <td width="10px"></td>
                                    <td>
                                        <table border="0" cellpadding="0" cellspacing="0" width="316px">
                                            <tr>
                                                <td valign="top">
                                                    <div style="color:#6c1e2c; font-family: Georgia, serif; font-size: 17px; line-height:100%; text-align:left; font-style: italic; font-weight: 500;">
                                                        Title Goes Here
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td valign="top" width="150px">
                                                    <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                                        Sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem .
                                                    </p>
                                                </td>
                                                <td width="10px"></td>
                                                <td valign="top" width="160px">
                                                    <p style="margin-top: 20px;">
                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_showcase_forward.png" style="margin-top: -10px;" /></a>

                                                        <br />
                                                        <br />

                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_showcase_moreinfo.png" /></a>
                                                    </p>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                </tr>
                                <tr>
                                    <td valign="top" width="124px">
                                        <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/showcase_image1.png" width="124px" />
                                    </td>
                                    <td width="10px"></td>
                                    <td>
                                        <table border="0" cellpadding="0" cellspacing="0" width="316px">
                                            <tr>
                                                <td valign="top">
                                                    <div style="color:#6c1e2c; font-family: Georgia, serif; font-size: 17px; line-height:100%; text-align:left; font-style: italic; font-weight: 500;">
                                                        Title Goes Here
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td valign="top" width="150px">
                                                    <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                                        Sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem .
                                                    </p>
                                                </td>
                                                <td width="10px"></td>
                                                <td valign="top" width="160px">
                                                    <p style="margin-top: 20px;">
                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_showcase_forward.png" style="margin-top: -10px;" /></a>

                                                        <br />
                                                        <br />

                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_showcase_moreinfo.png" /></a>
                                                    </p>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                </tr>
                            </table>
                            <br />
                        </td>
                    </tr>
                    <tr style="background-color: #fdac57;">
                        <td align="center" valign="top">
                            <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/divider_footer.png" width="580px" />
                        </td>
                    </tr>
                    <tr style="background-color: #fdac57;">
                        <td align="center" valign="top">
                            <table width="450px" align="center" cellspacing="0" cellpadding="0" border="0">
                                <tr>
                                    <td>
                                        <table>
                                            <tr>
                                                <td>&nbsp;</td>
                                            </tr>
                                            <tr>
                                                <td valign="top" width="215px">
                                                    <div style="color:#6c1e2c; font-family: Georgia, serif; font-size: 17px; line-height:100%; text-align:left; font-style: italic; font-weight: 500;">
                                                        Drop us a line, <br />
                                                        visit our website, or <br />
                                                        forward this to a friend.
                                                    </div>
                                                </td>
                                                <td valign="top" width="40px">
                                                    &nbsp;
                                                </td>
                                                <td valign="top" width="195px">
                                                    <div style="color:#6c1e2c; font-family: Georgia, serif; font-size: 17px; line-height:100%; text-align:left; font-style: italic; font-weight: 500;">
                                                        Get in touch <br />
                                                        today - You’ll <br />
                                                        love working with us
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td valign="top" width="215px">
                                                    <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                                        Don’t worry if it's an odd hour, leave a message and we will get back to you at your convenience.
                                                    </p>
                                                </td>
                                                <td valign="top" width="40px">
                                                    &nbsp;
                                                </td>
                                                <td valign="top" width="195px">
                                                    <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                                        163 Bateau Bay Rd, Bateau Bay, <br />
                                                        NSW 2261, <br />
                                                        Australia
                                                    </p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td valign="bottom" width="215px">
                                                    <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/icons/twitter.png" style="padding:0; padding-right: 5px; margin: 0;" /></a>
                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/icons/facebook.png" style="padding:0; padding-right: 5px; margin: 0;" /></a>
                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/icons/vimeo.png" style="padding:0; padding-right: 5px; margin: 0;" /></a>
                                                        <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/icons/instagram.png" style="padding:0; padding-right: 5px; margin: 0;" /></a>
                                                    </p>
                                                </td>
                                                <td valign="top" width="40px">
                                                    &nbsp;
                                                </td>
                                                <td valign="top" width="195px">
                                                    <p style="line-height: 150%; color: #FFFFFF; text-align: justify; font-size: 10px;">
                                                        -- --- ----, ------ --- --- ---- <br />
                                                        +-- - ---- ---- <br />
                                                        ----@--------.com <br />
                                                        --------.com <br />
                                                    </p>
                                                </td>
                                            </tr>
                                        </table>
                                        <br />
                                        <table width="450px">
                                            <tr>
                                                <td width="144px" align="center">
                                                    <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_footer_forward.png" /></a>
                                                </td>
                                                <td width="6px">&nbsp;</td>
                                                <td width="144px" align="center">
                                                    <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_footer_visit.png" /></a>
                                                </td>
                                                <td width="6px">&nbsp;</td>
                                                <td width="144px" align="center">
                                                    <a href="#"><img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/button_footer_getintouch.png" /></a>
                                                </td>
                                            </tr>
                                        </table>
                                        <br />
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr style="background-color: #FDFDFD;">
                        <td align="center" valign="top">
                            <br />
                            <img alt="" src="http://dev.adrian-brown.com/hicks-ads/images/logo.png" /> <br />
                            <p style="line-height: 150%; color: #000000; text-align: center; font-size: 10px;">&copy; Copyright 2013 HicksAds - Sent With love :)</p>
                        </td>
                    </tr>
                </table>
            </center>
        </body>
    </html> 
```

非常感谢任何帮助，例如令人难以置信的赞赏..

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-12T12:00:22.770

我猜问题出在表格中的宽度属性中，例如 td remove 'px'

```
<table border="0" cellpadding="0" cellspacing="0" width="580px" style="background-color: #0290ba;"> 
```

应该

```
<table border="0" cellpadding="0" cellspacing="0" width="580" style="background-color: #0290ba;"> 
```

# google-maps - KML 中的 Google 图标不匹配

> ID：15970661
> 
> 赞同：3
> 
> 时间：2013-04-12T11:51:20.627
> 
> 标签：google-maps, kml

我想使用在此页面[http://kml4earth.appspot.com/icons.html](http://kml4earth.appspot.com/icons.html)上找到的一些不错的图标。我选择了这个图标[http://maps.google.com/mapfiles/kml/pal3/icon22.png](http://maps.google.com/mapfiles/kml/pal3/icon22.png) 但是当我在 kml 文件中使用它并在谷歌地图（或谷歌地球）中显示这个 KML 时，它显示为双绿色三角形。

该页面上的许多图标都会发生这种情况。我能做些什么 ？

这是一个示例 KML：

```
<?xml version='1.0' encoding='UTF-8'?>
<kml xmlns = 'http://www.opengis.net/kml/2.2' >
<Document>
<Style id='scuola'>
<IconStyle>
<Icon>
<href>http://maps.google.com/mapfiles/kml/pal3/icon22.png</href>
</Icon>
</IconStyle>
</Style>
<Placemark>
<name>L08940P06194</name>
<description><![CDATA[Point: L08940P06194 School<br>]]></description>
<styleUrl>#scuola</styleUrl>
<Point>
<coordinates>-72.3553467, 18.5366992, 0 </coordinates>
</Point>
</Placemark>
</Document>
</kml> 
```

谢谢大卫·雷莫蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T15:33:29.080

在幕后，谷歌地球/谷歌地图正在重新映射某些图标 URL，例如[http://maps.google.com/mapfiles/kml/pal3/icon22.png](http://maps.google.com/mapfiles/kml/pal3/icon22.png)

如果您选择带有 URL 前缀的图标：*[http](http://maps.google.com/mapfiles/kml/pal) ://maps.google.com/mapfiles/kml/pal {2,3,4,5}* 那么您会注意到它被重新映射为带有 URL 的“标准”图标*[http://maps.google.com/mapfiles/kml/shapes](http://maps.google.com/mapfiles/kml/shapes)* /的前缀。

**这是 Google 地球和 Google 地图的未记录功能。**

您在问题中提到的网站的[注释部分](http://kml4earth.appspot.com/icons.html#notes)中描述了此“功能” 。

这种特殊的图标映射有点奇怪，但大多数图标重新映射似乎有些合理：
![全局图标](https://i.stack.imgur.com/v5dqI.png)=>![山图标](https://i.stack.imgur.com/cehgM.png)

原始网址：[http](http://maps.google.com/mapfiles/kml/pal3/icon22.png)
://maps.google.com/mapfiles/kml/pal3/icon22.png 映射图标：[http ://maps.google.com/mapfiles/kml/shapes/mountains.png](http://maps.google.com/mapfiles/kml/shapes/mountains.png)

这是另一个更直观的映射：

![森林/公园图标](https://i.stack.imgur.com/rCrpq.png)=>![公园图标](https://i.stack.imgur.com/9hb02.png)

原始网址：[http](http://maps.google.com/mapfiles/kml/pal2/icon12.png)
://maps.google.com/mapfiles/kml/pal2/icon12.png 映射图标：[http ://maps.google.com/mapfiles/kml/shapes/parks.png](http://maps.google.com/mapfiles/kml/shapes/parks.png)

您可以：

1.  让谷歌地球/谷歌地图重新映射图标并使用它或
2.  制作原始图标的副本（例如，保存在 Google Drive 中等）并在您的 KML 中使用新的 URL（作为自定义图标）按原样显示它。

# android - jar 文件的谷歌地图 V2 问题

> ID：15970662
> 
> 赞同：2
> 
> 时间：2013-04-12T11:51:20.873
> 
> 标签：android, google-maps-android-api-2, android-maps-v2, android-support-library

我在本教程的 2 月帮助中开发了 google Map v2[教程](http://dj-android.blogspot.in/2013/02/android-google-map-v2-part-1.html)。

## 它当时工作正常

我的代码如下：

```
<?xml version="1.0" encoding="utf-8"?>  
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"  
   package="com.djandroid.mapsv2"  
   android:versionCode="1"  
   android:versionName="1.0" >  
   <uses-sdk  
     android:minSdkVersion="8"  
     android:targetSdkVersion="16" />  
   <uses-permission android:name="android.permission.INTERNET" />  
   <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />  
   <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />  
   <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />  
   <uses-permission android:name="com.djandroid.mapsv2.permission.MAPS_RECEIVE" />  
   <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />  
   <uses-feature  
     android:glEsVersion="0x00020000"  
     android:required="true" />  
   <application  
     android:allowBackup="true"  
     android:icon="@drawable/ic_launcher"  
     android:label="@string/app_name"  
     android:theme="@style/AppTheme" >  
     <activity  
       android:name="com.djandroid.mapsv2.MainActivity"  
       android:label="@string/app_name" >  
       <intent-filter>  
         <action android:name="android.intent.action.MAIN" />  
         <category android:name="android.intent.category.LAUNCHER" />  
       </intent-filter>  
     </activity>  
     <meta-data  
       android:name="com.google.android.maps.v2.API_KEY"  
       android:value="API_KEY" />  
     <uses-library  
       android:name="com.google.android.maps"  
       android:required="true" />  
   </application>  
 </manifest> 
```

* * *

我的布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  

   xmlns:tools="http://schemas.android.com/tools"  
   android:layout_width="match_parent"  
   android:layout_height="match_parent"  
   tools:context=".MainActivity" >  
   <fragment  
     android:id="@+id/fragment1"  
     android:layout_width="match_parent"  
     android:layout_height="match_parent"  
     class="com.google.android.gms.maps.SupportMapFragment" />  
 </RelativeLayout> 
```

* * *

我的活动代码：

```
package com.djandroid.mapsv2;  
 import android.app.Activity;  
 import android.os.Bundle;  
 import android.support.v4.app.FragmentActivity;  
 public class MainActivity extends FragmentActivity {  
      @Override  
      protected void onCreate(Bundle arg0) {  
           // TODO Auto-generated method stub  
           super.onCreate(arg0);  
           setContentView(R.layout.activity_main);  
      }  
 } 
```

**当时我使用的是 lib Project`google-play-services`而不是`google-play-services.jar`. 现在我已经更新了 Android SDK。他们为我们提供`google-play-services.jar` 了 google-play-services lib 项目。**

## 所以，我的问题是：为什么所有代码​​都可以在 google-play-services lib 项目中正常工作。但不能与 google-play-services.jar 一起使用？

## 我只想要它不工作的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:55:40.597

jar 文件中有访问的资源，这些资源是通过库项目生成的。

这一切都与`com.google.android.gms.R`（特别是`R$stylable`）类文件丢失有关。

# iphone - 阻止对象离开屏幕

> ID：15970668
> 
> 赞同：0
> 
> 时间：2013-04-12T11:51:45.297
> 
> 标签：iphone, ios, objective-c

我编写了这段代码来阻止`UIImage`屏幕消失，但这仅适用于左侧。我怎样才能让这段代码也能在右侧工作？

请注意，`UIImage`由加速度计控制：

```
CGFloat leftOfWorld = 0.0f;
CGFloat minCenterX = leftOfWorld + (person.bounds.size.width / 2.0f);
person.center = CGPointMake(MAX(minCenterX, person.center.x), person.center.y); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:28:38.233

干得好：

```
CGFloat maxCenterX = self.view.frame.size.width - (person.bounds.size.width / 2.0f);
person.center = CGPointMake(MIN(maxCenterX, person.center.x), person.center.y); 
```

# php - 总结在 PHP 中动态创建的 2 个值

> ID：15970669
> 
> 赞同：1
> 
> 时间：2013-04-12T11:51:52.130
> 
> 标签：php, javascript, jquery

我有一个从数据库动态创建的表 ![在此处输入图像描述](https://i.stack.imgur.com/q26Nw.png)

我正在尝试总结字段中的值 I并立即将其显示在`select`字段中。`own evaluation``value next to it in the same row``Gap`

我用来填充这三列的代码是：

```
 echo "<td class='evaluation'>";
                echo "<select class='ownlevelselect' id='ownlevelselect' name='level-".$compi['Competence_ID']."' >";
                    echo "<option value=''>--</option><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option>";
                echo "</select>";
                echo '<a target="_blank" href="'.INDEX.'?categ='.$_GET['categ'].'&action='.$_GET['action'].'&subaction=viewlevels'.'&levels='.$compi['Competence_ID'].'">';
                echo '<img class="linkki" src="'.KUVAT.'paivita.gif" alt="'._("tiedot").'" title="'._("What is this?").'"/></a>';
                            echo "</td>";
            echo "<td class='mefly'>";
                echo $compi['actual_level'];        
            echo "</td>";

            echo "<td class='gap'>";
                echo "<input type='text' readonly style='width:20px;'>";
            echo "</td>"; 
```

我按照建议尝试了这个 Jquery 代码`silkfire`，但没有任何改变..

```
$(function() {
       $(document).on('change', 'td.evaluation select', function() {
          var gap = $(this).val() + $(this).parent('tr').find('td.mefly').text();

          $(this).parent('tr').find('td.gap input:text').val(gap);
       });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:01:39.390

给这三个单元格（td）一个类名，例如“evaluation”、“mefly”和“gap”。

然后将事件绑定到评估选择：

```
$(function() {
   $(document).on('change', 'td.evaluation select', function() {
      var gap = parseInt($(this).val()) + parseInt($(this).parents('tr').find('td.mefly').text());

      $(this).parents('tr').find('td.gap input:text').val(gap);
   });
}); 
```

# asp.net - 调用数百个类的方法，如何正确调用？

> ID：15970677
> 
> 赞同：0
> 
> 时间：2013-04-12T11:52:14.840
> 
> 标签：asp.net, oop, design-patterns

我在 asp.net 应用程序中有 200 个类，它们必须一起执行（调用某个方法）。这些类具有相同的接口。我应该如何编写代码以使它们全部一起执行，我不想在一个文件中声明该类的所有对象然后一一调用它们，因为这种方法容易出错，因为我可以忘记添加一些新的类。我想从内部设置这些类的执行，使用一些绑定到某些事件或其他东西，我应该如何创建这样的类模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:53:57.390

根据您想要的复杂程度，您可以使用托管可扩展性框架或 MEF。如果您使用 MEF 属性标记了所有类，则可以轻松地将它们加载到集合中并全部调用它们。

MEF 在幕后使用反射，但它为您封装了它，因此您不必担心它。

[这里](http://dotnetbyexample.blogspot.com/2010/04/very-basic-mef-sample-using-importmany.html)有一个如何使用 MEF 的非常简单的示例。

# android - 从 viewpager 片段活动中删除片段的状态

> ID：15970679
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:52:19.370
> 
> 标签：android, android-viewpager

我想`fragment`从`viewpager` `fragmentActivity`我将片段添加到.i 中的状态中删除状态，我在活动中`viewpager`覆盖我想删除.`onBackPressed``fragment``fragment`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:11:08.827

您可以参考以下文章，该文章快速描述了如何在片段中使用您所说的 backstack。

[从 backstack 中移除一个片段](https://stackoverflow.com/questions/9033019/removing-a-fragment-from-a-the-back-stack)

这种组件可以通过覆盖`onBackPressed()`Android Activity 中的功能来实现。

# .net - umbraco 内容树中的重复节点

> ID：15970681
> 
> 赞同：0
> 
> 时间：2013-04-12T11:52:25.500
> 
> 标签：.net, umbraco

目前我正在开发一个网站，该网站是用 Umbraco cms 制作的。我面临创建重复节点的问题。如果我创建一个节点并发布该节点，则会创建一个新的重复节点。这个重复的节点在我重新加载所有节点后可见。这是一个多语言网站。我附上一张图片以获得更清晰的解释。

![在此处输入图像描述](https://i.stack.imgur.com/Bi9Hy.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:48:08.417

如果您没有设置多个根节点来处理多种语言，您应该删除此文件： `AppCode/CopyDocumentToRelatedOnPublish.cs`根据包说明从项目中删除：

[http://our.umbraco.org/projects/website-utilities/multi-language-tools](http://our.umbraco.org/projects/website-utilities/multi-language-tools)

该包将创建重复的内容节点。

# android - Android USB 存储丢失

> ID：15970685
> 
> 赞同：0
> 
> 时间：2013-04-12T11:52:27.517
> 
> 标签：android, permissions, local-storage, mount

我的 root/CM10.1 Android 手机有一个奇怪的问题。不久前我意识到我的存储有问题。到目前为止，我认为这将是一个硬件缺陷。启动时，我的内部 USB 存储丢失（不是外部 SD 卡）。我只有我的“内部存储”和外部 SD。所以这个“驱动器”上的所有数据（如相机图片和一些应用程序）都不可用。

但过了一会儿，我意识到，将手机连接到 PC 时 - 最初它仍然不存在。但是在断开连接（并因此重新安装设备）之后，它突然就在那里。因此，我将其理解为安装问题或类似问题。在启动时查看日志时，我发现如下消息：

*I/DefContainer-JNI(2799)：错误打开：/storage/sdcard0：权限被拒绝*

所以我想到一个程序获取权限但在重新安装之前不会释放它们。

启动时，实际上并没有运行任何可疑的应用程序。所以我看不到那里的问题。有谁知道如何“重新安装”内部存储而不将其连接到电脑？我已经尝试修复文件系统的权限。这行不通！我刚买了ROM工具箱。我认为这个工具可能会做到这一点，但我不知道从哪里开始。

感谢您的帮助，托拜厄斯

![在此处输入图像描述](https://i.stack.imgur.com/1HBwS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:31:20.150

好的，我花了一段时间，但我想我已经找到了问题（或至少找到了解决方案）。另一个用户在这里描述了一个让我自己想起的问题：http: [//forum.xda-developers.com/showthread.php?t=601340](http://forum.xda-developers.com/showthread.php?t=601340)

看起来“检查错误”正在锁定卡，直到扫描完成。如本讨论所述，fsck_msdos 文件可能存在问题当我最终从*系统 /bin 中*删除此文件时，一切正常。

所以我假设检查过程处于一种死锁状态，无法完成检查以安装 sdcard。

我希望这对可能遇到同样问题的人有所帮助。

问候，托拜厄斯

# mysql - ONLY_FULL_GROUP_BY 未设置但仍有错误 1140

> ID：15970686
> 
> 赞同：1
> 
> 时间：2013-04-12T11:52:27.840
> 
> 标签：mysql, group-by, sql-mode, mysql-error-1140

我正在完成我的网站的实施，但现在我在网上遇到了一个我在本地没有的问题。

我收到此错误：

```
failed: Mixing of GROUP columns (MIN (), MAX (), COUNT (), ...) with no GROUP columns is illegal if there is no GROUP BY clause 
```

SQL 查询的结果

我在网上搜索了很多论坛，大多数用户建议更改我不能/不想要的查询，或者他们说可能是在 sql-mode: enabled `ONLY_FULL_GROUP_BY`of the server

我的在线服务器上的 sql-mode 是空的（我可以通过查询看到`select @@sql_mode;`）更可以肯定的是，我把`sql_mode='' in my.cnf`.

但问题依然存在。

这是由于我的在线服务器上的mysql 5.0.44 版本和本地5.1.32 版本（我没有这个错误......）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T11:30:18.063

是的。你说的对。发生这种情况是因为**MySQL 版本。**[在这里](https://stackoverflow.com/a/19297661/1031945)
查看我的答案

如何查看 MySQL 版本？

```
mysql> SELECT version();
+-----------+
| version() |
+-----------+
| 5.5.28    |
+-----------+
1 row in set (0.00 sec) 
```

为了测试 sql_mode `ONLY_FULL_GROUP_BY`，我创建了`patient`包含两列`id, name`并插入记录的表。请记住 sql_mode`ONLY_FULL_GROUP_BY`不是默认设置，如果需要，您需要设置。

1)MySQL 版本**5.0.45-community-nt**

```
SELECT name, MAX(id) FROM patient;
ERROR 1140 (42000): Mixing of GROUP columns (MIN(),MAX(),COUNT(),...) with no GROUP columns is illegal if there is no GROUP BY clause 
```

它失败了，将 sql_mode 设置为没有意义，`ONLY_FULL_GROUP_BY`因为它不允许未在 GROUP BY 子句中命名的非聚合列。

2)MySQL **5.1.40 版-社区**

```
mysql> SELECT name, MAX(id) from patient;
+----------+--------+
| MAX(id)  | name   |
+----------+--------+
|       33 | aniket |
+----------+--------+
1 row in set (0.03 sec) 
```

然后设置sql_mode后`ONLY_FULL_GROUP_BY`

```
mysql> set sql_mode = 'ONLY_FULL_GROUP_BY';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT name, MAX(id) from patient;
ERROR 1140 (42000): Mixing of GROUP columns (MIN(),MAX(),COUNT(),...) with no GROUP columns is illegal if there is no GROUP BY clause 
```

3)MySQL 版本**5.5.28**

```
mysql> SELECT name, MAX(id) from patient;
+----------+--------+
| MAX(id)  | name   |
+----------+--------+
|       33 | aniket |
+----------+--------+
1 row in set (0.03 sec) 
```

然后设置sql_mode后`ONLY_FULL_GROUP_BY`

```
mysql> set sql_mode = 'ONLY_FULL_GROUP_BY';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT name, MAX(id) from patient;
ERROR 1140 (42000): Mixing of GROUP columns (MIN(),MAX(),COUNT(),...) with no GROUP columns is illegal if there is no GROUP BY clause 
```

**结论**

如您所见，查询在 5.0.45 版本上失败，并在 5.1.40、5.5.28 和 5.1.32 上/之后成功（正如您在问题中提到的那样）。在 MySQL 版本[5.1.10（不确定）](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_only_full_group_by)`GROUP BY`之前，无论是否设置了 sql_mode，查询都不会失败`ONLY_FULL_GROUP_BY`。

一些有趣的错误和 sql_mode 常见问题链接

1.  [ONLY_FULL_GROUP_BY sql模式过于严格](http://bugs.mysql.com/bug.php?id=8510)
2.  [sql-mode：只有完整的 group by 模式不起作用](http://bugs.mysql.com/bug.php?id=27874)
3.  [MySQL 5.0 FAQ：服务器 SQL 模式](http://dev.mysql.com/doc/refman/5.0/en/faqs-sql-modes.html)

# javascript - 在 Javascript 中测试 Int 值（正则表达式）

> ID：15970693
> 
> 赞同：0
> 
> 时间：2013-04-12T11:52:41.463
> 
> 标签：javascript, regex, int

我有一个 javascript 函数，它将 Ajax 组合框中输入的文本与正则表达式相匹配。但似乎“测试”没有按预期工作。下面是我的代码，我没有得到我做错的地方。

```
 <script language="javascript" type="text/javascript">
    function cmbExample_OnBlur() {
        var regex = "^[0-9]{1,10}$";
        var sel = document.getElementById("MainTextBox").value;
        alert(sel);
        if (regex.test(sel)) {
            alert("success");
        }
        else {
            alert("error");
        }

    } 
```

我尝试将 sel 转换为字符串，然后它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:54:24.337

尝试使用实际的正则表达式，而不是字符串。

```
var regex = /^[0-9]{1,10}$/; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:55:16.860

那不是正则表达式，那是一个字符串。正则表达式文字将是：

```
var regex = /^[0-9]{1,10}$/ 
```

或者你可以使用：

```
var regex = new RegExp("^[0-9]{1,10}$"); 
```

顺便说一句，如果您查看控制台（`F12`在大多数系统上），错误消息应该已经解释了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:54:52.393

您需要使用以下方式从组合框中获取值：

```
document.getElementByID("SelectBoxName").options[document.getElementByID("SelectBoxName").selectedIndex].value 
```

这有点恶心，但它有效。您可以使用 .text 来获取文本而不是值（我认为这是您真正想要的。）

另外，其他人对正则表达式的说法是正确的。

干杯。

# c# - 在 Listbox 和 Listview 之间同步

> ID：15970696
> 
> 赞同：0
> 
> 时间：2013-04-12T11:52:51.603
> 
> 标签：c#

我有 ListBox 和 listview，在一个表单中，我必须在它们之间同步，例如，如果我选择列表框中的第一项，则必须在列表视图中选择它，如果我从列表视图，它必须在 ListBox 中被选中。

我有成功，从列表框到列表视图，但不是对他们两个，我尝试使用标志，这不起作用。

我的**列表框**代码是这样的：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{    
    this.listView1.Items[listBox1.SelectedIndex].Selected = true;
} 
```

**ListView**代码是：

```
 private void listView1_SelectedIndexChanged(object sender, EventArgs e)
 {
     this.listBox1.SetSelected(this.listView1.FocusedItem.Index, true);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:06:28.190

尝试用于列表视图

listView1.ItemSelectionChanged += new ListViewItemSelectionChangedEventHandler(listView1_ItemSelectionChanged);

```
 void listView1_ItemSelectionChanged(object sender, ListViewItemSelectionChangedEventArgs e)
    {
        this.listBox1.SetSelected(this.listView1.FocusedItem.Index, true);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:03:10.233

我在我的电脑上尝试，以下代码有效：

```
namespace  WindowsFormsApplication5
    {
        public partial class Form4 : Form
        {
            public Form4()
            {
                InitializeComponent();
                listBox1.SelectedIndexChanged += new EventHandler(listBox1_SelectedIndexChanged);
                listView1.ItemSelectionChanged += new ListViewItemSelectionChangedEventHandler(listView1_ItemSelectionChanged);
                listView1.Items.Add("3434");
                listView1.Items.Add("13434");
                listBox1.Items.Add("3434");
                listBox1.Items.Add("13434");
            }

            void listView1_ItemSelectionChanged(object sender, ListViewItemSelectionChangedEventArgs e)
            {
                this.listBox1.SetSelected(this.listView1.FocusedItem.Index, true);
            }

            void listBox1_SelectedIndexChanged(object sender, EventArgs e)
            {
                this.listView1.Items[listBox1.SelectedIndex].Selected = true;
            }
        }
    } 
```

# java - ObjectOutputStream 被击中

> ID：15970710
> 
> 赞同：5
> 
> 时间：2013-04-12T11:53:24.313
> 
> 标签：java, networking

负责在套接字上写入的线程（大量数据，大约 4-5MBPS）被卡住，有时长达 15 分钟，然后再次开始操作，然后再次卡住部分堆栈跟踪作为：

```
 java.lang.Thread.State: RUNNABLE
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at java.io.BufferedOutputStream.write(Unknown Source)
    - locked <0xa4ca4660> (a java.io.BufferedOutputStream)
    mypackage.myMethod() 
```

我的直接假设是 ObjectWrite 正在被阻塞。但这种行为充其量是不稳定的。底层网络似乎还可以。在卡住之前，它已经成功写入了几个小时。

在写入下一个块之前，线程也需要至少 50 毫秒的休息时间。那么，如果它不是正常的块，它还能是什么？

堆栈：

```
ff2cba60 send     (10, 4dc230, c312, 0)
fe03ce58 Java_java_net_SocketOutputStream_socketWrite0 (3a4928, c312, 10, 95f7f890, 0, c312) + 158
fc093e5c * java/lang/System.getSecurityManager()Ljava/lang/SecurityManager;+3
fc08ec3c * *java/net/SocketOutputStream.socketWrite([BII)V [compiled] +45
fc08ec3c * *java/net/SocketOutputStream.write([BII)V+5
fc005ab0 * java/io/BufferedOutputStream.write([BII)V+20
fc005ab0 * mypackage.mymethod()V+84 (line 598) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:59:58.210

我怀疑问题是您的服务器读取速度不够快，因此 TCP 发送缓冲区已满。TCP 有算法来帮助它确定何时发送数据包，它主要基于当前的传输状态。因此，如果 TCP 堆栈检测到拥塞（因为您正在发送大量数据而服务器没有跟上）。它会减慢/暂停。阅读[此](http://www.onlamp.com/2005/11/17/tcp_tuning.html)内容以获取更多信息。

我无法轻易回答究竟要修复什么，因为您共享的只是堆栈跟踪，但如果我是您，在这种情况下，我会查看服务器而不是客户端。

# java - DST_OFFSET 在不应该更改时更改

> ID：15970713
> 
> 赞同：1
> 
> 时间：2013-04-12T11:53:39.157
> 
> 标签：java, datetime, timezone

我正在尝试运行以下代码。我用 dst 从 3 月 4 日凌晨 2 点开始定义一个时区，并在 3 月 2 日凌晨 5 日结束。

```
 SimpleTimeZone st = new SimpleTimeZone(-18000000, "DSTTesting", Calendar.MARCH, 4, 1, 7200000, Calendar.MARCH, -1, 1, 7200000);

  Calendar cal = Calendar.getInstance(st);
  cal.set(2013, 0, 1, 0, 0, 0);
  cal.set(Calendar.MILLISECOND, 0);
  System.out.println("DST_OFFSET before subtracting hours : "+cal.get(Calendar.DST_OFFSET));
  cal.add(Calendar.HOUR, -2);
  System.out.println("DST_OFFSET after subtracting hours : "+cal.get(Calendar.DST_OFFSET)); 
```

输出为：
减去小时前的 DST_OFFSET ：0
减去小时后的 DST_OFFSET ：3600000

当我从 2013 年 1 月凌晨 1 点减去 2 小时时，不确定为什么 DST_OFFSET 会发生变化。理想情况下，2013 年 1 月 1 日和 2012 年 12 月 31 日，这两个日期都不在我创建的 TimeZone 的 DST 期间，因此两者的 DST_OFFSET 值应该相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:28:55.490

我认为您有一些无效的构造函数参数。[请参阅此处](http://docs.oracle.com/javase/7/docs/api/java/util/SimpleTimeZone.html)的文档。

您正在指定以下起始值：

```
Calendar.MARCH, 4, 1 
```

如果您的意思是“3 月 4 日”，那么您应该为星期几指定零：

```
Calendar.MARCH, 4, 0 
```

如果您的意思是“3 月 4 日或之后的第一个星期日”，那么您应该指定一个负的星期几值：

```
Calendar.MARCH, 4, -1 
```

您指定的结束日期看起来没问题。它是：

```
Calendar.MARCH, -1, 1 
```

这意味着“三月的最后一个星期日”。

我不确定为什么 DST 会因此而关闭，但请尝试纠正它，看看它是否有所作为。

另外 - 你应该认真考虑[Joda Time](http://joda-time.sourceforge.net/)库而不是这个。您将获得更可靠的结果，并且您不必自己实施所有 DST 规则。

**更新**

仔细阅读[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DST_OFFSET)，不清楚`cal.get(Calendar.DST_OFFSET)`日历的当前日期是否生效，或者它是否只是返回与时区相关的日光偏移量。它的措辞如下：

> 如果 TimeZone 实现子类支持历史夏令时时间表更改，则此字段反映此日历的时区的正确夏令时偏移值

也许你应该试试这个？

```
boolean dst = st.inDaylightTime(cal.getTime()); 
```

我只是在这里猜测。我自己没有测试过。

# ajax - f:ajax on h:selectManyCheckbox 在 ui:repeat: 找不到组件内不起作用

> ID：15970722
> 
> 赞同：2
> 
> 时间：2013-04-12T11:53:54.930
> 
> 标签：ajax, jsf, primefaces, uirepeat

我有以下问题：我正在使用 a `h:selectManyChecbox`inside a `ui:repeat`。值更改侦听器附加到组件，以及`f:ajax`. 我希望在每次选择/取消选择时触发事件，然后操作支持 bean 中的一些值并相应地更新视图。我将其简化为以下示例：

### JSF 页面

```
<ui:repeat id="loop" value="#{testAction.stringListe}" var="string">
            <h2>#{string}</h2>

            <h:inputText id="input" value="#{testAction.testInt}" />

            <h:selectBooleanCheckbox value="#{testAction.testBoolean}"
                                     id="checkbox"
                                     valueChangeListener="#{testAction.valueChangeListener}">
                <f:ajax render="input" />
            </h:selectBooleanCheckbox>
            <h:outputLabel for="checkbox" value="Change Me!"/>

            <h:selectManyCheckbox id="options"
                                  value="#{testAction.selections}"
                                  layout="pageDirection"
                                  valueChangeListener="#{testAction.valueChangeListener}">
                <f:ajax render="input" />
                <f:selectItem itemValue="changeMe" itemLabel="Change me!" />
                <f:selectItem itemValue="changeToo" itemLabel="Me too!" />
            </h:selectManyCheckbox>
        </ui:repeat> 
```

### 支持豆

```
public class TestAction {

    private boolean testBoolean;
    private int testInt;
    List<String> stringListe = new ArrayList<String>();
    List<String> selections = new ArrayList<String>("Number 1", "Number 2");
    // Getter +  Setter accordingly

    public void valueChangeListener(ValueChangeEvent event) {
        testInt = (int) (Math.random() * 100);
        System.out.println(testInt);
    } 
```

对于此设置，我收到以下错误：

```
<f:ajax> contains an unknown id 'form:loop:0:options' - cannot locate it in the context of the component options 
```

所以看起来，渲染目标在这里不是问题。相反，ajax 执行的隐式@this 似乎失败了。换句话说：组件找不到自己。奇怪的是，这只适用于 selectManyCheckbox。单个复选框很好。我假设这是因为 selectMany 类型充当“内循环”，所以我们在这里有两个嵌套循环。这听起来对我在[这个问题](https://stackoverflow.com/q/13457295/840977)中提出的问题很熟悉，只是渲染目标导致了问题。

所以我的问题是：这是预期的行为吗？或者它是实现中的一些已知错误？我问是因为 selectManyListBox 和 selectManyMenu 工作得很好......无论如何我正在寻找一种解决这个问题的方法。还有其他人有类似的问题吗？

*注意：*不幸的是，c:foreach 不是选项，否则我会尝试；）摆弄执行参数没有效果（例如，execute=@form）。

*编辑*：这在使用`p:ajax`Primefaces 时有效。无论如何，如果有其他有用的答案，我会保持开放一段时间。如果有人知道 p:ajax 的不同之处，这也很有趣。

# symfony - 在 Symfony 中使用 Twig 获取从 MySQL 检索到的每条记录的行号

> ID：15970724
> 
> 赞同：2
> 
> 时间：2013-04-12T11:54:05.660
> 
> 标签：symfony, twig

我正在使用 Symfony2 和 MySQL 从数据库中检索名称列表，并使用 Twig 显示它。

对于检索到的每条记录，我将它们放入表格的一行中。我希望能够根据它的编号记录为每一行提供一个唯一的 ID。因此，如果我有 5 条来自数据库的记录，则第一个的 ID 为“row0”，然后是“row1”等。

如何使用 Twig 实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T12:03:35.943

在 Twig 中尝试以下操作：

```
{% for row in rows %}
    <div id="row{{ loop.index0 }}"><!-- Stuff --></div>
{% endfor %} 
```

正如您可以[在此处](http://twig.sensiolabs.org/doc/tags/for.html)阅读的那样， Twig 循环有许多可用的变量，您可以在循环内使用它们。我们想知道从 0 开始的索引（根据您的规范），因此我们必须使用`index0`循环的属性。如果您想从 1 开始，则必须使用`index`而不是`index0`.

# javascript - 防止多个ajax调用

> ID：15970725
> 
> 赞同：0
> 
> 时间：2013-04-12T11:54:06.107
> 
> 标签：javascript, jquery, ajax

我正在使用以下代码在加载时通​​过 ajax 从服务器获取内容。但在特定情况下，我有一些完全相同的链接。在这种情况下，我如何防止我的代码对同一个 url 进行多个服务器/ajax 调用但替换不同的 div。

```
jQuery('.js-ajaxfill').each(function(i){
    var _this = jQuery(this);
    jQuery.ajax({
        url: _this.data('href'),
        success: function( data ) {
            _this.children('div').replaceWith(data);
        },
        error   : function(jqXHR, textStatus, errorThrown){
            _this.html("");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:59:23.843

您可以使用响应缓存

```
var ResponseCache = {};
jQuery('.js-ajaxfill').each(function(i){
    var _this = jQuery(this);
    if(!ResponseCache[_this.data('href')]){
        jQuery.ajax({
            url: _this.data('href'),
            success: function( data ) {
                 ResponseCache[_this.data('href')]=data;
                _this.children('div').replaceWith(data);
            },
            error   : function(jqXHR, textStatus, errorThrown){
                _this.html("");
            }
        });
    }else{
        _this.children('div').replaceWith(ResponseCache[_this.data('href')]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:00:48.673

```
var ajaxfillRequests = {};

jQuery('.js-ajaxfill').each(function () {
    var _this = jQuery(this),
        url = _this.data('href');

    // make a new request only if none has been made to this URL, save the XHR
    if (!(url in ajaxfillRequests)) {
        ajaxfillRequests[url] = jQuery.get(url);
    }

    // add one set of callbacks per processed item to the XHR object
    ajaxfillRequests[url]
        .done(function (data) {
            _this.children('div').replaceWith(data);
        })
        .fail(function (jqXHR, textStatus, errorThrown) {
            _this.html("");
        });
}); 
```

这是因为 jQuery XHR 对象的设计方式。它们是[*promises*](http://api.jquery.com/promise/)，这意味着您可以根据需要向它们添加任意数量的回调。这也意味着您可以随时添加回调，无需在实际`.ajax()`调用的选项中添加回调。

一旦这样的承诺被履行（即，请求成功）或被拒绝（即，HTTP 请求失败），所有适当的回调都会被调用。

这意味着您可以为您拥有的每个`.js-ajaxfill`元素添加单独的回调，并且仍然只发出一次实际请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:58:20.543

创建一个数组来存储具有 2 个属性的对象，`LinkURL`并且`DivID`. 每当您进行 ajax 调用时，请检查该链接是否已存在于数组中，

**如果它不可用**：进行调用，获取结果，将条目添加到具有相应`DivID`.

**如果该项目已经在数组中**：（这意味着我们已经调用了这个 url），获取`DivID`该条目的 并获取该 Div 的内容。

# php - 输入容器内的对齐方式

> ID：15970726
> 
> 赞同：1
> 
> 时间：2013-04-12T11:54:12.363
> 
> 标签：php, html, css

我有这样一个问题：容器中有两个输入：文本字段和提交按钮。问题在于，当区域设置更改文本时（例如从英语到法语），按钮会分层并与文本字段重叠。以下是示例：

英语： ![英语](https://i.stack.imgur.com/QSUVZ.png)

法语： ![法语](https://i.stack.imgur.com/5Ja1K.png)

有什么办法，所以搜索字段的长度会自动适合容器吗？

这个容器的代码是这样的：

```
 <div id="searchContainer">
    <input type="text" id="searchField" class="search" name="searchQ" />
    <?php echo $this->searchButton; ?>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:53:39.560

*我在自己设计多语言表单时遇到了类似的问题，虽然我从未找到最佳解决方案，但我会分享我最终所做的事情以防万一。*

不幸的是，动态表单的样式很少容易，有时甚至是不可能的。但是，您可以根据页面语言设置输入字段的样式。首先确保页面 html 反映了您使用的语言（我使用服务器端代码根据语言生成它，在您的情况下，它应该是一个直接的 php echo 语句）：

```
<body lang="en"> 
```

接下来，根据语言选择文本输入

```
#searchField {
    width: 80%; /* default width */
}
body[lang|="en"] #searchField {
    width: 70%; /* make space for english button */
} 
```

根据语言的不同，还有多种其他选择方式，请查看[http://www.w3.org/International/questions/qa-css-lang](http://www.w3.org/International/questions/qa-css-lang)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:03:08.217

如果您不介意 jQuery 的帮助，那么下面的代码可以解决您的问题。

html代码——

```
<div id="form" class="loading">
        <form action="">
            <div id="container">
                <input type="text" name="input" id="input" value="">
                <input type="submit" name="submit" value="submit" id="s">
            </div>
        </form>
    </div> 
```

css和js-

```
 <script>
            jQuery(document).ready(function($){
                var containerWidth = $("#form #container").outerWidth();
                var searchBoxWidth = jQuery("#form #s").outerWidth();               
                var adjustedWidth = containerWidth -  searchBoxWidth - 30   //  this is a value i've chosen to separate the button from the input field and the right edge of the wrapper
                jQuery("#form #input").width(adjustedWidth);
jQuery("#form").removeClass('loading');
            });
        </script>

        <style>
.loading form{visibility:hidden;background:url(img/loader.gif) no-repeat 50% 50%}
/*url should follow your own link to the gif you want to use*/
            #form{width:700px;margin:200px auto;}
            #form #container{border-radius: 30px;height: 60px;background: #ccc;border: 0;padding:0}
            #form #input{height: 40px;margin: 10px 0 0 10px;border-radius: 30px;border: 0;padding:0;}
            #form #s{padding: 13px 28px;border: 0;border-radius: 30px;text-transform: uppercase;}
        </style> 
```

编辑：

1.  我在主包装器中添加了一个“加载”类来标识加载阶段。最初，我不希望任何访问者看到包装器内的内容，因此我设置了规则`visibility:hidden`，以便内容将保留在该位置并且不显示它们，而是使用类的`background`属性显示加载 gif `loader`。
2.  当设置输入框的宽度时，我`loading`将从包装器中删除该类，以便内容现在可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:19:33.747

如果您不介意使用表格进行布局，您可以这样做（[小提琴](http://jsfiddle.net/NJmwB/)）：

```
<style>
.search-table {
    width:100%;
}
.search-table .search{
    box-sizing:border-box;
    width:100%;
}
.search-table .btn-cell {
    width:1px;
    white-space:nowrap;
}
</style>
<div id="searchContainer">
    <table class="search-table">
        <tr>
            <td><input type="text" id="searchField" class="search" name="searchQ" /></td>
            <td class="btn-cell"><button>search</button></td>
        </tr>
    </table>
</div> 
```

# javascript - 追加 Blob 数据

> ID：15970729
> 
> 赞同：40
> 
> 时间：2013-04-12T11:54:24.990
> 
> 标签：javascript, blob

`JavaScript` 我目前使用以下方法是否有用于附加 blob 数据的功能：

```
var bb = new Blob(["Hello world, 2"], { type: "text/plain" });
bb = new Blob([bb, ",another data"], { type: "text/plain" }); 
```

并且`BlobBuilder`功能在 Chrome 中不可用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-07-22T00:10:01.427

[Blob](http://www.javascripture.com/Blob)是“不可变的”，因此您在制作后无法更改。构建一个将数据附加到现有 Blob 的新 Blob（如您在最初的问题中所写）是一个很好的解决方案。

如果您不需要每次追加零件时都使用 Blob，则可以只跟踪零件数组。然后您可以不断地追加到数组，然后在需要时在最后构造 Blob。

```
var MyBlobBuilder = function() {
  this.parts = [];
}

MyBlobBuilder.prototype.append = function(part) {
  this.parts.push(part);
  this.blob = undefined; // Invalidate the blob
};

MyBlobBuilder.prototype.getBlob = function() {
  if (!this.blob) {
    this.blob = new Blob(this.parts, { type: "text/plain" });
  }
  return this.blob;
};

var myBlobBuilder = new MyBlobBuilder();

myBlobBuilder.append("Hello world, 2");

// Other stuff ... 

myBlobBuilder.append(",another data");
var bb = myBlobBuilder.getBlob(); 
```

# c++ - 非指针实例变量是否存储在堆上？

> ID：15970731
> 
> 赞同：2
> 
> 时间：2013-04-12T11:54:28.827
> 
> 标签：c++, variables, memory

在本地函数的上下文中，堆栈和堆之间的区别有据可查，但我对实例变量很好奇。

由于实例变量需要一直存在直到它被释放，它是否存储在相同类型的内存中，无论它是否创建`new`？

IE

```
Class A{
  SomeType s1;
  SomeType * s2;
 } 
```

如果这些是自动局部变量，那么这两种机制之间的差异是相当大的。但是作为实例变量，它们或多或少在内存中的相同位置，都在堆上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:58:06.007

`A::s1`并且`A::s2`根据定义，将以`A`创建实例的任何方式和位置存储。至于 指向的存储位置`A::s2`，可以是任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:55:51.527

非指针变量在存储区域中定义取决于它们的声明***方式***或***位置。***

```
Myclass obj; 
```

at 函数范围将在自动存储上创建，而如果在全局范围创建，则将使用静态存储持续时间创建。

在您的示例中，两者`A::s1`和`A::s2`都将具有与它们所属的对象相同的存储区域。然而，由于`A::s2`它是一个指针，它可能指向一个可能被放置在不同存储区域中的对象。

例如：

```
void doSomething()
{    
    A obj;
    SomeType obj2;
    obj.s2 = &obj2;
} 
```

`A::s2`指向一个存储与 相同的对象`obj`，而：

```
void doSomething()
{
    A obj;
    SomeType *ptr = new SomeType;
    obj.s2 = ptr;
} 
```

`A::s2`指向一个动态分配的对象。

^(注意：上面的代码假设`A::s2`是`public`为了简单起见。)

# html - “& 没有开始字符引用。（& 可能应该被转义为 &。）” w3c 标记

> ID：15970738
> 
> 赞同：30
> 
> 时间：2013-04-12T11:54:41.770
> 
> 标签：html, w3c-validation

我正在使用 w3c 标记验证器。我收到此错误：

```
Line 169, Column 60: & did not start a character reference. (& probably should have been escaped as &amp;.)
    <a href="index.php?option=com_content&view=article&id=6&Itemid=4"> 
```

如果我使用 & 而不是 &，我无法将值传递到下一页。有人请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-12T11:59:55.777

后面有分号`&amp`吗？你的链接应该是

```
<a href="index.php?option=com_content&amp;view=article&amp;id=6&amp;Itemid=4"> 
```

请注意，如果您将此 url 粘贴到浏览器的地址栏中，它将不起作用 -当您单击页面中的链接时，浏览器会将其`&amp;`转换为。`&`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T22:31:51.303

href 属性的值应该是 url 编码的，而不是 html 编码的：

```
<a href="index.php?option=com_content%26view=article%26id=6%26Itemid=4"> 
```

# oracle - SQL Server T-SQL 到 Oracle PL/SQL 的转换

> ID：15970741
> 
> 赞同：0
> 
> 时间：2013-04-12T11:54:52.367
> 
> 标签：oracle, plsql

我在用 PL/SQL 编写查询时遇到问题。我确切地知道我将如何在 SQL Server T-SQL 中做到这一点，我只是不太擅长使用 Oracle。

它必须是 SQL 字符串，而不是过程。

以下是我需要的那种查询。这不是实际的查询，但看到这个翻译应该给我我需要的东西。

您可以看到第一个查询是第二个查询的子集，如果它占基础数据的 5% 以上，则返回结果。

考虑到这一点，如果有更好的方法来编写它，我也会对此感兴趣！

```
DECLARE @x int
SELECT @x = COUNT(*) * 20
FROM table1
WHERE table1.a=1
AND table1.b=2
AND table1.c=3

DECLARE @y int
SELECT @y = COUNT(*)
FROM table1
WHERE table1.a=1
AND table1.b=2

If @x > @y
    SELECT *
    FROM table1
    WHERE table1.a=1
    AND table1.b=2
    AND table1.c=3 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:35:25.020

这可以提供帮助。

```
DECLARE 
  rate NUMBER(2,1);
  output SYS_REFCURSOR;
BEGIN

SELECT SUM(CASE WHEN c=3 THEN 1 ELSE 0 END ) / COUNT(*)
INTO rate
FROM table1
WHERE table1.a=1
      AND table1.b=2;

  IF (rate > 0.5) THEN
    OPEN output FOR
      SELECT *
      FROM table1
      WHERE table1.a=1
            AND table1.b=2
            AND table1.c=3
  END IF;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:11:27.597

使用子查询（您可能知道的公用表表达式）来获取两个值：

```
with x_data as (SELECT  COUNT(*) * 20 x
        FROM table1
        WHERE table1.a=1
        AND table1.b=2
        AND table1.c=3 )
, y_data as (SELECT COUNT(*) y
         FROM table1
         WHERE table1.a=1
         AND table1.b=2
    SELECT table1.*
    FROM table1
          , y_data
          , x_data
    WHERE x > y
    and table1.a=1
    AND table1.b=2
    AND table1.c=3 
```

我假设在现实生活中，这些值作为变量或参数传递，而不是像您的示例中那样被硬编码。

# matlab - 在 Matlab 上实现搜索算法

> ID：15970747
> 
> 赞同：0
> 
> 时间：2013-04-12T11:55:03.583
> 
> 标签：matlab, search

例子

a={'你好' '我的' '名字' '是' '山姆'}

b={'and' '我的' '名字' '是' 'Susan'}

*   **从一个搜索**

'你好'在一个吗？是的，所以输出 1

'我的'是一个吗？是的，所以输出 1

......

'山姆'在一个吗？是的，所以输出 1

所以我们得到**

*   矩阵1=[1 1 1 1 1]

**

然后，将 a 和 b 中的单词翻阅到 b

b中的“你好”吗？不，输出 0 在 b 中是 'my'' 吗？是的，输出 1

...

'Sam' 在 b 中吗？不，输出 0

'and' 在 b 中吗？是的，输出 1

“我的”在 b 中吗？是的，但忽略“我的”已经存在。

...一直到“苏珊”。

我们得到了这个

**

*   矩阵2=[0 1 1 1 0 1 1]

**，读作 'hello' 'my' 'name' 'is' 'Sam' 'and' 'Susan'，所以它存储了两个句子中的所有单词。

我需要对许多不同维度的矩阵执行此操作，这就是我目前所拥有的：

```
 for i=1:length(a)
           for j=1:length(a)
           if isequal(a{i}, a{j})
             a{i}=1;
           else
            a{j}=0;
           end
           end
    end 
```

这不会返回 [1 1 1 1 1 ]，我不知道从这里做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:26:46.767

如果您被允许使用 MATLAB 的[unique()](http://www.mathworks.co.uk/help/matlab/ref/unique.html)，那么我会这样做：

```
a = {'hello' 'my' 'name' 'is' 'Sam'};
b = {'and' 'my' 'name' 'is' 'Susan'};

% Combine the two inputs
c = [a,b];

% Get unique strings without sorting and retaining first occurrence in posC
[unC, posC] = unique(c);

% Create logical tf and check true in positions determined by posC
tf       = false(size(c));
tf(posC) = true;

% Check result
c(tf)
ans = 
    'hello'    'my'    'name'    'is'    'Sam'    'and'    'Susan' 
```

# php - 获取常量名作为字符串

> ID：15970749
> 
> 赞同：1
> 
> 时间：2013-04-12T11:55:07.087
> 
> 标签：php, curl

我正在为 cURL 编写一个包装类，当您设置一个选项时，它会将选项名称保存到一个数组中，以便我可以管理设置了哪些选项。

问题是 cURL 选项名称是常量，它们实际上是整数，所以我无法真正分辨出哪些选项已设置。

课堂摘录：

```
class Curl {

    protected $_options;

    public function setOption($name, $value) {
        $result = curl_setopt($this->_handle, $name, $value);
        if ($result) {
            $this->_options[$name] = $value;
        }
        return $result;
    }

} 
```

假设我设置了以下选项：

```
array(
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_HEADER => 0,
    CURLOPT_POST => 1,
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_TIMEOUT => 30
) 
```

然后`Curl::_options`将看起来像：

```
array(
    (int) 78 => (int) 10,
    (int) 42 => (int) 0,
    (int) 47 => (int) 1,
    (int) 19913 => (int) 1,
    (int) 13 => (int) 30
) 
```

如何获取 cURL 常量的实际名称？这可能使用[反射类](http://www.php.net/manual/en/reflectionclass.construct.php)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:32:27.447

好吧，从技术上讲，有一种方法可以准备一个数组，其中`curl`常量名称为字符串，它们的值也就是值：

```
$curl_constants = get_defined_constants(true)['curl']; 
```

由于您似乎只处理`CURLOPT`常量，因此您可以对其进行改进：

```
$curlopt_constants = [];
foreach ($curl_constants as $constant_name => $constant_value) {
  if (strpos($constant_name, 'CURLOPT') === 0) {
    $curlopt_constants[$constant_name] = $constant_value;
  }
} 
```

问题是，这些数组中的几个常量仍然具有相同的值（`CURLOPT_SSLCERTPASSWD`,`CURLOPT_SSLKEYPASSWD`和`CURLOPT_KEYPASSWD`=> `10026`;`CURLOPT_READDATA`和`CURLOPT_INFILE`=> `10009`）。如果你对这种歧义没意见，你可以翻转这个数组，把它变成一个散列。

```
$curlopt_constants_hash = array_flip($curlopt_constants); 
```

然后，您只需查看此哈希即可获取字符串文字：

```
$curlopt_constant_name = 
    isset($curlopt_constants_hash[$constant_value])
        ? $curlopt_constants_hash[$constant_value]
        : null
; 
```

那（检查哈希）比`array_search`在数组上使用更快。

# import - 如何从电子表格导入特定的列单元格数据以填充文本文档？

> ID：15970751
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:55:11.897
> 
> 标签：import, cell, spreadsheet, xls

我对电子表格完全不熟悉。为此，我可以使用 Google Docs 或 OpenOffice/LibreOffice。如果可以在那里完成，甚至是 InDesign。

基本上我想要实现的是在同一张纸的许多不同页面上打印**不同的名称和标题**，这些页面上已经有打印的模板文本。名称位于“名称”和“标题”列中的 .xls 电子表格文件中，为了避免在 .xls 和 .doc 文件之间复制和粘贴并每次创建新页面，我只想运行一个脚本或为我创建的东西每次都相同的页面，但每个页面上都有不同的人。

更具体地说，我想要这样的东西：

致：*董事/管理员/CEO* **[我想从单元格 S2 导入此信息]**

亲爱的先生**[从单元格 R2 中提取的数据]**

[所有这些数据在页面上的特定位置]

**下一页**

收件人：*董事/管理员/CEO* **[我想从单元格 S3 导入此信息]**

尊敬的先生**[从单元格 R3 中提取的数据]**

[所有这些数据都在页面上的同一特定位置]

**下一页**

等等.....

有没有可能？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T23:27:33.537

试试[Formranger 脚本](http://youpd.org/formranger) 它应该可以在我提供的链接中找到。我认为它会做你想要的。

# cassandra - Cassandra 中的数据目录机架和 kespace 可用性

> ID：15970754
> 
> 赞同：0
> 
> 时间：2013-04-12T11:55:14.043
> 
> 标签：cassandra

   我专注于 cassandra 多数据目录结构。我对 keypspace 在多个目录之间拆分的基本需求如下：

1）我应该能够限制每个目录的 kyspace 数量。

2) 只应主动使用一个目录进行插入。例如，即使我在配置文件中添加了多个目录，当我创建键空间并推送只应该进入第一个目录的记录时。它不应该在其他可用目录中创建键空间或分散记录。当我的第一个目录溢出时，只有它应该使用后续目录。

在 cassandra 最新版本中是否有任何选项可以实现这两个场景？..

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:17:08.030

您不能将键空间固定到单个数据目录。Cassandra 将在所有定义的目录之间进行负载平衡。

Cassandra 将遵循符号链接，因此您可以定义单个数据目录，并将其符号链接到您想要的任何卷......但这也是唯一可供读取的数据。

归根结底，这不是 Cassandra 设计的工作方式，您最好弄清楚如何使用设计而不是与之抗争。

# ember.js - 您如何在 Ember JS 中使用多个模型（没有 Ember 数据）？

> ID：15970755
> 
> 赞同：9
> 
> 时间：2013-04-12T11:55:16.650
> 
> 标签：ember.js

我创建了一个小例子来尝试让多个模型在没有 Ember Data 的情况下工作。

```
App = Ember.Application.create();

App.Router.map(function () {
    this.resource('employees', function () {
        this.route('employee');
    });
});

App.Employee = Ember.Object.extend({});

App.Employee.reopenClass({
    findAll: function () {
        return $.getJSON("http://localhost/api/employee").then(
            function (response) {
                var employees = [];
                response.forEach(function (child) {
                    employees.push(App.Employee.create(child));
                });
                console.log(employees.join('\n'));
                return employees;
            }
        );
    }
});

App.EmployeesController = Ember.ArrayController.extend({});

App.EmployeesRoute = Ember.Route.extend({
    model: function () {
        return App.Employee.findAll();
    }
}); 
```

车把：

```
<script type="text/x-handlebars">
    <p>Application template</p>
    {{#linkTo employees}}<button>Show employees</button>{{/linkTo}}
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="employees">
    <p>Employees template</p>
    {{#each controller}}
    <p>{{Name}}</p>
    {{/each}}
    {{outlet}}
</script> 
```

当我直接导航到`localhost/#/employee`url 时，它工作得很好，但是当我单击“显示员工”按钮时，我收到以下错误：

```
Uncaught TypeError: Object #<Object> has no method 'addArrayObserver' 
```

我可能在某处遗漏了一些东西，但我不确定错误指的是哪个对象。当我按下按钮时，我的模型钩子被正确调用，就像我通过手动输入 url 进行导航一样，所以我不明白在提到的两种情况下到底有什么不同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T12:41:48.380

终于让这件事起作用了。

我的错误是尝试重新创建（阅读复制粘贴）[Evil Trout 的示例](http://eviltrout.com/2013/03/23/ember-without-data.html)，即在没有 Ember Data 的情况下执行 Ember 应用程序，并且对底层概念的理解不够好。

我的`findAll`方法返回了一个 Promise 对象，尽管控制器需要一个数组，因此`Uncaught TypeError`. 你需要做的是返回一个空`ArrayProxy`的，一旦收到 JSON 响应就会被填充。

```
App.Employee.reopenClass({
    findAll: function () {
        var employees = Ember.ArrayProxy.create({ content: [] });
        $.getJSON("http://localhost:49441/api/employee").then(
            function (response) {
                response.forEach(function (child) {
                    employees.pushObject(App.Employee.create(child));
                });
            }
        );
        return employees;
    }
}); 
```

如果您使用此方法正确返回了一个数组，则不必显式指定控制器是`ArrayController`.

现在我知道我做错了什么，我的问题有点愚蠢，但希望它可以帮助其他人入门。

# php - 呈现表单的方式 - php 和 HTML

> ID：15970758
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:55:28.530
> 
> 标签：php, html, wordpress, forms

我正在挣扎，我不知道还能去哪里。我有一个在他们的网站上销售的客户，但是，我正在重写代码，我需要一个联系表格来向他们发送查询。目前它全部在 Wordpress 中设置。

但是，该表格将允许客户为一个订单发送简单的信息。所以数量、颜色、描述字段都在表单中（联系表单 7 插件）

我想要的是让他们为不同的产品多次输入该信息。所以客户输入例如 5 件蓝色睡衣 + 10 件绿色袜子。但是他们可能有很多订单，我们无法知道有多少。我需要的是一个不太难的界面想法，因为在正确设置电子商务之前，这是一种丢弃形式。如果我没有说清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:37:33.400

我尚未验证代码，但这是一个概念。

```
<head>
<script type="text/javascript">
    var ordernum = 1;
    function Add_to_Order() {
        /* Adding another order to the form */
        ordernum++;
        var order_str = '<p><label for="order' + ordernum + '_id">Quantity: </label><input id="order' + ordernum + '_id" name="order' + ordernum + '_qty" type="text" size="6" /><input name="order' + ordernum + '_color" type="text" /><input name="order' + ordernum + '_desc" type="text" /></p>';  
        $('#orders').append(order_str);

        /* Replaces the value of qty so that you know how many orders to track */
        $('input[name=qty]').val(function(index, value) {
           return value.replace(ordernum);
        });
    }
    jQuery(document).ready(function($){
        /* When add order button is pressed it will add additional fields to the id=orders */
        $('#add_order').click(Add_to_Order);
    });
</script>
</head>
<body>
    <form id="contactForm" method="POST" action="">
        <label for="name_id">Name: </label>
        <input id="name_id" name="name" type="text" />
        <fieldset id="orders">
            <p>
                <label for="order1_id">Quantity: </label>
                <input id="order1_id" name="order1_qty" type="text" size="6" />
                <input name="order1_color" type="text" />
                <input name="order1_desc" type="text" />
            </p>
        </fieldset>
        <input id="add_order" type="button" value="Add Another Item" />
        <input id="qty" name="qty" type="hidden" value="1" />
        <hr />
        <input id="submit" name="submit" type="submit" value="Send" />      
    </form>
</body> 
```

在此之后，您可以验证表单并在提交时根据您拥有的订单数量发送信息。我还会添加一些安全措施，但这只是您可以使用的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:24:16.070

实际上，您想要的 PHP 邮件表单并不容易，但我一直在努力提供帮助，即使您没有绘制您想要的表单，也没有绘制主题。现在，例如我们有一个名为*form.php*的 PHP 文件，这是 PHP 脚本：

```
<?php
$q = addslashes($_GET["q"]);

if (empty($q)) {
    echo '<form action="form.php" method="get">
    How many do you want to order: <input type="text" name="q">
    <input type="submit">
    </form>';
}

if ($q > 0) {
    if (isset($_REQUEST['from'])) {
        $from = $_REQUEST['from'] ;

        // place your email here
        $to = "mail@example.com";

        $subject = "Customer: " . $_REQUEST['name'];

        $i = 1;
        while ($i <= $q) {
            $message .= "Order $i\n";
            $message .= "Quality: " . $_REQUEST['quality' . $i] . "\n";
            $message .= "Color: " . $_REQUEST['color' . $i] . "\n";
            $message .= "Description: " . $_REQUEST['description' . $i] . "\n\n";
            $i++;
        }

        $message .= "Note: " . $_REQUEST['note'];
        mail($to, $subject, $message, "From:" . $from);
        echo "Thank you for submitting your order!";
    } else {
        echo "<form method='post'>
        Email: <input name='from' type='text'><br />
        Full Name: <input name='name' type='text'><br />";

        $i = 1;
        while ($i <= $q) {
            echo "Order $i<br />
            Quality: <input name='quality" . $i . "' type='text'><br />
            Color: <input name='color" . $i . "' type='text'><br />
            Description: <input name='description" . $i . "' type='text'><br />";
            $i++;
        }

        echo "Additional Note:<br />
        <textarea name='note' rows='15' cols='40'></textarea><br />
        <input type='submit'>
        </form>";
    }
}
?> 
```

该邮件表单已经过测试并且可以正常工作。只需完成其余的改进和样式设置即可。

# php - 显示提交的文本

> ID：15970760
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:55:33.787
> 
> 标签：php, ajax, codeigniter

我正在 textarea 中写一些文本并使用 ajax 调用显示它，所以当我输入一些文本并按 Enter 换行然后输入文本然后提交后我无法获得准确的文本，例如我在 textarea 中输入的我是对的

```
Hi
helo
world 
```

然后在提交我的文本后像这样接收它

```
Hi helo world 
```

输入时如何获取文本。这是我的文本区域代码

```
 <p>
     <textarea id="wall_post_comment" name="wall_post_comment></textarea>
 </p>
 <a href="javascript:void(0)" onclick="submit_wall();">Post</a> 
```

这是我的功能

```
function submit_wall()
{
    var text=$('#wall_post_comment').val();
    $.post('<?php echo base_url()?>users/wall_post', { text:text },  
    function(data) {
                $('#wall_post_comment').val('');
                $(data).hide().insertAfter('#wall_post').slideDown('slow');
    }); 
} 
```

这是我返回文本的模型代码

```
function returnWall($text)
{        
    return '<div >

    &nbsp;'.$text.'
   </div>';
} 
```

## 更新

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:14:52.727

只需将 nl2br 添加到您的模型代码中

```
function returnWall($text)
{        
   return '<div >
   &nbsp;'.nl2br($text).'
   </div>';
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:15:18.330

假设您的`returnWall()`函数正在运行，您可以使用[nl2br](http://php.net/manual/en/function.nl2br.php)函数将换行符转换为`<br>`或`<br />`

```
function returnWall($text)
{        
   return '<div>&nbsp;'.nl2br($text).'</div>';
} 
```

# sql - 修改交叉连接查询

> ID：15970771
> 
> 赞同：7
> 
> 时间：2013-04-12T11:55:53.827
> 
> 标签：sql, sql-server-2008, crystal-reports-8.5

我有这个查询，我发现我想修改它以获得一个额外的列，并总结最近 3 个月找到的金额。我想为此制作一份水晶报告。下面查询。

```
SELECT 
    dbo.[@EIM_PROCESS_DATA].U_Tax_year, 
    dbo.[@EIM_PROCESS_DATA].U_Employee_ID, 
    SUM(dbo.[@EIM_PROCESS_DATA].U_Amount) AS PAYE, 
    dbo.OADM.CompnyName, 
    dbo.OADM.CompnyAddr, 
    dbo.OADM.TaxIdNum, 
    dbo.OHEM.lastName + ', ' + ISNULL(dbo.OHEM.middleName, '') + ' ' + 
        ISNULL(dbo.OHEM.firstName, '') AS EmployeeName, dbo.OHEM.govID

FROM dbo.[@EIM_PROCESS_DATA] 
        INNER JOIN dbo.OHEM ON dbo.[@EIM_PROCESS_DATA].U_Employee_ID 
                                           = dbo.OHEM.empID CROSS JOIN dbo.OADM
WHERE (dbo.[@EIM_PROCESS_DATA].U_PD_code = 'SYS033')

GROUP BY 
    dbo.[@EIM_PROCESS_DATA].U_Tax_year, 
    dbo.[@EIM_PROCESS_DATA].U_Employee_ID, 
    dbo.OADM.CompnyName, 
    dbo.OADM.CompnyAddr, 
    dbo.OADM.TaxIdNum, 
    dbo.OHEM.lastName, 
    dbo.OHEM.firstName, 
    dbo.OHEM.middleName, 
    dbo.OHEM.govID 
```

该表`OHEM`包含一个名为的字母数字字段，其中包含`U_Process_month`从 1 月到 12 月的字符。由于查询如上，`SUM(dbo.[@EIM_PROCESS_DATA].U_Amount)`给出了所有 PAYE 金额的总计，`ie. U_PD_code = 'SYS033'`。

我想要一个查询，根据所选的年份和月份将过去 3 个月 (PAYE) 相加。

我还想检索和额外的列，`SUM(dbo.[@EIM_PROCESS_DATA].U_Amount) as TAXABLEPAY where (dbo.[@EIM_PROCESS_DATA].U_PD_code = 'SYS034')`.

我如何实现这一目标？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T16:58:07.023

我不确定 U_Tax_year 是什么数据类型，所以我将其保留为 INT。但是，此查询应返回您设置的月份之前的 3 个月。

```
DECLARE @start_month DATETIME;
DECLARE @start_year INT;

SET @start_month = '2013-04-01';
SET @start_year = 2013;

SELECT dbo.[@EIM_PROCESS_DATA].U_Tax_year
     , dbo.[@EIM_PROCESS_DATA].U_Employee_ID
     , SUM(CASE WHEN dbo.[@EIM_PROCESS_DATA].U_PD_code = 'SYS033' THEN dbo.[@EIM_PROCESS_DATA].U_Amount ELSE 0 END) AS PAYE
     , SUM(CASE WHEN dbo.[@EIM_PROCESS_DATA].U_PD_code = 'SYS034' THEN dbo.[@EIM_PROCESS_DATA].U_Amount ELSE 0 END) AS TAXABLEPAY
     , dbo.OADM.CompnyName
     , dbo.OADM.CompnyAddr
     , dbo.OADM.TaxIdNum
     , dbo.OHEM.lastName + ', ' + ISNULL(dbo.OHEM.middleName, '') + ' ' + ISNULL(dbo.OHEM.firstName, '') AS EmployeeName
     , dbo.OHEM.govID
  FROM dbo.[@EIM_PROCESS_DATA]INNER JOIN dbo.OHEM ON dbo.[@EIM_PROCESS_DATA].U_Employee_ID = dbo.OHEM.empID CROSS JOIN dbo.OADM
 WHERE dbo.[@EIM_PROCESS_DATA].U_PD_code IN ('SYS033', 'SYS034')
   AND dbo.OHEM.U_Process_month IN (DATENAME(MONTH, DATEADD(MONTH,-3, @start_month)), DATENAME(MONTH, DATEADD(MONTH,-2, @start_month)), DATENAME(MONTH, DATEADD(MONTH,-1, @start_month)))
   AND dbo.[@EIM_PROCESS_DATA].U_Tax_year = @start_year
 GROUP BY dbo.[@EIM_PROCESS_DATA].U_Tax_year
     , dbo.[@EIM_PROCESS_DATA].U_Employee_ID
     , dbo.OADM.CompnyName
     , dbo.OADM.CompnyAddr
     , dbo.OADM.TaxIdNum
     , dbo.OHEM.lastName
     , dbo.OHEM.firstName
     , dbo.OHEM.middleName
     , dbo.OHEM.govID; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T16:32:33.820

```
-- 您可以通过使用案例来根据过滤器对列进行汇总
SUM（当 U_PD_code = 'SYS033' THEN dbo.[@EIM_PROCESS_DATA].U_Amount 时的情况
            ELSE 0) 作为付款，
SUM（当 U_PD_code = 'SYS034' THEN dbo.[@EIM_PROCESS_DATA].U_Amount 时的情况
            ELSE 0) 作为 PAYE2，

-- 显然你的 WHERE 变成了
WHERE (dbo.[@EIM_PROCESS_DATA].U_PD_code IN ('SYS033','SYS034'))

- 您的月份年份过滤器可以像这样添加到您的位置..
-- 您可以将月份转换为日期，然后使用 BETWEEN 一个月参数和 2 个月前（总共 3 个月）
-- 请注意，我为您的参数设定了月份名称，如果需要，请更改为数字。你没有提供关于年份的信息，所以我认为它如图所示。
AND MONTH(U_Process_month + '1 2010') BETWEEN MONTH(@YourMonth + '1 2010') AND MONTH(@YourMonth + '1 2010') - 2
AND dbo.[@EIM_PROCESS_DATA].U_Tax_year = @YourYear

```

# mediawiki - 可以创建整个 Wiki 的 ZIM 文件吗？（我自己的，基于 mediawiki）

> ID：15970772
> 
> 赞同：8
> 
> 时间：2013-04-12T11:55:54.430
> 
> 标签：mediawiki

我想生成我们自己的 Wiki 的离线 ZIM 版本（在 Mediawiki 上运行）。Collection[扩展](http://www.mediawiki.org/wiki/Extension%3aCollection)安装起来很容易，但仅适用于选择单个页面，在下一步中可以将其组合成单个 ZIM 文件。

但是对于数百页的 wiki，这太难了，基于单页。我想要整个 wiki 的 zim-dump。我知道这是可能的，因为还有一个[完整的 wikipedia](https://blog.wikimedia.org/2012/04/09/download-the-text-of-the-entire-english-wikipedia/)的 zimfile 。

但是，我找不到这是如何完成的。有谁能帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-01-13T17:52:19.223

我不知道这个答案在多大程度上仍然相关，但它就在这里......</p>

经过一番努力，我终于设法从我的私人基于 MediaWiki 的 wiki 中创建了一个 ZIM 文件：

*   我从这个页面开始：OpenZIM -[构建您的 ZIM 文件](https://wiki.openzim.org/wiki/Build_your_ZIM_file)
*   我测试了所有列出的可能性，但只有[mwoffliner](https://github.com/openzim/mwoffliner)工作（对我来说）
*   安装在[VirtualBox](https://www.virtualbox.org)（版本 6.0.0）[Ubuntu 18.10 桌面](http://releases.ubuntu.com/18.10/)来宾中完成，托管在 Mac 上（macOS Mojave，与 10.14.2）
    *   请注意，我最终将访客操作系统用作无头操作系统，因此图形界面变得无用，下一步将使用服务器版本的 Ubuntu
*   经过一番努力，我成功地完成了工作，但并非没有[GitHub 上](https://github.com/openzim/mwoffliner/issues)`mwoffliner`开发人员的宝贵帮助

请在下面找到有关我所做操作的分步说明。请注意，主要指令来自[GitHub 上openZIM 的](https://github.com/openzim)[mwoffliner](https://github.com/openzim/mwoffliner)分支，因此这些指令的大部分功劳归于他们。

**节点JS**

```
$ sudo apt install curl
$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash && source ~/.bashrc && nvm install stable && node --version 
```

**图像处理 & Redis & git & meson & gcc & g++ & pkg-config 安装**

```
$ sudo apt install jpegoptim advancecomp gifsicle pngquant imagemagick redis-server git meson g++ pkg-config libzim-dev 
```

**libzim-dev：从版本 2.0.0 手动升级到版本 >=4.0.0**

*   （Ubuntu：[卸载包源](https://askubuntu.com/questions/1143/how-can-i-uninstall-software)）
*   （[libzim安装说明源](https://github.com/openzim/libzim/blob/master/README.md)）

1-如果已经安装了 libzim 2.0.0 (libzim-dev)，则继续卸载它，否则继续第 2 点。

```
$ sudo apt remove libzim-dev #removes libzim 2.0.0
$ sudo apt purge libzim-dev
$ sudo apt autoremove #removes libzim2 
```

2- 安装 libzim 版本 >=4.0.0

```
$ sudo apt install cython3 liblzma-dev libgumbo-dev libicu-dev libmagic-dev libxapian-dev python-dev python-pip python-virtualenv zlib1g-dev
$ git clone https://github.com/openzim/libzim.git
$ cd libzim
$ meson . build
$ ninja -C build
$ sudo ninja -C build install
$ sudo ldconfig 
```

**ZimWriterFS 手动安装**

（[来源](https://github.com/openzim/zimwriterfs)）

```
$ cd ~/Downloads/
$ sudo apt install librsvg2-bin
$ git clone https://github.com/openzim/zimwriterfs.git
$ cd zimwriterfs
$ meson . build
$ ninja -C build
$ sudo ninja -C build install
$ zimwriterfs
zimwriterfs usage page should appear 
```

**VirtualBox - 从主机操作系统访问 VirtualBox Guest**

*   （[来源](https://2buntu.com/articles/1513/accessing-your-virtualbox-guest-from-your-host-os/)）

    1.  启动 VirtualBox 6.xx
    2.  菜单文件
    3.  选择主机网络管理器...</li>
    4.  选择选项卡 DHCP 服务器
    5.  单击创建（窗口左上角）
    6.  选择启用服务器
    7.  服务器地址：192.168.56.2
    8.  服务器掩码 255.255.255.0
    9.  下限地址：192.168.56.3
    10.  上界地址：192.168.56.254
    11.  选择选项卡适配器
    12.  验证是否选择了“手动配置适配器”，并且，
    13.  IPv4 地址：192.168.56.1
    14.  IPv4 网络掩码：255.255.255.0
    15.  点击关闭
    16.  右键单击客户机
    17.  选择设置...（或直接按 cmd-s）
    18.  选择选项卡网络
    19.  选择选项卡适配器 2
    20.  单击启用网络适配器
    21.  附加到：选择仅主机适配器
    22.  名称：vboxnet0
    23.  点击确定
    24.  启动访客机器

**发出 mwoffliner 命令**

此命令假定：

*   MediaWiki wiki 已启动并运行，
*   VirtualBox 将 IP 地址归因于`192.168.56.5`来宾操作系统（请参阅上面的**VirtualBox - 从主机操作系统访问 VirtualBox 来宾**部分下的说明）（使用 检查操作系统的 IP 地址`ifconfig`）
*   `LocalSettings.php`'s `$wgServer = "http://192.168.56.5";`(检查操作系统的IP地址`ifconfig`)
*   您的 wiki 名称是`YourWiki`
*   包含您的 wiki 的 MediaWiki 文件夹位于`/var/www/html/`（即`/var/www/html/YourWiki`）

*实际命令*：

`mwoffliner --mwUrl=http://192.168.56.5/YourWiki --adminEmail=foo@bar.net --verbose --redis=redis://127.0.0.1:6379 --mwWikiPath=/ --mwApiPath=api.php --localParsoid`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T10:02:44.163

是的，你可以，但这并不容易。Kiwix 开发人员现在正在研究基于 Parsoid 的解决方案：http: [//sourceforge.net/p/kiwix/other/ci/master/tree/mwoffliner/](http://sourceforge.net/p/kiwix/other/ci/master/tree/mwoffliner/) Parsoid 是 MediaWiki VisualEditor 的后端，它处理wikitext 到 HTML 的翻译，反之亦然。它有一个可用于此类内容的 HTML 版本缓存。[https://www.mediawiki.org/wiki/Parsoid](https://www.mediawiki.org/wiki/Parsoid)应该提供一些关于如何设置它的信息......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T02:36:13.683

您可能想要测试一些工具。有些已被删除，但其中大部分都在开发中。

> 这里有一些关于如何准备材料和使用的注意事项 `zimwriterfs`。这些笔记不完整，因为它们基于我使用该工具的有限经验（取自[http://www.openzim.org/wiki/Build_your_ZIM_file](http://www.openzim.org/wiki/Build_your_ZIM_file)）

这是从现有 HTML 内容创建 ZIM 文件的链接“有关概述，请参阅[http://www.openzim.org/wiki/Zimwriterfs_instructions ，并阅读下面有关 zimwriterfs 的部分以了解更多上下文”](http://www.openzim.org/wiki/Zimwriterfs_instructions)

我尝试了另一个名为**Zim 的 Windows 程序 - 桌面 Wiki** [http://zim-wiki.org/](http://zim-wiki.org/)是有限的，但您可以尝试一下。相反，它会将 ZIM 转换为 HTML。

不管怎样，让我们​​知道进展如何，我也有兴趣建立自己的 zim 文件。祝你好运。

# jquery - 悬停jquery时更改一个元素及其所有子元素的背景

> ID：15970776
> 
> 赞同：0
> 
> 时间：2013-04-12T11:56:00.390
> 
> 标签：jquery, css, dynamic, hover, children

我有一个表，其中`<tr>`包含很多，`<div>`每个表都可以包含许多其他表（它们是自动生成的）

然后`backgounrd-color`，当`<tr>`鼠标移动`<div>``<div>``<tr>`

然后我用这个：

```
$('.ui-datagrid-column').live('mousemove',function(){
            $(this).css('background-color', 'red');
            $(this).children().css('background-color', 'red');
            //ui-layout-unit-content ui-widget-content

        });
         //.ui-layout-container
        $('.ui-datagrid-column').live('mouseleave',function(){
            $(this).css('background-color', 'white');
            $(this).children().css('background-color', 'white');
        }); 
```

但它不会改变 div 内部的背景`<tr>`

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:05:12.637

只需使用 CSS，您就可以很容易地获得这种效果。

基本上，你可以`tr:hover *`在你的 CSS 中设置`background-color`你想要的，它会被它下面的所有元素继承。因此，现在当您将鼠标悬停在该行上时，它将覆盖或设置`tr`.

这是一个示例[jsfiddle](http://jsfiddle.net/ewMFY/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:10:40.700

```
 $('.ui-datagrid-column').hover(function(){$(this).addClass('background');
    $(this).children.addClass('background'); 
    //this will add a background class (something like background-color: red;)
    //I guess this will work, I never added classes to children
    }
    ,function(){$(this).removeClass('background');
    $(this).children.removeClass('background')
    //this will remove it again on mouse out
}); 
```

# c# - 想向存储在数据库中的用户邮件发送相同的随机数

> ID：15970780
> 
> 赞同：-2
> 
> 时间：2013-04-12T11:56:10.887
> 
> 标签：c#, asp.net

我正在开发一个 Web 应用程序，其中我有一个查询表单，并在该表单中生成一个随机数并将其存储在数据库中。我的代码看起来像

```
 clsInquiry objInquiry = new clsInquiry();
    try
    {   

        cn.Open();

        objInquiry.RandomStr = GetUniqueKey(10);

        MailMessage mail = new MailMessage();
        mail.From = new MailAddress("abc@gmail.com");
        mail.To.Add(txt_eid.Text);

        mail.Body += "Thank u for putting inquiry for " + productName + " ;<br><br>";
        mail.Body += "Please Click on Following Link To Download Your Demo" + "<br><br>";

        mail.Body += "<a href=\"http://www.xyz.co.in/Download.aspx?No='" + GetUniqueKey(10) + "'\">Demo Download</a>";
        //mail.Body += "<a href=\"" + MyUrl + "\">Demo Download</a>";
        SmtpClient smtp = new SmtpClient();
        smtp.Host = "smtp.gmail.com";
        smtp.Port = 587;
        smtp.EnableSsl = true;
        smtp.Credentials = new System.Net.NetworkCredential("abc@gmail.com ", "****");
        smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
        smtp.Send(mail);

    }
    catch (Exception ex)
    {
        ex.ToString();
    } 
```

和随机数的功能.....

```
public static string GetUniqueKey(int maxSize)
{
   //code for it

} 
```

我已经成功生成并存储在数据库中的号码..

但是在我调用随机数函数发送给用户的那个中，生成了不同的随机数..我想要两个地方的随机数相同。我该怎么办`url`？`hyperlink``mail.body`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:00:35.887

将生成的随机值存储在一个变量中，并在两个地方（`objInquiry.RandomStr`和`mail.Body`）都使用它

```
var randomstr = GetUniqueKey(10);
objInquiry.RandomStr = randomstr;
        ...
mail.Body += "<a href=\"http://www.xyz.co.in/Download.aspx?No='" + randomstr + "'\">Demo Download</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:04:30.517

这是因为您调用了两次 GetUniqueKey(10) 方法。它总是会返回给你不同的唯一键。

在变量中获取 GetUniqueKey(10) 方法的输出，并在两个地方使用该变量。

# c# - Streamreader 给了我看似随机的数据，不知道为什么

> ID：15970783
> 
> 赞同：0
> 
> 时间：2013-04-12T11:56:13.160
> 
> 标签：c#, arraylist, streamreader

我正在构建一个程序来读取同一个文本文件中的足球联赛和赛程，联赛信息是前 32 行，赛程是文档的其余部分。无论如何，当我运行程序并尝试仅将联赛信息（名称、赞助商等）显示在列表框中时，我会从整个文本中随机获取代码行。知道如何修复它，以便只出现前 32 行吗？

```
 public partial class frmLeaguesAndFixtures : Form
 {
    public static frmLeagues frmkeepLeagues = null;
    ArrayList leaguesArray = new ArrayList();
    public static string inputDataFile = @"E:\Soft130\CW\SOFT130GroupAssignment\SOFT130GroupAssignment\Assignment\bin\Debug\football.txt";
    const int numLeagueItems = 8;

    public frmLeaguesAndFixtures()
    {
        InitializeComponent();
    }

    private bool fileOpenForReadOK(string readFile, ref StreamReader dataIn)
    {
        try
        {
            dataIn = new StreamReader(readFile);
            return true;
        }
        catch (FileNotFoundException notFound)
        {
            MessageBox.Show("ERROR Opening file (when reading data in) - File could not be found.\n"
                                                            + notFound.Message);
            return false;
        }
        catch (Exception e)
        {
            MessageBox.Show("ERROR Opening File (when reading data in)- Operation failed.\n"
                                                            + e.Message);
            return false;
        }
    }

     public static bool getNextLeague(int numItems, StreamReader inNext, string[] nextLeagueData)
     {
        //locals
        string nextLine;
        int numDataItems = numItems;

        //read nextdata - based on constant numDataItems
        for (int i = 0; i < numDataItems; i++)
        {
            try
            {
                nextLine = inNext.ReadLine();
                if (nextLine != null)
                    nextLeagueData[i] = nextLine;
                else
                {
                    return false; //no more full data to process 
                }
            }
            catch (Exception e)
            {
                System.Windows.Forms.MessageBox.Show("ERROR Reading from file. Incomplete Data.\n" + e.Message);
                return false; //problem - could not read file
            }
        }
        return true;//no problems 
    }

    private void readLeague()
    {
       string inLeagueName, string inLeagueSponsor, int inLeaguePrize, int inLeagueNumFixtures)

        //local variables
        StreamReader inLeague = null;
        Leagues tempLeague;
        bool anyMoreLeagues = false;
        string[] leagueData = new string[numLeagueItems];

        //if file opened ok proceed
        if (fileOpenForReadOK(inputDataFile, ref inLeague))
        {
         //read first league     
         anyMoreLeagues = getNextLeague(numLeagueItems,inLeague, leagueData);

            //loop for all FULL league   in file
            while (anyMoreLeagues == true)
            {
                //create new league
                tempLeague = new Leagues(leagueData[0], leagueData[1], leagueData[2], leagueData[3]);

                //store in array
                leaguesArray.Add(tempLeague);

                //DOESNT WORK CORRECTLY TRY IT USING "PREMIERSHIP"
                // if (leagueData[0] == "The Championship")
                    {
                        foreach (Leagues l in leaguesArray)
                        {
                            lstLeagueInfo.Items.Add(l.getLeagueName() + " " + l.getLeagueSponsor() + " " + l.getLeaguePrize() + " " + l.getLeagueNumFixtures());
                        }
                    }

                    //read next data
                    anyMoreLeagues = getNextLeague(numLeagueItems,inLeague, leagueData);

                } //end while - no more 
            }//end if file ok            
        }

    private void btnPremiership(object sender, EventArgs e)
    {
        readLeague();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:58:40.057

```
var top32Lines = File.ReadLines(filename).Take(32).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:04:12.570

并使用它来获取其余的行。

```
var allLines = File.ReadeLines(filename).ToList();
var first32 = allLines.Take(32).ToList();
var rest = allLines.Skip(32).ToList(); 
```

我希望这有帮助

**更新 1：**

要通过这些行，请使用`foreach`.

```
//example
foreach(string line in first32)
{
    //do your work
} 
```

# ruby-on-rails - 生产 Rails 部署中的两个版本的 gem

> ID：15970793
> 
> 赞同：2
> 
> 时间：2013-04-12T11:56:47.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, gemfile, gemset

我认为我的 gemfile 在生产中存在一些问题，因为它与我的开发不同，我认为这导致我的部署（Capistrano）失败，至少在捆绑安装时

发展

```
actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
arel (3.0.2)
bcrypt-ruby (3.0.1)
builder (3.0.4)
bundler (1.3.4)
capistrano (2.14.2, 2.12.0)
climate_control (0.0.3)
cocaine (0.5.1, 0.2.1)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.6.2, 1.3.3)
commonjs (0.2.6)
daemon_controller (1.1.2, 1.0.0)
daemons (1.1.9)
database_cleaner (0.9.1, 0.8.0)
devise (2.2.3)
diff-lcs (1.2.2, 1.1.3)
erubis (2.7.0)
eventmachine (1.0.0)
execjs (1.4.0)
fastthread (1.0.7)
ffi (1.6.0, 1.3.1)
font-awesome-rails (3.0.2.0)
highline (1.6.16, 1.6.13)
hike (1.2.1)
i18n (0.6.4, 0.6.1)
journey (1.0.4)
jquery-rails (2.2.1, 2.0.2)
json (1.7.7, 1.7.6)
less (2.3.1, 2.2.1)
less-rails (2.3.2, 2.2.3)
libv8 (3.11.8.17 x86_64-linux, 3.3.10.4 x86_64-linux)
listen (0.7.3, 0.7.2)
mail (2.4.4)
mime-types (1.22, 1.19)
multi_json (1.7.2, 1.5.0)
mysql2 (0.3.11)
nested_form (0.3.1, 0.3.0)
net-scp (1.1.0, 1.0.4)
net-sftp (2.1.1, 2.0.5)
net-ssh (2.6.6, 2.5.2)
net-ssh-gateway (1.2.0, 1.1.0)
orm_adapter (0.4.0)
paperclip (3.4.1, 3.1.4)
passenger (3.0.19, 3.0.14)
polyglot (0.3.3)
rack (1.4.5, 1.4.4)
rack-cache (1.2)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.3)
railties (3.2.3)
rake (10.0.4, 10.0.3)
rb-inotify (0.9.0, 0.8.8)
rb-readline (0.4.2)
rdoc (3.12.2, 3.12)
ref (1.0.4)
rmagick (2.13.2, 2.13.1)
rspec (2.11.0)
rspec-core (2.13.1, 2.11.1)
rspec-expectations (2.13.0, 2.11.1)
rspec-mocks (2.13.0, 2.11.1)
rspec-rails (2.13.0, 2.11.0)
rubygems-bundler (1.1.1)
rvm (1.11.3.6)
sass (3.2.7, 3.1.20)
sass-rails (3.2.6, 3.2.5)
sprockets (2.1.3)
therubyracer (0.11.4, 0.10.1)
thor (0.14.6)
tilt (1.3.6, 1.3.3)
treetop (1.4.12, 1.4.10)
twitter-bootstrap-rails (2.2.6, 2.1.1)
tzinfo (0.3.37, 0.3.33)
uglifier (1.3.0, 1.2.6)
warden (1.2.1)
will_paginate (3.0.4) 
```

生产

```
actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
arel (3.0.2)
bcrypt-ruby (3.0.1)
builder (3.0.4)
bundler (1.1.4, 1.1.3)
capistrano (2.12.0)
cocaine (0.2.1)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
commonjs (0.2.6)
daemon_controller (1.0.0)
daemons (1.1.9)
database_cleaner (0.8.0)
devise (2.2.3)
diff-lcs (1.1.3)
erubis (2.7.0)
eventmachine (1.0.0)
execjs (1.4.0)
fastthread (1.0.7)
ffi (1.3.1)
font-awesome-rails (3.0.2.0)
highline (1.6.13)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.0.2)
json (1.7.6)
less (2.2.1)
less-rails (2.2.3)
libv8 (3.3.10.4 x86_64-linux)
listen (0.7.2)
mail (2.4.4)
mime-types (1.19)
multi_json (1.5.0)
mysql2 (0.3.11)
nested_form (0.3.0)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.5.2)
net-ssh-gateway (1.1.0)
orm_adapter (0.4.0)
paperclip (3.1.4)
passenger (3.0.14)
pg (0.14.1)
polyglot (0.3.3)
rack (1.4.4)
rack-cache (1.2)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.3)
railties (3.2.3)
rake (10.0.3, 0.9.2.2)
rb-inotify (0.8.8)
rb-readline (0.4.2)
rdoc (3.12)
rmagick (2.13.1)
rspec (2.11.0)
rspec-core (2.11.1)
rspec-expectations (2.11.1)
rspec-mocks (2.11.1)
rspec-rails (2.11.0)
rubygems-bundler (1.0.3, 1.0.2)
rvm (1.11.3.5, 1.11.3.3)
sass (3.1.20)
sass-rails (3.2.5)
sprockets (2.1.3)
therubyracer (0.10.1)
thin (1.5.0)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
twitter-bootstrap-rails (2.1.1)
tzinfo (0.3.33)
uglifier (1.2.6)
warden (1.2.1) 
```

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'mysql2'

#Devise Gem
gem "devise", "~> 2.2.3"

#for uploading files  
gem "paperclip", "~> 3.0"
gem 'rmagick'

#Nested Form
gem "nested_form"

#need this for rails 3
gem 'rb-readline'

#Pagination
gem 'will_paginate', '~> 3.0.0'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'less-rails'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

#js stuff:
gem 'execjs'
gem 'jquery-rails'
gem 'twitter-bootstrap-rails'

gem "font-awesome-rails"

#gem to allow running on ubuntu server
gem 'therubyracer'

group :development do
  gem 'rails-dev-boost', :git => 'git://github.com/thedarkone/rails-dev-boost.git', :require => 'rails_development_boost'
  gem 'rb-inotify', '~> 0.8.8'
end

group :test, :development do
  gem 'rspec-rails'
  #adding database cleaner for tests
  gem 'database_cleaner'
end
# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'
group :production do
  gem 'thin'
  gem 'pg'
end

# Deploy with Capistrano
  gem 'capistrano'

#run with passenger
  gem 'passenger' 
```

我遇到的问题是部署应用程序时找不到 will_paginate gem。我是否正确地说看起来我有两个宝石试图在这里工作？我不太确定，不想弄乱我的生产环境，所以最好在这方面获得一些建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:06:08.017

你需要在你的`deploy.rb`

```
require "bundler/capistrano"

set :bundle_cmd, '/path/to/bundle' 
```

所以 bundler 会自动安装所有必要的 gem。

否则，您需要手动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:39:05.423

如果它在您机器的开发环境中工作，那么我认为您应该将您`Gemfile.lock`的代码与您的代码一起推送并部署应用程序。然后`bundle install`在您的生产环境中安装与您的开发环境中相同的 gems 版本。

# .htaccess - mod_rewrite /dir/index.html 到 /dir/

> ID：15970796
> 
> 赞同：-1
> 
> 时间：2013-04-12T11:57:03.313
> 
> 标签：.htaccess, mod-rewrite

如何使用 htaccess 自动更改：

```
/dir1/index.html  -> /dir1/ (with 301 redirect)
/dir1/subdir1/index.html -> /dir1/subdir1/ (with 301 redirect)
...
/another_dir/index.html  -> /another_dir/ (with 301 redirect)
/another_dir/another_subdir1/index.html -> /another_dir/another_subdir1/ (with 301 redirect) 
```

等等

文件 index.html 实际存在于目录中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:57:30.837

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)/index\.html$ /$1/ [R=301,L] 
```

`index.html`此代码将重定向以（文件实际存在的位置）结尾的所有内容。

# mysql - 我怎样才能加快这个查询？这是“太正常化”了吗？

> ID：15970800
> 
> 赞同：1
> 
> 时间：2013-04-12T11:57:07.237
> 
> 标签：mysql, query-optimization, normalization

这可能是历史上发布到 SO 的最长查询。本质上，我想知道这对于执行我想要的查询是否是正确的想法，并且鉴于它非常慢，我将如何加快它的速度。

我一直在阅读有关数据规范化等的信息，也许这太规范化了？鉴于用户可以拥有数十万个项目，我需要最快的方式来执行它，并且它可以扩展。

我有六张桌子

```
--
-- Table structure for table `emails`
--

CREATE TABLE IF NOT EXISTS `emails` (
  `ID` int(5) NOT NULL AUTO_INCREMENT,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `sent` smallint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=5062 ;

-- --------------------------------------------------------

--
-- Table structure for table `ips`
--

CREATE TABLE IF NOT EXISTS `ips` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ip` varchar(255) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7534 ;

-- --------------------------------------------------------

--
-- Table structure for table `user_items`
--

CREATE TABLE IF NOT EXISTS `user_items` (
  `ID` int(10) NOT NULL AUTO_INCREMENT COMMENT 'Allows sorting by last added..',
  `name` varchar(255) NOT NULL,
  `owner` varchar(255) NOT NULL,
  `folder` int(10) NOT NULL,
  `version` int(5) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `name` (`name`),
  KEY `folder` (`folder`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=10431 ;

-- --------------------------------------------------------

--
-- Table structure for table `data`
--

CREATE TABLE IF NOT EXISTS `data` (
  `ID` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `info` varchar(255) DEFAULT NULL,
  `inserted` varchar(255) NOT NULL,
  `version` int(5) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `inserted` (`inserted`),
  KEY `version` (`version`),
  KEY `name_version` (`name`,`version`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7207 ;

-- --------------------------------------------------------

--
-- Table structure for table `data_emails`
--

CREATE TABLE IF NOT EXISTS `data_emails` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `email_id` int(5) NOT NULL,
  `name` varchar(255) NOT NULL,
  `version` int(5) NOT NULL,
  `time` int(255) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `version` (`version`),
  KEY `name_version` (`name`,`version`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9849 ;

-- --------------------------------------------------------

--
-- Table structure for table `data_ips`
--

CREATE TABLE IF NOT EXISTS `data_ips` (
  `ID` int(5) NOT NULL AUTO_INCREMENT,
  `ns_id` int(5) NOT NULL,
  `name` varchar(255) NOT NULL,
  `version` int(5) NOT NULL,
  `time` int(255) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `version` (`version`),
  KEY `name_version` (`name`,`version`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=17988 ; 
```

我需要实现的目标如下。我需要获取每个 user_item 并获取与之关联的数据、电子邮件和 ips。user_items 通过列 'name' 和 version 链接到 data、data_emails 和 data_ips。

data_emails 和 data_nameservers 分别链接到 emails 和 ips，其中 email_id/ip_id = ID

因为多个连接会导致行乘法，所以我不得不使用嵌套子查询。因为一个用户可以有多个与一个项目相关联的电子邮件和 ips，所以我使用 group_concat 对所有特定行进行分组。然后我在我的 PHP 中分解了这一列 - 这本身似乎效率低下，但我看不到其他方法吗？

我玩过索引，但是由于复杂的连接以及我对此很陌生的事实，我不确定要拥有哪些索引。任何人都可以建议索引并解释它们吗？

```
SELECT user_items.ID, user_items.name, user_items.update,data.*, x.emails,
    x.e_status, y.ip, x.email_counts, y.ip_counts
FROM user_items
    LEFT JOIN data AS data
        ON (data.name = user_items.name AND data.version = user_items.version)
    LEFT JOIN (
        SELECT data_emails.name, data_emails.version,
            GROUP_CONCAT( b.email SEPARATOR ',' ) as emails,
            GROUP_CONCAT( b.sent SEPARATOR ',' ) as e_status,
            GROUP_CONCAT( b.email_count SEPARATOR ',' ) as email_counts
        FROM data_emails 
            LEFT JOIN (
                SELECT emails.ID, emails.email, emails.sent, data_emails.name,
                    data_emails.version, data_emails.email_id,
                    COUNT(data_emails.ID) as email_count
                FROM data_emails 
                    LEFT JOIN emails ON (data_emails.email_id = emails.ID)
                GROUP BY data_emails.email_id
            ) b ON (data_emails.email_id = b.ID) 
        GROUP BY data_emails.name 
    ) x ON (data.name = x.name AND x.version = user_items.version) 
    LEFT JOIN (
        SELECT data_ips.name,data_ips.version,
            GROUP_CONCAT( c.ip SEPARATOR ',' ) as ip,
            GROUP_CONCAT( c.ips_count SEPARATOR ',' ) as ip_counts
        FROM data_ips 
            LEFT JOIN (
            SELECT ips.ID, ips.ip, data_ips.name, data_ips.version,
                    data_ips.ip_id, COUNT(data_ips.ID) as ips_count
            FROM data_ips 
                LEFT JOIN ips ON (data_ips.ip_id = ips.ID)
                GROUP BY data_ips.ip_id
            ) c  ON (data_ips.ip_id = c.ID) 
        GROUP BY data_ips.name
    ) y ON (data.name = y.name AND y.version = user_items.version)
WHERE user_items.folder = '2'
GROUP BY user_items.name 
```

为了完整起见，Explain 对查询的输出如下：

```
+----+-------------+-------------+--------+------- -------------+--------------+---------+--------- ------------------------------------+--------+------ ---------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+-------------+--------+------- -------------+--------------+---------+--------- ------------------------------------+--------+------ ---------------+
| 1 | 初级 | 用户项目 | 参考 | 文件夹 | 文件夹 | 4 | 常量 | 第1139章 使用临时的；使用文件排序 |
| 1 | 初级 | 数据 | 参考 | 版本，名称版本 | 名称版本 | 261 | gua.user_items.name,gua.user_items.version | 1 | |
| 1 | 初级 | <派生2> | 全部 | 空 | 空 | 空 | 空 | 5591 | |
| 1 | 初级 | <派生4> | 全部 | 空 | 空 | 空 | 空 | 5443 | |
| 4 | 派生 | 数据_ips | 全部 | 空 | 空 | 空 | 空 | 16301 | 使用临时的；使用文件排序 |
| 4 | 派生 | <派生5> | 全部 | 空 | 空 | 空 | 空 | 7533 | |
| 5 | 派生 | 数据_ips | 全部 | 空 | 空 | 空 | 空 | 16301 | 使用临时的；使用文件排序 |
| 5 | 派生 | IPS | eq_ref | 初级 | 初级 | 4 | gua.data_ips.ns_id | 1 | |
| 2 | 派生 | 数据电子邮件 | 全部 | 空 | 空 | 空 | 空 | 10138 | 使用临时的；使用文件排序 |
| 2 | 派生 | <派生3> | 全部 | 空 | 空 | 空 | 空 | 5061 | |
| 3 | 派生 | 数据电子邮件 | 全部 | 空 | 空 | 空 | 空 | 10138 | 使用临时的；使用文件排序 |
| 3 | 派生 | 电子邮件 | eq_ref | 初级 | 初级 | 4 | gua.data_emails.email_id | 1 | |
+----+-------------+-------------+--------+------- -------------+--------------+---------+--------- ------------------------------------+--------+------ ---------------+

```

# django - 服务器错误 - heroku, django

> ID：15970801
> 
> 赞同：0
> 
> 时间：2013-04-12T11:57:09.727
> 
> 标签：django, heroku

部署我的代码并访问该站点后，我收到了 H20 错误。这是日志：

```
2013-04-12T11:45:59.304354+00:00 heroku[router]: at=error code=H20 desc="App boot timeout" method=GET path=/ host=olp-website.herokuapp.com fwd="86.151.6.106" dyno= connect= service= status=503 bytes= 
```

所以我试图检查测功机：

```
heroku ps --app olp-website

    === web: newrelic-admin run-program gunicorn -c gunicorn.py.ini wsgi:application
    web.1: up 2013/04/12 12:46:21 (~ 1m ago)

heroku ps:restart --app olp-website

    Restarting processes... done

heroku ps --app olp-website

    === web: newrelic-admin run-program gunicorn -c gunicorn.py.ini wsgi:application
    web.1: starting 2013/04/12 12:48:42 (~ 6s ago) 
```

现在收到 500 内部服务器错误：

```
2013-04-12T13:38:19.116492+00:00 app[web.1]: 2013-04-12 13:38:19 [2] [INFO] Listening at: http://0.0.0.0:28853 (2)
2013-04-12T13:38:19.115928+00:00 app[web.1]: 2013-04-12 13:38:19 [2] [INFO] Starting gunicorn 0.14.3
2013-04-12T13:38:19.116593+00:00 app[web.1]: 2013-04-12 13:38:19 [2] [INFO] Using worker: gevent
2013-04-12T13:38:19.122714+00:00 app[web.1]: 2013-04-12 13:38:19 [5] [INFO] Booting worker with pid: 5
2013-04-12T13:38:19.135537+00:00 app[web.1]: 2013-04-12 13:38:19 [7] [INFO] Booting worker with pid: 7
2013-04-12T13:38:19.129099+00:00 app[web.1]: 2013-04-12 13:38:19 [6] [INFO] Booting worker with pid: 6
2013-04-12T13:38:19.140715+00:00 app[web.1]: 2013-04-12 13:38:19 [8] [INFO] Booting worker with pid: 8
2013-04-12T13:38:19.393488+00:00 heroku[web.1]: State changed from starting to up
2013-04-12T13:38:20.310391+00:00 app[web.1]: 2013-04-12 13:38:20,310 (5/Dummy-2) newrelic.core.agent INFO - New Relic Python Agent (1.3.0.289)
2013-04-12T13:38:21.072892+00:00 heroku[router]: at=info method=GET path=/ host=olp-website.herokuapp.com fwd="86.151.6.106" dyno=web.1 connect=31ms service=761ms status=500 bytes=5 
```

我看不出有什么问题，因为代码在开发中运行良好，并且我正在使用 django-skel 设置文件进行生产。

你知道什么可能设置不正确吗？

编辑：只看heroku上的数据库信息，看起来数据库有0个表 - 所以我猜sqlite数据库没有迁移到postresql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:47:06.530

H20 错误通常意味着您的应用在空闲后需要很长时间才能启动。

`The router will enqueue requests for 75 seconds while waiting for starting processes to reach an “up” state. If after 75 seconds, no web dynos have reached an “up” state, the router logs H20 and serves a standard error page.`

您必须检查该资产是否已预编译，或者是否存在其他可能会减慢应用程序启动速度的因素。

**调试超时：**

请求超时的原因之一是代码中的无限循环。在本地进行测试，看看您是否可以复制问题并修复错误。

另一种可能性是您正在尝试在 Web 进程中执行某种长时间运行的任务，例如：

```
Sending an email
Accessing a remote API 
Web scraping / crawling
Rendering an image or PDF
Heavy computation 
Heavy database usage (slow or numerous queries) 
```

如果是这样，您应该将这项繁重的工作转移到可以从您的 Web 请求异步运行的后台作业中。

当您的应用程序使用的外部服务不可用或过载时，会发生另一类超时。在这种情况下，除非您将工作移至后台，否则您的 Web 应用程序很可能会超时。在某些情况下，您必须在 Web 请求期间处理这些请求，您应该始终为失败情况做好准备。

# c++ - 用纯 C 实现的 C++

> ID：15970804
> 
> 赞同：6
> 
> 时间：2013-04-12T11:57:17.507
> 
> 标签：c++, c, compiler-construction, implementation

我曾多次阅读过早期的 C++ 编译器在编译之前将第一个 C++ 代码翻译成纯 C（或者可能需要第三方 C 编译器）。

玩弄语法/语言/编译领域，我很想知道 C++ 是如何用纯 C 实现的，尤其是实现类继承和 [虚拟] 方法调用的一种方法。

你能指出我现在仍然可用的这样一个编译器吗？

我知道可以使用结构和函数指针在纯 C 中模拟/模拟 OO 代码，但我希望看到 C++ 语言在 C 中的实际实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T12:08:10.043

你可以试试[cfront](https://en.wikipedia.org/wiki/Cfront)。[你可以在这里](http://www.softwarepreservation.org/projects/c_plus_plus/cfront)下载旧版本。但它只支持非常有限的 C++ 子集。~~某些功能（例如异常）无法以这种方式实现。~~

**更新：** 正如 Maxim Yegorushkin 所指出的，可以使用 setjmp/longjmp 实现异常。但是，如果我没记错的话，异常不能作为 C++ 中的库来实现。它们必须是核心语言的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:11:02.613

如果您只是想看看 C++ 是如何用 C 语言翻译的，那么您有几个选项可供您使用，C++ FAQ 有一个部分[在这里](http://www.parashift.com/c++-faq/convert-to-c.html)介绍了这一点。它涵盖了我所见过的所有主要选项，并且应该在新选项可用时进行更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T12:12:31.403

[Comeau 编译器](http://en.wikipedia.org/wiki/Comeau_C/C%2B%2B)以这种方式工作。在鼎盛时期，每个人都在称赞它的标准合规性，并使用 Comeau 在线测试代码片段，但很少有人使用它来构建生产代码。

[EDGE 前端](http://www.edg.com/index.php?location=c_frontend)也以这种方式工作。我听说英特尔 C++ 编译器和 Comeau 都使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T12:08:24.590

第一个 Microsoft C++ 编译器与您描述的完全一样，我知道是因为我记得使用过它。根据我的记忆，我*认为*这是他们的 C 编译器的第 7 版。这应该是 1992 年左右（加/减 2 年）。

更新：见[http://en.wikipedia.org/wiki/Visual_C%2B%2B](http://en.wikipedia.org/wiki/Visual_C%2B%2B)，我指的那个确实是在 1992 年发布的，叫做“C/C++ 7.0”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T14:59:33.417

这就是 C++ 的原始实现（称为`cfront`）的工作方式。它是 C 编译器的前端。现在这并不常见，尽管 EDG 的 C++ 前端可以配置一个 C 后端，以便生成 C 代码。这在您运行新编译器时很有用，但在生产编译器中这是一个浪费的步骤，因此商业编译器通常直接进入目标平台的首选形式。而且你**真的**不想通过阅读生成的 C 代码来调试你的程序。我还没有为 C++ 做过这个，但是当我在 Dinkumware 工作时，我们结合 EDG 开发的 Java 前端实现了 Java 核心库。C 代码在逻辑上是结构化的，但它看起来很像 LISP：很多地狱愚蠢的括号。

# sql - Postgres中相关的时间戳

> ID：15970805
> 
> 赞同：1
> 
> 时间：2013-04-12T11:57:18.427
> 
> 标签：sql, postgresql, date, timestamp

在 Postgres 数据库中，我有一个表，其中一个列将日期作为*字符变化*数据类型保存。它的格式是`dd MMM yyyy HH:mm`.

例如：`21 Sep 2012 12:23`.

有没有办法将它转换为时间戳 fromat 以便我可以将它与当前时间（即`now()`函数）进行比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:04:21.823

有`SET DATA TYPE`和`USING`部分的`ALTER TABLE`声明。如果您想永久修复该列。

```
ALTER TABLE foo
    ALTER COLUMN my_time_stamp SET DATA TYPE timestamp
    USING to_timestamp(my_time_stamp); 
```

查看[文档](http://www.postgresql.org/docs/9.1/static/sql-altertable.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:02:25.093

您正在寻找`to_timestamp`功能：

```
SELECT to_timestamp('21 Sep 2012 12:23', 'DD Mon YYYY HH24:MI') 
```

[http://sqlfiddle.com/#!12/d41d8/785](http://sqlfiddle.com/#!12/d41d8/785)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T12:08:45.670

我在某处读到过关于 to_timestamp 的文章试试这个`to_timestamp(text, text)`

```
functionname:---to_timestamp(text, text)    
returntype---timestamp with time zone 
its function---convert string to time stamp 
```

例子：`to_timestamp('05 Dec 2000', 'DD Mon YYYY')`

# c - 使用 GUI 自动填充阵列

> ID：15970808
> 
> 赞同：0
> 
> 时间：2013-04-12T11:57:22.627
> 
> 标签：c, arrays, user-interface

我正在使用 C，并且我有一个正在处理的数组。值为 0 或 1。

目前，由于该数组是我对程序执行任何操作的先决条件，因此我从一个文件手动创建它，其中文件包含起始点和结束点的行列坐标，垂直或水平线填充数组中的值 1。

我现在只想要水平线和垂直线。但是我想提高整个数组初始化过程的效率。在文件中指定坐标真的很繁琐。我想要一个 GUI，其中每个像素对应于数组的一个单元格，当我在窗口中绘制一些东西时，相应的单元格在我的数组中获得值 1，一旦我有了数组，我将它传递给我的 C 程序.

现在，我可以使用一些已经存在的软件，或者其他一些快速修复数组初始化的方法，因为一旦数组正确初始化，我的主程序就会启动。

谢谢。

**加法*

操作系统：Ubuntu。现在的数组大小：100*100 但那是因为我手动填充它并且我喜欢保持它很小。但我没有看到它超出普通电脑屏幕，比如 1000*800

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:02:59.690

只需使用图像格式。像 TIFF 一样，它确实有一个 1 位变体，非常适合您的情况。我怀疑称为 GIMP 的图像编辑软件可以保存 1 位 TIFF，即使不能，您也可以创建 8 位 TIFF，然后根据某个阈值将像素计数为打开或关闭。有很多用于处理 TIFF 的库，但如果您想要更简单/更笨的格式，您也可以使用 BMP 或其他东西（但商品软件会帮助您编辑）。

# java - 使用 Mockito 通过反射来模拟方法

> ID：15970810
> 
> 赞同：4
> 
> 时间：2013-04-12T11:57:26.187
> 
> 标签：java, reflection, mockito

我们正在使用 Mock-Factory 为我们的开发人员提供关于模拟功能的最大可能舒适度，同时尽可能少地了解 mockito 本身。

为此，我们的 Mock-Factory 提供了一种在给定类名、方法名（通过正则表达式）和给定返回值的情况下创建模拟的方法，该返回值看起来如下（清理到此问题的相关部分):

```
public <T> T getMockForMethod(Class<T> clazz, String methodName, Object methodResponse)
{
  T mockForMethod = mock(clazz);
  for (Method m : clazz.getDeclaredMethods ())
  {
    if (m.getName ().matches (methodName) && 
        m.getReturnType ().isAssignableFrom (methodResponse.getClass ()))
    {
      try
      {
         Class<?>[] paramTypes = m.getParameterTypes ();
         Object[] params = new Object[paramTypes.length];
         for (Object o : params)
         {
           o = Mockito.anyObject ();
         }
         Mockito.when (m.invoke (mockForService, params)).thenReturn (methodResponse);
      }
      catch (IllegalArgumentException e)
      {
        e.printStackTrace (System.err);
      }
      catch (IllegalAccessException e)
      {
        e.printStackTrace (System.err);
      }
      catch (InvocationTargetException e)
      {
        e.printStackTrace (System.err);
      }
    }
  }
  return mockForMethod;
} 
```

如您所见，方法名称由名称（正则表达式）和正确的给定返回类型匹配。

它工作正常，但我有点担心我必须构建人工参数数组`params`！不，方法

```
Mockito.when (m.invoke (mockForService, Mockito.anyVararg ())).thenReturn(methodResponse); 
```

没用！但我真的不明白为什么！？

谁能给我上面代码的原因或更好的替代方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T12:48:13.053

你不应该这样做。Mockito 是一个设计精良、易于学习、文档非常完善且几乎是事实上的标准框架。而且它是类型安全的，不需要反射，这使得测试易于阅读和理解。

让您的开发人员学习真正的 Mockito 并直接使用它的 API。他们会很乐意使用它，因为它比您自己的超级 api 具有更好、更容易使用和更灵活的设计，而且他们会知道他们不会白白学习 Mockito，因为他们可能会使用它在其他项目甚至其他工作中。

Mockito 不需要其他专有 API。因此，我建议的替代方法是忘记这一点，向您的开发人员教授 Mockito。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T13:50:29.543

好吧，您的方法并不是真正的好方法，它通常是过度设计开发人员的糖果乐园。即使您的团队是“年轻人”，他们也不必在使用 Mockito 时编写 ASM。另外，如果您采用这种方式，您将避免 Mockito 提供的简单性、表达性或可插入性方面的所有好处。作为一名建筑师，我宁愿确保我的工程师了解他们在做什么，而不是把他们放在婴儿公园里。否则他们怎么能成为一支伟大的球队？

此外，此处提供的实现可能过于简单，无法支持您在处理反射、桥方法、可变参数、覆盖等时可能遇到的所有情况。如果这段代码失败，它没有可理解的消息。简而言之，您失去了直接使用 Mockito 的所有好处，并且无论如何都向项目添加了不必要的东西。

*编辑：刚刚看到[JB Nizet 的回答](https://stackoverflow.com/a/15971840/48136)，我完全同意他的看法。*

* * *

但是，为了回答您的问题，那里发生了什么。简要看一下您的代码，您似乎不想关心传递给该方法的参数。

因此，假设您在被模拟的类中有以下真实方法：

```
String log2(String arg1, String arg2) 
```

和

```
String log1N(String arg1, String... argn) 
```

现在编译器看到的是，第一个方法`log2`采用 2 个类型参数`String`和一个方法`log1N`采用 2 个参数，一个是类型`String`，另一个是类型`String[]`（变量参数由编译器转换为数组）。

如果直接在这些方法上使用 Mockito，您将编写以下内容。

```
given(mock.log2("a", "b")).will(...);
given(mock.log1N("a", "b", "c", "d")).will(...); 
```

你写`logN("a", "b", "c", "d")`的就像普通的java。当您想使用参数匹配器时，您将使用 2 arg 方法编写此代码：

```
given(mock.log2(anyString(), anyString())).will(...); 
```

现在使用可变参数方法：

```
given(mock.log1N(anyString(), anyString(), anyString())).will(...); // with standard arg matchers
given(mock.log1N(anyString(), Mockito.<String>anyVararg())).will(...); // with var arg matcher 
```

在第一种情况下，Mockito 足够聪明，可以理解最后两个参数匹配器，必须进入最后一个 vararg，即`argn`，因此 Mockito 理解如果只有 3 个参数（可变参数被展平），此方法将匹配在第二种情况下`anyVararg`表示mockito，可能有任何争论。

现在，回到反射代码，签名`Method.invoke`是：

```
public Object invoke(Object obj, Object... args) 
```

传递实际参数时，反射和可变参数的典型用法是：

```
log2_method.invoke(mock, "a", "b");
log1N_method.invoke(mock, "a", new String[] { "b", "c", "d" }); 
```

或者由于这个调用方法是基于可变参数的，它可以这样写：

```
log1N_method.invoke(mock, new Object[] {"a", new String[] { "b", "c", "d" }}); 
```

所以调用中传递的参数 vararg 数组，必须实际上匹配被调用方法的签名。

这个调用当然会失败 log1N_method.invoke(mock, "a", "b", "c", "d");

因此，当您尝试使用这行代码时`anyVararg`，调用不尊重被调用方法参数的签名：

```
Mockito.when (m.invoke(mockForMethod, Mockito.anyVararg())).thenReturn(methodResponse); 
```

`m`只有当方法只有一个参数时它才会起作用。但是您必须使用数组内部的反射 API（因为 vararg 实际上是数组）。这里的技巧是 vararg in`invoke(Object obj, Object... args)`与被调用的方法 vararg 混淆了。

因此，在我的示例中使用 arg 匹配器，您应该这样做：

```
when(
    log1N.invoke(mock, anyString(), new String[] { Mockito.<String>anyVararg() })
).thenReturn("yay"); 
```

因此，如果只有一个参数是可变参数，那是同一件事：

```
String log1(String... argn)

when(
    logN.invoke(mock, new String[] { Mockito.<String>anyVararg() })
).thenReturn("yay"); 
```

当然，您不能`anyVararg`在非可变参数方法上使用，因为签名中的参数布局不匹配。

正如您在此处看到的，如果您以这种方式将 Mockito 抽象到您的团队中，您将不得不管理许多班级级别的怪事。我不是说这是不可能的。但是作为此代码的所有者，您必须对其进行维护、修复并考虑可能出错的事情，并使此*抽象*代码的用户能够理解它。

很抱歉感到如此咄咄逼人，这对我来说似乎是错误的，所以我强调了这些警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T23:06:38.640

我同意 JB Nizet 的观点，即您应该只允许您的开发人员使用本机 API。

但是，如果您确实需要为大量与正则表达式匹配的方法提供默认答案，并且您不能或不会修复这暗示的超重接口，那么您可以使用[这个 SO 答案](https://stackoverflow.com/a/15767999/1426891)作为灵感来使用[默认的 Answers](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#mock(java.lang.Class,%20org.mockito.stubbing.Answer))使这个更安全的 Mockito 重构：

```
@Test public void yourTest() {
  YourClass yourClass = mock(YourClass.class, new DefaultAnswer("foo.*Bar", baz));
  when(yourClass.someOtherMethod()).thenReturn("Some custom result");
  /* test */
}

private class DefaultAnswer implements Answer<Object> {
  private final String methodRegex; // or save a Pattern object instead
  private final Object returnValue;

  DefaultAnswer(String methodRegex, Object returnValue) { /* set fields */ }

  @Override public Object answer(InvocationOnMock invocation) throws Throwable {
    if (invocation.getMethod().getName().matches(methodRegex)) {
      return returnValue;
    } else {
      return Mockito.RETURNS_DEFAULTS.answer(invocation);
    }
  }
} 
```

# azure - 我们可以拥有带有 CCProj 的 Azure SDK 1.8 (Azure CCProj)

> ID：15970811
> 
> 赞同：1
> 
> 时间：2013-04-12T11:57:31.070
> 
> 标签：azure, azure-storage

我有一个关于 Azure SDK 1.8 *.ccproj 的小问题。以前我们正在使用 SDK 1.7 Azure 项目。现在我们要升级到 1.8，因为 azure SDK 1.8 将破坏现有 1.7 sdk 代码的更改。我们能否拥有 1.8 版本的 *.ccproj，所有 csdef 和 csconf 文件都根据 1.8 进行更改，并拥有 1.7 版本的 StorageClient 和 ServiceRuntime、诊断和配置 dll。我做了这些更改，并部署了包。虽然包已成功部署但它没有开始运行，但它无法启动。是不是因为版本不同，Azure服务无法启动。有没有人尝试过这种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:18:39.940

嗯，

如果我错了，这是正确的，但 1.7 和 1.8 之间的唯一**主要**区别是存储客户端库。我不记得有任何其他**制动变化**，你呢？

但是，如果您仔细观察，您会发现 Azure SDK 1.8 附带了两种存储客户端库。一种是`Microsoft.WindowsAzure.Storage.dll`版本为**2.0.0.0**的程序集（SDK 附带的程序集！）。然而，还有一个：`Microsoft.WindowsAzure.StorageClient.dll`版本为**1.7.0.0**的程序集。

前者安装在 GAC (v. 2.0.0.0) 中，后者 (1.7.0.0) 安装在 SDK 文件夹中：`%programfiles%\Microsoft SDKs\Windows Azure\.NET SDK\2012-10\bin`

**并且SDK 1.8 附带**的 Microsoft.WindowsAzure.StorageClient 1.7.0.0 程序集与 Microsoft.WindowsAzure.ServiceRuntime 1.8 完全兼容。诊断管理器的版本也是 1.8.0.0，因此您必须在项目中引用此版本。

我已经在 Windows Azure 中使用 StorageClient 1.7.0.0（**来自 SDK 1.8 文件夹的那个**）部署了在 SDK 1.8 上开发的多个项目，没有任何问题！

升级项目的正确方法是通过`Properties`Cloud Project 的窗口：

![VS Azure 工具 - 升级项目](https://i.stack.imgur.com/d5Y6I.png)

不要手动对定义/配置/项目文件应用任何更改！

# javascript - 仅当元素存在时如何包含脚本标记？

> ID：15970812
> 
> 赞同：2
> 
> 时间：2013-04-12T11:57:40.403
> 
> 标签：javascript, jquery

这看起来应该很简单，但我是 Javascript 的新手，所以请耐心等待。

我想包含一个脚本文件，但前提是页面上存在一个元素。我试过了：

```
var element = $('.customelement');

if(element.length() > 0) {
  $('head').append('<script language="javascript" src="custom.js"></script>');
} 
```

但这不起作用并返回错误：

> 未捕获的类型错误：对象 [object Object] 的属性“长度”不是函数

我发现很多帖子说这应该有效，所以我有点难过。我也想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T11:58:33.677

，`length()`我相信你的意思是`length`（它是一个 Javascript 属性，而不是一个 jQuery 函数）：

```
if(element.length > 0) {
  $('head').append('<script language="javascript" src="custom.js"></script>');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:59:10.870

正如错误消息所述，`length`是一个属性，但不是一个函数：

```
if (element.length > 0) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:58:49.430

正是错误所说的。`length`是属性，不是函数。删除`()`.

# asp.net - IE9“查看下载”窗口中下载文件的文件名不正确

> ID：15970814
> 
> 赞同：0
> 
> 时间：2013-04-12T11:57:44.427
> 
> 标签：asp.net, internet-explorer-9

我创建了一个网站，当我单击链接按钮时，会打开一个小弹出窗口。该弹出窗口有一个按钮，当单击此按钮时，一个 zip 文件会下载到客户端计算机。下载 zip 文件并关闭弹出窗口后，如果我在 Internet Explorer 9 中使用 Ctrl+Shift+Del 删除“下载历史记录”，然后再次打开相同的弹出窗口下载 zip 文件，下载的 zip 文件将重命名为“查看下载”窗口中的 aspx 页面（弹出页面）名称。

如果我在使用 Ctrl+Shift+Del 删除“下载历史记录”后重新启动浏览器（IE9），它工作正常

注意：弹出窗口的宽度只有 70 像素

```
FileStream myFileStream = new FileStream("TestFolder.zip", FileMode.Open);
long FileSize = myFileStream.Length;
byte[] Buffer = new byte[(int)FileSize];
myFileStream.Read(Buffer, 0, (int)FileSize);
myFileStream.Close();

Response.Clear();
Response.ContentType = @"application/octet-stream";
Response.AddHeader("Content-Disposition", "attachment; filename= TestFolder.zip");
Response.AddHeader("Content-Length", Buffer.Length.ToString());
Response.BinaryWrite(Buffer);
Response.Flush();
Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:34:11.303

只是一个假设，但我想问题是（是？）“文件名= TestFolder.zip”之间的空间。至少在我们这里，我们从文件名中删除了空格，因为它在空格之后被切断了。

# python - 在 django 中设置自定义背景图像

> ID：15970815
> 
> 赞同：0
> 
> 时间：2013-04-12T11:57:45.830
> 
> 标签：python, html, django, django-forms, django-templates

我正在 django 中开发网页。所以我有一张图片，我试图将这些图片保留为 3 页的背景图片。我将图片保存在一页中，但我无法设置任何选项或任何其他表单字段.如果我正在做某事，则内容将应用在该图像的上方或下方。

1）是否可以将图像设置为页面背景。（背景应该适用于我已经设置的主要内容，页眉和页脚）。

2）如何在我的网站上实现它。

模板是

```
{% extends "incident/base_report.html" %}

{% block main-content-a %}

<p><img src="{{ STATIC_URL }}images/Screenshot.png" /></p>

<div id="save-spreadsheet">
<form action="{% url incident.views.report_add %}" method="post">
{% csrf_token %}
{% include "buttons/cancel.html" %}
</div>
{% endblock %} 
```

我在上面的模板中放置的图像看起来像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:06:31.487

您可以做的是在基本模板中创建另一个子块并为父块设置背景。每个页面都会修改子块的内容，但不会修改背景。

例如

事件/base_report.html

```
...
{% block main-content-parent %}
  {# code to set background image #}

  {% block main-content %}
  {%endblock%}
{%endblock%} 
```

somepage_template.html

```
{% extends "incident/base_report.html" %}
{%block main-content %}
   {# your content #}
{%endblock%} 
```

# c# - 如何在 c# 中使用 iTextsharp 指定表格在 pdf 文件中的位置

> ID：15970821
> 
> 赞同：5
> 
> 时间：2013-04-12T11:58:17.020
> 
> 标签：c#, itextsharp

我已经创建了一个带有图形的 pdf 文件，现在正试图在这些图形下添加一个表格。我的问题是表格在图形上方，如何指定我希望将表格放置在 pdf 文档上的位置/位置？

这是我的代码

```
 docl.Open();
        docl.Add(new Paragraph("My first PDF file"));

        PdfContentByte cb = writer.DirectContent;
        //employee
        //                position y,position x,length,height,  unknown
        cb.RoundRectangle(   20f,      745f,     200f,   35f,      10f);
        //title
        cb.RoundRectangle(235f, 745f, 35f, 35f, 10f);
        //identity number
        cb.RoundRectangle(280f, 745f, 105f, 35f, 10f);
        //date of birth
        cb.RoundRectangle(390f, 745f, 105f, 35f, 10f);
        //employee number
        cb.RoundRectangle(500f, 745f, 105f, 35f, 10f);
        //address
        cb.RoundRectangle(20f, 660f, 200f, 80f, 10f);
        //pay method
        cb.RoundRectangle(235f, 700f, 35f, 35f, 10f);
        //brantch code
        cb.RoundRectangle(235f, 660f, 35f, 35f, 10f);
        //bank
        cb.RoundRectangle(280f, 700f, 215f, 35f, 10f);
        //account type
        cb.RoundRectangle(500f, 700f, 105f, 35f, 10f);
        //account number
        cb.RoundRectangle(280f, 660f, 160f, 35f, 10f);
        //pay point
        cb.RoundRectangle(445f, 660f, 35f, 35f, 10f);
        //date of payment
        cb.RoundRectangle(506f, 660f, 90f, 35f, 10f);
        //marital status
        cb.RoundRectangle(20f, 600f, 35f, 35f, 10f);
        //gender
        cb.RoundRectangle(60f, 600f, 35f, 35f, 10f);
        //date of appointment
        cb.RoundRectangle(100f, 600f, 70f, 35f, 10f);
        //Tax number
        cb.RoundRectangle(175f, 600f, 70f, 35f, 10f);
        cb.Stroke();

        PdfPTable table = new PdfPTable(2);
        table.HorizontalAlignment = 0;
        table.SetTotalWidth(new float[] { 800, 200 }); 
        PdfPCell cell = new PdfPCell(new Phrase("EARNINGS"));
        cell.Colspan = 2;
        cell.HorizontalAlignment = 1;
        table.AddCell(cell);
        table.AddCell("Description");
        table.AddCell("Amount"); 
```

我用这一行来指定图形在文档上的位置： // position y, position x,length,height, unknown cb.RoundRectangle(20f, 745f, 200f, 35f, 10f);

![这是我的文档的外观：](https://i.stack.imgur.com/it5hS.png)

我想将表格放在图形下方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:17:21.037

您正在将低级方法（在绝对位置添加内容）与高级方法（使用`document.add()`）混合用于页面内容。

您要么坚持使用高级方法，使用表格来创建圆角矩形。您可以使用单元格和表格事件创建带有圆角边框的表格。当您使用 时`document.add()`，iText 将负责定位所有内容（如果表格不适合页面，则包括拆分表格）。

或者您坚持低级方法，通过在绝对位置添加表格，但请注意，如果它不适合页面，itext 不会拆分表格。

看看这个例子：[Java](http://itextpdf.com/examples/iia.php?id=96) | [C#](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter05/PdfCalendar.cs) | [PDF格式](http://examples.itextpdf.com/results/part1/chapter05/calendar.pdf)

它展示了如何使用单元格事件和/或表格事件为表格创建圆角边框。有关不太复杂的示例代码，请参见[第 5 章](http://tinyurl.com/iiacsCH05)的其他示例。

正如您在日历示例中所见，表格是使用 方法添加到绝对位置的`table.WriteSelectedRows(...)`。由于您知道圆角矩形的坐标，您可以使用此方法将表格添加到绝对位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T03:40:59.137

```
private static void DemoTableSpacing() { 
    using (FileStream fs = new FileStream("SpacingTest.pdf", FileMode.Create)) { 

        Document doc = new Document(); 
        PdfWriter.GetInstance(doc, fs); 
        doc.Open(); 

        Paragraph paragraphTable1 = new Paragraph(); 
        paragraphTable1.SpacingAfter = 15f; 

        PdfPTable table = new PdfPTable(3); 
        PdfPCell cell = new PdfPCell(new Phrase("This is table 1")); 
        cell.Colspan = 3; 
        cell.HorizontalAlignment = 1; 
        table.AddCell(cell); 
        table.AddCell("Col 1 Row 1"); 
        table.AddCell("Col 2 Row 1"); 
        table.AddCell("Col 3 Row 1"); 
        //table.AddCell("Col 1 Row 2"); 
        //table.AddCell("Col 2 Row 2"); 
        //table.AddCell("Col 3 Row 2"); 
        paragraphTable1.Add(table); 
        doc.Add(paragraphTable1); 

        Paragraph paragraphTable2 = new Paragraph(); 
        paragraphTable2.SpacingAfter = 10f; 

        table = new PdfPTable(3); 
        cell = new PdfPCell(new Phrase("This is table 2")); 
        cell.Colspan = 3; 
        cell.HorizontalAlignment = 1; 
        table.AddCell(cell); 
        table.AddCell("Col 1 Row 1"); 
        table.AddCell("Col 2 Row 1"); 
        table.AddCell("Col 3 Row 1"); 
        table.AddCell("Col 1 Row 2"); 
        table.AddCell("Col 2 Row 2"); 
        table.AddCell("Col 3 Row 2"); 
        paragraphTable2.Add(table); 
        doc.Add(paragraphTable2); 
        doc.Close(); 
    } 
} 
```

我在 iTEXTSHARP 链接中将这个用于我的表格位置：[https ://www.codeproject.com/Questions/351802/Its-possible-put-a-table-in-absolute-position-with](https://www.codeproject.com/Questions/351802/Its-possible-put-a-table-in-absolute-position-with)

# java - 在哪里可以找到 com.sun.enterprise.security.auth.realm.JDBCRealm 的来源？

> ID：15970826
> 
> 赞同：0
> 
> 时间：2013-04-12T11:58:21.970
> 
> 标签：java, jakarta-ee, glassfish

我正在寻找以下的源代码：

**com.sun.enterprise.security.auth.realm.JDBCRealm** =>**版本 3.1.2.2**

我只找到3.1.1版本的源码，实在找不到3.1.2.2版本。有人可以帮助我吗？

预先感谢您和亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:03:48.103

请检查以下链接，。

[http://grepcode.com/file/maven.java.net/content/groups/promoted/org.glassfish.main.security/security/3.1.2-b18/com/sun/enterprise/security/auth/realm/ jdbc/JDBCRealm.java#JDBCRealm](http://grepcode.com/file/maven.java.net/content/groups/promoted/org.glassfish.main.security/security/3.1.2-b18/com/sun/enterprise/security/auth/realm/jdbc/JDBCRealm.java#JDBCRealm)

# c# - 对象引用未设置为对象的实例

> ID：15970833
> 
> 赞同：0
> 
> 时间：2013-04-12T11:58:38.340
> 
> 标签：c#, asp.net

出于任何原因，我遇到了一个错误，即对象引用未设置为对象的实例..

这是我的代码请帮我解决我的问题提前谢谢..

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            GetUserScraps(int.Parse(Request.QueryString["id"].ToString()));// this line have such error..

        }
    }

    public void GetUserScraps(int id)
    {
        string getUserScraps = "SELECT r.uid ,r.unm,p.photo,s.uid,s.unm,s.text,s.date,s.sid FROM register as r, status as s, profile as p WHERE p.pid.s.sid AND r.email=p.email AND s.id='" + Request.QueryString["id"].ToString() + "'";
        dt = dbClass.ConnectDataBaseReturnDT(getUserScraps);
        if (dt.Rows.Count > 0)
        {
            GridViewUserScraps.DataSource = dt;
            GridViewUserScraps.DataBind();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:00:40.993

`int.parse`无法处理 null 和，

您`Request.QueryString["id"].ToString()`的值为空。

这就是为什么会有例外：`object refrence not set to an insance of an object`

要么检查适当的值，`Request.QueryString["id"].ToString()`要么在任何情况下它都会为空，然后使用`convert.toInt()`处理空值的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:02:07.567

Request.QueryString["id"].ToString() 具有空值。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
          if(!string.IsNullOrEmpty(Request.QueryString["id"]))
             {
                GetUserScraps(int.Parse(Request.QueryString["id"].ToString()));
             }
        }
     }
    //Here u use id not querystring
    public void GetUserScraps(int id)
    {
        string getUserScraps = "SELECT r.uid ,r.unm,p.photo,s.uid,s.unm,s.text,s.date,s.sid FROM register as r, status as s, profile as p WHERE p.pid.s.sid AND r.email=p.email AND s.id='" + id + "'";
        dt = dbClass.ConnectDataBaseReturnDT(getUserScraps);
        if (dt.Rows.Count > 0)
        {
            GridViewUserScraps.DataSource = dt;
            GridViewUserScraps.DataBind();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:07:14.930

只需更改您的代码，例如：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            GetUserScraps(Convert.ToInt32(Request.QueryString["id"]));    
        }
    }

    public void GetUserScraps(int id)
    {
        string getUserScraps = "SELECT r.uid ,r.unm,p.photo,s.uid,s.unm,s.text,s.date,s.sid FROM register as r, status as s, profile as p WHERE p.pid.s.sid AND r.email=p.email AND s.id='" + id + "'";
        dt = dbClass.ConnectDataBaseReturnDT(getUserScraps);
        if (dt.Rows.Count > 0)
        {
            GridViewUserScraps.DataSource = dt;
            GridViewUserScraps.DataBind();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:05:19.703

用这个：

```
protected void Page_Load(object sender, EventArgs e)
{
        if (!Page.IsPostBack)
        {
          if (Request.QueryString.Count > 0 && Request.QueryString["id"] != null)
          {
            GetUserScraps(int.Parse(Request.QueryString["id"].ToString()));// this line have such error..
          }
        }
    }

    public void GetUserScraps(int id)
    {
        string getUserScraps = "SELECT r.uid ,r.unm,p.photo,s.uid,s.unm,s.text,s.date,s.sid FROM register as r, status as s, profile as p WHERE p.pid.s.sid AND r.email=p.email AND s.id='" + Request.QueryString["id"].ToString() + "'";
        dt = dbClass.ConnectDataBaseReturnDT(getUserScraps);
        if (dt.Rows.Count > 0)
        {
            GridViewUserScraps.DataSource = dt;
            GridViewUserScraps.DataBind();
        }
 } 
```

希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T12:09:39.237

```
 GetUserScraps(Int32.Parse(Request.QueryString["id"] ?? "0")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T12:01:17.747

使用`Convert.ToString()`而不是`.ToString()`处理空值，并确保将`id`查询字符串传递到此页面。

```
string strID=Convert.ToString(Request.QueryString["id"]);         
int intID;
if (int.TryParse(strID, out intID))
  { 
    GetUserScraps(intID);
  } 
```

# django - 过滤查询集时在多对多字段上计数（）？

> ID：15970842
> 
> 赞同：0
> 
> 时间：2013-04-12T11:59:05.067
> 
> 标签：django

我有一个挑战课程，人们可以投票给它。现在，每投给用户一票，用户将获得 5 分。

我已经用 for 循环解决了它。

```
class Challenge(models.Model):
    speaker = models.ForeignKey(settings.AUTH_USER_MODEL, related_name='speaker')
    voters  = models.ManyToManyField(settings.AUTH_USER_MODEL, , null=True, blank=True)    

score = 0
challenges = Challenge.objects.filter(speaker=user)
    for challenge in challenges:
        score = score + challenge.voters.count() * 5 
```

但我想知道我是否可以在过滤查询集的过程中立即做到这一点并获得更高的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:01:39.830

是的，您可以使用选民人数来[注释挑战对象：](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)

```
from django.db.models import Count

Challenge.objects.filter(speaker=user).annotate(voter_count=Count('voters'))
for challenge in challenges:
    score = score + challenge.voter_count * 5 
```

或者您可以汇总整个选民人数：

```
score = (Challenge.objects
            .filter(speaker=user)
            .aggregate(vc=Count('voters'))
        )['vc'] * 5 
```

# java - 使用 DynamoDB 或任何其他服务与 AWS Token Vending Machine 通信

> ID：15970853
> 
> 赞同：0
> 
> 时间：2013-04-12T11:59:25.570
> 
> 标签：java, android, amazon-web-services, amazon-dynamodb

嗨，我是 Amazon AWS 的新手，我正在尝试为我的 android 应用程序设置 DynamoDB。

我已经使用以下方式在 Elastic Beanstalk 上部署了匿名 TVM：http: [//aws.amazon.com/code/8872061742402990](http://aws.amazon.com/code/8872061742402990)

当我通过网络浏览器访问 mytvm.elasticbeanstalk.com 时，我能够加载显示 TVM 正在匿名注册上运行的页面。

1.  我很难理解在 IAM 中创建的 TVMUser 是如何链接到 elasticbeanstalk 的。

我开始使用 TVM，方法是将 tvm 的 src 复制到我的 android 应用程序中，并执行类似 aws 示例中所示的过程。

1.  我无法完全确定我的 TVM 是否与 Android 应用程序一起正常运行。我尝试运行 awssdk 的示例。但是当我点击表或在我的 DynamoDB 上什么都不做时，Userprefrences 应用程序不会创建表（我通过 aws ddb 控制台看到它）。我尝试查看 logcat，但没有出现错误。

2.  在我的应用程序中，我在下面的代码中的 putItem() 处获得了 NullPointerException：

    ```
    AmazonDynamoDBClient ddb = HomeActivity.clientManager.ddb();

    try{

       HashMap< String, AttributeValue > item = new HashMap< String, AttributeValue >();

        AttributeValue email = new AttributeValue(testEmail);
        item.put("email", email);
        //email and jot are strings and they are fine when printed in Log.
        AttributeValue atrjot = new AttributeValue().withS(jot);
        item.put("jot", atrjot);
        PutItemRequest request = new PutItemRequest().withTableName(PropertyLoader.getInstance().getTableName()).withItem(item);
        ddb.putItem(request);
        Log.e("insertJot", "Succeffull!");
    }catch (AmazonServiceException ex) {
        Log.e("insertJot", "error");
        HomeActivity.clientManager
        .wipeCredentialsOnAuthError(ex);
    } 
    ```

我觉得 logcat 中的两个项目可以提供一些线索：

> 04-12 11:39:00.577：I/TokenVendingMachineService(1161)：发送请求：[http://mytvm.elasticbeanstalk.com/registerdevice?uid=e3f2a3dbe19a8b99cc9732a8044ccb08&key=258bec0be21ca04f2bf2464a2c0ae151]

和

> 04-12 11:39:00.637：W/AmazonTVMClient(1161)：对令牌自动售货机的请求失败，代码：[0] 消息：[null]

此外，我收到以下 AndroidRuntime 错误：

> 04-12 11:39:00.777: D/AndroidRuntime(1161): 关闭 VM 04-12 11:39:00.777: W/dalvikvm(1161): threadid=1: 线程退出未捕获异常 (group=0x40a71930) 04 -12 11:39:00.797: E/AndroidRuntime(1161): 致命异常: main 04-12 11:39:00.797: E/AndroidRuntime(1161): java.lang.NullPointerException

完整的 logcat 可以在这里看到：http: [//pastebin.com/u2eyh2ME](http://pastebin.com/u2eyh2ME)

我已经被这个问题困扰了很长时间，并且无法在其他任何地方找到适当的文档或帮助，任何帮助将不胜感激。谢谢！

# r - 从复杂列表中检索低级元素 (R)

> ID：15970856
> 
> 赞同：3
> 
> 时间：2013-04-12T11:59:38.723
> 
> 标签：r, list, command

假设您有以下相当复杂的列表结构：

```
all_m<-list();clist1<-list();clist2<-list()
for (j in 1:3){ for (i in 1:5){
      m1<-matrix(rnorm(4,0,1),2,2)
      m2<-matrix(rnorm(9,0,1),3,3)
      m3<-matrix(rnorm(16,0,1),4,4)
      m4<-matrix(rnorm(25,0,1),5,5)
      all_m<-list(m1,m2,m3,m4)
      names(all_m)<-c('m1','m2','m3','m4')
      clist1[[i]]<-all_m
      clist2[[j]]<-clist1
    }} 
```

`clist2`我怎样才能寻址和检索相同类型的所有低级元素，比如说`$m2`，并将它们重新排列到一个数组中？

我想这在没有循环的情况下是可能的。我会对使用 R 的控制结构之一、索引或类似的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:38:14.400

怎么样：

```
library(abind)
fun1 <- function(x) abind(lapply(x,'[[',"m2"),along=3)
abind(lapply(clist2,fun1),along=4) 
```

# mysql - 使用外部 MYSQL 删除列或重命名列

> ID：15970857
> 
> 赞同：0
> 
> 时间：2013-04-12T11:59:39.990
> 
> 标签：mysql

只添加了一个带有外键的列。意识到我忘记了一个“t”。

删除了外键，但仍然出现错误 - 当我尝试更改或删除列时，重命名 '.... 时出错。

没有更多的想法了......

有任何想法吗。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:31:57.527

转到 phpMyAdmin 中的数据库，从顶部栏中选择 SQL 选项。

在那里输入`ALTER Table [tablename] change [old column name] [new column name] [data type (eg varchar)] ([field length])`

就像是`ALTER Table Users change firstname first_name text (25) ;`

希望这就是你所问的

乔

# php - php preg_match 在另一个字符串中间提取一个字符串

> ID：15970864
> 
> 赞同：1
> 
> 时间：2013-04-12T11:59:54.207
> 
> 标签：php, regex

我试图从这个字符串中提取一个字符串：

```
...width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F84915247&amp;color=da1716&amp;auto_play=false&amp;show_artwork=true"... 
```

我想要的只是 URL 部分：

```
http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F84915247&amp 
```

这是我制作的正则表达式：

```
$regex = "/^httpamp$/", but it does not work. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:03:16.790

你可以使用：

```
/url=([^ ]*)/ 
```

该 URL 将位于第一个捕获组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:35:26.667

这将起作用：

```
$regex = '~url=\K\S+?&amp~'; 
```

（该`\K`功能仅在其位置后保留字符）

或向后看：

```
$regex = '~(?<=url=)\S+?&amp~'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:44:05.097

不建议使用正则表达式解析 HTML 文本，最好使用 DOM 解析器。

但是，如果您知道自己在做什么，请使用以下正则表达式：

```
~\?url=([^;]+)~ 
```

您想要的 URL 在匹配组 #1 中可用。

### 现场演示：[http ://www.rubular.com/r/yiqtviBaSd](http://www.rubular.com/r/yiqtviBaSd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T13:44:13.347

@anubhava 解决方案很好，但我对其进行了调整以改进它，并支持新的 iframe HTML5 SoundCloud 嵌入代码。

```
\?url=([^"]+) 
```

这将匹配 url 但不匹配尾随引号。这样，用户可以输入 SoundCloud 小部件，然后代码将删除小部件，只在输入中留下 url。

然后，当您渲染到屏幕（从您的数据库输出）时，可以编写第二个脚本以匹配以[http://api.soundcloud.com](http://api.soundcloud.com)开头的 SoundCloud url并将其包装在小部件中。

# if-statement - 使用 if 条件时 Cuda 程序崩溃

> ID：15970870
> 
> 赞同：0
> 
> 时间：2013-04-12T12:00:06.300
> 
> 标签：if-statement, cuda

我得到了这个非常奇怪的行为，我的 cuda 程序崩溃取决于我内核中的 if 子句。这段代码工作正常（相同的指令，可能编译器对此进行了优化？）：

```
... 
if( value == 0 )
{
  result = make_float4(0,0,1,0.01);
}
else
{
  result = make_float4(0,0,1,0.01);
}
... 
```

改成这个

```
... 
if( value == 0 )
{
  result = make_float4(0,0,1,0.01);
}
else
{
  result = make_float4(1,0,1,0.01);
}
... 
```

调用下一个内核时，使我的程序因未指定的启动失败而崩溃。问题似乎确实是条件执行而不是*result*的值。检查 cudaGetLastError() 不会返回错误。

任何人都遇到过类似的问题，或者是否有类似线程发散限制的东西？知道如何进一步调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:20:19.400

在对我的问题的评论的帮助下，我自己找到了答案：代码中的错误早在之前。*价值*的计算是个问题。在那里，我做了一个数组越界访问，当 if 条件中的两个语句相同时，编译器似乎优化了它。

这个：

```
...
int value = stupidArray[wrongIndex];

if( value == 0 )
{
  result = make_float4(0,0,1,0.01);
}
else
{
  result = make_float4(0,0,1,0.01);
}
... 
```

对此进行了优化：

```
...
result = make_float4(0,0,1,0.01);
... 
```

所以在这种情况下没有产生错误。

# xml - 根据树中另一个元素的值更改 XML 元素的值

> ID：15970874
> 
> 赞同：6
> 
> 时间：2013-04-12T12:00:24.667
> 
> 标签：xml, xmlstarlet

我有一个*非常*大的（100 多兆字节未压缩）XML 文件来存储数据集，我正在尝试有选择地更改一些值。

例如，say`sample.xml`看起来像这样：

```
<objects>
  <object>
    <name>Foo</name>
    <constant1>10</constant1>
    <constant2>20</constant2>
  </object>
  <object>
    <name>Bar</name>
    <constant1>15</constant1>
    <constant2>40</constant2>
  </object>
<objects> 
```

现在我想将 的值更改`<constant1>`为 18，但**仅限**`Name`于其元素具有 value的对象`Foo`。我一直在查看 XML Starlet 文档，但其[关于编辑的文章](http://xmlstar.sourceforge.net/doc/UG/ch04s03.html)仅包含有关如何直接在树中查找元素属性的示例，除非我遗漏了一些东西......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T12:15:31.853

...显然我是个白痴；如[本答案](https://stackoverflow.com/questions/9726143/searching-for-xml-tag-by-value-between-them-and-inserting-a-new-tag-in-shell-scr)所示，您可以像搜索属性值一样搜索元素值，因此正确的命令是：

`xmlstarlet ed -u '//object[name="Foo"]/const1' -v 18 sample.xml`

...另外，在处理非常大的文件时需要注意：没有输出重定向，`xmlstarlet`打印到标准输出。所有 100 多兆字节的 xml。哎呀。

# android - 为什么有时我需要 readParcelable 中的类加载器？

> ID：15970876
> 
> 赞同：2
> 
> 时间：2013-04-12T12:00:40.150
> 
> 标签：android, classloader, parcelable

为什么我有时需要在阅读`Parcelable`using时明确指出类加载器`readParcelable`？

# responsive-design - 如何让 460 像素的屏幕显示缩小的 640 像素设计，同时还拥有 320 像素的模板？

> ID：15970878
> 
> 赞同：2
> 
> 时间：2013-04-12T12:00:45.900
> 
> 标签：responsive-design, viewport, pixel-ratio

视口、@media、像素比率等让我很难受。我有一个智能手机（响应式）网站，其中包含一个 320px 和一个 640px 模板，我想实现以下目标：

最大 320px 宽度：显示 320px 模板。

从 321 到 639 像素宽度：显示 640 像素模板缩小以适合屏幕。

640px 或更多：显示 640px 模板（无缩放）

（640px 模板有真正 640px 宽度的图像和东西，所以我想缩放应该由视口或元标记完成）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:12:19.367

使用媒体查询进行移动优先设计，例如；

```
@media only screen  and (max-device-width : 320px) {

/* Styles 320px */
.imageContainer{display:none} /*example for image containing element*/
} 
```

适用于中型屏幕；

```
@media only screen and (min-device-width : 321px)
    and (max-device-width : 639px) {

    /* Styles upto 640px */
    .imageContainer{display:none}
    } 
```

并且对于高于 640px 的屏幕；

```
@media only screen  and (min-device-width : 640px) {

    /* Styles above 640px */
    .imageContainer{
       display:block;
     }
    .imageContainer img{
      width:100%; /*gives full width to all images on this viewport*/
      height:auto;
       }
    } 
```

适用于 iPhone4 和 iPad 等 Retina 显示器；

```
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

是的，缩放视口由包含在您头部中的 Meta 标签维护，即：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi" /> 
```

# javascript - 如何通过onMouseMove防止物体移动跳跃？

> ID：15970881
> 
> 赞同：3
> 
> 时间：2013-04-12T12:00:53.657
> 
> 标签：javascript, asynchronous

*[这可能已得到回答，但在搜索中找不到任何积极的结果。]*

*拥有一个脚本来使用超出“正常”* x,y 定位的各种额外计算来移动元素 。

我没有使用 JQuery 或任何其他库，但这里有一个关于核心的示例： **>> [fiddle](http://jsfiddle.net/YQLJa/) <<**

手头的问题是，当移动元素时，它有时不会更新，例如：当指针移动时，元素静止不动，然后出现一个大跳跃。

由于某种原因，这种情况在缓慢移动时最常发生。*（也许它一直都在这样做，但在快速移动时它并不那么明显。）*

我在简单地移动到 x,y 时也看到了这种*效果*，但并不那么频繁。

***问题是是什么原因造成的，希望如何解决。***

我试图添加一个时间检查，如果最后一个*mousemove* -event 是例如 10 毫秒前什么都不做。没有更好的。

还尝试将元素的定位置于超时状态，如下所示：

```
setTimeout(function(){
    element.style.left = x + 'px';
    element.style.top  = y + 'px';
}, 0); 
```

让浏览器做其他工作，但不是更好。

*这在我测试过的浏览器的 Mozilla Firefox 中最为明显。Opera 绝对是最流畅的。*

* * *

***编辑：***

添加了一个简单的

```
 console.log('1'); 
```

而且我注意到，当运动挂起时，日志也会挂起（不记录）。

就像在`446 events`，滞后，`447 events`。

因此，它必须位于未触发或类似事件区域的某个位置。

* * *

***编辑：***

@kenansulayman：

澄清。我不使用`setTimeout()`- 我用它*测试过*，也使用 0,1,2,3,5,10,15,...,500+，没有更好的结果：

我也用这个测试过：

在鼠标按下时开始：

```
Drag.int = 0;
Drag.eint = setInterval(function(){Drag.int++}, 1); /* 1 being variable. */ 
```

并且在`move`添加`console.log(Drag.eint)`时 - 当发生运动滞后/停止时 -`Drag.int`增加 1。永远不会有间隙。如：

```
447
448
449 <-- lag, movement stop, aprox 1-1.5 seconds
450
451 
```

如果我包括`setTimeout()`说超时为 10 或 20 的任何一个，则不会。

如果我完全没有抓住重点——请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:29:43.697

没有办法解决客户端滞后的情况。但是，我建议对 ]x|y[ 坐标进行简单插值。

也就是说，您可以执行以下操作：

1.  启动间隔捕获缓存的 ]x|y[ 坐标（按 2.）
2.  启动一个间隔来捕获 ]x|y[ 坐标。

现在测试最近*k*个捕获的异常值坐标（适用于发生跳跃（滞后）的情况）并插值跳跃。

高级提案：

![插值，更高程度](https://i.stack.imgur.com/d14fc.png)

而*n*是插值的程度。通常，对于您的应用程序，]4|7[ 之间的值是合适的。

至于异常值检测，我建议对异常值使用基本的***Grubbs 检验***或***Stahel-Donoho Outlyingness***。

# c# - AvalonDock DockingManager 不加载布局

> ID：15970888
> 
> 赞同：6
> 
> 时间：2013-04-12T12:01:05.127
> 
> 标签：c#, wpf, xml-serialization, avalondock

为了保存和加载我的布局，我按照[这里](http://avalondock.codeplex.com/wikipage?title=AvalonDock%202.0%20Getting%20Start%20Guide%20PART%202)的说明进行操作，但它对我不起作用。

我在`XAML`里面有这个`MainWindow`：

```
<StackPanel Orientation="Vertical">
    <Button Content="Save"
            Click="SaveButton_Click"/>
    <Button Content="Load"
            Click="LoadButton_Click"/>
    <ad:DockingManager x:Name="myDM">
        <ad:LayoutRoot>
            <ad:LayoutPanel>
                <ad:LayoutDocumentPane>
                    <ad:LayoutDocument Title="Document">
                        <TextBox />
                    </ad:LayoutDocument>
                </ad:LayoutDocumentPane>
            </ad:LayoutPanel>
            <ad:LayoutRoot.LeftSide>
                <ad:LayoutAnchorSide>
                    <ad:LayoutAnchorGroup>
                        <ad:LayoutAnchorable Title="Left">
                            <TextBox/>
                        </ad:LayoutAnchorable>
                    </ad:LayoutAnchorGroup>
                </ad:LayoutAnchorSide>
            </ad:LayoutRoot.LeftSide>
        </ad:LayoutRoot>
    </ad:DockingManager>
</StackPanel> 
```

这些是按钮单击的事件处理程序：

```
private void SaveButton_Click(object sender, RoutedEventArgs e)
{
    XmlLayoutSerializer layoutSerializer = new XmlLayoutSerializer(myDM);
    using (var writer = new StreamWriter("test"))
    {
        layoutSerializer.Serialize(writer);
    }
}

private void LoadButton_Click(object sender, RoutedEventArgs e)
{
    XmlLayoutSerializer layoutSerializer = new XmlLayoutSerializer(myDM);
    using (var reader = new StreamReader("test"))
    {
        layoutSerializer.Deserialize(reader);
    }
} 
```

显示窗口后，我点击保存“测试”文件的内容是：

```
<?xml version="1.0" encoding="utf-8"?>
<LayoutRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <RootPanel Orientation="Horizontal">
    <LayoutDocumentPane>
      <LayoutDocument Title="Document" IsSelected="True" IsLastFocusedDocument="True" LastActivationTimeStamp="04/12/2013 14:50:38" />
    </LayoutDocumentPane>
  </RootPanel>
  <TopSide />
  <RightSide />
  <LeftSide>
    <LayoutAnchorGroup>
      <LayoutAnchorable AutoHideMinWidth="100" AutoHideMinHeight="100" Title="Left" />
    </LayoutAnchorGroup>
  </LeftSide>
  <BottomSide />
  <FloatingWindows />
  <Hidden />
</LayoutRoot> 
```

问题来了 - 在我单击加载按钮后，文档和可锚定项消失了，我在窗口中看到的只有 2 个按钮和一个空矩形，我的布局应该是。此时，当我单击保存按钮时，这是写入“测试”文件的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LayoutRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <RootPanel Orientation="Horizontal">
    <LayoutDocumentPane />
  </RootPanel>
  <TopSide />
  <RightSide />
  <LeftSide>
    <LayoutAnchorGroup Id="d3710e74-e6b5-4541-8b6f-554197c29dd6" />
  </LeftSide>
  <BottomSide />
  <FloatingWindows />
  <Hidden>
    <LayoutAnchorable AutoHideMinWidth="100" AutoHideMinHeight="100" Title="Left" IsSelected="True" LastActivationTimeStamp="04/12/2013 14:53:56" PreviousContainerId="d3710e74-e6b5-4541-8b6f-554197c29dd6" PreviousContainerIndex="0" />
  </Hidden>
</LayoutRoot> 
```

我正在使用 AvalonDock 2.0.1746.0。任何人都知道如何解决它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-15T23:19:39.243

### 编辑：

我尝试了您的代码，并将其输出与我的进行了比较，发现您的序列化文件缺少`ContentId`您的`LayoutDocument`和`LayoutAnchorable`. 这个属性是 AvalonDock 在内部用来匹配现有`DockingManager`面板和序列化版本的属性，没有它，如您所见，没有任何效果。

还有 2 种方法可用于设置`ContentId`属性，或者显式作为特定 AvalonDock 面板的属性，或者通过`Name`在面板的直接子级上设置属性来隐式设置。这是使用两种方式的修改后的主窗口 XAML 代码。

```
<StackPanel Orientation="Vertical">
    <Button Content="Save"
    Click="SaveButton_Click"/>
    <Button Content="Load"
    Click="LoadButton_Click"/>
    <ad:DockingManager x:Name="myDM">
        <ad:LayoutRoot>
            <ad:LayoutPanel>
                <ad:LayoutDocumentPane>
                    <ad:LayoutDocument Title="Document" ContentId="IHaveContent">
                        <TextBox />
                    </ad:LayoutDocument>
                </ad:LayoutDocumentPane>
            </ad:LayoutPanel>
            <ad:LayoutRoot.LeftSide>
                <ad:LayoutAnchorSide>
                    <ad:LayoutAnchorGroup>
                        <ad:LayoutAnchorable Title="Left">
                            <TextBox x:Name="IAmTextBoxContent"/>
                        </ad:LayoutAnchorable>
                    </ad:LayoutAnchorGroup>
                </ad:LayoutAnchorSide>
            </ad:LayoutRoot.LeftSide>
        </ad:LayoutRoot>
    </ad:DockingManager>
</StackPanel> 
```

如果您现在使用保存和加载按钮，您将看到`ContentId`现在在测试文件中设置了属性，如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<LayoutRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <RootPanel Orientation="Horizontal">
    <LayoutDocumentPane>
      <LayoutDocument Title="Document" 
          IsSelected="True" 
          IsLastFocusedDocument="True" 
          ContentId="IHaveContent" 
          LastActivationTimeStamp="04/17/2013 09:13:35" />
    </LayoutDocumentPane>
  </RootPanel>
  <TopSide />
  <RightSide />
  <LeftSide>
    <LayoutAnchorGroup>
      <LayoutAnchorable AutoHideMinWidth="100" 
          AutoHideMinHeight="100" 
          Title="Left" 
          ContentId="IAmTextBoxContent" />
    </LayoutAnchorGroup>
  </LeftSide>
  <BottomSide />
  <FloatingWindows />
  <Hidden />
</LayoutRoot> 
```

为了将来如何调试此问题的参考，我确实使用下面的回调来调试和检查反序列化过程返回的值，其中`e`参数包含属性中 AvalonDock 面板的反序列化版本`Model`，（在您的case 最初为 null），如果`ContentId`属性正确，将在其属性中包含您面板的内容（由于 的属性中`Content`的 null 值，这也是 null ）。`ContentId``Model`

`s`回调处理程序中的 包含引用`XmlLayoutSerializer`，它还包含对 的引用`DockingManager`，通过它您可以检查其中包含的当前项。

### 老的：

我记得早期版本的 AvalonDock 也有类似的问题，但我认为为我解决的问题是升级到最新版本（您已经拥有），因为有一个内部部分没有正确反序列化。

`LayoutSerializer`但是，要尝试查找反序列化过程的问题，您可以尝试在回调中放置断点。希望这将为您提供有关特定问题的更多信息。

```
layoutSerializer.LayoutSerializationCallback += (s, e) =>
{
    object o = e.Content;
}; 
```

# javascript - 伊斯达特javascript代码

> ID：15970890
> 
> 赞同：0
> 
> 时间：2013-04-12T12:01:11.487
> 
> 标签：javascript, vb.net, firefox, date

当用户在文本框中键入日期为 05/04 并按 Enter 键时，我正在使用以下代码检查它是否是日期。代码是

```
 window.execScript("dim successReturn:successReturn=Isdate('" + ctl.value + "')","VBScript"); 
```

这适用于 IE，如果我输入 05/04 ，它会返回 true。但是该代码在其他浏览器中不起作用。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:20:22.693

你可以试试下面的代码。

```
var comp = "05/04".split('/');
var d = parseInt(comp[0], 10);
var m = parseInt(comp[1], 10);
var date = new Date(null, m - 1, d);
var validDateFormat = false;
if (date.getMonth() + 1 == m && date.getDate() == d) {
    validDateFormat = true;
} 
```

如果日期正确，validDateFormat 将为真。请注意，上述代码中考虑了 dd/mm 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:25:20.440

[`window.execScript`](http://help.dottoro.com/ljoswolk.php)是一种仅限 IE 的方法。Firefox、Safari 或 Opera 不支持它。Dottoro.com 声称 Chrome 支持，但它不再是真的（如果它曾经是的话）。[另一个资源](http://javascript.gakaa.com/window-execscript-4-0-5-.aspx)声称不支持除 IE4+ 之外的任何主要浏览器。MDN 声称不支持除 IE 之外的任何支持。

据我所知，除了 Internet Explorer 之外，*没有*任何其他浏览器可以执行 VBscript。当然，禁止执行解释的 javascript 库 - 但我也不知道这样的库。您必须将您的 VBscript 翻译或编译为 javascript。

关于您的代码，请参阅[阿里](https://stackoverflow.com/a/15971256/499214)手动解析日期的解决方案。

# asp.net - DELETE 语句与 REFERENCE 冲突

> ID：15970893
> 
> 赞同：4
> 
> 时间：2013-04-12T12:01:18.557
> 
> 标签：asp.net, sql, sql-server, sql-delete

我有一个带有 CustomerID 的 table_Project（链接到 tbl_Customer）。在 tbl_Customer 我有 Customer_ID（作为密钥）和一些其他信息，如电话、电子邮件等。

要从 Gridview 中删除它，我使用此 DeleteCommand：

```
DeleteCommand="DELETE FROM [tbl_Customer] WHERE [Customer_ID] = @Customer_ID" 
```

但它给了我以下错误：

`The DELETE statement conflicted with the REFERENCE constraint "Klant_Relatie". The conflict occurred in database "Database_1", table "dbo.tbl_Project", column 'CustomerID'. The statement has been terminated.`

但是通过更新 CustomerInfo 我没有收到任何错误。我见过不同的 C# 解决方案，但我使用 .net

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T12:06:17.940

如果项目引用了客户，则不能删除他。这就是错误的含义。

我不明白你的

> 我见过不同的 C# 解决方案，但我使用 .net

但是您在这里有不同的解决方案：

1.  更改链接到旧项目的所有项目引用的客户端（您要删除的项目）
2.  丢弃约束（不是很好的选择）
3.  在删除客户端之前删除项目（手动或使用级联删除）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T12:10:29.583

您的问题与参照完整性有关。您不能删除当前被某个表（*例如**表*）中的某些记录引用的记录（*从表`tbl_Customer`*中）。在您的情况下，除非您正在更新密钥，否则与. 在删除记录时修改记录。*`table_Project`*`UPDATE``DELETE``CustomerID``UPDATE``DELETE`

看看这个例子，

**tbl_Customer 表**

```
CustomerID  CustomerName
1           Hello
2           World 
```

**table_Project 表**

```
CustomerID  ProjectName
1           Webscripting
1           Database Maintenance 
```

`2`您可以随时在表记录上做任何您想做的事情，`tbl_customer`因为没有引用它的记录。但是在记录`1`中，除非删除表中的两条记录，否则您无法删除它`table_Project`。您可以修改列`CustomerName`，但`CustomerID`如果仍然被引用，则不能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:53:30.583

您可以做的另一件事是在 SQL Server 中更改外键链接，以便在删除时级联。这将导致记录向下删除。因此，如果您删除表 a 中的记录，则表 b 中引用该记录的任何记录也将被删除。

# android - Android：在为发布和调试签名的 apk 文件之间没有发现差异

> ID：15970904
> 
> 赞同：1
> 
> 时间：2013-04-12T12:01:42.127
> 
> 标签：android, release, apk

我刚刚为发布我的第一个 Android 应用程序而构建。我使用 keytool.exe 使用密钥对其进行了签名。

然后，我做了以下。我将两个文件都上传到了一个网站，apk 签名用于发布，apk 签名用于调试。

然后，使用我的 Android 设备进入网站并单击两个文件链接。他们都表现得一样。以相同方式下载的文件。一旦它们位于“下载”文件夹中，我就可以通过单击它们来安装它们。

我预计会有一些差异。例如，直接从网站点击时，设备会自动安装发布版本。

发布和调试 apk 文件之间应该有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:42:37.033

*   所有申请都必须签名。如果未签名，系统将不会在模拟器或设备上安装应用程序。
*   为了测试和调试您的应用程序，构建工具使用由 Android SDK 构建工具创建的特殊调试密钥对您的应用程序进行签名。
*   当您准备好为最终用户发布您的应用程序时，您必须使用合适的私钥对其进行签名。您不能发布使用 SDK 工具生成的调试密钥签名的应用程序。
*   您可以使用自签名证书对您的应用程序进行签名。不需要证书颁发机构。

[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T15:27:36.483

正如 Ali 所提到的，应用程序必须签名并构建为 Google Play 商店和设备的发布版本才能允许安装。

在 android 设备上，您可以允许未签名的包，但除非您自己测试，否则不建议这样做。

调试和发布之间的主要区别在于编译方法及其签名方式。这不会影响 android 设备访问 APK 的方式。

如果在 Play 商店中，APK 会被推送到您的手机并安装。从网站链接或下载 APK 文件到设备上只会下载文件，用户仍需要打开/运行/安装应用程序。

# wpf - WPF 绑定到 Grid.ColumnSpan

> ID：15970914
> 
> 赞同：5
> 
> 时间：2013-04-12T12:02:09.297
> 
> 标签：wpf, grid, wcf-binding

我在 WPF 网格视图中有两个文本框。如果没有要显示的文本，则使用视图模型上的方法 (GetNoteTwoVisibility) 隐藏第二个 - 没有问题。在这种情况下，虽然我想更改第一个文本框的列跨度以使用两列。我尝试添加一个“GetNoteOneColumnSpan”方法（返回一个 int），但这不起作用。

```
<TextBox Name="Note1" Grid.Column="0" Text="{Binding NotesView.NoteOne}" Grid.ColumnSpan="{Binding NotesView.GetNoteColumnSpan}" />
<TextBox Name="Note2" Grid.Column="1" Text="{Binding NotesView.NoteTwo}" Visibility="{Binding NotesView.GetNoteTwoVisibility}" /> 
```

有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:13:09.443

您不需要另一个绑定属性`Grid.ColumnSpan`。您可以尝试以下方法：

```
<TextBox Name="Note1"
          Grid.Column="0"
          Text="{Binding NotesView.NoteOne}">
  <TextBox.Style>
    <Style TargetType="{x:Type TextBox}">
      <Setter Property="Grid.ColumnSpan"
              Value="1" />
      <Style.Triggers>
        <DataTrigger Binding="{Binding NotesView.GetNoteTwoVisibility}"
                      Value="False">
          <Setter Property="Grid.ColumnSpan"
                  Value="2" />
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </TextBox.Style>
</TextBox>
<TextBox Name="Note2"
          Grid.Column="1"
          Text="{Binding NotesView.NoteTwo}"
          Visibility="{Binding NotesView.GetNoteTwoVisibility}" /> 
```

# .net - 正则表达式问题。查找需要的字符串

> ID：15970916
> 
> 赞同：0
> 
> 时间：2013-04-12T12:02:14.953
> 
> 标签：.net, regex

输入字符串是

```
@"SomeCall(Resource.T(""String )))1""), ""String 2"", ""String 3"");" 
```

我只想得到`"String 2"`and `"String 3"`, *but **not** `"String )))1"`。

我使用这个表达式：

```
 (?<!Resource\.T)("(?:\.|[^\"])*") 
```

我做错了什么？

**UPD。**改变了

```
(?<!Resource\.T) 
```

至

```
(?<!Resource\.T\() 
```

，但结果是

```
"), ", ", " 
```

目前 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:17:40.137

您的后视不太正确，这就是为什么它不起作用。将其更改为：

```
 (?<!Resource\.T\() 
```

就在 之前`"`，如果没有`Resource.T(`之前，您必须查看，而不仅仅是`Resource.T`。

**编辑：**
好的，所以要解决这个问题，我们将尝试查看`"`匹配后是否有一对：

```
(?<!Resource\.T\()("(?:\.|[^\"])*")(?=(?:[^"]|"[^"]*")*$) 
```

所以，我们检查直到字符串的结尾是否有另一个`"`，如果有，确保有第二个。
我认为这是最通用的方式（尽管可能不是最好的以性能为导向的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:07:35.210

```
(?<!Resource\.T)("(?:\.|[^\")])*") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:37:05.670

再次考虑这一点，我认为真正的问题是必须消耗“坏” Resource.T 字符串，因此您不应该使用零宽度断言。这就是抛出开头和结尾引号的原因。如果您将任何 Resource.T 匹配项包含在非捕获组中，那么您应该只取回其他匹配项：

```
(?:Resource\.T\("[^"]*"\))|("[^"]*") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:23:43.683

正如 Loamhoof 所说，您需要在否定的后面添加“（”。但是，正如您所看到的，第一个匹配项是字符串 1 的结束引号与字符串 2 的开始引号匹配。如果您知道字符串赢了'没有逗号，你可以通过排除逗号来匹配：

```
(?<!Resource\.T\()("[^,"]*") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T12:38:07.650

输入格式有多严格？
这个可以吗？

`@"SomeCall\(Resource.T\(""[^"]*""\), ""([^"]*)"", ""([^"]*)""\);"`

如果您的输入字符串总是像您的示例一样格式化，则无需费心复杂的环视正则表达式。
如果不是，当然，这是行不通的。

# excel - 如何为特定的 excel 文件运行外部 vbs 文件

> ID：15970921
> 
> 赞同：0
> 
> 时间：2013-04-12T12:02:25.087
> 
> 标签：excel, vbscript

我写了一个vbs代码

```
Sub rectangle()
    With ActiveSheet.Shapes.AddShape(msoShapeRectangle, 10, 10, 200, 100).TextFrame
        .Characters.Text = "This is a rectangle"
        .HorizontalAlignment = xlHAlignCenter
        .VerticalAlignment = xlVAlignCenter
        ChDir "D:"
        ActiveWorkbook.SaveAs Filename:="D:\Book.xls", _
        FileFormat:=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
        ActiveWorkbook.Save
    End With
    ActiveWorkbook.Save
    Range("F5").Select
End Sub 
```

但我收到错误

```
script: D:\test.vbs
Line: 10
Char: 36
Error: Expected statement
Code: 800A0400
Source: Microsoft VBscript Compilation error 
```

我已经将excel文件和vb文件粘贴到了*D*盘。谁能纠正我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:24:49.830

这就是我在`.vbs`文件中的做法。

```
Const xlHAlignCenter = -4108
Const xlVAlignCenter = -4108
Const xlOpenXMLWorkbookMacroEnabled = 52
Const msoShapeRectangle = 1

Dim oXLApp, oXLWB, oXLWs

Set oXLApp = CreateObject("Excel.Application")

'<~~ I am adding a new workbook for demonstration purpose. 
'<~~ You can open one if you want
Set oXLWB = oXLApp.Workbooks.Add 
Set oXLWs = oXLWB.Sheets("Sheet1")

oXLApp.Visible = True

With oXLWs
    With .Shapes.AddShape(msoShapeRectangle, 10, 10, 200, 100).TextFrame

        .Characters.Text = "This is a rectangle"
        .HorizontalAlignment = xlHAlignCenter
        .VerticalAlignment = xlVAlignCenter

    End With
End With

oXLWB.SaveAs "D:\Book.xls", xlOpenXMLWorkbookMacroEnabled, , , , False 
```

# powershell - Powershell如何使用仅知道文件名的一部分的测试路径

> ID：15970925
> 
> 赞同：7
> 
> 时间：2013-04-12T12:02:33.150
> 
> 标签：powershell, powershell-2.0

我可以使用经典的 Test-Path 来检查特定文件夹中是否存在名称中包含特定单词的文件？

例如，我想检查是否存在以“LAB”开头的文件。在那个词之后有我无法计算的日期戳。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T12:16:25.087

为什么不：

```
test-path c:\myfolder\lab* -pathtype leaf #leaf is for file (get-help test-path -full) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T12:06:00.950

```
$files = Get-ChildItem 'LAB*'
if ($files) {
   Write-Host "Found one."
}
else {
   Write-Host "Not there."
} 
```

`Get-ChildItem`这依赖于返回匹配文件列表的事实。然后可以评估该列表的“真实性”。

# php - 我们可以将会话变量传递给类吗

> ID：15970928
> 
> 赞同：0
> 
> 时间：2013-04-12T12:02:40.160
> 
> 标签：php, mysql, oop, session

我正在尝试将会话变量传递给下面的类。但是，它似乎没有工作，并引发以下错误：

> 解析错误：语法错误，第 6 行 C:\wamp\www\pard_config\configuration.php 中的意外 T_VARIABLE

我该如何解决这个问题？

我的代码：

```
<?php
    session_start();
    class pardEngine{
        public $hostname = $_SESSION['HOSTNAME'];
        public $database = $_SESSION['DATABASE'];
        public $database_user = $_SESSION['USER'];
        public $database_user_pass = $_SESSION['PASSWORD'];
    }
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T12:10:02.207

从[属性](http://www.php.net/manual/en/language.oop5.properties.php)手册页：

> 类成员变量称为“属性”。您可能还会看到使用“属性”或“字段”等其他术语来提及它们，但出于本参考的目的，我们将使用“属性”。它们是通过使用关键字 public、protected 或 private 之一定义的，后跟一个普通的变量声明。**这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。**

会话数据不适合*编译时*类别，因此您的属性只能从常规代码设置，无论是在类之外（因为它们是公共的）还是从方法（可能是构造函数）。

将这些值硬编码到类代码中通常是不切实际的，所以我会选择构造函数方法：

```
<?php

class pardEngine{
    private $hostname;
    private $database;
    private $database_user;
    private $database_user_pass;

    public function __construct($hostname, $database, $database_user, $database_user_pass){
        $this->hostname = $hostname;
        $this->database = $database;
        $this->database_user = $database_user;
        $this->database_user_pass = $database_user_pass;
    }
}

session_start();
$engine = new pardEngine($_SESSION['HOSTNAME'], $_SESSION['DATABASE'], $_SESSION['USER'], $_SESSION['PASSWORD']); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T12:05:28.187

在此类中分配这些属性，`constructor`而不是像这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T12:08:21.340

您不能在类声明部分分配这些值。

使用构造函数。

```
session_start();
class pardEngine{
        function __construct() {
             $hostname = $_SESSION['HOSTNAME'];
             $database = $_SESSION['DATABASE'];
             $database_user = $_SESSION['USER'];
             $database_user_pass = $_SESSION['PASSWORD'];

        }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T12:11:40.470

创建一个能够从数组创建对象的函数：

```
class pardEngine
{
    public $hostname;
    public $database;
    public $database_user;
    public $database_user_pass;

    /**
     * @param array $array
     * @return partEngine
     */
    public static function createFromArray($array) {
        $obj                     = new static;
        $obj->hostname           = $array['HOSTNAME'];
        $obj->database           = $array['DATABASE'];
        $obj->database_user      = $array['USER'];
        $obj->database_user_pass = $array['PASSWORD'];

        return $obj;
    }
} 
```

用法：

```
session_start();
$engine = pardEngine::createFromArray($_SESSION); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T12:07:51.927

```
session_start();
class pardEngine{
  public function __construct(){
    $hostname = $_SESSION['HOSTNAME'];
    $database = $_SESSION['DATABASE'];
    $database_user = $_SESSION['USER'];
    $database_user_pass = $_SESSION['PASSWORD'];
   }
  } 
```

# javascript - 如何获取元素的类属性？

> ID：15970931
> 
> 赞同：1
> 
> 时间：2013-04-12T12:02:42.057
> 
> 标签：javascript, jquery

我想获取元素的类属性的值。

```
<a href="http://stackoverflow.com/" id="myId" class="myClassName">Click Me</a> 
```

`this.id`，`this.href`并且`this.text`正在工作。

我的问题是为什么`this.class`不工作？

**笔记：**

我不想使用：

`console.log($this.attr('class'));`或者`console.log($("a").prop("class"));`

因为它非常慢。

```
$(function(){
   $("a").on("click",function(){
       console.log(this.id);              // myId
       console.log(this.href);            // http://stackoverflow.com/
       console.log(this.text);            // Click Me
       console.log($("a").prop("class")); // myClassName
   });    
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:03:47.337

因为它应该是`this.className`。

**参考：** [https ://developer.mozilla.org/en-US/docs/DOM/element.className](https://developer.mozilla.org/en-US/docs/DOM/element.className)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:03:52.057

使用`this.className`它是本机 javascript 元素属性。

```
$(function(){
   $("a").on("click",function(){
       console.log(this.id);              // myId
       console.log(this.href);            // http://stackoverflow.com/
       console.log(this.text);            // Click Me
       console.log(this.className); // myClassName
   });    
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:03:25.457

`class`属性映射到 DOM 中的属性`className`（不是不存在的`class`属性）。

# facebook - 跟踪 facebook 安装广告

> ID：15970933
> 
> 赞同：2
> 
> 时间：2013-04-12T12:02:48.793
> 
> 标签：facebook, mobile, tracking, ads

我想将 Facebook SDK 安装到我的 iOS 应用程序中，以跟踪来自推动安装的 Facebook 移动广告单元的安装。

然而到目前为止我读到的所有信息是，为了跟踪安装，用户也必须在游戏中登录 Facebook。

1.  这是真的吗（请不要！！）？
2.  如果是真的，有没有一种方法可以在用户不知道（合法）的情况下在后台完成？
3.  如果不是这样，如何在没有“第二次”游戏内登录的情况下设置要跟踪的广告？

这是一个教育应用程序，出于安全/隐私原因，学校/家长不太可能希望在游戏中登录 Facebook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:56:20.013

您唯一需要登录的是 facebook 应用程序，这样他们就可以首先看到广告。

该广告将显示在您的新闻源上，如果他们点击安装并跟进，您应该在首次启动您的 ios 应用程序时进行转换。

要部署的代码在您的应用程序委托中，它`[FBSettings publishInstall:@"12345678901234"]`会`application:didFinishLaunchingWithOptions:`在启动时触发。因此，除非您在该方法触发之前要求在您的应用程序中登录（例如 in `main.m`），否则您应该没问题。

显然这个线程相当老，所以希望你已经解决了这个问题。

# c# - ASP.NET WinForms C# - 如何使用在 JQGrid 中编辑的值更新标签

> ID：15970934
> 
> 赞同：1
> 
> 时间：2013-04-12T12:02:48.817
> 
> 标签：c#, asp.net, jqgrid

我有一个 JQGrid 绑定到 SqlDataSource1 和标签绑定到 SqlDataSource2 的页面。两个 SqlDataSource 都从同一个表中选择，第一个选择所有记录，第二个只返回一条记录，即 JQGrid 中的 SelectedRow。标签的 Text 属性绑定到该记录中一个字段的值。一切正常，但是当我单击 JQGrid 中的编辑按钮并在打开的对话框中编辑选定的记录时，在对话框关闭后，我也想更新标签中的编辑值。但是 JQGrid 事件 RowEdited 不会导致回发。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:11:24.730

我没有将 RowEdited 事件视为编辑行文档的一部分，但您可以调用其他事件来更新标签。

让我大吃一惊的是 aftersavefunction 调用，您可以在其中设置值，而无需调用服务器来更新您的标签。

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)

如果你想使用表单编辑，那么你可以绑定`afterComplete`调用函数来更新你的标签。`afterComplete`这特别好，因为在对标签进行更改之前，您可以肯定地确认您的编辑已保存为函数的一部分。

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:45:01.350

在@Mark 的帮助下，我解决了这个问题，这是我用来处理 JQGrid 的 LoadComplete 客户端事件的 javacript (jquery) 函数的示例：

```
<script type="text/javascript">
    function LoadComplete(data) {
        if (data == null) return;
        var selectedRowId = '<%=(Session["SelectedRow"] == null)?string.Empty:Session["SelectedRow"].ToString()%>';
        if (selectedRowId == '') return;
        var rows = $.map(data.rows, function (value) {
            return (value.id == selectedRowId) ? value : null;
        });
        var selectedRow = rows[0];
        var id = selectedRow.cell[0];
        var name = selectedRow.cell[1];
        var surname = selectedRow.cell[2];
        $('#<%= this.lblName.ClientID %>').html(name);
        $('#<%= this.lblSurname.ClientID %>').html(surname);
    }
</script> 
```

# ajax - Ajax控制工具包添加到项目时报错

> ID：15970935
> 
> 赞同：1
> 
> 时间：2013-04-12T12:02:50.560
> 
> 标签：ajax, ajaxcontroltoolkit

**找不到适合指定区域性或中性区域性的任何资源。确保“AjaxControlToolkit.Properties.Resources.resources”在编译时被正确嵌入或链接到程序集“AjaxControlToolkit”中，或者所有需要的附属程序集都是可加载的并且完全签名。**

这是我在项目中添加 Ajax Control Toolkit 并在其中一个页面中添加控件并尝试运行应用程序时遇到的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-05T13:41:27.800

这可能是由

1.  您错过了将此行添加到您的页面。

    ```
    <%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
    ```

2.  未定义脚本管理器。添加到在服务器上运行的 asp 表单

    ```
    <asp:ToolkitScriptManager runat="server"></asp:ToolkitScriptManager> 
    ```

3.  如果您使用母版页，则将脚本管理器添加到母版并添加

    ```
    <asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server"></asp:ScriptManagerProxy>` 
    ```

    到子页面和用户控件。

4.  确保为您使用`AjaxControlToolkit`的控件使用正确的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:06:24.973

如果您使用的是 ASP.NET，请确保您有以下行：

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

并且总是`<asp:ToolkitScriptManager runat="server"></asp:ToolkitScriptManager>`在使用扩展器之前添加一个

# asp.net-mvc - MVC 需要在登录前打开一个对话框，以获取带有浏览器列表的受支持浏览器警告消息

> ID：15970936
> 
> 赞同：0
> 
> 时间：2013-04-12T12:02:54.107
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我想在登录前打开一个对话框，其中包含支持的浏览器列表和继续按钮。以前，我使用包含支持的浏览器列表和显示在主登录视图内的部分视图的 xml 文件来完成它。

但是某些应用程序会覆盖登录视图。所以我决定使用**ActionFilterattribute**来使用我自己的 CustomFilterAttribute。

我遇到的问题是我想重定向到具有继续按钮并包含所有支持的浏览器以将其显示给用户的部分视图页面。单击继续按钮后，它应该重定向到最初调用的主视图。代码应如下所示

```
public class BrowserSupportAttribute : ActionFilterAttribute
{
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    SupportedBrowsers supBrowser = new SupportedBrowsers(Request.Browser);
    string strSupportedMessage = null;
    if (supBrowser.SupportStatus != SupportStatus.Supported)
    {
        strSupportedMessage = supBrowser.GetMessage();
        //Code here should contain to redirect to specific partial view which contains
          supported browsers list and after redirecting to partial view I want redirect   to the view which was originally called.
    }
}
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:14:21.000

您可以将 RedirectToRouteResult 对象设置为 filterContext 的 Result 属性，如下所示：

```
 public class BrowserSupportAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            SupportedBrowsers supBrowser = new SupportedBrowsers(Request.Browser);
            string strSupportedMessage = null;
            if (supBrowser.SupportStatus != SupportStatus.Supported)
            {
                strSupportedMessage = supBrowser.GetMessage();
                filterContext.ActionParameters.Add("message", strSupportedMessage);
                filterContext.ActionParameters.Add("returnUrl", filterContext.HttpContext.Request.Url);
                filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary { { "action", "YOUR_ACTION" }, { "controller", "YOUR_CONTROLLER" } });
            }
        }
    } 
```

以及支持的浏览器视图的操作。

```
 /// <summary>
    /// Shows the supported browser list.
    /// </summary>
    /// <param name="message">Message for supported browsers.</param>
    /// <param name="returnUrl">The url of the login page.</param>
    public ActionResult YOUR_ACTION(string message, string returnUrl)
    {
        // This is the action to show the view with the supported browsers
        // You can process the ViewBag variables in the view
        ViewBag.Message = message;
        ViewBag.ReturnUrl = returnUrl;

        return View();
    } 
```

# jquery - CSS 溢出-x 隐藏和溢出-y 可见

> ID：15970937
> 
> 赞同：25
> 
> 时间：2013-04-12T12:02:56.683
> 
> 标签：jquery, css, overflow

我已阅读此 SO 帖子：[css 溢出-x 可见和溢出-y 隐藏导致滚动条。](https://stackoverflow.com/questions/6421966/css-overflow-x-visible-and-overflow-y-hidden-causes-scroll-bar)

我也经历过：[http ://www.brunildo.org/test/Overflowxy2.html](http://www.brunildo.org/test/Overflowxy2.html)

我想实现以下目标：

![溢出](https://i.stack.imgur.com/iEci5.png)

当我尝试使用以下代码时：

```
overflow-x: hidden;
overflow-y: visible; 
```

它显示类似于以下结果：
![溢出 2](https://i.stack.imgur.com/C6mer.png)
我不希望出现滚动条。

Jquery 有什么解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:27:19.810

你可以用这样的 CSS 来做到这一点：

**HTML：**

```
<div class="wrapper">
    <div class="inner">
    </div>
</div> 
```

**CSS：**

```
.wrapper{
    width: 400px;
    height: 300px;
}
.inner{
    max-width: 100%;
    overflow-x: hidden;
} 
```

现在你的`.wrapper`div 将有`overflow: visible;`，但你的`.inner`div 永远不会溢出，因为它的最大宽度为包装器 div 的 100%。请注意，您的包装器必须具有明确定义的宽度。

[这](http://jsfiddle.net/7y2cb/)是一个工作的jsFiddle

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:20:50.947

看看你想要实现的目标在 css 中是不可能的，并且`overflow`不会让你实现这一目标。相反，您可以使用 jquery 来获取您在发布的图片/图像中描述的输出。

我不确定你是否需要这样的东西：

```
$('.horiz').width($('.container').width()); 
```

其中`.horiz`是水平条并将其宽度设置为`.container`包含元素的宽度。

### HTML 标记

```
<div class='container'>
    <div class='horiz'></div>
    <div class='vert'></div>
</div> 
```

### CSS：

```
 .container {
    width:320px;
    height:320px;
    border:solid 5px green;
 }
 .horiz{
    width:500px;
    height:30px;
    background:red;
 }
 .vert{
    width:30px;
    height:500px;
    background:yellow;
    position:absolute;
    left:0;
    top:30px;
 } 
```

### jQuery：

```
$(function(){
   $('.horiz').width($('.container').width());
}); 
```

及其输出：

### [检查输出](http://jsfiddle.net/Dbe6W/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-04T15:01:28.743

**CSS：**

```
.class-div {
   overflow-x: clip;
   overflow-y: visible;
} 
```

剪辑的问题是，它限制了所有滚动，甚至是编程滚动。

参考：[https ://developer.mozilla.org/en-US/docs/Web/CSS/overflow](https://developer.mozilla.org/en-US/docs/Web/CSS/overflow)

# jenkins - 通过安装在詹金斯上的 Sonar Runner 进行单元测试覆盖率报告

> ID：15970945
> 
> 赞同：1
> 
> 时间：2013-04-12T12:03:26.793
> 
> 标签：jenkins, sonarqube, jacoco

我正在使用 Jenkins 构建我的 maven 项目并调用生成声纳报告的独立声纳分析。但我无法生成单元测试覆盖率报告
注意：我的 Jenkins 实例上安装了 Sonar Runner。

请帮忙。我的声纳属性是：

```
sonar.projectKey=XXX  
sonar.projectName=YYY  
sonar.sources={Path to Source Code}  
sonar.binaries={Path to Binaries}  
sonar.forceAnalysis=true  
sonar.login={username}  
sonar.password=${Masked_Password} 
```

我在 SONAR 上安装了 jacoco 插件。当我运行声纳分析时，它说

```
05:47:06.942 INFO  p.PhasesTimeProfiler - Sensor JaCoCoSensor...    
05:47:06.947 INFO  o.s.p.j.JaCoCoPlugin - Project coverage is set to 0% as no JaCoCo execution data has been dumped: /workspace/XXX/target/jacoco.exec 
05:47:07.897 INFO  p.PhasesTimeProfiler - Sensor JaCoCoSensor done: 955 ms 
```

我在 sonar runner 不运行单元测试或显示单元测试覆盖率报告的地方读过。这是真的吗？如果是，是否有任何解决方法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:47:25.193

如果您使用 Maven 构建项目，为什么您尝试使用 Sonar Runner 运行 Sonar 分析，而您可以使用 Maven 将其作为 PostBuild 操作？这几乎不需要配置。

请参阅[http://docs.codehaus.org/display/SONAR/Triggering+Sonar+on+Jenkins+Job#TriggeringSonaronJenkinsJob-TriggeringaSonarAnalysiswithMaven](http://docs.codehaus.org/display/SONAR/Triggering+Sonar+on+Jenkins+Job#TriggeringSonaronJenkinsJob-TriggeringaSonarAnalysiswithMaven)

# javascript - 如何开发网站在多种语言之间切换？

> ID：15970948
> 
> 赞同：2
> 
> 时间：2013-04-12T12:03:45.490
> 
> 标签：javascript, html, internationalization, multilingual

我用html5开发了网站。在这我有一个语言选择选项，现在它是英语。如果我选择任何其他语言，那么它应该以该语言显示内容。我不想使用谷歌翻译器来翻译内容。我有所有语言的内容。html5 或 HTML 中是否有任何标签或方法来获取和显示特定于该语言的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:14:37.340

您可以使用 Javascript 本地化（这是您的标签之一，所以我猜您会使用它）。

您可以做的是快速检查用户的语言环境，从而用匹配的内容本地化填充页面。

这是一个快速而肮脏的例子。（注意：这纯粹是动态的）

```
locale = (navigator["language"] || "en").split("-")[0];

localization = {
    "de": "Hallo Benutzer!",
    "en": "Hey user!"
};

text = localization[locale] || localization["en"];

e = document.createElement("span");
e.innerHTML = text;
document.body.appendChild(e); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T12:12:20.037

如果您的网站是静态网站，那么您可以使用特定语言的内容为每种语言克隆您的网站，并使用不同的基本 URL（域/en/...、domain/es/...）访问每个版本。 ）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T12:12:44.233

您需要将您的页面翻译成您想要的任何语言。

复制每种语言的整个网络结构，这样你最终得到

www.example.com/en/.. www.example.com/fr/..

ETC

通常人们会使用一个标志来指示语言并重定向到相应的语言页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T12:05:33.513

不。

HTML 允许您使用属性指定您正在使用的语言`lang`，但它不提供（手动或自动）翻译的特定功能。

# ios - UITableViewCell 重用

> ID：15970951
> 
> 赞同：-1
> 
> 时间：2013-04-12T12:03:49.700
> 
> 标签：ios, cocoa-touch, uitableview

我有一个 UITableView 正在重用单元格。我表中的某些单元格与其他单元格的高度略有不同。重用单元格时，表格视图似乎将单元格添加到以前的高度，然后将其动画到新高度。我不希望它这样做！

我尝试将 CATransactions 放在我的 layoutSubviews 和 prepareForReuse 周围，它们都做了一些布局和禁用操作，但这并没有解决问题。

单元格几乎相同，只是顶部和底部的填充量不同，具体取决于它们是否位于顶部/底部/中间某处。

我在这里缺少一些漂亮的技巧吗？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:08:25.020

这不是一个真正的技巧，但[`tableView:heightForRowAtIndexPath:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForRowAtIndexPath%3a)会让表格视图知道单元格应该是什么高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:12:23.013

用于`heightForRowAtIndexPath`返回每一行的高度。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    return 49;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:58:30.513

原来这与动画插入行有关，而不是与单元格的重用有关。似乎使用 UITableViewRowAnimationNone 仍然会为单元格的插入设置动画。通过在禁用操作的情况下包装在 CATransaction 中插入单元格的调用，问题得到了解决。:)

很抱歉混淆了！

# java - addCookie 方法不会将 cookie 添加到 httpServletResponse

> ID：15970958
> 
> 赞同：1
> 
> 时间：2013-04-12T12:04:12.620
> 
> 标签：java, servlets, controller, http-headers, httpcookie

我必须在控制器中设置一个 cookie，但是当我尝试将它添加到 HttpServletResponse 对象时，它似乎不起作用，无论是使用 HttpServletResponse.addCookie(String) 还是使用 CookieGenerator.addCookie(HttpServletResponse, String) [评论]。

```
@Controller("BookSlotComponentController")
@Scope("tenant")
@RequestMapping(value = ControllerConstants.Actions.Cms.BookSlotComponent)
public class BookSlotComponentController extends AbstractCMSComponentController<BookSlotComponentModel> {
private static Logger LOG = Logger.getLogger(BookSlotComponentController.class);
private final String MORNING_SLOT = "MORNING_SLOT";
private final String AFTERNOON_SLOT = "AFTERNOON_SLOT";
private final String EVENING_SLOT = "EVENING_SLOT";
private final String BOOK_SLOT_SELECTED_DATE = "BOOK_SLOT_SELECTED_DATE";

@Resource(name = "bookSlotFacade")
private BookSlotFacade bookSlotFacade;

@Resource
private TimeService timeService;

@Override
protected void fillModel(final HttpServletRequest request, final Model model, final BookSlotComponentModel component) {
}

@Override
protected void fillModel(final HttpServletRequest request, final HttpServletResponse response, final Model model, final BookSlotComponentModel component) {
    LOG.debug("Start: fillModel");
    Date refDate = null;
    String refDateStr = null;

    if (null != request.getSession().getAttribute(BOOK_SLOT_SELECTED_DATE)) {
        final SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
        refDateStr = (String) request.getSession().getAttribute(BOOK_SLOT_SELECTED_DATE);
        try {
            refDate = timeService.getCurrentTime();
            refDate = sdf.parse(refDateStr);
        } catch (final ParseException pe) {
            LOG.error("Exception while parsing date " + refDate, pe);
        }

        final BookSlotForm bookSlotForm = populateBookSlotForm(request, response, refDate);

        LOG.debug("bookSlotForm getMorningSlots = " + bookSlotForm.getMorningSlots().size());
        LOG.debug("bookSlotForm getAfternoonSlots = " + bookSlotForm.getAfternoonSlots().size());
        LOG.debug("bookSlotForm getEveningSlots = " + bookSlotForm.getEveningSlots().size());

        int biggestListSize = 0;

        if (bookSlotForm.getMorningSlots().size() >= bookSlotForm.getAfternoonSlots().size()) {
            biggestListSize = bookSlotForm.getMorningSlots().size();
        } else {
            biggestListSize = bookSlotForm.getAfternoonSlots().size();
        }
        if (biggestListSize < bookSlotForm.getEveningSlots().size()) {
            biggestListSize = bookSlotForm.getEveningSlots().size();
        }
        model.addAttribute(bookSlotForm);
        model.addAttribute("dateSelected", new Boolean(Boolean.TRUE));
        request.getSession().removeAttribute(BOOK_SLOT_SELECTED_DATE);
        LOG.debug("End: fillModel");
    }
}

private BookSlotForm populateBookSlotForm(final HttpServletRequest request, final HttpServletResponse response, final Date refDate) {
    LOG.debug("Start: populateBookSlotForm");
    final BookSlotForm bookSlotForm = new BookSlotForm();

    bookSlotForm.setSelectedDate(refDate);
    bookSlotForm.setSelectedStr(refDate);

    bookSlotForm.setDayOfWeek(BookSlotHelper.getDayNameFromDate(refDate));

    Map<String, List<SlotData>> slotMap = new HashMap<String, List<SlotData>>();

    List<SlotData> morningSlotDataLst = new ArrayList<SlotData>();
    List<SlotData> afternoonSlotDataLst = new ArrayList<SlotData>();
    List<SlotData> eveningSlotDataLst = new ArrayList<SlotData>();

    slotMap = bookSlotFacade.getSlotMapForSlotGroup(refDate);

    if (null != slotMap.get(this.MORNING_SLOT)) {
        morningSlotDataLst = slotMap.get(this.MORNING_SLOT);
    }
    if (null != slotMap.get(this.AFTERNOON_SLOT)) {
        afternoonSlotDataLst = slotMap.get(this.AFTERNOON_SLOT);
    }
    if (null != slotMap.get(this.EVENING_SLOT)) {
        eveningSlotDataLst = slotMap.get(this.EVENING_SLOT);
    }

    bookSlotForm.setMorningSlots(morningSlotDataLst);
    bookSlotForm.setAfternoonSlots(afternoonSlotDataLst);
    bookSlotForm.setEveningSlots(eveningSlotDataLst);

    LOG.debug("Before: bookSlotForm.getSelectedSlotStr() = " + bookSlotForm.getSelectedSlotStr());

    if (null == bookSlotForm.getSelectedSlotStr()) {
        final SlotData selectedSlot = bookSlotFacade.getSelectedSlot();
        if (null != selectedSlot && null != selectedSlot.getSlotCode() && !"".equals(selectedSlot.getSlotCode())) {
            bookSlotForm.setSelectedSlotStr(selectedSlot.getSlotCode());

//              final CookieGenerator cookieGenerator = new CookieGenerator();
//              cookieGenerator.setCookieName("collectionPointCookie");
//              cookieGenerator.setCookieMaxAge(60*60*24*365*1000);
//              cookieGenerator.addCookie(response, selectedSlot.getCollectionPointName());

            final Cookie collectionPointCookie = new Cookie("collectionPointCookie", selectedSlot.getCollectionPointName());
            collectionPointCookie.setMaxAge(60*60*24*365*1000);
            collectionPointCookie.setPath("https://delhaize.be/bookslot");
            response.addCookie(collectionPointCookie);
        }
    }
    LOG.debug("After: bookSlotForm.getSelectedSlotStr() = " + bookSlotForm.getSelectedSlotStr());
    LOG.debug("End: populateBookSlotForm");
    return bookSlotForm;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:06:24.333

不要将整个 url 放入`setPath`调用中 - 只是您希望 cookie 有效的站点内的路径：

```
collectionPointCookie.setPath("/bookslot"); 
```

此外，路径必须包括设置 cookie 的 servlet 的路径 - 请参阅[文档](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/Cookie.html#setPath%28java.lang.String%29)

# css - 将嵌套 div 高度设置为 100%

> ID：15970962
> 
> 赞同：1
> 
> 时间：2013-04-12T12:04:25.757
> 
> 标签：css, html, height

这已经回答了很多次，但我不能让 div 的高度为 100%。

所有其他解决方案都涉及将 html、body 和父 div 设置为`height: 100%`.

我已经尝试过了，但它不起作用。在示例`inner_column`中，特别是 div 我试图达到 100% 的高度。

示例代码：

html:

```
<div id="outer_column">
    <div id="inner_column">
        <div class="section">
            <p>test</p>
        </div>
    </div>
</div> 
```

CSS：

```
html {
    height: 100%;
}

body {
    margin: 0px;
    height: 100%;
}

#outer_column {
    width: 800px;
    margin: auto;
    height: 100%;
}

#inner_column {
    width: 700px;
    margin: auto;
    background: #000000;
    height: 100%;
}

.section{
    padding: 20px;
    background: #cccccc;
    width: 650px;
    margin: auto;
    position: relative;
    top: 20px;
} 
```

**更新：** 我认为这是一个缓存问题，以上工作，谢谢。

**更新二：** 实际上，我现在发现高度只是屏幕的高度，如果我添加更多内容，包含的 div 不跨越正文的高度，我更新了以下 jsfiddle 之一：[http://jsfiddle .net/Cuzr9/2](http://jsfiddle.net/Cuzr9/2) - 有没有办法让它跨越身体的高度，不管有多少内容？谢谢你。

# android-ndk - 如何在android中使用ndk for x-86平台为某些linux包生成共享库

> ID：15970969
> 
> 赞同：1
> 
> 时间：2013-04-12T12:04:44.880
> 
> 标签：android-ndk, shared-libraries, x86-64, android-x86

我有一个外部 linux 源包，我有完整的 android JB 代码库。我将 linux 源包放在外部文件夹中。源包还包含 Android.mk 文件，通过该文件我生成一个共享库，比如说 libabc.so 使用 mmm 模块构建命令。但这一切都是针对 arm 架构的。我想要 x86-64 架构的共享库，以便我的应用程序可以在 x86-64 平台设备上运行。有人可以告诉我如何继续完成我的任务吗？我想要 x86-64 平台的 libabc.so 库。

# java - 在 Java 代码中访问流口水规则详细信息

> ID：15970970
> 
> 赞同：0
> 
> 时间：2013-04-12T12:04:45.493
> 
> 标签：java, drools, rule-engine

我是 Drools 规则引擎的新手。

我创建了一个规则文件，即**.drl**文件。在该文件中，我定义了三个规则，并使用**显着**属性为每个规则分配了优先级。

规则执行后，我想知道已执行规则的详细信息，例如规则名称、显着性值。另外，我想要执行规则的顺序。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:41:10.580

您可以为此使用 AgendaEventListener：

```
import org.drools.event.rule.AfterActivationFiredEvent;
import org.drools.event.rule.DefaultAgendaEventListener;

...
StatelessKnowledgeSession ksession = kbase.newStatelessKnowledgeSession();
ksession.addEventListener(new DefaultAgendaEventListener() {
    @Override
    public void afterActivationFired(AfterActivationFiredEvent event) {
        AgendaItem item  = (AgendaItem) event.getActivation();
        System.out.println("Name: " + item.getRule().getName() + "; Salience: " + item.getRule().getSalience());
    }
}); 
```

该事件将针对每个被触发的规则触发。
小心，这在未来的版本中可能不起作用，因为我假设`Activation`是一个`AgendaItem`对象。我这样做是为了获得显着性（需要访问`Rule`类而不是`Rule`接口）。

作为替代方案，您可以完全控制何时记录什么，您可以注册一个跟踪事实并手动调用跟踪方法，如下所示：

```
import org.drools.rule.Rule;
public class RulesTracking {

    private List<String> tracking = new ArrayList<String>();

    public void track(Rule rule) {
        tracking.add("Name: " + rule.getName() + "; Salience: " + rule.getSalience());
    }

    public List<String> getTracking() {
        return tracking;
    }

} 
```

然后在设置会话的类中，创建跟踪对象并将其注册为“事实”，在所有处理完成后，您可以输出跟踪结果：

```
...
rulesTracking = new RulesTracking(); // register this as a "fact"
// more stuff, fireAllRules
System.out.println(rulesTracking.getTracking());
... 
```

最后，您可以在需要的地方调用跟踪方法，这是一个测试规则：

```
// test rule that fires for every product
rule "TestRule"
salience 100
when
    $product : Product()
    $rulesTracking : RulesTracking()
then
    $rulesTracking.track(drools.getRule()); // here you call your tracking method manually, absolute control
end 
```

# iphone - 是否可以为 2 个不同的地区/国家/地区为同一个应用程序提交 2 个版本

> ID：15970979
> 
> 赞同：7
> 
> 时间：2013-04-12T12:05:16.670
> 
> 标签：iphone, ios, ipad, app-store

我正在构建一个 IOS 应用程序，但后来发现我的应用程序应该根据地区/国家完全不同。基本上我只想支持3个国家，但每个国家都有自己的规则和数据。在我的情况下，在单个应用程序中添加所有逻辑、媒体等是没有意义的。

是否可以像在 Google 的 PlayStore 上做的那样，为每个国家/地区都以相同的名称提交不同的应用程序？

我试图搜索这个问题，但找不到任何有用的资源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T12:22:42.210

您*可以*为不同的国家/地区提交不同的应用程序，但我建议您不要这样做。苹果还说你应该避免这样做。

如果有人安装了你的应用程序，然后搬到了另一个国家，会发生什么？经常旅行的人会怎样？他们能否切换到正确的国家/语言？当您扩展应用程序以支持 20 多种语言时会发生什么？您真的应该考虑拥有一个应用程序来支持所有地区。

如果您有大量数据，您可以让用户选择要下载的数据集/语言。这可能会使您的实施复杂化，但会为用户提供最佳体验。

我们这里有一个项目，有 32 种不同的语言。作为单独的应用程序。您可能不需要这么多，但想想创建不同 Xcode 目标、构建、更新 iTunes Connect 信息、管理不同版本的错误报告等所有乏味的事情。这可能会导致大量开销。

如果您坚持制作单独的应用程序，您可以这样做，没有什么可以阻止这一点。您只需要为您定位的每个区域创建一个应用程序，然后将其单独提交到应用程序商店。您可以使用 iTunes Connect 管理每个应用程序在哪些市场中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:42:49.833

**是**的，当然有可能。我们针对不同的市场有很多相同的应用程序，例如一个针对英国市场，一个针对美国市场，等等……它们的内容不同，仅针对当前国家/地区指定，应用程序的核心、名称、图标和用途是每个国家都一样。

在我们的实践中，我们只同时专注于一个市场，所以从技术上讲，我们会一一发布不同的应用程序，它们之间会有 4-5 天的延迟。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-12T12:15:53.730

您可以在您的应用中使用 if else 来针对 3 个不同的国家/地区表现不同

# ios - 应用再次激活后对象为零

> ID：15970997
> 
> 赞同：0
> 
> 时间：2013-04-12T12:06:09.773
> 
> 标签：ios, core-data

我正在显示**从**我的`managedObjectContext`. 当我退出应用程序并再次打开它时（顺便说一句。正确的术语是什么，我认为*重启*是另一回事），最后一个视图仍然打开并且标签仍然被填充。一切看起来都很好。滚动此视图后，表格单元格被重新加载，现在所有标签都只显示`null`值。

我相信我的**对象**在重新启动后是 {nil}，但我不知道为什么。是否有可能手动缓存对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:13:41.143

我找到了一个解决方案：添加一个属性并将数据放入此属性，然后再将数据提供给 DetailsView。

**前：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyObject* myObj = (MyObject *)[self.managedObjectContext existingObjectWithID:[self.searchResults objectAtIndex:indexPath.row] error:nil];
    DetailsViewController *details = [[DetailsViewController alloc] init];
    details.myObject = myObj;
    [self.navigationController pushViewController:details animated:YES];
} 
```

**后：**

```
@property (nonatomic, strong) MyObject* myObj; 
```

我为我的**对象**添加了一个属性并将其添加到`didSelectRowAtIndexPath`方法中。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.myObj = (MyObject *)[self.managedObjectContext existingObjectWithID:[self.searchResults objectAtIndex:indexPath.row] error:nil];
    DetailsViewController *details = [[DetailsViewController alloc] init];
    details.myObject = self.myObj;
    [self.navigationController pushViewController:details animated:YES];
} 
```