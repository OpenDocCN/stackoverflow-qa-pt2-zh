# StackOverflow 问答 13433000-13433999

# linux - Linux 中的线程

> ID：13433000
> 
> 赞同：0
> 
> 时间：2012-11-17T17:34:16.677
> 
> 标签：linux

我已经解决了这里关于`Pthreads`Linux 主题的所有问题，但有一个基本的疑问对我来说仍未解决：

在各种回复中都提到，当我们在 Linux 上创建 POSIX 线程时，用户线程和内核线程之间存在 1:1 的映射关系。

我的疑问是当我们`pthread_create()`在Linux中使用时，是否有1个用户线程和一个相应的唯一内核线程隐式创建*（即总共2个线程，其中一个对用户不可见）*？

**或者**

只创建了一个内核线程，并且在较新的 Linux 内核中不再有任何称为用户线程的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:41:15.483

NPTL（本机 POSIX 线程库）和较旧的 LinuxThreads 都使用 1:1 模型，其中用户创建的每个线程（或进程）对应于内核中的一个可调度实体。

但是，您可能对用户级线程或[光纤](http://en.wikipedia.org/wiki/Fiber_%28computer_science%29)感到困惑，它们是通过调用创建*的执行线程*`makecontext()`，`swapcontext()`具有 N:1 模型，内核不知道用户级线程，它们的调度是在用户中完成的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:33:58.690

pthread_create() internally calls fork(), and vfork()/fork() internally calls clone(). So in most of the case it is 1:1 mapping.

# ios - 使用 iOS API 的文件共享服务

> ID：13433006
> 
> 赞同：1
> 
> 时间：2012-11-17T17:35:16.877
> 
> 标签：ios, xcode, amazon-s3, dropbox

我正在寻找一种文件共享服务来托管我的所有应用程序的文件。这个想法是更新文件共享帐户，并让应用程序每次加载时都从那里下载。

我尝试了保管箱，但他们每次都要求用户输入他们的登录详细信息，这不是我想要的。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T18:01:44.737

Amazon Web Services S3 非常适合文件共享。链接在[这里](http://aws.amazon.com/s3/)。

# vb.net - 仅显示 VB 标签中的最新行

> ID：13433007
> 
> 赞同：-1
> 
> 时间：2012-11-17T17:35:20.510
> 
> 标签：vb.net, winforms, vb.net-2010

**问题** 在 VB 标签中，如果行数超过了固定高度可以支持的数量，那么额外的行会被截断，用户只能看到前几行。

我需要它完全相反。我想看最新的 5 或 6 行。这意味着如果有比标签的固定高度可以显示的更多行，那么不要简单地将它们切断，所有行都应该向上移动，最新的行位于底部。顶线可以剪掉，但最新的线需要在底部。

**我正在尝试做的示例** 如果您查看控制台并输入类似的命令`dir`，那么它会列出最新的目录，但您会在底部看到最新的读取目录。基本上，您会看到它读取的最新目录。您只能看到它读取的最新 5 或 6 个目录，而不是看到每条打印的行。

另一个例子：看一个文本框。如果您输入的文本多于高度，那么您会看到文本框在文本上自动滚动并显示最新的行，而较旧的行继续向上移动并最终被截断，直到您向上移动滚动条。我需要它完全一样，除了没有滚动条。

再举一个例子：如果您将标签的 TextAlign 属性设置为底部居中，那么当您添加更多行时，您会看到文本向上移动。当标签被线条填充并且文本超过高度并被切断时，就会出现问题。那不应该发生。顶部的文本应该被截断，但最新的一行应该继续来自底部。

**其他人推荐的** 解决方案 我得到的唯一解决方案是创建一个从标签派生的自定义控件。

有没有其他方法可以做到这一点？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:16:25.457

在新表单上放置一个按钮和一个标签（以免弄乱您现有的代码），然后复制并粘贴下面的代码，然后反复单击该按钮，看看这是否能解决您的问题。

显然，如果确实如此，您仍然必须弄乱代码，以便满足您的特定需求。

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    Static TextLines As Generic.List(Of String) = Nothing
    Static SingleLineHeight As Integer = Nothing
    Static maxrows As Integer
    Static qty As Integer = Nothing
    Dim text As String = Nothing
    Dim counta As Integer = Nothing
    '
    'set MAX ROWS
    maxrows = 6
    ' Initalise
    If TextLines Is Nothing Then TextLines = New Generic.List(Of String)
    If SingleLineHeight = 0 Then
        Label1.Text = "Test Line"
        SingleLineHeight = Label1.Font.Height
        Label1.Text = ""
    End If
    '
    'process
    qty = qty + 1
    text = "Line Number " & qty
    TextLines.Add(text)
    Label1.Text = ""
    If TextLines.Count > maxrows - 1 Then TextLines.RemoveAt(0)
    For counta = 0 To TextLines.Count - 1
        Label1.Text = Label1.Text & TextLines(counta) & vbCrLf
    Next

End Sub 
```

# c - 用 C 读取文件的最快方法

> ID：13433008
> 
> 赞同：2
> 
> 时间：2012-11-17T17:35:29.787
> 
> 标签：c, io

我想读取 GB 量级的文件（比如 10 GB）。在 C 中读取此类文件的最快方法是什么。我正在尝试实现，`tail`但我认为 I/O 可能是一个瓶颈。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:49:00.697

首先：我还没有看到一台通用计算机，其物理 IO 速度足以容纳比使用的任何缓存大得多的文件，CPU 密集型处理是瓶颈。也就是说，我还没有看到所有通用计算机都存在。

因此，您必须平衡 CPU 周期优化与其他因素，例如可移植性、可维护性和可读性。我怀疑大多数用例，包括你给出的那个，都会在很大程度上指向简单地使用你的运行时库函数，相信那些作者非常了解他们在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:43:47.840

您将希望使用低级`read`系统调用来处理大文件，而不是更通用但也更高开销`fread`。（可以`stdio.h`用于您需要发出的相对少量的输出。）

您将希望使用`lseek`跳过大部分文件，然后以块的形式向后扫描以查找行边界。

我会避免`mmap`这个应用程序；它可能会在内核中触发无用的 I/O 启发式方法，并且会增加一大堆您不需要的可移植性问题。

如果这还不足以让您继续前进，请将您遇到的具体地方发布为新问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:23:48.090

正如其他人所说，没有适用于所有环境的通用答案。你能做的最好的就是对许多替代品进行基准测试。

然而，有几件事可能会解释你得到的结果：

1.  重叠的计算和读取操作：现代机器具有直接内存访问 (DMA) 硬件和总线架构，当您处理先前读取的缓冲区时，可以将数据从磁盘流式传输到一个或多个缓冲区。这个想法是运行尽可能多的并行流，以保持所有设备接口和总线以满负荷运行，否则 CPU 会因处理而最大化（而不是如下所述的无用复制），或者 - 在完美的世界中 - 两者兼而有之。例如，看[Windows Overlapped IO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686358%28v=vs.85%29.aspx)

2.  缓冲：磁盘 I/O 硬件和驱动程序、文件系统、内核/用户空间边界、语言 I/O API 和您自己的应用程序代码都是可以缓冲数据的地方。在一个实例中，当使用标准 C 库进行文本 I/O 时，我能够识别 PC 中的 4 级缓冲/缓存。这使得每个字节不可避免地被复制至少 4 次。寓意是，当你知道你正在按顺序访问一个巨大的流时，以原始形式（例如，没有用 \r\n 替换 \n），并且你的应用程序是机器应该做的所有事情运行，然后那些缓冲层变得几乎无用。通过使用较低级别的接口可以消除的越多，你就会走得越快。低级[Windows IO API](http://msdn.microsoft.com/en-us/library/40bbyw78.aspx)至少消除了所有用户空间的缓冲和复制。

3.  磁盘通道性能和并行性：如果文件存储在多个磁盘上，例如使用 RAID，并且接口具有单独的 DMA 通道，则操作系统和/或您的代码可以从并行硬件中受益。同样，因为您得到您所支付的，并非所有的磁盘接口都是平等的。这是一个深奥的话题，但总的来说，服务器针对磁盘并行性和高吞吐量进行了优化。任何处理非常大文件的应用程序在服务器硬件上的运行速度都可能比在普通 PC 上更快，并且将有更多机会利用异步/重叠 IO。

# php - PHP Post 和条件错误

> ID：13433009
> 
> 赞同：0
> 
> 时间：2012-11-17T17:35:29.787
> 
> 标签：php, mysql, database, post, conditional

好的，所以我的网站有一个链接，您可以在其中搜索用户并转到他们的个人资料。您输入一个用户名，然后在下一页上，它会告诉您该用户名是否存在，并为您提供一个链接。我想我已经正确编码了所有内容，但显然不是。

这是发生的事情：（我的网站回显两个页面，一个如果您已登录，一个如果您未登录）。如果您已登录并且输入了真实的用户名，那么它将正确显示我想要的文本和链接。但是，如果您在登录时输入假用户名，它只会显示默认文本，而不是我必须在此页面上使用的文本。

当您未登录时，无论您输入什么，它都只显示默认文本。

有人可以帮我看看这段代码吗？

displaytext 的默认文本：

```
$displaytext = "Error";

$srstrSQL = "SELECT * FROM Users_For_CoinAwards WHERE Username = '$usersearched'";

$rs3 = mysql_query($srstrSQL, $connection);

while($row3 = mysql_fetch_array($rs3)){

if ($row3['Username'] == $usersearched)

{

$displaytext = "The user " . $row3["Username"] . " has been found. Please click on the below link to visit their profile.";

$displaylink = "<a href='http://www.coinawards.net63.net/user/" . $row3['Username'] . ".php' id='displaylink'>" . $row3['Username'] . "</a>";

}

else

{

$displaytext = "Sorry, the user " . $row3["Username"] . " was not found. Please check your query and try again.";

}

}

$row3 = mysql_fetch_array($rs3); print_r($row3); 
```

好的，这是显示文本的部分：

' . $显示文本。'

我仔细检查以确保无论您是否登录，上面的代码都是相同的，但结果仍然不同。

编辑：

[你可以在http://www.coinawards.net63.net/](http://www.coinawards.net63.net/)看到他为自己发生的事情

只需单击黄色的“用户搜索”按钮并输入奇怪的随机字符组合。

它将带您到带有以下代码的新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:39:51.267

```
else if ($row3['Username'] !== $usersearched) 
```

应该

```
else if ($row3['Username'] != $usersearched) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:44:12.113

首先**停止**使用 mysql_* 不再维护，建议您不再在新项目中使用它，请查看 pdo 或 mysqli，如下所示[http://php.net/manual/en/function.mysql-query .php](http://php.net/manual/en/function.mysql-query.php)

我可以看到的问题是您没有检查您的查询是否返回任何结果，这就是为什么您的条件只返回一个结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T17:44:18.687

由于这是一个二元条件（即用户存在或*不*存在，因此根本不需要`else if ($row3['Username'] != $usersearched)`. 将其替换为`else`.

```
while($row3 = mysql_fetch_array($rs3)){

    if ($row3['Username'] == $usersearched){

        ... Your code here ...

    }else{

        $displaytext = "Sorry, the user " . $usersearched . " was not found. Please check your query and try again.";

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T18:02:42.397

好的，试试这个。请尝试使用双引号或单引号 $row[]，您将两者混合。

```
$srstrSQL = "SELECT * FROM Users_For_CoinAwards WHERE Username = '$usersearched' ";

$rs3 = mysql_query($srstrSQL, $connection);

while($row3 = mysql_fetch_array($rs3)){

 $displaytext = "Error";

if (mysql_num_rows($rs3) == 1)

{

echo $displaytext ."The user " . $row3["Username"] . " has been found. Please click on the below link to visit their profile.";

echo $displaylink ."<a href='http://www.coinawards.net63.net/user/" . $row3['Username'] . ".php' id='displaylink'>" . $row3['Username'] . "</a>";

}

else

{

echo $displaytext."Sorry, the user " . $row3["Username"] . " was not found. Please check your query and try again.";

}

}

$row3 = mysql_fetch_array($rs3); print_r($row3); 
```

# android - BroadcastReceiver onReceive 事件不会触发

> ID：13433010
> 
> 赞同：2
> 
> 时间：2012-11-17T17:35:34.503
> 
> 标签：android, broadcastreceiver

我正在尝试收听收到的 SMS 消息，但永远不会调用 onReceive 方法。该程序是为 1.6 版本的 android 构建的，它在 2.3.7 版本上运行没有错误，但是我之前说的事件没有触发。

任何提示？

```
// SMSListener CODE

import android.content.BroadcastReceiver;
import android.content.ContentResolver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSListener extends BroadcastReceiver {

    protected String smsBody = "";
    public static final String SMS_EXTRA_NAME = "pdus";
    protected SQLEventDataSource events;

    @Override
    public void onReceive(Context context, Intent intent) {
        // Get SMS map from Intent
        Bundle extras = intent.getExtras();
        Toast.makeText( context, "O evento onReceive foi lançado", Toast.LENGTH_SHORT ).show();
        String messages = "";

        if ( extras != null )
        {
            // Get received SMS array
            Object[] smsExtra = (Object[]) extras.get( SMS_EXTRA_NAME );

            for ( int i = 0; i < smsExtra.length; ++i )
            {
                SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

                String body = sms.getMessageBody().toString();

                // check if it's a configuration message
                if (body.substring(0, 5) == "SMED@") {
                    String[] configs = body.split("@"); 
                    events.addEventConfiguration(configs[1], configs[2], configs[3]);
                }

            }

            // Display SMS message
            Toast.makeText( context, messages, Toast.LENGTH_SHORT ).show();
        }
    }
    private void setSmsBody(String smsBody) {
        this.smsBody = smsBody;
    }

    public String getSMSBody() {
        // TODO Auto-generated method stub
        return this.smsBody;
    }
} 
```

// AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="pt.ipbeja.estig.smed"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="1" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.provider.Telephony.SMS_RECEIVED" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".SMEDGPSActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".SMSListener" android:exported="true" > 
            <intent-filter> 
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter> 
        </receiver>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:39:25.940

假设您从字面上粘贴了清单，它包含所需权限中的拼写错误。它当前错误地列出了操作过滤器字符串 (android.provider.Telephony.SMS_RECEIVED)，而不是实际权限：

```
<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission> 
```

# python - 如何使用腐蚀分离触摸物体的轮廓？

> ID：13433015
> 
> 赞同：6
> 
> 时间：2012-11-17T17:36:01.727
> 
> 标签：python, opencv, detection

我遇到了这个问题：

![http://img38.imageshack.us/img38/5856/questao.png](../Images/ea39205029f31a2a00bf8ed432588fd7.png)

我正在使用 Python 和 OpenCV。我正在尝试使用腐蚀分离接触硬币的轮廓。我对图像进行了阈值处理，然后尝试应用侵蚀，但没有任何反应。我已经阅读了文档，但仍然不太了解`getStruturingElement`and erode 是如何工作的。

1.  我已经对图像进行了阈值处理。

2.  在阈值图像上使用腐蚀。

仍然没有。我在这里用错了什么？

以下是部分代码：

```
import cv2, numpy as np

#1.Reads Image
objectImage = cv2.imread('P1000713s.jpg')

#2.Converts to Gray level
cvtcolorImage = cv2.cvtColor(objectImage,cv2.COLOR_RGB2GRAY)

#3.Thresholds
imgSplit = cv2.split(objectImage)
flag,b = cv2.threshold(imgSplit[2],0,255,cv2.THRESH_OTSU) 

#4.Erodes the Thresholded Image
element = cv2.getStructuringElement(cv2.MORPH_CROSS,(3,3))
cv2.erode(b,element)

cv2.imshow('Eroded',b) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-30T16:25:37.343

我知道这是一个老问题，但我有类似的问题，并通过谷歌发现了这个问题。

据我所知 cv2.erode() 不会更改源图像，而是返回应用更改的新图像。

将包含侵蚀调用的行更改为：

```
b = cv2.erode(b,element) 
```

调用 cv2.imshow(...,b) 时应该让您看到更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T23:31:52.483

查看您的图像，3x3 交叉蒙版可能始终保持在阈值区域内。不要使用 MORPH_CROSS，而是使用 MORPH_ELLIPSE。

如果在一次调用后硬币仍然“接触”，您总是可以运行多次调用来腐蚀，但要注意这将对您的形象产生破坏性影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-18T10:09:40.063

我知道这是一个非常古老的线程，但我认为我的回答可以帮助某人。我面临着同样的问题。如果使用 erode 来分离轮廓，总会丢失形状属性信息。我点击了这个链接：[分水岭分割OpenCV](https://www.pyimagesearch.com/2015/11/02/watershed-opencv/)，其中分水岭分割用于分离轮廓，结果非常准确。

# javascript - 在 VB.net 代码中调用 javascript 函数

> ID：13433019
> 
> 赞同：0
> 
> 时间：2012-11-17T17:36:45.890
> 
> 标签：javascript, vb.net

如何在 VB.net 代码中的 .aspx 文件中调用此 javascript 函数。在这方面的任何帮助都会非常有用。

$(文档).ready(函数() {

```
var numberInput = $('#A_SAtxt, #A_SStxt, #A_RAtxt, #A_CAtxt, #A_OItxt, #A_ICtxt, #A_Otxt');

numberInput.on('change', function() {
    var total = 0;

    numberInput.each(function() {
        if ($(this).val() !== '') {
            total += parseFloat($(this).val());
        }
    });

    $('#A_TAtxt').val(total);
}); 
```

});

我什至尝试在页面加载事件中执行以下操作，但它不起作用。

```
 Dim sb As New System.Text.StringBuilder()
    sb.Append("<script type = 'text/javascript'>")
    sb.Append(" $(document).ready(function() {")
    sb.Append(" var numberInput = $('#A_SAtxt, #A_SStxt, #A_RAtxt, #A_CAtxt,                 

            #A_OItxt, #A_ICtxt, #A_Otxt');")
    sb.Append("  numberInput.on('change', function() {")
    sb.Append(" var total = 0;")
    sb.Append("else{")
    sb.Append(" numberInput.each(function() {")
    sb.Append("  if ($(this).val() !== '') {")
    sb.Append("  total += parseFloat($(this).val());")
    sb.Append(" }")
    sb.Append(" });")
    sb.Append(" $('#A_TAtxt').val(total);")
    sb.Append("  });")
    sb.Append(" });​")

    sb.Append("}};</script>")
    ClientScript.RegisterClientScriptBlock(Me.GetType(), "function", sb.ToString()) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-22T02:32:51.237

确保您的计算机上运行 jquery。或导入 jquery :P

# drools - Drools 无状态会话中的全局变量

> ID：13433020
> 
> 赞同：1
> 
> 时间：2012-11-17T17:36:51.350
> 
> 标签：drools, rule-engine

如何为 drools 无状态会话设置全局变量。

假设两个线程访问同一个会话，但为每个线程设置了一个全局变量 customer 数组列表，其中包含新的数组列表。第二个线程的数组列表是否替换了全局变量客户的第一个线程的数组列表。

StatelessKnowledgeSession 类文档似乎就是这种情况：

StatelessKnowledgeSessions 支持全局变量，范围有多种。我将首先介绍非命令方式，因为命令的范围仅限于特定的执行调用。全局变量可以通过三种方式解决。StatelessKnowledgeSession 支持 getGlobals()，它返回一个 Globals 实例。这些全局变量为所有执行调用共享，因此在这些情况下要特别注意可变全局变量——因为通常执行调用可以在不同的线程中同时执行。Globals 还支持委托，它增加了解析全局变量的第二种方法。setGlobal(String, Object) 的调用实际上将在内部集合上设置，如果添加了一个，则此内部集合中的标识符将优先于提供的委托。如果在内部 Collection 中找不到标识符，它将检查委托 Globals，

[http://docs.jboss.org/jbpm/v5.1/javadocs/org/drools/runtime/StatelessKnowledgeSession.html](http://docs.jboss.org/jbpm/v5.1/javadocs/org/drools/runtime/StatelessKnowledgeSession.html)

我对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:52:56.807

虽然我不能给你一个完全可靠的答案（因为我没有测试过这个），但我会说你是对的，因为

1.  在`StatelessKnowledgeSession`的引擎盖下，Drools 使用 a `StatefulKnowledgeSession`and 在有状态会话中，我希望调用`setGlobal(...)`覆盖先前调用的值。

2.  Globals 存放在“globals store”中；这个全局存储是特定于会话的，这意味着如果您实现使用不同线程同时访问同一个会话，一个线程将覆盖另一个线程的全局存储 - 无论哪个线程`setGlobal(...)`最后执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-13T22:14:40.217

我可以确认 - 全局变量存储在线程之间的共享内存中。

我们使用全局来存储每次执行的结果，发现当多个线程同时执行时，我们偶尔会得到错误的结果，因为另一个线程在前一个线程检索到值之前就跳入并覆盖了全局。

# c++ - 聚合 'arcball arcball' 的类型不完整，无法定义

> ID：13433023
> 
> 赞同：0
> 
> 时间：2012-11-17T17:37:14.633
> 
> 标签：c++, struct, include, extern

我对以下文件有一点问题：

我在这个文件上有弧球结构：

```
#ifndef ARCBALL_H_
#define ARCBALL_H_

#include "ex1.h"

...

extern struct arcball{
    float radius;
    int x,y;
}arcball;

...

#endif /* ARCBALL_H_ */ 
```

我有以下 ex1.h 文件，其中包含 arcball.h 文件：

```
#ifndef __EX1_H__
#define __EX1_H__

////////////////////////////
// Project Includes         
////////////////////////////

#include <stdlib.h>
#include <ctype.h>
#include <math.h>
#include "arcball.h"

////////////////////////////
// OpenMesh Includes        
////////////////////////////

#include "OpenMesh/Core/IO/MeshIO.hh"
#include "OpenMesh/Core/Mesh/PolyMesh_ArrayKernelT.hh"

////////////////////////////
// GL Includes              
////////////////////////////

#include "GLee.h"
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>

...

struct arcball arcball;
#endif 
```

我必须包含 ex1.h 标头，因为 ex1.h 包含我在 arcball.cpp 文件中使用的 glut 函数。我必须使用 arcball.h 标头才能使用该文件上定义的函数和结构。

我得到的错误如下：

```
In file included from arcball.h:11:0,
                 from arcball.cpp:8:
ex1.h:120:16: error: aggregate ‘arcball arcball’ has incomplete type and cannot be defined
make: *** [ex1] Error 1 
```

我不明白为什么它是一个不完整的类型，因为我包含了 arcball.h 文件

这是相互包含问题还是结构定义/使用问题？以及如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:51:24.320

这两个`.h`文件相互包含，造成了很多混乱。这是一个非常糟糕的主意，因为`#ifdef`根据首先包含哪个文件，周围会产生不同的效果：在这种情况下，arcball.h -> ex1.h -> arcball.h-but-really-nothing-because-of-the -#ifdef。

`extern`此外，在没有标头（此处为 ex1.h）中声明变量也是一个坏主意。这可能没有你想要的效果。没有的变量`extern`只能在`.c`文件中声明。

# php - Zend Framework 的 2 InputFilter 有条件需要

> ID：13433025
> 
> 赞同：6
> 
> 时间：2012-11-17T17:37:25.483
> 
> 标签：php, zend-framework2, zend-form

我正在使用 Zend Framework 2 制作一个应用程序。我正在使用它的`InputFilter`. 是否有可能，`Input`有条件地要求一些 s ？我的意思是我有这样的代码：

```
$filter = new \Zend\InputFilter\InputFilter();
$factory = new \Zend\InputFilter\Factory();
$filter->add($factory->createInput(array(
    'name' => 'type',
    'required' => true
)));
$filter->add($factory->createInput(array(
    'name' => 'smth',
    'required' => true
))); 
```

我希望该字段`something`仅在`type`相等时才需要`1`。有没有内置的方法可以做到这一点？还是我应该只创建自定义验证器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T11:31:59.853

首先，您可能希望从[传递给 Zend 框架 2 验证器的空值开始对空/空值启用验证](https://stackoverflow.com/questions/14910431/empty-values-passed-to-zend-framework-2-validators)

您可以使用回调输入过滤器，如下例所示：

```
$filter = new \Zend\InputFilter\InputFilter();
$type   = new \Zend\InputFilter\Input('type');
$smth   = new \Zend\InputFilter\Input('smth');

$smth
    ->getValidatorChain()
    ->attach(new \Zend\Validator\NotEmpty(\Zend\Validator\NotEmpty::NULL))
    ->attach(new \Zend\Validator\Callback(function ($value) use ($type) {
        return $value || (1 != $type->getValue());
    }));

$filter->add($type);
$filter->add($smth); 
```

当值`smth`是空字符串并且值`type`不是时，这基本上会起作用`1`。如果 的值为，则`type`必须不同于空字符串。`1``smth`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T09:30:22.630

我无法让 Ocramius 的示例正常工作，因为 $type->getValue 始终为 NULL。我稍微更改了代码以使用 $context ，这对我有用：

```
$filter = new \Zend\InputFilter\InputFilter();
$type   = new \Zend\InputFilter\Input('type');
$smth   = new \Zend\InputFilter\Input('smth');

$smth
    ->getValidatorChain()
    ->attach(new \Zend\Validator\NotEmpty(\Zend\Validator\NotEmpty::NULL))
    ->attach(new \Zend\Validator\Callback(function ($value, $context){
        return $value || (1 != $context['type']);
    }));

$filter->add($type);
$filter->add($smth); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-23T15:50:25.613

您也可以使用`setValidationGroup`它。

`InputFilter`在执行实际验证之前，根据输入过滤器中设置的数据创建自己的类，在其中设置验证组。

```
class MyInputFilter extends InputFilter
{
   setData($data){
       if(isset($data['type']) && $data['type'] === 1){
           // if we have type in data and value equals 1 we validate all fields including something
           setValidationGroup(InputFilterInterface::VALIDATE_ALL);
       }else{
           // in all other cases we only validate type field
           setValidationGroup(['type']);
       }
       parent::setData($data);
   }
} 
```

这只是一个简单的例子来展示什么是可能的`setValidatioGroup`，您可以根据您的特定需求创建自己的组合来设置验证组。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-19T00:21:12.743

不幸的是，您必须根据您的条件设置所需的选项，如下所示：

```
$filter->add($factory->createInput(array(
    'name' => 'smth',
    'required' => (isset($_POST['type']) && $_POST['type'] == '1'),
))); 
```

# emulation - 指令集模拟器指南

> ID：13433028
> 
> 赞同：4
> 
> 时间：2012-11-17T17:37:59.943
> 
> 标签：emulation, instructions, microprocessors, instruction-set

我有兴趣为 gameboy 和其他手持控制台编写模拟器，但我读到的第一步是模拟指令集。我在这里找到了一个链接，上面说初学者可以模拟 Commodore 64 8 位微处理器，问题是我对模拟指令集一无所知。我知道 mips 指令集，所以我想我可以理解其他指令集，但问题是模拟它们意味着什么？

注意：如果有人可以为我提供初学者指令集仿真的分步指南，我将不胜感激。

注意 #2：我打算用 C 语言编写。

注意＃3：这是我第一次尝试学习整个仿真。

谢谢

编辑：我发现这个网站是一个详细的分步指南来编写一个看起来很有希望的模拟器。我将开始阅读它，并希望它对其他正在研究编写模拟器的人有所帮助。

[模拟器 101](http://www.emulator101.com/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T19:23:20.730

指令集仿真器是一种软件程序，它从软件设备读取二进制数据并执行数据包含的指令，就好像它是访问物理数据的物理微处理器一样。

Commodore 64 使用了 6502 微处理器。我曾经为这个处理器写过一个模拟器。您需要做的第一件事是阅读处理器上的数据表并了解其行为。它有什么样的操作码，内存寻址怎么样，IO的方法。它的寄存器是什么？它是如何开始执行的？这些都是您在编写模拟器之前需要回答的所有问题。

以下是它在 C 中的外观的一般概述（不是 100% 准确）：

```
uint8_t RAM[65536]; //Declare a memory buffer for emulated RAM (64k)
uint16_t A; //Declare Accumulator
uint16_t X; //Declare X register
uint16_t Y; //Declare Y register
uint16_t PC = 0; //Declare Program counter, start executing at address 0
uint16_t FLAGS = 0 //Start with all flags cleared;

//Return 1 if the carry flag is set 0 otherwise, in this example, the 3rd bit is
//the carry flag (not true for actual 6502)
#define CARRY_FLAG(flags)  ((0x4 & flags) >> 2)

#define ADC 0x69
#define LDA 0xA9

while (executing) {
    switch(RAM[PC]) {  //Grab the opcode at the program counter
        case ADC: //Add with carry
            A = X + RAM[PC+1] + CARRY_FLAG(FLAGS);
            UpdateFlags(A);
            PC += ADC_SIZE;
            break;
        case LDA: //Load accumulator
            A = RAM[PC+1]; 
            UpdateFlags(X);
            PC += MOV_SIZE;
            break;
        default:
            //Invalid opcode!

    }
} 
```

根据[这个参考](http://www.6502.org/tutorials/6502opcodes.html)ADC 实际上在 6502 处理器中有 8 个操作码，这意味着您的 switch 语句中将有 8 个不同的 ADC，每个 ADC 用于不同的操作码和内存寻址方案。您将不得不处理字节序和字节顺序，当然还有指针。如果您还没有 C 中的指针和类型转换，我将有一个深入的了解。要操作标志寄存器，您必须对 C 中的按位运算有深入的了解。如果您很聪明，可以使用 C 宏甚至函数指针来节省一些工作，如上面的 CARRY_FLAG 示例。

每次执行指令时，都必须将程序计数器推进该指令的大小，每个操作码的大小都不同。一些操作码不带任何参数，因此它们的大小只有 1 个字节，而其他操作码采用 16 位整数，如我上面的 MOV 示例。所有这些都应该有很好的记录。

分支指令（JMP、JE、JNE 等）很简单：如果在标志寄存器中设置了某个标志，则将 PC 加载到指定的地址。这就是微处理器如何做出“决定”，而模拟它们只是改变 PC 的问题，就像真正的微处理器会做的那样。

编写指令集模拟器最困难的部分是调试。你怎么知道一切是否正常？有很多资源可以帮助您。人们已经编写了测试代码，可以帮助您调试每条指令。您可以一次执行一条指令并比较参考输出。如果有什么不同，你知道你在某个地方有一个错误并且可以修复它。

这应该足以让你开始。重要的是你有 A) 对要模拟的指令集有很好的深入理解 B) 对 C 中的低级数据操作有充分的理解，包括类型转换、指针、按位操作、字节顺序等。

# ios - 如何确定在运行时使用了哪个默认图像？

> ID：13433036
> 
> 赞同：3
> 
> 时间：2012-11-17T17:38:57.570
> 
> 标签：ios, uiimage

我有一个具有不同默认图像的通用应用程序：

> 默认.png
> 
> 默认@2x.png
> 
> Default-Portrait@2x~ipad.png

等等。如何在运行时以编程方式确定使用了哪个文件？我试过这个：

```
 UIImage *imgUsed = [UIImage imageNamed:@"Default"]; 
```

但是无论我使用哪个模拟器，这总是会返回`Default.png`（根据正在使用的屏幕尺寸，在模拟器中启动时会显示正确的图像）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:02:21.967

创建一个带有图像视图的“加载”视图控制器 - 一个 iPhone 和一个 iPad 版本。在每一个中，将图像设置为默认或默认-iPad - 将自动为您选择视网膜/非视网膜版本。

也将加载标签或活动指示器添加到视图控制器。

[当您需要时，显示此视图控制器 - 您可以使用 UI_USER_INTERFACE_IDIOM() 宏（参见此处](https://stackoverflow.com/questions/3202558/determine-ipad-device)）判断您是在 iPhone 还是 iPad 上运行并加载相应的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:50:31.250

你这样做的方式就像逆向工程。您了解屏幕比例是 1 还是 2（视网膜与否）以及设备的尺寸（iPad、iphone3.5 屏幕、iphone4.0 屏幕），然后使用此信息重新创建基本图像名称。

系统没有 api 可以告诉您此信息。

编辑：对，您可以根据@jrturton 的建议使用 UI_USER_INTERFACE_IDIOM 宏来确定 iPad/iPhone，但您仍然需要查看手机尺寸以了解是否使用了 3.5 英寸或 4 英寸高的图像。

# html - CSS 高度元素被忽略

> ID：13433039
> 
> 赞同：1
> 
> 时间：2012-11-17T17:39:35.633
> 
> 标签：html, css, datagrid, dojo

我有两个 DataGrid 表，我想制作 200px 高，但有些东西覆盖了我的 css 中的高度。目前，表格在显示时是两种完全不同的尺寸。

表：

```
<table  dojoType="dojox.grid.DataGrid" id="dnToCountDiv" data-dojo-id="dnToCountDiv" columnReordering="true"
                            sortFields="['extension','totalcalls','totaloutboundcalls','internaloutboundcalls','localoutboundcalls','longdistanceoutboundcalls','internationaloutboundcalls','totalinboundcalls','inboundinternalcalls','inboundexternalcalls']"
                            rowWidth="100%"
                            noDataMessage="<span class='dojoxGridNoData'>No Calls to Show</span>"
                            class="statisticsTable">
                        <thead>
                            <tr>
                                <th field="extension" width="100%" >Extension</th>
                                <th field="totalcalls" width="100%" >Total</th>
                                <th field="totaloutboundcalls" width="100%" > Total Out</th>
                                <th field="internaloutboundcalls" width="100%" >Internal Out</th>
                                <th field="localoutboundcalls" width="100%" >Local Out</th>
                                <th field="longdistanceoutboundcalls" width="100%" >Long Dist Out</th>
                                <th field="internationaloutboundcalls" width="100%" >Internat. Out</th>
                                <th field="totalinboundcalls" width="100%" >Total In</th>
                                <th field="inboundinternalcalls" width="100%" >Internal In</th>
                                <th field="inboundexternalcalls" width="100%" >External In</th>
                            </tr>
                        </thead>
                    </table>

                    <!-- dn to call time table -->
                    <h3>Call Time Per Extension
                        <button  data-dojo-type="dijit.form.Button" id="call_time_help_button" data-dojo-props="iconClass: 'helpIconClass'">Column Key
                            <script type="dojo/method" data-dojo-event="onClick" >
                                alert("call Time help pressed");
                            </script>
                        </button></h3>
                    <table  dojoType="dojox.grid.DataGrid" id="dnToTimeDiv" data-dojo-id="dnToTimeDiv" columnReordering="true"
                            sortFields="['extension','totalcalls','totaloutboundcalls','internaloutboundcalls','localoutboundcalls','longdistanceoutboundcalls','internationaloutboundcalls','totalinboundcalls','inboundinternalcalls','inboundexternalcalls']"
                            rowWidth="100%"
                            noDataMessage="<span class='dojoxGridNoData'>No Calls to Show</span>"
                            class="statisticsTable">
                        <thead>
                            <tr>
                                <th field="extension" width="100%" >Extension</th>
                                <th field="totalcalls" width="100%" >Total</th>
                                <th field="totaloutboundcalls" width="100%" > Total Out</th>
                                <th field="internaloutboundcalls" width="100%" >Internal Out</th>
                                <th field="localoutboundcalls" width="100%" >Local Out</th>
                                <th field="longdistanceoutboundcalls" width="100%" >Long Dist Out</th>
                                <th field="internationaloutboundcalls" width="100%" >Internat. Out</th>
                                <th field="totalinboundcalls" width="100%" >Total In</th>
                                <th field="inboundinternalcalls" width="100%" >Internal In</th>
                                <th field="inboundexternalcalls" width="100%" >External In</th>
                            </tr>
                        </thead>
                    </table> 
```

CSS：

```
.statisticsTable {
width: 800px;
height: 200px;
border-style:solid;
border-width:1px;
border-color:#C1C1C1; 
```

}

边框等已正确添加，因此它可以看到 CSS。当我打开萤火虫时，虽然我在检查其中一张桌子上的 html 时得到以下信息。它承认 element.style 覆盖了高度。

![在此处输入图像描述](../Images/36ee0f9eea8168578589b39f1b12ebe6.png)

我将如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T18:11:17.617

`style`只能使用 覆盖属性`!important`。

```
.statisticsTable {
  height: 200px !important;
  /* ... */
} 
```

但是，您应该不惜一切代价避免`!important`，因为`!important`只能被`!important`（困扰整个样式表）覆盖，内联样式只能覆盖`!important`样式本身`!important`，并且`!important`内联样式根本不能被 CSS 覆盖。如果您可以避免创建需要首先覆盖的样式属性，那么您绝对应该这样做。

# java - 在java文件中查找表的大小

> ID：13433040
> 
> 赞同：-3
> 
> 时间：2012-11-17T17:39:41.073
> 
> 标签：java, mysql, jdbc

在 mysql 命令行中，当我发出命令时： select count(*) tables from users; 它工作正常。它给了我桌子的大小。

但是，我想在 Java 文件中获取结果。因此我在 Java 文件中编写了以下代码。但它不起作用

```
public int f()
{
   ResultSet rs;
   int i;
   String query = "select count(*) tables from users";
   Statement st = this.con.createStatement();     //error
   rs = st.executeQuery(query);                   //error
   if(rs.next())                       //error
   {                   //error
    i = rs.getInt(1);                     //error
   }
  return i;    //error
} 
```

如何在我的 Java 文件中获取表的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:41:13.773

您从未使用其 next() 方法检查结果集是否有数据。

从[结果集 API](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)：

> next 方法将光标移动到下一行

```
public int f() throws SQLException {
//rest of your code
rs = st.executeQuery(query);
if(rs.next()){
i = rs.getInt(1);  
}
//rest of your code
} 
```

也`ResultSet`有`getInt()`方法不`GetInt()`，**java是区分大小写**的。

**编辑：**您必须在代码中**处理或声明 SQLException(checked exception)**。[Connection.createStatement()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Connection.html#createStatement%28%29)会抛出**SQLException**。

# javascript - 为客户端应用程序提取实时服务器端数据

> ID：13433043
> 
> 赞同：2
> 
> 时间：2012-11-17T17:39:51.763
> 
> 标签：javascript, jquery, html, websocket

我正在使用 websockets 将数据从服务器发送到客户端。这很好用，例如，我可以显示服务器在收到消息时发送给客户端的消息。这是我使用的部分 javascript：

```
 ws.onmessage = function(evt){
            $("#display").append(evt.data + "<br />");

            console.log(evt.data); 
```

这是显示的数据：

```
{"place": {"full_name": "Northampton, Northamptonshire"}, "coordinates": {"type": "Point", "coordinates": [-0.9003352, 52.2467064]}} 
```

但是，如果我只是想要坐标信息，即经度和纬度，那么 Web 控制台错误消息是：

```
TypeError: evt.data.coordinates is undefined @ http://localhost:8888/:34 
```

我正在尝试通过以下方式获取这些数据：

```
 ws.onmessage = function(evt){
            var coordinates = evt.data.coordinates.coordinates;
            console.log(coordinates); 
```

我是 javascript 的新手。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:49:14.347

`evt.data`是一个 JSON 字符串。你必须解析它：

```
ws.onmessage = function(evt){
   var msg = JSON.parse(evt.data);
   var coordinates = msg.coordinates.coordinates; 
```

# java - 如何使用耶拿执行 Sparql 删除查询？

> ID：13433045
> 
> 赞同：-2
> 
> 时间：2012-11-17T17:40:05.500
> 
> 标签：java, sparql, jena, virtuoso

我正在尝试使用 Jena 执行删除查询，但在执行时出现错误。我尝试了两种方法，但在这两种情况下，我都会遇到同样的错误。我正在使用 jena 2.7.3 和数据库 virtuoso 6.01.3。

代码 1：

```
String queryString; // deleteQuery.
Model m = VirtModel.openDatabaseModel(file, connectionURL, username, password); 
UpdateAction.parseExecute(queryString, m); 
```

代码 2：

```
String queryString; // deleteQuery
Model m = VirtModel.openDatabaseModel(file, connectionURL, username, password); 
GraphStore gs = GraphStoreFactory.create();
gs.setDefaultGraph(m.getGraph());            
UpdateRequest ur = UpdateFactory.create(queryString);            
UpdateAction.execute(ur.getOperations().get(0),gs); 
```

错误：

> java.lang.InstantiationError: com.hp.hpl.jena.sparql.engine.binding.BindingMap at virtuoso.jena.driver.VirtuosoQueryEngine$VQueryIterator.extractRow(Unknown Source) at virtuoso.jena.driver.VirtuosoQueryEngine$VQueryIterator.moveForward( Unknown Source) at virtuoso.jena.driver.VirtuosoQueryEngine$VQueryIterator.hasNextBinding(Unknown Source) at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorBase.hasNext(QueryIteratorBase.java:108) at com.hp.hpl .jena.sparql.engine.iterator.QueryIteratorWrapper.hasNextBinding(QueryIteratorWrapper.java:40) 在 com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorBase.hasNext(QueryIteratorBase.java:108) 在 org.openjena.atlas .data.AbstractDataBag.addAll(AbstractDataBag.java:74) 在 com.hp.hpl.jena.sparql.modify.UpdateEngineWorker.visit(UpdateEngineWorker.java:348) 在 com.hp.hpl.jena.sparql.modify.request.UpdateModify.visit(UpdateModify.java:97) 在 com.hp.hpl.jena.sparql.modify.UpdateEngineMain.execute(UpdateEngineMain.java:40)在 com.hp.hpl.jena.sparql.modify.UpdateProcessorBase.execute(UpdateProcessorBase.java:56) 在 com.hp.hpl.jena.update.UpdateAction.execute$(UpdateAction.java:330) 在 com.hp。 hpl.jena.update.UpdateAction.execute(UpdateAction.java:323) 在 com.hp.hpl.jena.update.UpdateAction.execute(UpdateAction.java:283) 在 com.hp.hpl.jena.update.UpdateAction。在 com.tcs.ignite.plc.utilities.ContextListener.contextInitialized(ContextListener.java:35) 的 com.tcs.ignite.plc.DAOs.ConceptDAO.deleteConceptByURI(ConceptDAO.java:75) 执行(UpdateAction.java:237)在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723) 在 org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226) 在 org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221) 在 java.util.concurrent.FutureTask $Sync.innerRun(FutureTask.java:303) 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java. util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)138) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:662)138) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:662)

有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T12:02:25.137

评论参考的是 OWLIM，而不是 Virtuoso。原因是相同的 - 版本的错误组合。您需要找出与数据库 virtuoso 6.01.3 一起使用的 Jena 版本。

另一种方法是将 Virtuoso 数据库作为服务器运行并通过 SPARQL 协议连接到它。然后 Jena 的版本（SPARQL 协议客户端）与同步到 Virtuoso 的版本无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T14:31:36.903

使用下一个代码将您的查询直接发送到 Virtuoso 服务器，而无需使用任何 Jena SPARQL 解析器/执行器。

```
String queryString; // deleteQuery
Model m = VirtModel.openDatabaseModel(file, connectionURL, username, password); 
VirtuosoUpdateRequest vur = VirtuosoUpdateFactory.create(str, m);
vur.exec(); 
```

# c - 如何在内核中记录大量数据

> ID：13433048
> 
> 赞同：4
> 
> 时间：2012-11-17T17:40:19.253
> 
> 标签：c, process, linux-kernel, buffer

我正在尝试从内核记录大量数据输出。本质上，我试图记录内核中所有进程上下文切换的方式。即使是 1 分钟的分析记录的数据也会很大，我该怎么做呢？我必须打开一个巨大的缓冲区，将数据记录在其中，然后将其发送到用户空间进行进一步分析。

编辑：为了澄清下面的“大”有多大是我试图解决大约 10000 行输出的确切问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T19:36:16.667

我的建议是使用 linux 内核用于捕获数据包的相同想法，特别是数据包环形缓冲区（搜索：PACKET_RX_RING）。

这个想法很简单，在你的用户空间程序中，分配环。然后将此环传递给“驱动程序”（您的内核模块），然后您的驱动程序可以简单地将数据点写入环，您的用户空间程序可以读取这些数据。因为它是一个环，您可以简单地继续写入，客户端可以继续读取 - 如果客户端落后，您的驱动程序可能会超车（一旦它绕过环），但我相信你可以适当调整戒指的大小。

环中的每个插槽都应该包含您的“序列化”数据，用户空间程序可以简单地读取这些数据。这种类型的环应该很容易实现无锁，并且很可能您希望您的客户端旋转以查看是否有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:25:34.447

好吧，导出这么多数据的“标准”方式是使用 debugfs。你可以看看 ftrace (kernel/trace/ftrace.c) 是如何做到这一点的。

而且，对于更多数据，您可以使用 relayfs 接口 (kernel/relay.c)。你可以看看 blktrace (kernel/trace/blktrace.c) 是如何做到这一点的。

# php - 在 Magento 中包含和使用 php 类的最佳方法

> ID：13433050
> 
> 赞同：7
> 
> 时间：2012-11-17T17:40:37.777
> 
> 标签：php, magento, include

我想在magento网站上使用这个[移动检测php文件](http://code.google.com/p/php-mobile-detect/)，我想知道插入php文件并在其他子模板中使用它的最佳方法，因为magento结构对我来说仍然有点棘手。

基本上我有这样的东西 main-template.phtml 和 header.phtml

**main-template.phtml 内容是**

```
<?php
    include_once 'Mobile_Detect.php';
    $detect = new Mobile_Detect();
    echo $this->getChildHtml('head');
?>
<?php if ( $detect->isMobile() ) { //condition nr.2 ?>
    <meta name="mobileMain" content="this is for mobile">
<?php } else {?>
    <meta name="NOTmobileMAIN" content="this is not for mobile">
<?php } ?> 
```

**header.phtml 内容是**

```
<?php if ( $detect->isMobile() ) { //condition nr.1 ?>
    <meta name="mobile" content="this is for mobile">
<?php } else {?>
    <meta name="NOTmobile" content="this is not for mobile">
<?php } ?> 
```

当我在浏览器中加载 main-template.phtml 时，第二个条件有效，但第一个条件抛出错误“*在非对象上调用成员函数 isMobile()* ”。

将 Mobile_Detect.php 包含在我的 main-template.phtml 中一次，然后能够在我的所有子文件（如 header.phtml）中运行该条件的最佳方法是什么，这些子文件也将插入到 main-template.phtml 中？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-18T06:02:13.420

如果您命名该文件`Detect.php`并将其放在一个名为 的新文件夹中`magento/lib/Mobile/`，那么您将能够自动加载该类而无需使用`require_once`或`include`。

```
path_to_magento
  \-- app
  |     \-- code
  |     \-- design
  |     \-- etc
  \-- lib
  |     \-- Mobile
  |     |     \-- Detect.php    
  |     \-- Varien
  |     \-- Zend
  \-- skin 
```

**MyModule 的控制器**

```
<?php
    class My_Module_SomeController extends Mage_Core_Controller_Front_Action
    {
        public function indexAction()
        {
            // Will be automatically loaded from lib/Mobile/Detect.php
            $detect = new Mobile_Detect();

            if ( $detect->isMobile() ) {
                // Do something mobile-friendly
            } else {
                // Do something not
            }
        }
    } 
```

**index.php - 使用移动检测来加载适合移动设备的商店视图**

```
<?php
    # Lots of stuff above...

    require_once $mageFilename;

    #Varien_Profiler::enable();

    if (isset($_SERVER['MAGE_IS_DEVELOPER_MODE'])) {
        Mage::setIsDeveloperMode(true);
    }

    #ini_set('display_errors', 1);

    umask(0);

    // This will automatically look in lib/Mobile/Detect.php
    $detect = new Mobile_Detect();

    // Now you can change this store view, i.e. change your entire theme
    if ( $detect->isMobile() ) {
        // Check if a mobile store exists and prepare to load it
        $code = empty($_SERVER['MAGE_RUN_CODE']) ? 'mobile' : $_SERVER['MAGE_RUN_CODE'].'_mobile';
        if ( Mage::app()->getStore($code) ) {
            $_SERVER['MAGE_RUN_CODE'] = 'mobile';
            $_SERVER['MAGE_RUN_TYPE'] = 'store';
        }
    }

    /* Store or website code */
    $mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';

    /* Run store or run website */
    $mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

    Mage::run($mageRunCode, $mageRunType); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:55:23.187

为什么不将您的 PHP 类包含为 Block 类？

创建/重命名您的 PHP 类，如：Yourcompany_Yourmodule_Block_Mobiledetection 扩展 Mage_Core_Block_Template 并将其放在模块的 Block 目录中（我希望您有一个模块）

在您的皮肤/模板模块的目录中创建一个专用模板文件，并在其中复制/粘贴您的特定 HTML

在模块的布局文件中链接块类和 phtml 文件。

这是在 magento 中构建模块的标准方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:45:48.997

您是否尝试过使用实际的类本身：

```
<?php
if ( Mobile_Detect::isMobile() ) { //condition nr.1
    echo '<meta name="mobile" content="this is for mobile">';
} else {
    echo '<meta name="NOTmobile" content="this is not for mobile">';
}?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T17:46:45.273

您的问题是您将类加载到您的正文中而不是您的标题中，因此您在技术上尝试在该类甚至加载到您的 header.phtml 文件之前使用该类。

简而言之，将您的 include_once 移动到您的标题中

# python - 为什么 python 2.6 不更新我的 numpy 数组？

> ID：13433058
> 
> 赞同：3
> 
> 时间：2012-11-17T17:41:16.183
> 
> 标签：python, arrays, numpy, copy

我有一个名为 get_gradient 的简单函数，它接受一个 [[x,y,Vx,Vy]] 的 numpy 数组并返回（应该返回）一个 [[Vx,Vy,Ax,Ay]] 的数组。我想将我的 k[0][0:2] 更新为等于 state[0][2:4] 但是当我将它们打印出来时，k 永远不会改变值。我创建了一个初始数组的副本，希望它能解决它，但它仍然不起作用！任何帮助将非常感激

```
Y          = numpy.array([[0, 0, 0, 0]]) # [x,y,Vx,Vy]
k          = numpy.array([[0, 0, 0, 0]]) # [x,y,Vx,Vy]

def get_gradient(Y):
    state = Y.copy()
    spring_force   = spring.force(state[0], feet_pos[0])
    brownian_force = mass.brownian(dt)
    drag_force     = mass.drag(state[0][2:4])
    total_force    = spring_force + brownian_force + drag_force     #2d array [Fx,Fy]

    k[0][0:2] = state[0][2:4]            ##### DOESN'T WORK!!!
    k[0][2:4] = total_force/mass.mass    ##### but this works :s

    print k[0][0:2]
    print state[0][2:4]

    return k 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:44:58.840

并不是说 k 没有改变，而是它有一个整数 dtype，所以当你尝试给它分配一个浮点数时，你可能不会得到你所期望的：

```
>>> k
array([[   0,    0, 4863, 1464]])
>>> k.dtype
dtype('int64')
>>> k[0][0] = 10
>>> k
array([[  10,    0, 4863, 1464]])
>>> k[0][0] = 1e-3
>>> k
array([[   0,    0, 4863, 1464]]) 
```

或者

```
>>> k
array([[  0,    0, 4863, 1464]])
>>> k[0][0] = 10.2
>>> k
array([[  10,    0, 4863, 1464]]) 
```

但：

```
>>> f = k.astype(float)
>>> f
array([[    0.,     0.,  4863.,  1464.]])
>>> f[0][0] = 1e-3
>>> f
array([[  1.00000000e-03,   0.00000000e+00,   4.86300000e+03,
          1.46400000e+03]]) 
```

注意`.`后面的零。

我可能会使用

```
>>> k = numpy.zeros((1,4))
>>> k
array([[ 0.,  0.,  0.,  0.]]) 
```

反而; 它默认为`float`dtype。

# python - python：打印中的逗号为“\ t”

> ID：13433059
> 
> 赞同：2
> 
> 时间：2012-11-17T17:41:18.127
> 
> 标签：python

打印中添加了`,`一个空格

```
>>> print "a","b"
a b 
```

如果我需要一个`\t`，我把

```
>>> print "a","\t","b"
a       b 
```

如何将输出更改`,`为 a `\t`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T17:43:11.367

您可以`print()`从`__future__`和使用导入函数`sep='\t'`，`print()`函数是在 python 3 中引入的，它取代了`print`python 2.x 中使用的语句：

```
In [1]: from __future__ import print_function

In [2]: print('a','b',sep='\t')
a   b 
```

帮助`print()`：

```
print(...)
    print(value, ..., sep=' ', end='\n', file=sys.stdout) 
```

> ```
> Prints the values to a stream, or to sys.stdout by default.
> Optional keyword arguments:
> file: a file-like object (stream); defaults to the current sys.stdout.
> sep:  string inserted between values, default a space.
> end:  string appended after the last value, default a newline. 
> ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T17:42:42.017

改用[`str.join()`](http://docs.python.org/2/library/stdtypes.html#str.join)：

```
print '\t'.join(('a', 'b')) 
```

python`print`语句会将表达式中的任何元素转换为字符串并使用空格连接它们；如果您想使用不同的分隔符，则必须手动进行连接。

或者，使用[`print()` *函数*](http://docs.python.org/2/library/functions.html#print)，它已被引入以轻松过渡到 Python 3：

```
from __future__ import print_function
print('a','b',sep='\t') 
```

该`print()`函数接受一个`sep`参数来更改用于分隔值的字符串。在 python 3 中，只保留了该函数，并且删除了 python 2 中`print()`的旧语句。`print`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T10:45:07.007

最简单的方法

```
print("%s\t%s",%(a,b)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-09T03:58:13.943

[https://docs.python.org/2/reference/simple_stmts.html#print](https://docs.python.org/2/reference/simple_stmts.html#print)

像这样`print "Hello", "workd!",`

# iphone - iOS 中视图控制器和旋转之间的转换

> ID：13433060
> 
> 赞同：3
> 
> 时间：2012-11-17T17:41:23.790
> 
> 标签：iphone, ios, ios5, uiviewcontroller, uiinterfaceorientation

考虑一个带有两个子视图控制器（A 和 B）的容器视图控制器，它们都添加了`addChildViewController:`. 然后：

1.  `A.view`被添加到容器视图中
2.  B 通过`transitionFromViewController`从 A 到 B 做来显示。B 收到`viewWillLayoutSubviews`并且世界上一切都很好。
3.  设备在显示 B 时旋转。只有 B 接收旋转调用（`willRotateToInterfaceOrientation:`等）。
4.  通过`transitionFromViewController`从 B 到 A 显示 A。A 没有收到`viewWillLayoutSubviews`，因此布局被破坏。

这是预期的行为吗？如果没有，我可能做错了什么？如果是，我应该怎么做才能在显示 B 时通知 A 旋转变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T23:20:34.320

只要你打电话`addChildViewController:`，你现在就是一个视图控制器容器实现者。这意味着您必须比标准的演示电话（如`presentViewController..`. 这包括处理您添加为子项的控制器的视图框架，正如您的问题所暗示的那样，您可能已经预料到了。

例如，要实现一个超级基本的示例容器，它只显示每个孩子全屏，你可以做这样的事情。

```
-(void)swapChildVCFrom:(UIViewController *)from to:(UIViewController *)to{
    [self addChildViewController:to];
    [from willMoveToParentViewController:nil];

    // Adjust the new child view controller's view's frame
    // For example here just set it to fill the parent view
    to.view.frame = self.view.bounds;

    [self transitionFromViewController:from
                      toViewController:to
                              duration:1.0
                               options:UIViewAnimationOptionTransitionFlipFromLeft
                            animations:nil
                            completion:^(BOOL b){
                                [to didMoveToParentViewController:self];
                                [from.view removeFromSuperview];
                                [from removeFromParentViewController];
                            }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:33:54.367

我能想到的解决方案有以下三种：

1.  预先添加所有容器的视图控制器，并添加它们的视图，但隐藏除第一个之外的所有视图。然后在视图控制器之间转换的方法中，您不必再担心无数与包含相关的方法（例如，您不需要`willMoveToParentViewController`、`addChildViewController`、`removeFromParentViewController`或`didMoveToParentViewController`），而只需使用`UIViewAnimationOptionShowHideTransitionViews`将显示或隐藏的选项适当的意见。这样，所有控制器都会收到所有轮换通知。

2.  第二种合乎逻辑的选择是只预先创建第一个视图控制器。然后，当您想要转换到第二个视图控制器时，您才会创建它（以及它的视图）。并确保您不保留对原始控制器的强引用（例如，不仅是您自己的属性，而且还要确保`removeFromParentViewController`，等等）。这将让它和它的视图被释放。因此，当您转换回来时，它将被重新创建。

3.  如果您要预先创建视图控制器，但`transitionFromViewController`要向容器中添加和删除它们各自的视图，那么我认为您可能必须调用适当的子旋转事件，就像在[自定义外观和旋转回调行为](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW14)中讨论的那样在*视图控制器编程指南中。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:26:13.483

`A`加载并显示后，除非边界发生变化`viewWillLayoutSubviews`，否则不会再次调用。`A.view`如果您需要在每次视图出现在屏幕上时运行您的实现，您可以尝试将该代码移动到`viewWillAppear`.

# ruby-on-rails - 简单字段 - 如果所有字段都为空，则避免创建

> ID：13433061
> 
> 赞同：1
> 
> 时间：2012-11-17T17:41:37.040
> 
> 标签：ruby-on-rails, validation, simple-form

我有一个用户的表单，它的一部分看起来像这样：

```
<%= f.simple_fields_for :uncles, User.new do |uncle| %>
    <%= uncle.input :first_name, :label => "First Name" %>
    <%= uncle.input :last_name, :label => "Last Name" %>
    <%= uncle.input :email%>
<% end %> 
```

我的问题是：如果 simple_fields 中的所有字段都为空，我将如何避免创建此“叔叔”用户记录？

在我的用户模型中，我有这个：

```
has_many     :uncles,
             :through               => :uncles_relationships,
             :source                => :uncle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:50:30.127

假设您正在使用`accepts_nested_attributes_for`创建相关模型，请添加一个[`reject_if`](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)以检查空白字段。

```
accepts_nested_attributes_for :uncles, :reject_if => :reject_uncles?

def reject_uncles?(attributes)
  attributes[:first_name].blank? &&
  attributes[:last_name].blank? &&
  attributes[:email].blank?
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:05:49.450

`accepts_nested_attributes_for`正如@Buck Doyle 所说，在您的情况下，您应该需要使用。当您使用该方法时，您可以为父母和孩子建立一个表单（如您所说），当您提交表单时，如果孩子的信息为空，则只会保存父母的信息。那么如何使用`accepts_nested_attributes_for`呢？

在您的用户模型中，您可以添加以下内容：

```
attr_accessible :uncles_attributes
accepts_nested_attributes_for :uncles, :reject_if => lambda { |attrs| attrs.all? { |key, value| value.blank? } } 
```

就这些。现在在你的`User`控制器中，你只需要使用`save`方法来创建`User`对象，它会检查你，如果叔叔（孩子）的信息是空白的，只保存父母的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:22:20.337

我可能会尝试自定义验证器，例如：

```
(User model class)
validate :all_fields_required

private
def all_fields_required
  if first_name && last_name && email then
  # or perhaps: if (first_name != '') && (last_name != '') && (email != '') then
    true
  else
    false
  end
end 
```

# asp.net - 为什么我的 checkBox 语句不起作用？

> ID：13433062
> 
> 赞同：0
> 
> 时间：2012-11-17T17:41:51.657
> 
> 标签：asp.net, web

为什么我的复选框语句不起作用？如您所见，我使用了会话（因为我的作业不管有用与否都会忽略）：

```
<form id="ShoppingCart" action="Final.aspx">
<input type="checkbox" runat="server" id="CallOfDutyCheckBox" />
  <%

         if (CallOfDutyCheckBox.Checked)
             Session["Username_CallOfDutyCheckBox_price"] = "5";
          %>
    <input type="submit" value="Buy It"    />

   </form>

<form id="Final">
    <div>
        <%

            Response.Write(Session["Username_CallOfDutyCheckBox_price"]);
             %>
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:51:58.973

你明白当你点击复选框时，服务器上的代码还没有运行吗？单击提交以提交带有复选框值的表单。

# c - 为什么调用 glBindBuffer 时在 atio6axx.dll 中出现访问冲突？

> ID：13433071
> 
> 赞同：2
> 
> 时间：2012-11-17T17:43:15.983
> 
> 标签：c, opengl, dll, amd-processor, pelles-c

## 导致问题：

通过制作我自己设计的（可能很简单）基于图块的游戏来学习使用 C 的 OpenGL。最初我只绘制了大约 10 个左右的三角形进行测试，我设置了缓冲区数据和索引，如下所示：

```
const float vertexPositions[] = {
      -1.0f, -0.8f, //0
      -1.0f, -1.0f, //1

      -0.8f, -0.8f, //2
      -0.8f, -1.0f, //3

      -0.8f, -0.8f, //2
      -0.8f, -1.0f, //3

      -0.6f, -0.8f, //4
      -0.6f, -1.0f, //5

      -0.6f, -0.8f, //4
      -0.6f, -1.0f, //5

      -0.4f, -0.8f, //6
      -0.4f, -1.0f, //7

      -0.4f, -0.8f, //6
      -0.4f, -1.0f, //7

      -0.2f, -0.8f, //8
      -0.2f, -1.0f, //9

      -0.2f, -0.8f, //8
      -0.2f, -1.0f, //9

       0.0f, -0.8f, //10
       0.0f, -1.0f, //11

       0.0f, -0.8f, //10
       0.0f, -1.0f, //11

/////////////////////////////////// Texture coords:
       0.0f,  1.0f, //0
       0.0f,  0.0f, //1

       1.0f,  1.0f, //2
       1.0f,  0.0f, //3

       0.0f,  1.0f, //2
       0.0f,  0.0f, //3

       1.0f,  1.0f, //4
       1.0f,  0.0f, //5

       0.0f,  1.0f, //4
       0.0f,  0.0f, //5

       1.0f,  1.0f, //6
       1.0f,  0.0f, //7

       0.0f,  1.0f, //6
       0.0f,  0.0f, //7

       1.0f,  1.0f, //8
       1.0f,  0.0f, //9

       0.0f,  1.0f, //8
       0.0f,  0.0f, //9

       1.0f,  1.0f, //10
       1.0f,  0.0f, //11

       0.0f,  1.0f, //10
       0.0f,  0.0f, //11

const GLubyte indices[] = {
      0, 1, 2, 
      3, 2, 1,

      4, 5, 6,
      7, 6, 5, 

      8, 9, 10,
      11, 10, 9,

      12, 13, 14,
      15, 14, 13,

      16, 17, 18,
      19, 18, 17,
}; 
```

因为我需要更多的三角形来制作更多的三角形，所以我决定自动化它（而且，这些值以像素为单位，而不是屏幕/视口坐标，因为我打算在我的着色器中使用一些矩阵）：

```
float vertexPositions[6400]; //Declared globally outside the function

int blah()
{
      int count = 0, texture_start;

      for (int y = 0; y < 20; y++)
      {
            for (int x = 0; x < 21; x++)
            {
                  vertexPositions[count++] = x * 32.0f;
                  vertexPositions[count++] = (y + 1) * 32.0f;

                  vertexPositions[count++] = x * 32.0f;                  
                  vertexPositions[count++] = y * 32.0f;

                  if (x > 0 && x < 20)
                  {
                        vertexPositions[count++] = x * 32.0f;
                        vertexPositions[count++] = (y + 1) * 32.0f;

                        vertexPositions[count++] = x * 32.0f;                  
                        vertexPositions[count++] = y * 32.0f;
                  }
            }
      }

      texture_start = count;

      for (int z = 0; z < 400; z++)
      {
                  vertexPositions[count++] = 0.0f;
                  vertexPositions[count++] = 1.0f;

                  vertexPositions[count++] = 0.0f;
                  vertexPositions[count++] = 0.0f;

                  vertexPositions[count++] = 1.0f;
                  vertexPositions[count++] = 1.0f;

                  vertexPositions[count++] = 1.0f;
                  vertexPositions[count++] = 0.0f;
      }

      return 0;
} 
```

请注意，我没有自动化索引，因为我想确保我可以从这些新数据中获得完全相同的三角形。

## 问题：

*我在某些*GL 调用中反复遇到访问冲突。如果我在断点之间手动步进，它总是在到达`glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, positionBufferObject);`.

如果我在这一行上有一个断点*，在*这一行*之后*`GLuint fShader = glCreateShader(GL_FRAGMENT_SHADER);`有一个断点，它会跳过（忽略？静默失败？）中间的行并在到达调用内部时中断`myProgram = CreateProgram();`（这令人惊讶，因为我的顶点着色器是在之前创建的，带有相同的呼叫并且工作正常）。

```
GLvoid InitGL(GLvoid)
{
      blah(); <----where i initialize my vertex data
      FnLdInit();
      GetBitmap();

      //char * glVer = (char *)glGetString(GL_VERSION);
      //char * glSLV = (char *)glGetString(GL_SHADING_LANGUAGE_VERSION);

      glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
      glClearDepth(1.0f);
      glEnable(GL_DEPTH_TEST);
      glDepthFunc(GL_LEQUAL);      ---------------------------//~BREAKPOINT HERE!~

      glGenBuffers(1, &positionBufferObject);
      errort = glGetError();

      glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, positionBufferObject); 
      //errort = glGetError();
      glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(vertexPositions), (const float *)vertexPositions, GL_STATIC_DRAW);
      //errort = glGetError();
      glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
      //errort = glGetError();

      myProgram = CreateProgram();   -------------------------//~BREAKPOINT HERE!~

} 
```

所有 glGetError() 的返回 0，规范说这意味着：没有问题或 glGetError 有自己的错误。

不管它在哪里中断，调用堆栈 pelles C 在它中断时向我显示的是 'atio6axx.dll; DrvPresentBuffers() +163B7B' 它*总是*在这里：

![我的 raaaaaaaage 的来源](../Images/f0461384c6b44f7c2d0da9b7527a3a7e.png)

我最近为我的 Radeon HD 6850 安装了最新的 Catalyst 更新。我找不到关于 GPU/顶点缓冲区对象/等的内存限制的任何信息，而且我怀疑大约 25KB 的数据会破坏任何东西。我觉得这不是 OpenGL 问题，而是我实现代码的方式或我不熟悉的限制/内存问题。

[此站点上的海报#20](http://www.daz3d.com/forums/viewthread/9471/P15/)也有类似的问题，但它似乎与程序故障有关，而不是代码（我认为它发生在最新驱动程序出现之前，即使它是在 10 月 11 日发布的）。`GetBitmap()`使用 glBindTexture 和其他调用没有问题。

[这](https://stackoverflow.com/questions/1834164/access-violation-writing-location)似乎是最明显的，但我从旧算法到新算法的唯一变化是数据创建的自动化。不涉及任何指针，我什至将其转换为 a `const float *`，编译器甚至没有警告我这是必要的。

我是否在错误的地方寻找一个简单问题的解决方案？如果需要，我会尝试解释我的代码/添加更多代码，请问。我真的不想手动写出 ~6400 或更多的值。

**编辑＃1**：经过一些其他测试后，即使使用旧实现，似乎也会出现此错误。我一定有一段时间没有编译它（一直在处理着色器，它们是单独的文件）。我*很*困惑。

**编辑#2**：更多代码。这是在 InitGL 之前发生的唯一函数，也是调用 InitGl 的函数。：

```
bool CreateGLWindow(char* title, int width, int height, int bits, bool fullscreenflag)
{
      GLuint PixelFormat;
      WNDCLASS wc;
      DWORD dwExStyle;
      DWORD dwStyle;

      RECT WindowRect;
      WindowRect.left = (long)0;
      WindowRect.right = (long)width;
      WindowRect.top = (long)0;
      WindowRect.bottom = (long)height;

      fullscreen = fullscreenflag;

      hInstance = GetModuleHandle(NULL);

      wc.style = CS_HREDRAW |CS_VREDRAW | CS_OWNDC;
      wc.lpfnWndProc = (WNDPROC) WndProc;
      wc.cbClsExtra = 0;
      wc.cbWndExtra = 0;
      wc.hInstance = hInstance;
      wc.hIcon = LoadIcon(NULL, IDI_WINLOGO);
      wc.hCursor = LoadCursor(NULL, IDC_ARROW);
      wc.hbrBackground = NULL;
      wc.lpszMenuName = NULL;
      wc.lpszClassName = "OpenGL";

      if (!RegisterClass(&wc))
      {
            MessageBox(NULL, "Failed to register the window class", "Error", MB_OK | MB_ICONEXCLAMATION);

            return FALSE;
      }

      if (fullscreen)
      {
            int changeresult;
            //char msg[100];
            DISPLAY_DEVICE disp;
            DEVMODE dmScreenSettings;
            int dw;

            memset(&disp, 0, sizeof(disp));
            memset(&dmScreenSettings, 0, sizeof(dmScreenSettings));

            disp.cb = sizeof(disp);

            if (!(EnumDisplayDevices(NULL, 0, &disp, 0)))
            {
                  return 1;
            }

            dmScreenSettings.dmSize = sizeof(dmScreenSettings);

            //ENUM_CURRENT_SETTINGS
            if (!(EnumDisplaySettings(disp.DeviceName, ENUM_CURRENT_SETTINGS, &dmScreenSettings)))
            {
                  dw = GetLastError();
            }

            dmScreenSettings.dmPelsWidth = width; //enable this in real
            dmScreenSettings.dmPelsHeight = height; //enable this in real

            changeresult = ChangeDisplaySettings(&dmScreenSettings, CDS_FULLSCREEN);

            //dmScreenSettings.dmPelsWidth = width;
            //dmScreenSettings.dmPelsHeight = height;
            //dmScreenSettings.dmBitsPerPel = bits;
            dmScreenSettings.dmFields = DM_BITSPERPEL | DM_PELSWIDTH | DM_PELSHEIGHT;

            if (changeresult != DISP_CHANGE_SUCCESSFUL)
            {
                  if (MessageBox(NULL, "Use window mode?", "GL", MB_YESNO | MB_ICONEXCLAMATION) == IDYES)
                  {
                        fullscreen = FALSE;
                  }
                  else
                  {
                        return FALSE;
                  }
            }
      }

      if (fullscreen)
      {
            dwExStyle = WS_EX_APPWINDOW;
            dwStyle = WS_POPUP;
            ShowCursor(FALSE);
      }
      else
      {
            dwExStyle = WS_EX_APPWINDOW | WS_EX_WINDOWEDGE;
            dwStyle = WS_OVERLAPPEDWINDOW;
      }

      AdjustWindowRectEx(&WindowRect, dwStyle, FALSE, dwExStyle);

      if(!(hWnd = CreateWindowEx(   dwExStyle,
                                    "OpenGL",
                                    title,
                                    WS_CLIPSIBLINGS | WS_CLIPCHILDREN | dwStyle,
                                    0,
                                    0,
                                    WindowRect.right - WindowRect.left,
                                    WindowRect.bottom - WindowRect.top,
                                    NULL,
                                    NULL,
                                    hInstance,
                                    NULL)))
      {
            KillGLWindow();
            MessageBox(NULL, "Window Creation error", "Error", MB_OK | MB_ICONEXCLAMATION);

            return FALSE;
      }

      static  PIXELFORMATDESCRIPTOR pfd=                  // pfd Tells Windows How We Want Things To Be
      {
          sizeof(PIXELFORMATDESCRIPTOR),                  // Size Of This Pixel Format Descriptor
          1,                              // Version Number
          PFD_DRAW_TO_WINDOW |            // Format Must Support Window
          PFD_SUPPORT_OPENGL |            // Format Must Support OpenGL
          PFD_DOUBLEBUFFER,               // Must Support Double Buffering
          PFD_TYPE_RGBA,                  // Request An RGBA Format
          0,                           // Select Our Color Depth
          0, 0, 0, 0, 0, 0,               // Color Bits Ignored
          0,                              // No Alpha Buffer
          0,                              // Shift Bit Ignored
          0,                              // No Accumulation Buffer
          0, 0, 0, 0,                     // Accumulation Bits Ignored
          16,                             // 16Bit Z-Buffer (Depth Buffer)
          0,                              // No Stencil Buffer
          0,                              // No Auxiliary Buffer
          PFD_MAIN_PLANE,                 // Main Drawing Layer
          0,                              // Reserved
          0, 0, 0                         // Layer Masks Ignored
      };
      pfd.cColorBits = bits;

      if (!(hDC = GetDC(hWnd)))
      {
            KillGLWindow();
            MessageBox(NULL, "Can't create a GL device context", "Error", MB_OK | MB_ICONEXCLAMATION);

            return FALSE;
      }

      if (!(PixelFormat = ChoosePixelFormat(hDC, &pfd)))
      {
            KillGLWindow();
            MessageBox(NULL, "Can't find a suitable pixelformat", "Error", MB_OK | MB_ICONEXCLAMATION);

            return FALSE;
      }

      if (!SetPixelFormat(hDC, PixelFormat, &pfd))
      {
            KillGLWindow();
            MessageBox(NULL, "Can't set the pixel format", "Error", MB_OK | MB_ICONEXCLAMATION);

            return FALSE;
      }

      if (!(hRC = wglCreateContext(hDC)))
      {
            KillGLWindow();
            MessageBox(NULL, "Can't create a GL rendering context", "Error", MB_OK | MB_ICONEXCLAMATION);

            return FALSE;
      }

      if (!wglMakeCurrent(hDC, hRC))
      {
            KillGLWindow();
            MessageBox(NULL, "Can't activate the GL rendering context", "Error", MB_OK | MB_ICONEXCLAMATION);

            return FALSE;
      }

      ShowWindow(hWnd, SW_SHOW);
      SetForegroundWindow(hWnd);
      SetFocus(hWnd);

      InitGL();
      ResizeGLScene(width, height);

      //char * glVer = (char *)glGetString(GL_VERSION);
      //char * glSLV = (char *)glGetString(GL_SHADING_LANGUAGE_VERSION);

      return TRUE;
} 
```

FnLdInit 是我连接所有扩展的地方：

```
void FnLdInit(void)
{
      HINSTANCE hGLLIB = NULL;
      hGLLIB = LoadLibrary("opengl32.dll");

      glActiveTexture                     = (PFNGLACTIVETEXTUREPROC)wglGetProcAddress("glActiveTexture");
      glAttachShader                      = (PFNGLATTACHSHADERPROC)wglGetProcAddress("glAttachShader");
      glBindBuffer                        = (PFNGLBINDBUFFERPROC)wglGetProcAddress("glBindBuffer");
      glBufferData                        = (PFNGLBUFFERDATAPROC)wglGetProcAddress("glBufferData");
      glCompileShader                     = (PFNGLCOMPILESHADERPROC)wglGetProcAddress("glCompileShader");
      glCreateProgram                     = (PFNGLCREATEPROGRAMPROC)wglGetProcAddress("glCreateProgram");
      glCreateShader                      = (PFNGLCREATESHADERPROC)wglGetProcAddress("glCreateShader");
      glDeleteShader                      = (PFNGLDELETESHADERPROC)wglGetProcAddress("glDeleteShader");
      glDetachShader                      = (PFNGLDETACHSHADERPROC)wglGetProcAddress("glDetachShader");
      glDisableVertexAttribArray          = (PFNGLDISABLEVERTEXATTRIBARRAYPROC)wglGetProcAddress("glDisableVertexAttribArray");
      glEnableVertexAttribArray           = (PFNGLENABLEVERTEXATTRIBARRAYPROC)wglGetProcAddress("glEnableVertexAttribArray");
      glGenBuffers                        = (PFNGLGENBUFFERSPROC)wglGetProcAddress("glGenBuffers");
      glGetShaderInfoLog                  = (PFNGLGETSHADERINFOLOGPROC)wglGetProcAddress("glGetShaderInfoLog");
      glGetShaderiv                       = (PFNGLGETSHADERIVPROC)wglGetProcAddress("glGetShaderiv");
      glGetUniformfv                      = (PFNGLGETUNIFORMFVPROC)wglGetProcAddress("glGetUniformfv");
      glGetUniformLocation                = (PFNGLGETUNIFORMLOCATIONPROC)wglGetProcAddress("glGetUniformLocation");
      glLinkProgram                       = (PFNGLLINKPROGRAMPROC)wglGetProcAddress("glLinkProgram");
      glShaderSource                      = (PFNGLSHADERSOURCEPROC)wglGetProcAddress("glShaderSource");
      glUniform1i                         = (PFNGLUNIFORM1IPROC)wglGetProcAddress("glUniform1i");
      glUniform2f                         = (PFNGLUNIFORM2FPROC)wglGetProcAddress("glUniform2f");
      glUseProgram                        = (PFNGLUSEPROGRAMPROC)wglGetProcAddress("glUseProgram");
      glVertexAttribPointer               = (PFNGLVERTEXATTRIBPOINTERPROC)wglGetProcAddress("glVertexAttribPointer");

      glBindTexture           = (PFNGLBINDTEXTUREPROC)GetProcAddress(hGLLIB, "glBindTexture");
      glClear                 = (PFNGLCLEARPROC)GetProcAddress(hGLLIB, "glClear");
      glClearColor            = (PFNGLCLEARCOLORPROC)GetProcAddress(hGLLIB, "glClearColor");
      glClearDepth            = (PFNGLCLEARDEPTHPROC)GetProcAddress(hGLLIB, "glClearDepth");
      glDepthFunc             = (PFNGLDEPTHFUNCPROC)GetProcAddress(hGLLIB, "glDepthFunc");
      glDrawArrays            = (PFNGLDRAWARRAYSPROC)GetProcAddress(hGLLIB, "glDrawArrays");
      glEnable                = (PFNGLENABLEPROC)GetProcAddress(hGLLIB, "glEnable");
      glGenTextures           = (PFNGLGENTEXTURESPROC)GetProcAddress(hGLLIB, "glGenTextures");
      glTexImage2D            = (PFNGLTEXIMAGE2DPROC)GetProcAddress(hGLLIB, "glTexImage2D");
      glTexParameteri         = (PFNGLTEXPARAMETERIPROC)GetProcAddress(hGLLIB, "glTexParameteri");
      glViewport              = (PFNGLVIEWPORTPROC)GetProcAddress(hGLLIB, "glViewport");
      glDrawElements          = (PFNGLDRAWELEMENTSPROC)GetProcAddress(hGLLIB, "glDrawElements");
      glGetError              = (PFNGLGETERRORPROC)GetProcAddress(hGLLIB, "glGetError");
      glGetString             = (PFNGLGETSTRINGPROC)GetProcAddress(hGLLIB, "glGetString");
} 
```

这是 GetBitmap()：

```
int GetBitmap(void)
{
      char        * bmBuffer, * pxPtr;
      FILE        * bmFile;
      //FILE * result;
      GLuint      texture;

      int         bmSize, 
                  dataOffset, 
                  dibSize, 
                  bmWidthPx, 
                  bmHeightPx,
                  bmCompression,
                  dataSize,
                  dataHorRes,
                  dataVerRes,
                  paletteNumClrs,
                  importantClrs,

                  bmBytesPerPixel = 3, //Default -> RGB

                  totalBytesPerRow,
                  pixelBytesPerRow,
                  padCount = 0;

      short int   bmClrPlane, bmBPP;
      char        bmChar0, bmChar1;
      //char msgData[100];

      bmFile = fopen("multisquare.bmp", "rb");
      if (bmFile == NULL)
      {
            return 1;
      }

      bmChar0 = fgetc(bmFile);
      bmChar1 = fgetc(bmFile);
      if (bmChar0 != 'B' || bmChar1 != 'M')
      {
            return 2;
      }

      //sprintf(msgData, "%c%c", bmChar0, bmChar1);
      //MessageBox(NULL, msgData, NULL, MB_OK | MB_ICONINFORMATION);

      bmSize = Get4Bytes(bmFile);

      //Skip 4 bytes. These bytes are application specific,
      //and generally unused.
      if (fseek(bmFile, 4, SEEK_CUR) != 0)
      {
            return 3;
      }

      dataOffset = Get4Bytes(bmFile);

      dibSize = Get4Bytes(bmFile);

      //Replace 'if dibSize' check with case statement
      //which branches to functions for different sized 
      //DIBHeaders.
      //
      //
      if (dibSize != 40)
      {
            return 4;
      }

      bmWidthPx = Get4Bytes(bmFile);
      bmHeightPx = Get4Bytes(bmFile); //Later -> handle negative = top->bottom.

      bmClrPlane = Get2Bytes(bmFile); //Must always be 1 anyways, consider removing this and skipping 2 bytes.
      bmBPP = Get2Bytes(bmFile);

      if (bmBPP == 24)
      {
            bmBytesPerPixel = 3;
      }

      bmCompression = Get4Bytes(bmFile);
      //Handle other compressions at some later time.
      if (bmCompression != 0)
      {
            return 5;
      }

      //Can use this to allocate appropriate memory space.
      dataSize = Get4Bytes(bmFile);

      //Resolutions doesn't seem too important atm.
      dataHorRes = Get4Bytes(bmFile);
      dataVerRes = Get4Bytes(bmFile);

      //Will probably both be 0\. Irrelevant atm.
      paletteNumClrs = Get4Bytes(bmFile);
      importantClrs = Get4Bytes(bmFile);

      bmBuffer = (char *) calloc(dataSize, sizeof(char)); //Space allocated.

      fseek(bmFile, dataOffset, SEEK_SET);

      //Ex: 10 pixels * 3 bytes/pixel = 30 bytes
      //    30 + 3 = 33 -> 0010 0001
      //    Right shift 2: 0000 1000  -> These operations round to nearest
      //    Shift left 2:  0010 0000  -> multiple of 4.
      //    32 bytes to reach 4byte multiple
      //    So 30 bytes for 10 pixles plus 2 extra bytes of padding, per row.
      pixelBytesPerRow = bmWidthPx * bmBytesPerPixel;
      totalBytesPerRow = ((pixelBytesPerRow + bmBytesPerPixel) >> 2) << 2;
      padCount = totalBytesPerRow - pixelBytesPerRow;

      pxPtr = bmBuffer;

      switch(padCount)
      {
            case 0:
            {
                  for (int A = 0; A <= bmHeightPx; A++)
                  {
                        /*
                        for (int B = 0; B <= bmWidthPx; B++)
                        {

                              *(pxPtr + 2) = fgetc(bmFile);
                              *(pxPtr + 1) = fgetc(bmFile);
                              *pxPtr       = fgetc(bmFile);

                        }
                        */
                        fread(pxPtr, 1, pixelBytesPerRow, bmFile);
                        pxPtr += totalBytesPerRow;
                  }

                  break;
            }
            case 1:
            case 2:
            case 3:
            {
                  for (int A = 0; A <= bmHeightPx; A++)
                  {
                        /*
                        for (int B = 0; B <= bmWidthPx; B++)
                        {

                              *(pxPtr + 2) = fgetc(bmFile);
                              *(pxPtr + 1) = fgetc(bmFile);
                              *pxPtr       = fgetc(bmFile);

                        }
                        */
                        fread(pxPtr, 1, pixelBytesPerRow, bmFile);

                        if (fseek(bmFile, padCount, SEEK_CUR) != 0)
                        {
                              return 3;
                        }

                        pxPtr += totalBytesPerRow;

                  }

                  break;
            }
            default:
            //Shouldn't get here
            break;
      }
      //result = fopen("test.txt","w");
      //fwrite(bmBuffer, 1, dataSize , result);
      //fclose(result);
      fclose(bmFile);

      glActiveTexture(GL_TEXTURE0);
      glGenTextures(1, &texture);
      glBindTexture(GL_TEXTURE_2D, texture);

      glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
      glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

      glTexImage2D(GL_TEXTURE_2D,   /*Type of texture*/
                   0,               /*Level of Detail number*/
                   GL_RGB,          /*Internal format*/
                   bmWidthPx,       /*Width in texels(pixels?)*/
                   bmHeightPx,      /*Height in texels(pixels?)*/
                   0,               /*Border. Must be 0 (probably only for 2D)*/
                   GL_BGR,          /*Format, of the data the texture will be created from*/
                   GL_UNSIGNED_BYTE,/*Data type of the pixel data*/
                   bmBuffer);       /*Pointer to the image data to create the texture from*/

      //glBindTexture(GL_TEXTURE_2D, 0);

      free(bmBuffer);

      return 0;
} 
```

**编辑#3**：未安装的 Catalyst 12.10 和所有相关驱动程序。重新安装12.8。同样的问题，但现在它发生在 GenBuffers 上。奇怪的。

**编辑#4**：我尝试将我的项目制作为 32 位，并对其进行编译。我遇到了完全相同的问题，尽管出于某种原因，Pelles C 没有标记 LIB（它只是在提到一个时说“无标题”）所以我只能假设 AMD 提供的 32 位库也失败了（作为 atio6axx.dll/. lib 未加载）。我觉得这个问题不会有任何真正的解决方案，因为它似乎源于驱动程序，而不是我的代码。在搜索并看到类似[这样](http://www.townswiki.com/wiki/Known_Issues_and_Workarounds#ATI_Driver_Issue)的相关问题之后，似乎并没有真正的客户端解决方案。

**编辑#5**：另一个我之前没有注意到的问题，因为程序在这一点上从来没有给我访问冲突，是代码将到达`glActiveTexture(GL_TEXTURE0);`并突然跳过后面的所有行并退出函数。通过删除此行，将执行下一行。`glActiveTexture(GL_TEXTURE0);`is from`atio6axx.dll`而所有其他命令都是 from `OPENGL32.dll`，所以它似乎已经缩小了范围。奇怪的是此时没有访问冲突，只是奇怪的跳过。

我想没有人能看到发生这种情况的原因吗？我什至安装了*beta* Catalyst 驱动程序，它的 atio6axx.dll 版本的日期为 15\11\2012（上个星期四）。因此，最新的驱动程序不是问题。我什至尝试了自 Catalyst 12.4 以来的每个驱动程序版本（当前是 12.10，这个程序运行 12.8）。不知所措，甚至一个新程序也遇到了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:58:36.697

顶点位置的代码看起来不错，并且似乎没有写到数组边界之外。您看到的访问冲突可能是由 r11 无效引起的。OpenGL 驱动程序代码通常是多线程的，因此您可能只在工作线程尝试访问该坏缓冲区时看到该错误。这可能是您在故障发生地看到的奇怪行为的原因。

确保在 GPU 完成之前没有释放缓冲区，传递正确的大小等。

恐怕您必须粘贴更多代码才能让我们进一步为您提供帮助。

也为我们提供 r11 的值可能会有所帮助。

# c++ - Vector 类（数组）上的迭代器

> ID：13433075
> 
> 赞同：0
> 
> 时间：2012-11-17T17:43:49.477
> 
> 标签：c++, static-libraries

集合类中的这些迭代器让我感到困惑。我得到了一个带有字符串键的 Map，值是一个 Vector 类（类似于数组）。据我了解，我的迭代器变量`it`已分配给地图。所以我应该能够获取它的值并将其分配给一个新的 Vector 类，这样我就可以读取它的内容或知道它的大小等......但是我该怎么做呢？

```
for (Map<string, Vector<string> > :: iterator it = array0.begin();
                                         it != array0.end(); it++)
{
    Vector<string> arr = it; // Error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:47:47.160

假设您的 Map 是 std::map，则 map 的元素是 (key,value) 对，因此 value 是该对的第二个元素：

```
Vector<string> arr = it->second; 
```

# android - 如何仅针对某些选定字符限制Android编辑文本字段

> ID：13433077
> 
> 赞同：7
> 
> 时间：2012-11-17T17:44:05.887
> 
> 标签：android, android-layout

有没有办法限制用户只允许在 Android layout.xml 中键入一些选定的字符集（例如：A 或 B 或 C 或 D）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T17:45:49.567

使用该属性， EditText 中只允许[`digits`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adigits)传递给的字符。`digits`

```
android:digits="abc123" 
```

是的，“数字”是一个误导性的名称，它也接受字母和符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:32:25.803

您可以使用以下`inputType`属性：

```
 <EditText android:id="@+id/edit_text_id"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:inputType="number" /> 
```

`android:inputType`编辑文本中属性的可能值为：`none, text, textCapCharacters, textCapWords, textCapSentences, textAutoCorrect, textAutoComplete, textMultiLine, textImeMultiLine, textNoSuggestions, textUri, textEmailAddress, textEmailSubject, textShortMessage, textLongMessage, textPersonName, textPostalAddress, textPassword, textVisiblePassword, textWebEditText, textFilter, textPhonetic, textWebEmailAddress, textWebPassword, number, numberSigned, numberDecimal, numberPassword, phone, datetime, date, time`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T06:00:19.880

这`android:digit`将只允许在 EditText 中填写您想要的数字和字母。

```
<EditText 
      android:inputType="text" 
      android:digits="0123456789*qwertzuiopasdfghjklyxcvbnm,_,-" 
      android:hint="Only letters, digits, _ and - allowed"
    /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-22T04:31:32.610

您可以像这样设置您的 EditText 字段...

```
<EditText 
  android:inputType="text" 
  android:digits="THE SELECTED CHARACTERS THAT USERS ARE ALLOWED TO TYPE" 
/> 
```

通过列出允许用户在 android:digits 中键入的选定字符（A、B、C 和 D），您限制了用户可以键入的可能字符。这是我通过搜索学到的最简单的方法。

# java - GSON 解析错误：预期为 BEGIN_OBJECT，但响应值为空时为 STRING

> ID：13433078
> 
> 赞同：0
> 
> 时间：2012-11-17T17:44:11.217
> 
> 标签：java, android, json

我已经搜索了许多类似的问题“预期 BEGIN_OBJECT 但为 STRING”，但对我没有任何帮助。
这是我的json字符串：

```
{
"result": "true",
"data": [{
    "from": {
        "user_id": "user1",
        "name": "user1",
        "avatar": "http://zzzzzz.jpg"
    },
    "request_id": "user1:user2"
},
{
    "from": "null",
    "request_id": "user1:user3"
}]
} 
```

这是我的映射实体：

```
 public class GetFriendResponse {
    public boolean result;
    public List<FriendRequest> data;
  } 

  public class FriendRequest {
     public String request_id;
     public UserInfo from;
  }

  public class UserInfo {
    public String user_id;
    public String name;
    public String avatar;
 } 
```

我像这样解析json：

```
 Gson gson = new Gson();
 GetFriendResponse  response = gson.fromJson(jsonString,GetFriendResponse.class); 
```

我检查并看到问题是当结果包含时`"from": "null"`，它会给出错误。
有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:53:02.667

您应该让网络服务返回 null 或 {}，而不是“null”。

# ember.js - 将 CSS 样式应用于 ember.js 车把模板

> ID：13433082
> 
> 赞同：0
> 
> 时间：2012-11-17T17:44:39.750
> 
> 标签：ember.js, handlebars.js

我正在尝试创建一个简单的 Ember.js 应用程序来了解有关 JavaScript MVC 框架的更多信息。但是，似乎不可能将 CSS 样式应用于视图模板（或者更确切地说，我不知道执行此操作的正确方法）：

**无模板**

```
<span class="myClass">
Some value
</span> 
```

在这种情况下，样式按预期正确显示。

**带模板**

```
<span class="myClass">
<script type="text/x-handlebars>
{{MyApp.someVariable}}
</script>
</span> 
```

在这种情况下，该样式似乎根本没有应用。

我什至尝试过类似的东西：

```
<script type="text/x-handlebars>
{{MyApp.someVariable classToAdd="myClass"}}
</script> 
```

这会产生更奇怪的输出（我什至无法在 Chrome 开发人员元素选项卡中找到该元素）。

在线教程没有提到这个问题，我已经尝试研究其他 Stackoverflow 问题（有一些关于应用样式的问题，但在这种情况下并不完全一样）。任何人都可以告诉我我做的不对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:43:48.603

我通常使用 Ember 视图的 ClassNames 和 classNameBindings 属性。大部分时间都能完成工作。

您也可以尝试使用 Ember 布局属性来包装模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T03:57:58.407

在 jquery 的 append() 文档中找到了这个问题的答案 您需要使用 jQuery 将文本转换为 html：

```
template = Handlebars.compile(..);
html = template(json);
$('body').append($(html)); // <- don't forget to wrap it 
```

# sql - 如何在使用 qt 对 mssql db 的查询中将变量用作 int？

> ID：13433083
> 
> 赞同：0
> 
> 时间：2012-11-17T17:44:41.463
> 
> 标签：sql, qt, qtsql

我已经构建了一个我正在尝试制作的快速应用程序，以了解如何将动态配件或类别选项列表实现到产品列表（IE 品牌、型号、年份搜索）。我以为我找到了一种简单的方法来做到这一点，但我发现它比我想象的要难。我已经动态地制作了配件选项所需的组合框，但我不知道如何获取配件组的 ID 并将其作为“where 子句”的一部分在新查询中使用。在 qt 中使用变量作为对 mssql 数据库的查询中的 int 的最佳方法是什么？

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

#include <QtCore>
#include <QtGui>
#include <QtSql>

MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
ui->setupUi(this);
QSqlDatabase db = QSqlDatabase::addDatabase("QODBC");
db.setHostName("ROBERT-PC");
db.setDatabaseName("mydsn32");

if(!db.open())
{
    qDebug() << "Could Not Open";
}
else
{
    QVBoxLayout *vbox = new QVBoxLayout();

    qDebug() << "Open, and now closing";
    QSqlQuery qry;

    if(qry.exec("SELECT * FROM [BOBs].[dbo].[FitmentTagGroup]"))
    {
        qDebug() << "Query Was Opened";
        while(qry.next())
        {
            QString combBoxName = qry.value(1).toString() + "CombBox";
            int combBoxID = qry.value(0).toInt();
            QLabel *combBoxNameLbl = new QLabel();
            combBoxNameLbl->setText(combBoxName);
            QComboBox *combBox = new QComboBox();
            QSqlQuery qry2;
            if(qry2.exec("SELECT * FROM [BOBs].[dbo].[FitmentTag] WHERE FitmentTagGroupID='1'"))
            {
                while(qry2.next())
                {
                    qDebug() << qry2.value(2).toString();
                }
            }
            else
            {
                qDebug() << "Query Could Not Open\n\t" << qry2.lastError();
            }
            vbox->addWidget(combBoxNameLbl);
            vbox->addWidget(combBox);
        }
    }
    else
    {
       qDebug() << "Query Could Not Open\n\t" << qry.lastError();
    }

    model = new QSqlQueryModel();

    db.close();

    QFrame *mainFrame = new QFrame();
    mainFrame->setLayout(vbox);
    setCentralWidget(mainFrame);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:01:17.553

您应该使用准备好的语句和绑定值来解决您的问题。

而不是使用

```
qry2.exec(
   "SELECT * "
   "FROM [BOBs].[dbo].[FitmentTag] "
   "WHERE FitmentTagGroupID = '1' "
); 
```

你应该使用这样的东西：

```
qry2.prepare(
   "SELECT * "
   "FROM [BOBs].[dbo].[FitmentTag] "
   "WHERE FitmentTagGroupID = :groupid "
);
qry2.bindValue(":groupid", groupId);
qty2.exec(); 
```

[在这里](http://doc.qt.digia.com/qt/qsqlquery.html#approaches-to-binding-values)阅读更多。

# php - 将表转换为关系表

> ID：13433087
> 
> 赞同：0
> 
> 时间：2012-11-17T17:45:16.020
> 
> 标签：php, mysql, algorithm

在我的 MySQL 表中，我有一个简单的邮政编码表，它是从 .xlsx 文件转换而来的。

```
Country   |City    |MiniDistrict |Postal Code
---------------------------------------------
Bulgaria  |Sofia   |Oborishte    | 0844
Bulgaria  |Sofia   |Sredets      | 0988
Bulgaria  |Plovdiv |Montana      | 1299
Bulgaria  |Plovdiv |Dyavol       | 1288
Bulgaria  |Varna   |Andeevo      | 1574
France    |Paris   |Mantois      |38992
France    |Paris   |Valois       |38764
France    |Gard    |Lussan       |55980 
```

如您所见，国家和城市名称重复了无数次。另请注意，不同国家/地区的城市名称相同。我想编写一个 PHP 算法，在其中我将在 MySQL 中生成一个**country 表**、一个**city 表**和一个**minidistrict-postalcode 表**。国家表很简单，`SELECT DISTINCT`. 我应该为其他表写什么算法？算法的想法对我来说就足够了，不需要编码部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:48:22.040

尝试类似的东西

table_Country

```
Country_id | country_name
  1        |   Bulgaria  
  2        |   France 
```

table_City

```
City_id | Country_id | City_name 
   1    |  1         |   Sofia   
   2    |  1         |   Plovdiv 
   3    |  1         |   Andeevo   
   4    |  2         |   Paris   
   5    |  3         |   Gard 
```

table_MiniDistrict

```
MiniDistrict_id | City_id | MiniDistrict_Postal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:51:52.013

您不需要 PHP 来填充您的新表。

这是一个例子：

1.  创建具有自动增量 ID 和名称字段的表
2.  使用填充表

    INSERT INTO country_name (name) (SELECT DISTINCT country FROM your_current_table)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T17:59:13.723

“算法”是这样的：你注意到每个 MiniDistrict 都有一个 PostalCode，每个 PostalCode 都有它的 MiniDistrict。所以你把它们放在一个表中，并将每一对与一个唯一的 ID 相关联。

```
CREATE TABLE district_postalcode
(
    id integer not null primary key auto_increment,
    minidistrict varchar(???),
    postalcode char(5)
); 
```

然后您会注意到每个城市都是一个对象，国家/地区也是如此，因此您为它们创建了两个表，每个表都有自己的 ID。

现在，您必须存储 minidistricts 和 city 之间的关系。但这是多对一的关系：多个小区可能属于同一个城市，但同一个小区不能属于两个城市。

因此，您将引用添加为 minidistricts`cities.id`的外键。`city_id`

城市和国家之间的关系结构是相同的。所以你再次添加一个外键，这次`country_id`是`countries.id`into `cities`。

此时，您还可以`VIEW`像以前一样创建一个来查看您的数据：

```
CREATE VIEW old_style AS SELECT
    countries.Country,
    cities.City,
    districts.MiniDistrict,
    districts.PostalCode
FROM districts
    JOIN cities ON (cities.id = districts.city_id)
    JOIN countries ON (country.id = cities.country_id); 
```

您还可以从没有外键的表开始填充您的新数据和`districts`现有数据：`cities``countries`

```
INSERT INTO countries ( Country ) SELECT DISTINCT Country FROM old_table;

INSERT INTO cities ( City, country_id )
    SELECT DISTINCT City, Country.id
    FROM old_table
    JOIN countries ON ( old_table.Country = countries.Country ); 
```

（如果一个城市在两个国家存在相同的名称，这将插入两次 - 每个国家 ID 一个 - 但这应该是：城市名称通常不是唯一的）。

# matlab - MATLAB中具有不同长度的向量索引的所有组合

> ID：13433088
> 
> 赞同：3
> 
> 时间：2012-11-17T17:45:18.773
> 
> 标签：matlab, combinations

我有一个一维元胞数组 Z。Z 的每个元胞都包含一个向量。例如：

```
Z{1} = [1 2];
Z{2} = [3 4 5];
Z{3} = [6];
...
Z{length(Z)} = [10 11 12 13]; 
```

这些向量的大小都是不同的。我想要做的是将所有可能组合的函数值的总和与每个 Z{i} 中的一个元素进行比较。那就是我想比较以下所有组合：

```
func(1) + func(3) + func(6) + ...
func(1) + func(4) + func(6) + ...
func(1) + func(5) + func(6) + ...
func(2) + func(3) + func(6) + ...
func(2) + func(4) + func(6) + ...
func(2) + func(5) + func(6) + ...
...
... 
```

我想知道哪种组合产生的最大值。

我怎样才能聪明地做到这一点？越聪明越好。但我也在寻找任何工作代码。问题规模会很小。

注意：本例中使用的实际值，1、2、3、4、5、6、...只是示例。他们没有任何特定的模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:55:50.777

*考虑以下解决方案，它有一个循环，但它会按时间线性*而不是*指数*地执行您想要的操作。

迭代地，该算法在所有行中运行，在行`Z`的条目中生成*所有可能的路径*`Z{i}`。尽管如此，每个条目只解析*一次*，因此可以节省复杂性。

```
 N = 3;

 Z = cell(1,N);

 Z{1} = [1 2];
 Z{2} = [3 4 5];
 Z{3} = [6];

 f = @(x) x.^2;  %% Test function

disp('init')
res = arrayfun(f,(Z{1}))     %% Init step. Image of Z{1}
for i = 2 : N
   disp(i)      %% just to have an idea of where you are in the process
   disp(res)

   t = bsxfun(@plus,res,arrayfun(f,(Z{i}))')  %In a tensor way you build all
                                              %the possible sum of the res and f(Z{i})
                                              %making all paths.
   res = reshape(t,1,[])                      %You put the tensor sum on a single
                                              %row to be able to iterate.  
   disp('END step-------')
end 
```

用正方形测试

```
res =

46    53    62    49    56    65 
```

例如`46 = 1^2 + 3^2 + 6^2`，`49 = 2^2 + 3^2 + 6^2`...

到目前为止，我不确定您是否可以完全避免循环。我在这里所做的是*动态*构建解决方案，在每次迭代中添加一个单元格元素。

*张量*求和技术（`t = bsxfun(@plus,res,arrayfun(f,(Z{i}))')`）来自[this answer](https://stackoverflow.com/a/13422675/1714661)。

# javascript - 为什么我的函数没有定义？

> ID：13433095
> 
> 赞同：0
> 
> 时间：2012-11-17T17:45:58.553
> 
> 标签：javascript

这怎么会返回错误？在我的头标签...

```
var movieArray = [
["Everything is Illuminated", "0", ""],
["The Girl Who Leapt Through Time (Toki wo kakeru shojo)", "1", "<ol><li><span class=\"bold quote_actor\">Kosuke Yoshiyama: </span><span class=\"line\">It&#039;s not that rare. Many girls do it at your age.</span></li>                                                </ol>"],
["Freedom Writers", "0", ""],
["Inside Man", "0", ""]
];

function checkAnswer(this.value) {
    if (this.value == 0) {
        alert ("Wrong answer!");
    } else {
        alert ("Correct Answer!");
    }

} 
```

在身体里...

```
<p><a id="0" class="btn btn-primary btn-large" value="0" onclick="checkAnswer(this.value)">Everything is Illuminated</a></p>
<p><a id="1" class="btn btn-primary btn-large" value="1" onclick="checkAnswer(this.value)">The Girl Who Leapt Through Time (Toki wo kakeru shojo)</a></p> 
```

错误是未定义 checkAnswer()。怎么会？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:49:18.213

您忘记`"`通过添加反斜杠来逃避数组元素

```
var movieArray = [
    ["Everything is Illuminated", "0", ""],
    ["The Girl Who Leapt Through Time (Toki wo kakeru shojo)", "1", "<ol><li><span class=\"bold quote_actor\">Kosuke Yoshiyama: </span><span class=\"line\">It&#039;s not that rare. Many girls do it at your age.</span></li>                                                </ol>"],
    ["Freedom Writers", "0", ""],
    ["Inside Man", "0", ""]
    ];

function checkAnswer(arg1) {
    if (arg1 == 0) {
        alert("Wrong answer!");
    } else {
        alert("Correct Answer!");
    }

}​ 
```

其次`this.value`应该在调用 checkAnswer() 时传递，而不是在定义时传递

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T17:53:24.943

每个人是如何错过`this.value`论据列表中的？它应该是一个标识符，例如`myvalue`. 这就是为什么`checkAnswer`没有定义的原因。

现在，至于其余代码，您不能`this`在`checkAnswer`函数中使用，因为它将引用全局对象，而不是链接。此外，链接不支持该`value`属性，因此您需要使用`getAttribute`或直接将值放入`onClick`事件中。

```
function checkAnswer(myval) {
    if (myval == 0) {
        alert ("Wrong answer!");
    } else {
        alert ("Correct Answer!");
    }
}

<p><a class="btn btn-primary btn-large" onclick="checkAnswer(0)">Everything is Illuminated</a></p>
<p><a class="btn btn-primary btn-large" onclick="checkAnswer(1)">The Girl Who Leapt Through Time (Toki wo kakeru shojo)</a></p> 
```

我还删除了`id`属性，因为以数字开头的 ID 在 HTML5 中无效（即使这样，由于旧浏览器仍在广泛使用，它们也不是一个好主意，即使没有它们也毫无意义）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:54:42.110

函数语法错误。

错误 ：

```
function checkAnswer(this.value) { 
```

函数语法必须是`functionName(formalParameterName)`. 您在函数参数中传递对象中的值，这将导致错误。您必须将其更改为`function checkAnswer(param)`.

# html - iOS 5 上的音频元素不播放

> ID：13433098
> 
> 赞同：0
> 
> 时间：2012-11-17T17:46:16.930
> 
> 标签：html, ios5, audio, mobile-safari

我正在尝试播放 MP3 或 Ogg 文件，我创建了自动元素（不将其附加到 DOM）

```
var $audio = $('<audio>', {preload: 'auto'}),
audio = $audio.get(0)

audio.src = "url/of/ogg/mp3 file"

audio.play() 
```

音频不在 iPad 上播放（但它在桌面上播放）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:02:22.457

如果它与视频的问题相同，并且我强烈认为是这样：

问题是，在移动 iOS 设备上，史蒂夫乔布斯希望你在加载视频或音频文件之前按下播放。这可以阻止孩子在未经他们明确许可的情况下在手机上加载巨大的视频。

这是苹果的商业决策。目前没有社区知道的解决方法。

找到另一个 SO 来源： [重复问题](https://stackoverflow.com/questions/3009888/autoplay-audio-files-on-an-ipad-with-html5)

# c# - 将会话转换为对象

> ID：13433099
> 
> 赞同：2
> 
> 时间：2012-11-17T17:46:17.520
> 
> 标签：c#, session, telerik

我正在为会话分配一个 RadTreeNode 对象（我从调试器检查该会话不为空）。然后我尝试使用以下代码将其转换回 RadTreeNode 对象。

```
 RadTreeNode node = new RadTreeNode();
      node =  (RadTreeNode)Session["nextNode"] as RadTreeNode; 
```

但是节点变量仍然为空。有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:37:27.570

Session["nextNode"] 很有可能为空，正如@Richard 在他的评论中所逃避的那样。

如果源对象未转换为目标类型，则“as”强制`as RadTreeNode`转换将产生空值。前缀转换`(RadTreeNode)`以引用类型为目标，并且在转换失败时不会抛出异常`as RadTreeNode`。

您正在向 RadTreeNode 投射一个空值，并且得到了应有的结果……RadTreeNode 的空引用。

会话通常很糟糕，应尽可能避免。我的猜测是您期望 Session 以一种方式行事，而事实并非如此。

例如，是否可`RadTreeNode`序列化？已经有一段时间了，所以我不记得 Session 是如何处理序列化/反序列化对象的，但我猜它会吃掉与序列化相关的任何异常。诚然是猜测。

# assembly - NASM - 选择排序实现不起作用

> ID：13433106
> 
> 赞同：0
> 
> 时间：2012-11-17T17:47:25.200
> 
> 标签：assembly, nasm, i386

分段错误的问题已经解决，但是仍然存在错误算法本身的问题，它正确地对数字进行排序，但将一些最大的数字放在文件的顶部。例如数字：

```
600196455
1215535209
1560271953
1491899466
2093817641
3618330810
 519782898
3779504611
1656881276
 670566484

```

排序后变为：

```
3618330810
3779504611
 519782898
 600196455
 670566484
1215535209
1491899466
1560271953
1656881276
2093817641

```

* * *

**OLD** 我正在尝试实现一个汇编程序来从文件中读取**32 位**数字（最多 32768 个数字），使用选择排序对它们进行排序并将它们保存到指定的文件中。到目前为止，我已经成功编写了读取和写入数据的部分，但是我的排序算法中有一个错误，导致了分段错误。

我正在使用 32 位 Fedora，**i386**处理器，**NASM**汇编器。

谢谢

我的代码如下所示

```
section .text
global _start

_start:
    ; read from input
    mov eax, 3
    mov ebx, 0
    mov ecx, array
    mov edx, 4*32768
    int 80h

    mov [fileLength], eax
    shr eax, 2
    mov [numbersCount], eax
    mov [numbersCount1], eax
    dec dword [numbersCount1]

    ; sort
    mov ebp, array
    xor ecx, ecx
    for1:
            mov dword [min], ecx
            xor edx, edx
            mov edx, ecx
            inc edx
            for2:
                    xor esi, esi
                    mov esi, dword [min]
                    mov eax, dword [ebp+4*edx]
                    mov ebx, dword [ebp+4*esi]
                    cmp eax, ebx
                    jge if1
                    mov dword [min], edx
                    if1:
                            inc edx
                            cmp edx, [numbersCount]
                            jl for2
                    xor ebx, ebx
                    xor edx, edx
                    mov ebx, dword [min]

                    mov eax, dword [ebp+4*ebx]
                    mov edx, dword [ebp+4*ecx]
                    mov dword [ebp+4*ebx], edx
                    mov dword [ebp+4*ecx], eax

                    inc ecx
                    cmp ecx, [numbersCount1]
                    jl for1
                    ret
    ; write to output
    mov eax, 4
    mov ebx, 1
    mov ecx, array
    mov edx, [fileLength]
    int 80h

    ; exit to linux
    mov     eax,1
    mov     ebx,0
    int     80h

; initialized data section
; use directives DB (byte), DW (word), DD (doubleword), DQ (quadword)
section .data

; uninitialized data section
; use directives RESB (byte), RESW (word), RESD (doubleword), RESQ (quadword)
section .bss
    fileLength resd 1
    numbersCount resd 1
    numbersCount1 resd 1
    min resd 1
    array resd 32768
    item resd 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T13:31:30.433

你用`ret`没用过`call`。`call`用于将当前位置压入堆栈。`ret`基本上只是回到堆栈顶部的东西，因为没有调用，堆栈的顶部是你最后放的东西，所以它会跳转到一个奇怪的位置，我认为你的操作系统是合理的，在程序造成任何损害之前，它会出现段错误。

# jquery - 在主容器中制作缩略图动画

> ID：13433109
> 
> 赞同：1
> 
> 时间：2012-11-17T17:47:38.057
> 
> 标签：jquery

容器中没有元素，但侧面有缩略图。当您单击缩略图时，相应的幻灯片应以动画方式填充主容器。

html:

```
<div id="main_container">
    <div id="img_container">
        <div class="img_main"></div>
        <div class="img_main"></div>
        <div class="img_main"></div>
</div>
</div> 
```

jQuery：​​​​</p>

```
$(".img_main").click(function() {
$(this).css("position",'absolute').transition({
    top: '0px',
});

});​ 
```

输出显示在这个[小提琴中](http://jsfiddle.net/BFdNB/1/)

单击灰色框时，它应该从底部容器中出来并填充主容器。

我也在使用插件 jquery.transit。

我正在尝试类似于此示例的内容： http: [//sokra.github.com/jmpress.js/examples/tab-control/](http://sokra.github.com/jmpress.js/examples/tab-control/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:13:17.940

在我看来，您应该只下载链接到的插件的源代码，然后使用它。它看起来不错，并且有据可查。如果你坚持自己做，这就是我会做的。

```
<div id="main_container">

</div>

<div id="img_container">

   <div class="img_main">
     <img url="etc" />
   </div>

   <div class="img_main">
     <img src="wherever" />
   </div>

   <div class="img_main">
     <img src="you get the idea" />
   </div>

</div> 
```

然后使用 jquery 将图像标签加载到 html 中。制作一个名为 animate 的 CSS 类来保存您的动画，然后在将其`img`加载到主 div 后将其添加到 div 中。有无数种方法可以解决这个问题。我建议你让谷歌成为你最好的朋友。

jQuery：

```
$(".img_main").click(function() {
    var img = $(this).find('img');
    $('#main_container').html(img.html());
    img.addClass('animate');
  });
});​ 
```

或者，您可以在该 github 页面上下载免费库。

# ruby - XML 到对象映射器

> ID：13433114
> 
> 赞同：0
> 
> 时间：2012-11-17T17:48:02.300
> 
> 标签：ruby, xml, orm, dtd

我正在尝试制作一种应用程序文件格式解析器和生成器。应用程序使用带有自定义 DTD 的 xml 文件。目前我正在考虑编写对象映射器`nokogiri`来将xml解析为对象并使用这些对象来生成xml。我尝试过 HappyMapper 和 xml-mapping，但它们没有使用完整的 xml 格式。所以目前我已经做了这个，但我认为它的设计有点糟糕。

[http://pastie.org/5393012](http://pastie.org/5393012)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T05:25:38.333

您可以将 C# 与 XMLSerilaizer 一起使用，这是最好的。这是示例：

```
---------------just a lot of entity ----------------------
using System;
namespace BuilderSerialization {
public class Address {
public Address() {}
public string Address1;
public string Address2;
public string City;
public string State;
public string Zip;
public string Country;
} }
using System;
namespace BuilderSerialization {
public class Author {
public Author() { }
public string FirstName;
public string MiddleName;
public string LastName;
public string Title;
public string Gender;
public Address AddressObject;
} }

namespace BuilderSerialization {
public class Book {
public Book() { }
public string Title;
public Author AuthorObject;
public string ISBN;
public double RetailPrice;
public string Publisher;
}}
-------------------------------------------------------
using System;
using System.Xml.Serialization;
using System.IO;
namespace BuilderSerialization {
class TestClass {
static void Main(string[] args) {
Book BookObject = new Book();
XmlSerializer ser = new XmlSerializer(typeof(Book));
TextWriter writer = new StreamWriter("booktest.xml");
BookObject.Title = "Practical LotusScript";
BookObject.ISBN = "1884777767 ";
BookObject.Publisher = "Manning Publications";
BookObject.RetailPrice = 43.95;
BookObject.AuthorObject = new Author();
BookObject.AuthorObject.FirstName = "Tony";
BookObject.AuthorObject.LastName = "Patton";
BookObject.AuthorObject.Gender = "Male";
BookObject.AuthorObject.AddressObject = new Address();
BookObject.AuthorObject.AddressObject.Address1 = "1 Main Street";
BookObject.AuthorObject.AddressObject.City = "Anywhere";
BookObject.AuthorObject.AddressObject.State = "KY";
BookObject.AuthorObject.AddressObject.Zip = "40000";
BookObject.AuthorObject.AddressObject.Country = "USA";
ser.Serialize(writer, BookObject);
writer.Close();
} } } 
```

之后，您将获得 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<Book xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Title>Practical LotusScript</Title>
<AuthorObject>
<FirstName>Tony</FirstName>
<LastName>Patton</LastName>
<Gender>Male</Gender>
<AddressObject>
<Address1>1 Main Street</Address1>
<City>Anywhere</City>
<State>KY</State>
<Zip>40000</Zip>
<Country>USA</Country>
</AddressObject>
</AuthorObject>
<ISBN>1884777767 </ISBN>
<RetailPrice>43.95</RetailPrice>
<Publisher>Manning Publications</Publisher>
</Book> 
```

# drop-down-menu - 下拉菜单错误或 ie8 错误的 ie 10 兼容模式

> ID：13433115
> 
> 赞同：0
> 
> 时间：2012-11-17T17:48:03.500
> 
> 标签：drop-down-menu, internet-explorer-8, hover, internet-explorer-10, ie-compatibility-mode

我有这个下拉菜单在 ie 7 和 ie 9 的 ie 10 兼容模式下工作正常，但不适用于 ie 8，它根本不会显示。所以我想知道这是否是针对ie 8 而不是ie 7 的问题，或者ie 10 的兼容模式中是否存在某种错误。

有人可以使用ie8检查[吗](http://www.proyectossocialesdirectos.org)？

它是横幅下方的蓝色条。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:17:05.567

我看到了同样的问题。我的下拉菜单工作不可靠。如果我单击它周围的页面，它会起作用，但不会一次全部出现。如果我切换到 ie7 或 ie9 文档模式，它可以正常工作（就像在非 ie 浏览器中一样）。真令人沮丧。不幸的是，我正在处理的页面包含强制 ie8 文档模式的元标记。所有迹象都表明这实际上是一个 IE10 错误。如果有人知道解决方案，我将很高兴听到。

# angularjs - $routeParams 在解析功能中不起作用

> ID：13433116
> 
> 赞同：138
> 
> 时间：2012-11-17T17:48:04.337
> 
> 标签：angularjs

我正在使用[这种](https://stackoverflow.com/questions/11972026/delaying-angularjs-route-change-until-model-loaded-to-prevent-flicker)技术来加载数据。所以我创建了以下解析函数：

```
NoteController.resolve = {
    note: function($routeParams, Note) {
         return Note.get($routeParams.key);
    }
} 
```

问题是`$routeParams.key`在函数执行`undefined`的那一刻。`resolve`是否正确/错误？我该如何解决？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-11-17T18:12:48.860

你需要`$route.current.params.key`改用。`$routeParams`仅在更改路线*后更新。*所以你的代码应该看起来像这样：

```
NoteController.resolve = {
    note: function($route, Note) {
         return Note.get($route.current.params.key);
    }
} 
```

# scala - 是否有等效于 EnumSet/EnumMap 的 Scala？

> ID：13433118
> 
> 赞同：12
> 
> 时间：2012-11-17T17:48:28.017
> 
> 标签：scala, enums, set, scala-collections

在 Java 中，我们有两个很好的类：`EnumSet`用于 s 的集合`enum`和`EnumMap`用于键为 s 的映射`enum`。`EnumSet`表示为 64 位字（或 64 位字数组）和`EnumMap`值数组，两者均由`enum`s 的序数索引。所以插入/查找/删除/...操作只需要*O(1)*时间。

**我们在 Scala 中是否有类似的东西——可变的还是不可变的？**

我发现了对整数进行操作的[BitSet](http://www.scala-lang.org/api/current/scala/collection/BitSet.html)（可变和不可变），所以我认为会有一个有效的[`Enumeration`](http://www.scala-lang.org/api/current/index.html#scala.Enumeration). `Value`由它支持。但我发现 only `Enumeration.ValueSet`，它[由 SortedSet[Int] 支持](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/Enumeration.scala#L1)。虽然这还不错，`BitSet`但为此目的似乎更有效。

我没有找到任何优化的地图实现，其`Enumeration.Value`as 键类似于`EnumMap`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T21:28:55.773

实际上，在 2.10 Enumeration.ValueSet 中使用了 BitSet。

`class ValueSet private[ValueSet] (private[this] var nnIds: immutable.BitSet)`

[那会在这里。](https://github.com/scala/scala/blob/2.10.x/src/library/scala/Enumeration.scala#L251)

# orchardcms - 没有代码的果园 CMS 内容类型关系

> ID：13433119
> 
> 赞同：0
> 
> 时间：2012-11-17T17:48:50.597
> 
> 标签：orchardcms

可能是一件非常简单的事情，但我错过了：

场景：创建供应商类型的内容。然后开始创建 Product 类型的内容，其中产品必须链接到供应商（产品是供应商绑定的，因此需要 nm 关系）

是否可以创建两个相关的内容类型（供应商和产品）。我知道我可以通过编程来做到这一点。但我想尽可能地遵循少代码的理念。

更新：我在下面回答了我的问题。这给我带来了一个新问题（我会搜索答案，但如果有人知道请成为我的客人：可以预先设置可以选择的内容类型的过滤器。这样用户只能在链接字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:50:47.753

太快了...刚刚发现另一个问题，其中隐藏了答案：

在 1.5 中，使用新的内容选择器可以很容易地链接内容项，至少对于最简单的关系类型是这样。

# google-chrome - D3 过渡在 Chrome 中表现异常

> ID：13433121
> 
> 赞同：1
> 
> 时间：2012-11-17T17:49:00.523
> 
> 标签：google-chrome, d3.js, transition

我在 D3 中有一个简单的圆形过渡，我有大约 23 个具有唯一名称的不同圆圈，它们从 A 点移动到 B 点。我使用“圆圈名称”作为 .data() 中的键。

在 Internet Explorer 中一切正常，但是当我在 Chrome 中尝试时，气泡无法正确映射。例如，当过渡运行时，气泡 1 变为气泡 3 的颜色和“r”。最终位置是正确的，气泡最终到达了它们应该在的位置，但它们都在两点之间混合（填充和“r”）。

下面的代码：

```
 g.selectAll("circle").data(effedate, function (d) { return d.BubbleName; }).enter().append("circle")
      .attr("cx", function (d) { return x_scale(d.PercentageComplete * 100) })
      .attr("cy", function (d) { return y_scale(d.GPoS * 100) })
      .attr("r", function (d) { return r_scale(d.MSVMMboe) })
      .attr("stroke", "black")
      .attr("stroke-width", 1)
      .attr("opacity", 0.6)
      .attr("fill", function (d) {
          if (d.FairWay == "A") {
              return "steelblue";
          }
          else if (d.FairWay == "B") {
              return "yellow";
          }
          else if (d.FairWay == "C") {
              return "lightgreen";
          }
          else {
              return "lightblue";
          }
      });

      g.selectAll('circle')
             .data(effedate).exit().remove();

      //transition
      g.selectAll("circle").data(effedate2, function (d) { return d.BubbleName; }).transition().duration(3000)
      .attr("cx", function (d) { return x_scale(d.PercentageComplete * 100) })
      .attr("cy", function (d) { return y_scale(d.GPoS * 100) })
      .attr("r", function (d) { return r_scale(d.MSVMMboe) })
      .attr("stroke", "black")
      .attr("stroke-width", 1)
      .attr("opacity", 0.6)
      .attr("fill", function (d) {
          if (d.FairWay == "A") {
              return "steelblue";
          }
          else if (d.FairWay == "B") {
              return "yellow";
          }
          else if (d.FairWay == "C") {
              return "lightgreen";
          }
          else {
              return "lightblue";
          }
      }); 
```

有人在谷歌浏览器中遇到过转换问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:10:30.423

听起来有点奇怪，Chrome 不太可能有错。更可能的问题在于数据到元素的映射。尽管如此，您的代码从这里看起来大部分都很好。

但有一件事是错误的：

```
g.selectAll('circle')
    .data(effedate).exit().remove();// <- WRONG: missing function (d) { return d.BubbleName; } 
```

您需要提供要返回的键功能`d.BubbleName`。

无法解决问题的 iF：您确定`d.BubbleName`产生了正确的值吗？您`console.log`是从使用它的功能中获得的吗？

`svg:circle`此外，同一组中是否还有其他s`g`正在抛弃您的 selectAll。

# c# - 等到事件发生

> ID：13433131
> 
> 赞同：2
> 
> 时间：2012-11-17T17:50:05.513
> 
> 标签：c#, html

我有使用 webBrower 的应用程序，但是当我设置 URL 时，它不会等到它被加载，但我想对网站做一些事情，是否有在不使用循环的情况下停止该方法或者我应该使用多线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:18:24.140

@Marek Beseda 你也可以使用 setTimeout()

# c# - 如何使用随机选择二维数组中的位置？

> ID：13433140
> 
> 赞同：3
> 
> 时间：2012-11-17T17:50:55.467
> 
> 标签：c#, multidimensional-array, artificial-intelligence, tic-tac-toe

我创建了一个井字游戏程序，它允许玩家通过选择绳索来选择二维数组中的移动，然后计算机进行移动。

该程序有效，但计算机的移动是顺序的，而不是随机的，并且总是会选择数组中的下一个可用空间。现在我的游戏已经可以运行了，我想将程序改进为三个难度级别：

简单 = 计算机随机生成的移动 中等 = 计算机随机生成的移动，检查阻止玩家并完成线路 困难 = 每次通过递归选择最佳移动

如何让计算机随机选择阵列中的一组线？

（我目前用于计算机的基本 for 循环移动）

```
static void Computermove(char[,] gamegrid, char fin)
    {

        Console.WriteLine("\nComputer's turn");
        Console.ReadKey();

        int x = 0;
        int y = 0;
        for (x = 0; x < 2; x++)
        {
            for (y = 0; y < 2; y++)
                if (gamegrid[x, y] == ' ') break;
            if (gamegrid[x, y] == ' ') break;
        }

        if (x * y == 9)
        {
            fin = 'X';
        }
        else
            gamegrid[x, y] = 'O';

    } // End Computermove 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:54:12.360

创建[`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)该类的一个新实例，并使用该[`Next()`](http://msdn.microsoft.com/en-us/library/system.random.next.aspx)方法创建表示坐标的两个随机数。

这是代码：

```
var r = new Random();

var randomX = r.Next(3);
var randomY = r.Next(3); 
```

**更新：**

该方法如下所示：

```
static void Computermove(char[,] gamegrid, char fin)
{
    if (!ContainsEmptyCells(gamegrid))
    {
        // table is full; probably nobody won
        return;
    }

    bool goodRandomCoordinateFound = false;

    int row = 0, column = 0;

    var random = new Random();

    while (!goodRandomCoordinateFound)
    {
        row = random.Next(3);
        column = random.Next(3);

        if(gamegrid[row, column] == ' ')
            goodRandomCoordinateFound = true;
    }

    gamegrid[row, column] = 'O';
} 
```

我发现了导致`StackOverflowException`. 这是一个非常微妙的例子，但结论是当重试生成随机坐标时，`Random`应该使用相同的实例，而不是创建一个新的实例。

这是因为`Random`不会真正生成真正的随机数。创建`new Random()`实例时，会使用基于当前时间的种子值对其进行初始化。

如果您创建多个`Random`具有相同种子值的实例，它们将创建相同的随机数流。

在我们的示例中，如果我们需要生成新的随机坐标，则在没有指定种子的情况下创建了一个新的 Random 实例，因此种子使用的是当前时间。由于随机实例的创建速度极快，种子值相同，因此随机值相同，导致无限递归。

我重写了重用`random`实例的方法，这会导致后续调用`Next(3)`产生与我们当前拥有的值不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:57:00.080

由于计算机无法选择所有字段，因此您需要一个 2-Step 过程

*   计算空闲字段的数量（=：N）
*   在 0..N-1 范围内创建一个随机数
*   使用此数字选择一个字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:58:16.830

保留自由坐标列表，每当玩家或 AI 选择坐标时，将其从列表中删除。根据列表中的项目数进行随机化，因此如果列表中有 5 个条目，则会生成 1 到 5 之间的随机数，从列表中选择坐标。

或者更简单地跟踪自由坐标的数量，例如您有 5 个自由坐标生成一个数字 1-5，然后在棋盘上迭代以到达第 5 个位置

# java - Java在简单等式中重复小数

> ID：13433142
> 
> 赞同：3
> 
> 时间：2012-11-17T17:50:58.267
> 
> 标签：java

我正在做一个学校作业，我在其中求解一个涉及圆中坐标的方程（r^2 = x^2 + y^2），r = 1，然后通过 x 值递增求解 y。即使我只增加十分之一，我也会得到重复的小数。我不知道为什么，并以几种不同的方式尝试过。这是代码。

```
 double r = 1;
    double rSqr;
    double x = 1;
    double xSqr;
    double y;
    double ySqr;
    double inc = 0.1;
    int count = 0;
    while(x > -r)
    {
        x = r - (count * inc);
        rSqr = Math.pow(r, 2);
        xSqr = Math.pow(x, 2);
        ySqr = rSqr - xSqr;
        y = Math.sqrt(ySqr);
        count++;
        System.out.println(x + " " + y);
    } 
```

输出是这个

```
1.0 0.0
0.9 0.4358898943540673
0.8 0.5999999999999999
0.7 0.714142842854285
0.6 0.8
0.5 0.8660254037844386
0.3999999999999999 0.9165151389911681
0.29999999999999993 0.9539392014169457
0.19999999999999996 0.9797958971132712
0.09999999999999998 0.99498743710662
0.0 1.0
-0.10000000000000009 0.99498743710662
-0.20000000000000018 0.9797958971132712
-0.30000000000000004 0.9539392014169457
-0.40000000000000013 0.9165151389911679
-0.5 0.8660254037844386
-0.6000000000000001 0.7999999999999999
-0.7000000000000002 0.7141428428542849
-0.8 0.5999999999999999
-0.9000000000000001 0.43588989435406705
-1.0 0.0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:09:53.760

问题是`double`不精确。它使用 64 位来表示十进制数；有的位用于数字部分，有的位用于指数，但很多看似简单的十进制数却无法用这种方式准确表示，例如`0.1`. 有关更多信息，请参阅[此 wiki 文章](http://en.wikipedia.org/wiki/IEEE_floating_point)。

解决此问题的一种方法是使用 显示数字`DecimalFormat`，这可以将数字四舍五入以进行演示。这是一些示例代码：

```
public static void main(String[] args) {
    DecimalFormat decimalFormat = new DecimalFormat("#0.000");
    double d = 1 - .9; // one way to get a repeating decimal floating point number 
    System.out.println(d);
    System.out.println(decimalFormat.format(d));
} 
```

输出：

```
0.09999999999999998
0.100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:53:40.730

它是[IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point)浮点表示。

使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)作为数据类型，而不是`double`解决您的问题。但照原样`BigDecimal`小心`immutable`。

```
 BigDecimal r = BigDecimal.ONE;
        BigDecimal rSqr;
        BigDecimal x = BigDecimal.ONE;
        BigDecimal xSqr;
        BigDecimal y;
        BigDecimal ySqr;
        BigDecimal inc = new BigDecimal("0.1");
        int count = 0;

        while(x.compareTo(r.negate())>0)
        {
        // i'll let you fill in this part
        } 
```

# javascript - 使用大量闭包是否效率低下？

> ID：13433143
> 
> 赞同：3
> 
> 时间：2012-11-17T17:51:17.300
> 
> 标签：javascript, performance

我的 webapp 有一个撤消/重做的概念。我正在考虑如何最好地实施它。

我目前的方法是拥有一个数组数组，其中每个数组都是一组回调，以调用以恢复该版本。例如，要恢复其旧值的标签将是：

```
var undoer = {
    at = 0,
    stack = [[]],
    push = function(do,undo) {
        if(undoer.at > 0) {
            undoer.splice(0,undoer.at,[]);
            undoer.at = 0;
        }
        undoer.stack[0].push([do,undo]);
    },
    commit = function() { 
        if(undoer.at == 0 && undoer.stack[0])
            stack.unshift([]);
    },
    rollback = function() {
        if(undoer.at == 0 && undoer.stack[0])
            while(var func: stack[0].pop())
                func[1]();
    },
    undo = function() {
        // move the at index back, call all the undos
    ...
    redo = function() {
        // move the at index forward, call al dos
    ...
};

function Label(text) {
    var _text = text,
        label = {
            get: function() { return _text; },
            set: function(text) {
                var old = text;
                _text = text;
                undoer.push(
                    function() { _text = text; }, // do
                    function() { _text = old; } // undo
                );
            },
            ...
    };
    return label;
} 
```

（对此伪代码中的错别字和遗漏表示歉意）

这是存储撤消和重做闭包更改所需的状态更改。

想象一下现在有成千上万的编辑。改用可变参数函数并将其副本`arguments`放入撤消堆栈会更节省内存吗？

有没有更好的方法来做撤销/重做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:55:34.613

是的。

但它们更容易阅读/使用/维护。没有“正确”的答案，只有成本/收益分析。只要确保你不会递归太深。

# java - 用值中的换行符读取java中的.properties文件

> ID：13433144
> 
> 赞同：4
> 
> 时间：2012-11-17T17:51:20.107
> 
> 标签：java, regex, properties, map

我用这样的属性定义了一个 .properties 文件

```
A=Hello World this is a dummy text

B=Bye Bye World I am leaving to mars 
```

从输入流加载资源并显示它们后，我能够正确读取它。

现在我想像这样定义这些属性

```
A= Hello World 
   this is a 
   dummy text

B= Bye Bye World 
   I am leaving to 
   mars 
```

但是它没有按预期加载

```
A as Hello World 
```

和

```
B as Bye Bye World. 
```

我是否必须自己定义一个正则表达式并阅读此内容并将其填写在地图中。

或者有什么方法可以默认使用`Properties.java`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T17:55:11.167

您需要添加 a`\n`然后以“继续”字符结束该行：`\`

```
A=你好世界\n \
这是个 \
虚拟文本

```

请注意，加载属性文件时会修剪前导空格。因此，如果您需要缩进的行，则需要将其添加到上一行的末尾：

```
A=你好世界\n \
这是个 \
虚拟文本

```

# python - 在循环时创建一个 numpy 数组数组（Python）

> ID：13433146
> 
> 赞同：4
> 
> 时间：2012-11-17T17:51:26.370
> 
> 标签：python, numpy

我有一个返回 numpy 数组的方法。我想要做的是在每次迭代中获取这个数组并将其连接到另一个数组数组中，以便在循环结束时我有一个矩阵

到目前为止，这是我的代码，但它在给定行崩溃了程序

```
 delta_Array = np.array([0.01,0.02,0.03, 0.04, 0.05, 0.06,0.07, 0.08, 0.09, 0.10])
 theta_Matrix = np.zeros(8)

 t = Ridge(Xtrain, ytrain, .3) # This method returns an array of 8 elements
 np.append(theta_Matrix,t, axis=0)
 print delta_Array
 print theta_Matrix 
```

使用这种方法，我当前的输出是这样的

```
 [ 0.01  0.02  0.03  0.04  0.05  0.06  0.07  0.08  0.09  0.1 ] # delta_Array
 [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0.] # theta_Matrix 
```

经过 2 次迭代后，输出 Id like 应该看起来像这样。此外，我事先不知道 lop 将经历的迭代次数。因此，在方法运行后可以生成任意数量的数组。但无论哪种方式，所有数组都应形成 theta_matrix：

```
 theta_Matrix:

 [[ 0.65  0.65565  0.19181  0.923  0.51561  0.846  0.6464  0.6464]
  [ 0.9879  0.31213  0.68464  0.611  0.6161  0.61651  0.29858  0.1811]] 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:09:03.410

我有一个项目，我需要做一些非常相似的事情。您可以在循环中实现动态调整大小，但 python 的列表类型实际上是作为动态数组实现的，因此您不妨利用已有的工具。你可以这样做：

```
delta_Array = np.array([0.01,0.02,0.03, 0.04, 0.05, 0.06,0.07, 0.08, 0.09, 0.10])
theta_Matrix = []

for i in range(N):
     t = Ridge(Xtrain, ytrain, .3)
     theta_Matrix.append(t)
theta_Matrix = np.array(theta_Matrix) 
```

我应该提到，如果您已经知道您期望的大小`theta_Matrix`，您将通过执行以下操作获得最佳性能：

```
delta_Array = np.array([0.01,0.02,0.03, 0.04, 0.05, 0.06,0.07, 0.08, 0.09, 0.10])
theta_Matrix = np.zeros((N, 8))

for i in range(N):
     t = Ridge(Xtrain, ytrain, .3)
     theta_Matrix[i] = t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T17:55:26.727

`np.append` *返回*串联的数组，而您忽略了它的返回值。您还应该考虑`np.vstack`改用，因为它将行向量堆叠成矩阵（`append`可以这样做，但需要额外的参数）。

但是，运行`np.append`或`np.vstack`循环仍然不是一个好主意，因为构建矩阵将花费二次时间。最好预先分配一个数组，然后使用切片逐行填充它。如果您不知道它需要多大，请[考虑](https://en.wikipedia.org/wiki/Dynamic_array)使用`np.resize`.

# ios - 使用变量时 NSString 中的“未使用的表达式 myExpression”

> ID：13433147
> 
> 赞同：2
> 
> 时间：2012-11-17T17:51:36.870
> 
> 标签：ios, nsstring, expression, unused-variables

我有这种方法，我尝试在“_result”中设置结果。如果我使用格式化字符串将其分配给“_result”，则会出现错误“未使用的表达式结果”。如果我使用纯字符串作为@“完成”，则错误不会出现，并且 NSlog 会正确打印字符串给我带来的问题。有什么建议我可以解决这个问题吗？谢谢！

```
@property (nonatomic) NSString * result;

@synthesize result = _result;

- (NSString *) _result
{
    if (!_result) {
        _result= [[NSString alloc] initWithFormat:@"Could not compare %e"];
    }
    return _result;
}

- (NSString *) comparePrice:(double) price_one to_price2:(double) price_two;
{
    if (price_one > price_two) {
        NSLog(@"LOG result is %e ",price_one);
        _result = @"result is %e ",price_one;
        _result = @" done";
    }
    return _result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:54:36.410

您的错误在这一行：

```
_result = @"result is %e ",price_one; 
```

编译器不知道如何处理“ `price_one`”位。您需要指示编译器您正在尝试使用格式字符串。

将该行代码更改为：

```
_result = [NSString stringWithFormat: @"result is %e ",price_one]; 
```

你应该很好。

# java - Android 传感器问题

> ID：13433155
> 
> 赞同：0
> 
> 时间：2012-11-17T17:52:36.663
> 
> 标签：java, android, android-sensors

我需要从多个传感器获取数据。我尝试为所有传感器创建一个侦听器，并尝试为每个传感器创建单独的侦听器。如果添加了一个以上的传感器，这两种方法都不起作用。如果添加多个传感器，则传感器产生的数据无效。有没有人找到解决这个问题的方法？

这是添加传感器的代码：

```
List <Sensor> sensorList = sensorManager.getSensorList(Sensor.TYPE_ALL);

    //add sensor listeners
    for(Sensor curSensor : sensorList){
        sensorManager.registerListener(sensorListener,
            curSensor,
            SensorManager.SENSOR_DELAY_NORMAL);
    } 
```

以下是响应传感器变化的代码：

```
sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    sensorListener = new SensorEventListener(){
        @Override
        public void onAccuracyChanged(Sensor arg0, int arg1){

        }

        @Override
        public void onSensorChanged(SensorEvent event){
            sensorValues.put(Integer.valueOf(event.sensor.getType()),event.values);
            updateDisplayValues();
        }
    }; 
```

最后，这是更新显示的代码：

```
 private void updateDisplayValues(){
    Enumeration<Integer> keys = sensorValues.keys();
    int curIndex = 0;

    while(keys.hasMoreElements()){

        Integer key = keys.nextElement();
        String curStringForKey = getStringForKey(key);

        if(curStringForKey==null)continue;

        float [] value = sensorValues.get(key);
        if(key==TYPE_ORIENTATION){
            ValueDisplay[curIndex].setText(curStringForKey + ": " + getResources().getConfiguration().orientation);
        }else{
            String stringToPrint = new String();
            int paramLength = value.length;
            for(int i = 0; i <paramLength; i++)
                stringToPrint += value[i]+", ";

            ValueDisplay[curIndex].setText(curStringForKey + ": " + stringToPrint);
        }
        curIndex ++;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:16:57.050

你是什​​么意思：

> 传感器产生的数据无效

我相信问题不在于注册多个传感器，如果您只是在 onSensorChanged 方法中打印传感器类型和值，**即**使用*Log.d()*，它应该可以正常工作。

*sensorValues*对象中的问题以及您在方法*updateDisplayValues*中访问它的方式，请确保它是**线程安全类型**。

传感器更新非常快，并且在*updateDisplayValues()*中执行循环似乎不是正确的设计。

编辑：

```
String stringToPrint = new String();
int paramLength = value.length;
        for(int i = 0; i <paramLength; i++)
            stringToPrint += value[i]+", "; 
```

它与您的问题无关，但上面的代码确实不是一个好习惯。字符串是不可变的对象，因此每次您尝试修改字符串（例如 stringToPrint += "value"）时，都会创建一个新的字符串对象。改用 StringBuffer 或 StringBuilder（一个是线程安全的，另一个不是）

# c# - C#：索引超出了 ListView 的数组边界

> ID：13433156
> 
> 赞同：0
> 
> 时间：2012-11-17T17:52:46.797
> 
> 标签：c#, arrays, forms, listview

我不断收到“索引超出数组范围”。当我尝试将项目添加到 listView 时。

我究竟做错了什么？

这是我的代码：

```
 string[] h = getBetweenAll(thepage, "\" target=\"_blank\">", "</a>");
         foreach (string s in h)
         listViewClickbank.Items.Add(new ListViewItem(""));

        foreach (ListViewItem i in listViewClickbank.Items)
         {
           if (i.SubItems[0].Text == "(view mobile)")
          {
                i.Remove();
           }
       }

      foreach (ListViewItem i in listViewClickbank.Items)
     {
             if (i.SubItems[0].Text.Contains("recordTitle"))
           {
             i.Remove();
          }
      }

      string[] u = getBetweenAll(thepage, "<div class=\"description\">", "</div>");
      for (int i = 0; i < h.Length && i < listViewClickbank.Items.Count; i++)
      {
           listViewClickbank.Items[i].SubItems.Add(u[i]);
      } 
```

错误出现在这一行：

```
listViewClickbank.Items[i].SubItems.Add(u[i]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:55:41.087

请注意，您使用的是`h.Length`，而不是循环`u.Length`中的条件。`for`您正在添加 的元素`u`，而不是`h`并且很可能`u.Length`小于，`h.Length`并且当您尝试访问 u[i] 时会出现异常。它应该是 ：

```
string[] u = getBetweenAll(thepage, "<div class=\"description\">", "</div>");
for (int i = 0; i < u.Length && i < listViewClickbank.Items.Count; i++)
{
     listViewClickbank.Items[i].SubItems.Add(u[i]);
} 
```

# contravariance - 为什么这些逆变参数类型被认为是安全的？

> ID：13433162
> 
> 赞同：0
> 
> 时间：2012-11-17T17:53:29.200
> 
> 标签：contravariance

我刚刚在我的编程语言课上了解到“逆变参数类型实际上是安全的，但尚未发现它们有用，因此在实际语言中不受支持。” 即使它们不受支持，我也很困惑为什么我们给出的这个例子在理论上仍然是“安全的”：

```
class Animal {
  ...
  public bool compare(Panda) { ... }
} 

class Panda extends Animal {
  ... 
  public bool compare(Animal) { ... }
} 
```

据我了解，当完成某些可能导致失去特异性的事情时，就会出现子类型化问题。那么如果我这样做呢？：

```
Panda p = new Panda(); 
Animal a = new Animal
...
p.compare(a); 
```

当我看到这个时，似乎熊猫可以（并且可能确实）有一些普通动物不会知道的额外字段。因此，即使它们所有特定于动物的数据成员都相同，熊猫也可以有其他不同的东西。将它与普通动物进行比较怎么会好呢？它会只考虑动物专用的东西而忽略其余的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:00:52.233

在您的示例中，您不使用任何[泛型](http://en.wikipedia.org/wiki/Generic_programming)类型。你有`Panda`extends `Animal`，它是[继承](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)的一个例子，并导致[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)，这或多或少是你所描述的。检查链接。

要获得逆变，您需要考虑一些泛型类型。我将使用 .NET 类型[`IComparer`1[T]`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)作为示例。使用 C# 语法（我将使用它而不是 Java），我们通过在定义中编写来表明它`IComparer`是*逆变的：*`T``in`

```
public interface IComparer<in T>
{
  ...
} 
```

假设我有一个返回`IComparer`1[Animal]`（或`IComaparer<Animal>`）的方法，例如：

```
static IComparer<Animal> CreateAnimalComparer()
{
  // code that returns something here
} 
```

现在在 C# 中，这样说是合法的：

```
IComparer<Panda> myPandaComparer = CreateAnimalComparer(); 
```

现在，*这*是因为逆变。请注意，类型`IComparer<Animal>`不是从（或“扩展”）类型派生的`IComparer<Panda>`。相反，`Panda`派生自`Animal`，这导致`IComparer<Xxxx>`彼此可分配（以相反的顺序，因此是“逆变”（而不是“协方差”））。

声明逆变器有意义的原因`Comparer<>`是，如果您有一个可以比较两个任意动物的比较器，并返回一个指示哪个更大的有符号数字，那么同一个比较器也可以接收两个熊猫并比较它们。因为熊猫是动物。

所以关系

> 任何`Panda`一个`Animal`

（来自继承）导致关系

> 任何`IComparer<Animal>`一个`IComparer<Panda>`

（通过逆变）。

对于*协方差*的示例，相同的关系

> 任何`Panda`一个`Animal`

导致

> 任何`IEnumerable<Panda>`一个`IEnumerable<Animal>`

通过协方差 ( `IEnumerable<out T>`)。

# jakarta-ee - 如何从不同的 JVM 和服务器调用远程 EJB？

> ID：13433163
> 
> 赞同：3
> 
> 时间：2012-11-17T17:53:37.073
> 
> 标签：jakarta-ee, ejb

好的，我知道所有事物都存在规范，但是，它需要兼容性吗？

我可以从部署在 Weblogic 上的基于 EJB 3.1 (JEE6) 的架构调用部署在 JBOSS 上的应用程序 EJB 3 (JEE5) 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:42:50.873

假设您的 EJB 3.0 模块公开了一个远程接口，那么您可以通过该远程接口（使用 RMI/IIOP）从 EJB 3.1 客户端调用它。

关于对您的问题的评论：我不会急于用 Web 服务层包装您的 EJB 3.0 模块。它在图表上看起来不错，但是当一切都说完了，它归结为需求和成本/收益。如果您的 EJB 3.0 模块仅由 EJB 客户端调用，那么标准远程接口就足够了。话虽如此，您应该以这样一种方式定义您的 EJB 接口，以便您在将来*需要时*可以用 Web 服务层包装它。

**注意**：您必须确保您使用的应用程序服务器支持从一个版本调用到另一个版本。例如，IBM WebSphere 将在从 WAS 6.0 调用到 WAS 7.0 时工作。JBoss 提出了一些挑战（请参阅下面的评论）。

# css - IE6背景图片不显示

> ID：13433165
> 
> 赞同：1
> 
> 时间：2012-11-17T17:53:40.807
> 
> 标签：css, internet-explorer

我正在尝试为仍然出于某种原因使用此浏览器的人设计 ie6 样式。我遇到的问题是背景图像没有显示。路径是正确的，当我在浏览器中输入完整路径时，图像会显示。我的代码哪里出错了。谢谢

```
.buttonMailTrue:hover {
    background-image: url('http://localhost/sample/users/images/mail_icon_strip_hover.gif');
    background-repeat: no-repeat;
    width:290px;
    height:44px;
    color: black;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:55:46.623

悬停仅适用于 ie6 中的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T18:00:01.723

IE6 仅支持 :hover 在链接上。所以你必须做这样的事情：

CSS：

```
.buttonMailTrue.hover {
    background-image: url('http://localhost/sample/users/images/mail_icon_strip_hover.gif');
    background-repeat: no-repeat;
    width:290px;
    height:44px;
    color: black;
} 
```

Javascript（使用 jQuery）：

```
$('.buttonMailTrue').hover(function() {
    $(this).addClass('hover');
}, function() {
    $(this).removeClass('hover');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T20:44:21.513

> 我已经在头部和外部 js 文件中尝试过，但仍然无法正常工作。

尝试内部`<script type="text/javascript" rel="JavaScript">//code here</script>`

# android - 如何在共享首选项中存储数据

> ID：13433166
> 
> 赞同：0
> 
> 时间：2012-11-17T17:53:44.297
> 
> 标签：android, android-layout

我有一个数组列表，我想在应用程序关闭/终止/销毁时保存数据。

```
//Class SimpleBookManager.java is a singleton

private ArrayList<Book> allBooks = new ArrayList<Book>();

public Book getBook(int index){
    return allBooks.get(index);
}
public void saveChanges(){
    //Save the allBooks into memory
}
public void loadBooks(){
    //Load the allBooks into memory to the variable allBooks;
} 
```

它是通过写入`SimpleBookManager.getSimpleBookManager().saveChanges();`包中的所有其他类来实现的。

实现方法 saveChanges() 和 loadBooks() 的最佳方法是什么？你能举个简单的例子吗？我已经阅读了一些关于 android 中共享偏好的内容，但不幸的是我不太明白 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:58:31.593

这是一个 SO question，其中包含您要查找的代码

*   [Android 共享首选项](https://stackoverflow.com/questions/5734721/android-shared-preferences)

要将数组存储在共享首选项中，请看这里 -

*   [将数组存储在 sharedpreferences 中](https://stackoverflow.com/questions/8714579/store-array-in-sharedpreferences)

但是，如果您的应用程序有很多书籍，或者每本书都有很多信息，那么最好使用 SQLite 数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:59:24.150

您可以从应用程序中的任何上下文中获取 SharedPreferences 的实例。

以下代码将带有键“some_pref_key”和值“some_pref_value”的首选项保存到名为“your_preference_file_name”的文件中

```
 SharedPreferences prefs = context.getSharedPreferences( "your_preference_file_name", MODE_APPEND );
    SharedPreferences.Editor editor = prefs.edit();
    editor.putString( "some_pref_key", "some_pref_value" );
    editor.commit(); 
```

如果您需要保存其他类型的数据，请查看[SharedPreferences.editor](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html) 文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:24:14.190

如果您要存储的单个数据不超过 10 个，您可以使用共享首选项。示例：如果您要存储 bookid，那么共享首选项就足够了。

但是，如果您尝试存储对象/数据数组，则应仅将其存储在数据库中。方便处理大量数据

# iphone - 日期选择器和文本字段

> ID：13433167
> 
> 赞同：0
> 
> 时间：2012-11-17T17:53:55.923
> 
> 标签：iphone, objective-c, ios, xcode, datepicker

我是 ios 开发的新手，需要知道如何设置两个从日期选择器获取日期的文本字段。这是代码：

.h 文件

```
#import <UIKit/UIKit.h>

@interface DatePickerForTermins : UIViewController<UITextFieldDelegate>
{
    //NSDate *frmDate;
    UIActionSheet *dateSheet;
    UIActionSheet *dateSheet2;

}

@property (weak, nonatomic) IBOutlet UITextField *fromDateTextField;
@property (weak, nonatomic) IBOutlet UITextField *toDateTextField;

@property (weak, nonatomic) IBOutlet UILabel *chosenFromDateLabel;
@property (weak, nonatomic) IBOutlet UILabel *chosenToDateLabel;

@property (weak, nonatomic) NSDate *frmDate;
@property (weak, nonatomic) NSDate *toDate;

-(void)setDateFRM;
-(void)dismissDateSet;
-(void)cancelDateSet;
-(void)setDateTO;
-(void)dismissDateSet2;
-(void)cancelDateSet2;
@end 
```

和 .m 文件：

```
#import "DatePickerForTermins.h"

@interface DatePickerForTermins ()

@end

@implementation DatePickerForTermins
@synthesize fromDateTextField;
@synthesize chosenFromDateLabel;
@synthesize frmDate;
@synthesize chosenToDateLabel;
@synthesize toDateTextField;
@synthesize toDate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)setDateFRM
{

    dateSheet=[[UIActionSheet alloc]initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
    [dateSheet setActionSheetStyle:UIActionSheetStyleDefault];

    CGRect pickerFrame=CGRectMake(0, 44, 0, 0);
    UIDatePicker *frmDatePicker=[[UIDatePicker alloc]initWithFrame:pickerFrame];
    [frmDatePicker setDatePickerMode:UIDatePickerModeDate];
    [dateSheet addSubview:frmDatePicker];
    UIToolbar *controlToolBar=[[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, dateSheet.bounds.size.width, 44)];

    [controlToolBar setBarStyle:UIBarStyleDefault];
    [controlToolBar sizeToFit];

    UIBarButtonItem *spacer=[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem *setButton=[[UIBarButtonItem alloc]initWithTitle:@"Set Date" style:UIBarButtonItemStyleDone target:self action:@selector(dismissDateSet)];

    UIBarButtonItem *cancelButton=[[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelDateSet)];

    [controlToolBar setItems:[NSArray arrayWithObjects:spacer,cancelButton,setButton, nil]animated:NO];

    [dateSheet addSubview:controlToolBar];

    [dateSheet showInView:self.view];

    [dateSheet setBounds:CGRectMake(0, 0, 320, 425)];

}
-(void)setDateTO
{

    dateSheet2=[[UIActionSheet alloc]initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
    [dateSheet2 setActionSheetStyle:UIActionSheetStyleDefault];

    CGRect pickerFrame=CGRectMake(0, 44, 0, 0);
    UIDatePicker *frmDatePicker=[[UIDatePicker alloc]initWithFrame:pickerFrame];
    [frmDatePicker setDatePickerMode:UIDatePickerModeDate];
    [dateSheet2 addSubview:frmDatePicker];
    UIToolbar *controlToolBar=[[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, dateSheet2.bounds.size.width, 44)];

    [controlToolBar setBarStyle:UIBarStyleDefault];
    [controlToolBar sizeToFit];

    UIBarButtonItem *spacer=[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem *setButton=[[UIBarButtonItem alloc]initWithTitle:@"Set Date" style:UIBarButtonItemStyleDone target:self action:@selector(dismissDateSet2)];

    UIBarButtonItem *cancelButton=[[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelDateSet2)];

    [controlToolBar setItems:[NSArray arrayWithObjects:spacer,cancelButton,setButton, nil]animated:NO];

    [dateSheet2 addSubview:controlToolBar];

    [dateSheet2 showInView:self.view];

    [dateSheet2 setBounds:CGRectMake(0, 0, 320, 425)];

}
-(void)cancelDateSet
{
    [dateSheet dismissWithClickedButtonIndex:0 animated:YES];

}
-(void)cancelDateSet2
{
    [dateSheet2 dismissWithClickedButtonIndex:0 animated:YES];

}

-(void)dismissDateSet
{
    NSArray *listOfSubviews=[dateSheet subviews];
    for (NSString *sre in listOfSubviews) {
        NSLog(@"Lista Sub:%@",sre);
    }

    for (UIView *subView in listOfSubviews) {
        if([subView isKindOfClass:[UIDatePicker class]]){

            self.frmDate=[(UIDatePicker*)subView date];

        }
    }
    NSDateFormatter *dateFormater=[[NSDateFormatter alloc]init];
    [dateFormater setDateFormat:@"dd/MM/yyyy"];
    [fromDateTextField setText:[dateFormater stringFromDate:self.frmDate]];

    //    NSCalendar *calendar=[NSCalendar currentCalendar];
    //    unsigned unitFlags= NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit;
    //    NSDateComponents

    NSString *outputStr=[NSString stringWithFormat:@"From Datum je:%@",self.frmDate];

    [self.chosenFromDateLabel setText:outputStr];

    [dateSheet dismissWithClickedButtonIndex:0 animated:YES];

}

-(void)dismissDateSet2
{
    NSArray *listOfSubviews=[dateSheet2 subviews];
    for (NSString *sre in listOfSubviews) {
        NSLog(@"Lista Sub2:%@",sre);
    }

    for (UIView *subView in listOfSubviews) {
        if([subView isKindOfClass:[UIDatePicker class]]){

            self.toDate=[(UIDatePicker*)subView date];

    }
}
    NSDateFormatter *dateFormater=[[NSDateFormatter alloc]init];
    [dateFormater setDateFormat:@"dd/MM/yyyy"];
    [toDateTextField setText:[dateFormater stringFromDate:self.toDate]];

//    NSCalendar *calendar=[NSCalendar currentCalendar];
//    unsigned unitFlags= NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit;
//    NSDateComponents 

    NSString *outputStr=[NSString stringWithFormat:@"From Datum je:%@",self.frmDate];

    [self.chosenToDateLabel setText:outputStr];

    [dateSheet2 dismissWithClickedButtonIndex:0 animated:YES];

}

-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{

        [self setDateFRM];
        return NO;

}

@end 
```

另一个文本字段只提供普通键盘而不是日期选择器。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:21:21.413

日期更改时，使用“addTarget”获取消息。

例子：

```
[rmDatePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged|;
 ...

-(void) datePickerValueChanged:(id) sender {
   UIDatePicker *picker = (UIDatePicker*)sender;
   NSDate dateFromPicker = picker.date;
   fromDateTextField.text = [dateFromPicker description];
} 
```

更多信息：[UIKit 中的 Target-Action](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW44)

# sql - 如何按另一列中的值对查询的结果进行分组？

> ID：13433168
> 
> 赞同：1
> 
> 时间：2012-11-17T17:54:07.137
> 
> 标签：sql, postgresql, case, aggregate-functions

我有一个名为`vegetation`2 列的表：
`type`,`count`

我想将计数值小于平均计数的所有行的计数和所有计数值较高的行的计数相加。

我不知道如何在 group by 子句中反映这一点......（或其他地方？）。

我想另一种方法应该是为所有低于平均水平的数据分配一个值，为所有高于平均水平的数据分配另一个值，然后按此值分组。但我刚刚开始，也不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:03:47.620

```
SELECT sum(CASE WHEN ct <= x.avg_ct THEN ct ELSE 0 END) AS sum_ct_low
      ,sum(CASE WHEN ct >  x.avg_ct THEN ct ELSE 0 END) AS sum_ct_hi
FROM vegetation v
    ,(SELECT avg(ct) AS avg_ct FROM vegetation) x 
```

平均值是单个值，您可以只是`CROSS JOIN`对基表的子查询（逗号分隔的表列表意味着交叉连接）。
然后用一个简单的`CASE`语句过滤。

我使用`ct`而不是`count`，因为这是[SQL 中的保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)。

# ruby-on-rails - Rails 表单：如何将用户与特定类型的消息（接收到的消息而不是发送的消息）联系起来？

> ID：13433175
> 
> 赞同：0
> 
> 时间：2012-11-17T17:54:28.447
> 
> 标签：ruby-on-rails

嗨，我想了解在某些条件下的关系是如何运作的。我正在尝试使消息属于用户，我的消息模型与 2 个用户（一个接收者和一个发送者）相关联。同时，用户有 2 条不同的消息（已发送 + 已接收）。

根据我的研究，这似乎是要走的路：

用户模型

```
class Users < ActiveRecord::Base
  attr_accessible :age, :gender, :name

  has_many :sent_messages, :class => "Messages", :foreign_key => 'sender_id'
  has_many :received_messages, :class => "Messages", :foreign_key => 'receiver_id'
end 
```

消息模型

```
class Messages < ActiveRecord::Base
  attr_accessible :content, :read

  belongs_to :sender, :class => "User", :foreign_key => 'sender_id'
  belongs_to :receiver, :class => "User", :foreign_key => 'receiver_id'
end 
```

但是，我有时间概念化如何在表单中指定什么类型的用户（发送者或接收者）和什么类型的消息（接收或发送）。

```
<%= form_for(@user, @message) do |f| %>
    <%= f.label :content %>
    <%= f.text_area :content %>
    <%= f.submit %>
<% end %> 
```

（假设我有身份验证）我将在哪里/如何指定此表单`@user`应将此消息添加到他/她`@user.received_messages`，而`current_user`（无论谁登录）将此消息添加到`current_user.sent_messages`？这会在创建操作下的消息控制器中吗？我不确定我将如何设置`@user.id = sender_id`and的值`current_user.id = receiver_id`（或者我是否需要这样做）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:09:28.690

您需要做的就是创建附加了正确用户 ID 的消息记录。该关系将负责确保消息包含在每个相应用户的消息列表（已发送和已接收）中。

您可能会附加在`current_user`控制器中，因为您从会话中知道此 ID，并且不需要（或不希望）它在表单中。

您可以通过隐藏的 id（或下拉列表等，如果您需要在表单中选择用户）将其`receiver`包含在表单中。如果您使用隐藏的 id，则假定您在呈现表单之前在消息上设置了接收者。

就像是：

```
<%= form_for(@message) do |f| %>
  <%= f.hidden_field, :receiver_id %>
  <%= f.label :content %>
  <%= f.text_area :content %>
  <%= f.submit %>
<% end %> 
```

在控制器中，类似：

```
def create
  @message = Message.new(params[:message])

  # If receiver_id wasn't attr_accessible you'd have to set it manually.
  # 
  # This makes sense if there are security concerns or rules as to who 
  # can send to who.  E.g. maybe users can only send to people on their
  # friends list, and you need to check that before setting the receiver.
  #
  # Otherwise, there's probably little reason to keep the receiver_id
  # attr_protected.
  @message.receiver_id = params[:message][:receiver_id]

  # The current_user (sender) is added from the session, not the form.
  @message.sender_id = current_user.id

  # save the message, and so on
end 
```

# jquery - 我有 JSON。现在我想在页面上呈现它。我该怎么做。

> ID：13433180
> 
> 赞同：0
> 
> 时间：2012-11-17T17:54:46.627
> 
> 标签：jquery, json

我正在使用 jQuery 和 Backbone。我是 js 新手。我可以让它显示在警报中，但我想将信息扔到正文中。

就像是：

```
var jsonData = $.get("https://www.googleapis.com/shopping/search/v1/public/products?key=key&country=US&q=digital+camera&alt=json");
$('body').append(jsonData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:59:02.340

```
$(document).ready(function() {
    document.write(JSON.stringify($.get("https://www.googleapis.com/shopping/search/v1/public/products?key=key&country=US&q=digital+camera&alt=json")));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:26:06.770

如果您只想将 JSON 吐出以进行调试，最好使用内置控制台让它为您解析和美化它：

`console.log(yourJSON);`

# ios - 从搜索栏结果表转到另一个视图控制器并返回后，UITableView 不滚动

> ID：13433182
> 
> 赞同：0
> 
> 时间：2012-11-17T17:54:54.567
> 
> 标签：ios, uitableview, scroll, uisearchbar

我有一个在单元格中显示数据的 UITableViewController。在`viewWillAppear`我用这个方法向 tableHeaderView 添加一个 UIView`self.tableView.tableHeaderView =headerView;`

在`headerView`我以编程方式添加 UISearchBar 和 UISegmentControl 。我这样设置 UISearchBar 委托

```
self.searchDisplay.delegate = self;
self.searchDisplay.searchBar.delegate = self;
self.searchDisplay.searchResultsDataSource = self;
self.searchDisplay.searchResultsTableView.delegate = self; 
```

`searchDisplay`是`UISearchDisplayController`。_

搜索工作完美，但我的问题是当我从`searchResultsTableView`UINavigationController 中触摸后退按钮时选择一个单元格并转到另一个 viewController 并返回此视图时，表格不再滚动。

我添加了这两种方法`viewDidLoad`，`viewWillAppear` 但仍然不起作用

```
self.tableView.bounces = YES;
self.tableView.scrollEnabled = YES; 
```

当我在没有搜索的情况下从表中选择一行并返回并返回时，它工作得很好。

有什么问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:04:46.350

尝试放置您的

```
self.tableView.bounces = YES;
self.tableView.scrollEnabled = YES; 
```

在`- (void) viewWillAppear:(BOOL)animated`而不是`viewDidLoad`. 我相信`viewDidLoad`从其他视图返回时不会被调用，只有在创建时才会调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:02:27.943

您实际上在视图上使用了两个表视图， (`self.tableView`和`self.searchDisplay.searchBarTableView`) 一个用于显示数据，一个用于显示搜索到的数据。我认为 searchViewController 在 segue 之后停留在屏幕上。

有一个技巧可以在单个 tableView 中显示整个数据和搜索结果（无需使用`UISearchDisplayController`）

只需执行以下操作即可显示搜索结果：

```
self.tableView.dataSource = self;
self.tableView.delegate = self; 
```

对于实际数据，您可以清空`UISearchBar`并加载表格视图数据源中的整个数据。

# git - 尝试推送到 github 时出现 SSL 错误

> ID：13433184
> 
> 赞同：1
> 
> 时间：2012-11-17T17:55:07.883
> 
> 标签：git, github, git-push

这是我刚刚创建的一个 REPO（我的第一个），所以我可能设置错误。
当我尝试将代码从我的机器推送到 GIT 上的 REPO 时，我得到：

> 错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：访问 [https://github.com/itay-moav/OmegaSupreme.git/info/refs时证书验证失败](https://github.com/itay-moav/OmegaSupreme.git/info/refs)

我做错了什么，我错过了设置步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:30:23.827

不好的解决方案是：

```
git config --global http.sslVerify false 
```

正确的解决方案是[添加根证书](https://stackoverflow.com/a/4454754/6309)（您可以[在此处查看示例](https://github.com/mxcl/homebrew/issues/6103#issuecomment-1417990)）。
话虽如此，在 Windows 上使用像[msysgit](http://msysgit.github.com/)这样的 Git 发行版，或在 Windows[上使用 GitHub](http://windows.github.com/)（或[在 Mac 上使用 GitHub](http://mac.github.com/)）可以避免这种情况，因为它会使用已经安装了正确证书的证书文件。
例如，Msysgit 引用它自己的完整`bin/curl-ca-bundle.crt`文件，其中已包含正确的 CA。请参阅“[无法通过 github 访问`curl`](https://stackoverflow.com/a/9257834/6309)”。

# csv - 使用 ProducerTemplate 后如何在 Camel 中定义聚合器？

> ID：13433186
> 
> 赞同：0
> 
> 时间：2012-11-17T17:55:17.073
> 
> 标签：csv, split, apache-camel

我有一条处理 csv 文件并将它们作为记录插入数据库的路线。由于它是一个巨大的 csv 文件，并且 Camel csv-splitter 内存不足，我们不得不编写自己的拆分器。我使用 ProducerTemplate 编写了拆分器。

处理 csv 的路径看起来有点像这样：

```
<route id="processCsvRoute">
    <from ref="inbox" />
    <to uri="bean:csvBean?method=process"/>
</route> 
```

在 csvBean 中，我们进行拆分，最后为每个 csv 行执行以下 java 代码（一个 csv 行生成一个产品对象）。

```
producer.sendBodyAndHeader("direct:csvAggregator", product, "ID", csv.getFilename()); 
```

没有 csvAggregator-route 选择 csv：

```
<route id="csvAggregator">
<from uri="direct:csvAggregator" />
<aggregate strategyRef="exchangeAggregatorStrategy"
               completionSize="10000"
               completionInterval="10000"
               parallelProcessing="true">
        <correlationExpression>
            <header>ID</header>
        </correlationExpression>
        <to uri="bean:batchInsertBean"/>
    </aggregate>
</route> 
```

有没有办法在 processCsvRoute 中定义聚合器？我的解决方案有效，但感觉不对，我必须为其创建单独的路线。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:43:52.600

您可以在拆分器上启用流模式，然后它会“逐行”读取 CSV 文件，并且不会耗尽内存。

该文档有更多详细信息：[http ://camel.apache.org/splitter](http://camel.apache.org/splitter)

```
<split streaming="true" ...> 
```

# php - 在会话中存储大量更新数据？

> ID：13433187
> 
> 赞同：0
> 
> 时间：2012-11-17T17:55:17.680
> 
> 标签：php, session-variables

所以我有一个应用程序，它允许用户在文本框中输入句子/段落。在后台运行一个计时器。每隔 5 秒，文本框的值将被复制并存储到数据库或 xml 文件中（通过 ajax）。我认为如果我每 5 秒更新一次 db/xml 文件会很不安全。

我的想法是 - 当用户按下计时器停止时 - 它会将所有数据保存到数据库/xml文件中。它不是每 5 秒更新一次。

但是我仍然需要存储每个间隔的值。我应该在会话中使用里面的数组吗？一个会话可以花费多少。它看起来像：`$_SESSION['content'][] = "Massive long string text!";`

示例：用户连续输入 10 分钟，文本正文每 5 秒保存到会话数组中。这是不是压力太大了？在每个间隔中，每个段落的长度可能为 1000 个字符。

你有什么建议？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T19:08:44.297

尝试使用隐藏元素（例如 textarea），然后使用 javascript 函数从 user_textbox 值中每隔 5 秒填充一次元素。为了减少服务器负载，您可以在 user_textbox 模糊时将隐藏元素的内容存储到数据库中。

# c++ - VC++ Variadic-Template-Template 错误 C2244：无法将函数定义与现有声明匹配

> ID：13433196
> 
> 赞同：2
> 
> 时间：2012-11-17T17:55:53.387
> 
> 标签：c++, c++11, visual-studio-2012, variadic-templates, template-templates

这可能是新手的错误，我正在使用 Microsoft Visual C++ Compiler Nov 2012 CTP，当我尝试编译时：

```
#include <tuple>

class A
{
public:
    template <class... Fs, template <class...> class T>
    void foo(T<Fs...>);
};

template <class... Fs, template <class...> class T>
void A::foo(T<Fs...>)
{
}

int main()
{
    A a;
    a.foo(std::make_tuple(10,10));
} 
```

我收到以下错误：

```
error C2244: 'A::foo' : unable to match function definition to an existing declaration
definition
'void A::foo(T<Fs...>)'
existing declarations
'void A::foo(T<Fs...>)' 
```

如果我内联它编译的函数并做我想做的事，但我必须把函数放在头文件中

但以下代码编译没有错误：

```
#include <vector>

class A
{
public:
    template <class Fs, template <class> class T>
    void foo(T<Fs>);
};

template <class Fs, template <class> class T>
void A::foo(T<Fs>)
{
}

int main()
{
    A a;
    a.foo(std::vector<int>());
} 
```

所以问题是我怎样才能用可变参数模板实现同样的目标

**编辑：**

正如建议的那样，在 Microsoft Connect 上提交了错误报告，[ID 为：771567](https://connect.microsoft.com/VisualStudio/feedback/details/771567/c-variadic-template-template-fail-to-compile-vs2012-nov-2012-ctp)

向量示例也很糟糕（它会给出`<std::_Simple_types<int>,std::_Vector_val>`，但它确实可以编译），但是如果您使用一对和模板参数尝试它：

```
template <class F, class G, template <class,class> class T> 
```

你会明白`<F,G,std::pair>`这就是我的意思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T19:39:05.073

[来自 MSDN 关于编译器错误 C2244](http://msdn.microsoft.com/en-us/library/yf190ysd.aspx)：

> 您不能部分特化函数模板。

我也认为你必须`template`在类前面声明：

```
template<typename T>
class MyClass
{
}; 
```

# java - 围绕中心旋转图表

> ID：13433205
> 
> 赞同：2
> 
> 时间：2012-11-17T17:57:14.827
> 
> 标签：java, swing, graphics2d

我想围绕他的中心旋转饼图，我该怎么做？我想旋转整个饼图。这是我的代码：

```
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.Random;
import javax.swing.JComponent;
import javax.swing.JFrame;

class Slice{

    double value;
    Color color;
    public Slice(double _value){
        Random numGen = new Random();
        int R =  numGen.nextInt(256);
        int G = numGen.nextInt(256);
        int B = numGen.nextInt(256);
        this.setColor(new Color(R,G,B));
        this.value = _value;    
    }
    public void setColor(Color _color){
        this.color = _color;

    }
}

class Component extends JComponent {

    int movx = 0;
    int movy = 0;
    private double angle = 0;
    private double radius = 0.0D;
    private  Random numGen;
    private int w = 500;
    private int h = 500;

    Slice[] slice = {new Slice(5),new Slice(20),new Slice(33),new Slice(42)};
    public Component(){
        numGen = new Random();
        Listener listener = new Listener();
        addMouseListener(listener);
        addMouseMotionListener(listener);
    }

    class Listener extends MouseAdapter{
        private double LastAngle;
        @Override
        public void mousePressed(MouseEvent e) {
            LastAngle = getAngle(e.getPoint());
        }
        @Override
        public void mouseDragged(MouseEvent e) {
            double curAngle = getAngle(e.getPoint());
            double deltaAngle = curAngle - LastAngle;
            angle += deltaAngle;
            repaint();
            LastAngle = curAngle;
        }
        private double getAngle(Point point) {
            double x = point.getX() - 0.5 * 500;
            double y = point.getY() - 0.5 * 500;
            return Math.atan2(y, x);
        }

    }

    public void paint(Graphics g){
        Graphics2D g2 = (Graphics2D)g;
       //g2.translate(250, 250);
        g2.rotate(angle,w/2-5,h/2-5);
        drawPie(g2, getBounds(), slice);

    }
    public void drawPie(Graphics2D g, Rectangle area, Slice[] s){
        double total = 0.0D;

        //calculate total value
        for(int i=0;i<s.length;i++)
            total+=s[i].value;
       radius = total/2*Math.PI;
        double curentValue = 0.0D;
        int startAngle = 0; 
        for(int i = 0;i<s.length;i++){

            //s[i].setColor(new Color(numGen.nextInt(256), numGen.nextInt(256), numGen.nextInt(256)));
            startAngle = (int)((curentValue*360)/total);
            int arcAngle = (int)((s[i].value*360)/total) ;
            g.setColor(s[i].color);
            //g.rotate(angle);//row AA
           for(int j=1;j>0;j--){
            g.fillArc(j, j, w, h, startAngle, arcAngle);   

           }
            curentValue+=s[i].value;

        }
    }

}

public class PieChart {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame frame = new JFrame();
        frame.getContentPane().add(new Component());
        frame.setSize(600,600);
        frame.setVisible(true);
    }
} 
```

我怎样才能做到这一点。我写 w/2,h/2，因为在 fillArc 我写宽度和高度 500，但它不绕中心旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:18:39.933

您正在使用

```
g2.rotate(angle,w/2-5,h/2-5); 
```

这将围绕偏离中心点旋转饼图。你可以使用：

```
g2.rotate(angle, (w / 2) + 1, (h / 2) + 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T23:32:50.220

作为替代使用[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)，调用[`setMouseWheelEnabled()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartPanel.html#setMouseWheelEnabled%28boolean%29)封闭`ChartPanel`以启用旋转，如[源代码](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/PieChartDemo1.html#line.121)所示。[`PieChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/PieChartDemo1.html)

![在此处输入图像描述](../Images/1cecee830395ac83734eafbc40ee7675.png)

# c - 尝试从文件导入数据时崩溃

> ID：13433207
> 
> 赞同：0
> 
> 时间：2012-11-17T17:57:28.417
> 
> 标签：c, file

我有一个电话簿应用程序，我试图提供能够读取和写入文件的功能。我已经很容易弄清楚如何编写文件，但是阅读它们确实让我陷入困境。我认为我的主要问题是无法让文件循环（通常一到达循环就会崩溃）。以下是我的影响功能。

以下是结构、主要和菜单功能。

```
typedef struct friends_contact{

   char *First_Name;
   char *Last_Name;
   char *home;
   char *cell;
}fr;
int main() {

fr friends[5];
char buffer[BUFFSIZE];
int counter=0;
int i=0;

menu(friends, &counter,i,buffer);

getch();
return 0;
}
//Menu function
void menu(fr*friends,int* counter, int i,char buffer[]) {
int user_entry=0;
int user_entry2=0;
char user_entry3[50]={'\0'};

printf("Welcome! Would you like to import a file? (1)Yes or (2) No");
scanf("%d",&user_entry);
if(user_entry==1)
     {

     file2(friends,counter,i,user_entry3);

     }else;
do{
     int result;

printf("\nPhone Book Application\n");
printf("1) Add friend\n2) Delete friend\n3) Show a friend\n4) Show  phonebook\n5)Exit\n");   
scanf("%d", &user_entry);

if(user_entry==1)
    {
        add_contact(friends,counter,i,buffer);
    }
    if(user_entry==2)
    {
        delete_contact(friends ,counter,i);
    } 
    if(user_entry==3)
    {
        result=show_contact(friends ,counter,i);
        if(result==0){
                  printf("\nName not Found\n");
                  }else{
                        result;
                        }

   }                  
   if(user_entry==4)
   {
       print_contact(friends, counter,i,user_entry3);
       file2(friends ,counter,i,user_entry3);

   } 
 }while(user_entry!=5);
   if(user_entry==5)
   {
      printf("Would you like to save entries to a file? (1)yes or (2) no");
      scanf("%d",&user_entry2);
         if(user_entry2 == 1)
         {
            printf("Please name your file");
            scanf("%s",user_entry3); 
            file(friends, counter,i,user_entry3);
            printf("Goodbye!"); 

         }else if(user_entry2 == 2){
            printf("Goodbye!"); 
       }
   }

} 
```

这是处理文件读取的函数。

```
void file2(fr*friends ,int* counter, int i, char user_entry3[50])
{

     FILE *read;

     printf("Please enter a file name");
     scanf("%s",user_entry3);
     read=fopen(user_entry3,"r");
    //This is where the crash is taking place!!**
     while(!feof(read)){
        fscanf(read,"%s %s %s %s",friends[i].First_Name,friends[i].Last_Name,friends[i].home,friends[i].cell);
        printf("\n""%s ""%s ""\n""<Home>""%s""\n""<Cell>""%s""\n",friends[i].First_Name,friends[i].Last_Name,friends[i].home,friends[i].cell);

      } 
```

现在我知道该程序可能存在与我所要求的无关的其他问题，但我是 C 的新手，所以这是一项正在进行的工作。我需要弄清楚如何阻止它崩溃，以及如何将它添加到我的其他联系人中（我想我可能有一个想法），这让我发疯了！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:01:43.490

您正在将数据读入未定义的内存区域（您永远不会为结构中的 4 个字符串指针分配任何值）。我没有看到您为、 和`friends[i].First_Name`分配`.Last_Name`内存。`.home``.cell`

您可能希望像这样更改您的结构：

```
typedef struct friends_contact{
   char First_Name[50+1]; // +1 for the '\0' terminating character
   char Last_Name[50+1];
   char home[50+1];
   char cell[50+1];
}fr; 
```

当然，如果文件包含超过 50 个字符的部分（包括 '\0' 终止符），您的代码将再次崩溃，因为`fscanf`除非您为每个字符串指定最大长度，否则不会检查长度，如下所示：

```
fscanf(read,"%50s %50s %50s %50s",friends[i].First_Name,friends[i].Last_Name,friends[i].home,friends[i].cell); 
```

如果要在结构中使用指针，则应`malloc()`在读取之前为每个结构成员`free()`分配内存，并在不再需要时释放分配的内存。

# html - jQuery手风琴高度与内容冲突

> ID：13433213
> 
> 赞同：0
> 
> 时间：2012-11-17T17:58:28.320
> 
> 标签：html, css, jquery-ui

我的 jQuery Accordion 有一些问题。它包含一个复选框、一个小图像和包含在段落标记中的一行文本。

我遇到的问题是我必须为 UI Accordion 设置一个高度才能看到图标。如果我不设置高度，那么 Accordion 就会开始失败，只显示顶线，即使这样，它也会丢失一半。

这是我的 HTML：

```
<div class="ui-accordion" id="jQueryUIAccordion">

<h3><a href="#">My Accordion</a></h3>

<div>

<ul class="badList">

<li class="list1">

<input class="accord1" value="layer1" id="check1" type="checkbox" unchececked;" />
<img class="accord" src="img/blue/img1.png" width="33" height="37"></img> 
<p class="list"> Pick Me 1</p>

</li>

<li class="list2">

<input class="accord1" value="layer1" id="check1" type="checkbox" unchececked;" />
<img class="accord" src="img/blue/img2.png" width="33" height="37"></img> 
<p class="list"> Pick Me 2</p>

</li>

<li class="list3">
<input class="accord1" value="layer1" id="check1" type="checkbox" unchececked;" />
<img class="accord" src="img/blue/img3.png" width="33" height="37"></img> 
<p class="list"> Pick Me 3</p>
</li>

<li class="list4">

<input class="accord1" value="layer1" id="check1" type="checkbox" unchececked;" />
<img class="accord" src="img/blue/img4.png" width="33" height="37"></img> 
<p class="list"> Pick Me 4</p>
</li> 

<li class="list5">

<input class="accord1" value="layer1" id="check1" type="checkbox" unchececked;" />
<img class="accord" src="img/blue/img5.png" width="33" height="37"></img> 
<p class="list"> Pick Me 5</p>

</li>

</ul>
</div>

<script type="text/javascript">
jQuery("#jQueryUIAccordion").accordion({ 
    event: "click",
    collapsible: true,
    autoHeight: true
});
</script> 
```

这是我的CSS：

```
/* Layout helpers
----------------------------------*/
.ui-helper-hidden {
display: none;
font-size: small;
}
.ui-helper-hidden-accessible {
position: absolute;
left: -1e+008;
font-size: small;
}
.ui-helper-reset {
margin: 0;
padding: 0;
border: 0;
outline: 0;
line-height: 1.3;
text-decoration: none;
font-size: small;
list-style: none;
}
.ui-helper-clearfix:after { content: "."; display: block; height: 0; clear: both; visibility:  hidden; }
.ui-helper-clearfix { display: inline-block; }
/* required comment for clearfix to work in Opera \*/
* html .ui-helper-clearfix {
height: auto;
}
.ui-helper-clearfix {
display: block;
width: 250px;
}
/* end clearfix */
.ui-helper-zfix {
width: 250px;
top: 0;
left: 0;
position: absolute;
opacity: 0;
filter: Alpha(Opacity=0);
}

/* Interaction Cues
----------------------------------*/
.ui-state-disabled {
cursor: default !important;
}

/* Component containers
----------------------------------*/
.ui-widget { font-family: Verdana, Arial, sans-serif; font-size: 1.1em; border: 2px solid #334A6F; margin: 0 20px 20px 0; background-color: #CCCCCC; }
.ui-widget .ui-widget {
font-size: 1em;
}
.ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button {
font-family: Verdana, Arial, sans-serif;
font-size: 1em;

}
.ui-widget-content a {
color: #334A6F;
width: 250px;
font-size: small;
}
.ui-widget-header a {
color: #334A6F;
width: 250px;
font-size: small;
}

/* Interaction states
----------------------------------*/
.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default {
border: 1px solid #334A6F;
font-weight: normal;
width: 250px;
font-size: small;
background-color: #001D4B;
}
.ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited {
color: #e3e3e3;
text-decoration: none;
width: 250px;
font-size: small;
}
.ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover,     .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus {
border: 1px solid #334A6F;
font-weight: normal;
color: #ffffff;
width: 250px;
font-size: small;
background-color: #334A6F;
}
.ui-state-hover a, .ui-state-hover a:hover {
text-decoration: none;
width: 250px;
font-size: small;
}
.ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active {
border: 1px solid #cccccc;
background: #ffffff;
font-weight: normal;
color: #FFFFFF;
width: 250px;
font-size: small;
}
.ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited {
color: #334A6F;
width: 250px;
font-size: small;
}

----------------------------------*/
.ui-accordion .ui-accordion-header { cursor: pointer; position: relative; margin-top: 1px; zoom: 1; }
.ui-accordion .ui-accordion-li-fix {

}
.ui-accordion .ui-accordion-header-active {
border-bottom: 0 !important;
background-color: #F00;
}
.ui-accordion .ui-accordion-header a {
display: block;
font-size: 1em;
padding: .5em .5em .5em .7em;
width: 250px;
}
/* IE7-/Win - Fix extra vertical space in lists */
.ui-accordion a {
zoom: 1;
}
.ui-accordion .ui-accordion-header .ui-icon {
position: absolute;
left: 0.5em;
top: 50%;
margin-top: 24px;
background-color: #F00;
}
.ui-accordion .ui-accordion-content {
padding: 1em 1em;
border-top: 0;
margin-top: 1px;
position: relative;
top: 1px;
margin-bottom: 1px;
overflow: hidden;
display: none;
zoom: 1;
background-color: #F00;

}
.ui-accordion .ui-accordion-content-active {
display: block;
background-color: #CCC;
height: 125px;
}
----------------------------------*/

ul.badList {
  list-style-type: none;
  padding-left:20px;
  float: left;
}

ul.badList1 {
  list-style-type: none;
  padding-left:20px;
  float: left;
  position:absolute;
}

LI.list1 { float: left; left: 5px; top: 1px;  height: 35px;line-height: 45px; list-style-position: outside; padding-left: 20px; position: absolute; width: 200px; }

p.list { margin-left: 45px; margin-top: 6px; padding-bottom: 2px;}

.accord1 { top:8px; left: 4px; position: absolute;}
.accord2 { top:8px; left: 4px; position: absolute;}

img.accord  { border: 0 none; float:left; padding-right:10px; background-repeat: no-repeat;  background-position: 0px 2px 0px 35px; margin-top: 2px; }
img.accord2 { border: 0 none; float:left; padding-right:10px; background-repeat: no-repeat; top: -3px; left: 20px; margin-top: 6px; }

/*----- END -----*/ 
```

任何帮助是极大的赞赏。我还在学习，所以请原谅我的代码中的任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:13:24.990

检查您的代码...您`unchecked;`的输入标签中有复选框，这是无效的...如果您不想检查它，那么就不要指定`checked="checked"`属性。

此外，您的`<img/>`标签有一个单独的结束标签。看看这个[小提琴](http://jsfiddle.net/ALBbZ/)。最后，我不相信你必须在javascript中指定自动高度......我相信这是默认设置。

希望这可以帮助！

# mailchimp - Mailchimp 自定义合并标签在某些形式下不起作用

> ID：13433217
> 
> 赞同：4
> 
> 时间：2012-11-17T17:58:56.690
> 
> 标签：mailchimp

我在 Mailchimp 中定义了一些自定义合并标签以进行测试。这些标签在发送活动时工作正常。

活动的输出（在电子邮件中）：

```
Testing Merge Tags
Email: mail@FOO.co.uk
First name: FOO
Just Testing: Testing
Language ID: 0 
```

但是相同的合并标签在某些形式中不起作用（电子邮件地址除外），例如**高级模式下**的“选择加入确认电子邮件”或“取消订阅表单” （我没有测试其他表单）。

退订表单的输出：

```
Email: mail@FOO.co.uk  
First name: 
Just Testing: 
Language ID: 
```

下面的代码用于测试这些合并标签：

```
Testing Merge Tags
Email: *|EMAIL|*
First name: *|FNAME|*
Just Testing: *|MMERGE3|*
Language ID: *|LANG_ID|* 
```

我想知道这是否是 Mailchimp 中的错误？

谢谢。

# sinatra - 我如何将 authlogic 用作专门拆分的 sinatra 应用程序的身份验证中间件？

> ID：13433222
> 
> 赞同：1
> 
> 时间：2012-11-17T17:59:28.350
> 
> 标签：sinatra, rack, authlogic

我在我的应用程序中使用 authlogic。我也对 A/B 测试进行了拆分。我想拆分使用 authlogic 进行身份验证，而不是 BasicAuthentication 或不进行身份验证。

因此，我将身份验证类设置为拆分 sinatra 应用程序的中间件：

```
Split::Dashboard.use SinatraAuthlogic 
```

那么这应该是我的 authlogic 中间件：

```
class SinatraAuthlogic
  def initialize(app)
    @app = app
  end

  def call(env)
    if is_user_logged_in?
      puts @app.class
      response = @app.call env
    else
      response = Rack::Response.new
      response.redirect '/login'
      response.finish
    end
  end

private

  def is_user_logged_in?
    logged_in = UserSession.find && UserSession.find.user
  end
end 
```

问题是我应该在 is_user_logged_in 中放入什么才能使用 authlogic？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:00:52.420

经过一番尝试，我想出了这个解决方案：

```
class Authlogic::RackAdapter < Authlogic::ControllerAdapters::AbstractAdapter
  def initialize(env)
    request = Rack::Request.new(env)
    super(request)
    Authlogic::Session::Base.controller = self
  end
end 
```

在我的中间件类中，我修改了“is_user_logged_in？” 这个方法：

```
def is_user_logged_id?(env)
  begin
    adapter = Authlogic::RackAdapter.new(env)
    logged_in = UserSession.find && UserSession.find.user
    return true
  rescue Exception => e
    return false      
  end
end 
```

这样我就可以找到用户......但是，当用户没有登录时，如果 nil 我得到一个异常，这就是为什么我将整个代码放在救援块中......

欢迎任何更好的方法。

# ios - 包含 Facebook 密钥重要吗？

> ID：13433223
> 
> 赞同：0
> 
> 时间：2012-11-17T17:59:42.973
> 
> 标签：ios, facebook, ios6, sharing, sharekit

我正在使用 Sharekit 将共享功能添加到我的客户的应用程序中。我知道他的 appID，但不确定 Facebook 密钥。我的问题是是否有必要包含 Facebook 密钥。我可以没有它吗？

如果是这样，我需要做的就是：

```
#define SHKFacebookUseSessionProxy  YES 
#define SHKFacebookKey         @"some value for the app id"
#define SHKFacebookSecret      @""
#define SHKFacebookSessionProxyURL  @"" 
```

我对吗？此外，Facebook Key 指的是 App Id 对吗？

需要一些指导...

# ios - 将“NSNumber *__strong”发送到不兼容类型“CLLocationDegrees”（又名“double”）的参数

> ID：13433234
> 
> 赞同：5
> 
> 时间：2012-11-17T18:01:33.577
> 
> 标签：ios, cllocation

```
NSNumber * latitude =  [NSNumber numberWithDouble:[[cityDictionary valueForKeyPath:@"coordinates.latitude"]doubleValue]];

      NSNumber * longitude =  [NSNumber numberWithDouble:[[cityDictionary valueForKeyPath:@"coordinates.longitude"]doubleValue]];

    CLLocation *listingLocation = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude]; 
```

我在上面的第 3 行收到以下错误：

```
Sending 'NSNumber *__strong' to parameter of incompatible type 'CLLocationDegrees' (aka 'double') 
```

我知道这是因为我试图将 NSNumber 传递到它期望双倍的地方。但是由于ARC，铸造不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:44:30.147

调用`[cityDictionary valueForKeyPath:@"coordinates.latitude"]`已经给了你一个`NSNumber`对象。为什么将其转换为 double 然后创建一个新的`NSNumber`？

你可以这样做：

```
NSNumber *latitude = [cityDictionary valueForKeyPath:@"coordinates.latitude"];
NSNumber *longitude = [cityDictionary valueForKeyPath:@"coordinates.longitude"];
CLLocation *listingLocation = [[CLLocation alloc] initWithLatitude:[latitude doubleValue] longitude:[longitude doubleValue]]; 
```

如果事实证明这`[cityDictionary valueForKeyPath:@"coordinates.latitude"]`实际上是返回一个`NSString`而不是一个`NSNumber`，那么这样做：

```
CLLocationDegrees latitude = [[cityDictionary valueForKeyPath:@"coordinates.latitude"] doubleValue];
CLLocationDegrees longitude = [[cityDictionary valueForKeyPath:@"coordinates.longitude"] doubleValue];
CLLocation *listingLocation = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:04:41.933

您将 NSNumber 类型发送到双精度参数。您可以考虑将其更改为`CLLocationDegree`'s 或`double`，但如果您在其他地方使用它或将其与核心数据一起存储，我会将其保留为`NSNumber`.

```
CLLocation *listingLocation = [[CLLocation alloc] initWithLatitude:[latitude doubleValue] longitude:[longitude doubleValue]]; 
```

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::PostsController#update 中的错误

> ID：13433240
> 
> 赞同：0
> 
> 时间：2012-11-17T18:01:51.020
> 
> 标签：ruby-on-rails

无法批量分配受保护的属性：tags_attributes

追踪：

```
activemodel (3.2.9) lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'
activemodel (3.2.9) lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'
activemodel (3.2.9) lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'
activemodel (3.2.9) lib/active_model/mass_assignment_security.rb:230:in `sanitize_for_mass_assignment'
activerecord (3.2.9) lib/active_record/attribute_assignment.rb:75:in `assign_attributes'
activerecord (3.2.9) lib/active_record/persistence.rb:216:in `block in update_attributes'
activerecord (3.2.9) lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
activerecord (3.2.9) lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
activerecord (3.2.9) lib/active_record/transactions.rb:208:in `transaction'
activerecord (3.2.9) lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
activerecord (3.2.9) lib/active_record/persistence.rb:215:in `update_attributes'
app/controllers/posts_controller.rb:65:in `block in update'
actionpack (3.2.9) lib/action_controller/metal/mime_responds.rb:270:in `call'
actionpack (3.2.9) lib/action_controller/metal/mime_responds.rb:270:in `retrieve_collector_from_mimes'
actionpack (3.2.9) lib/action_controller/metal/mime_responds.rb:194:in `respond_to'
app/controllers/posts_controller.rb:64:in `update'
actionpack (3.2.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.9) lib/active_support/callbacks.rb:425:in `_run__3328307413760429839__process_action__1872096882865630313__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.9) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:601:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.9) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__208513489912999818__call__4048539670769559606__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.9) lib/rails/engine.rb:479:in `call'
railties (3.2.9) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/home/tater/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/home/tater/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/home/tater/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我该如何解决？我在[http://guides.rubyonrails.org/index.html上学习 ruby](http://guides.rubyonrails.org/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:50:06.130

我认为你在`Post`模型中使用了这个：

```
accepts_nested_attributes_for :tags 
```

因此，将其添加到您的`Post`模型中：

```
attr_accessible :tags_attributes 
```

更多信息在这里[嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:06:16.477

在您的模型中，添加

```
# model.rb
attr_accessible :name_of_attributes, :seperated_by_commas, :like_these_here 
```

# sql - 数据库（外键）问题

> ID：13433241
> 
> 赞同：0
> 
> 时间：2012-11-17T18:01:51.627
> 
> 标签：sql, sql-server

所以我需要制作一个用于管理歌曲/CD 的注册包。我的问题是我需要将艺术家链接到曲目，但它可能是一个乐队或只是一个艺术家，但我不知道我需要如何做到这一点。

现在有这个：http: [//imgur.com/V71UX](http://imgur.com/V71UX)

在歌曲中，可以添加乐队或艺术家或两者兼而有之。所以乐队存在艺术家，这就是为什么他们之间有一张桌子。

现在出现的问题是，由于外键的原因，不可能将其中一个留空，但我觉得不仅如此，而且我这样做是错误的。

有人可以推动我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:07:58.723

```
track
    id
    title

artist
    id
    name

band
    id
    name

artist_band
    artist_id
    band_id

artist_track
    artist_id
    track_id

band_track
    band_id
    track_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:12:24.487

您可以将`n_artist`and定义`n_band`为 allowed `NULL`s。当列是 时，不检查外键约束`NULL`。

然后，您还可以包含一个`CHECK`约束。您可以强制这些列中至少有一个不为空。或者您可以强制*其中*一列不为空。哪个正确取决于您的域。对于乐队和艺术家，我通常认为第二个是正确的（即，我会将曲目定义为乐队或艺术家的曲目。我不确定应该对与两者相关的曲目施加什么解释)

```
CREATE TABLE T (
     /* Other Columns */
     BandID int null,
     ArtistID int null,
     /* Other constraints */
     constraint FK_Bands FOREIGN KEY (BandID) references Bands (ID),
     constraint FK_Artists FOREIGN KEY (ArtistID) references Artists (ID),
     constraint CK_SingleAssociation CHECK (
          (BandID is null and ArtistID is not null) or
          (BandID is not null and ArtistID is null)
     )
) 
```

# android - 所有活动中的动画背景

> ID：13433242
> 
> 赞同：0
> 
> 时间：2012-11-17T18:02:13.060
> 
> 标签：android

我需要为我的所有活动在后台运行动画。

我有两个问题：

1.- 这个背景动画必须是固定的，不能随着活动过渡而改变。我认为最好的解决方案是播放这个动画的背景活动，而其他（透明背景）活动在它上面

2.- 我必须在后台活动中移动动画位置。我如何与这个后台活动沟通，必须从前台活动更改位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:25:19.813

尝试使用片段。让动画部分在一个片段上运行，并使用其他片段显示透明的背景活动。

# php - PHP - 将相同的值传递给多个页面

> ID：13433247
> 
> 赞同：1
> 
> 时间：2012-11-17T18:02:33.643
> 
> 标签：php

我有不止一页向它传递两个值，这些值是 Sname 和 SID ..

我用过

```
$sql = "SELECT s.Sname, e.PID , s.SID
                          from student AS s
                          INNER JOIN evaluator AS e                       
                          WHERE (e.EID1 = '$id' AND s.PID = e.PID) OR  (e.EID2 = '$id' AND s.PID = e.PID)
                          GROUP BY s.Sname  ";
         $result = mysql_query ($sql, $connection);

         echo "<tr><th>Student Name </th>";
         echo "<td><select id='Sname' name='Sname' >";

         echo "<option value='' selected='selected'>--</option> ";

        while( $row = mysql_fetch_array($result))
   {

      echo "<option value='$row[SID]|$row[Sname]' >$row[Sname]</option> ";

   } 
```

在我输入的接收页面中

```
 list($SID, $Sname) = explode("|", $_POST['Sname']); 
```

它可以工作，但是对于其他页面我想要相同的值，我试图放置相同的explode（）但它不起作用..给我一个错误说未定义的索引：Sname +未定义的偏移量：1 ..我的问题是如何将相同的值 Sname 和 SID 也传递给其他页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:05:34.277

您可以通过会话执行此操作，将值存储在要传递的会话中

首先你需要开始会话

```
<?php //must not any spave before php tag and must be on very first line 
session_start(); 
```

例如，比您想要的存储价值

```
$_SESSION['views'] = 5; 
```

比你可以通过你想要的页面访问价值

```
echo "Views=". $_SESSION['views']; 
```

# javascript - 单击时永久突出显示 javascript 项目

> ID：13433249
> 
> 赞同：0
> 
> 时间：2012-11-17T18:02:50.470
> 
> 标签：javascript, jquery, hyperlink, highlight, nav

> **可能重复：**
> [单击时jquery突出显示链接](https://stackoverflow.com/questions/813046/jquery-highlight-the-link-when-clicked)

我有这个导航：

```
<div id="nav">
    <ul>
        <li><a href="" data-filter="*">All</a></li>
        <li><a href="" data-filter=".cat1">Category 1</a></li>
        <li><a href="" data-filter=".cat2">Category 2</a></li>
        <li><a href="" data-filter=".cat3">Category 3</a></li>
    </ul>
</div> 
```

和这个管理插件的jQuery代码：

```
 $(document).ready(function(){
    var $container = $('#content_iso');
    $container.isotope({
        filter: '*',
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false,
        }
    });
    $('#nav a').click(function(){
    var selector = $(this).attr('data-filter');
    $container.isotope({
        filter: selector,
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false,
        }
    });

  return false;
}); 
```

});

有一些用于动画的 Css ......但并不重要。问题是：我想让导航链接在单击时突出显示，但是当我单击另一个链接时，我希望它突出显示而另一个不突出。我尝试添加

```
$(this).css('border', 'solid black'); 
```

到点击功能，但它只会在点击下一个链接时突出​​显示而不撤消它。请帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:08:32.087

改用 css 类：

```
.active{border:1px solid black}

$('#nav a').click(function(){
    $('a.active','#nav').removeClass('active');
    $(this).addClass('active');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:05:20.553

```
$('#nav a').click(function(){
   $('#nav a').css('border',''); // <== add this line : remove border on other links
   $(this).css('border', 'solid black'); 
```

[示范](http://jsfiddle.net/wu9fk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T18:09:09.050

或者，您可以通过 CSS 类设置元素的样式，在单击时从所有导航链接中删除此类并将其添加到单击的链接中。

```
$('#nav a').click(function() {
   $('#nav a').removeClass('selected');
   $(this).addClass('selected');

.selected {
    border: 1px solid #000;
} 
```

# php - 有 require_once(xyz.php); 打破了我的标题重定向，我做错了什么？

> ID：13433251
> 
> 赞同：2
> 
> 时间：2012-11-17T18:02:57.357
> 
> 标签：php

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我的 bamfg_functions.php 代码：

```
<?php
error_reporting(E_ALL & ~E_NOTICE);
define('THIS_SCRIPT', 'test');
define('CSRF_PROTECTION', true); 
require_once('global.php');

function bamfg_navigation()
{
global $vbulletin;

if ($vbulletin->userinfo['userid']) {
$navigation .= "<center>- Browse Vehicles - <a href='./bamfg.php'>Search  Vehicles</a>     -<br>- <a href='./bamfg_vehicle.php'>ADD / EDIT Vehicles</a><br><br>      </center>";
}
else {
$navigation .= "<center>- Browse Vehicles - <a href='./bamfg.php'>Search Vehicles</a>  -<br><br></center>";
}
return $navigation;
}
?> 
```

这就是我将 bamfg_functions.php 包含到我的 bamfg_vehicle.php 文件中的方式。

```
require('bamfg_functions.php');
bamfg_navigation = bamfg_navigation();
global $bamfg_navigation; 
```

这是我在 bamfg_vehicle.php 中执行的许多 do== 语句之一。

```
if($_REQUEST['do'] == 'add_comment') {
$userid = $vbulletin->userinfo['userid'];
$username = $vbulletin->userinfo['username'];
$vbulletin->input->clean_gpc('r', 'id', TYPE_INT);
$vehicle_id = $vbulletin->GPC['id'];
$owner_userid = $_GET["owner_userid"];

// ** THIS GETS THE "POSTED" INFORMATION FROM THE PAGE AND CONVERTS TO VARIABLE - CLEANS INPUT
$vbulletin->input->clean_array_gpc('p', array(
'comment' => TYPE_NOHTML,
));  

$comment = $vbulletin->GPC['comment'];

// MAKES SURE THE COMMENT ISN'T BLANK
if (strlen($comment) == 0){
Header( "Location: $website_url/bamfg_vehicle.php?do=view_vehicle&    id=$vehicle_id" );
}

else {
$sql = "INSERT INTO ". TABLE_PREFIX ."BAMFG_comment (

  comment_id, 
  vehicle_id, 
  userid,
  owner_userid, 
  username,
  comment) VALUES (

  '". $comment_id ."',
  '". $vehicle_id ."',
  '". $userid ."',
  '". $owner_userid ."',
  '". $username ."',
  '". $comment ."')";

$db->query_write($sql);
Header( "Location: $website_url/bamfg_vehicle.php?do=view_vehicle&id=$vehicle_id" );
}} 
```

我的问题是当我“需要” bamfg_functions.php 文件时，它会破坏我所有的标头重定向，我也尝试过 require_once(bamfg_functions.php); 并且只包括（bamfg_functions.php）；结果相同..

一旦我注释掉调用文件的行，标题就会重定向工作，这让我发疯了..

我意识到只有在调用之前没有向浏览器输出数据时，标头重定向才有效，但我在任何地方都看不到？

任何建议都会很棒，谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:10:20.093

启用`error_reporting(E_ALL);`并查看它的内容。删除`?>`您的尾随形式`bamfg_functions.php`- 如果这可以解决您的问题，那么您在`?>`. 如果问题仍然存在，您可以通过启用输出缓冲来解决它（**但是您应该确定它并修复甚至“解决”问题的解决方法）。**只需添加`ob_start();`脚本的第一行即可。

你好像也用`global`错了。`global`不是声明全局变量。就是让全局变量在方法/类/函数范围内**可见**。因此，例如，这段代码没有多大意义：

```
$a = "foo";
global $a;

function b() {
  echo $a;
} 
```

虽然这是“更好”（引用，因为使用`global`总是不好）：

```
$a = "foo";

function b() {
  global $a;
  echo $a;
} 
```

但即使你确定你需要`global`（即如果你不能过多地修改代码）你仍然不应该使用`global`而是访问`$_GLOBALS[]`。所以这是最好的坏事：

```
$a = "foo";

function b() {
  echo $_GLOBALS['a'];
} 
```

# database - 将列表列表保存到文件的最有效方法？

> ID：13433255
> 
> 赞同：2
> 
> 时间：2012-11-17T18:04:22.863
> 
> 标签：database, vb.net, visual-studio, file-io

在 VS 2010 中，我有一个很大的字符串列表，列表中的每个项目也包含字符串列表（它不会再进一步​​了）。好消息是只会添加。不会从列表中删除任何内容。

我不想使用数据库。由于列表可能会变得很大，所以 XML 对我来说似乎很慢。我找不到任何适用于我的案例的通用解决方案。任何想法？

编辑：好的，我猜我的一些代码会让它更清楚。

```
Class Word
    Public theWord As String
    Public SubWords As New List(Of SubWord)
    Public Count As Integer = 1
    Sub New(ByRef Word As String)
        theWord = Word
    End Sub
    Public Sub AddSubWord(ByRef Word As String)
        Dim SubWordCount As Integer = SubWords.Count - 1
        Dim Found As Boolean
        For i = 0 To SubWordCount
            If SubWords(i).theWord = Word Then
                SubWords(i).Count += 1
                Found = True
                Exit For
            End If
        Next
        If Found = False Then
            SubWords.Add(New SubWord(Word))
        End If
    End Sub
    Public Overrides Function ToString() As String
        Return theWord
    End Function
End Class

Class SubWord
    Public theWord As String
    Public Count As Integer = 1
    Sub New(ByRef Word As String)
        theWord = Word
    End Sub
    Public Overrides Function ToString() As String
        Return theWord
    End Function
End Class 
```

我的清单也是：

```
Dim Words As New List(Of Word) 
```

目的是如果单词不在列表中，则将单词添加到列表中，如果不增加它的计数。子词也一样。稍后，所有列表将根据其计数进行排序。会有很多单词，每个单词都有一个巨大的子词列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:59:58.680

XML 似乎确实是最好的选择，但如果您真的关心效率，并且您确定数据结构将来不会改变，您可以简单地将数据存储在一个分隔的文本文件中。例如：

```
Private Sub SaveList(filePath As String, list As List(Of List(Of String)))
    Const fieldDelimiter As String = ","
    Const recordDelimiter As String = Environment.NewLine
    Dim temp As New List(Of String)()
    For each i as List(Of String) in list)
        temp.Add(String.Join(fieldDelimiter, i.ToArray()))
    Next
    Dim contents As String = String.Join(recordDelimiter, temp.ToArray())
    File.WriteAllText(filePath, contents)
End Sub 
```

或者，更有效地：

```
Private Sub SaveList(filePath As String, list As List(Of List(Of String)))
    Const fieldDelimiter As String = ","
    Const recordDelimiter As String = Environment.NewLine
    Using writer As New StreamWriter(filePath)
        Dim firstRecord As Boolean = True
        For Each record as List(Of String) In list)
            If firstRecord Then
                firstRecord = False
            Else
                writer.Write(recordDelimiter)
            End If
            Dim firstField As Boolean = True
            For Each field As String In record
                If firstField Then
                    firstField = False
                Else
                    writer.Write(fieldDelimiter)
                End If
                writer.Write(field)
            Next
        Next
    End Using
End Sub 
```

这种方法的缺点是您需要确保您使用的分隔符永远不会出现在任何记录的任何字段中。如果您确定字符串永远不会包含某个不寻常的字符，那么您可以使用它。否则，另一种选择是逃避任何事件。因此，例如，如果您使用逗号作为分隔符，那么您需要替换所有出现的`,`with `\,`，然后还替换所有出现的`\`with `\\`。当然，这不仅会使您的保存逻辑复杂化，还会使您的加载逻辑复杂化。

**更新**

如果速度是您主要关心的问题，并且您可以保证 Words 和 Subwords 都小于 100 个字符，那么读取和写入数据的最快方法是将每个单词写入文本文件的新行，然后是每个子词使用固定宽度的字段。例如，如果您的最大长度为 5，则文件可能如下所示：

```
Word Sub1 Sub2
W2   SW1  SW2  SW3
W3
W4   SubWdSub2. 
```

正如您在该示例中看到的那样，有四个单词（“Word”、“W2”、“W3”和“W4”），它们每个都有不同数量的子词。“Word”的子词是“Sub1”和“Sub2”。“W3”没有子词，W4 有 2 个（“SubWd”和“Sub2.”）。

因此，要写出该文件，您可以执行以下操作：

```
Private Sub SaveWords(filePath As String, words As List(Of Word))
    Const maxLength As Integer = 100
    Using writer As New StreamWriter(filePath)
        Dim firstWord As Boolean = True
        For Each w As Word in words
            If firstWord Then
                firstWord = False
            Else
                writer.WriteLine()
            End If
            writer.Write(w.theWord.PadRight(maxLength))
            For Each s As SubWord In w.SubWords
                writer.Write(s.theWord.PadRight(maxLength))
            Next
        Next
    End Using
End Sub 
```

# sql-server-2008 - 如何首先在 EF 代码中更改/设置排序规则

> ID：13433257
> 
> 赞同：9
> 
> 时间：2012-11-17T18:04:30.450
> 
> 标签：sql-server-2008, entity-framework-4.1, ef-code-first

我想首先更改由 ef 代码创建的整个数据库的排序规则，我尝试通过在创建后运行脚本来做到这一点，但它不起作用，

```
_dbContext.Database.Delete();
_dbContext.Database.CreateIfNotExists();
_dbContext.Database.ExecuteSqlCommand("ALTER DATABASE afi COLLATE French_CI_AI"); 
```

是否可以在创建数据库之前设置排序规则？

那是我得到的例外：

> 重置连接会导致与初始登录不同的状态。登录失败。用户“afi”登录失败。当前命令发生严重错误。结果，如果有的话，应该丢弃。
> 
> [SqlException (0x80131904)：重置连接会导致与初始登录不同的状态。登录失败。
> 
> 用户“afi”登录失败。当前命令发生严重错误。结果，如果有的话，应该被丢弃。]
> System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +388
> System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +688
> System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +4403
> System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +84
> System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel , Int32 超时, SqlInternalTransaction 事务, TdsParserStateObject stateObj, Boolean isDelegateControlRequest) +1370
> System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction, Boolean isDelegateControlRequest) +674
> System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName) +547
> System.Data.SqlClient.SqlInternalConnection.BeginTransaction(IsolationLevel iso) +18
> System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevelisolationLevel) +211
> 系统。 Data.EntityClient.EntityConnection.BeginDbTransaction(IsolationLevel 隔离级别) +155
> 
> [EntityException：在提供程序连接上启动事务时发生错误。详情见内部异常。]
> System.Data.EntityClient.EntityConnection.BeginDbTransaction(IsolationLevelisolationLevel) +4298876
> System.Data.EntityClient.EntityConnection.BeginTransaction() +10
> System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options) + 538 System.Data.Entity.Internal.InternalContext.SaveChanges() +218 Afi.Domain.Storage.AfiDbContext.SaveChanges() 在 c:\inetpub\wwwroot\afi\src\Domain\Storage\AfiDbContext.cs:190
> Afi。 c:\inetpub\wwwroot\afi\src\Domain\Storage\EntitySession.cs:54 中的 Domain.Storage.EntitySession.Commit()
> C:\inetpub\wwwroot\afi\src\Web\Controllers\CIController.cs:263
> Afi.Web.Controllers.CIController.Seed(Boolean excludeSomeData) 在 c:\inetpub \wwwroot\afi\src\Web\Controllers\CIController.cs:89
> lambda_method(Closure, ControllerBase, Object[]) +81
> System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary 2 参数) +39 System.Web .Mvc.Async.<>c_ *DisplayClass42.b* _41() +34 System.Web.Mvc.Async.<>c_ *DisplayClass39.b* _33() +124 System.Web.Mvc.Async.<>c_ *DisplayClass4f.b* _49 () +837307 System.Web.Mvc.Async.<> *c_DisplayClass4f.b*`2 parameters) +261
> System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`
> ****_49() +837307 System.Web.Mvc.Async.<>c_ *DisplayClass37.b* _36(IAsyncResult asyncResult) +15
> System.Web.Mvc.Async.<>c_ *DisplayClass2a.b* _20() +33 System.Web.Mvc .Async.<>c_ *DisplayClass25.b* _22(IAsyncResult asyncResult) +837892
> System.Web.Mvc.<>c_ *DisplayClass1d.b* _18(IAsyncResult asyncResult) +28
> System.Web.Mvc.Async.<>c_ *DisplayClass4.b* _3 (IAsyncResult ar) +15 System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +65
> System.Web.Mvc.Async.<>c_ *DisplayClass4.b* _3(IAsyncResult ar) +15 System.Web.Mvc.Controller。 EndExecute(IAsyncResult asyncResult) +51
> System.Web.Mvc.<>c_*DisplayClass8.b* _3(IAsyncResult asyncResult) +42
> System.Web.Mvc.Async.<>c_ *DisplayClass4.b* _3(IAsyncResult ar) +15 System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51
> System.Web。 CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288****

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:24:06.943

一种解决方法可能是执行 sql 命令来创建数据库，而不是使用 _dbContext.Database.CreateIfNotExists();

> _dbContext.Database.ExecuteSqlCommand("
> 
> 在 PRIMARY 上创建数据库 [databasename] (NAME = N'databasename', FILENAME = N'c:\PathToData\databasename.mdf', SIZE = 2048KB, FILEGROWTH = 1024KB) 登录 (NAME = N'databasename_log', FILENAME = N 'c:\PathToLog\databasename_log.ldf' , SIZE = 1024KB , FILEGROWTH = 10%) 整理 French_CI_AI
> 
> ");

为了便于阅读，我添加了一点间距，显然将 databasename 更改为您想要的名称，还有 PathToData 和 PathToLog。

如果您将服务器的排序规则更改为 French_CI_AI，所有新数据库都将使用此排序规则创建，但它并不总是最佳选择，如果您已经过了开发阶段，也会引起头疼，因为它也会影响 temp_db 数据库（临时表和其他临时对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-29T22:59:03.070

对于 c# SqlConnection.ClearAllPools(); 在启动下一个连接之前也可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T22:08:42.590

仅将 [ ] 添加到名称数据库，

```
_dbContext.Database.ExecuteSqlCommand("ALTER DATABASE [afi] COLLATE French_CI_AI"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-13T12:04:53.683

如果要更改当前数据库的排序规则，可以使用此代码段

```
_dbContext.Database.ExecuteSqlCommand(TransactionalBehavior.DoNotEnsureTransaction,
                        "ALTER DATABASE CURRENT COLLATE Cyrillic_General_CI_AS"); 
```

或者

```
_dbContext.Database.ExecuteSqlCommand(TransactionalBehavior.DoNotEnsureTransaction,
                            string.Format("ALTER DATABASE [{0}] COLLATE Cyrillic_General_CI_AS", _dbContext.Database.Connection.Database)); 
```

[在实体框架 6 中更改数据库](https://stackoverflow.com/questions/21699075/alter-database-in-entity-framework-6)**

# java - 在线算法中的“飞过去”？

> ID：13433258
> 
> 赞同：2
> 
> 时间：2012-11-17T18:04:31.860
> 
> 标签：java, algorithm, line

大多数情况下，这段代码一切都很完美。

```
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.*;

public class Main {

    public static void main(String[] args) {
        new Main();
    }

    private Main() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new Game());
        f.setResizable(false);
        f.pack();
        f.setVisible(true);
    }

    private class Game extends JPanel implements MouseListener {
        private static final long serialVersionUID = -7048656881407382561L;
        int x = 300, y = 300;
        Image thing;
        ImageIcon ico = new ImageIcon("smiley.png");
        private Game() {
            setPreferredSize(new Dimension(600, 600));
            thing = ico.getImage();
            addMouseListener(this);
        }
        private void goTo(int stX, int stY, int endX, int endY) {
            int dx = Math.abs(endX - stX);
            int dy = Math.abs(endY - stY);
            int sx = endX > stX ? 1 : -1;
            int sy = endY > stY ? 1 : -1;
            int err = dx - dy;
            while (true) {
                x = stX;
                y = stY;
                repaint();
                validate();
                if (stX == endX && stY == endY) break;
                if ((err*2) > -dy) {
                    err -= dy;
                    stX += sx;
                }
                if ((err*2) < dx) {
                    err += dx;
                    stY += sy;
                }
                try {
                    Thread.sleep(10);
                } catch (InterruptedException e) {}
            }
        }
        private void goTo(final int endX, final int endY) {
            new Thread(new Runnable() {
                @Override
                public void run() {
                    goTo(x, y, endX, endY);
                }
            }).start();
        }
        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            ((Graphics2D)g).drawImage(thing, x, y, null);
        }
        @Override
        public void mousePressed(MouseEvent e) {
            goTo(e.getX(), e.getY());
        }
        public void mouseReleased(MouseEvent e) {} //These
        public void mouseEntered(MouseEvent e) {}  //are
        public void mouseExited(MouseEvent e) {}   //useless
        public void mouseClicked(MouseEvent e) {}  //methods
    }

} 
```

只有一个问题：有时，看似随意，图像只是继续前进，而不是在鼠标点击的地方停止。通常它可以工作，但有时它会搞砸并继续前进。

这是与它有关的图像。 ![笑脸](../Images/437008ab35aedd0a4a9d2de0d68c2ddf.png)

我注意到，如果你在他的眼睛之间点击，它总是会飞走。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:15:37.450

我稍微更改了您的 while 语句，它似乎对我来说工作正常。

```
 private void goTo(int stX, int stY, int endX, int endY) {
        int dx = Math.abs(endX - stX);
        int dy = Math.abs(endY - stY);
        int sx = endX > stX ? 1 : -1;
        int sy = endY > stY ? 1 : -1;
        int err = dx - dy;
        while (stX != endX && stY != endY) {
            x = stX;
            y = stY;
            repaint();
            validate();
            if ((err*2) > -dy) {
                err -= dy;
                stX += sx;
            }
            if ((err*2) < dx) {
                err += dx;
                stY += sy;
            }
            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {}
        }
    } 
```

注意这一行的变化：`while (stX != endX && stY != endY) {`

您还可以考虑添加一个切换布尔值，这样您就不能在图像移动时发出另一个 goTo，因为现在您可以通过快速点击获得一些非常有趣的结果。

# sql - sql选择多行的最早日期

> ID：13433263
> 
> 赞同：5
> 
> 时间：2012-11-17T18:04:56.983
> 
> 标签：sql, postgresql, greatest-n-per-group

我有一个如下所示的数据库；

```
circuit_uid   |  customer_name   | location      | reading_date | reading_time | amps | volts  |  kw  | kwh | kva  |  pf  |  key
--------------------------------------------------------------------------------------------------------------------------------------
cu1.cb1.r1    | Customer 1       | 12.01.a1      | 2012-01-02   | 00:01:01     | 4.51 | 229.32 | 1.03 |  87 | 1.03 | 0.85 |    15
cu1.cb1.r1    | Customer 1       | 12.01.a1      | 2012-01-02   | 01:01:01     | 4.18 | 230.3 | 0.96 |  90 | 0.96 | 0.84 |    16
cu1.cb1.s2    | Customer 2       | 10.01.a1      | 2012-01-02   | 00:01:01     | 7.34 | 228.14 | 1.67 | 179 | 1.67 | 0.88 | 24009
cu1.cb1.s2    | Customer 2       | 10.01.a1      | 2012-01-02   | 01:01:01     | 9.07 |  228.4 | 2.07 | 182 | 2.07 | 0.85 | 24010
cu1.cb1.r1    | Customer 3       | 01.01.a1      | 2012-01-02   | 00:01:01     | 7.32 | 229.01 | 1.68 | 223 | 1.68 | 0.89 | 48003 
cu1.cb1.r1    | Customer 3       | 01.01.a1      | 2012-01-02   | 01:01:01     | 6.61 | 228.29 | 1.51 | 226 | 1.51 | 0.88 | 48004 
```

我要做的是产生一个结果，该结果使每个客户的 KWH 读数从该`min(reading_time)`日期的最早 ( ) 开始，用户将在 Web 表单中选择该日期。

结果将/应该类似于；

```
Customer 1   87
Customer 2   179
Customer 3   223 
```

这里每天显示的行数超过了这里显示的行数，并且客户数量更多，并且客户数量会定期变化。

我对 SQL 没有太多经验，我看过子查询等，但我没有能力通过每个客户的最早阅读来弄清楚如何安排它，然后只输出`kwh`列。

这是在 Redhat/CentOS 上的 PostgreSQL 8.4 中运行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:11:11.707

```
select customer_name,
       kwh,
       reading_date, 
       reading_time
from (
   select customer_name,
          kwh,
          reading_time,
          reading_date,
          row_number() over (partition by customer_name order by reading_time) as rn
   from readings
   where reading_date = date '2012-11-17'
) t
where rn = 1 
```

作为备选：

```
select r1.customer_name,
       r1.kwh, 
       r1.reading_date,
       r1.reading_time
from readings r1
where reading_date = date '2012-11-17'
and reading_time = (select min(r2.reading_time)
                    from readings
                    where r2.customer_name = r1.customer_name
                    and r2.read_date = r1.reading_date); 
```

但我希望第一个更快。

顺便说一句：您为什么将日期和时间存储在两个单独的列中？您是否知道这可以通过`timestamp`列更好地处理？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T18:16:27.123

这应该是最快的解决方案之一：

```
SELECT DISTINCT ON (customer_name)
       customer_name, kwh  -- add more columns as needed.
FROM   readings
WHERE  reading_date = user_date
ORDER  BY customer_name, reading_time 
```

似乎是另一个应用：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:10:08.923

```
 SELECT rt.circuit_uid ,  rt.customer_name, rt.kwh
   FROM READING_TABLE rt JOIN  
       (SELECT circuit_uid, reading_time
       FROM READING_TABLE
       WHERE reading_date = '2012-01-02'
       GROUP BY customer_uid
       HAVING MIN(reading_time) = reading_time) min_time
   ON (rt.circuit_uid = min_time.circuit_uid 
      AND rt.reading_time = min_time.reading_time); 
```

参数化上述查询中的 reading_date 值。

# jquery - 在移动设备上模拟鼠标事件的 jQuery 触摸事件

> ID：13433272
> 
> 赞同：1
> 
> 时间：2012-11-17T18:06:22.743
> 
> 标签：jquery, touch

我有一个区域图，当用户将鼠标移到/移出不同的地图区域项目时，我会在区域图图像旁边显示/隐藏一个图像。我还捕获了对地图区域项目的点击并执行了一些功能。现在，我想在没有鼠标（即手指）的设备上为用户提供这项工作。

我的鼠标悬停/移出/单击的代码是：

```
$('area[id^="maparea"]').mouseover(function () {
    // show image associated with this map area item
});
$('area[id^="maparea"]').mouseout(function () {
// hide image associated with this map area item
});
$('area[id^="maparea"]').click(function () {
    // select the image associated with the map area item
}); 
```

我怎样才能拥有与触摸事件类似的功能？

点击事件应该继续按原样工作。当您在我感兴趣的区域地图上移动手指（不抬起手指）时，图像的动态变化。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:19:54.547

您需要使用特定的`touch`库，例如

[http://danielglyde.blogspot.co.uk/2012/08/touchit-jquery-plugin-for-touch-events.html](http://danielglyde.blogspot.co.uk/2012/08/touchit-jquery-plugin-for-touch-events.html)

# java - 用户是否需要开发程序所需的相同软件？

> ID：13433273
> 
> 赞同：0
> 
> 时间：2012-11-17T18:06:27.070
> 
> 标签：java

当我制作/编译/构建一个项目，然后在别人的电脑上测试它时，我安装在我电脑上的所有项目是否也需要安装在其他人的电脑上？例如，我可能在我的应用程序中使用 GPU 处理，为了让它在我的计算机上运行，​​我需要下载一个大小接近 1GB 的 Nvidia 软件。使用我的应用程序的用户不需要下载该软件吗？这是我需要下载的软件：[https ://developer.nvidia.com/cuda-downloads](https://developer.nvidia.com/cuda-downloads)

那么最终用户是否也需要安装它？如果最终用户没有 Nvidia 显卡，该应用程序仍然可以工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:08:39.030

是的，如果您想使用 cuda 以及软件，他们需要 Nvidia 显卡。

另请参阅：[https ://stackoverflow.com/questions/9022171/cuda-and-ati-graphic-card](https://stackoverflow.com/questions/9022171/cuda-and-ati-graphic-card)

# jquery - 使用 jqGrid 可以使用子网格冻结列

> ID：13433274
> 
> 赞同：1
> 
> 时间：2012-11-17T18:06:34.693
> 
> 标签：jquery, jquery-ui, jqgrid

我正在使用子网格并尝试冻结 2 列 - 这可能吗？如果我删除子网格，那么冻结列可以正常工作。

我的 jQuery 代码是：

```
jQuery("#list11").jqGrid({ 
        url:'activity_grid.php?q=1', 
        datatype: "xml", 
        height: 300, 
        width:300,
        colNames:['Retailer','Objective', 'Total', 'Period'], 
        colModel:[ 
            {name:'Retailer',index:'Retailer', width:55, frozen : true}, 
            {name:'Objective',index:'Objective', width:90, frozen : true}, 
            {name:'Total',index:'Total', width:100}, 
            {name:'Period',index:'Period', width:80, align:"right"}
        ], 
        viewrecords: true,
        shrinkToFit: false,
        subGrid : true, 
        subGridUrl: 'subgrid.php?q=2', 
        subGridModel: [{ 
                name : ['No','Item','Qty','Unit','Line Total'], 
                width : [55,200,80,80,80] 
            } ] 
    }); 

$("#list11").jqGrid("setFrozenColumns"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:52:52.997

这是不可能的，这是您无法设置冻结列的完整功能列表：

*   树形网格
*   子网格
*   单元格编辑
*   内联编辑（无法编辑冻结的列）
*   可排序的列
*   虚拟滚动
*   数据分组

# regex - 正则表达式匹配 vim 交换文件和其他临时文件，如 "*.swp" 和 swx

> ID：13433278
> 
> 赞同：3
> 
> 时间：2012-11-17T18:06:59.947
> 
> 标签：regex

我有一个 bash 脚本，它使用 inotifywait 来复制在目录中创建的文件。

但它正在复制我不想要的 vim 临时文件。

例如，如果我`foo.txt`在 vim 中创建和编辑它，我最终会得到一些/所有这些：

```
foo.txt~
.foo.txt.swp
.foo.txt.swx
4913 
```

我正在尝试编写正则表达式来匹配这些，这就是我到目前为止所拥有的：

```
'^\*\.sw??$' 
```

我希望这至少能匹配 swp 和 swx 文件，但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:09:30.570

```
^.+?\.sw.?$ 
```

**解释：**

```
^ Start of string
.+? - Matches any character 1 or more (non greedy)
\. - matches literal .
sw.? - Matches sw followed by 1 character
$ - End of string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:08:47.920

试试这个正则表达式

```
^.+\.sw[px]$ 
```

# android - 读取其他应用程序中其他活动的生命周期状态

> ID：13433279
> 
> 赞同：0
> 
> 时间：2012-11-17T18:07:18.453
> 
> 标签：android, activity-lifecycle, application-lifecycle

我正在尝试开发一个检测异常行为的应用程序。因此，它应该能够做的一件事是读取其他应用程序的生命周期状态。Google Play 暂停。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:11:36.940

简短地说：不，那是不可能的。

# c# - 在 C# 中列出数组的值

> ID：13433280
> 
> 赞同：2
> 
> 时间：2012-11-17T18:07:22.540
> 
> 标签：c#, .net, arrays, winforms

我有一个带有两个文本框和两个按钮的 Windows 窗体。文本框名为 txtVisited 和 txtAnswer。按钮是`Visited?`和`Exit`。我想在第一个文本框中输入一个城市并让它检查数组是否匹配。如果有匹配项，我想显示它已被访问的文本及其在数组中的位置。如果找不到匹配项，我希望它显示“未访问”文本。我已经复制了到目前为止的所有代码。任何帮助将非常感激。我对 c# 还是很陌生，所以我可能理解也可能不理解你的答案。所以请耐心等待。提前抱歉。

```
 namespace Array
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void btnVisited_Click(object sender, EventArgs e)
        {
            string[] CityName = {"Columbus", "Bloomington", "Indianapolis",
                "Fort Wayne", "Greensburg", "Gary", "Chicago", "Atlanta", "Las Vegas"};
            bool visitedbool;
            int Subscript;
            string QueryCity;
            QueryCity = txtState.Text.ToUpper();
            int Subscript =0;
            visitedbool = false;

            while (visitedbool = true)

            if (CityName(intsubscript).ToUpper= QueryCity)
            {
                visitedbool = true
            }

            else
            { 
                Subscript =  Subscript +1
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:10:34.087

```
var idx = Array.IndexOf(CityName, QueryCity);
if (idx  != -1)
{
    // display QueryCity and idx
}
else
{
    // display "not visited"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:55:28.583

所以我不知道其他人的答案发生了什么，但他帮助我完成了这个过程。我只想对他的努力表示最深切的感谢。他从来没有对我不耐烦，而我在 c# 方面也很迟钝。他给了我代码让它工作。我只需要添加文本框的代码。`命名空间项目{公共部分类Form1：Form {公共Form1（）{InitializeComponent（）；}

```
 private void btnExit_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void btnVisited_Click(object sender, EventArgs e)
    {
        {
            string[] CityName = {"Columbus", "Bloomington", "Indianapolis",
            "Fort Wayne", "Greensburg", "Gary", "Chicago", "Atlanta", "Las Vegas"};
            string queryCity = txtState.Text;
            int position;
            string city;

            if (CityName.Contains(queryCity))
            {
                position = Array.IndexOf(CityName, queryCity);
                city = txtState.Text;
                txtAnswer.Text = "You have visited" +" " + queryCity + " " + position;
            }
            else
            {
                txtAnswer.Text = "You have not visited this city yet.";
            }
        }` 
```

# c - 在 C 中读取文件的最佳缓冲区大小

> ID：13433286
> 
> 赞同：17
> 
> 时间：2012-11-17T18:08:01.453
> 
> 标签：c, io

我必须使用`read`函数读取 C 中的大文件。我只是想知道我们在性能方面保留的缓冲区大小是否有任何区别。文件大小可能达到数十 GB。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T18:44:19.310

精简版。
这取决于。在 x86 上 4096 字节的缓冲区大小是一个好的开始（一个[页面大小](https://www.kernel.org/doc/man-pages/online/pages/man3/sysconf.3.html)和[高级格式](https://en.wikipedia.org/wiki/Advanced_Format)块大小）。

更长的版本。
在 UNIX 中，它取决于内核、libc、文件系统、硬件等。不仅取决于版本和编译选项，还取决于运行时可调参数（例如预读设置）。

DIY。
测试它！请参阅[UNIX 环境中的高级编程](https://rads.stackoverflow.com/amzn/click/com/0321525949)第 3.9 章“I/O 效率”，了解为特定系统确定最佳读写缓冲区大小的直接方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:17:35.117

首先：当然，磁盘逻辑/物理扇区大小的倍数，您可以使用 hdparm 检查。这是一样的

提示：libc 的`fopen(3)`, `fread(3)`, `fwrite(3)`, 等函数已经为你做了一些很好的缓冲。

另一个提示：如果您不需要流式传输整个文件，而是随机访问其中的一部分，您可以尝试使用`mmap()`它。

# android - 打算玩商店？

> ID：13433289
> 
> 赞同：0
> 
> 时间：2012-11-17T18:08:24.410
> 
> 标签：android

我希望名为“更多应用程序”的按钮访问我在 Play 商店中的应用程序列表。这是页面链接：

[https://play.google.com/store/apps/developer?id=Jouni](https://play.google.com/store/apps/developer?id=Jouni)

??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T13:47:43.017

启动 Google Play 商店可与某些市场 URI 一起正常工作：

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse(<market_uri>));
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NO_ANIMATION);

        startActivity(intent); 
```

uris 可以在哪里

*   市场：//详情？id=
*   市场：//搜索？q=pub：

但是**当您想在欢迎页面上启动它时它不起作用**，即当您只想启动 Google Play 商店而不指定应用程序 ID 或执行查询时。

所以我想出了这个解决方案，它也可以处理任何应用程序无法处理“market://”uris 的情况。在这种情况下，使用 Web 浏览器作为备用。

这个解决方案不是最好的，但它可以完成工作。

```
public void launchPlayStore()
{
    // look for intent able to process 'market://' uris
    Intent market = new Intent(Intent.ACTION_VIEW, Uri.parse("market://search?q=dummy"));

    PackageManager packageManager = getPackageManager();

    ComponentName playStoreComponentName=null;

    for(ResolveInfo resolveInfo : packageManager.queryIntentActivities(market, 0))
    {
        ActivityInfo activityInfo = resolveInfo.activityInfo;

        String packageName = activityInfo.applicationInfo.packageName;

        // lokking for "com.android.vending", "com.google.android.finsky.activities.MainActivity"
        if (!packageName.contains("android"))// || !activityInfo.name.contains("android"))
            continue;

        // appname should be 'Play Store'
        // String appName = resolveInfo.loadLabel(packageManager).toString();
        playStoreComponentName =  new ComponentName(packageName, activityInfo.name);
        break;
    }

    if(playStoreComponentName!=null)
    {
        Intent intent = new Intent();
        intent.setComponent(playStoreComponentName);
        intent.setData(Uri.parse("market://"));
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NO_ANIMATION);

        // launch Google Play Store app :-)
        startActivity(intent);
    }
    else
    {
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse("https://play.google.com/"));
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NO_ANIMATION);

        // fallback -> web browser
        startActivity(intent);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:12:32.323

在您的按钮 OnClick 中执行此操作

```
String url = "https://play.google.com/store/apps/developer?id=Jouni";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

# ios - MonoTouch 应用程序在 iPhone 模拟器中停止调试

> ID：13433292
> 
> 赞同：0
> 
> 时间：2012-11-17T18:08:32.470
> 
> 标签：ios, xcode, xamarin.ios, monodevelop, xamarin

我有一个应用程序在模拟器中调试好几个月后突然停止了。我只是得到“等待调试器连接”然后它在我结束时取消。我重新安装了 xCode 无济于事。我还确认了其他单点触控应用程序可以正常工作。我试过清洁和重建。我已经重置了模拟器中的设置。构建 SDK 设置为默认值，链接器设置为“不链接”。即使应用程序没有被复制到模拟器，设置中也有一个应用程序条目，并且启用了调试。我在这个应用程序中使用 Monocross，但我认为这与它没有任何关系，因为 Android 版本在其模拟器中运行良好。任何帮助将不胜感激！以下是我的版本信息

```
MonoDevelop 3.0.5
Installation UUID: ceba78be-070b-46a7-9bfd-508842217b52
Runtime:
    Mono 2.10.9 (tarball)
    GTK 2.24.10
    GTK# (2.12.0.0)
    Package version: 210090011
Mono for Android: 4.2.7 (Evaluation)
Android SDK: /Users/darrell/Library/Developer/Xamarin/android-sdk-mac_x86
    Supported Android versions:
        2.1 (API level 7)
        2.2 (API level 8)
        2.3 (API level 10)
        3.1 (API level 12)
        4.0 (API level 14)
Java SDK: /usr
Apple Developer Tools:
     Xcode 4.5.2 (1847)
     Build 4G2008a
Monotouch: 6.0.6 (Evaluation)
Build information:
    Release ID: 30005000
    Git revision: e159cf083bd327933166819d94245298898d6e3d
    Build date: 2012-10-24 16:43:06+0000
    Xamarin addins: eea2ed91ae8dd242b281d5ec8f6c2fbc63b4cd3d
Operating System:
    Mac OS X 10.8.2
    Darwin MacBook-Air.local 12.2.0 Darwin Kernel Version 12.2.0
        Sat Aug 25 00:48:52 PDT 2012
        root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:20:25.513

这可能是配置问题，即与您使用的软件版本无关。例如，确保您运行的模拟器版本与我们的应用程序版本匹配（例如，使用 iOS 5.1 模拟器和需要 iOS 6.0 的应用程序）。

> 即使应用程序没有被复制到模拟器，设置中也有一个应用程序条目，并且启用了调试。

如果您在设置中看到这一点，那是因为该应用程序存在于模拟器中。你怎么知道它**没有**被复制？

无论如何，因为这意味着该应用程序存在，所以您可以尝试一些事情：

1.  从模拟器本身启动应用程序（不使用 MonoDevelop）；

2.  使用 Run（来自 MonoDevelop）而不是 Debug 启动应用程序；

如果其中任何一个工作，然后尝试重置您的模拟器。在模拟器中，使用**iOS Simulator**菜单并选择**Reset Content and Settings**。

请注意，这将从模拟器中删除所有内容（数据和其他应用程序）。

# android - Android App在收到推送通知后崩溃

> ID：13433312
> 
> 赞同：0
> 
> 时间：2012-11-17T18:10:40.910
> 
> 标签：android, urbanairship.com

我正在使用城市飞艇推送通知。不幸的是，应用程序在推送时崩溃。

```
public class IntentReceiver extends BroadcastReceiver {

    private static final String logTag = "PushSample";

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i(logTag, "Received intent: " + intent.toString());
        String action = intent.getAction();

        if (action.equals(PushManager.ACTION_PUSH_RECEIVED)) {

            int id = intent.getIntExtra(PushManager.EXTRA_NOTIFICATION_ID, 0);

            logPushExtras(intent);

        } else if (action.equals(PushManager.ACTION_NOTIFICATION_OPENED)) {

            logPushExtras(intent);

            Intent launch = new Intent(Intent.ACTION_MAIN);
            launch.setClass(UAirship.shared().getApplicationContext(), GetStartedActivity.class);
            launch.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            UAirship.shared().getApplicationContext().startActivity(launch);

        } else if (action.equals(PushManager.ACTION_REGISTRATION_FINISHED)) {

        } else if (action.equals(PushManager.ACTION_GCM_DELETED_MESSAGES)) {

        }

    }

    private void logPushExtras(Intent intent) {
        Set<String> keys = intent.getExtras().keySet();
        for (String key : keys) {

            //ignore standard C2DM extra keys
            List<String> ignoredKeys = (List<String>)Arrays.asList(
                    "collapse_key",//c2dm collapse key
                    "from",//c2dm sender
                    PushManager.EXTRA_NOTIFICATION_ID,//int id of generated notification (ACTION_PUSH_RECEIVED only)
                    PushManager.EXTRA_PUSH_ID,//internal UA push id
                    PushManager.EXTRA_ALERT);//ignore alert
            if (ignoredKeys.contains(key)) {
                continue;
            }

        }
    }
} 
```

推送已连续记录，但应用程序崩溃..我正在三星银河选项卡上进行测试。

这是我的课

```
AirshipConfigOptions options = AirshipConfigOptions.loadDefaultOptions(this);

    // Optionally, customize your config at runtime:
    //
    // options.inProduction = false;
    // options.developmentAppKey = "Your Development App Key";
    // options.developmentAppSecret "Your Development App Secret";

    UAirship.takeOff(this, options);
    Logger.logLevel = Log.VERBOSE;

    //use CustomPushNotificationBuilder to specify a custom layout
    CustomPushNotificationBuilder nb = new CustomPushNotificationBuilder();

    //nb.statusBarIconDrawableId = R.drawable.icon_small;//custom status bar icon

    //nb.layout = R.layout.notification;
    //nb.layoutIconDrawableId = R.drawable.icon;//custom layout icon
    //nb.layoutIconId = R.id.icon;
    //nb.layoutSubjectId = R.id.subject;
    //nb.layoutMessageId = R.id.message;

    // customize the sound played when a push is received
    //nb.soundUri = Uri.parse("android.resource://"+this.getPackageName()+"/" +R.raw.cat);

    PushManager.shared().setNotificationBuilder(nb);
    PushManager.shared().setIntentReceiver(IntentReceiver.class);
    PushManager.enablePush(); 
```

似乎 CustomPushNotificationBuilder 正在创建问题

# c# - 如何从 tiff 图像中裁剪一部分

> ID：13433313
> 
> 赞同：3
> 
> 时间：2012-11-17T18:10:53.447
> 
> 标签：c#, tiff, crop

这是我的 TIFF 图像，我正在尝试从 tiff 图像中提取左侧矩形或框并保存为 PNG 文件。

![在此处输入图像描述](../Images/85c021c66aaf23d4313a8672f3311078.png)

我尝试以编程方式裁剪左侧矩形或框部分。这是我的例行公事。

```
strImageFilePath = @"C:\Users\TRIDIP\Desktop\PDF\getLabel.tif";
var source = LoadImage(strImageFilePath);
Rectangle crop = new Rectangle(100, 160, 920, 1200);
var bmp = new Bitmap(920, 1200);
using (var gr = Graphics.FromImage(bmp))
{
  gr.DrawImage(source, new Rectangle(0, 0, bmp.Width, bmp.Height), crop, GraphicsUnit.Pixel);
  bmp.Save(@"C:\Users\TRIDIP\Desktop\PDF\Tile.png");
} 
```

但问题是坐标计算。

```
Rectangle crop = new Rectangle(100, 160, 920, 1200);
var bmp = new Bitmap(920, 1200); 
```

我上面给出的值并不完美，这就是为什么没有裁剪确切部分的原因。所以请有人下载图像并告诉我应该在我的代码中指定什么顶部、左侧以及高度和宽度，因为结果左框可以从图像中完美裁剪。只是帮助我获得正确的坐标意味着告诉我顶部、左侧以及高度和宽度的确切数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:19:01.367

使用油漆这真的很容易......

X = 158，Y = 247，宽度 = 823，高度 = 1183

那是，

```
Rectangle crop = new Rectangle(158, 247, 823, 1183);
var bmp = new Bitmap(823, 1183); 
```

# python - 重构以消除递归函数中的全局变量

> ID：13433315
> 
> 赞同：3
> 
> 时间：2012-11-17T18:11:01.923
> 
> 标签：python, recursion

## 总之

我正在使用来自 SO 问题的函数从文本文件输入中创建树结构：[Python 文件解析：从文本文件构建树](https://stackoverflow.com/a/6076821/1290420)。但是我只能通过使用全局变量来生成我的树，并且找不到避免这种情况的方法。

## 输入数据

在一个名为`data.txt`我的文件中，我有以下内容：

```
Root
-A 10
-B
--B A 2
--B B 5
--B Z 9
--B X
---X 4
---Y
----Y0 67
----Y1 32
---Z 3
-C 19 
```

## 期望的结果

```
{'B': ['B A 2', 'B B 5', 'B Z 9', 'B X'],
 'B X': ['X 4', 'Y', 'Z 3'],
 'Root': ['A 10', 'B', 'C 19'],
 'Y': ['Y0 67', 'Y1 32']} 
```

## 我的代码

```
import re, pprint
PATTERN = re.compile('^[-]+')
tree = {}

def _recurse_tree(parent, depth, source):
    last_line = source.readline().rstrip()
    while last_line:
        if last_line.startswith('-'):
            tabs = len( re.match(PATTERN, last_line).group() )
        else:
            tabs = 0
        if tabs < depth:
            break
        node = re.sub(PATTERN, '', last_line.strip())
        if tabs >= depth:
            if parent is not None:
                print "%s: %s" %(parent, node)
                if parent in tree:
                    tree[parent].append(node)
                else:
                    tree[parent] = [ node, ]
            last_line = _recurse_tree(node, tabs+1, source)
    return last_line

def main():
    inFile = open("data.txt")
    _recurse_tree(None, 0, inFile)
    pprint.pprint(tree)

if __name__ == "__main__":
    main() 
```

## 问题

如何摆脱全局变量`tree`？我所做的一切似乎都使代码变得更长或更丑陋，但我想大量使用该函数，并且我讨厌依赖于核心结果的副作用。

## 补充

在下面的答案之后，我修改了代码以`tree`按以下方式返回。这是pythonic吗？返回一个元组然后扔掉第一个元素似乎不优雅。

```
def _recurse_tree(parent, depth, source, tree=None):
    if tree is None:
        tree = {}
    last_line = source.readline().rstrip()
    while last_line:
        if last_line.startswith('-'):
            tabs = len( re.match(PATTERN, last_line).group() )
        else:
            tabs = 0
        if tabs < depth:
            break
        node = re.sub(PATTERN, '', last_line.strip())
        if tabs >= depth:
            if parent is not None:
                print "%s: %s" %(parent, node)
                if parent in tree:
                    tree[parent].append(node)
                else:
                    tree[parent] = [ node, ]
            last_line, tree = _recurse_tree(node, tabs+1, source, tree)
    return last_line, tree

def main():
    inFile = open("data.txt")
    tmp, tree = _recurse_tree(None, 0, inFile)
    pprint.pprint(tree) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:13:21.990

您的`tree`变量已经是可变的；只需将它与您的递归调用一起传递：

```
def _recurse_tree(parent, depth, source, tree=None):
    if tree is None:
        tree = {}

    last_line = source.readline().rstrip()
    while last_line:
        if last_line.startswith('-'):
            tabs = len( re.match(PATTERN, last_line).group() )
        else:
            tabs = 0
        if tabs < depth:
            break
        node = re.sub(PATTERN, '', last_line.strip())
        if tabs >= depth:
            if parent is not None:
                print "%s: %s" %(parent, node)
                if parent in tree:
                    tree[parent].append(node)
                else:
                    tree[parent] = [ node, ]
            last_line = _recurse_tree(node, tabs+1, source, tree)
    return last_line 
```

或者，您可以使用一个类来保存状态，然后从实例中提取状态会更容易：

```
class TreeBuilder(object):
    _PATTERN = re.compile('^[-]+')

    def __init__(self, source):
        self.tree = {}
        self.source = source
        self._recurse_tree()

    def _recurse_tree(self, parent=None, depth=0):
         last_line = self.source.readline().rstrip()
         while last_line:
             if last_line.startswith('-'):
                 tabs = len( self._PATTERN.match(last_line).group() )
             else:
                 tabs = 0
             if tabs < depth:
                 break
             node = self._PATTERN.sub('', last_line.strip())
             if tabs >= depth:
                 if parent is not None:
                     print "%s: %s" %(parent, node)
                     if parent in self.tree:
                         self.tree[parent].append(node)
                     else:
                         self.tree[parent] = [ node, ]
                 last_line = self._recurse_tree(node, tabs+1)
         return last_line 
```

然后像这样使用：

```
def main():
    inFile = open("data.txt")
    builder = TreeBuilder(inFile)
    pprint.pprint(builder.tree) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:13:10.563

我认为这里有很好的解决方案——创建类并将树放入其中，就像私有类成员一样。

或者您可以简单地将此字典作为函数中的参数之一传递，并在递归期间传递它。它将通过引用传递，因此所有时间函数都将使用相同的字典而没有全局变量。但我更喜欢上课。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:13:31.760

在`tree`您的函数中用作默认参数：-

```
def _recurse_tree(parent, depth, source, tree = None):
    if tree is None:  # needed on first invocation
        tree = {} 
```

第一次不带`tree`参数调用它，并且在每次后续调用时，`tree`为其添加另一个参数。

因此，从您的方法内部，您的递归调用变为： -

```
last_line = _recurse_tree(node, tabs+1, source, tree) 
```

# windows - 无法从 Windows 服务打印

> ID：13433316
> 
> 赞同：0
> 
> 时间：2012-11-17T18:11:04.053
> 
> 标签：windows, service, printing

我创建了一个 Windows 服务，用于通过 Adob​​e 阅读器打印 PDF。代码如下。

Process.Start(exe,arg);

从上面执行的命令将如下所示

C:\Program Files\Adobe\Reader 9.0\Reader\AcroRd32.exe,/h /t "D:\test.pdf" "\servername\PrinterName" "" ""

这在 Windows 2000 服务器中运行良好。现在我们正在升级到 Windows 2003 服务器。在这方面，它没有打印。此外，我没有收到任何异常或任何日志。日志被创建为一切正常。同样在 2003 服务器中，它可以从命令提示符和控制台应用程序运行，但是当用户登录时。如果没有人再次登录，则打印不起作用。

请有人帮我解决这个问题。

问候马杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:03:21.910

根据我所见，这是正确的语法：

```
AcroRd32.exe /N /T PdfFile PrinterName [ PrinterDriver [ PrinterPort ] ] 
```

请试试：

```
C:\Program Files\Adobe\Reader 9.0\Reader\AcroRd32.exe,/N /T "D:\test.pdf" "\servername\PrinterName" 
```

# css - HTML/CSS：文本类型输入上方和下方的额外间距

> ID：13433317
> 
> 赞同：9
> 
> 时间：2012-11-17T18:11:06.227
> 
> 标签：css, html

现场示例：http: [//jsfiddle.net/yDQXG/](http://jsfiddle.net/yDQXG/)

我在 Chrome 中看到的内容：http: [//i.imgur.com/shLfA.png](http://i.imgur.com/shLfA.png)

我似乎无法弄清楚输入元素（蓝色字段）周围的间距来自何处。有任何想法吗？

```
<form method="get">
<fieldset class="halfblock">
    <input class="blockheader" type="text" value="Field A">
    <textarea class="blocktext" rows="5">Line 1&#13;&#10;Line 2</textarea>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T18:24:37.100

这是因为它们是内联元素。同样的事情经常发生在图像上。

您需要做的就是添加`display:block`到您的输入中：

```
input.blockheader {
    margin: 0;
    padding: 0;
    text-align: center;
    background: #ABD9E2;
    font: 11px/11px 'Vollkorn', serif;
    border: none;
    width: 100%;
    position: relative;
    /* top: -7px; */

    display: block;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-17T18:21:49.633

设置行高：0px；在 .halfblock 上

```
.quote_body .halfblock {
    width: 262px;
    border: 1px dotted 
    #333;
    float: left;
    margin-bottom: 15px;
    line-height: 0px;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T18:23:50.673

将[显示](http://www.w3schools.com/cssref/pr_class_display.asp)标签添加到输入的 CSS：

```
input.blockheader {
    display: block;
} 
```

问题解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T18:24:48.980

放：

.halfblock & .thirdblock 到：

```
line-height:0px 
```

还要考虑添加 CSS 重置的选项

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# ruby - Freebase MQL 语法规则也提取每个“/type/object/name”的语言？

> ID：13433322
> 
> 赞同：1
> 
> 时间：2012-11-17T18:11:30.823
> 
> 标签：ruby, freebase, mql

我是 MQL 的绝对初学者，试图通过[ken-rb](https://github.com/michael/ken-rb)以这种方式访问[​​ Freebase ：](http://www.freebase.com/q)

```
[1] pry(main)> res = Ken.get("/en/allium_neapolitanum")
=> #<Resource id="/en/allium_neapolitanum" name="Allium neapolitanum"> 
```

我注意到通过 freebase API 提交的查询：

```
{"guid":null,"name":null,"ken:type":[
  {"id":null,"name":null,"properties":[
    {"id":null,
     "name":null,
     "expected_type":null,
     "unique":null,
     "reverse_property":null,
     "master_property":null}]}],
 "/type/reflect/any_master":[
   {"id":null,
    "link":null,
    "name":null,
    "optional":true,
    "limit":999999}],
 "/type/reflect/any_reverse":[
   {"id":null,
    "link":null,
    "name":null,
    "optional":true,
    "limit":999999}],
 "/type/reflect/any_value":[
   {"link":null,
    "value":null,
    "optional":true,
    "limit":999999}],
 "id":"/en/allium_neapolitanum"} 
```

[在查询编辑器](http://www.freebase.com/queryeditor)中摆弄这个 MQL，我找到了一种方法来简单地获取我的资源的常用名称列表：

```
[2]pry(#<Ken::Resource>):2> data["/type/reflect/any_value"].map { |h| h }
=> [{"link"=>"/type/object/name", "value"=>"Allium neapolitanum"},
 {"link"=>"/type/object/name", "value"=>"שום משולש"},
 {"link"=>"/type/object/name", "value"=>"Ail blanc"},
 {"link"=>"/biology/organism_classification/scientific_name",
  "value"=>"Allium neapolitanum"},
 {"link"=>"/type/object/name", "value"=>"Neapolitanischer Lauch"}]

[3] pry(#<Ken::Resource>):2> names = data["/type/reflect/any_value"].select { |h| h["link"]=="/type/object/name"}
=> [{"link"=>"/type/object/name", "value"=>"Allium neapolitanum"},
 {"link"=>"/type/object/name", "value"=>"שום משולש"},
 {"link"=>"/type/object/name", "value"=>"Ail blanc"},
 {"link"=>"/type/object/name", "value"=>"Neapolitanischer Lauch"}]

[4] pry(#<Ken::Resource>):2> names.map { |name| name["value"] }
=> ["Allium neapolitanum", "שום משולש", "Ail blanc", "Neapolitanischer Lauch"] 
```

问题是：我需要知道哪种语言（我的意思是一个属性，例如：“lang: '/lang/fr'”）与每个通用名称相关。

有机会，使用 Ken 或通过更改 MQL 查询/提交其他查询/等，还有每个“/type/object/name”的语言是什么？

***[编辑]***

我找到了一种可能的解决方案，但是，我的目标是让数据直接修改由[ken-rb](https://github.com/michael/ken-rb)发起的原始查询（..复制到问题的顶部）

MQL 可以是：

```
[{
  "name": [{
    "lang": null,
    "value": null
  }]
  "id": "/en/allium_neapolitanum"
}]​ 
```

给出这个结果

```
 "result": [{
    "id": "/en/allium_neapolitanum",
    "name": [
      {
        "lang":  "/lang/en",
        "value": "Allium neapolitanum"
      },
      {
        "lang":  "/lang/he",
        "value": "שום משולש"
      },
      {
        "lang":  "/lang/fr",
        "value": "Ail blanc"
      },
      {
        "lang":  "/lang/de",
        "value": "Neapolitanischer Lauch"
      }
    ]
  }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:31:32.663

根据文档，除了 Ken.get() 之外，Ken 还支持 Ken.mqlread()，因此您可以将它与您制定的 MQL 查询一起使用。

话虽如此，我认为a）他们在不返回语言信息的情况下查询多种语言是一个错误，并且b）您可能无论如何都不想使用Ken，因为它似乎仍在使用已弃用的旧freebase.com API并且即将关闭。[此处](http://wiki.freebase.com/wiki/API)记录了新的 googleapis.com/freebase API 。MQL 语法没有改变，但您需要一个 API 密钥并需要使用新的端点。

如果您想修复 Ken 以返回带有文本值的语言，您可以修改查询的 any_value 部分，如下所示：

```
{
  "/type/reflect/any_value": [{
    "*":     null,
    "link": {
      "master_property": null,
      "target": {
        "id":       null,
        "optional": true
      }
    },
    "limit": 99999
  }],
  "id":   "/en/allium_neapolitanum"
}​ 
```

我认为你也应该能够使用

```
{
  "/type/reflect/any_value": [{}],
  "id":   "/en/allium_neapolitanum"
}​ 
```

但这为您提供了语言和价值，但没有链接，因此您无法判断该值与什么属性相关联（不是很有用）。

请注意，您可以从查询中删除顶级`name`属性，因为它在技术上是多余的。如果您想保留它以便更轻松地访问名称，您可以考虑将其更改`"name":null`为`"name":[{}]`which 将为您提供所有语言的名称（所有这些信息也可在查询的 /reflect/any_value 部分中获得）。

最后，我不得不指出，在几乎所有情况下，查询所有属性的所有值都将比必要的更昂贵和更慢，因为通常只对少数关键信息感兴趣。它适用于通用浏览器/资源管理器/调试器，但对于其他几乎所有东西来说都是巨大的矫枉过正。

# spring-mvc - 如何在 Spring MVC 中创建特定于控制器的视图解析器？

> ID：13433323
> 
> 赞同：0
> 
> 时间：2012-11-17T18:11:32.973
> 
> 标签：spring-mvc, struts

在 Struts 中，您经常在 struts 配置文件中为控制器定义成功和失败视图，例如：

```
<action path="/Home" type="org.sample.HomeAction">
<forward name="success" path="/views/Home.jsp"/>
<forward name="failure" path="/views/Error.jsp"/>
</action>
<action path="/AddCustomer" type="org.sample.AddCustomerAction">
<forward name="success" path="/views/AddCustomer.jsp"/>
<forward name="failure" path="/views/AddCustomerError.jsp"/>
</action> 
```

如果这样做，相同的逻辑视图名称（成功和失败）可以解析为不同的 jsps，具体取决于调用它们的控制器。相比之下，在最简单的 spring 设置中，视图解析器是全局的。在 Spring MVC 中复制这种配置的最简单方法是什么？

我知道一种方法是使用 SimpleFormController，它具有 getFormView() 和 getSuccessView() 方法，但我不希望有必须从该类继承的限制。有没有更通用的方法来进行控制器特定的视图分辨率？

我正在调查的场景是将大量 Struts 代码迁移到 Spring。旧代码广泛使用“成功”和“失败”。理想情况下，我只想使用现有的 Spring 视图解析器并复制相同的配置。例如

```
<bean class="some.spring.view.resolver">
    <property>
        <controller name="org.sample.HomeAction">
             <view name="success" value="/views/Home.jsp"/>
             <view name="failure" value="/views/Error.jsp"/>
        </controller>
        <controller name="org.sample.AddCustomerAction">
             <view name="success" value="/views/AddCustomer.jsp"/>
             <view name="failure" value="/views/AddCustomerError.jsp"/>
        </controller>               
</bean> 
```

是否有现有的 Spring 视图解析器支持根据调用它们的控制器将相同的逻辑视图名称解析为不同的值？还是我需要自己编写或更新逻辑视图名称以使其全局唯一？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:43:31.737

您可以从控制器方法返回不同的视图名称：

```
@RequestMapping("/home")
public String home() {

  try {
   // Some logic

   return "home";
  } catch (Exception e) {
    return "error";
  }
} 
```

这将根据调用控制器方法的结果解析适当的 jsp 视图。这与 struts2 返回表示 action 方法结果的字符串的方法非常相似，只是不需要额外的 xml 将结果字符串映射到 jsp 视图。

# java - Java，如何将当前数据库更改为另一个？

> ID：13433326
> 
> 赞同：20
> 
> 时间：2012-11-17T18:11:51.610
> 
> 标签：java, mysql, jdbc

我有一个与 MySQL 数据库的 Java 程序连接，如何在同一连接上将当前数据库更改为不同的数据库？

我像这样连接到 MySQL：

```
DriverManager.getConnection("jdbc:mysql://"+server+"/",log,pass); 
```

经过一些操作后，我想在同一连接上连接到不同的 mysql 数据库。我怎样才能做到这一点？

我尝试使用：

```
Statement stat= con.createStatement();
ResultSet r=stat.executeQuery("use mysql"); 
```

但这不会改变要使用的数据库。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-17T18:18:55.563

如[MySQL 文档](http://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html)中所述，您需要使用它`Connection.setCatalog()`来切换到另一个数据库。它还明确表示您不应**执行**a`USE <databasename>`切换。

出现此警告的原因是 JDBC 是数据库的通用接口，因此为大多数常见任务提供了方法，包括切换`catalogs`（或`databases`在 MySQL 中）。JDBC 规范/javadoc 还明确指出人们应该使用 API 而不是数据库特定的命令（如果两者都可用）。这有几个原因：1) 它促进了独立于数据库的代码，以及 2) 驱动程序可能会在内部执行其他操作以响应 API 方法之一。使用特定于数据库的命令可能会导致驱动程序行为异常，因为其内部状态与数据库状态不匹配。

调用[`setCatalog(String)`](http://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html#setCatalog-java.lang.String-)不会影响现有语句，如 JDBC API 文档中所述：

> 调用`setCatalog`对先前创建或准备好的`Statement`对象没有影响。`Connection`DBMS 准备操作是否在方法`prepareStatement`或被`prepareCall`调用时立即发生是由实现定义的。为了获得最大的可移植性，`setCatalog`应该在`Statement`创建或准备 a 之前调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T18:19:07.910

您可以像这样在表名上为数据库名称添加前缀。

例如：`db1 has table1`和`db2 has table2`

```
select * from db1.table1, db2.table2; 
```

这将允许您进行跨数据库查询

# ios - 升级后的 MonoTouch 链接库编译问题

> ID：13433334
> 
> 赞同：0
> 
> 时间：2012-11-17T18:12:40.830
> 
> 标签：ios, xcode, xamarin.ios, monodevelop, linker-errors

我昨天升级到最新的 MonoTouch / MonoDevelop 版本，现在我的应用程序在编译时抛出以下错误：

```
error MT5201: Native linking failed. Please review user flags provided to gcc: "-lz" "-lxml2" 
```

我在构建中使用以下内容，因为我使用的链接库需要 libz.dylib。-gcc_flags "-lz -lxml2"

我现在的环境是：

```
MonoDevelop 3.0.5
Installation UUID: 5022d668-f236-4223-a074-6c050535bd3f
Runtime:
    Mono 2.10.9 (tarball)
    GTK 2.24.10
    GTK# (2.12.0.0)
    Package version: 210090011
Apple Developer Tools:
     Xcode 4.5.2 (1847)
     Build 4G2008a
Monotouch: 6.0.7
Mono for Android: Not Installed

Build information:
    Release ID: 30005000
    Git revision: e159cf083bd327933166819d94245298898d6e3d
    Build date: 2012-10-24 16:43:06+0000
    Xamarin addins: eea2ed91ae8dd242b281d5ec8f6c2fbc63b4cd3d
Operating System:
    Mac OS X 10.7.5
    Darwin My-Mac-mini-2.local 11.4.2 Darwin Kernel Version 11.4.2
        Thu Aug 23 16:25:48 PDT 2012
        root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64 
```

最初除了将 MonoTouch / MonoDevelop 更新为最新的稳定版本外，没有任何变化。在更新时，我必须重新授权 MonoTouch，所以我这样做了，并且安装得很好。比构建它失败了。我比更新 Xcode 希望能解决它，因为我在最新的 Xcode 上，但它没有。

无关，这不是我更新后唯一的问题。在另一个项目中，我的视图以 90 度旋转显示，但不要担心。只是提到它以防它可能有助于解决问题，因为我的升级可能出了问题？

* * *

添加构建错误信息：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/g++ -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version-min=6.0 -arch i386  -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -c /var/folders/ln/yb817btn4_s7b52rhfk80cmm0000gn/T/tmp478d0592.tmp/main.i386.m -o /Users/Company/Projects/App/4-PDF2/App.Kiosk/obj/Debug/mtouch-cache/main..i386.cache.xT4QTbvqc0Zrv4eGTYvIJcXuuvo=.o
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/g++  -Wl,-no_pie -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version-min=6.0 -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk  /Users/Company/Projects/App/4-PDF2/App.Kiosk/obj/Debug/mtouch-cache/main..i386.cache.xT4QTbvqc0Zrv4eGTYvIJcXuuvo=.o -o /var/folders/ln/yb817btn4_s7b52rhfk80cmm0000gn/T/tmp478d0592.tmp/AppKiosk -framework CFNetwork -framework AssetsLibrary -framework Accounts -framework CoreBluetooth -framework CoreTelephony -framework EventKit -framework EventKitUI -framework Foundation -framework CoreMotion -framework GameKit -framework GLKit -framework iAd -framework MapKit -framework MediaPlayer -framework MessageUI -framework NewsstandKit -framework OpenGLES -framework Social -framework StoreKit -framework Twitter -framework UIKit -framework PassKit -framework AddressBookUI -framework SystemConfiguration -framework AddressBook -framework AudioToolbox -framework AVFoundation -framework QuartzCore -framework CoreGraphics -framework CoreImage -framework CoreLocation -framework CoreText -framework ImageIO -framework MobileCoreServices -framework Security -framework CoreData -framework CoreMedia -framework CoreMIDI -framework CoreVideo -framework ExternalAccessory -framework AdSupport -framework QuickLook -lz -u _mono_pmip -u _CreateZStream -u _CloseZStream -u _Flush -u _ReadZStream -u _WriteZStream -u _monotouch_create_managed_ref -u _monotouch_release_managed_ref -liconv -lmonosgen-2.0 -lmonotouch-sgen -L/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/lib -lmono-profiler-log -u _mono_profiler_startup_log -u _catch_exception_raise  -force_load /var/folders/ln/yb817btn4_s7b52rhfk80cmm0000gn/T/tmp478d0592.tmp/libPSPDF-ios5.1.a -force_load /var/folders/ln/yb817btn4_s7b52rhfk80cmm0000gn/T/tmp478d0592.tmp/libBARCODE-iphoneos.a "-lz" "-lxml2"
Process exited with code 1, command:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/g++  -Wl,-no_pie -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version-min=6.0 -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk  /Users/Company/Projects/App/4-PDF2/App.Kiosk/obj/Debug/mtouch-cache/main..i386.cache.xT4QTbvqc0Zrv4eGTYvIJcXuuvo=.o -o /var/folders/ln/yb817btn4_s7b52rhfk80cmm0000gn/T/tmp478d0592.tmp/AppKiosk -framework CFNetwork -framework AssetsLibrary -framework Accounts -framework CoreBluetooth -framework CoreTelephony -framework EventKit -framework EventKitUI -framework Foundation -framework CoreMotion -framework GameKit -framework GLKit -framework iAd -framework MapKit -framework MediaPlayer -framework MessageUI -framework NewsstandKit -framework OpenGLES -framework Social -framework StoreKit -framework Twitter -framework UIKit -framework Paerror MT5201: Native linking failed. Please review user flags provided to gcc: "-lz" "-lxml2"
ssKit -framework AddressBookUI -framework SystemConfiguration -framework AddressBook -framework AudioToolbox -framework AVFoundation -framework QuartzCore -framework CoreGraphics -framework CoreImage -framework CoreLocation -framework CoreText -framework ImageIO -framework MobileCoreServices -framework Security -framework CoreData -framework CoreMedia -framework CoreMIDI -framework CoreVideo -framework ExternalAccessory -framework AdSupport -framework QuickLook -lz -u _mono_pmip -u _CreateZStream -u _CloseZStream -u _Flush -u _ReadZStream -u _WriteZStream -u _monotouch_create_managed_ref -u _monotouch_release_managed_ref -liconv -lmonosgen-2.0 -lmonotouch-sgen -L/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/lib -lmono-profiler-log -u _mono_profiler_startup_log -u _catch_exception_raise  -force_load /var/folders/ln/yb817btn4_s7b52rhfk80cmm0000gn/T/tmp478d0592.tmp/libPSPDF-ios5.1.a -force_load /var/folders/ln/yb817btn4_s7b52rhfk80cmm0000gn/T/tmp478d0592.tmp/libBARCODE-iphoneos.a "-lz" "-lxml2"
ld: file not found: /var/folders/ln/yb817btn4_s7b52rhfk80cmm0000gn/T/tmp478d0592.tmp/libBARCODE-iphoneos.a
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:26:13.840

> 错误 MT5201：本机链接失败。请查看提供给 gcc 的用户标志：“-lz”“-lxml2”

这意味着本机链接器失败。最常见（但不是唯一）的原因是人们改变了他们的选择。这就是为什么**首先**要做的是检查您的用户标志（它们看起来都很好）。

下一步是查看本机链接器失败的原因。为此，您需要查看您的**构建输出**（您可以在 MonoDevelop 的**错误列表**面板中看到）。

检查任何警告（在日志上或在 MD 错误列表板内）。里面可能有一些额外的信息。

另外，您以前使用的是什么版本的 Xcode？（即在您更新之前）

Xcode 4.5 仅适用于 ARMv7（和 ARMv7s），因此如果您使用 Xcode 4.4（或更早版本），您可能正在尝试使用一些仅适用于 ARMv6 的第 3 方绑定。这是本机链接器不喜欢的（您应该在构建日志中看到警告）。

# windows - 文件及其集群（或者 fseek 是如何工作的？）

> ID：13433343
> 
> 赞同：0
> 
> 时间：2012-11-17T18:13:32.820
> 
> 标签：windows, file, winapi, io, filesystems

我想知道 fseek 如何在 Windows 文件系统上工作。据我所知，一个文件有点像集群的链表（它们可能是恒定大小的），但我不知道 fseek 是否需要读取并跳过这个集群的长链，或者它可能是一些数组集群，所以 fseek 只通过它查找，然后进入正确的集群，而无需阅读以前的集群。有人可以回答吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:47:42.260

如果您对在 Windows 上的工作方式感到好奇`fseek()`，请参阅 Visual Studio 附带的 CRT 源代码。

您会看到它是使用[SetFilePointer()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365541%28v=vs.85%29.aspx) API 实现的，它只是适当地调整 [FILE_OBJECT](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545834%28v=vs.85%29.aspx) ::CurrentByteOffset。

文件系统实现者将此偏移量用于同步（非重叠）读写操作。至于文件系统如何跟踪文件数据（集群/范围），因实现而异。你想解决什么问题？

# php - 更改在 php 中发送邮件的完整标题

> ID：13433350
> 
> 赞同：0
> 
> 时间：2012-11-17T18:15:24.103
> 
> 标签：php, sendmail, email-headers

我使用此代码在 php 中发送邮件：

```
mail($to,$subject,$message,$headers); 
```

它工作得很好，但是如果我们检查邮件的完整标题，它将显示与该邮件一起发送的站点的服务器。我想知道是否有任何可能的方法，以便我们可以更改其完整标题并在邮件的完整标题中显示其他内容。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:19:03.457

不可以。您不能更改某些标头，因为这些标头是在邮件传递过程中由邮件服务器添加的（因此，如果您无法访问）。您可以在邮件中添加自己的标头，但 smtpd 仍会添加他们的标头。

PS：不要使用`mail()`。使用更复杂的东西，如 PHPMailer 或类似的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:20:12.307

所有邮件服务器都会在邮件中添加一个`Received`标题行。您可以将自己的服务器配置为不添加此类标头，甚至删除其他此类标头，但您无法控制其他邮件服务器的行为。这意味着您环境之外的第一台服务器将添加您最后一台服务器的 IP 和主机名，您对此无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:20:26.810

当您通过任何服务/API 发送邮件时，您可以发送您想要的任何标题，但它取决于客户端（gmail、exchange 等）以显示要显示的数据类型。此外，SMTP 服务器会修改或覆盖它认为必要的标头数据。

您的标头数据在其传输过程中基本上经过至少 2 个过滤层。

# ruby-on-rails - 使用 rspec 测试自定义验证器。为什么我会得到 Proc？

> ID：13433353
> 
> 赞同：5
> 
> 时间：2012-11-17T18:15:33.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, tdd

正如标题所示，我正在尝试使用 Rspec 测试自定义验证器。我得到一个错误，我不明白为什么......如果你能解释一下，我会非常感激。开始了：

**验证器规范**

```
require 'spec_helper'

describe GraphDateValidator do

  it "should not validate activity with empty start time" do
    expect { Graph.new( {start_time: ''}).valid? }.to eq(false)
  end
end 
```

如果我打印`Graph.new( {start_time: ''}).valid?`它打印`false`

但是，当它通过规范时，它会返回一个 Proc 对象：

```
expected: false
            got: #<Proc:0x007fe5853fdd48@/Users/MLP/... 
```

谁能告诉我为什么我得到那个 proc 对象？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-17T19:46:58.470

通过在你的期望中使用 {}，那么你实际上并没有执行期望方法——而是你发送期望一个块。所以重命名为

```
it "should not validate activity with empty start time" do
  expect( Graph.new( {start_time: ''}).valid? ).to eq(false)
end 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-14T20:16:16.563

要获得更好的样式和失败消息，您可以使用 rspec 的谓词匹配器：

```
it "does not accept empty start time" do
  Graph.new( {start_time: ''}).should_not be_valid
end 
```

编辑1（解释风格品味）：

这为您提供了可读的错误消息，例如“预期 $foo 有效，但不是”而不是“真应该是假”。

使用“更好的风格”，我指的是使用 Matcher（如我所写），而不是`should`. 所以下面不会使用不推荐使用的语法，但仍然使用匹配器：

```
it "does not accept empty start time" do
  expect( Graph.new( {start_time: ''}) ).to be_valid
end 
```

# apache - 使用 .htaccess 在地址栏中隐藏/屏蔽子域

> ID：13433355
> 
> 赞同：0
> 
> 时间：2012-11-17T18:15:40.577
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, rewrite

我在 www.mydomain.com 中使用 .htaccess 将特定 IP 重定向到子域 www2.mydomain.com。那里一切都好。

现在我想通过更改地址栏显示 www.mydomain.com 来隐藏您在 www2.mydomain.com 上的事实，这可能吗？

www.mydomain.com 和 www2.mydomain.com 都在同一个主机上。

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:43:29.407

听起来您正在寻求使两个域名都包含相同的应用程序文件夹。

在使用虚拟主机的典型 LAMP 环境中，您可以将多个虚拟主机指向同一个文件夹。这意味着您必须更深入地了解您的配置，而不仅仅是 .htaccess 文件。您需要 SSH/root 访问远程服务器。如果它在本地服务，然后导航离开。您正在寻找的虚拟主机是 www2.mydomain.com 和 mydoamin.com

1.  找到您的 httpd.conf 文件。这通常存储在 Apache 应用程序目录中。
2.  确保启用了虚拟主机模块
3.  定义或修改虚拟主机以指向相同的文档根目录。
4.  保存并重新启动 Apache（确保没有配置错误，否则将无法重新启动）

如果您在使用并行或 cpanel 的平台上，则每个 vhosts 文件夹内应该有一个本地配置文件，其中包含类似的虚拟主机配置。这是典型的，因为它减少了在使用核心 apache 配置时弄乱整个服务器的机会。

# android - AppInventor Android 应用程序具有保存在 XML 上的可定制信息？

> ID：13433357
> 
> 赞同：1
> 
> 时间：2012-11-17T18:15:49.947
> 
> 标签：android, xml, url, app-inventor

我想实现一个使用 WebViewer 块打开远程 url 的 AppInventor 应用程序。

url 必须保存在压缩的 apk 文件中的 xml 中。

通过这种方式，我可以在线分发应用程序，在 php 站点上，自定义 apk，时间，只需通过 php 修改压缩 apk 文件中的 xml，并在每个 apk 中分配正确的 url 以打开。

是否有可能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:38:02.033

这是不可能的，但也没有必要做这样的事情......

只需将您的 URL 作为变量保存在您的应用程序中并将其存储在 TinyDB 中。在每次运行应用程序时，您都可以检查您的服务器是否有新内容要下载。如果是，请在应用程序中更新您的变量并在 TinyDB 中更新它...

如果您想在本地存储 XML 文件，可以将其保存在设备的 SD 卡上，请参见[此处](http://puravidaapps.com/snippets.php#download)的示例...

# .htaccess - 不能使用 HTACCESS 对 PHP 文件进行 IP 限制

> ID：13433358
> 
> 赞同：0
> 
> 时间：2012-11-17T18:16:05.600
> 
> 标签：.htaccess, ip-restrictions

我有一个目录并受 htaccess 保护以进行 IP 限制。
IP 限制工作良好，但仅适用于目录的例外`.php`文件。

***例子 ：***

```
site.com/dir/             <-- Get Access Denied Error
site.com/dir/index.php    <-- Open page without access denied error 
```

***我的 .htaccess 文件：***

```
ErrorDocument 404 /notfound2.html
ErrorDocument 403 /notfound2.html
    AuthName "Access Restrict"
    AuthType Basic 
<Limit GET POST>
    order deny,allow
    deny from all
    allow from 47.147.50.5
</Limit> 
```

我想限制一个目录（所有对象也包括 php 文件）只能从一个 IP 访问
问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:39:44.483

您似乎想拒绝目录列表。

尝试`Option -Indexes`或`IndexIgnore *.tgz *.sql *.tar`针对特定文件。

有关详细信息，请参阅[http://wiki.apache.org/httpd/DirectoryListings](http://wiki.apache.org/httpd/DirectoryListings)。

# ms-access - 在 Access 中创建一个简单的计算字段

> ID：13433359
> 
> 赞同：0
> 
> 时间：2012-11-17T18:16:12.613
> 
> 标签：ms-access, macros

我有三个字段 F1、F2 和 F3。前两个字段用数字填充。如何像在 Excel 中一样自动设置第三个字段“F3 = F1 - F2”的值？也许它可以用宏来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:35:20.110

考虑是否`F3`必须是表中的实际字段。它的值来自一个简单的计算，因此您可以在需要时使用查询字段表达式执行该计算。

```
SELECT F1, F2, (F1 - F2) AS F3
FROM YourTable; 
```

如果你有一个令人信服的理由为什么`F3`必须是一个真实的字段，你可以执行一个`UPDATE`语句来存储这些值。

```
UPDATE YourTable
SET F3 = F1 - F2; 
```

通常首选第一种方法，因为它确保计算的`F3`值始终与当前`F1`值一致`F2`。如果您不存储`F3`，则无需更改存储`F3`的值以响应`F1`和/或`F2`值的更改。

# javascript - 表达函数和变量

> ID：13433363
> 
> 赞同：0
> 
> 时间：2012-11-17T18:16:40.983
> 
> 标签：javascript, node.js, function, variables, express

我正在尝试创建一个在属性中有变量的函数，如果 var 存在则返回变量，否则返回 var 名称

```
app.locals.test = function(myvar){
    if ( typeof(myvar) != "undefined" ) {
        return myvar
    }
    return 'false'
} 
```

我没有问题 il var 已定义但 fi var 未定义我有 testVar 未定义。而且我不知道如何获得 var 名称

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:10:53.410

```
function testVar(variable) {
    if (!variable) return 'UNDEFINED VARIABLE';
    return variable;
} 
```

But I can't get the var name with javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:22:06.150

如果我的问题是正确的......您希望返回函数中本地称为“myvar”的变量的名称。因此，如果上面的代码有效，那么......解决方案可以是：

```
app.locals.test = function(myvar){
    if ( typeof(myvar) != "undefined" ) {
        return myvar;
    } else {
       return 'myvar';
    }
} 
```

# mysql - 如何在 MYSQL (PHP) 中显示当前名称排序规则

> ID：13433364
> 
> 赞同：0
> 
> 时间：2012-11-17T18:16:39.990
> 
> 标签：mysql

我正在测试我的查询是否有效并且实际上无法做到。

我的 php 文件中有这个查询。

> 设置名称 'utf8' 整理 'utf8_unicode_ci'

现在我想做相反的事情，比如“SHOW CURRENT COLLATE”。意味着我想知道在我的查询之前和查询之后设置的 NAMES COLLATE 是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:30:48.623

您可以从以下位置选择该信息`information_schema`：

```
SELECT `TABLE_COLLATION` 
       FROM `INFORMATION_SCHEMA.TABLES` 
       WHERE `TABLE_NAME` = 'yourtablename' 
```

# paypal - 用于小额支付的 PayPal Payments Pro？

> ID：13433365
> 
> 赞同：2
> 
> 时间：2012-11-17T18:16:50.500
> 
> 标签：paypal

贝宝的产品及其名称确实令人困惑。我已将我的 PayPal 商业账户切换为接受**小额支付**，并且我想使用**PayPal API 在我的应用程序上接受卡**，但我不确定要使用哪个 API - 是“PayPal Payments Pro”吗？

是的，我知道我需要符合 PCI 才能使用 Payments Pro，我已经知道了这部分，但我只是想知道**小额支付的 API 在哪里**？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T04:15:09.580

PayPal Payments Pro Direct Payment Edition 是您需要使用的。您可以在此处找到更多信息：[https ://www.x.com/developers/paypal/products/paypal-payments-pro](https://www.x.com/developers/paypal/products/paypal-payments-pro)

只要您使用 PayPal 作为处理器，但不能使用 PayPal Gateway 产品，您始终可以注册小额支付定价。因此，如果您使用 PayPal Payments Pro Direct Payment 版本，您将使用 PayPal 商业账户，您可以申请小额支付 txn 定价。

您可以在这里申请小额支付定价：[https](https://micropayments.paypal-labs.com/) ://micropayments.paypal-labs.com/ （点击页面中心的注册标签）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T19:46:52.023

他们最近对 Payments Pro 所做的更改使事情变得更加混乱。它曾经被称为 Website Payments Pro，它指的是 DoDirectPayment API。现在他们放弃了“网站”部分，只是将其称为 Payments Pro，但他们已将其更改为 PayFlow API，而不是使用 DoDirectPayment。因此，您需要做的第一件事是确认您获得了批准，然后参考[相应的文档](https://www.x.com/developers/paypal/development-and-integration-guides#wpp)。

至于小额支付，没有专门的 API。这由您的 PayPal 帐户本身控制。如果您想使用小额支付，您需要让 PayPal 为您的帐户启用此功能，但有几点需要牢记。

首先，您在使用 Payments Pro 时不会获得小额支付费率。您只能通过某种形式的 PayPal 付款获得该费率……而不是直接信用卡。

此外，过去您必须拥有一个单独的 PayPal 帐户才能向其发送小额支付交易。不久前，他们引入了对两者都使用单个帐户的功能，它会根据您收到的付款金额自动调整费率。您需要与 PayPal 讨论为您设置该设置，但同样，它无论如何都不适用于 Payments Pro 交易。

如果您要处理大量低美元付款，您可能只想跳过 Payments Pro 并使用[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)或[Adaptive Payments](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro)。

# c# - WebBrowser 与 WebBrowserBase 类

> ID：13433369
> 
> 赞同：2
> 
> 时间：2012-11-17T18:17:13.447
> 
> 标签：c#, asp.net, browser, webbrowser-control, iwebbrowser2

在我引用非 .net 内置（替代）之前

我想知道

## 内置`.Net`类可以提供使用：

`WebBrowser`&`WebBrowserBase`课程

我想知道的是：**这两者有什么区别？**.

正如 msdn 在后来的一个 - WebBrowserBase - 中指出的那样

*“此 API 支持 .NET Framework 基础结构，**不打算**直接从您的代码中使用”*

问题从一个简单的任务开始：从网站检索文件（数据源 xml）。听起来很简单？所以你可以使用任何方法......，最好是最简单且资源高效的方法。

**但是**！

场景是：同一个来源（一个可靠的）最近通过使用 cookie 阻止了自动流量，因为我可以理解 WebClient 正在使用您的主要浏览器的相同资源（在我的情况下为 IE9）。

....经过我的研究，使用 WebBrowser“引擎”作为文件检索器...

将完美地完成这项工作。

你可以使用任何（不仅仅是 Microsoft IE）

关于我所做的其他测试，您可以访问：

[http://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)

+

[https://code.google.com/p/selenium/downloads/list](https://code.google.com/p/selenium/downloads/list)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T18:12:12.927

## 你的问题

> 情况是，同一来源（一个可靠的）最近通过使用 cookie 阻止了自动流量

好吧，如果那是你的问题（cookies）你为什么不试试这个网络客户端呢？

```
public class CookieWebClient : WebClient
{
    private readonly CookieContainer _cookies = new CookieContainer();

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);
        HttpWebRequest webRequest = request as HttpWebRequest;
        if (webRequest != null)
        {
            webRequest.CookieContainer = _cookies;
        }
        return request;
    }
} 
```

## WebBrowser 与 WebBrowserBase

至于 WebBrowser 和 WebBrowserBase 的区别，WebBrowser 继承了 WebBrowserBase 对其进行扩展，使其成为一个功能齐全的网络浏览器。WebBrowserBase 派上用场的地方是，如果您想自定义超出支持范围的 WebBrowser - 您可以覆盖事物并使用 WebBrowserBase 来扩展功能等。作为一项规则，除非您绝对必须，否则您应该坚持只使用普通的 WebBrowser 控件 - 并且仅当您正在呈现网页或想使用它来恶意执行 javascript 时。

## 关于扩展 WebBrowser 的一般评论

我个人为网络浏览器发现的最有用的修改之一是公开下载标志，因此您可以控制网络浏览器是否下载图像等。如何做到这一点的一个很好的例子是：[https ://stackoverflow.com/一个/7738174/184746](https://stackoverflow.com/a/7738174/184746)

# odbc - 从 cmd 行安装 ODBC 连接

> ID：13433371
> 
> 赞同：4
> 
> 时间：2012-11-17T18:17:40.020
> 
> 标签：odbc, cmd

**从 cmd 行安装 ODBC 连接**

嗨，我想安装一个 odbc 连接扔了 cmd 行，在下面的这个 cmd 中我只能打开
我想使用的数据库的名称和驱动程序。我还需要添加一个 ip、用户、密码、描述。

![在此处输入图像描述](../Images/f5f085eff28be648defa9f3cfeaa5440.png)

**odbcconf configsysdsn "MySQL ODBC 5.2w 驱动程序" "DSN=test1|SERVER=(local)"**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T22:05:38.623

好的，想通了！
**odbcconf configsysdsn "MySQL ODBC 5.2w 驱动程序" "DSN=test;SERVER=127.0.0.1;PORT=3306;DATABASE=mdb;UID=root"**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-17T13:00:01.797

根据[Microsoft.com 上的这篇文章](https://docs.microsoft.com/en-us/sql/odbc/odbcconf-exe?view=sql-server-ver15)：

> ODBCCONF.exe 将在 Windows 数据访问组件的未来版本中删除。避免使用此功能，并计划修改当前使用此功能的应用程序。您可以使用 PowerShell 命令来管理驱动程序和数据源。有关这些 PowerShell 命令的详细信息，请参阅**[Windows 数据访问组件 cmdlet](https://docs.microsoft.com/en-us/powershell/module/wdac/?view=win10-ps)**。

与您的命令等效的 Power Shell 将是：

```
Add-OdbcDsn -Name "test" -DriverName "MySQL ODBC 5.2w Driver" -Platform "32-bit" -DsnType "System" -SetPropertyValue @("SERVER=127.0.0.1", "PORT=3306", "DATABASE=mdb") 
```

# android - Android：尝试从我的应用程序访问 Google Play 商店

> ID：13433372
> 
> 赞同：1
> 
> 时间：2012-11-17T18:17:46.627
> 
> 标签：android

> **可能重复：**
> [在移动版android中打开google play store的链接](https://stackoverflow.com/questions/10922762/open-link-of-google-play-store-in-mobile-version-android)

我的应用程序有一个免费版本（有广告），有一个付费版本（没有广告）。在我的免费版本上，我有一个升级按钮。我想要这个升级按钮去谷歌播放商店到销售我的应用程序的页面。我以前看过它，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:20:11.493

您应该启动以下意图

```
 Intent intent = new Intent( Intent.ACTION_VIEW );
    intent.setData( Uri.parse( "market://details?id=<YOUR_APP_PACKAGE>" ) );
    startActivity( intent ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:20:10.170

您将不得不使用意图来启动浏览器/播放商店。

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
startActivity(browserIntent); 
```

在 Google.com 的位置放置您的应用程序的 URL。此浏览器意图将为用户提供选择播放商店而不是浏览器的选项

# android - 在图像顶部编辑文本并保存在android中？

> ID：13433375
> 
> 赞同：0
> 
> 时间：2012-11-17T18:18:05.223
> 
> 标签：android, image, textview, android-canvas

我注意到画布和绘画是向图像添加文本的标准方法，例如：

```
Paint myPaint = new Paint();
myPaint.setColor(Color.Black);
myPaint.setTextSize(25);
myCanvas.drawText("Test test test", 0, 0, myPaint); //Set the position 
```

，但不是在图像上方有一个单独的文本视图，当更新时会用更新的文本重绘画布 - 如果我想编辑*图像顶部的*文本，以便当我通过 android keyb 键入时，文本呈现完全一样将在最终编辑的位图上 - 我可以采取什么样的方法？

我想想象一个模因生成器，它可以让你直接在图像上输入影响字体，这就是我想要实现的那种 ui。例如，像这样的图像： http: [//i.imgur.com/JgGRj.jpg](http://i.imgur.com/JgGRj.jpg) - 所以显示太阳图形，但顶部的文本可以通过单击进行编辑，并且新创建的文本将与图像完全一样保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:37:21.003

对于用户与鼠标和键盘交互的浏览器应用程序，这将是一个好主意。感觉就像一个图像编辑器（像 Photoshop 的光栅或像 Inkscape 的矢量）。

Android 设备的问题在于，用户可能只有触摸屏来输入字符，这意味着大部分屏幕空间都由虚拟键盘占用。即使对于更大的屏幕（如平板电脑）也是如此。

从技术上讲，您不需要子类化`View`：使用适当的背景和字体，您应该可以使用简单的`EditText`. 问题是这种*实时预览*功能在触摸屏设备上几乎没有用，所以我强烈建议像 webapp 一样在后台生成图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:56:56.377

您可能会考虑的另一种方法是使用位于图像上正确位置的 EditText。使用透明背景给人的印象是文本是图像的一部分。

当你想保存图像时，你可以使用 drawText() 来组合最终结果并保存它。需要做一些工作才能使您用于正确绘制文本的 Paint，特别是确保您抖动并使用抗锯齿。或者您可以 getDrawingCache() 获取 EditText 的位图表示并将其绘制在背景图像之上。

祝你好运。

# c - ANSI C 兼容的事件循环

> ID：13433379
> 
> 赞同：-2
> 
> 时间：2012-11-17T18:18:37.233
> 
> 标签：c, multithreading, gcc, network-programming, event-loop

是否有 ANSI-C 兼容的事件循环，例如 libev 或 libevent？我的要求是使用 -ansi 标志进行编译。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:25:46.263

在 Linux 上不能有任何严格兼容 ANSI 的事件循环，因为事件循环的目的是巧妙地多路复用多个输入；在 Linux 上要进行多路复用，您*必须*调用一些系统调用，例如[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)、[pselect(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/pselect.2.html)或朋友，所有这些系统调用都没有在 ANSI C（或 ISO C99 或 ISO C2011）中标准化，而只是在 Posix 中.

# python - 在列表中添加两个项目时出现索引错误

> ID：13433381
> 
> 赞同：0
> 
> 时间：2012-11-17T18:18:40.557
> 
> 标签：python

所以，我有 8 个随机生成的数字，都用`ct[i]`. 我想添加一个数字 ( `ct[i]`) 和`ct[i+1]`. 但是，这会产生列表索引超出范围错误。怎么了？

```
for i in range(totrange):
    tot1 = ct[i] + ct[i+1] 
```

`totrange`通常是 8，但我想有一点灵活性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:27:56.657

您可能应该使用`range(len(ct)-1)`来处理这个问题，因为最后一个`i`，`i+1`是一个大于最后一个索引的值`ct`。

例子：

```
In [30]: ct=range(5)     #ct =[0,1,2,3,4]

In [31]: for i in range(len(ct)-1):
    print(ct[i]+ct[i+1])
   ....:     
1
3
5
7 
```

或者更好地使用`zip()`基于解决方案，根本不需要使用索引：

```
In [32]: for x,y in zip(ct,ct[1:]):
    print (x+y)
   ....:     
1
3
5
7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:21:49.113

如果`totrange`是 8 并且`ct`包含 8 个元素，最后一次`ct[i+1]`调用将尝试从 中获取第 9 个元素`ct`，导致列表索引超出范围错误。

因此，`totrange`永远不应大于`len(ct) - 1`。

# javascript - 使用文档片段渲染主干视图会中断事件处理

> ID：13433385
> 
> 赞同：2
> 
> 时间：2012-11-17T18:19:10.117
> 
> 标签：javascript, backbone.js

我修改了我的 Backbone 应用程序以使用 DOM 文档片段呈现一个大表，当有很多行时，这会带来很好的性能改进。

不幸的是，这似乎破坏了事件处理，因此每一行的视图不再接收点击事件。我创建了一个[最小的示例](http://jsfiddle.net/HAZ4G/1/)来演示这一点。

我该怎么做才能解决这个问题？

```
// Javascript
$(window).load(function(){

  var Item = Backbone.Model.extend();

  var Items = Backbone.Collection.extend({
      model: Item,
      count: 5,
      initialize: function() {
        for(i=0; i<this.count; i++){
          this.add(new Item({text: i}));
        }
      }
  });

  var ItemView = Backbone.View.extend({
      tagName: 'tr',

      initialize: function(item) {
        this.item = item;
      },

      render: function() {
        this.$el.append('<td class="item">' + this.item.get('text') + '</td>');
        return this;
      },

      events: function() {
        return { "click .item": function() {
            console.log('handling click on item '+this.item.get('text'));
          }
        };
      }

  });

  var TableBodyView = Backbone.View.extend({
      tagName: 'tbody',

      render: function() {
          if(this.options.useFragment){
              this.renderWithFragment();
          } else {
               this.renderWithoutFragment();
          }
        return this;
      },

      renderWithFragment: function() {
          var fragment = document.createDocumentFragment();
          this.collection.each(function(item){
            fragment.appendChild((new ItemView(item)).render().el);
          });
          this.$el.append(fragment.cloneNode(true));
      },

      renderWithoutFragment: function() {
          self = this;
          this.collection.each(function(item){
              self.$el.append((new ItemView(item)).render().el);
          });
      }
  });

var items = new Items();
$('#t1').append((new TableBodyView({collection: items, useFragment: false})).render().el);
$('#t2').append((new TableBodyView({collection: items, useFragment: true})).render().el);
});

// HTML
<table id="t1" />
<table id="t2" />

// CSS
table { float: left; margin: 10px; padding: 5px; }
table#t1 { background: green; }
table#t2 { background: red; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T00:06:44.417

您的问题是[`cloneNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode#Notes)明确不复制事件处理程序：

> 克隆节点会复制其所有属性及其值，但**不会**复制事件侦听器。

所以，当你这样做时：

```
this.$el.append(fragment.cloneNode(true));
// No more events -------^ 
```

[`delegate`](http://api.jquery.com/delegate/)您失去了附加到视图的Backbone ，`el`并且您的所有事件处理都消失了。如果要克隆`el`并保留事件，则可以将`withDataAndEvents`标志与 jQuery 一起使用[`clone`](http://api.jquery.com/clone/)：

> **.clone( [withDataAndEvents] [, deepWithDataAndEvents] )**
> 
> **withDataAndEvents**一个布尔值，指示是否应将事件处理程序和数据与元素一起复制。默认值为`false`。
> 
> **deepWithDataAndEvents**一个布尔值，指示是否应复制克隆元素的所有子元素的事件处理程序和数据。默认情况下，它的值匹配第一个参数的值（默认为`false`）。

所以你应该可以这样做：

```
this.$el.append($(fragment).clone(true)); 
```

演示（请打开您的控制台）：http: [//jsfiddle.net/ambiguous/M6SvH/](http://jsfiddle.net/ambiguous/M6SvH/)

# c++ - 无法从“C++ GUI Programming with Qt 4”构建 FindDialog 示例

> ID：13433387
> 
> 赞同：2
> 
> 时间：2012-11-17T18:19:32.487
> 
> 标签：c++, qt, linker

在“使用 Qt 4 进行 C++ GUI 编程”一书中，第 1 部分第 2 章中逐步显示了 FindDialog Widget 示例，现在我正在尝试使用 qmake 生成的 Makefile 构建此示例，但它抱怨说：

```
g++ -Wl,-O1 -o Hello hello.o    -L/usr/lib/i386-linux-gnu -lQtGui -lQtCore -lpthread 
hello.o: In function `main':
hello.cpp:(.text.startup+0x47): undefined reference to `FindDialog::FindDialog(QWidget*)'
collect2: ld returned 1 exit status
make: *** [Hello] Error 1 
```

使用 shell 命令提示符（在 Linux Mint 上）我创建了一个目录 Hello 我创建了一个项目文件（使用 qmake）Hello.pro 这是 /Hello 中的 ls 命令输出：

```
FindDialog.cpp  FindDialog.h  hello.cpp  hello.o  Hello.pro  Makefile 
```

我一直在尝试找出问题 2 小时，我将非常感谢任何帮助，谢谢。

这是包含 main 的文件：

```
#include "FindDialog.h"

int main(int argc, char *argv[])
 {
 QApplication app(argc, argv);
 FindDialog *dialog = new FindDialog();
 dialog->show();
 return app.exec();
 } 
```

头文件：`FindDialog.h`

```
#ifndef FIND_DIALOG_H
#define FIND_DIALOG_H
#include <QDialog>
class QCheckBox;
class QLabel;
class QLineEdit;
class QPushButton;

class FindDialog : public QDialog
{
  Q_OBJECT

  public:
   FindDialog(QWidget* parent = 0);
   ~FindDialog();
   signals:
   void findNext(const QString &str, Qt::CaseSensitivity cs);
   void findPrevious(const QString &str, Qt::CaseSensitivity cs);
  private slots:
   void findClicked();
   void enableFindFunction(const QString &text);
  private:
   QLabel *label;
   QLineEdit *lineEdit;
   QCheckBox *caseCheckBox;
   QCheckBox *backwardCheckBox;
   QPushButton *findButton;
   QPushButton *closeButton;
};

#endif 
```

实施文件：`FindDialog.cpp`

```
#include <QtGui>
#include "FindDialog.h"

FindDialog::FindDialog(QWidget *parent = 0):QDialog(parent)
{
   //Creating components
   label = new QLabel(tr("Find &what : "));
   lineEdit = new QLineEdit;
   label->setBuddy(lineEdit);

   caseCheckBox = new QCheckBox(tr("Match &case"));
   backwardCheckBox = new QCheckBox(tr("Search &backward"));
   findButton = new QPushButton(tr("&Find"));
   findButton->setDefault(true);
   findButton->setEnabled(false);
   closeButton = new QPushButton(tr("close"));
   //adding event handling
   connect(lineEdit, SIGNAL(textChanged(const QString &)), this, SLOT(enableFindButton(const QString &)));
   connect(findButton, SIGNAL(clicked()), this, SLOT(findClicked()));
   connect(closeButton, SIGNAL(clicked()), this, SLOT(close()));
   //setting layout
   QHBoxLayout *topLeftLayout = new QHBoxLayout;
   topLeftLayout->addWidget(label);
   topLeftLayout->addWidget(lineEdit);

   QVBoxLayout *leftLayout = new QVBoxLayout;
   leftLayout->addLayout(topLeftLayout);
   leftLayout->addWidget(caseCheckBox);
   leftLayout->addWidget(backwardCheckBox);

   QVBoxLayout *rightLayout = new QVBoxLayout;
   rightLayout->addWidget(findButton);
   rightLayout->addWidget(closeButton);
   rightLayout->addStretch();

   QHBoxLayout *mainLayout = new QHBoxLayout;
   mainLayout->addLayout(leftLayout);
   mainLayout->addLayout(rightLayout);
   setLayout(mainLayout);
   //window title
   setWindowTitle(tr("Find"));
   setFixedHeight(sizeHint().height());
  }
 FindDialog::~FindDialog(){
 }
 void FindDialog::findClicked()
 {
   QString text = lineEdit->text();
   Qt::CaseSensitivity cs = caseCheckBox->isChecked() ? Qt::CaseSensitive : Qt::CaseInsensitive;
   if (backwardCheckBox->isChecked()) {
      emit findPrevious(text, cs);
   }
   else {
      emit findNext(text, cs);
   }
  }
  void FindDialog::enableFindButton(const QString &text)
  {
    findButton->setEnabled(!text.isEmpty());
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:06:46.133

Lol4t0 的回答解决了你的问题。你只需要重新运行`qmake -project`。

# ruby-on-rails - 使用捆绑安装时出现大量错误

> ID：13433396
> 
> 赞同：0
> 
> 时间：2012-11-17T18:20:39.647
> 
> 标签：ruby-on-rails, ruby

我对 ruby​​ 完全陌生，并且一直在使用一个教程来指导我将一些 gem 添加到我的项目的 Gemfile 中。宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 

group :test, :development do 
  gem 'turn'
  gem 'rspec-rails'
  gem 'capybara'
  gem 'guard-rspec'
  gem 'growl_notify'

end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

然后我继续我的终端，运行 bundle install 并得到了一堆错误。很多，所以我不想全部添加，但我会添加一些。

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
creating Makefile

make
compiling src/rbae.c
src/rbae.c:13:27: error: Carbon/Carbon.h: No such file or directory
src/rbae.c:14:43: error: CoreFoundation/CoreFoundation.h: No such file or directory
In file included from src/rbae.c:15:
src/SendThreadSafe.h:73:53: error: ApplicationServices/ApplicationServices.h: No such file or directory
In file included from src/rbae.c:15:
src/SendThreadSafe.h:125: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SendMessageThreadSafe’
src/rbae.c:24: error: expected specifier-qualifier-list before ‘AEDesc’
src/rbae.c:38: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘upp_GenericEventHandler’
src/rbae.c:39: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘upp_GenericCoercionHandler’
src/rbae.c:61: error: expected declaration specifiers or ‘...’ before ‘OSErr’
src/rbae.c: In function ‘rbAE_raiseMacOSError’:
src/rbae.c:66: error: ‘number’ undeclared (first use in this function)
src/rbae.c:66: error: (Each undeclared identifier is reported only once
src/rbae.c:66: error: for each function it appears in.)
src/rbae.c: At top level:
src/rbae.c:89: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘rbStringToDescType’
src/rbae.c:99: error: expected ‘)’ before ‘descType’
src/rbae.c: In function ‘rbAE_freeAEDesc’:
src/rbae.c:112: warning: implicit declaration of function ‘AEDisposeDesc’
src/rbae.c:112: error: ‘struct rbAE_AEDescWrapper’ has no member named ‘desc’
src/rbae.c: At top level:
src/rbae.c:117: warning: type defaults to ‘int’ in declaration of ‘AEDesc’
src/rbae.c:117: error: expected ‘;’, ‘,’ or ‘)’ before ‘*’ token
src/rbae.c:138: warning: type defaults to ‘int’ in declaration of ‘AEDesc’
src/rbae.c:138: error: expected ‘;’, ‘,’ or ‘)’ before ‘*’ token
src/rbae.c: In function ‘rbAE_AEDesc_new’:
src/rbae.c:153: error: ‘OSErr’ undeclared (first use in this function)
src/rbae.c:153: error: expected ‘;’ before ‘err’
src/rbae.c:154: error: ‘AEDesc’ undeclared (first use in this function)
src/rbae.c:154: error: expected ‘;’ before ‘desc’
src/rbae.c:157: error: ‘err’ undeclared (first use in this function)
src/rbae.c:157: warning: implicit declaration of function ‘AECreateDesc’
src/rbae.c:157: warning: implicit declaration of function ‘rbStringToDescType’
src/rbae.c:159: error: ‘desc’ undeclared (first use in this function)
src/rbae.c:160: error: ‘noErr’ undeclared (first use in this function)
src/rbae.c:160: error: too many arguments to function ‘rbAE_raiseMacOSError’
src/rbae.c:161: warning: implicit declaration of function ‘rbAE_wrapAEDesc’
src/rbae.c: In function ‘rbAE_AEDesc_newList’:
src/rbae.c:168: error: ‘OSErr’ undeclared (first use in this function)
src/rbae.c:168: error: expected ‘;’ before ‘err’
src/rbae.c:169: error: ‘AEDesc’ undeclared (first use in this function) 
```

我怎样才能克服这些？以我有限的知识，我安装的 ruby​​ 文件似乎有错误......但可能还有一段路要走。

我的轨道-V：

```
Rails 3.2.9

ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.2.1] 
```

# video.js - 视频折叠到播放控制栏

> ID：13433398
> 
> 赞同：1
> 
> 时间：2012-11-17T18:20:54.723
> 
> 标签：video.js

我正在使用 video.js 和 fitvids.js 在我的网站上显示自托管视频。这一直很好，直到过去 24 小时我开始注意到播放时视频会折叠到控制栏。这似乎发生在我第一次启用 Cloudflare 之后。我仍然可以全屏工作。

此后，我禁用了所有缓存程序，删除了 Cloudflare（并更改了 DNS 设置）并禁用了 fitvids.js，但除非我指定特定的高度和宽度，否则无法获得“正常行为”（以前使用 100% 和 auto 工作得很好根据下面的代码）。非常感谢您对如何解决此问题的想法。

[视频页面：](http://orenphotography.com/videos/) 当前代码：

```
[video mp4="http://url.mp4" video width="100%" video height="auto" video poster="http://url.png"] 
```

# javascript - 从 cookie 中读取多个复选框值

> ID：13433399
> 
> 赞同：1
> 
> 时间：2012-11-17T18:21:20.913
> 
> 标签：javascript, jquery, attributes, checkbox

我可以使用下面的 jquery 函数为复选框设置 cookie。我正在使用 map 函数将值读取到 cookie 中，并且 cookie 会自动保存。

但我无法读取 cookie 并在页面刷新时设置复选框值。我需要根据 cookie 值将复选框设置为选中/未选中。提前致谢。

## HTML 代码

```
<input type="checkbox"  id="Option1" name="Option1" />
<input type="checkbox"  id="Option2" name="Option2" />
<input type="checkbox"  id="Option3" name="Option3" />
<input type="checkbox"  id="Option4" name="Option4" />
<input type="checkbox"  id="Option5" name="Option5" /> 
```

## jQuery部分

```
var $checkboxes;
//set the cookie
function setcookie() {
    var options= $checkboxes.map(function() {
        if (this.checked) return this.name;
    }).get().join(',');
   $.cookie('new_cookie', options);

}

$(function() {
    $checkboxes = $('input:checkbox').change(setcookie);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:38:20.633

尝试这个：

```
var $checkboxes = $('input:checkbox');

//set the cookie
function setcookie() {
    var options = $checkboxes.map(function () {
        if (this.checked) return this.name;
    }).get().join(',');
    $.cookie('new_cookie', options);
}

$checkboxes.change(setcookie);

$(document).ready(function () {

    var values = $.cookie('new_cookie').split(',');
    $checkboxes.prop('checked', false);
    for(var $v in values) {
        $("input[name='" + values[$v] + "']").prop('checked', true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:43:41.243

即使浏览器关闭或在多选项卡中，也可以使 cookie 持续更长时间。尝试

```
var $checkboxes;
//set the cookie
function setcookie() {
    var options= $checkboxes.map(function() {
        if (this.checked) return this.name;
    }).get().join(',');
   $.cookie('new_cookie', options,{expires:1});

}

$(function() {
    $checkboxes = $('input:checkbox').change(setcookie);

}); 
```

并在加载或刷新页面后使用

```
var alreadySetCookies= $.cookie('new_cookie').split(',');

for(var $cookie in alreadySetCookies) {
        $("input[name='" + alreadySetCookies[$cookie] + "']").attr("checked", "checked");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:33:51.127

选择相应的复选框试试这个：

```
 var chk = $.cookie('the_cookie');

 $('#'+chk).prop('checked','checked'); 
```

或者

```
$("'#"+chk+"'").prop('checked','checked'); 
```

没有尝试只是假设这可能会有所帮助。

# java - 将在一台服务器上正常工作的 Tomcat 6 webapp 复制到另一台 Tomcat 6 服务器得到 Null 组件错误

> ID：13433400
> 
> 赞同：0
> 
> 时间：2012-11-17T18:21:33.480
> 
> 标签：java, tomcat

我在 Windows 7 64 位平台上运行 tomcat 6、64 位。我将我的 Web 应用程序（整个文件夹 - 它称为 cuba4remedy）复制到另一台机器上的 tomcat 6 64 位安装。这个运行 Windows 2008 标准 64 位。

servlet 在我的 Windows 7 开发机器上运行良好，但是当我在新机器上运行时，我在 Catalinaxxx.log 中看到了这个错误：-

严重：空组件 Catalina:type=JspMonitor,name=jsp,WebModule=//localhost/myappnamehere,J2EEApplication=none,J2EEServer=none

我真的不明白为什么我会收到这个错误。有什么想法吗？

还有一点可能是相关的。我使用 Javac 1.7 版在我的开发机器上编译。在我复制到的机器上只安装了 Java 运行时——即 Java 1.6 版。

编辑对于面临此问题的其他任何人，Java 的开发版本似乎必须与部署版本相同或更低。我将我的 dev java 版本降级为与目标运行时版本相同，然后这个错误就消失了。谁能证实这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:38:46.633

您可以使用 J7 编译并在 J7 上部署。[`-target 1.6`](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)只在为 JDK 1.6 编译时使用该参数。否则（正如预期的那样）java 7 将编译为 java 7 运行时。

# java - Java：读取 .csv 文件并保存到数组中

> ID：13433407
> 
> 赞同：3
> 
> 时间：2012-11-17T18:22:13.143
> 
> 标签：java, arrays, csv

当我尝试读取 .csv 文件并将每一列保存到数组中时，我遇到了异常问题。虽然，它可能看起来很长，但事实并非如此。我只有 15 个不同的数组。

这是行中的异常“线程“main”java.lang.ArrayIndexOutOfBoundsException：2中的异常

> 部门[i] = dataArray[2];

有什么我可以做的吗？

```
 BufferedReader CSVFile = 
            new BufferedReader(new FileReader("Sub-Companies.csv"));

      String dataRow = CSVFile.readLine();
      // Read the number of the lines in .csv file 
      // i = row of the .csv file
      int i = 0; 
      while (dataRow != null){
          i++;
          dataRow = CSVFile.readLine();

        }
      System.out.println(i);
      // Close the file once all data has been read.
      CSVFile.close();

      // End the printout with a blank line.
      System.out.println();

      // Save into arrays
      customer_id = new String[i];
      company_name = new String[i];
      department = new String[i];
      employer = new String[i];
      country = new String[i];
      zipcode = new String[i];
      address = new String[i];
      city = new String[i];
      smth1 = new String[i];
      smth2 = new String[i];
      phone_no1 = new String[i];
      phone_no2 = new String[i];
      email = new String[i];
      website = new String[i];
      customer_no = new String[i];

      // Read first line.
      // The while checks to see if the data is null. If 
      // it is, we've hit the end of the file. If not, 
      // process the data.
      int j;
      int counter;
      i = 0;

      // Read the file again to save the data into arrays
      BufferedReader CSV = 
            new BufferedReader(new FileReader("Sub-Companies.csv"));

      String data = CSV.readLine();

      while (data != null){
          String[] dataArray = data.split(";");
          for (String item:dataArray) {
            customer_id[i] = dataArray[0];
            company_name[i] = dataArray[1];
            department[i] = dataArray[2];
            employer[i] = dataArray[3];
            country[i] = dataArray[4];
            zipcode[i] = dataArray[5];
            address[i] = dataArray[6];
            city[i] = dataArray[7];
            smth1[i] = dataArray[8];
            smth2[i] = dataArray[9];
            phone_no1[i] = dataArray[10];
            phone_no2[i] = dataArray[11];
            email[i] = dataArray[12];
            website[i] = dataArray[13];
            customer_no[i] = dataArray[14];
            }

          //System.out.print(address[i] + "\n"); 
          data = CSV.readLine(); // Read next line of data.
          i++;
      } 
```

先感谢您！

一些数据是 "E3B3C5EB-B101-4C43-8E0C-ADFE76FC87FE;"Var Welk" Inh. Kar;NULL;NULL;DE;16278;Rotr 3;Angermünde;NULL;NULL;03331/354348-0;0343331/364548-15 ;info@aalls.com;http://www.adss.com;ipo241”，但可能会有所不同（更小或更大）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T19:02:13.307

这应该可以解决问题：它基本上创建了 csv 文件的矩阵表示。

```
LinkedList<String[]> rows = new LinkedList<String[]>();
String dataRow = CSVFile.readLine();
// Read the number of the lines in .csv file 
// i = row of the .csv file
int i = 0; 
while ((datarow = CSVFile.readLine()) != null){
    i++;
    rows.addLast(dataRow.split(","));
}

String[][] csvMatrix = rows.toArray(new String[rows.size()][]); 
```

在 csvMatrix[row][col]...

访问列时，通过执行以下操作断言您尝试访问的列号在范围内：

```
if(col < csvMatrix[row].length) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:26:04.540

最好是使用`ArraList<String>`，如果你愿意`convert as Array`。

您的问题是您没有计算行数来创建数组大小，但是您正在添加基于 split(";") 的数据，因此数组长度和可从 split(";") 添加到数组中的值不匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T18:52:56.860

您的代码有几个问题。异常是由于其中一行不包含足够的 ';' 分隔值。

您的代码的奇怪之处在于：

```
 for (String item:dataArray) {
    customer_id[i] = dataArray[0]; 
```

这仅仅意味着您重复相同的分配 15 次（只需删除 for (String item: ...)）。

如果我是你，我会做以下事情：

创建一个类；像这样的东西：

```
public class Customer {
    private String customerId;
    private String companyName;

    // ...
    public static Customer create(final String... args) {
        if (args.length != 15) {
            return null; // or throw an exception
        }
        final Customer rv = new Customer();
        rv.setCustomerId(args[0]);
        rv.setCompanyName(args[1]);
        // ...
        return rv;
    }

    public String getCustomerId() {
        return customerId;
    }

    public void setCustomerId(final String customerId) {
        this.customerId = customerId;
    }

    public String getCompanyName() {
        return companyName;
    }

    public void setCompanyName(final String companyName) {
        this.companyName = companyName;
    }
} 
```

使用集合（如上面的帖子中所建议）：

```
 BufferedReader csv = new BufferedReader(new FileReader("Sub-Companies.csv"));
    List<Customer> customers = new LinkedList<Customer>();

    String data;
    while ((data = csv.readLine()) != null){
        Customer customer = Customer.create(data.split(";"));
        if (customer != null) {
            customers.add(customer);
        }
    } 
```

如果您需要数组而不是集合，您可以执行以下操作：

```
Customer[] arr = customers.toArray(new Customer[customers.size()]); 
```

使用库来读取文件...例如，您可以尝试[http://opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T18:53:12.320

```
department[i] = dataArray[2]; 
```

例外意味着`dataArray`没有那么多元素（即 3）。
如果你想解析你的 CSV 文件，你可以通过指定任何缺失的元素必须有一个占位符来让你的生活更轻松。
我的意思是你可以有这样的记录：

`a;b;c;d;e;f;g;h;j`
其中每个字符都代表列的值，**但是**当缺少元素时，格式**必须**是：
`a;;;;;f;g;h;j`而**不是** `a;f;g;h;j`

这不是一个不寻常的期望，而是 CSV 文件中的规范，并且会大大简化您的代码，并且会避免数组索引异常，因为您的行将始终具有预期的列

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-03T20:34:11.153

使用数组列表：

```
public ArrayList<ArrayList<String>> parseDataFromCsvFile()
{
     ArrayList<ArrayList<String>> dataFromFile=new ArrayList<ArrayList<String>>();
     try{
         Scanner scanner=new Scanner(new FileReader("CSV_FILE_PATH"));
         scanner.useDelimiter(";");

         while(scanner.hasNext())
         {
            String dataInRow=scanner.nextLine();
            String []dataInRowArray=dataInRow.split(";");
            ArrayList<String> rowDataFromFile=new ArrayList<String>(Arrays.asList(dataInRowArray));
            dataFromFile.add(rowDataFromFile);
         }
         scanner.close();
     }catch (FileNotFoundException e){
        e.printStackTrace();
     }
     return dataFromFile;
} 
```

调用方法（显示csv内容）：

```
ArrayList<ArrayList<String>> csvFileData=parseDataFromCsvFile();

public void printCsvFileContent(ArrayList<ArrayList<String>> csvFileData)
{
    for(ArrayList<String> rowInFile:csvFileData)
    {
        System.out.println(rowInFile);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T22:14:17.523

如果您想使用 Gradle（而不是 Maven）将数据加载到参数化 JUnit 测试中，方法如下：

```
// import au.com.bytecode.opencsv.CSVReader;
@Parameters(name = "{0}: {1}: {2}")
public static Iterable<String[]> loadTestsFromFile2() {
    String separator = System.getProperty("file.separator");
    File tFile = loadGradleResource( System.getProperty("user.dir") + 
        separator +  "build" + separator + "resources" + separator +  "test" + 
            separator + "testdata2.csv" );
    List<String[]> rows = null;
    if ( tFile.exists() ) {
        CSVReader reader = null;
        try {
            reader = new CSVReader( new FileReader( tFile ), ',' );
            rows = reader.readAll();
        } catch (FileNotFoundException e) {
                e.printStackTrace();
        } catch (IOException e) {
                e.printStackTrace();
        }   
    }
    staticlogger.info("Finished loadTestsFromFile2()");
    return rows;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-15T05:45:03.917

请检查是否有`java.util.StringTokenizer`帮助

例子：

```
StringTokenizer tokenizer = new StringTokenizer(inputString, ";") 
```

手册：[StringTokenizer 文档](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)

# php - 输出全局变量

> ID：13433411
> 
> 赞同：0
> 
> 时间：2012-11-17T18:22:28.433
> 
> 标签：php, global-variables

我正在尝试在一个类中使用全局变量。

基本上，该函数`render($html, $pageTitle);`被调用。

在该类中，存在如下`buildHeader($pageTitle)`所示的函数：

```
private static function addHeader($pageTitle){
    global $pageTitle;
    $html = self::capture_output('header.inc');
    return $html;
} 
```

在 header.inc 中，我将变量定义`$pageTitle`为全局变量，但是，它没有回显变量。

我也没有收到变量尚未定义/初始化的错误。

该`render`函数调用私有方法，例如`addHeader`构建页面内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:26:21.240

您通过函数参数覆盖 $pageTitle。此外，您应该使用`$_GLOBALS['pageTitle'];`而不是使用`global`which 使代码更清晰，并有助于避免您遇到的此类冲突。另外，我非常相信您应该将您`global $pageTitle;`的`capture_output()`功能移到似乎使用它的`addHeader()`地方，而不是将其保留在没有效果的地方。

# iphone - Objective-C UITableViewCell 左/右/上/下空间

> ID：13433412
> 
> 赞同：1
> 
> 时间：2012-11-17T18:22:44.090
> 
> 标签：iphone, uitableview, space, separator

我怎样才能得到这种具有左/右/上/下间距的 UITableViewCells？它与 Facebook 应用程序中使用的几乎相同。因为我是新来的，所以我不能发送图片，所以这里是看起来相似的应用程序的链接。

[在这个网站上查看 news.me 应用程序](http://www.mobile-patterns.com/lists/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T15:08:12.657

如果我理解你的话，你想要一些自定义的 tableViewCells。通过继承 UITableViewCell 类，您可以自定义它。您可以通过设置它们的框架在任何您想要的位置添加一些背景图像和文本标签，这样您就可以获得您想要的类似框的视图。查看[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/cl/UITableViewCell)。

# iphone - 以编程方式在 iphone 中实现 TPKeyboardAvoidingScrollView

> ID：13433413
> 
> 赞同：2
> 
> 时间：2012-11-17T18:22:49.437
> 
> 标签：iphone, objective-c, ipad, uiscrollview

我尝试以编程方式实现 TPKeyboardAvoidingScrollView，但我没有得到正确的结果..

```
TPKeyboardAvoidingScrollView *keyboardAvoidingScrollView = [[TPKeyboardAvoidingScrollView alloc] initWithFrame:self.view.frame]; 
```

并在keyboardAvoidingScrollView中添加一些UItextFields 最后在[self.view addSubview:keyboardAvoidingScrollView]中添加keyboardAvoidingScrollView；

在 self.view 中添加了 TPKeyboardAvoidingScrollView - 但在 keyboardAvoidingScrollView 内未添加 TextField

请帮助我..

提前致谢..

# php - 想要制作 http://test.domain.tld/ 去 http://domain.tld/test

> ID：13433414
> 
> 赞同：3
> 
> 时间：2012-11-17T18:22:50.570
> 
> 标签：php, .htaccess, redirect

> **可能重复：**
> [内部子域到文件夹重定向](https://stackoverflow.com/questions/961963/internal-subdomain-to-folder-redirect)

我希望它是自动的，因为我正在为 URL 缩短器制作它。我知道如何手动制作每一个，但这对我的需要不起作用。我知道我在 .htaccess 中需要一些东西，但我对此一点经验都没有。有谁知道要添加什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:26:00.517

你可以像这样使用apache来做到这`mod_rewrite`一点`.htaccess`：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^([^\.]+).domain.tld$ [NC]
RewriteRule . http://domain.tld/%1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T18:28:56.140

您可以在文件中使用[mod_rewrite 。](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)`.htaccess`使用[正则表达式](http://www.regular-expressions.info)来定义重定向规则。如：

```
RewriteEngine On
RewriteRule ^(.+)\.domain\.tld /$1 
```

# c++ - 尝试在 Visual Studio Express 2012 for Windows Desktop 中安装 SDL_ttf

> ID：13433416
> 
> 赞同：4
> 
> 时间：2012-11-17T18:22:53.097
> 
> 标签：c++, visual-studio-2012, sdl, sdl-ttf

我正在尝试在 Visual Studio Express 2012 for Windows Desktop 中安装 SDL_ttf，并且我有一个可以正常编译的小示例程序，但是当我运行它时，我收到一个错误弹出窗口，提示“应用程序无法正确启动 (0xc000007b)。单击“确定”关闭应用程序”。

我最初让基本的 SDL 工作，然后我尝试添加 SDL 字体。我已经完成了以下操作，但我仍然遇到麻烦，如果有人可以帮助我，将不胜感激......

1) 我将所有 .lib 文件夹复制到 Visual Studio lib 文件夹 (C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\lib) （分别是 SDL.lib、SDLMain.lib 和 SDL_ttf.lib）

2）我在项目属性中添加了 SDL 和 SDL_ttf 的包含目录（在项目 >> 属性 >> 配置属性 >> VC++ 目录 >> 包含目录下）...那些是 ("...\SDL Main Libraries\SDL -1.2.15\include") 和 ("...\SDL 字体库\SDL_ttf-2.0.11\include")

3）我添加了 SDL 和 SDL_ttf 的附加依赖项（在项目 >> 属性 >> 配置属性 >> 链接器 >> 输入 >> 附加依赖项下，我在其中放置： SDL.lib SDLMain.lib SDL_ttf.lib 内联 - 它看起来像这个：SDL.lib;SDLMain.lib;SDL_ttf.lib;%(AdditionalDependencies)

4) 我已将以下 dll 文件与我的 .exe 文件（即 Visual Studio 2012\Projects\ConsoleApplication2\Debug）放在同一文件夹中，这些 dll 文件是：SDL_image.dll libfreetype-6.dll SDL_ttf.dll zlib1。 dll SDL.dll

这是我的小示例程序源代码：

```
#include <iostream>
#include <SDL.h>
#include <SDL_ttf.h>

using namespace std;

int main(int argc, char** argv){
    int retval = 0;

    int sdlState = -1;
    if((sdlState = SDL_Init(SDL_INIT_EVERYTHING)) == -1){
        cerr << "SDL failed to initialize";
        retval = 1;
    }

    SDL_Surface* screen = nullptr;
    if(retval == 0){
        if(nullptr == (screen =
            SDL_SetVideoMode(640, 480, 32, SDL_HWSURFACE | SDL_ASYNCBLIT)))
        {
            cerr << "Screen failed to be created";
            retval = 1;
        }
    }

    int ttfState = -1;
    if(retval == 0){
        if((ttfState = TTF_Init()) == -1){
            cerr << "True Type Font failed to initialize";
            retval = 1;
        }
    }

    if(retval == 0){
        //TTF_Font* font = TTF_OpenFont("air.ttf", 32);
        SDL_Color txtColor = {0, 0, 0};
        //SDL_Surface* text = TTF_RenderText_Solid(font, "Hello World",
            //txtColor);
        while(1){
            SDL_FillRect(screen, NULL,
                SDL_MapRGB(screen->format, 255, 255, 150));
            //SDL_BlitSurface(text, NULL, screen, NULL);
            SDL_Flip(screen);
        }
    }

    if(ttfState != -1) TTF_Quit();
    if(sdlState != -1) SDL_Quit();
    return retval;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:54:25.597

这个问题可能被重命名为“尝试在 Visual Studio Express 2012 for Windows Desktop 中安装第 3 方库”。虽然您的步骤有效，但它们在某种程度上并不是最佳的，特别是如果您计划分享您的项目并与其他人一起工作！

基本上，这类库带有 3 种主要文件类型，**标题**、**库**和**二进制文件**。以下是有关如何改进项目的一些提示：

**标头**- 这些文件定义了您与库的接口。通常，为了让 Visual Studio 知道它们的位置，首选方法是进入您的`Project Settings > Configuration Properties > C/C++ > General > Additional Include Directories`. 如果您想与某人共享您的项目（可能通过 Perforce、Git 或 SVN 等源代码控制），您应该`Relative Paths`使用`Absolute Paths`. 我的意思是，如果您直接针对一个文件，就像`C:\Projects\SDL\...`您最终对团队中的每个成员的项目存储位置提出了一些要求，就好像您使用`..\External\SDL\...`其他团队成员存储您的解决方案的位置一样，它应该工作，只要他们在正确的相对文件夹中有正确的库。

**图书馆**- 图书馆有两个部分。首先，您需要告诉链接器在哪里寻找所需的库。不要将库直接复制到 VC\libs 文件夹中，而是**使用**`Project Settings > Configuration Properties > Linker > General > Additional Library Directories`. 关于相对文件夹的相同规则在这里适用。然后，您需要告诉链接器要使用哪些库，这是通过`Project Settings > Configuration Properties > Linker > Input > Additional Dependencies`列出您想要的所有`.lib`文件的位置来完成的，例如`SDL.lib`, `SDLmain.lib`,`SDL_ttf.lib`等...

**二进制文件**- 这里的二进制文件将是`.dll`您需要的文件。一个简单的选择是简单地将它们手动复制到您的输出文件夹（请记住，您可以有多个`Configuration`，而不仅仅是`Debug`）。否则，您可以通过一些`Post-Build`自动为您复制它们的步骤来自动化该过程。

对于所有这些设置，请考虑`Project Properties`默认情况下 Window 以单一配置为目标！要将您的更改应用于每个配置，请在顶部可能显示的下拉列表中`Active(Debug)`选择`All Configurations`，然后更改设置。它们将应用于您项目中的每个配置。

编辑：此外，对于共享项目，根据项目背后的心态，您可能希望将外部库包含在源代码管理中。我知道 linux 的人会完全反对这一点，但这是我经常看到的。它确保每个人都使用与代码对应的库版本（例如，如果您升级到更新版本的库并且界面发生了变化，如果您只更改源代码管理中的代码，您将不得不警告您的其他团队成员手动升级到新库，就像它在您的源代码管理中一样，同步将使他们与项目代码和外部库保持同步）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T12:08:37.543

是的，我发现这完全是为了弄乱链接器。我没有将它链接到 x86，我只是将它链接到 SDL_ttf 和 SDL 中的 lib 文件夹...这也与您下载的扩展程序的版本有关. 确保它们都是一样的。例如 1.2 和 1.2 和 2.0 和 2.0

# solr - solrcloud 无需停机即可扩展索引

> ID：13433420
> 
> 赞同：0
> 
> 时间：2012-11-17T18:23:20.530
> 
> 标签：solr, indexing, sharding, solrcloud

据我了解，通过阅读[solrcloud 示例](http://wiki.apache.org/solr/SolrCloud)，您可以声明多个 solr 实例核心，例如 2 个，然后在它们上创建分布式索引。

但是，如果通过向索引添加更多项目，那 2 个核心服务器不够大，我需要通过添加另一个核心来扩展索引？我是否需要停止所有核心，删除索引并重新索引所有内容，这一次声明 solrcloud 可能使用 3 个核心、服务器？这会造成停机。

从我读过的网站，如dailymotion 使用solr。他们如何在不停机的情况下处理索引扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:45:10.143

在扩展索引意味着添加新分片的假设下，答案是不重新索引就不可能创建新分片。这是因为分片是使用散列完成的，并且添加另一个存储桶（分片）需要更改散列函数才能将新项目放入分片。

如[http://wiki.apache.org/solr/SolrCloud#Re-sizing_a_Cluster](http://wiki.apache.org/solr/SolrCloud#Re-sizing_a_Cluster)中所述，它是路线图上的一项功能。

# objective-c - 加载时浏览器中的 UIActivityViewIndicator 并且如果字符串包含 http:// 将其删除

> ID：13433425
> 
> 赞同：2
> 
> 时间：2012-11-17T18:24:04.300
> 
> 标签：objective-c, ios, xcode, uiactivityindicatorview, uiactivity

我正在创建一个简单的网络浏览器作为练习。

```
-(IBAction)go:(id)sender {
NSString *query = [_urlField.text stringByReplacingOccurrencesOfString:@" " withString:@"+"];
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@",query]];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[_webView loadRequest:request];
} 
```

我希望它知道如何在加载我的 webView 时添加 UIActivityIndi​​cator。

**第二个问题：**

如果用户输入 http://，是否可以删除它？我知道你可以在 PHP 中这样做：

```
if(strpos($URL, "http://") !== false) 
```

我如何在 Objective C 中使用它？

谢谢大家帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:28:25.190

对于第一个问题，请查看[这篇文章](https://stackoverflow.com/questions/1311088/how-implement-a-uiactivityindicatorview-when-the-uiwebview-is-loading-iphone-o)。

第二个：

```
NSString* urlWithoutProtocol = [urlWithProtocol stringByReplacingOccurrencesOfString:@"http://" withString:@""]; 
```

# iphone - 在 iOS 中分页的 UICollectionView 的页数

> ID：13433432
> 
> 赞同：9
> 
> 时间：2012-11-17T18:24:55.463
> 
> 标签：iphone, ios, ios6, uipagecontrol, uicollectionview

考虑`UICollectionView`启用流布局和分页（通过设置`pagingEnabled`为`YES`）。

获得总页数的最简单方法是什么？

哪里是更新页面总数的最合适的地方（假设如果添加/删除项目，集合视图的大小发生变化或布局发生变化，它可能会发生变化）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-06T09:06:28.407

正确答案应该是：

> 如果 UICollectionView 水平滚动：

```
int pages = ceil(self.collectionView.contentSize.width /    
                   self.collectionView.frame.size.width); 
```

> 如果它垂直滚动：

```
 int pages = ceil(self.collectionView.contentSize.height /    
                   self.collectionView.frame.size.height); 
```

按照[维基](http://en.wikipedia.org/wiki/Floor_and_ceiling_functions)：

> 在数学和计算机科学中，下限和上限函数分别将实数映射到最大的前一个整数或最小的后一个整数。更准确地说，floor(x) 是不大于 x 的最大整数，ceiling(x) 是不小于 x 的最小整数。

这是我要检查的结果：

```
ceil(2.0/5.0) = 1.000000
ceil(5.0/5.0) = 1.000000
ceil(6.0/5.0) = 2.000000
ceil(10.0/5.0) = 2.000000
ceil(11.0/5.0) = 3.000000 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T11:52:02.940

如果`UICollectionView`水平滚动，则将其`contentSize`宽度除以框架宽度：

```
int pages = floor(self.collectionView.contentSize.width /    
                  self.collectionView.frame.size.width) + 1; 
```

如果它垂直滚动，你将它`contentSize`的高度除以它的框架高度：

```
int pages = floor(self.collectionView.contentSize.height /    
                  self.collectionView.frame.size.height) + 1; 
```

# java - IndexOutOfBoundsException 异常返回什么？

> ID：13433438
> 
> 赞同：4
> 
> 时间：2012-11-17T18:25:25.483
> 
> 标签：java

我有以下方法

```
private ArrayList<User> allUsers = new ArrayList<User>();

public User getUser(int index) {
    try {
        return allUsers.get(index);
    }
    catch(IndexOutOfBoundsException e) {
        // What should I return here?? Say that you want index 0 and no User
        // exists in the ArrayList allUsers, what should I then return? The
        // method needs a User to be returned 
    }
} 
```

而且我不知道该怎么做，我确定这是一个简单的解决方法，但是我应该在 catch 块中返回什么？Eclipse 抱怨`User`必须返回 a 。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-17T18:29:39.813

我的一般意见是，您**永远不应该捕获您不知道如何处理的异常**。特别是在这种情况下，因为`IndexOutOfBoundsException`is a`RuntimeException`并且因此不需要被捕获 - 您也可以让它在调用堆栈上传播。调用者通过列表索引请求对象，因此大概知道要请求哪个索引 - 然后，抛出或允许抛出的 IndexOutOfBoundsException 传播似乎非常自然。

唯一另一个明显的选择是吞下异常 and `return null`，但是当没有合理的返回值时，我真的不喜欢这种方法来处理调用者的这种公然错误。您还可以返回一个特殊`User`实例（参考*null object pattern*），但即使这样也不能免除调用者检查返回内容的责任。取决于接口和`User`此类检查的实现可能是微不足道的，但它仍然需要在某个地方完成。

如果您想清楚该方法可以抛出异常，只需这样说：

```
public User getUser(int index) throws IndexOutOfBoundsException { ... } 
```

或者像[@Bela Vizer](https://stackoverflow.com/a/13433475/486504)建议的那样，将其包装在 IllegalArgumentException 中（这也是一个 RuntimeException）。

正如@lc所指出的那样[。](https://stackoverflow.com/a/13433465/486504)，最好先自己检查对象是否存在，然后再尝试访问它。自己处理您*期望*的错误情况，而不是依靠`get()`方法调用来引发异常。但是，您仍然应该清楚该方法*可能会*引发此类异常的事实，例如，如果在检查和返回之间修改了集合。借助多核 CPU 上的多线程软件，已知会发生奇怪的事情。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-17T18:28:44.807

问自己一个问题：“如果你想要索引 0 并且没有用户存在，你应该返回什么？” 并返回您回答的任何内容。

如果您没有答案，您应该重新抛出异常或不首先捕获它。

请注意，如果请求不存在的用户`null`是*可以接受的行为*，则答案通常是返回。

* * *

旁注：通常认为“良好做法”不依赖于捕获异常，而是首先测试错误条件。在您的情况下，您首先尝试`get`使用无效的对象索引，然后在 getter 爆炸时*做出反应。*相反，我建议先测试`index`参数（确保它至少为零且小于 的长度`allUsers`），如果它未能通过测试来做某事（返回 null 或抛出您自己的异常）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-17T18:29:16.093

有很多可能性。其中一些取决于你的信念。

*   您可以抛出 IllegalArgumentException，因为传递的参数无效。

*   您可以抛出 IndexOutOfBoundsException。

*   如果您想确保客户端（此方法的调用者）必须处理它，您甚至可以声明一个检查异常（定义您的异常类扩展 Exception），因为 IllegalArgumentException 和 IndexOutOfBoundsException 是运行时异常，这意味着您没有明确地准备自己。

我通常检查索引是否在范围内，如果不返回 null 并在 javadoc 中提到它可以返回 null 如果...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-17T18:29:53.243

如果找不到用户，我会抛出异常。调用该方法时会捕获此异常。如果需要，您可以在此处修改代码以使用自定义异常。就像是：

```
public User getUser(int index) throws IndexOutOfBoundsException {
    if(index >= allUsers.size()){
        throw new IndexOutOfBoundsException("User doesn't exist");
    }
    return allUsers.get(index);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-17T18:28:53.980

不要听 Eclipse。

你有两个选择，它们都可以是好的或坏的，这取决于具体情况。

1.  你可以退货`null`。
2.  您可以重新抛出异常（或者更确切地说，根本不捕获它），要求调用方法处理它。

还有更多变体，但基本选择在上述两种之间：就地处理问题或将任务委托给调用者。

仅从该代码无法判断哪个是正确的解决方案，只有您可以知道什么更适合这种情况。

但是，无论您采取哪种选择，最好手动检查索引 ( `0<=index<allUsers.size()`)，而不是依赖`RuntimeException`s 来获得正常的程序行为。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-17T18:29:00.937

假设`index`是用户输入，只需让它`IndexOutOfBoundsException`传播并在可以显示错误消息的位置更远地捕捉它。

事实上，您甚至可以在尝试查找做同样的事情之前`index`先进行验证。`allUsers.size()`通常应尽早验证用户输入。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-17T18:30:01.717

我会返回`null`，但是，如果您觉得您的应用程序可能因此崩溃，您可以简单地返回一个“nobody”用户，如下所示：

```
return new User("nobody", ...); 
```

并在函数之外处理这种情况。

另一种选择是抛出异常并在外部处理它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-17T18:40:07.480

你有几个选择：

1.  返回一个`null`。如果用户可以合理地输入任何索引，请执行此操作
2.  不要捕获异常。如果用户输入错误数据是完全出乎意料的，则执行此操作，换句话说，输入已被检查，因此这是导致这种情况的“编程错误”（或错误）
3.  抛出一个检查异常。如果您认为调用代码可以并且应该处理问题，请执行此操作

# java - 套接字：BufferedReader readLine()

> ID：13433441
> 
> 赞同：0
> 
> 时间：2012-11-17T18:26:01.813
> 
> 标签：java, sockets

我正在使用 BufferedReader.readLine() 方法从远程服务器读取响应

```
 String com;
   while ((com = bufferedReader.readLine()) == null) 
    {
    System.out.println(com+"\n");
    } 
```

我正在使用以下代码，我得到了这样的输出

```
GET http://bioactress.blogspot.in/ HTTP/1.1

Host: bioactress.blogspot.in

User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/
14.0.1

 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8

  Accept-Language: en-us,en;q=0.5

 Accept-Encoding: gzip, deflate

  If-Modified-Since: Sat, 17 Nov 2012 07:43:35 GMT

 If-None-Match: "7f9584f0-06ba-448e-97a4-2b8bcd0b30b1"

  Cache-Control: max-age=0 
```

如何仅检索主机地址。我尝试使用数组不会发生一些错误。请帮助我获取主机地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:35:15.727

> 从远程服务器读取响应

根据输出，您正在读取来自远程客户端的请求，但没关系......

> 如何仅检索主机地址

使用[`String.startsWith(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)：

```
if(com.startsWith("Host:")) 
```

我将把提取实际值和处理字符大小写（HTTP 标头不区分大小写）留给您。

顺便说一句，你为什么不使用一些更高级别的 API，比如 servlet？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:37:08.453

您显示的是 HTTP*请求*，而不是响应。那么您发布的代码不是真实的 - 它实际上并没有打印从流中读取的任何内容（条件相反，应该`!=`相反）。

网上有很多资源展示了如何使用 Java 套接字。谷歌是你的朋友。您可以从[这里](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)开始或使用一些更高级别的东西，例如[`java.net.URL`](http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html).

# python - Python 命令处理器 - 我的代码中存在问题？

> ID：13433445
> 
> 赞同：0
> 
> 时间：2012-11-17T18:26:12.733
> 
> 标签：python, function

我正在编写一个程序，其中包含一个检查数字是否为素数的函数---如果是，它将其添加到特定列表中，然后使用`pickle`模块将其保存为文件。当再次调用该函数时，它会打开列表（使用`pickle`），然后检查该号码是否在列表中。如果是，它是一个素数，如果不是，它使用一种非常基本的技术检查它是否是一个素数。

这是我的代码：

```
'''
List of functions:
_isPrime(n)_ : checks if n is a prime number
_remove(n)_ : removes n from the running list of primes and updates the pkl file
_prevPrimes(n)_ : generates a list of primes up to n
_view()_ : imports and prints pList
_delete()_ : deletes all of pList
'''
def isPrime(n):
    import pickle
    from math import sqrt
    pList = pickle.load(open('primes.pkl', 'rb'))
    x=2
    if (type(n) != int) and (type(n) != long):
        print "N is not an integer."
        return False
    if n in pList:
       print "%d is a prime number." % (n)
       return True
    else:
        while (sqrt(n) >= x):
            if ((n%x) != 0):
               x = x + 1
               if (sqrt(n) < x):
                   pList.append(n)
                   pList = sorted(pList)
                   pickle.dump(pList, open('primes.pkl', 'wb'))
                   print "%d is a prime number." % (n)
                   return True
            if ((n%x)==0):
                print "%d is not a prime number." % (n)
                return False
    pList = sorted(pList)
    pickle.dump(pList, open('primes.pkl', 'wb'))

# NEW FUNCTION

def prevPrimes(n):
    from time import clock
    startTime= clock()
    import pickle
    from math import sqrt
    pList = pickle.load(open('primes.pkl', 'rb'))
    z = abs((max(pList)) - n)
    y= max(pList)
    if (z==0):
        print "Done"
    while (y <= n):
        pList = pickle.load(open('primes.pkl', 'rb'))
        if isPrime(y):
           if y not in pList:
               pList.append(y)
        y= y + 1
        pList = sorted(pList)
        pickle.dump(pList, open('primes.pkl', 'wb'))
    print startTime

# NEW FUNCTION

def remove(n):
    import pickle
    pList = pickle.load(open('primes.pkl', 'rb'))
    view()
    pList.remove(n)
    pickle.dump(pList, open('primes.pkl', 'wb'))
    view()

# NEW FUNCTION

def view():
    import pickle
    pList = pickle.load(open('primes.pkl', 'rb'))
    print pList

# NEW FUNCTION

def delete():
    import pickle
    pList = [2, 3, 5]
    pickle.dump(pList, open('primes.pkl', 'wb'))
    view() 
```

它在 Python shell 中运行良好。

发生的错误是函数是否实际调用。我通过这样做完成了这一点`from primenum import isPrime`。但是，它会在 I/O（带有`pickle`）时出现错误......这是一张图片：

![功能错误 2](../Images/310df9b9449a9814671893364d0c9e86.png)

如您所见，`primes.pkl`文件显然在那里。

我该如何解决？在此先感谢您的任何建议 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:31:35.690

您已经发现了如何正确导入函数：

从质数导入 isPrime

或参考全名：

```
import primenum
primenum.isPrime(5) 
```

您需要使用*完整*路径来存储您的泡菜文件；否则 python 仅在本地目录中查找它。也许将其存储在您的主目录中：

```
import os.path

HOME_DIR = os.path.expanduser('~') 
```

然后稍后打开文件：

```
open(os.path.join(HOME_DIR, 'primes.pkl') 
```

# javascript - onMouseOver 不触发特定功能

> ID：13433447
> 
> 赞同：5
> 
> 时间：2012-11-17T18:26:12.683
> 
> 标签：javascript, onmouseover

我有一个非常令人困惑的问题，我想知道是否有人可以对此有所了解。

我有一个 DIV 元素...

```
<div onmouseout="scrollRight();" onmouseover="scrollLeft();" id="rightScrollRegion" class="ScrollRegion"></div> 
```

还有一个外部脚本文件...

```
function scrollLeft(){
        document.getElementById('rightScrollRegion').style.background = "#0000ff";
    }

    function scrollRight(){
        document.getElementById('rightScrollRegion').style.background = "#ff0000";
    } 
```

问题是 onmouseover 似乎没有调用函数 scrollLeft(); 或滚动右（）；我似乎不明白我在哪里犯了错误。

我做了一些测试，看看它是否在函数中......

window.onload = 函数（）{

```
scrollLeft(); 
```

}

在外部文件中工作并在页面加载时更改 DIV 的背景......所以功能工作。

我还尝试更改 onmouseover 中所谓的内容...

```
<div onmouseover="alert('Hello');" id="rightScrollRegion" class="ScrollRegion"></div> 
```

打印一个警报窗口就好了。

所以我想也许我无法使用 onmouseover 更改背景所以我尝试了......

```
<div onmouseover="this.style.background = '#0000ff'" id="rightScrollRegion" class="ScrollRegion"></div> 
```

这改变了预期的背景。

但由于某种原因，我无法让我的函数在 DIV 上触发。我在整个互联网上进行了搜索，但我一直无法找到该问题的解决方案。我似乎无法找出我做错了什么。我在其他网站上使用过外部功能，但从来没有使用过鼠标悬停，所以我不确定可能是什么问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T18:36:25.660

尝试这个：

```
element = document.getElementById('rightScrollRegion');
element.addEventListener("mouseover",function(){
    this.style.background = "#0000ff";
});
element.addEventListener("mouseout",function(){
    this.style.background = "#ff0000";
}); 
```

避免使用内联事件处理程序。使用该`addEventListener`方法将事件侦听器附加到元素。

你可以在这里试试这个：http: [//jsfiddle.net/gkvq8/](http://jsfiddle.net/gkvq8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:53:44.423

你可以试试这个：

这是 HTML 元素：

```
<button onmouseover="mousein(event)" onmouseout="mouseout(event)">hello</button> 
```

和功能：

```
function mousein(event){
    event.target.style.background="#FF0000";
}

function mouseout(event){
    event.target.style.background="#FFFFFF";
} 
```

您应该使用“事件”对象访问该元素。有更好的方法可以做到这一点，您应该研究“不引人注目的”javascript。[这里](http://www.ibm.com/developerworks/web/library/wa-aj-unobtrusive/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T18:32:03.170

您的函数与原始函数 javascript 相对，因此请更改函数名称，如下所示：

```
<div language="javascript" onmouseout="funcTwo()" onmouseover="funcOne()" id="rightScrollRegion" class="ScrollRegion"></div> 
```

和这个

```
function funcOne(){
        document.getElementById('rightScrollRegion').style.backgroundColor = "#0000ff";
    }
    function funcTwo(){
        document.getElementById('rightScrollRegion').style.backgroundColor = "#ff0000";
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T18:32:47.830

如果可以，请使用[jQuery](http://jquery.com/)。它会让你的生活更轻松，代码也更灵活。

要使用 jQuery 库，只需将其包含在您的 HMTL 中：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

这样的事情会做：

```
$('div').mouseover(function() {
    $('div#rightScrollRegion').attr("style","background-color:#0000ff;");
});

$('div').mouseout(function() {
    $('div#rightScrollRegion').attr("style","background-color:#ff0000;");
}); 
```

理想情况下，您将使用`addClass`和`removeClass`更改 div 的背景颜色，但这只是一个简单的示例解决方案。

# java - HttpURLConnection connect() 在 4.0 和 4.1 上出现异常，但在 2.3.3 上没有

> ID：13433448
> 
> 赞同：1
> 
> 时间：2012-11-17T18:26:18.487
> 
> 标签：java, android

> **可能重复：**
> [Android 应用无法在 Android 4 上运行](https://stackoverflow.com/questions/13429430/android-app-doesnt-work-on-android-4)

我正在开发一个安卓应用程序。试图找到解决方案几个小时。当我运行模拟器 2.3.3 但在 4.0 或 4.1 或高于 2.3.3 的任何版本时，我的应用程序与数据库和服务器正常工作。该应用程序在此方法中引发异常：尝试执行此操作时发生异常，`connection.connect();`请帮助。

```
public void sendOutputLine(URL url, String outputLine) {
    try {
        connection = (HttpURLConnection) url.openConnection();
        Log.d(LogInActivity.DEBUG_TAG, "1");
        connection.setDoInput(true);
        Log.d(LogInActivity.DEBUG_TAG, "2");    
        connection.setDoOutput(true);
        Log.d(LogInActivity.DEBUG_TAG, "3");    
        connection.setRequestMethod("POST");
        Log.d(LogInActivity.DEBUG_TAG, "4");    
        connection.setFixedLengthStreamingMode(outputLine.length());
        Log.d(LogInActivity.DEBUG_TAG, "5");    
        connection.connect();
        Log.d(LogInActivity.DEBUG_TAG, "6");    
        out = connection.getOutputStream();
        PrintWriter pw = new PrintWriter(new OutputStreamWriter(out));
        pw.print(outputLine);
        pw.flush();
        out.close();
    } catch (SocketTimeoutException e) {
        Log.d(LogInActivity.DEBUG_TAG,
                "SocketTimeoutException sendOutputLine(): " + e.getMessage());          
    } catch (ProtocolException e) {
        Log.d(LogInActivity.DEBUG_TAG,
                "Protocol exception sendOutputLine(): " + e.getMessage());
    } catch (IOException e) {
        Log.d(LogInActivity.DEBUG_TAG, "IO exception sendOutputLine(): "
                + e.getMessage());
    } catch (Exception e) {
        Log.d(LogInActivity.DEBUG_TAG,
                "Exception bommed client: " + e.getMessage());  
    }
} 
```

日志猫：

```
11-17 13:19:11.710: D/SocialFamilyTree(847): outputLint: Login%a@a%57963634
11-17 13:19:11.710: D/SocialFamilyTree(847): 1
11-17 13:19:11.710: D/SocialFamilyTree(847): 2
11-17 13:19:11.710: D/SocialFamilyTree(847): 3
11-17 13:19:11.710: D/SocialFamilyTree(847): 4
11-17 13:19:11.710: D/SocialFamilyTree(847): 5
11-17 13:19:11.740: D/SocialFamilyTree(847): Exception bommed client: null 
```

**编辑**：我明白了，所以我需要使用`AsyncTask`

我如何使用`AsyncTask`这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:19:14.437

以这种方式使用 AsyncTask ......

```
public class getConnection extends AsyncTask<String, Void, Void> 
    {

           @Override
            protected void onPreExecute() 
           {
               super.onPreExecute();
               Utils.clearDialogs();
               Utils.showActivityViewer(Mainctivity.this);
           }

           @Override
           protected Void doInBackground(String... arg0)
           {

            try 
            {
                   connection = (HttpURLConnection) url.openConnection();

                   Log.d(LogInActivity.DEBUG_TAG, "1");
                   connection.setDoInput(true);
                   Log.d(LogInActivity.DEBUG_TAG, "2");    
                   connection.setDoOutput(true);
                   Log.d(LogInActivity.DEBUG_TAG, "3");    
                   connection.setRequestMethod("POST");
                   Log.d(LogInActivity.DEBUG_TAG, "4");    
                   connection.setFixedLengthStreamingMode(outputLine.length());
                   Log.d(LogInActivity.DEBUG_TAG, "5");    
                   connection.connect();
                   Log.d(LogInActivity.DEBUG_TAG, "6");    
                   out = connection.getOutputStream();
                   PrintWriter pw = new PrintWriter(new OutputStreamWriter(out));
                   pw.print(outputLine);
                   pw.flush();
                   out.close();
            } 
            catch (Exception e) 
            {
             e.printStackTrace();
            }

            return null;
           }

           @Override
           protected void onPostExecute(Void result)
           {
               super.onPostExecute(result);
               Utils.hideActivityViewer();

            }
            catch (Exception e)
            {
             Log.v("log", e.toString());
            }
           }

          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:33:43.293

不要只是盲目地捕捉异常。您通过隐藏错误来掩盖整个问题。如果我不得不猜测，我会说您遇到了 NetworkOnMainThreadException，因为您可能没有在后台线程上运行，但是您提供的信息无法判断。

AsyncTask 是解决 NetworkOnMainThreadException 问题的一种方法，但它不是唯一的方法，并且没有证据表明这是您的实际问题。

# android - 循环中的多个膨胀视图

> ID：13433451
> 
> 赞同：3
> 
> 时间：2012-11-17T18:27:15.257
> 
> 标签：android, listview, view, inflate

我想展示几个`ListView`视图，每个视图都有对应的标题`LinearLayout`。

我有一个`LinearLayout`，我膨胀一个视图以填充标题`ListView`并将该视图添加到`LinearLayout`循环中，但只出现一个标题和列表（第一个）。

我希望包含标题和列表视图的视图出现的次数与 for 循环重复的次数一样多。

让我给你看一下代码：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

//fragment_history: a layout with a LinearLayout inside called "main"

      View fragmentHistory = inflater.inflate(R.layout.fragment_history, container, false);

//I want to show a date, and all the transactions accomplished that date. With this two arrays, I pretend to loop by day, show the date as title and show the transactions of that day in the listview.

        allExpenses = dataExpenses.getAllExpenses();
        allDatesExpenses = dataExpenses.getAllDates();

// The LinearLayout inside the fragmentHistory layout 

        LinearLayout mainLayout = (LinearLayout) fragmentHistory.findViewById(R.id.main);       
        LayoutInflater layoutInflater = (LayoutInflater) this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

// I made a for loop, and I have two different dates. Two transactions in the first date, and one in the second day. But only the two transactions are been shown.

        for(int x = 0, y = allDatesExpenses.size(); x < y; x++){

            View view = layoutInflater.inflate(R.layout.layout_title, null);        

            Expense expense = allDatesExpenses.get(x);

            TextView text = Font.useHandelGotic(this.context, (TextView) view.findViewById(R.id.textViewTitleDate)) ;
    text.setText(expense.getDateExpense());  

            ListView listview = (ListView) view.findViewById(android.R.id.list);

            ArrayList<Expense> expensesByDate = (ArrayList<Expense>) dataExpenses.getExpensesByDate(expense.getDateExpense());
            listview.setDivider(null);
            listview.setAdapter(new AdapterTransaction(this.context, expensesByDate));

            mainLayout.addView(view);

        }       
        return fragmentHistory;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:36:17.953

根据您提供的信息，我猜您`LinearLayout`已设置为水平（默认），因此您的所有标题/列表视图实际上都已添加，但您看不到它们，因为它们不在一边。通过添加来解决这个问题

```
android:orientation="vertical" 
```

到您的`LinearLayout`XML 标记。

如果这不是问题，请发布相关的 XML 布局。

# orbeon - Orbeon Forms 修剪空的 xml 元素

> ID：13433452
> 
> 赞同：0
> 
> 时间：2012-11-17T18:27:16.643
> 
> 标签：orbeon

如何修剪使用工作流发送按钮生成的 data.xml 的空元素？例如，我们可以在 properties-local.xml 文件中修剪不可见的控件/部分制作 value = "false"`<property as="xs:boolean" name="oxf.fr.detail.send.success.prune.*.*" value="false"/>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:31:22.090

该`oxf.fr.detail.send.success.prune.*.*`属性允许您控制是否修剪不相关的元素，而不是空元素。没有删除空元素的属性，但这是您可以在接收端执行的操作，例如使用 XSLT。还有几个精度：

*   通过*修剪*，我们的意思是*从 XML 中删除*。
*   *非相关*元素（来自 XForms 的术语）是您在 Form Builder 中定义的可见性规则返回的元素`false`。

# c# - C#中的动态类构造函数

> ID：13433454
> 
> 赞同：3
> 
> 时间：2012-11-17T18:27:28.227
> 
> 标签：c#, oop, class, constructor

我有一个具有 2 个属性的类，称为 MinValue，MaxValue，如果有人想调用此类并实例化此类，我需要一些具有允许选择 MinValue 或 Max Value 或两者的构造函数，MinValue 和 MaxValue 它们都是int，所以构造函数不允许我这样：

```
public class Constructor
{
    public int Min { get; set; }
    public int Max { get; set; }
    public Constructor(int MinValue, int MaxValue)
    {
        this.Min = MinValue;
        this.Max = MaxValue;
    }

    public Constructor(int MaxValue)
    {
        this.Max = MaxValue;
    }

    public Constructor(int MinValue)
    {
        this.Min = MinValue;
    }
} 
```

现在我不能这样做，因为我不能重载两个构造函数，我该如何实现呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T18:33:37.297

我将为您仅获得部分信息的两个部分创建两个*静态方法。*例如：

```
public Constructor(int minValue, int maxValue)
{  
    this.Min = minValue;
    this.Max = maxValue;
}

public static Constructor FromMinimumValue(int minValue)
{
    // Adjust default max value as you wish
    return new Constructor(minValue, int.MaxValue);
}

public static Constructor FromMaximumValue(int maxValue)
{
    // Adjust default min value as you wish
    return new Constructor(int.MinValue, maxValue);
} 
```

（使用命名参数的 C# 4 选项也很好，但*前提*是您知道所有调用者都将支持命名参数。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T18:36:46.490

你不能。但是，如果您使用的是 C# 4.0，则可以这样做：

```
class YourTypeName
{
    public YourTypeName(int MinValue = 1,  int MaxValue = 100)
    {  
        this.Min=MinValue;
        this.Max=MaxValue;
    }
}

var a = new YourTypeName(MinValue: 20);
var b = new YourTypeName(MaxValue: 80); 
```

或者，在 C# 3.0 及更高版本中，您可以这样做：

```
class YourTypeName
{
    public YourTypeName()
    {
    }

    public YourTypeName(int MinValue,  int MaxValue)
    {  
        this.Min=MinValue;
        this.Max=MaxValue;
    }

    public int Min {get;set;}

    public int Max {get;set;}
}

var a = new YourTypeName { Min = 20 };
var b = new YourTypeName { Max = 20 }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:47:13.740

```
public Constructor(int minValue = 0, int maxValue = 0) // requires C# 4+
{
} 
```

或者

```
struct ValueInfo
{
    public MinValue { get; set; }
    public MaxValue { get; set; }
}

public Constructor(ValueInfo values) // one or another or both values can be specified
{
} 
```

# wordpress - 使用仪表板上传器而不是 FTP

> ID：13433456
> 
> 赞同：1
> 
> 时间：2012-11-17T18:27:32.993
> 
> 标签：wordpress, ftp

最近，我改变了我的主机服务器。导致问题。当我想上传一个新的主题或插件而不是使用仪表板上传器时要我输入 FTP 主机和用户名和密码，我可以做些什么来回到以前的上传器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:08:39.933

这是因为您使用的是共享服务器。您可以将这些代码添加到 wp-config.php

```
define('FS_METHOD', 'direct'); 
```

有关更多信息，请参阅[WordPress 升级常量](http://codex.wordpress.org/Editing_wp-config.php#WordPress_Upgrade_Constants)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T18:31:45.160

您遇到的问题是由于该站点的文件权限。

虽然它的当前形式更安全，但更新 WordPress、上传图片等不太方便。

**第一：**
您是否真的在 WP 中输入了 FTP 凭据并查看它是否有效？如果您这样做，WordPress 会记住凭据，因此您只需执行一次。如果可能的话，这将是最好的方法。

**然后：**
您可以做的是尝试通过FTP更改文件权限。如果这不起作用，您通常可以访问文件并尝试通过主机提供商的 cPanel 更改权限。如果这不起作用，那么您将需要请求主机提供商更改文件权限。

通过 cPanel：

1.  转到“文件管理器”
2.  当提示要转到哪个目录时，转到您的“Web Root”目录。
3.  导航到相应的 WP 文件夹，并通过右键单击文件夹图标，选择“更改权限”来授予他们权限。
4.  一些推荐的设置可以在这里找到：[WordPress 文件权限](http://underscorebleach.net/jotsheet/2006/10/wordpress-file-permissions)

# java - Android：将视图放在与其他视图相同的高度

> ID：13433458
> 
> 赞同：3
> 
> 时间：2012-11-17T18:28:03.317
> 
> 标签：java, android, android-layout, layout, android-relativelayout

我有一个 LinearLayout（垂直水平），包含 2 个 RelativeLayout，每个包含 1 个按钮。在左侧的RelativeLayout 中，按钮位于父级的中心。在右侧的 RelativeLayout 中有一个稍大的按钮。我希望那个较大按钮的底部与另一个按钮的高度相同。像这样：

![在此处输入图像描述](../Images/0c839008b81c46140b37729e689857ef.png)

你知道我怎么能做到这一点吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:32:19.440

**在onWindowFocusChanged**中分别使用 getBottom() 和 getWidth 获取较小按钮的底部位置和宽度。

在运行时创建另一个按钮。将顶部填充设置为第二个相对布局，作为 button1 的 bottom_position - height_of_button2。

在设置所需的高度和宽度（从butoon1的getWidth中获得）后，将此按钮添加到第二个相对布局中。

这是示例：-

```
public void onWindowFocusChanged(boolean hasFocus) {
        relative_layout_two = (RelativeLayout) findViewById(R.id.rl2);
        int bottom_position_of_button1 = bt1.getBottom();
        int width_of_button1 = bt1.getWidth();
        bt2 = new Button(getApplicationContext());
        rl.setPadding(0, bottom_position_of_button1-200, 0, 0);// I have taken 200 as the height of second button
        rl.addView(bt2, width_of_button1, 200);

    }; 
```

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:33:19.427

在两个按钮上使用 android:layout_alignParentBottom，然后在两个按钮上应用相同值的 android:layout_marginBottom。

# ios - mvc ios中的多个模型类

> ID：13433459
> 
> 赞同：1
> 
> 时间：2012-11-17T18:28:04.480
> 
> 标签：ios, model-view-controller

我正在 iOS 中开发联系人列表视图。我有一个模型类，其中包含名字/姓氏、电子邮件 ID 等所有属性。我还有一个可变数组来保存电话号码。我知道我可以在这里使用字典。但我的问题是另一种选择。

我正在考虑使用带有 phone no 类型和 phone no 作为属性的另一个模型，并将这些类的对象保存在第一个模型的可变数组中。我不知道我在这里有多清楚，但我想知道这是一个好方法还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:39:37.307

什么是最好的方法真的值得商榷。如果您认为将来可能需要添加其他功能（验证等），则为类型/编号拥有一个单独的模型对象会很好。如果您只需要存储数据，字典就可以了。

# vb.net - 日期时间选择器 Visual Studio 2012

> ID：13433460
> 
> 赞同：-1
> 
> 时间：2012-11-17T18:28:07.693
> 
> 标签：vb.net, visual-studio-2012, datetimepicker

我正在 Visual Studio 2012 中创建一个程序。我在表单上有一个日期和时间选择器和一个按钮。Button enabled 当前设置为 false。当日期和时间选择器中的日期比当前月份少 3 个月时，我想启用该按钮。例如，当前月份是 11 月，因此如果选择的日期是 8 月或更早，则该按钮将被启用。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:32:07.050

尝试这样的事情：

```
Private Sub DateTimePicker1_ValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles DateTimePicker1.ValueChanged
    Button1.Enabled = Not (DateTimePicker1.Value.Date >= DateTime.Now.Date Or _
                          (DateTimePicker1.Value.AddMonths(2).Date = DateTime.Now.Date Or _
                           DateTimePicker1.Value.AddMonths(1).Date = DateTime.Now.Date))
End Sub 
```

我希望你比较`dates only`。为了也包括时间，您可以`.Date`从代码中删除部分。此外，我们还应该考虑`year`与`month`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:18:22.657

或者...

```
Button1.Enabled = If(DateDiff(DateInterval.Month, DateTimePicker1.Value, Now) > 2, True, False) 
```

# c++ - 手动提升序列化多图

> ID：13433461
> 
> 赞同：1
> 
> 时间：2012-11-17T18:28:18.757
> 
> 标签：c++, serialization, boost, boost-serialization

`std::multimap<Participant*, Connection*>`以前我的程序在完全填充后用于序列化整个程序。这对于保存和恢复都很简单`arc & _connections`。

但这需要每个连接对象都留在内存中。但我不需要这些对象来进行序列化以外的任何事情。因此，为了最大限度地减少内存消耗，它决定`std::make_pair(connection->participant(), connection)`在创建它们后立即进行序列化。并在序列化完成后删除。

在填充开始之前，多图的预期大小是已知的。

我想要的是手动序列化这些对，这样我就不需要更改反序列化代码`arc & _connections;`

从`boost/serialization/collections_save_imp.hpp`我看到

```
boost::serialization::save_construct_data_adl(
    ar, 
    &(*it), 
    boost::serialization::version<BOOST_DEDUCED_TYPENAME Container::value_type>::value
);
ar << boost::serialization::make_nvp("item", *it++); 
```

那么我是否需要使用类似的东西

```
typedef std::pair<Participant*, Connection*> PairT;

ar <<  BOOST_SERIALIZATION_NVP(expected_size);

if(3 < ar.get_library_version()){// I don't really understand this magic number here
    const unsigned int item_version = boost::serialization::version<PairT>::value;
    ar << BOOST_SERIALIZATION_NVP(item_version);
}

PairT pair = std::make_pair(connection->participant(), connection);
boost::serialization::save_construct_data_adl(
    ar, 
    pair, 
    boost::serialization::version<PairT>::value
);
ar << boost::serialization::make_nvp("item", pair);
delete connection; 
```

我不确定应该怎么做。只是猜测。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:57:44.517

我知道您要做什么，但我不推荐它，因为它很容易损坏。例如，如果您将存档更改为 xml，它将不起作用。如果您升级到较新版本的 boost，它也可能会损坏并且可能难以调试。原因是存档本身可能会在其中添加一些额外的数据`start_save()`（例如类 id），然后它会执行实际的序列化并以调用`end_save()`. 由于这些方法受到保护，因此您不能使用它们以可移植/稳定的方式“伪造”序列化。

您可以覆盖（专门化）多映射序列化，但这只会让您访问空容器，并且您必须使用一些技巧（如全局变量）来访问要序列化的连接对象：

```
template<class Archive>
inline void save(Archive& ar, const MultimapT& map, const unsigned version) {
    Connection* p = new Connection( global_data->get(i) );
} 
```

您还必须反序列化您正在序列化的同一对象，因此唯一干净的方法是为存档提供一个包含处理序列化的 multimap 的对象。该对象可以是拥有地图的类或虚拟对象。但是，这将需要对现有的反序列化代码进行一些更改：

```
ar << boost::serialization::make_nvp("map",Dummy(&_source));
// and
ar >> boost::serialization::make_nvp("map",Dummy(&_connections)); 
```

dummy 的构造函数将采用指向生成连接所需的对象的指针（保存时）或指向多映射的指针（加载时）。然后，假人的`save()`方法可以即时生成、存储和删除 Connection 对象，而该`load()`方法只是填充多图。

动态生成对象时，必须禁用对象跟踪：

```
BOOST_CLASS_TRACKING(Connection, boost::serialization::track_never)
BOOST_CLASS_TRACKING(Participant, boost::serialization::track_never) 
```

否则存档会检测到相同的内存地址被重复序列化，并将创建对第一个对象的引用，而不是实际存储数据。

下面是一个成员函数示例，用于演示包含多映射（虚拟或父类）的对象的序列化：

```
// class Foo {

template<typename Archive>
inline void save( Archive& ar, const unsigned version ) const {
    size_t count = expected_count();
    ar << BOOST_SERIALIZATION_NVP(count);
    for( size_t i=0; i<count; ++i ) {
        Connection* connection = make_connection(i);
        PairT pair(connection->participant(), connection);
        ar << boost::serialization::make_nvp("item", pair);
        delete connection;
    }
}

template<typename Archive>
inline void load( Archive& ar, const unsigned version ) {
    size_t count=0;
    ar >> BOOST_SERIALIZATION_NVP(count);
    while( count-- ) {
        PairT pair;
        ar >> boost::serialization::make_nvp("item", pair);
        _connections->insert(pair);
    }
}

friend boost::serialization::access;
BOOST_SERIALIZATION_SPLIT_MEMBER() // split serialize() into save() and load()
// } 
```

参考：[侵入式/非侵入式序列化](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/serialization.html#member)、[拆分保存和加载](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/serialization.html#splitting)、[对象跟踪](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/traits.html#tracking)

# .net - 如何在没有 Export 属性的情况下在 MEF 中导出类型？（例如以编程方式）

> ID：13433463
> 
> 赞同：10
> 
> 时间：2012-11-17T18:28:29.870
> 
> 标签：.net, mef

我似乎找不到任何有关如何执行此操作的文章或链接，这似乎是一个明显的问题（例如，当您没有源代码或想要使用不是为 MEF 编写的现有类型时）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-18T08:18:52.710

如果您希望将现有对象实例添加到容器中，可以使用以下[`CompositionContainer.ComposeExportedValue`](http://msdn.microsoft.com/en-us/library/dd986608.aspx)方法：

```
container.ComposeExportedValue<MyClass>(myClassInstance); 
```

不过，您真正要寻找的可能是新的基于约定的编程模型，它允许您根据命名约定而不是属性创建部件，但此功能仅在 .NET 4.5 中可用。

`myAssembly`使用示例（这将导出实现`IController`为的每种类型`IController`）：

```
var registration = new RegistrationBuilder();

registration.ForTypesDerivedFrom<IController>()
            .Export<IController>();

var catalog = new AssemblyCatalog(myAssembly, registration);
var container = new CompositionContainer(catalog); 
```

[可以在此处找到](http://blogs.msdn.com/b/hammett/archive/2011/03/08/mef-s-convention-model.aspx)如何使用 MEF 的新约定模型的一个很好的示例。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-22T20:21:18.160

如果您使用*InheritedExport*属性标记接口，则目录中的所有模块都将被导出，这些模块实现此接口，无论它们是否使用*Export*属性标记。

界面：

```
[InheritedExport]
public interface IContract { ... } 
```

模块：

```
// No [Export] attribute
public class ModuleImplementation : IContract { ... } 
```

现在 MEF 将注入模块。

# scala - 我如何告诉 sbt 使用每晚构建的 Scala 2.10？

> ID：13433470
> 
> 赞同：1
> 
> 时间：2012-11-17T18:28:57.000
> 
> 标签：scala, sbt

使用 sbt 构建的 Scala Migrations在 Scala 2.10.0-RC2 中发现了[SI-6646 。](https://issues.scala-lang.org/browse/SI-6646)我想在 RC3 发布之前测试提交的修复以确认它一切正常。我如何告诉 sbt 使用夜间 Scala 2.10.0 构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:04:18.940

我还没有尝试过，但是您可以通过以下问题 从 github ( [https://github.com/scala/scala ) 中提取代码：](https://github.com/scala/scala) [How can sbt pull dependency artifacts from git?](https://stackoverflow.com/questions/7550376/how-can-sbt-pull-dependency-artifacts-from-git)

然后，从 sbt 调用 ant 来构建编译器： [https ://bitbucket.org/jmhofer/ant4sbt/wiki/Home](https://bitbucket.org/jmhofer/ant4sbt/wiki/Home)

我不确定的唯一部分是您需要将 scala 编译器和库复制到 sbt 使用的正确文件夹中，但您可以查看它在您的机器上的位置。

然后，只需进行清理并构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:23:24.973

您首先需要在您的项目设置中添加一个新的解析器`.build`。我们从 Scala 导入具有最后提交的 Sonatype 存储库。查看[此链接](https://oss.sonatype.org/content/repositories/snapshots/org/scala-lang/)以查看所有可用版本的列表。

```
resolvers += Resolver.sonatypeRepo("snapshots") 
```

然后只需在 sbt 设置中更改 Scala 版本。

```
scalaVersion := "2.10.0-SNAPSHOT" 
```

# sql - 时间表、间隔、预订等的数据库设计

> ID：13433473
> 
> 赞同：1
> 
> 时间：2012-11-17T18:29:03.543
> 
> 标签：sql, database-design

我正在做一个项目，我想要一些灵感或见解来解决问题。我正在编写一个应用程序，用于记录访客到祈祷中心（一个有很多房间的地方。人们来祈祷）。我们将整合一个预订系统。现在人们可以说“某某约会我来”或“每周三来”或“每周来两次”或“每月来一次”等。

我不知道如何在关系数据库中维护此类信息。任何人都可以对此提供一些见解吗？

以及如何查询数据库以查找计划在特定日期访问哪些人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:53:49.167

这个模式应该足以让你开始

```
VISITORS
id
name
... other atomic data

RESOURCES
id
name
... other atomic data

RESERVATIONS
id
visitor
resource
fromdate
tilldate 
```

*因此，如果我想在 11 月 19 日 10:00 到 12:00 预订 200 号房间，预订*表中会有一条记录，其中“访客”字段指向我在*访客*表中的条目，即“资源”字段指向*资源*表中房间 200 的条目，“fromdate”将等于 10:00 19-11-2012，“tilldate”将等于“12:00 19-11-2012”。

您可以编写查询来显示在特定日期/时间保留了哪些资源，例如

```
select resources.name, visitors.name
from resources inner join reservations on resources.id = reservations.resource
inner join visitors on reservations.visitor = visitors.id
where reservations.fromdate <= "2012-11-19 06:00"
and reservations.tilldate >= "2012-11-19 23:59" 
```

和查询显示在给定时间哪些资源是空闲的

```
select resources.name
from resources 
where not exists (select 1 from reservations
where reservations.resource = resources.id
and reservations.fromdate >= "2012-11-19 10:00"
and reservations.tilldate <= "2012-11-19 12:00") 
```

如果有人说“我每周三都来”，您的应用程序必须足够聪明，可以根据所需的资源、日期和时间在“预订”表中插入几行。

另外，请参阅此问题：[Reservation 站点的数据库表](https://stackoverflow.com/questions/8367970/database-tables-for-reservation-site?rq=1)

# mysql - MySQL - 按时间戳范围分组

> ID：13433474
> 
> 赞同：1
> 
> 时间：2012-11-17T18:29:11.893
> 
> 标签：mysql, sql

我想监控网站上不同类型的操作，我将以登录为例。

```
user_logins table:

user_id     name            when_logged
-------     ----            -----------
smallint    varchar(128)    timestamp 
```

因此，要查看今天登录的每个用户（以及登录次数），我使用：

```
select name, count(name) from user_logins 
where when_logged between '2012-11-17 00:00:00' AND '2012-11-17 23:59:59' 
group by name; 
```

但是，我想在过去的 14 天里每天都这样做……

是否可以通过更改日期在一个查询中执行此操作，而不是 14 个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:34:04.957

```
 select name, count(when_logged) 
 from user_logins 
 where when_logged >= curdate() - interval 14 day
 group by name, date(when_logged) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:34:14.853

```
select date(when_logged) as datelogged, name, count(name) 
from user_logins
where when_logged >= date_sub(current_timestamp, INTERVAL 14 day) 
group by name, date(when_logged); 
```

# php - OpenCart 无法通过 LAN 访问

> ID：13433476
> 
> 赞同：1
> 
> 时间：2012-11-17T18:29:18.267
> 
> 标签：php, opencart

我今天在 Linux 下的 vm 上安装了 OpenCart。在局域网上它工作正常。我在路由器上打开了端口 80，但是当我尝试从外部 URL 加载我的网站时，它只加载没有图像和模板的文本。问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:03:40.060

如果您的网站正在显示但缺少内容，您需要将地址设置为 ip 而不是 localhost。这是在您的 config.php 文件中完成的。将所有 localhost 值更改为 ip，保存并刷新

# objective-c - UILabel 属性文本和 minimumScaleFactor

> ID：13433481
> 
> 赞同：10
> 
> 时间：2012-11-17T18:29:45.810
> 
> 标签：objective-c, cocoa-touch, cocoa, uilabel

是否可以同时使用 minimumScaleFactor 和属性文本字符串？

```
 [myLabel setFrame:CGRectMake(6, 0, 200, 25)];
    NSMutableAttributedString *attStr = [[NSMutableAttributedString alloc] initWithString:@"A very long string and its first 20 characters should be bold"];
    [attStr addAttribute:NSFontAttributeName value:[UIFont boldSystemFontOfSize:17] range:NSMakeRange(0, 20)];
    myLabel.attributedText = attStr;
    [myLabel setAdjustsFontSizeToFitWidth:YES];
    [myLabel setAdjustsLetterSpacingToFitWidth:YES];
    [myLabel setMinimumScaleFactor:0.3]; 
```

这似乎不起作用。如果我设置 myLabel.text 它按预期缩放。如何让缩放正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:12:15.717

您可以获取拳头 20 个字符的部分并获取其宽度，然后您可以使用相同的方式获取其余部分的宽度：

```
CGSize maximumLabelSize = CGSizeMake(500.0,20.0);//write a really long width

//this will turn the expected length of the labels.. 
 CGSize expectedFirstLabelSize = [[[[NSMutableAttributedString alloc] initWithString:@"A very long string and its first 20 characters should be bold"] substringToIndex:21]
 sizeWithFont:[UIFont  boldSystemFontOfSize:17] constrainedToSize:maximumLabelSize lineBreakMode:nil];

 CGSize expectedLastLabelSize = [[[[NSMutableAttributedString alloc] initWithString:@"A very long string and its first 20 characters should be bold"] substringFromIndex:20] 
sizeWithFont:[UIFont  normalSystemFontOfSize:15] constrainedToSize:maximumLabelSize lineBreakMode:nil]; 
```

那么你会知道他们的长度率..例如。第一部分是 140 像素，其余是 260 像素，您的标签区域是 100 像素，然后您可以创建 2 个不同的标签，分别为 35 像素和 65 像素。然后您可以对两个标签使用 setAdjustsFontSizeToFitWidth。

# forms - 重力表单插件 - 动态填充表单字段不起作用

> ID：13433482
> 
> 赞同：9
> 
> 时间：2012-11-17T18:29:52.517
> 
> 标签：forms, wordpress, gravity

我的重力表格表格有一些问题。这是一个多页表单，我需要使用第 1 页中的帖子值填充第 2 页上的字段。但它不起作用。当然，第 2 页上的字段配置为“允许动态填充字段”，并且该字段的参数设置为“名称”。这是我的代码：

```
add_filter('gform_field_value_name', 'name_population_function');
function name_population_function($value){
    $name = $_POST['input_2'] . ' ' . ( ! empty( $_POST['input_3'] ) ? ( $_POST['input_3'] . ' ' ) : NULL ) . $_POST['input_1'];
    return $name;
} 
```

当我使用它打印`$name`变量的值时，`var_dump($name);`它实际上是正确的。

如果我将它更改`$name`为`$name = 'Last Middle First';`它应该填充该字段。

谢谢您的帮助。

编辑：出于测试目的，我将代码更改为：

```
add_filter('gform_field_value_name', 'name_population_function');
function name_population_function($value){
    $name = 'Test';
    if ( ! empty( $_POST['input_1'] ) && ! empty( $_POST['input_2'] ) ) {
        $name = $_POST['input_2'] . ' ' . ( ! empty( $_POST['input_3'] ) ? ( $_POST['input_3'] . ' ' ) : NULL ) . $_POST['input_1'];
    //var_dump( $name );
    }
    return $name;
} 
```

如果我取消注释带有`var_dump`variable 值的行`$name`再次正确设置，但第 2 页上的字段预填充了 value `Test`。可能在第 1 页上也调用了这个过滤器，所以插件是否有可能缓存这个值？我不使用缓存插件，所以不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T13:36:57.697

`.hide`您可以使用 jQuery 使用或来创建多个页面的印象，而不是将表单放在多个页面上`.slideToggle`。这将解决您的问题并使表单数据的提交更加容易。然后简单地调用过去输入的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T05:21:12.593

您可以使用查询字符串来保存数据并动态填充字段。

[http://siteurl.com/form-url/?your_parameter=value](http://siteurl.com/form-url/?your_parameter=value)

```
add_filter('gform_field_value_author_email', 'populate_post_author_email');
function populate_post_author_email($value){
global $post;

$author_email = get_the_author_meta('email', $post->post_author);

return $author_email;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-14T21:34:00.180

试试这个 gform_pre_render 过滤器。它为表单 ID 7 添加了一个过滤器。将 7 替换为您的 Gravity 表单的 ID。

```
add_filter('gform_pre_render_7', 'populate_form_pre_render');

function populate_form_pre_render($form){
  $name ='';
  foreach ($form['fields'] as &$field)
  {
     // replace 2 with the actual ID of your form field 
    if ( 2 == $field['id'] ){
      if ( ! empty( $_POST['input_1'] ) && ! empty( $_POST['input_2'] ) ) {
         $name = $_POST['input_2'] . ' ' . ( ! empty( $_POST['input_3'] ) ? ($_POST['input_3'] . ' ' ) : NULL ) . $_POST['input_1'];
        //var_dump( $name );
      }
      $field['defaultValue']=$name;
  echo '<pre>';
  print_r($field);
  echo '</pre>';
   }    

 }

 return $form;
} 
```

# c++ - 结合 blits 和 gdi 绘图（不工作，眨眼）

> ID：13433486
> 
> 赞同：1
> 
> 时间：2012-11-17T18:30:09.303
> 
> 标签：c++, windows, winapi, gdi

我正在尝试将纹理 blit 与 gdi 绘图结合起来（通过

```
 void draw()
    {
     StretchDIBits(hdc, 0, 0, CLIENT_X, CLIENT_Y, 0, 0, BUF_X, BUF_Y, buffer, &bmi,    DIB_RGB_COLORS, SRCCOPY);
     TextOut(hdc, 10, 10, "Hello World", 11);
    } 
```

设置时 GetDC 会设置一次 hdc，但它可能没问题；上面这个我每秒都在空闲循环中运行 100 次，也从 OnPain 消息中运行；这不是很好，只是因为 TextOut 结果只是闪烁，其余的都可以 - 有人可以告诉我一些建议如何消除这种闪烁并获得稳定的 TextOut 结果吗？很多tnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:27:46.877

您需要“双缓冲”以避免闪烁。

在它的位图中创建内存 DC`CreateCompatibleDC`选择，`CreateCompatibleBitmap`并在此内存 DC 中创建并绘制适当的大小。

当您的图片准备就绪时 -`BitBlt`它在您的窗口 DC 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:33:34.383

这是很自然的。你在 DC 上画了一个 DIB。并且立即绘制一个文本，该文本（可能）放置，使其边界矩形与`StretchDIBits`.

简单来说：你画了一些东西，然后你在同一个地方画了别的东西。这会闪烁。你还期待什么？

为了避免闪烁，您应该使用所谓的双缓冲。这表示：

1.  创建足够大小的位图。
2.  创建一个 DC（所谓的内存 DC）
3.  选择这个位图进去。
4.  在这个 DC 上画出你的 DIB（不是你最初获得的那个）。
5.  画出你的文字。
6.  最后用于`BitBlt`将图像从位图传输到您的初始 DC。
7.  不要忘记清理东西：`DeleteObject`对于 DIB，`DeleteDC`对于内存 DC。

或者，您可以保留您的位图，而不是在每次需要绘制某些东西时创建它。从性能的角度来看它更好：做`StretchXXXX`起来很重，加上从位图在屏幕上绘制比绘制DIB快得多（假设视频卡支持2D加速）。

# web - wget 有很多页面

> ID：13433487
> 
> 赞同：1
> 
> 时间：2012-11-17T18:30:25.387
> 
> 标签：web, wget

根据链接到的文件是否也被下载，`-k`选项 in将链接转换为本地或远程。`wget`（有关详细信息，请参见[此处）](http://www.gnu.org/software/wget/manual/wget.html#Recursive-Retrieval-Options)

是否可以这样使用`wget`：我下载了两个网页，比如说`www.example.com/1`和`www.example.com/2`，其中第一页有一个到第二页的链接，`wget`并将链接转换为本地链接，因为第二页也被下载了。

**注意**：我无法`www.example.com/1`使用深度为 1 的递归选项下载，因为`www.example.com/1`可能有指向其他页面的链接，我只想要`www.example.com/2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:33:36.570

这应该可以解决问题：

```
wget -kp www.example.com/1 www.example.com/2 
```

从您链接的网站：

> '-p' '--page-requisites' 此选项使 Wget 下载正确显示给定 html 页面所需的所有文件。这包括内联图像、声音和引用样式表等内容。

# asp.net-mvc-4 - 在 MVC 4 中搜索并在同一视图中呈现

> ID：13433488
> 
> 赞同：1
> 
> 时间：2012-11-17T18:30:25.293
> 
> 标签：asp.net-mvc-4

我正在尝试在控制器的索引中进行搜索，以在同一视图（索引）中检索搜索结果，因为这是操作：

```
public ActionResult Index(string SeatchParam)
{
 var Employees = db.Employees.Include(e => e.Location).Include(e =>          e.Department).Where(e => e.FirstName.Contains(SeatchParam)|| e.FatherName.Contains(SeatchParam) || e.LastName.Contains(SeatchParam) || e.Location.LocationName.Contains(SeatchParam) || e.Department.DepartmentName.Contains(SeatchParam)).Take(10);
        return View(Employees.ToList());
    } 
```

视图是这样的：

```
@model IEnumerable<OG.Models.Employee>

@{
ViewBag.Title = "Index";
}

<h2>Search Employees</h2>

<form action="Employee/Index"  method="get">
<input type="text" name="SearchParam" />
<input type="submit" value="Search" />

<p>
@Html.ActionLink("Create New", "Create")
</p>

<table border="10">
<tr>

   <th>
        @Html.DisplayNameFor(model => model.EmployeeId)
    </th>

    <th>
        @Html.DisplayNameFor(model => model.FullName)
    </th>

    <th>
        @Html.DisplayNameFor(model => model.Department.DepartmentName)
    </th>

     <th>
        @Html.DisplayNameFor(model => model.Location.LocationName)
    </th>

    <th></th>
</tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.EmployeeId)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.FullName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Department.DepartmentName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Location.LocationName)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.EmployeeId  }) |
        @Html.ActionLink("Details", "Details", new { id = item.EmployeeId }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.EmployeeId })
    </td>
</tr>
}

</table>
</form> 
```

当我搜索时，我没有找到任何结果，我可以在没有 AJAX 或 Json 的情况下这样做吗？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:51:01.927

在调用输入时传入`SeatchParam`控制器`SearchParam`

所以改变

```
public ActionResult Index(string SearchParam) 
```

# php - 使用 PHP 和 ImageMagick 以编程方式将 RGB 图像转换为 1 位灰度 (b/w) 位图图像

> ID：13433490
> 
> 赞同：4
> 
> 时间：2012-11-17T18:30:43.343
> 
> 标签：php, bitmap, imagemagick, rgb, grayscale

我正在尝试使用 PHP（版本：5.2.13）和 ImageMagick（版本：6.7.8-7-Q16）以编程方式将位图 RGB 图像转换为 1 位灰度（b/w）位图图像。输入图像是位图，通过 ImageMagick 函数生成：

```
bool Imagick::setFormat ( string $format ) 
```

其中 $format = 'bmp2'

以下代码过去可以工作（ImageMagick 的旧版本......不记得是哪一个），但在当前环境中不再工作：

```
private function monochrome() {
    if (isset($this->image)) {
        try {
            // reduce image colors to 2 (black and white)
            $this->image->quantizeImage(2, Imagick::COLORSPACE_GRAY, 5, false, true);

            // reduce image depth to 1 bit per pixel
            $this->image->setImageDepth(1);
            $this->image->setImageChannelDepth(Imagick::CHANNEL_ALL, 1);

            // set image type to monochrome (2 colors: black and white only)
            $this->image->setImageType(Imagick::IMGTYPE_BILEVEL);
        }
        catch (ImagickException $ie) {
            throw $ie;
        }
    }
    else {
        throw new Exception("No image object");
    }
} 
```

问题是生成的图像仍然在 RGB 颜色空间中。

我也试过：

```
$this->image->setImageColorSpace(Imagick::COLORSPACE_GRAY); 
```

但结果并没有改变。

我的目标是为签名捕获应用程序生成尽可能小的黑白位图图像。我知道有比位图更好的图像格式，但生成的图像必须与旧的 Access 97 兼容。这就是为什么选择“bmp2”作为图像格式的原因。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T14:38:18.233

我只做这个，它会创建一个黑白图像：

```
$im = new Imagick();
$im->readimage($filename);
$im->resizeimage($width, $height, Imagick::FILTER_UNDEFINED, 1, false);
$im->posterizeimage(2, false);
$im->writeimage($filename.".bmp"); 
```

它创建一个标识如下的图像：

```
$ identify example.png.bmp 
example.png.bmp BMP 1742x236 1742x236+0+0 1-bit PseudoClass 2c 52.1KB 0.000u 0:00.000 
```

2c 表示它只包含 2 个颜色，但 hte 图像没有颜色索引表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:30:38.807

```
 my $image = Image::Magick->new;
    $image->Read($imagePath);
    $image->Quantize(colorspace=>"gray"):
    $image->Set(density => '72x72'); 
```

这个例子是用perl写的，你可以很容易地把它转换成php...

# vba - 如何优化和改进 MS Word 的图表宏？

> ID：13433491
> 
> 赞同：2
> 
> 时间：2012-11-17T18:30:43.683
> 
> 标签：vba, ms-word

此宏在文档中的表格中搜索 4 个单词的所有实例。我通过引用“ActiveDocument.Tables(3) 也称为文档中的第三个表”来限制范围。

我想知道：
（1）是否有更简单的方法来编写我的 4 个 while 循环，让它们查看并记录一个单词的 4 个单独实例的值。
（2）如果有语法方式限制文档中第三个表的第三列的代码范围。

我有while循环的原因是将4个不同单词的4个不同值记录到Excel文档中用于图表原因[http://msdn.microsoft.com/en-us/library/ff629397.aspx](http://msdn.microsoft.com/en-us/library/ff629397.aspx)

到目前为止，这是我的代码：

```
Sub CreateChartFromExistingTable()

    Dim salesChart As Chart
    Dim chartWorkSheet As Excel.Worksheet
    Dim iCount As Integer
    Dim range As range
    Dim List
    Dim jCount As Integer
    Dim range1 As range
    Dim kCount As Integer
    Dim range2 As range
    Dim lCount As Integer
    Dim range3 As range

    Set salesChart = ActiveDocument.Shapes.AddChart.Chart
    Set chartWorkSheet = salesChart.ChartData.Workbook.Worksheets(1)

    Set range = ActiveDocument.Tables(3).range
    Set range1 = ActiveDocument.Tables(3).range
    Set range2 = ActiveDocument.Tables(3).range
    Set range3 = ActiveDocument.Tables(3).range
    iCount = 0

    With range.Find
    .Text = "Passed"
    .Format = True
    .MatchCase = True
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False

        Do While .Execute(Forward:=True) = True
            iCount = iCount + 1
        Loop

    End With

    jCount = 0
    With range1.Find
    .Text = "Failed"
    .Format = True
    .MatchCase = True
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False

        Do While .Execute(Forward:=True) = True
            jCount = jCount + 1
        Loop

    End With
    kCount = 0
    With range2.Find
    .Text = "No Run"
    .Format = True
    .MatchCase = True
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False

        Do While .Execute(Forward:=True) = True
            kCount = kCount + 1
        Loop

    End With
    lCount = 0
    With range3.Find
    .Text = "N/A"
    .Format = True
    .MatchCase = True
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False

        Do While .Execute(Forward:=True) = True
            lCount = lCount + 1
        Loop

    End With

    chartWorkSheet.ListObjects("Table1").Resize chartWorkSheet.range("A1:B5")
    chartWorkSheet.range("Table1[[#Headers],[Series 1]]").FormulaR1C1 = "Test Instances Summary Graph"

    chartWorkSheet.range("A2").FormulaR1C1 = "Passed"
    chartWorkSheet.range("A3").FormulaR1C1 = "Failed"
    chartWorkSheet.range("A4").FormulaR1C1 = "No Run"
    chartWorkSheet.range("A5").FormulaR1C1 = "N/A"
    chartWorkSheet.range("B2").FormulaR1C1 = iCount
    chartWorkSheet.range("B3").FormulaR1C1 = jCount
    chartWorkSheet.range("B4").FormulaR1C1 = kCount
    chartWorkSheet.range("B5").FormulaR1C1 = lCount

    salesChart.ChartType = xlPie
    salesChart.ChartData.Workbook.Application.Quit

End Sub 
```

请确保您在 MS Word 的 VB 编辑器中引用了 Microsoft Excel 14.0 对象库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T12:15:47.677

我认为这就是您正在寻找的：

```
Dim Range As Range
Dim maxCases, curCase, iCount, jCount, kCount, lCount As Integer
Dim texts(5) As String

texts(1) = "Passed"
texts(2) = "Failed"
texts(3) = "No Run"
texts(4) = "N/A"

maxCases = 4
curCase = 0
Do
    curCase = curCase + 1
    curCount = 0

    ActiveDocument.Tables(3).Range.Columns(3).Select
    Set Range = Selection.Range
    With Range.Find
        .Text = texts(curCase)
        .Format = True
        .MatchCase = True
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False

        Do While .Execute(Forward:=True) = True
            curCount = curCount + 1
        Loop

        If (curCase = 1) Then
            iCount = curCount
        ElseIf (curCase = 2) Then
            jCount = curCount
        ElseIf (curCase = 3) Then
            kCount = curCount
        ElseIf (curCase = 4) Then
            lCount = curCount
        End If

    End With

Loop While (curCase < maxCases) 
```

我已经对其进行了测试，并且该 `Set Range =`部分必须在循环内；否则它将仅适用于第一次迭代。

# r - 使 Vectorize() 传递暗淡或正确矢量化此函数

> ID：13433492
> 
> 赞同：3
> 
> 时间：2012-11-17T18:30:44.927
> 
> 标签：r, vectorization

包中有一个函数`exactci`，我想将参数作为矩阵传递给它并取回一个矩阵。事实上，所有参数只能是长度为 1 的向量。我挖掘了源代码并找到了这个片段，即我实际使用的函数（这里修改和减少了参数）：

```
exact.binom.minlike <- function(d1, d2, e1, e2){
    x           <- round(d1)
    n           <- x + round(d2)
    p           <- e1 / (e1 + e2)

    support     <- 0:n
    f           <- dbinom(support, n, p)
    d           <- f[support == x]

    sum(f[f <= d * relErr])
} 
```

`minlike`（这将返回 ap 值，用于使用该方法对泊松率进行相等性的双边检验）

我看到我无法传入矩阵并取回矩阵的原因是因为`support`在内部创建了向量。我将部分剥离`dbinom()`为以下内容：

```
f           <- exp( lfactorial(n) - 
                    (lfactorial(support) + lfactorial(n - support)) + 
                    support * log(p) + 
                    (n - support) * log(1 - p)
                   ) 
```

这会返回相同的向量，`f`很好，花花公子，甚至更快，但它似乎并没有解决我的问题 - 至少我看不到将其`support`用作向量的方法。支持的长度将根据具体情况而有所不同`d1+d2`，因此我只能一次进行比较。我能做的最好的事情就是把整个东西粘在里面`Vectorize()`，它把矩阵作为参数就好了，但返回一个向量而不是矩阵：

```
exact.binom.minlike.stripped <- Vectorize(compiler:::cmpfun(function(d1, d2, e1, e2, relErr = 1 + 10 ^ ( -7)){
    x           <- round(d1)
    n           <- x + round(d2)
    p           <- e1 / (e1 + e2)

    support     <- 0:n

    # where dbinom() is the prob mass function:
    # n choose k * p ^ k * (1 - p) ^ (n - k) # log it to strip down, then exp it
    f           <- exp( lfactorial(n) - 
                        (lfactorial(support) + lfactorial(n - support)) + 
                        support * log(p) + 
                        (n - support) * log(1 - p)
                       )
   #f           <- dbinom(support,n,p)
   d            <- f[support == x]

   sum(f[f <= d * relErr])
})) 
```

这是一个例子：

```
set.seed(1)
d1 <- matrix(rpois(36,lambda = 100), 6)
d2 <- matrix(rpois(36,lambda = 150), 6)
e1 <- matrix(rpois(36,lambda = 10000), 6)
e2 <- matrix(rpois(36,lambda = 25000), 6) 
```

此输出是长度为 36 的向量，而不是 6x6 矩阵。所有四个输入都是 6x6 矩阵：

```
(p.vals <- exact.binom.minlike.stripped(d1, d2, e1, e2))
 [1] 1.935277e-04 9.680425e-08 1.508232e-08 1.227176e-04 1.656111e-02
 [6] 2.310620e-04 2.871150e-05 4.024025e-06 4.804943e-05 1.619866e-02
[11] 3.610596e-02 1.101247e-04 5.153746e-04 1.350891e-04 8.663191e-06
[16] 1.384378e-05 2.681715e-06 4.556092e-08 2.270317e-04 2.040001e-04
[21] 3.330344e-01 4.775055e-05 2.588667e-07 5.647732e-04 1.615861e-03
[26] 2.438345e-03 2.524692e-04 3.398664e-05 2.001322e-05 4.361194e-03
[31] 3.909116e-05 1.697943e-03 8.543677e-07 2.992653e-05 2.617216e-04
[36] 3.106748e-03 
```

我收集我可以添加`dim()`s 并将其重新转换为矩阵：

```
dim(p.vals) <- dim(d1) 
```

但这似乎是第二好的。我可以`Vectorize()`返回一个与传递给它的参数相同维度的矩阵吗？更好的是，有没有办法正确矢量化我在这里所做的事情并完全避免隐藏 for 循环（`Vectorize()`使用`mapply()`）？

[[编辑]] 感谢皮特的好建议。这是使用维度上与我实际所做的更接近的数据进行的比较：

```
set.seed(1)
N  <-110
d1 <- matrix(rpois(N^2,lambda = 1000), N)
d2 <- matrix(rpois(N^2,lambda = 1500), N)
e1 <- matrix(rpois(N^2,lambda = 10000), N)
e2 <- matrix(rpois(N^2,lambda = 25000), N)

system.time(exact.binom.minlike.stripped.2(d1, d2, e1, e2))
   user  system elapsed 
 16.353   1.112  17.635
system.time(exact.binom.minlike.stripped.3(d1, d2, e1, e2))
   user  system elapsed 
 14.685   0.016  14.715 
system.time({
        (p.vals <- exact.binom.minlike.stripped(d1, d2, e1, e2))
        (dim(p.vals) <- dim(d1))
    })
   user  system elapsed 
 12.541   0.040  12.604 
```

在这些过程中，我观察了我的系统监视器的内存使用情况，而且只是`exact.binom.minlike.stripped.2()`内存占用。我看到如果我在我的真实数据上使用它`max(n)`，我的电脑会阻塞 10-20 倍。(3) 没有 avthis 问题，但由于某种原因它不如`exact.binom.minlike.stripped()`. 编译 (3) 并没有使它在我的系统上运行得更快。

[[Edit 2]]：在相同的数据上，Pete's new`exact.binom.minlike.stripped3()`的工作如下：

```
 user  system elapsed 
  6.468   0.032   6.513 
```

因此，后期的策略，预先计算 的对数阶乘`max(n)`，是一个主要的节省时间的方法。非常感谢皮特！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:50:01.240

我可以想到两个需要像这样矢量化的函数的原因：方便或性能。

以下应该为方便起见，但我怀疑如果`max(n)`非常大，那么所有内存分配将抵消`dbinom`调用矢量化带来的任何收益。

```
exact.binom.minlike.stripped.2 <- function(d1, d2, e1, e2, relErr = 1 + 1e-7) {

    x <- round(d1)
    n <- x + round(d2)
    p <- e1 / (e1 + e2)

    # `binom` is already vectorised.
    d <- dbinom(x, n, p)

    # rearrange inputs to `dbinom` so that it works with `outer`.
    dbinom.rearrange <- function(n, x, p) dbinom(x, n, p) 
    support <- 0:max(n)
    f <- outer(n, support, dbinom.rearrange, p=p)

    # repeat `d` enough times to conform with `f`.
    d <- array(d, dim(f))
    f[f > d * relErr] <- 0

    # extract the required sums.
    apply(f, c(1,2), sum) 
} 
```

* * *

或者，一种可能更明智的方法：尽可能使用自然矢量化，并限制`Vectorize`在“不自然”部分。这仍然需要在最后修复尺寸。

```
vector.f <- Vectorize(function(d, n, p, ftable) {

    x <- 0:n
    f <- exp( ftable[n+1] - (ftable[x+1] + ftable[n-x+1]) + x*log(p) + (n-x)*log(1-p) )
    sum(f[f <= d])

}, c('d', 'n', 'p'))

exact.binom.minlike.stripped.3 <- function(d1, d2, e1, e2, relErr = 1 + 1e-7) {

    x <- round(d1)
    n <- x + round(d2)
    p <- e1 / (e1 + e2)

    # `binom` is already vectorised.
    d <- dbinom(x, n, p)

    # precompute factorials
    ftable <- lfactorial(0:max(n))

    f <- vector.f(d * relErr, n, p, ftable)
    dim(f) <- dim(d1)

    return(f)
} 
```

对于您的示例，这两种方法在我的笔记本电脑上的速度大致相同，尽管根据您的问题和硬件的实际大小，其中一种可能更快。

# mongoose - Mongoose $or 使用 $and 条件查询条件

> ID：13433494
> 
> 赞同：2
> 
> 时间：2012-11-17T18:31:06.313
> 
> 标签：mongoose

我试图让这个简单的查询与 Mongoose 一起工作，但没有运气：**找到明天在会议中心发生的所有事件**。对于每个事件，时间表可以是日期类型的特定开始时间，也可以是字符串格式“2012/11/16”的日期数组。但是，当 {place:'conference center'} 没有条件时，相同的 query.or 条件仍然有效，所以我认为我可能会错误地编写此查询。到目前为止我没有运气，请提供建议/帮助？“明天”条件是添加到“地点”条件的过滤器，所以我使用查询链接。

谢谢！

```
 Event.find({place:'conference center'}).or([
      { 
        'schedule.beginAtUtc' : { $gte: startOfTomorrow },
        'schedule.beginAtUtc' : { $lt: endOfTomorrow }
      },

      {
        'schedule.dates' : '2012/11/17'
      }
    ]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:43:27.190

您必须将这两个`'schedule.beginAtUtc'`字段合并为一个，因为一个对象不能有两个同名的字段。

像这样：

```
Event.find({place:'conference center'}).or([
  { 
    'schedule.beginAtUtc' : { $gte: startOfTomorrow, $lt: endOfTomorrow }
  },

  {
    'schedule.dates' : '2012/11/17'
  }
]); 
```

# python - 创建带有 indexerror 的 if 语句 - Python

> ID：13433498
> 
> 赞同：2
> 
> 时间：2012-11-17T18:31:41.700
> 
> 标签：python, if-statement

我正在尝试创建一个类似于蛇的游戏。不同之处在于通过使用 randint 获得食物配给，然后玩家将能够选择蛇应该向哪个方向生长，起始位置也是随机选择的。游戏场是用矩阵构建的，因此可以通过选择使列表超出范围的增长方向来“陷入困境”。

我的问题是，如果玩家选择以使列表超出范围的方式增长，是否可以创建一个 if 语句以“游戏结束”结束游戏，例如：

```
if IndexError: list index out of range : 
         print("Game over") 
```

通过异常处理，我的代码看起来像这样：

```
 try :

    if p == 0:
        table[x][y] = "+"
    elif p == 1:
        table[x][y] = "+"
        table[x][y+1] = "+"
    elif p == 2:
        table[x][y] = "+"
        table[x][y+1] = "+"
        table[x][y+2] = "+"
    else:
        table[x][y] = "+"
        table[x][y+1] = "+"
        table[x][y+2] = "+"
        table[x][y+3] = "+"
 except IndexError :
                 print ("Game Over") 
```

但我收到错误“未缩进与任何外部缩进级别不匹配”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T18:33:31.463

使用[异常处理](http://docs.python.org/2/tutorial/errors.html#errors-and-exceptions)：

```
 try :
     #your code
 except IndexError:
    print "Game Over" 
```

# asp.net - Visual Studio 网站项目（不是 Web 应用程序）支持

> ID：13433505
> 
> 赞同：0
> 
> 时间：2012-11-17T18:32:10.010
> 
> 标签：asp.net, .net, visual-studio-2010, web-site-project

我刚刚意识到我在 Visual Studio 2010 (Visual C# > Web) 中看不到网站项目模板。

我希望看到网站死掉（有很多原因，主要是没有用于 msbuild 的 .proj）。这真的发生了吗？VS 2010-2012 是否放弃了对网站的支持？是否有官方公告确认（我看过）？

* * *

对使用网站模板的任何项目感到羞耻。顺便说一句，您是否看到任何“产品”作为网站开箱即用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:56:54.220

实际上网站不是项目。当您转到 File -> New 时，您可以在项目和网站之间进行选择。在 VS 2010 和 2012 中也是如此。

实际上，我认为该网站非常适合小型和简单的网站。

# c# - 将两个字符串数组添加到一个 ListView 列

> ID：13433511
> 
> 赞同：-1
> 
> 时间：2012-11-17T18:32:55.200
> 
> 标签：c#, arrays, winforms, listview

我试图只写入 listView （一个子项）的一列，但我想要它，所以我可以通过它运行两个数组，而不仅仅是一个数组。

当我尝试这样做时，它会将其添加到 listView 中的下一列（不是我希望它写入的列）。

例如，这会将数组添加到不同的列，而不是所有列都添加到同一列：

```
 string[] k = getBetweenAll(thepage, "<h4 style=\"padding:0 0 0 3px;\"><a href=\"", "\" target=\"_blank\">");
 string[] q = getBetweenAll(thepage, "<h4><a href=\"", "\" target=\"_blank\">");
 for (int i = 0; i < k.Length && i < listViewClickbank.Items.Count; i++)
 {

     listViewClickbank.Items[i].SubItems.Add(input + k[i]);
     listViewClickbank.Items[i].SubItems.Add(input + q[i]);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:38:52.787

从您的问题中不清楚您正在寻找什么结果，但是如果您希望将两个值连接在一起成为一行的一列，请执行以下操作：

```
listViewClickbank.Items[i].SubItems.Add(input + k[i] + q[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:42:09.780

在将两个数组添加到列表视图之前连接它们。

```
var z = new string[k.Length + q.Length];
k.CopyTo(z, 0);
q.CopyTo(z, k.Length);

//TODO: Add z to the listview 
```

或者你可以不串联

```
 for (int i = 0; i < k.Length + q.Length; i++)
 {
     if (i < k.Length) {
         Items.SubItems.Add(input + k[i]);
     } else {
         Items.SubItems.Add(input + q[i - k.Length]);
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T18:42:29.787

试试这个：

```
 string[] k = getBetweenAll(thepage, "<h4 style=\"padding:0 0 0 3px;\"><a href=\"", "\" target=\"_blank\">");
     string[] q = getBetweenAll(thepage, "<h4><a href=\"", "\" target=\"_blank\">");
     var items = listViewClickbank.Items;

     var z = new int[k.Length + q.Length]; 
     k.CopyTo(z, 0);
     q.CopyTo(z, k.Length);

     for (int i = 0; i < z.Length; i++)
     {
         Items.SubItems.Add(input + z[i]);
     } 
```

# c - 可以这样初始化二维数组吗？

> ID：13433512
> 
> 赞同：0
> 
> 时间：2012-11-17T18:32:59.943
> 
> 标签：c, matrix

```
/* Initialize matrix with values from 0 to N*N.  */
void
init_matrix_seq (unsigned N, float * m)
{
    unsigned i;

    for (i = 0; i < N*N; ++i)
        m[i] = (float) i;
} 
```

我的意思是，看起来一个循环被用来在一维中遍历 N*N 个元素。这在 C 中是否可能，而不需要另一个循环来循环遍历列？

编辑：

初始化二维数组并调用此函数的代码如下所示：

```
 A = (float *) malloc (N * N * sizeof (float));
  B = (float *) malloc (N * N * sizeof (float));

  init_matrix (N, A, 1.0);
  init_matrix (N, B, 1.0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:49:58.057

如果您只想将它​​们全部设置为某个初始值，那么可以，使用单个 1D 索引，如下所示：

```
void init_matrix(unsigned N, float m[], float init_val)
{
    unsigned i;
    for (i = 0; i < N*N; ++i)
        m[i] = init_val;
} 
```

您的顺序初始化将与您的问题完全相同：

```
void init_matrix_seq(unsigned N, float m[])
{
    unsigned i;
    for (i = 0; i < N*N; ++i)
        m[i] = i;
} 
```

如果您有需要命中位置的特定值，`m[i][j]`那么在 C 中，您可以通过正式的行宽访问：

```
void init_matrix_seq (unsigned N, float m[][N])
{
    unsigned i,j;

    for (i = 0; i < N; ++i)
        for (j = 0; j < N; ++j)
        {
            m[i][j] = i*j; // <<your initial value here>>;
        }
} 
```

如果您想将其作为单个线性阵列访问，您当然可以。以下实现了与上面相同的结果（假设它是 N*N 浮点宽）。

```
void init_matrix_seq (unsigned N, float m[])
{
    unsigned i,j;

    for (i = 0; i < N; ++i)
        for (j = 0; j < N; ++j)
        {
            m[i*N+j] = i*j; // <<your initial value here>>;
        }
} 
```

后一个示例具有在 C 和 C++ 中工作的优点，前者只能在 C 中工作（最后我检查过，无论如何）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:59:27.777

答案是肯定的，但是你不能使用双索引，如果你想索引一个元素，你可能会遇到问题，而不是 A[i][j]，你必须调用 A[i*N+j]。
如果要使用双索引并在内存中全部相邻，则以这种方式分配数组：

```
float (*A) [N]= (float (*)[N] ) malloc(N*sizeof(float[N]) ); 
```

现在你已经在内存中拥有了所有相邻的，你可以使用你写的函数。但是你也可以使用双索引：

```
for(int i=0; i<N; i++)
    for(int j=0; j<N; j++)
        A[i][j]=i*N+j; 
```

但是你的方法是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:40:57.273

你是对的; `m`是一维数组。有时，人们会通过将每一行分配给一维数组的一部分来使用一维数组来代替二维数组（为了稍微提高速度）。我不建议这样做，因为它会损害可读性，而且速度提升也不是微不足道的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T18:48:34.580

这个示例程序告诉你使用一维数组作为二维数组的方法

```
#include <stdio.h>
#define rows 4
#define cols 6

int main()
{
    int array1D[rows * cols] = 
         { 1, 2, 3, 4, 5, 6,
           7, 8, 9, 10, 11, 12,
           13, 14, 15, 16, 17, 18,
           19, 20, 21, 22, 23, 24 };

    int (*array2D)[cols] = (int (*)[cols]) array1D;
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < cols; j++) {
            printf("%d ", array2D[i][j] );
        }
        printf("\n");
    }
 } 
```

# python - 如何使用 Python GTK3 (gi.repository) gdk_event_get_scroll_deltas() 方法

> ID：13433520
> 
> 赞同：3
> 
> 时间：2012-11-17T18:33:46.593
> 
> 标签：python, gtk, pygtk, gtk3, pygobject

我正在尝试将 Python 程序从 GTK2 移植到 GTK3。

我了解 GDK_SMOOTH_SCROLL_MASK 的使用，但找不到对[gdk_event_get_scroll_deltas()](http://developer.gnome.org/gdk3/3.4/gdk3-Events.html#gdk-event-get-scroll-deltas)实现的参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T19:40:07.713

它应该在 Gdk.Event.get_scroll_deltas 中。如果没有，您应该检查您的库版本。

```
eric@hum:():~$ python3
Python 3.2.3 (default, Jun 25 2012, 23:10:56) 
[GCC 4.7.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from gi.repository import Gdk
>>> "get_scroll_deltas" in dir(Gdk.Event)
True 
```

# android - Android 4.2 破解了我的加密/解密代码并且提供的解决方案不起作用

> ID：13433529
> 
> 赞同：36
> 
> 时间：2012-11-17T18:35:10.587
> 
> 标签：android, cryptography, bouncycastle

首先，我已经看到 [Android 4.2 在 Android 4.2 上破坏了我的 AES 加密/解密代码](https://stackoverflow.com/questions/13389870/android-4-2-broke-my-aes-encrypt-decrypt-code) 和 [加密错误](https://stackoverflow.com/questions/13383006/encryption-error-on-android-4-2) 以及提供的解决方案：

```
SecureRandom sr = null;
if (android.os.Build.VERSION.SDK_INT >= JELLY_BEAN_4_2) {
    sr = SecureRandom.getInstance("SHA1PRNG", "Crypto");
} else {
    sr = SecureRandom.getInstance("SHA1PRNG");
} 
```

对我不起作用，因为在 Android 4.2 中解码 Android<4.2 中加密的数据时，我得到：

```
javax.crypto.BadPaddingException: pad block corrupted
at com.android.org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher.engineDoFinal(BaseBlockCipher.java:709) 
```

我的代码非常简单，并且一直工作到 Android 4.2：

```
public static byte[] encrypt(byte[] data, String seed) throws Exception {

    KeyGenerator keygen = KeyGenerator.getInstance("AES");
    SecureRandom secrand = SecureRandom.getInstance("SHA1PRNG");
    secrand.setSeed(seed.getBytes());
    keygen.init(128, secrand);

    SecretKey seckey = keygen.generateKey();
    byte[] rawKey = seckey.getEncoded();

    SecretKeySpec skeySpec = new SecretKeySpec(rawKey, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    return cipher.doFinal(data);
}

public static byte[] decrypt(byte[] data, String seed) throws Exception {

    KeyGenerator keygen = KeyGenerator.getInstance("AES");
    SecureRandom secrand = SecureRandom.getInstance("SHA1PRNG");
    secrand.setSeed(seed.getBytes());
    keygen.init(128, secrand);

    SecretKey seckey = keygen.generateKey();
    byte[] rawKey = seckey.getEncoded();

    SecretKeySpec skeySpec = new SecretKeySpec(rawKey, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    return cipher.doFinal(data);
} 
```

我的猜测是默认提供程序并不是 Android 4.2 中唯一改变的东西，否则我的代码将适用于建议的解决方案。

我的代码基于很久以前在 StackOverflow 上找到的一些帖子；我看到它与提到的帖子不同，因为它只是加密和解密字节数组，而其他解决方案加密和解密字符串（我认为是 HEX 字符串）。

跟种子有关系吗？它是否有最小/最大长度、字符限制等？

任何想法/解决方案？

**编辑**：经过大量测试，我发现有两个问题：

1.  在 Android 4.2 (API 17) 中更改了提供程序-> 这个很容易修复，只需应用我在帖子顶部提到的解决方案

2.  BouncyCastle 在 Android 2.2 (API 8)->Android2.3 (API 9) 中从 1.34 更改为 1.45，所以我之前讲的解密问题和这里描述的一样：[BouncyCastle AES error when upgrade to 1.45](https://stackoverflow.com/questions/4405334/bouncycastle-aes-error-when-upgrading-to-1-45)

所以现在的问题是：**有没有办法在 BouncyCastle 1.45+ 中恢复在 BouncyCastle 1.34 中加密的数据？**

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-18T08:26:19.230

首先是免责声明：

***永远*不要*`SecureRandom`用于派生密钥！这是破碎的，没有意义！***

 *问题中的以下代码块尝试从密码中确定性地派生密钥，称为“种子”，因为密码用于“种子”随机数生成器。

```
KeyGenerator keygen = KeyGenerator.getInstance("AES");
SecureRandom secrand = SecureRandom.getInstance("SHA1PRNG");
secrand.setSeed(seed.getBytes());
keygen.init(128, secrand);
SecretKey seckey = keygen.generateKey(); 
```

但是，该`"SHA1PRNG"`算法没有很好地定义，结果`"SHA1PRNG"`可能会返回不同的甚至*完全随机*的密钥。

* * *

如果您正在从磁盘读取 AES 密钥，只需存储实际密钥，不要经历这种奇怪的舞蹈。您可以`SecretKey`通过执行以下操作从字节中获取 AES 用法：

```
 SecretKey key = new SecretKeySpec(keyBytes, "AES"); 
```

如果您使用密码来派生密钥，请遵循 [Nelenkov 的优秀教程](http://nelenkov.blogspot.com/2012/04/using-password-based-encryption-on.html)，并注意一个好的经验法则是盐大小应该与密钥输出的大小相同。

（`iterationCount`工作系数）当然会发生变化，并且应该随着 CPU 功率的提高而变化——通常建议不要低于 2018 年的 40 到 100K。请注意 PBKDF2 只会增加猜测密码的恒定时间延迟；它不能替代真正弱密码。

它看起来像这样：

```
 /* User types in their password: */
    String password = "password";

    /* Store these things on disk used to derive key later: */
    int iterationCount = 1000;
    int saltLength = 32; // bytes; should be the same size as the output (256 / 8 = 32)
    int keyLength = 256; // 256-bits for AES-256, 128-bits for AES-128, etc
    byte[] salt; // Should be of saltLength

    /* When first creating the key, obtain a salt with this: */
    SecureRandom random = new SecureRandom();
    byte[] salt = new byte[saltLength];
    random.nextBytes(salt);

    /* Use this to derive the key from the password: */
    KeySpec keySpec = new PBEKeySpec(password.toCharArray(), salt,
                iterationCount, keyLength);
    SecretKeyFactory keyFactory = SecretKeyFactory
                .getInstance("PBKDF2WithHmacSHA1");
    byte[] keyBytes = keyFactory.generateSecret(keySpec).getEncoded();
    SecretKey key = new SecretKeySpec(keyBytes, "AES"); 
```

而已。任何其他你不应该使用的东西。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-17T17:34:22.080

```
private static final int ITERATION_COUNT = 1000;
private static final int KEY_LENGTH = 256;
private static final String PBKDF2_DERIVATION_ALGORITHM = "PBKDF2WithHmacSHA1";
private static final String CIPHER_ALGORITHM = "AES/CBC/PKCS5Padding";
private static final int PKCS5_SALT_LENGTH = 32;
private static final String DELIMITER = "]";
private static final SecureRandom random = new SecureRandom();

public static String encrypt(String plaintext, String password) {
    byte[] salt  = generateSalt();
    SecretKey key = deriveKey(password, salt);

    try {
        Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM);
        byte[] iv = generateIv(cipher.getBlockSize());
        IvParameterSpec ivParams = new IvParameterSpec(iv);
        cipher.init(Cipher.ENCRYPT_MODE, key, ivParams);
        byte[] cipherText = cipher.doFinal(plaintext.getBytes("UTF-8"));

        if(salt != null) {
            return String.format("%s%s%s%s%s",
                    toBase64(salt),
                    DELIMITER,
                    toBase64(iv),
                    DELIMITER,
                    toBase64(cipherText));
        }

        return String.format("%s%s%s",
                toBase64(iv),
                DELIMITER,
                toBase64(cipherText));
    } catch (GeneralSecurityException e) {
        throw new RuntimeException(e);
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    }
}

public static String decrypt(String ciphertext, String password) {
    String[] fields = ciphertext.split(DELIMITER);
    if(fields.length != 3) {
        throw new IllegalArgumentException("Invalid encypted text format");
    }
    byte[] salt        = fromBase64(fields[0]);
    byte[] iv          = fromBase64(fields[1]);
    byte[] cipherBytes = fromBase64(fields[2]);
    SecretKey key = deriveKey(password, salt);

    try {
        Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM);
        IvParameterSpec ivParams = new IvParameterSpec(iv);
        cipher.init(Cipher.DECRYPT_MODE, key, ivParams);
        byte[] plaintext = cipher.doFinal(cipherBytes);
        return new String(plaintext, "UTF-8");
    } catch (GeneralSecurityException e) {
        throw new RuntimeException(e);
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    }
}

private static byte[] generateSalt() {
    byte[] b = new byte[PKCS5_SALT_LENGTH];
    random.nextBytes(b);
    return b;
}

private static byte[] generateIv(int length) {
    byte[] b = new byte[length];
    random.nextBytes(b);
    return b;
}

private static SecretKey deriveKey(String password, byte[] salt) {
    try {
        KeySpec keySpec = new PBEKeySpec(password.toCharArray(), salt, ITERATION_COUNT, KEY_LENGTH);
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(PBKDF2_DERIVATION_ALGORITHM);
        byte[] keyBytes = keyFactory.generateSecret(keySpec).getEncoded();
        return new SecretKeySpec(keyBytes, "AES");
    } catch (GeneralSecurityException e) {
        throw new RuntimeException(e);
    }
}

private static String toBase64(byte[] bytes) {
    return Base64.encodeToString(bytes, Base64.NO_WRAP);
}

private static byte[] fromBase64(String base64) {
    return Base64.decode(base64, Base64.NO_WRAP);
} 
```

[资源](https://github.com/pasha656/Crypto)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-07T14:30:45.667

The problem is that *with the new provider*, the following snippet of code

```
KeyGenerator keygen = KeyGenerator.getInstance("AES");
SecureRandom secrand = SecureRandom.getInstance("SHA1PRNG");
secrand.setSeed(seed.getBytes());
keygen.init(128, secrand);
SecretKey seckey = keygen.generateKey();
byte[] rawKey = seckey.getEncoded(); 
```

generates a different, genuinely random `rawKey` every time it's executed. So, you're trying to decrypt with a key different from the one used to encrypt data and you get the exception. *You won't be able to recover your key or data when it has been generated this way, and only the seed has been saved*.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-06T18:45:33.293

为我解决的问题（正如@Giorgio[建议](https://stackoverflow.com/questions/13433529/android-4-2-broke-my-encrypt-decrypt-code-and-the-provided-solutions-dont-work#comment25786620_13765091)的那样）只是**替换了这个**：

```
SecureRandom secrand = SecureRandom.getInstance("SHA1PRNG"); 
```

**有了这个**：

```
SecureRandom secrand = SecureRandom.getInstance("SHA1PRNG", "Crypto"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T13:04:17.540

因为所有这些都没有帮助我生成一个在所有 android 设备上都是确定性的加密密码（>=2.1），所以我搜索了另一个 AES 实现。我找到了一个适用于所有设备的设备。我不是安全专家，因此如果技术不够安全，请不要对我的回答投反对票。我只是为那些遇到过我以前遇到过的同样问题的人发布代码。

```
import java.security.GeneralSecurityException;
import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
import android.util.Log;

public class EncodeDecodeAES {

    private static final String TAG_DEBUG = "TAG";
    private IvParameterSpec ivspec;
    private SecretKeySpec keyspec;
    private Cipher cipher;

    private String iv = "fedcba9876543210";//Dummy iv (CHANGE IT!)
    private String SecretKey = "0123456789abcdef";//Dummy secretKey (CHANGE IT!)

    public EncodeDecodeAES() {
        ivspec = new IvParameterSpec(iv.getBytes());

        keyspec = new SecretKeySpec(SecretKey.getBytes(), "AES");

        try {
            cipher = Cipher.getInstance("AES/CBC/NoPadding");
        } catch (GeneralSecurityException e) {
            Log.d(TAG_DEBUG, e.getMessage());
        }
    }

    public byte[] encrypt(String text) throws Exception {
        if (text == null || text.length() == 0)
            throw new Exception("Empty string");

        byte[] encrypted = null;

        try {
            cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);

            encrypted = cipher.doFinal(padString(text).getBytes());
        } catch (Exception e) {
            Log.d(TAG_DEBUG, e.getMessage());
            throw new Exception("[encrypt] " + e.getMessage());
        }

        return encrypted;
    }

    public byte[] decrypt(String code) throws Exception {
        if (code == null || code.length() == 0)
            throw new Exception("Empty string");

        byte[] decrypted = null;

        try {
            cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

            decrypted = cipher.doFinal(hexToBytes(code));
        } catch (Exception e) {
            Log.d(TAG_DEBUG, e.getMessage());
            throw new Exception("[decrypt] " + e.getMessage());
        }
        return decrypted;
    }

    public static String bytesToHex(byte[] data) {
        if (data == null) {
            return null;
        }

        int len = data.length;
        String str = "";
        for (int i = 0; i < len; i++) {
            if ((data[i] & 0xFF) < 16)
                str = str + "0" + java.lang.Integer.toHexString(data[i] & 0xFF);
            else
                str = str + java.lang.Integer.toHexString(data[i] & 0xFF);
        }
        return str;
    }

    public static byte[] hexToBytes(String str) {
        if (str == null) {
            return null;
        } else if (str.length() < 2) {
            return null;
        } else {
            int len = str.length() / 2;
            byte[] buffer = new byte[len];
            for (int i = 0; i < len; i++) {
                buffer[i] = (byte) Integer.parseInt(str.substring(i * 2, i * 2 + 2), 16);
            }
            return buffer;
        }
    }

    private static String padString(String source) {
        char paddingChar = ' ';
        int size = 16;
        int x = source.length() % size;
        int padLength = size - x;

        for (int i = 0; i < padLength; i++) {
            source += paddingChar;
        }

        return source;
    }
} 
```

你可以像这样使用它：

```
EncodeDecodeAES aes = new EncodeDecodeAES ();
/* Encrypt */
String encrypted = EncodeDecodeAES.bytesToHex(aes.encrypt("Text to Encrypt"));
/* Decrypt */
String decrypted = new String(aes.decrypt(encrypted)); 
```

来源：[这里](http://www.androidsnippets.com/encrypt-decrypt-between-android-and-php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T18:39:59.553

我无法回答您提出的问题，但我只是尝试解决这个问题>-如果您在跨设备/操作系统版本时遇到一些 bouncycastle 问题，您应该完全放弃内置版本，而是将 bouncycastle 添加为 jar到你的项目，改变你`import`指向那个 jar，重建并假设它一切正常，你将从现在开始不受 android 内置版本更改的影响。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-18T12:23:10.677

它确实与种子有关，它也应该使用 8 的倍数（如 8、16、24 或 32），尝试用 A 和 B 或 1 和 0 完成种子（必须是这样的 ABAB.. ..，因为 AAA.. 或 BBB.. 也不起作用。）最多达到 8 的倍数。如果您仅读取和加密字节，还有另一件事（没有像我那样将其转换为 Char64），那么您需要适当的 PKCS5 或 PKCS7 填充，但是在您的情况下（由于只有 128 位，并且它是用较旧的Android 版本）PKCS5 就足够了，尽管你也应该把它放在你的 SecreteKeySpec 中，比如*“AES/CBC/PKCS5Padding”*或*“AES/ECB/PKCS5Padding”*而不仅仅是“AES”，因为 Android 4.2 它使用 PKCS7Padding 作为默认值，如果它只是字节，你真的需要与之前默认的相同算法。尝试使用低于 4.2 的 Android 设备检查“ **keygen.init(128, secrand);** ”上的对象树，如果我没记错的话，它有标签*cipher*，然后使用它。试试看。*

# xml - 必须为 JSP/Servlet 项目的 web.xml 文件发布格式正确的 XML

> ID：13433534
> 
> 赞同：0
> 
> 时间：2012-11-17T18:35:26.823
> 
> 标签：xml, jsp, servlets, web.xml

从 Eclipse 获取以下错误。*“必须格式*正确”是什么意思？xml中有错误吗？

> 文档中根元素之后的标记必须格式正确

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<display-name>...</display-name>
<servlet>     
    <servlet-name>action</servlet-name>  
      <servlet-class>...</servlet-class> 
        <init-param>        
        <param-name>config</param-name> 
        <param-value>/WEB-INF/struts-config.xml</param-value>   
        </init-param>     
       <load-on-startup>1</load-on-startup> 
 </servlet>
 <servlet-mapping>  
          <servlet-name>action</servlet-name> 
          <url-pattern>*.do</url-pattern>
 </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:44:36.823

基本上，当您的标签未正确嵌套/未正确关闭时，会发生什么格式错误。这对您来说似乎是最有可能的情况，因为您的 xml 中已经有内容。字符 < > & 需要在 XML 文本中进行转义。

将您的文件上传到 - [http://www.cogsci.ed.ac.uk/~richard/xml-check.html](http://www.cogsci.ed.ac.uk/~richard/xml-check.html) 以查看格式正确的错误。

将您的 XML 更改为：

```
 <?xml version="1.0" encoding="UTF-8"?>
        <web-app>
        <display-name>...</display-name>
        <servlet>     
            <servlet-name>action</servlet-name>  
              <servlet-class>...</servlet-class> 
                <init-param>        
                <param-name>config</param-name> 
                <param-value>/WEB-INF/struts-config.xml</param-value>   
                </init-param>     
               <load-on-startup>1</load-on-startup> 
         </servlet>
         <servlet-mapping>  
                  <servlet-name>action</servlet-name> 
                  <url-pattern>*.do</url-pattern>
         </servlet-mapping>
        </web-app> 
```

# java-me - 在诺基亚 s40 中使用 RMS 时出现 IllegalArgumentException

> ID：13433535
> 
> 赞同：1
> 
> 时间：2012-11-17T18:35:47.910
> 
> 标签：java-me, rms, nokia-s40

我正在开发一个在 RMS 中存储用户名和密码的应用程序，该应用程序在诺基亚 s60 上运行良好，但在诺基亚 s40 手机中，应用程序给出 IllegalArgumentException，然后应用程序关闭。如果它在 S60 手机上工作正常，我无法理解有什么问题。

```
 public void getLogin() {

    //System.out.println(getUsernameEdit().getString()+","+ getPasswordEdit().getString());

            m=new Message();
            reply=m.getLogin(getUsernameEdit().getString(), getPasswordEdit().getString());

    if (reply) {
        String response="";
        try{
            if(count==0){
                rs = RecordStore.openRecordStore(db, true);
                rs.addRecord("true".getBytes(), 0, "true".length());               
                rs.addRecord(getUsernameEdit().getString().getBytes(), 0, getUsernameEdit().getString().length());
                rs.addRecord(getPasswordEdit().getString().getBytes(), 0, getPasswordEdit().getString().length());
                rs.closeRecordStore();
            }
            else{
                rs = RecordStore.openRecordStore(db, false);
                byte b[]=rs.getRecord(1);
                response=new String(b,0,b.length);
                System.out.println(response);
                if(response.equals("true")){
                rs.setRecord(2, getUsernameEdit().getString().getBytes(), 0, getUsernameEdit().getString().length());
                rs.setRecord(3, getPasswordEdit().getString().getBytes(), 0, getPasswordEdit().getString().length());
            }
                rs.closeRecordStore();
                getSenderEdit().setString(getUsernameEdit().getString());
            }
        }catch(Exception e){
                getErrorBox().setString(e.toString());
        }
        switchDisplayable(getSavingSuccess(), getMessageForm());
        // write post-action user code here
    } else {
        // write pre-action user code here
        switchDisplayable(getSavingError(), getSettings());
        // write post-action user code here
    }
    // enter post-if user code here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:47:53.293

为什么不尝试使用 Storage 类？是lwuit中RMS的演变吗

# objective-c - UILabel 的连续动画

> ID：13433536
> 
> 赞同：0
> 
> 时间：2012-11-17T18:35:49.003
> 
> 标签：objective-c, ios

您如何将 UILabel 连续动画到屏幕上的四个固定点？

# c++ - 多个进程将元素推送到列表 STL C++

> ID：13433538
> 
> 赞同：1
> 
> 时间：2012-11-17T18:35:54.983
> 
> 标签：c++, concurrency, stl, multiple-processes

我有多个预先分叉的服务器进程，它们接受修改服务器上共享 STL C++ 列表的请求。每个进程只是在列表末尾推送一个新元素并返回迭代器。

我不确定每个进程应该如何尝试获取列表上的锁定？它应该在整个对象上还是 STL 列表能够处理并发，因为我们只是在列表末尾推送一个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:02:32.823

假设您的意思是*线程*而不是*进程*，您可以共享 STL 容器，但您需要注意同步。STL 容器在某种程度上是线程安全的，但您需要了解给出的线程安全保证：

1.  一个容器可以被多个阅读器同时使用。
2.  如果一个容器有一个写者，则既不能有并发读者，也不能有并发写者。
3.  保证是针对每个容器的，即线程可以同时使用不同的容器，而无需它们之间的同步。

这些限制的原因是容器的接口是为了在一个线程中高效使用而设计的，并且您不希望阻碍具有跨线程共享潜力的非共享容器的处理。此外，容器接口不适用于任何类型的容器维护并发机制。例如，仅仅因为`v.empty()`刚刚返回`false`它并不意味着它`v.pop()`可以工作，因为容器现在可以是空的：如果有内部同步，任何锁都会在`empty()`返回后被释放，并且容器可以在`pop()`调用时更改。

创建用于不同线程之间通信的队列相对容易。它将使用一个`std::mutex`和一个合适的实例化`std::condition_variable`. 我认为有类似的东西被提议包含在标准中，但它还不是标准 C++ 库的一部分。但是请注意，这样的类**不会**将迭代器返回到插入的元素，因为当您访问它时，该元素可能会再次消失，并且无论如何使用迭代器是有问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:50:55.003

标准库容器不提供针对并发修改的自动保护，因此每次访问队列都需要全局锁。

您甚至必须小心迭代器或对列表元素的引用，因为您可能不一定知道相应元素何时从列表中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:09:29.913

在多个进程之间进行这种同步的机制需要开发人员处理几个问题。首先，进程之间共享的任何内容都需要在它们之外进行设置。这在实践中通常意味着使用`shared memory`.

然后这些进程需要相互通信以访问共享的内存。毕竟，如果一个线程开始处理正在共享的数据结构，但在完成操作之前被换出，它将导致数据不一致。

这种同步可以使用操作系统结构（如 linux 中的信号量）来完成，并允许竞争进程进行协调。

有关[基于 linux 的 IPC 详细信息](http://www.tldp.org/LDP/tlk/ipc/ipc.html)， 请参阅[此内容 有关基于 Windows 的 IPC 详细信息，请参阅此内容](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)

对于一些参考，您可以使用提供独立于平台的 IPC 机制实现的`Boost.Interprocess` [文档。](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess.html)

# linux - 正确编码为“application/x-www-form-urlencoded”

> ID：13433539
> 
> 赞同：4
> 
> 时间：2012-11-17T18:35:55.180
> 
> 标签：linux, http, post, curl

Debian 命令行工具`curl`似乎无法对*application/x-www-form-urlencoded*执行兼容的数据编码。

从`man curl`我得到以下编码选项列表：

**选项：**                                        **目的：**

```
-d/--data <data>            send non-encoded data as x-www-form-urlencoded
--data-binary <data>        send raw data as x-www-form-urlencoded
--data-urlencode <data>     send url-encoded data as x-www-form-urlencoded
-F/--form <name=content>    send data as multipart/form-data 
```

由于编码`urlencode`不同`x-www-form-urlencoded`的原因有很多，比如空间的编码，`%20`对于前者和`+`后者，可以`curl`执行兼容的`x-www-form-urlencoded`编码吗？

# sql-server - 正则表达式或条件

> ID：13433544
> 
> 赞同：-3
> 
> 时间：2012-11-17T18:36:15.183
> 
> 标签：sql-server, regex

我们可以对这四个条件使用一个正则表达式吗？

```
select * from ExceEnt where 
   FirstName Like @name+'[ ]%' 
or FirstName=@name 
or FirstName Like'%[ ]'+@name
or FirstName Like'%[ ]'+@name+'[ ]%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:53:51.647

可能是我不完全理解你，但我希望你需要一个表达式，它可以完全匹配它的一部分，以`data`你请求搜索的开头或结尾。

我建议您查看**PATINDEX** ( [MSDN](http://msdn.microsoft.com/en-us/library/ms188395.aspx) ) 方法来合并以上四个以显示为一个实体。

检查这个例子：（这可以帮助你找出你的问题）

```
--Drop table if table already exists 
if exists(select * from sys.tables where object_id=object_id('ExceEnt'))
drop table ExceEnt
GO

--Create table
create table ExceEnt
(
  FirstName varchar(200) NULL
)
GO

--Insert some data
insert into ExceEnt values('Never')
insert into ExceEnt values('Hopeless')
insert into ExceEnt values('NeverHopeless')
insert into ExceEnt values('As the name says NeverHopeless')
insert into ExceEnt values('Exclude others')
insert into ExceEnt values('Exclude this one too')

--Here use PATINDEX to find desired result
select * from ExceEnt where patindex('%Hopeless%',FirstName)>0 
```

上面的脚本生成以下结果：

![在此处输入图像描述](../Images/b9d5ee173a1885f85891ecabc9e4a3ac.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T06:24:04.030

就像您[已经被告知](https://stackoverflow.com/questions/13433544/regular-expression-or-condition#comment18363257_13433544)的那样，SQL Server 本身不支持正则表达式，一种可能的解决方案是求助于 CLR。

但是，或者，您可以将四个条件减少到只有一个，如下所示：

```
…
WHERE ' ' + FirstName + ' ' LIKE '% ' + @name + ' %'
      -- or, if you prefer: LIKE '%[ ]' + @name + '[ ]%' 
```

确实，这种情况可能会使您的查询[不可分割](http://en.wikipedia.org/wiki/Sargable "Sargable（维基百科）")，但如果您将其用作过滤器，那么您的查询无论如何都会变成不可分割的。`LIKE '%*whatever*'`

# javascript - 如何在 Cordova/PhoneGap 中关闭 console.log() 进行生产？

> ID：13433561
> 
> 赞同：2
> 
> 时间：2012-11-17T18:37:35.893
> 
> 标签：javascript, debugging, cordova, mobile

如何在 Cordova / PhoneGap 中关闭 JavaScipt console.log() 以进行生产？禁用控制台中的调试信息可能会大大加快移动应用程序的速度。

有许多方法，但似乎没有一个有效。

*   覆盖console.log - 例如，[覆盖console.log()；用于生产](https://stackoverflow.com/questions/7042611/override-console-log-for-production)

*   覆盖 Cordova DebugConsole.prototype.log - 例如，[http ://iamcam.wordpress.com/2011/07/26/quiet-the-console-phonegap-ios/](http://iamcam.wordpress.com/2011/07/26/quiet-the-console-phonegap-ios/)

任何工作示例？其他可行的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:33:59.583

正确的做法是覆盖`Debug Console`iOS 默认为`CDVDebugConsole`. 子类那个类然后做这样的事情：

```
- (void)log:(CDVInvokedUrlCommand*)command
{
    #ifdef DEBUG
        [super log:command];
    #endif
} 
```

请记住更新您`config.xml`以使用新插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:50:12.760

包装可能是一个解决方案。如果没有 3rd 方库正在使用实际的控制台，并且您只想使用 log 方法。

```
var konsole = {
    log: function () {
        if (env === 'dev') {
            console.log(arguments)
        }

    }
}

konsole.log('fff'); 
```

env 是环境变量的替代品，您可以从某种注册表中获得它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T08:10:12.547

我建议使用：[https ://github.com/sunnykgupta/jsLogger](https://github.com/sunnykgupta/jsLogger)

特征：

*   它安全地覆盖了 console.log。如果控制台不可用，请注意（哦，是的，您也需要考虑这一点。）
*   存储所有日志（即使它们被抑制）以供以后检索。
*   处理主要的控制台功能，如日志、警告、错误、信息。
*   对修改开放，每当有新建议出现时都会更新。

**免责声明：**我是插件的作者。

# mysql - 连接超时后重新连接到mysql

> ID：13433562
> 
> 赞同：1
> 
> 时间：2012-11-17T18:37:46.860
> 
> 标签：mysql, jdbc, connection-timeout

作为标准程序，MySql 连接在规定的小时数（默认值：8）不活动后丢失。要在确定此类连接丢失后重新连接到 mysql 服务器，我只需这样做`connection = DriverManager.getConnection(url, user, password);`

我没有使用连接池，并且由于之前的连接丢失相关帖子中没有提到这个技巧，这让我想知道我的代码以后是否会产生任何副作用？（我之所以这么说是因为在上面的实例之后测试了这段代码，我发现 sessionlistner 在 session.invalidate() 调用之后没有被调用。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:12:19.383

根据您处理连接对象的方式，它可能会为丢失的连接对象创建小的客户端内存泄漏。但可能这种影响会非常小，以至于您永远不会从中看到任何问题。

为了最大限度地降低这种风险，您可以`SELECT 1`在空闲时间每隔几分钟从连接中执行一些简单的操作，这样您的连接仍然被认为是活动的（除非您的客户端完全关闭）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:40:52.197

如果您的连接断开，您将丢失临时表和会话设置。听起来连接池在您的情况下很有用。

# python - 正则表达式用于在 Python 中重复出现奇数次时替换字符

> ID：13433566
> 
> 赞同：2
> 
> 时间：2012-11-17T18:38:38.783
> 
> 标签：python, regex, replace

无法获得正则表达式来替换 Python 中奇数重复出现的字符。

例子：

```
char = ``...```.....``...`....`````...` 
```

到

```
``...``````.....``...``....``````````...`` 
```

即使发生也不会取代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:44:48.653

例如：

```
>>> import re
>>> s = "`...```.....``...`....`````...`"
>>> re.sub(r'((?<!`)(``)*`(?!`))', r'\1\1', s)
'``...``````.....``...``....``````````...``' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T18:59:04.920

也许我是老式的（或者我的正则表达式技能没有达到标准），但这似乎更容易阅读：

```
import re

def double_odd(regex,string):
    """
    Look for groups that match the regex.  Double every second one.
    """
    count = [0]
    def _double(match):
        count[0] += 1
        return match.group(0) if count[0]%2 == 0 else match.group(0)*2
    return re.sub(regex,_double,string)

s = "`...```.....``...`....`````...`"
print double_odd('`',s)
print double_odd('`+',s) 
```

* * *

看来我可能对您实际寻找的内容有些困惑。根据评论，这变得更加容易：

```
def odd_repl(match):
    """
    double a match (all of the matched text) when the length of the 
    matched text is odd
    """
    g = match.group(0)
    return g*2 if len(g)%2 == 1 else g

re.sub(regex,odd_repl,your_string) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:10:26.743

这可能不如`regex`解决方案好，但有效：

```
In [101]: s1=re.findall(r'`{1,}',char)

In [102]: s2=re.findall(r'\.{1,}',char)

In [103]: fill=s1[-1] if len(s1[-1])%2==0 else s1[-1]*2

In [104]: "".join("".join((x if len(x)%2==0 else x*2,y)) for x,y in zip(s1,s2))+fill

Out[104]: '``...``````.....``...``....``````````...``' 
```

# python - 为什么打印 for 循环（整数）输出会产生语法错误，除非包装在函数中？

> ID：13433570
> 
> 赞同：3
> 
> 时间：2012-11-17T18:39:09.117
> 
> 标签：python, python-3.x

试图让人口增长模型发挥作用的新手 python 3 程序员。我遇到的问题如下所示。

在解释模式下，以下代码在打印的行上产生“无效语法”错误：

```
n = 1
for i in range(10):
    n += 1
print(n) 
```

奇怪的是，将它包装在一个函数中会产生预期的输出 (11)：

```
def function():
    n = 1
    for i in range(10):
        n += 1
    print(n)

function() 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T18:49:27.160

您需要在 for 循环之后添加一个额外的空行，以让它知道语句已完成（这仅对最外层是必需的，并且仅在解释器中是必需的）。当解释器显示`...`而不是 时`>>>`，这意味着它正在等待该语句的更多输入（在这种情况下，是整个 for 循环），并且因为它仅在完全读入后才执行语句，因此您需要明确告诉它当声明完成时。

# c++ - CFG 和 PDA 用于具有完美嵌套的括号和括号的语法

> ID：13433575
> 
> 赞同：-1
> 
> 时间：2012-11-17T18:39:50.020
> 
> 标签：c++, context-free-grammar, pushdown-automaton

我必须为具有完美嵌套的括号和括号的语法制作一个 CFG 和 PDA。

```
S -> [S]
S -> (S)
S -> SS
S -> Epsilon 
```

不确定这是否正确，或者如何从中制作 PDA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:49:44.690

看看[精神](http://boost-spirit.com/home/)。真的很值得*深入*参观。

否则，您的语法是如此简单，以至于[递归 LL(1) 解析器](http://en.wikipedia.org/wiki/LL_parser)应该很容易编写。

# android - 动画移动后重绘时重置Android布局

> ID：13433584
> 
> 赞同：-1
> 
> 时间：2012-11-17T18:40:44.887
> 
> 标签：android, listview, animation, layout

我在片段容器中有一个列表视图。

列表中的每个视图都有一个手势检测器，它在手势向上时会使列表无效以进行重绘。

选择项目后，我将片段容器动画到屏幕的另一部分

```
ObjectAnimator x = ObjectAnimator.ofInt(ListLayout, "left", ListLayout.getLeft(), ListLayout.getLeft() - 336);
x.setDuration(500);
x.addListener(new AnimatorListenerAdapter() {
@Override
public void onAnimationEnd(Animator animation) {
    View ListLayout = findViewById(R.id.fragment_list_container);
                          Log.d(TAG, "ListLayout x after move completed = " + ListLayout.getLeft());
}
});
x.start(); 
```

到目前为止一切都很好。

但是，如果我从列表中选择另一个项目（这次列表不应移动，因此不会调用动画），当检测到向上手势并且列表无效时，它会恢复到原始位置吗？

如果我在初始动画移动之前和之后 getLeft 它将返回正确的位置。

感激地收到任何帮助或见解，Slip

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:04:42.677

对于那些遇到这个问题的人来说，这仅仅是因为我使用的是“左”而不是翻译值。

我最终压缩了所有内容并使用了新功能

```
mLayout.animate().setDuration(ANIMATE_TIME_MILLIS).translationXBy(ANIMATE_MOVE_DISTANCE); 
```

# c# - 无法从数据集中检索特定项目

> ID：13433585
> 
> 赞同：3
> 
> 时间：2012-11-17T18:40:50.190
> 
> 标签：c#, .net, ado.net, dataset

我已经查看了与此相关的其他问题，但我遇到了不同的问题。我无法返回特定项目，它只返回我的列名。如何让商品退回？

```
public static string GetOneFieldRecord(string field, string companyNum)
{
    DataSet ds = new DataSet();
    SqlCommand comm = new SqlCommand();

    string strSQL = "SELECT @FieldName FROM Companies WHERE CompanyNum = @CompanyNum";
    SqlConnection conn = new SqlConnection();
    conn.ConnectionString = @connstring;
    comm.Connection = conn;
    comm.CommandText = strSQL;
    comm.Parameters.AddWithValue("@FieldName", field);
    comm.Parameters.AddWithValue("@CompanyNum", companyNum);

    SqlDataAdapter da = new SqlDataAdapter();
    da.SelectCommand = comm;

    conn.Open();

    da.Fill(ds, "CompanyInfo");

    conn.Close();

    return ds.Tables[0].Rows[0].ItemArray[0].ToString();
} 
```

我也试过

```
return ds.Tables[0].Rows[0][0].ToString(); 
```

我只是得到字段变量中的任何内容。如果我传入（“CompanyName”，33），它会返回“CompanyName”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:47:13.320

您的查询（在 sql profiler 中）是

```
SELECT 'CompanyName' FROM Сompanies WHERE СompanyNum = 33 
```

所以它准确地返回“CompanyName”字符串。您不能将列名作为 sql 参数传递。你应该做类似的事情

```
public static string GetOneFieldRecord(string field, string companyNum)
{
    DataSet ds = new DataSet();
    SqlCommand comm = new SqlCommand();

    string strSQL = string.Format("SELECT {0} FROM Companies WHERE CompanyNum = @CompanyNum", field);
    SqlConnection conn = new SqlConnection();
    conn.ConnectionString = @connstring;
    comm.Connection = conn;
    comm.CommandText = strSQL;
    comm.Parameters.AddWithValue("@FieldName", field);
    comm.Parameters.AddWithValue("@CompanyNum", companyNum);

    SqlDataAdapter da = new SqlDataAdapter();
    da.SelectCommand = comm;

    conn.Open();

    da.Fill(ds, "CompanyInfo");

   conn.Close();

   return ds.Tables[0].Rows[0].ItemArray[0].ToString();
} 
```

但是这段代码可以用于 SQL 注入。

为避免 Sql 注入，您可以检查字段变量中的 fieldName 是否为表列之一。

或者您可以获取 SELECT * FROM Сompanies WHERE СompanyNum = @CompanyNum 并从数据表中获取命名列的值：

```
public static string GetOneFieldRecord(string field, string companyNum)
{
    DataSet ds = new DataSet();
    SqlCommand comm = new SqlCommand();

    string strSQL = "SELECT * FROM Companies WHERE CompanyNum = @CompanyNum";
    SqlConnection conn = new SqlConnection();
    conn.ConnectionString = @connstring;
    comm.Connection = conn;
    comm.CommandText = strSQL;
    comm.Parameters.AddWithValue("@FieldName", field);
    comm.Parameters.AddWithValue("@CompanyNum", companyNum);

    SqlDataAdapter da = new SqlDataAdapter();
    da.SelectCommand = comm;

    conn.Open();

    da.Fill(ds, "CompanyInfo");

   conn.Close();

   return ds.Tables[0].Rows[0][field].ToString();
} 
```

# php - wordpress 保护页面

> ID：13433586
> 
> 赞同：2
> 
> 时间：2012-11-17T18:40:50.963
> 
> 标签：php, wordpress, protected

我想通过令牌访问受 WordPress 保护的页面。场景将是：我在 URL 中传递一个令牌，然后检查请求是否是页面，如果是，则页面是否受保护，如果是，则检查 URL 是否具有令牌，是否检查令牌是否匹配或不是。

**更新**

我发现并在我的情况下工作的解决方法

```
 function check_token() {
        if (post_password_required() && (!empty($_GET['token'])) ){
            if($_GET['token'] == 'test'){
             global $post;
                $post->post_password=null;
            }
        }
    }

add_action('wp_head','check_token'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:31:53.673

在页面模板的顶部尝试这个，在循环之前：

```
if( get_query_var( 'token' ) == 'xyz' )
    query_posts( 'post_status' => array( 'publish', 'any' ) ); 
```

我找不到与“受保护”相对应的状态的帖子 - 如何受保护？在列表中找到实际的帖子状态并用它替换“任何”：http: [//codex.wordpress.org/Class_Reference/WP_Query#Status_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Status_Parameters)

以下是注册“令牌”的方法：

```
add_filter( 'query_vars', function( $query_vars ) {
    $query_vars[] = 'token';
    return $query_vars;
}); 
```

# mysql - 如何在mysql中进行原子更新和选择查询？

> ID：13433588
> 
> 赞同：2
> 
> 时间：2012-11-17T18:40:59.613
> 
> 标签：mysql

我有一个包含三列的表 - id、name 和 num。如果 num 大于 0 并在同一个 sql 语句中减少 num，我想根据名称选择 id - 我该怎么做？我需要以某种方式确保这两条语句：

```
select id from table where name='someValue' ; update table set num=num-1; 
```

将作为原子动作执行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:53:01.970

```
update table set num=num-1 where name='somevalue' and num>0 
```

如果 num 大于 0 并且 name 等于 'somevalue'，此查询将 num 减 1

# javascript - 网址追踪功能

> ID：13433590
> 
> 赞同：2
> 
> 时间：2012-11-17T18:41:01.563
> 
> 标签：javascript, html, webpage

我希望我的网页有两个部分。顶部有一个文本框。当用户在文本框中键入 URL 时，底部会浏览到该 URL 的内容。当用户单击底部中的链接时，底部导航到新 URL，顶部中的文本框更改为新 URL。我该怎么做？

注意：此行为与 Google 翻译中的行为相同（例如[此处](http://translate.google.com/translate?sl=auto&tl=en&js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&u=de.wikipedia.org/wiki/USA)），但没有任何翻译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:57:42.270

### 第一个问题。。

*同源问题*

实现您所要求的唯一方法正是谷歌翻译的方式 - 即使用服务器端驱动的脚本作为代理请求：

> [http://translate.google.com/translate_un?depth=1&hl=en&ie=UTF8&prev=_t&rurl=translate.google.com&sl=auto&tl=en&twu=1&u=http://de.wikipedia.org/wiki/USA&lang=de&usg= ALkJrhgoLkbUGvOPUCHoNZIkVcMQpXhxZg](http://translate.google.com/translate_un?depth=1&hl=en&ie=UTF8&prev=_t&rurl=translate.google.com&sl=auto&tl=en&twu=1&u=http://de.wikipedia.org/wiki/USA&lang=de&usg=ALkJrhgoLkbUGvOPUCHoNZIkVcMQpXhxZg)

以上是谷歌翻译用来显示翻译页面的 iframe 的 URL。主要需要注意的是 URL 的域部分与父页面的 URL 相同`http://translate.google.com`——如果您的框架和父窗口**不**共享同一个域，那么您的父窗口的 JavaScript 将无法访问其中的任何内容内嵌框架。它将被您浏览器的内置安全性阻止。

*显然，如果在您的项目中您只需要浏览自己的页面（在同一个域上）* ，上述内容将不会成为问题，但考虑到您以谷歌翻译为例，我假设不是。

*谷歌会做什么？*

上面的 URL 所做的是要求服务器端获取维基百科页面并将其返回，以便 iframe 可以显示它 - 但对于 iframe，此页面似乎托管在`translate.google.com`而不是`wikipedia`. 这意味着 iframe 与父窗口保持在同一原点，并且意味着 JavaScript 可用于编辑或修改 iframe 内的页面。

### 下一个问题……

*重写代理内容*

基本上我要说的是，这不能仅通过 HTML 和客户端 JavaScript 来实现 - 你需要从服务器端获得帮助，即 PHP、Python、Ruby、Lisp、Node.. 等等. 该脚本将负责确保代理页面正确显示/呈现，例如，您必须确保原始服务器上的内容/图像/css 的相关链接没有损坏*（您可以使用`base`标签或物理重写相关链接）*。根据其网站的使用条款，也有许多网站将其视为对其网站的非法使用，因此应将其从您的服务中列入黑名单。

### 最后的问题..？

*防止用户脱离您的代理*

一旦你有了你的代理脚本，你就可以使用 iframe *（请避免使用旧的框架集）*，以及一些 JavaScript 魔术，`onload`或者`ondomready`iframe 重写页面中的所有链接、表单和按钮。这样，当单击或提交时，它们会发布到您的代理脚本而不是原始目的地。此重写代码还必须以某种方式将原始目的地发送到您的代理脚本 - 就像`u`在谷歌翻译 URL 中一样。一旦您对此进行了排序，这将意味着您的 iframe 将重新加载新的目标内容，但是 - 最重要的是 - 您的 iframe 将保留在同一个域中。

### 问题太多！

*如果是我，就个人而言，我会重新考虑你的策略*

总的来说，这不是一项简单的任务，也不是 100% 完全证明，因为有很多事情会导致问题：

1.  某些网站旨在打破框架。
2.  用户可以通过多种方式从不容易重写的页面导航，即任何由 JavaScript 提供支持的导航。
3.  某些页面被设计为在从错误的主机提供时中断。
4.  对其他网站进行这种“代理”的网站可能会在版权和使用方面陷入困境。

谷歌能够做到这一点的原因是因为他们有大量的时间、金钱和资源......哦，谷歌翻译所做的大部分工作实际上是在服务器端处理的——而不是在 JavaScript 中。

### 建议

如果您正在寻找跟踪浏览您自己网站的用户：

*   使用谷歌分析。
*   或者使用 cookie 实现一个简单的服务器端跟踪系统。

如果您希望跟踪访问您的网站然后访问万维网其他地方的用户：

*   放弃吧，网络技术旨在防止这样的事情发生。
*   或者加入一个网络营销公司，他们尽最大的努力去规避这类事情的预防。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:37:42.520

将 javascript 函数添加到您的第二帧 -

```
<frame id="dataframe" src="frame_a.htm" onload="load()"> 
```

让文本框有一个 id - 说“测试”

```
function load()
{
document.getElementById('test').value=document.getElementById('dataframe').src
} 
```

# file - 如何在 j2me 中读取文件的属性/属性

> ID：13433591
> 
> 赞同：1
> 
> 时间：2012-11-17T18:41:09.120
> 
> 标签：file, java-me

我已经用谷歌搜索了两天，但我无法得到答案。

如何在 j2me 中获取文件（例如 mine.mp3）的属性/属性。我正在寻找正常的文件属性，例如名称、大小、修改日期和最重要的类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:01:36.527

您正在寻找的是J2ME 中的[FileConnection](http://www.enough.de/javadoc/j2me/de/enough/polish/android/io/file/FileConnection.html)类。本文档将提供有关您的要求的所有详细信息。

通过使用此类，您可以获取文件的属性，如[fileSize()](http://www.developer.nokia.com/Resources/Library/Java/_zip/GUID-D69FC49D-783E-45CE-80D4-7A9F3EE08B2A/javax/microedition/io/file/FileConnection.html#fileSize%28%29)、[getPath()](http://www.developer.nokia.com/Resources/Library/Java/_zip/GUID-D69FC49D-783E-45CE-80D4-7A9F3EE08B2A/javax/microedition/io/file/FileConnection.html#getPath%28%29)、[lastModified()](http://www.developer.nokia.com/Resources/Library/Java/_zip/GUID-D69FC49D-783E-45CE-80D4-7A9F3EE08B2A/javax/microedition/io/file/FileConnection.html#lastModified%28%29)等

# php - 从服务器中删除未使用的 JS、CSS、PHP、图像/文件

> ID：13433592
> 
> 赞同：4
> 
> 时间：2012-11-17T18:41:19.707
> 
> 标签：php, javascript, jquery, html, css

是否有任何工具能够扫描您的所有服务器文件或`www`文件夹（本地主机）并告诉您：

*   未使用哪些 CSS id 和/或类
*   永远不会调用哪些 JS 函数
*   同样的事情，但对于 PHP 方法或变量
*   哪些图像甚至 html 文件未链接到

有什么可以做到这一点吗？或者至少是上面的一些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:25:12.230

Firefox 有一个名为 CSS Usage 的插件，它将列出使用的选择器。我已经有一段时间没有使用它了，但我认为它也列出了未使用的选择器。

我不知道有什么可以满足您的其余要求。

# jquery - 滚动元素后如何启动动画？

> ID：13433593
> 
> 赞同：0
> 
> 时间：2012-11-17T18:41:23.550
> 
> 标签：jquery, jquery-animate, css-transitions

有谁知道滚动对象后是否有一个 JQuery 插件来启动动画？

或者如果没有插件在我滚动对象后使用 JQuery 启动 CSS3 转换？

我正在尝试复制类似[http://heymosaic.com/的内容](http://heymosaic.com/)

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:45:41.760

他们不使用 mouseover/mouseout 事件来触发动画，而是使用窗口的滚动位置。像这样的东西会起作用：

```
jQuery('div#down_the_page').focus(function() {
  // animate when div#down_the_page is visible in the viewport
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:18:04.993

我想也许有一个名为 waypoints.js 的 jquery 插件可以帮助实现这种效果。

你可以看看这个演示： http: [//www.mightymatcha.com/](http://www.mightymatcha.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:48:23.777

这是给你的伪代码：

```
//on window.scroll 
    //for every still not animated element in the page
        //check if it's top is in the view
            //if it is, start the transition. 
```

它的关键是：

[https://stackoverflow.com/a/125106/1262700](https://stackoverflow.com/a/125106/1262700)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T11:15:08.403

I see that it's old topic but for a future users here is a short snippet who do the job.

```
var $animation_elements = $('.animation-element');
var $window = $(window);

function check_if_in_view() {
  var window_height = $window.height();
  var window_top_position = $window.scrollTop();
  var window_bottom_position = (window_top_position + window_height);

  $.each($animation_elements, function() {
    var $element = $(this);
    var element_height = $element.outerHeight();
    var element_top_position = $element.offset().top;
    var element_bottom_position = (element_top_position + element_height);

    //check to see if this current container is within viewport
    if ((element_bottom_position >= window_top_position) &&
        (element_top_position <= window_bottom_position)) {
      $element.addClass('in-view');
    } else {
      $element.removeClass('in-view');
    }
  });
}

$window.on('scroll resize', check_if_in_view);
$window.trigger('scroll');
```

```
/*These styles contain basic styles for fomatting along with our animation css*/

body {
  font-size: 16px;
  font-family: 'Open Sans', sans-serif;
  font-weight: 400;
  background: #efefef;
  line-height: 170%;
}

strong,
b {
  font-weight: 600
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: 300;
  line-height: 150%;
}

i.fa {
  color: #333;
}

*,
*:before,
*:after {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
/*clearfixes*/

.cf:before,
.cf:after {
  content: " ";
  display: table;
}

.cf:after {
  clear: both;
}

.main-container {
  background: #fff;
  max-width: 1000px;
  margin: 25px auto 25px auto;
  position: relative;
}

.container {
  position: relative;
  padding: 25px;
}
/*animation element*/

.animation-element {
  opacity: 0;
  position: relative;
}
/*animation element sliding left*/

.animation-element.slide-left {
  opacity: 0;
  -moz-transition: all 500ms linear;
  -webkit-transition: all 500ms linear;
  -o-transition: all 500ms linear;
  transition: all 500ms linear;
  -moz-transform: translate3d(-100px, 0px, 0px);
  -webkit-transform: translate3d(-100px, 0px, 0px);
  -o-transform: translate(-100px, 0px);
  -ms-transform: translate(-100px, 0px);
  transform: translate3d(-100px, 0px, 0px);
}

.animation-element.slide-left.in-view {
  opacity: 1;
  -moz-transform: translate3d(0px, 0px, 0px);
  -webkit-transform: translate3d(0px, 0px, 0px);
  -o-transform: translate(0px, 0px);
  -ms-transform: translate(0px, 0px);
  transform: translate3d(0px, 0px, 0px);
}
/*animation slide left styled for testimonials*/

.animation-element.slide-left.testimonial {
  float: left;
  width: 47%;
  margin: 0% 1.5% 3% 1.5%;
  background: #F5F5F5;
  padding: 15px;
  box-shadow: 0px 1px 1px 0px rgba(0, 0, 0, 0.2);
  border: solid 1px #EAEAEA;
}
.animation-element.slide-left.testimonial:hover,
.animation-element.slide-left.testimonial:active{
  box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.25);
}

.animation-element.slide-left.testimonial:nth-of-type(odd) {
  width: 48.5%;
  margin: 0% 1.5% 3.0% 0%;
}

.animation-element.slide-left.testimonial:nth-of-type(even) {
  width: 48.5%;
  margin: 0% 0% 3.0% 1.5%;
}

.animation-element.slide-left.testimonial .header{
  float: left;
  width: 100%;
  margin-bottom: 10px;
}
.animation-element.slide-left.testimonial .left{
  float: left;
  margin-right: 15px;
}
.animation-element.slide-left.testimonial .right{
  float: left;
}

.animation-element.slide-left.testimonial img {
  width: 65px;
  height: 65px;
  border-radius: 50%;
  box-shadow: 0px 1px 3px rgba(51, 51, 51, 0.5);
}

.animation-element.slide-left.testimonial h3 {
  margin: 0px 0px 5px 0px;
}

.animation-element.slide-left.testimonial h4 {
  margin: 0px 0px 5px 0px;
}

.animation-element.slide-left.testimonial .content {
  float: left;
  width:100%;
  margin-bottom: 10px;
}

.animation-element.slide-left.testimonial .rating{}

.animation-element.slide-left.testimonial i {
  color: #aaa;
  margin-right: 5px;
}

/*media queries for small devices*/
@media screen and (max-width: 678px){
  /*testimonials*/
  .animation-element.slide-left.testimonial,
  .animation-element.slide-left.testimonial:nth-of-type(odd),
  .animation-element.slide-left.testimonial:nth-of-type(even){
    width: 100%;
    margin: 0px 0px 20px 0px;
  }
  .animation-element.slide-left.testimonial .right,
  .animation-element.slide-left.testimonial .left,
  .animation-element.slide-left.testimonial .content,
  .animation-element.slide-left.testimonial .rating{
    text-align: center;
    float: none;
  }
  .animation-element.slide-left.testimonial img{
    width: 85px;
    height: 85px;
    margin-bottom: 5px;
  }

}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!--For our animations to look good, the animated elements need to be able to be scrolled to. For this example I've added dummy content to the top -->
<div class="main-container">
  <div class="container">
    <h1>Slide in from the left </h1>
    <p>This animation will focus on sliding an element from the left once it enters the view of the user</p>
  </div>
  <div class="container">
    <h2>
      Our Testimonials <i class="fa fa-comment"></i></h2>
    <p> We have worked in the industry for 15 years and have provided services to a wide range of clients.</p>
    <p>Come and see what our clients are saying about our services. </p>
  </div>
  <div class="container cf">
    <!-- testimonial one -->
    <div class="animation-element slide-left testimonial">
      <div class="header">
        <div class="left">
          <img src="http://drive.google.com/uc?export=download&id=0B7UPM0QugWUjVTdZcktRTWhNamM" />
        </div>
        <div class="right">
          <h3>Johnathon Richard Smith</h3>
          <h4>CEO / Manager - Auto Incorporated</h4>
        </div>
      </div>
      <div class="content"><i class="fa fa-quote-left"></i> When I started using their service I was skeptical. They promised me a 300% return on my initial investment. However they came through on their word and now my business is flourishing.. <i class="fa fa-quote-right"></i>
      </div>
      <div class="rating">
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star-half-o"></i>
      </div>
    </div>
    <!--testimonial two -->
    <div class="animation-element slide-left testimonial">
      <div class="header">
        <div class="left">
          <img src="http://drive.google.com/uc?export=download&id=0B7UPM0QugWUjV3BseTMtcEU1T2M" />
        </div>
        <div class="right">
          <h3>Joanna Hammerlton</h3>
          <h4>Marketing Manager - Omega Creative</h4>
        </div>
      </div>
      <div class="content"><i class="fa fa-quote-left"></i> Our company first enlisted their services when we had a down-turn in sales and revene. They outlined a series of steps we could take to improve our position and within a year we are making signifcant improvements..
        <i class="fa fa-quote-right"></i>
      </div>
      <div class="rating">
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star-o"></i>
      </div>
    </div>
    <!--testimonial three -->
    <div class="animation-element slide-left testimonial">
      <div class="header">
        <div class="left">
          <img src="http://drive.google.com/uc?export=download&id=0B7UPM0QugWUjTURta0pyMEtoUmc
                    " />
        </div>
        <div class="right">
          <h3>Mark Jamerson</h3>
          <h4>CEO - Generic Business</h4>
        </div>
      </div>
      <div class="content"><i class="fa fa-quote-left"></i> We entered into a 12 month period of service with this company in the hopes to improve our returns. After this period we have a return of double our initial investment..
        <i class="fa fa-quote-right"></i>
      </div>
      <div class="rating">
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
      </div>
    </div>
    <!--testimonial four -->
    <div class="animation-element slide-left testimonial">
      <div class="header">
        <div class="left">
          <img src="http://drive.google.com/uc?export=download&id=0B7UPM0QugWUjb1dxcGZEYUc0Z3M" />
        </div>
        <div class="right">
          <h3>Susan Hilton</h3>
          <h4>Financial Officer - People Tech</h4>
        </div>
      </div>
      <div class="content"><i class="fa fa-quote-left"></i> Our involvement in this company has been mutually beneficial. We were hoping for slightly higher returns, however the current level of returns are sufficient..
        <i class="fa fa-quote-right"></i>
      </div>
      <div class="rating">
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star"></i>
        <i class="fa fa-star-o"></i>
        <i class="fa fa-star-o"></i>
      </div>
    </div>
  </div>
```

Source: [http://www.sitepoint.com/scroll-based-animations-jquery-css3/](http://www.sitepoint.com/scroll-based-animations-jquery-css3/)

# c - C 中的凯撒密码 - 意外问题

> ID：13433594
> 
> 赞同：1
> 
> 时间：2012-11-17T18:41:29.353
> 
> 标签：c

我的凯撒密码遇到了意想不到的问题。凯撒是通过将每个字母移动 n 个数字来加密文本。所以如果是1，abc就是bcd。我在使用 C 语言执行此操作的程序上工作，但它对某些字符（常规字母）来说很奇怪，尽管它应该是正确的。这是问题语法：

```
 for (int i = 0; i < strlen(text); i++)
{   
    if (text[i] != ' ')
    {
       // printf("\n%i\n", key);

        text[i] = text[i] + key;

        if (text[i] > 122)
        {
            text[i] = text[i] + 97 - 122; 
        }

    }
} 
```

我最后通过做那个数学来结束。你能帮我看看有什么问题吗？

编辑：这段代码很好，问题在于命令行参数的处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:47:24.757

使用`96`代替已解决的`97`问题

因此，当您环绕然后实际上增加 1 个额外值时，请考虑这一点；

```
 ------------------------------------------
    a  |  b |  c |  d  | . . . x  |  y  |  z  |
    --------------------------------------------
    97 | 98 | 99 | 100 | . . .120 | 121 | 122 |
    ------------------------------------------- 
```

尝试像这样使用 'a' ， 'b' ， .. .. .. ，'z' 而不是它们的实际值

在 char 中使用`' '`单引号会为您提供整数值，即 ASCII 值

这是代码：

```
char c;
for (int i = 0; i < strlen(text); i++)
{   
    if (text[i] != ' ')
    {
       // printf("\n%i\n", key);

        c=text[i];    
        text[i] = text[i] + key;

        if(c >='a' && c <='z' && text[i] >'z')
            text[i] = text[i] + 'a' -1 - 'z' ; 

        if(c >='A' && c <= 'Z' && text[i] > 'Z')
            text[i] = text[i] + 'A' -1 - 'Z' ; 

    }
} 
```

# asp.net-mvc - 如何创建自定义强类型 HtmlHelper？

> ID：13433595
> 
> 赞同：3
> 
> 时间：2012-11-17T18:41:36.017
> 
> 标签：asp.net-mvc, html-helper, htmlextensions

例如，当使用

```
@Html.TextBoxFor(v => Model.Text); 
```

并提交表单，TextBox 中的值会自动分配给`Model.Text`.

我想写一个这样的自定义 HTML 助手。

我知道如何编写这样的扩展方法来显示 HTML，但是如何编程行为来分配 value `Model.WhatEver`。

我想构建一个标签云，我认为以如下方式包含它是个好主意：

```
@Html.TagCloud(v => Model.SelectedTags, Model.AvailableTags) 
```

HTML-Helper 只是打印出 HTML，但我怎样才能将值分配给`Model.SelectedTags`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:51:32.270

看看这个方法是如何定义的：

```
public static MvcHtmlString TextBoxFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression); 
```

它只是静态类返回中的通用扩展方法`MvcHtmlString`。只需自己编写一个并通过 web.config 将其插入到视图中。

```
<pages>
  <namespaces>
    <add namespace="NameSpaceWithYourClass" /> 
```

请记住，此方法必须`this HtmlHelper<TModel>`作为扩展参数和 `Expression<Func<TModel, TProperty>> expression`选择属性的表达式，你会没事的。

顺便说一句：我认为您需要更好的局部视图，因为它的 HTML 可能非常复杂。

# python - 流式传输音频和视频

> ID：13433597
> 
> 赞同：2
> 
> 时间：2012-11-17T18:42:08.840
> 
> 标签：python, linux, streaming, video-streaming, audio-streaming

我已经尝试了一段时间，但很挣扎。我有两个项目：

1.  将音频流式传输到服务器以通过 Web 分发
2.  将音频和视频从网络摄像头流式传输到服务器，以便通过网络进行分发。

到目前为止，我已经尝试过 ffmpeg 和 ffserver、PulseAudio、mjpegstreamer（我得到了这个工作但没有音频）和 IceCast 都没有运气。虽然我确定这可能是我的错，但我想知道是否还有其他选择？

我花了一段时间试验 Linux 选项，并且想知道最近是否有 Python 选项与 OpenCV 一起玩。

如果有人可以建议更多选项来研究基于 Python 或 Linux 的内容，将不胜感激，或者向我指出一些好的教程或对我已经使用过的内容的解释，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T22:24:18.313

尝试不同选项的一个好的开始是使用 vlc (http://www.videolan.org) 它的 file->transmit 菜单命令会打开一个可以播放的向导。

另一个不错的是 gstreamer (http://www.gstreamer.net)，特别是 gst-launch 程序，它允许您从命令行构建管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-29T12:53:28.430

至于我，RTSP 铸造是最简单的方法。

GStreamer 可以做很多事情，但是您不能仅使用`gst-launch`. 需要从[gst-rtsp](http://cgit.freedesktop.org/gstreamer/gst-rtsp-server/)包编译自己的 RTSP 服务器。编译其中一个[gst-rtsp 示例](http://cgit.freedesktop.org/gstreamer/gst-rtsp-server/tree/examples)就可以了。

# javascript - 哪个 iframe 有焦点

> ID：13433602
> 
> 赞同：1
> 
> 时间：2012-11-17T18:42:34.203
> 
> 标签：javascript, jquery, iframe

我可能在这里遗漏了一些东西，但我想要与[http://jsfiddle.net/Kxmaf/6/](http://jsfiddle.net/Kxmaf/6/)类似的东西，但要编辑几个 iframe 区域。我如何确定哪个 iframe 专注于它？

我想要做的是输入这样的内容：

```
function ItalicIt()
 {  
    var edit = document.activeElement;
    edit.focus();
    edit.document.execCommand("italic", false, "");
    edit.focus();
 } 
```

而不是这个：

```
function ItalicIt()
 {  
    var edit = document.getElementById("textEditor").contentWindow;
    edit.focus();
    edit.document.execCommand("italic", false, "");
    edit.focus();
 } 
```

因此，与其通过给它 id “texteditor”来告诉它要处理哪个 iframe，我想告诉它找出哪个 iframe 具有焦点。

# c# - 泛型类型 MyType<,> 实际上是一种类型吗？

> ID：13433619
> 
> 赞同：3
> 
> 时间：2012-11-17T18:45:04.603
> 
> 标签：c#, .net, clr, mef

我对此感到有些困惑，这是由于在 MEF 中导出泛型类型而引起的

我注意到：

```
new Dictionary<string,bool>().GetType() == typeof(Dictionary<,>)
false
new Dictionary<string,bool>().GetType().GetGenericTypeDefinition() == typeof(Dictionary<,>)
true 
```

然而 Dictionary<,> 本身并不被视为“类型”，因为这实际上会产生编译错误：

```
new Dictionary<string,bool> as Dictionary<,>
Type expected
new Dictionary<string,bool> is Dictionary<,>
Type expected 
```

所以我的问题是， Dictionary<,> 实际上是一种类型吗？.NET 对待泛型类型是否不同于非泛型类型？

现在在 MEF 中，我可以将通用类导出为

```
[Export(typeof(MyGenericClass<,>))] 
```

这将满足像这样的进口要求

```
[Import]
public MyGenericClass<string, long> Instance { get; set; } 
```

我对这里的类型系统规则感到困惑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T18:52:03.510

See [What exactly is an “open generic type”</a>. What you are referring to is called an *unbound generic type* and is explained in the same](https://stackoverflow.com/a/2173115/880990) [post](https://stackoverflow.com/a/2173115/880990). An *unbound generic type* is actually a type, however it can only be used within a `typeof()` expression. Note: Unlike C# Java allows expressions like `List<?>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:50:25.603

是的，MyType<,> 是一种类型。这是一个“开放式泛型”类型，请参阅[.NET 中的“开放式泛型”到底是什么？](https://stackoverflow.com/questions/2173107/net-what-exactly-is-an-open-generic-type)

# php - PHP Mini 离线网络服务器？

> ID：13433621
> 
> 赞同：1
> 
> 时间：2012-11-17T18:45:09.200
> 
> 标签：php, mysql, apache, webserver, localhost

即使我没有连接到互联网，如何制作离线网络服务器来测试我的脚本？

互联网上有什么教程可以帮助我吗？我必须下载哪些程序来制作我的“迷你”服务器？

谁能帮我这个？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:47:10.363

[http://www.wampserver.com/en/](http://www.wampserver.com/en/)

WampServer 是一个 Windows Web 开发环境。它允许您使用 Apache2、PHP 和 MySQL 数据库创建 Web 应用程序。此外，PhpMyAdmin 允许您轻松管理数据库

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T18:47:16.367

这里有几个

[WAMP](http://www.wampserver.com/en/)

[XAMPP](http://sourceforge.net/projects/xampp/)

[眩晕服务](http://vertrigo.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T18:46:40.910

一般来说“是”。您只需要在本地机器上安装 http server + php + 也许是 SQL 并进行设置。如果你在 Windows 上，那么有一堆现成的包，如[Uniform Server](http://www.uniformserver.com/)、[XAMPP](http://www.apachefriends.org/en/xampp.html)或其他。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T13:28:48.103

我从未尝试过 WAMP，我一直使用 XAMPP 和 Vertrigo，但 WAMP 看起来更易于使用和安装！

# regex - CakePHP 为 unicode 路由正则表达式

> ID：13433626
> 
> 赞同：2
> 
> 时间：2012-11-17T18:45:24.633
> 
> 标签：regex, cakephp, unicode, routes

我想在 CakePHP 路由中做以下更改。网站 URL 之后的任何单词或单词组（用连字符分隔），例如`example.com/someword`或`example.com/some-word`应该重定向到`controller => posts, action => view`. 但我的问题是单词应该是unicode。我已经为 URL 文本尝试了这个正则表达式，但它不起作用。

> Router::connect ('/:link', array ('controller' => 'posts', 'action' => 'view'), array ('pass' => array ('link'), 'link' = > '/^['.json_decode('"\u0531"').'-'.json_decode('"\u0587"').'-]+$/u'));

我想提一下，我的正则表达式

```
'/^['.json_decode('"\u0531"').'-'.json_decode('"\u0587"').'-]+$/u', 
```

如果我要进行一些通常的 preg_match 之类的，那就可以了

```
$regg = '/^['.json_decode('"\u0531"').'-'.json_decode('"\u0587"').'-]+$/u';
if (preg_match($regg, "my unicode string", $match)) {
  var_dump($match);   // outputs string as expected
}
die; 
```

**编辑**

我最终得到了这个代码

```
Router::connect ( '/:link', array ('controller' => 'posts', 'action' => 'view' ), array    ('pass' => array ('link'), 'link' => '((?![a-zA-Z]).)+' ) ); 
```

就像让我的网址包含除了英文字母之外的所有内容，但这不是我需要的东西，如果我有 2 种或更多不同的语言而不是英语 - 这种方法不起作用。因此，我想将每种语言的单词发送到单独的操作中。

蛋糕版本 2.x

**编辑 2**

有替代解决方案，如下面的答案，绕过这个问题，但我正在寻找做我需要的确切方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T17:50:33.330

从[http://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)在*URL encoding*段落中，您不能在 url 查询字符串上使用这些字符：

> 特别是，对查询字符串进行编码使用以下规则：
> 
> *   字母（A-Z 和 a-z）、数字 (0-9) 和字符 '.'、'-'、'~' 和 '_' 保持原样
> *   SPACE 编码为 '+' 或 "%20" [8]
> *   所有其他字符都编码为 %HH 十六进制表示，任何非 ASCII 字符首先编码为 UTF-8（或其他指定编码）

如果您有两种（或更多）语言，您可以考虑在帖子表中为每种语言添加一个 slug 字段，例如英语和俄语：

帖子

*   ID
*   title_eng
*   title_rus
*   slug_eng
*   slug_rus

在 Post.php beforeValidate 或 beforeSave 上：

```
if(isset($this->data['Post']['title_eng'])){
    $this->data['Post']['slug_eng'] = Inflector::slug(strtolower($this->data['Post']['title_eng']), '-');
}
if(isset($this->data['Post']['title_rus'])){
    $this->data['Post']['slug_rus'] = Inflector::slug(strtolower($this->data['Post']['title_rus']), '-');
} 
```

视图内的链接：

```
echo $this->Html->link($post['Post']['title_eng'], array('controller' => 'posts', 'action' => 'view', 'slug_eng' => $post['Post']['slug_eng']));
echo $this->Html->link($post['Post']['title_rus'], array('controller' => 'posts', 'action' => 'view', 'slug_rus' => $post['Post']['slug_rus'])); 
```

路线：

```
Router::connect('/posts/:slug_eng', array('controller' => 'posts','action' => 'view', 'eng'), array('pass' => array('slug_eng'), 'slug_eng' => '[a-zA-Z0-9]+'));
Router::connect('/ru/posts/:slug_rus', array('controller' => 'posts','action' => 'view', 'rus'), array('pass' => array('slug_rus'), 'slug_rus' => '[a-zA-Z0-9]+')); 
```

控制器帖子：

```
public function view($locale, $slug){
    ....
    validate and sanitize here
    ...
    $post = $this->Post->find('first', array('conditions' => array('slug_' . $locale => $slug)));
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T23:24:16.793

我建议使用通配符

```
Router::connect('/*', array('controller' => 'posts', 'action' => 'view')); 
```

可以在此行之前添加任何其他路线，例如

```
Router::connect('/:digits', array('controller' => 'posts', 'action' => 'view'), array('pass' => array('digits'), 'digits' => '/d+');
Router::connect('/*', array('controller' => 'posts', 'action' => 'view')); 
```

# c - 与程序的输出混淆

> ID：13433630
> 
> 赞同：0
> 
> 时间：2012-11-17T18:45:42.793
> 
> 标签：c

> **可能重复：**
> [任何人都可以解释这些未定义的行为（i = i++ + ++i，i = i++ 等......）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)
> [未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

```
#include<stdio.h>
int main(){
int i=5,j=5,y,x;
int m=++i;
int n=++i;
x=m+n;
y=++j + ++j ;
printf("%d  %d ",x,y);
return 0;
} 
```

输出：13 14 谁能解释一下为什么'y'值是14而不是13。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:52:09.337

大多数编译器会在执行加法并将值归因于 y 之前将 j 递增两次，这就是您的情况下结果为 14 的原因。

但是，C 标准没有指定该表达式的求值顺序，因此在另一个编译器上，结果确实可能是 13。

换句话说，这是未定义的行为，不应在混淆竞赛和谜题中使用。

# c# - 我应该创建很多 PropertyChangedEventHandler 还是测试 PropertyChangedEventArgs？

> ID：13433633
> 
> 赞同：3
> 
> 时间：2012-11-17T18:46:16.497
> 
> 标签：c#, wpf, properties, event-handling, inotifypropertychanged

到目前为止，我的模型实现`INotifyPropertyChanged`了 ，并且每个属性都会引发此事件。几乎所有 ViewModel 都通过`PropertyChangedEventHandler`.

问题是模型中的每次更改都会调用此处理程序，即使属性更改对视图并不重要。

一种选择是检查哪个属性引发了事件。但是，我不喜欢测试 PropertyName 字符串的想法。它需要对我已经在模型中避免的属性名称进行硬编码，例如`PropertyChanged.Notify(()=> PropertyName)`

我看到的第二个选项是为我的所有属性实现单个事件：

```
public event PropertyChangedEventHandler LayerChanged;
public event PropertyChangedEventHandler FieldChanged;
public event PropertyChangedEventHandler LinkDictionaryChanged; 
```

……

最佳做法是什么？我更喜欢第二种选择。

编辑：我尝试更具体

我的模型类是这样工作的：

```
 public bool IsFeatureLayer
        {
            get { return _isFeatureLayer; }
            set { PropertyChanged.ChangeAndNotify(ref _isFeatureLayer, value, () => IsFeatureLayer);}
        } 
```

或者

```
 PropertyChanged.Notify(() => LinkDictionary); 
```

所以问题不在于如何使通知调用更安全，因为我已经使用扩展方法来执行此操作而无需属性的字符串名称。

问题是如何在不使用字符串的情况下找出谁调用了事件。

```
 void _MCDAExtensionPropertyChanged(object sender, PropertyChangedEventArgs e)
        {
            if(e.PropertyName.Equals("LinkDictionary"){
              //event handling
           }
        } 
```

这是完全不安全的，因为我的模型中的属性名称可以更改，我必须在不同的地方修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:11:02.390

如果您的目标是 .NET 4.5，那么使用新属性实现`INotifyPropertyChanged`起来会更容易、更安全。`CallerMemberName`

简而言之，该`CallerMemberName`属性允许您获取调用成员的名称作为方法参数。这样，你可以有这样的东西：

```
private string name;
public string Name
{
    get { return name; }
    set { SetProperty(ref name, value); }
}

private void SetProperty<T>(ref T field, T value, [CallerMemberName] string callerMemberName = "")
{
    // callerMemberName = "Name" (the property that called it).

    // Set the field value and raise PropertyChanged event.
} 
```

[您可以在此处](http://danrigby.com/2012/03/01/inotifypropertychanged-the-net-4-5-way/)查看如何使用它的示例。

至于选择哪个选项 - 我认为执行时间方面的差异可以忽略不计，而不是因为每个属性都有一个额外的事件而导致的编码开销和代码混乱（无论是在代码本身还是在智能感知中）。我肯定会选择第一个选项。

**编辑：**

不幸的是，在处理`PropertyChanged`事件时，您只能针对`PropertyName`字符串进行测试，即使属性名称发生更改，也无法以保持一致的方式获取该字符串。对于您拥有的依赖项属性`MyDependencyProperty.Name`，但这不适用于常规属性。

最终，您的选择是为每个属性使用不同的事件，或者在定义包含属性名称的属性的类中定义一个常量，希望您在/如果更改属性名称时记得修改它。假设您没有很多实现`INotifyPropertyChanged`您自己附加处理程序的类，那么为这些特定类中的每个属性设置一个事件并不是那么糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T22:44:52.133

如果我正确理解您的问题，您可以使用以下内容：

```
public static class PropertyChangedExtensions
{
    public static void RegisterPropertyHandler<T, TProperty>(this T obj, Expression<Func<T, TProperty>> propertyExpression, PropertyChangedEventHandler handlerDelegate)
        where T : class, INotifyPropertyChanged
    {
        if (obj == null) throw new ArgumentNullException("obj");

        var propertyName = GetPropertyName(propertyExpression);

        obj.PropertyChanged += (sender, args) =>
            {
                if (args.PropertyName == propertyName && handlerDelegate != null)
                    handlerDelegate(sender, args);
            };
    }

    public static void Notify<T>(this PropertyChangedEventHandler eventHandler, object sender, Expression<Func<T>> propertyExpression)
    {
        var handler = eventHandler;
        if (handler != null) handler(sender, new PropertyChangedEventArgs(GetPropertyName(propertyExpression)));
    }

    private static string GetPropertyName(LambdaExpression propertyExpression)
    {
        var memberExpression = propertyExpression.Body as MemberExpression;
        if (memberExpression == null)
        {
            var unaryExpression = propertyExpression.Body as UnaryExpression;
            if (unaryExpression == null) 
                throw new ArgumentException("Expression must be a UnaryExpression.", "propertyExpression");

            memberExpression = unaryExpression.Operand as MemberExpression;
        }

        if (memberExpression == null) 
            throw new ArgumentException("Expression must be a MemberExpression.", "propertyExpression");

        var propertyInfo = memberExpression.Member as PropertyInfo;
        if (propertyInfo == null) 
            throw new ArgumentException("Expression must be a Property.", "propertyExpression");

        return propertyInfo.Name;
    }
} 
```

该`RegisterPropertyHandler`方法允许您在不使用“魔术字符串”的情况下为特定属性注册处理程序。你像这样使用它：

```
public class PersonViewModel : INotifyPropertyChanged
{
    public PersonViewModel()
    {
        Address = new AddressViewModel();
        Address.RegisterPropertyHandler(a => a.ZipCode, ZipCodeChanged);
    }

    private AddressViewModel _address;

    public AddressViewModel Address
    {
        get { return _address; }
        set
        {
            _address = value;
            PropertyChanged.Notify(this, () => Address);
        }
    }

    private static void ZipCodeChanged(object sender, PropertyChangedEventArgs args)
    {
        // This will only be called when the 'ZipCode' property of 'Address' changes.
    }

    public event PropertyChangedEventHandler PropertyChanged;
}

public class AddressViewModel : INotifyPropertyChanged
{
    private string _zipCode;

    public string ZipCode
    {
        get
        {
            return _zipCode;
        }
        set
        {
            _zipCode = value;
            PropertyChanged.Notify(this, () => ZipCode);
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

我看到你已经有一个`Notify`扩展方法，所以你只需要添加`RegisterPropertyHandler`. 至少这是一个开始:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T18:59:55.760

只是对您的项目扩展方法是这样的：

```
 public static string GetPropertyName<TObj,TRet>(this TObj obj, Expression<Func<TObj,TRet>> expression)
    {
        MemberExpression body = GetMemberExpression(expression);
        return body.Member.Name;
    } 
```

这样，您将对属性名称、带有属性名称的字符串进行编译检查，但会牺牲很少的性能。有了这个，你可以调用：

`PropertyChanged.Notify(this.GetPropetyName(t=>t.PropertyName))`

这并不理想，但没有字符串很难做到这一点。

# ios - UICollection 视图不重绘渐变按钮

> ID：13433634
> 
> 赞同：1
> 
> 时间：2012-11-17T18:46:26.193
> 
> 标签：ios, xcode, reloaddata, uicollectionview, collectionview

我有一个 UICollectionView，其中填充了单元格，每个单元格都有一个渐变按钮（MKgradientbutton [https://github.com/mikekatz/iOS-UI-Utils/tree/master/Classes/Button%20Widgets](https://github.com/mikekatz/iOS-UI-Utils/tree/master/Classes/Button%20Widgets)）。通过按下其他 5 个按钮之一来“更改”视图，这反过来将按钮的数据加载到为 uicollectionview 提供数据源的数组中。其中一个参数是渐变按钮颜色。然而，在重新加载数据源并执行 [self.collectionView reloadData] 时，按钮标题和其他参数会发生变化，但颜色会经常变为完全错误的颜色。反复重新加载数据会解决这个问题——然而，更奇怪的是，按一下按钮似乎就能纠正按钮的颜色！在 reloadData 发生之前，我已经在行上对数据源数组进行了 NSLogged，并且所有颜色都是正确的。我在下面粘贴了一些代码 - 请耐心等待，因为该应用程序仍处于开发的早期阶段！

我真的看不出代码有任何问题——我相信 UICollectionView 需要“重绘”，但我认为 [self.CollectionView reloadData] 会解决这个问题！

将数据从 sqlite db 拉入对象然后添加到数组：

```
 Bird *bird = [[Bird alloc] init];

    bird.birdName = [results stringForColumn:@"name"];

    bird.buttonColour = [results stringForColumn:@"btncolour"];

[birds addObject:bird]; 
```

用于填充 UICollectionView 的数组“鸟”：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView2         cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CollectionViewCell *cell = [collectionView2     dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    Bird *bird = [birds objectAtIndex:(indexPath.row)];

    //Check button colour against index path of item
    NSLog(@"****INDEX PATH %i",indexPath.section*2 + indexPath.row);
    NSLog(@"****colour %@",bird.buttonColour);

    [cell.button setTitle:bird.birdName forState:UIControlStateNormal];
    [cell.button setTag:[birds indexOfObject:bird]];

    if ([bird.buttonColour isEqualToString:@"Green"]) {

 [cell.button setButtonColor:[UIColor greenColor]];

    }

    if ([bird.buttonColour isEqualToString:@"Orange"]) {

   [cell.button setButtonColor:[UIColor orangeColor]];
    }

    if ([bird.buttonColour isEqualToString:@"Red"]) {

      [cell.button setButtonColor:[UIColor redColor]];
    }

    if ([bird.buttonColour isEqualToString:@"Blue"]) {

   [cell.button setButtonColor:[UIColor blueColor]];
    }

    cell.button.titleLabel.numberOfLines = 0;
    cell.button.titleLabel.lineBreakMode = NSLineBreakByWordWrapping;
    cell.button.titleLabel.textAlignment = NSTextAlignmentCenter;

      return cell; } 
```

collectionViewCell.h（渐变按钮是单元格中的唯一项）：

```
#import <UIKit/UIKit.h>
#import "MKGradientButton.h"

@interface CollectionViewCell : UICollectionViewCell

@property (nonatomic) IBOutlet MKGradientButton* button;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:34:06.557

您可能必须通过 告诉按钮重绘自身`[cell.button setNeedsDisplay]`。

# php - EasyAPNS 实施。状态失败

> ID：13433635
> 
> 赞同：1
> 
> 时间：2012-11-17T18:46:31.923
> 
> 标签：php, iphone, push-notification, apple-push-notifications

我按照视频教程的所有步骤使用 PHP 和 MySQL 实现 APNS 服务器，在最后一步中，我在数据库的“apns-message”表中获得了“失败”状态。

PD。每次我从 apns.php 执行 fetch 任务时，状态都会从排队变为失败。

我究竟做错了什么？

更新

```
 UIDevice *dev = [UIDevice currentDevice];
    NSString *deviceUuid;
    if ([dev respondsToSelector:@selector(uniqueIdentifier)])
        deviceUuid = dev.uniqueIdentifier;
    else {
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        id uuid = [defaults objectForKey:@"deviceUuid"];
        if (uuid)
            deviceUuid = (NSString *)uuid;
        else {
            CFStringRef cfUuid = CFUUIDCreateString(NULL, CFUUIDCreate(NULL));
            deviceUuid = (__bridge_transfer NSString *)cfUuid;
            CFRelease(cfUuid);
            [defaults setObject:deviceUuid forKey:@"deviceUuid"];
        }
    }
    NSString *deviceName = dev.name;
    NSString *deviceModel = dev.model;
    NSString *deviceSystemVersion = dev.systemVersion;

    // Prepare the Device Token for Registration (remove spaces and < >)
    NSString *deviceToken = [[[[devToken description]
                               stringByReplacingOccurrencesOfString:@"<"withString:@""]
                              stringByReplacingOccurrencesOfString:@">" withString:@""]
                             stringByReplacingOccurrencesOfString: @" " withString: @""];

    NSString *host = @"www.mywebsite.com/apns";

    NSString *urlString = [NSString stringWithFormat:@"/apns.php?task=%@&appname=%@&appversion=%@&deviceuid=%@&devicetoken=%@&devicename=%@&devicemodel=%@&deviceversion=%@&pushbadge=%@&pushalert=%@&pushsound=%@", @"register", appName,appVersion, deviceUuid, deviceToken, deviceName, deviceModel, deviceSystemVersion, pushBadge, pushAlert, pushSound];

    NSURL *url = [[NSURL alloc] initWithScheme:@"http" host:host path:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSLog(@"Register URL: %@", url);
    NSLog(@"Return Data: %@", returnData); 
```

唯一奇怪的步骤是当我尝试连接 Apple 服务器（沙盒和生产服务器）时......我收到以下反馈

```
Start Time: 1353239556
Timeout   : 300 (sec)
Verify return code: 20 (unable to get local issuer certificate) 
```

希望你能帮我！

# python - 如何在 Python 中正确使用 try、except、else

> ID：13433637
> 
> 赞同：17
> 
> 时间：2012-11-17T18:46:46.673
> 
> 标签：python, exception, python-2.7

所以我想知道哪种方法是编写 try except 语句的正确方法。我是 Python 中错误处理的新手。

选项1

```
try:
    itemCode = items["itemCode"]
    dbObject=db.GqlQuery("SELECT * FROM %s WHERE code=:1" % dbName,itemCode).get()
    dbObject.delete() 
except AttributeError:
    print "There's no item with that code"
except KeyError:
    print "Bad parameter name"
except:
    print "Unknow error" 
```

选项 2

```
try:
    itemCode = items["itemCode"]
except KeyError:
    print "Bad parameter name"
else:    
    dbObject=db.GqlQuery("SELECT * FROM %s WHERE code=:1" % dbName,itemCode).get()
    try:    
        dbObject.delete() 
    except AttributeError:
        print "There's no item with that code"
    except:
        print "Unknow error" 
```

选项 3 您能想到的任何其他更好的选择。

选项 1，我们看到我将所有代码包装在一个 try 块中。选项 2，它使用嵌套块。它在特定行语句上引发异常。

如果某处有错误，我会很高兴知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T19:05:59.997

来自python的禅意，“扁平胜于嵌套”。一般来说，我会选择选项 #1 样式，尽管我对是否`dbObject=db.GqlQuery("SELECT....`或`dbObject.delete()`提出`AttributeError`. 但无论如何，您不必多次调用`dbObject.delete()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:08:56.967

简单 - 这取决于。如果您确定会遇到什么异常，您可以坚持使用 1)，坦率地说，90% 的情况都是如此。如果您知道许多代码例程可以引发相同的异常类型，则第二种方法很有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-17T19:02:33.970

我更喜欢使用带有验证的 dicts 的 get 方法，而不是捕获 KeyError。

```
itemCode = items.get("itemCode") # itemCode will be None, if no such key
if itemCode is not None:
    print "code missing" 
```

这不是“通用”解决方案（请参阅我的回答的评论），但在这种情况下它会有所帮助。

在第一种情况下，我不明白，为什么你要删除两次。

```
try:
    itemCode = items.get("itemCode") # itemCode will be None, if no such key
    if itemCode is not None:
        print "code missing"
    dbObject=db.GqlQuery("SELECT * FROM %s WHERE code=:1" % dbName,itemCode).get()
    dbObject.delete() 
except AttributeError:
    print "There's no item with that code"
except StandardError as ex:    # good idea to be prepared to handle various fails
    print "Unexpected error deleting item {}".format(ex) 
```

而且，不要忘记 python 有 finally 部分。它有时会派上用场。

# python - 如何在 PyQt 中连接到父 SIGNAL？

> ID：13433640
> 
> 赞同：3
> 
> 时间：2012-11-17T18:46:53.750
> 
> 标签：python, pyqt4

我有一个看起来像这样的 MainWindow：

```
def __init__(self, parent = None):

    QMainWindow.__init__(self, parent)
    self.setupUi(self)
    self.showMaximized()

    menu=mainMenu.MainMenu()

    classification=classificationMain.ClassificationMain()

    self.stackedWidget.addWidget(menu)
    self.stackedWidget.addWidget(classification)

    self.stackedWidget.setCurrentWidget(menu)
    self.stackedWidget.showFullScreen()

    #connections

    menu.pushButton.clicked.connect(self.showClassification)
    classification.backButton.clicked.connect(self.showMainWindow)

def showClassification(self ):
    self.stackedWidget.setCurrentIndex(3)

def showMainWindow(self):
    self.stackedWidget.setCurrentIndex(2) 
```

MainWindows 等待来自其余对话框的信号。现在，Classification 对话框中有另一个 StackedWidget，因为它用作应用程序重要部分的主窗口。看起来像：

```
class ClassificationMain(QDialog, Ui_Dialog):

def __init__(self, parent = None):

    QDialog.__init__(self, parent)
    self.setupUi(self)
    choose=choosePatient.ChoosePatient()
    self.stackedWidget.addWidget(choose)
    self.stackedWidget.setCurrentWidget(choose) 
```

现在，我想在每次单击 MainMenu 中的“显示分类”按钮时重新加载 ChoosePatient 中的数据，但现在数据只在 MainWindow 的分类=classificationMain.ClassificationMain() 行中加载一次。

我在想我必须通过单击 MainMenu 内的“显示分类”按钮来连接 ChoosePatient 内的一个插槽，但我需要一个 MainMenu 实例，这是不可能的。

每次单击“父”窗口中的按钮时，如何执行 ChoosePatient 方法？（另外，请告诉我这是否不是使用 pyqt windows 的正确方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:56:20.733

您需要保存对组合小部件的引用，并且还需要向父级公开一些公共方法：

```
class ClassificationMain(QDialog, Ui_Dialog):

    def __init__(self, parent = None):

        QDialog.__init__(self, parent)
        self.setupUi(self)
        self.chooseWidget=choosePatient.ChoosePatient()
        self.stackedWidget.addWidget(self.chooseWidget)
        self.stackedWidget.setCurrentWidget(self.chooseWidget)

    def reloadPatients(self):
        # whatever your operation should be on the ChoosePatient
        self.chooseWidget.reload()

# MAIN WINDOW
def __init__(self, parent = None):
    ...
    self.classification=classificationMain.ClassificationMain()
    self.stackedWidget.addWidget(self.classification)
    ...
    #connections
    menu.pushButton.clicked.connect(self.showClassification)

def showClassification(self ):
    self.stackedWidget.setCurrentIndex(3)
    self.classification.reloadPatients() 
```

如果需要，您也可以跳过该`reloadPatients`方法并直接连接到`ChoosePatient`：

```
def showClassification(self ):
    self.stackedWidget.setCurrentIndex(3)
    self.classification.chooseWidget.reload() 
```

我个人的意见是让你的自定义类很好地包装内部功能，这样你只需要通过自定义类与它交互，而不是深入研究它的内部。这样你就可以在不破坏主窗口的情况下改变它在内部的工作方式。

# ruby-on-rails - 用于 Ruby on Rails 开发的 Textmate 1.5 和 Sublime Text 2 之间的差异

> ID：13433647
> 
> 赞同：2
> 
> 时间：2012-11-17T18:47:36.203
> 
> 标签：ruby-on-rails, ruby, textmate, sublimetext2, sublimetext

我最近切换到Mac。我正在尝试在 Textmate 1.5 和 Sublime Text 2 之间进行选择以进行 Ruby on Rails 开发。根据我自己的测试，我知道这些编辑器有很多共同点。但是，到目前为止，我还没有看到很多差异。如果您对两者都有经验，您能否列出两者之间的差异？

请列出任何不带主观意见的清单，因为我不想引发一场激烈的战争；只有事实差异。有许多资源列出了相似之处——请关注不同之处。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:37:15.680

我来自 Vim 并尝试了 TextMate 2 和 Sublime Text 2 一段时间。我喜欢他们两个，但出于不同的原因。

我很确定您可以通过插件和设置使 TextMate 2 的行为与 Sublime Text 2 几乎一样，反之亦然。他们都有大量华丽的主题/插件/片段。所以我只是尝试列出“开箱即用”和它们之间的潜在差异。

TM2：

1.  开源
2.  与开箱即用的导轨完美集成。
3.  使用热键在文件之间切换遵循 Rails 约定。
4.  可以向左移动项目列表。
5.  安装插件并通过 GUI 调整设置。
6.  在开箱即用的文本编辑器中运行 rails test。
7.  更多内置包装功能。
8.  通过 [esc] 完成单词并通过 [Tab] 添加片段

ST2：

1.  跨平台
2.  能够模仿一些 Vim 行为。
3.  通过编辑 json 文件调整设置。对于 GUI 用户来说不太直观，但可以轻松进行源代码控制和传输。
4.  通过开箱即用的 Ctrl-P 在文件之间切换。
5.  通过 [Tab] 完成单词并添加所有片段
6.  一个不错的第三方包管理器。

如果有任何错误或丢失的东西，请纠正我。而且我认为最好的方法是在几周内同时尝试它们，了解可能性并根据您最喜欢的工作流程调整其中一个。

# javascript - 使用jQuery在谷歌地图上的两点之间画一条线？

> ID：13433648
> 
> 赞同：17
> 
> 时间：2012-11-17T18:47:57.480
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

如何使用 jQuery 或 Javascript 使用 Google 地图 API 在两点（纬度和经度）之间画一条线？我需要两点之间的最短路径。它可以是任何类型的线。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-19T09:23:30.940

这是绘制线条的 API v3 方法。

```
var line = new google.maps.Polyline({
    path: [
        new google.maps.LatLng(37.4419, -122.1419), 
        new google.maps.LatLng(37.4519, -122.1519)
    ],
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 10,
    map: map
}); 
```

这只是在两点之间画一条直线。如果你想让它成为*最短路径*，你需要考虑到地球是弯曲的，并画一条测地线。为此，您必须通过添加此可选*库*参数来使用Google Maps API 中的*几何库：*

 *```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry"></script> 
```

然后只需添加`geodesic: true`到您的折线的选项：

```
var line = new google.maps.Polyline({
    path: [new google.maps.LatLng(37.4419, -122.1419), new google.maps.LatLng(37.4519, -122.1519)],
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 10,
    geodesic: true,
    map: map
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-17T18:59:43.063

**仅适用于 API v2！**

以下代码片段在两点之间创建了一条 10 像素宽的红色折线：

```
var polyline = new GPolyline([
  new GLatLng(37.4419, -122.1419),
  new GLatLng(37.4519, -122.1519)],
  "#ff0000", 10);
map.addOverlay(polyline); 
```

**[您可以在此处](https://developers.google.com/maps/documentation/javascript/v2/overlays)**找到文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T17:53:32.240

这在两点之间画了一条线……甚至更远。您只需继续在搜索框中输入新地点，它就会继续绘制最近两点之间的点：

[在此处查看工作示例](http://codepen.io/anon/pen/YPvEwW)

**HTML：**

```
<div id="inputDiv">
    <input id="startvalue" type="text" width="90" value="" autofocus placeholder="Keep Adding Places and searching...">
</div>
<div id="map"></div>
<div id="results"></div> 
```

**JS：**

```
var geocoder;
var map;
var location1;
var location2;

$(document).ready(function(){
    initialize();    
    $("#startvalue").on('keydown',function(event){
        if (event.keyCode == 13 ) {
            createLine();
            $(this).val("");
            $(this).focus();
        }
    });

})

function initialize(){
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(7.5653, 80.4303);
    var mapOptions = {
        zoom: 4,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map"), mapOptions);

    setZoom();

    var input = /** @type {HTMLInputElement} */(
    document.getElementById('startvalue'));

    var searchBox = new google.maps.places.SearchBox(
    /** @type {HTMLInputElement} */(input));

}

var address;
var address2;
function createLine(){

    if (address){
        address2 = document.getElementById('startvalue').value;     
    } else {
        address = document.getElementById('startvalue').value;     
    }

    var temp, temp2;

    geocoder.geocode({ 'address': address }, function (results, status) {
        // if (status != "OK") alert("geocode of address:"+address+" failed, status="+status);
        temp = results[0].geometry.location;
        if (address2){
            geocoder.geocode({ 'address': address2 }, function (results, status) {
                // if (status != "OK") alert("geocode of address:"+address+" failed, status="+status);
                temp2 = results[0].geometry.location;
                document.getElementById('results').innerHTML += temp2.toUrlValue()+"<br>";

                var route = [
                    temp,
                    temp2
                ];

                var polyline = new google.maps.Polyline({
                    path: route,
                    strokeColor: "#FF5E56",
                    strokeOpacity: 0.6,
                    strokeWeight: 5
                });
                location1 = convertLocationToLatLong(temp.toUrlValue())
                location2 = convertLocationToLatLong(temp2.toUrlValue())

                var lengthInMeters = google.maps.geometry.spherical.computeLength(polyline.getPath());
                document.getElementById('results').innerHTML += "Polyline is "+lengthInMeters+" meters long<br>";

                polyline.setMap(map);
                plotMap(location1,location2);
            });   
            address = address2;          
        } else {
            location1 = convertLocationToLatLong(temp.toUrlValue());
            plotMap(location1);
        }
    });
}

function convertLocationToLatLong(location){
    var location = location.split(',').map(function(item) {
        return parseFloat(item);
    });
    return location
}

function plotMap(location1,location2){
    var location1 = new google.maps.LatLng(location1[0],location1[1]);
    if (location2){
        var location2 = new google.maps.LatLng(location2[0],location2[1]);      
    }
    var bounds = new google.maps.LatLngBounds();
    bounds.extend(location1);
    if(location2){
        bounds.extend(location2);    
    }
    map.fitBounds(bounds);       
    setZoom();
}

function setZoom(){
    google.maps.event.addListener(map, 'zoom_changed', function() {
    zoomChangeBoundsListener = 
        google.maps.event.addListener(map, 'bounds_changed', function(event) {
            if (this.getZoom() > 15 && this.initialZoom == true) {
                // Change max/min zoom here
                this.setZoom(15);
                this.initialZoom = false;
            }
            google.maps.event.removeListener(zoomChangeBoundsListener);
        });
    });
    map.initialZoom = true;
} 
```

**CSS：**

```
#map {
    margin: 0;
    padding: 0;
    height: 400px;
    margin-top:30px;
   width:100%;
}

#inputDiv{
    position:absolute;
    top:0;
}

#startvalue{
  width:300px;
  padding:8px;
} 
```*

# android - 将嵌套片段与 ViewPager 一起使用时出现黑色空片段（Android 4.2，支持库）

> ID：13433651
> 
> 赞同：1
> 
> 时间：2012-11-17T18:48:02.093
> 
> 标签：android, android-fragments, android-support-library

我有一个使用 SlidingMenu、Action Bar Sherlock 的应用程序，现在我正在尝试重写我以前的代码，以使用 Android 4.2 版本中支持库中引入的嵌套片段。

问题是，当我在片段中滑动时，它们会在一瞬间可见，然后消失（黑屏）。有时它们停留在屏幕上，有时屏幕全黑，片段根本不出现。我怀疑我对片段生命周期缺乏了解，但我真的看不到这里的错误。

刷过它们会给我带来不同的结果。在初始加载时，第一个片段是黑色的。如果我滑动到 nr 4 并返回到 nr 1，那么 nr 1 片段就可以了。如果我快速滑动到 nr 2 然后再到 nr 1，nr 1 又是黑色的。如果我从 nr 2 缓慢滑动到 nr 1，则 nr 1 保持正常：-/

这是我的代码：

```
public class LeagueInfoFragment extends SherlockFragment {
...
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container != null) {
        container.removeAllViews();
    }
    setRetainInstance(true);
    setHasOptionsMenu(true);
    mExampleId = getArguments().getInt("mExampleId");

    View view = inflater.inflate(R.layout.viewpager_tournament, container,
            false);
    ViewPager awesomePager = (ViewPager) view.findViewById(R.id.pager);
    awesomePager.setAdapter(new ExamplePagerAdapter(this, getChildFragmentManager(), createFragments()));

    TabPageIndicator titleIndicator = (TabPageIndicator) view
            .findViewById(R.id.titles);
    titleIndicator.setViewPager(awesomePager);

    return view;
}

private List<Fragment> createFragments() {
        List<Fragment> list = new ArrayList<Fragment>();
        list.add(LeagueTableFragment.newInstance(0));
        list.add(FixturesFragment.newInstance(1));
        list.add(NewsFragment.newInstance(2));
        list.add(TopscorerFragment.newInstance(3));
        return list;    
}

private class ExamplePagerAdapter extends FragmentPagerAdapter {
    String[] pages;

    LeagueInfoFragment _activity;
    List<Fragment> fragments;
    private ExamplePagerAdapter(LeagueInfoFragment a,
            FragmentManager fragManager, List<Fragment> frags) {
        super(fragManager);
        this.fragments = frags;
        _activity = a;
        pages = new String[] { _activity.getString(R.string.table),
                _activity.getString(R.string.fixtures),
                _activity.getString(R.string.news),
                _activity.getString(R.string.top_scorers) };
    }

    @Override
    public int getCount() {
        return fragments.size();
    }

    @Override
    public Fragment getItem(int arg0) {
        return fragments.get(arg0);         
    }

    public String getPageTitle(int position) {
        return pages[position];
    }
} 
```

这是我的片段之一（简化以减少此处发布的代码）：

```
public class NewsFragment extends SherlockFragment implements IAsynchData
{   
public static NewsFragment newInstance(int notUsed) {
    NewsFragment f = new NewsFragment();
    return f;
}

@Override
public View onCreateView(android.view.LayoutInflater inflater,
    ViewGroup container, Bundle savedInstanceState) {
    if (container != null) {
        container.removeAllViews();
    }
    View view = inflater.inflate(R.layout.fragment_news, container,
            false);
            //Code left out to load the URL in the webview
    updateRssFeed("http://www.sportspage.com/myteam");
    return view;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:09:22.503

对不起，但是你为什么在**Fragment的***onCreateView*时这样做：

 **```
if (container != null) {
        container.removeAllViews();
} 
```

据我所知，此时，**容器**是您的**ViewPager**和*removeAllViews* () - 删除您在**ViewPager**中创建的**Fragments的所有****视图**。**

# android - PhoneGap 未在 Android 4.2 上触发 deviceready

> ID：13433656
> 
> 赞同：27
> 
> 时间：2012-11-17T18:48:44.180
> 
> 标签：android, events, cordova

我在 windows 上使用 create.bat 创建了一个应用程序，并使用 ADT 和最新的 SDK 对其进行了编译。

它启动并显示cordova显示，但它不会触发deviceready事件，因为它一直在说“连接到设备”。这同样适用于模拟器。不过，当我将模拟器的操作系统更改为 4.0 时，它可以工作。

这是否正常，因为 4.2 刚刚发布，我必须等待更新？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-20T14:54:37.313

我在装有 Android 4.2 的 Nexus 7 上遇到了同样的问题，但是当我将 AndroidManifest targetSdkVersion 更改为“16”时它可以工作

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />   (Before it was ="17") 
```

我希望这对某人有用。

迭戈

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-19T14:16:43.047

现在是凌晨 1 点，我终于让我的应用程序再次运行。Android 4.2 包含对 webView.addJavascriptInterface 的一些明显与安全相关的更改，这会阻止默认桥接模式工作。

我希望在下一个版本中会有更好的修复，但是如果您需要快速修复，请尝试对 CordovaWebView.exposeJsInterface 进行此更新

```
private void exposeJsInterface() {
    int SDK_INT = Build.VERSION.SDK_INT;
    boolean isHoneycomb = (SDK_INT >= Build.VERSION_CODES.HONEYCOMB && SDK_INT <= Build.VERSION_CODES.HONEYCOMB_MR2);
    if (isHoneycomb || (SDK_INT < Build.VERSION_CODES.GINGERBREAD)) {
        Log.i(TAG, "Disabled addJavascriptInterface() bridge since Android version is old.");
        // Bug being that Java Strings do not get converted to JS strings automatically.
        // This isn't hard to work-around on the JS side, but it's easier to just
        // use the prompt bridge instead.
        return;            
    } else if (SDK_INT < Build.VERSION_CODES.HONEYCOMB && Build.MANUFACTURER.equals("unknown")) {
        // addJavascriptInterface crashes on the 2.3 emulator.
        Log.i(TAG, "Disabled addJavascriptInterface() bridge callback due to a bug on the 2.3 emulator");
        return;

    } else if (SDK_INT == Build.VERSION_CODES.JELLY_BEAN_MR1) {            
        Log.i(TAG, "Disabled addJavascriptInterface() bridge callback for 4.2");
        return;

    }
    this.addJavascriptInterface(exposedJsApi, "_cordovaNative");
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-26T14:49:20.330

在我的情况下，自动生成的 index.html 指的是**phonegap.js**

所以而不是

```
<script type="text/javascript" src="phonegap.js"></script> 
```

我放

```
<script type="text/javascript" src="cordova.js"></script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T05:33:06.120

显然，这已在[Phonegap 2.3.0](https://github.com/phonegap/phonegap/tree/2.3.0)中修复。

在 Android 4.2 上也遇到了这个问题，我的项目使用的是 Phonegap 2.2。

按照这个[简单的升级程序](http://docs.phonegap.com/en/2.3.0/guide_upgrading_android_index.md.html#Upgrading%20Cordova%20Android)进行更新- 问题已解决。

因此，升级到 2.3.0 后，`android:targetSdkVersion="17"`再次设置即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T10:56:00.420

另一个原因是您的 cordova-2.3.0.jar 可能与 cordova-2.3.0.js 文件版本不匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-31T06:26:38.843

我通过删除 js 文件（Index.js）中的任何错误解决了我的问题。

您必须确保您的 javascript 没有任何错误。

# java - 如何以安全的方式将 Double 从 1234567 格式化为 1 234.567

> ID：13433657
> 
> 赞同：1
> 
> 时间：2012-11-17T18:48:59.070
> 
> 标签：java, formatting

全部在标题中..，我正在寻找一种以这种方式格式化所有 Double 的安全方法，还有一些其他示例：

```
1000 ==> 1.000

1500 ==> 1.500

22000 ==> 22.000

1555005 ==> 1 555.005 
```

我查看了[此链接](http://docs.oracle.com/javase/6/docs/api/index.html?java/text/DecimalFormat.html) 但没有帮助...

有安全的方法吗？提前 THX

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:58:36.973

您想打印输入数字除以一千，使用小数点和空格作为千​​位分隔符。安全的方法是首先转换为，按 10 ^(-3)`BigDecimal`缩放，然后使用.^(`DecimalFormat`)

```
final DecimalFormat f = new DecimalFormat("#,###.000");
final DecimalFormatSymbols s = new DecimalFormatSymbols();
s.setGroupingSeparator(' ');
s.setDecimalSeparator('.');
f.setDecimalFormatSymbols(s);
final double input = 1_555_005;
final BigDecimal x = new BigDecimal(input).scaleByPowerOfTen(-3);
System.out.println(f.format(x)); 
```

印刷

```
1 555.005 
```

请注意，像这里一样明确设置分组/小数分隔符**不是**执行此操作的正统方法：通常您会让 Locale 设置决定数字格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T19:00:42.273

这是取自[这里](http://docs.oracle.com/javase/tutorial/i18n/format/numberFormat.html)

```
static public void displayNumber(Locale currentLocale) {

    Integer quantity = new Integer(123456);
    Double amount = new Double(345987.246);
    NumberFormat numberFormatter;
    String quantityOut;
    String amountOut;

    numberFormatter = NumberFormat.getNumberInstance(currentLocale);
    quantityOut = numberFormatter.format(quantity);
    amountOut = numberFormatter.format(amount);
    System.out.println(quantityOut + "   " + currentLocale.toString());
    System.out.println(amountOut + "   " + currentLocale.toString());
} 
```

此示例打印以下内容；它显示了相同数字的格式如何随语言环境而变化：

```
123 456   fr_FR
345 987,246   fr_FR
123.456   de_DE
345.987,246   de_DE
123,456   en_US
345,987.246   en_US 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:01:30.950

始终使用 java 格式化 API。[在http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)上有一个很好的数字格式教程。

您可以获得基于语言环境的法语和格式格式化程序：

```
NumberFormat nf = NumberFormat.getNumberInstance(loc);
DecimalFormat df = (DecimalFormat)nf;
df.applyPattern(pattern);
String output = df.format(value);
System.out.println(pattern + " " + output + " " + loc.toString()); 
```

对于法语，输出将是这样的：

```
###,###.###      123 456,789     fr_FR 
```

# php - 如何检查 allow_url_fopen 是否启用

> ID：13433660
> 
> 赞同：28
> 
> 时间：2012-11-17T18:49:56.277
> 
> 标签：php

我正在使用以下代码

```
echo 'file_get_contents : ', ini_get('allow_url_fopen') ? 'Enabled' : 'Disabled'; 
```

这可以启用或禁用它

但我想作为函数说函数名是`_isgetcontents`

然后我可以在我的网站代码中的任何位置调用它

```
if (_isgetcontents()){
  echo "this is enabled"; // will do an action
}else{
  echo "this is disabled"; // will do another action
} 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-17T18:51:16.077

用于[`ini_get()`](http://pl1.php.net/ini_get)获取某些配置参数的值：

```
if( ini_get('allow_url_fopen') ) {
   // lucky me...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-04T05:54:32.763

你也可以使用这个方法

> phpinfo()

检查各种配置。

# date - 日期的 SAS 宏

> ID：13433663
> 
> 赞同：1
> 
> 时间：2012-11-17T18:50:06.260
> 
> 标签：date, macros, sas

我使用宏遇到了 2 个关于 SAS 日期的问题。为了使它更复杂，我坚持使用 2 个我需要使用的特定宏（它是我试图解决的难题的一部分）。

我需要使用的宏是：

```
%let id=741852
%let month=January February March April May June July August September October November December 
```

我需要生成的输出是不同学科学生的成绩结果。只有通过更改学生的 ID，输出才必须自行更新。

与日期相关的信息仅在我的输出标题中需要。我目前的代码如下：

```
Title1 "Grade for &firstname &lastname;
Tilte2 "Bithtdate : &bday;
Title3 "ID :&id"
title5 "As of &sysdate, the grades are:" 
```

为了创建 bday 变量，我使用了 a 函数，因为我的数据集中有信息：

```
CALL SYMPUTX('bday',Birth_date) 
```

目前我的输出标题 2 和 4 如下：

生日：12556

截至 2012 年 11 月 17 日，等级为：

如何使用宏 &month 使两个标题都如下所示：生日：2012 年 1 月 10 日和截至 2012 年 11 月 15 日，等级如下：

（**日期可能看起来不对，但我在法语工作，而且天数早于一个月）

我坚持使用 %SCAN 功能，但如果我取消 ID，它不会更新月份。请帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:08:10.487

我不清楚你到底想完成什么，但这里有一个类似的例子。我将语言环境设置为法语以显示日期的格式。

```
data a;
length firstname lastname $20;
input id firstname $ lastname $ grade birthday :date9\. ;
datalines;
741852 Mary Jones 92.3 01Jan1980
654654 Chuck Berry 76.9 02Mar1983
823983 Michael Jordan 81.2 04Apr1965
;
run;

options locale=FR;

%macro printinfo(id, ds);
data _null_;
  set &ds;
  where id=&id;
  put "-----------------------------------";
  put "  Grade for: " firstname lastname;
  put "  Birthday : " birthday nldate.;
  put "  ID       : " id;
  put "  As of &sysdate., the grade is: " grade;
  put "-----------------------------------";
  put " ";
run;
%mend;

option nonotes;
%printinfo(741852,a);
%printinfo(654654,a);
option notes; 
```

这是日志输出

```
-----------------------------------
  Grade for: Mary Jones
  Birthday : 01 janvier 1980
  ID       : 741852
  As of 20NOV12, the grade is: 92.3
-----------------------------------
7299   %printinfo(654654,a);
-----------------------------------
  Grade for: Chuck Berry
  Birthday : 02 mars 1983
  ID       : 654654
  As of 20NOV12, the grade is: 76.9
----------------------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:10:08.180

在不更改其他代码的情况下，请尝试以下两个`title`语句：

```
title2 "Birthdate: %qleft(%sysfunc(putn(&bday,worddatx.)))";
title5 "As of %qleft(%sysfunc(putn(%sysfunc(today()),worddatx.))) the grades are:"; 
```

基本上，您的第一个宏变量`bday`需要使用格式进行格式化`WORDDATX`。此外，您应该使用系统函数`TODAY()`来获取当前系统日期，以便您可以根据需要对其进行格式化。

`%SYSFUNC`宏函数允许您执行其他 SAS 函数，在这种情况下`PUTN`和`TODAY()`. `%QLEFT`宏功能修剪前导空白。

# c# - AllowTranspPrent 表单上的 WebBrowser 控件不可见

> ID：13433669
> 
> 赞同：0
> 
> 时间：2012-11-17T18:50:26.470
> 
> 标签：c#, .net, wpf, webbrowser-control

带有“allowTransparency = true”的表单上的 webBrowser 是隐藏的，这是众所周知的问题，但是有没有人解决这个问题？例如：

![在此处输入图像描述](../Images/dcb37053721862110e939b0fb5902f9d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:36:48.897

尝试使用[Awesomuim](http://awesomium.codeplex.com/)。它是一个基于 Chromium 的 Web 引擎，带有纯 WPF（没有糟糕的 activeX 或 COM 东西）UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:13:30.887

这是解决方案：http: [//blogs.msdn.com/b/changov/archive/2009/01/19/webbrowser-control-on-transparent-wpf-window.aspx](http://blogs.msdn.com/b/changov/archive/2009/01/19/webbrowser-control-on-transparent-wpf-window.aspx) 希望它会帮助你。

# java - Java Lucene NGramTokenizer

> ID：13433670
> 
> 赞同：13
> 
> 时间：2012-11-17T18:50:27.790
> 
> 标签：java, lucene, tokenize, n-gram

我正在尝试将字符串标记为 ngram。奇怪的是，在[NGramTokenizer](http://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/analysis/ngram/NGramTokenizer.html#NGramTokenizer%28java.io.Reader,%20int,%20int%29)的文档中，我没有看到将返回已标记化的单个 ngram 的方法。事实上，我只在 NGramTokenizer 类中看到两个返回字符串对象的方法。

这是我拥有的代码：

```
Reader reader = new StringReader("This is a test string");
NGramTokenizer gramTokenizer = new NGramTokenizer(reader, 1, 3); 
```

1.  被标记化的 ngram 在哪里？
2.  如何获得字符串/单词的输出？

我希望我的输出是这样的：这是，是，一个，测试，字符串，这是，是一个，一个测试，测试字符串，这是一个，是一个测试，一个测试字符串。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T23:06:32.220

我不认为你会找到你正在寻找的东西，试图找到返回字符串的方法。您需要处理[Attribute](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/tokenattributes/CharTermAttribute.html)。

应该像这样工作：

```
Reader reader = new StringReader("This is a test string");
NGramTokenizer gramTokenizer = new NGramTokenizer(reader, 1, 3);
CharTermAttribute charTermAttribute = gramTokenizer.addAttribute(CharTermAttribute.class);
gramTokenizer.reset();

while (gramTokenizer.incrementToken()) {
    String token = charTermAttribute.toString();
    //Do something
}
gramTokenizer.end();
gramTokenizer.close(); 
```

但是，如果之后需要重用，请务必重置（） Tokenizer。

* * *

根据评论对单词分组而不是字符进行标记：

```
Reader reader = new StringReader("This is a test string");
TokenStream tokenizer = new StandardTokenizer(Version.LUCENE_36, reader);
tokenizer = new ShingleFilter(tokenizer, 1, 3);
CharTermAttribute charTermAttribute = tokenizer.addAttribute(CharTermAttribute.class);

while (tokenizer.incrementToken()) {
    String token = charTermAttribute.toString();
    //Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T05:12:48.367

对于最新版本的 Lucene (4.2.1)，这是一个有效的干净代码。在执行此代码之前，您必须导入 2 个 jar 文件：

*   lucene-core-4.2.1.jar
*   lucene-analuzers-common-4.2.1.jar

[在http://www.apache.org/dyn/closer.cgi/lucene/java/4.2.1](http://www.apache.org/dyn/closer.cgi/lucene/java/4.2.1)找到这些文件

```
//LUCENE 4.2.1
Reader reader = new StringReader("This is a test string");      
NGramTokenizer gramTokenizer = new NGramTokenizer(reader, 1, 3);

CharTermAttribute charTermAttribute = gramTokenizer.addAttribute(CharTermAttribute.class);

while (gramTokenizer.incrementToken()) {
    String token = charTermAttribute.toString();
    System.out.println(token);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:33:04.557

如果不创建测试程序，我猜 incrementToken() 返回下一个标记，它将是 ngram 之一。

例如，使用长度为 1-3 的 ngram 和字符串 'abc d'，NGramTokenizer 可以返回：

```
a
a b
a b c
b
b c
b c d
c
c d
d 
```

其中“a”、“a b”等是生成的 ngram。

[编辑]

您可能还想查看[Querying lucene tokens without indexing](https://stackoverflow.com/questions/1571071/querying-lucene-tokens-without-indexing)，因为它谈到了窥探令牌流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-19T12:29:26.583

```
package ngramalgoimpl;
import java.util.*;

public class ngr {

    public static List<String> n_grams(int n, String str) {
        List<String> n_grams = new ArrayList<String>();
        String[] words = str.split(" ");
        for (int i = 0; i < words.length - n + 1; i++)
            n_grams.add(concatination(words, i, i+n));
        return n_grams;
    }
     /*stringBuilder is used to cancatinate mutable sequence of characters*/
    public static String concatination(String[] words, int start, int end) {
        StringBuilder sb = new StringBuilder();
        for (int i = start; i < end; i++)
            sb.append((i > start ? " " : "") + words[i]);
        return sb.toString();
    }

    public static void main(String[] args) {
        for (int n = 1; n <= 3; n++) {
            for (String ngram : n_grams(n, "This is my car."))
                System.out.println(ngram);
            System.out.println();
        }
    }
} 
```

# java - 大量客户端的java心跳实现

> ID：13433671
> 
> 赞同：3
> 
> 时间：2012-11-17T18:50:36.913
> 
> 标签：java, sockets, server-side, heartbeat

我在 java 中构建了一个服务器应用程序，客户端可以在其中连接 . 我已经实现了一个心跳系统，客户端每隔 x 秒发送一条小消息。在服务器端，我将客户端发送消息的时间保存在 HashMap 中，如果我收到来自客户端的任何消息，我会为每个客户端使用 TimerTask 每隔 x 秒检查一次。

少量客户端一切正常，但客户端数量增加（2k+）后，内存量非常大，加上Times必须处理大量TimerTask，程序开始占用大量CPU。

有没有更好的方法来实现这一点？我考虑过使用数据库并选择在一定时间内没有发送任何更新的客户端。你认为这会更好，还是更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:56:35.817

一些随机建议：

*   每个客户端只有一个计时器，而不是每个客户端只有一个全局计时器，它经常检查接收到的心跳图（比如每秒 10 次）。遍历该地图并找到死客户。记住共享数据结构的线程安全！

*   如果要使用数据库，请使用轻量级内存数据库，例如[h2](/questions/tagged/h2 "显示标记为“h2”的问题")。但听起来还是有点矫枉过正。

*   使用缓存或其他一些过期地图，并在每次驱逐某些东西时得到通知。这样，当客户端发送心跳时，您基本上可以在映射中放置一些内容，并且如果在给定时间内该条目没有发生任何事情，则映射实现将删除它，调用某种监听器。

*   使用基于角色的系统，如 Akka（具有 Java API）。您可以在服务器端设置一个参与者来处理一个客户端。它比一个线程/计时器更有效。

*   使用不同的数据结构，例如队列。每次收到心跳时，您都会从队列中删除客户端并将其放回最后。现在定期只检查队列的头部，它应该始终包含具有最早心跳的客户端。

# ios - 如何触摸动画对象iOS

> ID：13433674
> 
> 赞同：1
> 
> 时间：2012-11-17T18:50:59.387
> 
> 标签：ios, uiviewanimation

对于动画我的`UIImageView`对象，我使用以下方法：

*   块动画
*   `UIView`基于动画的对象的开始/提交方法

下一个问题是：当我尝试点击视图上的某个对象时，它不会响应我的操作。可动画对象不会收到来自主线程的任何调用。

在我的 UIViewController 中，我有下面的方法应该处理触摸的对象。所有对象都接收触摸事件，但动画块中使用的对象不接收任何事件。

`- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`

有人知道这里的问题是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:08:07.907

为了让动画视图接收用户事件，`UIViewAnimationOptionAllowUserInteraction`必须将其传递到选项参数中。

# php - 选择未来 14 天内的日期范围

> ID：13433678
> 
> 赞同：1
> 
> 时间：2012-11-17T18:51:44.883
> 
> 标签：php, mysql, sql, date, select

我正在使用以下 mySQL 查询来选择 date_start 在接下来的 14 天内的条目，在大多数情况下它工作正常，但不包括“今天”的条目

```
SELECT * , DATE_FORMAT( date_start,  ' %d.%m.%Y' ) AS date_formatted
FROM calendar_event
WHERE Date_start
BETWEEN NOW( ) 
AND DATE_ADD( NOW( ) , INTERVAL 14 
DAY ) 
AND amountpaid + amountpaid2 + amountpaid3 < amount
AND amountpaid > 0 
```

任何想法我如何使它也显示与今天日期安排的条目

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:56:52.680

```
SELECT * , DATE_FORMAT( date_start,  ' %d.%m.%Y' ) AS date_formatted
FROM calendar_event
WHERE Date_start
BETWEEN CURDATE() 
AND DATE_ADD( CURDATE() , INTERVAL 14 DAY ) 
AND amountpaid + amountpaid2 + amountpaid3 < amount
AND amountpaid > 0 
```

一天中除中午 12:00 以外的任何时间，返回的值`NOW()`都将大于当天上午 12:00。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:59:48.810

你试试这个

```
SELECT * , DATE_FORMAT( date_start, ' %d.%m.%Y' ) AS date_formatted FROM calendar_event WHERE Date_start BETWEEN GETDATE() AND DATE_ADD(GETDATE()+14) AND amountpaid + amountpaid2 + amountpaid3 < amount AND amountpaid > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:54:26.437

您可以使用[DATE_FORMAT](http://www.w3schools.com/sql/func_date_format.asp)因此您只能按日期而不是按小时和分钟进行比较，这是错误的情况，因为它与从 00:00 提前几个小时的当前时间进行比较

# ios - 将 Xcode 更新到 4.5.2 和 iOS 6.0.1 后，用 Xcode 40 秒在 iPad 2 上运行应用程序

> ID：13433681
> 
> 赞同：1
> 
> 时间：2012-11-17T18:52:05.047
> 
> 标签：ios, xcode, ipad, debugging, delay

更新到 Xcode 4.5.2 和 iOS 6.0.1 后，在 iPad 2 上使用全新的空项目运行并连接到调试器需要 40 多秒。在 iPhone 5 上运行的相同应用程序需要 7 秒才能连接到调试器. 模拟器工作正常。

如果我从自动启动切换到等待应用程序启动，Xcode 仍然需要 40 多秒才能准备好等待应用程序启动。

我尝试过
的 - 在论坛中搜索答案:)。
- 删除 DerivedData -
删除并创建新的开发配置文件
- 关闭 iAd
- 重新启动 mac 和设备
- 切换电缆
- 尝试不同的项目，创建一个新项目-
将调试器从 LLDB 更改为 GDB
- 控制台日志没有显示任何奇怪错误

我能想到的唯一下一步是重新安装 Xcode 并擦除 iPad 2。希望有人遇到过这个问题并有更好的选择。提前致谢。

# php - 在 Laravel 视图中使用 CSS？

> ID：13433683
> 
> 赞同：120
> 
> 时间：2012-11-17T18:52:10.833
> 
> 标签：php, frameworks, laravel

我刚刚开始学习 Laravel，并且可以做控制器和路由的基础知识。

我的操作系统是 Mac OS X Lion，它在 MAMP 服务器上。

我来自 routes.php 的代码：

```
Route::get('/', function() {
    return View::make('home.index');
});

Route::get('businesses', function() {
    return View::make('businesses.index');
});

Route::get('testing', function() {
    return View::make('testing.index');
});        

Route::get('hello', function() {
    return "<h3>Hello world!</H3>";
}); 
```

那行得通，视图显示完美，“但是”我想要尝试做的是在视图中包含 CSS，我尝试在目录中添加指向样式表的链接，但页面甚至将其显示为默认浏览器字体尽管 css 在 HTML 中！

这是视图文件夹中企业的 index.php：

```
<head>
   <link rel="stylesheet" type="text/css" href="mystyle.css">
</head>

<p>Business is a varied term. My content here. 
```

我尝试在我的其他视图文件夹（测试）中使用 Blade 模板引擎来显示 CSS，但是尽管它位于测试文件夹中，但 CSS 仍然没有显示！

我怎样才能克服这个问题，变得更好 - 因为我正在慢慢学习这个框架。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-11-21T18:16:05.450

将您的资产放在公共文件夹中；例如：

```
public/css
public/images
public/fonts
public/js 
```

然后，要使用 Laravel 访问它们，请使用：

```
{{ HTML::script('js/scrollTo.js'); }}

{{ HTML::style('css/css.css'); }} 
```

或者：

```
{{ URL::asset('js/scrollTo.js'); }}

{{ URL::asset('css/css.css'); }} 
```

此语法将自动生成正确的路径（例如，`public/js/scrollTo.js'）。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-11-17T19:07:33.933

您的 css 文件属于公用文件夹或其子文件夹。

fe如果你把你的css放进去

```
public/css/common.css 
```

你会用

```
HTML::style('css/common.css'); 
```

在您的刀片视图中...

或者您也可以使用资产类[http://laravel.com/docs/views/assets](http://laravel.com/docs/views/assets) ...

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-11-17T19:41:11.183

您也可以像往常一样编写一个简单的链接标签，然后在 href attr 上使用：

```
<link rel="stylesheet" href="<?php echo asset('css/common.css')?>" type="text/css"> 
```

当然你需要把你的css文件放在public/css下

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-12-21T06:45:26.910

我们可以通过以下方式做到这一点。

```
<link href="{{ asset('/css/style.css') }}" rel="stylesheet">

{{ HTML::style('css/style.css', array('media' => 'print')) }} 
```

它将在 Laravel 的公共文件夹中搜索样式文件，然后将其渲染。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-01-04T08:44:07.913

就像 Ahmad Sharif 提到的那样，您可以将样式表链接到`http`

```
<link href="{{ asset('/css/style.css') }}" rel="stylesheet"> 
```

但是如果你正在使用，`https`那么请求将被阻止并且会出现混合内容错误，通过 https 使用它`secure_asset`就像

```
<link href="{{ secure_asset('/css/style.css') }}" rel="stylesheet"> 
```

[https://laravel.com/docs/5.1/helpers#method-secure-asset](https://laravel.com/docs/5.1/helpers#method-secure-asset)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-07-17T10:32:11.217

从 Laravel 5 开始`HTML`，默认情况下不再包含该类。

> 如果您使用表单或 HTML 帮助程序，您将看到一个错误，指出未找到类“表单”或未找到类“Html”。Laravel 5.0 中已弃用 Form 和 HTML 助手；但是，有一些社区驱动的替代品，例如由 Laravel Collective 维护的替代品。

您可以使用以下行来包含您的 CSS 或 JS 文件：

```
<link href="{{ URL::asset('css/base.css') }}" rel="stylesheet">
<link href="{{ URL::asset('js/project.js') }}" rel="script"> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-03-16T15:58:11.493

laravel 5.4 更新 ----

所有答案都使用了 laravel 的 HTML 类，但我想它现在在 laravel 5.4 中已经被贬值了，所以把你的 css 和 js 文件放在 public->css/js 并在你的 html 中引用它们

```
<link href="css/css.common.css" rel="stylesheet" > 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-11-12T20:13:42.100

在我看来，路由到 css 和 js 的最佳选择使用以下代码：

```
<link rel="stylesheet" type="text/css" href="{{ URL::to('route/to/css') }}"> 
```

因此，如果您在公用文件夹的 css 文件夹中有名为 main.css 的 css 文件，它应该如下所示：

```
<link rel="stylesheet" type="text/css" href="{{ URL::to('css/main.css') }}"> 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-03-05T13:03:37.627

您可以简单地将所有文件放在其指定的公共文件夹中，例如

* * *

**公共/css
公共/js
公共/图像**

* * *

然后就像在普通的html中一样调用文件
**`<link href="css/file.css" rel="stylesheet" type="text/css">`**

它适用于任何版本的 Laravel

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-10-11T12:30:13.753

这是不可能的兄弟，Laravel 假设所有内容都在公共文件夹中。

所以我的建议是：

1.  转到**公用文件夹**。
2.  创建一个文件夹，最好命名为**css**。
3.  为各个视图创建文件夹以使事情井井有条。
4.  将相应的 css 放在这些文件夹中，这对您来说会更容易。

或者

如果你真的坚持要把css放在views文件夹中，你可以尝试从你的css文件夹目录中创建*Symlink*（你是mac，所以没关系，但对于windows，这只适用于Vista，Server 2008或更高版本）文件夹，您可以`{{HTML::style('your_view_folder/myStyle.css')}}`在视图文件中使用，为了方便起见，这是一个代码，在您发布的代码中，将这些放在`return View::make()`：

```
$css_file = 'myStyle.css';
$folder_name = 'your_view_folder';
$view_path = app_path() . '/views/' . $folder_name . '/' . $css_file;
$public_css_path = public_path() . '/' . $folder_name;
if(file_exists($public_css_path)) exec('rm -rf ' . $public_css_path);
exec('mkdir ' . $public_css_path);
exec('ln -s ' . $view_path .' ' . $public_css_path . '/' . $css_file); 
```

如果你真的想尝试做你的想法，试试这个：

```
<link rel="stylesheet" href="<?php echo app_path() . 'views/your_view_folder/myStyle.css'?>" type="text/css"> 
```

但是即使文件目录正确也不会起作用，因为 Laravel 不会出于安全目的这样做，Laravel 非常爱你。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-05-22T10:59:40.597

将您的 css 文件放在公共文件夹中。(public/css/bootstrap-responsive.css) 和`<link href="./css/bootstrap-responsive.css" rel="stylesheet">`

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-10-02T07:48:21.150

利用 {！！在新的 laravel 中

```
{!! asset('js/app.min.js') !!}

<script type="text/javascript" src="{!! asset('js/app.min.js') !!}"></script> 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-08-20T18:43:27.283

将要包含的 css 或 js 文件复制到 public 文件夹，或者您可能希望将它们存储在 public/css 或 public/js 文件夹中。

例如。您正在使用公共目录中 css 文件夹中的 style.css 文件，那么您可以使用

`<link rel="stylesheet" href="{{ url() }}./css/style.css" type="text/css"/>`

但在 Laravel 5.2 中，您将不得不使用

```
<link rel="stylesheet" href="{{ url('/') }}./css/style.css" type="text/css"/> 
```

如果你想包含 public/js 文件夹中的 javascript 文件，它也相当简单

```
<script src="{{ url() }}./js/jquery.min.js"></script> 
```

在 Laravel 5.2 中你必须使用

```
<script src="{{ url('/') }}./js/jquery.min.js"></script> 
```

该函数`url()`是一个 laravel 辅助函数，它将生成给定路径的完全限定 URL。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-11-07T10:13:52.783

把你的CSS放在公共文件夹中，然后

在你的刀片文件中添加这个

```
<link rel="stylesheet" type="text/css" href="{{ asset('mystyle.css') }}"> 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-02-14T13:10:17.760

对于那些出于任何原因需要将 js/css 保留在公共文件夹之外的人，在现代 Laravel 中，您可以使用[sub-views](https://laravel.com/docs/5.6/blade#including-sub-views)。说你的观点结构是

```
views
    view1.blade.php
    view1-css.blade.php
    view1-js1.blade.php
    view1-js2.blade.php 
```

在`view1`添加

```
@include('view1-css')
@include('view1-js1')
@include('view1-js2') 
```

在`views-js.blade.php`文件中将您的 js 代码包装在`<script>`标签中

在标签中`views-css.blade.php`包装你的样式`<style>`

`js`这将告诉 Laravel 和您的代码编辑器，这些实际上是`css`文件。您可以对其他 HTML、SVG 和其他可浏览器呈现的内容执行相同操作

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-07-08T11:19:35.350

将它们放在`public`文件夹中，并在视图中使用 `href="{{ asset('public/css/style.css') }}"`. 请注意，`public`调用资产时应包含 。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-04-01T00:03:17.073

对于 Laravel 5.4，如果您使用的是混合助手，请使用

```
 <link href="{{ mix('/css/app.css') }}" rel="stylesheet">
    <script src="{{ mix('/js/app.js') }}"></script> 
```

# import - 限制 Java 包访问

> ID：13433686
> 
> 赞同：2
> 
> 时间：2012-11-17T18:52:20.680
> 
> 标签：import, package, classloader, rule

IE。我有一个 GUI 包和一个 Logic 包。

如何防止逻辑类导入 GUI 类？从事同一项目的其他人（或我自己）可能会这样做，我想阻止这种情况。

例如，解决方案可以是 JUnit 中的检查，如果完成则失败，或者运行时检查会引发异常。沿着这些思路，但是怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:36:47.520

您可以使用 JDepend 或 DependencyFinder 或[Degraph](https://github.com/schauder/degraph)编写这样的测试。

Degraph 是三个工具中唯一一个明确旨在为此类案例实际编写测试的工具。此外，AFAIK JDepend 没有在最近的 Java 版本中找到所有依赖项（如注释中提到的类）。

我是 Degraph 的作者，所以我显然有偏见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T18:28:06.880

我创建了 [JabSaw](http://www.jabsaw.org)项目。它允许您通过使用带注释的类来定义模块并表达模块之间的关系。默认情况下，模块包含单个包中的所有类。可以使用 Maven 插件、命令行或单元测试检查限制。这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-17T19:05:53.687

我想到的一种解决方案是使 GUI 类包私有。虽然不能只隔离一个包，说只有Logic类不能使用GUI，其他的可以。

# html - 通过 Web 浏览器在 vbscript 中运行 .BAT 文件

> ID：13433688
> 
> 赞同：0
> 
> 时间：2012-11-17T18:52:28.410
> 
> 标签：html, vbscript

我是 vbscript 的新手。我不知道它是否发生。我有一些 VB 脚本代码来运行批处理文件。

我正在尝试通过 HTML 代码在 vbscript中运行*.bat文件，如下所示：*

```
<HTML>
<HEAD>
<TITLE>Test Button Events</TITLE>
</HEAD>
<BODY>
<FORM NAME="Form1">
   <INPUT TYPE="Button" NAME="Button1" VALUE="Run">
   <SCRIPT FOR="Button1" EVENT="onClick" LANGUAGE="VBScript">
    Set WshShell = WScript.CreateObject("WScript.Shell")
    WshShell.Run "%comspec% /K C:\path\to\the\file\a.bat", 0
    ' 0 => hide
    MsgBox("File bop.txt successfully generated")
   </SCRIPT>
</FORM>
</BODY>
</HTML> 
```

在这里，我想通过单击生成 bop.txt的*运行*按钮来运行 .bat 文件。但它不起作用。这样做的正确方法是什么？

**更新：**

现在我可以通过将路径替换为来运行 a.bat 文件：

```
file:///C:/path/to/the/file/a.bat 
```

但它不会生成文件 bop.txt。

a.bat 包含：

```
@echo off
echo Hello World!>bop.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:09:57.027

也许这可能是开始的正确位置 - Internet 设置 > 安全 > 自定义级别 > 活动 x

您可能必须启用一些 Activex 权限。

[创建对象“wscript.shell”失败](https://stackoverflow.com/questions/2521655/problem-creating-object-wscript-shell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T15:23:24.530

根据您使用它的方式，我已经成功使用 .hta 文件，例如：

```
<JOB ID="Test">
    <Head>
        <HTA:APPLICATION
        ID="Test"
        />

        <SCRIPT LANGUAGE="VBScript">
        Sub buttonClick
                Set WshShell = WScript.CreateObject("WScript.Shell")
            WshShell.Run "%comspec% /K C:\path\to\the\file\a.bat", 0
            ' 0 => hide
            MsgBox("File bop.txt successfully generated")
        End Sub
        </SCRIPT>

    </HEAD>
    <HTML>
        <FORM NAME="Form1">
        <INPUT TYPE="Button" NAME="Button1" VALUE="Run" ONCLICK="buttonClick">
    </HTML>
</JOB> 
```

另存为文件.hta

据我了解，HTA 文件在安全方面具有更大的范围，因此不会被浏览器阻止。

这里有更多信息：

[http://msdn.microsoft.com/en-us/library/ms536496(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms536496(v=vs.85).aspx)

# php - 返回 text/html 的图像标题

> ID：13433700
> 
> 赞同：0
> 
> 时间：2012-11-17T18:53:31.667
> 
> 标签：php, image, header

我正在尝试从网页中检索图像，到目前为止它一直运行良好，除了我正在查看的网站之一将图像提供为`Content-Type: text/html`，导致我的脚本将其拒绝为不是真实图像。

这是我用来确定内容类型的代码片段：

```
$accepted_mime = array('image/gif', 'image/jpeg', 'image/jpg', 'image/png');    
$headers = get_headers($image);

// Find the Content-Type header
$num_headers = sizeOf($headers);
for($x=0;$x<$num_headers;$x++) {
    preg_match('/^Content-Type: (.+)$/', $headers[$x], $mime_type);
    if (isset($mime_type[1]) && in_array($mime_type[1], $accepted_mime)) {
        return true;
    }
} 
```

对于我尝试过的网站，它们会正确返回（例如 , 等结果`image/gif`）`image/png`，但`mpaa.org`似乎使用 type 来提供它们的图像`text/html`。这是正常的吗？

我添加了一个`print_r`来查看 get_headers` 返回的头数组：

```
Array
(
    [0] => http://www.mpaa.org/templates/images/header_mpaa_logo.gif
    [1] => Array
        (
            [0] => HTTP/1.1 200 OK
            [1] => Server: nginx/1.2.0
            [2] => Date: Sat, 17 Nov 2012 17:19:06 GMT
            [3] => Content-Type: text/html
            [4] => Connection: close
            [5] => P3P: CP="NON DSP COR ADMa OUR IND UNI COM NAV INT"
            [6] => Cache-Control: no-cache, no-store, must-revalidate
            [7] => Pragma: no-cache
        )

) 
```

我可以轻松地将其添加`text/html`到我接受的内容类型列表中，但这绝对不是理想的解决方案；）有谁知道为什么 mpaa.org 用这个来提供他们的图像`Content-Type`？这样做是常规做法吗（可能使用旧网站/服务器）？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:58:31.583

精彩的 MPAA 使用用户代理嗅探或检查 cookie 来确定您的浏览器是否支持 JavaScript。由于您没有指定用户代理字符串或发送 cookie，因此他们假定您没有 JavaScript 并返回一个说明该内容的页面，而不是原始图像。

如果您使用浏览器加载它，您会注意到您确实得到`image/gif`了 ，以及您所追求的图像： [http ://www.mpaa.org/templates/images/header_mpaa_logo.gif](http://www.mpaa.org/templates/images/header_mpaa_logo.gif)

如果您使用 cURL 或 Fiddler 或其他一些奇怪的用户代理字符串发出相同的请求：

> 本网站需要启用 JavaScript 和 Cookie。请更改您的浏览器设置或升级您的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:56:58.407

不要依赖标题。它们可以轻松更改，并且正如您现在遇到的那样，它们并不可靠。

我会这样做：

*   下载图片
*   检查图像是否是图像（通过使用 getimagesize 或类似的东西）

# .htaccess - 不要重写静态 css/js/img 文件

> ID：13433703
> 
> 赞同：4
> 
> 时间：2012-11-17T18:54:14.783
> 
> 标签：.htaccess, mod-rewrite

我试图让我的 htaccess 文件不重写我的静态文件（js/css/images）。

这是我当前的 htaccess 文件：

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule    !\.(jpg|css|js|gif|png)$    public/    [L]
RewriteRule !\.(jpg|css|js|gif|png)$ public/index.php?url=$1 
```

我该如何重写它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-18T11:44:15.820

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^.*\.(jpg|css|js|gif|png)$ [NC]
RewriteRule ^(.*)$ public/index.php?url=$1 
```

所有对不以列出的扩展名结尾的不存在文件的请求（不区分大小写的匹配）都被重写为`public/index.php`将当前 URL 作为`url=`GET 参数传递

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-09T21:16:00.623

这仅适用于它下面的一行。因此，如果您有许多 RewriteRules，则使用以下内容可能会有所帮助：

```
 RewriteEngine on

    RewriteRule ^(.*?)\.(php|css|js|jpg|jpeg|png|pdf)$ - [L]
    RewriteRule ^(.+)/(.+)/?$ index.php?page=$1&subpage=$2 [L]
    RewriteRule ^(.+)$ index.php?page=$1 [L] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-10T11:23:59.540

为后人。

也许我的规则会有用

> `\www\.htaccess`

```
#file: \www\.htaccess

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} \.(css|js|html?|png|gif|jpg|jpe?g|svg|xls.?|pdf|docx?|eot|ttf|woff2?)$ [NC]
RewriteRule (.*\.[css|js|html?|png|gif|jpg|jpe?g|svg|xls.?|pdf|docx?|eot|ttf|woff2?]+) public/$1?a [QSA,L]

RewriteCond %{REQUEST_URI} \.(css|js|html?|png|gif|jpg|jpe?g|svg|xls.?|pdf|docx?|eot|ttf|woff2?) [NC]
RewriteRule (.*\.[css|js|html?|png|gif|jpg|jpe?g|svg|xls.?|pdf|docx?|eot|ttf|woff2?]+) public/$1 [QSA,L]

#RUN TEST
RewriteCond %{REQUEST_URI} !\.(css|js|html?|png|gif|jpe?g|svg|xls.?|pdf|docx?|eot|ttf|woff2?)$ [NC]
RewriteRule ^(.*)$ index.php?REQUEST_FILENAME=%{REQUEST_FILENAME}&date=$1&REQUEST_URI=%{REQUEST_URI} [QSA,L]
#END TEST

RewriteRule . index.php?url=%{REQUEST_URI} [QSA,L]

ErrorDocument 404 index.php?error=404 
```

> `\www\index.php`

```
<?php
// file: /www/index.php
 var_dump($_GET); 
```

> `\www\app\.htaccess`

```
#file: \www\app\.htaccess`

 RewriteEngine On
 RewriteRule ^(.*)$ ../_%{REQUEST_URI} [QSA,L] 
```

> `\www\public\.htaccess`

```
#file: \www\public\.htacces`
 RewriteEngine on

 RewriteCond %{REQUEST_FILENAME} !-l 
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f

 RewriteRule ^(.*)$ index.php?url=%{REQUEST_URI}&rewrite=$1 [QSA,L] 
```

> `/www/public/index.php`

```
<?php
// file: /www/public/index.php
 var_dump($_GET, __DIR__); 
```

# c# - 将控制台聊天程序转换为 GUI

> ID：13433706
> 
> 赞同：2
> 
> 时间：2012-11-17T18:54:19.823
> 
> 标签：c#, multithreading, sockets, networking, network-programming

我在控制台中有一个简单的聊天客户端。这是代码

服务器用

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.IO;
using System.Threading;

namespace chat_server
{
 class Program
{
    static TcpListener server = new TcpListener(IPAddress.Any, 9999);

    static void input(object obs)
    {
        StreamWriter writer = obs as StreamWriter;
        string op = "nothing";
        while (!op.Equals("exit"))
        {
            Console.ResetColor();
            Console.WriteLine("This is the " + Thread.CurrentThread.ManagedThreadId);
            Console.WriteLine("Enter your text(type exit to quit)");
            op = Console.ReadLine();
            writer.WriteLine(op);
            writer.Flush();
        }
    }

    static void output(Object obs)
    {
        StreamReader reader = obs as StreamReader;
        Console.ForegroundColor = ConsoleColor.Green;
        while (true)
        {
            Console.WriteLine(reader.ReadLine());
        }
    }

    static void monitor()
    {
        while (true)
        {
            TcpClient cls = server.AcceptTcpClient();
            Thread th = new Thread(new ParameterizedThreadStart(mul_stream));
            th.Start(cls);
        }
    }

    static void mul_stream(Object ob)
    {
        TcpClient client = ob as TcpClient;
        Stream streams = client.GetStream();
        StreamReader reads = new StreamReader(streams);
        StreamWriter writs = new StreamWriter(streams);

        new Thread(new ParameterizedThreadStart(output)).Start(reads);
        input(writs);
    }

    static void Main(string[] args)
    {

        server.Start();
        monitor();
        server.Stop();
        Console.ReadKey();
    }
 }
} 
```

这是客户端代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.IO;
using System.Threading;

namespace chat_client
{
 class Program
 {
    static StreamReader reader;
    static StreamWriter writer;
    static Thread input_thread;

    static void input()
    {
        string op = "nothing";
        while (!op.Equals("exit"))
        {
            Console.ResetColor();
            Console.WriteLine("Enter your text(type exit to quit)");
            op = Console.ReadLine();
            writer.WriteLine(op);
            writer.Flush();
        }
    }

    static void output()
    {
        Console.ForegroundColor = ConsoleColor.Blue;
        while (true)
        {
            Console.WriteLine(reader.ReadLine());
        }
    }

    static void Main(string[] args)
    {
        Console.WriteLine("Enter the ip address");
        string ip = Console.ReadLine();
        TcpClient client = new TcpClient(ip,9999);

        NetworkStream stream = client.GetStream();
        reader = new StreamReader(stream);
        writer = new StreamWriter(stream);

        input_thread = new Thread(input);
        input_thread.Start();

        /*
        writer.Write("Hello world");
        writer.Flush();
        Console.WriteLine("Message Sent");*/
        output();
        client.Close();
        Console.ReadKey();
    }
 }
} 
```

现在的问题是我在将此代码转换为 GUI 时遇到了一些问题。例如，服务器中通过特定流向客户端传递消息的输入功能应该在某种程度上等同于 GUI 中的 SEND 按钮。

然而，每个线程都会创建自己的流，我认为在不同的线程上创建单独的事件处理程序不是一个好主意。

简而言之，我需要一些关于从哪里开始这个项目的建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:19:56.160

网络很难。您当前的方法是阅读所有内容并将所有内容视为完整的消息，这种方法很脆弱。它在调试期间工作，但在生产期间会失败，因为 TCP 是基于流的。

相反，您可以使用现有框架来抽象出网络层。碰巧，我制作了一个开源框架（LGPL）。

在这种情况下，我们只希望能够聊天。所以我添加了一个这样的聊天消息定义：

```
public class ChatMessage
{
    public DateTime CreatedAt { get; set; }
    public string UserName { get; set; }
    public string Message { get; set; }
} 
```

该消息被放入共享程序集中（由客户端和服务器使用）。

服务器本身是这样定义的：

```
public class ChatServer : IServiceFactory
{
    private readonly List<ClientChatConnection> _connectedClients = new List<ClientChatConnection>();
    private readonly MessagingServer _server;

    public ChatServer()
    {
        var messageFactory = new BasicMessageFactory();
        var configuration = new MessagingServerConfiguration(messageFactory);
        _server = new MessagingServer(this, configuration);
    }

    public IServerService CreateClient(EndPoint remoteEndPoint)
    {
        var client = new ClientChatConnection(this);
        client.Disconnected += OnClientDisconnect;

        lock (_connectedClients)
            _connectedClients.Add(client);

        return client;
    }

    private void OnClientDisconnect(object sender, EventArgs e)
    {
        var me = (ClientChatConnection) sender;
        me.Disconnected -= OnClientDisconnect;
        lock (_connectedClients)
            _connectedClients.Remove(me);
    }

    public void SendToAllButMe(ClientChatConnection me, ChatMessage message)
    {
        lock (_connectedClients)
        {
            foreach (var client in _connectedClients)
            {
                if (client == me)
                    continue;

                client.Send(message);
            }
        }
    }

    public void SendToAll(ChatMessage message)
    {
        lock (_connectedClients)
        {
            foreach (var client in _connectedClients)
            {
                client.Send(message);
            }
        }
    }

    public void Start()
    {
        _server.Start(new IPEndPoint(IPAddress.Any, 7652));
    }
} 
```

看？任何地方都没有网络代码。

客户端是事件更容易：

```
static class Program
{
    private static MainForm _mainForm;
    private static MessagingClient _client;

    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        ConfigureChat();
        _mainForm = new MainForm();
        Application.Run(_mainForm);
    }

    private static void ConfigureChat()
    {
        _client = new MessagingClient(new BasicMessageFactory());
        _client.Connect(new IPEndPoint(IPAddress.Loopback, 7652));
        _client.Received += OnChatMessage;
    }

    private static void OnChatMessage(object sender, ReceivedMessageEventArgs e)
    {
        _mainForm.InvokeIfRequired(() => _mainForm.AddChatMessage((ChatMessage)e.Message));
    }

    public static void SendChatMessage(ChatMessage msg)
    {
        if (msg == null) throw new ArgumentNullException("msg");
        _client.Send(msg);
    }
} 
```

![在此处输入图像描述](../Images/14452394c508c1967e4d46a902dfe231.png)

完整示例可在此处获得：[https ://github.com/jgauffin/Samples/tree/master/Griffin.Networking/ChatServerClient](https://github.com/jgauffin/Samples/tree/master/Griffin.Networking/ChatServerClient)

**更新：**

由于这是一个学校项目，除了 .NET 之外你不能使用任何东西，我可能会使用最简单的方法。那就是使用换行符 ( `"\r\n"`) 作为分隔符。

所以在你刚刚使用的每`var chatMessage = streamReader.ReadLine()`一面`streamWriter.WriteLine("Chat message");`

# java - java - 如何在不使用Java中的递归或循环的情况下找到阶乘？

> ID：13433709
> 
> 赞同：2
> 
> 时间：2012-11-17T18:54:53.837
> 
> 标签：java, factorial

我需要在不使用循环或递归的情况下在 java 中找到阶乘？因此，如果有任何方法，请提供帮助。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T19:02:55.440

对 Gamma 函数使用斯特林近似[http://en.wikipedia.org/wiki/Stirling%27s_approximation](http://en.wikipedia.org/wiki/Stirling%27s_approximation)

![在此处输入图像描述](../Images/c3b00ec358367264f9ad218cde41151a.png)

但这并不精确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T19:06:28.070

这里有另一个帖子，您可能想看看：

[有没有一种方法可以在 Java 中计算阶乘？](https://stackoverflow.com/questions/891031/is-there-a-method-that-calculates-a-factorial-in-java)

另外——这个链接有很多不同的阶乘函数实现——你可能会在这里找到你要找的东西。至少，你会学到很多关于阶乘的知识。

[http://www.luschny.de/math/factorial/FastFactorialFunctions.htm](http://www.luschny.de/math/factorial/FastFactorialFunctions.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:54:41.400

有点不切实际，但在任何地方都没有明确的循环。

```
import javax.swing.Timer;
import java.awt.event.*;
import java.util.concurrent.ArrayBlockingQueue;

public class Fac {
    public static int fac(final int _n) {
        final ArrayBlockingQueue<Integer> queue = new ArrayBlockingQueue<Integer>(1);
        final Timer timer = new Timer(0, null);
        timer.addActionListener(new ActionListener() {
            int result = 1;
            int n = _n;
            public void actionPerformed(ActionEvent e) {
                result *= n;
                n--;
                if(n == 0) {
                    try {
                        queue.put(result);
                    } catch(Exception ex) {
                    }
                    timer.stop();
                }
            }
        });
        timer.start();
        int result = 0;
        try {
            result = queue.take();
        } catch(Exception ex) {
        }
        return result;
    }

    public static void main(String[] args) {
        System.out.println(fac(10));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-28T21:51:08.390

简单的一个班轮解决方案，虽然在内部它正在做一个循环，因为没有它就不可能，但你不需要自己做：

```
Long factorialNumber = LongStream.rangeClosed(2, N).reduce(1, Math::multiplyExact); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T18:56:03.420

您预先计算值。

更严重的是，这并不是真正可行的，因为如果您可能需要进行任意多的计算，递归和循环是不可避免的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-23T15:43:59.053

我们可以在 Java 8 中做一个函数阶乘：

```
package com.promindis.jdk8;

import java.math.BigInteger;
import static java.math.BigInteger.*;

public class Factorial implements TCO {

  private TailCall<BigInteger> factorialTCO(
    final BigInteger fact, final BigInteger remaining) {
    if (remaining.equals(ONE))
      return done(fact);
    else
      return call(() ->
        factorialTCO(fact.multiply(remaining), dec(remaining)));
  }

  private BigInteger dec(final BigInteger remaining) {
    return remaining.subtract(ONE);
  }

  private BigInteger apply(final String from) {
    return factorialTCO(ONE, new BigInteger(from)).invoke();
  }

  public static void main(final String[] args) {
    System.out.println(new Factorial().apply("5"));
    System.out.println(new Factorial().apply("100"));

  }
} 
```

[来源](https://github.com/globulon/lambda-jdk8/blob/master/src/com/promindis/jdk8/Factorial.java)

# java - 如何表示Java Double Array 类型（修复反汇编代码）

> ID：13433712
> 
> 赞同：0
> 
> 时间：2012-11-17T18:55:09.610
> 
> 标签：java, arrays, bytecode, disassembly, bytecode-manipulation

我有一些代码依赖于使用 Java 1.7 编译的 jar。我目前在 OSX 上工作，我只能访问 Java 1.6。我目前正在尝试在本地重新编译这些 jar。但是，jar 只包含 .class 文件。我下载了一个反汇编程序并保存了生成的 .java 文件。现在，我目前正在尝试调试一些错误。其中一个文件检查某些参数是否等于类或类型。我遇到的问题是有表达

```
if (paramType.equals([D.class)) { ... } 
```

这导致编译器错误。表达双数组类的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:56:11.207

假设它是 (primitive) 的数组`double`：

```
if (paramType.equls(double[].class)) { ... } 
```

[或者，如果它是(wrapper type)`java.lang.Double`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html)的数组：

```
if (paramType.equls(Double[].class)) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:01:08.957

如果这些类没有链接到 Java 1.7 中引入的任何新库类，那么它们在 Java 1.6 中应该可以正常工作，因为 1.7 中引入的唯一字节码功能实际上并未在 Java 中使用。

您所要做的就是将每个文件的第 8 个字节从 51 更改为 50。您甚至不必拆卸和重新组装它们。

# jquery-mobile - 如何显示带有 changePage 功能的对话框？

> ID：13433716
> 
> 赞同：2
> 
> 时间：2012-11-17T18:56:05.670
> 
> 标签：jquery-mobile, html

我正在尝试使用 jQuery mobile 创建一个简单的小部件。我有一个按钮，当我单击该按钮时，我希望出现一个显示日期提交表单的对话框。我在我的html中定义了一个div，如下所示：

```
 <div data-role="dialog" id="DatePage" >
        <div data-role="content">
        <form>
                <input type="date" name="date" />
                <input type="submit"/>
        </form> 
        </div>
    </div> 
```

现在，为了在单击按钮时出现此对话框，我一直在尝试使用以下代码行：

```
$.mobile.changePage("#DatePage"); 
```

但是，当我这样做时，什么也没有发生。我尝试添加其他参数并使用不同的变体，但没有任何效果。根据我在其他地方读到的内容以及我看到的示例，这一行应该向我显示对话框，但它根本没有。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:24:49.723

使用这个片段

```
<button onClick="$.mobile.changePage('#DatePage', {transition: 'pop', role: 'dialog'});">Open Dialog</button> 
```

要使用按钮打开对话框，[请参阅工作示例](http://jsfiddle.net/RSsRz/1/)

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
  <div data-role="page">
    <div data-role="header">
      <h1>Header</h1>
    </div><!-- /header -->

    <div data-role="content">
      <button onClick="$.mobile.changePage('#DatePage', {transition: 'pop', role: 'dialog'});">Open Dialog</button>
    </div>
  </div><!-- /page -->

  <div data-role="page" id="DatePage">
    <div data-role="content">
      <h1>My Dialog</h1>
      <form>
        <input type="date" name="date" />
        <input type="submit"/>
        <button data-rel="back">Close Dialog</button>
      </form>
    </div>
  </div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:38:30.613

在我的最终解决方案中，对话框由以下代码片段触发：

> $.mobile.changePage('#DatePage', {transition: 'pop'});

仅在第一次单击按钮时才显示对话框的问题出现了，因为在第一次显示对话框并且单击了两个按钮中的任何一个后，首页再也没有显示，对话框消失了。可以看到该页面，因为它是对话框的背景，但实际上它从未存在过。为了避免这个问题，我使用了以下代码片段：

```
<!-- The popup dialog for date selection -->
    <div data-role="page" id="DatePage">

        <div data-role="content">               
            <form id="DateSubmissionForm">
                <input type="date" name="date" />
                <a href="#FrontPage" input-type="submit" data-role="button" class="ui-btn-left">Submit</a>
                <a href="#FrontPage" data-role="button"class="ui-btn-right">Cancel</a>
            </form>
        </div>
    </div> 
```

“提交”和“取消”按钮实际上是返回首页的链接。使用此代码，首页再次真正显示，并且按钮再次可点击。

# ios - UIActivity activityViewController 在 iPad 上以模态方式呈现，而不是在弹出窗口中

> ID：13433718
> 
> 赞同：13
> 
> 时间：2012-11-17T18:56:16.787
> 
> 标签：ios, ipad, sdk, popover, uiactivity

在 iOS 6 中使用客户 UIActivity 子类时，可以指定一个自定义视图控制器，当您从初始 UIActionViewController 的视图中选择您的操作时将显示该控制器。您可以通过从 UIActivity 子类的`activityViewController`方法返回对自定义视图控制器的引用来执行此操作。

根据[UIActivity 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)：

> **活动视图控制器**
> 
> 此方法的默认实现返回`nil`. 使用视图控制器提供额外 UI 的子类可以重写此方法以返回该视图控制器。如果此方法返回一个有效对象，系统会为您呈现返回的视图控制器，而不是调用该`performActivity`方法。在 iPad 上，您的视图控制器显示在弹出框内。在 iPhone 和 iPod touch 上，您的视图控制器以模态方式呈现。
> 
> 您的自定义视图控制器应该为您的自定义 UI 提供一个视图，并且应该处理这些视图中的任何用户交互。完成活动后，不要自行关闭视图控制器。相反，调用该`activityDidFinish:`方法并让系统为您解除它。

请注意第一段末尾的那一点：**在 iPad 上，您的视图控制器显示在弹出框内。在 iPhone 和 iPod touch 上，您的视图控制器以模态方式呈现。**

但是，在 iPad 上`activityViewController`，无论我如何呈现 UIActivityViewController（模态或通过弹出框），返回的视图控制器总是模态显示。通过弹出框呈现时，它会导致它崩溃，因为它认为它没有被解雇。

我究竟做错了什么？这是 iOS 6 中的错误吗？

* * *

**更新：这是一个说明问题的简单 Xcode 项目。随意克隆它，看看你是否能看出我们哪里出错了：[github.com/simonwhitaker/GSActivityDemo](https://github.com/simonwhitaker/GSActivityDemo)**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-20T09:49:28.450

正如我们所说的 UIActivityViewController，它是向用户显示可用活动的视图。苹果声明以下...

> 您的应用负责配置、呈现和关闭此视图控制器。视图控制器的配置包括指定视图控制器应该操作的数据对象。（您还可以指定您的应用程序支持的自定义服务列表。）当呈现视图控制器时，您必须使用当前设备的适当方式来执行此操作。在 iPad 上，您必须在弹出窗口中显示视图控制器。在 iPhone 和 iPod touch 上，您必须以模态方式呈现。

我把最后一行作为你必须处理视图呈现方式的标志，所以我检查代码是否在 iPad 上运行并相应地使用 UIPopover。正如您可以在这里看到的那样...... [https://github.com/bufferapp/buffer-uiactivity/blob/master/BufferUIActivity/Views/FirstViewController.m](https://github.com/bufferapp/buffer-uiactivity/blob/master/BufferUIActivity/Views/FirstViewController.m)在以下方法中。

```
-(IBAction)openUIActivityView:(id)sender {

    NSString *text = @"Hello world";
    NSString *url = @"http://bufferapp.com";

    NSArray *activityItems = @[text, url];

    BufferUIActivity *bufferActivity = [[BufferUIActivity alloc] init];

    UIActivityViewController *activityView = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:@[ bufferActivity ]];

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        [self presentViewController:activityView animated:YES completion:^{

        }];
    } else {
        // Change Rect to position Popover
        self.popup = [[UIPopoverController alloc] initWithContentViewController:activityView];
        [self.popup presentPopoverFromRect:CGRectMake(self.view.frame.size.width/2, self.view.frame.size.width/2, 100, 100) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T11:32:25.887

我认为活动视图控制器未显示在弹出窗口中的问题是一个错误，文档反映了正确的意图。但是，我不知道解决此 atm 的方法。

然而，关于关闭视图控制器的部分是一个不同的问题。您不应该关闭从返回的视图控制器`-[UIActivity activityViewController]`，但**您有**责任关闭您呈现的弹出框，这反过来也会从层次结构中删除您的自定义视图控制器。（而且因为它以这种方式工作，我倾向于相信自定义视图控制器通常必须显示在弹出窗口中。）

这是[示例应用程序中的代码示例](https://github.com/simonwhitaker/GSActivityDemo)：

```
UIActivityViewController *vc = [[UIActivityViewController alloc] initWithActivityItems:activityItems
                                                                 applicationActivities:applicationActivities];

vc.completionHandler = ^(NSString *activityType, BOOL completed){
  [self.activityPopoverController dismissPopoverAnimated:YES];
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T09:47:59.810

我在 iOS 7 中遇到了同样的问题。在弹出窗口中显示自定义视图的解决方案是在`-(void)performActivity`方法中创建并显示它，而不是在`-(UIViewController *)activityViewController`.

您可以在此链接下的我的问题/答案中看到示例代码：
[iOS 7 custom UIActivity as popover](https://stackoverflow.com/questions/23611070/ios-7-custom-uiactivity-as-popover)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-16T08:32:34.043

我刚刚遇到了同样的问题，但通过将 ViewController 设置为：

```
[yourViewController setModalPresentationStyle:UIModalPresentationPageSheet]; 
```

在

```
- (UIViewController *)activityViewController 
```

希望这可以帮助

# sql - 为什么这个 sql 函数不能与 REPLACE 一起使用？

> ID：13433721
> 
> 赞同：1
> 
> 时间：2012-11-17T18:56:26.107
> 
> 标签：sql, sql-server, sql-server-2008-r2, sql-function

我的 sql 函数有问题。以下函数按预期运行，但当我替换时，它只返回一行：

```
CAST(t.ColumnName as nvarchar(100)) 
```

为了：

```
REPLACE(CAST(t.ColumnName as nvarchar(100)), 'ID', 'Id') 
```

怎么了？这是我的调用代码：

```
PRINT dbo.CreatePocoFromTable('dbo.OnePoundFish') 
```

这是函数本身：

```
CREATE FUNCTION [dbo].[CreatePocoFromTable]
    (@SchemaAndName nvarchar(200))
RETURNS Nvarchar(MAX) AS
BEGIN
/* Example call:

PRINT dbo.CreatePocoFromTable('dbo.OnePoundFish')

*/

DECLARE @TableName NVARCHAR(100) = SUBSTRING(@SchemaAndName , CHARINDEX('.', @SchemaAndName ) + 1, LEN(@SchemaAndName ))   
DECLARE @TableSchema NVARCHAR(100) = SUBSTRING(@SchemaAndName , 1, CHARINDEX('.', @SchemaAndName ) - 1)  
DECLARE @result Nvarchar(max) = ''

SET @result = @result + 'using System;' + CHAR(13) + CHAR(13) 

IF (@TableSchema IS NOT NULL) 
BEGIN
    SET @result = @result + 'namespace ' + @TableSchema  + CHAR(13) + '{' + CHAR(13) 
END

SET @result = @result + 'public class ' + @TableName + CHAR(13) + '{' + CHAR(13) 

SET @result = @result + '#region Instance Properties' + CHAR(13)  

SELECT @result = @result + CHAR(13) 
    -- BL/DAL/DataRepository Entity attributes
    + '[DataField("' + t.ColumnName + '")]' + CHAR(13)
    + ' public ' + t.ColumnType + ' ' + CAST(t.ColumnName as nvarchar(100)) + ' { get; set; } ' + CHAR(13) 

FROM
(
    SELECT  
        c.COLUMN_NAME   AS ColumnName 
        , CASE c.DATA_TYPE   
            WHEN 'bigint' THEN
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Int64?' ELSE 'Int64' END
            WHEN 'binary' THEN 'Byte[]'
            WHEN 'bit' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Boolean?' ELSE 'Boolean' END            
            WHEN 'char' THEN 'String'
            WHEN 'date' THEN
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'DateTime?' ELSE 'DateTime' END                        
            WHEN 'datetime' THEN
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'DateTime?' ELSE 'DateTime' END                        
            WHEN 'datetime2' THEN  
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'DateTime?' ELSE 'DateTime' END                        
            WHEN 'datetimeoffset' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'DateTimeOffset?' ELSE 'DateTimeOffset' END                                    
            WHEN 'decimal' THEN  
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Decimal?' ELSE 'Decimal' END                                    
            WHEN 'float' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Single?' ELSE 'Single' END                                    
            WHEN 'image' THEN 'Byte[]'
            WHEN 'int' THEN  
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Int32?' ELSE 'Int32' END
            WHEN 'money' THEN
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Decimal?' ELSE 'Decimal' END                                                
            WHEN 'nchar' THEN 'String'
            WHEN 'ntext' THEN 'String'
            WHEN 'numeric' THEN
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Decimal?' ELSE 'Decimal' END                                                            
            WHEN 'nvarchar' THEN 'String'
            WHEN 'real' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Double?' ELSE 'Double' END                                                                        
            WHEN 'smalldatetime' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'DateTime?' ELSE 'DateTime' END                                    
            WHEN 'smallint' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Int16?' ELSE 'Int16'END            
            WHEN 'smallmoney' THEN  
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Decimal?' ELSE 'Decimal' END                                                                        
            WHEN 'text' THEN 'String'
            WHEN 'time' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'TimeSpan?' ELSE 'TimeSpan' END                                                                   

            WHEN 'timestamp' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'DateTime?' ELSE 'DateTime' END                                    
            WHEN 'tinyint' THEN 
                CASE C.IS_NULLABLE
                    WHEN 'YES' THEN 'Byte?' ELSE 'Byte' END                                                
            WHEN 'uniqueidentifier' THEN 'Guid'
            WHEN 'varbinary' THEN 'Byte[]'
            WHEN 'varchar' THEN 'String'
            ELSE 'Object'
        END AS ColumnType
        , c.ORDINAL_POSITION 
FROM    INFORMATION_SCHEMA.COLUMNS c
WHERE   c.TABLE_NAME = @TableName and ISNULL(@TableSchema, c.TABLE_SCHEMA) = c.TABLE_SCHEMA  
) t
ORDER BY t.ORDINAL_POSITION

SET @result = @result + CHAR(13) + '#endregion Instance Properties' + CHAR(13)  

SET @result = @result  + '}' + CHAR(13)

IF (@TableSchema IS NOT NULL) 
BEGIN
    SET @result = @result + CHAR(13) + '}' 
END

  RETURN @Result
END 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:28:55.403

只有有趣的部分......

```
SELECT @result = @result + CHAR(13) 
    -- BL/DAL/DataRepository Entity attributes
    + '[DataField("' + CAST(REPLACE(t.ColumnName , 'ID', 'Id') as nvarchar(100))   + '")]' + CHAR(13)
--    + '[DataField("' + t.ColumnName  + '")]' + CHAR(13)

    + ' public ' + t.ColumnType + ' ' + CAST(t.ColumnName as nvarchar(100)) + ' { get; set; } ' + CHAR(13) 

FROM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:03:05.970

您的 sql server 是否设置为区分大小写？如果不是（我相信它不是默认情况下），那么根据同一个单词的不同大小写替换将不起作用。

请参阅此链接以将排序规则更改为区分大小写的排序规则[如何将 SQL Server 2005 更改为区分大小写？](https://stackoverflow.com/questions/137452/how-do-i-change-sql-server-2005-to-be-case-sensitive)

# c# - 如何打开页面并分配其数据上下文

> ID：13433726
> 
> 赞同：0
> 
> 时间：2012-11-17T18:57:11.573
> 
> 标签：c#, wpf, datacontext

我想我的问题相对简单。我有一个页面来显示我的数据。单击按钮时，我想打开一个新页面，其中包含比当前元素的数据上下文高 2 层的元素的数据上下文。

解释：

我的 ViewModel 是一个包含更多 ViewModel 的类 (ViewModelContainer)。一个是价值观的总结，一个是详细的观点。

```
public class SummaryViewModel
{
     public int somevalue; // is a property
     public ObservableCollection<SummarizedItems> items; // is a property
}

public class DetailsViewModel
{
     public int someOthervalue; // is a property
     public int stuffA; // is a property
     public int stuffB; // is a property
}

public class ViewModelContainer : ViewModelBase
{
     private SummaryViewModel _sum;
     public SummaryViewModel sum { }  // is a property

     private DetailsViewModel _det;
     public DetailsViewModel det { }  // is a property
} 
```

我可以按下按钮的视图绑定到 SummaryViewModel 的 ObservableCollection 的值。到目前为止一切都很好。当我按下按钮时，应该打开一个显示详细信息的新页面。我使用 ICommand 来处理单击，并将详细信息视图作为 CommandParameter 传递给它。

```
<Button Name="OpenDetailsButton" Command="{Binding Path=ACommand}" CommandParameter="{DynamicResource Details}" 
```

我将页面定义为同一文件中的资源，其中数据上下文仍然是 ViewModelContainer。

```
<pages:DetailsViewPage DataContext="{Binding Path=det }"  x:Key="Details"/> 
```

页面打开，但数据上下文不可用。我收到以下错误：

```
 System.Windows.Data Error: 3 : Cannot find element that provides DataContext. 
```

有谁知道我如何打开详细信息视图并提供数据上下文？我无法将 DetailsViewModel 移动到另一个类，因为只能在那里更新它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:48:36.423

我已经通过创建一个帮助程序来向上可视化树并使用我需要的元素的数据上下文来解决这个问题。感谢所有试图提供帮助的人:)

该方法如下所示：

```
 public static UIELEMENT FindUiElementUpVisualTree(DependencyObject initial)
    {
        DependencyObject current = initial;

        while (current != null && current.GetType() != typeof(UIELEMENT))
        {
            current = VisualTreeHelper.GetParent(current);
        }
        return current as UIELEMENT;
    } 
```

其中 UIELEMENT 是您正在寻找的对象，例如窗口或按钮或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:10:10.017

通常视图和视图模型具有一对一的关系。在这种情况下，似乎存在多对一关系。DetailsPageViewModel 怎么样？

# java - Java Servlets + 状态 = 如何？

> ID：13433728
> 
> 赞同：3
> 
> 时间：2012-11-17T18:57:26.103
> 
> 标签：java, servlets

在我的 Web 应用程序中，我想在它的所有“页面”中包含某些必要的东西，例如与数据库的连接、用户信息、模板处理等。直到最近我才会有一个抽象的 servlet 来初始化所有在其`doGet`or`doPost`方法中，定义抽象方法`doLocalLogic(HttpServletRequest req, HttpServletResponse res)`并从`doGet/doPost`方法中调用它。所有扩展类都将享受数据库连接、用户信息等。不幸的是，结果证明这是不好的做法。

我现在想的是创建一个抽象类来完成所有这些工作，来自我的 servlet 的所有逻辑都将转移到这个类的子级，而 servlet 只会创建这些子级的实例。

但是，这导致我的应用程序中的每个页面都创建了一个类。此外，当您创建一个新的 servlet 时，您没有任何需要重写的抽象方法形式的线索，就像您拥有一个抽象 servlet 一样。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:04:15.657

首先，我认为`doLocalLogic()`只要您通过参数而不是通过字段（线程在请求​​/线程之间共享线程）传递此本地逻辑，您的方法就不错：

```
public void doLocalLogic(
  Connection connection,
  UserInformation user,
  //...
  HttpServletRequest req,
  HttpServletResponse res
) 
```

唯一的问题是您确实准备了大量数据，即使您在 servlet 中不需要它们。而且它不可扩展。

你真正需要的是一个更健壮的...框架。首先，您可能需要一个 Web 框架来避免直接对 servlet API 进行编码。其次，您需要像 Spring 这样的 IoC 来管理您的依赖项。而不是急切地创建它们并传递，每个服务只要求所需的依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:11:53.717

我会推荐使用[spring-mvc](http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html)
之类 的框架，该框架将允许您在 Web 应用程序中实现[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。
据我所知，它可以让您在整个请求流中传递应用程序上下文，
甚至可以在不同的页面之间传递它 handlign ；
并且当然会让您将大部分逻辑与 Servlet 类分开。

# android - IMarketBillingService 覆盖生成错误

> ID：13433730
> 
> 赞同：1
> 
> 时间：2012-11-17T18:57:49.027
> 
> 标签：android, overriding, in-app-billing

我不知道这是否适合所有人，但更新 Eclipse 和清理我的项目导致 IMarketBillingService 出现问题

```
@Override public android.os.IBinder asBinder() 
```

它要求我删除@Override 以及其他几个地方。只是为了帮助任何有同样问题的人，我将答案包括在内，因为当前的答案对我不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T18:57:49.027

右键单击您的项目 单击属性 单击左侧的“Java 编译器” 取消选中“启用项目特定设置” 单击“配置工作区设置” 将 JDK 合规性 -> 编译器合规级别设置为 1.6 单击应用并清理您的项目。现在应该可以工作了。

如果它没有将更多值设置为 1.6，直到它起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:37:45.530

不一定是一个好的解决方案，因为虽然它在这里可能会有所帮助，但它也可能会导致程序的其他部分出现更多错误。

我找到的唯一可靠的解决方案是删除 AIDL 文件，将生成的 .java 放在正常的源文件中（当然在其正确的文件夹中），通过删除多余的 @Override 编译指示手动修改它。由于 AIDL 和生成的文件都是稳定的，它们不会改变，失去自动生成并不是损失。

# iphone - 获取“uitextview”iphone 的书写语言？

> ID：13433733
> 
> 赞同：2
> 
> 时间：2012-11-17T18:58:07.543
> 
> 标签：iphone, uitextview, right-to-left

如何获得 uitextview 的书写语言？或者我怎么知道 uitextview 在当前状态下是从右到左还是从左到右？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:53:46.620

```
[textView baseWritingDirectionForPosition:[textView beginningOfDocument] inDirection:UITextStorageDirectionForward] == UITextWritingDirectionRightToLeft 
```

如果`UITextView`从右到左应该返回真，否则返回假。

如果需要，可以在[此处找到更多文档！](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInput_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITextInput/baseWritingDirectionForPosition%3ainDirection%3a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:34:09.057

在回答您的其他问题时，您可以从`UITextInputMode`文档中获取使用的键盘语言：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputMode_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputMode_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-01T18:27:36.810

这个解决方案对我来说效果更好

```
[NSLocale characterDirectionForLanguage:self.textView.textInputMode.primaryLanguage] == NSLocaleLanguageDirectionRightToLeft 
```

# php - php mysql SET NAMES 'utf8' COLLATE 'utf8_unicode_ci' 不适用于 mysqli

> ID：13433734
> 
> 赞同：5
> 
> 时间：2012-11-17T18:58:12.107
> 
> 标签：php, mysqli

我正在将我的网站从 php mysql_* 方法迁移到 php mysqli。

我有以下代码可以完成这项工作：

> mysql_query("SET NAMES 'utf8' COLLATE 'utf8_unicode_ci'");

如果没有这个查询，我的字符串字符（格鲁吉亚语）是用问号写的。例如它被写成????????? 而不是გამარჯობა</p>

所以既然它完成了它的工作，我很高兴，但现在我不能用 mysqli 做同样的事情。

```
$mysqli = new mysqli("localhost", "root", "", "test");
$mysqli->query("SET NAMES 'utf8' COLLATE 'utf8_unicode_ci'"); 
```

谁能帮帮我？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-17T19:00:04.183

不建议使用 mysqli 查询来设置名称，而是使用[mysqli::set_charset](http://php.net/manual/en/mysqli.set-charset.php)

```
$mysqli = new mysqli("localhost", "root", "", "test");
$mysqli->set_charset("utf8"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:00:31.167

您可以使用**[`mysqli_set_charset`](http://php.net/manual/en/mysqli.set-charset.php)**

> 这是更改字符集的首选方法。不推荐使用 mysqli_query() 设置（如 SET NAMES utf8）。

但是，要设置排序规则，您仍然必须使用`SET NAMES`查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:01:09.610

`http://php.net/manual/en/mysqli.set-charset.php`

或者

`mysqli->set_charset("utf8")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T07:06:34.387

# 已提交 PHP 功能请求/错误报告...

请参阅[https://bugs.php.net/bug.php?id=52267](https://bugs.php.net/bug.php?id=52267)获得了来自 uw@php.net 的响应：

> ...用于`mysqli_set_charset()`设置字符集，然后`SET NAMES`更改排序规则。

他/她还链接到[http://dev.mysql.com/doc/refman/5.1/en/mysql-set-character-set.html](http://dev.mysql.com/doc/refman/5.1/en/mysql-set-character-set.html)

> 该函数用于设置当前连接的默认字符集。该字符串`csname`指定一个有效的字符集名称。连接排序规则成为字符集的默认排序规则。此函数的作用类似于`SET NAMES`语句，但也设置 的值`mysql->charset`，从而影响 使用的字符集`mysql_real_escape_string()`

我将链接到[http://dev.mysql.com/doc/refman/5.6/en/charset-collat​​e.html](http://dev.mysql.com/doc/refman/5.6/en/charset-collate.html)，它显示了如何使用适合该查询的任何排序规则进行查询。

> 使用 COLLATE 子句，您可以覆盖任何默认排序规则进行比较。COLLATE 可用于 SQL 语句的各个部分。这里有些例子：

*   > 与`ORDER BY`：
    > `SELECT k FROM t1 ORDER BY k COLLATE latin1_german2_ci;`

*   > 与`AS`：
    > `SELECT k COLLATE latin1_german2_ci AS k1 FROM t1 ORDER BY k1;`

*   > 与`GROUP BY`：
    > `SELECT k FROM t1 GROUP BY k COLLATE latin1_german2_ci;`

*   > 使用聚合函数：
    > `SELECT MAX(k COLLATE latin1_german2_ci) FROM t1;`

*   > 与`DISTINCT`：
    > `SELECT DISTINCT k COLLATE latin1_german2_ci FROM t1;`

*   > 与`WHERE`：
    > `SELECT * FROM t1 WHERE _latin1 'Müller' COLLATE latin1_german2_ci = k; SELECT * FROM t1 WHERE k LIKE _latin1 'Müller' COLLATE latin1_german2_ci;`

*   > 与`HAVING`：
    > `SELECT k FROM t1 GROUP BY k HAVING k = _latin1 'Müller' COLLATE latin1_german2_ci;`

# sql - 每组多个组的 SQL 总和

> ID：13433735
> 
> 赞同：3
> 
> 时间：2012-11-17T18:58:20.413
> 
> 标签：sql, postgresql, aggregate-functions, greatest-n-per-group

在我之前的问题中有一个相当大的错误

[从多行中选择最早的日期](https://stackoverflow.com/questions/13433263/sql-select-earliest-date-for-multiple-rows)

horse_with_no_name 的答案返回了一个完美的结果，我非常感激，但是我最初的问题是错误的，所以我真的很抱歉；如果你看下表；

```
电路_uid |客户名称|机架位置|阅读日期| 阅读时间 | 安培| 伏特 | 千瓦| 千瓦时 | 千瓦 | pf | 钥匙
-------------------------------------------------- -------------------------------------------------- ----------------------------------
cu1.cb1.r1 | 客户 1 | 12.01.a1 | 2012-01-02 | 00:01:01 | 4.51 | 229.32 | 1.03 | 87 | 1.03 | 0.85 | 15
cu1.cb1.r1 | 客户 1 | 12.01.a1 | 2012-01-02 | 01:01:01 | 4.18 | 230.3 | 0.96 | 90 | 0.96 | 0.84 | 16
cu1.cb1.r2 | 客户 1 | 12.01.a1 | 2012-01-02 | 00:01:01 | 4.51 | 229.32 | 1.03 | 21 | 1.03 | 0.85 | 15
cu1.cb1.r2 | 客户 1 | 12.01.a1 | 2012-01-02 | 01:01:01 | 4.18 | 230.3 | 0.96 | 23 | 0.96 | 0.84 | 16
cu1.cb1.s2 | 客户 2 | 10.01.a1 | 2012-01-02 | 00:01:01 | 7.34 | 228.14 | 1.67 | 179 | 1.67 | 0.88 | 24009
cu1.cb1.s2 | 客户 2 | 10.01.a1 | 2012-01-02 | 01:01:01 | 9.07 | 228.4 | 2.07 | 182 | 2.07 | 0.85 | 24010
cu1.cb1.s3 | 客户 2 | 10.01.a1 | 2012-01-02 | 00:01:01 | 7.34 | 228.14 | 1.67 | 121 | 1.67 | 0.88 | 24009
cu1.cb1.s3 | 客户 2 | 10.01.a1 | 2012-01-02 | 01:01:01 | 9.07 | 228.4 | 2.07 | 124 | 2.07 | 0.85 | 24010
cu1.cb1.r1 | 客户 3 | 01.01.a1 | 2012-01-02 | 00:01:01 | 7.32 | 229.01 | 1.68 | 223 | 1.68 | 0.89 | 48003
cu1.cb1.r1 | 客户 3 | 01.01.a1 | 2012-01-02 | 01:01:01 | 6.61 | 228.29 | 1.51 | 226 | 1.51 | 0.88 | 48004
cu1.cb1.r4 | 客户 3 | 01.01.a1 | 2012-01-02 | 00:01:01 | 7.32 | 229.01 | 1.68 | 215 | 1.68 | 0.89 | 48003
cu1.cb1.r4 | 客户 3 | 01.01.a1 | 2012-01-02 | 01:01:01 | 6.61 | 228.29 | 1.51 | 217 | 1.51 | 0.88 | 48004

```

如您所见，每个客户现在都有多个电路。因此，结果现在将是每个客户每个电路的每个最早 kwh 读数的总和，因此该表中的结果将是；

```
customer_name | kwh(sum)
--------------+-----------
customer 1    | 108      (the result of 87 + 21)  
customer 2    | 300      (the result of 179 + 121)  
customer 3    | 438      (the result of 223 + 215) 
```

每个客户将有超过 2 个电路，并且读数可能发生在不同的时间，因此需要“最早”读数。

有人对修改后的问题有什么建议吗？

CentOs/Redhat 上的 PostgreSQL 8.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:06:33.587

```
SELECT customer_name, sum(kwh) AS kwh_total
FROM  (
    SELECT DISTINCT ON (customer_name, circuit_uid)
           customer_name, circuit_uid, kwh
    FROM   readings
    WHERE  reading_date = '2012-01-02'::date
    ORDER  BY customer_name, circuit_uid, reading_time
    ) x
GROUP  BY 1 
```

[和以前一样](https://stackoverflow.com/a/13433361/939860)，只挑最早的每`(customer_name, circuit_uid)`。
然后求和`customer_name`。

### 指数

像下面这样的[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)将使这*非常*快：

```
CREATE INDEX readings_multi_idx
ON readings(reading_date, customer_name, circuit_uid, reading_time); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:05:53.570

这是您原始问题的扩展：

```
select customer_name,
       sum(kwh)
from (
   select customer_name,
          kwh,
          reading_time,
          reading_date,
          row_number() over (partition by customer_name, circuit_uid order by reading_time) as rn
   from readings
   where reading_date = date '2012-01-02'
) t
where rn = 1
group by customer_name 
```

请注意`sum()`外部查询中的新定义和内部查询中更改的`partition by`定义（与您之前的问题相比），它计算每个`circuit_uid`现在的第一个读数（而不是每个客户的第一个读数）。

# asp.net-mvc - System.Web.MVC 上的 CA0055？

> ID：13433736
> 
> 赞同：0
> 
> 时间：2012-11-17T18:58:21.633
> 
> 标签：asp.net-mvc, visual-studio-2012

我刚刚将我的 ASP.NET MVC 3 应用程序从 Windows 7 /VS2010 迁移到 Windows 8 / Visual Studio 2012。我遇到了一个奇怪的代码分析错误。

> CA0055 错误运行代码分析 CA0055：无法加载 MyAssembly.dll。读取模块“System.Web.Mvc”时遇到以下错误：无法解析类型引用：[System.Web.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]System.Web.Razor.Parser .SyntaxTree.CodeSpan。[错误和警告]（全球）

添加对 System.Web.Razor 的引用没有帮助。目前的解决方法是禁用 Web 项目的代码分析。有谁知道为什么会发生此错误和/或如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:24:37.040

我的猜测是 MyAssembly.dll 引用了另一个 System.Web.Razor 版本，而不是您项目中的版本。

也可以是不同项目中的不同.N​​et框架。

# vba - 如何在查询中使用多个复选框值

> ID：13433740
> 
> 赞同：2
> 
> 时间：2012-11-17T18:58:37.247
> 
> 标签：vba, ms-access, checkbox

我的目标是通过将查询字符串与变量合并，将 5 个文本框的结果返回到 SQL 查询中。

如何让我的代码正常工作，以便在选中复选框时记录值（例如：ID、SC ...）并将其放入查询中？如果未选中复选框，则不会将其放入查询中。

5 个复选框如下：

![复选框图片](../Images/692144a717ca174089bb8e139c92cf3d.png)

我当前必须记录是否选择了文本框，并将值（例如：ID，SC，AS ...）放入变量中的代码如下：

```
If (Me.BoxID = False) And (Me.BoxSC = False) And (Me.BoxASSC = False) And (Me.BoxAS = False) And (Me.BoxEH = False) Then
MsgBox "You must check a Fonction Checkbox", 0
Exit Sub
Else
    If (Me.BoxID= True) Then IDValue = Chr(34) & "ID" & Chr(34) Else IDValue = """"""
    If (Me.BoxSC= True) Then SCValue = Chr(34) & "SC" & Chr(34) Else SCValue = """"""
    If (Me.BoxASSC= True) Then ASSCValue = Chr(34) & "ASSC" & Chr(34) Else ASSCValue = """"""
    If (Me.BoxAS= True) Then ASValue = Chr(34) & "AS" & Chr(34) Else ASValue = """"""
    If (Me.BoxEH= True) Then EHValue = Chr(34) & "EH" & Chr(34) Else EHValue = """"""
End If

fonctionQryString = "(((tblF.f1)=" & IDValue & ") OR " + "((tblF.f1)=" & SCValue & ") OR " + "((tblF.f1)=" & ASSCValue & ") OR " + "(tblF.f1)=" & ASValue & ") OR " + "(tblF.f1)=" & EHValue & ")))" 
```

fonctionQryString 进入 SQL 查询的 WHERE 部分。

我知道我使用的方法效率不高，即使它有效。

我的问题是我不知道如何以另一种方式做到这一点。我希望我的代码能够正常工作，以便在未选中复选框时，它不会进入查询字符串。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:29:30.947

这两个`WHERE`子句应该产生等效的结果。考虑切换到第二种形式。

```
WHERE tblF.f1 = "ID" OR tblF.f1 = "SC" OR tblF.f1 = "AS"
WHERE tblF.f1 IN ("ID","SC","AS") 
```

`WHERE`这是一个粗略且未经测试的代码示例，可根据我对您要实现的目标的理解生成类似的子句。

```
Dim fonctionQryString As String
Dim lngLoopNum As Long
Dim strControlName As String
Dim strValueList As String
For lngLoopNum = 1 To 5
    Select Case lngLoopNum
    Case 1
        strControlName = "ID"
    Case 2
        strControlName = "SC"
    Case 3
        strControlName = "ASSC"
    Case 4
        strControlName = "AS"
    Case 5
        strControlName = "EH"
    End Select
    If Me.Controls("Box" & strControlName) = True Then
        strValueList = strValueList & "," & Chr(34) & _
            strControlName & Chr(34)
    End If
Next
If Len(strValueList) > 0 Then
    fonctionQryString = "tblF.f1 IN (" & Mid(strValueList, 2) & ")"
Else
    MsgBox "You must check a Fonction Checkbox"
End If 
```

我假设您实际上并不想包含条件`WHERE tblF.f1 = ""`（一个空字符串）。如果我猜错了，你还有更多的工作要做，但希望这仍然会为你指出一些有用的东西。

# algorithm - 算术平均值

> ID：13433742
> 
> 赞同：0
> 
> 时间：2012-11-17T18:58:43.773
> 
> 标签：algorithm, vhdl

我需要设计一个在输入（无限输入）处接受 n 个数字并计算这些数字的平均值作为输出的电路。输入的数字只能是 <0,15> 的值。我需要用 VHDL 实现这个电路，但我找不到合适的算法，因为我需要它来设计逻辑模式。我知道我肯定需要一个 4 位加法器和一些寄存器来存储这些值。我试图使用移动平均原理来理解这个问题，但它根本不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:13:20.733

对于输入`n+1`，使用 value `x`，平均值将等于`(average*n+x)/(n+1)`--> ... = `average + (next - average)/(n+1)`。从这个观察可以得出一个简单的算法：

1.  将所有寄存器初始化为0
2.  获取下一个输入并将其存储在临时寄存器中
3.  将计数寄存器增加 1
4.  从临时寄存器中减去以前的平均值
5.  将临时寄存器除以计数
6.  将温度添加到平均值
7.  转到第 2 步

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:48:37.697

让我们看看，您需要作为输入端口：reset、input[3:0]、clock；输出：average[3:0] 和内部寄存器 accumulator[a:0] 和 count[c:0]。我现在不记得我的 VHDL 和 Verilog 的语法了，但是......

每当您获得输入时，您需要将其添加到累加器中，将计数加 1，然后将平均值设置为累加器除以计数。复位时将累加器和计数设置为零。如果您知道递增值的最大数量是 countmax，那么累加器需要足够大以容纳 countmax*15，并且 count 必须有足够的位来保存 countmax。这也将为您提供分隔线的大小。如果 countmax 未知，那么您需要添加溢出输出并在累加器溢出时设置它并在复位时取消设置。

希望有帮助。

# c - 当使用通过 MPI_Type_struct() 创建的派生类型时，MPI_reduce 的“计数”参数应该是什么？

> ID：13433746
> 
> 赞同：1
> 
> 时间：2012-11-17T18:59:16.923
> 
> 标签：c, parallel-processing, mpi

我不确定我是否正确理解了“count”参数之间的区别：

```
 int MPI_Reduce(void *sendbuf, void *recvbuf, int count, MPI_Datatype datatype, 
           MPI_Op op, int root, MPI_Comm comm); 
```

和'blocklens'参数：

```
int MPI_Type_struct(int count,
               int blocklens[],
               MPI_Aint indices[],
               MPI_Datatype old_types[],
               MPI_Datatype *newtype); 
```

假设我想减少我自己的类型：

```
typedef struct buffers_s
{
   double *buf1, *buf2;
} Buffers; 
```

其中 buf1 和 buf2 都分配给 N 个元素。

然后，当调用 MPI_Type_struct() 以基于 'Buffers' 创建新的 mpi 类型 'Custom_MPI_Type' 时，我会将 'count' 设置为 2，将 blocklens[0] 设置为 N，并将 blocklens[1] 设置为 N。

然后，当创建 MPI 类型时，假设我还创建了归约运算符“MyOp”，我将调用 MPI_Reduce()，并将“datatype”设置为“Custom_MPI_Type”。那么'count'参数的值应该是多少？

根据我将其设置为 N 的经验，但我并不真正理解其含义，因为我已经指定我刚刚创建的 MPI 类型由 2 个长度为 N 的块组成。

换句话说，当将 MPI_Reduce() 与 MPI_FLOAT 等基本类型的数组一起使用时，'count' 参数指定 MPI_FLOAT 类型的元素的数量，从作为 MPI_Reduce() 的第一个参数给出的地址开始......所以逻辑上我会已经期望，当使用自定义数据类型时，将计数设置为自定义_MPI_Type 类型的 1 个元素，前提是 MPI 已经知道此类型由给定基本 MPI_Datatype（例如 MPI_DOUBLE）的 N 个元素的 2 个块组成。

有人可以解释这一切吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:15:48.173

MPI 中的派生数据类型通常不适用于您的`Buffers`. [Jonathan Dursi 在您的另一个问题](https://stackoverflow.com/a/13435977/1374437)中解释了原因。结构数据类型适用于 C/C++ 结构，例如：

```
#define N 1000

typedef struct buffers_s
{
   double buf1[N], buf2[N];
} Buffers; 
```

`buf1`在这种情况下，`buf2`实例开头的偏移量`Buffers`总是相同的，这`buf1`与`buf2`两者都指向动态分配的内存的情况不同。

这就是说，`blocklengths`参数`MPI_Type_create_struct`(`MPI_Type_struct`在 MPI-2 中已弃用，甚至在 MPI-3.0 中已删除，因此您不应使用它) 用于描述数据类型本身的形状。`blocklengts[i]`告诉 MPI 有多少类型的元素`old_types[i]`包含在`i`新数据类型的第 - 个元素中。对于上述结构，`blocklengths[0] = blocklengths[1] = N`.

的`count`参数`MPI_Reduce`告诉 MPI 有多少元素`datatype`要减少。如果`datatype`是您的结构数据类型，则表示该结构有多少个实例。继续上面的示例代码，如果您有一个包含 10 个实例的数组`Buffers`，例如：

```
Buffers bufs[10]; 
```

然后你会`10`在`count`论点中提供。这与结构类型构造函数中的块计数完全正交。单个进程通信的元素总数将`count`乘以所有元素的总和`blocklengts[]`。您已正确得出结论，如果仅减少派生数据类型的一个元素，`count`则应将其设置为 1。

# ruby - 用于多个慢速 IO 调用的 Sinatra 线程池

> ID：13433748
> 
> 赞同：1
> 
> 时间：2012-11-17T18:59:23.937
> 
> 标签：ruby, sinatra, threadpool

我有一个应用程序对某些入站 API 请求进行几次缓慢的 http 调用，我希望这些请求*并行*运行，因为有几个而且它们很慢。

对于线程池，我以前使用过[http://burgestrand.se/articles/quick-and-simple-ruby-thread-pool.html](http://burgestrand.se/articles/quick-and-simple-ruby-thread-pool.html)。

是否有任何架构上合理的解决方案可以*并行*运行，有或没有线程池？

**编辑** 我的道歉，我在打字时正在看电影，并在我用斜体显示“并行”的地方写了“串行”。感谢@Catnapper 的捕获。多么尴尬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:43:04.253

要获得良好的潜在客户，请尝试 Sidekiq：

[http://mperham.github.com/sidekiq/](http://mperham.github.com/sidekiq/)

和赛璐珞：

[http://www.unlimitednovelty.com/2011/05/introducing-celluloid-concurrent-object.html](http://www.unlimitednovelty.com/2011/05/introducing-celluloid-concurrent-object.html)

# javascript - Javascript(gameQuery game) objs 太多无法正常运行

> ID：13433759
> 
> 赞同：0
> 
> 时间：2012-11-17T19:00:01.650
> 
> 标签：javascript, gamequery

我正在用“gameQuery”jQuery 插件编写一个 js 游戏，一个射击游戏。

虽然有很多子弹（例如 100 或更多），但动画会非常缓慢地转动。

我使用代码打击来循环移动 DOM，这意味着每 20 毫秒执行一次函数。所有子弹都存储在一个数组中，

```
$.playground().registerCallback(function(){
   for(var i = 0; i < bulletList.length; i++) {
     //move bullet
     ...
   }
}, 20); 
```

如何优化我的代码以提高效率？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:21:22.017

以下是我能想到的几点：

1.  您是否正在使用子弹进行碰撞检测。如果是的话，这可能是事情变慢的地方，因为显示数百个精灵本身应该是一个问题。
2.  那些子弹是否动画（超过一帧？）如果是，您可能想尝试不使用动画，看看这如何影响表演。
3.  如果所有子弹以相同的速度朝相同的方向移动，您可以将它们全部放在一个组中，然后移动该组。
4.  如果他们没有朝同一个方向移动，您仍然可以将他们分组。然后，您将在将它们全部移动之前分离该组。完成后，您可以再次将您的组附加到游戏中。
5.  这个实现起来更复杂，但是您可以尝试检测玩家是否在给定方向上以固定间隔发射了一系列子弹，并用带有重复子弹图像的单个精灵来表示它们。

# javascript - 在回发中从 javascript 调用服务器端方法

> ID：13433761
> 
> 赞同：3
> 
> 时间：2012-11-17T19:00:17.470
> 
> 标签：javascript, asp.net, server-side

> **可能重复：**
> [从 Javascript 调用 ASP.NET 函数？](https://stackoverflow.com/questions/3713/call-asp-net-function-from-javascript)

在我的自定义 ajax 服务器端控件中，我绘制图像（使用 html5），当用户单击它时我需要调用服务器端函数（只需执行通常的按钮）。我想这样做：

```
 <xx:MyControl ... runat="server" onchange = "server side function"/> 
```

我不想只使用 ControlId 和 EventArgument 参数调用 do_postback 函数，因为我必须做额外的工作来指定操作并调用适当的函数 - 我想保持我的代码隐藏清晰，我不希望最终用户将使用我的组件这样做工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:05:18.853

您将需要实现 IPostBackDataHandler 接口，**[本文](http://msdn.microsoft.com/en-us/library/system.web.ui.ipostbackdatahandler.aspx)**和**[本文](http://weblogs.asp.net/bhaskarghosh/archive/2008/07/10/custom-control-postback-and-events.aspx)**将指导您完成此操作。

# c - 代理 DNS 未收到响应

> ID：13433766
> 
> 赞同：1
> 
> 时间：2012-11-17T19:01:05.463
> 
> 标签：c, sockets, dns, udp

我正在创建代理 dns，我收到了来自 dig 的查询，将其发送到服务器，但无法从 dns 服务器获得答案。我知道我的代码看起来不太好，但我已经为此工作了好几个小时，但仍然无法找出问题所在。我的程序在第二次 recvfrom 之前卡住了。有人能帮我吗？（顺便说一句，我的操作系统是 FreeBSD，我正在使用 8.8.8.8 dns 服务器进行测试）

这是我的代码：

```
int main(int argc, char *argv[] )
{

  char buf[BUFSIZE];
  char serverbuf[BUFSIZE];
  int UDPSocket, clientSocket;
  int lenght;
  int addr_len;
  struct addrinfo *clientInfo;
  struct addrinfo hintsClient;
  struct sockaddr_in serverSocket, clientAddr, serverAddr;
  int serverAddrLen = sizeof(serverAddr);
  fd_set set, tcpset;
  struct timeval tv; // struktura pro timeout
  bool end = false;
  int m;

  TprogParam param = processParams(argc, argv);
  if(param.error)
  {
    printError(EPARAMS);
    return ERROR;
  }
  if(param.help)
  {
    printHelp();
    return EXIT_SUCCESS;
  }

  memset(&hintsClient, 0, sizeof(struct addrinfo));
  hintsClient.ai_family = AF_INET;
  hintsClient.ai_socktype = SOCK_DGRAM;
  hintsClient.ai_flags = 0;
  hintsClient.ai_protocol = IPPROTO_UDP;

  int status;

  if(param.ipadress[0] == '\0')
  {
    if((status = getaddrinfo(INADDR_ANY, NULL, &hintsClient, &clientInfo)) != 0)
    {
      printf("Spatna adresa pro naslouchani");
      printError(1);
      return ERROR;
    }
  }
  else
  {
    if((status = getaddrinfo(param.ipadress, "13066", &hintsClient, &clientInfo)) != 0)
    {
      printf("Spatna adresa pro naslouchani");
      printError(1);
      return ERROR;
    }
  }

  memset(&serverAddr, 0, sizeof(serverAddr));
  serverAddr.sin_family = AF_INET;
    serverAddr.sin_addr.s_addr = inet_addr(param.dnsserver);;
    serverAddr.sin_addr.s_addr = htonl(INADDR_ANY);
    serverAddr.sin_port = 53;

  // vytvorime socket
  if((UDPSocket = socket(clientInfo->ai_family, clientInfo->ai_socktype, clientInfo->ai_protocol)) == -1)
  {
    printf("Nelze vytvorit udp socket");
    printError(1);
    return ERROR;
  }

  if((clientSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
  {
    printf("Nelze vytvorit tcp socket");
    printError(1);
    return ERROR;
  }

  // Nastavime socket do neblokovaciho rezimu

  if(bind(UDPSocket, clientInfo->ai_addr, clientInfo->ai_addrlen) == -1)
  {
    if (errno != EINPROGRESS)
    {
      printf("Nelze navazat spojeni pro naslouchani: %d", errno);
      return ERROR;
    }
  }
  printf("Poslal jsem zadost o spojeni. Zatimco se spojeni navazuje mohu delat jine veci.\n");

  FD_ZERO(&set);
  FD_SET(UDPSocket, &set);
  tv.tv_sec = 15;
  tv.tv_usec = 0;

  addr_len = sizeof(struct sockaddr);
  while(1)
  {
      printf("Prijimam pozadavek k vyrizeni.\n");
      if ((lenght = recvfrom(UDPSocket, buf, BUFSIZE - 1, 0, (struct sockaddr *)&clientAddr, &addr_len)) == -1)//recv(UDPSocket, buf, BUFSIZE - 1, 0)) == -1)
      {
        printf("Nejaka chyba pri prijimani dat");
        return ERROR;
      }
      buf[lenght] = '\0';
      printf("Prijata nasledujici data od klienta na predklad dns: %s o delce %d \n", buf, lenght);

      if((m = sendto(clientSocket, buf, lenght, 0, (struct sockaddr *)&serverAddr, serverAddrLen)) == -1)
      {
        printf("Problem s odeslanim dat: %d %s", errno, strerror(errno));
        return ERROR;
      }

      if((m = recvfrom(clientSocket, buf, BUFSIZE - 1, 0, (struct sockaddr *)&serverAddr,&serverAddrLen)) == -1)
      {
        printf("nejaka chyba");
        return ERROR;
      }

    if((lenght = sendto(UDPSocket, buf, lenght, 0,(struct sockaddr *)&clientAddr, lenght)) == -1)
    {
      printf("Problem s odeslanim dat: errno %d", errno);
      return ERROR;
    }
  }
} 
```

编辑：一些修复后的新代码：

```
#include "dns_stat.h"

TprogParam processParams(int argc, char *argv[]) {

TprogParam parInfo =
{
.error = false,
.help = false,
.ipadress[0] = '\0',
.port = 0,
.dnsserver[0] = '\0',
.type = false,
.source = false,
.destination = false,
};

if(argc == 1)
{
  parInfo.help = true;
}
else
{
  int c;
  const char *short_options = ":l:p:s:";

  const struct option long_options[] = {
    { "type", 0, NULL, 't' },
    { "source", 0, NULL, 'z' },
    { "destination", 0, NULL, 'd' },
    { NULL, 0, NULL, 0 }
  };
  while((c = getopt_long_only(argc, argv, short_options, long_options, NULL)) != -1) {
    switch (c) {
      case 'l':
        strcpy(parInfo.ipadress,optarg);
        break;
      case 'p':
        parInfo.port = atoi(optarg);
        break;
      case 's':
        strcpy(parInfo.dnsserver,optarg);//optarg);
        //parInfo.dnsserver = strdup(optarg);
        break;
      case 't':
        parInfo.type = true;
        break;
      case 'z':
        parInfo.source = true;
        break;
      case 'd':
        parInfo.destination = true;
        break;
      case '?':
        parInfo.error = true;
        break;
      default:
        printf("default");
        parInfo.error = true;
        abort();
    }
  }
}

return parInfo;
}

void printHelp()
{
  printf("Napoveda\n");
}
void printError(int ecode)
{
  if(ecode<EOK||ecode>EUNKNOWN){
    ecode = EUNKNOWN;
  }
  fprintf(stderr, "%s", ECODEMSG[ecode]);
}
int main(int argc, char *argv[] )
{

  char buf[BUFSIZE];
  char serverbuf[BUFSIZE];
  int UDPSocket, clientSocket;
  int lenght;
  int addr_len;
  struct addrinfo *clientInfo;
  struct addrinfo hintsClient;
  struct sockaddr_in serverSocket, clientAddr, serverAddr;
  int serverAddrLen = sizeof(serverAddr);
  fd_set set, tcpset;
  struct timeval tv; // struktura pro timeout
  bool end = false;
  bool end2 = false;
  int m;

  TprogParam param = processParams(argc, argv);
  if(param.error)
  {
    printError(EPARAMS);
    return ERROR;
  }
  if(param.help)
  {
    printHelp();
    return EXIT_SUCCESS;
  }

  //printf("type: %d, source: %d, destination: %d\n", param.type, param.source, param.destination);
  memset(&hintsClient, 0, sizeof(struct addrinfo));
  hintsClient.ai_family = AF_INET;
  hintsClient.ai_socktype = SOCK_DGRAM;
  hintsClient.ai_flags = 0;
  hintsClient.ai_protocol = IPPROTO_UDP;

  int status;

  if(param.ipadress[0] == '\0')
  {
    if((status = getaddrinfo(INADDR_ANY, NULL, &hintsClient, &clientInfo)) != 0)
    {
      printf("Spatna adresa pro naslouchani");
      printError(1);
      return ERROR;
    }
  }
  else
  {
    if((status = getaddrinfo(param.ipadress, "13066", &hintsClient, &clientInfo)) != 0)
    {
      printf("Spatna adresa pro naslouchani");
      printError(1);
      return ERROR;
    }
  }

  memset(&serverAddr, 0, sizeof(serverAddr));
;
  serverAddr.sin_family = AF_INET;
    serverAddr.sin_addr.s_addr = inet_addr(param.dnsserver);;
    serverAddr.sin_port = htons(53);

  // vytvorime socket
  if((UDPSocket = socket(clientInfo->ai_family, clientInfo->ai_socktype, clientInfo->ai_protocol)) == -1)
  {
    printf("Nelze vytvorit udp socket");
    printError(1);
    return ERROR;
  }

  if((clientSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
  {
    printf("Nelze vytvorit tcp socket");
    printError(1);
    return ERROR;
  }

  // Nastavime socket do neblokovaciho rezimu

  if(bind(UDPSocket, clientInfo->ai_addr, clientInfo->ai_addrlen) == -1)
  {
    if (errno != EINPROGRESS)
    {
      printf("Nelze navazat spojeni pro naslouchani: %d", errno);
      return ERROR;
    }
  }
  printf("Poslal jsem zadost o spojeni. Zatimco se spojeni navazuje mohu delat jine veci.\n");

  FD_ZERO(&set);
  FD_SET(UDPSocket, &set);
  tv.tv_sec = 15;
  tv.tv_usec = 0;

  addr_len = sizeof(struct sockaddr);
  while(1)
  {
      printf("Prijimam pozadavek k vyrizeni.\n");
      if ((lenght = recvfrom(UDPSocket, buf, BUFSIZE - 1, 0, (struct sockaddr *)&clientAddr, &addr_len)) == -1)//recv(UDPSocket, buf, BUFSIZE - 1, 0)) == -1)
      {
        printf("Nejaka chyba pri prijimani dat");
        return ERROR;
      }
      buf[lenght] = '\0';
      printf("Prijata nasledujici data od klienta na predklad dns: %s o delce %d \n", buf, lenght);

      if((m = sendto(clientSocket, buf, lenght, 0, (struct sockaddr *)&serverAddr, serverAddrLen)) == -1)
      {
        printf("Problem s odeslanim dat: %d %s", errno, strerror(errno));
        return ERROR;
      }
      printf("tady");
      fflush(stdout);
      if((m = recvfrom(clientSocket, buf, BUFSIZE - 1, 0, (struct sockaddr *)&serverAddr,&serverAddrLen)) == -1)
      {
        printf("nejaka chyba");
        return ERROR;
      }

      printf("Prijata nasledujici data od dns serveru: %s o delce %d \n", buf, lenght);

    if((lenght = sendto(UDPSocket, buf, lenght, 0,(struct sockaddr *)&clientAddr, addr_len)) == -1)
    {
      printf("Problem s odeslanim dat: errno %d %s", errno, strerror(errno));
      return ERROR;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:07:29.937

这里至少有两个问题：

```
serverAddr.sin_addr.s_addr = inet_addr(param.dnsserver);; /* line 1 */
serverAddr.sin_addr.s_addr = htonl(INADDR_ANY); /* line 2 */
serverAddr.sin_port = 53; /* line 3 */ 
```

*   第 2 行覆盖您刚刚在第 1 行翻译的服务器地址。只需删除第 2 行。
*   第 3 行需要更改为**`htons(53)`**将端口号转换为[网络字节顺序](http://en.wikipedia.org/wiki/Endianness)。

# processing - 将鼠标拖到可点击区域之外

> ID：13433779
> 
> 赞同：0
> 
> 时间：2012-11-17T19:03:09.593
> 
> 标签：processing

我正在尝试从头开始编写一个滑块，并且我有一个基本功能，但我希望能够将滑块拖动到我为单击它而创建的范围之外。

```
void slide()
{
  if ((x+w >= mouseX) && (mouseX >= x) && (y+h >= mouseY) && (mouseY >= y) &&
      (mousePressed == true))
  { 
      h = (mouseY - y);
  } 
```

正如您所看到的，当鼠标被拖动到滑块尺寸之外时，高度值不再改变。如何仅在维度内激活然后拖动到维度之外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:52:25.130

我已经通过一个布尔值来控制点击和锁定，例如：

```
class Test {
  //global  
  float x;
  float y;
  float w, h;
  float initialY;
  boolean lock = false;

  //constructors

  //default
  Test () {
  }

  Test (float _x, float _y, float _w, float _h) {
    x=_x;
    y=_y;
    initialY = y;
    w=_w;
    h=_h;
  }

  void run() {

    float lowerY = height - h - initialY;
    float value = map(y, initialY, lowerY, 100, 255);
    color c = color(value);
    fill(c);
    rect(x, initialY, 4, lowerY);
    fill(200);
    rect(x, y, w, h);
    float my = constrain(mouseY, initialY, height - h - initialY );
    if (lock) y = my;
  }

  boolean isOver()
  {
    return (x+w >= mouseX) && (mouseX >= x) && (y+h >= mouseY) && (mouseY >= y);
  }
}

//end of class

Test[] instances =  new Test[3]; 

void setup() {
  size(200, 600);
  noStroke(); 
  instances[0] = new Test(20, 20, 40, 20);
  instances[1] = new Test(80, 20, 40, 20);
  instances[2] = new Test(140, 20, 40, 20);
}

void draw() {
  background(100);
  for (Test t:instances)
    t.run();
}

void mousePressed() {
  for (Test t:instances)
  {
    if (t.isOver())
      t.lock = true;
  }
}

void mouseReleased() {
  for (Test t:instances)
  {
      t.lock = false;
  }
} 
```

# iphone - 监控 UIImageView 的图像属性变化

> ID：13433781
> 
> 赞同：1
> 
> 时间：2012-11-17T19:03:26.830
> 
> 标签：iphone, objective-c, ios, xcode

如何检测是否`UIImageview`已更改，以及如何显示`NSLog`图像何时更改？这是我的代码：

```
-(void)changePhotoStatus
{
    NSArray *myArray = [NSArray arrayWithObjects:[NSString stringWithFormat:@"FasterText.png"],[NSString stringWithFormat:@"Don'tTouchText.png"],nil];

    fasttext.image = [UIImage imageNamed:[myArray objectAtIndex:arc4random() % [myArray count]]];

    if (fasttext.image == [UIImage imageNamed:@"Don'tToucText.png"]) {
        NSLog(@"cahn");
    }
} 
```

我`NSTimer`用来调用图像的变化。但`NSLog`不会出现。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:12:08.143

您可以按如下方式使用键值编码

```
- (void)registerSelfAsObserverForImageView
 {
    [imageView addObserver:self
                forKeyPath:@"image"
                   options:(NSKeyValueObservingOptionNew |
                            NSKeyValueObservingOptionOld)
                context:NULL];
}

- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context 
{
    // Put your code here to handle event of the imageview (object) changing value :)

    [super observeValueForKeyPath:keyPath
                         ofObject:object
                           change:change
                          context:context];
} 
```

不要忘记在 dealloc 中注销或不再需要更新时

```
- (void)unregisterForChangeNotification
 {
     [imageView removeObserver:self forKeyPath:@"image"];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:40:07.160

```
[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(changePhotoStatus) userInfo:nil repeats:YES]; 
```

完成更改图像后，不要忘记`invalidate`计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:40:47.317

这是一个解决方案，假设您已正确设置视图文件...

```
#import "JDemoViewController.h"

@interface JDemoViewController ()

@property (nonatomic, retain) NSArray *imageNameArray;

- (void) handleTimerEventFired;

@end

@implementation JDemoViewController

@synthesize imageView = _imageView;
@synthesize imageNameArray = _imageNameArray;

- (void) dealloc
{
    self.imageView = nil;
    self.imageNameArray = nil;
    [super dealloc];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.imageNameArray = [NSArray arrayWithObjects:@"img1",@"img2",@"img3",@"img4", nil];

    [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(handleTimerEventFired) userInfo:nil repeats:YES];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void) handleTimerEventFired
{    
    NSString *tempImageName = [self.imageNameArray objectAtIndex:(arc4random()%4)];

    UIImage* image = [UIImage imageNamed:tempImageName];

    self.imageView.image = image;

    if(tempImageName == @"img3")
    {
        NSLog(@"Image 3 was Loaded !");
    }

}

@end 
```

# ruby-on-rails - 接下来，在按多列 ActiveRecord 集排序的任何给定对象之前

> ID：13433785
> 
> 赞同：0
> 
> 时间：2012-11-17T19:03:54.567
> 
> 标签：ruby-on-rails, scope

我有两个相关的模型

```
class Post
  belongs_to :subject
end 
```

我需要获取按 'subjects'.'name' ASC, 'posts'.'updated_at' DESC 排序的帖子然后对于任何给定的**id**，根据给定的排序顺序获取 Post.find(id) 的下一个和之前的帖子。

我这样订购帖子：

```
Post.joins(:subject).order('subjects.name ASC, posts.updated_at DESC') 
```

但是如何获得下一个和上一个帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:17:24.563

你可以使用`each_with_index`方法。该方法的工作原理如下：

```
a=[1,2,3]
a.each_with_index {|item, index|
  puts index.to_s+"=>"+item.to_s
} 
```

产生：

`0=>1 1=>2 2=>3`

现在您可以将排序后的数组存储在一个变量中，例如：

```
@posts=Post.joins(:subject).order('subjects.name ASC, posts.updated_at DESC') 
```

而且，如果你想要一个 的下一个和上一个`id`，你可以这样做：

```
@next=nil
@previous=nil
@posts.each_with_index {|post, index|
      if post.id==id
        @next=@posts[index+1]
        @previous=@posts[index-1]
        break
      end
} 
```

# php - 从 mysql 数据库提供 JQuery 自动完成功能

> ID：13433792
> 
> 赞同：1
> 
> 时间：2012-11-17T19:04:55.087
> 
> 标签：php, jquery, mysql

我正在尝试使用 JQuery 创建一个自动完成字段，该字段从 mysql 数据库接收其自动完成。

**索引.php：**

```
 <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/themes/base/jquery-ui.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
        <script type="text/javascript">
        $(function() {

            $("#college").autocomplete({
                source: "search.php",
                minLength: 2
            });
        });
        </script>
    </head>
    <body>

        <form action="<?php echo $_SERVER['PHP_SELF'];?>"  method="post">
            <fieldset>
            <legend>jQuery UI Autocomplete Example - PHP Backend</legend>

            <label for="state">State (abbreviation in separate field): </label>

            <input type="text" id="college"  name="college" />

            <input type="submit" name="submitBtn" value="Submit" />

            </fieldset>
        </form>

        <?php
if (isset($_POST['submit'])) {
echo "<p>";
    while (list($key,$value) = each($_POST)){
    echo "<strong>" . $key . "</strong> = ".$value."<br />";
    }
echo "</p>";
}
?>

        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html> 
```

**搜索.php：**

```
/* Connection vars here for example only. Consider a more secure method. */
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$dbname = 'college';

try {
  $conn = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
}
catch(PDOException $e) {
    echo $e->getMessage();
}

$return_arr = array();

if ($conn)
{
    $ac_term = "%".$_GET['term']."%";
    $query = "SELECT * FROM college_list where name like :term";
    $result = $conn->prepare($query);
    $result->bindValue(":term",$ac_term);
    $result->execute();

    /* Retrieve and store in array the results of the query.*/
    while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
        $row_array['name'] = $row['name'];

        array_push($return_arr,$row_array);
    }

}
/* Free connection resources. */
//$conn = null; 
/* Toss back results as json encoded array. */
echo json_encode($return_arr);

?> 
```

它目前正在从数据库中正确检索，因为它获得了正确数量的自动完成。但是，它们都是空白的。它似乎实际上并没有将“名称”反馈到该领域，我似乎无法弄清楚为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:09:33.847

在没有看到您正在使用的自动完成代码的情况下，我会说您需要一个一维数组而不是您现在生成的二维数组。

您可以尝试更改：

```
while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    $row_array['name'] = $row['name'];

    array_push($return_arr,$row_array);
} 
```

到：

```
while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    array_push($return_arr, $row['name']);
} 
```

**编辑：**检查[api 文档](http://api.jqueryui.com/autocomplete/#option-source)，您需要以不同的方式构建数组，例如：

```
while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    array_push($return_arr, array('label' => $row['name'], 'value' => $row['name']));
} 
```

# php - PHP 和 Mysql 中的会话

> ID：13433798
> 
> 赞同：1
> 
> 时间：2012-11-17T19:05:24.557
> 
> 标签：php, mysql

我想创建一个页面，我可以在该页面上查看登录我网站的用户。对于登录后的每个用户，我都会创建一个会话，并发送一个查询以将 mysql 中的“Logged”行从 No 更改为 Yes。然后，在页面上，我使用 PHP 向大家展示，谁在 mysql 中设置了 Yes，它可以工作。但是，我有一个问题，当有人在没有单击注销的情况下关闭浏览器时会发生这种情况 - 查询不执行并且 mysql 中的 Yes 值保持不变......我该怎么做才能创建这样的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:10:20.393

代替登录或注销的布尔值，确定会话到期的合理时间量（例如，1 个月），然后将该时间量添加到时间戳并将其存储在数据库中`session_expires`。然后，您可以在进行登录检查时检查用户的会话是否已过期。

此外，要手动使会话过期（例如，如果用户注销），只需将该`session_expires`字段设置为过去的时间戳。

**编辑**

周末我无法使用电脑，所以我无法正确更新我的答案。

如果您需要查看活跃用户，我过去做过的一件事是使用`last_seen`时间戳字段，该字段会在用户在网站上执行任何操作时更新。然后，在您的“用户登录”页面上，只需查询最近的内容，例如“过去 15 分钟内最后一次看到”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:22:09.953

用户保持登录的事实是由于 PHP SESSION TIMEOUT 可能在 PHP 设置 php.ini 中配置的。

查看[http://php.net/manual/en/function.session-set-save-handler.php](http://php.net/manual/en/function.session-set-save-handler.php)以了解如何设置会话关闭处理程序（一旦会话无效就会调用该处理程序）。调用关闭处理程序时，在数据库中将当前会话的“记录”设置为 false。不过，它可能需要长达 24 分钟（php.ini 中会话超时的默认值 -`session.gc_maxlifetime = 1440`分钟）。

将此值 ( `session.gc_maxlifetime`) 减少到 2-3 分钟，并在您的每个页面上使用 ajax 函数来保持会话处于活动状态。这肯定会增加服务器的负载，但您肯定会更好地代表当前活跃的用户。您可以在代码中使用`php.ini`或通过使用减少值。`ini_set(‘session.gc_maxlifetime’,30);`

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:07:35.403

您对此无能为力，只能定义超时。这意味着您在登录后将您的客户行设置为“YES”的初始调用应该在每个请求（或每分钟备用资源）上触发，以更新该客户行中的日期列。如果不再有更新，则将该客户定义为“不再登录”并将列更新为“否”

# javascript - 为什么 nodelist 没有 forEach？

> ID：13433799
> 
> 赞同：102
> 
> 时间：2012-11-17T19:05:47.697
> 
> 标签：javascript, arrays, dom, foreach

我正在编写一个简短的脚本来更改`<abbr>`元素的内部文本，但发现`nodelist`没有`forEach`方法。我知道它`nodelist`不继承自`Array`，但它似乎不是`forEach`一个有用的方法吗？是否有我不知道的特定实施问题阻止`forEach`添加`nodelist`？

注意：我知道 Dojo 和 jQuery 都有`forEach`某种形式的节点列表。由于限制，我不能使用任何一个。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2014-11-19T18:25:16.593

## NodeList 现在在所有主流浏览器中都有 forEach()

请参阅[MDN 上的 nodeList forEach()](https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach)。

## 原始答案

这些答案都没有解释*为什么*NodeList 不从 Array 继承，从而允许它拥有`forEach`和所有其余部分。

答案[在这个 es-discuss 线程上](https://esdiscuss.org/topic/why-does-legacy-content-break-when-making-array-likes-real-arrays)找到。简而言之，它破坏了网络：

> 问题是代码错误地假设 instanceof 意味着该实例是一个与 Array.prototype.concat 组合的数组。
> 
> Google 的 Closure Library 中存在一个错误，导致几乎所有 Google 的应用程序都因此而失败。发现此库后立即更新该库，但可能仍有代码与 concat 结合使用相同的错误假设。

也就是说，一些代码做了类似的事情

```
if (x instanceof Array) {
  otherArray.concat(x);
} else {
  doSomethingElseWith(x);
} 
```

但是，`concat`会将“真实”数组（不是 instanceof Array）与其他对象区别对待：

```
[1, 2, 3].concat([4, 5, 6]) // [1, 2, 3, 4, 5, 6]
[1, 2, 3].concat(4) // [1, 2, 3, 4] 
```

所以这意味着上面的代码在`x`NodeList 是什么时候坏了，因为在它沿着`doSomethingElseWith(x)`路径之前，而在之后它沿着`otherArray.concat(x)`路径，这做了一些奇怪的事情，因为`x`它不是一个真正的数组。

一段时间以来，有人提议创建`Elements`一个真正的 Array 子类，并将其用作“新的 NodeList”。但是，至少目前，它[已从 DOM 标准](https://github.com/whatwg/dom/commit/10b6cf1ba02806220d5461a3bdb7939728b73635)中删除，因为由于各种技术和规范相关的原因，实现它还不可行。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-03-14T22:07:34.883

你可以做

```
Array.prototype.forEach.call (nodeList, function (node) {

    // Your code here.

} ); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-03-13T22:58:38.340

您可以考虑创建一个新的节点数组。

```
 var nodeList = document.getElementsByTagName('div'),

      nodes = Array.prototype.slice.call(nodeList,0); 

  // nodes is an array now.
  nodes.forEach(function(node){ 

       // do your stuff here.  

  }); 
```

注意：这只是我们在这里创建的节点引用的列表/数组，没有重复的节点。

```
 nodes[0] === nodeList[0] // will be true 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-08-24T21:25:09.793

永远不要说永远，现在是 2016 年，并且该`NodeList`对象已经`forEach`在最新的 chrome (v52.0.2743.116) 中实现了一个方法。

现在在生产中使用它还为时过早，因为其他浏览器还不支持这个（测试 FF 49），但我猜这很快就会标准化。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-11-17T19:10:05.657

简而言之，实现该方法的设计冲突。

来自 MDN：

> # 为什么我不能在 NodeList 上使用 forEach 或 map？
> 
> NodeList 的使用与数组非常相似，并且很想在它们上使用 Array.prototype 方法。然而，这是不可能的。
> 
> JavaScript 有一个基于原型的继承机制。数组实例继承数组方法（例如 forEach 或 map），因为它们的原型链如下所示：
> 
> `myArray --> Array.prototype --> Object.prototype --> null`（通过多次调用Object.getPrototypeOf可以得到一个对象的原型链）
> 
> forEach、map 等是 Array.prototype 对象的自有属性。
> 
> 与数组不同，NodeList 原型链如下所示：
> 
> `myNodeList --> NodeList.prototype --> Object.prototype --> null`
> 
> NodeList.prototype 包含 item 方法，但没有 Array.prototype 方法，因此它们不能在 NodeLists 上使用。

来源：[https](https://developer.mozilla.org/en-US/docs/DOM/NodeList) ://developer.mozilla.org/en-US/docs/DOM/NodeList （向下滚动到**为什么我不能使用 forEach 或在 NodeList 上映射？**）

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-05-31T18:30:24.273

如果您想在 NodeList 上使用 forEach，只需从 Array 中复制该函数：

```
NodeList.prototype.forEach = Array.prototype.forEach; 
```

就是这样，现在您可以像使用 Array 一样使用它：

```
document.querySelectorAll('td').forEach(function(o){
   o.innerHTML = 'text';
}); 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-06-15T05:31:17.103

在 ES2015 中，您现在可以`forEach`对 nodeList 使用方法。

```
document.querySelectorAll('abbr').forEach( el => console.log(el)); 
```

查看[MDN 链接](https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach)

但是如果你想使用 HTML Collections 或其他类似数组的对象，在 es2015 中，你可以使用`Array.from()`method. 此方法接受一个类似数组或可迭代的对象（包括 nodeList、HTML 集合、字符串等）并返回一个新的 Array 实例。你可以像这样使用它：

```
const elements = document.getElementsByTagName('abbr');
Array.from(elements).forEach( el => console.log(el)); 
```

由于`Array.from()`方法是可填充的，您可以像这样在 es5 代码中使用它

```
var elements = document.getElementsByTagName('abbr');
Array.from(elements).forEach( function(el) {
    console.log(el);
}); 
```

有关详细信息，请参阅[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)页面。

检查[当前浏览器支持](http://kangax.github.io/compat-table/es6/#test-Array_static_methods)。

**或者**

另一种 es2015 方法是使用扩展运算符。

```
[...document.querySelectorAll('abbr')].forEach( el => console.log(el)); 
```

[MDN 传播算子](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)

[扩展运算符 - 浏览器支持](http://kangax.github.io/compat-table/es6/#test-spread_(...)_operator)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-12T19:14:46.287

我的解决方案：

```
//foreach for nodeList
NodeList.prototype.forEach = Array.prototype.forEach;
//foreach for HTML collection(getElementsByClassName etc.)
HTMLCollection.prototype.forEach = Array.prototype.forEach; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-17T19:14:27.310

NodeList 是 DOM API 的一部分。查看同样适用于 JavaScript 的 ECMAScript 绑定。[http://www.w3.org/TR/DOM-Level-2-Core/ecma-script-binding.html](http://www.w3.org/TR/DOM-Level-2-Core/ecma-script-binding.html)。nodeList 和一个只读的长度属性和 item(index) 函数返回一个节点。

答案是，你必须迭代。没有替代。Foreach 将无法正常工作。我使用 Java DOM API 绑定并遇到同样的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-01T23:04:52.953

> 检查 MDN 以获取[NodeList.forEach](https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach)规范。

```
NodeList.forEach(function(item, index, nodeList) {
    // code block here
}); 
```

* * *

在 IE 中，使用[akuhn 的答案](https://stackoverflow.com/questions/13433799/why-doesnt-nodelist-have-foreach/22416614)：

```
[].forEach.call(NodeList, function(item, index, array) {
    // code block here
}); 
```

# mysql - Codeigniter 活动记录加入 3 个表

> ID：13433809
> 
> 赞同：1
> 
> 时间：2012-11-17T19:06:31.337
> 
> 标签：mysql, codeigniter, activerecord, codeigniter-2

我有3张桌子，

```
user - contains user_id | username | fullname | email etcc
user_profile - contains entry_id |user_id| profile_image_id| user_location etcc
user_profile_images - contains image_id| user_id | file_path | file_thumb | date etcc 
```

当用户注册时，所有详细信息都进入 users 表，user_id 也被添加到 user_profile 表中，其余设置默认为 NULL，直到用户添加一些配置文件信息。

我在 model_users 中有一个查询来从这三个表中获取所有用户的数据，它是这样的；

```
$this->db->where('users.user_id', $user_id)->select('*')->from('users');
$this->db->join('user_profile', 'user_profile.user_id = users.user_id', 'left');
$this->db->join('user_profile_images','user_profile_images.image_id = user_profile.profile_image_id','left'); 
```

只有当 user_profile 中的 profile_image_id 字段不为空时，即用户上传了图片时，它才能正常工作。在该字段为空的情况下，即使返回所有其他数据，也不返回用户 user_id。

我可以看到为什么会这样，因为我的联接查询需要字段 profile_image_id 但目前我的解决方法是将 user_profile 中的 profile_image_id 设置为 1（默认），这是默认图像，并且 image_id 为 1，user_id 为 0这是一般的默认图像。但我仍然无法克服这样一个事实，即我需要更新该查询以使其不再是黑客攻击。你们有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T21:38:27.237

尝试

```
$this->db->select('*')->select('users.user_id')->from('users')
                ->join('user_profile', 'user_profile.user_id = users.user_id', 'LEFT')
                ->join('user_profile_images', 'user_profile_images.image_id = user_profile.profile_image_id', 'LEFT')
                ->group_by('users.user_id')
                ->where('users.user_id', $user_id);
                $query = $this->db->get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:42:07.383

对表使用联接时，您需要所有联接表中的列具有唯一名称。您可以通过 AS 语法添加列别名，或者只检索您需要的列。在您的情况下，错误很可能是由于`user_id`所有三个表中都存在这一事实。因此，结果就像你所经历的那样。`user_id`仅在最后一次出现时检索，即如果您的用户已上传图像。我会更改查询，例如：

```
$this->db->where('users.user_id', $user_id);
$this->db->select('users.*,user_profile.user_location,user_profile_images.filepath'); // and other fields of interest...
$this->db->from('users');
$this->db->group_by('users.user_id'); // very useful for not getting multiple rows/user
$this->db->join('user_profile', 'user_profile.user_id = users.user_id', 'left');
$this->db->join('user_profile_images','user_profile_images.image_id = user_profile.profile_image_id','left'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T06:46:35.493

试试这个。

```
 $this->db->select("*");
            $this->db->from('table1');
            $this->db->join('table2','table2.id1=table1.id1');
            $this->db->join('table3','table3.id1=table1.id1');
            $query = $this->db->get();
            return $query->result(); 
```

# eclipse - 对Android框架进行修改后的android.jar（在Eclipse中）更新？

> ID：13433811
> 
> 赞同：1
> 
> 时间：2012-11-17T19:06:41.837
> 
> 标签：eclipse, android-framework

我修改了 Android 框架，并添加了我自己的服务。现在我想使用新的方法和服务。

但是，当我打开 Eclipse 进行调用我的新方法和服务的应用程序级应用程序开发时，Eclipse 无法解决它们。

这个时候我该怎么办？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T10:51:47.807

您应该使用以下命令（在 bash 中）编译它：

```
$ . build/envsetup.sh
$ lunch sdk-eng
$ make sdk 
```

这个过程可能需要一个多小时。
如果您需要 Windows SDK，请使用：

```
$ . build/envsetup.sh
$ lunch sdk-eng
$ make win_sdk 
```

现在您必须将 Eclipse 指向位于以下位置的新 SDK：

```
out/host/platform/sdk/android-sdk_eng.username_platform-x86/ 
```

或者类似的东西。

# c# - 隐藏和显示面板

> ID：13433812
> 
> 赞同：0
> 
> 时间：2012-11-17T19:06:50.673
> 
> 标签：c#, .net, installation, panel

**编辑**
我找到并发布了解决方案。

我正在尝试为我的应用程序制作安装程序，并且我正在尝试使用面板进行安装（我不知道这是否是一种好方法，但这为我提供了更多自定义选项，而不是使用 install shield 程序） . 最好的方法是什么？
这是我知道的代码：

**C# 代码**

```
foreach (var c in Controls)
{
    if (!(c is Panel)) continue;
    if (c.Name == "pnlBottom") continue;

    c.Visible = c.Name.Contains(_currentPanel.ToString());

    if (c.Visible) return;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T20:00:41.777

试试这个，它改变了单个面板的可见性：

```
private void PanelVisible(string panelName, bool visible)
{
    var panel = this.Controls.OfType<Panel>().FirstOrDefault(p => p.Name == panelName);
    if (panel != default(Panel)) panel.Visible = visible;
} 
```

如果您想使所有内容不可见，但只有一个：

```
private void PanelVisible(string panelName)
{
    foreach(var panel in this.Controls.OfType<Panel>().Where(p=>p.Name!="pnlBottom"))
    {
        panel.Visible = panel.Name == panelName;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:47:55.240

这是我用来显示面板的代码：

```
foreach (var c in Controls)
{
    if (!(c is Panel)) continue;
    if (c.Name == "pnlBottom") continue;

    c.Visible = c.Name.Contains(_currentPanel.ToString());

    if (c.Visible) return;
} 
```

这是我用来调用它并浏览我的面板的代码：
**下一步按钮**

```
private void btnNext_Click(object sender, EventArgs e)
{
    if (pnlContent1.Visible) { ShowPanel("2"); return; }
    if (pnlContent2.Visible) { ShowPanel("3"); return; }
    if (pnlContent3.Visible) { ShowPanel("4"); return; }
    if (pnlContent4.Visible) { ShowPanel("5"); return; }
} 
```

**返回键**

```
private void btnBack_Click(object sender, EventArgs e)
{
    if (pnlContent2.Visible) { ShowPanel("1"); return; }
    if (pnlContent3.Visible) { ShowPanel("2"); return; }
    if (pnlContent4.Visible) { ShowPanel("3"); return; }
    if (pnlContent5.Visible) { ShowPanel("4"); return; }
} 
```

我希望这也将用于其他人：D！

# java - Java-Junit：乘以 2 个多项式表达式

> ID：13433814
> 
> 赞同：0
> 
> 时间：2012-11-17T19:07:07.817
> 
> 标签：java, if-statement, junit, polynomial-math, multiplication

我正在创建一种将 2 个多项式表达式相乘的方法，这样：

`3x^5 * 2x^3 = 6x^8`-> 系数相乘，指数相加。

我的测试用例如下所示

```
@Test
public void times01() throws TError { 
    assertEquals(Term.Zero, Term.Zero.times(Term.Zero)); 
} 
```

我还应该补充一点`Term.Zero = (0,0)`，`Term.Unit = (1,0)`所以任何乘以`Term.Zero`is`Term.Zero`和任何乘以`Term.Unit`返回本身的`Term.Unit`有效值都是 1。

```
public Term times(Term that) throws CoefficientOverflow, ExponentOverflow, NegativeExponent {
    return null;
} 
```

这就是`times`方法。我正在寻求有关编码该`times`方法的帮助？我发现的问题是如何处理 3 个 Term 对象，`Term1`而`Term2`不是`Term3`使用无穷无尽的`if-statements`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:58:11.103

到目前为止，我已经设计了以下伪代码：

```
Term1 == Term.Zero OR Term2 == Term.Zero => Term3 = Term.Zero
Term1 == Term.Unit => Term3 = Term2
Term2 == Term.Unit => Term3 = Term1

Term1.coef * Term2.coef = Term3.coef
Term1.expo * Term2.expo = Term3.expo 
```

使用以下代码

```
@SuppressWarnings("null")
public Term times(Term that) throws CoefficientOverflow, ExponentOverflow, NegativeExponent {
    Term term1 = new Term(coef,expo);
    Term term2 = that;
    Term term3 = null;

    if(term1 == Zero || term2 == Zero) {
        term3 = Zero;
    } else if(term1 == Unit) {
        term3 = term2;
    } else if(term2 == Unit) {
        term3 = term1;
    } else if(term1.coef == 2 && term1.expo == 0) {
        term3.coef = term2.coef * 2;
        term3.expo = term2.expo;
    } else if(term2.coef == 2 && term2.expo == 0) {
        term3.coef = term1.coef * 2;
    term3.expo = term1.expo;
    } else {
        term3.coef = term1.coef * term2.coef;
        term3.expo = term1.expo + term2.expo;
    }

    return term3;
} 
```

但这让我不得不将 Term 类中的“coef/expo”变量从

```
final private int coef; 
```

至

```
private int coef; 
```

这会在以下测试中出现错误...

```
@Test
public void times09() throws TError { assertEquals(new Term(min,2), new Term(hmin,2).times(new Term(2,0))); } 
```

有任何想法吗？

# java - 字符串的长度

> ID：13433816
> 
> 赞同：0
> 
> 时间：2012-11-17T19:07:12.573
> 
> 标签：java, methods, if-statement, invoke, bluej

成员 ID 由唯一的字母和数字序列组成，长度最多为 10，pin 号由四位数字组成，我编写了两个方法 checkId 和 checkPassword 来比较长度，然后我在构造函数中调用它们. 但代码似乎无法正常工作

```
public class Test
    {

    private String yourName;
    private String yourId;
    private int password;

    /**
     * Constructor for objects of class Test
     */
    public Test(String yourName, String yourId, int password)
    {
        // initialise instance variables
        this.yourName = yourName;
        this.yourId = yourId;
        this.password = password;
        checkPassword();
        checkId();
    }

    private void checkId()
    {
       int length; 
       length = yourId.length();
       if (length >= 10){
           System.out.print("the length must be less than 10, please change it");
        }
    }

    private void checkPassword()
    {
        int length;
        length = password.length();
        if (length != 4 ){
            System.out.println("must be at 4");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T19:08:38.123

变量`password`的类型为`int`。诸如此类的类型称为原语，因此它们没有诸如`length()`. 你可以这样做`Integer.toString(password).length()`。

# python - 如何检查一个字符串是否以另一个字符串结尾，或者相反？

> ID：13433817
> 
> 赞同：1
> 
> 时间：2012-11-17T19:07:13.837
> 
> 标签：python, python-3.x, string

给定两个字符串，如果其中一个字符串出现在另一个字符串的末尾，则返回 True，忽略大小写差异（换句话说，计算不应“区分大小写”）。

示例/测试：

```
>>> end_other('Hiabc', 'abc') 
True 
>>> end_other('AbC', 'HiaBc') 
True 
>>> end_other('abc', 'abXabc') 
True 
```

我的代码：

```
def end_other(s1, s2):

    s1 = s1.upper()
    s2 = s2.upper()

    if s1[2:6] == s2:
        return True
    elif s2[2:6] == s1:
        return True
    elif s2 == s1:
        return True    
    else:
        return False 
```

我的期望是错误的。

（注意：这是来自[CodingBat的代码实践](https://codingbat.com/prob/p174314)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T19:15:14.570

有什么理由不能使用内置函数？

```
def end_other(s1, s2):
    s1 = s1.upper()
    s2 = s2.upper()
    return s1.endswith(s2) or s2.endswith(s1) 
```

您的带有任意切片的代码没有多大意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:21:06.607

像这样，使用`str.rfind()`：

```
In [114]: def end(s1,s2):
    s1=s1.lower()
    s2=s2.lower()
    if s1 in s2 and s2.rfind(s1)+len(s1) == len(s2):
        return True
    elif  s2 in s1 and s1.rfind(s2)+len(s2) == len(s1):
        return True 
    return False
   .....: 

In [115]: end('Hiabc','abc')
Out[115]: True

In [116]: end('abC','HiaBc')
Out[116]: True

In [117]: end('abc','abxabc')
Out[117]: True

In [118]: end('abc','bc')
Out[118]: True

In [119]: end('ab','ab12')
Out[119]: False 
```

# javascript - javascript对象存储

> ID：13433818
> 
> 赞同：0
> 
> 时间：2012-11-17T19:07:17.380
> 
> 标签：javascript

是否存在在浏览器中使用的微框架（IE 支持是可选的），它提供了满足以下要求的便捷文档存储功能：

1.  它应该支持可以处理嵌套对象的 getter 和 setter。
2.  它应该是可观察的——更新一个对象，向对象添加附加属性可以被观察到变化。
3.  高效的过滤/查询功能。

如果可以使用 IndexDB 持久化文档存储，那就太好了，但持久性不是严格的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:52:53.910

到目前为止，我发现的最佳选择是 Nathan Sobo 的[Monarch](https://github.com/nathansobo/monarch)。

引用描述：

> Monarch 是一个用于以客户端为中心的 Web 应用程序的关系建模框架。它表面上类似于 Backbone.js，但它使用关系代数作为一种声明性的组合语言来查询数据和订阅事件。Monarch 是用 CoffeeScript 编写的，但也可以从 JavaScript 中使用。

虽然它支持开箱即用的需求 2,3，但可以通过表之间的标准关系来模拟 1。如果后端数据库是关系数据库，那么在客户端上复制相同的结构（以及关联的表关系）非常容易。

如果表之间的关系不是必需的，那么Ian [Smith的](https://twitter.com/biastoact)[TaffyDB](http://www.taffydb.com/)似乎也是一个不错的选择，尽管我没有仔细研究过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:03:08.357

有很多选项，例如：backbone.js、ember.js、todo.js 等。我主要使用骨干和余烬。

# iphone - UIScrollView 没有一直滚动

> ID：13433825
> 
> 赞同：1
> 
> 时间：2012-11-17T19:07:44.803
> 
> 标签：iphone, ios, xcode, ipad, uiscrollview

我已经编写了一个 UIScrollView 来滚动 320x800，但是它会停止向下滚动某种方式，即使我更改代码中的大小它仍然会停止以同样的方式向下滚动，我唯一的想法是视图的高度是 548px。这是我目前在“ViewController.m”中的代码。

```
[ScrollView setScrollEnabled:YES];
[ScrollView setContentSize:CGSizeMake(320, 800)]; 
```

此代码当前保存在`- (void)viewDidLoad`. 所有链接都是在 Interface Builder 中创建的，编译时我没有收到任何错误。只是想我应该说我在 Xcode 4.5.2 中。

任何帮助表示赞赏，谢谢。

编辑：我应该说`UIScrollView`仍然滚动，但只是某种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:00:24.923

通过尝试以下操作，您可以更清楚地了解问题所在...

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [ScrollView setContentSize:CGSizeMake(320, 800)];  // consider renaming to lowercase 'scrollView'

    for (int i = 50; i < 800; i += 50) {
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(20, i, 100, 22)];
        label.text = [NSString string withFormat:@"label at y=%d", i];
        [ScrollView addSubview:label];
    }
} 
```

请注意，循环在 750 处结束，因此这是您应该看到的最后一个标签。

# seo - SEO：安全页面和 rel=nofollow

> ID：13433826
> 
> 赞同：2
> 
> 时间：2012-11-17T19:07:56.120
> 
> 标签：seo, private, rel, nofollow

是否应该将`rel="nofollow"`属性应用于绑定到安全/登录所需页面的站点链接？

我们有一个基于 URI 日期的链接结构，其中上一年的新闻内容是免费的，而今年和去年之前的任何一年都是付费的，需要登录的内容。

最终结果是，在 google 中搜索我们的公司名称时，首先出现的是 Contact、About、Login 等，标准的非登录要求内容。这很好，但理想情况下，我们有我们的免费内容，我们想要推广的页面，首先显示在搜索引擎结果中。

为此，链接结构现在生成`rel="follow"`我们想要推广的免费内容，以及`rel="nofollow"`我们想要在 SEO 搜索结果阶梯底部的所有付费内容和联系人、关于、登录等屏幕。

我还没有部署新的链接方案，因为害怕，你知道，在 SEO 方面炸毁网站 ;-) 尽管我们的排名不错，但一开始它的状态并不好，但我也不希望我们消失.

无论如何，智慧之言值得赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:16:15.837

## `nofollow`

我认为[Emil Vikström](https://stackoverflow.com/a/13433924/1591669)是错误的`nofollow`。您*可以*将该`rel`值`nofollow`用于内部链接。微[格式规范](http://microformats.org/wiki/rel-nofollow)和[HTML5 规范](http://www.w3.org/TR/html5/links.html#link-type-nofollow)并没有相反的说法。

谷歌甚至[举了](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=96569)这样一个例子：

> **抓取优先级：**搜索引擎机器人无法在您的论坛上登录或注册为会员，因此没有理由邀请 Googlebot 关注“在此处注册”或“登录”链接。使用`nofollow`这些链接可以让 Googlebot 抓取您希望在 Google 索引中看到的其他页面。然而，一个可靠的信息架构——直观的导航、用户和搜索引擎友好的 URL 等等——可能比通过 nofollowed 链接专注于爬行优先级更有效地利用资源。

这确实适用于您的用例。所以你*可以* `nofollow`链接到你的登录页面。但是请注意，如果您也`meta`-`noindex`他们，搜索“YourSiteName login”的人可能不会在他们的搜索结果中获得所需的页面。

## `follow`

没有`rel`价值“ `follow`”。它[没有在 HTML5 规范中定义，](http://www.w3.org/TR/html5/links.html#linkTypes)也没有在[HTML5 Link Type extensions](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)中定义。它甚至根本没有在[http://microformats.org/wiki/existing-rel-values](http://microformats.org/wiki/existing-rel-values)中提及。没有`rel`值的链接`nofollow`自动成为“关注链接”。对于某些链接，您不能覆盖`meta`- （这两个值甚至具有不同的语义）。`nofollow``nofollow`

## 你的情况

我会使用`nofollow`所有指向受限/付费内容的链接。我不会`nofollow`链接到有关网站的信息页面（关于、联系方式、登录），因为它们很有用，人们可能会专门搜索它们，它们会提供有关您网站的信息，而所有内容页面都提供有关各种话题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:19:11.027

Nofollow 仅适用于外部链接，不适用于您自己域内的链接。搜索引擎会尝试为所询问的查询提供最相关的内容，并且他们通常会*主动*避免考虑网站所有者的意愿。因此，nofollow 在这里不会为您提供帮助。

您真正想要做的是使新闻内容成为搜索您公司名称的最佳选择。搜索您公司名称的用户可能出于两个原因这样做：他们想要您的主页（第一页），或者他们更具体地想了解更多关于您的公司的信息。这意味着您的主页以及“关于”、“联系方式”等通常实际上是用户正在寻找的内容，搜索引擎会将它们显示在结果页面的顶部。

如果你不想这样，你必须让那些页面对想要了解更多关于你的公司的人毫无用处。这听起来可能很傻。要使您的“关于”和“联系”页面对搜索您的公司的人无用，您应该从这些页面中删除您的公司名称，以及有关您公司业务的任何信息。将这些信息放在新闻页面上，搜索引擎可能会开始将新闻排名更高。

另一种选择是根本不让搜索引擎索引这些其他页面，方法是将它们添加到 robots.txt 文件中。

# mysql - javafx连接到mysql

> ID：13433829
> 
> 赞同：1
> 
> 时间：2012-11-17T19:08:19.897
> 
> 标签：mysql, connection, javafx

我们正在构建 javafx 应用程序，它将显示有关股票的信息。这是网站： [http ://analiza.host-ed.me/](http://analiza.host-ed.me/)

但是我们遇到了一个大问题。每个免费主机都不允许远程 mysql 连接。还有我的问题。当我们的网站在服务器上（我链接的）是远程连接还是本地连接？当我们将此 javafx 应用程序作为站点时，它无法像在本地计算机上一样连接......有什么解决方案吗？感谢帮助。（我们需要使用免费托管，因为它只是一个学校项目..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:48:27.247

您可以从 JavaFX 访问 MySQL。但是 JavaFX 在客户端上运行，而 php 之类的东西通常在服务器上运行。您将需要从您的 Java 应用程序连接到 MySQL。由于您的托管服务提供商不允许您从 Java 客户端应用程序直接连接到数据库端口，因此您将需要其他一些连接方式。

您可以通过端口 80 进行隧道传输，可以运行 servlet（或 php 服务器代码等）以通过基于 HTTP 的 REST 接口拦截传入流量和代理数据库调用，或者您可以在客户端本地安装数据库。

我将假设，对于一个学校项目，每台客户端机器都可以拥有自己的数据库。在这种情况下，不要使用 MySQL，而是使用像[H2](http://www.h2database.com/html/main.html)这样的轻量级 Java 数据库，通过将其 jar 作为依赖库将其与您的应用程序捆绑在一起，使用 JavaFX[打包](http://docs.oracle.com/javafx/2/deployment/packaging.htm)工具将应用程序和 DB jar 打包为签名的 WebStart 应用程序并托管由托管服务提供商处的打包工具生成的文件。

**更新**

这是一个使用客户端计算机上的本地 H2 数据库的示例应用程序。

```
import java.sql.*;
import java.util.logging.*;
import javafx.application.Application;
import javafx.collections.*;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class H2app extends Application {
  private static final Logger logger = Logger.getLogger(H2app.class.getName());
  private static final String[] SAMPLE_NAME_DATA = { "John", "Jill", "Jack", "Jerry" };

  public static void main(String[] args) { launch(args); }

  @Override public void start(Stage stage) {
    final ListView<String> nameView = new ListView();

    final Button fetchNames = new Button("Fetch names from the database");
    fetchNames.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        fetchNamesFromDatabaseToListView(nameView);
      }
    });

    final Button clearNameList = new Button("Clear the name list");
    clearNameList.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        nameView.getItems().clear();
      }
    });

    VBox layout = new VBox(10);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 15;");
    layout.getChildren().setAll(
      HBoxBuilder.create().spacing(10).children(
        fetchNames, 
        clearNameList    
      ).build(),      
      nameView
    );
    layout.setPrefHeight(200);

    stage.setScene(new Scene(layout));
    stage.show();
  }

  private void fetchNamesFromDatabaseToListView(ListView listView) {
    try (Connection con = getConnection()) {
      if (!schemaExists(con)) {
        createSchema(con);
        populateDatabase(con);
      }
      listView.setItems(fetchNames(con));
    } catch (SQLException | ClassNotFoundException ex) {
      logger.log(Level.SEVERE, null, ex);
    }
  }

  private Connection getConnection() throws ClassNotFoundException, SQLException {
    logger.info("Getting a database connection");
    Class.forName("org.h2.Driver");
    return DriverManager.getConnection("jdbc:h2:~/test", "sa", "");
  }

  private void createSchema(Connection con) throws SQLException {
    logger.info("Creating schema");
    Statement st = con.createStatement();
    String table = "create table employee(id integer, name varchar(64))";
    st.executeUpdate(table);
    logger.info("Created schema");
  }

  private void populateDatabase(Connection con) throws SQLException {
    logger.info("Populating database");      
    Statement st = con.createStatement();      
    int i = 1;
    for (String name: SAMPLE_NAME_DATA) {
      st.executeUpdate("insert into employee values(i,'" + name + "')");
      i++;
    }
    logger.info("Populated database");
  }

  private boolean schemaExists(Connection con) {
    logger.info("Checking for Schema existence");      
    try {
      Statement st = con.createStatement();      
      st.executeQuery("select count(*) from employee");
      logger.info("Schema exists");      
    } catch (SQLException ex) {
      logger.info("Existing DB not found will create a new one");
      return false;
    }

    return true;
  }

  private ObservableList<String> fetchNames(Connection con) throws SQLException {
    logger.info("Fetching names from database");
    ObservableList<String> names = FXCollections.observableArrayList();

    Statement st = con.createStatement();      
    ResultSet rs = st.executeQuery("select name from employee");
    while (rs.next()) {
      names.add(rs.getString("name"));
    }

    logger.info("Found " + names.size() + " names");

    return names;
  }
} 
```

此示例有一个[相应的 NetBeans 项目](https://s3.amazonaws.com/baanthaispa/h2app.zip)，它将生成一个可部署的应用程序。该项目可以在[webstart](https://s3.amazonaws.com/baanthaispa/h2app/webstart.html)和[applet](https://s3.amazonaws.com/baanthaispa/h2app/applet.html)模式下进行测试。

对于示例，数据库存储在用户的计算机上（而不是从其下载应用程序的服务器）并在应用程序运行之间保持不变。

确切位置取决于 jdbc 连接初始化字符串。在我的示例中，数据库位于用户目录`jdbc:h2:~/test`中，该目录是操作系统和用户特定的。对于 Windows 的我来说，它以`C:\Users\john_smith\test.h2.db`. 使用 jdbc 连接字符串`jdbc:h2:~/test`比使用字符串更可取，`jdbc:h2:C:\\Baza`因为其中包含的字符串`C:\\`是特定于平台的，并且在非 Windows 系统上无法正常工作。有关 h2 jdbc 连接字符串的更多信息，请参阅[h2 手册中的连接设置](http://www.h2database.com/html/features.html#embedded_databases)。

h2 系统的工作原理是，如果数据库文件已经存在，则重新使用它，否则会创建一个新的数据库文件。如果您修改数据库，关闭应用程序，然后在一周后再次加载应用程序，它能够读取前一周创建的数据。

# windows-phone-8 - XAML 中的 WP8 中的 Mappolyline 不起作用？

> ID：13433831
> 
> 赞同：7
> 
> 时间：2012-11-17T19:08:38.063
> 
> 标签：windows-phone-8

我正在使用诺基亚的 WP 8 新地图。来自xaml的mappolyline有点问题，它不会显示。尝试过（删除了一些初始化代码）：其中 Coords 只是 GeoCoordinateCollection 类型的公共属性我可以通过执行代码来显示多边形，但是当我了解了将代码绑定到模板等等时，这不是我现在想要的。

```
<maps:Map x:Name="Map" Grid.Row="1"  >
        <maps:Map.MapElements >
            <maps:MapPolyline StrokeColor="red" StrokeThickness="2" Path="{Binding Coords}"></maps:MapPolyline>
        </maps:Map.MapElements>
</maps:Map> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:51:34.080

尝试通过代码添加折线，

```
 var _polyline = new MapPolyline();
    line.StrokeColor = Colors.Red;
    line.StrokeThickness = 2;
    line.Path.Add(new GeoCoordinate(lat,long));
    line.Path.Add(new GeoCoordinate(lat, long));
    MyMap.MapElements.Add(line); 
```

# ios - 下载后如何保存plist

> ID：13433839
> 
> 赞同：0
> 
> 时间：2012-11-17T19:09:25.980
> 
> 标签：ios, asynchronous, plist, nsdata, nsfilemanager

我正在下载这样的 .plist：

```
dispatch_async(kBgQueue, ^{
            NSError* error = nil;
            NSData* data = [NSData dataWithContentsOfURL:kFeedURL options:NSDataReadingUncached error:&error];
            if (error) {
                //NSLog(@"Feed error: %@", [error localizedDescription]);                    
            } else {
                [self performSelectorOnMainThread:@selector(fetchedData:)
                                       withObject:data waitUntilDone:YES];
            }

        }); 
```

但是如何将数据转换回 plist 并将其保存到应用程序？

```
- (void)fetchedData:(NSData *)responseData {
    //???
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:46:37.253

如果没有更多信息，很难告诉你该怎么做。您说您正在下载 plist，但随后询问如何将数据转换回 plist。如果它是一个序列化的 plist，那么您可能希望使用 NSPropertyListSerialization 类方法 propertyListWithData:options:format:error: 将其转换为 plist 对象。该方法返回一个对象类型的 id，因此您可能应该记录该对象的类，以查看您实际得到了什么，然后使用该类中的一种保存方法来保存数据。

# r - 从 psych 包中的 describe() 函数的输出中排除布尔变量

> ID：13433843
> 
> 赞同：0
> 
> 时间：2012-11-17T19:09:42.833
> 
> 标签：r, statistics, boolean, psych, describe

我有一些从文本文件导入的数据表。

然后我使用包中的`describe(table)`函数`psych`。

它返回每个变量的方差、均值等，包括布尔值，尽管这些变量标有星号。

```
age       1  5000  66.65  6.65   67.00   66.88  7.41  44.00  79.00  35.00  -0.33   -0.39   0.13
smokes*   2  5000  1.39   0.49   1.00    1.36   0.00  1.00   2.00   1.00    0.47   -1.78   0.01 
```

如何从`describe`函数输出中排除布尔变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:53:59.590

首先，命名对象不是一个好主意，`table`因为这是 R 中一个非常基本的函数的名称。

不可能从返回的对象中排除基于逻辑向量的统计信息`describe`，因为逻辑向量和因子都由 表示`*`。一种解决方案是从传递给的对象中排除所有逻辑列`describe`。

对于您的数据框`table`：

```
describe(table[ , !sapply(table, is.logical)]) 
```

# c# - 考虑为游戏开发切换语言？我是不是该？

> ID：13433844
> 
> 赞同：4
> 
> 时间：2012-11-17T19:09:50.507
> 
> 标签：c#, xna, unity3d

我已经用 XNA 做 C# 一年左右了，我对 2D 游戏非常满意。但经过一番阅读，我担心 XNA 的未来，因为 Windows 8 和类似的东西不支持它。

所以我一直在考虑切换到 Unity 3D？Unity 与 XNA/C# 相比有哪些优势，值得一试吗？如果不是，为什么？我也愿意接受其他语言和引擎的建议。

我目前正在上学并将游戏开发视为一种职业，所以我想要一些不会在一年左右（据我们所知）内死去的东西，并且会给我我需要的技能。还要考虑到我以前有 C# 的编程知识。

谢谢，大卫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T19:16:28.600

**XNA**

XNA 仍然适用于 Windows 8。问题是它们不支持在 Windows 8 Modern UI 中基于 XNA 的游戏。XNA 仍然适用于 Windows 8 桌面游戏。术语非常混乱。

XNA 将在新的 Xbox 控制台发布时进行彻底的大修，或者将设计一些全新的东西。

**语**

如果要为 Windows 8 Modern UI 创建游戏，例如 Cut The Rope 等，则需要使用 C++。我最后一次看到 C++ 是唯一可以与 DirectX 和 Windows 8 模式互操作的受支持语言。Windows 8 的所有其他功能都可通过 C# 获得。

**Unity3d**

如果你想制作视频游戏，你应该选择 Unity3d，或者类似的游戏引擎和框架。许多视频游戏创作者遇到的问题是尝试设计另一个游戏引擎。这已经做到了它们成为商品的程度。专注于游戏，而不是引擎。

Unity3d 知识将比使用 XNA 创建简单的游戏更有价值。不过，您仍然应该了解 3D 理论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:32:27.830

**[MonoGame](http://monogame.codeplex.com/)**是一个免费的 XNA 兼容库，允许您使用 C# 为 WinRT、Windows 应用商店应用程序和 Windows Phone 8 制作游戏，并在[Xamarin](http://www.xamarin.com)工具之上还适用于 iOS 和 Android。这在 SharpDX（DirectX 的优化托管包装器）之上运行，因此您的游戏运行速度与使用 XNA 几乎相同。

由于 MonoGame 是开源的、积极开发的并针对所有当前平台，您可能不必担心它很快就会过时。它为您提供了一种很好的方式来保持您的基于 C#、基于 XNA 的代码库现在以 Windows RT 和 Windows 应用商店为目标，并且如果您购买 Xamarin 工具，还可能扩展到其他移动平台。

所以没有理由将你的 C# 东西转移到 C++。

另一方面，Unity3D 是一个完全不同的游戏框架，并且不是一个简单的移植。但是您可以针对更多平台（尤其是控制台，现在也包括 Flash），并且仍然使用 C# 编写大部分游戏的脚本。但这是一个完全不同的学习工具。

# neo4j - Gremlin getting related nodes grouped by relation type

> ID：13433845
> 
> 赞同：0
> 
> 时间：2012-11-17T19:09:52.473
> 
> 标签：neo4j, gremlin

This is the code i'm executing:

```
g.v(452).outE('friend', 'like').outV() 
```

The return 52 nodes ... i want to form them in categories by edge type, something like:

[ {friend: [v2,v3,v4...]}, {'like': [v5,v7,v9...]} ]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:03:55.687

Using the toy graph from the Gremlin terminal for example purposes :

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6] 
```

I added an extra edge called 'friends' to make the data a bit more interesting (where there would be multiple edges between two vertices):

```
gremlin> g.addEdge(g.v(1), g.v(2), 'friends')
==>e[0][1-friends->2]
gremlin> g.v(1).outE('knows','created','friends')
==>e[7][1-knows->2]
==>e[8][1-knows->4]
==>e[9][1-created->3]
==>e[0][1-friends->2] 
```

From there you could do something like:

```
gremlin> g.v(1).outE('knows','created','friends').groupBy{it.label}{it.inV.next()}.cap
==>{knows=[v[2], v[4]], friends=[v[2]], created=[v[3]]} 
```

# save - bufferimage() 正在处理

> ID：13433848
> 
> 赞同：0
> 
> 时间：2012-11-17T19:10:13.860
> 
> 标签：save, byte, processing

我正在做一个草图，它是画布的一部分：

```
PImage img = get(180, 0, 620, 400); 
```

我想用我找到的这些功能将它上传到我的网络服务器：

[http://wiki.processing.org/w/Saving_files_to_a_web-server](http://wiki.processing.org/w/Saving_files_to_a_web-server)

问题是，当我尝试调用 function`saveToWeb_saveJPG()`时，该函数将 转换`PImage`为带有 的`Byte`数组`bufferImage()`，并且处理说它不存在。如何将`PImage`变量转换为`Byte`数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T09:42:16.743

满足您的问题的最简单方法：

```
bufferImage(get(180, 0, 620, 400)) 
```

因此，您的代码将类似于以下内容：

```
saveToWeb_saveJPG("mytitle","savedJPG",bufferImage(get(180, 0, 620, 400))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T15:49:21.617

我试过这样：

```
PImage img = loadImage("file.ext");
byte[] toSave = new byte[img.width * img.height];
PImage.loadPixels();
for(int i = 0; i < img.width * img.height; i ++)
  toSave[i] = (byte)img.pixels[i];
img.updatePixels(); 
```

它不存在任何问题，在编译时也不运行！我认为即使将其另存为文件也无法将其作为图像打开，它也可以正常工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:44:48.850

该方法需要一个字节数组或`byte[]`. 您可以像这样从您的[PImage](http://processing.org/reference/PImage.html) img 访问它：

```
img.pixels; 
```

# mysql - 使用 join 语句防止 mysql 组中的重复项

> ID：13433849
> 
> 赞同：1
> 
> 时间：2012-11-17T19:10:19.227
> 
> 标签：mysql, join, group-by

我有一个不可能是新的问题，但我不知道如何得到我想要的答案。我想念的可能很简单

使用 mysql 5.5，我有 2 个表，“推荐”和“状态”。我想计算已取消的推荐，按 appt_date 分组：

```
SELECT SUM(1) AS count, appt_date FROM referrals
GROUP BY appt_date
JOIN status ON referrals.id=status.referral_id
WHERE status.status_name="cancelled" 
```

这工作正常，直到我有一个被取消两次的推荐。换句话说，具有给定 id 的推荐在状态表中有 2 行与匹配的推荐 ID 将被计算两次。

在这里进行join操作时，如何将每条推荐记录只统计一次？

编辑：我真正的问题应该是这样的：

```
SELECT SUM(quantity) AS count, appt_date FROM referrals
GROUP BY appt_date
JOIN status ON referrals.id=status.referral_id
WHERE status.status_name="cancelled" 
```

因为每个推荐都可以有自己的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:36:59.080

尝试将 count 更改为 count(DISTINCT id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:30:58.660

所以 count 只是一个标签，我应该看到的 :)

诱惑是做 SUM(DISTINCT quantity) 但显然只会删除重复的“数量”，这不是你想要的。看起来您需要加入派生选择表。看看这个...

[http://www.sqlteam.com/article/how-to-use-group-by-with-distinct-aggregates-and-derived-tables](http://www.sqlteam.com/article/how-to-use-group-by-with-distinct-aggregates-and-derived-tables)

# ruby-on-rails - rails link_to 控制器动作

> ID：13433854
> 
> 赞同：3
> 
> 时间：2012-11-17T19:10:26.930
> 
> 标签：ruby-on-rails, controller, action, link-to

我在我的主页上显示了 4 张图片，当用户点击其中一张时，我想更改一个参数：在我的数据库中询问。

在我看来，我添加了

```
<%= link_to image_tag(friends.picture), {:controller => "static_pages", :action => "recomend", :id => friends.user_id} %> 
```

在 Static_Pages_Controller 我有

```
def recomend
  a = Friends.find_by_user_id(params[:id])
  a.update_attribute(:asked, true)
end 
```

在 routes.rb 中

```
resources :static_pages do
 resources :recomend
end 
```

但是当我点击它时，服务器刷新我的家（为什么？！）并且在服务器日志中我看到

```
Started GET "/auth/failure?action=recomend&controller=static_pages&id=101" for 127.0.0.1 at 2012-11-17 19:59:25 +0100. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T19:49:55.187

也许它无法识别链接。我想`friends.picture`是图片的链接，所以你可以试试这个：

```
<%= link_to( "", :controller => "static_pages", :action => "recomend", :id => friends.user_id) do %>
  <%= image_path(friends.picture) %>
<% end %> 
```

# r - 有人可以在“scan()”中解释这个错误吗？

> ID：13433855
> 
> 赞同：-4
> 
> 时间：2012-11-17T19:10:28.413
> 
> 标签：r, list, file

你能帮我理解这个错误吗`scan()`？

我相信错误在`what=list(.)` 如果是这样，有人可以帮助澄清吗？

![在此处输入图像描述](../Images/bb029af6033757ec9399d5bb484ac75d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:45:30.707

看起来它期望列表***仅***包含实数，但列表包含实数 ( `0`) 和字符串 ( `""`)。

如果您想为数字提供一个空值，而不是`""`尝试使用`NA`. 所以这条线是

```
 what=list(NA, NA, 0, 0, 0) 
```

# cuda - 将 cuda 与 gmp 链接

> ID：13433860
> 
> 赞同：4
> 
> 时间：2012-11-17T19:11:09.077
> 
> 标签：cuda, gmp

我正在尝试将 cuda 与 GNU 多精度库 (gmp) 一起使用。当我将诸如 mpf_init() 之类的 gmp 指令添加到我的设备代码中时，出现此编译器错误：tlgmp.cu(37): error: calling a host function("__ gmpf_init") from a __ device__ /__ global__ function("histo" ） 不被允许。

是否可以重新定义 gmp 指令以便它们可以在设备代码中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T03:22:44.493

GMP 库是为主机编译的，因此不能直接在设备代码中使用。这是您看到的错误的直接原因。

由于它是一个开源库，因此可以通过一些努力来检查代码并创建您自己的版本，该版本`__device__`对您需要的各种功能具有适当的装饰器（可能还有其他更改）。然而，这可能需要大量的工作。

另一种选择可能是调查[CUMP 库](https://github.com/skystar0227/CUMP)。

另一种选择可能是调查[xmp 库](https://github.com/NVlabs/xmp)

另一种选择可能是调查[坎帕里图书馆](https://homepages.laas.fr/mmjoldes/campary/)

# sql - 如何从 PostgreSql 的预订中只返回工作时间？

> ID：13433863
> 
> 赞同：5
> 
> 时间：2012-11-17T19:11:24.777
> 
> 标签：sql, postgresql, schedule, planning, postgresql-9.2

[从如何在 PostgreSql 的预订表中找到第一个空闲时间的](https://stackoverflow.com/questions/13387189/how-to-find-first-free-time-in-reservations-table-in-postgresql)好答案中选择

```
create table reservation (during tsrange,
 EXCLUDE USING gist (during WITH &&)
 ); 
```

用于查找从给定日期和时间开始的日程安排间隙（2012-11-17 8：在下面的示例中）它还可以找到星期六、星期日和公共假期。公众假期定义见表

```
create table pyha ( pyha date primary key) 
```

如何也排除周末和公共假期？

硬编码空闲时间保留为查询

```
with gaps as (
  select
    upper(during) as start,
    lead(lower(during),1,upper(during)) over (ORDER BY during) - upper(during) as gap
  from (
    select during
    from reservation
   union all values
     ('(,2012-11-17 8:)'::tsrange), -- given date and hour from which to find free work time
     ('[2012-11-17 0:,2012-11-18 24:)'::tsrange), -- exclude saturday
     ('[2012-11-18 0:,2012-11-19 8:)'::tsrange),  -- exclude sunday
     ('[2012-11-19 18:,2012-11-20 8:)'::tsrange),
     ('[2012-11-20 18:,2012-11-21 8:)'::tsrange),
     ('[2012-11-21 18:,2012-11-22 8:)'::tsrange),
     ('[2012-11-22 18:,2012-11-23 8:)'::tsrange),
     ('[2012-11-23 18:,2012-11-24 24:)'::tsrange),
     ('[2012-11-24 0:,2012-11-25 24:)'::tsrange), -- exclude saturday
     ('[2012-11-25 0:,2012-11-26 8:)'::tsrange)  -- exclude sunday
 ) as x
)
select *
  from gaps
where gap > '0'::interval
order by start 
```

每个空闲时间范围都需要单独的联合行。

从给定日期和时间开始，在工作日和工作时间（8:00 .. 18:00）中返回空闲时间的最佳方式是什么？

**更新**

Select in answer 总是在 8:00 返回空闲时间。如何在指定的开始日期返回不早于指定开始时间的空闲时间，例如如果开始时间为 9，则不早于 2012-11-19 9:00？开始时间可能只有值 8,9,10,11,12,13,14,15,16 或 17

即使 2012-11-19 8:00 如果免费，它也应该返回 2012-11-19 9:00。仅当 2012-11-19 9:00 没有空闲时间且后续工作日 8:00 首次空闲时，才应返回 8:00。

我尝试通过将***2012-11-19 9:***添加到两个位置来解决此问题，如下面的查询所示，但此查询仍返回 2012-11-19 8:00 的空闲时间。如何解决此问题，使其在 2012-11-19 9:00 返回空闲时间？

```
create table reservation (during tsrange,
 EXCLUDE USING gist (during WITH &&)
 );
create table pyha ( pyha date primary key);
with gaps as (
    select
        upper(during) as start,
        lead(lower(during),1,upper(during)) over (ORDER BY during) - upper(during) as gap
    from (
        select during
          from reservation
             where upper(during)>= '2012-11-19 9:'
       union all values
         ('(,2012-11-19 9:)'::tsrange)
        union all
        select
            unnest(case
                when pyha is not null then array[tsrange(d, d + interval '1 day')]
                when date_part('dow', d) in (0, 6) then array[tsrange(d, d + interval '1 day')]
                else array[tsrange(d, d + interval '8 hours'),
                           tsrange(d + interval '18 hours', d + interval '1 day')]
            end)
        from generate_series(
            '2012-11-19'::timestamp without time zone,
            '2012-11-19'::timestamp without time zone+ interval '3 month',
            interval '1 day'
        ) as s(d)
        left join pyha on pyha = d::date
    ) as x
)

select start,
   date_part('epoch', gap) / (60*60) as hours
  from gaps
where gap > '0'::interval
order by start 
```

**更新2**

我尝试了更新的答案，但它返回了错误的数据。完整的测试用例是：

```
create temp table reservation  ( during tsrange ) on commit drop;
insert into reservation values(
'[2012-11-19 11:00:00,2012-11-19 11:30:00)'::tsrange );

with gaps as (
    select
        upper(during) as start,
        lead(lower(during),1,upper(during)) over (ORDER BY during) - upper(during) as gap
    from (
        select during
          from reservation
        union all
        select
            unnest(case
                when pyha is not null then array[tsrange(d, d + interval '1 day')]
                when date_part('dow', d) in (0, 6) then array[tsrange(d, d + interval '1 day')]
                when d::date =  DATE'2012-11-19' then array[
                            tsrange(d, '2012-11-19 12:'),  -- must return starting at 12:00
                            tsrange(d + interval '18 hours', d + interval '1 day')]
                else array[tsrange(d, d + interval '8 hours'), 
                           tsrange(d + interval '18 hours', d + interval '1 day')]
            end)
        from generate_series(
            DATE'2012-11-19'::timestamp without time zone,
            DATE'2012-11-19'::timestamp without time zone+ interval '3 month',
            interval '1 day'
        ) as s(d) 
        left join pyha on pyha = d::date
    ) as x 
)

select start,
   date_part('epoch', gap) / (60*60) as tunde
  from gaps 
where gap > '0'::interval
order by start 
```

观察到的第一行：

```
"2012-11-19 11:30:00" 
```

预期的 ：

```
"2012-11-19 12:00:00" 
```

怎么修 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:59:09.070

您可以使用 generate_series() 函数来屏蔽非营业时间：

```
with gaps as (
    select
        upper(during) as start,
        lead(lower(during),1,upper(during)) over (ORDER BY during) - upper(during) as gap
    from (
        select during
        from reservation
        union all
        select
            unnest(case
                when pyha is not null then array[tsrange(d, d + interval '1 day')]
                when date_part('dow', d) in (0, 6) then array[tsrange(d, d + interval '1 day')]
                when d::date = '2012-11-14' then array[tsrange(d, d + interval '9 hours'), tsrange(d + interval '18 hours', d + interval '1 day')]
                else array[tsrange(d, d + interval '8 hours'), tsrange(d + interval '18 hours', d + interval '1 day')]
            end)
        from generate_series(
            '2012-11-14'::timestamp without time zone, 
            '2012-11-14'::timestamp without time zone + interval '2 week', 
            interval '1 day'
        ) as s(d) 
        left join pyha on pyha = d::date
    ) as x 
)
select *
    from gaps
where gap > '0'::interval
order by start 
```

让我解释一些棘手的部分：

*   您不必将周六/周日的日期插入`pyha`表中，因为您可以使用`date_part('dow', d)`函数。仅在公共假期使用`pyha`表格。'dow' 分别为 Sun 或 Sat 返回 0 或 6。
*   公共假期和周六/周日可以表示为单个间隔 (0..24)。工作日必须由两个间隔 (0..8) 和 (18..24) 表示，因此 unnest() 和 array[]
*   您可以在 generate_series() 函数中指定开始日期和长度

根据您对问题的更新，我添加了`when`另一个`case`：

```
when d::date = '2012-11-14' then array[tsrange(d, d + interval '9 hours'), tsrange(d + interval '18 hours', d + interval '1 day')] 
```

这个想法是为开始日期（`d::date = '2012-11-14'`）产生不同的间隔：（0..9）和（18..24）

# sql-server-2008 - MDX 中的日期范围问题，缺少日期

> ID：13433864
> 
> 赞同：2
> 
> 时间：2012-11-17T19:11:26.497
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008, ssas, mdx

我有一个 SSRS 报告，它使用以下表达式进行过滤：

```
="{[Claim Cheque].[Cheque Date].&[" + format(Parameters!StartDate.Value, "yyyy-MM-dd") + "T00:00:00]:[Claim Cheque].[Cheque Date].&[" + format(Parameters!EndDate.Value, "yyyy-MM-dd") + "T00:00:00]}" 
```

效果很好。我的问题是我每天都没有检查，这使得查询不返回任何结果。例如，我选择的日期范围是 11 月 1 日到 20 日。我有 14 日和 15 日的支票，但没有 20 日。这样我会在我的报告中错过第 14 和第 15 的结果。

我知道如何强制参数只获取多维数据集中的现有值。但我需要能够选择所有日期。还有其他方法可以使此表达式返回所需的结果吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:03:47.177

在我看来，您有一个仅用于 [支票日期] 的单独日期维度，而不是链接回完全填充的主日期维度。查看 AdventureWorks 示例中的 Order Date 和 Ship Date 维度的处理方式。它们在这里得到了很好的解释：[角色扮演维度](http://www.jamesserra.com/archive/2011/11/role-playing-dimensions/)

我能够针对该数据运行像您这样的 MDX 查询，其中在该范围的开始日期和结束日期没有交易：

```
Select 
[Measures].[Order Count] on 0,
[Sales Channel].&[Reseller] on 1
From [Adventure Works]
Where {[Ship Date].[Fiscal].[Date].&[20060701]:[Ship Date].[Fiscal].[Date].&[20060710]} 
```

和

```
Select 
[Measures].[Order Count] on 0,
([Sales Channel].&[Reseller],
{[Ship Date].[Fiscal].[Date].&[20060701]:[Ship Date].[Fiscal].[Date].&[20060710]}) on 1
From [Adventure Works] 
```

# ruby-on-rails - 使用 geocoder gem 对地址进行地理编码，使用 RGeo 对 PostGIS 数据库进行地理编码

> ID：13433865
> 
> 赞同：10
> 
> 时间：2012-11-17T19:11:30.793
> 
> 标签：ruby-on-rails, activerecord, callback, geocoding, postgis

我正在尝试使用地理编码器 gem 来查找地址和坐标。我希望它与我的 PostGIS 空间数据库和 RGeo gem 一起使用，它使用 POINT 功能而不是分别保存纬度和经度值。因此，我尝试使用我的模型将地理编码器查找的结果保存到 RGeo POINT 功能中：

```
class Location < ActiveRecord::Base
  attr_accessible :latlon, :name, :address
  set_rgeo_factory_for_column(:latlon, RGeo::Geographic.spherical_factory(:srid => 4326))

  geocoded_by :name_and_address do |obj, results|
    if geo = results.first
      obj.latlon = Location.rgeo_factory_for_column(:latlon).point(geo.longitude, geo.latitude)
    end
  end

  after_initialize :init
  after_validation :geocode

  def init
    self.latlon ||= Location.rgeo_factory_for_column(:latlon).point(0, 0)
  end

  def latitude
    self.latlon.lat
  end

  def latitude=(value)
    lon = self.latlon.lon
    self.latlon = Location.rgeo_factory_for_column(:latlon).point(lon, value)
  end

  def longitude
    self.latlon.lon
  end

  def longitude=(value)
    lat = self.latlon.lat
    self.latlon = Location.rgeo_factory_for_column(:latlon).point(value, lat)
  end

  def name_and_address
    "#{self.name}, #{self.address}"
  end

end 
```

在 Rails 控制台中，我现在可以执行以下操作：

```
test = Location.new(name: "Eiffel Tower") // => #<Location id: nil, name: "Eiffel Tower", latlon: #<RGeo::Geographic::SphericalPointImpl:0x81579974 "POINT (0.0 0.0)">, created_at: nil, updated_at: nil, address: nil>
test.geocode    //  => #<RGeo::Geographic::SphericalPointImpl:0x81581ac0 "POINT (2.294254 48.858278)"> 
```

精彩的！但是，当我想保存我的测试位置时，它会触发`:after_validation`调用，`:geocode`我得到一个错误：

```
NoMethodError: undefined method `lon' for nil:NilClass
    from /Users/sg/rails-projects/geo_rails_test/app/models/location.rb:24:in `latitude='
    from /Users/sg/rails-projects/geo_rails_test/app/models/location.rb:7:in `block in <class:Location>'
    from /Users/sg/.rvm/gems/ruby-1.9.3-p194/gems/geocoder-1.1.2/lib/geocoder/stores/base.rb:108:in `call'
    from /Users/sg/.rvm/gems/ruby-1.9.3-p194/gems/geocoder-1.1.2/lib/geocoder/stores/base.rb:108:in `do_lookup'
    from /Users/sg/.rvm/gems/ruby-1.9.3-p194/gems/geocoder-1.1.2/lib/geocoder/stores/active_record.rb:278:in `geocode'
    from /Users/sg/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1498365873506454431__validation__51840359655181017__callbacks'
    [...] 
```

地理编码回调似乎删除了 RGeo 对象，因此它的内置方法以及我的 getter 和 setter 方法不再可用。为什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T19:28:08.550

这是一个该死的错字...

有用。我把它搁置了，也许其他人有同样的问题或更好的解决方案......

我也添加了`reverse_geocode`案例。

现在看看它能做什么：

```
1.9.3p194 :310 > loc = Location.new(name: "Vatikan")
 => #<Location id: nil, name: "Vatikan", latlon: #<RGeo::Geographic::SphericalPointImpl:0x8148add8 "POINT (0.0 0.0)">, created_at: nil, updated_at: nil, address: nil> 
1.9.3p194 :311 > loc.save
   (0.2ms)  BEGIN
  SQL (0.6ms)  INSERT INTO "locations" ("address", "created_at", "latlon", "name", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["address", "Via Pio X, 00120, Vatican City"], ["created_at", Sat, 17 Nov 2012 19:26:59 UTC +00:00], ["latlon", #<RGeo::Geographic::SphericalPointImpl:0x81570554 "POINT (12.453389 41.902916)">], ["name", "Vatikan"], ["updated_at", Sat, 17 Nov 2012 19:26:59 UTC +00:00]]
   (0.9ms)  COMMIT
 => true 
```

我喜欢这个！:-)

# ruby-on-rails-3 - Monit Ruby on Rails Sidekiq

> ID：13433866
> 
> 赞同：6
> 
> 时间：2012-11-17T19:11:35.323
> 
> 标签：ruby-on-rails-3, monit, sidekiq

我正在尝试为 Sidekiq 设置 Monit。这是我到目前为止的配置文件：

```
 check process sidekiq_site
  with pidfile /var/www/site/tmp/pids/sidekiq.pid
  start program = "bundle exec sidekiq -C /var/www/site/config/sidekiq.yml -P /var/www/site/tmp/pids/sidekiq.pid" with timeout 90 seconds
  if totalmem is greater than 200 MB for 2 cycles then restart # eating up memory?
  group site_sidekiq 
```

问题是当我运行 monit reload 程序“捆绑”不存在时，我收到一条消息。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-09T01:35:40.057

在完成我自己的 monit 和 sidekiq 配置之后，我可以分享对我运行 ubuntu 有用的东西。

首先，如果您在该发行版上，则存在一个用于 ubuntu 的 sidekiq upstart 脚本。有用于 sidekiq 和管理工作人员的脚本：[https ://github.com/mperham/sidekiq/tree/master/examples/upstart/manage-one](https://github.com/mperham/sidekiq/tree/master/examples/upstart/manage-one)

当我使用 rvm 时，我在使用默认的 upstart 脚本时遇到了一些错误。检查 /var/logs/upstart/sidekiq-0.log 可以发现一些问题。这一行：

`exec bin/sidekiq -i ${index} -e production -C config/sidekiq.yml -P tmp/pids/sidekiq-${index}.pid`

需要改为`exec bundle exec sidekiq`+选项

然后，为了使所有内容与我的 rvm 安装保持一致，我更改了以下内容：

```
#source $HOME/.rvm/scripts/rvm
source /usr/local/rvm/scripts/rvm 
```

**在 /etc/monit/monitrc 我引用了新贵脚本并具有：**

```
# sidekiq
check process sidekiq
  with pidfile /var/www/apps/myapp/current/tmp/pids/sidekiq-0.pid
  start program = "/usr/bin/sudo start sidekiq index=0"
  stop program = "/usr/bin/sudo stop sidekiq index=0"
  if totalmem is greater than 500 MB for 2 cycles then restart # eating up memory?
  if 3 restarts within 5 cycles then timeout 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T08:27:26.313

检查：[https](https://groups.google.com/forum/?fromgroups=#!topic/rubyversionmanager/0abB9jlqi_Y) ://groups.google.com/forum/?fromgroups= #!topic/rubyversionmanager/0abB9jlqi_Y 如果您使用 rvm，

```
/bin/su - <username> -c 'bundle exec sidekiq -C /var/www/site/config/sidekiq.yml -P /var/www/site/tmp/pids/sidekiq.pid' 
```

如果从用户启动监视器，请在 .bash_profile 中设置 $HOME。

或调查 whis 答案：[https ://github.com/mperham/sidekiq/issues/506](https://github.com/mperham/sidekiq/issues/506)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-04T16:36:43.123

这是我在 github 上写的一个要点：

```
check process sidekiq_production with pidfile /var/run/sidekiq_production.pid
        depends on redis-server
        start program = "/etc/init.d/sidekiq_production start" with timeout 90 seconds
        stop program = "/etc/init.d/sidekiq_production stop" with timeout 90 seconds
        if totalmem is greater than 200 MB for 2 cycles then restart # eating up memory?
        if 2 restarts within 3 cycles then timeout 
```

我还在 Debian 上为 sidekiq 编写了一个初始化脚本：[https ://gist.github.com/alain75007/5517948](https://gist.github.com/alain75007/5517948)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-29T09:29:30.893

最后这个解决方案像魅力一样对我有用:)

```
check process sidekiq with pidfile path_to_my_pid_file/sidekiq.pid

start program = "/bin/bash -c 'cd my_app_current && source /home/myuser/.rvm/environments/ruby-2.1.2@global && bundle exec sidekiq -e production -P path_to_my_pid_file/sidekiq.pid -L /my_shared_folder_path/log/sidekiq.log -C my_app_current/config/sidekiq.yml --daemon'" as uid "myuser" and gid "myuser"

stop program = "/bin/bash -c 'kill -s INT `cat path_to_my_pid_file/sidekiq.pid`'" as uid "myuser" and gid "myuser" 
```

** 请记住以下几点：**

*   我正在使用 RVM 进行 ruby​​ 版本管理，请检查 rbenv。
*   在这里，您需要按照我在这里传递的方式传递 ruby​​ 的全局位置：-`/home/myuser/.rvm/environments/ruby-2.1.2@global`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-16T10:57:19.757

这是在带有 rvm 的 Ubuntu 上工作的配置

```
check process sidekiq-th with pidfile /web/vcms/tmp/pids/sidekiq.pid
   start program = "/home/dimon/.rvm/bin/rvm-shell -c '/web/vcms/sidekiq.sh start'"
   stop program = "/bin/bash /web/vcms/sidekiq.sh stop &" 
```

它使用[脚本](https://gist.github.com/ponchik/9c3d9c646e19c661e162)，主要行是

开始

```
cd /web/vcms; sidekiq -d -e production & 
```

并停止

```
sidekiqctl stop $PIDFILE 
```

我不是 shell 脚本专家，如果您有任何建议，我将不胜感激 =)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-13T09:38:55.847

您的问题是缺少命令包。我认为您应该像这样编写monit配置文件：

```
check process sidekiq 
  with pidfile /srv/www/projects/myapp/shared/log/production.sidekiq.pid
  start program = "/usr/bin/env /usr/bin/env HOME=/home/USER_NAME RACK_ENV=production RAILS_ENV=production PATH=/usr/local/bin:/usr/local/ruby/bin:/usr/bin:/bin:$PATH /bin/sh -l -c 'cd /srv/www/rails/myapp/current; bundle exec sidekiq'" as uid USER_NAME
  stop program = "/usr/bin/env /usr/bin/env HOME=/home/USER_NAME RACK_ENV=production RAILS_ENV=production PATH=/usr/local/bin:/usr/local/ruby/bin:/usr/bin:/bin:$PATH /bin/sh -l -c 'cd /
  group myapp_workers 
```

如果您走进应用程序目录并调用 bundle，我认为它可以工作。

# jquery - Jquery 如何从复杂的 JSON 字符串中获取信息

> ID：13433867
> 
> 赞同：2
> 
> 时间：2012-11-17T19:11:39.567
> 
> 标签：jquery, ajax, json

请给我这个表格：

```
<form>

    <p>
      <label for="field_userAddress">Adresse (*)</label>
      <input type="text" name="userAddress" id="field_userAddress"  />
    </p>
    <p>
      <label for="field_userCP">CP (*)</label>
      <input type="text" name="userCP" id="field_userCP"  />
    </p>
    <p>
      <label for="field_vars[1]">vars one (*)</label>
      <input type="text" name="vars[1]" id="field_uservars[1]"  />
    </p>
    <p>
      <label for="field_vars[2]">Vars two (*)</label>
      <input type="text" name="vars[2]" id="field_vars[2]"  />
    </p>

</form> 
```

而且我希望使用 AJAX 控制字段，所以我在 php 端做了工作，最后我以这种方式请求使用 JQuery 一个 json 字符串：

```
{
    "status": 0,
    "err": {
        "userAddress": "required",
        "userCP": "required"
    },
    "errr": {
        "vars": {
            "1": "required",
            "2": "required"
        }
    }
} 
```

我想在相关字段前面显示每条消息。

所以对于第一个“错误”，我使用了这些行并且它有效：

```
$.each(r.err,function(k,v)
                        {
                            form.find('[name='+k+']').closest('p').append(v);
                        }); 
```

但是对于第二个“errr”，我尝试了这些行：

```
$.each(r.errr.vars,function(y,z)
                        {
                            form.find('[name="'+y+'['+z+']"'+']').closest('p').append(z);
                        }); 
```

它不起作用！

我发现这对我来说有点复杂。请任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:00:49.140

我建议您使用 ID 来定位特定的输入字段并交出错误消息。我建议不要在 id 属性中使用 [] ，而是这样做：

HTML：

```
<form>
    <p>
      <label for="field_userAddress">Adresse (*)</label>
      <input type="text" name="userAddress" id="field_userAddress"  />
    </p>
    <p>
      <label for="field_userCP">CP (*)</label>
      <input type="text" name="userCP" id="field_userCP"  />
    </p>
    <p>
      <label for="field_vars_1">vars one (*)</label>
      <input type="text" name="vars[1]" id="field_vars_1"  />
    </p>
    <p>
      <label for="field_vars_2">Vars two (*)</label>
      <input type="text" name="vars[2]" id="field_vars_2"  />
    </p>
</form>​ 
```

JavaScript：

```
$.each(r.errr.vars,function(y,z) {
    form.find('input#field_vars_'+y).parent().append('<span>'+z+'</span>');
}); 
```

工作得很好。// [http://jsfiddle.net/bbSw9/](http://jsfiddle.net/bbSw9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:42:02.540

您需要`[]`根据 jQuery 选择器转义规则转义属于名称的一部分。

这应该有效：

```
$.each(r.errr.vars,function(y,z) {
        form.find('input[name="vars\\['+y+'\\]"]').closest('p').append(z);
}); 
```

API 文档[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

阅读有关转义的顶部段落

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:26:00.863

我认为您缺少 json 的部分要点。如果您想要各种必填字段，则应该只使用一个名为 required 的 json 数组。

```
{
   "err": {
     "required": ["userAddress", "userCP"]
   },

   "errr": {
     "vars": {
       "required": ["1", "2"];
     },
   }
} 
```

如果你想解析这个

$.each(r.err, function(k,v) { $('form[name='+ v +']').closest('p').append(k); });

# c# - 从字符串中删除字母字符和空格

> ID：13433870
> 
> 赞同：9
> 
> 时间：2012-11-17T19:12:21.090
> 
> 标签：c#, .net

我有一个包含许多字符的字符串。我想删除 A-Za-z 和空格，剩下的就剩下了。最好的方法是什么？

这是我尝试过的

```
presaleEstimateHigh = Regex.Replace(presaleEstimateHigh, @"[A-Za-z]", string.Empty); 
```

但我还需要删除空格。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T19:19:18.270

你可以使用\s。

例如：

```
presaleEstimateHigh = Regex.Replace(presaleEstimateHigh, @"[A-Za-z\s]", string.Empty); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T19:18:34.107

您的正则表达式很好，除了空格。这应该有效：

```
string result = Regex.Replace(myString, @"[a-zA-Z\s]+", string.Empty); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T19:21:49.077

没有正则表达式：

```
var chars = str.Where(c => !char.IsLetter(c) && !char.IsWhitespace(c)).ToArray();
var rest = new string(chars); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-17T19:19:32.167

您可以使用`\s`包含空格。

```
Regex.Replace(myString, @"[a-z]|[A-Z]|\s", "") 
```

演示：http: [//ideone.com/yHG2xw](http://ideone.com/yHG2xw)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-17T19:29:24.643

你几乎成功了。使用这个正则表达式

```
[a-zA-Z ]+ 
```

它只包含空格。添加 a`+`可以提高效率，因为可以一次（内部）替换整个系列的字符。

# bash - 确保破坏bash中的进程？（可能捕捉到 SIGINT）

> ID：13433871
> 
> 赞同：1
> 
> 时间：2012-11-17T19:12:38.360
> 
> 标签：bash, sigint

我正在尝试设置一个 IO 脚本以允许两个 FIFO 之间的输入/输出通信（一个 FIFO 用于输入，另一个用于输出）。

在我输入输入时，我的服务器必须接收输出。两者`Internals/servout`都是`Internals/servin`FIFO。我目前通过`tail`在等待输入时在后台运行来实现这一点。

这是我当前的代码：

```
#!/bin/bash
# io.sh

tail -f -n 0 Internals/servout &
tpid=$!

read -p ">> " v
while [ $? -eq 0 ] && [ "$v" != "exit" ] && [ "$v" != "quit" ]; do
        echo $v > Internals/servin
        sleep .2
        read -p ">> " v
done

kill $tpid 
```

我遇到的主要问题是当我不小心键入 Ctrl-C 来结束我的脚本时。发生这种情况时，`tail -f -n 0 Internals/servout &`代码将继续在后台运行。正如您可能想象的那样，这是不可取的。

有没有办法确保`tail`命令被杀死，即使发送了 SIGINT 或类似的信号？`finally`我正在考虑一些可以与Python 中的关键字具有相同目的的东西，或者`tail`通过使用`$$`.

随意评论我的不良做法 -`bash`是我较新的语言之一，建设性的批评是改进的最快方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:05:28.723

你可以尝试这样的事情：

```
#!/bin/bash
# io.sh

cleanup() {
    [[ -n $tpid ]] && kill $tpid
}

trap 'cleanup' SIGHUP SIGINT SIGTERM EXIT

tail -f -n 0 Internals/servout &
tpid=$!

quitflag=0
while ((!quitflag)) && read -p ">> " v; do
    case $v in
        exit | quit)
            quitflag=1
            ;;
        help | '?')
            echo "Sorry, I can't help you."
            ;;
    esac
    echo "$v" > Internals/servin
done 
```

# java - 样式（已回答递归和越界异常，这是新的）

> ID：13433872
> 
> 赞同：0
> 
> 时间：2012-11-17T19:12:54.933
> 
> 标签：java, recursion, anagram

我正在尝试编写一个包含两个单词或短语的程序，并通过查看它们的 unicode 值是否匹配来测试它们是否是字谜。只有当它们的长度相同时，“搜索”方法才会运行。我遇到了问题，但现在已经解决了。

这是修改后的版本：

我想知道您对代码布局方式的看法。清楚吗？我应该采取不同的做法吗？或者你觉得它很容易阅读？你对我如何让别人更清楚有什么建议吗？

如果我添加评论，它们应该简短还是我应该在多行评论中解释该部分是如何工作的？

我想让它看起来尽可能直截了当，对此我几乎没有得到真正的建议。所以如果有人有任何想法。

```
import java.util.Scanner;

public class AnagramCount {

   public static void main(String[] args) {
   System.out.println("Please enter two words, one per line, to test if it is an anagram");
   Scanner userInput = new Scanner(System.in);
   String word1 = userInput.nextLine();
   String word2 = userInput.nextLine();
   int count = 0;
   int[] char_code = new int[word1.length()];
   int[] char_code2 = new int[word2.length()];
   char[] temp = word2.toCharArray();
   boolean match = true;

   if (word1.length() == word2.length()){
      search(word1, word2, count, char_code, char_code2, match, temp);
      if (match == true){
         if (char_code[word1.length()-1] == 0){
            match = false;
         }
      else {
      // if match remains true after this final check, information about it will print
         System.out.print("word1 unicode values: ");
         for(int i = 0; i < word1.length(); i++){
            System.out.print(char_code[i] + " ");
         }
         System.out.println();
         System.out.print("word2 unicode values: ");
         for(int i = 0; i < word1.length(); i++){
            System.out.print(char_code2[i] + " ");
         }
      }
   }
}
   else {
      match = false;
   }
   System.out.println("\n" + "Anagram? t/f?: " + match);
}

public static void search(String word1, String word2, int count, int[] char_code, int[]   char_code2, boolean match, char[] temp)
{
   StringBuilder word1check = new StringBuilder(word1);
   StringBuilder word2check = new StringBuilder(word2);
   int word1_unicode = 0;
   int word2_unicode = 0;

   if(count >= word1.length()) 
      return;

   else
   {      
      for(int i = 0; i < word2.length(); i++){         
         if (word1.charAt(count) == word2.charAt(i)){

         word1_unicode = word1check.codePointAt(count);
         char_code[count] = word1_unicode;  

         temp[i] = 0;
         String str = new String(temp);
         word2 = str;

         word2_unicode = word2check.codePointAt(i);
         char_code2[count] = word2_unicode; 

   if(count==word1.length()-1)
     break;

  search(word1, word2, ++count, char_code, char_code2, match, temp);

     }
  }   

}
  return;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:14:10.623

您的问题发生在您使用的递归中，而不是您认为的地方。在调用“搜索”方法之前，增加计数变量。

```
search(word1, word2, ++count, char_code, char_code2, match); 
```

解决此问题的最简单方法是在调用自身内部的方法之前添加一个检查

```
if(count==word1.length()-1)
    break;
search(word1, word2, ++count, char_code, char_code2, match); 
```

这样，如果 count 已经到达单词的末尾，您将不会调用 search 方法，并且它永远不会通过超出范围来破坏它。

我在测试期间发现的另一个问题是here

```
for(int i = 0; i < word1.length()-1; i++) 
```

这样，您在搜索时将永远不会到达第二个单词的末尾，如果您的第二个单词以在单词中仅使用一次的字符结尾，它将永远不会进入此处

```
if (word1.charAt(count) == word2.charAt(i)){
// I think the problem is right around here, but I don't know what to change 

    word1_unicode = word1check.codePointAt(count);
    char_code[count] = word1_unicode; 

    if(char_code2[count] == 0) { //prevents double counting of letters
        word2_unicode = word2check.codePointAt(i);
        char_code2[count] = word2_unicode;
        search(word1, word2, ++count, char_code, char_code2, match);
    } 

    if((count==0)&&(i == word1.length()-1)){
        match = false;
    }
} 
```

为了解决这个问题，我只是删除了“for”循环中的“-1”。

这个方法的最后一个奇怪的问题是它实际上返回了一个你在程序开始时预定义的布尔类型，它实际上从未达到得到假的点。在这一点上，我发现你的双重计数预防也不起作用。基本上大约有一半的台词并没有真正做些什么。

希望我通过解决我在程序中发现的问题来帮助你。此时，如果第一个单词中的所有字母都可以在第二个单词中找到，它会说 2 words are anagrams。我能想到的防止重复计算单词的最简单方法是简单地覆盖这个位置的字母。

这是实际上与我的防止重复计算字母的想法相匹配的代码：

```
import java.util.Scanner;

public class test {

public static void main(String[] args) {

System.out.println("Please enter two words, one per line, to test if it is an anagram");
Scanner userInput = new Scanner(System.in);
String word1 = userInput.nextLine();
String word2 = userInput.nextLine();
int count = 0;
boolean match = true;

    if (word1.length() == word2.length()){
        match = search(word1, word2, count,match);
    }
    else {
        match = false;
    }

    if(match)
        System.out.println("The words are anagrams");
    else
        System.out.println("The words are not anagrams");
}

    public static boolean search(String word1, String word2, int count,boolean match)
    {

        if(count >= word1.length()-1) 
            return match;

        else
        {
            for(int i = 0; i < word1.length(); i++)
            { 

                if (word1.charAt(count) == word2.charAt(i)){
                    char[] temp = word2.toCharArray();
                    temp[i] = 0;
                    word2 = temp.toString();
                    search(word1, word2, ++count, match);
                } 
                else
                    match = false;
            }
        }
        return match;

    }
} 
```

# eclipse - 无法安装eclipse adt插件

> ID：13433873
> 
> 赞同：3
> 
> 时间：2012-11-17T19:12:57.053
> 
> 标签：eclipse, eclipse-plugin, adt

在过去的两天里，我正在尝试这个，但似乎没有找到正确的解决方案方向。我一直在尝试为 eclipse Juno 安装 ADT 插件，但在这样做的同时，虽然帮助中的安装新软件选项并提供了 url，但它开始计算下载中的依赖关系更长的时间，但没有完成计算。以前，当我尝试下载任何 eclipse 包时，它给了我一个奇怪的下载软件包的剩余时间（2 小时、4 小时、1 天等）。我不知道这是eclipse服务器的问题还是其他一些技术问题。请注意，这不是我第一次使用 eclipse，所以我一直在尝试使用与以前相同的方法。我也尝试在朋友的 PC 和不同的网络上进行此操作，但存在同样的问题。请相应地指导我的人。我很感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:22:14.567

您可能想尝试在[http://developer.android.com/sdk/index.html下载新的 Android SDK](http://developer.android.com/sdk/index.html)

正如我在[博客上的一篇文章中解释的那样：](http://www.luisdelarosa.com/2012/11/16/official-android-sdk/)

> 它基本上是 Eclipse 3.8 + Android Developer Tools (ADT) 21，预安装在一个可下载的包中。以前，Android 程序员必须经过多个步骤才能找到 ADT 更新站点、接受许可证等。这应该可以节省新安装的时间。

# android - SpinnerAdapter 中 getView 和 getDropDownView 的区别

> ID：13433874
> 
> 赞同：67
> 
> 时间：2012-11-17T19:13:00.560
> 
> 标签：android, android-arrayadapter, android-spinner, baseadapter

当您实现 SpinnerAdapter 时，您会得到[getDropDownView](http://developer.android.com/reference/android/widget/SpinnerAdapter.html#getDropDownView%28int,%20android.view.View,%20android.view.ViewGroup%29)，它与`getView`您在需要扩展时所拥有的有什么不同`BaseAdapter`。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-17T19:13:00.560

如果我们看下面的代码，我们在 getView 和 getDropDownView 中有 name 和 value 数组。

```
private void initView() {
    SpinnerDropDownAdapter sddadapter = new SpinnerDropDownAdapter(this);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, sddadapter.name);

    Spinner getViewSP = (Spinner) findViewById(R.id.getview_sp);
    getViewSP.setAdapter(adapter);

    Spinner getViewWDropDownSP = (Spinner) findViewById(R.id.getview_w_drop_down_sp);
    getViewWDropDownSP.setAdapter(sddadapter);
}

static class SpinnerDropDownAdapter extends BaseAdapter implements
        SpinnerAdapter {
    Context context;

    SpinnerDropDownAdapter(Context ctx) {
        context = ctx;
    }

    String[] name = { " One", " Two", " Three", " Four", " Five", " Six",
            " Seven", " Eight" };
    String[] value = { " 1", " 2", " 3", " 4", " 5", " 6", " 7", " 8" };

    @Override
    public int getCount() {
        return name.length;
    }

    @Override
    public String getItem(int pos) {
        // TODO Auto-generated method stub
        return name[pos];
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView text = new TextView(context);
        text.setTextColor(Color.BLACK);
        text.setText(name[position]);
        return text;
    }

    @Override
    public View getDropDownView(int position, View convertView,
            ViewGroup parent) {
        TextView text = new TextView(context);
        text.setTextColor(Color.BLACK);
        text.setText(value[position]);
        return text;
    }
} 
```

如果没有实现getDropDownView方法，下拉框会从getView中获取视图。因此，它只会显示名称。

![获取视图](../Images/ff22fe0064754a9c3ca88edc55e13c89.png)

当 getView 和 getDropDownView 都实现时，前者获取*name*后者获取*value*，静止的 spinner 将从 getview 获取*name*，下拉弹出将获取*value*。 ![getView 和 getDropDownView](../Images/c874cdecb401798a4621872c5b0f0b16.png)

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-03-03T19:03:29.383

接受的答案似乎有点复杂，所以为简单起见

*   `getView`- 在用户按下微调器之前微调器上显示的值，其中每个值视图都可以使用 convertView 参数进行调整

*   `getDropDownView`- 用户按下微调器后可以选择的值列表，其中列表中的每个值都可以使用 convertView 参数进行调整

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-17T13:20:47.587

`getView`并且`getDropDownView`可以显示不同的布局。

我创建了一个 Spinner 并`class ImageTextAdapter extends ArrayAdapter<String>`用作适配器。我覆盖`getView`，以便它可以同时显示`ImageView`和`TextView`。但是，我不覆盖`getDropDownView`.

这是按下微调器之前的屏幕截图

[![在此处输入图像描述](../Images/7bd0c4c8cd52eef78656d3ef1e845a03.png)](https://i.stack.imgur.com/riW2p.png)

并在按下微调器后。

[![在此处输入图像描述](../Images/9122a6cf22e792606e4cfd080a6a6943.png)](https://i.stack.imgur.com/YZqwP.png)

我使用以下代码初始化微调器。

```
String[] spinnerTexts = {"Tanzania", "Thailand"};
int[] spinnerImages = {R.drawable.tanzania, R.drawable.thailand};

ArrayAdapter<String> adapter = new ImageTextAdapter(this, spinnerTexts, spinnerImages);

Spinner spinner = (Spinner) findViewById(R.id.spinner);
spinner.setAdapter(adapter); 
```

这是 ImageTextAdapter.java

```
public class ImageTextAdapter extends ArrayAdapter<String> {

    int[] images;

    public ImageTextAdapter(Context ctx, String[] texts, int[] images) {
        super(ctx, android.R.layout.simple_spinner_item, texts);
        this.images = images;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = getLayoutInflater().inflate(R.layout.row, parent, false);

        TextView textView = (TextView) row.findViewById(R.id.textView);
        textView.setText(getItem(position));

        ImageView imageView = (ImageView) row.findViewById(R.id.imageView);
        imageView.setImageResource(images[position]);

        return row;
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-03-02T09:32:31.077

我们可以这样使用 SpinnerAdapter：

```
public class FolderSpinnerAdpater extends BaseAdapter implements SpinnerAdapter {
@Override
public int getCount() {
    return 0;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    return null;
}
} 
```

在 BaseAdapter.java

```
public View getDropDownView(int position, View convertView, ViewGroup parent) {
    return getView(position, convertView, parent);
} 
```

覆盖`getView()`和`getDropDownView()`，返回不同的视图，你会发现不同。

[![在此处输入图像描述](../Images/d9c4631591fb09ff60256dc07253960e.png)](https://i.stack.imgur.com/1LWcG.png)

# .htaccess - 使用 htaccess 屏蔽 url 中的文件夹名称

> ID：13433876
> 
> 赞同：1
> 
> 时间：2012-11-17T19:13:05.627
> 
> 标签：.htaccess, mod-rewrite

我正在尝试让我的新版本网站上线。我已经设置并测试了 301 以将文件从 www.example.com/shop 定向到 www.example.com/test。我现在唯一需要做的就是让 url 只显示 www.example.com 而没有 /test。就链接结构而言，我真的不希望有这个额外的文件夹。

我觉得我已经接近了，但是已经在这几天了，似乎无法让它发挥作用！有人可以帮忙吗？

更新！

生成 SEO 友好 URL 的软件是否可能导致冲突？这可能是我无法在 URL 中实现 www.example.com 而不是 www.example.com/test 的原因吗？

编辑

配置文件有冲突，这就是我无法让代码工作的原因。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:57:07.567

如果要运行位于`test/`根目录子文件夹中的应用程序，请使用以下重写规则并将它们放在根文件夹中`.htaccess`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^test/
RewriteRule ^(.*)$ /test/$1 [L,QSA] 
```

然后请求：

```
http://www.example.com/yourscript.php
http://www.example.com/css/style.css
http://www.example.com/images/logo.png 
```

将显示来自（如果它们不存在于上述位置）的结果：

```
http://www.example.com/test/yourscript.php
http://www.example.com/test/css/style.css
http://www.example.com/test/images/logo.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:17:59.017

在 HTTACES 中

```
RewriteEngine On 
RewriteRule ^something\/?$ \/something\/else\/ 
```

# http - 等效的 HTTP 查询得到不同的响应

> ID：13433877
> 
> 赞同：0
> 
> 时间：2012-11-17T19:13:11.603
> 
> 标签：http, telnet, http-method, http-1.0

`GET http://d9.c4.b1.a0.top.list.ru/ HTTP/1.0\r\nHost: d9.c4.b1.a0.top.list.ru\r\n\r\n`

回复：

```
HTTP/1.0 400 Bad Request
Server: wz/1.5
Date: Sat, 17 Nov 2012 19:00:20 GMT
Cache-control: no-store, no-cache, must-revalidate
Pragma: no-cache
Content-Length: 0
Connection: close 
```

* * *

`GET / HTTP/1.0\r\nHost: d9.c4.b1.a0.top.list.ru\r\n\r\n`

回复：

```
HTTP/1.0 302 Moved Temporarily
Server: wz/1.5
Date: Sat, 17 Nov 2012 19:06:27 GMT
Location: http://top.mail.ru/
Cache-control: no-store, no-cache, must-revalidate
Pragma: no-cache
Content-Length: 0
Connection: close 
```

这些查询有什么区别？

PS 查询是使用`telnet`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:03:00.883

来自[*Request-URI*](http://www.w3.org/Protocols/HTTP/1.0/spec.html#Request-URI)[的HTTP 1.0 规范](http://www.w3.org/Protocols/HTTP/1.0/spec.html#Request-URI)*：*

 *> 仅当向代理发出请求时才允许使用*absoluteURI形式。*

因此，您发送此请求的服务器似乎不是代理，而可能是指定的服务器本身。

在发送到指定服务器的请求中，在请求行中使用绝对 URI 仅[在 HTTP 1.1 中有效](https://www.rfc-editor.org/rfc/rfc2616#section-5.1.2)：

> 为了允许在 HTTP 的未来版本中的所有请求中转换为*absoluteURI*，所有 HTTP/1.1 服务器必须在请求中接受*absoluteURI* 形式，即使 HTTP/1.1 客户端只会在对代理的请求中生成它们。*

# c# - 如何更改 WinRT ToggleSwitch 颜色？

> ID：13433882
> 
> 赞同：3
> 
> 时间：2012-11-17T19:13:37.033
> 
> 标签：c#, xaml, windows-runtime, toggleswitch

我正在用 C# 编写一个 Windows 8 WinRT 应用程序，并希望动态更改我的`ToggleSwitch`. 我将有这些实例的多个实例，它们不会都有相同的颜色。

我尝试创建一个继承自 的自定义控件`ToggleSwitch`，但我很快了解到我不能这样做，因为`ToggleSwitch`它是一个`sealed`类。我的目标是添加一个`DependencyProperty`type `Brush`，然后`TemplateBinding`在我的自定义控件的`Template`.

有没有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:53:57.730

您将能够在 Blend 中进行操作

> 右键单击 ToggleSwitch > 编辑模板 > 编辑副本

Blend 将在`<Page.Resource>`. 更改`Storyboard.TargetName="SwitchCurtain`属性将更改窗帘的颜色。

```
<VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SwitchCurtain">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Yellow"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerBorder">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchTrackPointerOverBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SwitchKnob">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Green"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SwitchKnob">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Blue"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T21:29:35.223

试试这个：

```
<Style x:Key="ToggleSwitchStyle" TargetType="ToggleSwitch">
        <Setter Property="Foreground" Value="{StaticResource ToggleSwitchForegroundThemeBrush}"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
        <Setter Property="ManipulationMode" Value="None"/>
        <Setter Property="MinWidth" Value="154"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleSwitch">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbPointerOverBorderThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbPressedForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="HeaderContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchHeaderDisabledForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="OffContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchDisabledForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="OnContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchDisabledForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="OuterBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchOuterBorderDisabledBorderThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbDisabledBorderThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ToggleStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition x:Name="DraggingToOnTransition" From="Dragging" GeneratedDuration="0" To="On">
                                        <Storyboard>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.KnobCurrentToOnOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchKnob"/>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.CurtainCurrentToOnOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchCurtain"/>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition x:Name="DraggingToOffTransition" From="Dragging" GeneratedDuration="0" To="Off">
                                        <Storyboard>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.KnobCurrentToOffOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchKnob"/>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.CurtainCurrentToOffOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchCurtain"/>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition x:Name="OnToOffTransition" From="On" GeneratedDuration="0" To="Off">
                                        <Storyboard>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.KnobOnToOffOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchKnob"/>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.CurtainOnToOffOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchCurtain"/>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition x:Name="OffToOnTransition" From="Off" GeneratedDuration="0" To="On">
                                        <Storyboard>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.KnobOffToOnOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchKnob"/>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.CurtainOffToOnOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchCurtain"/>
                                        </Storyboard>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Dragging"/>
                                <VisualState x:Name="Off">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="-44" Storyboard.TargetProperty="X" Storyboard.TargetName="CurtainTranslateTransform"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="On">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="X" Storyboard.TargetName="CurtainTranslateTransform"/>
                                        <DoubleAnimation Duration="0" To="38" Storyboard.TargetProperty="X" Storyboard.TargetName="KnobTranslateTransform"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ContentStates">
                                <VisualState x:Name="OffContent">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OffContentPresenter"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsHitTestVisible" Storyboard.TargetName="OffContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <x:Boolean>True</x:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="OnContent">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnContentPresenter"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsHitTestVisible" Storyboard.TargetName="OnContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <x:Boolean>True</x:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhite"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlack"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused"/>
                                <VisualState x:Name="PointerFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <ContentPresenter x:Name="HeaderContentPresenter" Grid.ColumnSpan="2" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Foreground="{StaticResource ToggleSwitchHeaderForegroundThemeBrush}" FontWeight="Semilight" Margin="6"/>
                            <Grid Margin="{TemplateBinding Padding}" Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="7"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <ContentPresenter x:Name="OffContentPresenter" ContentTemplate="{TemplateBinding OffContentTemplate}" Content="{TemplateBinding OffContent}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="False" Margin="6,5,0,16" MinWidth="65" Opacity="0" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                <ContentPresenter x:Name="OnContentPresenter" ContentTemplate="{TemplateBinding OnContentTemplate}" Content="{TemplateBinding OnContent}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="False" Margin="6,5,0,16" MinWidth="65" Opacity="0" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                <Grid Background="Transparent" Grid.Column="2">
                                    <Grid x:Name="SwitchKnobBounds" Height="16" Margin="13,5,13,16" Background="#FF164151">
                                        <Border x:Name="OuterBorder" BorderBrush="{StaticResource ToggleSwitchOuterBorderBorderThemeBrush}" BorderThickness="2" Background="#FF20C0FB">
                                            <Border x:Name="InnerBorder" BorderBrush="{StaticResource ToggleSwitchTrackBorderThemeBrush}" BorderThickness="1" Background="#FF0ABCFF">
                                                <ContentPresenter x:Name="SwitchCurtainBounds" Foreground="#FFFF0505">
                                                    <ContentPresenter x:Name="SwitchCurtainClip" Foreground="#FFFF0505">
                                                        <Rectangle x:Name="SwitchCurtain" Fill="#66EC0909" Width="44">
                                                            <Rectangle.RenderTransform>
                                                                <TranslateTransform x:Name="CurtainTranslateTransform" X="-44"/>
                                                            </Rectangle.RenderTransform>
                                                        </Rectangle>
                                                    </ContentPresenter>
                                                </ContentPresenter>
                                            </Border>
                                        </Border>
                                        <Rectangle x:Name="SwitchKnob" Fill="#FFFF1515" HorizontalAlignment="Left" Stroke="{StaticResource ToggleSwitchThumbBorderThemeBrush}" StrokeThickness="0" Width="12">
                                            <Rectangle.RenderTransform>
                                                <TranslateTransform x:Name="KnobTranslateTransform"/>
                                            </Rectangle.RenderTransform>
                                        </Rectangle>
                                        <Rectangle x:Name="FocusVisualWhite" Margin="-3" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1" Fill="#FF269ECD"/>
                                        <Rectangle x:Name="FocusVisualBlack" Margin="-3" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1" Fill="#FF0A739B"/>
                                    </Grid>
                                    <Thumb x:Name="SwitchThumb" Foreground="White" Background="{StaticResource TextLightGrey}">
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Rectangle Fill="Transparent"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Grid>
                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-26T10:59:47.537

对于它的价值，我最近在寻找同样的东西并找到了这个 MS 链接。只需将颜色更改为您不需要样式的颜色，除非您真的必须降到那么低。

[http://msdn.microsoft.com/en-us/library/windows/apps/jj709931.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj709931.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T19:26:35.697

你有没有尝试过这样的事情是不是不起作用

```
toggleSwitch.toggle.SwitchForeground = new SolidColorBrush(Colors.Green) 
```

阅读有关您的问题的更多信息，您可以完全切换，但您必须为切换创建多种样式并应用您想要的样式

```
toggleSwitch.Style = this.FindResource("toggleSwitchsTYLE") as Style; 
```

[http://www.windowsphonegeek.com/articles/wp7-toggleswitch-in-depth--key-concepts-and-api](http://www.windowsphonegeek.com/articles/wp7-toggleswitch-in-depth--key-concepts-and-api)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T08:04:57.287

我决定在自定义样式中重新使用 Background 属性，其中分配给 Background 属性的值将模板绑定到 SwitchCurtain 的 Fill。由于无论如何我都不会使用 Background 属性的实际用途，因此这似乎是理想的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-24T08:54:35.960

```
 <ResourceDictionary.ThemeDictionaries>
            <ResourceDictionary x:Key="Default">
                       <SolidColorBrush x:Key="ToggleSwitchFillOn" Color="Red"/>
            </ResourceDictionary>
        </ResourceDictionary.ThemeDictionaries> 
```

将上面的代码添加到您的 App.xaml

# jquery - 骨干网.js路由器在PhoneGap iOS构建中失败

> ID：13433884
> 
> 赞同：3
> 
> 时间：2012-11-17T19:13:59.487
> 
> 标签：jquery, ios, xcode, cordova, backbone.js

一旦我尝试在本地计算机上创建 PhoneGap 2.2.0 构建以及 PhoneGap Build 云服务，我的主干.js 路由器似乎失败了。

这意味着尽管显然触发了触摸事件，但应用程序上的任何内部链接和导航都不起作用。

到目前为止，我的应用程序通过 Chrome 和 iOS 模拟器在本地运行良好。我可以找到很多关于 jQuery Mobile 以及与主干.js 路由器的冲突，但我使用的是 jQuery 1.8.2（我还使用早期版本 1.7.0 到 1.8.2 进行了测试）。

在 Xcode 控制台中，单击内部链接时出现错误“无法加载网页并出现错误：帧加载中断”。我对应用程序中的内部链接使用“/#link”格式。

我猜这可能是我设置的香草 PhoneGap Xcode 项目中的某种 iOS/Xcode 安全功能？但是我可以更改任何设置以允许这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:52:26.160

将此路由器与 Backbone 和 JQM 一起使用可能会取得更大的成功，因为它使用 JQM 事件而不是监视变化。

[https://github.com/azicchetti/jquerymobile-router](https://github.com/azicchetti/jquerymobile-router)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:00:56.670

好的，我最好回答我自己的问题，因为经过相当多的尝试后，我确实找到了解决方法。我现在会尝试快速回答，但希望稍后回来并改进它。基本上，而不是使用嵌入在标记中的标准链接，例如

```
<a id="myLink" href="/#link">my link</a> 
```

您需要将功能绑定到链接并使用 Backbone.js 路由器，如下所示：

```
$('#myLink').tappable(function(event){
    event.preventDefault();

    var url = $(this).attr('href');
    application.router.navigate(url, true);

    return false;
}); 
```

就我而言，我已经在使用 jquery.tappable.js [http://aanandprasad.com/articles/jquery-tappable/](http://aanandprasad.com/articles/jquery-tappable/)来提高我的 UI 的响应能力。

我还发现这样做的另一个好处是，如果您的单页网络应用程序托管在另一个站点的子文件夹中。通过强制您的应用程序使用 Backbone.js 路由器，您不会遇到破坏内部链接的相对路径的任何问题。

我认为我在测试过程中没有遇到任何问题并且只有一次符合 Phonegap 的原因是因为我真的是在 Safari 移动设备上进行测试（通过主屏幕上的书签）。一旦遵守，它就在网络视图中。本地 iOS 开发人员可能能够解释这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T12:38:09.713

朋友。我尝试了另一种方式，它有效。只需删除飞溅我的链接

# oracle - 更新中的自引用列

> ID：13433891
> 
> 赞同：1
> 
> 时间：2012-11-17T19:14:59.930
> 
> 标签：oracle, triggers

我想在客户下订单时修改带有文章的表格中的信息，我的意思是，当在表格 PEDIDO_ARTICULO 中插入一行时，应该减少剩余产品数量的信息。我想在一个带有表 ARTICULOS 更新语句的触发器中，它看起来像这样：

```
--Actualizamos las unidades disponibles del articulo
UPDATE ARTICULO A
SET A.UnidadesDisp = A.UnidadesDisp - v_unidades_pedidas + v_unidades_devueltas
WHERE A.Color= :NEW.Color AND A.Talla=:NEW.Talla AND A.CodigoP=:NEW.CodigoP; 
```

是否可以像这样自我引用 UnidadesDisp？

# java - 查看文件是否已使用 GWT 修改

> ID：13433893
> 
> 赞同：2
> 
> 时间：2012-11-17T19:15:04.177
> 
> 标签：java, gwt, if-modified-since

我想知道自从使用 GWT 一段时间以来图像是否已被修改。我发现设置 If-Modified-Since http 标头可能会起作用，所以我尝试像[在这篇文章中](https://stackoverflow.com/questions/6188282/setting-custom-http-header-for-gwt-forms)那样做：

```
RequestBuilder rb = new RequestBuilder(RequestBuilder.POST, "http://www.site.com/pic1.jpg");
rb.setHeader("If-Modified-Since", "Sat, 17 Nov 2012 16:17:00 GMT");
Request r = rb.sendRequest(null, new RequestCallback() {
    public void onResponseReceived(Request request, Response response){
         int i = response.getStatusCode();
         ...
    }

    public void onError(Request request, Throwable exception){
        ...
    }

}); 
```

问题是我得到一个等于 0 的状态码。你能告诉我我做错了什么吗？这是了解服务器上的文件是否已被修改的好方法，还是有其他使用 GWT 的方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:32:29.503

正如您在评论中所写的，这可能是由于 SOP 造成的。您可以[创建 php 函数](https://stackoverflow.com/a/845234/1756072)，然后从 GWT 调用此函数。

# keyboard - 与语言无关的键盘：用英语培养中性文本 -kbd 没有变音符号之类的东西？

> ID：13433895
> 
> 赞同：1
> 
> 时间：2012-11-17T19:15:33.360
> 
> 标签：keyboard, linguistics, semantic-analysis, dvorak, os-agnostic

我喜欢在编程时使用美国德沃夏克国际键盘——每本手册、每份文档，也可以使用它进行编程。我把我的老师逼疯了，因为他们时不时地要求我用不同的语言写东西，比如德语、芬兰语、瑞典语或挪威语。我的成绩往往会愚蠢地下降，因为我懒得换键盘，错过了变音符号等奇怪的东西。我发现键盘切换速度很慢，而且我现在的 Drovakist 效率比 Qwertyist 高很多倍。

这个谜题需要一些语言理解来确定文本。是否存在类似第（3）点或以下oneliner的任何程序？

> $ culturifyIt inputMe > outputYouIwillDetectAutomaticallyYourInputOutputLanguages

**例子**

> “我是亨利。” >> 'Ich heiße Henry。（发芽）
> 
> “为 ett mojligt markkrig 重做 Tusentals solarter stor。” >> 'Tusentals soldater står redo för ett möjligt markkrig.' （瑞典化）
> 
> “约克。” >> 'Yöäk.' （修饰）

**培养方法**

> 1.  键盘切换，慢。
>     
>     
> 2.  特殊字符的特定组合键，例如变音 o、u 或 - 非常依赖于平台的解决方案，很容易出错。
>     
>     
> 3.  ...任何更自动化的方法可以检测语言然后对文本进行文化化？

# c# - 为什么辅助磁贴的标识符无效？

> ID：13433896
> 
> 赞同：2
> 
> 时间：2012-11-17T19:15:34.710
> 
> 标签：c#, windows-8, live-tile

我正在尝试使用 XML 直接更新 Windows 8 辅助磁贴。但是，我不断收到一个异常，即我固定的磁贴的标识符无效。我什至尝试直接从 Windows 中提取标识符，然后将其替换回`CreateTileUpdaterForSecondaryTile`，但我仍然遇到相同的异常。这是我的代码：

```
public async static void UpdateSecondarySectionTile()
{
    string tileXmlString = "<tile id='SecondaryTile-7-0'>"
                         + "<visual>"
                         + "<binding template='TileWideImage'>"
                         + "<image id='1' src='" + imageSource + "' alt='alt text'/>"
                         + "</binding>"
                         + "</visual>"
                         + "</tile>";

    // create a DOM
    Windows.Data.Xml.Dom.XmlDocument tileDOM = new Windows.Data.Xml.Dom.XmlDocument();
    tileDOM.LoadXml(tileXmlString);

    System.Collections.Generic.IReadOnlyList<Windows.UI.StartScreen.SecondaryTile> tileList = await Windows.UI.StartScreen.SecondaryTile.FindAllAsync();

    foreach (var tile in tileList)
    {
        string tileId = tile.TileId;
        Windows.UI.Notifications.TileNotification tileUpdate = new Windows.UI.Notifications.TileNotification(tileDOM);
        try
        {
            Windows.UI.Notifications.TileUpdateManager.CreateTileUpdaterForSecondaryTile(tileId).Update(tileUpdate);
        }
        catch (Exception e)
        {
            System.Diagnostics.Debug.WriteLine("message: " + e.Message + ", inner exception: " + e.InnerException + " string: " + e.ToString());
        }
    }
} 
```

调试行正在输出：

```
//message: The application identifier provided is invalid.
, inner exception:  string: System.Exception: The application identifier provided is invalid. 
```

知道问题是什么吗？foreach 循环只执行一次，因为我的构建中只有一个固定的辅助磁贴。（我也意识到`UpdateSecondarySectionTile`应该将 tileId 作为参数，每次调用只更新一个图块；这只是调试代码。）

我发现它抱怨**应用程序**标识符而不是**磁贴**标识符很有趣。另外，我知道如果您[在模拟器中](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/90f558c3-e9bf-47ce-a066-43f1bfcdee20)运行磁贴更新有时无法正常工作，但即使在我的本地计算机上我也遇到了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T04:54:31.530

`CreateTileUpdaterForSecondaryTile`如果辅助磁贴最初是在模拟器中固定的，则问题中引用的异常（“提供的应用程序标识符无效”）可以由模拟器外部的方法引发。要解决此问题，请取消固定辅助磁贴并将其重新固定在模拟器之外。

正如问题作者所指出的，模拟器不支持磁贴更新 API（以及其他与推送通知相关的 API）。在这种情况下，辅助瓷砖固定不会在模拟器之外持续存在。

# jquery - 从 var 加载 Fancybox 动态图像

> ID：13433897
> 
> 赞同：1
> 
> 时间：2012-11-17T19:15:42.050
> 
> 标签：jquery, fancybox

我正在使用此代码从 a href 中获取类值：

```
<a href="" class="images/success.jpg">Click to get image</a>

<script>
$("#myMenu a").bind("click", function() {
  var myPic = $(this).attr("class");
  alert(myPic);
});
</script> 
```

一切正常且顺利。现在我正在使用 fancybox 来加载图像，并且我有这个可以正常工作的花式框代码：

```
$.fancybox.open('images/success.jpg'); 
```

我正在尝试将变量 myPic 传递给 fancybox 代码，但我做不到。

到目前为止，我已经尝试过：

```
$.fancybox.open(myPic);
$.fancybox.open('myPic'); 
```

有没有可能让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:05:37.663

总是有更简单或更复杂的方法来实现相同的结果。拥有 a`class="images/success.jpg"`在语义上不合适。最简单的方法是将其包含在`href`属性中，例如：

```
<a class="fancybox" href="images/success.jpg">Click to get image</a> 
```

...并使用`class`来绑定fancybox

```
$(".fancybox").fancybox(); 
```

...这也将确保您的链接可以访问，无论是否启用了 javascript（并且对 SEO 也更友好。）

但是，您可能有自己的理由（我希望）通过变量**或**不同的属性（`class`在您的示例中）传递 ref。为了使您的代码更整洁，您可能更喜欢使用 (HTML5)`data-*`属性，例如：

```
<a href="#nogo" data-path="images/success.jpg">Click to get image</a> 
```

...并在`data-path`不需要设置变量并将其传递给fancybox的情况下获取属性的值，例如：

```
$("#menu a").on("click", function() {
    $.fancybox.open($(this).data("path"));
});​ 
```

**注意**`.on()`需要 jQuery 1.7+的 jQuery 方法的使用

有关两个工作示例，请参**[见此 FIDDLE](http://jsfiddle.net/yxrqC/)**

# mysql - MySQL - 从列重复的表中删除行

> ID：13433898
> 
> 赞同：3
> 
> 时间：2012-11-17T19:15:42.337
> 
> 标签：mysql, sql, duplicates

> **可能重复：**
> [如何从 mysql 中的表中删除重复的行](https://stackoverflow.com/questions/3271396/how-to-delete-duplicate-rows-from-a-table-in-mysql)

我有一个简单的要求，这正在成为一场噩梦。

我有一个表 'MyTableA' 有两列 ID(int) 和 Value(varchar(100))

该表有一些值，如下所示：

```
ID|值
1|苹果
2|苹果
3|苹果

```

无论 Value 是重复的，我都想保留第一个 ID 行并删除其余的行。所以在上面的例子中，我想删除 ID 为 2 和 3 的行。

我认为这很简单，但这可能是因为我正在使用带有子句的 SQL。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T19:23:11.507

尝试...

```
DELETE t FROM `dbtable` t
  JOIN `dbtable` t2 ON t.`Value` = t2.`Value`
WHERE t.`ID` > t2.`ID` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:46:13.847

您可以通过使用子查询加入表来删除它（*子查询获取每个值的最小 ID*）

```
DELETE a FROM tableName a
        LEFT JOIN
        (
          SELECT Value, MIN(ID) minID
          FROM tableName
          GROUP BY Value
        ) b ON a.ID = b.minID
WHERE  b.minID IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/73483/1)

# file-io - 使用 -f 标志选择输入文件

> ID：13433899
> 
> 赞同：1
> 
> 时间：2012-11-17T19:15:46.830
> 
> 标签：file-io

如何在 ./a.out 命令中使用“-f”标志来选择 C++ 中的输入文件？例如，如果输入文件是“inputfile.txt”，则以下命令行应选择该文件作为输入文件：./a.out -f inputfile.txt

有谁知道以这种方式选择输入文件所涉及的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:50:39.383

如果您希望您的程序`a.out`使用该`-f`标志，您需要编写代码来处理它。有关更多信息，请参阅有关命令行参数[的](http://www.cprogramming.com/tutorial/lesson14.html)C++ 教程。

如果您希望您的程序从文件中获取输入，而不是`stdin`那么您可以简单地使用重定向运算符`<`，如下所示：

`./a.out < inputfile.txt`

# c# - C# 命名空间中的错误、预期的类和预期的文件结尾

> ID：13433900
> 
> 赞同：-1
> 
> 时间：2012-11-17T19:15:50.837
> 
> 标签：c#

我收到以下代码的 4 个错误，你能告诉我如何解决这个问题吗？

1- 命名空间不能直接包含成员，例如字段或方法 2- 预期的类、委托、枚举、接口或结构。3- 类型或命名空间定义，或预期的文件结尾

代码是：

```
License Seal;
    public void Mainform() {}

    public MainForm() {}       
    public enum auth{}
}

 {{

        Seal = new License(); 
        Seal.ID = "";
        Seal.Catch = true;
        Seal.Protection = License.Guard.FullScan;
        Seal.Initialize(); 
 }

       public MainForm.cs(); 
 }}
        auth();
        InitializeComponent();{

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:19:38.160

这是因为您所有的“工作”代码都必须在一个方法内，所有方法都必须在一个类内，并且一个类必须位于命名空间（或其他类）内。

# json - JSON、CURL 和谷歌的地理位置

> ID：13433901
> 
> 赞同：4
> 
> 时间：2012-11-17T19:15:55.360
> 
> 标签：json, curl, google-api

我正在尝试使用 Google 的地理定位“浏览器定位”服务。到目前为止，我认为当我尝试类似的东西时

```
https://maps.googleapis.com/maps/api/browserlocation/json?browser=firefox&sensor=true&
wifi=mac:00-14-bf-28-80-69|ssid:10160|ss:-26&
wifi=mac:00-26-50-38-ca-11|ssid:2WIRE084|ss:-69&
wifi=mac:34-ef-44-7c-0e-b1|ssid:2WIRE202|ss:-70&
wifi=mac:00-1f-b3-64-b3-f1|ssid:2WIRE605|ss:-74&
wifi=mac:00-26-50-e3-1f-81|ssid:2WIRE137|ss:-79&
wifi=mac:00-1d-5a-ef-4d-b9|ssid:2WIRE495|ss:-81&
wifi=mac:c0-83-0a-69-c4-b9|ssid:2WIRE431|ss:-81&
wifi=mac:30-46-9a-43-3d-71|ssid:MacAdamN|ss:-84&
wifi=mac:64-0f-28-bf-e2-91|ssid:2WIRE552|ss:-86&
wifi=mac:00-14-d1-cd-a4-88|ssid:TRENDnet637|ss:-86&
wifi=mac:00-23-5e-b0-70-90|ssid:AppleWiFi|ss:-86&
wifi=mac:00-23-5e-af-39-a0|ssid:AppleWiFi|ss:-86&
wifi=mac:00-1d-d1-55-0d-90|ssid:HOME-0D92|ss:-88 
```

在浏览器中我得到了相当准确的结果，你自己检查一下。但是当我想使用 JSON 文件来传递数据时，像 curl 一样

```
curl -i -X POST -d @ssids.json "https://maps.googleapis.com/maps/api/browserlocation/json?browser=firefox&sensor=true" 
```

我得到了可怕的准确性（“准确性”：18000.0，）。文件 ssids.json 的内容如下所示：

```
{
"wifi_access_points": [
    {
        "macAddress": "00-14-bf-28-80-69",
        "signalStrength": "-26"
    },
    {
        "macAddress": "00-26-50-38-ca-11",
        "signalStrength": "-69"
    },
    {
        "macAddress": "00-26-50-38-ca-11",
        "signalStrength": "-69"
    },
    {
        "macAddress": "34-ef-44-7c-0e-b1",
        "signalStrength": "-70"
    },
    {
        "macAddress": "00-1f-b3-64-b3-f1",
        "signalStrength": "-74"
    },
    {
        "macAddress": "00-26-50-e3-1f-81",
        "signalStrength": "-79"
    },
    {
        "macAddress": "00-1d-5a-ef-4d-b9",
        "signalStrength": "-81"
    },
    {
        "macAddress": "c0-83-0a-69-c4-b9",
        "signalStrength": "-81"
    },
    {
        "macAddress": "30-46-9a-43-3d-71",
        "signalStrength": "-84"
    },
    {
        "macAddress": "64-0f-28-bf-e2-91",
        "signalStrength": "-86"
    },
    {
        "macAddress": "00-14-d1-cd-a4-88",
        "signalStrength": "-86"
    },
    {
        "macAddress": "00-23-5e-b0-70-90",
        "signalStrength": "-86"
    },
    {
        "macAddress": "00-23-5e-af-39-a0",
        "signalStrength": "-86"
    },
    {
        "macAddress": "00-1d-d1-55-0d-90",
        "signalStrength": "-88"
    }
]
} 
```

不知何故，我知道文件的内容没有正确传输，但我知道为什么......

非常感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T23:53:12.217

您的 macAddress 格式需要是

> 00:14:BF:28:80:69

而不是这个

> 00-14-bf-28-80-69

另外，我认为您需要添加“年龄”：xx

# c++ - GLSL 着色器纹理 alpha 飞溅

> ID：13433902
> 
> 赞同：6
> 
> 时间：2012-11-17T19:16:04.093
> 
> 标签：c++, opengl, glsl, shader

我正在尝试使用着色器来加载地形上的四个纹理细节图块，方法是根据第五个图像合并它们，其中 r、g、b 和 a 组件用于确定每个纹理的多少应该混合在一起。混合效果很好，但是当我尝试添加我的“mixmap”图像时，它失败了，因为我猜是纹理坐标的问题。

首先，这里是着色器：
顶点着色器

```
void main() {
    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = ftransform();
} 
```

片段着色器

```
uniform sampler2D Texture0;
uniform sampler2D Texture1;
uniform sampler2D Texture2;
uniform sampler2D Texture3;
uniform sampler2D Mixmap;

varying vec3 pos;

void main()
{

    vec4 texel0 = texture2D(Texture0, gl_TexCoord[0].st).rgba;
    vec4 texel1 = texture2D(Texture1, gl_TexCoord[0].st).rgba;
    vec4 texel2 = texture2D(Texture2, gl_TexCoord[0].st).rgba;
    vec4 texel3 = texture2D(Texture3, gl_TexCoord[0].st).rgba;
    vec4 mixmapTexel = texture2D(Mixmap, gl_TexCoord[0].st).rgba;

    texel0 *= mixmapTexel.r;
    texel1 = mix(texel0,  texel1, mixmapTexel.g);
    texel2 = mix(texel1, texel2, mixmapTexel.b);
    gl_FragColor = mix(texel2, texel3, mixmapTexel.a);
} 
```

正如我所说，混合效果很好。问题来自这样一个事实，即从我的 mixmap 读取的值不是正确的。

这是关于我在做什么的更多解释。我正在构建一个分页地形系统，​​从高度图加载地形。然后我想使用我的 mixmap 图像用 rgba 组件表示每个纹理应该根据高度混合多少。

*   r 是水

*   g是沙子

*   b是草

*   a是岩石

所以我需要能够从我的着色器中获取正确的像素值来正确混合我的纹理。

![板条箱和文本之间的混合](../Images/ca7d711cfeb53b5a1ac752a940e78f78.png)

这是一个在 crate 和文本之间混合的示例，以便您可以清楚地看到纹理是如何应用的。

现在，如果我使用一个简单的混合图图像（半红半绿），它应该给我地形左侧的板条箱和右侧的文本，我得到 ![带有 argb alpha 飞溅](../Images/00487a61935bebe1a4d53b772ff578c6.png) ![示例 rgba 图像](../Images/ec3b46c2d73397ddcaf03ae0e2a47c80.png)

这是地形生成过程的一部分：它遍历顶点数组并创建地形三角形

```
void TerrainPage::generateDisplayList()
{
    // create one display list
    mDisplayListIndex = glGenLists(1);

    // compile the display list, store a triangle in it
    glNewList(mDisplayListIndex, GL_COMPILE);
    glFrontFace( GL_CW  ); //   Vertex are added clockwise. Used to calculate normals
    std::vector<Vertex>::iterator it;
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA,GL_ONE);
    texShader.enable();
    texShader.bindTexture(mTexture0, "Texture0", 0);
    texShader.bindTexture(mTexture1, "Texture1", 1);
    texShader.bindTexture(mTexture2, "Texture2", 2);
    texShader.bindTexture(mTexture3, "Texture3", 3);
    texShader.bindTexture(mMixmapTexture, "Mixmap", 4);
    Vertex v;
    int j=0;
    glEnable(GL_TEXTURE_2D);
    //mTexture.bind();
    glBegin(GL_TRIANGLE_STRIP);
    for(int i = 0; i<mVertices.size(); i++) {
        if(i%(2*mWidth) == 0) glEnd(); glBegin(GL_TRIANGLE_STRIP);
        v = mVertices[i];
        glTexCoord2f(v.texcoords[0], v.texcoords[1]);
        glVertex3f(v.position[0], v.position[1], v.position[2]);
    }
    glEnd();
    glDisable(GL_TEXTURE_2D);
    texShader.disable();
    glEndList();
} 
```

如果需要，我可以提供更多屏幕截图，以及我的一些代码。

作为所提供答案的后续，我尝试通过计算着色器中的 UV 来做到这一点。

首先，这是新的着色器

顶点着色器

```
varying vec4 VertexPosition;

void main() {

    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = ftransform();
    VertexPosition = gl_ModelViewMatrix * gl_Vertex;;
} 
```

片段着色器

```
uniform sampler2D Texture0;
uniform sampler2D Texture1;
uniform sampler2D Texture2;
uniform sampler2D Texture3;
uniform sampler2D Mixmap;

varying vec4 VertexPosition;
float side = 500.;

void main()
{

   vec4 texel0 = texture2D(Texture0, gl_TexCoord[0].st).rgba;
   vec4 texel1 = texture2D(Texture1, gl_TexCoord[0].st).rgba;
   vec4 texel2 = texture2D(Texture2, gl_TexCoord[0].st).rgba;
   vec4 texel3 = texture2D(Texture3, gl_TexCoord[0].st).rgba;
   vec4 mixmapTexel = texture2D(Mixmap, VertexPosition.xz/(2.*side)).rgba;

   texel0 *= mixmapTexel.r;
   texel1 = mix(texel0,  texel1, mixmapTexel.g);
   //texel2 = mix(texel1, texel2, mixmapTexel.b);
   //vec4 tx  = mix(texel2, texel3, mixmapTexel.a);
   //vec4 tx = mixmapTexel; //vec4(1, 1, 1, 1.);
    gl_FragColor = texel1;

    //if(test > 250\. )
    //    gl_FragColor = vec4(1.,1.,1.,1.);
} 
```

这是结果

![在此处输入图像描述](../Images/d00253df24060bbaa1e4d0b9f015751f.png)

但是如果我移动相机：

![在此处输入图像描述](../Images/4e977446d6137de5c9d3b4aa37528521.png)

正如你所看到的，这次箱子和文字是并排的。但看起来我正在计算屏幕坐标而不是世界坐标。我一定又对坐标系感到困惑了。我会努力找到合适的！我只是想确保我的方向是正确的。我也会寻找多纹理坐标，一旦我弄清楚它是如何工作的，它可能会更方便;）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T20:01:01.787

如果我对您的理解正确，您的混合贴图将需要不同的纹理坐标。现在它正在使用每个单元格的整个混合图，这就是为什么每个单元格得到一半文本、一半板条箱的原因。

尝试使用多个 texcoords。您还可以通过将顶点的当前 x 位置除以 x 方向上的地形长度和 y 相同来计算着色器中的正确 UV。如果你缩放你的地形，请确保将地形的长度乘以比例。

如果您没有看到我在说什么，那么地形的每个单元格都会获得以下任一值的 UV：(0,0)、(1,0)、(0,1) 或 (1,1)。这对于 crate 和 text 纹理来说很好，但 mixmap 应该更加分数和多样化。

这是另一个地形教程的[链接。](http://www.chadvernon.com/blog/resources/directx9/terrain-generation-with-a-heightmap/)它使用 DirectX，但顶点/UV 生成是可比的。最大的不同是他为整个地形使用了一个大纹理，这是你需要为你的混合贴图做的，而不是你的其他纹理。

我想我知道出了什么问题。显式存储顶点位置。不要将它乘以模型视图矩阵，即：

```
varying vec4 VertexPosition;

void main() {

    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = ftransform();
    //VertexPosition = gl_ModelViewMatrix * gl_Vertex;;
    VertexPosition = gl_Vertex;
} 
```

这将解决它，抱歉，我将您的固定着色器扔到了 rendermonkey 中，它不再随相机移动。希望这可以帮助。我正在平移，但现在看起来像：

![固定渲染](../Images/32fddcd5d2c4897e2deb7773213376d8.png)

# html - 将所有 Linux 手册页转换为 text/html 或 markdown

> ID：13433903
> 
> 赞同：23
> 
> 时间：2012-11-17T19:16:06.543
> 
> 标签：html, linux, unix, markdown, manpage

有没有办法将所有 Linux 手册页转换为纯文本、html 或 markdown？

我需要对系统上安装的每个 man 文件执行此操作。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-17T19:28:59.447

是的......要转换其中一个，比如说，人的人：

```
zcat /usr/share/man/man1/man.1.gz  | groff -mandoc -Thtml 
```

如果您想“全部安装在您的 PC 上”，您只需遍历它们即可。对于不同的输出（例如文本），使用不同的“设备”（-T 参数）。

以防万一......如果“迭代”是真正的问题，您可以使用：

```
OUT_DIR=...

for i in `find -name '*.gz'`; do 
    dname=`dirname $i`
    mkdir -p $OUT_DIR/$dname
    zcat $i | groff -mandoc -Thtml > $OUT_DIR/$i.html
done 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-06T18:43:45.787

使用该命令可以列出所有可用的手册页名称，`man -k ''`这可能比原始手册页数据文件更好；同时，man 命令有一个选项，可以生成给定手册页部分和名称的 HTML。因此，下面的 bash 脚本**会将 Linux 中所有可用的手册页转换为 HTML 文件**：`find``zcat``-T, --troff-device[=DEVICE]`

 **```
man -k '' | while read sLine; do
    declare sName=$(echo $sLine | cut -d' ' -f1)
    declare sSection=$(echo $sLine | cut -d')' -f1|cut -d'(' -f2)
    echo "converting ${sName}(${sSection}) to ${sName}.${sSection}.html ..."
    man -Thtml ${sSection} ${sName} > ${sName}.${sSection}.html
done 
```

[在无法访问 Internet 且在线手册页服务](https://wiki.archlinux.org/index.php/Man_page#Online_Man_Pages)不可用的 Intranet中，将此文件放在您的**静态 HTTP 服务器（例如 Nginx）中并启用自动索引**是一个不错的选择，在此[浏览](http://i.stack.imgur.com/gnYhC.png)和 Ctrl+F 可能会很方便。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-23T20:45:04.337

```
man -Hfirefox ls 
```

直接在Firefox中打开“ls”的手册页

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-29T02:33:10.527

我建议尝试[Pandoc](https://pandoc.org)：

```
$ pandoc --from man --to html < input.1 > output.html 
```

它生成的 HTML 既可读又可编辑，后者对我的用例很重要。

它还可以生成许多其他格式，例如 Markdown，当您不确定要提交哪种格式时，这很好。

有评论说 Pandoc cannot convert from `man`，但这似乎已经过时了。`man`当前版本（2.13）在转换为`html`我的示例时做得不错。

此外，虽然公认的答案建议使用`groff -mandoc -Thtml`，但这对我来说并没有 Pandoc 做得那么好。具体来说，我想将[旧的 Flex-2.5.5 手册页](https://github.com/westes/flex/blob/flex-2-5-5b/flex.1)转换为 html。 `groff`（版本 1.22.4）不幸地破坏了所有的代码示例（没有缩进，没有固定宽度的字体），使它们难以阅读，而 Pandoc 将它们作为`pre`部分带来。此外，`groff`输出充满了明确的内联样式，而 Pandoc 输出根本不使用 CSS，使其成为更好的编辑起点。

（有一个现有的[答案](https://stackoverflow.com/a/58590046/2659307)也提到了 Pandoc，我考虑将我的信息编辑到其中，但我想说更多关于我使用它的经验。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-28T11:22:41.840

使用代码而不是应用程序完成此任务的最佳方法可能是使用 pandoc。[https://pandoc.org](https://pandoc.org)

您甚至可以在不同的标记之间进行内联字符串转换，例如在 python pando 中：

```
import pypandocenter 
# With an input file: it will infer the input format from the filename
output = pypandoc.convert_file('somefile.md', 'rst')

# ...but you can overwrite the format via the `format` argument:
output = pypandoc.convert_file('somefile.txt', 'rst', format='md')

# alternatively you could just pass some string. In this case you need to
# define the input format:
output = pypandoc.convert_text('#some title', 'rst', format='md')
# output == 'some title\r\n==========\r\n\r\n' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-05T22:00:07.357

这对我有用

```
man --html=cat gcc > gcc.htm 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-04T00:52:02.603

为了**转换**我使用的男人：

> zcat "/usr/share/man/man1/${PROGRAM}.1.gz" | [男子气概](https://gitlab.com/es20490446e/manly)> “out.html”

为了将 man 直接**显示为 html，我使用：**

> [阿曼](https://gitlab.com/es20490446e/oman)“${程序}”

**输出**如下所示：

[![截屏](../Images/3084863112bb141338e848f8eb474a8c.png)](https://i.stack.imgur.com/vLKGc.png)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-17T19:43:11.240

今天是你的幸运日。有人已经为你做了这件事。 [http://linux.die.net/](http://linux.die.net/)**

# android - 如何使用 Corona SDK 将 Share 功能添加到 Android 应用程序？

> ID：13433904
> 
> 赞同：4
> 
> 时间：2012-11-17T19:16:06.660
> 
> 标签：android, share, android-contentprovider, coronasdk

我想为 Android 上的 Corona SDK 应用程序添加图像共享功能。但我不想要我可以编写自己的代码的电子邮件/twitter/fb 共享。我想要的是使用本机“共享”功能，该功能可以选择所有共享提供者。

所以这个弹出窗口看起来像这样：

![在此处输入图像描述](../Images/d18bd590ca61439f51524b825ab86e16.png)

如何在 Corona SDK 中做到这一点？（这有可能吗？不是 Corona Enterprise 吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:58:30.613

You can do it with Corona Enterprise, but I don't know how (I don't own Corona Enterprise).

Otherwise, no, it cannot be done.

EDIT for december of 2013:

It now can be done using a plug-in

[http://www.coronalabs.com/blog/2013/10/11/revisiting-the-social-plugin-now-on-android/](http://www.coronalabs.com/blog/2013/10/11/revisiting-the-social-plugin-now-on-android/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-23T02:04:14.070

Corona SDK 有一个插件。看：

[http://www.coronalabs.com/blog/2013/10/11/revisiting-the-social-plugin-now-on-android/](http://www.coronalabs.com/blog/2013/10/11/revisiting-the-social-plugin-now-on-android/)

# javascript - 检查是否在 IF 语句中选中复选框

> ID：13433907
> 
> 赞同：0
> 
> 时间：2012-11-17T19:16:57.483
> 
> 标签：javascript, html, javascript-events

如何检查是否在 IF 语句中检查了文本框。在我的示例中，我正在检查是否已选择“否”和“ely”以及复选框 3 或 4 是否已选中，然后需要自动选中复选框 2。

JavaScript 代码：

```
if(likeShield.value == "noShield" && chooseShield.value == "ely" &&  
            (document.getElementById("cb3").checked == true ||
             document.getElementById("cb4").checked == true))
{
    document.getElementById("cb2").checked=true;
} 
```

上面的代码不起作用。我怎样才能解决这个问题？

HTML 代码：

```
<html>
<head>
<script type="text/javascript" src="myJavascript.js"></script>
</head>
<body>

<select id="likeShield" onchange="showTicks()">
   <option value="select1">Select</option>
   <option value="yesShield">Yes</option>
   <option value="noShield">No</option>
</select>

<select id="chooseShield" onchange="showTicks()">
   <option value="select1">Select</option>
   <option value="arc">Arcane</option>
   <option value="ely">Elysian</option>
<option value="spec">Spectral</option>
<option value="anylist">Choose any</option>
</select>

<table border = "1">
<tr>
   <th> tickbox </th>
   <th> shield parts </th>
   <th> description </th>
   <th> cost </th>
</tr>
<tr>
   <td><input type="checkbox" id="cb1"></td>
   <td> arc sigil </td>
   <td> Large magic part </td>
   <td> 5m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb2"></td>
   <td> arc shield </td>
   <td> A extremely powerful magic shield </td>
   <td> 60m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb3"></td>
   <td> arc special item </td>
   <td> special element </td>
   <td> 10m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb4"></td>
   <td> elysian sigil  </td>
   <td> A sigil found by dragons </td>
   <td> 50m </td>
</tr>   
<tr>
   <td><input type="checkbox" id="cb5"></td>
   <td> elysian shield </td>
   <td> A extremely powerful ranging shield </td>
   <td> 40m </td>
</tr>   
<tr>
   <td><input type="checkbox" id="cb6"></td>
   <td> elysian special item </td>
   <td> A special attack attached to shield </td>
   <td> 25m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb7"></td>
   <td> spectral sigil  </td>
   <td> easily obtainable from goblins </td>
   <td> 4m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb8"></td>
   <td> spectral shield </td>
   <td> Impressive stats </td>
   <td> 15m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb9"></td>
   <td> spectral special item </td>
   <td> Does double damage </td>
   <td> 30m </td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:29:33.190

> ```
> document.getElementById("checkBox2").checked=true; 
> ```

您的代码中没有这样的元素。

也许你的意思是：

```
document.getElementById("cb2").checked=true; 
```

对您做错了什么的任何进一步探索都需要一个*testcase*，显示您执行条件语句的完整上下文。目前完全不清楚它是在事件处理程序中，还是在函数调用中，或者什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:30:06.807

如果您想要在更新复选框时更新它们，则必须侦听更改事件：

```
document.onload = function(){
var likeShield = document.getElementById("likeShield");
var chooseShield = document.getElementById("chooseShield");
var cb3 = document.getElementById("cb3");
var cb4 = document.getElementById("cb4");
function checkchecks() {
    if (
        likeShield.value=="noShield" && chooseShield.value == "ely"
        && (cb3.checked || cb4.checked)
    ) {
        document.getElementById("cb2").checked=true;
    }
}
likeShield.onchange=checkchecks;
chooseShield.onchange=checkchecks;
cb3.onchange=checkchecks;
cb4.onchange=checkchecks;
} 
```

[示范](http://jsfiddle.net/b55Zk/)

# jquery - jHTMLarea - 选择文本在 IE9 中不起作用

> ID：13433908
> 
> 赞同：1
> 
> 时间：2012-11-17T19:17:11.470
> 
> 标签：jquery, internet-explorer-9, jhtmlarea

jHTMLarea 适用于所有浏览器，但在 IE9 中，如果文本框需要滚动条，则当用户将其突出显示时，初始窗口下方的任何内容都不会突出显示。

下面的代码是我用来调用插件的代码。

```
 $(function() {
            $("#aboutTextEdit").htmlarea({
            toolbar: ["bold", "italic", "unorderedList", "|", "link", "unlink" ], 
                loaded: function(event) {               
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:47:15.020

我在 jHTMLarea 0.7.5 上遇到了同样的问题。这个问题也存在于其他所见即所得的编辑器中。

要解决此问题，您必须编辑 jhtmlarea.js 文件。搜索：

> 设计模式=开启

然后删除这个词并插入

> 编辑.body.contentEditable = true;

..在函数结束时。确保在 inital-document 之后设置 contentEditable，如下所示：

```
[..]

initEditor:function(options)
{
    var edit=this.editor=this.iframe[0].contentWindow.document;
    edit.open();
    edit.write(this.textarea.val());
    edit.close();
    if(options.css)
    {
        var e=edit.createElement('link');
        e.rel='stylesheet';
        e.type='text/css';
        e.href=options.css;
        edit.getElementsByTagName('head')[0].appendChild(e);

    [..] 
    edit.body.contentEditable = true;

[..] 
```

它似乎也是在 Firefox 上运行的解决方案，因此您无需进行浏览器切换。看看您将“contentEditable”设置为“body”或“div”之类的 HTML 元素，而不是直接设置为“document”-Object。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:21:19.370

弄清楚了！！感[谢沃伦布洛克](https://stackoverflow.com/users/1345396/warren-bullock)

并使用这个 stackOverflow 问题（一旦我发现这是一个 iframe 问题）：[无法选择超出可见区域的 iframe 中留下的文本](https://stackoverflow.com/questions/9063475/unable-to-select-the-text-left-in-the-iframe-beyond-the-visible-area)

踢球者进入 jHTMLArea 文件并注释掉这一行：edit.designMode = 'on';

这是第 308 行。现在在所有浏览器中都很好用！

# android - Android 兼容性库。最佳实践

> ID：13433909
> 
> 赞同：3
> 
> 时间：2012-11-17T19:17:21.983
> 
> 标签：android, android-compatibility

我一直在开发一个针对 Android API 级别 10 的应用程序。当我开始时，我的理论是针对低 API，因此它可以在大多数设备上使用。我觉得这是大多数新开发人员所做的。随着我深入了解 android，我开始熟悉兼容性库，以便从更高的 API 级别向应用程序添加功能。

有没有人对所有或大多数设备的最佳开发方式有一些明确的建议。我看到了两种明确的方法。

我读过[这篇文章](http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too.html "吃你的蛋糕")很多次，但我注意到它是从 2010 年开始的，在 android 年代已经过时了。

是不是更好

- 针对较低的 API 进行开发并使用兼容性库来增加与新设备的更好兼容性

或者

- 针对最新的 API 进行开发并在兼容性方面工作以支持旧设备？

最后，我假设测试设备的可用性可能会在这里发挥作用。我同时拥有 2.3.4 和 4.0 设备，所以我真的在决定在开发时我想要在哪个设备上进行大部分测试。

我希望这不会因为主观而被删除。这是困扰许多新安卓开发者的一个非常重要的问题，也是开发 Good Professional 安卓应用程序并非易事的原因之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:00:07.357

我猜你认为所谓的“兼容性库”是 Android 支持包。一年多以前，它*曾经被称为 Android 兼容性库。*

Android 支持包包含在较新版本的 Android 中引入的功能的“反向移植”。还有其他的向后移植，例如 ActionBarSherlock，它提供了操作栏的向后移植。

如果您选择使用一个或多个反向移植，您就是在*对反向移植*API 进行编码。对于后端提供的服务，您没有编码到“较低的 API”*或*“最新的 API”。

我对使用最新版 Android 开发者工具的开发者的一般建议是：

*   设置为`android:minSdkVersion`您愿意支持的最旧版本的 Android

*   将构建目标和 设置`android:targetSdkVersion`为相对较新的 Android 版本，其中包含您可能希望*有条件*地在较新设备上使用的功能

*   使用 Android 支持包、ActionBarSherlock 和其他反向移植来获取它们支持的您希望在旧设备和新设备上一致使用的功能

# c - strcmp 的段错误 - 可能发出来自结构的传递指针

> ID：13433915
> 
> 赞同：2
> 
> 时间：2012-11-17T19:18:15.560
> 
> 标签：c

我正在尝试将用户输入的搜索词与链接列表中的多个名称进行比较。我确定它在 strcmp 处存在段错误，但 strcmp 处的段错误的解决方案似乎都不是问题。

这是我的代码！我对 StackOverflow 和 C 还很陌生，所以对于我在发布此内容或在实际编程中犯的任何愚蠢错误，我提前道歉。><

```
struct node{
char* name;
struct node* next;
};

#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main(){
char reader;
char srchbuff[1001];
char name[10] = "Justin";
char* srch;
int i;

struct node *head;
struct node *cur;

head = malloc(sizeof(struct node));
head->name = name;
head->next = 0;

for(i=0; i<1000; i++){
   scanf("%c", &reader);
   srchbuff[i] = reader;
}

srchbuff[i] = '\0';
srch = malloc(sizeof(char)*i);
strcpy(srch, srchbuff);

cur = head;

while( (cur != NULL) && (strcmp(cur->name, srch)) != 0){
    cur = cur->next;
}
} 
```

在单独的函数中分配了其他节点，可以正常工作，并且信息也分配在单独的函数中（它也可以正常工作），并且我的结构在我的头文件中，所以一切都很愉快和认可。

我还使用 gdb 和 printf 语句进行了测试，以确保 strcmp 是我要进行段错误的地方，而且肯定是。在此先感谢您的任何建议 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T19:22:56.190

在行

```
srchbuff[i] = '\0'; 
```

您在 srchbuff 末尾写入一个字节。

内存`srch`指向，未初始化。所以任何事情都可能发生。

`cur`也没有初始化。这意味着`cur`指向任何地方，因此也是如此`cur->name`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:25:21.387

除了在 中使用未初始化的内存外`srch`，您没有条件在列表末尾停止循环。您应该将其修改为如下内容：

```
while (cur != NULL && strcmp(cur->name, srch) != 0){
   cur = cur->next;
} 
```

否则在列表的末尾，`cur`将变为`NULL`并且空指针取消引用将`cur->name`在下一次迭代中发生。

# java - Andengine，如何用触摸屏移动精灵

> ID：13433916
> 
> 赞同：3
> 
> 时间：2012-11-17T19:18:15.827
> 
> 标签：java, android, andengine

我从 Andengine 开始，当我触摸屏幕（不是精灵）时很难移动我的精灵。我真的需要你的帮助，非常感谢。

这是我的代码：

```
 @Override
protected Scene onCreateScene() {
    final Scene scene = new Scene();
    Sprite backgroundSprite = new Sprite(0, 0, this.mBackgroundTextureRegion, getVertexBufferObjectManager());
    scene.attachChild(backgroundSprite);
    Carl carl = new Carl(1, 30, 361, this.carl, getVertexBufferObjectManager()){

        };

    scene.attachChild(carl);

    this.mStack1.add(carl);
    carl.setmStack(mStack1);
    scene.registerTouchArea(carl);
    scene.setTouchAreaBindingOnActionDownEnabled(true);

    return scene;
}
public boolean onTouchEvent(MotionEvent event, Carl carl) {

    carl.setPosition(carl.getX() +2,carl.getY() );
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:36:08.030

您可以实现`IOnSceneTouchListener`接口，而不是覆盖 onSceneTouchEvent 方法，您可以在其中使用您的球进行操作

```
@Override
public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
     carl.setPosition(carl.getX() +2,carl.getY() );
    return false;
} 
```

但不要忘记将其添加`scene.setOnSceneTouchListener(this);`到`protected Scene onCreateScene()`

编辑：

```
boolean canGo = false;

@Override
public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
    if (pSceneTouchEvent.getAction() == MotionEvent.ACTION_DOWN)
        canGo = true;
    if (pSceneTouchEvent.getAction() == MotionEvent.ACTION_UP)
        canGo = false;
    return false;
} 
```

这增加了你的`public Scene onCreateScene() {`

```
scene.registerUpdateHandler(new IUpdateHandler() {
    @Override
    public void reset() {}
    @Override
    public void onUpdate(float pSecondsElapsed) {
        // TODO Auto-generated method stub
        if (canGo)
            ball.setPosition(ball.getX() + 2, ball.getY());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T09:41:30.093

您还可以使用移动修饰符上下移动。

```
 public class MainActivity extends BaseGameActivity implements IOnSceneTouchListener {

    private static final int CAMERA_WIDTH = 800;
    private static final int CAMERA_HEIGHT = 480;

    private BitmapTextureAtlas characterTextureAtlas;
    private ITiledTextureRegion characterTiledTextureRegion;
    private AnimatedSprite characterAnimatedSprite;

    boolean canGo = false;

    public static final String TAG = "Cowboy#";

    private Scene scene;

    @Override
    public EngineOptions onCreateEngineOptions() {
        Camera camera = new Camera(0,0, CAMERA_WIDTH, CAMERA_HEIGHT);
        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new FillResolutionPolicy(), camera);
    }

    @Override
    public void onCreateResources(OnCreateResourcesCallback pOnCreateResourcesCallback) throws IOException {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
        characterTextureAtlas = new BitmapTextureAtlas(mEngine.getTextureManager(), 640, 320, TextureOptions.BILINEAR);
        characterTiledTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(characterTextureAtlas, this, "walkman640x320.png", 0, 0, 8, 1);
        characterTextureAtlas.load();

        pOnCreateResourcesCallback.onCreateResourcesFinished();
    }

    @Override
    public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback) throws IOException {
        scene = new Scene();
        scene.setOnSceneTouchListener(this);

        characterAnimatedSprite = new AnimatedSprite(120, 120, characterTiledTextureRegion, mEngine.getVertexBufferObjectManager()){

            @Override
            protected void onManagedUpdate(float pSecondsElapsed) {
                super.onManagedUpdate(pSecondsElapsed);
//                Log.d(TAG, "onManagedUpdate: counting#");
            }
        };
        characterAnimatedSprite.animate(50);

        scene.attachChild(characterAnimatedSprite);
        scene.setBackground(new Background(Color.CYAN));
        scene.registerUpdateHandler(new IUpdateHandler() {
            @Override
            public void reset() {}
            @Override
            public void onUpdate(float pSecondsElapsed) {
                // TODO Auto-generated method stub
                //moves character 2 steps forward along x-axis
//                if (canGo){
//                    characterAnimatedSprite.setPosition(characterAnimatedSprite.getX() + 2, characterAnimatedSprite.getY());
//                }
                //moves character 8 steps upward along y-axis and back
//                if (canGo){
//                    characterAnimatedSprite.setPosition(characterAnimatedSprite.getX(), characterAnimatedSprite.getY()+30);
////                    characterAnimatedSprite.setPosition(characterAnimatedSprite.getX(), characterAnimatedSprite.getY()-8);
//                }

                if (canGo){
                    final float duration = 1;
//                    final float duration = 3;
                    final float fromX = characterAnimatedSprite.getX();
                    final float toX = characterAnimatedSprite.getX();
                    final float fromY = characterAnimatedSprite.getY();
                    final float toY = characterAnimatedSprite.getY() + 80;

                    //you can move in on axis using MoveYModifier or MoveXModifier
//                    MoveYModifier mod1=new MoveYModifier(constanttime,fromY,toY);
//                    sprite.registerEntityModifier(mod1);

                    final MoveModifier downMoveModifier = new MoveModifier(0.4f, fromX, toY, toX, fromY, new IEntityModifier.IEntityModifierListener() {
                        @Override
                        public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {
                            characterAnimatedSprite.stopAnimation(0);
                        }

                        @Override
                        public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
                            characterAnimatedSprite.animate(50);
                        }
                    });

                    final MoveModifier upMoveModifier = new MoveModifier(0.2f, fromX, fromY, toX, toY, new IEntityModifier.IEntityModifierListener() {
                        @Override
                        public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {
                            characterAnimatedSprite.stopAnimation(0);
                        }

                        @Override
                        public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
                            characterAnimatedSprite.registerEntityModifier(downMoveModifier);
                        }
                    });

                    characterAnimatedSprite.registerEntityModifier(upMoveModifier);
                }
            }
        });
        pOnCreateSceneCallback.onCreateSceneFinished(scene);
    }

    @Override
    public void onPopulateScene(Scene pScene, OnPopulateSceneCallback pOnPopulateSceneCallback) throws IOException {
        pOnPopulateSceneCallback.onPopulateSceneFinished();
    }

    @Override
    public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {

        if (pSceneTouchEvent.getAction() == MotionEvent.ACTION_DOWN)
            canGo = true;
        if (pSceneTouchEvent.getAction() == MotionEvent.ACTION_UP)
            canGo = false;
        return false;
    }
} 
```

# android - 接受来自android的服务器端jsp请求

> ID：13433925
> 
> 赞同：0
> 
> 时间：2012-11-17T19:19:12.580
> 
> 标签：android, jquery, jsp, tomcat

我正在做我的项目……现在我必须完成的任务是

1）我已经从android应用程序发送请求到tomcat服务器上的页面

2）页面获取对应用程序的请求和响应

**对于客户端，我正在使用此代码**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Creating HTTP client
    HttpClient httpClient = new DefaultHttpClient();
    // Creating HTTP Post
    HttpPost httpPost = new HttpPost(
            "http://www.example.com/login");

    // Building post parameters
    // key and value pair
    List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(2);
    nameValuePair.add(new BasicNameValuePair("email", "user@gmail.com"));
    nameValuePair.add(new BasicNameValuePair("message",
            "Hi, trying Android HTTP post!"));

    // Url Encoding the POST parameters
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
    } catch (UnsupportedEncodingException e) {
        // writing error to Log
        e.printStackTrace();
    }

    // Making HTTP Request
    try {
        HttpResponse response = httpClient.execute(httpPost);

        // writing response to log
        Log.d("Http Response:", response.toString());
    } catch (ClientProtocolException e) {
        // writing exception to log
        e.printStackTrace();
    } catch (IOException e) {
        // writing exception to log
        e.printStackTrace();

    }
} 
```

}

**但我想知道...我如何才能在服务器端...** 1) 我必须使用 .jsp 扩展名制作简单页面才能提前完成我的工作

2）**请指导我进行测试**

```
 a)do i have to switch on wifi of laptop...

 b)and also wifi of my android phone

 c)connect phone through wifi with laptop by IP of laptop

 d)then after connecting throught ip hit localhost server by..."192.168.1.23/file.jsp" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:12:34.450

使用 android 模拟器，您应该将服务器 ip 地址定义为 10.0.2.2

见-> [http://developer.android.com/tools/devices/emulator.html](http://developer.android.com/tools/devices/emulator.html)（网络地址空间）

使用真正的 android 设备，无论是通过有线网络，还是无线，如果 android 设备和服务器连接到同一个网络，你应该通过 ip 连接，或者如果 dns 服务提供它，你应该有连接。

如果设备和服务器位于不同的网络上，您可能会遇到其他困难，例如路由或防火墙问题。

# c++ - 在 C++ 类中初始化未知范围数组

> ID：13433927
> 
> 赞同：0
> 
> 时间：2012-11-17T19:19:14.807
> 
> 标签：c++

我有一个初学者的问题：

```
class Snake
{
public:
    int mapa[][];
    Snake(int szer,int wys)
    {
        mapa[szer][wys];
    }
}; 
```

我正在尝试做类似上面的事情（创建具有在构造函数中定义的大小的数组），但它在 C++ 中似乎是不可能的。有什么办法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:23:15.387

是的：

```
std::vector<std::vector<int> > ...; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:30:38.600

根据您的需要，您可以使用一个`std::vector<std::vector<T> >`或一个类来提供一个`std::vector<T>`二维区域的接口。对于后者，您将重载`operator[]()`以返回一个对象，该对象为内部的子范围提供`std::vector<T>`数组本身的砍伐。如果您只想使用 subscriot 运算符，返回 a`std::vector<T>::iterator`会起作用，但它不会暴露，例如，`begin()`和`end()`迭代器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:24:44.063

如果您真的想使用`new`关键字，则必须进行两步初始化：

```
int **mapa;
Snake(int szer,int wys)
{
    mapa = new int*[szer];
    for (int i = 0; i < szer; i ++)
        mapa[i] = new int[wys];
... 
```

# xcode - 无法使用情节提要将代码连接到 UI 对象？Xcode 4.5

> ID：13433930
> 
> 赞同：1
> 
> 时间：2012-11-17T19:19:25.620
> 
> 标签：xcode, twitter, ios6, social

我正在尝试将 Twitter 集成添加到我的 iOS 6 iPhone 应用程序中。我安装了社交框架，我拥有所有代码，但我无法将代码连接到我的一个屏幕上的 UIButton。我正在使用情节提要，因此我可以轻松拥有多个屏幕。它不会让我发布屏幕截图，所以我希望你能理解我在说什么。谢谢！

埃文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T02:33:36.853

为了在 Storyboard 中创建 UIButton 的引用，您需要：

1) 将 ViewController 的类名（将处理 UIButton 行为的类名）与 StoryBoard 中的 ViewController 链接。为此，请转到情节提要，选择包含要连接的 UI 元素的 ViewController。然后选择左下角的“Identity Inspector”（这是第三个选项）。然后你必须在“类”字段中输入你的 ViewController 的类名。

2) 然后您可以使用 Xcode 4.5 提供的 Assistant Editor 轻松地将您的 UI 元素连接到您的类。要显示助理编辑器，请按`option + command + return`（或转到查看/助理编辑器/显示助理编辑器）。一旦显示了助理编辑器，您必须在 StoryBoard 中选择您的 ViewController，它会自动向您显示您的 ViewController 类的 @interface。

3) 现在你所要做的就是抓住`Control + Click`UI 元素，（对于这个例子，我们可以使用 UIButton）并在你的 ViewController 类的 @interface 下的 Assistant Editor 中拖动（你会注意到一条蓝线被投影了）从按钮到鼠标位置）。放下后，它会显示一个对话框，让您选择所需的连接类型，只需保留默认值并为您的属性插入一个名称。它应该添加如下内容：

```
@property (weak, nonatomic) IBOutlet UIButton *myButton; 
```

默认情况下，它会为您提供创建 Outlet (IBOutlet) 的选项，这只是告诉 Xcode 您正在创建的属性链接到在 Interface Builder 中创建的 UI 元素的一种方式（在本例中使用情节提要）。拥有 UIButton 的 IBOutlet 属性，您可以访问它的任何公共属性，询问它的状态或更改它，例如，您可以更改按钮的文本。

4) 但是为了给你的按钮添加行为，你必须创建一个 IBAction。您也可以在助手编辑器的帮助下执行此操作。同样，您必须`Control + Click`将另一个连接从您的 UIButton 拖动到您的 @interface 文件。但是这一次您必须在连接类型中选择“操作”，然后为其提供名称。

需要注意的一点是，默认情况下，当您创建 UI 元素的 IBAction 时，它将为该元素选择最常见的事件，在 UIButton 的情况下，它是“Touch Up Inside”事件。您可以创建不同的 IBAction 来响应同一 UI 元素的不同事件。

@interface 文件的结果代码应如下所示：

```
//  MyViewController.h

#import <UIKit/UIKit.h>

@interface MyViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIButton *myButton;

- (IBAction)myButtonTouchUpInsideAction:(id)sender;

@end 
```

如果您查看 @implementation 文件的底部，您应该能够看到一个返回 IBAction 的新方法，如下所示：

```
- (IBAction)myButtonTouchUpInsideAction:(id)sender
{
    // insert your behaviour here
} 
```

在该方法的范围内，您可以添加您希望 UIButton 在触发注册事件时执行的行为。

要使用 IBOutlet 属性，您只需在 @implementation 语句之后添加一个带有您的 IBOutlet 名称的 @synthesize 语句，例如：

```
@implementation MyViewController

@synthesize myButton; 
```

现在您可以通过调用来使用您的 UIButton 属性：

```
self.myButton 
```

希望这可以帮助！如果还不够清楚，请告诉我。

# objective-c - 如何在 mac 中使用 Xcode 与 HC-05 蓝牙模块 (RFComm/SPP) 通信

> ID：13433936
> 
> 赞同：2
> 
> 时间：2012-11-17T19:19:50.157
> 
> 标签：objective-c, xcode, macos, bluetooth

我是 Xcode 的新手，我想在我的 Xcode 可可应用程序中使用 HC-05 蓝牙模块传输数据。

我的模块是一个蓝牙到串行接口适配器。这可能吗？我可以通过 OS X 中的 goSerial 应用程序使用此模块传输数据。

我能做些什么？你知道任何示例代码或项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-30T13:30:42.347

您可以简单地使用 ORSSerialPort 库与您的串行端口设备通信并从您的 OSX 应用程序控制它。

# php - PHP - 读取日期结果并添加不同的样式

> ID：13433937
> 
> 赞同：0
> 
> 时间：2012-11-17T19:20:15.743
> 
> 标签：php

我有以下一组查询结果：

```
name        date_added
----        ---------
dan         15/11/2012
jane        15/11/2012
ted         14/11/2012
larry       13/11/2012
corben      13/11/2012 
```

这些结果来自一个简单的 MySQL 查询，我显示结果，例如

```
while($users = mysql_fetch_array($result)){

    echo $users[name].' -- '.$users[date_added];

} 
```

这会产生一个简单的列表，例如

```
dan    --     15/11/2012
jane   --     15/11/2012
ted    --     14/11/2012
larry  --     13/11/2012
corben --     13/11/2012 
```

我想要做的是不同日期的结果，从第一个开始，例如

```
15/11/2012
dan    --     15/11/2012
jane   --     15/11/2012

14/11/2012
ted    --     14/11/2012

13/11/2012
larry  --     13/11/2012
corben --     13/11/2012 
```

日期每天都在变化，因为这是一个活文档，所以没有什么是硬编码的。

在 while 循环中是否有一种简单有效的方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:32:22.267

您可以使用 mySQL DISTINCT ... Fx：

```
$dates = mysql_query("SELECT DISTINCT date_added FROM your_table ORDER BY date_added ASZ");

$user_date = array();
while ($row = mysql_fetch_array($dates)) {
  array_push($user_date, $row['date_added']);
}

foreach ($user_date as $date) {
    echo $date . '<br />';
    $users = ("SELECT name, date_added FROM your_table WHERE date_added = '$date' ORDER BY date_added ASC");
    while($row = mysql_fetch_array($users)) {
      echo $row['name'] . ' -- ' . $row['date_added'] . '<br />';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:24:46.483

```
$dates = array();
while($users = mysql_fetch_array($result))
{
  $key = $users['date_added'];
  if (!isset($dates[$key])) $dates[$key] = array();
  $dates[$key][] = $users[name].' -- '.$users[date_added];
}

// free mysql results
// then iterate $dates to print

foreach ($dates as $date=>$arr)
{
  echo $date.'<br/>'.implode($arr).'<br/><br/>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:26:47.097

你可以把它放在一个以日期为键的数组中，然后像这样显示它们：

```
$users = array();
while ($user = mysql_fetch_array($result)) {
    if (!isset($users[$user['date_added'])) $users[$user['date_added']] = array();
    $users[$user['date_added']][] = $user['name'];
}
foreach ($users as $date => $names) {
    echo $date . '<br />';
    foreach ($names as $name) {
        echo $name . '<br />';
    }
    echo '<br />';
} 
```

您还可以更改查询，以便按日期对它们进行排序，循环遍历结果，并且每次日期与打印日期之前的迭代不同时。

# mongodb - 作业队列的正确 mongo 模式设计是什么？

> ID：13433942
> 
> 赞同：4
> 
> 时间：2012-11-17T19:20:56.710
> 
> 标签：mongodb, jobs, job-scheduling, schema-design

我想在 Mongo 中实现一个作业队列。整个软件系统都是基于 Mongo 的，所以它看起来很自然并且可能很合适。

**作业**集合将每个作业状态存储为一个文档。我想这是一个基于我的查询需求的无上限集合。**工作**文件如下所示：

```
{
    "_id" : ObjectId("50a6742ee4b0a9a1c2cb4fd4"),
    "type" : "archive_job",
    "state" : 2,
    "priority" : 1,
    "timing" : {
        "submitted": ISODate(...),
        "running": ISODate(...),
        "completed": ISODate(...),
        "failed": null,
        "cancelled": null
    },
    payload: {
       ...job-specific JSON...
    }
} 
```

**作业**集合的典型访问模式将是：

*   根据*类型*、*状态*、*优先级*和可能的范围查询来查找要执行的未处理作业的时间。*提交*大于上一次读取时间
*   查找所有已处理（完成、失败、取消）的作业
*   查找所有未处理（已提交、正在运行）的作业
*   通过 _id 查找特定作业并检索其*有效负载*（当状态正在*运行*时）

大部分查询将查找需要执行的未处理作业。*将有效负载*移动到**jobs_payload**集合是否值得，以便文档大小在**作业**集合中变化不大？

与未处理的作业相比，大量已处理（已完成、失败、取消）的作业最终会增加作业集合所需的工作集内存**吗**？即使使用正确的索引，执行未处理作业的访问时间会变慢吗？

我可以通过模式设计做出哪些替代方案和权衡取舍？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T20:49:58.830

> 将有效负载移动到 jobs_payload 集合是否值得，以便文档大小在作业集合中变化不大？

通常嵌入是 mongodb 中的正确方法，在您的情况下它看起来不错。

> 与未处理的作业相比，大量已处理（已完成、失败、取消）的作业最终会增加作业集合所需的工作集内存吗？即使使用正确的索引，执行未处理作业的访问时间会变慢吗？

虽然数据库适合内存减速不会被注意到。

您的架构看起来不错。例如，您可以查看[celery](http://celeryproject.org/)（具有 mongodb 后端）模式。

# java - 开始时关闭 Android 键盘

> ID：13433944
> 
> 赞同：1
> 
> 时间：2012-11-17T19:21:18.193
> 
> 标签：java, android

我有一个来自 xml 的变量：

> editTextInput = (EditText) findViewById(R.id.editTextInput);

当应用程序加载时，会显示键盘，但我想隐藏它，如果用户想要将其取回，她必须单击 EditText 字段以显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:27:13.777

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:24:49.663

这应该有效：

```
 InputMethodManager inputManager = 
            (InputMethodManager) context.
                getSystemService(Context.INPUT_METHOD_SERVICE); 
    inputManager.hideSoftInputFromWindow(
            this.getCurrentFocus().getWindowToken(),
            InputMethodManager.HIDE_NOT_ALWAYS); 
```

# windows-phone-7 - 后台代理，查找用户上一个位置

> ID：13433945
> 
> 赞同：0
> 
> 时间：2012-11-17T19:21:22.807
> 
> 标签：windows-phone-7

我正在开发一个需要定期检测用户最后位置的应用程序。我使用了一些我在谷歌上找到的教程，但它们都不起作用，需要帮助。这是我的代码中的一个示例。

我在 app.xaml.cs 中创建了我的 schdeuledactionservice。我已经在 WMAppManifest.xml 中添加了我的扩展任务。

来自 WMAppManifest.xml

```
<ExtendedTask Name="BackgroundTask">
    <BackgroundServiceAgent Specifier="ScheduledTaskAgent" Name="ToDoSchedulerAgent" Source="ToDoSchedulerAgent" Type="ToDoSchedulerAgent.TaskScheduler" />
  </ExtendedTask> 
```

调度代理代码：

```
public class TaskScheduler : ScheduledTaskAgent
{
    public const string Name = "ToDoLocator";
    public static Location location;
    protected override void OnInvoke(ScheduledTask task)
    {
        if (task is PeriodicTask)
        {
            GeoCoordinateWatcher watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High)
            {
                MovementThreshold = 10
            };

            watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);
            watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);
            ScheduledActionService.LaunchForTest(task.Name, TimeSpan.FromSeconds(3));
            watcher.Start();
        }
        NotifyComplete();
    }

    void watcher_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
    {
        throw new NotImplementedException();
    }

    void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() => PositionChanged(e));
    }

    void PositionChanged(GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        location = new Location();
        location.Latitude = e.Position.Location.Latitude;
        location.Longitude = e.Position.Location.Longitude;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:40:00.403

首先“ScheduledActionService.LaunchForTest”不应该在最终的应用程序中使用，它只是用于测试。
其次，我使用这种方法，它工作得很好 - 我启动 GeoCoordinateWatcher 并使用 AutoResetEvent 等待它被初始化，然后我可以使用坐标：

```
private void WatcherStatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
{
    _status = e.Status;
    switch (e.Status)
    {
        case GeoPositionStatus.Disabled:
        case GeoPositionStatus.NoData:
        case GeoPositionStatus.Ready:
            _watcherLock.Set();
            break;
        case GeoPositionStatus.Initializing:
            break;
        default:
            throw new ArgumentOutOfRangeException();
    }
}

private readonly GeoCoordinateWatcher _watcher = new GeoCoordinateWatcher();
private readonly AutoResetEvent _watcherLock = new AutoResetEvent(false);
private GeoPositionStatus _status;

/// <summary>
/// Agent that runs a scheduled task
/// </summary>
protected override void OnInvoke(ScheduledTask scheduledTask)
{
    _watcher.StatusChanged += WatcherStatusChanged;
    _watcher.Start();

    // wait until watcher is initialized
    _watcherLock.WaitOne();

    // if GPS is disabled or have no data, just return
    if (_status == GeoPositionStatus.Disabled || _status == GeoPositionStatus.NoData)
    {
        NotifyComplete();
        return;
    }

    // get current position
    GeoCoordinate location = _watcher.Position.Location;

    ...

    NotifyComplete();
} 
```

# php - 如何检查 curl 是启用还是禁用

> ID：13433946
> 
> 赞同：85
> 
> 时间：2012-11-17T19:21:28.387
> 
> 标签：php

> **可能重复：**
> [在 php 中编写函数](https://stackoverflow.com/questions/8786428/writing-a-function-in-php)

我正在使用以下代码

```
echo 'Curl: ', function_exists('curl_version') ? 'Enabled' : 'Disabled'; 
```

这可以启用或禁用它

但我想作为函数说函数名是`_iscurl`

然后我可以在我的网站代码中的任何位置调用它

```
if (_iscurl()){
  echo "this is enabled"; // will do an action
}else{
  echo "this is disabled"; // will do another action
} 
```

几乎与我之前的问题相同，[检查 allow_url_fopen 是否启用](https://stackoverflow.com/questions/13433660/how-to-check-if-allow-url-fopen-is-enabled-or-not)

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-11-17T19:23:39.940

只需从[函数](http://php.net/manual/en/language.functions.php)返回您现有的支票。

```
function _isCurl(){
    return function_exists('curl_version');
} 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-11-17T19:28:09.467

```
<?php

// Script to test if the CURL extension is installed on this server

// Define function to test
function _is_curl_installed() {
    if  (in_array  ('curl', get_loaded_extensions())) {
        return true;
    }
    else {
        return false;
    }
}

// Ouput text to user based on test
if (_is_curl_installed()) {
  echo "cURL is <span style=\"color:blue\">installed</span> on this server";
} else {
  echo "cURL is NOT <span style=\"color:red\">installed</span> on this server";
}
?> 
```

或一个简单的 -

```
<?
phpinfo();
?> 
```

只需搜索 curl

来源 - [http://www.mattsbits.co.uk/item-164.html](http://www.mattsbits.co.uk/item-164.html)

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2014-05-04T13:01:58.180

```
var_dump(extension_loaded('curl')); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-17T19:25:22.860

希望这可以帮助。

```
<?php
    function _iscurl() {
        return function_exists('curl_version');
    }
?> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-04-26T07:54:20.297

您可以通过将这些代码放入 php 文件中进行检查。

```
<?php
if(in_array  ('curl', get_loaded_extensions())) {
    echo "CURL is available on your web server";
}
else{
    echo "CURL is not available on your web server";
} 
```

或者

```
var_dump(extension_loaded('curl')); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-11-17T19:24:22.287

您始终可以创建一个新页面并使用`phpinfo()`. 向下滚动到 curl 部分，看看它是否已启用。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-06-25T07:05:43.903

在您的项目中使用通用的可重用函数总是更好，它返回是否加载了扩展。您可以使用以下功能检查 -

```
function isExtensionLoaded($extension_name){
    return extension_loaded($extension_name);
} 
```

用法

```
echo isExtensionLoaded('curl');
echo isExtensionLoaded('gd'); 
```

# vba - 使用 VBA 进行条件插入

> ID：13433948
> 
> 赞同：1
> 
> 时间：2012-11-17T19:21:43.653
> 
> 标签：vba, excel

我试图在某些条件下在另一行基础下方插入一行。现在这段代码将遍历许多工作表。它适用于 1 张纸，但是当它尝试为下一张纸执行相同的功能时，它显示错误。任何人都可以帮我解决这个问题。我使用的代码如下：

```
Sub test()
Dim a As Worksheet
Dim lngRow As Long
Dim s As String
Dim z As Variant
s = "Sheet1,Sheet2"
z = VBA.Split(s, ",")
For Each i In z
Set a = Sheets(i)
For lngRow = a.UsedRange.Rows.Count To 1 Step -1
If UCase$(a.Cells(lngRow, 2).Value) = "R" Then
a.Range("A" & CStr(lngRow + 1)).Select
Selection.EntireRow.Insert , CopyOrigin:=xlFormatFromLeftOrAbove
End If
Next lngRow
Next i
End Sub 
```

错误出现在这一行：

```
a.Range("A" & CStr(lngRow + 1)).Select 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:42:35.050

您收到错误的原因是您只能`Select`在活动工作表上设置一个范围。要按原样修复代码，请在循环`a.Activate`之前添加。`For`

更好的是，根本不要`Select`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:32:02.227

您的代码假定 Sheets(1) 等于 sheet("Sheet1") 可能并非总是如此。最好使用如下代码：

```
Sub Test1()
Dim aSht As Variant, SafeShts As String
Dim lngrow As Long

SafeShts = LCase("Sheet3 , Sheet4")   'Write here sheets to be unaffected

For Each aSht In ThisWorkbook.Sheets
    If InStr(SafeShts, LCase(aSht.Name)) < 1 Then   'Current sheet not within safe sheets
        For lngrow = aSht.UsedRange.Rows.Count To 1 Step -1
            If UCase(aSht.Cells(lngrow, 2)) = "R" Then
                aSht.Cells(lngrow + 1, 1).EntireRow.Insert xlShiftDown, xlFormatFromLeftOrAbove
            End If
        Next
    End If
Next

End Sub 
```

该代码在更改之前不会选择任何内容，因此速度非常快。

干杯

# android - 在图像视图 android 上绘图

> ID：13433960
> 
> 赞同：3
> 
> 时间：2012-11-17T19:23:18.560
> 
> 标签：android, android-canvas, android-imageview

任何人都可以帮助我如何在`ImageView`每次从另一个接收像素值（要绘制的圆的中心）上绘制一个特定半径的圆`Activity`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:55:26.183

扩展`ImageView`和覆盖`onDraw(Canvas c)`方法 - 添加`c.drawCirle(x,y,radius,Paint)`

或者对于画圆，你也可以使用纯 Canvas。

我试过这种方式，但仍然没有运气

```
public class MyActivity extends Activity {
private MyImageView myImageView;
 float x, y;
 float [] loc;
float radius = 50;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_show_location);
    myImageView = (MyImageView) findViewById(R.id.mapimageView);
    myImageView.setImageResource(R.drawable.mymap);

    //Receiving location information(x/y pixels array) from myLocation Activity         
        Intent i = getIntent();     
        loc = i.getFloatArrayExtra("Location");

}
public class MyImageView extends ImageView
{

    public MyImageView(Context context) {
        super(context);         
    }
    // Constructor for inflating via XML
   public MyImageView(Context context, AttributeSet attrs) {
   super(context, attrs);         
    }

            @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Paint p = new Paint();
        x= loc[0];
        y=loc[1];
        p.setColor(Color.RED);
        p.setStrokeWidth(2);        
        canvas.drawCircle(x, y, radius, p);
    }       
} 
```

并在 xml 中更改`<ImageView` 为`your.package.name.MyImageView`

// 编辑我只是从内存中写的，所以可能有错别字

# c# - 使用约束连接多个 IEnumerables

> ID：13433963
> 
> 赞同：2
> 
> 时间：2012-11-17T19:23:31.993
> 
> 标签：c#, performance, ienumerable

我有一个对象，其中有多个通过不同方式分配的优惠。一个商品只针对一个产品，而一个对象有多个商品。现在我想要一个对象的所有报价都遵循一个产品只包含一次的特定业务逻辑。

目前我已经实现如下：

```
List<Offer> offers = new List<Offer>();
List<Product> products = new List<Product>();                
this.AddOffersToList(offers, products, ov.Offers.Where(o => o.OfferType == composedOffer));
this.AddOffersToList(offers, products, ov.Offers.Where(o => o.OfferType == simpleOffer));
this.AddOffersToList(offers, products, ov.ComposedOfferList.Offers);
this.AddOffersToList(offers, products, ov.SimpleOfferList.Offers); 
```

AddOffersToList 方法：

```
private void AddOffersToList(List<Offer> offers, List<Product> products,IEnumerable<Offer> newOffers)
{
    foreach (Offer offer in newOffers)
    {
        // add offer only if the product is not contained yet
        if (!products.Contains(offer.Product))
        {
            offers.Add(offer);
            products.Add(offer.Product);
        } 
    }
} 
```

这似乎不是最优雅和性能最好的方式。“约束”是 AddOffersToList 方法调用的顺序，并且 Product 仅包含一次。

任何可以帮助我更好地解决这个问题的东西都非常受欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:30:17.150

此代码与您所相信的“等效”。

```
var offers = ov.Offers.Where(o => o.OfferType == composedOffer)
    .Concat(ov.Offers.Where(o => o.OfferType == simpleOffer))
    .Concat(ov.ComposedOfferList.Offers)
    .Concat(ov.SimpleOfferList.Offers)
    .GroupBy(offer => offer.Product)
    .Select(group => group.First())
    .ToList();

var products = offers.Select(offer => offer.Product).ToList(); 
```

# python - 从非系统安装的 Python 执行 Python 脚本

> ID：13433964
> 
> 赞同：1
> 
> 时间：2012-11-17T19:23:32.140
> 
> 标签：python

我目前在我的 Mac 上安装了 python 2.7.1，并且我想在我当前的 Python 开发中使用 2.7.3 的一些功能。我已经下载了 tar 球并将其解压缩到我的 /Users/mark/Python-2.7.3 中，但是当我运行我的 Python 脚本时，如何告诉它使用新的 2.7.3 版本而不是安装的系统 2.7.1 ?

```
/Users/mark/Python-2.7.3
MacBook-Pro:Python-2.7.3 mark$ ls
Demo        Lib     Objects     README      install-sh
Doc         Mac     PC          RISCOS      pyconfig.h.in
Grammar     Makefile.pre.in PCbuild     Tools       setup.py
Include     Misc        Parser      configure
LICENSE     Modules     Python      configure.in 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:27:39.233

您可以使用要直接运行脚本的解释器：

```
/Users/mark/Python-2.7.3/python2.7.3 script.py 
```

或在 shebang 行中设置解释器：

```
#!/Users/mark/Python-2.7.3/python2.7.3 
```

第三个选项，将解释器的路径添加到`PATH`变量中：

```
export PATH=/Users/mark/Python-2.7.3/:$PATH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:35:25.607

在这种情况下——强烈推荐使用[virtualenv 。](http://www.virtualenv.org/en/latest/)安装 virtualenv，并创建新的 venv，使用 -p 键，指向另一个 python 版本。

```
virtualenv -p /Users/mark/Python-2.7.3/python2.7.3 
```

然后简单地运行

```
source bin/activate 
```

在这个 shell 会话中，所有对 python 的调用都将针对具有给定版本的 python 的隔离版本进行。

Virtualenv 有点难以学习和使用，但我建议始终将它用于 python 开发。保持所有项目及其依赖项隔离——非常有帮助。为了方便使用 virtualenv，有一个优秀的[virtualenwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)。

# opengl - GL & GLSL：凹凸贴图：这个教科书示例有什么问题？

> ID：13433968
> 
> 赞同：0
> 
> 时间：2012-11-17T19:24:01.913
> 
> 标签：opengl, glsl, texture-mapping

**以下是自述文件所说的这个例子的作用：** “在一个多边形上使用旋转灯凹凸贴图”。让我补充一下：多边形是一个正方形，它上面的凹凸贴图应该在原始多边形正方形内产生一个凸起的正方形。main() 中的第二个“for”循环中的 i 和 j（像素迭代）的值表示这种内部正方形模式。

**问题**：当我运行它时，显示窗口出现但它是空白的。也许您可以尝试自己运行它：如果它有效，让我们在我们的设置中找到不同之处；如果是，请不要帮助找出代码有什么问题。代码在这里：[http](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/) ://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/ 。单击“代码”，然后单击“CHAPTER07/”。这是示例 7.3。此外，以下是供参考的代码。注意：我在 fshader73.glsl 中添加了“#version 150”以消除运行时的版本错误。

**示例 3.cpp**：

```
/* sets up flat mesh */
/* sets up elapsed time parameter for use by shaders */

#include "Angel.h"

#define N 256

GLfloat normals[N][N][3];
GLuint         program;
GLuint        texMapLocation;
GLfloat tangent[3] = {1.0, 0.0, 0.0};

typedef Angel::vec4  point4;
typedef Angel::vec4  color4;

point4 points[6];
vec2 tex_coord[6];
mat4 ctm, projection;

vec4 normal = point4(0.0, 1.0, 0.0, 0.0);
color4 light_diffuse = color4(1.0, 1.0, 1.0, 1.0);
color4 material_diffuse = color4(0.7, 0.7, 0.7, 1.0);
point4  light_position = point4(0.0, 10.0, 0.0, 1.0);
vec4 eye =  vec4(2.0, 2.0, 2.0, 1.0);
vec4 at = vec4(0.5, 0.0, 0.5, 1.0);
vec4 up = vec4(0.0, 1.0, 0.0, 1.0);

GLuint loc, loc2;
GLuint buffers[2];

GLuint normal_loc;
GLuint diffuse_product_loc;
GLuint light_position_loc;
GLuint ctm_loc, projection_loc;
GLuint tangent_loc;

/* standard OpenGL initialization */

vec4 product(vec4 a, vec4 b)
{
  return vec4(a[0]*b[0], a[1]*b[1], a[2]*b[2], a[3]*b[3]);
}
static void init()
{
    const float meshColor[]     = {0.7f, 0.7f, 0.7f, 1.0f}; 

    glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, meshColor);

    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);

    glBindTexture(GL_TEXTURE_2D, 0);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, N, N, 0, GL_RGB, GL_FLOAT, normals);
    glEnable(GL_TEXTURE_2D);

    glEnable(GL_DEPTH_TEST);

   loc = glGetAttribLocation(program, "vPosition");
   glEnableVertexAttribArray(loc);
   glVertexAttribPointer(loc, 4, GL_FLOAT, GL_FALSE, 0, points);

   loc2 = glGetAttribLocation(program, "texcoord");
   glEnableVertexAttribArray(loc2);
   glVertexAttribPointer(loc2, 2, GL_FLOAT, GL_FALSE, 0, tex_coord);

   glGenBuffers(2, buffers);
   glBindBuffer(GL_ARRAY_BUFFER, buffers[0]);
   glBufferData(GL_ARRAY_BUFFER, sizeof(points), points, GL_STATIC_DRAW);

   tangent_loc = glGetUniformLocation(program, "objTangent");
   glUniform3fv(tangent_loc, 3, tangent);

   normal_loc = glGetUniformLocation(program, "Normal");
   glUniform4fv(normal_loc, 4, normal);

   vec4 diffuse_product = product(light_diffuse, material_diffuse);
   diffuse_product_loc = glGetUniformLocation(program, "DiffuseProduct");
   glUniform4fv(diffuse_product_loc, 4, diffuse_product);

   light_position_loc = glGetUniformLocation(program, "LightPosition");
   glUniform4fv(light_position_loc, 4, light_position);

   ctm_loc = glGetUniformLocation(program, "ModelView");
   ctm = LookAt(eye, at , up);
   glUniformMatrix4fv(ctm_loc, 16, GL_TRUE, ctm);

   mat4 nm;
   GLfloat det;
   det = ctm[0][0]*ctm[1][1]*ctm[2][2]+ctm[0][1]*ctm[1][2]*ctm[2][1]
     -ctm[2][0]*ctm[1][1]*ctm[0][2]-ctm[1][0]*ctm[0][1]*ctm[2][2]-ctm[0][0]*ctm[1][2]*ctm[2][1];
   nm[0][0] = (ctm[1][1]*ctm[2][2]-ctm[1][2]*ctm[2][1])/det;
   nm[0][1] = -(ctm[0][1]*ctm[2][2]-ctm[0][2]*ctm[2][1])/det;
   nm[0][2] = (ctm[0][1]*ctm[2][0]-ctm[2][1]*ctm[2][2])/det;
   nm[1][0] = -(ctm[0][1]*ctm[2][2]-ctm[0][2]*ctm[2][1])/det;
   nm[1][1] = (ctm[0][0]*ctm[2][2]-ctm[0][2]*ctm[2][0])/det;
   nm[1][2] = -(ctm[0][0]*ctm[2][1]-ctm[2][0]*ctm[0][1])/det;
   nm[2][0] = (ctm[0][1]*ctm[1][2]-ctm[1][1]*ctm[0][2])/det;
   nm[2][1] = -(ctm[0][0]*ctm[1][2]-ctm[0][2]*ctm[1][0])/det;
   nm[2][2] = (ctm[0][0]*ctm[1][1]-ctm[1][0]*ctm[0][1])/det;

    GLuint nm_loc;
    nm_loc = glGetUniformLocation(program, "NormalMatrix");
    glUniformMatrix4fv(nm_loc, 16, GL_TRUE, nm);

    projection_loc = glGetUniformLocation(program, "Projection");
    projection = Ortho(-0.75,0.75,-0.75,0.75,-5.5,5.5);
    glUniformMatrix4fv(projection_loc, 16, GL_TRUE, projection);

    texMapLocation = glGetUniformLocation(program, "texMap");

}

    /* set up uniform parameter */

void mesh()
{
      point4 vertices[4] = {point4(0.0, 0.0, 0.0, 1.0), point4(1.0, 0.0, 0.0, 1.0),
         point4(1.0, 0.0, 1.0, 1.0), point4(0.0, 0.0, 1.0, 1.0)};

       points[0] = vertices[0];
       tex_coord[0] = vec2(0.0, 0.0);
       points[1] = vertices[1];
       tex_coord[1] = vec2(1.0, 0.0);
       points[2] = vertices[2];
       tex_coord[2] = vec2(1.0, 1.0);
       points[3] = vertices[2];
       tex_coord[3] = vec2(1.0, 1.0);
       points[4] = vertices[3];
       tex_coord[4] = vec2(0.0, 1.0);
       points[5] = vertices[0];
       tex_coord[5] = vec2(0.0, 0.0);
}

static void draw()
{

    glUniform1i(texMapLocation, 0);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    mesh(); 

    glDrawArrays(GL_TRIANGLES, 0, 6);

    glutSwapBuffers();
}

static void reshape(int w, int h)
{
    glViewport(0, 0, w, h);
    glutPostRedisplay();
}

static void keyboard(unsigned char key, int x, int y)
{
    switch (key) {
    case 27:
    case 'Q':
    case 'q':
        exit(EXIT_SUCCESS);
    }
}

void idle()
{
   int t;
   t = glutGet(GLUT_ELAPSED_TIME);
   light_position[0] = 5.5*sin(0.001*t);
   light_position[2] = 5.5*cos(0.001*t);
   glUniform4fv(light_position_loc, 4, light_position);
   glutPostRedisplay();
}

int main(int argc, char** argv)
{
    int i,j, k;
    float d;

    float data[N+1][N+1];
    for(i=0;i<N+1;i++) for(j=0;j<N+1;j++) data[i][j]=0.0;
    for(i=N/4; i< 3*N/4; i++) for(j=N/4;j<3*N/4;j++) data[i][j] = 1.0;

    for(i=0;i<N;i++) for(j=0;j<N;j++)
    {
       normals[i][j][0] = data[i][j]-data[i+1][j];
       normals[i][j][2] = data[i][j]-data[i][j+1];
       normals[i][j][1]= 1.0;
    }

    for(i=0;i<N;i++) for(j=0;j<N;j++)
    {
       d = 0.0;
       for(k=0;k<3;k++) d+=normals[i][j][k]*normals[i][j][k];
       d=sqrt(d);
       for(k=0;k<3;k++) normals[i][j][k]= 0.5*normals[i][j][k]/d+0.5;
    }

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
    glutInitWindowSize(1024, 1024);

    glutInitContextVersion( 3, 2 );
    glutInitContextProfile( GLUT_CORE_PROFILE );

    glutCreateWindow("Simple GLSL example");
    glutDisplayFunc(draw);
    glutReshapeFunc(reshape);
    glutKeyboardFunc(keyboard);
    glutIdleFunc(idle);

    glewInit();

    program = InitShader("vshader73.glsl", "fshader73.glsl");
    init();

    glutMainLoop();
    return 0;
} 
```

**vshader73.glsl**：

```
/* bump map vertex shader */

#version 150

out vec3 L; /* light vector in texture-space coordinates */
out vec3 V; /* view vector in texture-space coordinates */

in vec2 texcoord;
in vec4 vPosition;

uniform vec4 Normal;
uniform vec4 LightPosition;
uniform mat4 ModelView;
uniform mat4 Projection;
uniform mat4 NormalMatrix;
uniform vec3 objTangent; /* tangent vector in object coordinates */

out vec2 st;

void main()
{
    mat3 NM3;

    NM3[0][0] = NormalMatrix[0][0];
    NM3[0][1] = NormalMatrix[0][1];
    NM3[0][2] = NormalMatrix[0][2];
    NM3[1][0] = NormalMatrix[1][0];
    NM3[1][1] = NormalMatrix[1][1];
    NM3[1][2] = NormalMatrix[1][2];
    NM3[2][0] = NormalMatrix[2][0];
    NM3[2][1] = NormalMatrix[2][1];
    NM3[2][2] = NormalMatrix[2][2];

    gl_Position = Projection*ModelView*vPosition;

    st = texcoord;

    vec3 eyePosition = vec3(ModelView*vPosition);
    vec3 eyeLightPos = LightPosition.xyz;

   /* normal, tangent and binormal in eye coordinates */

    vec3 N = normalize(NM3*Normal.xyz);
    vec3 T  = normalize(NM3*objTangent);
    vec3 B = cross(N, T);

    /* light vector in texture space */

    L.x = dot(T, eyeLightPos-eyePosition);
    L.y = dot(B, eyeLightPos-eyePosition);
    L.z = dot(N, eyeLightPos-eyePosition);

    L = normalize(L);

    /* view vector in texture space */

    V.x = dot(T, -eyePosition);
    V.y = dot(B, -eyePosition);
    V.z = dot(N, -eyePosition);

    V = normalize(V);
} 
```

**fshader73.glsl**：

```
#version 150

in vec3 L;
in vec3 V;
uniform sampler2D texMap;
in vec2 st;
uniform vec4 DiffuseProduct;

out vec4 fColor;

void main()
{

   vec4 N = texture2D(texMap, st);
   vec3 NN =  normalize(2.0*N.xyz-1.0);
   vec3 LL = normalize(L);
   float Kd = max(dot(NN.xyz, LL), 0.0);
   fColor = Kd*DiffuseProduct;
} 
```

**编辑**：

在布雷特的评论之后，我`glBindTexture(GL_TEXTURE_2D, 0)`用下面的内容替换了——仍然得到一个空白的白色窗口：

```
GLuint texture;
glGenTextures( 1, &texture );
glBindTexture(GL_TEXTURE_2D, texture);
...
glActiveTexture(GL_TEXTURE0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:02:56.447

我的评论刚刚超过字符的限制，所以希望这值得回答。

我能看到的唯一可能有问题的是你的`glUniformMatrix4fv`电话。根据[OpenGL 4 语言参考](http://www.opengl.org/sdk/docs/man4/xhtml/glUniform.xml)，第二个参数将其描述为要更改的矩阵的数量。3.2 核心参考页面没有链接到他们的网站上，所以我无法在特定的上下文中查找它。因此，`glUniformMatrix4fv(projection_loc, 16, GL_TRUE, projection);`它打算在一个名为“Projection”的数组中找到 16 个矩阵，但您只定义了`uniform mat4 Projection;`. 这可能是也可能不是您的问题的一部分，而且我什至可能都不正确，特别是如果这是其他人已经编译/使用的已知教程。

此外，glEnable(GL_TEXTURE_2D)对于 3.2 版核心的 OpenGL 上下文不是必需的（[甚至是可用的，我认为？ ），它是在此处设置的：](http://www.opengl.org/discussion_boards/showthread.php/171415-OpenGL-3-X-glEnable%28GL_TEXTURE_2D%29-GL_INVALID_ENUM)

```
glutInitContextVersion( 3, 2 );
glutInitContextProfile( GLUT_CORE_PROFILE ); 
```

如果编译器没有给您任何错误，请尝试`glGetError()`在您认为可能有问题的行之后添加。返回值映射到 OpenGL 头文件中的枚举值（[glcorearb.h](http://www.opengl.org/registry/#headers)将列出它们），我认为文档也列出了它们。

除此之外，您可能只想检查“法线” 3 维数组是否按照您期望的方式在内存中布局，因为我从未尝试过手动构建一个数组以自己用作纹理（尽管无论如何图像基本上都是字节数据字符串，所以在这种情况下我看不出这是个问题）。

希望这对您有所帮助，或者至少为您指明了正确的方向。祝你好运。

**编辑#1**：我意识到我关于着色器检查的评论不是很完整，因为我没有提到一些 API 调用。这是一个例子：

```
 char * dataBuffer;
      struct _stat fileStat;
      long fLen;
      FILE * vSh;
      FILE * fSh;
      int desc;

      GLint status;
      GLint logLength;

      GLuint vShader = glCreateShader(GL_VERTEX_SHADER);
      //errort = glGetError();
      GLuint fShader = glCreateShader(GL_FRAGMENT_SHADER);
      GLuint program = glCreateProgram();
      /*__________________________________________________*/

      vSh = fopen("vShader.vSh", "r");
      desc = _fileno(vSh);
      _fstat(desc, &fileStat);

      fLen = fileStat.st_size;

      dataBuffer = (char *) calloc((fLen + 1), sizeof(char));
      if (dataBuffer == NULL)
      {
            MessageBox(NULL, "Malloc failure: VS", "Create Program", MB_OK | MB_ICONINFORMATION);
            return 1;
      }

      if(feof(vSh) == 0)
      {
            MessageBox(NULL, "Did not reach EoF for VS", "Create Program", MB_OK | MB_ICONINFORMATION);
            return 2;
      }
      fclose(vSh);

      glShaderSource(vShader, 1, &dataBuffer, NULL);
      glCompileShader(vShader);

      //Error checking
      glGetShaderiv(vShader, GL_COMPILE_STATUS, &status);
      if (status == GL_FALSE)
      {
            glGetShaderiv(vShader, GL_INFO_LOG_LENGTH, &logLength);
            char resultV[logLength+1];
            glGetShaderInfoLog(vShader, logLength, NULL, resultV);

            MessageBox(NULL, resultV, "Vertex Compile Error", MB_OK);
      }
      free(dataBuffer); 
```

我得到我的着色器的方式并不是真正重要的部分，所以希望这不会让你感到困惑。标记的部分`//Error checking`是我在谈论检查着色器是否有错误时的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:42:53.560

亚历克斯，我的朋友，你很亲密！基本上，`glUniform...`那里的每一个电话，不仅仅是`glUniformMatrix...`那些，都需要`1`作为他们的第二个论点。

# php - 我如何强制 laravel 在 sync() 方法中进行批量（多个）插入？

> ID：13433977
> 
> 赞同：6
> 
> 时间：2012-11-17T19:25:02.750
> 
> 标签：php, laravel

当我使用`sync()`laravel 方法时，我会在中间表中执行很多单独的插入查询，如下所示：

```
INSERT INTO `tag_user` (`user_id`, `tag_id`) VALUES ('59', '60')
INSERT INTO `tag_user` (`user_id`, `tag_id`) VALUES ('59', '61') 
```

我希望它像这样进行一次多次插入：

```
INSERT INTO `tag_user` (`user_id`, `tag_id`) VALUES ('59', '60'), ('59', '61') 
```

是否可以？我正在使用 MySql。拥有像方法一样`attach()`接受数组的`detach()`方法会很好。有人这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:17:22.083

是的，几天前我也在做同样的事情，

eloquent 在一个 sql 中进行多次插入。

但请确保所有循环都是相等的列和字段，我试图删除第一次没有值的循环，而 mysql 将无法工作......

例如：

```
array(
    array('name' => 'blah'),
    array('name' => 'blah')
)
User::insert($data) 
```

但如果您想更新现有记录，则需要进行原始查询。

例如：

```
$keyString = '("';
$valString = '("';
foreach ($blah as $k => $v) {
     $keyString .= $k . '", '
} 
```

目标是返回这样的东西

```
$keyString // (name, email, bla, bla)
$valString // ('john doe', 'email@email.com', 'bla', 'bla'), ('someone', 'email@email.com', 'bla', 'bla'), 
```

比

```
DB::query( 'replace into users' . $keyString . ' values ' . $valString ); 
```

确保您使用数组计数来检查是否是逗号的最后一个数组

例如：

```
(++counter === count ? '),' : ')' ; 
```

这需要重构

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:26:23.697

这就是我解决它的方法：

## 我的模型

在我的应用程序中，每个用户都有许多标签（多对多关系）。它被称为[toxi](http://www.pui.ch/phred/archives/2005/04/tags-database-schemas.html)数据库模式。我的用户表称为“用户”，标签表称为“标签”。中间表称为“tag_user”，具有“tag_id”和“user_id”列。

用户型号：

```
class User extends \Eloquent 
{
    public static $timestamps = false;

    public function tags()
    {
          return $this->has_many_and_belongs_to('Models\Tag');
    }
} 
```

标签型号：

```
class Tag extends \Eloquent 
{
    public static $timestamps = false;
} 
```

## 我如何替换`sync()`方法

这就是我强迫 laravel`sync()`使用多个插入的方法：

```
//$currentUser is a model loaded from database
//Like this: $currentUser = Auth::user();

$newLinks = array();
$idsToSync = array();

foreach ($tags as $tag)
{
    array_push($idsToSync, $tag->id);
}

//$currentUser->tags()->sync($idsToSync);

$currentIds = $currentUser->tags()->pivot()->lists('tag_id');

$idsToAttach = array_diff($idsToSync, $currentIds);

foreach ($idsToAttach as $value)
{
    $newLink = array(
                    'user_id' => $currentUser->id,
                    'tag_id' => $value
                     );

    $newLinks[] = $newLink;
}        

if (count($newLinks) > 0)
{
    \DB::table('tag_user')->insert($newLinks);
}

$idsToDetach = array_diff($currentIds, $idsToSync);

if (count($idsToDetach) > 0)
{
    $currentUser->tags()->detach($idsToDetach);
} 
```

此代码执行一次多次插入而不是多次插入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T17:55:51.227

一种解决方法是使用 Laravel`DB::transaction()`并将同步作为闭包放入其中。

# c# - 在 NEST 中“动态”创建过滤器

> ID：13433981
> 
> 赞同：6
> 
> 时间：2012-11-17T19:25:32.797
> 
> 标签：c#, elasticsearch, nest

我有一个有趣的挑战，我认为有一个简单的答案。

我知道当您在语法上执行以下操作时，NEST 过滤器可以正常工作：

```
var andFilter = FilterFactory.AndFilter(
                    FilterFactory.TermFilter("name.first", "shay1"),
                    FilterFactory.TermFilter("name.first", "shay4")
                ); 
```

我的基本服务应该允许调用者传入某种可枚举的项目列表以进行过滤。

我基本上希望能够以编程方式实现这样的事情（过滤器被传递到方法中）：

```
var andFilter = new FilterDescriptor();
foreach (var filter in filters) 
{
     andFilter = filter concatenated to andFilter
} 
```

换句话说，如果我传入一个数组 { {"first.name", "joe"}, {"first.name", "jim"}, {"first.name", "frank"}} 我想产生相当于

```
var andFilter = FilterFactory.AndFilter(
                    FilterFactory.TermFilter("name.first", "joe"), 
                    FilterFactory.TermFilter("name.first", "joe"),
                    FilterFactory.TermFilter("name.first", "frank")
                ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T20:53:49.100

使用基于 lambda 的 DSL，您可以执行以下操作：

```
var termsFilters = from tp in termParameters
                   let field = ToCamelCaseNestedNames(tp.SearchField)
                   let terms = tp.SearchValues
                   select Filter.Terms(field, terms);

var prefixFilters = from tp in prefixParameters
                    let field = ToCamelCaseNestedNames(tp.SearchField)
                    let prefix = tp.SearchValues.FirstOrDefault().ToLowerInvariant()
                    select Filter.Prefix(field, prefix);

var search = client.Search(s => s
    .From(0)
    .Size(20)
    .Filter(f => f.And(termsFilters.Concat(prefixFilters).ToArray()))
); 
```

我认为读起来更好:)

Nest 现在还支持查询，`conditionless`因此如果有`tp.SearchValues`is或is `null`，它将跳过该术语/前缀查询。`empty``all empty strings``tp.SearchField``null or empty`

您可以轻松地恢复此行为：

```
var search = client.Search(s => s
    .Strict()
    .From(0)
    .Size(20)
    .Filter(f => f.And(termsFilters.Concat(prefixFilters).ToArray()))
); 
```

`DslException`如果生成空查询，它将抛出一个。

最后一个注释`client.Search()`将返回 a`QueryResult<dynamic>`如果您可以强烈键入您的文档，那么可以执行 a `client.Search<MyDocument>()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T15:02:11.470

Martijn 的回答是最好的，但我想我会添加一个我创建的对我有用的示例，希望它对其他人有帮助。我构建了一个 BaseQuery 对象列表，然后使用 .ToArray() 方法将其放入我的查询中。

```
 #region build query

    var query = new List<BaseQuery>
                {
                    Query<IAuthForReporting>.Range(r => r.OnField(f => f.AuthResult.AuthEventDate)
                                                    .From(authsByDateInput.StartDate.ToEPCISFormat())
                                                    .To(authsByDateInput.EndDate.ToEPCISFormat()))
                };
    if (authsByDateInput.AuthResult != AuthResultEnum.SuccessOrFailure)
    {
        var success = authsByDateInput.AuthResult == AuthResultEnum.Success;
        query.Add(Query<IAuthForReporting>.Term(t => t.AuthResult.AuthenticationSuccessful, success));
    }
    if (authsByDateInput.ProductID != null)
    {
        query.Add(Query<IAuthForReporting>.Term(t => t.AuthResult.ProductID, authsByDateInput.ProductID.Value));
    }

    if (!authsByDateInput.CountryIDs.IsNullOrEmpty())
    {
        query.Add(Query<IAuthForReporting>.Terms(t => t.AuthResult.Address.CountryID, authsByDateInput.CountryIDs.Select(x=> x.Value.ToString()).ToArray()));
    }
    #endregion

        var result =
            ElasticClient.Search<IAuthForReporting>(s =>
                                                    s.Index(IndexName)
                                                     .Type(TypeName)
                                                     .Size(0)
                                                     .Query(q =>
                                                            q.Bool(b =>
                                                                   b.Must(query.ToArray())
                                                                )
                                                        )
                                                     .FacetDateHistogram(t => t.OnField(f => f.AuthResult.AuthEventDate).Interval(DateInterval.Day))
                ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T14:38:26.237

在对该主题进行了一些研发之后，我能够通过类似于以下内容的方式解决这个问题。我需要在 And 和 Or 支持上做一些额外的工作：

```
 IList<IFilterBuilder> conditions = new List<IFilterBuilder>();
        if (termParameters != null)
            foreach (var termParameter in termParameters)
                conditions.Add(FilterFactory.TermsFilter(ToCamelCaseNestedNames(termParameter.SearchField), termParameter.SearchValues));

        if (prefixParameters != null)
            foreach (var prefixParameter in prefixParameters)
                conditions.Add(FilterFactory.PrefixFilter(ToCamelCaseNestedNames(prefixParameter.SearchField), prefixParameter.SearchValues.First().ToLowerInvariant()));

        var filters = FilterFactory.AndFilter();
        filters.Add(FilterFactory.AndFilter(conditions.ToArray()));

        MatchAllQueryBuilder matchAllQueryBuilder = new MatchAllQueryBuilder();
        FilteredQueryBuilder filteredQueryBuilder = new FilteredQueryBuilder(matchAllQueryBuilder, filters);
        SearchBuilder searchBuilder = new SearchBuilder();
        searchBuilder.Query(filteredQueryBuilder);
        searchBuilder.Size(maxResults); 
```

# c# - 在一次提交中创建多条记录

> ID：13433983
> 
> 赞同：2
> 
> 时间：2012-11-17T19:25:43.407
> 
> 标签：c#, asp.net-mvc, model-view-controller, model, submit

我对 MVC 3 很陌生，所以我不知道这是否可能。如果不是，最好的方法是什么：

我有一个 Model1 有很多属性和一个创建视图。在这个页面中，人们填写所需的数据并提交。但我的问题是 Model1 还包含 SubModel1，它是另一个模型（以及数据库中的另一个表）。我想在创建页面上提供按钮以通过弹出的 CSS 表单“即时”创建一些 SubModel1，并且在提交 SubModel1 时，使用 SubModel1 列表更新 Model1 创建页面，但是：

1.  由于当前未保存 Model1，当在 CSS 弹出表单上完成提交时，我将在哪里保存子模型？我可以将它添加到 Model1 模型中吗？如果是这样，怎么做？
2.  当我返回创建页面时，我需要做什么来更新并显示 SubModel1 名称，例如在列表中。
3.  当我在Model1上提交时，我只需要保存Model1，其余的会自动保存还是我需要自己在控制器中以正确的顺序完成所有保存？

对不起，如果这是新问题，但它会对我有很大帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:00:32.937

就像很多人说的那样，没有愚蠢的问题。

您在这里暴露的问题经常发生，解决方案有时比我们想象的要简单。

实际实现您想要做的事情的方法不止一种，但在我看来，为了获得更流畅的体验，使用 JavaScript 显示 PopUp 并将子项添加到 Model1 是最佳选择。

您的 SubModel1 项目不应立即保存在您的数据库中，原因很简单，您的 Model1 可能不会被提交。

在这种情况下，您的 CSS 弹出窗口应该只是页面中存在的表单（div 或其他），并使用 javascript 向 Model1 项目添加新行。

因此，当您提交 Model1 时，它将包含所有修改，包括新的 SubModel1 项。

[有一个命名约定用于在提交时允许正确序列化表单。](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

通过坚持这个绑定，这将允许你在你的控制器中等待你的 Model1。

```
[HttpPost]
public ActionResult MyPostAction(Model1 item)
{
  //do some verification here
  if ( ModelState.IsValid )
  {
    //save your Model1 data
    foreach( SubModel1 subitem in item.SubItems )
    {
      //Save your SubItems here
    }
  }
  return RedirectToAction("Index");
} 
```

您如何保存您的项目和子项目取决于您如何访问您的数据（实体框架、linq-to-sql、经典 ADO.NET 或任何适合您需要的东西）

***更多细节：一些关于如何添加新元素的例子***

这是您需要添加元素的那种 javascript（这里我使用了一个表格来显示子项）

对于此示例，SubItems 数组的名称如下：

```
SubItems[0-based index].{SubItem property name} 
```

因此我知道当我添加一个新项目时，新名称将是：

```
SubItems[SubItems.length].name
SubItems[SubItems.lenght].description 
```

提交后，服务器会将名称绑定到模型中的属性。

您可以在[JsFiddle上看到这一点](http://jsfiddle.net/Mj7kg/)

```
$(document).ready(function () {
    $("#TestButton").click(function () {
        var $parent = $("#SubItems");
        var $newItem = $parent.find("tr:last").clone();

        $parent = $parent.find("tr:last").parent();
        var numElem = $parent.find("tr").length;

        $newItem.find('[name$="description"]').attr("name", "SubItems[" + numElem + "].description");
        $newItem.find('[name$="name"]').attr("name", "SubItems[" + numElem + "].name");

        $parent.append($newItem);
    });
}); 
```

# javascript - Codeigniter 2.1，Jquery - 500 内部服务器错误

> ID：13433984
> 
> 赞同：1
> 
> 时间：2012-11-17T19:25:48.383
> 
> 标签：javascript, jquery, codeigniter, codeigniter-2

当我尝试通过 JQ $.post 函数访问**global_info**控制器时，我遇到了 500 内部服务器错误，这仅发生在此函数中。

CI控制器代码：

```
function gi_get_ad_payment_code()
        {
            $q = $this->db->get_where('code_payment', array('code' => $_POST['code']));
            if ($q->num_rows() == 0 ){
                show_error('Whoops, no results :(');
            } else
            {
                 $q = $q->row();
                 echo $time = substr($q->code, 12, 2);
            } 
```

JQ代码：

```
var forma = $('form#mali_oglas'),
pomoc = $('div[role=pomoc]'),
div = $('.mali_oglas_pomoc'),
input = forma.find('input, textarea'),
code = forma.find('#code'),
cct = $.cookie('csrf_token_name');

code.on('focusout', function(){
    var url = '<?php echo base_url() ?>global_info/gi_get_ad_payment_code',
    data = $(this).val();
    $.post(url, {code : data, 'csrf_token_name': cct}, function(){
        console.log(code);
        $('.mali_oglas_img_paid').slideDown('slow');
        code.after('<input type="hidden" name="time" value="'+ data +'" />');
        code.after('<input type="hidden" name="paid" value="1" />');
    });
}); 
```

当我尝试其他一些控制器时，它工作正常（我也在其他地方使用 $.post 控制器不是**global_info**并且一切正常）。这里似乎有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:32:33.250

我曾经在 CI 中也遇到过这个问题，基本上它与控制器文件的编码（UTF-8、ANSI、...）有关。我还重新创建了解决我的问题的控制器。

顺便说一句，在您的视图中制作 URL 的一种更简洁的方法是`<?php echo base_url('global_info/gi_get_ad_payment_code'); ?>`

# ruby-on-rails-3 - rails generate 控制器停止工作

> ID：13433985
> 
> 赞同：2
> 
> 时间：2012-11-17T19:25:52.437
> 
> 标签：ruby-on-rails-3

我看过两个[“rails generate controller”都没有创建控制器](https://stackoverflow.com/questions/10134881/why-rails-generate-controller-is-not-working)，[rails 3 generate controller 不起作用](https://stackoverflow.com/questions/13369111/rails-3-generate-controller-not-working)，也没有答案。

我去了 ruby​​onrails freenode 频道，也没有答案。

我正在阅读 Michael Hartl 的教程 ( [http://ruby.railstutorial.org/chapters](http://ruby.railstutorial.org/chapters) )，我已经进入第 8 章。前一天晚上一切正常，然后第二天早上，运行“rails generate controller Sessions” --no-test-framework" 不输出任何内容，也不创建任何文件。我试过 -p （假装）和 --trace 来获得任何输出，什么都没有。在不同的应用程序文件夹中运行相同的命令，它工作得非常好。我试过“脚本/导轨”，但还是一样。

但是，“rails generate integration_test authentication_pages”可以完美运行。

有谁知道这个问题的原因以及如何解决它？

这是我的宝石要点的链接：git@gist.github.com:3e2e6beacbef836a07cb.git | [https://gist.github.com/3e2e6beacbef836a07cb](https://gist.github.com/3e2e6beacbef836a07cb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T23:55:01.533

好的，我想通了。我正在使用 RubyMine 并且 ruby​​onrails 频道上的某个人提到某些东西可能会覆盖控制器生成器，我又看了一遍。似乎我从 RubyMine 中（无意中）创建了一个控制器生成器，这就是覆盖原始控制器生成器的原因。由于是空的，它以退出代码 0 运行并且没有生成任何内容。删除它解决了问题 -

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-08T22:19:14.753

@史蒂夫穆斯塔法

谢谢你张贴。我还生成了一个控制器并且遇到了同样的问题。

我刚刚删除了文件，它又开始工作了。

谢谢！

# php - 使用正则表达式查找函数的结尾

> ID：13433991
> 
> 赞同：1
> 
> 时间：2012-11-17T19:26:25.353
> 
> 标签：php, regex, preg-replace

我需要一种在 PHP 中使用正则表达式找到方法/函数结尾的方法。但我想知道这是否可能。

一个函数显然总是以右括号结尾`}`，但也是如此`if/else`，语句`for`等等`while`......

有没有办法用正则表达式查找和替换函数的最后一个括号？

所以我应该能够替换以下内容：

```
public function func1 ( $someParam )
{
    if ( $someParam ) {

    }
    else {

    }
} 
```

对此：

```
public function func1 ( $someParam )
{
    if ( $someParam ) {

    }
    else {

    }

}]; // <-- note the square bracket and semi-colon 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:38:05.293

正则表达式是不适合这项工作的工具。正则表达式将无法处理所有各种嵌套级别以及您可能在函数中找到的大量内容。正如 mario 和 Matt Lo 在上述评论中所建议的那样，您需要使用解析文本并确定代码真实结构的东西。

PHP 不是一种应该用正则表达式解析的常规语言，它在 BNF 中，应该这样解析。（我的意思是，你可以使用正则表达式，但你正在为自己设置一个糟糕的时间。如果你喜欢的话，你也可以用小猫来命名你的所有变量。）

发布的[tokenizer](https://github.com/nikic/PHP-Parser) mario 可能是您最好的选择，因为它将代码移动到语法树中，然后您可以将树转换回代码。如果您在使用它时遇到问题，请务必跟进一个新问题。我相信那个图书馆的作者仍然活跃在这个网站上。