# StackOverflow 问答 15836000-15836999

# android - 从数据库中获取值并在文本视图中显示？

> ID：15836000
> 
> 赞同：0
> 
> 时间：2013-04-05T14:04:14.760
> 
> 标签：android

```
package as.d.d;

import java.util.List;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class add extends Activity implements OnClickListener{

    Button b1,b2;
    EditText e2,e3;
    TextView t1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add);

        b1=(Button)findViewById(R.id.button1);
        b2=(Button)findViewById(R.id.button2);
        e2=(EditText)findViewById(R.id.editText2);
        e3=(EditText)findViewById(R.id.editText3);
        t1=(TextView)findViewById(R.id.AtextView1);

        b1.setOnClickListener(this);
        b2.setOnClickListener(this);

        DatabaseHandler db = new DatabaseHandler(this);
        List<StudentInfo> studentInfo = db.getAllStudentInfo();

        for (StudentInfo cn : studentInfo){

            t1.setText("Id:"+(cn.getID()+1));
        }
   }

    @Override
    public void onClick(View v) {

        if(v==b2){
            startActivity(new Intent(add.this, FdActivity.class));
        }
        else if(v==b1){

            String s2=e2.getText().toString();
            String s3=e3.getText().toString();

            if(s2.trim().equals("")||s3.trim().equals("")){

                Toast.makeText(getApplicationContext(), "Please Submit Student Information",Toast.LENGTH_SHORT).show();

                }   

            else{
                DatabaseHandler db = new DatabaseHandler(this);
                Log.d("Insert: ", "Inserting ..");
                db.addContact(new StudentInfo(s2,s3));
                Log.d("Reading: ", "Reading all contacts..");
                List<StudentInfo> studentInfo = db.getAllStudentInfo();
                for (StudentInfo cn : studentInfo){
                    t1.setText("Id:"+(cn.getID()+1));
            }}}}} 
```

在这个添加类中，我使用 Textview 自动生成学生 ID（数字（int）和两个文本字段，通过按下按钮将学生姓名和电话号码提交到数据库中。这里学生 ID、姓名和电话号码已成功提交。

在 addmark 类中，我使用自动完成文本视图来显示我从添加类提交的名称。当我选择一个名称假设 Farhan（我已经提交到数据库并且 id 是 4 并且电话号码是 99876 存储在数据库中）然后我想要在两个 textview(TextView t1,t2;) 中查看 id 和电话号码？

```
package as.d.d;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.TextView;
import android.widget.Toast;

public class addmark extends Activity{

    AutoCompleteTextView a1;
    TextView t1,t2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addmark);

        a1=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        t1=(TextView)findViewById(R.id.amtextView1);
        t2=(TextView)findViewById(R.id.amtextView2);

        DatabaseHandler db = new DatabaseHandler(this);

        final List<StudentInfo> studentInfo = db.getAllStudentInfo();

        final ArrayList<String> s1 = new ArrayList<String>();

        for (StudentInfo cn : studentInfo) {
            s1.add(cn.getName());

        }
        ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line,s1); 

        a1.setThreshold(1); 
        a1.setAdapter(adapter);

        a1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
}
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:51:28.090

首先，根据不独特的东西来选择学生是个坏主意。您想在自动完成文本视图中选择名称，然后根据该名称显示电话号码和 ID。想象一下，如果您有 2 个或更多同名的学生（不排除）会发生什么。您应该使用在数据库中唯一定义记录的某些内容（或某些内容的组合）填充您的自动完成电视。至于如何实现这一点，只需验证您的控件何时失去焦点，然后将 2 textViews 设置为您需要的值。

```
a1.setOnFocusChangeListener(new OnFocusChangeListener() {          

    public void onFocusChange(View v, boolean hasFocus) {
        if(!hasFocus)
           //set the textViews with the values you need 
    }
}); 
```

同样，请记住，不建议根据可以在数据库中重复的内容来选择您的 id 和电话号码（两者都可以是您的数据库表的唯一标识符）。

# svn - LDAP 回退到使用 apache2 的 svn 的基于文件的身份验证

> ID：15836003
> 
> 赞同：2
> 
> 时间：2013-04-05T14:04:26.590
> 
> 标签：svn, authentication, ldap, apache2.2, mod-dav-svn

嗨，

我实现了一个 SVN 服务器，它通过 LDAP 协议针对 AD 对用户进行身份验证。我使用 apache2 版本 2.2.14 来访问存储库 (HTTP)。到目前为止，这有效。

如果用户无法通过 LDAP 进行身份验证（因为未在 AD 中定义），我想增强我的配置以执行简单的“基于 svn 文件”的身份验证。我尝试这种方式：

**我的根位置：**

```
<Location />      
  AuthType basic
  AuthName "<DNS-Name-of-Server>"

  # for LDAP only this is enough (works for me)
  #AuthBasicProvider ldap
  #AuthzLDAPAuthoritative on

  # but I want this...
  # these two lines should make it, as I understand the Apache2 documentation
  AuthBasicProvider ldap file
  AuthzLDAPAuthoritative off

  AuthLDAPURL "ldap://my.server.com:3268/dc=mydomain,dc=com?sAMAccountName" NONE
  AuthLDAPBindDN "CN=serviceusers,OU=Users,DC=mydomain,DC=com"
  AuthLDAPBindPassword "secret"

  AuthUserFile /etc/svn/svn-auth # contains svn users, that are not listed in AD
  AuthzSVNAccessFile /etc/svn/svn-access # handles path-based authorisation

  Require valid-user
</Location> 
```

**许多子位置之一（不同的存储库）：**

```
<Location /repos1>
  DAV svn
  SVNPath /opt/svn/repos1

  # again:
  AuthUserFile /etc/svn/svn-auth # contains svn users, that are not listed in AD
  AuthzSVNAccessFile /etc/svn/svn-access # handles path-based authorisation

  Require valid-user
</Location> 
```

那是行不通的。重新加载 apache2 后，我仍然能够对 AD 中列出的用户进行身份验证，但回退到基于文件的身份验证不起作用。Apache-Module 已启用（mods-enabled/authn_file.load 存在）

也许还有一个提示：此配置还允许通过 HTTP 和 SVN 协议实现多存储库访问方法。

提前感谢您的回复。

最好的问候 ITL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T09:43:53.637

我的设置与此类似，并且可以正常工作，也许您应该尝试按照此顺序移动，并配置最大 httpd 调试日志级别。

```
<Location /repos1>
  Require valid-user
  DAV svn
  SVNPath /opt/svn/repos1

  # again:
  AuthzSVNAccessFile /etc/svn/svn-access # handles path-based authorisation
  # Fallback:
  AuthUserFile /etc/svn/svn-auth # contains svn users, that are not listed in AD create using htpasswd

</Location> 
```

# c# - 源文件“FilePathHere”无法打开未指定错误.NET 4.0

> ID：15836007
> 
> 赞同：0
> 
> 时间：2013-04-05T14:04:33.537
> 
> 标签：c#, .net

我是 .NET 框架的新手，正在查看一个简单的联系表单，当单击按钮并遇到问题时，该表单应提交电子邮件。

首先，我开始了一个新项目（使用母版页，如果这很重要）并将 default.aspx 的名称更改为 SendMail.aspx。然后，我只是将代码复制并粘贴到我创建的项目中。

我在 SendMail 的标记中收到多个错误和警告，告诉我，例如`'Element' Button is not a known element. This can occur if there is a compilation error in the web site for the web.config file is missing`. web.config 文件没有丢失。但是，对于页面上的每个 asp 控件，我都会收到警告

我还收到一个编译器错误，它告诉我无法打开源文件。然后编译器列出名称为 Default.aspx.cs 的文件路径。这是我在 Visual Studio 中更改的文件名，但编译器仍在尝试读取该文件名。

这是怎么回事，所以我可以在将来解决这些问题？

标记：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="SendMail.aspx.cs" Inherits="SmtpExample._Default" %>
<asp:Content runat="server" ContentPlaceHolderID="HeadContent">
<asp:Panel ID="Panel1" runat="server" DefaultButton="btnSubmit">
    <p>
        Please Fill the Following to Send Mail.</p>
    <p>
        Your name:
        <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server" ErrorMessage="*"
            ControlToValidate="YourName" ValidationGroup="save" /><br />
        <asp:TextBox ID="YourName" runat="server" Width="250px" /><br />
        Your email address:
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="*"
            ControlToValidate="YourEmail" ValidationGroup="save" /><br />
        <asp:TextBox ID="YourEmail" runat="server" Width="250px" />
        <asp:RegularExpressionValidator runat="server" ID="RegularExpressionValidator23"
            SetFocusOnError="true" Text="Example: username@gmail.com" ControlToValidate="YourEmail"
            ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" Display="Dynamic"
            ValidationGroup="save" /><br />
        Subject:
        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="*"
            ControlToValidate="YourSubject" ValidationGroup="save" /><br />
        <asp:TextBox ID="YourSubject" runat="server" Width="400px" /><br />
        Your Question:
        <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="*"
            ControlToValidate="Comments" ValidationGroup="save" /><br />
        <asp:TextBox ID="Comments" runat="server" 
                TextMode="MultiLine" Rows="10" Width="400px" />
    </p>
    <p>
        <asp:Button ID="btnSubmit" runat="server" Text="Send" 
                    OnClick="Button1_Click" ValidationGroup="save" />
    </p>
</asp:Panel>
<p>
    <asp:Label ID="DisplayMessage" runat="server" Visible="false" />
</p>  
</asp:Content>
<asp:Content ID="Content1" runat="server" contentplaceholderid="MainContent">
</asp:Content> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace SmtpExample
{
    public partial class _SendMail : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
        protected void SendMail()
        {
            // Gmail Address from where you send the mail
            var fromAddress = "Gmail@gmail.com";
            // any address where the email will be sending
            var toAddress = YourEmail.Text.ToString();
            //Password of your gmail address
            const string fromPassword = "Password";
            // Passing the values and make a email formate to display
            string subject = YourSubject.Text.ToString();
            string body = "From: " + YourName.Text + "\n";
            body += "Email: " + YourEmail.Text + "\n";
            body += "Subject: " + YourSubject.Text + "\n";
            body += "Question: \n" + Comments.Text + "\n";
            // smtp settings
            var smtp = new System.Net.Mail.SmtpClient();
            {
                smtp.Host = "smtp.gmail.com";
                smtp.Port = 587;
                smtp.EnableSsl = true;
                smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
                smtp.Credentials = new NetworkCredential(fromAddress, fromPassword);
                smtp.Timeout = 20000;
            }
            // Passing values to smtp object
            smtp.Send(fromAddress, toAddress, subject, body);
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            try
            {
                //here on button click what will done 
                SendMail();
                DisplayMessage.Text = "Your Comments after sending the mail";
                DisplayMessage.Visible = true;
                YourSubject.Text = "";
                YourEmail.Text = "";
                YourName.Text = "";
                Comments.Text = "";
            }
            catch (Exception) { }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:10:05.393

您将元素放置在 ContentPlaceHolderID="HeadContent" 它必须在 contentplaceholderid="MainContent"

> 更新

我看到您重命名了 default.aspx 文件以发送 SendMail.aspx，这将导致部分类 default.aspx.cs 和 default.aspx.design.cs 出现错误。这样做创建新页面 SendMail.aspx 并将您的代码复制到 ContentPlaceHolderID="HeadContent"，右键单击页面 i 解决方案资源管理器单击设置为起始页面

# c# - 如何在FusionCharts中绘制多系列柱形图

> ID：15836010
> 
> 赞同：2
> 
> 时间：2013-04-05T14:04:44.487
> 
> 标签：c#, javascript, fusioncharts

我正在使用 asp.net c# 开发一个 Web 应用程序，并使用 FusionCharts 绘制图形。我需要绘制一个多系列柱形图，我尝试使用以下代码，但徒劳无功

```
<div id="chartContainer"></div>
<script type="text/javascript">

        var myChart = new FusionCharts("Column3D", "myChartId", "400", "300");
        myChart.setXMLUrl("Data8.xml");
        myChart.render("chartContainer"); 

    </script>
Data8.xml
----------

<chart caption='Sales by Product' numberPrefix='$' formatNumberScale='1' rotateValues='1' placeValuesInside='1' decimals='0' ><categories>
  <category label='Product A' />
  <category label='Product B' />
  <category label='Product C' />
  <category label='Product D' />
  <category label='Product E' />
  <category label='Product F' />
</categories><dataset seriesName='Current Year'>
  <set value='567500' />
  <set value='815300' />
  <set value='556800' />
  <set value='734500' />
  <set value='676800' />
  <set value='648500' />
</dataset><dataset seriesName='Previous Year'>
  <set value='547300' />
  <set value='584500' />
  <set value='754000' />
  <set value='456300' />
  <set value='754500' />
  <set value='437600' />
</dataset></chart> 
```

请帮我做到这一点...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:31:07.357

尝试修改：

```
 var myChart = new FusionCharts("Column3D", "myChartId", "400", "300"); 
```

和：

```
 var myChart = new FusionCharts("MSColumn3D", "myChartId", "400", "300"); 
```

`Column3D`用于单系列，`MSColumn3D`用于多系列。

# jquery - 带有可排序表的克隆 div 允许拖动但不能排序

> ID：15836011
> 
> 赞同：1
> 
> 时间：2013-04-05T14:04:45.317
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

当我需要动态添加 div 块时，我有一个 Web 表单。在 div 块内有一个可排序的项目表。我正在通过在最后一个 div 上调用 clone() 来添加 div 及其子项，根据需要修复输入（代码承认，因为它与测试无关）。并将新克隆的 div 附加到最后一个 div 的父级。但是，无论我尝试什么，我都无法让新克隆的带有子表的 div 像它的前身一样可排序。

我已经设置了[以下测试](http://jsfiddle.net/E2tTK/)，显示了 jsFiddle 的问题。

对于那些看不到 jsFiddle 的人，这里有一些相关的尝试：

HTML部分：

```
<div>
    <div class="inner">
        <input name="one" value="something" />
        <table>
            <tbody>
                <tr>
                    <td>First</td>
                    <td>
                        <input name="row1" value="1" />
                    </td>
                </tr>
                <tr>
                    <td>Second</td>
                    <td>
                        <input name="row2" value="2" />
                    </td>
                </tr>
                <tr>
                    <td>Third</td>
                    <td>
                        <input name="row3" value="3" />
                    </td>
                </tr>
                <tr>
                    <td>Fourth</td>
                    <td>
                        <input name="row4" value="4" />
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <br/>
</div>
<input type="button" id="button" value="Add" /> 
```

和 jQuery 部分

```
$(document).ready(function () {
    $('div.inner table tbody').sortable({
        stop: function () { /* Some code to reset the row numbers */
        }
    });

    $('#button').click(function(event) {
        var newInnerDiv = $('div.inner:last').clone(true,true);

        // clean up the inputs

        // Append the new Item Type to the parent of the existing one
        $(newInnerDiv).appendTo($('div.inner:last').parent());

        // renumber inputs

        // Even if I make this re-sortable, the new table doesn't work
        $(newInnerDiv).sortable();
    });
}); 
```

有没有办法重新应用新克隆表的可排序性？我们正在使用 jQuery 1.7.1 和 jQuery UI 1.8.13。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:18:55.227

克隆*没有*数据和事件的表（用事件克隆它意味着新表的行要排序到*旧*表中），然后使表可排序而不是原始 div。（为方便起见，您还可以链接您的方法。）

```
 var newInnerDiv = $('div.inner:last').clone(false,false)
        .appendTo($('div.inner:last').parent())
        .find('tbody').sortable(); 
```

[http://jsfiddle.net/mblase75/2d6G9/](http://jsfiddle.net/mblase75/2d6G9/)

您也可以替换`.appendTo($('div.inner:last').parent())`为`.insertAfter('div.inner:last')`几乎[相同的结果](http://jsfiddle.net/mblase75/2d6G9/2/)（您也有一个`<br>`，它会根据您使用的代码改变位置）。

# php - CakePHP：如何在连接表中插入一行

> ID：15836022
> 
> 赞同：1
> 
> 时间：2013-04-05T14:05:33.647
> 
> 标签：php, mysql, cakephp, cakephp-2.0

我有两个模型/表，它们具有“拥有并属于许多”（[HABTM](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-habtm)）关系：`Qsets`和`Questions`

我可以手动删除行，如下所示：

```
$this->Qset->QsetsQuestion->deleteAll( array("QsetsQuestion.qset_id"=>$qset_id, "QsetsQuestion.question_id"=>$question_id), false ); 
```

**如何在连接表中插入新行？** 我找到的用于处理 HABTM 数据的任何文档都专门针对表单，但我的数据并非来自表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:27:34.327

是这样的，我想：

```
$data = array(
    [Question] => Array
        (
            [id] => $question_id
        )
    [Qset] => Array
        (
            [id] => $qset_id
        )
);

$this->Question->saveAll($data); 
```

# gruntjs - Lineman - 运行“监视”任务因警告而中止

> ID：15836025
> 
> 赞同：1
> 
> 时间：2013-04-05T14:05:36.743
> 
> 标签：gruntjs

我正在尝试运行 Lineman ( [https://github.com/testdouble/lineman](https://github.com/testdouble/lineman) )，当它到达“watch”任务时，它会抛出一个警告，然后导致应用程序中止。还有其他人遇到这个吗？

... 错误 ...

运行“监视”任务等待...警告：path.join 的参数必须是字符串使用 --force 继续。

由于警告而中止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:45:08.423

发生这种情况是因为我正在运行 node v. 0.10.3 并且最新版本存在一些问题。在我降级到 0.8.x 后它开始工作。

# c# - C# WinForm - 加载屏幕

> ID：15836027
> 
> 赞同：14
> 
> 时间：2013-04-05T14:05:42.397
> 
> 标签：c#, screen, loading, form-load

我想问一下如何制作一个加载屏幕（只是一张图片或其他东西），在程序加载时出现，在程序加载完成时消失。

在更高级的版本中，我看到了显示的进程栏 (%)。你怎么能有它，你如何计算要显示的百分比？

我知道有一个 Form_Load() 事件，但我没有看到 Form_Loaded() 事件，或者在任何地方都没有看到 % 作为属性/属性。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-05T14:09:22.863

您只需要创建一个表单作为启动屏幕并在您开始显示登录页面之前显示它，并在登录页面加载后关闭此启动页面。

```
using System.Threading;
using System.Windows.Forms;

namespace MyTools
{
    public class SplashForm : Form
    {
        //Delegate for cross thread call to close
        private delegate void CloseDelegate();

        //The type of form to be displayed as the splash screen.
        private static SplashForm splashForm;

        static public void ShowSplashScreen()
        {
            // Make sure it is only launched once.    
            if (splashForm != null) return;
            splashForm = new SplashScreen();
            Thread thread = new Thread(new ThreadStart(SplashForm.ShowForm));
            thread.IsBackground = true;
            thread.SetApartmentState(ApartmentState.STA);
            thread.Start();
        }

        static private void ShowForm()
        {
            if (splashForm != null) Application.Run(splashForm);
        }

        static public void CloseForm()
        {
            splashForm?.Invoke(new CloseDelegate(SplashForm.CloseFormInternal));
        }

        static private void CloseFormInternal()
        {
            if (splashForm != null)
            {
               splashForm.Close();
               splashForm = null;
            };
        }
    }
} 
```

主程序功能如下所示：

```
[STAThread]
static void Main(string[] args)
{
    SplashForm.ShowSplashScreen();
    MainForm mainForm = new MainForm(); //this takes ages
    SplashForm.CloseForm();
    Application.Run(mainForm);
} 
```

不要忘记在主表单中添加表单加载事件：

```
private void MainForm_Load(object sender, EventArgs e)
{
    this.WindowState = FormWindowState.Minimized; 
    this.WindowState = FormWindowState.Normal;
    this.Focus(); this.Show();
} 
```

隐藏启动画面后，它将把主窗体带到前台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-25T09:19:31.847

我发现的所有其他解决方案都有问题，特别是那些在 gui 线程之外的其他线程中显示飞溅的解决方案，特别是在 Citrix 上。

例子：

*   飞溅永远不会关闭
*   在错误的显示器上闪现
*   启动画面正常，但主窗体显示在所有其他窗口后面

我最终得到了这个，它似乎运作良好。

飞溅形式：

```
public partial class Splash : Form
{
    public Splash()
    {
        InitializeComponent();
    }

    private void pictureBox1_Click(object sender, EventArgs e)
    {

    }
} 
```

飞溅形式续：

```
partial class Splash
{
    private System.ComponentModel.IContainer components = null;

    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    private void InitializeComponent()
    {
        System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Splash));
        this.pictureBox1 = new System.Windows.Forms.PictureBox();
        ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit();
        this.SuspendLayout();
        // 
        // pictureBox1
        // 
        this.pictureBox1.Dock = System.Windows.Forms.DockStyle.Fill;
        this.pictureBox1.Image = ((System.Drawing.Image)(resources.GetObject("pictureBox1.Image")));
        this.pictureBox1.Location = new System.Drawing.Point(0, 0);
        this.pictureBox1.Name = "pictureBox1";
        this.pictureBox1.Size = new System.Drawing.Size(512, 224);
        this.pictureBox1.TabIndex = 0;
        this.pictureBox1.TabStop = false;
        this.pictureBox1.Click += new System.EventHandler(this.pictureBox1_Click);
        // 
        // Splash
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(512, 224);
        this.ControlBox = false;
        this.Controls.Add(this.pictureBox1);
        this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
        this.Name = "Splash";
        this.ShowIcon = false;
        this.ShowInTaskbar = false;
        this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen;
        this.Text = "Splash";
        ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).EndInit();
        this.ResumeLayout(false);

    }

    #endregion

    private System.Windows.Forms.PictureBox pictureBox1;
} 
```

主要的：

```
[STAThread]
static void Main(string[] _args)
{
    ShowSplash();
    MainForm mainForm = new MainForm();
    Application.Run(mainForm);
}

private static void ShowSplash()
{
    Splash sp = new Splash();
    sp.Show();
    Application.DoEvents();

    System.Windows.Forms.Timer t = new System.Windows.Forms.Timer();
    t.Interval = 1000;
    t.Tick += new EventHandler((sender, ea) =>
    {
        sp.BeginInvoke(new Action(() =>
        {
            if (sp != null && Application.OpenForms.Count > 1)
            {
                sp.Close();
                sp.Dispose();
                sp = null;
                t.Stop();
                t.Dispose();
                t = null;
            }
        }));
    });
    t.Start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T17:00:51.730

如果您要在应用程序中多次显示 SplashForm，请务必将 splashForm 变量设置为 null，否则会出现错误。

```
static private void CloseFormInternal()
{
    splashForm.Close();
    splashForm = null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-23T05:02:40.190

这是打开应用程序时执行加载屏幕的一种更简单的方法。

```
async private void Form1_Shown(object sender, EventArgs e)
            {
                pictureBox1.Visible = true;
                await Task.Delay(2000);
                pictureBox1.Visible = false;

            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-28T10:25:14.550

你也可以使用这个...（表单的名称是“Home.cs”）

```
await Task.Delay(10000);
this.Hide();          
Home h1 = new Home();
h1.ShowDialog(); 
```

并在表单的属性中：`Windowstate: Normal; Controlbox: False; ImeMode: NoControl`

# node.js - 将lessjs与express 3一起使用

> ID：15836031
> 
> 赞同：0
> 
> 时间：2013-04-05T14:05:57.523
> 
> 标签：node.js, express, less

我是 nodejs 的新手以及与之相关的一切。我正在使用带有节点 js 的 twitter-bootstrap 框架。我运行了以下命令 -

```
npm install -g twitter-bootstrap-node
twitter-bootstrap create myproject 
```

默认情况下这是使用 express 2，所以我升级到 express 3。从那时起，当我开始 express 时出现以下错误-

```
$ node app
Warning: express.createServer() is deprecated, express
applications no longer inherit from http.Server,
please use:

  var express = require("express");
  var app = express();

/Users/tusharmathur/Pebbles/app.js:17
  app.use(express.compiler({
                  ^
TypeError: Object function createApplication() {
  var app = connect();
  utils.merge(app, proto);
  app.request = { __proto__: req };
  app.response = { __proto__: res };
  app.init();
  return app;
} has no method 'compiler'
    at Function.app.configure.app.use.express.errorHandler.dumpExceptions (/Users/tusharmathur/Pebbles/app.js:17:19)
    at Function.app.configure (/Users/tusharmathur/Pebbles/node_modules/express/lib/application.js:395:61)
    at Object.<anonymous> (/Users/tusharmathur/Pebbles/app.js:12:5)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:903:3 
```

这是我的 app.js 文件

```
/**
 * Module dependencies.
 */

var express = require('express'),
  routes = require('./routes');

var app = module.exports = express.createServer();

// Configuration

app.configure(function() {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.compiler({
    src: __dirname + '/public',
    enable: ['less']
  }));
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));

});

app.configure('development', function() {
  app.use(express.errorHandler({
    dumpExceptions: true,
    showStack: true
  }));
});

app.configure('production', function() {
  app.use(express.errorHandler());
});

// Compatible

// Now less files with @import 'whatever.less' will work(https://github.com/senchalabs/connect/pull/174)
var TWITTER_BOOTSTRAP_PATH = './vendor/twitter/bootstrap/less';
express.compiler.compilers.less.compile = function(str, fn) {
  try {
    var less = require('less');
    var parser = new less.Parser({
      paths: [TWITTER_BOOTSTRAP_PATH]
    });
    parser.parse(str, function(err, root) {
      fn(err, root.toCSS());
    });
  } catch (err) {
    fn(err);
  }
}

// Routes

app.get('/', routes.index);

app.listen(3000, function() {
  console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:40:42.810

正如消息所说，Express 不再具有此编译器消息。您应该使用另一个允许您构建 Less 文件的中间件。一个例子是[less.js-middleware](https://github.com/emberfeather/less.js-middleware)。

安装它 ( `npm install less-middleware`) 后，您可以按照文档中的说明使用它：

```
var lessMiddleware = require('less-middleware');    
var app = express.createServer();

app.configure(function () {    
    app.use(lessMiddleware({
        src: __dirname + '/public',
        compress: true
    }));
}); 
```

# android - 选择任何 RTL（例如：阿拉伯语）语言时，复选框不会出现在 Android 的选中文本视图中

> ID：15836032
> 
> 赞同：0
> 
> 时间：2013-04-05T14:05:58.127
> 
> 标签：android, android-layout, android-view

我的布局中有一个 CheckedTextBox 视图。When the locale selected is English, text appears at the Left side and Check box at the right side and everything works fine.

但是当我将语言环境选择为阿拉伯语时，阿拉伯语字符串会显示在右侧，但复选框不会显示在左侧或右侧。

有没有人遇到过类似的问题，如果有知道的请告诉我解决方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:12:26.340

I can't comment yet so I am entering this here. Make sure your layout_width is not being affected by the 'size' of the arabic text. i.e. if you are using a certain layout_width and it works with english, arabic for example might require a different point size. Something to consider...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-22T10:13:42.007

我和你有同样的问题，有时复选框丢失了。我发现设置`singleLine`为`false`（在我的情况下`maxlines = 2`也是如此）起到了作用。

您使用哪个版本的 Android？

# iphone - 如何用xib创建UIView子类？

> ID：15836034
> 
> 赞同：5
> 
> 时间：2013-04-05T14:06:01.050
> 
> 标签：iphone, ios, xcode, uiview

我想经常创建 UIView。并在所有视图控制器中使用该视图。如何使用 xib 创建 UIView 子类并在所有视图控制器中使用？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T14:12:34.573

1.  You need to create your subclass: `File -> New -> File -> Cocoa Touch -> Objective C-class -> Subclass of Target Class Type` (UIView on your case)
2.  Then, you create the `xib` for it: `File > New > User Interface > View` (name your xib)
3.  Now go and design your `xib` on the `Interface Builder`.
4.  Last thing you should do is to change your view's *Class Type* in `Identity Inspector`. Your custom xib will be linked with your custom class.

Let me know if you need further detail.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:08:01.417

UIView 子类首先必须包含一些定义它的代码，无论您将如何使用此视图。创建此类后，为了使用它，您只需在 Interface Builder 中定义类名。选择您添加的 UIView 并在对象检查器中更改它的类名。

![在此处输入图像描述](https://i.stack.imgur.com/0Y2rA.png)

请记住，您添加到此 UIView 的新属性或功能将无法通过编辑 xib 访问，而只能通过代码访问。

# jquery - 与图像同时拖动旋转的 div

> ID：15836035
> 
> 赞同：0
> 
> 时间：2013-04-05T14:06:05.487
> 
> 标签：jquery, css

我有两个div。一个有边框，图像大小相同。

*   当我有图像（推文图像，未旋转）时，它可以工作。

*   **当我移动旋转的图像（小丑图像）时，div 移动不需要（开始拖动）**

*   **图像不在同一位置。**

如何用 css/jquery 解决这个问题？

```
// putting images on screan
$("#img1").css({"top": "200px", "left": "100px"});
$("#img1").myrotate();
$("#img2").css({"top": "100px", "left": "300px"});
$("#img2").myrotate(); 

// rotating image 2 
rotateMe($("#img2"), 45);
rotateMe(selectedDiv, 45);

// here is the problem
div.draggable({
     drag: function() {
          id = $(this).attr("id").substring(3);    
          var pos = $(this).position();
          $("#" + id).css({"top": pos.top + "px", "left": pos.left + "px"});
     }
}); 
```

[在这里摆弄](http://jsfiddle.net/begt4/3)

# drupal - Drupal 模块不能再启用/禁用

> ID：15836036
> 
> 赞同：0
> 
> 时间：2013-04-05T14:06:07.143
> 
> 标签：drupal, module

Drupal 7.21/7.22

我正在测试drupal，所以我可以被认为是新手。

我已经下载并安装了至少十几个模块启用它们禁用它们，直到今天一切都很好。我下载了 References 模块并很快意识到它无法启用。它不特定于此模块。没有模块可以启用/禁用。

没有错误信息。没有日志消息。所有依赖项都已启用。状态报告还行。SimpleTest 启用/禁用模块没有突出显示任何问题。

我升级到 7.22，我重新启动了服务器，但没有任何帮助。网上几乎没有关于这个问题的任何内容，所以它可能是我的配置，但我不知道如何调试/隔离这个问题。

TIA

# ios - 是否可以使用 CSS 设计原生 iOS 用户界面？

> ID：15836038
> 
> 赞同：2
> 
> 时间：2013-04-05T14:06:13.847
> 
> 标签：ios, objective-c, css, cocoa-touch, interface-builder

我对这样的事情很感兴趣——是否有一些工具、库等允许在 CSS 的帮助下设计原生 iOS UI（UILabels 边距等）？我不是在谈论诸如`PhoneGap`or之类的库`Appcelator`。我对 CSS 解析器之类的东西很感兴趣，它可以让我将 CSS 代码转换为 Objective-C UI 代码或 Interface Builder.xib 文件。假设我有一位精通 CSS 和 HTML 的优秀网页设计师，我希望他用 CSS+HTML 为我的 iOS 应用程序编写 UI 代码，然后我将其转换为 Objective-C UI 代码或 IB .xib 文件。

我想我的问题很清楚，我希望得到一些好的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:28:43.980

允许您设计“本机应用程序”或更准确地说是“混合应用程序”的服务实际上是由网页视图或网页框架主导的基本应用程序，因此您可以在网站上显示的内容和样式由应用程序。它扩展了“应用程序”的功能，并允许您将应用程序放在商店中，但它与真正的原生应用程序不相提并论。

没有从 HTML 到 Objective-C 的优雅转换。

说真的，如果你想要一个原生应用程序，那就做一个真正的原生应用程序。否则，只需坚持使用网络应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T12:51:34.923

[http://www.nativecss.com/docs/tutorials/intro/ios](http://www.nativecss.com/docs/tutorials/intro/ios)

对于原生 ios 开发，这是一个非常好的 ios+CSS 教程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:31:23.983

另请查看：[http ://www.pixate.com/](http://www.pixate.com/)

它不是免费的，但让你做你正在寻找的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T14:14:04.063

`PhoneGap`等存在的原因`AppCelator`是HTML+CSS（也就是“网页”）不能轻易转换成Objective-C的原因。

我建议你采取直接的方式。教您的设计师使用界面生成器。它只是一个所见即所得的编辑器，即使对于设计师来说也没有什么复杂的。

# ruby-on-rails-3 - Rails 上的 Backbone.js - 在 Backbone 模型之外访问 Rails 中的数据

> ID：15836040
> 
> 赞同：0
> 
> 时间：2013-04-05T14:06:16.993
> 
> 标签：ruby-on-rails-3, backbone.js, rails-activerecord

我有一个后端带有 RoR 的 Backbone.js 应用程序。

典型的backbone.js 设置是它从表中获取数据，并将数据更新/保存到同一个表中。但是，我的主干模型由供应商的通用列表组成，我希望用户能够“选择”供应商，这将转储到名为 user_selected_vendors 的不同表中。

我什至不知道如何在主干中设置它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:39:41.520

如果没有看到一些代码示例，很难给出具体的建议。

不过，一般来说，您应该将 Rails 后端视为为 Backbone 代码提供 JSON 服务端点。当您的 Rails 应用程序接收到来自 Backbone 前端的请求时，您可以对请求数据执行任何必要的操作。您不仅限于提供直接映射到您的数据库表的 JSON 端点。

此外，根据您的`user_selected_vendors`表的名称，您似乎没有利用 ActiveRecord 关联。您可能真正想要的是为您的模型添加`has_many :vendors`关联。`User`见： http: [//guides.rubyonrails.org/association_basics.html#the-has_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-association)

# maven - 在 IntelliJ 12 中部署 Maven 应用程序，无需使用 Maven 构建

> ID：15836043
> 
> 赞同：0
> 
> 时间：2013-04-05T14:06:21.317
> 
> 标签：maven, deployment, configuration, intellij-idea, makefile

我在 IntelliJ 中配置 maven 项目时遇到问题。我将我的应用程序部署到 JBoss，当我通过 IntelliJ 启动 JBoss 服务器时，应用程序在没有任何额外操作的情况下部署，但是当我尝试在一些更改后重新部署应用程序时，IntelliJ 尝试使用它自己的制作过程制作项目，但它失败了。我必须通过 maven 制作项目并重新启动服务器以重新部署应用程序。我可以以某种方式告诉 intelliJ 在重新部署应用程序时使用 maven 吗？我在运行/调试配置窗口中看不到这样的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:34:11.937

我认为您正在使用分解的人工制品（当前图标）服务器，部署部分。正确的？在那里，您可以选择外部工件并禁用 make 标志。由于热代码部署，我总是使用爆炸的人工制品。所以我不需要一次又一次地部署人工制品。请注意，如果在同一位置（maven 目标目录）中已经存在人工制品（例如 foobar.war），您必须更改分解的人工制品的名称（例如 foobarE.war）。Idea 正在创建一个名为 foobarE.war 的文件夹。

# jquery - 在 jQuery Flot“plotclick”事件中获取被点击的标签

> ID：15836044
> 
> 赞同：6
> 
> 时间：2013-04-05T14:06:21.430
> 
> 标签：jquery, events, click, flot

所以我在 jQuery 中有一个方法可以在我的 Flot 图表上捕获点击事件：

```
$("#placeholder").bind("plotclick", function (event, pos, item) {
    alert("clicked");
}); 
```

我知道 item['datapoint'] 数组中的点击值。但是我在哪里可以找到我点击的曲线标签？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T19:08:24.397

看`item.series.label`：

```
$("#placeholder").bind("plotclick", function (event, pos, item) {
    if (item) { 
        alert(item.series.label);
    }
}); 
```

[在这里](http://jsfiddle.net/KwkqK/3/)拉小提琴。

# coldfusion - Index: 2, Size: 2, Index: 1, Size: 1 冷熔错误

> ID：15836047
> 
> 赞同：0
> 
> 时间：2013-04-05T14:06:29.320
> 
> 标签：coldfusion, coldfusion-10

我在我的冷融合应用程序中观察到非常奇怪的错误。此错误有时会出现，并且在页面刷新后它消失了。此错误与我的应用程序中的任何特定页面无关。它随机出现在任何页面中。请建议我如何更正它。

**注意：它有时并不总是出现。** **Coldfusion 服务器：10.8 Web 服务器：IIS 7 操作系统：Window 7**

堆栈跟踪信息

```
The following information is meant for the website developer for debugging purposes.
Error Occurred While Processing Request
Index: 2, Size: 2

Resources:

    Check the ColdFusion documentation to verify that you are using the correct syntax.
    Search the Knowledge Base to find a solution to your problem.

Browser     Mozilla/5.0 (Windows NT 6.1; rv:20.0) Gecko/20100101 Firefox/20.0
Remote Address      127.0.0.1
Referrer    http://mysite.url/index.cfm?action=users&displayMode=users&tagID=0&cfid=151062&cftoken=23d66b7903e3662d-80DF390F-0C45-8090-0A2DF20C76367E1F
Date/Time       05-Apr-13 07:26 PM
Stack Trace

java.lang.IndexOutOfBoundsException: Index: 2, Size: 2
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at coldfusion.monitor.util.MonitorList.add(MonitorList.java:133)
    at coldfusion.monitor.memory.SessionMemoryMonitor.record(SessionMemoryMonitor.java:68)
    at coldfusion.monitor.memory.SessionMemoryMonitor.record(SessionMemoryMonitor.java:53)
    at coldfusion.monitor.memory.MemoryMonitor.record(MemoryMonitor.java:279)
    at coldfusion.monitor.memory.MemoryRequestEventHandler.onRequestComplete(MemoryRequestEventHandler.java:23)
    at coldfusion.monitor.event.RequestMonitorEventProcessor.onRequestComplete(RequestMonitorEventProcessor.java:283)
    at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:46)
    at coldfusion.filter.PathFilter.invoke(PathFilter.java:112)
    at coldfusion.filter.LicenseFilter.invoke(LicenseFilter.java:30)
    at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:94)
    at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
    at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
    at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
    at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
    at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
    at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62)
    at coldfusion.CfmServlet.service(CfmServlet.java:219)
    at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
    at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:414)
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:204)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

评论中的代码

```
<cfset siteArray = ArrayNew (1)>
<cfloop query="GetSites">
    <cfset obj = StructNew ()>
    <cfset obj.ID = GetSites.ID>
    <cfset obj.Title = GetSites.Title>
    <cfset obj.SiteURL = GetSites.SiteURL>
    <cfset obj.LayoutID = GetSites.LayoutID>
    <cfset t = ArrayAppend (siteArray, obj)>
    <cfset tokenName = obj.SiteURL> 
    <cfset tokenName = Replace (tokenName, ".", "", "ALL")>
    <cfset tokenName = Replace (tokenName, "-", "", "ALL")>
    <cfset tokenName = "URL_#tokenName#">
    <cfset "Application.#tokenName#" = ArrayLen (siteArray)>
</cfloop> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-14T18:53:54.097

似乎监控导致了这种情况。我今天下午一直在监控服务器，并让监控“开启”。关闭监控解决了这个奇怪的问题:-)

在这里找到答案：

[https://forums.adobe.com/thread/885925?start=0&tstart=0](https://forums.adobe.com/thread/885925?start=0&tstart=0)

# python - Matplotlib：更改数学字体大小

> ID：15836050
> 
> 赞同：19
> 
> 时间：2013-04-05T14:06:37.990
> 
> 标签：python, numpy, matplotlib

我正在使用 matplotlib 绘制一些图，但遇到了 TeX 渲染的问题。似乎 mathtext x-height is 比正常的 Bitstream Vera Sans 小一点。请参见以下示例：

```
x = linspace(0, 30, 300);
y = 0.5*rand(300)+20/(numpy.power(x-15, 2)+4);
xlabel(r'$\omega$ (rad$\cdot$Hz)');
ylabel(r'Intensity$^2$');
title(r'Why is $mathtext$ so much smaller than normal text?'); 
```

![一些说明问题的随机数据图。](https://i.stack.imgur.com/r2rYk.png)

如您所见，希腊字母和数字尤其明显。理想情况下，我可以定义一些比例因子，使数学文本在每种字体大小下都更大一些。有没有办法简单地做到这一点？我*不想*简单地到处使用Computer Modern。如果可能的话，我也不想编译新的 Tex 数学字体。

我*会*采用的一种解决方案是对希腊字母和数字使用无衬线字体，但无论出于何种原因，matplotlib 都会忽略这些字体的格式：

```
title('Why does $mat\mathsf{plot}lib$ ignore formatting for $\mathsf{2}$ ($\mathsf{two}), $\mathbf{2}$ ($\mathbf{two}) and $\mathsf{\omega}$?') 
```

![标题已更改](https://i.stack.imgur.com/yBg2q.png)

我认为这与这些东西的排版方式的性质有关，但是有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T15:58:53.387

从[matplotlib 文档](http://matplotlib.org/users/mathtext.html#fonts)：

> 此外，您可以使用`\mathdefault{...}`或其别名 `\mathregular{...}`来使用用于 mathtext 之外的常规文本的字体。这种方法有很多限制，最明显的是可用的符号要少得多，但它可以使数学表达式与图中的其他文本很好地融合在一起。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T14:23:16.127

尝试设置

```
rcParams['text.usetex'] = True 
```

它将尝试使用外部 LaTeX 安装，而不是内置的 mathtext 渲染器。请参阅[此 wiki](http://www.scipy.org/Wiki/Cookbook/Matplotlib/UsingTex)（即使它有点过时）和关于[问题 #1336的讨论](https://github.com/matplotlib/matplotlib/issues/1366)

如果您的目标是 LaTeX，另一种选择是使用 pstricks。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T14:16:00.210

这个问题应该在 matplotlib 2 中修复。见问题

[数学模式和常规文本之间的字体大小不同 #7778](https://github.com/matplotlib/matplotlib/issues/7778)。

和

[Matplotlib：正确的数学字体大小](https://stackoverflow.com/questions/41555340/matplotlib-correct-math-font-size)。

# c# - 使用 c sharp 在点网环境中运行本机 Delphi 代码

> ID：15836053
> 
> 赞同：1
> 
> 时间：2013-04-05T14:06:48.773
> 
> 标签：c#, .net, oracle, delphi, plsql

我有一个 Delphi 程序，主要由可视界面（按钮、文本框等）和一些业务逻辑组成。

业务逻辑主要包含在Delphi`Pl-Sql`的运行中。 我想将 Delphi 中的项目带到 C Sharp，但我想逐步完成。`Oracle Database`

我的想法是在 Visual Studio 中创建一个 C Sharp 项目并使用 Delphi 代码（包括 Visual Interfaces）运行它，并用 C Sharp 部分替换 Delphi 中的代码和 Visual Interface。

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:40:32.013

在同一个应用程序中混合 Delphi 和 C# GUI 是可能的，但很难实现。您需要建立一个完整的基础架构来组织两种语言之间的互操作。您最终将创建大量的互操作代码，随后您将放弃这些代码。更糟糕的是，互操作代码需要有两种方式。有时你会看到 C# 可视化代码与 Delphi 非可视化对话。反之亦然。逐个模块转换代码模块的想法听起来不错，但我预测这将需要大量的互操作脚手架。

沿着视觉/非视觉鸿沟分割它会更容易，但这不是你所提议的。所以坦率地说，我认为你目前的计划远非最佳。我不会娱乐它。我认为干净的端口是最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:47:44.267

[Remobjects Hydra](http://www.remobjects.com/hydra/)似乎正是您正在寻找的。

# c# - 如何以编程方式将数据从sql添加到asp.net c#中的列表视图

> ID：15836059
> 
> 赞同：0
> 
> 时间：2013-04-05T14:07:08.687
> 
> 标签：c#, asp.net, sql, listview

我正在尝试在我的页面上填充列表视图。我使用代码从 sql 中读取数据：

```
string cxnstr = System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(cxnstr);
        ds = new DataSet("ds");
        conn.Open();

        SqlDataAdapter da = new SqlDataAdapter("select d.[Title],d.[Link],d.[Description],s.[Title],s.[Link],s.[Description] from DomainLinks d,SupplierLinks s where s.SuppRowID = " + SuppRowID + " or d.SuppRowID = " + SuppRowID, conn);
            da.Fill(ds);

        if (ds.Tables.Count > 0)
        {
            if (ds.Tables[0].Rows.Count > 0)
            {

                lstView.DataSource = ds;

                lstView.DataBind();

            }
            else
            {

                lblError.Text = "There are no links for that type";
            }
        } 
```

进入列表视图：

```
<asp:ListView ID="lstView" runat="server">
    <ItemTemplate>
        <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
            <br />
        <a href='<%#Eval("Link") %>' runat="server"><asp:Label ID="LinkLabel" runat="server" Text='<%# Eval("Link") %>' /></a>
            <br />
        <asp:Label ID="DescriptionLabel" runat="server" Text='<%# Eval("Description") %>' />
            <br />
</asp:ListView> 
```

效果很好。但我的问题是其他记录呢？我不知道如何在列表视图中添加更多记录，而不是添加：

```
<asp:Label ID="Title1Label" runat="server" Text='<%# Eval("Title1") %>' />
            <br />
        <a href='<%#Eval("Link1") %>' runat="server"><asp:Label ID="Link1Label" runat="server" Text='<%# Eval("Link1") %>' /></a>
            <br />
        <asp:Label ID="Description1Label" runat="server" Text='<%# Eval("Description1") %>' />
            <br /> 
```

和递增。但这是硬编码的。如何在页面加载时执行此操作？我应该继续使用列表视图吗？切换控制？

编辑

行。这是域链接和供应链接的表结构：

```
CREATE TABLE [dbo].[SupplierLinks](
[RowID] [int] IDENTITY(1,1) NOT NULL,
[SuppRowID] [int] NOT NULL,
[Title] [varchar](250) NULL,
[Link] [varchar](max) NULL,
[Description] [varchar](max) NULL,
PRIMARY KEY CLUSTERED 
(
    [RowID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

和

```
CREATE TABLE [dbo].[DomainLinks](
[RowID] [int] IDENTITY(1,1) NOT NULL,
[SuppRowID] [int] NOT NULL,
[Title] [varchar](250) NULL,
[Link] [varchar](max) NULL,
[Description] [varchar](max) NULL,
PRIMARY KEY CLUSTERED 
(
    [RowID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

父表只是一个标题和它们作为外键继承的 rowid。在我的代码中，用户从下拉列表中选择了一个供应商，我得到了 ID，它位于 select 语句中。

有时，大多数时候，结果会不止一个。

希望这可以澄清情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:50:31.193

现在很好。我创建了一个新页面，找到了我想要的数据和标题的外键。基于这两个变量，我可以从sql中画出单行。

```
protected void hypTit_Click(object sender, EventArgs e)
    {
        if (sender is LinkButton)
        {
            lstArt.Visible = true;
            LinkButton btn = (LinkButton)sender;
            string buttonpressed = btn.Text.ToString();
            fillVals(buttonpressed);
        }
    }

    protected void fillVals(String name)
    {
        string cxnstr = System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(cxnstr);
        conn.Open();
        DataSet ds;
        try
        {
            ds = new DataSet("ds");
            SqlDataAdapter da = new SqlDataAdapter("select Title,[Description]as[Article] from StandardReplies where CatRowID = " + catID + " and Title like '" + name + "'", conn);
            da.Fill(ds);
            lstArt.DataSource = ds;
            lstArt.DataBind();
        }
        catch (SqlException ex)
        {
            Response.Write(ex.ToString());
        }
    } 
```

类似的东西。不想放弃太多

# boto - 从冰川下载

> ID：15836061
> 
> 赞同：0
> 
> 时间：2013-04-05T14:07:09.873
> 
> 标签：boto, amazon-glacier

我可以将文件上传到冰川保险库。但是如何下载文件？

```
import boto
ACCESS_KEY_ID = "abc"
SECRET_ACCESS_KEY = "pqr" 
glacier_connection = boto.connect_glacier(aws_access_key_id=ACCESS_KEY_ID, aws_secret_access_key=SECRET_ACCESS_KEY)

vault = glacier_connection.create_vault("backup")
archive_id=vault.upload_archive("aws.sh") 
```

我预计以下代码会从冰川下载文件。但它不起作用。

```
retrieve_job=vault.retrieve_archive(archive_id)
if retrieve_job.completed:
    retrieve_job.download_to_file("test.pl") 
```

# python - Scrapy CrawlSpider 不会抓取第一个目标网页

> ID：15836062
> 
> 赞同：17
> 
> 时间：2013-04-05T14:07:17.197
> 
> 标签：python, scrapy, web-crawler

我是 Scrapy 的新手，我正在做一个抓取练习，我正在使用 CrawlSpider。虽然 Scrapy 框架运行良好并且它遵循相关链接，但我似乎无法让 CrawlSpider 抓取第一个链接（主页/登录页面）。相反，它直接抓取由规则确定的链接，但不抓取链接所在的登录页面。我不知道如何解决这个问题，因为不建议覆盖 CrawlSpider 的解析方法。修改 follow=True/False 也不会产生任何好的结果。这是代码片段：

```
class DownloadSpider(CrawlSpider):
    name = 'downloader'
    allowed_domains = ['bnt-chemicals.de']
    start_urls = [
        "http://www.bnt-chemicals.de"        
        ]
    rules = (   
        Rule(SgmlLinkExtractor(aloow='prod'), callback='parse_item', follow=True),
        )
    fname = 1

    def parse_item(self, response):
        open(str(self.fname)+ '.txt', 'a').write(response.url)
        open(str(self.fname)+ '.txt', 'a').write(','+ str(response.meta['depth']))
        open(str(self.fname)+ '.txt', 'a').write('\n')
        open(str(self.fname)+ '.txt', 'a').write(response.body)
        open(str(self.fname)+ '.txt', 'a').write('\n')
        self.fname = self.fname + 1 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-05T16:57:09.493

只需将您的回调更改为`parse_start_url`并覆盖它：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

class DownloadSpider(CrawlSpider):
    name = 'downloader'
    allowed_domains = ['bnt-chemicals.de']
    start_urls = [
        "http://www.bnt-chemicals.de",
    ]
    rules = (
        Rule(SgmlLinkExtractor(allow='prod'), callback='parse_start_url', follow=True),
    )
    fname = 0

    def parse_start_url(self, response):
        self.fname += 1
        fname = '%s.txt' % self.fname

        with open(fname, 'w') as f:
            f.write('%s, %s\n' % (response.url, response.meta.get('depth', 0)))
            f.write('%s\n' % response.body) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-05T16:55:10.070

有很多方法可以做到这一点，但最简单的一种是实现`parse_start_url`然后修改`start_urls`

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector

class DownloadSpider(CrawlSpider):
    name = 'downloader'
    allowed_domains = ['bnt-chemicals.de']
    start_urls = ["http://www.bnt-chemicals.de/tunnel/index.htm"]
    rules = (
        Rule(SgmlLinkExtractor(allow='prod'), callback='parse_item', follow=True),
        )
    fname = 1

    def parse_start_url(self, response):
        return self.parse_item(response)

    def parse_item(self, response):
        open(str(self.fname)+ '.txt', 'a').write(response.url)
        open(str(self.fname)+ '.txt', 'a').write(','+ str(response.meta['depth']))
        open(str(self.fname)+ '.txt', 'a').write('\n')
        open(str(self.fname)+ '.txt', 'a').write(response.body)
        open(str(self.fname)+ '.txt', 'a').write('\n')
        self.fname = self.fname + 1 
```

# string - Perl：在两个字符串之间传输子字符串位置

> ID：15836064
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:07:20.777
> 
> 标签：string, algorithm, perl, substring

我正在编写一个 Perl 程序，但遇到了以下问题：我有一个字符串中的开始和结束位置的大列表。该位置对应于该字符串中的子字符串。我现在想将此位置转移到第二个字符串。第二个字符串与第一个字符串相同，只是它有额外的连字符。

原始字符串示例：“ABCDEF”和一个子字符串“BCDE”

我有的：

*   此原始字符串中子字符串的位置：开始 = 1，结束 = 4
*   带有附加连字符的原始字符串：“-AB---CD--EF---”

我想要的是：

*   连字符字符串中子字符串的位置：Start=2, End=10

我有一个很大的这个子字符串位置的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:28:18.307

我强烈怀疑您已经展示了问题的简化版本，在这种情况下，任何解决方案都可能不适用于实际情况。

`-*`然而，通过在字符之间穿插（即零个或多个连字符）来构建正则表达式似乎是最简单的。

该程序以这种方式工作，构建一个正则表达式`B-*C-*D-*E`并将其与两个示例字符串进行比较。

```
use strict;
use warnings;

my @strings = qw/ ABCDEF -AB---CD--E-F--- /;
my ($start, $end) = (1, 4);
my $substr = substr $strings[0], $start, $end-$start + 1;

my $regex = join '-*', split //, $substr;
$regex = qr/$regex/;

for my $string (@strings) {
  if ($string =~ $regex) {
    printf "Substring found at %d to %d in string %s\n", $-[0], $+[0]-1, $string;
  }
} 
```

**输出**

```
Substring found at 1 to 4 in string ABCDEF
Substring found at 2 to 10 in string -AB---CD--E-F--- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:28:15.767

```
use strict;
use warnings;
my $theStringGivenAsAnInputExample="-AB---CD--E-F---";
my $start=1;
my $end=4;
my $theStringGivenAsAnotherInput="ABCDEF";
my $regexp=join("-*",split("",substr($theStringGivenAsAnotherInput,$start,$end))
);
$theStringGivenAsAnInputExample =~ /$regexp/p;

print ${^PREMATCH},"\n";
print ${^POSTMATCH},"\n";
print ${^MATCH},"\n";

my $startPosition = length(${^PREMATCH});
my $finishPosition = length(${^PREMATCH})+length(${^MATCH})-1;

print "start, $startPosition finish, $finishPosition\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:29:27.673

这对你有用吗？它只是在连字符字符串中搜索由 start 和 end 指定的字符并返回它们的索引。

```
sub hyphen_substrings {
    my $original   = shift;
    my $hyphenated = shift;
    my @substrings = @_;
    my @return;
    for my $substring (@substrings) {
        my ($start, $end) = @{$substring}[0, 1];
        my $start_h       = index $hyphenated, substr $original, $start, 1;
        my $end_h         = index $hyphenated, substr $original, $end, 1;
        push @return, [$start_h, $end_h];
    }
    return @return;
} 
```

# postgresql - 如何将 psql 与 SSL 密钥一起使用？

> ID：15836066
> 
> 赞同：4
> 
> 时间：2013-04-05T14:07:28.333
> 
> 标签：postgresql, ssl, private-key, psql

如何使用 psql 和 SSL 密钥连接到 PostgreSQL 服务器`ssh -i $KEY`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:19:08.033

如果您不使用[默认位置](http://www.postgresql.org/docs/current/static/ssl-tcp.html)，则可以使用[`PGSSLCERT`和`PGSSLKEY`环境变量](http://www.postgresql.org/docs/current/static/libpq-envars.html)。

例如：

```
PGSSLMODE=verify-full PGSSLCERT=cert.pem PGSSLKEY=key.pem psql -h servername 
```

请记住使用[`verify-full`sslmode](http://www.postgresql.org/docs/current/static/libpq-ssl.html)，因为其他的不会保护您免受 MITM 攻击。

# python - Django lxml解析值问题

> ID：15836071
> 
> 赞同：0
> 
> 时间：2013-04-05T14:07:40.370
> 
> 标签：python, django, xml-parsing, lxml

我有一个`submission_ref`包含文本内容的元素`123`，我正在解析如下：

```
 xml = request.POST['xml'].encode('utf-8')
    parser = etree.XMLParser(ns_clean=True, recover=True, encoding='utf-8')
    h = fromstring(xml, parser=parser)

    submission_ref = h.xpath('submission_ref/text()'); 
```

我的问题是我不能使用变量中的值，`submission_ref`因为它看起来像这样：`['123']`在被解析之后。见额外的`['`和`']`。

这有关系`xpath()`吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:09:01.623

该`xpath()`函数返回匹配*列表*。只需使用第一个：

```
submission_ref = h.xpath('submission_ref/text()')[0] 
```

# oracle - 在 ORACLE 中加载数据

> ID：15836073
> 
> 赞同：1
> 
> 时间：2013-04-05T14:07:47.550
> 
> 标签：oracle

您好我正在尝试在 oracle 中使用加载数据。如果我正在使用

```
LINES TERMINATED BY '<>' 
```

它在第 1 行抛出 SQL*Loader-350：语法错误。期望“（”，找到“LINES”。

为什么会发生这种情况。oracle 中是否没有以子句结尾的 LINES？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:18:18.407

我认为`LINES TERMINATED`在 ORACLE 中没有定义；从 ORACLE 文档中检查*流记录格式：*

> 当记录未按大小指定时，文件为流记录格式；相反，SQL*Loader 通过扫描记录终止符来形成记录。流记录格式是最灵活的格式，但可能会对性能产生负面影响。要解释为流记录格式的数据文件的规范类似于以下内容： INFILE datafile_name ["str terminator_string"]

例子：

```
load data
infile 'example.dat'  "str '|\n'"
into table example
fields terminated by ',' optionally enclosed by '"'
(col1 char(5),
 col2 char(7))

example.dat:
hello,world,|
james,bond,| 
```

有关更多信息，请参见[http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_concepts.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_concepts.htm)。

# actionscript-3 - Actionscript：使用变量遍历 .as

> ID：15836079
> 
> 赞同：0
> 
> 时间：2013-04-05T14:08:02.597
> 
> 标签：actionscript-3, variables, text, actionscript, instance

我有一个变量

```
var Something = "Text"; 
```

我想导入文本。因为它放在 abc 文件夹中，我该怎么办？我试着写：

```
 import abc.Something; 
```

没用，有救吗？顺便说一句，我想导入文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:19:33.150

你试图做的事情是行不通的。import 语句用于类。您可以在静态变量中定义文本字符串，然后在代码中使用此变量。请注意，这不是好的设计。

```
package abc{
   public class TextHolder
   {
        public static var something:String = "Text"; 
   }
} 
```

在另一个班级：

```
package {
   import abc.TextHolder
   public class Main
   {
       var text:String = TextHolder.something;
   }
} 
```

您也可以使用 include 语句。使用此语句，您可以将文件作为文件包含到当前文件中

```
include "abc.script.as" 
```

然后，此脚本中的变量将包含在当前脚本中。

我猜你真正想要的是在运行时加载文本和其他资源。

您可以使用 URL 加载器简单地做到这一点。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)

此示例来自 adobe livedocs

```
package {
import flash.display.Sprite;
import flash.events.*;
import flash.net.*;

public class URLLoaderExample extends Sprite {

    private loader:URLoader;
    public function URLLoaderExample() {
        loader = new URLLoader();
        configureListeners(loader);

        var request:URLRequest = new URLRequest("urlLoaderExample.txt");
        try {
            loader.load(request);
        } catch (error:Error) {
            trace("Unable to load requested document.");
        }
    }

    private function configureListeners(dispatcher:IEventDispatcher):void {
        dispatcher.addEventListener(Event.COMPLETE, completeHandler);
        dispatcher.addEventListener(Event.OPEN, openHandler);
        dispatcher.addEventListener(ProgressEvent.PROGRESS, progressHandler);
        dispatcher.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
        dispatcher.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);
        dispatcher.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
    }

    private function completeHandler(event:Event):void {
        var loader:URLLoader = URLLoader(event.target);
        trace("completeHandler: " + loader.data);

        var vars:URLVariables = new URLVariables(loader.data);
        trace("The answer is " + vars.answer);
    }

    private function openHandler(event:Event):void {
        trace("openHandler: " + event);
    }

    private function progressHandler(event:ProgressEvent):void {
        trace("progressHandler loaded:" + event.bytesLoaded + " total: " + event.bytesTotal);
    }

    private function securityErrorHandler(event:SecurityErrorEvent):void {
        trace("securityErrorHandler: " + event);
    }

    private function httpStatusHandler(event:HTTPStatusEvent):void {
        trace("httpStatusHandler: " + event);
    }

    private function ioErrorHandler(event:IOErrorEvent):void {
        trace("ioErrorHandler: " + event);
    }
} 
```

}

它有点多，但涵盖了加载 ascii 数据的整个过程。

# c++ - 局部对象指针

> ID：15836082
> 
> 赞同：0
> 
> 时间：2013-04-05T14:08:07.747
> 
> 标签：c++, pointers

```
struct Temp
{
   CString one;
   CString two;
};

class Foo
{
   public:
      Temp obj;
      void somewhere();
}

void Foo::somewhere()
{
   void* pData = static_cast<void*>(&obj);
   OwnMethod(pData); // void OwnMethod(void*);
} 
```

问题是：我应该`obj`在堆上创建还是这种情况不危险（传递本地类对象指针）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:11:22.997

如果`OwnMethod(pData)`将指针存储在某处以供以后使用，则一旦`Foo::somewhere()`调用的对象被销毁，以后就无法再使用该指针了。

如果`OwnMethod(pData)`只访问指向的数据，你是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T14:14:22.470

成员变量将与对象一样长`Foo`，因此指针在调用`OwnMethod`.

如果该函数将指针的副本存储在某处，而其他东西稍后使用该指针，则存在`Foo`在销毁（以及因此指针的目标）被销毁之后访问它的危险。有多种方法可以防止这种情况；如您所说，一种是动态分配对象，然后在传递给`OwnMethod`. 智能指针，例如`std::unique_ptr`和`std::shared_ptr`，是跟踪动态对象所有权的一种非常好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:20:58.827

哇，好多问题。

不应将复杂对象传递给任何采用 void* 的对象。

谁写了自己的方法？

为什么它不采用 Foo* 类型的指针？

事实上，为什么它不使用 Foo& 类型的引用？

如果 OwnMethod() 可能需要接受几种不同类型的对象，那么它应该采用基类指针或引用并使用多态性。

但是，就生命周期参数而言 - 只要包装类存在，obj 就会存在，因此如果指针未在 OwnMethod 范围之外使用，这是可以的。如果 OwnMethod 导致指针存储在 Foo 生命周期之外的其他地方，那么您就有问题了，也许 obj 应该在堆上分配。（它甚至可能根本不适合成为 Foo 的成员。）

# c++ - Visual Studio 2012 更新是否会破坏 C++ ABI？

> ID：15836087
> 
> 赞同：18
> 
> 时间：2013-04-05T14:08:29.340
> 
> 标签：c++, visual-studio-2012, abi

当 Microsoft 在 2012 年 9 月最初发布 Visual Studio 2012 时，他们宣布了更定期为 Visual Studio 提供更新的计划。此后，他们分别于2012年 11 月和2013 年 4 月发布了[Visual Studio 2012 Update 1 (Visual Studio 2012.1)和](http://blogs.msdn.com/b/visualstudio/archive/2012/11/26/visual-studio-2012-update-1-is-here.aspx)[Visual Studio 2012 Update 2 (Visual Studio 2012.2)](http://blogs.msdn.com/b/visualstudio/archive/2013/04/04/visual-studio-2012-update-2-is-here.aspx)。

我的问题是：更新是否对 C++ ABI 进行了任何更改（关于初始 VS2012 版本）？链接`.lib`不同VS2012版本的s安全吗？

我在互联网上搜索了一段时间，找不到微软的任何明确声明。一些[消息来源](http://blogs.msdn.com/b/somasegar/archive/2013/04/04/visual-studio-2012-update-2-now-available.aspx)提到 C++ 代码生成中的一些错误已得到修复，但我认为这并不意味着 ABI 更改？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T14:10:38.630

Visual C++ 的 STL 实现的主要作者 Stephan T. Lavavej 在这个[Reddit 线程](http://www.reddit.com/r/cpp/comments/13zex3/can_vs2010_c_libsdlls_be_linked_into_a_vs2012_c/c78ott7)中列出了规则：

> 以下是准确的规则：
> 
> 如果您包含任何 C++ 标准库标头，则必须遵守其规则，并且我们故意破坏主要版本之间的二进制兼容性（但在修补程序和服务包之间保留它）。任何表示更改（包括但不限于添加/删除数据成员）都会破坏二进制兼容性，这就是为什么总是会发生这种情况，也是我们小心翼翼地保护这一权利的原因。
> 
> *[剪辑]*
> 
> 因此，如果您遵守 STL 的规则，则需要确保以下几点：
> 
> *   所有链接到单个二进制文件 (EXE/DLL) 的目标文件和静态库都必须使用相同的主要版本进行编译。我们添加了链接器检查，因此不匹配的 VS 2010+ 主要版本将在链接时触发硬错误，但如果涉及 VS 2008 或更早版本，我们将无法帮助您（没有时间机器）。因为这里适用 ODR，所以您确实应该对所有目标文件和静态库使用相同的工具集（即相同的服务包级别）。例如，我们修复了 VS 2010 RTM 和 SP1 之间的 std::string 内存泄漏，但如果您混合 RTM 和 SP1，生成的二进制文件可能会或可能不会受到泄漏的影响。（此外，您需要使用相同的 _ITERATOR_DEBUG_LEVEL 和发布/调试设置；我们现在对这些进行了链接器检查。）
> *   如果您将多个二进制文件加载到同一个进程中，并且它们将 C++ 标准库对象相互传递，则必须使用相同的主要版本和 _ITERATOR_DEBUG_LEVEL 设置构建这些二进制文件（发布/调试也应该匹配，我忘记了您是否可以逃脱此处不匹配）。重要的是，我们无法检测到违反此规则的行为，因此您必须遵守它。
> *   接口是纯 C 或 COM（或现在的 WinRT）的多个二进制文件可能在内部使用不同的主要版本，因为这些东西保证了二进制兼容性。如果您的接口涉及 C++ 核心语言（例如带有虚拟的东西），但非常小心从不提及任何 C++ 标准库类型，那么您可能没问题 - 编译器确实试图避免破坏二进制兼容性。
> 
> 但是请注意，当加载到单个进程中的多个二进制文件使用不同的主要版本编译时，您几乎肯定会最终将多个 CRT 加载到您的进程中，这是不可取的。
> 
> 底线 - 如果您 100% 一致地编译所有内容，您就不必担心这些东西。如果可以避免的话，不要玩混合游戏。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-11T08:41:32.113

最后，我在 Stephan T. Lavavej 的博文[C++11/14 STL Features, Fixes, And Breaking Changes In VS 2013](http://blogs.msdn.com/b/vcblog/archive/2013/06/28/c-11-14-stl-features-fixes-and-breaking-changes-in-vs-2013.aspx)中找到了我的问题的答案：

> VS 更新机制主要用于发布高优先级错误修复，而不是发布新功能，尤其是带有重大更改的大规模重写（与同样大规模的编译器更改相关联）。
> 
> 像 Visual C++ 2013 这样的主要版本让我们可以自由地改变和破坏很多东西。我们根本无法在更新中发布这些东西。
> 
> Q5：错误修正呢？我们可以在更新中获得这些吗？
> 
> A5：这是一个有趣的问题，因为答案取决于我的选择（而在上一个问题中，即使我愿意，我也不会被允许在更新中发布这样的重写）。
> 
> 每个团队都可以选择他们将哪些错误修复带到“shiproom”以考虑包含在更新中。有些东西shiproom不会让我们侥幸逃脱（例如**，在主要版本之外禁止二进制破坏性更改**），但除此之外，我们有决定权的自由。我个人优先考虑带宽而不是延迟——也就是说，我更喜欢在每个主要版本中发布更多的错误修复，而不是在多个更新中更频繁地发布更少的错误修复总数（在同一时间段内）。

# sql - 没有为一个或多个必需参数提供值，使用子选择查询

> ID：15836089
> 
> 赞同：0
> 
> 时间：2013-04-05T14:08:36.060
> 
> 标签：sql, vb.net, ms-access-2013

我正在尝试在 vb.net 中执行此选择查询，但它向我抛出了 No Value Given For One or More Required Parameters 错误。我一直在重新检查我的代码，但看不出有什么问题。

`SELECT`使用表格提取 houseno、housename、street、productname、sequenceno 和数量`DailyDelivery`的语句，其中 roundID = selectedID

```
Command.CommandText = 
"SELECT customerid, 
       productid, 
       quantity, 
       (SELECT houseno 
        FROM   customer 
        WHERE  customer.customerid = dailydelivery.customerid) AS HouseNo, 
       (SELECT housename 
        FROM   customer 
        WHERE  customer.customerid = dailydelivery.customerid) AS HouseName, 
       (SELECT street 
        FROM   customer 
        WHERE  customer.customerid = dailydelivery.customerid) AS Street, 
       (SELECT sequenceno 
        FROM   customer 
        WHERE  customer.customerid = dailydelivery.customerid) AS SequenceNo, 
       (SELECT roundid 
        FROM   customer 
        WHERE  customer.customerid = dailydelivery.customerid) AS RoundID, 
       (SELECT productname 
        FROM   product 
        WHERE  product.productid = dailydelivery.productid)    AS ProductName 
FROM   dailydelivery 
WHERE  issuedate = @TodaysDate 
       AND roundid = @SelectedID 
ORDER  BY sequenceno, 
          street, 
          houseno, 
          housename"

'Add parameter for command (TodaysDate being today's date)
    `Command.Parameters.AddWithValue("@TodaysDate", Today.Date)`

'Add parameter for command (SelectedID being the current roundID)
    `Command.Parameters.AddWithValue("@SelectedID", SelectedID)` 
```

在此之后，使用数据适配器调用命令以填充数据集中的表。

```
'Open connection to the database
dbConnection.Open()

'Set command's connection as dbconnection
Command.Connection = dbConnection

'Set the data adapter's select command as command
DataAdpt.SelectCommand = Command

'Fill ActualDelivery table in selectedDataset with the results of query, using the data adapter
DataAdpt.Fill(SelectedDataset, "ActualDelivery")

'Close connection to the database
dbConnection.Close() 
```

错误被抛出就`DataAdapt.Fill`行了。我正在使用 VB Express 2008 和 Access 2013。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:22:40.880

可能我错了，但我无法测试查询。我认为您可以使用 JOIN 重构该查询

```
"SELECT d.customerid, d.productid, d.quantity, c.HouseNo, c.HouseName, " + 
"c.Street, c.SequenceNo, c.RoundID, p.ProductName " + 
"FROM (customer AS c INNER JOIN dailydelivery AS d ON c.customerid = d.customerid) " + 
"INNER JOIN product AS p ON p.productid = d.productid " + 
"WHERE  d.issuedate = @TodaysDate AND c.roundid = @SelectedID " + 
"ORDER  BY c.sequenceno,  c.street, c.houseno, c.housename" 
```

再次查看您的查询。您是否`roundid`在dailydelivery 表上命名了一个字段，或者它是`roundid`customer 表的字段？就目前而言，您需要将该字段放在`dailydelivery`表上，否则它将被解释为参数的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:38:39.780

您需要仅使用`?`问号来指定参数，并确保以[`Parameters`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)正确的顺序将参数添加到集合中。或者只是引用文档：

> OLE DB .NET 提供程序不支持将参数传递给 SQL 语句或由[`OleDbCommand`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.aspx)when[`CommandType`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.commandtype.aspx)设置为**Text**调用的存储过程的命名参数。在这种情况下，必须使用问号 (?) 占位符。例如：
> 
> ```
>  SELECT * FROM Customers WHERE CustomerID = ? 
> ```
> 
> [`OleDbParameter`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx)因此，添加对象的顺序[`OleDbParameterCollection`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparametercollection.aspx)必须直接对应于命令文本中参数的问号占位符的位置。

# c# - 如何检查 MVC Razor Engine 控制器中的字段属性

> ID：15836092
> 
> 赞同：0
> 
> 时间：2013-04-05T14:08:44.090
> 
> 标签：c#, asp.net-mvc, razor

我需要检查控制器中表单字段的属性值，所以我有简单的文本框

现在我想检查我的控制器是否被禁用？任何人指导我如何实现这一目标？我在谷歌上搜索了很多，但我什么也没找到，formcollection 也没有提供任何东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:21:47.260

我认为您不想检查文本框本身是否已禁用。如果用户选择它，您可以使用一个复选框和一行 javascript 来禁用该复选框。然后在您的控制器中，您可以检查您从复选框收到的布尔值是否为真。

```
public ActionResult SomeController (bool IsChecked)
{
    if(isChecked){
       //Do something
    }
    return //something
 }

 if ($('#checkbox1').is(':checked')) {
      $("#textbox1").attr("disabled", "disabled");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:13:12.380

控制器只能访问表单集合中包含的值，并且文本框属性不会随请求一起传递（`value`属性除外）。

您可以添加一个隐藏字段来跟踪此类数据。隐藏字段将随请求一起传递，并且可以包含您想要的任何内容。要填充该字段，您很可能会使用 JavaScript，但如果您在呈现视图时*知道元素的属性，也可以在服务器端设置值。*

或者，也许您可​​以查看更改的*原因*。例如，如果选择 a 中的某个选项`<select>`导致更改，您可以查看发布的值`<select>`并推断必须禁用文本框。

所有人都说，我不确定你为什么要这样做。通常最好管理动作的根本原因（即为什么要设置属性？）而不是副作用。

# python - 使用 BeautifulSoup 获取选定的选项

> ID：15836094
> 
> 赞同：2
> 
> 时间：2013-04-05T14:08:52.630
> 
> 标签：python, html, beautifulsoup, option, selected

```
from bs4 import BeautifulSoup
soup = BeautifulSoup( '''<SELECT>
<option value="1">ONE</option>
<option value="2" selected>TWO</option>
<option value="3">THREE</option>
<option value="4">FOUR</option>
<option value="5">FIVE</option>
</SELECT>''' )

print( soup.findAll('option', selected=True) ) 
```

输出是：

```
[] 
```

我试图在上面的示例中获取所选选项的字符串。但是如果“选择”没有分配给任何东西，我就无法获得正确的选项，它不必设置为 True。

```
from bs4 import BeautifulSoup

soup = BeautifulSoup( '''<SELECT>
<option value="1">ONE</option>
<option value="2" selected=''>TWO</option>
<option value="3">THREE</option>
<option value="4">FOUR</option>
<option value="5">FIVE</option>
</SELECT>''' )

print( soup.findAll('option', selected=True) ) 
```

输出是：

```
[<option selected="" value="2">TWO</option>] 
```

由于我只阅读一个 html 文件，因此我无法控制该部分。有办法解决吗？我正在使用 BeahutifulSoup 4.1.3 和 python 3.3.0

# nginx - 带有 nginx 和 Play 2.1 应用程序的子目录的反向代理

> ID：15836095
> 
> 赞同：6
> 
> 时间：2013-04-05T14:08:53.577
> 
> 标签：nginx, playframework, reverse-proxy, playframework-2.1

## 目标

使用 nginx 为每个应用程序使用不同的子目录设置多个 Play 2.1 应用程序。

App1 running on`127.0.0.1:4000`应该可以在`127.0.0.1/dev`
App2 running on`127.0.0.1:5000`下访问`127.0.0.1/test`

## 配置

**nginx.conf**

```
worker_processes  1;

error_log  logs/error.log;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    upstream app1 {
        server 127.0.0.1:4000;
    }

    upstream app2 {
        server 127.0.0.1:5000;
    }

    server {
        listen       80;
        server_name  localhost;

        location /dev {
            rewrite /(.*) /$1 break;
            proxy_pass http://app1;
        }

        location /test {
            rewrite /(.*) /$1 break;
            proxy_pass http://app2;
        }        
    }
} 
```

**App1 - application.conf**

```
application.context=/dev 
```

**App2 - application.conf**

```
application.context=/test 
```

## 问题

使用此配置，我可以访问这两个应用程序，但只加载了 html 代码。未加载所有静态文件（css、js、图像）。

我认为这是缓存问题。我尝试过使用不同的 nginx 参数，但没有运气。如果我第一次请求该站点，浏览器会以状态但没有内容的方式响应（例如文件`css`和文件） - 。下一次它以 响应，仍然没有内容。`js``127.0.0.1/dev/assets/stylesheets/main.css``200``Content-Length: 0``304`

我不确定这是不是`nginx`配置`Play 2.1`问题。

我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:43:16.150

使用本*地域*`http://test.loc/`，而`http://dev.loc`不是依赖子文件夹。虽然`application.context` *应该*工作，但我看到很多帖子抱怨他们没有......

更重要的是使用*本地域*更类似于最终的生产环境，因此调试一些依赖于 url 的东西更容易，比如 ie。饼干。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T18:53:35.177

尽管这不能直接回答您的问题，但我通过传递参数让它在**HAProxy中工作：**`X-Script-Name`

```
frontend  public
  bind *:80
  use_backend playapp if { path_beg /playapp }

backend playapp
  acl is-ssl  dst_port 443
  reqadd X-Script-Name:\ /playapp
  reqadd X-Scheme:\ https  if is-ssl
  option forwardfor
  server playapp1 127.0.0.1:9000 check 
```

# rust - 在 Rust 中，Haskell 的 [n..m] 的惯用等价物是什么？

> ID：15836096
> 
> 赞同：16
> 
> 时间：2013-04-05T14:08:56.113
> 
> 标签：rust

如何生成包含 Rust 中所有整数的列表？我正在寻找与 Haskell`[n..m]`或 Python相当的`range(n, m+1)`东西，但找不到任何东西。

我知道这个`int::range`函数，并认为它是我正在寻找的，但它是在一个范围内迭代，而不是产生它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-05-18T21:37:03.430

现在可以`..=`在 Rust 中使用：

```
let vec: Vec<_> = (n ..= m).collect(); 
```

为您提供`Vec`从 到 的所有`n`数字`m`。

`..=`是包含范围运算符，而是`..`排除的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-06T21:27:52.740

> **请注意**，此答案适用于 1.0 之前的 Rust 版本，不适用于 1.0。具体来说，`Vec::from_fn`被删除了。

到目前为止，可能没有什么真正地道的东西。有一些方便的函数来构造向量，例如你可以使用[`Vec::from_fn`](https://doc.rust-lang.org/0.12.0/collections/vec/struct.Vec.html#method.from_fn)：

```
Vec::from_fn(m+1-n, |i| i+n) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-03T07:11:08.067

> **请注意**，此答案适用于 1.0 之前的 Rust 版本，不适用于 1.0。具体来说，`std::iter::range`并被`std::iter::range_inclusive`删除。

从 Rust 1.0.0-alpha 开始，实现这一点的最简单方法是使用模块中提供的便利函数[`std::iter`](https://doc.rust-lang.org/1.0.0-alpha/std/iter/index.html):[`range`](https://doc.rust-lang.org/1.0.0-alpha/std/iter/fn.range.html)和[`range_inclusive`](https://doc.rust-lang.org/1.0.0-alpha/std/iter/fn.range_inclusive.html)，它返回生成范围为 [low, high) 或 [low, high] 的数字列表的迭代器， 分别。

此外，您可以使用以下[`collect`](https://doc.rust-lang.org/1.0.0-alpha/std/iter/trait.IteratorExt.html#tymethod.collect)方法从迭代器构建向量：

```
use std::iter::range_inclusive;
let first_hundred: Vec<i32> = range_inclusive(1, 100).collect();
println!("upper bound inclusive: {:?}, exclusive: {:?}",
         first_hundred,
         range(101, 201).collect::<Vec<_>>()); 
```

请注意， 的返回值`collect`在上面的两种用法中都明确指定了其类型。通常，Rust 编译器可以在没有明确说明的情况下推断表达式的类型，但这`collect`是无法完全推断类型的最常见情况之一，在这种情况下，因为它无法推断出实现 trait 的具体类型`FromIterator<A>`，的返回类型`collect`。

泛型返回值的类型可以指定为`let`定义语句中的显式类型，也可以使用`function::<Type>()`语法指定为内联类型。由于推理失败只是因为不知道实现的具体类型`FromIterator<A>`，所以在显式指定泛型类型时，可能会为将被推断的类型参数留下“漏洞”，由 . 表示`_`。这是通过对`collect`上面的第二次调用完成的——在表达式`Vec<_>`中，它明确指定从容器接收元素`collect`是 a `Vec<T>`，但编译器会确定确切的类型`T`必须是什么。目前，未指定类型且无法推断`i32`的整数默认回退到（32 位机器整数）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-01-19T14:51:26.090

从 Rust 1.26.0 开始，您可以使用[`RangeToInclusive`](https://doc.rust-lang.org/std/ops/struct.RangeToInclusive.html)( `..=`) 运算符生成包含范围。

```
let v: Vec<_> = (n..=m).collect() 
```

# matlab - Matlab打开视频出错

> ID：15836111
> 
> 赞同：0
> 
> 时间：2013-04-05T14:09:36.287
> 
> 标签：matlab, video, matlab-guide

我在 Matlab 2012a 中需要帮助，因为这是我第一次使用它。

当我在matlab中编写打开视频“mmread（'jp.avi'）”的函数时，会弹出一个错误，如下所示：

使用 FFGrab 时出错无法打开文件

mmread 中的错误（第 146 行）FFGrab('build',filename,fmt,double(disableVideo),double(disableAudio),double(trySeeking));

注意：我把这个 avi 视频放在 mmread 文件夹中。

我在互联网上搜索了有关此问题的信息，但不幸的是我没有得到任何结果。

如果您有任何可行的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:15:49.443

该错误意味着 MATLAB 找不到该文件。你不应该把东西放在 MATLAB 拥有的文件夹中。相反，将其放在您知道位置的文件夹中，并在您启动 MATLAB 会话时（或使用顶部的当前文件夹下拉菜单，或使用命令`cd`）。然后它就可以在没有完全限定路径的情况下供您使用。

另外，我认为您不应该`mmread`直接使用；您应该改用[`VideoReader`该类](http://www.mathworks.co.uk/help/matlab/ref/videoreaderclass.html)；在链接文档页面的底部有一个使用示例。

# javascript - Ext Js 4 gmpanel 动态更改中心

> ID：15836114
> 
> 赞同：2
> 
> 时间：2013-04-05T14:09:43.343
> 
> 标签：javascript, google-maps, extjs

我有一个简单的 gmappanel (extjs 4.1.1)。如何更改地图的“中心”并以新坐标的中心刷新我的窗口？

我的代码是：

```
Ext.Loader.setConfig({
        enabled : true
    });
Ext.require(['Ext.window.*', 'Ext.ux.GMapPanel']);

Ext.define('AM.view.gmapwindow.GoogleMap', {
extend : 'Ext.window.Window',
alias : 'widget.gmapw',
autoShow : true,
title : 'map',
closeAction : 'hide',
width : 460,
height : 500,
border : false,
x : 40,
y : 60,
items : [{
            layout : {
                type : 'hbox',
                align : 'stretch'
            },
            flex : 1,
            items : [{
                        xtype : 'textfield'
                    }, {
                        xtype : 'button',
                         handler: function() {
//--------------------
//modify here the center 
//geoCodeAddr:'Suisse Romande, Avenue de la Gare, Sion, Svizzera'
//---------------------
                            }
                    }]
        }, {
            width : 450,
            layout : 'fit',
            height : 450,
            border : false,
            items : {
                xtype : 'gmappanel',
                center : {
                    geoCodeAddr : '4 Yawkey Way, Boston, MA, 02215-3409, USA'

                },

                markers : []
            }
        }] 
```

});

地图显示得很好，但如果我尝试更改中心编辑

> 地理编码地址

使用以下代码

```
this.up('gmapw').down('gmappanel').center.geoCodeAddr='Suisse Romande, Avenue de la Gare, Sion, Svizzera'; 
```

没发生什么事。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:58:46.330

如果您查看[GMapPanel.js](http://docs.sencha.com/ext-js/4-1/extjs-build/examples/ux/GMapPanel.js)，您会看到在创建地图时使用`afterFirstLayout()`了in 。`geoCodeAddr`在布局之后设置它不会做任何事情，因为`afterFirstLayout()`不会再次被调用。

您应该对您的地址进行地理编码并使用它在地图上设置中心。像下面这样的东西应该可以工作：

```
var map = this.gmap;
var geocoder = new google.maps.Geocoder();
var request = {address: 'Suisse Romande, Avenue de la Gare, Sion, Svizzera'};
var callBack = function(geocoderResults, geocoderStatus) {
    if(geocoderStatus === 'OK') {
        var location = geocoderResults[0].geometry.location;
        var latLng = new google.maps.LatLng(location.lat(), location.lng());
        map.setCenter(latLng);
    }
}
geocoder.geocode(request,callBack); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:57:07.887

我已经修改了 Arun V 答案，使其完全适用于我的示例。

再次感谢 Arun V：

```
var request = {address: 'Suisse Romande, Avenue de la Gare, Sion, Svizzera'};
var callBack = function(geocoderResults, geocoderStatus) {
    if(geocoderStatus === 'OK') {
        var location = geocoderResults[0].geometry.location;
        var latLng = new google.maps.LatLng(location.lat(), location.lng());
        //get current Id from document useful if you have more than one map
        //you can't use "this.gmap" reference here because it's not in your scope
        var idMapW = this.document.activeElement.id;
        Ext.ComponentQuery.query('#'+idMapW)[0].down('gmappanel').gmap.setCenter(latLng);
        }
    };
    this.up('gmapw').down('gmappanel').geocoder.geocode(request,callBack); 
```

# ios - CoreData - 我什么时候保存？

> ID：15836115
> 
> 赞同：2
> 
> 时间：2013-04-05T14:09:58.083
> 
> 标签：ios, objective-c, ios5, core-data, ios6

我了解如何使用 CoreData，但我很困惑何时最好保存数据。当他们按下主页按钮时？在应用程序崩溃的情况下每次交互？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:26:03.213

保存数据是一个单独的调用的原因是，您可以批量处理多个较小的更改，这些更改包含一个较大的操作并一次保存，而不是在沿途的每个步骤中保存。

您应该在每次原子操作后保存数据，并且永远不要让提交的数据在任何重要的时间段内仅位于内存中。

每次用户提交对数据的更改时，他们都希望下次运行应用程序时数据会存在，因此确保数据存在是您的工作。

在您的用户提交对数据的更改后，您的应用程序可能会等待用户执行其他操作，因此请在用户决定下一步做什么时保存数据。

如果您等待在 中保存数据`applicationDidEnterBackground`，则无法保证它会被调用。

显然，并非所有数据都是关键的，例如，用户在表单上输入但尚未提交的数据并不关键。但是，任何提交的数据都是至关重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:14:55.803

我认为节省每次交互不是一个好主意（老实说，您的应用程序不应该在“每次”交互时崩溃；））。我只保存在我的应用程序中

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

事实上，关于崩溃，你是对的。但是如果无效数据导致崩溃怎么办？因此，您将在最坏的情况下重新加载数据，使其每次都崩溃。

但老实说，这只是一个有根据的猜测——我认为这取决于您的数据/应用程序的敏感程度

编辑：这个答案提供了类似的意见[在崩溃之前保存核心数据上下文](https://stackoverflow.com/questions/15210276/saving-core-data-context-before-crashing)

但是我错过了一个非常好的观点：

> 每当用户执行关键操作时，您都应该保存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:19:20.877

如果你在后台保存，你可以经常这样做而不会对用户体验造成太大的伤害。请记住，您可能需要更新 UI，这会产生影响（保存到主线程后合并将在主线程上完成）。
让您节省少量（少量对象），以免停止主线程。
它非常依赖于您的 CoreData 堆栈架构。
您将希望节省进入后台或用户重要数据/需求等关键时刻。

# php - 从 PHP 执行 python 脚本以打开套接字

> ID：15836116
> 
> 赞同：4
> 
> 时间：2013-04-05T14:10:02.203
> 
> 标签：php, python, permissions

我有一个 python 脚本 chatserver.py 包括：-

```
#!/usr/bin/python
from twisted.internet.protocol import Protocol, Factory
from twisted.internet import reactor
<SNIP>
reactor.listenTCP(3800, factory)
print "Server Started"
reactor.run() 
```

这会在端口 3800 上打开一个套接字，如果我从 SSH 开始，它可以工作，但我想检查打开的端口，如果它关闭，则使用 PHP 重新打开，但我似乎无法执行 python 脚本。

这是我目前通过 PHP 调用它的方式

```
function serverCheck() {
   $host = "MYHOST";
   $port = 3800;
   $connection = @fsockopen($host, $port);

   if ( !is_resource($connection) ) { // port not open
       exec('/usr/bin/python PATH_TO_FILE/chatserver.py 2>&1');

    if($connection)
       fclose($connection);
} 
```

我已经尝试了很多我在搜索中找到的东西，但我似乎无法让文件执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:37:42.970

看起来是权限问题。`chatserver.py`就目前而言，需要`root`用户运行它。

不要只是`chmod 777 chatserver.py`。那很危险。

我喜欢的方式是为这些管理任务创建一个组：

```
groupadd chatserver 
```

然后将自己添加到该组：

```
usermod -a -G chatserver willroberts 
```

然后更改`chatserver.py`为该组拥有：

```
chown root:chatserver chatserver.py 
```

当您的用户运行 php 时，它将具有正确的组成员身份来运行 py 文件。这种方法为更多“聊天服务器”可执行文件提供了更大的灵活性。如果您有兴趣，可以阅读以下内容：[https](https://wiki.archlinux.org/index.php/Users_and_Groups) ://wiki.archlinux.org/index.php/Users_and_Groups和[http://www.tldp.org/LDP/intro-linux/html/sect_03_04.html](http://www.tldp.org/LDP/intro-linux/html/sect_03_04.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:08:09.813

问题已解决:)

最后是shebang：| 我知道……我觉得自己很愚蠢！

它应该是 #!/usr/bin/python 但由于某种原因，我通过各种测试改变了它！

感谢您在这方面的帮助。非常感激！

# hibernate - 如何使用@JoinTable 注释映射@Version

> ID：15836119
> 
> 赞同：1
> 
> 时间：2013-04-05T14:10:10.313
> 
> 标签：hibernate, version-control, annotations

我有一个映射表说它`EMP_ADD`维护`EMPLOYEE`和`ADDRESS`表之间的映射。现在要进行此映射，我在`Employee`课堂上使用以下映射

```
@OneToMany
@JoinTable(name="EMP_ADD", joinColumns={@JoinColumn(name="emp_id")}, inverseJoinColumns={@JoinColumn(name="add_id")})
List<Address> lstAdd; 
```

而在`Address`课堂上

```
@ManyToOne(fetch=FetchType.EAGER, cascade=CascadeType.REFRESH)
@JoinTable(name="EMP_ADD", joinColumns={@JoinColumn(name="add_id")}, inverseJoinColumns={@JoinColumn(name="emp_id")})
Employee objEmp; 
```

现在我又创建了一个列，`EMP_ADD`用于`version_number`在更新记录时处理行版本。正如我们所看到的，没有任何 pojo for`EMP_ADD`所以我不能使用`@Version`注释。任何人都知道如何处理版本`@JoinTable`吗？

# matlab - 随机数 - 选择种子

> ID：15836126
> 
> 赞同：0
> 
> 时间：2013-04-05T14:10:24.790
> 
> 标签：matlab, random, gaussian, normal-distribution

由于一个项目，我必须使用正态分布的伪随机数。

在这方面，我通常把它放下：

```
nn_u = complex((normrnd(0,1.0,size(H_u))),(normrnd(0,1.0,size(H_u))));
nn_v = complex((normrnd(0,1.0,size(H_u))),(normrnd(0,1.0,size(H_u))));
nn_w = complex((normrnd(0,1.0,size(H_u))),(normrnd(0,1.0,size(H_u))));
size(H_u) = [4096,1]; 
```

这样我就无法真正访问种子编号。我期望的是，使用上述形式，将有 6 个种子，这意味着对于被称为`normrnd`函数的六次中的任何一次都有一个不同的种子。

我现在想做的是生成六个独立的表示，就像上面发生的那样，只有一个种子点，我可以从 range 中挑选出来`[1,999]`。

为了实现这一点，我想以这种方式进行：

```
n = 4096;
nn_tmp = normrnd(0,1,[n*6,1]);
nn_u = complex(nn_tmp(1:n,1),nn_tmp(n+1:2*n,1));
nn_v = complex(nn_tmp(2*n+1:3*n,1),nn_tmp(3*n+1:4*n,1));
nn_w = complex(nn_tmp(4*n+1:5*n,1),nn_tmp(5*n+1:6*n,1)); 
```

但是这样一来，我就无法直接访问种子；我什至不知道我所做的那种操作是否有任何强有力的理论验证。

欢迎任何支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:25:00.943

我认为您可以使用[rng](http://www.mathworks.com/help/matlab/ref/rng.html)播种，然后使用`randn`而不是`normrnd`解决您的问题

所以像

```
SEED = 120; %for example
rng(SEED, 'twister');
nn_u = complex(randn(size(H_u)),randn(size(H_u)));
nn_v = complex(randn(size(H_u)),randn(size(H_u)));
nn_w = complex(randn(size(H_u)),randn(size(H_u))); 
```

# functional-programming - 方案环境中的破坏性操作

> ID：15836127
> 
> 赞同：1
> 
> 时间：2013-04-05T14:10:34.770
> 
> 标签：functional-programming, scheme, evaluation, destruction

我对 Scheme 中的破坏性操作感到困惑。假设我在全局环境中定义了一个列表和一些破坏性程序：

```
(define a '(a b c))
(define (mutate-obj x)
    (set! x '(mutated)))
(define (mutate-car! x)
    (set-car! x 'mutated))
(define (mutate-cdr! x)
    (set-cdr! x 'mutated)) 
```

然后我们有以下表达式评估：

```
(mutate-obj! a) a => (a b c)
(mutate-car! a) a => (mutated b c)
(mutate-cdr! a) a => (mutated . mutated) 
```

为什么两者兼有时对其程序外没有`set!`影响？为什么第一行的表达式不计算为？这一切究竟是如何运作的？`a``set-car!``set-cdr!``(mutated)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:16:36.620

第一个例子没有像你想象的那样工作。尽管`x`参数和`a`全局变量都指向同一个列表，但是当您执行时，`(set! x '(mutated))`您只需将`x`（过程的本地参数）设置为指向不同的列表，并且`a`保持不变。如果你写这个会有所不同：

```
(define (mutate-obj)
  (set! a '(mutated))) 
```

现在`a`在过程中发生变异。第二个和第三个过程正在修改列表的*内容*，`a`也由 指向`x`，因此一旦过程返回，更改就会反映在“外部”。

# ruby - DRb：如何检查远程对象是否存在？

> ID：15836130
> 
> 赞同：0
> 
> 时间：2013-04-05T14:10:39.130
> 
> 标签：ruby, ipc, drb

我一直在玩弄 DRb，将其用作跨多个进程进行通信的解决方案。我正在使用标准进程：一个创建服务，将其注册到 druby uri，而在另一个进程上创建引用该 URI 的 DRbObject。到目前为止，一切都很好。假设我杀死了第一个进程。远程对象上的每个后续方法调用都将导致 ECONNRefused 异常。这是公平的。但是有没有办法查看 DRbObject 是否确实在给定的 URI 中注册？我认为通过在每个实例上强制一个 ECONNRefused 来测试它是否存在有点愚蠢。

当然，其他涉及 DRb 以外的资源的解决方案总是受欢迎的，只要它们确实代表一个加分项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T15:15:54.467

这可能不是您要寻找的，但我在 DRb 之上开发了一个 IPC 框架，它从应用程序级别隐藏了所有 DRb 内容。这包括客户端方法来查找已通过网络向服务器注册的任何服务。可能对您来说开销太大，但也许值得一试。无论如何，你可以在[Github](https://github.com/osburn-sharp/jerbil)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:29:30.903

您应该查看[ZeroMQ](http://www.zeromq.org/%22ZeroMQ%22)。它的设置比 DRb 稍微复杂一些，但它主要透明地处理所有存在/重新连接问题。

# java - 同一个控制器 Spring MVC 中的多个用户

> ID：15836136
> 
> 赞同：0
> 
> 时间：2013-04-05T14:11:06.273
> 
> 标签：java, tomcat, spring-mvc, web, controller

我开始为 Web 开发，我使用 Spring MVC 作为我的服务器框架。现在我想知道在 Controller 类中创建变量。我必须这样做来管理服务器中的一些数据，但现在我担心以下情况：如果我有多个用户同时向同一个页面发送信息，一个用户是否会干扰另一个用户变量?

这是一些代码示例：

```
@Controller
public Class myController {

    int number;

    @RequestMapping("/userInformation")
    public String getInformation(int info) {
       number = info;
    }

    public void doSomethingWithIt() {
       number = number + 1;
   }

} 
```

在这种情况下，如果我有多个用户同时向 /userInformation 发送数据，Spring MVC 会为每个用户创建一个控制器吗？这样我就没有问题了，我想。但如果不是，我必须重新考虑这个实现，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:14:01.987

你说的对。控制器是单例的，必须是无状态的。服务器端状态属于会话或数据存储。您还可以使用请求范围对象（查看 spring 中的 bean 范围）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:15:59.570

Spring 容器将创建一个 Controller 实例。所以所有用户都将共享该实例。

如果您有用户私有的数据，您有多种选择：

1.  将其存储在 HTTP 会话中（如果数据量很大，则不推荐，因为您的内存使用量可能会爆炸）
2.  将其存储在数据库中，并根据标识用户的某些属性在每次请求时检索它
3.  将其存储在内存缓存中，并根据标识用户的某些属性在每次请求时检索它

选项 3 是其中最简单的一个，如果您愿意，您甚至可以将其作为`Map<User, UserData>`实例变量实现`Controller`。它不是最干净、最漂亮或最安全的选择，只是最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:15:13.490

您不应在 Spring Controller 中使用任何表示控制器类状态的实例变量。它不应该有状态，因为它的单一实例。相反，您可以引用注入的托管 bean。

# formula - 规则中的 InfoPath 公式

> ID：15836143
> 
> 赞同：0
> 
> 时间：2013-04-05T14:11:26.487
> 
> 标签：formula, infopath2010

我是在 infopath 中编写公式的新手，看不到我在以下方面做错了什么：

```
if (contains(userName(), "\"))
{
substring-after(userName(), "\")
}
else
}
 userName()
} 
```

以上是第一个大括号的错误

我可以编写 2 条规则来实现相同的目标，但如果可以的话，我想使用上述方法！？

这是 infoPath 2010 中的表单加载规则

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:07:51.733

发现这似乎可以解释它，以防其他人有同样的问题......

[http://blogs.msdn.com/b/infopath/archive/2006/11/27/conditional-default-values.aspx](http://blogs.msdn.com/b/infopath/archive/2006/11/27/conditional-default-values.aspx)

# ruby - 使用费马分解方法的最大素因子 Ruby

> ID：15836144
> 
> 赞同：1
> 
> 时间：2013-04-05T14:11:27.680
> 
> 标签：ruby, algorithm

在正常时间段内，我的代码似乎适用于 6-8 位数字。当我输入更大的值时，数量会变得非常荒谬。完成需要4个多小时。这是我的代码。

```
#Fermat's factorization method

def get_largest_prime n
    t=(Math.sqrt(n)+1).floor
    k=0
    prime_numbers=[]
    while (t+k)<n
        element = (t+k)**2-n
        if is_integer? Math.sqrt(element)
            #store prime numbers
            prime_numbers << t+k+Math.sqrt(element)
            prime_numbers << t+k-Math.sqrt(element) 
            #puts "Prime Factors of #{n} are: #{t+k+Math.sqrt(element)} and #{t+k-Math.sqrt(element)}"
        end
        k+=1
    end
  puts "Prime Factors: "+prime_numbers.to_s 
end

#making sure 450.0 is 450, for example.
def is_integer? number
    number.to_i == number ? true : false
end

get_largest_prime 600851475143 
```

运行此程序将需要 4 个多小时。

但是，例如为值“600851”或“60085167”运行它并不需要很多时间。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:35:42.213

首先请注意，费马因式分解通常不会为您提供主要因素。

然后，你运行它直到`t+k >= n`，这意味着你运行`while`循环`n - t`时间，因为`t`大致是`sqrt(n)`，这是一个`O(n)`算法。对于`n`像 600851475143 （大约 6*10^11）这样的大文件，这肯定需要很长时间。

您需要更改算法。当你找到一对除数（都大于 1）时，递归地分解它们。如果找到的因子中较小的一个为 1，则这是一个素因子。

这样做（原谅糟糕的风格，我几乎不知道红宝石）：

```
#Fermat's factorization method

def get_largest_prime n
    t=(Math.sqrt(n)+1).floor
    k=0
    prime_numbers=[]
    while (t+k)<n
        element = (t+k)**2-n
        if is_integer? Math.sqrt(element)
            #store prime numbers
            a = t+k+Math.sqrt(element)
            b = t+k-Math.sqrt(element)
            if b == 1
                prime_numbers << a
                break
            end
            prime_numbers += get_largest_prime a
            prime_numbers += get_largest_prime b
            break
            #puts "Prime Factors of #{n} are: #{t+k+Math.sqrt(element)} and #{t+k-Math.sqrt(element)}"
        end
        k+=1
    end
  return prime_numbers
end

#making sure 450.0 is 450, for example.
def is_integer? number
    number.to_i == number ? true : false
end

a = get_largest_prime 600851475143
puts "Prime Factors: "+a.to_s 
```

快速解决给定的问题。

但是，对于没有接近平方根的除数的数字，仍然需要很长时间。

试验除法的标准分解具有更好的最坏情况行为（`O(sqrt(n)`最坏情况）。不过，混合方法可能比纯试除法稍快一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:20:04.007

这里有两个效果：

1) 当一个整数在 Ruby 中大于 2**31 时，它使用不同的、更慢的表示

2）一旦数字变得足够大，没有已知的分解算法最终不会表现不佳 - 从技术上讲，它们都比您想要分解的数字（位数）的任何多项式都慢。

你可以通过使用加快速度

```
Math.sqrt(element) 
```

较少的。在所有测试之前将其结果分配给变量。请注意，这不会“解决”您的问题。最终它不会在某个数字以上运行得足够快 - 即使您将所有内容都转移到 C （尽管您可能会在 C 变慢之前挤出几个额外的数字）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T14:09:56.043

可能，您可以尝试下面的代码。

```
def prime_factor limit
    (2..Math.sqrt(limit).to_i).inject([]) do |memo, var|
        memo << var if limit % var == 0 and !memo.any? {|d| var % d == 0}
        memo
    end
end
prime_result = prime_factor 600851475143
puts prime_result.max 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-11T11:42:37.780

您使用的循环越少，您的代码运行速度就越快；-)（更少的 cpu 周期）。尝试[在这个找到最大素数的程序上递归地做所有事情](https://github.com/RoboEvangelist/Project-Euler/blob/master/C%2B%2B_solutions/problem3.cpp)

# iphone - 将文件类型与我的 Iphone App 关联

> ID：15836145
> 
> 赞同：3
> 
> 时间：2013-04-05T14:11:29.117
> 
> 标签：iphone, ios, cocoa-touch, file-type

我正在尝试将文件类型与我的应用程序（pdf 和 doc）相关联。对于pdf，没关系。我阅读了这个主题：[如何将文件类型与 iPhone 应用程序相关联？](https://stackoverflow.com/questions/2774343/how-do-i-associate-file-types-with-an-iphone-application)

它工作得很好。但是我尝试添加 .doc 类型，但它不起作用。

**编辑：它适用于此代码（PDF、WORD 和 EXCEL）：**

这是我的 app-info.plist：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeIconFiles</key>
        <array>
            <string>Icon.png</string>
            <string>Icon@2x.png</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>My Apps Files</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.composite-content</string>
            <string>public.data</string>
            <string>public.content</string>
        </array>
    </dict>
</array>
<key>UTExportedTypeDeclarations</key>
<array>
    <dict>
        <key>UTTypeIdentifier</key>
        <string>com.adobe.pdf</string>
        <key>UTTypeDescription</key>
        <string>PDF Document</string>
        <key>UTTypeConformsTo</key>
        <array>
            <string>public.data</string>
            <string>public.composite-content</string>
        </array>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <array>
                <string>pdf</string>
            </array>
            <key>public.mime-type</key>
            <string>application/pdf</string>
        </dict>
    </dict>
    <dict>
        <key>UTTypeIdentifier</key>
        <string>com.microsoft.word.doc</string>
        <key>UTTypeDescription</key>
        <string>Word Document</string>
        <key>UTTypeConformsTo</key>
        <array>
            <string>public.data</string>
        </array>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <array>
                <string>doc</string>
            </array>
            <key>public.mime-type</key>
            <string>application/msword</string>
        </dict>
    </dict>
    <dict>
        <key>UTTypeIdentifier</key>
        <string>com.microsoft.excel.xls</string>
        <key>UTTypeDescription</key>
        <string>Excel Document</string>
        <key>UTTypeConformsTo</key>
        <array>
            <string>public.data</string>
        </array>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <array>
                <string>xls</string>
            </array>
            <key>public.mime-type</key>
            <string>application/vnd.ms-excel</string>
        </dict>
    </dict>
</array> 
```

希望它可以帮助某人:)

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T12:27:33.660

这是 Doc 文件格式的代码，但它可能不适用于图像。

```
<dict>
<key>CFBundleTypeName</key>
<string>Microsoft Word</string>
<key>LSHandlerRank</key>
<string>Alternate</string>
<key>LSItemContentTypes</key>
<array>
<string>com.microsoft.word.doc</string>
            <string>com.microsoft.word.wordml</string>
            <string>org.openxmlformats.wordprocessingml.document</string>
        </array>
    </dict> 
```

# mongodb - 像mongokit这样的pymongo python3是否有类似orm的层？

> ID：15836146
> 
> 赞同：2
> 
> 时间：2013-04-05T14:11:38.163
> 
> 标签：mongodb, python-3.x

可悲的是 Mongokit 不支持 python3 ...... Humongolus 也不支持 ..

# sql - MS Access Asynchronous Queries

> ID：15836147
> 
> 赞同：2
> 
> 时间：2013-04-05T14:11:45.733
> 
> 标签：sql, ms-access, asynchronous, vba, ms-access-2010

I have a basic `SELECT` query fired from an Access form that takes a while to execute, so I would like to run the query asynchronously and allow my users to continue using the form (or at least keep them updated on the progress).

The problem is that Access freezes the application when code is being executed, appearing to the users to have crashed - even to the point of Windows marking it 'Not Responding' and offering to kill it. Obviously not very user-friendly! I have tried using the code listed on the MSDN [here](http://support.microsoft.com/kb/262311) and a variant method [here](http://bytes.com/topic/access/insights/905648-asynchronous-query).

Both these solutions do seem to run the query 'asynchronously' (the code block firing the async query completes, and the `rs_FetchProgress` and `rs_FetchComplete` events (or `cn_ExecuteComplete` event in the second solution) fire and run... but Access's interface still locks up until the query is done executing. Calling `Repaint` and `DoEvents` in various places (such as the `rs_FetchProgress` event) does not seem to have any effect.

I doubt it's relevant information, but the view being `SELECT`ed from is in SQL Server, the view doesn't return a huge amount of data but does take about 20 seconds to process.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:22:30.530

打开表单时不要拉出巨大的记录集。表单基于一个查询，它在第一次加载时只提取很少甚至没有记录。然后为用户提供一种方法来选择不同的合理大小的记录子集。

无论您的数据源是链接的 Access 表还是客户端-服务器数据库，都尽量避免拉取大量记录集。

# c# - MSChart : How to add custom label in bar chart

> ID：15836156
> 
> 赞同：0
> 
> 时间：2013-04-05T14:12:16.387
> 
> 标签：c#, mschart

I want to add custom label something like that ( Category 1 and Category 2 ) but not getting idea whether I need to add new series or using custom label function.. Any help would be much appreciated.

![enter image description here](https://i.stack.imgur.com/9FvWx.png)

Here is my Data Table,

```
 DataTable dt = new DataTable();

    DataColumn dc;

    dc = new DataColumn();
    dc.ColumnName = "Question";
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.ColumnName = "Section";
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.ColumnName = "User1";
    dt.Columns.Add(dc);

    dc = new DataColumn();
    dc.ColumnName = "User2";
    dt.Columns.Add(dc);

    DataRow dr;
    dr = dt.NewRow();

    dr["Question"] = "A";
    dr["Section"] = "Category 1";
    dr["User1"] = "1";
    dr["User2"] = "2";

    dt.Rows.Add(dr);

    dr = dt.NewRow();

    dr["Question"] = "B";
    dr["Section"] = "Category 1";
    dr["User1"] = "4";
    dr["User2"] = "5";

    dt.Rows.Add(dr);

    dr = dt.NewRow();

    dr["Question"] = "C";
    dr["Section"] = "Category 1";
    dr["User1"] = "2";
    dr["User2"] = "5";

    dt.Rows.Add(dr);

    dr = dt.NewRow();

    dr["Question"] = "X";
    dr["Section"] = "Category 2";
    dr["User1"] = "3";
    dr["User2"] = "5";

    dt.Rows.Add(dr);

    dr = dt.NewRow();

    dr["Question"] = "Y";
    dr["Section"] = "Category 2";
    dr["User1"] = "5";
    dr["User2"] = "1";

    dt.Rows.Add(dr);

    dr = dt.NewRow();

    dr["Question"] = "Z";
    dr["Section"] = "Category 2";
    dr["User1"] = "6";
    dr["User2"] = "5";

    dt.Rows.Add(dr); 
```

My Chart plotting code,

```
 Series Series = new Series("Series1");
    Chart4.Series.Add("Series1");
    Chart4.Series.Add("Series2");

    Chart4.ChartAreas.Add("ChartArea1");

    // Set series chart type
    Chart4.Series["Series1"].ChartType = SeriesChartType.Bar;
    Chart4.Series["Series2"].ChartType = SeriesChartType.Bar;

    // Draw as 3D Cylinder
    Chart4.Series["Series1"]["DrawingStyle"] = "Cylinder";
    Chart4.Series["Series2"]["DrawingStyle"] = "Cylinder";

    Chart4.DataSource = dt.DefaultView;

    Chart4.ChartAreas["ChartArea1"].AxisX.Interval = 1;

    Chart4.Series["Series1"].XValueMember = "Question";
    Chart4.Series["Series1"].YValueMembers = "User1";
    Chart4.Series["Series2"].YValueMembers = "User2";

    Chart4.DataBind(); 
```

> Solution

```
 DataTable dt = new DataTable();

            DataColumn dc;

            dt.Columns.Add("Id", typeof(int));

            dc = new DataColumn();
            dc.ColumnName = "Question";
            dt.Columns.Add(dc);

            dc = new DataColumn();
            dc.ColumnName = "Section";
            dt.Columns.Add(dc);

            dc = new DataColumn();
            dc.ColumnName = "User1";
            dt.Columns.Add(dc);

            DataRow dr;

            dr = dt.NewRow();

            dr["Question"] = "AA";
            dr["Id"] = 1;
            dr["Section"] = "Category1";
            dr["User1"] = "6";

            dt.Rows.Add(dr);

            dr = dt.NewRow();

            dr["Question"] = "BB";
            dr["Id"] = 2;
            dr["Section"] = "Category1";
            dr["User1"] = "1";

            dt.Rows.Add(dr);

            dr = dt.NewRow();

            dr["Question"] = "XX";
            dr["Id"] = 3;
            dr["Section"] = "Category2";
            dr["User1"] = "3";

            dt.Rows.Add(dr);

            dr = dt.NewRow();

            dr["Question"] = "YY";
            dr["Id"] = 4;
            dr["Section"] = "Category2";
            dr["User1"] = "4";

            dt.Rows.Add(dr);

            dr = dt.NewRow();

            dr["Question"] = "ZZ";
            dr["Id"] = 5;
            dr["Section"] = "Category2";
            dr["User1"] = "2";

            dt.Rows.Add(dr);

            Series Series = new Series("Series1");
            Chart4.Series.Add("Series1");

            Chart4.ChartAreas.Add("ChartArea1");

            Chart4.Series["Series1"].ChartType = SeriesChartType.Bar;

            Chart4.Series["Series1"]["BarLabelStyle"] = "Center";

            Chart4.Series["Series1"]["DrawingStyle"] = "Cylinder";

            Chart4.Series["Series1"].XValueMember = "Question";

            Chart4.Series["Series1"].YValueMembers = "User1";

            Chart4.DataSource = dt;
            Chart4.DataBind();

            foreach (var g in dt.AsEnumerable().GroupBy(x => x.Field<string>("Section")))
            {
                string section = g.Key;
                var questions = g.Select(r => new { Id = r.Field<int>("Id"), Question = r.Field<string>("Question") });
                int min = questions.Min(y => y.Id);
                int max = questions.Max(y => y.Id);

                var sectionlabel=new CustomLabel();
                if (min == max)
                {
                    sectionlabel = new CustomLabel(min - 0.5, max + 0.5, section, 1, LabelMarkStyle.LineSideMark);
                }
                else
                {
                     sectionlabel = new CustomLabel(min, max, section, 1, LabelMarkStyle.LineSideMark);
                }
                Chart4.ChartAreas[0].AxisX.CustomLabels.Add(sectionlabel);

            }

            Chart4.ChartAreas["ChartArea1"].AxisX.Interval = 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-12T05:16:25.667

你试过这个吗？它将为项目 1-3 创建一个组标签。

```
Chart4.ChartAreas["ChartArea1"].AxisX.CustomLabels.Add(1, 3, "Category 1", 1, LabelMarkStyle.LineSideMark); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:38:05.660

最简单的方法是在图表中添加注释

```
TextAnnotation text = new TextAnnotation();
text.Text = 'Category 1';
text.X = 20;
text.Y = 20;
Chart4.Annotations.Add(text); 
```

您还可以使用 LineAnnotation 绘制线条

[http://msdn.microsoft.com/en-us/library/dd456725.aspx](http://msdn.microsoft.com/en-us/library/dd456725.aspx)

# jsf-1.2 - Will jboss seam 1.1 work with JSF 1.2?

> ID：15836160
> 
> 赞同：1
> 
> 时间：2013-04-05T14:12:26.580
> 
> 标签：jsf-1.2, jboss-seam

We have a legacy app which uses seam 1.1\. Its deployed on websphere 7 which has JSF 1.2\. So will it cause any problems? Are seam 1.1 and JSF 1.2 compatible?

Or do i need to upgrade the version of jboss seam which is compatible with jsf 1.2?

**EDIT 1:-**

The reason I am asking this question is that suddenly we are getting following erros

```
 application   E   JSF1007: Duplicate component ID listForm:j_id_jsp_768167483_47:templateItems:j_id_jsp_768167483_77 found in view. 
```

Another team has said that its because of the version mismatch of JSF being used in app and the JSf version supported by websphere 7 which is 1.2.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:24:37.333

是的，它们都是兼容的，不会造成任何问题。

# mysql - 字段为 0 的子顺序

> ID：15836161
> 
> 赞同：0
> 
> 时间：2013-04-05T14:12:26.713
> 
> 标签：mysql

所以我找不到这个问题的答案，我有以下查询：

```
SELECT *
FROM bans
WHERE
    removed = 0
AND
    (
        (`time` + `length` - UNIX_TIMESTAMP()) > 0
    OR
        length = 0
    )
ORDER BY length = 0,(`time` + `length` - UNIX_TIMESTAMP()) 
```

它从一张表中获取所有禁令，并根据何时解除禁令对其进行排序。但是长度为 0 的禁令是永久禁止的，它们应该位于列表的底部。这已经奏效了。但我希望那些永久禁令由banid降序排列。目前它们不是默认的升序排列。

如果我将 asc 放入其中，则孔顺序被拧紧

数据库：

```
CREATE TABLE IF NOT EXISTS `rp_bans` (
  `banid` int(11) NOT NULL AUTO_INCREMENT,
  `steamid` text NOT NULL,
  `name` text NOT NULL,
  `adminid` text NOT NULL,
  `aname` text NOT NULL,
  `reason` text NOT NULL,
  `time` int(11) NOT NULL,
  `length` int(11) NOT NULL,
  `removed` tinyint(1) NOT NULL,
  PRIMARY KEY (`banid`)
) 
```

示例数据：

```
id  time    length  current time    timeleft
1   1365410228  0       1365411228  -1000
2   1365410229  3600    1365411228  2601
3   1365410230  0       1365411228  -998
4   1365410231  84000   1365411228  83003
5   1365410232  3600    1365411228  2604
6   1365410233  0       1365411228  -995
7   1365410234  800000  1365411228  799006 
```

预期结果：

```
id  time    length  current time    timeleft
2   1365410229  3600    1365411228  2601
5   1365410232  3600    1365411228  2604
4   1365410231  84000   1365411228  83003
7   1365410234  800000  1365411228  799006
6   1365410233  0       1365411228  -995
3   1365410230  0       1365411228  -998
1   1365410228  0       1365411228  -1000 
```

因此，如果长度不为 0，则按 timeleft 升序排列（根据时间 + 长度 - 当前时间计算）。当长度为 0 时，它需要按 id 降序排列在长度不为 0 的条目后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:18:19.333

你可以拆分它，`UNION`它们：

```
(SELECT * FROM rp_bans WHERE length > 0 ORDER BY id ASC LIMIT 10) 
UNION
(SELECT * FROM rp_bans WHERE length = 0 ORDER BY id DESC LIMIT 10) 
```

你必须给`LIMIT`他们；来自[文档](http://dev.mysql.com/doc/refman/5.0/en/union.html)：

> 但是，对单个 SELECT 语句使用 ORDER BY 并不意味着行在最终结果中出现的顺序，因为默认情况下 UNION 会生成一组无序的行。因此，在此上下文中使用 ORDER BY 通常与 LIMIT 结合使用，因此它用于确定要为 SELECT 检索的所选行的子集，即使它不一定影响这些行在最终的 UNION 结果。

我发现取`LIMIT`高于结果也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:26:14.150

像这样试试

```
ORDER BY IF(length=0, length DESC ,(`time` + `length` - UNIX_TIMESTAMP()) DESC ) 
```

编辑：

```
ORDER BY
CASE WHEN length=0 = 0 THEN length END DESC,
 (`time` + `length` - UNIX_TIMESTAMP())  DESC 
```

编辑：

```
ORDER BY
CASE WHEN length != 0  THEN length END ASC,
CASE WHEN length =0 then time END  DESC 
```

[演示](http://sqlfiddle.com/#!2/99a9e/21)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:38:22.610

更改`ORDER BY`为

```
ORDER BY length = 0, banid DESC 
```

请注意，由于该`OR`子句，您的查询将始终执行全表扫描。

此查询将执行得更好：

```
 SELECT *
    FROM rp_bans
    WHERE
        removed = 0
    AND
        length = 0
UNION ALL
    SELECT *
    FROM rp_bans
    WHERE
        removed = 0
    AND
        length > 0 AND (time + length) > UNIX_TIMESTAMP()
ORDER BY length = 0, banid DESC 
```

如果添加以下索引：

```
ALTER TABLE rp_bans ADD INDEX removed_length_time (removed, length, time); 
```

一个工作示例位于[http://sqlfiddle.com/#!2/45fa6/2/0](http://sqlfiddle.com/#!2/45fa6/2/0)

# php - laravel 控制器不起作用

> ID：15836162
> 
> 赞同：0
> 
> 时间：2013-04-05T14:12:29.357
> 
> 标签：php, laravel, laravel-routing

1.我正在关注[CodeHappy：Using Controllers](http://codehappy.daylerees.com/using-controllers) to learn to use laravel controllers，在我的PC *“myproject/”*指向*“wamp/www/laravel/public”*文件夹，当我尝试*“myproject/account/login”*时浏览器显示：

* * *

# 未找到

在此服务器上找不到请求的 URL /account/login。

* * *

2\. 很明显，浏览器试图找到“account”文件夹而不是使用控制器，我在“public”下创建了“account”文件夹并再次尝试，我的猜测被证明是正确的。在使用控制器之前我应该​​在任何地方进行配置吗？

### 我的代码：

应用程序/控制器/account.php

```
<?php
class Account_Controller extends Base_Controller
{
    public function action_index(){
        echo "This is the profile page.";
    }
    public function action_login(){
        echo "This is the login form.";
    }
    public function action_logout(){
        echo "This is the logout action.";
    }
} 
```

/application/routes.php

```
 Route::get('/', function()
    {
        return View::make('home.index');
    });
    Route::controller('account'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:06:31.633

@Phill Sparks 完全正确（完全正确！他已经使用 Laravel 多年了）。如果您的浏览器从**服务器**报告 404 ，除非您完全删除 404 事件，否则该请求甚至不会通过 Laravel。

试试`/index.php/account/login`。如果它有效，你就知道你的重写规则是拙劣的。如果它也不起作用，那么你手头有一个更严重的问题。

如果你使用的是 Apache，你应该在你的`htaccess`文件中找到 Laravel 的重写规则。如果您无法通过 htaccess 加载 mod_rewrite，则需要将它们迁移到您的服务器配置。

`server`如果您使用的是 nginx，则在您的块中将需要类似的内容：

```
 location / {
            try_files $uri $uri/ @laravel;
    }
    location @laravelDesktop {
            rewrite ^/(.*)$ /index.php?/$1 last;
    } 
```

或者如果在子目录中

```
 location /my/subdir/ {
            try_files $uri $uri/ @laravel;
    }
    location @laravel {
            rewrite ^/my/subdir/(.*)$ /index.php?/$1 last;
    } 
```

# java - Are there any standard interface for converting Object to String in Java?

> ID：15836166
> 
> 赞同：4
> 
> 时间：2013-04-05T14:12:48.013
> 
> 标签：java, generics, interface

It us useful to emulate lambda in Java but currently you must implement in-place class which implement some interface...

For example a `join` function may get **Stringator** interface, so can join any `List` or `Collection` regardless of contained object:

```
interface Stringator<T> { String toString(T t); }

public static <T> String join(Collection<T> col, String delim, Stringator<T> s) {
    StringBuilder sb = new StringBuilder();
    Iterator<T> iter = col.iterator();
    if (iter.hasNext())
        sb.append(s.toString(iter.next()));
    while (iter.hasNext()) {
        sb.append(delim);
        sb.append(s.toString(iter.next()));
    }
    return sb.toString();
} 
```

I don't know any standard **Stringator** or **ToStringer** interface...

This `join` implementation can simplify beans manipulation. For exanple to get list of books:

```
List<Book> books = ...;
String list =
  join(books, ", ", new Stringator<Book>{ toString(Book b) {return b.getName();} }); 
```

Note that suggestion to use standard **toString** violate Java convention: `toString` for debugging (look for JavaDoc and Java lang spec)!

**UPDATE** Java already have interface which work in other direction - [PropertyEditor](http://docs.oracle.com/javase/1.5.0/docs/api/java/beans/PropertyEditor.html). Each it implementation can construct `Object` from `String`. I look for `String` from `Object`...

**UPDATE 2**. Many people think that I wrongly avoid `toString`. This is from Java 7 Lang Spec (section 6.1):

```
A method that converts its object to a particular format F should be named
toF. Examples are the method toString of class Object and the methods
toLocaleString and toGMTString of class java.util.Date. 
```

So if I have Book objects, `toString` naturally must return ISBN, but that if I need to join book titles? That is why `toString` not so good and `java.text.Format.format` or other looks more natural.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:36:22.467

Override `toString()`，它不违反任何 java 约定，实际上是推荐的做法。

> 返回对象的字符串表示形式。通常，toString 方法返回一个“以文本方式表示”该对象的字符串。结果应该是一个简洁但信息丰富的表示，易于人们阅读。**建议所有子类重写此方法**。

[http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:15:59.413

std java中没有ToStringer之类的接口，可以自己定义，使用

`String stringValue()`

类似于 intValue() longValue() 等，常用于 java

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:25:08.050

有，`java.text.Format.format`但不是很好，是抽象类。

Java SE 8 可能会有一个函子接口，用于在两种任意类型之间进行转换，其中一种可能是`String`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T14:54:40.843

`toString()`除了这样一个事实之外，覆盖没有任何问题，它只为您提供了**一种**将对象表示为字符串的方式。我认为 ganvenkoa 提出的建议可以让您轻松地以自定义方式表达它。想象一下，如果您正在处理一个返回的`Customer`对象，但是当您使用 加入一群客户时，您希望将客户表示为。`toString()``John Smith``join(...)``Smith, John`

我用于这类事情的一件事是一个实用程序，例如`com.google.common.collect.Iterables.transform(Iterable)`（它反过来使用 a `Function`）并将其结果传递给`com.google.common.base.Joiner.join(Iterable)`. 我希望 Java 8 会变得更加优雅

# .net - WMI 类的原始值

> ID：15836174
> 
> 赞同：3
> 
> 时间：2013-04-05T14:13:27.153
> 
> 标签：.net, powershell, vbscript, wmi, jscript

这是一个复杂的想法，我希望你能忍受我，因为它的表达很困难。

似乎某些 WMI 类具有可以查询的原始值，而其他类则没有。这具有现实意义。

### 演示 1

[以Win32_Processor](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx#examples)类为例。据我所知，它的原始值是其实例`DeviceID`列的值。例如，这允许使用整洁的单行查询正在运行的操作系统的体系结构（32 / 64 位），例如这个 JScript 示例：

```
var arch = GetObject("winmgmts:root\\cimv2:Win32_Processor='cpu0'").AddressWidth 
```

在该示例中，`GetObject`充当一种`select instance where primitive value="cpu0"`并返回单个实例，而不是集合。这按预期工作。

### 演示 2

另一方面，[Win32_OperatingSystem](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239%28v=vs.85%29.aspx)类没有我能找到的原始值。与`Win32_Processor`类`DeviceID`列一样，MSDN 文档`Win32_OperatingSystem`声称该`CreationClassName`列是表的`key`字段。

假设可以预见，`CreationClassName=="Win32_OperatingSystem"`。因此，有人可能会推断出类似的单行代码可以这样写：

```
var arch = GetObject("winmgmts:root\\cimv2:Win32_OperatingSystem='Win32_OperatingSystem'").OSArchitecture 
```

**但是，这会导致错误。** 我在使用其他列值的反复试验尝试同样都失败了。`.columname`在类名和类名之间附加`=`也会导致语法错误。

据我所知，`Win32_OperatingSystem`如果不枚举所有实例，就无法识别类的单个实例，即使只有一个实例要枚举。

```
var wmi = GetObject("winmgmts:");
var os = wmi.ExecQuery("select OSArchitecture from Win32_OperatingSystem");
for (var res = new Enumerator(os); !res.atEnd(); res.moveNext()) {
    var arch = res.item().OSArchitecture;
} 
```

这些行可以在某种程度上组合：

```
var os = GetObject("winmgmts:").ExecQuery("select OSArchitecture from Win32_OperatingSystem");
var arch = new Enumerator(os).item().OSArchitecture; 
```

...但是直接在其中查询实例仍然很好，`Win32_OperatingSystem`而不必列举令人讨厌的残留层次结构。

### 问题

如何预测 WMI 类是否具有可查询的原始值，以及哪一列包含该值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:19:39.650

您正在寻找的是“关键”属性。

[http://blogs.msdn.com/b/powershell/archive/2008/04/15/wmi-object-identifiers-and-keys.aspx](http://blogs.msdn.com/b/powershell/archive/2008/04/15/wmi-object-identifiers-and-keys.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:13:27.153

在`powershell`中，[Get-WmiObject](http://ss64.com/ps/get-wmiobject.html) cmdlet（或`gwmi`别名）提供了一些在 MSDN 中不明显或不易获得的见解。通过查询类时，类之间`gwmi`存在一些差异，这些差异要么不好，要么根本没有在其他地方记录（或至少不容易搜索）。以以下`powershell`会话为例：

![在此处输入图像描述](https://i.stack.imgur.com/0Q7xT.png)

您会看到`Win32_Processor`该类具有`__RELPATH`和`__PATH`属性，这些属性引用了该类的原始值`CPU0`; 而`Win32_OperatingSystem`该类没有这样的属性。

这可能是一个强有力的提示，有助于确定您希望查询的类是否必须在被解析之前被完全枚举。

# lua - 这条 LUA 行是什么意思？""%i (%.3f GHz)" %{ f.channel, f.mhz / 1000 })"

> ID：15836179
> 
> 赞同：0
> 
> 时间：2013-04-05T14:13:38.937
> 
> 标签：lua

我对这段代码有疑问

```
ch = s:taboption("general", Value, "channel", translate("Channel"))
ch:value("auto", translate("auto"))
for _, f in ipairs(iw and iw.freqlist or { }) do
    if not f.restricted then
       ch:value(f.channel, "%i (%.3f GHz)" %{ f.channel, f.mhz / 1000 }) //this line?
    end
end 
```

线是做什么的？

```
ch:value(f.channel, "%i (%.3f GHz)" %{ f.channel, f.mhz / 1000 }) 
```

我认为它为 ch 分配了一些值，但我不明白是哪一个，因为我无法完全理解这部分的作用*"%i (%.3f GHz)" %{ f.channel, f.mhz / 1000 }*

提前致谢！

完整代码

```
-- Check whether there is a client interface on the same radio,
-- if yes, lock the channel choice as the station will dicatate the freq
local has_sta = nil
local _, net
for _, net in ipairs(wdev:get_wifinets()) do
    if net:mode() == "sta" and net:id() ~= wnet:id() then
        has_sta = net
        break
    end
end

if has_sta then
    ch = s:taboption("general", DummyValue, "choice", translate("Channel"))
    ch.value = translatef("Locked to channel %d used by %s",
        has_sta:channel(), has_sta:shortname())
else
    ch = s:taboption("general", Value, "channel", translate("Channel"))
    ch:value("auto", translate("auto"))
    -- for _, f in ipairs(iw and iw.freqlist or { }) do
    for _.iw.chanlist, f in ipairs(iw and iw.freqlist or iw.channels) do
        if not f.restricted then
            ch:value(f.channel, "%i (%.3f GHz)" %{ f.channel, f.mhz / 1000 })
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:19:28.990

看起来`%`运算符是通过`__mod`字符串元表的元方法 为字符串定义的

```
getmetatable''.__mod = function(str, tbl)
   return str:format((table.unpack or unpack)(tbl))
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:31:15.220

```
"%i (%.3f GHz)" %{ f.channel, f.mhz / 1000 } 
```

1.  `%i`会将参数解析为整数。
2.  `%.3f`将第二个参数格式化为具有 3 个小数位的浮点数。
3.  `%{}`定义传递给前一个字符串以进行格式化的参数。
    *   第一个参数是`f.channel`
    *   第二个论点是`f.mhz/1000`。

* * *

```
ch:value( f.value, ... ) 
```

与以下相同：

```
ch.value( ch, f.value, ... ) 
```

# bash - Bash 函数，导出函数参数为环境变量

> ID：15836182
> 
> 赞同：2
> 
> 时间：2013-04-05T14:13:45.343
> 
> 标签：bash, export, environment-variables

我编写了一个 bash 函数来导出环境变量。第一个函数参数是变量名，第二个是变量值。我希望`echo`它显示导出的值：

```
#!/bin/bash

env_var_export()
{
    export $1=$2

echo ""
echo "  export $1=$$1"
echo ""
}

env_var_export var defaultVal456 
```

我的意思是， echo 应该打印：`export var=defaultVal456`。有什么帮助吗？我知道我可以这样做：

```
echo ""
echo "  export $1=$2"
echo "" 
```

但它不是我的问题的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:02:06.620

`$$`是一个扩展为 shell 的 pid 的特殊变量，这就是将在您的`echo`. 您应该改为使用这样的间接引用：

```
echo ""
echo "  export $1=${!1}"
echo "" 
```

此语法将获取名为 in 的变量`$1`，然后根据该名称查找值（即间接）。

# email - CRM 4 email router error

> ID：15836186
> 
> 赞同：1
> 
> 时间：2013-04-05T14:13:51.953
> 
> 标签：email, crm, dynamics-crm-4

I heed some help. We have na email router for CRM 4 for sending emails. All was fine till this week. It started to send this error and doing nothing.

Error message:

> An error occurred while opening mailbox crmsupport@domainname.ua. Microsoft.Crm.Tools.Email.Providers.EmailException: The remote Microsoft Exchange e-mail server returned the error "(404) Not Found". This user or queue does not have a mailbox. Create a mailbox and try again. ---> System.Net.WebException: The remote server returned an error: (404) Not Found. at System.Net.HttpWebRequest.GetResponse() at Microsoft.Crm.Tools.Email.Providers.HttpDavRequest.SubmitXmlCommand(HttpWebRequest httpWebRequest, String body) at Microsoft.Crm.Tools.Email.Providers.HttpDavRequest.RetrieveInboxUri() at Microsoft.Crm.Tools.Email.Providers.ExchangeWebDavConnector.OpenMailbox() at Microsoft.Crm.Tools.Email.Providers.ExchangePollingMailboxProvider.InitExchangeConnector() --- End of inner exception stack trace --- at Microsoft.Crm.Tools.Email.Providers.ExchangePollingMailboxProvider.WrapException(Exception e) at Microsoft.Crm.Tools.Email.Providers.ExchangePollingMailboxProvider.InitExchangeConnector() at Microsoft.Crm.Tools.Email.Providers.ExchangePollingMailboxProvider.OpenMailbox() at Microsoft.Crm.Tools.Email.Providers.CrmPollingMailboxProvider.Run()\r\nSystem.Net.WebException: The remote server returned an error: (404) Not Found. at System.Net.HttpWebRequest.GetResponse() at Microsoft.Crm.Tools.Email.Providers.HttpDavRequest.SubmitXmlCommand(HttpWebRequest httpWebRequest, String body) at Microsoft.Crm.Tools.Email.Providers.HttpDavRequest.RetrieveInboxUri() at Microsoft.Crm.Tools.Email.Providers.ExchangeWebDavConnector.OpenMailbox() at Microsoft.Crm.Tools.Email.Providers.ExchangePollingMailboxProvider.InitExchangeConnector()

Thank you!!!

# c# - 下拉值仅选择第一个值

> ID：15836187
> 
> 赞同：1
> 
> 时间：2013-04-05T14:13:56.017
> 
> 标签：c#

在下面的 C# 代码中，即使我选择了自己的年份，但该值仍仅作为 1920 传递。我可以看到下拉框中显示的所有值，但是当我选择一个值并提交它时，只有 1920 被传递到数据库。

```
protected void Page_Load(object sender, EventArgs e)
    {
        DropDownList3.Items.Clear();
            for (int i = 1920; i <= 2000; i++)
            {
                DropDownList3.Items.Add(i.ToString());
            }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {        
        sbtc.dex(DropDownList3.SelectedItem);        
    } 
```

谁能告诉我我在哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:16:07.637

因为当您单击按钮时，它会再次执行您的`Page_Load`事件中的代码。解决方案是只设置一次下拉值。您可以使用`Page.IsPostBack`属性来检查这是初始加载还是回发。

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!IsPostBack)
  {
        DropDownList3.Items.Clear();
        for (int i = 1920; i <= 2000; i++)
        {
            DropDownList3.Items.Add(i.ToString());
        }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:16:56.923

试试这样；

```
if(!IsPostBack)
[
    for (int i = 1920; i <= 2000; i++)
    {
       DropDownList3.Items.Add(i.ToString());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:18:42.907

尝试也像这样为选定的项目设置一个值，确保检查回发

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!IsPostBack)
  {
        DropDownList3.Items.Clear();
            for (int i = 1920; i <= 2000; i++)
            {
                DropDownList3.Items.Add( new ListItem(i.ToString(), i.ToString()));
            }
   }
}
protected void Button1_Click(object sender, EventArgs e)
{        
   sbtc.dex(DropDownList3.SelectedItem);        
} 
```

# spring - Can I combine @controller and XML bean mapping in spring?

> ID：15836189
> 
> 赞同：0
> 
> 时间：2013-04-05T14:14:02.537
> 
> 标签：spring, spring-mvc, controller

I currently have a @Controller declared in spring and have a bunch of mappings done like so:

```
@RequestMapping(value = "foo", method = RequestMethod.GET)
public ModelAndView foo() {
    ModelAndView mav = new ModelAndView(
            "myjsp");
    return mav;
} 
```

However every time I want to add a simple JSP mapping I need to recompile and build a new war and deploy.

This isnt so bad except sometimes other members of the team have requests and it would be easier if they can just go into the test env and create the mapping themselves without having to recompile.

I know that you can do similar mapping using xml but can I do this at the same time that I have the @Controller defined?

Like in the example above how could I define that mapping in XML rather than in java?

or say I needed foo2 to map to myjsp2.jsp

I am using spring MVC 3.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:19:27.173

查看`BeanNameUrlHandlerMapping`哪些允许您在配置中为控制器指定 url 模式。 [文档](http://static.springsource.org/spring/docs/2.5.x/reference/mvc.html#mvc-handlermapping-beanname)

**例子**

```
<beans>
  <bean id="handlerMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/>

  <bean name="/editaccount.form" class="org.springframework.web.servlet.mvc.SimpleFormController">
    <property name="formView" value="account"/>
    <property name="successView" value="account-created"/>
    <property name="commandName" value="account"/>
    <property name="commandClass" value="samples.Account"/>
  </bean>
<beans> 
```

# java - How to use this code to save the images inside my android camera app?

> ID：15836192
> 
> 赞同：0
> 
> 时间：2013-04-05T14:14:06.647
> 
> 标签：java, android, camera, storage

I built my own camera so it could be launched from inside my other android app, i want to save the images inside this app and not in the default gallery, i was using getExternalFilesDir() because i wanna keep the data just inside my app. But it is not working quite right, does anybody know what i have to change?? I do have the permission in my manifest. My phone is an HTC phone

```
private void dispatchTakePictureIntent(int actionCode) {

    imageURI = getExternalFilesDir(null) + File.separator
            + System.currentTimeMillis() + ".jpg";

    File mFile = new File(getFilesDir(), "newImage.jpg");
    if(!mFile.exists()) {
        try{
            mFile.createNewFile();
        } catch (Exception e){
            return;
        }
    }

    //Uri iURI = Uri.parse(imageURI);
    Log.v("camera", mFile.toString()); // Debugging statement
    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(mFile));
    startActivityForResult(takePictureIntent, actionCode);

} 
```

Here is the code that i am using to do it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:40:04.740

要从图库中隐藏图像，您应该在包含图像的文件夹中创建 .nomedia 文件，或者创建自己的相机应用程序。

# ember.js - Using EmberJS, Mocha and Karma

> ID：15836194
> 
> 赞同：1
> 
> 时间：2013-04-05T14:14:14.593
> 
> 标签：ember.js, bdd, mocha.js, karma-runner

I am using Mocha and Karma for writing and running test cases for my emberjs client. I bundle all my test cases as a single file and using minispade.js to solve the dependency issues

The problem which I am facing is that, I am able to run the test cases, but if a test case fails, it only shows the description of the test case and does not provide any info about the file which has the case written.

Is there any way to show the file name also, if any test case fails?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T08:35:25.247

@stevekane，

您是否使用 minispade.require() 在测试用例模块中调用客户的代码（即 minispade 包装文件）？

以下是我使用 minispade 与 karma 的方式：

1.  我会将我所有客户的代码和测试用例分别捆绑到一个文件中。示例：client.js 和 test_cases.js。
2.  我将有一个单独的文件（比如 test.js），我将在其中声明一些用于运行我的测试用例的全局文件。在这个文件中，我还将使用 minispade.require() 调用我的客户的代码和测试用例。这是我的 test.js 文件的外观：

    ```
     mocha.setup({ ui: 'bdd', ignoreLeaks: true });
       var assert = chai.assert; ........
       window.minispade.require('app/main'); // Client's code
       window.minispade.require("spec/main"); // Test cases 
    ```

    这里的 main.js 指的是一个文件，其中我使用 minspade.require() 包含了我的所有客户端和测试用例模块。

3.  在业力配置文件中，我将在文件下包含测试用例代码。我的配置文件将包含以下几行：

> ```
>  files = [
>              {pattern : 'test_cases.js', included: true},
>              {pattern : test.js', included: true}
>           ]. 
> ```

4 运行业力运行命令。

希望我已经说清楚了。请尝试一下，如果您遇到困难，请告诉我。

# java - Insert two double quote after encountering a specific sequence of character

> ID：15836195
> 
> 赞同：-2
> 
> 时间：2013-04-05T14:14:14.600
> 
> 标签：java, regex, string, csv

I have been search the net for a suitable code for this requirement, but not getting any.

I have this csv file (values are not exact, one of field of the actual csv contains bmp image code)

"NAME","ROLENUMBER","SECTION","SEAT","COMMENT" "Abhik","45","AVC","A112004DDG","HELLO3434?" "Bob",,"AVC","FDFDF1212","IN THIS FIELD THE USER CAN MISTAKENLY ADD TWO COMMAS LIKE ,, OR ,,," "JOHN",,,"DFDFEDD22E","HEL;O AGAIN"

the requirement is to somehow insert a "" between every two or more ,(commas) (,, or more commas will tell me that the field value is blank except for the comment field where the user can enter that by mistake as shown in the example) so that program can understand the blank values (it is an existing logic which I dont want to change very much if Ican help it)

So after parsing the csv rows should look like "NAME","ROLENUMBER","SECTION","SEAT","COMMENT" "Abhik","45","AVC","A112004DDG","HELLO3434?" "Bob","","AVC","FDFDF1212","IN THIS FIELD THE USER CAN MISTAKENLY ADD TWO COMMAS LIKE ,, OR ,,," "JOHN","","","DFDFEDD22E","HEL;O AGAIN"

Please help! Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:21:37.573

如果您正在使用 CSV 文件，请使用 Apache CSV 库......它们将帮助您摆脱两个逗号之间的所有引号和空值。

这里的问题是，你不能使用 String 的 replace 或 replaceAll 因为这些逗号也可以是引号内的值的一部分......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:24:39.300

```
String s = "achintya,jha,,kumar";
String newStr="";
for(int i = 0 ; i < s.length(); i++){
   if(s.charAt(i)==',' && s.charAt(i+1)==','){
        newStr =newStr + s.charAt(i) + "\"\"" + s.charAt(i+1);
        i=i+2;
   }
   newStr = newStr + s.charAt(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:25:05.643

我认为你需要一个正则表达式。用“，”替换[任何一个字符不是语音标记]，[任何一个字符不是语音标记]？

# c# - WCF NamedPipe CommunicationException -“管道已结束。（109，0x6d）。”

> ID：15836199
> 
> 赞同：16
> 
> 时间：2013-04-05T14:14:18.803
> 
> 标签：c#, wcf, windows-services, named-pipes

我正在编写一个带有“状态工具”的 Windows 服务。该服务托管用于进程间通信的 WCF 命名管道端点。通过命名管道，状态工具可以定期向服务查询最新的“状态”。

![在此处输入图像描述](https://i.stack.imgur.com/zU9LO.jpg)

在我的开发机器上，我有多个 IP 地址；其中之一是具有 192.168.1.XX 地址的“本地”网络。另一个是“公司”网络，地址为 10.0.X.XX。Windows 服务在单个 IP 地址上收集 UDP 多播流量。

到目前为止，只要 Windows 服务使用“192.168.1.XX”地址，它就可以正常工作。它始终如一地向客户端正确报告状态。

一旦我切换到另一个“公司”IP 地址（10.0.X.XX）并重新启动服务，在检索状态时我会收到连续的“CommunicationExceptions”：

```
"There was an error reading from the pipe: The pipe has been ended. (109, 0x6d)." 
```

现在，我不认为 UDP 客户端的“声明”IP 地址应该与 Named-Pipe 接口的功能有任何关系；它们是应用程序的完全独立部分！

以下是相关的 WCF 配置部分：

```
//On the Client app:
string myNamedPipe = "net.pipe://127.0.0.1/MyNamedPipe";
ChannelFactory<IMyService> proxyFactory =
    new ChannelFactory<IMyService>(
        new NetNamedPipeBinding(),
        new EndpointAddress(myNamedPipe));

//On the Windows Service:
string myNamedPipe = "net.pipe://127.0.0.1/MyNamedPipe";
myService = new MyService(myCustomArgs);
serviceContractHost = new ServiceHost(myService );
serviceContractHost.AddServiceEndpoint(
    typeof(IMyService),
    new NetNamedPipeBinding(),
    myNamedPipe);

serviceContractHost.Open(); 
```

我不认为这是一个“权限”问题-我正在以管理权限运行客户端-但也许有一些特定于域的原因这会破坏？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-07T18:02:19.340

事实证明，IP 地址完全是一条红鲱鱼。

异常的真正原因是 WCF 服务返回的 Enum 值无效。

我的枚举是这样定义的：

```
[DataContract]
public enum MyEnumValues : Byte
{
    [EnumMember]
    Enum1 = 0x10,
    [EnumMember]
    Enum2 = 0x20,
    [EnumMember]
    Enum3 = 0x30,
    [EnumMember]
    Enum4 = 0x40,
} 
```

表面上看起来不错。

但是底层服务报告的原始状态是一个字节值“0”，并且没有对应的枚举值来转换它。

一旦我确保枚举值都有效，该工具就会像圣诞树一样亮起来。

如有疑问，请假设您的 WCF 数据无效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-24T20:30:48.817

此异常意味着服务器端存在序列化问题。

可以通过查看跟踪文件 (svclog) 来解决此问题。要打开跟踪，请使用以下配置：

```
<system.diagnostics>
        <sources>
            <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="false">
                <listeners>
                    <add name="traceListener" />
                </listeners>
            </source>
            <source name="System.ServiceModel.MessageLogging">
                <listeners>
                    <add name="traceListener" />
                </listeners>
            </source>
        </sources>
        <sharedListeners>
            <add name="traceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="C:\Remos\Log\WcfTraceServer.svclog" />
        </sharedListeners>
    </system.diagnostics> 
```

就我而言，我正在序列化一个不在枚举中的值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-21T13:17:19.160

有时这个错误是由对象的多态特性引起的。例如以下服务的方法将返回人员列表：

```
[OperationContract]
 List<Person> GetEmployee(); 
```

如果我们有从 Person 类继承的 Supervisor 类，并且上述方法尝试返回 Supervisor 对象，**WCF 序列化程序类无法解释响应，因此会引发此错误**。
这个问题的解决方案是使用**“已知类型”**或**“服务已知类型”**。我们必须指定隐式对象可以使用方法或服务进行交互。对于我的示例，我们可以将 ServiceKnownType 属性放在方法或服务声明中，如下代码：

```
[OperationContract]
[ServiceKnownType(typeof(Supervisor))]
List<Person> GetEmployee(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-14T10:23:13.010

有同样的问题`There was an error reading from the pipe: Unrecognized error 109 (0x6d).`

*   一个原因是客户端和服务器之间的**绑定不一致**`<netNamedPipeBinding> <security mode="None"></security>...`（没有通信）
*   另一个间歇性问题与超时有关。

两者都有相同的顶部错误消息。

增加服务器和客户端绑定中的**超时时间会**阻止问题再次出现。

绑定超时设置过低：

```
sendTimeout="00:00:05" receiveTimeout="00:00:05" 
```

堆栈跟踪： `at System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout) at System.ServiceModel.Channels.SessionConnectionReader.Receive(TimeSpan timeout) at System.ServiceModel.Channels.SynchronizedMessageSource.Receive(TimeSpan timeout) at System.ServiceModel.Channels.TransportDuplexSessionChannel.Receive(TimeSpan timeout) at System.ServiceModel.Channels.TransportDuplexSessionChannel.TryReceive(TimeSpan timeout, Message& message) at System.ServiceModel.Dispatcher.DuplexChannelBinder.Request(Message message, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs) at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-25T16:35:16.413

当返回的有效负载太大时，这发生在我的 WCF 服务中。通过在 app.config 的 serviceBehavior 中添加它来修复它：

```
<dataContractSerializer maxItemsInObjectGraph="[some big number]" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-08T09:00:34.190

当服务操作抛出并且通道实际上出现故障时，我收到了这个错误。在您的情况下，您已经验证了服务操作本身正确完成并且只有返回抛出，但如果有疑问，请确保服务操作运行正常。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-07T08:19:56.190

我有很多没有 set{ } 的属性。添加这个解决了我的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-02T10:11:57.003

同样的问题，但感谢[Wojciech](https://stackoverflow.com/users/3721530/wojciech)的[回答解决](https://stackoverflow.com/a/26927769/1680374)了。

我不得不做更多的挖掘才能找到放置`<security>`标签的位置，所以这里是 system.serviceModel 部分的开头现在的样子......

```
<system.serviceModel>
   <bindings>
     <netNamedPipeBinding>
       <binding>
         <security mode="None"></security>
       </binding>
     </netNamedPipeBinding>
   </bindings>
   .... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-02T19:09:49.307

我遇到了这个问题，因为我使用的是[较旧的教程](https://web.archive.org/web/20141027055124/http://tech.pro/tutorial/855/wcf-tutorial-basic-interprocess-communication)，并尝试以编程方式进行配置。

我缺少的部分是提供元数据端点（[谢谢你，这篇文章！](https://social.msdn.microsoft.com/Forums/vstudio/en-US/168d7de1-d0f8-4f67-b989-d0746e76bec0/how-to-create-named-pipe-wcf-exe-using-netpipe?forum=wcf)）。

```
ServiceMetadataBehavior serviceMetadataBehavior = 
    host.Description.Behaviors.Find<ServiceMetadataBehavior>();

if (serviceMetadataBehavior == null)
{
    serviceMetadataBehavior = new ServiceMetadataBehavior();
    host.Description.Behaviors.Add(serviceMetadataBehavior);
}

host.AddServiceEndpoint(
    typeof(IMetadataExchange), 
    MetadataExchangeBindings.CreateMexNamedPipeBinding(), 
    "net.pipe://localhost/PipeReverse/mex"
); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-10T09:50:21.290

更重要的是，我们的代码正在序列化一个`Dictionary<string, List<int>>`. 这似乎引起了问题。用 a 标记类`[DataContract]`和要序列化的每个公共属性（包括字典）为我们解决了这个问题。

```
<DataContract>
Public Class QueryConfig

    <DataMember>
    Public SegmentTypes As List(Of SegmentType)

    <DataMember>
    Public Events As Dictionary(Of String, List(Of Integer))

    <DataMember>
    Public Enabled As Boolean

    <DataMember>
    Public Name As String 
```

# rack - Start Padrino on different host (virtual)

> ID：15836204
> 
> 赞同：1
> 
> 时间：2013-04-05T14:14:40.063
> 
> 标签：rack, webrick, padrino

I start WEBrick server through Padrino by this command: `padrino start`

It listens on `localhost`, but I would like to use WEBrick virtual hosts to change this behaviour to respond to other hostnames like `example.com`. But `padrino start` doesn't have these options. How can I pass virtual hosts details to WEBrick?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T23:52:56.983

它实际上确实可以选择这样做。

`bundle exec padrino start -h example.com`

应该绑定到 example.com 进行收听。

# xml - Wix XmlConfig 重命名根元素

> ID：15836205
> 
> 赞同：1
> 
> 时间：2013-04-05T14:14:41.037
> 
> 标签：xml, xpath, wix, wix3.5

是否可以使用 XmlConfig 或 XmlFile 重命名 XML 文件中的根元素？例如：

```
<config>
  <settings>
    <some setting="true" />
    ....
   </settings>
</config> 
```

我想重命名“设置”，同时将所有内容保留在设置标签之间。所以我希望结果是：

```
<config>
  <NEWsettings>
    <some setting="true" />
    ....
   </NEWsettings>
</config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:35:38.903

您不能重命名元素，但可以将它们全部复制到新节点并删除旧节点。不理想，但您可以`XmlConfig`通过向表中添加临时记录来完成繁重的工作，如[本问题](https://stackoverflow.com/q/15787614/23852)中所回答的那样。

# c# - Illegal and exception characters in a C# DataColumn Expression

> ID：15836206
> 
> 赞同：0
> 
> 时间：2013-04-05T14:14:42.083
> 
> 标签：c#, datatable

I have a rather simple situation that I just dont have the familiarity with C# to address.

I have a DataTable object returned from a webservice. I want the user to be able to filter and analyze the data so I create a DataView object. I have a ListBox that is the

One of the basic functions is I want them to be able to do searches of the data. So I get clever and add a textbox and an event for the textbox.

```
private void textbox1_TextChanged(object sender, EventArgs e)
{

        ((DataView)listbox1.DataSource).RowFilter = "mycolumn LIKE '*"+textbox1.Text+"*'";
} 
```

Problem is, if the user enters any special characters on accident (say [ or ] or *) it could screw up the match expression. Its like a classic SQL injection safety problem. The problem is the SQL blacklist characters are well documented (and often libraries will even contain methods that make strings sql safe because it's such a common problem) but this "RowFilter" expression isn't SQL and doesn't have well documented blacklist or escape characters.

Does anyone have an idea for how to elegantly solve this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:21:41.173

所有可用的关键字/函数都有很好的记录：http: [//msdn.microsoft.com/en-us/library/system.data.datacolumn.expression (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression(v=vs.71).aspx)

您没有 SQL 注入的安全问题 --> 您只需处理您的数据表，因此没有人可以未经授权访问数据库。您要做的最重要的事情是转义单引号并最终转义额外的通配符。

# javascript - html垂直自动滚动与javascript

> ID：15836207
> 
> 赞同：1
> 
> 时间：2013-04-05T14:14:42.850
> 
> 标签：javascript, html, codeigniter, scroll, scrollbar

我是 pure 新手`javascript`（我发现它很容易使用`jquery`，但在这种情况下我不能使用它太糟糕`jquery`了：D）。

我尝试遵循此[示例代码](http://jsfiddle.net/ThinkingStiff/DG8yR/)，但它在我的网络中不起作用。

这是我的网络的屏幕截图和**解释**：

![在此处输入图像描述](https://i.stack.imgur.com/n9cYt.png)

因此，该页面分为 2 个不同的 html 文件，一个用于标题及其 jquery 选项卡，另一个用于选项卡下方的内容。

我的计划是让 jquery 选项卡下方的内容可滚动，因此**以下代码来自我的****内容**的 html （**在 jquery 选项卡下方**）：

```
<body>
    <script type="javascript">
        function top() {
        document.getElementById( 'top' ).scrollIntoView();    
    };

    function bottom() {
        document.getElementById( 'bottom' ).scrollIntoView();
        window.setTimeout( function () { top(); }, 2000 );
    };

    bottom();
</script>

<div id="form_search">
    <div id="top">top</div>
    <?php echo form_open('backend/index') ?>
        <p>
        Kelas :
        <?php echo form_dropdown('ddl_kelas1', $list_kelas, 'id="ddl_kelas1"');?> -
        <?php echo form_dropdown('ddl_kelas2', $list_kelas, 'id="ddl_kelas2"');?>
        </p>
        <p>
        Nama : <?php echo form_input('txt_nama');?>
        Alamat : <?php echo form_input('txt_alamat');?>
        Tanggal Lahir : <input type="text" id="datepicker" />
        </p>
        <?php echo form_submit('btn_search', 'Search');?>
    <?php echo form_close(); ?>
</div>
<div>
    <?php echo $table ?>
    <?php echo $pagination ?>
    <div id="bottom">bottom</div>
</div> 
```

请注意，顶部和底部 div 仅用于页面限制（我遵循上面的示例代码）。我尝试了另一种方法，例如更改用于限制的 id/元素，但它仍然无法正常工作。

谢谢你的帮助：D

注意：我`codeigniter`为这个项目使用框架：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:36:33.953

### jQuery

```
$("html, body").animate({ scrollTop: $('#bottom').offset().top }, 2000);

      ^                                    ^                        ^
What to scroll ---------------------- to which element --------- duration 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:42:26.333

在小提琴的 html 屏幕底部似乎有很多额外的东西。我把它拿出来并调整了一些javascript。但是取出额外的东西已经成功了......

```
// extra stuff starting at line 332

    <script>

        /* by: thinkingstiff.com
        license: http://creativecommons.org/licenses/by-nc-sa/3.0/us/ */

            var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-555555-6']);
        // more stuff 
```

[http://jsfiddle.net/djwave28/pA9QZ/3/](http://jsfiddle.net/djwave28/pA9QZ/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:18:33.363

似乎用户问题的解决方案是简单地将`overflow-y:scroll`放置内容的 div 标签添加到 CSS 中。简单的解决方案

# sql - SQL Server Management Studio -- 执行其他脚本的脚本？

> ID：15836209
> 
> 赞同：1
> 
> 时间：2013-04-05T14:14:44.160
> 
> 标签：sql, sql-server, ssms

因此，我一直在寻找一种方法来开发一个脚本，该脚本将使用 SQL Server Management Studio 从我的项目文件夹中执行其他脚本，到目前为止，其他解决方案都没有奏效。我尝试编写一个包含 sqlcommandline 内容的脚本：

```
sqlcmd -S.\SQLExpress -imyScript.sql; 
```

那没有用，据我了解，使用`@\path\to\script.sql`也不会起作用，所以还有其他想法吗？还是我应该开始考虑编写程序？在这种情况下，有人能指出我正确的方向吗？

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:19:54.753

就个人而言，我会考虑编写存储过程。[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms345415.aspx)很好，如果您快速搜索，在线上有很多资源。

或者你可以做这样的事情来让它发生（你需要有执行命令外壳等的权限）：

```
CREATE TABLE ##SQLFiles ( SQLFileName VARCHAR(2000))
GO

INSERT INTO ##SQLFiles
EXECUTE master.dbo.xp_cmdshell 'dir /b "C:\SQL Scripts\*.sql"'
GO

DECLARE cFiles CURSOR LOCAL FOR
    SELECT DISTINCT [SQLFileName]
    FROM ##SQLFiles
    WHERE [SQLFileName] IS NOT NULL AND
          [SQLFileName] != 'NULL'
    ORDER BY [SQLFileName]

DECLARE @vFileName            VARCHAR(200)
DECLARE @vSQLStmt             VARCHAR(4000)

OPEN cFiles
FETCH NEXT FROM cFiles INTO @vFileName
WHILE @@FETCH_STATUS = 0
BEGIN
    -- The following SET command must be on a single line or else an error will be generated.
    -- It is split in this script for readability purposes.
    SET @vSQLStmt = 'master.dbo.xp_cmdshell ''osql -S Server Name -U User Name -P Password
                     -d Database Name -i "C:\SQL Scripts\' + @vFileName + '"'''
    EXECUTE (@vSQLStmt)

    FETCH NEXT FROM cFiles INTO @vFileName
END

CLOSE cFiles
DEALLOCATE cFiles
GO

DROP TABLE ##SQLFiles
GO 
```

# c# - 在 Quartz.net 中每次执行后，JobData 不会持久化

> ID：15836211
> 
> 赞同：3
> 
> 时间：2013-04-05T14:14:46.580
> 
> 标签：c#, quartz.net

我有一份工作，我想跟踪最近的 50 次运行。由于某种原因，状态似乎没有存储在我的简单原型中：

```
[PersistJobDataAfterExecution]
public class ApiJob : IJob
{
    private const string JobRunsKey = "jobRuns";
    private const int HistoryToKeep = 50;
    private const string UrlKey = "Url";

    public void Execute(IJobExecutionContext context)
    {
        var jobDataMap = context.JobDetail.JobDataMap;

        var url = context.JobDetail.JobDataMap.GetString(UrlKey);
        var client = new RestClient(url);
        var request = new RestRequest(Method.POST);
        var response = client.Execute(request);
        var runs = new List<JobRun>();
        if (jobDataMap.ContainsKey(JobRunsKey))
        {
            runs = (List<JobRun>) jobDataMap[JobRunsKey];
        }

        Console.WriteLine("I'm running so fast!");

        runs.Insert(0, new JobRun(){Message = "Hello", Result = JobResult.Ok, TimeForRun = DateTime.UtcNow});
        while (runs.Count > HistoryToKeep)
        {
            runs.RemoveAt(HistoryToKeep);
        }
        jobDataMap.Put(JobRunsKey, runs);
     }
} 
```

我尝试使用存储新列表，`jobDataMap.Put(JobRunsKey, runs)`但下次触发作业时，密钥从`JobDataMap`. 有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:12:44.437

您可能没有将 JobRun 类标记为**Serializable**。

这应该工作

```
[Serializable]
public class JobRun
{
    public string Message       ;
    public string Result        ;
    public DateTime TimeForRun  ;
} 
```

# solr - 多个 SOLR 节点共享相同的索引

> ID：15836212
> 
> 赞同：2
> 
> 时间：2013-04-05T14:14:48.893
> 
> 标签：solr, nosql

继[这个问题](https://stackoverflow.com/questions/14712128/is-it-wrong-to-have-more-than-one-solr-war-file-sharing-the-same-solr-home)之后，对于拥有多个 SOLR 实例（即多个 SOLR war 文件，共享相同的索引（即共享相同的 solr_home），其中只有一个 SOLR 实例用于写入而其他实例用于读取）有何想法？

这可能吗？

它是否有益 - 它是否比只有一个 solr 实例更高效？

它如何影响自动提交，即读取节点如何知道索引已更改并重新填充缓存等？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:00:28.610

不要这样做。除了不起作用之外，它不会使您的搜索速度更快，并且会产生单点故障。

如果您的新鲜度要求（应该多久可以搜索新的或更改的内容？）是一个小时或更长时间，请使用具有复制功能的 Solr 主/从配置。

如果您对新鲜度有严格要求，请使用 Solr Cloud。

它是“Solr”，而不是“SOLR”。

# python - Python argparse：将多值参数与默认值和常量相结合

> ID：15836215
> 
> 赞同：6
> 
> 时间：2013-04-05T14:15:12.567
> 
> 标签：python, argparse

我一直在寻找解决方案来添加一个行为为 的参数`action='store_const'`，但会采用多个值。

因此，如果我根本不通过它，它应该没有值（或某个值），如果我没有值传递它应该有默认值，如果我用值传递它应该是一个列表这些值。

例如

```
parser.parse_args(''.split())
parser.parse_args('-a'.split())
parser.parse_args('-a 1 2 3'.split()) 
```

应该导致

```
[None]
[0]
[1, 2, 3] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:50:06.067

不是太难：

```
parser = argparse.ArgumentParser()
parser.add_argument('-a',default=[None],action='store',type=int,nargs='*')
print parser.parse_args(''.split())
print parser.parse_args('-a'.split())
print parser.parse_args('-a 1 2 3'.split()) 
```

如果您想在`-a`没有额外参数的情况下进行特殊处理，则不使用自定义操作就无法做到这一点：

```
import argparse
class MyAction(argparse.Action):
    def __call__(self,parser,namespace,values,option_string=None):
        if not values:
            setattr(namespace,self.dest,[0])
        else:
            setattr(namespace,self.dest,values)

parser = argparse.ArgumentParser()
parser.add_argument('-a',default=[None],action=MyAction,type=int,nargs='*')
print parser.parse_args(''.split())
print parser.parse_args('-a'.split())
print parser.parse_args('-a 1 2 3'.split()) 
```

# postgresql - 在 Postgres 中哪里可以找到我的 PLPython 函数？

> ID：15836218
> 
> 赞同：0
> 
> 时间：2013-04-05T14:15:23.707
> 
> 标签：postgresql, plpython

我已经在特定模式中创建了一些函数，但是“函数”部分里面什么都没有。

我创建了像这个例子这样的函数：

```
CREATE FUNCTION pymax (a integer, b integer)
  RETURNS integer
AS $$
  if a > b:
  return a
return b
$$ LANGUAGE plpythonu; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:36:09.590

如果名称不是模式限定的，则会在当前模式中创建一个函数（与其他对象一样）。您当前的架构由 的当前设置定义[**`search_path`**](http://www.postgresql.org/docs/current/interactive/ddl-schemas.html#DDL-SCHEMAS-PATH)。

要查看您的当前`search_path`：

```
SHOW search_path; 
```

有多种方法可以设置`search_path`，更多在这个相关答案中：
[search_path 如何影响标识符解析和“当前模式”](https://stackoverflow.com/questions/9067335/how-to-create-table-inside-specific-schema-by-default-in-postgres/9067777#9067777)

要确定数据库中是否存在任何具有相似名称的函数：

```
SELECT n.nspname, p.proname, pg_get_function_arguments(p.oid) As args
FROM   pg_proc p
JOIN   pg_namespace n ON n.oid = p.pronamespace
WHERE  p.proname ILIKE '%pymax%'; 
```

如果没有找到任何东西，则*该*数据库中不存在这些函数。也许您错误地在另一个数据库中创建了它？

# c# - DataGridView，如何捕获单元格的 KeyPress 事件 C#

> ID：15836220
> 
> 赞同：3
> 
> 时间：2013-04-05T14:15:26.187
> 
> 标签：c#, datagridview

我想在datagridview c#中对一个单元格进行处理，当我按下一个单元格时，这个特征是打开一个表单。

在 C# 中没有允许我直接添加我的处理的事件（按键）

在网上搜索后，我找到了以下解决方案

```
 private void dGridView_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        e.Control.KeyPress +=
        new KeyPressEventHandler(Control_KeyPress);
    }

           private void Control_KeyPress(object sender, KeyPressEventArgs e)
        {
            if ((Strings.Asc(e.KeyChar) >= Strings.Asc(Keys.A.ToString()) && Strings.Asc(e.KeyChar) >= Strings.Asc(Keys.Z.ToString())) || (Strings.Asc(e.KeyChar) >= Strings.Asc(Keys.D0.ToString()) && Strings.Asc(e.KeyChar) >= Strings.Asc(Keys.D9.ToString()) || (Strings.Asc(e.KeyChar) >= 97 && Strings.Asc(e.KeyChar) > 122)))
            {
                ------
            }
      } 
```

但它不起作用。在调试事件 dGridView_EditingControlShowing 的代码已执行但 Control_KeyPress 函数的代码不运行

请有任何想法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T14:20:41.330

您应该将您的`Form` `KeyPreview`财产设置为*true*。你应该处理主窗体上的按键事件。那是因为`Control.KeyPress`事件

> **在控件具有焦点**时按下某个键时发生。( [msdn](http://msdn.microsoft.com/ru-ru/library/system.windows.forms.control.keypress.aspx) )

```
public Form()
{
    InitializeComponent();
    this.KeyPreview = true;
    this.KeyPress += new KeyPressEventHandler(Control_KeyPress);
}

private void Control_KeyPress(object sender, KeyPressEventArgs e)
{
    //your code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T04:06:41.167

只是为了使第一个答案简单。1）转到表单的属性 2）将“KeyPreview”设置为“True” 3）在表单的 Key Press 事件中：

```
private void Control_KeyPress(object sender, KeyPressEventArgs e)
{
    //your code
} 
```

# css - 如何获得两个相等的列，一列包含 3 个相等高度的 div“行”？

> ID：15836223
> 
> 赞同：0
> 
> 时间：2013-04-05T14:15:34.837
> 
> 标签：css

我有两个 div 列，右列包含动态列表内容，左列包含 3 个 div，它们的作用类似于行）：

![在此处输入图像描述](https://i.stack.imgur.com/26mQi.gif)

我发现了很多方法可以让两个主要列的高度相等，但是有没有办法让三个 div“行”也分别达到 33.33% 的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:34:09.960

HTML 代码：

```
header
<div id="wrapper">
    <div id="left_container">
        <div class="content">
            #1 left asd
        </div>
        <div class="content">
            #2 left asd
        </div>
        <div class="content">
            #3 left asd
        </div>
    </div>
    <div id="right_container">
        <div class="content">
            right asd
        </div>
    </div>
</div>
footer 
```

用于此的 CSS

```
div {
    margin: 0;
    padding: 0;
    display: block;
    border: 1px solid #ccc;
    height: 10em; /* should be px or em */
    margin: -1px; /* size of border */
    font-size: 20px; /* modulate the height of div like: 20x10=200px */
}
#wrapper {
    width: 100%;
}
#wrapper:after {
    clear: both;
    display: block;
    content: ' ';
}
#left_container,
#right_container {
    float: left;
    width: 50%;
    height: 100%;
}
#left_container .content {
    height: 33.33%;
}
#right_container .content {

} 
```

现场示例：http: [//jsfiddle.net/Z2hpu/2/](http://jsfiddle.net/Z2hpu/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:26:44.703

例如，为您的 div 提供类，例如垂直 div 的“列”和内部水平 div 的“行”。然后应用这个css：

```
.column { height:600px; width:50%; }
.column > .row { height:33%; width:98%; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:22:55.410

Flexbox 可以使用您指定的元素数量来执行此操作，而无需固定高度：

[http://codepen.io/cimmanon/pen/Gmljd](http://codepen.io/cimmanon/pen/Gmljd)

```
.wrapper {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}

.a, .b {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-flex-flow: row wrap;
  -ms-flex-flow: row wrap;
  flex-flow: row wrap;
  display: flex;
}

.a div, .b {
  border: 1px solid;
  -webkit-flex: 1 0 100%;
  -ms-flex: 1 0 100%;
  flex: 1 0 100%;
}

<div class="wrapper">
  <div class="a">
    <div>1</div>
    <div>2</div>
    <div>3</div>
  </div>

  <div class="b">
    b
  </div>
</div> 
```

# html - 通用 100% div 高度

> ID：15836225
> 
> 赞同：2
> 
> 时间：2013-04-05T14:15:42.320
> 
> 标签：html, height, doctype

我试图让一个 div 达到 100% 的高度。这就是我所拥有的，那不起作用：

```
<!DOCTYPE html>
<HTML>

<head>
</head> 

<body>
    <div style="height: 100%; border: solid 1px red">
        Not working
    </div>  
</body>

</HTML> 
```

...但删除`<!DOCTYPE html>`使其工作：

```
<HTML>

<head>
</head> 

<body>
    <div style="height: 100%; border: solid 1px red">
        Not working
    </div>  
</body>

</HTML> 
```

我设置页面使用的 HTML 版本似乎会影响它是否有效。

我的印象`<!DOCTYPE html>`是，一开始就使用类似的东西是一件好事，所以我的问题是：

1）第一线最好的东西是什么？

2）鉴于此，我如何在 div 块中获得 100% 的高度？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:18:55.143

是的，你应该有文档类型！为了让 div 达到 100% 的高度，需要设置其父母的高度。在这种情况下：

```
html, body {
   height: 100%;
} 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:19:37.603

## 问题：1）第一行最好的东西是什么？

**答案：使用 DOCTYPE。**

`<!DOCTYPE html>`是显式的[文档类型声明](http://www.htmlbasictutor.ca/doctype-declaration.htm)。

从链接页面：

> DOCTYPE 声明（DTD 或文档类型声明）做了几件事：
> 
> 1.  在网页上执行 HTML 验证测试时，它会告诉 HTML（超文本标记语言）验证器网页编码应该符合哪个版本的 (X)HTML 标准。当您验证您的网页时，HTML 验证器会根据适用标准检查编码，然后报告编码的哪些部分未通过 HTML 验证（不合规）。
> 2.  它告诉浏览器如何以标准兼容模式呈现页面。

Bullet point #2 是使用它的一个非常重要的原因。

`<!DOCTYPE html>`, 具体来说, 是[HTML5 的正确声明,](http://dev.w3.org/html5/spec/syntax.html#the-doctype)从现在到不久的将来都应该使用。您仍然可以使用遗留字符串或过时的允许字符串，但 HTML5 只需要以前编写的格式。进一步说明，此 DTD 将导致[所有现代浏览器](http://themaingate.net/dev/html/all-you-need-is-doctype-html)切换[到其标准（合规）模式](http://ejohn.org/blog/html5-doctype/)，即使它们不支持 HTML5。

这里有更多信息：

[使用 Doctype](http://hsivonen.iki.fi/doctype/)
[World Wide Web Consortium](http://www.w3.org/QA/2002/04/valid-dtd-list.html)激活浏览器模式（他们制定网络标准）

* * *

## 问题：2）鉴于此，我如何在 div 块中获得 100% 的高度？

**答：您必须将 html 和 body 设置为 100%。**

`DIV`是其父高度（您的）的 100%，只是`BODY`您的`BODY`和`HTML`元素不是您的 BROWSER 高度的 100%。

```
html, body {
  height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:18:47.943

有几种不同的方法可以做到这一点。

使 div 位置绝对：

```
<body style="margin:0px;">
    <div style="height: 100%; border: solid 1px red; position:absolute;box-sizing:border-box;">
        Not working
    </div>  
</body> 
```

将`html`and设置`body`为 100% 的高度（其父级）

```
<html style="height:100%;">  
    <body style="height:100%;margin:0px;">
        <div style="height: 100%; border: solid 1px red; box-sizing:border-box;">Not working</div>
    </body>
</html> 
```

# oracle - 应用程序 Express (Oracle) 中的 MultiRowUpdate

> ID：15836230
> 
> 赞同：0
> 
> 时间：2013-04-05T14:15:54.667
> 
> 标签：oracle, oracle-apex

当您在 Apex（应用程序快递，Oracle）中使用表格形式时，您可以自动处理多行更新和多行删除。

我有兴趣查看这些流程背后的代码。

谁能告诉我在哪里可以看到它们？

谢谢。

帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:15:17.013

您看不到代码，因为它将位于其中一个 APEX 包中，并且这些包已被包装。但是，它可能类似于您必须使用 apex_item 包等自己编写的那种代码。如果您搜索“oracle apex create tabular form manual”，则有相关教程 - 例如[这个基于 YouTube 的教程](https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=13477790.8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:38:02.710

我想你必须看看这个线程。内置多行更新过程的代码类似。

[https://forums.oracle.com/forums/thread.jspa?threadID=2459200](https://forums.oracle.com/forums/thread.jspa?threadID=2459200)

# android - Android上的Lambdaj NoClassDefFoundError

> ID：15836231
> 
> 赞同：1
> 
> 时间：2013-04-05T14:15:55.253
> 
> 标签：android, noclassdeffounderror, lambdaj

我正在我的 android 应用程序中尝试 lambdaj，但即使是最简单的过滤操作也会失败，并列出异常。例如：

```
Group<Person> groupedPersons= group(people,by(on(Person.class).getAge())); 
```

并且任何其他选择或过滤器最终都会出现相同的以下异常，知道吗？如果可以相关的话，“Person”类是一个greenDAO类......谢谢

```
04-05 16:07:48.735: E/AndroidRuntime(6579): FATAL EXCEPTION: main
04-05 16:07:48.735: E/AndroidRuntime(6579): java.lang.NoClassDefFoundError:ch.lambdaj.function.argument.ProxyArgument
04-05 16:07:48.735: E/AndroidRuntime(6579):     at ch.lambdaj.function.argument.ArgumentsFactory.createPlaceholder(ArgumentsFactory.java:68)
04-05 16:07:48.735: E/AndroidRuntime(6579):     at ch.lambdaj.function.argument.ArgumentsFactory.registerNewArgument(ArgumentsFactory.java:58)
04-05 16:07:48.735: E/AndroidRuntime(6579):     at ch.lambdaj.function.argument.ArgumentsFactory.createArgument(ArgumentsFactory.java:50)
04-05 16:07:48.735: E/AndroidRuntime(6579):     at ch.lambdaj.function.argument.ArgumentsFactory.createArgument(ArgumentsFactory.java:39)
04-05 16:07:48.735: E/AndroidRuntime(6579):     at ch.lambdaj.Lambda.on(Lambda.java:63) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:26:56.280

此异常是因为该库未包含生成的 android 应用程序（.apk 文件）。

要修复它，与您的代码的编写方式无关，而与您的项目设置有关。

*   如果您将其包含为 .jar 文件，请确保该文件位于 libs 文件夹中。
*   如果您将其作为整个项目包括在内，请确保将项目包括在项目属性的 Java 构建路径中的导出中。

# design-patterns - ASP.NET MVC 应用程序中的日常 XML 解析

> ID：15836236
> 
> 赞同：0
> 
> 时间：2013-04-05T14:16:09.930
> 
> 标签：design-patterns, asp.net-mvc-4, architecture, entity-framework-4, xml-parsing

我有一个 ASP.NET MVC4 应用程序，它使用实体框架作为其域模型，该*域模型位于同一解决方案中自己的项目中*。为了填充其数据库存储，Web 应用程序依赖于每天生成一次的 XML 文件。

我有一些问题。一个与代码放置和系统设计方面的最佳架构方法有关。

1.  我的解析代码应该去哪里解析 XML 文档并将解析的数据存储到 EF 数据库中？我知道我几乎可以将它放在任何地方，但就最佳软件实践而言，它最好放在哪里？我目前的想法是在 Domain 项目中创建一个类（XMLParser）。
2.  我怎样才能让我的 XML 解析器（我决定放置它的地方）**每天**在特定时间运行一次？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:35:48.103

1.  我认为域不是 XML 解析器的最佳位置。域，顾名思义，代表您的*业务域*的实体和术语。
    诸如 等之类的课程`User`将`Order`进入那里。XML 解析器**不**属于您的业务领域。
    那么，解析器应该去哪里呢？让我们想想它的工作是什么——它从一些数据存储中读取数据并将其转换为域类。
    在以这种方式表示问题之后，我认为解决方案是显而易见的——负责从数据存储（无论是数据库、文件还是 Web 服务）中检索数据的类属于数据访问层。

2.  有几个解决方案。[Quartz.NET](http://quartznet.sourceforge.net/)是.net 平台的一种调度机制，具有很多高级调度能力。
    但是，如果您只想每天执行一次，[Windows 的计划任务](http://support.microsoft.com/kb/308569)可能就足够了

# .net - windows域用户名的验证正则表达式

> ID：15836239
> 
> 赞同：1
> 
> 时间：2013-04-05T14:16:11.583
> 
> 标签：.net, regex, active-directory

我挖掘了很多谷歌匹配，但我找不到正确的、有效的正则表达式来验证域\用户名。
我对正则表达式知之甚少，对域规则和用户名限制/规则一无所知。

谢谢，
彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:22:12.723

您可以只检查用户名中是否存在反斜杠或正斜杠。

```
string UsernameEntered = @"sm/asd";
var DomainStyleLogin = new Regex(@"^.*(\\|/)");
var match = DomainStyleLogin.Match(UsernameEntered);
if (!match.Success)
{
    //Does not contain a backslash
} 
```

**编辑**

如果要检查输入的用户名或域，可以使用以下内容：

```
var ValidUsernameOrDomain = new Regex(@"^[A-Za-z0-9\\\._-]{7,}$"); 
```

这将验证：

*   匹配大小写字母、数字 0-9、下划线、连字符、反斜杠和句点。
*   字符串不少于 7 个字符（用户名和域至少 3 个字符，加上域斜杠）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-15T09:50:50.407

我最终使用 `/^[a-zA-Z][a-zA-Z0-9\-\.]{0,61}[a-zA-Z]\\\w[\w\.\- ]+$/`
（基于[this SO answer](https://stackoverflow.com/a/33079236/359765)）

# jquery - Qtip2 作为上下文菜单未在 Google Chrome 上显示

> ID：15836240
> 
> 赞同：0
> 
> 时间：2013-04-05T14:16:17.623
> 
> 标签：jquery, google-chrome, firefox, qtip, right-click

环境：-jquery 1.9.1-qtip2：2.0.1-35

我在打开绑定右键单击的 qtip2 时遇到了一个奇怪的问题（作为上下文菜单替换，按照[官方教程](http://craigsworks.com/projects/qtip2/tutorials/events/)进行操作）。

在 Firefox 上，一切顺利，只要我右键单击目标元素，就会显示上下文菜单。在 Chrome 上，由于未知原因，我必须左键单击然后右键单击目标才能使 qtip 工作。

[我的测试环境](https://www.zebramanager.com/test.html)

奇怪的是，它在两个浏览器上都能正常工作，这个小提琴：http: [//jsfiddle.net/PaQ7R/10/](http://jsfiddle.net/PaQ7R/10/)

具有完全相同的源代码。

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>
      <script src="jquery/jquery-1.9.1.js"></script>
      <script type='text/javascript' src="jquery/jquery.qtip.js"></script>
      <link rel="stylesheet" type="text/css" href="css/jquery.qtip.css">
  <style type='text/css'>
        ul#candMenu {
            display: none;
        }
  </style>
<script type='text/javascript'>
$(document).ready( function() {
    $(document).on("mousedown", ".test", function(event) {
        $(this).qtip({
            content: {
                text: $("#candMenu").clone()
            },
            show: {
                event: "mouseup",
                ready: true, 
                solo: true
            },
            hide: {
                event: "unfocus" // Si qqchose d autre que le tooltip est cliqué
            },
            position: {
                my: "left top",
                target: "mouse", // Position it where the click was...
                adjust: { mouse: false }, // ...but dont follow the mouse
                viewport: $(window) // empêche le débordement de la fenêtre
            },
            events: {
                show: function(eventShow, api) {
                    if(eventShow.originalEvent.which !== 3) {
                        eventShow.preventDefault();
                    }
                }
            }
        }, event);
    }).bind("contextmenu", function() { return false; });
});

</script>
</head>
<body>
  <a href="javascript:;" class="test">Test right click</a><br />
  <a href="javascript:;">No-test</a>

<table border="1" width="100%">
    <tr class="test">
        <td>prem</td>
        <td>seco</td>
        <td>third</td>
    </tr>
    <tr class="test">
        <td>prem</td>
        <td>seco</td>
        <td>third</td>
    </tr>
</table>
<UL id="candMenu">
    <LI class="event separator"><A href="javascript:;">Événements<SPAN class="holdctrl"></SPAN></A></LI>
        <LI class="edit"><A href="javascript:;">Infos du candidat<SPAN class="holdctrl"></SPAN></A></LI>
        <LI class="permis"><A href="javascript:;">Demande de permis<SPAN class="holdctrl"></SPAN></A></LI>
        <LI class="prod"><A href="javascript:;">Produits<SPAN class="holdctrl"></SPAN></A></LI>
        <LI class="regle"><A href="javascript:;">Règlements<SPAN class="holdctrl"></SPAN></A></LI>
        <LI class="form"><A href="javascript:;">Formation<SPAN class="holdctrl"></SPAN></A></LI>
</UL>
</body>
</html> 
```

我也在非 SSL 环境中尝试过同样奇怪的行为。我找不到小提琴环境中的技巧或我的服务器上的错误配置来解释这种差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:38:51.390

这可以通过在用户配置文件中删除与其相关的所有文件后重新安装 Chrome 来解决。

# vb.net - 在 Visual Basic 上创建 2 个共享接口的 DLL，这可能/好主意吗？

> ID：15836248
> 
> 赞同：2
> 
> 时间：2013-04-05T14:16:38.627
> 
> 标签：vb.net, visual-studio, dll, interface, instantiation

我正在设计一个 Visual Basic 应用程序，它使用我创建的一个 DLL（都在 Visual Studio 上）。在应用程序中，有一个对象实例化了一个由 DLL 定义的类。

```
Friend WithEvents robot As New DLL1class 
```

该项目有新的需求，因此该对象应该能够从不同的新 DLL 实例化一个类。由于我正在设计这个新的 DLL，我想让这个更改对应用程序透明，所以我也这样做：

```
Friend WithEvents robot As New DLL1class 
```

或者

```
Friend WithEvents robot As New DLL2class 
```

我的想法是创建一个Interface`IOperations`并让两个DLL实现它，所以代码上没有问题。

由于我需要在运行时实例化对象，我的问题是，我应该用哪个类创建它？

```
Friend WithEvents robot As ¿?¿?¿?
' ...
If xxxxx Then
    robot = New DLLXClass
End If 
```

我不想使用`As Object`，因为在编程过程中您在编写时看不到函数列表，`robot.`并且代码和 DLL 函数太复杂而无法接受。

有什么方法可以定义一个实现接口的对象吗？类似于这个想法的东西：

```
Friend WithEvents robot As ClassX "that implements IOperations" 
```

如果您认为有更好的方法来解决这个问题，我没关系！因为我认为这可能是您提出的一个问题：是的，有必要使用 DLL，因为我们需要将它们发送给在他们自己的应用程序上使用 DLL 的外部人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:56:22.503

您需要将变量声明为接口而不是具体类之一，例如：

```
Friend WithEvents robot as IOperations 
```

现在，该`robot`变量可以引用碰巧实现该接口的任何类型的对象。接下来，您需要根据情况有条件地将`robot`变量设置为正确的对象类型。例如，在构造函数中，您可以执行以下操作：

```
If UsingDll1 Then
    robot = New DLL1class()
Else
    robot = New DLL2class()
End If 
```

只要这两个类都实现了`IOpertions`接口，它就会编译并正常工作。

## 咆哮

现在是我的 DI 咆哮的时候了。如果你不在乎我的想法，请跳过这部分:)

让类像这样创建自己的依赖项是不好的做法。随着项目的发展，它会变得越来越复杂，并且会导致意大利面条式代码。避免这种情况的方法是使用*依赖注入*（DI）。例如，在这种情况下，您可以这样设计您的类：

```
Public Class MyClass
    Public Sub New(robot As IOperations)
        Me.robot = robot
    End Sub

    Friend WithEvents robot as IOperations
End Class 
```

现在，该类不再创建自己的机器人对象，而是请求将机器人提供给它。通过这种方式，它的依赖项（机器人）被注入其中。

这样想：如果你有一个汽车类，它应该创建自己的引擎对象吗？在现实生活中，汽车是自己制造引擎，还是由汽车厂提供？就像创建一辆可以创建自己的引擎的汽车会非常复杂和愚蠢一样，让类创建自己的依赖项也是复杂而愚蠢的。

# c++ - C++ 从 sqlite3 回调函数填充向量？

> ID：15836253
> 
> 赞同：3
> 
> 时间：2013-04-05T14:17:11.700
> 
> 标签：c++, sqlite

我有一个这样的 sqlite3 表“地址”：

```
+----+------+--------+
| ID | name | number |
+----+------+--------+
| 1  | John | 413434 |
+----+------+--------+ 
```

我想填充全局向量，我可以在其他地方使用它并将它与其他一些数据连接起来。到目前为止，我有这个：

```
...
#include <sqlite3.h>

using namespace std;

static int callbackDB(void *NotUsed, int argc, char **argv, char **szColName)
{
    for(int i = 0; i < argc; i++)
        cout << szColName[i] << " = " << argv[i] << endl;

    return 0;
}

int main(int argc, char* argv[]) {
    vector<vector<string> > table;
    for( int i = 0; i < 2; i++ )
        table.push_back(std::vector< std::string >());

    sqlite3 *db;
    char *szErrMsg = 0;

    // open database
    int rc = sqlite3_open("database.db", &db);

    const char *query;
    query = "SELECT * FROM addresses";

    rc = sqlite3_exec(db, query, callbackDB, 0, &szErrMsg);

    return 0;
} 
```

我怎样才能得到向量或其他方式的结果，以便我能够更轻松地使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T08:38:39.117

的第四个参数`sqlite3_exec`可用于向回调传递信息。在您的情况下，指向的指针`table`会很有用：

```
typedef vector<vector<string> > table_type;
static int callbackDB(void *ptr, int argc, char* argv[], char* cols[])
{
    table_type* table = static_cast<table_type*>(ptr);
    vector<string> row;
    for (int i = 0; i < argc; i++)
        row.push_back(argv[i] ? argv[i] : "(NULL)");
    table->push_back(row);
    return 0;
}
...
    rc = sqlite3_exec(db, query, callbackDB, &table, &errmsg); 
```

但是，使用这样的回调并不是很有用，因为您只会得到一堆裸字符串。您应该直接使用 prepare/step/finalize 接口，以便可以使用正确的数据类型：

```
class Address {
public:
    Address(int id, const string& name, const string& number);
    ...
}

    ...
    vector<Address> addresses;
    sqlite3_stmt *stmt;
    rc = sqlite3_prepare_v2(db, "SELECT id, name, number FROM addresses",
                            -1, &stmt, NULL);
    if (rc != SQLITE_OK) {
        cerr << "SELECT failed: " << sqlite3_errmsg(db) << endl;
        return ...; // or throw
    }
    while ((rc = sqlite3_step(stmt)) == SQLITE_ROW) {
        int id = sqlite3_column_int(stmt, 0);
        const char* name = reinterpret_cast<const char*>(sqlite3_column_text(stmt, 1));
        const char* number = reinterpret_cast<const char*>(sqlite3_column_text(stmt, 2));
        // let's assume number can be NULL:
        addresses.push_back(Address(id, name, number ? number : ""));
    }
    if (rc != SQLITE_DONE) {
        cerr << "SELECT failed: " << sqlite3_errmsg(db) << endl;
        // if you return/throw here, don't forget the finalize
    }
    sqlite3_finalize(stmt); 
```

# android - 如何在所有活动中保持操作栏固定？

> ID：15836254
> 
> 赞同：2
> 
> 时间：2013-04-05T14:17:24.457
> 
> 标签：android, android-actionbar, android-ui

在 Facebook 应用程序 v2.3 中，当您从一个活动（或片段？）导航到另一个活动时，操作栏在所有活动（或片段？）中保持固定。例如，如果您从新闻提要导航到某人的个人资料页面，则操作栏保持不变，并刷新下面的页面。所以我的问题是，是否有可能只使用活动来实现这种行为？还是我应该只有一项主要活动，以及所有子活动的片段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:20:45.423

一项活动和您需要的尽可能多的片段。

您调用框架的那一刻`startActivity(intent);`将滚动活动过渡动画及其所有内容（包括操作栏）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:10:08.753

您可以仅使用活动来实现此行为。这些是您在每个活动中需要的方法。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_activity, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.button_1:
            handleButton1();
            return true;
        case android.R.id.button_2:
            handleButton2();
            return true;
           ...
        default:
           ...
    }
} 
```

此外，您可以在 onCreate 中访问操作栏对象，并以您想要的方式对其进行自定义。例如，启用主页按钮等：

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayHomeAsUpEnabled(true);
    ... 
```

但是，如果您有很多活动，您可能不想在每个活动中都这样做。相反，您可以将此代码放在超类活动中，然后让其他活动扩展它。这是首选方式 - 您只能在一个地方执行此操作。

# silverlight - 文本块未检索属性更改的新样式

> ID：15836256
> 
> 赞同：0
> 
> 时间：2013-04-05T14:17:37.800
> 
> 标签：silverlight, mvvm, styles, themes

我正在使用 Silverlight 5 并尝试对视图模型进行一些样式绑定。我遇到了一个问题，我的绑定在属性更改时没有设置新值。但这只会发生在默认样式上，如果我使用一个键，那么它可以正常工作。这里有些例子。

**这有效：**

```
<Style x:Key="HeaderTextStyle" TargetType="TextBlock">
    <Setter Property="Foreground" Value="{Binding ForegroundBrush, Source={StaticResource Theme}}"/>
    <Setter Property="FontSize" Value="15"/>
    <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="TextWrapping" Value="Wrap"/>
    <Setter Property="Margin" Value="0,15,0,4"/>
    <Setter Property="HorizontalAlignment" Value="Left"/>
</Style> 
```

**这不起作用：**

```
<Style TargetType="TextBlock">
    <Setter Property="Foreground" Value="{Binding ForegroundBrush, Source={StaticResource Theme}}"/>
    <Setter Property="FontSize" Value="15"/>
    <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="TextWrapping" Value="Wrap"/>
    <Setter Property="Margin" Value="0,15,0,4"/>
    <Setter Property="HorizontalAlignment" Value="Left"/>
</Style> 
```

在第一个示例中，当调用 PropertyChanged 事件时，它将前景色重新绑定到正确的值。在第二个示例中，它不会重新绑定。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:45:43.310

我记得，Style 总是用 x:Key 属性声明的，如果你想为 TargetType 设置一些默认样式，请使用 BasedOn 属性。像...

```
<Style x:Key="HeaderTextStyle" TargetType="TextBlock">
    <Setter Property="Foreground" Value="{Binding ForegroundBrush, Source={StaticResource Theme}}"/>
    ...
</Style>

<style TargetType="TextBlock" BasedOn="{StaticResource HeaderTextStyle}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T08:44:12.990

**你应该这样尝试：**

```
 <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{Binding ForegroundBrush, Source={StaticResource Theme}}"/>
        ...
    </Style>

    <style TargetType="TextBlock" BasedOn="{StaticResource HeaderTextStyle}" /> 
```

# gwt - 就广告收入而言，我对 GWT 应用程序有哪些选择

> ID：15836259
> 
> 赞同：0
> 
> 时间：2013-04-05T14:17:46.207
> 
> 标签：gwt

我正在尝试了解如何在我的 GWT 应用程序中嵌入广告。我的应用程序有望吸引各种用户，然后他们会选择他们对运动、音乐、科学感兴趣的类别。然后，我想根据用户选择的类别或他们感兴趣的内容来定制广告，以便获得更好的点击百分比。解决这个问题的最佳地点在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:41:39.223

有类似 Google Ajax 使用 hash bangs 爬行的东西，你可以在这里找到相关信息：

[https://developers.google.com/webmasters/ajax-crawling/docs/specification](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

# c++ - 未定义的引用......但一切都是链接的

> ID：15836260
> 
> 赞同：3
> 
> 时间：2013-04-05T14:17:48.160
> 
> 标签：c++, include, undefined

我有 CodeBlocks IDE 的链接问题。但我认为一切都应该没问题。

我想使用 laslib 库。他们提供了一个我在 CodeBlocks IDE 中链接的 .lib 文件（我通常这样做......）。然后我包含了包含 .hpp 的“inc”文件夹。

Atm，我做了包含外部库的最低要求。

然后，在我的“主”函数中，我包含了必要的文件，CodeBlocks 智能感知为我提供了函数的原型（所以我猜链接很好）。

这是我的代码：

```
#include <iostream>
#include <vector>

#include "lasreader.hpp"
#include "laswriter.hpp"
#include "lasdefinitions.hpp"

#define FILENAME "D:\\las.las"
#define FILEOUT "D:\\out"

int main(int argc, char** argv)
{
// Assume that's correct for simplicity @TODO : check argv
std::string filename = FILENAME;//argv[1];
std::string file_out = FILEOUT; //argv[2];

LASreadOpener lasreadopener;
LASwriteOpener laswriteopener;
lasreadopener.set_file_name(filename.c_str());
laswriteopener.set_file_name(file_out.c_str());

lasreadopener.parse(0, NULL); // parse without args

// Declare lasreader
LASreader* lasreader;

// Open the file
lasreader = lasreadopener.open();

//  Create and open the writer
LASwriter* laswriter = laswriteopener.open(&lasreader->header);

// Loop through the points (note they will already be filtered)
while (lasreader->read_point())
{
    // Show coordinates
    std::cout << lasreader->point.get_x() << ", " << lasreader->point.get_y() << ", " << lasreader->point.get_z() << std::endl;

    // Write point
    laswriter->write_point(&lasreader->point);

    // Add it to the inventory (keeps track of min/max values for the header)
    laswriter->update_inventory(&lasreader->point);
}

laswriter->update_header(&lasreader->header, TRUE);

laswriter->close();
lasreader->close();

delete laswriter;
delete lasreader;
} 
```

错误是：

```
main.cpp|17|undefined reference to `LASreadOpener::LASreadOpener()'|
main.cpp|18|undefined reference to `LASwriteOpener::LASwriteOpener()'| 
```

ETC ...

我没有看到我做错了什么......我已经尝试过在mingw相应文件夹中复制.hpp和.lib的“硬”方法......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-12T20:28:24.383

我的文件结构如下：

```
./LAStools
./myproject 
```

从内部`./myproject`我编译如下：

```
g++ main.cpp -I../LAStools/LASlib/inc/ -I../LAStools/LASzip/src -llas -L. 
```

这导致代码的无错误编译：

```
#include "lasreader.hpp"
#include "laswriter.hpp"

int main(int argc, char *argv[]){
  LASreadOpener lasreadopener;
  lasreadopener.set_file_name("original.las");
  LASreader* lasreader = lasreadopener.open();

  while (lasreader->read_point()) {}

  lasreader->close();
  delete lasreader;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T00:20:52.500

确保您正在为与库相同的架构构建代码。默认情况下，LASlib 是为 32 位构建的，但您的编译器可能默认为 64 位，因此由于方法签名不同，编译器不会链接它们。

您可以尝试为 64 位重建 LASlib，或为 32 位编译您自己的软件。

不幸的是，您的链接器在某种程度上隐藏了问题，因为它正在[分解](http://www.kegel.com/mangle.html)方法名称。如果您可以将编译器设置为输出错位名称，这可能会有所帮助，因为它可以突出显示 32 位和 64 位二进制文​​件之间的差异。例如，解码一个重命名的名称（例如使用[https://demangler.com](https://demangler.com)）可以指示链接器在哪里期望一个返回 64 位指针的方法，但是库已经定义了一个具有相同名称但返回一个32 位指针。

# python - 如何创建一个简单的元类？

> ID：15836263
> 
> 赞同：3
> 
> 时间：2013-04-05T14:18:00.060
> 
> 标签：python, class, factory, metaclass

我做 Python 已经有一段时间了，我总是有点理解元类的含义，但我从来不需要元类。现在我认为解决我的问题的最佳方法是元类（如果有更好的方法，请纠正我）。

我正在尝试创建一个系统，它会自动为我的每个类添加一个类变量`n`和一个列表。`instances`这是一个类的简化示例：

```
class Foo:
    n = 0
    instances = []

    def __init__(self):
        self.index = Foo.n
        Foo.n += 1
        Foo.instances.append(self) 
```

这种结构应该为我的 7 或 8 个类实现，我认为元类可能会帮助我。我知道我可以使用`Foo.__metaclass__ = MyMetaclass`属性来**使用**元类，但是如何**创建**元类呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:23:05.937

实际上，在这里使用基类会更好：

```
class InstancesList(object): 
    def __new__(cls, *args, **kw):
        if not hasattr(cls, 'instances'):
            cls.instances = []
        return super(InstancesList, cls).__new__(cls, *args, **kw)

    def __init__(self):
        self.index = len(type(self).instances)
        type(self).instances.append(self)

class Foo(InstancesList):
    def __init__(self, arg1, arg2):
        super(Foo, self).__init__()
        # Foo-specific initialization 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:36:49.983

请不要害怕学习如何使用元类。很少有人知道他们可以施展的魔法：

```
#!/usr/bin/env python3

def main():
    x = Foo()
    print('x.index:', x.index)
    print('x.n:', x.n)
    print('x.instances:', x.instances)
    print('x.instances[0] == x:', x.instances[0] == x)

class MyMetaClass(type):

    def __new__(cls, name, bases, namespace):
        namespace.setdefault('n', 0)
        namespace.setdefault('instances', [])
        namespace.setdefault('__new__', cls.__new)
        return super().__new__(cls, name, bases, namespace)

    @staticmethod
    def __new(cls, *args):
        instance = cls.__base__.__new__(cls)
        instance.index = cls.n
        cls.n += 1
        cls.instances.append(instance)
        return instance

class Foo(metaclass=MyMetaClass):

    def __init__(self):
        print('Foo instance created')

if __name__ == '__main__':
    main() 
```

# ios - UITableView 在（显然）未能向委托询问 numberOfRowsInSection 后崩溃

> ID：15836264
> 
> 赞同：0
> 
> 时间：2013-04-05T14:18:00.300
> 
> 标签：ios, objective-c, crash, uitableview

`UITableViewController`当返回的行数`numberOfRowsInSection`与数据源不一致时，这里有很多关于 s 崩溃的问题。

由于这个问题，我的应用程序崩溃了——但我不明白为什么。更令人困惑的是，它在真正的 iPhone 和 iPhone Simulator 上崩溃，但在（真正的）iPad 上完美运行。

这是错误：

```
2013-04-05 14:38:15.644 JobTime[28484:c07] *** Terminating app due to uncaught
exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]:
index 3 beyond bounds [0 .. 2]' 
```

没错——NSArray 只扩展到 2。

奇怪的是，TableView 在刷新之前似乎没有向我的控制器（设置为它的委托）询问该部分中的行数。这是我的方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"called numberOfRowsInSection");
    return [[[JobStore sharedStore] allJobs] count];
} 
```

这是 iPhone 模拟器（但不是 iPad）上崩溃的顺序：

1.  TableView 工作正常，一切正常，上面的 NSLog 消息定期弹出。
2.  单击“添加新项目”按钮。
3.  将新项目添加到 JobStore（包含作业 NSArray 的单例）。
4.  打开一个模式 navigationController (UIModalPresentationFormSheet) 以编辑该新项目。
5.  取消编辑 - 并从 JobStore 中删除不需要的项目。

然后崩溃：

1.  TableView 在不调用 numberOfRowsInSection 的情况下自行更新（即没有出现上面的 NSLog 消息），因此它尝试从 JobStore 中检索数组边界之外的对象。

我已将 NSLog 添加到在 ViewController 被关闭时执行的dismissBlock：

```
[jobDetailViewController setDismissBlock:^{
    NSLog(@"dismissBlock");
    [[self tableView] reloadData];
    [self clearTableViewBackgroundColorAndResetHighlight];
}]; 
```

当我选择“完成”并从模式视图中保存项目时执行，但当我选择“取消”时**不会执行。**两种方法的代码行相同，我知道每个按钮都调用了正确的方法：

```
[[self presentingViewController] dismissViewControllerAnimated:YES completion:dismissBlock]; 
```

如果我将dismissBlock 简化为仅一个NSLog 语句而没有其他调用，情况也是如此：在“取消”情况下不会调用它。

我发现的唯一解决方案是在 cellForRowAtIndexPath 中重新检查数组的边界相当不雅：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1
                                  reuseIdentifier:@"UITableViewCell"];
    }

    // Check array bounds before trying to retrieve object from array

    if ([indexPath row] < [self tableView:tableView numberOfRowsInSection:0]) {
        Job *j = [[[JobStore sharedStore] allJobs] objectAtIndex:[indexPath row]];
        [[cell textLabel] setText:[j displayDescription]];
        [[cell detailTextLabel] setText:[j timeDescription]];

        if ([j selected]) {
            [cell setBackgroundColor:[UIColor lightGrayColor]];
        }
    } else {
        [[cell textLabel] setText:@""];
        NSLog(@"gone past array bounds");
    }
    return cell;
} 
```

这行得通，但它很笨拙。知道为什么 TableView 在刷新之前似乎不要求更新的行数吗？或者为什么它可以在 iPad 上运行，而在 iPhone 上不行？

我开始怀疑不同模式视图的一些怪癖，但如果有任何帮助，我将不胜感激。提前致谢。

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:24:12.380

`UITableView`缓存值以便提高效率（每次询问您可能会很慢 - 取决于您如何进行计算）。

因此，如果您更改底层数据源，则需要`tableView`告知它。您可以做一个完整的`[self.tableView reloadData];`或使用以下方法

> – insertRowsAtIndexPaths:withRowAnimation:
> – deleteRowsAtIndexPaths:withRowAnimation:
> – moveRowAtIndexPath:toIndexPath:
> – insertSections:withRowAnimation:
> – deleteSections:withRowAnimation:
> – moveSection:toSection:

这些通常在调用内部使用

> – 开始更新
> –结束更新

检查[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/cl/UITableView)

# mvvm - MonoTouch INotifyPropertyChanged 没有大框架

> ID：15836268
> 
> 赞同：1
> 
> 时间：2013-04-05T14:18:14.753
> 
> 标签：mvvm, xamarin.ios, observer-pattern, inotifypropertychanged

我有一个单点触控应用程序，我想使用 INotifyPropertyChanged 获得一些 MVVM 特性。

我不想包含一个像 MvvmCross 这样的 MVVM 框架来让它工作。

我可以手动将事件处理程序添加到 INotifyPropertyChanging 并手动更新文本字段（等），但我正在寻找一种不需要庞大的第 3 部分库的通用方法。

我需要做什么才能将文本字段绑定到“viewmodel.property”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:22:02.440

有一个精简版的 MVVMCross 允许您在不需要合并所有 MVVMCross dll 的情况下进行数据绑定。

[https://github.com/slodge/CrossLight](https://github.com/slodge/CrossLight)

# connection - 从开发环境迁移到开发/测试环境时的 Worklight 连接问题

> ID：15836271
> 
> 赞同：0
> 
> 时间：2013-04-05T14:18:21.923
> 
> 标签：connection, ibm-mobilefirst

从开发环境迁移到开发/测试环境时，我遇到了一个紧急问题。我总是得到错误

> 服务器无法处理来自应用程序的请求。请稍后再试。

*注意：开发环境已准备就绪（worklight 控制台和应用程序中心）。我可以通过 ...:9080/worklight/console/ 和 ...:9080/applicationcenter/applications/Applications.html 这两个 url 访问它们*

我看到了“Help-IBM Worklight”文档并按照它列出的步骤操作，但它没有用。

我采取的步骤：

1.  将 application-descriptor.xml 的 worklightServerRootURL 更改为：[http ://www.test.com:9080/worklight](http://www.test.com:9080/worklight)
2.  更改 worklight.properties：

```
publicWorkLightHostname=www.test.com
# http or https
publicWorkLightProtocol = http
# For default port leave empty
publicWorkLightPort=9080
publicWorkLightContext=/worklight 
```

其次是：

1.  全部构建并部署
2.  将 MyTest.war 文件重命名为 worklight.war（我看到已经部署了一个名为“worklight.war”的 .war 文件，我认为它用于工作灯控制台。）

当我直接访问网址“www.test.com:9080/worklight/apps/services/api/ISMD/android/”时，出现错误：

> AuthenticationContext.getOrCreateAuthenticationContext()

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:56:34.700

您在步骤中没有提及是否重新部署了 .war 文件。您没有提到您在开发/测试环境中运行的应用程序服务器是什么。

war 文件远不止 Worklight 控制台；它还包含 worklight.properties 和 authenticationConfig.xml 以及其他工件；您必须在应用程序服务器中重新部署此 .war 文件才能进行更改。

此外，当记录此类错误时，[此 APAR 会提示配置问题。](http://www-01.ibm.com/support/docview.wss?uid=swg1PM80510)先尝试重新部署。

# python - 使用2个表解析xml

> ID：15836276
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:18:33.447
> 
> 标签：python, xml, django, xml-parsing, django-views

我编写了一个函数来将 xml 文件中的数据保存到数据库。我正在使用两个模型，见下文。

模型.py

```
class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age = models.IntegerField()

class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)   
    book_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    author=models.ForeignKey(Author) 
```

我的 .xml 文件是

```
 <book>
    <book_id>101</book_id>
    <book_name>Python</book_name>
    <publisher_name>Maxwell</publisher_name>
    <author_id>1002</author_id>
    <first_name>John</first_name>
    <last_name>Dezosa</last_name>
    <email>john@gmail.com</email>
    <age>34</age>
  </book>
  <book>
    <book_id>102</book_id>
    <book_name>Django</book_name>
    <publisher_name>Technical</publisher_name>
    <author_id>1003</author_id>
    <first_name>Josep</first_name>
    <last_name>Raj</last_name>
    <email>joseph@gmail.com</email>
    <age>29</age>
  </book> 
```

我需要的是将 xml 数据保存到适当的字段中。从谷歌我了解了如何使用单个表进行配对，这里我不知道如何为“作者”表创建对象。

我尝试使用以下代码

```
for books in xmlDocTree.iter('book'):
            book_id = books[0].text
            book_name = books[1].text
            publisher_name = books[2].text
            author_id = books[3].text     
            books.first_name = books[0].text
            books.last_name = books[1].text 
            books.email = books[2].text
            books.age = books[3].text 
```

获得以下回溯

```
AttributeError at /addxml/
first_name
Request Method: POST
Request URL:    http://localhost:8000/addxml/
Django Version: 1.3.7
Exception Type: AttributeError
Exception Value:    
first_name
Exception Location: /root/Samples/DemoApp/DemoApp/views.py in addxml, line 106 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:20:43.713

您的图书模型没有`first_name`

您需要创建一个作者对象，然后将作者作为外键保存到书籍模型中。

```
for books in xmlDocTree.iter('book'):
    book_id = books[0].text
    book_name = books[1].text
    publisher_name = books[2].text

    author_id = books[3].text     
    first_name = books[4].text
    last_name = books[5].text 
    email = books[6].text
    age = books[7].text 

    author, _ = Author.objects.get_or_create(id=author_id, defaults={'first_name': first_name, 'last_name': last_name, 'email': email, 'age': age})
    author.save()

    book, - =  Book.objects.get_or_create(book_id=book_id, defaults={'book_name': book_name, 'published_name': publisher_name, 'author': author)})
    book.save() 
```

您可能需要`Author`模型中的另一列称为`author_id`

# global-asax - Global.asax 中的用户代码未处理实体异常

> ID：15836280
> 
> 赞同：1
> 
> 时间：2013-04-05T14:18:49.443
> 
> 标签：global-asax, redirect-loop

我首先将 Microsoft 示例项目用于实体框架代码；“WingtipToys”。我所做的只是提取文件并打开解决方案。该项目已成功构建，但在运行网站时出现错误。它在 Global.asax 中的一行中停止，消息是：**用户代码未处理实体异常**“**底层提供程序在打开时失败**”。令人惊讶的是，几天前我使用了这个示例项目，它运行良好，但突然发生了这个错误，尽管我没有更改代码中的任何内容，现在即使使用新下载的副本，我也遇到了同样的问题。

顺便说一句，当我通过谷歌浏览器浏览任何网页时，我都会收到此错误消息。“此网页存在重定向循环 位于 http://"Serveraddress"/ErrorPage.aspx?handler=customErrors%20section%20-%20Web.config 的网页导致重定向过多。清除此站点的 cookie 或允许第三个-party cookie 可能会解决问题。如果没有，则可能是服务器配置问题，而不是您的计算机问题。”

public class Global : HttpApplication { void Application_Start(object sender, EventArgs e) { // 在应用程序启动时运行的代码 BundleConfig.RegisterBundles(BundleTable.Bundles); AuthConfig.RegisterOpenAuth(); Database.SetInitializer(new ProductDatabaseInitializer());

```
 // Add Administrator.
        if (!Roles.RoleExists("Administrator")) --- !!!!!!!!!!!!!!!!!!!!!!!!!!Error at this line
        {
            Roles.CreateRole("Administrator");
        }
        if (Membership.GetUser("Admin") == null)
        {
            Membership.CreateUser("Admin", "Pa$$word", "Admin@contoso.com");
            Roles.AddUserToRole("Admin", "Administrator"); 
```

以下是异常详细信息 HResult=-2146232060 Message=无法打开登录请求的数据库“aspnet-WingtipToys”。登录失败。用户“Jinx-PC\Jinx”登录失败。Source=.Net SqlClient 数据提供程序 ErrorCode=-2146232060 Class=11 LineNumber=65536 Number=4060 Procedure="" Server=(LocalDb)\v11.0 State=1 StackTrace: at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection) 在 System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource 1 次重试, DbConnectionOptions userOptions, DbConnectionInternal& connection) 在`1 retry, DbConnectionOptions userOptions) at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`System.Data.SqlClient.SqlConnection.Open() 在 System.Data.EntityClient.EntityConnection .OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String mappedOperation, Boolean& closeStoreConnectionOnFailure) InnerException:

# asp.net-mvc - 为 ASP.NET MVC 中的特定区域注册 HttpHandler

> ID：15836281
> 
> 赞同：0
> 
> 时间：2013-04-05T14:18:50.427
> 
> 标签：asp.net-mvc

我正在尝试仅为特定区域注册 HTTP 处理程序。所以不必在根 web.config 中注册它。

如果我在根 web.config 中注册处理程序，它工作正常：

```
<system.web>
  <httpHandlers>
    <add path="/Telerik.ReportViewer.axd" verb="*" type="Telerik.ReportViewer.WebForms.HttpHandler, Telerik.ReportViewer.WebForms, Version=6.2.12.1017, Culture=neutral, PublicKeyToken=a9d7983dfcc261be" validate="true" />
  </httpHandlers>
</system.web> 
```

但是在区域内的 web.config 中，即 area\reporting\views\web.config 它似乎没有注册处理程序。我得到以下异常：

> 报告查看器所需的 http 处理程序尚未在应用程序的 web.config 文件中注册。添加到配置文件的 system.web/httpHandlers 部分。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:45:54.937

您的问题是困扰我们许多人的问题：区域配置不是项目中配置继承树的一部分。它们仅用于配置其中的视图和交付。

您的一个选择是创建一个从该处理程序继承的包装类，全局注册它并仅当您在当前上下文的 routeData 中发现该区域时调用它的功能。

我希望这在某种程度上有所帮助。这些年来，我确实感受到了自己的痛苦。

# ubuntu - 如何将 Haxe 项目与 Nape 连接起来

> ID：15836289
> 
> 赞同：2
> 
> 时间：2013-04-05T14:19:02.413
> 
> 标签：ubuntu, haxe, nape

我有一个 src 文件夹，其中包含 Main.hx 和 compile.hxml。我运行命令`sudo haxelib install nape`，它报告它已成功安装 Nape 2.0.5。

在 Main.hx 我发布了[这个页面](http://napephys.com/samples.html#haxe-BasicSimulation)的代码，然后我运行`haxe compil.hxml` 它给了我错误： `characters 0-22 : Class not found : nape.geom.Vec2`。我可以得出结论，haxe 没有“看到” Nape。

旁注：我使用 ubuntu 12.10。

如何在我的代码中使用该库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-25T01:18:09.880

如果您使用的是 openfl 并遇到同样的错误，那么在 project.xml

添加这个（作为像 openfl 一样的 XML 标签）

```
 <haxelib name="nape" />

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:13:58.827

你的 .hxml 是什么样的？

你应该有一个像'-lib nape'这样的行来链接nape库。

另一方面：为什么要使用 sudo 运行 haxelib？应该没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:54:45.127

我没有使用过这个库，但我知道它是在前宏时代编写的，并且使用了一个特殊的 haxe 预处理器，称为 caxe。查看库的 github 源，我看不到很多 .hx 文件，主要是 .cx。例如，有`nape/geom/Vec2.cx`，但没有`nape/geom/Vec2.hx`。

因此，我的假设是应该首先预编译该库，可能是通过它随附的 Makefile 进行预编译，但是我无法找到有关该问题的任何文档。

# scala - Scala trait 中的抽象私有字段

> ID：15836293
> 
> 赞同：6
> 
> 时间：2013-04-05T14:19:12.820
> 
> 标签：scala, traits

我碰巧发现一个特征中不允许有抽象的私有字段，也就是说，

```
trait A1 {
    //private val a: Int         // Not allowed
    protected val b: Int         // OK
} 
```

如果私有字段是构造函数参数，那么对抽象类做这样的事情似乎没问题，也就是说，

```
abstract class A2 (private val i: Int) // OK 
```

所以我猜一个特征没有构造函数参数，所以没有办法初始化它们，因此不允许抽象私有字段。

如果它们是“受保护的”，那么子类可以使用预先初始化的字段来初始化它们。这种方法允许子类看到这些字段。

如果我只想初始化它们并在之后隐藏它们怎么办，如下例所示？

```
object holding {
    trait trick {
        protected val seed: Int                     // Can't be private
        final def magic: Int = seed + 123
    }

    trait new_trick extends trick {
        def new_magic: Int = magic + 456
        def the_seed: Int = seed                    // [1]
    }

    def play: new_trick = new { val seed = 1 } with new_trick 

    def show_seed(t: new_trick): Int = t.the_seed   // [2]
} 
```

我**不**希望任何人能够看到种子，也就是说，不应该允许 [2]（因此 [1]）。有没有办法让特质做到这一点？

* * *

正如@Randall 和@pagoda_5b 所指出的，我的问题没有多大意义。但幸运的是@Régis 和@axel22 将它变成了另一个有趣的问题，并提供了解决它的模式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T16:49:51.547

在允许子特征初始化它的同时保持 val 私有的一种简单方法是将其定义为私有，但使用另一个受保护方法返回的值对其进行初始化。然后子特征可以定义这个受保护的方法来改变初始值，但不能访问该值本身。所以你会改变这个：

```
trait A {
  protected val foo: Bar
} 
```

进入：

```
trait A {
  private val foo: Bar = initFoo 
  protected def initFoo: Bar
} 
```

现在，只有 trait`A`可以访问 val `foo`。子特征可以`foo`通过定义设置初始值`initFoo`，但不能访问`foo`自身：

```
trait B extends A {
  protected def initFoo: Bar = ???
} 
```

显然，`initFoo`它本身仍然可以通过子特征访问。`initFoo`如果每次都创建一个新实例（换句话说，它是一个工厂），这通常不是问题，因为我们可能只对将实例设为私有`A`而不关心子特征能够创建新的实例`Bar` （不管新实例是否等于`foo`按照他们的`equals`方法）。

但是如果这是一个问题（在你的情况下肯定是`seed`fo 类型`Int`，因此你想要隐藏的是一个值而不仅仅是一个引用），我们可以使用一个额外的技巧来允许子特征定义`initFoo`但防止他们（及其子特征）无法调用它。让我们面对现实吧，这个技巧对于这种简单的需求来说非常糟糕，但它说明了高级访问控制的一个很好的模式。这个想法归功于标准库作者（参见[http://www.scala-lang.org/api/current/index.html#scala.concurrent.CanAwait](http://www.scala-lang.org/api/current/index.html#scala.concurrent.CanAwait)）。

```
trait A {
  // A "permit" to call fooInit. Only this instance can instantiate InitA
  abstract class InitA private[this]()
  // Unique "permit"
  private implicit def initA: InitA = null

  private def foo: Int = fooInit
  protected def fooInit( implicit init: InitA ): Int
}

trait B extends A {
  protected def fooInit( implicit init: InitA ): Int = 123
} 
```

现在，如果`B`尝试调用`initFoo`，编译器将抱怨它找不到隐式类型`InitA`（唯一的此类实例是`A.initA`并且只能访问 in `A`）。

正如我所说，这有点糟糕，并且 axel22 提供的包私有解决方案肯定是一个更容易的选择（尽管它不会阻止任何人在与您相同的包中定义他们的子特征，从而克服访问限制）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T14:38:22.753

你能做的最好的就是将这些包声明为私有 - `private[package_name]`。这将允许您在执行实现的同一包中扩展和定义特征，但不允许客户端从其他包中使用它。

# delphi - 获取周围像素的颜色并更改它们

> ID：15836301
> 
> 赞同：2
> 
> 时间：2013-04-05T14:19:32.473
> 
> 标签：delphi, image-processing, pixels

我想制作一个应用程序，首先检查图像中的某个像素颜色。当它找到具有正确像素颜色的像素时，它将“突出显示”该像素。

但棘手的部分来了，之后我想检查“突出显示”像素的 8 个周围像素的颜色。如果这些周围像素之一是黑色的，则该像素的颜色应该改变。

我已经设法“突出显示”具有特定像素颜色的像素（请参见下面的代码），但我一直在寻找如何检查其周围像素的方法......

我希望我的问题很清楚。

```
procedure Tform_Main.analyzepixels (bitmapanalyse : TBitmap);
var
C: TColor;
X, Y:Integer;
Pixels : PRGBTripleArray 
begin
  bitmapanalyse := TBitmap.Create;
  try
  bitmapanalyse.Assign(FBitmap);

  Form_memo.Memo1.Lines.BeginUpdate;
  try
  for Y := 0 to bitmapanalyse.Height - 1 do
  begin
    Pixels := bitmapanalyse.ScanLine[Y];
    ProgressBar2.StepIt;
    ProgressBar2.Update;
    Application.ProcessMessages;
    for X := 0 to bitmapanalyse.Width - 1 do
    begin
      if (Pixels[X].rgbtRed >= Pixelcolor) and 
         (Pixels[X].rgbtGreen >= Pixelcolor) and    
         (Pixels[X].rgbtBlue >= Pixelcolor)
      then
      begin
        C := RGB(
          Pixels[X].rgbtRed,
          Pixels[X].rgbtGreen,
          Pixels[X].rgbtBlue
        );

           Form_memo.Memo1.Lines.Add(
          '===============' + sLineBreak +
          'Pixel[' + IntToStr(X) + '; ' + IntToStr(Y) + ']' + sLineBreak +
          'Color: ' + ColortoString(C))

        ;
        Pixels[X].rgbtRed := 255;
        Pixels[X].rgbtGreen := 255;
        Pixels[X].rgbtBlue := 0;
      end;
    end;
  end;
finally
  Form_memo.Memo1.Lines.EndUpdate;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:02:18.330

我可能遗漏了一些东西，但既然你有 (x, y) 你可以通过简单地使用来获得所有周围的像素

```
[x - 1, y - 1][x  , y - 1][x + 1, y - 1]
[x - 1, y    ][x  , y    ][x + 1, y    ]
[x - 1, y + 1][x  , y + 1][x + 1, y + 1] 
```

您已经有了获取特定像素的逻辑。我只会重构你所拥有的

```
function GetRGBAt(ABitmap: TBitmap; const X, Y: Integer) : PRGBTriple;
begin
    Result := nil; // don't remember if this is necessary
    if (Y >= 0) and (X >= 0) then
    begin
        Result := aBitmap.ScanLine[Y];
        Inc(Result, X);
    end;
end;

function IsRGBBlack(ABitmap: TBitmap; const X, Y: Integer) : boolean;
var
    P: PRGBTriple;
begin
    P := GetRGBAt(ABitmap, X, Y);
    Result := (P <> nil) and 
            (P^.rgbtBlue + P^.rgbtGreen + P^.rgbtBlue = 0);
end; 
```

然后，您只需要将检查添加到您的代码中。由于 Delphi 在 OR 布尔表达式上短路，因此以下内容就足够了：

```
if    IsRGBBlack(bitmapanalyse, x - 1, y-1) 
   or IsRGBBlack(bitmapanalyse, x,     y-1) 
   or IsRGBBlack(bitmapanalyse, x + 1, y-1) 

   or IsRGBBlack(bitmapanalyse, x - 1, y) 
   // x, y not needed
   or IsRGBBlack(bitmapanalyse, x + 1, y) 

   or IsRGBBlack(bitmapanalyse, x - 1, y + 1) 
   or IsRGBBlack(bitmapanalyse, x,     y + 1) 
   or IsRGBBlack(bitmapanalyse, x + 1, y + 1)  then

// your logic here for (x, y) 
```

这是一种极其简单的方法，但是您没有说明例如在相邻的合格像素的情况下要做什么，因此您可能需要为这些像素添加一些额外的逻辑。

# android - TextView 可以选择并包含链接吗？

> ID：15836306
> 
> 赞同：21
> 
> 时间：2013-04-05T14:19:41.153
> 
> 标签：android, textview

我遇到了一个问题`TextView`。我可以使用 使其可选择`setTextIsSelectable(true)`，但是当我启用要单击的链接时`setMovementMethod(LinkMovementMethod.getInstance())`，它不再可选择。

请注意，我的意思不是让原始链接可点击，而是通过`TextView`使用类似`setText(Html.fromHtml("<a href='http://stackoverflow.com'>Hello World!</a>"))`.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-06-01T11:18:46.233

[奥克斯的](https://stackoverflow.com/questions/15836306/can-a-textview-be-selectable-and-contain-links/15844339#15844339)回答导致在 textview 上双击时出现异常

```
java.lang.IndexOutOfBoundsException: setSpan (-1 ... -1) 在 0 之前开始...
```

我查看了*LinkMovementMethod*中的*onTouchEvent 实现*，发现当 textview 不包含链接时它会删除选择。在这种情况下，选择从空值开始，当用户尝试更改它时应用程序崩溃。

```
...
if (link.length != 0) {
    if (action == MotionEvent.ACTION_UP) {
        link[0].onClick(widget);
    } else if (action == MotionEvent.ACTION_DOWN) {
        Selection.setSelection(buffer,
        buffer.getSpanStart(link[0]),
        buffer.getSpanEnd(link[0]));
    }
  return true;
} else {
  Selection.removeSelection(buffer);
}
... 
```

所以我重写*了 onTouchEvent*方法，它工作正常。

```
public class CustomMovementMethod extends LinkMovementMethod {
    @Override
    public boolean canSelectArbitrarily () {
        return true;
    }

    @Override
    public void initialize(TextView widget, Spannable text) {
        Selection.setSelection(text, text.length());
    }

    @Override
    public void onTakeFocus(TextView view, Spannable text, int dir) {
        if ((dir & (View.FOCUS_FORWARD | View.FOCUS_DOWN)) != 0) {
            if (view.getLayout() == null) {
                // This shouldn't be null, but do something sensible if it is.
                Selection.setSelection(text, text.length());
            }
        } else {
            Selection.setSelection(text, text.length());
        }
    }

    @Override
    public boolean onTouchEvent(TextView widget, Spannable buffer,
                                MotionEvent event) {
        int action = event.getAction();

        if (action == MotionEvent.ACTION_UP ||
                action == MotionEvent.ACTION_DOWN) {
            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            ClickableSpan[] link = buffer.getSpans(off, off, ClickableSpan.class);

            if (link.length != 0) {
                if (action == MotionEvent.ACTION_UP) {
                    link[0].onClick(widget);
                } else if (action == MotionEvent.ACTION_DOWN) {
                    Selection.setSelection(buffer,
                            buffer.getSpanStart(link[0]),
                            buffer.getSpanEnd(link[0]));
                }
                return true;
            }
        }

        return Touch.onTouchEvent(widget, buffer, event);
    }
} 
```

希望它对某人有所帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-05T22:00:35.363

我想到了。您需要继承 LinkMovementMethod 并添加对文本选择的支持。很遗憾它本身不支持它。[我只是使用源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/text/method/ArrowKeyMovementMethod.java?av=f)中的等效方法覆盖了相关方法`ArrowKeyMovementMethod`。我想这是 Android 开源的好处之一！

```
public class CustomMovementMethod extends LinkMovementMethod {
    @Override
    public boolean canSelectArbitrarily () {
        return true;
    }

    @Override
    public void initialize(TextView widget, Spannable text) {
        Selection.setSelection(text, text.length());
    }

    @Override
    public void onTakeFocus(TextView view, Spannable text, int dir) {
       if ((dir & (View.FOCUS_FORWARD | View.FOCUS_DOWN)) != 0) {
           if (view.getLayout() == null) {
               // This shouldn't be null, but do something sensible if it is.
               Selection.setSelection(text, text.length());
           }
       } else {
           Selection.setSelection(text, text.length());
       }
    }
} 
```

要使用它，只需直接实例化它，如下所示：

```
textView.setMovementMethod(new CustomMovementMethod()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-25T08:16:43.330

**TL; DR：只需`LinkArrowKeyMovementMethod`在此答案末尾使用即可获得完美解决方案。**

如果您曾经尝试使用扩展的投票最多的答案，则会出现一个烦人的错误`LinkMovementMethod`——当您通过单击一些未选择的文本来取消选择时，整个选择会从头到尾闪烁，然后变得一无所有。这是因为`LinkMovementMethod`实际上无法像`ArrowKeyMovementMethod`.

`TextView`如果您已设置`android:autoLink`为，则另一种方法可能是使用自己的解决方法`true`，如以下来源`TextView`：

```
 final boolean textIsSelectable = isTextSelectable();
        if (touchIsFinished && mLinksClickable && mAutoLinkMask != 0 && textIsSelectable) {
            // The LinkMovementMethod which should handle taps on links has not been installed
            // on non editable text that support text selection.
            // We reproduce its behavior here to open links for these.
            ClickableSpan[] links = ((Spannable) mText).getSpans(getSelectionStart(),
                getSelectionEnd(), ClickableSpan.class);

            if (links.length > 0) {
                links[0].onClick(this);
                handled = true;
            }
        } 
```

但是我个人不想要自动链接功能（我有我自己的链接信息），所以在@Weidian Huang 的想法的基础上，我将`LinkMovementMethod`'s 的功能融入`ArrowKeyMovementMethod`并构建了一个新的移动方法：

```
/**
 * @see LinkMovementMethod
 * @see ArrowKeyMovementMethod
 */
public class LinkArrowKeyMovementMethod extends ArrowKeyMovementMethod {

    private static final int CLICK = 1;
    private static final int UP = 2;
    private static final int DOWN = 3;

    private static Object FROM_BELOW = new NoCopySpan.Concrete();

    private static LinkArrowKeyMovementMethod sInstance;

    public static LinkArrowKeyMovementMethod getInstance() {
        if (sInstance == null) {
            sInstance = new LinkArrowKeyMovementMethod();
        }
        return sInstance;
    }

    @Override
    public void initialize(TextView widget, Spannable text) {
        super.initialize(widget, text);

        text.removeSpan(FROM_BELOW);
    }

    @Override
    public void onTakeFocus(TextView view, Spannable text, int dir) {
        super.onTakeFocus(view, text, dir);

        if ((dir & View.FOCUS_BACKWARD) != 0) {
            text.setSpan(FROM_BELOW, 0, 0, Spannable.SPAN_POINT_POINT);
        } else {
            text.removeSpan(FROM_BELOW);
        }
    }

    @Override
    protected boolean handleMovementKey(TextView widget, Spannable buffer, int keyCode,
                                        int movementMetaState, KeyEvent event) {
        switch (keyCode) {
            case KeyEvent.KEYCODE_DPAD_CENTER:
            case KeyEvent.KEYCODE_ENTER:
                if (KeyEvent.metaStateHasNoModifiers(movementMetaState)) {
                    if (event.getAction() == KeyEvent.ACTION_DOWN &&
                            event.getRepeatCount() == 0 && action(CLICK, widget, buffer)) {
                        return true;
                    }
                }
                break;
        }
        return super.handleMovementKey(widget, buffer, keyCode, movementMetaState, event);
    }

    @Override
    protected boolean up(TextView widget, Spannable buffer) {
        if (action(UP, widget, buffer)) {
            return true;
        }

        return super.up(widget, buffer);
    }

    @Override
    protected boolean down(TextView widget, Spannable buffer) {
        if (action(DOWN, widget, buffer)) {
            return true;
        }

        return super.down(widget, buffer);
    }

    @Override
    protected boolean left(TextView widget, Spannable buffer) {
        if (action(UP, widget, buffer)) {
            return true;
        }

        return super.left(widget, buffer);
    }

    @Override
    protected boolean right(TextView widget, Spannable buffer) {
        if (action(DOWN, widget, buffer)) {
            return true;
        }

        return super.right(widget, buffer);
    }

    private boolean action(int what, TextView widget, Spannable buffer) {
        Layout layout = widget.getLayout();

        int padding = widget.getTotalPaddingTop() +
                widget.getTotalPaddingBottom();
        int areaTop = widget.getScrollY();
        int areaBot = areaTop + widget.getHeight() - padding;

        int lineTop = layout.getLineForVertical(areaTop);
        int lineBot = layout.getLineForVertical(areaBot);

        int first = layout.getLineStart(lineTop);
        int last = layout.getLineEnd(lineBot);

        ClickableSpan[] candidates = buffer.getSpans(first, last, ClickableSpan.class);

        int a = Selection.getSelectionStart(buffer);
        int b = Selection.getSelectionEnd(buffer);

        int selStart = Math.min(a, b);
        int selEnd = Math.max(a, b);

        if (selStart < 0) {
            if (buffer.getSpanStart(FROM_BELOW) >= 0) {
                selStart = selEnd = buffer.length();
            }
        }

        if (selStart > last)
            selStart = selEnd = Integer.MAX_VALUE;
        if (selEnd < first)
            selStart = selEnd = -1;

        switch (what) {
            case CLICK:
                if (selStart == selEnd) {
                    return false;
                }

                ClickableSpan[] link = buffer.getSpans(selStart, selEnd, ClickableSpan.class);

                if (link.length != 1)
                    return false;

                link[0].onClick(widget);
                break;

            case UP:
                int bestStart, bestEnd;

                bestStart = -1;
                bestEnd = -1;

                for (int i = 0; i < candidates.length; i++) {
                    int end = buffer.getSpanEnd(candidates[i]);

                    if (end < selEnd || selStart == selEnd) {
                        if (end > bestEnd) {
                            bestStart = buffer.getSpanStart(candidates[i]);
                            bestEnd = end;
                        }
                    }
                }

                if (bestStart >= 0) {
                    Selection.setSelection(buffer, bestEnd, bestStart);
                    return true;
                }

                break;

            case DOWN:
                bestStart = Integer.MAX_VALUE;
                bestEnd = Integer.MAX_VALUE;

                for (int i = 0; i < candidates.length; i++) {
                    int start = buffer.getSpanStart(candidates[i]);

                    if (start > selStart || selStart == selEnd) {
                        if (start < bestStart) {
                            bestStart = start;
                            bestEnd = buffer.getSpanEnd(candidates[i]);
                        }
                    }
                }

                if (bestEnd < Integer.MAX_VALUE) {
                    Selection.setSelection(buffer, bestStart, bestEnd);
                    return true;
                }

                break;
        }

        return false;
    }

    @Override
    public boolean onTouchEvent(TextView widget, Spannable buffer, MotionEvent event) {
        int action = event.getAction();

        if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_DOWN) {
            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            ClickableSpan[] links = buffer.getSpans(off, off, ClickableSpan.class);

            if (links.length != 0) {
                if (action == MotionEvent.ACTION_UP) {
                    links[0].onClick(widget);
                } else if (action == MotionEvent.ACTION_DOWN) {
                    Selection.setSelection(buffer,
                            buffer.getSpanStart(links[0]),
                            buffer.getSpanEnd(links[0]));
                }
                return true;
            }
            // Removed
            //else {
            //    Selection.removeSelection(buffer);
            //}
        }

        return super.onTouchEvent(widget, buffer, event);
    }
} 
```

要使用它，只需调用：

```
textView.setTextIsSelectable(true);
textView.setMovementMethod(LinkArrowKeyMovementMethod.getInstance()); 
```

这对我来说非常有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-19T13:41:15.533

`LinkMovementMethod()`不太支持文本选择，即使我们可以选择文本，但是滚动textview之后，选择会丢失。

最好的实现是从 扩展`ArrowKeyMovementMethod`，它很好地支持文本选择。

请在[此处查看详细信息](https://hwdtech.wordpress.com/2015/09/19/android-textview-from-html-with-clickable-links-and-text-selection/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-12T07:39:11.967

XML TextView 不应有任何链接或任何可以选择的属性：

```
<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/> 
```

然后，按照以下顺序以编程方式设置所有内容：

```
textView.setText(Html.fromHtml(myHtml));
Linkify.addLinks(textView, Linkify.WEB_URLS);
textView.setTextIsSelectable(true); // API-11 and above
textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-25T06:33:36.173

此外，订单很重要

```
textView.setTextIsSelectable(true);
textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

允许内容是可选的，并且链接点击工作完美

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-07T23:27:47.597

这是我对 Kotlin 的看法（大致基于 @hai-zhang 的回答）。**简化**！请参阅我的要点以获得更好的版本。我目前将它用于自定义跨度，而不是 HTML，它仍然与我相关，尤其是当我需要将用户点击的位置传递给跨度对象时。

需要在setTextIsSelectable(true)**之后设置移动方式**

```
/** Minimal version of Smart Movement that only has limited support of [ClickableSpan] */
object SmartMovementMethodMinimal : ArrowKeyMovementMethod() {

    override fun onTouchEvent(widget: TextView?, buffer: Spannable?, event: MotionEvent?) =
        handleMotion(event!!, widget!!, buffer!!) || super.onTouchEvent(widget, buffer, event)

    private fun handleMotion(event: MotionEvent, widget: TextView, buffer: Spannable): Boolean {
        if (event.action == MotionEvent.ACTION_UP) {
            // Get click position
            val target = Point().apply {
                x = event.x.toInt() - widget.totalPaddingLeft + widget.scrollX
                y = event.y.toInt() - widget.totalPaddingTop + widget.scrollY
            }

            // Get span line and offset
            val line = widget.layout.getLineForVertical(target.y)
            val offset = widget.layout.getOffsetForHorizontal(line, target.x.toFloat())

            if (event.action == MotionEvent.ACTION_UP) {
                val spans = buffer.getSpans<ClickableSpan>(offset, offset)
                if (spans.isNotEmpty()) {
                    spans.forEach { it.onClick(widget) }
                    return true
                }
            }
        }

        return false
    }
} 
```

更详细和复杂的代码与示例在这里：[https ://gist.github.com/sQu1rr/210f7e08dd939fa30dcd2209177ba875](https://gist.github.com/sQu1rr/210f7e08dd939fa30dcd2209177ba875)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-05T19:26:45.063

是否可以将 TextView 与 URL 关联？您是否有 10 个 TextView 和 10 个 URL，编写代码应该很简单，如果单击 TextView[3]，它会触发带有 URL[3] 的 webview（或浏览器）的意图

# memory - SandyBridge：启用/禁用交错时，物理内存如何跨通道映射？

> ID：15836309
> 
> 赞同：2
> 
> 时间：2013-04-05T14:19:45.947
> 
> 标签：memory, hardware, intel, datasheet

我有两个关于跨通道内存交错如何在 Sandy Bridge 处理器上工作的低级问题。我翻遍了英特尔的技术文档，仍然找不到答案。你能帮我吗？

现代 CPU 中的多通道内存控制器跨内存通道条带化数据。这允许并行执行读取和写入，从而提高性能。

问题 #1：Sandy Bridge 用于交错的块大小是多少？我发现一些信息表明它是缓存行大小。另一方面，其他人建议它是[可配置](https://stackoverflow.com/questions/4183461/nehalem-memory-architecture-address-mapping)的（至少在较旧的英特尔架构中）。它是哪一个？你能指出一份英特尔文件吗？

一些 CPU 允许禁用交错。一些高端系统的 BIOS 设置证实了这一点，例如 HP 的 ProLiant 和 Fujitsu 的 Primergy。我可以找到的最接近英特尔的文档是此[E5 产品系列数据表](http://www.intel.com/content/dam/www/public/us/en/documents/datasheets/xeon-e5-1600-2600-vol-2-datasheet.pdf)中的第 4.4.4.3 节。我已经联系了惠普，询问他们的 ProLiants 在禁用交错时如何工作，但即使在电话会议上，他们也无法回答我的问题。

问题 #2：禁用交错时，如何跨通道映射内存？据推测，它不同于备用或镜像模式配置。

# javascript - 禁用 onmouseover 在 IE9 中有效，但在 IE8 中无效

> ID：15836313
> 
> 赞同：0
> 
> 时间：2013-04-05T14:19:59.280
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9, mouseover, onmouseover

我有一个小脚本可以禁用创建的 onmouseover 事件。

```
function disableHovers() {
        var table = document.getElementById("matrix");
        table.onmouseout = "#";
        for (var i = 0, row; row = table.rows[i]; i++) {
           for (var j = 0, col; col = row.cells[j]; j++) {
                col.onmouseover = "#";
           }  
        }
    } 
```

问题是它适用于IE9，但不适用于IE8。有人有什么建议吗？

# c - 未定义的端口号作为输出 - UDP/C/Linux

> ID：15836314
> 
> 赞同：1
> 
> 时间：2013-04-05T14:20:00.560
> 
> 标签：c, linux, network-programming, udp

我已经在客户端和服务器程序中定义了端口号。我启动了从客户端接收数据包的简单 udp 服务器程序。服务器获取数据包但是当我打印客户端信息时，端口号被称为随机数（51958）如何获取正确的端口号。即我定义的数字。

```
 #define PORT XYZ
       ...
     if((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
        diep("socket");

      memset((char *) &si_me, 0, sizeof(si_me));

      si_me.sin_family = AF_INET;
      si_me.sin_port = htons(PORT);
      si_me.sin_addr.s_addr = htonl(INADDR_ANY);

      if(bind(s, (struct sockaddr *) &si_me, sizeof(si_me)) == -1)
        diep("bind");

      for(i = 0; i < NPACK; i += 1) {
        if(recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen) == -1)
          diep("recvfrom()");

        printf("Recieved packet from %s: %d\nData: %s\n\n", inet_ntoa(si_other.sin_addr), ntohs(si_other.sin_port), buf);
      }
      close(s); 
```

/// 客户

```
 #define PORT XYZ

   if((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
                diep("socket");

        memset((char *) &si_other, 0, sizeof(si_other));

        si_other.sin_family = AF_INET;
        si_other.sin_port = htons(PORT);
        if(inet_aton(SRV_IP, &si_other.sin_addr) == 0) {
                fprintf(stderr, "inet_aton() failed\n");
                exit(1);
        }

        {
                for(i = 0; i < NPACK; i += 1) {
                        printf("Sending packet %d\n", index);
                        sprintf(buf, "This is packet%d\n", index);
                     ;
                        if(sendto(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, slen) == -1)
                                diep("sendto()");
                        index++;
                }

        }
        close(s); 
```

**更新** 如果我们在 N 个套接字上发送了数据，并且在服务器端我们处于接收数据的 while(1) 循环中，我们如何识别客户端发送的端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:24:32.740

我认为*它实际上是*正确的端口号，因为您正在打印客户端的源端口（如果未指定，客户端主机使用随机的免费端口）而不是服务器正在侦听的目标端口

如果您有多个套接字，则可以获取与[getsockname绑定的端口](http://pubs.opengroup.org/onlinepubs/009695399/functions/getsockname.html)

```
if (getsockname(sock, (struct sockaddr *)&sin, &len) == -1)
    perror("getsockname");
else
    printf("port number of the listening socket %d\n", ntohs(sin.sin_port)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:23:39.660

您尚未将客户端套接字绑定到特定端口，因此它获得了系统分配的端口。

# c# - 确定WinForm四个角的最佳方法

> ID：15836315
> 
> 赞同：0
> 
> 时间：2013-04-05T14:20:00.367
> 
> 标签：c#, winforms

我有一个 C# MDI 应用程序，我需要在其中确定 MDI 父级的四个角中的每一个的点。我有四种不同类型的通知子窗口，我需要在四个角中的每一个中显示它们。到目前为止，由于屏幕分辨率和尺寸因显示器而异，因此我尝试让这些子窗体始终如一且精确地定位在角落中，但没有成功。部分问题是我的应用程序有一个 ToolStripMenu，它在父级的整个长度上水平运行。

当然 Parent 的左上角是最容易确定的，但是对于如何准确确定其他 3 个角有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:29:06.280

可能不正确的语法

top_right_corner.x = top_left_corner.x + form.width

bottom_left_corner.x = top_left_corner.x

bottom_right_corner.x = top_right_corner.x

top_right_corner.y = top_left_corner.y

bottom_left_corner.y = top_left_corner.y - form.height

bottom_right_corner.y = top_right_corner.y

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:57:06.093

如果左上角在`(x, y)`，则：

*   右上角是：`(x + mdiForm.Width - childForm.Width, y)`
*   左下角在：`(x, y + mdiForm.Height - childForm.Height)`
*   右下角位于：`(x + mdiForm.Width - childForm.Width, y + mdiForm.Height - childForm.Height)`

上面的坐标是您定位子窗体的位置，以便它们出现在相应的角落。如果适用，您可能必须将工具栏高度添加到 y 坐标。

# android - Android空白纹理（延迟加载纹理）

> ID：15836318
> 
> 赞同：0
> 
> 时间：2013-04-05T14:20:09.483
> 
> 标签：android, opengl-es, textures

我有一个 GLSurfaceView 来渲染我的场景。我的场景显示正确，除了一些我有白色方块而不是真实纹理的纹理。我使用两种类型的纹理：

*   一些纹理在项目的资源中。我在其中创建它们`onSurfaceCreated`，一切正常
*   其他一些需要从远程位置下载。这些是无法正确显示的纹理。

我使用以下代码下载并创建“惰性纹理”：

```
public void onDrawFrame(GL10 gl) {
    ...
    Texture3D.getDynamicTexture(gl, object.avatar).bind(gl);
    ...
}

public static Texture3D getDynamicTexture(GL10 gl, int key) {
    Texture3D texture =  dynamicTextures.get(key);

    if (texture == null) {
        dynamicTextures.put(key, new Texture3D(gl, key, Type.DYNAMIC));
        texture = getStaticTexture(R.drawable.broken_img);
    }

    return texture;
}

public Texture3D(final GL10 gl, final int id, Type type) {
    gl.glEnable(GL10.GL_TEXTURE_2D);

    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
    texture = newTextureID(gl);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, texture);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

    Utils.loadImage(id, new SimpleImageLoadingListener() {

        @Override
        public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
            _pBitmap = loadedImage;
            GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, _pBitmap, 0);

            _pBitmap = null;
            gl.glEnable(GL10.GL_BLEND);
        }

    }); 
```

我看到下载有效，因为 R.drawable.broken_img 被白色方块取代。纹理似乎出现了，但它们都堆叠在屏幕顶部的一条线上（见图）。

![屏幕顶部的堆叠纹理](https://i.stack.imgur.com/PcMnt.png)

我还尝试了[Android OpenGL ES 1.1 白盒纹理](https://stackoverflow.com/questions/5691365/android-opengl-es-1-1-white-box-textures?rq=1#comment7340488_5692352)，但也没有用。我看到的唯一区别是纹理不再出现在屏幕顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:13:44.093

我通过添加 2 个布尔标志（imageLoaded、textureCreated）解决了这个问题。这些标志允许我首先下载图像，然后在获得图像后立即创建纹理（创建纹理的所有代码都在“同一”时间执行）。

# ruby - 未知的 ruby 解释器字符串组件：切换目录时的“ruby_1.9.3”

> ID：15836319
> 
> 赞同：0
> 
> 时间：2013-04-05T14:20:16.573
> 
> 标签：ruby, macos, jruby

当我 cd 进入我的项目目录时，我收到以下错误：未知的 ruby​​ 解释器字符串组件：'ruby_1.9.3'。该错误似乎没有引起任何问题，因为一切都按预期工作，但我想知道是什么导致终端在切换到目录时显示错误。

环境：Mac OSX Mountain Lion、Ruby 1.9.3、JRuby、RubyMine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:47:09.523

显然，此消息是由 2 个配置文件（linux 和 osx）引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:27:25.183

该问题是由 RVM 的无效使用引起的。[这是一个类似的问题](https://github.com/wayneeseguin/rvm/issues/137)。

gemsets 的文档可在[https://rvm.io/gemsets/](https://rvm.io/gemsets/)获得。

检查`.rvmrc`文件（或多个文件）的内容`.ruby-version`并`.ruby-gemset`确保所需的 ruby​​ 版本和 gemset 在您的机器上可用。

# regex - 简单的正则表达式：我似乎无法抓住期间

> ID：15836321
> 
> 赞同：0
> 
> 时间：2013-04-05T14:20:20.540
> 
> 标签：regex, preg-replace

**代码：**

```
$raw = "Test List: Dist. dist Disti distributor";
$repld = preg_replace('/\b(dist(\.|i?)(ributor)?)\b/i', 'ruff', $raw);
echo $repld; 
```

**期望：**
测试列表：ruff ruff ruff ruff

**获取：**
测试清单：ruff。ruff ruff ruff

在我似乎无法弄清楚的第一个“ruff”之后有一段顽固的小时期。
当然，我不是正则表达式专家，但我认为`\.`会是一场比赛:)

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:27:03.173

`\b`不会匹配 和 之间的`.`部分`。因为那不是单词边界。`

 `移动`\.`过去`\b`：

```
$repld = preg_replace('/\b(disti?(ributor)?)\b\.?/i', 'ruff', $raw); 
```

虽然当然现在它匹配`Distributor.`你可能不想要的。但是话又说回来，即使您的原始代码也与`distiributor`您可能不想要的匹配。`

# list - 在 prolog 中查找列表的所有 k 长度子集

> ID：15836327
> 
> 赞同：3
> 
> 时间：2013-04-05T14:20:38.837
> 
> 标签：list, prolog, subset

我需要在 prolog 中找到一个 k 长度的列表子集，我有这个功能：

```
 subset([], []).
    subset([E|Tail], [E|NTail]):-
    subset(Tail, NTail).
    subset([_|Tail], NTail):-
    subset(Tail, NTail). 
```

我对列表的长度应用了另一条规则，

```
 length(Xs,Size) 
```

问题是它非常慢，因为它搜索全长子集，这个 k 长子集是否有直接递归定义？

我搜索了一个星期，找不到任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:03:31.997

使用您的初始解决方案`subset/2`，您可以添加另一个参数 (Len) 并且：

*   当 Len = 0 时，基本情况成立
*   添加元素的递归步骤递减 Len 并在 new Len=0 时完成递归

那看起来：

```
 subset(0, [], []).
 subset(Len, [E|Tail], [E|NTail]):-
   succ(PLen, Len),
   (PLen > 0 -> subset(PLen, Tail, NTail) ; NTail=[]).
 subset(Len, [_|Tail], NTail):-
   subset(Len, Tail, NTail). 
```

# ios - 匹配排名或类似的对手

> ID：15836328
> 
> 赞同：1
> 
> 时间：2013-04-05T14:20:39.077
> 
> 标签：ios, game-center, gamekit, gkmatchmaker

iOS 游戏中心是否可以匹配技能或排名相似的对手？我想匹配一个具有一定范围值的对手，例如经验或总分。我是 iOS 配对系统的新手。感谢您的任何建议。

我做了一些研究，发现了匹配请求的 playerGroup 和 playerAttribute 属性。这些属性对我想做的事情有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T06:58:32.667

`GKMatchRequest`的`playerGroup`属性正是您正在寻找的。它是一个无符号的 32 位整数，您可以将其设置为玩家级别*（或一系列级别，如 1-5、6-10 等，以增加潜在玩家的数量）*，例如，您只会得到`GKMatch`两个该级别*（或级别范围）*的玩家。

更多信息：[游戏中心编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)/[玩家组](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/MatchmakingwithGameCenter/MatchmakingwithGameCenter.html#//apple_ref/doc/uid/TP40008304-CH12-SW10)

# java - 尝试将新 jars 添加到服务器上的 maven 项目的构建失败

> ID：15836333
> 
> 赞同：0
> 
> 时间：2013-04-05T14:20:47.123
> 
> 标签：java, apache-commons-email

我有一个 Jsf 1.2 Maven 应用程序。我尝试向用户发送有关应用程序日常使用情况的自动报告电子邮件。我在本地项目工作区中添加了所需的 Jar 文件，它工作正常。我可以毫无问题地发送电子邮件。但是，将项目战争部署到服务器机器时，tomcat web-server 看不到新的 jar 文件。虽然我在 pom.xml 中添加了所有依赖项。如果项目在本地机器上工作，而在远程服务器上不工作，会出现什么问题？

# python - python函数和变量

> ID：15836336
> 
> 赞同：1
> 
> 时间：2013-04-05T14:20:54.127
> 
> 标签：python, function, variables

由于缺乏明确性，我重新编辑了我的问题。下面的代码获取一个随机数，然后检查它是否是一个新高，如果是一个则记录它。然后经过一定的延迟（1 分钟）后，它再次执行相同的操作，从上一周期的最后一个数字开始。

我想为不同的频率运行相同的，所以我会有很多时间段，如果我在函数中重写下面的代码，我可以获得 agregateinfrequency(5min)，它只会返回下面的打印（或列表）

希望它现在更有意义。

```
for random_number, current_time,i in generator():
    previous_last_price = mynumber
    mynumber = mynumber + (random_number*0.0001)
    #print (random_number*0.01)
    if mynumber >high_price: #new one
        high_price = mynumber
    if mynumber <low_price: #new one
        low_price = mynumber
    last_price = mynumber

    if keyfunc(current_time,1) != previous_reftime1min: #new one
        print mynumber,",",i, current_time,",", keyfunc(current_time,1),",", previous_reftime1min,",", open_price,",", high_price,",", low_price,",", last_price
        wrtr.writerow([mynumber, i,current_time, keyfunc(current_time,1), previous_reftime1min, open_price, high_price, low_price, last_price])    
        myfile.flush() # whenever you want, and/or
        open_price = previous_last_price
        high_price = mynumber
        low_price = mynumber
        last_price = mynumber
        previous_reftime1min = keyfunc(current_time,1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:33:10.243

这是脚本的可能结构的一些伪代码，我尽可能了解您想要它做什么。

```
def check_price(random_number,last_price):
  new_price = do_some_logic() #do your logic
  write(new_price) #some abstract code to write your output to a file
  return new_price

price=some_initval
  while True:
    g=get_new_random_number()
    price=check_price(g,price)
    sleep(desired_period) 
```

我没有使用 for 循环，而是在这里使用了一个 while 循环。我的理解是，您打算将此程序用作持续运行的守护程序，每分钟左右醒来，检查一些数据（例如当前价格）并运行计算。 `while True`确保程序将重复执行此操作，直到您将其杀死。

# java - 来自计算机名称的 Microsoft Exchange Server 主机地址

> ID：15836337
> 
> 赞同：0
> 
> 时间：2013-04-05T14:20:54.960
> 
> 标签：java, email, outlook, exchange-server

我正在尝试使用 javax.mail.Store 连接到 Microsoft Exchange Server。为此，我需要一个 Microsoft Exchange 主机。当我在 Outlook 中检查选项时，我看到的是计算机名而不是主机名。

有没有办法获得只有计算机名称的主机地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:26:02.370

这是解释获取服务器IP地址的链接

[http://www.ehow.com/how_5959883_ip-address-exchange-server.html](http://www.ehow.com/how_5959883_ip-address-exchange-server.html)

# jquery - 如何在 jQuery 选择器中进行真正的模式搜索？

> ID：15836338
> 
> 赞同：1
> 
> 时间：2013-04-05T14:20:56.847
> 
> 标签：jquery

我有多个`<select>`命名：taskDESCRIPTION-,taskDESCRIPTION-1,taskDESCRIPTION-2,... 我想匹配除第一个之外的所有内容吗？

```
$('#details form[name=aform]').find('select[name^=taskDESCRIPTION-] :selected,input:text').each(function () {

  //my validation

} 
```

**更新：** 当前无法在 jQuery 选择器中进行真正的模式搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:22:56.363

您可以使用选择器，如果您想排除出现*在 dom 中*[`gt`](http://api.jquery.com/gt-selector/)的第一个，它是**从零开始的**：

 *```
$('#details form[name=aform]').find('select[name^=taskDESCRIPTION-]:gt(0):selected,input:text').each(function () {

      //my validation

} 
```

如果你想排除第一个意思，你想要那个**不是** `1`，你可以使用[`:not`](http://api.jquery.com/not-selector/)选择器：

```
$('#details form[name=aform]').find('select[name^=taskDESCRIPTION-]:not(select[name=taskDESCRIPTION-1]):selected,input:text').each(function () {

      //my validation

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:25:34.457

据我所知，您无法进行正确的模式匹配。在某些时候，您将不得不过滤掉那组元素。

如果它们在 DOM 中以该顺序出现，那么您可以使用[`:gt`](http://api.jquery.com/gt-selector/)选择器简单地忽略第一个匹配元素：

```
$(...).find('select[name^=taskDESCRIPTION-]:gt(0) ...'); 
```

如果它们的排序不是很好，那么您将不得不使用[`.filter()`](http://api.jquery/com/filter/)来检查该`name`属性是否包含一个数字：

```
$(...).find('select[name^="taskDESCRIPTION-"]').filter(function(i, element) {
    return /taskDESCRIPTION-\d+/.test(element.getAttribute("name"));
}); 
```*

# python - python解压二进制数据

> ID：15836344
> 
> 赞同：2
> 
> 时间：2013-04-05T14:21:06.957
> 
> 标签：python, linux, debian

我正在为 radius 编写一个 rlm_python 模块，它从“Accouting-Request”数据包中获取位置

但是，该位置是二进制格式，

```
 "\001\027\002\025\001+\001\024" 
```

当我尝试使用 struct 解包时

```
[root@server ~]# python 
Python 2.4.3 (#1, May  5 2011, 16:39:10) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from struct import *
>>> unpack('hhl',"\001\027\002\025\001+\001\024" )
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
struct.error: unpack str size does not match format 
```

任何想法，我如何解压这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:30:28.010

您的字符串长度为 8 个字节，但`unpack`可能不会如此（大小取决于平台，除非您使用修饰符）。

```
Python 2.4.3 (#1, May  5 2011, 16:39:10) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from struct import *
>>> unpack('hhl',"\001\027\002\025\001+\001\024" )
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
struct.error: unpack str size does not match format
>>> unpack('=hhl',"\001\027\002\025\001+\001\024" )
(5889, 5378, 335620865) 
```

来自[`struct.unpack`文档](http://docs.python.org/2.6/library/struct.html?highlight=struct%20unpack#byte-order-size-and-alignment)：

> 如果第一个字符不是其中之一，则假定为“@”。本机大小和对齐方式是使用 C 编译器的 sizeof 表达式确定的。这总是与本机字节顺序相结合。标准大小仅取决于格式字符；请参阅格式字符部分中的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:30:08.790

```
>>> import struct
>>> data = "\001\027\002\025\001+\001\024"
>>> data
'\x01\x17\x02\x15\x01+\x01\x14'
>>> len(data)
8
>>> struct.calcsize('hhl')
16
>>> struct.calcsize('!hhl')
8
>>> struct.unpack('!hhl',data)
(279, 533, 19595540) 
```

根据您的架构，除非您修改构造函数，否则某些元素的大小可能会发生变化。

# vba - VBS：终止多个正在运行的应用程序

> ID：15836346
> 
> 赞同：1
> 
> 时间：2013-04-05T14:21:11.673
> 
> 标签：vba, vbscript

我正在尝试使用以下 VBS 脚本同时关闭多个应用程序，但`0x80041017`在`For Each`循环行出现错误。它只适用于一个应用程序，但我添加了另一个以终止

```
strComputer = "."
strProcessToKill1 = "Acrobat.exe" 
strProcessToKill2 = "iexplore.exe" 

Set objWMIService = GetObject("winmgmts:" _
                & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2") 

Set colProcess = objWMIService.ExecQuery _
                ("Select * from Win32_Process Where Name = '" & strProcessToKill1 & "' or '" & strProcessToKill2 & "'")

count = 0
For Each objProcess in colProcess
                objProcess.Terminate()
                count = count + 1
Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T17:27:11.537

您的 WMI 查询无效，这导致循环失败。您需要为 WHERE 子句的后半部分指定列 (Name)。我也会删除`objProcess.Terminate`通话的括号。

```
strComputer = "."
strProcessToKill1 = "Acrobat.exe" 
strProcessToKill2 = "iexplore.exe" 

Set objWMIService = GetObject("winmgmts:" _
                & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2") 

Set colProcess = objWMIService.ExecQuery _
                ("Select * from Win32_Process Where Name = '" & strProcessToKill1 & "' OR Name = '" & strProcessToKill2 & "'")

count = 0
For Each objProcess in colProcess
                objProcess.Terminate
                count = count + 1
Next 
```

# c# - 如何制作一个流式 LINQ 表达式来传递过滤出的项目以及过滤的项目？

> ID：15836347
> 
> 赞同：4
> 
> 时间：2013-04-05T14:21:15.900
> 
> 标签：c#, linq, enumeration, out

我正在将 Excel 电子表格转换为“元素”列表（这是一个领域术语）。在此转换期间，我需要跳过标题行并丢弃无法转换的格式错误的行。

有趣的来了。我需要捕获那些格式错误的记录，以便我可以报告它们。我构建了一个疯狂的 LINQ 语句（如下）。这些是隐藏 OpenXml 库中类型的凌乱 LINQ 操作的扩展方法。

```
var elements = sheet
    .Rows()                          <-- BEGIN sheet data transform
    .SkipColumnHeaders()
    .ToRowLookup()
    .ToCellLookup()
    .SkipEmptyRows()                 <-- END sheet data transform
    .ToElements(strings)             <-- BEGIN domain transform
    .RemoveBadRecords(out discard)
    .OrderByCompositeKey(); 
```

有趣的部分从 开始`ToElements`，我将行查找转换为我的域对象列表（详细信息：它称为 an `ElementRow`，后来转换为 an `Element`）。不良记录仅使用一个键（Excel 行索引）创建，并且与真实元素相比是唯一可识别的。

```
public static IEnumerable<ElementRow> ToElements(this IEnumerable<KeyValuePair<UInt32Value, Cell[]>> map)
{
    return map.Select(pair =>
    {
        try
        {
            return ElementRow.FromCells(pair.Key, pair.Value);
        }
        catch (Exception)
        {
            return ElementRow.BadRecord(pair.Key);
        }
    });
} 
```

然后，我想删除那些不良记录（在过滤之前收集*所有这些记录更容易）。*那个方法是`RemoveBadRecords`，它是这样开始的......

```
public static IEnumerable<ElementRow> RemoveBadRecords(this IEnumerable<ElementRow> elements)
{
    return elements.Where(el => el.FormatId != 0);
} 
```

但是，我需要报告丢弃的元素！而且我不想用报告混淆我的转换扩展方法。所以，我去了 out 参数（考虑到在匿名块中使用 out 参数[的困难）](https://stackoverflow.com/questions/384918)

```
public static IEnumerable<ElementRow> RemoveBadRecords(this IEnumerable<ElementRow> elements, out List<ElementRow> discard)
{
    var temp = new List<ElementRow>();
    var filtered = elements.Where(el =>
    {
        if (el.FormatId == 0) temp.Add(el);
        return el.FormatId != 0;
    });

    discard = temp;
    return filtered;
} 
```

而且，瞧！我以为我是铁杆，并且会一口气完成此操作...

```
var discard = new List<ElementRow>();
var elements = data
    /* snipped long LINQ statement */
    .RemoveBadRecords(out discard)
    /* snipped long LINQ statement */

discard.ForEach(el => failures.Add(el));

foreach(var el in elements) 
{ 
    /* do more work, maybe add more failures */ 
}

return new Result(elements, failures); 
```

但是，`discard`当我循环浏览它时，我的列表中没有任何内容！我单步执行了代码并意识到我成功地创建了一个全流式 LINQ 语句。

1.  临时列表已创建
2.  过滤器`Where`已分配（但尚未运行）
3.  并且分配了丢弃列表
4.  然后流媒体的东西被退回

当`discard`被迭代时，它不包含任何元素，因为元素还没有被迭代。

有没有办法使用我构建的东西来解决这个问题？我是否必须在坏记录过滤器之前或期间强制迭代数据？还有其他我错过的结构吗？

## 一些评论

乔恩提到任务/正在/发生。我只是没有等待它。如果我检查 的`discard`迭代后的内容`elements`，它实际上是完整的！所以，我实际上没有分配问题。除非我接受 Jon 关于 LINQ 语句中好/坏的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T14:26:22.200

> 当该语句实际被迭代时，Where 子句运行并且 temp 被填满，但 discard 再也没有被分配！

它不需要再次分配 - 将`discard`在调用代码中分配的现有列表将被填充。

但是，我*强烈*建议不要使用这种方法。在这里使用`out`参数确实违背了 LINQ 的精神。（如果你迭代你的结果两次，你最终会得到一个包含所有坏元素的列表两次。Ick！）

我建议在删除不良记录*之前*具体化查询- 然后您可以运行单独的查询：

```
var allElements = sheet
    .Rows()
    .SkipColumnHeaders()
    .ToRowLookup()
    .ToCellLookup()
    .SkipEmptyRows()
    .ToElements(strings) 
    .ToList();

var goodElements = allElements.Where(el => el.FormatId != 0)
                              .OrderByCompositeKey();

var badElements = allElements.Where(el => el.FormatId == 0); 
```

通过在 a 中实现查询`List<>`，您只需在 等方面处理每一行一次。当然`ToRowLookup`，`ToCellLookup`这确实意味着您需要有足够的内存来一次保存所有元素。有一些替代方法（例如在过滤每个坏元素时对它采取行动），但它们最终仍然可能相当脆弱。

编辑：Servy 提到的另一个选项是使用`ToLookup`，它将一次性实现和分组：

```
var lookup = sheet
    .Rows()
    .SkipColumnHeaders()
    .ToRowLookup()
    .ToCellLookup()
    .SkipEmptyRows()
    .ToElements(strings) 
    .OrderByCompositeKey()
    .ToLookup(el => el.FormatId == 0); 
```

然后你可以使用：

```
foreach (var goodElement in lookup[false])
{
    ...
} 
```

和

```
foreach (var badElement in lookup[true])
{
    ...
} 
```

请注意，这将对*所有*元素（好的和坏的）进行排序。另一种方法是从原始查询中删除排序并使用：

```
foreach (var goodElement in lookup[false].OrderByCompositeKey())
{
    ...
} 
```

我个人并不热衷于按真/假分组 - 这感觉*有点*滥用通常意味着基于键的查找 - 但它肯定会起作用。

# javascript - 用javascript标记图像并保存

> ID：15836348
> 
> 赞同：1
> 
> 时间：2013-04-05T14:21:19.327
> 
> 标签：javascript, image-manipulation, frontend

我正在尝试向图像添加标记。用户将能够添加文本、绘图和图像。我猜在前端使用 javascript 最容易做到这一点。我的问题是，保存最终图像的最简单方法是什么。图像也可以用javascript保存。我需要序列化图像并将其保存在后端吗？是否有任何好的库可以帮助解决这些问题，它们似乎很常见。

我知道这是开放式的，但是任何关于使用 javascript 处理图像并将它们保存到后端（在这种情况下为 java）的帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:27:14.437

您可以在 HTML5 画布中加载图像并使用 javascript 在其上绘制。用户完成后，您可以使用画布的 toDataURL() 方法获取图像的 bit64 编码版本，您可以随意发送或保存。在您的示例中，您可以将 64 位编码字符串发送到 web 服务或 api 以保存它。

考虑这个 html

```
<canvas id="myCanvas">
</canvas> 
```

然后使用这个javascript来处理它：

```
//vanilla js, I advise to use a library like Kineticjs
//paint some things:
var can = document.getElementById("myCanvas");
var ctx = can.getContext("2d");
//after the painting is done get the image
var bit64ImageString = can.toDataURL(); 
```

如果要将图像保存在服务器上，请使用 Ajax 调用并将 bit64ImageString 发送到服务器。从那时起，您可以随心所欲地使用它:)

# sql - 基于周的计数

> ID：15836349
> 
> 赞同：0
> 
> 时间：2013-04-05T14:21:20.157
> 
> 标签：sql, oracle

我需要以以下方式检索数据

```
Weeks  delay_count
0           6         
1           0
2           3
3           4
4           0
5           1           
6           0
7           0    
8           0       
9           0
10          2
11          0        
12          0      
13          0    
14          0
15          3 
```

这里的周是从 0 到 15 的硬编码列，而 delay_count 是派生列。我有一个专栏`delay_weeks`。基于此列中的值，我需要填充列中的值`delay_count`（派生列）

`delay_weeks`列值如下。

```
blank
blank 
blank 
2
10
5
blank 
3
2
10
2
3
3
3
0
0
15
22
29 
```

条件：

*   当`delay_weeks`为空白或 0 时，`delay_count`列中的计数应为 1
*   什么时候`delay_weeks`是 3，那么在第`delay_count`3 周下，该列中的计数应该是 1
*   什么时候`delay_weeks`是 10，那么在该`delay_count`列中，第 10 周下的计数应该是 1
*   当`delay_weeks`大于或等于 15 时，`delay_count`列中第 15 周下的计数应为 1。

我写了如下代码

```
SELECT   "Weeks", a."delay_count"
    FROM (SELECT     LEVEL AS "Weeks"
                FROM DUAL
          CONNECT BY LEVEL <= 15) m,
         (SELECT   VALUE, COUNT (VALUE) AS "delay_numbers"
              FROM (SELECT CASE
                                          WHEN attr11.VALUE >= 15
                                             THEN '15'
                                          ELSE attr11.VALUE
                                       END
                                     VALUE
                      FROM docs,
                           (SELECT object_id, VALUE, attribute_type_id
                              FROM ATTRIBUTES
                             WHERE attribute_type_id =
                                      (SELECT attribute_type_id
                                         FROM attribute_types
                                        WHERE name_display_code =
                                                 'ATTRIBUTE_TYPE.DELAY IN WEEKS')) attr11
                     WHERE docs.obj_id = attr11.object_id(+)

          GROUP BY VALUE) a
   WHERE m."Weeks" = a.VALUE(+) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:34:59.150

```
select
  weeks,
  nvl(cnt, 0) as delay_count
from
  (select level-1 as weeks from dual connect by level < 17)
  left join (
    select 
      nvl(least(attr11.value, 15), 0) as weeks,
      count(0) as cnt
    from 
      DOCS 
      left join (
        ATTRIBUTES attr11 
        join ATTRIBUTE_TYPES atr_tp using(attribute_type_id)
      ) 
        on atr_tp.name_display_code = 'ATTRIBUTE_TYPE.DELAY IN WEEKS'
        and docs.obj_id = attr11.object_id
    group by nvl(least(attr11.value, 15), 0)
  ) using(weeks)
order by 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:26:51.630

对表定义的相关部分进行逆向工程，我认为这可以满足您的需求：

```
select t.weeks, count(delay) as delay_count
from (select level - 1 as weeks from dual connect by level <= 16) t
left join (
    select case when a.value is null then 0
        when to_number(a.value) > 15 then 15
        else to_number(a.value) end as delay
    from docs d
    left join (
        select a.object_id, a.value
        from attributes a 
        join attribute_types at on at.attribute_type_id = a.attribute_type_id
        where at.name_display_code = 'ATTRIBUTE_TYPE.DELAY IN WEEKS'
    ) a on a.object_id = d.obj_id
) delays on delays.delay = t.weeks
group by t.weeks
order by t.weeks; 
```

有了我认为匹配的数据，我得到：

```
 WEEKS DELAY_COUNT
---------- -----------
         0           6
         1           0
         2           3
         3           4
         4           0
         5           1
         6           0
         7           0
         8           0
         9           0
        10           2
        11           0
        12           0
        13           0
        14           0
        15           3 
```

但很明显，由于您没有给出真实的表结构，所以我对关系进行了一些猜测。强制性[SQL 小提琴](http://sqlfiddle.com/#!4/155de/2)。

# ios - 未调用 NSString 类别方法

> ID：15836350
> 
> 赞同：1
> 
> 时间：2013-04-05T14:21:25.067
> 
> 标签：ios, objective-c

我要解决的问题是将 nil 字符串转换为空字符串，以便我可以将其作为值放入`NSDictionary`.

我有以下代码：

```
//Accessed in class  
prospect.title = [self.titleLabel.text emptyWhenNil];

// NSString+Additions Category

-(NSString *) emptyWhenNil
{
   if(self == nil)
      return @"";

   return self;
 } 
```

但是由于某种原因，该`emptyWhenNil`方法甚至从未被调用过！！我搞不清楚了..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T14:23:25.657

问题是，当您的字符串指针为 时`nil`，您没有对象可以发送该类别消息。在 Objective-C`nil`中不执行（并返回）消息。`nil`

如果要将“空”对象放入集合中，例如`NSDictionary`或`NSArray`，则可以改用`NSNull`该类。

或者，您可以将此方法实现为类方法：

```
+ (NSString *)emptyStringIfNil:(NSString *)str {
    if (!str) return @"";
    return str;
} 
```

然后，您可以将其称为

```
prospect.title = [NSString emptyStringIfNil:self.titleLabel.text]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:24:46.923

如果`NSString`指针是`nil`，则不会在其上调用该方法，您可以做的是创建一个静态方法：

```
+ (NSString *) emptyIfNil:(NSString *) str
{
    return str == nil ? @"" : str;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:26:07.313

如果字符串为 nil，则不`self`执行该方法。在这种情况下，运行时的默认行为是返回一个默认的 nil 值。

您应该将其实现为静态方法。像这样的东西：

```
+ (NSString *)emptyStringIfNil:(NSString *)input
{
    return input ? input : @"";
} 
```

# php - Symfony2 FOSUserBundle - 附加表格

> ID：15836351
> 
> 赞同：0
> 
> 时间：2013-04-05T14:21:25.223
> 
> 标签：php, symfony, fosuserbundle

我想添加一个额外的步骤来注册。我有自己的 FormType“Firma”，它试图在 registerController 中加入我的附加方法。在控制器中调用此操作时出现错误：

```
Fatal error: Call to undefined method My\FrontendBundle\Form\Type\FirmaType::createView() in /var/www/Budowlanka/src/My/FrontendBundle/Controller/RegistrationController.php on line 107 
```

**RegisterController 中的 nextStepAction 动作**

```
public function nextStepAction($token) {

    $user = $this->container->get('fos_user.user_manager')->findUserByConfirmationToken($token);

    if (null === $user) {
        throw new NotFoundHttpException(sprintf('The user with confirmation token "%s" does not exist', $token));
    }

    $this->container->get('fos_user.user_manager')->updateUser($user);

    $form = $this->container->get('my_user.firma.form.type');
    .
    . 
    .
    return $this->container->get('templating')->renderResponse('FOSUserBundle:Registration:register.html.' . $this->getEngine(), array(
                'form' => $form->createView(),
                'theme' => $this->container->getParameter('fos_user.template.theme'),
    )); 
```

**服务.xml：**

```
<service id="my_user.firma.form.type" class="My\FrontendBundle\Form\Type\FirmaType">
    <tag name="form.type" alias="my_user_firma" />
    <argument>My\FrontendBundle\Entity\Firma</argument>
</service> 
```

公司类型：

```
namespace My\FrontendBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class FirmaType extends AbstractType
{
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('nazwa')
        ->add('ulica')
        ->add('nr_budynku')
        ->add('nr_lokalu')
        ->add('miasto')
        ->add('kod_pocztowy')
        ->add('poczta')
        ->add('telefon_1')
        ->add('telefon_2')
        ->add('email')
        ->add('www')
        ->add('liczba_opinii')
        ->add('nip')
        ->add('imie')
        ->add('nazwisko')
        ->add('haslo')
        ->add('logo')
        ->add('opis_uslug')
        ->add('data_dodania')
        ->add('data_modyfikacji')
        ->add('slug')
        ->add('specjalizacje')
    ;
}

public function getName()
{
    return 'my_frontendbundle_firmatype';
}
} 
```

编辑：

它工作得很好，但现在我遇到了来自多对多关系字段的标签的问题。

```
 ->add('specjalizacja', 'entity', array(
                'label' => 'Specjalizacje',
                'multiple' => true, 
                'expanded' => true, 
                'property' => 'nazwa', 
                'class' => 'My\FrontendBundle\Entity\Specjalizacja',
                'query_builder' => function(\Doctrine\ORM\EntityRepository $er) {
                    $qb = $er->createQueryBuilder('g');

                    return $qb->orderBy('g.nazwa', 'DESC');
                }
            ) 
```

它显示“my_user_firma_form_specjalizacja_110”标签（110 是记录的 id）而不是实体的 Nazwa 字段。我在 Specjalizacja 实体类中有一个 __toString() 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:42:56.473

您应该使用 formFactory 来创建您的表单。

```
<service id="my_user.firma.form" factory-method="createNamed" factory-service="form.factory" class="Symfony\Component\Form\Form">
    <argument>my_user_firma</argument>
    <argument>'my_user_firma_form'</argument>
</service>

<service id="my_user.firma.form.type" class="My\FrontendBundle\Form\Type\FirmaType">
    <tag name="form.type" alias="my_user_firma" />
    <argument>My\FrontendBundle\Entity\Firma</argument>
</service> 
```

然后打电话..

```
$form = $this->container->get('my_user.firma.form'); 
```

从这里你应该可以使用`$form->createView()`.

# javascript - xmlHttpRequest可以访问Firefox中的Authorization标头吗

> ID：15836357
> 
> 赞同：1
> 
> 时间：2013-04-05T14:21:43.990
> 
> 标签：javascript, authentication, xmlhttprequest

我可能遗漏了一些明显的东西......但是

我正在尝试使用greasemonkey 插件增强本机颠覆http 访问。目前我正在使用 CGI 脚本来运行 PROPFIND 等。尽管它确实有效，但这会破坏安全性。

我已经从[http://debris.demon.nl/projects/davclient.js/](http://debris.demon.nl/projects/davclient.js/)下载了一个 Javascript DAV 客户端，它可以满足我的所有需求。假设我可以使用已经提供的用户凭据，我应该能够使用具有正确安全性的 javascript 获取扩展的颠覆信息。

我们在 subversion 服务器上运行基本身份验证，我不知道如何使该库中的 xmlHttpRequest 继承预先存在的浏览器身份验证详细信息。xmlHttpRequest 返回 401，尽管调用页面已经过身份验证并且在同一个域中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:34:25.197

`Authorization`您可以使用手动指定标题[`.setRequestHeader(header, value)`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#setRequestHeader%28%29)。

根据[规范](http://www.w3.org/TR/XMLHttpRequest/#the-send%28%29-method)：

> 如果用户代理支持 HTTP 身份验证并且`Authorization`不在作者请求标头列表中 [由`setRequestHeader`] 设置，则它应该将源自`XMLHttpRequest`对象的请求视为保护空间的一部分，包括访问的 URI 并发送`Authorization`标头并适当地处理`401 Unauthorized`请求。

这似乎意味着如果用户已经为资源提供了身份验证凭据，XHR 将自动使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:31:54.653

请参阅[MDN XMLHttpRequest.setRequestHeader](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#setRequestHeader%28%29)。

# c - 服务器无法接收来自客户端的消息

> ID：15836362
> 
> 赞同：0
> 
> 时间：2013-04-05T14:21:48.160
> 
> 标签：c, sockets, unix, client-server

我正在使用 Ubuntu 12.05。我一直在尝试通过 C 套接字编程实现停止和等待协议。我创建了两个程序，一个以服务器为特色，另一个以客户端为特色。通过注释解释代码的预期工作

服务器socket.c

```
 #include <sys/socket.h>
    #include <stdio.h>
    #include <stdlib.h>
    #include <netinet/in.h>
    #include <arpa/inet.h>
    #include <unistd.h>
    #include <error.h>
    #include <string.h>
    #include <sys/types.h>
    #include <time.h>

int main(int argc,char *argv[])
{
    int listenfd = 0,qlength=10,connfd = 0,t=5;
    int n;
    struct sockaddr_in serv;
        struct sockaddr_in dest;
        socklen_t socksize = sizeof(struct sockaddr_in);
    char sendBuff[1024]="hi\n";
    //time_t ticks;
     listenfd = socket(AF_INET,SOCK_STREAM,0); //socket for listening to connection requests

     memset(&serv,'0',sizeof(serv));
     serv.sin_family = AF_INET;
     serv.sin_addr.s_addr = htonl(INADDR_ANY);
     serv.sin_port=htons(5000);

     bind(listenfd,(struct sockaddr *)&serv,sizeof(serv)); //binding the socket to a port
     listen(listenfd,2);    
     connfd=accept(listenfd,(struct sockaddr *)&dest,&socksize);  //another socket for sending and receiving on the previously built socket
         while(connfd){
         printf("Incoming connection from %s-sending a hi...\n",inet_ntoa(dest.sin_addr));
         send(connfd,sendBuff,strlen(sendBuff),0);         //at first my server sends a hi
         sleep(3);
         n=recv(connfd,sendBuff,1024,0);                  //if hi received by the client,then server should receive "Message Received" from the client
         sendBuff[n]='\0';
         printf("%s",sendBuff);
        connfd=accept(listenfd,(struct sockaddr *)&dest,&socksize); }

    return 0;
} 
```

客户端socket.c

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netdb.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <arpa/inet.h> 

int main(int argc, char *argv[])
{
    int sockfd = 0, n = 0,m=2;
    char recvBuff[1024];
    struct sockaddr_in serv_addr; 

    if(argc != 2)
    {
        printf("\n Usage: %s <ip of server> \n",argv[0]);
        return 1;
    } 

    memset(recvBuff, '0',sizeof(recvBuff));
    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
    {
        printf("\n Error : Could not create socket \n");
        return 1;
    } 

    memset(&serv_addr, '0', sizeof(serv_addr)); 

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons(5000); 

    if(inet_pton(AF_INET, argv[1], &serv_addr.sin_addr)<=0)
    {
        printf("\n inet_pton error occured\n");
        return 1;
    } 

    if( connect(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) < 0)
    {
       printf("\n Error : Connect Failed \n");
       return 1;
    } 
   while(m--){                                      //m is 2 initially,I want that sending and receiving should be done 2 times
    n = recv(sockfd,recvBuff,1024,0);
    recvBuff[n]='\0';                               //"hi" is received
    printf("%s",recvBuff);                           

    if(recvBuff=="hi\n")
      send(sockfd,"Message Received",strlen("Message Received\n"),0);} //sending "Message received"

    return 0;
} 
```

现在从服务器向客户端发送消息工作正常，但客户端到服务器（收到的消息）正在产生问题。它既没有给出错误，也没有正确的结果，它只是给出一个空白屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:24:41.487

您不能使用“==”运算符比较字符串。

你需要使用`strcmp()`

所以....

```
if( strcmp( recvBuff, "hi\n" ) == 0 )
    send(sockfd,"Message Received",strlen("Message Received\n"),0);
else
    printf( "[%s] != [hi\n]\n", recvBuff ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:23:55.817

基本上，您的代码中有三个不同的问题：

1.  字符串比较（由 K Scott Piel 修复）。
2.  收到的消息打印不出来。您需要添加`'\n'`所有`printf`功能。
3.  这是最重要的问题：在服务器和客户端之间的第一次通信之后，您正在调用`accept`服务器代码中的函数。从[手册`accept`页](http://linux.die.net/man/3/accept)，我们可以阅读

> 该`accept()`函数应提取挂起连接队列中的第一个连接，创建一个与指定套接字具有相同套接字类型协议和地址族的新套接字，并为该套接字分配一个新的文件描述符。

因此，在第一次通信之后，您的服务器正在等待*新的连接*，而您的客户端正在等待来自服务器的消息。第二次沟通永远不会发生。

要解决此问题，您可以使用[`fork()`](http://linux.die.net/man/3/fork)API。

这是使用以下方法的修复建议`fork()`：

客户端socket.c

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netdb.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <arpa/inet.h> 

int main(int argc, char *argv[])
{
    int sockfd = 0, n = 0,m=2;
    char recvBuff[1024];
    struct sockaddr_in serv_addr; 

    if(argc != 2)
    {
        printf("\n Usage: %s <ip of server> \n",argv[0]);
        return 1;
    } 

    memset(recvBuff, '0',sizeof(recvBuff));
    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
    {
        printf("\n Error : Could not create socket \n");
        return 1;
    } 

    memset(&serv_addr, '0', sizeof(serv_addr)); 

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons(5000); 

    if(inet_pton(AF_INET, argv[1], &serv_addr.sin_addr)<=0)
    {
        printf("\n inet_pton error occured\n");
        return 1;
    } 

    if( connect(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) < 0)
    {
       printf("\n Error : Connect Failed \n");
       return 1;
    } 

   //m is 2 initially,I want that sending and receiving should be done 2 times
   while(m--)
   {
        printf("Waiting from the server ...\n");
        n = recv(sockfd,recvBuff,1024,0);
        recvBuff[n]= '\0';                               //"hi" is received
        printf("%s\n", recvBuff);                           

        if(!strncmp(recvBuff, "hi\n", strlen("hi\n")))
        {
            printf("Send ACK\n");
            n = send(sockfd,"Message Received",strlen("Message Received\n"),0);
            printf("%d Sent ... \n", n);
        }
    } //sending "Message received"

    return 0;
} 
```

服务器socket.c

```
#include <sys/socket.h>
#include <stdio.h>
#include <stdlib.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <error.h>
#include <string.h>
#include <sys/types.h>
#include <time.h>

int main(int argc,char *argv[])
{
    int listenfd = 0,qlength=10,connfd = 0,t=5;
    int n;
    struct sockaddr_in serv;
    struct sockaddr_in dest;
    socklen_t socksize = sizeof(struct sockaddr_in);
    char sendBuff[1024]="hi\n";
    pid_t  pid;
    int m = 2;
    //time_t ticks;
    listenfd = socket(AF_INET,SOCK_STREAM,0); //socket for listening to connection requests

    memset(&serv,'0',sizeof(serv));
    serv.sin_family = AF_INET;
    serv.sin_addr.s_addr = htonl(INADDR_ANY);
    serv.sin_port=htons(5000);

    bind(listenfd,(struct sockaddr *)&serv,sizeof(serv)); //binding the socket to a port

    printf("Server started ...\n");
    listen(listenfd,2);
    connfd=accept(listenfd,(struct sockaddr *)&dest,&socksize);  //another socket for sending and receiving on the previously built socket
    while(connfd > 0)
    {   
        printf("Incoming connection from %s-sending a hi...\n",inet_ntoa(dest.sin_addr));
        pid = fork();
        if(pid) {
            /* shall continue to listen to new client */
            printf("Parent shall continue listening ... \n");
            connfd=accept(listenfd,(struct sockaddr *)&dest,&socksize);
        } else {
            printf("Chlid process: Communication with the client ... \n");
            while(m--)
            {
                printf("try %d - Sending %s ... \n", m, sendBuff);
                send(connfd,sendBuff,strlen(sendBuff),0);         //at first my server sends a hi
                sleep(3);
                n=recv(connfd, sendBuff, 1024, 0);                  //if hi received by the client,then server should receive "Message Received" from the client
                sendBuff[n]='\0';
                printf("Data received: [%s]\n", sendBuff); /* need to add '\n' so the print will be displayed */
                strcpy(sendBuff, "hi\n");
            }
            printf("Child process will exit\n");
            return 0;
        }        
    }

    return 0;
} 
```

# c++ - Flex 词法分析器输出修改

> ID：15836364
> 
> 赞同：1
> 
> 时间：2013-04-05T14:21:52.953
> 
> 标签：c++, parsing, token, lexer, flex-lexer

如何在 C++ 中使用 flex lexer 并修改令牌的`yytext`值？可以说，我有这样的规则：

```
"/*"    {
        char c;
        while(true)
            {
            c = yyinput();
            if(c == '\n')
                ++mylineno;

            if (c==EOF){
                yyerror( "EOF occured while processing comment" );
                break;
            }
            else if(c == '*')
                {
                if((c = yyinput()) == '/'){
                    return(tokens::COMMENT);}
                else
                    unput(c);
                }
            }
        } 
```

我想在和`tokens::COMMENT`之间获得具有评论价值的令牌。（上述解决方案将“/*”作为值。`/*``*/`

另外，非常重要的是跟踪行号，所以我正在寻找支持它的解决方案。

**编辑** 当然我可以修改`yytext`和`yyleng`值（如`yytext+=1; yyleng-=1`，但我仍然无法解决上述问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:58:22.607

我仍然认为开始条件是正确的答案。

```
%x C_COMMENT
char *str = NULL;
void addToString(char *data)
{
    if(!str)
    { 
        str = strdup(data);
    }
    else
    {
        /* handle string concatenation */
    }
}

"/*"                       { BEGIN(C_COMMENT); }
<C_COMMENT>([^*\n\r]|(\*+([^*/\n\r])))*    { addToString(yytext); }
<C_COMMENT>[\n\r]          { /* handle tracking, add to string if desired */ }
<C_COMMENT>"*/"            { BEGIN(INITIAL); } 
```

我使用以下内容作为参考： http:
[//ostermiller.org/findcomment.html](http://ostermiller.org/findcomment.html)
[https://stackoverflow.com/a/2130124/1003855](https://stackoverflow.com/a/2130124/1003855)

您应该能够使用类似的正则表达式来处理字符串。

# django - Django - 根据选择字段更改 GET 请求上的小部件

> ID：15836369
> 
> 赞同：0
> 
> 时间：2013-04-05T14:22:05.300
> 
> 标签：django, forms, model, widget

如果另一种形式的选择是“是”，我想将字段小部件更改为只读。此代码可以正常启动小部件状态，只读：

**形式：**

```
def __init__(self, *args, **kwargs): 
    super(AccountUpdate, self).__init__(*args, **kwargs)
    self.fields['year'].widget.attrs['readonly'] = u'readonly' 
```

但是如何根据 GET 请求的选择字段来做呢？

**模型：**

```
class AccountUpdate(models.Model):    
    updateaddress = models.CharField(max_length=1, null=True, blank=True, choices=OPTION_CHOICES, default='N')
    address = models.CharField('Your address?', max_length=50)
    year = models.CharField(max_length=4) 
```

**选择：**

```
OPTION_CHOICES = (  
    ('S', 'Yes'),  
    ('N', 'No'), 
) 
```

# java - 从 .txt 中选择特定数据并在 csv 中作为列写入

> ID：15836370
> 
> 赞同：0
> 
> 时间：2013-04-05T14:22:12.837
> 
> 标签：java, csv, bufferedwriter

**这是 .txt 的一部分：**

## 2013 年 3 月 28 日星期四 12:18:28 EDT

## 内存免费：601836 kB

Linux 2.6.18-308.el5 (CWAPP1.conceptwave.com) 03/28/2013

平均 CPU：%user %nice %system %iowait %steal %idle 0.15 0.00 0.05 0.02 0.00 99.79

=========================

## 2013 年 3 月 28 日星期四 12:18:38 EDT

## 内存免费：598312 kB

Linux 2.6.18-308.el5 (CWAPP1.conceptwave.com) 03/28/2013

平均 CPU：%user %nice %system %iowait %steal %idle 0.15 0.00 0.05 0.02 0.00 99.79

=========================

我需要读取日期、可用内存和 %idle，并写入两个包含两列的 csv 文件。一个是日期和内存，另一个是日期和 %idle。所以我编写了读取数据并将其附加到 3 个列表的代码。如何将它们写入 2 个 csv 文件以满足我的要求？

提前致谢。

我的代码：

```
List<String> dateTime = new ArrayList<String>();
List<String> memFree = new ArrayList<String>(); 
List<String> pIdle = new ArrayList<String>();

public static void main(String[] args) 
{
    // TODO Auto-generated method stub

}

public void readFile(String file)
{

    try
    {
        BufferedReader br = new BufferedReader(new FileReader(file));
        String str = null; 

        try 
        {
            while((str=br.readLine()) != null)
            {
                String[] st = str.split("\\s+");  

                if (st[0] == "MemFree:")
                    memFree.add(st[1]); 

                if(isDouble(st))
                    pIdle.add(st[4]);                   

                if(isDate(str))
                {
                    String subStr = str.substring(0, 15);
                    dateTime.add(subStr); 
                }

            }
        }

        finally
        {
            br.close(); 
        }
    }

    catch(FileNotFoundException e)
    {
        System.out.println("File not found!");
    }

    catch(IOException e)
    {
        System.out.println(e);
    }

}

public boolean isDate(String str)
{
    DateFormat df = new SimpleDateFormat("E M d");

    try
    {
        String subStr = str.substring(0, 8);
        @SuppressWarnings("unused")
        Date currentDate = df.parse(subStr); 
        return true; 
    }

    catch(ParseException e)
    {
        return false; 
    }
}

public boolean isDouble(String[] st)
{

    try
    {
        for (int i = 0; i < st.length;)
        {
            @SuppressWarnings("unused")
            double num = Double.parseDouble(st[i]); 
            return true;
        }

    }

    catch(IllegalArgumentException ex)
    {
        return false; 
    }

    return false;
}

public void writeToCSV(List<String> dateTime, List<String> memFree, List<String> pIdle)
{
    //UNFINISHED - NEED HELP!
    String dateSepVal = "";

    if(dateTime != null && memFree != null)
    {
        Iterator<String> iter = dateTime.iterator(); 

        while(iter.hasNext())
        {
            dateSepVal += iter.next() + ","; 
        }

        if(dateSepVal.endsWith(","))
        {
            dateSepVal = dateSepVal.substring(0, dateSepVal.lastIndexOf(","));
        }
    }

    if(dateTime != null && pIdle !=null)
    {
        //TODO
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:37:09.717

写入文件就像读取一样，反之亦然：

```
try (BufferedWriter writer = new BufferedWriter(new FileWriter("delete.me"))) {
    writer.write("something");
    writer.newLine();
} 
```

如果您想为每个提取的日期和内存值创建一个新行，它可能如下所示：

```
public void writeToCSV(List<String> dateTime, List<String> memFree) throws IOException {
    try (BufferedWriter writer = new BufferedWriter(new FileWriter("delete.me"))) {
        if(dateTime == null || memFree == null)
            return;

        Iterator<String> memFrees = memFree.iterator(); 
        for (String dt: dateTimes) {
            if (!memFrees.hasNext())
                return;
            writer.write(dt + "," + memFrees.next());
            writer.newLine();
        }
    }
} 
```

但正如*M Sach*所建议的，您可能希望查看一个为您做类似事情的框架。

# oauth - Spring Security 3 使用 OAuth2 进行 SSO

> ID：15836373
> 
> 赞同：3
> 
> 时间：2013-04-05T14:22:24.477
> 
> 标签：oauth, spring-security, single-sign-on

有没有人在 Spring Security 3 中实际使用 OAuth2 进行 SSO？

场景：当我的用户第一次尝试访问我网站上的任何 URL 时，我需要将他们重定向到 OAuth2 URL。一旦他们在那里通过身份验证，它会将他们重定向到我网站上的 URL，我需要在其中授权他们并创建一个会话，以便他们在我的网站上保持授权，直到他们注销或超时。

我已经使用自定义预授权过滤器、自定义用户详细信息服务等在 Spring Security 中尝试了几种配置，但我无法让流程正常工作。我没有附加任何代码，因为我经历了太多的可能性，以至于我什至不确定要发布什么。

我会很感激任何人可以给出的任何方向。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:52:03.547

OAuth2 并非旨在作为 SSO 解决方案。它主要是关于将代表您访问资源的权利委托给其他方（例如应用程序）。因此，如果这不是您需要的东西，那么也许您应该寻找一个更简单的解决方案。

可以使用 OAuth2 来允许访问提供有关您的身份信息的资源，在这种情况下，可以扩展它以用于身份验证。这就是[OpenID connect](http://openid.net/connect/)使用它的方式（通过添加`userinfo`端点资源）。

您可能想查看 CloudFoundry 中的[UAA 项目](https://github.com/cloudfoundry/uaa)，该项目基于 Spring Security OAuth 构建并以这种方式使用 OAuth2 来提供身份验证服务并向系统内的应用程序颁发访问令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-27T16:10:38.633

这似乎是一个有点死的问题，但这里有一些资源可能对未来的[搜索](https://duckduckgo.com/?q=spring+oauth2+sso)有用：

*   [@EnableOAuth2Sso](http://projects.spring.io/spring-cloud/spring-cloud.html#_oauth2_single_sign_on)
*   [@EnableOAuth2Resource](http://projects.spring.io/spring-cloud/spring-cloud.html#_oauth2_protected_resource)
*   [Spring Cloud oauth2 SSO 示例](https://github.com/spring-cloud-samples/sso)
*   [Spring oauth2 SSO 还有一大堆其他东西](https://github.com/dsyer/spring-security-angular/tree/master/oauth2-vanilla)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:47:13.353

谁是您的 Oauth2 提供商？如果是 Facebook、Twitter、Google 和许多其他公共项目，您可以查看[Spring Social](http://www.springsource.org/spring-social)项目。即使您使用一些私有提供商，您也可以很容易地添加它（[http://blog.springsource.com/2011/03/10/extending-spring-socials-service-provider-framework/](http://blog.springsource.com/2011/03/10/extending-spring-socials-service-provider-framework/)， **开发 Netflix 服务提供商实施**部分）。

Spring Social 旨在涵盖您的主要情况，但有一些细微差别：默认情况下，您必须提交表单才能启动身份验证过程。我认为这种差异可能很容易根据您的需求进行定制。

您可以使用[Spring Social Showcase 示例](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase)来了解身份验证工作流程。

# ruby-on-rails - 如何在 Ruby on Rails 中针对父表在子表中添加 JSON 数据？

> ID：15836374
> 
> 赞同：0
> 
> 时间：2013-04-05T14:22:25.577
> 
> 标签：ruby-on-rails, ruby, json

我一直在努力解决 Ruby on Rails 中的一些问题。

我有四个相互关联的表：`A`、`B`、`C`和`D`。`A`是 和 的父级 是和`B`的`B`父级。`C``D`

我有一个记录已经存在于表中`B`，并希望针对该 ID 在“C”和“D”表中针对特定记录添加多个条目，例如“3”。

数据格式为：

```
[{\"waypoint\":{\"latitude\":37.3645616666667,\"timestamp\":\"2012-10-16T09:58:50Z\",\"background\":false,\"estimated_speed\":17.4189262390137,\"journey_id\":null,\"longitude\":-112.850676666667}},{\"waypoint\":{\"latitude\":37.3648733333333,\"timestamp\":\"2012-10-16T09:58:54Z\",\"background\":false,\"estimated_speed\":17.076057434082,\"journey_id\":null,\"longitude\":-112.85077}},{\"waypoint\":{\"latitude\":37.3651116666667,\"timestamp\":\"2012-10-16T09:58:57Z\",\"background\":false,\"estimated_speed\":15.4269437789917,\"journey_id\":null,\"longitude\":-112.850766666667}},{\"waypoint\":{\"latitude\":37.36547,\"timestamp\":\"2012-10-16T09:59:02Z\",\"background\":false,\"estimated_speed\":17.1007328033447,\"journey_id\":null,\"longitude\":-112.85072}},{\"waypoint\":{\"latitude\":37.3658433333333,\"timestamp\":\"2012-10-16T09:59:11Z\",\"background\":false,\"estimated_speed\":10.3052024841309,\"journey_id\":null,\"longitude\":-112.850738333333}}]" 
```

我从 Web 服务中获取这些数据。但我认为`journey_id`它是空的，而我希望它是空的，`3`因为我想针对这个 id 进行输入。

如何使用此 ID 将此数据保存在子表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:05:17.290

您的 JSON 字符串在您的示例中未正确打开，因为它缺少前导`'"'`. 解决这个问题并继续前进，这就是 JSON 看起来像“美化”的样子：

```
[
  {
    “航点”： {
      “纬度”：37.3645616666667，
      "时间戳": "2012-10-16T09:58:50Z",
      “背景”：假，
      “估计速度”：17.4189262390137，
      “journey_id”：空，
      “经度”：-112.850676666667
    }
  },
  {
    “航点”： {
      “纬度”：37.3648733333333，
      "时间戳": "2012-10-16T09:58:54Z",
      “背景”：假，
      “估计速度”：17.076057434082，
      “journey_id”：空，
      “经度”：-112.85077
    }
  },
  {
    “航点”： {
      “纬度”：37.3651116666667，
      "时间戳": "2012-10-16T09:58:57Z",
      “背景”：假，
      “估计速度”：15.4269437789917，
      “journey_id”：空，
      “经度”：-112.850766666667
    }
  },
  {
    “航点”： {
      “纬度”：37.36547，
      "时间戳": "2012-10-16T09:59:02Z",
      “背景”：假，
      “估计速度”：17.1007328033447，
      “journey_id”：空，
      “经度”：-112.85072
    }
  },
  {
    “航点”： {
      “纬度”：37.3658433333333，
      “时间戳”：“2012-10-16T09:59:11Z”，
      “背景”：假，
      “估计速度”：10.3052024841309，
      “journey_id”：空，
      “经度”：-112.850738333333
    }
  }
]

```

你有一个`waypoint`对象数组。将该 JSON 解析为 Ruby 对象：

```
obj = JSON["[{\"waypoint\":..."] # purposely truncated for brevity 
```

返回一个哈希数组：

```
[{“航点”=>
   {"纬度"=>37.3645616666667,
    "时间戳"=>"2012-10-16T09:58:50Z",
    “背景”=>假，
    “估计速度”=>17.4189262390137，
    “journey_id”=>无，
    "经度"=>-112.850676666667}},
 {“航点”=>
   {“纬度”=>37.3648733333333,
    "时间戳"=>"2012-10-16T09:58:54Z",
    “背景”=>假，
    “估计速度”=>17.076057434082，
    “journey_id”=>无，
    "经度"=>-112.85077}},
 {“航点”=>
   {“纬度”=>37.3651116666667,
    "时间戳"=>"2012-10-16T09:58:57Z",
    “背景”=>假，
    “估计速度”=>15.4269437789917，
    “journey_id”=>无，
    "经度"=>-112.850766666667}},
 {“航点”=>
   {"纬度"=>37.36547,
    "时间戳"=>"2012-10-16T09:59:02Z",
    “背景”=>假，
    “估计速度”=>17.1007328033447，
    “journey_id”=>无，
    "经度"=>-112.85072}},
 {“航点”=>
   {“纬度”=>37.3658433333333,
    "时间戳"=>"2012-10-16T09:59:11Z",
    “背景”=>假，
    “估计速度”=>10.3052024841309，
    “journey_id”=>无，
    "经度"=>-112.850738333333}}]

```

您可以遍历该数组并访问或更改 的值`journey_id`：

```
row = 3
obj = obj.map{ |h| h['waypoint']['journey_id'] = row }
obj.first 
```

查看第一个哈希显示该值已更改，其余部分也是如此：

```
{
  "waypoint" => {
    "latitude" => 37.3645616666667,
    "timestamp" => "2012-10-16T09:58:50Z",
    "background" => false,
    "estimated_speed" => 17.4189262390137,
    "journey_id" => 3,
    "longitude" => -112.850676666667
  }
} 
```

此时，您需要重新创建 JSON 字符串。您可以通过阅读[JSON 文档了解这](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/JSON.html)一点。

您可以通过直接修改接收到的字符串来完成所有这些操作，但您不想养成直接修改 JSON 字符串的习惯，因为您可能会无意中损坏有效负载。最好让解析器给你结构，修改它，然后让 JSON 重新创建字符串。

如何将其存储到数据库中也留给您练习。

# javascript - 标题没有留在原地

> ID：15836385
> 
> 赞同：0
> 
> 时间：2013-04-05T14:22:51.110
> 
> 标签：javascript, html, css

我已通过使用将页面的标题始终位于顶部

```
 position:fixed; 
```

这工作得很好，但在我的安卓设备上的 Chrome 上不行。标题被某些东西推开并放置在不应该的位置：距顶部几 100 像素，而不是距顶部 0 像素。

我的猜测是它是由于我正在使用的一些 javascript 造成的。第一段 javascript 是当用户按下一个图标时会显示一个菜单，代码如下：

```
 <script type="text/javascript">
    $(document).ready(function() {
        $('#toggle').click(function(){
            $('div.showhide').toggle();

        });
    });
</script> 
```

第二个代码是当用户滚动离开标题时，标题关闭：

```
 <script type='text/javascript'>//<![CDATA[ 
      $(window).load(function(){
      $(window).scroll(function() {   $('.showhide').fadeOut("fast");
      });
      });//]]>  
    </script> 
```

这是我的页面代码：

```
<div class="showhide">
    <div class="menubg">
        <div class="menu">
            <div class="container">
                <div class="item">
                    <div class="img">
                        <a href="conv.cfm" style="color: white; text-decoration: none;"><img style="margin-top: 8px;"  src="img/conversations.png" alt="conversations" />
                    </div>
                    <p>Gesprekken</a></p>
                </div>
                <div class="item">
                    <div class="img">
                        <a href="home.cfm" style="color: white; text-decoration: none;">            <img src="img/high_res.png" alt="notifications" style="height: 38px; margin-left: 23px;" class="nav left" />
                    </div>
                    <p>Vrienden</a></p>
                </div>
                <div class="item">
                    <div class="img">
                        <a href="profile.cfm" style="color: white; text-decoration: none;"><img src="img/hoofd.png" alt="me" />
                    </div>
                    <p>Ik</a></p>
                </div>
                <div class="clear"></div>
                <div class="item">
                    <div class="img">
                        <img src="img/HC.gif" alt="reception" />
                    </div>
                    <p>Receptie</p>
                </div>
                <div class="item">
                    <div class="img">
                            <a href="settings.cfm" style="color: white; text-decoration: none;"><img src="img/wrench.gif" alt="settings" />
                    </div>
                    <p>Instellingen</p></a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="headbg">
    <div class="header">
        <a href="#">
            <img src="img/conversations.png" alt="conversations" class="nav left" />
        </a>
        <a href="#">
            <img src="img/high_res.png" alt="notifications" style="height: 38px; margin-top: -1px;" class="nav left" />
        </a>
        <a href="#">
            <img src="img/habbobtn.png" alt="habbologo" class="nav right" id="toggle" />
        </a>
    </div>
</div>

<div class="content">
   </div>
   // Page continues after this but it isn't causing the problem 
```

忘了添加它，但这是我的 css 代码：

```
.menubg {
width: 100%;
background-color: #201d19;
}
  .menu {
width: 320px;
height: 190px;
margin: 0 auto;
overflow: hidden;
   }
  .showhide {
display: none;
   }
  .container {
width: 290px;
height: 160px;
background-color: #201c18;
border: 1px solid #282420;
border-radius: 5px;
position: absolute;
padding: 5px;
margin: 10px;
   }
   // This is not all the css, if it's needed i'll add it 
```

如果有人可以帮助我解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:29:44.303

我创建了一个带有标题和内容 div的示例[小提琴。](http://jsfiddle.net/G5Nar/1/)

```
#header
{
position:fixed;
...
    top:0;
    left:0;
}
#content
{
margin-top:set your header height;
} 
```

# .net - 加载表单后更改控件上的 TabStop

> ID：15836387
> 
> 赞同：1
> 
> 时间：2013-04-05T14:22:55.587
> 
> 标签：.net, winforms, tabstop

我有一个包含一组下拉列表的表单，在某些情况下我希望将其排除在标签顺序之外。我已将 TabStop 属性设置为 false，并且当我希望它们处于 Tab 键顺序时将其设置为 true。当用户单击该组中的一个下拉菜单时，我总是希望将它们全部包含在选项卡顺序中。为此，我在每个控件的 Enter 事件处理程序中将所有下拉列表的 TabStop 属性设置为 true。这会在 Enter 上产生奇怪的行为。每个控件似乎都选择了所有文本（突出显示）。我希望只有具有焦点的控件表现得像那样。谁能解释一下？谢谢！

我创建了一个具有相同奇怪行为的简单表单。当表单出现时，只需用鼠标单击任一下拉菜单，您将看到以下内容：

![两个 ComboBox 都同时显示 SelectedText](https://i.stack.imgur.com/PiBEi.png)

这是 C# 中表单的代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void comboBox1_Enter(object sender, EventArgs e)
    {
        comboBox1.TabStop = comboBox2.TabStop = true;
    }

    private void comboBox2_Enter(object sender, EventArgs e)
    {
        comboBox1.TabStop = comboBox2.TabStop = true;
    }

    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.comboBox1 = new System.Windows.Forms.ComboBox();
        this.comboBox2 = new System.Windows.Forms.ComboBox();
        this.SuspendLayout();
        // 
        // comboBox1
        // 
        this.comboBox1.FormattingEnabled = true;
        this.comboBox1.Items.AddRange(new object[] {
        "comboBox1",
        "comboBox2"});
        this.comboBox1.Location = new System.Drawing.Point(12, 12);
        this.comboBox1.Name = "comboBox1";
        this.comboBox1.Size = new System.Drawing.Size(121, 21);
        this.comboBox1.TabIndex = 1;
        this.comboBox1.TabStop = false;
        this.comboBox1.Text = "comboBox1";
        this.comboBox1.Enter += new System.EventHandler(this.comboBox1_Enter);
        // 
        // comboBox2
        // 
        this.comboBox2.FormattingEnabled = true;
        this.comboBox2.Items.AddRange(new object[] {
        "comboBox1",
        "comboBox2"});
        this.comboBox2.Location = new System.Drawing.Point(12, 39);
        this.comboBox2.Name = "comboBox2";
        this.comboBox2.Size = new System.Drawing.Size(121, 21);
        this.comboBox2.TabIndex = 2;
        this.comboBox2.TabStop = false;
        this.comboBox2.Text = "comboBox2";
        this.comboBox2.Enter += new System.EventHandler(this.comboBox2_Enter);
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(284, 77);
        this.Controls.Add(this.comboBox2);
        this.Controls.Add(this.comboBox1);
        this.Name = "Form1";
        this.Text = "Form1";
        this.ResumeLayout(false);

    }

    #endregion

    private System.Windows.Forms.ComboBox comboBox1;
    private System.Windows.Forms.ComboBox comboBox2;
} 
```

# c - C：将可变数量的参数从一个函数传递到另一个函数

> ID：15836392
> 
> 赞同：16
> 
> 时间：2013-04-05T14:23:04.340
> 
> 标签：c, function, variables, parameter-passing

所以，这是我现在面临的一个小问题-> 我正在尝试编写一个函数，该函数将接受 char* 消息和可变数量的参数。我的函数会稍微修改一下消息，然后它会用消息和给定的参数调用 printf。本质上，我正在尝试编写类似的东西：

```
void modifyAndPrintMessage(char* message,...){
    char* newMessage; //copy message.
    //Here I'm modifying the newMessage to be printed,and then I'd like to print it. 
    //passed args won't be changed in any way.

    printf(newMessage,...); //Of course, this won't work. Any ideas?
    fflush(stdout);

} 
```

那么，有人知道我应该怎么做才能实现它吗？我将不胜感激任何帮助:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T14:30:12.213

你想使用可变参数...

```
void modifyAndPrintMessage( char* message, ... )
{
    // do somehthing custom

    va_list args;
    va_start( args, message );

    vprintf( newMessage, args );

    va_end( args );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T14:30:40.383

```
void modifyAndPrintMessage(char* message,...)
{   char newMessage[1024]; // **Make sure the buffer is large enough**
    va_list args;
    va_start(args, message);
    vsnprintf(newMessage, message, args);
    printf(newMessage);
    fflush(stdout);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:27:28.890

使用[varargs](http://linux.die.net/man/3/stdarg)接受可变数量的参数，然后使用[sprintf](http://linux.die.net/man/3/sprintf)创建新消息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T14:28:37.033

您可以使用`va_list`from `stdarg.h`,

C 示例：[http](http://www.tutorialspoint.com/cprogramming/c_variable_arguments.htm) ://www.tutorialspoint.com/cprogramming/c_variable_arguments.htm C++ 示例：[http](http://www.cprogramming.com/tutorial/lesson17.html) ://www.cprogramming.com/tutorial/lesson17.html 。

当然，请参阅手册页： http: [//linux.die.net/man/3/stdarg](http://linux.die.net/man/3/stdarg)

手册页示例供参考：

```
#include <stdio.h>

#include <stdarg.h>

void
foo(char *fmt, ...)
{
    va_list ap;
    int d;
    char c, *s;

   va_start(ap, fmt);
    while (*fmt)
        switch (*fmt++) {
        case 's':              /* string */
            s = va_arg(ap, char *);
            printf("string %s\n", s);
            break;
        case 'd':              /* int */
            d = va_arg(ap, int);
            printf("int %d\n", d);
            break;
        case 'c':              /* char */
            /* need a cast here since va_arg only
               takes fully promoted types */
            c = (char) va_arg(ap, int);
            printf("char %c\n", c);
            break;
        }
    va_end(ap);
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-05T14:30:29.993

有一个包含此功能的库。以下是参考中的一些示例代码：

```
#include <stdarg.h>     /* va_list, va_start, va_arg, va_end */

int FindMax (int n, ...)
{
    int i,val,largest;
    va_list vl;
    va_start(vl,n);
    largest=va_arg(vl,int);
    for (i=1;i<n;i++)
    {
        val=va_arg(vl,int);
        largest=(largest>val)?largest:val;
    }
    va_end(vl);
    return largest;
} 
```

省略号实际上是有效代码，您可以使用 va_list 对象解析可变数量的参数。

# python - 无法按名称从 numpy 数组中获取值

> ID：15836397
> 
> 赞同：1
> 
> 时间：2013-04-05T14:23:12.343
> 
> 标签：python, arrays, numpy

我有以下代码，我试图通过我设置的名称获取数组中的值。

```
import datetime
import numpy as np
import matplotlib.finance as finance
import matplotlib.mlab as mlab

def get_pxing(my_tickers):
    dt = np.dtype([('sym', np.str_, 6), ('adj_close', np.float32)])
    close_px = []
    for ticker in my_tickers:
    # a numpy record array with fields: date, open, high, low, close, volume, adj_close)
        fh = finance.fetch_historical_yahoo(ticker, startdate, enddate)
        r = mlab.csv2rec(fh)    
        fh.close()
        prices = np.array((ticker, r.adj_close), dtype=dt)
        close_px.append(prices)
    return close_px

enddate = startdate = datetime.date.today() - datetime.timedelta(1)

my_tickers = np.genfromtxt('./stocklist.csv', delimiter = ",", dtype=None, names=True)

data = get_pxing(my_tickers["ticker"])
print data 
```

这工作正常，但如果我尝试

```
print data['sym'] 
```

我得到：

```
Traceback (most recent call last):
  File "stockyield.py", line 26, in <module>
    print data['sym']
TypeError: list indices must be integers, not str 
```

然而，也许我使用 close_px.append 错误地转换了我的数组，但我无法弄清楚如何使用 np.append，因为我总是得到一个数组不匹配。

我的输入 csv 文件如下所示：

```
ticker, holding
T, 100
F, 200 
```

关于最佳方法的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:42:03.673

正如评论所说，您似乎正在将一个 numpy 数组附加到数组列表中。您真的想制作一个元组列表，然后将元组列表转换为数组。

尝试这样的事情（更改的行有注释）

```
def get_pxing(my_tickers):
    dt = np.dtype([('sym', np.str_, 6), ('adj_close', np.float32)])
    close_px = []
    for ticker in my_tickers:
    # a numpy record array with fields: date, open, high, low, close, volume, adj_close)
        fh = finance.fetch_historical_yahoo(ticker, startdate, enddate)
        r = mlab.csv2rec(fh)    
        fh.close()
        prices = (ticker, r.adj_close)   # append a tuple to your list instead of an array
        close_px.append(prices)
    return np.array(close_px, dtype=dt)  # make the list of tuples into an array with dtype dt 
```

# asp.net-mvc - 在 ASP.NET MVC 4 中使用和不使用控制器名称的路由

> ID：15836401
> 
> 赞同：19
> 
> 时间：2013-04-05T14:23:24.987
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在使用 ASP.NET MVC 4，我在设置路由时遇到了一些问题。你能告诉我如何设置我的路线以将 url 指向操作，如下所示：

*   “/”（或“/Start”）=> PublicController.Start()
*   “/关于” => PublicController.About()
*   “/MyPage”（或“/MyPage/Summary”）=> MyPageController.Summary()
*   "/MyPage/Invoices" => MyPageController.Invoices()
*   "/MyPage/Invoice/72" => MyPageController.Invoice(int id)

是 url "/About" 让我搞砸了，即没有指定控制器的 url。如果我让那个工作，其他指定控制器的工作将停止工作。我猜我可以为“/About”创建一个单独的控制器，但如果我不需要的话，我宁愿不要（我有更多遵循该模式的网址）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-05T14:27:16.417

这应该这样做：

```
routes.MapRoute(
    name: "About",
    url: "About",
    defaults: new { controller = "Public", action = "About" }
);

routes.MapRoute(
    name: "MyPageSummary",
    url: "MyPage",
    defaults: new { controller = "MyPage", action = "Summary" }
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Public", action = "Start", id = UrlParameter.Optional }
); 
```

# java - 如何将 json 对象存储到休眠数据库字段

> ID：15836403
> 
> 赞同：5
> 
> 时间：2013-04-05T14:23:31.693
> 
> 标签：java, json

我的情况如下。我有一个带有三个输出文本和相应输入文本的 JSF 表单，可以说：

输出文本1 - 输入文本1

输出文本2 - 输入文本2

输出文本3 - 输入文本3

目前我使用backbean方法“保存”，以便将它们存储到数据库中（休眠对象可以说是带有主键table1.id的table1）到字段table1.field1、table1.field2、table1.field3中。

所以表中的每条记录都有插入到输入文本中的值。

我的问题是我将如何以如下**形式将表单数据存储在数据库**中：

**{"outputtext1:inputtext1","outputtext2:inputtext2"."outputtext3:inputtext3"}**

然后再次获取它们，解析并重建表单。我正在考虑将表单数据作为 JSON 对象进行操作......但我对 Java+JSON 都是新手，所以一些指南对我来说真的很有用！

这是一个指示性示例，表单将动态生成并动态创建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:31:32.793

为什么要序列化/反序列化 JSON 以将其直接发送到数据库？反序列化有其自身的问题，多个反序列化*可能*（不会*）*成为问题的根源。

[您应该将字段保存为给定实体的属性，然后在Gson](http://code.google.com/p/google-gson/)等库的帮助下，从实体生成 JSON。

* * *

**更新**

由于您的表单是动态的，您可以使用一些适应性强的实体结构来保存您的数据。

您的实体可以有一个`Map<String,String>`属性或一个集合，例如，`FieldRecord`包含键值对的实体。

我建议这样做是因为数据库中的 JSON 可能会导致复杂的问题，特别是如果您稍后必须查询该数据。您必须处理 JSON 以便报告或查找哪些记录具有特定字段。这只是一个例子，事情可能会变得更复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:27:11.637

简单，您需要在表中使用 BLOB 类型列来存储 json，当您在 java 中检索它时，您只需要解码 json，我建议使用[https://code.google.com/p/json-simple/](https://code.google.com/p/json-simple/)它非常简单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:32:20.097

转换`JSONObject`成`String`表格然后存储。当你读回来时，将其转换回`JSONObject`如下：

```
 JSONObject obj = new JSONObject(stringRepresentationOfJSON); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-12-15T07:54:16.257

像这样更改休眠映射 JSONObject obj = new JSONObject(stringRepresentationOfJSON);

# jquery - 值为空时如何隐藏附加的输入名称

> ID：15836404
> 
> 赞同：0
> 
> 时间：2013-04-05T14:23:39.843
> 
> 标签：jquery, serialization, append

大家好，我有一个小脚本，将输入值列表及其名称附加到文本区域中。我想做的是在值为`0`or时隐藏字段名称`empty`。

这是脚本：

```
<script>
  function showValues() {
    var fields = $(".content :input").serializeArray();
    $("#contentlist_copy").empty();
    jQuery.each(fields, function(i, field){
      $("#contentlist_copy").append(field.value + " " + field.name + ", ");
    });
  } 
  $("input").change(showValues);
  showValues();     
</script> 
```

我知道这是一个基本问题，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:27:33.747

```
$("#contentlist_copy").append(field.value + (!field.value || field.value == "0" ? "" : " " + field.name) + ", "); 
```

**更新：**

如果你也想隐藏逗号，试试这个

```
$("#contentlist_copy").append(field.value + (!field.value || field.value == "0" ? "" : " " + field.name) + (!field.value ? "" : ", ")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:40:52.523

我认为您应该使用该`.val()`方法来设置文本区域的值。您还可以使用该`jQuery.map()`方法将字符串数组放在一起，然后将它们连接起来。如果该`jQuery.map()`方法的回调函数返回 null 或 undefined，则该项目不会添加到数组中。

```
function showValues() {
    var fields = $(".content :input").serializeArray();
    var tokens = jQuery.map(fields, function(field) {
            return (field.value && field.value != '0') ? (field.value + ' ' + field.name) : null;
        });
    $("#contentlist_copy").val(tokens.join(', '));
} 
```

更新：

上面的代码试图维护你的大部分原始代码，但你真的不需要调用`.serializeArray()`. 在您询问使用“标题”而不是“名称”的评论中。以下代码执行此操作：

```
function showValues() {
    var tokens = [];
    $('.content :input').each(function() {
        var $input = $(this);
        if (($input.val() != '') && ($input.val() != '0')) {
            tokens.push($input.val() + ' ' + $input.attr('title'));
        }
    });
    $('#contentlist_copy').val(tokens.join(', '));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:31:25.297

这是一种方法：

```
$('input').change(function() {
    var valuePairs = $('.content :input').filter(function() {
        return this.value.length && this.value !== '0';
    }).map(function() {
        return this.value + ' ' + this.name;
    }).get();
    $('#contentlist_copy').val(valuePairs.join(', '));
}); 
```

# html - Salesforce VF 页面中的三层 CSS 菜单

> ID：15836409
> 
> 赞同：0
> 
> 时间：2013-04-05T14:23:58.453
> 
> 标签：html, css, salesforce, visualforce

我正在构建一个 VF 页面，以便轻松浏览自定义报告。我刚刚开始学习代码，并且可以使用额外的眼睛来帮助识别我的错误。

两个问题是：

1.  悬停时菜单的第三层没有出现（我尝试了多种css代码组合）

2.  初始链接在 iFrame 中打开，但后面的第二个链接作为单独的选项卡打开。

    * * *

**CSS**

```
.top head {font-size: 40px; text-align: center; font-family: Verdana, sans-serif;}

.nav ul {list-style: none; margin: 0px; font-family: verdana, sans-serif; text-align: center;}

.nav li {float:left; width:200px background-color:#444444; text-align: center; 
          boarder-right:1px solid white; position:relative; height:30px; line-height:30px;}

.nav li ul li {float:none; width:200px; text-align:center; padding-left:5px; boarder-tip:1px solid white;}

.nav a {text-decoration:none; color:black; text-align: center;}
.nav li ul {position:absolute; top:30px; left:0; visibility:hidden;}

.nav li:hover {background-color:yellow;}
.nav li:hover ul {visibility:visible;} 
```

**HTML**

```
<div class="nav">

<ul> 
    <li>  
        <a> Summary </a>
        <ul>
            <li><a href="www" target="theIframe">Volume </a></li>
        <ul>
            <li><a href="www" target="theIframe">Overall</a></li>
        </ul>
            <li><a href="www" target="theIframe"> ASP </a></li>
        </ul>

</ul>
</div> 

<br/>

<iframe src="www" scrolling="true" id="theIframe" width="90%" align="center"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:58:02.717

我不尝试，但是如果您保持代码清洁和语义化，它将起作用。我的意思是现在，你的代码有很多未封闭的元素，很可能这就是为什么你的代码不起作用

# c# - 使用 MonoTouch 导航离开后，如何更新现有的 DialogViewController RadioElement 组？

> ID：15836410
> 
> 赞同：1
> 
> 时间：2013-04-05T14:23:59.640
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我正在寻找关于如何实现这一点的想法：

我有一个带有标签栏控制器的应用程序，其中每个“屏幕”都有导航控制器（可通过底部标签栏导航上的自己的标签访问。

然后每个屏幕都是一个 DialogViewController，我可以在其中输入和查看数据的各种元素和项目。在一个屏幕上，用户可以使用 RadioElements 的 RadioGroup 来选择项目

```
MyRadioElement _customRadioElement = new MyRadioElement (lines [0], lines [5], setRPMElementData); // set profile name and calculated IOPS for custom disk to this custom element
            // Disk Speed Root Element
            _diskspeed = new RootElement ("Disk Speed: ", new RadioGroup (0)){
                new Section ("Disk Speed:"){
                    new MyRadioElement("5400 RPM","5400",setRPMElementData),
                    new MyRadioElement("7200 RPM","7200",setRPMElementData),
                    new MyRadioElement("10K RPM","10K",setRPMElementData),
                    new MyRadioElement("15K RPM","15K",setRPMElementData),
                    new MyRadioElement("SSD","SSD",setRPMElementData),
                    _customRadioElement // this is the MyRadioElement defined above (our custom disk profile)
                }
            }; 
```

最后一个元素 (_customRadioElement) 是一个 RadioElement，它是通过从已保存的磁盘对象中加载一些信息而创建的。我阅读了文本文件的行并使用它来创建我的 RadioElement。它最初是通过使用选项卡栏控制器上的另一个选项卡来访问另一个屏幕（也是一个 DialogViewController）创建的，它允许用户指定他们的“自定义磁盘”并将其保存到磁盘/文件。

我的问题是当您在应用程序中并且想要修改此自定义磁盘时，您转到自定义磁盘编辑选项卡，进行更改，然后轻弹回 RadioGroup 所在的主选项卡 - 但是自定义磁盘 RadioElement 位于RadioGroup 列表的末尾不会更新。（好吧，标题不会更新，但它背后的实际数据会更新）。即使在按下后退按钮退出 RadioGroup 并再次回到它之后。我可以让它更新的唯一方法是杀死应用程序，然后重新启动 - 创建 DialogViewController 时再次从文件中读取自定义磁盘对象，然后显示正常。我尝试使用 ViewWillAppear 创建我需要的整个表格，但问题是每次我在选项卡之间滑动时都会重置所有内容，

如何在仍在应用程序中并在选项卡之间轻弹的同时动态刷新此 RadioGroup 及其关联的 RadioElements？

我曾尝试使用 ViewDidAppear，但这是在 DialogViewController 本身上，并且似乎不会影响 RadioGroup。例如

```
public override void ViewWillAppear (bool animated)
    {
        base.ViewWillAppear (animated);

        Console.WriteLine ("Forcing table reload...");
        LoadDiskInfo(); // Reload disk info from local app storage
        this.ReloadData(); // Force refresh of dialog viewcontroller table data - need to refresh the custom disk RadioElement somehow...
    } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:54:40.157

您可能会发现我对这篇文章的回答很有帮助： [Monotouch Dialog - Reload data list after modifying row detail not updated list when returned](https://stackoverflow.com/questions/13832163/monotouch-dialog-reload-data-list-after-modifying-row-detail-not-updating-list/15268469#15268469)

希望这可以帮助瓦西利斯

# java - 带有标志图标的 JSF RichFaces 区域设置下拉列表

> ID：15836412
> 
> 赞同：2
> 
> 时间：2013-04-05T14:24:02.690
> 
> 标签：java, jquery, jsf, selectonemenu

我浏览了很长时间寻找解决方案，但没有找到合适的答案。我正在使用 RichFaces 库开发 JSF Web 应用程序。应用程序支持不同的语言环境，用户可以通过从下拉列表中选择来更改它们。我希望下拉列表中的项目在语言环境名称旁边有一个标志图标。

不幸的是，我找不到使用 JSF 的方法。

下拉列表的 xthml 代码是：

```
<h:panelGroup>
    <h:form id="languageForm" prependId="false">
        <h:outputText value="#{usermsg['locale.select.message']}" styleClass="userMessage"/>
        <h:selectOneMenu id="dropdown" value="#{localeBean.selectedLocale}" onchange="submit()">
            <f:selectItems value="#{localeBean.locales}" />
        </h:selectOneMenu>
    </h:form>
</h:panelGroup> 
```

标志图标只需使用纯 HTML 和 JQuery 完成，就像我在这里找到的那​​样：[http ://www.ixtendo.com/polyglot-language-switcher-jquery-plugin/](http://www.ixtendo.com/polyglot-language-switcher-jquery-plugin/)

要将图标放在下拉列表项中，我必须为列表中的每个元素应用 css，例如：

```
#en { 
    background-image: url(/resources/images/flags/gb.png);
}

#fr { 
    background-image: url(/resources/images/flags/fr.png);
} 
```

这里的问题是：

1.  f:selectItems（以及 f:selectItem）似乎不支持样式属性。
2.  我可以使用 javascript 将样式应用于标签，但我需要有标签的 ID，而 f:selectItem （似乎）也不允许这样做。

我想的另一件事是使用上面链接中提到的 JQuery 控件，但这里还有一个问题：如何将所选选项的值设置为 JSF bean。换句话说，我可以通过 JQuery 或 Javascript 和纯 HTML 设置 #{localeBean.selectedLocale} 吗？

我发现 PrimeFaces 有一个 selectOneMenu 控件，它允许添加图标[http://www.primefaces.org/showcase/ui/selectOneMenu.jsf](http://www.primefaces.org/showcase/ui/selectOneMenu.jsf)（名为“带有过滤器的内容”的那个）但我害怕我们负担不起目前从 RichFaces 切换到 PrimeFaces。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:23:01.517

我自己找到了解决方案。我认为我可以使用 jQuery 将 id 或类添加到 html 标签，所以我所做的就是添加了以下脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
       $('option').each(function(){
          $(this).addClass(this.value);
       });
    });
</script> 
```

和CSS：

```
 option {
        background-repeat: no-repeat;
        background-position: right;
    }

    .en {
        background-image: url(/resources/images/flags/gb.png);
    }

    .fr {
        background-image: url(/resources/images/flags/fr.png);
    }
    ... 
```

我使用类是因为我的应用程序中有两个带有标志的菜单，但这也适用于 id。

该脚本将类添加到 JSF 生成的标记中，因此将值发送回 managedBean 不再存在问题。

谢谢大家。

# windows - 如果 Steam 可以映射 Xbox 360 控制器上的引导按钮，为什么我不能

> ID：15836415
> 
> 赞同：5
> 
> 时间：2013-04-05T14:24:09.113
> 
> 标签：windows, xbox360, keymapping, gamecontroller

我想在 Xbox 360 控制器上映射 Xbox 指南按钮。

一段时间以来，我一直在寻找可能的解决方案，从我的谷歌结果来看，似乎唯一的方法是使用自定义驱动程序。

然而，我今天尝试使用 Steam 大画面模式，并惊讶地发现 Valve 成功地实现了这一点并打开了 Steam 叠加层。那么为什么我找不到有关如何执行此操作的任何信息？有谁知道他们是如何做到的？

除了自定义驱动程序之外，我已经想到了可能的解决方案，我想知道您是否可以从控制器读取原始数据？按钮必须发送一个信号，以便可以检测到它何时被按下，对吧？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T20:46:11.917

标记为已回答：@luke 在评论中回答了这个问题：

> 假设您使用的是 XInput，那么指南按钮的使用似乎没有记录。但是，人们发现它显然在按钮位标志中设置了位 0x0400。[更多信息](http://code.google.com/p/x360ce/issues/detail?id=417)。

# ios - 将图像和标题都添加到导航 backBarButtonItem

> ID：15836418
> 
> 赞同：0
> 
> 时间：2013-04-05T14:24:28.203
> 
> 标签：ios, uinavigationitem, custom-view, backbarbuttonitem

我正在尝试向导航控制器的后退按钮添加一个图标（并保留标题）。似乎如果我设置 UIBarButtonItem 的图像它会隐藏标题，所以我想我会尝试自定义视图。我试过了

```
UIButton* customButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[customButton setImage:[UIImage imageNamed:@"icon"] forState:UIControlStateNormal];
[customButton setTitle:@"Title" forState:UIControlStateNormal];
[customButton setAdjustsImageWhenHighlighted:YES];
[customButton setFrame:CGRectMake(0, 0, 125, 32)];

UIBarButtonItem* backButton = [[UIBarButtonItem alloc] initWithCustomView:customButton];
self.navigationItem.backBarButtonItem = backButton; 
```

但苹果文档说 backBarButtonItem 忽略自定义视图，所以这不起作用。

我也试过这个：

```
self.navigationItem.leftBarButtonItem = backButton;
self.navigationItem.hidesBackButton = YES; 
```

但是 leftBarButtonItem 过早显示一个屏幕， hidesBackButton 似乎没有隐藏 backBarButtonItem。

有没有另一种方法可以将图像和标题都放到导航 backBarButtonItem 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:28:23.643

首先隐藏使用`UINavigationController`代码提供的后退按钮`self.navigationItem.hidesBackButton = YES;`

并使用以下代码设置带有图像和标题的自己的按钮

```
UIButton* customButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[customButton setImage:[UIImage imageNamed:@"icon"] forState:UIControlStateNormal];
[customButton setTitle:@"Title" forState:UIControlStateNormal];
[customButton setAdjustsImageWhenHighlighted:YES];
[customButton setFrame:CGRectMake(0, 0, 125, 32)];

UIBarButtonItem* backButton = [[UIBarButtonItem alloc] initWithCustomView:customButton];
self.navigationItem.backBarButtonItem = backButton; 
```

# javascript - 如何指定哪些内容脚本将在 all_frames 上运行，哪些不会？

> ID：15836420
> 
> 赞同：1
> 
> 时间：2013-04-05T14:24:32.833
> 
> 标签：javascript, iframe, google-chrome-extension, manifest, frames

在 chrome 扩展的清单文件中指定参数时，有一个选项`all_frames`. 这允许内容脚本嵌入或不嵌入页面的所有框架中。

我想要实现的一个例子是让 a.js 使用**all_frames=false**运行， b.js 使用`all_frames=true`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:40:29.640

`content_scripts`manifest 属性是一个*数组*，因此您可以定义多个内容脚本规范对象：

```
"content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "css": ["mystyles.css"],
      "js": ["a.js"],
      "all_frames": false
    },

    {
      "matches": ["http://www.yahoo.com/*"],
      "js": ["b.js"],
      "all_frames": true
    }
], 
```

# gcc - GCC默认如何在默认链接器搜索路径之前添加？LIBRARY_PATH 不工作

> ID：15836423
> 
> 赞同：29
> 
> 时间：2013-04-05T14:24:39.880
> 
> 标签：gcc, linker, g++, ld

我试图弄清楚如何设置一些环境变量，使 g++ 链接到正确版本的库。

我在 /usr/lib64 中有一些旧的 bo​​ost 库（链接这些库会失败），在 /v/users/regel/lib 中有一些新的库。所以链接器应该链接到新的库。

命令：

```
$ g++ test.cpp -lboost_system -L/v/users/regel/lib 
```

正确链接程序。但是，我希望将其设置为链接器的 1 号搜索目录，这样我就不必在每次链接时都指定“-L”。

以下环境变量似乎不起作用：

```
$ LIBRARY_PATH=/v/users/regel/lib g++ test.cpp -lboost_system
/tmp/regel/cc4SmBtI.o: In function `main':
test.cpp:(.text+0x5): undefined reference to `boost::system::system_category()'
collect2: error: ld returned 1 exit status 
```

和

```
$ LD_LIBRARY_PATH=/v/users/regel/lib:$LD_LIBRARY_PATH g++ test.cpp -lboost_system
/tmp/regel/ccUreBZy.o: In function `main':
test.cpp:(.text+0x5): undefined reference to `boost::system::system_category()'
collect2: error: ld returned 1 exit status 
```

尽管阅读了许多类似主题的文章和帖子，但我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-03-17T13:42:47.760

正如 GCC 手册[所说](https://gcc.gnu.org/onlinedocs/gcc/Environment-Variables.html#Environment-Variables)，`LIBRARY_PATH`是将目录添加到库搜索路径的正确环境变量。

如果您添加`-v`到`g++`命令中，您应该看到`LIBRARY_PATH`它使用的，并且您应该看到它包含您指定的目录，并且它被添加到`collect2`命令中`-L`，但是您会看到它在标准目录*之后*添加，例如`-L/usr/lib`etc .

我不知道有什么方法可以让目录`LIBRARY_PATH`放在第一位，我认为你必须使用`-L`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T19:27:22.603

尝试在 /etc/ld.so.conf.d/ 中的 .conf 文件中指定库路径

链接器在链接时查看 /etc/ld.so.conf.d/ 文件中指定的路径。

确保在创建文件后运行“ldconfig”，这将强制它更新其缓存。

# ruby-on-rails - 使用 Ruby Twitter gem 捕获错误，使用 delay_job 缓存方法：我做错了什么？

> ID：15836429
> 
> 赞同：0
> 
> 时间：2013-04-05T14:24:59.203
> 
> 标签：ruby-on-rails, heroku, delayed-job, rescue, twitter-gem

**我在做什么**

我在我的应用程序中使用了[twitter gem](https://github.com/sferik/twitter)（Twitter API 的 Ruby 包装器），该应用程序在[Heroku](https://www.heroku.com)上运行。我使用[Heroku 的调度程序](https://devcenter.heroku.com/articles/scheduler)定期运行缓存任务，这些任务使用 twitter gem 来更新特定用户的转发列表。我也在使用[delayed_job](https://github.com/collectiveidea/delayed_job)，所以调度程序调用了一个rake任务，它调用了一个“延迟”的方法（参见下面的scheduler.rake）。该方法循环通过“身份验证”（对于通过我的应用程序对 twitter 进行身份验证的用户）来更新每个授权用户在应用程序中的转发缓存。

**我的问题**

**我在做什么*错*？**例如，由于我使用的是 Heroku 的调度程序，delayed_job 是多余的吗？此外，您可以看到我没有发现（拯救）任何错误。因此，如果 Twitter 无法访问，或者用户的身份验证令牌已过期，那么一切都会阻塞。这显然是愚蠢和可怕的，因为如果出现错误，整个事情就会窒息并最终创建一个失败的延迟作业，这会给我的应用程序带来连锁反应。我可以看到这很糟糕，但我不确定最好的解决方案是什么。我应该如何/在哪里发现错误？

我将把我的所有代码（从调度程序到被调用的方法）放在我的一个缓存方法中。**我真的只是希望有一个项目符号列表（可能还有一些代码或伪代码）来谴责我糟糕的编码实践并告诉我在哪里可以改进。**

我已经看到[了这个 SO question](https://stackoverflow.com/questions/6726859/rescuing-from-twitter-gem)，它对开始/救援块有一点帮助，但我可以使用更多的指导来捕捉错误，以及更高级别的“这是一个很好的方法吗？” 飞机。

**代码**

Heroku 调度程序工作：

```
rake update_retweet_cache 
```

scheduler.rake （在我的应用程序中）

```
task :update_retweet_cache => :environment do
  Tweet.delay.cache_retweets_for_all_auths
end 
```

Tweet.rb、update_retweet_cache 方法：

```
def self.cache_retweets_for_all_auths
  @authentications = Authentication.find_all_by_provider("twitter")

  @authentications.each do |authentication|
    authentication.user.twitter.retweeted_to_me(include_entities: true, count: 200).each do |tweet|
      # Actually build the cache - this is good - removing to keep this short
    end
  end
end 
```

User.rb，推特方法：

```
def twitter
  authentication = Authentication.find_by_user_id_and_provider(self.id, "twitter")
  if authentication
    @twitter ||= Twitter::Client.new(:oauth_token => authentication.oauth_token, :oauth_token_secret => authentication.oauth_secret)
  end
end 
```

**注意：**当我发布这篇文章时，我注意到我在“cache_retweets_for_all_auths”方法中找到了所有“twitter”身份验证，然后调用“User.twitter”方法，该方法专门限制为“twitter”身份验证。这显然是多余的，我会修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:08:10.937

首先你得到的确切错误是什么，当出现错误时你想发生什么？

编辑：

如果您只想捕获错误并记录它们，那么以下应该可以工作。

```
def self.cache_retweets_for_all_auths
  @authentications = Authentication.find_all_by_provider("twitter")

  @authentications.each do |authentication|
    being
      authentication.user.twitter.retweeted_to_me(include_entities: true, count: 200).each do |tweet|
        # Actually build the cache - this is good - removing to keep this short
      end
     rescue => e
       #Either create an object where the error is log, or output it to what ever log you wish.
     end
  end
end 
```

这样，当它失败时，它将继续转移到下一个用户，但仍会记录错误。大多数情况下，使用 twitter 做这样的事情会更好，然后尝试自己处理每个错误。我从 twitter API 中看到了很多奇怪的东西，以及随机错误，以至于试图追踪每一个错误几乎总是会变成一场疯狂的追逐，尽管为了以防万一，保持追踪仍然是件好事。

* * *

接下来是什么时候应该使用什么。

当您需要仅基于时间发生某些事情时，您应该使用调度程序，当它基于用户操作时延迟作业，但是您要延迟的“操作”将需要很长时间才能获得正常响应。有时你也可以把东西简单地放在控制器中。

***所以换句话说***

只要更新**X**之间的时间小于更新发生的时间**Y** ，调度程序就可以了。

如果**X < Y**那么您可能希望查看在访问每个单独的条目时从控制器调用逻辑，而不是尝试一次完成所有操作。这个想法是你只会在经过一段时间后更新它。您可以将最后一次更新存储在模型本身的 twitter_udpate_time 之类的字段中，也可以存储在 redis 或 memecache 实例中的用户/身份验证键处。

但是，如果单个更新本身仍然太长，那么您应该执行上述操作，而不是执行实际更新，而是调用延迟作业。

您甚至可以将其设置为仅在一定数量的视图后更新或调用延迟的作业，以进一步限制内容。

**可能的花式裤子**

或者，如果您想变得非常花哨，您仍然可以将其作为一项 cron 工作来完成，但有一个基于视图的点系统，该系统对哪些条目应该更新的权重进行加权。某些操作的想法会为某些用户添加积分，如果他们的积分超过一定数量，您更新他们，然后删除他们的积分。这样您就可以定位您认为最重要的那些，或者拥有最多的流量或出现在最多的搜索结果中等等。

* * *

接下来是尼克挑剔的事情。

[http://api.rubyonrails.org/classes/ActiveRecord/Batches.html](http://api.rubyonrails.org/classes/ActiveRecord/Batches.html)

你应该使用

```
@authentications.find_each do |authentication| 
```

代替

```
@authentications.each do |authentication| 
```

find_each 一次只提取 1000 个条目，因此如果您最终获得大量身份验证，您最终不会将大量条目拉入内存。

# assembly - LLVM 汇编语言有多稳定？

> ID：15836430
> 
> 赞同：6
> 
> 时间：2013-04-05T14:24:59.237
> 
> 标签：assembly, llvm, intermediate-language

[LLVM 语言参考](http://llvm.org/docs/LangRef.html)声明它可以用于

> 作为磁盘上的位码表示（适用于即时编译器的快速加载）

这种表示有多稳定？例如，我现在可以使用 LLVM 3.1 生成它，并且仍然期望它可以使用未来的 LLVM，比如三年后假设的 LLVM 4.5 吗？

假设我没有外部依赖项，我可以使用它为不同的架构生成二进制文件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T15:44:32.783

回答你的第一个问题：不。它不稳定。不，你不能指望 3.1 生成的 IR/bitcode 在 4.5 中是可读的——LLVM 项目明确不做这个保证，牺牲向后兼容性来支持更快地前进、创建更好的优化和工具以及重构的能力框架的一部分根据需要。LLVM 主要针对静态、提前 (AOT) 编译器，因此这种方法对大玩家来说很有意义。

第二个问题我不太明白。LLVM 有许多架构的目标（后端），并且适用于大多数流行的架构。但同样，他们的输入是 IR，在版本之间可能会发生变化。另请务必阅读： http: [//llvm.org/docs/FAQ.html#can-i-compile-c-or-c-code-to-platform-independent-llvm-bitcode](http://llvm.org/docs/FAQ.html#can-i-compile-c-or-c-code-to-platform-independent-llvm-bitcode)，以及“目标依赖”部分：[https ://llvm.org/docs/tutorial/LangImpl10.html](https://llvm.org/docs/tutorial/LangImpl10.html)

问题是，当询问 LLVM 平台独立性时，许多人会问“从我的 C 代码编译的 LLVM IR 会与目标无关吗？”。答案是否定的，因为 C 本身是依赖于目标的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-26T13:10:30.153

回答你的第一个问题：这里引用了 LLVM 开发者政策。

> 当必须更改 IR 格式时，请记住，我们会尝试保持一些向后兼容性。这些规则旨在平衡 llvm 用户的便利性和不给 llvm 开发人员带来很大负担：
> 
> *   文本格式不向后兼容。我们不会经常更改它，但没有具体的承诺。
> *   XY 版本生成的位码格式将可由所有后续 XZ 版本和 (X+1).0 版本读取。
> *   较新的版本可以忽略旧版本的功能，但不能错误编译它们。例如，如果 nsw 曾经被其他东西替换，那么删除它将是升级 IR 的有效方法。
> *   调试元数据的特殊之处在于它当前在升级期间被丢弃。
> *   非调试元数据被定义为可以安全删除，因此升级它的有效方法是删除它。这对用户不是很友好，预计会付出更多的努力，但没有做出任何承诺。

# php - 获取全尺寸图像的 URL 并将其添加到帖子中的特定单词

> ID：15836431
> 
> 赞同：0
> 
> 时间：2013-04-05T14:25:00.127
> 
> 标签：php, wordpress

我想将帖子中的特定单词超链接到存储在`wp-content/uploads`.

我在上面添加了一行“查看全尺寸”字样，`single.php`因此它显示在每个创建的帖子的底部，我想将这些字词超链接到该帖子上附加的全尺寸图像。

如何用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:08:53.097

我已经使用了这个片段几次，它抓取了特色图像，我添加了 else 选项，因此您可以在需要时设置默认图像。我希望这就是你要找的东西。任何问题我都会很乐意提供帮助。

```
<?php if ((function_exists('has_post_thumbnail')) && (has_post_thumbnail())) : ?>
  <?php $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' );  $alt = get_post_meta(get_post_thumbnail_id( $post->ID ), '_wp_attachment_image_alt', true);?> 
  <a href="<?php echo $image[0]; ?>" title="<?php the_title(); ?>">View Full Size</a>
<?php else: ?>

<?php endif;?> 
```

# enterprise-library - 使用企业库日志记录应用程序块记录方法参数和返回类型

> ID：15836436
> 
> 赞同：0
> 
> 时间：2013-04-05T14:25:10.570
> 
> 标签：enterprise-library, entlib-logging

有没有办法使用企业库日志记录应用程序块来记录方法参数名称、其值和返回类型值。我在下面提供了一个代码示例。要求是记录它的方法输入参数值及其返回类型值

```
// Complex Types
public class UserDetails
{
    public string UserName { get; set; }
    public int UserAge { get; set; }
    public string UserAddress { get; set; }
}
public class User
{
    public string UserId { get; set; }
    public string Pwd { get; set; }
}

//Interface
public interface IService
{
    UserDetails GetUserDetails(User ReqUser);
}

//Imp
public class Service : IService
    {

        [LogCallHandler(Categories = new string[] { "General" }, LogBeforeCall = true, LogAfterCall = true ,
         BeforeMessage = "This occurs before the call to the target object",AfterMessage="This occured after method call",IncludeParameters=true)]
        public UserDetails GetUserDetails(User ReqUser)
        {
            UserDetails oUD = new UserDetails();
            oUD.UserName = "hhh" + ReqUser.UserId;
            oUD.UserAge = 100;
            oUD.UserAddress = "HHHHHHHHHHHHHHHHHHHHHHH";
            return oUD;
        }

        #endregion
    }

//Usage
private void button2_Click(object sender, EventArgs e)
{
    IUnityContainer container = new UnityContainer().LoadConfiguration();
    container.AddNewExtension<EnterpriseLibraryCoreExtension>();
    IService service = container.Resolve<IService>();
    User nUser = new User();
    nUser.UserId = "TTTTT";
    nUser.Pwd = "XXXXX";
    UserDetails mm = service.GetUserDetails(nUser);

} 
```

谁能解释一下如何使用企业库日志记录应用程序块来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:37:12.213

您可以通过代码使用 EntLib LogCallHandler：

```
container.AddNewExtension<EnterpriseLibraryCoreExtension>();
container.RegisterType<IService, Service>(
    new InterceptionBehavior<PolicyInjectionBehavior>(),
    new Interceptor<TransparentProxyInterceptor>()); 
```

或者通过配置文件：

```
<unity>
    <sectionExtension type="Microsoft.Practices.Unity.InterceptionExtension.Configuration.InterceptionConfigurationExtension, Microsoft.Practices.Unity.Interception.Configuration" />
    <namespace name="LoggingCallHandler" />
    <assembly  name="LoggingCallHandler" />
    <container>
        <extension type="Interception" />
        <extension type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.Unity.EnterpriseLibraryCoreExtension, Microsoft.Practices.EnterpriseLibrary.Common" />
        <register type="IService" mapTo="Service">
            <interceptor type="TransparentProxyInterceptor" />
            <policyInjection />
        </register>
    </container>
</unity> 
```

这里`LoggingCallHandler`是您的服务类的命名空间/程序集。或者，您可以像这样定义您的类型别名：

```
<alias alias="Service" type="LoggingCallHandler.Service, LoggingCallHandler"/>
<alias alias="IService" type="LoggingCallHandler.IService, LoggingCallHandler"/> 
```

有关完整配置，包括日志块配置，请参阅[此](http://entlib.codeplex.com/discussions/439252)或[此](http://entlib.codeplex.com/discussions/349785)讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:18:16.620

您可以编写一个[OnMethodBoundaryAspect来使用](http://doc.postsharp.net/postsharp-3.0/##PostSharp-3.0.chm/html/T_PostSharp_Aspects_OnMethodBoundaryAspect.htm)[PostSharp](http://www.postsharp.net/) API拦截您的方法调用。
[OnMethodBoundaryAspect.OnEntry](http://doc.postsharp.net/postsharp-3.0/##PostSharp-3.0.chm/html/M_PostSharp_Aspects_OnMethodBoundaryAspect_OnEntry.htm)方法包括[MethodExecutionArgs](http://doc.postsharp.net/postsharp-3.0/##PostSharp-3.0.chm/html/T_PostSharp_Aspects_MethodExecutionArgs.htm)参数，该参数提供您需要的有关方法及其参数的所有信息。

有关非常接近您的要求的示例日志记录方面实现， 请参阅[这篇文章。](http://intelligence4.wordpress.com/2011/01/25/non-intrusive-logging-with-postsharp-and-entlib-v5/)

```
// This method is executed before the execution of target methods of this aspect. 
public override void OnEntry( MethodExecutionArgs args )
{
    // Build method information to log.
    string methodInfo = BuildMethodInformation(args.Arguments);

    // continue with your logging...
} 
```

您可以通过MethodExecutionArgs 参数的[Arguments](http://doc.postsharp.net/postsharp-3.0/Default.aspx##PostSharp-3.0.chm/html/AllMembers_T_PostSharp_Aspects_MethodExecutionArgs.htm)成员获取方法参数，如下所示：

```
private string BuildMethodInformation(Arguments arguments)
{
    var sb = new StringBuilder();
    sb.Append(_methodName);
    foreach (var argument in arguments.ToArray())
    {
        sb.Append(arguments.GetArgument( i ) ?? "null");
    }
    return sb.ToString();
} 
```

对于方法参数，请检查[此](http://doc.postsharp.net/postsharp-3.0/##PostSharp-3.0.chm/html/952d27f4-3322-4aac-b1be-b3929e245de3.htm)或[此](http://www.postsharp.net/blog/post/SOLID-Caching.aspx)示例。它们是为缓存而构建的，但 BuildCacheKey/GetCacheKey 方法包括获取方法的参数信息所需的所有信息。

# php - Laravel：如何路由到公共文件

> ID：15836443
> 
> 赞同：13
> 
> 时间：2013-04-05T14:25:37.040
> 
> 标签：php, routes, laravel

在 Laravel 中，**是否可以**`public/testFile.php`通过路由重定向到 a ？

在`application/routes.php`,

```
Route::get('/', function()
{
    //'How to point to public/testFile.php'

}); 
```

*有一个现有的项目，但只想做 Laravel 中的新模块。所以复制了公共/下的现有项目*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T14:50:44.373

你这样做完全违背了框架的目的，但如果你真的想......

```
Route::get("/", function() {
    ob_start();
    require(path("public")."testFile.php");
    return ob_get_clean();
}); 
```

这将返回文件的标准输出。相反，如果脚本中已经有返回值，请退出`ob_start`并`return`调用。

重定向如下：

```
Route::get("/", function() { return Redirect::to("testFile.php"); }); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T14:47:24.100

```
Route::get('/', function()
{
    include public_path().'testFile.php';
}); 
```

如果要**重定向**，请使用`return Redirect::to('testFile.php')`

但我不明白你为什么要做这种**奇怪**的事情。

我认为您正在使用 Laravel 3（正如您提到的`application/...`），`public_path()`有`path('public')`.

# asp.net - String Builder Append 函数截断第一个字符

> ID：15836444
> 
> 赞同：0
> 
> 时间：2013-04-05T14:25:46.053
> 
> 标签：asp.net, vb.net, append, stringbuilder

我在这里的一个项目中使用了带有嵌套循环的 stringbuilder，我的 append 语句似乎只从我的一个列值中删除了第一个字符值。这是循环

```
For Each dr As System.Data.DataRow In gridData.Rows
            I = X.CreateElement("I")
            B.AppendChild(I)

            Dim sb As New StringBuilder

            sb.Append("|P|")
            For Each dc As DataColumn In dr.Table.Columns

                ''for ticker value, since it's a link, we need to add a character to the beginning of the value otherwise, the 1st character in
                ''in the ticker gets truncated. This was recommended by the folks at Treegrid. Only for "link" type columns. 
                ''Same goes for hhname. PD 11.11.2010
                ''Need to replace null values with space as it creates an issue on the UI with cerain browser versions in that the cell borders disappear.
                ''By placing in a blank space, it resolves any issues. Another recommendation by treegrid.
                If dc.ColumnName.ToUpper = "VCHTICKER" OrElse dc.ColumnName.ToUpper = "VCHHHNAME" Or dc.ColumnName.ToUpper = "ACNTNUM" Or dc.ColumnName.ToUpper = "STATEMENTGROUP" Or dc.ColumnName.ToUpper = "VCHSSNUMBER" Or dc.ColumnName.ToUpper = "VCHLINKLABEL" Or dc.ColumnName.ToUpper = "CACCOUNTNUM" Or dc.ColumnName.ToUpper = "VCHSECURITY_SYMBOL" Then
                    If dc.ColumnName.ToUpper = "CACCOUNTNUM" Or dc.ColumnName.ToUpper = "VCHSECURITY_SYMBOL" Then
                        sb.Append(IIf(IsDBNull(dr.Item(dc.ColumnName)), "~&nbsp;", dr.Item(dc.ColumnName).ToString).ToString & "|")
                    Else
                        sb.Append(IIf(IsDBNull(dr.Item(dc.ColumnName)), "~&nbsp;", "~" & dr.Item(dc.ColumnName).ToString).ToString & "|")
                    End If

                ElseIf dc.ColumnName.ToUpper = "GROUP1" Then
                    If ((dr.Item("IHHID").ToString.Length > 0) And (dr.Item("IHHID").ToString <> "0")) Then
                        sb.Append(IIf(IsDBNull(dr.Item(dc.ColumnName)), "~&nbsp;", "~" & dr.Item(dc.ColumnName).ToString).ToString & "|")
                    Else
                        sb.Append(NullConvert.ToString(dr.Item(dc.ColumnName)) & "|")
                    End If
                Else

                    'sb.Append(IIf(IsDBNull(dr.Item(dc.ColumnName)), "~&nbsp;", dr.Item(dc.ColumnName)).ToString & "|")
                    sb.Append(NullConvert.ToString(dr.Item(dc.ColumnName)) & "|")
                End If

            Next dc

            Dim XMLString As String = sb.ToString.Substring(0, sb.ToString.Length - 1)
            Dim descText As XmlText = X.CreateTextNode(sb.ToString)

            I.AppendChild(descText)

            icount += 1

            If icount > Constants.MAX_RECORDS Then
                Exit For
            End If

        Next dr 
```

我遇到的问题位于此处；

```
If dc.ColumnName.ToUpper = "CACCOUNTNUM" Or dc.ColumnName.ToUpper = "VCHSECURITY_SYMBOL" Then
                        sb.Append(IIf(IsDBNull(dr.Item(dc.ColumnName)), "~&nbsp;", dr.Item(dc.ColumnName).ToString).ToString & "|")
                    Else
                        sb.Append(IIf(IsDBNull(dr.Item(dc.ColumnName)), "~&nbsp;", "~" & dr.Item(dc.ColumnName).ToString).ToString & "|")
                    End If 
```

而不是保存 dr.Item 的值，因为它应该像这样的“HSC01234”它保存为“SC01234”，结束空格和前导字符被删除。在这种情况下，这些值永远不会为 NULL，因此“~nbsp;” 不会被击中。任何帮助表示赞赏。谢谢你，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:57:00.943

我发现有另一个函数通过 javascript 在值上播放，该函数正在截断并修复它，谢谢你们的帮助，抱歉这个开放式问题

# c# - 使用c#动态重命名xmlnodes

> ID：15836445
> 
> 赞同：2
> 
> 时间：2013-04-05T14:25:57.830
> 
> 标签：c#, asp.net, xml, xmldocument

我正在使用以下代码动态重命名 xmlnode 名称。虽然 xml 循环很好，但它不会更改节点名称。请帮助我做到这一点。

示例 XML 文档

```
- <NewDataSet>
- <Table5>
  <FLD_ID>62</FLD_ID> 
  <FLD_DATE>2013-03-12</FLD_DATE> 
  <FLD_MOD_DATE>2013-04-05</FLD_MOD_DATE> 
  <FLD_DESC>New Creation</FLD_DESC> 
  </Table5>
- </NewDataSet> 
```

需要的 XML 文档

```
- <rows>
- <row>
  <cell>62</cell> 
  <cell>2013-03-12</cell> 
  <cell>2013-04-05</cell> 
  <cell>New Creation</cell> 
  </row>
- </rows> 
```

我的代码在这里

```
XmlNode PackageListNode = hst_doc.SelectSingleNode("NewDataSet");
                XmlNodeList PackageNodeList = PackageListNode.SelectNodes("Table5");

                foreach (XmlNode node in PackageNodeList)
                {
                    node.Name.Replace("Table5", "row");

                    foreach (XmlNode ls in node)
                    {
                        ls.Name.Replace(ls.Name, "cell");

                    }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:19:40.780

由于您无法在`XmlDocument`... ...中替换元素名称，因此针对您的特定情况的替换方法：

```
string srcXML = "<NewDataSet><Table5><FLD_ID>62</FLD_ID><FLD_DATE>2013-03-12</FLD_DATE><FLD_MOD_DATE>2013-04-05</FLD_MOD_DATE><FLD_DESC>New Creation</FLD_DESC></Table5></NewDataSet>";
var doc = new XmlDocument();
doc.LoadXml(srcXML);

XmlNode oldRoot = doc.SelectSingleNode("NewDataSet");
XmlNode newRoot = doc.CreateElement("rows");
doc.ReplaceChild(newRoot, oldRoot);

foreach (XmlNode childNode in oldRoot.ChildNodes)
{
    newRoot.AppendChild(childNode.CloneNode(true));
}

XmlNodeList PackageNodeList = newRoot.SelectNodes("Table5");

foreach (XmlNode node in PackageNodeList)
{
    var newNode = doc.CreateElement("row");
    newRoot.ReplaceChild(newNode, node);

    foreach (XmlNode childNode in node.ChildNodes)
    {
        var clonedChildNode = childNode.CloneNode(true);
        newNode.AppendChild(clonedChildNode);

        var newChildNode = doc.CreateElement("cell");
        newNode.ReplaceChild(newChildNode, clonedChildNode);

        foreach (XmlNode childChildNode in clonedChildNode.ChildNodes)
        {
            newChildNode.AppendChild(childChildNode.CloneNode(true));
        }                    
    }
}

Debug.Print(doc.OuterXml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:29:32.907

拥抱 LINQ，拥抱它！

```
// load the document from a file
var doc = XDocument.Load(xmlPath);
var root = doc.Root;

// replace the root element with a new element
root.ReplaceWith(

    // create a new element with
    // the name "rows" with new children
    new XElement("rows",

        // replace all child elements of
        // the root with new elements
        root.Elements().Select(table =>

            // replace the current element with a new element
            // with the name "row" with the new children
            new XElement("row",

                // replace all child elements of the
                // current element with new elements
                table.Elements().Select(field =>

                    // replace the current element with a new element
                    // with the name "cell" with the same value
                    new XElement("cell",
                        (string)field
                    )
                )
            )
        )
    )
);

// save the document back to the file
doc.Save(xmlPath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:30:27.823

String.Replace 返回一个新字符串，所以当然会喜欢：

```
node.Name = node.Name.Replace("Table5", "row"); 
```

这也可能是

```
node.Name = "row"; 
```

但是，如果您查看文档，它说 XmlNode.Name 纯粹是“getter”而不是“setter”，因此您*可能*需要创建全新的节点来替换它们，这取决于实际的实现，因为XmlNode 是一个抽象类。

```
 for (int i = 0; i < PackageNodeList.Count; ++i) XmlNode node in PackageNodeList)
            {
                XmlNode replacementNode = new XmlNode("row");

                foreach (XmlNode ls in node)
                {
                    XmlNode newCell = new XmlNode("cell");
                    newCell.Value = ls.Value;
                    replacementNode.AppendChild(newCell);
                }
                PackageNodeList[i] = replacementNode
                PackageNodeList[i].ParentNode.ReplaceChild(PackageNodeList[i], replacementNode);
    } 
```

# r - 返回向量的 data.table 聚合，例如 scale()

> ID：15836452
> 
> 赞同：4
> 
> 时间：2013-04-05T14:26:11.740
> 
> 标签：r, data.table

我最近一直在处理更大的数据集，并开始学习并迁移到 data.table 以提高聚合/分组的性能​​。我无法按预期对某些表达式或函数进行分组。这是我遇到问题的基本分组操作示例。

```
library(data.table)
category <- rep(1:10, 10)
value <- rnorm(100)
df <- data.frame(category, value)
dt <- data.table(df) 
```

如果我想简单地按类别计算每个组的平均值。这很容易工作。

```
dt[,mean(value),by="category"]

    category          V1
 1:        1 -0.67555478
 2:        2 -0.50438413
 3:        3  0.29093723
 4:        4 -0.41684790
 5:        5  0.33921764
 6:        6  0.01970997
 7:        7 -0.23684245
 8:        8 -0.04280998
 9:        9  0.01838804
10:       10  0.44295978 
```

如果我尝试使用 scale 函数，甚至是从自身减去值的简单表达式，我就会遇到问题。分组被忽略，我将函数/表达式应用于每一行。以下按类别返回所有 100 行而不是 10 行。

```
dt[,scale(value),by="category"]

dt[,value-mean(value),by="category"] 
```

我认为将比例重新创建为返回数字向量而不是矩阵的函数可能会有所帮助。

```
zScore <- function(x) {
  z=(x-mean(x,na.rm=TRUE))/sd(x,na.rm = TRUE)
  return(z) 
}

dt[,zScore(value),by="category"]

  category          V1
  1:        1 -1.45114132
  2:        1 -0.35304528
  3:        1 -0.94075418
  4:        1  1.44454416
  5:        1  1.39448268
  6:        1  0.55366652
  ....
 97:       10 -0.43190602
 98:       10 -0.25409244
 99:       10  0.35496694
100:       10  0.57323480
     category          V1 
```

这还会返回应用于所有行 (N=100) 并忽略分组的 zScore 函数。为了让 scale() 或自定义函数像上面使用 mean() 时那样使用分组，我缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:03:56.553

您已在评论中澄清您希望与以下相同的行为：

```
ddply(df,"category",transform, zscorebycategory=zScore(value)) 
```

这使：

```
 category       value zscorebycategory
1          1  0.28860691       0.31565682
2          1  1.17473759       1.33282374
3          1  0.06395503       0.05778463
4          1  1.37825487       1.56643607
etc 
```

您提供的数据表选项给出：

```
 category          V1
  1:        1  0.31565682
  2:        1  1.33282374
  3:        1  0.05778463
  4:        1  1.56643607
  etc 
```

这是完全相同的数据。但是，您还想`value`在结果中重复该列，并`V1`使用更具描述性的名称重命名变量。data.table 为您提供结果中的分组变量，以及您提供的表达式的结果。因此，让我们修改它以提供您想要的行：

您的

```
dt[,zScore(value),by="category"] 
```

变成：

```
dt[,list(value=value, zscorebycategory=zScore(value)),by="category"] 
```

列表中的命名项目成为结果中的列。

```
plyr = data.table(ddply(df,"category",transform, zscorebycategory=zScore(value)))
dt   = dt[,list(value=value, zscorebycategory=zScore(value)),by="category"]
identical(plyr, dt)
> TRUE 
```

（注意我将您的 ddply data.frame 结果转换为 data.table，以允许`identical`命令工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:18:06.777

您声称 data.table 不分组的说法是错误的：

```
library(data.table)
category <- rep(1:2, each=4)
value <- c(rep(c(1:2),each=2),rep(c(4,10),each=2))
dt <- data.table(category, value)

   category value
1:        1     1
2:        1     1
3:        1     2
4:        1     2
5:        2     4
6:        2     4
7:        2    10
8:        2    10

dt[,value-mean(value),by=category]
   category   V1
1:        1 -0.5
2:        1 -0.5
3:        1  0.5
4:        1  0.5
5:        2 -3.0
6:        2 -3.0
7:        2  3.0
8:        2  3.0 
```

如果您想缩放/转换，这正是您想要的行为，因为这些操作根据定义返回与输入大小相同的对象。

# c++ - 访问数组中对象的成员函数

> ID：15836455
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:26:31.840
> 
> 标签：c++, arrays, function

我有一个充满了我创建的类的对象的数组。我想访问他们每个人的功能，但我不知道如何。我用指针试过了，但没有用。抱歉这个问题是noobie，我是初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:30:12.267

您应该能够像访问任何其他对象一样访问数组元素：

```
MyClass array[42];
array[12].do_something(); 
```

如果这不是您想要做的，那么请更详细地描述您正在做的事情（最好使用示例代码），以及出了什么问题（包括您收到的任何错误消息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:38:44.240

你说你用指针尝试过，但它没有用，对于指针，你使用类似这样的东西

```
MyClass *array[23]; // or MyClass **array if you don't want to specify the static size of that array

for( unsigned int i = 0; i < 23; i++ )
{
   array[i] = new MyClass();
}

for( unsigned int i = 0; i < 23; i++ )
{
   array[i]->doSomething();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:30:22.737

那么`myArray[index].foo()`for 循环有什么问题呢？

# javascript - 开放社交通知

> ID：15836458
> 
> 赞同：0
> 
> 时间：2013-04-05T14:26:47.637
> 
> 标签：javascript, xml, opensocial

我最近一直在使用 opensocial，但在使用通知时遇到了麻烦。

我的代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<Module>
 <ModulePrefs title="Notifications" description="" height="300">
 <Require feature="opensocial-0.8"/>
</ModulePrefs>

<Content type="html">
<![CDATA[ 
    <script type="text/javascript">
        function sendNotification(title, body) {
            var params = {};
            params[opensocial.Message.Field.TITLE] = title;
            params[opensocial.Message.Field.TYPE] = opensocial.Message.Type.NOTIFICATION;
            var message = opensocial.newMessage(body, params);
            var recipient = "VIEWER";
            opensocial.requestSendMessage(recipient, message, callback);
        };

        function callback(data) {
            if (data.hadError()) {
                alert("There was a problem:" + data.getErrorCode());
            } else {
                alert("Ok");
            }
        };
        sendNotification("This is a test notification", "How are you doing?");
    </script>
]]>
</Content>
</Module> 
```

当我安装并运行这个小工具时，我没有收到任何警报或通知，我很困惑！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T16:25:35.303

为了发送通知（例如 - 向朋友发送应用请求），我使用这个：

```
 var params = {};
    params[opensocial.Message.Field.TITLE] = response.response.title;
    var msg = opensocial.newMessage("Test request", params);
    opensocial.requestShareApp("VIEWER_FRIENDS", msg, function (data) { ... } 
```

据我所知，OpenSocial 是谷歌产品，一些文档可以在 GoogleDocs 中找到。这里[https://developers.google.com/orkut/docs/on-site-apps/people#viewer_owner](https://developers.google.com/orkut/docs/on-site-apps/people#viewer_owner)描述了 VIEWER 和 OWNER。想想，你不应该使用 VIEWER 作为收件人。

# ruby-on-rails - 使用延迟作业时自动定位图像

> ID：15836464
> 
> 赞同：4
> 
> 时间：2013-04-05T14:27:07.987
> 
> 标签：ruby-on-rails, imagemagick, paperclip, carrierwave, delayed-job

我有一个照片共享应用程序，允许用户拖放图像，然后在延迟作业中处理这些图像并显示在画廊中。我在解决[iPhone 图片上的方向问题时](http://pleaselistencarefully.com/Why-photo-rotation-is-broken-on-the-iphone-4-and-how-to-fix-it-using-paperclip-on-heroku)遇到了一些问题。我有以下代码：

**初始化程序/auto_orient.rb**

```
module Paperclip
  class AutoOrient < Paperclip::Processor 
    def initialize(file, options = {}, *args)
      @file = file
    end

    def make( *args )
      dst = Tempfile.new([@basename, @format].compact.join("."))
      dst.binmode

      Paperclip.run('convert',"#{File.expand_path(@file.path)} -auto-orient #{File.expand_path(dst.path)}")

      return dst
    end
  end
end 
```

**模型/图片.rb**

```
class Picture < ActiveRecord::Base

  belongs_to :gallery

  before_create :generate_slug
  after_create :send_to_delayed_job

  validates :slug, :uniqueness => true

  scope :processing, where(:processing => true)

  attr_accessible :image

  has_attached_file :image,
  :styles => {
    :huge => "2048x1536>",
    :small => "800x600>",
    :thumb => "320x240>"
  },
  :processors => [:auto_orient, :thumbnail]

  before_post_process :continue_processing

  ...

  def process
    self.image.reprocess!
    self.processing = false
    self.save(:validations => false)
  end

  private

  def continue_processing
    if self.new_record?
      !self.processing
    end
  end

  def send_to_delayed_job
    Delayed::Job.enqueue ImageProcess.new(self.id), :queue => 'paperclip'
  end
end 
```

**模型/image_process.rb**

```
class ImageProcess < Struct.new(:picture_id)

  def perform
    picture = Picture.find(self.picture_id)
    picture.process
  end

end 
```

如果我注释掉这些行`after_create :send_to_delayed_job`，`before_post_process`即当场完成处理，则自动定位过程有效。但是，当我完成延迟工作时，不会发生自动定位，只是调整大小。

有没有人有任何想法？

**编辑**

它变得陌生。我搬到了 Carrierwave 和carrierwave_backgrounder gem。现在忽略后台任务，我的内容如下`image_uploader.rb`：

```
def auto_orient
  manipulate! do |img|
    img.auto_orient!
    img
  end
end

version :huge do
  process :auto_orient
  process resize_to_fit: [2048,1536]
end 
```

这行得通。图像方向正确。

现在，如果我按照载波 wave_backgrounder 的说明添加`process_in_background :image`到我的`picture.rb`文件中，auto_orient 将不起作用。

我现在要试试这个`store_in_background`方法，看看是否有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T05:16:08.353

我注意到你`attr_accessible`的图片模型中有。我最近一直在使用 Delayed_Job，经过数小时的努力，我发现它与`attr_accessible`. 不过，有一些解决方法。

更多信息在[这里](https://groups.google.com/forum/?fromgroups=#!topic/delayed_job/YLauVaMwTAg)（尽管您可以谷歌了解更多关于该主题的信息）

# jquery - 如何使用 jquery 添加 erroricon 和自定义验证消息？

> ID：15836465
> 
> 赞同：1
> 
> 时间：2013-04-05T14:27:10.867
> 
> 标签：jquery, jquery-validate

我想使用 Jquery 插件添加错误图标和自定义验证消息。像这样

![在此处输入图像描述](https://i.stack.imgur.com/ERjga.png)

这是我的html代码，

```
 <input type="text" id="firstName" name="firstName" class="required" />
    <input type="text" name="lastName" class="required" /> <br>

    <input id="email" type="text" name="email" class="required" /> <br> 
```

这是我的 HTML 代码，

我尝试过使用 errorPlacement 函数，但是由于某种原因，我无法在控件下方收到错误消息。我已经使用 prepentTo、appendTo、所有 jquery 函数来执行此操作。但没有运气！

```
function validateForm(){

            $("#register").validate({

                rules: {
                    firstName: {
                        required: true,
                        minlength: 2
                    }
                },
                    errorPlacement: function(error, element) {
                        error.insertAfter(element); 

                    },

            });
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:57:14.437

从选项[文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)中，您可以传递给验证功能

```
errorPlacement: function(error, element) {
  error.appendTo( element.parent("td").next("td") );
} 
```

所以你的代码应该是：

```
errorPlacement: function(error, element) {
  error.appendTo(element.parent()); 
} 
```

或类似的东西。

然后你可以使用**wrapper**属性来为你的错误指定一个容器。

此外，您可以使用**errorClass**属性来更改错误类。

您可以使用**messages**属性来设置自定义消息。

然后你必须为你选择的选择器指定规则。

你也可以看看[这里](http://docs.jquery.com/Plugins/Validation)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:21:42.953

> 由于某种原因，我无法在控件下方收到错误消息。

默认情况下，错误消息放在`label`作为内联元素的 a 中。

使用[该`errorElement`选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)将其更改为块级元素，它将自动换行。

**见：http: [//jsfiddle.net/kH9NL/](http://jsfiddle.net/kH9NL/)**

```
$(document).ready(function () {

    $('#myform').validate({ 
        errorElement: "div",
        rules: {
            field1: {
                required: true
            },
            field2: {
                required: true
            }
        }
    });

}); 
```

您必须使用`highlight`和`unhighlight`回调函数来操作图标的放置和切换。

这个答案提供了一个使用这两个回调函数的具体示例：

[https://stackoverflow.com/a/14900826/594235](https://stackoverflow.com/a/14900826/594235)

# java - sendBroadcast 无法从 WorkerThread 工作

> ID：15836472
> 
> 赞同：0
> 
> 时间：2013-04-05T14:27:28.607
> 
> 标签：java, android, android-intent, handler

我想使用以下方法从 FromTowerThread 发送广播：

```
void postToService(final String string){
        Handler handler = new Handler();
        handler.post(new Runnable(){
             @Override
             public void run() {
                 context.sendBroadcast(new Intent(string));
             }
        });
    } 
```

我的上下文是“这个”（我的服务）：

```
FromTowerThread ftt = new FromTowerThread(this); 
```

（只是为了完整起见，我在 FromTowerThread 中的构造函数）：

```
public FromTowerThread(Context context){
      this.context=context;
    } 
```

我得到的错误是“无法在未调用 Looper.prepare() 的线程内创建处理程序”。

我不知道如何解决这个错误，我发现的关于这个主题的所有线程都无法帮助我理解这一点。

提前致谢！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:35:04.820

> 我得到的错误是“无法在未调用 Looper.prepare() 的线程内创建处理程序”。

如果您正在扩展 Thread，请尝试扩展[HandlerThread](https://developer.android.com/reference/android/os/HandlerThread.html)。一个 HandlerThread 已经有一个 Looper。（或者您可以在常规线程中调用`Looper.prepare()`和自己。）`Looper.loop()`

否则你可以做一些事情来使用主线程的 Looper。例如，在主线程中创建处理程序并将其传递给您的工作线程，甚至从 UI 线程传递一个视图并调用`view.post(Runnable)`以在 UI 线程上执行该 Runnable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:35:14.103

Post 只能从调用 Looper.prepare() 的线程中的 Handler 完成。

我在这里假设调用的线程`void postToService(final String string)`是某种类型的后台线程。通常 UI 线程确实调用`Looper.prepare()`意味着您必须在 UI 线程内创建处理程序。

但作为一般建议，我很确定您可以消除所有这些并立即调用广播：

```
void postToService(final String string){
      context.sendBroadcast(new Intent(string));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:42:59.393

更改声明

```
Handler handler = new Handler(); 
```

到

```
Handler handler = new Handler(Looper.getMainLooper()); 
```

# php - 4个表sql连接

> ID：15836477
> 
> 赞同：1
> 
> 时间：2013-04-05T14:27:34.523
> 
> 标签：php, sql

几乎尝试了 1 小时，但无法修复。

我有一个这样的数据库。

类别

*   猫
*   猫名

子类别

*   亚猫
*   子目录名
*   猫

标签

*   英吉
*   亚猫

颜色

*   imgid
*   颜色

我有很多图像让我们用 imgid 1 拍摄图像 1

类别

*   猫
    **2**
*   猫名
    **技术**

子类别

*   子类别
    **3**
*   子目录名
    **自行车**
*   猫
    **3号**

标签（我们在 img 1 上有 2 个标签）

*   立即 **1**

*   子类别 **3**

*   立即 **1**

*   subcatid **4** 颜色

*   imgid **1**

*   蓝色 **_**

所以 1 张图片可以有多个子类别，如自行车和汽车（图片上有自行车和汽车），所以 2 个标签 1 张图片。

我现在想做的是我从类别 2 中获得所有蓝色的 imgid（我知道我可以使用 colorid 并将 colorname 添加到 colorid 但让我们使用 colornames 让它更容易一些）

但我只想要每个 imgid 1 次。所以我想做的是一个查询，比如我是否在页面 Category?id=1?color=blue

我得到 catid =1 和 color=blue

首先，我需要获取具有 catid =1 的 subcatid

然后我需要获取标签 = sucatid 和颜色 = 蓝色的 imgid

之后我只想要独特的价值观

所以 Imgid 1 被返回 1 次。

最重要的是，一切都在 php 中！

我希望有人能以正确的方式帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:30:13.320

```
$resultimg = mysql_query("SELECT DISTINCT * FROM Category 
            JOIN SubCategory
            ON Category.CatId = SubCategory.CatId
            LEFT JOIN Color
            ON Color.imgid=SubCategory.imgid
            LEFT JOIN Tags
            ON Tags.subcatid=SubCategory.subcatid
            WHERE Color.color = '".$color."' AND Categorie.CatId = ".$CatId); 
```

# .htaccess - 如何防止 mod_rewrite 接受输入错误的 url

> ID：15836479
> 
> 赞同：0
> 
> 时间：2013-04-05T14:27:36.120
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

首先，我查看[了 mod_rewrite - 如何重定向错误输入的“漂亮”url](https://stackoverflow.com/questions/8190661/)，但是 OP 希望他的错误输入的 URL 重定向到正确的，我只是想让我的错误 404。

快速提问。我正在寻找一种解决方案来改进我拥有的一些 mod re_write 代码。

目前，如果有人在我的网站上输入一个产品页面的 URL，即“/products/[category]/[product-name]”，.htaccess 文件具有以下代码

```
RewriteRule ^products\/([^/]+)\/([^/]+)$        ?page=product&product=$2 [L] 
```

这完全符合预期，但是如果有人仅输入错误的 [产品名称]，模板页面仍会使用 URL 中的产品名称作为变量加载，并且不会出现 404 错误。

我处理所有错误页面，如下所示：

```
#ErrorDocument 404          /index.php?page=error404 
```

希望有人可以阐明如何调整以前的重写规则，以便页面不存在即如果我们有一个名为kettle的产品并且有人在URL末尾键入ketle，它将是404而不是仍然加载模板页面用ketle作为GET var。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:49:15.260

我假设您的`index.php`脚本处理“页面”和“产品”参数。它将是唯一知道“产品”参数是否实际指向有效产品名称的人。如果没有，则需要使用[header](http://php.net/manual/en/function.header.php)函数生成404，然后显示`page=error404`.

htaccess 文件和 mod_rewrite 不会知道页面名称是正确还是输入错误，只有执行查找的脚本会知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:20:36.170

您甚至可以将 PHP 脚本写入动态页面的*<head>*元素中，以这种格式为例：

```
$con = mysqli_connect("$hostname", "$username", "$password", "$database");

if (mysqli_connect_errno()) {
    echo mysqli_connect_error();
}

$result = mysqli_query($con, "SELECT content FROM pages WHERE id = $value LIMIT 1");

if (0 = mysqli_fetch_array($result)) {
    echo '<meta http-equiv="location" content="URL=http://www.yourdomain.com/index.php?page=error404">';
} 
```

注意：仔细检查上面的代码是否正确，因为它只是一个示例，并没有很好地检查语法以及是否使用*mysqli_fetch_array()**来*计算SQL 查询的*$result上的行数。*

# java - 检查所有变量的值是否不同的好方法

> ID：15836481
> 
> 赞同：2
> 
> 时间：2013-04-05T14:27:42.450
> 
> 标签：java, algorithm

考虑 9 个变量，每个变量的值可以从 1 到 9。什么是检查每个变量是否具有不同值的好且快速的方法。我想到的第一个想法是总结它们，看看它是否等于，`n(n+1)/2`但这绝非万无一失。有任何想法吗？

编辑：非常感谢大家。完全忘记了赛特。我真是个菜鸟。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T14:30:08.133

将它们全部添加到一个 Set 中，并检查 Set 的大小是否为 9。

例如，要检查 9 个数组`int`是否都不同：

```
int[] array = new int[9];
// fill array
Set<Integer> set = new HashSet<Integer>();
for (int i : array)
    set.add(i);
boolean allDistinct = set.size() == 9; 
```

集合完成所有工作，因为集合只允许添加不同的值。如果任何值相同，则大小将小于 9。

这种技术适用于任何类型的值类型、任何范围和任何数量的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T14:30:44.077

从设置位 0 到 9 的位掩码开始，然后清除与每个变量的值对应的位。如果生成的位掩码是 2 的幂，则所有值都是不同的^+；否则，有重复。

```
int a, b, c, d, e, f, g, h, i;
int mask = 0x3FF; // bits zero through 9 are set
mask &= ~(1<<a);
mask &= ~(1<<b);
...
mask &= ~(1<<i);
if ((mask & -mask) == mask) {
    // all bits were distinct
} 
```

有关最后一个条件中使用的位技巧的解释，请参[见此答案](https://stackoverflow.com/a/7405513/335858)。

* * *

^+你有十个可能的值和九个变量；为了使这九个值不同，它们必须从最初设置所有十位的位掩码中清除十位中的九位。删除十分之九的位只剩下一位设置为`1`，这意味着结果是 2 的幂。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T14:32:05.283

使用 XOR 查找重复数字是一个技巧。

```
int[] arr = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 5, 9 };
int answer = 0;
for (int i = 0; i < arr.length; i++) {
    answer = answer ^ (arr[i] + 1) ^ i;
}
System.out.println(answer - 1); 
```

输出：

```
5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-04T22:18:52.370

此算法适用于任何数字计数，但每个数字必须在区间 <0, 31> 内，或者您可以将区间 <0, 63> 的*掩码*和*位*类型更改为 long。

```
int[] numbers = {0, 1, 2, 3, 3, 5, 6, 7};

int mask = 0;
for (int number : numbers) {
    int bit = 1 << number;

    if ((mask & bit) > 0) {
        System.out.println("Found duplicity " + number);
        return;
    }

    mask |= bit;
}

System.out.println("No duplicity"); 
```

# mysql - 查询以替换表中的空值

> ID：15836482
> 
> 赞同：2
> 
> 时间：2013-04-05T14:27:43.953
> 
> 标签：mysql, sql

我有这样的桌子，

**当前表1**

```
id | car_name | model | year
---+----------+-------+----- 
1  |a         | abc   | 2000
2  |b         | xyx   | 2001
3  |null      | asd   | 2003
4  |c         | qwe   | 2004
5  |null      | xds   | 2005
6  |d         | asd   | 2006 
```

如您所见，我有一些空值，我想用前一行值替换它们。

所以应该变成这样

**所需表1**

```
id | car_name | model | year
---+----------+-------+----- 
1  |a         | abc   | 2000
2  |b         | xyx   | 2001
3  |b         | asd   | 2003
4  |c         | qwe   | 2004
5  |c         | xds   | 2005
6  |d         | asd   | 2006 
```

我用谷歌搜索，但没有找到任何解决方案。

任何建议总是受欢迎的。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:06:08.757

即使一行中有几条记录，此查询也应该有效`NULL`

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/60cfd/1)**

```
UPDATE Table1
SET car_name = (SELECT t1.car_name
                FROM (SELECT * FROM Table1) t1
                WHERE t1.id < Table1.id
                AND t1.car_name is not null
                ORDER BY t1.id DESC
                LIMIT 1)
WHERE car_name is null 
```

结果：

```
| ID | CAR_NAME | MODEL | YEAR |
--------------------------------
|  1 |        a |   abc | 2000 |
|  2 |        b |   xyx | 2001 |
|  3 |        b |   asd | 2003 |
|  4 |        c |   qwe | 2004 |
|  5 |        c |   xds | 2005 |
|  6 |        d |   asd | 2006 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:36:00.863

尝试这样的事情：

```
UPDATE Table1 as first
INNER JOIN Table1 as second
    ON second.id = first.id-1
SET first.car_name = second.car_name
WHERE first.car_name IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:43:24.553

通过脚本/程序甚至存储过程来完成它可能会更好，而不是使用 sql 简单地执行它，因为您可以获得处理一些极端情况的额外好处（比如当有两个连续的行时会发生什么空等）而且因为我认为它是一次性的工作。

# c - 如何在 C 中验证 X509 证书

> ID：15836484
> 
> 赞同：9
> 
> 时间：2013-04-05T14:27:45.577
> 
> 标签：c, openssl, certificate, x509certificate, x509

我有 X509 格式的证书。这是函数中的输入参数。我想做的是验证证书的有效性。如何做呢？

```
X509_verify_cert(); 
```

我找到了这个函数，但是它不接受 X509* 证书，它接受 X509_store 而我只有一个 X509。

谢谢最好的问候。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T13:10:34.960

我在这里只是为了发布我的答案，因为我在上面的评论中找到了答案。

我没有证书链，所以在我正在做的工作中，我只有一个由我以编程方式生成的证书。我想检查它的有效性，所以我创建了以下函数，它检查证书本身以验证它的有效性。

```
void check_certificate_validaty(X509* certificate)
{
    int status;
    X509_STORE_CTX *ctx;
    ctx = X509_STORE_CTX_new();
    X509_STORE *store = X509_STORE_new();

    X509_STORE_add_cert(store, certificate);

    X509_STORE_CTX_init(ctx, store, certificate, NULL);

    status = X509_verify_cert(ctx);
    if(status == 1)
    {
        printf("Certificate verified ok\n");
    }else
    {
        printf("%s\n", X509_verify_cert_error_string(ctx->error));
    }
} 
```

希望这可以帮助某人:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-05T15:44:05.233

[请参阅此处](https://www.openssl.org/docs/manmaster/man3/X509_STORE_CTX_new.html)的文档。

您需要使用 X509_STORE_CTX_new 创建证书存储。然后使用 X509_STORE_CTX_set_chain 添加证书链。使用 X509_STORE_CTX_trusted_stack 添加受信任的根证书。最后使用 X509_STORE_CTX_set_cert 添加要验证的证书。

之后调用 X509_verify_cert。

我希望这将帮助您开始。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-28T20:16:45.467

要验证证书签名，您需要颁发者证书的公钥。此颁发者证书的签名已使用另一个颁发者证书（或受信任的根证书）进行验证。因此，如果证书的签名在链上一直验证到受信任的根，则该证书被认为是受信任的。

自签名证书的签名使用自己的公钥进行验证，如下例所示：

```
int verify_cert(const char* pem_c_str)
{
    BIO *bio_mem = BIO_new(BIO_s_mem());
    BIO_puts(bio_mem, pem_c_str);
    X509 * x509 = PEM_read_bio_X509(bio_mem, NULL, NULL, NULL);

    EVP_PKEY *pkey=X509_get_pubkey(x509);
    int r= X509_verify(x509, pkey);
    EVP_PKEY_free(pkey);

    BIO_free(bio_mem);
    X509_free(x509);
    return r;
} 
```

来自：[http ://www.zedwood.com/article/openssl-c-verify-self-signed-certificate-signature](http://www.zedwood.com/article/openssl-c-verify-self-signed-certificate-signature)

# javascript - 在使用 Javascript 时使用 CSS 对 HTML 进行样式设置

> ID：15836489
> 
> 赞同：0
> 
> 时间：2013-04-05T14:27:57.637
> 
> 标签：javascript, html, css

如何将样式代码传输到我的外部 css 文件？`<form>`我认为使用 .gamelist 因为or`<input>`东西是行不通的。我知道我可以将样式保留在 html 文件中，但我希望一切都尽可能整洁有序。

这是html代码：

```
<div id="sidebar">
    <p class="gamelist">
        <FORM>
            <input type="image" src="images/mariosadv.jpg" border="2" style="border:2px solid black;max-width:150px;" value="Enter Protected Area" onClick="passWord()">
        </FORM>
        <FORM>
            <input type="image" src="images/mariosadv2.jpg" border="2" style="border:2px solid black;max-width:150px;" value="Enter Protected Area" onClick="passWord()">
        </FORM>
</div> 
```

这是我的简单 Javascript 函数：

```
function passWord() {
    var testV = 1;
    var pass1 = prompt('Please Enter Your Password',' ');
    while (testV < 3) {
    if (!pass1) 
    history.go(-1);
    if (pass1.toLowerCase() == "letmein") {
    alert('You Got it Right!');
    window.open('mariosadv.html');
    break;
} 
    testV+=1;
    var pass1 = 
    prompt('Access Denied - Password Incorrect, Please Try Again.','Password');
}
    if (pass1.toLowerCase()!="password" & testV ==3) 
    history.go(-1);
    return " ";
} 
```

这是我尝试过的CSS：

```
.gamelist img {
    display: block;
    border: 2px solid black;
    width:150px;
    margin: 5px 0px 5px 0px;
} 
```

这就是我使用 Javascript [http://i.imgur.com/QVc6Dgu.jpg所拥有的](http://i.imgur.com/QVc6Dgu.jpg)

这就是我想要的，但没有 Javascript [http://i.imgur.com/sNX3Els.jpg](http://i.imgur.com/sNX3Els.jpg)

如果需要任何其他信息，请在拒绝我的问题之前询问。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:29:56.600

您需要对`.gamelist [type=image]`而不是进行样式设置`.gamelist img`，因为`img` **唯一**指的是具有该名称的标签（通常不是图像）。

**编辑**这是您的 HTML 的外观：

```
<div class="gamelist">
    <FORM>
        <input type="image" src="images/mariosadv.jpg" value="Enter Protected Area" onClick="passWord()">
    </FORM>
    <FORM>
        <input type="image" src="images/mariosadv2.jpg" value="Enter Protected Area" onClick="passWord()">
    </FORM>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:48:00.423

正如 metadept 所写，您需要使用以下 CSS 选择器：input[type='image']。请注意，`.gamelist input[type='image']`不要选择所需的输入字段，因为它们没有类**gamelist**。

对于 CSS 选择器概述，请使用：[http ://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

并且请不要使用客户端认证！！！

# perl - 为什么撇号在 Perl 中是有效的路径分隔符

> ID：15836490
> 
> 赞同：8
> 
> 时间：2013-04-05T14:27:58.677
> 
> 标签：perl, syntax

在 Perl 中，您使用`::`路径分隔符调用模块。所以，如果你有一个模块`site/lib/GD/Image.pm`，你调用`use GD::Image`.

然而，很久以前我发现你也可以调用`use GD'Image`和类似的东西`my $img = new GD'Image;`，并且在 CPAN 上也有模块在名称/文档上使用该语法。

这背后的目的或逻辑是什么？是不是就像 Perl 中的许多东西一样，只是一个旨在使句子*人性化*并允许您创建和使用像[Acme::Don't](http://search.cpan.org/~dconway/Acme-Don-t-1.00/t.pm)这样的模块的功能？

它有什么不同的意图`::`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T14:32:54.000

有关解释，请参见[perlmod](http://p3rl.org/perlmod)：

> 旧的包分隔符是单引号，但现在双冒号是首选分隔符

所以，原因是历史。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T14:57:30.720

单引号是旧的 ADA 分隔符。但是，它在 Emacs 中表现不佳，因此使用了双冒号。

天哪！艾达？埃马克斯？我老了。

# ruby-on-rails - 将局部变量传递给部分返回 NameError

> ID：15836491
> 
> 赞同：0
> 
> 时间：2013-04-05T14:28:03.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, renderpartial, partials

我正在尝试将某些东西的索引传递给一个部分并得到一个 NameError。

现在，这是我的渲染语句，我可以很好地访问构建器。

```
<%= render 'my_partial', :builder => form_helper %> 
```

但是当添加如下索引时，我得到了错误。

```
<%= render 'my_partial', :builder => form_helper, :locals => {:index => index } %> 
```

有什么想法吗？谢谢！

编辑：

在尝试的同时

```
<%= render :partial => 'my_partial', :locals => {:builder => form_helper, :index => index } %> 
```

具体错误是“#<#:0x007fc37206ae40> 的未定义局部变量或方法‘索引’”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:29:33.407

任何一个：

```
 <%= render 'my_partial', :builder => form_helper, :index => index %> 
```

或者：

```
<%= render :partial => 'my_partial', :locals => {:index => index, :builder => form_helper } %> 
```

# dita - 样式表无法识别空章节

> ID：15836495
> 
> 赞同：1
> 
> 时间：2013-04-05T14:28:18.533
> 
> 标签：dita

DITA-OT：1.7.3

问题：我的自定义样式表中的空白章节出现错误：

`"fo:block-container" is missing child elements. Required content model: marker* (%block;)+`

默认 PDF2 样式呈现良好。

在章节中添加主题会使其消失。该错误仅给了我 topic.fo 的最后一行编号，其列为 0。

这是页面序列（缩进），错误所在的行在 id="d2e394" 之前开始：

```
<fo:page-sequence
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    force-page-count="no-force"
    initial-page-number="1"
    master-reference="body-sequence">
    <fo:static-content
        flow-name="xsl-footnote-separator">
        <fo:block>
            <fo:leader
                color="black"
                leader-length="25%"
                leader-pattern="rule"
                rule-style="solid"
                rule-thickness="0.5pt"/>
        </fo:block>
    </fo:static-content>
    <fo:static-content
        flow-name="odd-body-footer">
        <fo:table
            font-size="8pt"
            space-after="0.5in"
            space-after.conditionality="retain"
            text-align="end"
            line-height-shift-adjustment="disregard-shifts"
            font-family="Helvetica, Arial Unicode MS">
            <fo:table-column
                column-width="40%"/>
            <fo:table-column
                column-width="20%"/>
            <fo:table-column
                column-width="40%"/>
            <fo:table-body>
                <fo:table-row>
                    <fo:table-cell>
                        <fo:block
                            margin-left=".93in"
                            text-align="left">PN: XXXXXX</fo:block>
                    </fo:table-cell>
                    <fo:table-cell>
                        <fo:block
                            text-align="center">
                            <fo:retrieve-marker
                                retrieve-class-name="current-chapter-number"/>-<fo:page-number/>
                        </fo:block>
                    </fo:table-cell>
                    <fo:table-cell>
                        <fo:block
                            margin-right="0.74in"
                            text-align="right">
                            <fo:retrieve-marker
                                retrieve-class-name="current-document-header"/>
                        </fo:block>
                    </fo:table-cell>
                </fo:table-row>
            </fo:table-body>
        </fo:table>
    </fo:static-content>
    <fo:static-content
        flow-name="even-body-footer">
        <fo:table
            font-size="8pt"
            space-after="0.5in"
            space-after.conditionality="retain"
            text-align="end"
            line-height-shift-adjustment="disregard-shifts"
            font-family="Helvetica, Arial Unicode MS">
            <fo:table-column
                column-width="40%"/>
            <fo:table-column
                column-width="20%"/>
            <fo:table-column
                column-width="40%"/>
            <fo:table-body>
                <fo:table-row>
                    <fo:table-cell>
                        <fo:block
                            margin-left=".93in"
                            text-align="left">PN: XXXXXX</fo:block>
                    </fo:table-cell>
                    <fo:table-cell>
                        <fo:block
                            text-align="center">
                            <fo:retrieve-marker
                                retrieve-class-name="current-chapter-number"/>-<fo:page-number/>
                        </fo:block>
                    </fo:table-cell>
                    <fo:table-cell>
                        <fo:block
                            margin-right="0.74in"
                            text-align="right">
                            <fo:retrieve-marker
                                retrieve-class-name="current-document-header"/>
                        </fo:block>
                    </fo:table-cell>
                </fo:table-row>
            </fo:table-body>
        </fo:table>
    </fo:static-content>
    <fo:static-content
        flow-name="odd-body-header">
        <fo:table
            font-size="8pt"
            margin-top="0.50in"
            space-before="10pt"
            space-before.conditionality="retain"
            text-align="end"
            line-height-shift-adjustment="disregard-shifts"
            font-family="Helvetica, Arial Unicode MS">
            <fo:table-column
                column-width="50%"/>
            <fo:table-column
                column-width="50%"/>
            <fo:table-body>
                <fo:table-row>
                    <fo:table-cell
                        display-align="after">
                        <fo:block
                            border-bottom="1pt solid black"
                            margin-left=".93in"
                            text-align="left">
                            <fo:retrieve-marker
                                retrieve-class-name="current-h2"/>
                        </fo:block>
                    </fo:table-cell>
                    <fo:table-cell
                        display-align="after">
                        <fo:block
                            border-bottom="1pt solid black"
                            margin-right="0.74in"
                            text-align="right">
                            <fo:retrieve-marker
                                retrieve-class-name="current-chapter-header"/>
                        </fo:block>
                    </fo:table-cell>
                </fo:table-row>
            </fo:table-body>
        </fo:table>
    </fo:static-content>
    <fo:static-content
        flow-name="even-body-header">
        <fo:table
            font-size="8pt"
            margin-top="0.50in"
            space-before="10pt"
            space-before.conditionality="retain"
            text-align="end"
            line-height-shift-adjustment="disregard-shifts"
            font-family="Helvetica, Arial Unicode MS">
            <fo:table-column
                column-width="50%"/>
            <fo:table-column
                column-width="50%"/>
            <fo:table-body>
                <fo:table-row>
                    <fo:table-cell
                        display-align="after">
                        <fo:block
                            border-bottom="1pt solid black"
                            margin-left=".93in"
                            text-align="left">
                            <fo:retrieve-marker
                                retrieve-class-name="current-h2"/>
                        </fo:block>
                    </fo:table-cell>
                    <fo:table-cell
                        display-align="after">
                        <fo:block
                            border-bottom="1pt solid black"
                            margin-right="0.74in"
                            text-align="right">
                            <fo:retrieve-marker
                                retrieve-class-name="current-chapter-header"/>
                        </fo:block>
                    </fo:table-cell>
                </fo:table-row>
            </fo:table-body>
        </fo:table>
    </fo:static-content>
    <fo:static-content
        flow-name="first-body-header">
        <fo:block
            end-indent="10pt"
            space-before="10pt"
            space-before.conditionality="retain"
            text-align="end"/>
    </fo:static-content>
    <fo:static-content
        flow-name="first-body-footer">
        <fo:table
            font-size="8pt"
            space-after="0.5in"
            space-after.conditionality="retain"
            text-align="end"
            line-height-shift-adjustment="disregard-shifts"
            font-family="Helvetica, Arial Unicode MS">
            <fo:table-column
                column-width="40%"/>
            <fo:table-column
                column-width="20%"/>
            <fo:table-column
                column-width="40%"/>
            <fo:table-body>
                <fo:table-row>
                    <fo:table-cell>
                        <fo:block
                            margin-left=".93in"
                            text-align="left">PN: XXXXXX</fo:block>
                    </fo:table-cell>
                    <fo:table-cell>
                        <fo:block
                            text-align="center">
                            <fo:retrieve-marker
                                retrieve-class-name="current-chapter-number"/>-<fo:page-number/>
                        </fo:block>
                    </fo:table-cell>
                    <fo:table-cell>
                        <fo:block
                            margin-right="0.74in"
                            text-align="right">
                            <fo:retrieve-marker
                                retrieve-class-name="current-document-header"/>
                        </fo:block>
                    </fo:table-cell>
                </fo:table-row>
            </fo:table-body>
        </fo:table>
    </fo:static-content>
    <fo:static-content
        flow-name="last-body-header">
        <fo:block/>
    </fo:static-content>
    <fo:static-content
        flow-name="last-body-footer">
        <fo:table
            font-size="8pt"
            space-after="0.5in"
            space-after.conditionality="retain"
            text-align="end"
            line-height-shift-adjustment="disregard-shifts"
            font-family="Helvetica, Arial Unicode MS">
            <fo:table-column
                column-width="40%"/>
            <fo:table-column
                column-width="20%"/>
            <fo:table-column
                column-width="40%"/>
            <fo:table-body>
                <fo:table-row>
                    <fo:table-cell>
                        <fo:block
                            margin-left=".93in"
                            text-align="left">PN: XXXXXX</fo:block>
                    </fo:table-cell>
                    <fo:table-cell>
                        <fo:block
                            text-align="center">
                            <fo:retrieve-marker
                                retrieve-class-name="current-chapter-number"/>-<fo:page-number/>
                        </fo:block>
                    </fo:table-cell>
                    <fo:table-cell>
                        <fo:block
                            margin-right="0.74in"
                            text-align="right">
                            <fo:retrieve-marker
                                retrieve-class-name="current-document-header"/>
                        </fo:block>
                    </fo:table-cell>
                </fo:table-row>
            </fo:table-body>
        </fo:table>
    </fo:static-content>
    <fo:flow
        flow-name="xsl-region-body">
        <fo:marker
            marker-class-name="current-topic-number">6</fo:marker>
        <fo:marker
            marker-class-name="current-chapter-header">test</fo:marker>
        <fo:marker
            marker-class-name="current-document-header">
            <fo:block
                font-size="inherit"
                start-indent="0in">
                <fo:inline
                    border-left-width="0pt"
                    border-right-width="0pt">
                    <fo:inline
                        border-left-width="0pt"
                        border-right-width="0pt">bookmeta/shortdesc<fo:inline
                            baseline-shift="20%"
                            font-size="75%"
                            line-height-shift-adjustment="disregard-shifts"><fo:inline
                                line-height="100%"
                                font-family="Helvetica, Arial Unicode MS"
                                baseline-shift="20%"
                                font-size="smaller">®</fo:inline>
                        </fo:inline>
                    </fo:inline> test</fo:inline>
            </fo:block>
        </fo:marker>
        <fo:block
            font-size="10pt"
            id="d2e394"
            space-after="0.25in"
            line-height-shift-adjustment="disregard-shifts"
            font-family="Helvetica, Arial Unicode MS">
            <fo:marker
                marker-class-name="current-chapter-number">6</fo:marker>
            <fo:marker
                marker-class-name="bookmap-partno"/>
            <fo:table
                table-layout="fixed">
                <fo:table-column
                    column-width="0.75in"/>
                <fo:table-column/>
                <fo:table-body>
                    <fo:table-row>
                        <fo:table-cell
                            display-align="after">
                            <fo:block
                                border-bottom="3pt solid black"
                                border-bottom-style="solid"
                                border-bottom-width="2pt"
                                border-top-style="none"
                                border-top-width="2pt"
                                break-before="auto"
                                font-size="18pt"
                                font-weight="bold"
                                keep-with-next.within-column="always"
                                padding-top="10pt"
                                space-after="16.8pt"
                                space-before="0pt"
                                line-height-shift-adjustment="disregard-shifts"
                                font-family="Helvetica, Arial Unicode MS">
                                <fo:inline
                                    id="_OPENTOPIC_TOC_PROCESSING_d80e3474">
                                    <fo:inline
                                        border-bottom-style="none"
                                        border-bottom-width="2pt"
                                        border-top-style="none"
                                        border-top-width="2pt"
                                        font-size="20pt"
                                        font-weight="bold"
                                        padding-top="10pt">
                                        <fo:marker
                                            marker-class-name="chapter-for-fig">6</fo:marker>
                                        <fo:inline
                                            font-size="36pt"
                                            font-weight="bold"
                                            padding-right="0.485in">6</fo:inline>
                                    </fo:inline>
                                </fo:inline>
                            </fo:block>
                        </fo:table-cell>
                        <fo:table-cell
                            display-align="after">
                            <fo:block
                                border-bottom="3pt solid black"
                                border-bottom-style="solid"
                                border-bottom-width="2pt"
                                border-top-style="none"
                                border-top-width="2pt"
                                break-before="auto"
                                font-size="18pt"
                                font-weight="bold"
                                keep-with-next.within-column="always"
                                padding-top="10pt"
                                space-after="16.8pt"
                                space-before="0pt"
                                line-height-shift-adjustment="disregard-shifts"
                                font-family="Helvetica, Arial Unicode MS">test</fo:block>
                        </fo:table-cell>
                    </fo:table-row>
                </fo:table-body>
            </fo:table>
            <fo:block-container
                margin-left="0.75in"
                line-height-shift-adjustment="disregard-shifts"
                font-family="Helvetica, Arial Unicode MS"/>
        </fo:block>
    </fo:flow>
</fo:page-sequence> 
```

这是使用默认 PDF2 样式的等价物：

```
<fo:page-sequence
    force-page-count="even"
    master-reference="body-sequence">
    <fo:static-content
        flow-name="xsl-footnote-separator">
        <fo:block>
            <fo:leader
                color="black"
                leader-length="25%"
                leader-pattern="rule"
                rule-style="solid"
                rule-thickness="0.5pt"/>
        </fo:block>
    </fo:static-content>
    <fo:static-content
        flow-name="odd-body-footer">
        <fo:block
            end-indent="10pt"
            space-after="10pt"
            space-after.conditionality="retain"
            text-align="end"/>
    </fo:static-content>
    <fo:static-content
        flow-name="odd-body-header">
        <fo:block
            end-indent="10pt"
            space-before="10pt"
            space-before.conditionality="retain"
            text-align="end"> | <fo:inline><fo:retrieve-marker
                    retrieve-class-name="current-header"/>
            </fo:inline> | <fo:inline
                font-weight="bold"><fo:page-number/>
            </fo:inline>
        </fo:block>
    </fo:static-content>
    <fo:static-content
        flow-name="first-body-header">
        <fo:block
            end-indent="10pt"
            space-before="10pt"
            space-before.conditionality="retain"
            text-align="end"/>
    </fo:static-content>
    <fo:static-content
        flow-name="first-body-footer">
        <fo:block
            end-indent="10pt"
            space-after="10pt"
            space-after.conditionality="retain"
            text-align="end"/>
    </fo:static-content>
    <fo:static-content
        flow-name="last-body-header">
        <fo:block/>
    </fo:static-content>
    <fo:static-content
        flow-name="last-body-footer">
        <fo:block/>
    </fo:static-content>
    <fo:flow
        flow-name="xsl-region-body">
        <fo:block
            font-size="10pt"
            id="d2e394">
            <fo:marker
                marker-class-name="current-topic-number">6</fo:marker>
            <fo:marker
                marker-class-name="current-header">test</fo:marker>
            <fo:block
                id="_OPENTOPIC_TOC_PROCESSING_d61e3474">
                <fo:block
                    border-bottom-style="solid"
                    border-bottom-width="2pt"
                    border-top-style="solid"
                    border-top-width="2pt"
                    font-size="20pt"
                    font-weight="bold"
                    padding-top="10pt">Chapter <fo:block
                        font-size="40pt"
                        font-weight="bold">6</fo:block>
                </fo:block>
            </fo:block>
            <fo:block
                border-bottom="3pt solid black"
                font-size="18pt"
                font-weight="bold"
                keep-with-next.within-column="always"
                padding-top="16.8pt"
                space-after="16.8pt"
                space-before="0pt"
                line-height-shift-adjustment="disregard-shifts"
                font-family="Helvetica, Arial Unicode MS">test</fo:block>
            <fo:table
                page-break-after="always"
                table-layout="fixed"
                width="100%">
                <fo:table-column
                    column-number="1"
                    column-width="35%"/>
                <fo:table-column
                    column-number="2"
                    column-width="65%"/>
                <fo:table-body>
                    <fo:table-row>
                        <fo:table-cell>
                            <fo:block
                                end-indent="5pt"
                                font-size="10.5pt"
                                line-height-shift-adjustment="disregard-shifts"
                                font-family="Helvetica, Arial Unicode MS"/>
                        </fo:table-cell>
                        <fo:table-cell
                            border-left-color="black"
                            border-left-style="solid"
                            border-left-width="1pt"
                            padding-left="10pt">
                            <fo:block/>
                        </fo:table-cell>
                    </fo:table-row>
                </fo:table-body>
            </fo:table>
        </fo:block>
    </fo:flow>
</fo:page-sequence> 
```

我的风格完全不同，我很难确定从哪里开始解决这个问题。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:26:56.150

我相信问题出`<fo:block-container />`在代码的最后。它需要一个`<block>`孩子（无论如何没有它也没有多大用处）。

尝试注释掉那个元素，看看转换是如何运行的。

如果可行（并且您仍然需要`<fo:block-container />`），请添加一个空`<block>`作为子主题，这样即使没有任何子主题也是有效的。

# javascript - jqGrid reloadGrid 并刷新新的 colModel 和 colNames

> ID：15836496
> 
> 赞同：5
> 
> 时间：2013-04-05T14:28:20.283
> 
> 标签：javascript, jquery, jqgrid

我正在尝试使用新行、colNames 和 colModel 重新加载 jqGrid。行数据似乎加载正常，但列似乎没有被刷新。我尝试过使用 GridUnload 和 GridDestroy，但我最终完全丢失了 jQuery DOM 实例，也不再加载任何数据。

```
var grid = $('#my-grid');

if(grid[0].grid == undefined) {
    grid.jqGrid(options);
} else {
    grid.setGridParam(options);
    grid.trigger('reloadGrid');
} 
```

网格实例很重要，因为它将作为参数传递给其他对象。这些对象可以附加侦听器或触发事件。

我正在使用版本 4.4.2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T14:37:53.470

`reloadGrid`仅重新加载网格的*主体*，而不更改创建网格时将创建的列标题。

如果您需要更改列数或使用`colNames`旧`colModel`网格代替旧网格，您可以使用或*重新创建*网格。您可以先使用[GridUnload](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods#add_on_grid_methods)方法，然后创建新网格（`grid.jqGrid(data)`在您的情况下调用）。重要的是，如果您将 jQuery 选择器缓存到`grid`代码中的变量中的网格中，您必须`grid`在调用 of 之后再分配一次`GridUnload`，因此您应该`grid = $("#grid");`在调用 of 之后直接执行类似的操作`GridUnload`。

有关更多详细信息和代码示例，请参见[答案](https://stackoverflow.com/a/4920612/315935)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:24:58.937

似乎 jqGrid`<table></table>`从 DOM 中删除了初始值并替换它或忘记了引用（我没有仔细研究它）。

因此，每次要创建新网格时都必须重新选择新表，即。`$('table#my-grid')`. 如果您想将网格表的引用作为参数传递给应用程序的其他部分，这会变得很棘手。

我的工作涉及删除网格引用并用原始表替换网格的包装 div。然后使用新的 colModel 和 colNames 以正常方式创建一个 jqGrid。

```
grid.empty();
delete grid[0].grid;
$('#gbox_my-grid').replaceWith(grid);
grid.jqGrid(options); 
```

这不是最整洁的解决方案，但它确实让我可以永久引用原始的`<table>`. 不过，我不确定其他 jqGrid 插件将如何受到影响。

编辑

事实证明[jQuery DataTables](https://datatables.net/)更适合自定义，我们采用了它而不是使用 jqGrid。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T02:17:44.163

我结合了这两个答案并进行了一些修改以使其正常工作。

```
var grid = $('#tableID');

if(grid[0].grid == undefined) {
  grid.jqGrid(options);
} else {
  delete grid;
  $('#tableID').GridUnload('#tableID');
  $('#tableID').jqGrid(options);
} 
```

# c++ - 构造函数中指针的默认值是什么意思？

> ID：15836499
> 
> 赞同：5
> 
> 时间：2013-04-05T14:28:25.313
> 
> 标签：c++, pointers, constructor, default-value

我尝试理解这段代码（取自[这里](http://ootips.org/yonat/4dev/smart-pointers.html)）：

```
template <class T> class auto_ptr
{
    T* ptr;
public:
    explicit auto_ptr(T* p = 0) : ptr(p) {}
    ~auto_ptr()                 {delete ptr;}
    T& operator*()              {return *ptr;}
    T* operator->()             {return ptr;}
    // ...
}; 
```

我在理解这行代码时遇到问题：`explicit auto_ptr(T* p = 0) : ptr(p) {}`.

据我了解，通过这一行，我们尝试定义一个具有一个`pointer-to-object-of-T-class`类型参数的构造函数。然后我们有`= 0`. 那是什么？它是默认值吗？但是如何`0`才能成为指针的默认值（指针应该将地址作为值，而不是整数）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T14:29:11.040

是的，`= 0`是默认值。对于指针参数，它与`= NULL`.

引用[Stroustrup 的](http://www.stroustrup.com/bs_faq2.html#null)话：

> **我应该使用`NULL`or`0`吗？**
> 
> 在 C++ 中， 的定义`NULL`是`0`，所以只有审美差异。我更喜欢避免使用宏，所以我使用`0`. 另一个问题`NULL`是人们有时错误地认为它不同于`0`和/或不是整数。在准标准代码中，`NULL`有时会/被定义为不合适的东西，因此必须/必须避免。这几天不太常见了。
> 
> 如果必须命名空指针，请调用它`nullptr`；这就是它在 C++11 中的名称。然后，`nullptr`将是一个关键字。

空指针常量的正式定义如下（强调我的）：

> 4.10 指针转换 [conv.ptr]
> 
> 1**空指针常量是整数类型的整数常量表达式 (5.19) 纯右值，其计算结果为零** 或 std::nullptr_t 类型的纯右值。空指针常量可以转换为指针类型；结果是该类型的空指针值，并且可以与指向对象的指针或指向函数类型的指针的所有其他值区分开来。这种转换称为空指针转换。

`NULL`被定义为这样一个常数：

> 18.2 类型 [support.types]
> 
> 3 该宏`NULL`是本国际标准 (4.10) 中实现定义的 C++ 空指针常量。^(192)
> 
> ^(192) 可能的定义包括`0`and `0L`，但不是`(void*)0`。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T14:30:47.630

```
explicit auto_ptr(T* p = 0) : ptr(p) {} 
```

这是一个构造函数`auto_ptr`，`T* p`如果用户不提供指针，`= 0`将使用它。构造函数将成员`ptr`设置为参数`: ptr(p)`并且不执行任何其他操作`{}`。此构造函数不能用于隐式构造`explicit`。

# javascript - JSF commandButtons 都打开单独的窗口，但只有一个应该

> ID：15836500
> 
> 赞同：0
> 
> 时间：2013-04-05T14:28:26.483
> 
> 标签：javascript, jsf-2

以下两个命令按钮都打开了第二个浏览器，但我只有第二个按钮上的`onclick`目标`_blank`。单击第二个`View Report`按钮然后单击第一个按钮会出现意外行为`Update Chart`：

```
<h:form>
  <h:commandButton value="Update Chart" action="#{commitment.loadChartData}" />&nbsp;
  <h:commandButton value="View Report" action="#{ccommitment.generateReport}" onclick="this.form.target='_blank'" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:32:23.877

好吧，如果您单击第二个按钮，它将设置对象`target`的属性`form`。此属性将保留`_blank`，并将在第一次单击按钮时应用。`onclick`您可以在第一个按钮中重置此属性。

# javascript - 如何在javascript中访问和排序二维数组

> ID：15836501
> 
> 赞同：0
> 
> 时间：2013-04-05T14:28:26.877
> 
> 标签：javascript, arrays

我正在编写一个脚本，通过读取 txt 文件来初始化 javascript 中的二维数组。这是我的代码的一些部分

```
var neighbor = {};
var temp = new Array();
neighbor[nodemap[ temparray[0]]] = temp; //nodemap[ temparray[0]] is an integer
neighbor[nodemap[temparray[0]]]. push(nodemap[temparray[1]]);
neighbor[nodemap[temparray[0]]]. push(nodemap[temparray[2]]);
.... // continue to add value 
```

然后我想访问和排序数组，像这样

```
for (var i = 0; i < n_count; i++);
{
  for (var k = 0; k < neighbor[i].length; k++);
    neighbor[k].sort(function(a,b){return a - b})
} 
```

但是，我得到的错误是`neighbor[i] is unidentified`. 你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:29:46.667

您的`neighbor`“数组”实际上是一个对象文字。所以你应该循环的方式`neighbor`是：

```
for (var key in neighbor) {
    var cur = neighbor[key];
    cur.sort(function (a,b) {
        return a - b;
    });
} 
```

# arrays - 将脚本参数传递给 Powershell 中的函数

> ID：15836505
> 
> 赞同：2
> 
> 时间：2013-04-05T14:28:41.643
> 
> 标签：arrays, function, powershell

我的脚本调用了一个函数，该函数需要脚本调用中的参数：

```
function new( $args )
{
  if( $args.length -lt 8 )
  {
    Write-Host "Parameter Missing, requires 8 Parameters. Aborting."!
    Write-Host $args.length
    break
  }
}

switch ($args[0]) {
  '--test' { }
  '--new' { new $args }
  default  { }
} 
```

当我调用它时，不会将 args 数组交给`new`函数：

```
PS Q:\mles\etl-i_test> .\iprog.ps1 --new 1 2 3 4 5 6 7
Parameter Missing, requires 8 Parameters. Aborting. !
0 
```

如何将数组传递给powershell中的函数？或者特别是 $args 数组？$args 数组的范围不应该是全局的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:11:32.793

修改您的功能如下：

```
function new { param([string[]] $paramargs)

  if( $paramargs.length -lt 8 )
  {
    Write-Host "Parameter Missing, requires 8 Parameters. Aborting."!
    Write-Host $paramargs.length
    break
  }
}

switch ($args[0]) {
  '--test' { }
  '--new' { new $args }
  default  { }
} 
```

这将避免`$arg`来自命令行和参数的变量的歧义`$arg`（更改为`$paramarg`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:45:20.310

`$args`始终是任何功能的一部分。当您使用参数名称调用函数时`$args`，事情会变得非常混乱。在您的函数中将名称更改为其他名称`$args`，它应该可以工作。

```
function new( $arguments )
{

$arguments.Length
  if( $arguments.length -lt 8 )
  {
    Write-Host "Parameter Missing, requires 8 Parameters. Aborting."!
    Write-Host $arguments.length
    break
  }
}

switch ($args[0]) {
  '--test' { }
  '--new' { new $args }
  default  { }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:00:13.333

您必须将 $args 从父范围显式传递到子范围。父作用域中的 $args 在 chlid 作用域中永远不可见，因为作用域是用它自己的 $args 初始化的。做这个：

```
&{get-variable -scope 0} 
```

并记下结果。您看到的每个变量都是在初始化作用域时在新作用域中本地创建的，因此父作用域中的这些变量在新作用域中不可见。$args 是这些变量之一。

# r - 将矩阵拆分为 R 中的多对列

> ID：15836508
> 
> 赞同：4
> 
> 时间：2013-04-05T14:29:02.463
> 
> 标签：r, matrix, split, time-series

使用 R 我有一个 10 行 X 6 列的矩阵。我需要通过对没有重叠的列进行分组，将其拆分为子矩阵。

即矩阵有 A、B、C、D、E、F 列，我需要提取由 AB、CD 和 EF 列形成的 3 个不同的矩阵（或 data.frames 或金融包中的任何对象，如 zoo 或 timeSeries）。

PS：矩阵包含财务数据系列，任何几列都有一个日期列和一个资产净值列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:42:55.383

使用一些虚拟数据（请注意，您*必须*有一个数据框，否则 R 将不允许您将日期和数值保存在矩阵中[除非它们全部转换为字符或原始数字表示]）

```
set.seed(42)
df <- data.frame(A = Sys.Date() + 0:9, B = rnorm(10),
                 C = Sys.Date() - 0:9, D = rnorm(10),
                 E = Sys.Date() - 20:29, F = rnorm(10))

> head(df)
           A          B          C          D          E          F
1 2013-04-05  1.3709584 2013-04-05  1.3048697 2013-03-16 -0.3066386
2 2013-04-06 -0.5646982 2013-04-04  2.2866454 2013-03-15 -1.7813084
3 2013-04-07  0.3631284 2013-04-03 -1.3888607 2013-03-14 -0.1719174
4 2013-04-08  0.6328626 2013-04-02 -0.2787888 2013-03-13  1.2146747
5 2013-04-09  0.4042683 2013-04-01 -0.1333213 2013-03-12  1.8951935
6 2013-04-10 -0.1061245 2013-03-31  0.6359504 2013-03-11 -0.4304691 
```

一个简单的方法是为你想要的列形成一个索引——这里我选择了每对的第一列，1、3、5等。

```
start <- seq(1, by = 2, length = ncol(df) / 2) 
```

然后，我们`lapply`遍历索引`start`并从我们的数据框中选择第 th 列`i`和`i`第 th列，依次从`+ 1`其中`i`获取每个索引( )`start``df[i:(i+1)]`

```
sdf <- lapply(start, function(i, df) df[i:(i+1)], df = df) 
```

这使：

```
> sdf
[[1]]
            A           B
1  2013-04-05  1.37095845
2  2013-04-06 -0.56469817
3  2013-04-07  0.36312841
4  2013-04-08  0.63286260
5  2013-04-09  0.40426832
6  2013-04-10 -0.10612452
7  2013-04-11  1.51152200
8  2013-04-12 -0.09465904
9  2013-04-13  2.01842371
10 2013-04-14 -0.06271410

[[2]]
            C          D
1  2013-04-05  1.3048697
2  2013-04-04  2.2866454
....

> str(sdf)
List of 3
 $ :'data.frame':   10 obs. of  2 variables:
  ..$ A: Date[1:10], format: "2013-04-05" "2013-04-06" ...
  ..$ B: num [1:10] 1.371 -0.565 0.363 0.633 0.404 ...
 $ :'data.frame':   10 obs. of  2 variables:
  ..$ C: Date[1:10], format: "2013-04-05" "2013-04-04" ...
  ..$ D: num [1:10] 1.305 2.287 -1.389 -0.279 -0.133 ...
 $ :'data.frame':   10 obs. of  2 variables:
  ..$ E: Date[1:10], format: "2013-03-16" "2013-03-15" ...
  ..$ F: num [1:10] -0.307 -1.781 -0.172 1.215 1.895 ... 
```

将子数据帧保留在列表中的一个优点是，您可以使用循环或类似`lapply`或之类的工具将函数或其他操作应用于子数据帧`sapply`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:40:20.713

你在寻找这样的东西吗？

```
require("zoo")
##matrix with random entries
mat <- matrix(rnorm(60), nrow=10, ncol=6)
colnames(mat) <- LETTERS[1:6]    
## optional: create zoo object 
#mat <- as.zoo(mat) 

##access columns
mat[,c("A", "B")]
mat[,c("C", "D")]
mat[,c("E", "F")] 
```

请注意，没有必要为上面的模拟数据创建动物园对象，但从您的问题来看，您的数据看起来如何有点不清楚。

# android - ActionBarSherlock BadParcelableException：解组时出现 ClassNotFoundException

> ID：15836510
> 
> 赞同：2
> 
> 时间：2013-04-05T14:29:06.033
> 
> 标签：android, actionbarsherlock, android-spinner, viewpagerindicator

我在我的应用程序中使用了 ActionBarSherlock 和 ViewPagerIndicator 的组合。我有一个包含 ViewPager 的活动，它使用 FragmentStatePagerAdapter 在选项卡之间滚动。其中一个片段包含一个 IcsSpinner。当活动状态恢复并使用 IcsSpinner 滚动到选项卡时，出现以下异常：

```
android.os.BadParcelableException: ClassNotFoundException when unmarshalling: com.actionbarsherlock.internal.widget.IcsAbsSpinner$SavedState
    at android.os.Parcel.readParcelable(Parcel.java:2077)
    at android.os.Parcel.readValue(Parcel.java:1965)
    at android.os.Parcel.readSparseArrayInternal(Parcel.java:2255)
    at android.os.Parcel.readSparseArray(Parcel.java:1687)
    at android.os.Parcel.readValue(Parcel.java:2022)
    at android.os.Parcel.readMapInternal(Parcel.java:2226)
    at android.os.Bundle.unparcel(Bundle.java:223)
    at android.os.Bundle.getSparseParcelableArray(Bundle.java:1240)
    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
    at android.support.v4.app.BackStackRecord.run(Unknown Source)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(Unknown Source)
    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(Unknown Source)
    at android.support.v4.app.FragmentStatePagerAdapter.finishUpdate(Unknown Source)
    at android.support.v4.view.ViewPager.populate(Unknown Source)
    at android.support.v4.view.ViewPager.completeScroll(Unknown Source)
    at android.support.v4.view.ViewPager.computeScroll(Unknown Source)
    at android.view.View.getDisplayList(View.java:12638)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1198)
    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2173)
    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)
    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
    at android.view.Choreographer.doFrame(Choreographer.java:532)
    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method) 
```

知道可能是什么原因造成的吗？

谢谢大卫

# command-line - MTurk 命令行工具错误：.class 文件中的版本号错误

> ID：15836514
> 
> 赞同：0
> 
> 时间：2013-04-05T14:29:14.570
> 
> 标签：command-line, amazon-web-services, java, mechanicalturk

我在 Windows 上使用 Mechanical Turk 命令行工具。当我尝试运行命令（例如，getBalance、createQualificationType）时，我总是收到以下错误：

> 线程“主”java.lang.UnsupportedClassVersionError 中的异常：.class 文件中的版本号错误

任何关于我可以解决这个问题的线索将不胜感激！

我尝试更新我的密钥和密钥无济于事。

注意：我可以使用 -help 获得命令的帮助，但我不能自己运行命令。

无论我运行的是 JRE 1.5.0_06-b05、1.5.0_22-b03 还是 1.7.0_17-b02，都会出现此错误。命令行工具文档指出，[“您必须拥有 Java JRE 1.5.X (JRE 5)。命令行工具并非 100% 与 JRE 6 兼容。”](http://web.mit.edu/cathywu/Public/AMT/aws-mturk-clt-1.3.0/UserGuide.html)

由于我使用的是 JRE 打包的命令行工具版本，因此我还卸载了我的 JRE。我犯了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:32:38.923

`UnsupportedClassVersionError`意味着您正在尝试使用在较旧的 Java 运行时环境中使用较新的 JDK 编译的 Java 类。例如，您有一个使用 JDK 7 编译的类，并且您正尝试在 Java 6 或更早的运行时环境中使用它。

Java向下兼容；较新的 Java 运行时环境可以运行用旧版本编译的 Java 类而无需修改，但反之则不行。

检查您尝试使用的类的编译版本，并使用具有相同版本或更高版本的 Java 运行时环境来运行该类。

您可以使用以下命令检查您的 Java 运行时环境和 JDK 版本：

```
java -version
javac -version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:10:48.610

显然，CLT 安装程序安装的 JRE 太旧，无法运行安装程序中包含的工具。似乎是一个严重的错误（当然很烦人）。

您可以通过安装和使用更新的 JDK 来修复。

这篇文章包含有关如何执行此操作的说明： [https ://forums.aws.amazon.com/message.jspa?messageID=388586#388585](https://forums.aws.amazon.com/message.jspa?messageID=388586#388585)

# sql-server - 多查询到单查询

> ID：15836515
> 
> 赞同：1
> 
> 时间：2013-04-05T14:29:22.037
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我正在使用 SQL Server 2008。

我创建了一个这样的存储过程：

```
SELECT  SUM(m.BookingAmt) + SUM(m.FormFee) AS 'SIP'
FROM    dbo.Member AS m
    INNER JOIN dbo.PlanMaster AS pm ON m.PlanId = pm.PlanId
    INNER JOIN dbo.PlanTypeMaster AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
WHERE   ptm.IsSingleInstallment = 'true'
    AND m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND m.CommencementDate = @Date

SELECT  SUM(i.PaymentAmt) + SUM(m.FormFee) AS 'Fresh'
FROM    dbo.Installment AS i
    INNER JOIN dbo.Member AS m ON i.MemberId = m.MemberId
    INNER JOIN dbo.PlanMaster AS pm ON i.PlanId = pm.PlanId
    INNER JOIN dbo.PlanTypeMaster AS ptm ON pm.PlanTypeId = ptm.PlanTypeId
WHERE   i.InstallmentNo = 1
    AND m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND i.PaymentDate = @Date
    AND ptm.IsSingleInstallment = 'false'

SELECT  SUM(i.PaymentAmt) AS '1stYear'
FROM    dbo.Installment AS i
    INNER JOIN dbo.Member AS m ON i.MemberId = m.MemberId
WHERE   i.InstallmentNo > 1
    AND i.InstallmentNo < 13
    AND m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND i.PaymentDate = @Date

SELECT  SUM(i.PaymentAmt) AS '2ndYear'
FROM    dbo.Installment AS i
    INNER JOIN dbo.Member AS m ON i.MemberId = m.MemberId
WHERE   i.InstallmentNo > 12
    AND i.InstallmentNo < 25
    AND m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND i.PaymentDate = @Date

SELECT  SUM(i.PaymentAmt) AS '3rdYear'
FROM    dbo.Installment AS i
    INNER JOIN dbo.Member AS m ON i.MemberId = m.MemberId
WHERE   i.InstallmentNo > 24
    AND i.InstallmentNo < 37
    AND m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND i.PaymentDate = @Date

SELECT  SUM(i.PaymentAmt) AS '4thYear'
FROM    dbo.Installment AS i
    INNER JOIN dbo.Member AS m ON i.MemberId = m.MemberId
WHERE   i.InstallmentNo > 36
    AND m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND i.PaymentDate = @Date 
```

但我想得到这样的结果......

```
---------------------------------------------------------------------
  Date       | SIP  |  Fresh  | 1stYear | 2ndYear | 3rdYear | 4thYear |
---------------------------------------------------------------------
  01/02/2013 | 2000 |  2500   |  5000   |  3500   |  4500   |  6500   |
 ------------------------------------------------------- --------------
  02/02/2013 | 6500 |  5000   |  1500   |  4500   |   3520  |  1852   |
  --------------------------------------------------------------------
  03/02/2013 | 2560 |  2500   |  3500   |  4500   |  2000   |   2000  | 
```

如何使用一个查询获得上述结果？请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:08:16.947

您可以通过使用带有表达式的聚合函数来合并生成 、 等的查询，`1stYear`以创建列而不是行。`2ndYear``CASE`

然后您可以为其他两个创建子查询，最后在日期将它们全部连接在一起。所以你的最终查询可能是：

```
SELECT coalesce(q1.CommencementDate, q2.PaymentDate, q3.PaymentDate) date,
  q1.SIP,
  q2.Fresh,
  q3.[1stYear],
  q3.[2ndYear],
  q3.[3rdYear],
  q3.[4thYear]
FROM
(
  SELECT m.CommencementDate,
    SUM(m.BookingAmt) + SUM(m.FormFee) AS 'SIP'
  FROM dbo.Member AS m
  INNER JOIN dbo.PlanMaster AS pm 
    ON m.PlanId = pm.PlanId
  INNER JOIN dbo.PlanTypeMaster AS ptm 
    ON pm.PlanTypeId = ptm.PlanTypeId
  WHERE ptm.IsSingleInstallment = 'true'
    AND m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND m.CommencementDate = @Date
) q1
FULL OUTER JOIN
(
  SELECT i.PaymentDate,
    SUM(i.PaymentAmt) + SUM(m.FormFee) AS 'Fresh'
  FROM dbo.Installment AS i
  INNER JOIN dbo.Member AS m 
    ON i.MemberId = m.MemberId
  INNER JOIN dbo.PlanMaster AS pm 
    ON i.PlanId = pm.PlanId
  INNER JOIN dbo.PlanTypeMaster AS ptm 
    ON pm.PlanTypeId = ptm.PlanTypeId
  WHERE i.InstallmentNo = 1
    AND m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND i.PaymentDate = @Date
    AND ptm.IsSingleInstallment = 'false'
) q2
  ON q1.CommencementDate = q2.PaymentDate
FULL OUTER JOIN
(
  SELECT i.PaymentDate,
    sum(case 
          when i.InstallmentNo > 1 AND i.InstallmentNo < 13
          then i.PaymentAmt else 0 end) AS [1stYear],
    sum(case 
          when i.InstallmentNo > 12 AND i.InstallmentNo < 25
          then i.PaymentAmt else 0 end) AS [2ndYear],
    sum(case 
          when i.InstallmentNo > 24 AND i.InstallmentNo < 37
          then i.PaymentAmt else 0 end) AS [3rdYear],
    sum(case 
          when i.InstallmentNo > 36
          then i.PaymentAmt else 0 end) AS [4thYear]
  SUM(i.PaymentAmt) AS '1stYear'
  FROM dbo.Installment AS i
  INNER JOIN dbo.Member AS m 
    ON i.MemberId = m.MemberId
  WHERE m.CompanyId = @CompanyId
    AND m.CscId = @CscId
    AND i.PaymentDate = @Date
  GROUP BY i.PaymentDate
) q3
  ON q1.CommencementDate = q3.PaymentDate; 
```

# c# - 如何将此字符串解码为 utf-8 字符串？

> ID：15836529
> 
> 赞同：-2
> 
> 时间：2013-04-05T14:30:05.337
> 
> 标签：c#, string, utf-8, decode

我有这个代码：

```
string URL = "http://translate.google.com/m?hl=vi&sl=en&tl=vi&ie=UTF-8&prev=_m&q=song";
string s = "";
WebClient client = new WebClient();
client.Headers.Add("user-agent", "Mozilla/5.0 (SymbianOS/9.4; U; Series60/5.0 Nokia5800d-1/21.0.025; Profile/MIDP-2.1 Configuration/CLDC-1.1 ) AppleWebKit/413 (KHTML, like Gecko) Safari/413");
s = client.DownloadString(URL); 
```

运行时，我收到一个格式为该字符串的字符串：

```
danh tÆ°Ì€ buá»•i há»p Ä‘á»ƒ ca hÃ¡t 
```

到这个字符串：

```
danh từ buổi họp để ca hát 
```

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:41:48.267

在获取`byte[]`表示字符串的 a 时，您需要在获取之前知道使用了什么编码。

在这种情况下，它是 UTF-8，因此将 的 设置`Encoding`为`WebClient`会产生正确的字符串：

```
string URL = "http://translate.google.com/m?hl=vi&sl=en&tl=vi&ie=UTF-8&prev=_m&q=song";
string s = "";
WebClient client = new WebClient();
client.Encoding = Encoding.UTF8;
client.Headers.Add("user-agent", "Mozilla/5.0 (SymbianOS/9.4; U; Series60/5.0 Nokia5800d-1/21.0.025; Profile/MIDP-2.1 Configuration/CLDC-1.1 ) AppleWebKit/413 (KHTML, like Gecko) Safari/413");
s = client.DownloadString(URL); 
```

# jsf - JSF JDBC Jasper 报告

> ID：15836532
> 
> 赞同：0
> 
> 时间：2013-04-05T14:30:08.533
> 
> 标签：jsf, pdf, jsf-2, jasper-reports, report

我需要某种可以生成 PDF 报告（来自数据库的数据）的报告工具，这些报告将在我的 jsf 应用程序中使用。

我听到的一个是 Jasper Reports。

我想知道是否可以使用原始 JDBC 与 Jasper 一起工作？如果是这样，有人可以指导我看一些教程吗？我很好的所有都是基于JPA的。

还有其他可以与 JSF 集成的好的报告工具吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:54:50.140

1 - 你可以在 JSF 中使用 JasperReport，非常好。我建议作为工具 iReport 报表设计器。您必须在项目中包含 iText 库。

2 - 报告有两种填充方式，从数据库值或注入内存。

3 - 您还可以通过 Primefaces 数据导出器生成报告，因此您可以在运行时构建文档。

# python - opencv：getPixel（）不反映drawRectangle（）

> ID：15836539
> 
> 赞同：1
> 
> 时间：2013-04-05T14:30:19.643
> 
> 标签：python, simplecv

当我在图像中绘制一个红色正方形时，我希望该正方形中的像素为“红色”。然而，它们竟然是黑色的……

```
>>> from SimpleCV import Image,Color
>>> Color.RED
(255, 0, 0)
>>> i=Image((100,100))  
>>> i.drawRectangle(10,10,20,20,Color.RED,0,255) 
>>> i.getPixel(15,15)
(0.0, 0.0, 0.0) 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:36:35.557

.... 显然，该`drawRectangle`调用绘制到当前绘图层上。调用 后`applyLayers()`，像素更符合预期。

```
>>> from SimpleCV import Image,Color
>>> Color.RED
(255, 0, 0)
>>> i=Image((100,100))  
>>> i.drawRectangle(10,10,20,20,Color.RED,0,255) 
>>> i.getPixel(15,15)
(0.0, 0.0, 0.0) 
```

开始：

```
>>> i=i.applyLayers() 
>>> i.getPixel(15,15)
(254.0, 0.0, 0.0) 
```

# powershell - 管道get-childitem到powershell中的选择字符串

> ID：15836541
> 
> 赞同：6
> 
> 时间：2013-04-05T14:30:22.790
> 
> 标签：powershell, get-childitem

我正在对一个大型文件目录进行排序，我试图从 ls 命令的输出中选择单独的行并仅显示这些行，但是我得到了奇怪的结果，而且我对 powershell 不够熟悉，不知道我在做什么错。

这种方法有效：

```
ls > data.txt
select-string 2012 data.txt
rm data.txt 
```

但是对我来说创建一个文件只是为了读取我已经必须填写到文件中的数据似乎很浪费。我想将输出直接传送到选择字符串。

我试过这种方法：

```
ls | select-string 2012 
```

但这并没有给我适当的输出。

我的*猜测*是我需要将 ls 的输出转换为 select-string 可以使用的东西，但我不知道该怎么做，甚至不知道这是否真的是正确的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T14:40:34.960

PowerShell 是面向对象的，而不是像`cmd`. 如果要获取 2012 年修改的文件对象（行），请使用：

```
Get-ChildItem | Where-Object { $_.LastWriteTime.Year -eq 2012 } 
```

如果要获取文件名中带有“2012”的文件对象，请尝试：

```
Get-ChildItem *2012* 
```

当你使用

```
ls | select-string 2012 
```

您实际上是在`ls`/`get-childitem`列出的每个文件中搜索带有“2012”的行。

如果你真的需要`select-string`在输出上使用`get-childitem`，尝试将其转换为字符串，然后分成几行，然后搜索它。像这样：

```
(Get-ChildItem | Out-String) -split "`n" | Select-String 2012 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-24T16:45:34.857

我找到了另一种将对象转换为字符串的简单方法：

```
Get-ChildItem | Out-String -stream | Select-String 2012 
```

在这篇非常有趣的文章中：http:
[//blogs.msdn.com/b/powershell/archive/2006/04/25/how-does-select-string-work-with-pipelines-of-objects.aspx](http://blogs.msdn.com/b/powershell/archive/2006/04/25/how-does-select-string-work-with-pipelines-of-objects.aspx)

> > 如果您希望 Select-String 处理 Monad 格式的输出，则需要将其作为字符串获取。这是我们输出的问题。当您的命令序列发出字符串流时，我们会在不处理的情况下发出它。相反，如果您的命令序列发出对象流，那么我们将这些对象重定向到命令 Out-Default。Out-Default 查看对象的类型和注册的格式化元数据，以查看是否存在该对象类型的默认视图。视图定义了 FORMATTER 和该命令的元数据。大多数对象都被矢量化到 Format-Table 或 Format-List（尽管它们可以转到 Format-Wide 或 Format-Custom）。这些格式化程序不会发出字符串！您可以通过以下方式亲自查看：" 这些格式化记录然后被引导到 OUT-xxx 命令，以呈现为特定输出设备的适当数据。默认情况下，它们会转到 Out-Host，但您可以将其通过管道传输到 Out-File、Out-Printer 或 Out-String。（注意：这些 OUT-xxx 命令非常聪明，如果您将格式化对象传送给它们，它们会渲染它们。如果您将原始对象传送给它们，它们将首先调用适当的格式化程序然后渲染它们。）

# wpf - 在用户控件样式中设置依赖属性

> ID：15836548
> 
> 赞同：2
> 
> 时间：2013-04-05T14:30:42.130
> 
> 标签：wpf, xaml, styles, controls

我使用如下所示的依赖属性实现了一个用户控件：

```
public partial class MyUC : UserControl, INotifyPropertyChanged
{
    public static readonly DependencyProperty MyBackgroundProperty =
        DependencyProperty.Register("MyBackground", typeof(Brush), typeof(MyUC), 
            new FrameworkPropertyMetadata(Brushes.White, 
                FrameworkPropertyMetadataOptions.AffectsRender));

    public Brush MyBackground
    {
        get { return (Brush)GetValue(MyBackgroundProperty); }
        set { SetValue(MyBackgroundProperty, value); }
    }

    //...
} 
```

并尝试在 XAML 中设置此属性，如下所示：

```
<UserControl x:Class="Custom.MyUC"
         x:Name="myUCName"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:Custom"
         mc:Ignorable="d"
         TabIndex="0" KeyboardNavigation.TabNavigation="Local" 
         HorizontalContentAlignment="Left" VerticalContentAlignment="Top" 
         MouseLeftButtonDown="OnMouseLeftButtonDown"> 
    <UserControl.Style>
        <Style TargetType="local:MyUC">      
            <Setter Property="MyBackground" Value="Black"/>
        </Style>
    </UserControl.Style>   

    <Border BorderThickness="0">
        //...
    </Border>
</UserControl> 
```

它可以编译，但是当我运行应用程序时，出现以下异常：

> 设置属性“System.Windows.Setter.Property”引发异常。行号'..'和行位置'..'。”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:03:29.927

出现问题是因为您试图将 TargetType="MyUC" 的样式应用于 UserControl 类型的元素。

解决方案是从控件外部应用样式。例如，当您在另一个窗口中使用控件时：

```
<Window.Resources>
    <Style TargetType="local:MyUC">
        <Setter Property="MyBackground" Value="Red" />
    </Style>
</Window.Resources>
<Grid>
    <local:MyUC />
</Grid> 
```

作为测试，我将此代码添加到用户控件中：

```
public partial class MyUC
{
    public MyUC()
    {
        InitializeComponent();
    }   

    public static readonly DependencyProperty MyBackgroundProperty =
        DependencyProperty.Register("MyBackground", typeof(Brush), typeof(MyUC), 
        new PropertyMetadata(Brushes.White, PropertyChangedCallback));

    private static void PropertyChangedCallback(DependencyObject dependencyObject, 
        DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        ((MyUC)dependencyObject).MyBackgroundPropertyChanged(
            (Brush)dependencyPropertyChangedEventArgs.NewValue);
    }

    private void MyBackgroundPropertyChanged(Brush newValue)
    {
        Background = newValue;
    }

    public Brush MyBackground
    {
        get { return (Brush)GetValue(MyBackgroundProperty); }
        set { SetValue(MyBackgroundProperty, value); }
    }
} 
```

然后导致控件具有红色背景。

# java - 虽然在eclipse中为一个对象调试不同的id意味着不同的实例？

> ID：15836549
> 
> 赞同：0
> 
> 时间：2013-04-05T14:30:42.980
> 
> 标签：java, android, eclipse, debugging

我在eclipse中调试一个android项目。我看到一个类变量有两个不同的 id。这是否意味着两者都是不同的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:39:51.697

是的，如果它们有不同的对象 ID，它们就是不同的实例。

# php - 如何更改 wamp 的默认浏览器？

> ID：15836551
> 
> 赞同：0
> 
> 时间：2013-04-05T14:30:44.057
> 
> 标签：php, wamp

最近我安装了 firefox，现在我的 phpmyadmin 将显示在 firefox 中，但我总是使用 chrome 我去了 c:\wamp 并将 wampmanager.conf 导航器更改为我的 chrome，奇怪的是它与 ie explorer 有关，而与 firefox 无关 我更新了行如下：

```
navigator = "C:/Program Files (x86)/Google/Chrome/Application/chrome.exe" 
```

我重新启动了 wamp 服务器，但没有看到关于 wampmaneger.ini 的结果，但似乎它适用于旧版本。我不知道该怎么办？我想要我的 chrome

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:39:34.457

将 Chrome 设为您的默认浏览器。

[http://support.google.com/chrome/bin/answer.py?hl=en&answer=95417](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95417)

# excel - Excel - 宏更改工作表并填充到结尾 - 编译错误

> ID：15836555
> 
> 赞同：0
> 
> 时间：2013-04-05T14:30:49.770
> 
> 标签：excel, compiler-errors, autofill, vba

我正在创建一个宏以在大约 25 张纸上连续运行，我在其中命名特定列中的单元格。我有填写结束和更换工作表的代码。但是当我结合代码时，我收到了一个警告：

> 编译错误：当前范围内的重复声明

当我删除 DIM 定义时，它将在连续的工作表上运行，但只运行到第一张工作表的末尾。我的目标是让每张工作表动态填充以在 N 列结束，并为每个工作表设置一个名称。

这是我正在处理的代码

```
 Sub Mailbox_Name()
'
' Mailbox_Name Macro
' Adds Mailbox Name to Each Sheet

'
    Dim LR As Long
    LR = Cells.Find(What:="*", SearchDirection:=xlPrevious, SearchOrder:=xlByRows).Row
    Range("N1").Select
    ActiveCell.FormulaR1C1 = "Mailbox"
    Range("N2").Select
    ActiveCell.FormulaR1C1 = "ACC"
    Range("N2").Select
    Selection.AutoFill Destination:=Range("N2:N" & LR)
    Range("N2:N" & LR).Select

    Selection.Copy
    Sheets("ACPR").Select
    Dim LR As Long
    LR = Cells.Find(What:="*", SearchDirection:=xlPrevious, SearchOrder:=xlByRows).Row
    Range("N1").Select
    ActiveCell.FormulaR1C1 = "Mailbox"
    Range("N2").Select
    ActiveCell.FormulaR1C1 = "ACPR"
    Range("N2").Select
    Selection.AutoFill Destination:=Range("N2:N" & LR)
    Range("N2:N" & LR).Select
End Sub 
```

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:53:22.447

只需阅读错误告诉您的内容 - 您有一个重复的声明。果然，在你的代码中你有`Dim LR As Long`两次。

# javascript - 如何将功能应用于页面上的每个复选框？

> ID：15836556
> 
> 赞同：0
> 
> 时间：2013-04-05T14:30:53.370
> 
> 标签：javascript, jquery, html

我正在尝试将功能应用于页面上显示/隐藏的每个复选框，`<div class="selectlist">`具体取决于复选框是否被选中，此功能使`<div class="selectlist">`页面上的所有内容切换

```
$("input[type=checkbox]").live('change', function() {
  if ($(this).is(':checked') == false) {
   $('#selectlist').hide();
    } else {
       $('#selectlist').show();
    }
 }); 
```

我尝试了这样的jquery`each`函数，但这似乎不起作用

```
 $.each($("input[type=checkbox]").live('change', function() {

        if ($(this).is(':checked') == false) {
             $('#selectlist').hide();
        } else {
             $('#selectlist').show();
        }
    })); 
```

我知道可以通过使用 a`class`而不是，`input[type=checkbox]`但我想避免这样做

如何让 jquery 更改用户单击的复选框的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:34:07.840

如果您尝试将事件处理程序绑定到所有正在验证的元素`input[type=checkbox]`，只需执行

```
$(document).on('change', "input[type=checkbox]", function() {
    if (!this.checked) {
         $('#selectlist').hide();
    } else {
         $('#selectlist').show();
    }
}); 
```

不需要在`each`那里使用：如果 jQuery 集合包含多个元素，则大多数 jQuery 函数都可以工作。

请注意，我使用`on`那里而不是`live`: 在已弃用很长时间后，`live`已从最新版本的 jQuery 中删除。

* * *

编辑：下面评论中的讨论导致此代码：

```
$(document).on('change', "input[type=checkbox]", function() {
    $(this).next().toggle(this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:34:31.693

```
$(document).on('change', 'input[type=checkbox]', function() {
    $('#selectlist').toggle(this.checked); 
}); 
```

**ID 是 uniqe**，并且没有“`<div id="selectlist">`页面上的所有切换”，只能有一个？改用一个类，向我们展示标记的样子！

# html - CSS/HTML 页面不会滚动

> ID：15836560
> 
> 赞同：1
> 
> 时间：2013-04-05T14:30:56.463
> 
> 标签：html, css, scroll, dreamweaver

我的CSS代码如下：

```
 body {
        background-image: url(images/bg.png);
        background-attachment: scroll;
        background-repeat: no-repeat;
        background-size: 100%;
    } 
```

背景图像显然比标准网页大，但它仍然不会让我向下滚动。

[附注 - 我也无法在设计视图中向下滚动：http://www.meikledesign.co.uk/host/example.jpg]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:33:25.357

为测试目的给身体一个有限的高度。

```
body {
   height: 2000px;
} 
```

如果我没记错的话，背景不会人为地增加 html 页面的正文（默认情况下定义为浏览器窗口的 100%、100%）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:34:16.870

将 body min-height 更改为 bg.png 高度，不是太漂亮的解决方案，但可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:46:48.317

如果您正在尝试实现响应式背景，请查看此[perfect-full-page-background-image](http://css-tricks.com/perfect-full-page-background-image/)

您可以使用 css3 实现这一点，如下所示：

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

但那样它不会在所有浏览器中工作。检查我为跨浏览器解决方案提供的链接。

关于滚动，您可以像其他成员之前所说的那样，通过添加`min-height`到正文中来做到这一点。

# ruby-on-rails - Rails：为什么插入带有accepts_nested_attributes_for 有一个空行？

> ID：15836566
> 
> 赞同：0
> 
> 时间：2013-04-05T14:31:16.137
> 
> 标签：ruby-on-rails, insert

当我插入到 db 时，rails 出现问题：如果我设置 doc_items_attributes 为 []，则总是有一行，a 有一行空的外键和 id

```
class Doc < ActiveRecord::Base

  attr_accessible  :doc_items_attributes, :partner_info

  has_many :doc_items, dependent: :destroy
  accepts_nested_attributes_for :doc_items, allow_destroy:true 
```

模型 doc_items

```
class DocItem < ActiveRecord::Base
  attr_accessible :qty, :doc_id
  belongs_to :doc 
```

数据：

```
 params = { :doc => {
  :partner_info => 'john', :doc_items_attributes => [
    { :qty => '1' },
    { :qty => '2' }
   ]
  }}

doc = Doc.new()

doc.assign_attributes(params)    

doc.doc_items.build

doc.save
doc.doc_items.length #3 
```

表 doc_items 中有一个没有数据的空行，但 doc_id 有值。

文档：

```
id partner
1 john 
```

文档项目：

```
id doc_id qty
1   1     1
2   1     2
3   1 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:36:51.477

您正在构建一个新的空文档项

> doc.doc_items.build

线。那是空行。

您可能希望使用 build 方法来构建 doc_items。

```
doc = Doc.create( :partner_info => "john")
doc.doc_items.build(:qty => '1')
doc.doc_items.build(:qty => '2')    
doc.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:13:25.430

我找到了

删除此行它有效

```
doc.doc_items.build 
```

# java - Jackson 基于对象属性反序列化为 POJO

> ID：15836570
> 
> 赞同：4
> 
> 时间：2013-04-05T14:31:27.000
> 
> 标签：java, json, jaxb, jackson

是否可以根据 JSON 的内容使用 Jackson 将 JSON 反序列化为两种类型之一？

例如，我有以下 Java（技术上是 Groovy，但这并不重要）接口和类：

```
interface Id {
    Thing toThing() 
}

class NaturalId implements Id {

    final String packageId

    final String thingId

    Thing toThing() {
        new PackageIdentifiedThing(packageId, thingId)
    }         
}

class AlternateId implements Id {

    final String key

    Thing toThing() {
        new AlternatelyIdentifiedThing(key)
    }
} 
```

我将收到的 JSON 如下所示：

这个 JSON 应该映射到 NaturalId`{"packageId": "SomePackage", "thingId": "SomeEntity"}`

此 JSON 应映射到 AlternateId`{"key": "SomeUniqueKey"}`

有谁知道我如何在不包括类型 ID 的情况下使用 Jackson 2.x 来完成此任务？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T14:38:30.723

这些是唯一实现的两个类`Id`吗？如果是这样，您可以编写一个`IdDeserializer`类并放在`@JsonDeserialize(using = IdDeserializer.class)`接口上`Id`，反序列化器将查看 JSON 并确定要反序列化到哪个对象。

编辑： JsonParser 正在流式传输，所以它应该看起来像这样：

```
public Id deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException {
    ObjectNode node = jp.readValueAsTree();
    Class<? extends Id> concreteType = determineConcreteType(node); //Implement 
    return jp.getCodec().treeToValue(node, concreteType);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:14:04.573

使用 @JsonIgnore 注释您的方法

```
@JsonIgnore
Thing toThing() {
    new PackageIdentifiedThing(packageId, thingId)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-04T10:57:46.253

使用 Jackson2，您可以使用泛型轻松编组到不同的类：

```
private <T> T json2Object(String jsonString, String type, Class<T> clazz) {
    JsonNode jsonObjectNode = getChildNode(jsonString, type);       
    T typeObject = null;
    try {
        typeObject = jacksonMapper.treeToValue(jsonObjectNode, clazz);
    } catch (JsonProcessingException jsonProcessingException) {
        LOGGER.severe(jsonProcessingException);
    }
    return typeObject;
} 
```

# mysql - 复制从属空间较小

> ID：15836573
> 
> 赞同：0
> 
> 时间：2013-04-05T14:31:35.060
> 
> 标签：mysql, replication, database-replication, database-administration, master-slave

我需要设置复制

所以为此我从主服务器备份并导入从服务器，现在从服务器有 20 GB 可用空间，当时我正在恢复备份主服务器有 5+ GB 的数据

之后我启用了复制

现在的问题是，在将中继日志中的数据写入从属设备时，会生成许多新的中继日志，而我在从属设备上没有空间......

启用了**中继日志清除** ，但是从中继日志到数据库的写入过程非常慢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:58:31.477

通过将 binlog 格式切换为“ROW”，您可能会获得性能优势。在混合格式中，mysql正在编写基于binlog语句（从站必须重新解析和重新规划策略）并且仅在某些情况下切换到行格式（[http://dev.mysql.com/doc/refman/5.1/en/binary -log-mixed.html](http://dev.mysql.com/doc/refman/5.1/en/binary-log-mixed.html)）。

它可以即时完成：

```
SET GLOBAL binlog_format = 'ROW'; 
```

使用基于 ROW 的复制，您可以卸载从属服务器，这使它们更容易跟上主服务器。唯一的缺点是您可能有更大的日志文件，但是从这个“获得 5+ GB 的数据”中，我假设您主要执行插入操作，因此不会有任何区别。

最好是尝试一下，看看它的表现如何。

直到复制赶上其他选项，以将从站上的 innodb_flush_log_at_trx_commit 更改为 2。只做临时的。

```
SET GLOBAL innodb_flush_log_at_trx_commit = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T11:25:22.270

Try adding this to your config

relay-log-space-limit=5G

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:31:09.230

当您收到更少的磁盘空间警报（达到 90%）时，只需关闭从属 io 线程

```
mysql> stop slave io_thread; 
```

并在一段时间后重新启动它

```
mysql> start slave io_thread; 
```

在生产中，这是唯一可能的最佳选择......

# android - 我可以在 google play 控制台中的应用程序中添加标签吗？

> ID：15836577
> 
> 赞同：21
> 
> 时间：2013-04-05T14:31:47.763
> 
> 标签：android, tags, manifest, google-play, application-name

我写了一个名为*“Bio View”*的应用程序，如果我在 中搜索我的应用程序`Google Play`，它不会显示，相反，如果我搜索*BlueSkyBio*（清单中的“appname”变量就是这样命名的），我可以找到我的应用程序。

```
 <application
    android:icon="@drawable/logo"
    android:label="@string/app_name"
    android:largeHeap="true"
    android:theme="@style/AppTheme" >

  <string name="app_name">BlueSkyBio</string> 
```

我的问题是，我怎样才能在我的应用程序中添加标签，例如：`bio`、、、等`view`，`bioview`这样我才能确保人们可以找到它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T13:49:40.770

FoamyGuy 已经回答了我的问题的评论：您可以将它们放在您的描述中。但Android市场上并没有真正的“标签”概念。此外，搜索算法有点像一个黑匣子，在选择结果的顺序时会考虑很多因素，这就是为什么搜索您的确切应用程序名称不会总是导致您的应用程序位于顶部（甚至靠近顶部）的结果列表。– FoamyGuy 4 月 5 日 14:34

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-08-08T16:54:59.977

Google Play 控制台中现在似乎有一个标签选项，但它们是可供选择的预定义标签，所以它非常有限，但可能会帮助一些人找到这个问题： [Play Console Screenshot](https://i.stack.imgur.com/TLcFa.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-20T15:00:57.103

是的，谷歌现在已经引入了这个选项。您可以在 google play console 下添加标签

> Store Presence -> Store Listing -> 管理标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-17T17:32:56.983

您可以在描述中添加关键字

例子

```
Keywords: leaynik, SOS, eyes, l3ynik, la3yink 
```

**更新答案**

看来我的方式现在已经过时了，谷歌根据@patrickbadley 的回答添加标签

[![在此处输入图像描述](https://i.stack.imgur.com/ilWC8.png)](https://i.stack.imgur.com/ilWC8.png)

# c# - 将所有事件（案例）从 CRM 2011 抓取到 C#

> ID：15836581
> 
> 赞同：0
> 
> 时间：2013-04-05T14:32:00.403
> 
> 标签：c#, asp.net, dynamics-crm-2011, crm

我找不到任何关于如何从 CRM 2011 获取信息的教程或任何内容。我需要能够查询 CRM 并获取所有未关闭的案例/事件。

我正在使用带有 C# 和 vs2012 的 .Net 4.5。有没有人有关于如何阅读 CRM 2011 案例的指南、教程、建议或任何内容？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:36:28.540

首先下载 CRM 2011 SDK，你可以在这里找到：

[http://www.microsoft.com/en-us/download/details.aspx?id=24004](http://www.microsoft.com/en-us/download/details.aspx?id=24004)

里面有很多例子。

您还需要将您的项目定位到 .Net 4（完整配置文件，而不是客户配置文件）

# macos - 为什么这个 Qt 应用程序的应用程序菜单中有多个条目？

> ID：15836582
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:32:05.213
> 
> 标签：macos, qt

我的 Qt 应用程序在 Mac 应用程序菜单中有多个条目可能是什么原因？（我在 Mountain Lion 上针对 Qt 4.8 构建）

![应用程序菜单中的重复条目](https://i.stack.imgur.com/MXCrF.png)

我已经阅读并重新阅读了[Mac 特定的 Qt 问题](http://qt-project.org/doc/qt-4.8/mac-differences.html)以及[Mac OS X 上的 QMenubar](http://qt-project.org/doc/qt-4.8/qmenubar.html#qmenubar-on-mac-os-x)，但无法猜测原因可能是什么。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T13:43:48.410

这个问题原来是对[NSApplicationLoad](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/c/func/NSApplicationLoad)的不必要调用。这个应用程序最近从 Carbon 转换为 Cocoa，这个调用是剩余的。删除它解决了问题。

# javascript - 是否有网络就绪的文本到语音引擎，可以将输入的短语发音为语音拼写？

> ID：15836586
> 
> 赞同：3
> 
> 时间：2013-04-05T14:32:13.640
> 
> 标签：javascript, text-to-speech

我正在寻找一个 JavaScript 库或其他一些 Web 解决方案，它们将根据我提供的语音发音输出声音。

我已经查看了[Speak.js](https://github.com/mattytemple/speak-js)，它可以到达那里，但它并没有接受我的拼音拼写，而是应用了自己的规则来说出单词。

我正在寻找的基本上是一种表达运动员姓名的方法。运动员来自世界各地，因此在某些情况下，相同的拼写可能会导致两种不同的发音。

例如：

如果我有名字 `Steven Andrade`，我有一个拼音`ON-draw-day`，Speak.js 可以处理这个，虽然我不认为口音是正确的，但是像这样的：

`Juan Acevedo`=>`OSS-uh-vay-doe`被破坏为`O-S-S-uh-vay-doe`.

# image - Sitecore：带有预览图像的子布局

> ID：15836590
> 
> 赞同：2
> 
> 时间：2013-04-05T14:32:22.723
> 
> 标签：image, rendering, sitecore, page-editor, sublayout

当我在页面编辑器中添加组件时选择渲染时，谁能告诉我如何添加预览图像？我仍然有一个默认的子布局图标。我有来自 Sitecore 的 Nicam 演示站点，并且有一些图像，但我找不到可以选择的位置。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T14:40:53.090

当您转到您的子布局（/sitecore/Layouts/Sublayouts 或 Renderings）时，您可以选择您的，转到外观部分并转到缩略图字段。点击那里的截图按钮。

然后，您可以在“项目”字段中选择要从中获取缩略图的页面、要使用的设备，然后单击“截屏”。在此之后，页面将显示，您可以在其中选择要用作屏幕截图的页面部分

**[更新]** 我决定就此写一篇博文：[在这里阅读](http://trayek.wordpress.com/2013/04/08/changing-icons-for-insert-options/)

# jquery - jquery在元素tr、td和div中添加属性

> ID：15836592
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:32:29.813
> 
> 标签：jquery

先生，我需要使用 jquery 在 tag 中添加元素`td`，其中包含`tr`and 。`div``onmouseout``onmouseover`

如果找到`onmouseout="ANY FUNCTION"`，那么我需要添加属性`onblur="SAME FUNCTION AS onmouseout"`。

然后如果找到`onmouseover="Any Function"`那么我需要添加属性`onfocus="sane functions as onmouseover"`。

此函数包含在 tag 中`td, tr or div`。

**示例 td：**

```
<td onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="zz1_GS"> 
```

**然后我需要：**

```
<td onmouseover="Menu_A(this)" onfocus="Menu_A(this)" onmouseout="Menu_Unhvr(this)" onblur="Menu_Unhvr(this)" onkeyup="Menu_Key(this)" id="zz1_GS"> 
```

**示例 tr：**

```
<tr onmouseover="Menu_HoverDynamic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="zz86756f"> 
```

**然后我需要这样的东西：**

```
<tr onmouseover="MDynamic(this)" onfocus="MDynamic(this)" onmouseout="Menu_r(this)" onblur="Menu_r(this)" onkeyup="Menu_Ky(this)" id="zz86756f"> 
```

**示例 div：**

```
<div class="1_5656" id="d867444f" onmouseover="PopOUp(this)" onmouseout="PopOStop(this)" style="text-align:center;"> 
```

**然后我需要这样的东西：**

```
<div class="1_5656" id="d867444f" onmouseover="PopOUp(this)" onfocus="PopOUp(this)" onmouseout="PopOStop(this)" onblur="PopOStop(this)" style="text-align:center;"> 
```

id名称不一样，td和tr的级别不统一。

谁能帮我实现这一目标？

我已经完成了这段代码，但它不起作用：

```
 $('div[onmouseout]').each(function() {
        $(this).attr('onblur', $(this).attr('onmouseout'));
        }

        $('div[onmouseover]').each(function() {
        $(this).attr('onfocus', $(this).attr('onmouseover'));
        }

        $('tr[onmouseout]').each(function() {
        $(this).attr('onblur', $(this).attr('onmouseout'));
        }

        $('tr[onmouseover]').each(function() {
        $(this).attr('onfocus', $(this).attr('onmouseover'));
        }

        $('td[onmouseout]').each(function() {
        $(this).attr('onblur', $(this).attr('onmouseout'));
        }

        $('td[onmouseover]').each(function() {
        $(this).attr('onfocus', $(this).attr('onmouseover'));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:56:56.603

尝试这个

```
$("div, tr, td").not("[onmouseout='']").each(function () {
    $(this).attr('onblur', $(this).attr('onmouseout'));
});

$("div, tr, td").not("[onmouseover='']").each(function () {
    $(this).attr('onfocus', $(this).attr('onmouseover'));
}); 
```

**更新。** 刚刚检查过，效果很好。重新检查我的代码以找出失败的地方：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
 <script>
 function PopOUp() {}
 function PopOStop() {}

 $(function () {
    $("div, tr, td").not("[onmouseout='']").each(function () {
        $(this).attr('onblur', $(this).attr('onmouseout'));
    });

    $("div, tr, td").not("[onmouseover='']").each(function () {
        $(this).attr('onfocus', $(this).attr('onmouseover'));
    });
});
 </script>
</head>
<body>
<div class="1_5656" id="d867444f" onmouseover="PopOUp(this)" onmouseout="PopOStop(this)" style="text-align:center;"></div>

<table onmouseover="PopOUp(this)" onmouseout="PopOStop(this)">
    <tr onmouseover="PopOUp(this)" onmouseout="PopOStop(this)">
        <td onmouseover="PopOUp(this)" onmouseout="PopOStop(this)"></td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:47:36.890

实际上可以通过复制属性并使用空属性选择器来获取具有该特定属性的所有元素来做到这一点：

```
var $mo = $('[onmouseover]'),
    fstr = $mo.attr('onmouseover'),
    bstr = $mo.attr('onmouseout');
$mo.attr('onfocus',fstr).attr('onblur',bstr); 
```

# ruby-on-rails - 使用 Rails 表单构建器，有没有办法让选中的复选框等于 false 值？

> ID：15836593
> 
> 赞同：0
> 
> 时间：2013-04-05T14:32:34.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

这是为了`f.check_box`在 Rails`form_for`块中使用该方法。

复选框表示模型上的布尔属性。但是，我想检查等于假，不检查等于真。选中 (false) 也是默认值。

因此，如果用户将其选中并提交表单，则模型属性将为 false。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:53:23.577

请参阅[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-check_box)。你应该没问题

```
f.check_box :something, {}, 0, 1 
```

和分别是选中`0`和`1`未选中的值。

**更新：**我认为复选框在给定其选中/未选中值时会被正确选中/取消选中，但如果不是这种情况，您可以这样做：

```
f.check_box :something, { :checked => !@model.something }, 0, 1 
```

即明确告诉复选框在属性为假时被选中，在属性为真时不选中。

但是，总是翻转值变得有点令人困惑。也许处理它的“柔道”方式是重命名属性，因此可以使用 Rails 的默认行为 false = unchecked。

**第二次更新：**复选框的语义非常清晰：选中意味着 true（因此是 Rails 的默认行为）。因此，如果您使用“向后”复选框，我想您的域模型存在问题。如果用户选中该框，则该用户对某事的回答是肯定的（例如“是的，我想要你的时事通讯”或“是的，我想保持登录状态”）。
如果您的模型必须翻转它，那么您的模型的属性与用户意图相比是倒退的，并且可能是双重否定的（例如，“是的，我想要你的时事通讯”变成`no_newsletter = false`）。我想用简单的术语对其建模一定更简单。

# c# - 如何在带有动态 linq 的 orderby 子句中使用 automapper？

> ID：15836597
> 
> 赞同：0
> 
> 时间：2013-04-05T14:32:41.910
> 
> 标签：c#, linq, dynamic, sql-order-by, automapper

我使用 orderProperties 变量作为动态 linq，我需要在 OrderBy 子句中使用 AutoMapper。我需要将“MyColumn”属性从 Resource 类映射到 ResourceViewModel 类的其他属性。Query() 返回资源的 IQuerable。例如，我在 Resouce 类中具有 MyColumn 属性，我需要将其映射到位于 ResourceViewModel 中的 MyOtherColumn。任何想法如何做到这一点？

```
string orderProperties = "MyColumn Ascending";

var orderList = _resourceRepository.Query()
                                   .OrderBy(orderProperties)
                                   .Select(Mapper.Map<Resource, ResourceViewModel>); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:03:29.927

我会尝试另一种方法：

*   将我的查询结果存储在一个变量中
*   然后使用自动映射器翻译该结果集。

**排序应该完全独立于自动映射器。** Autommapper 只“翻译”这些东西。

像这样的东西：

```
string orderProperties = "MyColumn Ascending";

var orderList = _resourceRepository.Query()
                                   .OrderBy(orderProperties)
                                   .ToList();
Mapper.CreateMap<IList<Resource>, IList<ResourceViewModel>>();
var results = Mapper.Map<IList<Resource>>(orderList); 
```

高温高压

# c# - C# 从 Windows Azure 存储下载返回一个空文件，没有任何异常

> ID：15836598
> 
> 赞同：2
> 
> 时间：2013-04-05T14:32:43.190
> 
> 标签：c#, .net, windows-store-apps, azure-blob-storage, azure-mobile-services

我正在尝试将 Windows Azure 存储用于我的带有移动服务的 Windows Store 应用程序来存储图像。我按照本指南进行了上传工作：

[http://www.windowsazure.com/en-us/develop/mobile/tutorials/upload-images-to-storage-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/upload-images-to-storage-dotnet/)

但是，我找不到任何有关下载文件的材料。我什至找不到 Windows 商店版本的类参考！如果有人可以指导我查看文档，我将不胜感激。

无论如何，我编写了代码，但它似乎不起作用：

```
public static async System.Threading.Tasks.Task DownloadUserImage(SQLUser userData)
{
    var usersFolder = await GetUsersFolder();
    var imageUri = new Uri(userData.ImageUri);
    var accountName = "<SNIP>";
    var key = "<SNIP>";

    StorageCredentials cred = new StorageCredentials(accountName, key);
    CloudBlobContainer container = new CloudBlobContainer(new Uri(string.Format("https://{0}/{1}", imageUri.Host, userData.ContainerName)), cred);
    CloudBlockBlob blob = container.GetBlockBlobReference(userData.ResourceName);

    var imageFile = await usersFolder.CreateFileAsync(userData.Id.ToString() + ".jpg", CreationCollisionOption.ReplaceExisting);
    using (var fileStream = await imageFile.OpenAsync(FileAccessMode.ReadWrite))
    {
        try
        {
            await blob.DownloadToStreamAsync(fileStream);
        }
        catch (Exception e)
        {
            Tools.HandleLiveException(e);
        }
    }
} 
```

此代码会导致创建空文件，但它不会引发任何异常。如果我将 imageUri 的值粘贴到我的浏览器，它会开始下载文件并成功完成下载。但是，由于某种原因，我的程序没有。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:25:47.353

显然，我一直以错误的方式打开流。这是一个修复：

```
public static async System.Threading.Tasks.Task DownloadUserImage(SQLUser userData)
{
    var usersFolder = await GetUsersFolder();
    var imageUri = new Uri(userData.ImageUri);
    var accountName = "<SNIP>";
    var key = "<SNIP>";

    StorageCredentials cred = new StorageCredentials(accountName, key);
    CloudBlobClient client = new CloudBlobClient(new Uri(string.Format("https://{0}", imageUri.Host)), cred);
    CloudBlobContainer container = client.GetContainerReference(userData.ContainerName);
    var blob = await container.GetBlobReferenceFromServerAsync(userData.ResourceName);

    var imageFile = await usersFolder.CreateFileAsync(userData.Id.ToString() + ".jpg", CreationCollisionOption.ReplaceExisting);
    using (var fileStream = await imageFile.OpenStreamForWriteAsync())
    {
        try
        {
            await blob.DownloadToStreamAsync(fileStream.AsOutputStream());
        }
        catch (Exception e)
        {
            Tools.HandleLiveException(e);
        }
    }
} 
```

它现在完美运行。

# ibm-mobilefirst - Worklight [adapter-deployer] 严重：元素 必须是数字

> ID：15836603
> 
> 赞同：0
> 
> 时间：2013-04-05T14:32:59.193
> 
> 标签：ibm-mobilefirst

目前在使用的环境中，端口不是一直都可以指定的。在我的 xml`<connectivity>`设置中，`<port>`将是空白的。

```
<connectivity>
    <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
        <protocol>http</protocol>
        <domain>worklightserver.test.com</domain>
        <port></port>           
    </connectionPolicy>
    <loadConstraints maxConcurrentConnectionsPerNode="2" />
</connectivity> 
```

打电话时

```
<adapter-deployer deployable="test.adapter" worklightServerHost="http://192.168.1.9:8080"/> 
```

我得到错误：

```
[adapter-deployer] SEVERE: Element <port> must be a number. 
```

这是工作灯中的错误吗？我假设如果未指定端口，它将根据指定的协议使用正确的端口。指定端口后，它可以正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:49:34.070

HTTP 协议可以在任何端口上工作，不一定是 80。必须始终指定端口。

# hibernate - 如何在没有主键的情况下休眠实体多对一连接

> ID：15836605
> 
> 赞同：1
> 
> 时间：2013-04-05T14:33:00.177
> 
> 标签：hibernate, jboss

我正在尝试进行 ManyToOne 连接，其中需要 2 个值来定义关系。我有一个带有唯一键和业务相关 ID 号的 Person 表。在地址表中，关系是由id号定义的，而不是唯一的key。Person 是唯一的，由 ID 号和将其标记为活动的列组合而成。

我正在使用 jboss 4.2.3 和休眠 3.2.4。

如果这是一个唯一键，我会在地址实体中这样做

```
@ManyToOne
@JoinColumn(name ="PERSON_ID")
private Person person; 
```

基本上我想运行这个相同的连接，但使用 Person ACTIVE = 'Y' 的另一个规范。

我见过像使用过滤器或在哪里这样的事情，但我无法让它们工作。我还看到了可以使用多个连接列的示例，但这是一个固定值，不希望它作为列存储在表中。

# ios - iPhone之间的蓝牙通信是否加密？

> ID：15836611
> 
> 赞同：0
> 
> 时间：2013-04-05T14:33:15.073
> 
> 标签：ios, objective-c, gamekit

我有一个 iPhone 应用程序，用于`GameKit`在两个设备之间创建蓝牙连接。我的问题是：连接是加密的还是我需要手动执行？

我使用`GKPeerPickerController`连接`GKPeerPickerConnectionTypeNearby`类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:52:30.283

来自[Apple 的开发者文档：](https://developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/Bluetooth/BT_Bluetooth_Basics/BT_Bluetooth_Basics.html#//apple_ref/doc/uid/TP30000997-CH214-TP9)

> 在协议栈的最低级别，蓝牙使用称为 SAFER+ 的公开可用密码算法来验证设备的身份。通用访问配置文件依赖于其设备配对过程的此身份验证。此过程涉及创建特殊链接以创建和交换链接密钥。验证后，链接密钥用于协商设备将用于其通信的加密模式。

因此，蓝牙协议负责加密连接。

# asp.net - radGrid 控件在更改日期参数后显示空白网格

> ID：15836616
> 
> 赞同：0
> 
> 时间：2013-04-05T14:33:32.290
> 
> 标签：asp.net, data-binding, telerik, radgrid

我搜索了 SO、google 和 Telerik 论坛，但找不到解决方案。

我有一个现有应用程序（由以前的开发人员编写）正在调用填充 RadGrid 控件的存储过程。它第一次填充得很好。

但是，当我更改日期参数时，单击“搜索”按钮，我得到一个空白的 RadGrid 控件。当我第二次单击搜索时，会填充网格。当我浏览代码时，我收到一条错误消息

> 列“ID”不属于表 Table。

如何解决必须单击两次搜索才能显示数据的问题？

我背后的代码是：

```
protected void btnSubmit_OnClick(object sender, EventArgs e)
{
    try
    {
        ViewState["newset"] = null;
        CreateDatasource();
        this.RadGrid1.DataBind();
        this.RadGrid1.CurrentPageIndex = 0;
        ViewState["newset"] = "new";    

        string idex = this.hdnindex.Value;
        if (idex != string.Empty)
            this.RadGrid1.MasterTableView.Items[int.Parse(idex)].Selected = true;

     }
     catch (Exception ex) {
        this.lblMessage.Text = ex.Message; 
     }         
}

protected void RadGrid1_ItemCreated(object sender, GridItemEventArgs e)
{
    try
    {
        if (e.Item is GridDataItem)
        {
            GridDataItem item = (GridDataItem)e.Item;
            HyperLink hLink = (HyperLink)item["ViewHyperLink"].Controls[0];
            if (hLink != null)
                hLink.Attributes.Add("onclick", "selectMe('" + item.ItemIndex + "');");
        }
    }
    catch (Exception ex)
    {
        this.lblMessage.Text = ex.Message;
    }
} 
```

在上面后面的代码中，当 this.RadGrid1.DataBind() 被调用时，代码会`RadGrid1_ItemCreated`通过几次 if 语句进入循环，它们进入 if 语句，退出函数，然后是 btnSubmit 的 catch 语句调用，显示错误信息“列ID不属于表Table”。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:05:17.840

也许你应该试试[Grid - Simple Data Binding](http://demos.telerik.com/aspnet-ajax/grid/examples/programming/simplebinding/defaultcs.aspx)。另外，telerik 论坛上的这个线程（[RadGrid NeedDataSource Page load ）详细讨论了简单数据绑定。](http://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-needdatasource-page-load.aspx#929603)我不知道您是否正在尝试使用 NeedDataSource，但我之前也遇到过类似的问题，并且 Simple Data 绑定工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:09:09.593

在我看来，这听起来确实像你需要在某个地方调用 RadGrid1.Rebind() 。尝试在 btnSubmit_OnClick 内的 try 块中的最后一行调用它。

另外，这个搜索按钮有什么作用？它是否根据日期过滤结果？

# linux - 如何grep大于符号？

> ID：15836619
> 
> 赞同：31
> 
> 时间：2013-04-05T14:33:40.893
> 
> 标签：linux, grep, special-characters

我正在尝试 grep 进行 php 函数调用

`grep -Ri '->someFunction' .`

但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-05T14:37:06.523

这不是引号：试试这个：

```
grep -Ri -- '->someFunction' . 
```

该`--`部分代表*选项结束*；这是一个shell技巧。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T15:57:55.133

这是“它不起作用”不足以诊断问题的情况之一。

在您的情况下，您收到的错误消息是

```
 grep: invalid option -- > 
```

这是您看到它`->someFunction`被视为命令行开关的线索。

我还建议您可能想查看[ack](http://betterthangrep.com)，它适用于这种源代码搜索。在你的情况下，你会这样做：

```
ack -i -- '->someFunction' 
```

# websocket - Websockets、Apache/wamp 和 PHP

> ID：15836620
> 
> 赞同：0
> 
> 时间：2013-04-05T14:33:41.603
> 
> 标签：websocket, phpwebsocket

我对 websockets 很陌生。我用谷歌搜索并抓取了一些示例代码，但它们都不起作用。尽管严格遵循教程规则，但所有显示断开消息。

我正在 localhost、Windows 7 Ultimate（32 位）上使用 chrome、wamp 和 PHP 5.3.13（php_socket 也处于活动状态）进行测试。

我想问的是，我是否需要配置我的服务器以支持 websocket。如果不是，是什么原因没有按预期运行？

任何形式的帮助都受到热烈欢迎！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:10:59.013

我建议您通过 StackOverflow 进行搜索，因为这个问题和类似的问题已经被问了很多次，例如

*   [是否提供对 Web Sockets 的原生 PHP 支持？](https://stackoverflow.com/questions/12203443/is-native-php-support-for-web-sockets-available)
*   [PHP 服务器和 websockets](https://stackoverflow.com/questions/9739733/php-server-and-websockets)
*   [网络套接字和 PHP](https://stackoverflow.com/questions/15220501/websockets-php)
*   [LAMP 专家如何轻松实现 WebSockets？](https://stackoverflow.com/questions/9853410/how-can-a-lamp-guy-easily-implement-websockets)

# c - tcp 聊天客户端中的同步

> ID：15836622
> 
> 赞同：1
> 
> 时间：2013-04-05T14:33:52.713
> 
> 标签：c, sockets, tcp, synchronization, fork

我的应用程序是一个多用户聊天室。服务器只是将收到的消息发送给所有客户端（回显给所有客户端，包括接收消息的来源）。

对于每个客户，任务是：

1.  迅速的
2.  接受用户输入
3.  将用户写的消息发送到服务器

同时，每个客户需要：

1.  从服务器接收数据（如果有）
2.  打印到控制台

为了实现上述逻辑，我尝试使用`fork()`如下：

```
pid = fork();
if(!fork()){
    while(1){
        memset(recvmsg,0,RCVBUFSIZE);
        read(conn_s, recvmsg, RCVBUFSIZE);
        printf("\n>%s",recvmsg);         
    }
}
else{
    while(1){
        printf("\n%d> ", conn_s);
        memset(msg,0,RCVBUFSIZE);
        fgets(msg, RCVBUFSIZE, stdin); 

        strrep(msg,'\n','\0');
        write(conn_s, msg, strlen(msg));

        if( strcmp(msg,"quit") == 0){
            kill(pid, SIGKILL);
            exit(0);
        }
    }
} 
```

问题是，第一个客户端输入后回显的消息，`msg`是不打印的。当客户端输入下一条消息时，将打印最后一条消息。

当连接多个用户时，程序的行为不一致。它将收到的消息堆叠起来，并将它们全部打印在一行中。

我尝试使用`select()`and `poll()`，但程序每次的行为都不同。

当没有收到进入回显消息的第一条消息时，它从下一条消息中收到最后一条消息。因此，当有多个用户时，它会搞砸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:03:09.510

您可能想使用`setbuf(stdout, NULL);`关闭（行）缓冲`stdout`，看看情况是否更好。

# ios - 如何从 UIView 子类调用 UIViewController 方法

> ID：15836624
> 
> 赞同：1
> 
> 时间：2013-04-05T14:33:59.730
> 
> 标签：ios, objective-c, ipad, delegation

我正在为 iPad 开发 iOS 应用程序。我有一个 UIView 子类，我想从该子类调用 ViewController 的一个方法。我试图编写一个委托，但它不起作用。这是一个好的解决方案还是我必须以另一种方式做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:13:08.767

尝试块，这是示例：

我的视图.h

```
@interface MyView: UIView 
...
@property (nonatomic, copy) void(^myEventCallBack)(id someData);
...
@end 
```

MyView.m（如何调用块示例）

```
...

- (IBAction)buttonTapped:(UIButton *)sender {
   if (self.myEventCallback) {
       self.myEventCallback(self.someImportantData);
   }
}

... 
```

在你的 UIViewController 中：

```
self.myView = [[MyView alloc] initWithFrame:someFrame];

// THIS IS VERY IMPORTANT, USE __weak COPY OF YOUR UIViewController OBJECT (owner of object which contains block) INSIDE BLOCK TO PREVENT RETAIN CIRCLE, CAUSE BLOCK RETAINS ITS CONTENT
__weak MyViewController *self_ = self;
self.myView.myEventCallback = ^(id someData){
    [self_ doSomeProcessingWithData:someData];
}; 
```

块也可以与返回值一起使用，示例：

```
@property (nonatomic, copy) BOOL(^shouldStartProcessing)(void);

self.myView.myEventCallback = ^BOOL{
    return (self_.state == MyViewControllerStateReady);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:16:36.453

一般来说，概念上“遥远的”对象之间的通信问题是一个棘手的问题，但它是 Cocoa 编程的核心。从一个实例到另一个实例的引用至关重要！我在这里讨论这个问题：

[http://www.aeth.com/iOSBook/ch13.html#_instance_visibility](http://www.apeth.com/iOSBook/ch13.html#_instance_visibility)

这是一种可能性。如果这个 UIView 实例在界面中，那么它要么`nextResponder`是视图控制器，要么是作为视图控制器的父视图的子`nextResponder`视图。此外，视图层次结构与响应者链平行。因此，只需沿着响应者链向上走，直到到达视图控制器。

```
UIResponder* r = someView; // the view instance, living in the interface
while (![r isKindOfClass:[UIViewController class]])
    r = [r nextResponder]; 
```

现在`r`是视图控制器。现在转换为您所知道的实际视图控制器的类，您将能够在其上调用方法：

```
MyViewController* vc = (MyViewController*)r; 
```

这是我的书对响应者链的总结：

[http://www.aeth.com/iOSBook/ch11.html#_the_responder_chain](http://www.apeth.com/iOSBook/ch11.html#_the_responder_chain)

然而，还有许多其他的可能性。正如有人已经建议的那样，您可以通过 NSNotification (shoutcasting) 建立通信线路；它很丑，但它确实有效，它的部分目的是为了覆盖这种棘手的情况。

# android - 安卓 ksoap2 wsdl

> ID：15836627
> 
> 赞同：0
> 
> 时间：2013-04-05T14:34:11.837
> 
> 标签：android, soap, ksoap2

我正在使用 ksoap2 库。我需要从[http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl获取命名空间、方法名称、url 和操作名称](http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl)

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:34:22.600

尝试这个：

```
String METHOD_NAME = "checkVat";
String NAMESPACE = "urn:ec.europa.eu:taxud:vies:services:checkVat";
String SOAP_ACTION = "";
String URL = "http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl"; 
```

# dart - 打印对象地址

> ID：15836628
> 
> 赞同：0
> 
> 时间：2013-04-05T14:34:16.380
> 
> 标签：dart

打印飞镖对象的地址有什么技巧吗？我遇到了一个问题，我有一个标准枚举类，如[Dart 支持枚举吗？](https://stackoverflow.com/questions/13899928/does-dart-support-enumerations).

```
class Access {
  static const IA = const Access._(0);
  static const RO = const Access._(1);
  static const RW = const Access._(2);
  final int value;
  const Access._(this.value);
...
} 
```

变量*access*是 Access 类型，值为 1，但*access==Access.RO*返回 false。

```
var access = _.access;
print('''
access => ($access, ${access.runtimeType}, ${access.value})
static => (${Access.RO}, ${Access.RO.runtimeType}, ${Access.RO.value})
equal ? => ${(access == Access.RO)}
'''); 
```

印刷

```
access => (RO, Access, 1)
static => (RO, Access, 1)
equal ? => false 
```

如果我提供一个*operator==(Access other)*来比较它返回预期值的值。所以，我想这可能与来自不同库的课程（可能与隔离相关）有关，如果我可以打印*access*和*Access.RO*的地址，我可以看看它们是否不同。当然，如果它们不同，我也需要知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:56:00.487

当你处理*const*时，你必须非常小心。如果你使用`new Access._(0)`而不是`const Access._(0)`你将不会得到相同的对象。这是一个例子：

```
class Access {
  static const IA = const Access._(0);
  static const RO = const Access._(1);
  static const RW = const Access._(2);
  final int value;
  const Access._(this.value);
}

main(){
  print(Access.IA == const Access._(0));  // prints true
  print(Access.IA == new Access._(0));  // prints false
} 
```

这可以解释你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:30:50.510

如果`identical(a, b)`返回 false，您可以确定它们的指针不同。（数字不一定是相反的，但这是一个实现细节）。

如果您正在处理隔离物，则在传输对象时需要小心。即使它们在一侧被规范化，在它们被传播到另一个隔离物之后它们也不会被规范化：

```
import 'dart:async';
import 'dart:isolate';

class A { const A(); }

foo() {
  port.receive((x, _) {
    print(x == const A());  // Prints false.
  });
}

main() {
  var p = new ReceivePort();  // To keep the program running.
  spawnFunction(foo).send(const A(), null);
} 
```

另请注意，dart2js 不允许传输任意对象。

# pyside - 子类中的 QTabBar.setTabButton() 使应用程序崩溃

> ID：15836631
> 
> 赞同：1
> 
> 时间：2013-04-05T14:34:20.527
> 
> 标签：pyside

在以下 Python 代码段中，应用程序在我运行时崩溃。我在 Mac OS X、Windows 和 Ubuntu 上对其进行了测试：

```
import sys
from PySide.QtCore import *
from PySide.QtGui import *

class TabbedWindow(QTabWidget):

    def __init__(self):
        super(TabbedWindow, self).__init__()
        self.setWindowTitle(u"Tabs Test")
        self.resize(800, 600)

        self.addTab(QTextEdit(), "Tab 1")
        self.addTab(QCalendarWidget(), "Tab 2")

        self.setTabsClosable(True)

        tabBar = self.tabBar()
        menuButton = QPushButton('')
        menuButton.resize(0,0)
        tabBar.setTabButton(1, QTabBar.RightSide, menuButton)

def main():
    app = QApplication(sys.argv)
    window = QMainWindow()
    tabs = TabbedWindow()
    window.setCentralWidget(tabs)
    window.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

当我删除此行时`tabBar.setTabButton(1, QTabBar.RightSide, menuButton)`，它起作用了！

此外，如果我将这条线移动到`main`功能：它也可以！我的意思是当我将它添加到主要功能时：

```
tabBar = tabs.tabBar()
menuButton = QPushButton('')
menuButton.resize(0,0)
tabBar.setTabButton(1, QTabBar.RightSide, menuButton) 
```

我想要做的是在某些选项卡上隐藏关闭按钮。

是否有任何解决方法来执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T08:50:14.897

最后，我找到了让它工作的答案！

您必须将按钮声明为该类的成员。

```
self.menuButton = QPushButton('') 
```

代替

```
menuButton = QPushButton('') 
```

我希望有人会发现这个解决方案很有用。

# c# - IOS 设备上的 XMLHttpRequest 异常 101

> ID：15836635
> 
> 赞同：4
> 
> 时间：2013-04-05T14:34:26.293
> 
> 标签：c#, jquery, asp.net, ios, ajax

我最近开始在 IOS 设备上的 jquery ajax 调用上收到以下消息：

错误：NETWORK_ERR：XMLHttpRequest 异常 101

ajax 调用在所有设备上运行了几个月，但我的一个客户上周开始收到此消息。

我已经阅读了一些关于它是跨域请求问题的信息，但在这种情况下不应该适用。

我还读到将 async 更改为 true 可以解决问题，但如果可以的话，我想避免这种情况。

这是ajax调用：

serverSideFunction 参数采用“AdvancedDistribution.aspx/SaveClicked”形式，其中 AdvancedDistribution.aspx 当然是 aspx 文件，而 SaveClicked 是静态 WebMethod(C#)。

para 只是一个带有参数值的二维数组。

```
function ajaxCall(serverSideFunction, para)
{
    ajaxReturn = "";  
    var dataPara = "{";
    for (var i = 0; i < para.length; i++)
    {
    dataPara += "'" + para[i][0] + "':'" + para[i][1] + "'";
        if (i < para.length - 1)
        dataPara += ",";
    }
    dataPara += "}";

    $.ajax({
    type: "POST",
    url: serverSideFunction,
    data: dataPara,
    async: false,
    //&&JS01112013.2 Fix bug caused by IOS6 ajax caching
    headers: {"cache-control": "no-cache"},
    beforeSend: function (xhr)
    {
        xhr.setRequestHeader("Content-type", "application/json; charset=utf-8");
    },
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg, status)
    {
        ajaxReturn = msg.d;
    },
    error: function (xhr, msg, e)
    {
        alert(e); //Error Callback
        alert('Ajax Callback Failed');
    }
    });

    return ajaxReturn;
} 
```

由于这仍然适用于大多数设备，我希望它就像在 ajax 调用中添加和 IOS 所需的标头一样简单。

有任何想法吗？

谢谢。

# sql - 将主键添加到 SQL 视图

> ID：15836638
> 
> 赞同：0
> 
> 时间：2013-04-05T14:34:36.150
> 
> 标签：sql, sql-server, tsql

我在 SQL Server 数据库中创建了一个视图，它只是两个表的连接。

有什么方法可以将唯一的主键插入此视图的行中...或者我不确定如何将列名之一指定为主键...有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:39:27.713

您必须创建物化（索引）视图才能添加唯一索引。但是您不能创建 PK 约束。

```
CREATE VIEW v_test
WITH SCHEMABINDING --optional
AS
    SELECT id from table

GO

CREATE UNIQUE CLUSTERED INDEX idx_id
    ON v_test (id)
GO 
```

# jquery - 如何将元素定位在左上角并使其用作“到顶部”按钮？

> ID：15836639
> 
> 赞同：1
> 
> 时间：2013-04-05T14:34:36.880
> 
> 标签：jquery, html, css

![例子](https://i.stack.imgur.com/hD0ra.png) 我正在创建一个需要“到顶部”按钮的网站，我想将它放在左上角（如上图所示）。这是我的（杰基尔）HTML：

```
<body>
    <a name="top"></a>
    <a href="#top" id="toTop">TOP</a>
    <header id="head"><span id="ruby">text</span> text</header>
    <nav><ul>— {% for post in site.posts reversed %}{% if post.layout != 'no-title' %}
      <li><a href="#{{ post.anchor }}">{{ post.title }}</a></li>
    {% endif %}{% endfor %} —&lt;/ul></nav>
    <section id="content">
      {{ content }}
    </section>
    <small id="soon">— More content soon —&lt;/small>
    <footer><!-- content --></footer>
    <script>
      <!-- script -->

      $(document).ready(function(){$("a[href*=#]").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);a=a.length&&a||$("[name="+this.hash.slice(1)+"]");if(a.length){var b=a.offset().top;$("html,body").animate({scrollTop:b},1000);return false}}})});
    </script> 
```

底部的缩小脚本来自 CSS Tricks（[平滑滚动](http://css-tricks.com/snippets/jquery/smooth-scrolling/)）。这就是我想出的：

```
a#toTop{
position: fixed;
top: 5px;
left: 5px;
text-align: left;} 
```

但它并没有给我想要的结果。大多数网站都在[这个 Gist](https://gist.github.com/RafalChmiel/b49df4cf587e3305ae00)上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:47:17.780

您可以尝试执行以下操作：

HTML：

```
<body>
    <a id="top"></a>
</body> 
```

CSS：

```
body {
    position:   relative;
}

#toTop {
    position:   absolute;
    top:        5px;
    left:       5px;
    text-align: left;
} 
```

# sql - 如何在日期范围内生成周结束日期（星期六）

> ID：15836640
> 
> 赞同：0
> 
> 时间：2013-04-05T14:34:38.333
> 
> 标签：sql, sql-server-2008, visual-studio-2008, reporting-services

我需要在查询或临时表中生成一列（不确定需要哪一个）

这样我就可以得到一个在给定日期范围内的星期六日期列表。

此列表将用于连接以将记录与周相关联。

我有哪些选择？

样本输入：

从： 03/01/2013

至：2013 年 4 月 30 日

结果：

周末 - 03/02/2013 - 03/09/2013 - 03/16/2013 - 03/23/2013 - 03/30/2013 - 04/06/2013 - 04/13/2013 - 04/20/2013 - 2013 年 4 月 27 日 - 2013 年 5 月 4 日

当前代码：

```
create table #TBL7(YEAR  INT, WEEKNUMBER  INT, STARTDATE  DATETIME, ENDDATE DATETIME)

begin
    declare @startdate datetime
                    , @enddate datetime
                    , @ctr int

    SET @startdate = CAST(2013 AS VARCHAR)+ '/01/01'
    SET @enddate = CAST(2013 AS VARCHAR) + '/12/31'
    SET @ctr = 0
    WHILE @enddate >= @startdate
    BEGIN
            SET @ctr = @ctr + 1
            INSERT INTO #TBL7
            values(year(@startdate), @ctr, @startdate, @startdate + 6)
            SET @startdate = @startdate + 7
    END

end

select * from #TBL7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:00:59.490

首先，创建一个[日历表](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)。然后你有一个非常简单的查询：

```
select [Date] 
from dbo.Calendar 
where DayOfWeek = 'Saturday' and [Date] between '20130301' and '20130430' 
```

日历表几乎总是处理日期的最佳方法，因为您处理的是数据，而不是代码，因此您可以看到它是正确的，并且没有需要维护的神秘代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:22:31.220

这是 Oracle 代码。抱歉，我不知道如何将其转换为 SQL SERVER。应该不会很辛苦。您只需要使用适当的函数代替 to_date() 和 to_char()，并计算开始日期和结束日期之间的差异，例如 (end_date-start_date)+1：

```
WITH data(r, some_date) AS 
(
 SELECT 1 r, to_date('03/01/2013', 'MM/DD/YYYY') some_date FROM dual
  UNION ALL
 SELECT r+1, to_date('03/01/2013', 'MM/DD/YYYY')+r FROM data WHERE r < 61 -- (end_date-start_date)+1
)
 SELECT some_date
      , To_Char(some_date, 'DY') wk_day
   FROM data
  WHERE To_Char(some_date, 'DY') = 'SAT'
  /

SOME_DATE    WK_DAY
--------------------
3/2/2013     SAT
3/9/2013     SAT
3/16/2013    SAT
3/23/2013    SAT
3/30/2013    SAT
4/6/2013     SAT
4/13/2013    SAT
4/20/2013    SAT
4/27/2013    SAT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:35:41.800

这应该有效：

```
WITH cteWeeks (WeekEnding) As
(
   -- Find the Saturday of the first week.
   -- Need to allow for different DATEFIRST settings:
   SELECT
      CASE
         WHEN DatePart(dw, DateAdd(day, @@datefirst, @StartDate)) = 7 THEN @StartDate
         ELSE DateAdd(day, 7 - DatePart(dw, DateAdd(day, @@datefirst, @StartDate)), @StartDate)
      END

   UNION ALL

   SELECT
      DateAdd(day, 7, WeekEnding)
   FROM
      cteWeeks
   WHERE
      WeekEnding < @EndDate
)
SELECT
   WeekEnding
FROM
   cteWeeks
; 
```

[http://www.sqlfiddle.com/#!3/d41d8/12095](http://www.sqlfiddle.com/#!3/d41d8/12095)

# c - 哪些内存位置用于变量存储

> ID：15836642
> 
> 赞同：0
> 
> 时间：2013-04-05T14:34:43.717
> 
> 标签：c, memory

诸如 javascript 之类的高级语言不会让程序员选择变量的存储位置。但是C会。我的问题是：对于存储变量的位置是否有任何指导，例如取决于大小、使用情况等。

据我了解，存储数据的可能位置有三个（不包括用于实际代码的代码段）：

1.  数据段
2.  堆
3.  堆

那么临时的小数据项应该存储在堆栈上吗？

必须在函数之间共享的数据项呢？这些项目可以存储在堆上或数据段中。你如何决定选择哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:48:19.577

当这些变量很小、经常使用并且在相对较小/有限的范围内使用时，您应该更喜欢局部/堆栈变量而不是全局或堆变量。这将使编译器有更多机会使用它们来优化代码，因为它知道它们不会在函数调用之间发生变化，除非你传递指向它们的指针。

此外，堆栈通常相对较小，在其上分配大型结构或数组可能会导致堆栈溢出，尤其是在递归代码中。

要考虑的另一件事是在多线程程序中使用全局变量。您希望最大限度地减少竞争条件的机会，一种策略是通过不直接使用其中的任何全局资源来使函数成为线程安全和可重入的（如果`malloc()`是线程安全的，如果`errno`是每线程等，您可以使用它们， 当然）。

顺便说一句，使用局部变量而不是全局变量也提高了代码的可读性，因为变量位于靠近它们使用的地方，您可以快速找出它们的类型以及它们的使用位置和方式。

除此之外，如果您的代码是正确的，那么在本地或全局或堆中创建变量之间应该没有太大的实际区别（当然，`malloc()`可能会失败，您应该记住它:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:14:59.907

你从望远镜的错误一端看。您没有指定存储变量的特定内存段（特别是因为“内存段”的概念*高度*依赖于平台）。

在 C 代码中，您根据对代码有意义的内容来决定变量的*生命周期*、*可见性*和*可修改*性，并基于此编译器将生成机器代码以将对象存储在适当的段中（如果适用）

例如，在文件范围（任何函数之外）或使用关键字声明的任何变量`static`都将具有*静态存储持续时间*，这意味着它们在程序启动时分配并保持到程序终止；这些对象可以分配在数据段或 bss 段中。`static`在没有关键字的函数或块中声明的变量具有*自动存储持续时间*，并且（通常）在堆栈上分配。

字符串文字和其他编译时常量对象通常（但不总是！）分配在只读段中。像数字文字`3.14159`和像字符常量这样`'A'`的字符不是*对象*，并且（通常）没有为它们分配内存；相反，这些值直接嵌入机器代码指令中。

*堆是为动态存储*保留的，*变量*本身不存储在那里；相反，您使用库调用，例如`malloc`在运行时获取堆的一块，并将生成的指针值分配给如上所述分配的变量。该*变量*将存在于堆栈或数据段中，而它*指向*的内存则存在于堆中。

*理想情况下*，函数应该仅通过参数、返回值和异常（如果适用）进行通信；函数不应通过外部变量（即全局变量）共享数据。函数参数通常在堆栈上分配，尽管某些平台可能通过寄存器传递参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:50:31.067

C 仅允许您通过变量和/或分配的范围来指定数据的间接存储位置。即，函数的局部变量通常是堆栈变量，除非它被声明为静态，在这种情况下它可能是 DATA/BSS。通过 new/malloc 动态创建的变量通常是堆的。

但是，不能保证任何...只有它的含义。

也就是说，保证是一个坏主意的一件事是在函数中声明大型局部变量......奇怪错误和堆栈溢出的常见来源。非常大的数组和结构最适合动态分配，并根据需要将指针保持在本地/全局中。

# ios - AFNetworking 没有建立正确的 URL？

> ID：15836644
> 
> 赞同：3
> 
> 时间：2013-04-05T14:34:47.867
> 
> 标签：ios, afnetworking

开始研究 iOS 并且需要 Restful 网络，所以我正在研究 AFNetworking。我遵循了一些很好的示例，并且我想我了解如何使用它，但是构建的请求没有预期的 URL。在 AFHTTPClient requestWithMethod 路径参数方法中，

```
po urlBase
$0 = 0x003b23b8 https://mysite.com/developer/api
(lldb) po url
$1 = 0x1eddf140 /users/current -- https://mysite.com/developer/api/
(lldb) po request
$2 = 0x1ed50580 <NSMutableURLRequest https://mysite.com/users/current> 
```

由于某种原因，开发人员部分正在被剥离。

我已经看到传递到 getPath 方法的相对路径字符串具有前导斜杠的示例，因此人们会期望基本 URL 没有尾部斜杠，但我已经看到人们在两者中都添加斜杠的示例。

我的基本 URL 变量是

```
NSString *const ServiceUrlBaseProduction  = @"https://mysite.com/developer/api/"; 
```

获取当前用户的相对路径是

```
@"/users/current"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:55:22.913

这是因为`AFHTTPSessionManager`' 对 URL 的解释。`AFHTTPSessionManager.h` [这里](https://github.com/AFNetworking/AFNetworking/blob/36bccffd5d9da855b6cd624ae582f72841cbabe2/AFNetworking/AFHTTPSessionManager.h#L67-L73)有一个关于如何正确编写 URL 的说明。我相信您会希望使用路径获取当前用户`users/current`（没有前导斜杠）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:52:31.607

尝试使用 NSURL：

```
NSURL *url = [NSURL URLWithString:@"https://mysite.com/developer/api/"]; 
```

然后：

```
[NSURL URLWithString:@"users/current" relativeToURL:url]; 
```

# android - 在我的 PreferenceActivity Activity 中调用方法形成另一个 Activity

> ID：15836645
> 
> 赞同：3
> 
> 时间：2013-04-05T14:34:48.763
> 
> 标签：android, android-activity, preferenceactivity

您好，感谢您的帮助，

我有以下情况。

在我的应用程序中，我使用 PreferenceActivity 来显示和允许更改设置，我们称之为**PreferenceActivity A**。

如果用户选择了一个特定的偏好，则会启动一个新的 Activity，我们称之为**Activity B**（A 没有被销毁）。

**我需要做的是在 Activity B 中调用 PreferenceActivity A 表单的方法。**

*请注意：PreferenceActivity A 中的方法不能是静态的。*

非常感谢任何帮助。

编辑 编辑 编辑 编辑 编辑 编辑

这就是 Activty B 的启动方式：当用户点击 PreferenceActivity A 屏幕中的对应项目时，就会触发 Intent。

```
 <PreferenceScreen
        android:key="addstocks"
        android:summary="Click here to add stocks"
        android:title="Add stocks" >
        <intent
            android:targetClass="com.stocktickerwidget.QuotesActivity"
            android:targetPackage="com.stocktickerwidget" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:35:34.860

不要像那样启动活动，而是在首选项上手动设置 OnPreferenceClickListener 并使用`startActivityForResult()`.

```
private static final int RESUEST_CODE = 1;
protected void onCreate() {
    /* ... */
    Preference pref = getPreferenceManager().findPreference("addstocks");
    pref.setOnPreferenceClickListener(new OnPreferenceClickListener() {
        public boolean onPreferenceClick(Preference preference() {
            if (preference.getKey().equals("addstocks") {
                startActivityB();
                return true;
            }
            return false;
        }
    });
}

private void startActivityB() {
    Intent intent = new Intent(this, ActivityB.class);
    startActivityForResult(intent, REQUEST_CODE);
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
        // do something here
    }
} 
```

# linux - 在 Valgrind/DrMemory 中记录程序状态然后恢复它是否可行？

> ID：15836646
> 
> 赞同：1
> 
> 时间：2013-04-05T14:34:48.687
> 
> 标签：linux, fork, valgrind, memcheck, dr-memory

我有一个在启动时加载大量数据的程序。这会占用相当长的时间，因此在运行[Valgrind( `memcheck`)](http://valgrind.org/) / [DrMemory](http://www.drmemory.org/)时会产生开销。所以当用不同的参数多次调用程序时，会占用相当多的时间

我的想法是`fork()`在数据加载阶段之后立即使用，然后将孩子交给 Valgrind/DrMemory。即使加载阶段在 Valgrind/DrMemory 下运行，开销也只会发生一次，并且所有`fork`ed 子进程应该能够从那里使用预加载的数据。

记录程序状态并将其声明为未污染，然后在 Valgrind ( `memcheck`) 或 DrMemory 中恢复该状态是否可行？

**注意：**我只对 unixoid 平台感兴趣，将其限制在 Linux 上也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:15:23.210

> 我的想法是在数据加载阶段之后立即使用 fork()，然后将孩子交给 Valgring/DrMemory。

由于许多原因，这是不可行的。例如，`glibc`将结果缓存`syscall(SYS_getpid)`在一个内部变量中，并且让多个进程相信它们具有相同的 pid（它们`!=`的真实 pid）显然是灾难的根源。

也就是说，是什么阻止您在初始化后运行`valgrind --trace-children=yes`然后ing 子进程？`fork`每个子进程都可以执行以下操作：

```
char buf[PATH_MAX];
sprintf(buf, "/tmp/parameters-for-%d", getpid());
while (true) {
  if (FILE *fp = fopen(buf, "r")) {
    // read parameters for this child, and exercise appropriate code paths
    return run_with_parameters(fp);
  }
  sleep(1);
} 
```

当您希望孩子`N`运行时，只需`echo "foo bar baz" > /tmp/parameters-for-N`等待它完成即可。所有其他孩子都会忙得不可开交，直到您准备好使用它们。

# cocoa - iOS MapKit - 每米点数

> ID：15836648
> 
> 赞同：1
> 
> 时间：2013-04-05T14:34:57.917
> 
> 标签：cocoa, mkmapview, mapkit, core-location

我在 MKOverlayView 子类中画了一个圆圈。我有一个以米为单位的半径。我如何将所述米转换为点（在该缩放比例下）以在 drawMapRect:zoomScale:inContext: 中绘图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:40:10.927

见标题：

帮手：

```
 // Conversion between distances and projected coordinates
 MK_EXTERN CLLocationDistance MKMetersPerMapPointAtLatitude(CLLocationDegrees latitude) NS_AVAILABLE(NA, 4_0);
 MK_EXTERN double MKMapPointsPerMeterAtLatitude(CLLocationDegrees latitude) NS_AVAILABLE(NA, 4_0);

 MK_EXTERN CLLocationDistance MKMetersBetweenMapPoints(MKMapPoint a, MKMapPoint b) NS_AVAILABLE(NA, 4_0); 
```

并从 MKOverlayView

```
 // Convert screen points relative to this view to absolute MKMapPoints
 - (CGPoint)pointForMapPoint:(MKMapPoint)mapPoint;
 - (MKMapPoint)mapPointForPoint:(CGPoint)point; 
```

所以

```
double ppm = MKMapPointsPerMeterAtLatitude(centerCoordinate.latitude);
MKMapPoint mkptLeftmost = ptCenter.x -= ppm;
CGPoint ptLeftmost  = [self pointForMapPoint:mkptLeftmost]; 
```

# c# - 错误 CS0029：无法将类型“Cairo.Context”隐式转换为“Cairo.Context” - 单声道版本冲突

> ID：15836651
> 
> 赞同：1
> 
> 时间：2013-04-05T14:35:06.863
> 
> 标签：c#, mono, cairo

显然，我的 Mono.Cairo 版本存在冲突。我可以看到 /usr/lib/mono/gac/Mono.Cairo 有两个文件夹，一个用于 2.0 版本，一个用于 4.0 版本。从我在谷歌搜索结果中看到的内容来看，这导致了冲突。导致麻烦的代码行是`using (Cairo.Context ctx = Gdk.CairoHelper.Create (area.GdkWindow))`

显然，这个问题已经在[这里](https://stackoverflow.com/questions/7672771/mono-ubuntu-conflicting-definitions "这里")得到了回答，但我不知道他们在说什么。所以我告诉你：有没有办法让 dmcs 使用非冲突的 Cairo.Context？

我正在使用带有 xmonad 的 Ubuntu 12.04，最新版本是来自 apt-get 的软件包 mono-complete。

编译í write: `dmcs -pkg:gtk-sharp -pkg:mono-cairo Teikniforrit.cs`, Teikniforrit.cs 是一个简单的绘画工具。mcs 和 gmcs 从来没有为我工作过。我在 Windows 7 上设置了单声道，看看它是如何工作的，它在 gmcs 上运行良好，但不是 mcs 或 dmcs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:08:29.693

您很可能遇到了我不久前看到的相同[错误](https://bugzilla.xamarin.com/show_bug.cgi?id=10484)，该错误包含在 Mono 提供的错误 PC 文件中。[我在这个提交](https://github.com/mono/mono/commit/f7f522d26cddd3ad310c9ea0202012ed23059d96)中修复了这个问题，你可以尝试升级你的 Mono 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:03:07.943

您需要拥有相同“版本”的 Cairo.Context 才能使用它。

您可以像这样在您的案例中看到 Cairo.Context

1.  您在 Cairo.Context 的 2.0 中
2.  您在 Cairo.Context 的 4.0 中
3.  Cairo.Context 2.0 与 Cairo.Context 4.0 进行比较
4.  不一样，因为 2.0 != 4.0

这是说明您的代码为什么不起作用的更好方法。

您的帖子中引用的解决方案对此进行了解释，并指定了如何修复要使用的版本，以便在所有情况下都拥有良好的版本并避免该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T11:35:28.470

正如 knocte 所说，这种情况正好对应于 mono 中的一个固定错误。

我遇到了同样的问题，安装新版本的单声道修复了这些问题。由于它尚未集成到最新的 ubuntu 中（13.04），我发现这个链接非常有用：[http ://www.meebey.net/posts/mono_3.0_preview_debian_ubuntu_packages/](http://www.meebey.net/posts/mono_3.0_preview_debian_ubuntu_packages/)

这使您可以安装较新的单声道，而无需手动编译它。

# dependency-injection - 在 laravel 3 中使用 IoC 路由嵌套控制器进行依赖注入

> ID：15836652
> 
> 赞同：0
> 
> 时间：2013-04-05T14:35:08.513
> 
> 标签：dependency-injection, routing, controller, inversion-of-control, laravel-3

> **更新：**如果我可以使用不同的方法达到相同的结果，请赐教。

我在构建项目时正在使用/学习 laravel 3。在对任何页面内容进行编码之前，我正在验证我是否可以按计划部署所有内容，因为这个项目是对一个相当大的应用程序的实际重写，它使用的技术已经严重过时。

我在最后一部分苦苦挣扎，这很可能是我在设置项目时将面临的最困难的挑战。

网址：

```
site.com/shops/__identifier__/controller/action/params 
```

以上是我正在尝试对 atm 进行编码的 uri。_***标识符*****_***部分应该成为模型（基于 eloquent **）***

 ***商店**是嵌套控制器的基础

IE：

```
controllers/
  - shops/
      - home.php
      - contact.php
      - products.php
      - etc .... 
```

每个现有的 uri 商店/**标识符**本身就是一个真实的站点。（虽然它有不同的域offcourse）我希望我所有的嵌套商店控制器都知道他们正在与哪个商店合作。事实上，标识符将用于加载正确的布局、渲染正确的图像、联系方式等...根据我所读到的内容，我需要使用**IoC**功能来注入我的商店的依赖项**-模型**进入我的控制器的构造函数。

这就是我的自动取款机：

文件：**应用程序/start.php**

```
/**
* Register IoC container for my nested shop controllers
*/
IoC::register('controller: shop', function($controller, $identifier)
{
    //also tried using same line without the \\
    $class = '\\Shops_' . ucfirst($controller) . '_Controller';
    return new $class($identifier);
}); 
```

文件：**application/routes.php**

```
/**
 * Register all shop routes
 */
Route::any('/shops/(:any)/(:any?)/(:any?)', function($identifier, $controller = "home", $method = "index", $params = array()){
    if($controller === "index")
        $controller = "home";
    $controller = IoC::resolve('controller: shop', array($controller, $identifier));
    return $controller;
}); 
```

**商店基础控制器**位于 application/libraries/controllers/shop.php

```
<?php
namespace Controllers;
use Base_Controller;
/**
* Shop controller
*/
class Shop extends Base_Controller
{

    public function __construct($identifier){
        /**
         * @todo: load the shop model using the identifier
         * possibly move this after the parent::__construct()
         */
        parent::__construct();
    }

} 
```

文件：**应用程序/控制器/商店/home.php**

```
<?php
/**
 * @heads up: Shop_Controller is aliased in application/config/application.php
 */
class Shops_Home_Controller extends Shop_Controller 
{

    public function get_index(){
        return ('test');
    }

} 
```

**问题：**

*   在为这些嵌套商店控制器定义我的路线时。我是简单地返回 laravel 应该用来解决请求的控制器，还是我自己在该路由定义的回调函数中触发操作？
*   控制器没有自动加载（在尝试上面的实现时），但我为这些控制器使用了正确的约定（除非我遗漏了一些东西:-)）。我猜这是因为我正在使用 IoC，我该如何干净利落地实现它或者我的错误是什么？
*   我如何触发正确的动作？正如预期的那样，它应该触发相应的 HTTP 动词动作，因为我的嵌套控制器也是 RESTFUL 控制器。
*   让事情尽可能干净的额外问题：不使用 IoC 功能时，“索引”默认为家庭控制器。我的解决方案（routes.php 中的 if-condition）模仿这个功能是一个干净的解决方案吗？还是有更好的方法？

**无论如何：**

*   如果我的方法有问题，请告诉我，我是 laravel 的新手，这是我使用的第一个框架，所以我一般是框架的新手。

*   如果我的问题没有得到很好的解释，我也很抱歉，所以请随时询问更多信息。

*   我尽力在谷歌上搜索这个问题，但找不到任何类似的东西，这是第一次，因为我所有其他 laravel 问题都可以使用谷歌轻松解决。

我会感谢任何花时间阅读本文的人，甚至更好地向我发送正确的方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:53:41.343

好的，最终的解决方案，如果你问我，这远非干净，但它似乎有效，至少就我检查过的而言。

我也不确定是否有替代方案，但由于缺乏响应和时间压力，我决定继续这样做并保持手指交叉:(。

//开始.php

```
IoC::register('controller: shop', function($id, $controllerName){
    //controller name is the name of the controller located in the shops map
    $class = "Shops_" . ucfirst($controllerName) . "_Controller";
    include(path('app') . 'controllers/shops/' . strtolower($controllerName) . '.php');
    return new $class($id);
}); 
```

//routes.php

```
Route::any("shops/(:any)/(:any?)/(:any?)/(:all?)", function($id, $controller = "index", $action = "index", $params = ""){
    if($controller === "index")
        $controller = "home";
    $params = explode('/', $params);
    $controller = IoC::resolve("controller: shop", array($id, $controller));
    $http_verb = Request::method();
        /**
         * Need to return this, and i now need to manually return every response in every action in every shop controller
         */
    return call_user_func_array(array($controller, $http_verb . '_' . $action), $params);
}); 
```

所以给出的例子

```
class Shops_Home_Controller extends Shop_Controller 
{

    public function get_index(){
        /**
         * this works when doing things the usual way, but will not return any output 
         * when working with nested dependency injection
         */
        $this->layout->nest('content', 'shops.index');
    }

    public function get_test(){
        /**
         * this needs to return layout object if it is to work with the nested dependency injection
         */
        $this->layout->nest('content', 'shops.index');
    }

} 
```*

# iphone - 点击窗口上的任意位置时如何关闭 UIAlertView

> ID：15836657
> 
> 赞同：0
> 
> 时间：2013-04-05T14:35:25.220
> 
> 标签：iphone, ios, ipad, xcode4.2

我在单击按钮上打开警报弹出窗口，它工作正常，代码是

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"PopUP Title" 
                                                message:@"This is pop up window/ Alert" 
                                               delegate:nil 
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil];

UIImageView *tempImageView=[[UIImageView alloc]initWithFrame:CGRectMake(20,20,50,50)];
tempImageView.image=[UIImage imageNamed:@"abc.png"];

[alert addSubView:tempImageView]

[alert show]; 
```

单击**确定**按钮时警报框正在关闭，我不想要它，我想在单击窗口上的任何位置时关闭警报框。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:38:27.857

听起来您实际上是在尝试在 iOS 上重新创建“Toast”。好消息，已经有人这样做了。[看到这个项目。](http://code.google.com/p/toast-notifications-ios/)

**编辑：**不想使用 iToast。我喜欢你的风格，代码少。这是我想出的。正如其他人所说，克服模态特性的唯一方法似乎很明显，`UIAlertView`就是添加一个超级视图来处理触摸事件。但是您不必每次都手动执行此操作，请考虑 subclassing `UIAlertView`。尝试这样的事情：

**编辑：** @wagashi，感谢您接受我的回答，并感谢您提醒我这`setFrame:`是一个调整大小的好地方。您的代码确实发出了一个非常类似于吐司的小警报，但是当我尝试它时，我发现如果消息太长，视图似乎会崩溃。所以我已经修改`setFrame:`为简单地将警报的大小减小大约一个按钮的大小，并保持在屏幕的中心。这样该课程才能准确地回答问题标题“iOS 如何在任何地方一键关闭 UIAlertView？”

**NoButtonAlertView.h**

```
#import <UIKit/UIKit.h>
@interface _NoButtonAlertViewCover : UIView
@property (nonatomic,assign) UIAlertView *delegate;
@end
@interface NoButtonAlertView : UIAlertView
-(id)initWithTitle:(NSString *)title message:(NSString *)message;
@end 
```

**NoButtonAlertView.m**

```
#import "NoButtonAlertView.h"
@implementation _NoButtonAlertViewCover
@synthesize delegate = _delegate;
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    [self removeFromSuperview];
    [_delegate dismissWithClickedButtonIndex:0 animated:YES];
}
@end
@implementation NoButtonAlertView
-(void)show{
    [super show];
    _NoButtonAlertViewCover *cover = [[_NoButtonAlertViewCover alloc] initWithFrame:[UIScreen mainScreen].bounds];
    cover.userInteractionEnabled = YES;
    cover.backgroundColor = [[UIColor lightGrayColor] colorWithAlphaComponent:.01];
    cover.delegate = self;
    [self.superview addSubview:cover];
}
-(id)initWithTitle:(NSString *)title message:(NSString *)message{
    if ((self = [super initWithTitle:title message:message delegate:nil cancelButtonTitle:nil otherButtonTitles:nil, nil])){
    }
    return self;
}
- (void)setFrame:(CGRect)rect {
    // Called multiple times, 4 of those times count, so to reduce height by 40
    rect.size.height -= 10;
    self.center = self.superview.center;
    [super setFrame:rect];
}
@end 
```

使用这个简单`UIAlertView`的子类及其`UIView`作为封面的子类，您可以像使用标准`UIAlertView`. 像这样：

```
NoButtonAlertView *alert = [[NoButtonAlertView alloc] initWithTitle:@"Hello" message:@"I am the very model of a modern major general; I'm information, vegitable, animal, and mineral."];
[alert show]; 
```

将产生：

![自定义警报视图](https://i.stack.imgur.com/R5OTG.png)

# entity-framework-5 - 带有模式的实体框架图

> ID：15836658
> 
> 赞同：0
> 
> 时间：2013-04-05T14:35:29.323
> 
> 标签：entity-framework-5

我们已经创建了一个数据库，我们使用 DatabaseFirst，但是我们需要在数据库中添加一些其他的新模式。我不想在 EF 中创建新表并从模型更新数据库。我只想应用一些更改而不触及其余部分。有没有办法将数据库模式仅保留为图表？还有什么方法可以显示模式名称并能够通过模式过滤它对表进行分组并最终移动到另一个图表中以通过模式分开保留许多图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T02:35:29.447

我试图做同样的事情，但未能找到使用 VS 的方法。您当然可以使用 SQL 语句修改任何 SQL 数据库，但听起来您想使用许多可视化模型，并有选择地应用它们。我使用 Modelright 是因为它允许高级模式操作，并且您可以突出显示表及其关系，然后只生成特定的 SQL，然后复制并粘贴语句。我还更改了不同表的配色方案（没有双关语）以跟踪现在和未来等。它还直接生成到数据库、逆向工程师等。它的成本很高。不过警告，我无法对 CE 4.0 进行逆向工程。

我相信 Enterprise Architect 也为 SQL 做了很多这方面的工作，虽然主要是一个一体化的 UML 工具，但如果 EA 能满足您的需求，可能会更好，因为它还有更便宜的版本和出色的 UML 工具。它不会有高级图形。

如果有人知道如何让 VS2012 做一些建模技巧，请加入。

# objective-c - 目标 C 的 VB 代码

> ID：15836659
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:35:31.913
> 
> 标签：objective-c, vb.net

我是 Xcode 编码和使用 Objective C 的新手。但是我有一个用 VB 编写的项目的旧代码，我很想转换为 Objective C。

这是代码：

```
Private Sub VitalityButton4_Click(sender As Object, e As EventArgs) Handles VitalityButton4.Click
    If txtWebURL.Text <> Nothing Then
        Try
            Dim wc As New WebClient
            wc.Proxy = Nothing

            Dim ST As String = wc.DownloadString("http://isup.me/" & txtWebURL.Text)
            If ST.ToLower.Contains("it's not just you!") Then
                txtWebStatus.Text = "Down!"
            Else
                txtWebStatus.Text = "Up!"
            End If
        Catch ex As Exception
            cse()
        End Try
    End If
End Sub 
```

我正在制作 Mac OS X 应用程序，而不是 iOS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:49:54.100

将 VB 代码转换为 Obj-C 没有神奇的方法，您必须逐行进行，这意味着您需要学习 Objective-C。

[这是一个开始学习的好地方](http://blog.teamtreehouse.com/an-introduction-to-objective-c)。苹果也提供了很多资源。

# android - 带有通知功能的 Android 个人管理器？

> ID：15836661
> 
> 赞同：1
> 
> 时间：2013-04-05T14:35:32.403
> 
> 标签：android, android-notifications, android-alarms, android-calendar

我正在 android 中制作个人管理器应用程序。它的功能之一是应用程序内的日视图和周视图中的日历。用户可以在应用程序中添加存储在数据库中的事件。用户可以设置事件提醒。当提醒被触发时，它会弹出一个包含事件详细信息和一些按钮的对话框。此外，当用户修改事件或修改提醒时，通知也需要更新。我应该如何实施呢？我应该使用什么？我想我还需要知道何时触发提醒是哪个事件触发了它。

# mysql - SQL查询将数据从2个表更新到另一个表

> ID：15836668
> 
> 赞同：2
> 
> 时间：2013-04-05T14:35:45.423
> 
> 标签：mysql, sql, sql-update

我有一个 table_a，我想用其他 2 个表中的数据进行更新。

```
table_a
+----+---------+------------+-------+
| id |  user   |    date    | valid | 
+----+---------+------------+-------+
| 10 | Bob     |            |       |
| 11 | Joe     |            |       |
| 12 | Joe     |            |       |
| 13 | Pete    |            |       |
| 14 | Bob     |            |       | 
+----+---------+------------+-------+ 
```

日期来自 table_b 其中 table_b.rel_id = table_a.id

```
table_b
+----+----------+----------+
| id |  rel_id  |  date    | 
+----+----------+----------+
| 30 |    8     | 10/10/11 |
| 31 |    9     | 10/10/11 |
| 32 |   10     | 10/10/11 |
| 33 |   11     | 10/10/11 |
| 34 |   12     | 10/10/11 |
| 35 |   13     | 10/10/11 |
| 36 |   14     | 10/10/11 |        
+----+----------+----------+ 
```

有效来自 table_c 其中 table_c.rel_id = table_a.id

```
table_c
+----+----------+----------+
| id |  rel_id  |  valid   | 
+----+----------+----------+
| 40 |   10     |   yes    |
| 41 |   11     |   no     |
| 42 |   12     |   yes    |
| 43 |   13     |   no     |
| 44 |   14     |   yes    |
| 45 |   15     |   no     |
| 46 |   16     |   yes    |        
+----+----------+----------+ 
```

如何使用 SQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:37:32.343

您可以简单地使用`INNER JOIN`.

```
UPDATE  table_a a
        INNER JOIN table_b b
            ON a.id = b.rel_id
        INNER JOIN table_c c
            ON a.id = c.rel_id
SET     a.date = b.date,
        a.valid = c.valid 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5a2c4/1)

# html - 正则表达式从 Google Reader JSON 文件中提取所有加星标的项目 URL

> ID：15836671
> 
> 赞同：0
> 
> 时间：2013-04-05T14:35:52.160
> 
> 标签：html, regex, json, url

遗憾的是，谷歌阅读器宣布将在今年年中关闭。由于我在 Google 阅读器中有大量已加星标的项目，我想备份它们。这可以通过谷歌阅读器外卖来实现。它生成一个`JSON`格式的文件。

现在我想从这个几个 MB 的大文件中提取所有文章的 url。

起初我认为最好对 url 使用正则表达式，但似乎最好通过正则表达式提取所需的文章 url 以查找文章 url。这将防止提取其他不需要的 url。

以下是 json 文件各部分的外观的简短示例：

```
"published" : 1359723602,
"updated" : 1359723602,
"canonical" : [ {
  "href" : "http://arstechnica.com/apple/2013/02/omni-group-unveils-omnifocus-2-omniplan-omnioutliner-4-for-mac/"
} ],
"alternate" : [ {
  "href" : "http://feeds.arstechnica.com/~r/arstechnica/everything/~3/EphJmT-xTN4/",
  "type" : "text/html"
} ], 
```

我只需要你可以在这里找到的网址：

```
 "canonical" : [ {
  "href" : "http://arstechnica.com/apple/2013/02/omni-group-unveils-omnifocus-2-omniplan-omnioutliner-4-for-mac/"
} ], 
```

也许有人有心情说正则表达式必须如何提取所有这些 url？

这样做的好处是有一种快速而肮脏的方式来从谷歌阅读器中提取加星标的项目网址，以便在处理后将它们导入到袖珍或印象笔记等服务中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:43:02.963

我知道你问过正则表达式，但我认为有更好的方法来处理这个问题。多行正则表达式是一个 PITA，在这种情况下，不需要那种脑损伤。

我会从`grep`，而不是正则表达式开始。该`-A1`参数表示“返回匹配的行，然后返回”：

```
grep -A1 "canonical" <file> 
```

这将返回如下行：

```
"canonical" : [ {
    "href" : "http://arstechnica.com/apple/2013/02/omni-group-unveils-omnifocus-2-omniplan-omnioutliner-4-for-mac/" 
```

然后，我会再次 grep 获取 href：

```
grep -A1 "canonical" <file> | grep "href" 
```

给予

```
"href" : "http://arstechnica.com/apple/2013/02/omni-group-unveils-omnifocus-2-omniplan-omnioutliner-4-for-mac/" 
```

现在我可以使用 awk 来获取 url：

```
grep -A1 "canonical" <file> | grep "href" | awk -F'" : "' '{ print $2 }' 
```

去掉网址上的第一个引号：

```
http://arstechnica.com/apple/2013/02/omni-group-unveils-omnifocus-2-omniplan-omnioutliner-4-for-mac/" 
```

现在我只需要摆脱额外的报价：

```
grep -A1 "canonical" <file> | grep "href" | awk -F'" : "' '{ print $2 }' | tr -d '"' 
```

就是这样！

```
http://arstechnica.com/apple/2013/02/omni-group-unveils-omnifocus-2-omniplan-omnioutliner-4-for-mac/ 
```

# batch-file - 如何将值传递给带有批处理文件的非命令行可执行文件？

> ID：15836672
> 
> 赞同：0
> 
> 时间：2013-04-05T14:35:52.730
> 
> 标签：batch-file

我有一个可执行文件，它在 GUI 上的三个单独的行上接受键入的用户输入。可执行文件还有一个名为“创建文件”的按钮，它将根据键入的数据执行文件创建。我的问题是如何自动将三个键入的值传递到可执行文件中，然后从批处理文件中执行“创建文件”按钮？我无权访问源代码，因此无法在此处进行修改以实现此目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:09:08.973

（我还不能写评论，所以我必须使用“答案”）

我同意 Cebence，据我所知，您需要某种宏播放器。我所知道的最好的免费是自动热键（只是谷歌）。一开始它需要一点阅读，但它非常易于使用且用途广泛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:40:09.213

好吧，这并不是真正的批处理文件解决方案——我认为不存在。但是你可以使用像 Spy++ 这样的工具来查找相关对话框控件的 ID，然后编写一个程序来：

1.  启动可执行文件
2.  检索主窗口句柄
3.  发送适当的窗口消息

可能有软件可以做到这一点。也许你可以批量处理一些东西，它只需要进程名称或 ID 并将一条消息传递给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:59:48.680

如果 GUI 应用程序不支持命令行参数，那么 BAT 文件将不会有太大帮助。

你真正需要的是某种“GUI 宏播放器”应用程序，它会执行一个脚本，即像这样的宏：

1.  将焦点切换到正在运行的名为“XYZ”的应用程序
2.  找到名为“text1”的输入框，输入“${param1}”
3.  找到名为“text2”的输入框，输入“${param2}”
4.  找到名为“text3”的输入框，输入“${param3}”
5.  找到名为“按钮”的按钮并单击它。

我不知道现在是否有（免费）应用程序可以做到这一点，但是有一个名为“Act！”的免费应用程序。或类似的东西（它的图标是一个黄色的米老鼠手套，手指按下按钮）。它实际上是一个包含正在运行的 Windows 可执行文件和 Delphi 应用程序源代码的 ZIP 文件，但我现在在 PC Magazine 的网站上找不到它。

希望这可以帮助。

# python - 有没有办法在 python 中自动定义函数？

> ID：15836675
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:35:58.130
> 
> 标签：python, python-3.x

我想知道是否有一种方法可以自动定义函数。例如，我想要一组函数，例如：

```
def add1:
    list.append(x)
def add2:
    list.append(y)
def add3:
    list2.append(x)
... 
```

问题是我必须定义很多这些，准确地说是 232。有没有更快的方法来做到这一点？另外，我使用 Python 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:43:44.600

你可以使用`exec`

例子：

```
def your_common_function(i, txt):
   # here you may decide what to do with arguments according to "i" value
   if i == 1:
      print(txt)
   else:
      print(txt+'s')

for i in range(1, 233):
    exec("def add%d(txt):\n\tyour_common_function(%d, txt)" % (i, i))

add1("hello world")  # prints "hello world"
add167("hello world")  # prints "hello worlds" 
```

**编辑**我更改了我的代码以允许您根据“功能编号”定义不同的行为

# regex - 允许单词之间有单个空格的正则表达式

> ID：15836681
> 
> 赞同：2
> 
> 时间：2013-04-05T14:36:25.537
> 
> 标签：regex

我想知道一个允许空格的正则表达式。我的示例是项目名称（2 个字）。它可以由大写、小写字母和一个空格组成。即`word1 word2`。我试过了，`[A-Za-z\sA-Za-z]`但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:44:36.403

试试这个：

```
[A-Za-z]+(\s[A-Za-z]+)? 
```

这允许一个单词（可选地后跟一个空格）和另一个单词，这要求空格字符仅*在*两个单词之间（如果存在的话）（即，正则表达式也只允许一个单词）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:39:08.580

您需要分离字符类。我也使用了分词，所以这`abc abc`在`123abc abc123`. 这`+`意味着至少需要 1 个匹配项（之前的字符、字符类或组）。请注意，`+`字符类也需要 ，因为单个字符类捕获单个字符。

```
\b[A-Za-z]+\s+[A-Za-z]+\b 
```

如果您只想允许空格：

```
\b[A-Za-z]+[ ]+[A-Za-z]+\b 
```

空格周围的括号不是必需的，但在视觉上有助于正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-08T15:38:13.613

试试这个：

```
r'[a-zA-Z0-9_ ]*$' 
```

这允许一个单词，可选地后跟一个空格和另一个单词，这要求空格字符仅在两个单词之间

# android - 正确的顶点着色器代码？OpenGL ES 2.0

> ID：15836688
> 
> 赞同：1
> 
> 时间：2013-04-05T14:36:47.907
> 
> 标签：android, rotation, opengl-es-2.0, translate-animation, skew

**添加了编辑**代码，请参见下文

**编辑 2** - 底部包含设备的屏幕截图以及说明

**编辑 3** - 添加了新代码

我有 2 个类，一个渲染的和一个自定义的“quad”类。

我在渲染器类的类级别声明了这些：

```
final float[] mMVPMatrix = new float[16];
final float[] mProjMatrix = new float[16];
final float[] mVMatrix = new float[16]; 
```

在我的 onSurfaceChanged 方法中，我有：

@Override public void onSurfaceChanged(GL10 gl, int width, int height) {

```
 GLES20.glViewport(0, 0, width, height);

    float ratio = (float) width / height;
    Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7);

} 
```

和....

```
 public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // TODO Auto-generated method stub

    myBitmap = BitmapFactory.decodeResource(curView.getResources(), R.drawable.box);

        //Create new Dot objects

        dot1 = new Quad();
        dot1.setTexture(curView, myBitmap);
        dot1.setSize(300,187);    //These numbers are the size but are redundant/not used at the moment.

        myBitmap.recycle();

           //Set colour to black
           GLES20.glClearColor(0, 0, 0, 1);

} 
```

最后来自这个类，onDrawFrame：

```
@Override
public void onDrawFrame(GL10 gl) {
    // TODO Auto-generated method stub

    //Paint the screen the colour defined in onSurfaceCreated
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

     // Set the camera position (View matrix) so looking from the front
   Matrix.setLookAtM(mVMatrix, 0, 0, 0, 3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    // Combine
   Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

    dot1.rotateQuad(0,0,45, mMVPMatrix); //x,y,angle and matrix passed in

} 
```

然后，在我的四人班：

这在类级别声明：

```
 private float[] mRotationMatrix = new float[16];        
    private final float[] mMVPMatrix = new float[16];
    private final float[] mProjMatrix = new float[16];
    private final float[] mVMatrix = new float[16];
    private int mMVPMatrixHandle;
    private int mPositionHandle;
    private int mRotationHandle;
//Create our vertex shader
    String strVShader =  
              "uniform mat4 uMVPMatrix;" +
              "uniform mat4 uRotate;" +
              "attribute vec4 a_position;\n"+
              "attribute vec2 a_texCoords;" +
              "varying vec2 v_texCoords;" +
              "void main()\n" +
              "{\n" +
         //     "gl_Position = a_position * uRotate;\n"+
         //          "gl_Position = uRotate * a_position;\n"+
               "gl_Position = a_position * uMVPMatrix;\n"+  
        //        "gl_Position = uMVPMatrix * a_position;\n"+  
                  "v_texCoords = a_texCoords;" +
              "}";

    //Fragment shader

    String strFShader =
        "precision mediump float;" +
        "varying vec2 v_texCoords;" +
        "uniform sampler2D u_baseMap;" +
        "void main()" +
        "{" +
        "gl_FragColor = texture2D(u_baseMap, v_texCoords);" +
        "}"; 
```

然后设置纹理的方法（但不要认为这与这个问题有关！！）

```
 public void setTexture(GLSurfaceView view, Bitmap imgTexture){
        this.imgTexture=imgTexture;

        iProgId = Utils.LoadProgram(strVShader, strFShader);
        iBaseMap = GLES20.glGetUniformLocation(iProgId, "u_baseMap");
                iPosition = GLES20.glGetAttribLocation(iProgId, "a_position");
        iTexCoords = GLES20.glGetAttribLocation(iProgId, "a_texCoords");
        texID = Utils.LoadTexture(view, imgTexture);

    } 
```

最后，我的“rotateQuad”方法（目前应该绘制和旋转四边形）。

```
public void rotateQuad(float x, float y, int angle, float[] mvpMatrix){

Matrix.setRotateM(mRotationMatrix, 0, angle, 0, 0, 0.1f);

//  Matrix.translateM(mRotationMatrix, 0, 0, 0, 0);  //Removed temporarily

// Combine the rotation matrix with the projection and camera view
   Matrix.multiplyMM(mvpMatrix, 0, mRotationMatrix, 0, mvpMatrix, 0);

float[] vertices = {

        -.5f,.5f,0, 0,0,
        .5f,.5f,0, 1,0,
        -.5f,-.5f,0, 0,1,
        .5f,-.5f,0, 1,1

        };

 vertexBuf = ByteBuffer.allocateDirect(vertices.length * 4).order(ByteOrder.nativeOrder()).asFloatBuffer();
 vertexBuf.put(vertices).position(0);

//Bind the correct texture
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texID);      
//Use program
GLES20.glUseProgram(iProgId);
// get handle to shape's transformation matrix
mMVPMatrixHandle = GLES20.glGetUniformLocation(iProgId, "uMVPMatrix");
   // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);
    // get handle to shape's rotation matrix
mRotationHandle = GLES20.glGetUniformLocation(iProgId, "uRotate");
  // Apply the projection and view transformation
  GLES20.glUniformMatrix4fv(mRotationHandle, 1, false, mRotationMatrix, 0);

//Set starting position for vertices
vertexBuf.position(0);
//Specify attributes for vertex
GLES20.glVertexAttribPointer(iPosition, 3, GLES20.GL_FLOAT, false, 5 * 4, vertexBuf);
//Enable attribute for position
GLES20.glEnableVertexAttribArray(iPosition);
//Set starting position for texture
vertexBuf.position(3);
//Specify attributes for vertex
GLES20.glVertexAttribPointer(iTexCoords, 2, GLES20.GL_FLOAT, false, 5 * 4, vertexBuf);
//Enable attribute for texture
GLES20.glEnableVertexAttribArray(iTexCoords);
//Draw it
GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
} 
```

对于编辑 2。

这是我在屏幕中央绘制的四边形。没有旋转。

![在此处输入图像描述](https://i.stack.imgur.com/dMKbH.png)

这是以 +45 度旋转的同一个四边形，代码为“gl_Position = a_position * uMVPMatrix;” + 在我的顶点着色器中（它现在来自不同的项目，所以着色器变量是 a_position 而不是 vPosition），它看起来是正确的！

![在此处输入图像描述](https://i.stack.imgur.com/LJXL0.png)

但是，这是在 2 个着色器变量切换的情况下以 +45 度旋转的同一个四边形（因此它们读取“gl_Position = uMVPMatrix * a_position;” - 如您所见，它不太正确。

也只是一个旁注，你在这里看不到它，因为四边形是对称的，但每种方法也会以与另一种相反的方向旋转......

![在此处输入图像描述](https://i.stack.imgur.com/p94Jv.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:12:01.923

真的无法分辨，因为我们不知道您传递给这两个变量的内容。

OpenGL是列优先格式，所以如果`vPosition`实际上是一个向量，并且`uMVPMatrix`是一个矩阵，那么第一个选项是正确的，如果这是在你的着色器中。

如果这不是在您的着色器中而是在您的程序代码中，那么没有足够的信息。

如果您使用第一个选项但得到意外结果，您可能没有正确计算矩阵或没有传递正确的顶点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:33:25.233

通常在顶点着色器中，你应该通过 MVP 来倍增位置，即

gl_Position = uMVPMatrix *vPosition;

当您更改订单时，这应该可以...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:16:37.887

感谢大家的帮助。

我设法找到了问题（大部分）。我会展示我所做的。

这是以下行：

```
Matrix.multiplyMM(mvpMatrix, 0, mvpMatrix, 0, mRotationMatrix, 0); 
```

如您所见，我将矩阵相乘并将它们存储回我在乘法中使用的矩阵。

所以我创建了一个名为 mvpMatrix2 的新矩阵并将结果存储在其中。然后将其传递给我的顶点着色器。

```
//Multiply matrices
Matrix.multiplyMM(mvpMatrix2, 0, mvpMatrix, 0, mRotationMatrix, 0);

//get handle to shape's transformation matrix
mMVPMatrixHandle = GLES20.glGetUniformLocation(iProgId, "uMVPMatrix");

//Give to vertex shader variable
GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix2, 0); 
```

应用此之后，没有失真（而且，关于我在此处[使用矩阵的另一个问题。在 OpenGL ES 2.0 中旋转](https://stackoverflow.com/questions/15837177/using-matrix-translate-in-opengl-es-2-0)我能够平移四边形的中心）。我说“大部分”是因为当我旋转它时，它会向后旋转（所以如果我说旋转 +45 度（顺时针），它实际上会将四边形旋转 -45 度（逆时针）。

但希望这将帮助将来遇到类似问题的任何人。

# android - 错误 - 无法联系谷歌服务器

> ID：15836690
> 
> 赞同：1
> 
> 时间：2013-04-05T14:36:51.527
> 
> 标签：android, google-maps

参考之前的错误 [Link1](https://stackoverflow.com/questions/15831700/to-create-android-application-by-using-google-maps-android-api-v2/15831781?noredirect=1#15831781)

我希望能够领先一步。但现在我面临两个新错误。

```
04-05 14:24:27.156: E/Google Maps Android API(32366): Authorization failure.
04-05 14:24:27.966: E/Google Maps Android API(32366): Failed to load map.  Could not contact Google servers. 
```

这只是我的 Manifest.xml 文件中的重要内容

```
<permission
        android:name="com.example.task.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
<uses-permission android:name="com.example.task.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="_MY_API_KEY_GOES_IN_HERE_"/>
    </application>

</manifest> 
```

我已经提到了链接 [Link2](https://stackoverflow.com/questions/15598596/google-maps-api-v2-failed-to-load-map-could-not-contact-google-servers-even) [Link3](https://stackoverflow.com/questions/13727992/google-maps-api-v2-failed-to-load-map-could-not-contact-google-servers)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:40:03.710

确保注意以下所有要点：1）启用了错误的服务。确保启用“Google Maps Android API v2”而不是“Google Maps API v2”并重新生成 API 密钥。

2) 将以下元素添加到您的清单中。将**com.example.mapdemo**替换为您的应用程序的包名称。

3) 使用**正确的证书和密钥**。发布证书，当您在我的手机上运行应用程序时，它在调试期间将不起作用。您必须改用调试密钥库证书指纹。

# python - 如何访问所有计算机内核以在 python 脚本中进行计算？

> ID：15836692
> 
> 赞同：3
> 
> 时间：2013-04-05T14:37:01.570
> 
> 标签：python, algorithm, runtime, multicore

我有一个 python 脚本，它必须对大型数据集进行许多排列，对每个排列进行评分，并且只保留得分最高的排列。数据集是如此之大，以至于这个脚本需要将近 3 天的时间才能运行。

当我在 Windows 中检查系统资源时，只有 12% 的 CPU 被使用，并且 8 个内核中只有 4 个在工作。即使我将 python.exe 进程置于最高优先级，这也不会改变。

我的假设是，将更多的 CPU 使用率专用于运行脚本可以使其运行得更快，但我的最终目标是将运行时间减少至少一半。是否有 python 模块或一些代码可以帮助我做到这一点？顺便说一句，这听起来像是一个可以从更智能的算法中受益的问题吗？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:44:33.247

有几种方法可以解决这个问题，但请查看[多处理](http://docs.python.org/2/library/multiprocessing.html)模块。这是一个用于创建多个进程的标准库模块，类似于线程，但没有 GIL 的限制。

您还可以查看优秀的[Celery](http://www.celeryproject.org/)库。这是一个分布式任务队列，有很多很棒的功能。它的安装非常简单，而且很容易上手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:00:51.057

我可以用一个简单的代码示例来回答 HOW-TO。当它正在运行时，运行 /bin/top 并查看您的进程。做起来很简单。请注意，我什至包括了如何在键盘中断之后进行清理——否则，您的子进程将继续运行，您将不得不手动终止它们。

```
from multiprocessing import Process
import traceback
import logging 
import time

class AllDoneException(Exception):
    pass

class Dum(object):
    def __init__(self):
        self.numProcesses = 10    
        self.logger = logging.getLogger()
        self.logger.setLevel(logging.INFO)
        self.logger.addHandler(logging.StreamHandler())

    def myRoutineHere(self, processNumber):
        print "I'm in process number %d" % (processNumber)
        time.sleep(10)
        # optional: raise AllDoneException  

    def myRoutine(self):
        plist = []
        try:
            for pnum in range(0, self.numProcesses):
                p = Process(target=self.myRoutineHere, args=(pnum, ))
                p.start()
                plist.append(p)
            while 1:
                isAliveList = [p.is_alive() for p in plist]
                if not True in isAliveList:
                    break
                time.sleep(1)
        except KeyboardInterrupt:
            self.logger.warning("Caught keyboard interrupt, exiting.")
        except AllDoneException:
            self.logger.warning("Caught AllDoneException, Exiting normally.")
        except:
            self.logger.warning("Caught Exception, exiting: %s" % (traceback.format_exc()))
        for p in plist:
            p.terminate()

d = Dum()
d.myRoutine() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:46:24.160

您应该生成新进程而不是线程来利用 CPU 中的内核。我的一般规则是每个核心一个进程。因此，您将问题输入空间拆分为可用内核的数量，每个进程都获得问题空间的一部分。

[多处理](http://docs.python.org/2/library/multiprocessing.html)是最好的。您也可以使用[Parallel Python](http://www.parallelpython.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T21:55:06.950

派对很晚 - 但除了使用多处理模块外，如爬行动物所说，还要确保设置“亲和力”。

一些 python 模块对其进行了修改，有效地降低了 Python 可用的内核数量：

[https://stackoverflow.com/a/15641148/4195846](https://stackoverflow.com/a/15641148/4195846)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-05T14:44:43.313

由于全局解释器锁定，一个 Python 进程无法利用多个内核。但是，如果您可以以某种方式并行化您的问题（无论如何您都应该这样做），那么您可以使用`multiprocessing`产生与您拥有的内核一样多的 Python 进程并在每个子进程中处理该数据。

# mysql - SQL 脚本运行期间的缓慢 Confluence

> ID：15836693
> 
> 赞同：1
> 
> 时间：2013-04-05T14:37:02.663
> 
> 标签：mysql, sql, resources, confluence

我们的 Atlassian Confluence 系统存在问题。

基本上，我们有一台服务器与我们的 Confluence 和 Jira 协作系统共享我们的主要 SQL 脚本负载，该脚本在当月的生产部分进行数据转换。

值得注意的是 - 我们注意到在运行大型脚本并尝试访问 Confluence 页面时，无论对 Confluence 进行何种操作（渲染页面、编辑页面、创建页面）都会出现一些巨大的减速......它们都陷入了困境，你最终会等待几秒钟以等待某件事发生。

我们刚刚开始记录事务级别。它们如下：

在脚本运行时打开一般查询日志和慢查询日志。

在此期间注意到来自融合的过度活动：从下午 12:33:01 到下午 13:27:16 发出的 SQL 语句数量：

1.  汇合 144,691
2.  吉拉 6,940

对于合流，每秒 43.85 个语句。对于合流语句，顶部是：

commit 38,286
SET autocommit=1 28,519
rollback 27,809 SET autocommit=0 27,809
**SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED 27,809
SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ 27,809**
SELECT @@session.tx_isolation 712

主要问题是**粗体字**

所以我的问题是...... Confluence 在这么短的时间内发布这么多事务级别读取是做什么的......？

即使是回顾 DB 的内部处理也不应该多次回顾 DB，无论是安全检查还是渲染数据......

再说一遍，Confluence 在做什么？如果有人知道......这就是它的运作方式吗？我很想知道其他人的 Confluence 日志是否显示相对测量值......

为什么会慢下来？是资源共享问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:36:30.740

Confluence 可以在会话级别配置它的数据库隔离级别，或者可以依赖 mysql 的全局配置。

我的猜测是您的 Confluence 实例为每个会话设置一次隔离级别。尝试全局配置隔离级别。可以在[Confluence 知识库中找到有关如何执行此操作的说明](https://confluence.atlassian.com/x/GAtmDg)

基本上，您只需要添加

> 事务隔离=READ-COMMITTED

到你的 my.cnf 文件

更一般地说，您可能想查看 MySql 的 Confluence 安装指南，并确保您的数据库按照他们推荐的方式进行配置（请参阅[https://confluence.atlassian.com/display/DOC/Database+Setup+For+MySQL# DatabaseSetupForMySQL-Step3.ConfigureMySQLServer](https://confluence.atlassian.com/display/DOC/Database+Setup+For+MySQL#DatabaseSetupForMySQL-Step3.ConfigureMySQLServer)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T04:00:15.037

不建议添加全局设置。
请参考此[链接](https://confluence.atlassian.com/display/CONFKB/Confluence+Does+Not+Start+with+%27MySQL+session+isolation+level+%27REPEATABLE-READ%27+is+no+longer+supported%27+Message)

根据这篇文章，在3.5.6或更高版本，建议不要添加`transaction-isolation=READ-COMMITTED`到my.cnf

我`confluence.cfg.xml` 在atlassian/application-data/confluence下查看，属性`hibernate.connection.isolation`默认为2。（confluence V5.4.4）

所以我宁愿忽略烦人的 mysql 日志，因为 confluence 可以正常工作：
`110 Query SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ<br> 108 Query SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED`

# r - 获取 ETF 的历史指数数据

> ID：15836694
> 
> 赞同：1
> 
> 时间：2013-04-05T14:37:04.170
> 
> 标签：r, yahoo-finance

有人知道 ETF 的免费历史数据来源吗？我想将数据加载到 R 服务器中进行分析。我查看了雅虎财务表的雅虎 YQL API，但是这些数据是每天的数据，我想根据历史价格进行比较。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:42:02.457

试试`quantmod`包。

```
require(quantmod)

SPY <- getSymbols("SPY", from = "2005-01-01", to = "2008-12-31", auto.assign = FALSE)

head(SPY)
##            SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
## 2005-01-03   121.56   121.76  119.90    120.30   55748000       101.76
## 2005-01-04   120.46   120.54  118.44    118.83   69167600       100.52
## 2005-01-05   118.74   119.25  118.00    118.01   65667300        99.83
## 2005-01-06   118.44   119.15  118.26    118.61   47814700       100.33
## 2005-01-07   118.97   119.23  118.13    118.44   55847700       100.19
## 2005-01-10   118.34   119.46  118.34    119.00   56563300       100.66 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-20T19:00:12.480

对于像我这样有同样问题的人（只有 WKN 和 Yahoo Finance 没有列出 ETF，我找到了一个采用 WKN 并返回历史价格的网站：

我使用了网页抓取 ( `rvest`)。以下采用 WKN（或 ISIN，我想）并返回历史价格：

```
library(rvest)
library(purrr)

get_prices <- function(wkn){
    # Download prices for WKN

    cat("Quoting", wkn, "\n")
    erg <- html_nodes(read_html(paste0("http://www.quotrix.de/fonds/wkn/", wkn,
                                       "/historische_kurse")), "table") %>% 
        map(html_table, fill=T) 

    if(length(erg) != 1) stop("Error with ", wkn, ": Expected 1 table, found ", length(erg))
    return(erg[[1]])
}

safe_get_prices <- safely(get_prices)
erg <- safe_get_prices("ETF126")
#> Quoting ETF126
str(erg)
#> List of 2
#>  $ result:'data.frame':  597 obs. of  6 variables:
#>   ..$ Datum    : chr [1:597] "17.04.2020" "16.04.2020" "15.04.2020" "14.04.2020" ...
#>   ..$ Eröffnung: chr [1:597] "34,73" "34,05" "35,16" "35,58" ...
#>   ..$ Tageshoch: chr [1:597] "34,73" "34,05" "35,16" "35,58" ...
#>   ..$ Tagestief: chr [1:597] "34,73" "34,05" "35,16" "35,58" ...
#>   ..$ Schluss  : chr [1:597] "34,73" "34,05" "35,16" "35,58" ...
#>   ..$ Stücke   : chr [1:597] "-" "-" "-" "-" ...
#>  $ error : NULL 
```

^(由[reprex 包](https://reprex.tidyverse.org)于 2020-04-21 创建(v0.3.0))

# jquery - 设计一个使用 Ajax，但也关心 SEO 和优雅降级的 Play 框架

> ID：15836696
> 
> 赞同：3
> 
> 时间：2013-04-05T14:37:08.630
> 
> 标签：jquery, ajax, playframework, playframework-1.x, graceful-degradation

什么是使用 Play 设计 Web 应用程序的好方法，它提供了优雅的降级？我正在开发一个客户端应用程序，它使用 Ajax 获取部分视图，然后使用 JQuery 将它们放置到 DOM 中。

为了支持 SEO 和优雅降级，我应该创建一个重复的控制器方法，它将部分视图呈现为整个页面的一部分（包括页眉和页脚）。所以当我使用 Jquery 进行调用时，它将调用“item/12345 /partial”，它只会带来部分视图，但是当用户转到“item/12345”时，它应该显示整个页面，其中部分已经被卡住了。

第二个选项是避免使用第二个控制器方法，并始终返回整个页面内容（页眉、javascript、样式、部分和页脚）。当使用 JQuery 调用时，回调方法将仅剥离必要的 HTML 并将其放入 DOM。当然，这意味着从服务器返回的内容总是相同的，所以它确实降低了使用 AJAX 的优势。

你会推荐哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:24:15.573

第二种选择对我来说不是很好。我们在项目中使用的是我们有由 ajax 部分扩展的基本模板，这些部分有这样的东西，不会在 ajax 请求上加载模板的其余部分：

```
#{ifnot request.ajax}
    #{extends 'search-main.html' /}
#{/ifnot} 
```

如果要呈现整个页面（非 ajax 请求），并且在应该出现 ajax 部分的地方`search-main.html`已经到位。`#{doLayout /}`价值 `request.ajax`将由 Play 设置，因此您不必自己弄清楚。

关于重复的控制器：如果需要，您应该能够将一个控制器映射到多个 url。只需将它们添加到`routes`文件中。但在我们的方法中它不是必需的。

# php - PHPExcel 未在 excel 2007 中正确设置纸张大小

> ID：15836697
> 
> 赞同：0
> 
> 时间：2013-04-05T14:37:08.877
> 
> 标签：php, export, phpexcel, worksheet, page-setup

**已解决
（问题下解释的解决方案）**

我正在尝试使用 PHPExcel 更改 XLSX 文件的页面设置。
但是每当我更改纸张大小时，它都会导致用户定义的大小具有错误的宽度和高度。

这就是我所做的：

```
$sheet->getPageSetup()->setPaperSize(PHPExcel_Worksheet_PageSetup::PAPERSIZE_A3);
$sheet->getPageSetup()->setOrientation(PHPExcel_Worksheet_PageSetup::ORIENTATION_LANDSCAPE); 
```

在 XLS 文件中，它工作正常。
但在 XLSX 文件中没有。

我已经在谷歌和论坛上搜索过，但我找不到任何关于它的信息。
难道我做错了什么？

我正在 Libre Office 中进行测试（我也在 excel 上检查过，但也有同样的问题）

XLSX 文件的结果： ![这是结果](https://i.stack.imgur.com/sVc4k.png)

如果您需要更多信息，请与我们联系。

提前致谢！

**解决方案：**

这是一个 libreOffice 错误。libre office 的问题在于它需要打印机设置的属性。如果未定义，它将自动采用打印机设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:13:23.107

这是一个 libreOffice 错误。libre office 的问题在于它需要打印机设置的属性。如果未定义，它将自动采用打印机设置。

# android - 如何验证 X.509 证书格式？

> ID：15836701
> 
> 赞同：4
> 
> 时间：2013-04-05T14:37:15.197
> 
> 标签：android, security, ssl-certificate, bouncycastle

我有一个似乎没问题的 SSL 证书（从服务器根目录开始的证书链）。我可以在 Windows 上打开证书并使用 Windows 向导将其导入。

但是当我尝试通过以下命令（使用 BouncyCastle）将其转换为密钥库时：

```
keytool -importcert -v -trustcacerts -file "test.crt" -alias ca -keystore "test.bks" -provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath "bcprov-ext-jdk15on-1.46.jar" -storetype BKS -storepass testtest 
```

我收到以下错误：

```
keytool error: java.lang.Exception: Input not an X.509 certificate
java.lang.Exception: Input not an X.509 certificate
        at sun.security.tools.KeyTool.addTrustedCert(Unknown Source)
        at sun.security.tools.KeyTool.doCommands(Unknown Source)
        at sun.security.tools.KeyTool.run(Unknown Source)
        at sun.security.tools.KeyTool.main(Unknown Source) 
```

我正在开发一个 Android 应用程序，我需要通过 https 调用基于 REST 的 API。

是否有任何基于网络的工具（或其他）通过我可以验证证书？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-26T18:52:42.643

看来您的 test.crt 不是 X.509 格式。通常，如果它是 PEM 编码的 X.509 证书，它将以以下行开头：

```
-----开始证书-----
工信部...
```

或者

```
-----开始受信任的证书-----
工信部...
```

DER 编码的 X.509 证书对您来说似乎是随机的二进制数据，但您可以使用`openssl`命令行解码此类 DER 编码的文件：

`openssl asn1parse -inform d -in test.crt -i`

输出中的起始 OID 将告诉您它是 X.509 证书还是其他类似 PKCS#7 包的东西。

# javascript - Microsoft JScript 运行时错误：访问被拒绝。当子html函数调用父html函数时

> ID：15836705
> 
> 赞同：0
> 
> 时间：2013-04-05T14:37:28.047
> 
> 标签：javascript, html

在我的 asp.net 应用程序中，我试图放大 iframe 中的图像，如下所示

```
<head id="Head1" runat="server">
    <script type="text/javascript">
        function showbigimg(){
            alert('works');
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">

        <%--Other page controls--%>

        <iframe id="htmliframe">                
            <html>
                <head></head>
                <body>
                    <a href="#" onclick="parent.showbigimg();">
                        <img src="../someimage.png"/>
                    </a>
                </body>
            </html>
        </iframe>
    </form>
</body> 
```

当我单击 iframe 中的图像时，我在 IE 中得到此访问被拒绝，而在 FF 中访问属性的权限被拒绝。

我是以正确的方式做的还是有替代的方法。

编辑：当调用 showbigimg 时，我将在父 HTML 中放置一个带有放大尺寸的 img 的 div

# python - 使用 `unittest` 验证是否调用了 `exit` 函数

> ID：15836706
> 
> 赞同：0
> 
> 时间：2013-04-05T14:37:31.753
> 
> 标签：python, unit-testing, python-2.7, exit

我定义了一个非常简单的配置管理器（解析配置文件并验证其中是否存在某些键），现在我正在为它编写一些测试。

在配置文件无效的许多情况下，我希望配置处理程序调用`exit()`. 有什么方法可以编写测试以确保`exit`被调用并继续测试？我是否可以仅针对测试环境“模拟”该`exit`功能？

我正在使用 Python 2.7 和`unittest`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:44:29.077

`sys.exit()`引发`SystemExit`异常，应该由 unittest 框架捕获。因此，您可以检查`SystemExit`为这些测试用例引发的问题。

例如，`exit_test.py`：

```
import sys
import unittest

def func():
    sys.exit()

class MyTest(unittest.TestCase):

    def test_func(self):
        self.assertRaises(SystemExit, func)

if __name__ == "__main__":
    unittest.main() 
```

跑：

```
$ python exit_test.py 
.
----------------------------------------------------------------------
Ran 1 test in 0.000s

OK 
```

# html - 表格没有垂直调整到 100%？

> ID：15836709
> 
> 赞同：1
> 
> 时间：2013-04-05T14:37:36.033
> 
> 标签：html, css

我有一个快速的问题给你们。我仍在学习 HTML，但我正在处理个人页面，并且希望框分布在整个窗口中，无论窗口有多大或多小。当我水平做时效果很好，但从不垂直工作。它只是向下保持标准格式。

# 我的代码

## HTML：

```
<table class="table" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table> 
```

## CSS：

```
.table {
    width: 100%;
    height: 100%;
    text-align: center;
    vertical-align: central; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:41:39.217

你的 body 和 html 选择器是否有 100% 的高度？如果没有，请使用以下内容扩展您的样式表：

```
html,
body {
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:42:37.473

它没有调整大小，因为设置`table { height:100%; }`只是告诉它填充其父级的 100%。您将需要设置您的`html`和`body``height:100%`

[jsFiddle](http://jsfiddle.net/Tyriar/tRq2r/)

```
html,
body {
    height: 100%;
    margin:0;
}

.table {
    width: 100%;
    height: 100%;
    text-align: center;
    vertical-align: central;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:42:22.863

也许这`height: 100% !important;`会让它发挥作用。

# java - 为 graphics2D 寻找 Android 等效代码

> ID：15836712
> 
> 赞同：3
> 
> 时间：2013-04-05T14:37:40.853
> 
> 标签：java, android, bufferedimage, graphics2d, bitmapfactory

我一直在尝试获取以下 Android 等效代码：

```
private BufferedImage user_space(BufferedImage image)
{
    BufferedImage new_img  = new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_3BYTE_BGR);
    Graphics2D    graphics   = new_img.createGraphics();
    graphics.drawRenderedImage(image, null);
    graphics.dispose(); 
    return new_img;
} 
```

我想要一个相当于Graphics2D的android。我已经搜索了一段时间，发现 android 中的 Canvas 可以执行与 Graphics2D 类在这里执行的一些类似的任务，但主要问题是我没有得到与正在执行的整个过程的 android 等效代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:55:04.610

android 没有，`BufferedImage`或者`Graphics2D`你可能已经发现了。

我不是 java 开发人员（只是 android），所以我不能 100% 确定您要实现的目标，但在我看来，您只是在创建图像的副本。

这里有一些您将用于这些类型的操作的类：

*   [位图](https://developer.android.com/reference/android/graphics/Bitmap.html)：就像 BufferedImage，它是实际存储图像中所有字节的对象（可能是具有内存崩溃可能性的大对象）。这里有一些静态方法用于复制位图、创建新的可变或不可变位图、缩放或压缩为 PNG 或 JPG 到流。

*   [BitmapFactory](https://developer.android.com/reference/android/graphics/BitmapFactory.html)：许多静态方法来从资源、文件、流等创建新的位图。

*   [画布](https://developer.android.com/reference/android/graphics/Canvas.html)：如果你想在图像上绘图，你实际上只会使用这个（覆盖图像，放置一些文本，或者一条线，类似的东西）

# python - 允许 Argparse 参数的特定值

> ID：15836713
> 
> 赞同：163
> 
> 时间：2013-04-05T14:37:42.063
> 
> 标签：python, argparse

是否可以要求[`argparse`](https://docs.python.org/library/argparse.html)参数是几个预设值之一？

我目前的方法是手动检查参数，如果它不是允许的值之一，则调用[`print_help()`](https://docs.python.org/library/argparse.html#argparse.ArgumentParser.print_help)并退出。

这是当前的实现：

```
...
parser.add_argument('--val',
                    help='Special testing value')

args = parser.parse_args(sys.argv[1:])
if args.val not in ['a', 'b', 'c']:
    parser.print_help()
    sys.exit(1) 
```

倒不是这特别难，而是显得杂乱无章。

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2013-04-05T14:37:42.063

argparse 参数可以通过参数限制为特定值[`choices`](https://docs.python.org/library/argparse.html#choices)：

```
...
parser.add_argument('--val',
                    choices=['a', 'b', 'c'],
                    help='Special testing value')

args = parser.parse_args(sys.argv[1:]) 
```

有关更多详细信息，请参阅[文档](https://docs.python.org/library/argparse.html#choices)。

# r - 如何在 R 中调用我通过命令行指定的函数？

> ID：15836721
> 
> 赞同：0
> 
> 时间：2013-04-05T14:38:10.893
> 
> 标签：r

我如何做到这一点`R`：

我已经采购了一个具有某些名称的函数`exampleFoo`假设：

`exampleFoo <- function(a, predefined, signature)`

给定字符向量`exampleFoo`，我如何使用它来调用具有该名称的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:19:05.643

这取决于这是在另一个函数内部还是在顶层进行。我会按照相反的顺序来处理。

```
exampleFoo <- function(a, predefined, signature) {
   1:10
}

FUN <- "exampleFoo"

get(FUN)
get(FUN)()

> get(FUN)
function(a, predefined, signature) {
   1:10
}
> get(FUN)()
 [1]  1  2  3  4  5  6  7  8  9 10 
```

在函数中，`match.fun`参数在这里最适用。`get`查找提供给它的名称的对象，而`match.fun`在搜索时只考虑函数对象。这有一个额外的好处，那就是不匹配可能具有相同名称的非功能对象。

```
FOO <- function(f) {
  BAR <- match.fun(f)
  BAR()
}

> FOO(FUN)
 [1]  1  2  3  4  5  6  7  8  9 10
> FOO("exampleFoo")
 [1]  1  2  3  4  5  6  7  8  9 10 
```

您不能`match.fun`在顶层使用（容易？），因为它旨在在调用者的父框架中执行匹配，并且全局环境没有父 (IIRC)。

## 其他例子

@agstudy 提出了一种`switch`基于方法的包装函数，该函数可以按名称调用多个预定义函数之一。在评论中，我提出了两个更简单的替代方案。在这里，我对此进行了扩展：

```
foo1 <- function(method, ...) {
  dots <- list(...)
  FUN <- match.fun(method)
  do.call(FUN, dots)
} 
```

或者

```
foo2 <- function(method = c("fun1", "fun2", "fun3"), ...) {
  dots <- list(...)
  method <- match.arg(method)
  FUN <- match.fun(method)
  do.call(FUN, dots)
} 
```

我把这些写成非常通用的函数，可以接受任何参数加上`method`. 如果由 / 传递的函数引用`method`有`...`参数，则可以直接调用这些函数，可能带有一个或多个命名参数，例如

```
## assuming `method` refers to a function with a first argument `x` and also
##   a `...` argument
foo3 <- function(method, x, ...) {
  FUN <- match.fun(method)
  FUN(x, ...)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:50:21.410

```
text<-"exampleFoo"
exampleFoo<-function(x) print("Success")
eval(parse(text=paste(text,"()")))
#[1] "Success" 
```

正如@joran 建议`get()`的那样，似乎可以替代`eval(parse(text="..."))`

```
get(text)()
#[1] "Success" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T14:55:17.503

我会用`switch`这个，比如：

```
algoFactory <- function (method = c("algo1", "alog2", 
                                   "algo3")
{
  method = method[1]
  switch(method, algo1 = {
  res = algo1.Impl(...)
}, algo2 = {
  res = algo2.Impl(...)
}, algo3 = {
  res = algo3.Impl(...)
})} 
```

每次我添加一个新算法时，我都会更新这个主函数。在您的 RscripT 中，您将其称为例如：

```
 Rscript  algoFactory.R 'algo1' 
```

# jquery - jQuery ajax 不调用 Servlet

> ID：15836725
> 
> 赞同：2
> 
> 时间：2013-04-05T14:38:21.357
> 
> 标签：jquery, ajax, jsp, servlets

在这第二天挣扎。我有一个带有标签列表的选择选项表单。我想根据所选标签显示数据库中的文章。我的 index.jsp 中有一个 div“showArticles”，我想在其中显示文章。我为此目的使用 jquery 和 ajax。我编写了名为 test 的 Servlet，我只输出了一个简单的字符串，但我什至无法接收到文本，似乎我的 servlet 从未被调用过。servlet 在名为“servlets”的包中，我使用的是 NetBeans。

这是表格：

```
 <select id="b_sub_tag" name="b_sub_tag">
                                <option value='${0}'>Subject</option>
                                <c:forEach var="item" items="${subtagList}">
                                    <option value='${item}'>${item}</option>
                                    <c:set var="i" value='${i+1}'> </c:set>
                                </c:forEach>
                            </select> 
```

这是jQuery：

```
$(document).ready(function(){       
$("#b_sub_tag").change(function(){       
    var option_value = $(this).children('option:selected').val();

    $.ajax({
                   type: "POST",
                   url: "test",
                   data :"value="+option_value,
                   success: function(html) {
                               $("#showArticles").html(html);
                   }
           });
}); 
```

  });

这是 Servlet：

```
@WebServlet(name = "test", urlPatterns = {"/test"})
public class test extends HttpServlet {
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        /* TODO output your page here. You may use following sample code. */
        //response.getWriter().write("Omething");

    } finally {            
        out.close();
    }
}

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);

    response.getWriter().write("Smething");

}

@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>
} 
```

我试过 PrintWriter out = response.getWriter(); out.println("某事");

同样，什么也没有。我在 doPost() 中写入输出，我尝试在 doGet 和 processRequest 中写入，但没有运气。

任何人都知道为什么这不起作用？

* * *

## **问题已解决。我已将代码更改如下：**

```
 $.ajax({
        url : "test",
        type: 'GET',
        ***data: {value:option_value},***

        error : function(jqXHR, textStatus, errorThrown) {
            alert(textStatus);
        },
        success : function(html){
           $("#showArticles").html(html);
           }
        }
    }); 
```

小服务程序：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    try {

        final InitialContext context = new InitialContext();
        statefulb = (StatefulBeanRemote)     context.lookup("java:comp/env/StatefulBeanRemote");

        response.setContentType("text/plain");
        response.setCharacterEncoding("UTF-8");
        response.getWriter().write("A text"); 

    } catch (NamingException ex) {
        Logger.getLogger(LoadArticlesByTag.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:18:13.620

问题已解决。我已将代码更改如下：

$.ajax({ url : "test", type: 'GET', ***data: {value:option_value},***

```
 error : function(jqXHR, textStatus, errorThrown) {
        alert(textStatus);
    },
    success : function(html){
       $("#showArticles").html(html);
       }
    }
}); 
```

小服务程序：

@Override protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { try {

```
 final InitialContext context = new InitialContext();
    statefulb = (StatefulBeanRemote)     context.lookup("java:comp/env/StatefulBeanRemote");

    response.setContentType("text/plain");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write("A text"); 

} catch (NamingException ex) {
    Logger.getLogger(LoadArticlesByTag.class.getName()).log(Level.SEVERE, null, ex);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:08:56.837

尝试将您的网址更改为 /test：

```
$.ajax({
                   type: "POST",
                   url: "/test",
                   data :"value="+option_value,
                   datatype : "html",
                   success: function(html) {
                               $("#showArticles").html(html);
                   }
}); 
```

# windows - 如何破译 Windows 8 转储

> ID：15836734
> 
> 赞同：1
> 
> 时间：2013-04-05T14:38:33.187
> 
> 标签：windows

4 天前我得到了一台新的 Windows 8 PC。突然重启了。事件日志显示：

系统已重新启动，但未先完全关闭。如果系统意外停止响应、崩溃或断电，可能会导致此错误。

计算机已从错误检查重新启动。错误检查是：0x00000024（0x000000b50019060b、0xfffff8801d326748、0xfffff8801d325f80、0xfffff880019041e6）。转储保存在：C:\windows\MEMORY.DMP。报告 ID：040413-33828-01。

提到的文件超过 2 GB。c:\windows\minidump 中还有一个较小的文件

我的目标只是确定导致崩溃的程序。如何从内存转储或 Mindump 中获取该信息？或者有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:27:11.010

此处的说明：此处的说明：networkworld.com/supp/2011/041811-windows-7-crashes.html 适用于 Windows 8 来解释转储。感谢 roger_rowland 将我直接带到描述我的特定问题的页面。

# java - 如何使用pdfbox读取pdf文档的当前页码

> ID：15836743
> 
> 赞同：1
> 
> 时间：2013-04-05T14:38:49.493
> 
> 标签：java, parsing, pdf, itext, pdfbox

PDF 中的页码有不同的变体，一些 PDF 的初始页为罗马数字，如 I、ii，后来页码为 1,2，...。我在 中找到了一个函数`pdfbox`来获取所需的页面`page.get(pagenumber)`。但是这个函数的问题是，当我写的时候`get(1)`，它会返回文档的第一页（可能编号为ii而不是页码为2的页面）。有没有办法获得PDF中页码为2而不是第二页的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:46:07.770

虽然标题提到了 PDFBox，但您还添加了标签 itext，所以让我向您展示如何使用 iText 提取 PageLabels：

```
PdfReader reader = new PdfReader(src);
String[] labels = PdfPageLabels.getPageLabels(reader); 
```

现在你有一个`String`数组，你可以有：

```
labels[0] = "i";
labels[1] = "ii";
labels[2] = "iii";
labels[3] = "iv";
labels[4] = "1";
labels[5] = "2";
labels[6] = "3";
and so on... 
```

现在，如果您想知道哪个物理页面与页面标签对应，您可以将这些值放在`HashMap`一起`index + 1`作为页码`"2"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:50:47.660

PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)中的第 12.4.2 节*页面标签*解释了如何在文档中定义页面标签（您想要理解的特殊页码）：

> PDF 文档中的每一页都应由表示页面在文档中的相对位置的整数页面索引来标识。此外，文档可以选择定义页面标签 (PDF 1.3) 以在屏幕上或打印中直观地识别每一页。页面标签和页面索引不必重合：索引应该是固定的，从第一页的 0 开始在文档中连续运行，但可以以适合特定文档的任何方式指定标签。
> 
> 出于页标签的目的，应将文档划分为标签范围，每个标签范围是使用相同编号系统的一系列连续页面。一个范围内的页面应按升序顺序编号。一个页面的标签由一个基于其在其标签范围内的位置的数字部分组成，可选地前面有一个表示范围本身的标签前缀。
> 
> 文档的标签范围应由文档目录中的 PageLabels 条目定义（参见 7.7.2，“文档目录”）。该条目的值应为数字树（7.9.7，“数字树”），其每个键都是标签范围内第一页的页面索引。对应的值应该是一个页面标签字典，定义了该范围内页面的标签特征。树应包括页面索引 0 的值。表 159 显示页面标签字典的内容。

有关更多详细信息和示例，请参阅。[规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)本身。

使用低级 PDFBox 方法应该很容易提取文档目录中的**PageLabels**条目并检索标签详细信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-10T09:42:44.907

PDPageLabels.getLabelsByPageIndices() 用于获取所有页面标签的列表。

```
PDDocument document = PDDocument.load(new File(src));
PDPageLabels lable = document.getDocumentCatalog().getPageLabels();
String[] range = lable.getLabelsByPageIndices(); //all page label
int pageNumber = 1; //page number for find page
int index = Arrays.binarySearch(range, pageNumber);  //get page which have given page number
PDPage page = document.getPage(index);
document.close(); 
```

你得到所有的页面标签数组。查找特定页码的索引并获取该页面。

# ascii - 为什么不可打印的 ASCII 字符实际上是可打印的？

> ID：15836744
> 
> 赞同：7
> 
> 时间：2013-04-05T14:38:50.617
> 
> 标签：ascii

非字母数字或标点符号的字符被称为不可打印：

> [代码 20hex 到 7Ehex，称为可打印字符](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)

![在此处输入图像描述](https://i.stack.imgur.com/9lsRy.gif)

那么为什么例如 005 可以表示（并由[clubs](http://en.wikipedia.org/wiki/Clubs_%28suit%29)表示）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T14:50:28.050

大多数原始的 ASCII 控制字符集不再有用，因此许多不同的供应商已将它们作为附加图形字符回收，通常是您表中的[dingbats](https://en.wikipedia.org/wiki/Dingbat)。但是，所有此类分配都是非标准的，并且通常彼此不兼容。如果可以，最好对这些字符使用官方的 Unicode 代码点。（对 ISO 8859.x 标准的高半部分中的附加控制字符块进行了类似的操作，这些字符在指定时已经过时。再次，使用官方 Unicode 代码点。）

表格底部的小字似乎写着“Copyright 1982 [Leading Edge Computer Products](https://en.wikipedia.org/wiki/Leading_Edge_%28company%29) , Inc.”。那家公司是 IBM PC 克隆的早期制造商，这可能是他们自定义的 ASCII 扩展。如果您正在编写软件以将在这些特定计算机上生成的文件转换为更现代的格式，则应仅注意此表中 000-031 和 127 的分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:40:31.043

“不可打印”字符的表示取决于使用的字符集（操作系统、浏览器等），例如参见[ISO 8859](http://en.wikipedia.org/wiki/ISO_8859)，[代码页 1252](http://en.wikipedia.org/wiki/Code_page_1252)。

例如，在 dos 中，您确实有用于非常旧式窗框的有趣标志（类似 ascii 艺术）。

# ios - renderInContext 不支持遮罩？

> ID：15836746
> 
> 赞同：0
> 
> 时间：2013-04-05T14:39:07.893
> 
> 标签：ios

我有一个相机应用程序可以将照片加载到带面具的设备中。一切都好。当我尝试使用 renderInContext 将视图保存到图像时，我只看到没有任何遮罩的图像。

```
UIGraphicsBeginImageContext(contentView.bounds.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[contentView.layer renderInContext:context];
UIImage *outImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(outImage, self, @selector(image: didFinishSavingWithError: contextInfo:), context); 
```

我读过 Apple 的一些论文说 renderInContext 不支持蒙版和合成。我在互联网上进行了一些搜索，以获取 UIView 需要先绘制为上下文的信息，然后使用 renderInContext 保存图像。

现在我的问题是用什么方法来完成这项工作？drawRect、drawInRect、drawLayer、drawInContent 或其他方法呢？谁能给我一个提示。十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T22:29:20.437

我从这里开始：[http ://chinkisingh.com/2013/03/03/draw-on-iphoneipad-screen-using-bezier-paths-core-graphics-ios-app-development/](http://chinkisingh.com/2013/03/03/draw-on-iphoneipad-screen-using-bezier-paths-core-graphics-ios-app-development/)

我有一个 UIBezierPath，我想对其应用渐变并应用到现有图像，看看下面的代码是否有帮助

```
 CGRect r = CGRectMake(0, 0, HEART_SIZE, HEART_SIZE);
    UIBezierPath *heart = [Bezier heartShape:r]; //this is only in my case

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    UIColor *darkPink = [UIColor colorWithHue:0.915 saturation:1.000 brightness:0.941 alpha:1.000];
    UIColor *lightPink = [UIColor colorWithHue:0.917 saturation:0.647 brightness:1.000 alpha:1.000];

    NSArray *gradientColors = [NSArray arrayWithObjects:
                               (id)darkPink.CGColor,
                               (id)lightPink.CGColor,
                               (id)darkPink.CGColor, nil];
    CGFloat gradientLocations[] = {0, 0.5, 1};
    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)gradientColors, gradientLocations);

    CGColorSpaceRelease(colorSpace);

    UIGraphicsBeginImageContext(r.size);
    heart.lineCapStyle = kCGLineCapRound;
    heart.lineWidth = 10.0f;
    [[UIColor blackColor] setStroke];
    [[UIColor redColor] setFill];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);

    [heart stroke]; //removed the black stroke around
    [heart fill];
    CGContextAddPath(context, heart.CGPath);
    CGContextClip(context);
    CGContextDrawLinearGradient(context, gradient, CGPointMake(10, 10), CGPointMake(210, 210), kCGGradientDrawsAfterEndLocation); //check that gradient is drawn in the right place

    CGGradientRelease(gradient);
    UIImage *theRightImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

# java - 在项目的 xml 中引用 jar 的 web.xml

> ID：15836749
> 
> 赞同：1
> 
> 时间：2013-04-05T14:39:12.727
> 
> 标签：java

我有一个 jar（不是战争）在其 WEB-INF 文件夹中包含 web.xml，其中包含 servlet-mapping（Dispatcher servlet 和对包含 REST 相关控制器详细信息的 config.xml 的引用）。现在，我必须把这个 jar 放在不同项目的类路径中，我想在项目中使用 jar 的 servlet 映射。

是否可以通过项目的web.xml加载jar的web.xml？或任何其他解决此问题的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:49:28.170

[这篇博](https://blogs.oracle.com/swchan/servlet-30-web-fragmentxml)文对此进行了解释。

这只能在 servlet 3.0 应用程序中实现。

jar 文件必须在 下`WEB-INF/lib`，其描述符必须称为 web-fragment.xml 并`META-INF/`在 jar 文件中。

关注博文和规范链接了解更多详情。

# arrays - 重新打开工作簿时，激活 Sumproduct Array (C+S+E) 会停用

> ID：15836752
> 
> 赞同：0
> 
> 时间：2013-04-05T14:39:26.147
> 
> 标签：arrays, excel

几个小时以来，我一直在为几个非常耗时的问题挠头。我有一个 sumproduct 公式，计算一个月和一年内的预订数量，另一个做同样的事情，但计算利润而不是预订数量。

每个公式如下：

```
Bookings
=SUMPRODUCT(--(BAU!$X$3:$X$10000<>""),--(MONTH(BAU!$X$3:$X$10000)=1),--(YEAR(BAU!$X$3:$X$10000)=2013))

Profit
=SUMPRODUCT(--IF(ISNUMBER(BAU!$AA$3:$AA$10000),BAU!$AA$3:$AA$10000),--(MONTH(BAU!$X$3:$X$10000)=1),--(YEAR(BAU!$X$3:$X$10000)=2013)) 
```

我有两个问题，首先，我有大约 300 个带有此类公式的单元格，这些单元格涵盖每个月和每年的客户，使用 control shift enter 激活这些单元格单独需要很长时间，当我尝试一次激活所有单元格时，公式中的月份和年份标准，例如 (=1 & =2013) 在每个单元格中重复，因此每个单元格不是搜索每个月，而是只查询 =1（一月），这可以避免吗？

其次，在手动控制班次进入每个单元格并保存/关闭工作簿后，当我重新打开它时，每个单元格中都会出现 #VALUE 错误，这意味着我必须重复整个 CSE 过程。

任何帮助将不胜感激，对不起，如果我没有多大意义，我尽力了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:06:38.770

如果看起来像这就是你想要的

```
=COUNTIFS(BAU!$X$3:$X$10000,">=1/1/2013",BAU!$X$3:$X$10000,"<=1/31/2013") 
```

和

```
=SUMIFS(BAU!$AA$3:$AA$10000,BAU!$X$3:$X$10000,">=1/1/2013",BAU!$X$3:$X$10000,"<=1/31/2013") 
```

您不需要像普通公式一样将这些作为数组输入。

如果您需要更改日期，我会执行以下操作：

在 A1 中（或者您想在其中输入日期的任何单元格）右键单击该单元格并单击“设置单元格格式...”，然后在“数字”选项卡（通常也会打开该选项卡）下单击“自定义”。然后输入“m/y”，其中显示类型：。

从那里你在单元格中输入一个月和一年。

然后将公式修改为此

```
=COUNTIFS(BAU!$X$3:$X$10000,">="&A1,BAU!$X$3:$X$10000,"<="&A1+30) 
```

和

```
=SUMIFS(BAU!$AA$3:$AA$10000,BAU!$X$3:$X$10000,">="&A1,BAU!$X$3:$X$10000,"<="&A1+30) 
```

将 A1 替换为您选择输入日期的单元格。在此示例中，将日期输入为“1/13”。

# css - 在背景图像上定位元素。但是 BG img 会随着窗口的大小而变化。CSS

> ID：15836753
> 
> 赞同：17
> 
> 时间：2013-04-05T14:39:26.447
> 
> 标签：css, position, background-image, cover

我有一个将大小更改为窗口大小的背景图像，我需要在其上放置一个元素，以便它相对于背景图像始终位于同一位置。

如何！？

**CSS**

```
background:url("http://placehold.it/100x100") no-repeat center center fixed;
-webkit-background-size:"cover";
-moz-background-size:"cover";
-o-background-size:"cover";
background-size:"cover"; 
```

背景图像覆盖整个背景并随窗口改变大小，但通过一些叠加来保持比例。

**编辑 - 2016**

我使用纯 CSS 的解决方案是将元素定位在中间，然后使用 calc 函数正确偏移它。然后相应地调整它的大小，我使用 vmin 值：

```
$offset-top: ...;
$offset-left: ...;

.element {
  top: 50%;
  left: 50%;
  transform: translate(calc(-50% + #{$offset-top}), calc(-50% + #{$offset-top}));
  width: 50vim; 
  height: 50vim;
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-05T15:43:39.213

您所要求的根本不是一件小事，它基本上涉及弄清楚如何`background-size:cover`工作，然后使用 JavaScript 定位您的元素。由于`background-size:cover`图像如何从 x 轴或 y 轴流出的性质，这不能用 CSS 完成。

这是我对该问题的解决方案，在加载和调整大小时，它会计算图像的比例和 x 或 y 偏移量，并在相关位置绘制指针。

[jsFiddle（谷歌红色'o'中的红点）](http://jsfiddle.net/Tyriar/ypb5P/1/)

![在此处输入图像描述](https://i.stack.imgur.com/K7YlW.png)

**HTML**

```
<div id="pointer"></div> 
```

**CSS**

```
body {
    background:url(https://www.google.com.au/images/srpr/logo4w.png) no-repeat center center fixed;
    -webkit-background-size:cover;
    -moz-background-size:cover;
    -o-background-size:cover;
    background-size:cover;
}

#pointer {
    margin-left:-10px;
    margin-top:-10px;
    width:20px;
    height:20px;
    background-color:#F00;
    position:fixed;
} 
```

**JS**

```
var image = { width: 550, height: 190 };
var target = { x: 184, y: 88 };

var pointer = $('#pointer');

$(document).ready(updatePointer);
$(window).resize(updatePointer);

function updatePointer() {
    var windowWidth = $(window).width();
    var windowHeight = $(window).height();

    // Get largest dimension increase
    var xScale = windowWidth / image.width;
    var yScale = windowHeight / image.height;
    var scale;
    var yOffset = 0;
    var xOffset = 0;

    if (xScale > yScale) {
        // The image fits perfectly in x axis, stretched in y
        scale = xScale;
        yOffset = (windowHeight - (image.height * scale)) / 2;
    } else {
        // The image fits perfectly in y axis, stretched in x
        scale = yScale;
        xOffset = (windowWidth - (image.width * scale)) / 2;
    }

    pointer.css('top', (target.y) * scale + yOffset);
    pointer.css('left', (target.x) * scale + xOffset);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:12:12.743

我将不得不猜测您的标记，但假设您有一些用于背景图像的容器，并且您的其他图像也需要居中，如下所示：

```
<div class="holdBGimg">
    <img src="image.jpg">
</div> 
```

您可以执行以下操作：

```
.holdBGimg {
    position: relative;
}
.holdBGimg img {
    width: 100px;
    height: 100px;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -50px;
    margin-left: -50px;
} 
```

您通过从相对边距中删除一半的测量值来补偿高度和宽度的偏移量。

如果您希望对其进行扩展，则解决方案可能更像是：

```
.holdBGimg {
    position: relative;
}
.holdBGimg img {
    width: 20%;
    height: 20%;
    position: absolute;
    top: 40%;
    left: 40%;
} 
```

这完全取决于您要居中的图像的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-03T06:40:06.540

我会为你要放在背景上的道具创建一个位置数组。使用全尺寸背景图像中的 x 和 y 位置...

```
var propPositions = [
  { name: "StoveBurner1", x: 23, y: 566 },
  { name: "StoveBurner2", x: 676, y: 456 },
  { name: "TableChair1", x: 765, y: 35 },
  ...
]; 
```

您还需要保持全尺寸背景的大小，以便您可以在大小更改时使用它来计算缩放因子。

```
var fullBackgroundSize = { width: 1920, height: 1080 }; 
```

当图像大小发生变化时，计算缩放因子，然后缩放数组中每个元素的 x 和 y 位置...

```
for (var i = 0; i < propPositions.length; i++)
{
    propPositions[i].x *= scalingFactor;
    propPositions[i].y *= scalingFactor;
} 
```

无论图像大小如何，这将允许您精确定位所有道具。

这还允许您按名称查找职位，这将使您能够执行诸如...

```
placeObject(pot1, "StoveBurner1");
placeObject(pot2, "StoveBurner2");
placeObject(SittingPerson, "TableChair1"); 
```

这样，计算位置并将对象移动到它们的唯一代码是在一个小函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:12:18.613

添加一个居中容器：

```
#container {
    position: fixed;
    width: 0;
    height: 0;
    top: 50%;
    left: 50%;
    overflow: visible;
} 
```

然后在里面添加`position: relative`元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T15:44:03.243

相对（可扩展、响应、在此处插入流行语）单位 (%)。

响应式设计需要更多的工作。您必须根据窗口大小测试要对齐的图像区域的位置，然后根据窗口大小将这些值与元素放置相匹配。但是封面正在偏离图像本身的纵横比，并且与宽度或高度匹配。所以根据窗口的纵横比，它会弄乱你的布局。

您可以尝试使用 jQuery 和 javascript 来获取窗口的尺寸，然后 jquery 将图像的尺寸与之匹配并更改元素的尺寸。大量的编码工作，页面加载困难，但我们必须做出牺牲，不是吗？

# c#-4.0 - 从事件处理程序对实例调用 Dispose 是否安全？

> ID：15836755
> 
> 赞同：1
> 
> 时间：2013-04-05T14:39:29.040
> 
> 标签：c#-4.0, idisposable

```
public class MyTask : IDisposable { ... }

MyTask task = new MyTask(() => SomeTask);

task.Completed += (s, e) =>
{
    // do something with result
    ...
    // dispose of this instance
    ((MyTask)s).Dispose();
};

// execute the task
task.Execute(); 
```

显然，我无法确定任务何时完成，因此在我看来，我可以处理此实例的唯一实际位置是在 Completed 事件中。

这样做安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:13:10.100

唉，关于什么时候打电话是安全的，没有一般规则`Dispose`。如果 Microsoft 已指定`Dispose`必须在对象不使用时随时安全调用，那么遵守这样的规则将很少有困难；如果一个类可能并不总是能够立即执行所有必要的清理（*），它通常可以设置一个标志和/或以其他方式安排在下一次机会执行必要的清理。不幸的是，Microsoft 没有指定`Dispose`实现必须处理异步`Dispose`请求，也没有任何通用方法可以让持有对`IDisposable`实例的最后有用引用的对象在可以安全处置时请求通知。

尽管普遍缺乏关于何时可以安全调用 Dispose 的保证，但许多实现的特定类`Dispose`确实提供了关于何时可以安全调用它的保证。如果知道某个特定对象是一种可以在特定上下文中安全处置的类型，那么就可以处置它。特别是在来自对象的事件可能是它可以知道的线程上下文中的唯一机会`Dispose`的情况下，并且在事件处理程序中处置对象是有意义的，处置对象应该是安全的。任何正确编写的事件处理程序都应该为发送事件的对象可能在系统决定它们应该运行的时间和它实际运行它们的时间之间处置的可能性做好准备。

(*) 的基本目的`IDisposable`是允许一个对象通知在它之外但代表它行事而损害其他实体的实体，他们不应该再这样做[例如告诉文件系统它不应该不再授予对象对文件的独占访问]。这种行为被称为“释放资源”。某人持有对象的最后一个幸存引用这一事实可能意味着没有其他线程可以使用该对象，但并不意味着没有其他线程正在使用任何需要释放资源的非线程安全实体。

# sql - 从 SQL Server 函数向存储过程抛出异常

> ID：15836759
> 
> 赞同：8
> 
> 时间：2013-04-05T14:39:40.490
> 
> 标签：sql, sql-server, exception-handling

我在 SQL Server 2012 中有存储过程说 spXample 和一个缩放器值函数说 fXample。我从 spXample 调用函数 fXample。我可以在函数中抛出异常并在存储过程的`Catch`块中捕获它并重新抛出到调用 C# 代码吗？

**更新：**

我写的函数喜欢：

```
CREATE FUNCTION dbo.fXample(@i INT)
RETURNS TINYINT
AS
BEGIN
  RETURN (SELECT CASE WHEN @i < 10 
    THEN THROW 51000,'Xample Exception',1;
    ELSE (SELECT @i) 
    END);
END
GO 
```

我收到错误

> 消息 443，级别 16，状态 14，过程 fXample，第 46 行在函数中无效使用副作用运算符“THROW”。

如何编写替代代码来实现上述功能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T16:11:12.470

您可以通过在验证失败时强制出现错误条件来做到这一点，前提是这不是可能自然发生的错误。当您知道某个错误只能在验证失败时发生时，您可以通过检查 catch 块中的 error_number 以自定义方式处理该错误。tempdb 中的示例：

```
USE tempdb;
GO

CREATE FUNCTION dbo.fXample(@i INT)
RETURNS TINYINT
AS
BEGIN
  RETURN (SELECT CASE WHEN @i < 10 -- change this to your "validation failed" condition
    THEN 1/0         -- something that will generate an error
    ELSE (SELECT @i) -- (you'd have your actual retrieval code here)
    END);
END
GO

CREATE PROCEDURE dbo.spXample
  @i INT
AS
BEGIN
  SET NOCOUNT ON;
  BEGIN TRY
    SELECT dbo.fXample(@i);
  END TRY
  BEGIN CATCH
    IF ERROR_NUMBER() = 8134 -- divide by zero
    BEGIN
      THROW 50001, 'Your custom error message.', 1;
      -- you can throw any number > 50000 here
    END
    ELSE -- something else went wrong
    BEGIN
      THROW; -- throw original error
    END
  END CATCH
END
GO 
```

现在试试看：

```
EXEC dbo.spXample @i = 10;  -- works fine
EXEC dbo.spXample @i = 6;   -- fails validation
EXEC dbo.spXample @i = 256; -- passes validation but overflows return 
```

结果：

```
----
10 
```

> 消息 50001，级别 16，状态 1，过程 spXample，第 12 行
> 您的自定义错误消息。
> 
> 消息 220，级别 16，状态 2，过程 spXample，第 7 行
> 数据类型 tinyint 的算术溢出错误，值 = 256。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-24T16:04:43.750

```
/*  *** EXAMPLES ***
    SELECT dbo.fnDoSomething(500) -- RETURNS TRUE

    SELECT dbo.fnDoSomething(5000) -- THROWS ERROR
        Msg 245, Level 16, State 1, Line 4
        Conversion failed when converting the varchar value 
        'Function Error - [dbo].[fnDoSomething] - Value is greater than 1000' to data type bit.
*/
CREATE FUNCTION dbo.fnDoSomething
(
    @SomeValue      INT
)
RETURNS BIT
AS
BEGIN
    IF @SomeValue > 1000
    BEGIN
        DECLARE @FunctionName AS SYSNAME = QUOTENAME(OBJECT_SCHEMA_NAME(@@PROCID)) + '.' + QUOTENAME(OBJECT_NAME(@@PROCID))
        DECLARE @Error AS VARCHAR(200) = 'Function Error - '+ @FunctionName + ' - Value is greater than 1000'
        RETURN  CONVERT(BIT,@Error)
    END

    RETURN 1
END
GO 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-30T22:53:09.873

虽然这已经解决了，但我觉得我仍然应该分享这个。我认为这将是一个更简单的解决方案：

```
BEGIN TRY
    THROW 60000, 'Error', 1;
END TRY
BEGIN CATCH
    THROW
END CATCH 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-31T22:08:56.653

如果满足特定条件但错误严重性必须高于 10 才能引发 SQL 异常，您也可以在存储过程中引发错误

```
CREATE PROC test
AS
RAISERROR('the error message', 11, 1);
RETURN 
```

您可以稍后在您的 catch 块中访问此消息

```
try {
    testProc.ExecuteNonQuery();
}
catch(SqlException ex)
{
    System.Diagnostics.Debug.WriteLine(ex.Message);
} 
```

输出：“错误信息”

# python - Python中的屏蔽

> ID：15836764
> 
> 赞同：1
> 
> 时间：2013-04-05T14:39:52.507
> 
> 标签：python, mask

我正在尝试安排以下代码，以便表示单词中字符位置的数字出现在掩码下方。换句话说：

```
 _ _ _
  1 2 3 
```

这是我当前的代码：

```
secretWord = 'dog'

mask = '_'  * len(secretWord)
for i in range (len(secretWord)):
    if secretWord[i] in correctLetters:
        mask = mask[:i] + secretWord[i] + mask [i+1:]
for letter in mask:
    print (letter, end='')

print () 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:47:09.743

列表表示可以帮助您：

```
secretWord = list('dog') # ['d', 'o', 'g']

mask = ['_']  * len(secretWord) # not problematic, since strs are immutable
for i,char in enumerate(secretWord):
    if secretWord[i] in correctLetters:
        mask[i] = secretWord[i]
print (''.join(mask)) 
```

希望这可以帮助

# magento - Magento：以编程方式更新购物车中的项目自定义选项？

> ID：15836767
> 
> 赞同：0
> 
> 时间：2013-04-05T14:39:57.690
> 
> 标签：magento, shopping-cart

我想从购物车中的商品更新自定义选项。我有项目 ID，所以我可以在我的控制器中加载项目。这就是我卡住的地方，我可以从购物车中删除该项目并添加一个带有更新选项的新项目，但这不是我想要的。

我想直接更新购物车中的现有商品。任何想法如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T17:02:04.257

我对可配置产品有确切的问题。

目前，我知道 Magento 在“编辑购物车项目”页面上显示可配置产品选项，并且选项列表是在没有预先选择可配置属性的情况下生成的。该属性由 javascript 设置，它获取由生成的数据

```
 <script type="text/javascript">
    var spConfig = new Product.Config(<?php echo $this->getJsonConfig() ?>);
</script> 
```

但它仅在“编辑购物车项目”页面上显示选定属性。如果我手动调用它，它不会显示当前的属性选择。

据我所知，一些结帐模块还在购物车概览中显示选定的属性 - 因此，可以从 Magento 获取该数据（但我不确定它是直接从数据库获取还是以更友好的方式获取）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T12:16:40.090

config.xml 部分

```
<events>
    <checkout_cart_update_items_after>
        <observers>
            <update_items_specific_option>
                <class>mycompany_checkout/observer</class>
                <method>updateItemsSpecificOption</method>
            </update_items_specific_option>
        </observers>
    </checkout_cart_update_items_after>
</events> 
```

app/code/local/MyCompany/Observer.php 部分

```
<?php

class MyCompany_Checkout_Model_Observer
    extends Varien_Event_Observer
{
    public function updateItemsSpecificOption($observer)
    {
        $event  = $observer->getEvent();
        $cart   = $event->getCart();
        $data   = $event->getInfo();

        foreach ($data as $itemId => $itemInfo) {
            $item = $cart->getQuote()->getItemById($itemId);
            if (!$item) {
                continue;
            }

            $optionData = $this->_getSpecificOptionDataFromItem($item);
            if(!$optionData) {
                continue;
            }

            $params = clone $item->getBuyRequest();
            $options = $params->getOptions() ? $params->getOptions() : array();

            $updateItem = false;
            if($shouldIRemoveOption) {
                unset($options[$optionData['option_id']]);
                $updateItem = true;
            } elseif($shouldIAddOption) {
                $options[$optionData['option_id']] = array($optionData['value_id']);
                $updateItem = true;
            }

            if($updateItem) {
                $params->setOptions($options);
                $cart->updateItem($itemId, $params);
            }
        }
    }

    protected function _getSpecificOptionDataFromItem($item)
    {
        foreach($item->getProduct()->getOptions() as $option) {
            if($this->_isMyNeededOption($option)) {
                foreach($option->getValues() as $valueId => $value) {
                    if($this->_isMyNeededValue($value)) {
                        return array(
                            'option_id' => $option->getId(),
                            'value_id'  => $valueId,
                            'price'     => $value->getPrice()
                        );
                    }
                }
            }
        }

        return false;
    }
} 
```

我不知道您到底想在哪里更改自定义选项，所以这里有一个观察者，它在购物车更新操作期间执行此操作

# c# - 具有相同接口但属性类型不同的类

> ID：15836771
> 
> 赞同：2
> 
> 时间：2013-04-05T14:40:02.463
> 
> 标签：c#, .net, types, interface

我想要这样的设计：

```
public interface IDifferentTypes
{
}

public class IntegerType : IDifferentTypes
{
    public int value { get; set; }
}

public class StringType : IDifferentTypes
{
    public string value { get; set; }
}

public class DateTimeType : IDifferentTypes
{
    public DateTime value { get; set; }
} 
```

但是在接口中定义了属性“值”。

所以我可以这样称呼：

```
IDifferentTypes someInt = GetSomeInt(); // GetSomeInt() returns a IntegerType object
Assert.AreEqual(5, someInt.value);

IDifferentTypes someString = GetSomeString(); // GetSomeString() returns a StringType object
Assert.AreEqual("ok", someString.value); 
```

问题是每个实现的值类型不同，处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T14:42:12.940

您可以定义一个通用接口（但它必须是一个属性，或者更严格地说，它不能是一个字段）：

```
public interface IHasValue<T> {
  T Value { get; }
} 
```

类型在哪里`T`，占位符，如果你愿意，你可以这样做：

```
public class HasStringValue : IHasValue<string> {
  public string Value { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T14:44:44.887

如果可以，请使用泛型：

```
var someInt = GetSomeInt();
Assert.AreEqual(5, someInt.Value);

var someString = GetSomeString();
Assert.AreEqual("ok", someString.Value);

// ...

public interface IDifferentTypes<T>
{
    T Value { get; set; }
}

public class IntegerType : IDifferentTypes<int>
{
    public int Value { get; set; }
}

public class StringType : IDifferentTypes<string>
{
    public string Value { get; set; }
}

public class DateTimeType : IDifferentTypes<DateTime>
{
    public DateTime Value { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:54:16.827

```
interface IDifferentTypes
{
    Object Value { get; set; }
}

class StringType : IDifferentTypes
{
    string _value;

    public Object Value
    {
        get
        {
            return _value;
        }
        set
        {
            _value = value as string;
        }
    }
} 
```

但这意味着每次使用`StringType.Value`时都需要重铸它。您可能还想公开特定类型的公共访问器。您可能还想添加一些防止分配错误类型的保护措施：

```
class StringType : IDifferentTypes
{
    public String StringProperty { get; set; }

    public Object Value
    {
        get
        {
            // works with any type that can auto cast to `Object`
            return StringProperty;
        }
        set
        {
            // Optional
            if( typeof(string) != value.GetType() )
            {
                throw new MyException();
            }

            // works for any nullable type
            StringProperty = value as string;

            // OR

            // throws an exception if conversion fails
            StringProperty = (string)value;
        }
    }
} 
```

# delphi - 在delphi中取消选择树视图的元素

> ID：15836778
> 
> 赞同：1
> 
> 时间：2013-04-05T14:40:13.717
> 
> 标签：delphi, treeview

我只需要在delphi中取消选择树视图的一个项目。

这是我失败的尝试：

1)`TreeView1.Selected.Selected := False;`

2)`TreeView1.Selected.Data := nil;`

3)`TreeView1.Select(nil,[]);`

4)

```
 for i := 0 to TreeView1.Items.Count - 1 do  
      TreeView1.Items[i].Selected := false; 
```

5)

```
 TreeView1.MultiSelect := true;
  for i := 0 to TreeView1.Items.Count - 1 do
      TreeView1.Items[i].Selected := false;
      TreeView1.MultiSelect := false; 
```

6)

```
var
nulla : TTreeNode; 
```

* * *

```
nulla := nil;
TreeView1.Select(nulla, []); 
```

7)`TreeView1.ClearSelection(False);`

8)`TreeView1.ClearSelection(True);`

他们都使我的程序崩溃（除了 8，它根本什么都不做），我该怎么做？
我的目标是简单地取消选择单击空白区域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:57:10.697

将`TTreeView.Selected`属性设置为`nil`或将`TTreeNode.Selected`属性设置`False`为 是正确的方法。

`TTreeView.Selected`如果is already 1 和 2 将崩溃`nil`，但其他方法应该可以正常工作，前提是该`TTreeView`指针是一个有效的开始指针。

# c# - 如何使代码生成尊重我的格式设置？

> ID：15836780
> 
> 赞同：3
> 
> 时间：2013-04-05T14:40:19.073
> 
> 标签：c#, asp.net-mvc, visual-studio-2012, t4

我已经开始使用 VS2012 的 MVC 项目模板，我喜欢如何右键单击并说“添加控制器”或“添加视图”来生成新类。但是生成的类代码不尊重`Tools > Options > text Editor > C# > Formatting`.

具体来说，大括号的新行选项都未选中，但生成的类代码将所有打开的大括号放在新行上。每次我第一次保存新类时，它都会警告我混合制表符和空格（我的设置说保留制表符）。

我怀疑有 T4 模板支持这些类，但我不知道在哪里可以找到它们或如何编辑它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:10:37.277

这是因为代码是使用 T4 模板生成的。您必须修改这些 T4 模板以适应您的需要。

*   这是一个[很棒的教程](http://thekindofme.wordpress.com/2009/07/01/using-custom-t4-templates-to-generate-better-controllers-in-asp-mvc/)，带你完成它。
*   这是[关于它的另一篇文章](http://msdn.microsoft.com/en-us/magazine/ee291528.aspx)。
*   史蒂文·桑德森（Steven Sanderson）的[另一个](http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/)。

# c# - 在 localhost 上测试子域

> ID：15836783
> 
> 赞同：4
> 
> 时间：2013-04-05T14:40:25.307
> 
> 标签：c#, asp.net

我想在 asp.net 站点中测试一些子域功能。我只是为了编辑主机文件并添加 127.0.0.1 subdomain.domain.com 而阅读，这应该可以。

但我的好像没有。我已经刷新了 dns，重新启动，尝试了新的浏览器，但仍然收到错误 500。

当我从 Visual Studio 正常运行 asp.net 站点时，它会转到`http://localhost:17365/`. 我如何获得这个的IP地址？

我想我没有得到完整的画面并且遗漏了一些片段。

我运行 netstat -n 并看到该站点在 [::1]:17365 上运行，也许这就是为什么它不能在 ipv4 下运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T14:46:00.517

在 Visual Studio 中，当您运行该站点时，首先更改`Website Properties > Use Dynamic Ports`to `False`，然后设置`Port Number`to `80`，然后运行它。

默认情况下，它会启动`http://localhost:80`，但是在您的浏览器访问`subdomain.domain.com`中，它将指向您站点的调试实例（假设您`127.0.0.1 subdomain.domain.com`的主机文件中仍然有该实例）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T15:05:26.647

解决方案非常简单。编辑`host`文件后，添加一行：

`127.0.0.1 subdomain.domain.com`

你运行你的网站，个人网站启动，然后你进入浏览器

`http://localhost:[PortNumber]/` （例如`http://localhost:17365/`：）

只需将其更改为

`http://subdomain.domain.com:[PortNumber]/`（例如`http://subdomain.domain.com:17365/`：）

用手在浏览器的网址上输入它，它就会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-24T08:16:47.893

有人注册了指向 127.0.0.1 的“lvh.me”

所以你可以使用： http: [//lvh.me](http://lvh.me) [http://something.lvh.me](http://something.lvh.me)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T14:47:54.777

我只是去`Project Properties > Web`和下`Servers`，我选择`Use Local IIS Web server`并设置`Project Url`为`subdomain.domain.com`。

![在此处输入图像描述](https://i.stack.imgur.com/tcURT.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T14:56:19.990

当您通常在 Visual Studio 中启动一个 asp.net 站点时，它使用 Cassini 网络服务器。我不确定您是否可以为 Cassini 配置绑定。

我的建议是在 IIS 中配置一个网站或虚拟目录，并绑定到 subdomain.domain.com，看看这里如何做到这一点：[添加绑定到站点](http://technet.microsoft.com/en-us/library/cc731692%28v=WS.10%29.aspx)

您的主机文件应包含以下内容：

```
127.0.0.1    subdomain.domain.com 
```

然后 subdomain.domain.com 的请求将被重定向到您的本地 IIS Web 服务器（在端口 80 上），因为绑定配置 IIS 知道在哪里寻找您的网站。

在 Visual Studio 中 Web 项目的属性中，您可以配置为使用`Web tab`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T14:47:59.950

您还必须配置您的网络服务器。好的，您更改了主机文件。您的系统 (dns) 知道与主机一起去哪里 (127.0.0.1)。但是您的网络服务器仍然对 subdomain.domain.com 一无所知，并且与它没有任何关联。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T14:59:27.397

我不确定 Visual Studio 开发服务器是否可以处理与 localhost 以外的任何内容的绑定。我认为您唯一可以更改的是端口号。

你有几个选择。

1) 安装 IIS Express（或完整的 IIS，如果需要）并配置 Visual Studio 以指向您在其中设置的站点。您可以手动设置绑定`subdomain.domain.com`，它非常灵活。看看这个答案：[Using Custom Domains With IIS Express](https://stackoverflow.com/questions/4709014/using-custom-domains-with-iis-express)

2）安装像[rinetd](http://blog.waynehartman.com/articles/218.aspx)这样的端口转发器（我*认为*如果您的主机文件中有条目，这应该可以工作）。您应该能够映射`subdomain.domain.com:<some port number>`到`localhost:17365`. 请注意，rinetd 不会检测到您正在使用的域（只是底层 IP 地址，即 127.0.0.1），因此最好为您正在处理的每个项目使用不同的端口。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-22T23:52:07.427

我正在使用 VS 2017 和 Webforms（不要这么说）。

1.  在解决方案 (.sln) 文件（在记事本中）中，我将端口更改为 8080。这可以在多个属性中找到，包括 VWDPort、Debug.AspNetCompiler.VirtualPath、Debug.AspNetCompiler.TargetPath、Release.AspNetCompiler.VirtualPath 和 Release。 AspNetCompiler.TargetPath
2.  在 applicationhost.config 文件中，我添加了：

> ```
> <binding protocol="http" bindingInformation="*:8080:subdomain.domain" /> 
> ```

也在记事本中完成。确保此文件中没有任何重复或旧条目用于绑定。在步骤 1 中更改端口后，您可能会得到一个自动生成的带有旧绑定的重复条目。此外，请确保您编辑了正确的 applicationhost.config 文件。此文件位于不同的位置，具体取决于您的 VS 版本。

3.  在 Powershell 中，运行：“netsh http add urlacl url= [http://subdomain.domain:80/](http://subdomain.domain:80/) user=everyone”
4.  在您的主机文件中（我的位于 C:\Windows\System32\drivers\etc 中）将“127.0.0.1 subdomain.domain”添加到您的主机列表中。您必须是管理员（右键单击记事本，以管理员身份运行）
5.  以管理员身份运行 VS。这将使端口保持为 80。如果不以管理员身份运行，您将获得一个随机端口号，您的 .sln 文件将使用此编号自动编辑，并且您将在 applicationhost.config 中获得重复的绑定。

以管理员身份运行很烦人，但这是我可以让端口不改变的唯一方法。此外，我尝试使用其他端口，例如随机分配的 VS，但不断遇到来自 IIS 的 503 错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-04T15:07:20.757

转到 applicationhost.config，您可以在 Windows 托盘上找到。 [在 IIS 中查找当前正在运行的项目的 application.config](https://i.stack.imgur.com/j2lzY.png)

现在找到

```
<webLimits>
......
<sites>
.....
<site name="[YourProjectName]" id="[YourProjectID]">
                <application path="/" applicationPool="Clr4IntegratedAppPool">
                    <virtualDirectory path="/" physicalPath="[Your Project Path]" />
                </application>
                <bindings>
                    <binding protocol="http" bindingInformation="*:50569:[Remove localhost from here]" />
                </bindings>
            </site>
.....
</sites>
......
<webLimits /> 
```

从 bindingInformation 中删除 localhost。

最后，以管理员身份运行 VisualStudio

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-04-05T15:00:55.953

使用它，如果我添加此代码，您可以获得 IP 地址列表， `127.0.0.1`请确认这是否是您要查找的内容，否则我将删除答案

```
foreach (IPAddress address in Dns.GetHostAddresses("localhost"))
{
    Console.WriteLine(address.ToString());
} 
```

# ruby - 我需要一个枚举器吗？

> ID：15836784
> 
> 赞同：0
> 
> 时间：2013-04-05T14:40:26.887
> 
> 标签：ruby, enumerable

我想做这个：

```
<div class="menu">

  <%- render_menu do |title,path,children| %>

    <%= link_to title, path %>

    <div class="submenu">
      <%= render_menu(children) do |title,path,children| %>
        <%= link_to title, path %>
        <%= children %>
      <%- end %>
    </div>

  <% end %>

</div> 
```

该方法`render_menu`看起来像这样：

```
def render_menu(children=nil)
  children = Paths.roots if children.nil?
  children.collect do |child|
    [ child.title, child.path, child.children ]
  end
end 
```

我不确定`render_menu`需要返回什么来获取三个参数。`render_menu`如果没有给出参数，它将获取默认菜单项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:44:57.950

您必须使用`yield`和替换`each`for `collect`inside `render_menu`：

```
def render_menu(children=nil)
  children = Paths.roots if children.nil?
  children.each do |child|
    yield([child.title, child.path, child.children])
  end
end 
```

您还应该修改模板以不显示返回的值`render_menu`：

```
<div class="submenu">
    <% render_menu(children) do |title,path,children| %>
        <%= link_to title, path %>
        <%= children %>
    <% end %>
</div> 
```

# android - Android单选按钮取消选中

> ID：15836789
> 
> 赞同：4
> 
> 时间：2013-04-05T14:40:34.727
> 
> 标签：android, button, radio

该应用程序是一个步进音序器应用程序，具有 16 个无线电组，每组有 8 个按钮。它工作得很好，除非一个组选择了一个按钮，除非我使用我创建的清除按钮来清除所有无线电组，否则我无法将其关闭。我想添加的是一些代码，当再次选择选定的单选按钮时，它会像切换按钮一样关闭。我尝试使用切换，但该方法出现了其他问题。以下是两次尝试，但都只是阻止我使用按钮

```
final RadioGroup radioGroup1 = (RadioGroup) findViewById(R.id.RadioGroup1);
RadioButton D1 = (RadioButton) findViewById(R.id.RadioButtonD1);

Button D1 = (Button) findViewById(R.id.RadioButtonD1);
D1.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick (View v){
        PdBase.sendFloat("D1", 74);
        int selectedTypeId = radioGroup1.getCheckedRadioButtonId();
        RadioButton D1 = (RadioButton) findViewById(selectedTypeId);
        if (D1 != null) // This will be null if none of the radio buttons are selected
            radioGroup1.clearCheck();
        PdBase.sendFloat("D1", 0);
    }
});

RadioButton lC1 = (RadioButton) findViewById(R.id.RadioButtonlowC1);
lC1.setOnClickListener(new View.OnClickListener() {
    public void onClick (View v) {
        int selectedTypeId = radioGroup1.getCheckedRadioButtonId();

        RadioButton lC1 = (RadioButton) findViewById(R.id.RadioButtonlowC1);
        if (selectedTypeId == -1) {
            PdBase.sendFloat("lC1", 72);
        }
        else if (selectedTypeId == R.id.RadioButtonlowC1) {
            radioGroup1.clearCheck();
            PdBase.sendFloat("lC1", 0);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-03-07T22:47:15.370

我最近有同样的需求 - 有一个收音机组，可以通过再次点击它来取消选择所选项目。我发现我无法使用 listeners 来完成它，但我*可以*使用 custom 来完成它`RadioButton`，就像这样......

```
public class ToggleableRadioButton extends RadioButton {
    // Implement necessary constructors

    @Override
    public void toggle() {
        if(isChecked()) {
            if(getParent() instanceof RadioGroup) {
                ((RadioGroup)getParent()).clearCheck();
            }
        } else {
            setChecked(true);
        }
    }
} 
```

请注意，按钮根据其当前状态以不同方式切换 - 即，调用`setChecked(true)`按钮与调用`clearCheck()`组。如果`setChecked()`在这两种情况下都使用，则无法立即重新选择刚刚取消选择的按钮 - 中的逻辑`RadioGroup`似乎立即取消选择它。

要使用此按钮，只需将您的`<RadioButton>`标签替换`<your.package.ToggleableRadioButton>`为布局 XML 中的标签。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-23T09:39:04.857

我刚刚使用了[@spaarky21的答案](https://stackoverflow.com/users/515205/spaaarky21)

我的完整代码看起来像这样，它工作正常！

Java 类

```
public class ToggleableRadioButton extends RadioButton {

    public ToggleableRadioButton(Context context) {
        super(context);
    }

    public ToggleableRadioButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ToggleableRadioButton(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public ToggleableRadioButton(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
    }

    @Override
    public void toggle() {
        if(isChecked()) {
            if(getParent() instanceof RadioGroup) {
                ((RadioGroup)getParent()).clearCheck();
            }
        } else {
            setChecked(true);
        }
    }
} 
```

对于 XML 布局

```
<com.smart_dent.adapters.ToggleableRadioButton android:id="@+id/tejido_blando_perfil_convexo"
                                 android:layout_width="wrap_content"
                                 android:layout_height="wrap_content"
                                 android:text="@string/tejido_blando_convexo_label" /> 
```

在这种情况下你只需要更改包，我这很容易找到，它就在 Java Class Flie 的顶部（如果你是从 Android Studio 创建的）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-10T08:36:56.830

它实际上**可以**通过侦听器完成，但使用`OnTouchListener`，它将在按钮状态更改之前触发，而不是通常的`OnClickListener`. 以下对我有用：

```
View.OnTouchListener radioButtonOnTouchListener = new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (((RadioButton) v).isChecked()) {
            // If the button was already checked, uncheck them all
            radioGroup.clearCheck();
            // Prevent the system from re-checking it
            return true;
        }
        return false;
    }
};
radioButton1.setOnTouchListener(radioButtonOnTouchListener);
radioButton2.setOnTouchListener(radioButtonOnTouchListener); 
```

和`radioGroup`的父母在哪里`radioButton1``radioButton2`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-10T03:14:08.283

从@spaarky21 回答编辑

```
@Override
public void toggle() {
    if (isChecked()) {
        if (getParent() instanceof RadioGroup) {
            ((RadioGroup) getParent()).clearCheck();
        } 
        // add else here when a single radioButton without radioGroup
        else {
            setChecked(false);
        }
    } else {
        setChecked(true);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-08T14:22:52.870

这也在做这项工作：

```
public final class ToggleAbleRadioButton extends AppCompatRadioButton {
  public ToggleAbleRadioButton(final Context context, final AttributeSet attrs) {
    super(context, attrs);
  }

  @Override public void toggle() {
    setChecked(!isChecked());
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-30T22:50:55.327

您可以使用布尔值来打开和关闭按钮。

在代码中的某处添加一个布尔值：

```
var radioButton1IsSelected = false 
```

然后为按钮设置 onClickListener：

```
radioButton1.setOnClickListener {
        radioButton1IsSelected = !radioButton1IsSelected
        radioButton1.isChecked = radioButton1IsSelected
    } 
```

# java - 在 Mac 上：无法在目录中运行程序 /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java”...错误=7，参数列表太长

> ID：15836795
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:40:45.733
> 
> 标签：java, macos, google-app-engine, gwt, jdk1.6

我收到以下错误。

无法运行程序“/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java”（在目录“/Users/samschmid/Privat/dev/amsf/App-Management-System-Framework/应用程序管理系统”）：错误=7，参数列表太长无法运行程序“/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java”（在目录“/Users/samschmid/ Privat/dev/amsf/App-Management-System-Framework/App Management System"): error=7, 参数列表太长

我在谷歌上搜索了 7 个小时，但没有任何解决方案对我有用。有人对我有提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:32:55.147

可能你的项目有一个巨大的依赖列表，所以当 gwt 编译器或开发模式启动时，这样的类路径会生成一个长的命令行。

您的问题与 java 或 gwt 无关，而是与您的操作系统限制有关。

更改系统中的限制。看看这个帖子：

[http://www.cyberciti.biz/faq/argument-list-too-long-error-solution/](http://www.cyberciti.biz/faq/argument-list-too-long-error-solution/)

# android - Android如何将int转换为String？

> ID：15836797
> 
> 赞同：95
> 
> 时间：2013-04-05T14:40:46.183
> 
> 标签：android

我有一个 int，我想将它转换为字符串。应该很简单吧？但是编译器抱怨我这样做时找不到符号：

```
int tmpInt = 10;
String tmpStr10 = String.valueOf(tmpInt); 
```

以上有什么问题？而且，如何将 int（或 long）转换为 String？

编辑： valueOf 不是 valueof ;)

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2013-04-05T14:43:49.573

用这个`String.valueOf(value);`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-05T14:42:16.877

正常的方式是`Integer.toString(i)`or `String.valueOf(i)`。

```
int i = 5;
String strI = String.valueOf(i); 
```

或者

```
int aInt = 1;    
String aString = Integer.toString(aInt); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-05T14:43:18.130

您调用了 String 类的错误方法，请尝试：

```
int tmpInt = 10;
String tmpStr10 = String.valueOf(tmpInt); 
```

你也可以这样做：

```
int tmpInt = 10;
String tmpStr10 = Integer.toString(tmpInt); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-05T14:42:11.547

改为使用`Integer.toString(tmpInt)`。

# java - 如何将 try catch 放到事件方法中以自定义 catch java

> ID：15836806
> 
> 赞同：1
> 
> 时间：2013-04-05T14:41:00.370
> 
> 标签：java, events, file-upload, primefaces, try-catch

`p:fileupload`在使用PrimeFaces的标签时，我创建了一种处理文件上传的方法：

```
public void handleFileUpload(FileUploadEvent event) throws IOException { 
    FacesContext.getCurrentInstance()
        .getExternalContext()
        .getSessionMap().put("limage", event.getFile());        
} 
```

但是在测试这段代码时，我得到了一个异常：

```
 GRAVE: C:\tmp\upload_6d3af437_13dda559a63__8000_00000082.tmp (Le fichier spécifié est introuvable)
java.io.FileNotFoundException: C:\tmp\upload_6d3af437_13dda559a63__8000_00000082.tmp (Le fichier spécifié est introuvable)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at org.apache.commons.fileupload.disk.DiskFileItem.readObject(DiskFileItem.java:719)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1666)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1322)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at com.sun.faces.renderkit.ClientSideStateHelper.doGetState(ClientSideStateHelper.java:255)
    at com.sun.faces.renderkit.ClientSideStateHelper.getState(ClientSideStateHelper.java:198)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:227)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.restoreView(PrettyViewHandler.java:109)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

为了帮助追踪此异常，我将自定义逻辑包装在 try/catch 块中，并在 catch 块中使用处理程序来帮助我确定何时捕获到异常。但是没有调用catch：

```
public void handleFileUpload(FileUploadEvent event) throws IOException{
    try {
        FacesContext.getCurrentInstance()
           .getExternalContext()
           .getSessionMap().put("limage", event.getFile());
    } catch(Exception e) {
        System.out.println("i am in catch ");
        e.printStackTrace();
    }       
} 
```

我认为问题不在说明中，但可能在说明运行之前发生。这是我的用户界面代码：

```
<p:fileUpload   mode="advanced" auto="true"
    fileUploadListener="#{articlesMB.handleFileUpload}"  /> 
```

如何修复错误？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:53:29.343

`getFile`不会抛出异常。您显示的代码只是将文件放入会话映射中。在使用文件对象的其他地方抛出异常。

正如我从堆栈跟踪中看到的那样 - 它发生在会话试图在请求之间反序列化时。您应该将文件存储在其他地方，因为在多部分 http 请求完成后，框架会立即删除该文件。

# javascript - jQuery 1.9 复选框计数

> ID：15836807
> 
> 赞同：0
> 
> 时间：2013-04-05T14:41:00.977
> 
> 标签：javascript, jquery, html, checkbox

我有一些 1.6 的旧 jQuery 代码可以完美运行，但我目前正在重做网站并升级到 1.9.1 jQuery，但我的旧代码不起作用。

```
$("input[type=checkbox][name=compare[]]").click(function() {    
    var bol = $("input[type=checkbox][name=compare[]]:checked").length >= 5;     
    $("input[type=checkbox][name=compare[]]").not(":checked").attr("disabled",bol); 
    $(this).closest("tr").toggleClass("marked", this.checked);
}); 
```

我有一个带有行值的复选框的表行，如果选中它会将行 ID 推送到一个数组中，这样我就可以在其他地方使用它。它还一次只允许最多 5 个复选框处于活动状态，并禁用其余复选框，因此无法检查它们（是的，我知道这些可以通过 DOM 完成，但在任何处理之前已在 PHP 中检查）。它还将应用标记的类，它只是一个较暗的 bg，以帮助使其更易于阅读。

我在加载时的 chrome 中的 javascript 控制台中收到以下错误

```
Uncaught Error: Syntax error, unrecognized expression: input[type=checkbox][name=compare[]] 
```

当时代码更像是一项黑客工作，令我惊讶的是它甚至可以工作（笑）。

以下代码将选中选中的复选框并将值放入数组中，以便我可以通过 ajax 将其关闭。

```
$("input[type=checkbox][name=compare[]]:checked").each(function() {
        data['id[]'].push($(this).val());
    }); 
```

我已经开始重写它，但是在尝试为每个复选框赋予它自己的唯一标识符时遇到了问题，而在 jquery 会自己做之前。

.compare_check 是复选框的类

```
$('.compare_check').click(function() {      
    if (!$(this).is(':checked')) {
                 // do some work on 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:45:25.203

将要检查的属性的值用双引号括起来，这样您就可以：

```
$('input[type=checkbox][name="compare[]"]') 
```

而不是

```
$("input[type=checkbox][name=compare[]]") 
```

或者，您可以使用`\\`转义属性名称中的`[`and ：`]`

```
$("input[type=checkbox][name=compare\\[\\]]") 
```

您可能还应该使用`.prop()`，而不是`.attr()`，将元素设置为禁用。

# java - 使用 apache commons 计算偏度和峰度

> ID：15836808
> 
> 赞同：3
> 
> 时间：2013-04-05T14:41:02.407
> 
> 标签：java, math, statistics, apache-commons

我在向量中有数据点，我想计算数据集的偏度和峰度。

我该如何使用 apache commons 来解决这个问题？

```
Vector<Double> mydata = new Vector<Double>
//data points are added by my routing 
```

我在文档中找到的代码是这样的：

```
 FourthMoment m4 = new FourthMoment();
    Mean m = new Mean(m4);
    Variance v = new Variance(m4);
    Skewness s= new Skewness(m4);
    Kurtosis k = new Kurtosis(m4);
    assertEquals(var,v.getResult(),tolerance);
    assertEquals(skew ,s.getResult(),tolerance); 
```

但是我的编译器无法识别 Fourthmoment。我如何实际获取 mydata ？

感谢您的帮助，我似乎无法获得明确的示例。

我使用 3.1.1 版本，它可以识别我的所有导入，除了第一个：

```
import org.apache.commons.math3.stat.descriptive.moment.FourthMoment;
import org.apache.commons.math3.stat.descriptive.moment.Kurtosis;
import org.apache.commons.math3.stat.descriptive.moment.Mean;
import org.apache.commons.math3.stat.descriptive.moment.Skewness;
import org.apache.commons.math3.stat.descriptive.moment.Variance; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:05:34.973

> 我需要这个第四时刻吗？或者我可以根据我的向量计算它吗？

我认为您可以直接使用[`Kurtosis.evaluate()`](http://commons.apache.org/proper/commons-math/javadocs/api-3.1.1/org/apache/commons/math3/stat/descriptive/moment/Kurtosis.html#evaluate%28double%5B%5D,%20int,%20int%29).

# javascript - 使用 jquery/javascript 下载多个文件

> ID：15836809
> 
> 赞同：0
> 
> 时间：2013-04-05T14:41:07.993
> 
> 标签：javascript, jquery

我有一个网页，我们在其中列出了一组电子书。每个电子书项目都是指向实际服务器位置的链接。我们为用户提供下载免费电子书，通过点击书籍链接。

为了增加用户体验，我们计划在每个电子书链接上添加复选框，以便访问者可以选择图书。最后，他们可以选择“下载所选内容”。

假设用户选择了 15 本电子书，我们不希望保存窗口出现一次。（不是 15 个窗口）。如果用户选择保存按钮，则应将所有 15 本电子书依次保存。此外，每本电子书的大小都不同，因此我们无法预测后续下载的黑白时间间隔。

请指导我们如何在 jquery/java 脚本中实现这一点。

我正在使用 Sprint 和 JSP

# c++ - C++ 动态数组“丢失”数据

> ID：15836813
> 
> 赞同：0
> 
> 时间：2013-04-05T14:41:33.313
> 
> 标签：c++, arrays, dynamic

所以首先，这是我的声明和初始化：

```
int** GameField = 0;
GameField = new int*[mapsize];                  
for(int i = 0; i < mapsize; i++)
        GameField[i] = new int[mapsize];

for(int j = 0; j < mapsize; j++)                
        for(int i = 0; i < mapsize; i++)
            GameField[i][j] = 0; 
```

现在我正在尝试使用一个简单的命令插入数据：

```
if(!(Player1.find(Move) == Player1.end()) && iter>0)            
        {
            GameResult=1;                                       
        }else
        {
            Player1[Move] = 1;                          
            GameField[Move.first][Move.second]=1;               
            if(WinCheck(Player1, Move, x, mapsize))
                GameResult = 1;
        } 
```

同时我将数据插入到 STL 映射中。Visual Studio 没有动态数据的本机显示，因此我无法查看表格的内容。试着看记忆，但很难理解它。程序的一部分似乎一直工作到某一点：

```
 bool CheckIfMovePossible(int **GameField, pair <int,int> &Move, int MapSize)
{
    int x = Move.first;
    int y = Move.second;
    bool Neighbour = false;

    if(GameField[modulo(x+1,MapSize)][y]==(1||2))                       // po prawej
        Neighbour = true;

    if(GameField[modulo(x+1,MapSize)][modulo(y+1,MapSize)]==(1||2))
        Neighbour = true;

    if(GameField[modulo(x+1,MapSize)][modulo(y-1,MapSize)]==(1||2))
        Neighbour = true;

    if(GameField[x][modulo(y+1,MapSize)]==(1||2))                       // x
        Neighbour = true;

    if(GameField[x][modulo(y-1,MapSize)]==(1||2))
        Neighbour = true;

    if(GameField[modulo(x-1,MapSize)][modulo(y+1,MapSize)]==(1||2))     // po lewej
        Neighbour = true;

    if(GameField[modulo(x-1,MapSize)][y]==(1||2))
        Neighbour = true;

    if(GameField[modulo(x-1,MapSize)][modulo(y-1,MapSize)]==(1||2))
        Neighbour = true;

    return Neighbour;

} 
```

它应该检查容器中是否有任何相邻数据。我手动计算值并使用调试器，在每种情况下，程序的行为都好像在请求的位置没有数据，而它必须在那里，因为它存在于地图中。任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:02:24.440

你的 if 语句应该是这样的：

```
if(GameField[modulo(x+1,MapSize)][y] == 1 ||
   GameField[modulo(x+1,MapSize)][y] == 2)                       // po prawej
    Neighbour = true; 
```

您可能还想保存模值，以免经常重新计算它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:01:39.660

看来你想用这样的代码做什么

```
if(GameField[modulo(x+1,MapSize)][y]==(1||2)) 
```

这是。

```
if ( GameField[modulo(x+1,MapSize)][y] == 1 ||
     GameField[modulo(x+1,MapSize)][y] == 2) 
```

与您的问题无关，似乎您的逻辑在确定函数将返回**后做***了很多工作* 。**`true`**

 **一旦确定这是返回值，就考虑使用`else if`或拥有代码。`return true`**

# google-chrome - CSS3 兼容性问题

> ID：15836815
> 
> 赞同：0
> 
> 时间：2013-04-05T14:41:34.157
> 
> 标签：google-chrome, css, animation, webkit, mozilla

尽管在 Chrome 中，我的 CSS3 动画在 Firefox 和 Safari 中不起作用。我正在使用此代码执行动画：

```
html {
    background:#262930 url('./images/pw_maze_black.png') no-repeat left top fixed;
    background-size:cover;

    animation:slides 60s; 
    animation-iteration-count: infinite;
    -moz-animation:slides 60s; 
    -moz-animation-iteration-count: infinite;
    -webkit-animation:slides 60s; 
    -webkit-animation-iteration-count: infinite;
    } 
```

这是动画本身（对于每个浏览器）：

```
@keyframes slides
{
0%   {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
6%   {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
12%  {background:url('./images/addix/slide_bg/2.jpg') no-repeat top center;}
18%  {background:url('./images/addix/slide_bg/2.jpg') no-repeat top center;}
25%  {background:url('./images/addix/slide_bg/3.jpg') no-repeat top center;}
31%  {background:url('./images/addix/slide_bg/3.jpg') no-repeat top center;}
37%  {background:url('./images/addix/slide_bg/4.jpg') no-repeat top center;}
43%  {background:url('./images/addix/slide_bg/4.jpg') no-repeat top center;}
50%  {background:url('./images/addix/slide_bg/5.jpg') no-repeat top center;}
56%  {background:url('./images/addix/slide_bg/5.jpg') no-repeat top center;}
62%  {background:url('./images/addix/slide_bg/6.jpg') no-repeat top center;}
68%  {background:url('./images/addix/slide_bg/6.jpg') no-repeat top center;}
75%  {background:url('./images/addix/slide_bg/7.jpg') no-repeat top center;}
81%  {background:url('./images/addix/slide_bg/7.jpg') no-repeat top center;}
87%  {background:url('./images/addix/slide_bg/8.jpg') no-repeat top center;}
93%  {background:url('./images/addix/slide_bg/8.jpg') no-repeat top center;}
100% {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
}
@-moz-keyframes slides /* Firefox */
{
0%   {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
6%   {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
12%  {background:url('./images/addix/slide_bg/2.jpg') no-repeat top center;}
18%  {background:url('./images/addix/slide_bg/2.jpg') no-repeat top center;}
25%  {background:url('./images/addix/slide_bg/3.jpg') no-repeat top center;}
31%  {background:url('./images/addix/slide_bg/3.jpg') no-repeat top center;}
37%  {background:url('./images/addix/slide_bg/4.jpg') no-repeat top center;}
43%  {background:url('./images/addix/slide_bg/4.jpg') no-repeat top center;}
50%  {background:url('./images/addix/slide_bg/5.jpg') no-repeat top center;}
56%  {background:url('./images/addix/slide_bg/5.jpg') no-repeat top center;}
62%  {background:url('./images/addix/slide_bg/6.jpg') no-repeat top center;}
68%  {background:url('./images/addix/slide_bg/6.jpg') no-repeat top center;}
75%  {background:url('./images/addix/slide_bg/7.jpg') no-repeat top center;}
81%  {background:url('./images/addix/slide_bg/7.jpg') no-repeat top center;}
87%  {background:url('./images/addix/slide_bg/8.jpg') no-repeat top center;}
93%  {background:url('./images/addix/slide_bg/8.jpg') no-repeat top center;}
100% {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
}
@-webkit-keyframes slides /* Safari and Chrome */
{
0%   {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
6%   {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
12%  {background:url('./images/addix/slide_bg/2.jpg') no-repeat top center;}
18%  {background:url('./images/addix/slide_bg/2.jpg') no-repeat top center;}
25%  {background:url('./images/addix/slide_bg/3.jpg') no-repeat top center;}
31%  {background:url('./images/addix/slide_bg/3.jpg') no-repeat top center;}
37%  {background:url('./images/addix/slide_bg/4.jpg') no-repeat top center;}
43%  {background:url('./images/addix/slide_bg/4.jpg') no-repeat top center;}
50%  {background:url('./images/addix/slide_bg/5.jpg') no-repeat top center;}
56%  {background:url('./images/addix/slide_bg/5.jpg') no-repeat top center;}
62%  {background:url('./images/addix/slide_bg/6.jpg') no-repeat top center;}
68%  {background:url('./images/addix/slide_bg/6.jpg') no-repeat top center;}
75%  {background:url('./images/addix/slide_bg/7.jpg') no-repeat top center;}
81%  {background:url('./images/addix/slide_bg/7.jpg') no-repeat top center;}
87%  {background:url('./images/addix/slide_bg/8.jpg') no-repeat top center;}
93%  {background:url('./images/addix/slide_bg/8.jpg') no-repeat top center;}
100% {background:url('./images/addix/slide_bg/1.jpg') no-repeat top center;}
} 
```

是我的错还是 Firefox 和 Safari 的错？

编辑：链接到小提琴[http://jsfiddle.net/AF4Ce/1/](http://jsfiddle.net/AF4Ce/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:54:57.070

它可能无法在 Firefox 中运行的一个原因是带有前缀的动画的顺序。始终将无前缀版本放在最后，这将允许浏览器始终尝试最后实现该版本。这很好，因为有时前缀版本仍然可以链接一些行为，即使浏览器已经开始使用无前缀版本。

但这更像是一个建议而不是一个答案，因为我不知道它是否会解决它。您可能希望将您的代码（连同图像）放入 JSFiddle 中，以便其他人可以准确地看到您正在尝试做什么。

# kinect - Kinect 手势

> ID：15836818
> 
> 赞同：1
> 
> 时间：2013-04-05T14:41:49.253
> 
> 标签：kinect, gesture

我一直在使用 Kinect 手势，到目前为止，可用于创建手势的工具仅限于跟踪整个身体运动，例如向左和向右滑动手臂。原始 Kinect SDK 中可用的关节类型涉及肘部、手腕、手、肩膀等，但不包括食指、拇指和中指等次要细节。我之所以提到这一点，是因为我正在尝试创建仅涉及手部动作的手势（例如胜利手势，拇指向上/向下）。有人可以指导我吗？有没有写手部动作代码的博客或网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:06:28.913

一年前我一直在用 Kinect 开发应用程序，然后很难或几乎不可能做到这一点。现在谷歌向我展示了这样的项目[，](http://channel9.msdn.com/coding4fun/kinect/Finger-Tracking-with-Kinect-SDK-and-the-Kinect-for-XBox-360-Device)一定要看看。如果你一般想专注于手势，我真的建议你使用 [LEAP Motion](https://www.leapmotion.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T10:25:07.397

我在[SigmaRD](http://www.sigmard.com/)的朋友开发了一种叫做[SigmaNIL 框架](http://www.sigmanil.com/)的东西。您可以[从 OpenNI 网站获得它](http://www.openni.org/files/sigmanil-framework/#.UYzI_7X-HXI)。

它提供了“HandSegmentation”、“HandSkeleton”、“HandShape”和“HandGesture”模块，可以满足您的需求。

还可以查看其余的[OpenNI 中间件和库](http://www.openni.org/software/?cat_slug=file-cat1#.UYzKZLX-HXL)，您可以从他们的网站下载它们。其中一些还可以与 Microsoft SDK 一起使用。

# php - 在for循环中打印

> ID：15836819
> 
> 赞同：0
> 
> 时间：2013-04-05T14:41:52.530
> 
> 标签：php, for-loop, echo

是否可以在 for 循环运行时在 PHP 中打印文本？我的意思是通常它会运行整个循环直到结束，然后您可以看到所有文本。但是每次当回声出现在 for 循环中时，我都需要文本，而不是在整个循环之后。有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:44:31.073

> **[void flush (void)](http://www.php.net/manual/en/function.flush.php)**
> 刷新 PHP 的写入缓冲区以及 PHP 正在使用的任何后端（CGI、Web 服务器等）。这试图将当前输出一直推送到浏览器，但有一些警告。[（更多的）](http://www.php.net/manual/en/function.flush.php)

有很多警告。如果遇到任何问题，请务必阅读链接页面和评论部分。例如：

> *   某些版本的 Microsoft Internet Explorer 仅在收到 256 字节的输出后才开始显示页面，因此您可能需要在刷新之前发送额外的空格以使这些浏览器显示页面。
>     
>     
> *   请记住，在增量渲染开始之前，Internet Explorer 和 Safari 有一个 1k 的缓冲区，因此您还需要输出一些填充。

# javascript - 将属性添加到 KineticJS 对象

> ID：15836820
> 
> 赞同：1
> 
> 时间：2013-04-05T14:41:55.683
> 
> 标签：javascript, object, line, connect, kineticjs

我想知道，我怎样才能将 peoperties 添加到一些 KineticJS 对象。例如 - 我创建了两个矩形并用一条线连接它们。我需要对象“线”知道这两个矩形。

我可以创建一个具有属性 object1、object2 和 line (Kinetic.Line) 的类 Connector。但是我只能将这条线添加到画布中，这样如果我试图从画布中获取线，我就会丢失对连接器对象的引用 - 例如在单击它之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:02:18.843

如果我正确理解你的问题，它相当简单

```
var rect1 = new Kinetic.Rect({...});
var rect2 = new Kinetic.Rect({...});
var line = new Kinetic.Line({...});
line.r1 = rect1;
line.r2 = rect2; 
```

现在您可以使用 line.r1 和 line.r2 简单地访问 2 个矩形

# php - 取消设置会话 php

> ID：15836824
> 
> 赞同：1
> 
> 时间：2013-04-05T14:42:03.797
> 
> 标签：php

根据手册“不要使用 unset($_SESSION) 取消设置整个 $_SESSION，因为这将**禁用**通过 $_SESSION 超全局注册会话变量。”

```
<?php
session_start();

$_SESSION['name'] = 'my_name';

unset($_SESSION);

echo $_SESSION['test'] = 'ok'; 
```

所以根据手册，上面的代码不应该注册最后一条语句。但是代码输出字符串'ok'。这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:50:17.853

它不会禁用会话。它只是禁用 session_register 的使用。这没什么大不了的，因为 session_register 已经被弃用了很长时间：

例如使用此代码：

```
<?php

$foo = 'bar';
session_register('foo');
print_r($_SESSION);
unset($_SESSION);
session_register('foo', 'bar2');
print_r($_SESSION);               // line 8
$_SESSION['foo'] = 'bar3';
print_r($_SESSION); 
```

你得到

```
Array
(
    [foo] =>
)
PHP Notice:  Undefined variable: _SESSION in /home/marc/z.php on line 8
Array
(
    [foo] => bar3
) 
```

注意警告。您已取消设置 $_SESSION，然后尝试 session_register... 但这不会创建新的 $_SESSION，它只是失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:47:57.667

这是一个更好的测试用例：

```
session_start();
$_SESSION['test'] = 'value';
unset($_SESSION);
var_dump($_SESSION); 
```

但是，此代码将输出“某物”，因为您在回显之前分配了它。

```
echo $_SESSION['something'] = 'something'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:48:21.013

我相信这意味着`$_SESSION['test']`不会再自动保存在会话中。如果您`$_SESSION['name']`在另一页上打印，它应该是`myname`，但`$_SESSION['test']`应该是空的。

# gstreamer - Graphviz 子图看起来像记录形状的节点

> ID：15836829
> 
> 赞同：4
> 
> 时间：2013-04-05T14:42:16.033
> 
> 标签：gstreamer, graphviz, dot, subgraph

我正在尝试为有许多嵌套箱的 GStreamer 应用程序生成图表。每个 bin 都有一些元素，但父 bin 的 bin 看起来像任何其他具有 pad（接收器和源）的常见元素。我想可视化它，但在 Graphviz 中我无法生成嵌套节点，所以我必须通过子图来完成。不幸的是，子图没有像记录形状这样的节点选项。在我的图中，每个节点都有记录形状，但子图不能。例子：

```
digraph G
{
    graph [rankdir = TD]
    node [shape = record]

    subgraph cluster_player
    {
        label = "player"        

        subgraph cluster_bin1
        {
            label = "bin1"

            bin1_sink1 [label = "sink1"]
            bin1_sink2 [label = "sink2"]
            obj1 [
                label = "{ { <sink1> sink1 | <sink2> sink2 } | obj1 | { <src1> src1 | <src2> src2 } }"
            ]           
            bin1_src1 [label = "src1"]
            bin1_src2 [label = "src2"]

            bin1_sink1:s -> obj1:sink1:n []
            bin1_sink2:s -> obj1:sink2:n []
            obj1:src1:s -> bin1_src1:n []
            obj1:src2:s -> bin1_src2:n []
        }

        bin1_src1:s -> bin2_sink1:n []
        bin1_src2:s -> bin2_sink2:n []

        subgraph cluster_bin2
        {
            label = "bin2"

            bin2_sink1 [label = "sink1"]
            bin2_sink2 [label = "sink2"]            
            bin2_obj1 [
                label = "{ { <sink1> sink1 | <sink2> sink2 } | obj1 | { <src1> src1 } }"
            ]       
            bin2_obj2 [
                label = "{ { <sink1> sink1 } | obj2 | { <src1> src1 } }"
            ]       
            bin2_src1 [label = "src1"]

            bin2_sink1:s -> bin2_obj1:sink1:n []
            bin2_sink2:s -> bin2_obj1:sink2:n []
            bin2_obj1:src1:s -> bin2_obj2:sink1:n []
            bin2_obj2:src1:s -> bin2_src1:n []
        }
    }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/19FCd.png)

正如您现在可以看到的，垃圾箱中的源和接收器就像普通元素一样，但我希望它们看起来像“obj1”中的记录。怎么做？如果不可能，也许还有其他语言具有该功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:05:06.047

Graphviz 子图是容器。它们不支持您正在寻找的记录符号或形状属性。[形状](http://www.graphviz.org/doc/info/attrs.html)仅限于节点，而子图则不是。

# deployment - Jenkins CI - 从弗吉尼亚州部署到亚太地区的 EC2 实例

> ID：15836834
> 
> 赞同：1
> 
> 时间：2013-04-05T14:42:25.687
> 
> 标签：deployment, amazon-web-services, amazon-ec2, jenkins, regions

我在 NA Virginia 有 Jenkins 构建服务器。我所有的开发服务器都在北美。我们在亚太地区新加坡推出了新的开发服务器。我已经设置 Jenkins 使用 SSH 插件通过 SSH 在新加坡部署工件。此部署比预期更耗时。有没有更好的方法在不同的 AWS 区域部署代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:50:24.727

您可以在 APAC 区域中放置一个 Jenkins 构建从属并在该从属上运行您的部署作业，以便您部署的工件在构建后立即在 APAC 中。请注意，当日志和任何存档的工件从从属复制到主控时，在构建结束时您仍然会遇到一些延迟，但这至少不会延迟您的部署。

有关设置 Jenkins 从站的详细信息， 请参阅[https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds 。](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)

# vb.net - VB.NET - 如何将文件从 Outlook 2010 拖到我的表单中？

> ID：15836837
> 
> 赞同：0
> 
> 时间：2013-04-05T14:42:36.957
> 
> 标签：vb.net, drag-and-drop, outlook-2010

我正在开发一个应用程序来读取 XML 文件、获取其数据并填充一些字段。所以，我实现了两种获取文件的方法：通过命令按钮和拖放表单事件。如果我使用存储在计算机文件夹中的文件，一切正常。我可以拖动文件，光标将其外观更改为复制效果等。但是，当我尝试将文件作为 Outlook 的附件拖动时（我的版本是 2010），我看到光标呈现禁止效果并且该文件未被读取。

请看下面我所做的实现，它仅适用于存储在我计算机文件夹中的文件。我想知道我还需要实现什么才能允许从 Outlook 中拖动文件。

先感谢您。

```
 Private Sub FrmJIG_DragDrop(sender As Object, e As DragEventArgs) _
    Handles Me.DragDrop
    Dim files() As String = e.Data.GetData(DataFormats.FileDrop)
    Dim filestype() As String

    filestype = e.Data.GetData(DataFormats.FileDrop)
    Dim sReader As New StreamReader(filestype(0))

    'get the filename from the file without the path
    Dim file_name As String = Path.GetFileName(filestype(0))

    'check the extension of the file
    If Path.GetExtension(filestype(0)).ToLower() = ".xml" Then
        'Read the xml file
        For Each path In files
            ReadXMLFile(path)
        Next
    Else

        'warning about the file type
        MessageBox.Show("Only XML files are supported!", "Warning!", _
MessageBoxButtons.OK, _
    MessageBoxIcon.Warning)
    End If
End Sub

Private Sub FrmJIG_DragEnter(sender As Object, e As DragEventArgs) _
Handles Me.DragEnter

    'change the cursor  type to drag and drop type
    If e.Data.GetDataPresent(DataFormats.FileDrop) Then
        e.Effect = DragDropEffects.Copy
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:34:44.537

请尝试

```
Private Sub FrmJIG_DragEnter(sender As Object, e As DragEventArgs) _
Handles Me.DragEnter

    'change the cursor  type to drag and drop type
    If e.Data.GetDataPresent(DataFormats.FileDrop) or e.Data.GetDataPresent("FileGroupDescriptor") Then
        e.Effect = DragDropEffects.Copy
    End If
End Sub 
```

# python - Python 中的 if-else 填充字段错误 (arcpy)

> ID：15836839
> 
> 赞同：0
> 
> 时间：2013-04-05T14:42:42.537
> 
> 标签：python, if-statement, arcgis, arcpy

我正在尝试学习 python 并为 ArcGIS 10.1 编写 arcpy 脚本。

目标是检查各种字段的 -99 值，该值指定 NULL，然后用 0 值填充新添加的字段。代码运行......但是它用 6 值填充所有值。6 是问题的一部分，另一部分是我检查过的，表中应该只有 3 (-99) 个值。

下面是代码：

```
# Import arcpy module
import arcpy

print "start your engines"
# Script arguments
Shapefile = "C:\\gislab2\\Python\\take_home\\USCancer2000.shp"
#this is where the arcpy.userargument part goes, get from re-exporting model.
Field_Name = "Henry1"

Output_Feature_Class = "C:\\gislab2\\Python\\take_home\\USCancer2000.shp"

# Local variables:
USCancer2000__2_ = Output_Feature_Class

# Process: Add Field
arcpy.AddField_management(Shapefile, "Henry1", "LONG", "", "", "", "", "NULLABLE", "NON_REQUIRED", "")

# Process: Calculate Field
arcpy.CalculateField_management(Output_Feature_Class, "Henry1", "5.5", "PYTHON_9.3", "")
##
### Process: If-then check for missing values
##
if "Cnt1"==-99:
    Field_name=0
elif "Cnt2"==-99:
    Field_name=0
elif "Cnt3"==-99:
    Field_name=0
elif "Pop1"==-99:
    Field_name==0
elif "Pop2"==-99:
    Field_name=0
elif "Pop3"==-99:
    Field_name=0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T02:08:24.183

Gabriel 的评论是有效的，但主要问题是您没有遍历要素类中的行 - 您不能只`if "Cnt1" == -99`期望 Python 知道它应该查看`Cnt1`要素类的每一行中的字段。

在这种情况下，您需要一个[Update cursor](http://resources.arcgis.com/en/help/main/10.1/index.html#//018v00000064000000)，它将依次查看要素类的每一行，并允许您更新字段值。这样的事情应该让你感动：

```
fields = ['Cnt1','Cnt2','Cnt3','Pop1','Pop2','Pop3']

cursor = arcpy.UpdateCursor(Output_Feature_Class)
for row in cursor:
    for field in fields:
        if row.getValue(field) == -99:
            row.setValue(Field_Name, 0)
    cursor.updateRow(row) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T14:52:17.110

您正在与代码中的常量进行比较。

是“Cnt1”==-99 ??

那永远不会是真的。

我不知道 Arcpy，但如果你想从它的函数中解析一些结果，你应该得到一些返回值或检查调用后作为参数传递的变量。

# mysql - Mysql数据库使其变得灵活

> ID：15836840
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:42:47.440
> 
> 标签：mysql, database-design, create-table

我对数据库等相当陌生......我需要使用 MySql 构建一个数据库......这将是灵活的......即：我需要一个基本数据库......但取决于它需要的用户灵活地处理输入的不同类型的信息......所以一个用户可能只为一份小报告输入数据，而另一个用户可能需要输入更多数据，因为报告需要更详细......我遇到的问题是，没有两个报告是相同的，并且几乎不可能先发制人。任何想法任何人？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:48:28.690

您可以创建用户表、报告表、数据表和报告数据表。

它看起来像这样：

```
 _______
|users  |
|-------|
|user_id|
---------

 _________
|reports  |
|-------  |
|report_id|
|user_id  |
 ----------

_______
|data   |
|-------|
|data_id|
---------

________________
|reports_data   |
|-------        |
|reports_data_id|
|report_id      |
|data_id        |
|user_id        |
----------------- 
```

然后用户为报表创建的每条数据都存储在数据表中，然后将report_id 和所有data_id 存储在reports_data 表中。

# android - Android：在 DatePickerDialog / TimePickerDialog 中更改按钮文本

> ID：15836848
> 
> 赞同：5
> 
> 时间：2013-04-05T14:42:59.127
> 
> 标签：android, dialog, datetimepicker, timepicker, datepickerdialog

我有一个 DatePickerDialog。在默认配置中它工作正常。

```
DatePickerDialog dialog = new DatePickerDialog(
    view.getContext(),
    new OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker picker, int year, int monthOfYear, int dayOfMonth) {
            // do something
        }
    },
    startDate.getYear(),
    startDate.getMonth() - 1,
    startDate.getDay()
); 
```

![在此处输入图像描述](https://i.stack.imgur.com/Sx4s5.png)

现在我想更改按钮的文本。我尝试使用以下代码：

```
dialog.setButton(DatePickerDialog.BUTTON_POSITIVE, "New Label", new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        // do something
    }
}); 
```

现在我的问题是从 datepicker 控件中获取日期。单击按钮不会调用 DateSetListener。如何通过 DateSetListener 获取日期？获取日期的另一种可能性是关于

```
public void onClick(DialogInterface dialog, int which) {
    int year = ((DatePickerDialog) dialog).getDatePicker().getYear();
    int month = ((DatePickerDialog) dialog).getDatePicker().getMonth();
    int day = ((DatePickerDialog) dialog).getDatePicker().getDayOfMonth();
} 
```

但这似乎是一种不必要的复杂方式。

对于 TimePickerDialog，这种替代方式将不起作用，因为我找不到获取 timepicker 控件的方法。因此我需要使用 TimeSetListener 但我找不到可能性（比如日期选择器）。

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-16T09:40:06.517

我认为这将适用于 DatePicker，它适用于 TimePicker：

听者：

```
TimePickerDialog.OnTimeSetListener mTimeSetListenerIni =
                new TimePickerDialog.OnTimeSetListener() {
                    @Override
                    public void onTimeSet(android.widget.TimePicker view,
                            int hourOfDay, int minute) {
                        Log.i("","Initial: "+hourOfDay+":"+minute);
                    }
                };

TimePickerDialog yourFragment = new TimePickerDialog(this, mTimeSetListenerIni, hour, minute, true);
yourFragment.setButton(DialogInterface.BUTTON_POSITIVE, "OK", yourFragment);
yourFragment.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", yourFragment); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-10T16:04:50.133

创建 DatePickerDialog 后，调用此行

```
datePickerDialog.setButton(DialogInterface.BUTTON_POSITIVE, "Your custom text", datePickerDialog); 
```

注意：只使用它的对话框而不使用新的点击监听器。

# mysql - 用下划线 MySQL 替换列名中的空格

> ID：15836854
> 
> 赞同：0
> 
> 时间：2013-04-05T14:43:16.067
> 
> 标签：mysql

我继承了一个 MySQL 数据库，该数据库包含许多表中的许多列，这些表的名称中有空格。我被要求将列名中的所有空格更改为下划线。有没有办法用脚本做到这一点？

我认为我可以通过 information_schema 中的 SELECT 将它们全部列出。但我不确定如何进行替换。

我的逻辑是，如果列名包含空格，请将其替换为下划线。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:24:21.553

如果您有特权，您将执行以下操作：

```
UPDATE COLUMNS SET COLUMN_NAME = REPLACE(COLUMN_NAME, ' ', '_') 
```

但最有可能的是，您不能更改架构。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T15:31:30.680

```
update information_schema.TABLES a
        join
    information_schema.COLUMNS b ON a.TABLE_Schema = b.TABLE_SCHEMA 
set 
    b.COLUMN_NAME = REPLACE(b.COLUMN_NAME, ' ', '_')
where
    a.TABLE_SCHEMA = 'YOURDBNAME'; 
```

如果您拥有 information_schema 数据库的权限，Raheel Hasan 的答案应该是正确的。

# javascript - 内容未使用 jQuery mobile 动态加载到 DIV

> ID：15836856
> 
> 赞同：3
> 
> 时间：2013-04-05T14:43:18.193
> 
> 标签：javascript, css, jquery-mobile, jquery

这个[例子](http://jsfiddle.net/gCsDz/6/)并没有确切地显示问题，只是为了有一个想法。比如我点击第2页时，div中没有​​加载内容，我必须刷新页面才能看到第2页的内容。

PS：相同的代码在其他页面中重复。

代码 ：

```
$(document).ready(function() {
    $('.content-primary').html("Content of page 1"); // This line just in this example
    //$(".content-primary").load("content-of-page.php"); // but I used this code on all my pages 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:47:16.430

这是一个常见的 jQuery Mobile 问题。

您不应该使用 jQM 准备好的文档，而是 jQM 提供页面事件。您的问题是文档准备好谁可以，并且通常在页面加载到 DOM 之前触发。这就是为什么刷新有帮助，此时页面已经加载。

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/8hKe2/](http://jsfiddle.net/Gajotres/8hKe2/)

```
$(document).on('pagebeforeshow', '#foo', function(){       
    alert('This is foo');
});

$(document).on('pagebeforeshow', '#bar', function(){       
    alert('This is bar');
}); 
```

基本上每个页面事件都会触发仅适用于该页面的 javascript 代码。如果您希望代码只执行一次，则应使用 pageinit 事件而不是 pagebeforeshow，如下所示：

```
$(document).on('pageinit', '#foo', function(){       
    alert('This is foo');
});

$(document).on('pageinit', '#bar', function(){       
    alert('This is bar');
}); 
```

如果您想了解更多信息，请查看我的其他文章/答案：[https ://stackoverflow.com/a/14469041/1848600](https://stackoverflow.com/a/14469041/1848600)

# vb.net - 是否可以通过匿名代理使用 UdpClient？

> ID：15836860
> 
> 赞同：2
> 
> 时间：2013-04-05T14:43:27.520
> 
> 标签：vb.net, udp, proxies

我正在向 UDP 主机发送一个大端字节数组，一切正常，但我需要将代理合并到混合中。

从我发现（或尚未发现）的情况来看，没有直接的方法可以将匿名代理（甚至 Socks4/5）与 UdpClient 一起使用。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T18:55:57.970

您应该使用[`System.Net.HttpWebRequest.Proxy`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)代理。查看 MSDN 代码片段链接以获取更多信息。我有一个类似的问题，这有帮助。

# sql-server - SQL Server 中计算列的最佳实践

> ID：15836861
> 
> 赞同：12
> 
> 时间：2013-04-05T14:43:30.913
> 
> 标签：sql-server, sql-server-2012, calculated-columns

我正在使用用户表并希望设置“试用期结束日期”。基本上，作为试用期的一部分，每个新用户从加入之日起有 2 个月的完整时间。我看到我可以在我的用户表的列中放置一个公式，但我想知道我是否应该有一个脚本来更新它，或者这是否是使用计算列的可接受时间。我访问此表以获取各种信息，并且偶尔会根据性能里程碑成就更新用户行。申请日期永远不会改变/更新。

我的问题是：在这种情况下使用计算列是一种好习惯，还是会在每次更新该行时重新计算（即使我不打算更新应用日期）？我不想在将来更新行时产生更多开销。

我在试用结束日期的列定义中使用的公式：

```
(dateadd(day,(-1),dateadd(month,(3),dateadd(day,(1)-datepart(day,[APP_DT]),[APP_DT])))) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T14:46:57.410

看到这个日期很可能一旦设置就永远不会改变，它可能不是计算列的好候选。

毕竟：一旦您在该表中插入一行，您就可以轻松地计算“试用期结束”日期，然后（例如在触发器中），并且一旦设置，该日期将永远不会改变。

因此，虽然您绝对可以这样做，但我可能更喜欢使用`AFTER INSERT`触发器（或操作的存储过程`INSERT`），它只计算一次，然后存储该日期。

此外，作为提醒：每次都在计算仅包含公式的计算列以访问它 - 请注意这一点。也就是说，除非您指定`PERSISTED`关键字，否则在这种情况下，结果将与行中的其他数据一起存储，这将更适合这里 - 同样，因为该值一旦计算就不会改变以后再。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-05T14:51:34.773

如果您想稍后延长某人的试用期而不必更改他们的申请日期，那么计算列不是要走的路。为什么不对两列都使用`DEFAULT`约束？

```
USE tempdb;
GO

CREATE TABLE dbo.foo
(
  MemberID INT IDENTITY(1,1),
  JoinDate DATE NOT NULL DEFAULT SYSDATETIME(),
  ProbationEndDate NOT NULL DEFAULT 
    DATEADD(DAY, -1, DATEADD(MONTH, DATEDIFF(MONTH,0,SYSDATETIME())+3, 0))
);

INSERT dbo.foo DEFAULT VALUES;

SELECT MemberID, JoinDate, ProbationEndDate FROM dbo.foo; 
```

结果：

```
MemberID    JoinDate      ProbationEndDate
--------    ----------    ----------------
1           2013-04-05    2013-06-30 
```

（请注意，我使用了一种稍微不那么令人费解的方法来获得两个月的月底。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:47:12.443

插入数据时没有开销；只有当您读取该列时，才会为该列计算值。所以我想说你的方法是正确的。

# javascript - Javascript日历跳过日期

> ID：15836863
> 
> 赞同：0
> 
> 时间：2013-04-05T14:43:35.463
> 
> 标签：javascript, internet-explorer, internet-explorer-10

除了IE10之外，所有其他浏览器似乎在所有其他浏览器中都可以正常运行，在选择一个月/年时，它将每月随机跳过。

每次更改日期时都会引发错误，但似乎此错误并不总是会导致问题

`Unable to get property 'length' of undefined or null reference`

正在使用的代码片段：

```
var vals;

if (typeof(targetedControl.Validators) != "undefined") {
    vals = targetedControl.Validators;
}
else {
    if (targetedControl.tagName.toLowerCase() == "label") {
        targetedControl = document.getElementById(targetedControl.htmlFor);
        vals = targetedControl.Validators;
    }
}

var i;

for (i = 0; i < vals.length; i++) {
    ValidatorValidate(vals[i], null, event);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T14:52:16.023

似乎 vals 为空/可能找不到targetedControl ...这应该让您知道：

```
if(!targetedControl || !vals)
{
    alert('Control Not Found!');
}
else
{
    for (i = 0; i < vals.length; i++) {
        ValidatorValidate(vals[i], null, event);
    }
} 
```

# android - Facebook / keytool 需要澄清

> ID：15836864
> 
> 赞同：0
> 
> 时间：2013-04-05T14:43:42.790
> 
> 标签：android, facebook

我正在尝试让 facebook 集成与我的一个应用程序一起工作。我刚刚阅读了[此处](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)的文档，其中说：

“首先，要在本地计算机上生成密钥哈希，请针对 Android 调试密钥库运行 Java 的 keytool 实用程序（它应该在控制台的路径上）。”

这让我很困惑，这是否意味着我的应用程序（+facebook 集成）只能在我的“本地计算机”上运行 - 即在我的 PC 上运行的模拟器？.. 如果是这样，是否有某种方法可以获得我的安卓手机（通过 USB 连接到我的电脑）对应的“密钥哈希”？因为我更愿意在手机上测试我的应用程序而不是模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:01:27.130

When you create an Android application that will be uploaded to the Google Play store, you generate a unique identifier that will allow Google, as well as every phone that installs your app, to know that you developed it. It is like your own secret password that you shouldn't share with anyone. If a malicious developer creates an "update" to your app, and somehow were to distribute it as such to users, any user that tried to install it would receive an error message because the malicious fake upgrade would not have been created with your private keystore. When you release your app, you'll have to make this keystore, as well as use it to generate a Facebook key hash, which is what they are referring to here.

However, when you are developing and not ready to release to the world, by default Eclipse will build your application using the default "debug" keystore. The instructions that you are referring to tell you how to generate the Facebook hash with your debug keystore. Once you do that, whenever you build your app with the debug keystore and run it, Facebook will allow it to connect using the SDK, as long as you have pasted that key hash into the Facebook developer console. It does not matter whether you are running the app on your computer or phone, it will run and connect with Facebook integration.

When you are ready to release, you'll have to generate a brand new keystore, run the tool again on that file, and upload that key hash to Facebook as before. Then, your app can run on anyone's phone and be able to connect to Facebook, provided you build it with the new keystore.

# c - 字符数组到浮点数的转换

> ID：15836866
> 
> 赞同：3
> 
> 时间：2013-04-05T14:43:46.323
> 
> 标签：c, unix, type-conversion

我正在尝试将下面代码的输出缓冲区（字符数组）转换为浮点格式以进行进一步计算。谁能告诉我该怎么做。

```
#include "usbtmc.h"
#include <errno.h>
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
#include <getopt.h>
#include <inttypes.h>
#include <sys/types.h>
#include <pthread.h>

int main() 
{

    int myfile;
    char buffer[4000];

    int actual;

    myfile=open("/dev/usbtmc1",O_RDWR);
    if(myfile>0)
    {
        system("echo MEAS:VOLT:AC?>/dev/usbtmc1");
        actual=read(myfile,buffer,4000);

        buffer[actual] = 0;
        printf("Response = \n %s\n",buffer);

        close(myfile);
    }

    return 0;
} 
```

此代码的示例输出是

**响应 = +1.29273072E-04**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T15:01:31.970

你可能有两种方法：

1.  使用[双`atof`(const char* str)](http://www.cplusplus.com/reference/cstdlib/atof/)

    ```
    float f;
    f = (float)atof(buffer);
    printf("%f",f); // here you can use f 
    ```

2.  使用[int `sscanf`( const char * s, const char * 格式, ...)](http://www.cplusplus.com/reference/cstdio/sscanf/?kw=sscanf)

    ```
    float f;
    sscanf(buffer,"%f",&f);
    printf("%f",f); // here you can use f 
    ```

# php - Symfony2 从树枝扩展服务访问用户

> ID：15836871
> 
> 赞同：6
> 
> 时间：2013-04-05T14:44:09.837
> 
> 标签：php, symfony, twig

当我在我的 symfony2 服务（树枝扩展）中注入 security.context 时，会出现以下错误：

> 在非对象上调用成员函数 getUser() .....

```
class GeninnoShareboardExtension extends \Twig_Extension {
    public function __construct(ContainerInterface $container, SecurityContext $context) {
        $this->doctrine = $container->get('doctrine');
        $this->context = $context;
    }

    public function getUser() {
        return $this->context->getToken()->getUser();
    }

    ........
} 
```

我的 services.yml 看起来像这样：

```
services:
  geninno.twig.extension.dashboard:
    class: Geninno\EDSBundle\Twig\Extension\GeninnoShareboardExtension
    arguments:
      container: "@service_container"
      service: "@security.context"
    tags:
     - { name: twig.extension } 
```

用户已登录，我的防火墙设置如下：

```
access_control:
    - { path: ^/secured/register, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/secured/create, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/secured/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: [IS_AUTHENTICATED_FULLY, IS_AUTHENTICATED_REMEMBERED] } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:02:11.130

你应该试试

```
services:
  geninno.twig.extension.dashboard:
    class: Geninno\EDSBundle\Twig\Extension\GeninnoShareboardExtension
    arguments: [@service_container, @security.context]
    tags:
     - { name: twig.extension } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:19:36.403

您收到错误的页面是否在防火墙后面？如果没有，那么它将无法访问安全令牌。您需要将页面置于防火墙后面，然后向未经身份验证的用户开放。

像这样的东西应该可以向未经身份验证的用户打开页面，但仍将其放在防火墙内（security.yml）

```
access_control:
  - { path: /lost_password, roles: IS_AUTHENTICATED_ANONYMOUSLY} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T11:39:46.217

我通过在我的 SecurityContext 调用中添加一个 if 来解决它。检查 GetToken() 是否返回对象（已验证）或字符串（匿名）

```
if (is_object($this->context->getToken()))
{
    .... // getUser() etc.
} 
```

# php - symfony2 - 从数据库中添加选择

> ID：15836875
> 
> 赞同：8
> 
> 时间：2013-04-05T14:44:16.900
> 
> 标签：php, forms, symfony, drop-down-menu, populate

我希望用自定义查询中的值填充 symfony2 中的选择框。我试图尽可能地简化。

**控制器**

```
class PageController extends Controller
{

    public function indexAction()
    {
      $fields = $this->get('fields');
      $countries =  $fields->getCountries(); // returns a array of countries e.g. array('UK', 'France', 'etc')
      $routeSetup = new RouteSetup(); // this is the entity
      $routeSetup->setCountries($countries); // sets the array of countries

      $chooseRouteForm = $this->createForm(new ChooseRouteForm(), $routeSetup);

      return $this->render('ExampleBundle:Page:index.html.twig', array(
        'form' => $chooseRouteForm->createView()
      ));

    }
} 
```

**选择路线表格**

```
class ChooseRouteForm extends AbstractType
{

  public function buildForm(FormBuilderInterface $builder, array $options)
  {

    // errors... ideally I want this to fetch the items from the $routeSetup object 
    $builder->add('countries', 'choice', array(
      'choices' => $this->routeSetup->getCountries()
    ));

  }

  public function getName()
  {
    return 'choose_route';
  }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T15:08:41.243

您可以使用..将选择传递给您的表单

```
$chooseRouteForm = $this->createForm(new ChooseRouteForm($routeSetup), $routeSetup); 
```

然后以你的形式..

```
private $countries;

public function __construct(RouteSetup $routeSetup)
{
    $this->countries = $routeSetup->getCountries();
}

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('countries', 'choice', array(
        'choices' => $this->countries,
    ));
} 
```

**更新（和改进）2.8+**

首先，您实际上不需要将国家/地区作为路线对象的一部分传递，除非它们将存储在数据库中。

如果将可用国家/地区存储在数据库中，则可以使用事件侦听器。如果没有（或者如果您不想使用侦听器），您可以在选项区域中添加国家/地区。

***使用选项***

在控制器..

```
$chooseRouteForm = $this->createForm(
    ChooseRouteForm::class,
    // Or the full class name if using < php 5.5
    $routeSetup,
    array('countries' => $fields->getCountries())
); 
```

并以你的形式..

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('countries', 'choice', array(
        'choices' => $options['countries'],
    ));
}

public function configureOptions(OptionsResolver $resolver)
{
    $resolver
        ->setDefault('countries', null)
        ->setRequired('countries')
        ->setAllowedTypes('countries', array('array'))
    ;
} 
```

***使用监听器***（如果国家/地区数组在模型中可用）

在控制器..

```
$chooseRouteForm = $this->createForm(
    ChooseRouteForm::class,
    // Or the full class name if using < php 5.5
    $routeSetup
); 
```

并以你的形式..

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->addEventListener(FormEvents::PRE_SET_DATA, function(FormEvent $event) {
            $form = $event->getForm();
            /** @var RouteSetup $routeSetup */
            $routeSetup = $event->getData();

            if (null === $routeSetup) {
                throw new \Exception('RouteSetup must be injected into form');
            }

            $form
                ->add('countries', 'choice', array(
                    'choices' => $routeSetup->getCountries(),
                ))
            ;
        })
    ;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-06T12:28:45.837

我还不能评论或投反对票，所以我将在这里回复 Qoop 的回答：除非您开始将表单类型类用作服务，否则您提出的建议将起作用。 **您通常应该避免通过构造函数向表单类型对象添加数据。**

把**表单类型**类想象成一个**类**——它是对表单的一种描述。当您创建**表单实例**（通过构建它）时，您将获得由表单类型中的描述构建的表单**对象**，然后填充数据。

看看这个：[http](http://www.youtube.com/watch?v=JAX13g5orwo) ://www.youtube.com/watch?v=JAX13g5orwo - 这种情况在演示文稿的 31 分钟左右被描述。

您应该使用表单事件 FormEvents::PRE_SET_DATA 并在表单被注入数据时操作字段。请参阅：[http ://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html#customizing-your-form-b​​ased-on-the-underlying-data](http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html#customizing-your-form-based-on-the-underlying-data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-03T14:00:34.380

我通过在构建器上调用 getData 来让它工作

```
FormBuilderInterface $builder 
```

// 控制器

```
$myCountries = $this->myRepository->all(['continent' => 'Africa']);
$form = $this->createForm(CountriesType::class, $myCountries); 
```

//表单类型

```
use Symfony\Component\Form\Extension\Core\Type\ChoiceType;

public function buildForm(FormBuilderInterface $builder, array $options): void
    {
        $builder
            ->add('pages', ChoiceType::class, [
                'choices' => $builder->getData()
            ])
        ;
    } 
```

# c++ - Windows Phone 8 USB 通讯

> ID：15836879
> 
> 赞同：1
> 
> 时间：2013-04-05T14:44:27.277
> 
> 标签：c++, usb, windows-phone-8, windows-phone, symbian

我只是想知道是否可以通过 USB 与 Windows Phone 应用程序与外部硬件进行通信。更具体地说，我想通过简单地移植现有的开源 C++ 应用程序来与我的 3d 打印机通信。你们中的任何人都知道这是否可能，并且可能有任何关于如何做到这一点的信息。可能是一些 api 参考。

此外，如果你们中的任何人知道在 Symbian 设备上执行此操作的方法，那也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:13:02.860

在 Windows Phone 上没有以这种方式使用 USB（即作为主机设备）的公共 API。

# iphone - 图像的旋转边框变得模糊后 ios

> ID：15836888
> 
> 赞同：0
> 
> 时间：2013-04-05T14:44:50.933
> 
> 标签：iphone, ios, uiimageview, cgcontext, cgaffinetransform

在开发基于摄影的应用程序时，我需要旋转图像。但是在旋转图像后，它的边界会变得模糊。我附上了这个的屏幕截图..

![在此处输入图像描述](https://i.stack.imgur.com/inht8.png)

如您所见，第一张图像看起来不错，但旋转的其他图像看起来不太好。

这是我的代码.....

```
 [img setBackgroundColor:[UIColor blackColor]];
        [img setContentMode:UIViewContentModeScaleAspectFit];
        [img.layer setBorderColor:[[UIColor whiteColor]CGColor]];
        [img.layer setBorderWidth:3.0];
        [img setTransform:CGAffineTransformMakeRotation(rotation*3.14/180)]; 
```

我用过这个解决方案...

```
CGContextRotateCTM(context, radians);
[sourceImage drawInRect:rect]; 
```

但是当图像有边界时如何使用此代码。

请给出您宝贵的答复......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:05:50.290

旋转图像时，边框像素不会消除锯齿：请参阅此[问题](https://stackoverflow.com/q/4139695/1124373)。

听起来很奇怪的解决方案是给图像一个 1px 的透明边框。这个[答案](https://stackoverflow.com/a/5071996/1124373)提供了将 1px 透明边框添加到图像的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:58:12.793

这是因为混叠效应。搜索“抗锯齿”。

# actionscript-3 - 在另一个 swf 中加载 Starling swf

> ID：15836895
> 
> 赞同：1
> 
> 时间：2013-04-05T14:45:21.797
> 
> 标签：actionscript-3, flash, starling-framework

我有一个不使用 stage3D 的 swf，它是一个简单的 swf。我还有一个运行八哥的 swf。现在，我想在第一个 swf 中加载 starling swf。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:47:19.430

简短的回答：是的，这是可能的。

提示：

*   您必须在正常的 flash 文件中设置 backgroundAlpha = 0，才能看到 stage3D 上下文。
*   注意你的 html 文件，它是 flash 的包装器，指定 wmode = direct
*   当您不再需要它时，请注意如何卸载/停止八哥内容。

表现：

*   只要您释放不需要的资源，混合使用不会导致性能问题。
*   尽量不要同时对普通 flash 和 starling 内容执行繁重的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:58:10.770

您可能只需要记住 stage3d 内容（starling）将始终位于显示列表下方。性能应该只在移动设备上出现，如果你只针对网络它应该没问题。

# java - JBoss AS 7 - 启动初始化后

> ID：15836896
> 
> 赞同：2
> 
> 时间：2013-04-05T14:45:21.877
> 
> 标签：java, jboss, web.xml

有什么方法可以捕获事件/实现一个类或类似的东西，以检测 JBoss (AS7) 是否已启动并正在运行并且所有应用程序都已部署？

我制作了一个 StartupServlet（它扩展了 HttpServlet），因为我需要调用本地 Web 服务来初始化系统。但是由于我的应用程序没有完全部署，我对 Web 服务的调用（在 StartupServlet 中）以“404 Not Found 错误”结束。

我尝试`<listener>...</listener>`在 web.xml 上使用 a 但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:46:54.307

根据我的理解，您不需要检测所有应用程序何时部署，您只需要了解您的应用程序是否已部署。为此，您应该定义 ServletContextListener： [http ://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)

比部署时可以捕获的：

```
public void contextInitialized(ServletContextEvent sce)
{
      servletContext = sce.getServletContext();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:49:21.800

您可以尝试使用`Startup`EJB，如下[所述](http://blog.eisele.net/2010/12/seven-ways-to-get-things-started-java.html)：

```
@Singleton
@Startup
public class StartupBean {

  @PostConstruct
  private void startup() { ... }

  @PreDestroy
  private void shutdown() { ... }
} 
```

但是，bean 不会检测您的应用程序是否已部署，只会检测当前应用程序（包含 bean 的应用程序）已部署并启动。由于该`@PostConstruct`方法很早就被调用，因此您不能依赖任何其他可用的 bean 或服务。

**编辑**： Jboss 也有一个[本地管理 API](https://docs.jboss.org/author/display/AS71/The+native+management+API)。AFAIK 它也可以用于查询部署。不幸的是，它的文档并不令人印象深刻，但也许您可以弄清楚。

# tfs - TFS 2010 - CI 仅触发受影响的工作区解决方案

> ID：15836899
> 
> 赞同：0
> 
> 时间：2013-04-05T14:45:29.153
> 
> 标签：tfs, continuous-integration, build-definition

我有一个*TFS 2010 构建定义*及其 XAML 工作流逻辑和东西。

这是一个**持续集成**定义，它与同一服务器/工作区文件夹中包含的多个解决方案相关联。

我希望它编译和运行测试，但只是工作空间受到影响的解决方案。为了更清楚，例如：我签入了一个解决方案的 .cs 文件；我希望定义仅编译具有更改的解决方案并丢弃其他解决方案，除非签入变更集涉及这些解决方案中包含的文件。

我对**IncrementalBuild**和**IncrementalGet**做了一些研究（可以通过 Build Definition 的 ' *Clean Workspace* ' 参数来实现），但它仍在编译所有解决方案。

有没有办法通过更改 XAML 工作流或任何特殊参数来实现这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:50:28.707

AFAIK，您必须将这些解决方案拆分为不同的版本。当触发构建定义时，它将处理所有要构建的项目。现在解决方案应该跳过最新的项目，但解决方案本身将被处理。

# iphone - 使用 CoreTelephony 在 iPhone 上获取 IMEI？

> ID：15836900
> 
> 赞同：5
> 
> 时间：2013-04-05T14:45:40.000
> 
> 标签：iphone, ios, iphone-privateapi, imei

我已经尝试了 [如何在 iPhone 上获取 IMEI 的公认答案？](https://stackoverflow.com/questions/823181/how-to-get-imei-on-iphone) 但我得到一个空字符串。

我看到有人建议使用 CoreTelephony 框架，但我不知道如何使用它来获取 IMEI。

关于如何使用这个私有 API 的任何建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T14:48:07.187

**注意：这不再起作用了！**

**尚未在任何新的 iOS 上进行测试。**

您必须将 CoreTelephony.h 添加到您的项目中。确保标题有

```
int * _CTServerConnectionCopyMobileEquipmentInfo (
                                              struct CTResult * Status,
                                              struct __CTServerConnection * Connection,
                                              CFMutableDictionaryRef * Dictionary
                                              ); 
```

然后你可以试试这段代码：

```
#import "CoreTelephony.h"
void getImei() {
struct CTResult it;
CFMutableDictionaryRef kCTDict;
conn = _CTServerConnectionCreate(kCFAllocatorDefault, ConnectionCallback,NULL);
_CTServerConnectionCopyMobileEquipmentInfo(&it, conn, &kCTDict);
NSLog (@ "kCTDict is %@", kCTDict);
CFStringRef meid = CFDictionaryGetValue(kCTDict, CFSTR("kCTMobileEquipmentInfoMEID"));
NSLog (@ "kCTMobileEquipmentInfoMEID is %@", meid);
CFStringRef mobileId = CFDictionaryGetValue(kCTDict,    CFSTR("kCTMobileEquipmentInfoCurrentMobileId"));
NSLog (@ "kCTMobileEquipmentInfoCurrentMobileId is %@", mobileId);
} 
```

这是[CoreTelephony.h](https://github.com/entryleveldev/CoreTelephonyIMEI/blob/master/ImeiTest/CoreTelephony.h)

您可以查看我的[示例项目](https://github.com/entryleveldev/CoreTelephonyIMEI)。

注意：我认为代码在模拟器上不起作用，您的应用可能会被拒绝。

# windows - 具有多个相关 DLL 的外部函数调用

> ID：15836902
> 
> 赞同：2
> 
> 时间：2013-04-05T14:45:44.270
> 
> 标签：windows, dll, inno-setup

我想从具有许多依赖 DLL 的 DLL 中调用几个 API。我将所有 DLL 添加到安装包并定义了原型：

```
function myapi_Init(): Integer;
external 'myapi_init@A.dll stdcall setuponly loadwithalteredsearchpath delayload'; 
```

`ExtractTemporaryFiles('*.dll')`我使用刚刚好的方法提取所有 DLL `InitializeSetup()`，然后尝试调用相应的 API。我收到运行时错误，无法导入 dll...

我重新定义了原型，并删除了提取 DLL 的调用：

```
function myapi_Init(): Integer;
external 'myapi_init@files:A.dll,B.dll,C.dll,D.dll,E.dll stdcall setuponly loadwithalteredsearchpath delayload'; 
```

这工作正常。我检查过，在这两种情况下，所有适当的 DLL 都被提取并在同一个地方。我更喜欢第一种情况，因为它避免拼写每个 API 的所有 DLL 名称。在第一种情况下我做错了什么导致失败？

# c# - 使用 BeginExecute 写入 Azure 表存储

> ID：15836903
> 
> 赞同：2
> 
> 时间：2013-04-05T14:45:45.173
> 
> 标签：c#, azure, asynchronous, azure-storage

我正在尝试使用异步写入 Azure 表存储，`BeginExecute`但结果不一致。当我更改`BeginExecute`为 时`Execute`，所有内容都会正确写入，但我猜我的线程中有问题，它们要么相互取消，要么取决于主线程发送消息的速度。这就是我现在正在做的事情：

```
TableOperation op = TableOperation.Insert(entity);
_table.BeginExecute(op, new AsyncCallback(onTableExecuteComplete), entity);

private void onTableExecuteComplete(IAsyncResult result)
{
    TableResult tr = _table.EndExecute(result);
    if ((tr.HttpStatusCode < 200) || (tr.HttpStatusCode > 202))
    {
        Console.WriteLine("Error writing to table.");
    }
} 
```

我正在用几个条目对其进行测试，我会在表中得到一两个条目，但不是全部。关于如何捕获错误并确保所有条目都正确编写的任何想法？

**更新：**我发现当我把`Thread.Sleep(5000);`主线程放在末尾时，一切都写完了。有没有办法在主线程结束之前暂停它以确保所有其他线程都已完成，这样它们就不会在完成之前被取消？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:44:14.063

可能发生的事情是您的主线程结束，并销毁所有活动的子线程。当您进行异步编程时，您的主线程要么需要运行足够长的时间以等待完成（例如服务），要么需要等待异步任务完成：

```
var result = _table.BeginExecute(op,
    new AsyncCallback(onTableExecuteComplete), entity);
result.AsyncWaitHandle.WaitOne(); 
```

来源：http: [//msdn.microsoft.com/en-us/library/system.iasyncresult.aspx](http://msdn.microsoft.com/en-us/library/system.iasyncresult.aspx)

这当然引出了一个问题：如果您在等待“异步”任务完成时不需要做任何其他事情，那么您不妨同步执行以使事情变得更简单。异步模式的目的是让线程在等待其他进程完成时不应该被阻塞 - 以增加复杂性为代价。

# angularjs - 我应该如何在 jasmine 单元测试中访问元素的 angularjs $ngModelController？

> ID：15836908
> 
> 赞同：8
> 
> 时间：2013-04-05T14:45:56.203
> 
> 标签：angularjs, jasmine, angularjs-directive

我目前`directiveElement.data("$ngModelController")`用于访问元素的`$ngModelController`，如下例所示。

```
describe("directiveElement", function () {
  it("should do something with ngModelController", inject(function($compile, $rootScope) {
    var directiveElement = $compile("<input ng-model="myNgModel" customDirective type="text"></input>")($rootScope);
    $rootScope.$digest();
    var ngModelCtrl = directiveElement.data("$ngModelController");
    ngModelCtrl.$modelValue = "12345";
    // do rest of test
  }));
}); 
```

但是，我想知道是否有更好的访问方式`$ngModelController`，或者访问`$ngModelController`是一个坏主意？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T16:23:14.307

你也可以这样做`directiveElement.controller('ngModel')`。

我当然认为有正当的测试理由让你想要处理这个问题，尽管更常见的方法是通过表单来处理它（例如[https://github.com/angular/angular.js/blob /master/test/ng/directive/formSpec.js](https://github.com/angular/angular.js/blob/master/test/ng/directive/formSpec.js) )

# magento - Magento：orders 和 order_items 表中的计算规则是什么？

> ID：15836911
> 
> 赞同：0
> 
> 时间：2013-04-05T14:46:03.533
> 
> 标签：magento

在我工作的一家 magento 商店中，我遇到了一些订单问题（问题是由于 magento 默认情况下以 2 的精度四舍五入价格，而 4 也是必需的税）。

我已经解决了这个问题，所以新订单与正确的总和一起存储，但是有些订单需要重新计算。

一种方法是遍历 orders 和 order_items 表并设置正确的总和。

但是有很多列，其中一些列并不是很自我谈论它们所代表的内容（例如 hidden_​​tax_amount）。

我确定 original_price 和 tax_percent 是正确的，然后我就有了数量，所以我相信可以轻松地进行一些重新计算，但前提是我知道规则。

那么，你知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:29:27.583

`Mage_Sales_Model_Quote`有方法`collectTotals()`。此方法用于计算所有价格和税收数据。订单是根据报价创建的（大部分数据只是从报价复制到订单）。这很难重新计算所有订单数据。

你可以看看`Mage_Sales_Model_Service_Quote`class 和它的方法`submitOrder()`。

或者您可以尝试加载订单，然后获取其报价 ( `$order->getQuote()`)，然后`collectTotals()`在`$quote`对象上运行。最后在`foreach`like 循环中，您可以将所需的值从报价复制到订单。不要忘记`save()`两个对象。

# soapui - SOAPUI：Https 超时但浏览器工作正常

> ID：15836916
> 
> 赞同：2
> 
> 时间：2013-04-05T14:46:13.127
> 
> 标签：soapui

我正在尝试使用 SOAPUI 调用 WSDL 服务。如果我在浏览器中点击端点，我会得到响应。但是，如果我在 SOAPUI 中放置与端点相同的 url（即 https），它只会给我一个连接超时。

我不确定这是否是一个有效的测试，但是，为了使它更像浏览器，我还尝试发送一条空消息，应用程序仍然超时。

我在某处缺少一些 HTTPS 设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:11:39.623

应该看到这个来了....

我的公司使用代理并且 SOAPUI 没有获得系统（我被迫使用 XP）代理设置。所以我的浏览器运行良好，但我的 SOAPUI 缺少​​代理。

在我在 SOAPUI 中配置代理后一切都好

# wix - 确保无需安装工具包即可构建 WiX 项目的最简单方法是什么？

> ID：15836917
> 
> 赞同：8
> 
> 时间：2013-04-05T14:46:21.097
> 
> 标签：wix

我在构建服务器上构建 WiX 项目时遇到了[一些麻烦。](https://stackoverflow.com/questions/15749137/where-is-microsoft-deployment-windowsinstaller-found?noredirect=1#comment22420365_15749137)痛点之一是我的 WiX 项目正在引用其中的库，`c:\program files...`并且构建过程在同一路径中调用可执行文件。这很糟糕，因为我必须安装 WiX 工具包才能构建我的项目。

通过将所有构建工具都放在正在构建的项目的本地来消除这种头痛的最佳方法是什么？

有没有这样做的nuget包？（在撰写本文时，它似乎不是，但我想验证。）包还原功能会很好，因为这样我就不必在 git 中包含（许多）WiX 文件。

如果没有，我需要从 WiX 下载什么？我需要修改什么以便编译器知道在哪里可以找到构建 WiX 项目的二进制文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T15:03:02.010

[您可以从http://wixtoolset.org/releases/](http://wixtoolset.org/releases/)仅下载 WiX Binaries .zip，然后您可以修改您的 wixproj 文件并更新`<WixToolPath></WixToolPath>`元素以指向您的 WixBinaries

WiX 文档中有一篇文章解释了如何：[将 Wix 项目集成到您的日常构建中](http://wix.sourceforge.net/manual-wix3/daily_builds.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-07T12:22:33.443

[WiX.Toolset](http://nuget.org/packages/WiX.Toolset)有一个**非官方**的nuget 包。但是，请注意，这似乎只适用于安装项目本身（即它不能用于获取例如类库程序集的 wix 二进制文件）。

# c# - 将属性继承到自定义控件 C#

> ID：15836918
> 
> 赞同：2
> 
> 时间：2013-04-05T14:46:21.987
> 
> 标签：c#, asp.net, ascx, asp.net-customcontrol

我有一个自定义控件，我在上面创建了一堆标准的 windows asp 控件。

问题：

是否可以在不重新发明轮子的情况下将父控件的属性继承到自定义控件中？

例如，我有一个带有按钮、文本框和标签的控件。

通常我可以访问该控件的属性，`Lable1.Text`但是当这些控件位于自定义控件中时，如何在不单独封装该控件的所有属性的情况下访问它们。

我希望有类似的东西，`CustomControl1.Lable1.Text`或者这不可能

如果我使用这个公共标签 lbMovieName { get { return this.lbMoveName; } 设置 { lbMovieName = 值；} }

我得到了我需要的东西，但你能告诉我为什么我不应该这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:01:10.510

最简单的方法是通过公共只读属性公开控件：

```
public Label MyLabel
{
    get { return this.Label1; }
} 
```

但是，仅封装您想要公开的值绝对是一种更清洁的解决方案，原因如下：

1.  在这种情况下，您可以抽象出实际的控件类型而不是绑定到 a `Label`- 如果您公开控件，则很难将 Label 替换`MyNewCoolLabel`为 ，例如
2.  您可能会公开更多您想要的内容 - 客户端可以更改标签的显示属性等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:42:26.957

如果您试图避免创建属性，则可以将控件公开（这不是健全的 OO 开发）。正如其他人已经提到的那样，您最好公开您希望通过属性共享的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:07:43.973

我认为最好的方法和最佳实践是创建自定义控件的属性，这些属性只公开并且完全符合您的需要。您控制范围内的所有其他内容都应保持私密。像这样的东西：

```
public string LabelText {
    get { return this.Label1.Text; }
    set { this.Label1.Text = value; }
} 
```

...对于您需要公开的其余属性，依此类推。这也会在设计器中为您提供很好的智能响应。

# php - Smarty 内部错误

> ID：15836920
> 
> 赞同：0
> 
> 时间：2013-04-05T14:46:28.927
> 
> 标签：php, smarty

查看服务器 PHP 错误日志发现，某种类型的 PHP 通知出现频率最高，这与 Smarty 有关。我发现[了一个](https://stackoverflow.com/questions/10075205/php-smarty-variable-error)似乎描述相同错误的问题，但实际上没有答案。

通知如下（有不同的变量声明为未定义）：

```
PHP Notice:  Undefined variable: is_admin in /usr/share/php/Smarty/sysplugins/smarty_internal_data.php on line 291 
```

我想知道我怎么可能调试这个，因为没有提供数据（如模板名称）。

下面我会给你一些代码的想法（你可以在[这里](https://code.google.com/p/opencorpora/source/browse/trunk)详细阅读，因为它都是开源的）。

因此，在名为 的文件中创建了一个全局 smarty 对象`header.php`，并且在同一个文件中进一步设置了一些全局 smarty 变量，包括上面通知中的变量：

```
//init Smarty
require_once('Smarty.class.php');

$smarty = new Smarty();
...
$smarty->assign('is_admin', is_admin() ? 1 : 0); 
```

然后`header.php`将其包含在需要通过调用显示一些 HTML 的每个文件中`$smarty->display(...)`。所以我假设在该`$smarty`对象存在的任何文件中，该对象都有一个名为 is_admin 的变量。然而，情况似乎并非如此。

此外，关于未设置变量的“正常”Smarty 警告看起来不同：

```
PHP Notice:  Undefined index: sent_id in /var/www/smarty_dir/templates_c/a5aab2c66c44442365a39981ba9be18e0a1f11ad.file.history.tpl.cache.php on line 123 
```

有任何想法吗？

**更新。** 我阅读了一些日志，发现当用户进入页面并获得 302 HTTP 状态时似乎会出现此类警告。这可能是由于以下代码（它放置在 smarty 构造函数调用之后但在分配变量之前：

```
//cookie check
if (!is_logged() && isset($_COOKIE['auth'])) {
    if ($user_id = check_auth_cookie()) {
        if (user_login('', '', $user_id, $_COOKIE['auth'])) {
            header("Location:".$_SERVER['REQUEST_URI']);
            return;
        }
    }
} 
```

所以我想我应该`$smarty`在这个块之后移动初始化，它可能会有所帮助。我仍然很好奇它与这个问题的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:20:40.423

我想我明白了。问题实际上出在代码中，包括

```
header("Location:".$_SERVER['REQUEST_URI']);
return; 
```

我的错误是在这种情况下`return`不像`exit`这种情况，因为当您`return`从`require`d 或`incude`d 文件调用另一个文件时，您只需将控件返回到另一个文件。我不知道这个功能。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-05T14:49:15.077

`'is_admin', is_admin()`您正在尝试将函数 is_admin() 作为变量 {$is_admin} 分配给 Smarty 模板，在我看来，这是不可能的。

将返回结果分配给一个变量，即：

```
$var = is_admin();
$smarty->assign('is_admin', $var); 
```

# excel - 在 ADODB（VBA、Excel 和 Access 2010）中执行查询时出现错误 80004005

> ID：15836922
> 
> 赞同：1
> 
> 时间：2013-04-05T14:46:36.410
> 
> 标签：excel, vba, ms-access, inner-join, adodb

我有一个我无法解决的问题。我有一个 Access 数据库，我试图通过使用 ADODB 在 Excel 中使用 VBA 创建一组查询。

我有几个成功创建的查询，即。下面的一个。然而，第二个将不起作用。如果我将查询手动复制到访问数据库（从 SELECT 并转发）并保存为“DK_Teledata_1”，它就完美了

```
CREATE PROCEDURE DK_Aktiviteter_Union_1 AS SELECT DK_Aktivitet.År FROM DK_Aktivitet; 
```

而那个不起作用的

```
CREATE PROCEDURE DK_Teledata_1 AS SELECT DK_Teledata.Dato FROM DK_Teledata INNER JOIN Time_Intervals ON DK_Teledata.Interval = Time_Intervals.Time_Interval; 
```

创建以下具有相同数据的查询没有任何问题：

```
CREATE PROCEDURE DK_Teledata_1 AS SELECT * FROM DK_Teledata;
CREATE PROCEDURE DK_Teledata_1 AS SELECT * FROM Time_Intervals;
CREATE PROCEDURE DK_Teledata_1 AS SELECT * FROM Time_Intervals, DK_Teledata; 
```

一旦我创建连接或使用“WHERE DK_Teledata.Interval = Time_Intervals.Time_Interval”，它就会失败。

字段 Intervals 和 Time_Intervals 都是具有相同长度和属性的文本字段。

使用 Excel 2010、accdb 数据库文件和“Microsoft.ACE.OLEDB.12.0”提供程序字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:07:41.013

作为一个疯狂的猜测，我建议你`CREATE VIEW`用`CREATE PROCEDURE`.

如果这也不起作用，您可以使用 DAO 来创建您的查询。

```
Dim strSql As String
Dim db As DAO.Database
Dim qdf As DAO.QueryDef

strSql = "SELECT DK_Teledata.Dato" & vbCrLf & _
    "FROM DK_Teledata INNER JOIN Time_Intervals" & vbCrLf & _
    "ON DK_Teledata.Interval = Time_Intervals.Time_Interval;"
Set db = OpenDatabase("C:\db_folder\your.accdb", True, False)
Set qdf = db.CreateQueryDef("DK_Teledata_1", strSql) 
```

该代码使用早期绑定，因此需要设置引用。但是您可以使用不需要引用的后期绑定来做同样的事情。

```
Dim strSql As String
Dim dbe As Object
Dim db As Object
Dim qdf As Object

strSql = "SELECT DK_Teledata.Dato" & vbCrLf & _
    "FROM DK_Teledata INNER JOIN Time_Intervals" & vbCrLf & _
    "ON DK_Teledata.Interval = Time_Intervals.Time_Interval;"
Set dbe = CreateObject("DAO.DBEngine.120")
Set db = dbe.OpenDatabase("C:\db_folder\your.accdb", True, False)
Set qdf = db.CreateQueryDef("DK_Teledata_1", strSql) 
```

# ruby-on-rails-3.2 - 是否有可能有一个只处理特定邮件程序的邮件观察者？

> ID：15836923
> 
> 赞同：2
> 
> 时间：2013-04-05T14:46:41.253
> 
> 标签：ruby-on-rails-3.2, actionmailer, observers

是否可以有一个只处理特定 Mailer 的邮件观察者？

这样我们就可以有不同的邮件程序 - 邮件观察者对，在他们的邮件发送后共同处理任务。

例如，一个邮件观察者可以删除临时生成的附件，而另一个可以记录某些特定类型的消息（特定邮件程序的）的发送。

如果可能，您能否说明我们如何在邮件程序和邮件观察器类之间建立“连接”？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:39:07.117

我发现了一些示例告诉将其放入 config/initializers/ 中的任何文件中：

```
ActionMailer::Base.register_observer(MyMailObserver) 
```

然而，这是一个全局设置。

我在深入研究[api](http://api.rubyonrails.org/classes/ActionMailer/Base.html)后找到了解决方案。我意识到 register_observer() 是一个类方法，所以我尝试将它应用于我的**app/mailer/report_mailer.rb**类：

```
class ReportMailer < ActionMailer::Base
  default from: "my_email@my_domaine.com"

  def monthly_report(user, report_name, file_name, file_path)
    @user = user
    @report_name = report_name
    attachments[file_name] = File.read(file_path)
    mail(:to => user.email, :subject => "Generated report for #{report_name} (automatic message)")
  end
end 
```

**我设法在config/initializers/my_mailer_observer_initializer.rb**中为我的邮件程序初始化我的观察者来应用它：

```
ReportMailer.register_observer(MyMailObserver) 
```

所以我让 MyMailerObserver 与我的 ReportMailer 类有关，而没有其他 Mailer 类。

# java - 杀死线程的替代方法

> ID：15836924
> 
> 赞同：5
> 
> 时间：2013-04-05T14:46:46.680
> 
> 标签：java, multithreading, concurrency

我一直在寻找杀死线程的方法，看来这是最流行的方法

```
public class UsingFlagToShutdownThread extends Thread {
  private boolean running = true;
  public void run() {
    while (running) {
      System.out.print(".");
      System.out.flush();
      try {
        Thread.sleep(1000);
      } catch (InterruptedException ex) {}
    }
    System.out.println("Shutting down thread");
  }
  public void shutdown() {
    running = false;
  }
  public static void main(String[] args)
      throws InterruptedException {
    UsingFlagToShutdownThread t = new UsingFlagToShutdownThread();
    t.start();
    Thread.sleep(5000);
    t.shutdown();
  }
} 
```

但是，如果在 while 循环中我们生成另一个填充数据的对象（例如正在运行和更新的 gui），那么我们如何回调 - 特别是考虑到此方法可能已被调用多次，因此我们有很多线程而（运行）然后为一个更改标志会为每个人更改它吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:08:18.127

解决这些问题的一种方法是拥有一个处理所有线程的 Monitor 类。它可以启动所有必要的线程（可能在不同的时间/必要时），一旦你想关闭，你可以在那里调用一个关闭方法来中断所有（或部分）线程。

此外，实际上调用`Thread`s`interrupt()`方法通常是一种更好的方法，因为这样它将摆脱抛出的阻塞动作`InterruptedException`（例如等待/睡眠）。然后它将设置一个已经存在于 Threads 中的标志（可以使用 进行检查`isInterrupted()`或检查并清除`interrupted()`。例如，以下代码可以替换您当前的代码：

```
public class UsingFlagToShutdownThread extends Thread {
  public void run() {
    while (!isInterrupted()) {
      System.out.print(".");
      System.out.flush();
      try {
        Thread.sleep(1000);
      } catch (InterruptedException ex) { interrupt(); }
    }
    System.out.println("Shutting down thread");
  }
  public static void main(String[] args)
      throws InterruptedException {
    UsingFlagToShutdownThread t = new UsingFlagToShutdownThread();
    t.start();
    Thread.sleep(5000);
    t.interrupt();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:13:07.830

我添加了一个实用程序类，它本质上具有静态地图和方法。

地图是类型`Long id, Thread thread`。我添加了两种方法，一种是添加到地图中，另一种是通过使用中断来停止线程。此方法将 id 作为参数。

我也将我的循环逻辑从 while true 更改为 while！被中断。这种方法可以吗还是这种糟糕的编程风格/约定

谢谢

# c# - 从节点获取值

> ID：15836926
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:46:49.727
> 
> 标签：c#, xml, linq-to-xml

我有一个问题）如何从特定节点获取价值（info/weather/day/day_part type="День" /tempreture）

```
<?xml version="1.0" encoding="UTF-8"?>
<info lang="ru" xmlns:x="http://www.yandex.ru/xscript">
  +<region id="213" lon="37.617671" lat="55.755768" zoom="10"/>
  <traffic lon="37.617671" lat="55.755768" zoom="10" region="213"></traffic>
  <weather region="213" climate="1">
    <source xmlns:xi="http://www.w3.org/2001/XInclude">mb3d</source>
    <day xmlns:xi="http://www.w3.org/2001/XInclude">
      <title>Москва</title>
      <country>Россия</country>
      <time_zone>Europe/Moscow</time_zone>
      <summer-time>0</summer-time>
      <sun_rise>06:51</sun_rise>
      <sunset>20:14</sunset>
      <daytime>d</daytime>+<date date="2013-04-05T00:00:00Z"/>
      <day_part type="день" typeid="2">
        <weather_type>облачно</weather_type>
        <weather_code>overcast</weather_code>
        <image>http://weather.yandex.ru/i/5.png</image>
        <image-v2 size="22x22">http://yandex.st/weather/v-1/i/icons/22x22/ovc_+6.png</image-v2>
        <image-v3 size="48x48">http://yandex.st/weather/v-1/i/icons/48x48/ovc.png</image-v3>
        <image_number>5</image_number>
        <wind_speed>5.0</wind_speed>
        <wind_direction id="se">юв</wind_direction>
        <dampness>70</dampness>
        <pressure>743</pressure>
        <temperature color="F2F0E6" class_name="t6">+5</temperature>
        <time_zone>Europe/Moscow</time_zone>
        <observation_time>17:30</observation_time>
        <observation>2013-04-05T17:30:00</observation>
      </day_part>
      <day_part type="вечер" typeid="3"></day_part>
      <day_part type="ночь" typeid="4"></day_part>
      <day_part type="утро" typeid="1"></day_part>
      <day_part type="день" typeid="2"></day_part>
      <night_short></night_short>
      <tomorrow></tomorrow>
    </day>
    <url xmlns:xi="http://www.w3.org/2001/XInclude">http://pogoda.yandex.ru/moscow/</url>
  </weather>
</info> 
```

我有代码，但是如何指定我需要 type="День" 的节点

```
XElement elem = xDocument.Element("info");
     if (elem != null)
        foreach (var el in elem.Elements("weather").Elements("day").Elements("day_part"))
           {
             var level = el.Element("temperature").Value;
             listBox1.Items.Add(level);
           }; 
```

这段代码返回两个值（+5，+6），但我只需要一个（+5）并抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:53:46.950

尝试这样的事情

```
 if (elem != null)
            elem.Descendants("day_part").Where(el => el.Attribute("type").Value == "день")
                .ToList().ForEach(el => listBox1.Items.Add(el.Element("temperature").Value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:01:37.993

您可以为 Xlinq 使用 XPath 扩展：

```
using System.Xml.Linq;
using System.Xml.XPath;
...
var doc = XDocument.Load("test.xml");
IEnumerable<XElement> dayElements = doc.XPathSelectElements("/info/weather/day/day_part[@type=\"день\"]"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:03:33.683

首先 - 您的输入 XML 无效，无法加载到`XDocument`. 我将其固定为：

```
<?xml version="1.0" encoding="UTF-8"?>
<info lang="ru" xmlns:x="http://www.yandex.ru/xscript">+<region id="213" lon="37.617671" lat="55.755768" zoom="10" />
<traffic lon="37.617671" lat="55.755768" zoom="10" region="213"></traffic>
 <weather region="213" climate="1">
 <source xmlns:xi="http://www.w3.org/2001/XInclude">mb3d</source>
 <day xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Москва</title>
  <country>Россия</country> 
  <time_zone>Europe/Moscow</time_zone> 
  <summer-time>0</summer-time>  
  <sun_rise>06:51</sun_rise>
  <sunset>20:14</sunset>
  <daytime>d</daytime>
  <date date="2013-04-05T00:00:00Z"></date>
  <day_part type="день" typeid="2">
          <weather_type>облачно</weather_type>
          <weather_code>overcast</weather_code>
          <image>http://weather.yandex.ru/i/5.png</image>
          <image-v2 size="22x22">http://yandex.st/weather/v-1/i/icons/22x22/ovc_+6.png</image-v2>
          <image-v3 size="48x48">http://yandex.st/weather/v-1/i/icons/48x48/ovc.png</image-v3>
          <image_number>5</image_number>
          <wind_speed>5.0</wind_speed>
          <wind_direction id="se">юв</wind_direction>
          <dampness>70</dampness>
          <pressure>743</pressure>
          <temperature color="F2F0E6" class_name="t6">+5</temperature>
          <time_zone>Europe/Moscow</time_zone>
          <observation_time>17:30</observation_time>
          <observation>2013-04-05T17:30:00</observation>
  </day_part>
  <day_part type="вечер" typeid="3"></day_part>
  <day_part type="ночь" typeid="4"></day_part>
  <day_part type="утро" typeid="1"></day_part>
  <day_part type="день" typeid="2"></day_part>
  <night_short></night_short>
  <tomorrow></tomorrow>
</day>
<url xmlns:xi="http://www.w3.org/2001/XInclude">http://pogoda.yandex.ru/moscow/</url>
</weather>
</info> 
```

通过这种输入，您可以使用`XPathSelectElements`扩展方法获得所需的节点值：

```
var results = xDocument.XPathSelectElements("info/weather/day/day_part[@type='день']/temperature")
                       .Select(e => (string)e)
                       .ToList(); 
```

对于上面显示的 XML 文档，`results`它包含一个`string`值：`+5`.

但是，我建议使用属性值而不是搜索`day_part`元素：`typeid``type`

```
var results = xDocument.XPathSelectElements("info/weather/day/day_part[@typeid=2]/temperature")
                        .Select(e => (string)e)
                        .ToList(); 
```

结果相同，但由于编码而失败的机会更少。

然后，您可以填写您的`ListBox`：

```
foreach (var value in results))
{
    listBox1.Items.Add(value);
}; 
```

# scala - 点阅读器 monad scala

> ID：15836929
> 
> 赞同：3
> 
> 时间：2013-04-05T14:46:56.117
> 
> 标签：scala, scalaz, scalaz7

有没有办法，如何轻松地`point`在`Reader`上下文中赋值？
我可以使用`Reader`对象并忽略上下文：

```
Reader {
  _ ⇒ 3
} 
```

Scalaz 似乎`point`对此有专门的方法。我明白了，这是在`Applicative`. 我想，有一些技巧，如何将值放入`Reader`上下文中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T15:12:45.707

实际上有一个`Applicative`实例`Reader`，你可以像这样使用它（你当然应该`String`用你想要你的环境的任何类型替换）：

```
3.point[({type L[X] = Reader[String, X]})#L] 
```

如果您希望避免丑陋的类型 lambda 并且不介意定义额外的类型别名，则可以编写以下代码：

```
type MyReader[X] = Reader[String, X]

3.point[MyReader] 
```

Scalaz 7 还提供了一个很好的简写方式，使它更加简洁：

```
3.liftReader[String] 
```

但是，这些都或多或少地彼此等效（以及您的解决方案）。

# ios - 如何使用 IBOutletCollection 将多个 UIImageViews 连接到同一个插座？

> ID：15836930
> 
> 赞同：31
> 
> 时间：2013-04-05T14:46:56.523
> 
> 标签：ios, objective-c, xcode, uiimageview, iboutletcollection

我有 10 个 UIImageViews 做同样的事情（他们有一些用计时器改变图像的 void 方法）。我的 UIImageView 是一个插座，我想将所有 10 个 imageView 连接到同一个插座，但界面生成器不允许我这样做。

我发现有一个解决方案，IBOutletCollection。谁能向我解释如何使用它将多个 imageViews 连接到同一个插座？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-05T15:45:08.103

声明一个属性来保存你的 imageView，然后像往常一样将它们连接到界面构建器中

```
@property (nonatomic, strong) IBOutletCollection(UIImageView) NSArray *imageViews; 
```

这只是正常的`NSArray`，但是当笔尖被加载时，它将被你的 imageView 填充

* * *

**更新**

在您查看具有多个 imageView 的控制器的头文件中，您需要添加上面的属性 - 它可能看起来像这样：

```
@interface MyViewController : UIViewController

@property (nonatomic, strong) IBOutletCollection(UIImageView) NSArray *imageViews;
// other properties

@end 
```

现在在界面构建器中，您将所有 imageView 连接到这一属性。

![在此处输入图像描述](https://i.stack.imgur.com/BaLlr.png) ![在此处输入图像描述](https://i.stack.imgur.com/dcxrl.png)

现在我只处理`imageViews`收藏

```
for (UIImageView *imageView in self.imageViews) {
  imageView.image = someImage;
} 
```

# php - 每个带有 substr_count 的 PHP 数字

> ID：15836932
> 
> 赞同：0
> 
> 时间：2013-04-05T14:46:58.100
> 
> 标签：php

好吧让我简化..

我在一个变量中有一个 id 列表`$paramsId = 10,38,8,4,36,`。我现在需要将这些数字分成单独的变量，所以我使用`list($slide1, $slide2, $slide3, $slide4, $slide5) = explode(",", $params->get('id'));` 然后将它放在一个数组中：

```
$a = array(
    "one" => $slide1,
    "two" => $slide2,
    "three" => $slide3,
    "four" => $slide4,
    "five" => $slide5
); 
```

然后将其放入 foreach 语句中：

```
foreach ($a as $k => $val) {
    $args = $val;
    $item[] = ModArticleSlider::getArticles($args);
} 
```

我想要实现的是 $paramsId 中的 foreach 数字用“，”分隔值，然后将每个分隔值放入名为“$slider1，$slider2（等等）”的变量中，然后将这些变量放入数组中。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:02:53.050

只需使用

```
$a = explode(",", $params->get('id')); 
```

然后尝试 print_r($a) 并检查您的值是否在数组中。

# java - Javascript 到 Java Web 应用程序

> ID：15836935
> 
> 赞同：1
> 
> 时间：2013-04-05T14:47:10.747
> 
> 标签：java, javascript, web-applications, servlets

我正在尝试在 eclipse 中做一个简单的 web 项目。我的目标是让 .jsp/html 文件成为表示层，用 javascript 处理逻辑，用 Java 处理服务器端的东西。对于我的简单测试，我只想让我的 JavaScript 代码能够联系 Web 服务器并让 Java 代码返回一个日期。这是我现在所拥有的（注意我只显示“麻烦”部分）

.jsp（定时器.jsp）：

```
<div ><h2 id="date" class="main"></h2></div> 
```

JavaScript (timer.js):

```
var xhr = new XMLHttpRequest();
    document.getElementById("date").innerHTML = xhr.responseText;
    xhr.open("GET", "CoopTimer", true);
    xhr.send(); 
```

爪哇：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
    Date date = new Date();

    request.setAttribute("date", dateFormat.format(date).toString());

    request.getRequestDispatcher("/Timer.jsp").forward(request, response);

} 
```

我确信 JavaScript 是错误的，可能是问题所在。所以本质上，我的目标是让标头 id“日期”从 javascript 中获取日期，而 javascript 将从 java servlet 中获取值。

如果有人能指出我正确的方向，无论是资源，你有什么，那就太棒了。谢谢！

编辑：这是我使用的最终代码。经过数小时试图找出问题所在...... eclipse 中没有提到右键单击 HTML 并在服务器上运行为。一个可耻的错误，但我永远不会忘记。

这是我用来返回简单日期字符串的代码：

.jsp（定时器.jsp）：

```
<div ><h2 id="date" class="main"></h2></div> 
```

Javascript (timer.js)

```
$("#date").load("http://127.0.0.1:14949/CoopTimer/CoopTimer"); 
```

爪哇：

```
/**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        Date date = new Date();

        response.setContentType("text/plain");  
        response.setCharacterEncoding("UTF-8"); 
        response.getWriter().write(date.toString());

        //System.out.println("PING");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:57:17.057

至少有两个问题。

首先：servlet 的结果是 Timer.jsp 呈现的结果。Timer.jsp 不对 servlet 请求中存储的日期做任何事情。如果您只希望 servlet 返回格式化的日期，则不需要转发到 JSP。只需将日期写给回复的作者即可。

第二：您的 JavaScript 代码在发送请求之前尝试使用响应内容更改标头的 innerHTML。这是行不通的。我的建议是使用 jQuery 及其 AJAX 函数，以使您的 JS 代码更易于编写、理解和在浏览器之间移植：

```
$('#date').load('CoopTimer'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:01:46.650

使用 jquery 进行 ajax 调用，这本身非常简单。这是javascript代码片段

```
function pullResultFromServlet() {
  var url = 'servletURL';
  $.ajax({
    url: url,
    dataType: 'json',
    data:{
      "dateValue: $('#date').val(),
    },
    type: 'POST',
    success: function(responseFromServlet) {
      // further processing
      }

    },
    error: function(jqXHR, textStatus, errorThrown) {
    }
  });
} 
```

# objective-c - 使用自动布局调整滚动视图的大小？

> ID：15836941
> 
> 赞同：1
> 
> 时间：2013-04-05T14:47:20.460
> 
> 标签：objective-c, uiscrollview, frame, autolayout

将内容包装在 a`UIScrollView`中是一种常见的技术，目的是在键盘出现时将其移开。这是通过修改滚动视图的框架/边界来完成的，以便它包含键盘未覆盖的区域。根据[Ole Begemann](http://oleb.net)的说法，在使用 autolayout 时[不应使用该`frame`属性](http://oleb.net/blog/2013/03/things-you-need-to-know-about-cocoa-autolayout/)。

不使用框架如何实现同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:29:34.983

您可以在 IB 中为您的约束创建一个出口，例如将底部连接`UISCrollView`到超级视图的约束，然后使用代码更改该约束的常量。这也可以在动画块中进行动画处理。

```
 self.someConstraint.constant = ...; 
```

# mongodb - mongodb：使用包含文档和子文档的 where 子句删除子文档

> ID：15836948
> 
> 赞同：3
> 
> 时间：2013-04-05T14:47:35.507
> 
> 标签：mongodb

这是我的收藏（工人）：

```
"type" : "Manager",
"employees" : [{
    "name" : "bob"
    "id" : 101
    },{
    "name" : "phil"
    "id" : 102
    },{
    "name" : "bob"
    "id" : 103
    }] 
```

首先：这**不是一个数组**，所以 $pullAll 将不起作用或其他数组命令。我想要做的就是：（1）在所有子文档**中使用**类型管理器搜索 id 101 的集合。**(2) 如果“经理”**子文档中存在 101 ，我想删除项目 103。

我已经在这个问题上倾注了两天的互联网，无法弄清楚。

我已经尝试过这个（以及许多其他变体）：

```
db.workers.update( {"type":"Manager","employees.id":101},{$pull : {"employees.id" : {"id" : 103}}},false,true) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:27:32.893

`$pull`您的对象的语法已关闭。试试这个：

```
db.workers.update({"type":"Manager","employees.id":101},
    {$pull : {"employees" : {"id" : 103}}},false,true) 
```

要确认它们已被删除：

```
db.workers.find({
    type: "Manager", 
    $and: [{'employees.id': 101}, {'employees.id': 103}]
}) 
```

# .net - 支持每个单元测试类的超时吗？

> ID：15836956
> 
> 赞同：2
> 
> 时间：2013-04-05T14:48:00.210
> 
> 标签：.net, unit-testing, xunit, xunit.net

在 NUnit 中，我可以*在**（测试类）级别*`[Timeout(5000)]`添加一个属性，以指定该类中*每个*测试方法的上限。*`TestFixture`*

 *在 xUnit 中，我知道我可以做类似的事情，但在测试方法级别：`[Fact(Timeout=5000)]`.

我的问题是：我可以使用 xUnit 在测试类级别应用超时吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:59:30.840

这可能不是您想看到的答案，但值得...

这里的建议是创建您自己的 FactAttribute 替代品，它派生自 FactAttribute 并设置您想要的任何默认值（如超时）。

参考：http: [//xunit.codeplex.com/workitem/9727](http://xunit.codeplex.com/workitem/9727)*

# redhat - Plesk 是否限制订阅/域的数量

> ID：15836958
> 
> 赞同：0
> 
> 时间：2013-04-05T14:48:01.040
> 
> 标签：redhat, plesk, parallels

我想知道 plesk 安装可以允许的最大站点/订阅数量是多少？它依赖于磁盘空间吗？我们安装的版本是psa-11.0.9-rhel6.build110120608.16.x86_64

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:20:10.863

想想看，它主要取决于操作系统/文件系统设置以及 apache、nginx、mysql 和 postfix 等服务的设置。我在平行知识库中看到了几篇文章，这些文章描述了增加最大域数量的调整。例如：

[http://kb.parallels.com/113974](http://kb.parallels.com/113974)

[http://kb.parallels.com/115139](http://kb.parallels.com/115139)

[http://kb.parallels.com/769](http://kb.parallels.com/769)

不知不觉应该有一个由内部软件设计引起的限制。我知道有大约 1000 个域和大约 5000 个邮箱的 plesk。顺便说一句，我知道有 Parallels Plesk Automation，它是一款面向中间主机的产品，它允许将托管服务划分为不同的服务器，这也允许增加域的数量。

可能更喜欢在[http://serverfault.com](http://serverfault.com)上提问，可能有些人面临着大型独立 plesk 服务器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T16:47:33.970

您可以拥有的域数量有限制，具体取决于您的许可证。在我的一台云服务器上，限制是 30，因为这是我的许可证允许的。

# mysql - 查询设计问题

> ID：15836959
> 
> 赞同：0
> 
> 时间：2013-04-05T14:48:01.413
> 
> 标签：mysql

我在此表中有一个嵌套列表`address`：

```
name        |lft | rgt |
------------+----+-----+
Australia   | 1  | 10  |
nsw         | 2  | 9   |
sydney      | 3  | 8   |
kensington  | 4  | 5   |
kingsford   | 6  | 7   |
------------+----+-----+ 
```

表格说明：如您所见，Australia 包括从左右值到其下方的所有其他值。这同样适用于新南威尔士州和悉尼，它们包含它们下方的内容。kensington 和 kingsford 的深度一样，都属于悉尼。

我想在这里写一个自动完成搜索的查询。我想当我输入“k”时得到以下结果：

```
-->kensington, sydney, nsw, australia
-->kingsford, sydney, nsw, australia 
```

当前查询：

```
 'SELECT parent.name
        FROM  address AS node,
                address AS parent
        WHERE node.lft BETWEEN parent.lft AND parent.rgt
                AND node.name LIKE ' . $input 
```

我的查询确实返回相同的值，但“混合”如下：

```
 Array
    (
        [0] => australia
        [name_en] => australia
    )
    Array
    (
        [0] => australia
        [name_en] => australia
    )
    Array
    (
        [0] => NSW
        [name_en] => NSW
    )
    Array
    (
        [0] => NSW
        [name_en] => NSW
    )
    Array
    (
        [0] => sydney
        [name_en] => sydney
    )
    Array
    (
        [0] => sydney
        [name_en] => sydney
    )
    Array
    (
        [0] => kensington
        [name_en] => kensington
    )
    Array
    (
        [0] => kingsford
        [name_en] => kingsford
    ) 
```

我寻求的结果是这样的

```
 Array
    (
        [0] => australia
        [name_en] => australia
    )
    Array
    (
        [0] => NSW
        [name_en] => NSW
    )
    Array
    (
        [0] => sydney
        [name_en] => sydney
    )
    Array
    (
        [0] => kensington
        [name_en] => kensington
    )
    Array
    (
        [0] => australia
        [name_en] => australia
    )
    Array
    (
        [0] => NSW
        [name_en] => NSW
    )
    Array
    (
        [0] => sydney
        [name_en] => sydney
    )
    Array
    (
        [0] => kingsford
        [name_en] => kingsford
    ) 
```

它应该一个接一个地返回路径。

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:12:50.203

试试这个：

```
SELECT parent.name
    FROM  address_tmp AS node,
            address_tmp AS parent
    WHERE node.lft BETWEEN parent.lft AND parent.rgt
            AND node.name LIKE 'k%' order by node.lft, node.rgt, parent.rgt 
```

（我用 k 作为查询的例子）

# iphone - 在 UITableView 中显示带有 JSON 内容的 NSArray

> ID：15836960
> 
> 赞同：0
> 
> 时间：2013-04-05T14:48:02.683
> 
> 标签：iphone, ios, objective-c, json

您好我正在尝试在表格视图中显示来自 NSArray 的内容，但`NSString *place= [jsonResults objectAtIndex:indexPath.row];`在尝试增加 objectAtIndex 以便显示来自 json 的结果时遇到问题。以下是我得到的错误：

```
> *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary
> objectAtIndex:]: unrecognized selector sent to instance 0x714bda0' 
```

我也尝试了以下方法，但我也遇到了错误：

> NSDictionary *place= [jsonResults objectAtIndex:indexPath.row];

```
 #import "leagueTableViewController.h"

  #define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)

   #define kjsonURL [NSURL URLWithString: @"http://api.statsfc.com/premier-        league/table.json?key=o"]
   @interface leagueTableViewController ()

   @end

   @implementation leagueTableViewController{

  NSMutableArray *jsonResults;
   }

 - (id)initWithStyle:(UITableViewStyle)style
  {
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

 - (void)viewDidLoad
 {
[super viewDidLoad];

dispatch_async(kBgQueue, ^{

    NSData* data = [NSData dataWithContentsOfURL:

                    kjsonURL];

    [self performSelectorOnMainThread:@selector(fetchedData:)

                           withObject:data waitUntilDone:YES];

});
}

- (void)fetchedData:(NSData *)responseData {

NSError* error;

NSArray* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

jsonResults= [json objectAtIndex:0];
NSString *team = [jsonResults valueForKey:@"team"];

NSString *position = [jsonResults valueForKey:@"position"];

NSLog(@"team: %@", team); //3

 NSLog(@"position: %@", position);

[self.tableView reloadData];

 }

 -(IBAction)btnBack:(id)sender {

  [self dismissViewControllerAnimated:YES completion:nil];

 }
- (void)didReceiveMemoryWarning
 {
 [super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
 }

 #pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {

// Return the number of sections.
return 1;
 }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:   (NSInteger)section
 {
return [jsonResults count];
}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath

 {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

NSString *place= [jsonResults objectAtIndex:indexPath.row];

NSString *position1 = [place valueForKey:@"position"];
NSString *won= [place valueForKey:@"won"];
NSString *lost= [place valueForKey:@"lost"];
NSString *played= [place valueForKey:@"played"];
NSString *points= [place valueForKey:@"points"];

cell.textLabel.text = [place valueForKey:@"team"];

cell.detailTextLabel.text = [NSString stringWithFormat:@"Position: %@ Played: %@ won:  %@ lost: %@ Points: %@",position1,played,won,lost,points];

return cell;

  }

#pragma mark - Table view delegate

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:51:26.817

这个错误的原因是 that `jsonResults`is not a `NSArray`but a `NSDictionary`。

**编辑：**正如@H2CO3 正确所说，`json`已经是`NSArray`您要使用的。用于`[json objectAtIndex:indexPath.row]`获取包含`NSDictionary`您想要在相应 中显示的所有详细信息`tableViewCell`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:54:21.743

您要么误解了返回的 JSON 的结构，要么没有执行您实际尝试执行的操作，或者两者兼而有之。在我看来，您想显示**所有**团队，所以

```
jsonResults = [json objectAtIndex:0]; 
```

错了，`jsonResults`应该直接是`NSJSONSerialization`方法的返回值：

```
jsonResults = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error]; 
```

`retain`（如果您不使用 ARC，请添加一个，因为此方法返回一个自动释放的对象。）

# javascript - 如何从整个圆顶中删除 knockoutjs 绑定

> ID：15836961
> 
> 赞同：1
> 
> 时间：2013-04-05T14:48:05.993
> 
> 标签：javascript, binding, knockout.js

我已经建立了一个使用淘汰赛的页面，因为它有很多东西，它的效果非常好。

发生导航时出现我的问题：页面加载 - 效果很好 用户导航离开 - 效果很好 用户按下后退按钮 - 原始分页符

在我看来，一旦页面返回到使用后退按钮，原始绑定仍然存在，然后页面下载其数据并调用 ko.applyBinding，导致绑定应用两次打破页面。

怎么去掉原来的绑定，需要页面绑定到新下载的数据，而不是导航前可用的数据。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:09:05.607

[这是来自： https](https://stackoverflow.com/a/13459885/989516) ://stackoverflow.com/a/13459885/989516的一个想法

```
ko.unapplyBindings = function ($node, remove) {
    // unbind events
    $node.find("*").each(function () {
        $(this).unbind();
    });

    // Remove KO subscriptions and references
    if (remove) {
        ko.removeNode($node[0]);
    } else {
        ko.cleanNode($node[0]);
    }
}; 
```

# java - 在jlist中添加图片

> ID：15836962
> 
> 赞同：2
> 
> 时间：2013-04-05T14:48:06.643
> 
> 标签：java, swing, applet, jlist

我正在使用 java 中的小程序编写一个简单的基于文本的聊天应用程序，它由几个组件组成，其中一个是我的 Jlist，它提供了该特定时间点的在线用户列表。

我想要的是我需要在Jlist中设置一个除了在线用户名之外的小图片。

有没有人有任何基于此的想法。如果您有任何问题，请随时提问。

谢谢，普内特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:02:42.927

JList 文档有一个将图标加载到 JList 中的示例。您应该能够使用它来将您的小图片插入到 JList 中。

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html)

以下是该链接中的相关代码：

```
 // Display an icon and a string for each object in the list.

 class MyCellRenderer extends JLabel implements ListCellRenderer {
     final static ImageIcon longIcon = new ImageIcon("long.gif");
     final static ImageIcon shortIcon = new ImageIcon("short.gif");

     // This is the only method defined by ListCellRenderer.
     // We just reconfigure the JLabel each time we're called.

     public Component getListCellRendererComponent(
       JList list,              // the list
       Object value,            // value to display
       int index,               // cell index
       boolean isSelected,      // is the cell selected
       boolean cellHasFocus)    // does the cell have focus
     {
         String s = value.toString();
         setText(s);
         setIcon((s.length() > 10) ? longIcon : shortIcon);
         if (isSelected) {
             setBackground(list.getSelectionBackground());
             setForeground(list.getSelectionForeground());
         } else {
             setBackground(list.getBackground());
             setForeground(list.getForeground());
         }
         setEnabled(list.isEnabled());
         setFont(list.getFont());
         setOpaque(true);
         return this;
     }
 }

 myList.setCellRenderer(new MyCellRenderer()); 
```

假设您的 JList 包含用户名，您可以将用户名放入 HashMap

```
setIcon(userHashMap.get(s)); 
```

如果您的 JLIst 实际上存储了除用户名之外的其他部分（动态组件，例如状态、组名等），您可能需要从传递到值对象的字符串中解析出用户名。

# sql-server - 使用 SSIS 复制大量超大型数据库的最佳实践

> ID：15836964
> 
> 赞同：3
> 
> 时间：2013-04-05T14:48:09.847
> 
> 标签：sql-server, database, ssis, replication

我的任务是在内部在线获取我们的 SQL Server 2005/2008 数据库的副本并每天更新它们。与每个站点的连接受到监管，因此在线访问不是一种选择。现场数据库是工作组许可的。主服务器是企业级服务器，拥有大量的处理器和 RAM。副本的目的有两个：（1）在线备份和（2）ETL到数据仓库的来源。

大约有 300 个数据库，大部分模式相同，分布在美国、加拿大和墨西哥。当前的数据库大小介于 5 GB 和 1 TB 以上。活动各不相同，但每台服务器每天大约有 1,500,000 行新行，主要在 2 个表中。每个大约有 50 张桌子。每个站点的连接质量和带宽各不相同，但主站点有足够的带宽来并行处理许多站点。

我在考虑 SSIS，但不知道如何处理这个任务，而不是逐个表。任何人都可以提供任何指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T01:55:16.830

老实说，我建议使用 SQL 复制。我们经常这样做，它甚至可以通过拨号进行。它基本上最大限度地减少了所需的流量，因为只传输了更改。

有几种拓扑。我们只使用合并（两种方式），但事务性可能满足您的需求（一种方式）。

我们的环境是一个单一的中央数据库，复制（使用过滤的复制文章）到各种站点数据库。中央数据库是发布者。一旦到位，它就很健壮，但是对于架构升级来说是一件麻烦事。

但是，鉴于您的数据库不是同质的，在远程站点是发布者的地方设置它可能更容易，并且中央 SQL 实例有一个每个站点的数据库，它是站点发布者的订阅者。文章甚至不需要过滤。然后您可以集中处理各个站点数据。

请注意，站点数据库需要安装复制组件（它们在安装程序中通常是可选的）。要设置为发布者，他们还需要本地配置（在每个发布者上配置分发）。作为工作组版，它可以充当出版商。SQL express 不能充当发​​布者。

这听起来很复杂，但它实际上只是程序性的，并且是做这类事情的内置机制。

# events - 监听 Rally 缺陷状态变化

> ID：15836966
> 
> 赞同：1
> 
> 时间：2013-04-05T14:48:18.707
> 
> 标签：events, listener, rally

我正在研究为我的公司扩展 Rally 的功能。

这是我们想要做的：当用户更改缺陷的“状态”时，我们想要运行一些自定义代码。我想将一个侦听器附加到“状态”下拉字段，以便在状态更改时侦听器触发一些代码。

这可能吗？我一直在做一些研究，一切似乎都表明没有。

任何建议或指示或提示将不胜感激。

在此先感谢，布赖恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:13:25.980

我已经设置了一个重复的 Windows 计划任务，该任务执行一个脚本来查找此类更改。它正在轮询，但它运行得非常快，因为它正在寻找特定的标准（（state==XYZ）和（Children == nil））。

我相信使用新的 API，我可以将其更改为返回自上次轮询时间以来的结果（每次轮询时我都会存储该结果）。

高温高压

# javascript - 检查javascript中的变量是否是图像url

> ID：15836970
> 
> 赞同：1
> 
> 时间：2013-04-05T14:48:27.360
> 
> 标签：javascript, jquery, regex, json

我正在获取包含各种名称/值对的 json 数组。并且对于每个来自数据库的响应都不同。对于我得到的每个响应，一个名称/值对代表图像 url 信息。但问题是所有请求的名称都不是恒定的。即对于一个请求，它可以是：

`'imgurl':'http://l1.yimg.com/071153.jpg'`

对于其他人，它可以是任何具有不同名称的东西。比如：

`'imginf':'http://lre.ghamg.co.in/arecon.png'`.

我正在寻找一种方法来检查给定变量是否使用 javascript 或 jquery 表示图像 url（任何类型的图像）。如果他们可以帮助我，我正在寻找任何好的建议。

感谢您的光临...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:31:38.203

你的意思是这样的？

```
var fileName= {"imgurl": ["http://l1.yimg.com/071153.jpg"]};
var file = fileName['imgurl'][0]
var ext = file.substring(file.lastIndexOf('.') + 1);

if(ext ==="gif" || ext === "jpg" ||  ext === "png"|| ext === "BMP"){
alert('image');
} 
```

# python - Python - 在 List.Sort 中使用 Lambda

> ID：15836978
> 
> 赞同：3
> 
> 时间：2013-04-05T14:48:54.243
> 
> 标签：python, list, python-2.7, lambda

我正在尝试根据子列表中的第二个元素对列表列表进行排序。

样本数据：

```
 [[u'm3u33mm534o', 14, 23], [u'2w3dfbv333g', 20, 34], [u'7kv903nfjfr9', 0, 35]] 
```

种类：

```
 out.sort(key=lambda x: float(x[1])) 
```

错误：

```
TypeError: float() argument must be a string or a number 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:54:45.660

非常适合我...您的真实列表很可能包括第二个元素不可转换为浮点数的项目，例如：

```
>>> out = [[u'test', None, 35], [u'7kv903nfjfr9', 0, 35], [u'm3u33mm534o', 14, 23], [u'2w3dfbv333g', 20, 34]]
>>> x = out.sort(key=lambda x: float(x[1]))
...
TypeError: float() argument must be a string or a number 
```

要调试，只需执行类似的操作

```
for i in out:
    try:
        float(i[1])
    except TypeError:
        print "error is here:", i 
```

# git - 初始化 NetBeans 右键菜单中不存在的 Git 存储库

> ID：15836980
> 
> 赞同：0
> 
> 时间：2013-04-05T14:49:13.123
> 
> 标签：git, netbeans

我对 NetBeans 7.0 非常陌生，并且刚刚安装了它。我看过一个教程，它应该允许我在 NetBeans 中创建一个 Git 存储库。

但是当我转到项目名称并右键单击“初始化 Git 存储库..”时，列出的版本控制系统中不存在。

可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:11:37.953

在 Netbeans 7 IIRC 中，git 支持位于[plugin](http://plugins.netbeans.org/plugin/37577/git-versioning-system-support)中。检查是否已安装，请转到：

> 工具 -> 插件

搜索`git`插件并安装它。从 Netbeans 7.2 开始，IDE 中集成了 git 支持。

# r - 基于R中另一列的值乘以数据框列值

> ID：15836982
> 
> 赞同：-1
> 
> 时间：2013-04-05T14:49:18.203
> 
> 标签：r, dataframe

我在 R 中有一个数据框（150000 obs，15 个变量），需要根据另一个变量的值更正一个变量的值的子集（只需乘以一个常数）。有什么简单的方法可以做到这一点？

我虽然 apply 会起作用，但我不确定如何编写函数（显然不能在函数中相乘）和限定符：

```
df$RESULT <- df[apply(df$RESULT, 1, function(x * 18.01420678) where(SITE==1)), ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:54:27.547

你是这个意思？

```
dat      <- data.frame(x=1:10,y=sample(20,10))
constant <- 100
dat$y    <- ifelse(dat$x > dat$y, dat$y*constant, dat$y) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:17:27.260

您可以使用“[”的容量来进行子集设置，但对于子集的“更正”，您需要使用在赋值两侧定义子集的逻辑表达式。由于您将只使用需要更正的值，因此您无需使用任何进一步的条件函数。

```
df[ df$SITE==1, "RESULT" ] <- df[ df$SITE==1, "RESULT"] * 18.01420678 
```

如果要对大量（数百万）个案例进行操作或在模拟中重复进行操作，这种方法可能比该`ifelse`方法快得多

# ios - UIScrollView 的奇怪行为

> ID：15836990
> 
> 赞同：1
> 
> 时间：2013-04-05T14:49:44.157
> 
> 标签：ios, objective-c, cocoa-touch

我做了一个`UIScrollView`宽度随着触摸而变化的。当当前视图控制器切换到下一个时，我想保存 UIScrollView 的宽度。当视图控制器再次显示时，`UIScrollView`应该恢复 ' 的宽度。

```
//TouZiViewController is the current view controller
@implementation TouZiViewController
...
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"toTouZi2"])
    {   //TouZi2ViewController is the destination view controller
        TouZi2ViewController *viewController2=[segue destinationViewController];

        //huatiaoRect is CGRect,fullHuaTiao is the outlet of UIScrollView
        viewController2.huatiaoRect=self.fullHuaTiao.frame;

    }
}
@end

@implementation TouZi2ViewController
...
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"toTouZi"])
    {
        TouZiViewController *viewController=[segue destinationViewController];
        [viewController loadView];

        viewController.fullHuaTiao.frame=self.huatiaoRect;

    }

}
@end 
```

问题是当我从第二个视图控制器回来时，`UIScrollView`' 的位置比以前高得多。为什么是这样？ **更新** 现在我发现问题是由于自动调整大小。我在情节提要中更改了自动调整大小，然后效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:14:00.310

我认为问题可能是在设置框架之前调用 loadview 方法。如果没有记录框架值并找到值更改的位置

改成这个并试一试

```
 viewController.fullHuaTiao.frame=self.huatiaoRect;
    [viewController loadView]; 
```

# java - 尖括号作为返回类型的一部分意味着什么？ 吨

> ID：15836991
> 
> 赞同：1
> 
> 时间：2013-04-05T14:49:46.547
> 
> 标签：java, generics

对于此方法，该`<T>`部分作为此方法的返回类型的一部分意味着什么？是我要指定`.class`文件的地方吗？它甚至是返回类型定义的一部分吗？它的用途是什么？它是定义第二个参数要使用的类类型`Class<T> requiredType`还是不用于参数定义？

```
public <T> T queryForObject(String sql, Class<T> requiredType, Map<String, ?> args) throws DataAccessException {
    return getNamedParameterJdbcOperations().queryForObject(sql, args, requiredType);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T14:54:50.660

```
public <T> T queryForObject(String sql, Class<T> requiredType, Map<String, ?> args) throws DataAccessException { 
```

1.  `<T>`---> 不是您在方法级别声明泛型类型的返回类型，因此您可以在方法中使用此类型`T`。
2.  T ----> 是您的方法的返回类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:56:50.903

`<T>`只是定义一个泛型类型`T`，然后可以在您的方法签名中引用。没有它，您的代码将无法编译。

# c# - 在应用程序配置文件中找不到名为“thenameofmyconnection”的连接字符串

> ID：15836992
> 
> 赞同：6
> 
> 时间：2013-04-05T14:49:48.080
> 
> 标签：c#, entity-framework, azure

我正在使用实体框架和天蓝色，我在一个 Web 角色中获得了一个 WCF，它使用了带有实体框架的项目中的方法..似乎我将连接字符串放在了错误的文件上，或者我错误地定义了它..如下：

```
<connectionStrings>
  <!-- Windows Azure SQL Database Connection String -->

  <add name="AMTEntitiesContainer" 
   connectionString="here goes my connection string" 
   providerName="System.Data.EntityClient" />

</connectionStrings> 
```

这是在我的实体库项目中的 app.config 文件中。它应该进入我的 webrole 的配置吗？还是应该进入我的 WCF 服务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T14:58:21.333

连接字符串应该在 WCF 服务的 web.config 中。EntityFramework 项目将在进程中执行。WCF 服务是正在运行的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:10:44.790

[这](http://msdn.microsoft.com/en-us/library/ms254494.aspx)也有助于理解这些事情。

我很抱歉这篇文章，我还不能写评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:07:36.210

如果是与 Azure 交互的 WebService，则需要将其移动到其 Web.config 中。如果是应用程序，您还有另一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-12T15:45:31.350

我有这个，仅仅是因为我错误地创建了我的模型。我做错了：

`var model = new ModelName;`

而不是正确地做：

`var model = ModelName.Create();`

所以这个错误可能会因为一个简单的原因而抛出