# StackOverflow 问答 15308000-15308999

# java - Solr：使用多个单词查询字段时，默认OR运算符返回不相关的结果

> ID：15308000
> 
> 赞同：3
> 
> 时间：2013-03-09T06:32:23.400
> 
> 标签：java, search, solr, lucene

如果所有搜索关键字出现在任何搜索字段中的任何位置，我需要让基于 Solr 的搜索返回结果。

目前的情况：

示例搜索查询：`keywords: "berlin house john" name: "berlin house john" name" author: "berlin house john" name"`

假设只有一个结果，keywords="house"、name="berlin" 和 author="john"，并且这三个词没有其他可能的排列。

如果 defaultOperator 是 OR，Solr 会返回每个字段中每个关键字的简单 OR-ing，这是一个巨大的列表，其中最好的匹配结果当然是在第一个位置，但接下来的结果几乎没有相关性（也许只有一个字段匹配），它们只会让用户感到困惑。

另一方面，如果我将默认运算符切换为 AND，我绝对不会得到任何结果。我想它是试图在所有三个领域中找到所有三个单词的完美匹配，这当然不存在。

搜索词从搜索输入进入应用程序，用户在其中编写自由文本 - 没有特定的语言约定（主题标签或其他东西）。

我知道我要问的问题是可能的，因为我以前用纯 Lucene 做过，而且效果很好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:29:13.500

如果您只需要确保所有单词都出现在所有字段中，我建议您在索引时将所有相关字段复制到一个字段中，然后查询该字段。为此，您需要引入一个新字段，然后将其`copyField`用于要复制的所有源字段。要复制所有字段，请使用：

```
<copyField source="*" dest="text"/> 
```

有关详细信息，请参阅[http://wiki.apache.org/solr/SchemaXml#Copy_Fields](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)。

类似的方法是在查询时使用布尔代数。这与上述解决方案有点不同。

您的查询应如下所示

```
(keywords:"berlin" OR keywords:"house" OR keywords:"john") AND
(name:"berlin" OR name:"house" OR name:"john") AND
(author:"berlin" OR author:"house" OR author:"john") 
```

它基本上规定：一个或多个词必须在*关键字*中匹配，一个或多个词必须在*名称*中匹配，一个或多个词必须在*作者*中匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:28:26.743

从 Solr 4 开始，不推荐使用 defaultOperator。请不要使用它。同样对我来说 defaultOperator 与查询中的指定运算符相同。我不能说为什么会这样，这只是我的经验。

请尝试使用参数 {!q.op=AND} 进行查询

我猜你使用默认查询解析器，如果我错了，请纠正我

# ios - ios后台任务-解释执行顺序？

> ID：15308001
> 
> 赞同：0
> 
> 时间：2013-03-09T06:32:29.800
> 
> 标签：ios, background, objective-c-blocks

有人可以在 applicationDidEnterBackground 中解释执行顺序吗？

```
UIBackgroundTaskIdentifier background_task;
background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {

    [application endBackgroundTask: background_task]; 
    background_task = UIBackgroundTaskInvalid; 
}];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSLog(@"\n\nRunning in the background!\n\n");
    [application endBackgroundTask: background_task]; 
    background_task = UIBackgroundTaskInvalid; 
}); 
```

我的理解是

1.  为后台任务创建标识符并分配将在时间（10 分钟左右）到期时调用的块
2.  dispatch async 方法，输出 NSLog。在此期间，可以使用应用程序的所有其他方法
3.  NSLog out 后立即终止后台任务，不等待系统默认过期

具体来说，在我调用 NSLog

```
[application endBackgroundTask: background_task]; 
background_task = UIBackgroundTaskInvalid; 
```

任务将被终止，expirationHandler 块将不会被调用。

我也觉得我的理解有误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:38:57.870

除了一个重要细节外，关于您的帖子的所有内容基本上都是正确的。`applicationDidEnterBackground`这些都与应用程序委托方法无关。

应用程序中任何可能需要几秒钟以上的任务都应该包含在对 and 的调用`beginBackgroundTaskWithExpirationHandler`中`endBackgroundTask`。

在这两种方法中包装代码的全部目的是通知操作系统您有一些需要继续运行的处理，即使应用程序在运行时碰巧进入后台也是如此。如果没有这些块，您的应用程序将在尝试在后台运行几（10？）秒后被操作系统杀死。

# asp.net-mvc - 特定类型的 mvc4 webapi 自定义 json 序列化程序

> ID：15308008
> 
> 赞同：4
> 
> 时间：2013-03-09T06:32:55.163
> 
> 标签：asp.net-mvc, json, c#-4.0, deserialization, json.net

我知道 MVC4 使用 NewtonSoft Json 反序列化。我想知道如何在不使用任何数据注释（如 JsonIgnore/DataMemberIngore 等）的情况下将序列化属性排除到客户端（该程序集在其他地方使用并且无法更改。我可以实现自定义格式化程序/JsonSerializerSettings/Dynamic ContractResolver等针对特定对象类型，然后过滤掉特定属性名称？

非常感谢任何帮助。

编辑。想出了以下作为第一次尝试。如果有人有更优雅的解决方案，请告诉我......

```
public class DynamicContractResolver : DefaultContractResolver
{
    public DynamicContractResolver()
    {

    }

    protected override IList<JsonProperty> CreateProperties(Type type, Newtonsoft.Json.MemberSerialization memberSerialization)
    {

        IList<JsonProperty> properties = base.CreateProperties(type, Newtonsoft.Json.MemberSerialization.Fields);

        if (type == typeof(SomeType))
        {
            var matchedProp = properties.Where(v=> v.PropertyName=="SomeProperty").FirstOrDefault();
            if (matchedProp!=null)
            {
                properties.Remove(matchedProp);
            }
        }

        return properties;
    }
} 
```

深入到 global.asax：

```
HttpConfiguration config = GlobalConfiguration.Configuration;
JsonSerializerSettings serializerSetting = new JsonSerializerSettings
        {
            ContractResolver = new DynamicContractResolver(),
            ReferenceLoopHandling = ReferenceLoopHandling.Serialize
        };

config.Formatters.JsonFormatter.SerializerSettings = serializerSetting; 
```

问候菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:55:38.450

## 这可以通过适当的覆盖来解决

1.  覆盖MVC类`Json`中的函数。`Controller`在这个类中，您可以自定义数据。（使用另一个映射，使用反射，...）

2.  创建一个自定义的 JsonResult 类，只需覆盖默认的类。您还可以在那里覆盖正在进行的默认序列化。

    现在：

    *   当您已经有一个 JSON 序列化字符串时，您可以排除这些数据......这将是最简单的选择。基本上只是字符串操作。
    *   另一方面，您还可以调用自定义 NewtonSoft 序列化，您可以在那里做任何您想做的事情......甚至使用自定义序列化。

# javascript - Backbone.js 模型不从集合继承

> ID：15308013
> 
> 赞同：0
> 
> 时间：2013-03-09T06:33:57.187
> 
> 标签：javascript, jquery, backbone.js, model, requirejs

我有一个名为的模型`score`和一个名为`scores`. 但是，该模型似乎没有`localStorage`从父集合继承属性（或就此而言，任何属性）。我在这里错过了什么吗？

使用 RequireJS 运行 Backbone。

**模型/score.js**

```
define([
    'underscore',
    'backbone',
    'localstorage'
], function(_, Backbone, Store){
    var ScoreModel = Backbone.Model.extend({
        defaults: {
            board_id: null,
            ns_pair: null,
            ew_pair: null,
            ns_score: null
        },
        validate: function(attrs, options){
            if( isNaN(attrs.board_id) || attrs.board_id < 1 ){
                return 'Invalid Board ID!';
            }
        },
        localStorage: new Store("ScoreCollection")
    });
    return ScoreModel;
}); 
```

**集合/scores.js**

```
define([
    'underscore',
    'backbone',
    'models/score',
    'localstorage'
], function(_, Backbone, ScoreModel, Store){
    var ScoreCollection = Backbone.Collection.extend({
        model: ScoreModel,
        localStorage: new Store("ScoreCollection")
    });
    return ScoreCollection;
}); 
```

**main.js**

```
require.config({
  paths: {
    // Major libraries
    jquery: 'libs/jquery/jquery.min',
    underscore: 'libs/underscore/underscore.min',
    backbone: 'libs/backbone/backbone.min',

    // Require.js plugins
    text: 'libs/require/text',

    // Backbone.js plugins
    localstorage: 'libs/backbone/localstorage',

    // Just a short cut so we can put our html outside the js dir
    // When you have HTML/CSS designers this aids in keeping them out of the js directory
    templates: '../templates'
  }
});

// Let's kick off the application

require([
  'app'
], function(App){
  App.initialize();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:38:21.777

骨干模型不继承骨干集合。它们只是您使用自己的属性和方法“扩展”的基本 Backbone.Model 的扩展。收藏，同样的交易。您可以指定集合的​​模型基于您定义的特定模型，以便在将集合添加到其中时，它使用模型构造函数为该集合中的每个模型创建实例，但那里没有直接的继承关系。如果适合您的需要，您可以在恰好是集合实例的模型上定义一个属性。

# c# - 如何在 C# 中绘制形状以制作俄罗斯方块克隆？

> ID：15308014
> 
> 赞同：2
> 
> 时间：2013-03-09T06:33:58.603
> 
> 标签：c#, drawing, windows-applications, tetris

我首先要指出的是，我在这个小项目中没有使用任何 XNA 或 LINQ。基本上，我想使用 C# windows 应用程序克隆俄罗斯方块。我已经画出了我的网格，我的图片框大小为 250x500，使每个方块为 25 像素 x 25 像素。

现在，我是画形状的业余爱好者。我可以在网格上画线和矩形、圆形、椭圆和多边形，我可以用颜色等填充它们。就是这样。我不能用绘画做很多其他事情。换句话说，基本形状，使用我创建的点来绘制多边形，例如俄罗斯方块中的“T”形。

我的问题是，在制作我的俄罗斯方块形状时，我应该使用 C# 中的绘图方法绘制它们，还是应该创建和导入俄罗斯方块形状的位图图片并使用它们来创建我的俄罗斯方块克隆？

一旦我能弄清楚如何绘制形状，剩下的我就可以自己弄清楚了。另外，在游戏网格上工作时，我是否从我的名为 GameGrid 的类中继承 Picturebox 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:48:48.203

渲染形状的方式将对碰撞检测产生影响。例如，如果您是`T`形状的位图，则必须有一种方法来检测何时`T`发生碰撞，可能是每像素碰撞或保持特定形状的单独结构。然而，如果您只是维护一个正在使用的块的列表，那么碰撞检测就会变得简单得多。

如果您将形状设置为块矩阵，就像原始游戏一样，您可能会发现渲染、处理和碰撞要容易得多。

例如，看看下面的伪代码：

```
class Shape
{
    bool [3][3] Blocks;

    Pos pos;
}

Shape T = new Shape();

T.Blocks[0][0] = true;
T.Blocks[0][1] = true;
T.Blocks[0][2] = true;

T.Blocks[1][0] = false;
T.Blocks[1][1] = true;
T.Blocks[1][2] = false;

T.Blocks[2][0] = false;
T.Blocks[2][1] = true;
T.Blocks[2][2] = false; 
```

渲染时，您可以执行以下操作：

```
foreach(Shape s in currentBlocks)
{
    for(int x = 0; i < 3)
    {
        for(int y = 0; y < 3; y++)
        {
            if(s.Blocks[x][y])
            {
                gameGrid.Render(s.Pos.X + x, s.Pos.Y + y);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:39:05.783

使用位图和预渲染图像是首选，因为它可以加快每一帧的渲染速度。这是大多数此类游戏所做的。

# jquery - 在滑块中使用 css 类更改 img 不透明度

> ID：15308015
> 
> 赞同：0
> 
> 时间：2013-03-09T06:34:06.740
> 
> 标签：jquery, html, css, slider, image

我正在按照教程设计一个简单的滑块，我决定混合一些东西，但遇到了麻烦。滑块教程应该使用翻译来左右滑动图像，但我想使用不透明度值和堆栈图像的变化，所以我不需要使用翻译，也许使用过渡来平滑不透明度处的效果改变。我使用 div 完成了以下操作，但在对图像使用相同的过程时遇到了问题。这是我到目前为止所完成的：http: [//jsfiddle.net/6nLx5/1/](http://jsfiddle.net/6nLx5/1/)。转换应该发生在您单击图像 1、图像 2、图像 3 和图像 4 文本的那一刻。以下是所选图像的 css

```
img_selected{
    z-index:+11;
    -webkit-opacity: 1.0;
    -moz-opacity: 1.0;
    opacity: 1.0;
    -webkit-transition: opacity 2s ease;
    -moz-transition: opacity 2s ease;
    -o-transition: opacity 12s ease;
    transition: opacity 2s ease;
} 
```

以下代码适用于滑块中未选择的图像。

```
.slider-photos img {
    position: absolute;
    width: 1000px;
    height: 500px;
    padding: 0;
    margin: 0;
    -webkit-opacity: 0.0;
    -moz-opacity: 0.0;
    opacity: 0.0;
    z-index:+10;
    -webkit-transition: all 3s ease;
    -moz-transition: all 3s ease;
    -ms-transition: all 3s ease;
    -o-transition: all 3s ease;
    transition: all 3s ease;
} 
```

图像的不透明度为 0，因为使用 jquery 的类激活应该使它们可见，此时类被切换。希望我很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:14:18.170

这是一个特殊性的问题。img_selected 的特异性低于 .slider-photos img 所以后者的不透明度是“赢家”。

您可以解决在选定属性中添加重要的问题：

```
.img_selected {
    z-index:+11;
    opacity: 1 !important; 
```

我知道，这是一种不流行的解决方法，但它更快更容易。更被接受的方法是设置一个更具体的选择器，如

```
.slider-photos img.img_selected {
    opacity: 1; 
```

## [更新的小提琴](http://jsfiddle.net/6267b/1/)

# jquery - 通过带有表单提交的ajax jQuery post保存数据

> ID：15308017
> 
> 赞同：12
> 
> 时间：2013-03-09T06:34:14.767
> 
> 标签：jquery, ajax

我有一个表单，我想通过 ajax jQuery post 保存数据。如果保存按钮是`type="submit"`，它不会做任何这只是空警报...我想保存数据并保持在具有刷新字段的相同表单上...

这是我尝试过的：

```
$("#saveNewContact").click(function () {
  var name       = $("#name").val(); 
  var last_name  = $("#last_name").val();
  $.post("ajax_files/save_mydeals.php", {name: name, last_name: last_name},
   success: function(msg){ 
     alert(msg);
  });
 }); 
```

这是我的表格

```
<form id="myForm" action="#" method="post">
<table id="table_1" class="form_table" align="center" cellpadding="0" cellspacing="0">
<tbody>
  <tr><td>
    <input  name="name"  id="name" value="" tabindex="5" readonly="" type="text">
    <input  name="name"  id="name" value="" tabindex="5" readonly="" type="text"> 
    <button type="submit" id="update" style="display:none;" 
     class="save_button saveHEX" name="Update" 
     value="Update Listing">Save Lead</button></td>
  </tr>
 </table>
 </form> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T06:47:39.307

这样做

HTML

```
<form name="frm" method="POST" action="">
 <input type="text" name="name" id="name" value="" />
 <input type="text" name="last_name" id="last_name" value="" />
 <input type="submit" name="Update" id="update" value="Update" />
</form> 
```

你的 jQuery

```
$("#update").click(function(e) {
  e.preventDefault();
  var name = $("#name").val(); 
  var last_name = $("#last_name").val();
  var dataString = 'name='+name+'&last_name='+last_name;
  $.ajax({
    type:'POST',
    data:dataString,
    url:'insert.php',
    success:function(data) {
      alert(data);
    }
  });
}); 
```

所以在`insert.php`页面

```
<?php
  $name = $_POST['name'];
  $last_name = $_POST['last_name'];
  $insert = "insert into TABLE_NAME values('$name','$last_name')";// Do Your Insert Query
  if(mysql_query($insert)) {
   echo "Success";
  } else {
   echo "Cannot Insert";
  }
?> 
```

希望这给出一个想法

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-09T06:50:23.050

您不需要单击事件来移除`$("#saveNewContact").click(function () {`并使用`.submit()`jQuery 方法。

还可以使用 .serialize，它允许您使用值序列化表单字段并创建 urlencoded 数据字符串。

```
$("#myForm").on("submit",function (e)
{
    e.preventDefault();
    var formData = $(this).serialize();
    $.ajax(
    {
        type:'post',
        url:'receiver url',
        data:formData,
        beforeSend:function()
        {
            launchpreloader();
        },
        complete:function()
        {
            stopPreloader();
        },
        success:function(result)
        {
             alert(result);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T06:46:23.773

而是绑定表单的提交并且在 $.post 中没有成功，该功能就足够了：

```
$(function() {
  $("#myForm").on("submit",function (e) {
    e.preventDefault(); // stop the normal submission
    var name       = $("#name").val(); 
    var last_name  = $("#last_name").val();
    $.post("ajax_files/save_mydeals.php", {name: name, last_name: last_name},
     function(msg){ 
       alert(msg);
       $("#name").empty(); 
       $("#last_name").empty();
    });
   });
 }); 
```

# php - 如何制作一个包含数字 0 和 1 的所有列表长度 x 的数组？

> ID：15308025
> 
> 赞同：0
> 
> 时间：2013-03-09T06:35:27.957
> 
> 标签：php

我需要创建一个这样的数组：

```
$array = array(array(1,1,1,0,0,0,1,1), array(1,1,1,1,0,0,1,0)); 
```

但所有 1 和 0 的组合。

我希望自动执行此操作，因此我认为 for 循环将是最好的主意。换句话说，内部数组应该是所有组合，例如 0,0,0,0,0,0,0,0 然后 0,0,0,0,0,0,0,1 然后 0,0,0,0 ,0,0,1,0 然后 0,0,0,0,0,0,1,1。对于所有组合。我是这样开始的：

```
$array = array();
for($i =0;$i<100; $i++){
$array[$i] = 0;
} 
```

我怎样才能让它做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:37:51.357

用于[`decbin`](http://php.net/manual/en/function.decbin.php)将您的计数器转换为二进制。

[`str_pad`](http://php.net/manual/en/function.str-pad.php)允许您填充字符串，在这种情况下，我将 0 填充为 8 位的长度。

```
$array = array();
for($i =0;$i<100; $i++){
    $array[$i] = str_pad(decbin($i), 8, "0", STR_PAD_LEFT);;
}
var_dump($array); 
```

[演示](http://codepad.org/Z6aqKGKY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:17:22.133

这将打印出所有二进制变量的数组，从`00000000`每个`11111111`变量在它自己的字符数组中的位置。

```
$array = array();

for ($i = 0; $i < 256;)
{
    $array[] = str_split(sprintf('%08d', decbin($i++)));
}
print_r($array); 
```

查看**[示例](http://viper-7.com/IFLNE1)**

# ruby-on-rails - Rails 3.2 中没有路线匹配错误

> ID：15308043
> 
> 赞同：0
> 
> 时间：2013-03-09T06:38:45.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, ruby-on-rails-3.2

我收到以下错误

```
No route matches {:action=>"show", :controller=>"settings", :format=>nil} 
```

在尝试实施设置/新建时。

我的 settings/new.html 如下：

```
<h1>New setting</h1>

<%= form_for @setting  do |f| %>
  <% if @setting.errors.any? %>  
  <div id="errorExplanation">  
    <h2><%= pluralize(@setting.errors.count, "error") %> prohibited this setting from being saved:</h2>  
    <ul>  
    <% @setting.errors.full_messages.each do |msg| %>  
      <li><%= msg %></li>  
    <% end %>  
    </ul>  
  </div>  
  <% end %> 
</br></br>

Id: <%= f.text_field :id %><br>
Name: <%= f.text_field :name %><br>

<%= f.submit "Create" %>&nbsp;&nbsp;

<% end %> 
```

我的 routes.rb 设置文件是：

```
resources :settings do
    member do
     post 'add'
     post 'remove'
     get 'settings/id'
    end

    collection do
     get  'add'
     get  'list' => "settings#index"
     post 'get_settings'
     get  'get_settings'
    end
  end

  resources :settings 
```

我的设置控制器：

```
class SettingsController < ApplicationController
  # GET /Settings
  # GET /Settings.json
  def index
    @settings = Setting.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @settings }
    end
  end

  # GET /Settings/1
  # GET /Settings/1.json
  def show
    @setting = Setting.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @setting }
    end
  end

  # GET /Settings/new
  # GET /Settings/new.json
  def new
    @setting = Setting.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @setting }
    end
  end

  # GET /Settings/1/edit
  def edit
    @setting = Setting.find(params[:id])
  end

  # POST /Settings
  # POST /Settings.json
  def create
    @setting = Setting.new(params[:setting])

    respond_to do |format|
      if @Setting.save
        format.html { redirect_to @setting, notice: 'Lov value was successfully created.' }
        format.json { render json: @setting, status: :created, location: @setting }
      else
        format.html { render action: "new" }
        format.json { render json: @setting.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /Settings/1
  # PUT /Settings/1.json
  def update
    @setting = Setting.find(params[:id])

    respond_to do |format|
      if @Setting.update_attributes(params[:setting])
        format.html { redirect_to @setting, notice: 'Lov value was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @setting.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /Settings/1
  # DELETE /Settings/1.json
  def delete
    @setting = Setting.find(params[:id])
    @setting.deleted = 1
    @setting.save

    respond_to do |format|
      format.html { redirect_to settings_url }
      format.json { render :json => { :success => true } }
    end
  end
end 
```

我的耙子路线如下：-

```
 add_settings POST   /settings/:id/add(.:format)            settings#add

            remove_settings POST   /settings/:id/remove(.:format)         settings#remove

       settings_id_settings GET    /settings/:id/settings_id(.:format)    settings#settings_id

         add_settings_index GET    /settings/add(.:format)                settings#add

        list_settings_index GET    /settings/list(.:format)               settings#index

get_settings_settings_index POST   /settings/get_settings(.:format)       settings#get_settings

                           GET    /settings/get_settings(.:format)     settings#get_settings

                            GET    /settings(.:format)                    settings#index

                            POST   /settings(.:format)                    settings#create

                            GET    /settings/new(.:format)                settings#new

                            GET    /settings/:id/edit(.:format)           settings#edit

                            GET    /settings/:id(.:format)                settings#show

                            PUT    /settings/:id(.:format)                settings#update

                            DELETE /settings/:id(.:format)                settings#destroy

                            GET    /settings(.:format)                    settings#index

                            POST   /settings(.:format)                    settings#create

                            GET    /settings/new(.:format)                settings#new

                            GET    /settings/:id/edit(.:format)           settings#edit

                            GET    /settings/:id(.:format)                settings#show

                            PUT    /settings/:id(.:format)                settings#update

                            DELETE /settings/:id(.:format)                settings#destroy 
```

请检查并告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:01:37.687

成功保存后，您的`Create`操作将重定向到。`Show`

但是，即使您的控制器有方法，您`routes.rb`也没有 的条目。`Show``Show`

您可以尝试运行此命令`rake routes`吗？这将列出您的 rails 应用程序的所有有效路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:45:33.177

你只需要在你的路由文件中使用资源 :settings，rails RESTFUL 路由会处理所有事情。您不需要显式声明用于 restful 路由的 HTTP 动词。
同样在您的控制器的创建和更新操作中使用@setting 而不是@Setting。

# text - 在 ubuntu 中读取复合文档文件 V2 文档 (.msg) 文件

> ID：15308052
> 
> 赞同：12
> 
> 时间：2013-03-09T06:39:56.733
> 
> 标签：text, encoding, msg

我有一个完全来自 .msg 文件的 Outlook 电子邮件帐户的大量数据转储。对 ubuntu 的 file 方法的快速调用显示它们是 Composite Document File V2 Documents（不管是什么意思）。我真的很希望能够以纯文本形式读取这些文件。这有可能吗？

更新：事实证明，在这类文件上进行大规模数据挖掘并不是完全可能的，这很糟糕。如果您遇到同样的问题，我创建了一个库来解决这个问题。[https://github.com/Slater-Victoroff/msgReader](https://github.com/Slater-Victoroff/msgReader)

文档不是很好，但它是一个非常小的库，所以它应该是不言自明的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T10:27:21.740

今天早上我遇到了同样的问题。我没有找到有关文件格式的任何信息，但可以使用字符串和 grep 从文件中提取所需信息：

```
strings -e l *.msg | grep pattern 
```

-el（这是一个小 L）从 UTF-16 转换而来。

这仅在您可以从文件中 grep 所需数据时才有效（即所有必需的行都包含标准字符串或模式）。

# php - Codeigniter CI_SESSIONS 在窗口关闭时过期不起作用

> ID：15308055
> 
> 赞同：1
> 
> 时间：2013-03-09T06:40:06.080
> 
> 标签：php, codeigniter, session

我已经为此主题进行了很多搜索，但找不到我需要的有效解决方案。我正在使用 ci_sessions 将用户数据存储在 db 上，bt 当我关闭窗口而不是注销时，几个小时后我再次登录，然后我以前的会话也存储在 db 中，新会话也创建了重复的会话创建。我也使用这个属性

```
$config['sess_expire_on_close'] = TRUE; 
```

但它不起作用。我想在浏览器关闭时销毁会话。我正在使用 CI 最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:54:05.780

您可以`cookie`为此设置它将在浏览器关闭事件时过期，并且您可以检查您的网站，如果`cookie`不存在则销毁会话。

设置`cookie`如下：

```
setcookie("cookie_name", "cookie_value", ''); 
```

如果您不定义 cookie 销毁时间，那么它会在浏览器关闭后立即被销毁，以便为您提供帮助。

# java - 在 PaintComponent() 中进行两次 Graphics2D 缩放

> ID：15308057
> 
> 赞同：2
> 
> 时间：2013-03-09T06:40:25.560
> 
> 标签：java, line, scale, graphics2d, paintcomponent

为什么这段代码输出两行大小相同？

```
import java.awt.*;
import javax.swing.*;

public class G2Scale extends JPanel{
    public static void main(String args[]) {
        G2Scale g = new G2Scale();
        g.setPreferredSize(new Dimension(200, 200));

        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setContentPane(g);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g;

        g2.setColor(Color.BLUE);
        g2.scale(0.5, 1.0);
        g2.drawLine(5, 50, 100, 50);

        g2.setColor(Color.GREEN);
        g2.scale(1.0, 1.0);
        g2.drawLine(5, 100, 100, 100);

    }
} 
```

我希望这些线的大小不同，因为它们的缩放比例不同。从我所看到的情况来看，我认为该比例是基于以前的比例。我是对的吗？

如果这是真的，我将如何将第二行缩放到我认为应该的样子？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T06:50:45.330

您在对象上调用的所有`Graphics`不输出内容而是更改其属性（如`setColor`、`setFont`等）的方法都存储在图形对象的上下文中。实际上，您应该将`Graphics`实例视为*图形上下文*，其中包含并抽象了您需要绘制到屏幕中的所有信息。

所以基本上，是的，你的第二个比例是基于第一个，因为第一个改变了图形上下文，第二个在它之上起作用。

有两种方法可以改变这种行为：

1.  `Graphics`通过应用与第一次更改相反的内容（在本例中为反向缩放）来重置您的实例的状态。
2.  在应用任何上下文更改之前制作对象的副本**。**`Graphics`

我更倾向于第二种选择，但这里有一些例子：

```
Graphics2D g2 = (Graphics2D) g;

// resetting the context state
g2.scale(0.5, 1.0);
g2.drawLine(5, 50, 100, 50);
g2.scale(2, 1.0);

// using a copy of the context
// note: casting is mandatory since 'create' returns a Graphics object
Graphics2D g2copy = (Graphics2D)g2.create(); 
g2copy.scale(1.0, 1.0);
g2copy.drawLine(5, 100, 100, 100);

// this one doesn't have any scale applied
g2.drawLine(5, 150, 100, 150); 
```

# c++ - C++ 数组和函数

> ID：15308058
> 
> 赞同：0
> 
> 时间：2013-03-09T06:40:26.073
> 
> 标签：c++, arrays

如何制作一个接收数组作为参数的正确函数？在下面的代码中，结果应该是 36，但在我的函数中只显示 4。它似乎只传递了第一个元素。

```
void test(float v[]){
    printf("size: %d\n", sizeof(v)); //RESULT: 4
}

int main(){
    GLfloat vv[] = {
        0, 0, 0,
        1, 1, 0,
        1, 0, 0
    };
    printf("size: %d\n", sizeof(vv));  //RESULT: 36
    test(vv);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T06:41:42.990

当您将数组作为参数传递时，它会衰减为指向第一个元素的指针。
`sizeof`给你指针的大小而不是数组。

最简单的解决方案是将大小作为单独的参数传递给函数。

```
void myFunction(float[] array, size_t size); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T08:41:17.457

> 如何制作一个接收数组作为参数的正确函数？

如果数组在编译时具有已知的大小，如您的示例所示，则可以使用模板函数。此示例通过 const 引用获取数组元素：

```
template< class T, size_t N >
void foo( const T (&data)[N] )
{
  // length of array is N, can access elements as data[i]
}

int main(){
  GLfloat vv[] = {
    0, 0, 0,
    1, 1, 0,
    1, 0, 0
  };

  foo(vv);
} 
```

这就是这个问题的字面答案。我会使用具有清晰复制、分配和引用语义的类型，例如`std::array`：

```
template <size_t N>
void foo(const std::array<GLfloat, N>& data)
{
   // data looks like a C array, but has size() and many other methods
}

int main(){
  std::array<GLfloat, 9>{
      { 0, 0, 0,
        1, 1, 0,
        1, 0, 0 }
  };

  foo(vv);
} 
```

# objective-c - 使用情节提要在xcode中的两个视图控制器之间传递数据

> ID：15308059
> 
> 赞同：1
> 
> 时间：2013-03-09T06:40:44.550
> 
> 标签：objective-c, xcode, xcode-storyboard

一般来说，我对编程非常陌生。我正在尝试制作一个非常简单的应用程序。

我正在尝试使用情节提要将数据从一个视图控制器传递到另一个视图控制器。在我的第一个屏幕上，我有一个文本字段和一个按钮，然后在您按下按钮后，我希望使用您在文本字段中输入的任何文本来更新第二个屏幕的标签。

这是我的一些代码：

```
#import "FirstViewController.h"
#import "SecondViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

@synthesize secondviewData;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)passData:(UIButton *)sender {

//    SecondViewController *second = [[SecondViewController alloc] initWithNibName:nil bundle:nil];

    self.secondviewData = secondviewData;
    secondviewData.passedValue = input.text;

//    [self presentViewController:second animated:YES completion:nil];

    homeLabel.text = input.text;

}
@end

#import "SecondViewController.h"
#import "FirstViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

@synthesize passedValue;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    label.text = passedValue;

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

这是我的代码的链接：http: [//oberober.com/passingData/](http://oberober.com/passingData/)

到目前为止，无论我在第一个屏幕的文本字段中输入什么，第二个屏幕上的标签都会保持空白。

我觉得我错过了一个重要的概念？我可以查看任何提示或教程吗？

提前感谢，卡斯帕

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T06:46:19.777

`prepareForSegue`您使用第一个控制器的方法传递数据。这是我的一个应用程序中的一个示例，它显示了一个车辆对象正在传递给第二个控制器。
`CHRBodyViewController`是第二个控制器的类。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    CHRBodyViewController *body = [segue destinationViewController];
    body.vehicle = _vehicle;
    body.updated = YES;

} 
```

# xml - 让 XML / XSL 出现在浏览器中

> ID：15308060
> 
> 赞同：0
> 
> 时间：2013-03-09T06:40:44.737
> 
> 标签：xml, xslt, xslt-1.0

我正在尝试使用 XSL 将 xml 产品表转换为 CSV，但我无法在任何浏览器（Chrome、Safari 或 FF）中显示任何内容。我还将文件上传到我的实时服务器，但浏览器仍然没有呈现任何内容。

我看过其他类似的 SO 帖子（[如何在浏览器中查看 xsl 输出？](https://stackoverflow.com/questions/11951831/how-to-view-xsl-output-in-browsers)），并且已经更改了所提到的命名空间，但没有骰子。这里有什么明显的错误吗？

**XML 示例：**

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="onix2csv.xsl"?>
<!DOCTYPE ONIXMessage SYSTEM "http://www.editeur.org/onix/2.1/02/reference/onix-international.dtd">
<ONIXMessage>
<Product>
    <RecordReference>9780002556132</RecordReference>
    <NotificationType></NotificationType>
    <ProductIdentifier>
        <ProductIDType>03</ProductIDType>
        <IDValue>9780002556132</IDValue>
        </ProductIdentifier>
        <ProductIdentifier>
        <ProductIDType>15</ProductIDType>
        <IDValue>9780002556132</IDValue>
    </ProductIdentifier>
    <ProductForm>BB</ProductForm>
    <ProductFormDetail>B402</ProductFormDetail>
    <Title>
        <TitleType>01</TitleType>
        <TitleText>Fish Rots From The Head</TitleText>
        <TitlePrefix></TitlePrefix>
        <TitleWithoutPrefix>Fish Rots From The Head</TitleWithoutPrefix>
    </Title>
    <Website>
        <WebsiteLink>http://www.allenandunwin.com/default.aspx?page=94&amp;book=9780002556132</WebsiteLink>
    </Website>
    <MediaFile>
        <MediaFileTypeCode>04</MediaFileTypeCode>
        <MediaFileLinkTypeCode>01</MediaFileLinkTypeCode>
        <MediaFileLink>http://www.allenandunwin.com/BookCovers/resized_9780002556132_224_297_FitSquare.jpg</MediaFileLink>
    </MediaFile>
    <Contributor>
        <SequenceNumber>001</SequenceNumber>
        <ContributorRole>A01</ContributorRole>
        <PersonName></PersonName>
        <PersonNameInverted>Garratt, Bob</PersonNameInverted>
    </Contributor>
    <EditionNumber>1</EditionNumber>
    <NumberOfPages>0</NumberOfPages>
    <BICMainSubject>KJ</BICMainSubject>
    <AudienceCode></AudienceCode>
    <OtherText>
        <TextTypeCode>01</TextTypeCode>
        <Text></Text>
    </OtherText>
    <Imprint>
        <ImprintName>Profile Business</ImprintName>
    </Imprint>
    <Publisher>
        <PublishingRole>01</PublishingRole>
        <PublisherName>Allen &amp; Unwin</PublisherName>
    </Publisher>
    <PublishingStatus>07</PublishingStatus>
    <PublicationDate>20021101</PublicationDate>
    <YearFirstPublished>2002</YearFirstPublished>
    <Measure>
        <MeasureTypeCode>01</MeasureTypeCode>
        <Measurement>0</Measurement>
        <MeasureUnitCode>mm</MeasureUnitCode>
    </Measure>
    <Measure>
        <MeasureTypeCode>02</MeasureTypeCode>
        <Measurement>0</Measurement>
        <MeasureUnitCode>mm</MeasureUnitCode>
    </Measure>
    <Measure>
        <MeasureTypeCode>08</MeasureTypeCode>
        <Measurement>0</Measurement>
        <MeasureUnitCode>gr</MeasureUnitCode>
    </Measure>
    <SupplyDetail>
        <SupplierName>United Book Distributors</SupplierName>
        <SupplierRole>02</SupplierRole>
        <ProductAvailability>40</ProductAvailability>
        <ExpectedShipDate></ExpectedShipDate>
        <Stock>
            <OnHand>No Stock</OnHand>
            <OnOrder>No</OnOrder>
        </Stock>
        <PackQuantity>1</PackQuantity>
        <Price>
            <PriceTypeCode>02</PriceTypeCode>
            <PriceAmount>0</PriceAmount>
        </Price>
    </SupplyDetail>
    <MarketRepresentation>
        <AgentName>Allen &amp; Unwin</AgentName>
        <AgentRole>07</AgentRole>
        <MarketCountry>AU</MarketCountry>
        <MarketPublishingStatus>07</MarketPublishingStatus>
        <MarketDate>
            <MarketDateRole>01</MarketDateRole>
            <Date>20021101</Date>
        </MarketDate>
    </MarketRepresentation>
</Product> 
```

**XSL 内容：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:template match="/"> 
        <xsl:apply-templates select="Product" mode="header"/> 
        <xsl:apply-templates select="Product" mode="data"/> 
    </xsl:template>

    <!-- HEADER ROW -->

    <xsl:template match="Product" mode="header">
        <xsl:text>RecordReference</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>NotificationType</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>ProductIdentifier</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>ProductForm</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>ProductFormDetail</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>Title</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>Website</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>MediaFile</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>Contributor</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>EditionNumber</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>NumberOfPages</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>BICMainSubject</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>AudienceCode</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>OtherText</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>Imprint</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>Publisher</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>PublishingStatus</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>PublicationDate</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>YearFirstPublished</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>Measure</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>Measure</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>Measure</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>SupplyDetail</xsl:text><xsl:text>,</xsl:text>
        <xsl:text>MarketRepresentation</xsl:text>
        <xsl:text>&#10;</xsl:text>
    </xsl:template>

    <!-- DATA RECORDS -->

    <xsl:template match="Product" mode="data">
        <xsl:apply-templates select="Product"/>
    </xsl:template>

    <xsl:template match="Product">
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="RecordReference"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="NotificationType"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="ProductIdentifier"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="ProductForm"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="ProductFormDetail"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="Title"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="Website"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="MediaFile"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="Contributor"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="EditionNumber"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="NumberOfPages"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="BICMainSubject"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="AudienceCode"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="OtherText"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="Imprint"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="Publisher"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="PublishingStatus"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="PublicationDate"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="singular_field"><xsl:with-param name="fieldname" select="YearFirstPublished"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="Measure"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="Measure"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="Measure"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="SupplyDetail"/></xsl:call-template> <xsl:value-of select="','"/>
        <xsl:call-template name="plural_field_text"><xsl:with-param name="fieldname" select="MarketRepresentation"/></xsl:call-template>
        <xsl:text>&#10;</xsl:text>
    </xsl:template>

    <!-- HELPER FUNCTIONS -->

    <xsl:template name="plural_field_text">
        <xsl:param name="fieldname"/>
        <xsl:call-template name="singular_field">
            <xsl:with-param name="fieldname">
                <xsl:for-each select="$fieldname/*">
                    <xsl:value-of select="."/>
                    <xsl:if test="position() != last()">
                        <xsl:text>;</xsl:text>
                    </xsl:if>
                </xsl:for-each>
            </xsl:with-param>
        </xsl:call-template>
    </xsl:template>      

    <xsl:template name="singular_field">
        <xsl:param name="fieldname"/>

        <xsl:variable name="linefeed">
            <xsl:text>&#10;</xsl:text>
        </xsl:variable>

        <xsl:choose>

            <xsl:when test="contains( $fieldname, '&quot;' )">
                <!-- Field contains a quote. We must enclose this field in quotes,
                    and we must escape each of the quotes in the field value.
                -->
                <xsl:text>"</xsl:text>

                <xsl:call-template name="escape_quotes">
                    <xsl:with-param name="string" select="$fieldname" />
                </xsl:call-template>

                <xsl:text>"</xsl:text>
            </xsl:when>

            <xsl:when test="contains( $fieldname, ',' ) or
                contains( $fieldname, $linefeed )" >
                <!-- Field contains a comma and/or a linefeed.
                    We must enclose this field in quotes.
                -->
                <xsl:text>"</xsl:text>
                <xsl:value-of select="$fieldname" />
                <xsl:text>"</xsl:text>
            </xsl:when>

            <xsl:otherwise>
                <!-- No need to enclose this field in quotes.
                -->
                <xsl:value-of select="$fieldname" />
            </xsl:otherwise>

        </xsl:choose>
    </xsl:template>

    <xsl:template name="escape_quotes">
        <xsl:param name="string" />

        <xsl:value-of select="substring-before( $string, '&quot;' )" />
        <xsl:text>""</xsl:text>

        <xsl:variable name="substring_after_first_quote"
            select="substring-after( $string, '&quot;' )" />

        <xsl:choose>

            <xsl:when test="not( contains( $substring_after_first_quote,
                '&quot;' ) )">
                <xsl:value-of select="$substring_after_first_quote" />
            </xsl:when>

            <xsl:otherwise>
                <!-- The substring after the first quote contains a quote.
                    So, we call ourself recursively to escape the quotes
                    in the substring after the first quote.
                -->

                <xsl:call-template name="escape_quotes">
                    <xsl:with-param name="string" select="$substring_after_first_quote"
                    />
                </xsl:call-template>
            </xsl:otherwise>

        </xsl:choose>

    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:02:45.593

这里有两个主要问题。首先是这个模板：

```
<xsl:template match="/"> 
    <xsl:apply-templates select="Product" mode="header"/> 
    <xsl:apply-templates select="Product" mode="data"/> 
</xsl:template> 
```

`Product`不是根元素，因此这些`apply-templates`操作在空节点集上运行。您可以通过将此模板的第一行更改为：

```
<xsl:template match="/*"> 
```

同样在这里：

```
<xsl:template match="Product" mode="data">
  <xsl:apply-templates select="Product"/>
</xsl:template> 
```

该`Product`元素没有一个名为 的子元素`Product`，因此这`apply-templates`又是无作用的。您可以通过将第二行更改为：

```
 <xsl:apply-templates select="."/> 
```

或者通过删除整个模板并添加`mode="data"`到下一个模板。

如果这两个问题都得到解决，XSLT 将生成 CSV。

# twitter-bootstrap - 如何避免 twitter bootstrap 中的文本溢出？

> ID：15308061
> 
> 赞同：33
> 
> 时间：2013-03-09T06:40:46.837
> 
> 标签：twitter-bootstrap, css

我是 Twitter Bootstrap 的新手。我写了以下HTML：

```
<div class="span4">
   <span class="row-fluid hideOverflow">
   @Html.ActionLink(item.Name, "Details", new { id = item.Id }, new { @class = "JumpLinks", @style = "font-size:13px;font-weight:bold;" })
   </span>
</div> 
```

该类`CSS`是`hideOverflow`：

```
.hideOverflow
{
    overflow:hidden;
    white-space:nowrap;
    text-overflow:ellipsis;
} 
```

但它显示我的结果为： ![在此处输入图像描述](../Images/faa9fe1e0591bfb4d2370354bf9b879b.png)

然后我将“row-fluid”更改为`span12`，然后显示以下结果：

![在此处输入图像描述](../Images/addc7cd278860e533bed25ba86f950da.png)

为什么我的`hideOverFlow`班级不能与`row-fluid`班级合作？

为了获得与`row-fluid`班级相同的结果，我需要进行哪些更改？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T07:14:39.023

使html结构像这样...

```
<div class="span4">
   <span class="hideOverflow">@Html.ActionLink(item.Name, "Details", new { id = item.Id }, new { @class = "JumpLinks", @style = "font-size:13px;font-weight:bold;" })</span>
</div> 
```

CSS：-

```
.hideOverflow
{
    overflow:hidden;
    white-space:nowrap;
    text-overflow:ellipsis;
    width:100%;
    display:block;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-22T16:59:40.650

当然，问题的标题很宽泛……这取决于`Bootstrap`您正在使用的结构，因为它可能具有会干扰您的代码的 CSS 规则。

在我的情况下，我有一个带有`row-fluid`, `span#`s 和`label`CSS 类的结构，如下所示：

```
<div class="row-fluid">    
    <div class="span12">
        <div id="standard-placeholder" style="display: none;">
            @Html.Label(Localization.Title)
            <span class="label label-warning standard-description"></span>
        </div>
    </div>
</div> 
```

利用[SaurabhLP](https://stackoverflow.com/a/15308291/114029)提供的代码，我使用了这个为我完成的缩短`CSS`版本：

```
.standard-description {
    overflow: hidden;
    -ms-text-overflow: ellipsis;
    -o-text-overflow: ellipsis;
    text-overflow: ellipsis;
    display: block;
} 
```

当标题很长时，它`ellipsis`会在文本中正确放置一个。`span`

作为一个加号：如果你想使文本换行，那么你可以试试这个`CSS`：

```
.standard-description {

    white-space:pre-line;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T07:56:11.280

您没有在正确的地方使用 row-fluid ，这就是您看到问题的原因。Row-fluid 创建一个行，您可以在其中使用 span classes 创建列，并且由于 row-fluid 使用百分比，它会在大屏幕上扩展以填充所有可用的水平空间，并缩小列以防止它们垂直堆叠作为屏幕调整大小。

所以基本原则是这样使用 row-fluid ：

```
<div class="row-fluid">
   <div class="span4">
     <span class="hideOverflow">@Html.ActionLink(item.Name, "Details", new { id = item.Id }, new { @class = "JumpLinks", @style = "font-size:13px;font-weight:bold;" })</span>
      </span>
   </div>
</div> 
```

这就是为什么当您删除 row-fluid 并用 span12 替换它时，您的问题得到了解决。最好的做法是为 span 分配一个属性为 width :100% 的类，例如：

```
.text-span{
         {
    width: 100%;
  } 
```

然后在您的代码中使用它，例如：

```
 <div class="row-fluid">
      <div class="span4">
         <span class=" text-span hideOverflow">@Html.ActionLink(item.Name, "Details", new { id = item.Id }, new { @class = "JumpLinks", @style = "font-size:13px;font-weight:bold;" })</span>
      </span>
   </div>
</div> 
```

避免在 span4 中使用 span12 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T07:15:53.597

在您的 DIV 中添加 word-wrap: break-word。写这个：

```
.span4{
    width: 700px;
    word-wrap: break-word;
} 
```

# algorithm - 使用素数的非常大数的余数

> ID：15308063
> 
> 赞同：1
> 
> 时间：2013-03-09T06:40:48.573
> 
> 标签：algorithm, math

我遇到了一个问题，我需要使用质数找到一个非常大的数字的余数。实际的问题是数量很大，大约`10^100`. 所以我们不能将它存储在任何变量中，唯一的选择是将它存储在一个数组中。

现在我们需要使用素数 say 找到这个数字的余数`(10^9)+7`。

我想不出任何想法，有什么建议吗？

PS：编程语言是C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:40:35.583

一般来说，我会利用以下事实

```
a^n mod b == (a mod b)^n mod b 
```

所以在这个例子中，你可以计算

```
= 10^100 mod 10^9 + 7 = (10^10 mod 10^9 + 7)^10  mod 10^9 + 7

= (999999937) ^ 10 mod 10^9 + 7
= ((999999937) ^ 2 mod 10^9 + 7) ^ 5 mod 10^9 + 7
= 4900 ^ 5 mod 10^9 +7
= 226732710 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T06:44:09.727

什么编程语言？C/C++、Java、PHP、Perl、JavaScript... 都有某种形式的 Big Integer，它允许您拥有不超过以空字符结尾的字符串的最大长度的整数。实际语法取决于语言，但可能类似于：

```
$num = new BigInt("1234567891234567912346579865432165498765462132165498765431");
$prime = new BigInt("54657613216846346874321638743");
$mod = $num.mod($prime); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T11:17:51.107

十进制数（例如 1234）可以通过以下方式从其数字构建：

```
x=1;
x=x*10+2;
x=x*10+3;
x=x*10+4;//x=1234 
```

（你从最重要的数字开始，每次都取下一个）。

由于加法和乘法允许将模运算移入其中，因此您可以简单地在每个步骤上应用模数（例如 7）：

```
x=1;
x=(x*10+2)%7;
x=(x*10+3)%7;
x=(x*10+4)%7;//x=1234%7 
```

如果您的素数约为 10^9，则 32 位整数将不够用，但 64 位将绰绰有余。

# php - cakephp：saveAll 不工作

> ID：15308065
> 
> 赞同：0
> 
> 时间：2013-03-09T06:41:35.923
> 
> 标签：php, cakephp-2.0

saveAll 不起作用可以有人帮我找出问题所在。我已经包含了控制器的操作、传递给 saveAll 的数组及其模型。

包含 saveAll 的控制器操作如下所示 -

```
public function add_customer_order() {
    if ($this->request->is('post')) {
                      -
                      -
                      -
                      -
                   $this->CustomerOrderItem->create();
                   if ($this->CustomerOrderItem->saveAll($customer_order_item)) {
                        $this->Session->setFlash('The customer order Items has been saved successfully.', 'default/flash_success');
                     }
                else {
                    $this->Session->setFlash('The customer order Items not been saved successfully.', 'default/flash_success');
                }
    }

} 
```

数组 $customer_order_item 如下所示 -

```
array(
    'CustomerOrderItem' => array(
        (int) 0 => array(
            'id' => '',
            'quantity' => '400',
            'unit_cost' => '77',
            'pending_quantity' => '400',
            'packaging_configuration_quantity' => '20',
            'exercise_duty_id' => '0',
            'tax_id' => '5',
            'customer_order_id' => '',
            'master_article_id' => '22'
        ),
        (int) 1 => array(
            'id' => '',
            'quantity' => '200',
            'unit_cost' => '77',
            'pending_quantity' => '200',
            'packaging_configuration_quantity' => '20',
            'exercise_duty_id' => '0',
            'tax_id' => '5',
            'customer_order_id' => '',
            'master_article_id' => '25'
        ),
        (int) 2 => array(
            'id' => '',
            'quantity' => '400',
            'unit_cost' => '77',
            'pending_quantity' => '400',
            'packaging_configuration_quantity' => '20',
            'exercise_duty_id' => '1',
            'tax_id' => '5',
            'customer_order_id' => '',
            'master_article_id' => '23'
        ),
        (int) 3 => array(
            'id' => '',
            'quantity' => '200',
            'unit_cost' => '77',
            'pending_quantity' => '200',
            'packaging_configuration_quantity' => '20',
            'exercise_duty_id' => '1',
            'tax_id' => '5',
            'customer_order_id' => '',
            'master_article_id' => '24'
        ),
        (int) 4 => array(
            'id' => '',
            'quantity' => '200',
            'unit_cost' => '77',
            'pending_quantity' => '200',
            'packaging_configuration_quantity' => '20',
            'exercise_duty_id' => '1',
            'tax_id' => '5',
            'customer_order_id' => '',
            'master_article_id' => '27'
        )
    )
) 
```

该模型如下所示 -

```
<?php
App::uses('AppModel', 'Model');
/**
 * CustomerOrderItem Model
 *
 * @property CustomerOrder $CustomerOrder
 * @property MasterArticle $MasterArticle
 */
class CustomerOrderItem extends AppModel {

/**
 * Validation rules
 *
 * @var array
 */
    public $validate = array(
        'customer_order_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'master_article_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
    );

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'CustomerOrder' => array(
            'className' => 'CustomerOrder',
            'foreignKey' => 'customer_order_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
        'MasterArticle' => array(
            'className' => 'MasterArticle',
            'foreignKey' => 'master_article_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:44:15.540

我很确定这是由于验证或数据库中的空值导致的数据问题。

1.  调试内容`debug($this->request->data);`
2.  调试无效字段（如果有`debug($this->Submission->invalidFields());`）。确保在您有问题`validates()`请求或`saveAll()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T13:31:03.970

First of all remove all the validation rules and then check again if error is still coming.if not then there must be issue with data validation rules or null value of 'customer_order_id'.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T06:44:25.207

尝试

```
if ($this->CustomerOrderItem->saveAll($this->request->data)) { 
```

# gwt - GWT：如何在鼠标事件上更改菜单栏图像？

> ID：15308071
> 
> 赞同：0
> 
> 时间：2013-03-09T06:42:42.707
> 
> 标签：gwt, menu, mouseevent, menuitem, menubar

对于我的项目，我需要像 Windows 开始按钮一样运行我的菜单栏。我怎样才能在 GWT 中实现这一点？

我到目前为止尝试的是：

```
public class MyMenuBar extends Composite implements MouseDownHandler{

    @Override
    public void onMouseDown(MouseDownEvent event) {
        System.out.println("IMAGE CHANGED, using new safe html");
    }
    MenuBar myMenu;
    public MyMenuBar(){

        myMenu =  new MenuBar();
        myMenu.addItem(safeHtmlOfImage, popupMenuBar);

        this.addDomHandler(this, MouseDownEvent.getType());
        initWidget(myMenu);
    }
} 
```

问题永远不会`onMouseDown(MouseDownEvent event)`被调用。请帮助我，我怎样才能做到这一点。我在这件事上失去了第二天。告诉我你是怎么想的……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:25:09.440

我解决了问题，但不认为这是实际的解决方案：通过设置菜单栏的样式代码。

```
.gwt-MenuItem
{
background-image: url("img/navigatorDeActive.png");
}
.gwt-MenuItem-selected
{
background-image: url("img/navigatorActive.png");
} 
```

# windows - 为变量添加针对管道的“如果争论”

> ID：15308075
> 
> 赞同：1
> 
> 时间：2013-03-09T06:42:53.320
> 
> 标签：windows, batch-file

我是编写代码和批处理文件的新手。我正在尝试通过允许用户发出以下批处理文件来自动化用户设置：

执行的命令 = "BVT_AudioDecode_Setup.bat V:\WP\BVT\Audio\Decode 10.42.233.237"

```
@echo off
::Conditions leading to errors if the batch script is not executed correctly
if "%1"=="" and "%2"=="" goto error1
if "%1"=="" goto error2
if "%2"=="" goto error3

::Allows user to set the "Source Path" to copy the testcase files from
set source=%1
::Allows user to set the "Destination Path" to copy the testcase files from
set IP_Address=%2

::Tells the user what the "Source" and "Destination" Paths are
echo Source Path = %1
echo Destination Path = %2
echo.
powershell.exe -File "bat_script.ps1" %1 %2 -NoProfile -NoExit

goto end
:error1
echo.
echo Error Syntax: BVT_AudioDecode_Setup.bat "Source_Path\AudioDecode_Testcase_Folder" "Device IP Address"
echo.
echo For example: BVT_AudioDecode_Setup.bat V:\WP\BVT\Audio\Decode 10.42.233.237
echo              -or-
echo              BVT_AudioDecode_Setup.bat C:\WP\BVT\Audio\Decode 10.42.233.237
echo.
echo.
goto end
:error2
echo.
echo Error Syntax: BVT_AudioDecode_Setup.bat "Source_Path\AudioDecode_Testcase_Folder" "Device IP Address"
echo.
echo For example: BVT_AudioDecode_Setup.bat V:\WP\BVT\Audio\Decode 10.42.233.237
echo              -or-
echo              BVT_AudioDecode_Setup.bat C:\WP\BVT\Audio\Decode 10.42.233.237
echo.
echo.
goto end
:error3
echo.
echo Error Syntax: BVT_AudioDecode_Setup.bat "Source_Path\AudioDecode_Testcase_Folder" "Device IP Address"
echo.
echo For example: BVT_AudioDecode_Setup.bat V:\WP\BVT\Audio\Decode 10.42.233.237
echo              -or-
echo              BVT_AudioDecode_Setup.bat C:\WP\BVT\Audio\Decode 10.42.233.237
echo.
echo.
goto end
:end 
```

这已经过测试并且有效。

现在我正在尝试添加/测试一个简单的代码块，但我找不到正确的语法。是的，过去 3 个小时我一直在谷歌上搜索。这是我正在尝试做的事情：

执行的命令 = "Random.bat C:\Users"

执行的命令 = "Random.bat C:\InvalidDirectory"

```
::Conditions leading to errors if the batch script is not executed correctly
@ECHO OFF
SET "mypath=%1"
ECHO %mypath%
cd %mypath% | find "%invalidpath%"
Echo %invalidpath%

If "%invalidpath%=The system cannot find the path specified." (
goto error1)
else (
goto BeginTest)

::Begins the testcase
:BeginTest
::Do some stuff
goto end
:error1
echo Error: Invalid Path
goto end
:end 
```

如果有人能指出我正确的方向，将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:58:02.023

您可以使用 IF EXIST 语句来检查目录是否存在。例如，要测试 C:\WIN，如果存在则更改为 C:\WIN：

```
C:
IF NOT EXIST "C:\WIN\." GOTO NOWINDIR
CD \WIN
:NOWINDIR 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T17:40:16.647

因为“cd xxxx”中的“未找到答案”会随 Windows 安装的语言而变化，所以您应该更喜欢与语言无关的解决方案。为此使用 %errorlevel%。

`cd c:\existingpath\`将返回错误级别“0”

`cd c:\notexistingpath\`将返回“1”

所以一个好的解决方案是：

```
SET "mypath=%1"
ECHO %mypath%
cd %mypath% 
If %errorlevel%=0 goto BeginTest else goto error1 
```

...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T14:53:36.063

它奏效了，谢谢。如果其他人遇到此问题，这是我所拥有的：

```
::Conditions leading to errors if the batch script is not executed correctly
@ECHO OFF
SET "source=%1"
ECHO %source%
IF NOT EXIST "%source%" goto error1
ECHO Directory Exists
cd %source%

goto end
:error1
echo Error: Invalid Path
goto end
:end 
```

现在我需要一个真实 IP 地址的 if 条件

```
::Conditions leading to errors if the batch script is not executed correctly
@ECHO OFF
SET "IP_Address=%1"
ECHO %IP_Address%

::Checks if the IP Address is valid
IF NOT EXIST "%IP_Address%" goto error2
ECHO Directory Exists

goto end
:error1
echo.
echo Error: Invalid Path
echo %source%
goto end
:error2
echo.
echo Error: Invalid IP Address
echo %IP_Address%
goto end
:end 
```

它会自动检查 IP 地址是否为路径。我可以在“IF NOT EXIST”\\%IP_Address%“goto error2”前面添加一个“\\”，但这样做的问题是计算机将无法连接到设备，除非它使用任一 telnet , 或通过 powershell 的“Open-Device”命令。但是，它可以 ping 该 IP 地址。

有没有办法设置读取成功的 ping 和不成功的 ping？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T17:47:01.067

与 %errorlevel% 相同的解决方案

```
ping -n 1 -w 100 %ip-address%
if %errorlevel%=0 then goto doesexist else goto cannotreach 
```

...

所有命令都将返回错误级别。如果一切正常，通常为零，并且错误的非零值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T20:42:17.497

它仍然无法与 IP 地址列表一起正常工作，但在您的帮助下我更接近了。这是我使用有效 IP 地址执行 bat 以 ping 时的结果：

```
::Conditions leading to errors if the batch script is not executed correctly
@ECHO OFF
SET IP_Address=%1
ECHO %IP_Address%

::Checks if the IP Address is valid
ping -n 1 -w 1000 %IP_Address%
if not "%errorlevel%=0" goto error2

goto end
:error2
echo.
echo Error: Invalid IP Address
echo %IP_Address%
goto end
:end 
```

执行后，这是我在 cmd 中看到的：

```
c:\>Random.bat 192.168.1.46
192.168.1.46

Pinging 192.168.1.46 with 32 bytes of data:
Reply from 192.168.1.46: bytes=32 time=1ms TTL=128

Ping statistics for 192.168.1.46:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 1ms, Maximum = 1ms, Average = 1ms
goto was unexpected at this time. 
```

一旦解决了这个问题，我还想知道一种隐藏输出的方法：

```
Pinging 192.168.1.46 with 32 bytes of data:
Reply from 192.168.1.46: bytes=32 time=1ms TTL=128

Ping statistics for 192.168.1.46:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 1ms, Maximum = 1ms, Average = 1ms 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T21:26:47.430

隐藏输出使用 >nul

```
ping -n 1 -w 1000 %IP_Address% 1>nul 2>nul 
```

`1>nul`将“正常”输出发送到涅槃

`2>nul`将错误消息发送到涅槃

因此，如果您使用“1>nul”（或仅使用“>nul”），您将在屏幕上看到错误消息，但不会出现“回复”、“统计”之类的东西。

我不明白刚才的“意外转到” - 我明天会看看。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-09T23:14:50.933

啊查了errorlevel的用法终于找到了

```
::Conditions leading to errors if the batch script is not executed correctly
@ECHO OFF
SET IP_Address=%1
ECHO %IP_Address%

::Checks if the IP Address is valid
ping -n 1 -w 100 %IP_Address% 1>nul
if "%errorlevel%"=="1" goto error2

:error2
echo.
echo Error: Invalid IP Address
echo %IP_Address%
goto end
:end 
```

感谢大家的帮助。

# delphi - Delphi自定义动画——碰撞检测

> ID：15308077
> 
> 赞同：9
> 
> 时间：2013-03-09T06:42:54.970
> 
> 标签：delphi, animation, drawing, delphi-xe2, collision-detection

我正在使用自定义绘图/2D 动画，并且试图弄清楚如何检测移动物体何时与地图中的墙壁发生碰撞。用户按住键盘上的箭头键移动对象，地图存储为点的数组结构。地图中的墙壁可能是有角度的，但没有弯曲的墙壁。

`FMap: TMap;`在下面的代码中`DoMove`使用地图结构（在`DoMove`中，我需要阅读`FMap`（请参阅以`DrawMap`了解其`FMap`工作原理）并以某种方式确定对象是否正在接近任何墙壁并停止它。

我可以做一个双 X/Y 循环迭代每个地图每个部分的每两个点之间的每个可能的像素，但我已经知道这会很重，考虑到只要对象在移动，这个过程就会被快速调用。

我想在对象移动的方向上读取像素颜色，如果有任何黑色（来自地图线），则认为它是一堵墙。但最终会有更多的自定义背景绘制，因此读取像素颜色将不起作用。

![应用图片](../Images/066e79b9e7512493a712007e276f48a7.png)

**uMain.pas**

```
unit uMain;

interface

uses
  Winapi.Windows, Winapi.Messages,
  System.SysUtils, System.Variants, System.Classes,
  Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ExtCtrls;

const
  //Window client size
  MAP_WIDTH = 500;
  MAP_HEIGHT = 500;

type
  TKeyStates = Array[0..255] of Bool;
  TPoints = Array of TPoint;
  TMap = Array of TPoints;

  TForm1 = class(TForm)
    Tmr: TTimer;
    procedure FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure TmrTimer(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure FormPaint(Sender: TObject);
  private
    FBMain: TBitmap;    //Main rendering image
    FBMap: TBitmap;     //Map image
    FBObj: TBitmap;     //Object image
    FKeys: TKeyStates;  //Keyboard states
    FPos: TPoint;       //Current object position
    FMap: TMap;         //Map line structure
    procedure Render;
    procedure DrawObj;
    procedure DoMove;
    procedure DrawMap;
    procedure LoadMap;
  public

  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

uses
  Math, StrUtils;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FBMain:= TBitmap.Create;
  FBMap:= TBitmap.Create;
  FBObj:= TBitmap.Create;
  ClientWidth:= MAP_WIDTH;
  ClientHeight:= MAP_HEIGHT;
  FBMain.Width:= MAP_WIDTH;
  FBMain.Height:= MAP_HEIGHT;
  FBMap.Width:= MAP_WIDTH;
  FBMap.Height:= MAP_HEIGHT;
  FBObj.Width:= MAP_WIDTH;
  FBObj.Height:= MAP_HEIGHT;
  FBObj.TransparentColor:= clWhite;
  FBObj.Transparent:= True;
  FPos:= Point(150, 150);
  LoadMap;    //Load map lines into array structure
  DrawMap;    //Draw map lines to map image only once
  Tmr.Enabled:= True;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  Tmr.Enabled:= False;
  FBMain.Free;
  FBMap.Free;
  FBObj.Free;
end;

procedure TForm1.LoadMap;
begin
  SetLength(FMap, 1);     //Just one object on map
  //Triangle
  SetLength(FMap[0], 4);  //4 points total
  FMap[0][0]:= Point(250, 100);
  FMap[0][1]:= Point(250, 400);
  FMap[0][2]:= Point(100, 400);
  FMap[0][3]:= Point(250, 100);
end;

procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  FKeys[Key]:= True;
end;

procedure TForm1.FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
  FKeys[Key]:= False;
end;

procedure TForm1.FormPaint(Sender: TObject);
begin
  Canvas.Draw(0, 0, FBMain);  //Just draw rendered image to form
end;

procedure TForm1.DoMove;
const
  SPD = 3;  //Speed (pixels per movement)
var
  X, Y: Integer;
  P: TPoints;
begin
  //How to keep object from passing through map walls?
  if FKeys[VK_LEFT] then begin
    //Check if there's a wall on the left

    FPos.X:= FPos.X - SPD;
  end;
  if FKeys[VK_RIGHT] then begin
    //Check if there's a wall on the right

    FPos.X:= FPos.X + SPD;
  end;
  if FKeys[VK_UP] then begin
    //Check if there's a wall on the top

    FPos.Y:= FPos.Y - SPD;
  end;
  if FKeys[VK_DOWN] then begin
    //Check if there's a wall on the bottom

    FPos.Y:= FPos.Y + SPD;
  end;
end;

procedure TForm1.DrawMap;
var
  C: TCanvas;
  X, Y: Integer;
  P: TPoints;
begin
  C:= FBMap.Canvas;
  //Clear image first
  C.Brush.Style:= bsSolid;
  C.Pen.Style:= psClear;
  C.Brush.Color:= clWhite;
  C.FillRect(C.ClipRect);
  //Draw map walls
  C.Brush.Style:= bsClear;
  C.Pen.Style:= psSolid;
  C.Pen.Width:= 2;
  C.Pen.Color:= clBlack;
  for X := 0 to Length(FMap) - 1 do begin
    P:= FMap[X];    //One single map object
    for Y := 0 to Length(P) - 1 do begin
      if Y = 0 then //First iteration only
        C.MoveTo(P[Y].X, P[Y].Y)
      else          //All remaining iterations
        C.LineTo(P[Y].X, P[Y].Y);
    end;
  end;
end;

procedure TForm1.DrawObj;
var
  C: TCanvas;
  R: TRect;
begin
  C:= FBObj.Canvas;
  //Clear image first
  C.Brush.Style:= bsSolid;
  C.Pen.Style:= psClear;
  C.Brush.Color:= clWhite;
  C.FillRect(C.ClipRect);
  //Draw object in current position
  C.Brush.Style:= bsClear;
  C.Pen.Style:= psSolid;
  C.Pen.Width:= 2;
  C.Pen.Color:= clRed;
  R.Left:= FPos.X - 10;
  R.Right:= FPos.X + 10;
  R.Top:= FPos.Y - 10;
  R.Bottom:= FPos.Y + 10;
  C.Ellipse(R);
end;

procedure TForm1.Render;
begin
  //Combine map and object images into main image
  FBMain.Canvas.Draw(0, 0, FBMap);
  FBMain.Canvas.Draw(0, 0, FBObj);
  Invalidate; //Repaint
end;

procedure TForm1.TmrTimer(Sender: TObject);
begin
  DoMove;   //Control movement of object
  DrawObj;  //Draw object
  Render;
end;

end. 
```

**uMain.dfm**

```
object Form1: TForm1
  Left = 315
  Top = 113
  BorderIcons = [biSystemMenu]
  BorderStyle = bsSingle
  Caption = 'Form1'
  ClientHeight = 104
  ClientWidth = 207
  Color = clBtnFace
  DoubleBuffered = True
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  Position = poScreenCenter
  OnCreate = FormCreate
  OnDestroy = FormDestroy
  OnKeyDown = FormKeyDown
  OnKeyUp = FormKeyUp
  OnPaint = FormPaint
  PixelsPerInch = 96
  TextHeight = 13
  object Tmr: TTimer
    Enabled = False
    Interval = 50
    OnTimer = TmrTimer
    Left = 24
    Top = 8
  end
end 
```

PS - 这段代码只是我完整项目的剥离和虚拟版本，用于演示事情是如何工作的。

* * *

**编辑**

我刚刚意识到一个重要因素：现在，我只实现了一个移动对象。但是，也会有多个移动对象。因此，碰撞可能发生在地图墙或另一个对象（我将每个对象都放在一个列表中）。整个项目仍然像这个示例一样非常原始，但是与这个问题相关的代码要多得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T07:56:08.540

这个在网上找到的单元（不记得在哪里，没有提到作者，也许有人可以提供链接）会给你计算碰撞和反射角度的能力。

```
unit Vector;

interface

type
  TPoint = record
    X, Y: Double;
  end;

  TVector = record
    X, Y: Double;
  end;

  TLine = record
    P1, P2: TPoint;
  end;

function Dist(P1, P2: TPoint): Double; overload;
function ScalarProd(P1, P2: TVector): Double;
function ScalarMult(P: TVector; V: Double): TVector;
function Subtract(V1, V2: TVector): TVector; overload;
function Subtract(V1, V2: TPoint): TVector; overload;
function MinDistPoint(Point: TPoint; Line: TLine): TPoint;
function Mirror(W, V: TVector): TVector;
function Dist(Point: TPoint; Line: TLine): Double; overload;

implementation

function Dist(P1, P2: TPoint): Double; overload;
begin
  Result := Sqrt(Sqr(P1.X - P2.X) + Sqr(P1.Y - P2.Y));
end;

function ScalarProd(P1, P2: TVector): Double;
begin
  Result := P1.X * P2.X + P1.Y * P2.Y;
end;

function ScalarMult(P: TVector; V: Double): TVector;
begin
  Result.X := P.X * V;
  Result.Y := P.Y * V;
end;

function Subtract(V1, V2: TVector): TVector; overload;
begin
  Result.X := V2.X - V1.X;
  Result.Y := V2.Y - V1.Y;
end;

function Subtract(V1, V2: TPoint): TVector; overload;
begin
  Result.X := V2.X - V1.X;
  Result.Y := V2.Y - V1.Y;
end;

function MinDistPoint(Point: TPoint; Line: TLine): TPoint;
var
  U: Double;
  P: TPoint;
begin
  U := ((Point.X - Line.P1.X) * (Line.P2.X - Line.P1.X) +
        (Point.Y - Line.P1.Y) * (Line.P2.Y - Line.P1.Y)) /
    (Sqr(Line.P1.X - Line.P2.X) + Sqr(Line.P1.Y - Line.P2.Y));
  if U <= 0 then
    Exit(Line.P1);
  if U >= 1 then
    Exit(Line.P2);
  P.X := Line.P1.X + U * (Line.P2.X - Line.P1.X);
  P.Y := Line.P1.Y + U * (Line.P2.Y - Line.P1.Y);
  Exit(P);
end;

function Mirror(W, V: TVector): TVector;
begin
  Result := Subtract(ScalarMult(V, 2*ScalarProd(v,w)/ScalarProd(v,v)), W);
end;

function Dist(Point: TPoint; Line: TLine): Double; overload;
begin
  Result := Dist(Point, MinDistPoint(Point, Line));
end;

end. 
```

一个示例实现是

```
unit BSP;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Vector, ExtCtrls;

type
  TForm2 = class(TForm)
    Timer1: TTimer;
    procedure FormPaint(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
  private
    { Private-Deklarationen }
    FLines: array of TLine;
    FP: TPoint;
    FV: TVector;
    FBallRadius: Integer;
    FBallTopLeft: Windows.TPoint;
  public
    { Public-Deklarationen }
  end;

var
  Form2: TForm2;

implementation

{$R *.dfm}

procedure TForm2.FormCreate(Sender: TObject);
const
  N = 5;

var
  I: Integer;
begin
  Randomize;

  SetLength(FLines, 4 + N);
  FBallRadius := 15;
  // Walls
  FLines[0].P1.X := 0;
  FLines[0].P1.Y := 0;
  FLines[0].P2.X := Width - 1;
  FLines[0].P2.Y := 0;

  FLines[1].P1.X := Width - 1;
  FLines[1].P1.Y := 0;
  FLines[1].P2.X := Width - 1;
  FLines[1].P2.Y := Height - 1;

  FLines[2].P1.X := Width - 1;
  FLines[2].P1.Y := Height - 1;
  FLines[2].P2.X := 0;
  FLines[2].P2.Y := Height - 1;

  FLines[3].P1.X := 0;
  FLines[3].P1.Y := 0;
  FLines[3].P2.X := 0;
  FLines[3].P2.Y := Height - 1;
  for I := 0 to N - 1 do
  begin
    FLines[I + 4].P1.X := 50 + Random(Width - 100);
    FLines[I + 4].P1.Y := 50 + Random(Height - 100);
    FLines[(I + 1) mod N + 4].P2 := FLines[I + 4].P1;
  end;

  FP.X := 50;
  FP.Y := 50;

  FV.X := 10;
  FV.Y := 10;
end;

procedure TForm2.FormPaint(Sender: TObject);
const
  Iterations = 100;
var
  I, MinIndex, J: Integer;
  MinDist, DP, DH: Double;
  MP: TPoint;
  H: TPoint;
begin

  for I := 0 to Length(FLines) - 1 do
  begin
    Canvas.MoveTo(Round(FLines[I].P1.X), Round(FLines[I].P1.Y));
    Canvas.LineTo(Round(FLines[I].P2.X), Round(FLines[I].P2.Y));
  end;

  for I := 0 to Iterations do
  begin
    H := FP;
    FP.X := FP.X + FV.X / Iterations;
    FP.Y := FP.Y + FV.Y / Iterations;
    MinDist := Infinite;
    MinIndex := -1;
    for J := 0 to Length(FLines) - 1 do
    begin
      DP := Dist(FP, FLines[J]);
      DH := Dist(H, FLines[J]);
      if (DP < MinDist) and (DP < DH) then
      begin
        MinDist := DP;
        MinIndex := J;
      end;
    end;

    if MinIndex >= 0 then
      if Sqr(MinDist) < 2*Sqr(FBallRadius * 0.7 / 2)
         then
      begin
        MP := MinDistPoint(FP, FLines[MinIndex]);
        FV := Mirror(FV, Subtract(MP, FP));
      end;
  end;

  FBallTopLeft.X := Round(FP.X - FBallRadius);
  FBallTopLeft.Y := Round(FP.Y - FBallRadius);
  Canvas.Brush.Color := clBlue;
  Canvas.Ellipse(FBallTopLeft.X, FBallTopLeft.Y,
    FBallTopLeft.X + FBallRadius * 2, FBallTopLeft.Y + FBallRadius * 2);

end;

procedure TForm2.Timer1Timer(Sender: TObject);
begin
  invalidate;
end;

end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:40:08.733

每次按下键时，您都会在执行移动后计算对象的新坐标。然后您可以测试对象轨迹与地图中的线之间的交点。

由于您的地图可以被视为一组线段，并且假设您的对象路径是*线性*的，您可以通过查找对象路径与地图线段所在的线之间的交点来找到所有可能的碰撞。对象路径只有两个斜率：零和无穷大。所以对于每个地图段：

1.  计算它的斜率。如果地图段坡度与对象路径坡度相同，则它们不会相交。
2.  计算地图段和对象路径为一的线之间的交点（例如，请参见[此处）](http://zonalandeducation.com/mmts/intersections/intersectionOfTwoLines1/intersectionOfTwoLines1.html)
3.  检查地图段是否在碰撞点之前结束：如果是，则没有碰撞
4.  检查物体路径是否在碰撞点之前结束：如果是，则没有碰撞

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T08:02:05.167

如果你自己不做也没关系，你可以使用现成的库来完成这个任务。Box2D[这里有 Delphi 版本](http://code.google.com/p/box2d-delphi/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T09:47:34.140

我已经在问题本身中回答了我自己的问题。我想到的一件事是在移动方向上读取图像的像素，并检查那里是否有一条线。我现在意识到我可以在地图层下有一个额外的`FBMap`层作为背景，并保留地图层，只绘制可碰撞的墙壁。

移动时，沿移动方向扫描特定图层上的像素，而不是整个图像。因为我已经有一个预先绘制的图层，所以我可以阅读它而不是主图像。基于移动的速度，我只需要向前看这么多像素（至少比移动的像素数多几个像素）。

此外，如果图像的背景有代表墙壁的图片而不是直线，则根本不需要绘制该层。该层可以明确地用于在碰撞区域移动之前扫描几个像素。事实上，由于我还需要识别与其他运动物体的碰撞，所以我也可以在这里绘制所有物体（黑色/白色）。

与通过地图线的大量迭代（例如 2000 次）相比，画布上的几次像素迭代（例如 20 次）微不足道。

# c++ - 发出特定事件信号时立即退出正在运行的线程

> ID：15308078
> 
> 赞同：1
> 
> 时间：2013-03-09T06:42:59.713
> 
> 标签：c++, windows, thread-synchronization

考虑以下线程函数：

```
UINT MyClass::threadFunc(LPVOID lParam)
{
    // 1\. Initialize stuff
    // 2\. Validate stuff
    // 3\. Do first task
    // 4\. Do second task
    // 5\. Un-initialize everything and return
} 
```

这个线程是由我的应用程序中的一个对话框创建的。该线程将在对话框的生命周期中只运行一次（它是一个工作线程）。

在发生一些异步事件（可能是单击按钮，发出其他事件等）时，我想通知该线程立即返回，以便我的对话框可以正常退出（在等待该线程终止之后）。我不能只退出对话框，因为该线程仍将运行。

我对 C++ 比较陌生，这就是我所想到的（伪代码）：

1.  将线程函数包围在`try-catch`.
2.  在发生该异步事件时，引发线程终止异常。

这没有用，所以我进行了一些研究，并找到了与此类似的[答案](https://stackoverflow.com/questions/233127/how-can-i-propagate-exceptions-between-threads)。但出于某种原因，我觉得有一种更简单的方法可以实现这一点。在我开始实施上述想法之前，我只是想澄清一下。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:57:11.990

一些搜索，我发现了这些：

*   Windows，[异常注入：在其他线程中抛出异常](http://www.codeproject.com/Articles/71529/Exception-Injection-Throwing-an-Exception-in-Other)，定义`ThreadAbort`

*   便携，[如何在线程之间传播异常？](https://stackoverflow.com/questions/233127/how-can-i-propagate-exceptions-between-threads)，正如你提到的

# eclipse-plugin - 如何在 JDT 中获取某个方法的所有可见变量

> ID：15308080
> 
> 赞同：3
> 
> 时间：2013-03-09T06:43:11.273
> 
> 标签：eclipse-plugin, eclipse-jdt

我想开发一个 Eclipse 插件来获取特定方法的所有可见变量。例如：

```
public class testVariable {  
    String test1;  
    Object test2;
        void method_test1(){
            int test3,test4;
        }
        void method_test2(){
            int test5,test6;
            //get variable here!!!!
        }
} 
```

我只想得到可见的变量是：`test1, test2,test5,test6`在方法中`method_test2`。我能做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:45:50.300

实际上，JDT 可以在插件之外使用，即可以在独立的Java 应用程序中使用。

下面的代码可以返回你想要的变量：

```
public static void parse(char[] str) {
ASTParser parser = ASTParser.newParser(AST.JLS3);
parser.setSource(str);
parser.setKind(ASTParser.K_COMPILATION_UNIT);

final CompilationUnit cu = (CompilationUnit) parser.createAST(null);
cu.accept(new ASTVisitor() {

    public boolean visit(VariableDeclarationFragment var) {

        System.out.println("variable: " + var.getName());

        return false;
    }

    public boolean visit(MethodDeclaration md) {

        if (md.getName().toString().equals("method_test2")) {
            md.accept(new ASTVisitor() {
                public boolean visit(VariableDeclarationFragment fd) {
                    System.out.println("in method: " + fd);
                    return false;
                }
            });
        }
        return false;
    }
}); 
```

}

输出是：

```
variable: test1
variable: test2
in method: test5
in method: test6 
```

[在JDT 教程](http://www.programcreek.com/2011/01/best-java-development-tooling-jdt-and-astparser-tutorials/)中查看更多示例。

# r - 将数据帧保存到 R 中的磁盘进行存储的最佳格式是什么？

> ID：15308083
> 
> 赞同：9
> 
> 时间：2013-03-09T06:43:46.680
> 
> 标签：r, persistence, data-formats

在限制语义丢失的同时，将简单数据帧保存到 R 中的磁盘进行存储的最佳格式是什么？

我问是因为我正在归档一个数据集。在理想情况下，我的数据格式将具有以下特征：

1.  稳定性 - 存储格式将与 R 的未来版本兼容
2.  语义兼容性——存储格式将理解 R 的原始数据类型的语义。例如，它将能够以合理的方式存储带有标签的有序因子。
3.  开放标准 - 理想情况下，该格式将是一个开放标准，因此其他统计数据包（现在或将来）将能够理解它

我的第一个想法是使用非常稳定的 CSV，但缺乏所需的语义丰富性。另一方面，R 的内置 RData 格式完全捕获了 R 的语义，但似乎可能会在版本之间发生变化（如果我错了，请纠正我）。

是否有另一种格式可以在这三个命令之间找到平衡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:18:59.030

将其转储到带有`dput`. 这样你就可以得到 R 对象的所有结构，并且它是基于文本的形式，如果 R 停止存在，可以相当容易地解析。

它可能没有通过 (3)，您的“开放标准”测试。

R 非常适合向后兼容其 .RData 格式，因此即使最新的 R 写入的文件与旧的不同，最新的 R 仍会读取旧文件。但是，如果 R 应该停止存在，那么二进制格式的逆向工程比从`dput`.

# php - mysqli代码输出说明

> ID：15308084
> 
> 赞同：-1
> 
> 时间：2013-03-09T06:43:58.917
> 
> 标签：php, mysqli

你能解释一下为什么以这种方式输出结果吗？我想知道为什么包含数组。我在程序中看不到任何数组字。这怎么发生的？我怎么能只输出“1”。

代码：

```
if (!$mysqli->query("DROP TABLE IF EXISTS test") ||
!$mysqli->query("CREATE TABLE test(id INT)") ||
!$mysqli->query("INSERT INTO test(id) VALUES (1)")) {
echo "Table creation failed: (" . $mysqli->errno . ") " . $mysqli->error;
}

if (!$mysqli->query("DROP PROCEDURE IF EXISTS p") ||
!$mysqli->query('CREATE PROCEDURE p() READS SQL DATA BEGIN SELECT id FROM test; SELECT id + 1 FROM test; END;')) {
echo "Stored procedure creation failed: (" . $mysqli->errno . ") " . $mysqli->error;
}

if (!$mysqli->multi_query("CALL p()")) {
echo "CALL failed: (" . $mysqli->errno . ") " . $mysqli->error;
}

do {
if ($res = $mysqli->store_result()) {
    printf("---\n");
    var_dump($res->fetch_all());
    $res->free();
} else {
    if ($mysqli->errno) {
        echo "Store failed: (" . $mysqli->errno . ") " . $mysqli->error;
    }
}
} while ($mysqli->more_results() && $mysqli->next_result());
?> 
```

结果：

```
---
array(3) {
[0]=>
 array(1) {
[0]=>
string(1) "1"
}
} 
```

无论如何，我已经删除了其他输出，我只想知道为什么包含该数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:47:31.347

根据文档注意 - 的返回类型`mysqli_result::fetch_all`

[http://php.net/manual/en/mysqli-result.fetch-all.php#refsect1-mysqli-result.fetch-all-returnvalues](http://php.net/manual/en/mysqli-result.fetch-all.php#refsect1-mysqli-result.fetch-all-returnvalues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:48:14.810

mysqli 的 fetch_all 返回一个数组。从[http://www.php.net/manual/en/mysqli-result.fetch-all.php](http://www.php.net/manual/en/mysqli-result.fetch-all.php)的文档中，您可以看到返回值为“返回包含结果行的关联数组或数值数组”。所以，你得到一个数组。您所拥有的是 1 行（作为数组），具有 1 个值（在数组中），值为“1”。

# c++ - 在散列容器中存储持久 v8 对象句柄

> ID：15308085
> 
> 赞同：0
> 
> 时间：2013-03-09T06:44:00.993
> 
> 标签：c++, v8

我想将`v8::Persistent<v8::Object>`句柄存储在哈希类型容器（更准确地说是 Google `dense_hash_set`）中。我需要为此实现自己的哈希函数吗？我可以依靠`v8::Object::GetIdentityHash`哈希值的方法吗？查看代码我可以看到它们基本上只是为对象生成一个随机的 32 位数字并缓存它。这足以避免哈希冲突吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:43:35.457

我的回答是，是的，它可以用作哈希键，但是...

据此，：[_](http://izs.me/v8-docs/classv8_1_1Object.html#a5309f7a349feb906a05ee45b6feeaab1)`int v8::Object::GetIdentityHash()`

> 返回此对象的身份哈希。
> 
> 当前的实现使用对象上的隐藏属性来存储身份哈希。
> 
> 返回值永远不会是 0。此外，它不保证是唯一的。

它可能会为不同的对象生成相同的键，并且您可能会发生冲突。然而，放弃这个功能还不够。

问题是保持低碰撞率。它取决于`GetIdentityHash`哈希表的分布和大小。

您可以对其进行测试并计算碰撞次数并检查它是否会损害您的性能？！

# git - Git状态问题，显示我的整个根目录

> ID：15308099
> 
> 赞同：0
> 
> 时间：2013-03-09T06:46:21.867
> 
> 标签：git

抱歉这个愚蠢的问题，但已经很晚了，我需要睡觉。
当我运行“git status”时，这就是我得到的

> 在分支主机上
> “未跟踪的文件：（
> 使用“git add ...”来包含将要提交的内容）”
> -help/
> -version/
> .Trash/
> .bash_history
> .bash_profile
> .bower/
> .cache/
> .codeintel/
> .composer/
> .config/
> .dbshel
> ​​l .dotfiles/
> .dropbox/
> .filezilla/
> .fontconfig/
> .fonts/
> .gem/
> .gitconfig
> .gitignore_global
> .gvimrc
> .heroku/
> .hgignore_global
> .idlerc/
> .irb-history
> .jam/
> .lesshst
> .mongorc.js
> .mysql_history
> .neocon/
> .netrc
> .node-
> gyp/ .npm / .oh
> -my-zsh/
> .phpsh/
> .profile
> .putty/
> .rnd
> .rvm/
> .rvmrc
> .sh_history
> .ssh /
> .subversion/ .swp
> .vim.20121218
> /
> .vim.20121230/
> .vim/
> .viminfo
> .vimrc
> .vimrc.20121218
> .vimrc.after
> .vimrc.before
> .vimrc.bundles.fork
> .vimrc.fork
> .vimundo/
> .vimviews/
> .yeoman/
> .zcompdump
> .zlogin
> .zprofile .zsh
> -update
> .zsh_history .zshrc Calibre Library/ Desktop/ Documents/ Downloads/ Dropbox/ FRONEND_MASTERS/ Happy.js/ JSON-js/ Learn-to-Program- Javascript/ Library/ Local_Test/ Moo3D/ Music/ My-sinatra-app-1/ MyBooks/ Nettuts-Builder.zip PSD_Themes.zip PSD_Themes/
> 
> 图片/
> Public/
> SPA/
> SilkJS-Harmony/
> Sinatra-app-1/
> Sites/24/
> Sites/30days_revisited/
> Sites/Ajax_Site/
> Sites/Backbonejs-PHP/
> Sites/Bat-Tracer/
> Sites/DjangoBoss/
> Sites/FsWebSpa-Backbone/
> 站点/JS-Playground-Backbone/
> 
> 没有添加到提交但存在未跟踪的文件（使用“git add”来跟踪）

基本上我的整个 ~ 目录。
自从我搞砸了 GIT 已经有一段时间了，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T06:51:49.947

你可能`git init`在`~`某个时候加入了，可能是偶然的。现在你在一个没有关闭 git repo 的子目录中，所以你会看到`git`遍历到你的主目录的结果。

检查您的`git log`时间`~`。如果没有重要更改，您可以安全地删除`~/.git`以摆脱 repo。

# codeigniter - 为什么 CodeIgniter 说有一个具有 777 权限的目录可以使用文件上传类？

> ID：15308104
> 
> 赞同：2
> 
> 时间：2013-03-09T06:46:51.527
> 
> 标签：codeigniter, class, file-upload, permissions, directory

我听说 Web 开发人员不应该在他们的网站上拥有任何具有 777 权限的目录，因为这会产生安全问题。但是为什么 CodeIgniter 会在其[File Uploading Class 文档](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)中询问它呢？

# wpf - Crystal Reports 使用尚未创建的数据集

> ID：15308108
> 
> 赞同：0
> 
> 时间：2013-03-09T06:47:16.137
> 
> 标签：wpf, visual-studio-2010, c#-4.0, crystal-reports, dataset

我正在使用 WPF、Visual Studio 2010 中的 c# 和 Crystal Reports 为 Windows 应用程序工作。我可以通过首先向项目中添加一个 DataSet 项，向其中添加表格并将其设置为报表的数据源来轻松创建报表。我需要做的是创建一个数据集，该数据集可以从不时生成的表中获取数据。

* **Ex- 如果当前年份是 2012，数据集应该从表 FEE_2012_2013 中获取信息，或者如果当前年份是 2013，它应该从表 FEE_2013_2014 中获取数据。我在运行时创建这些表。我怎样才能做到这一点？请帮忙。***

编辑：我想我需要一个替代 CR 的强类型数据集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:40:45.753

> 这是一篇关于如何接近你想要的东西的文章：
> 它非常复杂，你必须花一些时间来改变它以满足你的要求。

[读这个](https://dba.stackexchange.com/questions/21046/stored-procedure-to-return-dynamically-created-table-data)

> 一种更快更好的方法是只保留一张桌子并为一个学年添加一个额外的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:19:05.680

只需使用通用表名设计报表，然后在运行时更新报表架构以匹配当前数据库架构。

`myReport.Database.Tables("FEE").Location = "MyDatabase.dbo.FEE_2013_2014"`

[表.位置](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28CrystalDecisions.CrystalReports.Engine.Table.Location%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.0%29;k%28DevLang-VB%29&rd=true)

# python - python IMAP和电子邮件模块以及空格的问题

> ID：15308109
> 
> 赞同：1
> 
> 时间：2013-03-09T06:47:16.327
> 
> 标签：python, email, imap, whitespace

阅读电子邮件正文 (gmail) 时似乎有些不一致。

```
result, ems =mail.search(None,'ALL')#'UNSEEN')
if(result=='OK' and ems!=['']):
    for em in ems[0].split():
        preparse = mail.fetch(em,"(RFC822)")
        msg = email.message_from_string(preparse[1][0][1])
        for part in msg.get_payload():
            if part.get_content_type() == 'text/plain':
                to_verify = part.get_payload()
                print to_verify
                verified = verify(to_verify) 
```

问题在于 to_verify。它与我的网络浏览器直接复制+粘贴的版本不一致。不需要的地方有'\n'，并添加了'\r'。这给我用 gnupg 验证签名带来了麻烦。我能做些什么来解决这个问题吗？

# mysql - Wordpress - ftp' d 站点/导出的数据库到本地主机，本地主机图像仍然指向 .com，为什么？

> ID：15308110
> 
> 赞同：1
> 
> 时间：2013-03-09T06:47:20.067
> 
> 标签：mysql, database, wordpress, .htaccess, localhost

我在整个 wordpress 站点上进行了 FTP 传输，并导出了数据库并通过 WAMP 在我的本地主机上运行，​​但由于某种原因，链接和文件夹仍然指向它的 .com，并且还会出现 404 错误。

我怀疑它与 .htaccess 有关，但我不确定.. 有人可以引导我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:57:53.667

通过 FTP 将站点传输到本地计算机与将站点“移动”到新域相同。Wordpress 提供了有关此类移动的具体说明，您可以找到 @

[http://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

`When Your Domain Name or URLs Change When your domain name or URLs change - i.e. from http://example.com/blog to http://example.com, or http://example.com to http://newexample.com - there are additional concerns. The files and database can be moved, however references to the old domain name or location will remain in the database, and that can cause issues with links or theme display.`

`If you do a search and replace on your entire database to change the URLs, you can cause issues with data serialization, due to the fact that some themes and widgets store values with the length of your URL marked. When this changes, things break. To avoid that serialization issue, you have two options:`

`Only perform a search and replace on the wp_posts table. Use the Search and Replace for WordPress Databases Script to safely change all instances. ( If you are a developer, use this option. It is a one step process as opposed to the 15-step procedure below )`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:59:27.383

**您是否在General > Settings**下更新了 WordPress 地址 (URL) 和站点地址 (URL) ？

他们可能仍然指向旧域。

# android - java.lang.RuntimeException：无法实例化接收器

> ID：15308122
> 
> 赞同：2
> 
> 时间：2013-03-09T06:48:28.537
> 
> 标签：android, broadcastreceiver, telephonymanager, phone-state-listener

我正在开发一个进入用户消息、电话簿查找和呼叫状态的应用程序。

应用程序运行完美，当我接到电话时，我的应用程序崩溃了。

这是我的一些用户报告的错误。

```
> java.lang.RuntimeException: Unable to instantiate receiver
> me.radhakrishna.buddyreader.CustomPhoneStateListener:
> java.lang.InstantiationException: can't instantiate class
> me.radhakrishna.buddyreader.CustomPhoneStateListener; no empty
> constructor at
> android.app.ActivityThread.handleReceiver(ActivityThread.java:2105) at
> android.app.ActivityThread.access$1500(ActivityThread.java:123) at
> android.app.ActivityThread$H.handleMessage(ActivityThread.java:1202)
> at android.os.Handler.dispatchMessage(Handler.java:99) at
> android.os.Looper.loop(Looper.java:137) at
> android.app.ActivityThread.main(ActivityThread.java:4450) at
> java.lang.reflect.Method.invokeNative(Native Method) at
> java.lang.reflect.Method.invoke(Method.java:511) at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
> at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554) at
> dalvik.system.NativeStart.main(Native Method) Caused by:
> java.lang.InstantiationException: can't instantiate class
> me.radhakrishna.buddyreader.CustomPhoneStateListener; no empty
> constructor at java.lang.Class.newInstanceImpl(Native Method) at
> java.lang.Class.newInstance(Class.java:1319) at
> android.app.ActivityThread.handleReceiver(ActivityThread.java:2100)
> ... 10 more 
```

这是我的

```
CustomPhoneStateListener.java 
```

文件

```
package me.radhakrishna.buddyreader;

import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.provider.ContactsContract.PhoneLookup;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;

public class CustomPhoneStateListener extends PhoneStateListener {
    final MainActivity main = new MainActivity();
    //private static final String TAG = "PhoneStateChanged";
    Context context; //Context to make Toast if required 
    public CustomPhoneStateListener(Context context) {
        super();
        this.context = context;
    }

    public void phonePlayer(String incomingNumber){
        Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(incomingNumber));
        Cursor cursor= context.getContentResolver().query(uri, new String[]{PhoneLookup.DISPLAY_NAME},null,null,null);

        if (cursor.getCount()>0){
            cursor.moveToFirst();
            String contactName = cursor.getString(0);
            cursor.close();

            String enteredText = "Incoming call from "+contactName;
            String words = enteredText.toString();
            main.speakWords(words);
        }else{
            String enteredText = "Incoming call from "+incomingNumber;
            String words = enteredText.toString();
            main.speakWords(words);
        }
    }

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);

        switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:
            //when Idle i.e no call
            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
            //when Off hook i.e in call
            //Make intent and start your service here
            break;
        case TelephonyManager.CALL_STATE_RINGING:
            //when Ringing
            main.stopReading();
            phonePlayer(incomingNumber);
            break;
        default:
            break;
        }
    }
} 
```

这是我的 TextMessageReceiver.java

```
TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.listen(new CustomPhoneStateListener(context), PhoneStateListener.LISTEN_CALL_STATE); 
```

我的清单文件

```
<receiver android:name=".CustomPhoneStateListener">
    <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
    </intent-filter>
</receiver> 
```

谁能帮我 ？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:32:44.543

PhoneStateListener 不是接收器，因此您不能将其放入清单中。

如果手机状态发生变化，Android 将发送一个 android.intent.action.PHONE_STATE 广播。

所以你应该：

```
public class CustomPhoneStateReceiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent) {
        TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(new CustomPhoneStateListener(context), PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

并将该接收器放入您的清单文件中。

```
<receiver android:name=".CustomPhoneStateReceiver">
    <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
    </intent-filter>
</receiver> 
```

# visual-c++ - 由于冻结窗口，进度条无法正常工作 win visual c++

> ID：15308126
> 
> 赞同：0
> 
> 时间：2013-03-09T06:48:56.513
> 
> 标签：visual-c++, progress-bar

我做了一个程序来计算一些数据。我有一个迭代一些节点的过程。我添加了一个进度条来显示计算过程中的一些信息，但它不起作用。在开始该过程之前，条形图设置为 0，完成后它已满，但它只是从 0 跳到 100。我认为这是因为窗口窗体在计算时冻结，我不知道如何避免这种情况情况。有什么线索吗？关于酒吧的代码：

```
 progressBar1->Minimum=0;
         progressBar1->Maximum=100;
         for( i = 0; i <= 100; i++) {
             progressBar1->Value = i;
             progressBar1->Refresh();
         } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:29:01.893

进度条不会以这种方式更新，至少它不会以交互方式向用户显示。原因很简单，您不允许 UI 消息循环处理您的消息。Windows 有它的消息泵，必须对其进行处理才能显示 UI。例如，当您说`Value = 10`时，它会将消息发送到 UI-message-loop，但您不允许它处理，然后您发送另一条消息。这样 UI 就会一直冻结。

另一种更好的方法是创建一个单独的线程来运行您的循环。并从该线程调用方法来更新 UI。你会很感激阅读[这篇文章](http://www.codeproject.com/Articles/43994/The-Practical-Guide-to-Multithreading-Part-1)。虽然它不涵盖 C++ 中的 .NET，但会清除大部分内容。

# android - android中的CameraCilent和Camera2Client有什么区别？

> ID：15308127
> 
> 赞同：0
> 
> 时间：2013-03-09T06:49:20.977
> 
> 标签：android, camera

在 android JB 4.2 中， av/services/camera/libcameraservice/ 中有一个 Camera2Cilent 类。我不知道Camera2。

有人知道android中的Camera2吗？CameraCilent 和 Camera2Client 有什么区别。

我用谷歌搜索过，但关于它的信息很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:09:45.377

Android 4.2 引入了新的摄像头硬件抽象层 (HAL)，即*摄像头 2.0*。Camera2Client 是实际运行在这个新 HAL 之上的 ICamera 实现。

理论上，新的 HAL 侧重于收集和提供与每个帧相关的元数据。它还提供了重新处理流的能力。实际上，我不认为 Android SDK 公开了任何新功能。这更像是对架构的改进，让事情面向未来。我可能错了。

# html - 如何使用 HTML5 Web Audio API 录制我的声音

> ID：15308129
> 
> 赞同：5
> 
> 时间：2013-03-09T06:49:40.040
> 
> 标签：html, three.js, html5-audio, tquery

我正在寻找一种方法来录制我的声音，并且 - 根据录制的声音 - 将动画向左或向右移动。

我听说 HTML5 有一个音频 API，你可以通过它录制你的声音，但我不知道该怎么做。

我将感谢所有可以帮助我或提出一些解决方案、建议、代码或指南来解决此问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:08:48.617

在 webkit-browsers 上，您可以使用[get user media api](http://dev.w3.org/2011/webrtc/editor/getusermedia.html)`webkitGetUserMedia` - 就像在[html5rocks](http://www.html5rocks.com/en/tutorials/getusermedia/intro/#toc-webaudio-api)上演示的那样。
如果你想用你的声音来创建 javascript 事件（例如控制屏幕上的对象），你必须分析传入的声音（例如 event1 的高频 - event2 的低频，语音分析要复杂得多，见下文）

或者，还有 chrome 的“x-webkit-speech”语音识别（参见[此处](http://slides.html5rocks.com/#speech-input)的示例），它将分析谷歌服务器上的语音，因此对于实时控制来说可能太慢了。

*我不知道浏览器*中有任何实时语音分析，但很乐意找到（甚至是非常基本的）可能性。

编辑：添加一些代码（改编自[此处](http://www.phpied.com/x-webkit-speech-input-and-textareas/)）

```
<html>
  <head>
  </head
  <body>
    <input type="search" id="mike" x-webkit-speech>
    <script type="text/javascript">
      var mike = document.getElementById('mike');
      mike.onwebkitspeechchange = function(e) {
        console.log(e); // SpeechInputEvent
        console.log(e.results[0].utterance);
      };
    </script>
  </body>
</html> 
```

# android - 启动应用程序时黑屏

> ID：15308132
> 
> 赞同：0
> 
> 时间：2013-03-09T06:50:13.933
> 
> 标签：android

在第一个活动上启动应用程序时，我收到带有应用程序名称的黑屏如何解决它，请建议我..

```
 I am getting black screen with application name at the time of launching application over the first activity how to resolve it please suggest me.. 
```

/** 在第一次创建活动时调用。*/

```
@Override
public void onCreate(Bundle savedInstanceState)
{

super.onCreate(savedInstanceState);
ctx = this;
setVolumeControlStream(AudioManager.STREAM_MUSIC);
requestWindowFeature(Window.FEATURE_NO_TITLE);

Intent i = getIntent();
if (null == i || null == i.getExtras() ||
    !i.getExtras().containsKey("levels")) {

  activityCustomStarted = false;
  setContentView(R.layout.main);
  mGameView = (DroidGameView)findViewById(R.id.game);
} else {

  SharedPreferences sp = getSharedPreferences(
      FrozenDroid.PREFS_NAME, Context.MODE_PRIVATE);
  int startingLevel = sp.getInt("levelCustom", 0);
  int startingLevelIntent = i.getIntExtra("startingLevel", -2);
  startingLevel = (startingLevelIntent == -2) ?
                  startingLevel : startingLevelIntent;
  activityCustomStarted = true;
  mGameView = new DroidGameView(this, i.getExtras().getByteArray("levels"),
                           startingLevel);
  setContentView(mGameView);
}

mGameThread = mGameView.getThread();

if (savedInstanceState != null) {
  mGameThread.restoreState(savedInstanceState);
}
mGameView.requestFocus();

setFullscreen(); 
```

}

xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<com.shagunstudio.bubbleshoot.DroidGameView
android:id="@+id/game"
android:layout_width="fill_parent"
android:layout_height="fill_parent" />

</FrameLayout> 
```

清单中的活动

```
<activity
android:name="com.shagunstudio.bubbleshoot.FrozenDroid"
android:alwaysRetainTaskState="true"
android:configChanges="orientation|keyboard"`enter code here`
android:label="@string/app_name"
android:launchMode="singleInstance"
android:screenOrientation="portrait" >
<intent-filter>
<action android:name="android.intent.action.FrozenDroid" />

<category android:name="android.intent.category.DEFAULT" />
</intent-filter>
<intent-filter>
<action android``:name="com.shagunstudio.bubbleshoot.GAME" />
<category android:name="android.intent.category.DEFAULT" />
</intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:04:47.183

检查代码中的 onCreate()、onStart() 和 onResume() 方法，您可能正在执行一些耗时的阻塞任务。在单独的线程上加载繁重的后台任务。

[使用Traceview 和 dmtracedump 分析](http://developer.android.com/tools/debugging/debugging-tracing.html)您的代码，以检查哪些需要更多时间。

# iphone - 用于长进程的 iPhone 计时器任务

> ID：15308136
> 
> 赞同：0
> 
> 时间：2013-03-09T06:50:48.437
> 
> 标签：iphone, objective-c, xcode, timer

当应用程序进入后台状态时，用于在后台运行的时间不起作用。以下是代码。

在 AppDelegate.h 中，

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    BOOL status;
    UIBackgroundTaskIdentifier bgTask;
} 
```

在 AppDelegate.m

```
 - (void)applicationDidEnterBackground:(UIApplication *)application
{

    NSAssert(self->bgTask == UIBackgroundTaskInvalid, nil);

    bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIBackgroundTaskInvalid;
        });
    }];

    dispatch_async(dispatch_get_main_queue(), ^{

        if ([application backgroundTimeRemaining] > 1.0) {
            // Start background service synchronously
            [[vController getInstance] run];

        }

        [application endBackgroundTask:self->bgTask];
        self->bgTask = UIBackgroundTaskInvalid;

    });
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
    NSAssert(self->bgTask == UIBackgroundTaskInvalid, nil);

    bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIBackgroundTaskInvalid;
        });
    }];

    dispatch_async(dispatch_get_main_queue(), ^{

        if ([application backgroundTimeRemaining] > 1.0) {

            // Start background service synchronously
            [[vController getInstance] stopbackground];

        }

        [application endBackgroundTask:self->bgTask];
        self->bgTask = UIBackgroundTaskInvalid;

    });
} 
```

在视图 Controller.h 中，

```
@interface vController : UIViewController <AVAudioPlayerDelegate>
-(void) run;
-(void) stopbackground;
-(void) getMessage:(NSTimer*)theTimer;;
+(vController*) getInstance;
@property (nonatomic,retain) NSTimer * timer;
@end 
```

视图控制器.m，

```
@implementation vController
@synthesize timer;
vController *tvc;

- (void)viewDidLoad
{
    [super viewDidLoad];
    tvc = self;
    // Do any additional setup after loading the view, typically from a nib.
}

+ (vController*) getInstance
{
    return tvc;
}

- (void)stopbackground
{
    timer = [NSTimer scheduledTimerWithTimeInterval:15.0 target:self selector:@selector(getMessage:) userInfo:nil repeats:YES];
}

- (void)run
{
    timer = [NSTimer scheduledTimerWithTimeInterval:15.0 target:self selector:@selector(getMessage:) userInfo:nil repeats:YES];
}

- (void) getMessage:(NSTimer*) theTimer
{

    NSError *error;

    NSString *path = [[NSBundle mainBundle] pathForResource:@"alert" ofType:@"mp3"];
    AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:&error];
    if (theAudio == nil) {
        NSLog(@"%@", [error description]);
    }
    NSLog(@"Hi");
    theAudio.delegate = self;
    theAudio.numberOfLoops = 1;
    [theAudio play];
}

- (void) dealloc{
    [timer release];
    [super dealloc];
} 
```

我在模拟器 6.0 上使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:04:27.383

根据您的用例，这可能是不可能的。也就是说，Apple 不允许您在“后台”执行代码，除非您正在执行以下任务之一：

*   在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
*   让用户随时了解其位置的应用程序，例如导航应用程序
*   支持互联网协议语音 (VoIP) 的应用程序
*   需要下载和处理新内容的报亭应用
*   从外部配件接收定期更新的应用程序

阅读更多：http: [//developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:32:17.917

通过创建实例，您可以在任何视图控制器中运行后台任务，如下所示：

// 在文件中声明以下内容`YourViewController.h`。

```
+ (YourViewController *)getInstance;
- (void)run;
-(void)stopbackground; 
```

// 在 YourViewController.m 文件中定义 Vollowing。

```
static  YourViewController *instance = NULL;

+(YourViewController *)getInstance {

    @synchronized(self) {
        if (instance == NULL) {
            instance = [[self alloc] init];
        }
    }
    return instance;
}

- (void)run

{
// strat Back ground task
}
-(void)stopbackground
{
// Stop Background task
} 
```

在`AppDelegate.h`文件中声明以下内容

```
UIBackgroundTaskIdentifier bgTask; 
```

在`AppDelegate.m`文件中使用以下方法。

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
    NSLog(@"Application entered background state.");

    // bgTask is instance variable
    NSAssert(self->bgTask == UIBackgroundTaskInvalid, nil);

    bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIBackgroundTaskInvalid;
        });
    }];

    dispatch_async(dispatch_get_main_queue(), ^{

        if ([application backgroundTimeRemaining] > 1.0) {
            // Start background service synchronously
[[YourViewController getInstance] run];

        }

        [application endBackgroundTask:self->bgTask];
        self->bgTask = UIBackgroundTaskInvalid;

    });
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{

    NSLog(@"Application entered background state.");

    // bgTask is instance variable
    NSAssert(self->bgTask == UIBackgroundTaskInvalid, nil);

    bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIBackgroundTaskInvalid;
        });
    }];

    dispatch_async(dispatch_get_main_queue(), ^{

        if ([application backgroundTimeRemaining] > 1.0) {

 // Start background service synchronously
  [[YourViewController getInstance] stopbackground];

        }

        [application endBackgroundTask:self->bgTask];
        self->bgTask = UIBackgroundTaskInvalid;

    });

    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
} 
```

# c++ - 无父按钮

> ID：15308137
> 
> 赞同：0
> 
> 时间：2013-03-09T06:50:56.810
> 
> 标签：c++, winapi

我可以在 WINAPI 中创建没有父级的按钮吗？

我试着做：

```
CreateWindowEx(0, "Button", "BTN", WS_POPUP | BS_PUSHBUTTON, 0, 0, 15, 15, nullptr, nullptr, nullptr, nullptr); 
```

然后稍后将父级设置为指定的窗口，并使用 ShowWindow 显示按钮。这确实创造了一个漂亮的按钮。

但是，该按钮没有 ID，并且无法在 WM_COMMAND 中识别，因为 ID 为 0。如果两个按钮没有父级，则无法区分它们。现在，如果我通过 HMENU 参数给它一个 ID：

```
CreateWindowEx(0, "Button", "BTN", WS_POPUP | BS_PUSHBUTTON, 0, 0, 15, 15, nullptr, 15, nullptr, nullptr); 
```

GetLastError() 打印“无效的菜单句柄”并且不会创建按钮。

如果我没有给它父母和 WS_CHILD，它会说不能创建一个可以理解的顶级子窗口。

所以我所做的就是将 Parent 设置为 GetDesktopWindow() 并给按钮一个 ID。这有效，但按钮不是没有父母的..

那么有没有办法给一个按钮一个ID（以便在WM_COMMAND中识别它），同时让它的父级为NULL，以便我以后可以设置父级？Windows 窗体是如何做到的？在您执行 Form.add(ButtonName); 之前，按钮可以是无父的。

在WINAPI中能达到同样的效果吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T12:39:01.717

从表面上看，这是一个非常愚蠢的问题。

按钮控件根据定义是子控件，因此对`CreateWindowEx`用于创建按钮的函数的调用也应该指定`WS_CHILD`样式。

当然，正如您所提到的，您不能创建没有父级的子控件；你会得到一个错误。没有顶级子窗口之类的东西。

那么，最初的问题的答案

> 我可以在 WINAPI 中创建没有父级的按钮吗？

显然没有。按钮是子控件，所有子控件都必须有父控件。

仅仅因为 Windows 允许您`WS_POPUP`在创建按钮控件时指定标志而不意味着它是有效的组合。

我强烈建议重新阅读该函数[的文档。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680.aspx)`CreateWindowEx`特别要注意，`hMenu`参数的含义是重载的。如果您正在创建一个重叠或弹出窗口（`WS_OVERLAPPED`或`WS_POPUP`），它指定一个菜单句柄。如果您正在创建子窗口 ( `WS_CHILD`)，它会指定子窗口的标识符。根据窗口的样式，对这两种情况使用相同的参数这一事实应该告诉你一些事情。

> Windows 窗体是如何做到的？在您执行 Form.add(ButtonName); 之前，按钮可以是无父的。

他们肯定不能。在将按钮控件添加到窗体或其他父控件之前，不会创建按钮控件。类`System.Windows.Forms.Button`构造函数不会创建 Win32 窗口。它只包含一组必要的样式，用于在适当的时候创建底层 Win32 窗口。

当然，您可以通过编写 C++`Button`类来做同样的事情。一个简单的实现将只有与参数相对应的成员变量`CreateWindowEx`和一个成员函数，一旦所有成员都已设置，该`Create`成员函数将实际调用以创建 Win32 窗口。如果尚未将必要成员之一设置为有效值，则`CreateWindowEx`该方法可能会引发异常。`Create`

> 我解决了。我必须将 HWND_MESSAGE 作为父参数传递。当您调用 SetParent 时，该参数将更改为 Parent 的句柄，一切都很好。

不，这确实不是问题的“解决方案”。正如[kero 指出的那样](https://stackoverflow.com/a/15317139/366904)，您只需将按钮控件的父[级设置为仅消息窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#message_only)。同样，这似乎可行，但这是一件相当奇怪的事情，我几乎不推荐它作为解决方案。

如果您真的想破解它，我建议您创建自己的隐藏顶级窗口，以用作“无父”子控件的父级。然后，您可以使用相同的调用技巧来`SetParent`重新设置它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:30:23.030

> 我解决了。我必须将 HWND_MESSAGE 作为父参数传递。当您调用 SetParent 时，该参数将更改为 Parent 的句柄，一切都很好。

不，您没有得到“无父按钮”：仅消息按钮的父窗口是“主”仅消息窗口（“消息”类）。

# php - 在 PHP 中使用带有隐藏输入字段的标题

> ID：15308139
> 
> 赞同：0
> 
> 时间：2013-03-09T06:51:09.540
> 
> 标签：php, validation, header, hidden-field

我正在为我的 HTML FORM INPUT 字段在 php 文件中创建一个验证函数。如果未正确填写，该功能应跳回表单，如果填写正确，则应跳转到新页面。如何从表单发送信息，而无需使用标头在 URL 中写入信息？

index.php 中的表格：

```
<form method='post' action='validate.php'>
Name: <input type='text' name='name'>
Job: <input type='text' name='job'>
City: <input type='text' name='city'>
<input type='submit' value='Submit'>
</form> 
```

验证.php：

```
if (!empty($_REQUEST['name']) And (!empty($_REQUEST['job'])) And (!empty($_REQUEST['city']))){
$name = $_REQUEST['name'];
$job = $_REQUEST['job'];
$city = $_REQUEST['city'];
header("Location: go.php?name=$name&&job=$job&&city=$city");
}

else {
header("Location: index.php");
} 
```

如果只有一个字段未填写，我还希望跳转回 index.php 以获取已填写的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:52:46.920

你不应该那样做。
不要跳到任何地方。

*   使 index.php 成为表单的操作
*   在该文件中检测表单是否已发送并包含 Validate.php
*   如果验证失败，只需再次显示您的表单并填写所有字段（不要忘记 htmlspecialchars()）

HTML 标准要求使用 htmlspecialchars() 对**每个**表单值（以及 textarea 内容）进行编码

# ravendb - 上个月内的索引列表计数

> ID：15308142
> 
> 赞同：1
> 
> 时间：2013-03-09T06:51:20.007
> 
> 标签：ravendb

我希望能够从 RavenDB 中的集合中查询前 10 个文档，该集合按计数排序，并带有子列表中的约束。这是我的实体：

```
public class Post
{
    public string Title { get; set; }
    public List<Like> Likes { get; set; }
}

public class Like
{
    public DateTime Created { get; set; }
} 
```

我尝试过以下查询：

```
var oneMonthAgo = DateTime.Today.AddMonths(-1);
session
    .Query<Post>()
    .OrderByDescending(x => x.Likes.Count(y => y.Created > oneMonthAgo))
    .Take(10); 
```

Raven 抱怨应该在索引时间而不是查询时间上完成计数。我尝试使用以下代码将计数移动到索引：

```
public class PostsIndex : AbstractIndexCreationTask<Post>
{
    public PostsIndex()
    {
        var month = DateTime.Today.AddMonths(-1);
        Map = posts => from doc in posts
                       select
                           new
                               {
                                   doc.Title,
                                   LikeCount = doc.Likes.Count(x => x.Created > month),
                               };
    }
} 
```

添加此索引时，Raven 会抛出错误 500。

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:00:53.147

您可以通过创建一个 Map/Reduce 索引来展平帖子/喜欢，然后对其进行查询来做到这一点。

指数：

```
public class PostLikesPerDay : AbstractIndexCreationTask<Post, PostLikesPerDay.Result>
{
    public PostLikesPerDay()
    {
        Map = posts => from post in posts
                        from like in post.Likes
                        select new Result
                        {
                            Title = post.Title,
                            Date = like.Created,
                            Likes = 1
                        };

        Reduce = results => from result in results
                            group result by new
                            {
                                result.Title, 
                                result.Date.Date
                            }
                            into grp
                            select new Result
                            {
                                Title = grp.Key.Title,
                                Date = grp.Key.Date,
                                Likes = grp.Sum(l => l.Likes)
                            };
    }

    public class Result
    {
        public string Title { get; set; }
        public DateTime Date { get; set; }
        public int Likes { get; set; }
    }
} 
```

和查询：

```
using (var session = store.OpenSession())
{
    var oneMonthAgo = DateTime.Today.AddMonths(-1);
    var query = session.Query<PostLikesPerDay.Result, PostLikesPerDay>()
                        .Where(y => y.Date > oneMonthAgo)
                        .OrderByDescending(p => p.Likes)
                        .Take(10);

    foreach (var post in query)
    {
        Console.WriteLine("'{0}' has {1} likes on  {2:d}", post.Title, post.Likes, post.Date);
    }
} 
```

# php - 我的 SQL 查询根据表的其他列的值获取范围间隔中的值

> ID：15308146
> 
> 赞同：0
> 
> 时间：2013-03-09T06:51:50.563
> 
> 标签：php, mysql

嗨，我正在使用 PHP 和 mysql，我的数据库表为：

```
Code  Price
226   0.001
7565  0.001
7566  0.001
7567  0.001
7568  0.001
7569  0.001
7570  0.001
7571  0.001
7572  0.001
7583  0.002
7584  0.002
7585  0.003
7586  0.003 
```

**我需要输出为：**

```
Code  Price
226   0.001
756   0.001
757   0.001
7583  0.002
7584  0.002
7585  0.003
7586  0.003 
```

也就是说，如果在 10 的范围内，如果价格与它们相同，我必须修剪它的最后一个值，如果不同的价格在 10 的范围内，那么我的代码将保持原样。

如上所述，226 具有单个值，在 220 和 229 之间没有更多值，因此我们将此值设为 226 - 0.001，并且从 7565 到 7569，这些数字在 7560-7569 的范围内并且具有相同的价格，所以我将对这些使用分组并获得共同的价值 756 和 7583,7584,7585,7586，它们在 7580-7589 的范围内，但有两个价格值，所以我们不能将 group 用于全范围的代码，所以它将是它的。只有当代码在十个范围内并且价格相同时，我才需要修剪。

让我明确我的要求，我有国家名称、国家代码、城市代码和价格的数据库，我正在从 excel 中读取值。在国家/地区字段中，Excel 行中只有一个值，例如**225 或 2247 或 226**，而在城市代码中，将有对应于国家/地区的值，例如**120,123-129，165-169**可能是**1-5 等。**

通常我的要求是连接国家代码和相应的城市代码，如**225**，如果城市代码列包含**120,123-129、165-169，**那么值将是**225120,225123,225124,225125,225126,225127,225128,225129,225165, 225166,225167,225168,225169** 所以这是我原来的数据库场景。但是如果国家代码是 225 并且城市代码是空白的，并且 226 是另一个国家代码并且城市代码是空白的，那么还有一件事，因为对于正确的国家代码，城市代码将是空白的。所以正确的国家代码值不会被修剪，即使它们的价格相同，它们也会被视为**225,226 。**只有在连接城市代码的情况下，才会修剪这些值。

有没有最好的方法用 MySQL 查询来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:38:45.663

我认为没有办法以索引友好的方式编写此查询，因此如果它一直运行，您可能希望改用重组数据。

该查询将代码减少到 3 个字符，我认为这是正确的，因为 226 没有被缩短。

```
SELECT SUBSTR(Code,1,3) Code, Price FROM Test
GROUP BY SUBSTR(Code,1,3) HAVING COUNT(DISTINCT Price) = 1
UNION
SELECT Code, Price FROM Test WHERE SUBSTR(Code, 1, 3) IN
  (SELECT SUBSTR(Code,1,3) Code FROM Test
   GROUP BY SUBSTR(Code,1,3) HAVING COUNT(DISTINCT Price) > 1) 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/fbc10/2)。

编辑：在您更新您的要求后，我认为这将适用于您的动态长度，只要国家代码长度不变（3）；

```
SELECT SUBSTR(Code,1,GREATEST(3,LENGTH(Code)-1)) Code, Price FROM Test
GROUP BY SUBSTR(Code,1,GREATEST(3,LENGTH(Code)-1)) 
  HAVING COUNT(DISTINCT Price) = 1
UNION
SELECT Code, Price FROM Test
WHERE SUBSTR(Code, 1, GREATEST(3,LENGTH(Code)-1)) IN
  (SELECT SUBSTR(Code,1,GREATEST(3,LENGTH(Code)-1)) Code FROM Test
   GROUP BY SUBSTR(Code,1,GREATEST(3,LENGTH(Code)-1)) 
     HAVING COUNT(DISTINCT Price) > 1) 
```

[另一个 SQLfiddle](http://sqlfiddle.com/#!2/5d997/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:09:26.990

我想我明白你想要做什么。以下是一个非常低效的查询，旨在引导您了解如何在查询中执行此操作。如果它像你想要的那样工作，你可以优化它：

```
select distinct code, price
from (
    select case when pricecount>1 then code else code10 end as code,
    price
    from test
    join (
        select code10, count(distinct(price)) as pricecount
        from (
            select floor(code/10) as code10, price
            from test
        ) a group by code10
    ) b
    on floor(test.code/10)=b.code10
) c; 
```

# java - 使用 SimpleDateFormat 格式化日期

> ID：15308151
> 
> 赞同：1
> 
> 时间：2013-03-09T06:52:06.143
> 
> 标签：java, parsing, date, date-parsing

在使用简单的日期格式 API 解析以下日期时，我得到了解析器异常。

```
 String inputTimeStamp = "2012/07/19 09:49:00 - GMT -08:00";
  java.text.SimpleDateFormat dateformate= new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
  effDate = dateformate.parse(inputTimeStamp); 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:56:33.703

改变

```
java.text.SimpleDateFormat dateformate=
    new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

到

```
java.text.SimpleDateFormat dateformate=
    new SimpleDateFormat("yyyy/MM/dd HH:mm:ss"); 
```

您的 inputTimeStamp 中有斜杠 (/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:02:24.557

因为您正在解析格式不同的日期，所以您已将其描述为`SimpleDateFormat`. 如果`effDate`是类型并且应该保存格式化的日期，下面的代码可能会解决它，尽管and`String`之间不应该有空格。`GMT``-08:00`

```
 String inputTimeStamp = "2012/07/19 09:49:00 - GMT -08:00";
 SimpleDateFormat inputDateformat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss - z"); 
 SimpleDateFormat dateformate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
 effDate = dateformate.format(inputDateFormat.parse(inputTimeStamp)); 
```

我也强烈推荐[joda time](http://joda-time.sourceforge.net)，特别是当你想对日期进行计算时。

```
 String inputTimeStamp = "2012/07/19 09:49:00 - GMT -08:00";
 DateTimeFormatter inputDateformat = DateTimeFormat.forPattern("yyyy/MM/dd HH:mm:ss - z Z"); 
 DateTimeFormatter dateformate = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss");
 effDate = dateformate.print(inputDateFormat.parseDateTime(inputTimeStamp)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:00:26.663

模式将是：`yyyy/MM/dd HH:mm:ss - z`其中 z 代表通用时区。[简单日期格式](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T07:09:58.273

试试这个：

```
new SimpleDateFormat("yyyy/MM/dd HH:mm:ss - z"); 
```

看到[这个](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)FYR

# javascript - jquery ui 在父子问题上可删除

> ID：15308152
> 
> 赞同：5
> 
> 时间：2013-03-09T06:52:37.280
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery ui 可放置小部件。我有以下结构：

[**示例小提琴**](http://jsbin.com/erevig/2/edit)

```
 <div class="parent">
    parent
   <div class="child">
     child
   </div>
  </div> 
```

父元素和子元素都是可放置的，并且都接受相同的项目。我的问题是当我将元素放在子元素上时，父放置事件也在执行（*请检查小提琴*）。我怎样才能阻止这种行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T07:02:42.990

我想更好的方法是使用 droppable 的贪婪选项。如果您发现任何问题，请不要忘记通过 API。[http://api.jqueryui.com/droppable/#option-greedy](http://api.jqueryui.com/droppable/#option-greedy)

这是您的代码在贪婪选项下的样子

```
$(".child").droppable({
    接受：'.item'，
    贪心：真的，
    下降：函数（e，ui）{
     alert("放在孩子身上");
    }
});

```

给你……！！！

# ruby-on-rails - CSV 导出给 # 和类似的条目而不是真实数据？

> ID：15308155
> 
> 赞同：0
> 
> 时间：2013-03-09T06:52:54.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在关注这个[http://railscasts.com/episodes/362-exporting-csv-and-excel](http://railscasts.com/episodes/362-exporting-csv-and-excel)，它看起来很简单。我已包含“csv”并将代码放入控制器索引文件和模型中。

现在，当我单击 /products.csv 时，它会导出 csv 中的产品列表，但它没有实际数据，而是具有像**#**这样的条目，我做错了什么？

编辑 - 这是 product.rb

```
 attr_accessible :name, :size, :email

  def self.to_csv
    CSV.generate do |csv|
      csv << column_names
      all.each do |product|
        csv << product.attributes.values_at(*column_names)
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:38:41.100

在您的产品控制器中定义如下方法：

def export_csv

```
 @Products = Product.find(:all)
    csv = CSV.generate do |csv|
        # header row
        csv << ["product_name","product_type"]
        # data row
        @products.each do |t|
            csv << [t.product_name, t.product_type]
        end
    end
    send_data(csv, :type => 'text/csv')
end 
```

在您的路线中：
匹配 'csv' => 'products#export_csv', :as => :csv
在您看来，请提供 CSV 链接：
link_to "CSV", csv_path

# algorithm - 在树中的多条路径之间找到共同的最短边

> ID：15308156
> 
> 赞同：0
> 
> 时间：2013-03-09T06:53:12.117
> 
> 标签：algorithm, data-structures, tree, graph-theory

给定一个无向的加权树（N 个节点，N-1 个双向边，不一定是二叉树）。输入将是一些节点之间的简单路径（从开始节点到最低共同祖先到结束节点），例如 1->4、2->10。找到所有给定路径的公共（属于）最短边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:00:15.997

Basically, have a count at each node for number of paths crossing it. After setting up these counts, process the tree and find the shortest common edge. A common edge would be one where the counts of each end-point would be equal to the number of paths.

```
i = 0

// set up counts
for each path p
  for each node n on path
    if n.count != i // early path stop condition, past common ancestor
      break // go to next path
    n.count++
  i++

current = root
shortestEdge = null

// find shortest edge
while true
  for each child c of current
    if c.count == pathCount
      shortestEdge = shortest(shortestEdge, edge(current, c))
      current = c
      break // out of for-loop
    else
      stop // stop while-loop 
```

# android - APK 的 Android 安全性

> ID：15308157
> 
> 赞同：0
> 
> 时间：2013-03-09T06:53:58.027
> 
> 标签：android

我正在为我的客户开发一个 android 应用程序。他希望我将 apk 提交给他进行测试。我几乎完成了申请，我想实施某种安全措施，以确保我的客户不会欺骗我，直到付款完成。

有没有办法在代码中实现任何类型的安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:04:37.993

你听说过[Proguard](http://developer.android.com/tools/help/proguard.html)吗？您想要的这个功能称为[代码混淆](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)。就像评论中指出的那样，这是一个[重复的问题](https://stackoverflow.com/questions/2531187/android-and-obfuscation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:12:50.930

如果您只需要向他/她发送 apk，您应该混淆您的源代码。可以参考这个链接——<a href="http://developer.android.com/tools/help/proguard.html" rel="nofollow">http://developer.android.com/tools/help /proguard.html，如果你已经完成了，你不必太担心，因为源代码在你手中，而且很难通过保留获得源代码。再说你的项目还没有完成。最后，即使你的项目完成了，它仍然可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T15:40:24.910

github 上这个名为[AndroidTimeLock](https://github.com/chrisjenx/AndroidTimeLock)的库可能很有用。它专为发送将过期并停止工作的开发/测试构建而设计。当然，如果相关人员是技术人员并确定他们*可以*反编译应用程序，则删除时间锁检查并重新编译。

添加代码混淆proguard（或者我更喜欢付费的DexGuard）当然会增加这个难度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-01T07:27:06.690

你可以让你的核心代码构建一个dex格式的文件，然后使用RC5等算法对你的dex文件进行加密，最后把dex文件放到Asset文件中，当你的项目需要核心代码时，你可以动态加载/。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-13T11:52:35.423

我已经汇总了几乎所有的安全漏洞以及在将您的应用程序提交到 Play 商店之前要采取的措施。你可以看看[这里](https://github.com/rehmanmuradali/android-security-guides)。

# python - 在python中使用返回的变量

> ID：15308161
> 
> 赞同：1
> 
> 时间：2013-03-09T06:54:43.283
> 
> 标签：python, function, return

为什么以下内容不允许我`os`在函数返回后使用该变量？该`os`模块没有被导入，所以这根本不应该是一个问题。当我在函数完成后调用`Begin()`函数并打印`os`变量时，python 说变量未定义。

```
def Begin():
    os = raw_input("Choose your operating system:\n[1] Ubuntu\n[2] CentOS\nEnter '1' or     '2': ")
    if os != '1' and os != '2':
        print "Incorrect operating system choice, shutting down..."
        time.sleep(3)
        exit()
    else:
        return os

Begin()
print os 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T06:55:35.433

您必须将返回的结果分配给实际变量。函数中的`os`in 只存在于函数作用域内，不能在函数作用域外使用。

```
result = Begin()
print result 
```

正如@nneonneo 提到的，`os`它是标准库的一部分，也是一个常用的模块，`os`用作变量名会使读者感到困惑，如果`os`被导入，则会覆盖它。

另一个建议：

```
if os != '1' and os != '2': 
```

可以更简洁地写为

```
if os not in ('1', '2'): 
```

当您进行更多类似的比较时，这也使您更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:22:20.160

在您的代码中，os 是 Begin() 的局部变量，正如@nneonneo 所建议的那样，不要使用标准模块名称。

如果您只是想打印值，您可以简单地做

```
print Begin() 
```

如果您需要使用 Begin() 的返回值，则将其分配给一个变量，您可以进一步使用它。

# iphone - 如何从通讯录中检索 10-10 个联系人

> ID：15308162
> 
> 赞同：0
> 
> 时间：2013-03-09T06:54:44.693
> 
> 标签：iphone, ios, objective-c, addressbook

![这是默认的联系人图片](../Images/e96d7c078f386287ff005527a8ed32f2.png)

我想实现一次从通讯录中获取或加载 10 个联系人。任何可能从通讯录中检索所有联系人，但一次显示 10-10 个联系人。我正在检索所有 iphone 的图像、名字、姓氏联系人。我想实现这个以电子邮件检索电子邮件联系人，也像 10-10 个电子邮件联系人。 ![像这张图片一样，要检索的联系人或电子邮件联系人](../Images/c16736af0c2760a93e6fdc3a18cf47c8.png) 这是我的示例代码：

```
SData *imageData = (NSData *)CFBridgingRelease(ABPersonCopyImageDataWithFormat(ref, kABPersonImageFormatThumbnail)) ;

            CFStringRef firstName1, lastName1;

            firstName1 = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
            lastName1  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
            NSString *name=[[NSString alloc]init];

            if ([[NSString stringWithFormat:@"%@",firstName1] isEqualToString:@"(null)"] && [[NSString stringWithFormat:@"%@",lastName1] isEqualToString:@"(null)"])
            {

                name = @"No Name";
            }
            else if([[NSString stringWithFormat:@"%@",firstName1] isEqualToString:@"(null)"] && ![[NSString stringWithFormat:@"%@",lastName1] isEqualToString:@"(null)"])
            {

                name = [NSString stringWithFormat:@"%@",lastName1];
            }

           else
           {
                name = [NSString stringWithFormat:@"%@",firstName1];

           }

           name= [ name  capitalizedString];

            EmailandCotactsModel *emailmodel=[[EmailandCotactsModel alloc]init];
            emailmodel.emailemailstring=(__bridge NSString *)(contno);
            emailmodel.emailusernamestring=name;

            if(!imageData)
            {
                NSString *path = [[NSBundle mainBundle] pathForResource:@"NoImage" ofType:@"png"];
                NSData *photoData = [NSData dataWithContentsOfFile:path];
                emailmodel.emailimagesData=photoData;
            }
            else
            {
                emailmodel.emailimagesData=imageData;

            }

            [emailarray addObject:emailmodel];

            callsmsDataBool=NO;

            NSLog(@"table email count %d and i %d",emailarray.count,tablecountint);
            if(emailarray.count==tablecountint)
            {

                NSLog(@"table email reload");

                tablecountint=tablecountint+10;

                dispatch_async( dispatch_get_global_queue(0,0),^{
                    [self reloadtable];
                });

                NSLog(@"perform selection in bg");

            }

        }
    }

    [self.tableview reloadData];

   if(!emailarray.count && [socialstring isEqualToString:@"Email"])
   {
       selectedlabel.text=@"Emails not found";
   }
   else if(emailarray.count && [socialstring isEqualToString:@"Email"])
   {
      // selectedlabel.text=@"Email";

       selectedlabel.text=[NSString stringWithFormat:@"%ld",nPeople];
   }
   else if(!emailarray.count && [socialstring isEqualToString:@"SMS"])
   {
       selectedlabel.text=@"Phone no's not found";
   }
   else if(emailarray.count && [socialstring isEqualToString:@"SMS"])
   {
       selectedlabel.text=@"SMS";
   }
   else
   {
        selectedlabel.text=@"";
   }

    [tableview reloadData]; 
```

任何有价值的建议将不胜感激......

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:10:39.110

在一个数组中获取所有联系人后，将十个联系人复制到另一个数组并使用该新数组校准表重新加载方法，方法是最初调用此方法 lowerlimit = 0 和 upperlimit=10;

```
-(void)tabledataloadingmethod
{
    for (lowerlimit=0+lowerlimit; lowerlimit<upperlimit; lowerlimit++)
    {
        if (lowerlimit<[self.array1 count])
        {
            OBJECT *obj=[self.array1 objectAtIndex:lowerlimit];
            [self.array2 addObject:obj];

        }

    }
    [self.tbleview reloadData];

} 
```

在 table delagete 方法 cellforrowatindex 中使用这个

```
 if ([self.array2 count]==indexPath.row)
            {

                UITableViewCell *cell1=[self.tbleview dequeueReusableCellWithIdentifier:@"cells"];
                if(cell1==nil)
                {
                    cell1=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"Cells"];
                }

                cell1.textLabel.textColor = [UIColor whiteColor];
                cell1.textLabel.text=@"Loading more...";

                [self performSelector:@selector(loadmorecells) withObject:nil afterDelay:0.2];

                return cell1;
  }    
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    if ([self.array2 count]>0 && ([self.array2 count]<[self.array1 count]))
    {
        return [self.array2 count]+1;
    }
    else
    {
        return [self.array2 count];
    }
} 
```

这里我们在 loadmorecells 方法中增加下限和上限

```
-(void)loadmorecells
    {

        lowerlimit = upperlimit;

        upperlimit = upperlimit +10;
        [self tabledataloadingmethod];
    } 
```

# ruby - Ruby 2 中的命名参数

> ID：15308163
> 
> 赞同：48
> 
> 时间：2013-03-09T06:54:49.037
> 
> 标签：ruby, ruby-2.0

我不完全理解 Ruby 2.0 中的命名参数是如何工作的。

```
def test(var1, var2, var3)
  puts "#{var1} #{var2} #{var3}"
end

test(var3:"var3-new", var1: 1111, var2: 2222) #wrong number of arguments (1 for 3) (ArgumentError) 
```

它被视为哈希。这很有趣，因为要在 Ruby 2.0 中使用命名参数，我**必须**为它们设置默认值：

```
def test(var1: "var1", var2: "var2", var3: "var3")
  puts "#{var1} #{var2} #{var3}"
end

test(var3:"var3-new", var1: 1111, var2: 2222) # ok => 1111 2222 var3-new 
```

这与 Ruby 之前使用默认参数值的行为非常相似：

```
def test(var1="var1", var2="var2", var3="var3")
  puts "#{var1} #{var2} #{var3}"
end

test(var3:"var3-new", var1: 1111, var2: 2222) # ok but ... {:var3=>"var3-new", :var1=>1111, :var2=>2222} var2 var3 
```

我知道为什么会发生这种情况以及它几乎是如何工作的。

但我只是好奇，如果我使用命名参数，我**必须使用参数的默认值吗？**

而且，谁能告诉我这两者之间有什么区别？

```
def test1(var1="default value123")
  #.......
end

def test1(var1:"default value123")
  #.......
end 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-09-17T18:19:45.147

我认为可以用明确的例子来解释您更新问题的答案。在下面的示例中，您具有显式顺序的可选参数：

```
def show_name_and_address(name="Someone", address="Somewhere")
  puts "#{name}, #{address}"
end

show_name_and_address
#=> 'Someone, Somewhere'

show_name_and_address('Andy')
#=> 'Andy, Somewhere' 
```

命名参数方法是不同的。它仍然允许您提供默认值，但它允许调用者确定要提供哪些参数（如果有）：

```
def show_name_and_address(name: "Someone", address: "Somewhere")
  puts "#{name}, #{address}"
end

show_name_and_address
#=> 'Someone, Somewhere'

show_name_and_address(name: 'Andy')
#=> 'Andy, Somewhere'

show_name_and_address(address: 'USA')
#=> 'Someone, USA' 
```

虽然这两种方法在不提供参数时确实是相似的，但当用户为方法提供参数时它们会有所不同。使用命名参数，调用者可以指定提供哪个参数。具体来说，最后一个示例（仅提供地址）在第一个示例中不太可实现；您只能通过向该方法提供两个参数来获得类似的结果。这使得命名参数方法更加灵活。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-09T10:27:56.340

您发布的最后一个示例具有误导性。我不同意这种行为与以前的行为相似。最后一个示例将参数散列作为第一个可选参数传入，这是另一回事！

如果您不想使用默认值，可以使用`nil`.

如果您想阅读一篇好的文章，请参阅“ [Ruby 2 Keyword Arguments](https://robots.thoughtbot.com/ruby-2-keyword-arguments) ”。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-10-11T03:09:37.553

我同意你的看法，要求默认值作为使用命名参数的代价是很奇怪的，显然 Ruby 维护者同意我们的观点！[从 2.1.0-preview1 开始，](http://rkh.im/ruby-2.1) Ruby 2.1 将放弃默认值要求。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-05-30T04:08:15.473

从[Ruby 2.1.0](https://github.com/ruby/ruby/blob/ruby_2_1/NEWS#L16-17)开始，您不再需要为命名参数设置默认值。如果您省略参数的默认值，调用者将需要提供它。

```
def concatenate(val1: 'default', val2:)
  "#{val1} #{val2}"
end

concatenate(val2: 'argument')
#=> "default argument"

concatenate(val1: 'change')
#=> ArgumentError: missing keyword: val2 
```

* * *

鉴于：

```
def test1(var1="default value123")
  var1
end

def test2(var1:"default value123")
  var1
end 
```

当不传递参数时，它们的行为方式相同：

```
test1
#=> "default value123"

test2
#=> "default value123" 
```

但是当参数被传递时，它们的行为会大不相同：

```
test1("something else")
#=> "something else"

test2("something else")
#=> ArgumentError: wrong number of arguments (1 for 0)

test1(var1: "something else")
#=> {:var1=>"something else"}

test2(var1: "something else")
#=> "something else" 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-09-10T21:10:59.357

这存在于所有其他答案中，但我想提取这个本质。

有四种参数：

```
 Required     Optional
Positional | def PR(a)  | def PO(a=1) |
Keyword    | def KR(a:) | def KO(a:1) | 
```

定义函数时，位置参数在关键字参数之前指定，必需参数在可选参数之前指定。

```
irb(main):006:0> def argtest(a,b=2,c:,d:4)
irb(main):007:1> p [a,b,c,d]
irb(main):008:1> end
=> :argtest

irb(main):009:0> argtest(1,c: 3)
=> [1, 2, 3, 4]

irb(main):010:0> argtest(1,20,c: 3,d: 40)
=> [1, 20, 3, 40] 
```

编辑：正如其他人所提到的，所需的关键字参数（没有默认值）是 Ruby 2.1.0 的新参数。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-12T18:35:39.830

```
def test(a = 1, b: 2, c: 3)
  p [a,b,c]
end

test #=> [1,2,3]
test 10 #=> [10,2,3]
test c:30 #=> [1,2,30] <- this is where named parameters become handy. 
```

您可以定义参数的默认值和名称，然后调用方法，如果您有基于散列的“命名”参数但无需在方法中定义默认值，您会调用它。

如果您使用散列，您将需要在您的方法中为每个“命名参数”使用它。

```
b = options_hash[:b] || 2 
```

如：

```
 def test(a = 1, options_hash)
    b = options_hash[:b] || 2
    c = options_hash[:c] || 3
    p [a,b,c]
  end 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-09T10:57:50.267

根据“[示例 Ruby 2.0.0](http://blog.marc-andre.ca/2013/02/23/ruby-2-by-example/) ”，您必须具有默认值：

> 在 Ruby 2.0.0 中，关键字参数必须具有默认值，否则必须在末尾被 **extra 捕获。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-16T11:46:14.413

把它留在这里是因为它对我帮助很大。

### 例子

假设你有这个：

```
def foo(thing, to_print)
  if to_print
    puts thing
  end
end

# this works
foo("hi", true)
# hi
# => nil 
```

所以你尝试添加参数名称，如下所示：

```
foo(thing: "hi", to_print: true)
# foo(thing: "hi", to_print: true)
# ArgumentError: wrong number of arguments (given 1, expected 2)
# from (pry):42:in `foo' 
```

但不幸的是它错误。

### 解决方案

只需在`:`每个参数的末尾添加一个：

```
def foo2(thing:, to_print:)
  if to_print
    puts thing
  end
end

foo2(thing: "hi", to_print: true)
# hi
# => nil 
```

它有效！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-08T08:53:55.663

您可以定义命名参数，例如

```
def test(var1: var1, var2: var2, var3: var3)
  puts "#{var1} #{var2} #{var3}"
end 
```

如果你不传递其中一个参数，那么 Ruby 会抱怨一个`undefined local variable or method`.

# javascript - 使用多项选择选项但以适当的下拉方式选择

> ID：15308164
> 
> 赞同：-1
> 
> 时间：2013-03-09T06:54:49.837
> 
> 标签：javascript, html

我有一个简单的城市下拉菜单，我想在其中使用多项选择选项。为此，我使用了 select 标签的多个属性，但通过使用它，下拉列表被转换为带有多个选择选项的框形区域。我想要的是下拉外观应该保持原样，即单击选择下拉应该出现，并且在其中我可以使用多个城市与 CTRL 并且其值将在 php 脚本中使用。我已经看到了多个 jquery 脚本，但我想知道是否有一些简单的方法可以做到这一点，而不是使用任何 jquery 或其他东西。有没有更简单的方法呢？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:04:00.233

请尝试以下代码：

```
<select id="city" multiple="multiple" name="city[]">
    <option>hawaii</option>
    <option>michigan</option>
    <option>southfield</option>
</select> 
```

并且您在 php 中获得多个城市值

```
echo $_POST['city']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:37:22.357

原则上，`size=1`属性 in`select`会告诉浏览器只显示一个选项，您可以使用脚本来更改`size`属性的值以创建下拉效果。在实践中，它大多不起作用。

一种更实用的方法是`select`最初设置元素的高度，然后在鼠标悬停和聚焦时更改高度。不幸的是，浏览器行为在调整元素大小方面并不一致，但结果可能是可以容忍的。请注意，选项中的字体大小默认会减小，因此调整大小有点棘手。在此示例中，我只是将字体大小设置为 100%，以便`em`可以以简单的方式使用该单位：

```
option { height: 1.3em; font-size: 100%; }
select { height: 1.3em; font-size: 100%;  }
select:hover, select:focus { height: 13em; } 
```

结果在某些浏览器上有点太小，在某些浏览器上有点太大，IE 没有显示任何箭头来表明它确实是一个下拉菜单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:32:14.940

HTML 下拉菜单是这样制作的，不允许多项选择，但您可以使用一些像**[这样](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)**的 jquery 插件来做到这一点，它比自己创建这样的插件要简单得多。

# javascript - 如何制作像地铁一样的水平滚动？

> ID：15308165
> 
> 赞同：2
> 
> 时间：2013-03-09T06:54:50.337
> 
> 标签：javascript, jquery

我需要做一些类似于 Windows 8 的 Metro 风格水平滚动的东西。例如，当用户将鼠标移动到角落时，滚动条也会随之移动。

我试过这段代码：

```
$(document).ready(function() {

    document.documentElement.onmousewheel = function (event) {
        $('body').scrollLeft($('body').scrollLeft() - event.wheelDelta);
    };
}); 
```

但是水平滚动并没有像我期望的那样工作。

我应该如何制作 Windows 8 风格的水平滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:01:37.887

检查 jquery 插件 jcarousel：

[http://sorgalla.com/projects/jcarousel/examples/static_auto.html](http://sorgalla.com/projects/jcarousel/examples/static_auto.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:51:44.310

我找到了答案：

为了获得水平滚动，Brandon Aaron（GitHub，下载）的鼠标滚轮插件将用于检测鼠标滚轮的移动，如按键，当然，将使用 jQuery 本身。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="js/jquery.mousewheel.js"></script> 
```

Javascript

```
$(document).ready(function() {
$('html, body, *').mousewheel(function(e, delta) {
    this.scrollLeft -= (delta * 40);
    e.preventDefault();
});
}) 
```

JavaScript 可以只添加到 Head 标记中。请注意，滚动适用于 html、body 和 *（所有内容）——这使其能够跨不同的浏览器工作。event.preventDefault() 只是禁用垂直滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:34:15.933

你可以试试[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)，支持水平和垂直滚动，并且易于设置样式并支持不同的缓动过渡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T09:04:07.517

你可以这样做： **HTML：**

```
<div class="hScroll">
    <div class="content">
        <!-- your content -->
    </div>
</div> 
```

**CSS**

```
.hScroll {
    position: relative;
    width: 99999em;
    height: 100%;
}
.content {
    position: relative;
    width: auto;
    height: 100%;
    float:left;
} 
```

**Javascript**

```
$(document).ready(function (){
    $('.hScroll').width($('.content').outerWidth());
});
document.documentElement.onmousewheel = function (event) {
    $('body').scrollLeft($('body').scrollLeft() - event.wheelDelta);
    event.preventDefault();
}; 
```

示例：http: [//jsfiddle.net/JEX23/](http://jsfiddle.net/JEX23/)

# c# - 用 Sendkeys 模拟 CTRL+C 失败

> ID：15308166
> 
> 赞同：3
> 
> 时间：2013-03-09T06:54:58.890
> 
> 标签：c#, registerhotkey

我对 Sendkeys 有一个奇怪的问题，我的应用程序基本上应该做的是，当我按下`ALT`+时`J`，它会模拟`CTRL`+`C`操作（在任何窗口上）以复制一些突出显示的文本，但是`CTRL`+`C`模拟不起作用。

```
[DllImport("user32.dll", SetLastError = true)]  
[return: MarshalAs(UnmanagedType.Bool)]  
static extern bool RegisterHotKey(IntPtr hWnd, int id, uint fsModifiers, uint vk);

private void Form1_Load(object sender, EventArgs e)
{
 RegisterHotKey(this.Handle,
 this.GetType().GetHashCode(), 1, (int)'J'); // Here it's waiting for the ALT+J 
}

protected override void WndProc(ref Message m) // Function to c
{
 if (m.Msg == 0x0312) // If ALT+J pressed
 {
     Copier(); // .. Simulate CTRL+C (but doesn't work)
 }
 base.WndProc(ref m);
}

public void Copier() // Function to simulate the CTRL+C
{
 Debug.WriteLine("Ok ");
 InputSimulator.SimulateModifiedKeyStroke(VirtualKeyCode.CONTROL, VirtualKeyCode.VK_C); // First way
 SendKeys.Send("^(c)"); // Second way
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T07:39:43.963

我认为发生这种情况是因为当您发送`CTRL`+时，`C`您已经按下了+的`ALT`修饰符。`ALT``J`

如果你把

```
Thread.Sleep(1000); 
```

就在发送密钥之前，您将有时间释放`ALT`+`J`然后`CTRL`+`C`将起作用。

此外，如果您打算检查热键何时释放，请检查[此](https://stackoverflow.com/questions/8783625/global-hotkey-release-keyup-win32-api)。

# java - Java中不重复的随机数生成

> ID：15308167
> 
> 赞同：0
> 
> 时间：2013-03-09T06:55:02.760
> 
> 标签：java, cryptography

我想了解有关伪随机数生成的说明。我的问题是：

*   在伪随机数生成中是否有机会获得重复数字？

*   当我用谷歌搜索时，我发现了真正的随机数生成。我可以得到一些真正的随机数生成算法，以便我可以使用它

    > SecureRandom.getInstance(字符串算法)

请以安全为优先进行指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T06:59:34.727

1）是的，您通常可以在 PRNG 中有重复的数字。实际上，如果你应用鸽子洞原理，证明非常简单（即，假设你在 32 位无符号整数集合上有一个 PRNG；如果你生成超过 2^32 个伪随机数，你肯定会有至少一个数字产生至少 2 次；在实践中，这会发生得更快；通常 PRNG 的算法将循环通过一个序列，并且您有一种方法来计算或估计该循环的大小，在该循环结束时，每个单个数字将开始重复，并且算法的图像通常比您从中获取数字的集合要小得多）*。*

如果您需要不重复的数字（因为安全性似乎是您关心的问题，请注意，这比允许重复数字的（伪）随机数序列*安全性低！！！），您可以执行以下操作：*

```
class NonRepeatedPRNG {
  private final Random rnd = new Random();
  private final Set<Integer> set = new HashSet<>();
  public int nextInt() {
    for (;;) {
      final int r = rnd.nextInt();
      if (set.add(r)) return r;
    }
  }
} 
```

请注意，`nextInt`上面定义的方法可能永远不会返回！谨慎使用。

2）不，没有“真正的随机数生成算法”之类的东西，因为算法是已知的，你可以控制和预测（即，只需运行它，你就有输出；你确切地知道它的输出下次你用相同的初始条件运行它时），而真正的 RNG 根据定义是完全不可预测的。

对于最常见的非安全相关应用程序（即科学计算、游戏等），PRNG 就足够了。如果安全是一个问题（即，您想要加密的随机数），那么 CSPRNG（加密安全 PRNG）就足够了。

如果您的应用程序没有真正的随机性就无法工作，我真的很想知道更多关于它的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T10:03:02.047

是的，任何随机数生成器都可以重复。非重复随机数问题有三种通用解决方案：

*   如果您想要一个大范围的数字，然后选择一个并拒绝它，如果它是重复的。如果范围很大，那么这不会导致太多的重复尝试。

*   如果您想要一个小范围内的大量数字，则将所有数字放在一个数组中并打乱数组。[Fisher-Yates](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)算法是阵列改组的标准。从打乱的数组中按顺序取出随机数。

*   如果您想要大范围的大量数字，请使用适当大小的加密算法。例如，对于 64 位数字，使用 DES 并按顺序加密 0、1、2、3、...。输出保证唯一，因为加密是可逆的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:23:52.430

伪 RNG 可以自我重复，但真正的 RNG 也可以自我重复——如果它们从不自我重复，它们就不是随机的。

一个好的 PRNG 一旦播种了一些（~128 位）真实熵，实际上与真正的 RNG 没有区别。与真正的 RNG 相比，您肯定不会得到明显更多的冲突或重复。

因此，您不太可能需要真正的随机数生成器，但如果您确实需要在[random.org](http://www.random.org/clients/http/)上查看 HTTP API 。他们的 API 由真正的随机源支持。随机性来自大气噪声。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:09:59.840

如果 PRNG 或 RNG 从不重复数字，那将是……真的可以预测，实际上！想象一下数字 1 到 8 上的 PRNG。您会看到它打印出 2、5、7、3、8、4、6。如果 PRNG 尽最大努力不重复自己，现在您知道下一个数字将是1 - 这不再是随机的了！

所以 PRNGs 和 RNGs 默认情况下会产生带有重复的随机输出。如果你不想重复，你应该使用像 Fisher-Yates Shuffle ( [http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle) ) 这样的洗牌算法来随机洗牌你的数字数组想要，随机顺序。

此外，如果您需要用于加密目的的随机数生成源，请为您的语言寻找加密 PRNG 提供商。只要它在密码学上很强大就应该没问题 - 真正的 RNG 要贵得多（或需要延迟，例如使用 random.org），而且通常不需要。

# php - 在文档查看器中查看存储为 BLOB 数据类型的文档？

> ID：15308170
> 
> 赞同：0
> 
> 时间：2013-03-09T06:55:12.897
> 
> 标签：php, upload, download, blob

我有一个网站，当用户上传文件或文档时，它以 BLOB 数据类型存储在数据库中。还有一个下载链接，可以从数据库中检索文档并让用户下载。现在我想在像谷歌文档查看器这样的文档查看器中查看这个文档，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:06:14.560

如果您知道正在下载的文件的类型，您可以使用简单示例：

```
$blob = "some data";

header('Content-type: image/jpeg'); // e.g. if a JPEG image
echo $blob; 
```

# perl - 在 perl 中写入管道

> ID：15308171
> 
> 赞同：1
> 
> 时间：2013-03-09T06:55:23.383
> 
> 标签：perl, pipe

我正在使用管道通过 Perl 脚本将命令传递给某个应用程序。所以我在管道上写命令。但我的问题是管道没有等到命令执行从应用程序端结束，它需要下一个命令。因此，在命令执行结束之前，它不会阻塞输入。我需要我的 Perl 脚本像 UNIX shell 一样工作。但它就像进程在后台运行一样发生。我使用 readling 来读取输入。

```
#!/usr/bin/perl -w

use strict;
use Term::ReadLine;

open (GP, "|/usr/bin/gnuplot -noraise") or die "no gnuplot";
use FileHandle;
GP->autoflush(1);
# define readline
$term = new Term::ReadLine 'ProgramName';
while (defined( $_ = $term->readline('plot>'))) {
    printf GP ("$_\n");
}
close(GP); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:36:44.417

我建议使用具体的 CPAN 模块，例如[Chart::Gnuplot](http://search.cpan.org/perldoc?Chart%3a%3aGnuplot)，这样您就可以进行高级别的控制

# mobile - 用于移动设备的引导固定标头

> ID：15308174
> 
> 赞同：1
> 
> 时间：2013-03-09T06:55:41.177
> 
> 标签：mobile, twitter-bootstrap

我正在使用电话间隙开发移动应用程序，对于 CSS，我使用了 Twitter Bootstrap，我需要在移动设备上固定一个标题，下面的代码不起作用并且标题不固定。

```
<div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <ul class="nav">
                    <li>some thing </li>
                    <li><a href="abc"><i class="icon-search icon-white"></i>
                    </a></li>
                    <li><a href="./index.html"><i class="icon-home icon-white"></i></a>
                    </li>
                    <li><a href=""><i class="icon-time icon-white"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div> 
```

我看到了下面的文章，它说 navbar-fixed-top 不适用于移动设备任何建议我如何获得固定标题，

# php - 如何格式化 var_dump 输出（$key 和 $value）

> ID：15308175
> 
> 赞同：-3
> 
> 时间：2013-03-09T06:55:54.910
> 
> 标签：php, arrays, variables

PHP 代码/index.php

```
<?php        
  var_dump($_POST);
?> 
```

代码

```
<html> 
<body> 
<form action="index.php" method="post"> 
Name: <input type="text" name="fname" /> 
Age: <input type="text" name="age" /> 
Addess: <input type="text" name="ads" /> 
<input type="submit" /> </form> 
</body> 
</html> 
```

输出

```
array(3) { ["fname"]=> string(5) "USER_INPUT_NAME" ["age"]=> string(6) "USER_INPUT_AGE" ["ads"]=> string(5) "USER_INPUT_ADDRESS" } 
```

所以我想做的是如何使用 foreach 将该输出格式化为普通数组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T07:10:12.047

如果您不需要提供的所有信息，`var_dump`可以使用 HTML`<pre>`标记`print_r`：

```
echo '<pre>'; print_r($_POST); echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T08:53:25.897

```
echo '<pre>'; print_r($query); echo '</pre>';
echo "<br>================================</br>";
echo '<pre>'; var_dump($query); echo '</pre>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:03:26.693

尝试这个 ：

```
foreach($_POST as $key=>$val) {
   if($key != 'submit') {
      echo $key . "=>" . $val . "<br/>";
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-24T09:17:31.067

如果您在可以安装 PHP 扩展的服务器上，请尝试[Xdebug](https://xdebug.org)。在知道它之前我已经使用了多年，因为它是[WampServer](http://www.wampserver.com)安装的一部分。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-09T06:56:58.837

继续，使用[foreach将输出格式化为普通数组](http://php.net/foreach)

# linux - GNU 库 - 哪个库有 _POSIX_OPEN_MAX 符号？

> ID：15308190
> 
> 赞同：0
> 
> 时间：2013-03-09T06:57:57.513
> 
> 标签：linux, shared-libraries, gnu, symbols, limits

我正在尝试在系统调用/接口级别上了解有关 Linux 的更多信息。从限制开始，我在 APUE 中读到 _POSIX_OPEN_MAX 等限制是符号。谷歌搜索后，我读到这些符号在库中。如何找到哪个库具有 _POSIX_OPEN_MAX 符号？我确实找到了有限制的头文件，但我想了解如何在我的 Linux 系统上编译的 GNU 库中找到这些头文件（使用 nm？）。有这么多的库，我不知道从哪里开始绘制这些符号的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:06:35.167

`_POSIX_OPEN_MAX`是一个宏，在编译时被替换。在大多数情况下，所有关于宏的信息在预处理后都会被丢弃，因此不存在这样的符号。

可以使用和标志包含有关宏的信息，但在构建系统库时不太可能使用这些选项*。*因此，简而言之，您很可能在其中任何一个中都找不到它。`gcc``-gdwarf-2``-g3`

# php - $_SERVER 信息是否敏感？

> ID：15308193
> 
> 赞同：2
> 
> 时间：2013-03-09T06:58:16.713
> 
> 标签：php, security, session

我正在我的 php 应用程序中编写一个错误提交类。我想`$_SERVER`在引发异常时捕获整个信息，如果用户决定提交错误报告，请将`$_SERVER`数组与其他有用信息（如问题描述、时间等）一起存储在数据库中。

我计划将捕获的数据传递`$_SERVER`给错误报告表单，`$_SESSION`但我担心如果我这样做，我会暴露可用于利用我的系统的数据。命名一对：

*   `SERVER_SOFTWARE`
*   `DOCUMENT_ROOT`

我是不是把自己置于危险之中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:04:21.380

我认为这样的课程没有意义。
如果您的代码可以自动、安全、准确地存储所有相关信息，为什么还要用户干预？

为什么你不能在抛出异常时在异常处理程序中记录所有相关信息？

从字面上回答你的问题 - 是的，一些服务器信息被认为是敏感的。
尽管我认为没有办法公开它，除非您对错误报告的想法是要求用户通过他们自己的电子邮件发送报告文本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T07:09:30.763

该课程不是必需的。

而是将此模板用于您的脚本：

```
try {
    // You usual script here - but do not use die - use throw new Exception(...)
    // Could use include directive for example

    // Of course you may need to re-throw some exceptions

} catch (Exception $e) {
    // Here you can record the fault (i.e. details of the exception $e,
    // server variables $_SERVER, S_SESSION and the like

    // Now give the user the internal server error and a pretty message saying
    // something along the lines that you are sorry and it is not their fault.
} 
```

此模板不会向远程客户端公开您站点的任何内部工作 - 没有安全隐患。

# git - Git 提交致命错误

> ID：15308197
> 
> 赞同：1
> 
> 时间：2013-03-09T06:59:17.000
> 
> 标签：git

当我进入控制台时：

```
git init
git add . 
```

一切都好

当我输入：

```
git commit -m "final" 
```

我得到：

```
error: object file .git/objects/18/d50376886bb9702194048cd450960abe40d223 is empty
error: unable to find 18d50376886bb9702194048cd450960abe40d223
fatal: 18d50376886bb9702194048cd450960abe40d223 is not a valid object 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:41:41.620

当您运行时`git add .`，您在当前目录中拥有的任何新文件和更改文件都会暂存到 git 的版本控制中。这是文件内容存储为 .git 下可用的 git 对象的地方`.git/objects`。

`18d50376886bb9702194048cd450960abe40d223`在您的情况下，会为此内容创建一个带有哈希的新 git 对象，该对象存储为`.git/objects/18/d50376886bb9702194048cd450960abe40d223`

问题看起来像，在你运行`git add`命令之后，这个文件要么没有被正确地写入硬盘，要么可能在以后被删除，甚至由于一些硬盘错误而损坏。

# php - 如何让 Ajax 在 Ajax 生成的 FancyBox 中执行？

> ID：15308200
> 
> 赞同：0
> 
> 时间：2013-03-09T07:00:28.017
> 
> 标签：php, javascript, html, ajax, fancybox

我在使用 FancyBox 插件时遇到问题。我正在尝试使用 Ajax 提交一个表单，然后打印一个很好的成功消息，还没有验证，试图让它工作。我可以使用 jQuery 提交并在 FancyBox 中显示任何输入的值。但是，当我尝试执行 Ajax 时，它只会关闭 FancyBox。我不是专家...

FancyBox 的内容是使用 Ajax 生成的，因为它需要来自数据库的数据。

以下是重要的代码部分：（文本为德语...）

**使用 Ajax 加载到 FancyBox 的文件**

```
 <script>
            $("#submit").click(function() {

                var login = $("#login").val();

                $.ajax({
                       type: "POST",
                       url: "handleuseredit.php",
                       cache: false,
                       data: { login:   login },
                       success: function(data){
                       if(data=='ok')
                       {
                            alert('Richtig.');
                       }
                       else
                       {
                            alert('Falsche Benutzername/Passwort Kombination.');
                       }
                    }
                });     
            });
    </script>
        <div class="login">
            <div class="widget_header">
                <h4 class="widget_header_title wwIcon i_16_wysiwyg">Benutzer Bearbeiten</h4>
            </div>
            <div class="widget_contents lgNoPadding">
            <form method="post" id="form-edit">
                <p id="errormessagehere"></p>
                <div class="line_grid">
                    <div class="g_3 g_3M"><span class="label">Benutzername</span></div>
                    <div class="g_9 g_9M">
                        <input type="text" name="login" id="login" value="<?php echo getusername($_GET['u']) ?>" class="simple_field tooltip" placeholder="Benutzername" autocomplete="off"></div>
                    <div class="clear"></div>
                </div>
                <div class="line_grid">
                    <div class="g_3 g_3M"><span class="label">Passwort</span></div>
                    <div class="g_9 g_9M">
                        ********
                    </div>
                    <div class="clear"></div>
                </div>
                <div class="line_grid">
                    <div class="g_6"><a href="" id="submit">Abschicken</a>
                    </div>
                    <div class="clear"></div>
                </div>
                </form>
            </div>
        </div> 
```

**这就是我如何称呼花式盒子**

```
$(document).ready(function() {

            $(".fancybox").fancybox({

                'scrolling'     : 'no',
                'padding'       : 0,
                'titleShow'     : false

            });

         }); 
```

handleuseredit.php 只是回显“ok”来满足数据变量的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:24:32.553

[您可以使用 fancybox 的第 2 版（ http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/) ）来测试类似的东西：

```
<script>
            $("#submit").click(function() {

                var login = $("#login").val();

                $.ajax({
                       type: "POST",
                       url: "handleuseredit.php",
                       cache: false,
                       data: { login:   login },
                       success: function(data){
                       if(data=='ok')
                       {
                         $.fancybox( '<h1>Richtig.</h1>' );
                       }
                       else
                       {
                         $.fancybox( '<h1>Falsche Benutzername/Passwort Kombination.</h1>' );
                       }
                    }
                });     
            });
    </script> 
```

# r - R中的平均前后插补

> ID：15308205
> 
> 赞同：3
> 
> 时间：2013-03-09T07:01:27.730
> 
> 标签：r, missing-data, imputation

我是 R 的新手。我的问题是如何使用缺失数据点之前和之后的平均值来估算缺失值？

例子;

使用每个 NA 的上下平均值作为估算值​​。

-第 3 行的平均值为 38.5

-第 7 行的平均值为 32.5

```
age
52.0
27.0
NA
23.0
39.0
32.0
NA
33.0
43.0 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T07:42:01.567

这是一个使用 from `na.locf`from`zoo`包的解决方案，它将每个 NA 替换为它之前或之后的最近的非 NA。

```
0.5*(na.locf(x,fromlast=TRUE) + na.locf(x))
[1] 52.0 27.0 25.0 23.0 39.0 32.0 32.5 33.0 43.0 
```

如果您有多个连续的 NA，则此处的优势。

```
x <- c(52, 27, NA, 23, 39, NA, NA, 33, 43)
0.5*(na.locf(x,fromlast=TRUE) + na.locf(x))
[1] 52 27 25 23 39 36 36 33 43 
```

**EDIT** `rev`参数已被弃用，因此我将其替换为`fromlast`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:38:41.873

只是另一种方式：

```
age <- c(52, 27, NA, 23, 39, 32, NA, 33, 43)
age[is.na(age)] <- apply(sapply(which(is.na(age)), "+", c(-1, 1)), 2, 
                         function(x) mean(age[x]))
age
## [1] 52.0 27.0 25.0 23.0 39.0 32.0 32.5 33.0 43.0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T07:09:11.933

这将是您可以采取的基本手动方法：

```
age <- c(52, 27, NA, 23, 39, 32, NA, 33, 43)
age[is.na(age)] <- rowMeans(cbind(age[which(is.na(age))-1], 
                                  age[which(is.na(age))+1]))
age
# [1] 52.0 27.0 25.0 23.0 39.0 32.0 32.5 33.0 43.0 
```

或者，因为您似乎只有一列`data.frame`：

```
mydf <- data.frame(age = c(52, 27, NA, 23, 39, 32, NA, 33, 43))

mydf[is.na(mydf$age), ] <- rowMeans(
  cbind(mydf$age[which(is.na(mydf$age))-1],
        mydf$age[which(is.na(mydf$age))+1])) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-07T09:20:42.813

您正在寻找移动平均插补 - 您可以为此使用**imputeTS的****na_ma**函数。

 **```
library(imputeTS)
x <- c(52, 27, NA, 23, 39, NA, NA, 33, 43)
na_ma(x, k=1, weighting = "simple") 
```

> [1] 52.00000 27.00000 25.00000 23.00000 39.00000 31.66667 38.33333 33.00000 43.00000

这正好产生了所需的结果。使用**k**参数，您可以指定计算时要考虑每边有多少邻居。**

# php - 将下拉列表输出到 TPL 文件

> ID：15308221
> 
> 赞同：0
> 
> 时间：2013-03-09T07:03:18.510
> 
> 标签：php, html, mysql, drop-down-menu

我有一些 PHP 代码可以正常工作。但是我想将下拉列表输出到我的 TPL 文件。我怎样才能做到这一点？

```
<?php

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name ORDER BY SORT_ORDER ASC";
$result=mysql_query($sql);
if ($result === false) { echo "An error occurred."; }

?>

<html>
<head>
<title></title>
</head>
<body>
<select name="usrname" id="usrname">
<option>Select employ</option>
<?php
while($rows=mysql_fetch_array($result)){
?>
<option value="<? echo $rows['ID']; ?>"><? echo $rows['TITLE']; ?></option>
<?php
}
mysql_close();
?>
</select>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:07:38.753

```
<option value="<? echo $rows['ID']; ?>"><? echo $rows['TITLE']; ?></option> 
```

你忘了`php text in <?php .... ?>`..请像这样更改此代码..

```
<option value="<?php echo $rows['ID']; ?>"><?php echo $rows['TITLE']; ?></option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:27:27.240

.tpl 是什么意思？

您可以将“while (...) {...}”部分转移到另一个文件（比如 select.inc.php）并包含它

但是如果你想要一个 $tpl 对象，首先创建一个类，例如在*template.class.php*：

```
class Template {

    private $file;
    public $result;

    public function __construct($file) {
        $this->file = $file;
    }

    public function display() {
        ob_start();
        include $this->file;
        ob_end_flush();
    }
} 
```

包含它并创建模板文件*select.tpl*：

```
<select name="usrname" id="usrname">
<?
while($rows=mysql_fetch_array($this->result)) {
?>
    <option value="<?=$rows['id']?>"><?=$rows['name']?></option>
<?
}
?>
</select> 
```

最后在脚本中创建一个实例并调用 display() 方法：

```
$tpl = new Template('select.tpl');

$tpl->result = $result;

$tpl->display(); 
```

# iphone - ABPeoplePickerNavigationController UITableView 索引

> ID：15308222
> 
> 赞同：0
> 
> 时间：2013-03-09T07:03:21.087
> 
> 标签：iphone, ios, objective-c

我是子类`ABPeoplePickerNavigationController`化，我想自定义它的 UITableView 右索引，表格视图右侧的字母。

我想添加我自己的符号。

我怎样才能访问这个数组？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:53:06.540

我建议只创建自己的自定义 UIViewController 并自己制作联系人表格视图。这很容易做到，这样您就可以自定义 cellForRowAtIndexPath 中的单元格。那将是完成任务的相对简单的方法....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T09:07:50.363

[文档](https://developer.apple.com/library/ios/documentation/AddressBookUI/Reference/ABPeoplePickerNavigationController_Class/Reference/Reference.html)指出：

> ABPeoplePickerNavigationController 类不支持子类化。

# ruby-on-rails - RubyOnRails - 如何更改 ActiveRecords 的分页顺序

> ID：15308224
> 
> 赞同：0
> 
> 时间：2013-03-09T07:03:36.633
> 
> 标签：ruby-on-rails, pagination

我正在构建一个笔记应用程序。我们有一个“笔记”功能，可以按照创建顺序显示用户的笔记。（最新到底部）。有一个按钮可以让用户复制笔记；复制后，注释被添加到底部。如何将注释直接添加到下方？

例如：

之前：注释 1 注释 2 <-- 用户在此处单击“复制”按钮注释 3

实际结果：注 1 注 2 注 3 注 2（副本）

期望结果：注释 1 注释 2 注释 2（副本）注释 3

我的一些想法是添加一个 db 列，该列指定项目的显示顺序，然后基于该列进行分页。有没有更直接的方法来解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:55:37.937

我能想到的方法只有两种：

1.  如您所述，创建一个名为“order”的列，以便您可以以编程方式设置顺序。

2.  创建副本时，破解**created_at**以复制与您复制的前一个相同的副本。您已经按**created_at**排序，因此它将在它旁边结束。

我推荐选项 1，因为如果您选择选项 2，created_at 将不可信。

# iphone - 使用 CLGeocoder 将 NSString 纬度/经度坐标转换为城市、州和时区

> ID：15308225
> 
> 赞同：4
> 
> 时间：2013-03-09T07:03:39.020
> 
> 标签：iphone, ios, objective-c, xcode

我有一个视图控制器，它从应用程序委托中提取用户的纬度和经度坐标。这很好用，但我还需要用户的城市、州和时区。我知道我应该为此使用 CLGeocoder（请参阅最后一段代码），但不知道如何将它们组合在一起。我只需要城市、州和时区的 NSStrings。有人有任何指示或示例吗？谢谢！

**在我的 App Delegate 中，我使用 CCLocationManager 来获取坐标，如下所示：**

```
- (NSString *)getUserCoordinates
{
    NSString *userCoordinates = [NSString stringWithFormat:@"latitude: %f longitude: %f", 
    locationManager.location.coordinate.latitude, 
    locationManager.location.coordinate.longitude];
    locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation];
    return userCoordinates;
}

- (NSString *)getUserLatitude
{
    NSString *userLatitude = [NSString stringWithFormat:@"%f", 
    locationManager.location.coordinate.latitude];
    return userLatitude;
}

- (NSString *)getUserLongitude
{
    NSString *userLongitude = [NSString stringWithFormat:@"%f", 
    locationManager.location.coordinate.longitude];
    return userLongitude;
} 
```

**在我的视图控制器中，我将用户的纬度和经度作为 NSString 获取：**

```
NSString *userLatitude =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
getUserLatitude];

NSString *userLongitude =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
getUserLongitude]; 
```

**我想获得城市、州和时区。我知道我需要 CLGeocoder，但不知道如何将它融合在一起：**

```
CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
[geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, 
NSError *error) {
    for (CLPlacemark * placemark in placemarks) {
        NSString *locality = [placemark locality];
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T07:27:24.827

布兰登，有几件事：

1) CLLocationManager 可能不会立即回复您的坐标请求。您应该将您的视图控制器设置为 CLLocationManager 委托，然后当位置更新进入时（将在[`locationManager:didUpdateLocations:`](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateLocations%3a)方法中），然后您可以运行您的 CLGeocoder 方法。

2)

我写的看起来像这样：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    NSLog( @"didUpdateLocation!");
    NSLog( @"latitude is %@ and longitude is %@", [self getUserLatitude], [self getUserLongitude]);

    CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
    [geoCoder reverseGeocodeLocation:locationManager.location completionHandler:^(NSArray *placemarks, NSError *error) {
        for (CLPlacemark * placemark in placemarks) {
            NSString * addressName = [placemark name];
            NSString * city = [placemark locality]; // locality means "city"
            NSString * administrativeArea = [placemark administrativeArea]; // which is "state" in the U.S.A.

            NSLog( @"name is %@ and locality is %@ and administrative area is %@", addressName, city, administrativeArea );
        }
    }];
} 
```

获取该位置的时区有点棘手。我敢打赌，有一个 API 或一些示例代码可以在 iOS 中获取它，但它不是 CLPlacemark API 的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:54:45.660

从纬度和经度双精度值形成一个 CLLocation。然后将该位置提供给 reverseGeocodeLocation:completionHandler:

另请注意，reverseGeocodeLocation:completionHandler: 方法是异步的。

您也可以使用 CLLocationManagerDelegate 的[locationManager:didUpdateHeading:](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateLocations%3a) 如果有可用的 Location 则异步更新，这样会更好。

无论如何遵循您的方法，只需从 AppDelegate 修改您的一些代码

```
- (double)getUserLatitude
{
    return retrun locationManager.location.coordinate.latitude;
}

- (double)getUserLongitude
{
    retrun locationManager.location.coordinate.longitude;
}

-(CLLocationManager*) getLocationManager
{
    return locationManager;
} 
```

现在形成一个位置对象

```
double latt = [(PDCAppDelegate *)[UIApplication sharedApplication].delegate getUserLatitude];

double longt = [(PDCAppDelegate *)[UIApplication sharedApplication].delegate getUserLongitude];
CLLocation loc = [[CLLocation alloc] initWithLatitude:latt longitude:longt] 
```

或者您可以直接从 CLLocationManager 获取位置对象

```
CLLocation loc = [(PDCAppDelegate *)[UIApplication sharedApplication].delegate getLocationManager].location; 
```

然后，您可以使用将位置提供给 reverseGeocodeLocation:completionHandler: 的代码并获取[CLPlaceMark](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLPlacemark_class/Reference/Reference.html#//apple_ref/occ/cl/CLPlacemark)

```
[geoCoder reverseGeocodeLocation:loc completionHandler:^(NSArray *placemarks, 
NSError *error) {
    for (CLPlacemark * placemark in placemarks) {
        NSString *locality = [placemark locality];
        NSString * name =    [placemark name];
        NSString  *country  = [placemark country];
        /*you can put these values in some member vairables*/

        m_locality = [placemark locality];
        m_name =    [placemark name];
        m_country  = [placemark country];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T00:43:36.277

虽然我没有针对时区问题的解决方案（我同意其他回答过这个问题的人的观点 - 寻找非 Apple API），但我想我会在 Swift 中为那些好奇的人提供答案：

```
func provideGeocodedStringForLocation(location: CLLocation, withCompletionHandler completionHandler: (String) -> ()) {
  let geocoder = CLGeocoder()
  geocoder.reverseGeocodeLocation(location) { (placemarks: [CLPlacemark]?, error: NSError?) -> Void in
    guard let placemarks = placemarks where placemarks.count > 0 && error == nil else {
      if let error = error { print(error.localizedDescription) }
      completionHandler("Earth")
      return
    }

    let city = placemarks[0].locality ?? ""
    let state: String
    if let adminArea = placemarks[0].administrativeArea {
      state = ", \(adminArea)"
    } else {
      state = ""
    }

    completionHandler("\(city)\(state)") // produces output similar to "Boulder, CO"
  }
}

// get the lat/long from your UIAppDelegate subclass
let latitude = CLLocationDegrees("40.0176")
let longitude = CLLocationDegrees("-105.28212")
let location = CLLocation(latitude: latitude, longitude: longitude)

provideGeocodedStringForLocation(location) { print($0) } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-19T07:02:38.407

我从**地标描述**中获得了时区名称。它适用于 ios 8 及更高版本。

[您可以查看此链接以了解如何获取时区](https://stackoverflow.com/a/27054583/3654928)

# bash - 如何在 linux bash 中输入 ASCII 码“00”和“01”？

> ID：15308226
> 
> 赞同：9
> 
> 时间：2013-03-09T07:03:46.343
> 
> 标签：bash, hex, ascii

我有一个看起来像这样的程序：

```
/* buf_overflow.c */
#include <stdio.h>
int main(){
    char buf[4];
    char exploit_buf[4];
    fgets(buf, 4, stdin);
    gets(exploit_buf);
    printf("exploit_buf: %s\n", exploit_buf);
    return 0;
} 
```

我将使用“gets”函数的漏洞来缓冲溢出一些其他变量。我要写入“exploit_buf”的值是“AAAAAAAA\x01\x00\x00\x00”，但我不知道如何将 ASCII 码“01”和“00”发送到exploit_buf。

我知道使用这个命令“printf "AAAAAAA\x01\x00\x00\x00"”可以输入我想要的字符，但我不知道如何将它们发送到exploit_buf。我也知道 Alt+（键盘右侧的数字键）可以从我输入的 ASCII 码生成字符，但这在我的程序中也不起作用。

主要问题是“我怎样才能跳过第一个函数“fgets()”并在“gets()”中键入任意 ASCII 码”。

任何人都知道如何在 linux 的命令行中输入任意 ASCII 码？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T07:07:15.733

您可以使用`echo -e`：

```
$ echo -ne 'AAAAAAAA\x01\x00\x00\x00' | python -c 'import sys; print repr(sys.stdin.read())'
'AAAAAAAA\x01\x00\x00\x00' 
```

`-e`允许`echo`解释转义码，并`-n`抑制尾随换行符。

请注意，Python 程序会打印出它接收到的字符串表示形式，这正是我们使用`echo`.

对于更复杂的漏洞利用字符串，简单地使用 Perl 或 Python 直接构建漏洞利用字符串并不少见：

```
$ perl -e 'print "A" x 1024 . "\0\0\0\1"' | ./buf_overflow 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-09T07:15:23.437

在终端中键入以下命令。

```
echo $'\000\001' > file1 
```

这会将 ASCII 字符 1 和 ASCII 字符 2 的值保存到名为 file1 的文件中。现在你可以将它读入你的缓冲区exploit_buf。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:11:46.137

来自 nneonneo 的好例子。

但是，如果您希望在没有脚本帮助的情况下直接输入它们，您可以更改您的键盘配置以使用“美国国际（AltGr 死键）”模式（在系统 -> 首选项 -> 键盘 -> 布局下），那么您可以使用使用右 alt 按钮可以轻松地使用特殊符号。示例 - é 是 rAlt+e。° 是 rAlt-shift-0-0（按住其他按钮的同时按 0 两次）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T08:45:08.953

由于它只是从标准输入中获取输入，因此您可以将您的输出通过管道传输`printf`到其中：

```
printf 'whatever' | myprogram 
```

# ms-access - 在 access 的组合框中添加新项目

> ID：15308229
> 
> 赞同：0
> 
> 时间：2013-03-09T07:04:11.773
> 
> 标签：ms-access, autocomplete, combobox, ms-access-2007

我是 2007 年的新手

我有 3 个表和一个表格..我有**Accounts**、***IT***和**Software**表..我创建了每个表并为它们输入了一个值（ID、描述）..我有另一个名为**Faculty**的表，我有***AccountsID***、***AccountsDesc*** , ***ITDesc***和***SoftwareDesc***作为我的 **组合框中的属性**表单。所以当我做我的查询时，一切工作正常。即使 Accounts Desc 以第一个字符开头为“F”，它也能够拿起它..因为财务已经输入到我的数据库中..我的问题我想添加一个新的组合框中的帐户名称没有从数据库中添加？..如果再次选择它可以保存在我的下拉列表中..我尝试了很多方法，但我不能..任何人都可以解决我的问题？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:54:26.100

您只能让您的组合列表自动来自表格，或者手动将其输入到值列表中。你不能两者都做。

因此，要解决您的问题，您必须使用 VBA。我只是在这里给你粗略的步骤。如果您不知道如何执行步骤，您可以搜索详细信息。

在**Form_Load**事件中，您将构建您的列表。为此，您可以打开列表中包含所需值的表或查询，一次读取一条记录，然后将值输入组合框中。
将项目添加到组合框的命令是**ComboboxName.AddItem** ***value***。
然后添加您想要的附加值。**ComboboxName.AddItem** ***"新账户"***

祝你好运

# cuda - CUDA 变量是什么意思？

> ID：15308233
> 
> 赞同：-2
> 
> 时间：2013-03-09T07:04:28.123
> 
> 标签：cuda, gpu

CUDA 变量是什么意思？

```
Maximum number of threads per multiprocessor:  2048
Maximum number of threads per block:           1024
Maximum sizes of each dimension of a block:    1024 x 1024 x 64
Maximum sizes of each dimension of a grid:     2147483647 x 65535 x 65535 
```

例如，`Maximum sizes of each dimension of a grid,`这是否意味着有 2147483647 个网格。每个网格包含 65535 个块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:23:46.503

不，这些是您可以使用的最大硬件限制。你有块 1024x1024x64 的最大暗淡，但每个块的线程限制是 1024，所以你可以使用块尺寸 1024x1x1 或 32x32x1 等。你不能有更多，但当然，你可以使用更少。

通常，如何将网格设置为块尺寸（在限制范围内）取决于您自己，这取决于您的需要。最基本的层次结构是，你有一个块网格。每个块都包含线程。因此，如果您有 2x2x2 的网格尺寸和 16x1x1 的块尺寸，则有 8 个块，每个块有 16 个线程，因此有 128 个线程在运行。

CUDA 有一个很好的文档，所以我建议你从[那里开始。](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#thread-hierarchy)

# vb.net - 如何使用 npoi 和 VISUAL BASIC 按（列、行）读取 excel 文件

> ID：15308239
> 
> 赞同：0
> 
> 时间：2013-03-09T07:05:14.650
> 
> 标签：vb.net, excel, npoi

我希望能够在 VB .NET 中按列索引、逐行准备一个 excel 文件。

我可以使用 python XLRD 和通过“ADOX.Catalog”使用 vb6 非常轻松地做到这一点

基本上，这应该足以满足我的需求：

```
wb = open(excelfile)
ws = wb.worksheet(0)
cell = ws.get_cell(col, row) 
```

我怎样才能做到这一点？

1.  有没有办法获取工作表的列？
2.  我没有找到任何关于 NPOI 的文档
3.  我在 NPOI 下载（alpha、beta 和稳定版本）中没有找到任何 *.vb 文件示例
4.  是否有一个统一的 excel 文件打开器可以检测文件版本并选择正确的打开器类，还是我必须通过文件扩展名来做？
5.  主观问题：我是唯一一个认为这个 API 过于复杂的人吗？

**重要编辑：我无法在机器上安装 EXCEL，所以我正在寻找非 excel 解决方案**

附言。我是.net 新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:37:01.097

不确定 npoi 是什么，但这可能会有所帮助，假设您已经声明了它们：

```
xlObject = new excel.application()
xlWB = xlObject.workbooks(0) // I think it also takes string (name of wb)
sheet = xlWB.worksheet(0)
sheet.Range("B2") //specific cell 
```

您是在谈论 xls 与 xlsx 吗？它应该处理得很好......

和不！它不像它应该的那样直观或简单！

# ssis - 如何构建动态数据库连接

> ID：15308242
> 
> 赞同：0
> 
> 时间：2013-03-09T07:05:43.547
> 
> 标签：ssis

是否可以在 SSIS（SQL 服务器集成服务）中构建动态 OLE DB 连接管理器。因为我在多个环境中运行包，我必须在多个地方更改连接管理器。如果我动态创建它会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:16:30.610

是的，你可以通过表达式来做到这一点。

见这里 - [http://consultingblogs.emc.com/jamiethomson/archive/2008/12/08/making-the-case-for-expressions-instead-of-parameterised-sql-and-vice-versa-ssis.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2008/12/08/making-the-case-for-expressions-instead-of-parameterised-sql-and-vice-versa-ssis.aspx)

# android - 如何从 sqlite 中检索记录

> ID：15308249
> 
> 赞同：1
> 
> 时间：2013-03-09T07:06:56.180
> 
> 标签：android, sqlite

嗨，我是 android 编程新手，我创建了一个示例应用程序，允许用户从数据库中获取数据。但是它没有显示数据，它没有任何错误消息，只是没有显示它。数据库确认有数据。请检查我的代码，也许我在这里忘记了一些东西。谢谢

```
public void onClick(View arg){
    name = txtNameS.getText().toString();
    if(arg.getId()==R.id.btnfortune){
            searchRecord(count);
            lblmessageS1.setText(name); // this is just for me to check     if it will be displayed and it is.
            lblmessageS2.setText(message);
    }

 }

 public void searchRecord(int count) throws SQLException {
    Cursor rsCursor;

    String [] rsFields = {"mesNum","Message"};

   rsCursor = dbM.dbase.query("MessageFile", rsFields, "mesNum = " + count, null, null, null, null, null);
    rsCursor.moveToFirst();

    if (rsCursor.isAfterLast()==false){

        message = rsCursor.getString(1);
    }

    rsCursor.close();
 } 
```

顺便说一下，count被初始化为1。数据库中有10条记录。并且数据库中有 2 列 mesNum 和 Message，我想要的是只显示消息列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:14:05.823

```
 // SQLiteDatabase sqldb
     Cursor rsCursor= sqldb.rawQuery("your query", null);
     if (rsCursor!= null) {
            if (rsCursor.moveToFirst()) {
                do {
                     // do here for get data   message = rsCursor.getString(1);
                   }while (cursor.moveToNext());
            }
            cursor.close();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:21:11.000

在数组中只添加一个列名

```
String [] rsFields = {"Message"};

    cursor = dbM.dbase.query(true,"MessageFile", rsFields, "yourcolumn= "+count, null, null, null, null, null);

while( cursor != null && cursor.moveToNext() ) 
{
  cursor.getString(0);
}
cursor.close(); 
```

# c - 如何在C中制作数组数组？

> ID：15308259
> 
> 赞同：2
> 
> 时间：2013-03-09T07:08:39.830
> 
> 标签：c

是否可以在 C 中创建数组数组？更具体地说，是否可以制作邻接列表（数组）的列表（数组）？

如果是这样，怎么办？

我的教科书使用了 Dijkstra 算法（以及许多其他算法）的邻接列表列表，而不是使用邻接矩阵，尽管这本书是伪代码，即使这样，它也没有任何关于如何实现列表的参考......

据推测，在许多算法中，邻接列表列表比邻接矩阵更有效。我想过使用链表，但是 AFAIK 它与使用邻接矩阵相同，因此以这种方式实现它根本没有意义......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T07:09:48.400

你的意思是多维数组吗？

```
int mdarr[10][20]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T07:21:09.913

> 是否可以在 C 中创建数组数组？

是的。

> 更具体地说，是否可以制作邻接列表（数组）的列表（数组）？

是的，它可以使用链表的链表（或您的情况下的数组）来实现。

> 如果是这样，怎么办？

一个列表（或数组）可以维护节点，每个节点都将指向实际的邻接列表，并包含有关图形当前点的信息。这可以通过创建一个`struct`相关数据来实现（一个信息字段和一个下一个指针，以及一个指向邻接列表的指针）

第二个列表将是每个节点的实际邻接列表。它将由第一个列表的相应节点指向。它将包含节点，每个节点都是连接到初始列表中相应点的图形点。它可以类似地实现，通过创建一个`struct`具有相关数据（一个字段用于下一个指针，一个信息字段）。

这不是一个多维数组，而是完全不同的。如果您的图是稀疏的，这将比邻接矩阵使用更少的空间。

举个例子，让`A`, `B`, `C`,`D`是一个无向图的节点，`A`它连接到`B`和`C`。

然后列表将是这样的：

```
A -> B -> C -> D
|    |    |
B    A    A
|
C 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:02:05.557

你的意思是一个三维数组？

你定义一个像这样的 aMat[3][3] 的邻接矩阵（三个元素的图）。

因此，您可以定义例如 4 个由三个元素组成的图，每个图如下所示：aMatMulti[4][3][3]。

# jquery-easyui - easyui数字格式，下拉自动填充不起作用

> ID：15308261
> 
> 赞同：0
> 
> 时间：2013-03-09T07:09:07.260
> 
> 标签：jquery-easyui

```
<script type='text/javascript'>    
$('#tt').datagrid({ <br/>
        title:'',  <br/>
        iconCls:'icon-edit', <br/> 
        width:'fit-content',  <br/>
        height:'500',  <br/>
        singleSelect:true, <br/>
        idField:'id',  <br/>
        url:'<?php echo base_url(); ?>index.php/tempexcess/', <br/>
    <br/><br/>
        toolbar:[{<br/>
                    text:'Add New',<br/>
                    iconCls:'icon-add',<br/>
                    <br/>
                handler:function(){<br/>
                    if($('#user_role').val()=='checker'){<br/>
                            alert('You don\'t have permission to do this operation !');<br/>
                        }<br/>
                        else if($('#user_role').val()=='maker'){ <br/>
                        insert();<br/>
                }<br/>
                }<br/>
<br/>
                }<br/>
            ],<br/>
        <br/>
        columns:[[ <br/>
         {field:'company_name',title:'Company Name',sortable:'true',<br/>
                  formatter:function(value){  <br/>
                        for(var i=0; i<company_namelist.length; i++){<br/>
                           if (company_namelist[i].company_name == value) return <br/>company_namelist[i].name;<br/>
                        }<br/>
                        return value;  <br/>
                    },  <br/>
                    editor:{  <br/>
                        type:'combobox',<br/>
                            options:{<br/>
                            valueField:'company_name',<br/>
                            textField:'name',<br/>
                            data:company_namelist,<br/>
                            required:true,<br/>
                                onSelect:function(record){<br/>
                                    <br/>
                            var row = $('#tt').datagrid('getSelected');<br/>
                            var rowIndex= $('#tt').datagrid('getRowIndex', row)<br/>
                var editors = $('#tt').datagrid('getEditors', rowIndex);<br/>
                            <br/>
                            var leidEditor = editors[0];<br/>
                            $(leidEditor.target).combobox('setValue',record.company_name); <br/>
                                      <br/>
                                }<br/>
                            } <br/>
                    }<br/>
                <br/>
            },<br/>
            {field:'amount',title:'Amount',groupSeparator:' <br/>',options:"precision:2,groupSeparator:' ',decimalSeparator:'.'" <br/>,sortable:'true',width:100,editor : <br/>
                       { type:'numberbox',<br/>
                                options:{<br/>
                                // precision:2 //,
                                 groupSeparator:','<br/>
                                <br/>
                                }<br/>
                                }<br/>
                        <br/>
            },  <br/>
        onBeforeEdit:function(index,row){  <br/>
            row.editing = true;  <br/>
            updateActions(index,row);  <br/>
        },  <br/>
        onAfterEdit:function(index,row){  <br/>
            row.editing = false;  <br/>
            updateActions(index,row);  <br/>
        },  <br/>
        onCancelEdit:function(index,row){  <br/>
            row.editing = false; <br/> 
            updateActions(index,row); <br/> 
        }    <br/>
            <br/>
        }); <br/>
</script><br/> 
```

键入单词时自动填充不起作用，并且数字格式不起作用时的 dtatgrid 下拉菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:29:08.193

对于数字格式的问题，我找到了这个解决方案：

```
<script type='text/javascript'>    
 $('#tt').datagrid({ 
 ...
 {field:'amount',title:'Amount',groupSeparator:,sortable:'true',width:100,
     formatter:function(value,row,index) {
       if(row.amount) {
         return number_format(value,2,',','.');
       }
     }
  }
 ...
}
 ...
function number_format(num,dig,dec,sep) {
  x=new Array();
  s=(num<0?"-":"");
  num=Math.abs(num).toFixed(dig).split(".");
  r=num[0].split("").reverse();
  for(var i=1;i<=r.length;i++){x.unshift(r[i-1]);if(i%3==0&&i!=r.length)x.unshift(sep);}
  return s+x.join("")+(num[1]?dec+num[1]:"");
}
...
 </script> 
```

# f# - 如何在 F# 语言中暂停控制台

> ID：15308268
> 
> 赞同：12
> 
> 时间：2013-03-09T07:09:57.537
> 
> 标签：f#

请告诉我在 F# 中运行程序时如何暂停控制台窗口。

```
open System
let myList = [0..9]
let myFunction =
for n in myList do
    Console.WriteLine(n)
myFunction 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T07:14:27.297

我猜您希望控制台在程序执行完成后显示输出。

您可以将此行放在代码段的末尾

`Console.ReadKey() |> ignore`

在这个意义上“暂停”控制台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:37:57.530

```
// When running in debug mode and using Visual Studio to run the program,  
// one may miss the results as the program runs to the end and exists.  
// Since running normally, i.e. Visual Studio Ctrl-F5, will add an pause
// automatically the pause is only shown when in debug mode.  
let pause () =  
  match System.Diagnostics.Debugger.IsAttached with  
  | true ->  
      printfn "\nPress any key to continue."  
      System.Console.ReadKey(true) |> ignore  
  | false -> ()  

pause () 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-14T01:37:09.000

您可能会考虑在编译器指令中包装暂停函数，因为您可能不希望在发布代码中具有相同的效果。

```
(* your code here *)
#if DEBUG
System.Console.ReadKey(true) |> ignore 
#endif 
```

# asp.net-mvc-4 - MVC4 自定义视图引擎

> ID：15308275
> 
> 赞同：4
> 
> 时间：2013-03-09T07:11:14.057
> 
> 标签：asp.net-mvc-4

我在实现 MVC4 自定义视图引擎以覆盖部分视图的默认位置时遇到问题。我已经实现了这个[例子](http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx)中的代码。

我的问题是，如果在启动/执行 HTML.Partial 时路径与 PartialViewLocationFormats 数组中的值不匹配，则会在启动 CreatePartialView 之前引发错误。没有什么可以匹配，因为此实现的目标是拥有动态路径。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T20:01:05.910

只需按您自己的方式提供路径，而不是使用 MVC 的默认方式从另一个源设置 partialPath，例如从控制器将其传递给视图，或创建您的取景器类。

```
return base.CreatePartialView(controllerContext, **partialPath** ); 
```

# image - 通过从数据库中提取图像制作的动态图形？

> ID：15308276
> 
> 赞同：0
> 
> 时间：2013-03-09T07:11:29.057
> 
> 标签：image, dynamic

[http://getvideoartwork.com/](http://getvideoartwork.com/)

这里的网站所有者编写代码以从数据库中动态提取封面艺术并制作首页图形有多难？

如果不出意外，您能否从数据库中提取随机图像并输出它们并使用 CSS3 设置它们的样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:14:36.283

这并不难。使用脚本语言，您从数据库中查询图像数据，将“image/png”之类的标头发送到浏览器，然后发送图像数据。我个人会将图像存储为文件并将文件名放入数据库中。然后，我的脚本只会从数据库中选择一个随机文件名。就此而言，如果我的图像目录只有可行的图像，我可以从目录中选择一个随机文件。还有更多方法可以选择随机图像。

# .net - 为 .NET 安装程序选择安装目录，例如 Windows 的 GitHub、Windows 的 SourceTree？

> ID：15308280
> 
> 赞同：0
> 
> 时间：2013-03-09T07:12:09.717
> 
> 标签：.net, windows, installation, clickonce

是否可以为现代 .NET 打包软件指定安装路径，例如

*   [适用于 Windows 的 GitHub](http://windows.github.com/)

*   [适用于 Windows 的 SourceTree](http://sourcetreeapp.com/windows/)

作为开发人员，我讨厌安装程序强制安装到系统分区中。也许 MSI 中的一些启动参数或一些 xml 文件编辑会起到神奇的作用？

如果是硬编码路径 (%localappdata%\local\apps)，MSDN 参考在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T01:37:19.470

对于使用 Microsoft ClickOnce 部署的应用程序（如 GitHub），您无法指定安装文件夹。这些应用程序安装在用户的配置文件下并且是隔离的，它们不能与 Program Files 中的任何内容或计算机上除了 MyDocuments 之外的几乎任何地方混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:28:54.077

您可以尝试从命令行运行[msiexec](http://www.advancedinstaller.com/user-guide/msiexec.html) ( [MSDN ) 并指定](http://technet.microsoft.com/en-us/library/cc759262%28v=ws.10%29.aspx)[TARGETDIR](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372064%28v=vs.85%29.aspx)公共属性的值：

```
msiexec /i "path to my msi" TARGETDIR="install to this folder" 
```

请注意，根据 MSI 的作者，这可能不起作用 - 不是每个人都遵循标准。

# cocoa - 如何让我的 Cocoa 命令行工具知道在终端中调用它的工作路径？

> ID：15308284
> 
> 赞同：2
> 
> 时间：2013-03-09T07:13:46.630
> 
> 标签：cocoa, bash, path, command-line-tool

我的 cocoa 命令行程序的目标是获取一个文件名参数并将其导入程序进行解析。我希望能够在 mac os 中从终端调用我的程序，比如“ParseFile”，参数为“Filename.txt”（example$ ParseFile filename.txt），但到目前为止我不明白我的程序是如何知道的Filename.txt 的绝对路径。

例如，当您使用“cp filename.txt /whateverfolder/filename2.txt”时，您正在将文件“filename.txt”从终端的**当前工作目录**复制到根目录上名为whateverfolder 的文件夹中。cp怎么知道filename.txt的绝对路径？如果我的桌面上有 filename.txt，cp 就会知道我发送了它/Users/username/Desktop/filename.txt。这就是我希望我的程序知道的。

我已经能够让我的程序知道它在哪里执行，但这与 bash 终端的当前工作目录在被调用时所处的位置非常不同。

我该如何解决这个问题？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T07:32:41.470

使用方法`NSFileManager`：`currentDirectoryPath`

```
NSString *currentpath = [[NSFileManager defaultManager] currentDirectoryPath]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:49:34.260

> cp怎么知道filename.txt的绝对路径？

它不知道，也不必知道。它可以只使用相对路径。当前工作目录继承自父进程。

> 我已经能够让我的程序知道它在哪里执行，但这与 bash 终端的当前工作目录在被调用时所处的位置非常不同。

你什么意思？可执行文件所在的目录？这通常没有太大的兴趣。在此上下文中起作用的唯一其他目录是当前工作目录。如果你已经得到了，你还需要什么？

# android - 如何删除以前的列表内容并添加新内容？

> ID：15308293
> 
> 赞同：0
> 
> 时间：2013-03-09T07:14:45.997
> 
> 标签：android, android-layout, android-intent, android-widget

我有一个包含 10 个图像和名称的列表。单击下一个按钮时，它会显示 10 张带有名称的图像，但也显示前 10 张图像（共 20 张图像）。

我只想显示当前的 10 张图像，并想从 ListView 中删除前 10 张图像。我怎样才能做到这一点？

我试过了`myArrayList.clear();` `arrayList.remove();`，`adapter.clearListView();`但`listView.removeAllView();`我仍然得到 20 张图像（10 张现在的图像和 10 张以前的图像）。

请使用示例代码提出一些解决方案。

我的代码是

```
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder view;  
    LayoutInflater inflator = activity.getLayoutInflater();  

  if(convertView==null)  
   {  
       view = new ViewHolder();  
       convertView = inflator.inflate(R.layout.image_detail_view, null);
       view.txtViewTitle = (TextView) convertView.findViewById(R.id.textView1);  
       view.imgViewFlag = (ImageView) convertView.findViewById(R.id.imageView1); 
       convertView.setTag(view);  
    }  
  else  
    {  

      view = (ViewHolder) convertView.getTag();  
    }  

       listImage.clear();
       listText.clear();
       notifySetDataChange();
  return convertView;  
} 
```

我正在另一个类中创建列表视图并在上面的代码中调用适配器..

我也尝试清除 listView ..

图像和名称来自服务器，它们本质上是动态的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:57:02.527

您无法在 getView 方法中清除列表数据。您必须从 listAdapter 中清除。然后它将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:19:46.590

您只能处理适配器。重置适配器中的数据并调用 adapter.notifyDataSetChanged()。

UDP：

每次需要行视图时，系统都会调用 getView()。因此，不要使用数据更改列表并在此方法中调用 notifyDataSetChanged()。

```
class CustomAdapter extends ArrayAdapter {

    private List<YourItem> items;

    public void setItems(List<YourItem> newItems) {
        items = newItems;
        notifyDataSetChanged();
    }

    public View getView(View convertView, int position, ...) {
        if (convertView == null) {
            // your code
        } else {
            // your code
        }

        YourItem item = items.get(position);

        // set image to convertView

        return convertView;
    }
} 
```

因此，每次您想要更新 ListView 时，请使用您的新项目调用 setData()。

还有问题吗？

# jquery - jQuery 在 Ajax 生成的内容中不起作用

> ID：15308300
> 
> 赞同：4
> 
> 时间：2013-03-09T07:15:57.573
> 
> 标签：jquery, ajax, wordpress, load

我有这个问题有一段时间了，它真的让我很烦。

我正在使用两个 wordpress 插件，一个用于 ajax 加载更多，另一个用于 ajax 阅读更多。您可以在下面的链接中看到它们：

*   [阅读更多](http://wordpress.org/extend/plugins/ajax-read-more/)
*   [装载更多](http://www.problogdesign.com/wordpress/load-next-wordpress-posts-with-ajax/)

他们都工作正常，但“阅读更多”在“加载更多”生成的帖子中不起作用。这是我认为应该编辑的“阅读更多”中的 jQuery 代码：

```
var backgroundAction = false;

jQuery.fn.AJAXReadMore = function (options) {
    var $ = jQuery,
        options = $.extend({
            animateSpeed: 'slow',
            errorMessage: "Error.<br/>Try again later.",
            errorClass: "loading-error",
            loadingClass: "loading",
            spacerClass: "loading-spacer",
            loadedClass: "loaded",
            contentElSelector: ".entry-part",
            moreElSelector: ".more-link",
            moreContainerSelector: ".more-link-container",
            onUpdateEvent: "onupdate",
            parentScrollableEl: $("html,body"),
            scroll: true,
            scrollToSelector: ".entry-header",
            scrollLowBound: 0,
            ajaxData: {}
        }, options);

    return this.each(function () {
        var post = {
            data: $.extend(options.ajaxData, {
                'AJAX-mode': '1'
            }),
            moreLink: $(options.moreElSelector, this),
            navigation: $(options.moreContainerSelector, this)
                .add(options.moreElSelector, this),
            content: $(options.contentElSelector, this),
            el: $(this)
        },
        busy = false;
        if (!(post.content.length)) post.content = post.el;

        $(post.moreLink).on('click', function () {

            if (busy) return false;
            var scroll = (options.scroll) && !(backgroundAction);
            busy = true;

            post.scrollTo = $(options.scrollToSelector, post.el);
            if (!(post.scrollTo.length)) post.scrollTo = post.el;

            var newContent = post.content.clone(true)
                .hide()
                .addClass(options.loadingClass)
                .html("")
                .insertAfter(post.content),
                spacerHeight1 = options.parentScrollableEl.scrollTop() + options.parentScrollableEl.height() - newContent.offset().top,
                spacerHeight = (spacerHeight1 > 0) ? spacerHeight1 : 0,
                spacer = newContent.clone()
                    .addClass(options.spacerClass)
                    .addClass(options.loadingClass)
                    .insertBefore(newContent)
                    .animate({
                    height: "0px"
                },
                options.animateSpeed)
                    .show();
            post.navigation.addClass(options.loadingClass);
            if (scroll) {
                if ((post.scrollTo.offset().top - options.parentScrollableEl.scrollTop() > options.scrollLowBound)) {
                    options.parentScrollableEl.animate({
                        scrollTop: post.scrollTo.offset().top + "px"
                    }, options.animateSpeed);
                };
            };
            $.when(
            $.ajax({
                type: "GET",
                url: post.moreLink.attr('href'),
                dataType: "html",
                cache: true,
                data: post.data
            }),
            post.scrollTo,
            options.parentScrollableEl).then(
            /*success:*/
            function (args) {
                /*args: [ data, "success", jqXHR ]*/
                var data = args[0];
                var dataObj;
                var bodyEl = {
                    length: 0
                };
                try {
                    dataObj = $(data);
                    bodyEl = dataObj.find('body');
                } catch (e) {};
                var dt = {
                    url: post.moreLink.attr('href'),
                    referrer: $(location).attr('href')
                };
                var textStatus = args[1];

                if (bodyEl.length) {
                    dt = $.extend(dt, {
                        body: bodyEl.html(),
                        title: dataObj.find('title').text()
                    });
                } else {
                    dt = $.extend(dt, {
                        body: data
                    });
                };

                post.navigation.addClass(options.loadedClass)
                    .removeClass(options.loadingClass);
                newContent.html(dt.body)
                    .show()
                    .removeClass(options.loadingClass)
                    .slideDown(options.animateSpeed)
                    .trigger(options.onUpdateEvent)
                    .trigger('counter.hit', dt);
                spacer.addClass(options.loadedClass)
                    .removeClass(options.loadingClass)
                    .slideUp(options.animateSpeed, function () {
                    $(this).remove();
                });
                busy = false;
            },
            /*error:*/
            function () {
                /*args: [ request, "error", jqXHR ]*/
                var request = args[0],
                    textStatus = args[1];
                newContent.remove();
                post.navigation.addClass(options.errorClass);
                spacer.hide()
                    .addClass(options.errorClass)
                    .removeClass(options.loadingClass)
                    .html(options.errorMessage)
                    .fadeIn(options.animateSpeed)
                    .delay(1000)
                    .fadeOut(options.animateSpeed)
                    .delay(100)
                    .hide(options.animateSpeed, function () {
                    $(this).remove();
                    post.navigation.removeClass(options.loadingClass)
                        .removeClass(options.errorClass);
                });
                busy = false;
            });
            return false;
        });

    });
}; 
```

PS：我用过`.live`，`.on`而且`.delegate`他们没有工作。

编辑：这是“加载更多”代码。知道如何通过这个触发“阅读更多”吗？

`jQuery(document).ready(function() {`

 ````
// The number of the next page to load (/page/x/).
var pageNum = parseInt(pbd_alp.startPage) + 1;

// The maximum number of pages the current query can return.
var max = parseInt(pbd_alp.maxPages);

// The link of the next page of posts.
var nextLink = pbd_alp.nextLink;

/**
 * Replace the traditional navigation with our own,
 * but only if there is at least one page of new posts to load.
 */
if(pageNum <= max) {
    // Insert the "More Posts" link.
    $('#ajaxload')
        .append('<div class="pbd-alp-placeholder-'+ pageNum +'"></div>')
        .append('<p id="pbd-alp-load-posts"><a href="#">Show More</a></p>');

    // Remove the traditional navigation.
    $('.pagination').remove();
}

/**
 * Load new posts when the link is clicked.
 */
$('#pbd-alp-load-posts a').click(function() {

    // Are there more posts to load?
    if(pageNum <= max) {

        // Show that we're working.
        $(this).text('');
        $(this).append('<img src="http://bluhbluh.com/wp-content/themes/coffebook/img/loader.gif">');

        $('.pbd-alp-placeholder-'+ pageNum).load(nextLink + ' .post',
            function() {
                // Update page number and nextLink.
                pageNum++;
                nextLink = nextLink.replace(/\/page\/\d{0,9}/, '/page/'+ pageNum);

                // Add a new placeholder, for when user clicks again.
                $('#pbd-alp-load-posts')
                    .before('<div class="pbd-alp-placeholder-'+ pageNum +'"></div>')

                // Update the button message.
                if(pageNum <= max) {
                    $('#pbd-alp-load-posts a').text('Show More');
                } else {
                    $('#pbd-alp-load-posts a').text('No More Posts');
                }
            }
        );
    } else {
        $('#pbd-alp-load-posts a').append('.');
    }   

    return false;
}); 
```` 

`});`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:36:38.693

使用`.on()`jQuery 方法。

```
$(post.moreLink).on('click',function(){ /**codehere**/ }); 
```

`.on()`允许在动态加载的内容上添加事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:38:40.170

对于未来元素的操作，您应该使用 jQuery [`on`](http://api.jquery.com/on/)。

```
$(document).on('click',post.moreLink, function(){ 
// write your codes
}); 
```

请注意，它与`$(post.moreLink).on('click',function(){.....});`不会影响未来元素的不同。另外，请确保您的变量`post.moreLink`已设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T02:41:17.173

我无权发表评论，所以我使用答案，希望对您有所帮助。

我认为问题与在第二个插件更新 DOM 后触发第一个插件的 Jquery 操作有关。也就是说，需要调用LoadMore Plugin的AJAX函数relatif中Readmore插件的动作（LoadMore返回结果后）。

我想我已经在这里遇到了这样的问题：

[wordpress 插件的 jquery 脚本在通过 ajax 加载的内容中不起作用](https://stackoverflow.com/questions/15059517/jquery-script-of-wordpress-plugin-dont-work-in-content-loaded-via-ajax)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T08:25:11.617

您可以通过两种方式解决此问题。

是的，一种是使用 .live 方法，如果使用得当，肯定会奏效。

第二种方法是创建绑定事件的方法，并在 ajax 回调中使用此方法，该回调在接收到内容并添加到文档后运行。

在您的代码中，我可以看到您正在成功加载数据，但没有任何迹象表明您实际上将任何事件绑定到新内容

# php - 将页面另存为 XML

> ID：15308301
> 
> 赞同：0
> 
> 时间：2013-03-09T07:16:03.657
> 
> 标签：php, xml, imdb

我制作了一个脚本，为 XML 中的电影生成 IMDB API 链接。

生成此链接后，它将与其内容一起保存到 XML 文件中。唯一的问题是内容没有保存。

链接生成： http:
[//imdbapi.org/ ?title=One+Piece&type=xml&plot=simple&mt=none&episode=0&aka=simple&release=simple](http://imdbapi.org/?title=One+Piece&type=xml&plot=simple&mt=none&episode=0&aka=simple&release=simple)

PHP 脚本：

```
 $url="http://imdbapi.org/?title=One+Piece&type=xml&plot=simple&mt=none&episode=0&aka=simple&release=simple";

    $curl = curl_init();
    $data = fopen("text.xml", "w");
    curl_setopt ($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_FILE, $data);
    curl_setopt($curl,  CURLOPT_RETURNTRANSFER, TRUE);
    curl_exec ($curl);

    if ( !$data ) {
    echo "No";
} else {
    $contents = curl_exec($curl);
    fwrite($data, $contents);
}

curl_close($curl);
fclose($data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:23:33.673

您可以使用 CURL，而不是使用 file_get_contents

```
$ch = curl_init('http://imdbapi.org/?title=One+Piece&type=xml&plot=simple&mt=none&episode=0&aka=simple&release=simple');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec($ch);
curl_close($ch); 
```

现在 $response 将包含您的 XML。你可以做类似的事情

```
file_put_contents('filename.xml', $response); 
```

确保 filename.xml 是可写的

# php - 抓取 MySQL 表中的单个元素

> ID：15308303
> 
> 赞同：1
> 
> 时间：2013-03-09T07:16:49.090
> 
> 标签：php, mysql, database, breadcrumbs

我正在尝试使用 MySQL 表将面包屑添加到我的网站，但目前我遇到了困难。

我创建了一个名为“includes”的表，其中存储了有关页面的类别、页面、子页面、标题和 ref (url) 的信息。Category、Page 和 Subpage 都是从用户所在页面传递的 php 参数

我的桌子是这样布置的：

```
|----------------------------------------------------------------|
| ID |  Category  |  Page   |  Subpage  |  Title           | Ref |
|----------------------------------------------------------------|
| 0  |            |         |           | Home             | ... |
| 1  | Software   |         |           | Software         | ... |
| 2  | Software   | Desktop |           | Desktop Software | ... |
| 3  | Software   | Mobile  |           | Mobile Software  | ... |
| 4  | Software   | Desktop | Blah      | Blah Blah        | ... |
| ...
|----------------------------------------------------------------| 
```

我正在尝试做的是进行查询，该查询将仅返回所需的步骤返回首页以获取面包屑。

换句话说，如果用户在“example.com/software/desktop/blah”上，查询将返回第 0、1、2 和 4 行。或者如果我在 /software/mobile 上，它只会返回行0,1 和 3。

我目前的尝试如下：

```
SELECT * FROM `includes` WHERE
`category` IS NULL     AND `page` IS NULL AND `subpage` IS NULL OR
`category`='$category' AND `page` IS NULL AND `subpage` IS NULL OR
`category`='$category' AND `page`='$page' AND `subpage` IS NULL OR
`category`='$category' AND `page`='$page' AND `subpage`='$subpage' 
```

这不仅不起作用，而且看起来比它应该的更复杂。

我可能过于复杂了，或者可能只是做了一个完全错误的方法，这就是我转向这里的原因。

有人对此有可能的解决方案吗？我应该查看更复杂的查询吗？（诚​​然，SQL 不是我的强项）或者我应该查看一个新的 SQL 表，或者可能是一个完全不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:22:11.363

你所拥有的是一个层次结构。数据设置有父子关系。这里有一个关于如何使用分层数据的很好的描述：http: [//explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:31:11.850

你可以做一个`self relation`这样的表

```
id | parent_it | title | Ref 

1  | 0         | Home  | ... 
2  | 1         | Software  | ... 
3  | 2         | Desktop  | ... 
4  | 2         | Mobile  | ... 
5  | 3         | Blah  | ... 
```

所以你的查询应该得到最后一个元素 SELECT * FROM `includes`WHERE `tilte`= 'Blah'

然后获取父ID标题等，从我的观点和经验来看，这样的表结构会更好

**或者**

根据您获得的值生成查询，使用简单的循环计数参数并基于该生成查询字符串然后执行它

我希望这可以帮助:)

# asp.net-mvc-3 - 将 foreach-loop 转换为 for-loop for Viewdata["terr"] 这是对象列表

> ID：15308304
> 
> 赞同：0
> 
> 时间：2013-03-09T07:16:49.280
> 
> 标签：asp.net-mvc-3, view, for-loop, foreach, viewdata

我有一个复选框列表，例如：

```
<% foreach (var tobj in (ViewData["terr"] as List<Location>))
{ %>
   <input type="checkbox" name="terr" id="<%: tobj.Location_Id %>" value="<%: tobj.Location_Id %>" disabled="disabled"/> 
   <span id="<%: tobj.Location_Name %>"> <%: tobj.Location_Name %> </span>
   <br />
<% } %> 
```

但我想在一行中显示 3 或 4 个复选框。为此，我需要将 foreach 转换为 for 循环。我无法做到这一点。希望任何人都可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:32:38.787

我不确定为什么你不能在 foreach 循环中完成你需要的东西。如果您用更多信息更新了您的问题，我们可能会帮助您调试初始 foreach 循环。此外，如果您使用 MVC 3，我推荐 Razor 视图引擎，语法会好很多。

for 循环等效项：

```
<% { var locations = (List<Location>)ViewData["terr"] } %>

<% for (int i = 0; i < locations.Count(); i++)
{ %>
    <input type="checkbox" name="terr" id="<%: locations[i].Location_Id %>" value="<%: locations[i].Location_Id %>" disabled="disabled"/> 
    <span id="<%: locations[i].Location_Name %>"> <%: locations[i].Location_Name %> </span>
    <br />
<% } %> 
```

# java - 如何检查类的方法返回是否等于 null？

> ID：15308310
> 
> 赞同：0
> 
> 时间：2013-03-09T07:18:12.830
> 
> 标签：java

在我的程序中，我有一个`while`循环，它将显示商店列表并要求输入与商店 ID 对应的输入。如果用户在使用类创建的商店数组之外输入一个整数`Shop`，它将退出循环并继续。在这个循环内部是另一个`while`循环，它调用下面`sellItem`我的`Shop`类的方法：

```
 public Item sellItem()
  {
     displayItems();
     int indexID = Shop.getInput();
        if (indexID <= -1 || indexID >= wares.length)
        {
            System.out.println("Null"); // Testing purposes
            return null;
        }
        else
        {
            return wares[indexID];
        }
  }
  private void displayItems()
  {
        System.out.println("Name\t\t\t\tWeight\t\t\t\tPrice");
        System.out.println("0\. Return to Shops");
     for(int i = 0; i < wares.length; i++)
     {
        System.out.print(i + 1 + ". ");
        System.out.println(wares[i].getName() + "\t\t\t\t" + wares[i].getWeight() + "\t\t\t\t" + wares[i].getPrice());
     }
  }
  private static int getInput()
  {
     Scanner scanInput = new Scanner(System.in);
     int itemID = scanInput.nextInt();
     int indexID = itemID - 1;
     return indexID;
  } 
```

我的主类方法中的while循环如下：

```
 boolean exitAllShops = true;
     while(exitAllShops)
     {
        System.out.println("Where would you like to go?\nEnter the number which corresponds with the shop.\n1\. Pete's Produce\n2\. Moore's Meats\n3\. Howards Hunting\n4\. Foster's Farming\n5\. Leighton's Liquor\n6\. Carter's Clothing\n7\. Hill's Household Products\n8\. Lewis' Livery, Animals, and Wagon supplies\n9\. Dr. Miller's Medicine\n10\. Leave Shops (YOU WILL NOT BE ABLE TO RETURN)");
        int shopInput = scan.nextInt();
        if(shopInput >= 1 && shopInput <= allShops.length)
        {
           boolean leaveShop = true;
           while(leaveShop)
           {
              allShops[shopInput - 1].sellItem();
              if(allShops == null)
              {
                 System.out.println("still null"); // Testing purposes
                 leaveShop = false;
              }
           }
        }
        else
        {
           System.out.println("Are you sure you want to leave?\n1\. Yes\n2\. No");
           int confirm = scan.nextInt();
           if(confirm == 1)
           {
              exitAllShops = false;
           }
        } 
```

问题在这里：

```
 boolean leaveShop = true;
       while(leaveShop)
       {
          allShops[shopInput - 1].sellItem();
          if(allShops == null)
          {
             System.out.println("still null"); // Testing purposes
             leaveShop = false;
          }
       } 
```

无论我做什么，我都无法打印“仍然为空”以确认我正确调用了类`return`方法的语句。我究竟做错了什么？`sellItem``Shop`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T07:21:23.517

调用后`allShops[...].sellItem()`，`allShops`仍然是一个有效的数组引用——不可能`null`！您可能想测试以下的返回*值*：`sellItem`

```
if(allShops[shopInput-1].sellItem() == null) 
```

# file - vim 中当前工作目录的变量是什么？

> ID：15308311
> 
> 赞同：9
> 
> 时间：2013-03-09T07:18:14.437
> 
> 标签：file, vim

在 vimscript 中，如果我想获取**当前缓冲区**的当前工作目录的值（可以通过 更改`:lcd`），我将使用哪个变量或表达式来获取它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T07:23:10.397

```
let cwd = getcwd() 
```

或者

```
let cwd = fnamemodify('.', ':p') 
```

. 两者总是返回当前缓冲区的有效值，但确定这是缓冲区本地的工作目录（即由`:lcd`/更改`'autochdir'`）还是全局工作目录（即`:cd`自 vim 启动以来由 /untouched 更改）是更有趣的问题。我不知道答案。

# ios - 数组中最后添加的对象

> ID：15308312
> 
> 赞同：0
> 
> 时间：2013-03-09T07:18:36.077
> 
> 标签：ios, objective-c, nsarray

```
if (sqlite3_prepare_v2(dbHandlerPointerNote ,selectQuery , -1, &prepareStmtNote, NULL) == SQLITE_OK)                     {
            while (sqlite3_step(prepareStmtNote) == SQLITE_ROW)

        {
            NSString *noteName = [[NSString alloc]initWithUTF8String:(const char *) sqlite3_column_text(prepareStmtNote, 0)];
            [_notesArray addObject:noteName];
            int noteid =sqlite3_column_int(prepareStmtNote, 1);
            [_noteidArray  addObject:[NSString stringWithFormat:@"%d",noteid]];
            NSString *noteDate = [[NSString alloc]initWithUTF8String:(const char *) sqlite3_column_text(prepareStmtNote,2)];
            [_notesDate addObject:noteDate];
            // arrObj is a mutable arr

        }
    } 
```

以上是我如何将对象添加到`note_id`数组中。

这是我试图获取最后一个对象的方法：

```
_savedNoteid1=[[_modleClass.noteidArray lastObject]intValue]; 
```

但它不能正常工作。如何获取数组中的最后一个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:26:01.337

你现在用的很接近了，去掉最后一部分（intValue）：

```
_savedNoteid1=[_modleClass.noteidArray lastObject]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:23:01.223

> 我想得到最后添加到数组中的对象怎么可能.....

如果您只想访问 NSArray（或 NSMutableArray）实例中的最后一个对象，您可以简单地使用以下`-lastObject`方法：

```
id item = [someArray lastObject]; 
```

# backbone.js - Backbone.js 在通过异步 ajax 调用渲染后返回 el

> ID：15308314
> 
> 赞同：1
> 
> 时间：2013-03-09T07:18:54.657
> 
> 标签：backbone.js, coffeescript

在我的 Backbone.js 中，我有以下内容

```
class ParentView extends Backbone.View
  el:"#main"

  childView : new ChildView

  render: =>
    $(@el).empty().append(@childView.render().el)

class ChildView extends Backbone.View

  render: =>
    $.ajax
      url:"get_data"
      success: (data) =>
        $(@el).empty().append("Child View done")
        @ 
```

`ParentView`不显示任何内容，因为我认为子视图的函数`render`执行 AJAX 调用，而父视图`render`并没有真正“等待”AJAX 完成。

实现这一目标的常用方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:16:02.443

`$.ajax`call 是异步的，它返回一个 Promise，你的`render`方法返回这个 Promise。我建议您阅读一些关于 js 中的异步性的内容，以更好地理解这个概念。

你想要达到的目标通常是这样完成的：

```
class ChildView extends Backbone.View
  initialize: ->
    @on 'data:fetched', @render

  render: =>
    @$el.html("Child View done")
    @

  fetch: =>
    $.ajax
      url: "get_data"
      success: (data) =>
        # process data and attach it to view
        @trigger 'data:fetched' 
```

顺便说一句，将所有数据访问/操作逻辑放入模型层被认为是更好的做法：模型和集合。在这种情况下，您可以执行以下操作：

```
class ChildView extends Backbone.View
  initialize: ->
    @collection.on 'reset', @render
    # call @collection.fetch() somewhere
    # or use @model.on 'change', @render to bind rendering to model changes

  render: =>
    @$el.html("Child View done")
    @ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:28:25.477

正如 nl_0 的回答所说。您正在从 ajax 调用返回承诺。您想要返回或打算返回的`@`是子视图实例。nl_0 对您获取数据的方式也很正确。如果您从 ajax 调用中获取数据，而不是使用 Backbones 模型和集合数据层，那么您并没有真正使用骨干网。因此，我将投票支持他的答案，但我希望以下内容确实有助于解释这个问题。

正在发生的事情是：

```
class ParentView extends Backbone.View
   el:"#main"

  childView : new ChildView

  render: => 
    $(@el).empty().append(@childView.render().el)
    // because of the subtle mistakes in @childView.render() below
    // your childView never got anything appended to it.
    // @childView.render().el is undefined
    // essentially $(@el).empty().append(undefined)
    // that's why nothing shows up.

class ChildView extends Backbone.View

  render: =>
    $.ajax
      url:"get_data"
      success: (data) =>
        // @ is not a reference to your child view.
        // the value of @ has changed context
        // that means @el is undefined.
        // You're selecting $(undefined) not your views element.
        $(@el).empty().append("Child View done") 
        @ // this is not your ChildView instance 
```

你可以做的是：

```
 class ParentView extends Backbone.View
   el:"#main"

  childView : new ChildView

  render: => 
    // this line is actually okay if we fix @childView.
    $(@el).empty().append(@childView.render().el)

class ChildView extends Backbone.View

  onSuccess: (data) =>
    // the double arrow binds this function to the proper context
    // @ is our ChildView instance
    @$el.empty().append("GET get_data is done.")

  render: =>
    $.ajax
      url:"get_data"
      success: @onSuccess

    // return @ out here where it is the instance.
    // This is really where "Child View done".
    @ 
```

对不起，如果我犯了任何错误。我的coffeescript 技能很少使用。我想这就是你的意思。非常微妙的东西，如果我需要编辑这个答案，请告诉我。

根据您的 ajax 调用需要多长时间，您可能仍会看到轻微的延迟，因为`childView.render().el`将在 ajax 调用返回并附加“GET get_data 完成”之前附加到 dom。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:11:39.270

实现此目的的典型 Backbone 模式如下：

```
render: =>
  $.ajax
    url:"get_data"
    success: (data) =>
      #when the ajax call returns, modify the contents of the view's el
      @$el.empty().append("Child View done")

  @ #return this 
```

基本上，您的`render`方法只是启动 ajax 请求并立即将控制权返回给调用者。当 ajax 请求返回时，视图的*内容*被修改，但视图的元素没有改变。

这意味着当您的父视图附加到它自己的视图中时，同步还是异步`childView.el`都没有关系。`childView.render`根元素 `el`存在，无论它是否已经有内容：

```
@$el.empty().append(@childView.render().el) 
```

使用属性也很重要，而不是使用 jQuery 选择器 ( )[`view.$el`](http://backbonejs.org/#View-%24el)进行包装。无论视图的元素是否存在于 DOM 中，前者都将起作用，而后者将失败，如果在 ajax 请求成功时父视图尚未完全呈现。`view.el``$(@el)`

# excel - 在受保护的工作表中编辑未锁定单元格时数据不保留

> ID：15308316
> 
> 赞同：0
> 
> 时间：2013-03-09T07:19:26.480
> 
> 标签：excel

我在编辑受保护工作表中未锁定的单元格时遇到问题。

当我双击受保护工作表中未锁定的单元格时，特定单元格中的数据消失。如果我有大约 200 个字符的文本并且想通过双击特定单元格来编辑它，整个数据消失然后我输入了整个数据进行更正。请帮助。我什至为特定单元格尝试了 hidden = false ，但我发现没有运气。请帮助。

我的代码：

```
ActiveSheetUnprotect "excel"
ActiveSheet.Cells.Locked = False
ActiveSheet.Range("a1:br42").Locked = True
ActiveSheet.Range("e1:e37").Locked = False
ActiveSheet.Range("e1:e37").Hidden = False
ActiveSheet.Range("a1:br42").FormulaHidden = True
ActiveSheet.Protect "excel" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:07:44.313

尝试为有问题的单元格设置`FormulaHidden`为`False`：

`ActiveSheet.Range("a1:br42").FormulaHidden = False`

# algorithm - 对二维数组进行排序 - VBScript - RadixSort 最快 - 整数 - 请求代码

> ID：15308318
> 
> 赞同：0
> 
> 时间：2013-03-09T07:19:38.877
> 
> 标签：algorithm, optimization, vbscript, sorting

您能否协助/请求代码片段以有效排序。找不到 vbscript 的基数排序 - 二维数组/能够很好地实现。

我的数组的示例结构是：

```
resultarray(0,1) = "Name1"
resultarray(1,1) = "Score1"
resultarray(2,1) = "Category1"
resultarray(3,1) = "OtherDetail1"
resultarray(4,1) = "OtherDetail1"
resultarray(5,1) = "OtherDetail1"

resultarray(0,2) = "Name2"
resultarray(1,2) = "Score2"
resultarray(2,2) = "Category2"
resultarray(3,2) = "OtherDetail2"
resultarray(4,2) = "OtherDetail2"
resultarray(5,2) = "OtherDetail2"

resultarray(0,3) = "Name3"
resultarray(1,3) = "Score3"
resultarray(2,3) = "Category3"
resultarray(3,3) = "OtherDetail3"
resultarray(4,3) = "OtherDetail3"
resultarray(5,3) = "OtherDetail3" 
```

数组必须根据第二列进行排序，即分数。行数大约为几百万。分数将始终为正整数（在不久的将来需要两位小数）。速度非常重要，因为这必须针对 30 到 40 个不同组的几万到几百万个数字进行。

目前使用**Quicksort**完全来自：

[http://www.4guysfromrolla.com/webtech/012799-3.shtml](http://www.4guysfromrolla.com/webtech/012799-3.shtml)

我在我的实现中交换了行 <-> 列，然后这工作正常。但是慢。是否值得从现有的 QuickSort 更改排序技术。

我打算稍后使用二进制搜索来根据分数匹配搜索大约 2000 个元素。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:35:17.503

To illustrate why

1.  you shouldn't duplicate the data from the original array in the ArrayList, but use/store an index
2.  a SortedList is appropriate for a problem of grouping (not sorting)

Proof of concept script:

```
 Dim nRecs : nRecs = 100
  ReDim aOrg(1, nRecs)
  Dim i
  For i = 1 To nRecs ' aOrg[0] intentinally wasted
      aOrg(0, i) = "Item " &  i
      aOrg(1, i) = IRandR(5, 16)
  Next
  Dim slX : Set slX = CreateObject("System.Collections.SortedList")
  For i = 1 To nRecs
      If Not slX.Contains(aOrg(1, i)) Then Set slX(aOrg(1, i)) = CreateObject("System.Collections.ArrayList")
      slX(aOrg(1, i)).Add i
  Next
  For i = 0 To slX.Count - 1
      WScript.Echo "---- #", i, "score:", slX.GetKey(i)
      WScript.Echo vbTab, Join(slX.GetByIndex(i).ToArray())
      WScript.Echo vbTab, Join(GetCargo(aOrg, slX.GetByIndex(i)))
  Next

Function GetCargo(aO, aI)
  ReDim aTmp(aI.Count - 1)
  Dim i
  For i = 0 To UBound(aTmp)
      aTmp(i) = aO(0, aI(i))
  Next
  GetCargo = aTmp
End Function 
```

output:

```
---- # 0 score: 5
         7 11 18 23 44 50 69 85 96 99
         Item 7 Item 11 Item 18 Item 23 Item 44 Item 50 Item 69 Item 85 Item 96 Item 99
---- # 1 score: 6
         41 46 47 58 59 80
         Item 41 Item 46 Item 47 Item 58 Item 59 Item 80
---- # 2 score: 7
         29 36 39 66 67 72 95 97
         Item 29 Item 36 Item 39 Item 66 Item 67 Item 72 Item 95 Item 97
---- # 3 score: 8
         4 5 26 30 49 51 53 57 64 75 93
         Item 4 Item 5 Item 26 Item 30 Item 49 Item 51 Item 53 Item 57 Item 64 Item 75 Item 93
---- # 4 score: 9
         12 15 20 52 56 61 62 74 79 88 94 100
         Item 12 Item 15 Item 20 Item 52 Item 56 Item 61 Item 62 Item 74 Item 79 Item 88 Item 94 Item 100
---- # 5 score: 10
         2 21 25 40 70 86 90 91 92
         Item 2 Item 21 Item 25 Item 40 Item 70 Item 86 Item 90 Item 91 Item 92
---- # 6 score: 11
         3 24 27 33 45 65 68 77 78 81
         Item 3 Item 24 Item 27 Item 33 Item 45 Item 65 Item 68 Item 77 Item 78 Item 81
---- # 7 score: 12
         1 10 28 37 43 60 63 82 89
         Item 1 Item 10 Item 28 Item 37 Item 43 Item 60 Item 63 Item 82 Item 89
---- # 8 score: 13
         6 8 9 14 22 48 73
         Item 6 Item 8 Item 9 Item 14 Item 22 Item 48 Item 73
---- # 9 score: 14
         13 17 31 32 71 84
         Item 13 Item 17 Item 31 Item 32 Item 71 Item 84
---- # 10 score: 15
         16 19 34 35 38 42 54 55 76 83 87 98
         Item 16 Item 19 Item 34 Item 35 Item 38 Item 42 Item 54 Item 55 Item 76 Item 83 Item 87 Item 98 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:54:42.680

像这样的东西怎么样（使用最大分数作为 sortedarray 的上维）：

```
Dim sortedarray(5, MAXIMUM_SCORE_GOES_HERE)
for i=LBound(resultarray) to UBound(resultarray)
    idxTarget = resultarray(1,i);
    sortedarray(0,idxTarget) = resultarray(0,i)
    sortedarray(1,idxTarget) = resultarray(1,i)
    sortedarray(2,idxTarget) = resultarray(2,i)
    sortedarray(3,idxTarget) = resultarray(3,i)
    sortedarray(4,idxTarget) = resultarray(4,i)
    sortedarray(5,idxTarget) = resultarray(5,i)
Next 
```

这是基数排序，没有基数部分。没有比这更快的了。我像你一样展开了“内循环”，但如果有一个内循环，它可能会更快：而不是索引第一个维度，尝试循环遍历它，它实际上可能更快。此外，您可能想尝试 For Each...Next 而不是上面编写的 for 循环：有时 For Each 更快。但就排序算法而言，更快是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:51:40.893

我不知道您在更改和弯曲数据方面有多灵活，但您可以使用 ArrayList 并对其执行 Sort 方法。这是一个概念证明：

```
option explicit
' Create an arraylist to add items to
Dim i, score, t
dim list : Set list = CreateObject("System.Collections.ArrayList")

for i = 0 to 1000000
        ' Make an arbitrairy score between 0 and 100
        score = cint(rnd*100)
        ' pad with zero's to make the sort work correctly
        score = string(3 - len(score), "0") & score
        ' Add it to the arraylist
        list.add join(array(score, "name", "category", "details1", "details2", "details3"), vbTab)
Next

' Sort the list
t = timer()
list.sort

' Show the list
wscript.echo "duration: " & timer() - t
wscript.echo join(list.toArray(), vbNewLine) 
```

这将返回 2.6 秒的持续时间来对我的机器（Intel i5）上的 1.000.000 个项目进行排序。

如前所述，您不能直接在数据格式上使用它，但如果性能是一项重要要求，则可能值得更改您的数据模型。

# routes - /favicon.ico 被附加到 Rails 4 路线

> ID：15308321
> 
> 赞同：5
> 
> 时间：2013-03-09T07:20:47.840
> 
> 标签：routes, ruby-on-rails-4

这是一个奇怪的问题。我今天启动了一个新的 Rails 4 应用程序，然后创建了一个名为 transfer_functions 的资源。当我点击 localhost:3000/transfer_functions/1 之类的 url 时，它会将 /favicon.ico 附加到它的末尾，并且我在服务器控制台中收到此错误。

```
ActionController::RoutingError (No route matches [GET] "/transfer_functions/1/favicon.ico"): 
```

有任何想法吗？谢谢！

该应用程序正在使用“turbolinks”gem。

## 更新：

我正在使用 Twitter Bootstrap 并使用相应的生成器创建应用程序布局。我从 application.html.haml 文件中删除了这一行，它解决了问题。

```
%link(href="favicon.ico" rel="shortcut icon") 
```

不确定我是否理解为什么会导致问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-10T02:40:07.700

弹出错误的原因是因为您删除的行本质上是在说“在当前目录中查找 favicon.ico”。您发布的那个 haml 代码会呈现为类似于`<link href="favicon.ico..."`.

你应该处理一个网站图标的方式是这样的：

1.  将您的 favicon 文件放在此目录中：`your_webapp/app/assets/images/`

2.  在文档的标题下编辑`your_webapp/app/views/layouts/application.html.haml`并添加以下内容：`= favicon_link_tag`

Rails 将使用资产管道为网站图标提供服务，就像任何其他站点资产一样。您只需要文件名，不需要在 url 中包含 images 文件夹。

如果您对文档感兴趣： http: [//api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-favicon_link_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-favicon_link_tag)

你也可以添加任何你需要的东西`rel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T01:54:15.623

要`favicon.ico`在 Rails 4 应用程序中使用文件，请`favicon_link_tag`在布局中使用。

通常在`application.html.slim`：

```
DOCTYPE html
html
  head
    = favicon_link_tag 
```

您还需要在文件`favicon.ico`夹中命名一个文件`app/assets/images`。

* * *

[官方文档](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-favicon_link_tag)：

> 返回加载网站图标文件的链接。您可以在第一个参数中指定不同的文件。助手接受一个额外的选项散列，您可以在其中覆盖“rel”和“type”。
> 
> 选项
> 
> :rel - 指定此链接的关系，默认为 'shortcut icon'
> 
> :type - 覆盖自动生成的 mime 类型，默认为 'image/vnd.microsoft.icon'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T10:45:18.100

我们经常在我们的日志中看到 404 请求“旧版本”图标的请求。在每个新版本上（因此在每个新的预编译上），都会生成一个带有唯一哈希的新 favicon 文件。如果有人存储了 favicon，例如通过在他/她的 iOS 主屏幕上放置指向您网站的快捷方式，这似乎会中断：图标丢失并显示损坏的图标符号。因此，我们放弃了/asset 管道方法，并通过简单地包括以下`favicon_link_tag`内容恢复到存储在文件夹中的网站图标：`public`

```
<link href="favicon.ico">
<link href="favicon_ios.png" rel="apple-touch-icon" type="image/png"> 
```

或者在我们的 HAML 案例中：

```
%link{:href => 'favicon.ico'}
%link{:href => 'favicon_ios.png', :rel => 'apple-touch-icon', :type => 'image/png'} 
```

# ios - 在 .plist 中使用 iOS 常量（来自 UIApplication.h）

> ID：15308322
> 
> 赞同：0
> 
> 时间：2013-03-09T07:20:54.503
> 
> 标签：ios

我正在为目前仅纵向但希望使其可配置的应用程序添加横向支持，以便方向自动旋转或可以锁定为纵向或横向。

我的首选项说明符如下所示：

```
 <dict>
        <key>Type</key>
        <string>PSMultiValueSpecifier</string>
        <key>Title</key>
        <string>Orientation</string>
        <key>Titles</key>
        <array>
            <string>Auto Rotate</string>
            <string>Landscape</string>
            <string>Portrait</string>
        </array>
        <key>Values</key>
        <array>
            <string>1</string>
            <string>2</string>
            <string>3</string>
        </array>
        <key>Key</key>
        <string>bz-orientation</string>
        <key>DefaultValue</key>
        <string></string>
    </dict> 
```

我实际上不想使用ie 中的`UIInterfaceOrientationMask`值，而不是使用幻数作为偏好值，&`UIApplication.h``UIInterfaceOrientationMaskAll``UIInterfaceOrientationMaskLandscape``UIInterfaceOrientationMaskPortrait`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:42:02.720

不是直接的，据我所知。但是，由于一些预处理器滥用，您可以将一个常量到文本（或相反）的映射组合在一起，然后在您的 plist 中使用字符串。这就是我的意思：

```
#define ENTRY(constant) @#constant: [NSNumber numberWithInteger:constant]

NSDictionary *orientations = @{
    ENTRY(UIInterfaceOrientationMaskAll),
    ENTRY(UIInterfaceOrientationMaskLandscape),
    ENTRY(UIInterfaceOrientationMaskPortrait)
};

#undef ENTRY 
```

然后将设置捆绑 plist 中的相关代码段更改为类似

```
<key>Values</key>
<array>
    <string>UIInterfaceOrientationMaskAll</string>
    <string>UIInterfaceOrientationMaskLandscape</string>
    <string>UIInterfaceOrientationMaskPortrait</string>
</array> 
```

为了检索实际的界面方向掩码：

```
NSUserDefaults *defs = [NSUserDefaults standardUserDefaults];
NSString *maskAsString = [defs objectForKey:@"bz-orientation"];
NSNumber *maskAsNumber = [orientations objectForKey:maskAsString];

// Enum types are often just typedeffed to `NSInteger` or `NSUInteger`
UIInterfaceOrientationMask mask = [maskAsNumber integerValue]; 
```

# sql-server - 删除触发器不起作用

> ID：15308325
> 
> 赞同：2
> 
> 时间：2013-03-09T07:21:12.423
> 
> 标签：sql-server, tsql, triggers

我创建了一个简单的删除触发器，该触发器被触发但 0 行受到影响。父表记录已删除。但是表中的记录也应该删除而不是删除。我有以下查询。

```
ALTER trigger [dbo].[studentAuditActionDelete] on [dbo].[tblStudent]

after delete
AS

declare @studentId_Audit int;

    select @studentId_Audit = i.studentID from inserted i;  
    delete from studentAudit
    where
    studentId_Audit = @studentId_Audit
    PRINT 'AFTER Delete trigger fired.' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T07:25:05.497

您是否尝试过从`deleted`

```
select @studentId_Audit = d.studentID from deleted d; 
```

请记住，`deleted`可以包含多行，您只能选择其中之一！（这是为了让所有触发器记住`inserted`、`updated`和`deleted`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:24:55.563

不要在触发器中声明变量，将简单的 JOIN 与源表 DELETED 一起使用，您将能够使用多次删除

```
CREATE TRIGGER [dbo].[studentAuditActionDelete] on [dbo].[tblStudent]
FOR DELETE
AS
  DELETE a
  FROM studentAudit a JOIN deleted d ON a.studentId_Audit = d.studentID  
  PRINT 'AFTER Delete trigger fired.' 
```

# java - 最后一个已知位置是多久前记录的？

> ID：15308326
> 
> 赞同：17
> 
> 时间：2013-03-09T07:21:18.913
> 
> 标签：java, android, google-maps, geolocation, gps

我正在获取我的最后一个已知位置，但不知道我的位置上次更新以来的时间。我如何才能知道自上次更新位置以来已经过去了多长时间？

```
LocationManager locationManager 
                        = (LocationManager) getSystemService(LOCATION_SERVICE);
Criteria c = new Criteria();
    c.setAccuracy(Criteria.ACCURACY_FINE);
    c.setAccuracy(Criteria.ACCURACY_COARSE);
    c.setAltitudeRequired(false);
    c.setBearingRequired(false);
    c.setCostAllowed(true);
    c.setPowerRequirement(Criteria.POWER_HIGH);
String provider = locationManager.getBestProvider(c, true);
Location location = locationManager.getLastKnownLocation(provider); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-03-28T16:35:38.990

API 17 前后的最佳选择：

```
public int age_minutes(Location last) {
    return age_ms(last) / (60*1000);
}

public long age_ms(Location last) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1)
        return age_ms_api_17(last);
    return age_ms_api_pre_17(last);
}

@TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
private long age_ms_api_17(Location last) {
    return (SystemClock.elapsedRealtimeNanos() - last
            .getElapsedRealtimeNanos()) / 1000000;
}

private long age_ms_api_pre_17(Location last) {
    return System.currentTimeMillis() - last.getTime();
} 
```

pre 17 不是很准确，但应该足以测试一个位置是否很旧。

我应该认为，这样就可以了：

```
if (age_minutes(lastLoc) < 5) {
   // fix is under 5 mins old, we'll use it

} else {
   // older than 5 mins, we'll ignore it and wait for new one

} 
```

此逻辑的通常用例是当应用程序刚刚启动时，我们需要知道我们是否**必须**等待新位置，或者在等待新位置时可以暂时使用最新位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-22T17:42:49.247

很抱歉重新打开这个，但我认为韦斯顿的回答是不正确的，Android 文档至少具有误导性。

getTime() 的时基是从 GPS 模块接收到的 NMEA 语句确定的 UTC，*而不是*System.currentTimeMillis()。GPS时间精确到纳秒（它必须是因为电磁波在1ns内传播30cm）。这里唯一的复杂情况是，由于 GPS 闰秒，它可能会关闭 1 秒（参见 [1]；这可能每隔几年发生几分钟，假设 GPS 足够智能，可以记住跨电源周期的 UTC 偏移量） )

另一方面，System.currentTimeMillis() 可能由于漂移而关闭几秒/分钟，如果用户设置错误的时间/日期，甚至更多。

因此，API 17 之前唯一真正的解决方案是定期接收位置更新，并且每次根据 SystemClock.elapsedRealtime() 记录您自己的时间戳。

我刚刚在三星 S4 上试过这个，如果其他手机给出不同的结果，请纠正我。不过，我对此表示怀疑。

[1] [http://en.wikipedia.org/wiki/Global_Positioning_System#Leap_seconds](http://en.wikipedia.org/wiki/Global_Positioning_System#Leap_seconds)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-15T20:03:49.350

Location.getTime() 实际上并不是查找最后一个已知位置的年龄的最佳方法。

来自 JavaDoc：

> 返回此修复的 UTC 时间，以 1970 年 1 月 1 日以来的毫秒数为单位。
> 
> 请注意，设备上的 UTC 时间不是单调的：它可以不可预测地向前或向后跳跃。所以在计算时间增量时总是使用 getElapsedRealtimeNanos。

使用的两种方法是：

```
SystemClock.elapsedRealtimeNanos();
Location.getElapsedRealtimeNanos(); 
```

另请注意，LocationManager.lastKnownLocation() 可能返回 null。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T12:19:52.370

每个位置都有一个属性时间。获取它`getTime().`与当前时间比较。（计算差异）。这给了你“年龄”。

# android - 在 Android 中的相机预览上映射 GPS 位置

> ID：15308329
> 
> 赞同：1
> 
> 时间：2013-03-09T07:21:46.240
> 
> 标签：android, augmented-reality

Guyz，当我在我周围移动相机时，我需要在相机预览上显示位置（例如餐厅、剧院、银行等）。我知道如何获取位置（例如来自foursquare 或谷歌地图），我也知道如何打开相机预览。我只是不知道如何将这两者联系起来。我用谷歌搜索了它，但没有得到有用的帖子，可能是因为我的英语不好。

因此，伙计们，我需要您的帮助，如果您知道有关此问题的任何帖子，请善意地发表评论。

提前致谢。

编辑：实时相机预览

-------------------------------------------- ----------------------------------
| 剧院 |
| |
| 银行 |
| 餐厅 |
| |
| |
| |
| |
| |
-------------------------------------------------- ----------------------------------------

请原谅我的声望不到10，所以不能上传图片。
希望这将有助于理解我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T09:01:12.187

我也在安卓上做了类似的事情。假设您要在预览中打印的内容称为目标。

你肯定知道这些目标的坐标是什么，包括纬度经度和高度。假设这些坐标分别是 tx、ty 和 tz，并且设备的当前位置是 x、y 和 z。

根据摄影测量中的共线性方程，目标的屏幕坐标（sx，sy）为：

* * *

sx = f*{[m11(x-tx)+m12(y-ty)+m13(z-tz)]/[m31(x-tx)+m32(y-ty)+m33(z-tz)] }

sy = f*{[m21(x-tx)+m22(y-ty)+m23(z-tz)]/[m31(x-tx)+m32(y-ty)+m33(z-tz)] }

* * *

其中 f 是焦距，m11 ~ m33 是基于设备方向的旋转矩阵中的值。屏幕坐标必须应用仿射变换才能将它们转换为屏幕列和行以供打印使用。

这是我试图做的，但我发现应用自动对焦后焦距从未改变。所以我用另一种方式来做。

1.  获取设备的屏幕尺寸（或预览尺寸）和相机水平和垂直角度。
2.  计算设备和目标之间的方位角和倾角。
3.  根据这些角度和屏幕尺寸插入屏幕坐标。
4.  在屏幕上打印目标。我设置了一组图像视图和文本视图来做同样的事情。

对于这些目标的实时更新，请尝试在 onSensorChanged() 中更新它们

希望这些帮助。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:55:23.033

常见问题解答清楚地表明您不应该问范围很广的问题。您要问的不是“如何链接它们”，因为您需要的绝不是一个简短且可回答的问题。

但我可以推荐你买这本书，它解释得非常好，指导读者几乎完全完成你想做的事情：http: [//www.apress.com/9781430239451](http://www.apress.com/9781430239451)

不要忘记下载作者包含的几个源项目。从那里开始，如果您在更具体的问题上需要帮助，请开始一个新的简洁问题。

祝你今天过得愉快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:45:20.357

您可能正在寻找 SurfaceView。我自己并没有大量使用它，但我知道这就是 ZXing 条码扫描仪将图像叠加在相机预览上的方式。查看开发者指南：

[http://developer.android.com/reference/android/view/SurfaceView.html](http://developer.android.com/reference/android/view/SurfaceView.html)

还有一个真实应用程序的 ZXing 源代码：

[https://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/CaptureActivity.java](https://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/CaptureActivity.java)

# algorithm - 求所有商的总和

> ID：15308330
> 
> 赞同：-1
> 
> 时间：2013-03-09T07:21:49.507
> 
> 标签：algorithm, math

给定两个数 M 和 N。令 qi 是 i*N/M 的整数部分。从 0 到 M-1 的 qi 的总和是多少。O(M) 是显而易见的方法。这可以在更短的时间内完成吗，如果存在一些更简单的简化表达式，可能是 O(1)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:00:46.570

有趣的问题。（这篇文章会让我希望我们在 SO 上有数学格式……）

我的方法是将问题写为

```
∑i floor(i*N/M) = ∑i i*N/M - ∑i [i*N/M] 
```

其中`[]`是“小数部分”运算符（即 [1.3] = 0.3、[6] = 0 等）。

然后，前半部分很简单：它是一个正常的等差数列和乘以`N/M`，所以它总和为`N*(M-1)/2`。下半场处理起来比较棘手，但您会明白为什么将其与上半场分开至关重要。

让`k = gcd(N, M)`. 然后，让`n = N/k`和`m = M/k`，所以后半部分是`∑i [i*n/m]`。至关重要的是`n`，`m`现在是相对优质的。总和`i`是从`0`到`M-1 = km-1`。我们可以拆分`i`为`m`和余数的倍数，as `i = qm + r`，所以现在的和是

```
∑q ∑r [r*n/m] 
```

其中`q`sum from `0`to`k-1`和`r`sums from `0`to `m-1`。现在到了关键步骤：因为`n`和`m`是相对素数，所以`r*n`for的序列`r = 0..m-1`是*mod m*的*排列*。因此，该序列是 的*排列*，所以。因此，整个总和折叠为。`0, 1, 2, 3, ..., m-1` *`[r*n/m]`*`0/m, 1/m, 2/m, ..., (m-1)/m``∑r [r*n/m] = ∑r r/m = m*(m-1)/2/m = (m-1)/2``k * (m-1)/2 = (km - k) / 2 = (M - k) / 2`**

 **最后，我们将两半合并：`N*(M-1)/2 - (M-k)/2 = (NM - N - M + k)/2`.

因此，所需的总和是`(NM - N - M + gcd(N, M))/2`。[使用 Euclid 算法可以相对快速地](https://stackoverflow.com/a/3981010/1204143)计算 GCD ，因此计算起来相当快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:28:54.960

在我看来，您正在尝试将 0N/M + 1N/M + 2N/M + 3N/M ... (M-1)N/M 相加。如果是这样，你有 (0+1+2+3...+(M-1))N/M。你可以在 O(1) 中解决这个问题，因为 (0+1+2+3+...+(M-1)) 是 M*(M-1)/2。M 取消，你得到 (M-1)N/2。**

# nfc - 使用 ACR122S 对 Mifare 进行身份验证失败

> ID：15308335
> 
> 赞同：1
> 
> 时间：2013-03-09T07:22:23.323
> 
> 标签：nfc

我对 NFC 设备非常陌生，希望您能帮助我。我尝试使用 ACR122S 验证我的 Mifare 1k 卡，它返回错误：31。我不确定出了什么问题。

日志：

获得 ATR < D4 60 01 01 20 23 11 04 10

> D5 61 01 10 09 01 00 04 08 04 C6 F0 FA DC ATR 值：D5 61 01 10 09 01 00 04 08 04 C6 F0 FA DC 卡类型：Mifare 1K

获取 UID < D4 4A 01 00 (X) 错误：31

帮我？我尝试搜索有关此问题的任何教程或任何内容。我似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:44:44.233

如果您是从 java 执行此操作，请查看[NFC Tools for Java](https://github.com/grundid/nfctools)，如果您正在使用 Android [NDEF Tools for Android](http://code.google.com/p/ndef-tools-for-android/)以及[NFC Eclipse plugin](http://code.google.com/p/nfc-eclipse-plugin/)。

# javascript - URL 重定向 JavaScript

> ID：15308343
> 
> 赞同：9
> 
> 时间：2013-03-09T07:23:26.187
> 
> 标签：javascript

URL重定向Javascript？我正在尝试使用 http:// 重定向输入的网址并提示直到找到 http://，如果找到它会将其定向到输入的网站。

到目前为止，这是我的代码：

```
function enter() {
    var keepGoing = true;
    var email;
    while (keepGoing) {

        keepGoing = false

        email = prompt("Please Enter Website Address");
        // Website Address validation to see if it has http://
        if (email.indexOf('http://') === -1) {
            alert("Not valid Web Address");
            keepGoing = true;
        }

        // if nothing was entered
        else if (email == '') {
            var email = prompt("Please Enter Valid Web Address");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T10:17:40.960

使用 location.href

```
window.location.href = email; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:26:52.407

```
window.location.href = email; 
```

应该将用户重定向到包含在`email`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:29:06.487

您可以设置[window.location.href](https://developer.mozilla.org/en-US/docs/DOM/window.location)：

```
function enter()
{
    var keepGoing = true;
    var email;
    while(keepGoing){

        keepGoing = false

        email = prompt("Please Enter Website Address");
        // Website Address validation to see if it has http://
         if(email.indexOf('http://') != 0)
         {
            alert("Not valid Web Address");
            keepGoing = true;
         }

         //if nothing was entered
         else if(email == '')
         {
            var email = prompt("Please Enter Valid Web Address");
         }

         else
         {
            window.location.href=email;
         }       

    }
 } 
```

# floating-point - 在 mifare 卡中存储小数值

> ID：15308351
> 
> 赞同：1
> 
> 时间：2013-03-09T07:25:21.203
> 
> 标签：floating-point, fractions, mifare

我可以将小数值（如 45.79）作为块值存储到 mifare 经典卡中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:23:48.043

不，但您可以先将值乘以 100，然后再存储，然后再除以 100。将其视为以美分而不是美元存储金额。

# java - 如何在sqlite表中获取数据组的范围

> ID：15308362
> 
> 赞同：1
> 
> 时间：2013-03-09T07:26:55.297
> 
> 标签：java, android, sqlite

我不确定这是否可以做到，但如果可以：

假设我有一个简单的表，它有一个时间字段（为简单起见，我们将只使用整数）和一个活动字段。数据可以按时排序。例如：

```
| time  |  activity
--------------------
|  1    |  sitting
|  3    |  sitting
|  5    |  sitting
|  9    |  running
|  10   |  running
|  11   |  sitting
|  13   |  sitting
|  15   |  walking
|  18   |  walking
|  20   |  running
|  31   |  sitting
|  32   |  sitting 
```

有没有一种简单的方法可以获取每个活动的开始/停止时间列表？因此我的结果是：

```
sitting (1, 5)
sitting (9, 10)
sitting (11, 13)
running (9, 10)
running (20, 20)
walking (15, 18) 
```

我知道我可以进行贪婪搜索，并且对于每个活动，收集每个唯一集群的开始/停止时间并以这种方式存储它们。但是由于这些数据存储在一个 sqlite 文件中，我想我可以编写一个查询来快速为我提供我正在寻找的相同数据。数据不必采用我在下面列出的确切格式，而是给我所有类似活动发生的所有开始/停止时间......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:33:51.787

SQL 是一种面向集合的语言，因此查询在工作时并不美观：

```
SELECT activity,
       time AS start_time,
       (SELECT MAX(a3.time)
        FROM activity AS a3
        WHERE a3.time < ifnull((SELECT MIN(time)
                                FROM activity AS a4
                                WHERE a4.time > a1.time
                                  AND a4.activity != a1.activity),
                               'inf')
       ) AS end_time
FROM activity AS a1
WHERE (SELECT a2.activity
       FROM activity AS a2
       WHERE a2.time < a1.time
       ORDER BY a2.time DESC
       LIMIT 1
      ) IS NOT a1.activity 
```

这个怎么运作：

外部查询 ( `a1`) 为组的每个开始返回一条记录。如果记录是具有活动的*第一*条记录，即如果前一条记录具有不同的活动，则该记录是组的开始。前一条记录是时间最长但仍较小的记录，由`a2`子查询计算得出。比较使用`IS NOT`代替，`!=`因为`NULL`如果没有先前的记录，子查询将返回。

由子查询计算的第三列`a3`给出了组的结束时间。该组的最后一条记录是下一组的第一条记录之前的最后一条记录。下一组的第一条记录（由`a4`子查询计算）是具有最小时间戳但仍然较大但具有不同活动的记录。在表的末尾，没有下一组；将其`ifnull`转换为比较大于任何数字`NULL`的字符串。`'inf'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:12:48.870

```
select a1.activity, min(a1.time), max(a2.time)
from activity as a1 
   inner join activity as a2 on a1.activity = a2.activity
group by a1.activity 
```

性能提示：确保你有活动指数

# android - 如何安排稍后在android中发送短信？

> ID：15308363
> 
> 赞同：2
> 
> 时间：2013-03-09T07:26:58.737
> 
> 标签：android, sms, alarmmanager

我正在尝试在我的 Android 应用程序中安排短信。短信正在发送，但它不会被“预定”。这是我的代码。

```
Intent myIntent = new Intent(ScheduleMessage.this, MyAlarmService.class);

Bundle bundle = new Bundle();
bundle.putCharSequence("Number", Number.getText().toString());
bundle.putCharSequence("Message", Message.getText().toString());
myIntent.putExtras(bundle);

pendingIntent = PendingIntent.getService(ScheduleMessage.this, 0, myIntent, 0);

AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.set(Calendar.SECOND,20);

alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);

Toast.makeText(getApplicationContext(), "Message: "+Message+" for Number: "+Number, 1).show(); 
```

我错过了一些明显的东西吗？没有强制关闭或任何错误。就是这样，短信是立即发送的，而不是在 30 秒后发送（我稍后会考虑按小时、天等安排）。请帮我。我对Android很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:21:47.193

这取决于执行代码时的确切当前时间。:)

您要做的是获取当前时间（例如*09:19:35*），然后将`seconds`部分设置为 20 （例如*09:19:20 **）***。每分钟 40 秒，这是过去的时间，立即触发您的警报。

你要写的是：

```
calendar.add(Calendar.SECOND,20); 
```

注意`add`你写的方法`set`。

# android - 如何将 Ormlite 与 LoaderManager 一起使用

> ID：15308369
> 
> 赞同：9
> 
> 时间：2013-03-09T07:28:01.600
> 
> 标签：android, ormlite

我在我的 Android 应用程序中成功使用了 OrmLite。我正在将我的应用程序移动到新的 CursorLoader 逻辑，我想知道如何在没有 ContentProvider 的情况下将 Ormlite 与 CursorLoader 一起使用。

不可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T12:37:37.090

我认为最好的解决方案是实现 CursorLoader 的子类，并在 loadInBackground() 中从 ORM 获取和返回游标。就我而言，它是这样的

```
@Override
public Cursor loadInBackground() {
    ...
    Dao<Account, String> dao = mHelper.getDao();
    QueryBuilder<Account, String> qb = dao.queryBuilder();                    
    CloseableIterator<Account> iterator = dao.iterator(qb.prepare());
    try {
        AndroidDatabaseResults results =
        (AndroidDatabaseResults)iterator.getRawResults();
        cursor = results.getRawCursor();               
    }
    catch(Exception ex){                    
        ex.printStackTrace();
    }
    ...
    return cursor;
} 
```

比你可以像其他加载器一样使用这个加载器。您可以在此处查看带有自定义 AsyncTaskLoader 的完整示例：[示例](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)

# c# - DataObject.GetData() 还是返回 MemoryStream 类型的对象？

> ID：15308370
> 
> 赞同：1
> 
> 时间：2013-03-09T07:28:06.807
> 
> 标签：c#, winforms, clipboard

我不知道为什么 GetData() 方法需要 Type 的参数，我认为 Type 是指定对象应该是哪个类/类型。我有一个名为 GraphicsPathWrap 的结构，它通过实现 ISerializable 使其可序列化。我尝试了以下复制功能：

```
private void Copy(GraphicsPathWrap gpw){
  DataObject obj = new DataObject();
  obj.SetData(typeof(GraphicsPathWrap), gpw);
  Clipboard.SetDataObject(obj);
} 
```

然后尝试了以下粘贴功能：

```
private GraphicsPathWrap Paste()
{
  return (GraphicsPathWrap)Clipboard.GetDataObject().GetData(typeof   (GraphicsPathWrap));
} 
```

它应该可以工作，但是 GetData(...) 返回一个 MemoryStream 类型的对象，并且引发了 InvalidCastException。我不明白为什么它是 MemoryStream 的类型。我认为它应该可以转换为 GraphicsPathWrap？我可以通过使用 BinaryFormatter 反序列化 MemoryStream 来解决这个问题，但是当剪贴板不能为我做所有事情时，这太荒谬了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:55:36.413

EDIT : I've exactly simulated your situation, the thing is which was saying MemoryStream when you have implemented the ISerializable Interface and hadn't deserialized it properly.

The GetData() Returns Memory Stream in this below scenario :

```
 [Serializable]
        public struct GraphicsPathWrap : ISerializable
        {
            private static string myValue = "This is the value of the class";             

            // Creates a property to retrieve or set the value. 
            public string MyObjectValue
            {
                get
                {
                    return myValue;
                }
                set
                {
                    myValue = value;
                }
            }

            #region ISerializable Members

            public void GetObjectData(SerializationInfo info, StreamingContext context)
            {

            }

            #endregion
        } 
```

Then, I implemented serialization\deserialization properly when GetData() gives the correct type object

```
[Serializable]
        public struct GraphicsPathWrap : ISerializable
        {
            private static string myValue = "This is the value of the class";

            public GraphicsPathWrap(SerializationInfo info, StreamingContext ctxt)  // Deserialization Constructor
            {
                myValue = (string)info.GetValue("MyValue", typeof(string));
            }

            // Creates a property to retrieve or set the value. 
            public string MyObjectValue
            {
                get
                {
                    return myValue;
                }
                set
                {
                    myValue = value;
                }
            }

            #region ISerializable Members

            public void GetObjectData(SerializationInfo info, StreamingContext context)
            {
                info.AddValue("MyValue", myValue); // Serialize the value
            }

            #endregion
        } 
```

I hope the above answer will help you

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:44:17.363

Clipboard.SetDataObject(object data) 方法名称有点误导，因为它没有专门要求 DataObject 作为参数，而只是一个必须可序列化的 Object。

您可以尝试像这样直接传递 gpw：

```
private void Copy(GraphicsPathWrap gpw){
  Clipboard.SetDataObject(gpw);
} 
```

如果 GraphicsPathWrap 是可序列化的，它应该可以工作。

编辑：在测试我自己之后，事实证明该方法可以双向工作，要么直接传递 Serializable 对象，要么将其封装在 DataObject 中。我通过检查特定剪贴板方法的 .Net 源代码确认了这一点，我在其中发现了这一点：

```
if (data is DataObject) 
{
      dataObject = (DataObject)data; 
} 
```

因此，正如 Ramesh 在另一个答案中所说，您可能需要检查您的对象是否正确设置为 Seriaizable。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-17T22:07:57.407

我正在使用`Clipboard.GetData`一个类型的对象`SerializedClipboardFragment`——这是我自己的一个类型，一个类，我用`[Serializable()]`属性标记了它：

```
[Serializable()]
public class SerializedClipboardFragment
{
    readonly string[] m_ancestors;
    readonly string m_fragment;
    readonly int m_numberOfNodes;
    readonly bool m_isInsertingBlock;
    readonly bool m_isInsertingTable;

    public SerializedClipboardFragment(
        string[] ancestors,
        string fragment,
        int numberOfNodes,
        bool isInsertingBlock,
        bool isInsertingTable
        )
    {
        m_ancestors = ancestors;
        m_fragment = fragment;
        m_numberOfNodes = numberOfNodes;
        m_isInsertingBlock = isInsertingBlock;
        m_isInsertingTable = isInsertingTable;
    }

    internal static DataFormats.Format s_format;
    static SerializedClipboardFragment()
    {
        s_format = DataFormats.GetFormat(typeof(SerializedClipboardFragment).FullName);
    }

    ... etc -- various get-only properties ...
} 
```

我从剪贴板获取此数据的代码如下所示：

```
 public static SerializedClipboardFragment getSerializedFragment()
    {
        if (!Clipboard.ContainsData(SerializedClipboardFragment.s_format.Name))
        {
            return null;
        }

        object o = Clipboard.GetData(SerializedClipboardFragment.s_format.Name);
        return (SerializedClipboardFragment)o;
    } 
```

当我测试这个时，我发现它*通常*有效。

但它*有时会*在我的自动回归测试中失败，我尝试在设置后立即从剪贴板获取数据......例如，它可能会在 30 次连续成功的 set-then-get 尝试后失败。

如果它失败了，就像你描述的那样，即对象是`MemoryStream`.

请注意，它不应该因为`Clipboard.ContainsData`最近返回而失败`true`。

我意识到只有一个系统剪贴板；运行此测试时，我的手不在键盘上，发生这种情况时我并不想自己干扰剪贴板。

无论如何，如果我编写如下代码，问题似乎就消失了：

```
 public static SerializedClipboardFragment getSerializedFragment()
    {
        if (!Clipboard.ContainsData(SerializedClipboardFragment.s_format.Name))
        {
            return null;
        }
        // sometimes return MemoryStream object instead under automated-testing
        // possibly a timing problem
        object o = null;
        for (int i = 0; i < 10; ++i)
        {
            o = Clipboard.GetData(SerializedClipboardFragment.s_format.Name);
            if (o is SerializedClipboardFragment)
                return (SerializedClipboardFragment)o;
            System.Threading.Thread.Sleep(100);
        }
        return (SerializedClipboardFragment)o;
    } 
```

因此，除非我弄错了，否则这可能是一些令人反感的计时错误，与在剪贴板中存储自定义数据类型相关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T00:50:59.607

```
[DataObject(true)]
    public class EmployeeDAL
    {
        [DataObjectMethod(DataObjectMethodType.Update, true)]
        public int UpdateEmployeeSalary(int percentage, int deptid, int posid)
        {
            OracleConnection con = new OracleConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
            OracleCommand cmd = new OracleCommand("GIVE_RAISE_SP", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("PV_PERCENTAGE_RAISE_I", OracleType.Int32).Value = percentage;
            cmd.Parameters.AddWithValue("PV_POSITIONID_I", OracleType.Int32).Value = posid;
stac            cmd.Parameters.AddWithValue("PV_DEPTID_I", OracleType.Int32).Value = deptid;
            cmd.Parameters.AddWithValue("PV_NUM_EMPLOYEES_O", OracleType.Int32).Direction = ParameterDirection.Output;

            OracleDataAdapter da = new OracleDataAdapter(cmd);

            try
            {
                con.Open();
                da.UpdateCommand = cmd;
                cmd.ExecuteNonQuery();
            }
            catch (Exception)
            {

            }
            finally
            {
                con.Close();
            }

            return Convert.ToInt32(cmd.Parameters["PV_NUM_EMPLOYEES_O"].Value);
        } 
```

# javascript - 在 JavaScript 中不使用 DOM 事件的自定义事件模型

> ID：15308371
> 
> 赞同：59
> 
> 时间：2013-03-09T07:28:08.683
> 
> 标签：javascript, events, object, handler

我是 JavaScript 和一般编程的新手，我对对象和事件有一些疑问。

假设我有一个对象：

```
var computer = {
    keyboard: {}
} 
```

我正在寻找一种将事件注册到键盘对象的方法：

```
computer.keyboard.registerEvent( "keyEscape" ); 
```

触发事件：

```
computer.keyboard.dispatchEvent( "keyEscape" ); 
```

并创建事件处理程序：

```
computer.keyboard.addEventListener( "keyEscape", function() {...} ); 
```

我知道如何使用 DOM 元素而不是对象来做到这一点。这是可以在 JavaScript 中完成的吗（也许在 JQuery 的帮助下）？

即使是最轻微的指导也将不胜感激。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-09T08:35:44.607

如果您想在不依赖 DOM 事件的情况下创建一个完全独立的事件系统，您可以使用反应器模式获得类似的东西

```
function Event(name){
  this.name = name;
  this.callbacks = [];
}
Event.prototype.registerCallback = function(callback){
  this.callbacks.push(callback);
}

function Reactor(){
  this.events = {};
}

Reactor.prototype.registerEvent = function(eventName){
  var event = new Event(eventName);
  this.events[eventName] = event;
};

Reactor.prototype.dispatchEvent = function(eventName, eventArgs){
  this.events[eventName].callbacks.forEach(function(callback){
    callback(eventArgs);
  });
};

Reactor.prototype.addEventListener = function(eventName, callback){
  this.events[eventName].registerCallback(callback);
}; 
```

**像 DOM 事件模型一样使用它**

```
var reactor = new Reactor();

reactor.registerEvent('big bang');

reactor.addEventListener('big bang', function(){
  console.log('This is big bang listener yo!');
});

reactor.addEventListener('big bang', function(){
  console.log('This is another big bang listener yo!');
});

reactor.dispatchEvent('big bang'); 
```

[住在JSBin](http://jsbin.com/onuyuj/4/edit)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-09-14T12:22:05.430

如果您不想实现自己的事件处理机制，您可能会喜欢我的方法。您将从通常的 DOM 事件中获得所有您知道的功能（例如，preventDefault()），我认为它更轻量级，因为它使用了浏览器已经实现的 DOM 事件处理功能。

只需在对象的构造函数中创建一个普通的 DOM EventTarget 对象，并将所有 EventTarget 接口调用传递给 DOM EventTarget 对象：

```
var MyEventTarget = function(options) {
    // Create a DOM EventTarget object
    var target = document.createTextNode(null);

    // Pass EventTarget interface calls to DOM EventTarget object
    this.addEventListener = target.addEventListener.bind(target);
    this.removeEventListener = target.removeEventListener.bind(target);
    this.dispatchEvent = target.dispatchEvent.bind(target);

    // Room your your constructor code 
}

// Create an instance of your event target
myTarget = new MyEventTarget();
// Add an event listener to your event target
myTarget.addEventListener("myevent", function(){alert("hello")});
// Dispatch an event from your event target
var evt = new Event('myevent');
myTarget.dispatchEvent(evt); 
```

还有一个[JSFiddle 片段](http://jsfiddle.net/2vqof4zs/156/)可以用您的浏览器对其进行测试。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2020-10-14T09:17:41.170

您可以像一些人建议的那样简单地创建一个新`EventTarget`实例，而不必创建 DOM 对象，如下所示：

```
const target = new EventTarget();
target.addEventListener('customEvent', console.log);
target.dispatchEvent(new Event('customEvent')); 
```

这提供了您习惯使用 DOM 事件的所有功能，并且不需要创建空的文档元素或节点。

有关更多信息，请参阅 Mozilla 开发人员指南：[https ://developer.mozilla.org/en-US/docs/Web/API/EventTarget](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-11-21T22:05:06.560

Necroposting 在这里有点，但我昨晚刚刚写了这样的东西 - 超级简单，并且基于 Backbone.js 事件模块：

```
EventDispatcher = {

    events: {},

    on: function(event, callback) {
        var handlers = this.events[event] || [];
        handlers.push(callback);
        this.events[event] = handlers;
    },

    trigger: function(event, data) {
        var handlers = this.events[event];

        if (!handlers || handlers.length < 1)
            return;

        [].forEach.call(handlers, function(handler){
            handler(data);
        });
    }
}; 
```

这种方法非常简单且可扩展，允许您在需要时在其之上构建更复杂的事件系统。

使用`EventDispatcher`很简单：

```
function initializeListeners() {
    EventDispatcher.on('fire', fire); // fire.bind(this) -- if necessary
}

function fire(x) {
    console.log(x);
}

function thingHappened(thing) {
    EventDispatcher.trigger('fire', thing);
} 
```

通过一些简单的命名空间，您将能够轻松地在模块之间传递基本事件！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-02-03T15:17:11.897

您可以使用 JQuery 来完成。

订阅您的自定义事件：

```
$(computer.keyboard).on('keyEscape', function(e){
    //Handler code
}); 
```

用于抛出您的自定义事件：

```
$(computer.keyboard).trigger('keyEscape', {keyCode:'Blah blah'}); 
```

可能不是最好的方法，但您也可以在您的方法（addEventListener、dispatchEvent、...）中创建将包装 JQuery 逻辑的函数，以支持本地外观的 api 和 JQuery。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-08T14:18:02.627

最有可能的是，您需要一种事件机制作为多个对象之间的通信媒介。

以下是您如何实现这一目标：

```
/**
 * EventfulObject constructor/base.
 * @type EventfulObject_L7.EventfulObjectConstructor|Function
 */
var EventfulObject = function() {
  /**
   * Map from event name to a list of subscribers.
   * @type Object
   */
  var event = {};
  /**
   * List of all instances of the EventfulObject type.
   * @type Array
   */
  var instances = [];
  /**
   * @returns {EventfulObject_L1.EventfulObjectConstructor} An `EventfulObject`.
   */
  var EventfulObjectConstructor = function() {
    instances.push(this);
  };
  EventfulObjectConstructor.prototype = {
    /**
     * Broadcasts an event of the given name.
     * All instances that wish to receive a broadcast must implement the `receiveBroadcast` method, the event that is being broadcast will be passed to the implementation.
     * @param {String} name Event name.
     * @returns {undefined}
     */
    broadcast: function(name) {
      instances.forEach(function(instance) {
        (instance.hasOwnProperty("receiveBroadcast") && typeof instance["receiveBroadcast"] === "function") &&
        instance["receiveBroadcast"](name);
      });
    },
    /**
     * Emits an event of the given name only to instances that are subscribed to it.
     * @param {String} name Event name.
     * @returns {undefined}
     */
    emit: function(name) {
      event.hasOwnProperty(name) && event[name].forEach(function(subscription) {
        subscription.process.call(subscription.context);
      });
    },
    /**
     * Registers the given action as a listener to the named event.
     * This method will first create an event identified by the given name if one does not exist already.
     * @param {String} name Event name.
     * @param {Function} action Listener.
     * @returns {Function} A deregistration function for this listener.
     */
    on: function(name, action) {
      event.hasOwnProperty(name) || (event[name] = []);
      event[name].push({
        context: this,
        process: action
      });

      var subscriptionIndex = event[name].length - 1;

      return function() {
        event[name].splice(subscriptionIndex, 1);
      };
    }
  };

  return EventfulObjectConstructor;
}();

var Model = function(id) {
  EventfulObject.call(this);
  this.id = id;
  this.receiveBroadcast = function(name) {
    console.log("I smell another " + name + "; and I'm model " + this.id);
  };
};
Model.prototype = Object.create(EventfulObject.prototype);
Model.prototype.constructor = Model;

// ---------- TEST AND USAGE (hopefully it's clear enough...)
// ---------- note: I'm not testing event deregistration.

var ob1 = new EventfulObject();
ob1.on("crap", function() {
  console.log("Speaking about craps on a broadcast? - Count me out!");
});

var model1 = new Model(1);

var model2 = new Model(2);
model2.on("bust", function() {
  console.log("I'm model2 and I'm busting!");
});

var ob2 = new EventfulObject();
ob2.on("bust", function() {
  console.log("I'm ob2 - busted!!!");
});
ob2.receiveBroadcast = function() {
  console.log("If it zips, I'll catch it. - That's me ob2.");
};

console.log("start:BROADCAST\n---------------");
model1.broadcast("crap");
console.log("end  :BROADCAST\n---------------\n-\n-\n");
console.log("start:EMIT\n---------------");
ob1.emit("bust");
console.log("end:EMIT\n---------------");
```

```
<h1>...THE SHOW IS ON YOUR CONSOLE!</h1>
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-09-12T16:16:50.123

这是[Mohsen 答案](https://stackoverflow.com/a/15308814)的简单扩展，作为一个清晰而简短的示例。

他所有的 React 函数都封装成一个`React()`，添加了一个函数`removeEventListener()`，整个示例呈现为一个 HTML 文件（或在[JSFiddle](https://jsfiddle.net/romleon/qs26o3p8/1/)上查看）。

```
<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>JS Bin</title>
    <!--https://jsfiddle.net/romleon/qs26o3p8/-->
</head>

<body>
    <script>
        function Reactor() {
            function Event(name) {
                this.name = name;
                this.callbacks = [];
            }
            Event.prototype.registerCallback = function(callback) {
                this.callbacks.push(callback);
            };
            Event.prototype.unregisterCallback = function(callback) {
                var array = this.callbacks,
                    index = array.indexOf(callback);
                if (index > -1)
                    array.splice(index, 1);
            }
            this.events = {};

            this.registerEvent = function(eventName) {
                var event = new Event(eventName);
                this.events[eventName] = event;
            };
            this.dispatchEvent = function(eventName, eventArgs) {
                var events = this.events
                if (events[eventName]) {
                    events[eventName].callbacks.forEach(function(callback) {
                        callback(eventArgs);
                    });
                }
                else
                    console.error("WARNING: can't dispatch " + '"' + eventName + '"')
            };
            this.addEventListener = function(eventName, callback) {
                this.events[eventName].registerCallback(callback);
            };

            this.removeEventListener = function(eventName, callback) {
                var events = this.events
                if (events[eventName]) {
                    events[eventName].unregisterCallback(callback);
                    delete events[eventName];
                }
                else
                    console.error("ERROR: can't delete " + '"' + eventName + '"')
            };
        }
/*
    demo of creating
*/
        var reactor = new Reactor();

        reactor.registerEvent('big bang');
        reactor.registerEvent('second bang');

/*
    demo of using
*/
        log("-- add 2 event's listeners for 'big bang' and 1 for 'second bang'")
        var callback1 = function() {
            log('This is big bang listener')
        }
        reactor.addEventListener('big bang', callback1);

        reactor.addEventListener('big bang', function() {
            log('This is another big bang listener')
        });

        reactor.addEventListener('second bang', function() {
            log('This is second bang!')
        });

        log("-- dipatch 'big bang' and 'second bang'")
        reactor.dispatchEvent('big bang');
        reactor.dispatchEvent('second bang');

        log("-- remove first listener (with callback1)")
        reactor.removeEventListener('big bang', callback1);

        log("-- dipatch 'big bang' and 'second bang' again")
        reactor.dispatchEvent('big bang');
        reactor.dispatchEvent('second bang');

        function log(txt) {
            document.body.innerHTML += txt + '<br/>'
            console.log(txt)
        }
    </script>
</body>

</html> 
```

# wsdl - 获取 mule 中每个请求的客户端 IP 地址

> ID：15308374
> 
> 赞同：0
> 
> 时间：2013-03-09T07:28:50.637
> 
> 标签：wsdl, cxf, mule, callable

我在 mule 中启动了一个带有 cxf 服务的 wsdl。我将客户端 IP 地址作为变量传递给 xml mule 配置中的 java 类。我实现了一个可调用的类来获取 IP 地址并在数据库中插入 IP。为了测试，我使用 mule 的 wsdl 创建了一个 Web 服务。在此过程期间，就在我创建 wsdl 类时，客户端 Ip 插入到数据库中。不幸的是，当我使用 Web 服务并发送请求时，没有在数据库中插入 IP。我的目标：我想在每次请求后将客户端 Ip 插入数据库。

我使用 Mule 3.3.0 CE。我的代码如下：

```
<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
xmlns:mule-ss="http://www.mulesoft.org/schema/mule/spring-security"
xmlns:ss="http://www.springframework.org/schema/security"
xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.mulesoft.org/schema/mule/spring-security http://www.mulesoft.org/schema/mule/spring-security/3.3/mule-spring-security.xsd 
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd ">

<global-property name="allowed" value="192.168.3.76,192.168.3.74,192.168.3.75" />

<configuration>
    <expression-language>
        <global-functions>
            def parseIp(fullIp) {
            return fullIp.substring(fullIp.indexOf('/') + 1, fullIp.indexOf(':'))
            }
        </global-functions>
    </expression-language>
</configuration>

<http:connector name="httpConnector" doc:name="HTTP\HTTPS">
    <service-overrides sessionHandler="org.mule.session.NullSessionHandler" />
</http:connector>

<mule-ss:security-manager>
    <mule-ss:delegate-security-provider
        name="memory-dao" delegate-ref="authenticationManager" />
</mule-ss:security-manager>
<spring:beans>
    <ss:authentication-manager
        xmlns:ss="http://www.springframework.org/schema/security" alias="authenticationManager">
        <ss:authentication-provider>
            <ss:user-service id="userService">
                <ss:user name="weather" password="weather" authorities="ROLE_ADMIN" />
            </ss:user-service>
        </ss:authentication-provider>
    </ss:authentication-manager>
</spring:beans>

<flow name="Weather" doc:name="Weather">
    <http:inbound-endpoint host="localhost" port="9091"
        path="/web-service/weather" exchange-pattern="request-response" doc:name="HTTP">
    <mule-ss:http-security-filter realm="mule-realm" />
    </http:inbound-endpoint>
    <expression-filter
        expression="#['${allowed}'.contains(parseIp(message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']))]"
        doc:name="Expression" />

    <set-variable variableName="remoteClientAddress"
        value="#[parseIp(message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS'])]" />
    <message-properties-transformer doc:name="myproperty"
        scope="session">
        <add-message-property key="message.payload.remoteClientAddress"
            value="#[parseIp(message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS'])]" />
    </message-properties-transformer>

    <component doc:name="classTest" class="org.mule.example.scripting.IpClient" />      

    <cxf:proxy-service 
        service="Weather"
        wsdlLocation="http://wsf.cdyne.com/WeatherWS/Weather.asmx?wsdl"
        namespace="http://ws.cdyne.com/WeatherWS/"
        validationEnabled="true" doc:name="SOAP">
    </cxf:proxy-service>

    <copy-properties propertyName="SOAPAction" doc:name="Property" />

    <cxf:proxy-client doc:name="SOAP" />

    <outbound-endpoint 
        address="http://wsf.cdyne.com/WeatherWS/Weather.asmx"
        exchange-pattern="request-response" doc:name="Generic">
    </outbound-endpoint>

</flow> 
```

和我的java类：

```
public class IpClient  implements Callable {

  @Override
  public Object onCall(MuleEventContext eventContext) throws Exception {

  MuleMessage msg = eventContext.getMessage();

String remClient = msg.getProperty("remoteClientAddress", PropertyScope.INVOCATION);

DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
Date date = new Date();

ConnectDB c = new ConnectDB("localhost:3306", "report", "root", "123456");

String sql = " INSERT INTO oml_news (ip, date) VALUES (?,?) ";

PreparedStatement ps = c.getConnnection().prepareStatement(sql);

ps.setString(1, remClient);

ps.setString(2, dateFormat.format(date).toString());

  ps.executeUpdate();

  c.close();

  return true;

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:37:24.590

您的问题肯定是由于您没有将 SOAP 请求发送到 Mule 服务。

检查 SOAPui 中的端点 URL。

# php - 在 Magento 模块中发布表单时出错？

> ID：15308378
> 
> 赞同：0
> 
> 时间：2013-03-09T07:29:02.947
> 
> 标签：php, magento-1.7

我是新手`Magento`，我被赋予了创建扩展的任务。

我正在阅读文章并继续前进。

到目前为止，我可以在管理部分的主导航中添加我的菜单，并且在该菜单上我正在调用 a`Controller`并加载`View`我的`.phtml`文件。

现在我的`.phtml`文件上有一个表格，我将其发布在同一个控制器上，但功能不同，但不是调用该功能，而是将其发送到仪表板。我检查了表单操作，它很完美，但仍然没有调用该函数。

下面是我的代码`Controller`。

```
class Gwb_Magecrmsync_Adminhtml_CustomersController extends Mage_Adminhtml_Controller_Action
{
public function indexAction()
{
    $this->loadLayout()
         ->_setActiveMenu('menu1')
         ->_addBreadcrumb(Mage::helper('adminhtml')->__('Synchronize Data'), Mage::helper('adminhtml')->__('Synchronize Data'))
         ->_title($this->__('Synchronize Data'));

    $block = $this->getLayout()->createBlock(
        'Mage_Core_Block_Template',
        'my_block_name_here',
        array('template' => 'magecrmsync/customers.phtml')
    );
    $this->getLayout()->getBlock('content')->append($block);

    $this->renderLayout();

}

public function authenticationAction()
{
    if($this->getRequest()->getPost())
    {
        try
        {
            $username = $this->getRequest()->getPost('username');
            $password = $this->getRequest()->getPost('password');

        // validate user here
        }
        catch(Exception $e)
        {
            Mage::getSingleton('adminhtml/session')->addError($e->getMessage());
            return;
        }
    }
    else
    {
        echo "NO";
    }
    //$this->_redirect('*/*/');
} 
```

}

以下是我的`customers.phtml`文件代码：

```
<form action="<?php echo Mage::getUrl('*/*/authentication'); ?>" method="post">
  <fieldset>
<ul>
 <li>
   <label for="username">Username</label>
   <input type="text" id="username" name="username" />
 </li>
 <li>
    <label for="password">Password</label>
    <input type="password" id="password" name="password" />
</li>
 <li>
    <input type="submit" name="authenticate" id="authenticate" value="Authenticate" />
</li>
  </ul>
 </fieldset>
</form> 
```

请告诉我我在这里做错了什么。

任何帮助将不胜感激，并将对我有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:27:23.390

为了安全起见，您需要在表单中添加一个密钥，否则它将不起作用。将此添加到您的表单中，它应该可以工作:)

```
<input type="hidden" name="form_key" value="<?php echo Mage::getSingleton('core/session')->getFormKey(); ?>" /> 
```

# php - 这段代码更新贝宝按钮有什么问题？我收到“按钮类型无效错误”

> ID：15308382
> 
> 赞同：6
> 
> 时间：2013-03-09T07:29:25.370
> 
> 标签：php, paypal, paypal-nvp

我正在尝试动态更新 PayPal 托管按钮，但出现错误

```
The button type specified is invalid. 
```

我使用了 PPHttpPost 函数（可能没问题），取自这里：[https](https://www.x.com/paypal-apis-dodirectpayment-php-5.3/nvp) ://www.x.com/paypal-apis-dodirectpayment-php-5.3/nvp ，我刚刚删除了`nvp`除 API 签名、密码等之外的所有变量.

这是我使用 ButtonManager 的代码：

```
// Set request-specific fields.

 $nvpStr =  "&HOSTEDBUTTONID=buynow&BUTTONCODE=HOSTED&AMT=330.66&BUTTONTYPE=BUYNOW";

// Execute the API operation; see the PPHttpPost function above.
$httpParsedResponseAr = PPHttpPost('BMUpdateButton', $nvpStr);

var_dump($httpParsedResponseAr);

?> 
```

我究竟做错了什么？

## 编辑

当我从请求字符串中删除 HOSTEDBUTTONID 并输出完整的 NVP 字符串时，我得到了这个（用下划线替换了一些字符以保护隐私）：

```
METHOD=BMUpdateButton&VERSION=98.0&PWD=1362320204&USER=___._1362320167_biz_api1.gmail.com&SIGNATURE=________________&BUTTONCODE=HOSTED&AMT=330.66 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-03T08:46:15.827

遇到同样的问题后，我已经解决了这个问题。

随着：

```
"BUTTONTYPE" => "BUYNOW" 
```

你需要：

```
"BUTTONSUBTYPE" => "PRODUCTS" 
```

我知道它在 API 文档中说是可选的，但它确实是必需的。

子类型将是产品或服务。

# jquery - 永远不要为 jquery 中的元素上课

> ID：15308387
> 
> 赞同：2
> 
> 时间：2013-03-09T07:30:07.270
> 
> 标签：jquery, css, jquery-ui

我正在编写一个 jquery 代码，如果单击元素，该元素会给出一个类。现在我希望那个特定的元素永远不要使用特定的类。

概括：

```
$('element').*never take a specific class* 
```

HTML 代码：

```
<article class="wrapper ui-widget-content">
<div class="ui-widget-header">SSSSSS </div>
<ul id="selectable">
    <li class="ui-state-default"><span>HHHH</span> </li>
    <li class="ui-state-default"><span>CCCC</span></li>
    <li class="ui-state-default"><span>JJJJ SCRIPT</span></li>
    <li class="ui-state-default"><span>AAAA</span></li>
    <li class="ui-state-default"><span>XXX</span></li>
    <li class="ui-state-default"><span>MMMMM</span></li>
</ul>
</article> 
```

根据jquery代码，当我点击每个时`<li>`，这已经采用“ui-selected”类，但有时`<span>`标签也采用“ui-selected”类。我不想`<span>`上这门课：“ui-selected”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-15T16:53:30.883

使用`not`选择器，您可以做到这一点

[请检查这个](http://api.jquery.com/not-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:33:37.593

我会写一个 if 语句并将它包裹在你的 addClass 周围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:37:49.060

您可以将`not`选择器与 jQuery 一起使用

```
jQuery( ":not(selector)" ) 
```

[关联](http://api.jquery.com/not-selector/)

我希望这可以帮助:)

# ruby-on-rails - Rails 新手——Webrat 方法在集成测试中不起作用

> ID：15308390
> 
> 赞同：0
> 
> 时间：2013-03-09T07:31:21.687
> 
> 标签：ruby-on-rails, testing, rack, testunit, webrat

我有一个 Gemfile：

```
        来源“https://rubygems.org”

    宝石'导轨'，'3.2.11'
    宝石'omniauth'
    宝石'omniauth-facebook'

    宝石“薄”
    # 捆绑边缘 Rails：
    # gem 'rails', :git => 'git://github.com/rails/rails.git'

    宝石'pg'

    宝石“设计”
    宝石'rmagick'

    # 因为 rails_admin_jcrop 通过检查你使用的插件来自动加载模块，所以它是
    # 建议在 rails_admin_jcrop 之前明确要求它
    # 例如，如果你使用carrierwave
    gem 'carrierwave', :require => 'carrierwave'

    # 宝石仅用于资产，不是必需的
    # 默认在生产环境中。
    组：资产做
      gem 'sass-rails', '~> 3.2.3'
      宝石'咖啡轨'，'〜> 3.2.1'

      宝石“指南针导轨”
      宝石'zurb-基础'

      # 有关更多支持的运行时，请参阅 https://github.com/sstephenson/execjs#readme
      # gem 'therubyracer', :platforms => :ruby

      gem 'uglifier', '>= 1.0.3'
    结尾

    组：测试做
      gem 'webrat', '>=0.7.2.pre', :git => 'http://github.com/kalv/webrat.git'
      宝石“database_cleaner”
    结尾

    宝石'jquery-rails'

    # 使用 ActiveModel has_secure_password
    # gem 'bcrypt-ruby', '~> 3.0.0'

    # 为 JSON 使用 Jbuilder 模板
    # 宝石'jbuilder'

    # 使用独角兽作为应用服务器
    # gem '独角兽'

    # 使用 Capistrano 部署
    # gem 'capistrano'

    # 使用调试器
    # gem '调试器'
    宝石'therubyracer'

```

和 test_helper.rb：

```

        ENV["RAILS_ENV"] = "测试"
    需要 File.expand_path('../../config/environment', __FILE__)
    需要'rails/test_help'
    # 需要“webrat”

    Webrat.configure 做 |config|
      config.mode = :rails
    结尾

    类 ActiveSupport::TestCase
      # 按字母顺序为所有测试设置 test/fixtures/*.(yml|csv) 中的所有夹具。
      #
      # 注意：您目前仍然需要在集成测试中明确声明固定装置
      # -- 他们还没有继承这个设置
      固定装置：所有
    # 包括 Webrat
      包括 Webrat::Methods
      包括 Webrat::Matchers
      # 在此处添加更多供所有测试使用的辅助方法...
    结尾

    类 ActionController::TestCase
      包括设计::TestHelpers
    结尾

```

我的测试是：

```

        需要'test_helper'

    类 UserSignupTest user.first_name
        fill_in "user_last_name", :with => user.last_name
        fill_in "user_username", :with => user.username
        fill_in "user_email", :with => user.email
        fill_in "user_password", :with => user.password
        填写“user_password_confirmation”，：with => user.password_confirmation
        选择（“user_sex_male”）
        点击（“提交”）
      结尾

    结尾

```

但是当我尝试使用“点击”方法时出现以下错误：

```

         1) 错误：
    test_sign_up_flow（用户注册测试）：
    NoMethodError：未定义的方法“点击”#

```

你知道我做错了什么吗？我只是捆绑安装并认为它应该可以工作。“单击”方法之前的方法似乎以某种方式起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:00:06.323

仅仅因为评论变得健谈，我将其发布为答案。

[Webrat 资源和参考资料](https://github.com/brynary/webrat#webrat-)。

在您的情况下，由于“提交”是一个按钮，您需要使用

```
click_button("commit") 
```

代替

```
click("commit") 
```

如果是链接，您可以使用

```
click_link("commit") 
```

# android - 无法从 Android 设备访问 localhost Web 服务

> ID：15308391
> 
> 赞同：1
> 
> 时间：2013-03-09T07:31:44.707
> 
> 标签：android, web-services, apache, localhost

为了我自己的测试目的，我用 CakePHP 构建了一个 Web 服务。

现在我使用我真正的 Android 设备连接我的网络服务 (@localhost)。在第一次尝试时，我设法加载了我的测试页面。然后，我关闭了 Apache 服务器并对其进行测试以确保它不可用。测试完成后，我再次重新启动了 Apache。但是，从那时起，我的 Android 设备无法加载我的页面（网页不可用）。我的 Web 服务文件夹中有摘要式身份验证，第一次尝试时，它已正确执行...

到目前为止我所做的是：
1\. 使用我真正的 Android 设备（不是模拟器）连接我的本地主机（[http://192.168.xxx.xxx](http://192.168.xxx.xxx)）。
2\. 弹出摘要认证。
3\. 输入用户名和密码。成功连接。
4\. 关闭 Apache 服务器。
5.尝试再次连接我的本地主机（当然，“网页不可用”）。
6\. 重新启动 Apache 服务器。
7.尝试再次连接我的本地主机（重新加载永远不会再次工作......）

起初我认为这可能是缓存问题或其他什么。所以我已经清除了我的 Android 网络浏览器的所有缓存和任何表单数据，并再次尝试重新加载。但它再也不会重新加载。然后，我尝试从另一台 PC 连接并成功连接。仅从 Android 设备无法重新加载我的页面。

我能做些什么来解决这个问题吗？我需要使用我真正的 Android 设备进行调试，因为模拟器对于这项工作来说太慢了。我四处搜索，发现了几个类似的问题，但没有一个没有帮助，因为就我而言，我曾经成功连接到该服务。只是一次未能重新加载页面并且再也没有加载它......

提前致谢。

*** 编辑 *** 我刚刚使用 Android 模拟器尝试了相同的序列并成功重新加载...我什至为我的真实设备尝试了另一个浏览器（海豚浏览器）但仍然无法加载我的页面...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T20:23:15.227

可能 Web 服务器正在侦听环回接口而不是网络接口。这意味着命中`127.0.0.1`并且`localhost`会起作用，但`192.168.xxx.xxx`不会（无论是来自本地主机、局域网还是广域网）。

要确定服务器正在侦听哪个接口，请[在此处](http://www.commandlinefu.com/commands/view/702/lists-all-listening-ports-together-with-the-pid-of-the-associated-process#comment)查找用于告诉您有关侦听端口的命令（我使用了`lsof -Pan -i tcp -i udp`）。然后在列表中查找您的服务器进程。对于该`lsof`命令，如果对于端口 8888，您看到类似的内容，`TCP *:8888 (LISTEN)`那么您的服务器正在侦听所有接口。但是，如果您看到类似的东西，`TCP [::127.0.0.1]:8888 (LISTEN)`那么您已经确定了您的问题！

解决问题的下一步是设置服务器的运行配置以侦听所有接口。我对CakePHP一无所知，但是如果您可以指定IP地址，那么您可能想尝试`0.0.0.0`. 通常，您可以在允许您指定侦听端口的位置附近执行此操作。因此，如果您有如下配置：

`--port 8888`

然后你可以尝试：

`--port 8888 --address 0.0.0.0`

# codeigniter - 在钩子的codeigniter中定义一个常量变量

> ID：15308392
> 
> 赞同：0
> 
> 时间：2013-03-09T07:31:53.893
> 
> 标签：codeigniter, hook, constants

我有一个钩子，如果会话为空，它基本上会将用户抛出到登录页面。

```
$hook['post_controller_constructor'] = array(
    'class' => 'Status',
    'function' => 'logInCheck',
    'filename' => 'hooks.php',
    'filepath' => 'hooks',
    'params' => array()
); 
```

现在在`logInCheck`我想定义一些常量变量的钩子函数中。当我用谷歌搜索时，我发现常量只能在 constants.php 或 config.php 中定义。现在我的查询是在挂钩文件中定义它。

当我尝试这个`define('HEADERFILE', 'deafult_header');`

我收到此错误

> 消息：使用未定义的常量 HEADERFILE - 假定为 'HEADERFILE'

那么如何在挂钩文件中定义一个常量呢？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:46:11.640

谷歌是对的。定义常量的正确方法是定义单独的文件 constants.php 并将其放在 /application/config 中，然后通过以下方式将该文件加载到控制器中

$this->config->load('constants.php');

Soo...为什么这个解决方案不适合你？问题是什么？

# ios - 设置根视图时，“应用程序窗口应在应用程序启动结束时具有根视图控制器”消息

> ID：15308395
> 
> 赞同：4
> 
> 时间：2013-03-09T07:32:24.607
> 
> 标签：ios, appdelegate, launching-application

我的 App Delegate 文件中有以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    MBFeedViewController *feedViewController = [[MBFeedViewController alloc] init];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window setRootViewController:feedViewController];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

然后当我运行我的应用程序时，控制台会输出消息：

> 应用程序窗口应该在应用程序启动结束时有一个根视图控制器

想不通这个 `FeedViewController`不是`nil`当我设置窗口的`RootViewController`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T07:42:58.127

> 想不通这个 当我设置窗口的 rootviewcontroller 时 feedViewController 不为零。

确保您正确初始化视图控制器。最常见的是使用指定的初始化程序，`-initWithNibName:bundle:`. H2CO3 指出这`init`也没关系。无论哪种方式，请确保您还通过调用`[super initWithNibName:... bundle:...]`或只是初始化超类`[super init]`。

接下来，确保它`feedViewController.view`不为零。当您设置窗口的根视图控制器时，窗口将安装该控制器的视图作为它自己的内容。视图控制器通常在第一次访问它的属性时创建它的视图，所以除非创建视图失败，否则`view`你没有理由去那里。`nil`

最后，尝试实例化一个普通的 old`UIViewController`并将其设置*为*窗口的根视图控制器。你得到同样的警告吗？如果是，也许你偶然发现了一个错误。如果不是，请仔细查看`MBFeedViewController`，尤其是初始化程序`-loadView`，`-viewDidLoad`以及在视图控制器生命周期早期调用的其他方法。

# php - 如何使用 php 覆盖 Apache keep-alive 标头？

> ID：15308404
> 
> 赞同：5
> 
> 时间：2013-03-09T07:33:30.837
> 
> 标签：php, apache, http, web

在我的 httpd.conf 中有：

```
KeepAliveTimeout 1 
```

我试图在**单个**php 脚本（而不是整个服务器）中覆盖 Apache KeepAliveTimeout 设置，所以我有一个 php 脚本：

```
header("Keep-Alive: timeout=60, max=100"); 
```

但这似乎没有任何区别。我仍然得到回应：

```
Keep-Alive:timeout=1, max=50 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:32:52.763

你不能那样做。它的存在是有正当理由的。

[Apache v2.2 核心功能](http://httpd.apache.org/docs/2.2/mod/core.html)

## KeepAliveTimeout 指令

> Apache 在关闭连接之前等待后续请求的秒数。收到请求后，将应用**Timeout**指令指定的超时值。
> 
> 将**KeepAliveTimeout**设置为较高的值可能会导致**负载过重的服务器**出现性能问题。超时时间越高，就会有越多的服务器进程被占用，等待与空闲客户端的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T21:41:22.317

尝试在`.htaccess`文件中结合`FilesMatch`指令设置它。看到[这个帖子](https://stackoverflow.com/questions/2200566/keep-alive-feature-in-htaccess)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-05T04:09:00.437

```
<?php
header('Connection: close');
// other php code here...
// ... 
```

[来自 RFC 2616，第 14.10 节：](https://www.rfc-editor.org/rfc/rfc2616#section-14.10)

> HTTP/1.1 为发送者定义了“关闭”连接选项，以
> 表明在
> 响应完成后连接将被关闭。例如，
> 
> ```
>  Connection: close 
> ```
> 
> 在请求或响应标头字段中表示在当前请求/响应完成后，连接不应被视为“持久”（第 8.1 节） 。
> 
> 不支持持久连接的 HTTP/1.1 应用程序必须在每条消息中包含“关闭”连接选项。

相关：[在响应消息中使用“连接：关闭”是什么意思？](https://serverfault.com/a/790199/128858)

# mysql - mysql：每个类别总和 3 条记录

> ID：15308409
> 
> 赞同：3
> 
> 时间：2013-03-09T07:33:56.577
> 
> 标签：mysql, sql, select, greatest-n-per-group

我有一个包含以下列的表格：

```
dayoftheweek (VARCHAR)
player (VARCHAR)
score (INT) 
```

对于每个玩家，有 3、4 或 5 个分数。我必须计算每周每一天每个玩家最好的 3 个得分的平均值。

我在想

```
SELECT dayoftheweek, player, (SUM(score) / 3) AS average_score
FROM (SELECT dayoftheweek, player, score
      FROM scoretable
      GROUP BY dayoftheweek, player
      ORDER BY score
      LIMIT 0, 3) AS query 
```

但是（显然）这只给了我前三条记录。有人能把我引向正确的方向吗？

干杯，马塞尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:46:26.490

你应该能够写：

```
SELECT dayoftheweek,
       player,
       ( SELECT AVG(score)
           FROM ( SELECT inner.score
                    FROM scoretable AS inner
                   WHERE inner.dayoftheweek = outer.dayoftheweek
                    AND inner.player = outer.player
                   ORDER
                      BY inner.score DESC
                   LIMIT 3
                )
       ) AS best_score_avg
  FROM scoretable AS outer
; 
```

（免责声明：未经测试。）

请注意，我曾经`ORDER BY ... DESC`获得三个*最高*分数，但如果这些是高尔夫分数或最好分数是*最低*分数的东西，那么您将要更改`DESC`为`ASC`（或将其删除）。

# c# - 上传文件时无法异步分配 ViewState

> ID：15308410
> 
> 赞同：0
> 
> 时间：2013-03-09T07:33:58.920
> 
> 标签：c#, asp.net, file-upload, asynchronous, viewstate

我正在尝试使用 Asp.Net`AjaxFileUpload`控件异步为隐藏字段分配值，但是当我访问它时，我得到空值；

```
<Ajax:AjaxFileUpload ID="FileUploadGaurdianPic" runat="server"
    ThrobberID="myThrobber"  MaximumNumberOfFiles="1"
    OnUploadComplete="FileUploadGaurdianPic_UploadComplete" OnClientUploadComplete="uploadComplete" /> 
```

编码;

```
public string GuardianPic
{
    get 
    { 
        if (ViewState["GuardianPic"] == null)
            return "/Resources/Images/generic.jpg"; 
        else
            return ViewState["GuardianPic"].ToString(); 
    }
    set 
    {
        ViewState["GuardianPic"] = value; 
    }
}

protected void FileUploadGaurdianPic_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
    string path = Server.MapPath("~/Resources/Images/temp/");
    string name = String.Empty;
    string storedPath = String.Empty;
    if (Directory.Exists(path))
    {
        name = Path.GetFileName(e.FileName);
        storedPath = path + name;
        FileUploadGaurdianPic.SaveAs(storedPath);
        GuardianPic = "/Resources/Images/temp/"+name; // assigning the value here
    }
} 
```

但是当我尝试访问它时：

```
string ur = GuardianPic; 
```

我得到了属性的默认值，而不是我在上传完成事件中分配的值；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T09:14:57.367

部分回发（Ajax 控制工具包）通常会在服务器上呈现整个页面，但仅将更改传输到客户端，其中 Javascript 魔术会导致页面的部分更新，包括 ViewState（嵌入在隐藏的 HTML 字段中）。

AsyncFileUpload 控件不能以这种方式工作，这是由于发布表单和上传文件的差异。

[实际上，您描述的行为在 Codeplex 上](http://ajaxcontroltoolkit.codeplex.com/workitem/26737)的 ACT 问题的响应中得到了解释。

简短的回答：你不能这样做。

# udp - 使用 Visual Studio 2008 在 C 中使用 UDP 套接字在两台不同机器上运行的客户端和服务器之间的通信

> ID：15308411
> 
> 赞同：1
> 
> 时间：2013-03-09T07:34:02.767
> 
> 标签：udp, client

我开发了一个应用程序，其中客户端和服务器可以使用 UDP 套接字相互通信。我在客户端使用了回环地址，在服务器端使用了 INADDR_ANY。该程序在同一台机器上运行良好。但是当我尝试从另一台机器上运行客户端时，通信失败了。这是代码片段： **服务器：**

```
 #define PORT 8888   //The port on which to listen for incoming data
   if (WSAStartup(MAKEWORD(2,2),&wsa) != 0)
      {
         exit(EXIT_FAILURE);
      }

   ///Create a socket///
   if((socketIdentifier = socket(AF_INET , SOCK_DGRAM , 0 )) == INVALID_SOCKET)
      {                 
        //"Socket not created"
      }

   ///Socket Created///

   ///Prepare the sockaddr_in structure///
   serverSocket.sin_family = AF_INET;
   serverSocket.sin_addr.s_addr = INADDR_ANY;
   serverSocket.sin_port = htons( PORT );

   ///Bind///
   if( bind(socketIdentifier ,(struct sockaddr *)&serverSocket , sizeof(serverSocket)) == SOCKET_ERROR)
      {             
        //"Bind Failed"
      }

   ///Bind Done///
   if((recv_len = recvfrom(socketIdentifier, receiveBuffer, sizeof(receiveBuffer), 0, (struct sockaddr *) &clientSocket, &clientSocketLength)) == SOCKET_ERROR)
      {
        "Could not Receive Data"
      }
 hDeviceContext = BeginPaint(AH_Glb_windowHandle, &ps );
                TextOut(GetDC(AH_Glb_windowHandle),10,10+i,receiveBuffer,recv_len);
                EndPaint( AH_Glb_windowHandle, &ps ); 
```

**客户：**

```
 #define PORT 8888   //The port on which to listen for incoming data
    #define SERVER "58.65.172.11"  //ip address of udp server
      ///Initialise winsock///
       if (WSAStartup(MAKEWORD(2,2),&wsa) != 0)
          {
             //Socket Initialization Failed///
             exit(EXIT_FAILURE);
          }

       ///create socket///
       if ((socketIdentifier=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == SOCKET_ERROR)
          {
             ///Socket Creation Failed///
             exit(EXIT_FAILURE);
          }

       ///setup address structure///
       memset((char *) &connectedSocket, 0, sizeof(connectedSocket));
       connectedSocket.sin_family = AF_INET;
       connectedSocket.sin_port = htons(PORT);
       connectedSocket.sin_addr.S_un.S_addr = inet_addr(SERVER);
       if (sendto(socketIdentifier,sendBuffer,strlen(sendBuffer) , 0 , (struct sockaddr *) &connectedSocket, sizeof(connectedSocket)) == SOCKET_ERROR)
          {
             MessageBox(NULL,
                        "Sending Failed",
                        "Failure",
                        MB_ICONINFORMATION);            
             exit(EXIT_FAILURE);
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:36:42.620

> 任何人都可以向我解释这是怎么发生的吗？

不看代码，我可以猜到你的[路由器](http://en.wikipedia.org/wiki/Router_%28computing%29)阻塞了端口。

第一的 ..

> 我正在使用我的 IP 网站来查找运行服务器的机器的 IP。如果客户使用本网站生成的 IP 地址进行通信，则通信无效。

因为这给了你网络的*外部*IP 地址。由您的 ISP 分配给您的那个。您的路由器位于您的计算机（或网络）和互联网之间，默认情况下会阻止所有外部入站通信。

然后 ...

> 但是当我使用 ipconfig 命令查找服务器机器的 IP 时，我找到的 IP 地址与我的 IP 网站生成的 IP 地址不同，现在当我尝试通过 ipconfig 生成的服务器 IP 地址与客户端通信时，通信正常.

原因 ipconfig 为您提供了LAN 中路由器分配的*本地IP。*

路由器为了保护其背后的本地网络，会过滤所有入站通信，除非您明确告诉他们不要这样做。

当您第一次尝试连接到服务器时，您使用了路由器阻止的*外部 IP地址。*第二次使用从那里获得的*本地 IP*地址`ipconfig`很好，因为路由器不会阻止这些。

这是一个简单的图表......

```
Client (local IP)--------
                        |
                     Router --- Internet (external IP)
                        |
Server (local IP)-------- 
```

如果你想从互联网上的任何地方访问服务器，那么你需要在你的路由器中[转发端口](http://en.wikipedia.org/wiki/Port_forwarding)，这样服务器将对外界可见。但在向世界开放之前，请务必保护服务器机器和您的应用程序。

如果您只是在测试或者您将仅在您的网络内使用此服务器，那么只需使用本地 IP。另外，尝试为服务器分配一个静态 IP 地址，这样您就可以在代码中使用它而无需重新编译代码。

# node.js - 如果不是 localhost，则无法让浏览器连接到 nodejs WS 服务器

> ID：15308414
> 
> 赞同：1
> 
> 时间：2013-03-09T07:34:29.583
> 
> 标签：node.js, websocket

我一直在努力找出我不明白的地方：我在本地网络的计算机上运行了一个 NodeJS websocket 服务器。从那台计算机的浏览器中，我可以与 websocket 服务器通信。但是，在同一网络上的任何其他计算机上，我都会收到错误代码 1006 的强制关闭事件。

附件是服务器和客户端文件。客户端文件也从同一个地方提供。任何有助于扩大我的理解的帮助将不胜感激。

谢谢！

* * *

## ws_server.js

```
var fs = require('fs');
var path = require('path');
var httpServer = require('http').createServer(
    function(request, response) {
        if(request.url != ''){//request.url is the file being requested by the client
            var filePath = '.' + request.url;
            if (filePath == './'){filePath = './ws_client.html';} // Serve index.html if ./ was requested
            var filename = path.basename(filePath);
            var extname = path.extname(filePath);
            var contentType = 'text/html';
            fs.readFile(filePath, function(error, content) {
                response.writeHead(200, { 'Content-Type': contentType });
                response.end(content, 'utf-8');
            });
        }
    }
).listen(8080);

var WebSocketServer = require('ws').Server;
var wss = new WebSocketServer({server:httpServer});
wss.on('connection', function(ws) {
    ws.on('message', function(message) {
        console.log('received: %s', message);
        ws.send("You said: "+ message);
    });
}); 
```

* * *

## ws_client.html

```
<html>
<head>
    <title>WS</title>
    <script>
        var connection = new WebSocket('ws://127.0.0.1:8080');
        connection.onopen = function () {connection.send("The time is " + new Date().getTime());};
        connection.onmessage = function (e) {document.getElementById("capture").innerHTML = e.data;};
        connection.onclose = function(event) {console.log(event);};
    </script>
</head>
<body>

<textarea id="capture"></textarea>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T08:50:26.223

也许这只是代码中的拼写错误，但是您在`ws://127.0.0.1:8080`从另一台计算机尝试时更改了地址吗？

`127.0.0.1`始终引用本地主机，这不是您想要的。

您应该改为使用本地地址（类似于`192.168.0.5`），或者更好：`new WebSocket('/');`，它将连接到与页面相同的主机和端口。

# java - 覆盖 toString() / 点运算符如何真正工作

> ID：15308415
> 
> 赞同：0
> 
> 时间：2013-03-09T07:34:36.400
> 
> 标签：java, string, tostring

我对 Java 很陌生，所以如果我没有正确使用某些术语，请告诉我。我有一个名为的对象类`Player`，它有一个名为的方法，该方法`getInventory()`返回`ArrayList<Item>`名为的对象`inventory`。

我希望该方法以`ArrayList`保存物品的形式返回玩家的库存，到目前为止，它工作正常。

该类`Item`是我的类`Armor`和`Sword`继承的抽象基类/父类。所以，我希望格式（如果您甚至想这样称呼它，我正在使用纯文本的“GUI”方法）看起来像这样：

*   带状锁甲 - 护甲
*   锁子甲 - 盔甲
*   长剑——剑

我使用以下代码来显示“Banded Mail”部分（在循环中通常使用计数）：

```
System.out.print(player.getInventory().get(count).getName()); 
```

我尝试使用以下代码来破译该对象是由什么类型的类组成的（即该类的名称）：

```
System.out.println(player.getInventory().get(count).getClass().toString()); 
```

我只想根据制造对象的类别打印“盔甲”或“剑”或“盾”。我认为附加**toString()**可以解决问题，但它给了我这个输出：

> 类武器装备demo.Armor

所以我想知道两件事：

*   我将如何覆盖`toString()`以仅显示类的名称？`toString()`具体在 哪里`player.getInventory().get(count).getClass().toString()`？和

*   最重要的是，一个对象怎么可能有这么多其他方法可以用点运算符附加到它上面呢？我理解一个类喜欢`Player`有一个名为的方法`getName()`，但是呢`player.getInventory().get(count)`？

    你把一个方法放在一个方法里面吗？这甚至可能吗？从我一直看到的方式来看，点运算符是一种描绘对象外壳内部更远的方式（方法在类内部），但如果这是真的，那么这意味着你可以在里面有方法的方法。我很困惑。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:50:26.397

`player.getInventory().get(count)`是类型的表达式`Item`。所以如果你打电话

```
System.out.println(player.getInventory().get(count)); 
```

相当于

```
Item i = player.getInventory().get(count);
System.out.println(i); 
```

这相当于

```
Item i = player.getInventory().get(count);
System.out.println(i.toString()); 
```

因此，如果您希望在 Item 属于 Armor 类的情况下打印 Armor，您应该像这样`toString()`在`Armor`类中覆盖：

```
@Override
public String toString() {
    return "Armor";
} 
```

剑也一样：

```
@Override
public String toString() {
    return "Sword";
} 
```

如果你使用

```
System.out.println(player.getInventory().get(count).getClass().toString()); 
```

相当于

```
Class<Item> clazz = player.getInventory().get(count).getClass();
System.out.println(clazz.toString()); 
```

并且您无法自定义输出，因为该类的 toSTring() 方法`java.lang.Class`不在您的控制之下。

请注意，这`toString()`通常用于调试目的。并且只返回一个对象的类是很奇怪的，因为它无法区分同一类的两个不同实例。如果你想显示项目的类型，我会使用专用的 getType() 方法而不是`toString()`. 如果你想显示盔甲的描述，那么`toString()`，或者一个名为 的方法`getDescription()`，都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:43:05.207

1）而不是使用`toString()`你可以使用`getName()`，即`player.getInventory().get(count).getClass().getName()`

2) 在`player.getInventory().get(count).getClass().getName()`中，`player.getInventory()`返回具有`get()`方法的类的对象，并`get()`在该对象上调用该方法。另一个对象被调用，以此类推`get()`。`getClass()`没有涉及方法的“嵌套”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:47:58.813

> 我将如何覆盖 toString() 以仅显示类的名称？player.getInventory().get(count).getClass().toString() 实例中的 toString() 到底在哪里？和

getInventory() 返回一个 ArrayList

get(count) 从 ArrayList 中返回一个 Item。

getClass 返回一个 Class 对象，表示项目的类。

这是一种较短的写作方式：

```
ArrayList<Item> inventory = player.getInventory();
Item item = inventory.get(count);
System.out.println(item.getName()); 
```

> 最重要的是，一个对象怎么可能有这么多其他方法可以用点运算符附加到它上面呢？我理解像 Player 这样的类有一个名为 getName() 的方法，但是 player.getInventory().get(count) 呢？

它没有。每次调用都会返回一些对象——随后的调用是在该对象上进行的。往上看。

> 你把一个方法放在一个方法里面吗？这甚至可能吗？从

不。

> 就像我一直看到的那样，点运算符是一种描绘对象外壳内部的方式（方法在类内部），但如果这是真的，那么这意味着你可以在内部拥有方法方法。我很困惑。

把点想成是“拿左边的东西，做右边的东西”。对于类似的东西：

```
a().b().c() 
```

它说获取 a() 的结果，然后在该对象上找到 b() 方法并调用它。随后，将该调用的返回值传递给 b() 并在其上调用 c()。

现在，回答您的问题：在 Item.java 中添加一个方法 getItemTypeName() ，该方法返回一个字符串。将其定义为为 Armor 类等返回“Armor”。不要使用类名。为什么？你最终会想要以一种不一定有意义的方式进行子类化。魔剑，也许吧。或 CursedSword，您可能仍希望将其显示为“Sword”。

# javascript - JavaScript新手，你能帮我解决问题吗？

> ID：15308418
> 
> 赞同：2
> 
> 时间：2013-03-09T07:34:52.607
> 
> 标签：javascript, javascript-events

我试图让这段代码工作，但我一生都无法理解为什么它不会。我已经尝试过 JSlint 和一切。很抱歉这个新手问题，我用 JavaScript 花了不到 2 个小时，所以这是一个愚蠢的问题。谢谢。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
     <link rel="stylesheet" type="text/css" href="Style/demo.css" />
   <script type="text/javascript">
       window.onload = init;
function init() {
           document.getElementById("s1").onclick = print(1);
           document.getElementById("s2").onclick = print(2);
           document.getElementById("s3").onclick = print(3);
           document.getElementById("s4").onclick = print(0);
}

       function print(printno) {
       var demo = document.getElementById("demo");

       switch(printno)
       {
       case 1:
       demo.innerHTML=  "It is a period of civil war. Rebel spaceships, striking from a hidden base, have won their first victory against the evil Galactic Empire. ";
        break;
        case 2:
        demo.innerHTML = "During the battle, Rebel spies managed to steal secret plans to the Empire's ultimate weapon, the Death Star, an armored space station with enough power to destroy an entire planet.";
        break;
        case 3:
        demo.innerHTML = "Pursued by the Empire's sinister agents, Princess Leia races home aboard her starship, custodian of the stolen plans that can save her people and restore freedom to the galaxy....";
        break;
        case 0:
        demo.innerHTML = "A long time ago, in a galaxy far, far away..";
        break;
        }
}

   </script>
</head>
<body>
    <div id="demo">
        A long time ago, in a galaxy far, far away..
    </div>
    <ul>
      <li><span id ="s1">Part 1</span></li>
      <li><span id="s2">Part 2</span></li>
      <li><span id="s3">Part 3</span></li>
      <li><span id="s4">Reset</span></li>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T07:40:50.483

当你做这样的事情时：

```
document.getElementById("s1").onclick = print(1);
document.getElementById("s2").onclick = print(2);
document.getElementById("s3").onclick = print(3);
document.getElementById("s4").onclick = print(0); 
```

您实际上是在`print()`使用给定参数调用函数，然后将该函数的结果（实际上是`undefined`）绑定到 onclick 事件。我认为你想做的是这样的：

```
document.getElementById("s1").onclick = function(){ print(1) };
document.getElementById("s2").onclick = function(){ print(2) };
document.getElementById("s3").onclick = function(){ print(3) };
document.getElementById("s4").onclick = function(){ print(0) }; 
```

这将附加一个调用您的函数的`print()`函数。

# ruby - Ruby CSV - 尝试将输出用双引号括起来，得到“”“Hello World”“”而不是“Hello World”

> ID：15308420
> 
> 赞同：3
> 
> 时间：2013-03-09T07:35:12.530
> 
> 标签：ruby, csv

```
require 'csv'
s = "\"Hello World\""

CSV.open('output.txt', 'w') do |csv|
    csv << [s]
end 
```

在我的文件中，我得到：

```
"""Hello World""" 
```

额外的引号是什么意思，正确的方法是什么？我不希望所有字段都用引号括起来，只是一些。使用红宝石 1.9.3p194

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T08:13:00.893

这是对的。[引用字符在 CSV 文件中通过加倍](http://en.wikipedia.org/wiki/Comma-separated_values#Basic_rules_and_examples). 并且所有包含逗号、换行符和/或引号字符的字段都需要用引号引起来。

所以第一个引号开始一个带引号的字段，第二个和第三个引号编码实际的引号字符。

![Excel 截图](../Images/70c096d4fb376aa28cc79541267cb11d.png)

变成

```
Hello,"Field, with comma","2"" by 4""",123 
```

# git - 无法推送到 Github，得到“权限被拒绝（公钥）”

> ID：15308424
> 
> 赞同：-1
> 
> 时间：2013-03-09T07:36:16.623
> 
> 标签：git, ssh, public-key, github-for-windows

```
Administrator@SANZVAIO /e/projects/pySan (master)
$ git remote add pySan git@github.com:sanfx/.git

Administrator@SANZVAIO /e/projects/pySan (master)
$ git push -u origin master
The authenticity of host 'github.com (207.97.227.239)' can't be established.
RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of know
n hosts.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

还有其他方式推送到github吗？我在 Windows 7 上使用 Git Bash。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:56:47.153

1.  你的回购网址是错误的
2.  您可能还有 SSH 问题。

[您应该首先通过web 界面](https://github.com/new)或[GitHub API](http://developer.github.com/v3/repos/#create)在 GitHub 上创建一个空存储库

假设您刚刚创建了`myrepo`，要使用的 URL 语法是：

```
git remote add pySan git@github.com:sanfx/myrepo.git 
```

如果您仍然有 SSH 错误，请检查您的公钥/私钥对，或使用 https 开始：

```
git remote set-url pySan https://github.com/sanfx/myrepo.git 
```

# c - sscanf 如何处理重叠指针？

> ID：15308427
> 
> 赞同：1
> 
> 时间：2013-03-09T07:36:42.380
> 
> 标签：c

我有一个我正在尝试逆向工程`ia32 assembly`的程序的代码。`c`在一种方法中，它似乎有一行`"sscanf(input_phrase, "%d %c %d", ebp-4, ebp-9, ebp-8);"`（假设 input_phrase 是一个`c`字符串并且`ebp`是一个指针）。鉴于一个 char 是 16 位，它存储 char 的空间应该与它存储第二个 int 的空间重叠（并且通过测试我发现是这种情况）。是否对这段代码应该如何工作有一个精确的定义，或者它是否不可预测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:05:37.857

实际问题的答案是“它没有”——我不完全确定规范是否提到它，但我 100% 确定它`scanf`没有“哦，这与它重叠，所以我会做不同的东西”-您只会得到未定义的行为。尝试这样的事情的结果是完全不可预测的[它很可能只是导致最后读取的内容覆盖了第一次读取时重叠的内容——但它也可能导致崩溃或第三次世界大战爆发！]

幸运的是，显示的代码没有调用该行为，因为`char`C 中的 a 被定义为大小为 1，因此不存在冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:40:42.887

C 标准以 char 为单位计算大小，因此根据定义，char 的大小为 1。除非您使用一些奇怪的硬件（信号处理器、pdp-10 或类似的硬件），否则这也将对应于正常的, 8 位字节。由于您使用的是 x86 架构，因此您似乎误认为变量是重叠的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:05:05.947

在 x86 上，`char`大小为 8 位（1 个字节）。因此，在堆栈上，变量被布置为

```
CJJJJIIII
         ^ebp 
```

其中`I`是第一个 int，`C`是字符，`J`是第二个 int。没有重叠。

# html - 顶部对齐div内的div，不起作用

> ID：15308429
> 
> 赞同：-2
> 
> 时间：2013-03-09T07:36:49.643
> 
> 标签：html, css

我正在尝试将一个 div 与另一个 div 对齐，但正如您在此处看到的：http: [//jsfiddle.net/GrcRz/](http://jsfiddle.net/GrcRz/)它无法正常工作。我想顶部对齐这个 div：

```
 <div class="top_aligned">
     test
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:02:43.820

您在问题中在这里编写的代码将您的 div 命名为“top_aligned”。所以你需要在你的 CSS 代码中设置它的样式。

.top_align {

}

# r - RJSONIO vs rjson - 更好的调优

> ID：15308435
> 
> 赞同：17
> 
> 时间：2013-03-09T07:38:05.097
> 
> 标签：r, rjsonio, rjson

**更新：**

**tl; dr**`RJSONIO`不再是两个选项中更快的一个。相反`rjson`，现在要快得多。

*请参阅评论以进一步确认结果*

* * *

我的印象`RJSONIO`应该是更快`rjson`。
但是，我得到了相反的结果。

**我的问题是：**

*   是否可以/应该执行任何调整来改善结果`RJSONIO`？（即，我是否忽略了什么？）

下面是使用真实数据的比较（`U`json 网页的内容在哪里），然后是模拟的 json

```
## REAL DATA
library(microbenchmark)
> microbenchmark(RJSONIO::fromJSON(U), rjson::fromJSON(U))

Unit: milliseconds
                  expr       min        lq    median        uq      max
1   rjson::fromJSON(U)  29.46913  30.16218  31.74999  34.11012 158.6932
2 RJSONIO::fromJSON(U) 175.11514 181.67742 186.52871 195.90646 414.6160

> microbenchmark(RJSONIO::fromJSON(U, simplify=FALSE), rjson::fromJSON(U))
Unit: milliseconds
                                    expr       min       lq    median        uq        max
1                     rjson::fromJSON(U)  27.92341  28.7430  29.60091  30.63291 1 143.9478
2 RJSONIO::fromJSON(U, simplify = FALSE) 173.30136 179.5815 183.94315 190.17245 2 328.8996 
```

* * *

### 模拟数据示例

*（类似的结果）*

```
# MOCK DATA
U <- toJSON(list(1:10, LETTERS, letters, rnorm(20)))

microbenchmark(RJSONIO::fromJSON(U), rjson::fromJSON(U))
# Unit: microseconds
#                   expr     min       lq   median       uq      max
# 1   rjson::fromJSON(U)  94.788 100.8650 105.6035 111.0740 3457.479
# 2 RJSONIO::fromJSON(U) 520.131 527.7775 533.2715 555.2415  942.136 
```

**`iris`带有数据集的示例 2**

```
Iris.JSON <- toJSON(iris)

microbenchmark(RJSONIO::fromJSON(Iris.JSON), rjson::fromJSON(Iris.JSON))
# Unit: microseconds
#                           expr      min       lq   median       uq       max
# 1   rjson::fromJSON(Iris.JSON)  229.669  235.571  238.511  241.423   260.164
# 2 RJSONIO::fromJSON(Iris.JSON) 1209.607 1224.793 1232.165 1238.953 12039.772 
```

* * *

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] data.table_1.8.8 stringr_0.6.1    RJSONIO_1.0-1    rjson_0.2.11

loaded via a namespace (and not attached):
[1] plyr_1.7.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-02T00:21:42.270

```
> library('BBmisc')
> suppressAll(lib(c('RJSONIO','rjson','jsonlite','microbenchmark')))
> U <- toJSON(list(1:10, LETTERS, letters, rnorm(20)))
> microbenchmark(
+     rjson::toJSON(U),
+     RJSONIO::toJSON(U),
+     jsonlite::toJSON(U, dataframe = "column"),
+     times = 10
+ )
Unit: microseconds
                                      expr     min      lq      mean   median      uq       max neval cld
                          rjson::toJSON(U)  65.174  68.767 2002.7007  88.2675 103.151 19179.224    10   a
                        RJSONIO::toJSON(U) 299.186 304.832  482.8038 329.7210 493.683  1351.727    10   a
 jsonlite::toJSON(U, dataframe = "column") 485.985 501.381  555.4192 548.5935 587.083   708.708    10   a 
```

测试 system.time()

```
> microbenchmark(
+     system.time(rjson::toJSON(U)),
+     system.time(RJSONIO::toJSON(U)),
+     system.time(jsonlite::toJSON(U, dataframe = "column")),
+     times = 10)
Unit: milliseconds
                                                   expr      min       lq     mean   median       uq      max neval cld
                          system.time(rjson::toJSON(U)) 112.0660 115.8677 119.8426 119.8372 121.6908 132.2111    10  ab
                        system.time(RJSONIO::toJSON(U)) 115.4223 118.0262 129.2758 120.5690 148.5175 151.6874    10   b
 system.time(jsonlite::toJSON(U, dataframe = "column")) 113.2674 114.9096 118.0905 117.8401 120.9626 123.6784    10  a 
```

下面是几个包的比较。希望这些链接对您有所帮助...

1）[新包：jsonlite。一个智能（er）JSON 编码器/解码器。](http://www.r-bloggers.com/new-package-jsonlite-a-smarter-json-encoderdecoder/)

2)[改进了 jsonlite 0.9.15 中的内存使用和 RJSONIO 兼容性](http://www.r-bloggers.com/improved-memory-usage-and-rjsonio-compatibility-in-jsonlite-0-9-15/)

3) [R 中 JSON 包的有偏差比较](https://rstudio-pubs-static.s3.amazonaws.com/31702_9c22e3d1a0c44968a4a1f9656f1800ab.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T06:49:17.770

[https://cran.r-project.org/web/packages/jsonlite/vignettes/json-aaquickstart.html](https://cran.r-project.org/web/packages/jsonlite/vignettes/json-aaquickstart.html)

请尝试 jsonlite，它是我对 json 数据尤其是嵌套数据的体验中最快的

也见

[https://rstudio-pubs-static.s3.amazonaws.com/31702_9c22e3d1a0c44968a4a1f9656f1800ab.html](https://rstudio-pubs-static.s3.amazonaws.com/31702_9c22e3d1a0c44968a4a1f9656f1800ab.html)

# php - Apache 重写规则 url 参数

> ID：15308439
> 
> 赞同：0
> 
> 时间：2013-03-09T07:38:47.200
> 
> 标签：php, mod-rewrite, url-rewriting

我正在尝试捕获在 url 中发送的所有参数并将其重定向传递给 php 文件。这是我的重写规则

```
RewriteCond %{REQUEST_METHOD} ^GET
RewriteRule ^/locations/(\w+\d*)+ /php/listone.php?name=$1 [L] 
```

虽然这在 url 中没有空格的情况下可以正常工作：

```
GET /locations/example HTTP/1.0 
```

listone.php 中的 $_GET['name'] 将包含示例，但是当我发送

```
GET /locations/ex1 ex2
GET /locations/ex%20ex2
GET /locations/ex1+ex2 
```

在 listone.php 我给出了以下内容：

```
 $name = $_GET['name'];
 echo $name;
 $name = str_replace("+", " ", $name); 
```

我只会得到ex1。我怎样才能捕捉到所有这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:49:57.567

将您的 RewriteRule 更改为：

```
 RewriteRule ^/locations/(.+) /php/listone.php?name=$1 [L] 
```

您不匹配任何字符，例如空格`%`和`+`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:52:28.183

如果需要，您可以尝试不同的方法，并从 中捕获请求`$_SERVER['REQUEST_URI']`，并有条件地捕获`$_GET`参数。

使用这个 mod_rewrite 片段来实现这一点：

```
Options +FollowSymLinks
IndexIgnore */*

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d

RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ /mydirectory/index.php [NC,L] 
```

只需发送一个简单的请求，例如：

> [http://hostname.com/mydirectory/test/123](http://hostname.com/mydirectory/test/123)

并回显`$_SERVER['REQUEST_URI']`变量：

```
die($_SERVER['REQUEST_URI']); // outputs: "/mydirectory/test/123" 
```

通过这种方式，您可以为您的请求创建一个简单的 PHP 路由器

# qt - Qt mingw32 构建错误 [debug/rasterwindow.o] 错误 1

> ID：15308440
> 
> 赞同：0
> 
> 时间：2013-03-09T07:39:00.703
> 
> 标签：qt, build-error

我安装了 Qt 5.0.1 mingw 4.7，当我构建/运行一个示例时，我遇到了这个问题： ![在此处输入图像描述](../Images/f04933a79172f8d63e5d7e0929818c40.png)

这在编译输出： ![在此处输入图像描述](../Images/a54b77fe4ca842f643027beed2dd325b.png)

我无法构建/运行任何东西。如何解决？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-26T14:01:45.407

这对我有用项目>构建>构建环境：

检查清除系统环境

点击以下链接获取更多答案 [stackoverflow.com/qt-error-2-at-compile-time](https://stackoverflow.com/questions/10434064/qt-error-2-at-compile-time)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-27T04:40:43.880

*   还有一些其他的问题。此错误主要发生在您一次又一次地尝试运行它而不关闭先前生成的向导（GUI 窗口）的情况下。
*   QT 无法打开目标文件，因为它已经在使用中。因此，请确保在再次运行/构建项目之前关闭生成的向导。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:17:14.467

您是否在系统环境变量中正确设置了 PATH？

我为 Qt 设置的路径变量：

`QTDIR: D:\Qt\Qt5.0.1\5.0.1\mingw47_32`

小路： `C:\Ruby200-x64\bin;C:\Python33\;C:\Perl64\site\bin;D:\Qt\Qt5.0.1\Tools\MinGW\bin;xxx;D:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin;`

** 注意：我之前已经阅读过该订购可能很重要。确保在 MinGW bin 路径之后有 Qt bin 路径。

请参阅这些讨论：类似问题：[案例 1](http://qt-project.org/forums/viewthread/25326/)

如果您能够在以前的版本中运行程序，但现在不能 - 试试这个：

1.  清洁项目
2.  关闭 QtCreator
3.  从应用目录中删除发布/调试文件夹
4.  删除 xxx.pro.user 文件（位于 app 目录中）
5.  手动删除 Makefile、Makefile.Debug、Makefile.Release（如果仍然存在）
6.  再次打开 Qt Creator 并打开您的项目。它现在应该要求您重新配置项目构建设置。

祝你好运！

# jsp - 如何在 SPRING MVC 中的 JSP 中删除或清除命令对象中的列表，

> ID：15308450
> 
> 赞同：0
> 
> 时间：2013-03-09T07:41:18.710
> 
> 标签：jsp, spring-mvc

我正在使用 Spring MVC。我的命令对象包含一个集合对象，如下所示：

```
public class DimensionStoneBean {

    int stoneNo;
    float length;
    float breadth;
    float height;
    float dimension;
    String isIssued;

    public int getStoneNo() {
        return stoneNo;
    }
    public void setStoneNo(int stoneNo) {
        this.stoneNo = stoneNo;
    }
    public float getLength() {
        return length;
    }
    public void setLength(float length) {
        this.length = length;
    }
    public float getBreadth() {
        return breadth;
    }
    public void setBreadth(float breadth) {
        this.breadth = breadth;
    }
    public float getHeight() {
        return height;
    }
    public void setHeight(float height) {
        this.height = height;
    }
    public float getDimension() {
        return dimension;
    }
    public void setDimension(float dimension) {
        this.dimension = dimension;
    }
    public String getIsIssued() {
        return isIssued;
    }
    public void setIsIssued(String isIssued) {
        this.isIssued = isIssued;
    }

}

public class UpdateStockBean {

    @SuppressWarnings("rawtypes")
    private List dimensionStones =
        LazyList.decorate(new LinkedList(),FactoryUtils.instantiateFactory(DimensionStoneBean.class));
    long openbalance;

    public UpdateStockBean() {
        super();
    }

    @SuppressWarnings("rawtypes")
    public List getDimensionStones() {
        return dimensionStones;
    }
    public void setDimensionStones(@SuppressWarnings("rawtypes") List dimensionStones) {
        this.dimensionStones = dimensionStones;
    }
    public long getOpenbalance() {
        return openbalance;
    }
    public void setOpenbalance(long openbalance) {
        this.openbalance = openbalance;
    }

} 
```

用于此的控制器类 extends `AbstractWizardFormController`。

我习惯于`formBackingObject()`填充命令对象，将其返回到表单中。

表格如下所示：

```
<form:form commandName="updateStock" method="post" name="stockEntry" action="updateStock.nic" id="updateStock">
    <br><br><br>

    <table border="1" width="700">
        <tr>     
            <td class="textClr1" align="left" width="50"><nobr>Total No Of Stones</nobr></td>
            <td colspan="6"><form:input tabindex="1" path="openbalance" id="openbalance" cssClass="controlStock"/></td>
        </tr>    

        <tr>
            <td></td>
            <td colspan="6"><form:errors cssClass="error" path="openbalance"/></td>
        </tr> 
    </table>

    <table>
        <tr>
            <td colspan="3">

            <table  border="1" width="400">
                <tbody id="dimensionList">                           
                    <c:forEach  var="DimensionStones" items="${updateStock.dimensionStones}" varStatus="i" begin="0">

                    <tr class="dimensionStone">    
                        <td><form:input path="dimensionStones[${i.index}].stoneNo" id="stoneNo${i.index}" cssClass="controlStock"/></td>
                        <td><form:input path="dimensionStones[${i.index}].length" id="length${i.index}" onchange="findDimension(this.id)" cssClass="controlStock"/></td>
                        <td><form:input path="dimensionStones[${i.index}].breadth" id="breadth${i.index}" onchange="findDimension(this.id)" cssClass="controlStock"/></td>
                        <td><form:input path="dimensionStones[${i.index}].height" id="height${i.index}" onchange="findDimension(this.id)" cssClass="controlStock"/></td>
                        <td><form:input path="dimensionStones[${i.index}].dimension" id="dimension${i.index}" cssClass="controlStock"/></td>                 
                        <td><form:checkbox path="dimensionStones[${i.index}].isIssued" id="isIssued${i.index}" value="" cssClass="check"/></td>
                        <td><a href="#" class="removeDimensionStone"><img src="images/cross1.jpg" width="20" height="20" title="Remove Dimension Stone"/></a></td>
                    </tr>

                    </c:forEach>   

                <tr></tr>             

                <c:if test="${empty updateStock.dimensionStones}">

                    <tr class="dimensionStone defaultRow">    
                        <td><input type="text" name="dimensionStones[].stoneNo" value="" id="stoneNo" Class="controlStock"/></td>
                        <td><input type="text" name="dimensionStones[].length" value="" id="length" onchange="findDimension(this.id)" Class="controlStock"/></td>
                        <td><input type="text" name="dimensionStones[].breadth" value="" id="breadth" onchange="findDimension(this.id)" Class="controlStock"/></td>
                        <td><input type="text" name="dimensionStones[].height" value="" id="height" onchange="findDimension(this.id)" Class="controlStock"/></td>
                        <td><input type="text" name="dimensionStones[].dimension" value="" id="dimension" disabled="disabled" Class="controlStock"/></td>                            
                        <td><input type="checkbox" name="dimensionStones[].isIssued" value="Yes" id="isIssued" Class="controlStock"/></td> 
                        <td><a href="#" class="removeDimensionStone"><img src="images/cross1.jpg" width="20" height="20" title="Remove Dimension Stone"/></a></td>
                    </tr>

                </c:if>   

                </tbody>  
            </table>           

            </td>    
        </tr>    
    </table>

    <table  border="1" width="600"> 
        <tr>
            <td colspan="3" align="left"><a href="#" id="addDimensionStone"><img src="images/plus3.png" width="20" height="20" title="Add Dimension Stone"/></a></td>
        </tr> 
        <tr></tr> 
        <tr></tr> 
        <tr>
            <td colspan="3" align="center" width="200" height="180">
                <input type="submit" name="_target0" value="Submit" class="butn" />
            </td>
        </tr>  
    </table>  
</form:form> 
```

在上面的表格中，我可以删除或清除列表中的项目`updateStock.dimensionStones`吗？如果有可能，`JSTL`请尽快给我答案。`EL``scriptlet`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:48:43.513

您可以像这样调用控制器并在该控制器中编写代码以删除列表。

```
<a href="clearstock.so?id=${DimensionStones.id} 
```

# php - 根据关键字从固定长度的文本中提取字符串

> ID：15308451
> 
> 赞同：0
> 
> 时间：2013-03-09T07:41:18.783
> 
> 标签：php, search, center, keyword

我试了又试，但我很难过。假设我有以下场景：

```
$string = "Jenny's garden is one of the best in town, it has lush greens and colorful flowers. With what happened to her recently, she could use a new sprinkler system so that she does not have to over exert herself. Perhaps Joel can sell that extra bike to raise money or perhaps put up a garage sale.";

$keyword = "recently";

$length = 136;

// when keyword keyword is empty
$result = "Jenny's garden is one of the best in town, it has lush greens and colorful flowers. With what happened to her recently, she could use a (snip)";

// when keyword is NOT empty
$result = "(snip)it has lush greens and colorful flowers. With what happened to her recently, she could use a new sprinkler system so that she does not h(snip)"; 
```

我想要做的是获取字符串的摘录，如 $result 上所示，可能以关键字的第一次出现为中心（如果存在）。我很困惑如何使用 substr 和 strpos 在 php 中实现这一点。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:52:32.757

这应该可以满足您的需要：

```
if ($keyword != "") {
    $strpos = strpos($string, $keyword);
    $strStart = substr($string, $strpos - ($length / 2), $length / 2);
    $strEnd = substr($string, $strpos + strlen($keyword), $length / 2);

    $result = $strStart . $keyword . $strEnd;
}
else {
    $result = substr($string, 0, $length);
} 
```

这是我使用的测试代码：

```
<?PHP
$string = "Jenny's garden is one of the best in town, it has lush greens and colorful flowers. With what happened to her recently, she could use a new sprinkler system so that she does not have to over exert herself. Perhaps Joel can sell that extra bike to raise money or perhaps put up a garage sale.";

$keyword = "recently";

$length = 136;

if ($keyword != "") {
    $strpos = strpos($string, $keyword);
    $strStart = substr($string, $strpos - ($length / 2), $length / 2);
    $strEnd = substr($string, $strpos + strlen($keyword), $length / 2);

    $result = $strStart . $keyword . $strEnd;
}
else {
    $result = substr($string, 0, $length);
}

echo $result;
?> 
```

这是回显的结果：

*它有郁郁葱葱的绿色和五颜六色的花朵。鉴于她最近发生的事情，她可以使用新的自动喷水灭火系统，这样她就不必*

编辑：修复了我的代码中的几个错误......

注意：这将显示一个 136 个字符 + 关键字长度的 $result。如果您希望它仅为 136，请添加`$length = 136 - strlen($keyword);`

# jquery - 检查是否至少一个元素可见

> ID：15308459
> 
> 赞同：9
> 
> 时间：2013-03-09T07:42:31.300
> 
> 标签：jquery, html

我有一组具有相同类的元素：

```
<div class="the_class"></div>
<div class="the_class"></div>
<div class="the_class"></div> 
```

使用 jQuery，我想检查是否至少显示了这些元素之一。就像是：

```
if ($('.the_class').theFunction()) {
    ...
} 
```

我可以使用什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-09T07:44:17.047

您可以使用[:visible](http://api.jquery.com/visible-selector/)和[类选择器](http://api.jquery.com/class-selector/)来检查元素是否可见。使用类选择器，如果可见元素计数*大于零*，则表示至少有一个元素可见。

**[现场演示](http://jsfiddle.net/kF2MR/)**

```
if($('.the_class:visible').length)
{

} 
```

# c++ - 得到错误的输出

> ID：15308470
> 
> 赞同：0
> 
> 时间：2013-03-09T07:44:24.777
> 
> 标签：c++

这是代码：A[0]（在 main 函数中）应该等于 0，而不是 1。我找不到我的错误。我想问题出在 and1 函数的某个地方，但同样，我似乎无法找到它。无论如何，我很确定第一句话很好地解决了这个问题，但是网站迫使我写更多的信息。

```
#include <iostream>
#include <string>
// V and ^ or
using namespace std;
int A[] = {0, 1, 1};
int B[] = {1, 0, 1};

 int* and1(int A[], int B[])
{
    int ret[3];
    for(int i = 0; i < 3; i++)
    {
        if(A[i] == 1 && B[i] == 1 )
        {
            ret[i] = 1;
        }
        else
        {
            ret[i] = 0;
        }
    }
    return ret;
}

int* or1(const int A[], const int B[])
{
    int ret[] = {0 ,0 ,0};
    for(int i = 0; i < 3; i++)
    {
        if(A[i] == 1 || B[i] == 1)
        {
            ret[i] = 1;
        }
        else
        {
            ret[i] = 0;
        }
    }
    return ret;
}

int main()
{
    int* a = and1(A, B);
    int* b = or1(A, B);
    if(*(a+1) == *(b+1))
    {
        cout << a[0] << endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T07:47:10.310

您正在返回指向函数本地数组的指针，并且当函数范围`{ }`结束时这些本地数组不存在。你得到的是一个指向不存在的东西的指针和一个**未定义的行为**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:48:46.853

`int ret[3];`in 函数`and1`是一个局部变量`and1`。当`and1`完成执行时，它会超出范围。所以返回它的地址是没有意义的。相反，您可以将`ret`数组传递给`and1`（与 or1 类似），原型为：

```
void and1(const int A[], const int B[], int ret[]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T07:50:54.990

您正在从 function 返回一个临时数组的指针`and1`。结果是不确定的。

```
int* and1(int A[], int B[])
{
   int ret[3];
   //...
   return ret;
}

int* a = and1(A, B); // <-- Undefined behavior 
```

之后`return ret`，数组被`ret`破坏，它并不意味着更多的使用。

# jquery - Internet explorer 9 给出 parseJSON 错误

> ID：15308471
> 
> 赞同：2
> 
> 时间：2013-03-09T07:44:35.963
> 
> 标签：jquery, json, internet-explorer-9, jquery-1.9

我不知道它是由 jQuery 还是由我的脚本引起的。这是 Internet Explorer 9 给出错误的地方：

```
parseJSON: function( data ) {
    // Attempt to parse using the native JSON parser first
    if ( window.JSON && window.JSON.parse ) {
        return window.JSON.parse( data ); <<< this the "Invalid Character" err.
    } 
```

这是我的 JavaScript 代码

[http://jsfiddle.net/fNPwh](http://jsfiddle.net/fNPwh)

根据我的研究，我还在这里检查了我的 DOCTYPE。他们在谈论 Quirks 模式，所以我也尝试输入，`x-ua-compatible`但没有任何改变

```
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" > <!-- IE9 mode -->
blabla 
```

为什么 ie9 给出 jQuery 的无效字符错误？而不是 Firefox 或 webkit。哦，顺便说一句，我使用的是 jQuery 1.9.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:48:36.983

这似乎是 jQuery 库中的一个错误。[这篇文章](http://bugs.jquery.com/ticket/13430)包含为修复添加/修改的代码。`null`基本上只是在尝试解析之前移动检查并添加检查`undefined`. 该方法的开始应该看起来像这样......

```
parseJSON: function( data ) {
    if (data === undefined) {
        return data;
    }
    if (data === null) {
        return data;
    }

    // Attempt to parse using the native JSON parser first
    if ( window.JSON && window.JSON.parse ) {
        return window.JSON.parse( data );
    }
... 
```

我已经在 IE10 和 Chrome 中验证了这个修复。

# android - Activity 的随机 xml 布局文件

> ID：15308473
> 
> 赞同：0
> 
> 时间：2013-03-09T07:44:39.693
> 
> 标签：android, xml, android-layout, random, android-activity

我有五个布局（XML 文件），每个布局上都有一个`Button`和两个活动，A 和 B。在`onClick`A 中的启动按钮的动作中，我将打开活动 B，所有的故事都从那里开始：

在我的活动 B 中，首先，我想显示这五个 xml 文件**中的一个，****并且在五个 XML 文件中的每一个中，我想随机打开剩余的 4 个 xml 文件，直到按下后退按钮。`onclick``Button`**. 有什么办法可以做到这一点，或者我必须有 5 个活动，每个活动都有一个布局？

我的问题是：

**只有一个 Xml 文件随机出现在活动 B`Button`上，并且该 xml 文件没有响应，即不显示下一个 xml 文件。**

这是我的活动 B 的代码：

```
public class B extends Activity {
Handler handler = new Handler();
Button bt;

int[] layouts = {R.layout.first,R.layout.second,R.layout.third,R.layout.fourth,R.layout.fifth};
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    bt = (Button)findViewById(R.id.button1);

    bt.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            handler.postDelayed(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub

                    for (int i = 0; i < layouts.length; i++) {

                        setContentView(layouts[rand]);
                    }

                }
            }, 2000);

        }
    });

} 
```

并且所有 5 个 Xml 文件都将采用相同的模式：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="@string/hello_world" />

<Button
    android:id="@+id/button5"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="10dp"
    android:onClick="showLayouts"
    android:text="5th" /> 
```

我是 Java 新手，所以卡在这里，如果任何简单的线索也会帮助我。我已经搜索了这个论坛，但没有找到相关的解决方案。

@LuksProg，Logcat 错误是这样的：

```
 **03-11 05:51:16.147: E/AndroidRuntime(1575): FATAL EXCEPTION: main
 03-11 05:51:16.147: E/AndroidRuntime(1575): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.SAI.wth/com.SAI.wth.ReceivingActivity}: java.lang.NullPointerException
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.os.Handler.dispatchMessage(Handler.java:99)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.os.Looper.loop(Looper.java:137)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.app.ActivityThread.main(ActivityThread.java:5039)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at java.lang.reflect.Method.invokeNative(Native Method)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at java.lang.reflect.Method.invoke(Method.java:511)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at dalvik.system.NativeStart.main(Native Method)
 03-11 05:51:16.147: E/AndroidRuntime(1575): Caused by: java.lang.NullPointerException
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at com.SAI.wth.ReceivingActivity.onCreate(ReceivingActivity.java:40)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.app.Activity.performCreate(Activity.java:5104)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
 03-11 05:51:16.147: E/AndroidRuntime(1575):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)** 
```

这次我想做这个，

```
 switch (mPosition) {
                            case R.layout.first:
                                Toast.makeText(getApplicationContext(), "First", Toast.LENGTH_SHORT).show();

                                break;

                            case R.layout.second:
                                Toast.makeText(getApplicationContext(), "second", Toast.LENGTH_SHORT).show();
//Some sound                                
                                break;

                            case R.layout.third:
                                Toast.makeText(getApplicationContext(), "third", Toast.LENGTH_SHORT).show();
    //Some media , Different for each Layout..                          
                                break;  

                            case R.layout.fourth:
                                Toast.makeText(getApplicationContext(), "fourth", Toast.LENGTH_SHORT).show();

                                break;

                            case R.layout.fifth:
                                Toast.makeText(getApplicationContext(), "fifth", Toast.LENGTH_SHORT).show();

                                break;  
                            default:
                                break;
                            }

                            Collections.shuffle(mLayouts);
                        }
                        mPosition = 0;
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:34:01.270

当我这样做时，似乎工作得很好：

```
public class MainActivity extends Activity implements OnClickListener {
    Handler handler = new Handler();
    Button bt;

    int[] layouts = { R.layout.first, R.layout.second, R.layout.third, R.layout.fourth,
        R.layout.fifth };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.first);

        bt = (Button) findViewById(R.id.button5);

        bt.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        if(v.getId() == R.id.button5){

            handler.postDelayed(new Runnable() {

                @Override
                    public void run() {
                    // TODO Auto-generated method stub
                    int rand = (int) Math.floor(Math.random() * layouts.length);
                    setContentView(layouts[rand]);

                    bt = (Button) findViewById(R.id.button5);
                    bt.setOnClickListener(MainActivity.this);

                }
            }, 2000);

        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:24:08.520

> 只有一个 Xml 文件随机出现在活动 B 上，并且该 xml 文件上的按钮没有响应，即不显示下一个 xml 文件。

你会想要这样的东西：

```
private int mPosition = 0;
private Handler mHandler = new Handler();
private List<Integer> mLayouts;
private Button mButton;

private OnClickListener mListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        mHandler.postDelayed(new Runnable() {

            @Override
            public void run() {
                // as you're posting this delayed you may want to make sure the 
                // user doesn't click this Buton again in the two seconds interval
                if (mPosition >= mLayouts.size()) { // revert the list
                    int lastId = mLayouts.get(mLayouts.size() - 1);
                    Collections.shuffle(mLayouts);
                    // do this so if we randomize the layouts we don't end
                    // up after the shuffle with the same layout on the
                    // first
                    // position as the last position
                    while (lastId == mLayouts.get(0)) {
                        Collections.shuffle(mLayouts);
                    }
                    mPosition = 0;
                }
                setContentView(mLayouts.get(mPosition));
                mPosition++;
                mButton = (Button) findViewById(R.id.btnId);
                mButton.setOnClickListener(mListener);
            }

        }, 2000);           
    }

}; 
```

并在`onCreate`方法中：

```
 mLayouts = new ArrayList<Integer>();
    mLayouts.add(R.layout.layout1);
    mLayouts.add(R.layout.layout2);
    mLayouts.add(R.layout.layout3);
    mLayouts.add(R.layout.layout4);
    mLayouts.add(R.layout.layout5);
    Collections.shuffle(mLayouts);
    setContentView(mLayouts.get(mPosition));
    mButton = (Button) findViewById(R.id.btnId);
    mButton.setOnClickListener(mListener);
    mPosition++; 
```

# android - imageview没有设置全屏

> ID：15308478
> 
> 赞同：1
> 
> 时间：2013-03-09T07:45:11.237
> 
> 标签：android

我将图像视图设置为全屏，但它不起作用：左侧和右侧之间有一些空间。怎么设置`imageview`全屏？

这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <ImageView android:id="@+id/imageView"  
            android:layout_width="fill_parent"  
            android:layout_height="fill_parent">  
   </ImageView>  
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T07:50:16.113

`android:scaleType="fitXY"`在您的 xml 中使用 ：

```
<ImageView android:id="@+id/imageView"  
       android:layout_width="match_parent"  
       android:layout_height="match_parent"  
       android:scaleType="fitXY"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:00:35.487

尝试以下选项之一

```
android:scaleType="CENTER_CROP" 
```

均匀缩放图像（保持图像的纵横比），使图像的两个尺寸（宽度和高度）都等于或大于视图的相应尺寸（减去填充）。

```
android:scaleType="CENTER_INSIDE" 
```

均匀缩放图像（保持图像的纵横比），使图像的两个尺寸（宽度和高度）都等于或小于视图的相应尺寸（减去填充）。

```
android:scaleType="fitXY" 
```

独立缩放 X 和 Y，以便 src 与 dst 完全匹配。

如果你不在乎比例

```
ImageView imageView=new ImageView(context);
imageView.setAdjustViewBounds(false); 
```

# linux - 管道打开'|'之间的区别 和“|-”（安全管道打开）

> ID：15308480
> 
> 赞同：2
> 
> 时间：2013-03-09T07:45:27.417
> 
> 标签：linux, perl, pipe

`open`我在 perl中见过这两种形式的管道。

一种是简单的管道打开

```
open FH,'| command'; 
```

其他是安全管道打开

```
open FH,'|-','command'; 
```

现在，`-`第二个有什么用？他们都写到管道。我知道这会`-`分叉新进程。

简单`|`也会创建新流程吗？

我们什么时候/应该使用安全管道打开`|-`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:09:18.510

之间没有区别

```
 open my $PIPE, '| command'; 
```

对比

```
 open my $PIPE, '|-', 'command'; 
```

“安全”打开实际上是

```
 open my $PIPE, '|-', 'program', @one_or_more_args; 
```

此版本保证直接启动程序；没有调用任何 shell。它还使您不必将参数转换为 shell 文字。换句话说，

```
 open my $FH, '|-', 'program', @one_or_more_args; 
```

类似于

```
 use String::ShellQuote qw( shell_quote );
 open my $FH, '|'.shell_quote('program', @one_or_more_args); 
```

但是没有外壳（因此浪费的资源更少，您将获得程序的PID而不是外壳的PID，并且您会知道程序是否因信号而死）。

不幸的是，没有像 for 那样零参数的程序的语法`system`。

（也`open my $PIPE, "|-"`没有更多的参数，但那是另一回事。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:07:15.377

`-`当你计划（你想）从你自己的叉子（`-|`）或你自己的叉子上管道时，你必须使用`|-`。该`open`函数在父进程中返回子进程ID，在子进程中返回0。例子：

```
if( open(TO, "|-") ) {
    # Parent process
    print TO $from_parent;
}
else {
    # Child process
    $to_child = <STDIN>;
    exit;
} 
```

# git - 如何在预提交挂钩中添加/更改文件？

> ID：15308482
> 
> 赞同：1
> 
> 时间：2013-03-09T07:45:35.333
> 
> 标签：git, githooks

我想编写一个钩子来检查正在提交的文件中的某些编码约定，如果违反了这些约定，则拒绝提交/推送。但是，在我的“拒绝消息”中，我想告诉提交者发现违规行为的行号。

到目前为止，我能想到的最好的方法是让整个文件被提交，这将允许我计算行数。这也将允许我在早期代码中发现相同的编码约定违规，因此程序员将不得不清理他们碰巧修改的整个文件。

有可能吗？我怎样才能让整个新文件被提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:03:20.010

你可以用它来获取任何 Git 对象的内容[`git cat-file`](http://git-scm.com/docs/git-cat-file)（你也可以先用它来找出对象的类型，只是为了确定）。

正如您在对问题的评论中指出的那样，直接从文件系统读取文件并不总是有效，因为它可能没有完全暂存，或者它可能在暂存后发生了变化。

# pdf - 如何使用 cakephp 从 pdf 文件中读取数据

> ID：15308483
> 
> 赞同：0
> 
> 时间：2013-03-09T07:46:11.140
> 
> 标签：pdf, cakephp-2.1

我需要使用 cakephp 从 pdf 文件中读取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:57:51.953

欢迎来到 Stack Overflow，我发现这个[Cakephp-pdfview-plugin](https://github.com/kvz/cakephp-pdfview-plugin)正在做一个快速的 google。

另请参阅此问题：[从 pdf 文件导入/读取数据的最佳方法是什么？](https://stackoverflow.com/questions/25550/whats-the-best-way-to-import-read-data-from-pdf-files)

祝你好运！

*ps 告诉所有人它的紧急情况可能会导致您想要的相反影响*

# java - 覆盖 setPreferredSize() 和 getPreferredSize()

> ID：15308487
> 
> 赞同：0
> 
> 时间：2013-03-09T07:47:05.727
> 
> 标签：java, swing, size, overriding

由于我收到的答案，我现在以不同的方式做这件事。

有没有办法覆盖 setPreferredSize() 和 getPreferredSize() 以便它实际上将组件的大小设置为高于实际输入的数字，并获得一个低于实际数字的数字？

在这里，我重写了两种方法，将面板的大小设置为比我实际放入 setPreferredSize() 的大小大 100 像素，如果我要获得首选大小，我希望它返回我放入 setPreferredSize() 的内容

我怀疑 Swing 使用 getPreferredSize() 来设置大小，那么是否有另一种方法可以覆盖来实现这一点，或者我是否不得不使用另一种方法来返回我想要的值？

```
import java.awt.*;
import java.beans.Transient;
import javax.swing.*;

public class PreferredSize extends JPanel{

public static void main(String[] args) {
    JPanel background = new JPanel();

    PreferredSize ps = new PreferredSize();
    ps.setPreferredSize(new Dimension(200, 200));
    ps.setBackground(Color.CYAN);

    JPanel panel = new JPanel();
    panel.setBackground(Color.BLUE);
    panel.setPreferredSize(new Dimension(200, 200));

    background.add(ps);
    background.add(panel);

    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setContentPane(background);
    f.pack();
    f.setLocationRelativeTo(null);
    f.setVisible(true);
}

@Override
public void setPreferredSize(Dimension preferredSize) {
    super.setPreferredSize(new Dimension(preferredSize.width+100, preferredSize.height+100));
}

@Override
@Transient
public Dimension getPreferredSize() {
    return new Dimension(super.getPreferredSize().width-100, super.getPreferredSize().height-100);
}
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T08:05:14.947

您面临的问题是，首选尺寸只是一个指南，布局管理器可以使用它来决定组件的布局方式。布局管理器忽略这些提示是完全合理的。

在 ip 你的例子的情况下；

1.  a 的默认大小`JPanel`是 0x0，所以当您添加和减去 100 个像素时，它现在又是 0x0。
2.  a 的默认布局管理器`JFrame`is `BorderLayout`，如果其可用尺寸大于或小于首选尺寸指定的尺寸，它将忽略首选尺寸

真正的问题是，你真正想要达到的目标是什么？

# perl - 无法使用 perl 访问带有 WWW::mechanize 的 https 页面

> ID：15308494
> 
> 赞同：1
> 
> 时间：2013-03-09T07:48:37.007
> 
> 标签：perl, https, www-mechanize

我正在尝试使用 perl 中的 WWW::Mechanize 库访问 https 页面。这是我所拥有的：

```
#!/usr/local/bin/perl -w
use strict;
use lib '/home/perl_modules/libwww-perl-5.836/lib';
use lib '/home/perl_modules/WWW-Mechanize-1.72/lib';
use lib '/home/perl_modules/HTML-Tree-5.03/lib';
use lib '/home/perl_modules/Crypt-SSLeay-0.64/lib';
use WWW::Mechanize;

my $m = WWW::Mechanize->new();

my $url = "http://alumni.nd.edu";
my $alias = "Linux Mozilla";

$m->agent_alias($alias);

$m->follow_link(url => "/s/1210/start.aspx?sid=1210&gid=1&pgid=3&cid=40"); 
```

这是输出：

```
Error GETing https://securelb.imodules.com/?sid=1210&gid=1&pgid=3&cid=40&returnurl=http%3a%2f%2falumni.nd.edu%2f: Server closed connection without sending any data back at www_mech_test.pl line 17 
```

在阅读了一些关于 WWW::Mechanize 的帮助页面后，我尝试设置一个别名并包含 Crypt-SSLeay 模块，但我仍然收到上述错误。我错过了什么？这是在 RHEL 5.5 下运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:15:29.277

您的代码没有加载页面 $url=' [http://alumni.nd.edu](http://alumni.nd.edu) "'

在 follow_link 之前添加：

```
$m->get($url);
$m->follow_link(url => "/s/1210/start.aspx?sid=1210&gid=1&pgid=3&cid=40"); 
```

follow_link 调用搜索由 WWW::Mechanize 加载的文档，没有它，它不会找到任何东西。

# iphone - 当名字或姓氏为空时，从电话联系人设置 sectionList 时出现问题

> ID：15308505
> 
> 赞同：0
> 
> 时间：2013-03-09T07:50:32.623
> 
> 标签：iphone, ios

我想知道是否有人可以帮助解决我面临的问题。我已经使用标准方式检索了电话联系人（我必须按姓氏排序）

```
NSMutableArray *contactArray = [NSMutableArray array]; 
CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook); 
CFMutableArrayRef peopleMutable = CFArrayCreateMutableCopy(kCFAllocatorDefault,CFArrayGetCount(people), people);

CFArraySortValues(peopleMutable, CFRangeMake(0,
CFArrayGetCount(peopleMutable)),
(CFComparatorFunction)ABPersonComparePeopleByName, (void
*)kABPersonSortByLastName);

NSArray *allPeopleArray = (NSArray *)peopleMutable; 
```

我遍历每条记录并用 kABPersonFirstNameProperty、kABPersonLastNameProperty、kABPersonEmailProperty、kABPersonPhoneProperty 填充 NSMutableDictionary。一些联系人没有名字或姓氏。因此，我确实检查了它们并使用 [NSNull null] 填充 MutableDictionary 用于 lastName 的 firstName。现在我需要对这个 MutableArray 进行排序。我使用 NSSortDescriptor 进行排序

```
NSSortDescriptor *aSortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"lastName" ascending:YES];
NSSortDescriptor *aSortDescriptor2 = [[NSSortDescriptor alloc] initWithKey:@"firstName" ascending:YES]; 
[listToSort sortUsingDescriptors:[NSArray arrayWithObject:aSortDescriptor1, aSortDescriptor2, nil]];
[aSortDescriptor1 release]; 
[aSortDescriptor2 release]; 
```

当我 NSLog listToSort 列表正确排序时。

然后我将这个排序的可变数组传递给这个方法，它基本上创建了一个 sectionList 用于在 UItableview 上显示

```
-(void)setupSectionList:(NSMutableArray *)contactList {
sectionNames = [[NSMutableArray alloc]init];
sectionData = [[NSMutableArray alloc]init];
NSString *previous=@"";
for (NSDictionary *dict in contactList) {
    NSString *lastName = [dict objectForKey:@"lastName"];
    NSString *firstName = [dict objectForKey:@"firstName"];

    NSString *firstLetter = nil;
    if ([dict objectForKey:@"lastName"] != [NSNull null]) {
        firstLetter = [lastName substringToIndex:1];
    }else if ([dict objectForKey:@"firstName"] != [NSNull null]) {
        firstLetter = [firstName substringToIndex:1];
    }
    //Get the first Letter

    if (firstLetter) {
        //Add the letter to sectioNames when it is different
        if (![firstLetter isEqualToString:previous]) {
            previous = firstLetter;
            [sectionNames addObject:[firstLetter uppercaseString]];
            //Now add a new array to our array of arrays
            NSMutableArray *oneSection = [NSMutableArray array];
            [sectionData addObject:oneSection];
        }
        //Add this dictionary to the last section array
        [[sectionData lastObject] addObject:dict];
    }
}
} 
```

这是排序搞砸的地方。这是一个例子。我的联系人只有一个名字作为名字，没有别的。我还有另外两个联系人 John Appleseed 和 William Frank。当我从上面的代码中对 sectionData 进行 NSLog 记录时，我看到第一个字母为 F、A、F。我希望看到 A、F。有人可以帮我解决这个问题吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:43:11.123

而不是这个检查：

```
if (![firstLetter isEqualToString:previous]) 
```

试试这个：

```
if ([sectionNames indexOfObject:firstLetter] == NSNotFound) 
```

确定您是否已经有了这个首字母。

# bash - 在 bash 中重命名文件的陷阱

> ID：15308513
> 
> 赞同：2
> 
> 时间：2013-03-09T07:51:06.417
> 
> 标签：bash, posix, renaming

我正在阅读此链接上的指南 [http://mywiki.wooledge.org/BashFAQ/030](http://mywiki.wooledge.org/BashFAQ/030) 给出了一些示例 我试图理解它们 一个示例代码说

```
# Bash
# Replace all spaces with underscores
for f in *\ *; do mv -- "$f" "${f// /_}"; done 
```

到目前为止，我所知道的是在搜索和替换示例或在上面示例中的 shell 脚本中使用反斜杠来表示特殊字符，例如 ~ 或 # 等空格，他们
使用 `${f// /_}`
了正斜杠，我不清楚这是允许吗？
在同一页面上的另一个示例中，他们给出了一个删除空格并将其替换为下划线的示例

`find . -depth -name "* *" -exec bash -c 'dir=${1%/*} base=${1##*/};
mv "$1" "$dir/${base// /_}"' _ {} \;`

在上面的例子中，我不清楚下面的
1) `dir=${1%/*}`
2) `base=${1##*/}`
3)，当它`mv "$1"`在上面的语句中说明 $1 的含义时，
4) 最后 find 命令正在关闭，`-exec <something> _ {} \;`
现在下划线 _ 的用途是什么，卷曲大括号 {} 和一个反斜杠，后跟一个冒号 \;?
在第三个例子中，他们说

```
# tolower - convert file names to lower case
# POSIX
for file in "$@"do 
   [ -f "$file" ] || continue                # ignore non-existing names   
 newname=$(echo "$file" | tr '[:upper:]' '[:lower:]')     # lower case   
 [ "$file" = "$newname" ] && continue      # nothing to do   
 [ -f "$newname" ] && continue             # don't overwrite existing files  
  mv -- "$file" "$newname"done 
```

我不清楚以下几行
5)`[ -f "$file" ] || continue # ignore non-existing names`
我不清楚 [ ] 如果 $file 存在则测试条件，那么 OR 条件有什么用 || 这里和继续声明
6)`[ -f "$newname" ] && continue # don't overwrite existing files`这里的疑问与第 5 点相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:31:09.617

对于你的第一个问题，关于替换，你有，来自`man bash`：

> ${参数/模式/字符串}
> 
> ```
>  Pattern substitution. ... If pattern begins with /, all matches
> of  pattern  are replaced   with  string.   Normally  only
> the  first  match  is replaced. 
> ```

这意味着，`${parameter/pattern/string}`替换第一次出现的`pattern`in `parameter`by `string`，其中`${parameter//pattern/string}`替换所有匹配项。

对于第二部分：

1.  `dir=${1%/*}`

    `$1`是脚本的第一个参数，可以通过它的等价物访问`${1}`，它允许参数扩展，例如`%...`，删除 中的最短匹配模式`${1}`，将模式视为`/*`;

2.  `base=${1##*/}`

    `##`考虑到模式，这将删除最长的匹配前缀`*/`；这意味着，在`x="a/b/c/d"`，`${x##*/}`会给你`d`；

3.  如前所述，`$1`是脚本的第一个参数；

4.  后跟冒号的反斜杠纯粹是语法，需要导致`-exec ...`停止解析命令行——指向命令的结尾；

5.  不知何故，这是完全独立的：你有条件、一个`or`运算符和运算符的第二部分，它们可以作为一个整体阅读为

    > 如果 $file 存在，则转到下一行，或/否则，继续（跳过 for 循环的当前迭代）；

6.  正如您所指出的那样，除了运算符之外，情况完全相同，这一次导致解释为：

    > 如果已存在名为 $newname 的文件，则跳至下一次迭代；

    另一种阅读方式是

    > 一个名为 $newname 的文件存在并跳到下一次迭代。

您可以在最初的问题中获得更多信息，有关参数扩展，来自`man bash | less -p "Parameter Expansion"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:45:01.490

```
${f// /_} 
```

表示：用下划线替换所有出现的空格

[`ref`](http://thegeekstuff.com/2010/07/bash-string-manipulation)

* * *

```
${1%/*} 
```

`/*`表示：从字符串末尾删除最短匹配

[`ref`](http://thegeekstuff.com/2010/07/bash-string-manipulation)

* * *

```
${1##*/} 
```

`*/`意思是：从字符串的前面删除最长的匹配

[`ref`](http://thegeekstuff.com/2010/07/bash-string-manipulation)

* * *

> 当它说`mv "$1"`$1 是什么意思时

`$1`是第一个位置参数。所以如果你的脚本有这个

```
echo $1 
```

你这样打电话

```
foo.sh 111 
```

那么输出将是

```
111 
```

* * *

> 终于 find 命令被关闭了，`-exec <something> _ {} \;` 现在下划线`_`、花括号`{}`和反斜杠后跟冒号有什么用`\;`？

下划线是参数的占位符`$0`

[`ref`](http://linux.die.net/man/1/bash)

该`{} \;`成语与`find`, 一起使用，表示：为每个文件运行一次此命令

[`ref`](http://linux.die.net/man/1/find)

* * *

```
[ -f "$file" ] || continue 
```

意思是：如果`$file`不是FILE，则继续（立即结束循环的当前迭代并开始下一个）

[`ref`](http://ss64.com/bash/test.html)

# python - 如何在 tkinter 的画布中绘制多个正方形？

> ID：15308514
> 
> 赞同：0
> 
> 时间：2013-03-09T07:51:26.477
> 
> 标签：python, user-interface, tkinter

```
from Tkinter import Tk, Canvas

master = Tk()
w = Canvas(master, width=250, height=200)
w.pack()
w.create_rectangle(0, 0, 100, 100, fill="blue", outline = 'blue')
master.mainloop() 
```

这将创建一个正方形/矩形。如何创建一个函数以创建多个正方形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:52:59.980

`create_rectangle`反复打电话怎么办？

```
from Tkinter import *
master = Tk()

w = Canvas(master, width=250, height=200)
w.create_rectangle(0, 0, 100, 100, fill="blue", outline = 'blue')
w.create_rectangle(50, 50, 100, 100, fill="red", outline = 'blue') 
w.pack()
master.mainloop() 
```

也许你应该多花点力气，从做一个到做n并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:00:43.243

Read up on how to define functions in Python. I recommend the [official tutorial](http://docs.python.org/2/tutorial/controlflow.html#defining-functions).

Implementing the rectangle as a class (NOTE: For your own sake, read about functions and variables first): [Help Creating Python Class with Tkinter](https://stackoverflow.com/questions/3479265/help-creating-python-class-with-tkinter?rq=1)

# android - AsyncTask<> 永远不会在 onCreate() 中调用以从 Web 下载图像

> ID：15308516
> 
> 赞同：1
> 
> 时间：2013-03-09T07:51:41.450
> 
> 标签：android, download, android-asynctask

我是 android 新手我想`images`从网上下载到我的模拟器我已经看到 了[这个](https://stackoverflow.com/questions/15271245/asynctask-does-not-execute-in-oncreate)，我的问题也是如此。但我已经这样做了：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new MyAsnyc().execute();
}   

public class MyAsnyc extends AsyncTask<Void, Void,Void>{
    public  File file ;
    InputStream is;
    protected void inBackground() throws IOException{

        File path = Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_PICTURES);
        file = new File(path, "DemoPicture.jpg");
        try{
            // Make sure the Pictures directory exists.
            path.mkdirs();

            URL url = new      URL(BASE_URL);
            /* Open a connection to that URL. */
            URLConnection ucon = url.openConnection();

            /*
             * Define InputStreams to read from the URLConnection.
             */
            is = ucon.getInputStream();

            OutputStream os = new FileOutputStream(file);
            byte[] data = new byte[is.available()];
            is.read(data);
            Log.d("MY_TAG>>>", "Picture is Readable...");
            os.write(data);
            Log.d("MY_TAG>>>", "Picture is Saved...");
            is.close();
            os.close();

        }
        catch (IOException e) {
            Log.d("ImageManager", "Error: " + e);
        }
    }
    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        try {
            inBackground();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }
    protected void onPostExecute()
    {

        try
        {
            // Tell the media scanner about the new file so that it is
            // immediately available to the user.

            MediaScannerConnection.scanFile(null,
                    new String[] { file.toString() }, null,
                    new MediaScannerConnection.OnScanCompletedListener() {
                public void onScanCompleted(String path, Uri uri) {
                    Log.i("ExternalStorage", "Scanned " + path + ":");
                    Log.i("ExternalStorage", "-> uri=" + uri);
                }
            });
        }
        catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

}

但我`AsyncTask`从来没有打电话请任何人帮助我如何解决这个问题以及如何从网上下载图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:02:24.677

您正在`doInBackground(Void... params)`递归调用而不是调用`doInBackground()`. 将后者重命名为其他名称并从`doInBackground(Void... params)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:45:06.310

像这样在 doInBackground 中执行所有操作：

```
 public class MyAsnyc extends AsyncTask<Void, Void,Void>{
    public  File file ;
    InputStream is;

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

      try{
      File path = Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES);
       file = new File(path, "DemoPicture.jpg");

              // Make sure the Pictures directory exists.
              path.mkdirs();

              URL url = new      URL(BASE_URL);
              /* Open a connection to that URL. */
              URLConnection ucon = url.openConnection();

              /*
               * Define InputStreams to read from the URLConnection.
               */
              is = ucon.getInputStream();

              OutputStream os = new FileOutputStream(file);
              byte[] data = new byte[is.available()];
              is.read(data);
              Log.d("MY_TAG>>>", "Picture is Readable...");
              os.write(data);
              Log.d("MY_TAG>>>", "Picture is Saved...");
              is.close();
              os.close();

          }
          catch (IOException e) {
              Log.d("ImageManager", "Error: " + e);
          }

        return null;
    }

  protected void onPostExecute()
   {

    try
    {
        // Tell the media scanner about the new file so that it is
        // immediately available to the user.

        MediaScannerConnection.scanFile(null,
                new String[] { file.toString() }, null,
                new MediaScannerConnection.OnScanCompletedListener() {
            public void onScanCompleted(String path, Uri uri) {
                Log.i("ExternalStorage", "Scanned " + path + ":");
                Log.i("ExternalStorage", "-> uri=" + uri);
            }
        });
    }
    catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

  }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:52:40.227

行！要将图像下载到您的设备/模拟器，您应该试试这个！！

首先创建一个`Class`：

```
public class DownloadImage {    

public static File getImage(String imageUrl, String fileName){
    File file = null;
    try {
        //set the download URL, a url that points to a file on the internet
        //this is the file to be downloaded         
        URL url = new URL(imageUrl);
        Log.d("INFORMATION..", "FILE FOUNDED....");
        //create the new connection
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        //set up some things on the connection
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);

        //and connect!
        urlConnection.connect();
        Log.d("INFORMATION..", "FILE CONECTED....");
        //set the path where we want to save the file
        //in this case, going to save it on the root directory of the
        //sd card.
        File SDCardRoot = Environment.getExternalStorageDirectory();
        //create a new file, specifying the path, and the filename
        //which we want to save the file as.
        file = new File(SDCardRoot, fileName);

        //this will be used to write the downloaded data into the file we created
        FileOutputStream fileOutput = new FileOutputStream(file);
        Log.d("INFORMATION..", "WRINTING TO FILE DOWNLOADED...." + file);
        //this will be used in reading the data from the internet
        InputStream inputStream = urlConnection.getInputStream();

        //this is the total size of the file
        int totalSize = urlConnection.getContentLength();
        //variable to store total downloaded bytes
        int downloadedSize = 0;

        //create a buffer...
        byte[] buffer = new byte[1024];
        int bufferLength = 0; //used to store a temporary size of the buffer

        //now, read through the input buffer and write the contents to the file
        while ( (bufferLength = inputStream.read(buffer)) > 0 ) {
            //add the data in the buffer to the file in the file output stream (the file on the sd card
            fileOutput.write(buffer, 0, bufferLength);
            //add up the size so we know how much is downloaded
            downloadedSize += bufferLength;
            Log.d("INFORMATION..", "FILE DOWNLOADED....");
            //this is where you would do something to report the prgress, like this maybe
            //updateProgress(downloadedSize, totalSize);

        }
        //close the output stream when done
        fileOutput.close();
        Log.d("INFORMATION..", "FILE DOWNLOADING COMPLETED....");
        //catch some possible errors...
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return file;
}
) 
```

`DownloadImage.getImage(String imageUrl, String fileName)`像这样调用`MainActivity.java`它：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ImageView imageView = (ImageView) findViewById(R.id.imageView1);

    String url = "http://4.bp.blogspot.com/-8v_k_fOcfP8/UQIL4ufghBI/AAAAAAAAEDo/9ffRRTM9AnA/s1600/android-robog-alone.png"; 

    String file = DownloadImage.getImage(url, "My Image.jpg").toString();

    // Get file path on device and set it to imageView
    Bitmap bitmap = BitmapFactory.decodeFile(file);
    imageView.setImageBitmap(bitmap);
}
} 
```

我希望这将根据您的需要工作！

# java - Spring应用中如何实现Hibernate DAO的一些疑惑

> ID：15308527
> 
> 赞同：1
> 
> 时间：2013-03-09T07:54:29.520
> 
> 标签：java, spring, hibernate, spring-mvc

我是 Spring 世界的新手，我正在尝试开发一个将 Spring 与 Hibernate 集成的 DAO。我已经创建了一个工作项目，但我对它有一些架构上的疑问。

我基于以下独立的 Hibernate 教程创建了我的 Spring + Hibernate 项目（独立，因为它不使用 Spring 或其他框架，它是一个简单的 Java + Hibernate 项目）：[http ://www.tutorialspoint.com/hibernate /hibernate_examples.htm](http://www.tutorialspoint.com/hibernate/hibernate_examples.htm)

在我的项目中，我有一个接口，在其中定义了我需要的所有 CRUD 方法以及该接口的具体实现，这是我的具体类的代码：

```
package org.andrea.myexample.HibernateOnSpring.dao;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.entity.Person;

import org.hibernate.Criteria;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;
import org.springframework.transaction.annotation.Transactional;

public class PersonDAOImpl implements PersonDAO {

    // Factory per la creazione delle sessioni di Hibernate:
    private static SessionFactory sessionFactory;

    // Metodo Setter per l'iniezione della dipendenza della SessionFactory:
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    /** CREATE CRUD Operation:
     * Aggiunge un nuovo record rappresentato nella tabella rappresentato
     * da un oggetto Person
     */
    @Transactional(readOnly = false)
    public Integer addPerson(Person p) {

        System.out.println("Inside addPerson()");

        Session session = sessionFactory.openSession();

        Transaction tx = null;
        Integer personID = null;

        try {
            tx = session.beginTransaction();

            personID = (Integer) session.save(p);
            tx.commit();
        } catch (HibernateException e) {
            if (tx != null)
                tx.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }

        return personID;

    }

    // READ CRUD Operation (legge un singolo record avente uno specifico id):
    public Person getById(int id) {

        System.out.println("Inside getById()");

        Session session = sessionFactory.openSession();

        Transaction tx = null;          
        Person retrievedPerson = null;  

        try {
            tx = session.beginTransaction();
            retrievedPerson = (Person) session.get(Person.class, id);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {                 
            session.close();
        }

        return retrievedPerson;
    }

    // READ CRUD Operation (recupera la lista di tutti i record nella tabella):
    @SuppressWarnings("unchecked")
    public List<Person> getPersonsList() {

        System.out.println("Inside getPersonsList()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;
        List<Person> personList = null;

        try {
            tx = session.beginTransaction();
            Criteria criteria = session.createCriteria(Person.class);
            personList = criteria.list();
            System.out.println("personList: " + personList);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }
        return personList;
    }

    // DELETE CRUD Operation (elimina un singolo record avente uno specifico id):
    public void delete(int id) {

        System.out.println("Inside delete()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;

        try {
            tx = session.beginTransaction();
            Person personToDelete = getById(id);
            session.delete(personToDelete);
            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }

    }

    @Transactional
    public void update(Person personToUpdate) {

        System.out.println("Inside update()");

        Session session = sessionFactory.openSession();
        Transaction tx = null;

        try {
            System.out.println("Insite update() method try");
            tx = session.beginTransaction();
            session.update(personToUpdate);

            tx.commit();
        }catch (HibernateException e) { 
            if (tx != null)                 
                tx.rollback();          
            e.printStackTrace();
        } finally {
            session.close();
        }   

    }

} 
```

1）第一个疑问与在这个类中，对于每个 CRUD 方法**我打开一个新会话**有关。

我这样做是因为在本教程中：[http](http://www.tutorialspoint.com/hibernate/hibernate_sessions.htm) ://www.tutorialspoint.com/hibernate/hibernate_sessions.htm我已经读过：

> Session 对象是轻量级的，设计为在每次需要与数据库交互时实例化。持久对象通过 Session 对象进行保存和检索。会话对象不应长时间保持打开状态，因为它们通常不是线程安全的，应根据需要创建和销毁它们。

但是后来有人说我集成 Spring 和 Hibernate 我不需要在每个 CRUD 方法中打开一个新会话，因为如果我将**@Transactional**注释添加到所有 CRUD 方法，那么 Spring 与当前事务关联的会话，这也将在事务结束时由 Spring 关闭。每次打开/关闭事务时，Spring 都会打开和关闭一个会话。

所以，如果是真的，我只需要打开一次会话，然后获取当前会话。

这是真的还是我的具体课程是正确的（它运作良好，但我不知道它是否以愚蠢的方式运作！！！）

2）第二个疑问与阅读Spring文档有关：[http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html# orm-hibernate](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#orm-hibernate)我发现它使用了可以调用 DAO 的 AOP 服务...

所以……是我的架构这么差吗？我有一个接口，表示我的 DAO 和我使用 Hibernate 实现 DAO 的具体类，我称它为在数据库上执行 CRUD 操作的方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T08:10:09.697

关于#1。`@Transactional`是的，当您在 DAO 的 CRUD 操作方法中使用注解时，您不需要显式处理会话的打开和关闭。春天为你做到了。您需要做的就是在当前会话上调用 CRUD 方法，该方法是通过调用`sessionFactory.getCurrentSession()`. 不需要像在上面的代码中那样显式地打开、提交和回滚事务。当你用`@Transactional`.

关于#2。Spring 有自己的方式来实现您的 DAO 实现。它可能正在使用AOP。这并不意味着您的架构是错误的。使用接口和具体类实现的架构是正确的方法。我要做的是让所有的 CRUD 操作由基类实现，然后让子类实现 DAO 特定的方法。我的意思是这个（只给出伪代码）：

```
interface BaseDAO {//declare all the CRUD methods}

interface PersonaDAO extends BaseDAO {//declare all Person related methods like getPersonsList}

class BaseDAOImpl implements BaseDAO {//CRUD method implementations }

class PersonaDAOImpl extends BaseDAOImpl implements PersonDAO {//implementation of Person related methods} 
```

这一点，我觉得会是一个更好的拱门，这样你就可以重用 CRUD 操作代码。希望这可以帮助。

# jquery - 淘汰赛Jquery绑定点击不起作用

> ID：15308533
> 
> 赞同：0
> 
> 时间：2013-03-09T07:54:56.273
> 
> 标签：jquery, binding, knockout.js, click

第一个问题！希望我能做好。

我有这个绑定列表：

```
<table id="restaurants_list" data-bind="foreach : restaurants" style="display: none">
    <tr>
        <td data-bind="text:name"></td>
        <td data-bind="text:address.address1"></td>
        <td data-bind="text:address.address2"></td>
        <td data-bind="text:address.postcode + ' ' + address.suburb"></td>
        <td>
            <input type="button" value="show" data-bind="click: $root.showmap" />
        </td>
    </tr>
</table>
<div id="map"></div> 
```

这里是模型视图：

```
function RestaurantsViewModel() {
    var self = this;
    self.restaurants = data;
    self.showMap = function (restaurant) {
        $("#map").show();
        ....
    };
    showMap(restaurants[0]);
}; 
```

最后绑定：

```
$(document).ready(function () {
    $("#link_get_restaurants").bind("click", get_restaurants);
});
function get_restaurants(event) {
    $("#restaurants_list").show();
    ko.applyBindings(new RestaurantsViewModel());
} 
```

第一个`showmap(restaurants[0])`工作正常。但是，`click : $root.showmap`不火。

那我是不是做错了什么？我也使用 Jquery，我不知道它是否来自那里。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T08:02:20.017

试试这两个步骤：

1) 更换

`click : $root.showmap`

和

```
click : $root.showMap 
```

2）诅咒区分大小写:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:59:13.277

`showmap`在绑定中拼写错误（您的方法是`showMap`）。你可以尝试绑定到`$root.showMap`吗？

```
<input type="button" value="show" data-bind="click: $root.showMap" /> 
```

# vb.net - 在 mailitem.send() 之后向用户显示“已发送邮件”消息

> ID：15308539
> 
> 赞同：1
> 
> 时间：2013-03-09T07:56:09.213
> 
> 标签：vb.net, email, outlook-addin

我正在用 VB 编写一个发送电子邮件的插件，我想在 mailitem.send() 方法成功完成后向他们显示“电子邮件发送成功”消息框。mailitem.send() 不产生值，所以我不能做类似的事情：

```
if mailitem.send() then
   messagebox.show("Email sent successfully")
end if 
```

如何显示确认发送电子邮件的消息框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:56:59.293

如果出现错误，Send 将引发异常。如果没有，您可以假设消息已成功移交给传输提供商

提交是异步的，因此实际的交付将在稍后发生（有时会更晚，例如，如果您在调用 Send 时没有网络连接）。

您可以在 Sent Items 文件夹的 Items 集合上安装事件接收器，并在 Items.ItemAdd 事件触发时显示消息框。

# jquery - 拖放一行的jqgrid

> ID：15308542
> 
> 赞同：0
> 
> 时间：2013-03-09T07:56:37.893
> 
> 标签：jquery, jqgrid, drag-and-drop

我试图实现在 2 个网格之间拖放一行。但是当我尝试这样做时，什么也没有发生，这是我的代码。

```
<?php
session_start();
if(!isset($_SESSION['nome']))
{
header("location: index.html");
}
else
{

}

// be sure to put text data in CDATA

?>
<html>

<head><title>Eulen</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8″&gt;
<link rel="stylesheet" type="text/css" media="screen" href="css/redmond/jquery-  ui-1.10.1.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />
<script src="js/jquery-ui-1.10.1.custom.js" type="text/javascript"></script>

<style type="text/css">
html, body {
margin: 0;
padding: 0;

}
</style>

<script src="js/jquery-1.9.0.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script src="js/jquery.ui.draggable.js" type="text/javascript"></script>
<script src="js/jquery.ui.droppable.js" type="text/javascript"></script>
<script type="text/javascript" >
$(document).ready(function()
{

$(".account").click(function()
{
 var X=$(this).attr('id');
if(X==1)
{
$(".submenu").hide();
$(this).attr('id', '0');
}
else
{
$(".submenu").show();
$(this).attr('id', '1');
}

});

//Mouse click on sub menu
$(".submenu").mouseup(function()
{
return false
});

 //Mouse click on my account link
$(".account").mouseup(function()
{
return false
});

/ /Document Click
$(document).mouseup(function()
{
$(".submenu").hide();
$(".account").attr('id', '');
});
});
</script>
<style type="text/css" media="screen">
#sidemenu a {
border-bottom: 1px solid #F6F7F9;
border-top: 1px solid #F6F7F9;
color: #596677;
display: block;
padding: 9px 26px 9px 15px;
text-decoration: none;
}    

#sidemenu a:hover {
background: none repeat scroll 0 0 #EDF1F5;
border-bottom: 1px solid #DCE7F0;
border-top: 1px solid #DCE7F0;
color: #3F4C59;
text-decoration: none;
}
.dropdown
{
color: #555;
margin: 3px -22px 0 0;
width: 143px;
position: relative;
height: 17px;
text-align:left;
}
.submenu
{
background: #fff;
position: absolute;
top: -12px;
left: -20px;
z-index: 100;
width: 135px;
display: none;
margin-left: 10px;
padding: 40px 0 5px;
border-radius: 6px;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.45);
}
.dropdown li a
{
color: #555555;
display: block;
font-family: arial;
font-weight: bold;
padding: 6px 15px;
cursor: pointer;
text-decoration:none;
}

.dropdown li a:hover
{
background:#155FB0;
color: #FFFFFF;
text-decoration: none;
}
a.account
{
font-size: 11px;
line-height: 16px;
color: #555;
position: absolute;
z-index: 110;
display: block;
padding: 11px 0 0 20px;
height: 28px;
width: 121px;
margin: -11px 0 0 -10px;
text-decoration: none;
background: url(icons/arrow.png) 116px 17px no-repeat;
cursor:pointer;
}
.root
{
list-style:none;
margin:0px;
padding:0px;
font-size: 11px;
padding: 11px 0 0 0px;
border-top:1px solid #dedede;
}

</style>
<script type="text/javascript">
$(function(){
  $("#list").jqGrid({
url:'gettags.php',
width:600,
datatype: 'xml',
mtype: 'GET',
colNames:['ID','Estação','Nome Cliente','Piso','Descrição'],
colModel :[
  {name:'id_tag', index:'id_estacaotag',hidden:true},
  {name:'nome', index:'nome'},
  {name:'nome2', index:'nome2'},
  {name:'id_piso', index:'id_piso'},
  {name:'descricao', index:'descricao'},
],
pager: '#pager',
hidegrid: false,
rowNum:10,
rowList:[10,20,30],
sortname: 'nome',
sortorder: 'asc',
viewrecords: true,
gridview: true,

caption: 'Tags'
  });
  $("#list").jqGrid('navGrid','#pager',{
    edit:false,
    add:false,
    del:false,
    search:false

});
});
</script>
<script type="text/javascript">
$(function(){
  $("#list2″).jqGrid({

width:600,
datatype: 'xml',
mtype: 'GET',
colNames:['ID','Estação','Nome Cliente','Piso','Descrição'],
colModel :[
  {name:'id_tag', index:'id_estacaotag',hidden:true},
  {name:'nome', index:'nome'},
  {name:'nome2', index:'nome2'},
  {name:'id_piso', index:'id_piso'},
  {name:'descricao', index:'descricao'},
],
pager: '#pager2',
hidegrid: false,
rowNum:10,
rowList:[10,20,30],
sortname: 'nome',
sortorder: 'asc',
viewrecords: true,
gridview: true,

caption: 'Ronda'
  });
  $("#list2″).jqGrid('navGrid','#pager2',{
    edit:false,
    add:false,
    del:false,
    search:false

});
});
jQuery("#list").jqGrid('gridDnD',{connectWith:'#list2'});
 jQuery("#list2″).jqGrid('gridDnD',{connectWith:'#list'});
</script>
</head>
<body style="margin: 0px;padding: 0px; font-style: courier">

  <div style="width: 100%;height: 100%;min-width: 1000px;min-height: 600px">

     <div style="float: left; width: 100%; height: 15%;background-color:#5CB3FF;">

      <div class="dropdown" style="float: right;right:50px;top:50%">
<a class="account" ><b>Bem Vindo,<?php  $t=$_SESSION['nome'];echo $t;?></b></a>

<div class="submenu">
<ul class="root">
<li ><a href="changepass.php" >Alterar Password</a></li>
<li ><a href="logout.php" >Logout</a></li>

</ul>
</div>

        </div>

 </div>    

 <div  style="float: left; width: 100%;height: 85%">            

     <span id="sidemenu" style="float: left; width: 15%;height: 100%;background-color:#F6F7F9;">
         <a href="admin.php">Inicio</a>
         <a href="adminclientes.php">Clientes</a>
         <a href="adminlocais.php">Locais</a>
         <a href="admintags.php">Tags</a>

        <a href="adminusers.php">Utilizadores</a>
        <a href="admintypeofuser.php">Tipo de Utilizadores</a>

     </span>

     <span style="float: left;width: 70%;height: 100%;">

      Nome da Ronda: <input type="text" name="nomeronda" id="nomeronda"><br><br>
      Utilizador:<select>
      <?php
      $db = mysqli_connect("localhost","user","*****");
// select the database
mysqli_select_db($db,"onetag51_db_metro");
      $SQL = "SELECT * FROM utilizadores ";
 $result = mysqli_query( $db,$SQL ) or die("Couldn't execute query.".mysqli_error($db));
      while($row = mysqli_fetch_array($result,MYSQL_ASSOC)) {
      echo "<option value='".$row['id_utilizador']."'>".$row['nome']."</option>";
      }
      ?>
      </select>
      <table id="list"></table> <div id="pager"></div></script>
      <br>
      <br>
      Ronda:<br>
      <table id="list2″&gt;</table> <div id="pager2″&gt;</div></script>
     </span>

 </div>

  </div>

 </body>

</html>
<?php

?> 
```

网格看起来很好，第一个已加载……我一直在寻找解决方案，我错过了什么吗？您可以在[此处的页面中看到它](http://onetag.pt/teste/adminrondas.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:54:41.190

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T00:44:40.583

我发现了问题，在这一行： jQuery("#list").jqGrid('gridDnD',{connectWith:'#list2'}); jQuery("#list2″).jqGrid('gridDnD',{connectWith:'#list'});

这 2 行不在 $(function(){ });

感谢 oleg 的帮助，尽管 2 行代码在外面，但您提供的 awnser 是完全正确的。我刚刚测试过。

# javascript - 使用 Object.create() 和使用赋值运算符有什么区别？

> ID：15308545
> 
> 赞同：0
> 
> 时间：2013-03-09T07:57:05.497
> 
> 标签：javascript, ecmascript-5, prototypal-inheritance

这里有一些例子。

```
// case 1:
var obj1 = {msg : 'Hello'};
var obj2 = obj1;
obj2.msg = "Hi!"; //overwrites
alert(obj1.msg); //=>'Hi!'

// case 2:
var obj1 = {msg : 'Hello'};
var obj2 = Object.create(obj1);
obj2.msg = "Hi!"; //does not overwrite
alert(obj1.msg); //=>'Hello'

// case 3:
var obj1 = {data: { msg : 'Hello'}}
var obj2 = Object.create(obj1);
obj2.data.msg = "Hi!"; //overwrites, Why?
alert(obj1.data.msg); //=>'Hi!' 
```

我认为`Object.create()`只是让两者都指向同一个原型，而赋值使两个对象都指向同一个位置（不仅仅是原型）。 *但是为什么在案例 3 中数据对象会被覆盖呢？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T08:02:16.197

因为`Object.create()`只创建一个浅拷贝，嵌套对象仍然被引用而不是深度拷贝，参见[15.2.3.5](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.5) ( `Object.create()`) 和[15.2.2.1](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.2.1) ( `new Object()`)。

如果您想完全克隆一个对象，请查看[如何正确克隆 JavaScript 对象？](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)和类似的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T11:39:31.607

`var obj2 = Object.create(obj1)`创建一个以 obj1 作为其原型的空（！）对象。

`obj2.msg = "Hi!"`将属性 msg 添加（！）到 obj2。

`obj2.data.msg = "Hi!"`在 obj2 上查找属性数据，但 obj2 为空。所以它在 obj2 的原型上查找属性数据，它恰好是 obj1。然后它将 obj1.data 上的 msg 更改为“Hi”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T05:30:40.920

发生这种情况是因为 java 脚本设置和检索属性的方式。要获取属性，它会查找原型链，而将其设置在最本地的对象上。

在情况 2 中，这就是它不覆盖的原因。它将 msg 属性设置为 obj2。在情况 3 中，它在父对象中获取数据对象并在那里设置属性。因此它被覆盖。在情况 1 中，它们都在引用对同一个对象

# linux - Chown 不能处理外部驱动器中的文件？

> ID：15308550
> 
> 赞同：2
> 
> 时间：2013-03-09T07:57:30.393
> 
> 标签：linux, mount, chown

我首先安装了一个 WD Elements 驱动器

```
sudo mount /dev/sdb1 /media/elements 
```

然后，在挂载的驱动器下创建了一个测试文件

```
touch test 
```

并得到

```
-rwxrwxrwx 1 zhijia zhijia  0 2013-03-09 02:53 test 
```

然后我试图改变它的主人

```
sudo chown mysql:mysql test 
```

但主人一点都没变。什么原因？如何解决？

下面是`mount`：

```
/dev/sda1 on / type ext4 (rw,errors=remount-ro)
proc on /proc type proc (rw,noexec,nosuid,nodev)
none on /sys type sysfs (rw,noexec,nosuid,nodev)
none on /sys/fs/fuse/connections type fusectl (rw)
none on /sys/kernel/debug type debugfs (rw)
none on /sys/kernel/security type securityfs (rw)
none on /dev type devtmpfs (rw,mode=0755)
none on /dev/pts type devpts (rw,noexec,nosuid,gid=5,mode=0620)
none on /dev/shm type tmpfs (rw,nosuid,nodev)
none on /var/run type tmpfs (rw,nosuid,mode=0755)
none on /var/lock type tmpfs (rw,noexec,nosuid,nodev)
none on /lib/init/rw type tmpfs (rw,nosuid,mode=0755)
none on /var/lib/ureadahead/debugfs type debugfs (rw,relatime)
binfmt_misc on /proc/sys/fs/binfmt_misc type binfmt_misc (rw,noexec,nosuid,nodev)
gvfs-fuse-daemon on /home/zhijia/.gvfs type fuse.gvfs-fuse-daemon (rw,nosuid,nodev,user=zhijia)
/dev/sdb1 on /media/Elements type fuseblk (rw,nosuid,nodev,allow_other,blksize=4096,default_permissions)
/dev/sdb1 on /media/elements type fuseblk (rw,nosuid,nodev,allow_other,blksize=4096) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T08:04:40.323

对于 linux，外部/内部硬盘驱动器没有区别，重要的是文件系统。忘记 chown 和 chmod，它们仅在文件系统支持 unix 样式权限时才有效，而正如您所发现的，Windows 文件系统不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T15:25:10.277

不要使用 mount，使用 ntfs-3g： sudo ntfs-3g /dev/sdb1 /media/elements 您可能需要使用 apt-get 等 (yum) 安装 ntfs-3g。

# android - Android：ListView 上的 ClassCastException

> ID：15308564
> 
> 赞同：0
> 
> 时间：2013-03-09T07:59:35.543
> 
> 标签：android, android-listview

我有一个带有 TextView 和 Checkbox（带有按钮图像）的自定义 ListView，当单击 textview 时，隐藏的布局会针对该特定行展开，当单击复选框时，该特定行被选中进行删除。`ClasCcastException`当我将视图标记为 CheckBox 的`ViewHolder`类对象时，我得到了这个。这是我的代码，`holder``OnCheckedChangeListener`

**CustomListView.class**

```
public View getView(final int position, View convertView, ViewGroup parent) {
    holder = null;
    DataFields rowItems = (DataFields) getItem(position);

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.home_field_row, null);

        holder = new ViewHolder();
        holder.dataFields = items.get(position);
        holder.mName = (TextView) convertView
                .findViewById(R.id.hmFieldName);
        holder.mDeleteCheck = (CheckBox) convertView
                .findViewById(R.id.deleteCheck);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.mDeleteCheck.setTag(position);
    holder.mName.setTag(position);

    holder.mName.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

                holder = (ViewHolder) ((View) v.getParent()).getTag(); //Works fine here
                ...
        }
    });

    holder.mDeleteCheck
            .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {

                    holder = (ViewHolder) ((View) buttonView.getParent()).getTag(); //throwing ClassCastException
                    ...
                }
            });

    holder.mName.setText(rowItems.getName());
    holder.mDeleteCheck.setChecked(deletePositions[position]);

    return convertView;
} 
```

我希望我的问题很清楚。非常感谢任何形式的帮助或建议。谢谢 ！

**编辑**

日志猫 -

```
03-09 12:08:45.789: E/AndroidRuntime(3661): FATAL EXCEPTION: main
03-09 12:08:45.789: E/AndroidRuntime(3661): java.lang.ClassCastException: java.lang.Integer
03-09 12:08:45.789: E/AndroidRuntime(3661):     at com.inkers.forgetpassword.utility.CustomListArrayAdapter$1.onCheckedChanged(CustomListArrayAdapter.java:173)
03-09 12:08:45.789: E/AndroidRuntime(3661):     at android.widget.CompoundButton.setChecked(CompoundButton.java:124)
03-09 12:08:45.789: E/AndroidRuntime(3661):     at android.widget.CompoundButton.toggle(CompoundButton.java:86)
03-09 12:08:45.789: E/AndroidRuntime(3661):     at android.widget.CompoundButton.performClick(CompoundButton.java:98) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:41:52.617

在没有看到您的布局 xml 文件的情况下，我只能猜测，但您的复选框似乎不像您的 TextView 那样是根视图（行视图组）的直接子级。

所以首先：检查这个层次结构：复选框和根视图组之间是否有另一个视图组？（由 checkbox.getParent 指向并导致 classcastException 的那个）

第二：您应该考虑简化此代码，您尝试实现的目标似乎有点复杂......

第三：如果您想要更好的答案，请显示 lawout xml 文件；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:12:28.003

什么是 buttonView，为什么你认为它的父级有一个标签是 ViewHolder 的实例？第二点是——使用 ViewHolder holder = null。这将防止在 OnClickListeners 中使用错误的持有者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:28:03.840

buttonview 的父级不包含视图持有者的标签。标签包含在列表项中。您将在项目点击侦听器上获得标签。

您可以使用要在单击复选框时显示的视图的 setVisibility(View.GONE)。

对于按钮视图的父级，您可以获得用于打开/关闭可见性的视图。

# ios - Phonegap Barcodescanner Plugin - 适用于 iPad 和 iPhone 的自定义 XIB

> ID：15308565
> 
> 赞同：2
> 
> 时间：2013-03-09T08:00:01.637
> 
> 标签：ios, cordova, phonegap-plugins

我已成功包含来自 [Github iOS Phonegap Plugins](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)**的 Phonegap Plugin** Barcodescanner 。

扫描方法有效。我已经在没有自定义 XIB 文件的情况下对其进行了测试。它在 iPad 和 iPhone 上都显示了一个很好的覆盖。

```
window.plugins.barcodeScanner.scan(success, fail) 
```

除了展示我按照说明一步一步操作的自定义 XIB

```
window.plugins.barcodeScanner.scan(success, fail, ["BarcodeOverlay"]) 
```

但我面临一个问题：我的自定义 XIB 在 iPad 或 iPhone 上看起来很奇怪。**有谁知道插件如何使用标准 XIB 处理这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T09:07:21.813

仅供参考 - 通过自定义 CDVBarcodeScanner.mm 类、方法 buildOverlayFromXib 解决了它

```
- (UIView *)buildOverlayViewFromXib 
{
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    // iPad-specific interface here
    self.alternateXib = @"BarcodeOverlay_iPad";
    [[NSBundle mainBundle] loadNibNamed:self.alternateXib owner:self options:NULL];
}
else if (IS_IPHONE_5) {
    self.alternateXib = @"BarcodeOverlay_iPhone5";
    [[NSBundle mainBundle] loadNibNamed:self.alternateXib owner:self options:NULL];
}
else
{
    // iPhone and iPod touch interface here
    self.alternateXib = @"BarcodeOverlay_iPhone";
    [[NSBundle mainBundle] loadNibNamed:self.alternateXib owner:self options:NULL];
}

if ( self.overlayView == nil )
{
    NSLog(@"%@", @"An error occurred loading the overlay xib.  It appears that the overlayView outlet is not set.");
    return nil;
}

return self.overlayView; 
```

}

# java - PrintWriter 不将文本打印到 .txt 文件

> ID：15308569
> 
> 赞同：2
> 
> 时间：2013-03-09T08:00:52.890
> 
> 标签：java, text, editor, printwriter

该程序要求输出文件名，似乎运行良好。直到我尝试使用文本编辑器或终端打开输出文件。然后我在该文件中看不到任何内容，只是空白文件。该程序创建文本文件，但文件为空。提前感谢您的帮助。

```
import java.util.*;
import java.io.IOException;
import java.io.PrintWriter;
/**
 * Writes a Memo file.
 * 
 */
public class MemoPadCreator {
  public static void main(String args[]) {
    Scanner console = new Scanner(System.in);
    System.out.print("Enter Output file name: ");
    String filename = console.nextLine();
  try {
    PrintWriter out = new PrintWriter(filename);

    boolean done = false;
    while (!done) {
      System.out.println("Memo topic (enter -1 to end):");
      String topic = console.nextLine();
      // Once -1 is entered, memo's will no longer be created.
      if (topic.equals("-1")) {
        done = true;
     console.close();
      }
      else {
        System.out.println("Memo text:");
        String message = console.nextLine();

        /* Create the new date object and obtain a dateStamp */
        Date now = new Date();
        String dateStamp = now.toString();

        out.println(topic + "\n" + dateStamp + "\n" + message);
      }
   }
    /* Close the output file */

  } catch (IOException exception) {
    System.out.println("Error processing the file:" + exception);
  }console.close();
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T08:10:24.310

用于`out.flush()`将内容刷新到文件中。

或者使用[PrintWriter](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.Writer%29)的自动刷新构造函数（**可能不是性能最好的选项**），但无论如何都是一个选项

```
public PrintWriter(Writer out,boolean autoFlush) 
```

> autoFlush - 一个布尔值；if `true`、`println`、`printf`或 format 方法将刷新输出缓冲区

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T08:57:00.363

你还没有关闭你的`PrintWriter`对象。您需要关闭流以将其反映在控制台或文件上（取决于您的 outputStream）

```
out.close(); 
```

即使你有

```
PrintWriter out = new PrintWriter(System.out);
...
...
...
out.close(); 
```

然后您需要关闭它，以便将输出写入控制台。
因此，在您的情况下，关闭流将写入文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T08:08:37.703

您需要刷新`PrintWriter`要从内存缓冲区写入文件的内容。

```
out.flush(); 
```

在任何情况下，您还应该始终关闭（释放）资源，否则锁定可以或将保留在文件上，具体取决于操作系统。并且`close()`还会自动刷新更改。

# symfony - 是否可以减少 Symfony 2 中的文件数量？

> ID：15308578
> 
> 赞同：-2
> 
> 时间：2013-03-09T08:02:38.787
> 
> 标签：symfony, symfony-2.1

我刚刚在 symfony 2 中开始了我的新项目，我想知道 Symfony 目录中有超过 6000 个文件。

*   可以吗？
*   是否可以减少文件数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T10:26:02.027

你说你想这样做是因为你使用 SVN。请查看这篇文档文章：“[如何在 Subversion 中创建和存储 Symfony2 项目](http://symfony.com/doc/current/cookbook/workflow/new_project_svn.html)”。将文件包含在存储库的供应商名称空间中是一种非常糟糕的做法。

除此之外，您无法从核心框架中减少文件数量。但是，您可以从 Symfony 标准版中删除一些第 3 方包/库。例如，如果您不使用 Assetic，只需删除该捆绑包和库。包含的 JMS 包非常有用，但如果您不使用它们：只需将它们从`composer.json`文件中删除即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:17:51.933

拥有超过 6000 个文件并不意味着所有这些代码都会在您运行应用程序时执行。大多数文件将位于放置第三方库的供应商文件夹中。它可能包含文档文件、测试等，这在生产中可能并不重要。如果你愿意，你可以摆脱它们，但这样做没有意义。光盘现在很便宜

# flume - Apache Flume 设置复杂性

> ID：15308581
> 
> 赞同：0
> 
> 时间：2013-03-09T08:02:45.033
> 
> 标签：flume

周围有许多开源消息传递系统，每个都有自己的设置步骤。这个问题是关于 Apache Flume 的，以及一个非常简单的用例——在两台服务器之间移动数据。安装和配置 Flume 仅在两台服务器之间移动数据需要多少步骤，以及在每个步骤中要做出多少决策？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:09:36.087

您需要为您的操作系统下载二进制 zip，解压缩并创建一个类似于 Java 中的属性文件的配置文件。

代理的安装和运行是一个简单的过程，只需阅读[Flume 用户设置指南](http://flume.apache.org/FlumeUserGuide.html#setup)

# javascript - 当我在javascript中按下时如何延迟功能？

> ID：15308593
> 
> 赞同：-2
> 
> 时间：2013-03-09T08:04:24.273
> 
> 标签：javascript, jquery, function, settimeout, delay

我有一个搜索位置，当我输入它时开始搜索，这很好，但我希望当我按下输入时，功能在 2 秒后启动。

我正在使用`setTimeout`，但它不能正常工作。

我能做些什么 ？

表格：

```
<form id="search" method="get">
  <input id="searchplace" type="text" size="40" value="" placeholder="xxxx" />
</form> 
```

JavaScript

```
$("#search").keypress(function(event){
  if(event.keyCode == 13){
    $('.menu-bg').addClass('loading');      
    var x = $("#searchplace").val();

    setTimeout(m(),2000);

    function m(){
      $('.tabs').remove();
      window.location="search.php?page=noajax&q="+x;
      return false;
    };  
  }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T08:05:35.343

您需要将处理程序引用传递给 setTimout 不需要调用处理程序。在`m()`您重定向到其他页面？

改变

```
setTimeout(m(),2000); 
```

到

```
setTimeout(m,2000); 
```

还要在事件按键之外定义 m()

```
var x;
$("#search").keypress(function(event){

  if(event.keyCode == 13){

     $('.menu-bg').addClass('loading');     
     x = $("#searchplace").val();
     setTimeout(m,2000);   

  }
});

function m(){
   $('.tabs').remove();
   window.location="search.php?page=noajax&q="+x;    
   return false;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:07:43.763

试试这个

```
setTimeout(m, 2000); 
```

没有`()`

# twig - 致命错误：允许的内存大小为 33554432 字节已用尽（尝试分配 72 字节）

> ID：15308596
> 
> 赞同：5
> 
> 时间：2013-03-09T08:04:42.980
> 
> 标签：twig, symfony-2.2

几天前，我启动了一个新的 Symfony2 应用程序，但遇到了一些缓存问题：

```
$ rm -rf ./app/cache/*
$ rm -rf ./app/logs/*
$ ./app/console cache:clear

Clearing the cache for the dev environment with debug true

Fatal error: Allowed memory size of 33554432 bytes exhausted (tried to allocate 72 bytes) in /Users/simonegentili/Development/Www/shop_website/vendor/twig/twig/lib/Twig/Node/Text.php on line 23 
```

和 ...

```
$ ./app/console cache:clear --env=prod 
```

工作正常。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T12:22:07.033

我过去有这样的问题。看起来对于大型项目，这个 CLI 脚本试图做太多的工作。正如我发现在这种情况下可能设置的可用内存量：

```
sudo php -d memory_limit=256M app/console cache:clear 
```

# ruby-on-rails - 在 Ruby on Rails Web 应用程序中插入页眉和页脚？

> ID：15308604
> 
> 赞同：33
> 
> 时间：2013-03-09T08:05:20.187
> 
> 标签：ruby-on-rails, web-applications, include

我来自 PHP 开发，我正在尝试学习 Ruby on Rails。我想知道插入页眉和页脚的最佳做法是什么？通常在 PHP 中我会做`include('header.php');`然后`include('footer.php');`

现在我正在尝试学习 Ruby on Rails 并尝试了解我应该如何或在哪里放置这些页眉/页脚文件？

我创建了一个新应用程序

```
rails new new_app 
```

然后我生成了一个新的控制器

```
rails generate controller SignUp 
```

这创建了一些文件和文件夹。我在新`new_app/views/sign_up`文件夹中开发了一些 HTML，但我想在此页面和以后的页面中包含页眉和页脚。我应该在哪里拥有这些文件？在同一个文件夹中？或在默认文件夹下`new_app/views/layouts`？另外，创建文件后如何包含文件？

我是 ruby​​ on rails 开发的新手，我想从专家那里获得一些知识！谢谢！

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-09T08:08:27.790

在`new_app/views/layouts`里面会有一个文件叫做`application.html.erb`. 打开那个文件，把你的页眉内容放在上面写的地方，把`<%= yield>`页脚内容放在下面`<%=yield>`。

我通常在名为的布局文件中创建一个parital，`_header.html.erb`然后`_footer.html.erb`执行以下操作：-

```
<%= render "layouts/header" %>
<%=yield %>
<%= render "layouts/footer" %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T08:09:48.273

如果您有动态内容，您可以为页眉和页脚创建一个部分，并将它们包含`render`在布局文件中。否则，您可以只编辑布局文件以具有页眉和页脚。

Your scaffold generated views for SignUp, will all use the layout file to render the final HTML, so everything in the `app/views/layouts/application.html.erb` file will get included in the output (assuming that you are using this file as the layout file for your view).

# c# - 访问外部聚合类的最佳实践

> ID：15308608
> 
> 赞同：1
> 
> 时间：2013-03-09T08:05:59.643
> 
> 标签：c#, wpf, class

我目前正在开发一个 WPF 应用程序，该应用程序的主窗口包含一个面板，其内容可以互换以显示不同的用户控件。基本上，这只是意味着我有一个带有持续可见侧边栏的菜单。

我的问题是关于减少我的类之间的耦合。我的主窗口中有一个通知部分（以 ListBox 的形式），可以在其中弹出消息。可以从某些用户控件 (UC) 中发生的操作“触发”通知。这些用户控件当然是主窗口类的成员。

由于我需要影响主窗口类中的 ListBox 控件，我想知道**最佳实践**是什么。显然，最简单的解决方案就是通过它们的构造函数向每个 UC 传递对主窗口的引用，但这在许多层面上似乎不是很有效。我当然只能传递 ListBox 元素，但这也不起作用，因为我必须对添加到 ListBox 的数据执行操作，因此我必须以编程方式在每个 UC 中重复这些指令。

我可以使用一个引用 ListBox 并实现通知方法的单例，但我已经在我的项目中有更多我喜欢的单例（而且我不希望每个人都能够访问这些方法，只有某些 UC）。

另一种方法是通过相关 UC 的构造函数传递一个通知管理器实例（将执行相同的工作）。反过来，该经理将拥有将 UC 链接到主窗口的所有必要方法。

可能还有我没有想到的其他更有效的解决方案。我希望您对这种情况下的最佳实践提出意见，特别是考虑到它生成的类耦合。它可能与这个特定问题有关，但是以更一般的方式考虑它，内部聚合类需要访问外部的一些资源。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:46:22.440

`UserControl`我喜欢 Jesse 提出事件的想法：它非常类似于 WPF，并且允许需要记录内容的窗口与提供日志记录的窗口之间松散耦合。此外，进行日志记录的用户控件不依赖于实际可用的日志记录服务，这将使解决方案更加灵活。

## 这将如何工作

`UserControl`需要记录的只是引发一个包含相关信息（要记录的文本消息）的冒泡事件。UC 将不知道如何处理或即使处理该消息，它只是提出它。这是一个轻量级的操作，并且耦合是最小的。

引发的消息在层次结构链中向上冒泡，一直到顶级元素 ( `Window`, `Page`)。在此过程中的任何地方，元素都可以为此事件类型提供处理程序，并通过它获得有关日志请求的通知。同样，耦合非常松散：实现的地方并不关心谁发送了消息。可以是 UserControl 或其他任何东西。

## 问题

如果 an`UIElement`可用作日志消息事件的来源，这绝对可以正常工作。

## 下面是一步一步的实现：

## 日志服务类

我们不能为此目的重用现有事件，需要创建一个新事件（以避免混淆）。这应该这样做：

```
// Subclass of RoutedEventArgs that allows us to easily and nicely pass the message
// to be logged
public class LogEventArgs : RoutedEventArgs
{
    public string Msg { get; set; }
    public LogEventArgs(RoutedEvent routedEvent, Object sender, string Msg)
        :base(routedEvent, sender)
    {
        this.Msg = Msg;
    }
}

// This is the Delegate that's used to grab the Log message
public delegate void RoutedLogEventHandler(Object sender, RoutedEventArgs e);

// This works as the abstraction layer that will allow UC's to raise LOG messages
// and allow your implementation to alter the way it handles those LOG messages.
// Since we're doing this with a routed event, we need an DependencyObject to
// reigster it.
public class LogServices :UIElement
{        
    public static RoutedEvent LogEvent;

    // Static constructor, registers the event
    static LogServices()
    {
        LogEvent = EventManager.RegisterRoutedEvent("Log", RoutingStrategy.Bubble, typeof(RoutedLogEventHandler), typeof(UIElement));
    }

    // This helps raise the relevant shared event
    public static void RaiseLog(string Msg, UIElement sender)
    {
        sender.RaiseEvent(new LogEventArgs(LogEvent, sender, Msg)); 
    }

} 
```

上面的代码声明了子类，`RoutedEventArgs`因为我们需要传递我们的字符串 Message。然后它创建一个接受我们`LogEventArgs`参数的新委托类型，最后从`LogServices`.

## 如何发送事件

发送事件非常简单。这是按钮的 Click 处理程序：

```
LogServices.RaiseLog("Message to be logged.", sender as Button) 
```

## 接收事件

我们的事件被注册为“冒泡”事件：它将从我们引发它的控件开始，并让每个父级都有机会处理它，一直到窗口。最简单的事情是在进行`Window`日志记录的事件中处理事件。不幸的是，这种类型的共享不能直接从 中设置`XAML`，它需要从代码中分配。这就是我尝试从 分配它的方式`XAML`，但它不起作用：

```
<Grid local:LogService.Log="HandlerName" /> 
```

下一个选项是从代码中分配它。这是我的测试中的一个片段`Window1`：

```
 // Window Constructor
    public MainWindow()
    {
        InitializeComponent();
        // Set the event handler.
        base.AddHandler(LogServices.LogEvent, new RoutedLogEventHandler(HandleMsgLog));
    }

    // This is the actual handler.
    public void HandleMsgLog(Object sender, RoutedEventArgs e)
    {
        // Put the received message into the ListBox
        LB.Items.Add((e as LogEventArgs).Msg);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:25:13.417

您可以阅读观察者模式（[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)），但这种模式比您的情况更广泛使用。

在您的情况下，我认为好的变体是：

1) 另一种方法是通过相关 UC 的构造函数传递一个通知管理器实例（将执行相同的工作）。反过来，该经理将拥有将 UC 链接到主窗口的所有必要方法。（C）

2) 所有 UC 必须实现与“NotificationRaised”等事件的接口，并且在您的主窗口中您需要订阅此事件。杰西在评论你的问题时说

# google-plus - Google + API 根据位置获取帖子

> ID：15308612
> 
> 赞同：0
> 
> 时间：2013-03-09T08:06:25.133
> 
> 标签：google-plus, google-data-api

谢谢你的时间。我正在用google plus data api编写一个应用程序。我需要帮助。我需要从特定位置的用户那里获取所有公开帖子。您有什么方法可以从某个位置而不是关键字搜索帖子。

请回复。谢谢， 帕瓦西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:50:27.470

不幸的是，我们目前不提供此功能。`activities.search`您可以在[https://developers.google.com/+/api/latest/activities/search](https://developers.google.com/+/api/latest/activities/search)了解所有相关信息。

但是，我们一直在寻求改进我们的 API。随时在我们的问题跟踪器中为这个现有的功能请求加注星标，您将收到有关此问题的更新。 [https://code.google.com/p/google-plus-platform/issues/detail?id=33](https://code.google.com/p/google-plus-platform/issues/detail?id=33)

现在我们的 Google+ 登录功能已经完成，我们将使用问题跟踪器作为开发人员错误和功能请求的主要资源。

# ruby-on-rails - 动态地向 Rails 路由添加约束

> ID：15308618
> 
> 赞同：0
> 
> 时间：2013-03-09T08:07:26.040
> 
> 标签：ruby-on-rails, routes, constraints, monkeypatching

我想写一个插件，需要做一个猴子补丁来添加对在 rails application routes.rb 定义的所有路由的约束

我尝试在我的猴子补丁中执行以下代码，但这不起作用。什么是正确的方法？

```
Rails.configuration.to_prepare do
  RedmineApp::Application.routes.routes.each do |route|
    route.app.constraints << lambda{ |request| request.subdomains.first == 'admin' }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:09:54.927

来自 RoR 指南：高级约束：

> “你可以提供一个响应匹配的对象吗？” [http://guides.rubyonrails.org/routing.html#advanced-constraints](http://guides.rubyonrails.org/routing.html#advanced-constraints)

```
TwitterClone::Application.routes.draw do
  match "*path" => "blacklist#index",
    :constraints => BlacklistConstraint.new
end 
```

# c# - 文本框日期验证

> ID：15308620
> 
> 赞同：0
> 
> 时间：2013-03-09T08:07:40.340
> 
> 标签：c#, winforms, date, textbox, cultureinfo

我正在使用以下代码进行短日期验证。

```
DateTime dt = DateTime.Now;
Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("fr-FR");
if (DateTime.TryParse(textBox1.Text, out dt))
{ textBox1.Text = dt.ToShortDateString(); } 
```

但是有一个小问题，如果用户输入 1/1/1，输出看起来像 01/01/2001。

如果用户输入 1-1-1，输出看起来像 01/01/2001。因为我给的格式。

现在我想要什么，如果用户输入 1-1-1 输出应该是 01-01-2001。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:19:08.783

尝试这个：

```
dt.ToString(@"dd-MM-yyyy"); 
```

如果您想根据输入区分输出，我建议这样做：

```
if (textbox1.Text.Contains("/"))
{
    textBox1.Text = dt.ToString(@"dd/MM/yyyy");
}
else
{
    textBox1.Text = dt.ToString(@"dd-MM-yyyy");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:28:28.033

我不明白你为什么在这种情况下使用 TextBox 而不是[MaskedTextBox](http://msdn.microsoft.com/en-us/library/kkx4h3az.aspx)。我建议您为此使用 MaskedTTextBox。将两个 MaskedTextBox 从 ToolBox 拖放到您的 Form 并在 FormLoadEvent 中使用此代码

```
maskedTextBox1.Mask = "##/##/####";
maskedTextBox2.Mask = "##-##-####"; 
```

# ruby - 为什么`IRB`在发现任何致命错误时不退出？

> ID：15308621
> 
> 赞同：0
> 
> 时间：2013-03-09T08:07:41.417
> 
> 标签：ruby

假设我在名为“Sample.rb”的文件中编写了代码：

```
class Foo
def display()
p "hi"
end
end

Foo.new.display(1) 
```

我的程序`Sample.rb`肯定会结束，没有执行任何也放置在该方法中的后期执行，如果不处理它会出现以下错误：

```
#ArgumentError: wrong number of arguments (1 for 0)
#        from (irb):2:in `display'
#        from (irb):6
#       from C:/Ruby193/bin/irb:12:in `<main>' 
```

现在谈到另一点：

`IRB`本身也是一个程序。它接受下面的代码，也会产生如下相同的错误：

```
>> class Foo
>> def display()
>> p "hi"
>> end
>> end
#=> nil
>> Foo.new.display 1
#ArgumentError: wrong number of arguments (1 for 0)
#        from (irb):2:in `display'
#        from (irb):6
#        from C:/Ruby193/bin/irb:12:in `<main>'
>> 
```

为什么在这种情况下`IRB`，它本身并没有突然退出，而是在给我们做`Fatal error`as`Non- fatal`和 next提示？`>>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:11:59.987

如果*交互式*解释器在您输入错误时立即死亡，那就太糟糕了。因此，`irb`只需捕获您的错误，将它们打印出来，然后继续运行直到您退出。从技术上讲，这是通过`rescue`在解释器的主循环中设置一个来捕获您的错误并继续处理您的输入来实现的。

`rescue`另一方面，没有块的脚本将允许异常一直传播，直到它到达顶层并杀死脚本。如果您希望脚本以某种方式继续运行，您将需要使用`rescue`. 最好在脚本中出现致命错误，因为它有助于调试（例如，PHP 风格的“不惜一切代价继续”往往会掩盖错误并使调试变得比需要的更困难。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:13:04.680

错误在您的程序中，它引发了 Ruby 可以理解的异常（ArgumentError 是 irb 知道如何处理的错误）。

如果每次有人编写蹩脚的代码时它都会死掉，那将是一个糟糕的 REPL :)

# cuda - 为什么 cusparse 没有 cusparse cscmm?

> ID：15308625
> 
> 赞同：1
> 
> 时间：2013-03-09T08:08:12.920
> 
> 标签：cuda

cusparse 手册只提供了一个函数 cusparsecsrmm ，它将一个 CSR 格式的稀疏矩阵乘以一个密集矩阵，但是为什么它没有为 CSC 格式的稀疏矩阵提供一个 cusparsecscmm 函数（因为它是作为稀疏数据格式之一引入的）手册）？我错过了什么吗？

我按照 Eric 的建议进行了尝试，但失败了：

```
cusparse Error: 3 in cusparse_test.cpp at line 106 
```

错误代码 3 是

```
CUSPARSE_STATUS_INVALID_VALUE invalid parameters were passed (m,n,k,nnz<0 or ldb and ldc are incorrect). 
```

从手册。

以下是我的源代码：

```
#include <iostream>
#include <stdlib.h>
#include <cuda_runtime.h>
#include <cusparse_v2.h>

#include <gsl/gsl_blas.h>
#include <gsl/gsl_vector.h>
#include <gsl/gsl_matrix.h>

using namespace std;

#define TYPE double
#define Zratio 0.3 //The percentage of zero values
#define M 3
#define K 2
#define N 3

#define CALL_CUDA( err ) \
{ if (err != cudaSuccess) \
    {cout<<"cuda Error "<<err<<" in "<<__FILE__<<" at line "<<__LINE__<<"\n"; exit(EXIT_FAILURE); }\
}

static void HandleError( cusparseStatus_t err,
                         const char *file,
                         int line ) { 
    if (err != CUSPARSE_STATUS_SUCCESS) {
        cout<<"cusparse Error: "<<err<<" in "<<file<<" at line "<<line<<endl;
        exit( EXIT_FAILURE );
    }   
}
#define HANDLE_ERROR( err ) (HandleError( err, __FILE__, __LINE__ ))

int main()
{
    cout<<"M: "<<M<<"; K: "<<K<<"; N: "<<N<<endl;

    const TYPE alpha =1.0, beta = 0.0;
    int i,j,k;
    double dif;

    float elapsedTime;
    cudaEvent_t start,stop;
    CALL_CUDA( cudaEventCreate( &start ) );
    CALL_CUDA( cudaEventCreate( &stop ) );

    cusparseHandle_t hdl;
    HANDLE_ERROR(cusparseCreate(&hdl));
    cusparseMatDescr_t descr;
    HANDLE_ERROR(cusparseCreateMatDescr(&descr));
    HANDLE_ERROR(cusparseSetMatType(descr, CUSPARSE_MATRIX_TYPE_GENERAL));
    HANDLE_ERROR(cusparseSetMatIndexBase(descr, CUSPARSE_INDEX_BASE_ZERO));

    // Allocate host memory
    TYPE *A, *B, *Out, *x, *y;
    CALL_CUDA( cudaEventRecord( start, 0 ) );
    CALL_CUDA(cudaHostAlloc((void**)&A, M*K*sizeof(TYPE), cudaHostAllocMapped));
    CALL_CUDA(cudaHostAlloc((void**)&B, K*N*sizeof(TYPE), cudaHostAllocMapped));
    CALL_CUDA(cudaHostAlloc((void**)&Out, M*N*sizeof(TYPE), cudaHostAllocMapped));
    CALL_CUDA( cudaEventRecord( stop, 0 ) );
    CALL_CUDA( cudaEventSynchronize( stop ) );
    CALL_CUDA( cudaEventElapsedTime( &elapsedTime,start, stop ) );
    cout<<endl<<"Host allocation time: "<<elapsedTime<<" milliseconds"<<endl;
    TYPE randtmp;
    for(i=0; i<M; i++) for (j=0; j<K; j++) 
    {
        randtmp = (float)rand()/(float)RAND_MAX;
        A[j*M+i] = (randtmp<Zratio)?0:randtmp;
    }
    for(i=0; i<K; i++) for (j=0; j<N; j++) B[j*K+i] = (float)rand()/(float)RAND_MAX;

    cout<<"A:"<<endl; for (i=0; i<M; i++) {for (j=0; j<K; j++) cout<<A[j*M+i]<<" "; cout<<endl;}
    cout<<"B:"<<endl; for (i=0; i<K; i++) {for (j=0; j<N; j++) cout<<B[j*K+i]<<" "; cout<<endl;} cout<<endl;

    // Convert dense matrix to CSR format
    TYPE * cscVal;
    int * cscColPtr, * cscRowInd;
    int nnz, * nnzPerCol;
    CALL_CUDA(cudaHostAlloc((void**)&nnzPerCol, K*sizeof(int), cudaHostAllocMapped));
    HANDLE_ERROR(cusparseDnnz(hdl, CUSPARSE_DIRECTION_COLUMN, M, K, descr, A, M, nnzPerCol, &nnz));
    cout<<"A nnz "<<nnz<<endl;
    cout<<"A nnz per col: "; for (i=0; i<K; i++) cout<<nnzPerCol[i]<<" "; cout<<endl<<endl;
    CALL_CUDA(cudaMalloc((void**)&cscVal, nnz*sizeof(TYPE)));
    CALL_CUDA(cudaMalloc((void**)&cscColPtr, (K+1)*sizeof(int)));
    CALL_CUDA(cudaMalloc((void**)&cscRowInd, nnz*sizeof(int)));
    HANDLE_ERROR(cusparseDdense2csc(hdl, M, K, descr, A, M, nnzPerCol, cscVal, cscRowInd, cscColPtr));
    TYPE * hcscVal; int *hcscColPtr, *hcscRowInd;
    CALL_CUDA(cudaHostAlloc((void**)&hcscVal, nnz*sizeof(TYPE), cudaHostAllocMapped));
    CALL_CUDA(cudaHostAlloc((void**)&hcscColPtr, (K+1)*sizeof(int), cudaHostAllocMapped));
    CALL_CUDA(cudaHostAlloc((void**)&hcscRowInd, nnz*sizeof(int), cudaHostAllocMapped));
    CALL_CUDA(cudaMemcpy(hcscVal, cscVal, nnz*sizeof(TYPE), cudaMemcpyDeviceToHost));
    CALL_CUDA(cudaMemcpy(hcscColPtr, cscColPtr, (K+1)*sizeof(int), cudaMemcpyDeviceToHost));
    CALL_CUDA(cudaMemcpy(hcscRowInd, cscRowInd, nnz*sizeof(int), cudaMemcpyDeviceToHost));
    cout<<"cscVal: "<<endl; for (i=0; i<nnz; i++) cout<<hcscVal[i]<<" "; cout<<endl;
    cout<<"cscColPtr: "<<endl; for (i=0; i<K+1; i++) cout<<hcscColPtr[i]<<" "; cout<<endl;
    cout<<"cscRowInd: "<<endl; for (i=0; i<nnz; i++) cout<<hcscRowInd[i]<<" "; cout<<endl<<endl;

    // GPU-cusparse calculation
    TYPE *gB, *gOut;
    CALL_CUDA(cudaMalloc((void**)&gB,K*N*sizeof(TYPE)));
    CALL_CUDA(cudaMalloc((void**)&gOut,M*N*sizeof(TYPE)));
    CALL_CUDA(cudaMemcpy(gB, B, K*N*sizeof(TYPE), cudaMemcpyHostToDevice));
    HANDLE_ERROR(cusparseDcsrmm(hdl, CUSPARSE_OPERATION_TRANSPOSE, M, N, K, nnz, &alpha, descr, cscVal, cscColPtr, cscRowInd, gB, K, &beta, gOut, M));
    CALL_CUDA(cudaMemcpy(Out, gOut, M*N*sizeof(TYPE), cudaMemcpyDeviceToHost));
    cout<<"Out:"<<endl; for (i=0; i<M; i++) {for (j=0; j<N; j++) cout<<Out[j*M+i]<<" "; cout<<endl;}; cout<<endl;

    //clean up
    CALL_CUDA(cudaFreeHost(A));
    CALL_CUDA(cudaFreeHost(B));
    CALL_CUDA(cudaFreeHost(hcscVal));
    CALL_CUDA(cudaFreeHost(hcscColPtr));
    CALL_CUDA(cudaFreeHost(hcscRowInd));
    CALL_CUDA(cudaFreeHost(Out));
    CALL_CUDA(cudaFree(gB));
    CALL_CUDA(cudaFree(cscVal));
    CALL_CUDA(cudaFree(cscColPtr));
    CALL_CUDA(cudaFree(cscRowInd));
    CALL_CUDA(cudaFree(gOut));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:52:29.473

因为没有必要提供单独的`cscmm()`.

仅当您翻转参数时，现有的`csrmm()`才能执行将执行的确切操作。`cscmm()``cusparseOperation_t transA`

您可以这样做的原因是矩阵的 CSC 表示`A`与转置矩阵的 CSR 表示完全相同`A'`

# c# - 用于 M2M 监督的 C# 和 GSM 调制解调器？

> ID：15308628
> 
> 赞同：0
> 
> 时间：2013-03-09T08:08:41.277
> 
> 标签：c#

是否有用于 C# 和 GSM 调制解调器通信的课程。我尝试从设备发送短信，然后在 c# 上接收。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:17:35.370

尝试使用 GSMComm：[http ://gsmcomm-for-net-2-0.apponic.com/](http://gsmcomm-for-net-2-0.apponic.com/)

看看这个例子：

[http://www.codeproject.com/Articles/20420/How-To-Send-and-Receive-SMS-using-GSM-Modem](http://www.codeproject.com/Articles/20420/How-To-Send-and-Receive-SMS-using-GSM-Modem) （短信客户端和服务器是一个应用软件，用于发送和接收短信（短信))

和

[http://www.scampers.org/steve/sms/samples.htm](http://www.scampers.org/steve/sms/samples.htm)（短信源示例（适用于 GSM 手机））

# wolfram-mathematica - Mathematica delaunay 重叠

> ID：15308634
> 
> 赞同：1
> 
> 时间：2013-03-09T08:09:05.353
> 
> 标签：wolfram-mathematica, computational-geometry

我有一组要点：

```
 Data2D = {{-4.432561, 11.687700000000001}, 
   {-3., 5.196152}, 
   {-6.25,10.825320000000001}, 
   {-5.3412805,11.256510000000002}, 
   {-3.9550406666666666,9.523850666666668}, 
   {-3.4775203333333335,7.360001333333334},
   {-4.083333333333333, 7.072541333333334}}; 
```

当我调用 PlanarGraphPlot[Data2D] 时，元素 (3,5,7) 和 (2,3,6) 之间存在重叠。

这是图片“ [http://i.stack.imgur.com/gvVBQ.png](http://i.stack.imgur.com/gvVBQ.png) ”

当我添加

```
{-5.166666666666666, 8.948930666666667}, {-4.560853666666667,9.236390666666667} 
```

对于 Data2D，Mathematica 没有给出任何结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:25:42.420

对于它的价值，我可以复制结果。运行 PlanarGraphPlot[] 时，我也收到以下错误：

> CompiledFunction::cflist：生成的非张量对象；继续进行未编译的评估。

问题似乎出在 DelauneyTriangulation[] 函数中，因为在 Data2D 上运行该函数时出现相同的错误（和部分/无输出）。显然，据我所知，它失败的原因是因为你的一堆点太接近共线了。我尝试了以下方法，它就像一个魅力：

```
PlanarGraphPlot[Data2D + Table[ {Random[],Random[]}, {Length[Data2D]}]] 
```

当然，这不是您想要的，而且 Mathematica 函数应该可以毫无障碍地做正确的事情。我会就此提交一份错误报告，但我不会屏息以待它很快就会得到修复。在那之前，实现您自己的[三角测量算法](http://en.wikipedia.org/wiki/Delaunay_triangulation#Algorithms)可能会更容易。

# sql - 有没有办法将文本文件放入数据库（SQLite）？

> ID：15308636
> 
> 赞同：2
> 
> 时间：2013-03-09T08:09:30.423
> 
> 标签：sql, sqlite

如果我的问题含糊不清，我很抱歉。所以基本上我有一堆文本文件，其中包含各种长度的文本。

我想知道是否有办法将文本文件“放入”数据库。

重要的是我需要保留文本文件的名称和文本文件中的内容。

尽管我知道 sql 的基本命令，但我没有将这种语言应用到实际应用中的经验。

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:31:18.807

您可以设置一个包含两列的表格。第一列是NAME，用于存储文件的名称。此列的数据类型是 VARCHAR。您可以将 VARCHAR 的最大长度设置为适当的值。此数据类型支持可变长度的字符，直到您指定的最大长度。第二列是CONTENT，用来存放文件的内容。此列的类型是 BLOB。这种数据类型支持大长度的二进制数据（确切的长度取决于您使用的数据库，但给出一个想法，大小约为千兆字节）。

之后，您可以创建一个使用 JDBC 将文件插入此表的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:15:08.783

```
sqlite3 newdb 
```

打开一个名为“olddb”的现有 sqlite 数据库：

```
sqlite3 olddb 
```

创建新数据库或打开现有数据库后，您可以导入数据。首先使用 CREATE TABLE 语法创建表来保存您的数据，如果不存在的话。

然后在文本文件中设置分隔符/定界符：

```
.separator STRING 
```

其中 STRING 是分隔符。

然后将文本文件 FILE 中的数据导入到名为 TABLE 的表中：

```
.import FILE TABLE 
```

有关可用于 cmd 行工具的命令的详细信息，请参阅此内容：

[http://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html)

参考：[http ://sqlite.1065341.n5.nabble.com/importing-text-or-text-delimited-file-td33735.html](http://sqlite.1065341.n5.nabble.com/importing-text-or-text-delimited-file-td33735.html)

# android - 必要时部署？

> ID：15308639
> 
> 赞同：0
> 
> 时间：2013-03-09T08:09:42.303
> 
> 标签：android, qt, apk, aidl, qt-necessitas

我有以下问题：当我尝试从 necessitas 在实际设备上进行部署时，我无法通过 .apk 创建阶段。Ant 在找到 .aidl 文件后停止并出现错误。

这是我从 ant 得到的输出（我添加了一个 echo 来查看aidl 调用参数，所以它可能看起来不寻常）：

```
echo: started Sat Mar 09 08:54:26 CET 2013
     [echo] Handling aidl files...

echo: finished Sat Mar 09 08:54:26 CET 2013 (0ms)

echo: started Sat Mar 09 08:54:26 CET 2013
     [echo] executable="D:\necessitas\android-sdk\platform-tools\aidl.exe"
     [echo] framework="D:\necessitas\android-sdk\platforms\android-16\framework.aidl"
     [echo] libraryBinAidlFolderPathRefid="project.library.bin.aidl.folder.path"
     [echo] genFolder="D:\workspace\Test\android\gen"
     [echo] aidlOutFolder="D:\workspace\Test\android\bin\aidl"
     [echo] path="D:\workspace\Test\android\src"

echo: finished Sat Mar 09 08:54:26 CET 2013 (0ms)

aidl: started Sat Mar 09 08:54:26 CET 2013
     [aidl] Found 2 AIDL files.
     [aidl] Compiling 2 AIDL files.
Packaging Error: Command 'D:\necessitas/apache-ant-1.8.4/bin/ant.bat clean debug' failed.Exit code: 1
Error while building/deploying project Test (target: Necessitas Qt 4.8.2 for Android armv7a)
When executing step 'Packaging for Android' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:51:13.653

傻我。当我使用 1.8 时，包含 android 构建任务的 ant“.jar”是为 jre 1.7 构建的。只需安装 1.7 版本并更改 PATH 变量。

# c# - 项目比较页面 ASP.NET C#

> ID：15308650
> 
> 赞同：0
> 
> 时间：2013-03-09T08:11:26.943
> 
> 标签：c#, asp.net

我想像这样创建一个项目比较页面： [http ://www.autotrader.com/fyc/compare.jsp?sownerid=855612&end_year=2014&start_year=1981&keywordsfyc=&search_type=both&scarid=326877152&distance=10&default_sort=priceDESC&address=11413&sort_type=priceDESC&firstRecord= 1&num_records=25&seller_type=b&keywords_display=&compare=305557040&compare=319902555&compare=337325579](http://www.autotrader.com/fyc/compare.jsp?sownerid=855612&end_year=2014&start_year=1981&keywordsfyc=&search_type=both&scarid=326877152&distance=10&default_sort=priceDESC&address=11413&sort_type=priceDESC&firstRecord=1&num_records=25&seller_type=b&keywords_display=&compare=305557040&compare=319902555&compare=337325579)

（这是来自 autotraders.com 的比较页面）

我一直在搜索fourms一个星期，尝试所有可能的解决方案，有人说使用GridView，有人说使用ListView，我尝试了很多东西，自定义div css，但做不到。基本上，我想显示垂直行（并排行）而不是默认的水平行。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:16:06.693

> 您可以使用`Repeater`控制或`DataList`控制。

更多关于[中继器](http://www.c-sharpcorner.com/uploadfile/puranindia/repeater-controls-in-Asp-Net/)或[数据列表](http://www.codeproject.com/Articles/23559/Working-with-the-DataList-Control)

> 我会亲自去`Repeater`。
> 
> 例子：

```
<asp:Repeater ID="ExampleRepeater" runat="server" >
    <HeaderTemplate>
        <table>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:Label runat="server" ID="lblCategory" Text='<%# Eval("YouColumnName") %>' > </asp:Label>
            </td>

            <td>
                <asp:ImageButton ID="imgButton" runat="server" ImageUrl='<% #Eval("YourImageColumn %>'></asp:ImageButton>
            </td>
            <td>
                <asp:Label runat="server" ID="lblOtherInfo" Text='<%# Eval("YouColumnName") %>' > </asp:Label>
            </td>
       </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:38:43.090

我认为您可以使用此[答案](https://stackoverflow.com/questions/14525914/how-to-make-a-comparison-html-table-using-asp-repeater-data-rotation)来解决您的问题。它有效，我检查了它。并用[这篇文章](http://www.webanddesigners.com/50-product-comparison-tables-in-web-design/)来设计你的对照表

# c# - 如何重现无限期阻塞的线程之一（按照邮政编码）？

> ID：15308657
> 
> 赞同：1
> 
> 时间：2013-03-09T08:12:32.137
> 
> 标签：c#, .net, multithreading, synchronization, autoresetevent

我试图理解这个问题（以及分别的答案）：

*   [ThreadA 和 ThreadB 都在同一个 AutoResetEvent 上按此顺序调用 WaitOne() - 设置事件时，为什么释放 ThreadB 而不是 ThreadA？](https://stackoverflow.com/questions/736310/threada-and-threadb-both-call-waitone-in-that-order-on-the-same-autoresetevent)

附上以下代码

代码中的注释告诉：

```
// set the event - I thought this would mean both waiting threads are allowed to continue
// BUT thread2 runs and thread1 stays blocked indefinitely 
```

但我不明白任何线程如何以及为什么可以无限期地阻塞......
我试图运行代码并且我没有观察到任何无限期的阻塞......

我在这个问题（以及相应的答案）中错过了什么？

```
private static void Test()
{
    // two threads - waiting for the same autoreset event
    // start it unset i.e. closed i.e. anything calling WaitOne() will block
    AutoResetEvent autoEvent = new AutoResetEvent(false);

    Thread thread1 = new Thread(new ThreadStart(WriteSomeMessageToTheConsole));
    thread1.Start();  // this will now block until we set the event

    Thread thread2 = new Thread(new ThreadStart(WriteSomeOtherMessageToTheConsole));
    thread2.Start();  // this will now also block until we set the event

    // simulate some other stuff
    Console.WriteLine("Doing stuff...");
    Thread.Sleep(5000);
    Console.WriteLine("Stuff done.");

    // set the event - I thought this would mean both waiting threads are allowed to continue
    // BUT thread2 runs and thread1 stays blocked indefinitely
    // So I guess I was wrong and that Set only releases one thread in WaitOne()?
    // And why thread2 first?
    autoEvent1.Set();
} 
```

更新：
我将此代码启动为：

```
using System;
using System.Threading;

namespace bothCallWaitOne
{
  class Program
  {
    static void Main(string[] args)
    {

      // two threads - waiting for the same autoreset event
      // start it unset i.e. closed i.e. anything calling WaitOne() will block
      AutoResetEvent autoEvent = new AutoResetEvent(false);

      WriteSomeMessageToTheConsole();
      Thread thread1 = new Thread(new ThreadStart(WriteSomeMessageToTheConsole));
      thread1.Name = "1111111111";
      thread1.Start();  // this will now block until we set the event

      //Thread thread2 = new Thread(new ThreadStart(WriteSomeOtherMessageToTheConsole));
      Thread thread2 = new Thread(new ThreadStart(WriteSomeOtherMessageToTheConsole));
      thread2.Name = "222222222222";
      thread2.Start();  // this will now also block until we set the event

      // simulate some other stuff
      Console.WriteLine("Doing stuff...");
      Thread.Sleep(5000);
      Console.WriteLine("Stuff done.");

      // set the event - I thought this would mean both waiting threads are allowed to continue
      // BUT thread2 runs and thread1 stays blocked indefinitely
      // So I guess I was wrong and that Set only releases one thread in WaitOne()?
      // And why thread2 first?
      autoEvent.Set();
      Console.ReadLine();
    }

    static void WriteSomeMessageToTheConsole()
    {
      Console.WriteLine(Thread.CurrentThread.Name);
    }
    static void WriteSomeOtherMessageToTheConsole()
    {
      Console.WriteLine(Thread.CurrentThread.Name);
    }

  }
} 
```

而且我没有观察到任何无限期的阻塞。

这是运行代码的输出：

```
Doing stuff...
222222222222
1111111111
Stuff done. 
```

**我应该如何运行（更新、更改、增加）代码以重现所讨论的主题（让一个线程被无限期阻塞）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:18:45.223

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)

*   AutoResetEvent 保持信号状态，直到一个**等待**线程被释放。

AutoResetEvent 用作旋转门。一次调用只`Set`释放*一个*线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:21:39.040

ARE是一种奇怪的野兽。如果你阅读它的 MSDN 条目，你会发现，如果在多个线程等待时发出一次信号，它只会释放一个等待线程。但是，如果在发出信号时没有线程在等待，则它不会保留信号的计数并且它会“丢失”。

这是手动重置事件和信号量之间的奇怪杂交。TBH，我发现它没有任何一个有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:31:34.520

这是重现问题的最终代码。

请注意，`autoEvent`不能是本地的，以便在其他方法中看到，它应该是静态的，以便从静态`Main()`和`Test()`方法中使用，然后从它的静态方法中“使用”：

```
using System;
using System.Threading;

namespace bothCallWaitOne
{
  class Program
  {
    static AutoResetEvent autoEvent = new AutoResetEvent(false);
    static void Main(string[] args)
    {
      Test();
      Console.ReadLine();
    }
    private static void Test()
    {
      // two threads - waiting for the same autoreset event
      // start it unset i.e. closed i.e. anything calling WaitOne() will block
      //AutoResetEvent autoEvent = new AutoResetEvent(false);

      //WriteSomeMessageToTheConsole();
      Thread thread1 = new Thread(new ThreadStart(WriteSomeMessageToTheConsole));
      thread1.Name = "1111111111";
      thread1.Start();  // this will now block until we set the event

      //Thread thread2 = new Thread(new ThreadStart(WriteSomeOtherMessageToTheConsole));
      Thread thread2 = new Thread(new ThreadStart(WriteSomeOtherMessageToTheConsole));
      thread2.Name = "222222222222";
      thread2.Start();  // this will now also block until we set the event

      // simulate some other stuff
      Console.WriteLine("Doing stuff...");
      Thread.Sleep(5000);
      Console.WriteLine("Stuff done.");

      // set the event - I thought this would mean both waiting threads are allowed to continue
      // BUT thread2 runs and thread1 stays blocked indefinitely
      // So I guess I was wrong and that Set only releases one thread in WaitOne()?
      // And why thread2 first?
      autoEvent.Set();
    }
    static void WriteSomeMessageToTheConsole()
    {
      autoEvent.WaitOne();//Cannot relve symbol autoEvent
      while(true)
        Console.WriteLine(Thread.CurrentThread.Name+"****");
    }
    static void WriteSomeOtherMessageToTheConsole()
    {
      autoEvent.WaitOne();//Cannot relve symbol autoEvent
      while(true)
      Console.WriteLine(Thread.CurrentThread.Name);
    }
  }
} 
```

# java - Rich:extendedDataTable中的行选择和数据处理

> ID：15308659
> 
> 赞同：1
> 
> 时间：2013-03-09T08:12:42.943
> 
> 标签：java, jsf-2, richfaces, spring-webflow-2

我正在与和`JSF2.0`合作。我有一个将显示数据列表（其中没有按钮）。我需要实现->`Spring-Webflow2.3.1``richfaces4.2.3``rich:extendedDataTable`

*   双击一行以在单独的屏幕中获取详细信息。

*   选择一行并单击“查看详细信息”按钮，该按钮还将在单独的屏幕中显示详细信息。

我可以取出行 id，但我需要获取对象中提供的 id 字段来获取数据。我将如何使用`spring-webflow`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:43:56.877

这是作为第二个要求的示例示例
选择一行并单击“查看详细信息”按钮，这将在单独的屏幕中显示详细信息。
我假设

1.  您的 pojo 类名称是**“YouPojoClass.java”**
2.  您的 pojo 类有**(member1,member2,code) 字段**
3.  您的 extendedDataTable 数据集将从**yourFirstController.rowVariableList** "List of YouPojoClass" 中获取
4.  您的第一页控制器名称“ **yourFirstController.java** ”
5.  您的第二个页面名称是“ **secondPage.xhtml** ”

// 在您的第一页屏幕中

```
<rich:extendedDataTable id="rowVariablepliersTable"
    value="#{yourFirstController.dataModel}" var="rowVariable">

    <rich:column width="300px">
        <f:facet name="header">
            <h:outputText value="member1" />            
        </f:facet>
        <h:outputText value="#{rowVariable.member1}" />
    </rich:column>

    <rich:column width="300px">
        <f:facet name="header">
            <h:outputText value="member2" />            
        </f:facet>
        <h:outputText value="#{rowVariable.member2}" />
    </rich:column>

    <rich:column width="90px">
        <f:facet name="header">
            <h:outputText value="view" />
        </f:facet>
        <h:commandButton 
            title="view" 
            value="view"
            action="#{yourFirstController.edit(rowVariable)}"/>
        </h:commandButton>
    </rich:column>
</rich:extendedDataTable> 
```

// 在你的第一个页面控制器中

```
public String view(YouPojoClass rowVariable) {      
    Map<String, Object> requestMap = FacesContext.getCurrentInstance().getExternalContext().getRequestMap();
    requestMap.put("SELECTED_ITEM_ID", rowVariable.getCode());  
    return "secondPage";
} 
```

// 在你的第二个页面控制器中

```
public void postConstruct() {
    Map<String, Object> requestMap = FacesContext.getCurrentInstance().getExternalContext().getRequestMap();
    String SELECTED_ITEM_ID = requestMap.get("SELECTED_ITEM_ID");
    // .....
} 
```

# facebook - Facebook - 去应用程序时如何显示授权框？

> ID：15308666
> 
> 赞同：-2
> 
> 时间：2013-03-09T08:13:48.227
> 
> 标签：facebook, login, authorization

我该如何进行这种登录？

例如[http://apps.facebook.com/badoocom](http://apps.facebook.com/badoocom) => 将显示一个自动授权框

我试过我的应用程序。

facebook 设置“画布和安全画布设置为此页面”index.php 在我的网站。

但是去apps.facebook.com/xxxxx =>显示一个空白年龄

但是如果我运行 wwww.mysite.com/index.php 它会显示一个授权框，但如果我去 apps.facebook.com/myapp 则不会

index.php $user = $facebook->getUser();

```
if ($user) {
try {
    // Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
error_log($e);
$user = null;
}
}

if ($user) {
 $logoutUrl = $facebook->getLogoutUrl();
 } else {
  $params = array(
   'scope' => 'email,user_birthday',
   'redirect_uri' => 'http://www.mysite.net/login_fb.php'
);
$loginUrl = $facebook->getLoginUrl($params);

 header("Location: " . $loginUrl);
} 
```

HTML 代码

```
echo "LOGGED IN";
more code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:20:06.713

```
echo "<script language=javascript>";
echo "top.location.href ='".$loginUrl."';";
echo "</script>";
exit(); 
```

代替

```
header($loginUrl); 
```

工作过

# c# - 解析文本的建议

> ID：15308667
> 
> 赞同：0
> 
> 时间：2013-03-09T08:14:28.880
> 
> 标签：c#, parsing, text

我有一个文本文件，其中包含如下文本：

```
#rn=three            rutid=svt#
#outgoing#
  sz          sucs        sw-loss     ans-comp    cong        dur-absy    
  0000000000  0000000000  0000000000  0000000000  0000000000  0000000000
  dsz         ratpt       ovfl        usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00008.00    00000.00    00008.00    00000.00    00000.00    00000.00  
#incoming#
  sz          sucs        ans-comp    usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00008.00    00000.00    00008.00    00000.00    00000.00    00000.00  

#rn=board            rutid=svt#
#outgoing#
  sz          sucs        sw-loss     ans-comp    cong        dur-absy    
  0000000000  0000000000  0000000000  0000000000  0000000000  0000000000
  dsz         ratpt       ovfl        usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  
#incoming#
  sz          sucs        ans-comp    usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  

#rn=conf6            rutid=svt#
#outgoing#
  sz          sucs        sw-loss     ans-comp    cong        dur-absy    
  0000000000  0000000000  0000000000  0000000000  0000000000  0000000000
  dsz         ratpt       ovfl        usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  
#incoming#
  sz          sucs        ans-comp    usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  

#rn=dtimon           rutid=svt#
#outgoing#
  sz          sucs        sw-loss     ans-comp    cong        dur-absy    
  0000000000  0000000000  0000000000  0000000000  0000000000  0000000000
  dsz         ratpt       ovfl        usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  
#incoming#
  sz          sucs        ans-comp    usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  

#rn=conf10           rutid=svt#
#outgoing#
  sz          sucs        sw-loss     ans-comp    cong        dur-absy    
  0000000000  0000000000  0000000000  0000000000  0000000000  0000000000
  dsz         ratpt       ovfl        usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  
#incoming#
  sz          sucs        ans-comp    usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  

#rn=rconf6           rutid=svt#
#outgoing#
  sz          sucs        sw-loss     ans-comp    cong        dur-absy    
  0000000000  0000000000  0000000000  0000000000  0000000000  0000000000
  dsz         ratpt       ovfl        usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00  
#incoming#
  sz          sucs        ans-comp    usg-bsy     usg-ovall   usg-ans     
  0000000000  0000000000  0000000000  00000.00    00000.00    00000.00  
  usg-idle    usg-mnt     usg-inst    usg-flt     usg-cns     usg-lock    
  00000.00    00000.00    00000.00    00000.00    00000.00    00000.00 
```

现在我想分析它，我必须将它转换为列表或数组。我有一个用模式解析每一行的想法，但我认为有一种我不知道的简单方法。如果您有解决方案，请帮助我我想要 ac# 解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:23:12.403

```
int counter = 0;
string line;

// Read the file and display it line by line.
using (StreamReader file = new System.IO.StreamReader("c:\\test.txt");
{
List<string> items = new List<string>();
while((line = file.ReadLine()) != null)
 {
   if (!line.Trim().StartsWith("#") && !line.Trim().StartsWith("0"))
   {
     string[] arr = line.Split('\t');  //each item
     items.Add(line);                  //or if you want the whole row
   } 

   counter++;
 }    
} 
```

# sql - 附加数据库时出现权限错误：“无法访问指定路径”

> ID：15308671
> 
> 赞同：19
> 
> 时间：2013-03-09T08:15:28.473
> 
> 标签：sql, sql-server, sql-server-2012, adventureworks

我正在运行 SQL Server 2012 企业版。我已经下载了 AdventureWorks 2012 OLTP 数据文件（`.mdf` 和`.ldf`）。我将它们保存到我在`My Documents`解压缩文件时创建的 AW 文件夹中。我转到 SQL Server Management Studio (SSMS) 右键单击​​数据库，然后单击上下文菜单中的附加。在对话框中，我单击查找。

UI 不允许我导航到文件夹。我尝试输入文件的完整路径，然后出现以下错误：

> *无法访问服务器上的指定路径或文件。验证您是否具有必要的安全权限并且该路径或文件存在。*

我关闭了 SSMS 并重新启动它，这次以管理员身份运行。同样糟糕的结果。

这不应该这么难。将 AdventureWorks2012 数据库成功附加到 SSMS 的具体步骤是什么？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-03T09:46:53.557

通过 Windows 身份验证连接到服务器对我有用。我不知道在你的情况下这是否可能。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-21T14:43:13.613

正如 Rogitel 所说，这可能与您登录 SSMS 本身的方式有关，而不是与应用程序的权限级别有关。

似乎，如果您的用户没有“sysadmin”角色，那么他们将没有足够的权限访问机器上的文件系统以打开文件浏览器。

暂时搁置安全问题......

为了授予这个角色；

1.  使用 Windows 身份验证登录 SSMS
2.  导航到安全->登录
3.  双击或右键单击并选择您感兴趣的用户的属性。
4.  在“选择页面”框中，选择“服务器角色”
5.  确保选择了“sysadmin”角色
6.  按确定保存更改并关闭对话框
7.  退出 SSMS
8.  重新打开 SSMS 并以您想要的用户身份登录，您现在应该有足够的权限来浏览。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-09T08:32:00.973

将您的文件放到数据库引擎数据文件的默认位置。如果你没有重新配置任何东西，它应该是

```
\Program Files\Microsoft SQL Server\MSSQL11.<InstanceID>\MSSQL\Data 
```

然后使用 SSMS 附加数据库。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-09T09:03:09.340

不管你开管理工作室的账号有什么权限，重要的是运行sql server服务的那个账号。默认情况下，它只能访问安装期间指定的默认位置，因此您可以按照上一张海报所说的方式将文件移动到那里，或者将服务帐户添加到要存储文件的文件夹的权限中以便它可以访问该位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-08T06:46:18.703

在我的情况下，它与驱动器不是 SQL Server 角色（集群服务器）的依赖关系有关。当我将磁盘添加为 SQL Server 角色下的依赖项时，我可以再次从 SSMS 浏览驱动器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-20T13:34:25.510

使用 'sa' 用户连接到 SQL 服务器对我来说很有效。不是每个人都有权这样做，因此请确保您用于 SQL 身份验证的用户具有所有必要的权限。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-01-09T07:58:29.923

只需在您的计算机中转到服务并搜索 MSSQLSERVER 通过停止和启动重新启动服务。

# android-fragments - 在 Fragment 中映射 Fragment V2

> ID：15308673
> 
> 赞同：3
> 
> 时间：2013-03-09T08:15:40.813
> 
> 标签：android-fragments, google-maps-android-api-2, mapfragment

我在 Google Map Fragments 中遇到了一些问题“getmap() 处的空指针异常”。我想在片段中插入 mapfragment 请查看代码并告知我是否采用了正确的方法......并让我知道我需要对我的代码做什么才能使其正常工作

我的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" 
  android:orientation="vertical"
  android:background="@drawable/bg2"
  android:weightSum="100">

<Button
    android:id="@+id/perx_button"
    android:layout_marginTop="70dip"
    android:layout_gravity="center"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/perx_card_btn" />

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" />

</LinearLayout>

public class PerxDetailedFragment extends SupportMapFragment {

  static final LatLng HAMBURG = new LatLng(53.558, 9.927);
  static final LatLng KIEL = new LatLng(53.551, 9.993);
 GoogleMap map;
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {

     FragmentTransaction ft = getFragmentManager().beginTransaction();

    map = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.map))
            .getMap();

    SupportMapFragment fmap = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.map);

    if (fmap == null) {
        fmap = SupportMapFragment.newInstance();
        ft.add(R.id.map, fmap);
    }

    ft.commit();

    Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG)
            .title("Hamburg"));
        Marker kiel = map.addMarker(new MarkerOptions()
            .position(KIEL)
            .title("Kiel")
            .snippet("Kiel is cool")
            .icon(BitmapDescriptorFactory
                .fromResource(R.drawable.ic_launcher)));

        // Move the camera instantly to hamburg with a zoom of 15.
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));

        // Zoom in, animating the camera.
        map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);

     return inflater.inflate(R.layout.perx_detailed, null, false);
}
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);       

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T23:10:03.357

您需要先膨胀布局。问题是您在 onCreateView 结束时执行此操作，因此当您调用 findFragmentById 时地图片段不存在。

此外，PerxDetailedFragment 应该扩展 Fragment，而不是 SupportMapFragment。

```
public class PerxDetailedFragment extends Fragment {
    // ...

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.perx_detailed, null, false);

        map = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.map))
            .getMap();

        //...

        return v;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:58:12.467

删除所有 fmap 代码：

```
SupportMapFragment fmap = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.map);

if (fmap == null) {
    fmap = SupportMapFragment.newInstance();
    ft.add(R.id.map, fmap);
} 
```

您已经将地图实例保存为“地图”变量，因此请使用该实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T10:56:19.753

您需要扩展 SupportMapFragment

```
public class MapFragment extends SupportMapFragment{

GoogleMap mGoogleMap;
Context mContext;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    mContext=getActivity();
    View rootView = inflater.inflate(R.layout.fragment_home, container, false);
    initializeMap(rootView);
    return rootView;
}
void initializeMap(View rootView)
{
    if (mGoogleMap == null) {
        mGoogleMap=((SupportMapFragment) getFragmentManager().findFragmentById(R.id.map4)).getMap();
        // Getting Map for the SupportMapFragment
        mGoogleMap.setMyLocationEnabled(true);
            if (mGoogleMap == null) {
            Toast.makeText(getActivity().getApplicationContext(),"Sorry! unable to create maps", Toast.LENGTH_SHORT)
                    .show();
        } else {
            setMapDefualtProp();

        }
    }else
        setMapDefualtProp();
}

private void setMapDefualtProp() {
    mGoogleMap.setMyLocationEnabled(true);
    mGoogleMap.setTrafficEnabled(true);
    mGoogleMap.getUiSettings().setMyLocationButtonEnabled(true);
    mGoogleMap.getUiSettings().setRotateGesturesEnabled(true);
    mGoogleMap.getUiSettings().setCompassEnabled(true);
    mGoogleMap.getUiSettings().setZoomGesturesEnabled(true);
    mGoogleMap.getUiSettings().setZoomControlsEnabled(true);        
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-06T15:47:36.517

```
gMap = ((MapFragment) getActivity().getFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

# php - href链接中的php空间

> ID：15308674
> 
> 赞同：-1
> 
> 时间：2013-03-09T08:15:46.467
> 
> 标签：php, html

php代码

```
 echo "<td><a href=?V*".$row['rec_title']."> ". $row['rec_title'] . "</a></td>"; 
```

html代码

```
<a href=?V*Venison with Frumenty(British)> Venison with Frumenty(British)</td> 
```

但是当我点击 -> Venison with frumenty (british) 链接是生成半链接示例 [http://ex.com/?Vension](http://ex.com/?Vension)

我想要像这样的完整链接 [http://ex.com/?Venison](http://ex.com/?Venison) with Frumenty(British)

如何解决这个问题请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:17:48.570

您应该使用 urlencode ( [http://php.net/urlencode](http://php.net/urlencode) ) 来显示这样的链接：

```
 echo "<td><a href=\"?V*".urlencode($row['rec_title'])."\"> ". $row['rec_title'] . "</a></td>"; 
```

urlencode 将替换`%20`为空格的两位十六进制表示的空格。您应该养成`urlencode`在这些情况下始终使用的习惯。

此外，正如 Devang 和 Class 所说 - 不要忘记您的属性值周围的引号。而不是`<a href=something></a>`做`<a href="something"></a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:18:12.767

您可以使用[`urlencode()`](http://in2.php.net/manual/en/function.urlencode.php)来实现相同的功能。

```
echo "<td><a href=?V*".urlencode($row['rec_title'])."> ". $row['rec_title'] . "</a></td>"; 
```

# perl - 关联数组：我试图弄清楚这段代码中发生了什么

> ID：15308680
> 
> 赞同：0
> 
> 时间：2013-03-09T08:16:31.433
> 
> 标签：perl

所以，我对 perl 还很陌生，想了解以下代码中说明的基本概念：

```
while (my ($key,$val)=each%{$vec1}){
    $num += $val*($$vec2{$key} || 0);
} 
```

其中 vec1, vec2 是关联数组。我特别想了解发生了什么：

```
each%{$vec1} and $$vec2{$key} 
```

我知道这与引用/取消引用哈希有关，所以我找到了这个链接： [http](http://www.thegeekstuff.com/2010/06/perl-hash-reference/) ://www.thegeekstuff.com/2010/06/perl-hash-reference/ ，但我真的不明白发生了什么在。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:24:19.397

`$vec1`是对哈希的引用。`%{$vec1}`得到这个哈希。应用于`each`哈希会在后续调用中提供（键，值）对。[每个](http://perldoc.perl.org/functions/each.html)

`$vec2{$key}``vec2`是key的哈希值`$key`。这个值本身就是一个引用，它被附加的 $ 解引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:24:01.940

> **`each%{$vec1}`**

`$vec1`是一个标量哈希引用。

`%{$vec1}`取消引用它。

最后，`each%{$vec1}`返回`key-value`pair。

* * *

> **$$vec2{$key}**

`$key`是一个`key`哈希`$vec2`。

因此，`$vec2{$key}`应该是`value`关键`$key`

最后，`$$vec2{$key}`是取消引用 scalar 的引用`$vec2{$key}`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:26:19.160

`each%{$vec1}`

$vect 是对哈希的引用，并`each`遍历哈希，因此如果使用`%{$vec1}`语法，则需要取消引用。`each`返回由哈希的下一个元素的键和值组成的 2 元素列表。

`$$vec2{$key}`

我们看不到 $vec2 变量的定义，以及您在其上存储的元素类型，但看起来这是一个 hash `%vec2`，存储对数字的标量引用

# python - Python：httplib 请求（）不起作用

> ID：15308681
> 
> 赞同：0
> 
> 时间：2013-03-09T08:16:35.710
> 
> 标签：python, httplib

我在使用 httplib 的 request() 方法时遇到问题。这真是一个奇怪的问题。我的代码如下所示：

```
query = "/search.json?q=&geocode=" + slat + "," + slong + "," + mline[2] + "km&rpp=" + mline[3]
conn = httplib.HTTPConnection("search.twitter.com")
conn.request("GET", query) #request here
r1 = conn.getresponse()
preresult = r1.read()

print preresult 
```

所以问题是，什么都没有打印出来。 `query`由大量连接的其他字符串组成。真正奇怪的是，如果我设置`query`为等于字符串的实际值（也就是说，实际上将其设置为等于说，`"/search.json?q=&geocode=27.5916,086.5640,100km&rpp=2"`而不是连接成吨的其他字符串），那么它会按应有的方式打印出来。我`query`通过`print query`在上面的代码中连接之后得到了这个值。所以为了清楚起见，以下工作正常（使用`print query`上面的值）：

```
query = "/search.json?q=&geocode=27.5916,086.5640,100km&rpp=2"
conn = httplib.HTTPConnection("search.twitter.com")
conn.request("GET", query) #request here
r1 = conn.getresponse()
preresult = r1.read()

print preresult 
```

的值`query`在两个实现中应该是相同的。我`query`在第一个实现中检查了 's type 以确保它是一个字符串。但他们给出了不同的结果。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:33:52.710

事实证明 mline[3] 最后有一些不可见的字符。它不是换行符或空格....但我只是先将其转换为 int，然后将其转换回字符串，多余的字符消失了，我的问题就消失了。感谢你的帮助。

# sql-server - 如何更改与sql server关联的帐户

> ID：15308685
> 
> 赞同：1
> 
> 时间：2013-03-09T08:17:27.320
> 
> 标签：sql-server, sql-server-2008, sqlconnection

我的 sql server 2008 有问题，在更改域上的用户名后，我无法连接到任何 sql server 实例。

所以我有一个域用户，它是我域帐户中的本地帐户，例如：（ **我的域帐户\localAccount）**

所以这是我用来连接到 sql server 实例的帐户

然后我的公司决定从我的计算机中删除本地帐户并要求我使用域帐户本身，因此它将是：**我的域帐户**

所以当我使用我的域帐户登录时，我无法连接到任何 sql server 实例，所以如何更改服务器帐户以访问我的数据库

请我搜索了很多，我没有找到有用的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:49:09.053

我不确定我是否正确理解了这个问题。您之前以一个帐户登录到 Windows 并连接到 SQL Server，但现在您以另一个无权连接到 SQL Server 的帐户登录到 Windows？那是对的吗？

如果是这种情况，那么您将必须以旧帐户登录 Windows，然后连接到 SQL Server，然后为具有适当服务器角色的新帐户创建一个受信任的登录名（我猜是 sysadmin）。

在 SQL Server Management Studio 的“对象资源管理器”窗格中，导航到安全性然后登录。双击旧帐户的登录名，单击“服务器角色”选项卡，记下勾选了哪些角色。右键单击登录名，选择新建登录名。输入新帐户的完整登录名（域\用户名，例如 ADVENTUREWORKS\Student）。在“服务器角色”选项卡上，选择适当的服务器角色。

# codeigniter - 使用 ImageMagick 的 Codeigniter

> ID：15308695
> 
> 赞同：0
> 
> 时间：2013-03-09T08:18:14.960
> 
> 标签：codeigniter, imagemagick

我知道 ImageMagick 可以与 codeigniter 一起使用。但是我应该将 imageMagick 的 dll 放在 codeigniter 文件夹的什么位置呢？我目前在 mac 上使用 codeiginiter。我搜索并得到了一些答案，其中 imageMagick 安装在 bin 文件夹中。如果我将网站上线，我还能使用 ImageMagick 吗？

我的目的是使用 ImageMagick 获取一些图像并进行叠加以生成一张图像并保存它。但是，当我尝试使用以下代码加载时，出现错误

```
 $config['image_library'] = 'ImageMagick';
    echo site_url();
    $config['source_image'] = site_url().'marcella-resources/front/img/M24CPP_x200/SBase1.jpg';
    $config['new_image'] = site_url().'marcella-resources/front/test/SBase1_copy.jpg';
    $config['maintain_ratio'] = TRUE;
    $config['width']     = 75;
    $config['height']   = 50;

    $this->load->library('image_lib', $config);

    if ( !$this->image_lib->resize())
    {
        echo $this->image_lib->display_errors();
        $this->image_lib->clear();
    } 
```

错误是

```
The path to the image is not correct.

The path to your image library is not correct. Please set the correct path in your image preferences. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:14:26.347

替换这些行：

```
$config['source_image'] = site_url().'marcella-resources/front/img/M24CPP_x200/SBase1.jpg';
$config['new_image'] = site_url().'marcella-resources/front/test/SBase1_copy.jpg'; 
```

这些行：

```
$config['source_image'] = 'marcella-resources/front/img/M24CPP_x200/SBase1.jpg';
$config['new_image'] = 'marcella-resources/front/test/SBase1_copy.jpg'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T11:38:18.473

当您上传源图像时，请放置服务器根路径，然后放置文件夹的完整路径。您不能使用网站网址。

将上传路径设置为：

```
$upload_path = $_SERVER["DOCUMENT_ROOT"]."marcella-resources/front/img/M24CPP_x200/"; 
```

然后试试这行：

```
$config['source_image'] = $_SERVER["DOCUMENT_ROOT"].'marcella-resources/front/img/M24CPP_x200/SBase1.jpg';
$config['new_image'] = $_SERVER["DOCUMENT_ROOT"].'marcella-resources/front/test/SBase1_copy.jpg'; 
```

那绝对有效。:)

# wcf - 如何使用 WebRole 在 Azure 下使用 WCF 配置 autofac

> ID：15308700
> 
> 赞同：0
> 
> 时间：2013-03-09T08:19:00.063
> 
> 标签：wcf, azure, autofac

我正在尝试为 Azure 配置一个简单的项目，以使用带有 Http 绑定的 WCF 服务，并使用 Autofac 的 WCF 集成。目前我正在本地测试并在 IIS (Azure) 下托管。

首先，我将项目设置为在没有 Autofac 的情况下运行，并且可以实例化服务并查看通过浏览器公开的 WSDL 端点。

然后我修改了服务 svc 文件并添加了工厂定义。

```
<%@ ServiceHost Language="C#" Debug="true" Service="EposDataService" Factory="Autofac.Integration.Wcf.AutofacServiceHostFactory, Autofac.Integration.Wcf" %> 
```

接下来我修改了 WebRole 类：

```
 public override void Run()
    {
        // This is a sample worker implementation. Replace with your logic.
        Trace.WriteLine("Worker entry point called", "Information");

        var builder = new ContainerBuilder();
        builder.RegisterModule(new ServiceModule());

        //using (m_Container = builder.Build())
        m_Container = builder.Build();
        //{
            AutofacHostFactory.Container = m_Container;
            while (true)
            {
                // sleep 30 minutes. we don't really need to do anything here.
                Thread.Sleep(1800000);
                Trace.WriteLine("Working", "Information");
            }
        //}    
    } 
```

但是，当我在本地部署服务并尝试访问服务时，出现错误：

```
The AutofacServiceHost.Container static property must be set before services can be instantiated.

Exception Details: System.InvalidOperationException: The AutofacServiceHost.Container static property must be set before services can be instantiated. 
```

我不明白的是静态属性是在 WebRole 中设置的，但看起来好像有什么东西正在重置分配。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:51:24.080

答案似乎是多种因素的结合。

首先，我将 Autofac 注册和引导从 WebRole 移至 Global.asax。这有助于解决我第一次收到的错误消息。

其次，我纠正了服务注册中的一个错误，并从以下位置重新配置了注册：

```
builder.RegisterType<EposDataService>().As<IEposDataService>() 
```

至

```
builder.RegisterType<EposDataService>().AsSelf(); 
```

参考：[-autofac wcf 注册错误](https://stackoverflow.com/questions/12143199/autofac-wcf-registration-error)

第三，我完全限定了 svc 中的服务名称。参考：

*   [http://jmonkee.net/wordpress/2011/09/05/autofac-wcfintegration-service-not-registered-with-the-autofac-container/](http://jmonkee.net/wordpress/2011/09/05/autofac-wcfintegration-service-not-registered-with-the-autofac-container/)
*   [https://code.google.com/p/autofac/issues/detail?id=76](https://code.google.com/p/autofac/issues/detail?id=76)

# jquery - JQuery Live vs On

> ID：15308704
> 
> 赞同：1
> 
> 时间：2013-03-09T08:20:58.697
> 
> 标签：jquery

我有下面的代码，它在 Live 上运行良好

```
 $('.numbersonly').live('keydown', function (e) {
    var key = e.charCode || e.keyCode || 0;
    return (key == 8 || key == 9 || key == 46 || (key >= 37 && key <= 40) ||
           (key >= 48 && key <= 57) || (key >= 96 && key <= 105));
}); 
```

我改成了 On

```
 $('.numbersonly').on('keydown', function (e) {
    var key = e.charCode || e.keyCode || 0;
    return (key == 8 || key == 9 || key == 46 || (key >= 37 && key <= 40) ||
           (key >= 48 && key <= 57) || (key >= 96 && key <= 105));
}); 
```

但是在 min.js 文件中出现脚本错误。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T08:22:50.853

将事件委托给父母`.numbersonly`或`document`其他人

```
$(document).on('keydown', '.numbersonly', function (e) {
    var key = e.charCode || e.keyCode || 0;
    return (key == 8 || key == 9 || key == 46 || (key >= 37 && key <= 40) ||
       (key >= 48 && key <= 57) || (key >= 96 && key <= 105));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:26:11.217

如果您使用 on 绑定事件，则事件将仅针对当前 DOM 元素（匹配您的选择器）绑定，因此建议使用 on 、'after' domready 事件。

例子：

```
 $(document).ready(function(){
         ...
         $('selector').on('event',eventHandler(e){
             ...
         });
  }); 
```

如果你使用 live，事件也会在修改 dom 树后绑定到匹配的元素。（例如，您使用 ajax 加载内容）

# c# - 使用一个存储过程从表中获取最后 N 行

> ID：15308706
> 
> 赞同：1
> 
> 时间：2013-03-09T08:21:04.223
> 
> 标签：c#, stored-procedures, sql-server-2012

我想用一个存储过程从表中获取最后 N 行。

我的存储过程有一些参数，比如`@PageNumber`和`@RowCount`等等。

我有两个问题：

*   我需要在我的用户界面中计算行数和结果，因为我想限制我的用户在他位于最后一页并按下一页时。

*   我希望我的用户在其他页面中时可以按最后一页。

**提示：**我不想执行我的存储过程两次来获取结果和行数，因为它会创建动态并且需要很长时间才能执行。

有关更多描述，我最常说我的 sp 是这样的：

```
Create Procedure TestSelectBill  
(  
    @PageNumber int = 1 ,  
    @RowCount int = 5  
)  
As  
Begin  
    Select   
        *  
    From billing.BillMaster As BM  
    Where  
    ( Bm.SubscribeId = '12345674' )  
    Order by SubscribeId  
    OFFSET @PageNumber * @RowCount ROWS  
    FETCH NEXT @RowCount ROWS ONLY;  
End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:02:51.647

您可以`Row_Number()`在查询和`SubscribeId`降序中使用，并且`row[0]["RowNumber"]`总计数如下：

```
Select
        *  ,
ROW_NUMBER() OVER ( ORDER BY SubscribeId DESC) as RowNumber
    From billing.BillMaster As BM  
    Where  
    ( Bm.SubscribeId = '12345674' )  
    Order by SubscribeId  
    OFFSET @PageNumber * @RowCount ROWS  
    FETCH NEXT @RowCount ROWS ONLY; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T21:53:02.643

那是我的解决方案：

```
Select
  COUNT() OVER ( ORDER BY (SELECT NULL)) as RowNumber,
    * 
From billing.BillMaster As BM  
Where  
( Bm.SubscribeId = '12345674' )  
Order by SubscribeId  
OFFSET (@PageNumber - 1) * @RowCount ROWS  
FETCH NEXT @RowCount ROWS ONLY; 
```

# php - 无法在函数中发送数组值

> ID：15308709
> 
> 赞同：-1
> 
> 时间：2013-03-09T08:21:29.767
> 
> 标签：php, javascript, arrays, function, params

我试图在参数化函数中发送一个数组值，但我不知道为什么我不能这样做。示例代码是：

```
<ul>
    <?php

    while ($row = mysqli_fetch_array($result, MYSQLI_BOTH)) {
        $photoname = $row['photoname'];
        $string    = array();
        $recreated = 'cmVjcmVhdGVk/';
        $thumb     = 'dGh1bWI=/';
        $original  = 'b3JpZ2luYWw=/';
        $filePath  = "albums/$album/$album$thumb";
        $dir       = opendir($filePath);
        while ($file = readdir($dir)) {
            $info = pathinfo($file);
            if (($info["extension"] == "jpg") || ($info["extension"] == "gif") || ($info["extension"] == "png")) {
                $string[] = $file;
            }
        }
    }
    while (sizeof($string) != 0) {
        $img         = array_pop($string);
        $fileBigPath = "albums/$album/$album$recreated";
        echo "<li class='ui-state-default'><a href='#' onclick='details(" . $img . "); return false'><img src='$filePath$img'></li>";
    }

    ?>
</ul>
</div></div>
<script>
    function details(id) {
        alert(id);
        params = "id=" + encodeURIComponent(id);
        alert(params);
        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        }
        else {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                lBackground = document.createElement('div')
                lBackground.className = "lBackground";
                lBackground.setAttribute("id", "lBackground");
                lBox = document.createElement('div');
                lBox.className = "lBox";
                lBox.setAttribute("id", "lBox");
                lContents = "";
                lContents = xmlhttp.responseText;
                lBox.innerHTML = lContents;
                document.body.appendChild(lBox);
                document.body.appendChild(lBackground);
            }
        }
        xmlhttp.open("POST", "abc.php", true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send(params);
    }
</script> 
```

这是示例代码。

我想要的是，我希望将文件名作为参数发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:37:55.533

将其更改为：

```
echo "<li class='ui-state-default'><a href='#' onclick='details(\"$img\"); return false'><img src='$filePath$img'></li>"; 
```

您在参数 to 周围缺少引号`details()`。

# python - 如何使用 uwsgi web.py 运行后台功能？

> ID：15308718
> 
> 赞同：3
> 
> 时间：2013-03-09T08:22:11.260
> 
> 标签：python, multithreading, web.py, uwsgi

假设有新评论时我需要给自己发送一封电子邮件。
而且我不想阻止 web.py 将 HTML 呈现给浏览器。
和线程似乎在这里不起作用。

```
class comment:
    def POST(self):
       ...
       sender = Thread(target=_sendmail,args=('New Comment',msg))
       sender.start()
       referer = web.ctx.get('HTTP_REFERER', 'http://www.domain.com')
       raise web.SeeOther(referer) 
```

使用线程时的问题是，一旦 POST 功能完成..其中的发件人将被冻结..通常发件人没有完成其工作。而且我当然不想使用 sender.join() 来等待 sender 结束。

我认为uwsgi与此无关..
但我看到一个解释表明uwsgi暂停了web.py应用程序。当没有请求时。或请求完成。
web.py 提供了一种称为@background 的方法。[http://webpy.org/cookbook/background](http://webpy.org/cookbook/background)
但它似乎有一些问题。它没有清理threaddb字典。
它会在 URL 中添加一个参数，例如[http://domain.com:8080/?_t=3080772748](http://domain.com:8080/?_t=3080772748) ，这很丑陋。
有更好的解决方案吗？**像往常一样在提供 url 请求时发送电子邮件。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:28:53.537

在 uWSGI 中使用线程没有问题，但请记住使用 --enable-threads 启用它们，否则 GIL（出于性能原因）它不会启用。

# tridion - Tridion API 调用以获取包含具有某种层次关系的结构组和页面节点的 Xml

> ID：15308722
> 
> 赞同：4
> 
> 时间：2013-03-09T08:23:07.373
> 
> 标签：tridion, tridion-2011

我正在寻找一个 Tridion API 调用来获取包含所有结构组的 XML 以及它下面的页面以及某种层次关系。到目前为止，我在 SDL Tridion 文档中找不到这样的 API 调用。目前我们正在使用以下 API 调用来获取结构组 RAW XML 的列表：

```
 Filter filter = new Filter();
 filter.Conditions["ItemType"] = 4;       // Only structure groups
 filter.Conditions["Recursive"] = true;
 XmlElement structureGroupList = page.ContextRepository.GetListOrganizationalItems(filter); 
```

然后我们遍历每个结构组以获取包含相应结构组下的 Pages 节点的 XML。

```
OrganizationalItemItemsFilter pageItemFilter = null;
pageItemFilter = new OrganizationalItemItemsFilter(this.session);
pageItemFilter.ItemTypes = new[] { ItemType.Page };
pageItemFilter.Recursive = false;
XmlElement pageElements = structureGroup.GetListItems(pageItemFilter); 
```

随着结构组数量的增加，Tridion API 调用的数量也在增加以获取其中的相应页面。这会在 CPU 飙升至 50% 的数据库服务器端引起性能问题。

是否有一个 API 调用可以获得具有某种关系的结构组和页面，以便我们可以通过单个 API 调用轻松地对它们进行分层排列。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:36:22.437

您可以将`IncludeRelativeWebDavUrlColumn`过滤器的属性设置为 true 以获取一些附加信息

# mysql - 在选择结果中转义空格

> ID：15308723
> 
> 赞同：0
> 
> 时间：2013-03-09T08:23:10.867
> 
> 标签：mysql, select, escaping

我有以下选择语句，其结果被发送到命令行参数：

```
"SELECT show.file \
 FROM show, schedule \
 WHERE channel = 1 AND start_time <= UNIX_TIMESTAMP()" 
```

但是，如果返回的结果中有空格，则会导致命令失败。我怎样才能摆脱结果中的任何空格？请注意，此 select 语句只会返回一个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:29:12.320

```
SELECT REPLACE(show.file, " ", "\ ")
FROM show, schedule
WHERE channel = 1 AND start_time <= UNIX_TIMESTAMP() 
```

应该做的伎俩。如果您有另一个转义字符，请将 \ 替换为相应的转义字符。

另见 [http://dev.mysql.com/doc/refman/5.1/de/string-functions.html](http://dev.mysql.com/doc/refman/5.1/de/string-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:34:42.650

如果 Markus 的解决方案不起作用，请尝试使用“xargs”命令。

```
xargs YOUR_COMMAND YOUR_QUERY_RESULT_AS_PARAMETER 
```

根据您要使用的命令，它可能会或可能不会起作用。

# github - 当我在 Juno 上安装 egit 时出现 Eclipse 错误

> ID：15308725
> 
> 赞同：3
> 
> 时间：2013-03-09T08:23:36.687
> 
> 标签：github, eclipse-plugin, egit

当我在 Eclipse 的 Juno 版本上进行 egit 时收到一个错误。

我没有在 Eclipse 中安装任何东西。我只是按照egit安装所说的做了。

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: EGit Mylyn 2.2.0.201212191850-r (org.eclipse.egit.mylyn.feature.group 2.2.0.201212191850-r)
  Software being installed: EGit Project Set Support 2.1.0.201209190230-r (org.eclipse.egit.psf.feature.group 2.1.0.201209190230-r)
  Only one of the following can be installed at once: 
    Git Team Provider Core 2.2.0.201212191850-r (org.eclipse.egit.core 2.2.0.201212191850-r)
    Git Team Provider Core 2.1.0.201209190230-r (org.eclipse.egit.core 2.1.0.201209190230-r)
  Cannot satisfy dependency:
    From: EGit Mylyn 2.2.0.201212191850-r (org.eclipse.egit.mylyn.feature.group 2.2.0.201212191850-r)
    To: org.eclipse.egit.mylyn.ui [2.2.0.201212191850-r]
  Cannot satisfy dependency:
    From: EGit Mylyn UI 2.2.0.201212191850-r (org.eclipse.egit.mylyn.ui 2.2.0.201212191850-r)
    To: package org.eclipse.egit.core [2.2.0,2.3.0)
  Cannot satisfy dependency:
    From: EGit Project Set Support 2.1.0.201209190230-r (org.eclipse.egit.psf.feature.group 2.1.0.201209190230-r)
    To: org.eclipse.egit.core [2.1.0,2.2.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:39:40.883

我遇到了同样的问题，并发现如果您不安装“EGit Project Set Support”，它将起作用。因为那是唯一仍然使用 2.1.0 的版本。其余的已经在 2.2.0 上。所以我猜“EGit Project Set Support”稍后会更新到2.2.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:33:52.443

您尝试安装的 Egit Mylin 版本取决于 EGit 的 2.1.0 版本，但您已经安装了 EGit 2.2.0。

如果您只需要安装几个插件，我建议您从新下载的 eclipse 开始（因为上周 Juno SR2 刚刚发布）。

尝试始终使用 Juno 存储库（而不是子项目存储库）以避免出现此类问题。Juno SR 2 被推迟了一周，因为 EGit 不得不撤回发布，如果您在 Juno SR 2 发布之前从 EGit 存储库安装了该版本，您将收到上述错误。

# c# - 返回 json 结果并将 null 转换为空字符串

> ID：15308726
> 
> 赞同：3
> 
> 时间：2013-03-09T08:23:40.670
> 
> 标签：c#, asp.net, asp.net-mvc, json, asp.net-mvc-4

我有一个返回 json 结果的操作，但某些属性为空，我想将它们转换为空字符串。我听说我可以使用`DefaultValue("")`，但它仍然返回`null`而不是空字符串。

动作是：

```
[HttpGet]
public ActionResult GetResults(string date)
{
    var data= GetData();  // returns List<Foo>
    var json = Json(data, JsonRequestBehavior.AllowGet);
    return json;
} 
```

`Foo`课程是：

```
public class Foo
{
    public string Bar1;

    [DefaultValue("")]
    public int? Bar2;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T08:44:42.760

您不能将 a 设置`nullable int`为默认值`""`

尝试

```
[DefaultValue(0)]
public int? Bar2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T08:54:35.027

就像@Dave A 注意到你不能将字符串值分配给 int 值。

但是我想警告它的一件事，您是否正确设置了属性`DefaultValueHandling`？在此处检查：[使用 MVC4 Web API 删除 JSON 中的默认值](http://macroface.wordpress.com/2013/02/28/removing-default-values-in-json-with-the-mvc4-web-api/)

除此之外，我建议您执行一个表示此 Bar2 int 属性的字符串属性，然后“忽略”它以进行序列化，例如：

```
[JsonIgnore]
[DefaultValue(0)]
public int? Bar2Int;

public string Bar2
{
   return { Bar2Int.HasValue ? this.Bar2Int.Value.ToString() : String.Empty; }
} 
```

使用这种方法更好，您不需要任何默认值属性。

# android - android应用程序中facebook的注销功能

> ID：15308736
> 
> 赞同：0
> 
> 时间：2013-03-09T08:24:35.423
> 
> 标签：android, facebook-android-sdk

我正在实现以下简单功能。我有一个简单的按钮，点击它可以登录 Facebook。我正在使用 Facebook SDK。当我单击 时，按钮（imageview）的 src 图像也会更新。到目前为止，一切正常。但是当我单击同一个按钮注销时，我得到一个

```
 android.os.networkonmainthreadexception 
```

例外。谁能帮我解决这个问题？

编辑：我的代码如下：

```
 public void onClick(View v) {
    // TODO Auto-generated method stub

    switch(v.getId()){
    case R.id.fb_button:

        try{
        if(fb.isSessionValid())
        {
            try {
                fb.logout(getBaseContext());
                update_fb_buttonimage();
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //button close session
        }

        else
        {
            fb.authorize(LoginPage.this, new DialogListener(){

                @Override
                public void onFacebookError(FacebookError e)
                {
                    Toast.makeText(LoginPage.this, "on Facebook error", Toast.LENGTH_SHORT).show();
                }
                @Override
                public void onError(DialogError e)
                {
                    Toast.makeText(LoginPage.this, "on error", Toast.LENGTH_SHORT).show();
                }
                @Override
                public void onComplete(Bundle values)
                {
                    update_fb_buttonimage();

                    Toast.makeText(getBaseContext(), "onComplete works",Toast.LENGTH_LONG).show();
                }
                @Override
                public void onCancel()
                {

                }
            });
            //login in to facebook
        }

        }catch(Exception e){

            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();

        } 
```

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:30:51.600

这里的问题很简单，您需要在单独的线程上进行 Web 服务调用（或你有什么）。因此，很简单，您需要研究如何使用 Android 进行线程处理。不幸的是，这可能有点痛苦，因为您需要在单独的线程上进行服务调用，但您需要在主线程上更新 UI。通常这需要在线程之间传递数据，这涉及处理程序或其他复杂性。幸运的是，Android 平台提供了 Async Task 来处理这个问题，这减轻了一些复杂性，并且可以帮助您避免代码中的一些混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:30:56.910

当应用程序尝试在其主线程上执行网络操作时，将引发此异常。运行你的代码`AsyncTask`

# javascript - 无法检索 Jqgrid 中选定行的 ID

> ID：15308737
> 
> 赞同：0
> 
> 时间：2013-03-09T08:24:41.037
> 
> 标签：javascript, jquery, jqgrid

我无法撤销 Jgrid 中选定行的 id ....

我有一个 jgrid

```
jQuery("#grid").jqGrid({
    ....................
}); 
```

我在同一个jsp页面中有一个按钮

```
<input type ="button" name="button" id="button" value="OK"> 
```

单击按钮后，我应该能够从上面的网格中检索所有选定的行。这是我的功能，

```
jQuery("#button").click(function ()
var select = jQuery("#grid").jqGrid("getGridParam", "selarrrow");
for (var i = 0; i < select.length; i++) //iterate through array of selected rows
{
    alert("inside the loop");

    var id = jQuery("#grid").jqGrid('getRowData', select[i]);

    var selectedID = id.Emp_ID;
}); 
```

我无法检索 ID。请帮忙

请在此处找到完整代码

```
 function load()
        {

            jQuery("#grid").jqGrid({
                url:'Emp?action=getData',
                datatype: "xml",
                height: 250,
                width:900,

                colNames:
                    ['srNo','Emp_ID','NAME','ADDRESS'],   

                colModel:[
                         {name:'srNo',index:'srNo', width:35,sortable:true},

                         {name:'Emp_ID',index:'Emp_ID', width:20,sortable:true,editable:true},
                         {name:'NAME',index:'NAME', width:35,sortable:false,editable:true},
                         {name:'ADDRESS',index:'ADDRESS', width:100,sortable:false,editable:true},

                          ],

                paging: true,
                rowNum:10,
                rowList:[10,20,30],
                pager: $("#page"),
                sortname: 'srNo',
                loadonce:true,
                multiselect:true,
             gridComplete: function() {
                var actualrows = $("#grid").getGridParam("reccount");
                document.getElementById("rows").value = actualrows;
            }

            }).navGrid
           ('#page',{edit:true,add:true,del:true,view:true,search: true},
    {closeOnEscape:true, recreateForm: true,width:500,editurl: '', closeOnSubmit: true},
    {closeOnEscape:true, recreateForm: true,width:500,url: '', closeOnSubmit: true},
    {closeOnEscape:true, recreateForm: true,width:500,url: '',                      closeOnSubmit: true},
                {multipleSearch:true,overlay:false}

      );

        }

    jQuery("#button").click(function ()
    {
var select = jQuery("#grid").jqGrid("getGridParam", "selarrrow");
for (var i = 0; i < select.length; i++) //iterate through array of selected rows
{
 alert("inside the loop");

 var id = jQuery("#grid").jqGrid('getRowData', select[i]);

 var selectedID = id.Emp_ID;
     }
});

 </script>
</head>
<body onload="load();">

  <table id="grid" border="1"></table>
        <div id="page"></div>

         <input type ="hidden" name = "hidden" id ="hidden">

        <input type="hidden" id = "rows" name="actualrows" />

            <table align ="center">
            <tr>
        <td>Date</td>
        <td><input type ="text" name="regdate" id ="regdate"></td></tr>
        <tr><td></td><td><input type ="button" class ="button" name="button" id="button" value="OK"></td></tr>

        </table>
   </body>
  </html> 
```

以下是我在网格中包含的测试数据

## srNo Emp_ID 名称地址

1 Emp1 安德鲁地址

2 Emp2 赛勒斯地址

3 Emp3 汤姆地址

这是填充网格的 Servlet

```
 if (request.getParameter("action").equals("getData")) 
   {
   try
     {
       String query="Select * from Employee";

      /* Connection code goes here*/

     pstmt = con.prepareStatement(query);

    /* pagination code goes here*/

    out.print("<?xml version='1.0' encoding='utf-8'?>\n");
    out.print("<rows>");
    out.print("<page>" + page + "</page>");
    out.print("<total>" + totalPages + "</total>");
    out.print("<records>" + count + "</records>");

   while(rs.next())
   {
    out.print("<row id='" + srNo + "'>");
    out.print("<cell>" + srNo + "</cell>");
    out.print("<cell>" +rs.getString(1) + "</cell>");
    out.print("<cell>"+rs.getString(2) +"</cell>");
    out.print("<cell>"+rs.getString(3) +"</cell>");
    out.print("</row>");
    srNo++;

}     
                    out.print("</rows>");
  }
 catch(Exception e)
           {

           }
  } 
```

请在下面找到 XML 响应...

```
 <body onload="fillGrid();">

 <div class="ui-jqgrid ui-widget ui-widget-content ui-corner-all" id="gbox_grid" style="width: 900px;"><div class="ui-widget-overlay jqgrid-overlay" id="lui_grid"></div><div class="loading ui-state-default ui-state-active" id="load_grid" style="display: none;">Loading...</div><div class="ui-jqgrid-view" id="gview_grid" style="width: 900px;"><div class="ui-jqgrid-titlebar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix" style="display: none;"><a role="link" href="javascript:void(0)" class="ui-jqgrid-titlebar-close HeaderButton"><span class="ui-icon ui-icon-circle-triangle-n"></span></a><span class="ui-jqgrid-title"></span></div><div style="width: 900px;" class="ui-state-default ui-jqgrid-hdiv"><div class="ui-jqgrid-hbox"><table class="ui-jqgrid-htable" style="width:882px" role="grid" aria-labelledby="gbox_grid" cellspacing="0" cellpadding="0" border="0"><thead><tr class="ui-jqgrid-labels" role="rowheader"><th role="columnheader" class="ui-state-default ui-th-column" style="width: 25px;"><div id="jqgh_cb"><input id="cb_jqg" class="cbox" type="checkbox"><span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s"></span></span></div></th><th role="columnheader" class="ui-state-default ui-th-column" style="width: 157px;"><span class="ui-jqgrid-resize">&nbsp;</span><div id="jqgh_srNo" class="ui-jqgrid-sortable">srNo<span class="s-ico" style=""><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-icon ui-icon-triangle-1-n"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s"></span></span></div></th><th role="columnheader" class="ui-state-default ui-th-column" style="width: 90px;"><span class="ui-jqgrid-resize">&nbsp;</span><div id="jqgh_Emp_ID" class="ui-jqgrid-sortable">Emp_ID<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s"></span></span></div></th><th role="columnheader" class="ui-state-default ui-th-column" style="width: 157px;"><span class="ui-jqgrid-resize">&nbsp;</span><div id="jqgh_NAME" class="ui-jqgrid-sortable">NAME<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s"></span></span></div></th><th role="columnheader" class="ui-state-default ui-th-column" style="width: 453px;"><span class="ui-jqgrid-resize">&nbsp;</span><div id="jqgh_ADDRESS" class="ui-jqgrid-sortable">ADDRESS<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s"></span></span></div></th></tr></thead></table></div></div><div class="ui-jqgrid-bdiv" style="height: 250px; width: 900px;"><table id="grid" border="0" cellspacing="0" cellpadding="0" role="grid" aria-multiselectable="true" aria-labelledby="gbox_grid" class="ui-jqgrid-btable" style="width: 882px;"><tbody><tr id="1" role="row" class="ui-widget-content jqgrow  ui-state-highlight" aria-selected="true"><td role="gridcell" style="text-align:center;width: 25px;"><input type="checkbox" id="jqg_1" class="cbox" name="jqg_1" checked="checked"></td><td role="gridcell" style="width: 157px;" title="1">1</td><td role="gridcell" style="width: 90px;" title="Emp1">Emp1</td><td role="gridcell" style="width: 157px;" title="Andrew">Andrew</td><td role="gridcell" style="width: 453px;" title="addr">addr</td></tr><tr id="2" role="row" class="ui-widget-content jqgrow ui-state-highlight" aria-selected="true"><td role="gridcell" style="text-align:center;"><input type="checkbox" id="jqg_2" class="cbox" name="jqg_2" checked="checked"></td><td role="gridcell" style="" title="2">2</td><td role="gridcell" style="" title="Emp2">Emp2</td><td role="gridcell" style="" title="Cyrus">Cyrus</td><td role="gridcell" style="" title="addr">addr</td></tr><tr id="3" role="row" class="ui-widget-content jqgrow"><td role="gridcell" style="text-align:center;"><input type="checkbox" id="jqg_3" class="cbox" name="jqg_3"></td><td role="gridcell" style="" title="3">3</td><td role="gridcell" style="" title="Emp3">Emp3</td><td role="gridcell" style="" title="Tom">Tom</td><td role="gridcell" style="" title="addr">addr</td></tr></tbody></table></div></div><div class="ui-jqgrid-resize-mark" id="rs_mgrid">&nbsp;</div><div id="page" style="width: 900px;" class="ui-state-default ui-jqgrid-pager corner-bottom"><div id="pg_page" class="ui-pager-control" role="group"><table cellspacing="0" cellpadding="0" border="0" class="ui-pg-table" style="width:100%;table-layout:fixed;" role="row"><tbody><tr><td id="page_left" align="left"><table cellspacing="0" cellpadding="0" border="0" class="ui-pg-table navtable" style="float:left;table-layout:auto;"><tbody><tr><td class="ui-pg-button ui-corner-all" title="Add new row" id="add_grid"><div class="ui-pg-div"><span class="ui-icon ui-icon-plus"></span></div></td><td class="ui-pg-button ui-corner-all" title="Edit selected row" id="edit_grid"><div class="ui-pg-div"><span class="ui-icon ui-icon-pencil"></span></div></td><td class="ui-pg-button ui-corner-all" title="View selected row" id="view_grid"><div class="ui-pg-div"><span class="ui-icon ui-icon-document"></span></div></td><td class="ui-pg-button ui-corner-all" title="Delete selected row" id="del_grid"><div class="ui-pg-div"><span class="ui-icon ui-icon-trash"></span></div></td><td class="ui-pg-button ui-state-disabled" style="width:4px;"><span class="ui-separator"></span></td><td class="ui-pg-button ui-corner-all" title="Find records" id="search_grid"><div class="ui-pg-div"><span class="ui-icon ui-icon-search"></span></div></td><td class="ui-pg-button ui-corner-all" title="Reload Grid" id="refresh_grid"><div class="ui-pg-div"><span class="ui-icon ui-icon-refresh"></span></div></td></tr></tbody></table></td><td id="page_center" align="center" style="white-space: nowrap; width: 278px;"><table cellspacing="0" cellpadding="0" border="0" style="table-layout:auto;" class="ui-pg-table"><tbody><tr><td id="first" class="ui-pg-button ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-first"></span></td><td id="prev" class="ui-pg-button ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-prev"></span></td><td class="ui-pg-button ui-state-disabled" style="width:4px;"><span class="ui-separator"></span></td><td>Page <input class="ui-pg-input" type="text" size="2" maxlength="7" value="0" role="textbox"> of <span id="sp_1">1</span></td><td class="ui-pg-button ui-state-disabled" style="width:4px;"><span class="ui-separator"></span></td><td id="next" class="ui-pg-button ui-corner-all ui-state-disabled" style="cursor: default;"><span class="ui-icon ui-icon-seek-next"></span></td><td id="last" class="ui-pg-button ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-end"></span></td><td><select class="ui-pg-selbox" role="listbox"><option role="option" value="10" selected="">10</option><option role="option" value="20">20</option><option role="option" value="30">30</option></select></td></tr></tbody></table></td><td id="page_right" align="right"></td></tr></tbody></table></div></div></div>

     <input type="hidden" name="hidden" id="hidden">

    <input type="hidden" id="rows" name="actualrows" value="3">

        <table align="center">
        <tbody><tr>
    <td>Date</td>
    <td><input type="text" name="regdate" id="regdate"></td></tr>
    <tr><td></td><td><input type="button" class="button" name="button" id="button" value="OK"></td></tr>

    </tbody></table> 
```

警告请选择行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:00:20.253

I suppose that you just don't filled `id` in XML input which you used for jqGrid.

If contains of `Emp_ID` column is unique for each row then you can just include `key: true` property in the column definition (in `colModel`). In the case jqGrid will use `Emp_ID` values as `id` of rows (as rowid) and the array returned by `jQuery("#grid").jqGrid("getGridParam", "selarrrow");` will get you already all what you need.

# xcode - 如何实现ckrefreshcontrol支持ios5？

> ID：15308738
> 
> 赞同：0
> 
> 时间：2013-03-09T08:24:45.163
> 
> 标签：xcode, ios5, github, uirefreshcontrol

我在this [question](https://stackoverflow.com/questions/13085045/objective-c-add-support-for-new-classes-to-old-devices)中看到CKRefreshControl可以用作同时支持iOS5和iOS6的应用程序的UIRefreshControl的替代品。我在[Github](https://github.com/instructure/CKRefreshControl)上找到了代码，但我不知道如何实现它。 [约翰](https://stackoverflow.com/users/1984416/john-haitas)说只使用相同的代码。但是缺少一些东西。CKRefreshControl 代码在哪里？

```
self.refreshControl = [[UIRefreshControl alloc] init]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:51:14.770

`CKRefreshControl`除了 CKRefreshControl 源本身之外，不需要任何特定代码。`CKRefreshControl`首次发布时，您必须将所有调用替换为`UIRefreshControl`调用`CKRefreshControl`，然后它会根据您使用的是 iOS 5 还是 iOS 6+ 自动分派到正确的类。

然而，随着[John Haitas](https://stackoverflow.com/users/1984416/john-haitas)最近的贡献，这不再是必要的了。相反，只需针对 CKRefreshControl 源代码进行编译和链接即可使`UIRefreshControl`该类在面向 iOS 5 时可用。因此，您可以继续使用`[[UIRefreshControl alloc] init]`，它会自动在 iOS 5 上运行。

你为什么要相信我？因为我是第一个写作的人`CKRefreshControl`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:38:41.650

1）将3个类和前缀添加到您的项目中：

```
 - CKParagraphStyle.h  and  CKParagraphStyle.m
 - CKParagraphStyle.h  and  CKRefreshArrowView.m
 - CKRefreshControl.h  and  CKRefreshControl.m
 - CKRefreshControl-Prefix.pch  (goes into TableVCs using Refresh). 
```

2) 将 QuartzCore.framework 添加到目标库。

3）添加此方法：

```
-(void)doRefresh:(CKRefreshControl *)sender {
        NSLog(@"refreshing");
        [self.refreshControl performSelector:@selector(endRefreshing) withObject:nil afterDelay:1.0];
    } 
```

最后，像往常一样使用 UIRefreshControl，但选择 doRefresh 方法：

```
self.refreshControl = [[UIRefreshControl alloc] init];
[self.refreshControl addTarget:self action:@selector(doRefresh:) forControlEvents:UIControlEventValueChanged]; 
```

# python - 如何在 QTableView 中实现多行标题

> ID：15308740
> 
> 赞同：1
> 
> 时间：2013-03-09T08:24:54.580
> 
> 标签：python, pyqt

我想使用 PyQt 实现这样的表头[参见图片]。但是默认的QTableView只能定义一行，有什么方法可以实现吗？

![在此处输入图像描述](../Images/becb5143d79469c12ce9e6c7c7257174.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:54:14.003

您应该使用不同的 Horizo​​ntalHeader，但不确定您将使用哪种小部件。也许是另一个带有连接单元格的表格。

# visual-studio-2010 - wpf ViewBox 中的 Wpf 控件大小变小/模糊

> ID：15308744
> 
> 赞同：0
> 
> 时间：2013-03-09T08:25:09.493
> 
> 标签：visual-studio-2010, c#-4.0, mvvm, wpf-4.0

我在 wpf 窗口中有一个用户控件。在 usercontrol 中，我将所有控件都放在了 viewbox 中，这样如果用户调整窗口大小，它不会影响 usercontrol 的缩放。

```
<Viewbox >
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
 ---------------------------
 ---------------------------
</Grid>
    </Viewbox> 
```

在第一张图片中，当窗口未最大化时，用户控件控件如下所示，即小而模糊。控件的大小不是恒定的。

![在此处输入图像描述](../Images/2a25a3ba05e1155db1d7830973f839ab.png)

如果用户最大化窗口，用户控件如下所示：

![在此处输入图像描述](../Images/38c49d17148a1cef322d5cf313f0f56d.png)

请建议如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:00:23.833

看看这个： [Viewbox 内的 TextBlock - 奇怪的渲染](https://stackoverflow.com/questions/4408726/textblock-inside-a-viewbox-strange-rendering)

并尝试`TextOptions.TextFormattingMode`在 Viewbox 上使用值（假设屏幕截图中的控件呈现为带有字体的文本，而不是位图图像。

# entity-framework-5 - Entity Framework 5 实体的深拷贝/克隆

> ID：15308747
> 
> 赞同：77
> 
> 时间：2013-03-09T08:25:40.823
> 
> 标签：entity-framework-5, dbcontext

我正在使用 Entity Framework 5 ( `DBContext`) 并试图找到深度复制实体的最佳方法（即复制实体和所有相关对象），然后将新实体保存在数据库中。我怎样才能做到这一点？我已经研究过使用扩展方法，例如，`CloneHelper`但我不确定它是否适用于`DBContext`.

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-10T12:51:05.737

克隆实体的一种廉价简单的方法是执行以下操作：

```
var originalEntity = Context.MySet.AsNoTracking()
                             .FirstOrDefault(e => e.Id == 1);
Context.MySet.Add(originalEntity);
Context.SaveChanges(); 
```

这里的诀窍是**AsNoTracking()** - 当您加载这样的实体时，您的上下文不知道它，当您调用 SaveChanges 时，它会将其视为新实体。

如果`MySet`有参考`MyProperty`并且您也想要它的副本，只需使用`Include`：

```
var originalEntity = Context.MySet.Include("MyProperty")
                            .AsNoTracking()
                            .FirstOrDefault(e => e.Id == 1); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-12T13:41:40.947

这是另一种选择。

在某些情况下我更喜欢它，因为它不需要您专门运行查询来获取要克隆的数据。您可以使用此方法创建已从数据库中获取的实体的克隆。

```
//Get entity to be cloned
var source = Context.ExampleRows.FirstOrDefault();

//Create and add clone object to context before setting its values
var clone = new ExampleRow();
Context.ExampleRows.Add(clone);

//Copy values from source to clone
var sourceValues = Context.Entry(source).CurrentValues;
Context.Entry(clone).CurrentValues.SetValues(sourceValues);

//Change values of the copied entity
clone.ExampleProperty = "New Value";

//Insert clone with changes into database
Context.SaveChanges(); 
```

此方法将当前值从源复制到已添加的新行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-27T07:01:35.897

这是允许通用克隆的通用扩展方法。

您必须`System.Linq.Dynamic`从 nuget 获取。

```
 public TEntity Clone<TEntity>(this DbContext context, TEntity entity) where TEntity : class
    {

        var keyName = GetKeyName<TEntity>();
        var keyValue = context.Entry(entity).Property(keyName).CurrentValue;
        var keyType = typeof(TEntity).GetProperty(keyName, System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance).PropertyType;

        var dbSet = context.Set<TEntity>();
        var newEntity =  dbSet
            .Where(keyName + " = @0", keyValue)
            .AsNoTracking()
            .Single();

        context.Entry(newEntity).Property(keyName).CurrentValue = keyType.GetDefault();

        context.Add(newEntity);

        return newEntity;
    } 
```

您唯一需要自己实现的是 GetKeyName 方法。这可以是从`return typeof(TEntity).Name + "Id"`to`return the first guid property`或返回标有 的第一个属性的任何内容`DatabaseGenerated(DatabaseGeneratedOption.Identity)]`。

就我而言，我已经用`[DataServiceKeyAttribute("EntityId")]`

```
 private string GetKeyName<TEntity>() where TEntity : class
    {
        return ((DataServiceKeyAttribute)typeof(TEntity)
           .GetCustomAttributes(typeof(DataServiceKeyAttribute), true).First())
           .KeyNames.Single();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-04T08:23:28.767

我在 Entity Framework Core 中遇到了同样的问题，当子实体延迟加载时，深度克隆涉及多个步骤。克隆整个结构的一种方法如下：

```
 var clonedItem = Context.Parent.AsNoTracking()
        .Include(u => u.Child1)
        .Include(u => u.Child2)
        // deep includes might go here (see ThenInclude)
        .FirstOrDefault(u => u.ParentId == parentId);

    // remove old id from parent
    clonedItem.ParentId = 0;

    // remove old ids from children
    clonedItem.Parent1.ForEach(x =>
    {
        x.Child1Id = 0;
        x.ParentId= 0;
    });
    clonedItem.Parent2.ForEach(x =>
    {
        x.Child2Id = 0;
        x.ParentId= 0;
    });

    // customize entities before inserting it

    // mark everything for insert
    Context.Parent.Add(clonedItem);

    // save everything in one single transaction
    Context.SaveChanges(); 
```

Of course, there are ways to make generic functions to eager load everything and/or reset values for all keys, but this should make all the steps much clear and customizable (e.g. all for some children to not be cloned at all, by skipping their Include).

# c# - 用户如何访问我的新版本网站中的旧数据（页面）内容

> ID：15308750
> 
> 赞同：1
> 
> 时间：2013-03-09T08:26:27.887
> 
> 标签：c#, asp.net, umbraco, transfer

我设计了一个新网站 www.AAA.com，我想保存旧内容。另一方面，我希望用户可以访问旧内容。Umbraco 开发的新网站。旧版本可以由任何技术和数据库开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:34:57.137

我不知道 Umbraco，但我会向您推荐以下内容：

最常用的方法之一是像这样分离。

最新 --> www.aaa.com

比最新的旧 --> www.aaa.com/v1/

早于 v2 --> www.aaa.com/v2/

将旧站点内容的根目录复制到 Web 服务器上的 v1 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:26:32.723

您可以将新的 Umbraco 站点与旧站点一起安装在 Web 服务器中，作为两个单独的网站，然后在 Umbraco 中制作一个带有链接的菜单，用于访问旧站点的不同部分，并提供指向 Umbraco 中旧网站的链接用户能够回来。
也有可能将您的一些旧内容转换为 Umbraco。Umbraco 的数据库并不难弄清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T10:52:52.343

你有几个选择。将网站安装到服务器上的两个不同目录中，但在 IIS 中进行设置：

**旧站点作为子域或另一个域**

`http://www.example.com/`- Umbraco 站点，作为 IIS 中的网站
`http://legacy.example.com/`- 旧站点，作为具有适当主机名的 IIS 中的网站。 `http://www.example-legacy.com/`- 旧站点，作为具有适当主机名的 IIS 中的网站。

**旧站点作为子目录**

`http://www.example.com`- Umbraco 站点，作为 IIS 中的网站
`http://www.example.com/legacy/`- 旧站点，作为 IIS 中的**虚拟目录**。取决于所使用的技术，但如果是 .NET，则需要选择**转换为应用程序**选项，以便将其视为自己的 .NET 应用程序，而不是 Umbraco 站点的一部分。

需要对`web.config`Umbraco 站点进行最后一项更改，以便其 URL 重写组件在尝试确定要显示的内容时忽略解析旧站点 URL。否则，您可能会得到 Umbraco 网站告诉您找不到该页面。将您的虚拟目录名称附加到以下键：

```
<add key="umbracoReservedPaths" value="~/umbraco,~/install/,~/legacy" /> 
```

**关于 Umbraco 网站的最后说明**

无论您选择什么，我建议的一件事是将 Umbraco 站点保留在域/子域的根目录中。如果您将旧版本的 Umbraco 作为虚拟目录提供服务，则会出现问题，尽管我不知道这是否仍然是 v6+ 的问题。

# magento - Magento 未从 1.3.2.4 升级到 1.7

> ID：15308752
> 
> 赞同：1
> 
> 时间：2013-03-09T08:27:06.423
> 
> 标签：magento, magento-1.3

我正在尝试使用 Magento Connect Manager 通过“ **magento-core/Mage_All_Latest** ”扩展密钥将 Magento 1.3.2.4 升级到 1.7 进行安装。但是我发现了以下错误，我不知道如何解决它。

错误 -

**捕获的异常：**

**警告：包含（/N91nq64igkwi8oxu.php）：无法打开流：第 93 行的 /var/www/projects/spacecenter/lib/Varien/Autoload.php 中没有此类文件或目录**

如果有人遇到这种错误，请帮忙。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:46:05.497

我强烈推荐Turnkey 的[这个](http://turnkeye.com/blog/magento-upgrade-guide/)升级指南——对我来说非常有效。

请不要期望升级到 Magento 1.7 后一切正常或看起来都一样。根据您使用的功能或扩展，在您完成之前可能需要做很多工作。所以不要在你的实时系统上这样做。最好将其复制到开发环境并在那里测试升级。

# c++ - mex c++ 未定义参考

> ID：15308754
> 
> 赞同：0
> 
> 时间：2013-03-09T08:27:15.763
> 
> 标签：c++, undefined, mex

我尝试使用来自[http://yaafe.sourceforge.net/manual/install.html](http://yaafe.sourceforge.net/manual/install.html)的 yaafe 库。一切都已安装并在 python 中运行良好。但是我想使用 matlab 界面，我尝试编译使用以下命令提供的 yaafemex.cpp： `mex -v -L/usr/local/yaafe-v0.64/lib -I/usr/local/yaafe-v0.64/include/yaafe-core yaafemex.cpp` 它给出了以下错误。有人能给我一些启示吗？

```
-> mexopts.sh sourced from directory (DIR = $MATLAB/bin)
   FILE = /home/eric/R2010A/bin/mexopts.sh
----------------------------------------------------------------
->    MATLAB                = /home/eric/R2010A
->    CC                    = gcc
->    CC flags:
         CFLAGS             = -ansi -D_GNU_SOURCE -fPIC -pthread -m32  -fexceptions -D_FILE_OFFSET_BITS=64
         CDEBUGFLAGS        = -g
         COPTIMFLAGS        = -O -DNDEBUG
         CLIBS              = -Wl,-rpath-link,/home/eric/R2010A/bin/glnx86 -L/home/eric/R2010A/bin/glnx86 -lmx -lmex -lmat -lm -lstdc++
         arguments          =  -DMX_COMPAT_32
->    CXX                   = g++
->    CXX flags:
         CXXFLAGS           = -ansi -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -fPIC -pthread
         CXXDEBUGFLAGS      = -g
         CXXOPTIMFLAGS      = -O -DNDEBUG
         CXXLIBS            = -Wl,-rpath-link,/home/eric/R2010A/bin/glnx86 -L/home/eric/R2010A/bin/glnx86 -lmx -lmex -lmat -lm
         arguments          =  -DMX_COMPAT_32
->    FC                    = g95
->    FC flags:
         FFLAGS             = -fexceptions -fPIC
         FDEBUGFLAGS        = -g
         FOPTIMFLAGS        = -O
         FLIBS              = -Wl,-rpath-link,/home/eric/R2010A/bin/glnx86 -L/home/eric/R2010A/bin/glnx86 -lmx -lmex -lmat -lm
         arguments          =  -DMX_COMPAT_32
->    LD                    = g++
->    Link flags:
         LDFLAGS            = -pthread -shared -m32 -Wl,--version-script,/home/eric/R2010A/extern/lib/glnx86/mexFunction.map -Wl,--no-undefined
         LDDEBUGFLAGS       = -g
         LDOPTIMFLAGS       = -O
         LDEXTENSION        = .mexglx
         arguments          =  -L/usr/local/yaafe-v0.64/lib
->    LDCXX                 = 
->    Link flags:
         LDCXXFLAGS         = 
         LDCXXDEBUGFLAGS    = 
         LDCXXOPTIMFLAGS    = 
         LDCXXEXTENSION     = 
         arguments          =  -L/usr/local/yaafe-v0.64/lib
----------------------------------------------------------------

Warning: You are using gcc version "4.4.3-4ubuntu5.1)".  The version
         currently supported with MEX is "4.2.3".
         For a list of currently supported compilers see: 
         http://www.mathworks.com/support/compilers/current_release/

-> g++ -c  -I/usr/local/yaafe-v0.64/include/yaafe-core -I/home/eric/R2010A/extern/include -DMATLAB_MEX_FILE -ansi -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -fPIC -pthread  -DMX_COMPAT_32 -O -DNDEBUG  "yaafemex.cpp"

-> g++ -O -pthread -shared -m32 -Wl,--version-script,/home/eric/R2010A/extern/lib/glnx86/mexFunction.map -Wl,--no-undefined -o  "yaafemex.mexglx"  yaafemex.o  -L/usr/local/yaafe-v0.64/lib -Wl,-rpath-link,/home/eric/R2010A/bin/glnx86 -L/home/eric/R2010A/bin/glnx86 -lmx -lmex -lmat -lm

yaafemex.o: In function `readFeature(mxArray_tag*, YAAFE::Engine*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
yaafemex.cpp:(.text+0x15f): undefined reference to `YAAFE::Engine::getOutput(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
yaafemex.cpp:(.text+0x2c9): undefined reference to `YAAFE::InputBuffer::availableTokens()'
yaafemex.cpp:(.text+0x305): undefined reference to `YAAFE::InputBuffer::availableTokens()'
yaafemex.cpp:(.text+0x318): undefined reference to `YAAFE::InputBuffer::read(double*, int)'
yaafemex.cpp:(.text+0x320): undefined reference to `YAAFE::InputBuffer::availableTokens()'
yaafemex.cpp:(.text+0x32c): undefined reference to `YAAFE::InputBuffer::consumeTokens(int)'
yaafemex.o: In function `processBuffer(mxArray_tag*, YAAFE::Engine*, double*, int)':
yaafemex.cpp:(.text+0x45b): undefined reference to `YAAFE::Engine::reset()'
yaafemex.cpp:(.text+0x489): undefined reference to `YAAFE::Engine::getInput(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
yaafemex.cpp:(.text+0x51e): undefined reference to `YAAFE::DataBlock::preferedBlockSize()'
yaafemex.cpp:(.text+0x545): undefined reference to `YAAFE::OutputBuffer::write(double*, int)'
yaafemex.cpp:(.text+0x552): undefined reference to `YAAFE::Engine::process()'
yaafemex.cpp:(.text+0x562): undefined reference to `YAAFE::Engine::flush()'
yaafemex.cpp:(.text+0x574): undefined reference to `YAAFE::Engine::getOutputs()'
yaafemex.o: In function `processFile(mxArray_tag*, YAAFE::Engine*, char*)':
yaafemex.cpp:(.text+0x668): undefined reference to `YAAFE::AudioFileProcessor::AudioFileProcessor()'
yaafemex.cpp:(.text+0x697): undefined reference to `YAAFE::AudioFileProcessor::processFile(YAAFE::Engine&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
yaafemex.cpp:(.text+0x714): undefined reference to `YAAFE::Engine::getOutputs()'
yaafemex.cpp:(.text+0x7fb): undefined reference to `YAAFE::AudioFileProcessor::~AudioFileProcessor()'
yaafemex.cpp:(.text+0x80e): undefined reference to `YAAFE::AudioFileProcessor::~AudioFileProcessor()'
yaafemex.o: In function `mexFunction':
yaafemex.cpp:(.text+0x960): undefined reference to `YAAFE::ComponentFactory::instance()'
yaafemex.cpp:(.text+0x96f): undefined reference to `YAAFE::ComponentFactory::loadLibrary(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
yaafemex.cpp:(.text+0xb28): undefined reference to `YAAFE::DataFlow::load(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
yaafemex.cpp:(.text+0xc2c): undefined reference to `YAAFE::Engine::Engine()'
yaafemex.cpp:(.text+0xc5e): undefined reference to `YAAFE::Engine::load(YAAFE::DataFlow const&)'
collect2: ld returned 1 exit status

    mex: link of ' "yaafemex.mexglx"' failed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:57:52.170

您需要告诉 mex 库的名称。它应该是这样的

`mex -v -L/usr/local/yaafe-v0.64/lib -I/usr/local/yaafe-v0.64/include/yaafe-core -l"YOUR_LIB_NAME_HERE" yaafemex.cpp`

其中“YOUR_LIB_NAME_HERE”是相应库的名称。（不带引号）

# android - 标签切换时fragmenttabhost重新创建视图

> ID：15308755
> 
> 赞同：0
> 
> 时间：2013-03-09T08:27:30.387
> 
> 标签：android, android-tabhost, fragment-tab-host

在我最近的项目中，我使用 FragmentTabHost 的 v4 支持库。

当 tab 和 fragment 初始化时，绑定到标签的 Fragment 被创建并渲染。它的生命周期是

> onCreate ==> onCreateView ==> onActivityCreated

我覆盖了 onActivityCreated 方法，因为我需要从 api 获取一些数据。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Lg.i("on TagDiscoverListFragment activity created");

    new GetDiscoversTask().execute();

} 
```

但是每次我切换到这个选项卡时，这个 aysnTask 都会再次执行，因为当切换发生时，片段调用：

> onCreateView ==> onActivityCreated

我不希望数据再次刷新。

当然，我可以扩展 FragmentTabHost 并覆盖方法 doTabChange() 并将片段的附加/分离操作更改为隐藏/查看。

那么，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:11:01.790

您应该在片段中覆盖“onSaveInstanceState（Bundle outState）”并将来自api的数据存储到“outState”中

切换tab时会调用onCreateView，此时可以从“savedInstanceState”（第三个参数）中获取api数据

# php - PHP读取属性下的XML项目

> ID：15308758
> 
> 赞同：0
> 
> 时间：2013-03-09T08:28:06.473
> 
> 标签：php, xml, simplexml

我创建了一个 simplexml php 文件，它将加载我想要提取的所有 xml 项目。唯一的问题是子项位于具有属性的项下。当我尝试拉子项目时，没有任何显示。我对使用 simplexml 还是比较陌生

XML

```
<Mediainfo version="0.7.62">
    <File>
        <track type="General">
            <UniqueID_String>242652904449958064145306342749155800074 (0xB68D3FDDBE0F9B3E865F70325496B40A)</UniqueID_String>
            <CompleteName>D:\Encoder\videos\raw\063 - 077 (Season_02)\064 - A Pirate-Loving Town Arrival at Whiskey Peak.mkv</CompleteName>
            <Format>Matroska</Format>
            <Format_Version>Version 1</Format_Version>
            <FileSize_String>40.0 MiB</FileSize_String>
            <Duration_String>24mn 6s</Duration_String>
            <OverallBitRate_String>232 Kbps</OverallBitRate_String>
            <Encoded_Date>UTC 2008-08-26 15:24:58</Encoded_Date>
            <Encoded_Application>mkvmerge v2.2.0 (&apos;Turn It On Again&apos;) built on Mar  4 2008 12:58:26</Encoded_Application>
            <Encoded_Library_String>libebml v0.7.7 + libmatroska v0.8.1</Encoded_Library_String>
        </track>
    </File>
</Mediainfo> 
```

我试图抓住

```
<UniqueID_String>242652904449958064145306342749155800074 (0xB68D3FDDBE0F9B3E865F70325496B40A)</UniqueID_String> 
```

在下面

```
<track type="General"> 
```

PHP

```
$lib  = simplexml_load_file("media.xml");
$xml = $lib->File;
$gen = $xml->track['General'];
$vid = $xml->track['Video'];
$aud = $xml->track['Audio'];

//General
$format = $gen->Format;
$app = $gen->Encoded_Application;
$size = $gen->FileSize_String;
$dur = $gen->Duration_String;

echo $format;

//Video
$vformat = $vid->Format;
$vbit = $vid->BitRate_Nominal_String;
$width = $vid->Width_String;
$height = $vid->Height_String;
$aspect = $vid->DisplayAspectRatio_String;
$frame = $vid->FrameRate_String;
$encode = $vid->Encoded_Library_String;
$encodes = $vid->Encoded_Library_Settings;

//Audio
$aformat = $aud->Format;
$compress = $aud->Compression_Mode_String;
$lang = $aud->Language_String; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:37:35.990

在 SimpleXML 中访问*属性*和*子元素*是有区别的。

因此，如果您想访问：

*   子元素使用对象属性访问
*   属性使用数组访问

这也在[SimpleXML 基本示例](http://php.net/manual/en/simplexml.examples-basic.php)中进行了概述。

在您的情况下，您想访问孩子的孩子：

```
$xml = simplexml_load_file("data-15308758.xml");

### first track in first file ###
echo $xml->File->track->UniqueID_String, "\n"; 

### each track with attribute type="General" in each file ###
$count = 0;
foreach($xml->xpath('/*/File/track[@type="General"]') as $track)
{
    echo ++$count, ': ', $track->UniqueID_String, "\n";
} 
```

见[http://eval.in/12273](http://eval.in/12273)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T21:23:27.900

这里的混淆在于属性的*名称*和*值之间。*该语法`$xml->track['General']`检索名称为“General”的属性的值，例如，它将从 中获取“hello” `<track General="hello" />`。

但是，在您的情况下，`"General"`是名称为:的属性的*值*。因此，如果您想判断特定轨道是否属于“常规”类型，则需要使用.`type``<track type="General">``if ( $xml->track['type'] == 'General' )`

我还假设您的文件将包含许多`track`元素，因此您需要遍历它们，就像它们在数组中一样`foreach ( $xml->track as $track )`：如果容器内有多个`<File>`元素`<MediaInfo>`，则需要两个嵌套循环。（如果你不这样做，你只会看到第一个`<File>`和第一个`<track>`。）

因此，采用您在示例中显示的三种“类型”，您的代码最终应该是这样的：

```
$lib  = simplexml_load_file("media.xml");
foreach ( $lib->File as $file )
{
    foreach ( $file->track as $track )
    {
        switch ( (string)$track['type'] )
        {
            case 'General':
                $format = $gen->Format;
                $app = $gen->Encoded_Application;
                $size = $gen->FileSize_String;
                $dur = $gen->Duration_String;
            break;
            case 'Video':
                $vformat = $vid->Format;
                $vbit = $vid->BitRate_Nominal_String;
                $width = $vid->Width_String;
                $height = $vid->Height_String;
                $aspect = $vid->DisplayAspectRatio_String;
                $frame = $vid->FrameRate_String;
                $encode = $vid->Encoded_Library_String;
                $encodes = $vid->Encoded_Library_Settings;
            break;
            case 'Audio':
                $aformat = $aud->Format;
                $compress = $aud->Compression_Mode_String;
                $lang = $aud->Language_String;
            break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T08:44:36.363

试试这个

```
$doc = new DOMDocument();
$doc->load('media.xml');
$xpd = new DOMXPath($doc);
false&&$node = new DOMElement();
$result = $xpd->query('//File/track[@type="General"]/UniqueID_String'); // your path
foreach($result as $node){
    echo $node->nodeName ." => ". $node->nodeValue ."<br/>";
} 
```

# c# - asp.net 谷歌recaptcha

> ID：15308761
> 
> 赞同：2
> 
> 时间：2013-03-09T08:28:33.287
> 
> 标签：c#, asp.net, recaptcha

我在我的 asp.net webform 应用程序中使用了 google reCaptcha，并且我遵循了 google 的文档，但我收到了这个错误：

```
Input error: k: Format of site key was invalid 
```

这是我的代码：

```
<recaptcha:RecaptchaControl
                ID="recaptcha"
                runat="server"
                PrivateKey="your_private_key"
                PublicKey="your_public_key" /> 
```

我尝试了不同的公钥和私钥，但结果是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:41:24.490

错误 表示您的`CAPTCHA`设置仍设置为自动（S-Drive）。

我建议您阅读[INPUT ERROR: K: FORMAT OF SITE KEY WAS INVALID。](http://www.coffeecup.com/help/articles/input-error-k-format-of-site-key-was-invalid/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:35:10.510

您必须从 recaptcha 输入 PrivateKey 和 PublicKey

# php - The Loop 中帖子容器的条件样式

> ID：15308767
> 
> 赞同：-1
> 
> 时间：2013-03-09T08:29:25.440
> 
> 标签：php, wordpress, loops

我的循环使用以下方法在两列中显示帖子：

```
<?php
if (have_posts()): while (have_posts()) : the_post();
 $count++;
?>
    <?php  if ($count == 1) : ?>
    <div class="home-ci-row">

    <div style="padding: 0px;" class="main-column-item-wrap">
    CONTENT OF POST : Title, Thumbnail, Excerpt... etc
    </div>

    <div class="home-ci-gap"></div><!-- /* the gap */ -->

    <?php elseif ($count == 2) : ?>    

   <div style="padding: 0px;" class="main-column-item-wrap">
   CONTENT OF POST : Title, Thumbnail, Excerpt... etc
   </div> <!-- main-column-item-wrap -->

</div><!-- /* home-ci-row*/ -->

<?php $count = 0; ?>

      <?php else : ?>
    // No posts
<?php endif; endwhile; endif; ?> 
```

您可以看到第一个计数中的`<div class="home-ci-row">`打开和第二个计数中的关闭`</div>`

所以当我的循环有偶数个帖子时效果很好，但有奇数个它不会关闭 div

所以我的想法是：如果循环有偶数

![http://i.stack.imgur.com/Hu4Ua.png](../Images/0e57c0fd04db62745b70b94aeb2037dd.png)

如果循环有奇数个帖子

![http://i.stack.imgur.com/JjqzZ.png](../Images/945932df3b93b279edb51f0b60b7d811.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:45:29.250

顺便说一句，您可以执行以下操作：

```
<?php
$count=0;
while(have_posts()){
    if($count%2==0){
        echo '<div class="home-ci-row">';
        //draw your left div here
    }else if($count%2==1){
        //draw your gap here
        //draw your right div here
        echo '</div>';
    }
    $count++;
}
//close div if count is an odd number
if($count%2==1) echo '</div>';
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:37:20.417

是否可以换成for循环？这是你需要的吗？

```
for ($i = 0; $i < $numberOfElements; $i++)
{ 
    //if (odd number) && (this is the last element)
    if (($i % 0 == 1) && ($i == $numberOfElements - 1))
    {
        //Special Case
    }
    else
    {
        //Normal Case
    }
} 
```

警告：注意错误，PHP 不是我最擅长的语言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T07:35:17.930

fischi在[WP Development](http://wordpress.stackexchange.com) [StackExchange](https://wordpress.stackexchange.com/users/15680/fischi)上回答了这个问题

引用[他的回答](https://wordpress.stackexchange.com/a/90085/28550)：

你可以更容易地做到这一点。由于您正在制作可以通过浮动实现的布局，因此无需每秒钟声明一个 Row 。

在我的代码示例中，我只是使用`$count`来确定 HTML 元素的类。结合显示的帖子总数。

如果帖子总数`$wp_query->post_count`达到`$count`AND 总数是奇数，我给元素 Class `fullwidth`。同样，我确定它是第一个还是第二个（参见 IF 语句）。

之后我需要做的就是为循环中的每个 HTML 元素输出相应的类。除了类之外，没有元素彼此不同。

我使用`Modulo`PHP ( `%`) 中的运算符来确定奇数/偶数。`1`如果我使用它会提供`$count % 2`并且`$count`很奇怪。如果您不确定此运算符，请在[此处](http://www.php.net/manual/en/language.operators.arithmetic.php)阅读。

因此，您的代码可能如下所示：

```
<?php
    $count = 0;
    if (have_posts()): while (have_posts()) : the_post();
        if ( ++$count == $wp_query->post_count && ( $wp_query->post_count % 2 ) == 1 ) {
            // if final count is reached AND final count is odd
            // full width item
            $postclass = "fullwidth";
            $opentag = '';
            $closingtag = '</div>';
        } else if ( ( $count % 2 ) == 1 ) {
            // if $count is odd it is the first item in a 'row'
            $postclass = "halfwidth first";
            $opentag = '<div class="home-ci-row">';
            $closingtag = '';
        } else {
            // second item in a row
            $postclass = "halfwidth second";
            $opentag = '';
            $closingtag = '</div>';
        }
?>
    <?php echo $opentag; ?>
    <div class="main-column-item-wrap <?php echo $postclass; ?>">
    CONTENT OF POST : Title, Thumbnail, Excerpt... etc
    </div><!-- main-column-item-wrap -->
    <?php echo $closingtag; ?>

<?php endwhile; endif; ?> 
```

# image - jquery.corner.js 插件，我无法让它在图像上工作

> ID：15308768
> 
> 赞同：1
> 
> 时间：2013-03-09T08:29:51.493
> 
> 标签：image, jquery-plugins, rounded-corners

我有 jquery 的代码 corect 来制作圆角。我只用背景颜色对其进行了测试，它工作正常。

但是，我想将角应用于图像。它对我不起作用！

我创建了一个示例页面，其中我有该类的图像，就在具有相同类但只有背景颜色的 div 旁边。图像不起作用，但彩色“框”可以。

我尝试了三种不同的方式对其进行编码，但仍然无法正常工作。（我不需要所有三种编码方式都可以工作......只要一种就可以了！;'D）

这是我的小提琴链接：http: [//jsfiddle.net/SunnyOz/g46Gx/](http://jsfiddle.net/SunnyOz/g46Gx/)

这是在线测试页面：[http ://www.webau.net/TC/example/corner_test.htm](http://www.webau.net/TC/example/corner_test.htm)

这是CSS：

```
* {
    border: 0 none;
  }

.content {
    width: 900px;
    background-color: #fff; 
    margin: 0 auto;
}

.innertube {
    padding: 20px;
}

.imgBox, .imgBox img { width:493px; height:257px; margin:0; padding:0 }

.divToHaveCorners, .divToHaveCorners img { width:493px; height:257px; margin:0; padding:0; display: block; } 
```

这是HTML：

```
<div class="content">

  <div class="innertube">

    <br clear="all" />
    <br clear="all" />

    <img class="roundimg" src="http://webau.net/TC/example/images/motorcycle1.jpg" /> &nbsp;&nbsp;&nbsp; 
    <div class="roundimg" style="width: 200px; height: 100px; background-color: #701080;">Hello World!</div>

    <br clear="all" />
    <br clear="all" />

    <div class="imgBox"><img src="http://webau.net/TC/example/images/motorcycle1.jpg" /></div> &nbsp;&nbsp;&nbsp; 
    <div class="imgBox" style="width: 200px; height: 100px; background-color: #701080;">Hello World!</div>

    <br clear="all" />
    <br clear="all" />

    <img class="divToHaveCorners" src="http://webau.net/TC/example/images/motorcycle1.jpg" /> &nbsp;&nbsp;&nbsp; 
    <div class="divToHaveCorners" style="width: 200px; height: 100px; background-color: #701080;">Hello World!</div>

    <br clear="all" />
    <br clear="all" />

  </div>
</div> 
```

这是内部Javascript代码：

```
$(document).ready(function(){
     $(".roundimg").corner("tl 50px").corner("br 50px");
     $(".imgBox").corner("15px");
     $('.divToHaveCorners').corner();
}); 
```

我的外部 JS 引用是：

```
<script type="text/javascript" src="http://webau.net/TC/example/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="http://webau.net/TC/example/jquery.corner.js"></script> 
```

.

我假设我遗漏了一些非常简单的东西..但我就是看不到它。任何帮助将不胜感激。

谢谢， SunnyOz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:14:27.813

这样做了，但是还有大量的插件可以让这些东西更容易使用，比如[imgr](http://www.steamdev.com/imgr/)。另外-[将此](http://www.malsup.com/jquery/corner/)作为参考可能对您很有帮助。干杯!

```
<!DOCTYPE html>
<html>
<head>
<style>
#imgBox, #imgBoxPlain, #imgBox img { background-color: #701080; width:493px; height:257px; margin:0;padding:0;}
</style>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="jquery.corner.js"></script>
<script type="text/javascript">
$.fn.corner.defaults.useNative = false;
    $(document).ready(function(){
        $("#imgBox").corner("15px");
        $("#imgBoxPlain").corner("15px");
    });
</script>
</head>
<body>
<div class="content">
  <div class="innertube">
    <div id="imgBox"><img src="images/motorcycle1.jpg" /></div>
    <div id="imgBoxPlain" style="width: 200px; height: 100px;">Hello World!</div>
  </div>
</div>

</body>
</html> 
```

# linux - 在 Linux 上读取 USB 批量消息

> ID：15308770
> 
> 赞同：2
> 
> 时间：2013-03-09T08:30:15.427
> 
> 标签：linux, usb

我正在尝试有关 USB 的课程[http://www.linuxforu.com/2011/12/data-transfers-to-from-usb-devices/](http://www.linuxforu.com/2011/12/data-transfers-to-from-usb-devices/)并遇到问题 - 阅读时，usb_bulk_msg 返回错误 22 - 无效参数。写操作成功。

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/usb.h>

#define MIN(a,b) (((a) <= (b)) ? (a) : (b))
#define BULK_EP_OUT 0x01
#define BULK_EP_IN 0x82
#define MAX_PKT_SIZE 512

static struct usb_device *device;
static struct usb_class_driver class;
static unsigned char bulk_buf[MAX_PKT_SIZE];

static int pen_open(struct inode *i, struct file *f)
{
    return 0;
}
static int pen_close(struct inode *i, struct file *f)
{
    return 0;
}
static ssize_t pen_read(struct file *f, char __user *buf, size_t cnt, loff_t *off)
{
    int retval;
    int read_cnt;

    /* Read the data from the bulk endpoint */
    retval = usb_bulk_msg(device, usb_rcvbulkpipe(device, BULK_EP_IN),
            bulk_buf, MAX_PKT_SIZE, &read_cnt, 5000);
    if (retval)
    {
        printk(KERN_ERR "Bulk message returned %d\n", retval);
        return retval;
    }
    if (copy_to_user(buf, bulk_buf, MIN(cnt, read_cnt)))
    {
        return -EFAULT;
    }

    return MIN(cnt, read_cnt);
}
static ssize_t pen_write(struct file *f, const char __user *buf, size_t cnt, loff_t *off)
{
    int retval;
    int wrote_cnt = MIN(cnt, MAX_PKT_SIZE);

    if (copy_from_user(bulk_buf, buf, MIN(cnt, MAX_PKT_SIZE)))
    {
        return -EFAULT;
    }

    /* Write the data into the bulk endpoint */
    retval = usb_bulk_msg(device, usb_sndbulkpipe(device, BULK_EP_OUT),
            bulk_buf, MIN(cnt, MAX_PKT_SIZE), &wrote_cnt, 5000);
    if (retval)
    {
        printk(KERN_ERR "Bulk message returned %d\n", retval);
        return retval;
    }

    return wrote_cnt;
}

static struct file_operations fops =
{
    .open = pen_open,
    .release = pen_close,
    .read = pen_read,
    .write = pen_write,
};

static int pen_probe(struct usb_interface *interface, const struct usb_device_id *id)
{
    int retval;

    device = interface_to_usbdev(interface);

    class.name = "usb/pen%d";
    class.fops = &fops;
    if ((retval = usb_register_dev(interface, &class)) < 0)
    {
        /* Something prevented us from registering this driver */
        err("Not able to get a minor for this device.");
    }
    else
    {
        printk(KERN_INFO "Minor obtained: %d\n", interface->minor);
    }

    return retval;
}

static void pen_disconnect(struct usb_interface *interface)
{
    usb_deregister_dev(interface, &class);
}

/* Table of devices that work with this driver */
static struct usb_device_id pen_table[] =
{
    { USB_DEVICE(0x058F, 0x6387) },
    {} /* Terminating entry */
};
MODULE_DEVICE_TABLE (usb, pen_table);

static struct usb_driver pen_driver =
{
    .name = "pen_driver",
    .probe = pen_probe,
    .disconnect = pen_disconnect,
    .id_table = pen_table,
};

static int __init pen_init(void)
{
    int result;

    /* Register this driver with the USB subsystem */
    if ((result = usb_register(&pen_driver)))
    {
        err("usb_register failed. Error number %d", result);
    }
    return result;
}

static void __exit pen_exit(void)
{
    /* Deregister this driver with the USB subsystem */
    usb_deregister(&pen_driver);
}

module_init(pen_init);
module_exit(pen_exit);

MODULE_LICENSE("GPL");
MODULE_AUTHOR("Anil Kumar Pugalia <email_at_sarika-pugs_dot_com>");
MODULE_DESCRIPTION("USB Pen Device Driver"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-16T20:34:14.853

这个错误可能有很多可能的原因，但在我的例子中，BULK_EP 地址是错误的。我建议在探测函数中设置端点地址，而不是硬编码它们。请随意参考以下代码来设置批量端点地址。

```
static void
set_bulk_address (
    struct my_device *dev,
    struct usb_interface *interface)
{
    struct usb_endpoint_descriptor *endpoint;
    struct usb_host_interface *iface_desc;
    int i;

    iface_desc = interface->cur_altsetting;
    for (i = 0; i < iface_desc->desc.bNumEndpoints; ++i) {
        endpoint = &iface_desc->endpoint[i].desc;

        /* check for bulk endpoint */
        if ((endpoint->bmAttributes & USB_ENDPOINT_XFERTYPE_MASK) 
            == USB_ENDPOINT_XFER_BULK){

            /* bulk in */
            if(endpoint->bEndpointAddress & USB_DIR_IN) {
                dev->bulk_in_add = endpoint->bEndpointAddress;
                dev->bulk_in_size = endpoint->wMaxPacketSize;
                dev->bulk_in_buffer = kmalloc(dev->bulk_in_size,
                                GFP_KERNEL);
                if (!dev->bulk_in_buffer)
                    print("Could not allocate bulk buffer");
            }

            /* bulk out */
            else
                dev->bulk_out_add = endpoint->bEndpointAddress; 
        }
    }
} 
```

您可能会注意到，我已经定义了自己的设备结构来保存端点信息。这是我的结构定义

```
struct my_device {
    struct usb_device   *udev;      /* usb device for this device */
    struct usb_interface    *interface; /* interface for this device */
    unsigned char       minor;      /* minor value */
    unsigned char *     bulk_in_buffer; /* the buffer to in data */
    size_t          bulk_in_size;   /* the size of the in buffer */
    __u8            bulk_in_add;    /* bulk in endpoint address */
    __u8            bulk_out_add;   /* bulk out endpoint address */
    struct kref     kref;       /* module references counter */
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T12:57:59.920

错误即将到来，因为您必须根据您的 USB 设备提及正确的批量端点，而不是示例代码中给出的那些。为此，您可以检查`/sys/kernel/debug/usb/devices`文件或`/proc/bus/usb/devices`. 在文件中检查包含设备的 vendorId 和 productId 的部分，并在该部分中检查`E`端点的段。在该段中，带有的一个`(I)`将是`BULK_EP_IN`值，而带有的一个`(O)`将是 的值`BULK_EP_OUT`。

# algorithm - 在哪里可以找到一组困难的旅行推销员问题（具有已知的解决方案/近似值）？

> ID：15308772
> 
> 赞同：2
> 
> 时间：2013-03-09T08:30:16.667
> 
> 标签：algorithm, language-agnostic, np-complete, traveling-salesman, np-hard

我想尝试寻找解决旅行商问题的启发式/近似方法，为了做到这一点，我正在寻找一些“硬” TSP 实例（以及它们最知名的解决方案），以便我可以尝试解决他们，看看我能做多好。

理想情况下，它们只是基于文本的邻接矩阵列表或邻接列表（我不想处理解析，只是算法）。
通过“硬”，我的意思是它们实际上应该是不可能使用蛮力解决或近似的。
（这样我就可以有理由相信，如果我找到一个接近最知名答案的答案，那么我实际上是在做正确的事情，而不仅仅是走运。）

是否有任何列表可以用于此目的？我搜索了一下，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:36:12.807

[这是关于 SE 部分回答您的问题的另一个问题](https://stackoverflow.com/questions/2958172/traveling-salesman-example-with-known-global-optimum?rq=1)（它列出了问题，但其中大多数似乎没有提供解决方案，但无论如何您最好检查链接 - 事情可能已经改变）。

如果找不到它们，如何随机生成一组节点以及连接它们的路径，将路径长度保存为“最小”（确保两个节点之间的最长连接永远不会 > X），然后添加一个一堆其他路径确保这些都是> X？

这样（除非我遗漏了什么）你有一组连接节点“你想要的那么复杂”，并且从一开始就知道实际最短的连接路径......

* * *

附录 - 如果你真的想看看你与现有工具的比较，那么你必须在你生成的问题上运行这些。一个免费且可访问的（但我不知道它可能有多“高效”）是[R 的 TSP 库](http://cran.r-project.org/web/packages/TSP/index.html)。

维基百科[为此提供了其他免费 sw 软件包的列表](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Free_software_for_solving_TSP)。

也许您可以创建一个不同的 SE 问题，询问如何获得其他 TSP 工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:45:40.583

TSP gatech 站点似乎是 TSP 信息的规范站点。

以下是可用数据集的列表：[http ://www.tsp.gatech.edu/data/index.html](http://www.tsp.gatech.edu/data/index.html)

最佳解决方案适用于超过 10 000 个城市的某些数据集。并且有超过 1,000,000 个城市的可用数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:49:23.753

有一个众所周知的算法可以找到最佳的 TSP 解决方案 - 它被称为蛮力。

因此，您可以比较两种算法的唯一真正方法必须是解决方案的质量以及其他一些标准——通常是运行时间。

即使在这里你也会遇到问题。许多算法都是有效的搜索算法，搜索的时间越长，评估的可能解决方案就越多。这些算法已经权衡了质量和运行时间。它们可能会或可能不会导致某些或所有图表的正确（最佳）答案。

您能够将您的算法与其他算法进行比较的唯一真正方法是实现其他算法，然后将您的算法和它们抛出相同的难题（正如其他人所指出的那样，至少可以轻松解决某些类型的难题）。实施这些现有算法可能会提出改进您的算法的方法。[http://en.wikipedia.org/wiki/Travelling_salesman_problem](http://en.wikipedia.org/wiki/Travelling_salesman_problem)有很多算法，至少有几个看起来很容易编码。为什么不将它们作为您算法的第一个基准？

# java - Spring messageSource 在 JSP 中有效，在 jUnit 测试中无效

> ID：15308773
> 
> 赞同：3
> 
> 时间：2013-03-09T08:30:17.530
> 
> 标签：java, spring, spring-mvc

我有一个带有 servlet-context.xml 的 spring MVC 应用程序：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/mvc 
    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.2.xsd
    http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd
    ">

<annotation-driven validator="validator"/>

<resources mapping="/resources/**" location="/resources/" />

<default-servlet-handler/>  

<!-- Apache Tails configuration -->
<beans:bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" id="tilesViewResolver">
    <beans:property name="viewClass" value="org.springframework.web.servlet.view.tiles3.TilesView"/>
</beans:bean>

<beans:bean class="org.springframework.web.servlet.view.tiles3.TilesConfigurer" id="tilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/layouts/layouts.xml</beans:value>
            <beans:value>/WEB-INF/views/**/views.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean>

<interceptors>
    <beans:bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" p:paramName="lang"/>
</interceptors> 

<beans:bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
            id="messageSource"
            p:basenames="WEB-INF/i18n/application, WEB-INF/i18n/validation_messages"
            />
<beans:bean class="org.springframework.web.servlet.i18n.CookieLocaleResolver"
            id="localeResolver"
            p:cookieName="locale"/>

<beans:bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <beans:property name="validationMessageSource" ref="messageSource"/>
</beans:bean>

<context:component-scan base-package="com.myapp.mvc" /> 
```

我在 WEB-INF/i18n/ 文件夹中只有两个 .properties 文件：

WEB-INF/i18n/application.properties

WEB-INF/i18n/validation_messages.properties

messageSource 在 JSP 页面中工作正常：

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<fmt:message key="validation.User.NULL_FIRST_NAME"/> 
```

在 Hibernate 验证器中：

```
@Entity
@Table(name="users")
public class User {

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "id", unique = true, nullable = false)
private Long id;

@Column(name="first_name")
@NotNull(message = "{validation.User.NULL_FIRST_NAME}")
@Size(max = 255, message = "{validation.User.TOO_LONG_FIRST_NAME}")
private String firstName;

//... getters and setters
} 
```

但它在 jUnit 测试类中不起作用：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {JPATestConfig.class})
public class AbstractJpaTest {

@Inject
private MessageSource messageSource;

public void fillValidationMessages() {
Locale locale = null;
User_NULL_FIRST_NAME = messageSource.getMessage("validation.User.NULL_FIRST_NAME", null, locale);
}
} 
```

我尝试使用 MessageSourceAware 和不同的语言环境，但每次我都有同样的错误：

```
org.springframework.context.NoSuchMessageException: No message found under code 'validation.User.NULL_FIRST_NAME' for locale 'null'.
at org.springframework.context.support.DelegatingMessageSource.getMessage(DelegatingMessageSource.java:65)
at org.springframework.context.support.AbstractApplicationContext.getMessage(AbstractApplicationContext.java:1234)
at com.dominform.mvc.AbstractJpaTest.fillValidationMessages(AbstractJpaTest.java:198)
at com.dominform.mvc.jpa_tests.UserUtilTest.init(UserUtilTest.java:21)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T10:02:09.897

您正在尝试在对象中传递`null`值。`Locale`请尝试使用默认语言环境：

```
Locale locale = Locale.getDefault();
User_NULL_FIRST_NAME = messageSource.getMessage("validation.User.NULL_FIRST_NAME", null, locale); 
```

但这不是唯一的一个原因。似乎上下文的路径`spring-servlet.xml`与 JUnit 上下文不同。

因此，对于 JUnit 测试，您需要将`basenames`语言环境更改为以下内容：

```
<beans:bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
        id="messageSource"
        p:basenames="file:src/main/webapp/WEB-INF/i18n/application, file:src/main/webapp/WEB-INF/i18n/validation_messages"
        /> 
```

为了统一 Spring Servlet Config 和 JUnit 测试，我建议将消息​​包（即`i18n`文件夹）移动到`resources`maven 的文件夹中并使用`classpath:`前缀访问它。因此，在这两种情况下，它都将如下所示：

```
<beans:bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
        id="messageSource"
        p:basenames="classpath:i18n/application, classpath:i18n/validation_messages"
        /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:19:17.020

你在 JPATestConfig.class 中配置了你的 messageSource 吗？您可以使用此配置托盘运行您的测试。

```
@ContextConfiguration(locations = {"file:src/main/webapp/WEB-INF/servlet-context.xml})" 
```

# excel - 将来自多个用户表单的数据提交到指定的工作表

> ID：15308774
> 
> 赞同：1
> 
> 时间：2013-03-09T08:30:32.870
> 
> 标签：excel, vba

当我只使用一个用户窗体时，此代码运行良好。

```
Private Sub CommandButtonSubmitSalesEntry_Click()

Dim nextrow As String
'find next empty row

nextrow = Application.WorksheetFunction.CountA(Range("a:a")) + 1    
Cells(nextrow, 1) = TextBoxDate.Text    
Cells(nextrow, 2) = EmployeeNames.Text    
Cells(nextrow, 3) = ComboBoxStationNames.Text    
Cells(nextrow, 4) = ComboBoxSalesRates.Text  

Unload Me
UserFormSales.Show 
```

现在我已经创建了第二个用户表单，他们已经开始向随机工作表提交数据。如何定义我希望数据转到哪个工作表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:33:43.087

只需激活您想要的工作表：

```
Sheets("Sheet1").Activate 
```

# c# - WCF 服务的对象设计

> ID：15308780
> 
> 赞同：0
> 
> 时间：2013-03-09T08:31:27.883
> 
> 标签：c#, wcf

我正在编写一个小型 WCF 服务来返回基于 GPS 数据的地址。这只是我自己的学习应用程序。

目前，我的 WCF 公开了一个名为 GpsData 的对象类型，它具有 Lat 和 Long。它被装饰成`[DataContract]`.

然后我有一个方法，`getLocationByGpsData (GpsData);`

在我最近参与的一个项目中，他们会以不同的方式进行。他们有一个名为 的对象`LocationByGpsDataRequest`，其中包含一个 GpsData 对象。它会返回一个 '`LocationByGpsDataReply`对象，其中包含 GpsData 对象以及一些额外的地址相关数据。

所以：

```
LocationByGpsDataReply reply = getLocationByGpsData(new LocationByGpsDataRequest { Lat=...; long=...' }; 
```

首先，他们的模型更好吗？也许它更具可读性？

其次，我真的不想自己公开 GpsData 对象。它总是包含在父类中。

```
var latitude = reply.GpsData.Latitude; 
```

有没有办法“隐藏” GpsData 是一个独立的对象，这样当客户端看到`ObjectTypes`我的 WCF 服务公开的列表时，他们只会看到我打算使用的那些？希望这是有道理的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:49:58.790

是的，我同意他们的方法更好。

另外，在 GPSdata 对象中隐藏属性（lat, long）的问题可以通过使用 [Ignore Properties] 标签来解决。

# javascript - 为一组 Web Audio API 节点创建一个简单的构造函数

> ID：15308781
> 
> 赞同：0
> 
> 时间：2013-03-09T08:31:43.037
> 
> 标签：javascript, constructor, web-audio-api

我有一批类似于下面代码的 Web 音频 API 节点。我想将其抽象为一个简单的构造函数，但我遇到了麻烦。我不确定我做错了什么。最终结果应该类似于

```
function filterTemplate(name,freqVal){
     this.name = context.createBiquadFilter();
     this.name.type = 5;    
     this.name.gain.value = null;    
     this.name.Q.value = 1;                  
     this.name.frequency.value = this.freqVal;      // freqVal is here

} 
```

当我调用函数时：

```
var filter = new filterTemplate("theName",200);  //Uncaught TypeError: Cannot call method 'createBiquadFilter' of undefined 
```

我将方法更改为如下所示，错误已删除

```
this.name = function(){return context.createBiquadFilter()}; 
```

但后来我得到了各种属性值的另一个错误

```
//Uncaught TypeError: Cannot set property 'value' of undefined 
```

对于使用内置浏览器方法和属性创建普通构造函数的正确方法，我真的很困惑。

**我想将下面的代码抽象为类似于上面的代码**

```
filter1 = context.createBiquadFilter();
filter1.type = 5;    
filter1.gain.value = null;    
filter1.Q.value = 1;                  
filter1.frequency.value = 80;              // Changes

filter2 = context.createBiquadFilter();
filter2.type = 5;    
filter2.gain.value = 0;    
filter2.Q.value = 1;                  
filter2.frequency.value = 240;            // Changes

filter3 = context.createBiquadFilter();
filter3.type = 5;    
filter3.gain.value = 0;    
filter3.Q.value = 1;                  
filter3.frequency.value = 750;            // Changes

filter4 = context.createBiquadFilter();
filter4.type = 5;    
filter4.gain.value = 0;    
filter4.Q.value = 1;                  
filter4.frequency.value = 2200;            // Changes

filter5 = context.createBiquadFilter();
filter5.type = 5;    
filter5.gain.value = 0;    
filter5.Q.value = 1;                  
filter5.frequency.value = 6000;           // Changes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:38:05.877

构建器模式非常适合这种情况。特别是当您可以设置很多属性时。

[http://jsfiddle.net/yw8Fm/](http://jsfiddle.net/yw8Fm/)

您可以像这样创建一个简单的`FilterTemplate`类。

```
function FilterTemplate(builder) {
    this.context = builder._context;
    this.context.type = builder._type;    
    this.context.gain.value = builder._gainValue;    
    this.context.Q.value = builder._qValue;                  
    this.context.frequency.value = builder._frequencyValue;
} 
```

它将构建器对象作为构造函数参数。这里是`Builder`.

```
FilterTemplate.Builder = function () {
    this._context = context.createBiquadFilter();
    this._type = 5;    
    this._gainValue = null;    
    this._qValue = 1;                  
    this._frequencyValue = 80;

    this.context = function (val) { 
        this._context = val; return this; 
    };

    this.type = function (val) { 
        this._type = val; return this; 
    };

    this.gainValue = function (val) { 
        this._gainValue = val; return this; 
    };

    this.qValue = function (val) { 
        this._qValue = val; return this; 
    };

    this.frequencyValue = function (val) { 
        this._frequencyValue = val; return this; 
    };
}; 
```

您可以根据需要进一步扩展此示例。现在您可以`FilterTemplates`轻松创建。

```
var filter1 = new FilterTemplate(
    (new FilterTemplate.Builder()).frequencyValue(80)
);

var filter2 = new FilterTemplate(
    (new FilterTemplate.Builder()).frequencyValue(80).qValue(2)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:19:40.650

您的问题在于上下文变量的范围。

```
var filter = new filterTemplate("theName",200);  //Uncaught TypeError: Cannot call method 'createBiquadFilter' of undefined 
```

...意味着上下文变量在您尝试访问它的位置（在 filterTemplate 构造函数中）不可用。当你这样做...

```
this.name = function(){return context.createBiquadFilter()}; 
```

...您将函数分配给 this.name ，并且在函数运行之前它不会尝试访问上下文，因此错误被删除。相反，您在 this.name 中没有过滤器，而是一个函数，而一个函数没有 gain 属性，因此当您尝试设置 this.name.gain.value 时会出现错误.

您应该寻找的是定义上下文的位置，并确保可以从 filterTemplate 中访问该变量。

# c - 将整数值存储在 C 中的字符数组中

> ID：15308783
> 
> 赞同：4
> 
> 时间：2013-03-09T08:32:04.427
> 
> 标签：c, char, int

这是一个非常微不足道的问题，但我不知道为什么我没有得到正确的输出。这是我正在尝试做的事情：

```
char sendBuffer[1000];
int count=0:
while(count<10)
{
    sendBuffer[0]=count;
    sendBuffer[1]='a';
    sendBuffer[2]='b';
    sendBuffer[3]='c';
    sendBuffer[4]='\0';
    printf(%s,sendBuffer);
    count=count+1;
} 
```

在输出中，除了第一个索引之外，所有缓冲区都正确打印。我希望在缓冲区的开头打印 1,2,3 等，但它不起作用。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T08:33:49.623

您需要将该数字转换为字符。一个便宜的方法是：

```
sendBuffer[0] = '0' + count; 
```

> 无论如何显示大于9的整数

如果您需要，您将希望转向更精细的方案。例如，如果您想将整数 42 转换为字符串“42”，您可以说：

```
#define ENOUGH ((CHAR_BIT * sizeof(int) - 1) / 3 + 2)

char str[ENOUGH];
snprint(str, sizeof str, "%d", 42); 
```

`ENOUGH`归功于caf 。[_](https://stackoverflow.com/a/8257728/714501)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T08:33:31.487

`printf(%s,sendBuffer);`应该`printf("%s",sendBuffer);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T08:35:12.357

改变

```
sendBuffer[0]=count; 
```

至

```
sendBuffer[0]='0' + count; 
```

即将整数 0...9 转换为字符 '0' ... '9'

还要添加报价，即`printf("%s",sendBuffer);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T08:38:05.057

要将整数值转换为 char 表示形式，请添加字符 '0' 的值：

```
sendBuffer[0]=count + '0'; 
```

请注意，这是字符`'0'`，而不是数字 0。这是因为[ascii 值](http://www.asciitable.com/)的工作方式。字面值为 0 的 char 是`\0`空终止符。数字“0”的字面值是 48，“1”是 49，依此类推。

这适用于数字 0-9。显然，您不能将大于单个字符的数字的字符表示形式放在单个字符中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T08:39:30.393

从问题中引用：

> 在输出中，除了第一个索引之外，所有缓冲区都正确打印。我希望在缓冲区开始时打印 1、2、3 等，但它不起作用。请帮忙

我认为她的问题是她没有得到第一行的任何输出。这是因为在第一次迭代中，count 为 0，即 sendBuffer[0] 为 0，即 '\0' 字符。因此，字符串被视为空。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-09T08:45:20.723

您正在尝试打印与十进制值 0-9 对应的 ascii 字符，这些字符是不可打印的字符。如果您需要打印十进制 0-9，则将 count 初始化为 48，这是 '0' 的 ascii 十进制代码，并将 while 块中的条件更改为 count < 58；57 是 '9' 的 ascii 十进制代码。见下文：

```
char sendBuffer[1000];
int count=48:
while(count<58)
{
    sendBuffer[0]=count;
    sendBuffer[1]='a';
    sendBuffer[2]='b';
    sendBuffer[3]='c';
    sendBuffer[4]='\0';
    printf(%s,sendBuffer);
    count=count+1;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-09T09:27:09.163

```
char sendBuffer[1000];

// take fixed stuff outside the loop
    sendBuffer[1]='a';
    sendBuffer[2]='b';
    sendBuffer[3]='c';
    sendBuffer[4]='\0';

// it's best not to rely on order of ASCII values

for(char* numbers="0123456789"; *numbers!=0; numbers++){// use for loop for numbers
    sendBuffer[0] = *numbers;

    printf("%s",sendBuffer);
} 
```

# ruby-on-rails-3 - 锚点和炼油厂 cms 菜单 sub uri 的路由不正确

> ID：15308791
> 
> 赞同：1
> 
> 时间：2013-03-09T08:33:18.337
> 
> 标签：ruby-on-rails-3, apache2, passenger, refinerycms

我已经开发了 ruby​​ on rails 应用程序，并尝试通过引用此[链接](http://www.modrails.com/documentation/Users%20guide%20Apache.html#RackBaseURI)使用 apache-passenger sub uri 部署它。图像、css 和 javascripts 可以正常工作。但是锚标签和炼油厂 cms 的其他菜单选项卡不起作用。

我的锚标记代码是

```
<a href=<%= "#{request.env['HTTP-HOST']}/product_details/gotoLink/#{p1}/#{p2}" %> target="_blank" id="zoomid"></a> 
```

我已经在“/admin”上安装了炼油厂 cms。当我使用[http://mydomain.com/suburi](http://mydomain.com/suburi)访问它时，它会成功登录，但是当我点击页面、文件等菜单时，我会收到 404 错误。

如果没有 sub uri，相同的应用程序也可以正常工作。请任何人帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:43:48.677

我提到了[这个](https://stackoverflow.com/questions/7295744/how-to-deploy-rails-3-1-app-in-a-subdirectory)url，通过以下更改解决了问题

我解决了这样的第一个问题

```
rake RAILS_RELATIVE_URL_ROOT=/suburi assets:precompile RAILS_ENV=production 
```

RAILSapp -> 配置 -> 环境 -> production.rb

```
config.action_controller.relative_url_root = ENV['RAILS_RELATIVE_URL_ROOT'] 
```

在视图中我确实喜欢这样

```
<a href=<%= "#{request.env['HTTP-HOST']}#{ENV['RAILS_RELATIVE_URL_ROOT']}/product_details/#{p1}/#{p2}" %> target="_blank" id="zoomid" >Link Name</a> 
```

对于炼油厂，我添加了 app->views->refinery->admin->_menu.html.erb

```
<%= link_to plugin.title, refinery.url_for("#{ENV['RAILS_RELATIVE_URL_ROOT']}#{plugin.url}"),:class => ("active" if plugin.highlighted?(params)),:id => "plugin_#{plugin.name}" %> 
```

并在应用程序-> 视图-> 炼油厂-> _site_bar.html.erb

```
<%= link_to "Home", "#{ENV['RAILS_RELATIVE_URL_ROOT']}" -%> 
```

我的问题得到了解决。如果这不是正确的方法，请告诉我正确的方法

谢谢

# vb.net - 如何在 VB.Net 中验证 DataGridViewTextBoxColumn？

> ID：15308797
> 
> 赞同：0
> 
> 时间：2013-03-09T08:33:51.550
> 
> 标签：vb.net, visual-studio-2010, datagridview

我是 Windows 桌面应用程序开发的新手。

我正在使用 DataGridViewTextBoxColumn 类型的网格视图，用户可以在其中输入数据。网格视图 Qty & Rate 中有两列，用户不应在其中输入除数字以外的值。

我想验证这两列。我该如何实现这一目标。？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:41:41.793

CellValidating 事件处理程序用于确定 Qty 和 Rate 列中单元格的值是否不是整数。如果单元格值验证失败，请将 DataGridViewCellValidatingEventArgs 类的 Cancel 属性设置为 true。

# google-chrome-extension - 用于搜索网站的 Chrome 扩展程序？

> ID：15308800
> 
> 赞同：1
> 
> 时间：2013-03-09T08:33:59.813
> 
> 标签：google-chrome-extension

我正在尝试创建一个 google chrome 扩展程序（我几乎是编程新手，虽然我了解一些基础知识），它将在视频流媒体网站上搜索您输入的标题。该站点有点慢，并且通过一两个页面到达站点的搜索栏可能会很痛苦。我（现在）希望这个扩展与网站现有的搜索 url 相关联。这是网址的一部分。当您将搜索字段留空并进行搜索时，这是生成的 URL

anisrch_title=&op=srch&anisrch_cat=

当您实际搜索某些内容时，它只是按如下方式插入搜索词：

anisrch_title=（在**此处搜索不带括号的术语**）&op=srch&anisrch_cat=

正如我之前提到的，我是一个编程新手，对各种编程技术都不熟悉。我将如何制作一个扩展程序，将您重定向到 URL + 插入适当位置的搜索词？

例如，单击扩展图标后，会出现一个带有文本字段和“开始”按钮的弹出窗口。文本字段输入 = SearchTitle

单击“开始”按钮后，扩展程序会将您重定向到完整链接：anisrch_title=( **SearchTitle** )&op=srch&anisrch_cat=

请耐心等待我，因为我是编码新手，我还在学习。我正在为此制作的网站因负载过重和服务器资源不足而紧张。有人可以帮我完成这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:29:08.243

> 例如，单击扩展图标后，会出现一个带有文本字段和“开始”按钮的弹出窗口。文本字段输入 = SearchTitle

使用浏览器操作 ( [https://developer.chrome.com/trunk/extensions/browserAction.html](https://developer.chrome.com/trunk/extensions/browserAction.html) )。浏览器操作的弹出窗口可以是 html 页面。只需将您的文本字段、转到按钮等放在 popup.html 中即可。

> 单击“开始”按钮后，扩展程序会将您重定向到以下完整链接：anisrch_title=(SearchTitle)&op=srch&anisrch_cat=

重定向？您的意思是在当前选项卡中打开搜索页面吗？如果是这种情况，请在按钮的 onclick 处理程序中使用`chrome.tabs.update`（[https://developer.chrome.com/extensions/tabs.html#method-update](https://developer.chrome.com/extensions/tabs.html#method-update)）（例如，您的按钮 ID 是`go`，文本字段 ID 是`query`）。由于 CSP ( [https://developer.chrome.com/trunk/extensions/contentSecurityPolicy.html](https://developer.chrome.com/trunk/extensions/contentSecurityPolicy.html) )，您必须将 JavaScript 代码放在单独的 popup.js 中并在 popup.html 中引用它。

```
document.getElementById('go').addEventListener('click', function() {
  chrome.tabs.update({url: 'http://yoursite.com/path?anisrch_title=' + document.getElementById('query')'&op=srch&anisrch_cat='});
}); 
```

如果您更喜欢打开新标签，请`chrome.tabs.create`改用。

如果您不熟悉 Chrome 扩展的基础知识，入门教程将对您有很大帮助：[https](https://developer.chrome.com/extensions/getstarted.html) ://developer.chrome.com/extensions/getstarted.html 。

# php - HTML 标签上的 PHP preg_match()

> ID：15308803
> 
> 赞同：2
> 
> 时间：2013-03-09T08:34:12.200
> 
> 标签：php, html, preg-match

我正在尝试使用 preg_match() 检索 to。

我写过：

```
<?php
$file=file_get_contents('Temp.txt');
$regexp='<div class\=\"cropped-image\" style\=\"width:102px;height:102px;\">(.*)  
</div>';
preg_match($regexp,$file,$string1);
echo $string1[0];
?> 
```

输入：

```
<table class="search-results" data-search-total="5068" data-search-type="artists" data-search-term="taylor" data-search-genre="all">
        <tr class="search-result artist">
<td>

    <div class="image">    
        <div class="thumbnail sm artist">
            <a href="/artist/taylor-swift-mn0000472102" data-tooltip="{&quot;id&quot;:&quot;MN0000472102&quot;,&quot;thumbnail&quot;:true,&quot;position&quot;:{&quot;my&quot;:&quot;left center&quot;,&quot;at&quot;:&quot;middle right&quot;}}">
                                <div class="cropped-image" style="width:102px;height:102px;" ><img src="http://cps-static.rovicorp.com/3/JPG_170/MI0003/436/MI0003436897.jpg?partner=allrovi.com" style="left:-25px" width="153" height="102" alt="Taylor Swift" data-debug="170x113 (63)"></div>                                </a>
        </div>
    </div>
    <div class="right-of-image">
         <div class="type">
            <span class="sprite2 icon-search-artist-new" title="artist"></span>
        </div>
        <div class="name">
            <a href="http://www.allmusic.com/artist/taylor-swift-mn0000472102" data-tooltip="{&quot;id&quot;:&quot;MN0000472102&quot;,&quot;thumbnail&quot;:true,&quot;position&quot;:{&quot;my&quot;:&quot;left center&quot;,&quot;at&quot;:&quot;middle right&quot;}}">Taylor Swift</a>            </div>

        <div class="info">
                                Country, Pop/Rock                            
            <br/>

                                2000s - 2010s                
        </div>

    </div>

</td> 
```

我得到的错误是：Warning: preg_match(): Unknown modifier '(' in TrialPHP.php on line 4。我在特殊字符之前也包含了 \。

我已经尝试使用[DOM 解析器](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)并且它运行成功。但是我必须使用正则表达式进行分配。我该如何进行？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:48:38.573

试试这个。刚刚测试它，它似乎工作：

```
<?php
$file=file_get_contents('test.txt');

$regexp='/\<div class\=\"cropped-image\" style\=\"width:102px;height:102px;\" \>(.*?)\<\/div\>/';
preg_match($regexp,$file,$string1);

//print_r($string1);
//echo "<hr />\n\n";
echo $string1[1];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:40:02.170

您需要一个分隔符，例如`#`.

尝试：

```
$regexp='#<div class="cropped-image" style="width:102px;height:102px;" >(.*)</div>#'; 
```

# entity-framework-4 - SqlParameter 已被另一个 SqlParameterCollection 包含

> ID：15308804
> 
> 赞同：0
> 
> 时间：2013-03-09T08:34:15.593
> 
> 标签：entity-framework-4, dbcontext, sqlparameter, pagedlist

我正在使用 EF DbContext SqlQuery 来获取使用 PagedList （[https://github.com/TroyGoode/PagedList](https://github.com/TroyGoode/PagedList)）的分页对象列表，我收到以下错误：

“SqlParameter 已被另一个 SqlParameterCollection 包含”

这是我的存储库代码：

```
var db = (DbContext)DataContext;
        const string sqlString =
            @"            
            WITH UserFollowerList
            AS 
            ( 
            SELECT uf.FollowId
            FROM UserFollow uf 
            WHERE uf.UserId = @UserId
            )
            SELECT * FROM UserFollowerList uf
            INNER JOIN [User] u ON uf.FollowId = u.UserId
            WHERE IsDeleted = 0
            "
            ;

        var userIdParam = new SqlParameter("UserId", SqlDbType.Int) {Value = userId};

        var userList =
            db.Database.SqlQuery<User>(sqlString, userIdParam)
            .ToPagedList(pageIndex, pageSize);

        return userList; 
```

但是当我在 SqlQuery 语句上调用 ToList 扩展时，它工作正常：

```
var userList = db.Database.SqlQuery<User>(sqlString, userIdParam).ToList(); 
```

分页列表代码：

```
private PagedList(IQueryable<T> source, int pageIndex, int pageSize)
    {
        TotalItemCount = source.Count();

        PageSize = pageSize;
        PageIndex = pageIndex;
        PageCount = TotalItemCount > 0 ? (int)Math.Ceiling(TotalItemCount / (double)PageSize) : 0;

        HasPreviousPage = (PageIndex > 0);
        HasNextPage = (PageIndex < (PageCount - 1));
        IsFirstPage = (PageIndex <= 0);
        IsLastPage = (PageIndex >= (PageCount - 1));

        ItemStart = PageIndex * PageSize + 1;
        ItemEnd = Math.Min(PageIndex * PageSize + PageSize, TotalItemCount);

        // add items to internal list
        if (TotalItemCount > 0)
            Data = pageIndex == 0 ? source.Take(pageSize).ToList() : source.Skip((pageIndex) * pageSize).Take(pageSize).ToList();
    } 
```

我已经解决了以下问题，但没有成功：

```
var param = new DbParameter[] { new SqlParameter { ParameterName = "UserId", Value = userId } 
```

我可以做些什么来解决我遇到的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-15T12:29:49.300

当使用对 SqlQuery 的通用调用（例如 db.Database.SqlQuery）时，您必须迭代到返回的 Set 的最后一条记录，以便释放结果集和相关参数。PagedList 使用 source.Take(pageSize).ToList() 不会读到源集的末尾。您可以通过在返回结果之前执行类似 foreach(User x in userList) 的操作来解决此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-06T17:00:51.783

`context.ExecuteQuery<my_type>(...);`仅供参考，我在使用 EF 5 DbContext 调用SqlParameters 数组时看到了完全相同的错误消息，其中 my_type 有一个`string`但 SQL 语句`int`为其中一个参数返回一个。

错误确实在返回映射中，但它说 SqlParameter 是罪魁祸首，这让我有点失望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T21:40:49.363

[我在http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api](http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api.aspx)尝试了 Diego Vega 的以下解决方案[.aspx](http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api.aspx)它对我有用：

```
 var person = context.Database.SqlQuery<Person>(
 "SELECT * FROM dbo.People WHERE Id = {0}", id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-25T20:59:19.283

当您在（SqlQuery 或 ExecuteSqlCommand）上使用参数时，在旧查询处理之前，您不能通过另一个查询使用主题。在 PagedList 方法中，您使用“source.Count();” 首先，您再次使用“源”的最后一行。这是不正确的。你有2个解决方案。1-使用 SqlQuery 或 ExecuteSqlCommand 将参数发送到 PagedList 方法和每个新主题 2-删除 PagedList 并将分页参数发送到 SqlQuery 或 ExecuteSqlCommand ，如下所示：

```
 const string sqlString =
        @"            
        WITH UserFollowerList
        AS 
        ( 
        SELECT uf.FollowId,ROW_NUMBER() OVER(ORDER BY uf.FollowId ) RowID
        FROM UserFollow uf 
        WHERE uf.UserId = @UserId
        )
        SELECT * FROM UserFollowerList uf
        INNER JOIN [User] u ON uf.FollowId = u.UserId
        WHERE IsDeleted = 0 and RowID BETWEEN (((@PageNumber- 1) *@PageSize)+ 1) AND (@PageNumber * @PageSize))
        "
        ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-15T10:18:44.773

即使这是我第一次使用单个参数查询数据库，也遇到了这个异常。并在“使用”中拥有上下文。当我将查询参数“硬编码”到字符串中时，由于某种原因它工作正常。但是，一旦我使用 SqlParameter，它就给了我“SqlParameter 已被另一个 SqlParameterCollection 包含”

这没有用：

`context.Database.SqlQuery<int?>(query, new SqlParameter("@TableName", tableName));`

这做到了：

`context.Database.SqlQuery<int>(query, new SqlParameter("@TableName", tableName));`

区别在于返回类型`int?`与`int`. 所以对于任何阅读本文的人。即使您确定它应该工作，也请检查您的 SqlQuery 的返回类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-24T14:39:29.973

这是旧的，但我遇到了同样的问题，有人在这里想到了解决方案 [https://dotnetfiddle.net/GpEd95](https://dotnetfiddle.net/GpEd95)

基本上你需要把它分成几个步骤才能得到你的分页查询

```
//step 1 set the page numbers    

    int pageNumber = 1;
    int pageSize = 2;

//step 2 set your parameters up

        var parm2 = new SqlParameter("param1", "Kevin");
        var parm1  = new SqlParameter("param1", "Kevin");
        var pageParm = new SqlParameter("@p2", (pageNumber - 1) * pageSize);
        var pageSizeParm = new SqlParameter("@p3", pageSize);

 //step 3 split your queries up into search and count

         var sqlString = @"SELECT FT_TBL.*
    FROM EquipmentMaintenances AS FT_TBL
        INNER JOIN FREETEXTTABLE(vw_maintenanceSearch, Search, @param1) AS KEY_TBL ON FT_TBL.EquipmentMaintenanceID = KEY_TBL.[KEY]
        WHERE FT_TBL.Status = 1  
                    ORDER BY RANK DESC,  FT_TBL.EquipmentMaintenanceID DESC OFFSET @p2 ROWS FETCH NEXT @p3 ROWS ONLY";

       var sqlCountString = @"SELECT COUNT(1)
FROM EquipmentMaintenances AS FT_TBL
    INNER JOIN FREETEXTTABLE(vw_maintenanceSearch, Search, @param1) AS KEY_TBL ON FT_TBL.EquipmentMaintenanceID = KEY_TBL.[KEY]
    WHERE FT_TBL.Status = 1  
                ";

//step 4 run your queries c# doesn't like the reusing of parameters so create 2 (e.g Kevin) so your results will run correctly.
            var main = _db.Database.SqlQuery<EquipmentMaintenance>(sqlString, parm1, pageParm, pageSizeParm).ToList();
            var count = _db.Database.SqlQuery<int>(sqlCountString, parm2).FirstOrDefault();

//step 5 created your paged object - I'm using x.pagedlist
            var paged = new StaticPagedList<EquipmentMaintenance>(main, pageNumber, pageSize, count); 
```

显然，您现在将其传递回您的视图或其他功能进行显示。

# ruby-on-rails - Rails，按嵌套项选择

> ID：15308817
> 
> 赞同：0
> 
> 时间：2013-03-09T08:36:33.327
> 
> 标签：ruby-on-rails, select, activerecord

```
class Client < ActiveRecord::Base
 attr_accessible :name
 has_many :comments, :dependent => :destroy
end

class Comment < ActiveRecord::Base
 attr_accessible :title, :date
 belongs_to :client
end 
```

如何在评论日期“2012-01-30”之前找到所有客户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:39:00.080

假设`date`是一个日期类型字段

```
Client.joins(:comments).where(comments: { date: Date.new(2012,1,30) }) 
```

# php - 在创建动态菜单方面需要帮助

> ID：15308827
> 
> 赞同：0
> 
> 时间：2013-03-09T08:37:58.800
> 
> 标签：php, mysql, dynamic, menu

我正在使用 PHP 开发一个网站，这是我第一次尝试动态菜单。

我正在做的是我为页面创建了一个表格。

表结构如下：

```
____________________________________________________________________________
|page_id|title|url|content|menu_title|show_on_navuigation|is_sub|parent_page|
|_______|_____|___|_______|__________|___________________|______|___________| 
```

这里`is_sub`表示是否是某个主菜单的下拉菜单。`parent_page`是子菜单的主菜单。

现在，我想要的是，比如

我创建了 2 个父页面：

`About Us`和`Test`

和 2 个子菜单：测试 aboutus 和 testsub，

测试 aboutus 是 About Us 的 sub，而 testsub 是 test 的 sub。

实际上应该如何查询和循环，以便菜单完美呈现。

提前致谢。

这是我的菜单结构：

```
<ul>
    <li class='has-sub'><a href='#'><span>About Us</span></a>
      <ul>
         <li><a href='corporateprofile'><span>Corporate Profile</span></a></li>
         <li class='last'><a href='visionandmission'><span>Vision &amp; Mission</span></a></li>
      </ul>
   </li>
   <li class='has-sub'><a href='#'><span>Business Services</span></a>
      <ul>
         <li><a href='recruitment'><span>Recruitment</span></a></li>
         <li><a href='training'><span>Training</span></a></li>
         <li><a href='executivesearch'><span>Executive Search</span></a></li>
         <li><a href='payroll'><span>Payroll</span></a></li>
         <li class='last'><a href='backgroundverification'><span>Background Verification</span></a></li>
      </ul>
   </li>
   <li class='has-sub'><a href='#'><span>Employers</span></a>
      <ul>
         <li><a href='enquiry'><span>Enquiry</span></a></li>
         <li><a href='jobdescription'><span>Job Description</span></a></li>
         <li><a href='employercontract'><span>Employer Contract</span></a></li>
         <li class='last'><a href='feedback'><span>Feedback</span></a></li>
      </ul>
   </li>
   <li class='has-sub'><a href='javascript:;'><span>Job Seeker</span></a>
      <ul>
         <li><a href='applyforjob'><span>Apply For Job/Register</span></a></li>
         <li><a href='careertips'><span>Career Tips</span></a></li>
         <li><a href='interview Questions'><span>Interview Questions</span></a></li>
         <li><a href='interviewprocess'><span>Interview Process</span></a></li>
         <li class='last'><a href='corporatedress'><span>Corporate Dress</span></a></li>
      </ul>
   </li>
   <li class='has-sub'><a href='#'><span>Franchise</span></a>
      <ul>
         <li class='last'><a href='#'><span>Franchise Enquiry Form</span></a></li>
      </ul>
   </li>
   <li class='last'><a href='#'><span>Contact us</span></a></li> 

</ul>

<?php
function displayMenu($parent_page_id) {
      $sql = "SELECT * FROM `pages` WHERE `parent_page` = '$parent_page_id'"; // sql
      $result = mysql_query($sql);
      if( mysql_num_rows($result) === 0 ) { // mysql_num_rows() is deprecated, but you are using mysql extension so that's why I show it here
         return true; // exit function
      } // else, continue to rest of function
      echo '<ul>';
      while($row = mysql_fetch_assoc($result)) { // deprecated mysql php function here for simplicity
         echo '<li><a href="' . $result['url'] . '">' . $result['menu_title'] . '</a>'; // no closing </li> yet
         displayMenu($row['page_id']); // this is the recursive part
         echo '</li>'; // close the <li> from before the recursion
      }
      echo '</ul>';
}
$get_base_menu = mysql_query("SELECT * FROM pages WHERE parent_page = 0");
while($fetch_base_menu = mysql_fetch_array($get_base_menu))
{
    $parent_page_id = $fetch_base_menu['page_id'];
    displayMenu($parent_page_id);

} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:45:05.943

我强烈建议尝试摆脱使用邻接列表模型并转向更易于管理的解决方案，例如嵌套集。使用 MPTT 类型的解决方案可以帮助您更轻松地管理分层数据。使用邻接列表模型，您在某个点受到限制。

我建议考虑使用[Zebra_MPTT](http://stefangabos.ro/php-libraries/zebra-mptt/)或其他形式的 MPTT 库。请查看这篇关于[在 MySQL 中管理分层数据的](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:43:57.723

我认为对你来说最简单的代码就是这个递归函数。您所要做的就是将它放在您的页面上，并确保您拥有`parent_page_id = 0`基本级别的菜单项。（我使用`parent_page_id`而不是`parent_page`因为我认为这就是你的意思，而且答案更清楚。）

调用带有“0”参数的函数应该会给你完整的菜单树。

```
$trace = array();

function displayMenu($parent_page_id) {
  $sql = "SELECT * FROM `tbl_menu` WHERE `parent_page_id` = $parent_page_id"; // sql
  $result = mysql_query($sql);
  if( mysql_num_rows($result) === 0 ) { // mysql_num_rows() is deprecated, but you are using mysql extension so that's why I show it here
     $trace[] = "Page_id $parent_page_id has no children";
     return true; // exit function
  } // else, continue to rest of function
  echo '<ul>';
  while($row = mysql_fetch_assoc($result)) { // deprecated mysql php function here for simplicity
     $trace[] = "Entered while loop for page_id = $parent_page_id"; // not an error, just tracking
     echo '<li><a href="' . $row['url'] . '">' . $row['menu_title'] . '</a>'; // no closing </li> yet
     displayMenu($row['page_id']); // this is the recursive part
     echo '</li>'; // close the <li> from before the recursion
  }
  echo '</ul>';
}

displayMenu(0); // call function for base level

var_dump($trace); 
```

更多信息：

我之前研究过这个主题，并且有一个很好的链接到 mysql.com 上的一个页面，其中深入探索了分层关系数据库结构。但是当我检查时，链接已损坏！

但是，我想我是在另一个网站上找到的，这里：

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

# objective-c - 如何处理核心数据关系？

> ID：15308829
> 
> 赞同：0
> 
> 时间：2013-03-09T08:38:02.530
> 
> 标签：objective-c, core-data

我有两个实体：

```
Patient
- firstName
- lastName
- scheduledAppointments <---->> Appointment

Appointment
- date
- times
- scheduledPatient <<----> Patient 
```

基本上我有一个病人有很多约会。如何在 Appointments 实体中设置 schedulePatient？到目前为止，我已经尝试过：

```
[self.appointment setScheduledPatient:[self.patientArray objectAtIndex:indexPath.row]];

self.appointment.scheduledPatient = [self.patientArray objectAtIndex:indexPath.row]; 
```

他们在我编辑约会时工作。但是当我添加一个新约会时它会返回一个 SIGBRT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:52:19.327

您的代码似乎是正确的。因此，我想您很可能没有在 .xcdatamodel 文件中正确定义反比关系。

据我了解，您有一对多的关系。也就是说，一个患者可能有多个约会。因此，预约属于一名患者。为了使这种关系在语义上是正确的，你需要让它知道它们是如何相互关联的。为此，您需要指定关系中每个元素的逆元素是什么。在下图中，您可以看到一个 Region 可能有多个状态，并且一个状态唯一属于一个 Region。注意连接关系元素的箭头，“many”有一个双箭头，“one”有一个单箭头。 ![在此处输入图像描述](../Images/92c6e111fc376ac702ab5c522f387e2c.png)

我相信您很可能忘记在 xcdatamodel 文件中指定这一点。

查看此链接了解更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

```
反向关系
大多数关系本质上是双向的。如果一个部门与在一个部门工作的员工之间存在一对多关系，那么员工与部门之间存在反向关系。主要的例外是获取的属性，它表示弱的单向关系——从目标到源没有关系（请参阅“获取的属性”）。

您通常应该对两个方向的关系进行建模，并适当地指定反向关系。如果进行更改，Core Data 使用此信息来确保对象图的一致性（请参阅“操作关系和对象图完整性”）。有关您可能不想对双向关系建模的一些原因以及如果不这样做可能出现的一些问题的讨论，请参阅“单向关系”。

```

# node.js - Node.js 和 Mongodb

> ID：15308835
> 
> 赞同：2
> 
> 时间：2013-03-09T08:38:53.980
> 
> 标签：node.js, mongodb, express

所以我尝试将 Node.js 和 Mongodb 一起使用，目标是使用 Node 获取信息并将其存储在带有 Mongodb 的数据库中。所以我安装了 Node 和 Mongdb，我用 npm 安装了 Mongodb 包，这是 mongodb 推荐的包。但是我遇到的问题是，当我尝试做

```
 MongoClient.connect("mongodb://localhost:3000/exampleDb", function(err, db) {
    if(err) { return console.dir(err); }else{
    var collection =db.createCollection('test', function(err, collection) {}); }}); 
```

我去 localhost:port_for express_server，但是当上面的代码应该运行时，我在节点控制台中得到 [Error: failed to connect to [localhost:3000]]。我应该在后台运行 mongodb 还是如何这应该有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:03:48.113

当你这样做时

```
npm install mongodb 
```

您只需为 mongodb 安装 node.js 客户端驱动程序。

为了让你的脚本运行，你需要在你的盒子上安装并启动一个 mongodb 服务器

检查[http://docs.mongodb.org/manual/installation/上的服务器安装程序](http://docs.mongodb.org/manual/installation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:20:10.363

您似乎对 mongodb 是什么以及如何使用它感到迷茫。Mongodb 是一个 noSQL 数据库。

> 我应该在后台运行 mongodb

是的，就像 mysql 一样，您需要安装并运行服务器才能使用它。你需要做：

1.  mongodb（数据库服务器）
    *   安装服务器
    *   `mongod`通过在终端上键入启动服务器
    *   检查`mongo`它是否正在运行，您可以连接到它。
2.  node.js（网络服务器）
    *   安装节点
    *   安装`mongodb`包
    *   现在测试你的代码

# robotics-studio - Microsoft Robotics Developer Studio VPL 中的“加入连接到独立数据源”

> ID：15308837
> 
> 赞同：0
> 
> 时间：2013-03-09T08:39:15.120
> 
> 标签：robotics-studio

我正在研究由一组实体制作的定制机器人。我正在尝试评估它的重心和零力矩点，我需要每个实体的重心，然后应用重心的一般规则：

# （物体重心的X坐标）*（物体总质量）

(实体 1 的重心 X 坐标) *(实体 1 的质量) +...+ (实体 n 的重心 X 坐标)* (实体 n 的质量)

（重心的其他坐标也是如此）但为此，我需要 GPS 传感器通知每个实体的重心位置，以及将所有这些都包含在“计算”块中执行的上述计算中的方法。但问题是，当我尝试“加入”来自不同 GPS 传感器实例的值时，会弹出以下错误：“加入连接到独立的数据源。它永远不会完成。尝试修改你的连接。” （附上 VPL 图的图像）。 [https://docs.google.com/file/d/0B2w3mmBOvQsIWHBiR2NvUmxHUnc/edit?usp=sharing](https://docs.google.com/file/d/0B2w3mmBOvQsIWHBiR2NvUmxHUnc/edit?usp=sharing) 有人请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T00:56:12.860

**问题**

因为 VPL 无法知道两个数据源的预期数据速率，而 join 只会在所有分支上都有项目时才会触发（然后消费项目）存在两个问题，一个是它可能永远不会触发，另一个是数据可能不同步（想象一下，如果两个数据源以 1Hz 和 2Hz 的频率触发，则连接的每个分支上的第一个元素将及时分开）

**一个解法**

在您的图表中，使用数据源设置变量及其值（您似乎已经这样做了）

使用数据源之一（或其他一些定期通知）使用已设置为状态的最新值触发计算。虽然您可能并不总是拥有最新的数据，但它总是相当新的

或者，您可以在当前具有联接的位置进行合并，并在任一数据源上使用通知来触发计算（同样，使用已设置为状态的最新值）

# windows - 除了周六和周日，我如何让 SCHTASKS 工作每天都运行？

> ID：15308842
> 
> 赞同：0
> 
> 时间：2013-03-09T08:39:52.087
> 
> 标签：windows, windows-task-scheduler

我用 Ruby 编写了一个脚本，我想在除周六和周日之外的每一天使用 SCHTASKS 命令运行该脚本。我该如何解决这个问题？

PS:: linux 上的 crontab 比 windows 上的 schtasks 更容易-_-"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:55:59.770

使用 /XML 参数。

> schtasks /Create /Xml sample.xml /TN 任务名

一旦您手动创建任务并将其导出，XML 就很容易制作。
XML 示例：

```
  ...
  <触发器>
    <日历触发器>
      <StartBoundary>2013-03-19T03:00:00</StartBoundary>
      <启用>真</启用>
      <按周计划>
        <Da​​ysOfWeek>
          <星期一 />
          <星期二/>
          <星期三 />
          <星期四 />
          <星期五/>
        </DaysOfWeek>
        <WeeksInterval>1</WeeksInterval>
      </ScheduleByWeek>
    </日历触发器>
  </触发器>
  ...

```

# java - 如何从java servlet中的xml文档中获取子元素

> ID：15308843
> 
> 赞同：0
> 
> 时间：2013-03-09T08:40:00.610
> 
> 标签：java, xml, servlets, document

这是我从服务器获得的 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<w:createCustomerResponse xmlns:w="{ some namespace :) }">
    <w:usernameTaken />
</w:createCustomerResponse> 
```

这就是我的做法：

```
InputStream inputter = connection.getInputStream();
SAXBuilder builder = new SAXBuilder();
Document docu = new Document();
try
{
    docu = builder.build(inputter);
} 
    catch (JDOMException e)
{
    e.printStackTrace();
}

outputter.output(docu, System.out); 
```

所以我在docu中有一个xml文档，但我不知道如何获取值元素“usernameTaken”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:45:20.497

您可以使用任何 DOM 解析方法。

1.  JAVA API，具有 getElementsByTagName() 类型的方法
2.  XPath API。

几个链接

1.  [http://tutorials.jenkov.com/java-xml/dom.html](http://tutorials.jenkov.com/java-xml/dom.html)
2.  [http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:17:42.277

您可以使用检索相关元素

```
docu.getRootElement().getChild("usernameTaken",
    Namespace.getNamespace("{ some namespace :) }")) 
```

使用来自真实文档的正确命名空间 URI。

# camera - 如何在 Android 中使用用户指定的按钮创建自定义相机

> ID：15308847
> 
> 赞同：1
> 
> 时间：2013-03-09T08:40:18.330
> 
> 标签：camera, android-camera

我已经创建了需要相机选项的 FB 应用程序。当然我想要 3 个按钮，一个用于拍照，第二个用于保存，主要是第三个按钮，即直接将图像上传到 facebook 而不保存到指定位置 im Mobile。我搜索了很多，但不能像这样。所以请帮助我。提前致谢

# graph-algorithm - 描述确定是否正好有 2 个不同 MST 的算法

> ID：15308850
> 
> 赞同：0
> 
> 时间：2013-03-09T08:40:58.407
> 
> 标签：graph-algorithm, minimum-spanning-tree, kruskals-algorithm

令 G = (V, E) 为加权、连通且无向图。描述一个有效的算法，它决定 G 中是否正好有 2 个不同的 MST。

我已经解决的上一个问题要容易得多：描述一种有效的算法来确定 G 中是否正好有一个 MST。

这就是我解决后一个问题的方法：

我们运行 Kruskal 算法，然后将新 MST 的边缘涂成蓝色，其余边缘涂成红色。

然后我使用了另一种我们见过的简单算法（使用 Kruskal），它在包含最大数量红色边的图形中找到一个 MST——这意味着它是图形 G 中的一个 MST，而不管边的颜色如何，并且每隔一个 MST 不能包含比算法找到的 MST 更多的红色边缘。

现在只有一个 MST，如果算法找到相同的 MST（包含所有蓝色边缘）。

这里的另一个问题似乎要复杂得多。我尝试过使用上述算法，也尝试过使用其他各种技巧，但都没有奏效。

顺便说一句，我听说有一种算法可以计算图中不同 MST 的数量，但这确实是一种矫枉过正——我被要求提供一个简单的算法。

我会很感激任何帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:44:42.143

我可能正在考虑它，但你的方法似乎不必要地复杂。为了确定是否有 2 个不同的 MST，我首先运行 Kruskal 以获取第一个 MST。然后你再次运行它，看看你是否可以避免从第一个 MST 中获得优势。

在 Kruskal 的每个步骤中，您添加连接 2 个以前未连接的组件的最便宜的边。因此，您必须按重量对边缘进行排序并遍历它们，如果它们连接了 2 个未连接的组件，则将它们添加到 MST。当有多个 MST 时，您将达到一个点，您可以在两个连接相同组件的相同权重的边之间进行选择。

运行 Kruskal 一次后，您就知道 MST 中有哪些边。如果您再次运行它，您将再次按权重对边进行排序，并将最便宜的边（连接 2 个未连接的组件）添加到您的图表中。但是，如果您可以选择添加 2 条连接相同组件的边，那么您可以采用第一次没有采用的边。最终结果将是一个不同的 MST（不包含一个边），但是一个有效的 MST，因为您完全按照 Kruskal 的规则进行操作。

您基本上只是做 Kruskal，但将您的平局断路器更改为具有相同重量的边缘。重复该过程以找到更多不同的 MST。如果您想知道是否只有 2 个 MST，您应该尝试找到第三个 MST。

# c# - C# AD 用户密码过期

> ID：15308851
> 
> 赞同：3
> 
> 时间：2013-03-09T08:40:59.890
> 
> 标签：c#, c#-4.0, c#-3.0

我在表单中使用以下代码，但出现错误

```
public DataTable Passwordexpire()
{
   PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

   UserPrincipal userTemplate = new UserPrincipal(ctx);
   userTemplate.AdvancedSearchFilter.AccountExpirationDate(DateTime.Today.AddDays(3), MatchType.LessThanOrEquals);

   PrincipalSearcher searcher = new PrincipalSearcher(userTemplate);

  foreach (Principal foundPrincipal in searcher.FindAll())
  {
     UserPrincipal foundUser = (foundPrincipal as UserPrincipal);

     if (foundUser != null)
     {
       DataTable dt = new DataTable();
       dt.Columns.Add("AccountName");
       dt.Columns.Add("Name");
       dt.Columns.Add("Empolyee ID");
       dt.Columns.Add("Company");

       foreach (SearchResult sResultSet in Dsearch.FindAll())
       {
         DataRow dr = dt.NewRow();
           dr[0] = (GetProperty(sResultSet, "samaccountname"));
           dr[1] = (GetProperty(sResultSet, "name"));
          dr[2] = (GetProperty(sResultSet, "ExtensionAttribute2"));
          dr[3] = (GetProperty(sResultSet, "Company"));
          dt.Rows.Add(dr);
       }
       return dt;
   }
} 
```

错误是：

> *找不到类型或命名空间名称 User Principal（是否缺少 using 指令或程序集引用？）
> 找不到类型或命名空间名称 Principal Searcher（是否缺少 using 指令或程序集引用？）
> 名称当前上下文中不存在“MatchType”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:43:57.330

您是否`using System.DirectoryServices.AccountManagement;`在 .cs 文件的顶部有此 Passwordexpire 方法所在的指令？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:44:43.180

`System.DirectoryServices`添加对.Net DLL的引用。

然后zaitsman的回答：

```
using System.DirectoryServices.AccountManagement; 
```

# php - 无法执行 codeigniter 查询

> ID：15308853
> 
> 赞同：0
> 
> 时间：2013-03-09T08:41:15.430
> 
> 标签：php, mysql, codeigniter

我正在尝试执行如下查询：`select*from bookdetails where quantity>0 ORDER BY created_date DESC`

但我收到类似`Call to a member function num_rows() on a non-object in...` 请帮我解决这个问题的错误。

```
public function get_all_book_list_ByCreatedDateDSC($limit, $start,$sortsesval)
{
    $this->load->database();  
    $this->db->limit($limit, $start);  

     $query=$this->db->join('coverdetails', 'coverdetails.cover_id = bookdetails.cover_id')->order_by('created_date', 'DESC')->get_where('bookdetails',array('quantity >', '0')); 

  if ($query->num_rows() > 0)
    {
        foreach ($query->result() as $row)
        {
            $data[] = $row;
        }
        return $data;
    }
return false; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:48:06.990

您的错误消息告诉您 $query 不是对象。您不能在非对象上调用成员函数！

您的“加入”方法没有返回对象。

尝试在设置 $query 之后放置`print_r($query)`或`var_dump($query)`，以找出它到底是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:48:35.680

像这样尝试你的功能

```
public function get_all_book_list_ByCreatedDateDSC($limit, $start,$sortsesval)
{
    $this->load->database();  
    return  $this->db
                        ->join('coverdetails', 'coverdetails.cover_id = bookdetails.cover_id')
                        ->order_by('created_date', 'DESC')
                        ->limit($limit, $start)
                        ->get_where('bookdetails',array('quantity >', '0'))
                        ->result_array();
} 
```

当您的查询返回 null（未找到记录）时，您将无法访问该对象，因为在 $query 中它为 null。您需要以数组格式返回数据，因此请使用 result_array。详情见[这里](http://ellislab.com/codeigniter/user-guide/database/results.html)；使用它你不需要遍历对象。它会给你现成的数组。

在控制器中，您可以检查结果是 null 还是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:00:01.487

试试这个：

```
$this->db->select('*');
$this->db->where('quantity >', $id); 
$this->db->join('coverdetails', 'coverdetails.cover_id = bookdetails.cover_id');
$this->db->order_by('bookdetails.created_date', 'desc');
$this->db->limit($limit, $start);
$query = $this->db->get('bookdetails');
        if($query -> num_rows() == 1)
                    return $query->result_array();
       else
         return false; 
```

# bash - 使用 bash 替换数字序列

> ID：15308864
> 
> 赞同：0
> 
> 时间：2013-03-09T08:42:43.477
> 
> 标签：bash, scripting

使用 bash 脚本。示例文本文件是：

```
<Mixture> 1 1.0000
    <Mean> 39
      0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
    <Variance> 39
      1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0
  <TransP> 3 
```

现在我想用其他一些作为matlab变量的数组替换零序列。即我希望它如下

```
<Mixture> 1 1.0000
    <Mean> 39
      -3.928404e+00 -2.833521e+00 1.418979e+00 -8.560805e+00 -4.987627e+00 -5.422057e+00 -2.148949e+00 -4.035418e+00 1.111476e+00 -4.360466e+00 -2.430894e+00 -3.562756e+00 2.149250e+01 4.148085e-03 3.280356e-01 1.993892e-01 4.226578e-01 3.070029e-01 3.061973e-01 2.200327e-01 2.279716e-01 1.851751e-01 2.630977e-01 2.530313e-01 1.584220e-01 -7.420680e-02 -6.129631e-02 6.845896e-03 1.414505e-02 5.905741e-02 7.828339e-02 6.020883e-02 7.195320e-02 4.838301e-02 4.507983e-02 6.380487e-02 7.884157e-02 6.597416e-02 -1.690722e-02
    <Variance> 39
      1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0
  <TransP> 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:10:22.560

```
 <Mean> 39
          0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
      <Variance> 39
          1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0
 <State> 3
  0.000e+0    1.000e+0    0.000e+0    0.000e+0    0.000e+0
  0.000e+0    5.000e-1    5.000e-1    0.000e+0    0.000e+0
  0.000e+0    0.000e+0    5.000e-1    5.000e-1    0.000e+0
  0.000e+0    0.000e+0    0.000e+0    5.000e-1    5.000e-1
  0.000e+0    0.000e+0    0.000e+0    0.000e+0    0.000e+0 
```

那是我的总文本文件不幸的是，建议的命令也将替换上述矩阵形式中的零，但我不想要这个。另一个问题是如何用另一个通用序列替换通用序列（我们不知道模式是如何） . 我认为它应该只通过行号来完成，但这里的另一个问题是我们不知道序列有多少行。那么有什么办法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:54:34.717

假设`$matlabvar`包含您从 Matlab 收到的数据：

```
sed "s/ 0\.0\( 0\.0\)*/ $matlabvar/" input.txt > output.txt 
```

这是正则表达式匹配和替换。

*   `s/old/new/``old`- 用文本替换正则表达式匹配的`new`文本
*   `0` - 匹配 0
*   `\.`- 火柴 。
*   `\(...\)`- 这对包含的元素进行分组
*   `*`- 这匹配 0 个或多个前面的表达式（分组构造）。

所以它匹配一个`0.0`后跟任意数量的附加`0.0`s。然后将其替换为`$matlabvar`。

[您可以在regular-expressions.info](http://www.regular-expressions.info)了解有关正则表达式的所有信息。

# java - 我可以通过添加1来获得java中对象数组中的下一个元素吗？

> ID：15308879
> 
> 赞同：0
> 
> 时间：2013-03-09T08:45:14.790
> 
> 标签：java, arrays

在下面的代码中：

```
class A {}
A[] arr = new A[10];
A a = arr[2];
A b = a; 
```

我可以`b + 1`在 c++ 中使用 like 来获取`b`数组中的下一个元素吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T08:49:04.033

不，你不能。因为在 java 中，甚至一个数组也被视为对象。该数组的变量包含包含该对象的堆中内存的引用值，而不仅仅是指向该数组本身的第一个元素。因此，将 1 添加到数组的引用变量会产生编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:59:57.277

不，您不能这样做，因为 java 不支持运算符重载。

# sql-server-2008 - 在 SQL Server 2008 数据库中的所有表中查找公共列的最小和最大列值

> ID：15308899
> 
> 赞同：0
> 
> 时间：2013-03-09T08:49:05.037
> 
> 标签：sql-server-2008

我正在检查第三方 SQL Server 2008 数据库。在这个数据库中，有 2 列 CREATED_DATETIME 和 UPDATED_DATETIME，它们存在于大多数表中，但可能不是全部。

我想在数据库中具有这 2 列的所有表中找到这 2 列的最小值和最大值。这将使我清楚地知道数据库中的数据是从哪个时期到哪个时期。

我该如何编写这样的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:10:29.867

像下面这样的东西应该工作

```
DECLARE @C1           AS CURSOR,
        @TABLE_SCHEMA SYSNAME,
        @TABLE_NAME   SYSNAME,
        @HasCreated   BIT,
        @HasUpdated   BIT,
        @MaxDate      DATETIME,
        @MinDate      DATETIME,
        @SQL          NVARCHAR(MAX) 

SET @C1 = CURSOR FAST_FORWARD FOR 
SELECT TABLE_SCHEMA,
       TABLE_NAME,
       COUNT(CASE
               WHEN COLUMN_NAME = 'CREATED_DATETIME' THEN 1
             END) AS HasCreated,
       COUNT(CASE
               WHEN COLUMN_NAME = 'UPDATED_DATETIME' THEN 1
             END) AS HasUpdated
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  COLUMN_NAME IN ( 'CREATED_DATETIME', 'UPDATED_DATETIME' )
GROUP  BY TABLE_SCHEMA,
          TABLE_NAME 

OPEN @C1;

FETCH NEXT FROM @C1 INTO @TABLE_SCHEMA , @TABLE_NAME , @HasCreated , @HasUpdated ;
WHILE @@FETCH_STATUS = 0
BEGIN

SET @SQL = N'
SELECT @MaxDate = MAX(D),
       @MinDate = MIN(D)
FROM   ' + QUOTENAME(@TABLE_SCHEMA) + '.' + QUOTENAME(@TABLE_NAME) + N' 
       CROSS APPLY (VALUES ' + 
                  CASE WHEN @HasCreated = 1 THEN N'(CREATED_DATETIME),' ELSE '' END + 
                  CASE WHEN @HasUpdated = 1 THEN N'(UPDATED_DATETIME),' ELSE '' END + N'
                           (@MaxDate),
                           (@MinDate)) V(D) 

'

EXEC sp_executesql 
    @SQL,
    N'@MaxDate datetime OUTPUT, @MinDate datetime OUTPUT', 
    @MaxDate = @MaxDate OUTPUT, 
    @MinDate = @MinDate OUTPUT

  FETCH NEXT FROM @C1 INTO @TABLE_SCHEMA , @TABLE_NAME , @HasCreated , @HasUpdated ;
END

SELECT @MaxDate AS [@MaxDate], @MinDate AS [@MinDate] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T08:58:15.207

Run the script mentioned in the link below. You will have to slightly alter as per your requirements.

[SCRIPT to Search every Table and Field](http://blogs.thesitedoctor.co.uk/tim/2010/02/19/Search+Every+Table+And+Field+In+A+SQL+Server+Database+Updated.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:59:33.830

```
select MIN(CREATED_DATETIME) MinCREATED_DATETIME_Table1, MAX(CREATED_DATETIME) MaxCREATED_DATETIME_Table1, MIN(CREATED_DATETIME) MinCREATED_DATETIME_Table2, MAX(CREATED_DATETIME) MaxCREATED_DATETIME_Table2 from Table1, Table2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T09:14:49.440

在 SSMS 中运行此脚本（`CTrl+T`=文本结果，`F5`=执行查询）：

```
SET NOCOUNT ON;

SELECT  'SELECT MIN(' 
        + QUOTENAME(c.COLUMN_NAME)
        + ') AS ' 
        + QUOTENAME('Min '+c.TABLE_NAME+'.'+c.COLUMN_NAME)
        + ', MAX('
        + QUOTENAME(c.COLUMN_NAME)
        + ') AS ' 
        + QUOTENAME('Max_'+c.TABLE_NAME+'.'+c.COLUMN_NAME)       
        + CHAR(13)
        + 'FROM ' + QUOTENAME(c.TABLE_SCHEMA)+'.'+QUOTENAME(c.TABLE_NAME)
FROM    INFORMATION_SCHEMA.COLUMNS c
WHERE   c.COLUMN_NAME IN ('CREATED_DATETIME', 'UPDATED_DATETIME')
ORDER BY c.TABLE_SCHEMA, c.TABLE_NAME, c.COLUMN_NAME;

SET NOCOUNT OFF; 
```

它将生成另一个脚本。执行生成的脚本。

示例（为`master`数据库和`low`列名 >的所有表生成的脚本`WHERE c.COLUMN_NAME IN (N'low')`）：

```
SELECT MIN([low]) AS [Min spt_fallback_dev.low], MAX([low]) AS [Max_spt_fallback_dev.low]
FROM [dbo].[spt_fallback_dev]
SELECT MIN([low]) AS [Min spt_values.low], MAX([low]) AS [Max_spt_values.low]
FROM [dbo].[spt_values] 
```

# extjs4 - Extjs 4表单提交不起作用i

> ID：15308900
> 
> 赞同：0
> 
> 时间：2013-03-09T08:49:10.793
> 
> 标签：extjs4

我正在使用 Extjs 4.1.1

我有一个表单面板。我正在提交带有少量参数的表单。

```
form.submit({
url : submit_Url,
params :{
    'svgXml':svgXml,
    'queryData':queryData,
    'gridColumns':gridColumns,
    'boname':boName,             
    'attachmentName':attachmentName,
    'reportTypeName':reportTypeName,
    'chartType':chartType,                              
    'reportCriteria':reportCriteria
},
method 
:'POST',
    success : function(form, action) {
        parent.closeExtjsModal(0);
    },
    failure :  function(form, action) 
    {
        SetError (); 
    }
}); 
```

从服务器端我设置 {"success" :true}

但我仍然收到错误

```
uncaught Ext.JSON.decode(): //You're trying to decode an invalid JSON String: 
```

你能解释一下是什么问题吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:50:32.890

它主要是服务器响应的问题。您能否在浏览器（最好是 chrome）开发人员工具中验证并发布您提交请求的响应。

# django - 创建第一个超级用户后初始化

> ID：15308901
> 
> 赞同：2
> 
> 时间：2013-03-09T08:49:19.780
> 
> 标签：django, django-signals, django-syncdb

我想知道创建第一个超级用户时是否发送了任何特定信号。我正在谈论我何时跑步`syncdb`并被要求创建一个超级用户。那时我想知道是否发送了任何信号，以便我可以使用该信号进行一些初始化。或者有没有一种方法可以让我只在创建第一个超级用户的那一刻运行一段代码。我希望那段代码在开始时只运行一次。请帮忙。我希望这个问题是有道理的......最近我一直在批评我的问题没有意义。我希望这个可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:57:05.470

超级用户的创建是由[`post_syncdb`信号](https://docs.djangoproject.com/en/1.5/ref/signals/#post-syncdb)调用的，您也可以挂钩到`post_syncdb`信号并在之后运行额外的代码。

将以下代码放入`management/__init__.py`您的一个应用程序的 中，并确保该应用程序的路径位于`django.contrib.auth`、 in下`settings.INSTALLED_APPS`。

```
from django.contrib.auth import models as auth_app
from django.db.models import signals

def operate_upon_first_superuser_after_syncdb(app, created_models, verbosity, db, **kwargs):
    if auth_app.User in created_models and kwargs.get('interactive', True):
        if auth_app.User.objects.filter(is_superuser=True).exists():
            # ... extra code here

signals.post_syncdb.connect(operate_upon_first_superuser_after_syncdb,
     sender=auth_app, dispatch_uid='operate_upon_first_superuser_after_syncdb') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:22:33.070

```
def superuser_creation(sender, instance, created, **kwargs):
    user = kwargs['instance']
    if user.is_superuser:
        //do something here

post_save.connect(superuser_creation, sender=User) 
```

# java - 我对通用方法模棱两可

> ID：15308902
> 
> 赞同：4
> 
> 时间：2013-03-09T08:49:47.380
> 
> 标签：java, generics, compiler-errors

我有一个用于实例化对象的通用方法，如下所示：

```
@Override
public <T> T createRawObject(Class<?> raw_type,
                             ProviderParam param)
{
    SpringProviderParam spring_param = (SpringProviderParam) param;
    ApplicationContext ctx = SpringContextGenericProvider.getInstance()
                                                         .generate(param,
                                                                   ApplicationContext.class,
                                                                   (Object[]) spring_param.getContextPaths());
    ValidateUtility.notNull(ctx, "Target Application_Context is null");

    T raw_object=  (T) ctx.getBean((spring_param.getBeanName()!=null)?spring_param.getBeanName():raw_type);

    ValidateUtility.sameType(raw_object, raw_type, "Target object isn't instance of a {} class", raw_type);

    return raw_object;
} 
```

我的问题在于以下行：

```
 T raw_object=  (T) ctx.getBean((spring_param.getBeanName()!=null)?spring_param.getBeanName():raw_type); 
```

此行未编译并显示以下编译错误：

```
The method getBean(String) in the type BeanFactory is not applicable for the arguments (Serializable) 
```

但是当我将此行更改为以下行并编译正常时：

```
T raw_object=  null;
if(spring_param.getBeanName()!=null)
    raw_object=  (T) ctx.getBean(spring_param.getBeanName());
else
    raw_object=  (T) ctx.getBean(raw_type); 
```

我对这个问题模棱两可。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T08:55:59.707

这里的问题是编译器无法检测到您试图在第一个片段中调用哪个方法，因为您的三元运算符返回不同类型的对象，因此您会收到编译错误，因为您可以使用不同的方法从上下文中获取 bean（按名称- 字符串，按类 - 类）。

假设您正在尝试设置

```
(spring_param.getBeanName()!=null)?spring_param.getBeanName():raw_type 
```

对于任何变量，您必须告诉编译器哪种类型将是您的变量。你可以在这里为你的变量类型使用任何东西，但是`Object class`，因为它们没有任何其他共同的祖先（我的意思是`String`和`Class`类）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T08:57:31.273

问题在于编译器推断三元运算符返回的类型，因此它无法选择在应用程序上下文中调用哪个方法。

# jquery - 控件在 jQuery ColorBox 中不起作用

> ID：15308907
> 
> 赞同：1
> 
> 时间：2013-03-09T08:50:38.857
> 
> 标签：jquery, asp.net, colorbox

我有一个要使用颜色框显示的控件。这很简单，几个下拉菜单、一个文本框和一个提交内容的按钮。

该控件工作正常，但是当我使用颜色框显示它时，我无法在文本框中输入任何文本，并且提交按钮不起作用。

调用它的 jQuery 是：

```
 $j(".colorBoxLink").click((function () {
                $j("div#popup").show()
                $j.colorbox({
                    inline: true,
                    href: "#popup",
                    modal: true,
                    scrolling: false,
                    onCleanup: function () {
                        $j("div#popup").hide();
                    }
                }); 
```

控件位于一个div中：

```
<div id='popup' style='display: none'>
     <uc1:TaskCreator runat="server" ID="TaskCreator" /> 
</div> 
```

如果我取出 display:none 我可以从页面正常运行控件而不会弹出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:06:17.373

似乎添加 ColorBox 会将表单元素移动到表单标记之外。

添加行：

```
 $j("#colorbox, #cboxOverlay").appendTo('form:first'); 
```

解决问题

# android - Android 更改 List 的 imageview 的图像

> ID：15308908
> 
> 赞同：1
> 
> 时间：2013-03-09T08:50:59.763
> 
> 标签：android, android-layout, listview

单击列表时，我想更改图像。单击列表中的位置将更改图像。另一个列表位置的 ImageView 图像将是相同的，但我没有成功。

当我选择一个列表项图像时，视图显示右图标图像，当我取消选择此位置时，ImageView 显示箭头图像。

```
 public View getView(final int position, View convertView,
        final ViewGroup parent) {
    // TODO Auto-generated method stub

    View row = convertView;
    if (row == null) {

        LayoutInflater inflater = ((Activity) mContext).getLayoutInflater();
        row = inflater.inflate(mLayoutResourceId, parent, false);

        mHolder = new BusinessHolder();

        mHolder.mTxt_STDNAME = (TextView) row
                .findViewById(R.id.txt_stdName);

        mHolder.mTxt_STDCOURSE = (TextView) row
                .findViewById(R.id.txt_stdCourse);

        mHolder.mTxt_STDYEAR = (TextView) row
                .findViewById(R.id.txt_stdYear);        

        mHolder.mImageViewSelection = (ImageView) row
                .findViewById(R.id.img_selection);

        mHolder.mLin_layout=(LinearLayout)       row.findViewById(R.id.Layout_listText);

        row.setTag(mHolder);

    } else {

        mHolder = (BusinessHolder) row.getTag();
    }

        mHolder.mTxt_STDNAME.setText(FacultyDatabaseHalper.mStudentStudentName.get(position));

        mHolder.mTxt_STDCOURSE.setText(FacultyDatabaseHalper.mStudentCourse.get(position));

        mHolder.mTxt_STDYEAR.setText(FacultyDatabaseHalper.mStudentYear.get(position));

        mHolder.mLin_layout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                if(myposition.contains(String.valueOf(position))){

                     myposition.remove(String.valueOf(position));

                     mHolder.mImageViewSelection.setImageResource(R.drawable.arrow);

                    }else{

                     myposition.add(String.valueOf(position));

                       mHolder.mImageViewSelection.setImageResource(R.drawable.check);

                    }

                    notifyDataSetChanged();

            }
        });

    return row;
    }

    public class BusinessHolder {

    TextView mTxt_STDNAME, mTxt_STDYEAR,
            mTxt_STDCOURSE; 
    ImageView mImageViewSelection;

    LinearLayout mLin_layout;

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:05:14.693

你需要让听众在`listView`而不是在视图上，这也会给你位置

```
Listview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

       Object o = prestListView.getItemAtPosition(position);
       prestationEco str=(prestationEco)o;//As you are using Default String Adapter
       Toast.makeText(getBaseContext(),str.getTitle(),Toast.LENGTH_SHORT).show();
        }
    }); 
```

# jqgrid - 如何在jqgrid中使用页面关注上一个选定的行？

> ID：15308909
> 
> 赞同：0
> 
> 时间：2013-03-09T08:51:20.867
> 
> 标签：jqgrid

我试图将注意力集中在 jqgrid 上一个带有页面的选定行上，但我做不到。所以请为此提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:30:45.317

您必须保存所选行的 ID，例如在`localStorage`Web 浏览器中。尝试[演示](http://www.ok-soft-gmbh.com/jqGrid/ColumnChooserAndLocalStorage2_single.htm)或[其他](http://www.ok-soft-gmbh.com/jqGrid/ColumnChooserAndLocalStorage2_.htm)使用`multiselect: true`选项的演示。演示按照您的要求进行。两个演示都来自[答案，该答案是我之前提出的](https://stackoverflow.com/a/8547852/315935)[另一个答案](https://stackoverflow.com/a/8436273/315935)的修改，并且我在其中讨论了使用`localStorage`而不是 cookie 的优势。

# javascript - 子菜单的javascript悬停功能

> ID：15308917
> 
> 赞同：0
> 
> 时间：2013-03-09T08:53:41.307
> 
> 标签：javascript, drop-down-menu, submenu

我在尝试理解 javascript 方面还很陌生，并且我一直在汇集多个示例，试图找出我做错了什么，但无法使其正常工作。曾几何时，我使用过 onmouseover/mouseout，但它只适用于其中一个菜单。

我确信这是我忽略的一些简单的事情，但任何帮助将不胜感激。

[http://jsfiddle.net/N3TyT/](http://jsfiddle.net/N3TyT/)

```
jQuery(document).ready(function($) {
$('#top-menu').hover(
  function () {
    $('#submenu').show(active);
  },
  function () {
    $('#submenu').hide(non-active);
  }
);
});

<ul id="menu" class="nav-menu">
    <li>Home</li>
    <li id="top-menu"><a href="#">About Us</a>
    </li>
    <ul id="submenu" class="sub-menu non-active">
        <li>US</li>
        <li>Our Style</li>
        <li>The Experience</li>
    </ul>
    <li id="top-menu"><a href="#">Galleries</a>
    </li>
    <ul id="submenu" class="sub-menu non-active">
        <li>Weddings</li>
        <li>Engagements</li>
        <li>Featured Weddings</li>
    </ul>
    <li id="top-menu"><a href="#">The Details</a>
    </li>
    <ul id="submenu" class="sub-menu non-active">
        <li>Investment</li>
        <li>Press and Awards</li>
        <li>Testimonials</li>
    </ul>
    <li>FAQ</li>
    <li>Contact</li>
    <li>The Blog</li>
</ul>

.nav-menu {
    list-style-type:none;
    text-align:center;
    text-transform:uppercase;
    font-weight:bold;
    font: 24px'Playfair Display', Georgia, serif;
}
.navmenu ul li {
    margin:30px;
}
.non-active {
    display:none;
}
.active {
    display:inline;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:05:25.167

它没有回答您的具体问题，但使用 css 可以轻松实现相同的行为。这样，您就不必依赖打开 javascript 来进行标准菜单访问。

```
ul.menu li ul {
  display: none;
}

ul.menu li:hover ul {
  display: block;
  position: relative;
}
```

```
<ul class="menu">
  <li><a href="#">Home</a></li>
  <li>
    <a href="#">Galleries</a>
    <ul>
      <li>Gallery #1</li>
      <li>Gallery #2</li>
    </ul>
  </li>
  <li>
    <a href="#">Albums</a>
    <ul>
      <li>Album #1</li>
      <li>Album #2</li>
    </ul>
  </li>
</ul>
```

在[jsFiddle上查看](http://jsfiddle.net/EmcPY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:57:09.277

You are using hide and show wrong. [http://api.jquery.com/show/](http://api.jquery.com/show/) [http://api.jquery.com/hide/](http://api.jquery.com/hide/)

[http://jsfiddle.net/eXKV9/](http://jsfiddle.net/eXKV9/)

```
$('#top-menu').hover(
  function () {
    $('#submenu').show();
  },
  function () {
    $('#submenu').hide();
  }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T08:57:57.437

`id` must be *unique*. If you have multiple elements with the same `id`, jquery will not retrieve all the elements when you do $('#top-menu'), it'll only find the first element that matches the selector.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T09:17:11.810

我们需要稍微改变一下 HTML。ID 在一个页面上只使用一次。类是相似的，但可以应用于任意数量的元素。我们还想将我们的子菜单嵌套在顶部菜单下。这样关联就更清楚了。

```
<li class="top-menu"><a href="#">About Us</a>
    <ul class="sub-menu non-active">
        <li>Ashley + David</li>
        <li>Our Style</li>
        <li>The Experience</li>
    </ul>
</li> 
```

我们要指定要显示或隐藏的嵌套子菜单。 `$(this)`指悬停在上方的顶部菜单。

```
$('.top-menu').hover(
  function () {
    $(this).find('.sub-menu').show("slow");
  },
  function () {
    $(this).find('.sub-menu').hide("slow");
  }
); 
```

# [演示](http://jsfiddle.net/N3TyT/6/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-09T09:03:38.023

我更新了你的工作。这是试图建立的吗？

```
$('#top-menu').mouseover(function(){
    $('#submenu').addClass('active');
});
$('#top-menu').mouseout(function(){
    $('#submenu').removeClass('active');
}); 
```

[JSFiddle 演示](http://jsfiddle.net/N3TyT/4/)

# ios - 使用 facebook connect 登录 IOS 应用程序时出现冲突错误

> ID：15308919
> 
> 赞同：1
> 
> 时间：2013-03-09T08:54:23.467
> 
> 标签：ios, facebook, login, dialog, crash

安装 facebook 登录后，我们有 2 位开发人员使用他们自己的设备（均使用 IOS 6.1.2），但存在冲突。

开发人员 1：单击 facebook 登录按钮，并被重定向到 URL 以输入 facebook 登录名/密码 - 然后接受权限。该过程有效。

开发人员 2：单击 facebook 登录按钮，在 popop 中接收权限对话框（不是通过 url），并且不要求 facebook 登录/密码。每次单击（确定）获得权限时，该进程都会立即崩溃。

我们在这方面花费了大量时间，希望能提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:44:22.343

在我看来，开发人员 2 已经在 iOS 设置中登录了 FB，而开发人员 1 没有。

这可以解释登录过程的差异，尽管我不能说为什么 iOS 驱动的 FB 登录会崩溃，但 Safari 驱动的登录不会。

# android - 为什么当 PopupWindow 显示在它的窗口上时按钮的 onClickListener 不触发？

> ID：15308920
> 
> 赞同：1
> 
> 时间：2013-03-09T08:54:28.787
> 
> 标签：android, onclicklistener, popupwindow

当显示 PopupWindow 时，单击 PopupWindow 区域之外的按钮只会关闭 PopupWindow，但按钮的单击侦听器不会响应。我的问题是，为什么按钮的点击监听器没有响应？

```
private OnClickListener mSiftClickListener = new 
    View.OnClickListener() {
            @Override
            public void onClick(View v) {

                if (mSiftPopwin != null && mSiftPopwin.isShowing()) {
                    ToastShow.makeText(mContext, "yes");  //never show
                } else {
                    showSfitPopwin();
                }
            }
    }; 
```

My`onClickListener`有两个功能，`showSiftPopwin`当`ToastShow`Popwin 显示时，再次单击它，Popwin 关闭但尚未调用此 onClick 侦听器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:57:49.217

这是预期的行为。

弹出窗口将消耗屏幕上的任何触摸事件，直到它被关闭。您提到的触摸事件没有通过您的按钮，并且没有执行点击。

如果您希望它在窗口关闭时运行，您应该将按钮代码移动到[OnDismissListener中。](http://developer.android.com/reference/android/widget/PopupWindow.OnDismissListener.html)

# android - 如何在 android eclipse 中显示文本视图表？

> ID：15308922
> 
> 赞同：0
> 
> 时间：2013-03-09T08:54:31.970
> 
> 标签：android, arrays, list

我目前有一个二维字符串数组，其中包含来自互联网网站的信息。如何使用这个数组来显示一个表格，`TextViews`其中每个 textview 将包含来自数组的文本？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:57:35.600

You would probably want to use a **`ListView`**.

A `ListView` can be used to display the data that you have in the array with each row in the list displaying a text from the array.

Have a look at the [documentation](http://developer.android.com/guide/topics/ui/layout/listview.html) here.

**EDIT :** There is another way of doing it, which is closer to your actual idea of a table of TextViews.

You can define a vertical LinearLayout and then run a loop through your array, and for every element in the array dynamically add a TextView to the LinearLayout.

This method is more complex than using the ListView and I would *suggest you to go for the ListView* if you are not very much acquainted with Android.

# entity-framework - 生成 SQL 时忽略修改的实体工作区

> ID：15308925
> 
> 赞同：0
> 
> 时间：2013-03-09T08:54:43.530
> 
> 标签：entity-framework, entity-framework-4, dbcontext

我有一个实体模型 (EDMX) 文件和 EF 4.3.1。我正在尝试对 EDMX 进行运行时修改（更改`store:Schema`用于生成查询的表/实体集）。我正在使用基于B. Haynes 的[EF 模型适配器项目的代码。](http://efmodeladapter.codeplex.com/)

看来我可以使用模式模型适配器对 XML 进行很好的更改，并将其加载到元数据工作区，然后将其传递给连接。但是，当 DbContext/EF 框架代码生成查询时，它使用架构的旧值。

1.  创建一个新的 MyEntities
2.  手动加载 EDMX 元数据
3.  将“store:Schema”值替换为新的所需值
4.  从修改后的 XML 创建元数据工作区
5.  使用修改后的工作区返回一个新的 EntityConnection
6.  查询数据 ( `from x in db.Table select x`)

这是正在发生的事情的基础。我们通过基于修改后的工作空间和连接创建一个新的 EntityConnection 来创建我们的 dbContext。还有一些提供者包装等等，用于日志记录等。抱歉，如果这令人困惑。

```
public MyEntities(): base( this.Create("name=MyEntitiesConnStr"), true)
{
}

public static DbConnection Create(string connectionString)
{
    var ecsb = ConnectionHelper.ResolveConnectionStringDetails(connectionString);
    var workspace = GetModifiedEntityWorkspace(ecsb);
    var storeConnection = DbProviderFactories.GetFactory(ecsb.Provider).CreateConnection();
    Debug.Assert(storeConnection != null, "storeConnection != null");
    storeConnection.ConnectionString = ecsb.ProviderConnectionString;
    var wrappedConnection = MyWrappedConnetion.WrapConnection(storeConnection);
    _log.Debug("Creating new entity connection");
    var newEntityConnection = new EntityConnection(workspace, wrappedConnection);
    WireEvents(wrappedConnection);
    return newEntityConnection;
}

private static MetadataWorkspace GetModifiedEntityWorkspace(EntityConnectionStringBuilder ecsb)
{
    // instantiate manager class
    // read all XML items from the embedded resources
    // change the store:schema to the real one for this environment
    // <EntitySet Name="..." store:Type="Tables" store:Schema="SCM" store:Name="TBLX">
    // create new MetadataWorksspace(ssdl,cdl,...)
} 
```

知道在哪里/为什么它仍然获得`Schema`查询的旧值吗？我认为它适用于 EF 4.0，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:56:02.360

原来问题出`<DefiningQuery>`在实体集下的元素上。

此元素包含用于定义实体的基本查询的定义。也许有些事情发生了变化，现在他们出于速度原因提到了这一点。还需要修改该查询，然后架构更改才会生效。

```
<EntitySet Name="MYTABLE" store:Type="Tables" store:Schema="MYSCHEMA" ...>
<DefiningQuery>
    SELECT MYTABLE.COLUMN [...REPEAT..]
    FROM MYSCHEMA.MYTABLE AS MYTABLE
</definingQuery> 
```

`"MYSCHEMA"`因此，在这两个位置进行更改可以解决此问题。只是`store:Schema`元素是不够的。

# php - 如何在 PHP CURL 中设置 jquery 变量

> ID：15308929
> 
> 赞同：0
> 
> 时间：2013-03-09T08:55:25.490
> 
> 标签：php, jquery, ajax, variables, get

我在 PHP 中有一个屏幕抓取代码，如下所示：

```
<?
$url = 'https://www.google.nl/search?q=cars';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);
echo $curl_scraped_page;
?> 
```

我还有一个 Jquery(ajax) 脚本，它可以像这样获取代理：

```
$.get('ThePhpFile.php', function(data){

     $(data).appendTo('div')

} 
```

一切正常，但现在我想将要抓取的 URL 设置为变量，这实际上是父文档中某些输入的值（我正在使用 iframe）。我知道如何在 Jquery 中做到这一点：

```
var TheUrl = $("input", parent.document.body).val(); 
```

所以我的问题是如何设置变量以使用 PHP 代码。有必要把它放在PHP代码中吗？我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:58:53.810

您需要将变量 ajax 到 php：

这会将 ?url=..... 发送到 php

完整示例[演示](http://plungjan.name/SO/searchproxy.html)

```
<html>
<head>
<title>Search Proxy</title>
<script type='text/javascript' src='//code.jquery.com/jquery-1.9.1.js'></script>
<script>
$(function() {
  $("#search").on("submit",function(e){
    e.preventDefault();
    $.get('searchproxy.php', 
     {url:$("#url").val()}, 
       function(data){
         $(data).html('#result');
     });
  });
});
</script>
</head>
<body>
<div>
<form id="search">
<input id="url" type="text" value="" />
</form>
<div id="result"></div>
</body>
</html> 
```

* * *

```
<?php
$url = $url = $_GET["url"]; // you need to add input cleaning
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);
echo $curl_scraped_page;
?> 
```

# unix - ive been searching this to get a sense but i am still confused

> ID：15308932
> 
> 赞同：-1
> 
> 时间：2013-03-09T08:56:59.777
> 
> 标签：unix, command, character, symbols

i'm confused about the $symbol for unix. according to the definition, it states that it is the value stored by the variable following it. i'm not following the definition - could you please give me an example of how it is being used?

thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T09:00:20.087

You define a variable like this:

```
greeting=hello
export name=luc 
```

and use like this:

```
echo $greeting $name 
```

If you use `export` that means the variable will be visible to subshells.

EDIT: If you want to assign a string containing spaces, you have to quote it either using double quotes (") or single quotes ('). Variables inside double quotes will be expanded whereas in single quotes they won't:

```
axel@loro:~$ name=luc
axel@loro:~$ echo "hello $name"
hello luc
axel@loro:~$ echo 'hello $name'
hello $name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:01:26.867

在外壳脚本的情况下。为变量赋值时，不需要使用 $ simbol。仅当您想访问该变量的值时。例子：

```
 VARIABLE=100000;
     echo "$VARIABLE";
     othervariable=$VARIABLE+10;
     echo $othervariable; 
```

另一件事：如果您使用 assignment ，则 = simbol 前后不要留空格。

这是一个很好的 bash 教程： http: [//linuxconfig.org/Bash_scripting_Tutorial](http://linuxconfig.org/Bash_scripting_Tutorial)

我的名字.sh：

```
 #!/bin/sh
     finger | grep "`whoami` " | tail -n 1 | awk '{FS="\t";print $2,$3;}' 
```

finger：打印所有登录的用户示例结果：

```
 login   Name              Tty      Idle  Login Time   Office     Office Phone
    xuser   Forname Nickname  tty7     3:18  Mar  9 07:23 (:0)
    ... 
```

grep：过滤包含给定字符串的行（在本例中，如果我们的登录名是 xuser，我们需要过滤 xuser） [http://www.gnu.org/software/grep/manual/grep.html](http://www.gnu.org/software/grep/manual/grep.html)

whoami：打印我的登录名 [http://linux.about.com/library/cmd/blcmdl1_whoami.htm](http://linux.about.com/library/cmd/blcmdl1_whoami.htm)

tail -n 1 ：仅显示最后一行结果 [http://unixhelp.ed.ac.uk/CGI/man-cgi?tail](http://unixhelp.ed.ac.uk/CGI/man-cgi?tail)

awk 脚本：打印结果的第二列和第三列：Forname, Nickname [http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_toc.html](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_toc.html)

# java - Calling controller of one portlet from another portlet

> ID：15308935
> 
> 赞同：0
> 
> 时间：2013-03-09T08:57:27.213
> 
> 标签：java, controller, liferay, portlet

I have two portlets say portlet1 and portlet2\. I have a controller defined portlet1 as

```
@ResourceMapping("getForm")
@ResponseBody
public ModelAndView getForm(ResourceRequest request,ResourceResponse response) {
.....
} 
```

Now I want to call this controller from portlet2\. is there any way that I can achieve this? Let me tell you that both the portlets are not on the same page.

# php - HTTP_PRAGMA manually inserted into $_SERVER

> ID：15308944
> 
> 赞同：0
> 
> 时间：2013-03-09T08:58:27.090
> 
> 标签：php, caching, server-variables

When we output the `$_SERVER` variable like this:

```
die('<pre>' . print_r($_SERVER, true) . '</pre>'); 
```

We'll get alot of taha, and between them these items:

```
[HTTP_CONNECTION] => keep-alive
[HTTP_CACHE_CONTROL] => max-age=0 
```

When we to page reload `(Refresh button, CTRL+R or F5)`, they will remain there, and values will not be changed.

But when I press `CTRL + F5` (clear cache), a new item will appear under those two items:

```
[HTTP_PRAGMA] => no-cache 
```

So my question is what shall browser do if I set:

```
$_SERVER['HTTP_PRAGMA'] = 'no-cache'; 
```

On top of my PHP scripts for every request? Will the browser **always** understand this as—clear cache for this web page?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:01:18.620

浏览器不会做任何事情。`$_SERVER`不影响*输出*，所以浏览器看不到它。

如果要为浏览器指定缓存控制规则，请使用`header()`和[mnot 缓存指南](http://www.mnot.net/cache_docs/)。

# vb.net - VB.NET 使用键沿对角线移动对象

> ID：15308953
> 
> 赞同：0
> 
> 时间：2013-03-09T08:59:30.307
> 
> 标签：vb.net

按下两个方向键时如何沿对角线移动对象？怎么做？我尝试将 elseif 语句添加到一起处理向上和向右，但是当我将它们按在一起时它仍然向上或向右移动

```
 Private Sub Form1_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles MyBase.KeyDown
    If e.KeyCode = Keys.Right Then
        Label1.Location = New Point(Label1.Location.X + 5, Label1.Location.Y)

    ElseIf e.KeyCode = Keys.Left Then
        Label1.Location = New Point(Label1.Location.X - 5, Label1.Location.Y)

    ElseIf e.KeyCode = Keys.Down Then
        Label1.Location = New Point(Label1.Location.X, Label1.Location.Y + 5)

    ElseIf e.KeyCode = Keys.Up Then
        Label1.Location = New Point(Label1.Location.X, Label1.Location.Y - 5)

    ElseIf e.KeyCode = Keys.Up And e.KeyCode = Keys.Right Then
        Label1.Location = New Point(Label1.Location.X + 5, Label1.Location.Y + 5)
    End If

    CheckIntersections()
    If Label1.Location.Y < 0 Then
        Label1.Location = New Point(Label1.Location.X, Me.Height)
    ElseIf Label1.Location.Y > Me.Height Then
        Label1.Location = New Point(Label1.Location.X, Me.Bottom = 0)
    ElseIf Label1.Location.X < 0 Then
        Label1.Location = New Point(Me.Width, Label1.Location.Y)
    ElseIf Label1.Location.X > Me.Width Then
        Label1.Location = New Point(0, Label1.Location.Y)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:07:06.707

`KeyDown`每次按下单个键时都会发生该事件。因此，您需要记住当光标键被按下一次时，`KeyDown`以检查另一个光标键被按下的情况。

请记住订阅`KeyUp`事件以清除状态，因为用户可以按下一个光标键，释放它，然后再按下另一个。

您的代码将永远无法工作：

> ```
> ElseIf e.KeyCode = Keys.Up And e.KeyCode = Keys.Right Then 
> ```

因为这不可能是真的。`KeyCode`是单键码，不能既是一键又是另一键。

# html - 为什么我的 HTML 没有居中对齐？

> ID：15308958
> 
> 赞同：2
> 
> 时间：2013-03-09T09:00:07.320
> 
> 标签：html, alignment, center

对不起，我承认我在 HTML 方面有点新手。但我看不出哪里出错了。我已将页面声明为**居中对齐**，但由于某种原因对我来说是不可见的，它实际上不会对齐！

我的代码在这里...

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
<!--
body,td,th {
    font-size: 14px;
    text-shadow: inherit;
    max-width: 1000px;
    min-width: 600px;
    float: none;
    vertical-align: central;
    position: absolute;
    width: auto;
}
h1 {
    font-size: 40px;
    color: #FFF;
}
h1,h2,h3,h4,h5,h6 {
    font-family: Arial, Helvetica, sans-serif;
    color: #FFFFFF;
}
h2 {
    font-size: 16px;
    color: #666;
}
h3 {
    font-size: 24px;
    color: #FFFFFF;
}
.Headertext2 {
}
h5 {
    font-size: 16px;
    color: #666;
}

h6 {
    font-size: medium;
    color: #000;
}
h4 {
    font-size: 12px;
    color: #FFF;
}
a:link {
    text-decoration: none;
}
a:visited {
    text-decoration: none;
}
a:hover {
    text-decoration: none;
    color: #999;
}
a:active {
    text-decoration: none;
}
      </style>      <title>We'll fix your Potholes!</title>
    </head><center>
 <body bgcolor="#B90D32"> <div id="container" width "1200" align="center" >
<h1>A1Jay Pothole Solutions</h1>
<h3><strong>Permanent Pothole Repair that lasts</strong></h3>
<div id="content" align="center" bgcolor="#FFFFFF"  width"600" class="content">
  <h6>Potholes are a growing problem and cause lasting damage to your vehicle. 
  We here at A1JAy Pothole Solution have the solution. We use only the best products on the market to repair potholes ensuring that the problem is fixed permanently and never returns. Our repairs are professional water tight and permanent. We replace any road markings that may be removed. We respond quickly to repair any holes, therefore stopping the damage to your vehicle.
    Our products are cold lay, fully graded to PSV-60 and all packaging is recyclable. 

    We have different rates depending on the amount of potholes you require permanently repairing, get in touch for details.

    If you have a pothole on your drive, street, place of work, car park, walkway or anywhere else, please get in contact and I will happily give you a free, no obligation quote..  </h6>
<p>&nbsp;</p>

  </div>
</div>
</body>

</html> 
```

如果这个问题已经被问过，我很抱歉，我还在了解 Stack Overflow。提前致谢 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T09:03:23.337

让我们从一个精简（和工作）的解决方案开始：http: [//jsfiddle.net/WDTCK/1/](http://jsfiddle.net/WDTCK/1/)

## 要点

*   `<center>`已过时*（它也是 的非法父`body`级，在您的示例中未关闭）
*   `align=center`已过时*
*   使用 CSS 居中的一种简单方法是为容器元素分配宽度和`margin: 0 auto`

像这样：

```
#container {
    margin: 0 auto;
    width: 600px;    
} 
```

## 小分

*   总是喜欢与标记分开声明的样式
*   始终使用 CSS 声明样式（不推荐使用的属性，如`bgcolor="#B90D32"`）
*   确保正确使用标题。我看到 H1、H3 和 H6。标题应该代表文件的大纲；它们不应仅用于格式化。

这是一个更简洁的示例，它展示了更好的语义：http: [//jsfiddle.net/WDTCK/2/](http://jsfiddle.net/WDTCK/2/)

^(* [“已过时且不合格，并且 [...] 不得被作者使用。”](http://www.w3.org/TR/html5/obsolete.html#obsolete))

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-09T09:03:52.903

把这个放在体内

```
 <div align = "center">
    <!--somecodes-->
    </div> 
```

# html - 如何删除列布局中的绝对 div 并保持相同的布局？

> ID：15308965
> 
> 赞同：0
> 
> 时间：2013-03-09T09:01:07.830
> 
> 标签：html, css, css-float

我今天早些时候问了一个问题并得到了我接受的答案，它似乎可以工作，除了当列内容变得大于浏览器窗口时出现的问题，因为我无法向下滚动。

有没有办法在不使用绝对值的情况下获得与我在上一个问题中接受的答案中给出的相同结果？

这是我需要帮助解决的问题

[链接到上一个问题](https://stackoverflow.com/questions/15307009/problems-with-a-3-column-layout-with-fixed-left-side)

显示问题的 jFiddler 链接 jsfiddle.net/HKJvP/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:40:46.903

这是您应该查看的 css....display: 应该是内联的....这是针对两列的...对 3 列执行相同的操作....另一件事不要设置高度. 它应该随着内容自动增加......它也有助于动态页面......

```
 .wrapper{overflow:hidden; width:90%; padding:30px; margin:0 0 0 5%; }
               .wrapper .right {width: 80%;
                             padding-right: 20px;
                               float: right;
                              display: inline;
                          border: solid #000 1px 2px 2px 1px;
                        padding:10px;
                              }

            .wrapper .leftbar {
                 width: 15%;
                float: left;
           display: inline; padding:10px;
                 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:21:18.567

看看这个

HTML

```
<div class="left-fixed">
    Left side here!
</div>
<div class="floating-container">
    <div class="left">
        Center Fluid<br/>
        Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?
    </div>
    <div class="right">
        Right '200px width'<br/>

        Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?

    </div>
</div> 
```

CSS

```
body, html{
    height: 100%;
    overflow-y: auto;
    margin: 0;
}

.left-fixed {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 230px;
    background-color: green;
}

.floating-container {
    background-color: red;
    height: 100%;
    margin-left: 230px;
}

.floating-container .left {
    float: left;
    width: 50%;
    background-color: yellow;
    min-height: 100%;
}

.floating-container .right {
    float: right;
    width: 50%;
    background-color: blue;
    min-height: 100%;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/w5Jvw/1/)

# android - 如何显示相同的进度条以从 Internet 加载数据并在 UI 上显示内容

> ID：15308967
> 
> 赞同：0
> 
> 时间：2013-03-09T09:01:18.243
> 
> 标签：android

我正在创建一个应用程序，我必须在其中从 Internet 获取一些数据并在 UI 上将其显示给用户。我在方法中创建了一个进度条，`AsyncTask` `onPreExecute()`并且在`onPostExecute()`方法中我将所有数据传递给了另一个 Activity 和 startActivty。然后我关闭进度对话框。但是，这并不好。当第二次`activity`在 UI 上加载数据时，`onCreate`ProgressBar 就会挂起。我该如何解决这个问题。

这是我的代码：

```
@Override
    protected void onPreExecute() {
        proDialog = new ProgressDialog(mContext);
        proDialog.setTitle("Support Manager");
        proDialog.setMessage("Logging in ...");
        proDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        proDialog.setIcon(R.drawable.ic_launcher);
        proDialog.show();
        super.onPreExecute();
    }

    @Override
    protected RepresentativeData doInBackground(String... params) {
        JSONObject result = null;

        try {
            result = client.reprentativeDetailNode(params[0]);
            LoginJsonParsing loginJsonParsing = new LoginJsonParsing();
            Details = loginJsonParsing
                    .Details(result);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return Details;
    }

    @Override
    protected void onPostExecute(Data result) {

        Intent secActivity = new Intent(mContext,YourRepresentative.class);
        secAcitivity.putExtra("detail", result);

        mContext.startActivity(secActivity);
        proDialog.dismiss();
        super.onPostExecute(result);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:33:16.530

切换到新活动时无法显示进度

# ruby-on-rails - What does a .gem file contain? How it is being used by Rails framework?

> ID：15308970
> 
> 赞同：14
> 
> 时间：2013-03-09T09:01:33.610
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, gem

I just created a test gem using bundle and it created a .gem file with unreadable content so I was wondering

1.  what does that .gem file contains ? is this binary data ? as I used to think that .gem files contains packaged ruby functions

2.  how is this .gem file being used by rails framework ? since it doesn't look like a module

Thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T09:26:59.887

You can see what is happening if you check the file on your file system.

In a Posix environment, you can check the file with the file command:

```
$: file bundler-1.3.0.gem          
bundler-1.3.0.gem: POSIX tar archive 
```

As you can see it is a tar archive. So it is a binary file, packaged and managed by the `gem` tool.

It is 'binary' so you will not see it as you may have expected.

You are correct though, and you can continue to think that it contains packaged ruby 'functions'.

Everything that you have told it to contain through your gemspec (however you included it) is there.

As far as how Rails uses the gemfile, it is used generally by installing the gem to your system, how ever that is done is partially dependent on your environment decisions.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T09:24:20.603

A gem file is just a tar archive containing (at least) a gemspec file. There will also usually be ruby source files and possibly native code or supporting assets (for example a gem designed to be used with rails might also package some javascript). It is also common to include a README, CHANGELOG and other documentation.

# php - 谁能建议我可以让我的 class="selected" 在 Wordpress 中进行导航的方法？

> ID：15308971
> 
> 赞同：0
> 
> 时间：2013-03-09T09:01:50.133
> 
> 标签：php, wordpress, if-statement, navigation

谁能建议我可以让我的 class="selected" 在 Wordpress 中进行导航的方法？

我有一个 wordpress 导航设置：

如果我在主页上，则选择我的主页类。

如果我想转到第一页，我希望这个类在导航中改变，所以只有这个类加载而不是主页。

我使用：class="selected" 来激活我的翻转效果。

我可以让它在一个固定的网站上工作，而不是在 wordpress 上，这里有什么建议吗？

```
<div class="nav">
  <ul>
  <li class="selected"><a href="#" title="Home">Home</a></li>
  <li><a href="#">One</a></li>
  <li><a href="#">Two</a></li>
  <li><a href="#">Three</a></li>
  <li><a href="#">Four</a></li>
  <li><a href="#">Five</a></li>
  <li><a href="#">Six</a></li>
  </ul>
</div> 
```

我可以在这里使用 if 语句吗？

```
 <?php if(is_home() ) {

    //for example load class="selected"

    } else {

    //for example if other page don't load class="selected"

   } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:50:53.030

据我了解，您使用的是硬编码导航，而不是[`wp_nav_menu()`](http://codex.wordpress.org/Function_Reference/wp_nav_menu)来自 WordPress。

因此，您可以有条件地检查您正在使用的每个页面：

```
<div class="nav">
  <ul>
  <li<?php echo is_home()? '  class="selected"'; '';?>>
    <a href="#" title="Home">Home</a>
  </li>
  <li<?php echo is_page('Contact')? '  class="selected"'; '';?>>
    <a href="#">Contact page</a>
  </li>
  <li<?php echo is_single('My first Post')? ' class="selected"'; '';?>>
    <a href="#">Myfirst post</a>
  </li>
  </ul>
</div> 
```

您应该使用 WordPress 中的[条件标签](http://codex.wordpress.org/Conditional_Tags)。

如果你看第一个`<li>`，你会看到`<?php echo is_home()? ' class="selected"'; '';?>`这段代码表示为[三元运算符](http://php.net/manual/en/language.operators.comparison.php)，相当于

```
if( is_home() ){
  echo ' class="selected"'; #echo class. white space in front so that it does not stick to the "<li"
else{
  echo ''; #do nothing
} 
```

在上面的示例中，我使用了三个函数：

**[`is_home()`](http://codex.wordpress.org/Function_Reference/is_home)**- 如果您在主页上，则返回 true

**[`is_page($arg)`](http://codex.wordpress.org/Function_Reference/is_page)**- 如果您在 指定的页面上，则返回 true `$arg`。

**[`is_single($arg)`](http://codex.wordpress.org/Function_Reference/is_single)**- 如果您在 指定的帖子上，则返回 true `$arg`。

您可以选择使用其他可用的[条件标签。](http://codex.wordpress.org/Conditional_Tags)

# android - 如何维护复选框的状态

> ID：15308972
> 
> 赞同：1
> 
> 时间：2013-03-09T09:01:53.930
> 
> 标签：android

我的第一个活动是我给 chkbox 的会员个人信息，用于检查本地地址是否与永久地址相同？如果他们不一样，它应该去activity2，即永久地址屏幕。在我单击保存按钮时填写所有详细信息后，它应该转到 activity1 现在我希望我在第一个活动中填写的任何内容也应该保持相同，chkbox 状态并将第二个活动数据存储在第一个活动类的一些变量中现在我正在存储活动 1和数据库中的acitvity2数据。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:18:15.903

根据您的要求使用 SharedPreferences

要获得共享偏好，请在您的活动中使用以下方法：

```
SharedPreferences prefs = this.getSharedPreferences("store", 
                                                      Context.MODE_PRIVATE); 
```

编辑和保存首选项

```
boolean checkbox_state = true;
prefs.edit().putBoolean("KEY", checkbox_state ).commit(); 
```

阅读偏好：

```
boolean state= prefs.getBoolean("KEY", false);; 
```

# python - Django：CommentForm 无法正常工作，没有错误？

> ID：15308976
> 
> 赞同：0
> 
> 时间：2013-03-09T09:02:12.523
> 
> 标签：python, django, forms

尝试创建如下评论表单：

```
class CommentCreationForm(forms.Form):
    body = forms.CharField(widget=forms.Textarea)
    author = forms.CharField()

    def __init__(self, *args, **kwargs):
        super(CommmentCreationForm, self).__init__(*args, **kwargs)
        self.user = kwargs.pop('user', None)

    def save(self):
        data = self.cleaned_data
        comment = Comment(body=data['body'], author=data['author'], user=self.user)
        comment.save()

    def clean(self):
        return self.cleaned_data 
```

视图.py

```
@login_required
def create(request):
    try:
        if is_post(request):
            form = CommentCreationForm(request.user)
            if form.is_valid():
                print 'valid'
                form.save()
                return render_to_response("login.html", context_instance = RequestContext(request))
            return render_to_response("login.html", context_instance = RequestContext(request))
        return render_to_response("create.html", {'form':CommentCreationForm()}, context_instance = RequestContext(request))
    except Exception as e:
        print str(e) 
```

如果我提交表单，它会返回：“用户”对象没有“获取”属性。我确定我做错了什么，但我不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:15:17.427

首先，表单初始化不正确，签名`Form.__init__`如下：

```
Form.__init__(data=None, files=None, ...)

# When you put
form = CommentCreationForm(request.user)
# The data is feed w/ request.user ... 
```

其次，`self.user = kwargs.pop('user', None)`将始终设置`self.user`为`None`，除非调用代码是：

```
form = CommentCreationForm(request.POST, user=request.user) 
```

最后，更好的方法是在某些范围内直接引用`request.user`，例如：

```
def make_commment_form_cls(user):

    class CommentCreationForm(forms.Form):
        body = forms.CharField(widget=forms.Textarea)
        author = forms.CharField()

        def save(self):
            data = self.cleaned_data
            # HERE
            comment = Comment(body=data['body'], author=data['author'], user=user)
            comment.save()

    return CommentCreationForm 
```

在创建视图中

```
# replace 
form = CommentCreationForm(request.user)
# with
form = make_comment_form_cls(request.user)(request.POST) 
```

# php - 使用 MySQL 在 PHP 中填充一个 Dropbox，然后单击提交按钮后在表格中显示数据

> ID：15308978
> 
> 赞同：-1
> 
> 时间：2013-03-09T09:02:22.953
> 
> 标签：php, mysql, dropbox

我可以正确填充保管箱，但是当我单击提交时，我找不到在表格中显示所选项目数据的方法。这是代码：

**索引.php**

```
<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Αναζήτηση Οφειλών Ανά Πολυκατοικία</title>
  <link rel="stylesheet" href="tbl_style.css" type ="text/css"/>
</head>
<body>
  <form id="form1" name="form1" method="POST" action="search.php">
  <?php
    include('config.php');
    $query = "SELECT DISTINCT odos FROM ofeiles_results ORDER BY odos ASC";
    mysql_query("SET CHARACTER SET 'utf8'");
    mysql_query("SET NAMES 'utf8'");
    $result = mysql_query($query);
    echo "<select name='polykatoikia'>";
    while ($row = mysql_fetch_array($result)) {
      echo "<option value='" . $row['odos'] . "'>" . $row['odos'] . "</option>";
    }
    echo "</select>";
  ?>
  <input type="submit" name="Submit" value="Select" />
  </form>
</html>
</body> 
```

到目前为止一切顺利，保管箱已被填充。然后在文件 search.php 我有以下代码：

**搜索.php**

```
<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Αποτελεσματα Αναζητησης Πολυκατοικιων</title>
  <link rel="stylesheet" href="tbl_style.css" type ="text/css"/>
</head>
</html>
<?php
  include('config_barcode.php');
  if(isset($_POST['select'])){
    $odoss = $_POST['select'];
    mysql_query("SET CHARACTER SET 'utf8'");
    mysql_query("SET NAMES 'utf8'");
    $display_query = "SELECT odos FROM ofeiles_results WHERE odos LIKE '" . $odoss . "'";
    $result_exoda = mysql_query($display_query) or die(mysql_error());
    print $result_exoda;
    $odos = $row['odos'];
    $app = $row['perigrafh'];
    $enoikos = $row['enoikos'];
    $mhnas = $row['mhnas'];
    $synolo = $row['synolo'];
    echo "</br>";
    echo "</br>";
    echo "</br>";
    echo "<table cellpadding='3' cellspacing='0'>";
    echo "<tr>";
    echo "<th align='center' bgcolor='#FFCC00'><strong>Οδος</strong></th>";
    echo "<th align='center' bgcolor='#FFCC00'><strong>Διαμερισμα</strong></th>";
    echo "<th align='center' bgcolor='#FFCC00'><strong>Όνομα</strong></th>";
    echo "<th align='center' bgcolor='#FFCC00'><strong>Σύνολο</strong></th>";
    echo "<th align='center' bgcolor='#FFCC00'><strong>Μήνας</strong></th>";
    echo "</tr>";
    echo "<td align='center'>".$odos."</td>";
    echo " <td align='center'>".$app."</td>";
    echo " <td align='center'>".$enoikos."</td>";
    echo " <td align='center'>".$mhnas."</td>";
    echo " <td align='center'>".$synolo."</td>";
    echo "</table></td>";
    echo $result_exoda;
  }
?> 
```

我得到的只是一个空白页。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:15:03.187

我用它来显示表格中的数据，你不需要使用很多“echo”使用 LOOPS 你可以添加更多的行

```
$sql = "SELECT your_row , another_row , your_row_again FROM your_table_name"; 
```

如果您的数据库中有更多行。

```
 $conn = mysql_connect($dbhost, $dbuser);
if(! $conn )
    {
        die('Could not connect: ' . mysql_error());
    }
$sql = "SELECT your_row , another_row , your_row_again FROM your_table_name";
mysql_select_db('your_db');
$retval = mysql_query( $sql, $conn );
if(! $retval )
    {
        die('Could not get data: ' . mysql_error());
    }
echo "<div align = 'center'><table border = '1'>";
echo "<th>Your_row_Header</th><th>Row_Header_again</th><th>Row_Header_again</th>";
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
{
    echo "<tr><td align = center>{$row['Your_row1']}</td>".
        "<td align = center>{$row['Your_Row2']}</td></tr>".
                       "<td align = center>{$row['Your_Row3']}</td>";
} 
echo "</table></div><br />";
mysql_close($conn); 
```

# c# - 使用委托和事件从另一个表单更新表单

> ID：15308979
> 
> 赞同：1
> 
> 时间：2013-03-09T09:02:29.143
> 
> 标签：c#, winforms, events, user-interface, delegates

我一直忘记这是怎么做到的。。

我想在不创建表单实例的情况下从 Form2 更新主表单上的 UI。
我记得使用委托/事件并可能以某种方式传入第一个表单的实例，但完全空白。

帮帮我，谢谢。

从 Form2 向 Form1 上的 listBox1 添加一些内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T09:12:25.140

是的，delegate 和 event 是正确的关键词

在某处实现您的 EventArgs 类：

```
public class MyEventArgs : EventArgs
{
    private List<string> EventInfo;
    public MyEventArgs(List<string> strings)
    {
        EventInfo = strings;
    }
    public List<string> GetInfo()
    {
        return EventInfo;
    }
} 
```

在表格 2 中：

```
public class Form2
{
  public event EventHandler<MyEventArgs> OnMyChange;

  //call it then you need to update:
  if(OnMyChange!= null)
  {
    MyEventArgs e = new MyEventArgs();

    List<string> content = new List<string>();
    content.Add("abc");
    e.EventInfo = content;

    OnMyChange(this, e);
  }
} 
```

在表格 1 中：

```
Form2 MyForm2 = new Form2();
MyForm2.OnMyChange += MyChanged;

static void MyChanged(object source, MyEventArgs e)
{
    //e.EventInfo will contain list
    Console.WriteLine("changed");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:10:00.947

您无法更新未实例化的对象。

您可以做的是将某些函数注册为 form2 中更改事件的处理程序。如果该函数是主窗体的成员，则它可以影响该窗体的组件。

传递委托基本相同，但允许您使用您选择的任意函数。不过，大多数时候这不值得开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:12:06.513

很难从问题中得到你真正需要的东西，但听起来你可以将一个[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)传递给你的表单来添加项目。您可以更改 Form2 中的构造函数以确保您始终拥有回调 - 例如

```
 private Action<string> addItemsToParent;

 public Form2(Action<string> addItemsToParent)
 {
    this.addItemsToParent = addItemsToParent;
 }

 public void AddItems()
 {
     addItemsToParent("item 1");
 } 
```

# java - Java 抽象方法签名

> ID：15308986
> 
> 赞同：0
> 
> 时间：2013-03-09T09:03:39.537
> 
> 标签：java, inheritance, methods, polymorphism, abstract

我对 Java 类实现的抽象方法符号感到很困惑。

例如，考虑：

```
interface Programmer {
    Object program();
}

class Linus implements Programmer {
    public String program() {
        return "goto end;";
    }
}

public class Main {
    public static void main(String[] args) {
        System.out.println(new Linus().program());
    }
} 
```

这显然是可以接受的，因为任何期望来自 Linus.program() 的对象都会得到一个（特别是字符串）。

但现在考虑一下：

```
interface OS {
    void run(String code);
}

class Linux implements OS {
    public void run(Object code) {
        System.out.println("Hello world");
    }
}

public class Main {
    public static void main(String[] args) {
    new Linux().run("print 'Hello world'");
    }
} 
```

这无法编译，并产生错误：

```
The type Linux must implement the inherited abstract method OS.run(String) 
```

现在，任何东西都可以将字符串传递到操作系统接口的任何实例中，你当然可以在 Linux 上做到这一点。

我看不出第二个无法编译的原因。在让 Java 编译第二个程序的后果中，我是否遗漏了一些使这令人望而却步的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T09:06:24.453

您为第二种情况所做的是方法重载。
方法的签名是“方法名称”和“参数的数量和类型”
在第二种情况下，您正在更改编译器的参数类型是另一种方法，并要求您实现抽象（未实现）的方法。如果您实现了接口中存在的方法，`public void run(String code)`那么该方法`public void run(Object code)`将被视为重载方法。

**注意：**方法覆盖从不基于方法的返回类型。由于返回类型不被视为方法的签名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:09:44.890

您不能传递基类 Object 的实例来代替 String 类的实例，但反之亦然。在您的界面操作系统中，run 方法的参数是 String 类型，而在实现类中，您将参数概括为 Object 类型，这是不允许的。因此，编译器抱怨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:18:01.120

你说“现在，任何东西都可以将字符串传递给操作系统接口的任何实例，你当然可以在 Linux 上做到这一点。” => 问题是你可以，但不是必须的。

考虑一下：由于该方法的 Linux 版本将 Object 作为参数，因此您可以尝试传递一个 Collection，例如。因此，您不会尊重接口，它明确地将参数限制为字符串。这就是为什么 Linux 版本的方法不被认为是 OS 版本的“子”。

由于接口中的每个方法都需要有它的“子”，编译器会抱怨你没有为 OS.run(String) 实现一个“子”

# vhdl - 在 BRAM VHDL 中读写二维数组

> ID：15308993
> 
> 赞同：-1
> 
> 时间：2013-03-09T09:05:13.763
> 
> 标签：vhdl

我想对一个长度为 16 的数组进行排序，该数组有 8 个位数。我已经使用了bubblesort，它工作正常。现在我想从 BRAM 读取输入数组并将排序后的输出写入 BRAM。我已将单端口 RAM 用于测试平台，这就是它的外观。

```
library IEEE;
use ieee.std_logic_1164.all;
use ieee.std_logic_arith.all;
use ieee.std_logic_unsigned.all;

entity testbench is   
end testbench;

architecture Behavioral of testbench is

--temporary signal declarations.
signal ena : std_logic := '0';
signal wea : std_logic_VECTOR(0 downto 0):="0";
signal addra,dina,douta : std_logic_VECTOR(7 downto 0) := (others => '0');
signal clk : std_logic := '0';

begin
--Instantiating BRAM.
BRAM : entity work.BRAM_test 
port map(
clka => clk,  --clock for writing data to RAM.
ena => ena,   --Enable signal.
wea => wea,   --Write enable signal for Port A.
addra => addra, --8 bit address for the RAM.
dina => dina,   --8 bit data input to the RAM.
douta => douta);  --8 bit data output from the RAM. 

--Simulation process.
process(clk)
begin
addra <= X"00";  --reset the address value for reading from memory location "0"

end process;    

--Clock generation - Generates 500 MHz clock with 50% duty cycle.
process
begin
clk <= '1';
wait for 1 ns;  --"ON" time.
clk <= '0';
wait for 1 ns;  --"OFF" time.
end process;    

end Behavioral; 
```

我无法做到这一点。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:06:47.670

您可以执行以下附加代码之类的操作。这是一个通过状态读取 BRAM 内容、对数据进行排序（您可以添加排序逻辑）并将结果写回的过程。

```
gen_reset: process
begin
    reset<='1';
    wait for 50 ns;
    reset<='0';
    wait;
end process gen_reset;

gen_bram_access: process(clk, reset)
    type state_t is (read_bram, sort, write_bram, end_state);
    type buf_t is array(255 downto 0) of std_logic_vector(7 downto 0);
    variable buf: buf_t;
    variable state: state_t;

begin
    if reset='1' then
        addra<=X"00";
        buf:=(others=>(others => '0'));
        ena<='1';
        wea<="0";
        state:=read_bram;
    elsif rising_Edge(clk) then
        -- defaults
        ena<='1';
        wea<="0"; 

        case state is
    -- readout
        when read_bram =>
            if addra<X"FF" then --expected that X"FF" is last address
                buf(to_integer(unsigned(addra))):=dina;
                state:=read_bram;
                addra<=std_logic_vector(unsigned(addra) + 1);
            else
                addra<=X"00";
                state:=sort;
            end if;

    -- sort with whatever algo
        when sort =>
            -- add algo here! when finished, write results!
            state:=write_bram;

    -- write sorted to bram 
        when write_bram =>  
            if addra<X"FF" then --expected that X"FF" is last address
                douta<=buf(to_integer(unsigned(addra)));
                wea<="1";
                state:=write_bram;
                addra<=std_logic_vector(unsigned(addra) + 1);
            else
                addra<=X"00";
                state:=end_state;
            end if;         
        when others => -- (end_state)   
            state:=end_state;
        end case;
    end if;
end process gen_bram_access; 
```

# ios - 在哪里定义我的所有常量/全局变量？

> ID：15308996
> 
> 赞同：0
> 
> 时间：2013-03-09T09:05:26.290
> 
> 标签：ios, objective-c

我有类似的东西

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON )

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://www.test.com/"]];

KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"xyz" accessGroup:nil]; 
```

我必须一直在我的所有文件中定义。有没有办法可以在一个文件中定义它们，每次都导入它？

# 编辑

所以按照建议我将它添加到我的应用程序委托中

```
#import <UIKit/UIKit.h>
@class AFHTTPClient;
@class KeychainItemWrapper;

@interface TestAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, strong, readonly) AFHTTPClient *httpClient;
@property (nonatomic, strong, readonly) KeychainItemWrapper *keychainItem;
@end 
```

然后尝试在我的视图控制器中将我的 httpClient 定义为

```
httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://www.test.com/"]]; 
```

它给了我一个错误说`use of undeclared identifier 'httpClient'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:12:31.850

是的，您创建一个带有声明常量的文件并每次都导入它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T09:19:43.853

有很多方法。您可以创建一个专用的头文件。您可以将类别放在`AFHTTPClient`和上`KeychainItemWrapper`。

我可能会将所有这些都放入我的`AppDelegate`. 您不必导入`AFHTTPClient.h`并`KeychainItemWrapper.h`执行`AppDelegate.h`此操作。您可以只前向声明类：

```
@class AFHTTPClient;
@class KeychainItemWrapper;

@interface AppDelegate : NSObject <UIApplicationDelegate>

@property (nonatomic, readonly) BOOL isIPhone5;
@property (nonatomic, strong, readonly) AFHTTPClient *httpClient;
@property (nonatomic, strong, readonly) KeychainItemWrapper *keychainItem;

... 
```

然后，您只需在实际需要使用这些对象的文件中包含`AFHTTPClient.h`和。`KeychainItemWrapper.h`

顺便说一句，比较`DBL_EPSILON`是没有意义的。首先，在 iOS 上，`CGFloat`是 的别名`float`，而不是`double`. 您不必要地转换为`double`. 其次，`height`屏幕的 568。单精度`float`可以精确表示 -16777216 和 16777216 之间的每个整数，包括 568。您可以只测试是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:14:01.747

我已经好几年没有制作一个全局常量文件了……总有一个更好、更本地化的地方来存放这样的定义。尽管如此，这样的功能还是有用的——会回答，但请考虑如何将它们声明为更接近需要它们的实现。

*   创建头文件和源文件
*   要么声明 C 函数，要么声明具有类方法的 ObjC 类接口。
*   定义函数/方法
*   然后`#import`仅在需要时使用“全局常量”标头（不在 PCH 中）

* * *

使用 C 函数的示例：

```
// MONApp_Constants.h
// no #imports up here

extern bool MONApp_Is_iPhone5(void);

@class AFHTTPClient;
extern AFHTTPClient * MONApp_HTTPClient(void);

@class KeychainItemWrapper;
extern KeychainItemWrapper * MONApp_KeychainItem(void); 
```

当然，如果您只需要一个实例，您将需要找到一个保存对象引用的好地方。在这种情况下，函数不应该是全局可见的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T16:17:15.253

您需要在名为 constants.h 的文件中声明全局变量，并在必要时导入其他文件。

我建议你不要这样做：

```
#define httpClient [[[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://www.test.com/"]]]; 
```

您尝试请求的 URL 的原因可能会有所不同。#define 的想法是拥有不变的项目。即使您总是向@“ [https://www.test.com/](https://www.test.com/) ”请求，我仍然不建议您这样做。

希望这可以帮助...