# StackOverflow 问答 14444000-14444999

# opengl - 关于 glMapBufferRange

> ID：14444001
> 
> 赞同：0
> 
> 时间：2013-01-21T17:25:09.797
> 
> 标签：opengl, opengl-3

```
 GLfloat vertices4[]={-0.9,0.6, -0.9,0.2, -0.6,0.2, -0.6,0.6,
                         -0.4,0.6, -0.4,0.2,  0.1,0.2,  0.1,0.6,
                          0.3,0.6,  0.3,0.2,  0.6,0.2,  0.6,0.6  };

     GLushort indices[]={0,1,2,3, 120, 4,5,6,7, 120, 8,9,10,11};
     GLenum *value=GL_STREAM_DRAW;  
     GLfloat temp_err;

     glEnable(GL_PRIMITIVE_RESTART);
     nResult =GL_ERROR_CHECK((GL_NO_ERROR,"glEnable(GL_PRIMITIVE_RESTART)"));

     glPrimitiveRestartIndex(120);
     nResult = GL_ERROR_CHECK((GL_NO_ERROR,"glPrimitiveRestartIndex(120);"));

     glGenBuffers(1,&bufferid1);
     nResult = GL_ERROR_CHECK((GL_NO_ERROR,"glGenBuffers(1,&bufferid1)"));

     glGenBuffers(1,bufferid);

     glBindBuffer(GL_TEXTURE_BUFFER,bufferid);      
     glBufferData(GL_TEXTURE_BUFFER,sizeof(vertices4),vertices4,*value);

     temp_err=(GLfloat*)glMapBufferRange(GL_TEXTURE_BUFFER,0,8*sizeof(GLfloat),GL_MAP_READ_BIT);

     glBindBuffer(GL_ARRAY_BUFFER,bufferid1);
     nResult = GL_ERROR_CHECK((GL_NO_ERROR,"glBindBuffer(GL_ARRAY_BUFFER,bufferid1);")); 

     glBufferData(GL_ARRAY_BUFFER,8*sizeof(GLfloat),temp_err,*value);

     *attr_vertex = glGetAttribLocation(shader_data.psId, "a_position"); 
     nResult = GL_ERROR_CHECK((GL_NO_ERROR,"glGetAttribLocation(shader_data.psId, \"a_position\");"));

     glVertexAttribPointer(*attr_vertex, 2 , GL_FLOAT, GL_FALSE ,0, 0);
     nResult = GL_ERROR_CHECK((GL_NO_ERROR,"glVertexAttribPointer(attr_vertex, 2 , GL_FLOAT, GL_FALSE ,0, 0);"));

     glEnableVertexAttribArray(*attr_vertex);
     nResult = GL_ERROR_CHECK((GL_NO_ERROR,"glEnableVertexAttribArray(attr_vertex);"));

     glUniform1f(glGetUniformLocation(shader_data.psId,"offset_x"),x);                      
     glUniform1f(glGetUniformLocation(shader_data.psId,"offset_y"),y);                      
     glDrawElements(GL_TRIANGLE_FAN, 14,GL_UNSIGNED_SHORT,indices); 
```

我期望它会渲染 1 个四边形，因为我正在为“bufferid1”中的第一个四边形传递顶点数据，但它会渲染 vertices4 中的所有 3 个四边形。请指出我在这里出错的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:24:58.157

> 在这里，我期望它会渲染 1 个四边形

你怎么能期待呢？您的渲染调用*明确*表示要渲染 14 个顶点：

```
glDrawElements(GL_TRIANGLE_FAN, 14,GL_UNSIGNED_SHORT,indices); 
```

OpenGL 没有理由神奇地知道您这次只指四个。

# git - git clone 不替换文件树

> ID：14444007
> 
> 赞同：1
> 
> 时间：2013-01-21T17:25:35.880
> 
> 标签：git, github

我有一个只向 github 发送两个子目录的 gitignore。

我的 gitignore

```
/*
!/conf
/conf/*
!/conf/jingle_profiles
!/conf/dialplan 
```

这会将两个子目录（dialplan、jingle_profiles）上传到 github。

我想将这些子目录克隆到根文件树（/usr/local/freeswitch）中，并让它们保持这两个子目录同步而不删除其他所有内容。

编辑：

我得到的错误：

```
sudo git clone https://github.com/dgmcguire/freeswitch.git 
```

是

```
fatal: destination path 'freeswitch' already exists and is not an empty directory. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:35:26.907

`git clone`需要一个空目录，但随后的拉取不会对忽略的文件做任何事情。

因此，只需在内部创建一个空子目录，然后在该子目录`/usr/local/freeswitch`中执行您的操作`git clone`，然后将该子目录的内容移动到`/usr/local/freeswitch`.

应该是这样的：

```
mkdir /usr/local/freeswitch/git_tmp
cd /usr/local/freeswitch/git_tmp
git clone https://github.com/dgmcguire/freeswitch.git
mv /usr/local/freeswitch/git_tmp/* /usr/local/freeswitch/
rm -r -d /usr/local/freeswitch/git_tmp 
```

我不是 linux 人，所以使用的命令可能存在一些错误——但是意图应该很清楚。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T17:30:44.750

`.gitignore`不是特别相关的github或上传的东西。它控制 git 在检查未跟踪文件时考虑哪些文件。

我建议您更多地了解 git 的工作原理。ProGit 是一个非常非常好的资源——[这里是](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository)讨论 .gitignore 的地方，但你真的应该阅读前几章。

# python - 快速字典查找

> ID：14444012
> 
> 赞同：1
> 
> 时间：2013-01-21T17:26:08.027
> 
> 标签：python, performance

我正在编写一些`python`代码，我必须检查 in 中的所有值`list2`是否存在`list1`，我通过使用来做到这一点，`set(list2).difference(list1)`但是该函数对于列表中的许多项目来说太慢了。

所以我在想这`list1`可能是一个快速查找的字典......

所以我想找到一种快速的方法来阻止列表是否包含不属于 dict 的项目

性能方面有什么区别

```
d = {1: 1, 2:2, 3:3}
l = [3, 4, 5]

for n in l:
  if not n in d:
    do_stuff 
```

对比

```
for n in l:
  if not d[n]:
    do_stuff 
```

如果这两个都是垃圾并且你知道的更快，请告诉我。

Edit1: list1 或 d 可以包含不在 list2 中的元素，但反之则不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:29:23.563

实现您想要的东西的快速方法将是使用`all`和生成器理解。

```
s_list2 = set(list2)
all_present = all(l in s_list2 for l in list1) 
```

如果 list1 的某些元素不存在于 list2 中，这将是有利的。

一些时机。如果第一个列表中的所有值都包含在第二个列表中：

```
In [4]: l1 = range(100)
In [5]: l2 = range(1000)
In [6]: random.shuffle(l1)
In [9]: random.shuffle(l2)
In [20]: %timeit s2 = set(l2); all(l in s2 for l in l1)
10000 loops, best of 3: 26.4 us per loop
In [21]: %timeit s1 = set(l1); s2 = set(l2); s1.issubset(s2)
10000 loops, best of 3: 25.3 us per loop 
```

如果我们查看第一个列表中的某些值在第二个列表中**不**存在的情况：

```
In [2]: l1 = range(1000)
In [3]: l2 = range(100)
In [4]: random.shuffle(l1)
In [5]: random.shuffle(l2)
In [6]: sl2 = set(l2)
In [8]: %timeit ss = set(l2); set(l1) & ss == ss
10000 loops, best of 3: 27.8 us per loop
In [10]: %timeit s1 = set(l1); s2 = set(l2); s2.issubset(s1)
10000 loops, best of 3: 24.7 us per loop
In [11]: %timeit sl2 = set(l2); all(l in sl2 for l in l1)
100000 loops, best of 3: 3.58 us per loop 
```

您可以看到，这种方法在性能上与`issubset`第一种情况相当，而在第二种情况下更快，因为它会短路并且无需构建 2 个中间集（只需要一个）。

一个大列表和一个小列表展示了 gencomp 方法的好处：

```
In [7]: l1 = range(10)
In [8]: l2 = range(10000)
In [9]: %timeit sl2 = set(l2); all(l in sl2 for l in l1)
1000 loops, best of 3: 230 us per loop
In [10]: %timeit sl1 = set(l1); all(l in sl1 for l in l2)
1000000 loops, best of 3: 1.45 us per loop
In [11]: %timeit s1 = set(l1); s2 = set(l2); s1.issubset(s2)
1000 loops, best of 3: 228 us per loop
In [12]: %timeit s1 = set(l1); s2 = set(l2); s2.issubset(s1)
1000 loops, best of 3: 228 us per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:29:39.423

您可以将列表转换为集合，然后使用该方法`issubset()`检查一个是否是另一个集合的子集。

```
In [78]: import random

In [79]: lis2=range(100)

In [80]: random.shuffle(lis2)

In [81]: lis1=range(1000)

In [82]: random.shuffle(lis1)

In [83]: s1=set(lis1)

In [84]: all(l in s1 for l in lis2)
Out[84]: True

In [85]: %timeit all(l in s1 for l in lis2)
10000 loops, best of 3: 28.6 us per loop

In [86]: %timeit s2=set(lis2);s2.issubset(s1)
100000 loops, best of 3: 12 us per loop

In [87]: s2.issubset(s1)
Out[87]: True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T21:31:02.967

对两个列表进行排序然后一起遍历它们是 O(n log n)。IE：

```
l1.sort()
l2.sort()

j = 0
for i in range(0,len(l1)):
  while ((j < len(l2)) and (l1[i] == l2[j])):
    j = j+1
  if (j == len(l2)):
    break
  if (l1[i] > l2[j]):
    break

if (j == len(l2)): # all of l2 in l1 
```

现在就时间复杂度而言，就像我说的那样，这是 O(n log n) 因为排序（第二个循环小于 O(n) 处的那个）。然而，它在 python 中可能不会比内置的集合操作更快。你必须尝试一下。

[顺便说一句，如果我考虑一下，可能是一种更pythony的方式来完成最后一段理解]

# python - Python Celery - pid 的查找任务

> ID：14444015
> 
> 赞同：2
> 
> 时间：2013-01-21T17:26:12.243
> 
> 标签：python, celery, amqp

`celery.task.control.inspect()`一个非常简单的问题，也许 - 我经常看到我的系统上运行的 celery 任务进程，当我使用's`active()`方法时我找不到。通常这个过程会运行几个小时，我担心它是某种僵尸。通常它也会占用大量内存。

有没有办法通过 linux pid 查找任务？celery 或 AMPQ 结果后端会保存它吗？

如果不是，还有其他方法可以确定哪个特定任务正在消耗内存？

- - 更新：

当`active()`告诉我在特定盒子上没有运行任何任务，但盒子的内存已被充分使用时，我该怎么办，并且 htop 显示这些工作池线程正在使用它，但同时使用 0%中央处理器？如果事实证明这与我当前机架空间设置的一些怪癖有关并且没有人可以回答，我仍然会接受 Loren 的。

谢谢~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:48:09.533

我将假设“任务”是指“工人”。否则这个问题将毫无意义。

在某些情况下，了解 Celery 工作池的进程层次结构很重要。工作池是一组共享相同配置（处理同一组队列的消息等）的工作进程（或线程）。每个池都有一个管理该池的父进程。这个过程控制有多少童工被分叉，并负责在儿童死亡时分叉替代儿童。父进程是唯一绑定到 AMQP 的进程，子进程通过 IPC 从父进程摄取和处理任务。父进程本身实际上并不处理（运行）任何任务。

此外，为了回答您的问题，父进程是负责响应您的 Celery 检查广播的进程，并且在池中列为工作人员的 PID 只是子工作人员。不包括父 PID。

如果您使用 --pidfile 命令行参数启动 Celery 守护程序，该文件将包含父进程的 PID，您应该能够将该 PID 与您所指的进程交叉引用以确定它是否实际上是一个池父进程。如果您使用 Celery multi 启动多个实例（多个工作池），那么默认情况下 PID 文件应位于您调用 Celery multi 的目录中。如果您没有使用这些方法中的任何一种来启动 Celery，请尝试使用其中一种方法来验证该进程不是僵尸进程，而实际上只是父进程。

# char - 使用 chars/varchar 的 Firebird 查询

> ID：14444017
> 
> 赞同：0
> 
> 时间：2013-01-21T17:26:20.067
> 
> 标签：char, firebird, varchar

我正在为 firebird 使用 SQLManager Lite，到目前为止，还不可能编写一个对 char/varchar 列进行操作的查询。字符集是win1252。

像这样的查询

```
select * from Person where name = 'John' 
```

尽管记录存在于数据库中，但不会返回任何结果。对数值列的类似查询工作得很好。我在这里有什么遗漏吗？

此外，此查询在我的应用程序中运行良好。唯一的问题是我也希望能够在 SQLManager Lite 中运行它。附带说明一下，char 和 varchar 列的值不会在同一个 SQLManager Lite 中正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:40:28.747

改成喜欢

```
select * from Person where name like 'John' 
```

# asp.net-mvc-3 - MVC 4 日期（自定义格式）验证

> ID：14444019
> 
> 赞同：1
> 
> 时间：2013-01-21T17:26:28.000
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

在我的应用程序中，要求像这样输入日期：d-MMM-yyyy 我可以像这样渲染它：

@模型 ：
`[DataMember] public DateTime SomeDateField { get; set; }`

@看法 ：
`@Html.EditorFor(model => model.SomeDateField)`
`@Html.ValidationMessageFor(model => model.SomeDateField)`

编辑器模板：DateTime.cshtml
`@model DateTime`
`@Html.TextBox("", (Model.Equals(DateTime.MinValue) ? string.Empty : Model.ToString("d-MMM-yyyy")), new { @class = "date" })`

Shared._Layout.cshtml
`$(".date").datepicker({ dateFormat: 'd-MMM-yyyy' });`

我不知道为什么，但是 IE9 和 FireFox 上的客户端验证出了点问题。离开字段时（即使它有效），输入字段周围会绘制一个红色框，但不显示验证消息。我不确定问题出在哪里，但我很确定我不是第一个遇到它的人。我搜索了stackoverflow，但没有找到解决方案（还）。

任何帮助是极大的赞赏。于仁。

# apache - 使用 .htpasswd 进行 http 摘要身份验证

> ID：14444033
> 
> 赞同：1
> 
> 时间：2013-01-21T17:27:23.817
> 
> 标签：apache, http-authentication

我正在使用 Windows，现在我使用以下 .htaccess 文件进行 Http Basic 身份验证：

```
AuthName "Restricted Area" 
AuthType Basic
AuthUserFile D:\\some\\windows\\path/.htpasswd 
require valid-user 
```

并遵循用户“test”的 .htpasswd 文件，密码为“test”（使用[http://www.htaccesstools.com/htpasswd-generator-windows/](http://www.htaccesstools.com/htpasswd-generator-windows/)创建）：

```
test:$apr1$EUhLJ8Ye$LpBIbzDcBXY.80pH53oN2/ 
```

这行得通，我可以输入正确的用户名和密码并获得访问权限。

但由于我没有使用 SSL，我想使用 Digest 身份验证（以避免将纯文本密码发送到服务器）。我将线路`AuthType Basic`改为`AuthType Digest`但它不再工作 - 即使我输入正确的用户并通过我也无法获得访问权限。

可能我应该使用不同的算法在 .htpasswd 中加密/散列密码，但我找不到它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:41:10.323

如果要使用摘要式身份验证，则必须创建新的密码文件。用于摘要身份验证的格式与用于基本身份验证的格式略有不同。通常，apache 附带了执行此操作的工具。

注意命令行程序“htpasswd.exe”和“htdigest.exe”。您需要使用第二个来生成摘要身份验证的密码文件。像这样使用它：

> c:\path\to\htdigest.exe -cc:\some\windows\path.htpasswd_digest 领域用户名

第一次发出命令时只需要“-c”，如果只将新用户添加到现有文件，就像：

> c:\path\to\htdigest.exe c:\some\windows\path.htpasswd_digest realm another_username

“领域”应该与您在 Apache 配置中为 AuthName 使用的值相同。

哦，显然，不要忘记在你的 apache 配置中更新 AuthUserFile ......

# linux - 期望 ping 脚本跳过发送步骤

> ID：14444035
> 
> 赞同：1
> 
> 时间：2013-01-21T17:27:28.967
> 
> 标签：linux, bash, tcl, expect

我正在尝试使用期望登录到远程交换机后 ping 4 个不同的 IP 地址，登录部分工作正常，前 2 个 ping 命令（发送）；但它会跳过第 3 次 ping 命令并进行第 4 次 ping。大多数情况下，在显示 ping 摘要之前，它会退出脚本。

我的脚本：

```
 #!/usr/bin/expect
 spawn telnet 192.168.xx.xx
 expect "Username:" 
 send "username\r"
 expect "Password:"
 send "password\r"
 expect ">"
 send "ping -c 20 192.168.1.10\r"
 expect ">"
 send "ping -c 20 192.168.10.22\r"
 expect ">"
 send "ping -c 20 192.168.10.33\r"
 expect ">"
 send "ping -c 20 192.168.11.10\r"
 expect ">"
 send "quit\r" # command to exit from switch 
 expect eof 
```

我尝试在每个发送命令之前添加“sleep 4”，但结果是一样的。

输出：

```
<switch>ping -c 20 192.168.1.20
  PING 192.168.1.20: 56  data bytes, press CTRL_C to break
    Reply from 192.168.1.20: bytes=56 Sequence=1 ttl=255 time=1 ms
    Reply from 192.168.1.20: bytes=56 Sequence=2 ttl=255 time=1 ms
    Reply from 192.168.1.20: bytes=56 Sequence=3 ttl=255 time=101 ms
    Reply from 192.168.1.20: bytes=56 Sequence=4 ttl=255 time=2 ms
    Reply from 192.168.1.20: bytes=56 Sequence=5 ttl=255 time=2 ms
    Reply from 192.168.1.20: bytes=56 Sequence=6 ttl=255 time=2 ms
    Reply from 192.168.1.20: bytes=56 Sequence=7 ttl=255 time=102 ms
    Reply from 192.168.1.20: bytes=56 Sequence=8 ttl=255 time=2 ms
    Reply from 192.168.1.20: bytes=56 Sequence=9 ttl=255 time=3 ms
    Reply from 192.168.1.20: bytes=56 Sequence=10 ttl=255 time=1 ms
    Reply from 192.168.1.20: bytes=56 Sequence=11 ttl=255 time=108 ms
    Reply from 192.168.1.20: bytes=56 Sequence=12 ttl=255 time=1 ms
    Reply from 192.168.1.20: bytes=56 Sequence=13 ttl=255 time=1 ms
    Reply from 192.168.1.20: bytes=56 Sequence=14 ttl=255 time=2 ms
    Reply from 192.168.1.20: bytes=56 Sequence=15 ttl=255 time=130 ms
    Reply from 192.168.1.20: bytes=56 Sequence=16 ttl=255 time=1 ms
    Reply from 192.168.1.20: bytes=56 Sequence=17 ttl=255 time=2 ms
    Reply from 192.168.1.20: bytes=56 Sequence=18 ttl=255 time=1 ms
    Reply from 192.168.1.20: bytes=56 Sequence=19 ttl=255 time=160 ms
    Reply from 192.168.1.20: bytes=56 Sequence=20 ttl=255 time=1 ms

  --- 192.168.1.20 ping statistics ---
    20 packet(s) transmitted
    20 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 1/31/160 ms

<switch>ping -c 20 192.168.10.22
  PING 192.168.10.22: 56  data bytes, press CTRL_C to break
    Reply from 192.168.10.22: bytes=56 Sequence=1 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=2 ttl=255 time=12 ms
    Reply from 192.168.10.22: bytes=56 Sequence=3 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=4 ttl=255 time=35 ms
    Reply from 192.168.10.22: bytes=56 Sequence=5 ttl=255 time=2 ms
    Reply from 192.168.10.22: bytes=56 Sequence=6 ttl=255 time=16 ms
    Reply from 192.168.10.22: bytes=56 Sequence=7 ttl=255 time=2 ms
    Reply from 192.168.10.22: bytes=56 Sequence=8 ttl=255 time=29 ms
    Reply from 192.168.10.22: bytes=56 Sequence=9 ttl=255 time=4 ms
    Reply from 192.168.10.22: bytes=56 Sequence=10 ttl=255 time=39 ms
    Reply from 192.168.10.22: bytes=56 Sequence=11 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=12 ttl=255 time=57 ms
    Reply from 192.168.10.22: bytes=56 Sequence=13 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=14 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=15 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=16 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=17 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=18 ttl=255 time=2 ms
    Reply from 192.168.10.22: bytes=56 Sequence=19 ttl=255 time=1 ms
    Reply from 192.168.10.22: bytes=56 Sequence=20 ttl=255 time=2 ms

  --- 192.168.10.22 ping statistics ---
    20 packet(s) transmitted
    20 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 1/10/57 ms

<switch>ping -c 20 192.168.11.10
  PING 192.168.11.10: 56  data bytes, press CTRL_C to break
    Reply from 192.168.11.10: bytes=56 Sequence=1 ttl=255 time=4 ms
    Reply from 192.168.11.10: bytes=56 Sequence=2 ttl=255 time=1 ms
    Reply from 192.168.11.10: bytes=56 Sequence=3 ttl=255 time=44 ms
    Reply from 192.168.11.10: bytes=56 Sequence=4 ttl=255 time=1 ms
    Reply from 192.168.11.10: bytes=56 Sequence=5 ttl=255 time=57 ms
    Reply from 192.168.11.10: bytes=56 Sequence=6 ttl=255 time=3 ms
    Reply from 192.168.11.10: bytes=56 Sequence=7 ttl=255 time=4 ms
    Reply from 192.168.11.10: bytes=56 Sequence=8 ttl=255 time=4 ms
    Reply from 192.168.11.10: bytes=56 Sequence=9 ttl=255 time=3 ms
    Reply from 192.168.11.10: bytes=56 Sequence=10 ttl=255 time=3 ms
    Reply from 192.168.11.10: bytes=56 Sequence=11 ttl=255 time=3 ms
    Reply from 192.168.11.10: bytes=56 Sequence=12 ttl=255 time=2 ms
    Reply from 192.168.11.10: bytes=56 Sequence=13 ttl=255 time=2 ms
    Reply from 192.168.11.10: bytes=56 Sequence=14 ttl=255 time=1 ms
    Reply from 192.168.11.10: bytes=56 Sequence=15 ttl=255 time=1 ms
    Reply from 192.168.11.10: bytes=56 Sequence=16 ttl=255 time=1 ms
    Reply from 192.168.11.10: bytes=56 Sequence=17 ttl=255 time=1 ms
    Reply from 192.168.11.10: bytes=56 Sequence=18 ttl=255 time=1 ms
    Reply from 192.168.11.10: bytes=56 Sequence=19 ttl=255 time=1 ms
    Reply from 192.168.11.10: bytes=56 Sequence=20 ttl=255 time=1 ms
    [rousseau@localhost script]$ 
```

如您所见，它跳过了第 3 次 ping（检查了几次）并在第 4 次 ping 之前退出。任何人都可以帮忙解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:38:32.553

您可能会遇到超时问题。Expect 的默认超时为 10 秒。20 次 ping 将花费更多时间。

在脚本开头使用以下命令：

`set timeout 60`

将其设置为 1 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:40:44.963

我想知道是不是超时了。你可以尝试类似的东西

```
send "password\r"
expect ">"
foreach ip {192.168.1.10 192.168.10.22 192.168.10.33 192.168.11.10} {
    send "ping -c 20 $ip\r"
    expect {
        timeout {puts "Timed out waiting for response from $ip"}
        ">"
    }
}
send "quit\r" 
```

如果发现超时，您可以尝试设置该`timeout`值，例如`set timeout 20`.

此外，我发现这个命令对于开发期望脚本非常有用：`exp_internal 1`-- 将它添加到脚本的顶部。

# c# - 来自用户控件的参考样式表/脚本

> ID：14444036
> 
> 赞同：0
> 
> 时间：2013-01-21T17:27:30.160
> 
> 标签：c#, asp.net, user-controls

我知道有人问过这个问题，但我有一个比其他相关问题更复杂的问题。

我需要从我的用户控件中引用 CSS 和 JS。

引用必须在`<head>`标签内呈现。出于这个原因，我不能使用`ScriptManager.RegisterClientScriptBlock`

我发现的其他解决方案：

```
 HtmlLink link = new HtmlLink();
    link.Href = "/path/style.css";
    link.Attributes["type"] = "text/css";
    link.Attributes["rel"] = "stylesheet";
    Page.Header.Controls.Add(link); 
```

但是，这最终会导致***“无法修改控件集合，因为控件包含代码块”*** 问题是这些代码块位于我无法控制的母版页文件中。因此，[此线程](https://stackoverflow.com/questions/778952/the-controls-collection-cannot-be-modified-because-the-control-contains-code-bl)中建议的解决方法是不可能的。（例如：包装代码块`<asp:placeholder ID="Placeholder1" runat="server">`或替换`<%=`为`<%#`

因此，考虑到上述限制，是否可以从用户控件中放置`<link href='path' />`和`<script src='path' />`内部`<head>`标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:41:08.587

您可以在头部添加一个 LiteralControl。

```
Page.Header.Controls.Add(new LiteralControl("<script src'...'></script")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T07:39:08.950

对我有用的解决方案：

嵌套母版页，并将占位符添加到嵌套母版页，然后按照 jon 的建议添加文字控件：

```
stylePlaceholder = ((PlaceHolder)((ContentPlaceHolder)Page.Master.Master.FindControl("HeadSection")).FindControl("phd_ControlsStyles"));

stylePlaceholder.Controls.Add(new LiteralControl(css + " href=\"http://" + cdn + "/Utils/Bundle/" + getCss() + ".css?v=" + settings["subVersion"] + "\" />")); 
```

# php - PHP MySQL 创建表

> ID：14444039
> 
> 赞同：1
> 
> 时间：2013-01-21T17:27:51.133
> 
> 标签：php, mysql, pdo, create-table

我正在尝试使用 PHP、PDO 和 MySQL 创建一个表。对于我的应用程序的需要，表的名称必须是一个变量。

这是我的代码：

```
$request = $pdo->prepare("CREATE TABLE IF NOT EXISTS :table (
      `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
      `parent_id` bigint(20) unsigned NOT NULL,
      `position` bigint(20) unsigned NOT NULL,
      `left` bigint(20) unsigned NOT NULL,
      `right` bigint(20) unsigned NOT NULL,
      `level` bigint(20) unsigned NOT NULL,
      `title` text CHARACTER SET utf8 COLLATE utf8_unicode_ci,
      `type` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
      `content` text CHARACTER SET utf8 COLLATE utf8_unicode_ci,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;");
$request->execute(array(
    'table'=>$uuid)); 
```

我不能在 MySQL 语句中使用 ":table" 吗？目前我写道：

```
[...]
CREATE TABLE IF NOT EXISTS `$uuid`
[...] 
```

这可行，但对我来说听起来很奇怪^^'这是解决我问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:34:14.080

您不能将表名作为参数传递。如果要创建具有变量名的表，则必须使用动态查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:14:08.023

```
$pdo->query("CREATE TABLE IF NOT EXISTS userfiles (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `parent_id` bigint(20) unsigned NOT NULL,
  `position` bigint(20) unsigned NOT NULL,
  `left` bigint(20) unsigned NOT NULL,
  `right` bigint(20) unsigned NOT NULL,
  `level` bigint(20) unsigned NOT NULL,
  `title` text CHARACTER SET utf8 COLLATE utf8_unicode_ci,
  `type` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
  `content` text CHARACTER SET utf8 COLLATE utf8_unicode_ci,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8"); 
```

这是处理此类情况的唯一正确方法。
这样的事情是非常基本的事情。
而您当前的设置就像一辆带有方形轮子的汽车。
尽管您的时间不足，但您必须将其设为单桌。
否则，您将浪费更多时间，最终无论如何都会转向正确的设计，但经过无数次的痛苦

# ios - NSOperationqueue 背景，下载图片

> ID：14444041
> 
> 赞同：7
> 
> 时间：2013-01-21T17:27:56.027
> 
> 标签：ios, cocoa-touch, asynchronous, grand-central-dispatch, nsoperationqueue

我创建了一个`NSOperationQueue`下载图片（来自 Twitter for Cell）：

```
NSOperationQueue *queue = [[NSOperationQueue alloc]init];
   [queue addOperationWithBlock:^{
    NSString *ImagesUrl = [[NSString alloc]initWithFormat:@"http://api.twitter.com/1/users/profile_image/%@",[[status objectForKey:@"user"]objectForKey:@"screen_name"]];;
        NSURL *imageurl = [NSURL URLWithString:ImagesUrl];
        UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:imageurl]];
        [[NSOperationQueue mainQueue]addOperationWithBlock:^{
            if (img.size.width == 0 || [ImagesUrl isEqualToString:@"&lt;null&gt;"]) {
                [statusCell.imageCellTL setFrame:CGRectZero];
                statusCell.imageCellTL.image = [UIImage imageNamed:@"Placeholder"] ;
            }else

            [statusCell.imageCellTL setImage:img]; 
```

这工作正常，但是当它似乎移动滚动并查看图像时仍在加载，并且它们会更改几次，直到您获得图片。

而且我不喜欢时间的诊断配置文件，所以我想以某种方式`NSOperationQueue`在后台进行此操作

还可以展示如何使“Imagecache”无需下载已下载的图像。

**（状态 = Twitter 时间线的 NSDictionary）。

编辑::(所有单元格)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Celulatime";
    UITableViewCell *Cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if ( [Cell isKindOfClass:[TimeLineCell class]] ) {
        TimeLineCell *statusCell = (TimeLineCell *) Cell;
        status = [self.dataSource objectAtIndex:indexPath.row];

        statusCell.TextCellTL.text = [status objectForKey:@"text"];
        statusCell.NomeCellTL.text = [status valueForKeyPath:@"user.name"];
        statusCell.UserCellTL.text = [NSString stringWithFormat:@"@%@", [status valueForKeyPath:@"user.screen_name"]];

        NSDate *created_at = [status valueForKey:@"created_at"];
        if ( [created_at isKindOfClass:[NSDate class] ] ) {
            NSTimeInterval timeInterval = [created_at timeIntervalSinceNow];
            statusCell.timeCellTL.text = [self timeIntervalStringOf:timeInterval];
        } else if ( [created_at isKindOfClass:[NSString class]] ) {
            NSDate *date = [self.twitterDateFormatter dateFromString: (NSString *) created_at];
            NSTimeInterval timeInterval = [date timeIntervalSinceNow];
            statusCell.timeCellTL.text = [self timeIntervalStringOf:timeInterval];
        }

        NSString *imageUrlString = [[NSString alloc]initWithFormat:@"http://api.twitter.com/1/users/profile_image/%@",[[status objectForKey:@"user"]objectForKey:@"screen_name"]];;
        UIImage *imageFromCache = [self.imageCache objectForKey:imageUrlString];

        if (imageFromCache) {
            statusCell.imageCellTL.image = imageFromCache;
            [statusCell.imageCellTL setFrame:CGRectMake(9, 6, 40, 40)]; 
        }
        else
        {
            statusCell.imageCellTL.image = [UIImage imageNamed:@"TweHitLogo57"];
            [statusCell.imageCellTL setFrame:CGRectZero]; 

            [self.imageluckluck addOperationWithBlock:^{
                NSURL *imageurl = [NSURL URLWithString:imageUrlString];
                UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:imageurl]];

                if (img != nil) {

                    [self.imageCache setObject:img forKey:imageUrlString];

                    // now update UI in main queue
                    [[NSOperationQueue mainQueue] addOperationWithBlock:^{

                        TimeLineCell *updateCell = (TimeLineCell *)[tableView cellForRowAtIndexPath:indexPath];

                        if (updateCell) {
                            [updateCell.imageCellTL setFrame:CGRectMake(9, 6, 40, 40)]; 
                            [updateCell.imageCellTL setImage:img];
                        }
                    }];
                }
            }];
        }

        }
    return Cell;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T18:02:25.463

几点观察：

1.  您可能应该`NSOperationQueue`在您的类中定义 a 并将其初始化`viewDidLoad`（以及 a `NSCache`）并将操作添加到该队列，而不是`NSOperationQueue`为每个图像创建一个新的。此外，许多服务器限制了它们将支持来自每个客户端的并发请求的数量，因此请确保进行`maxConcurrentOperationCount`相应设置。

    ```
    @interface ViewController ()
    @property (nonatomic, strong) NSOperationQueue *imageOperationQueue;
    @property (nonatomic, strong) NSCache *imageCache;
    @end

    @implementation ViewController

    - (void)viewDidLoad
    {
         [super viewDidLoad];

        self.imageOperationQueue = [[NSOperationQueue alloc]init];
        self.imageOperationQueue.maxConcurrentOperationCount = 4;

        self.imageCache = [[NSCache alloc] init];
    }

    // the rest of your implementation

    @end 
    ```

2.  您`tableView:cellForRowAtIndexPath:`应该（a）`image`在开始异步图像加载之前初始化（这样您就不会从那里看到重用单元格中的旧图像）；(b) 在更新之前确保单元格仍然可见：

    ```
    NSString *imageUrlString = [[NSString alloc]initWithFormat:@"http://api.twitter.com/1/users/profile_image/%@",[[status objectForKey:@"user"]objectForKey:@"screen_name"]];;
    UIImage *imageFromCache = [self.imageCache objectForKey:imageUrlString];

    if (imageFromCache) {
        statusCell.imageCellTL.image = imageFromCache;
        [statusCell.imageCellTL setFrame: ...]; // set your frame accordingly
    }
    else
    {
        statusCell.imageCellTL.image = [UIImage imageNamed:@"Placeholder"];
        [statusCell.imageCellTL setFrame:CGRectZero]; // not sure if you need this line, but you had it in your original code snippet, so I include it here

        [self.imageOperationQueue addOperationWithBlock:^{
            NSURL *imageurl = [NSURL URLWithString:imageUrlString];
            UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:imageurl]];

            if (img != nil) {

                // update cache
                [self.imageCache setObject:img forKey:imageUrlString];

                // now update UI in main queue
                [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                    // see if the cell is still visible ... it's possible the user has scrolled the cell so it's no longer visible, but the cell has been reused for another indexPath
                    TimeLineCell *updateCell = (TimeLineCell *)[tableView cellForRowAtIndexPath:indexPath];

                    // if so, update the image
                    if (updateCell) {
                        [updateCell.imageCellTL setFrame:...]; // I don't know what you want to set this to, but make sure to set it appropriately for your cell; usually I don't mess with the frame.
                        [updateCell.imageCellTL setImage:img];
                    }
                }];
            }
        }];
    } 
    ```

3.  不需要特殊处理，`UIApplicationDidReceiveMemoryWarningNotification`因为虽然`NSCache`不响应此内存警告，但它会在内存变低时自动驱逐其对象。

我没有测试过上面的代码，但希望你能明白。这是典型的模式。您的原始代码对 进行了检查`[ImagesUrl isEqualToString:@"&lt;null&gt;"]`，我看不出这种情况，但如果您需要一些额外的逻辑，除了 my `if (img != nil) ...`，然后相应地调整该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T06:08:39.810

Ray Wenderlich 的一个很好的例子：[http ://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

它还具有*取消*功能以在用户按下取消按钮的情况下取消操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-26T11:09:14.973

> 使用swift 3在tableview中下载异步图像

```
class ViewController: UIViewController {
    var queue = OperationQueue()

    let imageURLs = ["https://amazingslider.com/wp-content/uploads/2012/12/dandelion.jpg", "https://media.treehugger.com/assets/images/2011/10/tiger-running-snow.jpg.600x315_q90_crop-smart.jpg", "https://www.w3schools.com/css/trolltunga.jpg", "https://www.w3schools.com/w3css/img_lights.jpg", "https://cdn.pixabay.com/photo/2015/04/28/20/55/aurora-borealis-744351_960_720.jpg", "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2L0pETnybA5sld783iz1mgtOFS8vxBTjB4tYXeRtQWDxig3dc"]

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
    }

}

extension ViewController: UITableViewDelegate, UITableViewDataSource {
    func numberOfSections(in tableView: UITableView) -> Int {
        return 1
    }
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return imageURLs.count
    }
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell: ImagesTableViewCell = tableView.dequeueReusableCell(withIdentifier: "cell", for: indexPath) as! ImagesTableViewCell
        var img: UIImage!
        let operation = BlockOperation(block: {
            img  = Downloader.downloadImageWithURl(self.imageURLs[indexPath.row])
        })

        operation.completionBlock = {
            DispatchQueue.main.async {
                cell.imgView?.image = img
            }

        }
        queue.addOperation(operation)

        return cell
    }
}

class Downloader {
    class func downloadImageWithURl(_ url: String) -> UIImage! {
        if let data = try? Data(contentsOf: URL(string: url)!) {
            return UIImage(data: data)!
        }
        return nil
    }

} 
```

# php - preg_replace：转换字符串日期格式

> ID：14444044
> 
> 赞同：1
> 
> 时间：2013-01-21T17:28:11.557
> 
> 标签：php, preg-replace, substring

我用 diff 获取了大数组，`strpos()`并且`substr()`：

```
$array[n] = ('Jan 23', 'From Jan 4 to Feb 1', 'Jul 5 to 10'); 
```

我希望有一个过程将其转换为：

```
$array[n] = ('2013-01-23','2013-01-04/2013-02-01','2013-07-05/2013-07-10); 
```

谢谢你的帮助。我打算用来`strpos()`将日期字符串放入数组中。之后，我计划分解日期数组，然后执行 a `foreach($date as $index => $value)`，如果我可以将它转换为字符串，那么它是一个日期，我可以使用两位数，月份与月份名称匹配。然后形成所需的字符串。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:34:09.000

为什么不使用[strtotime()](http://php.net/manual/en/function.strtotime.php)函数和[date_format()](http://php.net/manual/en/function.date-format.php)函数呢？使用正则表达式和字符串解析处理所有可能的格式可能非常困难。

```
date('Y-m-d', strtotime('your_string')); 
```

# iphone - Yelp API 显示数据

> ID：14444045
> 
> 赞同：0
> 
> 时间：2013-01-21T17:28:15.517
> 
> 标签：iphone, api, yelp

我一直在上下查找，似乎没有太多关于此的文档。我刚刚开始开发，除了 HTML 之外没有任何编程经验，这并不重要。

正如我在控制台中看到的那样，我能够通过 URL 查询成功提取数据。我的问题是，如果我想发送关于餐厅评论的查询，例如，我如何将数据从控制台获取到 iPhone 视图，就在屏幕上？如果有人能够提供一个简单的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:37:56.013

我会给你一般的步骤：

1) 解析 JSON（可能是一个字典数组），然后用一个内部循环迭代字典来遍历数组。你也可以使用 JSONKit。

2) 可选择在某处缓存数据（注意：如果您使用核心数据，有一个很好的 NSManagedObject 方法，基本上可以直接从 JSON 创建一个 NSManagedObject）。

3) 使用 UIKit 显示它（即表格视图，其中每个单元格显示您正在检索的文本和图像）。

如果您在这些步骤中需要任何具体帮助，请随时发布新问题——分解并一次解决一个问题。

另外，如果你使用 Core Data 来持久化这个 JSON 数据，你可以使用 NSFetchedResultsController 作为你的表视图的数据源，这也简化了一些。

我知道您可能希望我为您编写代码，但是您提出了一个非常模棱两可的问题，其范围实在是太宽泛了。如果您遵循这些步骤并有具体问题，我们将帮助您随时解决问题。

# c# - 将后/前增量运算符限制在值而不是变量、属性和索引器上

> ID：14444049
> 
> 赞同：0
> 
> 时间：2013-01-21T17:28:24.767
> 
> 标签：c#

从[这篇](https://stackoverflow.com/questions/14404128/simultaneous-pre-increment-and-post-increment-or-mixing-pre-post-increments/)文章（不仅如此）中，我们了解到 ++ 运算符不能应用于返回值的表达式。很明显 5++ 写成 5 + 1 更好。我只想总结一下关于增量/减量运算符的整个事情。因此，让我们看一下这些代码片段，这些代码片段至少对第一次坚持使用 ++ 的人可能会有所帮助。

```
// Literal
int x = 0++; // Error

// Constant
const int Y = 1;
double f = Y++; // error. makes sense, constants are not variables actually.

int z = AddFoo()++; // Error 
```

总结：++ 适用于变量、属性（通过合成糖）和索引器（相同）。
现在感兴趣的部分 - 任何文字表达式都在 CSC 中进行了优化，因此当我们编写时，说

```
int g = 5 + 1; // This is compiled to 6 in IL as one could expect.
IL_0001: ldc.i4.6 // Pushes the integer value of 6 onto the evaluation stack as an int32. 
```

对于 5++ 并不意味着 5 变为 6，它可能是 5 + 1 的简写，例如 x++ = x + 1 这种限制背后的真正原因是什么？

```
int p = Foo()++ //? yes you increase the return value of Foo() with 1, what's wrong with that? 
```

可能导致逻辑问题的代码示例值得赞赏。

现实生活中的一个例子可能是，执行比数组中的多一个动作。

```
for (int i = 0; i < GetCount()++; i++) { } 
```

也许缺乏使用选择编译器团队来避免类似的功能？我不坚持这是我们缺乏的功能，只是想了解编译器编写者的阴暗面，尽管我不是。但我知道[c++ 在方法中返回引用时允许这样做](https://stackoverflow.com/questions/9443083/apply-increment-operator-to-a-function)。我既不是一个 C++ 人（知识很差），只是想了解限制的真正要点。就像，仅仅是因为 c# 的人选择限制 ++ over value 表达式还是有确定的情况导致不可预测的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:36:36.837

为了使一个特性值得支持，它确实需要*有用*。您提供的代码在任何情况下都比替代方案*可读性*差，后者只是使用普通的二进制加法运算符。例如：

```
for (int i = 0; i < GetCount() + 1; i++) { } 
```

我完全赞成语言团队阻止你编写不可读的代码，而在你*可以*做到的任何情况下，都有一个更简单的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T21:05:20.803

那么在使用这些运算符之前，您应该尝试阅读他们如何做他们所做的事情。特别是，您应该了解后缀和前缀之间的区别，这有助于弄清楚什么是允许的，什么是不允许的。

++ 和 -- 运算符修改它们的操作数。这意味着操作数必须是可修改的。如果您可以为相关表达式分配一个值，那么它是可修改的，并且可能是一个变量（c#）。

看看这些运营商实际做了什么。后缀运算符应在您的代码行执行后递增。至于前缀运算符，他们甚至需要在调用方法之前访问该值。我阅读语法的方式是`++lvalue (or ++variable)`转换为**`memory operations:[read, write, read]`**或转换为`lvalue++` **`[read, read, write]`**尽管许多编译器可能会优化二次读取。

因此，查看`foo()++;`该值将在执行代码的中心被淘汰。这意味着编译器需要将值保存在更长期的地方，以便在代码行完成执行后对所述值执行操作。毫无疑问，这也是 C++ 也不支持这种语法的确切原因。

如果你要返回一个引用，编译器不会对后缀有任何问题。当然，在 C# 中，值类型（即 int、char、float 等）不能通过引用传递，因为它们是**值**类型。

# c++ - 从非托管 c++ 显式调用托管析构函数

> ID：14444050
> 
> 赞同：2
> 
> 时间：2013-01-21T17:28:29.610
> 
> 标签：c++, .net, interop, destruction

我有一个本机 C++ 项目，它通过包装类使用 .NET 图表实用程序。包装类的精简版是这样的；

```
class ChartWrapper
{
private:
    gcroot<ChartNamespace::ManagedChartClass^>* m_Chart;

public:
    ChartWrapper(): m_Chart(new gcroot<ChartNamespace::ManagedChartClass^>)
    {
        *m_Chart = gcnew ChartNamespace::ManagedChartClass;
    }

    ~ChartWrapper()
    {
        delete m_Chart;
    }

    // Methods to interact with the chart
} 
```

一个函数将负责通过包装器实例化、操作和删除图表；

```
void CreateChart()
{
    ChartWrapper* chart = new ChartWrapper();
    // Do stuff to the chart
    delete chart;
} 
```

在程序实例期间有可能创建数百个图表。我在完成后通过调用显式删除每个包装器`delete`，但托管对象`ManagedChartClass`仅在程序退出时被破坏。这会导致不需要的内存堆积，并且出现“内存不足”异常。

当包装器被破坏时，如何确保托管对象被破坏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:32:23.200

您可以使用[`auto_gcroot<T>`](http://msdn.microsoft.com/en-us/library/ms177051.aspx), 而不是`gcroot<T>`. 不同之处在于`auto_gcroot<T>`' 的[析构函数](http://msdn.microsoft.com/en-us/library/ms177051.aspx)“也破坏了拥有的对象”。

在托管世界中，这映射到调用`IDisposable.Dispose()`包装的托管类型，前提是它实现了`IDisposable`.

# visual-studio-2012 - 我可以在 Windows XP 上使用 Visual Studio 2010 远程调试器从 Visual Studio 2012 调试 .Net 4.0 应用程序吗？

> ID：14444055
> 
> 赞同：6
> 
> 时间：2013-01-21T17:28:46.383
> 
> 标签：visual-studio-2012, windows-xp, remote-debugging

我可以在 Windows XP 上使用 Visual Studio 2010 远程调试器从 Visual Studio 2012 调试 .Net 4.0 应用程序吗？

我正在尝试，这是我的 XP 机器的屏幕截图（我暂时禁用了本地防火墙）：

![经验值](../Images/9261c6c3e99cf4708297de4734822f36.png)

这是 Visual Studio 2012（远程机器框中的文本与 Visual Studio 远程调试器指示的服务器名称相同）：

![对比 2012](../Images/eb79f3ea32d1e32c71736c35cb522948.png)

当我尝试调试时，我收到此错误：

![错误](../Images/fb1b74e7f2d05e063a7a8fd46fbf2804.png)

如果我将计算机名称更改为其他任何名称，我会收到此错误：

![其他错误](../Images/db8458e5b93b6b0d3a202b82752b3aad.png)

是否能够从 Windows XP 上的 Visual Studio 2012 远程调试 .Net 4.0 应用程序是我的一厢情愿，还是应该这样做？

只是为了提供一些背景知识，我们有一些 .Net 4.0 代码在 Windows 7 上运行正常，但在 XP 下崩溃。我了解 .Net 4.5 编译器是 4.0 编译器的就地升级，如果您在 .Net 4.0 中存在已在 4.5 中修复的错误，您的 4.0 代码将可以正常编译，因为您使用的是最新版本，修复了编译器，但您可能会在实际的 .Net 4.0 机器上遇到运行时问题。我怀疑可能是这种情况，并希望对其进行测试。

而且我们必须使用Visual Studio 2012，我不制定规则！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T12:16:44.737

[MSDN 博客](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx)告诉我们（2012 年 10 月 8 日），不支持从 VS 2012 到 XP 的远程调试：

远程调试 Visual Studio 2012 的远程工具不支持在 XP 客户端上进行远程调试。当需要在 Windows XP 上进行调试时，建议[使用](http://msdn.microsoft.com/en-us/library/0bxe8ytt%28v=vs.100%29.aspx)旧版 Visual Studio（例如 Visual Studio 2010）的调试器进行本地或远程调试。这与 Visual Studio 2012 RTM 的 Windows Vista 体验一致，它是运行时目标，但不是远程调试目标。

# javascript - jquery工作但语法错误

> ID：14444056
> 
> 赞同：0
> 
> 时间：2013-01-21T17:28:45.890
> 
> 标签：javascript, jquery

```
$(function()
{
$(".error").hide();
$("#submit").click(function()
{
    //form validate
    var name= $("input#fullname").val();
        if (name == "")
        {
            $("label#name_error").show();
            $("input#fullname").focus();
            return false;
        }
    var email= $("input#email").val();
        if (email == "")
        {
            $("label#email_error").show();
            $("input#email").focus();
            return false;
        }
    var subject= $("input#subject").val();
        if (subject == "")
        {
            $("label#subject_error").show();
            $("input#subject").focus();
            return false;
        }
    var textarea= $("textarea#textarea").val();
        if (textarea == "")
        {
            $("label#textarea_error").show();
            $("textarea#textarea").focus();
            return false;
        }

    var dataString = 'fullname='+name+'&email='+email+'&subject='+subject+'&textarea='+textarea;
    //alert (dataString);return false;
    $.ajax({
        type: "POST",
        url: "form.php",
        data: dataString,
        success: function()
        {
            $("#form").html("<div id='message'></div>");
            $("#message").html("<h2 id='success'>Query Submitted!</h2>").append("<p>You will be contacted shortly...</p><p>Reload the page to submit another query.</p>").hide().fadeIn(1500)
        }
    })
    return false;
});
}); 
```

这只是一个小问题

我有这个网站，在过去的 2-3 个月里一直运行良好......但是今天当我不小心进入 chrome 控制台窗口的资源部分时，出现错误提示

> > “未捕获的引用错误：$ 未定义”

我在网上没有找到满意的答案……你的想法？

这是头部分...我没有在页面上的其他任何地方包含任何脚本

```
<head>

    <meta charset="utf-8">

    <link rel="stylesheet" href="cq.css" type="text/css">

    <script type="text/javascript" src="form.js"></script>

    <link rel="shortcut icon" href="images/favicon.ico" />

    <script src="jquery.js"></script>

    <script src="form.js"></script>

    <!--share-->

    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>

    <script type="text/javascript">stLight.options({publisher: "ur-c6d56dfc-f929-5bbf-a456-178fc403ae45"});</script>

    <!--share ends here-->

</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:42:58.763

你在引用 jQuery*之前调用你的脚本。*将您的 HTML 更改为：

```
<script src="jquery.js"></script>
<script type="text/javascript" src="form.js"></script> 
```

您还将导入相同的 JavaScript 文件 (form.js) 两次。

# c# - 是否有任何关于使用 C# 通过 STOMP 协议从 ActiveMQ 获取消息的文档

> ID：14444058
> 
> 赞同：0
> 
> 时间：2013-01-21T17:28:55.093
> 
> 标签：c#, activemq, stomp

我正在尝试使用 c# 使用 stomp 协议从 activeMQ 队列接收/发送消息。因为我对activemq和stomp不太了解。所以我正在寻找一些合适的文档或示例代码，我可以通过它们逐步学习。

```
 static void Main(string[] args)
    {
        Apache.NMS.Stomp.ConnectionFactory factory  = new Apache.NMS.Stomp.ConnectionFactory(new Uri("stomp:tcp://localhost:61613"));
        IConnection connection = factory.CreateConnection();
        ISession session = connection.CreateSession();
        IDestination destination = session.GetDestination("/queue/notification");
        IMessageConsumer consumer = session.CreateConsumer(destination);
        connection.Start();
        consumer.Listener += new MessageListener(OnMessage);
        Console.WriteLine("Consumer started, waiting for messages... (Press ENTER to stop.)");
        Console.ReadLine();
        connection.Close();
    }
    private static void OnMessage(IMessage message)
    { 
        try
        { 
            Console.WriteLine("Median-Server (.NET): Message received"); 
            ITextMessage msg = (ITextMessage)message; 
            message.Acknowledge();
            Console.WriteLine(msg.Text);
        } 
        catch (Exception ex)
        { 
            Console.WriteLine(ex.Message);
            Console.WriteLine("---");
            Console.WriteLine(ex.InnerException);
            Console.WriteLine("---"); 
            Console.WriteLine(ex.InnerException.Message);
        }
    }
} 
```

我已经尝试过了。是否是进行踩踏连接的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:36:42.607

有各种语言的 STOMP 客户端库，对于 .NET 有[Apache.NMS.Stomp](http://activemq.apache.org/nms/)库，它围绕 STOMP 语义放置了一个 JMS 类型外观。如果您想获得更多技术知识并了解 STOMP 协议的真正含义，那么[STOMP](http://stomp.github.com/stomp-specification-1.2.html)规范非常清晰易懂。当然，ActiveMQ 自己的站点也有一些关于[STOMP 支持](http://activemq.apache.org/stomp.html)的文档，您应该阅读这些文档。一些网络搜索也将很快为您提供一些关于使用 NMS.Stomp 库与 ActiveMQ 交互的不错的[博客文章。](http://www.gavincoates.com/c-activemq-stomp)

# javascript - 如何在使用参数“ev”和“ui”时使用我自己的函数与 start:stop:？

> ID：14444060
> 
> 赞同：0
> 
> 时间：2013-01-21T17:29:05.220
> 
> 标签：javascript, jquery, draggable, user-defined-functions

在我的可拖动文件中，代码`start:`变得`stop:`太大（50-100 行），我开始遇到可读性问题。

```
$(".dra").draggable({
    revert: "invalid",
    start: function(ev, ui){
        //...50-100 lines...
    },
    stop: function(ev, ui){
        //...50-100 lines...
    }
}); 
```

为了修复可读性，我想创建两个全局函数`startDrag()`，`stopDrag()`然后像`start: startDrag(ev, ui)`. 但我未能成功完成这项工作：

```
function startDrag(ev, ui){
    //...50-100 lines...
}

function stopDrag(ev, ui){
    //...50-100 lines...
}

function createDraggables(){
    $(".dra").draggable({
        revert: "invalid",
        start: startDrag(ev, ui),
        stop: stopDrag(ev, ui)
    });
} 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:33:45.880

尝试将其更改为：

```
function createDraggables(){
    $(".dra").draggable({
        revert: "invalid",
        start: startDrag,
        stop: stopDrag
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:35:00.567

由于函数作用域，可以这样写：

```
function createDraggables(){
    $(".dra").draggable({
        revert: "invalid",
        start: startDrag,
        stop: stopDrag
    });
} 
```

# android - Android - 从 Main-Method 调用时不显示 AlertDialog

> ID：14444064
> 
> 赞同：0
> 
> 时间：2013-01-21T17:29:12.693
> 
> 标签：android, show, android-alertdialog, main

我遇到了 AlertDialog 的问题。当我将它放在按钮的 onClick-Listener 中时，该代码运行良好，但当我将它放在主方法的末尾时它根本不起作用。

这是显示 AlertDialog 的方法：

```
void showMaths(){
    AlertDialog.Builder alert = new AlertDialog.Builder(LabyRiddle.this);

    alert.setTitle("Title");
    alert.setMessage("Message");

    // Set an EditText view to get user input 
    final EditText input = new EditText(LabyRiddle.this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
      }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
      }
    });

    alert.create();  // <== Doesn't make any difference whether its here or not
    alert.show();
} 
```

我只希望主方法运行并在它结束时出现警报......

但它没有出现，也没有崩溃甚至报错。

还是在主要方法完成后显示警报的另一种可能性？

感谢，并有一个愉快的一天！

奥利弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:30:34.220

我想你需要打电话

```
alert.create().show(); 
```

在调用之前，您必须使用方法`show();`从构建器创建对话框`create();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:33:37.067

您忘记拨打此电话了

```
 alert.create(); 
```

前

`alert.show();`

有关警报对话框的更多信息，请参阅此链接 [http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)

# visual-studio-2012 - 无法在 VS 2012 扩展中设置某些查找选项

> ID：14444075
> 
> 赞同：1
> 
> 时间：2013-01-21T17:29:47.300
> 
> 标签：visual-studio-2012, vspackage

我正在尝试在我的 VS2012 扩展中打开查找对话框，但我无法设置除查找文本之外的任何选项：

```
 var dte=(_DTE)Package.GetGlobalService(typeof(_DTE));
    dte.ExecuteCommand("Edit.Find");

    // this gets set:
    dte.Find.FindWhat="test";

    // but all others are ignored:
    dte.Find.Target=vsFindTarget.vsFindTargetSolution;
    dte.Find.MatchCase=false;
    dte.Find.MatchWholeWord=true; 
```

我错过了什么吗？我正在使用 VS 2012 更新 1。

* * *

感谢 Ameen，我现在正在尝试一种不同的方法，但是我找不到任何关于在发出命令时需要如何设置参数的文档：

```
 object a=false;
    object b=null;
    dte.Commands.Raise(
      VSConstants.GUID_VSStandardCommandSet97.ToString("B").ToUpper(),
      (int)VSConstants.VSStd97CmdID.FindMatchCase, ref a, ref b); 
```

这将始终给我一个 E_INVALIDARG。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:38:20.067

`DTE.Find`对象是有状态的。`Execute`当您调用它的方法时，它会将其状态刷新到查找对话框。换句话说，它不允许您在不执行搜索的情况下更改搜索选项。

搜索词的设置是另一回事。在幕后，有一个`cmdidSetSearchCombo`（从记忆中回忆）允许您只设置搜索词，并且当您设置`FindWhat`字段时执行该命令`DTE.Find`。

作为一种解决方法，您可以使用控制字符执行搜索以将设置刷新到对话框中。我会使用 a`\r\n`作为搜索词，同时取消设置多行搜索选项，以确保不会找到任何匹配项。不用说这是一个 hack，如果所有其他方法都失败并且你要哭了，你应该求助于这个。

您是否尝试在文本编辑器中进行搜索？编辑器通过 MEF 公开[ITextSearchService2](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.operations.itextsearchservice2.aspx)服务，这将允许您执行范围为单个文档的搜索，而无需与查找对话框交互。

# antlr - 具有多个元素的 ANTLR 规则

> ID：14444079
> 
> 赞同：0
> 
> 时间：2013-01-21T17:30:01.763
> 
> 标签：antlr, antlr3

我需要一些关于 ANTLR 的帮助。我有以下规则：

```
datasource
@init{boolean joinexpr = false;}
:   
   (s1=datasourceelement (joinclause1=joinclause joinelement1=datasourceelement onclause1=onclause  (multijoinexpression)* {joinexpr=true;})?)
   -> {joinexpr}?  ^(JOINEXPRESSION 
                        ^(LEFTEXPR $s1?) 
                        $joinclause1?
                        ^(RIGHTEXPR $joinelement1?) $onclause1? multijoinexpression*
                    )                    
   -> $s1                   
;
multijoinexpression
:
  joinclause datasourceelement onclause 
  -> 
  ^(MULTIJOINEXPRESSION
                        joinclause
                        ^(RIGHTEXPR datasourceelement) onclause
                    )
; 
```

用于解析连接表达式：它吃光了

> (table/query) (join (table/query) on (field=field))*

但我需要处理每个连接周围的“（）”，所以它可以解析如下内容：

> ((((table1 JOIN table2 ON field1=field2) JOIN table3 ON field2=field3) JOIN...)

没有括号它可以正常工作，但我不知道如何将左右括号添加到规则中，因为*multijoinexpression* *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:19:28.160

这解决了问题。我也觉得它真的很难看，但它确实有效。

```
(
  //1-2
                (LPARAM simplejoin RPARAM) multijoinexpression?
 |//2-3
        (LPARAM (LPARAM simplejoin RPARAM) multijoinexpression RPARAM)  multijoinexpression? 
 |//3-4
(LPARAM (LPARAM (LPARAM simplejoin RPARAM) multijoinexpression RPARAM)  multijoinexpression RPARAM) 
multijoinexpression?
 |//4-5
(LPARAM 
(LPARAM (LPARAM (LPARAM simplejoin RPARAM) multijoinexpression RPARAM)  multijoinexpression RPARAM) 
multijoinexpression RPARAM) multijoinexpression?
 )  ->^(JOINEXPRESSION simplejoin multijoinexpression* ) 
```

# objective-c - 一个代表团跨越多个文件？

> ID：14444080
> 
> 赞同：2
> 
> 时间：2013-01-21T17:30:06.517
> 
> 标签：objective-c, tableview, delegation

我已经开始用 Objective-C 编码好几天了，我有一个关于表格视图的问题。

这是我在 myViewController.h 文件中的声明

```
@interface MainViewController : NSViewController < NSTableViewDataSource, NSTableViewDelegate, NSStreamDelegate> 
```

我 `NSMutableArray * messages;`在 myViewController.m 中有一个全局变量。我在文件中更新了这条消息

在 anotherFile.m 我有`extern NSMutableArray * messages;`并且我也更新了这个文件中的消息。

我需要在表格视图上打印消息，问题是：我只能使用 [self.tableview reloadData] 而不是 anotherFile.m 打印 myViewController.m 中的更新。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:43:38.037

可能应该在 MainViewController 上有一个 adder 和一个 remover 方法，这比暴露你的支持数据存储更好......所以像：

```
-(void)addObjects:(NSSet *)objects
{
    for(id obj in objects)
   {
       [messages addObject:obj];
   }
   [reload data];
} 
```

# javascript - Changewheel 功能 它是如何工作的？

> ID：14444081
> 
> 赞同：0
> 
> 时间：2013-01-21T17:30:07.647
> 
> 标签：javascript, jquery, mobiscroll

首先，我想分享我对这个片段所做的惊人工作的赞赏（它真的是一个很酷的工具）。

我正在尝试在我目前正在开发的应用程序中使用 mobiscroll。我喜欢使用和自定义 mobiscroll 工具的简单性。

我真正发现只是模糊的是**如何使用功能 changeWheel**。我尝试了很多事情，但从未成功。

我想要完成的是改变第一个轮子的值（完全改变并重新生成第一个轮子），当我在我的第二个轮子中选择（实际上我想要的是一个改变事件）存在的两个参数中的一个时。

我构建了一个函数，为两个轮子创建数组，并相对于返回的第二个轮子的索引更改第一个轮子的数组。（我可以看到该函数有效，并且它为车轮生成了确切的值）。

**那么我如何使用函数 changewheel 在 inst 上的 onchange 事件中实现这一点？？？**

这个功能 changewheel 是否应该做我正在寻找的东西？

要非常清楚，**请考虑以下示例：**

一个人的第一轮重量 第二轮测量单位（公斤或磅）

如果我当场将 Lbs 更改为 Kg，我希望第一个轮子反映更改（更新可用值） - 例如，如果我将限制重量设置在 0 到 80kg 之间，则以 lbs 为单位的对应值需要在 0 到 177lbs 之间（整个转换由另一个自定义函数单独处理，它完全按照我的意愿工作）。

**我不知道如何实现 changewheel 事件....一个示例或更深入的解释将非常有用。**

非常感谢最好的迪努兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:51:39.040

这里有一个简单的解释，如果你想更新一个不同的值，你需要传递 mobiscroll 的实例并调用方法选项

```
$(function(){
         var filtersMetrics = [{}];
        var wheelPosMetrics = []
        var wheelPosFunc1 = [];
        var wheelPosFunc = [];

        wheelPosMetrics[0] = "Connection";
        wheelPosMetrics[1] = "Shared";
        wheelPosMetrics[2] = "Deleted";

        filtersMetrics[0]['Metrics']=wheelPosMetrics;

        wheelPosFunc1[0] = "Count";

        wheelPosFunc[0] = "Count";
        wheelPosFunc[1] = "Sum";
        wheelPosFunc[2] = "Avg";

        filtersMetrics[0]['Func']=wheelPosFunc1;

        var metricsScroller = $("#select").mobiscroll().scroller({
            theme : 'android',
            display : 'inline',
            mode: 'scroller',
            wheels: filtersMetrics,
            rows: 3,
            'onChange' : function(v, i , e){

                if(v[0]==1){
                    filtersMetrics[0]['Func']=wheelPosFunc;
                    metricsScroller.mobiscroll('option', 'wheels', filtersMetrics); 
                }else{
                    filtersMetrics[0]['Func']=wheelPosFunc1;
                    metricsScroller.mobiscroll('option', 'wheels', filtersMetrics);
                }

            }
        });

}); 
```

我用的是2.5版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T22:01:35.567

我也无法让 changeWheel 工作，但我找到了一种解决方法（我使用的是 Mobiscroll v2.15.1）。

在 onChange–Handler 中，您可以动态设置默认值：

```
.
.
.
onChange: function (values) {

   // here your logic for the current values            

   if (/*here your condition*/) {

      // Example for three wheels:      
      var curWheel = ["1", "2", "3"];

      // set the default values
      $(/*your element*/).mobiscroll("setArrayVal", curWheel, true);
    }
},
.
.
. 
```

# jquery - 如何在浏览器中获得“穿越云层”动画？

> ID：14444083
> 
> 赞同：2
> 
> 时间：2013-01-21T17:30:19.647
> 
> 标签：jquery, css, jquery-animate

我最近看到了一个[chrome 实验网站](http://www.ro.me/)。虽然实验本身很棒，但网站有一个介绍页面，背景中有云在移动……甚至在实验开始之前。

看着萤火虫，该网站只有[一个云图像](http://www.ro.me/files/cloud256.png)（我可能错了），我认为在某种程度上重新创建它会很有挑战性，因为我正在学习 jquery。

经过几个小时尝试不同的事情后，有两件事很明显：

1.  我很讨厌 jquery
2.  我可能需要一些指导

最初，我尝试在屏幕底部插入随机数量的云，并通过 jquery animate 更改不透明度和高度+宽度.. 但结果却慢得离谱..

然后，我想，如果我在背景中有一个基础层云，我可以为 2-3 个云设置动画并让它看起来不错.. 但[基础层看起来更糟](http://jsfiddle.net/uBB5p/1/)..

你能给我一些关于如何实现这一目标的提示吗？

谢谢。

* * *

出现“无法提交问题，因为：不要仅链接到 jsfiddle”错误。：/

这是jsfiddle中的一些代码：

```
<div>
    <div class="inner one"></div>
    <div class="inner two"></div>
<div> 
```

* * *

**更新**

在浏览了更多的站点后，我[发现](http://www.ro.me/tech/)整个站点的代码都是开源的……任何人都可以下载和贡献。

该代码[可在谷歌上找到](http://code.google.com/p/3-dreams-of-black/)

云动画是通过 webGL 完成的；我不熟悉的东西。我将尝试在 jquery 中重现这种效果 - 可能没有那么好，但我认为挑战值得一试。

同时，如果有人理解或知道如何在 jquery 中模拟这个，请告诉我。

如果我设法在 jquery 中复制它；我会把它作为答案发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:09:44.060

您展示的示例使用了 HTML5 的新功能之一的 Canvas，它也非常适合创建动画等。你可以使用一些 JS 和 canvas 来创建这种效果，但你也可以使用 jQuery 来完成同样的事情，但我认为 jQuery 方法会更加密集并且需要更多资源。这个想法可能是有几个基础层的云，然后再有几个前面的云，你会从后面开始，并在很短的时间内增长。所有这些图像都需要是透明的 img，所以你需要 Photoshop 之类的东西。他们正在做的事情并不难，它很可能是一个连续循环，循环通过几个图像改变大小并稍微移动它们以创建您看到的效果。看看这个网站，

[http://disneydigitalbooks.go.com/tron/](http://disneydigitalbooks.go.com/tron/)

# python - 对于 Python 模块，要声明的标准全局变量是什么？

> ID：14444086
> 
> 赞同：7
> 
> 时间：2013-01-21T17:30:27.157
> 
> 标签：python

在阅读其他 Python 模块时，我看到很多人经常在他们的源文件中包含全局变量（甚至在 PEP3001 中提到`__version__`过[）](http://www.python.org/dev/peps/pep-3001/)。我想用一组合理的这些变量来记录我的代码。通常可能包含的全局变量列表是什么？`__author__`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:34:48.507

这些全局变量没有特定的标准 - 正如您链接的 PEP 中所述，它们试图实现标准，但尚未以任何单一形式被普遍接受。

真正的标准是 PyPI 元数据，它在`setup.py`文件中为您的模块指定，使用`distutils`（或兼容的接口）。这是包装教程中的示例：

```
from distutils.core import setup

setup(
    name='TowelStuff',
    version='0.1.0',
    author='J. Random Hacker',
    author_email='jrh@example.com',
    packages=['towelstuff', 'towelstuff.test'],
    scripts=['bin/stowe-towels.py','bin/wash-towels.py'],
    url='http://pypi.python.org/pypi/TowelStuff/',
    license='LICENSE.txt',
    description='Useful towel-related stuff.',
    long_description=open('README.txt').read(),
    install_requires=[
        "Django >= 1.1.1",
        "caldav == 0.1.4",
    ],
) 
```

[http://guide.python-distribute.org/creation.html](http://guide.python-distribute.org/creation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:35:57.997

使用`distutils`（或超集`setuptools`）来提供有关您的项目的元数据。

特别是在使用`setuptools`时，元数据可以通过[`pkg_resources`模块](https://pythonhosted.org/setuptools/pkg_resources.html)发现和重用。

对于全局变量，例如 没有标准`__version__`，甚至对于 Python stdlib 也没有，这就是为什么在 Python 3 的 stdlib 中提供此元数据的努力没有取得任何成果。

我可以推荐[Python Packaging User Guide](https://packaging.python.org/en/latest/)作为如何正确打包项目的入门指南。

# c# - 使用列表编译错误与 LINQ 排序代码

> ID：14444088
> 
> 赞同：1
> 
> 时间：2013-01-21T17:30:30.723
> 
> 标签：c#, linq

编译错误：“名称'b'在当前上下文中不存在”

代码：

```
 List<PositionValues> list = new List<PositionValues>();
    PositionValues item1 = new PositionValues();
    item1.Position = 2;
    item1.Value = 44;
    list.Add(item1);

    PositionValues item2 = new PositionValues();
    item2.Position = 1;
    item2.Value = 33;
    list.Add(item2);

    PositionValues item3 = new PositionValues();
    item3.Position = 1;
    item3.Value = 22;
    list.Add(item3);

    var resultList = from b in list 
                     group b by b.Position into g 
                     orderby b.Value select b; 
```

上面的代码依赖于这个结构：

```
public struct PositionValues
{
    /// <summary>
    /// The position.
    /// </summary>
    public int Position;

    /// <summary>
    /// The position.
    /// </summary>
    public double Value;
} 
```

我希望得到以下排序顺序：

```
resultList[0] {1, 22}
resultList[1] {1, 33}
resultList[2] {2, 44} 
```

“位置”在括号中排在第一位，“价值”排在第二位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:33:33.167

根据您发布的预期结果，您不需要使用`group by`.

你想要的更像是这样的：

```
var result = list.OrderBy(x => x.Position).ThenBy(x => x.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:37:20.570

或者，如果您想要查询样式，

```
var query =
    from b in list
    orderby b.Position, b.Value
    select b; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:32:47.503

你已经习惯`b`成组`g`，所以现在使用`g`。在分组到 g 之前，您还必须按 b 排序。

```
var resultList = from b in list orderby b.Value group b by b.Position into g select g; 
```

# iphone - Cocos 2d 中的淡入/淡出不起作用

> ID：14444095
> 
> 赞同：0
> 
> 时间：2013-01-21T17:30:46.673
> 
> 标签：iphone, ios, ipad, cocos2d-iphone

我正在尝试使用黑色 png 图像在 cocos 2d 中制作**淡入淡出效果。**它是为了更好地展示一些东西，而不是随意的方式......

这段代码有问题吗？

```
- (void) effectFade {

    CCSprite *effectScreen = [CCSprite spriteWithFile:@"black-iphone.png"];
    effectScreen.opacity = 0;

    [effectScreen runAction:[CCSequence actions:
                           [CCFadeIn actionWithDuration:1],
                           [CCCallFunc actionWithTarget:self selector:@selector(hideOutShowIn)],
                           [CCFadeOut actionWithDuration:1],
                           [CCCallFunc actionWithTarget:self selector:@selector(finish)],
                           nil]];
    CCFadeTo *fadeIn = [CCFadeIn actionWithDuration:1];
    CCFadeTo *fadeOut = [CCFadeOut actionWithDuration:1];

    CCSequence *fadeSequence = [CCSequence actionOne:fadeIn two:fadeOut];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:34:53.180

您没有指定没有按预期工作的内容，但在我看来，您没有添加`effectScreen`到任何图层或其他节点，以便可以显示它。

至于其余的，代码对我来说似乎是正确的（除了没有使用的 , ）`fadeIn`。`fadeOut``fadeSequence`

编辑：

你肯定是在*使用* `effectScreen`ObjC/C 意义上的；您没有做的是通过执行以下操作将其添加到您的场景中：

```
[self addChild:effectScene]; 
```

（假设`self`是你的场景或其他`CCNode`类）。

不使用`fadeSequence`的情况有点不同，因为您不是在 ObjC/C 意义上使用它：您定义它并且永远不会再次引用它。

# sql-server - 如何使用 SSIS 将多个 Access 数据库导入 SQL Server

> ID：14444098
> 
> 赞同：3
> 
> 时间：2013-01-21T17:30:59.647
> 
> 标签：sql-server, ms-access, ssis

我有一个包含 300 多个 Access 数据库的文件夹（由我无法控制的程序编写）。它们都具有相同的结构，只是一个表。我正在将数据导入 SQL Server (2005) 中的表中。使用导入向导效果很好，但一次只能使用一个 Access db。

我已经搜索并搜索了一种方法来做到这一点，我认为我正在使用 ForEach 循环容器中的数据流任务。但是，我只看到了一种使用 Excel 文件或平面文件作为源的方法。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:36:26.173

对于一次性任务，您可以使用一次性 VBA 代码。

创建一个新数据库，并在该数据库中创建一个指向您的 SQL Server 表的 ODBC 链接。

然后创建一个与此类似的新 Access 查询：

```
INSERT INTO remote_table (<field list>)
SELECT <field list>
FROM YourTable In 'C:\SourceFolder\db1.mdb'; 
```

如果源和目标中的字段名称相同，则可以省略`<field list>`.

```
INSERT INTO remote_table
SELECT *
FROM YourTable In 'C:\SourceFolder\db1.mdb'; 
```

在最好的情况下，Access 字段值将与 SQL Server 字段类型兼容。如果不是，则必须使用 Access 函数将字段值转换为 SQL Server 兼容类型。

完成排序后，从 Access db 文件上传数据的 VBA 过程可能会变得快速而简单：

```
Sub Test()
Const cstrExtension As String = "mdb"
Const cstrFolder As String = "C:\SourceFolder\"
Dim db As DAO.database
Dim strDbFile As String
Dim strInsert As String

strInsert = "INSERT INTO remote_table (<field list>)" & vbCrLf & _
    "SELECT <field list>" & vbCrLf & _
    "FROM YourTable In 'DB_FILE';"
Set db = CurrentDb
strDbFile = Dir(cstrFolder & "*." & cstrExtension)
Do While Len(strDbFile) > 0
    db.Execute Replace(strInsert, DB_FILE, _
        cstrFolder & strDbFile), dbFailOnError
    strDbFile = Dir()
Loop
Set db = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T14:44:50.433

你需要做的是：

1.- 在你的包中创建 2 个变量，一个名为“current_file”，另一个名为“loading_location”（或您喜欢的名称），两者都具有包的范围，数据类型字符串，对于 current_file，保持值为空，放在 loading_location 上带有 Access 数据库的文件夹的路径。

2.- 添加一个 Foreach 循环容器，在里面去 Collection，选择 Expressions，然后添加一个新的 Expression。在属性上选择目录，然后在表达式中选择刚刚创建的 loading_location 变量。再次返回集合并在文件中输入：*.mdb

保持所有其他选项相同。然后转到变量映射并在变量中选择 current_file 变量。

3.- 创建一个新的 OLE DB 连接。在提供程序上选择“Microsoft Jet 4.0 OLE DB 提供程序”，在数据库文件名上选择您的任何访问数据库（稍后会更改，不要担心）。

4.- 在 Foreach 循环容器内创建一个数据流任务，在该数据流任务内添加一个 OLE DB 源。打开 OLE DB 源，在连接管理器中，选择刚刚创建的连接，在数据访问模式下选择“表或视图”，然后选择数据库的表。

5.- 添加一个 OLE DB 目标，为目标数据库选择相应的连接，然后选择要放置 Access 数据库数据的表。

现在我们将对此进行更改以通过每个 Access 数据库..

6.- 选择您为 Access DB 创建的连接，转到“属性”窗口并记下 ConnectionString 值，在我的例子中是：

数据源="MyAccessDBFile";Provider=Microsoft.Jet.OLEDB.4.0;

根据对数据库的权限，您可能有其他东西。现在转到 Expression 属性，展开它，我们将添加 2 个表达式。一个超过属性“ConnectionString”，并在表达式中放置

"数据源="+yourCurrentFileVariable+";Provider=Microsoft.Jet.OLEDB.4.0;"

你应该得到这样的东西：

"数据源="+ @[User::current_file]+";Provider=Microsoft.Jet.OLEDB.4.0;"

为属性“ServerName”添加一个新表达式，在这个表达式中选择 current_file 变量作为表达式，你应该在表达式字段中得到如下内容：

@[用户::current_file]

![图片](../Images/9b542cb6aecd651ddd049dbdca0931e4.png)

7.- 现在你会在 OLE DB 源中得到一个错误，不要担心这只是因为 current_file 变量还没有任何值。返回到 Foreach 循环容器中的数据流任务，并将 DelayValidation 属性设置为 true。转到项目->“您的包”属性->调试，并将 Run64BitRunteime 设置为 false。

![图片](../Images/5213dbbe7d99696edde4c1df3638fe22.png)

就是这样。

# scheme - 使用 big-bang 和 on-tick

> ID：14444099
> 
> 赞同：1
> 
> 时间：2013-01-21T17:31:04.187
> 
> 标签：scheme, racket

所以我正在尝试制作一个使用大爆炸来增长图像“HI”的程序。我把它放在画布的中心。我希望文本大小从 1 开始并在大小达到 80 时停止增长。我添加了 on-tick 但它仍然不会从 1 开始并增长。关于我做错了什么的任何想法？

编辑-

```
 (require 2htdp/image)
    (require 2htdp/universe)

    (define word "HELLO WORLD" )

    (define (draw-world world )
      (place-image (text word world  "olive")
                   240 210
                   (empty-scene 500 300)))

         (define (next t)
  (cond [(>= (draw-world t) 80) t]
        [else (+ t 1)]))

    (big-bang 1
              (on-tick add1)
              (to-draw draw-world)
              (stop-when zero?)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T09:09:01.810

你可以这样做：

```
(require 2htdp/image)
(require 2htdp/universe)

(define WORD "HELLO WORLD" )

(define (main x)
  (big-bang x
          (on-tick next)        ; World -> World
          (to-draw draw-world)  ; World -> Image
          (stop-when stop?)))   ; World -> Boolean

; World -> World
; Gives the next world
(define (next world)
  (cond [(>= world 80) world]
        [else (+ world 1)]))

; World -> Image
; Draw the current world
(define (draw-world world )
  (place-image (text WORD world  "olive")
               240 210
               (empty-scene 500 300)))

; World -> Boolean
; Check if this is the last world
(define (stop? world)
  (= world 80))

(main 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:02:55.447

有几件事。最重要的是在`draw-world` 哪里绘制大小为 11 的文本。如果改为绘制大小为 11 的文本，`world`那么您的文本将具有与当前世界相同的大小。

```
(text word world "olive") 
```

修复该错误后，您将立即发现下一个要修复的内容。

更新：

```
(define (stop? a-world)
  (<= a-world 80)) 
```

# jquery - 让 jSignature 与 Twitter Bootstrap 模式一起工作

> ID：14444100
> 
> 赞同：2
> 
> 时间：2013-01-21T17:31:07.920
> 
> 标签：jquery, twitter-bootstrap, digital-signature

我目前正在尝试让 jSignature（一个捕获签名的插件）在 twitter 引导模式中工作。由于某种原因，签名框正在缩小以适合模态框并使签名无法正常工作。这是一个 jsFiddle 供参考[http://jsfiddle.net/someyoungideas/3B3jS/](http://jsfiddle.net/someyoungideas/3B3jS/)。

```
<!-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p id="signature"></p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-13T15:59:19.667

这似乎对我有用！

```
$('#myModal').on('show.bs.modal', function (e) {    
  $("#signature").jSignature();
  $("#signature").resize();
}); 
```

在某些情况下，我需要在超时中包装 jSignature 初始化和调整大小，但我认为这主要取决于模态本身的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T23:35:24.800

jSignature 适合自己到`div`它被初始化的内部。换句话说，如果在初始化 jSignature 时， `div`with id`signature`被测量为 0x0，它就会被初始化。

当页面/窗口调整大小时，会导致`div`调整大小，jSignature 会重新调整其大小以再次适合 div。但是，此自动调整大小**仅在窗口调整大小时才**有效，而不是在窗口保持不变但`div`调整大小时。

现在，为什么这很重要？

当您初始化 jSignature 时，您会针对隐藏的`div`. 在这个阶段它的大小是0x0。

*   jSignature 允许您在选项对象中指定大小。- 简单但丑陋的解决方案

*   您可以将硬尺寸（宽度和高度）设置为`signature` `div`. - 简单但丑陋的解决方案。

*   您可以在变得可见并获得其大小**后**初始化 jSignature 。`signature` `div`- 建议的解决方案，因为这种方式 jSignature 将适合自己的模式。

过时的：http: [//jsfiddle.net/3B3jS/6/](http://jsfiddle.net/3B3jS/6/)

```
$("#myModal")
// .on('show', function() {
//     console.log('Modal will be shown');
// })
.on('shown', function() {
    // consider checking if the sig widget is already there and if not:
    $("#signature").jSignature()
})
// .on('hide', function() {
//     console.log('Modal will be hidden');
// })
// .on('hidden', function() {
//     console.log('Modal is hidden');
// }) 
```

# java - 如何对 Java 中的集合进行单元测试？

> ID：14444102
> 
> 赞同：0
> 
> 时间：2013-01-21T17:31:12.843
> 
> 标签：java, unit-testing

我仍然在接受单元测试某些事情，我对我的 JUnit 测试有一个问题，对于一个相对简单的类：

```
public class Kite {
    private List<String> strings = new ArrayList<String>();

    public void addString(String string) { //... }
    public void removeString(String string) { //... }
    public List<String> getStrings() { //... }
    public int getNumStrings() { //... }
} 
```

在这种情况下，我想测试所有四种方法。但是，现在我已经编写了测试，它们都非常相似。它们（不包括删除）都遵循将字符串添加到 Kite 的基本结构，然后检查 Kite 对象中字符串的数量。

有没有更好的方法来测试这些“CRUD”类型的方法？

我需要测试它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:35:55.923

最好在测试中更具体。对于 addString()，您想要测试：

1.  您添加的字符串存在于集合中。

2.  没有其他字符串作为副作用添加到集合中。

3.  如果将 null 传递给 addString()，则会引发 IllegalArgumentException（或任何应有的行为）

4.  如果您两次传递相同的字符串，则行为就是您想要的（可能是 IllegalArgumentException，可能是无操作）

明白了吗？您想为边缘情况以及正常行为（有时称为“快乐路径”）添加测试。根据可能的输入、可能的输出和可以采用的代码路径来考虑您的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:34:49.683

我会考虑编写一个模拟交易的测试：

1.  检查前置条件。
2.  执行添加操作。
3.  检查后置条件。
4.  使用 remove 回滚添加操作。
5.  确保风筝处于原始状态。

所有这些方法都将以这种方式进行测试。

# mobile - 我的第一个移动应用程序使用哪些工具

> ID：14444104
> 
> 赞同：-2
> 
> 时间：2013-01-21T17:31:17.017
> 
> 标签：mobile

我即将开始构建我的第一个移动应用程序并想要一些方向。该应用程序将需要：

*   在 iPhone、Windows Phone 和 Android 上运行
*   从数据库访问数据
*   能够确定它在哪里（例如，当我越过州界时，当我进入城市时，或者一般来说，当我改变语言环境时）
*   图形用户界面将相对简单

在做了一些研究之后，我有几个问题：

*   我应该使用框架（例如，Rho、Appcelerator 或 PhoneGap）还是 HTML5/CSS3/JS？或者，我会同时使用这两种方法吗？
*   我想出售该应用程序，这是否会阻止将其构建为网站（即 HTML5/CSS3/JS）？换句话说，如果我将它构建为一个网站，这是否意味着用户不必像原生移动应用程序一样下载和安装它？我喜欢让它成为“原生”移动应用程序而不是网站的想法，尽管也许我不应该这样做。
*   REST 是访问我的数据的最佳方式吗？我的想法是拥有一个 SQL Server 数据库并使用 .NET 构建一个 REST 服务。

其他提示或指导将不胜感激。

谢谢，杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:42:57.640

如果您使用 Appcelerator 之类的工具，那么您的最终产品将是原生的。Appcelerator 框架混淆了 android/iOS 的底层原生接口。在某些情况下，您需要了解两者之间的区别，例如何时为每个设备使用什么 Appcelerator 类，但本质上，您可以编写一次并部署到每个设备。已经使用了一段时间，非常好。Appcelerator 将为您提供本地接入设备所需的所有挂钩。

PhoneGap 将包装您的应用程序并创建一个“网络应用程序”。基本上是一个打包的网站。IMO Appcelerator 将是要走的路。这与您的第二个子弹更相似。您将构建网站，而不是将其托管在服务器上。它将被打包并部署到设备上。从本质上讲，手机变成了“网络服务器”，但只是在设备正在读取设备本地的网页的意义上。

就数据而言，REST 可能是最好的选择。电话会很快。您可能真的不需要构建自己的数据库。您可能想要查看您要使用的某些数据是否已经存在。除非你正在收集数据。我不知道您的应用程序的详细信息，因此我不确定该意见提供了什么帮助。

希望这可以帮助。

# android - 单击按钮时，我们如何在 youtube 上播放视频？

> ID：14444108
> 
> 赞同：0
> 
> 时间：2013-01-21T17:31:42.983
> 
> 标签：android, youtube

我正在开发一个应用程序，在该应用程序中，我有一个按钮，我想将其 onClick 重定向到 youtube 的链接，这意味着单击该按钮 youtube 应该打开并且应该播放视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:34:08.867

**Intenting 内置 YouTube 应用**

制定一个解析为`youtube URL`. 如果**安装了 youtube 应用程序，它会询问您是否要在 youtube 中打开。**

或者您可以使用 youtube-explicit intent，但如果未安装该应用程序，则会导致错误。

[Android YouTube 应用播放视频意图](https://stackoverflow.com/questions/574195/android-youtube-app-play-video-intent)

# .net - 在 Visual Studio 中扩展属性窗口

> ID：14444111
> 
> 赞同：1
> 
> 时间：2013-01-21T17:32:07.327
> 
> 标签：.net, visual-studio, visual-studio-addins

XNA Game Studio 以某种方式扩展了 Visual Studio 中的属性窗口，添加了两个新的组合框“Importer”和“Processor”。这些组合框包含在当前解决方案的代码中定义的可用导入器和处理器，当这些字段发生更改时，设置将保存到项目文件中相应项目的元数据中。

我很好奇他们是如何做到这一点的？任何信息，将不胜感激。

![在此处输入图像描述](../Images/e95144e7303f3f8383299c0355800fd2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:57:15.450

有一篇古老但很好的[文章](http://www.mindscapehq.com/blog/index.php/2008/09/09/extending-visual-studio-properties/)解释了它是如何完成的背后的原则。基本上它归结为实现[`IExtenderProvider`](http://msdn.microsoft.com/en-us/library/envdte.iextenderprovider.aspx)接口并确定它应该通过 扩展哪些对象[`CanExtendMethod`](http://msdn.microsoft.com/en-us/library/envdte.iextenderprovider.canextend.aspx)，使用对象的 CATID 来识别它。对于要扩展的对象，您使用该[`GetExtender`](http://msdn.microsoft.com/en-us/library/envdte.iextenderprovider.getextender.aspx)方法返回一个扩展器。请注意，扩展器必须标记为[`ComVisible`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)。

扩展器提供程序在注册表中静态[注册](http://msdn.microsoft.com/en-us/library/envdte.objectextenders.registerextenderprovider%28v=vs.110%29.aspx)或使用代码动态注册。文档很薄，但是[这个页面](http://msdn.microsoft.com/en-us/library/0y92k2w2.aspx)说扩展程序能够添加属性，也可以隐藏或更改现有属性。

# python - Shell - 尝试输出日志文件的最后一部分（时间戳是分隔符）

> ID：14444120
> 
> 赞同：1
> 
> 时间：2013-01-21T17:32:38.200
> 
> 标签：python, shell, logging, selenium, qa

我想将日志文件读入 shell，并输出最后发生的记录事件。这些日志是我在较大脚本中使用的 selenium-python 自动化测试结果。此脚本需要日志的最后一块。

以下是示例输出文件中最后记录的事件之一的示例：

```
2013-01-10 13:49:55

Notes: 

FAIL: runTest (__main__.changeContent)

Traceback (most recent call last):
  File "demo-about-content-pyunit-w.py", line 294, in runTest
    self.assertEqual(browser.find_element_by_id("descriptionAbout").text, "We are a business used for automated testing and pretty much boring.", 'about desc would not change')
AssertionError: about desc would not change

Ran 1 test in 40.954s>

FAILED (failures=1) 
```

日志文件按时间顺序包含与此类似的其他日志。我想使用上面的时间戳作为分隔符/截止阈值来输出/抓取最后一个条目。我尝试过使用`tail`和正则表达式，但不太确定如何去做。我宁愿从最后读取文件，因为效率很重要。我想在 shell 中解决这个问题，但 Python 中的解决方案也可能有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:00:03.940

我不确定这是否是您想要的，但您可以尝试：

```
tac logfile.log | while read line; do echo ${line};
    [[ "${line}" =~ [0-9]{4}(-[0-9]{2}){2}\ [0-9]{2}(:[0-9]{2}){2} ]] && break;
done | tac 
```

此代码段向后读取文件“logfile.log”，打印每一行，直到找到时间戳（采用您提供的格式）。由于这些行是向后打印的，因此另一个调用`tac`重新排序输出。

# git - 如何强制 git 合并冲突

> ID：14444122
> 
> 赞同：5
> 
> 时间：2013-01-21T17:32:46.797
> 
> 标签：git

当您在 git 中发生合并冲突时，它们会出现在文件中，如下所示：

```
<<<< 
  old
  old
====
  new
  new
>>>> 
```

`origin/master`现在，我对要合并到本地`master`分支进行了一些更改。如果我只是正常合并它们，新行将很好地出现在文件中，因为没有冲突。

但是，我希望更改看起来像上面的那些合并冲突，所以我可以看到冲突所在的旧行和新行，由`<<<<`and包围`>>>>`，手动查看每个更改并删除应该消失的内容。

我如何“挑起”这样的冲突？

一种解决方法是，但是在查看文件时，您必须在每行的开头`git diff -U999999 original.txt > review.txt`删除很多`-`和字符。`+`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:35:17.367

在你提交之前，你可以`git diff path/to/file`看看发生了什么变化。

在进行差异或冲突解决时，您可以轻松设置要使用的图形工具 - 有关示例，请参见[http://adventuresincoding.com/2010/04/how-to-setup-git-to-use-diffmerge](http://adventuresincoding.com/2010/04/how-to-setup-git-to-use-diffmerge)。

我使用[DiffMerge](http://www.sourcegear.com/diffmerge/)，在进行 diff 时，这可以让您单独删除更改，这听起来像是您想要的行为。

# android - Android：在Activity中执行的功能

> ID：14444124
> 
> 赞同：1
> 
> 时间：2013-01-21T17:33:01.513
> 
> 标签：android, android-activity

我想知道何时进入 Activity Android 执行函数本身以及何时需要调用函数。例如，在我下载的以下脚本中，前 4 个方法在没有调用的情况下执行，但最后一个`sendMessage()`需要调用：

```
public class BroadcastChat extends Activity {
    // Debugging
    private static final String TAG = "BcastChat";
    private static final boolean D = true;

    // Message types sent from the BluetoothChatService Handler
    public static final int MESSAGE_READ    = 1;
    public static final int MESSAGE_WRITE   = 2;
    public static final int MESSAGE_TOAST   = 3;

    // Key names received from the BroadcastChatService Handler
    public static final String TOAST = "toast";

    // Layout Views
    private ListView    mConversationView;
    private EditText    mOutEditText;
    private Button      mSendButton;

    // Array adapter for the conversation thread
    private ArrayAdapter<String> mConversationArrayAdapter;
    // String buffer for outgoing messages
    private StringBuffer mOutStringBuffer;
    // Member object for the chat services
    private BroadcastChatService mChatService = null;

    // The Handler that gets information back from the BluetoothChatService
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {

            if(D) Log.e(TAG, "[handleMessage !!!!!!!!!!!! ]");

            switch (msg.what) {

                case MESSAGE_WRITE:

                    byte[] writeBuf = (byte[]) msg.obj;
                    // construct a string from the buffer
                    String writeMessage = new String(writeBuf);
                    mConversationArrayAdapter.add("Me:  " + writeMessage);
                    break;
                case MESSAGE_READ:
                    String readBuf = (String) msg.obj;
                    mConversationArrayAdapter.add("You:  " + readBuf);
                    break;               
                case MESSAGE_TOAST:
                    Toast.makeText(getApplicationContext(), msg.getData().getString(TOAST),
                                   Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    };    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(D) Log.e(TAG, "+++ ON CREATE +++");

        // Set up the window layout
        setContentView(R.layout.main);
    }

    public void onStart() {
        super.onStart();
        if(D) Log.e(TAG, "++ ON START ++");

        setupChat();
    }

    @Override
    public synchronized void onResume() {
        super.onResume();
        if(D) Log.e(TAG, "+ ON RESUME +");

        mChatService.start();
    }

    private void sendMessage(String message) {

    if(D) Log.e(TAG, "[sendMessage]");

    // Check that there's actually something to send
    if (message.length() > 0 ) {
        // Get the message bytes and tell the BluetoothChatService to write
        byte[] send = message.getBytes();
        mChatService.write(send);

        // Reset out string buffer to zero and clear the edit text field
        mOutStringBuffer.setLength(0);
        mOutEditText.setText(mOutStringBuffer);

    }
}

    ... Incomplete script, just a part shown for the question 
```

}

所以我的问题是双重的：

1-`Android Activity`方法是从第一行到最后一行顺序调用的方法吗？，是否有一个循环使“指针”在到达最后一行后回到第一行？

2-您如何确定哪些方法将自动执行（如`onCreate()`），哪些方法将等到它们被脚本的另一个方法调用。

非常感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:17:41.603

首先要理解的，也是至关重要的一点，这*不是*脚本，而是代码。如果您将其视为脚本，您将无法“了解”代码在做什么。脚本从头到尾执行。它可能会扩展到一个功能，但最终，事情会按顺序发生。

在 Java（以及 Android）中，*一切都是*作为对事件或回调的响应而发生的。其中一些事件是由 Android 引发的，Nickolaus 已经向您指出了 Activity 生命周期，该生命周期记录了 Android 对您的 Activity 进行的回调以及它们发生的*确切顺序。*其他事件由接收者、内容提供者、监听者等引发。

请注意，此顺序不是基于时间的（尽管您当然可以创建基于时间的代码事件）并且不会一个接一个地发生。它们在 Activity 的状态发生变化时被调用，并且仅在状态发生变化时被调用。

在这些回调的处理程序中，您当然可以调用自己的函数，创建类的实例并调用它们的方法，并按顺序执行操作，从上到下 - 但*只能*在处理程序内部。

当您的应用程序启动时，首先发生的事情是 Android 实例化了 Application 类。每个应用程序都有一个 Application 类的实例，无论您是否知道，并且该 Application 类实例也具有类似于 Activity 的生命周期，因此 Application.onCreate() 是应用程序中要触发的第一个事件。一旦 Application 类实例被实例化，就会创建在您的 rmanifest 中定义的主要活动，并调用它的 onCreate() 方法。

之后，一切都会响应来自例如侦听器（onClick、onReceive 等）的回调或响应事件而发生。从 onCreate() 结束开始，您的代码仅在其他事件发生时执行。

您可以缩短所有这些并回答您的问题，方法是说 sendMessage 只能从回调处理程序内部的某个地方调用。

当有多个线程执行代码时，它会变得更加复杂，但那是另一天的事了。

我希望这会有所帮助，而不是让事情变得更加混乱！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:40:07.507

这里看一下应该向您解释的[活动生命周期。](http://developer.android.com/reference/android/app/Activity.html)

# cluster-computing - ehcache 不在 liferay 集群中复制

> ID：14444125
> 
> 赞同：7
> 
> 时间：2013-01-21T17:33:05.587
> 
> 标签：cluster-computing, replication, liferay-6, ehcache, jgroups

我有以下设置

1.liferay集群，AWS上有2台机器

2.单播集群复制与JGroups over tcp

我在 portal-ext.properties 中有以下参数

```
#Setup hibernate
net.sf.ehcache.configurationResourceName=/myehcache/hibernate-clustered.xml

#Setup distributed ehcache
ehcache.multi.vm.config.location=/myehcache/liferay-multi-vm-clustered.xml

#
# Clustering settings
#
cluster.link.enabled=true
ehcache.cluster.link.replication.enabled=true
cluster.link.channel.properties.control=tcp.xml
cluster.link.channel.properties.transport.0=tcp.xml
lucene.replicate.write=true

#In order to make use of jgroups
    ehcache.bootstrap.cache.loader.factory=com.liferay.portal.cache.ehcache.JGroupsBootstrapCacheLoaderFactory
ehcache.cache.event.listener.factory=net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory
 ehcache.cache.manager.peer.provider.factory=net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory
net.sf.ehcache.configurationResourceName.peerProviderProperties=file=/myehcache/tcp.xml
ehcache.multi.vm.config.location.peerProviderProperties=file=/myehcache/tcp.xml

cluster.executor.debug.enabled=true
ehcache.statistics.enabled=true 
```

我无法让集群缓存复制工作。谁能指出我正确的方向？如果以后需要，我可以发布更多详细信息。我还尝试修改 hibernate-clustered.xml 和 liferay-multi-vm-clustered.xml，但没有任何效果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-26T10:02:03.553

在花了几天时间阅读了无数博客文章、论坛主题，当然还有 SO 问题之后，我想在这里总结一下我们是如何最终成功地在 Liferay 6.2 集群中配置缓存复制的，使用单播 TCP 以适应 Amazon EC2。

## JGroups 配置

在配置 Liferay 进行缓存复制之前，您必须了解 Liferay 依赖于 JGroups 通道。基本上，JGroups 允许发现远程实例并与之通信。默认情况下（至少在 Liferay 中）它利用多播 UDP 来实现这些目标。有关更多信息，请参见[JGroups 网站](http://www.jgroups.org/)。

要启用单播 TCP，您必须首先从`jgroups.jar`Liferay webapp 中获取 JGroups 的 TCP 配置文件（类似于`$LIFERAY_HOME/tomcat-7.0.42/webapps/ROOT/WEB-INF/lib/jgroups.jar`）。将此文件解压缩到 Liferay webapp 的类路径可用的位置。说`$LIFERAY_HOME/tomcat-7.0.42/webapps/ROOT/WEB-INF/classes/custom_jgroups/tcp.xml`。记下这条路径。

为了让这个配置在 Liferay 集群中工作，你只需要在标签中添加一个`singleton_name="liferay"`属性：`TCP`

```
<config xmlns="urn:org:jgroups"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:org:jgroups http://www.jgroups.org/schema/JGroups-3.1.xsd">
    <TCP singleton_name="liferay"
         bind_port="7800"
         loopback="false"
         ... 
```

您可能已经注意到：

A. 这个配置文件没有指定监听的绑定地址，并且

B.集群的初始主机必须通过系统属性进行设置。

实际上，您需要修改`$LIFERAY_HOME/tomcat-7.0.42/bin/setenv.sh`以添加以下JVM系统属性：

```
-Djava.net.preferIPv4Stack=true
-Djgroups.bind_addr=192.168.0.1
-Djgroups.tcpping.initial_hosts=192.168.0.1[7800],80.200.230.2[7800] 
```

绑定地址定义了要监听的网络接口（JGroups 端口在 TCP 配置文件中设置为 7800）。初始 hosts 属性**必须包含集群的每个实例**（有关更多信息，请参阅[JGroups 文档上的 TCPPING 和 MERGE2](https://developer.jboss.org/wiki/JGroupsTCPPING)），以及它们的侦听端口。远程实例可以通过它们的主机名、本地地址或公共地址来引用。

(**提示：**如果您在 Amazon EC2 上设置 Liferay 集群，每次重启后实例的本地 IP 地址和主机名可能会不同。要解决此问题，您可以将 setenv.sh 中的本地地址替换为主机名命令的结果：``hostname``——注意这里的反引号）

（**提示：**如果在 EC2 上使用安全组，还应确保对同一安全组中的所有实例开放 7800 端口）

## Liferay 配置

通过将以下属性添加到您的 portal-ext.properties，在 Liferay 上启用 JGroups 复制：

```
# Tells Liferay to enable Cluster Link. This sets up JGroups control and transport channels (necessary for indexes and cache replication)
cluster.link.enabled=true
# This external address is used to determine which network interface must be used. This typically points to the database shared between the instances.
cluster.link.autodetect.address=shareddatabase.eu-west-1.rds.amazonaws.com:5432 
```

为单播 TCP 配置 JGroups 只需指向正确的文件：

```
# Configures JGroups control channel for unicast TCP
cluster.link.channel.properties.control=/custom_jgroups/tcp.xml
# Configures JGroups transport channel for unicast TCP
cluster.link.channel.properties.transport.0=/custom_jgroups/tcp.xml 
```

在同一个文件中，Lucene 索引复制需要这个单一属性：

```
# Enable Lucene indexes replication through Cluster Link
lucene.replicate.write=true 
```

EhCache 缓存复制更加微妙。您必须为 Hibernate 缓存和 Liferay 的内部缓存配置 JGroups。要理解这个配置，你必须知道，从 Liferay 6.2 开始，**默认**的EhCache 配置文件是“集群的”（**不要设置这些属性**）：

```
# Default hibernate cache configuration file
net.sf.ehcache.configurationResourceName=/ehcache/hibernate-clustered.xml
# Default internal  cache configuration file
ehcache.multi.vm.config.location=/ehcache/liferay-multi-vm-clustered.xml 
```

这些配置文件都依赖于必须设置启用 JGroups 的 EhCache 工厂：

```
# Enable EhCache caches replication through JGroups
ehcache.bootstrap.cache.loader.factory=com.liferay.portal.cache.ehcache.JGroupsBootstrapCacheLoaderFactory
ehcache.cache.event.listener.factory=net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory
ehcache.cache.manager.peer.provider.factory=net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory 
```

JGroups 的缓存管理器对等提供者工厂需要一个`file`包含 JGroups 配置的参数。指定单播 TCP 配置文件：

```
# Configure hibernate cache replication for unicast TCP
net.sf.ehcache.configurationResourceName.peerProviderProperties=file=/custom_jgroups/tcp.xml

# Configure internal caches replication for unicast TCP
ehcache.multi.vm.config.location.peerProviderProperties=file=/custom_jgroups/tcp.xml 
```

（**提示：**如有疑问，请参阅属性定义和默认值：[https](https://docs.liferay.com/portal/6.2/propertiesdoc/portal.properties.html) ://docs.liferay.com/portal/6.2/propertiesdoc/portal.properties.html ）

## 调试

此外，您可以启用调试跟踪：

```
cluster.executor.debug.enabled=true 
```

你甚至可以告诉 Liferay 在每个页面上显示处理请求的节点的名称：

```
web.server.display.node=true 
```

[最后，JGroups 通道通过探测工具](https://developer.jboss.org/wiki/Probe)公开了一个可用的诊断服务。

## 最后说明

请记住，这仅涵盖索引和缓存复制。在设置 Liferay 集群时，您还应该考虑设置：

*   共享数据库（AWS 上的 RDS），
*   共享[文档](http://www.liferay.com/fr/documentation/liferay-portal/6.2/user-guide/-/ai/alternative-file-repository-options-liferay-portal-6-2-user-guide-05-en)库（AWS 上的 S3 或 RDS），
*   Tomcat 上的会话复制，
*   也许更多取决于你如何使用 Liferay。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-28T21:55:04.020

我花了很多时间让 Liferay 6.1.1 CE 集群在 AWS 上运行。

这是我的“portal-ext.properties”，与您的几乎没有区别

```
##
## JDBC
##

# Tomcat datasource
jdbc.default.jndi.name=jdbc/LiferayPool

##
## Mail
##

# Tomcat mail session
mail.session.jndi.name=mail/MailSession

##
## Document Library Portlet
##

# NFS shared folder
dl.store.file.system.root.dir=/opt/document_library/

##
## Cluster Link
##

# Cluster Link over JGroups TCP unicast
cluster.link.enabled=true
cluster.link.channel.properties.control=custom_cache/tcp.xml
cluster.link.channel.properties.transport.0=custom_cache/tcp.xml

# Any VPC internal IP useful to detect local eth interface
cluster.link.autodetect.address=10.0.0.19:22

##
## Lucene Search
##

# Lucene index replication over Cluster Link
lucene.replicate.write=true

##
## Hibernate
##

# Second Level cache distributed with Ehcache over JGroups TCP unicast
net.sf.ehcache.configurationResourceName=/custom_cache/hibernate-clustered.xml
net.sf.ehcache.configurationResourceName.peerProviderProperties=file=custom_cache/tcp.xml

##
## Ehcache
##

# Liferay cache distributed with Ehcache over JGroups TCP unicast
ehcache.multi.vm.config.location=/custom_cache/liferay-multi-vm-clustered.xml
ehcache.multi.vm.config.location.peerProviderProperties=file=custom_cache/tcp.xml

ehcache.bootstrap.cache.loader.factory=com.liferay.portal.cache.ehcache.JGroupsBootstrapCacheLoaderFactory
ehcache.cache.event.listener.factory=net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory
ehcache.cache.manager.peer.provider.factory=net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory 
```

我添加了以下属性

```
singleton_name="custom_cache" 
```

到“custom_cache/tcp.xml”JGroups 配置的 TCP 信封。

最后，我在节点 NODE_1 的 Liferay 启动脚本中添加了以下选项

```
JAVA_OPTS="$JAVA_OPTS -Djgroups.bind_addr=NODE_1 -Djgroups.tcpping.initial_hosts=NODE_1[7800],NODE_2[7800] -Djava.net.preferIPv4Stack=true" 
```

和 NODE_2

```
JAVA_OPTS="$JAVA_OPTS -Djgroups.bind_addr=NODE_2 -Djgroups.tcpping.initial_hosts=NODE_1[7800],NODE_2[7800] -Djava.net.preferIPv4Stack=true" 
```

我希望这可以帮助您节省时间。

# python - 明显的循环问题：为什么我一遍又一遍地将相同的东西附加到我的列表中？

> ID：14444126
> 
> 赞同：2
> 
> 时间：2013-01-21T17:33:06.937
> 
> 标签：python, csv

我试图将 .csv 的每一行转换为字典（键是 .csv 的第一行），然后我试图将这些字典中的每一个放入一个列表中。当我运行此代码时，我最终将 .csv 的 LAST ROW 一遍又一遍地附加到列表中，而不是正确地将每个字典（临时保存为 dataLine）附加到列表中？这更加令人困惑，因为如果我将代码中的“dataList.append(dataLine)”行替换为“print dataLine”，代码将遍历 .csv 并单独打印每一行，而不是一遍又一遍地打印最后一行再次。

```
from sys import argv
import csv

# arguments
script, csvFile = argv

# check input
while csvFile.endswith(".csv") == False:
    csvFile = raw_input("Please enter a *.csv file:  ")

# open the csv file
openFile = open(csvFile, 'r')

# read the csv file
reader = csv.reader(openFile, delimiter=',')

# extract first row to use as keys
for row in range(1):
    keys = reader.next()

# turn rows into dictionaries with keys
#FIX THIS PART!!  NOT WORKING RIGHT!!!
length = len(keys)
dataLine = {}
dataList = []
for row in reader:
    for i in range(length):
        dataLine[keys[i]] = row[i]
    dataList.append(dataLine)

for x in dataList:
    print x
    print ""

# close the file
openFile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:37:07.997

您多次插入对同一字典 ( `dataLine`)的引用。`dataList`您在此过程中更改了字典的内容，但它仍然是相同的对象。

进入`dataline = {}`你的外循环：

```
for row in reader:
    dataLine = {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:38:40.953

您可以尝试的一件事是使用内置的[DictReader](http://docs.python.org/2/library/csv.html#csv.DictReader)类`csv`：

```
>>> import csv
>>> with open('fake_csv.csv', 'r') as f:
...     reader = csv.DictReader(f)
...     my_rows = [row for row in reader]
...     
>>> my_rows
[{'title1': 'something', 'title2': 'another'}, {'title1': 'cool', 'title2': 'stuff'}] 
```

`DictReader`实际上做了你所描述的 - 它使用第一行作为列标题，并从每个后续行创建一个字典，其中键是列标题，值是该行的列值。Using`with`是一种确保您的文件在不再需要时正确关闭的方法，这一行：

```
my_rows = [row for row in reader] 
```

是一个[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)式，它遍历`reader`并将每一行放入结果列表中（标题行除外）。

在这里，我使用了一个看起来像这样的 CSV：

```
title1,title2
something,another
cool,stuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:40:28.003

在您的代码`dataLine`中只是对特定对象的引用。每次迭代后，此对象都会更改。所以列表`dataList`存储的是同一个对象的序列。

改用这个：

```
dataLine = {key:row[i] for i, key in enumerate(keys)} 
```

在这种情况下，您每次迭代都会创建新字典。

# silverlight - 在自定义 Silverlight UserControl 中创建 DependencyPropety

> ID：14444127
> 
> 赞同：0
> 
> 时间：2013-01-21T17:33:08.970
> 
> 标签：silverlight, mvvm, dependency-properties

谁能帮我`ItemsSource`在我的自定义 Silverlight UserControl 中创建一个属性？

这是我的一个非常简单的 ViewModel：

```
public class MyVM
{
    public ObservableCollection<int> Values { set; get; }

    public MyVM()
    {
        this.Values = new ObservableCollection<int>();
    }
} 
```

这是我的（内部）UserControl，我将它传递到主 UserContorl（MainPage）：

```
<UserControl x:Class="SilverlightApplication1.SilverlightControl1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

<Grid x:Name="LayoutRoot" Background="White" >
    <Border BorderBrush="Black" BorderThickness="2">
        <ListBox Margin="5" Name="lst" />
    </Border>
</Grid>
</UserControl>

public partial class SilverlightControl1 : UserControl
{
    public IEnumerable MyItemsSource
    {
        get
        {
            return (IEnumerable)GetValue(MyItemsSourceProperty);
        }
        set
        {
            SetValue(MyItemsSourceProperty, value);
        }
    }
    public static readonly DependencyProperty MyItemsSourceProperty =
        DependencyProperty.Register("MyItemsSource", typeof(IEnumerable), typeof(SilverlightControl1), new PropertyMetadata(null));

    public SilverlightControl1()
    {
        InitializeComponent();
    }
} 
```

这是一个托管我的 UserControl 的小容器：

```
<UserControl x:Class="SilverlightApplication1.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:local="clr-namespace:SilverlightApplication1"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

<Grid x:Name="LayoutRoot" Background="White">
    <local:SilverlightControl1 Name="qqq" MyItemsSource="{Binding Path=Values}"/>

</Grid>
</UserControl>

public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
        MyVM vm = new MyVM();
        vm.Values.Add(1);
        vm.Values.Add(2);
        vm.Values.Add(3);
        vm.Values.Add(4);

        this.DataContext = vm;
    }
} 
```

如何将数据绑定到我的内部 ListBox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:25:19.547

首先，您`SilverlightControl1`没有自己的 DataContext ，这意味着它正在继承其容器的 DataContext （`MainPage`在这种情况下）。假设您希望它以这种方式设置，我会回答（而不是 SilverlightControl1 拥有自己的 DC）。说了这么多，`MyItemsSource`也没用。你可以把它们放在一起。将其从中删除`MainPage.xaml`并仅包含控件，如下所示：

```
<Grid x:Name="LayoutRoot" Background="White">
    <local:SilverlightControl1 x:Name="qqq" />
</Grid> 
```

其次，您的 ListBox 不受任何约束。由于它继承了 Main 的 DC，因此您可以`Values`这样绑定：

```
<Grid x:Name="LayoutRoot" Background="White" >
    <Border BorderBrush="Black" BorderThickness="2">
        <ListBox Margin="5" Name="lst" ItemsSource="{Binding Values}" />
    </Border>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:38:34.963

我已经完全停止使用 UserControl，部分是因为这个。我改用 CustomControls。可用性和复杂性是完全一样的。您可以使用代码隐藏和单独的模型（尽管我主要使用控件的代码作为模型本身的设置`this.DataContext = this;`）。我的代码也变得更加结构化（至少我是这么认为的），并且我有更多的可能性来更改控件的 UI。

使用 CustomControls 的唯一缺点是我没有像在 UserControls 和 Windows 中那样的设计界面。UI 被放置在 Generic.xaml 文件中（默认情况下），并通过在编辑器中编写 XAML 来构建，而不是使用鼠标。一开始这很糟糕，但我很快就习惯了。

所以我的回答是，如果你使用 CustomControls，你可以做同样的事情。绑定是这样写的：

```
MyItemsSource="{Binding RelativeSource="{RelativeSource Mode=TemplatedParent}" Path=Values}" 
```

...或者简单地说：

```
MyItemsSource="{TemplateBinding Values}" 
```

...如果您不必将任何转换器或其他任何东西添加到绑定中。

# c++ - 在 FPS 风格游戏中使用鼠标输入时，移动意外加速

> ID：14444144
> 
> 赞同：0
> 
> 时间：2013-01-21T17:34:12.067
> 
> 标签：c++, opengl, sdl

我正在使用鼠标和键盘输入在 OpenGL（以 SDL 作为框架）中编写一个 FPS 风格的游戏。出于某种原因，每当我使用鼠标改变方向（旋转）同时使用键盘移动“相机位置”时，移动速度会大大加快（与不使用鼠标时使用键盘移动相反）。

我的代码有什么问题？

**主文件**

```
#define PI 3.14159265
#include <sdl.h>
#include <string>
#include "SDL_opengl.h"
#include <gl\gl.h>
#include <gl\glu.h>
#include <stdio.h>
#include <math.h>
#include <time.h>
#include <stdlib.h>
using namespace std;
float urad(0), drad(0), slrad(0), srrad(0);
int mousex(0), mousey(0);
float transx(0), transy(-.3), transz(0), yrot(0), luad(0);
float rotx(0), roty(0);
bool up,down,right,left,tr,tl, sl,sr,lu,ld;
const int SCREEN_WIDTH = 640;
const int SCREEN_HEIGHT = 480;
const int SCREEN_BPP = 32;
SDL_Event event;
GLfloat zpos(0);
GLfloat rot(0);
bool exited(false);
void drawstuff(); //Function Prototype
void startGL()
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_SetVideoMode(800, 500, 32, SDL_OPENGL | SDL_HWPALETTE);
    glViewport(0,0,800,500);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0f,(GLfloat)800/(GLfloat)500,0.1f,100.0f);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glShadeModel(GL_SMOOTH);
    glClearColor(0.0f, 0.0f, 0.0f, 0.5f);
    glClearDepth(1.0f);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_POLYGON_SMOOTH);
    glDepthFunc(GL_LEQUAL);
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
}
void drawstuff()
{

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    glRotatef(roty, 0, 1, 0);
    glRotatef(luad, 1, 0, 0);
    glTranslatef(transx, transy, transz);
    glBegin(GL_QUADS);                                  // Draw A Quad
        glColor3f(0.0f,1.0f,0.0f);                      // Set The Color To Green
        glVertex3f( 1.0f, 1.0f,-1.0f);                  // Top Right Of The Quad (Top)
        glVertex3f(-1.0f, 1.0f,-1.0f);                  // Top Left Of The Quad (Top)
        glVertex3f(-1.0f, 1.0f, 1.0f);                  // Bottom Left Of The Quad (Top)
        glVertex3f( 1.0f, 1.0f, 1.0f);                  // Bottom Right Of The Quad (Top)
        glColor3f(1.0f,0.5f,0.0f);                      // Set The Color To Orange
        glVertex3f( 1.0f,-1.0f, 1.0f);                  // Top Right Of The Quad (Bottom)
        glVertex3f(-1.0f,-1.0f, 1.0f);                  // Top Left Of The Quad (Bottom)
        glVertex3f(-1.0f,-1.0f,-1.0f);                  // Bottom Left Of The Quad (Bottom)
        glVertex3f( 1.0f,-1.0f,-1.0f);                  // Bottom Right Of The Quad (Bottom)
        glColor3f(1.0f,0.0f,0.0f);                      // Set The Color To Red
        glVertex3f( 1.0f, 1.0f, 1.0f);                  // Top Right Of The Quad (Front)
        glVertex3f(-1.0f, 1.0f, 1.0f);                  // Top Left Of The Quad (Front)
        glVertex3f(-1.0f,-1.0f, 1.0f);                  // Bottom Left Of The Quad (Front)
        glVertex3f( 1.0f,-1.0f, 1.0f);                  // Bottom Right Of The Quad (Front)
        glColor3f(1.0f,1.0f,0.0f);                      // Set The Color To Yellow
        glVertex3f( 1.0f,-1.0f,-1.0f);                  // Top Right Of The Quad (Back)
        glVertex3f(-1.0f,-1.0f,-1.0f);                  // Top Left Of The Quad (Back)
        glVertex3f(-1.0f, 1.0f,-1.0f);                  // Bottom Left Of The Quad (Back)
        glVertex3f( 1.0f, 1.0f,-1.0f);                  // Bottom Right Of The Quad (Back)
        glColor3f(0.0f,0.0f,1.0f);                      // Set The Color To Blue
        glVertex3f(-1.0f, 1.0f, 1.0f);                  // Top Right Of The Quad (Left)
        glVertex3f(-1.0f, 1.0f,-1.0f);                  // Top Left Of The Quad (Left)
        glVertex3f(-1.0f,-1.0f,-1.0f);                  // Bottom Left Of The Quad (Left)
        glVertex3f(-1.0f,-1.0f, 1.0f);                  // Bottom Right Of The Quad (Left)
        glColor3f(1.0f,0.0f,1.0f);                      // Set The Color To Violet
        glVertex3f( 1.0f, 1.0f,-1.0f);                  // Top Right Of The Quad (Right)
        glVertex3f( 1.0f, 1.0f, 1.0f);                  // Top Left Of The Quad (Right)
        glVertex3f( 1.0f,-1.0f, 1.0f);                  // Bottom Left Of The Quad (Right)
        glVertex3f( 1.0f,-1.0f,-1.0f);                  // Bottom Right Of The Quad (Right)
    glEnd();                                            // Done Drawing The Quad
}

void EventListener()
{
    Uint8 *keystate = SDL_GetKeyState(NULL);
    SDL_PumpEvents();
    if (keystate[SDLK_LEFT]) tl=true;
    else tl=false;
    if (keystate[SDLK_RIGHT]) tr=true;
    else tr=false;
    if (keystate['w'] ) up=true;
    else up=false;
    if (keystate['s'] ) down=true;
    else down=false;
    if (keystate['a'] ) sl=true;
    else sl=false;
    if (keystate['d'] ) sr=true;
    else sr=false;
}
void EventHandler()
{
    if (tl)
    {
        roty-=2;
        if (roty >360)
        {
            roty -= 360;
        }
    }
    if (tr)
    {
        roty+=2;
        if (roty <-360)
        {
            roty += 360;
        }
    }
    if (up)
    {
        urad = roty*PI/180;
        transx+=sin(-urad) * .06;
        transz+=cos(-urad) * .06;
    }
    if (down)
    {
        drad = roty*PI/180;
        transx-=sin(-drad) * .06;
        transz-=cos(-drad) * .06;
    }
    if (sl)
    {
        slrad = roty*PI/180;
        transx += cos(slrad) * .04;
        transz += sin(slrad) * .04;
    }
    if (sr)
    {

        srrad = roty*PI/180;
        transx -= cos(srrad) * .04;
        transz -= sin(srrad) * .04;
    }
    SDL_PumpEvents();
    SDL_GetMouseState(&mousex, &mousey);
    roty=mousex*.5;
}
int main (int argc, char* args[])
{
    SDL_Surface* screen = NULL;
    SDL_Init( SDL_INIT_EVERYTHING );
    screen = SDL_SetVideoMode( 800, 500, 32, SDL_SWSURFACE);
    SDL_Flip( screen );
    SDL_WM_SetCaption("OpenGL", NULL);
    startGL();
    SDL_EnableKeyRepeat(1, 10);
    while(exited == false)
    {
        while( SDL_PollEvent( &event ) )
        {
            if( event.type == SDL_QUIT )
            {
                exited = true;
            }
            EventListener();
            EventHandler();

        }
        glClear(GL_COLOR_BUFFER_BIT);

        drawstuff();
        SDL_GL_SwapBuffers();
        SDL_Delay(16);
    }
    SDL_Quit();
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:22:46.067

尝试将`EventHandler()`轮询循环移到外部：

```
while( SDL_PollEvent( &event ) )
{
    if( event.type == SDL_QUIT )
    {
        exited = true;
    }
    EventListener();
}
EventHandler(); 
```

否则`EventHandler()`将为*每个*. *单*。*事件*。你知道是什么产生了一堆事件吗？鼠标运动:)

# objective-c - 使用 iOS 6 构建的 iPad 自动旋转问题

> ID：14444145
> 
> 赞同：0
> 
> 时间：2013-01-21T17:34:12.657
> 
> 标签：objective-c, xcode, ipad, ios6, ios5.1

我意识到这是一个非常常见的问题，但我找到的解决方案都没有解决我的问题。

要解决 Game Center 在横向启动时的崩溃问题，您必须为所有方向添加支持的界面方向（我已经这样做了）。iPhone/iPod 上的崩溃问题现已针对这些特定设备解决。

现在，我遇到的问题是 iPad 1 特有的。如果您在游戏启动时将 iPad 保持在纵向模式，则游戏可以保持纵向，直到您旋转设备（如果您尝试将其旋转回来，它不会，只有在启动时我才会出现此问题）。除非我从支持的界面方向中删除纵向。不幸的是，如果我这样做，该应用程序将在其他设备上崩溃。

我的初始界面方向是横向左。

这是我目前拥有的代码：

```
(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight|UIInterfaceOrientationMaskLandscapeLeft;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
}

- (BOOL)shouldAutorotate{
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:55:46.303

在 appDelegate 中试试这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if( orientation == UIDeviceOrientationPortrait || orientation == UIDeviceOrientationPortraitUpsideDown )
        [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight];
} 
```

# php - 长时间轮询导致巨大延迟

> ID：14444149
> 
> 赞同：-2
> 
> 时间：2013-01-21T17:34:27.057
> 
> 标签：php, ajax, comet

我正在使用长轮询来检查是否有任何新的传入数据。当一个请求正在等待响应时，其他请求在此请求完成之前没有被处理。我正在使用 jQuery Ajax 发布方法和 async =是的。任何人都可以帮我解决这个问题。我认为我的请求正在排队，直到前一个超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:48:53.700

这不是 ajax 或 javascript 的问题。这是您的 php 锁定会话。您需要添加`session_write_close();`到在您的长轮询中运行的 php。

# ios - FlipsideViewController 不关闭

> ID：14444151
> 
> 赞同：0
> 
> 时间：2013-01-21T17:34:31.260
> 
> 标签：ios, objective-c, views

我的 FlipsideViewController 的“完成”按钮不起作用（没有崩溃，但也没有关闭视图）。这是代码：

在 FlipSideViewController.h

```
@class FlipsideViewController;

@protocol FlipsideViewControllerDelegate
- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller;
@end

@interface FlipsideViewController : UIViewController

@property (weak, nonatomic) id <FlipsideViewControllerDelegate> delegate;

- (IBAction)done:(id)sender;

@end 
```

在 FlipSideViewController.m 中

```
- (IBAction)done:(id)sender
{
// an NSLog statement that is here is logging properly
[self.delegate flipsideViewControllerDidFinish:self];

} 
```

在 MainViewController.h

```
@interface FifthViewController : UIViewController <FlipsideViewControllerDelegate> 
... 
```

在 MainViewController.m

```
- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller
{
[self dismissViewControllerAnimated:YES completion:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"showAlternate"]) {
    [[segue destinationViewController] setDelegate:self];
}
} 
```

顺便说一句，这是一个选项卡式应用程序，所以我认为这可能与它有关。任何建议，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:40:43.340

试试这个：

```
- (IBAction)done:(id)sender
{
   // an NSLog statement that is here is logging properly
   [self.delegate performSelector:@selector(flipsideViewControllerDidFinish:)
            withObject:self
            afterDelay:0.0];
} 
```

有时，必须在运行循环的下一次迭代中执行解除。这就是`performSelector`上面的语句完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:14:02.383

我发现了问题。如果您查看问题代码，在 MainViewController.m 下，您必须在情节提要文件和代码中设置 segue 标识符：

```
if ([[segue identifier] isEqualToString:@"showAlternate"]) {
[[segue destinationViewController] setDelegate:self];
} 
```

谢谢你，塞尔吉奥，你的帮助。

# ruby-on-rails - 活动管理员显示 html 代码

> ID：14444154
> 
> 赞同：0
> 
> 时间：2013-01-21T17:34:40.427
> 
> 标签：ruby-on-rails, ruby, activeadmin

我正在使用 ejholmes Active_admin 编辑器，它工作正常，但在我的活动管理索引中，我看到带有标签的 html 代码，而不是正确的输出。我确实在我的视图中使用了 .html_safe 但这是我的活跃管理员的 posts.rb

```
...
index.do
    column :id
    column "Titolo", :title
    column "Corpo news", :body
    column "Creato il", :created_at
    column "Modificato il", :updated_at
    column :link
    column "Link Immagine", :image_url
    bool_column :attivo
    default_actions 
end
... 
```

我想呈现我的“公司新闻”栏目。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:45:53.650

我想你需要使用方法 .to_html 正如你在[源代码](https://github.com/ejholmes/active_admin_editor/blob/master/app/inputs/html_editor_input.rb)中看到的 那样所以在你需要调用的视图中

> body.to_html

# javascript - 将 1-100 转换为另一个值集

> ID：14444156
> 
> 赞同：0
> 
> 时间：2013-01-21T17:34:42.063
> 
> 标签：javascript, math, numbers

使用 JavaScript，我希望将 1-100 之间的值转换为 1000-150000 之间设置的相应值。最好的方法是什么？比较和乘/除数组值，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T17:38:59.753

假设您想在值集 {1000-150000} 中获取 42 的值，您需要使用以下公式：

```
((150000-1000)/100*42)+1000 
```

因此简化为：

```
f(x) = (1490*x)+1000 
```

所以`f(0) = 1000`，`f(100) = 150000`和`f(50) = 75500`。

使用 javascript：

```
function getCorrespondingValue( myValue){
     return (1490 * myValue) + 1000;
} 
```

# php - 锁定表如何工作？

> ID：14444164
> 
> 赞同：1
> 
> 时间：2013-01-21T17:35:07.507
> 
> 标签：php, mysql, pdo

我有一个`php`脚本，将“同时”多次请求我在表中也有一个字段，让我们将其`persons`称为活动/非活动标志。我希望在脚本的第一个实例运行时将该字段设置为非活动状态，以便其余实例在检查该字段时会死掉。有人可以为此提供解决方案吗？如何确保此脚本只运行一次？

`PHP, PDO, MySQL`

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:42:43.897

您的脚本应该使用锁定读取来获取事务中的当前标志，例如[`SELECT ... FOR UPDATE`](http://dev.mysql.com/doc/en/innodb-locking-reads.html)：

```
$dbh = new PDO("mysql:dbname=$dbname", $username, $password);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);

$dbh->beginTransaction();

// using SELECT ... FOR UPDATE, MySQL will hold all other connections
// at this point until the lock is released
$qry = $dbh->query('SELECT persons FROM my_table WHERE ... FOR UPDATE');

if ($qry->fetchColumn() == 'active') {
  $dbh->query('UPDATE my_table SET persons = "inactive" WHERE ...');
  $dbh->commit();  // releases lock so others can see they are inactive

  // we are the only active connection
} else {
  $dbh->rollBack();
  // we are inactive
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:43:54.963

您可以使用 MySQL 自己的“命名”锁定函数，而无需锁定表：[http ://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_get-lock](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_get-lock)

例如尝试`get_lock('got here first', 0)`使用 0 超时。如果您获得了锁，那么您首先进入大门，并且任何后续请求都不会获得锁并立即中止。

但是，要小心这些东西。如果您自己不清理并且获得锁定的客户端异常终止，则锁定将不会被释放，并且您的“需要锁定”系统将陷入困境，直到您手动清除锁定。

# python - django-modeltranslation：如何知道值是否以给定语言定义？

> ID：14444167
> 
> 赞同：1
> 
> 时间：2013-01-21T17:35:17.373
> 
> 标签：python, django, django-modeltranslation

我正在使用[django-modeltranslation](https://github.com/deschler/django-modeltranslation)翻译我的内容。

如果未为语言设置翻译字段的值，则它会自动采用默认语言的值。

但是，有没有办法知道给定语言的值是否已设置？

例如，如果`title_fr`未设置，`obj.title_fr`将返回 的值`obj.title`。如何知道是否定义了法语版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:44:01.217

您可以使用 访问原始字段值`instance.__dict__['title_fr']`。

但是，您可能想要自定义`fallback_values`选项：

[https://django-modeltranslation.readthedocs.org/en/latest/usage.html#fallback-values](https://django-modeltranslation.readthedocs.org/en/latest/usage.html#fallback-values)

# c# - 使用 C# 从我的 Java 证书中获取公钥

> ID：14444172
> 
> 赞同：14
> 
> 时间：2013-01-21T17:35:32.850
> 
> 标签：c#, x509certificate

没有`BounceyCastle`.

我有我的证书，`GetPublicKey()`价值不是房子的 Java 方面需要的。

证书如果是`X509Certificate2`对象，使用 DSA 加密。使用 makecert 创建

`Convert.ToBase64String(cert.GetPublicKey())`返回

```
AoGAeaKLPS4ktxULg3YQL0ePphF08tKsddZtv3SDERa8b8go5h3AxmWjuDd8y9dIzZFe8KDjY9Lg
JU4JOA27snO3fCsPAVkmJ0O2pbxn+wzT7oij2FOLcCAjnFNNsoaWrtMv+I4XXl18DyDQLFkZiPx9
2UyuDzoQTGxgCrPccQPjUgY= 
```

`Convert.ToBase64String(cert.RawData)`返回

```
MIICxjCCAoagAwIBAgIQbdIpaaU9rZdA+wJKA+mUfDAJBgcqhkjOOAQDMBYxFDASBgNVBAMTC0RT
QSBSb290IENBMB4XDTEzMDExMDE3MTAzNVoXDTM5MTIzMTIzNTk1OVowFDESMBAGA1UEAxMJVXNl
ciBOYW1lMIIBtzCCASwGByqGSM44BAEwggEfAoGBALWn4Iyvn7LFkV9ULoZtwJ8J1c+ibsbhjPiw
+xUgRW2LAZV2/Lv89W1jCprNkf87tN/ogMT/1VSIOo7ff/tqVRTWPVJ1ZMrR9VOnF2k/Sorg8Cmr
sAClsSWrACKIwK2XKJGWTU4oMLxvYcu85+yQ4nWLofgA/+WARrJ/rk2aUSZ3AhUAlqPLNh6JZkpD
G/OXKzhsZFUiDrkCgYEAoICjHltWOgN8/2uyAaMTNrBuJfi/HM9AWe5B8m9HDfl1K6Qx2Ni6tbYP
uFtvHdGnoqqn46l7eY+xjpi5GEydvkPtAQKmTDGcSh6vtnTeNV15Hafg5pXUKw1OisIr/bpx/KIk
cgCtSo6qC5IhDzeZXnfJYcE+8U+O6hEr5dwByN4DgYQAAoGAeaKLPS4ktxULg3YQL0ePphF08tKs
ddZtv3SDERa8b8go5h3AxmWjuDd8y9dIzZFe8KDjY9LgJU4JOA27snO3fCsPAVkmJ0O2pbxn+wzT
7oij2FOLcCAjnFNNsoaWrtMv+I4XXl18DyDQLFkZiPx92UyuDzoQTGxgCrPccQPjUgajWTBXMAwG
A1UdEwEB/wQCMAAwRwYDVR0BBEAwPoAQmhMLkJ/cPXGitvGMB81tZaEYMBYxFDASBgNVBAMTC0RT
QSBSb290IENBghDCpMJ75zgZokJVlZmNq/LTMAkGByqGSM44BAMDLwAwLAIUYUALM9WhgwzRMj1y
MSdoparmYvICFFxLgFr2ow3NGTkqWvHIXtjO9R0G 
```

但是，当我的 Java 对应方使用相同的证书文件获取公钥时，得到

```
$ cat david-509.cer | openssl x509 -pubkey
-----BEGIN PUBLIC KEY-----
MIIBtzCCASwGByqGSM44BAEwggEfAoGBALWn4Iyvn7LFkV9ULoZtwJ8J1c+ibsbh
jPiw+xUgRW2LAZV2/Lv89W1jCprNkf87tN/ogMT/1VSIOo7ff/tqVRTWPVJ1ZMrR
9VOnF2k/Sorg8CmrsAClsSWrACKIwK2XKJGWTU4oMLxvYcu85+yQ4nWLofgA/+WA
RrJ/rk2aUSZ3AhUAlqPLNh6JZkpDG/OXKzhsZFUiDrkCgYEAoICjHltWOgN8/2uy
AaMTNrBuJfi/HM9AWe5B8m9HDfl1K6Qx2Ni6tbYPuFtvHdGnoqqn46l7eY+xjpi5
GEydvkPtAQKmTDGcSh6vtnTeNV15Hafg5pXUKw1OisIr/bpx/KIkcgCtSo6qC5Ih
DzeZXnfJYcE+8U+O6hEr5dwByN4DgYQAAoGAeaKLPS4ktxULg3YQL0ePphF08tKs
ddZtv3SDERa8b8go5h3AxmWjuDd8y9dIzZFe8KDjY9LgJU4JOA27snO3fCsPAVkm
J0O2pbxn+wzT7oij2FOLcCAjnFNNsoaWrtMv+I4XXl18DyDQLFkZiPx92UyuDzoQ
TGxgCrPccQPjUgY=
-----END PUBLIC KEY----- 
```

因此我的问题。如何从我的证书中获取此值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-04T13:05:23.907

您应该使用`cert.PublicKey.EncodedKeyValue`而不是`cert.GetPublicKey()`.

[EncodedKeyValue](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.publickey.encodedkeyvalue(v=vs.110).aspx)提供 ASN1 编码值，而不是作为[GetPublicKey()](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate.getpublickey(v=vs.110).aspx)的原始密钥数据。

所以你可以使用这个代码

```
void ExportPublicKey(X509Certificate2 cert, string filePath)
{
    byte[] encodedPublicKey = cert.PublicKey.EncodedKeyValue.RawData;
    File.WriteAllLines(filePath, new[] {
        "-----BEGIN PUBLIC KEY-----",
        Convert.ToBase64String(encodedPublicKey, Base64FormattingOptions.InsertLineBreaks),
        "-----END PUBLIC KEY-----",
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T10:22:47.573

见[伊恩博伊德的回答](https://stackoverflow.com/questions/1193529/how-to-store-retreieve-rsa-public-private-key)。它只是提供了您正在寻找的有关编码的所有答案。请注意，它与 RSA 而不是 DSA 有关，但它为您提供了有关 PEM/DER/ASN.1 编码的所有信息，这是您的问题。

# php - Preg_match jquery 脚本

> ID：14444173
> 
> 赞同：0
> 
> 时间：2013-01-21T17:35:34.997
> 
> 标签：php, jquery, preg-match

我想从这个字符串中得到“bla bla bla”

```
jQuery('#showcasecities').html("bla bla bla"); 
```

我试过了

```
preg_match_all("/jQuery(\'#showcasecities\').html(\"([^`]*?)\");/", $string, $matches); 
```

没有运气=(请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:47:12.613

您需要转义括号。相反，试试这个

```
preg_match_all("/jQuery\(\'#showcasecities\'\).html\((\"(.*?)\")\);/", $string, $matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:47:22.483

试试这个：

```
preg_match_all("#jQuery\('\#showcasecities'\)\.html\((.*)\)#",$string,$matches); 
```

# javascript - 修改指定li元素JS的父级

> ID：14444176
> 
> 赞同：1
> 
> 时间：2013-01-21T17:35:45.113
> 
> 标签：javascript, jquery, dom

我不熟悉使用“this”，但如果我理解正确，我只能在另一个定义的函数中使用它。

在这种情况下，我根据它的 a href 选择一个 li 项目，如果它符合条件，我需要添加一个类。我觉得我很接近但缺少一些小东西，'url [1]'来自分裂。

```
if ($('#Navbar li a:contains(' + url[1] + ')').attr('href')) {
    function () {
        $(this).parent().addClass('active');
    }
} 
```

编辑：我正在循环基于我的 Li 对象并比较 href 以寻找匹配项。感谢大家帮助我度过这个难关。我对现在有了更好的理解`this`：

```
 $('#Navbar li a').each(function () {
     if ($(this).attr('href')==url[1]) {
            $(this).parent().addClass('active');
         }
     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:39:47.240

`this`指使用它的上下文。所以`this`是指您创建的匿名函数。解决您的问题的更好方法是：

```
var nav_item = $('Navbar li a:contains(' + url[1] + ')');

if (nav_item.attr('href')) {
    nav_item.parent().addClass('active');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:40:15.610

$(this) 不指向您的目标元素（我认为没有看到您的完整 html 代码）。试试下面的代码：

```
var $a =$('Navbar li a:contains(' + url[1] + ')');
if ($a.attr('href')) {
        $a.parent().addClass('active');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T18:18:50.283

```
 $('#Navbar li a').each(function () {
 if ($(this).attr('href')==url[1]) {
        $(this).parent().addClass('active');
     }
 }); 
```

循环是诀窍。谢谢：@roasted @brenjt @Maverick

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T17:37:54.650

简单的！:)

```
if ($('Navbar li a:contains(' + url[1] + ')').attr('href')) {
    var that=this;
    function () {
        //your condition checking
        $(that).parent().addClass('active');
    }
} 
```

更新:: 上面的代码是错误的

你也可以这样做...

```
$('Navbar li a:contains(' + url[1] + ')').on('click',function(){
    if($(this).attr('href')){
        if(yourCOndition){
            $(this).parent().addClass('active');
        }
    }
}); 
```

# c# - 查找缺少应用程序的哪些依赖项

> ID：14444178
> 
> 赞同：1
> 
> 时间：2013-01-21T17:35:57.157
> 
> 标签：c#

如何验证应用程序的所有依赖项都位于文件夹中（而不是 GAC 中）？

例如，我们有一个应用程序 A，它有四个依赖项：B、C、D、E。

构建后我们有一个文件夹：

```
\ForDeployment\A.exe
\ForDeployment\B.dll
\ForDeployment\E.dll 
```

由于某种原因，文件夹中没有两个程序集（C 和 D）。

如何确定文件夹中缺少哪些程序集？我们正在寻找可以在每次构建时启动的代码或命令行工具。

编辑：

更改“复制本地”设置不相关，因为：

*   我有一百个解决方案。任何开发人员随时都可能将此设置更改为错误的设置（或使用“Copy local”="false" 添加新的依赖项）。我正在寻找的工具也应该可以解决这个问题

*   位于 GAC 中的依赖项永远不会被复制到结果文件夹（在 VS2010 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:40:47.277

只需将**Copy Local**设置`true`为相关依赖项即可。这样您就可以确保在本地拥有该程序集的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:40:05.820

您可以执行以下操作：

```
if(!FileExist)
     Output message "Missing File" 
```

每次启动程序时，只需对每个依赖文件执行此操作即可。但我只是按照 Gabe 在评论中的建议，在所有依赖项上将 Copy Local 设置为 true。

# php - PHP：如何使用嵌套的 xpath 元素解析 XML

> ID：14444180
> 
> 赞同：0
> 
> 时间：2013-01-21T17:35:57.810
> 
> 标签：php, parsing, xpath, simplexml

这是我正在处理的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:noo="http://www.myscheme.com/schema">
    <channel>
        <item>
            <title>A Simple Title</title>
            <noo:subcategory>the sub category</noo:subcategory>
            <noo:relatedInfos>
                <noo:teams>
                    <noo:team id="3">New York</noo:team>
                    <noo:team id="4">Las Vegas</noo:team>
                </noo:teams>
            </noo:relatedInfos>
        </item>
    </channel>
</rss> 
```

我正在做这个 php 代码来获得两个“团队”，但它不起作用（$xml 有以前的内容）：

```
$xml_datas = simplexml_load_string($xml);

foreach($xml_datas->channel->item as $item){                      
    $noo = $item->children('noo');
    echo $noo->team;
} 
```

你知道为什么它不工作吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:02:14.323

“noo” 只是该名称空间的本地别名，`->children()`方法（和大多数 XML 处理函数）想知道它的实际全局标识符，即`xmlns`属性中的 URI。

您需要指定命名空间的完整标识符（即`->children('http://www.myscheme.com/schema')`）或设置可选的第二个参数来告诉 SimpleXML 查找前缀（`->children('noo', true)`。第二个可能更具可读性，但如果未来的文档具有相同的模式，它将中断，但给命名空间一个不同的本地别名。

此外，`team`节点并不直接在`item`节点下，因此您需要进一步遍历以获取它们：

```
// Give the namespace a readable name that won't change
define('NS_NOO', 'http://www.myscheme.com/schema');

$xml_datas = simplexml_load_string($xml);

foreach($xml_datas->channel->item as $item){                      
    $teams = $item->children(NS_NOO)->relatedInfo->teams;
    echo $teams->team[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:51:03.293

看看这是否有帮助：

```
<?php // RAY_temp_userco.php
error_reporting(E_ALL);

$xml = <<<ENDXML
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:noo="http://www.myscheme.com/schema">
    <channel>
        <item>
            <title>A Simple Title</title>
            <noo:subcategory>the sub category</noo:subcategory>
            <noo:relatedInfos>
                <noo:teams>
                    <noo:team id="3">New York</noo:team>
                    <noo:team id="4">Las Vegas</noo:team>
                </noo:teams>
            </noo:relatedInfos>
        </item>
    </channel>
</rss>
ENDXML;

$obj = simplexml_load_string($xml);

$ns = $obj->getNamespaces(TRUE);

foreach($obj->channel->item as $item){
    $noo = $item->children($ns['noo']);
    var_dump($noo);
} 
```

# javascript - jQuery按输入名称选择

> ID：14444181
> 
> 赞同：8
> 
> 时间：2013-01-21T17:36:09.723
> 
> 标签：javascript, jquery

我有这个输入：

```
<tr><td class="forms">Price:</td><td><input type="text" name="price" size="30"/></td></tr> 
```

我怎样才能调用这个输入？

示例：使用此代码，我调用 id：

```
$("#numberclasses").change(function() { 
```

我用这个给全班打电话：

```
$(".numberclasses").change(function() { 
```

但是我怎么能叫到这个名字呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T17:37:19.433

利用：

```
$('input[name="price"]').change(function() { 
```

查看[jQuery 选择器文档](http://api.jquery.com/category/selectors/)了解更多信息。

# mongodb - MongoDB replSet 需要永远启动

> ID：14444185
> 
> 赞同：2
> 
> 时间：2013-01-21T17:36:28.090
> 
> 标签：mongodb, replication

我正在我的本地主机上设置一个副本集，只是为了练习使用必要的命令。我在家里和工作中都这样做。在家里，该`rs.initiate()`命令大约需要三秒钟才能运行，大约需要两到三分钟`rs.status()`才能给我所有状态为`PRIMARY`或`SECONDARY`。这和我预期的差不多。

但是当我在工作中这样做时，`rs.initiate()`需要将近 7 分钟才能在 mongo shell 中返回我的提示，然后再过 10 分钟，状态全部为`PRIMARY`or `SECONDARY`。同时，我发起连接的那个是 in `SECONDARY`，`PRIMARY`另外两个是`RECOVERING`。他们只是坐在那里，，`RECOVERING`十分钟。

在`rs.initiate()`命令运行时，`mongod`我连接的（端口 10001）不断吐出有关“分配数据文件”的内容，然后是“完成分配数据文件”，然后是“分配新数据文件”，依此类推，直到它有十几个那些文件。另外两个一直坐在那里，“replSet 无法从自己或任何种子 (EMPTYCONFIG) 获取 local.system.replset 配置”。

当我检查`rs.status()`时，两个辅助节点继续接受和删除连接，并像第一步中的主节点一样分配数据文件。

那么它应该花这么长时间吗？而且，如果是这样，为什么我家的机器可以在几秒钟内完成？唯一的区别是我在家里运行的是 32 位而不是 64 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:11:13.170

您工作环境的磁盘上有多少可用磁盘空间？MongoDB 默认为其 oplog（“本地”数据库）分配 5% 的可用磁盘空间。根据您提供的信息，我的猜测是您的工作机器上的可用磁盘空间比家用机器大得多。

如果您等到 rs.initiate() 完成（即您看到 PRIMARY），然后再尝试启动其他节点，我想您会看到您期望的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T18:35:12.540

如果您遇到此问题，请尝试重新启动 mongodb。我用新鲜的数据库遇到了这个问题。我通过重新启动mongodb解决了它。

# javascript - Javascript 和 Jquery - IE 阻止它运行 (Galleria)

> ID：14444188
> 
> 赞同：0
> 
> 时间：2013-01-21T17:36:30.907
> 
> 标签：javascript, jquery, internet-explorer, galleria

我已经在我的标题中链接到 google 的 Jquery 库，以及 Galleria Javascript 文件的本地副本 - 正如 Galleria 网站上的说明所说的那样。

该代码在 Chrome 中完美运行。但是，当尝试在 IE9 中查看该站点时，我遇到了“Internet Explorer 限制此网页运行脚本或 ActiveX 控件”。这会阻止（没有用户输入）Javascript/Jquery/Galleria 的东西起作用；它也被阻止显示嵌入的 Youtube 视频。

我错过了什么 - 很多其他网站都使用这些功能，我没有让 IE 给出这个消息。我需要添加或更改什么？

我正在从我的 PC 上查看该网站 - 它目前存储在本地。干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:40:03.277

发生这种情况是因为您在本地运行您的网站。您可以确定，一旦您将其上传到网络服务器，就不会发生这种情况。

您还可以运行本地网络服务器。我可以推荐 WAMP：

[http://www.wampserver.com/en/](http://www.wampserver.com/en/)

# .htaccess - 在 Linux 和 Windows 上重写 URL？

> ID：14444189
> 
> 赞同：0
> 
> 时间：2013-01-21T17:36:34.003
> 
> 标签：.htaccess

我正在对一些软件进行更改。

我想做的是更改部分网址。在我网站的所有网址中，都有“index.php”。示例：“domain.com/index.php?action=area”。我想将“index.php”更改为“view”。示例：“domain.com/view?action=area”。

据我了解，这可以通过 htaccess 进行更改。虽然，htaccess 仅适用于 linux，对吗？窗户呢？linux和windows如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:40:21.223

你有一个 Apache 模块的**mod_rewrite**。只要您使用 Apache，它就可以在 Linux 和 Windows 下运行（在 Windows 上，它可能被称为[“Wamp”](http://en.wikipedia.org/wiki/WAMP)，尽管 Apache 也可以自行安装）。

如果您使用的是 IIS，则有一个[URL 重写](http://www.iis.net/downloads/microsoft/url-rewrite)模块，其行为类似于 Apache 的 mod_rewrite。重写引擎的语法和有时行为与 Apache 中的并不完全相同，因此对于简单的事情应该没问题。

您还可以尝试重新实现 Apache 重写规则以使用 IIS 的 webconfig。有[一些工具可以做到这一点](http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/translate-htaccess-content-to-iis-webconfig)。

有问题的 mod_rewrite 规则如下所示：

```
RewriteEngine On
RewriteRule ^/?view$ /index.php [L] 
```

很简单。

# c# - 使用 LINQ 进行条件连接

> ID：14444194
> 
> 赞同：4
> 
> 时间：2013-01-21T17:36:43.503
> 
> 标签：c#, linq

我想创建一个相当于`Left Join`

我的表是这样设置的：

```
Recipe
    RecipeID
    ...

Instruction
    RecipeID
    StepID
    SomeFlag
    ... 
```

等效的 SQL：

```
SELECT *
FROM Recipe r
LEFT JOIN Instruction i
    ON r.RecipeID = i.RecipeID
    AND SomeFlag > 0 
```

这是我到目前为止所拥有的：

```
var tmp = db.Recipe
    .GroupJoin(
        db.Instruction,
        r => r.RecipeID,
        i => i.RecipeID,
        (r, i) => new {r, i},
        ???); 
```

首先，`GroupJoin`这种类型的操作是正确的选择吗？据我了解，Join 相当于 SQL 的“Inner Join”，GroupJoin 相当于“Left Join”。其次，获得我想要的结果的正确语法是什么？我已经搜索了一段时间，似乎无法**使用扩展方法**找到合适的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:41:14.243

不要忘记阅读来自（`GroupJoin`：MSDN [http://msdn.microsoft.com/en-us/library/bb535047.aspx](http://msdn.microsoft.com/en-us/library/bb535047.aspx)和`Join`MSDN [http://msdn.microsoft.com/fr-fr/library/bb534675的帮助） .aspx](http://msdn.microsoft.com/fr-fr/library/bb534675.aspx) )

`GroupJoin`and的最后一个参数`Join`是可选的（通过重载）并且通常不使用。它是一个允许您指定如何与 比较`r.RecipeID`的功能`i.RecipeID`。由于`RecipeID`必须是整数，所以使用默认比较器是一个不错的选择。所以让它：

```
var tmp = db.Recipe
    .Join(db.Instruction,
          r => r.RecipeID,
          i => i.RecipeID,
          (r, i) => new {r, i}); 
```

现在您想要的是删除所有具有`SomeFlag > 0`. 为什么在加入之前不这样做呢？像这样：

```
var tmp = db.Recipe
    .Join(db.Instruction.Where(instruction => instruction.SomeFlag > 0),
          r => r.RecipeID,
          i => i.RecipeID,
          (r, i) => new {r, i}); 
```

### 更新

@usr 完美地评论说`Join`执行 INNER JOIN。

您可能已经说过，LINQ 没有用于 INNER、OUTER、LEFT、RIGHT 连接的不同方法。要了解特定 SQL 连接的等效 LINQ，您可以在 MSDN ( [http://msdn.microsoft.com/en-us/library/vstudio/bb397676.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb397676.aspx) ) 上找到帮助。

```
var tmp = from recipe in Recipes
          join instruction in
              from instruction in Instructions
              where instruction.SomeFlag > 0
              select instruction
          on recipe.RecipeID equals instruction.RecipeID into gj
          from instruction in gj.DefaultIfEmpty()
          select new
          {
              recipe,
              instruction
          }; 
```

使用扩展方法有点丑陋的解决方案：

```
var tmp = Recipes.GroupJoin(Instructions.Where(instruction => instruction.SomeFlag > 0),
                            recipe => recipe.RecipeID,
                            instruction => instruction.RecipeID,
                            (recipe, gj) => new { recipe, gj })
                 .SelectMany(@t => @t.gj.DefaultIfEmpty(), 
                             (@t, instruction) => new
                             {
                                 @t.recipe,
                                 instruction
                             }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:01:25.070

如果我不理解您，请告诉我，但是此扩展方法返回的结果与您在 sql.xml 中获得的结果相同。

```
public static IEnumerable<ResultType> GetLeftJoinWith(this IEnumerable<Recipe>, IEnumerable<Instructions> ins)
{
    var filteredInstructions = ins.Where(x => x.SomeFlag > 0);

    var res = from r in rec
              join tmpIns in filteredInstructions on r.RecipeID equals t.RecipeID into instructions
              from instruction in instructions.DefaultIfEmpty()
              select new { r, instruction };

   return res;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-07T13:17:55.280

试试这个

```
var model = db.Recipe
            .GroupJoin(db.Instructions.Where(instruction => instruction.SomeFlag > 0),r => r.RecipeID,i => i.RecipeID, (r, i) => new { Recipe = r, Instructions = i })
            .SelectMany(t => t.Instructions.DefaultIfEmpty(),(t, Instructions) => new
            {
                 Recipe = t.Recipe,
                 Instructions = Instructions
            }); 
```

# visual-studio-2010 - 在 MonoAndroid 项目中调试 MVVMCross PCL (VS2010)

> ID：14444196
> 
> 赞同：6
> 
> 时间：2013-01-21T17:36:47.980
> 
> 标签：visual-studio-2010, debugging, xamarin.android, mvvmcross, portable-class-library

我正在使用 MvvmCross 框架开发一些应用程序，在 VS2010 中运行“Droid”项目时，我在调试 PCL 时遇到了一些问题。

我已经从[GitHub/MvvmCross](https://github.com/slodge/MvvmCross)下载了示例应用程序，并尝试通过 Droid 项目调试 PCL。当应用程序部署在设备（模拟器或物理）中时，**PCL 代码内不会遇到断点。如果我使用 WP7 项目，我可以通过 PCL 代码进行调试。**

我已经安装了 VS2010 和 VS2010。我已按照[http://slodge.blogspot.co.uk/2012/09/mvvmcross-vnext-portable-class.html](http://slodge.blogspot.co.uk/2012/09/mvvmcross-vnext-portable-class.html)和[http://jpobst.blogspot.co.uk/2012/04/中的所有说明进行操作mono-for-android-portable-libraries-in.html](http://jpobst.blogspot.co.uk/2012/04/mono-for-android-portable-libraries-in.html)。

我搜索了与此问题相关的帖子，但没有发现与 VS2010 中的 PCL 调试相关的内容。

我知道这是一个相当模糊的帖子，但我只是想找到其他有同样问题的人，希望能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:44:08.893

根据我的经验，MonoDroid 调试器经常中断——而且 PCL 支持显然也充其量是“新生的”。

开发人员可以为您提供“确保选择快速部署和共享（调试）SDK”等建议，但基本上您需要向 Xamarin 寻求修复。

我的建议 - 通过他们的论坛、bugzilla 和您拥有的任何客户支持合同记录和追查 Xamarin 的问题。

在没有 MonoDroid 调试器的同时，它会回到 WinRT 和 WP（以及 Mac 上的 MonoTouch）来调试你的 PCL——或者它会回到像添加跟踪这样的“老 skool”技术

# .net - 更新表单的新实例而不是之前的实例

> ID：14444197
> 
> 赞同：0
> 
> 时间：2013-01-21T17:36:50.243
> 
> 标签：.net, winforms, refactoring

所以我正在为其他人编写调度程序类型程序的代码。他创建了一个计时器，每 10 秒运行一次，以检查时间表列表，看看是否需要运行任何时间表。我修改为更新 Schedule.button.forecolor 取决于是否有时间表或当前是否正在运行（分别为黄色和绿色）。计时器的代码在日程表文件中

问题是在项目启动时调用计时器，这确保用户不必实际单击调度程序表单来实际启动计时器。但是当这个定时器在启动时被调用，因为定时器在表单代码上，所以制作了这个表单的一个实例来让定时器启动。当然，稍后当页面被访问时，它是一个不同的实例，所以按钮不会更新。

我该如何解决这个问题？我应该重构旧代码以将计时器实例分隔在不同的文件中，然后调用它吗？或者有没有更好的方法在启动时启动计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:46:14.717

为了[单一职责](http://en.wikipedia.org/wiki/Single_responsibility_principle)，我建议将计时器代码与所有 UI 分开。您可以在适当的时间（在计时器类中）引发自定义 CheckForUpdates 事件，该事件会在每个需要按钮更新的掩码/实例中被捕获。

这也使您的代码更具可扩展性。

**编辑**：您的项目中是否也隐含了一个数据库？在我看来，计时器每十秒检查一次，是否有任何任务要运行。如果这个检查是服务器端的，效率会更高。每次必须运行任务时，服务器都会向客户端发送一条消息。

# html - Joomla 3 导航不正确.current 类

> ID：14444201
> 
> 赞同：0
> 
> 时间：2013-01-21T17:37:01.377
> 
> 标签：html, class, joomla, navigation, joomla3.0

我是网络开发人员，我在导航栏上发现了一个奇怪的问题。当我尝试切换另一个页面时，`.current`类停留在主页上`<li>`，但其他任何东西都运行良好。我复制了 joomla 文件夹中的所有 mod_menu 核心文件，但没有解决问题。

有什么帮助吗？

**截屏**

![在此处输入图像描述](../Images/c9ff3447b79cdc5cedd1f16167f2ddba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:40:03.713

如果第二页是第一页的子页，这是正常行为。

# objective-c - 动态转发：抑制 Incomplete Implementation 警告

> ID：14444203
> 
> 赞同：45
> 
> 时间：2013-01-21T17:37:05.483
> 
> 标签：objective-c, xcode, llvm, compiler-warnings, suppress-warnings

我有一个公开一些方法的类，其实现由内部对象提供。

我正在使用前向调用在运行时将方法调用分派给内部对象，但是 XCode 抱怨，因为它找不到已声明方法的实现。

我在 SO 上发现了一些其他类似的问题，但所有这些问题都通过设计更改得到了解决。

我不想在这里讨论设计，但如果有人对此有什么建议，我有一个关于代码审查的[开放式问题](https://codereview.stackexchange.com/questions/20749/code-review-of-forward-invocation)，它更适合这种讨论。

我的问题是这里是否存在关闭`Incomplete Implementation`XCode 中警告的方法。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-21T18:02:20.080

您可以通过添加来禁止`Incomplete Implementation`警告

```
 #pragma clang diagnostic ignored "-Wincomplete-implementation" 
```

就在上面`@implementation`

希望这可以帮助

**编辑**

在评论中被告知这对某人不起作用并找出原因是因为这是他们得到的不同警告之后，我已经做了一些游戏并且能够解决那里的问题，所以我想我会更新此答案以包括他们的答案以及`GCC`忽略。因此，对于`@Tony`以下问题应该有效

```
 #pragma clang diagnostic ignored "-Wprotocol" 
```

对于任何想知道`GCC`编译器版本的人来说

```
 #pragma GCC diagnostic ignored "-Wprotocol"

  #pragma GCC diagnostic ignored "-Wincomplete-implementation" 
```

我还要指出，所有这些`diagnotstic ignores`也可以通过在每个文件的基础上指定设置来完成，方法是转到`XCODE Project >> Target >> Build Phases >> Compile Sources`并添加一个编译器标志，这样你就可以添加`-Wprotocol`或者`Wincomplete-implementation`你需要的任何编译器标志。

希望此更新对所有人有所帮助，如果不再需要，我将更新我的答案以包括在内。

**编辑 2**

我对此进行了更多的挖掘，并偶然发现了[Clang Compliler User's Manual](http://clang.llvm.org/docs/UsersManual.html#diagnostics_pragmas)，所以我认为这对在该领域仍有问题的任何人都会很有趣和有帮助。

我还找到了另一种可以使用它们的方法`#pragma diagnostic ignores`，那就是你可以`push`和`pop`它们，所以如果你只想忽略文件的特定部分而不是全部，那么你可以执行以下操作

```
 #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Wmultichar"

    // And pop the warning is gone.
    char b = 'fa';

    #pragma clang diagnostic pop 
```

请记住，所有这些`#pragma`编译忽略也可以使用，`GCC`因此上述内容将

```
 #pragma GCC diagnostic push
    #pragma GCC diagnostic ignored "-Wmultichar"

    // And pop the warning is gone.
    char b = 'fa';

    #pragma GCC diagnostic pop 
```

`push`和`pop`似乎适用于`diagnostic ignores`我迄今为止尝试过的所有方法。

另一个是

```
 #pragma clang diagnostic ignored "UnresolvedMessage"
    #pragma GCC diagnostic ignored "UnresolvedMessage" 
```

用于抑制未使用变量的一种是

```
 #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Wunused-variable"
        NSString *myUnusedVariable;
    #pragma clang diagnostic pop 
```

和 GCC 版本是

```
 #pragma GCC diagnostic push
    #pragma GCC diagnostic ignored "-Wunused-variable"
        NSString *myUnusedVariable;
    #pragma GCC diagnostic pop 
```

还有一些忽略来自unavailableInDeploymentTarget 的警告

```
 #pragma clang diagnostic push
    #pragma ide diagnostic ignored "UnavailableInDeploymentTarget"
        leftEdge.barTintColor = rightEdge.barTintColor = self.toolbar.barTintColor;
    #pragma clang diagnostic pop 
```

和 performSelector 泄漏

```
 #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [target performSelector:cancelAction withObject:origin];
    #pragma clang diagnostic pop 
```

和弃用的声明

```
 #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Wdeprecated-declarations"
        button = [[UIBarButtonItem alloc] initWithTitle:buttonTitle style:UIBarButtonItemStyleBordered target:self action:@selector(customButtonPressed:)];
    #pragma clang diagnostic pop 
```

谢谢`DanSkeel`你可以在[这里找到整个列表](http://fuckingclangwarnings.com/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-21T17:52:12.903

您可以在类类别接口中声明方法：

```
@interface MyClass (ForwardedMethods)

- (void)doSomething;

@end 
```

（没有该类别的实现）。那么Xcode就不会再抱怨“不完整的实现”了。

# vb.net - 检查 VB.net 的 DataTable 中是否存在值的最简单/最快的方法？

> ID：14444207
> 
> 赞同：13
> 
> 时间：2013-01-21T17:37:13.093
> 
> 标签：vb.net, datatable

我有一个`DataTable`（目前有多个列，但如果它更容易，我可以抓住一列）。我想检查一个`String`值是否存在于`DataTable`. （我做了很多次，所以我希望它相当快。）

有什么好方法可以做到这一点？`DataTable`每次遍历行似乎是一种不好的方式。我可以将列转换为平面`List/Array`格式并使用内置函数吗？像`myStrList.Contains("value")`什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-21T17:52:58.187

您可以使用`select`来查找该值是否存在。如果是这样，它会返回行，否则不会。这里有一些示例代码可以帮助您。

```
Dim foundRow() As DataRow
foundRow = dt.Select("SalesCategory='HP'") 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T10:20:05.833

如果您的数据`DataTable`不经常更改，并且您搜索了`DataTable`多次，并且您`DataTable`包含许多行，那么为数据构建自己的索引可能会快得多。

最简单的方法是按键列对数据进行排序，这样您就可以对排序列表进行二进制搜索。例如，您可以像这样构建索引：

```
Private Function BuildIndex(table As DataTable, keyColumnIndex As Integer) As List(Of String)
    Dim index As New List(Of String)(table.Rows.Count)
    For Each row As DataRow in table.Rows
        index.Add(row(keyColumnIndex))
    Next
    index.Sort()
    Return index
End Function 
```

然后，您可以使用二进制搜索快速检查索引中是否存在值，如下所示：

```
Private Function ItemExists(index As List(Of String), key As String) As Boolean
    Dim index As Integer = index.BinarySearch(key)
    If index >= 0 Then
        Return True
    Else
        Return False
    End If
End Function 
```

你也可以用一个简单的字符串数组来做同样的事情。或者，您可以使用一个`Dictionary`对象（它是一个哈希表的实现）来构建您的哈希索引`DataTable`，例如：

```
Private Function BuildIndex(table As DataTable, keyColumnIndex As Integer) As Dictionary(Of String, DataRow)
    Dim index As New Dictionary(Of String, DataRow)(table.Rows.Count)
    For Each row As DataRow in table.Rows
        index(row(keyColumnIndex)) = row
    Next
    Return index
End Function 
```

然后，您可以获得`DataRow`给定键的匹配项，如下所示：

```
Dim index As Dictionary(Of String, DataRow) = BuildIndex(myDataTable, myKeyColumnIndex)
Dim row As DataRow = Nothing
If index.TryGetValue(myKey, row) Then
   ' row was found, can now use row variable to access all the data in that row
Else
   ' row with that key does not exist
End If 
```

您可能还想研究使用`SortedList`or`SortedDictionary`类。这两个都是二叉树的实现。很难说所有这些选项中的哪一个在您的特定场景中最快。这完全取决于数据的类型、索引需要重建的频率、搜索的频率、索引中有多少行`DataTable`以及您需要对找到的项目做什么。最好的办法是在测试用例中尝试每一个，看看哪一个最适合你的需要。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-21T18:52:39.080

您应该使用[行过滤器](https://stackoverflow.com/questions/7836037/datatable-select-method)或[DataTable.Rows.Find()](http://www.devx.com/tips/Tip/33514)而不是选择（[选择不使用索引](http://msdn.microsoft.com/en-us/library/dd364983.aspx)）。根据您的表结构，特别*是如果您的相关字段被索引*（本地），则任何一种方式的性能都应该比遍历所有行快得多。在 .NET 中，一组字段必须是[PrimaryKey](http://msdn.microsoft.com/en-us/library/system.data.datatable.primarykey.aspx)才能被索引。

如果您的字段没有被索引，我会避免选择和行过滤器，因为除了类复杂性的开销之外，它们不提供编译时检查您的条件的正确性。如果它很长，您最终可能会不时花费大量时间对其进行调试。

最好是严格输入您的支票。首先定义了一个底层类型，你还可以定义这个辅助方法，你可以`DataTable`稍后将其转换为类的扩展方法：

```
Shared Function CheckValue(myTable As DataTable, columnName As String, searchValue As String) As Boolean
  For row As DataRow In myTable.Rows
    If row(columnName) = searchValue Then Return True
  Next
  Return False
End Function 
```

或更通用的版本：

```
Shared Function CheckValue(myTable As DataTable, checkFunc As Func(Of DataRow, Boolean)) As Boolean
  For Each row As DataRow In myTable.Rows
    If checkFunc(row) Then Return True
  Next
  Return False
End Function 
```

及其用法：

```
CheckValue(myTable, Function(x) x("myColumn") = "123") 
```

如果您的行类具有`MyColumn`type 属性`String`，则它变为：

```
CheckValue(myTable, Function(x) x.myColumn = "123") 
```

上述方法的好处之一是您可以将计算字段输入到您的检查条件中，因为`myColumn`这里不需要匹配`myColumn`表/数据库中的物理字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-12T04:52:12.207

```
bool exists = dt.AsEnumerable().Where(c => c.Field<string>("Author").Equals("your lookup value")).Count() > 0; 
```

# c++ - 找不到简单的内存泄漏

> ID：14444211
> 
> 赞同：-3
> 
> 时间：2013-01-21T17:37:25.027
> 
> 标签：c++, memory-leaks

有人可以帮我找到这里发生的内存泄漏吗？我只是尝试使用我设计的 Image 类将 1600x960 24 位 RAW 图像（46,08,000 字节）加载到内存中。正如我在任务管理器中看到的那样，在内存中它占用了 30MB。

即使在调用析构函数（超出范围）之后，它仍然占用 2M。请帮忙！

```
#include <cstdio>
#include <iostream>

struct pixel {
    char* color;  // to support various BPP
};

class Image
{
    private:
        pixel** image;
        int     width;
        int     height;
        int     BPP;    // bytes per pixel
        int     size;   // in bytes

    public:
        Image(std::string src, int width, int height, int BPP);
        ~Image();
        pixel** get_matrix(int col, int row, int BPP);
};

pixel** Image :: get_matrix(int col, int row, int BPP)
{
            pixel** matrix = new pixel*[row];
            for(int i=0 ; i<row ; i++)
            {
                matrix[i] = new pixel[col];
                for(int j=0 ; j<col ; j++)
                    matrix[i][j].color = new char[BPP];
            }
            return matrix;
}

Image :: Image(std::string src, int width, int height, int BPP)
{
    FILE *in;
    if( (in = fopen(src.c_str(), "rb")) == NULL )
        image = NULL;
    else
    {
        this->height = height;
        this->width  = width;
        this->BPP    = BPP;
        this->size   = width*BPP*height;

        image = get_matrix(width,height,BPP);
        char* buffer = new char[size];
        fread(buffer, sizeof(char), size, in);

        int l=0;
        for(int i=0 ; i<height ; i++)
        {
            for(int j=0 ; j<width ; j++)
            {
                for(int k=0 ; k<BPP ; k++)
                    image[i][j].color[k] = buffer[l++];
            }
        }
        delete []buffer;
        fclose(in);
    }
}

Image :: ~Image()
{
    for(int i=0 ; i<height ; i++)
    {
        for(int j=0 ; j<width ; j++)
            delete []image[i][j].color;
        delete []image[i];
    }
    delete []image;
}

int main()
{
    {
        getchar();
        Image in("x.raw", 1600, 960, 3);
        getchar();
    }
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:45:52.743

我无法在那里发现内存泄漏，但该程序在内存方面相当浪费：

1.  加载时，它将整个文件加载到内存中，然后构造矩阵。在加载结束时，文件和矩阵都在内存中。如果格式允许，它可以尝试迭代地加载文件（例如逐行）。

2.  图像矩阵存储格式是数组数组的数组。由于每个维度上的数组是单独分配的，并且对于每个分配的数组，都有一定数量的内存（通常为 8-16 字节）用于内存分配器内部，因此这种存储矩阵的方式会浪费大量内存。尝试使用 plain `std::vector<>`，例如理想情况下：

    ```
    struct RGB24 { uint8_t r, g, b; }; // one for each pixel format
    std::vector<RGB24> image(width * height); // allocate the matrix in one shot
    RGB24& pixel = image[row * width + col]; // get pixel image[row][col] 
    ```

# backbone.js - 要求js不加载模块

> ID：14444213
> 
> 赞同：1
> 
> 时间：2013-01-21T17:37:26.167
> 
> 标签：backbone.js, requirejs, single-page-application

我已经盯着这个看了一段时间，似乎无法弄清楚为什么某些 AMD 在将它们作为依赖项加载后不可用。我有一个名为“模型”的自定义模块；在我的 MVC 项目中使用虚拟路径“/scripts/models.js”配置的包。当我在 require.config 中定义它并作为依赖项时，它会加载文件。我可以看到它被请求并找到了。要求没有错误。但是，当我尝试将它作为传递给我的路由器的加载依赖项参数引用时，它是未定义的（models.userModel）。

我在这里做错了什么吗？我没有看到任何循环依赖项，我尝试通过给模型模块命名来定义它。无论我是全局定义它还是通过 router.js 文件中的路径请求模块，它都是未定义的。

应用程序.js。主要配置。（以下）

```
require.config({
    baseUrl: "/scripts/app",
    paths: {
        jquery: "../jquery",
        underscore: "libs/underscore",
        backbone: "libs/backbone",
        kendo: "libs/kendo",
        models: "../models"
    },
    // We shim Backbone since it doesn't declare an AMD module
    shim: {
        underscore: {
            exports: "_"
        },
        backbone: {
            deps: ["underscore", "jquery"],
            exports: "Backbone"
        }
    },
});

require([
    "jquery",
    "backbone",
    "kendo",
    "models",
    "router"
], function ($, backbone, kendo, models, router) {  
    alert("config-start");
}); 
```

用户.js。包含在 models.js 包中。（以下）

```
define({
    userModel : kendo.observable({
        datasource: kendo.data.DataSource({
            transport: {
                read: {
                    url: "/api/usersettings",
                    dataType: "json",
                    type: "GET"
                },
                update: {
                    url: "/api/usersettings",
                    dataType: "json",
                    type: "PUT"
                }
            },
            schema: {
                model: {
                    id: "UserId"
                }
            },
            parameterMap: function (options, operation) {
                if (operation !== "read" && options.models) {
                    return {
                        models: kendo.stringify(options.models)
                    };
                }
                return options;
            }
        }),
        save: function () {
            this.data.sync();
        },
    })
}); 
```

router.js 文件（下）

```
define(["jquery",
    "backbone",
    "models"
], function ($, backbone, models) {

    /**
     * The Router class contains all the routes within the application -
     * i.e. URLs and the actions that will be taken as a result.
     *
     * @type {Router}
     */

    var Router = Backbone.Router.extend({
        contentArea: $("#MainContent"),
        routes: {
            "user/usersettings/contact": "contact",
            "user/usersettings/security": "security",
            "user/usersettings/dashboard": "dashboard",
            "user/usersettings/permissions": "permissions",
            "user/usersettings/colors": "colors"
        },
        contact: function () {
            var contactTemplate = kendo.template($("#usersettings-usercontact").html());
            this.contentArea.empty();
            this.contentArea.html(contactTemplate);

            kendo.bind(this.contentArea, models.userModel); // models is undefined
        },
        security: function () {

        },
        dashboard: function () {

        },
        permissions: function () {

        },
        colors: function () {

        }
    });

    // Create a router instance
    var router = new Router();

    //Begin routing
    Backbone.history.start();

    return router;
}); 
```

也许我遗漏了一些明显的东西，但我无法将“模型”加载为外部依赖项。从 router.js 引用时未定义。关于“联系”功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:26:18.527

定义需要一个将返回值的函数，然后在另一个模块中需要该值时将其注入。

[源代码注释：](https://github.com/jrburke/requirejs/blob/master/require.js#L1914)

> ```
> /**
>  * The function that handles definitions of modules. Differs from
>  * require() in that a string for the module should be the first argument,
>  * and the function to execute after dependencies are loaded should
>  * return a value to define the module corresponding to the first argument's
>  * name.
>  */ 
> ```

```
define(function(){
  return {
    userModel: ...
  }
}) 
```

# c# - 以 UTC 计算一天的开始和月份的开始

> ID：14444216
> 
> 赞同：0
> 
> 时间：2013-01-21T17:37:38.787
> 
> 标签：c#, timezone

我有可能处于不同时区的用户，我正在寻找确定他们的日子和月份开始的 UTC 值。在一个对象内部，我有一个尝试这样做的方法；它看起来像这样：

```
private void SetUserStartTimesUTC()
{
    DateTime TheNow = DateTime.UtcNow.ConvertUTCTimeToUserTime(this.UserTimezoneID);

    DateTime TheUserStartDateUserTime = TheNow.Date;
    DateTime TheUserStartMonthUserTime = new DateTime(TheNow.Year, TheNow.Month, 1);
    DateTime TheUserEndMonthUserTime = TheUserStartMonthUserTime.AddMonths(1);

    this.UserStartOfDayUTC = TheUserStartDateUserTime.ConvertUserTimeToUTCTime(this.UserTimezoneID);
    this.UserStartOfMonthUTC = TheUserStartMonthUserTime.ConvertUserTimeToUTCTime(this.UserTimezoneID);
    this.UserEndOfMonthUTC = TheUserEndMonthUserTime.ConvertUserTimeToUTCTime(this.UserTimezoneID);
} 
```

并且此方法依赖于其他两种扩展方法，它们在用户时间和 UTC 时间之间进行转换

```
public static DateTime ConvertUserTimeToUTCTime(this DateTime TheUserTime, string TheTimezoneID)
{
    TimeZoneInfo TheTZ = TimeZoneInfo.FindSystemTimeZoneById(TheTimezoneID);
    DateTime TheUTCTime = new DateTime();

    if (TheTZ != null)
    {
        DateTime UserTime = new DateTime(TheUserTime.Year, TheUserTime.Month, TheUserTime.Day, TheUserTime.Hour, TheUserTime.Minute, TheUserTime.Second);
        TheUTCTime = TimeZoneInfo.ConvertTimeToUtc(UserTime, TheTZ);
    }

    return TheUTCTime;
}

public static DateTime ConvertUTCTimeToUserTime(this DateTime TheUTCTime, string TheTimezoneID)
{
    TimeZoneInfo TheTZ = TimeZoneInfo.FindSystemTimeZoneById(TheTimezoneID);
    DateTime TheUserTime = new DateTime();

    if (TheTZ != null)
    {
        DateTime UTCTime = new DateTime(TheUTCTime.Year, TheUTCTime.Month, TheUTCTime.Day, TheUTCTime.Hour, TheUTCTime.Minute, 0, DateTimeKind.Utc);
        TheUserTime = TimeZoneInfo.ConvertTime(UTCTime, TheTZ);
    }

    return TheUserTime;
} 
```

现在我处理时区问题已经有一段时间了，我知道时区问题可能会引入难以检测的错误。

我的时区实现似乎是正确的，还是存在会产生某种错误的边缘情况？

感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T17:43:12.323

老实说，您的方法似乎不必要地复杂。

为什么要调用一个参数`TheUTCTime`，然后创建它的 UTC 版本？它不应该*已经*有一个`Kind`UTC吗？即使没有，您最好使用`DateTime.SpecifyKind`- 目前在转换一种方式时会消除秒数，而转换另一种方式则不会...在这两种情况下，您都会消除任何亚秒值。

还：

*   `TimeZoneInfo.FindSystemTimeZoneById`永远不会回来`null`
*   `new DateTime()`如果找不到时区，则返回（即公元 0001 年 1 月 1 日）似乎是指示错误的一种非常糟糕的方式
*   转换方法中不需要有局部变量；`ConvertTime`直接返回调用的结果
*   您的“月底”实际上是“下个月的开始”；这可能是你想要的，但还不清楚。

我个人强烈建议您完全避免使用 BCL `DateTime`。作为主要作者，我完全有偏见，但我至少希望你会发现[Noda Time](http://noda-time.googlecode.com)工作起来更愉快......它区分了“没有时间组件的日期”、“没有时间的时间”的概念日期组件”，“没有特定时区的本地日期和时间”和“特定时区的日期和时间”......所以类型系统可以帮助您只做明智的事情。

编辑：如果你真的*必须*在 BCL 类型中这样做，我会这样写：

```
private void SetUserStartTimesUTC()
{
    DateTime nowUtc = DateTime.UtcNow;
    TimeZoneInfo zone = TimeZoneInfo.FindSystemTimeZoneById(UserTimeZoneID);

    // User-local values, all with a Kind of Unspecified.
    DateTime now = TimeZoneInfo.ConvertTime(nowUtc, zone);
    DateTime today = now.Date;
    DateTime startOfThisMonth = todayUser.AddDays(1 - today.Day);
    DateTime startOfNextMonth = startOfThisMonth.AddMonths(1);

    // Now convert back to UTC... see note below
    UserStartOfDayUTC = TimeZoneInfo.ConvertTimeToUtc(today, zone);
    UserStartOfMonthUTC = TimeZoneInfo.ConvertTimeToUtc(startOfThisMonth, zone);
    UserEndOfMonthUTC = TimeZoneInfo.ConvertTimeToUtc(startOfNextMonth, zone);
} 
```

如您所见，您添加的扩展方法实际上并没有提供太多好处。

现在，代码提到了一个“注释”——你目前总是*假设*午夜总是存在并且是明确的。并非所有时区都是如此。例如，在巴西，夏令时更改前，时间从午夜跳到凌晨 1 点 - 所以午夜本身基本上是无效的。

在 Noda Time 中，我们通过使用来解决这个问题，`DateTimeZone.AtStartOfDay(LocalDate)`但使用 BCL 并不那么容易。

为了比较，等效的 Noda Time 代码如下所示：

```
private void SetUserStartTimesUTC()
{
    // clock would be a dependency; you *could* use SystemClock.Instance.Now,
    // but the code would be much more testable if you injected it.
    Instant now = clock.Now;

    // You can choose to use TZDB or the BCL time zones
    DateTimeZone zone = zoneProvider.FindSystemTimeZoneById(UserTimeZoneID);

    LocalDateTime userLocalNow = now.InZone(zone);

    LocalDate today = userLocalNow.Date;
    LocalDate startOfThisMonth = today.PlusDays(1 - today.Day);
    LocalDate startOfNextMonth = startOfThisMonth.PlusMonths(1);

    UserStartOfDayUTC = zone.AtStartOfDay(today);
    UserStartOfMonthUTC = zone.AtStartOfDay(startOfThisMonth);
    UserEndOfMonthUTC = zone.AtStartOfDay(startOfNextMonth);
} 
```

...其中属性将是类型`ZonedDateTime`（记住时区）。如果需要，您可以将它们更改为类型`Instant`（这只是一个时间点），只需链接`ToInstant`每个属性设置器的调用。

# android - 在我的应用程序的 onCreate 中打开时在哪里关闭 SQLiteOpenHelper？

> ID：14444217
> 
> 赞同：0
> 
> 时间：2013-01-21T17:37:50.607
> 
> 标签：android, sqliteopenhelper

我读到最好`SQLiteOpenHelper`在扩展的类中只使用一个实例`Application`：

```
public class MyApplication extends Application {

    private static SQLiteOpenHelper dBHelper;

    @Override
    public void onCreate() {
        super.onCreate();
        dBHelper = new DBHelper(this);
    }

    public static SQLiteDatabase getDB() {
        return dBHelper.getWritableDatabase();
    }
} 
```

但在那种情况下，我应该在哪里关闭它？

谢谢

七月

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:45:45.450

您应该始终拥有一个且只有一个`SQLOpenHelper`实例，并且永远不要关闭它。更详细的解释可以在[这里](http://touchlabblog.tumblr.com/post/24474750219/single-sqlite-connection)和[这里找到](http://touchlabblog.tumblr.com/post/32793099735/training-sqlite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:51:35.370

`onTerminate()`您可以在子类的方法中关闭数据库`Application`。如果您的应用程序可以处理关闭的数据库（通过重新打开...），您可以在`onLowMemory()`方法中额外关闭（但这不会释放太多内存）。

更重要的是，如果您使用完所有数据库游标，请关闭它们。

编辑

vmirnonov 是对的，`onTerminate()`只在模拟器中调用，所以忽略那部分答案。

# c++ - 如何隐藏链接器警告

> ID：14444222
> 
> 赞同：3
> 
> 时间：2013-01-21T17:37:58.953
> 
> 标签：c++, mysql, gcc

我正在使用 MySql lib，当我编译时，虽然编译没问题，但我有这个警告：

g++：-lmysqlclient：链接器输入文件未使用，因为链接未完成

我正在使用automake，我不得不在configure.ac中添加-lmysqlclient，所以我猜链接器在每个文件中都会给我警告，链接不是必需的。

我的问题是，如何隐藏该特定警告？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:04:23.550

解决！要使用 automake 添加 LD 选项，我需要添加

libsomething_la_LIBADD=-lmysqlclient

进入 Makefile.am。

现在就像@nos 所说，我没有在编译中添加 -lmysqlclient 。谢谢大家！

# android - IBM Worklight 使用多个 HTML 文件

> ID：14444224
> 
> 赞同：1
> 
> 时间：2013-01-21T17:38:01.157
> 
> 标签：android, html, ibm-mobilefirst

我是 IBM Worklight 的新手。我从过去 1 年开始一直在使用 Android。我非常喜欢 Worklight，我觉得我可以用它做更多事情。我想使用带有 Eclipse IDE 的 Worklight 以 HTML 5 开发应用程序/游戏。所以我想知道如何在一个 Worklight 项目中链接所有必需的 html、js 和 css 文件，并在各种平台上运行它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:28:36.670

worklight 应用程序完全基于 IFrame 概念，即它是一个单页应用程序。即使您有 n 个页面，它的行为也不会像 Web 应用程序。只是把一页放在另一页上。在示例中，他们提供了有关分页的信息。调用页面实例并删除该实例，以便释放页面实例占用的内存。通过 7.5 模块了解分页概念。对此还有另一种替代解决方案。如果您对分页不满意，只需设计单页 HTML 文件，

单页 HTML 文件的优点：

*   避免在尝试加载时为每个页面多次调用 JS 文件。
*   资源（css和js）的对齐和排序很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:19:18.133

[http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fstart%2Fc_gettingstarted.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fstart%2Fc_gettingstarted.html) 查看模块 7.5 及其示例

# android - Android：如何绘制从当前位置到目的地的路线方向谷歌地图 API V2

> ID：14444228
> 
> 赞同：34
> 
> 时间：2013-01-21T17:38:28.733
> 
> 标签：android, android-maps-v2

如何绘制从当前位置到目的地的路线方向（纬度和经度），我的代码如下：

```
import android.os.Bundle;
import com.actionbarsherlock.app.SherlockActivity;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

public class DetailMapActivity extends SherlockActivity {
    private GoogleMap map;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_detail_map);

        LatLng TO_DESTINATION = new LatLng(-6.33438, 106.74316);

        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();
        map.setMyLocationEnabled(true);

        map.addMarker(new MarkerOptions().position(TO_DESTINATION).title("Destination Title")
                .snippet("Destination Description"));

        map.moveCamera(CameraUpdateFactory.newLatLngZoom(TO_LOCATION, 40));

        map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
    }
} 
```

我想通过提供商网络或 gps 从当前位置绘制，然后通过驾驶到目的地绘制路线。

我正在使用android google apis V2。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-06-09T07:22:15.520

这对我很有用：
**这不是我的代码**，我从 stackoverflow 的一个很好的答案中得到它，但我现在找不到这个答案，所以这里是代码：

将此类添加到您的项目中：

```
package ...;

import java.io.InputStream;
import java.util.ArrayList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

import com.google.android.gms.maps.model.LatLng;

import android.content.Context;
import android.util.Log;

public class GMapV2Direction {
    public final static String MODE_DRIVING = "driving";
    public final static String MODE_WALKING = "walking";

    public GMapV2Direction() {
    }

    public Document getDocument(LatLng start, LatLng end, String mode) {
        String url = "http://maps.googleapis.com/maps/api/directions/xml?"
                + "origin=" + start.latitude + "," + start.longitude
                + "&destination=" + end.latitude + "," + end.longitude
                + "&sensor=false&units=metric&mode=driving";
        Log.d("url", url);
        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse response = httpClient.execute(httpPost, localContext);
            InputStream in = response.getEntity().getContent();
            DocumentBuilder builder = DocumentBuilderFactory.newInstance()
                    .newDocumentBuilder();
            Document doc = builder.parse(in);
            return doc;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    public String getDurationText(Document doc) {
        try {

            NodeList nl1 = doc.getElementsByTagName("duration");
            Node node1 = nl1.item(0);
            NodeList nl2 = node1.getChildNodes();
            Node node2 = nl2.item(getNodeIndex(nl2, "text"));
            Log.i("DurationText", node2.getTextContent());
            return node2.getTextContent();
        } catch (Exception e) {
            return "0";
        }
    }

    public int getDurationValue(Document doc) {
        try {
            NodeList nl1 = doc.getElementsByTagName("duration");
            Node node1 = nl1.item(0);
            NodeList nl2 = node1.getChildNodes();
            Node node2 = nl2.item(getNodeIndex(nl2, "value"));
            Log.i("DurationValue", node2.getTextContent());
            return Integer.parseInt(node2.getTextContent());
        } catch (Exception e) {
            return -1;
        }
    }

    public String getDistanceText(Document doc) {
        /*
         * while (en.hasMoreElements()) { type type = (type) en.nextElement();
         * 
         * }
         */

        try {
            NodeList nl1;
            nl1 = doc.getElementsByTagName("distance");

            Node node1 = nl1.item(nl1.getLength() - 1);
            NodeList nl2 = null;
            nl2 = node1.getChildNodes();
            Node node2 = nl2.item(getNodeIndex(nl2, "value"));
            Log.d("DistanceText", node2.getTextContent());
            return node2.getTextContent();
        } catch (Exception e) {
            return "-1";
        }

        /*
         * NodeList nl1; if(doc.getElementsByTagName("distance")!=null){ nl1=
         * doc.getElementsByTagName("distance");
         * 
         * Node node1 = nl1.item(nl1.getLength() - 1); NodeList nl2 = null; if
         * (node1.getChildNodes() != null) { nl2 = node1.getChildNodes(); Node
         * node2 = nl2.item(getNodeIndex(nl2, "value")); Log.d("DistanceText",
         * node2.getTextContent()); return node2.getTextContent(); } else return
         * "-1";} else return "-1";
         */
    }

    public int getDistanceValue(Document doc) {
        try {
            NodeList nl1 = doc.getElementsByTagName("distance");
            Node node1 = null;
            node1 = nl1.item(nl1.getLength() - 1);
            NodeList nl2 = node1.getChildNodes();
            Node node2 = nl2.item(getNodeIndex(nl2, "value"));
            Log.i("DistanceValue", node2.getTextContent());
            return Integer.parseInt(node2.getTextContent());
        } catch (Exception e) {
            return -1;
        }
        /*
         * NodeList nl1 = doc.getElementsByTagName("distance"); Node node1 =
         * null; if (nl1.getLength() > 0) node1 = nl1.item(nl1.getLength() - 1);
         * if (node1 != null) { NodeList nl2 = node1.getChildNodes(); Node node2
         * = nl2.item(getNodeIndex(nl2, "value")); Log.i("DistanceValue",
         * node2.getTextContent()); return
         * Integer.parseInt(node2.getTextContent()); } else return 0;
         */
    }

    public String getStartAddress(Document doc) {
        try {
            NodeList nl1 = doc.getElementsByTagName("start_address");
            Node node1 = nl1.item(0);
            Log.i("StartAddress", node1.getTextContent());
            return node1.getTextContent();
        } catch (Exception e) {
            return "-1";
        }

    }

    public String getEndAddress(Document doc) {
        try {
            NodeList nl1 = doc.getElementsByTagName("end_address");
            Node node1 = nl1.item(0);
            Log.i("StartAddress", node1.getTextContent());
            return node1.getTextContent();
        } catch (Exception e) {
            return "-1";        
    }
    }
    public String getCopyRights(Document doc) {
        try {
            NodeList nl1 = doc.getElementsByTagName("copyrights");
            Node node1 = nl1.item(0);
            Log.i("CopyRights", node1.getTextContent());
            return node1.getTextContent();
        } catch (Exception e) {
        return "-1";
        }

    }

    public ArrayList<LatLng> getDirection(Document doc) {
        NodeList nl1, nl2, nl3;
        ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
        nl1 = doc.getElementsByTagName("step");
        if (nl1.getLength() > 0) {
            for (int i = 0; i < nl1.getLength(); i++) {
                Node node1 = nl1.item(i);
                nl2 = node1.getChildNodes();

                Node locationNode = nl2
                        .item(getNodeIndex(nl2, "start_location"));
                nl3 = locationNode.getChildNodes();
                Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
                double lat = Double.parseDouble(latNode.getTextContent());
                Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
                double lng = Double.parseDouble(lngNode.getTextContent());
                listGeopoints.add(new LatLng(lat, lng));

                locationNode = nl2.item(getNodeIndex(nl2, "polyline"));
                nl3 = locationNode.getChildNodes();
                latNode = nl3.item(getNodeIndex(nl3, "points"));
                ArrayList<LatLng> arr = decodePoly(latNode.getTextContent());
                for (int j = 0; j < arr.size(); j++) {
                    listGeopoints.add(new LatLng(arr.get(j).latitude, arr
                            .get(j).longitude));
                }

                locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
                nl3 = locationNode.getChildNodes();
                latNode = nl3.item(getNodeIndex(nl3, "lat"));
                lat = Double.parseDouble(latNode.getTextContent());
                lngNode = nl3.item(getNodeIndex(nl3, "lng"));
                lng = Double.parseDouble(lngNode.getTextContent());
                listGeopoints.add(new LatLng(lat, lng));
            }
        }

        return listGeopoints;
    }

    private int getNodeIndex(NodeList nl, String nodename) {
        for (int i = 0; i < nl.getLength(); i++) {
            if (nl.item(i).getNodeName().equals(nodename))
                return i;
        }
        return -1;
    }

    private ArrayList<LatLng> decodePoly(String encoded) {
        ArrayList<LatLng> poly = new ArrayList<LatLng>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;
        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;
            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            LatLng position = new LatLng((double) lat / 1E5, (double) lng / 1E5);
            poly.add(position);
        }
        return poly;
    }
} 
```

然后根据您的需要使用这个类。
例如绘制方向：

```
GMapV2Direction md = new GMapV2Direction();
mMap = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map)).getMap();
Document doc = md.getDocument(sourcePosition, destPosition,
                    GMapV2Direction.MODE_DRIVING);

ArrayList<LatLng> directionPoint = md.getDirection(doc);
            PolylineOptions rectLine = new PolylineOptions().width(3).color(
                    Color.RED);

            for (int i = 0; i < directionPoint.size(); i++) {
                rectLine.add(directionPoint.get(i));
            }
            Polyline polylin = mMap.addPolyline(rectLine); 
```

它们来自`sourcePosition, destPosition`LatLng 类型，你给他们想要的分数。

我在这里写了我认为可以帮助的代码部分，欢迎提出任何问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-12-11T10:34:45.910

使用 dvrm 解决方案**GMapV2Direction 类**，这是一个很好的解决方案，它仍然有效，但现在您需要在新线程中实现 getDocument 方法以允许网络连接。这是此方法的 AsyncTask 示例，该类的其余部分相同。您可以使用 Handle 处理它或实现自己的接口回调以获取 Docmuent xml 响应。

```
public class GMapV2DirectionAsyncTask extends AsyncTask<String, Void, Document> {

private final static String TAG = GMapV2DirectionAsyncTask.class.getSimpleName();
private Handler handler;
private LatLng  start, end;
private String mode;

public GMapV2DirectionAsyncTask(Handler handler, LatLng start, LatLng end, String mode) {
    this.start = start;
    this.end = end;
    this.mode = mode;
    this.handler = handler;
}

@Override
protected Document doInBackground(String... params) {

    String url = "http://maps.googleapis.com/maps/api/directions/xml?"
            + "origin=" + start.latitude + "," + start.longitude
            + "&destination=" + end.latitude + "," + end.longitude
            + "&sensor=false&units=metric&mode=" + mode;
    Log.d("url", url);
    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response = httpClient.execute(httpPost, localContext);
        InputStream in = response.getEntity().getContent();
        DocumentBuilder builder = DocumentBuilderFactory.newInstance()
                .newDocumentBuilder();
        Document doc = builder.parse(in);
        return doc;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

@Override
protected void onPostExecute(Document result) {
    if (result != null) {
        Log.d(TAG, "---- GMapV2DirectionAsyncTask OK ----");
        Message message = new Message();
        message.obj = result;
        handler.dispatchMessage(message);
    } else {
        Log.d(TAG, "---- GMapV2DirectionAsyncTask ERROR ----");
    }
}

@Override
protected void onPreExecute() {
}

@Override
protected void onProgressUpdate(Void... values) {
} 
```

}

这是活动的异步处理程序方法：

```
 protected void route(LatLng sourcePosition, LatLng destPosition, String mode) {
    final Handler handler = new Handler() {
        public void handleMessage(Message msg) {
            try {
                Document doc = (Document) msg.obj;
                GMapV2Direction md = new GMapV2Direction();
                ArrayList<LatLng> directionPoint = md.getDirection(doc);
                PolylineOptions rectLine = new PolylineOptions().width(15).color(getActivity().getResources().getColor(R.color.magoo_user_base_color));

                for (int i = 0; i < directionPoint.size(); i++) {
                    rectLine.add(directionPoint.get(i));
                }
                Polyline polylin = googleMap.addPolyline(rectLine);
                md.getDurationText(doc);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

    };

    new GMapV2DirectionAsyncTask(handler, sourcePosition, destPosition, GMapV2Direction.MODE_DRIVING).execute();
} 
```

还有一件事，如果duration值不对，解决方法是修改GMapV2Direction类的一行代码：

```
Node node1 = nl1.item(nl1.getLength() - 1); 
```

反而：

```
Node node1 = nl1.item(0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-03T19:09:14.073

我知道为时已晚，但值得。我已经搜索并尝试了很多示例，但没有得到想要的结果，所以我找到了这个惊人的库，它可以为您提供想要的结果。你必须写一堆线。

> 链接：[https ://github.com/jd-alexander/Google-Directions-Android](https://github.com/jd-alexander/Google-Directions-Android)

**导入库：**

> 实现 'com.github.jd-alexander:library:1.1.0'

我正在 onMarkerClick 内部实现代码，因此如果用户单击标记，那么它将从他当前的位置路由到标记位置，但您可以根据您的要求进行更改。

```
 @Override
    public boolean onMarkerClick(Marker marker) {
        Routing routing = new Routing.Builder()
                .travelMode(AbstractRouting.TravelMode.DRIVING)
                .withListener(MapsActivity.this)
                .waypoints(new LatLng(latitude, longitude), marker.getPosition())
                .key("AIzaSyDGvkmJ6osdJz7v8OSg7U")
                .build();
        routing.execute();
        return false;
    } 
```

**实现路由监听器**

```
public class MapsActivity extends FragmentActivity implements OnMapReadyCallback, RoutingListener 
```

**覆盖方法**

```
 @Override
    public void onRoutingFailure(RouteException e) {
        Log.e("check", e.getMessage());
    }

    @Override
    public void onRoutingStart() {
        Log.e("check", "onRoutingStart");
    }

    @Override
    public void onRoutingSuccess(ArrayList<Route> route, int shortestRouteIndex) {

        Log.e("check", "onRoutingSuccess");
        CameraUpdate center = CameraUpdateFactory.newLatLng(new LatLng(latitude,longitude));
        CameraUpdate zoom = CameraUpdateFactory.zoomTo(16);
        List<Polyline> polylines = new ArrayList<>();

        mMap.moveCamera(center);

        if (polylines.size() > 0) {
            for (Polyline poly : polylines) {
                poly.remove();
            }
        }

        polylines = new ArrayList<>();
        //add route(s) to the map.
        for (int i = 0; i < route.size(); i++) {

            //In case of more than 5 alternative routes

            PolylineOptions polyOptions = new PolylineOptions();
            polyOptions.color(getResources().getColor(R.color.colorRouteLine));
            polyOptions.width(10 + i * 3);
            polyOptions.addAll(route.get(i).getPoints());
            Polyline polyline = mMap.addPolyline(polyOptions);
            polylines.add(polyline);
        }
    }

    @Override
    public void onRoutingCancelled() {
        Log.e("check", "onRoutingCancelled");
    } 
```

*这*是示例项目，您也可以检查此代码。

> [https://github.com/jd-alexander/Google-Directions-Android/blob/master/sample/src/main/java/com/directions/sample/MainActivity.java](https://github.com/jd-alexander/Google-Directions-Android/blob/master/sample/src/main/java/com/directions/sample/MainActivity.java)

**结果**

[![在此处输入图像描述](../Images/7756b494c725193b0a8fb87452f641c1.png)](https://i.stack.imgur.com/17rk4.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-04T10:56:04.213

在这里，我发布了用于在当前位置和谷歌地图上的另一个地方之间绘制路线的完整代码。

更多详情：在谷歌地图上使用当前位置访问绘制 [路线](https://demonuts.com/android-google-map-draw-path-between-current-location-and-destination/)

点解析器类

```
import android.content.Context;
import android.graphics.Color;
import android.os.AsyncTask;
import android.util.Log;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.PolylineOptions;
import org.json.JSONObject;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

public class PointsParser extends AsyncTask<String, Integer, List<List<HashMap<String, String>>>> {

    TaskLoadedCallback taskCallback;
    String directionMode = "driving";

    public PointsParser(Context mContext, String directionMode) {
        this.taskCallback = (TaskLoadedCallback) mContext;
        this.directionMode = directionMode;
    }

    // Parsing the data in non-ui thread
    @Override
    protected List<List<HashMap<String, String>>> doInBackground(String... jsonData) {

        JSONObject jObject;
        List<List<HashMap<String, String>>> routes = null;

        try {
            jObject = new JSONObject(jsonData[0]);
            Log.d("mylog", jsonData[0].toString());
            DataParser parser = new DataParser();
            Log.d("mylog", parser.toString());

            // Starts parsing data
            routes = parser.parse(jObject);
            Log.d("mylog", "Executing routes");
            Log.d("mylog", routes.toString());

        } catch (Exception e) {
            Log.d("mylog", e.toString());
            e.printStackTrace();
        }
        return routes;
    }

    // Executes in UI thread, after the parsing process
    @Override
    protected void onPostExecute(List<List<HashMap<String, String>>> result) {
        ArrayList<LatLng> points;
        PolylineOptions lineOptions = null;
        // Traversing through all the routes
        for (int i = 0; i < result.size(); i++) {
            points = new ArrayList<>();
            lineOptions = new PolylineOptions();
            // Fetching i-th route
            List<HashMap<String, String>> path = result.get(i);
            // Fetching all the points in i-th route
            for (int j = 0; j < path.size(); j++) {
                HashMap<String, String> point = path.get(j);
                double lat = Double.parseDouble(point.get("lat"));
                double lng = Double.parseDouble(point.get("lng"));
                LatLng position = new LatLng(lat, lng);
                points.add(position);
            }
            // Adding all the points in the route to LineOptions
            lineOptions.addAll(points);
            if (directionMode.equalsIgnoreCase("walking")) {
                lineOptions.width(10);
                lineOptions.color(Color.MAGENTA);
            } else {
                lineOptions.width(20);
                lineOptions.color(Color.RED);
            }
            Log.d("mylog", "onPostExecute lineoptions decoded");
        }

        // Drawing polyline in the Google Map for the i-th route
        if (lineOptions != null) {
            //mMap.addPolyline(lineOptions);
            taskCallback.onTaskDone(lineOptions);

        } else {
            Log.d("mylog", "without Polylines drawn");
        }
    }
} 
```

FetchURL 类

```
import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class FetchURL extends AsyncTask<String, Void, String> {

    Context mContext;
    String directionMode = "driving";

    public FetchURL(Context mContext) {
        this.mContext = mContext;
    }

    @Override
    protected String doInBackground(String... strings) {
        // For storing data from web service
        String data = "";
        directionMode = strings[1];
        try {
            // Fetching the data from web service
            data = downloadUrl(strings[0]);
            Log.d("mylog", "Background task data " + data.toString());
        } catch (Exception e) {
            Log.d("Background Task", e.toString());
        }
        return data;
    }

    @Override
    protected void onPostExecute(String s) {
        super.onPostExecute(s);
        PointsParser parserTask = new PointsParser(mContext, directionMode);
        // Invokes the thread for parsing the JSON data
        parserTask.execute(s);
    }

    private String downloadUrl(String strUrl) throws IOException {
        String data = "";
        InputStream iStream = null;
        HttpURLConnection urlConnection = null;
        try {
            URL url = new URL(strUrl);
            // Creating an http connection to communicate with url
            urlConnection = (HttpURLConnection) url.openConnection();
            // Connecting to url
            urlConnection.connect();
            // Reading data from url
            iStream = urlConnection.getInputStream();
            BufferedReader br = new BufferedReader(new InputStreamReader(iStream));
            StringBuffer sb = new StringBuffer();
            String line = "";
            while ((line = br.readLine()) != null) {
                sb.append(line);
            }
            data = sb.toString();
            Log.d("mylog", "Downloaded URL: " + data.toString());
            br.close();
        } catch (Exception e) {
            Log.d("mylog", "Exception downloading URL: " + e.toString());
        } finally {
            iStream.close();
            urlConnection.disconnect();
        }
        return data;
    }
} 
```

主要活动

```
public class MainActivity extends AppCompatActivity implements GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener, com.google.android.gms.location.LocationListener , OnMapReadyCallback, TaskLoadedCallback{

   //variables for map and route

    private GoogleMap mMap;
    private MarkerOptions place1, place2;
    Button getDirection;
    private Polyline currentPolyline;
    private MapFragment mapFragment;
    private boolean isFirstTime = true;

//variables for current location
    private static final String TAG = "MainActivity";

    private TextView tvLocation;
    private GoogleApiClient mGoogleApiClient;
    private Location mLocation;
    private LocationRequest mLocationRequest;
    private com.google.android.gms.location.LocationListener listener;
    private long UPDATE_INTERVAL = 2 * 1000;  /* 10 secs */
    private long FASTEST_INTERVAL = 2000; /* 2 sec */

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //code for getting current location
        requestMultiplePermissions();

        tvLocation = (TextView) findViewById((R.id.tv));

        mGoogleApiClient = new GoogleApiClient.Builder(this)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();

    }

    //code for drawing route

    @Override
    public void onMapReady(GoogleMap googleMap) {
        mMap = googleMap;
        mMap.clear();
        Log.d("mylog", "Added Markers");
        mMap.addMarker(place1);
        mMap.addMarker(place2);

        CameraPosition googlePlex = CameraPosition.builder()
                .target(new LatLng(22.7739,71.6673))
                .zoom(7)
                .bearing(0)
                .tilt(45)
                .build();

        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(googlePlex), 5000, null);
    }

    private String getUrl(LatLng origin, LatLng dest, String directionMode) {
        // Origin of route
        String str_origin = "origin=" + origin.latitude + "," + origin.longitude;
        // Destination of route
        String str_dest = "destination=" + dest.latitude + "," + dest.longitude;
        // Mode
        String mode = "mode=" + directionMode;
        // Building the parameters to the web service
        String parameters = str_origin + "&" + str_dest + "&" + mode;
        // Output format
        String output = "json";
        // Building the url to the web service
        String url = "https://maps.googleapis.com/maps/api/directions/" + output + "?" + parameters + "&key=" + getString(R.string.google_maps_key);
        return url;
    }

    @Override
    public void onTaskDone(Object... values) {
        if (currentPolyline != null)
            currentPolyline.remove();
        currentPolyline = mMap.addPolyline((PolylineOptions) values[0]);
    }

    //runtime permission method

    private void  requestMultiplePermissions(){
        Dexter.withActivity(this)
                .withPermissions(
                        Manifest.permission.ACCESS_FINE_LOCATION,
                        Manifest.permission.ACCESS_COARSE_LOCATION )
                .withListener(new MultiplePermissionsListener() {
                    @Override
                    public void onPermissionsChecked(MultiplePermissionsReport report) {
                        // check if all permissions are granted
                        if (report.areAllPermissionsGranted()) {
                            Toast.makeText(getApplicationContext(), "All permissions are granted by user!", Toast.LENGTH_SHORT).show();
                        }

                        // check for permanent denial of any permission
                        if (report.isAnyPermissionPermanentlyDenied()) {
                            // show alert dialog navigating to Settings
                            openSettingsDialog();
                        }
                    }

                    @Override
                    public void onPermissionRationaleShouldBeShown(List<PermissionRequest> permissions, PermissionToken token) {
                        token.continuePermissionRequest();
                    }
                }).
                withErrorListener(new PermissionRequestErrorListener() {
                    @Override
                    public void onError(DexterError error) {
                        Toast.makeText(getApplicationContext(), "Some Error! ", Toast.LENGTH_SHORT).show();
                    }
                })
                .onSameThread()
                .check();
    }

    private void openSettingsDialog() {

        AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
        builder.setTitle("Required Permissions");
        builder.setMessage("This app require permission to use awesome feature. Grant them in app settings.");
        builder.setPositiveButton("Take Me To SETTINGS", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
                Intent intent = new Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS);
                Uri uri = Uri.fromParts("package", getPackageName(), null);
                intent.setData(uri);
                startActivityForResult(intent, 101);
            }
        });
        builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
            }
        });
        builder.show();

    }

   //methods for getting current location

    @Override
    public void onConnected(Bundle bundle) {
        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
            // TODO: Consider calling
            //    ActivityCompat#requestPermissions
            // here to request the missing permissions, and then overriding
            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
            //                                          int[] grantResults)
            // to handle the case where the user grants the permission. See the documentation
            // for ActivityCompat#requestPermissions for more details.
            return;
        }

        startLocationUpdates();

        mLocation = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient);

        if(mLocation == null){
            startLocationUpdates();
        }
        if (mLocation != null) {

            // mLatitudeTextView.setText(String.valueOf(mLocation.getLatitude()));
            //mLongitudeTextView.setText(String.valueOf(mLocation.getLongitude()));
        } else {
            Toast.makeText(this, "Location not Detected", Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public void onConnectionSuspended(int i) {
        Log.i(TAG, "Connection Suspended");
        mGoogleApiClient.connect();
    }

    @Override
    public void onConnectionFailed(ConnectionResult connectionResult) {
        Log.i(TAG, "Connection failed. Error: " + connectionResult.getErrorCode());
    }

    @Override
    protected void onStart() {
        super.onStart();
        if (mGoogleApiClient != null) {
            mGoogleApiClient.connect();
        }
    }

    @Override
    protected void onStop() {
        super.onStop();
        if (mGoogleApiClient.isConnected()) {
            mGoogleApiClient.disconnect();
        }
    }

    protected void startLocationUpdates() {
        // Create the location request
        mLocationRequest = LocationRequest.create()
                .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY)
                .setInterval(UPDATE_INTERVAL)
                .setFastestInterval(FASTEST_INTERVAL);
        // Request location updates
        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
            // TODO: Consider calling
            //    ActivityCompat#requestPermissions
            // here to request the missing permissions, and then overriding
            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
            //                                          int[] grantResults)
            // to handle the case where the user grants the permission. See the documentation
            // for ActivityCompat#requestPermissions for more details.
            return;
        }
        LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient,
                mLocationRequest, this);
        Log.d("reque", "--->>>>");
    }

    @Override
    public void onLocationChanged(Location location) {

        String msg = "Updated Location: " +
                Double.toString(location.getLatitude()) + "," +
                Double.toString(location.getLongitude());

        tvLocation.setText(String.valueOf(location.getLatitude() +"    "+String.valueOf(location.getLongitude())));
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();

        if(isFirstTime){
            //code to draw path on map

            getDirection = findViewById(R.id.btnGetDirection);
            getDirection.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    new FetchURL(MainActivity.this).execute(getUrl(place1.getPosition(), place2.getPosition(), "driving"), "driving");
                }
            });

            place1 = new MarkerOptions().position(new LatLng(location.getLatitude(), location.getLongitude())).title("Location 1");
            place2 = new MarkerOptions().position(new LatLng(20.8880, 70.4012)).title("Location 2");
            mapFragment = (MapFragment) getFragmentManager().findFragmentById(R.id.mapNearBy);
            mapFragment.getMapAsync(this);
            isFirstTime = false;
        }

     }

} 
```

如果您有任何错误，请查看此答案开头给出的原始教程。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-21T18:24:35.363

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_detail_map);
    .....
    .....

  /* Use the LocationManager class to obtain GPS locations */
  LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

  LocationListener mlocListener = new MyLocationListener();
  mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
}

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{

  @Override
  public void onLocationChanged(Location loc)
  {
   CURRENT_LAT = loc.getLatitude();
   CURRENT_LNG = loc.getLongitude();
  }

  @Override
  public void onProviderDisabled(String provider)
  {
    Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
  }

  @Override
  public void onProviderEnabled(String provider)
  {
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
  }

  @Override
  public void onStatusChanged(String provider, int status, Bundle extras)
  {

  }
} 
```

# javascript - 使用子集合将 JSON 数据转换为主干模型

> ID：14444233
> 
> 赞同：3
> 
> 时间：2013-01-21T17:38:48.553
> 
> 标签：javascript, json, backbone.js

我正在使用一个 Playlist 对象，该对象具有一些定义自身的属性以及一个 PlaylistItem 集合。

当我从服务器接收数据时，我会在客户端成功方法中获得其 JSON 响应：

```
success: function (data) {
    console.log("JSON data:", data);

    playlists = _.map(data, function (playlistConfig) {
        return new Playlist(playlistConfig);
    });

    ...
} 
```

在这里，我将我的 JSON 数据转换为 Playlist 对象。每个播放列表对象都是一个 Backbone.Model。

这是我的数据的样子：

![在此处输入图像描述](../Images/b7c8f4eb2938cc7da4738d5f638cf96f.png)

下面是 Playlist 构造函数的样子：

```
return function(config) {
    var playlist = new Playlist(config);

    return playlist;
};

var Playlist = Backbone.Model.extend({
    defaults: function() {
        return {
            id: null,
            userId: null,
            title: 'New Playlist',
            selected: false,
            position: 0,
            shuffledItems: [],
            history: [],
            items: Backbone.Collection.extend({
                model: PlaylistItem
            })
        };
    },
    ...
} 
```

我的问题：

如果我使用默认值创建一个播放列表对象，它会使用 PlaylistItem 的空 Backbone.Collection 进行初始化。但是，如果我使用已定义的集合创建一个播放列表对象，我会得到一个基本数组而不是 Backbone.Collection。这是因为我正在处理来自尚未转换为 Backbone 实体的服务器的 JSON 数据。该数据扩展了播放列表的默认值并覆盖了 Backbone.Collection 实体。

使用填充的 Backbone.Collection 进行初始化的正确方法是什么？我可以在 Initializes 中编写代码来检查我的项目数组的类型，如果它不是 Backbone.Collection，我可以创建一个新的 Backbone.Collection 并将项目添加到其中，然后用新的数组替换旧数组，但是似乎真的很虚伪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:16:10.817

不要在默认值中定义您的 PlalistItems 集合，而是事先定义。然后，在您的播放列表模型上创建一个初始化方法，如下所示：

```
var PlaylistItems = Backbone.Collection.extend({
   ...
});

var Playlist = Backbone.Model.extend({
    initialize: function() {
        this.set('items', new PlaylistItems(this.items));
    },

    defaults: function() {
        return {
            id: null,
            userId: null,
            title: 'New Playlist',
            selected: false,
            position: 0,
            shuffledItems: [],
            history: [],
            items: []  // don't define your PlaylistItems Collection here
        };
}
}); 
```

在此处查看小提琴：http: [//jsfiddle.net/georgedyer/r2XKb/](http://jsfiddle.net/georgedyer/r2XKb/) （您需要打开控制台才能查看该集合）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T18:56:22.217

我遇到的另一个问题是，在您将模型保存到服务器后，您将收到一个响应，该响应会将您的嵌入式集合更改为常规的 javascript 数组。为了解决这个问题，我必须像这样覆盖我的模型类上的解析函数：

```
var model = backbone.Model.extend({
        urlRoot : "/rest/model",

        initialize: function(){
            this.set("myCollection", new MyCollection(this.myArray));
        },

        defaults: {
            myArray: []
        },

        parse: function(response){
            this.set(response);
            this.set("myArray", new MyCollection(response.myArray));
        }
    }); 
```

# c++ - 为什么这段代码不起作用？(c++ OOP) 公共继承

> ID：14444238
> 
> 赞同：3
> 
> 时间：2013-01-21T17:39:06.290
> 
> 标签：c++, oop, inheritance

我需要一些帮助来解释这种现象：

```
#include <iostream>
using namespace std;

class A
{
public:
    void m() {cout<<"A::m "<<this<<endl;};
};

class B1:  public A
{
public:
    void m() {cout<<"B::m "<<this<<endl;};
};

class B2:  public A ,public B1
{
};

class D : public B2
{};

int main()
{
    B2 b;
    D d;
    A* a = &b; // Row 27
    //error: a = &d;  Base class 'A' is ambiguous // Row 28
    return 0;
} 
```

为什么 Row27 中的代码有效，而 Row28 中的代码无效？预先感谢！

**注意：**我很了解虚拟继承，我只想知道 Row27 和 Row28 之间有什么区别 - 为什么一个抛出编译错误而另一个没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:44:03.643

因为您使用非虚拟继承从 派生`A`，这间接地`A`在每个类型的对象中创建了两个类型的子对象`D`。在进行从派生的指针到基址的转换时，编译器无法消除您引用的子对象的歧义，并发出错误。

为了只为 type`A`的对象生成一个 type 的子对象`D`，您必须从`A`virtual 沿继承路径进行继承，该继承路径使`D`派生自`A`：

```
class B1:  virtual public A
{
    // ...
};

class B2:  virtual public A, public B1
{
}; 
```

**编辑：**

我尝试在 Visual Studio 2010 SP1 上编译您的示例，这给了我关于以下定义的*警告*`B2`：

```
class B2: public A, public B1
{
};

1>sotest.cpp(18): warning C4584: 'B2' : base-class 'A' is already a base-class of 'B1'
1>          sotest.cpp(6) : see declaration of 'A'
1>          sotest.cpp(11) : see declaration of 'B1' 
```

换句话说，出于某种原因，VC10 似乎考虑从`A`冗余继承并*忽略它*。这就是赋值`A* a = &b;`编译的原因：`class B2`实际上只继承`A`一次（通过`B1`）。情况并非如此`D`，因为 VC10 可能没有可忽略的冗余继承，并且`D`有效地从`A`两次（通过`B1`和通过`B2`）继承。

我忽略了 VC10 出现这种行为的原因，也不知道是否有编译器选项可以抑制这种行为。值得注意的是，GCC 4.7.2 和 Clang 3.2 都**拒绝**编译 assignment `A* a = &b;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:08:34.233

对于未来的用户来说，似乎：

我刚刚在 GCC 4.7.1 和 Clang 3.2 上尝试过，除非我使用虚拟继承，否则会出现编译器错误。你用的是什么编译器？– 安迪徘徊

VS2010 确实可以编译，但发出警告，表明它忽略了 B2 从 A 的继承。这就是第 27 行有效的原因。我认为这是 VS2010 的一种奇怪行为，我不知道是否有办法将其关闭（除了将所有警告视为错误） – Andy Prowl

谢谢@Andy Prowl。

# ruby-on-rails - application.css.scss 文件未预编译

> ID：14444239
> 
> 赞同：0
> 
> 时间：2013-01-21T17:39:13.293
> 
> 标签：ruby-on-rails, ruby, sass, asset-pipeline

我看过很多关于 rails 中预编译资产的帖子，但我认为我没有看到与我的具体问题相关的帖子。

我的应用程序抱怨 aplication.css.scss 没有预编译。

据我了解，任何 *.scss 文件都应该在我运行时在我的 rails 应用程序中编译：

`rake assets:precompile`

我什至在我的 public/assets 文件夹中确认我可以看到编译后的 application.css 文件。

但是，当我尝试访问我的应用程序的第一页时，我收到以下错误：

```
Compiled application.css  (1002ms)  (pid 20298)
Started GET "/" for 10.20.1.162 at 2013-01-21 12:21:38 -0500
Processing by MyController#new as HTML
  Rendered business_searches/partials/_form.html.erb (16.6ms)
  Rendered business_searches/new.html.erb within layouts/application (45.6ms)
  Rendered commons/_documenthead.html.erb (34.0ms)
Completed 500 Internal Server Error in 139ms

ActionView::Template::Error (application.css.scss isn't precompiled):
    4: <meta charset="utf-8" />
    5:   <title>My Company Name | <%= @page_title || 'My Company Tagline' %></title>
    6:
    7:  <%= stylesheet_link_tag  "application.css.scss", :media => "all" %>
    8:  <%= javascript_include_tag "application" %>
    9:
    10:
  app/views/commons/_documenthead.html.erb:7:in `_app_views_commons__documenthead_html_erb___1078677729313377561_30352020'
  app/views/layouts/application.html.erb:1:in `_app_views_layouts_application_html_erb___646383708034639720_28260100' 
```

`config/environments/production.rb`我可以通过在我的文件中设置以下变量来解决问题：

`config.assets.compile = true`

但根据这篇[文章](https://stackoverflow.com/a/8827757/1663931)，不建议这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:56:51.227

我建议您保留清单文件`application.css`仅用于管理 css 资产，而不是在其前面加上`.scss`. 文件的正确语法`application.html.erb`是：

```
<%= stylesheet_link_tag  "application", :media => "all" %> 
```

如果您在 'application.css `, just create a new`css.scss `file in your`app/assets/stylesheets` 中放置了一些样式并将它们放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:12:09.607

这是因为您的 scss 文件存在编译时错误。我很确定如果你用已知的有效内容替换它的内容，它将被编译。

你可以评论它并检查它是否编译。

始终使用“application.CSS”作为基础 CSS。其他的应该分开。

# eclipse - 应用程序启动时引发带有 Spring 和 Hibernate“远程异常”的 Ext Js 4 MVC

> ID：14444242
> 
> 赞同：0
> 
> 时间：2013-01-21T17:39:23.017
> 
> 标签：eclipse, spring, hibernate, extjs, extjs4

我创建了一个用 Spring MVC3、Hibernate 和 Ext Js 设计的应用程序。这是一个图书馆。我使用 Eclipse IDE。在 WebContent 文件夹中，我创建了名为 app 的 extjs 应用程序，在那里我也上传了 extjs 文件。我的应用程序包含 4 个包：控制器、模型、存储和视图。

控制器 Books.js：

```
Ext.define('ExtJS.controller.Books', {
extend: 'Ext.app.Controller',

stores: ['Books'],

models: ['Book'],

views: ['book.Edit', 'book.List'],

refs: [{
        ref: 'booksPanel',
        selector: 'panel'
    },{
        ref: 'booklist',
        selector: 'booklist'
    }
],

init: function() {
    this.control({
        'booklist dataview': {
            itemdblclick: this.editUser
        },
        'booklist button[action=add]': {
            click: this.editUser
        },
        'booklist button[action=delete]': {
            click: this.deleteUser
        },
        'bookedit button[action=save]': {
            click: this.updateUser
        }
    });
},

editUser: function(grid, record) {
    var edit = Ext.create('ExtJS.view.book.Edit').show();

    if(record){
        edit.down('form').loadRecord(record);
    }
},

updateUser: function(button) {
    var win    = button.up('window'),
        form   = win.down('form'),
        record = form.getRecord(),
        values = form.getValues();

    if (values.id > 0){
        record.set(values);
    } else{
        record = Ext.create('ExtJS.model.Book');
        record.set(values);
        record.setId(0);
        this.getBooksStore().add(record);
    }

    win.close();
    this.getBooksStore().sync();
},

deleteUser: function(button) {

    var grid = this.getBooklist(),
    record = grid.getSelectionModel().getSelection(), 
    store = this.getBooksStore();

    store.remove(record);
    this.getBooksStore().sync();
}
}); 
```

模型书.js：

```
Ext.define('ExtJS.model.Book', {
extend: 'Ext.data.Model',
fields: ['id', 'title', 'author', 'publisher', 'isbn', 'pages', 'category', 'qty']
}); 
```

存储 Books.js：

```
Ext.define('ExtJS.store.Books', {
extend: 'Ext.data.Store',
model: 'ExtJS.model.Book',
autoLoad: true,
pageSize: 35,
autoLoad: {start: 0, limit: 35},

proxy: {
    type: 'ajax',
    api: {
        read : 'books/view.action',
        create : 'books/create.action',
        update: 'books/update.action',
        destroy: 'books/delete.action'
    },
    reader: {
        type: 'json',
        root: 'data',
        successProperty: 'success'
    },
    writer: {
        type: 'json',
        writeAllFields: true,
        encode: false,
        root: 'data'
    },
    listeners: {
        exception: function(proxy, response, operation){
            Ext.MessageBox.show({
                title: 'REMOTE EXCEPTION',
                msg: operation.getError(),
                icon: Ext.MessageBox.ERROR,
                buttons: Ext.Msg.OK
            });
        }
    }
}
}); 
```

View 包含 Viewport.js：

```
Ext.define('ExtJS.view.Viewport', {
extend: 'Ext.container.Viewport'
}); 
```

和一个名为 book 的文件夹，我有：

列表.js：

```
Ext.define('ExtJS.view.book.List' ,{
extend: 'Ext.grid.Panel',
alias : 'widget.booklist',

//requires: ['Ext.toolbar.Paging'],

iconCls: 'icon-grid',

title : 'Books',
store: 'Books',

columns: [{
    header: "Title",
    width: 50,
    flex:1,
    dataIndex: 'title'
},{
    header: "Author",
    width: 50,
    flex:1,
    dataIndex: 'author'
},{
    header: "Publisher",
    width: 50,
    flex:1,
    dataIndex: 'publisher'
},{
    header: "Isbn",
    width: 50,
    flex:1,
    dataIndex: 'isbn'
},{
    header: "Pages",
    width: 50,
    flex:1,
    dataIndex: 'pages'
},{
    header: "Category",
    width: 50,
    flex:1,
    dataIndex: 'category'
},{
    header: "Qty",
    width: 50,
    flex:1,
    dataIndex: 'qty'
}],

initComponent: function() {

    this.dockedItems = [{
        xtype: 'toolbar',
        items: [{
            iconCls: 'icon-save',
            itemId: 'add',
            text: 'Add',
            action: 'add'
        },{
            iconCls: 'icon-delete',
            text: 'Delete',
            action: 'delete'
        }]
    },
    {
        xtype: 'pagingtoolbar',
        dock:'top',
        store: 'Books',
        displayInfo: true,
        displayMsg: 'Displaying books {0} - {1} of {2}',
        emptyMsg: "No books to display"
    }];

    this.callParent(arguments);
}
}); 
```

和

编辑.js：

```
Ext.define('ExtJS.view.book.Edit', {
extend: 'Ext.window.Window',
alias : 'widget.bookedit',

requires: ['Ext.form.Panel','Ext.form.field.Text'],

title : 'Edit Book',
layout: 'fit',
autoShow: true,
width: 280,

iconCls: 'icon-user',

initComponent: function() {
    this.items = [
        {
            xtype: 'form',
            padding: '5 5 0 5',
            border: false,
            style: 'background-color: #fff;',

            fieldDefaults: {
                anchor: '100%',
                labelAlign: 'left',
                allowBlank: false,
                combineErrors: true,
                msgTarget: 'side'
            },

            items: [
                {
                    xtype: 'textfield',
                    name : 'id',
                    fieldLabel: 'id',
                    hidden:true
                },    
                {
                    xtype: 'textfield',
                    name : 'title',
                    fieldLabel: 'Title'
                },
                {
                    xtype: 'textfield',
                    name : 'author',
                    fieldLabel: 'Author'
                },   
                {
                    xtype: 'textfield',
                    name : 'publisher',
                    fieldLabel: 'Publisher'
                },
                {
                    xtype: 'textfield',
                    name : 'isbn',
                    fieldLabel: 'Isbn'
                },
                {
                    xtype: 'textfield',
                    name : 'pages',
                    fieldLabel: 'Pages'
                },
                {
                    xtype: 'textfield',
                    name : 'category',
                    fieldLabel: 'Category'
                },
                {
                    xtype: 'textfield',
                    name : 'qty',
                    fieldLabel: 'Qty'
                }
            ]
        }
    ];

    this.dockedItems = [{
        xtype: 'toolbar',
        dock: 'bottom',
        id:'buttons',
        ui: 'footer',
        items: ['->', {
            iconCls: 'icon-save',
            itemId: 'save',
            text: 'Save',
            action: 'save'
        },{
            iconCls: 'icon-reset',
            text: 'Cancel',
            scope: this,
            handler: this.close
        }]
    }];

    this.callParent(arguments);
}
}); 
```

我的 app.js：

```
Ext.application({
name: 'ExtJS',

controllers: [
    'Books'
],

launch: function() {
    Ext.create('Ext.container.Viewport', {
        layout: 'fit',
        items: [
            {
                xtype: 'booklist'
            }
        ]
    });
}
}); 
```

来自 store/Books.js 的错误“远程异常”被抛出。我不知道可能是什么问题。

**编辑：**

问题是：“从数据库中检索书籍时出错”。它来自Java控制器：

```
@Controller 
```

公共类 BookController {

```
private BookService bookService;

@RequestMapping(value="/books/view.action")
public @ResponseBody Map<String,? extends Object> view(@RequestParam int start, @RequestParam int limit) throws Exception {

    try{

        List<Book> books = bookService.getBookList(start,limit);

        int total = bookService.getTotalBooks();

        return ExtJSReturn.mapOK(books, total);

    } catch (Exception e) {

        return ExtJSReturn.mapError("Error retrieving books from database.");
    }
} 
```

另请参见 BookService.java 方法：

```
 @Transactional(readOnly=true)
public List<Book> getBookList(int start, int limit){

    return bookDAO.getBooks(start, limit);
}

    public int getTotalBooks(){

    return bookDAO.getTotalBooks();
} 
```

请参阅 BookDAO.java 方法：

```
 @SuppressWarnings("unchecked")
public List<Book> getBooks(int start, int limit) {

    DetachedCriteria criteria = DetachedCriteria.forClass(Book.class);

    return hibernateTemplate.findByCriteria(criteria, start, limit);
}

    public int getTotalBooks(){
    return DataAccessUtils.intResult(hibernateTemplate.find("SELECT COUNT(*) FROM books"));
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:30:20.163

这是问题所在：

```
org.springframework.orm.hibernate3.HibernateQueryException: books is not mapped [SELECT COUNT(*) FROM books]; nested exception is org.hibernate.hql.ast.QuerySyntaxException: books is not mapped [SELECT COUNT(*) FROM books] 
```

**固定在这里**：[https ://stackoverflow.com/a/14447201/1564840](https://stackoverflow.com/a/14447201/1564840)

# git - GIt status 说文件已删除，但 git rm 说错误：pathspec '.....' did not match any files

> ID：14444245
> 
> 赞同：3
> 
> 时间：2013-01-21T17:39:36.203
> 
> 标签：git

我已经这样做了 100 次。我从目录中删除了一个文件，然后运行 ​​git status 看起来不错。

```
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    themes/custom/gitb/templates/views-view-field--field-overall-rating.tpl.php 
# 
```

然后我运行 **git rm theme/custom/gitb/templates/views-view-field--field-overall-rating.tpl.php** 并收到一条错误消息

```
error: pathspec 'themes/custom/gitb/templates/views-view-field--field-overall-rating.tpl.php' did not match any file(s) known to git. 
```

git status “知道”该文件，但 git rm 不知道也不会删除它。我被卡住了，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T17:45:15.140

一个快速而肮脏的解决方案是添加回文件并使用

```
git rm themes/custom/gitb/templates/views-view-field--field-overall-rating.tpl.php 
```

删除它。

`git rm`也会从文件系统中删除文件，因此您不需要（通常也不应该）手动删除文件。

**编辑**

一种更简洁的方法是让 git 使用

```
git add -u 
```

或者

```
git commit -a 
```

来自 的文档`git-add`，这里是`-u`选项的描述

> 仅与索引中已跟踪的文件而不是工作树匹配。这意味着它永远不会暂存新文件，但它将暂存已修改的跟踪文件的新内容，并且**如果工作树中的相应文件已被删除，它将从索引中删除文件。**

这是一个可供选择的`-a`选项`git-commit`

> 告诉命令**自动暂存已修改和删除**的文件，但您没有告诉 git 的新文件不受影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:44:57.970

[git rm 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-rm.html#_removing_files_that_have_disappeared_from_the_filesystem)描述了几种删除工作树中不再存在的文件的方法。

将来，删除文件`git rm`比单独删除更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-28T15:38:16.803

当您删除不使用 git`git rm`命令的目录时，此追加。

我做了 git stash

它恢复了我使用`rm`而不是删除的文件`git rm`。

事实上，我首先检查了最后一个哈希值，但我认为这不是必需的。

# javascript - 如何禁用 Google Chrome 中的历史滑动操作？

> ID：14444246
> 
> 赞同：7
> 
> 时间：2013-01-21T17:39:41.220
> 
> 标签：javascript, google-chrome, desktop

我正在创建一个带有文本视图的基于浏览器的桌面应用程序。文本视图可能包含很长的水平线。在 Chrome 中，在触控板上向左滑动有时会激活 history.back 操作，有时会激活向左滚动操作。这对我们的用户来说有点烦人。

如何禁用历史滑动操作以便滑动只会滚动？

请注意，我已经提供了一个自定义 pushstate 事件处理程序。而且历史上的前进/后退在应用程序中具有适当的意义，所以我不能只是禁用历史。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T20:13:30.473

据我所知，没有官方认可的方法来解决这个问题。切换滑动手势是在系统级别而不是在浏览器中进行调节的，因此禁用它们的唯一方法是在系统偏好设置中手动执行此操作（在系统偏好设置 -> 触控板 -> 更多手势中关闭“在页面之间滑动”） .

然而，在搜索了一会儿之后，我偶然发现了一个使用 JQuery 的 mousewheel.js 来覆盖设置的 hack。

[Teambox 的 Pablo Villalba 的这个插件](https://github.com/micho/jQuery.preventMacBackScroll)是我在搜索实现这种覆盖的插件时发现的第一个实现。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T05:37:17.650

在 Mac 上，我禁用了系统偏好设置下的页面之间的滑动。 [![在页面之间滑动](../Images/b5a1260e433cca6851495869beec2002.png)](https://i.stack.imgur.com/l3MYq.png)

# jquery - jQuery css3 背景大小

> ID：14444250
> 
> 赞同：0
> 
> 时间：2013-01-21T17:39:58.217
> 
> 标签：jquery

我在使用 jQuery 时遇到问题`.css('background-size','contain');`

在谷歌浏览器上有时它可以工作，有时它不..（90% 的情况下它不起作用）

这是我正在使用的代码：

```
function scaleImg(){    

    var img = $('#img_src_div img');
    if(img.height() >= 600 || img.width() >= 570){
        $('#img_src_div').css('background-size','contain');
    }

} 
```

这是一个[JSFiddle 示例](http://jsfiddle.net/uAKLA/1/)，它正在工作。但在我的页面内它不是。它几乎相同，有一些 php 生成的内容，如 url 和一些文本。以及它在父div中的代码。

我尝试删除所有可能干扰它的 javascript，但它是一样的。在Firefox中一切正常。

编辑：

images.php - 它包含在另一个 php 页面中。

```
//Removed - Was not usefull. 
```

**第二次编辑**`scaleImg();`：通过在页面加载后手动调用，背景得到缩放。所以页面加载有问题..

这是我现在使用的确切代码。

```
 <script type="text/javascript">
    function scaleImg() {
    var container = document.getElementById(\'img_src_div\');
    var img = container.children[0]; // assuming image is first child
    // var img = container.getElementsByTagName(\'img\')[0]; // use this one if not
    if( img.width >= 570 || img.height >= 600) container.style.backgroundSize = "contain";
}
    $(document).ready(function(){
    scaleImg();
    });
    </script> 
```

**第三次也是最后一次（希望如此）编辑：**

我已经解决了，问题是`$(document).ready(...);`它是在图像完全下载之前执行的。因此，为了调用`scaleImg();`文档就绪函数，我`onload=""`在图像标签内调用它。

```
<img alt="" onload="scaleImg(this.width,this.height);" id="img_src" src="image_url" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:50:56.037

尝试纯 JavaScript：

```
function scaleImg() {
    var container = document.getElementById('img_src_div');
    var img = container.children[0]; // assuming image is first child
    // var img = container.getElementsByTagName('img')[0]; // use this one if not
    if( img.width >= 570 || img.height >= 600) container.style.backgroundSize = "contain";
} 
```

jQuery 可能正在对您的 CSS 调用进行一些验证，并且由于某种原因而失败。纯 JS 更可靠；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:56:22.240

这将确保在获取图像宽度手高之前实际加载图像

```
function scaleImg(){

    var actualImg = $('#img_src_div img'),
        imgH=0,
        imgW=0,
        img = new Image();

    img.src = actualImg[0].src;
    img.onload = function(){
         imgW = img.width;
         imgH = img.height;
        alert(imgW+' x '+imgH);
    }
    if(imgH >= 600 || imgW >= 570){
        $('#img_src_div').css('background-size','contain');
    }
}

scaleImg(); 
```

# c++ - 在构造函数完成之前调用析构函数是否合法？

> ID：14444251
> 
> 赞同：6
> 
> 时间：2013-01-21T17:40:00.257
> 
> 标签：c++, asynchronous, constructor, destructor

假设我有一个类，其构造函数产生一个删除对象的线程：

```
class foo {
public:
    foo() 
    : // initialize other data-members
    , t(std::bind(&foo::self_destruct, this)) 
    {}

private:
    // other data-members
    std::thread t;
    // no more data-members declared after this

    void self_destruct() { 
        // do some work, possibly involving other data-members
        delete this; 
    }
}; 
```

这里的问题是析构函数可能在构造函数完成之前被调用。在这种情况下这是合法的吗？由于`t`最后声明（并因此初始化），并且构造函数主体中没有代码，并且我从未打算对此类进行子类化，因此我假设对象在`self_destruct`被调用时已完全初始化。这个假设正确吗？

我知道如果在该语句之后不使用该语句`delete this;`在成员函数中是合法的。`this`但是构造函数在几个方面都很特殊，所以我不确定这是否有效。

此外，如果它是非法的，我不知道如何解决它，其他在构造对象后必须调用的特殊初始化函数中产生线程，我真的想避免这种情况。

PS：我正在寻找 C++03 的答案（我仅限于该项目的旧编译器）。示例中的`std::thread`仅用于说明目的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T17:58:41.137

首先，我们看到一个类型的对象`foo`具有非平凡的初始化，因为它的构造函数是非平凡的（第 3.8/1 节）：

> 如果一个对象是一个类或聚合类型，并且它或它的一个成员由一个普通默认构造函数以外的构造函数初始化，则称该对象具有非普通初始化。

现在我们看到类型对象`foo`的生命周期在构造函数结束后开始（第 3.8/1 节）：

> 类型对象的生命周期`T`开始于：
> 
> *   获得具有适合类型 T 的对齐和大小的存储，并且
> *   如果对象有非平凡的初始化，它的初始化就完成了。

现在，*如果*类型具有非平凡的析构函数（第 3.8/5 节）`delete`，则在构造函数结束之前对对象执行操作是未定义的行为：*`foo`*

 *> 在对象的生命周期开始之前但在分配对象将占用的存储空间之后 [...] 任何指向对象将要或曾经位于的存储位置的指针都可以使用，但只能以有限的方式使用。对于正在建造或破坏的物体，见 12.7。除此以外， [...]

因此，由于我们的对象正在构建中，我们来看看 §12.7：

> 成员函数，包括虚函数 (10.3)，可以在构造或销毁 (12.6.2) 期间调用。

这意味着`self_destruct`在构造对象时调用它是可以的。但是，本节没有具体说明在构造对象时销毁它。所以我建议大家看一下操作`delete-expression`。

首先，它“将为正在删除的对象 [...] 调用析构函数（如果有的话）”。析构函数是成员函数的一种特殊情况，所以调用它就可以了。但是，§12.4 析构函数没有说明在构造过程中调用析构函数时是否*定义良好。*这里没有运气。

其次，“ *delete-expression*将调用*释放函数*”和“释放函数将释放指针引用的存储空间”。再一次，没有提到对当前正在使用的存储进行此操作作为正在构建的对象。

所以我认为这是未定义的行为，因为标准没有非常精确地定义它。

请注意：类型对象的生命周期在析构函数调用开始时`foo` *结束*，因为它有一个非平凡的析构函数。所以如果`delete this;`发生在对象构造**结束之前，它的生命周期在它开始之前就结束了**。这是在玩火。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:09:44.997

我敢说它被明确定义为非法（尽管它可能显然仍然适用于某些编译器）。

这与“构造函数抛出异常时未调用析构函数”的情况有些相同。

根据标准，删除表达式会破坏*由新表达式*（5.3.2）创建的最派生对象（1.8）或数组。在构造函数结束之前，对象*不是*最派生的对象，而是其直接祖先类型的对象。

您的类`foo`没有基类，因此没有祖先，`this`因此没有类型，并且您的对象在`delete`被调用时根本不是真正的对象。但即使有一个基类，该对象也将是一个非派生对象（仍然使其非法），并且会调用错误的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T17:53:40.083

`delete this;`在大多数平台上都能正常工作；有些甚至可以保证作为特定于平台的扩展的正确行为。但是 IIRC 根据标准并没有很好地定义它。

您所依赖的行为是，通常可以在死对象上调用非虚拟非静态成员函数，只要该成员函数实际上不访问`this`. 但是标准不允许这种行为；它充其量是不可移植的。

如果在调用非静态成员函数期间对象不存在，则标准的第 3.8p6 节使其行为未定义：

> 类似地，在对象的生命周期开始之前但在对象将占用的存储空间分配之后，或者在对象的生命周期结束之后并且在对象占用的存储空间被重用或释放之前，引用的任何泛左值可以使用原始对象，但只能以有限的方式使用。对于正在建造或破坏的物体，见 12.7。否则，这样的glvalue指的是分配的存储，并且使用不依赖于其值的glvalue的属性是明确定义的。如果出现以下情况，该程序具有未定义的行为：
> 
> *   左值到右值的转换应用于这样的左值，
> *   **glvalue 用于访问非静态数据成员或调用对象的非静态成员函数，或**
> *   glvalue 被隐式转换为对基类类型的引用，或者
> *   泛左值用作 a 的操作数，`static_cast`除非最终转换为or ，或*`cv`*`char&`*`cv`*`unsigned char&`
> *   泛左值用作 a 的操作数`dynamic_cast`或用作 的操作数`typeid`。

* * *

对于这种特定情况（删除正在构建的对象），我们在第 5.3.5p2 节中找到：

> ...在第一种选择（*删除对象*）中，操作数的值可以是空指针值、指向由先前的*new-expression*`delete`创建的非数组对象的指针或指向表示基的子对象的指针此类对象的类别（第 10 条）。如果不是，则行为未定义。在第二种选择（*删除数组*）中，操作数的值可以是空指针值或由前一个数组*new-expression*产生的指针值。如果不是，则行为未定义。**`delete`**

 ***不满足此要求。 `*this`不是由*new-expression**创建*的过去时的对象。它是一个*正在创建*的对象（现在渐进式）。并且这种解释得到了数组案例的支持，其中指针必须是前一个*新表达式*的结果......但*新表达式*尚未完全评估；它不是*以前*的，还没有结果。

 **** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T18:00:17.753

在构造函数成功完成之前，该对象正式不存在。部分原因是构造函数可能是从派生类的构造函数中调用的。在这种情况下，您当然不想通过显式的析构函数调用来破坏构造的子对象，甚至更不想通过调用`delete this`未完全构造的对象（a 的一部分）来调用 UB。

* * *

关于对象存在的标准术语，重点补充说：

> **C++11 §3.8/1**：对象
> 的*生命周期*是对象的运行时属性。如果一个对象是一个类或聚合类型，并且它或它的一个成员由一个普通默认构造函数以外的构造函数初始化，则称该对象具有非普通初始化。[*注意：*通过简单的复制/移动构造函数进行初始化是非平凡的初始化。*—尾注*] 类型 T 的对象的生命周期开始于：
> — 获得类型 T 的具有适当对齐和大小的存储，并且
> — 如果对象具有非平凡初始化，***则其初始化完成***。

在这种情况下，仅由用户提供构造函数是不平凡的。*******

# php - 动态元（关键字，描述）

> ID：14444257
> 
> 赞同：0
> 
> 时间：2013-01-21T17:40:13.967
> 
> 标签：php, html, meta

我知道这个话题已经被详细阐述了很多次，但我仍然不知道该怎么做。也许我的网站结构不像它应该的那样；我不知道。无论如何，我有以下内容：

一个 Index.php 包含一个标题，其中我有：

```
<meta name="description" content="<?php echo $pg_desc; ?>"/>
<meta name="keywords" content="<?php echo $pg_key; ?>"/> 
```

这个 index.php 还包含所有引用的样式表和 jquery 代码。

然后我在 SQL 中拥有页面的所有内容。我的数据库中的每个页面的格式如下（作为长文本）：

```
<?php ##commented out page name just for my own convenience ?>
<div class="#" 
body
</div> 
```

现在我想我必须把 `$pg_desc = "my page is about"` and `$pg_key = "you,name,it"` 放在 php 部分，但这似乎不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:49:30.017

您需要先声明这些变量，然后再将它们输出到元标记。

例如：

```
<?php
$pg_key = "you,name,it";
$pg_desc = "my page is about";
?>

<meta name="description" content="<?php echo $pg_desc; ?>"/>
<meta name="keywords" content="<?php echo $pg_key; ?>"/> 
```

# graphite - Graphite 中序列的加权和

> ID：14444260
> 
> 赞同：2
> 
> 时间：2013-01-21T17:40:20.890
> 
> 标签：graphite, weighted-average

我正在处理来自 Graphite 中不同服务器的一系列响应时间，并且我有单独的系列显示来自每个服务器的请求数。现在我想做的是计算这些的加权平均值，即

avg = ((weight1 * value1) + (weight2 * value2)) / (weight1 + weight2)

但是，我在计算这个表达式的顶部时遇到了问题。我试过输入：

```
sumSeries(multiplySeries(series1,weights1),multiplySeries(series2,weights2)) 
```

作为目标，但 Graphite 只是呈现“无数据”。每个 multiplySeries 都调用自己的作品。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:01:53.573

我遇到了同样的问题，找不到一个像样的解决方案，所以我试着写一个 - 看到这个拉取请求：[https ://github.com/graphite-project/graphite-web/pull/300](https://github.com/graphite-project/graphite-web/pull/300)

# regular-language - 如果语言 L 的每个子集都是正则的，那么 L 是正则的吗？

> ID：14444262
> 
> 赞同：4
> 
> 时间：2013-01-21T17:40:26.917
> 
> 标签：regular-language, computation-theory

我知道上述定理的逆是不正确的，即如果 L 是规则的，那么 L 的每个子集都不需要是规则的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T18:16:41.697

不仅

> 如果语言 L 的每个子集都是正则的，则 L 是正则的

但是也

> 如果语言 L 的每个真子集都是正则的，则 L 是有限的

**证明：**

这相当于声明

> 如果一种语言`L`是无限的，那么它包含一个不是常规语言的子集。

常规语言的抽引引理指出“存在一个长度`l`，如果`w`语言中的一个词长于，`l`则存在三个非空的词，并且每个词都在该语言中”。`x,y,z``y``xyz == w``xy^nz`

如果一种语言是无限的且规则的，那么它包含的单词比任何给定的长度都长。因此，必然存在三个词`x,y,z`，使得每个词都`xy^nz`在该语言中。

现在， 的每个真子集`{xy^nz; n in N}`都是 的真子集`L`。现在，肯定存在`xy^nz`不规则的真子集*。因此，每一种正则无限语言都有一个非正则的真子集。

如果一种语言是无限的且不规则的，那么考虑它的任何适当的无限子集。如果子集不规则，则该语言不是反例。如果子集是正则的，则使用上一段找到不正则的真子集。由于作为真子集是可传递的，因此该子集是原始语言的真子集，并且该语言不是反例。

因此，每一种无限语言都有一个不规则的真子集。

因此，如果语言的每个真子集都是正则的，那么该语言是有限的（因此是正则的）。

量子点

*例如，该集合`{xy^{n^2}z; n in N}`是 的一个真子集`{xy^nz; n in N}`并且它不是正则的，如[Myhill-Nerode 定理](http://en.wikipedia.org/wiki/Myhill-Nerode_theorem)所示。

# emacs - 用 Cd 杀死 *terminal* 缓冲区

> ID：14444265
> 
> 赞同：2
> 
> 时间：2013-01-21T17:40:32.933
> 
> 标签：emacs, keyboard

几天前我发现了一篇[不错的帖子](http://whattheemacsd.com/setup-shell.el-01.html)`C-d`，详细介绍了如何使用密钥杀死 shell 缓冲区。基本上，在终止进程后，`C-d`您现在可以`C-d`再次点击以终止缓冲区。

我试图为 term-mode 实现类似的东西，但我遇到了一个问题。在您杀死术语 process （使用通常的`C-d`）之后，缓冲区使用的键映射似乎发生了变化，但我不知道它是什么！

例如，启动`term`命令 ( `M-x term RET RET`) 然后立即点击`C-d`。一旦进程终止，缓冲区仍报告处于术语模式，但它们使用的键映射既不是`term-mode-map`也不是 `term-raw-map`。

**所以**
我要么需要找出它使用的是什么地图，所以我可以绑定`C-d`到`kill-buffer`.
或者我需要另一种方法来`C-d`在术语模式下终止缓冲区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:58:10.993

试试这个：

```
(defun delete-char-or-kill-terminal-buffer (N &optional killflag)
  (interactive "p\nP")
  (if (string= (buffer-name) "*terminal*")
  (kill-buffer (current-buffer))
(delete-char N killflag)))
(global-set-key (kbd "C-d") 'delete-char-or-kill-terminal-buffer) 
```

当`*terminal*`进程退出时，缓冲区的模式切换到基本模式，这就是为什么`C-d`不做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-28T14:38:20.597

虽然 Trey Jackson 的版本是绝对正确的，但下面是另一个不需要知道缓冲区名称的版本。然后更容易管理多个终端缓冲区。

```
(defun term-handle-exit--close-buffer (&rest args)
  (when (null (get-buffer-process (current-buffer)))
    (insert "Press <C-d> to kill the buffer.")
    (use-local-map (let ((map (make-sparse-keymap)))
                     (define-key map (kbd "C-d")
                       (lambda ()
                         (interactive)
                         (kill-buffer (current-buffer))))
                     map))))
(advice-add 'term-handle-exit :after #'term-handle-exit--close-buffer) 
```

# entity-framework - 实体框架日期时间与 SQL Server 日期

> ID：14444267
> 
> 赞同：2
> 
> 时间：2013-01-21T17:40:40.753
> 
> 标签：entity-framework, date, entity-framework-4.3

我正在使用实体框架 4.3。在我的 SQL Server 2008 数据库中，我将一些日期存储为日期而不是日期时间。

我需要使用日期字段检索数据，这里有一个测试代码示例：

```
 public static Applicant Create()
    {   
        var dt = new DateTime(1967, 08, 03);

        var r = new CrudRepo<Applicant>(UowHelper.GetUow().Context);

        return r.Find(a => a.DateOfBirth == dt).Single();
    } 
```

但是，我遇到了“缺少序列”的问题。

关于我如何解决这个问题的任何想法？

我还需要在某个时候更新数据库。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:53:47.837

的实际结果`var dt = new DateTime(1967, 08, 03);`是`8/3/1967 12:00:00 AM`

因此我们需要 TruncateTime时间`DataType`。`DateOfBirth``Date`

msdn：[EntityFunctions.TruncateTime 方法](http://msdn.microsoft.com/en-us/library/dd395355.aspx)

```
public static Applicant Create()
    {   
        var dt = new DateTime(1967, 08, 03);

        var r = new CrudRepo<Applicant>(UowHelper.GetUow().Context);

        return r.FirstOrDefault(a => a.DateOfBirth == EntityFunctions.TruncateTime(dt));
    } 
```

或删除`.Single() method`改为使用[.FirstOrDefault() 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T01:59:49.173

仅供参考，添加到 spajce 的答案，

```
System.Data.Entity.Core.Objects.EntityFunctions 
```

已弃用

```
System.Data.Entity.DbFunctions 
```

# ios - 带有 NINetworkImageViews 的 UICollectionView 重复图像

> ID：14444273
> 
> 赞同：2
> 
> 时间：2013-01-21T17:41:01.053
> 
> 标签：ios, uicollectionview, nimbus-ios

我正在使用 Nimbuskit 的 NINetworkImageView。我有一个简单的 UICollectionView 显示图像网格（NINetworkImageViews）。通常它就像一个魅力，但在某些情况下，一些 NINetworkImageViews 显示错误的图像。

我认为当没有图像路径并且 NINetworkImageView 必须显示默认图像时会发生这种情况。有时（几次）不是显示默认图像，而是出现属于 CollectionView 的其他 NINetworkImageView 的其他图像。

以下是相关代码：

```
- (UICollectionViewCell*) collectionView:(UICollectionView *)collectionView   cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"ShelvingCell";
    ShelvingCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

    // Prueba para ver si esto arregla lo de que se repitan imágenes
    [cell.feedNetworkImageView prepareForReuse];

    cell.feedNetworkImageView.delegate = self;

    // El collage necesita un tratamiento especial
    if (indexPath.section == 0 && indexPath.row == 0)
    {
        cell.feedTitleLabel.text = @"";
        cell.lastFeedNewTitleLabel.text = @"";
        // Prueba para ver si esto arregla lo de que se repitan imágenes
        [cell.feedNetworkImageView setPathToNetworkImage:@""];

        // Prueba para ver si esto arregla lo de que se repitan imágenes
        [cell.feedNetworkImageView prepareForReuse];

        cell.feedNetworkImageView.image = [UIImage imageNamed:@"collage.png"];
    }
    else
    {    
        MOFeed *feed = [self.feeds objectAtIndex:(indexPath.section*3 + indexPath.row - 1)];
        cell.feedTitleLabel.text = feed.title;

        // Recuperamos la última noticia del feed
        MONoticia *ultimaNoticia = [feed lastFeedNew];

        cell.lastFeedNewTitleLabel.text = ultimaNoticia.title;

        if (![feed.feedImageURL isEqualToString:@""] && feed.feedImageURL)
        {
            // Prueba para ver si esto arregla lo de que se repitan imágenes
            [cell.feedNetworkImageView prepareForReuse];
            [cell.feedNetworkImageView setPathToNetworkImage:feed.feedImageURL];
        }
        else
        {
            // Prueba para ver si esto arregla lo de que se repitan imágenes
            [cell.feedNetworkImageView prepareForReuse];

            cell.feedNetworkImageView.image = [UIImage imageNamed:@"shelvingcell.png"];
            // Prueba para ver si esto arregla lo de que se repitan imágenes
            [cell.feedNetworkImageView setPathToNetworkImage:@""];
        }
    }
    return cell;
} 
```

非常感谢！

卡洛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:38:15.293

我有同样的问题，当我深入研究这个问题时，它看起来像

```
[cell.feedNetworkImageView prepareForReuse]; 
```

没有取消所有下载操作。你必须做一些小技巧

通话前

```
[cell.feedNetworkImageView setPathToNetworkImage:feed.feedImageURL]; 
```

取消所有网络操作操作，然后创建一个新的网络操作

```
[self.displayImage.networkOperationQueue cancelAllOperations];
self.displayImage.networkOperationQueue = [[NSOperationQueue alloc]init];
[cell.feedNetworkImageView setPathToNetworkImage:feed.feedImageURL]; 
```

它效率不高，因为您每个图像下载都需要它自己的操作队列，因此可以取消它。这可能需要更多的工作才能提高效率。但到目前为止看起来没有重复的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:12:37.437

Carlos，我对 NINetworkImageView 了解不多，但我的理论是 UICollectionView 正在重用您的视图，并且您不会取消请求。假设您加载第一个单元格，然后触发该图像的请求。然后你开始滚动。在第一个请求完成之前重用第一个单元格，并且可能这个重用该单元格的新项目没有图像，所以你不要调用 setPathNetwork... 结果，新重用的单元格将具有第一个单元格图像。

可能在 NINetworkImageView 中有一个方法可以取消请求。每次重用这些视图之一时调用它。

万岁！

# jquery - 如何停止 javascript 以等待延迟完成？

> ID：14444274
> 
> 赞同：5
> 
> 时间：2013-01-21T17:41:06.293
> 
> 标签：jquery

我有一个函数，它接受一个参数并进行同步加载。

我将其更改为执行异步 jQuery.ajax 调用以检索数据并调用回调。旧代码（无法修改）使用相同的功能并失败。我需要能够以两种方式检索数据，以便异步代码可以继续运行，如果异步已经加载，旧同步代码可以检索缓存的数据，同步加载或等待任何已经运行的异步请求。

```
var ajaxQueries = {}
loadEngineData(fileId, callback) {
    var sync = callback == undefined;
    if (ajaxQueries[fileId]) {
        if (sync) {
            //Need to stop here and wait for ajaxQueries[fileId] to finish
            //Execution cannot continue! If we return before defered has ended here 3rd party scripts will fail.
            return data;
        }
        else {
            ajaxQueries[fileId].done(function(data){callback(data)});
        }
    }
    else {
        ajaxQueries[fileId] = $.ajax({
            async:!sync,
            type:'GET',
            url:fileId2Name(fileId),
            data:null,
            dataType:'text',
        });
        if (sync) {
            var _data = undefined;
            ajaxQueries[fileId].done(function(data){_data=data});
            return _data;
        }
        ajaxQueries[fileId].done(function(data){callback(data);});
    }
} 
```

如果旧脚本调用该函数，则 ajax 查询将同步运行，所有后续调用都将使用延迟`.done`，`.fail`一切都会好起来的。

```
var enginePhyData = loadEngineData('physics');
//Do stuff 
```

如果一个新脚本首先调用该函数，并且在此加载过程中，一个旧脚本尝试从同一文件加载数据，我会遇到延迟 ajax 查询`ajaxQueries[fileId]`异步运行的情况，我必须等待它完成加载数据以避免破坏现有的库。

我简化`loadEngineData`以保持问题的集中。否则它会更复杂一些，并允许调用文件列表以并行加载

```
loadEngineData(['geometry', 'scripts'], function() {
    var phy = loadEngineData('physics');
    var geo = loadEngineData('geometry');
    var scr = loadEngineData('scripts');

    //run the async function;
});
loadEngineData('physics', function() {
    //run the async function;
});

//...
//in the scripts file

var phy = loadEngineData('physics');
//here phy might be undefined if this file went through eval() before `loadEngineData('physics',...)` was called; 
```

我可以对代码进行现代化改造，但问题是某些文件在项目之间共享并在不同的环境中运行。如果不分叉依赖项，我目前无法修改旧脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:10:03.917

在等待某些异步 ajax 调用完成时，您不能停止执行 javascript。Javascript 根本不能那样工作。

相反，您必须重新编写编程方式，以便希望等待异步 ajax 调用完成的代码将通过回调函数执行，而不是在 ajax 调用执行后同步执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:54:36.253

你很接近，如果它是一个同步请求，你只需要返回 responseText 。

```
return data 
```

变成

```
return ajaxQueries[fileId].responseText; 
```

由于请求是同步的，因此无需等待，浏览器已经等待响应。

```
var ajaxQueries = {}
loadEngineData(fileId, callback) {
    var sync = callback == undefined;
    if (ajaxQueries[fileId]) {
        if (sync) {
            return ajaxQueries[fileId].responseText;
        }
        else {
            ... 
```

# r - 如何将多个表、数据框、回归结果等写入一个 excel 文件？

> ID：14444277
> 
> 赞同：2
> 
> 时间：2013-01-21T17:41:17.447
> 
> 标签：r, excel, csv, save, export

我正在寻找一种将对象放入 MS Excel 的简单方法。（我使用预装的“嘌呤霉素”数据集作为示例）

我想将这些对象的内容放到一个 excel 文件中：

```
Puromycin
summary(Puromycin$rate)
summary(Purymycin$conc)
table(Puromycin$state)
lm( conc ~  rate , data=Puromycin) 
```

“内容”是指当我按下回车键时控制台中显示的内容。我不知道该怎么称呼它。

我试图这样做：

```
sink("datafilewhichexcelhopefullyunderstands.csv")
Puromycin
summary(Puromycin$rate)
summary(Purymycin$conc)
table(Puromycin$state)
lm( conc ~  rate , data=Puromycin)
sink() 
```

这给了 med 一个带有 CSV 扩展名的文件，但是当我在记事本中打开文件时，有逗号分隔。这意味着我无法让 Excel 正确打开它。我的意思是每个数字都在自己的单元格中。

其他人针对类似问题提出了此建议 [https://stackoverflow.com/a/13007555/1831980](https://stackoverflow.com/a/13007555/1831980)

但是作为一个新手，我觉得解决方案太复杂了，我希望有一个更简单的方法。

我现在正在做的是这样的：

```
write.table(Puromycin, file="clipboard" , sep=";" , row.names=FALSE ) 
write.table(summary(Purymycin$conc), file="clipboard" , sep=";" , row.names=FALSE )
... etc... 
```

但这需要我大量的复制和粘贴，我希望能消除这些。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:03:44.217

`write.table`及其朋友旨在写出由指定的任何分隔符分隔的数据列。您的剪贴板包含多种数据类型，因为您使用`summary`的总是提供唯一的输出。

要写出数据值，您可以`write.csv`在 a 上使用`data frame`，然后使用 Excel 打开。例如，`Puromycin`已经是一个数据框（您可以使用 看到`str(Puromycin)`），因此您可以直接将其写出来：

```
write.csv(file = "some file.csv", x = Puromycin) 
```

哪个会进入当前工作目录（可以用 确定`getwd()`）。

写出/保存回归模型的结果有点挑战。您绝对可以`sink`像以前一样使用，但在文件上指定扩展名，`.txt`以便文本编辑器可以打开它。从长远来看，您可能想要研究一些更高级的方法（`sweave`, ），因为它们可以自动编写非常好的报告。`knitr`

与此同时，了解一下`str(any R object)`，因为它将是你的朋友。您可以使用 . 查看工作区中的所有对象`ls()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:21:20.060

仅当您准备使用 Excel 的数据/文本到列功能时，这才会有帮助：

```
capture.output( sapply( c(Puromycin,
summary(Puromycin$rate),
summary(Puromycin$conc),
table(Puromycin$state),
lm( conc ~  rate , data=Puromycin) ), FUN=print), file="datafilewhichexcelhopefullyunderstands.csv", append=TRUE) 
```

问题是 Excel 不会将空格作为单元格分隔符读取，除非您明确告诉它这样做。您可以（而且我经常这样做）使用 Text-to-Columns 对话框界面提供的固定字段输入功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T19:23:14.020

您最简单的选择可能是使用[RExcel](http://rcom.univie.ac.at/)工具，它在 R 和 Excel 之间传输信息。但是，它不是免费软件。

XLConnect 包是另一种选择，它可用于将信息直接写入 Excel 文件。

棘手的部分是`lm`调用。 `lm`不返回简单的向量、矩阵或数据框（所有这些都易于转换为 csv 或直接发送），并且没有明确的方法将列表的各个部分转换为电子表格中的单元格。更好的是使用提取器函数从`lm`lm 对象的返回或摘要中提取重要部分，然后使用其他工具将它们发送到 Excel。

如果您能告诉我们更多关于为什么您需要 Excel 中的数字以及之后您打算如何处理它们，那么我们也许能够提供更好的帮助（您也许可以完全跳过 Excel）。

如果主要目标是与他人共享输出，那么您应该真正查看 knitr 包（或其他相关包）。这不会创建 Excel 文件，但可用于（连同 pandoc 程序和可能的其他工具）以易于与不熟悉 R 的其他人共享的格式创建报告文件。您可以将所有内容放入 .pdf 文件或一个 .docx 文件（后者由 MS Word 读取，并且有可以使用 Word 编辑的表格）。没有一种简单的方法可以将编辑恢复到 R 中，但是通过跟踪更改，您可以轻松查看已进行了哪些更改并相应地手动编辑您的 R 脚本/模板。

# android - 覆盖 notifyDataSetChanged()

> ID：14444278
> 
> 赞同：4
> 
> 时间：2013-01-21T17:41:20.587
> 
> 标签：android, android-arrayadapter

我有一个自定义的 ArrayAdapter。当数据显示在 ListViews 中时，我总是希望它排序，因此我尝试覆盖 notifyDataSetChanged() 以首先对适配器进行排序，如下所示：

```
@Override
public void notifyDataSetChanged() {
    sort(new Comparator<IceContact>() {
        @Override
        public int compare(IceContact iceContact, IceContact iceContact2) {
            return iceContact.compareTo(iceContact2);
        }
    });
    super.notifyDataSetChanged();
} 
```

IceContact 类是一个实现 Comparable 的 get-set 类。不幸的是，这给了我一个具有讽刺意味的 StackOverflowError （下面的 logcat）。然后我试着反过来做。之后直接覆盖`sort()`并调用`notifyDataSetChanged()`，如下所示：

```
@Override
public void sort(Comparator<? super IceContact> comparator) {
    super.sort(comparator);
    notifyDataSetChanged();
} 
```

这很好用！谁能解释为什么？感觉它们几乎是相同的实现。

* * *

```
01-21 18:25:50.725: ERROR/AndroidRuntime(2490): FATAL EXCEPTION: main
    java.lang.StackOverflowError
    at android.view.View.setFocusableInTouchMode(View.java:5584)
    at android.widget.AdapterView.checkFocus(AdapterView.java:717)
    at android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:812)
    at android.widget.AbsListView$AdapterDataSetObserver.onChanged(AbsListView.java:6044)
    at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:37)
    at android.widget.BaseAdapter.notifyDataSetChanged(BaseAdapter.java:50)
    at android.widget.ArrayAdapter.notifyDataSetChanged(ArrayAdapter.java:286)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:70)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(IceContactAdapter.java:71)
    at android.widget.ArrayAdapter.sort(ArrayAdapter.java:278)
    at se.naxiait.curbits.utils.IceContactAdapter.notifyDataSetChanged(Ic 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T17:48:12.527

> IceContact 类是一个实现 Comparable 的 get-set 类。不幸的是，这给了我一个具有讽刺意味的 StackOverflowError （下面的 logcat）。

`sort()`调用是默认的（在其实现中）`notifyDataSetChanged()`，然后将再次调用，然后再`sort()`调用`notifyDataSetChanged()`哪个将调用`sort()`哪个将调用...

在`notifyDataSetChanged`对数据进行排序时，**无需**调用`notifyDataSetChanged()`as`sort()`将自动为您执行此操作。

第二种情况将起作用，因为您基本上会调用`notifyDataSetChanged()`两次（`super.sort()`对数据进行排序->`notifyDataSetChanged()`从`super`调用->`notifyDataSetChanged()`由您调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-31T09:15:25.367

您可以使用`registerAdapterDataObserver`

```
 adapter.registerAdapterDataObserver(new RecyclerView.AdapterDataObserver() {
        @Override
        public void onChanged() {
            super.onChanged();
            //your code;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-29T15:14:40.997

防止异常的一种简单方法是禁用对 notifyDataSetChanged() 的调用。

```
@Override
public void notifyDataSetChanged() 
{
    setNotifyOnChange(false);
    sort(yourComparatorInstance);
    super.notifyDataSetChanged();
} 
```

它将根据文档自动重新启用：

> ...并调用 notifyDataSetChanged() 将标志重置为真。

这就是 sort() 的作用。

# ruby-on-rails - ruby net/ssh 无法远程执行 rake 命令

> ID：14444281
> 
> 赞同：2
> 
> 时间：2013-01-21T17:41:33.603
> 
> 标签：ruby-on-rails, ruby, rake, net-ssh

您好我正在尝试使用 ruby​​ net/ssh gem (2.0.24) 连接到远程服务器并运行 rake 任务。我可以使用下面概述的脚本运行其他简单的任务，但是 rake 失败了。

这是我的代码

```
Net::SSH.start("myremote_server", 'ubuntu', :keys => ['abcdef.pem'], :paranoid => false, :verbose => :debug) do |ssh|
  result = ssh.exec!("cd a_rails_directory; rake sunspot:solr:start")
  puts result
  ssh.loop
end 
```

我收到以下错误消息

```
rake aborted!
uninitialized constant Bundler
/home/ubuntu/a_rails_directory/config/boot.rb:9:in `rescue in <top (required)>'
/home/ubuntu/a_rails_directory/config/boot.rb:5:in `<top (required)>'
/home/ubuntu/a_rails_directory/config/application.rb:1:in `<top (required)>'
/home/ubuntu/a_rails_directory/Rakefile:4:in `<top (required)>'
(See full trace by running task with --trace) 
```

当我**手动**ssh 进入远程服务器时，我可以很容易地运行 rake taks ，但正如我上面所概述的，它不适用于 net/ssh。

不知何故，我觉得我没有连接到正确的 shell 或对路径变量的正确访问，但我不确定，也不知道如何修复它。有什么想法吗？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:48:18.063

没关系。想出了如何加载相关的红宝石路径信息

```
result = ssh.exec!("[[ -s \"$HOME/.rvm/scripts/rvm\" ]] && source \"$HOME/.rvm/scripts/rvm\" ; cd rails_directory; rake sunspot:solr:start") 
```

# perl - Perl 中的点等于是什么意思？

> ID：14444284
> 
> 赞同：23
> 
> 时间：2013-01-21T17:41:57.400
> 
> 标签：perl

Perl（点等于）中的“.=”是什么意思？下面的示例代码（在 while 子句中）：

```
if( my $file = shift @ARGV ) {
    $parser->parse( Source => {SystemId => $file} );
} else {
    my $input = "";
    while( <STDIN> ) { $input .= $_; }
    $parser->parse( Source => {String => $input} );
}
exit; 
```

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-21T17:55:56.407

句`.`点是[连接运算符](http://perldoc.perl.org/perlop.html#Additive-Operators)。右边的等号表示这是一个[赋值运算符](http://perldoc.perl.org/perlop.html#Assignment-Operators)，就像在 C 中一样。

例如：

```
$input .= $_; 
```

做同样的事情

```
$input = $input . $_; 
```

然而，这也有一些 perl 魔法，例如，这消除了初始化变量以避免“未初始化”警告的需要。试试区别：

```
perl -we 'my $x; $x = $x + 1'   # Use of uninitialized value in addition ...
perl -we 'my $x; $x += 1'       # no warning 
```

这意味着您的代码中的行：

```
my $input = ""; 
```

是相当多余的。尽管有些人可能会觉得很舒服。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T17:44:00.260

对于几乎任何二元运算符`X`,`$a X= $b`都等价于`$a = $a X $b`. 点`.`是字符串连接运算符；因此，`$a .= $b`意思是“坚持`$b`到底`$a`”。

在您的代码中，您从一个空的 开始`$input`，然后重复读取一行并将其追加到`$input`没有剩余的行。您最终应该将整个文件作为 的内容`$input`，一次一行。

它应该相当于无环

```
local $/;
$input = <STDIN>; 
```

（将行分隔符定义为未定义的字符，然后读取直到永远不会出现的“行尾”）。

编辑：根据 TLP 的评论更改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T17:43:30.173

您已经找到了*字符串连接*运算符。

让我们尝试一下：

```
my $string = "foo";

$string .= "bar";

print $string;
foobar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T17:49:40.513

这将连接到 $input var。通过 STDIN 输入的任何内容都被分配给 $input。

# c# - ListView 与 xaml 中的 TreeViewItems

> ID：14444285
> 
> 赞同：10
> 
> 时间：2013-01-21T17:42:00.817
> 
> 标签：c#, wpf, xaml, c#-4.0

我对 c# 很陌生，我要做的第一件事是`ListView`使用数据绑定，结果证明没问题。

如果底层模型有任何孩子（如 ），我现在正试图让项目有一个扭曲按钮`TreeView`。每个子项将具有与所有顶级项目相同的列。

我该怎么做呢？是否有这样的现有控件？如果不是，我是把a打扮成`TreeView`a `ListView`，还是把a打扮成`ListView`a `TreeView`？

我沿着这个[解决方案](http://blogs.microsoft.co.il/blogs/davids/archive/2010/04/17/hierarchical-grid-with-wpf.aspx)中概述的方式进行了打扮 a `TreeView`，但最终结果看起来很糟糕，标题实际上只是一个项目，所以你失去了所有可以连接到列排序的漂亮列大小和列按钮进入`ListView`这样那条路线实际上看起来会更有效。

我注意到新的任务管理器有一个与我正在尝试创建的控件完全相同的控件，我不知道这是怎么做到的？可能在 C 中。

![ListView 与 TreeView 项目](../Images/2b1ad90044c6f24a31ebf479e21f803a.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T23:25:39.400

Microsoft 提供了一个看起来是您正在寻找的样本。可以在此处找到该示例的记录：

[http://msdn.microsoft.com/en-us/library/vstudio/ms771523(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms771523(v=vs.90).aspx)

当您构建并运行该示例时，您最终会得到类似于以下内容的内容：

![在此处输入图像描述](../Images/d8ae012b5e55c51bc3f3599617a65eb4.png)

该示例中完成了大量模板，因此您将能够使事情看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-30T21:51:17.140

这可能会更容易`Style`，`ListView`我玩得很快，并设法在大约 10 分钟内创建了一个模型。

![在此处输入图像描述](../Images/de5cd6216c531a17d87aa17cba0b00b8.png)

显然，您会想要添加更多内容，但`TreeView`在`ListView`列内托管似乎很容易。

如果您想用于构建，这里是模型代码。

xml:

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="233" Width="405" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <ListView ItemsSource="{Binding Processes}" >
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Process" Width="200"  >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <TreeView BorderThickness="0" ItemsSource="{Binding Processes}" >
                                        <TreeView.ItemTemplate>
                                            <HierarchicalDataTemplate ItemsSource="{Binding Processes}">
                                                <TextBlock Text="{Binding Name}" />
                                            </HierarchicalDataTemplate>
                                        </TreeView.ItemTemplate>
                                    </TreeView>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="CPU" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding CpuUsage, StringFormat={}{0} %}" TextAlignment="Right" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Memory" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding MemUsage, StringFormat={}{0} MB}" TextAlignment="Right" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="VerticalContentAlignment" Value="Top" />
                </Style>
            </ListView.ItemContainerStyle>
        </ListView>
    </Grid>
</Window> 
```

代码：对可树模型数据加载感到抱歉:)

```
 public partial class MainWindow : Window
    {
        private ObservableCollection<ProcessInfo> _processes = new ObservableCollection<ProcessInfo>();

        public MainWindow()
        {
            InitializeComponent();
            Processes.Add(new ProcessInfo
            {
                CpuUsage = 10.3,
                MemUsage = 48.9,
                Processes = new ObservableCollection<Process>()
            });
            var pro = new Process{ Name = "Process1", Processes = new ObservableCollection<Process>()};
            pro.Processes.Add(new Process { Name = "SubProcess1", Processes = new ObservableCollection<Process>() });
            Processes[0].Processes.Add(pro);
            Processes.Add(new ProcessInfo
            {
                CpuUsage = 0,
                MemUsage = 100,
                Processes = new ObservableCollection<Process>()
            });
            var pro2 = new Process { Name = "Process2", Processes = new ObservableCollection<Process>() };
            pro2.Processes.Add(new Process { Name = "SubProcess1", Processes = new ObservableCollection<Process>() });
            pro2.Processes.Add(new Process { Name = "SubProcess2", Processes = new ObservableCollection<Process>() });
            pro2.Processes.Add(new Process { Name = "SubProcess3", Processes = new ObservableCollection<Process>() });
            Processes[1].Processes.Add(pro2);
        }

        public ObservableCollection<ProcessInfo> Processes
        {
            get { return _processes; }
            set { _processes = value; }
        }
    }

    public class ProcessInfo
    {
        public ObservableCollection<Process> Processes { get; set; }
        public double CpuUsage { get; set; }
        public double MemUsage { get; set; }
    }

    public class Process
    {
        public string Name { get; set; }
        public ObservableCollection<Process> Processes { get; set; }
    } 
```

祝你好运 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T23:09:35.507

你所描述的听起来有点像 TreeListView，如果你用谷歌搜索“WPF TreeListView”，你会看到一些可能对你有好处的解决方案。我使用了[Telerik](http://www.telerik.com/products/wpf/treelistview.aspx)的一个，但根据您的需求有多复杂，它可能会有点过分。

如果您只想要一个像您附加的图像一样的子级别，您可能只想使用具有复杂 DataTemplate 的 ListView 滚动您自己的第一列，该列将显示一个展开器按钮和一个绑定到子项的简单 ListBox。

[与此处的答案](https://stackoverflow.com/questions/4725352/wpf-listview-with-gridviewcolumn-and-datatemplate)类似，除了您的单元格将具有一个样式为箭头的复选框、项目的文本和一个子列表框。然后将子 ListBox 的可见性绑定到复选框的状态。

# entity-framework-4 - EF - 通用“AddOrUpdate”方法突然中断

> ID：14444287
> 
> 赞同：3
> 
> 时间：2013-01-21T17:42:05.103
> 
> 标签：entity-framework-4, webforms, asp.net-4.0

我在我的 ASP.NET 4.0 Webforms 应用程序中使用实体框架 4（数据库优先方法）。

我基本上在做的是从 my 中获取要编辑的实体`ObjectContext`，并在 Web 表单上显示用户应该输入数据（或修改现有数据）的字段。

当需要将数据存储回来时，我正在从 Web 表单中读取值，构建一个新`Entity`实例，然后我有一个名为的通用方法`AddOrUpdate`来检测这是否是一个新实体（因此它需要插入它)，或者如果它是现有的（因此它需要更新现有数据）。

我的方法使用`EntityKey`and 检查对象上下文是否已经知道这个对象 - 非常类似于[微软的 Cesar de la Torre](http://blogs.msdn.com/b/cesardelatorre/archive/2008/09/04/updating-data-using-entity-framework-in-n-tier-and-n-layer-applications-short-lived-ef-contexts.aspx)在他的博客文章中展示的内容：

```
public static void AddOrUpdate(ObjectContext context, EntityObject objectDetached)
{
    if (objectDetached.EntityState == EntityState.Detached)
    {
        object currentEntityInDb = null;

        if (context.TryGetObjectByKey(objectDetached.EntityKey, out currentEntityInDb))
        {
            // attach and update the existing entity
        }
        else
        {
            // insert new entity into entity set
            context.AddObject(objectDetached.EntityKey.EntitySetName, objectDetached);
        } 
    }
} 
```

这工作得很好 - 最长的时间。但是今天，突然之间，我在`context.TryGetObjectByKey`声明中不断收到这样的例外情况：

> *System.InvalidOperationException：找不到标识为“MyEntityType”的类型的对象映射*

我根本不记得在这个核心代码中更改了任何内容 - 并且定义了实体类型，`ID`存储在数据库中的值`EntityKey`确实存在于数据库中......一切都*应该*没问题 - 但它一直在我身上失败......

这里到底发生了什么？？

我确实找到了一些关于该主题的博客和论坛帖子，但没有一个可以真正启发我或帮助我解决问题。我一定是搞砸了——糟糕——但我真的只见树木不见森林——有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-19T17:17:35.777

通常，当 EF 找不到具有该类型的程序集时，就会发生此类问题。如果没有看到完整的异常，很难准确地弄清楚，但似乎您最近的更改以及您使用 EF 的方式似乎是原因。

EF 通常在必须使用上下文中的 ObjectSet 访问类型时直接从类型本身中选择类型。在其他情况下，类型在调用的上下文中不可用，它会查看调用程序集和调用程序集引用的任何 dll。如果找不到它，它会抛出错误消息。

您可以在上下文的[MetadataWorkspace中使用](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.metadataworkspace(v=vs.110).aspx)[LoadFromAssembly](http://msdn.microsoft.com/en-us/library/bb495513(v=vs.110).aspx)方法。

> ObjectContext.MetadataWorkspace.LoadFromAssembly（程序集）。

这样 EF 将知道在哪里查找您的类型。

# database - sqlite c接口持久错误qt

> ID：14444288
> 
> 赞同：1
> 
> 时间：2013-01-21T17:42:08.180
> 
> 标签：database, qt, sqlite, runtime-error

我想使用本机界面执行一个简单的查询（删除表），并且在尝试准备语句时`sqlite`不断遇到。`SQLITE_ERROR`我尝试了所有方法，因为我害怕字符串兼容性（qt 字符串有时会很痛苦），但它总是给我相同的代码如下：

```
 sqlite3_stmt *query;
    std::string tmp = "DROP TABLE ?";
    if(sqlite3_prepare_v2(db, tmp.c_str(), tmp.size(), &query, NULL) != SQLITE_OK)return     FALSE;
    if(sqlite3_bind_text16(query, 1, str.utf16(), -1, SQLITE_TRANSIENT) != SQLITE_OK) return FALSE;
    if(sqlite3_step(query) != SQLITE_OK) {
      std::cerr << sqlite3_errmsg(db);
      return FALSE;
    }
    sqlite3_finalize(query); 
```

我真诚地希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:45:08.900

您不能将表名作为参数传递（它适用于大多数支持参数的数据库 API，甚至可能是*所有*数据库 API）。

# c++ - 为什么我不能转发声明 typedef？

> ID：14444291
> 
> 赞同：8
> 
> 时间：2013-01-21T17:42:18.970
> 
> 标签：c++, c++11

```
namespace O
{
    class A{};

    class A;   // ok
    typedef A K; // ok

    struct A;  // ok(C++11): A is a class but for references and pointer it have the same meaning
    class K;   // (1) error: K is a typedef (of a class...)
}

namespace U
{
    typedef O::A A;

    class A;      // (2) error: A is a typedef (of  a class...)
} 
```

标准 C++ 不允许这些情况（1 和 2）编译的原因是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T15:18:09.580

你很困惑，或者你的例子没有显示你在问什么。在您的示例代码中，您不是试图“转发声明一个 typedef”（例如事情不可能或没有用，见下文）您试图将现有的 typedef-name（即一种类型的别名）重新声明为完全不同的类型。

你已经说过`K`是 typedef for `A`，然后你说它是 class `K`。做好决定。不能同时是`class A`和`class K`。(1) 和 (2) 都因同样的原因而失败。

浏览示例的这些行：

```
class A;   // ok
typedef A K; // ok 
```

就目前为止。

```
struct A;  // ok(C++11): A is a class but for references and pointer it have the same meaning 
```

我不知道你为什么在这里说“C++11”，这在 C++03 中也可以。类和结构在 C++ 中是同一种东西。它们都是“对象类型”和“类类型”。对于前向声明，类键（即`struct`或`class`）是可互换的。

```
class K;   // (1) error: K is a typedef (of a class...) 
```

`K`已被声明为 class 的 typedef `A`，该名称不能用于在同一范围内声明新类型。

[旁白：C*确实*允许以下内容，因为 struct 名称和 typedef 名称位于不同的命名空间中：

```
struct A { };
typedef struct A K;  // N.B. need "struct A" not just "A"
struct K { }; 
```

但是现在有两种不同的类型叫做`struct K`and `K`，它们是不相关的。这样做会令人困惑且非常愚蠢。]

但从你的评论来看，这可能不是你真正想要做的。

根据您的评论，您的错误示例可能具有误导性，您真正想要做的是：

```
typedef class A K;   // forward declare A as class and declare K as typedef for it 
```

这为尚未定义的类型声明了一个 typedef。

前向声明一个 typedef 是没有用的，你不能用它做任何事情，因为你不知道它是什么类型的 typedef *，*而且你在 C++ 中几乎没有什么可以做的事类型。在不知道它是对象类型、引用类型还是函数类型的情况下，您实际上可以做的就是为它声明另一个 typedef！

考虑：

```
typedef K;   // declares K to be a typedef

K* f();      // function returning pointer to K
void g(K*);  // function taking pointer to K 
```

我想你是说你希望它是有效的，所以你希望这能奏效吗？

```
K* k = f();
g(k); 
```

那应该有效，对吧？您不需要知道的类型，`K`因为您只传递指向它的指针，对吗？错误的。如果你以后`K`这样定义怎么办：

```
typedef int& K; 
```

现在有无效`f`的签名。`int&* f()`您必须知道 typedef 是什么的 typedef *，*因此它的声明必须说明它*不仅仅是*向前声明它作为名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T18:16:35.187

让我解决第一个错误：

1.  您创建类 A：此时，将名称“A”分配给该类；此范围内的任何其他实体都不能称为“A”。
2.  然后你 typedef 让 K 现在指代 A，所以在这个范围内没有其他实体可以称为“K”。
3.  然后你尝试转发声明 K。转发声明本身很好，但名称 K 已经被你的 typedef 使用了。在这一点上，它与 A 几乎没有关系。您也无法转发声明 A，这两个名称都已被您以前的用途所采用。

你到底想做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T02:05:02.270

我在 C++2003 标准中找不到这个东西。但是 C 编译器不允许这样的事情，因为 typedef 构造定义了新类型，然后您尝试通过*类 A*再次定义新类型。

原则上，两个用例允许使用**“前向声明类” ：**

1.  类型定义名称
2.  指向结构的指针

这两个操作都不需要有关 sizeof 类型及其内存布局的信息。同样在上面的列表中没有“引用”，因为在 C 语言中没有引用。

*另请参阅：（Samuel P. Harbison，Guy L.Steele] CA 参考资料，第 151 页。*

# vbscript - VB 脚本 - 动态数组

> ID：14444292
> 
> 赞同：0
> 
> 时间：2013-01-21T17:42:20.443
> 
> 标签：vbscript

我想了解动态数组初始化。在下面的代码中，为什么即使在输入“y”的值后也没有设置数组大小。即使在给 Y 赋值为 4、5 或任何值之后，Lbound 和 Ubound 都显示为 0。

请给我解释一下。谢谢你。

```
Dim i

Redim arr(y)

y = cint(InputBox("Enter value of y"))

Msgbox Lbound(arr)

Msgbox Ubound(arr) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:43:18.227

您应该在询问价值*后*Redim 。

# java - 如何使用 MVC 注解？

> ID：14444293
> 
> 赞同：0
> 
> 时间：2013-01-21T17:42:28.913
> 
> 标签：java, spring, spring-mvc

我认为我所做的一切都是正确的，但我的所有页面（如 /main/signup.htm）上仍然出现 404。我有点迷失在这里可能缺少的东西（与xml配置等效的东西，但我想用注释来做到这一点 - 这是一个教育项目，我团队的其他成员对spring等更不熟悉比我现在，所以我认为至少在 java 文件中进行一些配置将有助于缓解它们）。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0"> 

    <servlet>
        <servlet-name>springapp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>springapp</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>
            index.jsp
        </welcome-file>
    </welcome-file-list>

</web-app> 
```

springapp-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd" >

    <mvc:annotation-driven />
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>
    </bean>

</beans> 
```

MainController（省略导入）：

```
@Controller
@RequestMapping("/main")
public class MainController {

    @RequestMapping(value="/default.htm", method=RequestMethod.GET)
    public String defaultAfterLogin(HttpServletRequest request) {
        if(request.isUserInRole("ADMIN")) {
            return "redirect:/main/admin.htm";
        } else {
            return "redirect:/main/signup.htm";
        }
    }
    @RequestMapping(value="/signup.htm", method=RequestMethod.GET)
    public ModelAndView signup() {
        return new ModelAndView("signup");
    }

    @RequestMapping(value="/admin.htm", method=RequestMethod.GET)
    public ModelAndView admin() {
        return new ModelAndView("admin");
    }

} 
```

catalina.out 的一些相关部分：

```
INFO: Deploying web application archive /home/hannes/.tomcat/apache-tomcat-7.0.34/webapps/login_proto-1.0.0.war
Jan 21, 2013 6:33:15 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'springapp': initialization started
Jan 21, 2013 6:33:15 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing WebApplicationContext for namespace 'springapp-servlet': startup date [Mon Jan 21 18:33:15 CET 2013]; root of context hierarchy
Jan 21, 2013 6:33:15 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/springapp-servlet.xml]
Jan 21, 2013 6:33:15 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@499bb935: defining beans [mvcContentNegotiationManager,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,viewResolver]; root of factory hierarchy
Jan 21, 2013 6:33:15 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'springapp': initialization completed in 332 ms
Jan 21, 2013 6:33:22 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/login_proto-1.0.0/auth/login.htm] in DispatcherServlet with name 'springapp'
Jan 21, 2013 6:38:04 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/login_proto-1.0.0/main/default.htm] in DispatcherServlet with name 'springapp' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:51:27.703

将`<context:component-scan base-package="your.package.controller" />`标签添加到您的`springapp-servlet.xml`

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd 
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <mvc:annotation-driven />

    <context:component-scan base-package="your.package.controller" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>
    </bean>

</beans> 
```

# php - 如何使用 PHP sscanf() 格式化字符串

> ID：14444297
> 
> 赞同：0
> 
> 时间：2013-01-21T17:42:45.277
> 
> 标签：php, formatting

我试图了解 sscanf() 函数在 PHP 中的工作原理

在下面的两个代码片段中，我没有得到任何格式化的输出。我对 sscanf() 函数做错了什么？

谢谢

片段#1

```
<?php
$input = '1235551234';
sscanf($input, "%3s%3s$4s", $a, $b, $c);
echo '(' . $a . ') ' . $b . '-' . $c;
?> 
```

返回： () -

斯米皮特#2

```
<?php
$input = 1235551234;
sscanf($input, "%3s%3s$4s", $a, $b, $c);
echo '(' . $a . ') ' . $b . '-' . $c;
?> 
```

返回： () -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:47:36.983

```
sscanf($input, "%3s%3s$4s", $a, $b, $c);
                      ^---- typo? should be %? 
```

有了它`$`，它可能正在寻找文字字符序列`$`, `4`，`s`这在您的号码中不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:51:00.030

请试试这个。你的格式有误。

```
 $input = '1235551234';
    sscanf($input, "%3s%3s%4s", $a, $b, $c); // good
 // sscanf($input, "%3s%3s$4s", $a, $b, $c); // bad

    echo '(' . $a . ') ' . $b . '-' . $c; 
```

# c++ - 错误 C2061：语法错误：标识符，但已包含头文件

> ID：14444301
> 
> 赞同：1
> 
> 时间：2013-01-21T17:43:03.233
> 
> 标签：c++, syntax-error, identifier

我有一个大型游戏引擎要编译，它运行良好，直到我做了一些疯狂的调整。编译器不知何故无法重新调整我的平均 Game 对象并产生`error C2061: syntax error : identifier 'Game'`，而且似乎无论我编译什么文件，错误总是指向一个名为的文件，`GameDataLoader.h`即使这两个文件绝对没有联系。通常我认为这是一个包含问题，但事实是我已经`Game.h`包含在每个必要的 .h 文件中，就在包含 stdafx.h 之后，我已经`#pragama once`在它之上。我考虑过循环包含问题，但是`#pragma once`应该注意这一点。另外，在我更改一些文件名和其他杂乱的东西之前，这个包含指令可以正常工作。我清理了整个解决方案并尝试重建它，但仍然没有运气（使用 VS2012）。我不知道显示代码是否会有所帮助，但这里是`gameDataLoader.h`. 这不是我写的文件，但它应该可以正常工作。

```
#pragma once
#include "stdafx.h"
#include "Game\Game.h" // Game.h included

class GameDataLoader
{
public:
    GameDataLoader(){} 
    ~GameDataLoader(){}

void GameDataLoader::loadGameProperties( Game *game, map<wstring, wstring> *properties, wstring gameInitFile);

    virtual void loadGame(Game *game, wstring gameInitFile) = 0;
    virtual void loadGUI(Game *game, wstring guiInitFile) = 0;
    virtual void loadWorld(Game *game, wstring levelInitFile) = 0;
}; 
```

而且我在带有 Game 对象的那 4 行中出现了错误。可能是什么问题？双重包容？循环包容？还是不包括某些东西和其他地方？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T17:50:54.957

最有可能的`Game.h`是`GameDataLoader.h`，直接或间接地包括创建循环依赖；但你忘了给我们`Game.h`看，所以我不能确定。

如果是这种情况，那么`#pragma once`（或等效的包含保护）将意味着一个标题将在另一个之前包含，并且第二个的声明将不适用于第一个。它不会神奇地将它们都包含在彼此之前，因为这是不可能的。

幸运的是，`GameDataLoader.h`不需要 的完整定义`Game`，因为它只处理指向它的指针。因此，您可以删除包含`Game.h`并只声明`class Game;`。

# django - django-haystack：预测方面

> ID：14444302
> 
> 赞同：0
> 
> 时间：2013-01-21T17:43:05.590
> 
> 标签：django, elasticsearch, django-haystack

我正在尝试查看[django-haystack](http://django-haystack.readthedocs.org/en/latest/faceting.html)是否适合我的刻面需求。目前我想在我的方面附近显示数字。假设我们有一个模型显示在他们的文档中，但有一个额外的分面字段（例如作者写笔记的风格......例如风格是经典的或现代的）。所以索引看起来像这样。

```
class NoteIndex(SearchIndex, indexes.Indexable):
    text = CharField(document=True, use_template=True)
    author = CharField(model_attr='user', faceted=True)
    style = CharField(model_attr='style', faceted=True)
    pub_date = DateTimeField(model_attr='pub_date') 
```

现在我制作了一个搜索查询集，并缩小到方面作者，例如 john。现在我想显示如果我将与 John 一起选择另一位作者（例如 +10 篇文章）将出现多少产品的估计值。关于从样式中添加额外方面的同样问题......我该怎么做。搜索 BE 是弹性搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:05:32.413

SearchQuerySet的[facet_counts](http://django-haystack.readthedocs.org/en/v1.2.7/searchqueryset_api.html#facet-counts)方法可以满足您的要求：

```
results = SearchQuerySet().filter(text='some product').facet('author')
counts = results.facet_counts()
author_results = counts['fields']['author']
author_counts = {author: num_products for author, num_products in author_results} 
```

然后，您可以将 John 的产品数量和其他作者的产品数量相加。如果您要将搜索范围扩大到两者，这将为您提供产品数量：

```
num_john_products = author_counts.get('John', 0)
num_bob_products = author_counts.get('Bob', 0)
total = num_john_products + num_bob_products 
```

或者，您甚至可以找到除 John 之外拥有最多产品的作者，并显示结果数量（如果您还要将该作者包括在搜索中）：

```
author_counts.pop('John')
most_popular_author = max([(count, author) for author, count in author_counts])
count, author = most_popular_author
total_john_and_most_popular = num_john_products + count 
```

# blackberry - 在编译我的 BlackBerry phonegap 应用程序时减少“需要签名”的数量

> ID：14444303
> 
> 赞同：0
> 
> 时间：2013-01-21T17:43:05.970
> 
> 标签：blackberry, code-signing

我正在构建一个 Cordova / Blackberry 应用程序，并且正在努力将程序加载到我的设备上进行测试。

当我第一次构建 phonegap 代码时，它需要 54 个代码签名，当运行`ant blackberry load-device`50 个签名时，每 10 次尝试失败 7 次。（没有响应从 BB 服务器返回，并且它永远不会完成构建）。

在应用程序上做了一些工作后，我今天去设备上测试，突然发现我现在需要 642 个签名。这永远行不通。

黑莓如何决定我需要多少签名？我怎样才能将其恢复到可管理的水平？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:52:51.477

您的应用程序的大小在很大程度上决定了这一点。

当您构建一个 BlackBerry 应用程序时，它会被打包成一个 .cod 文件。但是，在几乎所有情况下，单个 .cod 文件实际上是一个包含较小 .cod 文件的容器。如果您重命名生成的单个 .cod 文件（例如，从 MyApp.cod 到 MyApp.zip），您实际上可以使用普通解压缩工具将其解压缩，并查看里面的内容。

应用程序的二进制文件越大，在这个外部 .cod 容器中创建的小 cod 文件就越多。我不记得所有的遗留问题，但基本上，构建工具会将应用程序分成许多小代码，以使每个代码保持在大约 64 KB 以下。（我认为这是因为网络下载限制。）所以，应用程序越大，鳕鱼越多。

代码签名将需要应用于**每个**鳕鱼（我认为每个鳕鱼发生 3 次）。

您的应用程序的总大小将取决于您拥有多少代码，尤其是捆绑资源的大小，例如图像。您当然可以使用更少的图像，并更多地压缩它们（例如使用 PNGCrush）。或者，您可能决定让您的应用在运行时下载这些捆绑的内容。显然，这是用应用程序大小换取运行时性能。我通常不会建议仅仅为了避免 codesigner *spam*，但它是一种选择。

您用于编译应用程序的操作系统也可能会影响大小。如果您不再**需要**支持 OS 5.0，并且您一直在使用 6.0 基本 OS 版本进行构建，您可能会考虑降到 5.0 以最小化您的应用程序的最终大小。当然，这假设您*可以*做到这一点，并且您不依赖于 6.0 或 7.x 功能。

但是，我知道有些人已经*停止支持*较旧的操作系统版本，而他们可能仍然可以这样做。无论如何，我认为这不会像捆绑的图像那样对您产生重大影响。

顺便说一句，我只是偶尔遇到黑莓代码签名服务器超时的问题。您的开发机器是否有可能存在不稳定的互联网连接？您可以尝试[在此处查找有关签名服务器在线状态的近实时信息](https://stackoverflow.com/a/4714794/119114)

这里还有一些其他需要阅读的内容：

[http://supportforums.blackberry.com/t5/Java-Development/Issues-with-the-maximum-number-of-CODs-for-an-app/mp/1237881](http://supportforums.blackberry.com/t5/Java-Development/Issues-with-the-maximum-number-of-CODs-for-an-app/m-p/1237881)

[针对较小的 .cod (.jar) 文件进行优化](https://stackoverflow.com/q/1162217/119114)

[http://supportforums.blackberry.com/t5/Testing-and-Deployment/The-maximum-size-of-a-BlackBerry-smartphone-application/ta-p/1300209](http://supportforums.blackberry.com/t5/Testing-and-Deployment/The-maximum-size-of-a-BlackBerry-smartphone-application/ta-p/1300209)

# c - 在 Direct3D 游戏上重新映射键

> ID：14444304
> 
> 赞同：0
> 
> 时间：2013-01-21T17:43:08.333
> 
> 标签：c, keyboard, directx, simulate, sendinput

我正在尝试重新映射游戏的一些键（Elsword）。

首先，我使用这段代码来模拟按下的键：

```
#define WINVER 0x0500

#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include "dinput.h"

int main()
{
    HWND hWndMain = FindWindow(0, "Elsword");
    SetForegroundWindow(hWndMain);

    Sleep(3000);

    INPUT input[2];

    input[0].type=INPUT_KEYBOARD;
    input[0].ki.wScan = DIK_V; // direct-input scancode for key '1'
    input[0].ki.dwFlags=KEYEVENTF_SCANCODE;

    input[1].type=INPUT_KEYBOARD;
    input[1].ki.wScan = DIK_V; // direct-input scancode for key '1'
    input[1].ki.dwFlags=KEYEVENTF_SCANCODE | KEYEVENTF_KEYUP;

    SendInput(2,input,sizeof(INPUT));

    Sleep(1000);
    return 0;
} 
```

在所有其他应用程序中它工作正常，但在游戏窗口中它什么也不做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:10:35.270

请注意，挂钩 Direct3D 只会让您访问与图形相关的功能，而不是与输入相关的功能。要挂钩使用 Direct3D 的游戏，您需要挂钩 DirectInput（如果游戏使用它），或者使用 SentInput 或 PostMessage。如今，大多数游戏都使用标准的 Windows 消息作为鼠标，以及 DirectInput 或他们自己的自定义键盘实现。另请注意，SendInput API 是系统范围的，并且需要正确的目标窗口才能获得焦点。此外，一些游戏会创建一个额外的窗口来充当 D3D 窗口的客户区域上的不可见层，从而导致混淆哪个窗口句柄是正确的窗口句柄来发送输入消息。

要检查您的游戏是否使用 Windows 消息进行输入，请打开 Spy++ 并在窗口模式下运行您的游戏。单击“进程”按钮，右键单击游戏的进程并选择“消息”。然后单击“记录选项”按钮并切换到“消息”选项卡。从这里，您可以选择“键盘”和“鼠标”，或按住 CTRL 键并从列表中选择/取消选择单个消息。之后，点击 OK 并在目标应用程序中测试您的键盘和鼠标。如果您看到任何与鼠标相关的消息，那么您就知道 SendInput、PostMessage、SetWindowsHookEx 和可能的 mouse_event() 将适用于鼠标。如果您看到任何与键盘相关的消息，那么您知道 SendInput、PostMessage、SetWindowsHookEx 和可能的 keyb_event() 将适用于键盘。

如果您没有看到任何有关键盘的消息，那么最有可能采取的措施是检查该进程是否加载了 dinput.dll 或 dinput8.dll，如果加载，则安装一个钩子（谷歌“直接输入钩子”） . 如果没有，那么您可以检查 Dependency Walker、IDA 或 OllyDbg 中加载的每个模块，看看它们是否实现了自己的键盘处理程序，但此时事情变得相当复杂，需要大量的 ASM 知识和逆向工程技术。但是，如果您熟悉开发驱动程序，那么这可能会有所帮助：[SendInput Not working for Games](https://stackoverflow.com/questions/5762007/sendinput-not-working-for-games)

# gdal - 如何设置 GDAL_DATA 环境变量指向包含 EPSG csv 文件的目录？

> ID：14444310
> 
> 赞同：28
> 
> 时间：2013-01-21T17:43:23.750
> 
> 标签：gdal

我想在这个 netcdf 文件中包装（重新投影）一个变量。

```
D:\ gdalwarp -t_srs EPSG:4326 NETCDF:"C:\fie.nc":var "C:\Desktop\SM.img" 
```

但我得到这个错误：

> 错误 4：无法打开 EPSG 支持文件 gcs.csv。尝试将 GDAL_DATA 环境变量设置为指向包含 EPSG csv 文件的目录。
> 
> 错误 1：翻译源或目标 SRS 失败：EPSG:4326

我正在使用 GDAL 1.9.0，于 2011 年 12 月 29 日发布。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-22T18:08:39.420

您可以在 Windows 中以图形方式编辑环境变量（例如[this](http://www.computerhope.com/issues/ch000549.htm)或[this](https://superuser.com/q/949560/79304)）。

添加一个系统变量，其名称`GDAL_DATA`和值是共享 GDAL 数据的路径（一个包含多个文件的文件夹，如`coordinate_axis.csv`、`gcs.csv`、`pcs.csv`和其他文件）。

要使环境变量生效，您需要运行`cmd.exe`，或注销，或其他方法。

另见：[http ://trac.osgeo.org/gdal/wiki/FAQInstallationAndBuilding#HowtosetGDAL_DATAvariable](http://trac.osgeo.org/gdal/wiki/FAQInstallationAndBuilding#HowtosetGDAL_DATAvariable)

* * *

### Anaconda / Miniconda 用户

GDAL 库和命令行工具可通过（例如）`conda install gdal`

`GDAL_DATA`激活环境时正确设置变量。如果您启动 Anaconda Prompt，这将为您完成，否则您可以[按照文档中的说明激活环境](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#activating-an-environment)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-16T23:02:05.380

您还可以使用 --config 开关：

```
D:\ gdalwarp --config GDAL_DATA "D:/my/gdal/data" -t_srs EPSG:4326 NETCDF:"path":Soil_Moisture "C:\Desktop\SM.img" 
```

见：[http ://trac.osgeo.org/gdal/wiki/ConfigOptions](http://trac.osgeo.org/gdal/wiki/ConfigOptions)

有关配置选项的信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-05T20:29:38.363

我尝试以`GDAL_DATA`编程方式（C#）设置变量，@turgay 的解决方案对我不起作用。[在这里](http://osgeo-org.1560.x6.nabble.com/When-does-the-env-var-GDAL-DATA-get-processed-td3753192.html)我找到了工作方式：

```
OSGeo.GDAL.Gdal.SetConfigOption("GDAL_DATA", path+@"\gdal\data"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-29T08:53:54.470

您还可以用于以编程方式制作（使用 C# API）。示例代码：

```
string path = @"C:\abc\";
_SetValueNewVariable("GDAL_DATA", path + "\\data");
_SetValueNewVariable("GEOTIFF_CSV", path + "\\data");
_SetValueNewVariable("GDAL_DRIVER_PATH", path + "\\gdalplugins");

private static void _SetValueNewVariable(string sVar, string sValue)
{
    if (System.Environment.GetEnvironmentVariable(sVar) == null)
    {
        System.Environment.SetEnvironmentVariable(sVar, sValue);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-03T10:50:49.667

在命令提示符下，我曾经通过指向要使用的位置（以及哪个 gdal-data）来设置 GDAL_DATA 路径：

> 设置 GDAL_DATA=C:\Program Files\PostgreSQL\9.3\gdal-data

我是从[http://clhenrick.github.io/thesis-blog/procrastination/portfolio-work/2014/09/27/procrastinating/](http://clhenrick.github.io/thesis-blog/procrastination/portfolio-work/2014/09/27/procrastinating/)学到的，即使我已经在环境变量中设置了它，我也总是需要执行上述操作. 我的问题似乎是安装问题，但我不想重新安装任何东西......但是。

作为一个临时解决方案，虽然我没有时间做一个更永久的解决方案，但我删除了环境变量中现有的 GDAL_DATA 路径，关闭计算机，打开它，创建一个新的，关闭计算机，打开它再次。固定的！

由于我的系统的古怪行为，完全关闭不会重新启动。

# actionscript-3 - AS3 从静态类引用舞台

> ID：14444315
> 
> 赞同：0
> 
> 时间：2013-01-21T17:43:41.047
> 
> 标签：actionscript-3, class, static, scope, stage

我需要在静态类中访问舞台，我发现的解决方案是将舞台作为参数传递并在我的类的函数中使用它，但这似乎有点难看，有没有更好的方法来访问舞台Main 中不需要任何东西的静态类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:35:52.533

Stage 没有对其实例的静态访问，因此您始终必须自己组织它（例如，flex3 与 SystemManager 和 Application 实例具有相似的逻辑）。在需要它的类中有一个公共静态属性阶段（例如它可以是 Tooltip 或 CursorManager）并在应用程序初始化过程中设置此属性是一种正常的实现，因为 Flash 应用程序总是具有阶段：

```
Main.as:

private function init():void
{
    Tooltip.init(stage);
    CursorManager.init(stage);
    ...
} 
```

这是一种低耦合解决方案，您可以将注入用于舞台属性。

# css - IE 8 中的粘滞页脚仅在直接访问页面后才会重叠内容

> ID：14444317
> 
> 赞同：0
> 
> 时间：2013-01-21T17:43:53.230
> 
> 标签：css, internet-explorer-8, sticky-footer

我遇到了一个相当奇怪的问题：

在我目前正在创建的一个网站上，我使用了一个在 Firefox、Chrome、Safari 和 IE 9 中运行良好的粘性页脚。

它实际上也适用于 IE 8，但仅在通过来自同一站点的另一个页面的链接访问该站点时。直接访问站点（或重新加载）时，页脚不会显示在页面的末尾，而是在其上方一点点，与那里的内容重叠。

如果我单击该页面上在灯箱中打开的图像，页脚会以某种方式移回其所需位置。

当我在本地环境中查看站点时，页脚也可以正常工作，问题仅出现在生产网络服务器（或我上传到的任何其他在线空间）上。

这是相关的页脚代码，如果您需要更多，请告诉我（不幸的是，我无法让您访问该网站）：

HTML：

```
<!DOCTYPE html>
<html>
    <head>
       <link href="css/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    </head>
    <body>
     <div class="wrapper">
         <div class="content">
             <!-- Content etc goes here -->
         </div>
         <div class="push"></div>
     </div>
     <div class="footer">
         <!-- Footer goes here -->
     </div>
    </body>
 </html> 
```

CSS：

```
html, body {
    height: 100%;
}

div.wrapper {
    width: 960px;
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -154px;
}

div.push {
    height: 154px;
}

div.footer {
    position: relative;
    width: 960px;
    height: 154px;
    margin: 0 auto 0 auto;
    clear: both;
    overflow: hidden;
} 
```

我感谢任何帮助，如果您需要更多信息或者我错过了什么，请告诉我。

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:50:02.383

可能是布局问题。尝试

```
.footer {zoom: 1;} 
```

# ibm-mobilefirst - IBM Worklight 应用程序通用 pdf 文件访问

> ID：14444333
> 
> 赞同：1
> 
> 时间：2013-01-21T17:45:01.373
> 
> 标签：ibm-mobilefirst

我想使用 WL.App.OpenURL('http://localhost:8080/AbcProj/apps/myApp/common/test.pdf','_blank'); 尽管该文件存在于所述路径中

其引发错误 http 错误 404

访问 /AbcProj/apps/myApp/common/test.pdf 时出现问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:02:34.510

我使用过 OpenURL，它对我来说很好用。

```
WL.App.OpenURL('http://localhost:8080/AbcProj/apps/myApp/common/test.pdf','_blank'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:13:12.633

使用 WL API（或 PhoneGap/Cordova）实际上不可能做到这一点。它只是不是为此而设计的。请参阅[https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14855386곚](https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14855386&#14855386)。

一种可能的解决方案是使用 ChildBrowser，它是一个 Cordova 插件，使用本机 WebView 打开它。请参阅[使用电话间隙打开 pdf](https://stackoverflow.com/questions/10481045/open-pdf-using-phone-gap/10481904#10481904)。

ChildBrowser 的问题是您需要在您部署的每个平台中实现它，即。安卓、iOS等

另一种可能的解决方案是让平台使用本机查看器打开 PDF。例如，如果您在 Android 的 GMail 中打开一个 PDF，它会将您踢出到 Android 的 PDF 查看器。这应该通过一个指向 PDF 的外部链接来实现。一旦用户单击它，WL 就会将它们踢出到本机浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T14:46:45.747

你可以试试：

```
 window.open("test.pdf","_blank","location=no"); 
```

并使用相对路径。

在worklight 5.0.6（和phonegap）上，如果使用phonegap包含cordova.js，这应该可以工作，否则新窗口上的“关闭”按钮将不会出现（因为它将使用本机Web视图的window.open ，在 worklight 上，构建过程应包含使 window.open 行为符合预期所需的 .js）。

[http://docs.phonegap.com/en/2.7.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.7.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T06:21:01.427

查看模块 16 及其示例。这可能是您正在寻找的东西。 [http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fstart%2Fc_gettingstarted.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fstart%2Fc_gettingstarted.html)

# php - Excel-View 的下载选项

> ID：14444345
> 
> 赞同：1
> 
> 时间：2013-01-21T17:45:34.757
> 
> 标签：php, yii, export-to-excel, phpexcel, yii-extensions

我已经在应用程序文件夹中创建了 **Test.xlsx**文件，但**我真的想给用户一个下载它的选项。**
但我想生成一个**临时**excel 文件，该文件被传输到客户端，之后，**该文件将被销毁**。我也厌倦了传输运行时生成的 Test.xlsx 文件，但由于文件权限，我无法这样做，即我的 Test.xlsx 文件仅用于读取模式。

实现这一目标的最佳方法是什么？这是我到目前为止写的几行代码。

```
// code for excel generation from sqlDataProvider.
 $factory = new CWidgetFactory(); 
    Yii::import('ext.eexcelview.EExcelView',true);  
            $widget = $factory->createWidget($this,'EExcelView', array(
                'dataProvider'=>$dataprovider,
                'grid_mode'=>'export',
                'title'=>'Title',
                'creator'=>'TNC',
                'autoWidth'=>true,
                'filename'=>'Test.xlsx',
                'stream'=>false,

                'disablePaging'=>false,
                'exportType'=>'Excel2007',
                'columns'=>array(
                    'First_Name',
                    'Middle_Name',
                    'Last_Name',
        'showTableOnEmpty' => false,
            ));

            $widget->init();
            $widget->run(); 
```

并下载：

```
$filename = "Test.xlsx";
//@chmod($filename1,0777 );

header("Cache-Control: public");
header("Content-Description: File Transfer");
header('Content-disposition: attachment; filename='.basename($filename));
header('Content-type: application/vnd.ms-excel', true);
header("Content-Transfer-Encoding: binary");
header('Content-Length: '. filesize($_SERVER['DOCUMENT_ROOT'].$filename));
readfile(Yii::app()->params['secureBaseUrl'].$filename); 
```

正如我所说，由于新生成文件的文件权限，此代码段无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:00:52.403

我实际上在我的一个项目中使用了这个扩展。这就是我所做的：

在您的一个控制器中添加此

```
 public function behaviors(){
        return array(
            'toExcel'=>array(
                'class'=>'ext.eexcelview.EExcelBehavior',
            ),
        );
    } 
```

然后，在同一个控制器中创建一个动作，即：

```
 public function actionExport(){
        $model=new CLASS_NAME('search');

        $this->toExcel('CLASS_NAME',
        array(
            array(
            'name'=>'ATTRIBUTE',
            'value'=>'$data->ATTRIBUTE."adding some custom string"',
            ),               
        ),
        'Test File', // file name
        array(
            'creator' => 'Zen', // file info
            ),
        'Excel5', // file type
        );
    } 
```

然后你应该`controller/export`在浏览器中调用，它会为你创建一个临时的 excel 文件。您也可以使用此扩展名导出到其他文件格式。

此示例将从表中导出每条记录，但是您可以创建一种方法来仅返回部分结果或仅返回一行。该行为的工作方式几乎完全一样`CGridView`，您可以使用关系、行的自定义值等。

大部分信息也可以在[扩展程序的页面](http://www.yiiframework.com/extension/toexcel/)上找到

# matlab - 并行工具箱抱怨数组未在 MATLAB 中为函数句柄切片

> ID：14444348
> 
> 赞同：1
> 
> 时间：2013-01-21T17:46:02.987
> 
> 标签：matlab, parallel-processing

我有这段代码，我想并行运行。传递给包含 parfor 循环的函数的参数之一是函数句柄，然后在 parfor 循环内执行该句柄。像这样

```
[X] = randstep( X,params,roomfun )
  ...
  parfor i=1:N
    while ~ok
      X(:,i) = A*X(:,i);
      if roomfun(X(:,i))
        ok = 1;
      end
    end
  end 
```

然而，MATLAB 抱怨 roomfun，说它被索引但没有被切片。当然不是这种情况，因为它是可以在没有其他循环迭代的情况下正常执行的函数。

有什么方法可以告诉matlab这是一个函数，或者我可以通过另一种方式组织循环以使其并行运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:12:49.020

首先，这只是一个警告，而不是错误。所以`parfor`循环应该运行得很好。

其次，关于某些内容被索引但未切片的警告来自 mlint，虽然非常好，但并不理解所有内容，因此如果它解释错误，请不要担心。

第三，在 R2012b 中，我什至不再收到警告（mlint 变得更聪明了），这进一步表明没有什么可担心的。

最后，如果确实存在切片问题，它仍然不是会阻止循环并行运行的问题 - 所有警告都说数组被完整发送给工作人员，这可能会减慢`parfor`循环速度以防万一数组很大。

# c - 在c中标记原始字符串

> ID：14444353
> 
> 赞同：0
> 
> 时间：2013-01-21T17:46:17.317
> 
> 标签：c, parsing, token, space

我想标记一个字符串，但是以一种非常特殊的方式。

我有以下字符串，由 3 组单词组成，用空格分隔：

> 字符串 = abc def ghi

问题是我想将**字符串**变量的所有内容加载到另一个字符串中，直到第二个空格。也就是说，我想得到：

> 结果 = abc def

不仅是 abc（该解决方案在其他论坛中）。请注意，每个单词的长度可能不同。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:51:18.643

> 我想在一个字符串中加载字符串变量的所有内容，直到第二个空格

怎么样：

```
char *space = strchr(string, ' ');
if (!space)
    error;
space++;
space = strchr(space, ' ');
if (!space)
    error; 
```

或者，如果您知道总会有 3 个单词，请执行单个`strrchr`（反向）。或者也许做 2`sscanfs`然后加入字符串，或者 2 `strtok`s 等等。

# bash - （Bash）重命名文件，但给它一个新的扩展名，它将计数..（md5sum）

> ID：14444354
> 
> 赞同：0
> 
> 时间：2013-01-21T17:46:16.510
> 
> 标签：bash, rename, md5sum

我需要重命名文件夹中的所有文件并给它一个新的文件扩展名。我知道如何使用 bash 重命名文件。我遇到的问题是，我需要将其重命名为：

`file.01` `file.02` `file.03`并计算找到的所有文件。

有人可以给我一个从哪里开始的例子吗？

这就是我需要的：

```
md5sum * | sed 's/^\(\w*\)\s*\(.*\)/\2 \1/' | while read LINE; do
   mv $LINE
done 
```

但这并没有给它一个扩展`file.01` `file.02` `file.03`等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:53:59.083

如果有人从字面上阅读您的要求...

```
counter=0
for file in *; do
  read sum _ <<<"$(md5sum "$file")"
  printf -v file_new "%s.%02d" "$sum" "$counter"
  mv -- "$file" "$file_new"
  (( counter++ ))
done 
```

这比从 md5sum 的输出中读取文件名效率低，但更可靠，因为 globbing 可以安全地处理具有不寻常名称（换行符、特殊字符等）的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:28:32.347

这条线：

```
i=0
for f in *
do
   if [ -f $f ]; then 
     i=`expr $i + 1` 
     if [ $i -lt 10 ]; then 
       i=0$i
     fi
     sum=`md5sum $f | cut -d ' ' -f 1` 
     mv $f $sum.$i 
   fi
done 
```

# jquery - jQuery 和 JSONP - 跨域和同域

> ID：14444355
> 
> 赞同：2
> 
> 时间：2013-01-21T17:46:22.810
> 
> 标签：jquery, jsonp

我理解 JSONP 如何工作的理论，但是关于细节或语法的一些东西让我望而却步。我正在处理的示例是“引用旋转器”，它在带有 JSON 的单个域上运行良好，但我也想在另一个域上使用它，只更新一个数据源。

（旁注：我很奇怪，当调用域是 subdomain.mydomain.com 时，从 mydomain.com 请求会弹出 CORS 问题。希望子域不受影响！！）

我有一个用静态函数填充的 JSON 文件，如下所示：

```
quotator.testimonialFetch(
{
    "testimonials": [
        {
            "quote": "Amazing product!",
            "quotedName": "Somebody",
            "quotedTitle": "Director of Yoyos",
            "company": "Kramerica",
            "products": ["product1"],
            "yearmonth": 201212,
            "active": true
        },
        {
            "quote": "Never seen anything like it.",
            "shortquote": "When quote is too long, use this.",
            "quotedName": "Fflewddur Fflam",
            "quotedTitle": "",
            "company": "Prydain",
            "products": ["product1","product2"],
            "yearmonth": 201212,
            "active": false
        }
    ]
}
); 
```

我没有使用`$.getJSON`速记（附加回调），而是使用更详细的`$.ajax()`方法：

```
$.ajax({
   type: 'GET',
    url: 'http://www.mydomain.com/assets/testimonials.json',
    async: false,
    jsonpCallback: 'quotator.testimonialFetch',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function(json) {
       console.log('success!');
       console.dir(json.testimonials);
    },
    error: function(e) {
       console.log('some sort of error!');
       console.log(e.message);
    }
}); 
```

它不会记录成功，但会记录错误，无论我是从 mydomain.com 还是 sub.mydomain.com 中进行调用。错误是某些东西是“未定义的”。不确定那可能是什么。

所以，最主要的是......不确定将处理逻辑放在哪里。它应该直接进入 的回调`$.ajax()`吗？我确实创建了一个与填充名称匹配的函数，它确实接收了数据对象：

```
quotator.testimonialFetch = function(data) {
// using the document ready function as a safety net; maybe I don't need to defer?
$(document).ready(function() {
        quotator.quoteobj = data.testimonials;
        console.log(quotator.quoteobj); // logs the object I'm expecting! Yay!
        };
    });
} 
```

知道它做了什么并不重要，或者至少我认为它不重要。重要的是：

`$.ajax()`-当从 sub.mydomain.com进行调用时，逻辑启动，引号被处理，结果有点成功......“有点”，因为虽然`$.ajax`调用返回了 JSONP，但错误回调是触发，然后使用回调函数正确处理数据......？！

-`$.ajax()`从 mydomain.com 拨打电话时，我得到了我想要的对象，但我无法处理它。我可以看到我的 JSONP 响应，但`$.ajax`成功回调本身没有处理，因为触发了错误回调。然后`quotator.testimonialFetch()`没有触发......由于是同域而不是跨域？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:04:32.267

您不能使用 JSONP 进行错误回调或同步 AJAX。[文档](http://api.jquery.com/jQuery.ajax/)似乎没有为同一服务器调用例外。

# ruby-on-rails - 我们什么时候知道应该使用符号？

> ID：14444356
> 
> 赞同：1
> 
> 时间：2013-01-21T17:46:25.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我试图理解的代码，目前令人困惑的部分是代码中的 :product_id ，特别是 ":product_id" 的 ":" 部分 我的问题是我们应该如何知道我们应该使用那个 ":" ？

```
def up
    # replace multiple items for a single product in a cart with a single item
    Cart.all.each do |cart|
      # count the number of each product in the cart
      sums = cart.line_items.group(:product_id).sum(:quantity)

      sums.each do |product_id, quantity|
        if quantity > 1
          # remove individual items
          cart.line_items.where(product_id: product_id).delete_all

          # replace with a single item
          item = cart.line_items.build(product_id: product_id)
          item.quantity = quantity
          item.save!
        end
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:06:42.780

符号：

*   基本上是字符串常量
*   被创建一次。ie`:product_id`无论何时使用它都会是同一个对象。因此，它们可以节省内存。另一方面，如果您`"product_id"`多次编写，您基本上是在创建尽可能多的字符串对象
*   除非您在符号上使用 to_s 方法，否则无法利用 Reg-ex 和插值（大部分）

简而言之，对不需要处理或修改的短字符串常量使用符号。

*例如：符号非常适合散列等中的键。明白了吗？*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T20:21:21.813

符号只是指向包含其名称的对象的指针，而字符串始终是不同的对象。

如果您要在代码中多次重复一个名称，则使用一个符号，这相当于只使用一个对象。

例如，如果您`"France"`在代码中使用字符串 a 100 次，您更愿意使用`:France`. 优点是在第一种情况下您将实例化 100 个对象，而在第二种情况下只有一个。

在您的示例中，您可能会感到困惑，因为`product_id: product_id`Hash 是以 JSON 样式表示的。这将相当于`:product_id => product_id`

# c# - 将具有布尔值和文本的类数据绑定到 XMAL

> ID：14444359
> 
> 赞同：0
> 
> 时间：2013-01-21T17:46:34.307
> 
> 标签：c#, xaml

## 我不小心提交了这个，我自己修好了，写完问题后就不提交了。但是从评论中学到了，谢谢！

我正在尝试在 win8 中创建一个简单的 todo 应用程序，并最终希望将其加入 ToDoIst API。我创建了一个简单的任务类来尝试了解数据绑定，但是我无法让它做我想做的事情。我使用过列表框和其他基本表单元素。

## 任务.cs

```
class task
{
    private string content;
    private bool complete;

    public string Content
    {
        get {return content;}
        set { content = value; }
    }
    public bool Complete
    {
        get { return complete; }
        set { complete = value; }
    }

    public task(string content)
    {
        Content = content;
        Complete = false;
    }
} 
```

## 主页.xaml

目前我的 XAML 看起来像这样。

```
<GridView HorizontalAlignment="Left" Margin="482,190,0,0" VerticalAlignment="Top" Width="400" Height="500">
        <ListView x:Name="LVtasks" HorizontalAlignment="Left" Height="500" VerticalAlignment="Top" Width="400" ItemsSource="{Binding}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Content}"/>
                        <RadioButton/>
                    </StackPanel>   
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </GridView> 
```

我已经输入了一些虚拟数据，4 个元素，当我运行它时，它出现了 4 个带有单选按钮的框，但是没有文本（文本有空间）我不确定如何绑定布尔值？

我看不出我做错了什么。如果有人可以帮助并指出正确的方向，我已经搜索了相当多的教程，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:36:16.387

对于`RadioButton` `IsChecked`is 绑定到 bool 属性的属性：

```
<RadioButton IsChecked="{Binding Path=Complete}"/> 
```

您的文本很可能不会显示，因为您尚未设置任何更改通知，并且在设置`Content`值之前发生绑定。使用[INotifyPropertyChanged 接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.110%29.aspx)是最常见且通常也是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:02:50.443

你的代码看起来有点奇怪，也许这就是你想要的：

```
<ListView x:Name="LVtasks" HorizontalAlignment="Left" Height="500" VerticalAlignment="Top" Width="400" ItemsSource="{Binding ToDoItems}">
    <ListView.ItemTemplate>
        <DataTemplate>
            <RadioButton GroupName="ToDos" Content="{Binding Content}" IsChecked="{Binding IsComplete}"/>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

你真的想要[单选按钮](http://www.wpftutorial.net/RadioButton.html)吗？我认为您想要[Checkboxes](http://msdn.microsoft.com/en-us/library/system.windows.controls.checkbox.aspx)，不同之处在于，当您使用单选按钮时，只能“选中”组中的一个

我在后面使用了这段代码来获得数据上下文：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

            ToDoItems = new ObservableCollection<TodoItem>(new List<TodoItem>
                {
                    new TodoItem("Content1"),
                    new TodoItem("Content2")
                });
        this.DataContext = this;
    }
    public ObservableCollection<TodoItem> ToDoItems { get; set; }
} 
```

我将任务名称更改为 ToDoItem 任务已经是框架中的一个类，可能会引起混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T20:05:27.477

就像约翰已经提到的那样，您应该真正让包含您的列表视图的窗口实现 INotifyPropertyChanged 接口。并像 Johan 所说的那样设置窗口的数据上下文。在属性的每个设置器中调用 propertychanged 方法很重要。使用 ObservableCollection 作为列表视图的 ItemSource 也很有用。尝试创建 ObservableCollection 的实例，为其创建一个属性，在其设置器中调用 propertychanged 方法，将列表视图的 ItemSource 设置为该属性。每当您从集合中添加或删除项目时，不要忘记调用 propertychanged

# javascript - 如何访问子类中 getter 的超类值？

> ID：14444360
> 
> 赞同：6
> 
> 时间：2013-01-21T17:46:37.333
> 
> 标签：javascript, inheritance, overriding, typescript

在派生类中访问`super`a 的值`getter`似乎不起作用：

```
class Foo {
    private _message:string = "Hello,";

    public get Message():string {
        return this._message;
    }
}

class Bar extends Foo {
    public get Message():string {
        return super.Message + " World";
    }   
}

var snafu:Bar = new Bar();
document.write(snafu.Message);

// Expected: "Hello, World"
// Actual: "undefined World" 
```

如何正确覆盖 a`getter`并使用该`super`值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T20:51:58.953

我不一定赞同您继续采用这种方法，但是...

```
class Bar extends Foo {
    public get Message():string {
        return Object.getOwnPropertyDescriptor(Foo.prototype, 'Message').get.apply(this) +  ' World';
    }   
} 
```

原型继承并没有使这变得特别简单。

# html - svg图片不显示

> ID：14444361
> 
> 赞同：0
> 
> 时间：2013-01-21T17:46:37.033
> 
> 标签：html, svg

这是下面的代码我没有看到让它启动和运行的东西吗？

```
<svg base="http://www.w3.org/2000/svg" x="550" y="475" style="border: 3px solid blue;">
   <image xlink:href="app3.JPG" x="100" y="75" width="300" height="167" id="image1" />
 </svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:24:37.027

那里没有你想要 xmlns 的基础属性。您也没有定义 xlink 命名空间。

如果您在 html 中嵌入 SVG，您也应该为`<svg>`元素指定宽度和高度。100% 可能是你想要的。

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="550" y="475" width="100%" height="100%" style="border: 3px solid blue;">
   <image xlink:href="app3.JPG" x="100" y="75" width="300" height="167" id="image1" />
 </svg> 
```

您可能还需要将 div 的宽度/高度指定为样式。

# c - 从索引 1 开始的错误 memcpy

> ID：14444362
> 
> 赞同：0
> 
> 时间：2013-01-21T17:46:39.180
> 
> 标签：c, memcpy

我得到错误的`memcpy`日志。

我想取`*q`（指针大小的数组`inNumberOfFrames`）。

我想每次都将它复制到一个新数组`buffersRing[ringNum][inNumberOfFrames]`中。

当`buffersRing[ringNum][0]`我保存 q 的大小时，q 的`inNumberOfFrames`其余部分保存到 `buffersRing[ringNum][1]-buffersRing[ringNum][inNumberOfFrames]`.

我做 ：

```
buffersRing[ringNum][0]=inNumberFrames;
memcpy(buffersRing[ringNum]+1, q, inNumberFrames); 
```

我得到错误的价值观。这里有什么问题？

编辑：

但是这样做而不是复制效果很好：

```
 for( int k=1;k<inNumberFrames+1;k++)
     buffersRing[ringNum][k]=q[k-1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:58:47.430

我相信呼吁`memcpy()`应该是：

```
memcpy(buffersRing[ringNum]+1, q, inNumberFrames * sizeof *q); 
```

因为您要复制.`inNumberFrames`的一个元素占用的字节数`q`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:59:45.750

看起来您的`memcpy`呼叫的来源和目的地确实重叠。

`memmove`在这种情况下你应该打电话。

# c++ - 试图将对象存储在向量中

> ID：14444363
> 
> 赞同：1
> 
> 时间：2013-01-21T17:46:47.253
> 
> 标签：c++

我对 C++ 很陌生，我正在尝试将对象存储在 std::vector 中，如下所示：

事件.h：

```
//event.h
class Event
{
public:
    Event();
    Event(std::string name);
    ~Event();
    void addVisitor(Visitor visitor);

private:
    std::vector<Visitor> m_visitors;

}; 
```

事件.cpp：

```
//event.cpp
Event::Event() :
    m_name("Unnamed Event")
{

}
Event::Event(std::string name) :
    m_name(name)
{

}
void Event::addVisitor(Visitor visitor)
{
    this->m_visitors.push_back(visitor);
}
void Event::listVisitors()
{
    std::vector<Visitor>::iterator it;
    for(it = this->m_visitors.begin();it != this->m_visitors.end(); ++it)
    {
        std::cout << it->getName() << std::endl;
    }
} 
```

访客.h：

```
//visitor.h
class Visitor
{
    public:
    Visitor();
    Visitor(std::string name);
    ~Visitor();
    std::string getName() const;
    void listVisitors();

    private:
    std::string m_name;
}; 
```

访客.cpp：

```
//visitor.cpp
Visitor::Visitor() :
    m_name("John Doe")
{

}
Visitor::Visitor(std::string name) :
    m_name(name)
{

}
std::string Visitor::getName() const
{
    return m_name;
} 
```

主.cpp：

```
//main.cpp
int main()
{
    Event *e1 = new Event("Whatever");
    Visitor *v1 = new Visitor("Dummy1");
    Visitor *v2 = new Visitor("Dummy2");

    e1->addVisitor(*v1);
    e1->addVisitor(*v2);
} 
```

如果我这样做，我将不得不添加一个复制构造函数来进行深层复制，以便将对象正确复制到向量中。我正在寻找一种解决方法，只将指向对象的指针存储在向量中。我已经尝试过`std::vector<std::unique_ptr<Visitor> > m_visitors`，但是在 main.cpp 中调用 addVisitor 时出现了一些错误。当然，我相应地更改了班级成员的声明。成员和成员函数的适当声明如何使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:03:50.800

从风格上讲，如果您要传递指针，只需接受指针作为函数参数。

上面的示例代码中发生的情况是，访问者被复制为函数参数，并且您拥有的指针未被主函数之外的任何东西引用。

我无法说出您看到的错误是什么，因为您没有描述它们，但它可能与不兼容的类型有关。

只需摆脱`new`s 因为对于这些数据结构它们是不必要的。

```
int main()
{
    Event e1("Whatever");
    Visitor v1("Dummy1");
    Visitor v2("Dummy2");

    e1.addVisitor(v1);
    e1.addVisitor(v2);
} 
```

我建议，如果你不知道如何使用指针，你不可能想要存储它们（当按值复制工作正常时，它们是 IMO 存储在向量中的麻烦）。

编译器生成的复制构造函数应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:32:14.857

不需要手动深拷贝，因为您使用的非常正确`std::string`，它支持[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。

然而，你的`main`函数有三个内存泄漏——反正没有必要在`new`那里使用，所以干脆不要。

* * *

一般经验法则：

**如果在任何时候*T*，您正在考虑在代码中引入更多指针，那么您可能走错了方向。**

# c++ - C++ 内存释放

> ID：14444365
> 
> 赞同：3
> 
> 时间：2013-01-21T17:46:53.403
> 
> 标签：c++, memory-management

我正在尝试测试我对 C++ 内存分配的理解。

对于以下程序：

```
{
    int a=0;
} 
```

由于`a`是在堆栈外分配的，所以当变量超出范围时应该释放它，对吗？

好吧，够简单的。这个案子怎么办：

```
{
    Matrix m(50, 20);
} 
```

假设有一个矩阵类，我正在创建一个具有 50 行和 20 列的新类。显然，并不是所有的内存都可以在堆栈外分配，因为 50 和 20 可以在运行时填充。所以我猜在构造函数的某个地方，他们从堆中分配内存。

当超出范围时`m`调用析构函数？那个析构函数应该释放（删除）它分配的内存吗？

现在真的很难了：

```
{
    Matrix t;
    {
        Matrix m(50, 20);
        t=m;
    }
} 
```

那会发生什么？t 是否被分配到 m 的内存位置？还是它会复制 m 中的数据？如果 t 是对 m 的引用，那么当 m 超出范围时会发生什么？m 上的析构函数是否被调用？还是等到 t 超出范围才调用 t/m 的析构函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:53:34.390

> 当超出范围时，调用 m 上的析构函数？那个析构函数应该释放（删除）它分配的内存吗？

是的，通常是的。

> 现在真的很难了：

```
{
    Matrix t;
    {
        Matrix m(50, 20);
        t=m;
     }
} 
```

> 那会发生什么？t 是否被分配到 m 的内存位置？还是它会复制 m 中的数据？

发生的情况是调用了赋值运算符：

```
t.operator=(m); 
```

`Matrix`确保有效语义由您（ 的实现者）决定。有几种可能的方法：

1.  赋值运算符可以复制`m`的数据。在这种情况下，寿命和所有权没有任何困难。然而，在这种方法中，分配是昂贵的。
2.  赋值运算符可以`t`指向与 相同的数据`m`。这可能是可行的，但需要非常小心以确保正确管理数据的生命周期，并且修改一个矩阵不会意外修改另一个矩阵。一种方法是保留一个指向数据的[引用计数指针](http://en.wikipedia.org/wiki/Reference_counting)，并在修改数据时使用[写时复制。](http://en.wikipedia.org/wiki/Copy-on-write)一些较旧的实现`std::string`属于这种类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:50:56.253

实际上，这很容易。

在第一种情况下，你是对的。自动分配，自动解除分配。

在第二种情况下，它并没有什么不同。Matrix 类构造函数处理它需要的任何额外内存，它的析构函数应该释放它。

在第三类中，内部范围变量被复制到外部范围变量。Matrix 类应遵循三规则，因此应正确处理副本。

所有这些都假设 Matrix 的正确实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:02:22.563

C++ 内存分配非常简单，对象范围也是如此。C++ 类设计没有*那么*简单。

在您的示例中，每次关闭大括号时，本地对象 a 或 m 或 t （对于上一个示例中的外部大括号集）超出范围并调用它们的析构函数。在 int 的情况下，析构函数很简单，会删除堆栈上的对象。对于 m，它是类*Matrix*的自定义析构函数，对于任何受人尊敬的库，您可以假设它正确地释放了对象。

使 t 复杂化的不是析构函数，而是来自 m 的赋值。在大多数矩阵类的实现中，*t = m*会导致 m 的内容被复制到 t 中，而 t 将在堆上拥有自己的内存。然后随着每个对象超出范围，它们相应的内存被释放。

如果实现更复杂，那么由类设计器来确保它正确处理每个对象的销毁（并且您要正确使用库以便它可以）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T18:09:51.643

```
What happens then? Does t get assigned to the memory location of m? 
```

这是对复制构造函数的调用，默认情况下会进行成员明智的复制。

但是如果您重载了赋值运算符，那么您可以分配引用或创建一个完整的新对象，这取决于您。

对于其余的问题：

调用析构函数取决于您是显式调用它还是将其保留为默认值。默认情况下，当变量或对象超出范围时将调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T18:17:48.360

你对 int 是正确的。调用分配时，堆栈上会占用 int 大小的空间，当变量超出范围时，该 int 将“弹出”堆栈，并且内存可以再次使用。

使用 Matrix，您并非 100% 正确。仅仅因为数据是在运行时分配的，并不意味着它不能在堆栈上分配，只要堆栈上有空间放置它。这里发生的是，当您创建矩阵时，*它*被推入堆栈。它在堆栈上占用的空间量取决于它的管理方式。在其构造函数中，它可能会为堆分配内存，或者它可能只是占用一大块堆栈空间。如果堆栈上没有空间，您将在运行时收到堆栈溢出异常。

你是对的，*如果它确实在构造时分配内存，它**应该**在销毁时清理它*。但*它不必*，并且在某些情况下不应该（例如，如果它实际上不再“拥有”该内存，因为它已与另一个对象共享/共享它）。

在你的最后一种情况下，会发生什么：

```
Matrix t; 
```

**这将使用类的默认构造函数**创建一个 Matrix 。它是否在此处保留任何内存取决于构造函数在其中的内容。它可能会保留内存，但可能不会。

```
Matrix m(50, 20); 
```

这将使用该类的不同构造函数创建一个 Matrix。同样，它可能会保留内存，但也可能不会（例如，在将一些“真实”数据添加到其中之前，它可能不会占用堆栈上的空间以外的任何空间）

```
t=m; 
```

这里发生的事情再次取决于班级。此时，this不是构造函数，而是t的赋值函数：

```
Matrix& operator=(const Matrix& m){
    ....
} 
```

被调用。有些赋值构造函数会复制数据，有些会复制指向数据的指针，但不会复制实际数据本身。然而，在后一种情况下，类*应该*通过拒绝删除数据，而是依靠 t 的构造函数来处理 m 超出范围的情况。**但同样，他们不必这样做，而且可能做得很糟糕（尤其是在控制变得复杂的情况下）**

**关键的一点是，一旦达到类创建和销毁的级别，内存的处理方式取决于类的实现。**

# c# - WCF - 如何调试“签名验证失败”消息

> ID：14444366
> 
> 赞同：1
> 
> 时间：2013-01-21T17:47:08.677
> 
> 标签：c#, wcf, soap, wcf-security, wss4j

我创建了一个调用 Spring Web Services 2.1.0 + Apache WSS4J 1.6.7 (WS-Sec 1.1) 服务器并返回响应的 WCF 客户端。

WCF 抱怨**“消息安全验证失败”**和`InnerException`“**签名验证失败”**

问题是，我没有其他方法可以调试它，因为它在生产服务器上。我有 WCF 记录往返的 SOAP 和抛出的异常，运行服务器的人说他们可以很好地处理响应（即他们在验证签名时没有遇到问题）

关于如何进一步调试的任何想法？我可以创建一个控制台应用程序来验证 SOAP 吗？

我已经能够通过他们的服务器向他们的服务器发送请求并收到响应，所以我一直在尝试通过控制台应用程序验证这一点，以便我可以看到响应出错的地方，但无法让控制台应用程序进行验证XML 或者 - 当我运行请求和响应时，CheckSignature 总是返回 false。

注意：我尝试设置`xmlDoc.PreserveWhitespace`为`true`和`false`

任何帮助表示赞赏

还要注意 - 下面的代码只是我为了测试签名而放在一起的东西。实际的服务绑定/服务客户端是一个单独的应用程序。绑定如下：

```
<customBinding>
        <binding name="MY_BINDING">
          <transactionFlow/>
          <security defaultAlgorithmSuite="Basic256Rsa15" authenticationMode="MutualCertificate"
                    messageSecurityVersion="WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
                    requireDerivedKeys="false" messageProtectionOrder="SignBeforeEncrypt" 
                    allowSerializedSigningTokenOnReply="true" securityHeaderLayout="Lax" >
            <secureConversationBootstrap authenticationMode="CertificateOverTransport"
                                         messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10"
                                         requireDerivedKeys="false" />
          </security>
          <textMessageEncoding messageVersion="Soap11WSAddressing10"/>
          <httpsTransport requireClientCertificate="true"/>
        </binding>
      </customBinding> 
```

从代码绑定 - 检索和修改配置 XML 绑定

```
public static CustomBinding GetServiceBinding()
        {            
            //Get custom binding reference from app.config
            CustomBinding binding = new CustomBinding(SettingsLookup.WcfCustomBindingName);
            binding.ReceiveTimeout = new TimeSpan(0, 0, 15, 0);
            binding.SendTimeout = new TimeSpan(0, 0, 15, 0);

            // Get the x509ProtectionParams from the security element
            X509SecurityTokenParameters tokenParameters = new X509SecurityTokenParameters();
            tokenParameters.X509ReferenceStyle = X509KeyIdentifierClauseType.IssuerSerial;
            tokenParameters.RequireDerivedKeys = false;
            tokenParameters.InclusionMode = SecurityTokenInclusionMode.AlwaysToRecipient;

            // Reference the asymettric security element            
            AsymmetricSecurityBindingElement securityBindingElement = binding.Elements.Find<AsymmetricSecurityBindingElement>();
            // Set the X509SecurityTokenParameters to point to the one's just configured. This is for symetric encryption, for asymetric this line needs to change
            //securityBindingElement.ProtectionTokenParameters = tokenParameters;
            securityBindingElement.MessageSecurityVersion = MessageSecurityVersion.WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;
            securityBindingElement.InitiatorTokenParameters = tokenParameters;
            securityBindingElement.LocalClientSettings.DetectReplays = false;
            securityBindingElement.RequireSignatureConfirmation = true;
            //Set timestamp to false as it's not in the VHI request
            securityBindingElement.IncludeTimestamp = true;
            securityBindingElement.LocalClientSettings.TimestampValidityDuration = new TimeSpan(12,0,0);

            return binding;
        } 
```

此应用程序仅用于检查我直接在 SOAP 信封中输入的签名，以希望调试签名并查看失败的原因

```
// TEST PROGRAM JUST FOR CHECKING SIGNATURE, CONSOLE APP SEPERATE FROM MAIN APP
class Program
        {
            static void Main(string[] args)
            {
                XmlDocument xmlDoc = new XmlDocument();
                xmlDoc.PreserveWhitespace = true;
                xmlDoc.LoadXml(Resource1.request);

                X509Certificate2 cert = new X509Certificate2(@"D:\TEMP\certs\pub_and_private_key.pfx", "password");

                bool result = ValidateSoapBodySignature(xmlDoc, cert);

            }

        public static bool ValidateSoapBodySignature(XmlDocument doc, X509Certificate2 cert)
        {
            // *** Load the doc this time
            SignedXmlWithId sdoc = new SignedXmlWithId(doc);

            // *** Find the signature and load it into SignedXml
            XmlNodeList nodeList = doc.GetElementsByTagName("Signature", "http://www.w3.org/2000/09/xmldsig#");
            sdoc.LoadXml((XmlElement)nodeList[0]);

            // *** Now read the actual signature and validate
            bool result = sdoc.CheckSignature(cert, true);

            return result;
        }

    }

    public class SignedXmlWithId : SignedXml
    {
        public SignedXmlWithId(XmlDocument xml)
            : base(xml)
        {
        }

        public SignedXmlWithId(XmlElement xmlElement)
            : base(xmlElement)
        {
        }

        public override XmlElement GetIdElement(XmlDocument doc, string id)
        {
            // check to see if it's a standard ID reference
            XmlElement idElem = base.GetIdElement(doc, id);

            if (idElem == null)
            {
                XmlNamespaceManager nsManager = new XmlNamespaceManager(doc.NameTable);
                nsManager.AddNamespace("u", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd");

                idElem = doc.SelectSingleNode("//*[@u:Id=\"" + id + "\"]", nsManager) as XmlElement;
            }

            return idElem;
        }
    } 
```

例外

```
System.ServiceModel.Security.MessageSecurityException: Message security verification failed. 

---&amp;gt; System.Security.Cryptography.CryptographicException: The signature verification failed.
   at System.IdentityModel.SignedXml.VerifySignature(HashAlgorithm hash, AsymmetricSignatureDeformatter deformatter, String signatureMethod)
   at System.IdentityModel.SignedXml.StartSignatureVerification(SecurityKey verificationKey)
   at System.ServiceModel.Security.WSSecurityOneDotZeroReceiveSecurityHeader.VerifySignature(SignedXml signedXml, Boolean isPrimarySignature, SecurityHeaderTokenResolver resolver, Object signatureTarget, String id)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ProcessPrimarySignature(SignedXml signedXml, Boolean isFromDecryptedSource)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ExecuteSignatureEncryptionProcessingPass()
   at System.ServiceModel.Security.LaxModeSecurityHeaderElementInferenceEngine.ExecuteProcessingPasses(ReceiveSecurityHeader securityHeader, XmlDictionaryReader reader)
   at System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)
   at System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message&amp;amp; message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.AsymmetricSecurityProtocol.VerifyIncomingMessageCore(Message&amp;amp; message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp;amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   --- End of inner exception stack trace ---</ExceptionString><InnerException><ExceptionType>System.Security.Cryptography.CryptographicException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>The signature verification failed.</Message><StackTrace>   at System.IdentityModel.SignedXml.VerifySignature(HashAlgorithm hash, AsymmetricSignatureDeformatter deformatter, String signatureMethod)
   at System.IdentityModel.SignedXml.StartSignatureVerification(SecurityKey verificationKey)
   at System.ServiceModel.Security.WSSecurityOneDotZeroReceiveSecurityHeader.VerifySignature(SignedXml signedXml, Boolean isPrimarySignature, SecurityHeaderTokenResolver resolver, Object signatureTarget, String id)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ProcessPrimarySignature(SignedXml signedXml, Boolean isFromDecryptedSource)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ExecuteSignatureEncryptionProcessingPass()
   at System.ServiceModel.Security.LaxModeSecurityHeaderElementInferenceEngine.ExecuteProcessingPasses(ReceiveSecurityHeader securityHeader, XmlDictionaryReader reader)
   at System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)
   at System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message&amp;amp; message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.AsymmetricSecurityProtocol.VerifyIncomingMessageCore(Message&amp;amp; message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp;amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)</StackTrace><ExceptionString>System.Security.Cryptography.CryptographicException: The signature verification failed.
   at System.IdentityModel.SignedXml.VerifySignature(HashAlgorithm hash, AsymmetricSignatureDeformatter deformatter, String signatureMethod)
   at System.IdentityModel.SignedXml.StartSignatureVerification(SecurityKey verificationKey)
   at System.ServiceModel.Security.WSSecurityOneDotZeroReceiveSecurityHeader.VerifySignature(SignedXml signedXml, Boolean isPrimarySignature, SecurityHeaderTokenResolver resolver, Object signatureTarget, String id)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ProcessPrimarySignature(SignedXml signedXml, Boolean isFromDecryptedSource)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ExecuteSignatureEncryptionProcessingPass()
   at System.ServiceModel.Security.LaxModeSecurityHeaderElementInferenceEngine.ExecuteProcessingPasses(ReceiveSecurityHeader securityHeader, XmlDictionaryReader reader)
   at System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)
   at System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message&amp;amp; message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.AsymmetricSecurityProtocol.VerifyIncomingMessageCore(Message&amp;amp; message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp;amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates) 
```

**肥皂**

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <s:Header>
    <a:Action s:mustUnderstand="1" u:Id="_3">http://www.xxx.com/xxx/v1/submitRequest</a:Action>
    <a:MessageID u:Id="_4">urn:uuid:d9d6ae53-4e63-4e2d-86bf-954684d26fd8</a:MessageID>
    <a:To s:mustUnderstand="1" u:Id="_5">https://urigoeshere.com/</a:To>
    <a:From u:Id="_6">
      <a:Address>http://ourcompany.com/</a:Address>
    </a:From>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <u:Timestamp u:Id="uuid-01f867d2-f5c2-4587-a83d-0878a2342bd9-1">
        <u:Created>2013-01-21T17:12:31.213Z</u:Created>
        <u:Expires>2013-01-22T05:12:31.213Z</u:Expires>
      </u:Timestamp>
      <o:BinarySecurityToken u:Id="uuid-81deba4d-1a68-4f53-bb59-3c618914d683-2" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">OMITTED</o:BinarySecurityToken>
      <e:EncryptedKey Id="_0" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
        <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/>
        <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
          <o:SecurityTokenReference>
            <o:KeyIdentifier ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509SubjectKeyIdentifier" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">oNEIRj8uPIkIP4+BfAo/CmYDwzk=</o:KeyIdentifier>
          </o:SecurityTokenReference>
        </KeyInfo>
        <e:CipherData>
          <e:CipherValue>OMITTED</e:CipherValue>
        </e:CipherData>
        <e:ReferenceList>
          <e:DataReference URI="#_2"/>
        </e:ReferenceList>
      </e:EncryptedKey>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo>
          <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
          <Reference URI="#_1">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>17c5Wuh9MNl4i/ytgwm9flLkAnY=</DigestValue>
          </Reference>
          <Reference URI="#_3">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>2YgeR5vFw0ICk8r+wiaVYknO4E8=</DigestValue>
          </Reference>
          <Reference URI="#_4">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>NepAQ8htbWWBy0ghljlVfMw5lr0=</DigestValue>
          </Reference>
          <Reference URI="#_5">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>ynr1icJszUi4OG5vt0usO0419As=</DigestValue>
          </Reference>
          <Reference URI="#_6">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>y8jXxE1bLmeg6vJi9iqKczNvEDo=</DigestValue>
          </Reference>
          <Reference URI="#uuid-01f867d2-f5c2-4587-a83d-0878a2342bd9-1">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>qlv+YHU/bxsWvEo/HYVZY9RfqQY=</DigestValue>
          </Reference>
        </SignedInfo>
        <SignatureValue>O6MK3Etk/OIXkSTngGaN+W1JPTrbV2/K0ulnTS69o1/NvmDfpdlkb67TR+UNnCBwVEiV0ILZfQkl9zVhMMpB0lOeM3zzJ5f97dh1WLkGeQm7U2G+ZTN0QFA/O4HZ2yADhzRlPLp29hNdjGBdky99b0oeFyU2hq8qdpIWwKMCDkHlGyftKb4t51yZSc+6uJKYhv3uXSmFMJAYZ6tlTfYa5Cc0jLileNx6I9+tyg73oJZsTEyc+cDZZqdxEmXLrAyt0kz0fcpGWrNKCrKuQlaMsV/KkJYVHSohPpJYWUrrtGmOfiWWhQuwlCIUIxCwR8HBpspFOK8IHEuu+kBQgKrx3g==</SignatureValue>
        <KeyInfo>
          <o:SecurityTokenReference>
            <o:Reference ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" URI="#uuid-81deba4d-1a68-4f53-bb59-3c618914d683-2"/>
          </o:SecurityTokenReference>
        </KeyInfo>
      </Signature>
    </o:Security>
  </s:Header>
  <s:Body u:Id="_1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <e:EncryptedData Id="_2" Type="http://www.w3.org/2001/04/xmlenc#Content" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
      <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc"/>
      <e:CipherData>
        <e:CipherValue>OMITTED</e:CipherValue>
      </e:CipherData>
    </e:EncryptedData>
  </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T20:00:28.127

除了启用 WCF 安全跟踪之外，我还建议您调试 .net 框架代码。为此，您必须按照此处所述配置 VS：

[http://referencesource.microsoft.com/setup.html](http://referencesource.microsoft.com/setup.html)

您还可以下载框架源代码并根据 wcf 跟踪检查引发异常的部分代码中究竟发生了什么。

# javascript - Uncaught SyntaxError: Unexpected token {

> ID：14444374
> 
> 赞同：-6
> 
> 时间：2013-01-21T17:47:30.463
> 
> 标签：javascript, jquery, html

```
(cdn_url = "", LazyLoad.js("maps/map0.js" {maps_loaded[0] = true})) 
```

它一直说未捕获`SyntaxError: Unexpected token {`

现在说它不见了`[`

全线：

```
if (("" == window.location.port || "80" == window.location.port) && !/\/wiki/.test(window.location.pathname)) window.location = window.location.protocol + "//" + window.location.hostname + ":" + config.http_port + window.location.pathname;
var map = [],
    on_map = [],
    maps_loaded = {}, cdn_url = "localhost";
"80" != window.location.port ? (cdn_url = "", LazyLoad.js("maps/map0.js", {
    maps_loaded[0] = true
})) {
    maps_loaded[0] = true
})) : LazyLoad.js(cdn_url + "maps/map0.js?" + map_hashes[0], function () {
    maps_loaded[0] = true
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:49:10.413

后面是否需要逗号：

```
"maps/map0.js" 
```

之前：

```
{maps_loaded[0]=true} 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:49:38.603

形成我所看到的 - 在第一个参数传递给 LazyLoad.js 函数后你缺少昏迷 - >它应该是 (cdn_url="",LazyLoad.js("maps/map0.js", {maps_loaded[0]=true}) )

# http - 检查通过代理路由的请求如何到达目的地

> ID：14444377
> 
> 赞同：4
> 
> 时间：2013-01-21T17:47:43.243
> 
> 标签：http, proxy, request

我的网络应用程序向第三方服务器发出请求，我们有时通过代理将它们路由。我希望能够“看到他们看到的”——看看请求通过代理后的样子。

具体来说，我感兴趣的是，一旦请求到达目的地，通过代理路由后，请求中留下了多少关于源（我的 Web 应用程序）的识别信息。

有谁知道一个简单的方法来做到这一点？也许一个 Web 服务只会在传出响应中回显有关传入请求的所有信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:33:08.463

不是一个完整的答案，但也许你可以尝试：

[http://www.cantoni.org/2012/01/08/simple-webservice-echo-test](http://www.cantoni.org/2012/01/08/simple-webservice-echo-test)

那里提到的其他 2 个网站： [http ://respondto.it/](http://respondto.it/) [http://requestb.in/](http://requestb.in/)

设置 URL 以发送您的请求并查看提供的信息是否对您有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:40:48.773

我只是说这是我想到的一个想法。您可以尝试将请求发送到**您自己**控制的 URL（即您自己的 Web 应用程序中的资源）。这样，您可以使用您的调试基础设施或其他工具（基本上任何您想要的）来检查进入您的应用程序的请求。在我看来，这可能是最强大/最简单的方法。它不会让您测试您尝试测试的 URL，但就代理可见性而言，它可能是您所需要的。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:52:33.253

如果代理支持 TRACE 方法和 Max-Forwards 标头，您可以使用它。然而，并非所有人都这样做。

# javascript - 如何在 Google 地理图表中自定义工具提示文本

> ID：14444378
> 
> 赞同：1
> 
> 时间：2013-01-21T17:47:48.363
> 
> 标签：javascript, tooltip, google-visualization

我需要删除工具提示中的第一个空字符串。我使用格式化程序，将第一个字符串更改为“”，但我无法删除它。如果我将 '' 更改为 null，则在第一个字符串中显示第一列数据。

![在此处输入图像描述](../Images/75f0e46fefb63000e165e3aae32f8a55.png)

代码：

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'State');
data.addColumn('number', 'TempNumber');
data.addColumn({
    type: 'string',
    role: 'tooltip'
});
data.addRows([
    ['Ohio', 0, 'Ohio'],
    ...
]);
var options = {
    width:      580,
    region:     'US',
    resolution: 'provinces',
    colorAxis:  {colors: ['#abb7df']},
    legend:     'none'
};
var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
var formatter = new google.visualization.PatternFormat('');
    formatter.format(data, [0,1,2]);

chart.draw(data, options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:10:42.143

不幸的是，目前没有简单的方法可以做到这一点（无需绘制您自己的工具提示函数来绘制框）。将来，希望他们能实现[isHtml: true](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content) to geocharts，但目前不支持。

Tooltip 在其当前实现中无法执行您希望它执行的操作。您可以减小文本大小，但这也会减小您要显示的文本的大小。您可以更改颜色，但它会再次影响整个工具提示。除了实现自己的工具提示形式（创建一个函数，该函数将获取鼠标悬停的任何内容的第 0 列值，并将其显示在页面中的单独部分中，您实际上没有太多可以解决的问题，或者让它计算你的鼠标在哪里并在那里显示）。

# redirect - 会话超时后如何自动重定向到主页

> ID：14444379
> 
> 赞同：0
> 
> 时间：2013-01-21T17:47:48.643
> 
> 标签：redirect, liferay, liferay-6, session-timeout, portal

我想在会话超时后自动将控制重定向到我的社区主页。

我尝试将以下属性放入我的`portal-ext.properties`文件中，但会话超时后它不会自动转到社区主页，但是如果我单击任何链接或按钮，它会返回主页。

任何人都可以让我知道如何在会话超时后将控制权自动转移到主页，而不是单击任何按钮或链接。

```
session.id.delimiter=
session.id.weblogic.delimiter=!
session.timeout=5
session.timeout.warning=1
session.timeout.auto.extend=false
session.timeout.redirect.on.expire=true
default.landing.page.path=/web/demo/home
last.modified.check=false
theme.css.fast.load=true
javascript.fast.load=true
hibernate.show_sql=false
com.liferay.portal.servlet.filters.threadlocal.ThreadLocalFilter=true
com.liferay.portal.servlet.filters.unsyncprintwriterpool.UnsyncPrintWriterPoolFilter=true
jsp.writer.buffer.size=0
finalize.manager.thread.enabled=true

session.enable.phishing.protection=true 
```

**环境：** Liferay 6.0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T08:22:05.520

将以下属性添加/更新到您的 portal-ext.properties 文件：

```
default.logout.page.path=/web/guest/home 
```

`auth.login.url=/web/guest/home`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-28T06:07:17.673

default.logout.page.path=/web/guest/home 是注销后重定向到的 url。

如何在会话超时后自动注销并重定向到 /web/guest/home？目前我们在仪表板页面上托管了一些小部件。当用户在会话超时后单击任何小部件时，将打开一个新选项卡并重定向到 /web/guest/home。会话超时后如何自动从仪表板页面注销

# c# - 您可以使所有线程中的所有代码都可以访问对象的方法吗？

> ID：14444381
> 
> 赞同：0
> 
> 时间：2013-01-21T17:47:51.920
> 
> 标签：c#, wpf, multithreading, user-interface

*感谢大家对这个问题感兴趣。你们中的一些人要求更清楚地了解所涉及的代码，因此为了提供更多信息，我将对其进行编辑以提供更多细节。*

关于[我之前的问题](https://stackoverflow.com/questions/14409204/emulating-a-console-with-a-wpf-window)，我正在尝试在 WPF 窗口中模拟基本控制台（仅限文本输出）。它适用于在后台运行大量代码并在单独线程上运行的程序。这段代码也严重依赖 while 循环，因此我的计划是将 WPF 控制台窗口保留在主线程上（以及可能需要的任何其他 GUI 窗口）并在单独的线程上执行所有代码。

该窗口有一个 WriteLine 方法，使用如下：

```
mainConsole.WriteLine("This is a message for the user.", SomeSender); 
```

其余代码将需要定期调用此方法。

附加信息：

*窗口本身由包裹在 Scroller 中的 Textblock 组成。窗口的 WriteLine 方法将消息和格式（字体、字体大小和颜色 - 取决于消息的发送者）添加到包含此信息的对象列表中，然后显示这些消息的列表，包括它们的格式）作为文本块的内容。该方法完全按照预期工作，因此不需要重写，只需要可访问即可。*

我试图使这个描述尽可能简洁。有关更多信息，请参阅[我之前的问题](https://stackoverflow.com/questions/14409204/emulating-a-console-with-a-wpf-window)。

所以我现在的问题是：**是否有一种有效的方法可以使窗口的 WriteLine 方法可用于任何类的所有线程，从而使我能够像 Console.WriteLine() 一样使用它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:58:30.853

虽然您有多种选择，但听起来，就您而言，任何人在任何地方都能够写入您的控制台确实很有意义。鉴于此，我会创建这样的东西：

```
public class MyConsole
{
    public static event Action<string> TextWritten;
    public static void Write(object obj)
    {
        string text = (obj ?? "").ToString();
        if (TextWritten != null)
            TextWritten(text);
    }

    public static void WriteLine(object obj)
    {
        Write(obj + "\n");
    }
} 
```

然后让您的控制台表单订阅该`TextWritten`事件，并在写入文本时将该文本写入控制台。（确保首先编组到 UI 线程。）

与让此类直接处理您的表单相比，在这里使用和事件的主要优点是您可以轻松添加额外的事件处理程序，允许您与标准输入/输出交互，向文件添加额外的日志记录，拥有多个控制台表单立即打开，等等。这种灵活性对于调试（即向平面文件的附加写入）和生产（允许通过标准输入/输出更轻松地重定向）都很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:12:17.023

您似乎正在尝试编写一个日志服务，该服务允许您从代码中的任何位置访问日志。您提到了线程，因此您必须注意并相应地处理该同步。

我会首先创建一个`ILogger`这样的界面：

```
public interface ILogger
{
  void Log(string line);
  void Log(string format, params object[] args);
} 
```

然后是一个适当的`Logger`基类：

```
public abstract class Logger : ILogger
{
  public abstract void Log(string line);

  public virtual void Log(string format, params object[] args)
  {
    Log(string.Format(format, args));
  }
} 
```

当然，您将需要一个实际的实现：

```
using System.Collections.Concurrent;
using System.Threading.Tasks;

public class ConcurrentLogger : Logger, ILogger, IDisposable
{
  bool isDisposed;
  BlockingCollection<string> loggedLines;
  Action<string> callback;

  public ConcurrentLogger(Action<string> callback)
  {
    if (callback == null)
      throw new ArgumentNullException("callback");

    var queue = new ConcurrentQueue<string>();
    this.loggedLines = new BlockingCollection<string>(queue);

    this.callback = callback;

    StartMonitoring();
  }

  public void Dispose()
  {
    Dispose(true);
    GC.SuppressFinalize(this);
  }

  protected virtual void Dispose(bool isDisposing)
  {
    if (isDisposed) return;

    if (isDisposing)
    {
      if (loggedLines != null)
        loggedLines.CompleteAdding();
    }

    isDisposed = true;
  }

  public override void Log(string line)
  {
    if (!loggedLines.IsAddingCompleted)
      loggedLines.Add(line);
  }

  protected virtual void StartMonitoring()
  {
    Task.Factory.StartNew(() =>
      {
        foreach (var line in loggedLines.GetConsumingEnumerable())
        {
          if (callback != null)
            callback(line);
        }

        loggedLines.Dispose();

      }, TaskCreationOptions.LongRunning);
  }
} 
```

对于全局访问，您将需要一个`Singleton`类，所以我会创建这个`LogManager`类：

```
public sealed class LogManager : ILogger
{
  #region Singleton
  static readonly LogManager instance = new LogManager();

  public static LogManager Current { get { return instance; } }

  private LogManager() { } // Disallow creating instances.
  #endregion

  ILogger logger;

  public ILogger Logger { get { return logger; } }

  public void StartLogging(ILogger logger)
  {
    if (logger == null)
      throw new ArgumentNullException("logger");

    this.logger = logger;
  }

  public void StopLogging(bool dispose = true)
  {
    var previousLogger = this.logger as IDisposable;
    this.logger =null;

    if (previousLogger != null && dispose)
      previousLogger.Dispose();
  }

  public void Log(string line)
  {
    if (logger != null) logger.Log(line);
  }

  public void Log(string format, params object[] args)
  {
    if (logger != null) logger.Log(format, args);
  }
} 
```

通过一些快速初始化：

```
void InitializeLog()
{
  var log = new ConcurrentLogger(LogToTextBox);
  LogManager.Current.StartLogging(log);
}

void LogToTextBox(string line)
{
  if (!CheckAccess())
  {
    this.Dispatcher.BeginInvoke((Action<string>)LogToTextBox,
                                DispatcherPriority.Background, 
                                line);
    return;
  }

  logTextBox.AppendText(line + Environment.NewLine);
} 
```

然后您可以在代码中的任何位置调用：`LogManager.Current.Log(...);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:00:42.957

创建一个静态类，该类包含 WriteLine 方法和一个引用窗口、控件或您在 writeline 方法中需要的任何内容的属性。然后将一些代码添加到您的 MainWindow 构造函数或加载的事件中，以将 Reference-Property 设置为所需的项目。之后，您可以在任何地方使用 Writeline。

顺便说一句：使用带有 Instance getter 的静态 MainViewModel 可能会更干净，将 MainWindow 的 DataContext 绑定到此 ViewModel 并使用 MVVM 模式。然后，您只需设置一些 ConsoleOutput 属性或调用 AddLine 方法，甚至从您想要的任何地方调用命令，而不必知道视图如何显示它。您可以使用单元测试来测试您的应用程序，您可以更改视觉表示，......所有这些都无需触及应用程序的逻辑。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-21T17:53:40.033

```
namespace {yourrootnamespace}
{
   namespace GlobalMethods
   {
        static class ConsoleMethods
        {
        mainConsole mc;
        public static WriteLine(string msg, object sender)
        {
            lock (this)
            {
                mc.WriteLine(msg, sender)
            }
        }
        static ConsoleMethods()
        {
            mc = new mainConsole();
        }
        //more methods
    }
} 
```

接着：`using {yourrootnamespace}.GlobalMethods;`

或者，让这些方法接受一个 mainConsole 参数，然后使用它来调用。

# netty - 客户端损坏或速度慢的 OOM Netty

> ID：14444382
> 
> 赞同：2
> 
> 时间：2013-01-21T17:48:02.467
> 
> 标签：netty

我有一个 Netty 服务器（3.6.2），它生成一些数据并向订阅的客户端广播。有时有些客户端似乎因为客户端损坏或网络资源状况不佳而无法获取数据。在这种情况下，服务器会填充 Channel 写入队列并不断生成事件，最终这可能会导致 OutOfMemoryError。

一种解决方案是在写入之前检查通道是否为 isWritable() 并且不要以否定的方式写入（无论如何我必须存储这些消息，否则我会丢失它们）。但我宁愿断开在某个时间或以我生成广播事件的速度不刷新写入缓冲区的客户端。

我怎么能那样做？如何实现这个写缓冲区没有被刷新“超时”？如果 isWritable 为假，我应该关闭客户端吗？

我真的很感激任何想法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:52:43.013

是的，如果 Channel.isWritable() 返回 false，您可以关闭连接。

# ruby-on-rails - Rails jquery datepicker找不到html

> ID：14444383
> 
> 赞同：0
> 
> 时间：2013-01-21T17:48:11.413
> 
> 标签：ruby-on-rails

我在 Rails 应用程序中使用 jquery-ui datepicker。我有 2 种用于输入数据的表格。一个是常规的 Rails 视图页面，另一个是 Bootstrap 模式。模态的不起作用。

这是咖啡脚本（我假设这对两者都有效）：

```
 $("#expense_exp_date").datepicker dateFormat: "yy-mm-dd" 
```

这是 Rails 视图代码和相应的 html：

```
<%= f.input :exp_date, :as => :string, :label => 'Date', :class => 'calendar hasDatepicker', :input_html => {:value => Date.today.to_s} %>
<input class="string required hasDatepicker" id="expense_exp_date" name="expense[exp_date]" size="50" type="text" value="2013-01-21"> 
```

这是 Bootstrap 模态代码和相应的 html：

```
 <%= f.input :exp_date, :as => :string, :label => 'Date', :class => 'calendar hasDatepicker', :input_html => {:value => Date.today.to_s}, :input_html => {:style => 'width: 180px'} %>
<input class="string required" id="expense_exp_date" name="expense[exp_date]" size="50" style="width: 180px" type="text"> 
```

为什么模态 html 中缺少“hasDatepicker”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:59:10.103

尝试`class`在`input_html`选项哈希中传递选项：

```
<%= f.input :exp_date, :as => :string, :label => 'Date', 
            :input_html => {
                             :value => Date.today.to_s, 
                             :class => 'calendar hasDatepicker'} %> 
```

# .net - SharpGen 对 SharpDX 以外的其他项目有用吗？还是我应该使用 SWIG？

> ID：14444386
> 
> 赞同：2
> 
> 时间：2013-01-21T17:48:25.423
> 
> 标签：.net, wrapper, generator, swig, managed

有没有人使用[SharpGen](http://sharpdx.org/documentation/tools/sharpgen)（来自[SharpDX](http://sharpdx.org/)）在除 SharpDX 本身之外的其他项目中生成包装器？我不想决定是使用 SharpGen 还是 Swig[来](http://www.swig.org/)为 C++ 库生成包装器。

SharpGen 创建的生成代码似乎很快（因为 SharpDX 被称为托管世界中最快的 DirectX-Wrapper）。但是关于 SharpGen 的文档并不多。另一方面，Swig 有更好的文档记录，但可能不会像 SharpGen 一样针对速度进行优化，而且我不需要多语言生成功能（此时只需要 C#/.Net）。有什么经验可以分享吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:22:29.960

SWIG 是一个有据可查的通用互操作包装器，而 SharpGen 确实是 SharpDX 中使用的内部工具，专门设计用于 C++ COM 接口（或具有虚拟纯方法的 C++ 类）。虽然 SWIG 需要编译 C++ 存根，但 SharpDX 完全从 .NET 执行整个互操作（因此您可以享受 AnyCPU 的好处）。SharpGen 尚未打包以便在 SharpDX 构建之外轻松使用，但该工具本身可以在没有 SharpDX 的情况下使用，尽管它需要深入研究现有的映射文件才能知道如何配置它（[这里](http://code.google.com/p/sharpdx/source/browse/Source/SharpDX.Direct3D11/Mapping.xml)有一个示例）

除非您有一些特定要求，否则我会坚持使用 SWIG，因为它有据可查。SharpGen 更适合已经在使用 SharpDX 并希望访问其自己的自定义 C++ COM 对象的开发人员。

# php - 从一个控制器填充字段，在另一个.. CAKEPHP

> ID：14444389
> 
> 赞同：1
> 
> 时间：2013-01-21T17:48:42.573
> 
> 标签：php, forms, cakephp, cakephp-2.1

我目前正在尝试允许用户存档已经完成的事件。

然后将在存档表中查看该事件。

所以基本上我有一个存档表和一个事件表，当用户想要存档事件时，他们应该能够在存档添加表单中查看事件（需要由事件的 $id 填充） .

但我不知道如何填充该字段.. 我尝试设置一个值.. 但事件不是会话，因此不起作用，我也尝试在表单开头设置 $id，但是那也没有用。

这是我在事件控制器中存档功能的代码。

```
 public function archive($id = null) {
        if ($this->request->is('post')) {
            $event = $this->Event->read($id);
            $archive['Archive'] = $event['Event'];
            $archive['Archive']['eventID'] = $archive['Archive']['archiveID'];
            unset($archive['Archive']['archiveID']);
            $this->loadModel('Archive');
            $this->Archive->create();
            if ($this->Archive->save($archive)) {
                $this->Session->setFlash(__('The event has been archived'));
                $this->Event->delete($id);
                $this->redirect(array('action' => 'eventmanage'));
            } else {
                $this->Session->setFlash(__('The event could not be archived. Please, contact the administrator.'));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:21:30.607

您需要执行以下操作之一：

**`$this->request->data`设置控制器中使用的字段的值。**

```
public function add($id = null) {
    if ($this->request->is('post')) {
        [..snip..]
    }
    $this->loadModel('Event');
    $event = $this->Event->read($id);
    $this->request->data['Archive'] = $event['Event'];
} 
```

或者

**更新表单以设置值。**

使用相同的事件更新现有代码：

```
public function add($id = null) {
    if ($this->request->is('post')) {
        [..snip..]
    }
    $this->loadModel('Event');
    $this->set('event', $this->Event->read($id));
} 
```

然后在 Archives/add.ctp 文件中的表单中，更新每个输入以反映 $event 的值。

```
echo $this->Form->input('eventID', array('type' => 'hidden', 'value' => $event['Event']['id'])); 
```

或者

**编写一个移动记录的函数。**

在事件视图上放置一个名为“存档”的按钮。在将归档事件的事件控制器中创建一个方法。

```
public function archive($id = null) {
    if ($this->request->is('post')) {
        $event = $this->Event->read($id);
        $archive['Archive'] = $event['Event'];
        $archive['Archive']['event_id'] = $archive['Archive']['id'];
        unset($archive['Archive']['id']);
        $this->loadModel('Archive');
        $this->Archive->create();
        if ($this->Archive->save($archive)) {
            $this->Session->setFlash(__('The event has been archived'));
            $this->Event->delete($id);
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The event could not be archived. Please, contact the administrator.'));
        }
    }
} 
```

# oracle-apex - Oracle Apex - 管理和用户

> ID：14444391
> 
> 赞同：0
> 
> 时间：2013-01-21T17:48:52.930
> 
> 标签：oracle-apex, database-administration

我正在创建一个 Oracle Apex 应用程序。

我的问题：

该应用程序有两个方面；管理和用户。管理的目的是将用户分配给组。

用户应该只能访问信息 - 他们被分配的组。

例如; A 先生被分配到 A 组。B 先生被分配到 B 组。C 先生被分配到 A、B 和 C 组。

用户应该只被允许访问他们被分配到的区域，而不是管理控制。只有查看权限。

这可能吗？我发现 Oracle Apex 很难让我头脑清醒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:02:32.233

您有许多要求，每个要求都可以在 Apex 中构建，但使用不同的功能：

1.  管理员可以将用户分配到组。

2.  只有管​​理员可以访问管理控制。

3.  用户可以查看权限。

4.  用户只能看到他们组的信息。

我会使用 Apex**授权方案**来处理 #1、#2 和 #3。例如，创建一个名为“Administrator”的授权方案，它检查当前用户是否是管理员，然后将此方案应用于任何页面、区域、按钮、项目等，这些页面、区域、按钮、项目等应该只有管理员可以访问。

对于#4，我能想到一些解决方案：

1.  谓词 - 确保应用程序中的每个查询根据他们的组检查当前用户是否可以查看数据。

2.  视图 - 将安全谓词封装在每个表的视图中，这样您就不必在整个应用程序中重复此代码。

3.  Oracle VPD 或行级别安全性（需要企业许可证）——这将安全谓词隐藏在 SQL 级别之后。

我已将上述所有 3 个选项用于不同的项目；第三个是针对具有相当复杂的权限检查规则的相当大的应用程序。RLS 使这个项目更简单，更容易构建和验证；然而，在某些情况下，RLS 可能会过大。

# maven - Maven：将“测试”阶段目录从本地 .m2 更改为目标？

> ID：14444403
> 
> 赞同：0
> 
> 时间：2013-01-21T17:49:25.633
> 
> 标签：maven, target

如果这是补救措施，请原谅我，但我对 Maven 和它的功能仍然很陌生。

在我的项目中，当它“构建”并进入编译阶段时，它将创建一个仅包含已编译库的目标目录并更新（或创建如果不存在）本地 .m2 目录。

当我进入“测试”阶段时，我希望它针对目标目录的库文件构建，而不是本地 .m2 目录。

任何提示、建议或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:24:43.377

Maven 有“反应器”这个概念，这只是对正在构建的项目列表的一个花哨的术语。在 Maven 构建的开始和结束时，Maven 会打印出这个项目列表（`/project/name`如果定义或`groupId:artifactId`以其他方式使用）。

对于反应器中的每个项目，Maven 维护一个已附加的工件列表。默认情况下，每个模块`pom.xml`都是附加的，并且随着每个插件的运行，它们可以选择附加额外的工件。大多数插件不附加工件，以下是一些插件：

*   `jar:jar`创建一个`.jar`并附加它
*   `war:war`创建一个`.war`并附加它
*   `source:jar`创建`.jar`源 Java 代码并附加一个分类器`source`
*   `java doc:jar`创建一个`.jar`JavaDocs 广告并附加一个分类器`javadoc`

还有一个默认的主工件（这是被替换的那个`jar:jar`），它实际上是一个目录而不是文件，因此它不会被安装或部署到本地存储库缓存或远程存储库。

因此，当在反应器中，附加主工件的插件尚未运行，而另一个插件请求主工件时，它将被赋予目录`${project.build.outputDirectory}`。如果在附加主要工件之后，则将提供该主要工件。

`test`阶段发生在阶段之前`package`，因此将使用目录而不是`.jar`. 该`integation-test`阶段发生在之后，因此将始终使用`.jar`.

在多模块项目中事情变得更加复杂（这是我的长篇介绍应该帮助你的地方）

Maven 必须构建测试类路径。如果依赖项之一在反应器内，Maven 将使用附加到反应器的工件。否则它将使用本地缓存（必要时从远程存储库填充）。

当你跑

```
mvn test 
```

在来自根的多模块项目中，没有替换默认（基于目录的）工件，因此模块内类路径将指向`target/classes`目录。

当你跑

```
mvn package 
```

然而，在同一个项目中，因为每个模块都按顺序完成其生命周期，所以所有依赖模块都将交换它们的`.jar`文件作为附加的工件。

所有这些都应该向您表明 Maven 正在做明智的事情。希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:00:59.630

该`test`阶段将对您的项目执行测试。该项目不会通过依赖机制引用自身。只有依赖项将通过您的本地存储库引用，即`.m2/repository`

此外，`compile`将工件安装到本地存储库的不是阶段，而是`install`阶段。然后，有一个名为 的后期阶段，`deploy`它将将工件部署到远程存储库，前提是您将远程存储库配置为部署目标。请注意，安装和部署几乎是相同的阶段，除了安装是本地唯一的事情；因此，在进行开发环境工作时，这是常见的构建阶段。通常构建服务器会做部署的东西。

# php - 即使使用 DISTINCT，SQL SELECT 查询也会回显两次

> ID：14444406
> 
> 赞同：0
> 
> 时间：2013-01-21T17:49:39.157
> 
> 标签：php, mysql, sql, select

我正在 PHP 中创建一个简单的 SQL 查询 - 出于某种原因，即使`DISTINCT`使用它，它也会像这样显示两次：

```
BC
BC
OH
OH
TX
TX 
```

这是我的代码：

```
<?php
$sql = "SELECT DISTINCT `title`,`extra_fields_search` FROM `blahblah_items` WHERE catid=336 ORDER BY `blahblah_items`.`extra_fields_search` ASC ";
$partnerlisting= mysql_query($sql) or die(mysql_error());
while($row = mysql_fetch_assoc($partnerlisting))
foreach($row as $cname => $cvalue){
echo '<li>'.substr($row[extra_fields_search], 0, 2).'</li><br>';
}
;

?> 
```

我怎样才能使它只打印出一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:51:43.370

```
SELECT 
    `title`,
    `extra_fields_search` 
FROM 
    `blahblah_items` 
WHERE 
    catid=336 
GROUP BY 
    SUBSTRING(extra_fields_search,1,2) # here. group by first two characters of extra_fields_search
    # or just "GROUP BY extra_fields_search", depends what you need
ORDER BY 
    `blahblah_items`.`extra_fields_search` ASC 
```

`SELECT DISTINCT a,b FROM table`工作方式与`SELECT a,b FROM table GROUP BY a,b`

请遵循文档：

*   [http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)
*   [http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:54:36.503

试试这个

```
SELECT `title`,`extra_fields_search` 
FROM `blahblah_items` WHERE catid=336 
Group BY extra_fields_search
ORDER BY `blahblah_items`.`extra_fields_search` ASC 
```

编辑：在你的代码中试试这个

```
 while($row = mysql_fetch_assoc($partnerlisting))
    $rows[] = $row;
    foreach($rows as $row){
    echo '<li>'.substr($row[extra_fields_search], 0, 2).'</li><br>';
    }
   ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:54:51.447

Distinct 确保您获得唯一的行。它不能确保您将获得唯一的列值。在您的情况下，如果您考虑结果中的所有字段，您会注意到每一行与另一行至少有一个字段不同。

所以你永远不会得到

```
Col1  Col2
A     B
A     B 
```

但是你可以得到

```
Col1  Col2
A     B
A     C 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T17:57:40.153

尝试：

```
SELECT `title`, group_concat(distinct `extra_fields_search`)
FROM `blahblah_items` 
WHERE catid=336 
Group BY `title`
ORDER BY 2 
```

# ruby-on-rails - 我刚刚分叉了一个 Repo，RVM 想要安装一个新版本的 Ruby。repo 的 Gemfile 和 Gemspec 没有指定 Ruby 版本

> ID：14444408
> 
> 赞同：-1
> 
> 时间：2013-01-21T17:49:50.963
> 
> 标签：ruby-on-rails, ruby, rvm, fork

我刚刚创建了一个 Repo，RVM 想要安装一个新版本的 Ruby 来运行它。repo 的 Gemfile 和 Gemspec 没有指定 Ruby 版本。我对 RVM 知之甚少。当我尝试继续安装时，我收到看似模糊的错误消息，例如

```
The provided compiler '/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`. 
```

并且在运行捆绑安装时：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. 
```

我应该从哪里开始了解这种情况？阅读“rvm 要求”让我相信我需要安装一个新的二进制安装程序。从直觉上看，这一行动过程就像一个兔子洞。

在此先感谢，迈克尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:51:19.610

您刚刚克隆的项目是否`.rvmrc`包含文件？如果是这样，这可能是版本要求的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:52:05.280

RVM 正在尝试编译存储库正在使用的具有用 C 编写的扩展名的 Rubygem。

由于 OSX 和 GCC，您可能会遇到编译问题

# android - 将两个按钮更改为切换按钮

> ID：14444410
> 
> 赞同：2
> 
> 时间：2013-01-21T17:49:56.043
> 
> 标签：android

我有一个手电筒代码，它使用两个按钮（on_btn 和 off_btn）来打开和关闭手电筒。

如何将它们关联到一个按钮中？

很菜鸟可以给点详细的建议吗？

下面的代码是从答案中找到的：它适用于我的手机。但是在模拟器上单击按钮时它会崩溃。这是猫日志[https://dl.dropbox.com/u/15065300/logcat1.png](https://dl.dropbox.com/u/15065300/logcat1.png)

第74行是：**Parameters params = mCamera.getParameters();**

有人可以提出任何建议吗？

```
public class FlashLight extends Activity {

    private final static String LOG_TAG = "FlashLight";  
    private Button mOnBtn;   
    private Camera mCamera;    
    private boolean isActive;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

      //this will be inside your onCreate...
        mOnBtn = (Button) findViewById(R.id.on_btn);
        mOnBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                flipSwitch();
                processClick();

            }
        });
   }

    //these will be outside your onCreate
    public void flipSwitch() {
        isActive = !isActive;
    }

    @Override
    protected void onResume() {
        super.onResume();
        try{
            mCamera = Camera.open();
            mCamera.startPreview();
            Toast.makeText(getApplicationContext(),"Camera is  present", Toast.LENGTH_LONG).show();

        } catch( Exception e ){
            Log.e(LOG_TAG, "Impossible d'ouvrir la camera");
        }
    }

    @Override
    protected void onPause() {
        if( mCamera != null ){
            mCamera.release();
            mCamera = null;
        }
        super.onPause();
    }

    public void processClick() {
        if(isActive) {
            Parameters params = mCamera.getParameters();
            params.set("flash-mode", "torch");
            mCamera.setParameters( params );
            mCamera.startPreview();
        }

        else { 

             Parameters params = mCamera.getParameters();
             params.set("flash-mode", "off");
             mCamera.setParameters( params );
             mCamera.stopPreview();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:53:50.247

您总是可以使用[切换按钮](http://developer.android.com/reference/android/widget/ToggleButton.html)而不是两个按钮。这是非常“Android正式”。

```
//Create a toggle button
ToggleButton tg = (ToggleButton) findviewbyId(R.id.togbut);

//Implement onClickListener
tg.setOnClickListener(new OnClickListener()
{
    @Override
    public void onClick(View v){
        //Flip on or off
    }
}); 
```

在该`onClick()`方法中，您可以根据您的应用在按钮打开或关闭时应该做什么来做您需要做的事情。

在 xml 布局中，您说出切换按钮在打开和关闭时的含义。

```
<ToggleButton
    android:id="@+id/togbut"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textOn="Button On"
    android:textOff="Button Off"
    android:checked="true" /> 
```

当您单击切换按钮时，它将自动更改文本并切换。

这是一个很好的例子：[http ://www.mkyong.com/android/android-togglebutton-example/](http://www.mkyong.com/android/android-togglebutton-example/)

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:54:42.077

使用按钮翻转一个布尔值，并相应地改变你的手电筒打开和关闭。

```
private boolean isActive;

//this will be inside your onCreate...
button.setOnClickListener(new View.onClickListener() {
    public void onClick(View v) {
        flipSwitch();
        processClick();
    }
}

//these will be outside your onCreate
public void flipSwitch() {
    isActive = !isActive;
}

public void processClick() {
    if(isActive) {
        //button is clicked on
    }
    else {
        //button is clicked off
    }
} 
```

# excel - Excel 2013 Forumla 在某些单元格中不起作用

> ID：14444416
> 
> 赞同：0
> 
> 时间：2013-01-21T17:50:26.010
> 
> 标签：excel, excel-formula, excel-2013

所以我试图在 Excel 2013 中完成一些工作，在得到一个初始公式后，我将它拖到其他几个单元格中。我对引用等进行了所有标准锁定，甚至使用复制粘贴将确切的公式复制到新的单元格公式窗口中。该公式在第一个单元格中有效，而不是在它被拖过的单元格中。粘贴时，它也可以在看似随机的单元格中工作（见屏幕截图）。

公式如下...这是一个全新的工作表，在粘贴公式之前单元格尚未初始化。这是 Excel 2013 的问题吗？由于该公式在某些粘贴中完美有效，而在其他粘贴中无效，我认为这不是问题......我在几个单元格中粘贴后更改了单元格格式，以查看结果是否完全改变 - 它没有。

更新：我添加了假值，并且 IF 在零单元格上评估为假......为什么它在某些情况下正确，而在其他情况下为假仍然是个谜。

```
=MIN(IF('Metrics'!$DL$2:$DL$1725=$L$2&$O$2,'Metrics'!$DH$2:$DH$1725)) 
```

![在此处输入图像描述](../Images/109594830c3ddd9d4cfe1674fb46ba28.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:10:38.263

问题是要正确评估公式，应该将其设置为数组（ctrl-shift-enter）。 *但是*，Excel 2013 似乎将公式随机识别为数组公式，有时不会。因此，该公式偶尔会在全新的未初始化单元格中使用/显示标准公式和正确的结果。其他时候它仍然会显示相同的公式，但会产生不正确的结果，因为它没有被评估为数组。

任何没有神奇地转换为数组公式的单元格，在更改为数组时，都将更新为正确的值。

只有手动更改的单元格反映`{=MIN(IF(...)...))}`了数组公式的指示。公式产生正确结果的单元格仍显示为非数组公式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T13:16:45.750

如果不是完全相同的问题，我也有类似的问题。尝试按 F9 重新计算工作表，或转到文件>选项，转到“公式”并在“工作簿计算”下将其设置为“自动”。

解决了我的问题，这与您的问题相同。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:57:02.140

由于您使用`$`符号来*锁定*公式中的单元格，因此看起来您只是将其指向相同的单元格，从而为您提供相同的结果...单击公式并根据需要检查或更改为正确的参考单元格。 ..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T10:12:23.070

原来我 2003 年的 excel 问题是由于一些循环公式造成的。在最底线有“通告：”。当这些都固定后，其他单元格开始正确计算。

# gnu-screen - .screenrc：转义单引号

> ID：14444417
> 
> 赞同：1
> 
> 时间：2013-01-21T17:50:33.983
> 
> 标签：gnu-screen

escape ^\' 给了我这个错误：

.screenrc：缺少 ' 引用。

如何转义单引号，以便 C-' （而不是 Ca）可以成为我的屏幕转义键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:51:19.020

我认为这样的事情应该有效：`escape "^''"`

但我无法在我的系统上对其进行测试，因为`^'`在终端中似乎是作为普通`'`的底层进程发送的。

# jquery - jQuery JAIL 插件在滚动事件之前不会加载图像

> ID：14444420
> 
> 赞同：1
> 
> 时间：2013-01-21T17:50:50.920
> 
> 标签：jquery, css

我正在使用 jQuery 和 JAIL 插件 [2] 制作一个非常简单的作品集网页 [1]。此网页中的主要元素是页面中间的水平图像列表（如滑块）。

要在该水平列表中加载图像，页面会触发一个 ajax POST 到服务器上的 PHP，然后使用 JAIL 插件将它们加载到浏览器中。此时页面加载浏览器视口中可见的图像。但是在用户将鼠标指向图像并触发滚动之前，不会加载视口之外的其余图像。我希望在没有触发事件的情况下加载所有图像。

我尝试了 [3] 和 [4] 中建议的一些技巧，但没有成功。

有人能帮我吗？

谢谢 ;-）

[1] [https://www.fabianebello.com.br/newsite](https://www.fabianebello.com.br/newsite)

[2] [https://github.com/sebarmeli/JAIL](https://github.com/sebarmeli/JAIL)

[3] [jQuery jail 插件和图像加载有时不起作用](https://stackoverflow.com/questions/8687808/jquery-jail-plugin-and-image-load-sometimes-does-not-work)

[4] [jQuery LazyLoad 在滚动之前不加载图像](https://stackoverflow.com/questions/13971151/jquery-lazyload-do-not-load-images-until-scroll)

**更新**

我猜这是 JAIL 的默认行为：对于浏览器视口之外的图像，它会等待直到触发滚动事件。我不确定。也许我以错误的方式使用 JAIL。现在我解决了我的问题（在我的特定场景中）

```
$(window).scroll(); 
```

当用户移动我的滑块导航器时。

# c# - 使用自定义数据旋转新线程

> ID：14444424
> 
> 赞同：0
> 
> 时间：2013-01-21T17:50:57.343
> 
> 标签：c#, multithreading, c#-4.0

我正在尝试完成以下功能，

我得到一个`HttpRequest`并根据请求，我将创建一个新线程，然后为该线程设置一些数据[本地和线程特定数据]，然后我将旋转线程。在线程中，我必须能够在该线程结束其生命之前的任何位置使用我在创建该线程之前初始化的数据。

我尝试了这个示例，在这里，线程内的问候变量为空。关于我如何完成这个过程的任何想法。

```
class Program
{
    [ThreadStatic]
    static string greeting = "Greetings from the current thread";

    static void Main()
    {
        Console.WriteLine(greeting); // prints initial value
        greeting = "Goodbye from the main thread";
        Thread t = new Thread(ThreadMethod);
        t.Start();
        t.Join();
        Console.WriteLine(greeting); // prints the main thread's copy
        Console.ReadKey();
    }
    static void ThreadMethod()
    {
// I am getting  greeting as null inside this thread method.
        Console.WriteLine(greeting); // prints nothing as greeting initialized on main thread
        greeting = "Hello from the second thread"; // only affects the second thread's copy
        Console.WriteLine(greeting);
    }
} 
```

**编辑** 我正在尝试完成这样的事情

```
class ThreadTest
{
    static void Main()
    {
        var tcp = new ThreadContextData();

        Thread t = new Thread(ThreadMethod);
        tcp.SetThreadContext("hi.. from t1");
        t.Start();
        t.Join();

        Thread t2 = new Thread(ThreadMethod);
        tcp.SetThreadContext("hello.. from t2");
        t2.Start();
        t2.Join();

        Console.ReadKey();
    }

    static void ThreadMethod()
    {
        Console.WriteLine(new ThreadContextData().GetThreadContextValue());
    }
}

public class ThreadContextData
{
    static ThreadLocal<string> greeting;
    static ThreadContextData()
    {
        greeting = new ThreadLocal<string>(() => "");
    }

    public void SetThreadContext(string contextValue)
    {
        greeting.Value = contextValue;
    }

    public string GetThreadContextValue()
    {
        return greeting.Value;
    }

    public void ClearThreadContextValue()
    {
        greeting.Value = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:03:26.200

该类`Thread`有一个方法`Start(object)`，您可以使用该方法为线程提供参数，前提是您的线程例程也需要一个参数：

```
var thr = new Thread(foo);
thr.Start(7);

private void foo(object arg)
{
    int data = (int)arg; // == 7
} 
```

但是，如果您可以访问相对较新的 .Net 平台，则可以使用内联 lambda 来减少冗长：

```
var thr = new Thread(_ => foo(7, "Marie", 123.44));
thr.Start();

private void foo(int data, string name, double age)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:59:13.093

您正在一个线程中设置变量并尝试在新线程中读取。我认为你应该使用类似的东西：

```
 Thread thread = new Thread(Start);
    thread.Start("greetings from ...");

    private static void Start(object o)
    {
        var greeting = o as string;
        Console.WriteLine(greeting);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:00:13.420

ThreadStatic 意味着每个线程都有自己的变量版本。因此，在您当前的代码中，saying`greeting = "Goodbye from the main thread";`设置此变量的主线程版本，而不是您正在运行的线程。

您只能从线程内设置线程静态变量。

相反，我会将传递给子线程所需的所有状态打包在一个类中，然后将对该类的引用作为线程启动函数中的数据传递。

另外，请注意，[在 ASP.NET 代码中启动线程通常不是一个好主意](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)。

# android - 在 SD 卡上安装 android 应用程序，preferExternal 不起作用

> ID：14444427
> 
> 赞同：2
> 
> 时间：2013-01-21T17:51:02.997
> 
> 标签：android, installation, version, android-sdcard

我正在开发一个 Android 应用程序，但无法将其安装到 SD 卡中。这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
               package="com.developfrank.application"
               android:versionCode="1"
               android:versionName="1.0"
               android:installLocation="preferExternal">

    <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

我使用 Froyo 2.2 作为所需的最低版本，因此我没有关于选项 installLocation 的任何错误，但在安装应用程序时，我的手机将其安装在内部存储器中。

我也有这两个权限，我把它放出来以防万一它可以提供一些线索：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
 <uses-permission android:name="android.permission.WRITE_SETTINGS"/> 
```

我尝试了很多东西，但我有点迷茫。非常感谢您的帮助

坦率。

# windows-8 - WinRT HttpClient 阻止启动画面

> ID：14444431
> 
> 赞同：4
> 
> 时间：2013-01-21T17:51:11.580
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我在某个页面的 LoadState 方法中执行异步请求。我使用 HttpClient 发出请求，我希望在等待结果时闪屏会消失。

如果我没有连接到任何网络，启动画面会立即消失，并且我会得到一个空白页面，因为请求显然没有发生。

但是，如果我连接到网络但有连接问题（例如，我设置了错误的 IP 地址），它似乎会启动一个请求并阻止。

我的期望是 HttpClient 会意识到它不能发送请求并且要么抛出异常，要么只返回一些东西。

我设法通过设置大约 800 毫秒的超时来解决阻塞问题，但现在当 Internet 连接正常时它无法正常工作。这是最好的解决方案，我应该设置超时吗？什么是适当的超时时间，这将使我能够区分无限期阻塞呼叫和仅在较慢网络上的正确呼叫？

我也许可以在每次请求之前检查互联网连接，但这听起来像是一个不可预测的解决方案......

编辑：现在，这真的很有趣。我又试了一次，它在这一点上阻塞：

```
var rd = await httpClient.SendAsync(requestMsg); 
```

如果我按照评论中的建议使用 Task.Run() 并获得一个新线程，那么它总是可以的。但是，如果没有 Internet 访问权限但网络访问权限不是“受限”（它表示 IPv4 连接是“Internet 访问权限”，尽管我无法在浏览器中打开单个网站并且没有数据，那么没有 Task.Run() 也可以从 Web 服务返回。它只是抛出 System.Net.Http.HttpRequestException 这是我一开始就期待的）只有在网络连接受限时才会阻塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:11:58.783

如果不是设置超时，而是使用检查连接状态怎么办

```
public static bool IsConnected
    {
        get
        {
            return NetworkInformation.GetInternetConnectionProfile() != null;
        }
    } 
```

这样，如果 IsConnected，则您拨打电话；否则，忽略它。

我不确定您是否在 App.xaml.cs 中运行它？我发现在该类中发出的请求可能变化无常，最好将功能移动到扩展的初始屏幕，以确保应用程序在激活过程中一直运行。

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868191(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868191(v=win.10).aspx)

# python - 使用 OpenCV Python 计算相机世界位置

> ID：14444433
> 
> 赞同：15
> 
> 时间：2013-01-21T17:51:15.527
> 
> 标签：python, opencv, computer-vision, augmented-reality, homography

我想计算我的相机在世界坐标中的位置。这应该相当容易，但我没有得到我期望的结果。我相信我已经阅读了有关此主题的所有内容，但我的代码无法正常工作。这就是我所做的：

我有一个相机正在观察一个区域。

1) 我画了一张该地区的地图。

2) 我通过将 4 个图像点与地图上的 4 个点匹配来计算单应性`cv2.getPerspectiveTransform`

3）H单应性将每个世界坐标转换为相机坐标；这工作正常

4）为了计算相机矩阵，我遵循[了这个](https://dsp.stackexchange.com/questions/2736/step-by-step-camera-pose-estimation-for-visual-tracking-and-planar-markers)：

```
translation = np.zeros((3,1)) 
translation[:,0] = homography[:,2]

rotation = np.zeros((3,3))
rotation[:,0] = homography[:,0]
rotation[:,1] = homography[:,1]
rotation[:,2] = np.cross(homography[0:3,0],homography[0:3,1])

cameraMatrix = np.zeros((3,4))
cameraMatrix[:,0:3] = rotation
cameraMatrix[:,3] = homography[:,2]

cameraMatrix = cameraMatrix/cameraMatrix[2][3] #normalize the matrix 
```

5）据此[，](http://en.wikipedia.org/wiki/Camera_resectioning)相机的位置应该这样计算：

```
x,y,z = np.dot(-np.transpose(rotation),translation) 
```

我得到的坐标完全错误。我猜问题应该出在第 4 步或第 5 步中。我的方法有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T19:23:44.493

我想我现在明白了。问题出在步骤 4 中描述的方法上。不能仅从单应矩阵计算相机位置。相机内在矩阵也是必要的。因此，正确的程序如下：

1) 绘制区域地图

2）使用棋盘图像校准相机，`cv2.findChessboardCorners`这会产生相机矩阵和失真系数

3）用世界坐标（3D）和图像坐标（2D）求解PnP。给定 4 个对应点和相机矩阵，solvePnP 返回对象在相机坐标系中的原点。

4）现在我需要计算相机在世界坐标中的位置。旋转矩阵为：`rotM = cv2.Rodrigues(rvec)[0]`

5) 相机的 x,y,z 位置为：`cameraPosition = -np.matrix(rotM).T * np.matrix(tvec)`

# html - HTML 表：THAD 宽度取决于 Chrome 中的 TBODY

> ID：14444436
> 
> 赞同：1
> 
> 时间：2013-01-21T17:51:18.813
> 
> 标签：html, css, html-table, cross-browser, width

经过一些测试，我发现 Chrome 不会像 Opera 那样根据 TBODY 元素计算 THEAD 列宽。有没有办法避免在标题中指定这个？例子：

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css" media="all">
    table{
        width:800px;
        border:1px solid #CCCCCC;
        table-layout: fixed; 
        border-spacing:0px;
        box-sizing: border-box;
    }

     table td.option{
        width:100px; 
    }

    table td {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        border:1px solid #EEEEEE;
    }

    table td.active{
        text-align:center;
        width:100px;
    }

   td.thead{
       /* something that makes that width: is depending on the total width of the tbody elements */
   }

    table td.nonfixed{
        width:100%;
    }      
    </style>
    <title>Untitled</title>
</head>
<body>
<table>
    <thead>
        <tr>
            <td class="thead">Name</td>
            <td class="thead">Description</td>
            <td class="thead">Active</td>
            <td class="thead" colspan="2">Options</td>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="100"><a href="">+ Add new row</a></td>
        </tr>
    </tfoot>
    <tbody>
        <tr>
            <td class="nonfixed">[Name 1]</td>
            <td class="nonfixed">[Description 1]</td>
            <td class="active">[X]</td>
            <td class="option">Edit</td>
            <td class="option">Delete</td>
        </tr>
        <tr>
            <td class="nonfixed">[Name 2]</td>
            <td class="nonfixed">[Description 2]</td>
            <td class="active">[0]</td>
            <td class="option">Edit</td>
            <td class="option">Delete</td>
        </tr>
    </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:37:31.513

`<colgroup>`通过添加元素解决了这个问题。Chrome 使用第一行（tr 或 colgroup）来确定 td 宽度。此解决方案在旧版本的 IE 中遇到一些问题，即不支持带百分比的 td 宽度。

# c - 如何在c中为双向链表程序释放内存

> ID：14444440
> 
> 赞同：2
> 
> 时间：2013-01-21T17:51:33.963
> 
> 标签：c, list, memory, linked-list, allocation

过去几天我正在研究我的 c\c++ 技能。我正在阅读我的数据结构书，然后我想为什么不实现双向链表程序。我写了程序；令人惊讶的是它也可以正常工作，但是，我不确定我是否写得正确。我无法弄清楚如何释放我分配的内存。请帮我解决这些问题。

另外，如果你们中的任何人都可以向我解释这个“while(linkNode!=0)”，我将非常感激。

```
#include<stdio.h>
#include<malloc.h>

struct node
{
    int x;
    struct node * next;
    struct node * prev;
};

struct head
{
    unsigned int count;
    struct node * hd;
    struct node * tl;

};

void main()
{
    int i =0;

    struct node * linkNode;
    struct head *hdd;

    hdd = (head *)malloc(sizeof(head));

    linkNode = (node *) malloc(sizeof(node));
    hdd->count = 1;
    hdd->hd = linkNode;
    linkNode->prev = 0;
    linkNode->next = 0;
    linkNode->x = 0;

    for(;i<10;i++)
    {
        linkNode->next = (node *) malloc(sizeof(node));
        linkNode->next->prev = linkNode;
        linkNode = linkNode->next;
        linkNode->next = 0;
        linkNode->x = i;
        hdd->count+=1;
        hdd->tl = linkNode;

    }

    linkNode = hdd->hd;
    printf("priniting in next direction\n");
    while(linkNode!=0)
    {
        printf("%d\n",linkNode->x);
        linkNode = linkNode->next;
    }

    linkNode = hdd->tl;
    printf("priniting in prev direction\n");
    while(linkNode!=0)
    {
        printf("%d\n",linkNode->x);
        linkNode = linkNode->prev;
    }

    linkNode = hdd->hd;
    while(linkNode!=0)
    {
        free(linkNode->prev);
        linkNode = linkNode->next;

    }

    free(hdd);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:42:09.410

您的链接列表如下所示：

```
+------+----+----+
| Head | hd | tl | ---------->--------
+------+----+----+                    \
         |               ---->------   |           NULL
         |             /            \  |             |
     +------+-----+------+------+   +------+-----+------+------+
     | Node | x=0 | next | prev |   | Node | x=1 | next | prev |
     +------+-----+------+------+   +------+-----+------+------+
         |                  |                             |
          \                NULL                          /
           -----------------------<---------------------- 
```

（我已将其简化为两个节点）。

现在，我们可以写出这段代码的作用：

```
linkNode = hdd->hd;
while(linkNode!=0) {
    free(linkNode->prev);
    linkNode = linkNode->next;
} 
```

1.  `linkNode = hdd->hd`叶子`linkNode`指向第一个节点
2.  `(linkNode!=0)`为真（第一个节点不为NULL），所以我们进入while循环
3.  `free(linkNode->prev)`调用`free(NULL)`以来`hdd->hd->prev == NULL`（您像这样明确设置第一个节点）。这很好，但什么也没做。
4.  `linkNode = linkNode->next`叶子`linkNode`指向最后一个节点
5.  `linkNode!=0`仍然为真（最后一个节点也不是 NULL），所以我们再次循环
6.  `free(linkNode->prev)`释放前一个节点（这是第一个）
7.  `linkNode = linkNode->next`树叶`linkNode == NULL`
8.  `linkNode!=0`现在是假的，所以循环终止。

所以，我们释放了除了最后一个节点之外的所有节点。没有节点的`prev`成员指向该节点，因此调用`free(linkNode->prev)`永远无法释放它。但是，您可以通过`hdd->tl`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:56:24.103

您已经从链表尾部以相反的顺序释放分配给链表节点的内存。这条线正在这样做。

```
free(linkNode->prev); 
```

您的程序中存在内存泄漏。列表中的最后一个节点未释放。

只包括

```
free(linkNode); 
```

在释放硬盘之前。

解释：

```
while(linkNode!=0) 
```

这是为了确保您取消引用`NULL`指针。由于取消引用 NULL 指针可能会导致`undefined behaviours`.

这些是取消引用操作

```
linkNode->x
linkNode->prev 
```

# c++ - 未定义的引用 - 每个目标文件都编译，但链接失败

> ID：14444445
> 
> 赞同：0
> 
> 时间：2013-01-21T17:51:54.433
> 
> 标签：c++, linker, makefile, undefined-reference

> **可能重复：**
> [静态变量链接错误](https://stackoverflow.com/questions/9282354/static-variable-link-error)
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

很抱歉添加了另一个“未定义的引用”makefile 问题帖子，但即使经过大量搜索，我也找不到解决方案......

每个目标文件都编译得很好。在最后的链接阶段，链接器（或make？）抱怨“未定义的引用”各种函数和静态类变量......

生成文件：

```
CXX = mpic++
CXXFLAGS = -g   -O3   -fopenmp   -std=c++0x     

SOME_DIR=/some/directory

LDFLAGS=   -I$(SOME_DIR) -L$(SOME_DIR)  -Wl,-rpath,$(SOME_DIR) -lsomelib   \
             # ...more libraries...     \
           -Wl,--verbose    -ldl

SOURCES=$(wildcard ./*.cpp)
HEADERS=$(wildcard ./*.h)

OBJECTS=$(SOURCES:.cpp=.o)

all :   $(OBJECTS)  
    $(CXX) $(CXXFLAGS) $(OBJECTS)   $(LDFLAGS)      \
    -o my_prog
    @echo "my_prof executable successfully created."

%.o  :  %.cpp   $(HEADERS)
    $(CXX) $(CXXFLAGS) -o $@  -c    $(LDFLAGS)   $< 
```

每个`.h`文件都有所有“包含保护”。每个目标文件都可以毫无问题地编译。通过检查链接器提供的额外输出`--verbose`，我验证链接器是否找到了链接到的所有库，并且链接器已成功打开所有目标文件。

然后，在最后阶段，我得到了对*其他*源/目标文件中函数的大量“未定义引用”：

```
./some_object.o: In function `some_class::some_func(int &arg)':
./some_class.cpp:78: undefined reference to 'another_function_defined_in_another_header_file' 
```

还有对（公共）静态成员变量的未定义引用：

```
./main.cpp:473: undefined reference to `some_class::some_static_member_variable_A'
./main.cpp:491: undefined reference to `some_class::some_static_member_variable_B'
./main.cpp:500: undefined reference to `some_class::some_static_member_variable_C'
./main.cpp:511: undefined reference to `some_class::some_static_member_variable_D' 
```

# php - 在一个 preg_match_all 中加入两个模式

> ID：14444446
> 
> 赞同：0
> 
> 时间：2013-01-21T17:51:54.520
> 
> 标签：php, string, pattern-matching, preg-match, preg-match-all

如何加入这两种模式以适应单个 preg_match_all：我有这个：

```
preg_match_all("/(<span[^>]*annot[^>]*value=.?(\w*).?[^>]*>)(.*?)<\/span>/", $text, $matches, PREG_OFFSET_CAPTURE); 
```

还有这个：

```
preg_match_all("/(<span[^>]*value=.?(\w*).?[^>]*annot[^>]*>)(.*?)<\/span>/", $text, $matches, PREG_OFFSET_CAPTURE); 
```

我需要模式同时查找两件事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:14:15.417

尽管有 HTML 匹配的东西，试试这个：

```
preg_match_all("/((<span[^>]*annot[^>]*value=.?(\w*).?[^>]*>)(.*?)<\/span>|(<span[^>]*value=.?(\w*).?[^>]*annot[^>]*>)(.*?)<\/span>)/", $text, $matches, PREG_OFFSET_CAPTURE); 
```

它们只是通过这样的`or`运算符组合在一起：

```
(exp1|exp2) 
```

编辑：如果我理解你想要做什么，匹配“annot = value =”和“value = annot =”，你可以使用这个正则表达式（希望我没有弄乱任何东西，但你应该明白）：

```
(<span[^>]*(value=.?(\w*).?[^>]*|annot[^>]*)>)(.*?)<\/span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:17:16.633

```
preg_match_all("/(<span[^>]*(?:(?:annot|value=.?(\w*).?)|(?:value=.?(\w*).?|annot))[^>]*>)(.*?)<\/span>/", $text, $matches, PREG_OFFSET_CAPTURE); 
```

无论如何，我建议您改用 PHP [文档对象模型][1]，因为非常不鼓励使用正则表达式来解析 HTML 数据。

```
<?PHP

   $DOM = new DOMDocument;
   $DOM->loadHTML($HTML);

   $items = $DOM->getElementsByTagName('span');

   foreach ($items as $item)
   {
       foreach ($item->attributes as $attribute)
       {
           if (($attr->nodeName == "name") && ($attr->nodeName == "annotation"))

            //....
?> 
```

# jquery - datePicker 日期格式

> ID：14444449
> 
> 赞同：0
> 
> 时间：2013-01-21T17:52:08.793
> 
> 标签：jquery

我正在尝试格式化从日期选择器返回的日期，但它不起作用，它一直返回默认值`mm/dd/yyyy`。

我正在使用以下代码：

```
$('#<%=TextBox1.ClientID %>').datepicker({ dateFormat: 'dd-mm-yy' }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:54:56.290

让您的日期格式化使用：

```
var date = $('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' }).val(); 
```

# java - 使用 Hazelcast 通过队列请求-回复

> ID：14444455
> 
> 赞同：4
> 
> 时间：2013-01-21T17:53:00.420
> 
> 标签：java, hazelcast

我想知道我是否可以用这个来请求回复：

*   1 hazelcast 实例/成员（中心点）
*   1 个带有 hazelcast-client 的应用程序通过队列发送请求
*   1 个带有 hazelcast-client 的应用程序等待请求进入队列

第一个应用程序还接收第二个应用程序发布的另一个队列上的响应。

这是继续的好方法吗？还是您想到了更好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T20:24:17.837

最近几天，我还研究了一个“类似 soa”的解决方案，它使用 hazelcast 队列在不同机器上的不同进程之间进行通信。

我的主要目标是

1.  “一对多”通信，保证对多对一的回复

2.  “一对一”沟通方式

3.  “一对一”沟通，在一定时间内接听

长话短说，我今天放弃了这种方法，原因如下：

1.  大量复杂的代码，包括执行器服务、可调用对象、可运行对象、InterruptedException、关闭处理、hazelcast 事务等

2.  当接收者的生命周期比发送者短时，在“一对一”通信的情况下悬挂消息

3.  如果我在正确的时间杀死某些集群成员，则会丢失消息

4.  所有集群成员都必须能够反序列化消息，因为它可以存储在任何地方。因此，对于某些客户端和服务，消息不能是“特定的”。

我改用了一种更简单的方法：

1.  所有“服务”都使用 hazelcast 集群成员 UUID 作为键在 MultiMap（“服务注册表”）中注册自己。每个条目都包含一些元信息，如服务标识符、负载因子、开始时间、主机、pid 等

2.  客户端选择该 MultiMap 中的条目之一的 UUID，并为所选的特定集群成员使用 DistributedTask（分布式执行器服务）来调用服务，并可选择（及时）获得回复

3.  只有服务客户端和服务必须在其类路径中具有特定的 DistributedTask 实现，所有其他集群成员都不会受到打扰

4.  客户端可以自己轻松地找出服务注册表中的无效条目：如果他们看不到具有特定 UUID (hazelcastInstance.getCluster().getMembers()) 的集群成员，则服务可能会意外死亡。然后客户端可以选择“活动”条目，负载因子较少的条目，在幂等服务的情况下重试等

使用第二种方法（例如超时或取消任务），编程变得非常简单和强大，需要维护的代码更少。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T00:30:58.020

过去我们构建了一个使用 Hazelcast 队列作为总线的 SOA 系统。这是一些头条新闻。

一种。每个服务都有一个收入Q。简单来说服务名就是队列的名字。您可以拥有任意数量的服务提供商。您可以放大和缩小。您所需要的只是这些服务提供者来轮询这个队列并处理到达的请求。

湾。由于系统是完全异步的，为了关联请求和响应，请求和响应中还有一个调用 ID。

C。每个客户端将请求发送到它要调用的服务的队列中。该请求包含服务的所有参数、发送响应的队列名称和调用 ID。队列名称可以是客户端的地址。这样每个客户端都将拥有自己独特的队列。

d。收到请求后，服务提供者对其进行处理并将响应发送到应答队列

e. 每个客户端还不断地轮询其输入队列以接收它发送的请求的答案。

这种设计的主要缺点是队列不像地图那样可扩展。因此，它不是非常可扩展的。但是它仍然可以每秒处理 5K 请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T15:23:12.617

我为自己做了一个测试，并验证它在一定限制下运行良好。

架构是 Producer-Hazelcast_node-Consumer(s)

使用两个 Hazelcast 队列，一个用于请求，一个用于响应，我可以测量不到 1 毫秒的往返时间。

如果我放置多个请求队列的消费者，负载平衡工作正常。

如果我添加另一个节点，并将客户端连接到每个节点，那么往返时间超过 15 毫秒。这是由于 2 个 hazelcast 节点之间的复制所致。如果我杀死一个节点，客户端会继续工作。所以故障转移是以时间为代价的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T18:25:52.950

您不能使用相关 ID 对 hazelcast 中的单个队列执行请求-回复吗？这是应该唯一定义队列的 2 个提供者/消费者之间的对话的 id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:50:35.473

此设置@unludo 的目的是什么？我只是好奇

# wsgi - bottle.py WSGI 服务器停止响应

> ID：14444456
> 
> 赞同：1
> 
> 时间：2013-01-21T17:53:04.757
> 
> 标签：wsgi, ubuntu-10.04, bottle

我正在尝试使用 bottle.py (Bottle v0.11.4) Web 框架构建一个简单的 API。为了在我的服务器（Ubuntu 10.04.4）上“守护”应用程序，我正在运行 shell

```
nohup python test.py & 
```

，其中 test.py 是以下 python 脚本：

```
import sys
import bottle
from bottle import route, run, request, response, abort, hook

@hook('after_request')
def enable_cors():
  response.headers['Access-Control-Allow-Origin'] = '*'

@route('/')
def ping():
  return 'Up and running!'

if __name__ == '__main__':
  run(host=<my_ip>, port=3000) 
```

我遇到了以下问题：

这最初有效，但服务器在一段时间（约 24 小时）后停止响应。不幸的是，日志不包含任何暴露的错误消息。

我能够重现此问题的唯一方法是，当我尝试在我的 Ubuntu 服务器上运行第二个脚本时，该脚本会创建另一个侦听不同端口的服务器（即：与上面完全相同的脚本，但端口 = 3001）。如果我向新创建的服务器发送请求，我也没有得到响应，并且连接最终会超时。

非常感谢任何建议。我是新手，所以如果这种方法存在根本性的问题，任何指向参考指南的链接也将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:21:12.607

你能确保服务器没有休眠。如果是，请尝试启用 LAN 唤醒[http://ubuntuforums.org/showthread.php?t=234588](http://ubuntuforums.org/showthread.php?t=234588)

# c# - 以静默模式安装 SQL Server Express 版本

> ID：14444458
> 
> 赞同：1
> 
> 时间：2013-01-21T17:53:12.713
> 
> 标签：c#, sql-server-2005-express, silent-installer

我使用 C# 并且需要在我的项目中以静默模式安装 SQL Server 2005 Express 版本并使用下面的代码，但是第一次，SQL Server 没有正确安装。Sql 数据库引擎不安装。当我从 Windows 卸载 SQL Server 2005 Express 版并从我的项目中安装它时，它会正确安装。

我的项目有什么问题？

```
ProcessStartInfo psSqlServer = new ProcessStartInfo(Application.StartupPath + "\\SQLEXPR\\setup.exe ", "/qn ADDLOCAL=ALL INSTANCENAME=MSSQLSERVER SECURITYMODE=SQL SAPWD=123 SQLAUTOSTART=1 DISABLENETWORKPROTOCOLS=0");

Process pSqlServer = Process.Start(psSqlServer);
pSqlServer.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-14T13:49:07.770

```
Process pro = new Process();
pro.StartInfo.FileName = Application.StartupPath + "\SQLEXPR\setup.exe";
pro.StartInfo.Arguments = "/qs ADDLOCAL=ALL INSTANCENAME=MSSQLSERVER SECURITYMODE=SQL SAPWD=123 SQLAUTOSTART=1 DISABLENETWORKPROTOCOLS=0";

pro.StartInfo.CreateNoWindow = true;
pro.Start();
pro.WaitForExit(); 
```

# c# - 比 ffmpeg 更快的帧提取

> ID：14444460
> 
> 赞同：3
> 
> 时间：2013-01-21T17:53:16.690
> 
> 标签：c#, .net, video, ffmpeg, directshow

我有一个视频分析程序，可以处理视频中的各种帧。（长达几个小时）视频可能会是 MP4，但也可能是其他格式。

目前，我有一个围绕 ffmpeg 调用的 C# 包装器，用于在请求的时间提取单个帧。（我正在使用 ffmpeg.exe 二进制文件。不是直接使用库）目前，这一切都有效。但它很慢。非常慢。

我找到了提高速度的方法，方法是在处理提取的帧时将它们存储在 ramdisk 中。更改存储的图像格式等...

我只是想检查是否有人能想到任何方法来拉出单个框架。瞬间准确。我知道这可能与 DShow 等有关...我直接使用 FFMPEG，因为我以前使用过它。但如果 DShow 可能更快，我会很乐意改变！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:50:07.583

在 Windows 中，您可以使用本机 API 来处理，特别是从媒体文件中读取：

*   直接秀
*   媒体基金会

两者都提供对 MP4（H.264 视频）的支持，DirectShow 作为由第三方 MP4 Demultiplexer 和 H.264 解码器扩展的框架（需要，Windows 7 也提供构建它），以及 Media Foundation - 本机或由第三方扩展扩展取决于操作系统版本。

两者都可以分别通过开源包装器[DirectShow.NET](http://directshownet.sourceforge.net/)和 Media Foundation .NET 从 .NET 进行接口。**对于单个帧，**这比 FFmpeg CLI 更快。另请注意，您将能够以增量方式获取帧，而无需定位特定时间并进行过多的重复工作，更不用说进程启动/初始化开销了。或者，您可以通过包装器将 FFmpeg/Libav 二进制文件用于 C# 并获得类似的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:57:33.097

您可以更改偏移参数的位置。如果视频包含有效的元数据，则顺序对速度很重要，您可以更快地浏览视频。

如果将偏移量放在输入文件之前，偏移量将使用比特率计算，并非每次都准确（在可变比特率的情况下），但它要快得多。正确的方法是遍历视频（偏移参数在输入文件之后），但这需要时间。

# jquery - 如何切换动画

> ID：14444462
> 
> 赞同：1
> 
> 时间：2013-01-21T17:53:20.763
> 
> 标签：jquery, css, jquery-animate

我有一个效果很好的动画。但我无法扭转它。有人可以给我一个提示吗？

```
$(".arrowclose").click(function() {
    $(".arrow").animate({ left: "218px" }, 1000, "easeOutQuad");                
    setTimeout(function() {
        $(".arrow").addClass("arrow_right arrowopen");
        $(".arrow").removeClass("arrow_left arrowclose");
}, 1000);
});

$(".arrowopen").click(function() {
    $(".arrow").animate({ left: "486px" }, 1000, "easeOutQuad");
    setTimeout(function() {
        $(".arrow").addClass("arrow_left arrowclose");
        $(".arrow").removeClass("arrow_right arrowopen");
    }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:01:57.937

`**[jsBin demo](http://jsbin.com/opujov/2/edit)**`

试一试，摆脱不需要的课程

```
$(".arrow").click(function() {     
   $(this).stop().animate({ left: $(this).offset().left > 218 ? 218 : 486 }, 1000, "easeOutQuad", function() {
       $(this).toggleClass("arrowopen, arrowclose");
   });
}); 
```

**编辑**

到目前为止，我知道您需要一个箭头来切换容器的进出，所以您可能想要这个：

`**[jsBin demo 2](http://jsbin.com/opujov/7/edit)**`

将箭头放在容器内：

```
 <div class="wrapcontent">
    Test
    <div class="arrow arrowopen"></div>
  </div> 
```

相应的样式：

```
.arrowopen{
  position:absolute;
  right:-20px;
  top:0px;
  cursor:pointer;
  width:20px;
  height:20px;
}
.arrowopen  {background:#cf5;}
.arrowclose {background:#f00;}

.wrapcontent {

 position:absolute;
 width: 300px;
 height:100px;
 background:#888;
 left:-300px;

} 
```

并在箭头上 - >单击动画父容器：

```
$(".arrow").click(function() {  

   $wrapcontent = $(this).closest('.wrapcontent');
   wrapOffset = $wrapcontent.offset().left;

   $wrapcontent.stop().animate({ left: !wrapOffset ? -300 : 0 }, 1000, "easeOutQuad");
   $(this).toggleClass("arrowopen, arrowclose");

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:57:29.413

这是因为您在 DOM 就绪（您的 arrowopen 类）上不存在的元素上使用了 click 事件。您应该使用 .on() jQuery 方法 -> [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:27:34.993

尝试这个：

```
$(".arrowclose").click(function() {
   $(".arrow").animate({
        left: "218px"
      }, 1000, "easeOutQuad",function(){
        $(".arrow").addClass("arrow_right arrowopen").removeClass("arrow_left arrowclose");
    });
});

$(".arrowopen").click(function() {
    $(".arrow").animate({
        left: "486px"
    }, 1000, "easeOutQuad", function(){
       $(".arrow").addClass("arrow_left arrowclose").removeClass("arrow_right arrowopen");
    });
}); 
```

试试这个，看看是否有帮助。

# blackberry-10 - 在图像视图中调整边框大小 Blackberry10 cascades

> ID：14444470
> 
> 赞同：2
> 
> 时间：2013-01-21T17:53:48.233
> 
> 标签：blackberry-10, blackberry-cascades

我需要设置一个图像视图，它的边缘应该有方形曲线，如何做到这一点任何人都可以给我一些解决方案来做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:04:05.000

Cascades qml 不支持边框或圆角。除非有人有更好的解决方案，否则我所做的是将 imageview 包装在容器中，并使用 9 切片图像作为容器背景。

一个粗略的例子：

```
Container {
    topPadding: 5
    leftPadding: 5
    rightPadding: 5
    bottomPadding: 5
    background: mybackground.imagePaint
    ImageView {
        imageSource: "asset:///images/image1.png"
    }
    attachedObjects: [
        ImagePaintDefinition {
            id: mybackground
            imageSource: "asset:///images/bgimage.amd"
        }
    ]
} 
```

根据需要调整填充以使边框更薄/更厚。

# javascript - 一起滚动 DIV

> ID：14444473
> 
> 赞同：0
> 
> 时间：2013-01-21T17:53:56.720
> 
> 标签：javascript, html, css

我想知道是否有人可以在理论上告诉我如何在滚动时将 2 个 DIV 锁定在一起。

我需要创建一个大图，但一次只能显示一小部分。我需要标签显示在锁定数据的状态下，但保持可见。我实际上是在尝试复制您可以滚动浏览 Excel 工作表的方式。

所以侧面的标签会随着数据垂直滚动，但在水平滚动时保持固定。反之亦然，标签在顶部。

这一切都将最终出现在一个 Rails 应用程序中，该应用程序将显示过去 100 年来为我的消防部门工作的员工的时间表。年份将在顶部，排名和位置将沿边（50-60 行） 我将只有空间显示 15 年和大约 20 行，并且仍然可读。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:56:32.417

您可以将侦听器放在两个 div 上，然后每当其中一个发生变化时，确保它们都获得相同的垂直偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:50:39.547

```
$('#center').ready(function(){
    var left
    $('#center').on("scroll", function(){  //activate when #center scrolls
        left = $('#center').scrollLeft();  //save #center position to var left
        $('#top').scrollLeft(left);        //set #top to var left
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:56:37.513

[您可以尝试 position:fixed 在滚动http://www.w3.org/Style/Examples/007/menus.en.html](http://www.w3.org/Style/Examples/007/menus.en.html)时锁定 div 相对于视口的位置

# android - 如何构建滑动菜单示例android

> ID：14444478
> 
> 赞同：0
> 
> 时间：2013-01-21T17:54:07.250
> 
> 标签：android, android-actionbar, actionbarsherlock, android-sliding

我非常热衷于使用 android 的滑动菜单活动。[我在这里](https://github.com/jfeinstein10/SlidingMenu)下载了第三方库，实际上我在构建时遇到了很多问题。

我能够构建操作栏，也能够构建滑动菜单活动 LIB，但我无法构建示例活动。

任何人都可以请下载一次并构建并告诉它是否适合您。如果是这样，请发布所需的更改，因为这将对很多人有所帮助。

# java - 如何从 Android 中的新的 BroadcastReceiver 中的 Intent 复制数据？

> ID：14444480
> 
> 赞同：0
> 
> 时间：2013-01-21T17:54:22.607
> 
> 标签：java, android

这是以下代码：

```
public class NotificationsReceiver extends BroadcastReceiver {
    public static final String INTENT_EXTRA_NOTIFICATION_INFO="intent_extra_notification_info";

    @Override
    public void onReceive(Context context, Intent intent) {
        NotificationInfo info=(NotificationInfo)intent.getSerializableExtra(INTENT_EXTRA_NOTIFICATION_INFO);
        NotificationTextInfo fields=DataSourceWrapper.getInstance().getNotificationTextInfo(info);
        NotificationManager manager=(NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification=new Notification(android.R.drawable.alert_dark_frame, "1", info.getId());
        notification.when=new Date().getTime();
        notification.setLatestEventInfo(context, fields.getTitle(), fields.getDescription(), null);
        manager.notify((int)info.getId(), notification);
    }
} 
```

`BroadcastReceiver`为 存在`AlarmManager`。当它第一次工作时一切都很好，但是当它第二次执行时，`NullPointerException`当我从 获取一些信息时它会连续显示一个`Intent`，因此`Intent`在第一次执行后会很清楚。

现在我的问题是：如何将数据复制`Intent`到新的数据中以修复`NullPointerException`？

日志猫：

```
01-23 17:00:00.578: E/receiver(8442): receive
01-23 17:00:00.608: E/AndroidRuntime(8442): FATAL EXCEPTION: main
01-23 17:00:00.608: E/AndroidRuntime(8442): java.lang.RuntimeException: Unable to start receiver com.ulnda.mypsych.receivers.NotificationsReceiver: java.lang.NullPointerException
01-23 17:00:00.608: E/AndroidRuntime(8442):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2408)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at android.app.ActivityThread.access$1500(ActivityThread.java:139)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1321)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at android.os.Looper.loop(Looper.java:154)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at android.app.ActivityThread.main(ActivityThread.java:4945)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at java.lang.reflect.Method.invoke(Method.java:511)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at dalvik.system.NativeStart.main(Native Method)
01-23 17:00:00.608: E/AndroidRuntime(8442): Caused by: java.lang.NullPointerException
01-23 17:00:00.608: E/AndroidRuntime(8442):     at com.ulnda.mypsych.db.DataSourceWrapper.getNotificationTextInfo(DataSourceWrapper.java:68)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at com.ulnda.mypsych.receivers.NotificationsReceiver.onReceive(NotificationsReceiver.java:27)
01-23 17:00:00.608: E/AndroidRuntime(8442):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2397)
01-23 17:00:00.608: E/AndroidRuntime(8442):     ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:17:27.457

似乎`DataSourceWrapper.getInstance()`返回 null 所以您需要在执行其他代码之前检查返回值是否不为 null：

```
<ReturnClassName> instance = DataSourceWrapper.getInstance();
if(instance != null) {
    NotificationTextInfo fields = instance.getNotificationTextInfo(info);
    // ... 
```

请注意，您需要*`<ReturnClassName>`*与您的真实班级名称交换我不知道该`DataSourceWrapper`班级。

# sql-server - SQL 中的访问等效项

> ID：14444481
> 
> 赞同：3
> 
> 时间：2013-01-21T17:54:23.083
> 
> 标签：sql-server, ms-access

我有一些代码`CDbl`在 Access 中转换数据，但我正在用 SQL 重写它，不知道用什么代替它。MS-Access 中的代码如下：

```
(CASE 
   WHEN EMP_TNG_RL_CD = 'ST' 
   THEN [CountOfEMP_TNG_STT_DT] * CDbl([Length]) 
   ELSE 0 
 END) AS ST_HOURS_SUM 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T17:57:28.340

在 SQL Server 中，您可以使用：

```
CASE 
  WHEN EMP_TNG_RL_CD = 'ST' 
  THEN [CountOfEMP_TNG_STT_DT] * cast([Length] as float) 
  ELSE 0 
END AS ST_HOURS_SUM 
```

查看[SQL Server 中的数据类型列表](http://msdn.microsoft.com/en-us/library/ms187752.aspx)

# sms - 使用 Mac OS X Lion 向 Prolink PHS300 发送 AT 命令

> ID：14444485
> 
> 赞同：0
> 
> 时间：2013-01-21T17:54:36.447
> 
> 标签：sms, at-command, sms-gateway

今天，我试图通过我的运行 OS X Lion 的机器向它发送 AT 命令来使用我的 Prolink PHS300 USB 调制解调器发送 SMS。

我已经调整了调制解调器的设置，例如检查“使用终端窗口连接...”等。现在我正在尝试向它发送 AT 命令。

在我的终端窗口中，我输入`screen /dev/tty.USBModemATPort_`了但它告诉我消息，例如`Could not open line '/dev/tty.USBModemATPort_' for R/W: Resource is busy`然后`Sorry, could not find a PTY.`

在绝望的尝试中，我什至尝试了 chmod 777 "...ATPort_" 但无济于事。

有谁知道我是否在这里做错了什么？非常感谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:19:51.690

发现了我的问题 - 这是一个愚蠢的问题。这是因为连接到互联网的 3G 连接应用程序已打开，因此屏幕显示资源繁忙。

希望这可以为将来节省一些时间。

# visual-studio-2010 - 'iostream': 没有这样的文件或目录

> ID：14444486
> 
> 赞同：1
> 
> 时间：2013-01-21T17:54:38.783
> 
> 标签：visual-studio-2010, visual-c++

> **可能重复：**
> [安装 Visual Studio 2010（任何版本）仅在 C++ 头目录中安装 2 个文件](https://stackoverflow.com/questions/12460307/installation-of-visual-studio-2010-any-edition-installs-only-2-files-in-the-c)

我很绝望现在这并不好笑我已经在整个互联网上搜索了答案并且它不起作用......我已经安装并重新安装了 Visual Studio 2010 Pro 至少 4 次，它没有解决任何问题......这里我的问题

我尝试制作一个简单的 Hello world 项目，但它失败了。

```
#include<iostream>
using namespace std;

int main()
{ 
  cout << "Hello World.." << endl;
  return 0;
}

1>------ Build started: Project: ds, Configuration: Debug Win32 ------
1>Build started 1/21/2013 12:31:36 PM.
1>InitializeBuildStatus:
1>  Touching "Debug\ds.unsuccessfulbuild".
1>ClCompile:
1>  d.cpp
1>c:\users\dj\documents\visual studio 2010\projects\ds\ds\d.cpp(1): fatal error C1083:
Cannot open include file: 'iostream': No such file or directory
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.32
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我在 VC 中的包含文件夹只有这些名称 ammintrin omp pgobootrun srv wmiatlprov

我对此不太满意，所以如果你要回答，你能把它说成菜鸟术语吗:) 提前谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:05:25.500

当您选择控制台应用程序时，请检查选项：包括预编译头文件，很可能您创建了一个空项目，在这种情况下，您必须手动添加 iostream 文件的路径

在 .vcxproj 目录中包含您应该有： 包含目录 $(VCInstallDir)include;$(VCInstallDir)atlmfc\include;$(WindowsSdkDir)include;$(FrameworkSDKDir)\include; 和库 $(VCInstallDir)lib;$(VCInstallDir)atlmfc\lib;$(WindowsSdkDir)lib;$(FrameworkSDKDir)\lib

如果你有这些和 stdafx.h 包含在 cpp 但仍然没有到 iostream 的路径，你应该检查 PATH 环境变量不要被破坏或任何变量 $(VCInstallDir) $(WindowsSdkDir) $(FrameworkSDKDir)

# api - 按距离搜索特定地点的 API

> ID：14444495
> 
> 赞同：0
> 
> 时间：2013-01-21T17:54:57.297
> 
> 标签：api, google-maps, geolocation, location, google-places-api

我想按位置（纬度、经度）返回特定地点（Target、Macy's 等商店）。

我一直在使用 google places api 并在 name 参数中输入不同的商店。结果充其量是不一致的。

这是我应该用来按名称和邻近度返回特定商店的 api 吗？google places api near by search 只有一个名称参数。出于性能原因，理想情况下，我希望在对端点的单个请求中搜索多个特定商店。

总之，我应该使用什么 api 按名称和邻近度返回特定商店？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:10:47.017

Google Places API 是正确使用的 Google API；但是，正如您提到的，它不支持多个`name`或`keyword`参数。[这里](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4278)有一个活动的 Places API - 功能请求，如果您希望看到它已解决并收到未来更改的通知，请给它加星标。

不要使用`name`参数，而是尝试使用`keyword`参数。该`keyword`参数与所有可用字段匹配，包括但不限于姓名、类型和地址，以及客户评论和其他第三方内容。这通常可以产生更多或更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:47:11.367

似乎foursquare api 确实可以让您搜索多个特定地点。

这是一个可以解决问题的示例网址：

[https://api.foursquare.com/v2/venues/search?ll=34.017717,-118.159335&query=](https://api.foursquare.com/v2/venues/search?ll=34.017717,-118.159335&query=Target)目标 Victoria's Secret Macy's &intent=browse&radius=16094&oauth_token=mytoken g

所以我要放弃 Google Places 并选择 FourSquare。

# sql-server-2008 - SSRS 按组创建摘要而不使用子报表？

> ID：14444496
> 
> 赞同：2
> 
> 时间：2013-01-21T17:55:00.470
> 
> 标签：sql-server-2008, reporting-services

我正在构建一个需要按组显示摘要的报告。该报告按餐厅按产品显示数据。它还需要按地区按产品显示数据（一个地区所有餐厅的总数）：

```
Restaurant 1
  Pepperoni Pizzas: 10
  Cheese Pizzas: 12
  Ham Pizzas: 15

Restaurant 2
  Pepperoni Pizzas: 5
  Cheese Pizzas: 12
  Ham Pizzas: 20

District Totals
  Pepperoni Pizzas: 15
  Cheese Pizzas: 24
  Ham Pizzas: 25 
```

我采用的方法是构建一个子报告，该报告将根据主报告传递的参数显示商店、地区等的数据。从设计的角度来看，这很麻烦，并且在运行时*很慢。*有没有办法在不使用子报表的情况下创建地区总数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:22:49.280

这可以通过一个数据集/报告和所需的多种不同食物类型来完成。我创建了一些基本数据：

```
create table Pizza
(
  district varchar(100)
  , restaurant varchar(100)
  , foodItem varchar(100)
  , quantitySold int
)

insert into Pizza
select 'District 1', 'Restaurant 1', 'Pepperoni Pizzas', 10
union all
select 'District 1', 'Restaurant 1', 'Cheese Pizzas', 12
union all
select 'District 1', 'Restaurant 1', 'Ham Pizzas', 15
union all
select 'District 1', 'Restaurant 2', 'Pepperoni Pizzas', 5
union all
select 'District 1', 'Restaurant 2', 'Cheese Pizzas', 12
union all
select 'District 1', 'Restaurant 2', 'Ham Pizzas', 20 
```

为报告创建一个带有*District*组（如果需要）和*Restaurant组的基本***Tablix**：

 **![在此处输入图像描述](../Images/f51ca5761f1f87a57be53a439a31773c.png)

这里的技巧是我合并了最后一行中的所有单元格，并在单元格中插入**了另一个**表格，这次是基于*食物*组：

![在此处输入图像描述](../Images/a655546a5c0360d253e723d17cf1e330.png)

因为这是在*地区*范围内，所以它的基础数据将基于特定地区的所有行。最终结果：

![在此处输入图像描述](../Images/0c6d4e3a9929a036e20b3c4f3f6ffa2d.png)

这将在多个*地区*重复。根据需要调整外观！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T21:22:59.090

正如我在评论中所说，您正在寻找一个具有静态内容的简单组或组内组。

为避免使用子报表，您只需在前两个示例中按餐厅分组，我认为您已经在这样做了。

如果您`District Totals`是静态内容，只需添加行并在数据单元格上为您的所有比萨饼添加一个简单的总和，例如：`[Sum(PepperoniPizzas)]`。

如果它被分组，你应该做同样的事情，但在你的分组数据中。从您的问题来看，这是您可能的意思的第二种情况，即您的整个数据按地区分组，然后按餐馆分组，如果是这样，您就是这样做的：

有一个按餐厅的内部组和一个按地区的带页脚的外部组。在此页脚中，您应该执行与上述相同的操作。它看起来像这样：

```
|--Group by District
|----Group by Restaurant
|------Details or another group
|----End of group by restaurant
|----
|----District Totals
|----Pepperoni Pizzas - [Sum(PepperoniPizzas)]
|----Cheese Pizzas - [Sum(CheesePizzas)]
|----Ham Pizzas - [Sum(HamPizzas)]
|--End of district group 
```

我现在在家，所以我不能给你看报告，但我想上面的例子很好理解。让我知道这是否是您需要的，如果不是详细说明的话。当我明天上班时，我会用报告的样子更新这个答案。

**更新**

正如我所说，您的报告应如下所示：

*   团体

![在此处输入图像描述](../Images/a577c8aab535f557ab4facdba76c4faf.png)

![在此处输入图像描述](../Images/1cde23dec1f488fe90142a2d3699935b.png)

*   报告本身

![在此处输入图像描述](../Images/8e5955b5f0d2c448759794b4c7e152aa.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:17:20.483

如果您希望单独包含数据，我只会添加第二个数据集。

但是，如果您希望报告中的代码在“分组”上显示“总计”，我会添加一个分组列“总计”

EG：我有一个类似于你的小数据集：

```
declare @Pizza table ( restaurantid int identity, pizzas int)

insert into @Pizza values (10),(15),(5);

select * from @Pizza 
```

我创建了一个表，其中唯一的值是：restaurantid、“详细信息”行中的比萨饼，它们在标题中生成相似的名称。

如果您希望总计，您需要在左下角的“设计”视图中查看“行组”。单击向下箭头>添加总计>之后。您现在添加了另一行，它将汇总到目前为止表中的所有内容。您可以删除餐厅 ID 的单元格值，因为它们无关紧要，而是放入有用的内容，例如“总计”。**

# internet-explorer - 使用 Watin 隐藏 FileUpload 对话框

> ID：14444497
> 
> 赞同：0
> 
> 时间：2013-01-21T17:55:05.230
> 
> 标签：internet-explorer, file-upload, dialog, watin, visible

我在 C# 中使用带有 Watin 和 IE8 的 FileUpload。我不想在我的屏幕上看到任何东西。所以，我用

```
Settings.Instance.MakeNewIeInstanceVisible = false; 
```

除了我的 FileUpload 对话框之外，一切都被隐藏了。即使我的浏览器实例被隐藏，此对话框也会出现在顶部。有人建议隐藏这个吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T09:23:00.937

I fixed this problem with another function ,you just set Url,save path and all works add this in class

```
[DllImport("urlmon.dll", CharSet = CharSet.Auto, SetLastError = true)]
static extern Int32 URLDownloadToFile(Int32 pCaller, string szURL, string szFileName, Int32 dwReserved, Int32 lpfnCB); 
```

and this function

```
 int lwhdr = URLDownloadToFile(0, Link, FilePath, 0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:55:56.937

也许这会有所帮助（未选中），当您初始化浏览器时设置此属性：

```
browser.ShowWindow(NativeMethods.WindowShowStyle.ShowMinimized); 
```

# android - 如何从RecentTaskInfo 中获取应用信息？

> ID：14444502
> 
> 赞同：0
> 
> 时间：2013-01-21T17:55:16.820
> 
> 标签：android

目前，我只能获取最近任务的 ID，如下所示：

```
final List<RecentTaskInfo> recentTasks = activityManager.getRecentTasks(Integer.MAX_VALUE, 1);
for (int i = 0; i < recentTasks.size(); i++) 
{
     System.out.println(""+recentTasks.get(i).id);
} 
```

但是如何获取其他信息？像 package_name、main_activity 等等？

我还发现一些 ID 是`-1`. 这是什么意思？我们能得到这些任务的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T17:55:35.100

`-1`表示任务当前未运行。

您可以使用`recentTaskInfo.baseIntent`获取`Intent`用于启动任务的 ，然后例如使用 获取包名称`intent. getComponent().getPackageName()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T07:47:35.603

在这里，我使用此代码将正在运行的应用程序从后台带到前台。我希望这可以帮助你...

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
 {  
final ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
final List<RecentTaskInfo> recentTasks = activityManager.getRecentTasks(Integer.MAX_VALUE, ActivityManager.RECENT_IGNORE_UNAVAILABLE);

RecentTaskInfo recentTaskInfo = null;

for (int i = 0; i < recentTasks.size(); i++) 
{
    if (recentTasks.get(i).baseIntent.getComponent().getPackageName().equals(packageName)) {
       recentTaskInfo = recentTasks.get(i);
       break;
    }
}

if(recentTaskInfo != null && recentTaskInfo.id > -1) {
    activityManager.moveTaskToFront(recentTaskInfo.persistentId, ActivityManager.MOVE_TASK_WITH_HOME);
    return;
}
} 
```

# python - Gmail IMAP 未返回 uid

> ID：14444503
> 
> 赞同：2
> 
> 时间：2013-01-21T17:55:29.330
> 
> 标签：python, gmail, imap, sync, imaplib

我正在通过 IMAP 连接到我的 gmail 帐户以同步我的一些电子邮件并解析它们。有时我需要再次下载一些电子邮件，因为我做了某种修复，现在 gmail 没有`uids`以任何方式向我返回这些电子邮件，这里有一些代码可以更好地解释我自己：

```
typ, data = self.connection.uid('search', None, '(SINCE 14-Dec-2012 BEFORE 20-Dec-2012)')
17:05.55 > HJBM3 UID SEARCH (SINCE 14-Dec-2012 BEFORE 20-Dec-2012)
17:05.69 < * SEARCH
17:05.69 < HJBM3 OK SEARCH completed (Success)
('OK', ['']) 
```

我在这些日期有很多电子邮件，包括我要解析的电子邮件，但它没有返回任何内容，具体取决于它返回一些 uid 的日期，因此并没有完全损坏。

我决定尝试一下，如果雷鸟正确同步了这些电子邮件并且没有问题。

我正在使用 python 2.6 imaplib（版本 2.58）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:51:23.617

也许这会对某人有所帮助，所以我会在这里回答：

我在gmail中有这个设置：

![Gmail 限制 IMAP 文件夹](../Images/1dc60a21b94c9f1f37a2ee0420d3d779.png)

当我将其更改为“不限制”时，它就像一种魅力。

# ruby-on-rails - 编写不保留这么多数据库对象的 Rails 测试

> ID：14444504
> 
> 赞同：0
> 
> 时间：2013-01-21T17:55:29.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec, rspec2

我正在尝试重构一些 RSpec/Rails 测试，以便它们将尽可能少的对象保留到数据库中，但是在试图弄清楚如何重写测试时遇到了麻烦，如下所示：

```
describe User do
  context "record creation" do
    before(:each) { @user = User.new(user_atts) }

    it "should generate a confirmation_token" do
      # Generated as the result of a callback
      @user.save!
      expect(@user.confirmation_token).to be_present
    end

    it "should set the confirmed_at attribute to nil" do
      # Cleared as the result of a callback
      @user.save!
      expect(@user.confirmed_at).to be_nil
    end

    it "should call the send_confirmation_instructions method" do
      @user.should_receive(:send_confirmation_instructions) {}
      @user.save!
    end
  end

  def user_atts
    # return attributes hash
  end
end 
```

这是一个非常简单的示例，但在我的规范中有很多类似的实例，并且在大多数情况下，它们都将记录保存到数据库中。我很想利用 RSpec`let`和`subject`助手，但我不完全确定这些甚至会在这里有所帮助。

我一直在使用[FactoryGirl](https://github.com/thoughtbot/factory_girl)，并认为它的`build_stubbed`策略可能会加快我的规范，但我找不到很多可以帮助限制实际记录创建的实例（或者我可能不知道如何使用）。

我假设在某些情况下测试*需要*创建记录，但上面的示例几乎不像其中之一。我什至应该尝试重构它还是编写这些测试更好？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:11:11.423

我的测试可能看起来像这样。

```
describe User do
  let(:user) { FactoryGirl.build_stubbed(:user) } 

  context "record creation" do
    it "should generate a confirmation_token" do
      user.save!
      expect(user.confirmation_token).to be_present
    end

    it "should set the confirmed_at attribute to nil" do
      user.save!
      expect(user.confirmed_at).to be_nil
    end

    it "should call the send_confirmation_instructions method" do
      expect(user).to receive(:send_confirmation_instructions).once
      user.save!
    end
  end
end 
```

那是使用 Factory Girl 创建用户模型。此外，如@RahulGarg 所述，我会让 DatabaseCleaner 在每次测试后清除数据库

你所要做的就是在你的 spec_helper 中配置类似这样的东西

```
 config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end 
```

这意味着在每次测试后数据库将被清除。

# javascript - 使用 JS 查找屏幕高度，然后通过 CSS 将其应用到 div 类

> ID：14444510
> 
> 赞同：4
> 
> 时间：2013-01-21T17:56:11.310
> 
> 标签：javascript, html, css, liquid

我正在开发单页滚动至网页设计，但无法使此代码正常工作。

我想要做的是通过 JavaScript 获取用户的屏幕高度。

然后我想将此屏幕高度应用到我的 div 类，这样我将始终拥有一个与用户屏幕分辨率大小相同的容器。可以说，一种始终适合屏幕的液体设计。

这是我希望可变屏幕高度的一个简短示例：

```
<script type="text/javascript">
function matchHeight() {
$('.container').css('height',$(window).height);
};
</script> 
```

`<div class="container"> I want this container to be the height of the users screen resolution. </div>`

```
.container { width:100%; height: /* javascript value */ } 
```

帮助将不胜感激！提前致谢。

编辑：我添加了我完整文档的[小提琴](http://jsfiddle.net/jeffersonvdh/LR7dq/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:02:29.287

你所要求的一点也不难。它所需要的只是一个不错的 JavaScript 函数和对 HTML 代码的一些快速的小改动。

首先，通过对您的 HTML 进行一些快速更改，给您的“容器”`<div>`一个 id；

```
<div class="container" id="container">
I want this container to be the height of the users screen resolution. 
</div> 
```

接下来定义一个引用它的 JavaScript 变量：

```
var container = document.getElementById("container"); 
```

然后使用我一直使用的这个简洁的函数来使用 JavaScript 获取屏幕的尺寸：

```
function resize() {
    // the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight

if (typeof window.innerWidth != 'undefined') {
    viewportwidth = window.innerWidth,
    viewportheight = window.innerHeight
}

// IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) {
    viewportwidth = document.documentElement.clientWidth,
    viewportheight = document.documentElement.clientHeight
}

// older versions of IE

else {
    viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
    viewportheight = document.getElementsByTagName('body')[0].clientHeight
}
container.style.height = viewportheight+"px";
} 
```

请注意，我`container.style.height = viewportheight+"px";`输入了函数。这意味着每次`resize();`调用我们都会更新浏览器的尺寸并将这些尺寸重新应用到容器中`<div>`。

`resize();`每次页面调整大小以及页面首次加载时，我们将使用以下 HTML 调用正文中的函数：

```
<body onload="resize()" onresize="resize()"> 
```

该函数会将容器`<div>`的大小调整为整个页面高度。如果您对此有任何疑问或有任何疑问，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:01:28.430

您不能在 css 中使用 JS 代码。

你可以像这样做你想做的事：

```
$('.container').height($(window).height()); 
```

或者

```
$('.container').height($(document).height()); 
```

无论您想要窗口还是文档高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:04:17.573

你不能做以下事情

```
.container { width:100%; height: /* javascript value */ } 
```

但是，您可以将高度设置为某个值，然后使用`jQuery`的`.css()`API 进行更改。

还要确保`matchHeight()`从内部调用您的函数`$(documeent).ready()`。

```
=========================== 
```

您可以将您的`container`班级更改为

```
.container { position:absolute: width:100%; height: 100%; }

=========================== 
```

或者你可以使用`css media queries`

# python - 如何从 python 中的原始输入创建多个变量？

> ID：14444512
> 
> 赞同：1
> 
> 时间：2013-01-21T17:56:18.723
> 
> 标签：python

这里是 python 初学者。我一直在做一些在线教程，似乎找不到这个问题的解决方案。我想做的是：

```
hostname = raw_input("Type host name here: ") 
```

然后用户输入任意数量的主机名，输入done，然后他们输入的内容就成为脚本中使用的变量。因此，如果他们键入 HOST1、HOST2、HOST3，done，那么脚本将为每个条目运行命令。例子：

```
def myhostsbecomevariables(*args):
      arg1, arg2, arg3, etc etc etc = args
      print "arg1: %r, arg2: %r, etc: %r, etc: %r" % (arg1, arg2, etc etc)

myhostsbecomevariables(HOST1, HOST2, HOST3) 
```

如果用户键入 3 个主机名，则 myhostbecomesvariables 使用 3 个参数。如果他们输入了 5 个主机名，那么它将有 5 个参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:57:39.547

`raw_input`返回单个字符串。如果您愿意，可以在分隔符上拆分该字符串：

```
hosts = raw_input("enter hosts (separated by a comma):").split(',') 
```

或拆分为 2 行：

```
host_string = raw_input("enter hosts (separated by a comma):")
hosts = hosts_string.split(',') 
```

您可以将其传递给`myhostbecomevariables`使用参数解包：

```
myhostbecomevariables(*hosts) 
```

你的函数可以这样定义：

```
def myhostbecomevariables(*hosts):
    for host in hosts:
        print(host) 
```

确实没有必要在这里将主机解压缩成组成部分——因为（我假设）您将对每个主机执行相同的操作，只需循环执行即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:02:33.873

这当然取决于您的用例，但使用[shlex](http://docs.python.org/2/library/shlex.html) Python 模块可以很好地处理原始 shell 输入，例如引用的值。

```
import shlex
input = raw_input("Type host name here: ")
hostnames = shlex.split(input) 
```

# python - Python中的两个正斜杠

> ID：14444520
> 
> 赞同：62
> 
> 时间：2013-01-21T17:56:40.353
> 
> 标签：python, floor-division

我从[基数排序](http://en.wikipedia.org/wiki/Radix_sort#Example_in_Python)中遇到了这个代码示例：

```
def getDigit(num, base, digit_num):
    # pulls the selected digit
    return (num // base ** digit_num) % base 
```

Python中的作用是什么`//`？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-21T17:57:55.597

`//`是楼层除法算子。它生成其操作数的商的底数，而不对整数操作数进行浮点舍入。这有时也称为整数除法，即使您可以将它与浮点数一起使用，因为`/`默认情况下使用整数除法来执行此操作。

在 Python 3 中，`/`即使两个操作数都是整数，普通除法运算符也会返回浮点值，因此地板除法需要不同的运算符。这与 Python 2 不同，在 Python 2 中，`/`如果两个操作数都是整数，则执行下除法；如果至少一个操作数是浮点值，则执行浮点除法。

`//`当决定 Python 3 应该具有这种新功能时，该运算符首次在 Python 2.2 中被引入以实现前向兼容性。连同通过`from __future__ import division`（也在 Python 2.2 中引入）启用 Python 3 行为的能力，这使您能够在 Python 2 中编写与 Python 3 兼容的代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-27T18:30:53.380

你可以试试：

```
In []: 5/2
Out[]: 2

In []: 5.0/2
Out[]: 2.5

In []: 5.0//2
Out[]: 2.0 
```

这应该是不言自明的。

（这是在 Python 2.7 中。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-30T01:15:05.607

Python3 支持两种除法，浮点（/）和整数（//）。

浮点数：45/2 = 22.5

整数：45//2 = 22

# ios - 将 iPad 上的图像“轻弹”到屏幕上

> ID：14444521
> 
> 赞同：0
> 
> 时间：2013-01-18T13:43:42.937
> 
> 标签：ios, networking, unity3d

我想知道以下是否曾经做过，最好是统一的。

我想要的是能够拍摄我在 iPad 上的图像并将其发送到屏幕以通过轻拂手势显示。就像您对具有双显示器的计算机上的窗口所做的那样。

您拖动它，它会立即出现在另一台显示器上。

如果以前没有这样做过，您将如何使这成为可能？我知道如果我要将图像从一个设备传递到另一个设备，将需要大量的网络连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:06:16.787

这在很大程度上取决于您希望在此特定上下文中的“监视器”名称下包含什么。

如果它是连接到计算机的屏幕，理论上你可以通过创建一个 iPad 客户端应用程序和一个计算机服务器应用程序，并使用某种方式在两者之间进行通信（直接 WiFi 或通过互联网等）来完成所有这些工作。当然，您需要为您想要定位的操作系统（Windows、Linux 等）制作特定的服务器应用程序。

如果屏幕是电视，您应该检查哪些是“足够智能”的屏幕，以允许 iPad 可以使用的外部无线连接（或者如果您愿意，也可以使用有线连接）。然后，对于每台电视，您必须检查它们提供了哪些 API，以及这些 API 是否允许您以您想要的方式访问连接器。然后它与以前的故事相同，选择您想要定位的平台并为这些平台创建软件。

您可以使用平板电脑和计算机（任何 Android 平板电脑+任何具有任何操作系统的计算机或 iPad 与 Apple 计算机）来探索这一点的一种方法。尝试做一些简单的编码，看看如何将图像从平板电脑传输到计算机。完成后，您的 iPad 应用程序的演示部分（图像库、手指轻弹支持等）可以使用 Unity 完成。

# extjs - 在 ExtJS 4.1 中从其控制器向视图添加按钮

> ID：14444523
> 
> 赞同：1
> 
> 时间：2013-01-21T17:56:46.030
> 
> 标签：extjs, extjs4.1

我有以下代码：

**// wlpt.js**

```
Ext.onReady(function() {     
 Ext.application({
     name: 'WLPT',  
     appFolder: 'app',

     controllers: ['MenuPanel'/*, 'Employees'*/],

     launch: function() {
         WLPT.application = this;
     },

     autoCreateViewport: true            
 });
}); 
```

**//viewport.js**

```
Ext.define('WLPT.view.Viewport', {
 extend:'Ext.container.Viewport',
 id:'viewport',
 requires:[
 'WLPT.view.Header',
 'WLPT.view.MenuPanel'
 ],
 layout: 'fit', 

 initComponent: function() {
     this.items = {
         layout: 'border', 
         items: [{
             region: 'north',
             xtype: 'headerview',
             height: 80
         },{
             region: 'west',
             id: 'westernPanel',
             xtype: 'menupanelview',
             width: 200,
             collapsible: true

         },{
             xtype: 'panel',
             title: 'Center Panel',
             region: 'center'
         }]
     };        
     this.callParent();
 }
}); 
```

**// 控制器/MenuPanel.js**

```
Ext.define('WLPT.controller.MenuPanel', {
 extend: 'Ext.app.Controller',

 currentYear: 0,    
 views:['MenuPanel'],

 refs:
 [{
     selector: '.menupanel',
     ref: 'menuPanel'        
 },{ 
     selector: '#centerPanel',
     ref: 'centerPanel'
 }],

 init: function() {
     var d = new Date();
     this.currentYear = d.getFullYear();

     this.control({            
         '#btnEmployee': {
             click: this.btnEmployeeClicked
         }
     });
     this.callParent(arguments);

     rolevalue = 10;

     if (rolevalue == 10) {
         // user is member of administration group
         this.addAdminButtons();
     } 
 },
 addAdminButtons:function() {
     console.log('addAdminButtons');
     **this.getMenuPanelView().add({
         xtype:'button',
         scale: 'large',
         text: 'Projects',
         itemId: 'btnProject'
     });**
 }          
}); 
```

**// 查看/MenuPanel.js**

```
Ext.define('WLPT.view.MenuPanel', {
 extend: 'Ext.panel.Panel',
 alias: 'widget.menupanelview',
 bodyPadding: 2,
 title: 'Menu Panel',
 layout: {
     type:'vbox',
     align:'stretch'
 },
 items: [{
     xtype:'label',
     height: 10
 }],

 autoShow: true,

 initComponent: function() {
     this.callParent(arguments);
 }     
}); 
```

我的问题是控制器没有在视图上添加按钮。我收到以下错误：

> 未捕获的类型错误：对象函数 h(){return this.constructor.apply(this,arguments)||null} 没有方法“添加”

我究竟做错了什么？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:49:00.500

您需要添加对菜单面板的引用。为你的菜单面板分配一个 itemId:`menupanel`并且在你的控制器中你可以引用它可以引用它: `#menupanel`。我注意到你有`.menupanel`选择器，我不确定它是否完全正确。

我还注意到您的`this.getMenuPanelView()`操作不正确，因为您在控制器中没有引用`menuPanelView`。

**提示：** 您也可以使用浏览器的调试工具（我最喜欢 Google Chrome）并在代码中添加断点以轻松评估您的代码。

# perl - 当服务器套接字多次调用发送时，Perl 客户端 socket->recv() Vs <>

> ID：14444539
> 
> 赞同：3
> 
> 时间：2013-01-21T17:57:37.003
> 
> 标签：perl, sockets, recv

我有一个 perl 服务器端套接字，它在客户端套接字上调用 send() 逐个返回字段。

如果代码如下所示，我在客户端读取所有字段时没有问题：

```
while ($response = <$sock>) {
print "$response";
last if $response eq "END_OF_REQUEST";
} 
```

但是，如果客户端代码如下所示，它将进入循环并且无法正常工作：

```
while(1) {      
$sock->recv($response, 1);
print "$response\n";    
last if $response eq "END_OF_REQUEST" ;
} 
```

我同意我可以使用所有字段并在服务器端仅调用一次发送。但我有兴趣知道第二种方法有什么问题。在第二种方法中更改 recv 的 LENGTH arg 是否有效？

在没有关于套接字的适当理论知识的情况下，我开始直接动手。谢谢你的耐心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:34:27.740

长度参数`recv()`是您想要接收的消息的*最大*`recv()`长度，并且永远不会将超过那么多字符写入缓冲区。（消息的其余部分会发生什么取决于套接字的类型；对于流式套接字，它将可用于下一次`recv()`调用，而对于数据报套接字，它只是被丢弃。）

因此，您`$sock->recv($response, 1);`最多只能将一个字符写入`$response`. 显然，一个单字符的字符串永远不会等于`"END_OF_REQUEST"`。

简单的解决方案是将足够大的最大长度传递给`recv()`，这样您的消息就不会被截断。

* * *

这是一个简单的演示：

```
use strict;
use warnings;
use IO::Socket;

my ($rd, $wr) = IO::Socket->socketpair(AF_UNIX, SOCK_STREAM, PF_UNSPEC)
    or die "socketpair: $!";
defined $wr->send("Hello, world!") or die "send: $!";
my $buf;
do {
    defined $rd->recv($buf, 9) or die "recv: $!";
    print qq(received: "$buf"\n);
} while ($buf !~ /!/); 
```

这将输出：

```
received: "Hello, wo"
received: "rld!" 
```

# sql - Select * from table vs Select col1,col2,col3 from table

> ID：14444548
> 
> 赞同：-2
> 
> 时间：2013-01-21T17:58:23.053
> 
> 标签：sql, sql-server, performance, select, benchmarking

> **可能重复：**
> [选择 * 与选择列](https://stackoverflow.com/questions/3180375/select-vs-select-column)

我刚刚和我的一位同事讨论了在存储过程中指定查询命令的 SQL Server 性能。

所以我想知道哪一个比另一个更受欢迎，这背后的具体原因是什么。

假设，我们确实有一张名为 **Employees** (EmpName,EmpAddress) 的表

我们想从表中选择所有记录。所以我们可以用两种方式编写查询，

1.  从员工中选择 *

2.  从员工中选择 EmpName、EmpAddress

所以我想知道上述查询中是否存在任何特定差异或性能问题，或者它们是否与 SQL Server 引擎相同。

更新：

1.  可以说表模式不会再改变了。所以以后的维护没有意义。
2.  性能方面，可以说，使用率非常高，即数据库服务器上每秒数百万次点击。我希望对这两种方法都有一个清晰准确的性能评级。
3.  没有对整个表进行索引。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T18:00:25.420

如果您在表格中添加一列，具体的区别将显示其丑陋的头部。

突然，您希望返回两列的查询现在返回三列。如果您专门为这两列编码，那么您的其余代码现在已损坏。

在性能方面，应该没有区别。

在处理数据库时，我总是采用尽可能具体的方法。如果表格有两列，而您只需要这两列，请具体说明。指定这两列。它将为您节省未来的头痛。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T18:02:02.613

您应该始终明确引用列。这样，如果表结构发生更改（并且此类更改是以智能、向后兼容的方式进行的），您的查询将继续工作并且可以随着时间的推移进行修改。

此外，除非您实际上需要表中的所有列（不是典型的），否则使用 SELECT * 会为您的应用程序带来不必要的数据，并且可能会强制进行聚集索引扫描，而不是可能通过更窄的覆盖来满足指数。

*   [要踢的坏习惯：使用 SELECT * / 省略列列表](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-21T19:01:44.970

我也是“尽可能具体”规则的狂热拥护者。从长远来看，不遵循它会伤害你。但是，您的问题似乎来自不同的背景，所以让我尝试回答一下。

* * *

当您向 SQL Server 提交查询时，它会经历几个阶段：

1.  通过网络传输查询字符串。
2.  解析查询字符串，生成解析树
3.  将解析树中的引用对象链接到现有对象
4.  基于统计数据和行数/大小估计进行优化
5.  执行
6.  通过网络传输结果数据

让我们来看看每一个：

1.  * 查询短了几个字节，所以这一步会更快
2.  * 查询包含更少的“令牌”，所以这应该（！）更快
3.  在链接期间，需要提取列列表并与查询字符串进行比较。这里“*”被解析为实际的列引用。如果不访问代码，就不可能说哪个版本需要更少的周期，但是访问的数据量大致相同，因此应该是相似的。
4.  -6。在这些阶段，两个示例查询之间没有区别，因为它们都将编译为相同的执行计划。

考虑到所有这些，您可能会在使用该`*`符号时节省几纳秒。但是，您的示例非常简单。在更复杂的示例中，在多表连接中指定为表的列的子集可能会导致与使用`*`. 如果发生这种情况，我们可以确定显式查询会更快。

上述比较还假设 SQL Server 进程单独运行在单个处理器上，并且没有同时提交其他查询。如果该过程必须在编译期间产生，那么这些额外的周期将远远超过我们试图保存的周期。

因此，与实际执行时间相比，我们所说的节省量是非常微小的，不应作为“糟糕”编码实践的借口。

我希望这回答了你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T18:10:13.563

性能方面，我认为这两个之间没有区别。但是这两个在不同的情况下使用，可能有什么区别。
考虑一个稍微大一点的表。如果您的表（Employees）包含 10 列，那么第一次查询将保留该表的所有信息。但是对于第二次查询，您可以指定您需要哪些列信息。所以当您需要所有1号员工的信息是最好的，而不是指定所有的列名。
当然，当您需要 ALTER 表时，这两个表将不相等。

# r - 从更大的矩阵创建许多新矩阵

> ID：14444549
> 
> 赞同：0
> 
> 时间：2013-01-21T17:58:27.733
> 
> 标签：r, loops, matrix

我对 R 比较陌生，尽管我已经完成了大量简单的 R 编程。我认为这应该是一个简单的问题，但我似乎无法弄清楚。

更新：

情况是由于计算机上的内存限制，我需要对数据进行分段以进行回归分析。我基本上有三个相关的矩阵，分别称为 X (nxk)、y (nx 1) 和 Om (nxn) 我需要将这三个矩阵按行分解，以各种方式将它们相乘，然后将结果相加。由于 Om 的错误结构，一些组必须是 3 行，其他行 2 和其他 1 行。对于 3 组，我们将有：

Xi (3 xk)、yi (3 x 1) 和 Om3 (3 x 3)

我已经在 R 中构建了 Om1、Om2 和 Om3

```
Om1<-matrix(2)

vec1<-c(2,-1)
vec2<-c(-1,2)
Om2<-rbind(vec1,vec2)

vec3<-c(2,-1,0)
vec4<-c(-1,2,-1)
vec5<-c(0,-1,2)
Om3<-rbind(vec3,vec4, vec5) 
```

现在的问题是我如何分解 X 和 y 以便我可以匹配 X、y 和 Om 的行。我在想我需要一个循环，但不能让它像这样工作：

```
for(i in 1:280){
  assign(paste("xh", i, sep = ""), i)    
}
for(i in 1:145){
  xhi<- X[i,] 
}
for(i in 146:195){
  xhi<-X[ seq( from=i , length=2) , ]
}

for(i in 196:280){
  xhi<-X[ seq( from=(i+49) , length=3) , ]
} 
```

前 145 个 xi 对应于 Om1，接下来的 50 个 xi 对应于 Om2 ...我想我需要一种方法来索引它们，这与最终我需要总结 xi、yi 和近江对面

很抱歉这篇长篇文章试图彻底，任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:42:18.977

假设这个矩阵被命名为`mtx`，你需要 10 个这样的行数递增的矩阵，并且它至少有 55 行，因为每次迭代增加 1 的长度总和是 n(n+1)/2：

```
mlist <- list()
for (x in 1:10) mlist[[x]] <-mtx[ seq( from=x*(x-1)/2+1 , length=x) , ] 
```

如果愿望是卡尔建议的那样：

```
mlist <- list()
for (x in 1:10) mlist[[x]] <-mtx[ seq( from=1 , length=x) , ] 
```

或者：

```
mlist <- list()
for (x in 1:10) mlist[[x]] <-mtx[ seq( from=x , length=2) , ] 
```

# mysql - MySQL 索引帮助 - 哪个更快？

> ID：14444562
> 
> 赞同：3
> 
> 时间：2013-01-21T17:59:26.797
> 
> 标签：mysql, database, indexing, database-performance

**我正在处理的事情：**

我有一个使用[ActiveCollab](https://www.activecollab.com/) 2 的项目，并且数据库结构对我来说是新的 - 实际上所有内容都存储到一个`project_objects`表中并且具有递归的层次关系：

*   记录 1234 可能是123 的`type`“票”`parent_id`
*   记录 123 可能是12 的`type`“类别”`parent_id`
*   记录 12 可能是`type`“里程碑”等等。

目前该表中有超过 450,000 条记录，并且代码中的许多查询都引用了`name`没有索引的字段。一个示例值可能是`Design`或`Development`。

这可能是一个示例查询：

`SELECT * FROM project_objects WHERE type = "Ticket" and name = "Design"`

**我的问题：**

我有一个查询需要 12-15 秒以上，我感觉它来自 `name`缺少索引并需要全文搜索的列。我对索引的理解是，如果我在`name`字段中添加一个，它会加快读取速度，但会减慢插入和更新速度。每次添加或更新记录时是否需要完全重建索​​引，还是只是更改/附加？如果这意味着大大减慢依赖于更快写入的代码库的其他部分，我不想使用索引优化此查询。

**我的问题：**

假设每天有 100 次读取和 100 次写入，这对于 MySQL 来说更有可能是一个更快的过程——在没有索引的情况下对上表执行上述查询，还是每次添加记录时都必须重建索引？

我没有开始运行基准测试的知识或权限，但我想在听起来完全是新手的情况下向客户提供建议。谢谢！

**编辑**：这是表格：

```
'CREATE TABLE `project_objects` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `source` varchar(50) DEFAULT NULL,
  `type` varchar(30) NOT NULL DEFAULT ''ProjectObject'',
  `module` varchar(30) NOT NULL DEFAULT ''system'',
  `project_id` int(10) unsigned NOT NULL DEFAULT ''0'',
  `milestone_id` int(10) unsigned DEFAULT NULL,
  `parent_id` int(10) unsigned DEFAULT NULL,
  `parent_type` varchar(30) DEFAULT NULL,
  `name` varchar(150) DEFAULT NULL,
  `body` longtext,
  `tags` text,
  `state` tinyint(4) NOT NULL DEFAULT ''0'',
  `visibility` tinyint(4) NOT NULL DEFAULT ''0'',
  `priority` tinyint(4) DEFAULT NULL,
  `created_on` datetime DEFAULT NULL,
  `created_by_id` smallint(5) unsigned NOT NULL DEFAULT ''0'',
  `created_by_name` varchar(100) DEFAULT NULL,
  `created_by_email` varchar(100) DEFAULT NULL,
  `updated_on` datetime DEFAULT NULL,
  `updated_by_id` smallint(5) unsigned DEFAULT NULL,
  `updated_by_name` varchar(100) DEFAULT NULL,
  `updated_by_email` varchar(100) DEFAULT NULL,
  `due_on` date DEFAULT NULL,
  `completed_on` datetime DEFAULT NULL,
  `completed_by_id` smallint(5) unsigned DEFAULT NULL,
  `completed_by_name` varchar(100) DEFAULT NULL,
  `completed_by_email` varchar(100) DEFAULT NULL,
  `comments_count` smallint(5) unsigned DEFAULT NULL,
  `has_time` tinyint(1) unsigned NOT NULL DEFAULT ''0'',
  `is_locked` tinyint(3) unsigned DEFAULT NULL,
  `estimate` float(9,2) DEFAULT NULL,
  `start_on` date DEFAULT NULL,
  `start_on_text` varchar(50) DEFAULT NULL,
  `due_on_text` varchar(50) DEFAULT NULL,
  `workflow_status` int(4) DEFAULT NULL,
  `varchar_field_1` varchar(255) DEFAULT NULL,
  `varchar_field_2` varchar(255) DEFAULT NULL,
  `integer_field_1` int(11) DEFAULT NULL,
  `integer_field_2` int(11) DEFAULT NULL,
  `float_field_1` double(10,2) DEFAULT NULL,
  `float_field_2` double(10,2) DEFAULT NULL,
  `text_field_1` longtext,
  `text_field_2` longtext,
  `date_field_1` date DEFAULT NULL,
  `date_field_2` date DEFAULT NULL,
  `datetime_field_1` datetime DEFAULT NULL,
  `datetime_field_2` datetime DEFAULT NULL,
  `boolean_field_1` tinyint(1) unsigned DEFAULT NULL,
  `boolean_field_2` tinyint(1) unsigned DEFAULT NULL,
  `position` int(10) unsigned DEFAULT NULL,
  `version` int(10) unsigned NOT NULL DEFAULT ''0'',
  PRIMARY KEY (`id`),
  KEY `type` (`type`),
  KEY `module` (`module`),
  KEY `project_id` (`project_id`),
  KEY `parent_id` (`parent_id`),
  KEY `created_on` (`created_on`),
  KEY `due_on` (`due_on`)
  KEY `milestone_id` (`milestone_id`)
) ENGINE=InnoDB AUTO_INCREMENT=993109 DEFAULT CHARSET=utf8' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:04:22.940

在列上添加单点索引的插入成本`name`很可能可以忽略不计——它可能相当于增加了一个恒定的时间，可能不会超过几毫秒。您会占用一些额外的磁盘空间，但这通常不是问题。没有什么比您在选择性能时所经历的多秒钟更重要的了。

添加索引，享受性能提升。

顺便说一句：索引不会在每次插入时都“重建”。它们通常在 B-Trees 中实现，除非您经常删除，否则一旦您的级别超过几个级别，应该需要很少的重新平衡（并且很少深度的重新平衡非常便宜）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T20:47:56.367

正如@Ray 指出的那样，不必在每次插入、更新或删除操作时都重建索引。因此，如果您只想提高此（或类似）查询的效率，请添加索引 on`(name, type)`或 on `(type, name)`。

由于您已经有一个`(type)`单独的索引，我将添加第一个：

```
ALTER TABLE project_objects 
  ADD INDEX name_type_IDX
    (name, type) ; 
```

在繁忙的服务器上可能需要几秒钟，但必须完成一次，然后所有具有像您这样的条件的查询都会受益。它还可以提高`name`仅涉及 or`name`和的其他几种类型的查询的效率`type`：

```
WHERE name = 'Design' AND type = 'Ticket'      --- your query

WHERE name = 'Design'                          --- condition on `name` only 

GROUP BY name                                  --- group by  `name`

WHERE name LIKE 'Design%'                      --- range condition on `name` only

WHERE name = 'Design'                          --- equality condition on `name`
  AND type LIKE 'Ticket%'                      --- and range condition on `type`

WHERE name = 'Design'                          --- equality condition on `name`
GROUP BY type                                  --- and group by `type`

GROUP BY name                                  --- group by  `name`
       , type                                  --- and  `type` 
```

# ruby-on-rails - Ruby 类变量

> ID：14444563
> 
> 赞同：1
> 
> 时间：2013-01-21T17:59:27.877
> 
> 标签：ruby-on-rails, ruby, oop

我正在尝试通过阅读有关类变量的教程来学习 Ruby。

该代码创建了一个“Worker”对象，创建了一个类变量来跟踪用户最后创建的 Worker 实例。

我从作者那里复制了代码，但我得到了错误：

```
undefined method `latest' for Worker:Class (NoMethodError) 
```

我找到的代码是：

```
class Worker
  attr_writer :number_of_jobs

  def initialize(name, job)
    @name = name
    @job = job

    @@latest = @name
    @@job = @job
    puts "Lets get started"
  end

  def new_job(job)
    @job = job
    puts "I moved to #{job}!"
    self.fetch_info
  end

  def name_update(name_new)
    @name = name_new
    puts "My new name is #{name_new}."
    self.fetch_info
  end

  def fetch_info
    puts "I'm #{@name} in #{@location}."
  end

  def job_score
    return "#{@number_of_jobs * 10}Fg"
  end

  protected
  def are_you_worker?(guest_name)
    puts "Yes #{guest_name}, I am a worker!"
    return true
  end

  private
  def text_a_message(message)
    puts message
  end

  public
  def tell_friend(where)
    text_a_message("I just applied to #{where}")
  end
end

#running the code
Worker1 = Worker.new("Steve", "Support")
Worker2 = Worker.new("Alan", "PA")
puts Worker.latest 
```

有人能看出为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:00:36.857

类变量在这个类中是私有的，这会导致问题。因此访问 Worker.latest 变量将导致错误，因为它在类外部的实例中不可见（但它是创建和设置的）。

此外，属性是对象而不是类的一部分，因此您不应该拥有此类的属性。在原生 Ruby 中，类变量不能从外部访问，除了通过类方法（Rails 中有针对它们的扩展）。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:07:34.903

恕我直言，这是关于 Ruby 的类系统更令人沮丧的事情之一。[即使对于子类](http://ghouston.blogspot.com/2006/06/ruby-class-variables-attributes-and.html)，类变量的隐私也是如此。无论如何，解决问题的直接方法是添加一个类方法，如下所示：

```
class Worker
  def self.latest
    @@latest
  end
end 
```

# javascript - 没有标志的Javascript不区分大小写的正则表达式

> ID：14444564
> 
> 赞同：0
> 
> 时间：2013-01-21T17:59:27.763
> 
> 标签：javascript, .net, regex, devexpress

情况：

MVC+DevExpress .NET

基于服务器端属性的客户端验证（如**[RegularExpression("^con|prn|aux$")]**）

有没有办法使验证不区分大小写？

我无法添加**i**标志，因为 RegExp 对象是在 DevExpress 客户端代码中创建的

**var regEx = new RegExp(this.pattern);**

.NET 样式的内联修饰符，例如**(?i)**返回“意外的量词”错误。

丑陋的选择是写像**^[Cc][Oo][Nn]|[Pp][Rr][Nn]|[Aa][Uu][Xx]$**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:06:21.547

一旦创建了 javascript RegExp 对象，就不能更改正则表达式或标志。但是，您可以使用该属性获取原始正则表达式源`.source`，然后使用新需要的标志创建一个新的 RegExp 对象。

# java - 浮点数与双精度数（在 Java 中）

> ID：14444567
> 
> 赞同：5
> 
> 时间：2013-01-21T17:59:39.610
> 
> 标签：java, floating-point-precision

在给定相同输入的情况下，这两种方法是否会返回不同的值？

```
int compare1(float a, float b)
{
    return Double.compare(a, b);
}

int compare2(float a, float b)
{
    return Float.compare(a, b);
} 
```

出于同样的原因，任何可存储在 java 的 Float 中的数字都可以存储在 java 的 Double 中而不会丢失任何精度，这是否正确（或错误）？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T18:01:03.780

~~是的; 将双精度数转换为浮点数会产生不同的结果。~~

~~`a`如果和之间的差异`b`太小而无法显示在浮点数中，`compare2()`则会返回`0`而`compare1()`不会。~~

* * *

您刚刚编辑了问题以扭转您的要求。新的答案是：

我几乎可以肯定他们永远都是一样的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T18:27:59.233

[每个`float`都可以精确地表示为`double`.](https://stackoverflow.com/a/259514/367273) 由此可见，这两个函数总是返回相同的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T18:09:56.120

A`double`只是为您提供了比`float`. 如果所有这些额外的位都为零，那么您的值与浮点数相同。所以是的，所有`float`s 都可以转换为`double`s 而不会丢失精度。

# r - 多个 ggplots 导致图例问题

> ID：14444577
> 
> 赞同：3
> 
> 时间：2013-01-21T18:00:25.623
> 
> 标签：r, ggplot2

我目前有下面包含的代码来创建它： ![在此处输入图像描述](../Images/b46ca5421e806958f541e62bd5056c41.png) 这或多或少是我想要的。但是，我希望能够改变但我正在努力解决的两件事是：1）删除标题为“组”的图例，并为图表上的粗黑线添加一个图例，标题为“平均值” '（同时确保线条本身保持黑色）和 2）能够将显示为自定义颜色值的 geom_polygons 和 geom_points 的填充颜色更改为（不使图例消失）。谢谢。

```
library(ggplot2)
library(reshape)
library(car)

G1 <- 1:10
G2 <- 11:20
G3 <- 21:30
G4 <- 31:35
G5 <- 36:41

sdata <- read.csv("http://dl.dropbox.com/u/58164604/sdata.csv", stringsAsFactors = FALSE)
pdata<-melt(sdata, id.vars="Var")
jdata <-pdata

pdata$group <- recode(pdata$Var, "G1 = 'A'; G2 = 'B'; G3 = 'C'; G4 = 'D'; G5 = 'E'")

VarArea <- data.frame(unique(pdata$Var))
VarFinalArea <-c()
for (g in 1:max(VarArea))
{
VarNum<-pdata[which(pdata$Var==g),1:c(ncol(pdata))]
VarMin <- min(VarNum$value)
VarMax <- max(VarNum$value)
VarMinMax <- cbind(VarMin, VarMax)
VarFinalArea <- rbind(VarFinalArea,VarMinMax)
}
VarFinal <- data.frame(cbind(VarArea,VarFinalArea))
colnames(VarFinal)<-c("Variable", "Min", "Max")
VarFinal$group <- recode(VarFinal$Variable, "G1 = 'A'; G2 = 'B'; G3 = 'C'; G4 = 'D'; G5 = 'E'")

VarArea <- data.frame(unique(jdata$Var))
NumV <- max(VarArea)
VarFinalMin <-c()
for (g in 1:NumV)
{
VarNum<-jdata[which(jdata$Var==g),1:c(ncol(jdata))]
VarN <- g
VarMin <- min(VarNum$value)
VarMinN <- cbind(VarN, VarMin)
VarFinalMin <- rbind(VarFinalMin,VarMinN)
}
VFinalMin <- data.frame(VarFinalMin)
colnames(VFinalMin)<-c("Variable", "Value")
VFinalMin_Max<-max(VFinalMin$Value)

VarFinalMax <-c()
for (g in 1:NumV)
{
VarNum<-jdata[which(jdata$Var==g),1:c(ncol(jdata))]
VarN <- g
VarMax <- max(VarNum$value)
VarMaxN <- cbind(VarN, VarMax)
VarFinalMax <- rbind(VarFinalMax,VarMaxN)
}
VFinalMax <- data.frame(VarFinalMax)
colnames(VFinalMax)<-c("Variable", "Value")
VFinalMax_Min<-min(VFinalMax$Value)

VFinal<-rbind(VFinalMin, VFinalMax)
VFinal$Group <- recode(VFinal$Variable, "G1 = 'A'; G2 = 'B'; G3 = 'C'; G4 = 'D'; G5 = 'E'")

VLarge <- VFinal[which(VFinal$Value >= VFinalMax_Min),]
VLarge <- VLarge[order(-VLarge$Variable, VLarge$Group),]
VSmall <- VFinal[which(VFinal$Value <= VFinalMin_Max),]
VSmall <- VSmall[order(VSmall$Variable, VSmall$Group),]
VFinal <- rbind(VSmall, VLarge)

AMin <-min(jdata$value)
AMax <-max(jdata$value)

AMinValue<-round_any(AMin,1000, f =floor)
AMaxValue<-round_any(AMax,1000, f =ceiling)

ggplot(VFinal, aes(Variable, Value, colour = Group)) + geom_polygon(colour=NA, aes(fill=Group), alpha=0.5) +scale_x_discrete(name="Missing Variable Number", limits=c(1:NumV)) + theme(axis.text.x=element_text(angle=270, vjust=0.5, hjust=0.0))+ scale_y_continuous(name="Within Cluster Sum of Squares", limits=c(AMinValue, AMaxValue), breaks = seq(AMinValue, AMaxValue, 1000)) + guides(fill=guide_legend(title="Variable Groups"))

last_plot()+geom_line(data=subset(pdata,variable =='Mean'),size=1.5, alpha=0.5, aes(Var, value), colour="black", inherit.aes = FALSE)

last_plot()+geom_line(data=subset(pdata,variable!='Mean'),size=0.5, alpha=0.5, aes(Var, value, shape=variable), colour='black', inherit.aes = FALSE) 

last_plot()+geom_point(data=subset(pdata,variable!='Mean'), aes(Var, value, shape = variable, col=group),alpha=1.0, inherit.aes = FALSE) + labs (shape = "Number of Clusters") + guides(scale_alpha(guide='none'))

last_plot()+ ggtitle("Clusters with Missing Variables") + theme(plot.title = element_text(size = 14, colour = "black", face = "bold")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:32:40.273

感谢 baptiste 和 user1935457 帮助我创建了这个：

![在此处输入图像描述](../Images/13d5ec7ee9fde45ef45e2d59c02fcb78.png)

这是如何完成的：

```
library(ggplot2)
library(reshape)
library(car)

G1 <- 1:10
G2 <- 11:20
G3 <- 21:30
G4 <- 31:35
G5 <- 36:41

sdata <- read.csv("http://dl.dropbox.com/u/58164604/sdata.csv", stringsAsFactors = FALSE)
pdata<-melt(sdata, id.vars="Var")
jdata <-pdata

pdata$group <- recode(pdata$Var, "G1 = 'A'; G2 = 'B'; G3 = 'C'; G4 = 'D'; G5 = 'E'")

VarArea <- data.frame(unique(pdata$Var))
VarFinalArea <-c()
for (g in 1:max(VarArea))
{
VarNum<-pdata[which(pdata$Var==g),1:c(ncol(pdata))]
VarMin <- min(VarNum$value)
VarMax <- max(VarNum$value)
VarMinMax <- cbind(VarMin, VarMax)
VarFinalArea <- rbind(VarFinalArea,VarMinMax)
}
VarFinal <- data.frame(cbind(VarArea,VarFinalArea))
colnames(VarFinal)<-c("Variable", "Min", "Max")
VarFinal$group <- recode(VarFinal$Variable, "G1 = 'A'; G2 = 'B'; G3 = 'C'; G4 = 'D'; G5 = 'E'")

VarArea <- data.frame(unique(jdata$Var))
NumV <- max(VarArea)
VarFinalMin <-c()
for (g in 1:NumV)
{
VarNum<-jdata[which(jdata$Var==g),1:c(ncol(jdata))]
VarN <- g
VarMin <- min(VarNum$value)
VarMinN <- cbind(VarN, VarMin)
VarFinalMin <- rbind(VarFinalMin,VarMinN)
}
VFinalMin <- data.frame(VarFinalMin)
colnames(VFinalMin)<-c("Variable", "Value")
VFinalMin_Max<-max(VFinalMin$Value)

VarFinalMax <-c()
for (g in 1:NumV)
{
VarNum<-jdata[which(jdata$Var==g),1:c(ncol(jdata))]
VarN <- g
VarMax <- max(VarNum$value)
VarMaxN <- cbind(VarN, VarMax)
VarFinalMax <- rbind(VarFinalMax,VarMaxN)
}
VFinalMax <- data.frame(VarFinalMax)
colnames(VFinalMax)<-c("Variable", "Value")
VFinalMax_Min<-min(VFinalMax$Value)

VFinal<-rbind(VFinalMin, VFinalMax)
VFinal$Group <- recode(VFinal$Variable, "G1 = 'A'; G2 = 'B'; G3 = 'C'; G4 = 'D'; G5 = 'E'")

VLarge <- VFinal[which(VFinal$Value >= VFinalMax_Min),]
VLarge <- VLarge[order(-VLarge$Variable, VLarge$Group),]
VSmall <- VFinal[which(VFinal$Value <= VFinalMin_Max),]
VSmall <- VSmall[order(VSmall$Variable, VSmall$Group),]
VFinal <- rbind(VSmall, VLarge)

AMin <-min(jdata$value)
AMax <-max(jdata$value)

AMinValue<-round_any(AMin,1000, f =floor)
AMaxValue<-round_any(AMax,1000, f =ceiling)

ggplot(VFinal, aes(Variable, Value, colour = Group)) + geom_polygon(colour=NA, aes(fill=Group), alpha=0.5) +scale_x_discrete(name="Missing Variable Number", limits=c(1:NumV)) + theme(axis.text.x=element_text(angle=270, vjust=0.5, hjust=0.0))+ scale_y_continuous(name="Within Cluster Sum of Squares", limits=c(AMinValue, AMaxValue), breaks = seq(AMinValue, AMaxValue, 1000)) + guides(fill=guide_legend(title="Variable Groups"))+ scale_fill_manual("Variable Groups", values = c("A" = "red", "B" = "blue", "C" = "purple", "D" = "salmon", "E" = "orange"))

last_plot()+geom_line(data=subset(pdata,variable =='Mean'), alpha=0.5, aes(Var, value, size= ''), colour="black", inherit.aes = FALSE)+ guides (size = guide_legend(title = "Mean", override.aes = list(size = 1.5, colour = "black")))

last_plot()+geom_line(data=subset(pdata,variable!='Mean'),size=0.5, alpha=0.5, aes(Var, value, shape=variable), colour='black', inherit.aes = FALSE) 

last_plot()+geom_point(data=subset(pdata,variable!='Mean'), aes(Var, value, shape = variable, col=group),alpha=1.0, inherit.aes = FALSE) + labs (shape = "Number of Clusters") + guides(scale_alpha(guide='none')) + guides(colour = "none") + scale_colour_manual("Variable Groups", values = c("A" = "red", "B" = "blue", "C" = "purple", "D" = "salmon", "E" = "orange"))

last_plot()+ ggtitle("Clusters with Missing Variables") + theme(plot.title = element_text(size = 14, colour = "black", face = "bold")) 
```

# c# - DataTemplate 绑定问题中的 ContextMenu

> ID：14444583
> 
> 赞同：5
> 
> 时间：2013-01-21T18:01:01.347
> 
> 标签：c#, silverlight-4.0, windows-phone-8, silverlight-toolkit

我在 LongListSelector 中有一个上下文菜单。此列表在运行时创建和更新。

```
<phone:PanoramaItem Header="{Binding Path=LocalizedResources.SavedGamesHeader, Source={StaticResource LocalizedStrings}}" Orientation="Horizontal">
            <phone:LongListSelector Margin="0,0,-22,2" ItemsSource="{Binding SavedGames}">
                <phone:LongListSelector.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical" Margin="12,2,0,20" Width="432">
                            <toolkit:ContextMenuService.ContextMenu>
                                <toolkit:ContextMenu>
                                    <toolkit:MenuItem Header="Remove" Click="RemoveSave_OnClick"/>
                                </toolkit:ContextMenu>
                            </toolkit:ContextMenuService.ContextMenu>
                            <Image Margin="10,5,10,0"  Height="173" Width="248" Source="{Binding Screen}" Stretch="Fill" HorizontalAlignment="Left"></Image>
                            <StackPanel Width="311" Margin="8,5,0,0" HorizontalAlignment="Left">
                                <TextBlock Tap="Save_OnTap" Tag="{Binding SavedGame}" Text="{Binding SaveName}" TextWrapping="Wrap" Margin="10,0" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="{StaticResource PhoneFontSizeMedium}" Foreground="White" FontWeight="Bold" FontFamily="Arial Black" HorizontalAlignment="Left" />
                                <TextBlock Text="{Binding GameName}" TextWrapping="Wrap" Margin="10,-2,10,0" Style="{StaticResource PhoneTextSubtleStyle}" HorizontalAlignment="Left" />
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                    <TextBlock Text="Created on:" Margin="10,-2,10,0" Style="{StaticResource PhoneTextSubtleStyle}" />
                                    <TextBlock Text="{Binding Created}" TextWrapping="Wrap" Margin="5,-2,10,0" Style="{StaticResource PhoneTextSubtleStyle}" />
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </phone:LongListSelector.ItemTemplate>
            </phone:LongListSelector>
        </phone:PanoramaItem> 
```

这是处理菜单项上的单击事件的方法

```
private void RemoveSave_OnClick(object sender, RoutedEventArgs e)
    {
        var menuItem = (MenuItem)sender;
        var saveViewModel = menuItem.DataContext as SavesViewModel;
        EmuStorageMgr.Instance.DeleteSave(saveViewModel.SavedGame.SaveFolder);
        App.ViewModel.RescanSaves();
    } 
```

以下方法填充 SavedGames 列表

```
public ObservableCollection<SavesViewModel> SavedGames { get; private set; }
public void RescanSaves()
    {
        SavedGames.Clear();
        var saves = EmuStorageMgr.Instance.GetSaves();
        foreach (var save in saves)
        {
            SavedGames.Add(new SavesViewModel(save));
        }
        this.IsSavesLoaded = true;
        NotifyPropertyChanged("SavedGames");
    } 
```

因此，当第一次填充 SavedGames 集合时，它可以完美运行，但是当集合发生变化（删除一些旧项目，添加新项目）时，我观察到一些奇怪的行为。当 OnClick 事件被触发时，我看到 menuItem.DataContext 不是针对我单击的菜单项，而是针对一些已删除的旧菜单项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T02:52:06.173

我不能对你的帖子发表评论，所以我会在这里说：

这是一个已知问题，我也有。我还没有找到任何方法来完全解决这个问题，也没有看到任何最近的解决方案。[您可以在此处](https://stackoverflow.com/questions/14084779/contextmenus-menuitem-datacontext-returns-old-items)查看我的帖子，以确保问题与您的一致。

**到目前为止，我看到的唯一解决方案在['11 的 msdn 博客](http://blogs.msdn.com/b/delay/archive/2010/05/11/we-ve-secretly-changed-this-control-s-datacontext-let-s-see-if-it-notices-workaround-for-a-silverlight-data-binding-bug-affecting-various-scenarios-including-datagrid-contextmenu.aspx)中进行了描述。它确定了 Silverlight 框架中的问题，他提供了我实施的解决方法。在您的项目中包含类文件并使用 XAML 标记，它将允许您的上下文菜单与父级的数据上下文保持同步。我使用它时遇到了一个小的副作用，所以它只是一个创可贴。**

我还发现另一个论坛告诉我这是一个没有解决方案的已知问题，但可以在[codeplex here](http://silverlight.codeplex.com/SourceControl/list/patches)找到一个补丁。我对补丁的问题是我不知道如何实现它，而且 LLS（这是我使用 ContextMenu 的）已经直接迁移到 SDK 中，所以我被卡住了。

这就是我对这个问题的全部挖掘，希望对您有所帮助。如果其他人还有要添加的，请执行。

**更新：** 使用上面提供的链接中的一些内容，我想我有一个更好的解决方案。在 ContextMenu Unloaded 事件中，刷新视图。就像是：

```
 private void add_but_up(object sender, RoutedEventArgs e)
    {
        ContextMenu conmen = (sender as ContextMenu);
        conmen.ClearValue(FrameworkElement.DataContextProperty);
    } 
```

这基本上就是博客中的补丁所做的。只是在完全不同的背景下。所以我的问题是无法使用像 ScrollTo() 这样的函数。在实际页面后面的代码中执行此操作似乎可以解决 ContextMenu 绑定问题。

# jquery - 如何使用jQuery检查一个值是否不在数组中

> ID：14444586
> 
> 赞同：2
> 
> 时间：2013-01-21T18:01:24.263
> 
> 标签：jquery, arrays

我在检查一个值是否**不在**数组中时遇到了一些麻烦。我试图在文本框中只允许某些按键。

这是我所拥有的：

```
var keyCodeArr = [ 8,9,13,17,18,37,39,46 ];
$('#txtSearch').keydown(function(event) {
var code = event.keyCode;

if (!$.inArray(code,keyCodeArr)) {
    event.preventDefault();
}
}); 
```

它允许文本框中的任何内容。我查看了 $.inArray() 的文档，其中显示了一个查看值**是否**在数组中的示例，所以我认为只需在它前面添加 NOT 就可以了。

还是我一开始就没有正确初始化数组？

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T18:03:32.147

使用 jquery：

```
if (!~$.inArray(code,keyCodeArr)) {
    ...
} 
```

# git - 子目录的 gitweb 快照

> ID：14444593
> 
> 赞同：3
> 
> 时间：2013-01-21T18:01:50.237
> 
> 标签：git, archive, snapshot, subdirectory, gitweb

调用 URL`http://<gitweburl>/gitweb.cgi?p=<repo>;a=tree;f=<subdir>;hb=HEAD`将显示`<repo>`从 开始的树`<subdir>`。

调用 URL`http://<gitweburl>/gitweb.cgi?p=<repo>;a=snapshot;f=<subdir>;hb=HEAD`将产生 404。

调用 URL`http://<gitweburl>/gitweb.cgi?p=<repo>.git;a=snapshot;h=HEAD`将提供`<repo>`HEAD 修订的快照。

我找不到正确的语法来让 Gitweb 从子目录开始提供快照。我的意思是导致：`$ git archive --format=tar --remote=<gituser>@<gitserver>:<repo> HEAD:<subdir>`

我天真地尝试调用 URL`http://<gitweburl>/gitweb.cgi?p=<repo>;a=snapshot;h=HEAD;f=<subdir>`但这**会导致包含整个存储库的快照存档**。

在 Gitweb 网络界面中单击后，我发现，更改为“树”视图并移动到`<subdir>`然后单击“快照”使用类似于以下的 URL：

`http://<gitweburl>?p=<repo>;a=snapshot;h=42a6503da6aaedc92bb3543e0b0de9b2de0aaae9;sf=tgz`

这正是我想要的，但我不知道这个哈希参数`h=...`是什么。这不是提交 ID - 我已经检查过了。它必须以某种方式识别`<subdir>`。但即使它确实如此 - 这仍然对我没有帮助，因为有人只想从/包含开始的快照`<subdir>`通常不知道这个哈希值。

关于如何通过 Gitweb 获取子目录快照的任何想法？提前致谢！

* * *

添加：

刚刚发现：`h=42a6503da6aaedc92bb3543e0b0de9b2de0aaae9`与`<subdir>`可见相关的哈希值是否由例如`$ git ls-tree -r -t HEAD`

所以这两个命令：

`$ git archive --format=tar --remote=<gituser>@<gitserver>:<repo> HEAD:<subdir>`

`$ git archive --format=tar --remote=<gituser>@<gitserver>:<repo> 42a6503da6aaedc92bb3543e0b0de9b2de0aaae9`

做同样的事情，让我**认为**这是等效的。我仍然不能只用. 调用此 URL 会导致“400 - 无效的哈希参数”......所以这里没有真正的进展。`HEAD:<subdir>``42a6503da6aaedc92bb3543e0b0de9b2de0aaae9``http://<gitweburl>?p=<repo>;a=snapshot;h=42a6503da6aaedc92bb3543e0b0de9b2de0aaae9;sf=tgz``HEAD:<subdir>`

* * *

正如 poke 所建议的，一个快速的肮脏黑客使用`URL http://<gitweburl>/gitweb.cgi?p=<repo>;a=snapshot;h=HEAD;f=<subdir>`

```
$ diff -Naur gitweb.cgi.original gitweb.cgi.new 
--- gitweb.cgi.original 2012-09-28 00:50:47.000000000 +0200
+++ gitweb.cgi.new  2013-01-22 11:04:29.870532502 +0100
@@ -7029,6 +7029,9 @@

    my ($name, $prefix) = snapshot_name($project, $hash);
    my $filename = "$name$known_snapshot_formats{$format}{'suffix'}";
+   if ($file_name) {
+       $hash="$hash:$file_name"
+   }
    my $cmd = quote_command(
        git_cmd(), 'archive',
        "--format=$known_snapshot_formats{$format}{'format'}", 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:14:19.730

有问题的`h`值是您当前正在查看的树对象的 id。提交有一个根树对象，您可以在 Gitweb 的提交页面上看到它。每棵树都是指向 blob（如果是文件）或其他树对象的目录条目列表。

因此，当您更深入地导航到树时，`h`总是代表树 id。`hb`另一方面，该值是提交 ID。

不幸的是，Gitweb 没有更好的方法来获取子目录的快照，即不知道树哈希而只知道路径。但是可能会添加一些功能，将`f`参数考虑在内并自动为您获取树哈希。

[我刚刚检查了这部分的来源，你在修改这部分](https://github.com/git/git/blob/master/gitweb/gitweb.perl#L7229)时可能会有运气。我不太了解 perl，无法告诉您具体要做什么，但您基本上可以检查`$file_name`变量是否已设置，如果是这样，只需获取`$hash:$file_name`. 然后你将它设置为新的哈希值，一切都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T12:55:18.407

我最近遇到了一个类似的任务——让 gitweb 生成一个包含列出对象名称的存档（只允许一个 f= URL 参数，但我们可以传递 %20 个空格字符来列出几个对象）。这是我在 OpenSuse 13.2“git-web-2.1.4-13.1.x86_64”版本中针对 gitweb.cgi 的整体补丁。

随意使用和享受：

```
--- gitweb.cgi.orig     2015-03-13 13:42:29.000000000 +0100
+++ gitweb.cgi.snapshot-filenames-withoutDebug  2015-07-02 14:50:46.196000000 +0200
@@ -20,6 +20,11 @@
 use Time::HiRes qw(gettimeofday tv_interval);
 binmode STDOUT, ':utf8';

+# http://www.spinics.net/lists/git/msg241958.html
+if (!defined($CGI::VERSION) || $CGI::VERSION < 4.08) {
+       eval 'sub CGI::multi_param { CGI::param(@_) }'
+}
+
 our $t0 = [ gettimeofday() ];
 our $number_of_git_cmds = 0;

@@ -871,7 +876,7 @@

        while (my ($name, $symbol) = each %cgi_param_mapping) {
                if ($symbol eq 'opt') {
-                       $input_params{$name} = [ map { decode_utf8($_) } $cgi->param($symbol) ];
+                       $input_params{$name} = [ map { decode_utf8($_) } $cgi->multi_param($symbol) ];
                } else {
                        $input_params{$name} = decode_utf8($cgi->param($symbol));
                }
@@ -7324,6 +7329,15 @@
                die_error(403, "Unsupported snapshot format");
        }

+       if (!defined($hash)) {
+               $hash = "";
+               if ( $file_name && $file_name =~ /^([^:]*):(.*)$/ ) {
+                       $hash = "$1";
+                       $file_name = "$2";
+               }
+               if ( $hash eq "") { $hash = "HEAD"; }
+               printf STDERR "Defaulted hash to '$hash' ('h=' URL argument was missing)\n";
+       }
        my $type = git_get_type("$hash^{}");
        if (!$type) {
                die_error(404, 'Object does not exist');
@@ -7341,6 +7354,14 @@
                git_cmd(), 'archive',
                "--format=$known_snapshot_formats{$format}{'format'}",
                "--prefix=$prefix/", $hash);
+       if ($file_name) {
+               # To fetch several pathnames use space-separation, e.g.
+               # "...git-web?p=proj.git;a=snapshot;f=file1%20file2
+               # To fetch pathnames with spaces, escape them, e.g.
+               # "...git-web?p=proj.git;a=snapshot;f=file\%20name
+               $cmd .= " " . $file_name;
+       }
+
        if (exists $known_snapshot_formats{$format}{'compressor'}) {
                $cmd .= ' | ' . quote_command(@{$known_snapshot_formats{$format}{'compressor'}});
        } 
```

更新：此代码删除已通过单元测试等进行了修改和扩展，并针对上游 gitweb 进行了 PR ......让我们看看它是如何进行的；）在此​​处查看更多信息：[https ://github.com/git/git/pull /206](https://github.com/git/git/pull/206)

希望这会有所帮助，吉姆·克里莫夫

# java - INSERT with DEFAULT id 在 PostgreSQL 中不起作用

> ID：14444594
> 
> 赞同：2
> 
> 时间：2013-01-21T18:01:54.653
> 
> 标签：java, postgresql, insert, playframework, ebean

我尝试在 Postgres 中运行此语句：

```
insert into field (id, name) values (DEFAULT, 'Me') 
```

我得到了这个错误：

```
ERROR: null value in column "id" violates not-null constraint 
```

我最终不得不手动设置ID。问题是当我的应用程序插入记录时，我收到重复键错误。我正在使用 Play 框架和 ebean ORM 构建一个 java 应用程序。所以整个架构是由ebean自动生成的。在这种情况下，将记录手动插入我的数据库的最佳做法是什么？

编辑：
这是我创建 Field 类的方式

```
@Entity
public class Field {
    @id
    public Long id;
    public String name;
} 
```

编辑：
我检查了 field_seq 序列，它看起来像这样：

```
CREATE SEQUENCE public.field_seq INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1; 
```

编辑：
这是 pgAdmin III 中生成的 SQL：

```
CREATE TABLE field
(
  id bigint NOT NULL,
  created timestamp without time zone,
  modified timestamp without time zone,
  name character varying(255),
  enabled boolean,
  auto_set boolean,
  section character varying(17),
  input_type character varying(8),
  user_id bigint,
  CONSTRAINT pk_field PRIMARY KEY (id),
  CONSTRAINT fk_field_user_3 FOREIGN KEY (user_id)
      REFERENCES account (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT ck_field_input_type CHECK (input_type::text = ANY (ARRAY['TEXT'::character varying, 'TEXTAREA'::character varying]::text[])),
  CONSTRAINT ck_field_section CHECK (section::text = ANY (ARRAY['MAIN_CONTACT_INFO'::character varying, 'PARTICIPANT_INFO'::character varying]::text[]))
);

CREATE INDEX ix_field_user_3
  ON field
  USING btree
  (user_id); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T20:16:03.300

没有为**定义列默认**值`field.id`。由于该序列`public.field_seq`似乎已经存在（但未附加到`field.id`），您可以使用以下方法修复它：

```
ALTER SEQUENCE field_seq OWNED BY field.id;

ALTER TABLE field
ALTER COLUMN id SET DEFAULT (nextval('field_seq'::regclass)); 
```

不过，请确保该序列未用于其他用途。

像这样创建表会*更简单：*

```
CREATE TABLE field
(
  id bigserial PRIMARY KEY,
  ...
); 
```

[`serial`手册上或手册中的详细信息`bigserial`。](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-SERIAL)
不确定 Play 框架如何实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T01:14:13.170

这行得通。

```
insert into field (id, name) values (nextval('field_seq'), "Me"); 
```

# python - 删除轴上选定的刻度

> ID：14444596
> 
> 赞同：1
> 
> 时间：2013-01-21T18:02:02.440
> 
> 标签：python, graph, matplotlib, plot

在**`Matplotlib`**，在**`Y axis`**I 有值`[0, 1]`，但 Y 轴上升到`1.2`。

现在，这个额外**`blank space`**的东西非常方便，我想保留它，但我不希望它`1.2`出现在 Y 轴范围内。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:23:14.003

您可以“[修剪](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.MaxNLocator)”顶部 ytick：

```
import matplotlib.pyplot as plt

# ... your plotting code here ...
plt.gca().yaxis.set_major_locator(plt.MaxNLocator(prune='upper')) 
```

优秀文档的摘录：“如果`prune=='upper'`，最大的勾号将被删除。”

* * *

编辑：如果有更多滴答声要删除，或者如果您希望更好地控制最大滴答声，请使用`nbins`kwarg：

```
...
max_num_of_intervals = 5
plt.gca().yaxis.set_major_locator(plt.MaxNLocator(nbins=max_num_of_intervals)) 
```

# ruby - 如何告诉 Compass 这是什么环境？

> ID：14444598
> 
> 赞同：0
> 
> 时间：2013-01-21T18:02:05.137
> 
> 标签：ruby, environment-variables, sass, compass-sass

在我的 Compass 项目中，我有一个`config.rb`with 设置`environment = :development`。

我如何告诉 Compass，当它在服务器上运行时（例如`compass compile`），环境应该是`production`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:12:10.093

[从文档](http://compass-style.org/help/tutorials/production-css/)

选项 A：使用罗盘生产默认值。

```
compass compile -e production --force 
```

注意：这只会更改罗盘默认值，您在配置中明确指定的选项不会更改。

选项 B：在命令行上覆盖您的配置文件设置

```
compass compile --output-style compressed --force 
```

选项 C：为生产创建单独的配置文件

```
cp config.rb prod_config.rb 
```

..编辑 prod_config.rb 以满足您的需求..

```
compass compile -c prod_config.rb --force 
```

# wix - 使用 WiX 的 RegistrySearch 从注册表中读取 DWORD 值

> ID：14444612
> 
> 赞同：6
> 
> 时间：2013-01-21T18:03:13.417
> 
> 标签：wix, registry, dword

`DWORD`我已经使用 WiX 创建了一个安装程序，并试图在我的产品修复安装期间保留现有的注册表项。为了存储现有值，我使用了以下 WiX 片段；

```
<Property Id="PreserveMySetting" Secure="yes">
  <RegistrySearch Id="FindExistingMySetting"
                  Root="HKLM"
                  Key="Software\!(loc.ProductManufacturer)\!(loc.ProductName)"
                  Name="MySetting"
                  Type="raw"
                  Win64="no" />
</Property> 
```

然后我稍后使用由保存的值驱动的组件进行设置。

问题是，注册表搜索将 DWORD 作为“格式化”字符串返回，例如；

> **#1**

而不仅仅是

> **1**

这意味着当我的组件设置注册表项时，它被创建为`REG_SZ`值为“#1”，即使我已经指出它应该是一个整数；

```
<Component Id="MySettingKey"
    Guid="{76C4B14C-14BC-42E1-91F0-75C9F2A20EC8}">
    <RegistryValue Id="MySetting"
        Action="write"
        Name="MySetting"
        Value="[PreserveMySetting]"
        Type="integer"
        KeyPath="yes"
        Key="Software\!(loc.ProductManufacturer)\!(loc.ProductName)"
        Root="HKMU"/>
</Component> 
```

有没有办法获取组件使用的实际注册表值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T19:43:50.883

这听起来会倒退，但是如果您将 Type 属性更改为 string 它将起作用。当您使用 ORCA 查看 MSI 的注册表时，原因就很清楚了。

当您选择整数 WiX 作者的“#[PRESERVEMYSETTING]”并选择字符串时，它是作者的 [PRESERVEMYSETTING]。由于 PRESERVEMYSETTING 已经是#1，你希望它是#1 而不是##1。

```
<Component Id="MySettingKey" 
    Guid="{76C4B14C-14BC-42E1-91F0-75C9F2A20EC8}">
    <RegistryValue Id="MySetting"
        Action="write"
        Name="MySetting"
        Value="[PRESERVEMYSETTING]" <!-- Secure Properties are PUBLIC properties -->
        Type="string"
        KeyPath="yes"
        Key="Software\!(loc.ProductManufacturer)\!(loc.ProductName)"
        Root="HKMU"/>
</Component> 
```

# objective-c - 将两个 NSInteger 相加得出不正确的结果

> ID：14444620
> 
> 赞同：5
> 
> 时间：2013-01-21T18:03:50.517
> 
> 标签：objective-c

我在求和两个 NSInteger 时遇到问题，我尝试使用简单的 int 但找不到答案。我的头文件中有这个：

```
@interface ViewController : UIViewController {
NSMutableArray *welcomePhotos;
NSInteger *photoCount;        // <- this is the number with the problem
//static int photoCount = 1;
} 
```

在我的实施领域，我有：

```
-(void)viewDidLoad{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    photoCount = 0;
    welcomePhotos = [NSMutableArray array];

    int sum = photoCount + 1;

    NSLog(@"0 + 1 = %i", sum);

} 
```

las NSLog 总是打印**0 + 1 = 4**

另外，如果这样做：

```
if (photoCount < [welcomePhotos count]){
    photoCount++;
    NSLog(@"%i", photoCount);
}else{
    photoCount = 0;
} 
```

几次我得到：**4, 8, 12**。

所以它跳过了四个，但我无法理解为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:08:26.450

您将`photoCount`实例 var声明为*指向*`NSInteger`. 但是 NSInteger 是一个标量类型。
删除 .h 文件中的星号，然后重试。

代替

```
NSInteger *photoCount; 
```

和

```
NSInteger photoCount; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:07:34.523

你用指针指向`NSInteger`...

将其更改为`NSInteger photoCount;`

NSInteger 只是一个 int，您将它视为一个包装器对象。不需要指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T18:07:41.060

您正在打印出一个指针对象，我相信您已将其声明为

```
NSInteger* photocount; 
```

尝试将其更改为

```
int photocount; 
```

在整数上做一个变量++会增加一个指针的大小，在 iOS 上它是 4 个字节。

# opencv - OpenCV 指尖检测

> ID：14444622
> 
> 赞同：0
> 
> 时间：2013-01-21T18:03:58.207
> 
> 标签：opencv

再会。我是 OpenCV 的新手，现在，我正在尝试使用颜色跟踪和背景减法方法进行指尖检测。我得到了颜色跟踪部分的工作，但我不知道如何减去背景并只留下指尖。

这是我的代码。

```
#include <opencv2/opencv.hpp>

#include <stdio.h>
#include <iostream>

using namespace std;

IplImage* GetThresholdedImage(IplImage* img, CvScalar& lowerBound, CvScalar& upperBound)
{
   // Convert the image into an HSV image
   IplImage* imgHSV = cvCreateImage(cvGetSize(img), 8, 3);
  cvCvtColor(img, imgHSV, CV_BGR2HSV);

  IplImage* imgThreshed = cvCreateImage(cvGetSize(img), 8, 1);

   cvInRangeS(imgHSV, lowerBound, upperBound, imgThreshed);

   cvReleaseImage(&imgHSV);
   return imgThreshed;
}

int main()
{
   int lineThickness = 2;

   CvScalar lowerBound = cvScalar(20, 100, 100);
   CvScalar upperBound = cvScalar(30, 255, 255);

   int b,g,r;
   lowerBound = cvScalar(0,58,89);

   upperBound = cvScalar(25,173,229);

   CvCapture* capture = 0;
   capture = cvCaptureFromCAM(1);

   if(!capture)
   {
      printf("Could not initialize capturing...\n");
      return -1;
   }

   cvNamedWindow("video");
   cvNamedWindow("thresh");

   // This image holds the "scribble" data...
   // the tracked positions of the object
   IplImage* imgScribble = NULL;

   while(true)
   {
      IplImage* frame = 0;
      frame = cvQueryFrame(capture);

      if(!frame)
         break;

      // If this is the first frame, we need to initialize it
      if(imgScribble == NULL)
      {
         imgScribble = cvCreateImage(cvGetSize(frame), 8, 3);
      }

      // Holds the thresholded image (tracked color -> white, the rest -> black)
      IplImage* imgThresh = GetThresholdedImage(frame,lowerBound,upperBound);

      // Calculate the moments to estimate the position of the object
      CvMoments *moments = (CvMoments*)malloc(sizeof(CvMoments));
      cvMoments(imgThresh, moments, 1);

      // The actual moment values
      double moment10 = cvGetSpatialMoment(moments, 1, 0);
      double moment01 = cvGetSpatialMoment(moments, 0, 1);
      double area = cvGetCentralMoment(moments, 0, 0);

      // Holding the last and current positions
      static int posX = 0;
      static int posY = 0;

      int lastX = posX;
      int lastY = posY;

      posX = moment10/area;
      posY = moment01/area;

      cout << "position = " << posX << " " <<  posY << endl;

      // We want to draw a line only if its a valid position
      if(lastX>0 && lastY>0 && posX>0 && posY>0)
      {
         // Draw a yellow line from the previous point to the current point
         cvLine(imgScribble, cvPoint(posX, posY), cvPoint(lastX, lastY), upperBound, lineThickness);

      }

      // Add the scribbling image and the frame...
      cvAdd(frame, imgScribble, frame);
      cvShowImage("thresh", imgThresh);
      cvShowImage("video", frame);

      int c = cvWaitKey(10);
      if(c==27)  //ESC key
      {
         break;
      }

      cvReleaseImage(&imgThresh);
      delete moments;
    }

   cvReleaseCapture(&capture);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:51:24.950

我不知道我是否理解你，但我认为你应该需要添加以下内容：

```
 cvErode(imgThreshed, imgThreshed, NULL, 1);
    cvDilate(imgThreshed, imgThreshed, NULL, 1); 
```

在 GetThresholdedImage 中并获得更少的噪音！但毕竟我认为你最好使用 opencv 的 cv::Mat 对象；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T15:46:13.330

试试 BGS 库，我以前用过，很喜欢。你可以在这里得到它：[http ://code.google.com/p/bgslibrary/](http://code.google.com/p/bgslibrary/)

# javascript - AngularJS：在选项卡中通过 Google Maps API v3 进行地图

> ID：14444625
> 
> 赞同：6
> 
> 时间：2013-01-21T18:04:31.190
> 
> 标签：javascript, google-maps, angularjs

我正在尝试创建一个带有标签的页面（使用 AngularJS）。其中一个选项卡中有一张地图（Google Maps API v3）。当地图位于前景选项卡中时，一切似乎都正常。但是，当地图加载到后台选项卡中并且仅在单击选项卡后才可见时，地图会错位/切断，当您尝试使用它进行操作时，它的功能似乎被破坏了。

我已经搜索了解决方案，我发现了这些技巧

```
google.maps.event.trigger(map, 'resize');
map.setCenter(center); 
```

但它不起作用。您能否看看[http://jsfiddle.net/n4q7Y/5/](http://jsfiddle.net/n4q7Y/5/)并告诉我我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T18:51:28.877

`resize`在触发-event之前稍等片刻：http: [**//jsfiddle.net/doktormolle/aAeZw/**](http://jsfiddle.net/doktormolle/aAeZw/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-01T01:53:43.713

谢谢你 Dr.Molle，如果我能改进一点，在我的情况下，一个 $timeout 可以完美地完成工作（因为它会等到 $digest 周期结束）

```
$timeout(function () {
    // in my case
    initializeMap();
    // OR this case:
    google.maps.event.trigger(map, 'resize');                      
}, 1000); // with or without delay 
```

# python - 使用wine从python ctypes调用标准windows .dll的段错误

> ID：14444630
> 
> 赞同：6
> 
> 时间：2013-01-21T18:04:39.723
> 
> 标签：python, linux, segmentation-fault, ctypes, wine

我试图在 Linux 上运行的 Python 脚本中从 Kernel32.dll 调用一些函数。正如 Johannes Weiß 指出[的如何在 Linux 上从 python 调用 Wine dll？](https://stackoverflow.com/questions/4052690/how-to-call-wine-dll-from-python-on-linux/4053954#4053954)我正在通过**ctypes.cdll.LoadLibrary()加载****kernel32.dll.so**库，并且加载正常。我可以看到 kernel32 已加载，甚至内部还有**GetLastError()**函数。但是，每当我尝试调用该函数时，我都会遇到段错误。

 ****```
import ctypes

kernel32 = ctypes.cdll.LoadLibrary('/usr/lib/i386-linux-gnu/wine/kernel32.dll.so')

print kernel32
# <CDLL '/usr/lib/i386-linux-gnu/wine/kernel32.dll.so', handle 8843c10 at b7412e8c>

print kernel32.GetLastError
# <_FuncPtr object at 0xb740b094>

gle = kernel32.GetLastError
# OK

gle_result = gle()
# fails with
# Segmentation fault (core dumped)

print gle_result 
```

首先，我正在考虑调用约定差异，但毕竟它似乎没问题。我以测试没有任何参数的简单函数 GetLastError 函数结束，但无论如何我仍然遇到分段错误。

我的测试系统是 Ubuntu 12.10、Python 2.7.3 和 wine-1.4.1（都是 32 位的）

**UPD**

我继续我的测试并找到了几个可以通过 ctypes 调用而没有段错误的函数。例如我可以命名 Beep() 和 GetCurrentThread() 函数，许多其他函数仍然给我段错误。我创建了一个小型 C 应用程序来测试没有 python 的 kernel32.dll.so 库，但我得到了基本相同的结果。

```
int main(int argc, char **argv) 
{

   void *lib_handle;

   #define LOAD_LIBRARY_AS_DATAFILE            0x00000002

   long (*GetCurrentThread)(void);
   long (*beep)(long,long);
   void (*sleep)(long);   
   long (*LoadLibraryExA)(char*, long, long);

   long x;
   char *error;

   lib_handle = dlopen("/usr/local/lib/wine/kernel32.dll.so", RTLD_LAZY);

   if (!lib_handle) 
   {
      fprintf(stderr, "%s\n", dlerror());
      exit(1);
   }

   // All the functions are loaded e.g. sleep != NULL
   GetCurrentThread = dlsym(lib_handle, "GetCurrentThread");
   beep = dlsym(lib_handle, "Beep");
   LoadLibraryExA = dlsym(lib_handle, "LoadLibraryExA");
   sleep = dlsym(lib_handle, "Sleep");

   if ((error = dlerror()) != NULL)  
   {
      fprintf(stderr, "%s\n", error);
      exit(1);
   }

   // Works
   x = (*GetCurrentThread)();   
   printf("Val x=%d\n",x);

   // Works (no beeping, but no segfault too)
   (*beep)(500,500);    

   // Segfault  
   (*sleep)(5000);      

   // Segfault  
   (*LoadLibraryExA)("/home/ubuntu/test.dll",0,LOAD_LIBRARY_AS_DATAFILE);

   printf("The End\n");
   dlclose(lib_handle);
   return 0;
} 
```

我试图对 Sleep() 函数使用不同的调用约定，但也没有运气。当我比较 Wine 源代码中的函数声明\实现时，它们本质上是相同的

声明

```
 HANDLE WINAPI GetCurrentThread(void) // http://source.winehq.org/source/dlls/kernel32/thread.c#L573
 BOOL WINAPI Beep( DWORD dwFreq, DWORD dwDur ) // http://source.winehq.org/source/dlls/kernel32/console.c#L354
 HMODULE WINAPI DECLSPEC_HOTPATCH LoadLibraryExA(LPCSTR libname, HANDLE hfile, DWORD flags) // http://source.winehq.org/source/dlls/kernel32/module.c#L928
 VOID WINAPI DECLSPEC_HOTPATCH Sleep( DWORD timeout ) // http://source.winehq.org/source/dlls/kernel32/sync.c#L95

 WINAPI is defined to be __stdcall 
```

然而，其中一些有效，而另一些则无效。据我所知，这个来源是用于 kernel32.dll 文件，而 kernel32.dll.so 文件是某种代理，它应该为 linux 代码提供对 kernel32.dll 的访问。可能我需要找到 kernel32.dll.so 文件的确切来源并查看声明。

有什么工具可以用来查看 .so 文件并找出使用了哪些函数和调用约定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T22:47:45.113

检查 DLL 的最简单方法是使用`nm`命令，即

```
$ nm kernel32.dll.so | grep GetLastError
7b86aae0 T _GetLastError 
```

正如其他人指出的那样，Windows C DLL 的默认调用约定是`stdcall`. 它与使用 Python 无关。在 Windows 平台上，`ctypes.windll`可用。

但是，**我什至不确定您要做什么是可能的**。Wine 是一个成熟的 Windows 模拟器，可以肯定的是，至少`wine_init`在加载任何其他功能之前你必须启动它。Windows API 可能有一些状态（在 Windows 启动时设置）。

最简单的继续方法可能是在 Wine 下安装 Windows 版本的 Python 并从那里运行您的脚本。****

# nhibernate - 地图项目列表

> ID：14444631
> 
> 赞同：0
> 
> 时间：2013-01-21T18:04:50.163
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有一张名为 openTickets 的表。我有另一个名为 openTicketFollowers 的表，它使用外键与之相关。OpenTickets 不知道 openTicketFollowers 但我希望 openTickets 有一个属性，它是其关注者的列表。无论如何用流利的nhibernate来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:56:51.280

检查这个[Fluent 映射](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)文档。OpenTicket类将包含*Followers* *：*`IList`

 *```
public class OpenTicket
{
  ...
  public virtual IList<OpenTicketFollower> Followers { get; set; }
}

public class OpenTicketFollowers
{
  public virtual OpenTicket OpenTicket { get; set; }
} 
```

这是`OpenTicketFollower`集合的流畅映射：

```
HasMany(x => x.Followers)
  .KeyColumn("OpenTicketId"); 
```

以及`OpenTicketFollower`引用 OpenTicket 的类映射

```
References(x => x.OpenTicket)
  .Column("OpenTicketId") 
```*

# c++ - C++ 代码中共享文件映射对象的大小问题

> ID：14444635
> 
> 赞同：1
> 
> 时间：2013-01-21T18:05:14.897
> 
> 标签：c++, winapi, memory-management, shared-memory

我正在尝试写入（共享）命名文件映射对象，如下所示：

```
//ENTER CRITICAL SECTION FIRST
int ncbSzMapping = 0x92B8;    //Size of a shared struct

hFileMapping = CreateFileMapping((HANDLE)INVALID_HANDLE_VALUE,
    NULL, PAGE_READWRITE, 
    0, ncbSzMapping, 
    _T("mapping_name"));
if(hFileMapping)
{
    BYTE* pRWData = MapViewOfFile(hFileMapping, 
        FILE_MAP_ALL_ACCESS, 0, 0, ncbSzMapping);
    if(pRWData)
    {
        //Write data into 'pRWData' of 'ncbSzMapping' bytes

        UnmapViewOfFile(pRWData);
    }
}

...
//LEAVE CRITICAL SECTION 
```

上面的代码没有问题。但是当我将上面的代码更改为`ncbSzMapping`成功`0x8A8B8`但后来在代码中我得到一个异常 c00000fd 就在一个对我没有意义的函数调用之前。

知道为什么尺寸增加会产生影响以及如何解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:33:11.613

0xc00000fd 是堆栈溢出。您是否将缓冲区声明为具有该大小的局部变量？如果是这样，那是你的问题。通过将缓冲区设为全局或静态，将缓冲区移出堆栈，或使用 new/delete 动态分配它。

# mysql - 即使连接表为空也显示行？

> ID：14444636
> 
> 赞同：1
> 
> 时间：2013-01-21T18:05:15.327
> 
> 标签：mysql

如果我从另一个表中检索包含关闭时间的场所列表，如下所示：

```
$fullDate = date('Y-m-d H:i:s');

$query="SELECT
venues.ID,
venues.VENUE_NAME,
locations.LOCATION,
hrs.opening_day,
hrs.opening_time,
hrs.closing_time
FROM venues
INNER JOIN venue_types
ON venues.VENUE_TYPE = venue_types.ID
INNER JOIN locations
ON venues.VENUE_LOCATION = locations.ID
INNER JOIN hours_of_operation hrs
  on hrs.venue_id = venues.id
     and ((hrs.opening_day=date_format('$fullDate' - INTERVAL (closing_time<opening_time and time('$fullDate')<closing_time) DAY, '%a')))
GROUP BY venues.VENUE_NAME"; 
```

我得到了我已经指定了特定日期的开放/关闭时间的场所的结果`hours_of_operation`。无论`hours_of_operation`那一天的行是否为空，我将如何显示所有场地？

谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:06:09.160

使用左连接：

```
...
LEFT JOIN hours_of_operation hrs
... 
```

# c++ - std::thread 构造函数中的可移动参数 (Visual C++ 2012)

> ID：14444638
> 
> 赞同：1
> 
> 时间：2013-01-21T18:05:29.390
> 
> 标签：c++, multithreading, rvalue-reference, visual-c++-2012, stdthread

我在 MSVC 2012 中遇到了右值引用的问题。

```
#include <thread>
#include <string>
#include <future>

void foo(std::promise<std::string> &&prms) { /* some code */ }

int main() {
  std::promise<std::string> prms;
  // std::future<std::string> ftr = prms.get_future();
  std::thread th(&foo, std::move(prms));

  // some other code
} 
```

编译器说：*错误 C2664: 'void (std::promise<_Ty> &&)' : 无法将参数 1 从 'std::promise<_Ty>' 转换为 'std::promise<_Ty> &&'*

是否有我的错误（然后如何解决它）或编译器问题（然后我想知道这种行为的起源）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:03:57.757

这是 Visual C++ 2012 实现中的一个已知问题`std::thread`。请参阅 Microsoft Connect 上的以下错误：

> [std::thread 构造函数不处理可移动对象](http://connect.microsoft.com/VisualStudio/feedback/details/729886)

对该错误的响应指出：

> 我们试图在 VC11 的开发过程中解决这个问题，但它发生了可怕的爆炸，我们不得不恢复更改。事实证明， std::thread 不能由 供电`bind()`，因为线程需要移动它的参数，并且`bind()`被禁止这样做（因为绑定的仿函数应该被重复调用，而它们的绑定参数不会被移出）。所以我们需要重新实现`std::thread`ctor 以避免使用`bind()`.

# python - 将 2-d 数组组合成 3-d 数组

> ID：14444640
> 
> 赞同：2
> 
> 时间：2013-01-21T18:05:36.457
> 
> 标签：python, numpy

我正在定义一个返回 3-d 网格的函数。在此期间，我使用了一个已经定义的函数，它返回一个二维数组。我想在迭代期间加入这些 2-d 数组以形成 3-d，但我已经查看了诸如 meshgrid()、dstack()、concatenate() 之类的函数，但似乎无法让它们中的任何一个适合进入代码。

该程序对来自点源的波在 2 维阵列上的传播进行建模，3 维阵列显示介质的位移如何随着波长的变化而变化。

```
def make_wave_snapshot(size,wavelength,phase):
    waves_array = np.zeros((size,size),np.float)
    if size%2==0:
        for y in range(size):
            for x in range(size):
                r = math.hypot((size/2 - x - 0.5),(size/2 - y - 0.5))
                d = np.sin((2*math.pi*r/wavelength)-phase)/np.sqrt(r)
                waves_array[y,x] = d
        dp.display_2d_array(waves_array) #This is in another module altogether
        return waves_array #Displays array showing values
    else:
        return 'Please use integer of size.'

def make_wave_sequence(size,wavelength,nsteps):
    waves_sequence = np.zeros((nsteps,size,size),np.float)
        if nsteps%1==0:
            for z in range(nsteps):
                make_wave_snapshot(size,wavelength,(2*math.pi*z/nsteps))
                waves_sequence = ???
            return waves_sequence #Displays array showing values
        else:
            return 'Please use positive integer for number of steps' 
```

问题是将“wave_array”变成“wave_sequence”。如果您编写任何代码，将不胜感激慷慨的评论。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:32:33.757

如果我理解正确，您有一个三维数组，例如：

```
wave = np.zeros((2, 2, 2), np.float)

([[[0., 0.],
   [0., 0.]],
  [[0., 0.],
   [0., 0.]]]) 
```

你想插入一个二维数组，从你的函数返回，如：

```
([[ 1., 2.],
  [ 3., 4.]]) 
```

这样您的 3D 数组现在是：

```
([[[1., 2.],
   [3., 4.]],
  [[0., 0.],
   [0., 0.]]]) 
```

在`for`循环的第一次迭代之后。如果那是正确的，那么它实际上非常简单，并且您已经完成了大部分工作。只要您选择正确的条目，您就可以将“元素”分配给 2D 数组的 3D 数组：

```
for z in range(nsteps):
    waves_sequence[z] = make_wave_snapshot(size,wavelength,(2*math.pi*z/nsteps)) 
```

# javascript - window.onbeforeunload 带有表单

> ID：14444642
> 
> 赞同：1
> 
> 时间：2013-01-21T18:05:55.013
> 
> 标签：javascript, html

我将尝试正确解释这一点：

我有一个网站，上面有一个巨大的表格。这个表单有很多字段，它们都由另一个 JS 文件运行。

确切地说：在我的表单中，我有文本框和下拉菜单。我希望能够在有人离开后“重置/刷新”我的页面。泡沫底部有一个按钮，可将您从网站带入购物车。

进入购物车后，我希望能够单击后退按钮并将所有字段重置回原始状态。我试着把它放在顶部附近，但它没有效果。也许我把它贴错了地方？：

```
<script type="text/javascript">
window.onbeforeunload = function () {
    }
   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:12:00.747

您可以尝试在`onload`事件中重置表单，这将在首次加载表单时发生，以及当用户使用后退按钮导航回表单时：

```
window.onload = function() {
    var frm = document.form1;   // put form name here
    for (var i = 0; i < frm.elements.length; i++)
        frm.elements[i].value = "";
}; 
```

演示：http: [//jsfiddle.net/bavRd/](http://jsfiddle.net/bavRd/)

# android - 在 Activity 中添加背景使我的视图看起来褪色

> ID：14444643
> 
> 赞同：0
> 
> 时间：2013-01-21T18:05:56.650
> 
> 标签：android, android-layout

我有一个带有 ListView 的 Activity。我想将一张简单的白色图片设置为背景，右下角有一个徽标。我的问题是，当我将图片设置为背景时，它有点“坐在”我的 listView 前面。使 textViews 看起来褪色。我怎样才能有效地添加没有这些副作用的背景？谢谢你的时间。

**编辑：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg">

<dragNDropAdapter.DragNDropListView
  android:id="@+id/android:list"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">

</dragNDropAdapter.DragNDropListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:11:49.130

将 imageview 和 listview 放在相对布局中。为您想要放置它的图像和列表设置属性。

# java - JTextArea append() 方法写入两次？

> ID：14444644
> 
> 赞同：1
> 
> 时间：2013-01-21T18:06:01.597
> 
> 标签：java, swing, jlist, jtextarea

我遇到了一个小问题。
在我的 GUI 中，我在中心有一个文本区域 ( `BorderLayout`)。然后我有一个`JList`关于西方的。

当我单击列表中的歌曲名称成员时，文本区域应显示歌曲的名称、艺术家和价格。我一切正常，但问题是当我点击一个成员时，标题、艺术家和价格会显示两次。

这是“valueChanged()”的代码和相关的部分代码。

```
 public void valueChanged(ListSelectionEvent e)
      {
        Object source = e.getSource();
        int index = songList.getSelectedIndex();
        Song selection = songCollection[index];

        if(source == songList)
        {
            textArea.append(selection.getTitle() + "    " + selection.getArtist() + "   " + selection.getPrice() + "\n" );
        }
      }
    private Song songCollection[] = new Song[5];
    private String songTitle[] = new String[5];

    //Fill song array
    songCollection = getSongs();
    songTitle = getSongTitle();

    //Methods:
     public Song[] getSongs()
    {
    Song[] array = new Song[5];
    array[0] = new Song("Summer", "Mozart", 1.50);
    array[1] = new Song("Winter", "Mozart", 1.25);
    array[2] = new Song("Spring", "Mozart", 2.00);
    array[3] = new Song("Baby", "Justin Bieber", 0.50);
    array[4] = new Song("Firework", "Katy Perry", 1.00);

    return array;
     }

public String[] getSongTitle()
{
    String[] names = new String[5];
    for(int i = 0; i < 5; i++)
        names[i] = songCollection[i].getTitle();

    return names;
} 
```

刚才在我再次摆弄我的程序时，我注意到了一些东西。当我按下列表中的成员时，它仍然像以前一样打印两次。但是，我注意到当我按住鼠标时它会打印一次，当我放开它时它会再次打印。因此，如果我在 1 个成员上按下鼠标，并将光标向上/向下拖动到其他成员，它们会打印一次，但是当我放开鼠标时，它会再打印一次我结束的那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:37:03.283

`JTextArea.append()`正在从您的`ListSelectionListener`.

原因可以在***[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)***中找到：

> 许多列表选择事件可以从单个用户操作（例如鼠标单击）生成。如果用户仍在操作选择，则 getValueIsAdjusting 方法返回 true。这个特定的程序只对用户操作的最终结果感兴趣，因此 valueChanged 方法只有在 getValueIsAdjusting 返回 false 时才会执行某些操作。

您需要检查 中的选择`JList`是否不再被操纵。您可以用检查包围该`append`方法：

```
if (!e.getValueIsAdjusting()) {
   textArea.append(...);
} 
```

# git - git fetch 的常见用例有哪些？

> ID：14444648
> 
> 赞同：3
> 
> 时间：2013-01-21T18:06:17.727
> 
> 标签：git, version-control, fetch

我正在学习 Git，并帮助一些同事快速掌握它。到目前为止，我还没有找到使用`git fetch`. `git pull`与使用甚至`git pull --rebase`明智地相比，它似乎没有太多实用性。

我与一位同事讨论了这个问题，他提出了一些相对狭窄和人为的情况，其中 a`git fetch`将在工作流程中独立使用，但我仍然不太相信（例如更新没有上游设置的分支源，需要在提交之前更新本地存储库而不会发生冲突）。

`git fetch`有没有定期使用的好用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:09:00.503

当它只想知道是否有新的变化时，我会使用它。

另一个用例是`git fetch -t`，如果标签已被移动，这是必要的（恕我直言，这不是一个好主意）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T18:19:04.647

我一直都在使用它，特别是当我想更新本地 repo 的上游 repo 视图的*某些方面*时，而不触及我的工作副本：

1.  只是为了获取标签（比如当其他人添加了发布标签时）
2.  获取我以前没有使用过的新远程分支（也许开始跟踪由其他人创建的功能分支）
3.  只是为了更新`origin/master`而不影响`master`

至于*为什么*我可能会关心`pull`触摸我的工作副本，可能是因为：

1.  我在当前分支上有未提交的更改，我还不想提交
2.  ...并且不想仅仅为此而藏匿它们
3.  我关心当前的 HEAD 或工作树状态（也许我有一个在后台运行的构建，并且不能`pull`更新它下面的源文件）

# cocoa - 可可 MVC 限制

> ID：14444652
> 
> 赞同：0
> 
> 时间：2013-01-21T18:06:41.130
> 
> 标签：cocoa, model-view-controller, design-patterns, cocoa-design-patterns

在 Cocoa MVC 采用中，View 对 Model 一无所知，如下图所示：

![Cocoa MVC 交互图](../Images/e2fdbb13f74ceda0491c00e994d3c8b0.png)

但是考虑这个例子：
我的模型中有**Item**类，我想要它的视觉表示。对我来说最明显的是**ItemView类，它是用****Item**初始化的。
所以，通过这种方式，我违反了 Cocoa MVC 规则并且对此感到不舒服。但是，我也感觉不舒服，也没有像**ItemView**这样的课程。最实用的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:28:23.117

如果你真的关心 MVC，那么在你的控制器中定义一个方法怎么样：

```
- (UIView*)itemViewForItem:(Item*)item; 
```

哪个负责创建和“填充”您的 ItemView？

然后，您的主控制器类将充当您的主视图和所有`ItemViews`您所拥有的控制器。

另一种方法是给每个 ItemView 自己的 ItemViewController。这很好，如果您的控制器/视图有任何复杂性，IMO 也是最好的方法。这样做的缺点是仅在 iOS>5 上支持处理控制器容器。

# postgresql - 查询解密错误

> ID：14444655
> 
> 赞同：0
> 
> 时间：2013-01-21T18:06:47.460
> 
> 标签：postgresql, encryption, encoding, nested-queries

我有一个大型查询可以加密/解密 PostgreSQL 中的一个表。我向这个查询添加了一个新的条件，它现在抛出一个错误。原始查询根据日期和内部连接相关性检索所有记录（来自 tblSessions 的所有满足条件的记录）。

更新后的查询仅从 tblSessions 中检索**parent_session_id**不为空的记录（结果中省略了来自 tblSessions 中具有子记录的任何记录）。

```
tblsessions (only showing fields that pertain to join conditions)

sessionid | decision_id | start_time | end_time | is_comlete | parent_session_id
---------------------------------------------------------------------------------
SERIAL    | BYTEA       | BYTEA      | BYTEA    | BYTEA      | INTEGER DEFAULT 0 
```

在 Posgres 的 SQL 窗口中，运行第二个查询给我以下错误：

**错误：函数解密（整数，“未知”，“未知”）不存在 SQL 状态：42883 提示：没有函数匹配给定的名称和参数类型。您可能需要添加显式类型转换。**

原始查询（作品）：

```
SELECT z.conditionname, x.name AS domainname, d.decisionName,
                            c.firstname AS counselor_first_name, c.lastname AS counselor_last_name,
                            o.name AS organization_name,
                            encode(decrypt(s.start_time, '####salt####', '###encryption mode###'), 'escape') AS start_time,
                            encode(decrypt(s.end_time, '####salt####', '###encryption mode###'), 'escape') AS end_time,
                            encode(decrypt(s.is_complete, '####salt####', '###encryption mode###'), 'escape') AS is_complete,
                            s.parent_session_id

                    FROM tblDecisions d
                        INNER JOIN tblSessions s ON encode(decrypt(s.decision_id, '####salt####', '###encryption mode###'), 'escape') = d.decisionid
                        INNER JOIN tblCounselors c ON encode(decrypt(s.counselor_ck, '####salt####', '###encryption mode###'), 'escape') = c.campuskey
                        INNER JOIN tblCounselor_to_organization co ON co.counselor_id = c.counselorid
                        INNER JOIN tblOrganizations o ON o.organizationid = co.organization_id
                        INNER JOIN tblDomains x ON x.domainid = d.domain_id

                        INNER JOIN tblConditions z ON z.conditionid = x.condition_id
                    AND encode(decrypt(s.start_time, '####salt####', '###encryption mode###'), 'escape') >= '2012-01-01 00:00:00'

                    AND encode(decrypt(s.is_complete, '####salt####', '###encryption mode###'), 'escape') = 'true'

                    ORDER BY encode(decrypt(s.start_time, '####salt####', '###encryption mode###'), 'escape'), encode(decrypt(s.last_name, '####salt####', '###encryption mode###'), 'escape'), encode(decrypt(s.first_name, '####salt####', '###encryption mode###'), 'escape') 
```

修改后的查询（不起作用；在下面添加了评论）

```
 SELECT z.conditionname, x.name AS domainname, d.decisionName,
                                c.firstname AS counselor_first_name, c.lastname AS counselor_last_name,
                                o.name AS organization_name,
                                encode(decrypt(s.start_time, '####salt####', '###encryption mode###'), 'escape') AS start_time,
                                encode(decrypt(s.end_time, '####salt####', '###encryption mode###'), 'escape') AS end_time,
                                encode(decrypt(s.is_complete, '####salt####', '###encryption mode###'), 'escape') AS is_complete,
                                s.parent_session_id

//////// ADDITION START

                                , (SELECT MAX(encode(decrypt(start_time, '####salt####', '###encryption mode###'), 'escape')) AS start_time
                                FROM tblSessions s2
                                    WHERE encode(decrypt(s2.parent_session_id, '####salt####', '###encryption mode###'), 'escape') = encode(decrypt(s.parent_session_id, '####salt####', '###encryption mode###'), 'escape') )

//////// ADDITION END

                        FROM tblDecisions d
                            INNER JOIN tblSessions s ON encode(decrypt(s.decision_id, '####salt####', '###encryption mode###'), 'escape') = d.decisionid
                            INNER JOIN tblCounselors c ON encode(decrypt(s.counselor_ck, '####salt####', '###encryption mode###'), 'escape') = c.campuskey
                            INNER JOIN tblCounselor_to_organization co ON co.counselor_id = c.counselorid
                            INNER JOIN tblOrganizations o ON o.organizationid = co.organization_id
                            INNER JOIN tblDomains x ON x.domainid = d.domain_id
                            INNER JOIN tblConditions z ON z.conditionid = x.condition_id
                        AND encode(decrypt(s.start_time, '####salt####', '###encryption mode###'), 'escape') >= '2012-01-01 00:00:00'

                        AND encode(decrypt(s.is_complete, '####salt####', '###encryption mode###'), 'escape') = 'true'

/////// ADDITION START

                        AND NOT EXISTS (

                          SELECT 1
                          FROM   tblSessions s1
                          WHERE  encode(decrypt(s1.parent_session_id, '####salt####', '###encryption mode###'), 'escape') = encode(decrypt(s.sessionid, '####salt####', '###encryption mode###'), 'escape') )
                        AND (
                                ( encode(decrypt(s.parent_session_id, '####salt####', '###encryption mode###'), 'escape') IS NULL) OR
                                ( encode(decrypt(s.start_time, '####salt####', '###encryption mode###'), 'escape') = (
                                    SELECT MAX(encode(decrypt(start_time, '####salt####', '###encryption mode###'), 'escape')) AS start_time
                                    FROM tblSessions s2
                                    WHERE encode(decrypt(s2.parent_session_id, '####salt####', '###encryption mode###'), 'escape') = encode(decrypt(s.parent_session_id, '####salt####', '###encryption mode###'), 'escape')
                                 )
                             )
                        )

///////// ADDITION END

                        ORDER BY encode(decrypt(s.start_time, '####salt####', '###encryption mode###'), 'escape'), encode(decrypt(s.last_name, '####salt####', '###encryption mode###'), 'escape'), encode(decrypt(s.first_name, '####salt####', '###encryption mode###'), 'escape') 
```

我理解错误消息，但这不可能是实际问题，因为查询的所有添加都已正确解码。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:36:00.490

问题提到了`parent_session_id`类型`INTEGER`，但它在下面的代码段中作为第一个参数传递`decrypt`，与其他似乎只传递`bytea`字段的代码不同。

```
decrypt(s.parent_session_id, '####salt####', '###encryption mode###') 
```

这可能会引发提到的错误，因为没有`decrypt`将整数作为第一个参数的味道（从错误消息中，可以用`\df decrypt`in确认`psql`）

您确定这些会话 ID 已加密吗？

# java - Java Swing - 从结果集中获取字符

> ID：14444656
> 
> 赞同：0
> 
> 时间：2013-01-21T18:07:00.833
> 
> 标签：java, swing, resultset

根据以下代码：

```
char Secgrp = 0;
    try{
        String a = (String) comboName.getSelectedItem();
        String fill = "Select recDate, attendant, grp from log order by id DESC";
        ps = conn.prepareStatement(fill);
        rs = ps.executeQuery();

        String x = cDate();
        while (rs.next()){

            java.sql.Date dDate = rs.getDate("recDate");
            String bName = rs.getString("attendant");
            char[] cbuf = new char[1];
            rs.getCharacterStream("grp").read(cbuf);
            char theValue = cbuf[0];
            String grp = Character.toString(theValue);

            if(x.equals(dDate.toString()) && group1 == theValue && a.equals(bName)){
               Secgrp = theValue++ ;
            } 
          else if(x.equals(dDate.toString()) && theValue > group1 && a.equals(bName))  
            { Secgrp = theValue++;
            }
            else if(x.equals(dDate.toString()) && group1 > theValue && a.equals(bName))           
           { Secgrp = group1;
            } 
```

根据上面的代码，我正在尝试检查 char 是否等于我的结果集记录。例如，如果 A 等于 A，如果 date = date 和 name = name 则比做某事。

但是当我 setText(String.valueOf(Secgrp)) 时，没有插入任何字符。

请建议我如何从结果集中检索一个字符，例如“A”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:33:41.970

解决方案：在每个块之后添加中断

```
 if(x.equals(dDate.toString()) && group1 == theValue && a.equals(bName)){
           Secgrp = theValue++ ;
         Break;
        } 
      else if(x.equals(dDate.toString()) && theValue > group1 && a.equals(bName))  
        { Secgrp = theValue++;
        Break;
        }
        else if(x.equals(dDate.toString()) && group1 > theValue && a.equals(bName))           
       { Secgrp = group1;
         Break;
        } 
```

# java - 在 Java 中使用 ArrayList 时出错

> ID：14444657
> 
> 赞同：2
> 
> 时间：2013-01-21T18:07:17.743
> 
> 标签：java

在将它包含在我的代码中并使用 List 获取字符串然后使用它们之前，我正在解决一个问题。我得到了错误：“类型列表不接受参数列表词=新的ArrayList（）；” 编译后。我搜索了但我使用的语法是正确的，请问代码有什么问题？

```
import java.util.Scanner;
import java.util.ArrayList;

public class List{
    public static void main(String args[]){
        List<String> words = new ArrayList<String>();
        Scanner input = new Scanner(System.in);
        for (int i=0; i < 3; i++)
            words.add(input.nextLine());
        System.out.println(words);
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T18:09:03.017

这是您应该为自己的类使用唯一名称的原因之一。你真的很想使用`java.util.List`，但由于你也给你的班级打电话`List`，所以真正的问题被掩盖了。重命名您的课程并添加导入`java.util.List`以解决问题：

```
import java.util.Scanner;
import java.util.List;
import java.util.ArrayList;

public class MyClass{
    public static void main(String args[]){
        List<String> words = new ArrayList<String>();
        Scanner input = new Scanner(System.in);
        for (int i=0; i < 3; i++)
            words.add(input.nextLine());
        System.out.println(words);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:11:07.243

尝试这个：

```
import java.util.Scanner;
import java.util.ArrayList;

public class List{
    public static void main(String args[]){
        java.util.List<String> words = new ArrayList<String>();
        Scanner input = new Scanner(System.in);
        for (int i=0; i < 3; i++)
            words.add(input.nextLine());
        System.out.println(words);
    }

} 
```

您的课程称为 List。因此，默认情况下，假定您声明的 List 引用您的类。

最好为您的课程避免使用 List 之类的名称。

# javascript - 将 JavaScript 变量传递给 ColdFusion 查询

> ID：14444658
> 
> 赞同：0
> 
> 时间：2013-01-21T18:07:18.747
> 
> 标签：javascript, coldfusion, cfquery

我有一个更新查询，我向其中传递了一个名为“newdata”的 JavaScript 数组，显然这不起作用，所以我不知道如何将我的 JavaScript 变量传递给 ColdFusion 以运行更新查询。我怎么能看到网上冲浪？ColdFusion 无法访问 Javascript 变量。这是我的代码，问候！

```
<cfquery name="updatereserva" datasource="Prueba">
    UPDATE reserva_habitac 
    SET FechaENTRADA = newdata["#firstdate#"]
    WHERE idRESERVA = newdata["idreserva"]                  
</cfquery> 
```

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:57:16.227

有几种方法。

*   您可以将 JavaScript 变量放入表单中，然后将其提交到应用程序中的特定页面。
*   您可以执行一个 AJAX 请求，将您的 JavaScript 数组作为 JSON 发布到应用程序中的所需页面
*   等等。

ColdFusion 有一些对 AJAX 的内置支持，但也有大量的 JS 库和框架可以做同样好的工作（如果不是更好的话）。毕竟，AJAX 请求没有任何 ColdFusion 特定的内容。CF 只是附带一些功能来提供帮助，如果你想使用它。

重要的是，在设计您的应用程序时，您需要记住 JavaScript 和 ColdFusion 在不同的上下文中运行——前者在客户端（浏览器）上，后者在服务器上。虽然这当然不会成为制作一个非常健壮的 JavaScript 前端应用程序（甚至是一个只是到处使用 JavaScript 与 ColdFusion 对话的应用程序）的障碍，但您的设计必须与使用非 JS 的应用程序有所不同应用程序，因此重要的是要弄清楚差异并从那里开始。

# android - 重置 ListView 项内 NumberPicker 的值

> ID：14444659
> 
> 赞同：1
> 
> 时间：2013-01-21T18:07:19.800
> 
> 标签：android, nullpointerexception, android-arrayadapter, numberpicker

我有一个`ListView`活动可以`NumberPicker`查看列表中的每个项目。用户可以使用此选择器添加/删除项目。它正在工作，但是我遇到的问题是，当我恢复`ListView`活动时，当我希望将它们设置为 0 时，这些值仍处于所选值。

有什么办法可以做到这一点吗？到目前为止，我已经在`MenuItemArrayAdapter`课堂上完成了以下操作，我添加了一个方法来重置数字选择器。

```
public class MenuItemArrayAdapter extends ArrayAdapter<MenuItem>{

private List<MenuItem> menuItems;
private List<MenuItem> order;
private static NumberPicker np;
private TextView price;
private double amount = 0.0;
private double total = 0.0;

//Constructor
public MenuItemArrayAdapter(Context context, List<MenuItem> menuItems, TextView price) {
    super(context, R.layout.menuitem_row, menuItems);
    this.menuItems = menuItems;
    this.price = price;
    order = new ArrayList<MenuItem>();

}

public MenuItemArrayAdapter(Context context){
    super(context, R.layout.menuitem_row);
}

//get views
public View getView(final int position, View convertView, ViewGroup parent){
    View v = convertView;

    if(v == null){
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.menuitem_row, null);
        v.setFocusable(true);
    }

    //assign values to view
    final MenuItem item = this.menuItems.get(position);

    TextView nameView = (TextView) v.findViewById(R.id.item_name);
    final TextView priceView = (TextView) v.findViewById(R.id.item_price);

    nameView.setText(item.getName() + " ");
    priceView.setText("€"+ String.valueOf(item.getPrice()));

    //number picker
    np = (NumberPicker)v.findViewById(R.id.numpick);
    np.setMaxValue(20);
    np.setMinValue(0);
    np.setValue(0);
    np.setFocusable(false);
    //calculation occurs when values are changed...
    np.setOnValueChangedListener( new OnValueChangeListener() {
          public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
                Toast.makeText(picker.getContext(), "dish: " + item.getName() + " amount: " + picker.getValue(), Toast.LENGTH_SHORT).show();
                Toast.makeText(picker.getContext(), "new Value: " + newVal + " old Value: " + oldVal, Toast.LENGTH_SHORT).show();

               // amount += item.getPrice() * picker.getValue();

                if(newVal > oldVal){
                    total = (item.getPrice() * newVal) - item.getPrice() * oldVal;
                    //add to order
                    order.add(item);
                    amount += total;
                    Toast.makeText(picker.getContext(), "ADDED TO ORDER: " + item.getName(), Toast.LENGTH_SHORT).show();

                }

                if(newVal < oldVal){
                    total = (item.getPrice() * oldVal) - item.getPrice() * newVal;
                    //remove from order
                    order.remove(item);
                    amount -= total;
                    Toast.makeText(picker.getContext(), "REMOVED FROM ORDER: " + item.getName(), Toast.LENGTH_SHORT).show();

                }

                price.setText("€" + String.valueOf(amount));
            }
          });

    return v;

}

public List<MenuItem> getOrder() {
    return order;
}

public void resetNumberPicker(){
    np.setValue(0);
} 
```

}

然后我在 ListView 活动中调用此方法：

```
 protected void onPostExecute(Boolean result) {

        super.onPostExecute(result);
        if(result){
            pDialog.dismiss();
            adapter = new MenuItemArrayAdapter(StartersActivity.this, starters, price);
            adapter.resetNumberPicker();
            StartersActivity.this.setListAdapter(adapter);              
        }
    } 
```

但我收到此错误：

**致命异常：com.example.waitron5.MenuItemArrayAdapter.resetNumberPicker(MenuItemArrayAdapter.java:104) 处的主要 java.lang.NullPointerException**

这是日志猫：

```
FATAL EXCEPTION: main
01-21 18:04:40.053: E/AndroidRuntime(18291): java.lang.NullPointerException
01-21 18:04:40.053: E/AndroidRuntime(18291):    at com.example.waitron5.MenuItemArrayAdapter.resetNumberPicker(MenuItemArrayAdapter.java:104)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at com.example.waitron5.StartersActivity$HTTPTask.onPostExecute(StartersActivity.java:215)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at com.example.waitron5.StartersActivity$HTTPTask.onPostExecute(StartersActivity.java:1)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at android.os.AsyncTask.finish(AsyncTask.java:631)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at android.os.Looper.loop(Looper.java:137)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at java.lang.reflect.Method.invokeNative(Native Method)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at java.lang.reflect.Method.invoke(Method.java:511)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-21 18:04:40.053: E/AndroidRuntime(18291):    at dalvik.system.NativeStart.main(Native Method) 
```

错误发生在第 104 行：

```
np.setValue(0); 
```

我意识到这可能是因为我没有得到对`NumberPicker`np. 但是我怎样才能修复我的代码，这样它就不会返回 NPE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:46:08.143

您不能（也不应该）`getView()`像以前那样连接到方法中创建的行视图（您也不需要`NumberPicker`适配器中的静态字段）。由于您总是在方法中设置`NumberPicker`to的值，因此您可以尝试简单地调用该方法。`0``getView()``notifyDataSetChanged()``resetNumberPicker()`

# sql - 获取所有带有“今天”日期的寄存器的最佳方法是什么？

> ID：14444661
> 
> 赞同：0
> 
> 时间：2013-01-21T18:07:28.917
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我使用 MS SQL Sever，我只想通过“今天”寄存器过滤我的查询，例如

```
select * from tbl where [FieldDate] >= "Today Date" 
```

我知道我可以使用类似的东西：

```
[FieldDate] >= DATEADD(DAY, 0, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP)) 
```

或者

```
[FieldDate] >= CAST(FLOOR( CAST( GETDATE() AS FLOAT))AS DATETIME) 
```

但是，最好的方法是什么？，非常感谢。

注意：我不能使用“convert(date, getdate())”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:16:10.443

这应该有效：

```
SELECT * 
FROM tbl 
WHERE [FieldDate] >= CONVERT(DATE,GETDATE()) 
AND [FieldDate] < CONVERT(DATE,DATEADD(DAY,1,GETDATE())) 
```

对于 SQL Server 2005：

```
SELECT * 
FROM tbl 
WHERE [FieldDate] >= CONVERT(VARCHAR(8),GETDATE(),112) 
AND [FieldDate] < CONVERT(VARCHAR(8),DATEADD(DAY,1,GETDATE()),112) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:21:00.223

尝试

```
SELECT * 
FROM tbl 
WHERE DATEDIFF(DD, [FieldDate], getdate()) = 0 
```

# php - 以 AZ 作为“链接”的按字母顺序排列的表的索引

> ID：14444669
> 
> 赞同：0
> 
> 时间：2013-01-21T18:07:51.097
> 
> 标签：php, html, sql

我有一个相当复杂的问题，但也许你已经通过阅读我的标题了解了我想要完成的工作，希望如此。

我有一个存储在 SQLite 中的大列表，我正在使用 php 循环将表输出到我的网页中，但仍然存在的问题是如何为每个字母添加索引。

例如，您有一个项目列表，每个项目的范围从 A 一直到 Z

我只想一次显示每个字母，所以如果 A 先出现，那么默认情况下只有 A 应该可见，其余的应该使用带有索引 (A - Z) 的选项卡或链接系统访问

请反馈！

```
$stmt = $db->prepare('SELECT Title, Description, Alternative FROM TblOne;');
$stmt->execute();
$res = $stmt->fetchAll(PDO::FETCH_ASSOC);
echo "<table>";
echo "<thead><tr><th>Title</th><th>Description</th><th>Alternative</th></tr></thead>";
 foreach($res AS $val) {
  echo "<tr>";
  foreach($val AS $val1) {
    echo "<td><a href='.html'>$val1</a></td>";
  }
  echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:03:30.897

如果要获取开始字段的字母，请使用：

```
select distinct left(title, 1)
from tblOne 
```

如果要获取以给定字母开头的列表：

```
SELECT Title, Description, Alternative
FROM TblOne
where left(title, 1) = LETTERYOUWANT 
```

# java - Java记住登录信息

> ID：14444670
> 
> 赞同：0
> 
> 时间：2013-01-21T18:07:51.643
> 
> 标签：java, swing

什么是存储登录信息的安全方式？我有一个 Swing 应用程序，要求用户登录到一个在线帐户，目前正在登录作品，但如果可能的话，我希望能够将用户登录信息存储在他们的计算机上。我想到了几种方法来做到这一点：

1.  将登录信息保存在文件中
2.  将登录信息保存在数据库中

做这个的最好方式是什么？Java是否有内置的东西来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:13:59.653

如果您确实*想*将登录信息存储到用户的计算机上，.. 除了 Daniel Kaplan 提到的之外，一种老式的方法是将其存储在 cookie 中。

另一种方法是存储到[Web SQL](http://www.tutorialspoint.com/html5/html5_web_sql.htm)中，尽管它以 Javascript(HTML5) 为中心并且对它的客户端支持仍然很暗淡。

编辑——因为它是一个摇摆应用程序

另一种*更安全*的方法是使用 MD5 加密密码将其存储在[SQLite中](https://stackoverflow.com/questions/41233/java-and-sqlite)

如果您并不真正关心安全性，请将其存储到 XML 文件或[配置文件](https://stackoverflow.com/questions/8037339/configuration-files-in-java)甚至 CSV 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:20:56.097

由于您的应用程序正在运行，您可以将登录信息保存在一个文件中，但以加密形式。使用数据库没有意义，因为您不想在将部署应用程序的位置安装数据库。

如果您的应用程序已经从用户计算机上的数据库中访问数据，则首选将用户的凭据保存在数据库中，而不是将其保存在文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:19:50.623

如果您的意思是用户名信息 - 将其存储在数据库中没有问题。

如果您的意思是密码，通常它不会在任何地方以纯格式存储。

存储的是它的哈希值（被认为不可能返回密码），由一些（更好 - 旧证明）算法生成。

当有人尝试登录时，系统会获取输入的密码，将其转换为哈希（使用相同的算法）并与数据库中的内容（或其他地方）进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:56:49.700

我决定使用 Preferences API 来存储和检索数据
[http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)

这是最终代码的粗略示例：

```
public class Login extends javax.swing.JDialog{
    // Get saved info and set the textbox text
    public Login(){
        String userName = pref.get("user", "");
        if(!userName.equals("")){
            this.user.setText(userName);
        }
        String passName = pref.get("pass", "");
        if(!passName.equals("")){
            this.pass.setText(passName);
        }
    }

    // Run on login button click
    public void login(){
        String p = new String(pass.getPassword());
        DoLogin log = new DoLogin(user.getText(), p);
        log.execute();
    }

    // Process in background
    public class DoLogin extends SwingWorker{
        public void done(){
            // On successfull login save user data
            pref.put("user", this.strUser);
            pref.put("pass", this.strPass);
        }

        public String doInBackground(){
            // Process login
        }
    }
} 
```

# objective-c - 使用原始数组/指针参数验证 Objective-C 中的方法调用

> ID：14444671
> 
> 赞同：1
> 
> 时间：2013-01-21T18:07:54.557
> 
> 标签：objective-c, unit-testing, mocking, ocmock, ocmockito

我正在测试的课程中有两种方法：

```
- (NSUInteger)sendBuffer:(uint8_t *)buffer length:(NSUInteger)length;
- (BOOL)sendFormattedCommandForAddress:(uint8_t)address 
                              withData:(uint8_t)data 
                        andCommandType:(ZKZSensorCommandType)commandType; 
```

`-sendFormattedCommandForAddress:withData:andCommandType:`构建一个`char`数组并将指向该数组的指针传递给`-sendBuffer:length:`. 此数组的内容因`address`、`data`和而异`commandType`。在我的测试中，我想验证是否构建了正确的数组并将其传递给`-sendBuffer:length:`. OCMock 不会让我对这个`uint8_t *`论点设定期望。OCMockito/OCHamcrest 不会让我使用部分模拟（还）。我尝试`-sendBuffer:length:`使用在我的测试用例类中调用方法的方法来调配该方法，并对该方法调用设置期望。但是，当调用 swizzled 方法时，`self`指向被测类而不是我的测试用例。我可以在我的测试类中保留缓冲区，然后在我的测试中检查这个缓冲区的内容，但我讨厌在生产代码中添加一些东西来支持测试。有没有人对如何测试这种行为有更好的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:03:07.973

你不需要一个模拟框架来制作模拟。我认为挑战在于你实际上不想打电话`-sendBuffer:length:`。*在这种情况下，只需使用 Michael Feathers 的《有效使用遗留代码*》一书中描述的子类和覆盖方法。

不知道您的班级名称，我将其称为发件人。这就是我要写的，直接放入 SenderTest.m：

```
@interface TestingSender : Sender
@property (assign, nonatomic) NSUInteger sendBufferCount;
@property (assign, nonatomic) uint8_t *sendBufferBuffer;
@property (assign, nonatomic) NSUInteger sendBufferLength;
@end

@implementation TestingSender

- (NSUInteger)sendBuffer:(uint8_t *)buffer length:(NSUInteger)length
{
    ++_sendBufferCount;
    _sendBufferBuffer = buffer;
    _sendBufferLength = length;
}

@end 
```

然后测试代码创建一个 TestingSender 而不是一个 Sender。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:01:21.793

虽然这可以说是一个见仁见智的问题，但综合单元测试的好处使得代码复杂性的小幅且包含的增量成为值得的权衡。在您描述的情况下，我认为您向生产类添加缓冲区以便可以在单元测试中检索和断言发送的最后一个字节序列的想法是一种非常好的方法。

我个人可能会添加一个布尔属性来控制是否维护缓冲区，只是为了避免在生产代码中最终发送大消息时任何意外的不必要的内存开销。单元测试设置当然会设置此属性，而应用程序/框架生产代码则不会。同样，关键是使添加的代码如此简单，以至于它显然是正确的。:-)

如果您希望或需要对生产类公开的接口严格严格，您还可以考虑使缓冲区维护代码依赖于条件编译。我个人更喜欢前一种方法，但每个人都有自己的方法。

# c# - 如何使用 ØMQ 的 C# 绑定调用 zmq_close()？

> ID：14444674
> 
> 赞同：1
> 
> 时间：2013-01-21T18:08:17.120
> 
> 标签：c#, .net, zeromq

我有一个使用 ØMQ 的 C# 项目。我想[关闭一个套接字](http://api.zeromq.org/2-2%3azmq-close)，但我不知道如何使用 C# 绑定来做到这一点。可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:01:20.053

我假设您使用[clrzmq](https://github.com/zeromq/clrzmq%20clrzmq) C# 绑定。

您可以通过调用显式关闭套接字`Close`，或者将其包装在 using 语句中，当它超出范围时将为您处理（并关闭）它，如下所示：

```
using (var context = ZmqContext.Create())
{
    using (var socket = context.CreateSocket(SocketType.PUB))
    {                   
        // Do stuff here, just an example:
        socket.Bind(myEndPoint);
        socket.Send("Hello", Encoding.UTF8);
    }   // Socket is Closed and Disposed
}   // Context is Terminated and Disposed 
```

# objective-c - 在 NSString 末尾获取垃圾

> ID：14444677
> 
> 赞同：2
> 
> 时间：2013-01-21T18:08:28.540
> 
> 标签：objective-c, nsstring

我正在尝试将一些字符串传递给 NSString var，但我在字符串末尾收到垃圾。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    mySegue = cell.textLabel.text;
    NSLog(@"%@",mySegue);
    if ([[self category] isEqualToString:@"restaurantes"]) 
        [self performSegueWithIdentifier:@"restaurante" sender:self];
    else if ([[self category] isEqualToString:@"bares"]){
        [self performSegueWithIdentifier:@"bar" sender:self];
    }
    else if ([[self category] isEqualToString:@"cafes"]){
        [self performSegueWithIdentifier:@"cafe" sender:self];
    }
} 
```

NSSlog 输出正确的字符串，但调试区域在字符串末尾显示垃圾。如下图所示。查看 mySegue var 和 nslog 的输出。 [调试 http://i63.photobucket.com/albums/h134/automud/ScreenShot2013-01-21at35430PM.png](http://i63.photobucket.com/albums/h134/automud/ScreenShot2013-01-21at35430PM.png)

cell.textlabel.text 是这样设置的

```
cell.textLabel.text = [restauranteArray objectAtIndex:row]; 
```

restauranteArray 是这样设置的

```
 NSBundle *bundle = [NSBundle mainBundle];
        NSString *plistPath = [bundle pathForResource:@"RestaurantesList" ofType:@"plist"];
        NSDictionary *dictionary = [[NSDictionary alloc] initWithContentsOfFile:plistPath];
        self.restaurante = dictionary;
        self.restauranteArray = [self.restaurante allKeys]; 
```

女巫来自这个plist

[plist http://i63.photobucket.com/albums/h134/automud/ScreenShot2013-01-21at42638PM.png](http://i63.photobucket.com/albums/h134/automud/ScreenShot2013-01-21at42638PM.png)

那么，为什么我会在字符串的末尾得到这个垃圾？

编辑--------------我使用 var 传递给下一个视图控制器

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"restaurante"]){

        PCDetailViewController *detailController = (PCDetailViewController *)segue.destinationViewController;
        detailController.estabelecimento = mySegue;
        detailController.tipo = @"Restaurante";
    }
} 
```

在 viewDidLoad 的下一个视图控制器上，我有这个

```
 self.estabelecimentoArray = [self.estabelecimentoDic objectForKey:estabelecimento]; 
```

当我尝试 objectForKey:estabelecimento 我什么也没得到，因为字符串不匹配

编辑 - - - - - - -

在这里你可以看到输出是 Capitão Grill，但 var 是 Capitão Grill Grill [垃圾 http://i63.photobucket.com/albums/h134/automud/ScreenShot2013-01-21at50213PM.png](http://i63.photobucket.com/albums/h134/automud/ScreenShot2013-01-21at50213PM.png)

# php - 包括 vs 锚定路径

> ID：14444678
> 
> 赞同：0
> 
> 时间：2013-01-21T18:08:30.673
> 
> 标签：php, include

当我包含这样的文件时：`include("/testsitedir/include/subdir/inc.php");` 在文件夹中命名`this.php`的文件上`testsitedir`，我得到了典型的`failed to open stream: No such file or directory in ...\testsitedir\this.php`错误。

但是，当我编写一个简单的 HTML 锚标记时：`<a href="/testsitedir/include/subdir/inc.php">Test Link</a>`（URL 与包含的相同）浏览器会自动为我解析 URL，并知道它`/`表示我的站点根目录。

那么，如何让我的包含以与 HTML 锚标记相同的方式解析 URL？

为了更好地理解，这就是我想要做的。我有一个头文件位于`content`站点根目录中名为的子目录中。我试图弄清楚如何使用相同的 URL 在每个文件中包含标题。我的方法是只使用头文件的绝对 URL。这已成为一个问题的原因是因为我希望能够使用单个`CONSTANT`. 此外，站点的根目录并不总是服务器的根目录。因此，当我想将站点放在服务器上的子目录中时，我会`www.example.com/view/site/siteroot/`定义一个常量并包含任何文件，但包含无法识别`SITE_ROOT``/view/site/siteroot``include(SITE_ROOT."/includes/file.php);``/`正斜杠作为站点根分隔符。`url_include`我打算使用实际的站点名称，但出于安全原因我不想启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:19:01.160

使用`DOCUMENT_ROOT`PHP 中定义的变量：

```
include($_SERVER['DOCUMENT_ROOT'] . "/testsitedir/include/subdir/inc.php"); 
```

从[文档](http://php.net/manual/en/reserved.variables.server.php)中，变量包含：

> 当前脚本在其下执行的文档根目录，如服务器的配置文件中所定义。

# symfony - symfony2 上只有正数

> ID：14444679
> 
> 赞同：1
> 
> 时间：2013-01-21T18:08:32.177
> 
> 标签：symfony, symfony-forms

我有一个表格，我有“卡路里”字段。我只需要接受正数。当我保存时，我添加了单位，然后我无法在模型中设置它。

这个怎么做？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-21T18:20:13.370

创建一个[自定义验证约束](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)并使用以下 PHP 来检查数字是否为偶数：

```
if (filter_var($number, FILTER_VALIDATE_INT)) {
   // its even
} 
```

# eclipse - index.html 没有为我的 WebApp 显示（Eclipse 中的 Tomcat 7）

> ID：14444681
> 
> 赞同：6
> 
> 时间：2013-01-21T18:08:34.233
> 
> 标签：eclipse, tomcat, web.xml

我在 Eclipse 中运行了带有 Servlet 3.0 的 Tomcat 7。

在我的 WEB-INF 文件夹下，我放置了两个文件，web.xml 和 index.html。web.xml 将欢迎文件定义为 index.html 但是当我去

```
http://localhost:8080/WebApp/ 
```

我得到一个404。

奇怪的是我有一个定义为 /login 的 servlet，当我去

```
http://localhost:8080/WebApp/login 
```

我可以查看和使用 servlet（我可以调试它并查看我的 doGet() 请求）

我不知道为什么我看不到欢迎文件，它确实工作了一段时间，但从那以后我做了一些更改，我通过在 Tomcat 启动时设置连接池来更改连接到数据库的方式，但这不应该影响很大。不太确定下一步该往哪里看，catalina.out 没有给出任何提示。

谁能看到为什么我的欢迎文件没有按我的意愿运行？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T18:57:42.430

啊，我最后的评论让我意识到了一些事情。我有点傻。我只是将 index.html 放在错误的位置，它不应该在 WEB-INF 下，而是在 WebContent（WEB-INF 的父目录）下。404 实际上是一个巨大的提示，除了我之外，一切都正常工作！嗬！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:37:09.707

在您的 web.xml 文件中，您应该有这样的内容：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
    <url-pattern>*.jsf</url-pattern>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

这样您就可以将 url 模式映射到 servlet。在此示例中，您访问 index.xhtml、index.jsf 或 .../faces/index

# c# - DBContext 本机 SQL 查询

> ID：14444684
> 
> 赞同：0
> 
> 时间：2013-01-21T18:08:57.760
> 
> 标签：c#, asp.net, sql, entity-framework-5

如何使用本机查询`DBContext`？如果我运行代码，这会给我例外。为什么以及如何在使用时运行本机查询`DBContext`？

```
AcademyEntities context = new AcademyEntities();

            string nativeSQLQuery =
                "SELECT * " +
                "FROM dbo.Employees " +
                "WHERE FirstName='{0}'";

            string name = "Guy";

            var emp = context.Departments.SqlQuery(nativeSQLQuery, name);

            foreach (var item in emp)
            {

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:18:30.103

您正在查询`Employees`表，但试图物化`Department`对象。

将您的呼叫更改为：

```
var emp = context.Employees.SqlQuery(nativeSQLQuery, name); 
```

（并删除周围的引号`{0}`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:18:48.270

您正在查询员工，因此您应该使用 context.Employees：

```
var emp = context.Employees.SqlQuery(nativeSQLQuery, name); 
```

# xamarin.ios - Twitter 反向验证返回 401（使用 MonoTouch TweetStation 代码）

> ID：14444688
> 
> 赞同：1
> 
> 时间：2013-01-21T18:09:03.453
> 
> 标签：xamarin.ios, twitter, twitter-oauth

我正在按照[Twitter](https://dev.twitter.com/docs/ios/using-reverse-auth)关于如何在 iOS 中执行反向身份验证以获取访问令牌的说明进行操作，但我被困在第 1 步。我使用[TweetStation 的 OAuth 代码](https://github.com/migueldeicaza/TweetStation/blob/master/TweetStation/Utilities/OAuthAuthorizer.cs)作为模板。

当前的[AcquireRequestToken()](https://github.com/migueldeicaza/TweetStation/blob/master/TweetStation/Utilities/OAuthAuthorizer.cs#L143)方法工作正常 - 所以我知道创建签名等不是错误。但是，当我像这样添加 reverse_auth 标头时：

```
var headers = new Dictionary<string,string> () {
    { "oauth_callback", OAuth.PercentEncode (config.Callback) },
    { "oauth_consumer_key", config.ConsumerKey },
    { "oauth_nonce", MakeNonce () },
    { "oauth_signature_method", "HMAC-SHA1" },
    { "oauth_timestamp", MakeTimestamp () },
    { "oauth_version", "1.0" },
    { "x_auth_mode", "reverse_auth" }}; 
```

我收到 401 响应。我是否误读了 Twitter 的说明？我还应该做些什么来调整这个初始请求吗？感谢您对此的任何意见，因为我完全被难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:39:35.250

找到了答案 - 标题字典本身从未真正发送过，因此 x_auth_mode 值也不是。解决方案是将其添加到 POST 正文中：

```
var res = wc.UploadString (config.RequestTokenUrl,"POST", "x_auth_mode=reverse_auth"); 
```

现在效果很好。

# c - windowsxp和windows7中的long long int

> ID：14444691
> 
> 赞同：0
> 
> 时间：2013-01-21T18:09:30.193
> 
> 标签：c

我有一个程序，我在里面放了 Q=pow(2.0,32) 当我在一台有 32 位 windows7 系统的计算机上运行这个程序时，它会工作，但是当我把它复制到一台有 64-位系统windowsxp它会给我Q=0 是什么问题？Q 是 long long int

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:47:15.593

你怎么*知道*是`Q`0？

如果您使用类似的东西打印它`printf("%lld\n", Q);`，很可能您遇到了 Microsoft 的 C 运行时库的缺陷。Microsoft 对 C99 的支持很少，而且很可能他们不支持这种`"%lld"`格式（我很惊讶他们的编译器允许`long long int`）。

除了打印 的值之外，尝试与 0*进行比较* ：`Q``Q`

```
printf("Q = %lld\n", Q);
if (Q == 0) {
    puts("Q == 0");
}
else {
    puts("Q != 0");
} 
```

并查阅 Microsoft 的文档以了解他们支持的打印`long long int`值的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:55:50.193

```
 #include<stdio.h>
    #include<stdlib.h>
    #include<math.h>
    #include "highgui.h"
    int main()
    {
    long long int Q;
    Q=pow(2.0,32);
    printf("%lld\n",Q);
    printf("%lld\n",LONG_LONG_MAX); return 0; 
    } 
```

# c++ - 在 C++ 中使用日期和时间

> ID：14444694
> 
> 赞同：0
> 
> 时间：2013-01-21T18:09:33.843
> 
> 标签：c++, date, time

> **可能重复：**
> [C++ 标准日期/时间类](https://stackoverflow.com/questions/1650715/c-standard-date-time-class)

我想知道如何在 c++ 中将日期和时间与适当的数据类型一起使用。是否有任何用于计算日期和时间差等的内置函数。是否有任何支持这种操作的数据类型？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:13:39.873

对于 C++11，看看[Chrono](http://en.cppreference.com/w/cpp/header/chrono)

对于 C++03，同样可以在[Boost.Chrono中找到](http://www.boost.org/doc/libs/1_52_0/doc/html/chrono.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:21:58.823

如果你想使用“普通”c++03 而不添加任何外部库，你也可以关注 C 的 time.h，尽管它不是面向对象的，如果你只需要做简单的事情，它会很方便

# database-design - 如何避免嵌套事务

> ID：14444701
> 
> 赞同：2
> 
> 时间：2013-01-21T18:10:06.370
> 
> 标签：database-design, sqlite, relational-database

我目前正在实现一些依赖于 SQLite 数据库的功能。在这样做的同时，我遇到了一个我没有预料到的限制。这让我想知道我是否以正确的方式解决我的问题。我希望有人可以提出一种考虑要求的不同方法。

**目标**

目标是尽可能快地将大量对象集合存储到数据库中。但是，如果在任何时候确定不应存储这些对象，则该操作不应对数据库产生任何影响。确切的存储查询（“插入”）取决于以前的插入。

**用例**

考虑一个非常大的“实例信息包”集合，每个包代表一些相应抽象实例的部分知识。因此，总集合代表了一个或多个抽象实例的完整知识。每个包裹的信息包括：

1.  一个instance_id；用于唯一标识与此信息相关的抽象实例。
2.  属性图；(attribute_uri, attribute_value)-pairs 其中attribute_uri 唯一标识一个属性，attribute_value 是对应的文本值。

instance_id 和attribute_id 都在表中找到，分别为TBL_INSTANCES 和TBL_ATTRIBUTES。这里使用的数据库模型是 EAV 模型。

插入后，表 TBL_ENTRIES 应包含以下形式的条目：

```
[ entry_id | instance_id | attribute_id | attribute_value ] 
```

**问题**

实现似乎很简单：

1.  设置保存点
2.  开始交易
3.  为 TBL_ENTRIES 中的许多插入准备语句
4.  对于集合中的每个实例：
    *   4.1。在 TBL_INSTANCES 中查找 instance_id。如果不存在，将其添加到 TBL_INSTANCES
    *   4.2\. 对于实例的属性映射中的每个属性：
        *   4.2.1。在 TBL_ATTRIBUTES 中查找 attribute_id。如果不存在，请将其添加到 TBL_ATTRIBUTES。
        *   4.2.2\. 向 TBL_ENTRIES 添加条目
5.  如果在任何时候发生错误，则回滚到保存点，否则提交。

不幸的是，在查找步骤（4.1 和 4.2.1）中，SQLite 报告“无法在事务中启动事务”错误。阅读文档，它似乎在于查找调用 sqlite3_exec 例程的事实，它（除非我弄错了）似乎在内部设置了一个事务。

**问题**

如果不允许嵌套事务，我应该如何执行查找步骤（基本上是“插入或替换”表达式，然后是“选择”查询）？有什么方法可以避免它们或在当前事务中使用 sqlite3_exec 吗？如果不是，我是否以错误的方式处理我的问题？也许我不应该使用单独的整数作为键，例如直接使用attribute_uri 作为键而不是查找相应的attribute_id。

在任何情况下，我仍然需要在事务期间做一些等效的事情，因为真正的速度增益在于准备针对实例集合而不是属性集合的语句：一个实例可能只有一个或两个属性，而实例的数量在实例集合中总是会很大。

我正在使用 C/C++，SQLite 3.7。

非常感谢对我的方法的任何建议或评论！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:19:32.823

来自[BEGIN TRANSACTION 的 SQLite 文档](http://www.sqlite.org/lang_transaction.html)：

> 使用 BEGIN...COMMIT 创建的事务不会嵌套。对于嵌套事务，使用 SAVEPOINT 和 RELEASE 命令

我似乎记得任何 SQLite 3.7.* 都应该已经存在嵌套事务。

# visual-studio-2012 - 如何从 CLR 项目中调用 GDI 函数？

> ID：14444702
> 
> 赞同：0
> 
> 时间：2013-01-21T18:10:08.397
> 
> 标签：visual-studio-2012

我正在使用 Visual Studio Express 2012 桌面。我有一个 CLR C++ 项目。我正在尝试调用基本的 GDI 函数，例如 GetDC 和 DeleteDC。但是，我得到链接器错误：

```
Error   8   error LNK2028: unresolved token (0A000053) 
"extern "C" struct HDC__ * __stdcall GetDC(struct HWND__ *)" 
(?GetDC@@$$J14YGPAUHDC__@@PAUHWND__@@@Z) referenced in function "int 
__cdecl SaveToFile(struct HBITMAP__ *,wchar_t const *)" 
(?SaveToFile@@$$FYAHPAUHBITMAP__@@PB_W@Z)   
c:\Users\XXX\Main.obj   TestProject 
```

我需要将哪些库添加到项目中，以及如何添加？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:35:05.400

在我发布问题后不久，我找到了解决方案。我打开项目属性。然后转到配置属性>链接器>输入。在 Additional Dependencies 中，我添加了一堆库。

kernel32.lib;user32.lib;gdi32.lib;winspool.lib;comdlg32.lib;advapi32.lib;shell32.lib;ole32.lib;oleaut32.lib;uuid.lib;odbc32.lib;odbccp32.lib;%(附加依赖项）

我现在可能不需要所有这些，但将来我可能会。

# javascript - 如何将页面设置为可打印的小格式

> ID：14444704
> 
> 赞同：-1
> 
> 时间：2013-01-21T18:10:22.890
> 
> 标签：javascript, jquery, jquery-ui

在我的网页中，我将在左上角有 3 英寸宽和 4 英寸高数据的内容。我想把它打印到小页面上，比如火车票或公共汽车票。我怎样才能将其转换为小的可打印格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:14:16.303

创建一个单独的打印样式表，如下所示：

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

在此样式表中将文本更改为所需的大小，当用户打印时，它将是该大小。=)

# python - ubuntu 中的 PyGame.error

> ID：14444705
> 
> 赞同：-1
> 
> 时间：2013-01-21T18:10:27.413
> 
> 标签：python, ubuntu, pygame

我在 ubuntu 12.10 中遇到了 pygame 和 python 3 的问题。当我尝试加载图像时，出现此错误：

> pygame.error: 文件不是 Windows BMP 文件

但在 python 2.7 中一切正常。我使用来自[http://inventwithpython.com/chapter19.html的代码](http://inventwithpython.com/chapter19.html)

对不起我的英语不好。

```
import pygame, sys, time, random
from pygame.locals import *
# set up pygame
pygame.init()
mainClock = pygame.time.Clock()
# set up the window
WINDOWWIDTH = 400
WINDOWHEIGHT = 400
windowSurface = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)
pygame.display.set_caption('Sprites and Sound')
# set up the colors
BLACK = (0, 0, 0)
# set up the block data structure
player = pygame.Rect(300, 100, 40, 40)
playerImage = pygame.image.load('player.png')
playerStretchedImage = pygame.transform.scale(playerImage, (40, 40))
foodImage = pygame.image.load('cherry.png')
foods = []
for i in range(20):
    foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - 20), random.randint(0, WINDOWHEIGHT - 20), 20, 20))
foodCounter = 0
NEWFOOD = 40
# set up keyboard variables
moveLeft = False
moveRight = False
moveUp = False
moveDown = False
MOVESPEED = 6
# set up music
pickUpSound = pygame.mixer.Sound('pickup.wav')
pygame.mixer.music.load('background.mid')
pygame.mixer.music.play(-1, 0.0)
musicPlaying = True
# run the game loop
while True:
    # check for the QUIT event
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            # change the keyboard variables
            if event.key == K_LEFT or event.key == ord('a'):
                moveRight = False
                moveLeft = True
            if event.key == K_RIGHT or event.key == ord('d'):
                moveLeft = False
                moveRight = True
            if event.key == K_UP or event.key == ord('w'):
                moveDown = False
                moveUp = True
            if event.key == K_DOWN or event.key == ord('s'):
                moveUp = False
                moveDown = True
        if event.type == KEYUP:
            if event.key == K_ESCAPE:
                pygame.quit()
                sys.exit()
            if event.key == K_LEFT or event.key == ord('a'):
                moveLeft = False
            if event.key == K_RIGHT or event.key == ord('d'):
                moveRight = False
            if event.key == K_UP or event.key == ord('w'):
                moveUp = False
            if event.key == K_DOWN or event.key == ord('s'):
                moveDown = False
            if event.key == ord('x'):
                player.top = random.randint(0, WINDOWHEIGHT - player.height)
                player.left = random.randint(0, WINDOWWIDTH - player.width)
            if event.key == ord('m'):
                if musicPlaying:
                    pygame.mixer.music.stop()
                else:
                    pygame.mixer.music.play(-1, 0.0)
                musicPlaying = not musicPlaying
        if event.type == MOUSEBUTTONUP:
            foods.append(pygame.Rect(event.pos[0] - 10, event.pos[1] - 10, 20, 20))
    foodCounter += 1
    if foodCounter >= NEWFOOD:
        # add new food
        foodCounter = 0
        foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - 20), random.randint(0, WINDOWHEIGHT - 20), 20, 20))
    # draw the black background onto the surface
    windowSurface.fill(BLACK)
    # move the player
    if moveDown and player.bottom < WINDOWHEIGHT:
        player.top += MOVESPEED
    if moveUp and player.top > 0:
        player.top -= MOVESPEED
    if moveLeft and player.left > 0:
        player.left -= MOVESPEED
    if moveRight and player.right < WINDOWWIDTH:
        player.right += MOVESPEED
    # draw the block onto the surface
    windowSurface.blit(playerStretchedImage, player)
    # check if the block has intersected with any food squares.
    for food in foods[:]:
        if player.colliderect(food):
            foods.remove(food)
            player = pygame.Rect(player.left, player.top, player.width + 2, player.height + 2)
            playerStretchedImage = pygame.transform.scale(playerImage, (player.width, player.height))
            if musicPlaying:
                pickUpSound.play()
    # draw the food
    for food in foods:
        windowSurface.blit(foodImage, food)
    # draw the window onto the screen
    pygame.display.update()
    mainClock.tick(40) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:54:23.210

Ubuntu 发布的 repo 专门将 Python 2.7 显示为 PyGame 1.6.1 的依赖项，这是 Ubuntu Released repo 中的当前版本。它可能只是该包支持的唯一 Python 版本。

要自己查看此信息，请尝试`apt-cache depends python-pygame`。

# fullcalendar - FullCalendar - 更改事件（约会、日记条目）高度

> ID：14444711
> 
> 赞同：0
> 
> 时间：2013-01-21T18:10:44.823
> 
> 标签：fullcalendar

我正在尝试更改 FullCalendar 中事件（约会）的高度。

我遵循了这个答案中的建议[如何在 FullCalendar 中编辑事件宽度？](https://stackoverflow.com/questions/3389552/how-to-edit-width-of-event-in-fullcalendar/5777062#5777062)

问题是我不太确定如何设置高度以使其相对于日历大小。

我试过这个：

```
 eventAfterRender: function (event, element, view) {
    $(element).css('height', '100%');
    } 
```

但它实际上显示为一条细条，200% 同上，好像它没有效果一样。

这有效：

```
 eventAfterRender: function (event, element, view) {
    $(element).css('height', '200px');
    } 
```

但它只适用于 1920 x 1080 分辨率。较小的分辨率会导致约会溢出，这是不好的。

任何想法如何将事件的高度设置为与单元格相同？

甚至更好的是单元格的实际可用高度。因为事件仅显示在日期下方。

此日历的用途是用于只有全天事件的应用程序，因此每个单元格只获取一个事件不是问题。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:37:39.437

你可以尝试这样的事情：

```
eventRender: function(event, element, view) {
    var cellheight = $('.fc-widget-content').height();
    $(element).css('height', cellheight);
}, 
```

eventAfterRender 似乎不太适用，但如果你稍微玩一下，你应该得到一些满足你需求的东西

# jquery - 如何将 html 内容恢复为原始值？

> ID：14444716
> 
> 赞同：0
> 
> 时间：2013-01-21T18:10:55.503
> 
> 标签：jquery

用户在 div 中按下一个键后，html 被设置为“”。但是，在用户离开 div 后，我想将 html 设置回原来的值。我怎样才能做到这一点？

到目前为止，我有以下代码：

```
$(document).one('keypress',"#id",function() { 
        $(this).html("");
    }).focusout(function(){
        //do something 
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:13:22.247

使用以下方法将其缓存在元素本身中`.data()`：

```
$(document).one('keypress',"#id",function() { 
    $(this).data('html',$(this).html()).html('');
}).focusout(function(){
    $(this).html($(this).data('html'));
}); 
```

我更喜欢这种方法，因为通过将数据存储在 上`this`，它可以与任何选择器一起使用，包括匹配多个 DOM 元素的选择器。您只需要确保页面上的任何其他代码都没有使用`data()`变量（此处）。`'html'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:14:48.373

怎么样：

```
(function()
{
    var html = null;
    $(document).one('keypress',"#id",function() { 
        html = $(this).html();
        $(this).html("");
    }).focusout(function(){
        //do something 
        $(this).html(html);
    });
})(); 
```

我已经将它包装在一个自我执行的匿名函数中，这样你就可以将`html`变量保持在主范围之外。

或者以更 jQuery 的方式：

```
$(document).one('keypress',"#id",function() { 
    $(this).data('orightml', $(this).html());
    $(this).html("");
}).focusout(function(){
    //do something 
    $(this).html($(this).data('orightml'));
}); 
```

通过这种方式，我们将原始 html 存储在元素上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T18:13:06.043

也许是这样的：

```
var orig;
$(document).one('keypress',"#id",function() { 
        orig = $(this).html();
        $(this).html("");
    }).focusout(function(){
        //do something 
        $(this).html(orig);
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T18:14:01.790

您需要将值存储在一个变量中，以便在焦点消失后恢复它。

```
var divValue;
$(document).one('keypress',"#id",function() { 
    divValue = $(this).html();
    $(this).html("");
}).focusout(function(){
    $(this).html(divValue);
}); 
```

# java - 在java中将单个字符附加到字符串或char数组？

> ID：14444717
> 
> 赞同：58
> 
> 时间：2013-01-21T18:10:58.200
> 
> 标签：java, string, append

是否可以将单个字符附加到`array`java.util `string`. 例子：

```
private static void /*methodName*/ () {            
    String character = "a"
    String otherString = "helen";
    //this is where i need help, i would like to make the otherString become 
    // helena, is there a way to do this?               
} 
```

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-01-21T18:13:10.170

```
1\. String otherString = "helen" + character;

2\. otherString +=  character; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-19T23:22:57.330

您需要先使用静态方法 Character.toString(char c) 将字符转换为字符串。然后你可以使用普通的字符串连接函数。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-13T12:19:34.510

```
new StringBuilder().append(str.charAt(0))
                   .append(str.charAt(10))
                   .append(str.charAt(20))
                   .append(str.charAt(30))
                   .toString(); 
```

这样你就可以得到你想要的任何字符的新字符串。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-15T11:51:50.810

首先，您在这里使用两个字符串： "" 标记一个字符串，它可能是`""`-empty `"s"`- 长度为 1 `"aaa"`的字符串或长度为 3 的字符串，而 '' 标记 chars 。为了能够做到这一点，`String str = "a" + "aaa" + 'a'`您必须使用方法 Character.toString(char c) 正如@Thomas Keene 所说的，所以一个例子是`String str = "a" + "aaa" + Character.toString('a')`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T18:13:53.700

只需像这样添加它们：

```
 String character = "a";
        String otherString = "helen";
        otherString=otherString+character;
        System.out.println(otherString); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-28T17:50:08.703

对于那些正在寻找何时必须将 char 连接到 String 而不是将 String 连接到另一个 String 的人，如下所示。

```
char ch = 'a';
String otherstring = "helen";
// do this
otherstring = otherstring + "" + ch;
System.out.println(otherstring);
// output : helena 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-24T05:18:19.883

```
public class lab {
public static void main(String args[]){
   Scanner input = new Scanner(System.in);
   System.out.println("Enter a string:");
   String s1;
   s1 = input.nextLine();
   int k = s1.length();
   char s2;
   s2=s1.charAt(k-1);
   s1=s2+s1+s2;
   System.out.println("The new string is\n" +s1);
   }
  } 
```

这是您将获得的输出。

* 输入字符串 CAT 新字符串为 TCATT *

它将字符串的最后一个字符打印到第一个和最后一个位置。您可以使用字符串的任何字符来执行此操作。

# ruby - 将id编码为数字和字母？

> ID：14444718
> 
> 赞同：1
> 
> 时间：2013-01-21T18:11:06.297
> 
> 标签：ruby

我想将 id 编码为包含数字和大写字母的唯一字符串，如下所示：

```
40 => A5TY8 
```

但

```
41 => Y7HEG 
```

的输出与's`41`完全不同的地方。`40``A5TY9`

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:24:42.623

我想告诉你所有关于摘要的事情。但看到你的评论我想你想要这样的东西

[https://github.com/namick/obfuscate_id](https://github.com/namick/obfuscate_id)

或者更好更通用

[https://github.com/patdeegan/integer-obfuscator](https://github.com/patdeegan/integer-obfuscator)

您也可以使用可逆的 Base64 对其进行编码

[http://ruby-doc.org/stdlib-1.9.3/libdoc/base64/rdoc/Base64.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/base64/rdoc/Base64.html)

请注意，您可能想要使用`urlsafe_encode64`，因此您不会有 /n 和里面的东西

所以你可以做类似的事情

```
require "base64"

original = 41

converted = Base64.urlsafe_encode64("41")
converted_for_display = converted.tr('^A-Za-z0-9', '')
# => "NDE"

reversed = Base64.urlsafe_decode64(converted) 
```

您还可以加密应该使其唯一且可逆的数字，但速度较慢且更麻烦，但您可以选择您想要的任何密钥

# php - 在 PHP 中序列化为 XML 的 JSON 数组

> ID：14444721
> 
> 赞同：0
> 
> 时间：2013-01-21T18:11:10.337
> 
> 标签：php, xml, json

我有一个如下所示的 JSON 文档：

```
{ 
   "items": [ 'one', 'two', 'three' ]
} 
```

当标准 XML_SERIALIZER 将其序列化为 XML 时，它看起来像这样：

```
<root>
  <items>
   <item>one</item>
   <item>two</item>
   <item>three</item>
  </items>
</root> 
```

我想将其序列化为以下 XML 格式：

```
<root>
  <items>
   <item>
    <value>one<value>
   </item>
   <item>
    <value>two<value>
   </item>
   <item>
    <value>three<value>
   </item>
  </items>
</root> 
```

这里有人可以帮忙吗？

我当前的 XML_SERIALIZER 选项如下所示：

```
XML_SERIALIZER_OPTION_XML_DECL_ENABLED => false,
XML_SERIALIZER_OPTION_MODE => XML_SERIALIZER_MODE_SIMPLEXML,
XML_SERIALIZER_OPTION_INDENT => "    ",
XML_SERIALIZER_OPTION_LINEBREAKS => "\n",
XML_SERIALIZER_OPTION_ROOT_NAME => "root",
XML_SERIALIZER_OPTION_DEFAULT_TAG => "item" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:38:10.813

试试这个：

```
{"items":[{"value":"one"},{"value":"two"}]} 
```

# kineticjs - 是否可以过渡到 Kinetic.Line 的点？

> ID：14444722
> 
> 赞同：1
> 
> 时间：2013-01-21T18:11:11.210
> 
> 标签：kineticjs

这是一个例子：http: [//jsfiddle.net/zQQ6P/11/](http://jsfiddle.net/zQQ6P/11/)

相关部分：

```
line.transitionTo({
    points: [{ x: 100, y: 100}, { x: 200, y: 200 }],
    strokeWidth: 30,
    duration: 1
}); 
```

这似乎不起作用。如果点被注释掉，它会起作用。这是 KineticJS 的限制还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:04:57.373

在 kineticjs 中唯一可以转换的东西是数值，例如，你不能转换颜色，因为它们不是数字的。

同样，points 属性不是数字的，尽管它确实包含数字，但它是一个对象，一个 x,y 值的数组。

在这一点上，你唯一能做的，直到你想要的功能被创建是这样的：http: [//jsfiddle.net/zQQ6P/12/](http://jsfiddle.net/zQQ6P/12/)

Eric Drowell 列出了作为 KineticJS 4.3.2 中可能发布的附加组件的过渡点

但现在你只能使用

```
 line.setPoints(); // see the jsfiddle 
```

# apache - 智能主题 - 从子位置加载图像和 CSS

> ID：14444725
> 
> 赞同：0
> 
> 时间：2013-01-21T18:11:30.717
> 
> 标签：apache, .htaccess, mod-rewrite, themes

我正在为我的项目考虑一个智能主题解决方案。想法是这样的：有一个名为主题的单独文件夹，并在一个名为 global 的文件夹中存放我的图像和样式表。里面会有更多的文件夹，比如说，黑白的。

文件结构（目录标记管道|，文件星号*）：

```
| global
  | css
    * style.css
    * global.css
  | img
    * logo.png
    * background.png
| white
  | css
    * style.css
  | img
    * logo.png
| black
  | css
    * style.css
  | img
    * background.png 
```

现在我想要实现的是静态内容的一种过载。假设选择了一个白色主题。然后对 4 个文件的所有请求将如下所示：

```
./white/css/global.css
./white/css/style.css
./white/img/logo.png
./white/img/background.png 
```

必须有一套规则来提出实际的请求

```
./global/css/global.css
./white/css/style.css
./white/img/logo.png
./global/img/background.png 
```

因为请求的主题中不存在 global.css 和 background.png。

我认为使其尽可能透明的最佳方法是在 htaccess 中定义这些规则。不幸的是，我不是这样的 htaccess 大师，所以我转向了 stackoverflow。我基本上陷入了 if 条件并检查实际请求的文件是否存在。

非常感谢任何帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:09:01.423

所需要的只是将 .htaccess 放入名为主题的文件夹中，并遵循以下规则：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (/.*) global$1 
```

# eclipse-plugin - Egit 已安装（与 Juno 一起提供），但根本不显示

> ID：14444726
> 
> 赞同：13
> 
> 时间：2013-01-21T18:11:32.203
> 
> 标签：eclipse-plugin, egit, eclipse-juno, jgit

我想在 eclipse 中使用 GIT，最好是 EGit，因为它得到了 eclipse 社区本身的支持。然而，尽管 eclipse 声称安装了所需的插件，但它并没有出现在透视图、导入和设置菜单中。

我正在使用适用于 Java EE 的 Eclipse Juno，并确认了以下安装： ![已安装的功能](../Images/6c3fa36c17b38b12faa4f080f1610882.png) 当我更新软件时，没有更多可用的更新。当我访问 Egit 或 JGit 的存储库时，eclipse 告诉我插件已经安装。

Window > Preferences > Team 不包含 Git 项，仅包含 CVS 和 SVN。导入项目不包含 Git 选项。透视窗口不包含 Git repo 选项。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-02-27T14:55:35.283

在 Eclipse Luna 中遇到了同样的问题

查看错误日志，我发现：

```
org.eclipse.egit.ui
Error
Fri Feb 27 15:36:06 CET 2015
FrameworkEvent ERROR

org.osgi.framework.BundleException: Could not resolve module: org.eclipse.egit.ui [844]
Bundle was not resolved because of a uses contraint violation. 
```

`-clean`使用命令行选项启动 eclipse为我解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-11T12:46:43.247

我通过以 root 用户身份运行 Eclipse 并再次安装插件来解决此问题。然后我在我的普通用户帐户下运行 Eclipse，一切都很好 - 一切都出现了。

版本：3.8.1 构建 ID：debbuild

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-28T09:35:44.997

检查 eclipse 的日志文件总是可以帮助您解决这类问题。

我对 Eclipse Luna Service Release 2 (4.4.2) 也有同样的问题，我通过将 EGit 的版本从 4.0.1 降级到 3.7.1 解决了这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-05T05:30:37.323

我也遇到了类似的问题并从中运行 eclipse`CMD -> c:\eclipse\eclipse.exe -clean` 并解决了我的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T10:40:58.950

我曾希望有一个简单的解决方案，所以我不必重新安装 Eclipse，这意味着我必须重新安装插件并再次检查我的所有设置等。不过我必须工作，所以我做了一个干净的安装eclipse（全部清除），给我一份 64 位 Juno for Java EE 的副本，它没有安装 EGit/JGit。从 repo 安装它，它现在可以工作了。

遗憾的是我们无法弄清楚这一点，但编码必须继续！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-03T03:57:56.613

就我而言，JDK 是个问题。我安装了 JDK 1.6.0_27 并将其更改为 jdk1.8.0_111。然后它运作良好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-31T13:06:20.550

我对 Eclipse Mars 2 也有同样的问题。通过从这里安装 EGit 4.0 版来解决这个问题：[http ://wiki.eclipse.org/EGit/FAQ#Where_can_I_find_older_releases_of_EGit.3F](http://wiki.eclipse.org/EGit/FAQ#Where_can_I_find_older_releases_of_EGit.3F)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-23T03:22:21.907

我也遇到了与 Eclise Juno 相同的问题。卸载 Egit 插件并重新安装后，它工作。

# javascript - 根据特定标准从字符串中提取子字符串的有效方法？

> ID：14444727
> 
> 赞同：0
> 
> 时间：2013-01-21T18:11:38.957
> 
> 标签：javascript, string, parsing

我有一个字符串列表，取自许多 CSSRule 的 selectorText，字符串具有一般形式（不确定那个 RegEx）：

```
".selector1 .elementClass[, ]*" 
```

具体例子如下：

```
".point"
".point.lackofclearance .stand_b, .point.lackofclearance .stand_c"
".point .path_a,.point .path,.point .stand"
".blink_on .point.direction_open .stand"
".blink_off .point.a_in_ratc_selection .path_a, .blink_off .point
 .path.a_in_ratc_selection" 
```

现在，在这些字符串中，有趣的是那些包含字符串“ `point`”的字符串，并且在那些包含字符串“ `point`”的字符串中，我对紧跟在“ `.point.`”之后和下一个空格字符之前的子字符串感兴趣。它们代表我想阅读的元素状态。

例如：

从 " `.point`" 没有要提取的子字符串，从 " `.point .path_a,.point .path,.point .stand`" 也没有要提取的子字符串，因为 " `.point.`" 根本不作为一个片段存在。**但是**对于“ `.point.lackofclearance .stand_b, .point.lackofclearance .stand_c`”我想提取“ `lackofclearance`”，当然是第一次和第二次出现。

我脑子里已经有了一个想法，那就是：

*   检查字符串“ `point`”是否存在
*   如果是，则将字符串拆分为 ' `,`'
*   `对于每个生成的子字符串，由 ' ' （空格字符）分割`
`*   对于每个包含“.”的结果子字符串，用“ ”（点字符）`.point`分割`.`*   取最后一个拆分的第二个子字符串`

 `有没有人有其他建议，一种别致的方式，可能更短，或更高效，或两者兼而有之……必须在 JavaScript 中完成，在 Chrome 中，jQuery 可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:27:33.743

```
var str = ".point.lackofclearance .stand_b, .point.lackofclearance .stand_c";
var re = /\.point\.(\w+)/g;
var result = [];
var m;
while (m = re.exec(str)) {
  result.push(m[1]);
}
// result == ['lackofclearance', 'lackofclearance'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:20:49.840

您可以轻松地将[正则表达式](http://www.regular-expressions.info/tutorial.html)用于此类任务。

```
var m = selectorText.match(/\.point.\w+/)
for (var i=0; m!=null && i<m.length; i++)
    console.log(m[i].substring(7)); // remove ".point." part 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T18:24:31.877

正则表达式很棒。您只需查找一个文字`".point."`后跟一个单词`"\w+"`。用 parens 捕捉那个词`(\w+)`。然后调用`match`一个字符串，传入正则表达式，得到返回结果的第二项，也就是捕获的子组词，就是你想要的东西。

```
var whatWeFound = ".point.omgyesawesome .foo".match(/\.point\.(\w+)/)[1];
console.log(whatWeFound); //=> "omgyesawesome" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T18:48:33.233

```
var strings =  "YOUR_CLASS_STRINGS".split(" ");
var regex = /\.point\.(\S+)/;
var arr = [];

for(x in strings){
    if(regex_string = strings[x].match(regex)){ 
        arr.push(regex_string[1]);
    }
} 
```

这应该导致`arr`仅使用类名填充 continue `.point`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T13:07:05.173

根据上面给出的答案，我调整了 RegEx 以满足我的需要，这似乎可以完成这项工作。

```
/\.point\.(.+\s)/ 
```

应用时

```
".point.vacancy_unknown.direction_open .path_a".match(/\.point\.(.+\s)/) 
```

我得到以下结果。

```
[".point.vacancy_unknown.direction_open ", "vacancy_unknown.direction_open "] 
````

# javascript - 动态图像会导致性能问题吗？

> ID：14444729
> 
> 赞同：1
> 
> 时间：2013-01-21T18:11:45.360
> 
> 标签：javascript, html, html5-canvas

我正在用画布创建动态图像。我需要一个带有动态文本的图像，所以在画布的帮助下，我创建了图像（base64）并附加到图像标签上，这很好。但是当创建动态图像的数量时，我会在 chrome中看到`inspectelement -> Resources -> images`。创建的所有动态图像都缓存在浏览器中，这会导致移动设备出现性能或内存问题，或者我可以在使用后将其删除。对此有任何建议。

```
var image = new Image();
image.src = canvas.toDataURL("image/png"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:10:59.303

你应该每次都重复使用相同的画布，

使用画布图像后，擦除画布上的所有绘图

```
var ctx = canvas.getContext("2d");
ctx.clearRect(0,0,canvas.width,canvas.height); 
```

然后再次在画布上绘制并使用它......

# python - 如何使用python和漂亮的汤将一个html页面拆分为多个页面

> ID：14444732
> 
> 赞同：6
> 
> 时间：2013-01-21T18:11:58.240
> 
> 标签：python, html, beautifulsoup

我有一个像这样的简单 html 文件。事实上，我从 wiki 页面中提取了它，删除了一些 html 属性并转换为这个简单的 html 页面。

```
<html>
   <body>
      <h1>draw electronics schematics</h1>
      <h2>first header</h2>
      <p>
         <!-- ..some text images -->
      </p>
      <h3>some header</h3>
      <p>
         <!-- ..some image -->
      </p>
      <p>
         <!-- ..some text -->
      </p>
      <h2>second header</h2>
      <p>
         <!-- ..again some text and images -->
      </p>
   </body>
</html> 
```

我使用 python 和这样的美丽汤阅读了这个 html 文件。

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(open("test.html"))

pages = [] 
```

我想做的是将此html页面分成两部分。第一部分将在第一个标题和第二个标题之间。第二部分将在第二个标题 <h2> 和 </body> 标记之间。然后我想将它们存储在一个列表中，例如。页。所以我可以根据 <h2> 标签从一个 html 页面创建多个页面。

关于我应该如何做到这一点的任何想法？谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:19:02.330

寻找`h2`标签，然后`.next_sibling` 用来抓取所有东西，直到它成为另一个`h2`标签：

```
soup = BeautifulSoup(open("test.html"))
pages = []
h2tags = soup.find_all('h2')

def next_element(elem):
    while elem is not None:
        # Find next element, skip NavigableString objects
        elem = elem.next_sibling
        if hasattr(elem, 'name'):
            return elem

for h2tag in h2tags:
    page = [str(h2tag)]
    elem = next_element(h2tag)
    while elem and elem.name != 'h2':
        page.append(str(elem))
        elem = next_element(elem)
    pages.append('\n'.join(page)) 
```

使用您的示例，这给出了：

```
>>> pages
['<h2>first header</h2>\n<p>\n<!-- ..some text images -->\n</p>\n<h3>some header</h3>\n<p>\n<!-- ..some image -->\n</p>\n<p>\n<!-- ..some text -->\n</p>', '<h2>second header</h2>\n<p>\n<!-- ..again some text and images -->\n</p>']
>>> print pages[0]
<h2>first header</h2>
<p>
<!-- ..some text images -->
</p>
<h3>some header</h3>
<p>
<!-- ..some image -->
</p>
<p>
<!-- ..some text -->
</p> 
```

# java - 整个单词的 Aho-Corasick 文本匹配？

> ID：14444738
> 
> 赞同：4
> 
> 时间：2013-01-21T18:12:26.957
> 
> 标签：java, algorithm, full-text-search, string-matching, aho-corasick

我正在使用 Aho-Corasick 文本匹配，想知道是否可以将其更改为匹配*术语*而不是字符。换句话说，我希望条款成为匹配的基础，而不是字符。举个例子：

搜索查询：“他”，

句子：“你好世界”，

Aho-Corasick 会将“he”匹配到以索引 2 结尾的句子“hello world”，但我宁愿不匹配。所以，我的意思是“术语”单词而不是字符。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T19:13:46.547

一种方法是照常使用 Aho-Corasick，然后执行过滤步骤，消除所有误报。例如，每次找到匹配项时，您可以确认输入中的下一个和前一个字符是非字母字符，如空格或标点符号。这样，您可以获得 Aho-Corasick 查找的速度，但只考虑在文本中显示为整个单词的匹配项。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T20:05:22.783

一种可能性是在您的搜索词中包含空格字符，可能在预处理您的输入以将各种空格（空格、换行、回车、制表符...）转换为相同的空格字符之后。

另一种可能性是将你的字母表中的字符，就 Aho-Corasick 而言，是单词。Aho-Corasick 将与大小为 2^32 的字母表一样快（如果不是更快），其中输入文本中看到的每个单词都被编码为单个字符，就像它与大小为 2^8 的字母表一样，其中一个像往常一样，字符只是一个字节。

无论哪种情况，您都必须决定预处理对标点符号的作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-11T22:47:35.673

如果您使用 onlyWholewords() 方法，则上面的示例应该没有结果。例如：

```
Trie trie = Trie.builder()
             .onlyWholeWords()
             .addKeyword("He")
             .build();
Collection<Emit> emits = trie.parseText("Hello World"); 
```

在这种情况下发出将是空的。

它只会导致整个单词只有“他”。

虽然要注意不是 [az AZ] 的字符。例如，如果您：

```
"He//Is" 
```

它会拿起“He”并忽略“//”

补充两点：

1.  如果要断言单词边界，可以使用：

    onlyWholeWordsWhiteSpaceSeparated() 而不是

    只有WholeWords()

2.  如果您想将某些字符“列入白名单”，此[阅读](https://github.com/RokLenarcic/AhoCorasick)可能会有所帮助：

> 使用的单词字符是由提供的字符修改的默认字符，布尔标志表示字符打开和关闭的位置。当您只想关闭默认字符集中的特定字符时，这很有用。例如：
> 
> 使用的单词字符是由提供的字符修改的默认字符，布尔标志表示字符打开和关闭的位置。当您只想关闭默认字符集中的特定字符时，这很有用。例如：
> 
> 新 WholeWordMatchSet（关键字，真，['_'，'=']，[假，真]）
> 
> 将生成一个集合，其中字母和数字以及 - 和 = 被视为单词字符，而不是 _。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-28T00:40:55.053

聚会很晚，但另一种选择是在 trie 中插入一些表示单词开头和结尾的符号。然后，在匹配阶段，它们必须相应地匹配。我将自己尝试这种方法。

# jquery - 加载不从 HTML 文件加载任何内容

> ID：14444739
> 
> 赞同：1
> 
> 时间：2013-01-21T18:12:28.923
> 
> 标签：jquery, load

我有一个图像（`id="plantilla1"`），这使得一个 html 出现在一个 div（`id="contenidor_plantilla"`）中。所以当我点击图片时`plantilla1.html`可能会加载到 div 中`id="contenidor_plantilla"`。

有什么问题？？它什么也没做！

```
<a href="#" id="plantilla1"><img class="plantilles" src="imatges/plantilles/plantilla1.gif"></a>

<div id="contenidor_plantilla">hola</div> 
```

这是 Jquery 代码：

```
/****************************    TEMPLATE MAKER      ****************/
$(function () {
    $("#plantilla1").click(function () {
        $("#contenidor_plantilla").load('plantilla1.html');
        alert();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:20:57.767

似乎您没有在此脚本之前包含您的 jQuery。在此脚本顶部添加一个 jquery 插件：

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'>
</script>

<script>
    $(function () {
      $("#plantilla1").click(function () {
        $("#contenidor_plantilla").load('plantilla1.html');
        alert();
      });
    });
</script> 
```

按此顺序使用它。*`and debug the path of your file which you are trying to load`.*

# c# - 无法获取 Openssl 签名数据以匹配 .NET 签名数据或 BouncyCastle 签名数据

> ID：14444741
> 
> 赞同：4
> 
> 时间：2013-01-21T18:12:41.743
> 
> 标签：c#, openssl, bouncycastle

上周五我一直在做这件事，但仍然很难过。

当我运行这个命令时：

```
echo -n "Data To Sign" | openssl pkeyutl -sign -inkey path/to/my.pem | openssl base64 
```

通过 openssl 我得到输出：

```
1c284UkFgC6pqyJ+woSU+DiWB4MabWVDVhhUbBrTtF7CkpG8MjY+KkPFsZm9ZNM8vCjZjf...Kw= 
```

我想在 C# 中复制这种行为。我所做的第一次尝试是使用 openssl 从我的 .pem 文件创建一个 .p12 文件。我通过运行以下两个 openssl 命令来做到这一点：

```
openssl req -new -key path/to/my.pem -x509 -batch > my.crt
openssl pkcs12 -export -in my.crt -inkey path/to/my.pem -out my.p12 
```

然后使用`X509Certificate2`and`RSACryptoServiceProvider`类加载 .p12 并签名。下面的代码：

```
var dataToSign = "Data To Sign";
var p12 = new X509Certificate2(@"path\to\my.p12","");
var rsa = (RSACryptoServiceProvider)p12.PrivateKey;
var signedBytes = rsa.SignData(Encoding.UTF8.GetBytes(dataToSign), "SHA1");
var result = Convert.ToBase64String(signedBytes); 
```

产生：

```
B2qM6MTjoZFSbnckezzpXrKFq67vFgsCPYBmaAbKOFmzVQLIU4a+GC6LWTMdNO4...Q0= 
```

不幸的是，输出不匹配。在与这个问题斗争了一段时间之后，我决定走 SO 上的几个答案所建议的 BouncyCastle 路线。这是我使用该库提出的代码：

```
StreamReader sr = new StreamReader(@"path\to\my.pem");
PemReader pr = new PemReader(sr);
var pemKeyParams = (RsaPrivateCrtKeyParameters)pr.ReadObject();
var cypherParams = new RsaKeyParameters(true, pemKeyParams.Modulus, pemKeyParams.Exponent);
ISigner sig = SignerUtilities.GetSigner("SHA1withRSA");
sig.Init(true, cypherParams);
var bytes = Encoding.UTF8.GetBytes("Data To Sign");
sig.BlockUpdate(bytes, 0, bytes.Length);
byte[] signature = sig.GenerateSignature();
var result = Convert.ToBase64String(signature); 
```

这也产生：

```
B2qM6MTjoZFSbnckezzpXrKFq67vFgsCPYBmaAbKOFmzVQLIU4a+GC6LWTMdNO4...Q0= 
```

BouncyCastle 输出与使用 Security 命名空间中的本机库的 C# 代码给出的输出相匹配，但我想匹配 openssl 的输出。我究竟做错了什么？

版本 -
OpenSSL 1.0.1c
.NET 4.0
BouncyCastle 1.7.0
Windows 7

我的.pem -

> -----BEGIN PRIVATE KEY----- MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAOtk3bYdQsjeG1Xy 2KgF8ecWcPudPLEnV32OIbtA+h2hXQ853ZRsxusopm7vmqtI2/aVfc2vyw9AGY0U cjqPnyEq7et5oQydo5+aTEW3PenP9DR3MJ273ipPbrYX+I3XzJ+I6//k6DO/OAIA JLlXc9iT1pblSrHymFNEkIFiUgj3AgMBAAECgYBtP1Lmwo3MS8jECwEieh/a8D9f h4ozbd7dFqnxDicGuW1HM8PyrsljOmqD8hAGjroHpznLzFqhqU4ye9rH8wAWsKUj Qst/RjyDU3SNscyU/eg+ezuawUXafpPUEUTJ0aofdHn9GIVipiIi/4uaPP/IYtuC U2smep4C2+geqfTugQJBAP5MTaRQjoYBGKS/ Bgd0JB16MHFV6FPDCX3NZ2CLTyZm o8edQZI4SbWoxkJaGqBOqDbz/dSmTLfRNmpAmC+az5sCQQDs+CyDLbs3URvD7ajx JjsJoPbuVmqPBPGmAy/4Qt3QVp9AWk+9uckU90DYMqJp5bdGoeokmA65uuEcvqbs yzfVAkEA018FIlE7RjNfEoEdN9DXvBC2d14a0JTLLOAwz1S8I4UpGWCjAjD7Q53X vYs7mogG1jaUg87+8cNaYZLzbI5XhQJANyqbajqGQB2Awj8cum81BUvU0K2LhxoWi5hoXXprmynfTyL3N2r99gSNswcuqkqRPT9KfBRuMSzhZUi5IZ05tQJBAKdQ3mJZ 1Vys2nEAXbQD5/ldi1+VF/0t4Z+JxqFBjqtsAoASBN+kSiPANRl3r175oZ9m9gkd 5YISN0L+WD5Bf4U=-----结束私钥-----

出于这个问题的目的，我生成了一个新的 .pem，上面的密钥不保护任何重要的东西，但我提供它是为了重现我上面的步骤。

到目前为止我考虑过的事情：
* 编码（ASCII vs UTF8）
* Endianess（openssl 的-rev 仍然不匹配任何编码结果）
* hashalg（我找不到任何地方“SHA1”是正式的正确哈希要使用的算法，但它似乎是其他人正在使用的并且尝试其他选项没有帮助）
*换行符（我相信 echo 上的 -n 必须与库相提并论，但删除它没有帮助）
*询问SO（结果待定:-)）

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:22:20.553

我猜 openssl pkeyutl 命令实际上是直接对数据进行签名，而不是对数据摘要进行签名。

pkeyutl 上的 openssl 文档包含以下提示性评论：

> “除非另有说明，否则所有算法都支持摘要：alg 选项，该选项指定用于签名、验证和验证恢复操作的摘要。值 alg 应表示 EVP_get_digestbyname() 函数中使用的摘要名称，例如 sha1。”

我在您的命令行上没有看到摘要选项。此外，来自相同的文档（在 RSA 部分）：

> “在 PKCS#1 填充中，如果未设置消息摘要，则直接对提供的数据进行签名或验证，而不是使用 DigestInfo 结构。如果设置了摘要，则使用 DigestInfo 结构，其长度必须与摘要相对应类型。”

另请参阅 openssl dgst 的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:53:54.560

RSA 签名可以使用不同的填充模式（PKCS#1、PSS 等）。最后一个它使用一些随机盐，所以每次签名都会不同。因此，首先检查openssl每次是否生成相同的值（我没有发现openssl代码使用的默认填充，您可以使用-rsa_padding_mode参数更改它），实际上，如果两个签名都可以被对方正确验证.

# excel - 设置 Borders.ColorIndex 不会改变颜色

> ID：14444742
> 
> 赞同：0
> 
> 时间：2013-01-21T18:12:44.050
> 
> 标签：excel, vba

我正在尝试更改某些单元格中边框的颜色。奇怪的是，我可以在工作簿的某些工作表中更改边框颜色，但在一张工作表上，边框颜色不会改变，或者只有 2 条边框线会改变。我试过使用：

```
testWorksheet.cells(row,column).Borders.ColorIndex=7 
```

当我这样做时，ColorIndex 的值会发生变化，因为我可以使用在即时窗口中显示它的新值

```
?testWorksheet.cells(row,column).Borders.ColorIndex 
```

但是边框的实际颜色并没有改变。这是在脚本的另一部分从另一个工作簿复制的工作表。是否有一些设置会阻止颜色正确显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:22:54.313

尝试

```
 ActiveCell.Borders(xlEdgeLeft).ColorIndex = 7
    ActiveCell.Borders(xlEdgeRight).ColorIndex = 7
    ActiveCell.Borders(xlEdgeTop).ColorIndex = 7
    ActiveCell.Borders(xlEdgeBottom).ColorIndex = 7 
```

# vb.net - 如何在数据透视表上设置列名

> ID：14444744
> 
> 赞同：3
> 
> 时间：2013-01-21T18:12:52.653
> 
> 标签：vb.net, pivot-table, epplus

使用[这个答案](https://stackoverflow.com/questions/9464047/how-to-set-pivot-table-report-layout-to-tabular-in-epplus)，我能够在 EPPlus 中创建一个带有表格布局的数据透视表。

但是列标题显示不正确。当我使用 Excel 创建数据透视表时，我得到列标题“GA 类别”和“容器”： ![Excel 数据透视表](../Images/fdf5baeb869eed7cf72ed682b94cc4f5.png)

当我通过 EPPlus 创建数据透视表时，我得到列标题“行标签”和“列标签” ![EPPlus 的数据透视表](../Images/2629fe4c21ee4798aa2267a8b42f3c78.png)

我想知道如何通过 EPPlus 创建设置列标题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T15:46:43.290

当前包无法通过 EPPLus 设置列标题。为此，我需要在项目中修改 ExcelPivotTable.cs，添加以下代码：

```
public string ColHeaderCaption
{
    get
    {
        return GetXmlNodeString("@colHeaderCaption");
    }
    set
    {
        SetXmlNodeString("@colHeaderCaption");
    }
} 
```

然后可以通过 PivotTable 类设置行和列标题：

```
'Sheet containing the data
Dim dataSheet as ExcelWorksheet
dataSheet = package.Workbook.WorkSheets(0)

'Data used on pivot table - default to entire sheet
Dim dataRange as ExcelRangeBase
dataRange = dataSheet.Cells(dataSheet.Dimension.Address)

'New sheet for the pivot table
Dim sheet as ExcelWorkSheet
sheet = package.Workbook.Worksheets.Add("Pivot")
package.Workbook.Worksheets.MoveToStart(sheet.Name)
sheet.View.TabSelected = true

'Create the pivot table
Dim pivot as Table.PivotTable.ExcelPivotTable
pivot = sheet.PivotTables.Add(sheet.Cells("A1"), dataRange, "PivotTable")

'Add row field
pivot.RowFields.Add(pivot.Fields("RowField"))

'Set row caption
pivot.RowHeaderCaption = "My Row Caption"

'Add column field
pivot.ColumnFields.Add(pivot.Fields("ColumnField"))

'Set column caption
pivot.ColumnHeaderCaption = "My Column Caption" 
```

如果您不能或不想修改 EPPlus，您仍然可以在创建数据透视表后通过修改 XML 将表头添加到数据透视表：

```
pivot.PivotTableXml.DocumentElement.SetAttribute("colHeaderCaption", "My Column Caption"); 
```

# javascript - Error refreshing ListView with jQuery and 'changePage'

> ID：14444749
> 
> 赞同：0
> 
> 时间：2013-01-21T18:13:20.310
> 
> 标签：javascript, jquery, cordova, jquery-mobile

I have this error:

I have Multipage in [jQuery Mobile](http://en.wikipedia.org/wiki/JQuery_Mobile), and I work in the main page, and load data dynamically in the second page (`data-role=page`) into a `<ul data-role="listview">... </ul>`, and then this page is shown perfectly. Here in the second page, when I want to change to the main page and return and do the same, the list `<ul ...>` isn't refreshed. The first one works, but the second, when I return again, isn't refreshed.

The code is:

```
<div data-role="page" id="uno">

  <a href="#" onClick="LoadDataInto_MyUL_ListL();$.mobile.changePage('#dos');">

</div>

<div data-role="page" id="dos">
  <a href="#" onclick="$.mobile.changePage('#uno');" >Return</a>

  <ul data-role="listview" id="MyUL_List">
  </ul>

</div> 
```

Inside `LoadDataInto_MyUL_ListL();`, I have `$('#MyUL_List').html("<li>...</li>")`, and firstly I had too `$('#MyUL_List').listview('refresh')`, but I had this error:

> Uncaught Error: cannot call methods on listview prior to initialization; attempted to call method 'refresh'

and I remove refresh, but without this error, listview doesn't refresh.

How do I fix this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:14:57.683

Sometimes you need to initialize a jQuery Mobile widget before using it.

It can be initialized like this:

```
$('#MyUL_List').listview().listview('refresh'); 
```

The same thing stands for other jQuery Mobile elements.

# pdf - 如何显示 PDF 的隐藏内容？

> ID：14444751
> 
> 赞同：0
> 
> 时间：2013-01-21T18:13:31.823
> 
> 标签：pdf, pdf-generation

我正在我的 Mac 上填写一些 pdf 表格，它在我的机器上显示一切正常。但是当我通过电子邮件将其发送给其他人时，他们需要单击该字段以查看其中的内容。

为什么会这样？我怎样才能让它不隐藏？

# github - SublimeText2 的 Github 语法高亮主题？

> ID：14444761
> 
> 赞同：0
> 
> 时间：2013-01-21T18:14:03.183
> 
> 标签：github, sublimetext2, color-scheme

有没有看起来像 Github pygments 配色方案的 ST2 颜色主题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:23:32.993

[sbecker 的GitHub TextMate 主题](https://github.com/sbecker/github_textmate_theme)（与 Sublime Text 2 兼容）是我能找到的最接近的匹配项。

[来源](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=3721)

# jquery - 提交前将表格数据转换为可视形式

> ID：14444766
> 
> 赞同：0
> 
> 时间：2013-01-21T18:14:17.410
> 
> 标签：jquery

我不确定调用的确切方法，所以我在下面留下一张图片，以便更好地描述我的要求。

我正在寻找这种方法的 jquery/php 解决方案。我想在表中选择一行，并能够将项目数添加到可视表单中，直到数字达到 0，或者将它们添加回表中。然后我想获取可视化表单数据并将其提交到 php 文件。有人知道为此使用的正确 jquery 插件吗？ ![表格数据可视化](../Images/6e6bb49f425556b70a07853df76c0f96.png)

# python - Flask：如果路径是目录或文件，则处理所有不同的 url

> ID：14444769
> 
> 赞同：2
> 
> 时间：2013-01-21T18:14:39.293
> 
> 标签：python, routing, flask

如何制作一条只处理目录和一个处理文件的全部路由？

下面是一个简单的例子

```
from flask import Flask
app = Flask(__name__)

@app.route('/foo')
def foo_file():
    return 'Queried: foo file'

@app.route('/foo/')
def foo_dir():
    return 'Queried:  foo dir'

@app.route('/<path:path>')
def file(path):
    return 'Queried file: {0}'.format(path)

@app.route('/')
@app.route('/<path:path>/')
def folder(path):
    return 'Queried folder: {0}'.format(path)

if __name__ == '__main__':
    app.run() 
```

当我访问`http:\\127.0.0.1:5000\foo`它时调用它`foo_file()`并为`http:\\127.0.0.1:5000\foo\`它调用`foo_dir()`. 但是查询`http:\\127.0.0.1:5000\bar`和`http:\\127.0.0.1:5000\bar\`都调用 `file()`. 我该如何改变呢？

我知道我可以手动检查斜杠并重新路由，我只是想知道是否还有其他方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T21:10:34.007

你可以这样做...

```
@app.route('/<path:path>')
def catch_all(path):
    if path.endswith('/'):
        return handle_folder(path)
    else:
        return handle_file(path) 
```

# c# - 不稳定的怪异

> ID：14444773
> 
> 赞同：10
> 
> 时间：2013-01-21T18:15:03.680
> 
> 标签：c#, multithreading

我想大多数人都知道在发布模式下构建时会发生以下问题（代码取自[C# 中的线程](http://www.albahari.com/threading/part4.aspx)）：

```
static void Main()
{
  bool complete = false; 

  var t = new Thread (() =>
  {
    bool toggle = false;
    while (!complete) toggle = !toggle;
  });

  t.Start();
  Thread.Sleep (1000);

  complete = true;
  t.Join();        // Blocks indefinitely
} 
```

由于编译器优化缓存的值，`complete`从而防止子线程看到更新的值。

但是，稍微更改一下上面的代码：

```
class Wrapper
{
    public bool Complete { get; set; }
}

class Test
{
    Wrapper wrapper = new Wrapper();

    static void Main()
    {
        var test = new Test();
        var t = new Thread(() =>
        {
            bool toggle = false;
            while (!test.wrapper.Complete) toggle = !toggle;
        });

        t.Start();
        Thread.Sleep(1000);

        test.wrapper.Complete = true;
        t.Join();        // Blocks indefinitely
    }
} 
```

使问题消失（即子线程能够在 1 秒后退出），而无需使用`volatile`、内存栅栏或任何其他引入隐式栅栏的机制。

完成标志的附加封装如何影响其在线程之间的可见性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:41:57.510

我想你的问题有答案：

> 由于*编译器优化*缓存了 complete 的值，从而阻止了子线程看到更新的值。

编译器/JIT 优化只要有意义/被认为是安全和合理的实施，就会执行。因此，您发现优化没有按照您期望的方式执行的情况 - 可能有充分的理由（有人检测到这种使用模式和块优化）或者它恰好没有被优化（很可能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:56:41.510

第一种情况是对局部变量的简单别名传播。编译器非常积极地这样做（[http://en.m.wikipedia.org/wiki/Aliasing_(computing)](http://en.m.wikipedia.org/wiki/Aliasing_%28computing%29)）第二种情况，即使由于属性与成员变量的语法相似性而看起来相同，也有方法调用（getter /setter) 并且不能简单地简化。

# events - Ti.Platform.openUrl 或 Ti.App.fireEvent 的回调或完成事件

> ID：14444774
> 
> 赞同：0
> 
> 时间：2013-01-21T18:15:05.537
> 
> 标签：events, callback, titanium

有谁知道如何准确找出 Ti.Platform.openUrl 或 Ti.App.fireEvent 何时结束？诸如回调或完成事件之类的东西？谢谢。

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:33:31.827

应用级事件**对您的应用来说是全局的**。它们可以在所有上下文、功能范围、CommonJS 模块等中访问。您可以通过 Ti.App 模块触发它们并监听它们，如下所示。

```
//Creating an app level custom event
Ti.App.addEventListener('myAppEvent', myCallBack);

//Fire the event like
Ti.App.fireEvent('myAppEvent');

//Callback function of your custom event
function myCallBack(e){
    alert("In call back. App level event get fired!!!");
} 
```

有关详细信息，请参阅Titanium 中的[事件处理](https://wiki.appcelerator.org/display/guides/Event+Handling#EventHandling)

# android - Android NDK Native 方法未找到错误

> ID：14444776
> 
> 赞同：15
> 
> 时间：2013-01-21T18:15:11.110
> 
> 标签：android, android-ndk

我正在尝试使用本机代码构建 android 应用程序，所以我想测试 ndk 是否成功运行。当我尝试运行我的第一个 hello world 项目时，日志猫说，

```
01-21 23:30:06.780: E/AndroidRuntime(939): FATAL EXCEPTION: main
01-21 23:30:06.780: E/AndroidRuntime(939): java.lang.UnsatisfiedLinkError: 
Native method not found: com.example.ndktesting.MainActivity.invokeNativeFunction:()Ljava/lang/String; 
```

我检查了一些 stackoverflow 答案，但找不到我的答案。这是我的 java 代码，我使用的是 android ndk r8d 版本。

```
//ndktest.c

#include <string.h>
#include <jni.h>

extern "C"{
    JNIEXPORT jstring JNICALL   Java_com_example_ndktesting_ndktest_MainActivity_invokeNativeFunction(JNIEnv* env, jobject  thiz)
};

JNIEXPORT jstring JNICALL   Java_com_example_ndktesting_ndktest_MainActivity_invokeNativeFunction(JNIEnv* env, jobject  thiz){
    return (*env)->NewStringUTF(env, "Hello from native code!");
} 
```

这是我的 MainActivity java 代码：

```
package com.example.ndktesting;

public class MainActivity extends Activity {    
    //declare the native code function - must match ndktest.c
    private native String invokeNativeFunction();

    public native String  unimplementedinvokeNativeFunction();

    // load the library - name matches jni/Android.mk 
    static {
        System.loadLibrary("ndktest");
    }

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // this is where we call the native code
        String hello = invokeNativeFunction();

        new AlertDialog.Builder(this).setMessage(hello).show();
    }
} 
```

Android制作文件代码：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

# Here we give our module name and source file(s)
LOCAL_MODULE    := ndktest
LOCAL_SRC_FILES := ndktest.c

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-21T18:29:11.200

您的包/类名称不匹配。

```
JNIEXPORT jstring JNICALL   Java_com_example_ndktesting_ndktest_MainActivity_invokeNativeFunction(JNIEnv* env, jobject  thiz) 
```

将是类中的一个方法

```
com.example.ndktesting.ndktest.MainActivity 
```

但是您的实际代码

```
package com.example.ndktesting;

public class MainActivity extends Activity 
```

导致它寻找

```
com.example.ndktesting.MainActivity.invokeNativeFunction 
```

没有“ndktest”

一旦你使名称匹配，它应该可以工作，或者暴露下一个问题。

# blackberry-10 - 在blackberry10级联qml中启用键盘时隐藏文本字段

> ID：14444779
> 
> 赞同：2
> 
> 时间：2013-01-21T18:15:26.973
> 
> 标签：blackberry-10, blackberry-cascades

我在 qml 布局中有一个 TextField，同时启用键盘，第一个 TextField 正在显示并且所有 TextField 都隐藏在下面。我该如何解决这个问题？![文本字段隐藏](../Images/bbc29749034be91c025070a16c3dee58.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T06:16:14.027

这是解决方案

`ScrollView { scrollViewProperties { scrollMode: ScrollMode.Vertical } }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:36:24.243

在 ScrollView 中添加所有视图。然后，您将能够向上滚动到无法访问的项目。

# css - 我无法为主要区域设置填充权

> ID：14444783
> 
> 赞同：0
> 
> 时间：2013-01-21T18:15:59.670
> 
> 标签：css, html, margin, padding

[如果您在此处](http://goo.gl/bm85n)使用浏览器放大，您会注意到只有一个 padding-left，右边空白处没有任何内容（因此 div “触摸”了屏幕的末端）。我似乎无法解决这个问题。我尝试将 padding-right:2em 应用于两个身体 #page.. 没有任何运气！

你有解决方案吗..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:37:40.507

您可能需要添加一个额外的容器块来保存您的页面内容。你可以尝试这样的事情：

```
<div id="layout">
    <div id="page">
        <!-- Your page content here -->
    </div>
</div> 
```

构建新结构后，生成的#layout div 应该有 body 元素的 padding 和一些 #page 样式：

```
#layout {
    min-width: 1000px;
    margin: 0 auto;
    padding: 2em;
} 
```

如果您不想更改当前的 HTML 结构，您还可以尝试一个“肮脏”的技巧：在 '#page' div 中添加灰色边框：

```
#page { 
    border: 2em solid #e2e2e2; 
} 
```

但是当你使用这样的东西时要小心，因为可能会有不需要的副作用。

最后一点，您可能希望将主 CSS 文件移到其余样式表之后。否则，您的某些样式最终会被后续文件覆盖。

# c# - 每个网格行的不同组合框项目

> ID：14444787
> 
> 赞同：0
> 
> 时间：2013-01-21T18:16:20.320
> 
> 标签：c#, winforms, combobox, devexpress, xtragrid

我已经成功创建了一个带有父行的网格，可以将其扩展为子行。我想在子行的列中有一个组合框，该组合框根据父行中的值具有不同的项目。如何为每个子行以不同方式填充组合框？

我需要的是一种在子行中同时获取父行的方法。我似乎找不到可以从另一个访问的事件或属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:05:21.163

几个小时后，我发现[了这个](http://documentation.devexpress.com/#WindowsForms/CustomDocument747 "将编辑器分配给单个单元格")。我`CustomRowCellEdit`在我的`GridView`活动中使用了

```
 myGridView.CustomRowCellEdit += new CustomRowCellEditEventHandler(myGridView_CustomRowCellEdit); 
```

这会给你行

```
void myGridView_CustomRowCellEdit(object sender, CustomRowCellEditEventArgs e)
{
  myRowType myRow = (sender as GridView).GetRow(e.RowHandle) as myRowType; 
```

你可以像这样制作一个新的编辑器

```
 RepositoryItemComboBox editor = new RepositoryItemComboBox();
  editor.Items.AddRange(myRow.AllowedValues);
  e.RepositoryItem = editor; 
```

尝试修改现有编辑器（`combobox`或其他）将不起作用。

# php - PHP中foreach循环的顺序是什么？

> ID：14444792
> 
> 赞同：1
> 
> 时间：2013-01-21T18:17:13.030
> 
> 标签：php, arrays, sorting, loops, foreach

例如，我有一个数组

```
$arr=array(
    "foo" => "fooval",
    "boo" => "booval",
    "roo" => "rooval",
); 
```

然后我想打印模式“键是值”中的所有元素。这段代码应该可以完成这项工作：

```
foreach($arr as $key => $val)
    echo $key." is ".$val; 
```

我会得到这个吗？

```
foo is fooval
boo is booval
roo is rooval 
```

我是说顺序。是否保证它将以与给定数组相同的顺序执行，或者数组以某种方式排序？

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T18:18:23.327

它将按顺序循环遍历数组。因此，在您的具体问题中，您会看到您期望的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T18:20:36.630

`arrays`是有序的值列表，它们的顺序不需要排序。它遵循一个序列

来自 PHP 文档

> PHP 中的数组实际上是一个**有序映射。**映射是将值与键相关联的类型。这种类型针对几种不同的用途进行了优化；它可以被视为数组、列表（向量）、哈希表（映射的实现）、字典、集合、堆栈、队列等等。由于数组值可以是其他数组，因此树和多维数组也是可能的。

# xml - 我需要帮助优化 XSL，它会根据项目数量改变内容输出

> ID：14444796
> 
> 赞同：0
> 
> 时间：2013-01-21T18:17:28.570
> 
> 标签：xml, xslt

我对 XSL 还很陌生，正在寻找优化我的代码。如果项目数为 3 或超过 3，我需要做的是改变我的 XSL 的输出。如果有 3 个项目，每个项目`<div/>`应该只有 1 个`<a/>` 元素。如果有 6 个，`<div/>`则应包含 2 个`<a/>`元素。我下面的代码有效，但我知道必须有更好的方法。

如果 3 个项目看起来像这样

```
<div>
   <div>
      <a href="/link1.html">
         <div>
            <h1>Header 1</h1>
            <p>Body coy 1</p>
         </div>
      </a>
   </div>
   <div>
      <a href="/link2.html">
         <div>
            <h1>Header 2</h1>
            <p>Body coy 2</p>
         </div>
      </a>
   </div>
   <div>
      <a href="/link3.html">
         <div>
            <h1>Header 3</h1>
            <p>Body coy 3</p>
         </div>
      </a>
   </div>
</div> 
```

如果有 6 个项目，它应该是这样的：

```
<div>
   <div>
      <a href="/link1.html">
         <div>
            <h1>Header 1</h1>
            <p>Body coy 1</p>
         </div>
      </a>
      <a href="/link2.html">
         <div>
            <h1>Header 2</h1>
            <p>Body coy 2</p>
         </div>
      </a>
   </div>
   <div>
      <a href="/link3.html">
         <div>
            <h1>Header 3</h1>
            <p>Body coy 3</p>
         </div>
      </a>
      <a href="/link4.html">
         <div>
            <h1>Header 4</h1>
            <p>Body coy 4</p>
         </div>
      </a>
   </div>
   <div>
      <a href="/link5.html">
         <div>
            <h1>Header 5</h1>
            <p>Body coy 5</p>
         </div>
      </a>
      <a href="/link6.html">
         <div>
            <h1>Header 6</h1>
            <p>Body coy 6</p>
         </div>
      </a>
   </div>
</div> 
```

XML（6 项）：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <article>
        <header>Header 1</header>
        <body>Body coy 1</body>
        <url><a href="/link1.html" title="Link1">Link 1</a></url>
    </article>
    <article>
        <header>Header 2</header>
        <body>Body coy 2</body>
        <url><a href="/link2.html" title="Link2">Link 2</a></url>
    </article>
    <article>
        <header>Header 3</header>
        <body>Body coy 3</body>
        <url><a href="/link3.html" title="Link1">Link 3</a></url>
    </article>
    <article>
        <header>Header 4</header>
        <body>Body coy 4</body>
        <url><a href="/link4.html" title="Link4">Link 4</a></url>
    </article>
    <article>
        <header>Header 5</header>
        <body>Body coy 5</body>
        <url><a href="/link5.html" title="Link1">Link 5</a></url>
    </article>
    <article>
        <header>Header 6</header>
        <body>Body coy 6</body>
        <url><a href="/link6.html" title="Link1">Link 6</a></url>
    </article>
</root> 
```

XML（3 项）：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <article>
        <header>Header 1</header>
        <body>Body coy 1</body>
        <url><a href="/link1.html" title="Link1">Link 1</a></url>
    </article>
    <article>
        <header>Header 2</header>
        <body>Body coy 2</body>
        <url><a href="/link2.html" title="Link2">Link 2</a></url>
    </article>
    <article>
        <header>Header 3</header>
        <body>Body coy 3</body>
        <url><a href="/link3.html" title="Link1">Link 3</a></url>
    </article>
</root> 
```

XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <!--  the number of items to include in each group -->

    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/root">
        <div>
            <xsl:variable name="articleCount" select="count(article)"/>
            <xsl:variable name="group" select="$articleCount div 3" />

            <xsl:choose>
                <xsl:when test="$articleCount = 3">

                    <xsl:for-each select="article">
                        <div>
                            <xsl:call-template name="articleItem">
                                <xsl:with-param name="item" select="."/>
                            </xsl:call-template>
                        </div>
                    </xsl:for-each>

                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates
                        select="article[position() mod 2 = 1]" >
                        <xsl:with-param name="group" select="2"/>
                    </xsl:apply-templates>
                </xsl:otherwise>
            </xsl:choose>
        </div>
    </xsl:template>

    <xsl:template match="article" mode="inner">
        <xsl:param name="group"/>
        <!-- handle items appropriately here -->

        <xsl:call-template name="articleItem">
            <xsl:with-param name="item" select="."/>
        </xsl:call-template>
    </xsl:template>

    <xsl:template match="article">
        <xsl:param name="group"/>
        <div class="article">
            <xsl:apply-templates
                select=".|following-sibling::article[$group &gt; position()]" 
                mode="inner" />
        </div>
    </xsl:template>

    <xsl:template name="articleItem">
        <xsl:param name="item"/>
        <a>
            <xsl:attribute name="href"><xsl:value-of select="url/a/@href" /></xsl:attribute>
            <xsl:call-template name="articleContent">
                <xsl:with-param name="item" select="."/>
            </xsl:call-template>
        </a>
    </xsl:template>

    <xsl:template name="articleContent">
        <xsl:param name="item"/>
        <div class="article-copy">
            <h1><xsl:value-of disable-output-escaping="yes" select="header" /></h1>
            <p><xsl:value-of disable-output-escaping="yes" select="body" /></p>
        </div>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:02:52.080

这看起来很有效。你能试一试吗？

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <!--  the number of items to include in each group -->

  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/root">
    <div>
      <xsl:variable name="sideBySide" select="count(article) > 3" />

      <!-- If not($sideBySide), loop through the articles 1 at a time
           If $sideBySide, loop through articles in odd-numbered positions -->
      <xsl:for-each select="article[(position() - 1) mod (1 + $sideBySide) = 0]">
        <xsl:call-template name="articleRow">
          <!-- Pass the current article, AND its first sibling if $sideBySide -->
          <xsl:with-param name="articles" select=". | following-sibling::article[1][$sideBySide]" />
        </xsl:call-template>
      </xsl:for-each>
    </div>
  </xsl:template>

  <xsl:template name="articleRow">
    <xsl:param name="articles" />
    <div>
      <xsl:apply-templates select="$articles" />
    </div>
  </xsl:template>

  <xsl:template match="article">
    <a href="{url/a/@href}">
      <div class="article-copy">
        <h1>
          <xsl:value-of disable-output-escaping="yes" select="header" />
        </h1>
        <p>
          <xsl:value-of disable-output-escaping="yes" select="body" />
        </p>
      </div>
    </a>
  </xsl:template>
</xsl:stylesheet> 
```

# safari - Safari 和 Mobile Safari 是否不正确地渲染带有半径和填充的圆形边框？

> ID：14444806
> 
> 赞同：8
> 
> 时间：2013-01-21T18:18:47.520
> 
> 标签：safari, mobile-safari, padding, css

当您结合边框半径、填充和边框时，Safari 和 Mobile Safari 似乎会出现问题。在 Chrome 和 Firefox 中运行良好。

![预期结果](../Images/f4db33e5ff7d5cd4ee787f947c31daec.png)<-- 预期

![Safari 渲染](../Images/1c24e4e6cd8eebee3aee6864e1485f5e.png)<-- Safari 渲染

HTML：

```
<img src="http://lorempixel.com/200/200/animals/3/" /> 
```

CSS：

```
img {
    width: 200px;
    height: 200px;
    -webkit-border-radius: 500px;
    -moz-border-radius:    500px;
    border-radius:         500px;
    padding: 3px;
    border: 1px solid #999;
    margin: 10px
} 
```

示例：http: [//jsfiddle.net/ucNwx/2/](http://jsfiddle.net/ucNwx/2/)

是我的错还是Safaris？我将如何解决它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T21:18:44.880

我敢打赌这是 Safari 错误：`border-radius`应用较晚并产生剪切效果。幸运的是，`box-shadow`渲染正确，所以让我们使用它：

```
border-radius: 50%;
box-shadow:
  0 0 0 3px white,
  0 0 0 4px #999; 
```

[适用](http://jsfiddle.net/ucNwx/12/)于 iPad 和 OS X 上的 Safari 6。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:17:03.853

我现在能想到的最佳解决方案：http: [//jsfiddle.net/ucNwx/5/](http://jsfiddle.net/ucNwx/5/)

使用包装器 div 绘制边框，然后将图像放入其中。右边仍然有一些伪影，但我想这是一个 Safari 错误。

![在此处输入图像描述](../Images/17af83f9fbc690c1bbcf08a0e6ae943c.png)

HTML

```
<div class="border-container">
    <img src="http://lorempixel.com/200/200/animals/3/" />
</div> 
```

CSS

```
.border-container {
    width: 206px;
    height: 206px;
    -webkit-border-radius: 50%;
    -moz-border-radius:    50%;
    border-radius:         50%;
    border: 1px solid #999;
    margin: 10px
}

img {
    -webkit-border-radius: 50%;
    -moz-border-radius:    50%;
    border-radius:         50%;
    width: 200px;
    height: 200px;
    margin: 3px;
} 
```

# android - 在android中集成admob sdk时出错？

> ID：14444821
> 
> 赞同：0
> 
> 时间：2013-01-21T18:19:18.317
> 
> 标签：android, admob

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:ads="http://schemas.android.com/apk/libs/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" 
    android:id="@+id/root">

    <com.google.ads.AdView
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        ads:adSize="BANNER"
        ads:adUnitId="a14b7042de197ce" />

</RelativeLayout> 
```

错误：

```
01-21 23:40:31.462: E/AndroidRuntime(732): FATAL EXCEPTION: main
01-21 23:40:31.462: E/AndroidRuntime(732): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sampadintegration/com.example.sampadintegration.MainActivity}: android.view.InflateException: Binary XML file line #9: Error inflating class com.google.ads.AdView
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.os.Looper.loop(Looper.java:137)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.ActivityThread.main(ActivityThread.java:4424)
01-21 23:40:31.462: E/AndroidRuntime(732):  at java.lang.reflect.Method.invokeNative(Native Method)
01-21 23:40:31.462: E/AndroidRuntime(732):  at java.lang.reflect.Method.invoke(Method.java:511)
01-21 23:40:31.462: E/AndroidRuntime(732):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-21 23:40:31.462: E/AndroidRuntime(732):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-21 23:40:31.462: E/AndroidRuntime(732):  at dalvik.system.NativeStart.main(Native Method)
01-21 23:40:31.462: E/AndroidRuntime(732): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class com.google.ads.AdView
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-21 23:40:31.462: E/AndroidRuntime(732):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.Activity.setContentView(Activity.java:1835)
01-21 23:40:31.462: E/AndroidRuntime(732):  at com.example.sampadintegration.MainActivity.onCreate(MainActivity.java:21)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.Activity.performCreate(Activity.java:4465)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-21 23:40:31.462: E/AndroidRuntime(732):  ... 11 more
01-21 23:40:31.462: E/AndroidRuntime(732): Caused by: java.lang.reflect.InvocationTargetException
01-21 23:40:31.462: E/AndroidRuntime(732):  at java.lang.reflect.Constructor.constructNative(Native Method)
01-21 23:40:31.462: E/AndroidRuntime(732):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-21 23:40:31.462: E/AndroidRuntime(732):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
01-21 23:40:31.462: E/AndroidRuntime(732):  ... 22 more
01-21 23:40:31.462: E/AndroidRuntime(732): Caused by: java.lang.RuntimeException: Could not initialize AdView: Required XML attribute "adSize" missing
01-21 23:40:31.462: E/AndroidRuntime(732):  at com.google.ads.AdView.a(SourceFile:430)
01-21 23:40:31.462: E/AndroidRuntime(732):  at com.google.ads.AdView.<init>(SourceFile:126)
01-21 23:40:31.462: E/AndroidRuntime(732):  ... 25 more
01-21 23:40:31.462: E/AndroidRuntime(732): Caused by: com.google.ads.internal.b: Required XML attribute "adSize" missing
01-21 23:40:31.462: E/AndroidRuntime(732):  at com.google.ads.AdView.b(SourceFile:495)
01-21 23:40:31.462: E/AndroidRuntime(732):  at com.google.ads.AdView.a(SourceFile:364)
01-21 23:40:31.462: E/AndroidRuntime(732):  ... 26 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:29:42.873

请尝试使用此代码..

**XML**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 tools:context=".MainActivity" 
 android:id="@+id/root">

    <LinearLayout
    android:id="@+id/ad"
    android:layout_width="fill_parent"
    android:layout_height="50dp"/>

</RelativeLayout> 
```

**主要活动**

```
AdView adView = new AdView(this, AdSize.BANNER, "a14b7042de197ce");        
LinearLayout layout = (LinearLayout)findViewById(R.id.ad);        
layout.addView(adView);
adView.loadAd(new AdRequest()); 
```

# excel - 如何在 Excel 中按单元格 id 获取行值

> ID：14444824
> 
> 赞同：-1
> 
> 时间：2013-01-21T18:19:31.693
> 
> 标签：excel

我在 Excel 中有一个表格，其中在一行中存储了一些关于员工的数据（`usedID`、、、`salary`等`bonus`）。下一页是我应该检索数据的收据`userID`。我怎样才能做到这一点？

是否有任何特定功能可以让我通过唯一的 usedID 获取适当的数据？在收据页面上，我将提供`usedID`它放置的位置，甚至是单元格 ID。例如，我知道`userID`放在 cell 中`B2`，以及我需要在 cell 中获取的值`C2`。所以这个功能应该像

```
(=[providedId].replace('B', 'C')) 
```

其他数据以此类推。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:27:31.757

VLOOKUP 的使用示例：

想象一下你有一张这样的桌子

```
USER ID   Salary
  ms122    12345
  ms153    54321 
```

这些在 A1:B3 范围内

然后你可以用

`=VLOOKUP("MS123",A2:B3,2)`

# delphi - Delphi XE3 - 无法连接字符串

> ID：14444826
> 
> 赞同：5
> 
> 时间：2013-01-21T18:19:45.033
> 
> 标签：delphi, concat, delphi-xe3

对于我的生活，我不能连接两个（/三个）字符串。这些是我尝试过的一些代码：

```
dir := 'C:\Users\' + Username + '\Downloads\done.txt'; //"Username" is the computer's current username.
//another example vvv
dir := 'C:\Users\' + Username;
dir := dir + '\Downloads\done.txt';
//last example vvv
dir := Concat('C:\Users\', Username, '\Downloads\done.txt'); 
```

所有示例总是返回相同的结果：

> C:\用户\-用户名-

绝不：

> C:\Users\-用户名-\Downloads\done.txt

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T18:26:23.413

我的猜测是您的`Username`变量在其末尾包含 #0 并且您将该变量输出到某个 Windows API 函数。例如，以下代码将导致这种不当行为：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Dir: string;
  Username: string;
begin
  Username := 'Username' + #0;
  Dir := Concat('C:\Users\', Username, '\Downloads\done.txt');
  ShowMessage(Dir);
end; 
```

我的建议是检查`Username`变量的值，如果有的话，最后删除多余的#0。

# html - chrome中滚动条的媒体查询布局问题

> ID：14444831
> 
> 赞同：0
> 
> 时间：2013-01-21T18:20:00.880
> 
> 标签：html, css, google-chrome, scrollbar, media-queries

我在 Chrome 中遇到了这个奇怪的媒体查询问题，这个问题相当模糊，但真的让我很烦，所以我希望在这里找到解决方案，或者至少确认我不会发疯......

基本上，似乎当媒体查询启动时，页面将从内容滚动离开屏幕的状态（因此您有 y 轴滚动条）变为内容现在适合屏幕的状态（因此不应出现 y 轴滚动条）似乎有一小段时间页面布局呈现为好像滚动条在那里，即使它不存在（因此会出现试图填满整个屏幕的东西这段时间不要）

我已经建立了一个简单的页面来展示这个问题。它包含两个浮动 div，当媒体查询以小于 500px 的宽度启动时，它们被设置为不再浮动并具有更大的宽度——此时标题栏也会从蓝色变为红色（为了清楚起见）。

[http://appasylum.net/test/mediaQueryChromeScrollBarIssue/](http://appasylum.net/test/mediaQueryChromeScrollBarIssue/)

```
 <!DOCTYPE html>
  <html>
  <head>

      <title>Media Query Chrome Scrollbar issue</title> 
      <style type="text/css">

      html,
      body 
      {
         margin:0;
         padding:0;
      }

      .header
      {
        background-color: blue;
        padding: 10px;
        color: white;
        font-family: Helvetica, Arial, sans-serif;
      }

      .content
      {                
        background-color: #f5f5f5;
        border: 1px solid #e3e3e3;              
        float: left;
        width: 40%; 
        margin: 20px; 
      }

      @media (max-width: 500px) {

        .header
        {
          background-color: red;
        }

          .content
          {
            float:none;
            width: 90%;
          }
      }
      </style>

  </head>

  <body>

  <div class="header">
    Header
  </div>

  <div class="content"> Lorem ipsum dolor sit amet, consectetur adipiscing elit. In nec purus ut quam vestibulum porta sed ultrices velit. Suspendisse dapibus justo id ligula iaculis cursus. Fusce non diam ut ante porta lacinia id vel nisl. Mauris laoreet orci vel nulla imperdiet ac rhoncus diam accumsan. Quisque sed mauris mi, sollicitudin commodo ligula. Etiam arcu arcu, vehicula ut porttitor id, viverra non augue. Mauris laoreet fringilla tempus. Praesent elit elit, molestie eget bibendum vitae, fringilla nec turpis. Suspendisse eget ipsum sed sem egestas ultricies. Cras eleifend imperdiet magna nec elementum. Etiam arcu arcu, vehicula ut porttitor id, viverra non augue. Mauris laoreet fringilla tempus. Praesent elit elit, molestie eget bibendum vitae, fringilla nec turpis. Suspendisse eget ipsum sed sem egestas ultricies. Cras eleifend imperdiet magna nec elementum.Etiam arcu arcu, vehicula ut porttitor id, viverra non augue. Mauris laoreet fringilla tempus. Praesent elit elit, molestie eget bibendum vitae, fringilla nec turpis. Suspendisse eget ipsum sed sem egestas ultricies. Cras eleifend imperdiet magna nec elementum.
  </div>

  <div class="content"> Aliquam in mauris quis arcu aliquam aliquam eu ut mauris. Quisque ut tortor eu massa scelerisque vehicula. Morbi velit diam, egestas at placerat vel, tincidunt a nulla. Vivamus arcu augue, vulputate at elementum sit amet, adipiscing quis odio. Etiam arcu arcu, vehicula ut porttitor id, viverra non augue. Mauris laoreet fringilla tempus. Praesent elit elit, molestie eget bibendum vitae, fringilla nec turpis. Suspendisse eget ipsum sed sem egestas ultricies. Cras eleifend imperdiet magna nec elementum
  </div>

  </body>
  </html> 
```

要复制在大于 500 像素宽（蓝色标题）的窗口中打开上面的链接，并且高度只能让内容滚动离开页面 - 然后慢慢减小窗口的宽度直到它变成红色（即小于500 像素宽）。假设您的窗口高度导致非浮动 div 不再需要滚动条（反之亦然） - 在红色和蓝色标题之间的过渡点（即媒体查询变为活动状态）您应该注意到很短的时间红色标题没有填满整个视口宽度的时间段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:47:57.487

我认为 Chrome 在这里进入了无限循环。在您稍微低于 500 像素后，他删除了垂直滚动条，但在他删除滚动条后，窗口宽度又回到了 500 像素以上，他将 CSS 应用于该宽度，这反过来又需要垂直滚动条，我们又回到了我们开始的地方......所以无限循环。基本上，Chrome 只是通过留下垂直滚动条使用的空间来保护自己免受无限循环。

据我所见，您可以完全删除滚动条，即溢出：隐藏在主体上（但我想这对 99% 的网站没有太大帮助），或者始终使用溢出-y：滚动将其留在主体上。

编辑：也许您可以尝试删除 body 标记上的滚动条，但使用 overflow-y:scroll 将所有内容封装在一个 div 中。尽管 div 和 body 一样宽，但它似乎以这种方式工作，在我的测试中没有故障。这需要将此 div 设置为屏幕的 100% 高度，尽管如此。

# iphone - 当 TableCell 的内容/文本很大时，UITableView 滚动卡住

> ID：14444833
> 
> 赞同：0
> 
> 时间：2013-01-21T18:20:05.367
> 
> 标签：iphone, ios, uitableview, rss, lazy-loading

我正在创建一个 Rss 提要应用程序。我需要在哪里显示描述（每个超过 5000 个字符）。我能够在我的应用程序中显示所有提要，但是当我尝试滚动 UITableView 时出现问题，滚动不流畅我相信我需要为我的内容进行延迟加载，但我是 iphone 开发的新手。谁能告诉我正确的方法。并根据内容大小设置正确的单元格大小。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *simpleTableIdentifier = @"SimpleTableCell";

    SimpleTableCell  *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

    }

    MWFeedItem *item = [itemsToDisplay objectAtIndex:indexPath.row];
    if (item) {

        if(cell.gestureRecognizers.count==0){
            UILongPressGestureRecognizer *longPress=[[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longSelection:)];
            longPress.minimumPressDuration=1.0;
            [cell addGestureRecognizer:longPress];

        }

        UIImageView *imageView=[[UIImageView alloc] initWithFrame:cell.frame];
        UIImage *image=[UIImage imageNamed:@"Background.png"];

        imageView.image=image;
        cell.backgroundView=imageView;
        [[cell  textLabel] setBackgroundColor:[UIColor clearColor]];

        cell.textLabel.textAlignment=NSTextAlignmentRight;
        cell.textLabel.text=item.content;
        cell.textLabel.numberOfLines=0;
        cell.textLabel.font=[UIFont systemFontOfSize:15.0];
        [cell.textLabel sizeToFit];

        }

    return cell;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:00:03.163

您必须使用`-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

像这样：

```
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    MWFeedItem *item = [itemsToDisplay objectAtIndex:indexPath.row];
    //make sure to add the font you're using
    CGSize stringSize = [item.content sizeWithFont:[UIFont fontWithName:@"HelveticaNeue" size:14]
                                     constrainedToSize:CGSizeMake(320, MAXFLOAT)
                                         lineBreakMode:UILineBreakModeWordWrap];

    int rowHeight = stringSize.height;

    return rowHeight;
} 
```

把这段代码：

```
 UIImageView *imageView=[[UIImageView alloc] initWithFrame:cell.frame];
    UIImage *image=[UIImage imageNamed:@"Background.png"];

    imageView.image=image;
    cell.backgroundView=imageView; 
```

像这样在此处将其从现在的位置删除（将其保留在那里会导致您每次滚动时都会创建新的图像视图：

```
 if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
        UIImageView *imageView=[[UIImageView alloc] initWithFrame:cell.frame];
        UIImage *image=[UIImage imageNamed:@"Background.png"];

        imageView.image=image;
        cell.backgroundView=imageView;

    } 
```

# c# - 检查字典是否有相同的键值

> ID：14444835
> 
> 赞同：0
> 
> 时间：2013-01-21T18:20:09.073
> 
> 标签：c#, dictionary, for-loop

我有一个这样的字典对象：

```
CustomKeys<int, string> 
```

例如;

```
1000, F1
1001, F2
1002, F1
1003, F4
1004, F2 
```

我想知道这本字典中是否有超过 1 个相同的值。我还想记下哪些键（唯一 ID）有重复项。

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:30:17.590

可以使用`GroupBy`and than`Count() > 1`来跟踪哪些值具有重复项。

```
var q = dic.GroupBy(x => x.Value)
        .Select (x => new { Item = x, HasDuplicates = x.Count() > 1 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:29:50.010

您可以找到它们具有相同值的所有键值，如下所示；

```
 Dictionary<int, string> d = new Dictionary<int, string>();
    d.Add(1000, "F1");
    d.Add(1001, "F2");
    d.Add(1002, "F1");
    d.Add(1003, "F4");
    d.Add(1004, "F2");

    var dublicate = d.ToLookup(x => x.Value, x => x.Key).Where(x => x.Count() > 1);

    foreach (var i in dublicate)
    {
        Console.WriteLine(i.Key);
    } 
```

这是一个[`DEMO`](http://ideone.com/qNtvcB).

但是，如果您想获得一个`boolean`价值，因为您的物品具有相同的价值，请查看[Magnus 的答案](https://stackoverflow.com/a/14444979/447156)，这很棒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T19:00:13.207

另一种解决方案可能是：

```
var duplicates = dictionary.GroupBy( g => g.Value )
                           .Where( x => x.Count( ) > 1 )
                           .Select( x => new { Item = x.First( ), Count = x.Count( ) } )
                           .ToList( ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T18:55:49.137

我不确定您所说的“记下哪些具有重复值”是什么意思。如果你的意思是记下键，你可以这样做：

```
 var keys = new Dictionary<int, string>();
        keys.Add(1000, "F1");
        keys.Add(1001, "F2");
        keys.Add(1002, "F1");
        keys.Add(1003, "F4");
        keys.Add(1004, "F2");

        var duplicates = keys.GroupBy(i => i.Value).Select(i => new
        {
            keys = i.Select(x => x.Key),
            value = i.Key,
            count = i.Count()
        });

        foreach (var duplicate in duplicates)
        {
            Console.WriteLine("Value: {0} Count: {1}", duplicate.value, duplicate.count);
            foreach (var key in duplicate.keys)
            {
                Console.WriteLine(" - {0}", key);
            }
        } 
```

如果您的意思是仅跟踪重复值，请参阅 Sonor 的答案。

# php - 在检查用户验证之前检查 reCaptcha - Symfony2

> ID：14444839
> 
> 赞同：2
> 
> 时间：2013-01-21T18:20:42.120
> 
> 标签：php, symfony, fosuserbundle

在验证用户和密码之前，我想在处理程序中检查 Captcha [Google reCaptcha 。](https://developers.google.com/recaptcha/docs/php?hl=es)

```
require_once('recaptchalib.php');
$privatekey = "your_private_key";
$resp = recaptcha_check_answer ($privatekey,
                            $_SERVER["REMOTE_ADDR"],
                            $_POST["recaptcha_challenge_field"],
                            $_POST["recaptcha_response_field"]);
if (!$resp->is_valid) {
     // What happens when the CAPTCHA was entered incorrectly
     die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
     "(reCAPTCHA said: " . $resp->error . ")");
} else {
     // Your code here to handle a successful verification
} 
```

我正在使用 FOSUserBundle，我想在使用处理程序进行验证或扩展某些控制器之前检查验证码是否正确。

我的问题是，我可以使用什么处理程序来执行此操作？和以前一样登录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-09T04:57:43.657

我看到这是一个老问题，但这是我所做的，以防它帮助某人。

你想创建一个自定义的 AuthenticationListener：

```
<?php

namespace Acme\UserBundle\EventListener;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Core\Exception\BadCredentialsException;
use Symfony\Component\Security\Http\Firewall\UsernamePasswordFormAuthenticationListener;

class FormAuthenticationListener extends UsernamePasswordFormAuthenticationListener
{
    protected function attemptAuthentication(Request $request)
    {
        // check for a valid captcha here
        // I am using the GregwarCaptchaBundle
        // only shown when throttling in my case
        $captcha = $request->request->get('login[captcha]', null, true);
        if (null !== $captcha) {
            $check = $request->getSession()->get('gcb_captcha');
            if ($captcha !== $check['phrase']) {
                throw new BadCredentialsException('Captcha is invalid');
            }
        }

        return parent::attemptAuthentication($request);
    }
} 
```

您需要在 Bundle 配置或应用程序配置中注册您的身份验证侦听器。

YAML 中的示例：

```
parameters:
    security.authentication.listener.form.class: Acme\UserBundle\EventListener\FormAuthenticationListener 
```

由于您覆盖了 UsernamePasswordFormAuthenticationListener，请不要忘记`return parent::attemptAuthentication($request)`在您的自定义逻辑之后结束该方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:14:47.500

您可以覆盖 FOSUserBundle 登录控制器并在其中插入验证码逻辑`loginAction`

在这里您可以找到如何覆盖控制器： [https ://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_controllers.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_controllers.md)

# opencv - opencvlibrary 2.4 安装

> ID：14444847
> 
> 赞同：0
> 
> 时间：2013-01-21T18:21:18.583
> 
> 标签：opencv

> **可能重复：**
> [无法构建开放的 cv 2.3.1 源代码](https://stackoverflow.com/questions/9035537/unable-to-build-open-cv-2-3-1-source-code)

当我测试名为“facedetect”的示例程序时，这是我得到的错误。请让我知道我哪里出错了（在安装过程或其他任何事情中）

操作系统：Fedora 17

错误：./facedetect lena.jpg

这个程序演示了级联识别器。现在您可以使用 Haar 或 LBP 功能。这个分类器可以识别许多〜刚性物体，它最知名的用途是面部。用法：./facedetect [--cascade= 这是主要的训练分类器，例如正面] [--nested-cascade[=nested_cascade_path 这是一个可选的二级分类器，例如眼睛]] [--scale= [filename|camera_index]

查看 facedetect.cmd 进行一次调用：./facedetect --cascade="../../data/haarcascades/haarcascade_frontalface_alt.xml" --nested-cascade="../../data/haarcascades/haarcascade_eye.xml " --scale=1.3 按任意键退出。使用 OpenCV 2.4.0 版

Processing 1 lena.jpg OpenCV Error: Unspecified error (该功能未实现。用Windows、GTK+ 2.x或Carbon支持重建库。如果你在Ubuntu或Debian上，安装libgtk2.0-dev和pkg-config，然后在 cvNamedWindow 文件 /home/srinath/Documents/OpenCV-2.4.0/modules/highgui/src/window.cpp 中重新运行 cmake 或配置脚本，第 598 行终止在抛出 'cv::Exception 实例后调用' what(): /home/srinath/Documents/OpenCV-2.4.0/modules/highgui/src/window.cpp:598: error: (-2) 功能没有实现。使用 Windows、GTK+ 2.x 或 Carbon 支持重建库。如果您在 Ubuntu 或 Debian 上，请安装 libgtk2.0-dev 和 pkg-config，然后重新运行 cmake 或在函数 cvNamedWindow 中配置脚本

中止（核心转储）

# objective-c - 扩展 UIImagePicker 控制器无助于防止 io6 中的旋转

> ID：14444851
> 
> 赞同：-1
> 
> 时间：2013-01-21T18:21:36.097
> 
> 标签：objective-c, cocoa-touch, ios6, uiimagepickercontroller

我的应用程序在 info.plist 中设置为仅支持纵向模式。

但是，当用户将屏幕旋转为横向时，UIImagePickerController 会旋转。

由于在 io6 中没有调用 shouldAutoRotate 方法，因此我尝试像这样扩展它：

```
@interface NonRotatingUIImagePickerController : UIImagePickerController

@end

@implementation NonRotatingUIImagePickerController

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;

}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
}

@end 
```

但这无济于事。知道为什么吗？

在日志中，我看到上述方法被调用。UIImagePickerController 最初以纵向显示，当用户旋转时 - 它也会旋转而不是保持纵向。

我在视图中设置图像选择器，如下所示：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (!self.imagePickerController) {
        self.imagePickerController = [[NonRotatingUIImagePickerController alloc] init];
        self.imagePickerController.delegate = self;
    }
    return self;
}

- (void)viewDidAppear:(BOOL)animated{
   self.imagePickerController.showsCameraControls = NO;
   CGRect imagePickerControllerFrame = CGRectMake(0, topBar.frame.size.height, self.view.frame.size.width, self.view.frame.size.height - topBar.frame.size.height - bottomBar.frame.size.height);
   self.imagePickerController.view.frame = imagePickerControllerFrame;
   self.imagePickerController.allowsEditing = YES;
   self.imagePickerController.view.clipsToBounds = YES;
  self.imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera
  [self.view.window addSubview:self.imagePickerController.view];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:36:25.270

```
self.imagePickerController.view.frame = imagePickerControllerFrame;
// ...
[self.view.window addSubview:self.imagePickerController.view]; 
```

好吧，这完全是非法的。Apple 在文档中非常清楚地说明了这一点：

> 此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改

只有一种正确的方法可以使用使用 UIImagePickerControllerSourceTypeCamera 的图像选择器控制器 - 作为全屏呈现的视图控制器：

```
BOOL ok = [UIImagePickerController isSourceTypeAvailable:
           UIImagePickerControllerSourceTypeCamera];
if (!ok) {
    NSLog(@"no camera");
    return;
}
NSArray* arr = [UIImagePickerController availableMediaTypesForSourceType:
                UIImagePickerControllerSourceTypeCamera];
if ([arr indexOfObject:(NSString*)kUTTypeImage] == NSNotFound) {
    NSLog(@"no stills");
    return;
}
UIImagePickerController* picker = [UIImagePickerController new];
picker.sourceType = UIImagePickerControllerSourceTypeCamera;
picker.mediaTypes = @[(NSString*)kUTTypeImage];
picker.delegate = self;
[self presentViewController:picker animated:YES completion:nil]; 
```

*如果您想在*自己*的*界面中呈现实时拍照界面，请使用 AVFoundation 和它为您提供的相机捕获 API。

可在此处下载工作示例：

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch30p816cameraCaptureWithAVFoundation/p683cameraCaptureWithAVFoundation/ViewController.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch30p816cameraCaptureWithAVFoundation/p683cameraCaptureWithAVFoundation/ViewController.m)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:27:43.700

也许您会认为这个答案没有帮助；但我将粘贴 Apple 文档中的一个片段：

> 重要提示： UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。您可以将自定义视图分配给 cameraOverlayView 属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互。

[UIImagePickerController 文档链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

很抱歉成为一个杀人狂。您应该寻找替代课程。快速搜索显示有一堆。

# java - 绘制未定义大小的形状

> ID：14444852
> 
> 赞同：0
> 
> 时间：2013-01-21T18:21:41.167
> 
> 标签：java

我一直在看 Java2D 教程，想知道如何使用鼠标绘制形状来定义其大小（即形状的大小不固定）。我还没有遇到专门针对此的教程，并且想知道如何为矩形实现此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:39:14.227

基本上，大小在每一刻都是固定的。当您添加 a`MouseMotionListener`时，在捕获下一个事件之前，您可以在屏幕上绘制形状，其大小取决于当前`MouseEvent.getPoint()`，它告诉您鼠标位置的坐标。

覆盖`paintComponent(Graphics g)`组件的方法。`repaint()`并在每次更新鼠标位置和形状大小后调用方法：

```
class YourPanel extends JPanel extends MouseMotionListener, MouseListener {

    private Rectangle rect = new Rectangle();

    public YourPanel () {
        addMouseListener(this);
        addMouseMotionListener(this);
    }

    @Override
    public void paintComponent (Graphics g) {
        super.paintComponent(g);
        g.draw(rect);
    }

    @Override
    public void mouseDragged (MouseEvent me) {
        rect.setSize(me.getX() - rect.x, me.getY() - rect.y);
        repaint();
    }

    @Override
    public void mousePressed (MouseEvent me) {
        rect.setLocation(me.getX(), me.getY());
        repaint();
    }

    // Other methods...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:32:08.223

Shapes 是一个 word 和 java 类，表示不同的几何图形，如矩形、椭圆、折线等。

所以首先用户必须决定哪种形状，例如折线。
然后，您将捕获鼠标左键单击事件，并为每次单击读取鼠标坐标并将该坐标对（例如 java.awt.geom.Point2D()）添加到`ArrayList<Point2D>`. 这种列表的大小（实际上）是无限的。
在每次单击时，您将创建一个将被绘制的当前形状对象。一旦用户单击鼠标右键，形状就准备好了，您将其存储在形状列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:42:46.210

您应该让您的类实现鼠标侦听器，然后使用 getX 和 getY 保存鼠标侦听器的变量以绘制形状。

# javascript - asp.net mvc 3 - 用于单独视图的专门捆绑和缩小

> ID：14444853
> 
> 赞同：1
> 
> 时间：2013-01-21T18:21:42.900
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, bundle

## 总之

打包和缩小 JavaScript 时，最好使用单个站点范围的 JS 包还是多个特定的包？

如果是后者，那么如何将这些捆绑包添加到每个视图（而不是布局）中，并且在调试模式下仍然让服务器返回单个非缩小 JS 文件？

## 详细地

我阅读了一篇非常有趣的文章，详细介绍了如何在 ASP.NET MVC3 Web 应用程序中使用 MVC4 框架中可用的捆绑和缩小：[点击查看文章](http://www.dotnet-tricks.com/Tutorial/mvc/0a9M050113-Bundling-and-minification-in-MVC3-and-Asp.Net-4.0.html)

在本文中，它描述了如何从布局页面添加指向特定捆绑包的链接：

```
Scripts.Render("~/bundles/MyBundle") 
```

我可以看到这种方法非常适合创建站点范围的捆绑包。

但是，我不确定关于是否拥有单个站点范围的捆绑包或多个专业捆绑包的最佳实践是什么，我希望在这里得到建议。在我看来，单个站点范围的捆绑包的优缺点是：

*   缺点：
    *   减慢主页的初始加载（即使最小化）
    *   可能更难确保没有 JS 冲突。
*   优点：
    *   所有后续页面都没有新内容可下载
    *   只需管理一个捆绑包

好的 - 假设最佳实践是多个捆绑包......在这种情况下，我看到将捆绑包添加到布局页面是多么容易，但是特定视图呢？每个 View 都应该注册它需要的 JS（在脚本部分中），然后将其添加到页面主体的底部，以便最后加载（与添加到 Header 以便它首先加载的 CSS 不同）。我使用以下代码进行了管理，但这条路线的问题是 JS**总是**作为单个缩小文件出现，这在调试模式下没有多大帮助。

```
@<script src="@Scripts.Url("~/bundles/myBundle")"></script> 
```

提前谢谢了

格里夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:01:24.757

你可以两者都做。为了呈现专门的包，你可以这样做：

在 _Layout.cshtml 中创建一个脚本部分。我通常把我的放在页面底部，就在结束正文标记之前，但你也可以把它放在头部：

```
@RenderSection("scripts", required: false) 
```

然后，在您看来，您可以像这样定义该部分：

```
@section scripts {

    @Scripts.Render("~/bundles/myspecialuniquebundlejustforthisview")

} 
```

`BundleTable.EnableOptimizations = true`当您这样做时，只有在您使用 debug="false" 编译或在调试期间显式设置时，才会压缩和缩小捆绑包。

# javascript - D3 轴滴答声

> ID：14444854
> 
> 赞同：5
> 
> 时间：2013-01-21T18:21:44.530
> 
> 标签：javascript, d3.js, visualization

有没有办法让 .ticks() 的 count 参数成为一个硬值，可以完全遵守而不是提示？在某些情况下，这种格式确实是您想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T19:00:37.747

您可以使用该函数[`.tickValues()`](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues)显式设置刻度值。如果不带参数调用，它会返回当前的刻度值——这将允许您检查有多少，并根据需要添加/删除/重新计算。

# html - CSS - 在绝对定位的段落中垂直对齐文本

> ID：14444857
> 
> 赞同：9
> 
> 时间：2013-01-21T18:22:04.497
> 
> 标签：html, css, vertical-alignment, paragraph

在我们开始之前：
请不要将其作为另一个问题的副本关闭。我只是在 Stackoverflow 上搜索了这里，但没有找到确切的案例。

最接近的是我相信[这个问题](https://stackoverflow.com/questions/5219324/vertical-align-img-and-text-inside-p)。尽管如此，那里给出的答复对我来说并没有真正起作用，我相信因为该段落已设置`position: absolute;`。

那是HTML：

```
<ul>
    <li><img src="http://www.placehold.it/300x200" /><p><span>Lorem Ipsum</span></p></li>
</ul> 
```

和CSS：

```
li {
  position: relative;
  float: left;
  overflow: hidden;
}

img {
  width: 100%;
  vertical-align: middle;
}

p {
  background-color: rgba(255, 0, 0, .3);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

span {
    background-color: rgba(0, 255, 0, .3);
    vertical-align: middle;
} 
```

小提琴：http: [//jsfiddle.net/DpVjZ/](http://jsfiddle.net/DpVjZ/)

`vertical-align: middle;`只是将文本从顶部稍微凸出一点，但不是真正在中间。
设置跨度`position: absolute;`然后应用`top: 50%;`然后`margin-top: -x%;`将不起作用，因为跨度的高度未知，因为它是动态内容。
尽管链接的问题指出这是不好的做法，但我也尝试了这种`display: table-cell`方法，但没有任何结果。请帮我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T21:26:23.633

如果不对文本或图像的假定高度进行硬编码，我（不幸的是）无法在不到 3 层中解决这个问题：

1.  建立绝对定位
2.  建立表格布局
3.  建立表格单元格布局和垂直对齐：中间

结合 1 和 2 似乎可以防止 height: 100% 由于我不知道的原因而工作。我认为拒绝表格单元布局似乎是对旧的“不要使用表格进行布局”模因的盗用；CSS 用于布局，因此这不会滥用元素语义。（尽管不幸的是它需要语义上没有意义的 div。）

```
<ul>
<li>
    <img src="http://www.placehold.it/300x200" />
    <div class="absolute">
        <div class="table">
            <div class="middle">
                <p><span>Lorem Ipsum</span>
                </p>
            </div>
        </div>
    </div>
</li>
</ul>

li {
    position: relative;
    float: left;
    overflow: hidden;
}
img {
    width: 100%;
}
.absolute, .table, .middle {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.absolute {
    position: absolute;
}
.table {
    display: table;
}
.middle {
    display: table-cell;
    vertical-align: middle;
}
p {
    background-color: rgba(255, 0, 0, .3);
}
span {
    background-color: rgba(0, 255, 0, .3);
} 
```

[http://jsfiddle.net/svachalek/vTGxx/4/](http://jsfiddle.net/svachalek/vTGxx/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:14:42.883

摆脱 p 标签。无论如何，您已经在一个 li 中拥有它。

css

```
li {
position: relative;
float: left;
overflow: hidden;
}

img {
width: 100%;
height: 100%;
}

span {
background-color: rgba(0, 255, 0, .3);
position: absolute;
text-align:center;
width: 100%;
top:46%;
} 
```

html

```
<ul>
<li><span>Lorem Ipsum</span><img src="http://www.placehold.it/300x200" /></li>
</ul> 
```

在窗口 IE9 和 Chrome 上测试。

不知道它是否用于演示，但如果您希望图像上的红色阴影为 span 标签创建一个类，然后插入一个带有该类的新 span。

```
span.text {
background-color: rgba(0, 255, 0, .3);
position: absolute;
text-align:center;
width: 100%;
top:46%;
}

span.redshade {
background-color: rgba(255, 0, 0, .3);
width: 100%;
height: 100%;

<ul>
<li><span class="redshade">&nbsp;</span><span class="text">Lorem Ipsum</span><img src="http://www.placehold.it/300x200" /></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:46:01.350

垂直对齐在 CSS 中是一件棘手的事情，但当你熟悉 css 表格时，它并不难完成。

```
<style>
      html, body, #wrapper { height: 100%; }
      #wrapper { display: table; width: 100%; } /* Create space */
      #wrapper > * { display: table-cell; vertical-align: middle; } /* table-cells can be verticaly aligned! */
      #wrapper > * > .container { display: block; margin: auto; width: 600px; border: 1px solid #000000; } /* Horizontal align */
</style>

<div id="wrapper">
  <section id="main">
    <div class="container">
      <p>
        I'm centered in a fluid layout! :D
      </p>
    </div>
  </section>
</div> 
```

**编辑** 顶部将此元素放在另一个顶部，只需将#wrapper位置：固定；高度：100%；宽度：100%；左：0px；顶部：0px；或使用元素使用位置：绝对；

# javascript - 如何将一个表单的文件上传字段中的值复制到另一个表单的文本字段？

> ID：14444865
> 
> 赞同：4
> 
> 时间：2013-01-21T18:22:57.327
> 
> 标签：javascript, jquery, forms

我有一页上有两种不同的表格。第一种形式允许用户上传和通过电子邮件发送图像文件，第二种形式根据用户输入生成 URL。

为了将图像名称添加到 URL，我需要在第二种形式中有一个字段，该字段从第一种形式的字段中复制图像名称（我宁愿不必让用户浏览并选择图像一页上两次）。我发现跨表单将数据从一个字段复制到另一个字段的最佳方法是这个 jQuery 代码：http: [//jsfiddle.net/nA37d/](http://jsfiddle.net/nA37d/)，但它不适用于我的目的。例如，它可以很好地从文本字段到文本字段，但不能从文件字段到文本字段，或从文件字段到文件字段。

有没有办法获取表格 1 中文件字段的值并将其复制到表格 2 中的任何类型的字段中？这是我的基本代码：

```
<script type="text/javascript">
$(function(){
    bindGroups();
});

var bindGroups = function() {
    // First copy values
    $("input[name='logotoo']").val($("input[name='logoname']").val());

    // Then bind fields
    $("input[name='logoname']").keyup(function() {
        $("input[name='logotoo']").val($(this).val());
    });
};
</script>

<form action="#..." method="post" enctype="multipart/form-data">
<input type="file" name="logoname" value="1" />
<input type="submit" value="Upload" /></form>

<form name="form2" action="/url/" method="get">
<label>Logo Name</label> <input type="text" name="logotoo" />
<input type="submit" value="Generate URL" /></form> 
```

谢谢你提供的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:29:39.753

只需`change()`对输入类型文件使用处理程序，而不是 keyup：

[http://jsfiddle.net/nA37d/169/](http://jsfiddle.net/nA37d/169/)

```
 $("input[name='a1']").change(function() {
        $("input[name='b1']").val($(this).val());
    }); 
```

对于输入文件到输入文件，出于安全原因，我认为这是不可能的。

顺便说一句，这段代码应该重构。

# android - 在我的自定义启动器应用程序中使用 Android 拖放框架

> ID：14444868
> 
> 赞同：18
> 
> 时间：2013-01-21T18:23:13.977
> 
> 标签：android, android-layout, drag-and-drop

我正在尝试开发自定义启动器应用程序（具有无限数量的主页），我需要像在 Launcher2（android 4.2）中那样实现拖放。

所以我找到了两种方法

1)[拖放框架](http://developer.android.com/guide/topics/ui/drag-drop.html)
2) 使用 android launcher2 方式，如实现 DragController、DragSource，如[here](http://blahti.wordpress.com/2011/10/03/drag-drop-for-android-gridview/)所述。

但是我很难理解为什么 Android 人没有在他们自己的应用程序中使用他们开发的拖放框架。任何人都可以简要介绍他们的方法背后的可能原理吗？（我的意思是在内存/性能方面）

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T05:04:54.473

与 Launcher 应用程序中使用的框架相比，Android 拖放框架非常基础。

Launcher 应用程序有无数的“层”，拖放发生在这些层之间，即 DragLayer、工作区和所有应用程序视图等。它使用窗口标志并在拖动时动态添加/删除视图到 DragLayer进度和大量活动监控阻力。有关详细信息，请特别查看 DragLayer.java 和 Workspace.java 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-21T12:35:58.713

Android Launcher 中的拖放操作是在同一 ViewGroup 和同一窗口中作为 Overlay 绘制完成的。但是 android 拖放方法创建了一个完全具有单独窗口类型的单独窗口。

资源和内存明智的标准 android 拖放方法成本更高。

如果性能非常关键，我的建议是按照 Android 启动器的方式进行，否则更喜欢标准的 android 方法，它简单易行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T10:08:14.780

拖放框架是 sice api 11。我的猜测是，很多启动器的代码是在那之前编写的，还没有时间重构它。但是 api 的工作方式类似于第二种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-22T16:16:20.383

[http://javapapers.com/android/android-drag-and-drop/](http://javapapers.com/android/android-drag-and-drop/)。这是最好的拖放示例，因为我在我的应用程序中实现了相同的示例。注意：它将仅支持 11 以上的版本。拖放功能将不支持版本 10。相反，您必须通过设置 X 和 Y 位置以绝对布局移动字段。但是绝对布局完全被弃用了......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-12T09:17:05.390

如果您的应用程序不是那么复杂，您应该使用 WindowManaager 来控制拖放。这很容易实现并且在位置改变时工作。[在这里](https://github.com/eskim/android_drag_sample)获取代码

# ios - MasterViewController 的 TableViewController 在构造函数中为空？

> ID：14444870
> 
> 赞同：0
> 
> 时间：2013-01-21T18:23:19.790
> 
> 标签：ios

我有以下 MasterViewController：

```
- (id) init{
self = [super init];
if(self){
    //self.title = @"Main Menu";
    //self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);

    UIImageView* imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"view-1_0000s_0000_Muskoka-Logo1"]];
    self.navigationItem.titleView = imageView;

    self.tableView.backgroundColor = [UIColor clearColor];
    self.tableView.opaque = NO;
    self.tableView.backgroundView = [[UIImageView alloc] initWithImage:[UIImage    imageNamed:@"view-1_0002s_0003s_0001_Bottom-panel"]];
    self.tableView.scrollEnabled = NO;

}
return self;

} 
```

当我尝试设置 tableviewcontroller 的背景颜色时它会崩溃，因为 master 中的 tableview 为空。那里的图像当然不是空的。

我唯一的猜测是 [super init] 无法正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:27:57.940

视图控制器的视图和子视图在加载之前不存在，这将发生在`loadView`（视图层次结构是在代码中或从 xib 中构建的）所有这些自定义项都应该在`viewDidLoad`. 我很惊讶它崩溃了，但是， nil 的消息不会导致崩溃。

# mysql - 如何在 MySQL 中连接多个表？

> ID：14444872
> 
> 赞同：0
> 
> 时间：2013-01-21T18:23:20.410
> 
> 标签：mysql, sql, join

我想看看客户从给定制造商那里订购了什么。

我有这些表（带列）：

*   项目（item_num、**order_num**、stock_num、**manu_code**、数量等）
*   库存（stock_num、**manu_code**、**description**、unit_price 等）
*   订单（**order_num**、order_date、**customer_num**、ship_instruct 等）
*   客户（**customer_num**、fname、lname、company、address1 等）

这是我现在的查询，但我相信它会返回某种叉积：

```
SELECT concat(c.fname," ", c.lname) AS fullname, s.description
FROM items i, stock s, customer c JOIN orders o 
ON o.customer_num=c.customer_num 
WHERE o.order_num=i.order_num AND i.manu_code = 'ANZ'; 
```

它返回一个包含大量重复项的大列表（1000 行），

```
Anthony Higgens | baseball gloves
Anthony Higgens | baseball gloves
       .                 .
       .                 .
       .                 .
Kim Satifer     | running shoes 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:29:02.493

`FROM items i, stock s, customer c`对所涉及的三个表进行笛卡尔连接，但您`WHERE`对该笛卡尔连接的限制很少。

如果你做一些更明确的加入，你将大大减少重复并更正确地表达你想要做的事情。使用`INNER JOINS`和 正确的连接条件，而不是仅仅在 . 之后列出所有表`FROM`。示例：（还有更多这样的标准，您需要将其应用于 JOINS，但这是一个示例） `INNER JOIN stock ON stack.manu_code = items.manu_code`：。

最后，您可以使用`SELECT DISTINCT`or`GROUP BY`来进一步减少重复。但是，如果您`JOIN`使用正确的 JOIN 标准获得了明确的 s，那么您不应该有太多的重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:32:15.090

试试这个：

```
SELECT DISTINCT concat(c.fname," ", c.lname) AS fullname, s.description
FROM customer c 
INNER JOIN orders o ON c.customer_num = o.customer_num
INNER JOIN items i ON o.order_num = i.order_num
INNER JOIN stock s on s.stock_num = i.stock_num
WHERE i.manu_code = 'ANZ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:38:31.817

这应该工作：

```
        选择 concat(a.fname, " ", a.lname ) 作为名称
                        , d. 描述为 desc
        来自客户
        内部连接订单 b
            a.customer_num = b.customer_num
        内连接项 c
            在 b.order_num = c.order_num
        内连接股票 d
            在 c.manu_code = d.manu_code
        其中 c.manu_code 像 'ANZ'
        按名称分组，desc

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:59:36.383

谢谢大家，我认为这正在工作：

```
SELECT DISTINCT concat(c.fname," ", c.lname) AS fullname, s.description
FROM customer c 
INNER JOIN orders o ON c.customer_num = o.customer_num
INNER JOIN items i ON o.order_num = i.order_num
INNER JOIN stock s on s.stock_num = i.stock_num
WHERE i.manu_code = 'ANZ'; 
```

# grails - Grails 检查复选框，其值与变量相同

> ID：14444874
> 
> 赞同：0
> 
> 时间：2013-01-21T18:23:30.527
> 
> 标签：grails

嗨，我有这个值，我传递给 gsp

```
${d.causalOrganism} 
```

我有这三个复选框，我希望根据上述值检查其中一个。我该怎么做？我试过但没有用。

```
<label for="causalOrganism">Causal Organism:</label>

  Fungi<input type="checkbox" value="Fungi" name="causalOrganism" id="causalOrganism1" onclick="checkOrganism(this.id)"/>
  Bacteria<input type="checkbox" value="Bacteria" name="causalOrganism" id="causalOrganism2" onclick="checkOrganism(this.id)"/>
  Virus<input type="checkbox" value="Virus" name="causalOrganism" id="causalOrganism3" onclick="checkOrganism(this.id)" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:28:37.863

`checked`根据您所需的条件将属性添加到您的复选框：

```
...
Fungi<input type="checkbox" value="Fungi" name="causalOrganism" id="causalOrganism1" onclick="checkOrganism(this.id)" ${(d.causalOrganism == 'causalOrganism1') ? "checked='checked'" : ''}/>
... 
```

您应该考虑使用 grails [checkBox](http://grails.org/doc/latest/ref/Tags/checkBox.html)。有了这个，您可以`checked`直接使用该属性。

# c# - 问题移植到 Mono：由于反序列化期间的命名空间问题，无法转换参数

> ID：14444877
> 
> 赞同：1
> 
> 时间：2013-01-21T18:23:40.653
> 
> 标签：c#, wcf, ubuntu, mono, deserialization

在 Windows 上，使用 .NET。序列化或反序列化以下 WCF Web 对象没有问题：

```
[DataContract]
public class Payload
{
    public Payload() {}

    public class SubPayloadOne
    {
        public String Name { get; set; }
        public int Count { get; set; }
    }

    public class SubPayloadTwo
    {
        public String Name { get; set; }
        public int Number { get; set; }
    }

    [DataMember]
    public SubPayloadOne P1 { get; set; }
    [DataMember]
    public SubPayloadTwo P2 { get; set; }
} 
```

在 Mono（在 Ubuntu 上）上，尝试反序列化上述示例中的 Web 对象将导致以下错误： System.InvalidOperationException: Failed to set value of type String[Payload+SubPayloadOne+Name] for property String[Payload+SubPayloadTwo+ Name] String ---> System.ArgumentException: 转换参数失败

我的理论是 Mono 在反序列化对象时不包括完整的命名空间。换句话说，Payload.SubPayloadTwo.Name 与 Payload.SubPayloadOne.Name 混淆了，因为如果不考虑它们的完整命名空间，这两个对象都是“名称”。

按照上述理论，我尝试通过将 Payload.SubPayloadOne.Name 或 Payload.SubPayloadTwo.Name 重命名为其他名称来解决此问题，例如 Payload.SubPayloadTwo.NameTwo。哪个起作用了。但是，这会破坏与现有产品的反向兼容性（因为现有的 Payload 对象已经在数据库中）。

如果可能的话，我正在寻找一种不涉及更改 Web 对象的解决方案。有什么想法吗？

谢谢！

# ruby-on-rails - Factory Girl：如何建立 has_many/through 关联

> ID：14444878
> 
> 赞同：30
> 
> 时间：2013-01-21T18:23:47.093
> 
> 标签：ruby-on-rails, bdd, factory-bot

我一直在努力`has_many/through`使用 Factory Girl 建立关系。

我有以下型号：

```
class Job < ActiveRecord::Base
  has_many :job_details, :dependent => :destroy
  has_many :details, :through => :job_details
end

class Detail < ActiveRecord::Base
  has_many :job_details, :dependent => :destroy
  has_many :jobs, :through => :job_details
end

class JobDetail < ActiveRecord::Base
  attr_accessible :job_id, :detail_id
  belongs_to :job
  belongs_to :detail
end 
```

我的工厂：

```
factory :job do
  association     :tenant
  title           { Faker::Company.catch_phrase }
  company         { Faker::Company.name }
  company_url     { Faker::Internet.domain_name }
  purchaser_email { Faker::Internet.email }
  description     { Faker::Lorem.paragraphs(3) }
  how_to_apply    { Faker::Lorem.sentence }
  location        "New York, NY"
end

factory :detail do
  association :detail_type <--another Factory not show here
  description "Full Time"
end

factory :job_detail do
  association :job
  association :detail
end 
```

我想要的是创建我的工作工厂，默认`Detail`为“全职”。

我一直在尝试遵循这一点，但没有任何运气： [FactoryGirl Has Many through](https://stackoverflow.com/questions/8650204/factorygirl-has-many-through)

我不确定`after_create`应该如何通过 JobDetail 附加详细信息。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-21T19:40:56.263

尝试这样的事情。您想要构建一个`detail`对象并将其附加到作业的详细信息关联中。当您使用`after_create`时，创建的作业将屈服于该块。因此，您可以使用 FactoryGirl 创建一个详细信息对象，并将其直接添加到该作业的详细信息中。

```
factory :job do
  ...

  after_create do |job|
    job.details << FactoryGirl.create(:detail)
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-25T07:51:22.727

我今天遇到了这个问题，我找到了解决方案。希望这可以帮助某人。

```
FactoryGirl.define do
  factory :job do

    transient do
      details_count 5 # if details count is not given while creating job, 5 is taken as default count
    end

    factory :job_with_details do
      after(:create) do |job, evaluator|
        (0...evaluator.details_count).each do |i|
          job.details << FactoryGirl.create(:detail)
        end
      end
    end
  end  
end 
```

这允许创建这样的工作

```
create(:job_with_details) #job created with 5 detail objects
create(:job_with_details, details_count: 3) # job created with 3 detail objects 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-17T18:32:10.910

这对我有用

```
FactoryGirl.define do
  factory :job do

    # ... Do whatever with the job attributes here

    factory :job_with_detail do

      # In later (as of this writing, unreleased) versions of FactoryGirl
      # you will need to use `transitive` instead of `ignore` here
      ignore do
        detail { create :detail }
      end

      after :create do |job, evaluator|
        job.details << evaluator.detail
        job.save
        job_detail = job.job_details.where(detail:evaluator.detail).first

        # ... do anything with the JobDetail here

        job_detail.save
      end
    end
  end
end 
```

然后稍后

```
# A Detail object is created automatically and associated with the new Job.
FactoryGirl.create :job_with_detail

# To supply a detail object to be associated with the new Job.
FactoryGirl.create :job_with_detail detail:@detail 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-26T15:08:22.033

您可以通过以下方式解决此问题：

```
FactoryBot.define do
  factory :job do
    # job attributes

    factory :job_with_details do
      transient do
        details_count 10 # default number
      end

      after(:create) do |job, evaluator|
        create_list(:details, evaluator.details_count, job: job)
      end
    end
  end
end 
```

有了这个，你可以创建一个job_with_details，它有选项来指定你想要多少细节。您可以阅读[这篇有趣的文章](https://kolosek.com/factory-girl-associations)了解更多详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-19T14:22:32.513

使用当前的 factory_bot（以前的 factory_girl）实现，一切都由 gem 负责，您无需在 jobs.details 中创建然后推送记录。你只需要这个

```
factory :job do
  ...

  factory :job_with_details do
    transient do
      details_count { 5 }
    end

    after(:create) do |job, evaluator|
      create_list(:detail, evaluator.details_count, jobs: [job])
      job.reload
    end
  end  
end 
```

下面的代码将产生 5 个详细的工作

```
 create(:job_with_details) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-14T20:53:59.633

从 FactoryBot v5 开始，关联保留了构建策略。关联是解决这个问题的最好方法，[文档中有很好的例子](https://github.com/thoughtbot/factory_bot/blob/893eb67bbbde9d7f482852cc5133b4ab57e34b97/GETTING_STARTED.md#has_many-associations)：

```
FactoryBot.define :job do
  job_details { [association(:job_detail)] }
end

FactoryBot.define :detail do
  description "Full Time"
end

FactoryBot.define :job_detail do
  association :job
  association :detail
end 
```

# android - 子菜单在按钮按下时加载，并且有一个可编辑的文本框 ANDROID

> ID：14444881
> 
> 赞同：0
> 
> 时间：2013-01-21T18:24:03.323
> 
> 标签：android, eclipse, button, submenu

我目前正在尝试添加一个子菜单并让它做我想做的事。我一直在网上寻找，似乎无法确定是否可能。

基本上我有一个名为“登录”的按钮，用户将按下该按钮来加载子菜单，其中将有一个标签显示用户名，然后是一个可编辑的文本框，允许用户输入他们想要的用户名。

这可能吗？

我目前拥有的代码是

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    TextView txtUsername = (TextView) findViewById(R.id.txtUsername);
    EditText edit_username = (EditText) findViewById(R.id.edit_username);
    super.onCreateOptionsMenu(menu);
    SubMenu sub = menu.addSubMenu(0,1,0, "Sign-In");
    sub.add(0,11,0,edit_username);    //I have noticed this is wrong but the only way I thought it would work
    sub.add(0,12,0,txtUsername);    //same for here

    //add button for okaying the username

    return true;
} 
```

显然这是在创建选项菜单中，但是就像我说的那样，我希望它在用户单击使用 signIn void 登录时加载菜单

```
public void signIn(View view) 
{
 //load menu here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:46:59.453

您可以向菜单项添加任意数量的子菜单，但不能嵌套子菜单。（[参考](http://developer.android.com/reference/android/view/SubMenu.html)）

带有子菜单的菜单在少数情况下使用，其中一个菜单项有许多相关的子菜单项。

> 您可以通过将元素添加为 . 当您的应用程序具有许多可以组织成主题的功能时，子菜单很有用，例如 PC 应用程序菜单栏中的项目（文件、编辑、视图等）。

请参阅[此文档](http://developer.android.com/guide/topics/ui/menus.html)以了解有关选项菜单的更多信息。

我认为将用户名和密码字段添加到选项菜单没有意义。您可以使用子活动或[对话框](http://developer.android.com/guide/topics/ui/dialogs.html)片段来显示这些字段。

在您的代码中，您有两个问题。

> SubMenu sub = menu.addSubMenu(0,1,0, "登录"); sub.add(0,11,0,edit_username);
> sub.add(0,12,0,txt用户名);

1.  你不能嵌套子菜单。
2.  `add (int groupId, int itemId, int order, CharSequence title)`显然将 CharSequence 作为参数而不是 View 小部件（您的 edittext 和 textview）。

# java - jdbc sqlite 性能 - 查询异常缓慢

> ID：14444883
> 
> 赞同：0
> 
> 时间：2013-01-21T18:24:04.017
> 
> 标签：java, sqlite, jdbc

我试图为我的基于 java 的软件的用户提供使用 sqlite 而不是默认 MySQL 的选项，因为有些用户不知道 MySQL 是什么，或者如何安装，或者不想。

我使用 sqlite 一切正常，但查询时间非常慢。从 java 中使用 jdbc 的 SELECT 查询返回结果的时间至少是使用 MySQL 时的三倍。

但是，直接在 sqlite 控制台中运行的相同查询可以在几毫秒内运行。必须是导致速度变慢的 jdbc 连接。

关于我可以做些什么来提高速度的任何建议？我听说过用 Xerial 版本替换驱动程序，但不确定该怎么做。我会这样做是为了测试，但这显然是我怀疑我们可以要求我们的用户做的事情 - 如果他们反对安装 mysql，他们不会想要为 sqlite 切换驱动程序......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:29:06.443

您的驱动程序通常应与您的程序分发一起安装。（与您在应用程序中包装 sqlite 的方式相同）这样，驱动程序对您的用户来说是透明的（他/她不知道幕后发生了什么），您可以使用其他驱动程序。

与某个 rdbms 捆绑在一起的驱动程序会异常缓慢，这似乎有点奇怪。您可以尝试通过 sqlite 日志查看幕后发生的情况。（我什至会推荐它）

# java - 平均计算中的近似因子

> ID：14444886
> 
> 赞同：0
> 
> 时间：2013-01-21T18:24:13.167
> 
> 标签：java, algorithm, math, weighted-average

这就是我想要做的：我有一个大小为 N 的 double[]（N 不会大于 500，但是这个程序的不同应用程序会有不同的 N）。我现在想找出我可以达到给定平均值的组合。例如：

我要查找的数字是 3。双精度数组中只有 2 个项目 {6,2}

程序应该循环并告诉我 1x[0] 和 3x[1] = 6+2+2+2 / 4 = 3 是最简单的方法。我还想将这些因素限制在最多 10,000 个（即最多可以是 10,000[0]+10,000[1]）

我正在尝试使用嵌套的 while 循环，但无法使其正常工作。请问是跳板吗？

谢谢

编辑：这是我到目前为止所拥有的。它适用于两种给定的组合，但由于每个因素都需要一个 for 循环，因此实施起来会非常复杂。

```
public class Test {
public static void main(String[] args) {
    double[] returns = {6,2};
    double givenReturn = 3;
    double maxStock = 5000;
    double calcReturn = 0;

    for (int a = 0; a < maxStock && (givenReturn != calcReturn); a++) {//first level

        for (int b = 0; b < maxStock && (givenReturn != calcReturn); b++) {//second level

            calcReturn = (a*returns[0]+b*returns[1])/(a+b);
            if(calcReturn == givenReturn){
                System.out.println(a+" "+b);
                break;
            }
        }

    }

}

} 
```

程序成功打印：“1 3”。

如何使程序与十个不同返回的数组一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:29:40.143

为了参考起见，您的问题以数学方式提出：

```
Given an integer T and a vector c (|c| <= 500), solve for vector a and integer b:
(all numbers are non-negative integers)
a0.c0 + a1.c1 + a2.c2 + ... = T.b
a0 + a1 + a2 + ... = b
each ai <= 10000
b > 0
Additional constraint: minimize b 
```

对于您的示例：

`c`是 {6,2}，`T`是 3，`a`到 {1, 3} 并`b`到 4。

感觉应该有一种[数学](https://math.stackexchange.com/)方法来解决它（尽管我怀疑有）。

蛮力太慢了。对于 500 种类型，每种最多出现 10000 次，我们说的是 500^10000，这是……很多。

我在考虑[CSP](http://en.wikipedia.org/wiki/Constraint_satisfaction_problem)或[爬山](http://en.wikipedia.org/wiki/Hill_climbing)。

爬山很容易实现——你基本上只是从随机选择一些元素开始，然后添加和删除元素以更接近目标。

[整数编程的 wiki 页面](http://en.wikipedia.org/wiki/Integer_programming)有一些有用的信息。

# iphone - 从远程设备（iPhone）连接到 localhost Neo4j 数据库

> ID：14444887
> 
> 赞同：2
> 
> 时间：2013-01-21T18:24:15.223
> 
> 标签：iphone, neo4j, remote-access

目前，我的 Neo4j 数据库使用 address `http://127.0.0.1:7474`。

我已经更改了文件`neo4j-server.properties`，所以它现在读取`org.neo4j.server.webserver.address=0.0.0.0`为取消注释该行以允许远程访问。

我也尝试过`org.neo4j.server.webserver.address=127.0.0.1`，但是当我尝试`http://127.0.0.1:7474`在我的 iPhone 上访问时，我无法连接到服务器。

有没有人有任何尝试这样做的经验？

一如既往的感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T19:14:15.180

您应该将 localhost IP 更改为运行 Neo4J 的计算机的地址。

# c# - 从线程到主线程的交叉结果

> ID：14444888
> 
> 赞同：0
> 
> 时间：2013-01-21T18:24:16.217
> 
> 标签：c#, .net, c#-4.0

我有一个带有几个进度条的主线程。每个进度条都是读取 DataTable 的进度，所以我有 6 个进度条来表示 6 个不同的变量`(DataTable dt1, ... dt2, ... dt3, ...)`，这就是痛苦的开始。

我一直在使用 Task、Thread、BackgroundWorker 等，但找不到干净的方法：

*   选择要阅读的信息的位置
*   `Async`在主线程上加载进度
*   返回读取`DataTable`并将其存储在相应的`dt`

我已经做到了：

```
Task t = Task.Factory.StartNew(new Action(() =>
        {
            dt1 = customProgress.Read<DataTable>("Path");
        })); 
```

编辑：事实上，我的问题令人困惑。我将重写它：

有没有一种更有效的方法可以通过线程来交叉这种信息，或者有一种方法可以在 MainThread 运行时创建一个“等待”结果的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:30:21.460

无需等待会阻塞 UI 的主线程。相反，您可以使用 Task.Factory.ContinueWhenAll() 方法在所有任务完成后设置延续。如果要在 UI 线程上运行此延续，则将调度程序参数作为 TaskScheduler.FromCurrentSynchronizationContext() 传递

# java - 如何检查数据库中是否有记录？

> ID：14444889
> 
> 赞同：-6
> 
> 时间：2013-01-21T18:24:25.793
> 
> 标签：java, mysql

我正在使用随机生成器生成一个六位数，但我需要检查表中是否已经有结果号，主键不是我需要的东西，我会将结果写入其他表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:33:10.707

这都是关于`primary key`AND`foreign key`的。如果要添加具有 id 的记录，该记录必须存在于另一个表中，它是`foreign key`.

如果您不希望这样做，您可以执行以下操作：

```
conn = getConnection();
String query = "SELECT EXISTS(SELECT NULL FROM my_table WHERE number = ? LIMIT 1)";
pstmt = conn.prepareStatement(query);
pstmt.setString(1, myId); // Or setInt or whatever
rs = pstmt.executeQuery();
if (rs.next()) {
    boolean exists= rs.getBoolean(1);
    System.out.println("exists= " + exists);
} else {
    System.out.println("error: could not get the record counts");
} 
```

我编辑了我的答案，因为：@eggyal 提供的查询更快

# python - 在 python 中解析 Solr 输出

> ID：14444896
> 
> 赞同：0
> 
> 时间：2013-01-21T18:24:45.770
> 
> 标签：python, parsing, solr, xml-parsing, beautifulsoup

我正在尝试解析表单的 solr 输出：

```
<doc>
<str name="source">source:A</str>
<str name="url">URL:A</str>
<date name="p_date">2012-09-08T10:02:01Z</date>
</doc>
<doc>
<str name="source">source:B</str>
<str name="url">URL:B</str>
<date name="p_date">2012-08-08T11:02:01Z</date>
</doc> 
```

我热衷于使用漂亮的汤（具有 BeautifulStoneSoup 的版本；我认为在 BS4 之前）来解析文档。我已经使用漂亮的汤进行 HTML 解析，但有些我无法找到一种有效的方法来提取标签的内容。

我已经写了：

```
for tags in soup('doc'):
    print tags.renderContents() 
```

我确实感觉到我可以强行通过它来获得输出（比如再次说'汤'），但希望有一个有效的解决方案来提取数据。我需要的输出是：

```
source:A
URL:A
2012-09-08T10:02:01Z
source:B
URL:B
2012-08-08T11:02:01Z 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:29:03.483

使用 XML 解析器代替任务；[`xml.etree.ElementTree`](http://docs.python.org/2/library/xml.etree.elementtree.html)包含在 Python 中：

```
from xml.etree import ElementTree as ET

# `ET.fromstring()` expects a string containing XML to parse.
# tree = ET.fromstring(solrdata)  
# Use `ET.parse()` for a filename or open file object, such as returned by urllib2:
ET.parse(urllib2.urlopen(url))

for doc in tree.findall('.//doc'):
    for elem in doc:
        print elem.attrib['name'], elem.text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:22:51.003

您必须使用这种特定的输出格式吗？Solr 支持开箱即用的 Python 输出格式（至少在版本 4 中），只需在查询中使用 wt=python 即可。

# javascript - 使用 JQuery 显示带有上滑和下滑的隐藏 div

> ID：14444897
> 
> 赞同：0
> 
> 时间：2013-01-21T18:24:51.227
> 
> 标签：javascript, jquery, html, css

当用户从我的选择表单中选择“是”时，我制作了此表单以显示某些选项。我根本无法显示隐藏的 div，但我使用了控制台，发现至少将 select 更改为 yes 确实使我的 if 语句运行。我已经进行了测试并且 JQuery 正在工作，但是

谁能帮我确定我哪里出错了？

```
 <form method="post" action="quizcreatescript.php" name="quizcreateform" id="quizcreateform">

            <select name="choosemarks" id="choosemarks">
                       <option value="noweights">No</option>
                       <option value="yesweights">Yes</option>      
                </select>

<!-- >This div is hidden until the user selects yes to add own marks<-->        
<div class="hide" id="hiddendiv1"><!-- this select box will be hidden at first -->
<div class="input select">      
<input type="text" name="quizcorrectaward" id="quizcorrectaward"><br>   
<input type="text" name="quizincorrectaward" id="quizincorrectaward"><br>       
</div>  
</div>

<script type="text/javascript">         
$("#choosemarks").change(function(){ // when #choosemarks changes 
if ($(this).val() == "yesweights" ) { // if user selects to add own marks $(".hiddendiv1").slideDown("fast"); // if yes show the hidden div

                                    }  
else { $(".hiddendiv1").slideUp("fast");    //otherwise, hide the div again.

                                    }
                                });
</script>

                         <input type="submit" name="createthequiz" id="createquiz" value="Create Quiz">
                    </form> 
```

CSS表单有

```
.hide {
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:29:43.983

这：

```
$(".hiddendiv1") 
```

不选择此元素：

```
<div class="hide" id="hiddendiv1"> 
```

那将是这样的：

```
$("#hiddendiv1") 
```

用于`#`ID 和`.`类，它可能有效吗？

[**小提琴**](http://jsfiddle.net/adeneo/q9L86/1/)

# javascript - javascript 中长 if..else/switch 链的替代方案

> ID：14444898
> 
> 赞同：4
> 
> 时间：2013-01-21T18:24:55.087
> 
> 标签：javascript

```
 var ifChecks = function( i )
 {
     if( i === 23 )
     {
       // implementation
     }
     else if ( i === 300 )
     {
       // implementation
     }
     else if ... 

  } 
```

我在javascript代码中有这种长的if else链（app.60个检查），这个长链效率低下，好像第60个检查作为输入，然后它必须不必要地通过59个检查，所以我想像这样实现。

```
 var implobj = { 23 : handleimpl1,
                 300 : handleimpl2,
                 .
                 .
                 .
               }
 var handleImpl = function( i )
 {
    implobj[i]();
 } 
```

有没有比这个可以用javascript实现的解决方案更好的方法？

注意：输入不是序列号，否则我可以使用数组而不是对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T18:40:34.280

我会使用你的想法，编码略有不同，如下所示：

```
var handleImpl = (function() {
    var implobj = {
        23 : handleimpl1,
        300 : handleimpl2,
        // ...
        defaultImpl: someDefaultFn
    }

    return function(i) {
        (implobj[i] || implobj.defaultImpl)();
    };
}()); 
```

# c++ - 标准容器上带有迭代器的特定路由

> ID：14444902
> 
> 赞同：2
> 
> 时间：2013-01-21T18:25:03.623
> 
> 标签：c++, iterator, std

我有一个带有标准容器成员的类，我想知道我是否有可能制作一个具有特定路线的自己的迭代器，例如它来回移动，然后停止。

```
template<class T>
class compressed_string {
    vector<T> v;
public:
    typedef typename std::vector<T>::iterator iterator;
    iterator begin() { return v.begin(); }
    iterator end() { return v.end(); }

    compressed_string& add(const T& elem) {
        v.push_back(elem);
        return *this;
    }
    basic_string<T> not_nice_way_to_make_real_string() {
        basic_string<T> tmp;
        for(iterator i = v.begin(); i < v.end(); ++i)
            tmp += *i;
        for(iterator i = --v.end(); i >= v.begin(); --i)
            tmp += *i;
        return tmp;
    }
}; 
```

主要的：

```
compressed_string<char> s;
s.add('q').add('w').add('e').add('w');

cout << s.not_nice_way_to_make_real_string(); // q w e w w e w q

cout << endl

for ( compressed_string<char>::iterator i = s.begin(); i < s.end(); ++i )
    cout << *i; 
```

因此，有了这个迭代器成员，这两行的输出将是相同的。

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:03:58.647

您需要一个存储一些状态的迭代器：

*   它在哪里（例如迭代`v_it`器`v`）
*   它要去哪里（例如`bool forward`）
*   有界的地方（例如迭代器`v_begin = v.begin()`和`v_end = v.end()`）

以及一些其他无效的迭代器来表示结束，例如`{v_end, backward}`)。

然后按照以下方式实现增量运算符：

```
if (forward) {
    if (++v_it == v_end) {
        forward = false;
        --v_it;
    }
} else {
    if (v_it-- == v_begin) {
        v_it = v_end;
    }
} 
```

如果你想要一个双向迭代器，同样对于递减；在这种情况下，提供一个`reverse_iterator`也是礼貌的。您应该提供增量前和增量后的表格。

您还需要`==`and`!=`比较，比较`v_it`and`forward`和 dereference 运算符`*`和`->`that dereference `v_it`，以及合适`begin`的 and`end`函数；对于奖励积分，一个`const_iterator`会很好。

请注意，如果您真的希望问题中的代码（`i < s.end()`而不是更通用的代码`i != s.end()`）能够正常工作，则需要随机访问；这是完全有可能的，但如果你不需要它，那就太过分了。

更新：如评论中所述，这个特定的实现可能会有所改进；例如，`v_begin`如果您对定义结束迭代器的方式有点小心，则可以消除存储的需要。

# mysql - MySQL 随机字符串长度超过 32 个字符

> ID：14444903
> 
> 赞同：9
> 
> 时间：2013-01-21T18:25:05.197
> 
> 标签：mysql

我正在尝试使用以下方法在 MySQL 中生成 36 个字符的随机字符串：

```
UPDATE my_table SET entity_uid = substring(MD5(RAND()) FROM 1 FOR 36); 
```

但结果始终是 32 个字符的字符串。有没有办法获得更长的字符串？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T18:30:05.870

一种选择是生成两个 MD5 哈希，将它们连接在一起（总共 64 个十六进制字符），然后取其中的前 36 个字符：

```
SELECT SUBSTR(CONCAT(MD5(RAND()),MD5(RAND())),1,36) 
```

（注意：MD5 哈希是 128 位；MySQL MD5() 函数返回 32 个十六进制字符。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-04-18T08:45:24.813

如果你使用 5.7.4 以上版本的 MySQL，你可以使用新添加的[RANDOM_BYTES](http://dev.mysql.com/doc/refman/5.7/en/encryption-functions.html#function_random-bytes)函数：

```
 SELECT TO_BASE64(RANDOM_BYTES(40)); 
```

这将产生一个随机字符串，例如`r633j3sfgE85f3Jz+3AEx6Xo6qPXPUZruNimhId18iy+J1qOgZyCgg==`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T10:17:47.527

```
UPDATE my_table SET entity_uid = UUID(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T18:26:49.347

MD5 以 32 个字符的十六进制数字形式返回哈希值。

根据[MySQL](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_md5)

> 计算字符串的 MD5 128 位校验和。该值作为 32 个十六进制数字的字符串返回，如果参数为 NULL，则返回 NULL。例如，返回值可以用作哈希键。请参阅本节开头有关有效存储哈希值的注释。

# android - Android 4.0.4 设备 - 有 USB 设备时不显示

> ID：14444904
> 
> 赞同：0
> 
> 时间：2013-01-21T18:25:11.310
> 
> 标签：android, usb, android-4.0-ice-cream-sandwich

```
usb_manager = (UsbManager) getSystemService(Context.USB_SERVICE);
HashMap<String, UsbDevice> deviceList = usb_manager.getDeviceList(); 
```

& deviceList.size() 为 0

难道我做错了什么？该设备显然有一个 USB 端口，但找不到它。这可能是权限问题吗？

是否有可能无法在 SDK 中使用 USB 端口？

(安卓 4.0.4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:30:43.620

[javadoc](http://developer.android.com/reference/android/hardware/usb/UsbManager.html#getDeviceList%28%29)清楚地说：

> **返回包含当前连接**的所有 USB 设备的 HashMap

 **和

> 目前公共 API 仅支持主机模式。

而且我了解您的 USB 端口中没有任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:27:50.960

是否有可能无法在 SDK 中使用 USB 端口？

是的。看起来您的设备支持 USB OTG，但不支持 API。大多数便宜的平板电脑就是这种情况。**

# facebook-graph-api - 如何通过 facebook graph api 为页面创建新相册？

> ID：14444905
> 
> 赞同：1
> 
> 时间：2013-01-21T18:25:19.057
> 
> 标签：facebook-graph-api

我试过了：

```
POST:
[page id]/albums/?name="test" 
```

上

[http://developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/)

和

```
user_photos, friend_photos, manage_pages 
```

权限。我看到这个回复：

```
{
  "error": {
    "message": "(#100) Invalid ID for album owner", 
    "type": "OAuthException", 
    "code": 100
  }
} 
```

这显然不是我所期望的。有什么想法我可能做错了吗？

# ios - 将日期转换为设备时区

> ID：14444907
> 
> 赞同：0
> 
> 时间：2013-01-21T18:25:22.080
> 
> 标签：ios, objective-c

我正在从我的服务器解析 JSON，其中一个值是这样的日期：**2013-01-21 18:22:35 +00000**

我的问题是如何将此日期转换为当地时间，例如**2013-01-21 12:22:35 -0600**

我需要将日期转换为其他格式吗？

谢谢！

**编辑。**

使用@Gabriele Petronella 解决方案：

```
NSString * yourJSONString = @"2013-01-21 18:22:35 +0000";

NSTimeZone* localTimeZone = [NSTimeZone localTimeZone];
NSString* localAbbreviation = [localTimeZone abbreviation];

NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:locale];
[dateFormatter setDateFormat:@"yyyy-MM-dd H:mm:ss Z"];
NSDate *aDate = [dateFormatter dateFromString:yourJSONString];

NSTimeZone *timezone = [NSTimeZone timeZoneWithName:localAbbreviation];
[dateFormatter setTimeZone:timezone];

NSLog(@"%@", [dateFormatter stringFromDate:aDate]); 
```

一切正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:27:12.373

您使用 a`NSDateFormatter`从 a 读取日期`NSString`，然后您可以使用另一个（可能相同）显示更改时区的日期`NSDateFormatter`。

```
NSString * yourJSONString = @"2013-01-21 18:22:35 +0000";
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeStyle:NSDateFormatterFullStyle
 ];
[dateFormatter setDateStyle:NSDateFormatterFullStyle];    
NSDate * aDate = [dateFormatter dateFromString:yourJSONString];

NSTimeZone * timezone = [NSTimeZone timeZoneWithName:@"America/Chicago"];
[dateFormatter setTimeZone:timezone];

NSLog(@"%@", [dateFormatter stringFromDate:aDate); 
```

请注意，时区只是**显示**的问题，而`NSDate`对象只是表示日期的抽象，它独立于显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T20:53:19.847

```
NSDateFormatter *dateFormatter=[[NSDateFormatter alloc] init]; [dateFormatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"]; 
NSTimeZone *timeZone = [NSTimeZone localTimeZone]; [dateFormatter setTimeZone:timeZone];

NSString *myCurrentDeviceDate = [dateFormatter stringFromDate:[NSDate date]]; 
```

# javascript - 从 JSON 加载折线并显示在地图上

> ID：14444911
> 
> 赞同：0
> 
> 时间：2013-01-21T18:25:56.033
> 
> 标签：javascript, database, json, postgresql, google-maps

首先，我是使用 Google Maps API 开发的初学者，并且想知道在地图中显示由折线构成的路线的最佳方式是什么，该路线从 PostgreSQL 数据库中的表中获取其坐标？

我有两张表，一张叫“routes”，另一张叫“route_dots”

“路由”表包含以下字段：

```
-id --> Unique ID of the route,
-sport_id --> ID of the sport,
-user_id --> ID of the user who upload the routes,
-title --> title of the route,
-description --> description of the route, 
```

“route_dots”包含 -id --> 地点的唯一 ID，-route_id --> 路线的 ID，-coord_lat --> LAT，-coord_lon --> LON，-magic number --> 点的顺序路线的，

在其他网站上，我找到了一个解决方案，我可以生成一个 JSON 文件，其中包含路线的所有信息，例如 LAT 和 LNG 坐标、标题、描述，然后让地图读取该信息以显示路线。

我想要做的是生成一个数组，其中包含取自 coord_lat 和 coord_lon 字段的所有 LAT 和 LNG 坐标，其中包含坐标，以及路线的标题和描述。“magic_number”字段包含点的顺序。

如何生成包含上述所有信息的 JSON 文件，然后在地图中绘制该文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:57:15.437

如果您使用的是 PostgreSQL 9.1 或更高版本，则可以使用 json 类型（首先在 9.2 中提供，但在 9.1 中可以使用反向端口）。

如果您使用此功能，您基本上需要三个步骤：

1.  定义一个 PostgreSQL 用户定义类型来表示你需要的数据结构。请注意，元组类型可以具有元组类型，甚至元组类型的数组作为 PostgreSQL 8.4 的属性，因此您可以根据需要创建深度数据结构。

2.  编写一个输出这个数据结构的查询

3.  将其包装在 row_to_json() 中

然而，复杂性超出了工作示例。

# python - web.py - 指定地址和端口

> ID：14444913
> 
> 赞同：15
> 
> 时间：2013-01-21T18:26:19.673
> 
> 标签：python, web.py

如何在[web.py](http://webpy.org/)中指定监听地址和端口？就像是：

```
web.application( urls, host="33.44.55.66", port=8080 ) 
```

**编辑**

我想避免使用默认的 web.py 命令行解析

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-21T18:36:22.867

来自[web.py](http://webpy.org/docs/0.3/api#web.httpserver)的 API 文档：

```
 模块 web.httpserver
    函数运行简单(func,server_address=('0.0.0.0', 8080))  
```

运行托管 WSGI 应用程序功能的 CherryPy WSGI 服务器。目录 static/ 是静态托管的。

**示例代码**

```
import web

class MyApplication(web.application):
    def run(self, port=8080, *middleware):
        func = self.wsgifunc(*middleware)
        return web.httpserver.runsimple(func, ('0.0.0.0', port))

if __name__ == "__main__":
    app = MyApplication(urls, globals())
    app.run(port=8888) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-21T18:29:42.943

如果您使用 web.py 的内置网络服务器，您只需将端口附加到命令：

```
python app.py 8080 
```

我从未尝试过监听地址，但也许它会接受 1.2.3.4:8080 作为格式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-20T12:18:37.153

您可以在 wsgi.py 中看到以下代码：

```
server_addr = validip(listget(sys.argv, 1, ''))
if os.environ.has_key('PORT'): # e.g. Heroku
    server_addr = ('0.0.0.0', intget(os.environ['PORT']))

return httpserver.runsimple(func, server_addr) 
```

因此，您可以通过添加环境变量来设置 Web 服务器端口：

```
import os
os.environ["PORT"] = "80" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-13T09:42:15.393

```
URLS = ("/", index)

class index:
    def GET:
        ....

if __name__ == "__main__":
     app = web.application(URLS, globals())
     web.httpserver.runsimple(app.wsgifunc(), ("0.0.0.0", 8888)) 
```

# ajax - 相同域请求的 Origin 和 Host 标头

> ID：14444914
> 
> 赞同：3
> 
> 时间：2013-01-21T18:26:20.937
> 
> 标签：ajax, http, rest, http-headers, csrf

我们有服务于 AJAX 请求的 RESTful JSON 端点，希望支持跨源资源共享。我们正在锁定以确保我们不必担心跨站请求伪造 (CSRF) 攻击。我们使用的部分方法是检查是否存在 Origin 标头并验证它是否包含在已批准的 Origin 的白名单中。但是，我们注意到一些浏览器（其中包括 Chrome 和 Safari）在 AJAX POST 请求中包含 Origin 标头，即使来自同一个域（因此不是 CORS 请求）。

由于我们不希望我们的用户必须将提供 REST 端点的同一个域列入白名单，因此我们希望自动确定给定请求是“同域”还是“跨域”。为此，现在我们最好的尝试是观察是否存在 Origin 标头，如果存在，请将其与 Host 标头的值进行比较。我们的逻辑是，如果 Origin 与 Host 匹配，那么这个请求一定是“同域”，所以我们不需要在白名单中检查 Origin。

这是我们正在考虑使用的服务器端 JS 代码片段：

```
 if (typeof (headers["Origin"]) !== "undefined" &&
         headers["Origin"].replace(new RegExp("^.*?//"), "") !== headers["Host"] &&
         !contains(allowedOrigins, headers.Origin) ) {
         return false;
     } else {
         return true;
     } 
```

需要正则表达式比较，因为 Origin 标头看起来像这样：

```
http://localhost:8080 
```

而 Host 标头将如下所示：

```
localhost:8080 
```

所以我用那个正则表达式去掉前面的 http://。

问题是我们还没有看到任何其他实现使用或讨论这种方法。这让我们担心，由于某种原因，这可能不是一个合适的方法。所以，问题是 -**将 Host 标头与 Origin 标头进行比较是否是确定请求是否来自同一域的安全方法**？

此外，是否从 Origin 中删除领先的协议：//，正如我所展示的那样，总是会产生与 Host 相关的正确值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:59:04.117

我建议您改为检查 Ajax 标头：X-Requested-With: XMLHttpRequest

同源 Ajax 可以添加自定义 headers，几乎所有流行的框架如 jQuery 都添加了 X-Requested-With: XMLHttpRequest。

然而，对于 CORS，自定义标头会引发飞行前 HTTP OPTIONS 请求。

因此，如果您看到 X-Requested-With: XMLHttpRequest （或任何其他自定义标头）没有预检，您就知道它是同源 Ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:43:38.097

**如果您想切换到 HTTPS**或者我们可以说在**跨协议请求**的情况下，您当前将 Host 标头与 Origin 标头进行比较以确定相同来源的方法将失败。

就像您的代码会将这两个来源视为相同。

`Origin : http://www.example.com Origin : https://example.com`

其他方法将使用**[HTTP Referer](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Checking_Referer_Header)标头**。但我不会更喜欢使用它，因为欺骗它不是一项不可能完成的任务。

我的建议会比抱歉更好。在允许的来源列表中添加一个额外的项目不会给你带来太多痛苦。

# dataframe - Pandas 从 DataFrame 获得份额

> ID：14444916
> 
> 赞同：1
> 
> 时间：2013-01-21T18:26:31.623
> 
> 标签：dataframe, grouping, pandas

我需要一种智能而简洁的方式从 data_1 到达 data_3 数据帧。现在我很容易到达数据框 2。

```
DATA_1                        
key  SEGM1    SEGM2      VAL
A        K        X        1
B        K        X        2
C        K        X        3
D        K        Y        4
E        K        Y        5
F        J        Y        6
G        J        Z        7
H        J        Z        8
I        J        Z        9

DATA_2
SEGM1   SEGM2       VAL
    K       X         6
            Y         9
    J       Y         6
            Z        24

DATA_3
SEGM1   SEGM2        VAL
    K       X        40%
            Y        60%
    J       Y        20%
            Z        80% 
```

非常感谢！

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:58:35.647

这是一个单行：

```
In [1]: df
Out[1]:
    SEGM1 SEGM2  VAL
key
A       K     X    1
B       K     X    2
C       K     X    3
D       K     Y    4
E       K     Y    5
F       J     Y    6
G       J     Z    7
H       J     Z    8
I       J     Z    9 
```

使用该`DataFrame.div`函数划分两个数据帧。第一个数据框按您要计算份额的“内部级别”分组，然后求和。第二个数据帧按“外层”分组，作为份额计算的分母。您必须传递`level=0`给`div`引用多索引级别 SEGM1 的函数。

```
In [2]: df.groupby(['SEGM1','SEGM2'])[['VAL']].sum().div(df.groupby('SEGM1').sum(),level=0)
Out[2]:
             VAL
SEGM1 SEGM2
J     Y      0.2
      Z      0.8
K     X      0.4
      Y      0.6 
```

分子数据框：

```
In [1]: df.groupby(['SEGM1','SEGM2'])[['VAL']].sum()
Out[1]:
             VAL
SEGM1 SEGM2
J     Y        6
      Z       24
K     X        6
      Y        9 
```

分母数据框：

```
In [2]: df.groupby('SEGM1').sum()
Out[2]:
       VAL
SEGM1
J       30
K       15 
```

# groovy - 我可以在经过评估的 Groovy 脚本中获取错误的行号吗？

> ID：14444918
> 
> 赞同：2
> 
> 时间：2013-01-21T18:26:34.753
> 
> 标签：groovy

我有一段代码用于运行用户提供的 Groovy 脚本，如下所示：

```
def scriptText = <something user entered>
def manager = new ScriptEngineManager()
def engine = manager.getEngineByName('Groovy')

try {
    engine.eval(scriptText)
}
catch (ScriptException e) {
    println 'Script error at line ' + e.getLineNumber() + ', column ' + e.getColumnNumber() + ': ' + e.getMessage()
} 
```

如果我故意在提供的输入脚本中输入错误，此代码将打印以下内容（包含未定义的行号和列号）：

```
Script error at line -1, column -1: javax.script.ScriptException: groovy.lang.MissingPropertyException: No such property: blah for class: Script1 
```

我也试过只调用 Eval.me(scriptText)，因为调用代码也是 Groovy，但随后我得到一个很大的堆栈跟踪，其中隐藏了脚本错误的原因，如下所示：

```
Exception in thread "main" groovy.lang.MissingPropertyException: No such property: blah for class: Script1
Possible solutions: class
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:50)
    at org.codehaus.groovy.runtime.callsite.PogoGetPropertySite.getProperty(PogoGetPropertySite.java:49)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGroovyObjectGetProperty(AbstractCallSite.java:231)
    at Script1.run(Script1.groovy:6)  <---- this is the script error
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:518)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:556)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:527)
    at groovy.util.Eval.me(Eval.java:68)
    at groovy.util.Eval.me(Eval.java:51)
    at groovy.util.Eval$me.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at com.kminnovations.metrics.engine.tester.Testing.parseFile(Testing.groovy:32)
    at com.kminnovations.metrics.engine.tester.Testing$parseFile.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120)
    at com.kminnovations.metrics.engine.tester.MetricsEngineTester.main(MetricsEngineTester.groovy:23) 
```

有没有办法从程序中执行脚本文本并准确获取脚本中错误的位置，以便我可以为提供它的用户清楚地显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:34:59.333

我认为您仍然可以通过导航到根本原因并搜索 ScriptN.groovy 之类的源来获得该行，因为`ScriptEngineManager`将为每个执行的脚本自动生成此名称。

```
def manager = new ScriptEngineManager()
def engine = manager.getEngineByName('Groovy')

try {
    engine.eval(scriptText)
} catch (javax.script.ScriptException e) {
    def cause = rootCause(e)
    def line = cause.stackTrace.find { 
        it.fileName ==~ /^Script\d+\.groovy$/ 
    }.lineNumber
    println "Line $line: $cause.message"
}

def rootCause(Exception e) {
    Throwable t = e;
    while (t.cause != null) t = t.cause;
    t
} 
```

您可能想要更复杂`rootCause`，例如 apache.commons.ExceptionUtils

# android - 物理键盘方向

> ID：14444921
> 
> 赞同：1
> 
> 时间：2013-01-21T18:27:10.947
> 
> 标签：android, android-layout, android-keypad

我想知道是否有办法找出什么样的物理键盘（“纵向”，例如 Droid Pro 或“横向”，例如 HTC Mytouch Slide）设备？

我想在激活物理键盘时自动切换活动方向，以便活动中的 EditText 与键盘平行。

我从[这里](https://stackoverflow.com/questions/4553650/how-to-check-device-natural-default-orientation-on-android-i-e-get-landscape)尝试了旋转/方向解决方案，但是在我的带有横向滑动键盘的测试手机上，我不得不反转横向和纵向以使其正常工作，这让我认为在某些设备上它必须是其他方式大约。

比较屏幕宽度和高度，就像那里建议的其他一些答案一样，似乎也很不确定。也许还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:02:54.153

看起来不需要知道键盘类型：为了设置活动的正确方向，将其设置为来自 onConfigurationChanged 处理程序的传感器方向似乎就足够了（当物理键盘打开时又会调用它）或关闭）：

```
@Override
public void onConfigurationChanged(final Configuration newConfig)
{
    super.onConfigurationChanged(newConfig);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
} 
```

# c# - 向会话添加值时出现 NullReferenceException

> ID：14444924
> 
> 赞同：2
> 
> 时间：2013-01-21T18:27:20.403
> 
> 标签：c#, asp.net

我需要在会话中存储一组字符串，并且我有一个通过 jQuery ajax 调用调用的 Web 方法：

```
[WebMethod]
public string AddIdToSession(string userId)
{
    List<string> userIds = new List<string>();

    if (HttpContext.Current.Session != null && 
        HttpContext.Current.Session["userIds"] != null)
    {
        userIds = (List<string>)Session["userIds"];
        userIds.Add(userId);
        HttpContext.Current.Session["userIds"] = userIds;
    }
    else
    {
        userIds.Add(userId);
        HttpContext.Current.Session.Add("userIds", userIds);  // error here
    }

    return userId;
} 
```

当我尝试将 id 添加到会话时出现错误：

> **你调用的对象是空的。**

我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T18:30:14.897

您需要使用以下[**`EnableSession`**](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.71%29.aspx#vbtskusingwebmethodattributeenablesession)属性显式启用会话访问：

```
[WebMethod(EnableSession = true)] 
```

请注意，您的`else`逻辑将在这种情况下触发`HttpContext.Current.Session == null`，这很可能是`NullReferenceException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:29:47.093

您需要更改`[WebMethod]`为`[WebMethod(EnableSession = true)]` 才能访问当前会话。

然后您可以像这样访问当前会话：

```
HttpContext.Current.Session 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:31:05.980

您需要为 web 方法启用会话，将属性更改为

```
[WebMethod(EnableSession = true)] 
```

# ruby-on-rails - 如何列出属于某个类别的所有子类别的所有项目？罗尔

> ID：14444933
> 
> 赞同：0
> 
> 时间：2013-01-21T18:27:46.450
> 
> 标签：ruby-on-rails, filter, relationship, categories

这是我的模型关系：

*   `Category has_many Subcategories`

*   `Subcategory belongs_to Category`（`Subcategories`有一个`category_id`字段）

*   `Subcategory has_many items`

*   `Item belongs_to Subcategory`（`Items`有一个`subcategory_id`字段）

我想在类别的显示视图中列出属于某个类别的子类别的所有项目。

例如，在具有餐厅、快餐和送货子类别的食品类别中。我想在食物类别的显示视图中显示 3 个子类别中的所有项目。

我有条件使这成为可能：

```
<%@items = Item.find(:all, :limit=> 10, :conditions {:subcategory_id =>  }, :order=>"created_at ASC")%>
        <%@items .each do |items|%>
Items info shown here
<% end %> 
```

我不知道我是否必须通过条件、`if`语句或辅助方法来实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:48:38.503

这就是我解决它的方法。

我将 subcategory.category_id 和 category.id 之间的比较保存在变量 @subcategory_id

```
<%@subcategory_id = Subcategory.find(:all, :conditions => {:category_id => @category.id}, :order=>"created_at ASC")%> 
```

然后我使用该变量在项目列表的查询中创建条件

```
<%@lastitems= Item.find(:all, :conditions => {:subcategory_id => @subcategory_id}, :order=>"created_at ASC")%>
        <%@lastitems.each do |lastitem|%>

items info goes here

<%end%> 
```

谢谢。

# emacs - 无法编译 Emacs 自动完成功能。对弹窗的依赖

> ID：14444935
> 
> 赞同：0
> 
> 时间：2013-01-21T18:27:57.940
> 
> 标签：emacs, autocomplete

`auto-complete`我只是从 GitHub克隆 git 。当我输入

> 制作

我有：

```
emacs -Q -L . -batch -f batch-byte-compile auto-complete.el auto-complete-config.el

In toplevel form:
auto-complete.el:49:1:Error: Cannot open load file: popup

In toplevel form:
auto-complete-config.el:31:1:Error: Cannot open load file: popup
make: *** [byte-compile] Error 1 
```

我没有在`auto-complete`文档中看到任何说明我必须安装`popup`. 我不记得以前遇到过这个问题。这是一个新的依赖吗？是`popup`需要的包`auto-complete`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T18:30:35.183

如果您使用 Emacs 24（您现在可能应该使用），您可以使用该命令`M-x package-install`并通过那里安装自动完成功能。这将正确安装它，并且是安装软件包的最佳方法。

`popup.el`应该已经包含在您的自动完成副本中，如果没有在这里查看[https://github.com/auto-complete/popup-el](https://github.com/auto-complete/popup-el)以获取适当的副本。

要启用软件包，您可以将类似这样的内容添加到您的`.emacs`：

```
(require 'package)
(add-to-list 'package-archives
             '("melpa" . "http://melpa.milkbox.net/packages/") t)
(package-initialize)
(setq url-http-attempt-keepalives nil) 
```

最后一行只是为了防止大型软件包的下载有时超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:19:39.400

遇到与您相同的问题，发现您之前发布了一些挣扎以找出它不起作用的原因：**我忘记了启动子模块...** Make找不到弹出窗口和崩溃的原因

所以要解决它，进入你的自动完成回购并运行

```
git submodule update --init 
```

这将构建编译自动完成所需的三个库

# javascript - 使用 javascript 将文本附加到 textarea

> ID：14444938
> 
> 赞同：46
> 
> 时间：2013-01-21T18:28:11.090
> 
> 标签：javascript

如何将文本列表附加到文本区域？

```
<textarea id="alltext"></textarea>

<ol>
    <li onclick="addText(Hello')">Hello</li>
    <li onclick="addText(World')">World</li>
    <li onclick="addText(Earthlings')">Earthlings</li>
</ol>

<script>
    var Alltext = "";
    function addText(text) {
        Alltext += text
    }
document.getElementById("alltext").value = Alltext;
</script> 
```

这是非常低效的，因为列表实际上很长。添加的文本正是我在 HTML 上看到的值，所以不需要输入两次，对吧？

有没有更好的方法？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-21T18:35:22.457

`onclick`通过将 分配给来使用事件委托`<ol>`。然后将`event`对象作为参数传递，并使用它从单击的元素中获取文本。

```
function addText(event) {
    var targ = event.target || event.srcElement;
    document.getElementById("alltext").value += targ.textContent || targ.innerText;
}
```

```
<textarea id="alltext"></textarea>

<ol onclick="addText(event)">
  <li>Hello</li>
  <li>World</li>
  <li>Earthlings</li>
</ol>
```

请注意，这种传递`event`对象的方法适用于较旧的 IE 以及 W3 兼容系统。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-21T18:41:22.187

试试这个：

```
<!DOCTYPE html>
<html>
<head>
    <title>List Test</title>
    <style>
        li:hover {
            cursor: hand; cursor: pointer;
        }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $("li").click(function(){
                $('#alltext').append($(this).text());
            });
        });
    </script>
</head>
<body>

    <h2>List items</h2>
    <ol>
        <li>Hello</li>
        <li>World</li>
        <li>Earthlings</li>
    </ol>
    <form>
        <textarea id="alltext"></textarea>
    </form>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-18T20:14:59.283

托盘将带有 html 值的文本添加到 textarea 但它不起作用

价值 ：

```
$(document).on('click', '.edit_targets_btn', function() {
            $('#add_edit_targets').modal('show');
            $('#add_edit_targets_form')[0].reset();
            $('#targets_modal_title').text('Doel bijwerken');
            $('#action').val('targets_update');
            $('#targets_submit_btn').val('Opslaan');

            $('#callcenter_targets_id').val($(this).attr("callcenter_targets_id"));
            $('#targets_title').val($(this).attr("title"));
            $("#targets_content").append($(this).attr("content"));

            tinymce.init({
                selector: '#targets_content',
                setup: function (editor) {
                    editor.on('change', function () {
                        tinymce.triggerSave();
                    });
                },
                browser_spellcheck : true,
                plugins: ['advlist autolink lists image charmap print preview anchor', 'searchreplace visualblocks code fullscreen', 'insertdatetime media table paste code help wordcount', 'autoresize'],
                toolbar: 'undo redo | formatselect | ' + ' bold italic backcolor | alignleft aligncenter ' + ' alignright alignjustify | bullist numlist outdent indent |' + ' removeformat | image | help',
                relative_urls : false,
                remove_script_host : false,
                image_list: [<?php $stmt = $db->query('SELECT * FROM images WHERE users_id = ' . $get_user_users_id); foreach ($stmt as $row) { ?>{title: '<?=$row['name']?>', value: '<?=$imgurl?>/image_uploads/<?=$row['src']?>'},<?php } ?>],
                min_height: 250,
                branding: false
            });
        }); 
```

# ios - 核心数据：NSPersistentStoreCoordinator - 无法执行保存操作

> ID：14444939
> 
> 赞同：0
> 
> 时间：2013-01-21T18:28:15.927
> 
> 标签：ios, core-data

启动我的应用程序并发出一些获取请求后大约 5 秒，它崩溃并出现以下错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'This NSPersistentStoreCoordinator has no persistent stores.  It cannot perform a save operation.' 
```

我使用的核心数据只有两个实体和几个属性，没有 UITableViewControllers、获取委托和其他东西。显然我不能在这里复制/粘贴我所有应用程序的代码，但我确信我在某个地方犯了一个愚蠢的错误。

有什么方向可以看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:07:40.707

删除所有内容不一定是最好的方法。请记住，一旦部署了您的应用程序，您就没有该选项。虽然这在开发中可能是一种可行的方式，但您应该了解正确的程序：

当您更改托管对象模型时，请先制作一个新版本。如果您的持久存储设置了以下选项：

*   `NSMigratePersistentStoresAutomaticallyOption`和
*   `NSInferMappingModelAutomaticallyOption`

无需删除商店即可使其正常工作。

# objective-c - UIButton 在点击时显示选定状态

> ID：14444940
> 
> 赞同：5
> 
> 时间：2013-01-21T18:28:17.630
> 
> 标签：objective-c, cocoa-touch, ios6

如何在点击时显示 UIButton 的选定状态？

我想要它，这样当人们点击 uibutton 时，它会通过我的悬停显示选定状态？

现在他们必须按住按钮才能看到悬停。

```
[t1 setBackgroundImage: [UIImage imageNamed: [NSString stringWithFormat: @"hover.png"]] forState:UIControlStateSelected]; 
```

我也想在点击时显示悬停图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:46:05.333

您需要为按钮设置选中状态

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setImage:[UIImage imageNamed:@"hover.png"] forState:UIControlStateSelected]; 
```

要在按下按钮时显示 hoover 图像，您需要将 state 属性设置为`UIControlStateHighlighted`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:56:22.883

我遇到了同样的问题-我的按钮在按下（点击+按住）时突出显示，而在简单点击时却没有。这是我的代码：

```
btn = [UIButton buttonWithType:UIButtonTypeCustom];
        UIImage *image =[UIImage imageNamed:@"btn"];
        UIImage *imageSelected =[UIImage imageNamed:@"btn_tap"];
        [btn setBackgroundImage:transImage forState:UIControlStateNormal];
        [btn setBackgroundImage:imageSelected forState:UIControlStateHighlighted];
    [btn addTarget:self action:@selector(action:) forControlEvents:UIControlEventTouchUpInside];

-(void)btnPressedWithDelay{
    //your code for btn action
}

- (void) action:(UIButton *)sender{
    [self performSelector:@selector(btnPressedWithDelay) withObject:nil afterDelay:0.1];
} 
```

它对你有用吗？

# java - 使用 Groovy 命令行脚本执行 Java Spring Beans 如何停止 NoSuchBeanDefinitionException？

> ID：14444944
> 
> 赞同：0
> 
> 时间：2013-01-21T18:28:29.183
> 
> 标签：java, spring, groovy

我编写了这个 Groovy 脚本来加载和执行一些 Java Spring Bean：

```
 @GrabResolver(name = 'libs.snapshot', root = 'http://ml1002pc:8081/artifactory/libs-snapshot', m2compatible = 'true')
    @Grapes([
    @Grab(group = 'com.siemens.soarian.sf', module = 'BuildInformationService', version = '1.0-SNAPSHOT', changing = true),
    @Grab(group = 'com.siemens.soarian.sf', module = 'GapAnalyzer', version = '1.0-SNAPSHOT', changing = true)
    ])

    @GrabResolver(name = 'libs-release', root = 'http://ml1002pc:8081/artifactory/libs-release', m2compatible = 'true')
    @Grapes([
    @Grab(group = 'org.springframework', module = 'org.springframework.context', version = '3.0.5.RELEASE'),
    @Grab(group = 'org.springframework', module = 'org.springframework.context.support', version = '3.0.5.RELEASE'),
    @Grab(group = 'org.springframework', module = 'org.springframework.core', version = '3.0.5.RELEASE'),
    @Grab(group = 'org.springframework', module = 'org.springframework.beans', version = '3.0.5.RELEASE'),
    @Grab(group = 'org.springframework', module = 'org.springframework.asm', version = '3.0.5.RELEASE'),
    @Grab(group = 'org.springframework', module = 'org.springframework.aop', version = '3.0.5.RELEASE'),
    @Grab(group = 'org.springframework', module = 'org.springframework.aspects', version = '3.0.5.RELEASE'),
    @Grab(group = 'org.springframework', module = 'org.springframework.expression', version = '3.0.5.RELEASE'),
    @Grab('org.apache.commons:commons-lang:2.6'),
    @Grab('org.apache.commons:commons-collections:3.2.1'),
    @Grab('org.apache.commons:commons-logging:1.1.1'),
    @Grab('org.apache.commons:commons-dbcp:1.4'),
    @Grab('org.apache.commons:commons-pool:1.6'),
    @Grab('com.microsoft:sqljdbc:1.2'),
    ])
    @GrabConfig(systemClassLoader = true)

    import java.util.Collection;
    import java.util.List;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    import com.siemens.soarian.sf.build.BuildInformationService;
    import com.siemens.soarian.sf.gap.*

    public class CommandLineWrapper {

        public static void main(String[] args) {
            ApplicationContext ctx = new ClassPathXmlApplicationContext("classpath*:**/META-INF/applicationContext*.xml");

            GapAnalyzer gapAnalyzer = (GapAnalyzer) ctx.getBean("gapAnalyzer");
        }
    } 
```

我试图加载的应用程序上下文有这个 bean 声明：

```
 <bean id="gapAnalyzer" class="com.siemens.soarian.sf.gap.GapAnalyzerImpl">
    <constructor-arg ref="buildInformationService"/>
    </bean> 
```

我在命令行得到的例外是：

```
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@14f1726: startup date [Mon Jan 21 10:46:04 EST 2013 ]; root of context hierarchy 
Jan 21, 2013 10:46:04 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1e22c75: defining beans []; root of factory hierarchy
Caught: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'gapAnalyzer' is defined
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'gapAnalyzer' is defined
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:527)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1083)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:274)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1075)
        at org.springframework.beans.factory.BeanFactory$getBean.call(Unknown Source) 
```

但是，运行此脚本会导致第 40 行出现 NoSuchBeanDefinitionException，就好像 Spring 找不到 bean 规范一样。

如果我使用用 Java 编写并在 Eclipse 中运行的 Spring 部分集成测试，我可以加载 bean 和它需要的其他 bean。它按预期加载。

我检查了位于我的 Windows 主页**/.groovy**的 Grape 下载的罐子，并且所有罐子都存在。

根据我对[向类路径添加东西的](http://groovy.codehaus.org/Running)阅读，葡萄应该注意在我的类路径中获取这些罐子。

我在跑步：

*   视窗
*   日蚀朱诺
*   Groovy 2.0.6
*   太阳 JVM：1.6.0_33
*   Spring 3.0.5.RELEASE
*   神器2.3.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:09:38.000

我通过使用相同的服务处理 Grails 项目发现，我可以让 Groovy Grapes 下载依赖项并通过 Spring 来解决它们，我只是这样做：

```
ApplicationContext ctx = new  ClassPathXmlApplicationContext("classpath*:META-INF/applicationContext.xml"); 
```

主要区别在于我清理了类路径模式。其他模式在我的 Grails 应用程序和这里都失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:32:49.470

我认为`ClassPathXmlApplicationContext`永远不会将其构造函数参数扩展为`Resource[]`数组。所以 Spring 认为你正在尝试从一个不存在的（单个）文件创建一个上下文`**/META-INF/applicationContext*.xml`。不出所料，这是行不通的（在 Java 或 Groovy 中也行不通）。ant 样式模式仅在需要将 String 转换为 a 时进行扩展`Resource[]`，例如`<import/>`在 XML 中指定 an 时。如果您想在没有导入的情况下执行此操作，我建议您`ResourceArrayPropertyEditor`直接将 a 与 a 结合使用`GenericXmlApplicationContext`（它接受 a`Resource[]`作为构造函数参数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:49:11.707

这个脚本：

```
@Grab('org.springframework:spring-context:3.2.1.RELEASE')
@Grab('org.apache.commons:commons-lang3:3.1')
@GrabConfig(systemClassLoader = true)
import org.springframework.context.support.ClassPathXmlApplicationContext

def ctx = new ClassPathXmlApplicationContext("classpath:applicationContext.xml")
def su = ctx.getBean('su')
assert su.swapCase('Fee Fi Fo Fum') == 'fEE fI fO fUM' 
```

使用同一目录中的此 XML 文件对我有用：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
   <bean id="su" class="org.apache.commons.lang3.StringUtils"/>
</beans> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T19:25:17.730

给你的 bean 一个`name`属性并将其传递给`getBean`而不是`id`.

编辑：

您应该会看到这样的记录：

```
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@318a41cf: startup date [Mon Jan 21 20:51:21 MST 2013]; root of context hierarchy
INFO: Loading XML bean definitions from file [./META-INF/spring-conf.xml]
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4ed1102f: defining beans [gapAnalyzer]; root of factory hierarchy 
```

特别是，它应该显示一条带有文件名的消息并列出声明的 bean。如果您没有看到此内容，则说明未读取 XML 配置文件。如果找不到它，Spring 会默默地失败。

# java - 为什么我的 Java 应用程序在 Linux 而不是 Windows 上运行不正确？

> ID：14444954
> 
> 赞同：-5
> 
> 时间：2013-01-21T18:29:20.097
> 
> 标签：java, linux, windows

有点模糊的问题，但我们开始：

我有一个 Java 应用程序，它在 Windows 上执行 100%，但是，当上传到运行 Linux 的服务器时，应用程序仍然运行，只是不正确。我知道这不是文件路径或文件名，但 Windows 和 linux 之间的一些关键区别可能导致应用程序在其中一个或另一个上运行混乱？

我不想直接回答我的问题，（因此不发布代码或应用程序正在做什么）我只是对可能导致此类问题的原因更感兴趣，并且无法在任何地方找到列表。

任何投入将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:36:51.393

不匹配的文件路径（即，`C:\\Users\\`而不是`/tmp`）。文件分隔符的差异通常会破坏硬编码而不是动态加载它的程序。

此外，任何使用`exec()`, 运行的命令都会有所不同。

您的帖子说“我知道这不是文件路径或文件名”，但没有任何类型的代码或示例，这几乎是关键错误。Java 被设计为独立于平台的，并且绝大多数代码不受操作系统的影响，因为 JVM 将为该机器生成适当的字节码。

# jquery - 如何使用“easeOutExpo”动画在网页中滚动

> ID：14444955
> 
> 赞同：0
> 
> 时间：2013-01-21T18:29:22.767
> 
> 标签：jquery, html, jquery-ui, parallax.js

我正在尝试在网页中滚动时添加[easeOutExpo](http://commadot.com/jquery/easing.php)效果

我最初在一个网站[http://www.loisjeans.com/web2012/js/parallax.js](http://www.loisjeans.com/web2012/js/parallax.js)上找到了这个 我尝试了很多来带来效果，但徒劳无功。

滚动时有什么简单的方法来实现动画效果吗？请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:38:09.283

您可以尝试[iscroll4](http://lab.cubiq.org/iscroll/examples/simple/)可能会帮助您解决所有易于实现的浏览器中的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:33:18.447

平滑滚动支持缓动：[https](https://github.com/kswedberg/jquery-smooth-scroll) ://github.com/kswedberg/jquery-smooth-scroll 应该符合您的需求：

```
$.smoothScroll({
    scrollTarget: '#yourdiv'
    easing: "easeOutExpo"
}); 
```

# ios - 显示一个 NSProgressIndicator

> ID：14444956
> 
> 赞同：1
> 
> 时间：2013-01-21T18:29:23.927
> 
> 标签：ios, objective-c, xcode, nsprogressindicator

我想`NSProgressIndicator`在我的应用程序中显示一个不确定的内容，但我在网上找不到任何明确告诉我如何操作的内容。有人可以向我指出某种教程或提供一些示例代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:02:39.853

如果你想要一个进度视图（水平条），你应该使用[`UIProgressView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIProgressView_Class/Reference/Reference.html). 如果您想要一个不确定的旋转活动指示器，您可以使用[`UIActivityIndicatorView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html). 这两者都可以添加到情节提要或 NIB 中，也可以在 iOS 中以编程方式添加。这两个类的引用都包含指向示例的链接。

`NSProgressIndicator`不是 iOS 控件。

# wpf - 滚动到底部时取消选择顶部的项目

> ID：14444957
> 
> 赞同：0
> 
> 时间：2013-01-21T18:29:27.310
> 
> 标签：wpf, listbox, scroll, selection, unselect

我有一个 WPF `listbox`。这些项目绑定到`listbox`.

当我在顶部选择几个项目`listbox`并向下滚动到底部`listbox`以选择其他项目时，之前在顶部选择的项目将被取消选择。

我发现此行为将选择模式设置为扩展和多个。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T20:27:31.063

仅供参考 - 对于与 Silverlight 合作并找到此答案的任何人，请尝试使用：

```
VirtualizingStackPanel.VirtualizationMode="Standard" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:20:25.853

尝试关闭虚拟化

```
<ListBox VirtualizingStackPanel.IsVirtualizing="False" 
                       ItemsSource="{Binding XPath=Team}" 
                       ItemTemplate="{DynamicResource NameDataStyle}"/> 
```

# fluent-nhibernate - FluentNHibernate - 使用不同的 Id 生成器和类型覆盖 IIdConvention 会产生异常

> ID：14444958
> 
> 赞同：1
> 
> 时间：2013-01-21T18:29:31.347
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

如果我有一个映射 id 的约定，这就是我通常使用 hilo 生成器对具有 int Id 列的 int Id 属性进行映射的方式：

```
public class IdConvention : IIdConvention
{
    private const int HiLoRange = short.MaxValue;

    public void Apply(IIdentityInstance instance)
    {
        instance.Column(instance.EntityType.Name + "Id");
        instance.GeneratedBy.HiLo(HiLoRange.ToString());
    }
} 
```

但是我有一个我想以不同方式映射的类，而是使用分配的字符串作为 Id，我使用了覆盖：

```
public class SomeClassMapping : IAutoMappingOverride<SomeClass>
{
    public void Override(AutoMapping<SomeClass> mapping)
    {
        mapping.Id(instance => instance.StringProperty).GeneratedBy.Assigned().Column("StringProperty");
    }
} 
```

这在旧版本的 FluentNHibernate/NHibernate 中有效，但是当我更新到 1.3.0.733/3.3.2.4000 时，我现在成为未处理异常的受害者：

> System.InvalidOperationException：标识类型必须是整数（int、long、uint、ulong）

仅当我尝试使用字符串（或其他一些非整数属性作为 Id）时才会发生这种情况，我是否应该期望我不再能够覆盖映射并提供不同的生成器和类型，或者有什么在一般情况下，我可以做不同的事情来隐藏我想要做的覆盖吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:40:32.097

看起来执行顺序改变了。一个简单的解决方法是

```
public void Apply(IIdentityInstance instance)
{
    if (instance.Type == typeof(int))
    {
        instance.Column(instance.EntityType.Name + "Id");
        instance.GeneratedBy.HiLo(HiLoRange.ToString());
    }
} 
```

# jsf - JSF 空指针异常

> ID：14444960
> 
> 赞同：-2
> 
> 时间：2013-01-21T18:29:31.517
> 
> 标签：jsf

```
 <pre><h:form>
        <h:panelGrid>
            <h:outputLabel value="Username: " style="font-weight:bold" />
            <h:inputText value="#{user.username}" />
            <h:outputLabel value="Password: " style="font-weight:bold" />
            <h:inputSecret value="#{user.password}" />
            <h:commandButton value="Submit" action="#{user.doLogin()}" />
        </h:panelGrid>
    </h:form>
</pre> 
```

有人可以解释我为什么这会导致异常吗？这是我的第一个 JSF 应用程序。

```
ava.lang.NullPointerException
    at userSession.getUsername(userSession.java:45)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:08:33.750

检查`getUserName`方法的第 45 行。可能该方法的参数有一个`null`引用，它。意味着一个 setter 给出一个空值。也尝试在`doLogin()`方法中获取您的输入文本

```
FacesContext facesContext = FacesContext.getCurrentInstance();
ExternalContext externalContext = facesContext.getExternalContext();
Map<String, String> parameterMap = (Map<String, String>) externalContext.getRequestParameterMap();
username=parameterMap.get("id_of_your_inputfield"); 
```

# objective-c - UIPickerView：didSelectRow 方法和 Value Changed 事件处理程序方法之间的区别

> ID：14444962
> 
> 赞同：0
> 
> 时间：2013-01-21T18:29:34.583
> 
> 标签：objective-c

对于 UIPickerView，我看到有 2 种方法可用于确定选取器视图组件中的选定行信息。一种方法是对 Value Changed 事件使用自定义方法，例如

```
- (IBAction)onValueChanged:(id)sender 
```

另一种是使用委托方法，如

```
(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {...} 
```

那么，这两种方法有什么区别呢？我什么时候使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:33:04.513

没有`UIPickerview`用于更改的委托方法。因为它会停在任何位置并且

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

方法将被调用，因此如果用户在选择器停止动画/滚动之前退出......隐藏的方法`UIPickerView`必须在滚动/动画时为最后选择的值调用 uipicker。

# java - 创建新元素时出现 EntityExistsException

> ID：14444967
> 
> 赞同：0
> 
> 时间：2013-01-21T18:29:44.957
> 
> 标签：java, hibernate

这是我的豆子：

```
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "cl_id")
private Long clId;

@JoinColumn(name = "zip_id", referencedColumnName = "zip_id")
@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
private Zip zipId;
@JoinColumn(name = "city_id", referencedColumnName = "city_id")
@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
private City cityId;
@JoinColumn(name = "street_id", referencedColumnName = "street_id")
@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
private Street streetId; 
```

我的问题是，每当我尝试插入一个使用已经存在的邮编、城市或街道的新客户端时，我都会收到此错误：

```
Exception in thread "AWT-EventQueue-0" javax.persistence.EntityExistsException: 
Exception Description: Cannot persist detached object [bean.Zip[zipId=17]]. 
Class> com.jresto.common.bean.Zip Primary Key> [17]
at  oracle.toplink.essentials.internal.ejb.cmp3.base.EntityManagerImpl.persist(EntityManagerImpl.java:208) 
```

它不考虑**CascadeType.MERGE**部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:49:41.383

您正在持久化一个新 Bean（假设这是您的实体的名称）。而且您告诉 Hibernate，每当您持久化一个 Bean 时，还必须在 Bean 的 zip 上调用 persist()。并且 bean 包含一个 zip，该 zip 的 ID 为已存在于数据库中的 zip。所以很明显，你得到了这个例外。

要么使用 merge() 而不是持久化，要么从会话中查找 zip，将检索到的持久化 zip 附加到 bean，然后持久化 bean。

级联 ManyToOne 关联有点奇怪。您有几个 bean 实例共享一个 zip，并且每当您修改一个 bean 时，都会为所有其他 bean 修改 zip。

# actionscript-3 - 如何使 Flash 中的窗口不可调整大小

> ID：14444970
> 
> 赞同：1
> 
> 时间：2013-01-21T18:29:50.930
> 
> 标签：actionscript-3, flash

我在谷歌上找到的答案不起作用。我希望我的 Flash 程序不能调整大小/最大化，因为默认大小是它应该的大小。我正在使用 AS3。提前致谢！

# javascript - 是否可以在 Javascript 中告诉一个对象停止对另一个对象的引用行为

> ID：14444972
> 
> 赞同：0
> 
> 时间：2013-01-21T18:29:58.600
> 
> 标签：javascript

只是重新开始做大量的 Javascript 并尝试更好地理解 Javascript 对象。我之前问过上一个问题，但这个问题不同。我可以断开对象之间存在的引用关系吗？

例如：

```
var objA={};
objA.my_name='Joe';
var objB=objA;
objB.my_name="jake"; // objA.my_name="jake"
objB.something="this is something";
objA.last_name="Jackson";
console.log(objA.something);  // "this si something" can add to parent object at runtime
console.log(objB.last_name);  // "Jackson" can add to child object at runtime
// now I'd like to cut off objB from objA such that:
objB.cell_phone='323-213-2323';
console.log(objA.cell_phone); // '323-213-2323' but would like undefined; would like this behavior 
```

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:31:12.073

您不能告诉对象停止具有引用行为。这就是javascript的工作方式。

您可以复制一个对象，以便创建一个与原始对象具有相同属性的全新对象，但它是一个完全独立的对象，没有引用行为。

可以通过简单地迭代对象的属性并将每个属性分配给一个新对象来制作浅拷贝。

```
function shallowCopy(src, dest) {
    for (var prop in src) {
        if (src.hasOwnProperty(prop)) {
            dest[prop] = src[prop];
        }
    }
} 
```

数组的浅拷贝可以这样完成：

```
var arr = [1,2,3];
var copyArr = [].slice.call(arr, 0); 
```

对象或数组本身的属性也被复制的深层副本需要更多的工作，因为您基本上必须检查它们是否是对象或数组，然后递归地复制它们及其内容。如此处所示的浅拷贝要容易得多，而且，如果您知道数据的内容通常就足够了。

* * *

如果您想查看高级版本的复制（包括深度复制），您可以在[此处](https://github.com/jquery/jquery/blob/master/src/core.js)`.extend()`查看 jQuery函数的代码。按照该链接并搜索。`fn.extend`

# python - Python 全局变量使用

> ID：14444973
> 
> 赞同：6
> 
> 时间：2013-01-21T18:29:58.710
> 
> 标签：python

我是 Python 编码的初学者，这对来自 Java 的我来说有点跳跃。我现在的问题是关于在 Python 中将全局变量用于常量等。在 Java 中，我们对常量有两种想法，我们可以有这样的东西：

```
private static final HOME_URL_CONST = "localhost:8080"; 
```

或者如果我们需要在运行时赋值：

```
private static HOME_URL = "";
public void init(){ 
  HOME_URL = "localhost:8080"; 
} 
```

关键是在后一种情况下，一旦设置了静态变量，它就会保持设置状态。但是在 Python 中，情况并非如此。如果我创建一个全局变量，然后在函数中分配它，那么该变量将仅在该函数内具有分配的值。现在我有这样的事情：

```
def initialize():
  global HOME_URL
  with open("urls.txt", 'rb') as f:
    HOME_URL = json.load(f.read())['urls'] 
```

这是一种可接受的方法吗？还是有一些我不知道的影响和副作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T18:40:03.077

在 Python 中，由于其动态特性，没有定义 const 变量本身。常量由 Style 决定，因此引用[PEP 8](http://www.python.org/dev/peps/pep-0008/#constants)

> 常量通常在模块级别定义，并以全大写字母书写，并用下划线分隔单词。示例包括 MAX_OVERFLOW 和 TOTAL。

因此，如果您希望将变量用作常量，请在模块级别定义它，用下划线分隔的大写命名并遵循约定，以便在任何其他范围内都没有与常量变量冲突的其他变量。在任何情况下，您都不需要任何全局限定符，因为在模块级别定义的变量在任何情况下都将在函数级别的范围内。

所以在这种特殊情况下

```
HOME_URL = "localhost:8080"
def initialize():
      #global HOME_URL #You don't need this
      home_url = HOME_URL
      with open("urls.txt", 'rb') as f:
           #Constants are not supposed to mutate
           home_url = json.load(f.read())['urls'] 
```

# ruby - 如何在 Ruby 中创建一个充当 False 的对象

> ID：14444975
> 
> 赞同：14
> 
> 时间：2013-01-21T18:30:06.827
> 
> 标签：ruby

我想做这个

```
lol = Klass.new(values)

unless lol 
   print "false"
end

lol.other_method  # it is not nil or false, it is a Klass instance! 
```

但是在这种情况下，lol 不是 nil 或 false，而是一个可以根据某些内部值充当 false 的对象。我有这个选择

```
lol = Klass.new(values)

unless lol.to_bool
   print "false"
end 
```

但它是丑陋的恕我直言。

我正在考虑扩展 FalseClass 或玩 == 但没有成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T00:01:34.553

不幸的是，这是不可能的。

这是 Ruby 不是面向对象的那些烦人的情况之一。在 OO 中，一个对象*必须*可以模拟另一个对象（实际上，这取决于您问谁，这就是 OO 的*定义*——记住 OO 来自模拟），但不可能构建一个对象模拟`false`.

这是因为，在 Ruby 中，条件控制结构被嵌入到语言中并且不会转换为消息发送，而在其他 OO 语言中它们只是常规消息发送（或至少转换为消息发送，就像`for`在 Ruby 中转换为`each`）。例如，在 Smalltalk 中，布尔值实际上是使用您从 Lambda 演算中知道的布尔值的 Church 编码来实现的，并转换为 Ruby，它们看起来有点像这样：

```
class FalseClass
  def if(&block)
    # do nothing
  end

  def if_then_else(then_lambda, else_lambda)
    else_lambda.()
  end

  def not
    true
  end

  def and(&block)
    self
  end

  def or(&block)
    block.()
  end
end 
```

而且`TrueClass`只是镜像：

```
class TrueClass
  def if(&block)
    block.()
  end

  def if_then_else(then_lambda, else_lambda)
    then_lambda.()
  end

  def not
    false
  end

  def and(&block)
    block.()
  end

  def or(&block)
    self
  end
end 
```

然后，而不是像

```
if 2 < 3 then foo end
if 2 < 3 then bar else baz end 
```

你将会拥有

```
(2 < 3).if { foo }
(2 < 3).if_then_else(-> { bar }, -> { baz })

# using the new keyword arguments in Ruby 2.0, it almost reads like Smalltalk:
class FalseClass
  def if(then: -> {}, else: -> {})
    else.()
  end
end

class TrueClass
  def if(then: -> {}, else: -> {})
    then.()
  end
end

(2 < 3).if(then: -> { bar }, else: { baz }) 
```

这样，您可以轻松地创建一个`false`简单地通过实现相应方法来模拟的对象。

在其他情况下，某些对象确实*必须*是特定类的实例，而不仅仅是使用正确的协议，Ruby 提供了一个逃生口。例如，如果一个方法*确实*需要 a`Array`作为参数，那么它会首先尝试调用`to_ary`to 至少给你一个机会将你的对象转换为`Array`. `to_str`, `to_int`,`to_proc`等也是如此`to_float`。但没有等效的`to_bool`协议。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T19:18:37.520

简短的回答：**不要这样做**。

长答案是，在 Ruby 中*只有*两件事评估为假：`false`和`nil`. 从字面上看，其他一切都评估为真。

许多应用程序依赖于这种行为，如果你设法改变它，可能会出现故障。这就像将 1 定义为偶数一样。它会引起问题。

# perl - 使用“perl -c”验证语法但忽略特定错误？

> ID：14444978
> 
> 赞同：2
> 
> 时间：2013-01-21T18:30:16.017
> 
> 标签：perl, syntax, syntax-error

我目前正在运行`perl -c filename`以确定文件的语法是否正确。如果是，我们可以将其提交给 VCS。

现在，一些要检查的脚本已经`setuid`设置了位，这完全没问题。根据`perldiag`这就是我收到警告的原因：

```
Args must match #! line at /home/user/filename line 1. 
```

如何抑制单次运行的警告`perl -c`？该脚本必须使用可变参数调用，所以我想做一个忽略这个问题的语法检查——这在上下文中不是真正的问题。

* * *

这就是我想摆脱我的过滤器脚本的原因：它需要逐字计算输出行数，然后根据相关行数调整退出代码。这是相当乏味的。

* * *

更多细节。事实证明，“警告”实际上是一个错误，`perl -c`如下所示`perldoc perldiag`：

```
(F) A fatal error (trappable).
[...]
Args must match #! line
  (F) The setuid emulator requires that the arguments Perl was invoked with
  match the arguments specified on the #! line. Since some systems impose a
  one-argument limit on the #! line, try combining switches; for example,
  turn -w -U into -wU. 
```

请注意这是一个相当老的系统 ( `Red Hat Linux release 7.3 (Valhalla)`) 和一个相当老的 Perl ( `Summary of my perl5 (revision 5.0 version 6 subversion 1)`...)

似乎在较新的 Perl 版本中已弃用此错误。我将尝试更新 Perl 版本，看看这是否可行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:36:09.297

如何`perl -c`通过过滤器引导输出，该过滤器丢弃您不感兴趣的警告（它通过正则表达式找到这些警告）。然后，如果您有任何警告或错误输出，您将无法提交到 VCS。如果没有这样的输出，提交到 VCS。

# groovy - 从常规地图中获取所有姓氏的最短方法？

> ID：14444980
> 
> 赞同：0
> 
> 时间：2013-01-21T18:30:22.007
> 
> 标签：groovy

我是 groovy 的新手，在从包含用户列表（即名字和姓氏）的地图中获取所有姓氏的逻辑上有点挣扎。

以下是我试图回答的一个问题：

“我们有一个用户列表，用户类具有名称、姓氏属性。获取所有姓氏列表的最短代码是什么？”

```
class Users {

  String fName
  String lName

  String toString() {
    return fName + " " + lName
  }

  static main(args){

    Users user = new Users()
    def keys = []
    def map = [[firstname:'michael',lastname:"turner",department:"finanace"],
               [firstname:'james',lastname:"spencer",department:"finanace"]]
    map.find{it.key == map[name]}.each{
      println keys += it.value
    }
    def counter = 1
    keys.each {
      println "Surname $counter - " it
      counter++
    }
  }
 i.e. : 
  user.setFName(pass fName from loop to Users class)
  user.setLName(pass lName from loop to Users class)
} 
```

## 控制台上的预期输出

姓 1 - 斯宾塞
姓 2 - 特纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:31:37.253

那将是`map.lastname`：

```
assert map.lastname == ['turner', 'spencer'] 
```

对，要得到你（现在）说你想要的输出：

```
map.lastname.eachWithIndex { name, idx ->
  println "surname ${idx + 1} - $name"
} 
```

或者：

```
map.eachWithIndex { submap, idx ->
  println "surname ${idx + 1} - $submap.lastname"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:21:47.640

你有地图列表。我们可以将该地图列表转换为姓氏列表并像这样打印：

```
print map.collect { it.lastname } 
```

# java - 如何将 JTable 滚动到特定值？

> ID：14444986
> 
> 赞同：0
> 
> 时间：2013-01-21T18:30:39.990
> 
> 标签：java, swing, scroll, jtable

我有一个`JTable`显示日志文件的内容，第一列是一个以毫秒为单位的时间戳（例如 10:31:54.531）。数据已按此列排序。我想让用户滚动到他感兴趣**的时间戳。**

这是我想做的Java片段：

```
String myTimestamp = "10:31:54.531";
Integer myRowIndex = getRowIndexFromStringTimestamp(myTimestamp);
myJTable.getSelectionModel().setSelectionInterval(myRowIndex, myRowIndex);
myJTable.scrollRectToVisible(new Rectangle(myJTable.getCellRect(myRowIndex, 0, true))); 
```

但如何实施**`getRowIndexFromStringTimestamp`**？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:56:37.270

您需要对表格的引用并使用组合`JTable#getRowCount`，`JTable#getValueAt`

```
int matchIndex = -1;
for (int rowIndex = 0; rowIndex < myJTable.getRowCount(); index++) {
    Object value = myJTable.getValueAt(rowIndex, colIndex);
    if (value.equals(timestamp)) { // Or what ever comparison you need..
        matchIndex = rowIndex;
        break;
    } 
}
return matchIndex; 
```

这样做的问题是随着数据的增加会变慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:51:08.220

*   我认为[改用过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)比循环和搜索`XxxTableModel`或`JTables view`比较所需值更简单

*   必须为（java.util.Date）的列包含）值设置正确的[ColumnClass](https://stackoverflow.com/a/6233119/714968)`Date(DateTime`

*   否则必须在`XxxTableModel`or中循环和搜索`JTables view`，并比较值

# git - Git没有在子文件夹中显示远程分支

> ID：14444994
> 
> 赞同：0
> 
> 时间：2013-01-21T18:31:06.623
> 
> 标签：git

我有一个项目放在 git 下。问题是，如果我进入名为“www”的子文件夹之一并键入`git remote`它不会显示任何内容，但是当我进入项目的更高级别时，它会显示遥控器。

还有这个名为 'www' 的文件夹，当我更改其中的内容然后提交并尝试将更改推送到我的遥控器时，它不会推送任何内容并说一切都是最新的。

任何帮助，不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:51:28.530

这是一个很好的调查，但你为什么不只是`git submodule`在你的 repo 的根目录中，并确保这`www`是一个像 @kan 所说的子模块。

[简要介绍](http://git-scm.com/book/en/Git-Tools-Submodules)一下子模块是什么。

* * *

另一方面，它可能是另一个 git repo 拉入`www`目录（应该有`.git`dir in `www`）。