# StackOverflow 问答 14264000-14264999

# wpf - WPF：最简单的数据触发器

> ID：14264001
> 
> 赞同：1
> 
> 时间：2013-01-10T17:42:06.070
> 
> 标签：wpf, datatrigger

我只是想学习 DataTriggers。这个简单的代码有什么问题？它告诉我“源”不是 FrameworkElement 的属性。

```
<Image>
    <Image.Triggers>
        <DataTrigger Binding="{Binding Status}" Value="Sent">
            <Setter Property="Source" Value="Resources\Approve_64_Trans.bmp"/>
        </DataTrigger>

        <DataTrigger Binding="{Binding Status}" Value="SendFailed">
            <Setter Property="Source" Value="Resources\Cancel_64_Trans.bmp"/>
        </DataTrigger>
    </Image.Triggers>
</Image> 
```

另外，当 Status 字段是枚举类型并且 SendFailed 和 Sent 是两个有效的枚举值时，使用值“SendFailed”或“Sent”是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:50:12.133

您需要将这种触发器放在一种样式中，如下所示：

```
 <Image>
     <Image.Style>
        <Style TargetType="Image">
           <Style.Triggers>
              <DataTrigger Binding="{Binding Status}" Value="Sent">
                 <Setter Property="Source" Value="Resources\Approve_64_Trans.bmp"/>
              </DataTrigger>
              <DataTrigger Binding="{Binding Status}" Value="SendFailed">
                 <Setter Property="Source" Value="Resources\Cancel_64_Trans.bmp"/>
              </DataTrigger>
           </Style.Triggers>
        </Style>
     </Image.Style>
  </Image> 
```

# java - Java 方法名称：useXxx() 与 setXxx()

> ID：14264004
> 
> 赞同：4
> 
> 时间：2013-01-10T17:42:18.797
> 
> 标签：java, naming-conventions

是否有使用`useXxx()`vs.为 Java 方法名称添加前缀的一般准则`setXxx()`？

我试图调用`setDelimiter()`Scanner 类的方法，却发现它被命名为`useDelimiter()`. JavaDoc 将此方法描述为“*设置*此扫描仪的分隔模式...”

那么，为什么`useXxx()`而不是`setXxx()`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:44:55.893

命名方法`.setXxx()`或`.getXxx()`只是[JavaBeans](https://en.wikipedia.org/wiki/Javabeans)的约定。如果您没有明确地将您的类用作 bean（`Scanner`当然不是），您可以随意命名您的方法。

此外，此`.useDelimiter()`方法返回`this`，而 JavaBeans 设置器返回`void`。如果此方法确实遵循 bean 约定，您将无法编写：

```
Scanner scanner = new Scanner(System.in).useDelimiter(xxx); 
```

方法名称的唯一真正约定，除非您确实打算将您的类作为 bean，否则它们应该是自我解释的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:46:53.133

这不是标准的二传手方法。它设置 delimPattern 并返回 Scanner 对象

```
 public Scanner useDelimiter(Pattern pattern) {
    delimPattern = pattern;
    return this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:45:03.913

这绝对是不一致的。

我通常希望访问器的形式为`setX`/ `getX`（或`isX`布尔值）。这是JavaBeans 约定的[一部分](http://docs.oracle.com/javase/tutorial/javabeans/writing/properties.html)。许多框架和工具都被明确编码为以这种方式工作，如果忽略它，您将失去互操作性。

但是请注意，这不是*不正确*的。但无论如何，我都会尝试保持一定程度的互操作性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T17:45:58.390

“setXXX()”和“getXXX()”不仅仅是“约定”——它们的名称也被 Java Beans 识别为“getter”和“setter”方法。如果你的类恰好是一个 Java Bean。“扫描仪”类不是:)

否则，这只是一个问题偏好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T17:54:30.210

在 Java setXxx() 方法中，'set' 用于设置一个值，例如设置一个经理的 ID：

```
 public void setManagerID()
 {
      String managerID = null;

    managerID = JOptionPane.showInputDialog(null,"Input an ID:");

  } 
```

# numpy - 突出显示单个轮廓线

> ID：14264006
> 
> 赞同：7
> 
> 时间：2013-01-10T17:42:31.283
> 
> 标签：numpy, python-2.7, matplotlib

我正在制作一个简单的等高线图，我想通过使其变粗并更改颜色来突出显示零线。

```
cs = ax1.contour(x,y,obscc)
ax1.clabel(cs,inline=1,fontsize=8,fmt='%3.1f') 
```

我如何实现这一目标？谢谢 ：-）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T22:20:42.913

![](../Images/74cb860a726276e4ac6aecb21e402522.png)

HTH - 这基本上是从[matplotlib 文档](http://matplotlib.org/api/pyplot_api.html?highlight=contour#matplotlib.pyplot.contour)中获取的轮廓示例，只是带有修改的水平线

从 - 方法返回的对象在其属性`contour`中包含对等高线的引用。`collections`等高线只是常见的 LineCollections。

在以下代码片段中，对等高线图的引用位于`CS`（即`cs`在您的问题中）：

```
CS.collections[0].set_linewidth(4)           # the dark blue line
CS.collections[2].set_linewidth(5)           # the cyan line, zero level
CS.collections[2].set_linestyle('dashed')
CS.collections[3].set_linewidth(7)           # the red line
CS.collections[3].set_color('red')
CS.collections[3].set_linestyle('dotted')

type(CS.collections[0])
# matplotlib.collections.LineCollection 
```

如果您没有明确指定级别，以下是如何找出级别：

```
CS.levels
array([-1\. , -0.5,  0\. ,  0.5,  1\. ,  1.5]) 
```

还有很多功能可以格式化单个标签：

```
CS.labelCValueList    CS.labelIndiceList    CS.labelTextsList
CS.labelCValues       CS.labelLevelList     CS.labelXYs
CS.labelFmt           CS.labelManual        CS.labels
CS.labelFontProps     CS.labelMappable      CS.layers
CS.labelFontSizeList  CS.labelTexts 
```

# mysql - 大 (2 GB) 表上简单 SELECT 操作的性能

> ID：14264007
> 
> 赞同：0
> 
> 时间：2013-01-10T17:42:31.873
> 
> 标签：mysql

我有非常简单的查询来获取 MIN 和 MAX 值，它看起来像：

```
SELECT  MAX(value_avg)
      , MIN(value_avg) 
FROM value_data 
WHERE value_id = 769 
  AND time_id BETWEEN 214000 AND 219760; 
```

这里是 value_data 表的架构：

```
CREATE TABLE `value_data` (
  `value_id` int(11) NOT NULL,
  `time_id` bigint(20) NOT NULL,
  `value_min` float DEFAULT NULL,
  `value_avg` float DEFAULT NULL,
  `value_max` float DEFAULT NULL,
  KEY `idx_vdata_vid` (`value_id`),
  KEY `idx_vdata_tid` (`time_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

如您所见，查询和表很简单，我在这里没有发现任何问题，但是当我执行此查询时，大约需要 9 秒才能获取数据。我还对这个查询进行了分析，99% 的时间是“发送数据”。

这张表真的很大，重约 2 GB，但有问题吗？我觉得这张桌子不会太大，肯定是别的东西……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:52:32.387

MySQL 可以轻松处理这种大小的数据库。但是，您应该能够提高此查询的性能，并且可能提高整个表的性能。通过将`time_id`列更改为`UNSIGNED INT NOT NULL`，您可以显着减小该列上的数据和索引的大小。此外，您提到的查询可能会受益于`(value_id, time_id)`. 使用该索引，它将能够将索引用于查询的两个部分，而不是像现在这样只使用一个。

另外，请使用查询编辑您的问题`EXPLAIN`。它应该确认我对索引的期望，但它总是有用的信息。

编辑：

您没有`PRIMARY`为表定义索引，这绝对对您的情况没有帮助。如果 的值`(value_id, time_id)`是唯一的，您可能应该`PRIMARY`在表的索引上方创建我提到的新复合索引。

# sugarcrm - SugarCRM：自动将入站电子邮件分配给案例

> ID：14264010
> 
> 赞同：1
> 
> 时间：2013-01-10T17:42:37.367
> 
> 标签：sugarcrm

我正在使用 SugarCRM CE 版本 6.5.8，并且已将其安装在 Windows 机器上。我正在尝试使用 SugarCRM 的功能，您可以在其中自动将入站电子邮件分配给案例，然后以循环方式将案例分配给用户。

我已经正确设置了调度程序并设置了电子邮件。该系统甚至处理了几封邮件并从中正确创建案例。然后，突然之间，它停止了工作。调度程序为私人邮件地址提取新邮件，但不为群组电子邮件地址提取新邮件。

我不知道在哪里寻找问题或原因可能是什么。有人面临类似的事情吗？

# javascript - 使用 OOP 创建带有事件的 HTML 对象的更好方法

> ID：14264014
> 
> 赞同：0
> 
> 时间：2013-01-10T17:42:49.997
> 
> 标签：javascript, jquery, html, oop

我的 Web 应用程序需要能够从 SQL 数据库中提取信息并根据信息创建对象。这些是需要点击事件（以及与之相关的其他方法）的 HTML 元素。

我目前在做什么：

```
function init() {
    //initially creates objects based on SQL database

    //user creates a new Foo
    fooA = new Foo({id: i, otherInfo: "..."});

    $(fooA.selector).click({...});
    $(fooA.selector).draggable({...});
    //etc.

    $(fooA.selector).appendTo('#topContainer');

function Foo(data) {
    this.id = data.id;
    this.html = "";
    this.selector = "#"+this.id;

    $('<div/>',{
        "class": "Foo",
        id: this.id,
        text: 'Blah blah blah'
    })
} 
```

**更新：** 有没有更好的方法来创建具有事件的 HTML div，或者这是一种有效、充分的方法？是否需要在数组中创建 javascript 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:53:35.073

如果您的所有新元素都将在单击时执行相同的操作，那么您可能应该只从某个父元素委托单击事件而不是在创建它时附加它，这可能会更容易。

* * *

例如：

```
$(document).on('click', '.foo', function(e){
    //do something when a .foo element is clicked on in the document
}); 
```

# algorithm - 重叠序列

> ID：14264015
> 
> 赞同：9
> 
> 时间：2013-01-10T17:42:51.233
> 
> 标签：algorithm, sequence, time-series

有许多起始端对序列。如何找到所有序列中包含的所有范围？start 和 end 是整数，它们可能很远，因此制作序列的位域并对`&`它们进行 -ing 是不可行的。如果有帮助的话，一个“行”（即一个序列）上的范围（即开始-结束对）不会重叠。开始和结束有上下限，我认为 32 位整数就足够了（即 0 <= values <= 65535）。

让我举个例子：

```
|----------|       |---------------------|           |----------|
     |----------------------|                      |-------|
                |---------------------|                 |--| 
```

结果应该是：

```
 |--------|                           |--| 
```

上面的例子大概是：

```
row1 = (100, 200), (300, 600), (800, 900)
row2 = (140, 450), (780, 860)
row3 = (280, 580), (820, 860)
result = (300, 450), (820, 860) 
```

另外，有没有任何已知的算法呢？我的意思是，这个问题有名字吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T18:24:52.177

假设每个序列中的范围不重叠，这应该不难。在这种情况下，只需遍历所有点并跟踪您何时进入或离开范围。

将所有序列中的所有点放入一个列表中，对其进行排序并记住每个点是起点还是终点。

```
100 S ---
140 S  |   ---
200 E ---   |
280 S       |  ---
300 S ---   |   |
450 E  |   ---  |
580 E  |       ---
600 E ---
780 S      ---
800 S ---   |
820 S  |    |  ---
860 E  |   ---  |
860 E  |       ---
900 E --- 
```

现在您遍历此列表，每次遇到起点时都会增加计数器，每次遇到终点时都会减少计数器。

```
 0
100 S 1
140 S 2
200 E 1
280 S 2  
300 S 3 <--
450 E 2 <--
580 E 1
600 E 0
780 S 1
800 S 2
820 S 3 <--
860 E 2 <--
860 E 1
900 E 0 
```

当计数器等于序列数（在您的示例中为三个）时，您已找到一个范围的开始，下一个点是该范围的结束。

请注意，如果每个序列中的范围按 start 排序或可以按 start 排序，则甚至不需要显式构建列表。在这种情况下，您可以通过在每个序列中保留指向当前范围的指针来并行迭代所有序列。

这里是 C# 中的全部内容 - 范围类。

```
internal sealed class Range
{
    private readonly Int32 start = 0;

    private readonly Int32 end = 0;

    public Range(Int32 start, Int32 end)
    {
        this.start = start;
        this.end = end;
    }

    internal Int32 Start
    {
        get { return this.start; }
    }

    internal Int32 End
    {
        get { return this.end; }
    }
} 
```

带有标志的点的类，用于区分起点和终点。

```
internal sealed class Point
{
    private readonly Int32 position = 0;

    private readonly Boolean isStartPoint = false;

    public Point(Int32 position, Boolean isStartPoint)
    {
        this.position = position;
        this.isStartPoint = isStartPoint;
    }

    internal Int32 Position
    {
        get { return this.position; }
    }

    internal Boolean IsStartPoint
    {
        get { return this.isStartPoint; }
    }
} 
```

最后是算法和测试程序。

```
internal static class Program
{
    private static void Main()
    {
        var s1 = new List<Range> { new Range(100, 200), new Range(300, 600), new Range(800, 900) };
        var s2 = new List<Range> { new Range(140, 450), new Range(780, 860) };
        var s3 = new List<Range> { new Range(280, 580), new Range(820, 860) };

        var sequences = new List<List<Range>> { s1, s2, s3 };

        var startPoints = sequences.SelectMany(sequence => sequence)
                                   .Select(range => new Point(range.Start, true));

        var endPoints   = sequences.SelectMany(sequence => sequence)
                                   .Select(range =>  new Point(range.End, false));

        var points = startPoints.Concat(endPoints).OrderBy(point => point.Position);

        var counter = 0;

        foreach (var point in points)
        {
            if (point.IsStartPoint)
            {
                counter++;

                if (counter == sequences.Count)
                {
                    Console.WriteLine("Start {0}", point.Position);
                }
            }
            else
            {
                if (counter == sequences.Count)
                {
                    Console.WriteLine("End   {0}", point.Position);
                    Console.WriteLine();
                }

                counter--;
            }
        }

        Console.ReadLine();
    }
} 
```

输出如下所示。

```
Start 300
End   450

Start 820
End   860 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T18:15:25.133

我认为您可以简单地通过将序列 2 与 2 融合来做到这一点。

每个融合应该在所考虑序列中的间隔数的线性时间内是可行的（如果序列已排序），并且需要 M-1 融合（具有 M 个序列）

以你的例子并添加一个额外的序列：

```
|----------|       |---------------------|           |----------|
     |----------------------|                      |-------|
                |---------------------|                 |--|
        |-----------------------------------|           |-----| 
```

由一对序列融合：

```
 |-----|       |--------|                        |-----|
                |---------------------|                 |--| 
```

再次熔断：

```
 |--------|                           |--| 
```

但是您也许可以找到一种更快的方法来做到这一点。最坏的情况有 O(N log M) 运行时间（N 总间隔数）。

编辑：用于融合的伪代码

```
Take s1 and s2 an iterator on each sequence
While there are still intervals in both sequences
    Compare the intervals:
    If s1.begin < s2.begin
        If s2.begin < s1.end
            If s2.end > s1.end
                Add [s2.begin,s1.end] to the fused sequence
                Increment s1
            Else
                Add [s2.begin,s2.end] to the fused sequence
                Increment s2
        Else
            Increment s1
    Else
        Same thing with s1 and s2 reversed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:53:15.200

它被称为[最长公共子串](http://en.wikipedia.org/wiki/Longest_common_substring_problem#Suffix_tree)。我可以使用后缀树来解决。这个[博客](http://illya-keeplearning.blogspot.com/2009/06/suffix-trees-longest-common-substring.html)上有一个非常干净的 Java 实现，它不仅可以使用两个源字符串。

我不知道你是否在处理角色，但我相信如果你不这样做，你可能会适应它。

# html - 在 Chrome/Safari 中表现有趣的媒体查询

> ID：14264019
> 
> 赞同：2
> 
> 时间：2013-01-10T17:43:01.487
> 
> 标签：html, css, media-queries

我正在开发一个响应式网站，但遇到了表单问题。我有一个包含表单和提交按钮的外部容器。当用户的浏览器达到 524px 或更小时，提交按钮将移动到外部容器下方。在 Firefox 中一切正常，但是当我使用 Safari/Chrome 时，提交按钮不会移回外部容器。

**我在这里有一个问题的例子：[yourl.co](http://www.yourl.co)**

这是我的 HTML：

```
<div id="content">
<div id="formContent">
<form id="forms">
    <input id="email" type="email" class="text" placeholder="You@example.com" name="user[email]"/>
    <input id="submit" type="button" class="text" name="user[submit]" value="Notify Me!"/>
</form>
</div>
</div> 
```

这是我的CSS：

```
#content{
width:100%;
max-width:573px;
height:auto;
margin:45px auto 0 auto;
}
#formContent{
width:99%;
height:56px;
margin:40px auto 0 auto;
background-color:#f6f5f5;
}
#forms{
border:none;
height:51px;
}
#forms #email{
width:75.1%;
height:51px;
border:none;
margin-top:2px;
background-color:#f6f5f5;
margin-left:6px;
}
#forms #email[type="email"]{
font-family:ubuntu-light;
font-weight:100;
font-size:1.875em;
color:#7baec6;
}
#forms #email[type="email"]:focus{
color:#498cab;
outline:none;
}
#forms #submit{
width:21.5%;
height:47px;
float:right;
margin-right:6px;
margin-top:5px;
border:1px solid #0e5779;
cursor:pointer;
}
@media only screen and (max-width: 524px){
#formContent{
    width:95%;
    max-width:524px;
    margin:40px auto 73px auto;
}
#forms #email{
    width:95%;
    border:none;
    margin-top:2px;
    background-color:#f6f5f5;
    margin-left:6px;
}
#forms #submit{
    width:125px;
    margin:12px auto 0 auto;
    float:none;
    display:block;
}
} 
```

如果您需要更多信息，我将很乐意提供。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:53:16.463

如果您将添加`css float: left;`到`#forms #email`所有内容会很好。

你可以在这里测试它：http: [//jsfiddle.net/witchfinderx/qwnXT/1/](http://jsfiddle.net/witchfinderx/qwnXT/1/)

# c# - OpenXML（SAX 方法） - 将行添加到现有选项卡

> ID：14264022
> 
> 赞同：2
> 
> 时间：2013-01-10T17:43:16.397
> 
> 标签：c#, excel, openxml, sax

我正在尝试使用 OpenXML（SAX 方法）创建 Excel 文档。当我的方法被调用时，我想检查是否已经为给定的键创建了一个选项卡。如果是，我只想在该选项卡的底部附加一行。如果尚未为给定键创建选项卡，我将创建一个新选项卡，例如；

```
 part = wbPart.AddNewPart<WorksheetPart>();

                        string worksheetName = row.Key[i].ToString();

                        Sheet sheet = new Sheet() { Id = document.WorkbookPart.GetIdOfPart(part), SheetId = sheetNumber, Name = worksheetName };
                        sheets.Append(sheet);

                        writer = OpenXmlWriter.Create(part);
                        writer.WriteStartElement(new Worksheet());
                        writer.WriteStartElement(new SheetData());

                        currentrow = 1;

                        string header = Header + "\t" + wrapper.GetHeaderString(3, 2, -1); //need to fix
                        WriteDataToExcel(header, currentrow, 0, writer);
                        currentrow++;

                        writer.WriteEndElement();
                        writer.WriteEndElement();
                        writer.Close(); 
```

如果已经创建了一个选项卡，我会使用以下代码回忆工作表；

```
private static WorksheetPart GetWorksheetPartByName(SpreadsheetDocument document, string sheetName)
    {
        IEnumerable<Sheet> sheets =
           document.WorkbookPart.Workbook.GetFirstChild<Sheets>().
           Elements<Sheet>().Where(s => s.Name == sheetName);

        if (sheets.Count() == 0)
        {
            // The specified worksheet does not exist.

            return null;
        }

        string relationshipId = sheets.First().Id.Value;
        WorksheetPart worksheetPart = (WorksheetPart)
             document.WorkbookPart.GetPartById(relationshipId);
        return worksheetPart;

    } 
```

当返回正确的 Worksheet 部分时，我尝试通过将 OpenXmlWriter 指向正确的部分然后添加行来添加新行；

```
 part = GetWorksheetPartByName(document, row.Key[i].ToString());

                        writer = OpenXmlWriter.Create(part);
                        writer.WriteStartElement(part.Worksheet);
                        writer.WriteStartElement(part.Worksheet.GetFirstChild<SheetData>());
                        SheetData sheetData = part.Worksheet.GetFirstChild<SheetData>();
                        Row lastRow = sheetData.Elements<Row>().LastOrDefault(); 
```

代码运行但是我总是只得到一行（我第一次创建选项卡时添加的初始行）。电子表格中不会显示后续行。

我将添加很多行（50,000+），并且不希望每次都创建新文件并复制信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:10:57.140

根据我的经验，使用 SAX 方法编写（即使用 OpenXmlWriter）最适合新事物（部件、工作表等）。当您使用 OpenXmlWriter.Create() 时，这就像覆盖部件（在本例中为 WorksheetPart）的原始现有数据。即使实际上，它不是。情况很复杂。

就我的实验而言，如果有现有数据，则无法使用 OpenXmlWriter 编辑数据。即使您使用 Save() 函数或正确关闭 OpenXmlWriter 也不行。出于某种原因，SDK 会忽略您的努力。因此，您添加的原始一行。

如果您要写入 50,000 行，最好一次性完成。那么 SAX 方法将很有用。此外，如果您正在编写一行（一次？），使用 SAX 与 DOM 方法相比的速度优势可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T04:05:44.547

根据此站点[使用现有 Excel 与 OpenXMLWriter 一起工作](https://social.msdn.microsoft.com/Forums/office/en-US/5a773857-e554-43a0-98f3-1026051d7ca2/how-to-insert-value-in-to-particular-cell-in-excel-document-which-is-created-from-template?forum=oxmlsdk)：OpenXMLWriter 只能操作新工作表而不是现有文档。因此，恐怕您无法使用 OpenXMLWriter 将值插入到现有电子表格的特定单元格中。

您可以读取现有 Excel 文件中的所有数据，然后似乎您需要添加行（50,000+）我建议使用 openxmlwriter 将新旧数据一次写入新的 Excel 文件。如果您使用 DOM 方法，在追加大量行（50,000+）后可能会导致内存问题。

# ruby-on-rails - 为什么我对 if 语句的看法不能正常工作？

> ID：14264032
> 
> 赞同：0
> 
> 时间：2013-01-10T17:43:54.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我得到这个输出。输出中显示的数字是`post.user.id`。
如果 id 不同，则气泡应该来回切换。
但即使不是同一个人，它也会判断它是同一个人。
为什么？

**电流输出**

```
2            Good, you?          > Person B
1            How have you been?  > person A
2            What's up?          > person B
Person A < Hello!!!!               1 
```

**我不是这个输出**

```
2            Good, you?          > Person B
Person A < How have you been?      1
2            What's up?          > person B
Person A < Hello!!!!               1 
```

**看法**

```
<% who = "" %>
<% @posts.each do |post| %>

    <tr id="<%= dom_post_id(post) %>">

        <% if post.user.id == who %>
            <td><%= post.user.nickname if post.user %></td>
            <td><div class="bubble me"><%= post.body %></div></td>
            <td><%= post.user.id %></td>
        <% else %>
            <td><%= post.user.id %></td>
            <td><div class="bubble you"><%= post.body %></div></td>
            <td><%= post.user.nickname if post.user %></td>     
        <% end %>
    </tr>
    <% who = post.user.id %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:12:56.783

您应该像这样重构您的代码：

```
<% user_id_for_left_side = @posts.first.try(:user_id) %>
<% @posts.each do |post| %>

  <tr id="<%= dom_post_id(post) %>">    
    <% if post.user_id == user_id_for_left_side %>
      <td><%= post.user.nickname %></td>
      <td><div class="bubble me"><%= post.body %></div></td>
      <td><%= post.user_id %></td>
    <% else %>
      <td><%= post.user_id %></td>
      <td><div class="bubble you"><%= post.body %></div></td>
      <td><%= post.user.nickname %></td>     
    <% end %>
  </tr>

<% end %> 
```

**为什么使用`post.user_id`而不是`post.user.id`？** 因为做`post.user_id`是使用的资源比`post.user.id`.

**为什么要删除`if post.user`？** 每个 Post 都属于一个 User 是隐含的（您应该在 Post 模型上对属性进行存在验证`user_id`）。这意味着帖子始终与用户关联，无需检查其存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:23:16.110

```
<% who = -1 %>
<% @posts.each do |post| %>

    <% if who == -1 %>
        <% who = post.user.id %>
    <% end %>

    <tr id="<%= dom_post_id(post) %>">

        <% if post.user.id == who %>
            <td><%= post.user.nickname if post.user %></td>
            <td><div class="bubble me"><%= post.body %></div></td>
            <td><%= post.user.id %></td>
        <% else %>
            <td><%= post.user.id %></td>
            <td><div class="bubble you"><%= post.body %></div></td>
            <td><%= post.user.nickname if post.user %></td>     
        <% end %>
    </tr>

<% end %> 
```

添加的`if`块会将变量设置`who`为循环遇到的第一个帖子的用户的 id，然后不再设置它。在此之后的每次循环迭代中，每次帖子都有该 id 时，昵称将在左侧`post.user.id`。`who`对于具有不同 id 的帖子，昵称将在右侧。

# haskell - 模板 Haskell 和隐式参数

> ID：14264033
> 
> 赞同：6
> 
> 时间：2013-01-10T17:43:56.027
> 
> 标签：haskell, template-haskell, implicit-parameters

有没有办法使用模板haskell创建带有隐式参数的函数或让带有隐式参数的绑定？

即是否可以使用模板haskell生成这样的签名：

```
 doSomething :: (?context :: Context) => m a 
```

或者像这样的调用：

```
 invoc = let ?context = newContext in doSomething 
```

[在模板 haskell 的 API 文档](http://www.haskell.org/ghc/docs/7.4.2/html/libraries/template-haskell-2.7.0.0/Language-Haskell-TH.html)中，我找不到合适的代数数据类型或任何可以帮助我解决此主题的函数。我正在使用 GHC 7.4.2。

如果在模板 haskell 中没有对这个扩展的原生支持，是否还有其他可能在编译期间注入代码（可能类似于模板 haskell 中的一般“代码注入功能”？）。

***编辑：***我尝试了评论中的建议，这就是发生的事情：

```
runQ [d| f :: (?c :: String) => Int ; f = 7 |]

<interactive>:10:17: parse error on input `c' 
```

而这有效：

```
 runQ [d| f :: Int ; f = 7|]
 [SigD f_0 (ConT GHC.Types.Int),ValD (VarP f_0) (NormalB (LitE (IntegerL 7))) []] 
```

似乎不支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:52:34.810

这是一种非常脆弱但有效的方法。虽然您不能在模板 haskell 使用的 Exp 中引用 ?x ，但您可以引用另一个模块中的定义，例如：

```
reserved_prefix_x = ?x 
```

下面是一些代码，它们在一次 ghc 运行中生成类似于上面的变量，而在第二次运行 ghc 中，变量实际上是指隐式参数。

```
{-# LANGUAGE TemplateHaskell, NoMonomorphismRestriction #-}
module GenMod (h) where

import Data.Generics
import Data.IORef
import Data.List
import Language.Haskell.Meta.Parse as P
import Language.Haskell.TH
import Language.Haskell.TH.Quote
import Language.Haskell.TH.Syntax
import qualified Data.Set as S
import qualified Language.Haskell.Exts.QQ as Q
import System.IO.Unsafe

h = Q.hs { quoteExp = \s -> do
    r <- either fail (upVars . return) (P.parseExp s)
    writeMod'
    return r
    }

pfx = "q_"

{-# NOINLINE vars #-}
vars :: IORef (S.Set String)
vars = unsafePerformIO (newIORef S.empty)

writeMod' = runIO $ writeFile "GEN.hs" . ppMod =<< readIORef vars

writeMod = -- might be needed to avoid multiple calls to writeFile?
           -- in this example this is called for every use of `h'
    QuasiQuoter { quoteDec = \ _ -> do
                    writeMod'
                    [d| _ = () |] }

ppMod xs = "{-# LANGUAGE NoMonomorphismRestriction, ImplicitParams #-}\n\
            \module GEN where\n" ++
    unlines (map (\x -> pfx ++ x ++ " = ?" ++ x) (S.toList xs))

upVars x = do
    x' <- x
    runIO $ modifyIORef vars (S.union (getMatchingVars x'))
    runIO $ print =<< readIORef vars
    return x'

getMatchingVars =
    everything
        S.union
        (mkQ S.empty
            (\ (OccName x) -> maybe S.empty S.singleton (stripPrefix pfx x))) 
```

使用 quasiquoter GenMod.hs 的 Main.hs 文件：

```
{-# LANGUAGE NoMonomorphismRestriction, ImplicitParams, QuasiQuotes, TemplateHaskell, CPP #-}
import GenMod

#ifndef stage1
import GEN
#endif

f_ = [h| q_hithere |] 
```

您必须调用 ghc 两次，例如：

```
ghci -Dstage1 Main.hs
GHCi, version 7.6.1: http://www.haskell.org/ghc/  :? for help
[1 of 2] Compiling GenMod           ( GenMod.hs, interpreted )
[2 of 2] Compiling Main             ( Ex.hs, interpreted )
fromList ["hithere"]

Ex.hs:8:6: Not in scope: `q_hithere'
Failed, modules loaded: GenMod. 
```

尽管 ghc 失败，它仍然会生成 GEN.hs，其中包含：

```
{-# LANGUAGE NoMonomorphismRestriction, ImplicitParams #-}
module GEN where
q_hithere = ?hithere 
```

加载 Main 时会出现哪个（省略 -D 标志）

```
*Main> :t f_
f_ :: (?hithere::t) => t 
```

这种麻烦恐怕不值得。也许从 TH 调用其他程序的其他情况更有动力，例如对其他语言的内联调用[http://hpaste.org/50837（gfortran](http://hpaste.org/50837)示例）

由于我使用了 haskell-src-meta 的默认解析器，准引用开始使用变量“reserved_prefix_x”而不是“?x”。应该可以毫不费力地接受“?x”。

# java - 单独的类/方法中的方法实例？

> ID：14264035
> 
> 赞同：1
> 
> 时间：2013-01-10T17:44:00.130
> 
> 标签：java, class, methods, instance

我正在创建一个最终幻想角色的小游戏，在其中我输入我想“战斗”的人的名字我将每个角色（只有 5 个）作为一个名为 Stats 的超类的子类，其中变量（非static) 和 getter/setter 被定义。

代码都可以按我的意愿工作，但我不喜欢这一切都在一个巨大的类中。

Main方法在这里；

```
package com.George.revision;

import java.util.Random;

import com.George.characters.Cloud;
import com.George.characters.Squall;
import com.George.characters.Stats;
import com.George.characters.TheEnemy;
import com.George.characters.ThePlayer;
import com.George.characters.Tidus;
import com.George.characters.Yuna;
import com.George.characters.Zidane;
import com.George.input.GetInput;
import com.George.input.ListNames;

public class Main {

    public static void main(String[] args) {

        ListNames.listNames();

        Stats clo = new Cloud();
        Stats squ = new Squall();
        Stats zid = new Zidane();
        Stats tid = new Tidus();
        Stats yun = new Yuna();

        String versus = GetInput.getInput("\nWhich of these Characters would you like to go up against?");

        Stats ene1 = new TheEnemy();

        switch (versus) {
        case "Cloud":
            ene1.setName(Names.CLOUD);
            ene1.setHairColor(Stats.BLONDE);
            ene1.setWep(Weapons.BUSTER_SWORD);
            ene1.setSkill(clo.skill);
            ene1.setAp(clo.ap);
            ene1.setStr(clo.str);
            ene1.setMag(clo.mag);
            break;
        case "Squall":
            ene1.setName(Names.SQUALL);
            ene1.setHairColor(Stats.BLACK);
            ene1.setWep(Weapons.LIONHEART);
            ene1.setSkill(squ.skill);
            ene1.setAp(squ.ap);
            ene1.setStr(squ.str);
            ene1.setMag(squ.mag);
            break;
        case "Zidane":
            ene1.setName(Names.ZIDANE);
            ene1.setHairColor(Stats.LIGHTBROWN);
            ene1.setWep(Weapons.THIEF_DAGGER);
            ene1.setSkill(zid.skill);
            ene1.setAp(zid.ap);
            ene1.setStr(zid.str);
            ene1.setMag(zid.mag);
            break;
        case "Tidus":           
            ene1.setName(Names.TIDUS);
            ene1.setHairColor(Stats.BLONDE);
            ene1.setWep(Weapons.CALADBOLG);
            ene1.setSkill(tid.skill);
            ene1.setAp(tid.ap);
            ene1.setStr(tid.str);
            ene1.setMag(tid.mag);
            break;
        case "Yuna":
            ene1.setName(Names.YUNA);
            ene1.setHairColor(Stats.DARKBROWN);
            ene1.setWep(Weapons.NIRVANA);
            ene1.setSkill(yun.skill);
            ene1.setAp(yun.ap);
            ene1.setStr(yun.str);
            ene1.setMag(yun.mag);
            break;
        default:
            System.out.println("You did not enter a valid character name");
            break;

        } 
        System.out.println("You have chosen to face " + ene1.name);
        System.out.println("Enemy Skill = " + ene1.skill + " Enemy Weapon = " + ene1.wep);

        System.out.println("Enemy Skill = " + ene1.skill + " Enemy Weapon = " + ene1.wep);

        int eneTotal = ene1.skill + ene1.ap + ene1.str + ene1.mag;

        Stats player = new ThePlayer();

        String plN = GetInput.getInput("What is your name?");
        player.playerName = plN;        
        System.out.println("So Your name is " + player.playerName);

        String plWep = GetInput.getInput("What is your Weapon's name?");
        player.playerWep = plWep;
        System.out.println("So your Weapon is " + player.playerWep);

        Random generator = new Random();
        int plSkill = generator.nextInt(10);
        player.skill = plSkill;
        System.out.println("Your skill level is " + player.skill);

        Random gn = new Random();
        int plAp = gn.nextInt(10 - 5) + 5;
        System.out.println("So your Attack Power is " + plAp);
        player.ap =  plAp;

        Random gns = new Random();
        int plStr = gns.nextInt(10);
        System.out.println("So your Strength is " + plStr);
        plStr = player.str;

        Random gnm = new Random();
        int plMag = gnm.nextInt(10 - 5) + 5;
        player.mag = plMag;
        System.out.println("So your Magic is " + player.mag);

        int plHax = 15;
        double doubleResult = plHax;

        double ene1Hax = 3.99;
        int intResult = (int)ene1Hax;

        double doubleValue = 6.99;
        Double doubleObj = new Double(doubleValue);
        int intR = doubleObj.intValue();

        System.out.println(intR);

        int plyrTotal = player.skill + player.ap + player.str + player.mag;

        if (plyrTotal > eneTotal) {
            System.out.println("Congratulations you beat " + ene1.name + " Please Play Again!" );

        } else if (plyrTotal == eneTotal) {
            System.out.println("You drew with " + ene1.name + " Play again and Win!");
        }
        else
        {
            System.out.println("You were not succesful this time " + ene1.name + " Defeated you by " + (eneTotal - plyrTotal) + " Please Try Again");

        }

    }

} 
```

现在，在此之后，我有更多代码为玩家“统计数据”和角色生成随机数，然后匹配他们统计数据的总值以确定“获胜者”，我想将其放入单独的类中。我的问题是，

如何使用在 Main 类的 switch 语句中输入的值在单独的类中获取 ene1。

为了清楚起见，更新为完整的主要方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:50:19.653

您遇到的问题之一是您将 Enemy 指定为 Stats 的子类，但与您的角色无关。因此，虽然敌人具有与角色相同的属性，但与角色没有关系。与其复制名称和颜色等所有这些值，不如让 Enemy 成为拥有 Stats 值的自己的实体，与 stats 共享接口。然后敌人可以使用该接口调用 Stats 类中的各种方法。

```
public class Static implements Actions{
    // ...
}

public class Enemy implements Actions{
   private Static characterType;
} 
```

也供将来参考，您能否将您的问题设计得更通用？它不仅可以帮助那些不了解参考文献的人，还可以让有类似问题的人更容易找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:53:32.263

您可以将它传递给该类的方法（或构造函数），就像传递任何其他变量或文本一样。IE

```
 clo.setOpponent(ene1); 
```

然后让 setOpponent 的实现是这样的

```
 class Stats
 {
      private Stats opponent;
      //ALL OF YOUR OTHER CODE AND METHODS GO HERE

      public void setOpponent(Stats enemy)
      {
          opponent = enemy;
      }
 } 
```

这没有考虑到您的应用程序糟糕的 OO 设计，它只回答了您的问题。更好的设计伴随着更多的实践和一些学习（查找 IS-A 和 HAS-A 关系以帮助基本 OO 设计）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:16:01.443

在您的特定示例中，我建议对敌人进行枚举，而不是使用类层次结构，因为您对所有敌人实体都有相同的字段，并且您在这里没有使用任何外部存储（如数据库、文件或其他）。

当您有多个具有相似性和区别的实体时，类层次结构更适合这种情况。例如，您可以为普通敌人设置一个等级，为具有某些超级技能的“强制”敌人设置一个等级，因此第二个等级将继承第一个等级并具有 1 个附加字段。这使您可以减少代码重复并提供足够的灵活性。此外，当您希望将此实体保存在某些存储（例如 DB）中时，类层次结构为您提供了更多好处。

但是在您的情况下，使用单个 Enum 来拥有一组敌人更为合乎逻辑，这些敌人是“硬编码”到应用程序中的。我建议下一个解决方案：

```
public enum Enemy {
    CLOUD("Cloud", "Red", "Sword", 10),
    SQUALL("Cloud", "Black", "Minigun", 999)
    // and so on
    ;

    public String name;
    public String hairColor;
    public String wep;
    public int skill;

    Enemy(String name, String hairColor, String wep, int skill /* and so on */) {
        this.name = name;
        this.hairColor = hairColor;
        this.wep = wep;
        this.skill = skill;
    }

    public static Enemy getByName(String name) {
        for (Enemy enemy : Enemy.values()) {
            if (enemy.name.equalsIgnoreCase(name)) {
                return enemy;
            }
        }
        throw new IllegalArgumentException("Enemy with the name `" + name + "` doesn't exist.");
    }
} 
```

然后可以通过键名在主类中初始化一个敌人：

```
String versus = GetInput.getInput("\nWhich of these Characters would you like to go up against?");
try {
    Enemy enemy = Enemy.getByName(versus);
} catch (IllegalArgumentException e) {  // processing incorrect input
    System.out.println(e.getMessage());
} 
```

然后你可以将此常量传递给任何其他类来处理它并计算你想要的任何东西：

```
public class FightCalculator {
    public int calculateScore(Enemy enemy) {
         // Some calculations here...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:26:37.163

它可能有助于创建单独的`Hero`和`Enemy`类。或者，如果你的角色不是“好”或“坏”的人，也许只是一个`Character`班级。对于以下讨论，我将简单地使用`Character`，但您可以将其替换为`Hero`or `Enemy`，它应该仍然有意义。

`Character`首先， a和 a是什么关系`Stats`。我认为 a`Characater` *有一个* `Stats`. 这意味着`Character`应该有一个类型的成员变量`Stats`：

```
class Character {
    private Stats stats = new Stats();
} 
```

现在您可以添加一个构造函数来`Stats`为`Character`. 这意味着`Character`需要为存储在 a 中的每个值采用多个参数`Stats`。这种方法的一个优点是您只需编写一次代码来设置一个`Stats`对象，然后每个`case`语句只有 1 行：

```
ene1 = new Character(/* all the stats values go here */); 
```

这里的故事的寓意是，当您发现自己重复代码时，您应该考虑编写一个封装该重复的方法。

# javascript - 更新后的 webkit 动画非常慢

> ID：14264039
> 
> 赞同：1
> 
> 时间：2013-01-10T17:44:20.823
> 
> 标签：javascript, jquery, google-chrome, animation, webkit

我有一个滑块，现在在最新版本的 chrome 和 safari 中完全无法使用，旧版本显示它很好。在开发它时，我测试了 chrome、firefox 和 IE，它们都运行良好（除了旧 ie 中的一些样式问题，但动画很好）。

它的最小测试用例在这里 [http://www.thetrainingconcept.co.uk/error.htm](http://www.thetrainingconcept.co.uk/error.htm)

可以在这里找到 javascript [http://assets.thetrainingconcept.co.uk/www/js/plugins/jquery.feature-slide.js?v=1.0.0](http://assets.thetrainingconcept.co.uk/www/js/plugins/jquery.feature-slide.js?v=1.0.0)

我根本无法弄清楚这一点，没有 js 错误，我对其进行了分析，看起来还不错。我尝试制作一个简单的测试用例来分析它，但得到了完全相同的行为。

我真的希望有人知道这里出了什么问题。

***编辑：***我还要注意，我已经搜索了高低，阅读了许多“chrome 中的慢动画”问题，但没有任何帮助。请记住，在最近影响 chrome 和 safari 的更新之前，这工作得非常好。我使用的 chrome 版本是 23.0.1271.97 m，如果您有旧版本，它可能会正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:58:25.770

我已经想通了。在我看来，答案并不明显，如果是针对其他人，他们可以向我解释一下吗？

因此， animate.css 适用`-webkit-backface-visibility:hidden;`于 body 标签。出于某种原因，这导致了我在 javascript 动画中遇到的所有问题都很糟糕。幸运的是，我没有使用该库中的 3D 动画，所以我可以删除它并解决我的问题。

现在，我不确定这是 webkit 中的错误还是 animate.css 中的错误，我倾向于它是 webkit 的问题，因为我不明白为什么该属性会导致它没有css动画。

[http://daneden.me/animate/](http://daneden.me/animate/) - css 动画库 [http://css-tricks.com/almanac/properties/b/backface-visibility/](http://css-tricks.com/almanac/properties/b/backface-visibility/) - 关于 backface-visibility 属性的更多解释

# session - Stateless bean 与 EntityManager 一起操作可以解决“用户思考时间”的问题

> ID：14264042
> 
> 赞同：0
> 
> 时间：2013-01-10T17:44:26.347
> 
> 标签：session, jpa, ejb, ebean, optimistic-locking

阅读[这些](http://www.avaje.org/jpa.html)笔记。在 EBean 站点页面上。有一段包含：

> “使用 EJB3 容器管理 EntityManager 的自然方法是使用有状态会话 Bean。”

还有一个暴露的问题，比如

> “如何在“用户思考时间”管理EntityManager？

因此，问题是：EJB 无状态 bean 做什么/提供什么可以解决“用户思考时间”所提到的问题？

我猜 ejb 提供：“会话管理”，但是将会话存储在 ThredLocal 变量上并按需提供给用户有什么问题？并且不要使用EJB。ejb 是否为此提供了一站式解决方案？

我的意思是，文章说：由于这个问题，使用 Session（在休眠中）或 EntityManager 的概念是不好的。因此，它说：根本不需要使用它，除非您使用 EJB 无状态 bean 或者您能够自己提供会话管理机制（这应该很难实现？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:14:39.540

首先，请记住，整篇文章的重点是在*容器外运行时*管理 EntityManager 的问题。原因是容器管理的 JPA 在您使用`@PersistenceContext`.

我不知道“用户思考时间”是什么，所以我不知道需要解决什么问题。正如您所注意到的，如果由于某种原因您不能使用容器管理的 JPA，您可以使用 ThreadLocal 来管理您的 EntityManager。当然，您必须小心正确清除和限定 ThreadLocal 的内容。

归根结底，如果您投入足够的努力，EJB 提供的东西很少是您自己做不到的。选择使用 EJB 与选择使用任何其他库/架构相同：其他人维护、改进等，但您必须适应基础架构。EJB 可能有一点优势，因为它由许多公司实施的标准支持。

# iphone - Objective-C 中的非原子和只读属性

> ID：14264044
> 
> 赞同：3
> 
> 时间：2013-01-10T17:44:32.510
> 
> 标签：iphone, objective-c, macos, cocoa, properties

有几次我已经想建造一处房产，`nonatomic`同时`readonly`也是。

这样做的好处是我可以覆盖 getter 并检查是否已经创建了实例。如果没有，我可以简单地创建它。

同时我可以保护它不被覆盖。

* * *

## 。H

```
@property (strong, readonly, nonatomic) Foo *bar; 
```

* * *

## .m

```
- (Foo *)bar {
    if (!_bar) {
        _bar = [[Foo alloc] init];
    }

    return _bar;
} 
```

* * *

每当我这样做时，编译器都不会为我创建实例变量，因此`_bar`不存在。

为什么？如何创建`readonly` `nonatomic`属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T17:52:22.003

您的财产声明是正确的。我相信这里的问题是，因为您的属性被声明为`readonly`，编译器没有自动合成底层实例变量。在这种情况下，解决方案是使用自己合成一个......

`@synthesize bar = _bar;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:51:22.227

您可以创建一个私人二传手：

```
@interface YourClass()  // In the .m file 

@property (strong, readwrite, nonatomic) Foo *bar;

@end 
```

然后在分配变量时：

```
self.bar = [[Foo alloc] init]; 
```

**编辑**

马克亚当的回答也是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:57:16.037

在实现中添加@synthesize bar = _bar。

# dynamics-crm-2011 - 为来自插件的服务调用缓存每个用户的主体对象

> ID：14264050
> 
> 赞同：1
> 
> 时间：2013-01-10T17:44:54.660
> 
> 标签：dynamics-crm-2011, dynamics-crm

我有一个 Microsoft Dynamics CRM 实施（2010 年或 2011 年不是 100% 肯定）。这个CRM系统需要从插件调用我们内部的服务框架服务。

为了调用服务框架，我们使用带有登录方法的 API，该方法进入 STS 并获取安全令牌。这是针对每个用户进行身份验证并获取用户声明的。登录调用返回一个 IPrincipal 对象，我们将其放在 Thread.CurrentPrincipal 属性上，从那时起，我们可以使用我们的框架调用服务，并且由于执行线程上的主体，用户在每次调用时都经过身份验证。

在 asp.net 网站中，我们通常将用户登录并立即去 STS 获取令牌，然后在会话中为用户缓存该令牌，因为登录不是我们每次想要调用服务时都想做的事情.

我将如何使用 CRM 插件来做到这一点。我是否有权访问每个用户的会话存储？我注意到 IServiceProvider 是作为参数传入的，我可以将服务添加到此容器并使用某种线程安全字典在服务中解决此问题吗？我对 CRM 开发知之甚少，我什至想知道插件是否是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:59:07.460

该插件会定期创建和清理，您将无法在任何时间段内存储任何内容（或至少存储它并依赖它在那里）。

您可能会将其存储在自定义实体中，但如果这是可能的？

例如 - 为 x 事件调用插件

*   从插件获取 CallingUser

*   为用户搜索 MyCustomSTS 实体

*   查看令牌是否存在和/或已过期

*   如果你有令牌 - 万岁

*   如果没有，跑过去抓一个

当然，这可能比每次重新验证都需要更长的时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:27:13.577

您是为个人用户还是为服务帐户获取令牌？

理想情况下，您应该将插件编写为无状态的。

[编写插件](http://msdn.microsoft.com/en-gb/library/gg328263.aspx)

> 为了提高性能，Microsoft Dynamics CRM 缓存插件实例。插件的 Execute 方法应该写成无状态的，因为不是每次调用插件都会调用构造函数。此外，多个系统线程可以同时执行插件。所有每次调用的状态信息都存储在上下文中，因此您不应使用全局变量或尝试将任何数据存储在成员变量中以供下次插件调用期间使用，除非该数据是从提供给构造函数的配置参数中获取的。插件注册的更改将导致插件重新初始化。

如果您要为单个用户获取令牌，则可以将其保存在 CRM 中的某个地方，但正如 glossrob 所建议的那样，这种方法存在许多问题。在这种情况下，最好每次都进行身份验证。

如果它用于服务帐户，您可以违背 Microsoft 的建议并将令牌缓存在内存中。从逻辑上讲，只要您编写代码以对随机丢失并不得不重新获取其令牌感到满意，您就应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:08:48.720

我同意那些说每次身份验证都是更好的解决方案的人的观点，但是如果您需要存储令牌，您可以创建自定义 CRM 实体并编写逻辑来处理插件中存储在 CRM 中的令牌。

# activemq - 如果使用 pooledconnectionfactory，我需要关闭 activemq 连接吗

> ID：14264053
> 
> 赞同：1
> 
> 时间：2013-01-10T17:44:57.097
> 
> 标签：activemq

我正在使用 activemq PooledConnectionFactory 创建连接。我正在创建线程，每个线程都有自己的连接、会话和生产者。我有两个疑问： 1\. 我是否需要自己在代码中关闭连接、会话、生产者，或者一旦生产者成功发送消息，pooledConnectionFactory 会这样做。2\. 为每个线程（最终为每条消息）创建连接将成为性能瓶颈。是否有可能只有一个连接，其中包含许多会话（或者会话和连接之间应该存在一对一的映射，我想我在 activemq 网站的某个地方读到了这个）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:26:46.370

您需要像使用任何其他 JMS Connection、Session 和 Producer 一样使用代码。检测线程何时完成并没有什么魔力，您需要将其关闭，这会将其返回到池中。您只能使用一个连接并从中获取多个会话，但您需要关闭它们，以便它们返回池以便按需分发给其他人。

# windows - Visual Studio 2012 Windows 内核调试 - 无法配置 VM 目标

> ID：14264058
> 
> 赞同：2
> 
> 时间：2013-01-10T17:45:19.900
> 
> 标签：windows, debugging, visual-studio-2012, kernel, virtualbox

*   *主机：* Visual Studio 2012、Windows 8 主机、WDK8
*   *目标：* VirtualBox - Windows 7

当我尝试在 Visual Studio 中添加目标计算机（驱动程序 -> 测试 -> 配置计算机）时（如[http://msdn.microsoft.com/en-us/library/windows/hardware/hh439359%28v=vs. 85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439359%28v=vs.85%29.aspx) ):

*   我选择“配置计算机并选择调试器设置”
*   我选择使用串行连接
*   但结果始终是“找不到*VM 名称的*主机条目”

如果我尝试通过网络连接，VS 会给出相同的响应（我知道不支持通过网络进行从 Win8 主机到 Win7 目标的内核调试）。

我看不出连接有问题；在点击 Debug -> Break（否则，我点击*Waiting to reconnect...*消息）后，没有提供的连接工作。

任何人都能做到这一点，或者对如何在 VirtualBox 中调试 Windows 操作系统有更好的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T20:23:44.637

您不应选择调试器选项来配置目标，因为调试器文档指出“虚拟机不支持配置”。（请参阅此页面：[为驱动程序部署和测试配置计算机](https://msdn.microsoft.com/library/windows/hardware/dn745909)。）这很可能是因为配置需要到目标的网络连接，无论您选择如何连接实际内核调试会话。

正如您已经观察到的，没有配置的连接工作得很好，所以您可以这样做。确保您已将目标上的虚拟串行端口正确连接到名为管道的主机。

在任何情况下，配置对于运行内核调试器并不是绝对必要的。它只是一种方便，自动启用目标上的内核调试，进行一些其他有用的配置更改，并安装一组有用的工具。您可以在此页面上看到配置的作用：[配置计算机时会发生什么？](https://msdn.microsoft.com/windows-drivers/develop/what_happens_when_you_provision_a_computer__wdk_8_1_)

以下是设置 VM 内核调试的一些一般指导：[在 Visual Studio 中设置虚拟机的内核模式调试](https://msdn.microsoft.com/library/windows/hardware/jj200334)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T07:15:00.710

此链接[Kernel-Mode Debugging in a VM using Visual Studio 2012](https://www.codeproject.com/Tips/545835/Kernel-Mode-Debugging-in-a-VM-using-Visual-Studio)描述了如何预配到虚拟机。您需要以主机和来宾可以相互ping通的方式配置网络。之后，您需要更新两台计算机上的“主机”（将客户机的 ip 和 NetBIOS 添加到主机“主机”文件，将主机的 ip 和 NetBIOS 添加到客户机“主机”文件）。

# android - 在获取请求android上设置标题

> ID：14264060
> 
> 赞同：0
> 
> 时间：2013-01-10T17:45:24.283
> 
> 标签：android, http-headers

我尝试使用 android 设置 http autentification

这是我的课

[http://pastebin.com/SB9TKtQZ](http://pastebin.com/SB9TKtQZ)

我这样用

```
EditText user = (EditText)findViewById(R.id.referent_login_input);
EditText password = (EditText)findViewById(R.id.referent_password_input);

Api login = new Api(getString(R.string.api_url));
login.updateUrl("login");
login.updateHeader(user.getText().toString(), password.getText().toString());
String connect = login.get(); 
```

我的PHP是

```
if( !isset($_SERVER['PHP_AUTH_USER']) && !isset($_SERVER['PHP_AUTH_PW']) ) {
    echo "no !!!";
}
else {
    echo "yes";
} 
```

我总是没有！

我在我的 EditText 中设置了一些东西

谢谢

# wpf - 扩展器列表框不像单选按钮

> ID：14264064
> 
> 赞同：0
> 
> 时间：2013-01-10T17:45:39.057
> 
> 标签：wpf, radio-button, expander

我已经创建了一个类似这个问题的扩展器列表框： [Expander Auto Open/Close](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/d0a66a22-db2c-439e-8938-3c7f8160185b)

当列表框是窗口上的唯一项目时，该解决方案适用于扩展器中的内容。

但是当我尝试对自定义控件使用相同的代码时，我收到了这个错误：

> System.Windows.Data 错误：4：找不到与引用'RelativeSource FindAncestor，AncestorType='System.Windows.Controls.ListBoxItem'，AncestorLevel='1''的绑定源。绑定表达式：路径=IsSelected；数据项=空；目标元素是'扩展器'（名称=''）；目标属性是“IsExpanded”（类型“布尔”）

我尝试将 ListBox.ItemContainerStyle 中的 IsSelected 属性添加为另一个线程中建议的海报，但失败了。

```
<ListBox Margin="5"
         SelectionMode="Single"
         ScrollViewer.VerticalScrollBarVisibility="Auto">
    <ListBox.Resources>
        <Style TargetType="{x:Type Expander}">
             <Setter Property="IsExpanded"
                     Value="{Binding Path=IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}" />
        </Style>
        <Style TargetType="{x:Type controls:SelectionCriteriaControl}">
             <Setter Property="MaxHeight"
                     Value="200" />
        </Style>
    </ListBox.Resources>
    <Expander Header="Fund Family" Margin="2">
        <StackPanel>
            <controls:SelectionCriteriaControl DataContext="{Binding FundFamilySelectionCriteria, Mode=TwoWay}" />
        </StackPanel>
    </Expander>
    <Expander Header="Asset Class" Margin="2">
        <StackPanel>
            <controls:SelectionCriteriaControl DataContext="{Binding AssetClassSelectionCriteria, Mode=TwoWay}" />
        </StackPanel>
    </Expander>
    <ListBox.Template>
        <ControlTemplate TargetType="{x:Type ListBox}">
            <ItemsPresenter />
        </ControlTemplate>
    </ListBox.Template>
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <ContentPresenter Content="{TemplateBinding Content}" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

惨败！！！！

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:57:12.737

对我来说，目前设置的场景有点大，但我想到了一些尝试：

```
Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsSelected}" /> 
```

我不认为在哪里使用模板可以按类型定义相对源。

编辑：此代码运行良好：根据您的原始代码，不需要 TemplatedParent。

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition Height="auto"/>
    </Grid.RowDefinitions>
    <ListBox x:Name="testList" Margin="5"
     SelectionMode="Single"
     ScrollViewer.VerticalScrollBarVisibility="Auto">
        <ListBox.Resources>
            <Style TargetType="{x:Type Expander}">
                <Setter Property="IsExpanded"
                 Value="{Binding Path=IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}" />
            </Style>
        </ListBox.Resources>
        <Expander Header="Fund Family" Margin="2">
            <StackPanel>
                <TextBlock Text="First"/>
                <TextBlock Text="Second"/>
            </StackPanel>
        </Expander>
        <Expander Header="Asset Class" Margin="2">
            <StackPanel>
                <TextBlock Text="First"/>
                <TextBlock Text="Second"/>
            </StackPanel>
        </Expander>
        <ListBox.Template>
            <ControlTemplate TargetType="{x:Type ListBox}">
                <ItemsPresenter />
            </ControlTemplate>
        </ListBox.Template>
        <ListBox.ItemContainerStyle>
            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ListBoxItem}">
                            <ContentPresenter Content="{TemplateBinding Content}" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox>
    <Button HorizontalAlignment="Left" Content="Test" Grid.Row="1" Width="60" Click="Button_Click"/>
</Grid> 
```

以及触发程序`SelectedIndex`集的快速代码隐藏...

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        testList.SelectedIndex = 1;
    } 
```

似乎对我来说工作得很好。单击列表项展开，甚至使用按钮通过设置它展开的选定索引来专门设置它。一些非常可疑的东西正在影响您的特定场景...... :]

# api - Symfony2 上通过外部 API 配置用户身份验证的问题

> ID：14264066
> 
> 赞同：3
> 
> 时间：2013-01-10T17:45:49.900
> 
> 标签：api, authentication, symfony, external

我在为我的新 Symfony2 应用程序验证用户时遇到问题。

该应用程序通过 API 获取所有信息，因此不使用数据库。当用户进入登录页面时，他会在登录表单中介绍用户名和密码。然后，我必须使用 API 调用对他进行身份验证。如果不是用户，则此 API 调用返回“false”，如果是正确的用户，则返回令牌密钥和令牌密钥。使用这个令牌密钥和秘密，在用户会话期间，我可以发出渲染应用程序所有页面所需的所有 API 请求。一旦用户会话结束并且令牌密钥和秘密被删除，用户必须再次登录。

我真的不知道如何实现它。我读了这个[http://symfony.com/doc/current/cookbook/security/custom_provider.html](http://symfony.com/doc/current/cookbook/security/custom_provider.html)和那个[http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)，我仍然如此丢失的... ：（

谁能帮我？

太感谢了 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T14:38:26.440

If you want to write custom authentication you have found the correct links. As an example you can see the implementation of the OAuth authorization [HWIOAuthBundle](https://github.com/hwi/HWIOAuthBundle). But keep in mind that this type of authentication creates a user on your system. If you do not use a database, you must make a request to the API every time user send a request.

First you need to understand that there is no magic. On every request symfony checks if url matches one of the specified firewalls (see secutity.yml). Listener that fired you can see in the firewall factory. If matches are found, the action switches to the corresponding [AuthenticationListener](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html#the-listener). Listener attempts to authenticate the credewntials by creating Token, which is sended to [AuthenticationProvider](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html#the-authentication-provider)

```
$this->authenticationManager->authenticate(new UsernamePasswordToken($username, $password, $this->providerKey)); 
```

in AuthenticationProvider

```
public function authenticate(TokenInterface $token) {
    ...
} 
```

AuthenticationProvider try to get user via UserProvider. In case of success, Token stored in the session. On subsequent requests, ContextListener comes into play first, checks the session, extract token and send it to AuthenticationProvider similar.

In general terms, the scheme looks like that. More info you can find examining the source code of Symfony Security component.

Really good starting point is a [UsernamePasswordFormAuthenticationListener](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Firewall/UsernamePasswordFormAuthenticationListener.php). It just take login and password from request and make simplest UsernamePasswordToken.

```
protected function attemptAuthentication(Request $request)
{
    ...
} 
```

Good luck!

# sql - SQL 中不存在不同记录的不同记录计数

> ID：14264069
> 
> 赞同：-2
> 
> 时间：2013-01-10T17:45:56.247
> 
> 标签：sql

我的数据如下所示：

```
HOUR    COUNT
0       3
1       3
2       6
4       2
5       1
7       4
8       3
9       6
10      11  
... 
23      3 
```

我需要数据看起来像这样：

```
HOUR    COUNT
0       3
1       3
2       6
3       0
4       2
5       1
6       0
7       4
8       3
9       6
10      11
... 
23      3 
```

当在某个小时（即小时`2`或`6`

这是我的代码的样子：

```
-- Columns selected
SELECT DISTINCT col1 AS 'HOUR', COUNT(col1) AS 'COUNT'

-- Database Used: DB
FROM DB

-- Filters
WHERE date_col BETWEEN '1/1/13' AND '1/2/13'
GROUP BY col1
ORDER BY col1

--*********************************************************************************
-- End Report 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:53:33.157

如果您没有小时表，则可以使用下面的查询。根据您的平台，您可以使用一个函数来代替`CASE`.

```
SELECT a.hour, 
       CASE 
         WHEN b.count IS NULL THEN 0 
         ELSE b.count 
       END AS 'count' 
FROM   (SELECT 1 AS 'hour' 
        UNION ALL 
        SELECT 2 
        UNION ALL 
        SELECT 3 
        UNION ALL 
        SELECT 4 
        UNION ALL 
        SELECT 5 
        UNION ALL 
        SELECT 6 
        UNION ALL 
        SELECT 7 
        UNION ALL 
        SELECT 8 
        UNION ALL 
        SELECT 9 
        UNION ALL 
        SELECT 10 
        UNION ALL 
        SELECT 11 
        UNION ALL 
        SELECT 12 
        UNION ALL 
        SELECT 13 
        UNION ALL 
        SELECT 14 
        UNION ALL 
        SELECT 15 
        UNION ALL 
        SELECT 16 
        UNION ALL 
        SELECT 17 
        UNION ALL 
        SELECT 18 
        UNION ALL 
        SELECT 19 
        UNION ALL 
        SELECT 20 
        UNION ALL 
        SELECT 21 
        UNION ALL 
        SELECT 22 
        UNION ALL 
        SELECT 23) a 
       LEFT JOIN tbl b 
              ON b.hour = a.hour 
```

**结果**

```
| 小时 | 计数 |
----------------
| 1 | 3 |
| 2 | 6 |
| 3 | 0 |
| 4 | 2 |
| 5 | 1 |
| 6 | 0 |
| 7 | 4 |
| 8 | 3 |
| 9 | 6 |
| 10 | 11 |
| 11 | 10 |
| 12 | 11 |
| 13 | 5 |
| 14 | 7 |
| 15 | 10 |
| 16 | 7 |
| 17 | 6 |
| 18 | 8 |
| 19 | 2 |
| 20 | 7 |
| 21 | 5 |
| 22 | 6 |
| 23 | 3 |
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:51:02.380

你需要一个案例陈述：

```
case count(col1)  as 'Count'  
    when null  
    THEN 0  
    ELSE 'Count' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:56:22.350

更简单的查询以获得 24 小时 - 这只是在需要时构建小时表。Sysdate 的使用是可选的：

```
SELECT to_char(trunc(SYSDATE), 'hh24')-1 + LEVEL "24_hrs"
  FROM dual
CONNECT BY LEVEL <= 24; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T20:49:30.333

您可以使用[公用表表达式](http://msdn.microsoft.com/en-us/library/ms175972.aspx)来创建所有时间：

```
WITH [Hours]([Hour])
AS
(
  SELECT 0 AS [Hour]
  UNION ALL
  SELECT [Hours].[Hour] + 1 AS [Hour]
  FROM [Hours]
  WHERE [Hours].[Hour] < 23
)

SELECT * FROM [Hours] 
```

然后，您可以使用这些时间加入您的查询：

```
WITH [Hours]([Hour])
AS
(
  SELECT 0 AS [Hour] --Don't forget 0, else you miss one hour on your day!
  UNION ALL
  SELECT [Hours].[Hour] + 1 AS [Hour]
  FROM [Hours]
  WHERE [Hours].[Hour] < 23
)

SELECT 
 [Hours].[Hour],
 COUNT([table].[col1]) AS [Count]
FROM [Hours]
LEFT JOIN [table] ON [Hours].[Hour] = [table].[col1]
WHERE [table].[date_col] BETWEEN '1/1/13' AND '1/2/13'
ORDER BY [Hour] ASC 
```

# c# - FormView 内的导航网格

> ID：14264070
> 
> 赞同：0
> 
> 时间：2013-01-10T17:45:56.440
> 
> 标签：c#, gridview, formview

我们有一个用于驱动表单视图的元素列表。通常，结果集介于 5-15 条记录之间。现在在表单视图中，我们有典型的 first/prior/next/last 用于导航。问题是有时用户需要直接转到特定记录来编辑它。这里的记录是工作任务，有一些非常简短的描述。

提出的想法是在表单视图中放置一个网格视图，列出该表单的所有记录，用户只需在该记录上选择视图或编辑，它将直接导航到该记录并将其置于适当的模式。我们也可以把它放在表单视图之外，这并不重要。

问题是，不管驱动力如何，我如何告诉 formview 去记录从外部网格之类的东西驱动的 X。

我知道 formview 有 DataKeyNames 字段，但有没有办法说“去记录谁的 PK 是 17”，因为它在 formview 的当前数据集中？

如果是这样，是否有人有任何示例 C# 代码？我知道我们可以只用一条记录填充现有的表单视图，但我们也希望保留正常的导航按钮，以防万一（有时有数百个工作任务的情况，在这种情况下我们' d 抑制网格视图——听起来不对，但业务案例还有更多内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:29:12.983

这个简短的解决方案是将网格嵌入 FormView ItemTemplate 并为两者引用相同的数据源。

要使行可编辑，您需要对网格上的 RowDataBound 进行简单的回调，您将在其中检索链接按钮（或您用来触发编辑的任何控件），然后将命令参数设置为 rowindex。之后，您需要为将检索命令参数（再次是行索引）的链接按钮（或触发器）设置回调，然后将 FormView PageIndex 设置为该值，然后将 FormView 的 ChangeMode 设置为 FormViewMode。编辑。

回顾一下，对于只读视图，它是一个包含所有项目的网格，但是在处理编辑或插入时，您会得到传统的表单视图。

# drupal - 如何在 Drupal 7 的模块代码中的 cron 运行期间设置主题

> ID：14264071
> 
> 赞同：0
> 
> 时间：2013-01-10T17:45:56.190
> 
> 标签：drupal, drupal-7, drupal-theming, drupal-hooks, drupal-render

在 cron 运行期间，我有一个模块可以缓存许多节点的标记。我的问题是，在这个 cron 运行期间，来自渲染函数的任何标记都不会通过我的主题挂钩或模板。

从我的模块代码中，如何选择主题？有钩子吗？有没有可以指定的功能？

最终，我希望能够做到这一点并获得与在 page_build 挂钩上运行它相同的结果：

```
render(node_view($node, 'teaser'));
render(node_view($node, 'mini_teaser')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:26:25.630

Drupal 7 有一个钩子，允许模块更改当前启用的主题：[hook_custom_theme()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_custom_theme/7)。

请注意，用于调用该挂钩的代码如下。（参见[menu_get_custom_theme()](http://api.drupal.org/api/drupal/includes!menu.inc/function/menu_get_custom_theme/7)。）

```
// First allow modules to dynamically set a custom theme for the current
// page. Since we can only have one, the last module to return a valid
// theme takes precedence.
$custom_themes = array_filter(module_invoke_all('custom_theme'), 'drupal_theme_access');
if (!empty($custom_themes)) {
  $custom_theme = array_pop($custom_themes);
}
// If there is a theme callback function for the current page, execute it.
// If this returns a valid theme, it will override any theme that was set
// by a hook_custom_theme() implementation above.
$router_item = menu_get_item();
if (!empty($router_item['access']) && !empty($router_item['theme_callback']) && function_exists($router_item['theme_callback'])) {
  $theme_name = call_user_func_array($router_item['theme_callback'], $router_item['theme_arguments']);
  if (drupal_theme_access($theme_name)) {
    $custom_theme = $theme_name;
  }
} 
```

由于 System 模块实现了该钩子，如果您`hook_custom_theme()`在首先执行该钩子的模块中实现（例如，模块的短名称是 custom_module），那么 System 模块可以覆盖您的模块设置的主题。

一般来说，设置全局`$custom_theme`应该会得到相同的效果。确保正在设置的主题已启用。

# android - 致命信号 11 (SIGSEGV)

> ID：14264074
> 
> 赞同：5
> 
> 时间：2013-01-10T17:46:05.863
> 
> 标签：android, android-ndk, java-native-interface

我有一个奇怪的错误，我找不到它来自哪里。logcat 中出现的唯一内容是：

`01-10 17:07:10.665: A/libc(20449): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)`

当我运行我的应用程序时，我不会立即收到此错误，我会在随机时间（1 分钟到 5 分钟之间）后收到它。我无法重现此错误，它似乎是随机的，并且由于没有其他信息，因此很难调试。我试图将一些日志信息添加到我的库中，但我仍然无法说出崩溃发生的位置。

我运行同一个应用程序 x 次，我得到了不同的 SIGSEGV 地址（有时它与以前的地址相同：

`01-10 17:29:04.650: A/libc(21588): Fatal signal 11 (SIGSEGV) at 0x6c707063 (code=1)`

`01-10 17:25:55.165: A/libc(21473): Fatal signal 11 (SIGSEGV) at 0x0069004c (code=1)`

`01-10 17:11:58.780: A/libc(20742): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)`

`01-10 17:00:02.010: A/libc(20160): Fatal signal 11 (SIGSEGV) at 0x00000018 (code=1)`

我的应用程序正在使用具有从服务器接收更新的 NetworkThread 的 c++ 库。在 Java 端，有一个 WorkerThread 检查是否有来自 NetworkThread 的新更新，如果有新更新，它会通知所有侦听器。我还有一个 LocationSpotter（在 Java 端），它会在更新位置时进行一些 JNI 调用。

有没有办法调试这个或使用我从 SIGSEGV 获得的地址来调试应用程序？此外，我正在使用共享 JavaVM 对象来检索当前的 JNIEnv（并调用 AttachCurrentThread）。那个线程安全吗？

我注意到在收到 SIGSEGV 错误后（在应用程序实际崩溃之前），我仍然收到来自 NetworkThread 的更新。这意味着 NetworkThread 可能正在工作。

我还注意到一行可能是我的问题的根源（在 notifyAll 方法中），因为在 SIGSEGV 之前打印的最后一条消息是 "notifyAll1" ：

```
for (unsigned i = 0; i < listeners.size(); i++) {
    try {
        __android_log_print(ANDROID_LOG_INFO, "FROM C++", "notifyAll1");
        if (listeners.at(i) == NULL)
            __android_log_print(ANDROID_LOG_INFO, "FROM C++", "LISTENER NULL");

        listeners.at(i)->update(u); // <- This line is a potential suspect
        __android_log_print(ANDROID_LOG_INFO, "FROM C++", "notifyAll2"); 
```

日志猫：

```
01-10 17:07:10.665: I/FROM C++(20449): notifyAll1
01-10 17:07:10.665: A/libc(20449): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1) 
```

然后我尝试在每个侦听`update`器方法的第一行打印一个日志，但没有一个被打印（我认为这真的很奇怪）。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-25T09:02:15.300

大多数情况下，当您尝试访问当时未创建的任何对象时，都会发生致命信号错误。因此，请正确检查它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-29T12:37:59.800

我相信你应该像这样重写**notifyAll**循环：

```
for (unsigned i = 0; i < listeners.size(); i++) {
  try {
    __android_log_print(ANDROID_LOG_INFO, "FROM C++", "notifyAll1 i=%u", i);
    auto listener = *listeners.at(i);

    if (&listener == NULL) {
      __android_log_print(ANDROID_LOG_INFO, "FROM C++", "LISTENER NULL");
    }
    else {
      __android_log_print(ANDROID_LOG_INFO, "FROM C++", "notifyAll2 : listener[%u] at %p", i, &listener);
      listener.update(u);
    } 
```

*   在您的原始代码中，检查仅打印到日志，但**update()**仍然会失败（[@Robin](https://stackoverflow.com/users/1153396/robin)注意到了这一点）
*   在您的原始代码中，**侦听器可能会在 check 和****update()**之间获得无效的 NULL
***   即使在上述更改之后，如果**listeners.at(i)**指向的侦听器对象变得无效， **update()也可能崩溃。****

 ****但是有可能由于异常处理而发生崩溃。你没有透露**catch(...)**代码，所以我不能谈论这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T05:52:20.737

似乎很明显

```
if (listeners.at(i) == NULL)
            __android_log_print(ANDROID_LOG_INFO, "FROM C++", "LISTENER NULL");

        listeners.at(i)->update(u); // <- This line is a potential suspect
        __android_log_print(ANDROID_LOG_INFO, "FROM C++", "notifyAll2"); 
```

应该

```
if (listeners.at(i) == NULL) {
    __android_log_print(ANDROID_LOG_INFO, "FROM C++", "LISTENER NULL");
} else {
    listeners.at(i)->update(u); // <- This line is a potential suspect
    __android_log_print(ANDROID_LOG_INFO, "FROM C++", "notifyAll2");
} 
```****

# asp.net - “邮件发送被拒绝”

> ID：14264084
> 
> 赞同：3
> 
> 时间：2013-01-10T17:46:39.483
> 
> 标签：asp.net, email, azure, smtp, gmail

我正在用作我的域的 SMTP 服务器。

我创建了一个“联系我们”页面，用户可以从该页面向公司发送电子邮件。

当我从计算机发送电子邮件时，它可以工作，但是人们向我抱怨说，当他们发送电子邮件时，他们会收到以下消息：

```
Mailbox unavailable. The server response was: 5.7.0 Mail sending denied abcdefghi 
```

[查看屏幕截图](http://i.imgur.com/JejL5.jpg)

这是我的设置，

**网络配置：**

```
<system.net>
  <mailSettings>
    <smtp deliveryMethod="Network" from="info@company.com">
      <network defaultCredentials="false" host="smtp.gmail.com" port="587"
        userName="info@company.com" password="mypassword" enableSsl="true" />
    </smtp>
  </mailSettings>
</system.net> 
```

**行动：**

```
public ActionResult Contact(ContactFormModel contact)
{
  ViewBag.Message = false;
  if (ModelState.IsValid)
  {
    var message = new MailMessage();
    var sender = new MailAddress(contact.Email, contact.FullName);
    message.Sender = sender;
    message.From = sender;
    message.To.Add(Settings.Default.ContactUsEmail);
    if (contact.SendSelfCopy)
      message.CC.Add(sender);
    message.ReplyToList.Add(sender);

    message.Subject = string.Format("Company Website - Msg from {0}: {1}",
      contact.FullName, contact.Subject);

    var sb = new StringBuilder();
    sb.AppendFormat("From: <a href='mailto:{1}'>{0}</a>: <b>{2}</b><hr/>",
      sender.DisplayName, sender.Address, contact.Subject);
    sb.AppendLine(contact.Message);
    message.Body = sb.ToString();
    message.IsBodyHtml = true;

    using (var client = new SmtpClient())
    {
      client.Timeout = 15000;

      try
      {
        client.Send(message);
      }
      catch (Exception)
      {
        throw;
      }
    }

    ModelState.Clear();
    ViewBag.Success = true;
    ViewBag.Message = Settings.Default.ContactUsSuccessMessage;
    return View();
  }

  return View(contact);
} 
```

该网站托管在 Windows Azure 中，并使用 .NET 4.5 运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:48:45.737

我在尝试通过 Azure 发送电子邮件时遇到了完全相同的问题。

这里的问题是 Google 不信任您部署的 IP 地址。对此的简短解决方法是远程进入您的网络角色并使用您尝试使用的帐户登录 Gmail。

我还通过从本地计算机登录到 Gmail 帐户并单击“信任连接”作为网络角色的 IP 地址来解决此问题。

但是，您应该记住，当 Azure 决定退回您的部署时，您每次获得新 IP 地址时都必须执行此操作。

在我的应用程序中，我刚刚连接到我客户公司网络上的 SMTP 服务器。如果这不是一个选项，您可以尝试[SendGrid](http://www.windowsazure.com/en-us/develop/net/how-to-guides/sendgrid-email-service/)。

# c# - 在 WPF 中为 DataGridRow 创建 ControlTemplate

> ID：14264087
> 
> 赞同：10
> 
> 时间：2013-01-10T17:47:04.680
> 
> 标签：c#, wpf, xaml, controltemplate

我想要完成的是自定义控件，`DataGrid`使每一行都有圆角，没有网格线（只是我正在使用的设计）。

我一直在尝试做的是创建一个`ControlTemplate`修改控件的`DataGridRow`控件，以使它们具有预期的外观。到目前为止，这就是我正在使用的：

```
 <DataGrid Grid.Row="0" Grid.Column="0" Margin="5,5,5,5" AutoGenerateColumns="False" ItemsSource="{Binding Path=MyData}">
        <DataGrid.Resources>
            <Style x:Key="rowStyle" TargetType="{x:Type DataGridRow}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type DataGridRow}">
                            <Border CornerRadius="8,8,8,8" BorderBrush="Red" BorderThickness="2">
                                <ContentPresenter />
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </DataGrid.Resources>
        <DataGrid.Columns>
            <DataGridTextColumn Header="Foo"  />
            <DataGridTextColumn Header="Baz" />
            <DataGridTextColumn Header="Bar" />
        </DataGrid.Columns>
   </DataGrid> 
```

这个版本显然是简陋的（只是股票模板周围的边框），但是当我运行应用程序时我看不出任何区别。

那么，问题是如何为 DataGridRow 自定义控件模板？或者，如果这不可行，是否有更好的方法来实现我的目标：？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T20:04:38.460

该行的实际模板比这要复杂一些。请参阅下面的样式 - 它几乎是基本样式，但我添加了一些您的设计并为 and 留下了触发器`IsMouseOver`（`IsSelected`随意删除它们）。

```
<Style TargetType="{x:Type DataGridRow}">
    <Setter Property="Background"
            Value="Transparent" />
    <Setter Property="BorderBrush" 
            Value="Red" />
    <Setter Property="BorderThickness" 
            Value="2" />
    <Setter Property="SnapsToDevicePixels"
            Value="true" />
    <Setter Property="Validation.ErrorTemplate"
            Value="{x:Null}" />
    <Setter Property="ValidationErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <TextBlock Foreground="Red"
                           Margin="2,0,0,0"
                           Text="!"
                           VerticalAlignment="Center" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridRow}">
                <Border x:Name="DGR_Border"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Background="{TemplateBinding Background}"
                        SnapsToDevicePixels="True"
                        CornerRadius="8,8,8,8">
                    <SelectiveScrollingGrid>
                        <SelectiveScrollingGrid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </SelectiveScrollingGrid.ColumnDefinitions>
                        <SelectiveScrollingGrid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </SelectiveScrollingGrid.RowDefinitions>
                        <DataGridCellsPresenter Grid.Column="1"
                                                ItemsPanel="{TemplateBinding ItemsPanel}"
                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        <DataGridDetailsPresenter Grid.Column="1"
                                                  Grid.Row="1"
                                                  SelectiveScrollingGrid.SelectiveScrollingOrientation="{Binding AreRowDetailsFrozen, ConverterParameter={x:Static SelectiveScrollingOrientation.Vertical}, Converter={x:Static DataGrid.RowDetailsScrollingConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                  Visibility="{TemplateBinding DetailsVisibility}" />
                        <DataGridRowHeader Grid.RowSpan="2"
                                           SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical"
                                           Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Row}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
                    </SelectiveScrollingGrid>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver"
                             Value="True">
                        <Setter TargetName="DGR_Border"
                                Property="Background"
                                Value="LightGray" />
                    </Trigger>
                    <Trigger Property="IsSelected"
                             Value="True">
                        <Setter TargetName="DGR_Border"
                                Property="Background"
                                Value="Gray" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

哦，顺便说一句，您有样式的键，但您在任何时候都没有引用它 - 所以该行使用它的默认样式。要使用您的样式或上面提供的样式，请不要提供资源的密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T09:27:01.723

```
<Style TargetType="{x:Type DataGridColumnHeader}" x:Key="DatagridColumnHeaderStyle">
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Height" Value="35" />
        <Setter Property="SeparatorBrush" Value="DarkRed" />
        <Setter Property="FontWeight" Value="Black" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                    <Grid>
                        <Border x:Name="columnHeaderBorder"
                                BorderThickness="1"
                                Padding="3,0,3,0">

                            <ContentPresenter HorizontalAlignment="TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        </Border>
                    </Grid>
                </ControlTemplate>    
            </Setter.Value>
        </Setter>
    </Style> 
```

在 xaml 你可以把下面的代码

```
 <DataGrid x:Name="myGridView" 
           Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
           Height="200" Margin="5,15,5,0"  
           AutoGenerateColumns="False" 
           ItemsSource="{Binding Person}" 
           SelectedItem="{Binding Path=PersonDetails, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" >

    <DataGrid.Columns>

        <DataGridTextColumn HeaderStyle="{StaticResource DatagridColumnHeaderStyle}"  Width="200" Header="Customer Name" Binding="{Binding Path=Name}"/>
        <DataGridTextColumn HeaderStyle="{StaticResource DatagridColumnHeaderStyle}" Width="250" Header="Customer Address" Binding="{Binding Path=Address}"/>
        <DataGridTextColumn HeaderStyle="{StaticResource DatagridColumnHeaderStyle}" Width="100" Header="Order Id" Binding="{Binding Path=OrderId}"/>

    </DataGrid.Columns> 
```

# c++ - c++等待系统调用

> ID：14264094
> 
> 赞同：2
> 
> 时间：2013-01-10T17:47:37.017
> 
> 标签：c++, system, call

我正在处理 C++ 中的文件。我在系统提示符下调用一个程序来创建一个 txt 文件。然后我使用 C++ 读取该文件。我需要确保 C++ 在读取文件之前等待程序完成。

一个解释 C++：

```
createOutputFile(); 
system("Start wp/PRO386W.EXE /V1 consult('wp/read.pl').");
// I need to wait for this "PRO386W.EXE to finish
readLista();//before calling this method 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T17:52:27.473

system() 等待命令完成。在您的情况下，“命令”是“开始”，这迫使它进入后台。删除“开始”，你应该没问题。如果您确实需要它是异步的，则需要以不同的方式启动该过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:50:18.700

如果该程序`WP/PRO386W.exe`是控制台程序，只需删除`Start`，这将使程序在后台运行。UPD：也许你必须使用反斜杠：`"WP\\PRO386W.exe ..."`。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-10T17:54:11.640

您可以随时检查文件结尾。假设 fin 是 ifstream 类型，那么你可以检查 f (!fin.eof( ))

# android-asynctask - asyncTask 内 textview 中的 java.lang.NullPointerException

> ID：14264100
> 
> 赞同：0
> 
> 时间：2013-01-10T17:48:07.020
> 
> 标签：android-asynctask, nullpointerexception, progressdialog, textview, android

如果我使用下面的代码，我不会出错，但是会有一个冻结时间。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
    setContentView(R.layout.profilepic);
    initialize();
    Bundle bundle = getIntent().getExtras();
    email = bundle.getString("Email");
    ArrayList<NameValuePair> postParameters;
    String response = null;
    postParameters = new ArrayList<NameValuePair>();
    postParameters.add(new BasicNameValuePair("emaillog", email));              

    try {
        response = CustomHttpClient.executeHttpPost("http://whatstherex.info/checkU.php", postParameters);
        res = response.toString();
        res = res.replaceAll("null", "");                   
        username = res.toString();
        tvProfilePic.setText("Hi " + username + ", you are encourage to add a profile picture.");

    }catch(Exception e){
        res = e.toString();
        tvProfilePic.setText(res);
    }
} 
```

但是，如果我将此代码与 asyncTask 和 progressDialog 一起使用，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
    setContentView(R.layout.profilepic);
    initialize();
    getUsername();
}

private AsyncTask<String, Void, String> task;

public void getUsername(){      
    Bundle bundle = getIntent().getExtras();
    email = bundle.getString("Email");
    task = new AsyncTask<String, Void, String>() {

        ProgressDialog dialog;
        ArrayList<NameValuePair> postParameters;
        String response = null;

        @Override
        protected void onPreExecute() {
            //
            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("emaillog", email));
            dialog = new ProgressDialog(Profilepic.this, ProgressDialog.STYLE_SPINNER);
            dialog.setMessage("Loading Data...");       
            dialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            //
            try {
                response = CustomHttpClient.executeHttpPost("http://whatstherex.info/checkU.php", postParameters);
                res = response.toString();
                res = res.replaceAll("null", "");   
                username = res.toString();
                return username;
            }catch(Exception e){
                res = e.toString();
                return res;
            }
        }

        @Override
        protected void onPostExecute(String result) {               
            if(result.length()< 25){
                username = result;
                tvProfilePic.setText("Hi " + result + ", you are encourage to add a profile picture.");
                dialog.dismiss();
            }else{
                tvProfilePic.setText(result);
                dialog.dismiss();
            }
        }
    };
    task.execute(); 
} 
```

我进入`java.lang.NullPointerException`文本视图。

有什么问题？谁能帮我解决这个问题`NullPointerException`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:21:21.887

我看到您使用 tvProfilePic 但我看不到您在哪里定义它。

如果你没有定义它，它应该以类似的方式完成

`tvProfilePic = findViewById(R.id.profile_pic)`

你在做这个吗？请注意，“profile_pic”是布局 XML 文档中的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-04T06:00:02.723

您正在使用 tvProfilePic 作为文本视图，但我看不到您在哪里定义它。如果你没有定义它，那么使用类似
tvProfilePic = findViewById(R.id.profile_pic) 的东西来定义它

您收到 nullpointerexception 因为您的 tvProfilePic 为空

# box-api - 没有 UI 的 OAuth2？

> ID：14264101
> 
> 赞同：2
> 
> 时间：2013-01-10T17:48:22.743
> 
> 标签：box-api

我正在开发一个将 Box 与身份管理环境集成的应用程序，以实现 SSO 和用户生命周期管理。基本上，我们的用户使用 SAML 登录他们的 Box 帐户，然后他们的 Box 帐户的状态根据他们的公司帐户的状态进行管理 - 如果我们终止用户，用户的 Box 帐户需要被禁用。这是在 OAuth2 更改之前正在进行的众多用例之一。

在 OAuth2 更改之前，我能够使用 api_key 和 auth_token 对我的企业管理员帐户进行身份验证。这工作得很好。

现在，使用 OAuth2，我不确定如何继续。根本没有 UI，我也没有地方处理授权令牌的重定向。此外，这是一个使用企业管理员帐户运行的夜间进程，因此每次运行时我都必须获取新的刷新令牌和不记名令牌。

这对我的用例没有多大意义。有替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:57:25.473

我正忙着写同样的代码，和你一样沮丧。然而，刷新令牌确实存在 14 天，我打算做的是在注册表中存储加密的返回值。每次运行我的第一个动作是刷新不记名密钥。

然而，目前没有关于逐步淘汰 V1 Auth 方法的时间表，并且由于一些企业内容尚未移植到 API V2，我怀疑如果有足够多的企业推动 BOX API 团队寻求解决方案，我相信他们会听。

老实说，我更喜欢 OAuth2 解决方案，因为它可以阻止您的整个企业数据的密钥作为 API V1 中的 URL 参数在互联网上以明文形式发送，如果有人确实设法破坏了 SSL，那么只能获得一个访问令牌最多值得 60 分钟。

不确定你用什么语言编写例程，但我正在使用 John Hoerr 在 GitHub 上编写的 API V2 SDK，除了他从 .Net 的角度直接修复的一些小问题之外，它使 API 变得更加容易SDK处理的所有反序列化的愉快体验。

# python - python-beautifulsoup-TypeError：序列项 0：预期字符串，找到标记

> ID：14264102
> 
> 赞同：6
> 
> 时间：2013-01-10T17:48:25.833
> 
> 标签：python, beautifulsoup

我正在使用 beautifulsoup 从 html 字符串中提取图像和链接。这一切都很好，但是对于某些在链接内容中有标签的链接，它会引发错误。

示例链接：

```
<a href="http://www.example.com"><strong>Link Text</strong></a> 
```

蟒蛇代码：

```
soup = BeautifulSoup(contents)
links = soup.findAll('a')
for link in links:
    print link.contents # generates error
    print str(link.contents) # outputs [Link Text] 
```

错误信息：

```
TypeError: sequence item 0: expected string, Tag found 
```

我真的不想遍历链接文本中的任何子标签，我只想返回原始内容，这对 BS 可行吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T17:51:01.157

要仅获取标签的文本内容，该[`element.get_text()`方法](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)允许您从当前元素（包括标签）中获取（剥离）文本：

```
print link.get_text(' ', strip=True) 
```

第一个参数用于连接所有文本元素，而坐到`strip`意味着`True`所有文本元素首先被去除前导和尾随空格。在大多数情况下，这为您提供了整洁的处理文本。

您还可以使用[`.stripped_strings`可迭代](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)的：

```
print u' '.join(link.stripped_strings) 
```

这基本上是相同的效果，但您可以选择先处理或过滤剥离的字符串。

要获取内容，请在每个子项上使用`str()`或：`unicode()`

```
print u''.join(unicode(item) for item in link) 
```

这将适用于两者`Element`和`NavigableString`所包含的项目。

# c# - 在 xaml 中创建应用程序栏并在代码中对其进行操作

> ID：14264105
> 
> 赞同：0
> 
> 时间：2013-01-10T17:48:46.750
> 
> 标签：c#, windows-phone-7, xaml

我正在学习在 Windows Phone（芒果）中开发应用程序。在全景页面中使用应用栏时，我希望根据所选页面（如音乐+视频应用）更改菜单项和按钮文本等。

为此，我在 xaml 中创建了应用程序栏：

```
 <phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar x:Name="appbar" IsMenuEnabled="True" IsVisible="True">
            <shell:ApplicationBarIconButton Text="Add" IconUri="/add.png" x:Name="btn" Click="Addbtn"/>
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="Exit" x:Name="menuitem" Click="menubtn"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar> 
```

然后，我尝试通过在全景页面`x:name`的情况下通过其属性访问 appbar 来操作控件：`SelectionChanged`

```
 private void PanoControl_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {

            if (PanoControl.SelectedIndex == 0)
                appbar.IsMenuEnabled = false;
            else if(PanoControl.SelectedIndex == 1)
                menuitem.IsEnabled = false;
            else if (PanoControl.SelectedIndex == 2)
            {
                appbar.IsVisible = true;
                menuitem.IsEnabled = true;
            }
        } 
```

从一个全景页面移动到另一个时，会生成异常。请帮帮我。这甚至可能吗？

另外，我是第一次在这里提问。如果我错过了什么，请告诉我。

谢谢， 悉达特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T01:09:44.847

通过页面的 ApplicationBar 属性访问应用栏项目。它使操作变得繁琐。

```
private void PanoControl_SelectionChanged(object sender, SelectionChangedEventArgs e)
{

    if (PanoControl.SelectedIndex == 0)
        this.ApplicationBar.IsVisible = false;
    else if(PanoControl.SelectedIndex == 1)
        ((ApplicationBarMenuItem)ApplicationBar.MenuItems[0]).IsEnabled = false;
    else if (PanoControl.SelectedIndex == 2)
    {
        this.ApplicationBar.IsVisible = false;
        ((ApplicationBarMenuItem)ApplicationBar.MenuItems[0]).IsEnabled = false;
    }
} 
```

社区已经开发了一些解决方案。一个是[BindableApplicationBar](http://bindableapplicationb.codeplex.com/)，我不确定它是用于 Mango 还是 Windows Phone 8。这个项目是 Mango 特定的 [http://phone7.codeplex.com/](http://phone7.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:21:44.930

因为**ApplicationBar**是一个 shell 对象，所以不能像任何其他 XAML 对象一样使用名称来引用它。它与您的页面相关联，因此您可以使用`this.ApplicationBar`：

```
this.ApplicationBar.IsVisible = false; 
```

# android - Android：如何找到 SQLITE_MAX_COMPOUND_SELECT

> ID：14264108
> 
> 赞同：3
> 
> 时间：2013-01-10T17:48:57.833
> 
> 标签：android, performance, sqlite

有没有办法[`SQLITE_MAX_COMPOUND_SELECT`](https://www.sqlite.org/limits.html)在 Android 上获取 SQLite 数据库的值？在 C sqlite3 API 中，这是`sqlite3_limit(db, SQLITE_LIMIT_COMPOUND_SELECT, -1)`，但我没有在[Android SQLite API](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)中看到这个接口。

这样做的原因是我插入了数千行，并且发出批处理 INSERT 语句比许多单行插入更快，即使它包含在事务中也是如此。但是每个语句可以插入的最大行数受限于`SQLITE_MAX_COMPOUND_SELECT`，因此需要将其分成几个批次。而且，出于显而易见的原因，我宁愿不对默认限制 500 进行硬编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:57:53.320

`SQLITE_LIMIT_COMPOUND_SELECT`限制不是防止内存溢出的方法（至少在 Android 系统上），而只是一个健全性检查。因此，供应商极不可能将其从默认值中减少，因此 500 应该是安全的*。*

此外，随着一个命令中插入记录的数量越来越多，*增量*加速会越来越小；例如，从 5 到 50 条记录的加速比从 50 到 500 的加速要大。因此，仅使用 50 应该不会造成太大伤害。

* * *

加快重复执行的另一种方法是使用准备好的语句，使用[`SQLiteDatabase.compileStatement`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#compileStatement%28java.lang.String%29).

# android - 不同版本下的android偏好

> ID：14264115
> 
> 赞同：0
> 
> 时间：2013-01-10T17:49:09.923
> 
> 标签：android, deprecated, preferenceactivity

我正在编写一个带有偏好的 Android 应用程序。我有`minSdkVersion="7"`并且`android:targetSdkVersion="17"` 我应该使用`PreferenceActivity`或者`PreferenceFragment`可能一起使用以使其在 android 上工作从`2.1`to `4.2`？当我使用`PreferenceActivity`Eclipse 时告诉我`The method addPreferencesFromResource(int) from the type PreferenceActivity is deprecated`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:53:43.827

您可以使用已弃用的方法。这只是警告。如果你愿意，你可以在 android 文档中找到实际的方法，但这不是一个好方法，因为这种方法不能在旧设备上运行。我希望我有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:02:07.277

您应该同时使用`PreferenceActivity`和`PreferenceFragment`因为`PreferenceFragment`在 API 11 及更高版本上受支持，并且在支持库中不可用。见[这里](https://stackoverflow.com/questions/5501431/was-preferencefragment-intentionally-excluded-from-the-compatibility-package)。

# python - 通过子进程通过python运行TCL，但没有给出任何输出

> ID：14264118
> 
> 赞同：1
> 
> 时间：2013-01-10T17:49:27.570
> 
> 标签：python, tkinter, tcl, eval, subprocess

我正在尝试通过 python 子进程运行我的 tcl 脚本，如下所示：

```
import subprocess
>>> subprocess.Popen(["tclsh", "tcltest.tcl"])
<subprocess.Popen object at 0x0000000001DD4DD8>
>>> subprocess.Popen(["tclsh", "tcltest.tcl"], shell=True )
<subprocess.Popen object at 0x0000000002B34550> 
```

我不知道它是否有效，因为我看不到任何东西！我的 tcl 脚本也有一些来自我公司的包，当我使用 Tkinter、Tk 和 eval 时会导致错误，

```
import Tkinter
import socket

def TCLRun():
 s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
 s.connect(('127.0.0.1', 5006))
 root = Tkinter.Tk()
## root.tk.eval('package require Azimuth-Sdk')
 tcl_script ="""
##package require Company-Sdk
## set players [ace_azplayer_list_players]
set players 2
puts $players 
##  if { $players != "" } {         
##  foreach player $players {   
##      set cmd ace_azplayer_remove_player
##      if { [catch { [ $cmd $player ] } err] } {   
##          puts " $cmd $player - $err" 
##          sleep 1 
##          }           
##      } 
##  } """
 # call the Tkinter tcl interpreter
 root.tk.call('eval', tcl_script)
 root.mainloop() 
```

给我这个错误

```
import TCLCall
>>> TCLCall.TCLRun()

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    TCLCall.TCLRun()
  File "C:\Users\XXX\Desktop\PKT\TCLCall.py", line 24, in TCLRun
    root.tk.call('eval', tcl_script)
TclError: can not find channel named "stdout" 
```

这就是我切换到子进程的原因。至少它不会给我错误！

知道如何通过 python 运行带有内部所需包的 tcl 脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:57:23.327

要从 using 获取输出`subprocess.Popen`，您可以尝试以下操作：

```
import subprocess

p = subprocess.Popen(
    "tclsh tcltest.tcl",
    shell=True,
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE)
stdout, stderr = p.communicate()
print stdout
print stderr 
```

您正在运行的脚本也完全有可能`subprocess.Popen`产生错误，但由于您没有明确查找它而没有显示。

**编辑：**

为了防止某些信息在下面的评论中丢失：

您可能在这里有几个潜在的错误，或者您可以尝试一些事情。

您的 tcl 脚本本身无法`teapot`正确导入，或者 tcl 脚本和 python 脚本之间的某种交互无法正常工作，或者无法从您的路径中`subprocess.Popen`正确找到包。`teapot`

我会尝试按该顺序调试您的程序。首先确认您的 tcl 脚本可以在不使用 python 的情况下工作，或者`subprocess.Popen`直接从命令行运行它（例如，`C:\Users\blah tclsh tcltest.tcl`）

然后，在你确定你的脚本工作之后，引入 Python。从我所看到的来看，你对 python 的东西没有任何问题，但是你的 tcl 脚本或者你的路径有一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:56:52.847

的重点`subprocess.Popen`是标准通道的重定向，因此您可以以编程方式处理输出，而不是在您自己的标准输出中看到它。你试过处理吗？如何？

也许您根本不需要重定向：那么`os.system("tclsh tcltest.tcl")`就足够了。或者可能`subprocess.Popen`对您有其他好处——然后弄清楚如何禁用重定向，或者如何将孩子的标准输出重定向到您自己的标准输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-05T21:53:51.280

我想我可能会为您提供解决方案。或者至少尝试一种不同的方法。此示例将 TCL shell 作为进程打开。然后你向它发送命令，就好像你在命令行上一样。既然你说你的命令行有效，我认为这也是。这适用于我在 Windows 上使用 Python 3.7.6 和 TCL 8.5。

需要有一点诡计。我找到了需要线程和各种其他开销来完成这项工作的解决方案，但它们只是失败了。我想出的是简单和同步的。

stdout.readline() 将阻塞。因此，如果您的 TCL 命令没有返回任何内容，那么您就死定了。

因此，您通过附加一个无害的 TCL puts 命令来强制返回某些内容，该命令将工作完成的 Python 脚本通信回。

另一个技巧是您需要“放置 []”命令以强制输出回到标准输出。

如果您需要获取更多 TCL 文件，请在对您尝试运行的文件进行最终调用之前添加这些文件。无论您需要在 cli 上做什么，都可以通过此过程完成。

我的代码将这一切都包装在一个带有方法的类中。我将它们全部集中在一起作为示例。在调试时保留 errorInfo 代码，并在您认为合适的情况下删除。

~~注意：您还可以使用 TCL “info body” 将脚本读入字符串变量，然后运行该过程的每一行。本质上，如果在 Python 调试会话中，单步执行 TCL。~~抱歉，这不太好用。注释的解决方法不适用于打开花括号。

希望这可以帮助那里的人。

编辑：使用多行字符串处理注释行。

```
import subprocess

print("------")
shell_path = r"<YOUR PATH TO THE TCL INTERPRETER SHELL>"
tcl_shell = subprocess.Popen(shell_path,
                    stdin =subprocess.PIPE,
                    stdout=subprocess.PIPE,
                    stderr=subprocess.PIPE,
                    universal_newlines = True,
                    bufsize = 0)

#
# Use ONE of the "command"s below. I have them here in series for exmaples.
#

# Simple
command = r"set temp 5"

# Multiline with error --> This will give an error of course to see the error extraction in action
command = r"""
    set temp 5
    set temp2 [expr temp + 5]
"""

# Multiline working
command = r"""
    set temp 5
    set temp2 [expr $temp + 5]
"""

# More output
command = r"""
    puts "Starting process"
    set temp 5
    puts $temp
    set temp2 [expr $temp + 5]
"""

# Comments handled
command = r"# comment!"

# Be sure to leave the newline to handle comments
tcl_shell.stdin.write(f"""puts [{command}
                                ] \nputs \"tcl_shell_cmd_complete\"\n""")
# NOTE: tcl_shell.stdin.flush() does not seem to be needed. Consider if needed.
result = ""
line = tcl_shell.stdout.readline()
while line != "tcl_shell_cmd_complete\n":
    result += line
    line = tcl_shell.stdout.readline()

print(f"tcl_shell sent:\n{command}")
print(f"tcl_shell result:\n{result}".rstrip())

command_error_check = "puts $errorInfo"
tcl_shell.stdin.write(f"{command_error_check} \nputs \"tcl_shell_cmd_complete\"\n")
resultErr = ""
line = tcl_shell.stdout.readline()
while line != "tcl_shell_cmd_complete\n":
    resultErr += line
    line = tcl_shell.stdout.readline()

print(f"tcl_shell error info:\n{resultErr}")

tcl_shell.stdin.close()
tcl_shell.terminate()
tcl_shell.wait(timeout=0.5)
print("------") 
```

# awk - 使用 AWK 以树状递归方式列出所有目录

> ID：14264119
> 
> 赞同：-1
> 
> 时间：2013-01-10T17:49:32.413
> 
> 标签：awk

> **可能重复：**
> [以树状递归方式列出所有目录](https://stackoverflow.com/questions/14227328/list-all-directories-recursively-in-a-tree-like)

我想模拟一个使用递归显示所有目录的`tree`命令，如下所示：`awk`

```
|____
| |____0
| |____b
| |____c
| | |____a
| | |____w 
```

我使用`sed`：

```
find ./ -type d -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g' 
```

但是我该怎么做`awk`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:40:20.470

你没有表现出任何写东西的尝试，但我做了一些东西，所以我向你展示了我的解决方案。期待这可以帮助您学习一些 awk。

```
find ./ -type d -print | awk -F "/" '{for (i=1; i<=NF-2; i++){printf "| "} print "|____"$NF}' 
```

此 awk 命令用作分隔符“/”（-F 选项）。

并且，对于每一行，打印“|”的次数与字段数 (NF) 减去 2 的次数一样多。最后，它会打印“| *_* ”，然后是最后一个字段 ($NF)。

# c# - 有没有一种将 xaml 绑定到依赖于多个其他属性的属性的好方法？

> ID：14264120
> 
> 赞同：3
> 
> 时间：2013-01-10T17:49:34.397
> 
> 标签：c#, wpf, xaml, dependency-properties

在我的一个 WPF 项目中，我在 XAML 中创建了一个动画故事板，它具有可以在开始动画之前动态更改的计时属性。由于我需要一种方法来更改代码中的值，因此我将它们绑定到类的属性。

基本思想是动画有两个阶段，在情节提要中，我使用 ObjectAnimationUsingKeyFrames ，它占用了总动画时间，所以我有这样的属性：

```
public TimeSpan RaiseTime { get; set }

public TimeSpan FallTime  { get; set; }

public TimeSpan TotalTime
{ 
    get { return RaiseTime + FallTime; }
} 
```

首次创建动画时，它会正确地从这些属性中获取值，但由于它们可以动态更改，我需要一种方法来通知 XAML 这些值已更改。

将 RaiseTime 和 FallTime 转换为 DependencyPropertys 很容易，以便它们的更改将反映在 XAML 绑定中，但是 TotalTime 呢？它本身没有价值，所以我不能把它变成 DP。

昨天我花了几个小时搜索/尝试随机的东西来尝试让它工作并最终使用 MultiBinding 到 RaiseTime 和 FallTime 以及 IMultiValueConverter 来工作，这要归功于一些 SO 问题和博客文章： [将元素绑定到两个来源](https://stackoverflow.com/questions/260439/wpf-bind-an-element-to-two-sources) [http://blog.wpfwonderland.com/2010/04/15/simplify-your-binding-converter-with-a-custom-markup-extension/](http://blog.wpfwonderland.com/2010/04/15/simplify-your-binding-converter-with-a-custom-markup-extension/)

我的问题是：这真的是最好的方法吗？这似乎（至少在我看来）是一个如此简单的任务，但它需要这么多（主要是样板）代码才能开始工作。我认为必须有一种更简单、更简洁的方法来绑定 TotalTime 并将更新推送到 XAML，但我还没有找到。有吗，还是我只是在做梦？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T18:04:58.380

您绝对可以使用 INotifyPropertyChanged 使其工作，然后简单地绑定到该类。

代码看起来像这样：（**未经测试的代码）**

```
public class PleaseChangeTheNameOfThisClass : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public void RaisePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private TimeSpan _raiseTime;
    public TimeSpan RaiseTime
    { 
        get { return _raiseTime; }
        set 
        {
            if (_raiseTime != value)
            {
                _fallTime = value;
                RaisePropertyChanged("RaiseTime");
                RaisePropertyChanged("TotalTime");
            }
        }
    }

    private TimeSpan _fallTime;
    public TimeSpan FallTime  
    { 
        get { return _fallTime; }
        set 
        {
            if (_fallTime != value)
            {
                _fallTime = value;
                RaisePropertyChanged("FallTime");
                RaisePropertyChanged("TotalTime");
            }
        }
    }

    public TimeSpan TotalTime
    { 
        get { return RaiseTime + FallTime; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T22:55:33.760

它可能仍然很冗长，但实际上您可以使用 DependencyProperties 执行此操作：

将“OnChanged”回调附加到更新 DP 的DP`RaiseTime`和DP，并使 TotalTime 只读（不同的 DP 注册语法，并且只有一个私有设置器）：`FallTime``TotalTime`

```
public TimeSpan RaiseTime
{
    get { return (TimeSpan)GetValue(RaiseTimeProperty); }
    set { SetValue(RaiseTimeProperty, value); }
}
public static readonly DependencyProperty RaiseTimeProperty =
    DependencyProperty.Register("RaiseTime", typeof(TimeSpan), typeof(MainWindow),
                                new PropertyMetadata(TimeSpan.Zero, OnRaiseTimeChanged));

private static void OnRaiseTimeChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
{
    var owner = sender as MainWindow;
    owner.TotalTime = owner.RaiseTime + owner.FallTime;
}

public TimeSpan FallTime
{
    get { return (TimeSpan)GetValue(FallTimeProperty); }
    set { SetValue(FallTimeProperty, value); }
}
public static readonly DependencyProperty FallTimeProperty =
    DependencyProperty.Register("FallTime", typeof(TimeSpan), typeof(MainWindow),
                                new PropertyMetadata(TimeSpan.Zero, OnFallTimeChanged));

private static void OnFallTimeChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
{
    var owner = sender as MainWindow;
    owner.TotalTime = owner.RaiseTime + owner.FallTime;
}

/// <summary>
/// Read-only DP:
/// http://msdn.microsoft.com/en-us/library/ms754044.aspx
/// http://www.wpftutorial.net/dependencyproperties.html
/// </summary>
public TimeSpan TotalTime
{
    get { return (TimeSpan)GetValue(TotalTimeProperty); }
    private set { SetValue(TotalTimePropertyKey, value); }
}
public static readonly DependencyPropertyKey TotalTimePropertyKey =
    DependencyProperty.RegisterReadOnly("TotalTime", typeof(TimeSpan), typeof(MainWindow),
                                        new PropertyMetadata(TimeSpan.Zero));

public static readonly DependencyProperty TotalTimeProperty = TotalTimePropertyKey.DependencyProperty; 
```

默认值需要相加（这里：0 + 0 = 0）。之后，`OnRaiseTimeChanged`会`OnFallTimeChanged`不断`TotalTime`更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:59:34.477

我认为这再次简洁一些。请参阅最新 C# 中提供的“CallerMemberName”。

```
public sealed class ViewModel : INotifyPropertyChanged
{
    private TimeSpan _raiseTime;
    private TimeSpan _fallTime;

    public TimeSpan RaiseTime
    {
        get { return _raiseTime; }
        private set
        {
            if (SetProperty(ref _raiseTime, value))
            {
                OnPropertyChanged("TotalTime");
            }
        }
    }

    public TimeSpan FallTime
    {
        get { return _fallTime; }
        private set
        {
            if (SetProperty(ref _fallTime, value))
            {
                OnPropertyChanged("TotalTime");
            }
        }
    }

    public TimeSpan TotalTime
    {
        get { return RaiseTime + FallTime; }
    }

    #region Put these in a base class...

    private bool SetProperty<T>(ref T storage, T value, [CallerMemberName] String propertyName = null)
    {
        if (Equals(storage, value))
        {
            return false;
        }

        storage = value;
        OnPropertyChanged(propertyName);
        return true;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T17:52:18.437

正如您的链接所暗示的，[MultiBinding](http://blog.csainty.com/2009/12/wpf-multibinding-and.html)是标准的方法。

如果您想要模糊的解决方案，您可以创建[自定义标记扩展](http://10rem.net/blog/2011/03/09/creating-a-custom-markup-extension-in-wpf-and-soon-silverlight)。

# vb.net - 使用 iTextSharp 创建目录

> ID：14264123
> 
> 赞同：1
> 
> 时间：2013-01-10T17:49:41.577
> 
> 标签：vb.net, pdf, itextsharp, itext, tableofcontents

我正在处理一些我无法使其工作的代码。

我有一个程序，它需要多个 pdf 并将它们合并到一个文件中。现在我需要在第一页上创建一个目录。您可以查看以下文档的示例。

我想将此外包给`iTextSharp`. 我认为这最多不会超过一两个小时。

要求是：

*   目录将基于书签。
*   目录文本将链接到正确的页面，因此用户可以单击文本转到该页面。
*   必须保留 sampe1.pdf 中的现有书签。
*   页码已经计算好了，所以不必担心。
*   工作代码必须是我给你的 VB.Net 项目文件的一部分。我已经尝试了几个片段但没有运气，我希望它能够正常工作而无需我调整代码。
*   我生成的文件如下所示： http: [//gamepacks.org/sample1.pdf](http://gamepacks.org/sample1.pdf)
*   带有 toc 的文件应如下所示（布局，而不是字体样式）： http: [//gamepacks.org/sample2.pdf](http://gamepacks.org/sample2.pdf)

我会很感激任何可以帮助我的人。

我用来生成 sample1.pdf 的代码看起来像这样，让您了解您需要使用什么。

```
Public Sub MergePdfFiles(ByVal docList As List(Of Portal.DocumentRow), ByVal outputPath As String)
    '
    ' http://www.vbforums.com/showthread.php?475920-Merge-Pdf-Files-and-Add-Bookmarks-to-It-(Using-iTextSharp)
    '
    If docList.Count = 0 Then Exit Sub

    Dim tmpFile As String = "c:\STEP_1_Working.pdf"

    Dim OutlineList As List(Of PdfOutline) = New List(Of PdfOutline)
    Dim FirstPageIndex As Integer = 1           ' Tracks which page to link the bookmark

    Dim result As Boolean = False
    Dim pdfCount As Integer = 0             'total input pdf file count

    Dim fileName As String = String.Empty           'current input pdf filename

    Dim reader As iTextSharp.text.pdf.PdfReader = Nothing
    Dim pageCount As Integer = 0                'current input pdf page count
    Dim doc As iTextSharp.text.Document = Nothing       'the output pdf document
    Dim writer As PdfWriter = Nothing
    Dim cb As PdfContentByte = Nothing

    'Declare a variable to hold the imported pages
    Dim page As PdfImportedPage = Nothing
    Dim rotation As Integer = 0

    'Now loop thru the input pdfs
    For Each row As Portal.DocumentRow In docList
        reader = New iTextSharp.text.pdf.PdfReader(row.FilePath)

        ' Is this the first pdf file
        If (row.Name = docList(0).Name) Then
            doc = New iTextSharp.text.Document(reader.GetPageSizeWithRotation(1), 18, 18, 18, 18)
            writer = PdfWriter.GetInstance(doc, New IO.FileStream(tmpFile, IO.FileMode.Create))

            ' Always show the bookmarks
            writer.ViewerPreferences = PdfWriter.PageModeUseOutlines

            'Set metadata and open the document
            With doc
                .AddAuthor("Sample Title")
                .AddCreationDate()
                .Open()
            End With

            'Instantiate a PdfContentByte object
            cb = writer.DirectContentUnder
        End If

        For i As Integer = 1 To reader.NumberOfPages
            'Get the input page size
            doc.SetPageSize(reader.GetPageSizeWithRotation(i))

            'Create a new page on the output document
            doc.NewPage()

            'If it is the 1st page, we add bookmarks to the page
            If i = 1 Then
                If row.Parent = "" Then
                    Dim oline As PdfOutline = New PdfOutline(cb.RootOutline, PdfAction.GotoLocalPage(FirstPageIndex, New PdfDestination(FirstPageIndex), writer), row.Name)
                Else
                    Dim parent As PdfOutline = Nothing
                    For Each tmp As PdfOutline In cb.RootOutline.Kids
                        If tmp.Title = row.Parent Then
                            parent = tmp
                        End If
                    Next

                    ' Create new group outline
                    If parent Is Nothing Then
                        parent = New PdfOutline(cb.RootOutline, PdfAction.GotoLocalPage(FirstPageIndex, New PdfDestination(FirstPageIndex), writer), row.Parent)
                    End If

                    ' Add to new parent
                    Dim oline As PdfOutline = New PdfOutline(parent, PdfAction.GotoLocalPage(FirstPageIndex, New PdfDestination(FirstPageIndex), writer), row.Name)

                    OutlineList.Add(oline)
                End If

                FirstPageIndex += reader.NumberOfPages
            End If

            'Now we get the imported page
            page = writer.GetImportedPage(reader, i)

            'Read the imported page's rotation
            rotation = reader.GetPageRotation(i)

            'Then add the imported page to the PdfContentByte object as a template based on the page's rotation
            If rotation = 90 Then
                cb.AddTemplate(page, 0, -1.0F, 1.0F, 0, 0, reader.GetPageSizeWithRotation(i).Height)
            ElseIf rotation = 270 Then
                cb.AddTemplate(page, 0, 1.0F, -1.0F, 0, reader.GetPageSizeWithRotation(i).Width + 60, -30)
            Else
                cb.AddTemplate(page, 1.0F, 0, 0, 1.0F, 0, 0)
            End If
        Next
    Next

    doc.Close()

End Sub 
```

# php - rabbitmq 设置消息属性 php

> ID：14264137
> 
> 赞同：2
> 
> 时间：2013-01-10T17:50:30.980
> 
> 标签：php, symfony, rabbitmq, amqp

我正在尝试使用 Symfony 中的[RabbitMQ Bundle](https://github.com/videlalvaro/RabbitMqBundle)设置消息属性，但我不知道在哪里/如何做到这一点。这是我在 RabbitMQ Admin UI 中的操作方式

![在此处输入图像描述](../Images/b012bd23a55e6b213e38b76a5615596e.png)

Properties expire: 50000 是我想要设置的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-22T16:39:53.553

自 2014 年 1 月 8 日以来，您使用[RabbitMQ Bundle设置消息属性，您可以在](https://github.com/videlalvaro/RabbitMqBundle)[此处](https://github.com/videlalvaro/RabbitMqBundle/commit/2f7b50775d2b6712f3abfc1333e202cb4e812e75)查看提交

现在，当您发布消息时，您可以设置数组 $additionalProperties

```
public function publish($msgBody, $routingKey = '', $additionalProperties = array()) 
```

[您可以在此处](https://github.com/videlalvaro/php-amqplib/blob/master/doc/AMQPMessage.md)找到支持的消息属性

例如：

```
$msg = ['arg1' => 'val1'];
$queue->setContentType('application/json');
$queue->publish(
        json_encode($msg),
        "",
        ['expiration' => '50000']
); 
```

如果您想为自定义标头使用“标头”，则要复杂一些，因为您必须为每个值定义数据类型。要发送，例如 $headers['arg1'] = "val1" 像一个字符串，你必须做这样的事情：

```
$msg = ['arg1' => 'val1'];
$queue->setContentType('application/json');
$queue->publish(
        json_encode($msg),
        "",
        ["application_headers" => ["arg1" => ["S", "val1"]]]
); 
```

有效的数据类型是：

S - 字符串

我 - 整数

D - 十进制

T - 时间戳

F - 表

A - 数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:56:09.690

目前这是不可行的。如果使用捆绑包所依赖的底层 php-amqplib 库，则可以设置消息属性

# excel - Excel 2007 使用一个值生成行

> ID：14264138
> 
> 赞同：0
> 
> 时间：2013-01-10T17:50:32.477
> 
> 标签：excel, excel-2007

正如标题所说，我正在 Excel 2007 中构建一个 Excel 工作表。我需要在哪里有一个值字段（在我的例子中是 21，但它可以是从 1 到 ...100 的任何值？），它将生成列从上到下就像我的照片一样[http://i45.tinypic.com/jqtkdk.jpg](http://i45.tinypic.com/jqtkdk.jpg)

岁月也需要随之改变。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:55:55.063

你必须写一个宏！

它很容易！

你做了一个从 1 到 nr 行的“for”循环，然后将 for 循环的值放在第一个单元格中，第二个单元格从 + 1 年以上的行中获取值！（你会为此使用一个变量，而不是上面的行..）

# javascript - 设置div滚动条位置

> ID：14264140
> 
> 赞同：1
> 
> 时间：2013-01-10T17:50:58.560
> 
> 标签：javascript, asp.net, asp.net-ajax, ajaxcontroltoolkit

我有一个用户控件，其中有一个树视图。每次用户展开一个节点时，它都会使用更新面板重新加载。为了防止用户每次重新加载时都必须滚动树视图，我想捕获当前 div 的 scrollTop 值，将其保存到文本框，然后在回发后，获取该值并重新加载它。除了一种奇怪的行为外，一切正常。这是div：

```
<div ID="treePanel" runat="server"  class="treePanel"  onscroll="setScroll(this.scrollTop)" onunload="testScroll()" >
<asp:TextBox ID="scrollTb" runat="server" Text="" ></asp:TextBox>
<asp:TreeView ID="TreeView1" runat="server"  
OnTreeNodeExpanded="Node_Expand" CollapseImageToolTip="Click To Collapse" ExpandImageToolTip="Click To Expand">                     
</asp:TreeView> 
</div> 
```

这是 javascript 函数，位于母版页中：

```
function setScroll(getVal){               
var getTb = document.getElementById("ctl00_ContentPlaceHolder1_rmsStepThree1_scrollTb")            
getTb.value= getVal
}

function testScroll(){
var getTb = document.getElementById("ctl00_ContentPlaceHolder1_rmsStepThree1_scrollTb")         
var getDiv = document.getElementById("ctl00_ContentPlaceHolder1_rmsStepThree1_treePanel")         
getDiv.scrollTop= getTb.value
} 
```

问题是，除非我在 javascript 中添加“Alert()”，否则这将不起作用，如下所示：

```
function testScroll(){
var getTb = document.getElementById("ctl00_ContentPlaceHolder1_rmsStepThree1_scrollTb")         
var getDiv = document.getElementById("ctl00_ContentPlaceHolder1_rmsStepThree1_treePanel")  
alert('some text')       
getDiv.scrollTop= getTb.value
} 
```

谁能解释为什么会这样以及如何补救？我显然不能在那里发出警报。

谢谢杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:06:39.823

警报修复代码通常意味着存在竞争条件。您在 div 完全呈现之前调用代码。警报允许它完全呈现。您不应该在加载新内容后设置滚动位置，而不是在卸载时设置滚动位置吗？

# html - 我们如何一次为 1 个 div 应用 3 个类？

> ID：14264143
> 
> 赞同：3
> 
> 时间：2013-01-10T17:51:07.733
> 
> 标签：html, css

我正在尝试为一个 div 应用类（.text1 .text2 .text3）。

这怎么可能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T17:51:46.783

在 HTML 中，这样写：

```
<div class="text1 text2 text3"></div> 
```

[示范](http://jsfiddle.net/n2Xee/)

在 Javascript 中，执行以下操作：

```
myDiv.className = "text1 text2 text3"; 
```

[示范](http://jsfiddle.net/fP7gb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:52:53.073

在 css 中是这样的：

```
.text1.text2.text3 { 
    color: #BADA55;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:53:10.047

您还可以使用以下选择器来定位具有所有 3 个类的 div

```
.text1.text2.text3 {

} 
```

# magento - Magento 以编程方式部分退款

> ID：14264146
> 
> 赞同：2
> 
> 时间：2013-01-10T17:51:44.347
> 
> 标签：magento, partial, memo

如何创建部分创建备忘录？即，如果总订单价值为 50 英镑，我想创建 10 英镑的贷项通知单。我正在使用以下代码创建贷项通知单：

```
function createCreditMemo($orderId) {
$order = Mage::getModel('sales/order')->load($orderId, 'increment_id');
if (!$order->getId()) {
    print_r('order_not_exists');
}
if (!$order->canCreditmemo()) {
    Mage::log('cannot_create_creditmemo', null, 'product.txt');
    print_r('cannot_create_creditmemo');
}
$data = array();
$refundToStoreCreditAmount = '10.22';

$service = Mage::getModel('sales/service_order', $order);

$creditmemo = $service->prepareCreditmemo($data);

// refund to Store Credit
if ($refundToStoreCreditAmount) {
    // check if refund to Store Credit is available
    if ($order->getCustomerIsGuest()) {
        print_r('cannot_refund_to_storecredit');
    }
    $refundToStoreCreditAmount = max(
        0,
        min($creditmemo->getBaseCustomerBalanceReturnMax(), $refundToStoreCreditAmount)
    );

    if ($refundToStoreCreditAmount) {
        $refundToStoreCreditAmount = $creditmemo->getStore()->roundPrice($refundToStoreCreditAmount);

        $creditmemo->setBaseCustomerBalanceTotalRefunded($refundToStoreCreditAmount);
        $refundToStoreCreditAmount = $creditmemo->getStore()->roundPrice(
            $refundToStoreCreditAmount*$order->getStoreToOrderRate()
        );
        // this field can be used by customer balance observer
        $creditmemo->setBsCustomerBalTotalRefunded($refundToStoreCreditAmount);
        // setting flag to make actual refund to customer balance after credit memo save
        $creditmemo->setCustomerBalanceRefundFlag(true);
        print_r($refundToStoreCreditAmount.'<br/>');
        //die('2');
    }

}
//Mage::log($creditmemo, null, 'product.txt');
$creditmemo->setPaymentRefundDisallowed(true);

$creditmemo->register();

$orderCreditMemoStatusCode = Mage_Sales_Model_Order::STATE_CLOSED;
$orderCreditMemoStatusComment = 'Order Refunded.';
$saveTransaction = Mage::getModel('core/resource_transaction')->addObject ($creditmemo )->addObject ( $order )->save ();
$order->addStatusToHistory ( $orderCreditMemoStatusCode, $orderCreditMemoStatusComment, true );

$notifyCustomer = true;
$comment = 'testing refund';
$includeComment = true;

$creditmemo->setEmailSent(true);

// add comment to creditmemo
if (!empty($comment)) {
    $creditmemo->addComment($comment, $notifyCustomer);
}

try {
    Mage::getModel('core/resource_transaction')
        ->addObject($creditmemo)
        ->addObject($order)
        ->save();
    // send email notification

    $creditmemo->sendEmail($notifyCustomer, ($includeComment ? $comment : ''));
} catch (Mage_Core_Exception $e) {
    print_r('data_invalid', $e->getMessage());
}

echo $creditmemo->getIncrementId(); 
```

}

在下面的代码中，即使我设置`$refundToStoreCreditAmount = 10;`它仍然会全额退款。知道如何部分退款吗？

# ruby-on-rails - Capybara 验收测试：未定义的方法 `visit' for # 我正在将一个旧的 krufty 应用程序升级到 Rails 3.1。该公司一直在使用 RSpec 和 Capybara 进行验收测试。我们有一些验收测试spec/acceptance失败，并显示以下消息： Failure/Error: get @url NoMethodErr 问问题 问问题 2013-01-10T17:52:05.670 951 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在将一个旧的 krufty 应用程序升级到 Rails 3.1。该公司一直在使用 RSpec 和 Capybara 进行验收测试。我们有一些验收测试spec/acceptance失败，并显示以下消息： Failure/Error: get @url NoMethodError: undefined method `get' for # <rspec::core::examplegroup::nested_1::nested_1:0x007feb7c0abf58>这是其中一项测试的示例（来自文件顶部）： require_relative 'acceptance_helper' feature 'Catalog' do before do Settings.use_catalog_navigation = true end context 'with a Vendor' do before do @vendor = create(:vendor, slug: 'abc') @product = create(:product_with_variants, vendor: @vendor) @non_vendor_product = create(:product_with_variants) @invisible_product = create(:product_with_variants, vendor: @vendor, visible: false) @non_available_product = create(:product_with_variants, vendor: @vendor, available: false) @url = "/#{@vendor.slug}" end it 'sets @vendor' do # <- FIRST FAILING TEST get @url assigns(:vendor).should == @vendor end ... 在咨询 oracle 时，我不断遇到提到“访问”方法的问题，例如： https ://github.com/jnicklas/capybara/issues/814 我也经常看到与这篇文章相关的帖子：http: //alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html 我不确定我是否有同样的问题。我可以发布我的spec_helper.rb，acceptance_helper.rb如果它们有任何用处。 我想值得注意的是，这些规范在我更新 rspec-rails 和 capybara 之前就已经通过了。 我的直觉是，也许 rspec-rails 正在破坏 capybara 的某些方法，或者 capybara 的某些方法根本不再被加载。这可能是问题吗？ 正如您的链接所暗示的，MultiBinding是标准的方法。 如果您想要模糊的解决方案，您可以创建自定义标记扩展。 ruby-on-railsruby-on-rails-3rspeccapybaraacceptance-testing 4 1 回答 1 This answer is useful 0 尝试config.include Capybara::DSL在spec_helper.rbconfig 块中添加。像这样： RSpec.configure do |config| config.include Capybara::DSL 于 2014-05-14T23:49:30.783 回答 Related 1 eclipse - 有没有办法将 plugin.xml 作为对象加载？ 1 javascript - chrome.tabs.query：属性'currentWindow'：意外 2 cocoa - 将热键添加到 NSTextField 1 struts2 - 我们是否必须在指定自己的拦截器的操作中明确提及 defaultStack？ 2 vba - 在 Excel 中自动添加加载项的单个菜单项 1 xml - 如何在我的函数中检查以下兄弟是 w:tbl 并使用 xslt2.0 应用我的模板？ 3 java - SQL 错误 ORA-00933 4 air - ImageMagick 独立打包到应用程序中 1 xpath - 在 xpath 中设置联合运算符 5 java - JTextField 需要留空并进行不区分大小写的搜索 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</rspec::core::examplegroup::nested_1::nested_1:0x007feb7c0abf58>

> ID：14264151
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara, acceptance-testing

我正在将一个旧的 krufty 应用程序升级到 Rails 3.1。该公司一直在使用 RSpec 和 Capybara 进行验收测试。我们有一些验收测试`spec/acceptance`失败，并显示以下消息：

```
Failure/Error: get @url
 NoMethodError:
   undefined method `get' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007feb7c0abf58> 
```

这是其中一项测试的示例（来自文件顶部）：

```
require_relative 'acceptance_helper'                                                                                                                                                 

feature 'Catalog' do                                                                                                                                                                 
  before do                                                                                                                                                                          
    Settings.use_catalog_navigation = true                                                                                                                                           
  end                                                                                                                                                                                

  context 'with a Vendor' do                                                                                                                                                         
    before do                                                                                                                                                                        
      @vendor = create(:vendor, slug: 'abc')                                                                                                                                         
      @product = create(:product_with_variants, vendor: @vendor)                                                                                                                     

      @non_vendor_product = create(:product_with_variants)                                                                                                                           
      @invisible_product = create(:product_with_variants,                                                                                                                            
                                   vendor: @vendor,                                                                                                                                  
                                   visible: false)                                                                                                                                   
      @non_available_product = create(:product_with_variants,                                                                                                                        
                                       vendor: @vendor,                                                                                                                              
                                       available: false)                                                                                                                             

      @url = "/#{@vendor.slug}"                                                                                                                                                      
    end                                                                                                                                                                              

    it 'sets @vendor' do   # <- FIRST FAILING TEST                                                                                                                                                          
      get @url                                                                                                                                                                       
      assigns(:vendor).should == @vendor                                                                                                                                             
    end

    ... 
```

在咨询 oracle 时，我不断遇到提到“访问”方法的问题，例如： [https ://github.com/jnicklas/capybara/issues/814](https://github.com/jnicklas/capybara/issues/814)

我也经常看到与这篇文章相关的帖子：http: [//alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html](http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html)

我不确定我是否有同样的问题。我可以发布我的`spec_helper.rb`，`acceptance_helper.rb`如果它们有任何用处。

我想值得注意的是，这些规范在我更新 rspec-rails 和 capybara 之前就已经通过了。

我的直觉是，也许 rspec-rails 正在破坏 capybara 的某些方法，或者 capybara 的某些方法根本不再被加载。这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T23:49:30.783

尝试`config.include Capybara::DSL`在`spec_helper.rb`config 块中添加。像这样：

```
RSpec.configure do |config|
  config.include Capybara::DSL 
```

# model-view-controller - Extjs4 mvc模板化数据未呈现

> ID：14264153
> 
> 赞同：0
> 
> 时间：2013-01-10T17:52:16.347
> 
> 标签：model-view-controller, extjs, extjs4, extjs4.1, extjs-mvc

我正在使用 mvc 嵌套加载示例：[http](http://docs.sencha.com/ext-js/4-1/#!/example/app/nested-loading/nested-loading.html) ://docs.sencha.com/ext-js/4-1/#!/example/app/nested-loading/nested-loading.html 。在尝试以此构建我自己的项目时，我在尝试在我的内容视图中呈现数据时遇到了问题。由于某种原因，模板数据未加载。我觉得这与 xtype: 'component' 有关。我将其更改为面板，我看到了边框，但仍然没有数据。我还包含了 app.jsb3 文件，但这也不起作用。我可以看到绑定方法中列出的数据，但被添加了。

我的json数据：

```
[
  {id: 1, name: 'This is page one', url: 'http://my.test.com/test.html'},
  {id: 2, name: 'This is page two', url: 'http://my.test.com/test2.html'}
] 
```

我的模型：

```
Ext.define('TST.model.Projects', {
    extend: 'Ext.data.Model',
    fields: ['id', 'name', 'url']
}); 
```

我的店铺：

```
Ext.define('TST.store.Projects', {
    extend: 'Ext.data.Store',
    model: 'RLA.model.Projects',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        url : 'resources/json/projects.json'
    }
}); 
```

我的控制器：

```
Ext.define('TST.controller.Menu', {
    extend: 'Ext.app.Controller',
    stores: ['Projects'],
    models: ['Projects'],
    refs: [
        {ref: 'mainLeftMenu', selector: 'mainleftmenu'},
        {ref: 'mainContent', selector: 'maincontent'}
    ],

    init: function() {
        this.control({   
            'mainleftmenu': { selectionchange: this.onLeftMenuChange },
        });

        this.getProjectsStore().on({
            scope: this,
            load : this.onProjectsStoreLoad
        });

    },

    onProjectsStoreLoad: function(store, records) {

        Ext.defer(function() {
            if (records.length) {
                var record = records[0];               
                this.getMainLeftMenu().getSelectionModel().select(record);
                 console.log("iamhere");
            }
        }, 500, this);
    },

    /* load the project menu items */
    onLaunch: function() {
        this.getMainLeftMenu().bindStore(this.getProjectsStore());
    },

    /* update content on new selection */
    onLeftMenuChange: function (view, records) {
        if (records.length) {
            this.showContent(records[0]);
        }
    },

    showContent: function(record) {
        this.getMainContent().bind(record);
    }

}); 
```

这是我的 leftContent 视图：

```
Ext.define('TST.view.main.LeftMenu', {
    extend: 'Ext.view.View',
    alias: 'widget.mainleftmenu',

    initComponent: function() {
        Ext.apply(this, {

            id: 'leftmenu',
            dock: 'left',
            width: 200,
            border: true,
            cls: 'leftMenu',
            selModel: {
                deselectOnContainerClick: false
            },
            itemSelector: '.items',
            tpl: [
                '<div class="menuTitle">Projects</div>',
                '<tpl for=".">',
                '<div class="items">{name}</div>',
                '</tpl>'
            ]
        });

        this.callParent(arguments);
    }
}); 
```

这是我的内容视图：

```
Ext.define('TST.view.main.Content', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.maincontent',

    initComponent: function() {
        Ext.apply(this, {
           cls: 'content',
           flex: 2,
           border: false,
           autoScroll: true,
           layout: {
               type: 'hbox',
               align: 'middle',
               pack: 'center',
               availableSpaceOffset: Ext.getScrollbarSize().width
           },

            items: [
                {
                xtype: 'component',  // think it has something to do with this?
                itemId: 'contentCt',
                width: 500,
                height: 200,
                border: 2,
                tpl: [
                    '<div class="url">{url}</div>'
                ]
            }]
        });

        this.callParent(arguments);
    },

    bind: function(record) {
        this.child('#contentCt').update(record.getData());
    }
}); 
```

firebug 显示 record.getData() 返回：

```
object { id=1, name="This is page one", url="http://my.test.com/test.html"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:37:25.787

您将需要发布更多代码，因为这没有问题：

```
Ext.define('TST.view.main.Content', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.maincontent',

    initComponent: function() {
        Ext.apply(this, {
            cls: 'content',
            flex: 2,
            border: false,
            autoScroll: true,
            layout: {
                type: 'hbox',
                align: 'middle',
                pack: 'center',
                availableSpaceOffset: Ext.getScrollbarSize().width
            },

            items: [{
                xtype: 'component', // think it has something to do with this?
                itemId: 'contentCt',
                width: 500,
                height: 200,
                border: 2,
                tpl: ['<div class="url">{url}</div>']
            }]
        });

        this.callParent(arguments);
    },

    bind: function(data) {
        this.child('#contentCt').update(data);
    }
}); 

Ext.onReady(function(){
    var p = new TST.view.main.Content({
        width: 500,
        height: 200,
        renderTo: document.body
    });
    p.bind({
        url: 'foo'
    });
}); 
```

# python - 我可以部分覆盖 __setattr__ 吗？

> ID：14264156
> 
> 赞同：5
> 
> 时间：2013-01-10T17:52:23.490
> 
> 标签：python

我正在模仿`ConfigParser`模块的行为来编写一个高度专业化的解析器，该解析器利用我使用的特定应用程序的配置文件中的一些明确定义的结构。这些文件遵循标准 INI 结构：

```
[SectionA]
key1=value1
key2=value2

[SectionB]
key3=value3
key4=value4 
```

对于我的应用程序，这些部分在很大程度上是无关紧要的；不同部分的键之间没有重叠，所有用户只记得键名，而不是他们应该进入的部分。因此，我想覆盖`__getattr__`并`__setattr__`在`MyParser`我创建的类中允许快捷方式像这样：

```
config = MyParser('myfile.cfg')
config.key2 = 'foo' 
```

该`__setattr__`方法将首先尝试找到一个名为的部分`key2`并将其设置为“foo”（如果存在）。假设没有这样的部分，它会在每个部分内部查找一个名为`key2`. 如果键存在，则将其设置为新值。如果它不存在，解析器最终会引发一个`AttributeError`.

我已经为此构建了一个测试实现，但问题是我还希望有几个直接属性可以免除这种行为。我想`config.filename`成为一个包含原始文件名称的简单字符串，并`config.content`成为包含每个部分的字典的字典。

是否有一种干净的方法可以在构造函数中设置`filename`and`content`属性，以免它们被我的自定义 getter 和 setter 忽略？`__dict__`在调用 custom 之前，python 会在对象中查找属性`__setattr__`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T18:00:39.933

传给超`filename`类`content`来处理

```
class MyParser(object):
    def __setattr__(self, k, v):
        if k in ['filename', 'content']:
            super(MyParser, self).__setattr__(k, v)
        else:
                # mydict.update(mynewattr) # dict handles other attrs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:01:24.190

我认为为文件的内容提供一个类似字典的界面并为内部目的保留属性访问可能会更简洁。然而，这只是我的意见。

为了回答你的问题，`__setattr__()`在 check in 之前调用`__dict__`，所以你可以像这样实现它：

```
class MyParser(object):

    specials = ("filename", "content")

    def __setattr__(self, attr, value):
        if attr in MyParser.specials:
            self.__dict__[attr] = value
        else:
            # Implement your special behaviour here 
```

# java - 更改Activity时Android应用程序内存不足错误

> ID：14264160
> 
> 赞同：1
> 
> 时间：2013-01-10T17:52:34.663
> 
> 标签：java, android, image, memory, memory-leaks

我的名字是约翰，我正在开发这个应用程序，我有 2 种类型的用户，每种类型都有 2 种菜单样式视图。

会发生什么 有时应用程序会崩溃。LogCat 显示“Out of memory on a 11612176-byte allocation”。

这是我在活动之间切换的部分代码：

```
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
    getApplicationContext(), R.array.array_teste,
    android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view,
                int pos, long id) {

            if (parent.getItemAtPosition(pos).toString().equals("Formador")) {
                Intent i = new Intent(getApplicationContext(),
                        FormadorActivity.class);
                finish();
                startActivity(i);
            }
            //
        }

        public void onNothingSelected(AdapterView<?> parent) {
        }
    }); 
```

我几乎可以肯定我正在使用的图像做错了什么。我希望你们中的一些人能给我一点帮助，我整个星期都在努力解决这个问题。

感谢您的关注！

更新 - -

我正在测试的设备是 Galaxy SII GT-I9100

这是 LogCat ：

```
01-10 16:03:36.243: W/ResourceType(5624): Failure getting entry for 0x010802c0 (t=7 e=704) in package 0 (error -75)
01-10 16:03:37.098: D/dalvikvm(5624): GC_FOR_ALLOC freed 5069K, 45% free 21876K/39175K, paused 32ms, total 32ms
01-10 16:03:37.098: D/AbsListView(5624): [unregisterDoubleTapMotionListener]
01-10 16:03:37.103: I/dalvikvm-heap(5624): Grow heap (frag case) to 26.900MB for 5160976-byte allocation
01-10 16:03:37.153: D/dalvikvm(5624): GC_FOR_ALLOC freed 2K, 32% free 26914K/39175K, paused 48ms, total 48ms
01-10 16:03:37.168: I/MotionRecognitionManager(5624):   .unregisterListener : / listener count = 0->0, ubvf 9budiwrd5ordgfl5BakTrklMrfo$,@,*8b-:)(
01-10 16:03:37.213: D/dalvikvm(5624): GC_CONCURRENT freed 67K, 32% free 26848K/39175K, paused 12ms+4ms, total 60ms
01-10 16:03:37.498: D/dalvikvm(5624): GC_FOR_ALLOC freed 112K, 32% free 26735K/39175K, paused 22ms, total 22ms
01-10 16:03:37.498: I/dalvikvm-heap(5624): Forcing collection of SoftReferences for 11612176-byte allocation
01-10 16:03:37.538: D/dalvikvm(5624): GC_BEFORE_OOM freed 0K, 32% free 26735K/39175K, paused 38ms, total 38ms
01-10 16:03:37.538: E/dalvikvm-heap(5624): Out of memory on a 11612176-byte allocation.
01-10 16:03:37.538: I/dalvikvm(5624): "main" prio=5 tid=1 RUNNABLE
01-10 16:03:37.538: I/dalvikvm(5624):   | group="main" sCount=0 dsCount=0 obj=0x40d4d508 self=0x40d3c5a8
01-10 16:03:37.538: I/dalvikvm(5624):   | sysTid=5624 nice=0 sched=0/0 cgrp=apps handle=1075482416
01-10 16:03:37.538: I/dalvikvm(5624):   | schedstat=( 9495706032 3145201445 10530 ) utm=821 stm=128 core=1
01-10 16:03:37.538: I/dalvikvm(5624):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
01-10 16:03:37.548: I/dalvikvm(5624):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:625)
01-10 16:03:37.548: I/dalvikvm(5624):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:478)
01-10 16:03:37.548: I/dalvikvm(5624):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
01-10 16:03:37.548: I/dalvikvm(5624):   at android.content.res.Resources.loadDrawable(Resources.java:1963)
01-10 16:03:37.548: I/dalvikvm(5624):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-10 16:03:37.558: I/dalvikvm(5624):   at android.widget.ImageView.<init>(ImageView.java:120)
01-10 16:03:37.558: I/dalvikvm(5624):   at android.widget.ImageView.<init>(ImageView.java:110)
01-10 16:03:37.558: I/dalvikvm(5624):   at java.lang.reflect.Constructor.constructNative(Native Method)
01-10 16:03:37.558: I/dalvikvm(5624):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-10 16:03:37.563: I/dalvikvm(5624):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
01-10 16:03:37.563: I/dalvikvm(5624):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-10 16:03:37.563: I/dalvikvm(5624):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-10 16:03:37.563: I/dalvikvm(5624):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-10 16:03:37.563: I/dalvikvm(5624):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-10 16:03:37.563: I/dalvikvm(5624):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
01-10 16:03:37.563: I/dalvikvm(5624):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
01-10 16:03:37.563: I/dalvikvm(5624):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-10 16:03:37.563: I/dalvikvm(5624):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-10 16:03:37.568: I/dalvikvm(5624):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-10 16:03:37.568: I/dalvikvm(5624):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:313)
01-10 16:03:37.568: I/dalvikvm(5624):   at android.app.Activity.setContentView(Activity.java:1924)
01-10 16:03:37.573: I/dalvikvm(5624):   at com.anfengde.ui.call.FormadorActivity.onCreate(FormadorActivity.java:62)
01-10 16:03:37.573: I/dalvikvm(5624):   at android.app.Activity.performCreate(Activity.java:5206)
01-10 16:03:37.573: I/dalvikvm(5624):   at  android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
01-10 16:03:37.573: I/dalvikvm(5624):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2074)
01-10 16:03:37.573: I/dalvikvm(5624):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
01-10 16:03:37.573: I/dalvikvm(5624):   at android.app.ActivityThread.access$700(ActivityThread.java:140)
01-10 16:03:37.573: I/dalvikvm(5624):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
01-10 16:03:37.573: I/dalvikvm(5624):   at android.os.Handler.dispatchMessage(Handler.java:99)
01-10 16:03:37.573: I/dalvikvm(5624):   at android.os.Looper.loop(Looper.java:137)
01-10 16:03:37.573: I/dalvikvm(5624):   at android.app.ActivityThread.main(ActivityThread.java:4921)
01-10 16:03:37.573: I/dalvikvm(5624):   at java.lang.reflect.Method.invokeNative(Native Method)
01-10 16:03:37.573: I/dalvikvm(5624):   at java.lang.reflect.Method.invoke(Method.java:511)
01-10 16:03:37.573: I/dalvikvm(5624):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
01-10 16:03:37.573: I/dalvikvm(5624):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
01-10 16:03:37.573: I/dalvikvm(5624):   at dalvik.system.NativeStart.main(Native Method)
01-10 16:03:37.578: A/libc(5624): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 5624 (nfengde.ui.call)" 
```

更新 - - - - - - - - - - - - -

这是我认为可能导致错误的代码：

我在 onCreate() 和 onRestart() 上的两个活动上都这样做

```
settings = getSharedPreferences("MyPreferenceFile", 0);
if (settings.getString("estantePadrao", "teste").equals("Claro")) {
    id = getResources().getIdentifier("estante_cursista_v01",
        "drawable", getPackageName());
    imagemPrateleira.setImageResource(id);
} else {
    if (settings.getString("estantePadrao", "teste").equals("Escuro")) {
        id = getResources().getIdentifier("estante_cursista_v02",
            "drawable", getPackageName());
        imagemPrateleira.setImageResource(id);
    } else {
        id = getResources().getIdentifier("estante_cursista_v03",
            "drawable", getPackageName());
        imagemPrateleira.setImageResource(id);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:48:04.847

我发现我在手机中安装的 ROM 存在内存泄漏，导致应用程序崩溃。

我在其他设备上测试过，它工作正常。

感谢大家的帮助和支持！

# java - 从不同的 Eclipse 插件项目调用类

> ID：14264161
> 
> 赞同：0
> 
> 时间：2013-01-10T17:52:42.027
> 
> 标签：java, eclipse, eclipse-plugin

我有两个不同的 Eclipse 插件项目，我想在 proj2 中从 proj1 调用类，我应该执行哪些步骤？

我试图通过在项目属性上右键单击选项卡并在选项卡项目中将项目 proj1 添加到 project2 来做到这一点，但没有成功。它不知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:00:42.903

如果您正在使用插件项目，则它们只能根据其插件清单文件依赖其他插件和 .jar 文件。在 Plug-In Manifest Editor 中打开 proj2 的 MANIFEST.MF 文件，然后从 Dependency 选项卡中将 proj1 添加为必需的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:49:56.080

有时 Eclipse 会感到困惑，或者自己不使用您更改的配置。通常它有助于强制 eclipse 重新构建所有项目。

主菜单：“项目”比单击“清理...”选择“清理所有项目”并按“确定”

# python - 从列表中的一个字符串中搜索任何单词或单词组合（python）

> ID：14264163
> 
> 赞同：3
> 
> 时间：2013-01-10T17:52:51.047
> 
> 标签：python, string, search, combinations, permutation

我有一个字符串（例如：）`"alpha beta charlie, delta&epsilon foxtrot"`和一个列表（例如`["zero","omega virginia","apple beta charlie"]`）。有没有一种方便的方法来遍历字符串中的每个单词和单词组合以便在列表中搜索它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-03T07:36:11.500

## 目的

您说的是组合，但组合在语义上是无序的，您的意思是，您打算找到由空格连接的所有有序排列与目标列表的交集。

首先，我们需要导入我们打算使用的库。

```
import re
import itertools 
```

## 拆分字符串

不要拆分字符，您正在对不包括奇怪字符的单词进行语义搜索。由`re`模块提供支持的正则表达式非常适合这一点。在原始 Python 字符串中`r''`，我们使用正则表达式来表示单词的边缘，围绕任何大于或等于一的数字的`\b`字母数字字符（和`_`），。`\w``+`

`re.findall`返回每个匹配项的列表。

```
re_pattern = r'\b\w+\b'
silly_string = 'alpha beta charlie, delta&epsilon foxtrot'
words = re.findall(re_pattern, silly_string) 
```

在这里，words 是我们的单词表：

```
>>> print words
['alpha', 'beta', 'charlie', 'delta', 'epsilon', 'foxtrot'] 
```

## 创建排列

继续，我们更喜欢使用生成器来操作我们的数据，以避免在我们需要之前不必要地物化数据并将大型数据集保存在内存中。itertools 库有一些很好的函数，可以很好地满足我们提供上述单词的所有排列并将它们链接到单个迭代中的需求：

```
_gen = (itertools.permutations(words, i + 1) for i in xrange(len(words)))
all_permutations_gen = itertools.chain(*_gen) 
```

列出 all_permutations_gen`list(all_permutations_gen)`会给我们：

> [('alpha',), ('beta',), ('charlie',), ('delta',), ('epsilon',), ('foxtrot',), ('alpha', 'beta '), ('alpha', 'charlie'), ('alpha', 'delta'), ('alpha', 'epsilon'), ('alpha', 'foxtrot'), ('beta', 'alpha '), ('beta', 'charlie'), ('beta', 'delta'), ('beta', 'epsilon'), ('beta', 'foxtrot'), ('charlie', 'alpha '), ('charlie', 'beta'), ('charlie', 'delta'), ('charlie', 'epsilon'), ('charlie', 'foxtrot'), ('delta', 'alpha '), ('delta', 'beta'), ('delta', 'charlie'), ('delta', 'epsilon'), ('delta', 'foxtrot'), ('epsilon', 'alpha'), ('epsilon', 'beta'), ('epsilon', 'charlie'), ('epsilon', 'delta'), (' epsilon', 'foxtrot'), ('foxtrot', 'alpha'), ('foxtrot', 'beta'), ('foxtrot', 'charlie'), ('foxtrot', 'delta'), ('狐步舞', 'epsilon'), ('alpha', 'beta', 'charlie'), ('alpha', 'beta', 'delta'), ...charlie'), ('foxtrot', 'delta'), ('foxtrot', 'epsilon'), ('alpha', 'beta', 'charlie'), ('alpha', 'beta', 'delta' ), ...charlie'), ('foxtrot', 'delta'), ('foxtrot', 'epsilon'), ('alpha', 'beta', 'charlie'), ('alpha', 'beta', 'delta' ), ...

如果我们将生成器具体化为列表而不是集合，打印前 20 个项目将显示：

```
>>> print all_permutations[:20] # this only works if you cast as a list instead
['alpha', 'beta', 'charlie', 'delta', 'epsilon', 'foxtrot', 'alpha beta', 'alpha charlie', 'alpha delta', 'alpha epsilon', 'alpha foxtrot', 'beta alpha', 'beta charlie', 'beta delta', 'beta epsilon', 'beta foxtrot', 'charlie alpha', 'charlie beta', 'charlie delta', 'charlie epsilon'] 
```

但这会在我们准备好之前耗尽发电机。因此，现在我们得到了这些单词的所有排列的集合

```
all_permutations = set(' '.join(i) for i in all_permutations_gen) 
```

## 检查目标列表中任何排列的成员资格

所以我们看到，我们现在可以搜索与目标列表的交集：

```
>>> target_list = ["zero","omega virginia","apple beta charlie"]
>>> all_permutations.intersection(target_list)
set([]) 
```

在这种情况下，对于给出的示例，我们得到空集，但是如果我们的排列集中的目标中有一个字符串：

```
>>> target_list_2 = ["apple beta charlie", "foxtrot alpha beta charlie"]
>>> all_permutations.intersection(target_list_2)
set(['foxtrot alpha beta charlie']) 
```

# delphi - Delphi Indy 相当于 Python 的 Socket.recv？

> ID：14264165
> 
> 赞同：2
> 
> 时间：2013-01-10T17:52:52.730
> 
> 标签：delphi, indy, recv

我在 Python 中有这个代码片段：

```
s = socket.create_connection(('192.168.0.111', 123), timeout=2.0)
s.sendall('REQUEST,status,interface'); result = s.recv(1024) 
```

如何使用 Indy 组件中的 TIdTCPClient 在 Delphi 中执行“s.recv(1024)”？服务器返回一个没有任何终止符的字符串，所以 ReadLn 不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T02:31:16.560

在 Python 中，`recv(1024)`只需读取套接字上可用的任何内容，最多 1024 个字节。可以用`TIdTCPClient`（见下文）做同样的事情，但这不是处理套接字编程的最佳方式。您确实需要知道服务器实际上是如何终止数据的。发送数据后是否关闭连接的末端？如果不是，它是否希望您简单地读取任何可用的字节而不管实际长度如何？如果是这样，它希望您如何处理 TCP 数据包碎片（TCP/IP 可以将传输的数据分成多个数据包，并且即使它们不是这样发送的，也可以将数据作为多个数据包接收）？它是否希望您继续阅读，直到发生超时，表明不再发送数据？

它对您编写代码以正确处理读取的方式有很大的影响。例如：

```
IdTCPClient1.Host := '192.168.0.111';
IdTCPClient1.Port := 123;
IdTCPClient1.ConnectTimeout := 2000;
IdTCPClient1.Connect;
try
  IdTCPClient1.IOHandler.Write('REQUEST, status, interface');

  // wait for a disconnect then return everything that was received
  Result := IdTCPClient1.IOHandler.AllData;
finally
  IdTCPClient1.Disconnect;
end; 
```

对比：

```
IdTCPClient1.Host := '192.168.0.111';
IdTCPClient1.Port := 123;
IdTCPClient1.ConnectTimeout := 2000;
IdTCPClient1.Connect;
try
  IdTCPClient1.IOHandler.Write('REQUEST, status, interface');

  // set the max number of bytes to read at one time
  IdTCPClient1.IOHandler.RecvBufferSize := 1024;

  // read whatever is currently in the socket's receive buffer, up to RecvBufferSize number of bytes
  IdTCPClient1.IOHandler.CheckForDataOnSource;

  // return whatever was actually read
  Result := IdTCPClient1.IOHandler.InputBufferAsString;
finally
  IdTCPClient1.Disconnect;
end; 
```

对比：

```
IdTCPClient1.Host := '192.168.0.111';
IdTCPClient1.Port := 123;
IdTCPClient1.ConnectTimeout := 2000;
IdTCPClient1.Connect;
try
  IdTCPClient1.IOHandler.Write('REQUEST, status, interface');

  // keep reading until 5s of idleness elapses
  repeat until not IdTCPClient1.IOHandler.CheckForDataOnSource(5000);

  // return whatever was actually read
  Result := IdTCPClient1.IOHandler.InputBufferAsString;
finally
  IdTCPClient1.Disconnect;
end; 
```

# arrays - 后效检查数组中的值

> ID：14264167
> 
> 赞同：0
> 
> 时间：2013-01-10T17:52:54.627
> 
> 标签：arrays, date, if-statement, after-effects

我有一个天气图模板。我希望月亮图标在某些日期自动更改为满月。

所以我需要表达式来检查今天的日期是否是某个数组或列表的一部分，或者它是如何被调用的。

所以我做了一个文本层，显示当前日期

```
D = new Date(Date(0));
D.getDate() + "/" + (D.getMonth()+1) + "/" + D.getFullYear() 
```

我将此表达式应用于满月图标的不透明度

```
d = thisComp.layer("theDateLayer").text.sourceText;
vis = transform.opacity;
year = 2013;
fullM = ["27/3","25/4","25/5","23/6","22/7","21/8","19/9","19/10","17/11","17/12"];

if (d == fullM"/year")
vis = 100
else
vis = 0; 
```

但它不起作用。我猜是因为日期必须与整个数组相同。我需要写下我只需要其中的任何项目。如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:53:18.120

你想用这个语句来完成`d == fullM"/year"`什么？我想你可能正在尝试做这样的事情：

```
d = thisComp.layer("asdf").text.sourceText;
year = "2013";
fullM = ["27/3","25/4","25/5","23/6","22/7","21/8","19/9","19/10","17/11","17/12"];

for(var i = 0; i < fullM.length; i++) {
    if(d == fullM[i] +"/"+ year) {
        100;
        break;
    } else {
        0;
        break;
    }
} 
```

...假设该`sourceText`层的 是一个等效的字符串。我的代码使用 for 循环遍历 fullM 数组。您应该阅读[JavaScript for loops](http://www.w3schools.com/js/js_loop_for.asp)。

# api - REST API 路由结构

> ID：14264171
> 
> 赞同：0
> 
> 时间：2013-01-10T17:53:11.543
> 
> 标签：api, node.js, rest

在决定哪个路由更 RESTful 时遇到了一些麻烦。为了简要介绍一下，我正在为抽奖应用程序构建一个 API。最高级别是客户，其次是抽奖，然后是提交。

我对创建新抽奖和提交的最佳途径感到困惑。

**选项1**

```
POST /sweepstakes [passing along client_id as a parameter] 
```

**选项 2**

```
POST /clients/:client_id/sweepstakes [using client id in route to create] 
```

这是我所有路线的 GIST。希望有人可以帮助我。[https://gist.github.com/4504221](https://gist.github.com/4504221)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:34:44.793

我不会费心让 REST URI 代表层次结构。

```
/client/:client_id should return a list of the client's sweepstakes URIs (among other data.)
/sweepstakes/:sweepstakes_id will return a list of all submissions URIs for that sweepstakes id (among other data.)
/submission/:submission_id is exactly what you think. 
```

这很简单，但我想不出让 URI 更复杂的理由。如果我遗漏了什么，请告诉我。

编辑：哦，您指的是创建资源：

我仍然会使用上述 URI。

```
POST /client/
POST /sweepstakes/
POST /submission/ 
```

在请求正文中传递所需的数据并在响应中返回 id。使用 PUT 更新：

```
PUT /client/:client_id 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:33:14.927

答案几乎与您将创建的资源的 URI 有关：

*   `POST /`去创造`/:id`
*   `POST /sweepstakes/`去创造`/sweepstakes/:id`
*   `POST /clients/:id_a/sweepstakes/`去创造`/clients/:id_a/sweepstakes/:id_b`

# javascript - 使用表单值更改我的对象

> ID：14264175
> 
> 赞同：0
> 
> 时间：2013-01-10T17:53:17.417
> 
> 标签：javascript, forms, object

我想使用一个表单来更改我使用 Javascript 创建的框对象的名称和颜色值。到目前为止，我使用的代码成功地创建了一个框，但它没有使用表单中的值来更改颜色或名称。关于如何更改代码以获取这些值的任何建议？谢谢

```
 window.onload = init;

    function Box (id, name, color, coordinates) {
     this.id = id;
     this.name = name;
     this.color = color;
     this.coordinates = coordinates;
    }

    var boxes = [];

    function init() {
     var generateButton = document.getElementById("generateButton");
     generateButton.onclick = getBoxValues;
    }

    function addBox(newbox) {
     var scene = document.getElementById("scene");
     var div = document.createElement("div");
     div.className += " " + "box";
     scene.appendChild(div);
    }

  function getBoxValues() {
     var nameInput = document.getElementById("name");
     var name = nameInput.value; 

     var colorInput = document.getElementById("color");
     var color = colorInput.value;

     if (name == null || name == "") {
       alert("Please enter a name for your box");
       return;
     }
     else {
      var newbox = new Box("id", name, color, "coordinates");
      boxes.push(newbox);
      addBox(newbox); 
     }
    }

    <body>
     <form id="data">
     <ol>
      <li>Pick a name for your Amazing Box: <br>
       <label for="name">Name: </label>
        <input type="text" id="name" size="20">
      </li>
      <li>Pick a color for your Amazing Box: <br>
       <select id="color">
         <option value="red">Red</option>
         <option value="orange">Orange</option>
         <option value="yeallow">Yellow</option>
         <option value="green">Green</option>
         <option value="blue">Blue</option>
         <option value="indigo">Indigo</option>
         <option value="violet">Violet</option>
       </select>
      </li>
      <li>How many Amazing Boxes do you want to create?<br>
        <input type="radio" id="five" name="amount" value="5">
          <label for="five">5</label><br>
        <input type="radio" id="ten" name="amount" value="10">
          <lebel for="ten">10</label><br>
        <input type="radio" id="fifteen" name="amount" value="15">
          <label for="fifteen">15</label><br>
       </li>
      </ol>
      <p>
        <input type="button" id="generateButton" value="Generate!">
        <input type="button" id="clearButton" value="Clear">
      </p>
     </form>
     <div id="scene">
     </div>
     </body> 
```

# powershell - 从组合框中选择的项目与另一个获取过程一起使用

> ID：14264177
> 
> 赞同：0
> 
> 时间：2013-01-10T17:53:21.997
> 
> 标签：powershell, powercli, vsphere

下面的代码获取可用的数据中心名称并将它们添加到组合框。

```
function fill_dclist 
{
$comboBox1.Items.Clear()
$dclist = Get-Datacenter
foreach ($dc in $dclist)
{
$comboBox1.Items.add($dc.name.toString())
} 
```

下面的代码应该读取上面组合框中的选定项，并使用它来搜索该数据中心名称并显示该数据中心的所有虚拟机。

```
function fill_updatevmlist 
{
$selecteddc = ($comboBox1.SelectedItem)
$dcvms = Get-datacenter -Name $selecteddc | get-VM 
foreach ($dcvm in $dcvms)
{
[void]$listBox1.Items.Add($vm.name)
}
} 
```

组合框代码：

```
###DROPDOWN DC SELECT LIST###
$comboBox1.DataBindings.DefaultDataSourceUpdateMode = 0
$comboBox1.FormattingEnabled = $True
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 7
$comboBox1.Location = $System_Drawing_Point
$comboBox1.Name = "comboBox1"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 21
$System_Drawing_Size.Width = 121
$comboBox1.Size = $System_Drawing_Size
$comboBox1.TabIndex = 0
$comboBox1.add_Click({

fill_dclist
fill_updatevmlist

}) 
```

目前出现以下错误

```
Get-Datacenter : Cannot validate argument on parameter 'Name'. The argument is null or empty. Supply an argument th
at is not null or empty and then try the command again.
At C:\Users\Olly\Documents\Dropbox\_PROJECT\First Stage\Code\draft.ps1:251 char:30
+ $dcvms = Get-datacenter -Name <<<<  $selecteddc | get-VM 
    + CategoryInfo          : InvalidData: (:) [Get-Datacenter], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationError,VMware.VimAutomation.ViCore.Cmdlets.Commands.GetDat 
   acenter

Exception calling "Add" with "1" argument(s): "Value cannot be null.
Parameter name: item"
At C:\Users\Olly\Documents\Dropbox\_PROJECT\First Stage\Code\draft.ps1:254 char:26
+ [void]$listBox1.Items.Add <<<< ($vm.name)
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

有高手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:07:33.783

和上次一样，因为我没有 vspehere，所以你在这里是我的测试对象。：） 尝试：

```
function fill_updatevmlist 
{
    $selecteddc = ($comboBox1.SelectedItem.toString())
    $dcvms = Get-datacenter -Name $selecteddc | get-VM 
    foreach ($dcvm in $dcvms)
    {
        [void]$listBox1.Items.Add($dcvm.name)
    }
} 
```

你在 foreach 循环中有错字。我不确定第一个错误。这可能是因为您尝试在组合框中选择任何内容之前更新列表框。因此，如果上述方法不起作用，请尝试将其也包括在内：

```
function fill_dclist 
{
    $comboBox1.Items.Clear()
    $dclist = Get-Datacenter
    foreach ($dc in $dclist)
    {
        $comboBox1.Items.add($dc.name.toString())
    }
} 
```

删除你在做的那个组合框 add_click 的事情。组合框不是按钮。确保`fill_dclist`仅在表单加载时调用（如果您有刷新数据中心按钮）。但是，不要调用`fill_updatevmlist`负载。仅调用`fill_updatevmlist`combobox1 的 selectedIndexChanged 事件。您使用 ex: 分配它`$comboBox1.add_SelectedIndexChanged({fill_updatevmlist})`。如果您确保仅在组合框具有新值之后调用 updatevmlist，它应该可以工作。

# c++ - 类型引用的无效初始化

> ID：14264178
> 
> 赞同：0
> 
> 时间：2013-01-10T17:53:30.987
> 
> 标签：c++

我的代码（不是我的）中有一个函数`isInstruction()`用于设置和获取没有问题的成员。现在我为了类似的目的添加了我自己的函数`state()`。像这样：

```
struct foo {
  bool & isInstruction() {
    return isInst;    // no problem
  }
  int & state() {
    return state;   //ERROR
  } 
private:
  bool isInst;
  int state;  
}; 
```

我对第一个功能没有问题。但对于第二个，我得到

```
error: invalid initialization of reference of type ‘int&’ from expression of type 
‘&lt;unresolved overloaded function type>’ 
```

那么问题是这两个功能之间有什么区别。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:55:46.943

不同之处在于两个实体（成员变量和成员函数）共享相同的名称，`state`这就是导致问题的原因。

尝试重命名其中之一。

# excel - 在 Excel 宏中看不到变量

> ID：14264184
> 
> 赞同：0
> 
> 时间：2013-01-10T17:53:39.300
> 
> 标签：excel, vba, variables, scope

我已经搜索了这些问题，发现了一些非常接近的问题，但我仍然做错了什么。我想在以下代码中为工作表名称使用一个变量：

```
Option Explicit

Dim wrkPro As String
Dim wrkFFIS As String

Sub MainLoop()
'*************************************************************************************************************************
'*
'*************************************************************************************************************************
    Dim FFISno As Range         '* Admustments
    Dim ProTracksno As Range    '* Contracts
    Dim FFISnx As String        '* Corrected Contract Number
    Dim PTdte As Date
    Dim FFISdte As Date
    Dim orow As Integer
    Dim frow As Integer
    Dim prow As Integer
    Dim rngRange As Range

    orow = 2                    '* Output Row
    frow = 2                    '* FFIS Row
    prow = 7                    '* ProTracks Row

    '* Set Worksheet for input ...
    wrkPro = CStr(Sheets("SysCtrl").Cells(4, 2).Value) & "ProTracts"
    wrkFFIS = CStr(Sheets("SysCtrl").Cells(4, 2).Value) & "FFIS"

    '* Clear the Recap Sheet
    Sheets("Recap").Range("A2, B5000").ClearContents
    '* Sheets("Recap").Rows(CStr(orow) & ":" & CStr(Worksheets("Recap").Cells(Rows.Count, 1).End(xlUp).Row)).ClearContents
    '* Sheets("Recap").Cells(1, 1).Select

BeginLoop:
    '* Do until EOF on ProTracks Table
    Do While Sheets(wrkPro).Cells(prow, 7) <> "" And Sheets(wrkFFIS).Cells(frow, 4) <> "" 
```

当我运行它时，我得到了下标超出范围的错误。我已经检查并且变量中具有正确的值，但它没有在 Do While 中将其用作字符串。

我尝试在字符串之前和之后添加 Char(34) 并将 Dim 更改为 Public，如其他帖子中所建议的那样，但没有任何乐趣。

任何建议，将不胜感激。

卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:13:38.363

尝试使用**Worksheets** (wrkPro).Cells 而不是 Sheets(wrkPro).Cells - Sheets() 按索引引用工作表，即整数，例如 Sheets(1).Cells 等 **Worksheets** (wrkPro).Cells 字符串变量作为名字应该是可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:09:26.130

更改此行：

```
Sheets("Recap").Range("A2, B5000").ClearContents 
```

对此：

```
Sheets("Recap").Range("A2:B5000").ClearContents 
```

# cakephp - CakePHP - 包含应用程序目录之外的目录中的类

> ID：14264188
> 
> 赞同：2
> 
> 时间：2013-01-10T17:54:05.603
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我正在尝试从我的应用程序外部包含一个杂项库类（它被不同的应用程序使用）。

我的应用程序位于：

```
/var/www/websites/my_website/app/ 
```

该课程位于：

```
/var/www/websites/libs/CakePHP/MyClass.php 
```

在我的引导程序中，我正在努力弄清楚如何添加从该目录加载类的路径：

```
App::build(array('Lib' => array('/var/www/websites/lib/')));

App::uses('MyClass', 'CakePHP');

$myClass = new MyClass(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:00:39.750

加载不应在您的引导程序中完成，而应在您`AppController`的`beforeFilter`方法中完成。

此外，还有一个非 Cake 库的保留位置，即`app/Vendor`目录。您可以将所有课程放在那里，然后通过以下方式轻松加载团队：

```
App::uses('MyClass', 'Vendor'); 
```

如果确实需要在替代路径中，则需要指定并调用完整路径。并确保使用相同的名称。现在，您正在指定`Lib`，但调用`CakePHP`时好像它`build`本身就是 a （它不是）。这行不通。它应该看起来像这样：

```
App::build(array('Lib' => array('/var/www/websites/lib')));
App::uses('MyClass', 'Lib/CakePHP'); // Define the subdirectory here 
```

另请查看有关加载供应商文件[的文档](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-vendor-files)，其中有很多示例。

# excel - 如何将 Excel 工作表导入 Microsoft Project？

> ID：14264189
> 
> 赞同：3
> 
> 时间：2013-01-10T17:54:06.367
> 
> 标签：excel, ms-office, ms-project

我想将以下 Microsoft Excel 工作表导入 Microsoft Project (2010)：

![工作表](../Images/60d293cc00ef993e0cef67d94d2ca3b4.png)

本质上，工作表在 A 列中包含任务和子任务，在 B 列中包含开始日期，在 C 列中包含完成日期。您看到的条件突出显示基于开始和完成日期。没有宏，只有公式，因此电子表格保存为普通的 Excel 工作簿。

我试图在 Project 中打开工作簿。它正确地找到了源工作表名称，但它不识别要映射到的任何字段。见下图：

![导入失败](../Images/7a03c8a434e41edf4f4fda11f6ccfd7b.png)

我能做些什么来解决这个问题？我以前从未使用过 Project，但我希望能够导入“关键里程碑”和“子任务”，以及它们各自的“开始”和“完成”日期。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:19:58.917

我试了一下：

向导的初步设置：

*   新地图
*   作为一个新项目
*   任务、资源、分配：全部选中
*   导入包括标题

工作表名称：`"Sheet1"`...默认情况下：OK。

虽然`"Sheet1"`重命名为：

`"#2 MacroPlan"`: 不好
`"2 MacroPlan"`: 不好
`"MacroPlan"`: 好
`"#2_MacroPlan"`: 不好
`"2_MacroPlan"`: 好

因此：使用`"_"`而不是空格，不要使用`"#"`可能还有其他奇怪的符号（没有测试更多）。

# java - NumberFormat setMaximumFractionDigits 方法

> ID：14264193
> 
> 赞同：6
> 
> 时间：2013-01-10T17:54:19.520
> 
> 标签：java, number-formatting

我正在尝试类的方法和功能，但[`NumberFormat`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/NumberFormat.html#setMaximumFractionDigits%28int%29)我得到了一个奇怪的结果。我编译并运行以下程序：

```
public static void main(String[] args) {

Locale loc = Locale.US;
    NumberFormat nf = NumberFormat.getInstance(loc);
    System.out.println("Max: "+nf.getMaximumFractionDigits());
    System.out.println("Min: "+nf.getMinimumFractionDigits());
    try {
        Number d = nf.parse("4527.9997539");
        System.out.println(d);
        // nf.setMaximumFractionDigits(4);
        System.out.println(nf.format(4527.999753));
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

输出是：

```
Max: 3
Min: 0
4527.9997539
4,528 
```

这意味着它不考虑任何小数位数。如果我取消注释该行：

```
nf.setMaximumFractionDigits(4); 
```

输出是：

```
Max: 3
Min: 0
4527.9997539
4,527.9998 
```

换句话说，它工作正常。方法实际发生了什么`setMaximumFractionDigits()`并且在第一种情况下它没有带来包含 3 个小数位的数字？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T10:11:26.517

我终于找到了答案。方法`setMaximumFractionDigits()`只对方法有影响`format()`。它与 . 无关`parse()`。在我的代码片段中，我`format()`在手动将小数位数设置为 4 后使用该方法，因此它会影响结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T19:38:40.233

如果要手动设置小数位数，请使用以下选项之一：

首先：

```
 //sets 'd' to 3 decimal places & then assigns it to 'formattedNum'
   String formattedNum = String.format("%.3f", d); //variable 'd' taken from your code above 
```

或者

```
 //declares an object of 'DecimalFormat'
   DecimalFormat aDF = new DecimalFormat("#.000"); 

  //formats value stored in 'd' to three decimal places
   String fomrattedNumber = aDF.format(d); 
```

在我看来，第二种选择最适合您的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:58:31.813

从解析的字符串创建的数字有更多的小数位数。但是当您尝试输出时，它使用格式`MaximumFractionDigits`从任何给定的数字创建字符串。

# java - 为什么 Random.setSeed 的 Java 实现与 0x5DEECE66DL 参数异或？

> ID：14264196
> 
> 赞同：6
> 
> 时间：2013-01-10T17:54:33.933
> 
> 标签：java, random

请参阅[http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#setSeed(long)](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#setSeed(long))。在将乘数减少到 mod 2^48 之前，代码 xor 种子与乘数。为什么不直接减少传递的种子 mod 2^48？C 等效的 seed48 不执行异或。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:59:52.323

您可以在这里找到一本不错的读物：[java.util.Random's Magic Number 0x5DEECE66D](http://www.brettdaniel.com/archives/2009/04/09/154059/)。

和报价：

```
The analysis says it was chosen simply because researchers determined empirically 
that it produces a sequence of values satisfying various randomness tests 
```

这份[文件](http://www.math.utah.edu/~beebe/java/random/README)也给出了幻数的机会。

还有一个报价：

> 然后我尝试搜索十进制值，不包括 Java，并在一些课堂笔记中找到了答案：

[http://nut.bu.edu/~youssef/py502/monte_carlo_supplement.ps](http://nut.bu.edu/~youssef/py502/monte_carlo_supplement.ps) [http://www.inf.ethz.ch/personal/gaertner/texts/own_work/random_matrices.pdf](http://www.inf.ethz.ch/personal/gaertner/texts/own_work/random_matrices.pdf)

```
and in some computer documentation: 
```

[http://developer.apple.com/documentation/Darwin/Reference/ManPages/html/_rand48.3.html](http://developer.apple.com/documentation/Darwin/Reference/ManPages/html/_rand48.3.html)

```
The Youssef notes say:

... I can only say that 25214903917_LONG and 11_LONG have
apparently been chosen by passing a battery of such [meaning
Marsaglia's DIEHARD] tests.

... Even in the case of the 48-bit generators we are discussing
today, cas26 will generate them all in a month or two of CPU time
and then start to repeat. 
```

# c# - 通过 Spring 加载具有 MockRepository 属性的 MockReposity 对象

> ID：14264197
> 
> 赞同：1
> 
> 时间：2013-01-10T17:54:41.303
> 
> 标签：c#, c#-4.0, rhino-mocks, spring.net

版本：C# 4.0、Spring.Net 1.3.2、RhinoMocks 3.6.1

给定这两个接口：

```
public interface IDivisionSelectView
{
    // ...
}

public interface ILoginView
{
    IDivisionSelectView DivisionSelectView { get; }

    // ...
} 
```

我正在尝试使用 Spring.Net 使用`Rhino.Mocks.MockRepository.GenerateMock<>()`工厂创建一个代理对象，`ILoginView`该对象的*DivisionSelectView*属性自动设置为`IDivisionSelectView`代理（使用相同的工厂）。这是 Spring XML：

```
<object id="IDivisionSelectView"
        type="Rhino.Mocks.MockRepository, Rhino.Mocks"
        factory-method="GenerateMock&lt;[Asm.Ns.IDivisionSelectView, Asm]>"
        singleton="false">
  <constructor-arg name="argumentsForConstructor">
    <list element-type="System.Object, mscorlib">
    </list>
  </constructor-arg>
</object>

<object id="ILoginView"
        type="Rhino.Mocks.MockRepository, Rhino.Mocks"
        factory-method="GenerateMock&lt;[Asm.Ns.ILoginView, Asm]>"
        singleton="false">
  <constructor-arg name="argumentsForConstructor">
    <list element-type="System.Object, mscorlib">
    </list>
  </constructor-arg>
  <property name="DivisionSelectView" ref="IDivisionSelectView">
  </property>
</object> 
```

这是调用 C# 代码：

```
IApplicationContext ctx = new XmlApplicationContext(
    "assembly://Asm/Asm/spring.xml");
ContextRegistry.RegisterContext(ctx);

ILoginView view = ctx.GetObject("ILoginView") as ILoginView; 
```

这是我得到的错误：

`Spring.Objects.Factory.ObjectCreationException was unhandled by user code`

`Message=Error creating object with name 'ILoginView' defined in 'assembly [Asm, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null], resource [Asm.spring.xml] line 14' : Initialization of object failed : 'DivisionSelectView' node cannot be resolved for the specified context [Castle.Proxies.ILoginViewProxy4fa9c3fa65ca497bb09ce6358d876e4d].`

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:57:36.530

ILoginView 上的 DivisionSelectView 属性没有设置器。

# java - 匹配字符串中第一个逗号之后的所有内容

> ID：14264198
> 
> 赞同：2
> 
> 时间：2013-01-10T17:54:44.060
> 
> 标签：java, regex, string

我正在使用 java 进行正则表达式匹配。我正在使用 rubular 来验证匹配并使用 ideone 来测试我的代码。

我从[这个 SO 解决方案](https://stackoverflow.com/questions/4058923/get-all-characters-after-character)中得到了一个正则表达式，它与我希望在 rubular 中匹配的组匹配，但我在 java 中的实现不匹配。当它打印“值”时，它正在打印 commaSeparatedString 的值而不是 matcher.group(1) 我希望 println 的捕获组/输出为“v123_gpbpvl-testpv1,v223_gpbpvl-testpv1-iso”

```
String commaSeparatedString = "Vtest7,v123_gpbpvl-testpv1,v223_gpbpvl-testpv1-iso";
//match everything after first comma
String myRegex = ",(.*)";
Pattern pattern = Pattern.compile(myRegex);
Matcher matcher = pattern.matcher(commaSeparatedString);
 String value = "";
if (matcher.matches())
    value = matcher.group(1);
else
    value = commaSeparatedString;                     
System.out.println(value); 
```

（编辑：我忽略了 commaSeparatedString 并不总是包含 2 个逗号。相反，它总是包含 0 个或多个逗号）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:56:45.380

如果你不必用正则表达式解决它，你可以试试这个：

```
int size = commaSeparatedString.length();
value = commaSeparatedString.substring(commaSeparatedString.indexOf(",")+1,size); 
```

也就是说，上面的代码返回从第一个逗号索引开始的子字符串。

**编辑：**

抱歉，我省略了更简单的版本。感谢其中一位评论员，您也可以使用这一行：

```
value = commaSeparatedString.substring( commaSeparatedString.indexOf(",") ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T17:59:53.253

正则表达式的定义是错误的。它应该是：

```
String myRegex = "[^,]*,(.*)"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:59:14.597

您是 Java 错误的正则表达式方法命名的又一个受害者。

`.matches()`自动在开头和结尾锚定正则表达式（这与“正则表达式匹配”的定义完全矛盾）。您正在寻找的方法是`.find()`.

但是，对于这样一个简单的问题，最好使用@DelShekasteh 的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:02:15.003

我会这样做

```
 String commaSeparatedString = "Vtest7,v123_gpbpvl-testpv1,v223_gpbpvl-testpv1-iso";

    System.out.println(commaSeparatedString.substring(commaSeparatedString.indexOf(",")+1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T18:08:43.963

这是另一种拆分有限的方法

```
String[] spl = "Vtest7,v123_gpbpvl-testpv1,v223_gpbpvl-testpv1-iso".split(",", 2);
if (spl.length == 2)
    System.out.println(spl[1]); 
```

Byt 恕我直言[德尔的回答](https://stackoverflow.com/a/14264237/1393766)最适合您的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T18:11:53.610

我会使用 replaceFirst

```
String commaSeparatedString = "Vtest7,v123_gpbpvl-testpv1,v223_gpbpvl-testpv1-iso";
System.out.println(commaSeparatedString.replaceFirst(".*?,", "")); 
```

印刷

```
v123_gpbpvl-testpv1,v223_gpbpvl-testpv1-iso 
```

或者你可以使用较短但钝的

```
System.out.println(commaSeparatedString.split(",", 2)[1]); 
```

# android - 在带有 proguard 的 Android 上使用 ORMLite 崩溃

> ID：14264199
> 
> 赞同：6
> 
> 时间：2013-01-10T17:54:45.057
> 
> 标签：android, obfuscation, proguard, ormlite

我们在我们的 Android 应用程序中使用 ORMLite。它工作正常，除非我们尝试在打开 proguard 的情况下进行构建。

我已经阅读了各种类似的帖子，到目前为止，我的 proguard-project.txt

```
-keep class com.j256.** {
   *;
} 
```

正如以下讨论中所建议的那样[http://sourceforge.net/p/proguard/discussion/182456/thread/6765bb69](http://sourceforge.net/p/proguard/discussion/182456/thread/6765bb69)

我有

```
-keepclassmembers class * { 
  public <init>(android.content.Context);
  public <init>(android.app.Activity,int);
} 
```

正如另一个stackoverflow问题[Proguard with OrmLite on Android中所建议的那样](https://stackoverflow.com/questions/9853096/proguard-with-ormlite-on-android)

但它仍然无法正常工作。如果我添加，我*可以*让它运行

```
-dontobfuscate 
```

但这有点错过了首先使用 proguard 的意义。

当我跑步时，我得到一个

```
IllegalStateException: Could not find OpenHelperClass because none of the generic
parameters of class class <our.package.name>.LaunchActivity extends
OrmLiteSqliteOpenHelper.  You should use getHelper(Context, Class) instead. 
```

在哪里

```
public class LaunchActivity extends OrmLiteBaseActivity<DatabaseHelper> 
```

和

```
public class DatabaseHelper extends OrmLiteSqliteOpenHelper 
```

我已经添加

```
-keep public class * extends com.j256.ormlite.android.apptools.OrmLiteSqliteOpenHelper

-keep public class <our.package.name>.LaunchActivity 
```

但仍然没有运气。这个问题似乎以前被问过（[OrmLite 和 proguard 混淆问题](https://stackoverflow.com/questions/12722852/problems-with-ormlite-and-proguard-obfuscation)），但我希望*有人*知道解决方案是什么！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T21:14:53.903

错误信息中提到了*泛型*参数，所以 ORMLite 可能是使用反射来检索泛型类型信息。此信息存储在可选的 Signature 属性中（Java 删除泛型类型），ProGuard 默认将其删除。您可以将它们与

```
-keepattributes Signature 
```

# jquery - 淡入淡出的文本循环不起作用

> ID：14264200
> 
> 赞同：1
> 
> 时间：2013-01-10T17:54:46.463
> 
> 标签：jquery

我在这里找到了文本循环的代码：

[淡入淡出文本循环 - jQuery](https://stackoverflow.com/questions/12065273/fade-in-out-text-loop-jquery)

它在那个演示中工作，即使我将所有代码复制并粘贴到 jsfiddle 中，Jquery 也能工作。

当我在 Dreamweaver 中执行此操作时，它不起作用。如果我打开一个新文档并按原样输入信息，它仍然不起作用。所以我觉得我一定错过了一些简单的东西。

这是该页面的链接：

[http://divingdog.com/_hairofdog/](http://divingdog.com/_hairofdog/)

这是我的代码：

```
.hours
{
display:none;
float:right;
font-size:20px;
padding-top:5px;
z-index:100000;

}

<div class="hours">
Monday – Thursday: 9 AM – 8 PM
</div>

<div class="hours">
Friday – Saturday: 9 AM – 9 PM (8 PM Jan-Mar)
</div>

<div class="hours">
Sunday: 10 AM – 6 PM
</div>

<script>
(function() {

    var hours = $(".hours");
    var hoursIndex = -1;

    function showNextHours() {
        ++quoteIndex;
        hours.eq(hoursIndex % hours.length)
            .fadeIn(2000)
            .delay(2000)
            .fadeOut(2000, showNextHours);
    }

    showNextHours();

})();

</script> 
```

该脚本位于 body 标记的末尾（在其中），CSS 位于外部工作表上。

淡入淡出的文字应显示在顶部电话号码的右侧。

我不知道为什么它不起作用。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:18:14.483

我认为您缺少 jquery。将此添加到页面顶部应该可以解决它：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

# php - MySQL 使用 LIKE 搜索带空格的字符串

> ID：14264201
> 
> 赞同：2
> 
> 时间：2013-01-10T17:54:49.350
> 
> 标签：php, sql-like

我正在我的网站上构建搜索，我注意到当您在搜索中输入多个单词时它不起作用。这是查询的要点：

```
SELECT * FROM `blog` WHERE `content` LIKE '%$keyword%' OR `title` LIKE '%$keyword%' ORDER BY `id` DESC 
```

奇怪的是，当我在 phpMyAdmin 中测试查询时，它返回了预期的结果。然而，在我的网站上，没有找到任何结果。

我尝试用 %s 替换关键字中的空格，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:03:18.903

问题是`LIKE`模式匹配而不是实际搜索关键字。您应该在数据库列上创建全文索引并使用`WHERE MATCH keywords AGAINST column`. 这将以任何顺序正确搜索所有关键字，并且无论如何都会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:46:39.573

我刚刚在我的数据库中尝试过，在查询中使用的速度是使用全文索引`LIKE`的 66 倍以上。`MATCH`我正在使用两个相互“连接”的表。一种是标签，另一种是产品。

所以我所做的就是在标签表中的标签列中添加了一个全文索引，并针对该列执行了匹配。查询然后加入产品，然后吐出一些关于该项目的数据。大约 4 秒，大约 3000 个产品和大约 3000 个标签。

然后我先用空格分解搜索字符串，然后用`%' OR tags.tag LIKE '%`. 对于相同数量的产品和标签，这需要大约 0.06 秒。

# c# - 在 C# 中将二进制数的字符串表示形式转换为 int

> ID：14264203
> 
> 赞同：5
> 
> 时间：2013-01-10T17:55:04.013
> 
> 标签：c#, string, binary, type-conversion

我有一个由八个 1 和 0 组成的字符串，中间有空格，例如“1 0 0 1 1 0 1 0”，我想将其转换为 int。有没有一种简单的方法可以做到这一点？我觉得某种 linq 解析可以做到这一点，但我什至不知道一旦找到这些字符该怎么处理。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T17:56:20.500

您不需要任何 LINQ。
`Convert.ToInt*()`接受一个可选`fromBase`参数，它必须是 2、8、10 或 16。

```
Convert.ToInt32("1 0 0 1 1 0 1 0".Replace(" ", ""), 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:00:54.923

@SLaks 的答案的替代方案（但仅用于解析十六进制）是

```
Int32.Parse(hexString, System.Globalization.NumberStyles.HexNumber); 
```

但是，二进制没有等价物，所以他是一个更好的通用答案。

# java - 找出呼叫何时开始响铃

> ID：14264213
> 
> 赞同：0
> 
> 时间：2013-01-10T17:55:40.173
> 
> 标签：java, android, phone-call

我有一个 android 应用程序，我可以从中开始通话。我想知道是否有可能知道实际响铃何时开始。像 TelephonyManager.CALL_STATE_OFFHOOK 这样的东西是不够的，因为它在我开始拨号时已经触发，在我想要的铃声开始前几秒钟。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:03:03.437

我过去尝试过，只要我看到 Ringing 就会调用它...

希望这可以帮助

[http://mfarhan133.wordpress.com/2010/10/15/manipulating-incoming-ougoing-calls-tutorial-for-android/](http://mfarhan133.wordpress.com/2010/10/15/manipulating-incoming-ougoing-calls-tutorial-for-android/)

[http://marakana.com/forums/android/examples/62.html](http://marakana.com/forums/android/examples/62.html)

# git - git fetch 是如何工作的？

> ID：14264216
> 
> 赞同：1
> 
> 时间：2013-01-10T17:55:46.033
> 
> 标签：git, github, git-fetch

从最受关注的博客之一中，当您执行 git fetch 时，Git 会从目标分支收集当前分支中不存在的所有提交，并将它们存储在本地存储库中。但是，它不会将它们与您当前的分支合并。

获取所有提交后，git 将所有这些提交存储在哪里（因为它没有将它们与我的本地分支合并）以及当我执行 git fetch 时 git repo 历史记录如何变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:58:03.493

它以与存储任何其他提交完全相同的方式存储它们。

Git 提交不存储在分支中；相反，分支只是指向特定提交的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:13:28.440

通常明确指定分支很方便。例如，

```
git fetch /path/to/repo master:sometopic 
```

将从 /path/to/repo 的存储库中获取**主**分支，并将存储作为本地存储库中的**某个主题的分支。**

您的本地 master 分支根本不受 fetch 的影响。

# bash - find 命令格式的行为与 ~/bin 和 ./ 不同

> ID：14264217
> 
> 赞同：0
> 
> 时间：2013-01-10T17:55:52.873
> 
> 标签：bash

带有一行的脚本

```
find [somedirectory]/ -ctime +1 -printf %f" " 
```

表现得很好（返回没有目录的文件名）。我运行：

```
./[somescript] 
```

如果我从 ~/bin/ 中调用它，就像这样，简单地

```
[somescript] 
```

它找到文件但不格式化输出？

预期输出：

```
File1 File2 File3 
```

从 ~/bin/ 观察到的输出：

```
/directory/File1
/directory/File2
/directory/File3 
```

# r - 观察在特定时间范围内是否唯一

> ID：14264219
> 
> 赞同：0
> 
> 时间：2013-01-10T17:55:54.807
> 
> 标签：r, datetime, if-statement

我正在尝试清理 R 中的数据集（下面的子样本）

据我所知，最好的解释方法是通过 if 函数：

如果天线 = 1，在此时间戳之前的 5 分钟内是否有另一次观察？如果是这样，请给出真/假

但是我不确定如何去做

```
 Date.Time Aerial
794  2012-10-01 08:18:00      1
795  2012-10-01 08:34:00      1
796  2012-10-01 08:39:00      1
797  2012-10-01 08:42:00      1
798  2012-10-01 08:48:00      1
799  2012-10-01 08:54:00      1
800  2012-10-01 08:58:00      1
801  2012-10-01 09:04:00      1
802  2012-10-01 09:05:00      1
803  2012-10-01 09:11:00      1
1576 2012-10-01 09:17:00      2
1577 2012-10-01 09:18:00      2
804  2012-10-01 09:19:00      1
805  2012-10-01 09:20:00      1
1580 2012-10-01 09:21:00      2
1581 2012-10-01 09:23:00      2
806  2012-10-01 09:25:00      1
807  2012-10-01 09:32:00      1
808  2012-10-01 09:37:00      1
809  2012-10-01 09:43:00      1 
```

例如，在 09:19 空中 = 1 在此之前的 5 分钟内，在 09:18 和 09:17 有观测，因此我想在 09:19 删除观测。这是一个大数据集，所以它可能会发生多次

抱歉，如果这不是正确的询问方式，对 R 来说是相对较新的。

我的想法：

使用 if.else 语句，但是我无法获得日期时间来使用它。

没有代码，因为在上面询问之前一直试图这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:07:50.583

`diff`将为您提供特定数据列的“运行差异”。如果您继续运行`diff`（`Date.Time`或者`as.POSIXct(Date.Time)`它尚未采用该格式），它会告诉您每个连续间隔之间的差异。所以看看结果

```
diff(DataFrame$Date.Time) #or
diff(as.POSIXct(DataFrame$Date.Time)) #if the first one doesn't work 
```

如果您可以使用包并远离`base`函数，`rollapply`正如@AriBFriedman 所提到的，它允许您`diff`更进一步并基于滚动值应用函数（它是`zoo`包的一部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:13:09.140

```
 with( dfrm, Aerial == 1 & c(diff(Date.Time),0) > 5 )
 [1]  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE
[12] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE 
```

这实际上只是处理差异的一个方向，无论如何，您是否希望将这些项目包括在内，这是一个悬而未决的问题。如果你想在两个方向上都这样做，那么可能会正确设置一个额外的逻辑`&`子句。`rev( diff (rev (Date.Time) ) )`我承认我想知道 diff.POSIXt 是在重新计算分钟还是秒。帮助页面没有帮助，测试显示它只需几分钟。

获得向后差异的另一种方法可能是用另一种方式移动的 diff-vector 进行测试：

```
with( dfrm,  c( FALSE, abs(diff(Date.Time)) > 5 ) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:28:29.373

```
d<-read.table(text='Date.Time Aerial
794  "2012-10-01 08:18:00"      1
795  "2012-10-01 08:34:00"      1
796  "2012-10-01 08:39:00"      1
797  "2012-10-01 08:42:00"      1
798  "2012-10-01 08:48:00"      1
799  "2012-10-01 08:54:00"      1
800  "2012-10-01 08:58:00"      1
801  "2012-10-01 09:04:00"      1
802  "2012-10-01 09:05:00"      1
803  "2012-10-01 09:11:00"      1
1576 "2012-10-01 09:17:00"      2
1577 "2012-10-01 09:18:00"      2
804  "2012-10-01 09:19:00"      1
805  "2012-10-01 09:20:00"      1
1580 "2012-10-01 09:21:00"      2
1581 "2012-10-01 09:23:00"      2
806  "2012-10-01 09:25:00"      1
807  "2012-10-01 09:32:00"      1
808  "2012-10-01 09:37:00"      1
809  "2012-10-01 09:43:00"      1', header=TRUE, stringsAsFactors=FALSE, row.names=1)

# convert Date.Time to POSIXct
d<-within(d, Date.Time<-as.POSIXct(Date.Time))

# define row aggregator 
f <- function(accumulation, next.row, min.mins=5) {
    last.dtime <- tail(accumulation,1)$Date.Time
    next.dtime <- next.row$Date.Time
    # don't add next.row if Aerial is 1 and time between last record is less than min.mins
    if (next.row$Aerial == 1 & (as.numeric(next.dtime - last.dtime, units='mins') < min.mins))
        accumulation
    else
        rbind(accumulation, next.row)
}

# aggregate rows
Reduce(f, split(d[order(d$Date.Time), ], sequence(nrow(d))))

#                Date.Time Aerial
# 794  2012-10-01 08:18:00      1
# 795  2012-10-01 08:34:00      1
# 796  2012-10-01 08:39:00      1
# 798  2012-10-01 08:48:00      1
# 799  2012-10-01 08:54:00      1
# 801  2012-10-01 09:04:00      1
# 803  2012-10-01 09:11:00      1
# 1576 2012-10-01 09:17:00      2
# 1581 2012-10-01 09:23:00      2
# 807  2012-10-01 09:32:00      1
# 808  2012-10-01 09:37:00      1
# 809  2012-10-01 09:43:00      1 
```

# javascript - 如何从跳转菜单中打开 jQuery 对话框

> ID：14264220
> 
> 赞同：0
> 
> 时间：2013-01-10T17:56:00.377
> 
> 标签：javascript, jquery, select, modal-dialog

我想从跳转菜单中触发一个 jQuery 对话框。我该怎么做呢？

这是我的脚本：

```
<script>
// increase the default animation speed to exaggerate the effect
$.fx.speeds._default = 1000;
$(function() {
    $( "#bulkConfirm" ).dialog({position:['middle',60],     
        open: function(event, ui) {  
        jQuery('.ui-dialog-titlebar-close').removeClass("ui-dialog-titlebar-close").html('<span style="float:right;"><img src="../images/x.png" /></span>');  
    },  
        dialogClass: 'ui-widget-shadow',
        modal: true,    
        autoOpen: false,
        width: '650px',
        close: function(ev, ui) {$(this).close();}
    });

    $( ".bulkConfirmOpen" ).click(function() {
        $( "#bulkConfirm" ).dialog( "open" );
        return false;
    });
});
</script> 
```

这是我的菜单：

```
<select name="fieldname" size="1" onChange="go()" class="select" >
    <option selected="selected"><em>Questions Bulk Edit Options...</em></option>
    <option value="#">Change Category Assignments</option>
    <option class="bulkConfirmOpen" href="#" >Change Status to Approved</option>
    <option value="#">Move to Another Folder</option>
</select> 
```

我想用“将状态更改为已批准”选项打开对话框。目前它会快速打开对话框，但随后会立即重定向到未找到的页面。其他菜单项将被定向到其他页面链接。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:04:42.050

你可以试试这个：http: [//jsfiddle.net/TXkrM/](http://jsfiddle.net/TXkrM/)

```
$(function () {
  $(".select").change(function () {
    if($('option:selected',this).attr('class')=='bulkConfirmOpen'){
       $(this).dialog();
    }
  });
}); 
```

给选项一个`href`属性不是一个有效的方法。

# android - Android LiveWallpaper：高效地加载和绘制各种位图（例如：视频）

> ID：14264221
> 
> 赞同：1
> 
> 时间：2013-01-10T17:56:01.080
> 
> 标签：android, bitmap, load, live, wallpaper

我正在开发一种动态壁纸，可以在背景上再现动画（如短视频）。

有谁知道如何有效地加载各种全屏大小的位图并将它们绘制在画布上？我尝试了两种方法，但都不是很好。

* * *

方法#1：在壁纸启动时加载所有位图。

问题：内存超出限制（约 35MB）无法加载超过 10 个位图。所以动画缺乏不同的图像。

* * *

方法 #2：仅加载 2 个位图。在运行时，绘制位图，删除旧位图，加载新位图，重复。

问题：消耗大量系统（不是内存，但通常会减慢操作系统），但是它可以工作，因为它没有超过内存限制。但是，仍然会减慢整个系统的速度。

例子：

```
 Drawer.drawAll(res,c,p);
  res.removeOldBitmaps();
  res.loadNewBitmaps(wpservice,display); 
```

我想到的另一种方法是在单独的线程上加载资源，你们怎么看？您还有其他解决方案吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:35:46.533

解决了，我找到的解决方案如下：

在运行时加载图像，1 x 1。

并使用此选项：

```
/**Effective image decoder by chelin**/
public static Bitmap decodeResource(WallpaperService wpservice,int id){

    int scale=1;
    Resources res = wpservice.getResources();
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inPreferredConfig = Bitmap.Config.ARGB_8888;
    o2.inSampleSize=scale;
    o2.inPurgeable = true;
    o2.inInputShareable = true;
    return BitmapFactory.decodeResource(res, id, o2);
} 
```

希望它对我有用。干杯!

# xml - 如何使用 powershell 将重复的 xml 节点转换为逗号分隔的字符串

> ID：14264223
> 
> 赞同：1
> 
> 时间：2013-01-10T17:56:03.493
> 
> 标签：xml, powershell, nodes

我有大约 13000 个以 XML 格式格式化的日志文件，我需要将它们全部转换为电子表格\csv 文件。

如您所见，我不是程序员，但我已经尝试过。
我已经编写了一个 powershell 脚本来取出第一个节点并创建一个逗号分隔的字符串，但我坚持要获取最后一个节点，该节点可以包含从没有条目到几十个条目的任何内容。

xml 文件示例：

```
<?xml version="1.0" encoding="utf-8"?>
<MigrationUserStatus>
  <User>username@domain.com</User>
  <StoreList>
    <EmailMigrationStatus>
      <MigrationStatus value="Success" />
      <FolderList>
        <TotalCount value="6" />
        <SuccessCount value="3" />
        <FailCount value="3" />
        <FailedMessages>
          <ErrorMessage>GDSTATUS_BAD_REQUEST:Permanent failure: BadAttachment</ErrorMessage>
          <SentTime>1601-01-01T00:00:00.000Z</SentTime>
          <ReceiveTime>1601-01-01T00:00:00.000Z</ReceiveTime>
        </FailedMessages>
        <FailedMessages>
          <ErrorMessage>GDSTATUS_BAD_REQUEST:Permanent failure: BadAttachment</ErrorMessage>
          <SentTime>1601-01-01T00:00:00.000Z</SentTime>
          <ReceiveTime>1601-01-01T00:00:00.000Z</ReceiveTime>
        </FailedMessages>
        <FailedMessages>
          <MessageSubject>Hey</MessageSubject>
          <ErrorMessage>GDSTATUS_BAD_REQUEST:Permanent failure: BadAttachment</ErrorMessage>
          <SentTime>2013-01-07T02:51:17.000Z</SentTime>
          <ReceiveTime>2013-01-07T02:51:17.000Z</ReceiveTime>
          <MessageSize value="2881" />
        </FailedMessages>
        <StartTime>2013-01-07T01:52:46.000Z</StartTime>
        <EndTime>2013-01-07T04:41:59.000Z</EndTime>
      </FolderList>
      <StartTime>2013-01-07T01:52:43.000Z</StartTime>
      <EndTime>2013-01-07T04:41:59.000Z</EndTime>
    </EmailMigrationStatus>
    <StartTime>2013-01-07T01:52:43.000Z</StartTime>
    <EndTime>2013-01-07T04:41:59.000Z</EndTime>
  </StoreList>
</MigrationUserStatus> 
```

使用此代码，我可以轻松创建 csv 行的第一部分：

```
$folder = "C:\temp"
$outfile = = [IO.File]::OpenWrite("alluserslogs.csv")
$csv = "User,Total Emails, Successful emails,Failed emails,Failures`r`n"

dir Status-*.log | foreach ( $_) {
[xml]$Status = Get-Content $_
$csvpt1 +=$Status.MigrationUserStatus.User + "," + $Status.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.TotalCount.value + "," + $Status.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.SuccessCount.value + "," + $Status.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.FailCount.value 
```

下一点是我要解开的地方。我想读取每个 FailedMessages 节点并将其构建到另一个逗号分隔的字符串

```
foreach ($FMessage in $Status.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.FailedMessages) {
$csvpt2 +=$FMessage + ","
} 
```

期望的输出：

```
GDSTATUS_BAD_REQUEST:Permanent failu... 1601-01-01T00:00:00.000Z                1601-01-01T00:00:00.000Z,GDSTATUS_BAD_REQUEST:Permanent failu... 1601-01-01T00:00:00.000Z                1601-01-01T00:00:00.000Z,....... 
```

我在 $FMessage 中得到空白或方法调用失败，因为最后的 + "," 所以我需要修复这个问题。

然后我将连接成一个最终字符串并写入文件

```
$csv +=$csvpt1 + "," + $csvpt2
$outfile.WriteLine($csv)
}
$outfile.Close() 
```

在添加的愿望清单中，能够为 n 列创建 csv 文件列标题失败也很棒，如最大数量的 FailedMessages 节点所示。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:31:45.957

Powershell 对 XML 有原生支持，也许这会帮助您入门？

它还有一个带有 Export-Csv 的本机 CSV 导出器 :)

```
[xml]$XMLfile = gc C:\Temp\migration.xml

$MasterArray = @()
$MasterArray = "" | Select User, Result, TotalEmails, SuccessfulEmails, FailedEmails, Failures

$MasterArray.User = $XMLfile.MigrationUserStatus.user
$MasterArray.Result = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.MigrationStatus.value
$MasterArray.TotalEmails = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.TotalCount.value
$MasterArray.SuccessfulEmails = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.SuccessCount.value
$MasterArray.FailedEmails = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.FailCount.value

$Failures = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.FailedMessages
$ConcatFailures = @()
foreach ($Failure in $Failures)
{
    $ConcatFailures += $Failure.ErrorMessage + "," + $Failure.SentTime + "," + $Failure.ReceivedTime
}

$MasterArray.Failures = $ConcatFailures -Join "|"
$MasterArray
$MasterArray | Export-Csv -NoType "C:\Temp\export.csv" 
```

对于其他字段，您可以检查它们是否存在，如果它们很容易添加它们，这**应该**有效：

```
foreach ($Failure in $Failures)
{
    if ($Failure.ErrorMessage) { $ConcatFailures += $Failure.ErrorMessage }
    if ($Failure.SentTime) { $ConcatFailures += $Failure.ErrorMessage }
    if ($Failure.ReceivedTime) { $ConcatFailures += $Failure.ReceivedTime }
    if ($Failure.MessageSubject) { $ConcatFailures += $Failure.MessageSubject }
    if ($Failure.MessageSize) { $ConcatFailures += $Failure.MessageSize }
} 
```

要处理 xml 文件，您需要添加一个外部循环来遍历所有 xml 文件，然后将数据附加到您构建的数组中。这应该可以满足您的需求，并对使用的路径进行一些调整：

```
$XMLFiles = gci "C:\Temp\" -Filter "*.xml"
$MasterArray = @()

foreach ($XMLFile in $XMLFiles)
{
    [xml]$XMLfile = gc $XMLFile.FullName

    $TempArray = @()
    $TempArray = "" | Select User, Result, TotalEmails, SuccessfulEmails, FailedEmails, Failures

    $TempArray.User = $XMLfile.MigrationUserStatus.user
    $TempArray.Result = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.MigrationStatus.value
    $TempArray.TotalEmails = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.TotalCount.value
    $TempArray.SuccessfulEmails = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.SuccessCount.value
    $TempArray.FailedEmails = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.FailCount.value

    $Failures = $XMLfile.MigrationUserStatus.StoreList.EmailMigrationStatus.FolderList.FailedMessages
    $ConcatFailures = @()

    foreach ($Failure in $Failures)
    {
        if ($Failure.ErrorMessage) { $ConcatFailures += $Failure.ErrorMessage }
        if ($Failure.SentTime) { $ConcatFailures += $Failure.ErrorMessage }
        if ($Failure.ReceivedTime) { $ConcatFailures += $Failure.ReceivedTime }
        if ($Failure.MessageSubject) { $ConcatFailures += $Failure.MessageSubject }
        if ($Failure.MessageSize) { $ConcatFailures += $Failure.MessageSize }
    }
    $TempArray.Failures = $ConcatFailures -Join "|"

    $MasterArray += $TempArray
}

$MasterArray
$MasterArray | Export-Csv -NoType "C:\Temp\export.csv" 
```

# android - LoopJ AndroidAsyncHttp 和 JSON POST ARRAY

> ID：14264224
> 
> 赞同：8
> 
> 时间：2013-01-10T17:56:05.003
> 
> 标签：android, json, http, post, android-async-http

我正在使用 LoopJ AndroidAsyncHttp 库与我的 PhP 服务器进行通信。我有一个问题。

我需要像这样发送一个 JsonObject：

```
{      "data": 2376845,      
       "data2": 12545,      
       "array": [{"data3": "2013-01-10",          
                     "data4": 23532        },       
                    {"data3": "2013-01-11",             
                     "data4": 523526   }]
} 
```

但是在javadoc中；唯一的参数是 RequestParams，并且没有任何类型的 Array。谁能帮我？或者给我看一些我可以使用的东西。谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-10T17:59:14.760

利用

```
public void post(Context context, String url, HttpEntity entity, String contentType, AsyncHttpResponseHandler responseHandler) 
```

代替：

```
public void post(Context context, String url, RequestParams params, AsyncHttpResponseHandler responseHandler) 
```

将您的 JSON 解析为字符串：

```
ByteArrayEntity entity = new ByteArrayEntity(bodyAsJson.getBytes("UTF-8"));
client.post(context, newUrl, entity, "application/json", responseHandler); 
```

其中 client 是 AsyncHttpClient 并且 bodyAsJson 是 String 中的 JSON

```
yourJsonObj.toString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T13:25:47.330

我们可以使用 javax.json-1.0.2.jar 提供的 JsonObject 类构建上述 json 格式，

```
JsonObject jo = Json.createObjectBuilder()
            .add("data", 2376845)
            .add("data2", 12545)
            .add("array",Json.createArrayBuilder()
                    .add(Json.createObjectBuilder().add("data3", "2013-01-10").add("data4", 23532).build())
                    .add(Json.createObjectBuilder().add("data3", "2013-01-11").add("data4", 523526).build()))
                    .build(); 
```

构建json格式后

```
 AsyncHttpClient client=new AsyncHttpClient();
        Request request = client.preparePost(your host URL).
        setHeader("Content-Type","application/json").
        setHeader("Content-Length", ""+jo.toString().length()).setHeader("Authorization","Basic fgfgfgfhfhtetet=").
        setBody(jo.toString()).build();
        ListenableFuture<Response> r = null;
        //ListenableFuture<Integer> f= null;
        try{
        r = client.executeRequest(request);
        System.out.println(r.get().getResponseBody());
        }catch(IOException e){

        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        } 
```

如果您需要基本身份验证，则需要将用户名组合的密钥添加到标头中

大多数情况下这对你有用

注意：AsyncHttpClient、ListenableFuture 类在 async-http-client-1.7.5.jar 中可用

# emacs - 当 Yasnippet 宏可以触发时，如何触发事件？

> ID：14264228
> 
> 赞同：12
> 
> 时间：2013-01-10T17:56:20.203
> 
> 标签：emacs, elisp, yasnippet

我喜欢 yasnippet，但它需要时间来记住。我想做的是在可以扩展宏的点时更改光标颜色（当没有宏时再返回）。但是，根据我对 yasnippet 工作原理的记忆，这可能并不完全有效。

一位朋友建议我在这里想要的是一个 yasnippet-can-fire-p，但我仍然不确定执行此操作的最佳方法。实现这一点的最干净的途径是什么，不会让我的系统陷入停顿？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T18:56:17.630

花了一些时间找到检查它是否可以扩展的函数，但“幸运”最终找到了它。

关键是这个函数通常会扩展，或者以其他方式执行回退行为。我克隆了这个函数并在这些地方设置了光标颜色。

而且，令人惊讶的是，它实际上并没有放慢速度。

```
;; It will test whether it can expand, if yes, cursor color -> green.
(defun yasnippet-can-fire-p (&optional field)
  (interactive)
  (setq yas--condition-cache-timestamp (current-time))
  (let (templates-and-pos)
    (unless (and yas-expand-only-for-last-commands
                 (not (member last-command yas-expand-only-for-last-commands)))
      (setq templates-and-pos (if field
                                  (save-restriction
                                    (narrow-to-region (yas--field-start field)
                                                      (yas--field-end field))
                                    (yas--current-key))
                                (yas--current-key))))

  (set-cursor-color (if (and templates-and-pos (first templates-and-pos)) 
                        "green" "red"))))

; As pointed out by Dmitri, this will make sure it will update color when needed.
(add-hook 'post-command-hook 'yasnippet-can-fire-p) 
```

将此添加到我的 lisp 集合中（我实际上认为这也很有用）。

* * *

**更新：**在最新版本的 yasnippet [从 2014 年 8 月，从`0.8.1`]，`yas--current-key`函数已重命名为`yas--templates-for-key-at-point`. cf[问题](https://github.com/capitaomorte/yasnippet/issues/507#issuecomment-52424068)

# jquery - 创建响应式移动菜单，想知道如何阻止 prevetDefault() 影响横向视图

> ID：14264231
> 
> 赞同：0
> 
> 时间：2013-01-10T17:56:29.503
> 
> 标签：jquery, mobile, responsive-design

我已经为我正在构建的网站的移动设备创建了一个手风琴菜单。

我遇到的问题是更改为横向视图会触发正常站点显示，维护从移动菜单生成的代码，该代码使用 preventDefault() 来阻止桌面站点正常行为的链接。

在不刷新页面的情况下转换为桌面站点时，有什么方法可以恢复原始桌面代码？

我意识到一种选择是为更大的屏幕尺寸启用移动菜单，例如 800 像素，但是在某些情况下，屏幕尺寸可能会超出移动设备的范围（不刷新），因此继续此操作问题。

谢谢！

# python - 在 Windows 平台上安装脚本时添加 .py 扩展名

> ID：14264234
> 
> 赞同：2
> 
> 时间：2013-01-10T17:56:37.927
> 
> 标签：python, package

如何配置在 Windows 平台上`setup.py`安装带有`.py`前缀但在所有其他平台上没有前缀的脚本？我要解决的问题是[Windows 需要一个`.py`扩展来识别和执行 Python 脚本](http://docs.python.org/3/faq/windows.html#how-do-i-make-python-scripts-executable)。

我有一个包设置如下：

```
MyPackage
├── CHANGES
├── ...
├── scripts
│   └── myprogram
├── setup.py
└── mypackage
    ├── __init__.py
    ├── ...
    └── myprogram.py 
```

在我的 setup.py 文件中，我声明`scripts/myprogram`为可安装脚本

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-

from setuptools import setup

...

setup(
    name='MyPackage',
    ...
    packages=['mypackage'],
    scripts=['scripts/myprogram'],
    ...
) 
```

该`myprogram`脚本只是一个简单的包装器，它简单地调用`mypackage.myprogram.main()`：

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-
from mypackage import myprogram
myprogram.main() 
```

在 *nix 平台上，它安装`myprogram`为一个名为 的可执行文件`myprogram`，这是我想要的，但在 Windows 上，它也安装`myprogram`在`C:\PythonXX\Scripts`目录中，因此在命令行上无法识别。如何让安装脚本`myprogram`像`myprogram.py`在 Windows 上一样安装，以便 Windows 识别文件类型以使其可执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:56:54.223

我找到了答案：`setup()`called的关键字参数`entry_points`使用包含 的字典调用`'console_scripts'`，如[相关问题的](https://stackoverflow.com/questions/17893/whats-the-best-way-to-distribute-python-command-line-tools)[答案](https://stackoverflow.com/a/17933/38140)中所述。

新`setup`调用如下所示：

```
 setup(
    name='MyPackage',
    ...
    packages=['mypackage'],
    entry_points={
        'console_scripts': [
            'myprogram = mypackage.myprogram:main'
        ]
    }
    ...
) 
```

进行这些更改后，我删除了`scripts`目录和其中的`myprogram`文件。

现在运行安装程序时，distribute 在`C:\PythonXX\Scripts`:`myprogram-script.py`和`myprogram.exe`. 因此，用户现在可以`myprogram`在 *nix 或 Windows 平台的命令行上输入，并始终让它运行相同的程序。非常便利！

# git - git 别名以合并然后将合并的文件回滚为未提交

> ID：14264235
> 
> 赞同：1
> 
> 时间：2013-01-10T17:56:42.073
> 
> 标签：git, git-alias

我在 Windows 上使用 git，我想为以下工作流定义一个别名：

```
git merge <branch>
git reset HEAD~1 
```

我在我的配置文件中尝试了以下内容，但它的作用与分别执行 2 个命令不同

```
[alias]
        rollback = reset HEAD~1
        rmerge = !git merge $1 && git rollback 
```

我还尝试了以下排列，但它仍然无法按预期工作：

```
[alias]
        rollback = reset HEAD~1
        rmerge = !git merge $1 && git reset HEAD~1

[alias]
        rollback = reset HEAD~1
        rmerge = !git merge $1 ; git reset HEAD~1 
```

如何在 Windows 上执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:43:48.563

也许你想要`git merge $1 --no-commit`

# javascript - 将链接转换为另一个链接 - javascript

> ID：14264236
> 
> 赞同：1
> 
> 时间：2013-01-10T17:56:42.480
> 
> 标签：javascript, jquery, html

例如-我在我的网站上分享了我的 frnd 网站的一些（近 100 多个）页面链接`www.lol.com`。但几天后，我的朋友将他的网站链接更改为`www.lolz.com`.

那么如何在我网站上的 javascript 帮助下更改`www.lol.com`为`www.lolz.com`，而无需手动更改我之前共享的那些链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:59:27.420

```
var allAnchors = document.getElementsBytagName('a');
for (var a = 0; a < allAnchors.length; a++){
  if (allAnchors[a].href.indexOf('lol.com') != -1){
    allAnchors[a].href = allAnchors[a].href.replace('lol.com','lolz.com');
  }
} 
```

初步的，但应该工作。另外，我建议您的朋友在lol.com 之前创建一个域，以指向lolz.com。作为网站作者来处理这个问题是他们的问题，而不是你。

而且，jQuery 方法：

```
<script type="text/javascript">
  $(document).ready(function(){
    $('a[href*="lol.com"]').attr('href',function(orig){
      return orig.replace('lol.com','lolz.com');
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:59:42.207

```
$( function() {
$("a[href=http://www.lol.com]").attr("src", "http://www.lolz.com");
}); 
```

# php - 用户授权后使用 PHP 或 Javascript 保存 facebook 网页

> ID：14264238
> 
> 赞同：1
> 
> 时间：2013-01-10T17:56:48.190
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk

登录 facebook 后，我想保存[https://www.facebook.com/pages](https://www.facebook.com/pages)的内容（没有特定的页面 ID，而是您看到的 url，并查看建议的收藏页面，而不是我喜欢或选择的页面）

我不是试图获取用户管理员的页面列表，也不是他们喜欢的页面列表。所以 /me/accounts 或 /me/likes 没有用。我尝试获取 Facebook 中添加的所有页面，从我上次访问此 url 开始，它建议它们作为我可能喜欢的页面

我正在使用[http://developers.facebook.com/docs/reference/php/](http://developers.facebook.com/docs/reference/php/)的示例，并获取我拥有的用户的个人资料。到目前为止，一切都很好。

我尝试使用检索数据

```
$facebook->api('/me/pages'), 
$facebook->api('/pages'), 
$facebook->api('/pages'), 
$facebook->api('/id=USER_ID/pages') 
```

依此类推，但所有这些都是错误的或使用 Graph API 页面？id=USER_ID 有不支持的获取/发布请求。

正如 Igy 所说“建议页面不是 API 的功能，只有 facebook.com 界面”

我尝试的其他方法是使用 file_get_contents 保存 url。作为网址，我使用了

```
ini_set('user_agent','MSIE 4\.0b2;'); //to pretend that I am a browser, it works
http://www.facebook.com/pages?id=USER_ID and
http://www.facebook.com/pages 
```

尽管保存已正确完成，但 facebook 无法识别授权并显示我想要的页面，但对于没有登录的用户。

我在 Facebook JavaScript 测试控制台中尝试了 javascript，并在登录后打开识别授权的页面。代码是

```
<div id="authResponse"></div>
<script>
var
  div         = document.getElementById('authResponse'),
  showAuthRecord = function(response) {
    if (!response.authResponse) {
      div.innerHTML = '<em>Not Connected</em>';
    } else {
      var html = '<table>';
      for (var key in response.authResponse) {
        html += (
          '<tr>' +
            '<th>' + key + '</th>' +
            '<td>' + response.authResponse[key] + '</td>' +
          '</tr>'
        );
      }
      div.innerHTML = html;
    }
  };
FB.getLoginStatus(function(response) {
  showAuthRecord(response);
  FB.Event.subscribe('auth.authResponseChange', showAuthRecord);
});

window.open('https://www.facebook.com/pages','mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0');
</script> 
```

有没有办法在 PHP、Graph API 或 FQL Query 中做到这一点？或者添加javascript，代码来保存我打开的页面？我还没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:31:35.873

您所要求的内容**无法**通过 Facebook 平台获得。并且尝试抓取页面以从中提取信息也违反了 Facebook[条款](https://www.facebook.com/legal/terms)：

> 未经我们事先许可，您不得使用自动方式（例如收获机器人、机器人、蜘蛛或刮刀）收集用户的内容或信息，或以其他方式访问 Facebook。

此外，您不能要求用户提供密码和登录信息，请参阅[Facebook 平台政策](https://developers.facebook.com/policy/)：

> 您不得包含代理、请求或收集 Facebook 用户名或密码的功能。

# gsm - GPS 追踪器和 GPRS 连接在不断变化的 GSM (BTS) 环境中

> ID：14264240
> 
> 赞同：0
> 
> 时间：2013-01-10T17:56:52.793
> 
> 标签：gsm, tcp-ip, gprs

我有疑问在 GPS Tracker 软件与服务器通信中实现的最佳方法是什么。连接是通过 GPRS 建立的，但我有一些疑问。

GPS Tracker 倾向于在车辆移动期间在网络 BTS 之间切换。GPRS是如何设计的。

1.  在 BTS 切换期间是否必须重新建立 GPRS 会话？
2.  如果没有什么更好。创建一个到服务器的长时间运行的 TCP/IP 连接 (IP:PORT) 并始终通过此连接发送数据 (ONE GPRS SESSION) 或者可能在每次跟踪器有东西要发送时创建 TCP/IP 连接然后关闭连接（全部在一个 GPRS 会话中）？BTS 之间的切换会破坏我在此会话期间创建的 GPRS SESSION 和连接吗？

如果有人给我一些关于这个主题的信息，以及如何考虑改变 BTS'es、网络运营商、国家（开启漫游）的行为，那就太好了。谢谢。

通过说连接到服务器，我的意思是在一个 GPRS 会话期间建立的连接。在一个 GPRS 会话期间您可以创建许多连接，所以我的问题是关于一个 GPRS 会话的连接，如果在某些情况下必须重新创建 GPRS SESSION，则需要通过多个 GPRS SESSION 的连接（这将更昂贵）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:12:38.670

在 BTS 之间切换不会破坏连接（好吧，我对这件事了解不多，除非我使用过它，而且我确信*有时*会保留连接）。

我的首选解决方案如下：

1.  如果有东西要发送，则创建一个连接，但在关闭前让它空闲几分钟。

2.  提供应用级的keepalive协议来检测挂起的连接。

如果（1）它涉及关闭 GPRS*会话*并且（2）提供商对 GPRS 会话收取一些最低费用，因此您可以在打开时支付 40kb+发送 200 字节+紧密的顺序。上面的解决方案应该是一个很好的折衷方案。

# nhibernate - 从流畅的 nhibernate 描述构建的 SQLite DB 生成不可为空的列

> ID：14264243
> 
> 赞同：1
> 
> 时间：2013-01-10T17:56:56.847
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, system.data.sqlite, schemaexport

我有以下代码来创建用于测试的内存 SQLite DB：

```
 Configuration config = null;
        FluentConfiguration fluentConfiguration = Fluently.Configure().Database(SQLiteConfiguration.Standard.InMemory().ShowSql()
            ).Mappings(m =>
                {
                    m.FluentMappings.AddFromAssemblyOf<ReturnSourceMap>();
                    m.HbmMappings.AddFromAssemblyOf<ReturnSourceMap>();
                    m.FluentMappings.AddFromAssemblyOf<EchoTransaction>();
                }).ExposeConfiguration(c => config = c);

        ISessionFactory sessionFactory = fluentConfiguration.BuildSessionFactory();

        _session = sessionFactory.OpenSession();

        new SchemaExport(config).Execute(true, true, false, _session.Connection, Console.Out); 
```

这似乎对大多数事情都有效，但不幸的是，它将所有列都创建为不可为空。

例如我有两个类：

`InternalFund`和`ExternalFund`。两者都继承自同一张表，`Fund`并且都保留在同一张表中。

`ExternalFund`有一个专栏`Manager_ID`，`InternalFund`没有。不幸的是，这意味着我不能持久化它，`InternalFund`因为它会抛出一个 SQL 异常。

我的测试不需要参照完整性，所以如果我可以让所有列都为空，我会很高兴。

有谁知道如何做到这一点？

谢谢

斯图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:27:59.340

糟糕，非常抱歉。除非另有说明，否则 SQLite DB 似乎假定可空性 - 不像 TSQL 在 create 语句中需要它。

事实上，我发现隐藏在一个子方法中，即特定属性在映射中设置了非空值。删除它可以解决问题。

不过，感谢您发布有关约定的信息，我会看看，因为我有另一个问题，他们可能会排序。

干杯

斯图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:46:49.790

您应该尝试使用[Conventions](https://github.com/jagregory/fluent-nhibernate/wiki/Conventions)的 FluentNhibernate 功能。如果您查看[此](http://marcinobel.com/index.php/fluent-nhibernate-conventions-examples/)链接，您将看到第一个示例是将可空性设置为默认值。

# html - 在 chrome contenteditable 中双击删除 bug (?!)

> ID：14264245
> 
> 赞同：0
> 
> 时间：2013-01-10T17:57:00.787
> 
> 标签：html, google-chrome, contenteditable

这是一个重复错误的 html 页面：`<span contenteditable style="border:1px solid black">content</span> something after`

我`23.0.1271.97 m`在 Windows 7 上使用 chrome 版本。

如果在我的示例中双击 span 以突出显示它，然后键入`backspace`或`delete`清除它，chrome 会将以下文本节点（'something after'）复制到 span 中。

我的要求：关于正在发生的事情的任何想法，以及任何不涉及安装事件处理程序的解决方案。

注意：我没有在 1980 年代版本的 IE 上对此进行测试，但 Firefox 11.0 拒绝通过双击在 contenteditable 范围内全选。
注意 2：单击后跟`ctrl+a`不显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T14:26:27.360

Windows 7 上的 Chrome 30.0.1599.101 m 中仍然存在相同的错误。

我发现该错误仅适用于具有`display: inline`并将其更改为的元素`display: inline-block`是一种可用的解决方法。

# c++ - 传递 NavigationPane 的 const 引用会导致错误

> ID：14264248
> 
> 赞同：1
> 
> 时间：2013-01-10T17:57:19.870
> 
> 标签：c++, qt, blackberry-10, blackberry-cascades

使用 BlackBerry 10 Cascades，我创建了一个类：

```
MyClass : public QObject
{
 QObject
  public:
    MyClass(const bb::cascades::NavigationPane & navigationPane);
    //...
  protected:
    bb::cascades::NavigationPane m_navigationPane; 
```

在 ccp 文件中，我在构造函数中有这个：

```
MyClass::MyClass(const bb::cascades::NavigationPane & navigationPane)
{
    m_navigationPane = navigationPane; 
```

当我构建时，它给了我错误：

`'bb::cascades::NavigationPane& bb::cascades::NavigationPane::operator=(const bb::cascades::NavigationPane&)' is private`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:11:46.797

在不知道那个类的情况下，很明显它是无法复制的。错误信息很清楚：它的复制赋值运算符是私有的。这通常是为了避免复制而故意进行的。

从它的名字我猜它代表了一种真正的资源。复制对象是没有意义的，因为资源是唯一的。

我知道您真正需要的是您在构造函数中获得的对象。假设它`MyClass`与您使用它创建的实例一样长，您可以在您的类中使用引用成员。这只能在构造函数的初始化列表中初始化，这样：

```
MyClass : public QObject
{
 QObject
  public:
    MyClass(const bb::cascades::NavigationPane & navigationPane);
    //...
  protected:
    const bb::cascades::NavigationPane& m_navigationPane; 
```

然后构造函数将是：

```
MyClass::MyClass(const bb::cascades::NavigationPane & navigationPane)
: m_navigationPane(navigationPane)
{
//    m_navigationPane = navigationPane; 
```

当然，如果您需要`NavigationPane`从对象内部实际修改实例`MyClass`，您只需要使用非常量引用，一切都会正常工作。

# sql - SQL Server 老化总计不匹配

> ID：14264253
> 
> 赞同：0
> 
> 时间：2013-01-10T17:57:29.983
> 
> 标签：sql, sql-server-2008

我有一个老化查询，它以 12、24 和 36 个月为间隔对购买的物品数量及其成本进行老化。查询运行得很好，但是与用于查找特定供应商总数的单个查询相比，我的总数不会相加。

见下文。

```
 SELECT s.SupplierNumber as Supplier_Number 
    , s.suppliername as Supplier_Name
    , i.supplierpartnum as Part_No
    , SUBSTRING(e.account_code,1,5)/*+'-'+RIGHT(e.account_code,7)*/ as Account_Code
    , CASE WHEN e.reference_code = ''
        THEN 'NOREF'
        ELSE reference_code
        END as Reference_Code
    , i.Commodity
    , i.ShortDscrptn as Part_Desc
    , i.unitofmeasure as UOM
    , i.unitprice as Unit_Price
, CASE WHEN h.OrderDate >= '2012-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN COUNT(i.Quantity)
        ELSE 0 END as Annual_Qty_12
, CASE WHEN h.OrderDate >= '2011-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN COUNT(i.Quantity)
        ELSE 0 END as Annual_Qty_24 
, CASE WHEN h.OrderDate >= '2010-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN COUNT(i.Quantity)
        ELSE 0 END as Annual_Qty_36 
, CASE WHEN h.OrderDate >= '2012-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN SUM(i.UnitPrice) 
        ELSE 0 END as  Annual_Spend_12          
, CASE WHEN h.OrderDate >= '2011-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN SUM(i.UnitPrice) 
        ELSE 0 END as  Annual_Spend_24  
, CASE WHEN h.OrderDate >= '2010-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN SUM(i.UnitPrice) 
        ELSE 0 END as  Annual_Spend_36  
FROM ekp.dbo.SUPPLIER s   
JOIN ekp.dbo.ORDERHEADER h
    ON s.SupplierID = h.SupplierID
JOIN ekp.dbo.ORDERITEM i
    ON h.OrderID = i.OrderID
JOIN mgnt.dbo.ematch e
    ON h.PONumber = e.po_ctrl_num
    AND i.LineNumber = e.po_sequence_id
WHERE h.OrderDate >= '2010-01-01'
AND h.OrderDate <= '2012-12-31' 
GROUP BY s.SupplierNumber, s.SupplierName, i.SupplierPartNum,  e.account_code
, i.Commodity, i.UnitOfMeasure, i.UnitPrice, i.ShortDscrptn, h.OrderDate
, e.reference_code 
```

我可以继续将结果复制到电子表格中，并对`Annual_Spend_12`特定的列求和`Supplier`，但它与以下内容不匹配：

```
 SELECT SUM(i.unitprice) as Annual_Spend_12 
    FROM ekp.dbo.ORDERITEM i
JOIN ekp.dbo.ORDERHEADER h 
    ON i.OrderID = h.OrderID
JOIN ekp.dbo.Supplier s
    ON h.SupplierID = s.SupplierID
JOIN mgnt.dbo.ematch e
    ON h.PONumber = e.po_ctrl_num
    AND i.LineNumber = e.po_sequence_id
WHERE s.SupplierNumber = '15302'
AND h.OrderDate >= '2012-01-01'
AND h.OrderDate <= '2012-12-31' 
```

上面这个查询的总和总是比顶部查询高得多。我还对整个聚合进行了求和和计数，但它也不匹配，实际上，它产生的结果与顶部查询相同：

```
 , COUNT(CASE WHEN h.OrderDate >= '2012-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN i.Quantity
        ELSE 0 END) as Annual_Qty_12
, COUNT(CASE WHEN h.OrderDate >= '2011-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN i.Quantity
        ELSE 0 END) as Annual_Qty_24 
, COUNT(CASE WHEN h.OrderDate >= '2010-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN i.Quantity
        ELSE 0 END) as Annual_Qty_36 
, SUM(CASE WHEN h.OrderDate >= '2012-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN i.UnitPrice 
        ELSE 0 END) as  Annual_Spend_12         
, SUM(CASE WHEN h.OrderDate >= '2011-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN i.UnitPrice 
        ELSE 0 END) as  Annual_Spend_24 
, SUM(CASE WHEN h.OrderDate >= '2010-01-01'
        AND h.OrderDate <= '2012-12-31'
        THEN i.UnitPrice 
        ELSE 0 END) as  Annual_Spend_36 
```

我非常害怕为每个聚合编写一个带有临时表的存储过程。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:11:36.183

我的猜测是测试是错误的：您在 Excel 中为第一个查询添加了错误的值。以下是在 Excel 中累加值的三种有效方法：

*   过滤值并突出显示该列。Excel 会将所选单元格中的值相加（Excel 2007 及更高版本）。
*   使用“sumif()”或“sum({})”添加给定供应商的总数
*   使用数据透视表

`group by`a的结果*不一定*是排序的。它们可能看起来已排序，但仍可能未排序。进行聚合的一种方法是对数据进行排序，然后挑选出结果。但是，还有其他方法，例如哈希聚合。而且，在多线程环境中，您不知道哪个线程会以什么顺序返回值。

# mysql - 您可以在不运行 5.5 MYSQL 的 percona 分叉版本的情况下使用 MYSQL REPLICATION 运行 percona 工具吗？

> ID：14264255
> 
> 赞同：0
> 
> 时间：2013-01-10T17:57:35.713
> 
> 标签：mysql, centos, percona

当前运行：

mysql Ver 14.14 Distrib 5.5.29，适用于 Linux (x86_64)，使用 readline 5.1

在 CentOS 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:15:35.613

是的你可以

我成功安装了percona工具包

[http://www.percona.com/redir/downloads/percona-toolkit/LATEST/percona-toolkit-2.1.8-1.noarch.rpm](http://www.percona.com/redir/downloads/percona-toolkit/LATEST/percona-toolkit-2.1.8-1.noarch.rpm)

并对数据库运行了一个成功的命令：

```
pt-table-checksum --replicate=percona.checksums  --host=localhost --user=root --password=XYZ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-11T20:34:28.020

Percona Toolkit 是一套独立的工具，它们也可以与 Percona Server、MySQL 和 MariaDB 一起使用

# java - 用于跟踪文件复制的 Java 程序

> ID：14264257
> 
> 赞同：4
> 
> 时间：2013-01-10T17:57:44.787
> 
> 标签：java, file-copying

我想编写一个 java 程序，它将在后台运行并跟踪哪个文件从哪个源复制到目标。该程序会将此信息写入日志文件。但我不确定从哪里开始。有没有人可以帮助我找到起点？

## 编辑

我对使用 java 没有任何限制。我愿意使用任何编程语言，即使它是任何类型的 shell 脚本，我完全没问题。（但唯一的事情是我在win7上）。但是java会更好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:03:25.477

阅读本文以了解如何组织文件系统手表 [http://e-blog-java.blogspot.com/2011/03/how-to-watch-file-system-for-changes-in.html](http://e-blog-java.blogspot.com/2011/03/how-to-watch-file-system-for-changes-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:01:52.207

我不确定您是否知道副本的源和目标（至少在 Java 中），但在 Java 7 中有一种方法可以查看`create/modification/delete`. 阅读[本](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)教程。

# c# - thrift 在反序列化并再次序列化时是否会保留未知字段/字节？

> ID：14264259
> 
> 赞同：5
> 
> 时间：2013-01-10T17:57:56.270
> 
> 标签：c#, protocol-buffers, thrift

所以这个例子是：

我有消息类型。它在服务器 A -> B -> C 之间传递 现在假设创建了具有几个新字段/ID 的消息的 2.0 版。服务器 A 和 C 知道这种新格式，但服务器 B 仍在使用旧格式。所有服务器反序列化、检查、序列化和发送消息。假设 A 正在填充所有字段（Message 的 V1.0 和 V2.0），C 会看到 Message V2.0 的填充字段吗？

我知道协议缓冲区支持这一点。我想知道 Thrift 是否也支持它。（在我用 C# 做的一个快速测试中，答案是**否定**的，只是想和大家核实一下）

作为消息代码的示例，这里是 IDL：

```
struct Message { // V1.0
  1: i64 Id;
} 
```

.

```
struct Message { // V2.0
  1: i64 Id;
  2: string Content;
} 
```

服务器 C 会看到 A 中填充的 Message.Content 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:59:30.420

答案是**否定**的。

关于协议缓冲区，还需要注意的是，根据文档，生成代码的 Python 版本不支持这一点。

[https://developers.google.com/protocol-buffers/docs/encoding#order](https://developers.google.com/protocol-buffers/docs/encoding#order) - *“如果消息具有未知字段，当前的 Java 和 C++ 实现在顺序排序的已知字段之后以任意顺序写入它们。当前的 Python实施不跟踪未知领域。”*

# visual-studio-2012 - 如何从 Windows Store 类库中引用 Windows SDK？

> ID：14264261
> 
> 赞同：1
> 
> 时间：2013-01-10T17:57:58.563
> 
> 标签：visual-studio-2012, windows-store-apps, class-library

如何将对 Windows SDK 的引用添加到我的 Windows 应用商店类库中，以便我可以在其中存储常用控件等，并从其他 Windows 应用商店应用程序中引用这些类？

当我尝试添加参考时，没有什么可添加的。仅包含“系统”作为参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:05:54.457

在 Windows 应用商店应用程序中，默认情况下，所有引用都以**.NET for Windows 应用商店应用程序**的名称添加。

对于其他支持的库（其他windows store库、便携库），需要添加引用。

无法添加普通 .NET 库。

# jquery - 一些点击后Jquery点击动画随机卡住

> ID：14264265
> 
> 赞同：1
> 
> 时间：2013-01-10T17:58:24.223
> 
> 标签：jquery, click, jquery-animate

当您单击链接时，我有一个滑块从另一个滑块移动。

这些链接使用 jquery animate 函数来更改左侧 css 参数。它可以工作，但是在点击一些点击后，它会在点击一些点击后随机卡住。

滑块以一个宽度为 930 像素的 div 开头，并且溢出隐藏，就像一个遮罩一样。

在这个 div 里面有另一个 div（id 幻灯片）有很多宽度（200000px）和位置：相对，这个 div comports 每个幻灯片（divs with width:930px; and float:left 类名是“tratamento”）

在我们拥有菜单的所有内容之外...菜单调用​​ jquery click 函数，这些函数使用函数动画来更改左侧位置，滚动幻灯片 div 中的内容。

这个脚本可以工作......但是，在点击一些点击后，随机点击几秒钟就不起作用了。不知道为什么，代码如下：

CSS：

```
 /* the mask div */
 #corpo2{width:930px;
 margin:80px 25px 20px 25px; 
 overflow:hidden;}

/* this div has every slide inside */
#slide{width:200000px;
position:relative;}

/* class that each slide uses */
.tratamento{
 width:900px;
 padding-right:30px;
 float:left;} 
```

HTML

```
<div id="corpo2">
<div id="slide">

<div class="tratamento">
 test 1
</div>

<div class="tratamento">
 test 2
</div>

<div class="tratamento">
 test 3
</div>

</div></div> 
```

调用点击函数的菜单：

```
 <ul>

    <li><a href="#" class="click1">Test 1</a></li>
    <li><a href="#" class="click2">Test 2</a></li>
    <li><a href="#" class="click3">Test 3</a></li>

    </ul> 
```

最后是 jquery，我在完成所有操作后加载它：

```
 <script>

$(document).ready(function() {
    $( ".click1" ).click(function(){$('#slide').animate({left: '0px'}, 500 );});
    $( ".click2" ).click(function(){$('#slide').animate({left: '-930px'}, 500 );}); 
    $( ".click3" ).click(function(){$('#slide').animate({left: '-1860px'}, 500 );});    

);

    </script> 
```

我尝试了一切，我删除了 (document).ready，使用并删除了脚本标签中的 type="text/javascript" 并尝试了绑定功能。它仍然 ramdonly 停止工作。

```
$( ".click1" ).bind("click", function(){$('#slide').animate({left: '0px'}, 500 );}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:01:41.730

```
$(document).ready(function() {
    $( ".click1" ).click(function(){$('#slide').stop().animate({left: '0px'}, 500 );});
    $( ".click2" ).click(function(){$('#slide').stop().animate({left: '-930px'}, 500 );}); 
    $( ".click3" ).click(function(){$('#slide').stop().animate({left: '-1860px'}, 500 );}); 
); 
```

# php - 来自mysql的引导模式窗口+ ajax

> ID：14264269
> 
> 赞同：0
> 
> 时间：2013-01-10T17:58:32.990
> 
> 标签：php, jquery, ajax, twitter-bootstrap, modal-dialog

当用户单击我的应用程序中的相应按钮时，我想启动一些弹出窗口。我用

```
$('#modal').on('show', function () {
    $.ajax({  ...  });
}); 
```

使用 ajax，我从 mysql 请求一些我希望注入到 modal-header、modal-body 和 modal-footer 的 json 内容。这是我通常在我的网页中使用的 html，我想在做出按钮选择时刷新并显示它。

```
 <div class="modal hide fade" id="modal">
            <div class="modal-header"></div>
            <div class="modal-body"></div>
            <div class="modal-footer"></div>
        </div> 
```

问题是模态显示为空或显示以前交付的内容，并且在 1 秒左右之后，ajax 带来了更新的好东西等等。所以内容的更新在用户眼前悲哀地运行。模态 api 没有提供比“显示”更好的选项，因此只有当整个内容由 ajax 带来并准备好传送到最终用户的屏幕时，才能显示模态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:36:42.530

好的，我尝试了一些不同的东西。当单击按钮并在成功选项上保留第一个内容时，我运行 ajax 调用，然后我手动调用模态窗口以显示其更新的好东西。

```
$('a[href=#viewProperty]').click(function(e) {

    var dataString = "action=viewProperty&propertyId=" + $.cookie('propertyId');

    $.ajax({
        type     : "GET",
        dataType : "json",
        url      : "ajax/property.php",
        data     : dataString,
        success  : function(data){
            console.log("ajax works");
            //$.removeCookie('propertyId');
            console.log(data.house_type);
            $('#viewProperty h3').empty().html('View Property: ' + data.house_type);

            $('#viewProperty').modal('show');               
        },
        error    : function(){
            console.log("ajax failed");
        }
    }); 

    return false;   
}); 
```

并且工作正常。剩下的就是在 ajax 调用完成之前添加一个加载器。

# android - targetSdkVersion 与 minSdkVersion：configChanges

> ID：14264271
> 
> 赞同：5
> 
> 时间：2013-01-10T17:58:38.217
> 
> 标签：android

我想避免屏幕方向更改时 Activity 重新启动。在较旧的 sdk 版本中，它是由`configChanges="orientation"`（在清单中）完成的。在较新的版本`screenSize`中添加了。

我的 minSdk 是 8，targetSdk 是 17，我发现自己处于一个奇怪的情况：我不能将 screenSize 放入 configChanges（因为 minSdk），但是我的手机（4.1）会破坏方向改变的任何活动（因为 targetSdk） .

有什么出路吗？我能否以某种方式防止这种破坏，而不必针对过时的 Sdk（但仍将其作为 minSdk 中的一个选项）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-31T19:32:51.800

您可以保留您的`android:minSdkVersion`和，`android:targetSdkVersion`因为您目前拥有它们（在您的示例中为 8 和 17）。

为了能够放入`screenSize`，`configChanges`更改此行

`target=android-someapinumber`

在`project.properties`文件中。选择首次出现`someapinumber`的 android 版本（例如，API 13）。`screenSize`

尽管您询问了特定的“screenSize”问题，但此解决方案适用于您希望支持旧设备但同时必须使用更新功能的所有类似情况。在这种特殊情况下，不知道此属性的旧设备将忽略“screenSize”，因此您不必担心向后兼容性。在其他情况下，您可能必须在源代码中添加如下所示的条件，以确保在运行时您的应用不会使用给定（旧）android 版本中不可用的功能。

```
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP) 
{
    // Code that uses features available in LOLLIPOP and newer
    // versions of android, while the app also runs on older versions
    // and supports them because of android:minSdkVersion.
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T03:34:47.507

啊，我终于想出了解决方案：

至于我们不能用 screenSize 属性影响“已知建议的解决方案”，**因为当我们指定 android:configChanges="screenSize" 时，eclipse 会在 screenSize 上触发 xml 解析错误**，如果我们在 targetSdkVersion 12 或更低版本中指定，android os 将不会在方向更改时重新启动活动. （我现在也知道并且正在使用 targetSdkVersion 来识别最大支持的 sdk 版本。但是当我为此再次研究时，有 maxSdkVersion。）

所以通过这个设置：

```
使用-sdk android:minSdkVersion="10" android:targetSdkVersion="12"
安卓：m​​axSdkVersion="17"

...

android:configChanges="方向|..."
```

os 不会在方向更改时重新启动活动，应用程序仍将支持最小和最大 sdk 版本，但将在与 sdk 12 的兼容模式下运行，这是 sdk 的最高版本，不会重新启动活动，这将解决上述问题。

# php - 截断功能不起作用

> ID：14264272
> 
> 赞同：0
> 
> 时间：2013-01-10T17:58:44.893
> 
> 标签：php, mysql, function, truncate

我正在从 mysql 数据库中提取一些数据并用它构建一个表。我有一个截断函数来砍掉很长的字符串。

这是截断函数：

```
 function myTruncate($string, $limit, $break=".", $pad="...")
    {
      // return with no change if string is shorter than $limit
      if(strlen($string) <= $limit) return $string;

      // is $break present between $limit and the end of the string?
      if(false !== ($breakpoint = strpos($string, $break, $limit))) {
        if($breakpoint < strlen($string) - 1) {
          $string = substr($string, 0, $breakpoint) . $pad;
        }
      }
      return $string;
    } 
```

这是调用该函数的表格构建位：

```
 while($row = mysql_fetch_assoc($liveItemQuery)){
       //get donation type
       $content .= "<tr><td>" . $i . "</td><td>" . $row['timestamp'] . "</td><td>" . myTruncate($row['description'], 25) . "</td><td>" . $row['po_number'] . "</td><td>" . number_format($row['amount'], 2) . "</td><td><a href=\"?view=expenses&itemid=" . $row['id'] . "\">Edit</a></td></tr>";
       $i++;
   } 
```

话虽如此，没有在描述字段上执行截断。可能值得注意的是，`description`它作为数据类型存储`text`在数据库中。此外，`myTruncate($row['description'], 25)`报告的 var 转储`string(1995)`，文本的全长。

那么发生了什么？

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:54:44.030

“无论如何都要截断”。容易得多。

```
function myTruncate($s, $len){
    return substr($s, 0, $len) . (strlen($s)>$len? '...':'');
} 
```

# matlab - Matlab，守恒定律的整合

> ID：14264273
> 
> 赞同：5
> 
> 时间：2013-01-10T17:58:47.960
> 
> 标签：matlab, numerical-methods, conservation-laws

我想知道是否有建立健壮的库或类似 FEX 的包来处理 matlab 中的标量守恒定律（比如 1D）。

我目前正在处理一维非线性，非局部，守恒定律，一阶方案的扩散误差让我很生气，而且错过了很多物理学。因此，我想知道是否已经有一些强大的工具，以避免自己编写一些代码（理想情况下，类似[boost::odeint](http://headmyshoulder.github.com/odeint-v2/)的东西，用于 C++ 中与方案无关的高阶 ODE 集成）。

任何帮助表示赞赏。

**编辑：**对缺乏明确性表示歉意。对于守恒定律，我的意思是一般双曲偏导方程的形式

```
 u_t(t,x) + F_x(t,x) = 0 
```

其中`u=u(t,x)`是一个密集的守恒变量（比如标量，一维，例如质量密度，能量密度，...），`F = F(t,x)`是它的通量。因此，我对哈密顿系统特征（能量、电流......）的守恒特性不感兴趣（感谢@headmyshould 的评论）。

我引用`boost::odeint`了一个解决数学问题（ODE 集成）的健壮和通用库的概念参考。因此，我正在寻找一些实现 Godunov 类型方法的包，等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-19T21:54:43.727

我目前正在研究冲击湍流模拟的新方法，并在 MATLAB 中进行大量代码测试/验证。不幸的是，我还没有找到一个通用库来满足您的期望，但是基本的 Godunov 或 MUSCL 代码实现起来相对简单。本文对一些有用的方法进行了很好的概述：
[1] Kurganov、Alexander 和 Eitan Tadmor (2000)，New High-Resolution Central Schemes for Nonlinear Conservation Laws and Convection-Diffusion Equations，*J. Comp。物理。*, 160, 214–282。[PDF格式](http://www.cscamm.umd.edu/centpack/publications/files/KT_semi-discrete.JCP00-centpack.pdf)

以下是该论文中的一些示例，用于求解无粘性 Burgers 方程的周期域上的一维等距网格。这些方法很容易推广到方程组、耗散（粘性）系统和 [1] 中概述的更高维度。这些方法依赖于以下函数：

通量项：

```
function f = flux(u)
%flux term for Burgers equation: F(u) = u^2/2;
f = u.^2/2; 
```

最小模块功能：

```
function m = minmod(a,b)
%minmod function:
m = (sign(a)+sign(b))/2.*min(abs(a),abs(b)); 
```

## 方法

### Nessyahu-Tadmor 方案：

二阶方案^_

```
function unew = step_u(dx,dt,u)
%%%   Nessyahu-Tadmor scheme

ux = minmod((u-circshift(u,[0 1]))/dx,(circshift(u,[0 -1])-u)/dx);

f = flux(u);
fx = minmod((f-circshift(f,[0 1]))/dx,(circshift(f,[0 -1])-f)/dx);

umid = u-dt/2*fx;
fmid = flux(umid);

unew = (u + circshift(u,[0 -1]))/2 + (dx)/8*(ux-circshift(ux,[0 -1])) ...
      -dt/dx*( circshift(fmid,[0 -1])-fmid ); 
```

[此方法在 x j+1/2 个]网格点处计算一个新的 u 值，因此它还需要在每一步进行网格移位。主要功能应该是这样的：

```
clear all

% Set up grid
nx = 256;
xmin=0; xmax=2*pi;
x=linspace(xmin,xmax,nx);
dx = x(2)-x(1);

%initialize
u = exp(-4*(x-pi*1/2).^2)-exp(-4*(x-pi*3/2).^2);

%CFL number:
CFL = 0.25;

t = 0;
dt = CFL*dx/max(abs(u(:)));
while (t<2)

    u = step_u(dx,dt,u);
    x=x+dx/2;

    % handle grid shifts
    if x(end)>=xmax+dx
        x(end)=0;
        x=circshift(x,[0 1]);
        u=circshift(u,[0 1]);
    end

    t = t+dt;

    %plot
    figure(1)
    clf
    plot(x,u,'k')
    title(sprintf('time, t = %1.2f',t))
    if ~exist('YY','var')
        YY=ylim;
    end
    axis([xmin xmax YY])
    drawnow
end 
```

### Kurganov-Tadmor 方案

[1] 的 Kurganov-Tadmor 方案与 NT 方案相比具有几个优点，包括较低的数值耗散和允许使用您选择的任何时间积分方法的半离散形式。使用与上述相同的空间离散化，它可以表述为 du/dt = (stuff) 的 ODE。此 ODE 的右侧可以通过以下函数计算：

```
function RHS = KTrhs(dx,u)
%%% Kurganov-Tadmor scheme

ux = minmod((u-circshift(u,[0 1]))/dx,(circshift(u,[0 -1])-u)/dx);
uplus = u-dx/2*ux;
uminus = circshift(u+dx/2*ux,[0 1]);
a = max(abs(rhodF(uminus)),abs(rhodF(uplus)));
RHS = -( flux(circshift(uplus,[0 -1]))+flux(circshift(uminus,[0 -1])) ...
         -flux(uplus)-flux(uminus) )/(2*dx) ...
      +( circshift(a,[0 -1]).*(circshift(uplus,[0 -1])-circshift(uminus,[0 -1])) ...
         -a.*(uplus-uminus) )/(2*dx); 
```

这个函数还依赖于知道 F(u) 的雅可比的谱半径（`rhodF`在上面的代码中）。对于无粘性的汉堡，这只是

```
function rho = rhodF(u)
dFdu=abs(u); 
```

KT 方案的主程序可能是这样的：

```
clear all

nx = 256;
xmin=0; xmax=2*pi;
x=linspace(xmin,xmax,nx);
dx = x(2)-x(1);

%initialize
u = exp(-4*(x-pi*1/2).^2)-exp(-4*(x-pi*3/2).^2);

%CFL number:
CFL = 0.25;

t = 0;
dt = CFL*dx/max(abs(u(:)));
while (t<3)

    % 4th order Runge-Kutta time stepping
    k1 = KTrhs(dx,u);
    k2 = KTrhs(dx,u+dt/2*k1);
    k3 = KTrhs(dx,u+dt/2*k2);
    k4 = KTrhs(dx,u+dt*k3);
    u = u+dt/6*(k1+2*k2+2*k3+k4);

    t = t+dt;

    %plot
    figure(1)
    clf
    plot(x,u,'k')
    title(sprintf('time, t = %1.2f',t))
    if ~exist('YY','var')
        YY=ylim;
    end
    axis([xmin xmax YY])
    drawnow
end 
```

# maven - tukey-urlrewrite 不适用于 Maven

> ID：14264281
> 
> 赞同：1
> 
> 时间：2013-01-10T17:59:20.603
> 
> 标签：maven, tuckey-urlrewrite-filter

我的项目在 ant 上运行良好。考虑将它移动到 maven，甚至包括 tomcat 作为依赖项，这样我就不必单独安装 tomcat。

当我执行 mvn tomcat:run 时；它能够构建应用程序并在tomcat启动时出现以下错误

```
10 Jan, 2013 8:49:02 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter UrlRewriteFilter
java.lang.ClassCastException: org.tuckey.web.filters.urlrewrite.UrlRewriteFilter cannot be cast to javax.servlet.Filter
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4001)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4651)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
        at org.apache.catalina.startup.Embedded.start(Embedded.java:825)
        at org.codehaus.mojo.tomcat.AbstractRunMojo.startContainer(AbstractRunMojo.java:558)
        at org.codehaus.mojo.tomcat.AbstractRunMojo.execute(AbstractRunMojo.java:255)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
10 Jan, 2013 8:49:02 PM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
10 Jan, 2013 8:49:02 PM org.apache.catalina.core.StandardContext start 
```

我的 pom.xml 具有以下依赖项：

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>servlet-api</artifactId>
    <version>6.0.35</version>
</dependency>
<dependency>
    <groupId>org.tuckey</groupId>
    <artifactId>urlrewritefilter</artifactId>
    <version>4.0.4</version>
</dependency> 
```

我什至尝试更改 tuckey 的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:06:15.427

你手上肯定有依赖冲突。我的建议是：

1.  依赖于标准`servlet-api`工件，而不是 Tomcat 的
2.  使用`provided` [范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)，这样`servlet-api`jar 就不会被捆绑到您的 web 应用程序中。Tomcat 不希望你包含它，如果你包含它，它会发出警告。

然后你的 POM 应该有这个片段：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>org.tuckey</groupId>
    <artifactId>urlrewritefilter</artifactId>
    <version>4.0.4</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T11:55:25.580

open you .m2 and locate the urlrewritefilter-3.1.0.pom. just copy the java servlet dependancy and add it to you pom. by example if you are using version 3.0.1, you must add this

```
<dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.3</version>
            <scope>provided</scope>
        </dependency> 
```

hope this help.

# javascript - 将 URL 传递给 Javascript 函数

> ID：14264288
> 
> 赞同：0
> 
> 时间：2013-01-10T17:59:36.830
> 
> 标签：javascript, jquery

我花了一段时间来解决许多类似的问题，但根据给出的答案，我相信我的设置是正确的——但它不起作用，我不知道为什么。

我是 Javascript/jQuery 的新手，所以很可能（或很可能！）我在这里遗漏了一些完全明显的东西。

我有一个带有大型“主”div 的页面，我正在使用 jQuery .load 通过导航将内容加载到该页面中。这一切都很好。但是，一些目标页面是数据密集型的，所以我试图在两者之间集成一些东西来向用户表明页面正在加载。因为有许多导航元素，而不是具有多个功能（即每个导航元素一个），我试图在一个功能中做到这一点，就像这样......

```
<script type="text/javascript">
function loadPage(pgurl) {
    $('#main').html('<p align="center">Loading...</p>');
    $('#main').load(' +pgurl+ ');
}
</script> 
```

我遇到的问题是导航中的onclick。在此之前，我在 onclick 中有 .load （即*onclick="$('#main').load('/pages/testpage/');"*）并且效果很好。现在我正在通过 onclick 触发 loadPage 函数，它正在加载一个黑色页面（firebug 告诉我是站点根目录）。

这是我的点击代码；

```
<a onclick="loadPage('/pages/testpage/');return false;">Test</a> 
```

我没有返回任何错误。我只能假设 loadPage 函数的值为零，而不是 /pages/testpage/ - 但我不知道为什么！

非常感谢指针 - 这里发生了很多挠头！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:01:26.187

它已经是一个字符串：

```
$('#main').load(pgurl); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:01:26.720

```
$('#main').load(' +pgurl+ '); 
```

需要是

```
$('#main').load(pgurl); 
```

您可能应该将其写为一行以防止第二次查找。

```
function loadPage (pgurl) {
    $('#main').html('<p align="center">Loading...</p>').load(pgurl);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T18:01:51.883

因为您似乎没有使用`pgurl`参数，所以加载括号中的这个东西是`string`变量名称的文本:)

```
$('#main').load(' +pgurl+ '); 
```

改用那个

```
$('#main').load(pgurl); 
```

如果你不熟悉字符串连接，也许你应该看看[http://www.youtube.com/watch?v=n17aX2TdQRk](http://www.youtube.com/watch?v=n17aX2TdQRk)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T18:02:35.230

那是错字吗？尝试改变：

`$('#main').load(' +pgurl+ ');`

至

`$('#main').load(pgurl);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T18:05:03.717

您必须更改以下行 // 您传递字符串而不是变量 //

```
$('#main').load(' +pgurl+ '); 
```

至

```
$('#main').load(pgurl); 
```

# python - Python Google Web 应用程序，将文件发送到 Dropbox

> ID：14264296
> 
> 赞同：1
> 
> 时间：2013-01-10T17:59:55.037
> 
> 标签：python, google-app-engine, dropbox-api

我正在开发一个谷歌网络应用程序，使用他们的谷歌应用程序引擎来解析来自各种传入源的一些数据并将其全部保存到一个地方。我的最终目标是将文件保存在 Dropbox 上，但 Google 应用托管服务不允许我将文件保存在磁盘上。有没有办法将原始数据发送到 Dropbox 应用程序并让该应用程序将其保存为文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:10:10.280

您可以使用 BlobStore (https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore) 或 Google Cloud Storage (https://developers.google.com) 写入 Google AppEngine 中的文件/appengine/docs/python/googlestorage/overview）

要使用 dropbox api 写入文件，请查看此处：[https ://www.dropbox.com/developers/reference/api#files-POST](https://www.dropbox.com/developers/reference/api#files-POST)

您必须设置一个经过身份验证的请求，但这会将您的 POST 正文的内容写入一个文件到经过身份验证的用户的 Dropbox 中。

我认为对于 Blobstore、Google Cloud Storage 和 DropBox，您不能附加到现有文件，因此如果您需要这样做，您需要为每次要写入数据并在以后合并文件时创建一个新文件，或者在写入新数据之前，读取以前的文件数据并将其添加到新数据中。

# android - 如何在 Android 中保存类似于 BackStack 的屏幕状态？

> ID：14264298
> 
> 赞同：1
> 
> 时间：2013-01-10T17:59:59.393
> 
> 标签：android, android-layout, back-stack

我只是想知道一些我需要一些建议的android ui方面！可能是，到目前为止我的想法并不是最好的......

基本上我正在开发一个应用程序，它在播放器（**主屏幕**）中播放流。用户可以在第二个屏幕（标签栏**屏幕**）中选择流，在那里他可以在三个不同的列表之间切换，每个列表都在一个标签中，每个 tabbarclick 都会启动一个新活动（我没有使用一个`ActionBar`或 sth，我刚刚创建了一个自己的 UI 元素，由三个图标组成，当前一个被选中，另外两个启动一个新的 Activity）：

*   `ListViewActivity1`：动态创建 ViewFlipper 与来自数据库的嵌套 ListViews (fe country->state->city..)

*   `ListViewActivity2`: 带有收藏夹的简单 ListView`ListViewActivity1`

*   `ListViewActivity3`: 带有用户生成内容的简单 ListView

到目前为止，它工作得很好，但我开始挣扎......每次用户再次进入**标签栏屏幕**时，我都希望他能准确地回到`ListView`他所在的位置。所以基本上我正在寻找一种方法来存储不同的屏幕，如果用户离开它们。我遇到了 `onSaveInstanceState(Bundle savedInstanceState)`，但这并不真正符合我的需求。这`ListViewActivity 1`是一个非常复杂的列表，有时多达六个级别，我真的不想在一个`savedInstanceState`！还有其他方法吗？

实际上，如果我回到`BackStack`，这真的可以像我想要的那样保存不同的状态。所以有可能，我只是找不到这样的东西..

那么，**问题1**：有没有办法像这样保存视图`BackStack`？

**问题 2**：UI 实现的整个想法是设置应用程序的好解决方案吗？

感谢您的任何意见！

# c++ - 哪些情况会导致对原始变量的 C++ 代码的天真搜索失败？

> ID：14264304
> 
> 赞同：2
> 
> 时间：2013-01-10T18:00:26.187
> 
> 标签：c++, parsing

如果我遍历 C++ 源文件并简单地查找变量类型，然后是正确的 C++ 变量名，是否会出现导致缺少变量或错误变量的情况，这需要适当的解析器来克服？

一个简单的测试用例正确地抓住了所有原语，但如果有很多我没有考虑过的无关用例，我宁愿不要投入太多时间。到目前为止，我只是在寻找关键字，获取下一个单词并检查名称的有效性。除了检查变量名的有效性之外，我没有使用正则表达式，并且我知道正则表达式不足以进行解析。

我的程序是用 Java 编写的。我做了这个程序的 Java 目标版本，并使用了 JavaParser，它工作得很好。我认为 ANTLR 或类似的东西对于仅在源中查找原始变量来说太过分了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:06:59.883

您是否尝试在一行上声明多个变量？

```
int i, *j, k[2]; 
```

函数参数声明呢？

```
int func(int i, int j); 
```

typedef 呢？

```
typedef int Integer;
Integer i; 
```

在没有合适的解析器（而且相当复杂）的情况下解析 C++ 是很困难的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:06:29.590

函数参数，在同一行声明的多个变量，不同行的类型和变量名等怎么样？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T22:15:26.603

基本的 C++ 声明语法不是简单的从左到右的`<type> <identifier>`语法。

如果这是 C++ 的语法，那么，例如，声明一个整数数组将使用类型`int[]`后跟标识符来完成：

```
int[] foo 
```

声明一个函数意味着编写一个函数类型，例如`int()`后跟一个标识符：

```
int() foo; 
```

取而代之的是，继承自 C 的 C++ 语法是一种称为“声明模仿使用”的风格

```
<type_identifier> <expression>; 
```

声明中的表达式看起来像是您可以使用声明的实体的一种方式，并且这种用法将产生指定的类型。

例子：

```
int i;      // now the expression i has the type int
int (ii);   // now the expression (ii) has the type int, and so ii has the same type
int j();    // now the expression j() has type int, and therefore j has a function type
int k[3];   // now the expression k[3] has type int, and therefore k has an array type
int (*l)(); // the expression (*l)() has type int, and therefore (*l) has a function type, therefore l has a pointer-to-function type. 
```

依此类推，涉及数组索引运算符、函数调用运算符、parens、解引用运算符、按位与运算符的任意复杂性，可能还有一些我不记得了。此外， const 和 volatile 可以在不同的地方加入。

更糟糕的是，声明语法可能会与初始化程序的语法发生奇怪的交互。例如，“最令人烦恼的解析”是一种情况，即初始化程序中的括号与声明函数类型所涉及的括号混淆。parens 是类型表达式的一部分还是初始化程序的一部分取决于其中使用的名称碰巧是什么：

```
struct bar {};
int baz() { return 1; }

int foo(bar());  // declaration of function (most vexing parse)
int foo2(baz()); // declaration of variable (initialized with baz()) 
```

当然还有其他人提到的问题；typedefs/类型别名、宏、嵌套声明、多重声明等。

# ruby-on-rails-3 - 无法通过 rails 控制台（或通过我的应用程序）更新对象......但没有具体错误可帮助调试

> ID：14264308
> 
> 赞同：0
> 
> 时间：2013-01-10T18:00:46.767
> 
> 标签：ruby-on-rails-3, friendly-id

这是我试图做的：

```
irb(main):008:0> c.title = "Another Test"
=> "Another Test"
irb(main):009:0> c.save
   (0.7ms)  BEGIN
  FriendlyId::Slug Load (1.0ms)  SELECT "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."sluggable_type" = 'Contest' AND (slug = 'another-test-challenge' OR slug LIKE 'another-test-challenge--%') AND (sluggable_id <> 64) ORDER BY LENGTH(slug) DESC, slug DESC LIMIT 1
   (0.5ms)  ROLLBACK
=> false 
```

当我尝试在我的应用程序中执行此操作时（即使用编辑表单），我遇到了这个问题：

```
2013-01-10T17:53:47+00:00 app[web.2]: cache: [POST /mycontroller/this-is-the-old-title] invalidate, pass 
```

我似乎无法编辑我的对象的标题，这也相当于与我的对象关联的友好 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:29:29.800

因为您的答案`c.save`将调用该对象的验证。如果任何验证失败，它将回滚 SQL 事务。

如果您的事务获得`ROLLBACK`，您可以要求对象`c.errors.full_messages`查看错误以及哪些验证失败，或者如果验证失败，则`c.save`使用`c.save!`将引发异常的 use。

# java - Java Web Start 找不到带有格式化版本文件名的 jar

> ID：14264310
> 
> 赞同：1
> 
> 时间：2013-01-10T18:00:49.153
> 
> 标签：java, web-applications, versioning, java-web-start

我有一个简单的 Web Start 应用程序，它位于文件服务器上。该目录包括以下内容：

```
foo__V1.1.jar
runfoo.jnlp 
```

内容`runfoo.jnlp`如下：

```
<?xml version="1.0" encoding="utf-8"?>
  <jnlp spec="1.0+" href="http://myserver.com/runfoo.jnlp" codebase="http://myserver.com">
  <information>
    <title>Foo</title>
  </information>
  <security>
    <all-permissions/>
  </security>
  <resources>
    <j2se version="1.7.0_06+" href="http://java.sun.com/products/autodl/j2se" />
    <jar href="foo.jar" main="true" version="1.0+"/>
    <property name="jnlp.versionEnabled" value="true"/>
  </resources>
  <application-desc name="Foo" main-class="com.myserver.foo.Foo" width="640" height="480" />
  <update check="always" policy="always" />
</jnlp> 
```

问题是 Web Start 试图访问[http://myserver.com/runfoo.jnlp?version-id=1.0%2B](http://myserver.com/runfoo.jnlp?version-id=1.0%2B)上的文件，但没有找到它。

我假设在这个简单的实例中让 Web Start 自动获取最新的 jar 版本需要一些额外的步骤，但是经过大量的谷歌搜索后，我发现所有的步骤都是相同的：

*   将文件重命名为`<file_name>__V<versionnumber>.jar`
*   将`versionEnabled`属性添加到 jnlp
*   享受版本化的好处

当我指定一个明确的文件名时，jnlp 文件运行得非常好，但是当我尝试实现版本控制时总是失败。

我确定我**错过了一些重要**的东西，但我无法在任何地方找到它。我猜想虽然我的设置很简单，但它并不简单，因为它既能工作又能工作。

任何帮助都感激不尽 ：）

* * *

明确的例外是：

```
com.sun.deploy.net.FailedDownloadException: Unable to load resource: (http://myserver.com/foo.jar?version-id=1.0%2B, 1.0+) 
```

我也尝试`+`从版本规范中删除，并且发生了同样的错误（当然除了缺少的加号）。写入jnlp`foo__V1.1.jar`文件是可行的，但当然会破坏这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:34:27.820

版本化文件名是[JNLP 下载 servlet](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/downloadservletguide.html)使用的约定，用于在客户端请求时知道要提供什么`lib.jar?version=something`。您需要服务器端的下载 servlet（或者您需要在`mod_rewrite`规则或类似规则中复制其行为），仅具有版本名称的纯文件是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T18:01:45.780

对于追随者，对我来说类似的问题

```
java.io.IOException: Error returned: 10 Could not locate resource
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.downloadResource(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResource(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResource(Unknown Source)
    at com.sun.javaws.LaunchDownload$DownloadTask.call(Unknown Source)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745) 
```

“无法启动应用程序”

```
com.sun.deploy.net.FailedDownloadException: Unable to load resource: (http://host:port/webapp_name/app/jar-name.jar?version-id=1.5.0-20160707.182810-19, 1.5.0-20160707.182810-19)
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.downloadResource(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResource(Unknown Source)
    at com.sun.deploy.cache.ResourceProviderImpl.getResource(Unknown Source)
    at com.sun.javaws.LaunchDownload$DownloadTask.call(Unknown Source)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745) 
```

意思是“特殊的内部文件 version.xml 与 web-app 目录中部署和存在的文件名不匹配”：

参考：[http ://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/downloadservletguide.html](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/downloadservletguide.html)

# c# - 根级别的数据无效。第 1 行，位置 1，写入时

> ID：14264311
> 
> 赞同：3
> 
> 时间：2013-01-10T18:00:52.667
> 
> 标签：c#, xml, windows-phone-7, record

这是我将数据添加到 xml 的代码：

```
IsolatedStorageFile isstore = IsolatedStorageFile.GetUserStoreForApplication();
IsolatedStorageFileStream bookfile = new IsolatedStorageFileStream("People.xml", System.IO.FileMode.Open, isstore);

XDocument xmldetails = XDocument.Load(bookfile);
XElement books =
    new XElement("person",
    new XAttribute("id", "5"),
    new XAttribute("name", "Book Title"),
    new XAttribute("beneficiary", "Book Author"),
    new XAttribute("description", "Book Author"),
    new XAttribute("deadline", "Book Author"),
    new XAttribute("price", "Fiction"));
xmldetails.Root.Add(books);

xmldetails.Save(bookfile);
bookfile.Close(); 
```

这是 People.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<people>
    <person index="1" name="Zlecenie numer jeden" beneficiary="Kowalski" description="Proste zlecenie jakiejs strony czy cos" price="800" deadline="27.12.2013" />
</people> 
```

当我单击按钮时，出现此错误：

> 根级别的数据无效。第 1 行，位置 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:27:39.913

您的 XML 文件似乎缺少根节点，而您正尝试将子节点添加到不存在的父节点。确保您的源 XML 格式正确。

顺便说一下，在你的代码中你应该做的是：

```
XElement books =
            new XElement("person",
            new XAttribute("id", "5"),
            new XAttribute("name", "Book Title"),
            new XAttribute("beneficiary", "Book Author"),
            new XAttribute("description", "Book Author"),
            new XAttribute("deadline", "Book Author"),
            new XAttribute("price", "Fiction"));
xmldetails.Element("People").Add(books); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:31:56.350

它应该是

```
xmldetails.Root.Add(books); 
```

* * *

`people`是xml的根所以你不需要指定它..

您应该使用[Root](http://msdn.microsoft.com/en-in/library/system.xml.linq.xdocument.root.aspx)属性..

# python - Python中非本地语句的语法错误

> ID：14264313
> 
> 赞同：13
> 
> 时间：2013-01-10T18:00:58.857
> 
> 标签：python, syntax-error, python-nonlocal

我想测试[这个](https://stackoverflow.com/questions/1261875/python-nonlocal-statement)问题的答案中指定的非本地语句的使用示例：

```
def outer():
   x = 1
   def inner():
       nonlocal x
       x = 2
       print("inner:", x)
   inner()
   print("outer:", x) 
```

但是当我尝试加载此代码时，总是会收到语法错误：

```
Traceback (most recent call last):

File "<stdin>", line 1, in <module>
  File "t.py", line 4
    nonlocal x
             ^
SyntaxError: invalid syntax 
```

有谁知道我在这里做错了什么（我使用的每个示例都有语法错误，包含`nonlocal`）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-10T18:01:43.203

`nonlocal`仅适用于 Python 3；它是[该语言的新增内容](http://docs.python.org/3/reference/simple_stmts.html#nonlocal)。

在 Python 2 中，它会引发语法错误；python 将`nonlocal`其视为表达式而不是语句的一部分。

当您实际使用正确的 Python 版本时，此特定示例可以正常工作：

```
$ python3.3
Python 3.3.0 (default, Sep 29 2012, 08:16:08) 
[GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.58)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> def outer():
...    x = 1
...    def inner():
...        nonlocal x
...        x = 2
...        print("inner:", x)
...    inner()
...    print("outer:", x)
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T03:40:53.033

> 非本地语句中列出的名称不得与本地范围内的预先存在的绑定发生冲突。

[https://docs.python.org/3/reference/simple_stmts.html#the-nonlocal-statement](https://docs.python.org/3/reference/simple_stmts.html#the-nonlocal-statement)

```
`def outer():
    x = 1
    def inner():
        nonlocal x
        y = 2
        x = y
        print("inner: ", x)
    inner()
    print("outer: ", x)`
```

```
`>>> outer()
inner:  2
outer:  2`
```

# asp.net - 在免费托管服务提供商上托管我的 asp.net 网站时，会发生以下情况

> ID：14264315
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:01:09.137
> 
> 标签：asp.net, vb.net, ms-access-2007

我的网站在我的系统上正常工作，它的插入搜索等一切都很好。当我从提供的 url 访问我的网站时，我在 brinkster.com 上托管了我的网站，所有其他页面都可以正常工作，除了那些连接到我的 ms 访问数据库的页面。我不知道如何解决它。

**这是我收到的堆栈跟踪**

```
[OleDbException (0x80004005): Could not find file 'C:\Sites\content\mydatabase.mdb'.]
   System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection) +969373
   System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject) +86
   System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup) +29
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +4863708
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +117
   System.Data.OleDb.OleDbConnection.Open() +40
   System.Data.Common.DbDataAdapter.QuietOpen(IDbConnection connection, ConnectionState& originalState) +31
   System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +112
   System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +287
   System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, String srcTable) +92
   System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +1297
   System.Web.UI.WebControls.AccessDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +58
   System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +19
   System.Web.UI.WebControls.DataBoundControl.PerformSelect() +142
   System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +73
   System.Web.UI.WebControls.GridView.DataBind() +4
   System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +82
   System.Web.UI.WebControls.BaseDataBoundControl.OnPreRender(EventArgs e) +22
   System.Web.UI.WebControls.GridView.OnPreRender(EventArgs e) +17
   System.Web.UI.Control.PreRenderRecursiveInternal() +80
   System.Web.UI.Control.PreRenderRecursiveInternal() +171
   System.Web.UI.Control.PreRenderRecursiveInternal() +171
   System.Web.UI.Control.PreRenderRecursiveInternal() +171
   System.Web.UI.Control.PreRenderRecursiveInternal() +171
   System.Web.UI.Control.PreRenderRecursiveInternal() +171
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +842 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:04:15.697

您的数据库需要在服务器上，而不是您的本地驱动器上。如果您已上传 .mdb，则将引用从绝对 c:\sites\content........ 更改为相对 ..(db 所在的文件夹)(dbfilename).mdb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:06:24.530

.mdb 文件是否在服务器上？如果是，请确保在您的 webconfig 中，或者无论您设置了连接字符串，将其从`C:\Sites\content\mydatabase.mdb'` 实际位置更改为

# c# - 如何调用存储在字典中的动作？

> ID：14264317
> 
> 赞同：-4
> 
> 时间：2013-01-10T18:01:20.803
> 
> 标签：c#, winforms, dictionary, listbox, action

我正在尝试设置一个`dictionary`，然后将其`keys`存储`items`为`listbox`.

我已经能够建立一个`dictionary`然后将其`keys`输入到 中`listbox`，但我不确定如何执行与`key`. 从上一个线程有一个建议，但我遇到了问题：[原始线程](https://stackoverflow.com/questions/14244455/how-to-store-a-list-of-cases-from-switch-statement#comment19766478_14244455)

```
Dictionary<string, Action> dict = new Dictionary<string, Action>();
public void SetDictionary()
    {
       //add entries to the dictionary
        dict["cat"] = new Action(Cat);
        dict["dog"] = new Action(Dog);

        //add each dictionary entry to the listbox.
        foreach (string key in dict.Keys)
        {
            listboxTest.Items.Add(key);
        }                            
    }

     //when an item in the listbox is double clicked
     private void listboxTest_DoubleClick(object sender, EventArgs e)
     {
         testrun(listboxCases.SelectedItem.ToString());             
     }

     public void testrun(string n)
     {
         //this is supposed to receive the item that was double clicked in the listbox, and run it's corresponding action as defined in the dictionary.
         var action = dict[n] as Action action();
     } 
```

我相信我上面的代码大部分是正确的并且我理解它，但是行动路线：

```
var action = dict[n] as Action action(); 
```

显示一个错误，指出“操作”需要一个`';'`. 我这里的逻辑准确吗？如果是这样，为什么动作调用不正确？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T18:03:48.773

你错过了一个`;`：

```
var action = dict[n] as Action; action();
                              ↑ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T18:04:29.530

首先，我假设字典的定义，因为它没有列出如下：

```
Dictionary<string, Action> dict; 
```

如果不匹配，请说明定义是什么。

要执行给定键的操作，您只需要：

```
dict[key](); 
```

或者

```
dict[key].Invoke(); 
```

要将其存储为变量，您（不应该）根本不需要演员表：

```
Action action = dict[key]; 
```

如果您确实需要转换它（意味着您的字典定义与我列出的不同），您可以这样做：

```
Action action = dict[key] as Action; 
```

然后您可以如上所示调用它：

```
action(); 
```

或者

```
action.Invoke(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:10:27.690

您的测试运行应该是

```
public void testrun(string n)
{
     //this is supposed to receive the item that was double clicked in the listbox, and run it's corresponding action as defined in the dictionary.
     dict[n]();
} 
```

基于假设您的字典`Dictionary<string, Action>`与@Servy 建议的一样

# php - 递归算法遇到问题

> ID：14264326
> 
> 赞同：0
> 
> 时间：2013-01-10T18:01:43.047
> 
> 标签：php, data-structures, recursion

好的，这是我的递归算法：

```
public function getCategoryTree($tree,$return = array()) {
    foreach ($tree->children as $child) {
      if (count($child->children) > 0 )
        $return[$tree->name] = $this->getCategoryTree($child, $return);
      else
        $return[] = $child->name;
    } 
    return $return;
  } 
```

这是我要遍历的数据结构的片段

```
Object(stdClass)#290 (6) {
      ["category_id"]=>
      int(1)
      ["parent_id"]=>
      int(0)
      ["name"]=>
      string(4) "Root"
      ["position"]=>
      int(0)
      ["level"]=>
      int(0)
      ["children"]=>
      array(2) {
        [0]=>
        object(stdClass)#571 (7) {
          ["category_id"]=>
          int(2)
          ["parent_id"]=>
          int(1)
          ["name"]=>
          string(18) "Root MySite.com"
          ["is_active"]=>
          int(0)
          ["position"]=>
          int(0)
          ["level"]=>
          int(1)
          ["children"]=>
          array(11) {
            [0]=>
            object(stdClass)#570 (7) {
              ["category_id"]=>
              int(15)
              ["parent_id"]=>
              int(2)
              ["name"]=>
              string(9) "Widgets"
              ["is_active"]=>
              int(1)
              ["position"]=>
              int(68)
              ["level"]=>
              int(2)
              ["children"]=>
              array(19) {
                [0]=>
                object(stdClass)#566 (7) {
                  ["category_id"]=>
                  int(24)
                  ["parent_id"]=>
                  int(15)
                  ["name"]=>
                  string(16) "Blue widgets"
                  ["is_active"]=>
                  int(1)
                  ["position"]=>
                  int(68)
                  ["level"]=>
                  int(3)
                  ["children"]=>
                  array(0) {
                  }
                }

<snip....> 
```

我正在尝试获得这样的 php 数据结构

```
categories = array( "Root" =>
                  array("Root MySite.com" =>
                    array( "Widgets" =>
                         // final element is NOT an array
                         array ("Blue Widgets", "Purple Widgets" ...) 
                    )
                  )
              ) 
```

我似乎无法使用我的递归算法获得我正在寻找的数据结构。任何帮助都会很棒。

最终我需要在前端再次解析并显示它，但另一天的另一个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:37:56.767

查看这个[phpFiddle](http://phpfiddle.org/main/code/ab9-wni)以获得完整的工作示例。我发现的唯一错误是`$this->getCategoryTree`给了我一个**Fatal Error** `Using $this when not in object context`。那么您确定该功能在正确的范围内吗？

**更新**

我希望这个有效。:)

```
function traverse($root, $return = array()) {
    $return[$root->name] = array();
    foreach ($root->children as $child) {
        if (count($child->children) > 0) {
            traverse($child, &$return[$root->name]);
        }else {
            array_push(&$return[$root->name], $child->name);
        }
    }
    return $return;
} 
```

输出是：

```
Array ( [Root] => 
    Array ( 
        [Root MySite.com] => 
            Array ( 
                [Widgets] => Array ( [0] => Blue Widget [1] => Purple Widget) 
                [Gizmos] => Array ( [0] => Blue Gizmos [1] => Purple Gizmos) 
            ) 
        [FooBar.com] => 
            Array ( 
                [Widgets] => Array ( [0] => Blue Widget [1] => Purple Widget) 
                [Gizmos] => Array ( [0] => Blue Gizmos [1] => Purple Gizmos) 
            ) 
    ) 
) 
```

再次，[完整的工作示例](http://phpfiddle.org/main/code/ab9-wni)

# algorithm - 交换 LinkedList 的相邻节点

> ID：14264332
> 
> 赞同：5
> 
> 时间：2013-01-10T18:02:04.487
> 
> 标签：algorithm, data-structures

我必须在链表中交换两个相邻节点（不是它们的数据）。例如 1) 输入 a->b->c->d->e->f，输出：b->a->d->c->f->e 2) 输入 a->b->c- >d->e，输出：b->a->d->c->e

我写了下面的代码有没有更有效的方法（可能有两个临时指针）或简单的逻辑？

```
node* swap(node* head) {
   node *first = head;
   node *second,*third,*result;

   if(head == NULL || head->next == NULL) {
        return head;
   }

    result = second = first->next;
    third = second->next;

    while(second != NULL) {
       second->next=first;
       first->next=(third->next==NULL ? third : third->next);
       first=third;
       second=(third->next==NULL ? third : third->next);
       third=(second==NULL ? second : second->next);
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:47:37.173

看起来挺好的。我添加了一个正确性检查（第三个==NULL）并删除了一个冗余表达式。您只需要浏览整个列表一次，这是您必须做的。所以我认为我们可以确定这是最快的方法。

```
node* swap(node* head) {
   node *first = head;
   node *second,*third,*result;

   if(head == NULL || head->next == NULL) {
        return head;
   }

    result = second = first->next;
    third = second->next;

    while(second != NULL) {
       second->next=first;
       second = first->next=((third==NULL || third->next==NULL) ? third : third->next);
       first=third;
       third=(second==NULL ? second : second->next);
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T03:51:11.990

您可以通过递归相当简单地做到这一点：

```
// Swaps node b and c.
void swapTwo(node* a, node* b, node* c) {
   if (a != NULL)
       a->next = c;
   b->next = c->next;
   c->next = b;
}

void swapEveryTwo(node* prev, node* node) {
    if (node != null && node->next != null) {
        swapTwo(prev, node, node->next);
        swapEveryTwo(node->next, node->next->next);
    }
} 
```

每次调用`swapEveryTwo`交换节点对，然后为下一对节点设置递归。此外，由于这个函数是尾递归的，编译器无疑会将其优化为`while`循环，确保不会分配额外的堆栈帧，因此是最优的。如果您需要进一步的解释，请随时询问。

编辑以添加`swap`原始帖子中的功能：

```
node* swap(node *head) {
    if (head != NULL && head->next != NULL) {
        node *newHead = head->next;
        swapEveryTwo(NULL, head);
        return newHead;
    } else {
        return head;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T03:00:14.270

你的算法是最好的。通常我们可以通过简单来获得一点速度。与其画图和推理指针，不如考虑从输入列表的头部弹出元素并使用队列添加到尾操作来构建结果。在伪代码中，我们有

```
set_empty(rtn);
while (head) {
   fst = pop(head);
   if (head) {
     snd = pop(head);
     add_at_tail(rtn, snd);
   }
   add_at_tail(rtn, fst);
} 
```

`if`仅需要防止输入列表具有奇数长度的情况。如果我们确定列表长度相等，我们可以跳过它。

现在 pop 很容易实现。如果我们使用虚拟头节点，则添加尾操作是最简单的。所以在 C 中，我们有：

```
node *swap(node *head)
{
  node dummy[1];         // set_empty(rtn);
  node *rtn = dummy;
  while (head) {
    node *fst = head;    // fst = pop(head);
    head = head->next;
    if (head) {
      node *snd = head;  // snd = pop(head);
      head = head->next;
      rtn->next = snd;   // add_to_tail(rtn, snd);
      rtn = rtn->next;
    }
    rtn->next = fst;     // add_to_tail(rtn, fst);
    rtn = rtn->next;
  }
  rtn->next = NULL;      // terminate tail
  return dummy->next;
} 
```

现在我还没有测试过这段代码，但我很确定它会以一个或两个错字为模运行良好。测试比你的少（每个元素只有一个）。测试相对昂贵，因为它们会干扰流水线，所以我的运行速度应该快一点。几乎可以肯定，这种差异是无关紧要的。

但是，我认为我的代码更容易理解。当然，这只是一种有偏见的观点，但在维护过程中，可读性确实很重要。

**注意** 现在我做了一个快速测试，第一次尝试就成功了！另一方面，当我尝试您的代码时，我得到了一个 segv

```
 first->next=(third->next==NULL ? third : third->next); 
```

下面是测试框架。你看有什么不对吗？

```
typedef struct node_s {
  struct node_s *next;
  int val;
} node;

// swap goes here

int main(void)
{
  node dummy[1];
  node *p = dummy;

  for (int i = 0; i < 16; i++) {
    p->next = malloc(sizeof(node));
    p = p->next;
    p->next = NULL;
    p->val = 'a' + i;
  }
  p = swap(dummy->next);
  while (p) {
    printf("%c ", p->val);
    p = p->next;
  }
  printf("\n");
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-10T19:34:22.667

在 JavaScript 中

```
LinkedList.prototype.swapPairs = function() {
    var recurse = function(current) {
        if (!current) return this;
        if (current.next) {
            var save = current.next.value;
            current.next.value = current.value;
            current.value = save;
            current = current.next;
        }
        return recurse(current.next);
    }.bind(this);
    return recurse(this.head);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-22T23:29:31.323

Alex DiCarlo 的递归方法比较简单，但需要稍微修正一下。

```
void swapEveryTwo(node* prev, node* node) {
    if (node != null && node->next != null) {
        swapTwo(prev, node, node->next);
        swapEveryTwo(node, node->next);
    }
} 
```

如果我错了，请纠正我。

谢谢！

# java - Java中jar文件和库的区别

> ID：14264337
> 
> 赞同：18
> 
> 时间：2013-01-10T18:02:21.963
> 
> 标签：java, jar

`NetBeans`允许程序员添加一个`library`和一个`jar`文件。

jar 文件和库有什么区别？库是否类似于`GAC assembly`.`Windows`

有类似的问题，但它们太具体了，我无法理解其中的区别。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-10T18:03:57.067

说得非常简单：图书馆是罐子的集合

您可以创建一个包含所有 Java EE 相关 jar 文件的全局库 java-ee。然后你可以在你的不同项目中使用这个全局库。管理它们会更简单；并添加新项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T18:07:23.120

JAR 提供与 C#/.net 世界中的程序集相同的功能。它是 Java 类、清单和可选的其他资源（例如属性文件）的集合。

库是一个比较抽象的概念，在java中，库通常被打包成一个JAR（Java ARchive），或者JAR的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:06:17.783

如果很好理解：库只是对类进行分组的文件夹。例如在 JDK 中，一个库中存在一组存储在一起的类。

如果没记错的话，.jar 文件是一组 .class 格式的编译类，由 Java 创建者创建，因此程序将独立于操作系统；这意味着在 JVM 中，您将在 Linux、Windows 等平台上以 .jar 格式运行您的应用程序，而无需为各种操作系统重新编码游览应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T18:10:42.073

jar 文件是 zip 存档，其中包含 java 类文件等文件。Netbeans 库包含项目所需的资源，包括 jar 文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T18:33:44.473

这篇[文章](http://www.javaworld.com/javaworld/jw-09-2002/jw-0906-java101.html?page=1)解释了一切。。

它指出

> Java 的库通常称为类库。但是，Java 将类库称为包。

# javascript - 函数 result.charAt 不存在

> ID：14264352
> 
> 赞同：0
> 
> 时间：2013-01-10T18:03:00.627
> 
> 标签：javascript, asp.net

我是 javascript 的新手，我真的不明白我遇到的错误。

我正在开发一个 MVC3 网站，该网站必须监控嵌入式系统。

这是正在运行的 javascript 代码：

```
function GetTemp() {
    var test = "gTe";
    $.ajax({
        url: '@Url.Action("../Carte/Get")',
        type: 'GET',
        data: {test: test},
        success: function (result) {
            if (result.charAt(4) == 'a') {
                $("#LumAct").text(result.substr(0, 4) + " %");
                alert('a');
            }
    ... 
```

这是返回字符串的 c# 操作

```
 public String Get(String test)
    {
        flag = TCPClient.SendData(test);
        if (flag == "1")
        {
            try
            {
                value = TCPClient.ReceiveData();
            }
            catch
            {
                value = "Erreur";
            }
        }
        else value = "Erreur";

        return value;
    } 
```

我遇到的错误是在萤火虫中，它告诉我：

```
TypeError: result.charAt is not a function
        [Stopper sur une erreur]    
if (result.charAt(4) == 'a') { 
```

那么，我有什么不明白的？据我说，我正在使用一个将 httpGet 发送到控制器的 ajx 函数，控制器以字符串响应。在 javascript 中，我可以像以前一样处理字符串。

要使用字符串对象，我没有添加任何库。我应该这样做吗？我还没有找到任何信息说明这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:06:26.767

你可以试试这个：

```
if (String(result).charAt(4) == 'a') 
```

此外，正如@Musa 所述，您应该`dataType`向 AJAX 调用添加一个属性：

```
$.ajax({
    url: '@Url.Action("../Carte/Get")',
    type: 'GET',
    dataType: 'text',
    data: {test: test},
    success: function (result) {
        if (result.charAt(4) == 'a') {
            $("#LumAct").text(result.substr(0, 4) + " %");
            alert('a');
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:09:50.767

If you check the [jQuery.ajax api page](http://api.jquery.com/jQuery.ajax/) you'll see that the first argument is an Object formatted to the `dataType` parameter. Honestly I'd `console.log` the result and see what it looks like. If you can't `charAt()` then the result is probably is not a string.

# sql-server - SQL Server 中的家谱树

> ID：14264360
> 
> 赞同：3
> 
> 时间：2013-01-10T18:03:21.567
> 
> 标签：sql-server, tsql, recursion, recursive-query

在我的表中，每条记录都有一个指向他的直接父级的指针，我需要知道如何查询给定记录的所有后代，无论是直系还是非直系（儿子的儿子）。

事实：

*   我不知道树有多深，我需要所有的叶子
*   某些记录可能没有子记录
*   我在 SqlServer 2012 下运行

谁能告诉我如何编写这样的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T16:14:57.367

基于 Josh Wallace 的查询，获取后代。

```
declare @people table
(
    Id int,
    Name nvarchar(50),
    ParentId int
)

insert into @people values (1, 'Frank', null)
insert into @people values (2, 'Shane', null)
insert into @people values (3, 'George', 1)
insert into @people values (5, 'Hank', 1)
insert into @people values (7, 'Abigail', 3)
insert into @people values (8, 'Ben', 3)
insert into @people values (9, 'Charlie', 5)
insert into @people values (10, 'Dave', 5)
insert into @people values (11, 'Homer', 5)
insert into @people values (12, 'Junebug', 7)
insert into @people values (13, 'Bart', 11)
insert into @people values (14, 'Lisa', 11)

;with descendents AS (
    -- Anchor member definition
    select p.Id, p.Name, p.ParentId, Level = 0 
    from @people p 
    where p.Id = 1 -- person to search for descendents 

    union all

    -- Recursive member definition
    select p.Id, p.Name, p.ParentId, Level + 1
    from @people p 
    inner join descendents a on p.ParentId = a.Id
)

select 
    a.Level, ParentID = p.Id, Parent = p.Name, a.Id, Child = a.Name
from descendents a 
    left join @people p on p.Id = a.ParentId
order by a.Level 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:30:59.113

对我来说，使用 CTE 进行递归似乎是最简单的方法，这里有一个例子......

```
DECLARE @people TABLE
(
    Id INT,
    Name NVARCHAR(50),
    ParentId INT
)

INSERT INTO @people (Id, Name, ParentId) VALUES (1, 'Abigail', null)
INSERT INTO @people (Id, Name, ParentId) VALUES (2, 'Ben', 5)
INSERT INTO @people (Id, Name, ParentId) VALUES (3, 'Charlie', 2)
INSERT INTO @people (Id, Name, ParentId) VALUES (4, 'Dave', 1)
INSERT INTO @people (Id, Name, ParentId) VALUES (5, 'Ed', 6)
INSERT INTO @people (Id, Name, ParentId) VALUES (6, 'Frank', null)

;WITH ancestors AS (
 SELECT Id, Name, ParentId FROM @people WHERE Id = 3 
 UNION ALL
 SELECT p.Id, p.Name, p.parentId FROM @people p
 INNER JOIN ancestors a ON a.parentId = p.Id --This inner join causes the recurrsion
)
SELECT Id, Name, ParentId FROM ancestors 
```

要从孩子到祖先，将 ON 语句切换为另一种方式：

```
DECLARE @people TABLE
(
    Id INT,
    Name NVARCHAR(50),
    ParentId INT
)

INSERT INTO @people (Id, Name, ParentId) VALUES (1, 'Abigail', null)
INSERT INTO @people (Id, Name, ParentId) VALUES (2, 'Ben', 5)
INSERT INTO @people (Id, Name, ParentId) VALUES (3, 'Charlie', 2)
INSERT INTO @people (Id, Name, ParentId) VALUES (4, 'Dave', 1)
INSERT INTO @people (Id, Name, ParentId) VALUES (5, 'Ed', 6)
INSERT INTO @people (Id, Name, ParentId) VALUES (6, 'Frank', null)

;WITH ancestors AS (
 SELECT Id, Name, ParentId FROM @people WHERE Id = 6
 UNION ALL
 SELECT p.Id, p.Name, p.parentId FROM @people p
 --INNER JOIN ancestors a ON a.parentId = p.Id --It was this to go down...
   INNER JOIN ancestors a ON a.Id = p.parentId --Now use this to go up the tree
)
SELECT Id, Name, ParentId FROM ancestors 
```

# java - 将 JBoss Maven 存储库中的所有工件添加到 Eclipse 中的 Maven 项目

> ID：14264362
> 
> 赞同：6
> 
> 时间：2013-01-10T18:03:26.910
> 
> 标签：java, eclipse, maven, jboss

我正在使用***JBoss EAP 6.0.1***（不是 JBoss AS 7.1.1 或 7.1.3！）而且我刚刚开始使用 Maven 项目。

在普通的 Eclipse 项目中，我将项目的目标运行时设置为 JBoss EAP 服务器运行时，然后它的所有库都可用于我的项目。此处可用意味着我可以使用例如 ctrl-t 在任何这些库中查找类，并且当我附加源代码时，我可以在调试时进入它们。

我将如何使用 Maven (m2e) 做到这一点？

我在[http://maven.repository.redhat.com/techpreview/eap6/6.0.1/找到了 JBoss EAP 6.0.1 的 Maven 存储库](http://maven.repository.redhat.com/techpreview/eap6/6.0.1/)

我是否需要在我的项目中添加一些根依赖项（代表 JBoss EAP 本身），如果需要，这个依赖项是什么？

我在这里发现了一个非常相似的问题：[Adding JBoss AS 7 modules on Eclipse using Maven or JBoss Tools](https://stackoverflow.com/questions/10498032/adding-jboss-as-7-modules-on-eclipse-using-maven-or-jboss-tools)

但接受的答案只说：“看看这些链接”，它并没有告诉我如何准确地做到这一点（它适用于 AS 7.1.1 而不是***EAP 6.0.1***）。

**更新**

我对这个问题并不完全清楚。**我不是在寻找对 Java EE API 的简单引用。我知道该怎么做**，因为它很简单：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>1.6</version>
    <scope>provided</scope>
</dependency> 
```

我也不是在寻找该规范 jar 的任何供应商版本**。**我绝对**不是**在寻找以下一个：

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <version>1.0.0.Final</version>
    <type>pom</type>
</dependency> 
```

我正在寻找的是项目中所有可用的**实现库。**JBoss AS 6 服务器运行时默认执行此操作，使用 JBoss AS 7/EAP 6 服务器运行时您可以通过转到服务器 -> 运行时环境 -> 默认类路径来执行此操作*（您可以在此处输入单独的路径，或者只需添加/modules rootpath 将所有内容合二为一）*

我正在 Maven 项目中寻找与此等效的东西。

# 我不是在寻找 SPEC 罐子！！！！

由于我需要单步执行目标服务器的***ACTUAL IMPLEMENTATION*** jar，因此我真的需要 ACTUAL IMPLEMENTATION jar。我***知道***我无法部署这些，也不打算部署它们。它们需要存在于我的 IDE 中，因此有与目标 JVM 中的内容相匹配的源代码，我可以使用 CTRL-SHIFT-T 查找***IMPLEMENTATION***类并使用 CTRL-CLICK 导航到它们、分析调用层次结构等。

# 再次：我不是在寻找 SPEC 罐子！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T17:57:40.053

您可以手动将依赖项导入到您的存储库中。我在我们的（人工制品）中做了它，它正在工作。

请参阅：[https ://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Install_the_JBoss_Enterprise_Application_Platform_6_Maven_Repository_Locally.html](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Install_the_JBoss_Enterprise_Application_Platform_6_Maven_Repository_Locally.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T17:26:16.170

我自己发现了一个非常简单的解决方案：即使库是通过 Maven 管理的，并且默认情况下禁用了目标运行时，您仍然可以显式选择目标运行时。

这个目标运行时放在类路径中的库现在也将放在 Maven 项目的类路径中，除了那些 Maven 已经放在那里的库。您可以（手动）将源代码附加到这些库。

一旦你完成了调试并单步调试你的 AS 内部，你可以简单地再次删除目标运行时。

一个纯粹通过 Maven 和 JBoss EAP 6.0.1（不是 JBoss AS 7.1.1 或 7.1.3）的答案仍然受到欢迎，所以我不会接受我自己的答案；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:58:54.843

JBoss Maven 存储库有一个很好的解释：[https ://community.jboss.org/wiki/MavenRepository](https://community.jboss.org/wiki/MavenRepository)

我猜您需要使用的存储库是：[https](https://repository.jboss.org/nexus/content/groups/public-jboss/) ://repository.jboss.org/nexus/content/groups/public-jboss/ 它应该包含您正在寻找的所有 JBoss 工件。

也许 groupId/artifactId 不正确。存储库的搜索功能位于：[https ://repository.jboss.org/nexus/index.html#welcome](https://repository.jboss.org/nexus/index.html#welcome)

我建议不要包含 impl jar，因为无论如何您都无法部署它们。所以规范罐子应该没问题：

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <version>1.0.0.Final</version>
    <type>pom</type>
</dependency> 
```

见：[http ://www.andygibson.net/blog/quickbyte/jboss-java-ee-6-spec-dependency-in-maven/](http://www.andygibson.net/blog/quickbyte/jboss-java-ee-6-spec-dependency-in-maven/)

JBoss 服务器的 gav 似乎发生了很大变化。JBoss 7 位于：

```
<dependency>
  <groupId>org.jboss.as</groupId>
  <artifactId>jboss-as-ee</artifactId>
  <version>7.1.3.Final</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T04:37:45.037

看看这里：

[JBoss 企业应用平台组件详情](https://access.redhat.com/site/articles/112673)

在我的 pom.xml 中，我使用它从 Jboss EAP 6.0.1 获取依赖项

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <type>pom</type>                
    <scope>provided</scope>
    <version>3.0.2.Final</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-03T21:31:37.597

如果我没记错的话，您可以使用 Nexus 或 Git 或 Overlord 来管理项目工件以创建代理虚拟依赖项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-20T14:28:28.750

可以使用运行时工件：

```
<!-- https://mvnrepository.com/artifact/org.jboss.bom/eap-runtime-artifacts -->
<dependency>
    <groupId>org.jboss.bom</groupId>
    <artifactId>eap-runtime-artifacts</artifactId>
    <version>7.1.0.GA</version>
    <type>pom</type>
    <scope>import</scope>
</dependency> 
```

请参阅[https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html/development_guide/using_maven_with_eap#manage_project_dependencies](https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html/development_guide/using_maven_with_eap#manage_project_dependencies)

# javascript - 无法让 /api/login/ 工作 - JavaScript / Reddit

> ID：14264367
> 
> 赞同：0
> 
> 时间：2013-01-10T18:03:43.993
> 
> 标签：javascript, ajax, xmlhttprequest, winjs, reddit

我的尝试已经用完了......刚刚得到这个“你做的太多了。27分钟后再试一次。” 所以我想我会来这里问。

* * *

这是我发送的请求

**网址：**

```
http://www.reddit.com/api/login/ 
```

**标题：**

```
User-Agent: "Reddit test app" 
```

**发布数据：**

```
user=USERNAME&passwd=PASSWORD&api_type=json 
```

* * *

将参数放在 URL 中......奇怪的是！我想避免这种情况，因为在 URL 中传递密码可能不安全。

例如`http://www.reddit.com/api/login/?user=USERNAME&passwd=PASSWORD&api_type=json`

* * *

另一个问题......我如何访问`/api/v1/me/`？

尝试将 modhash 作为 GET/POST 参数传递，也尝试将“uh”作为标头传递。它们都不起作用。

* * *

任何想法我做错了什么？谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:47:23.513

首先，您可以使用[https://ssl.reddit.com](https://ssl.reddit.com)进行登录。这使得不必担心将参数作为 URL 的一部分传递。

其次，/api/v1/me/ 只能用于具有“身份”范围的 OAuth2 访问。无法从已登录的会话中访问它。

至于为什么您的 POST 请求不起作用，您可能错误地编码了 POST 数据。尝试将您的数据发布到[http://httpbin.org/post](http://httpbin.org/post)并查看您是否获得了预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T14:43:01.913

我知道这是一个老问题，但只是想添加一个答案，以防万一有人在这里提到。我认为问题在于没有在标题中使用“内容类型”，因此帖子数据得到了正确处理。我犯了同样的错误并调用了“.setRequestHeader("Content-type","application/x-www-form-urlencoded");" 修复。我认为每个人都在使用必须在内部执行此操作的 jQuery 等框架。

# java - 带鼠标+键盘的 VBO Java LWJGL

> ID：14264369
> 
> 赞同：1
> 
> 时间：2013-01-10T18:03:45.867
> 
> 标签：java, lwjgl, vbo

我遇到了 VBO 和键盘+鼠标输入的问题。

例如，如果我移动鼠标，立方体不会停止旋转，甚至会更快，与我在 3 台计算机上测试它的键盘相同 这是我的代码：Game.class package tk.mattze96.game;

```
import java.nio.FloatBuffer;
import java.nio.IntBuffer;
import java.util.Date;
import org.lwjgl.BufferUtils;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.opengl.GL15;
import org.lwjgl.util.glu.GLU;

public class Game {

String version = "0.0.1";
Player player;
boolean[] keys = new boolean[256];

public Game(){
    player = new Player(this);
}

  public void start() {
// create our display window
try {
  Display.setTitle("Game "+version);
  Display.setDisplayMode(new DisplayMode(600,600));
  Display.create();
} catch (Exception e) {
  System.err.println(e.toString());

  System.exit(1);
}

// set up OpenGL
GL11.glClearColor(173/255f, 216/255f, 230/255f, 0.0f);//173,216,230

GL11.glShadeModel(GL11.GL_SMOOTH);

GL11.glEnable(GL11.GL_COLOR_MATERIAL);
GL11.glEnable(GL11.GL_DEPTH_TEST);

GL11.glEnableClientState(GL11.GL_VERTEX_ARRAY);
GL11.glEnableClientState(GL11.GL_NORMAL_ARRAY);
GL11.glEnableClientState(GL11.GL_COLOR_ARRAY);

// set up lighting
GL11.glEnable(GL11.GL_LIGHTING);
GL11.glEnable(GL11.GL_LIGHT0);

GL11.glMaterial(GL11.GL_FRONT, GL11.GL_SPECULAR, floatBuffer(1.0f, 1.0f, 1.0f, 1.0f));
GL11.glMaterialf(GL11.GL_FRONT, GL11.GL_SHININESS, 25.0f);

GL11.glLight(GL11.GL_LIGHT0, GL11.GL_POSITION, floatBuffer(-5.0f, 5.0f, 15.0f, 0.0f));

GL11.glLight(GL11.GL_LIGHT0, GL11.GL_SPECULAR, floatBuffer(1.0f, 1.0f, 1.0f, 1.0f));
GL11.glLight(GL11.GL_LIGHT0, GL11.GL_DIFFUSE, floatBuffer(1.0f, 1.0f, 1.0f, 1.0f));

GL11.glLightModel(GL11.GL_LIGHT_MODEL_AMBIENT, floatBuffer(0.1f, 0.1f, 0.1f, 1.0f));

// set up the camera
GL11.glMatrixMode(GL11.GL_PROJECTION);
GL11.glLoadIdentity();
GLU.gluPerspective(45.0f, Display.getHeight()/Display.getWidth(), 0.1f, 1000.0f);

GL11.glMatrixMode(GL11.GL_MODELVIEW);
GL11.glLoadIdentity();

GLU.gluLookAt(0.0f, 0.0f, 10.0f,
              0.0f, 0.0f, 0.0f,
              0.0f, 1.0f, 0.0f );

// create our vertex buffer objects
IntBuffer buffer = BufferUtils.createIntBuffer(1);
GL15.glGenBuffers(buffer);

int vertex_buffer_id = buffer.get(0);

float[] vertex_data_array = {
//   x      y      z      nx     ny     nz     r      g      b      a
// back quad
     1.0f,  1.0f,  1.0f,  0.0f,  0.0f,  1.0f,  1.0f,  0.0f,  0.0f,  1.0f,
    -1.0f,  1.0f,  1.0f,  0.0f,  0.0f,  1.0f,  1.0f,  0.0f,  0.0f,  1.0f,
    -1.0f, -1.0f,  1.0f,  0.0f,  0.0f,  1.0f,  1.0f,  0.0f,  0.0f,  1.0f,
     1.0f, -1.0f,  1.0f,  0.0f,  0.0f,  1.0f,  1.0f,  0.0f,  0.0f,  1.0f,

// front quad
     1.0f,  1.0f, -1.0f,  0.0f,  0.0f, -1.0f,  0.0f,  1.0f,  0.0f,  1.0f,
    -1.0f,  1.0f, -1.0f,  0.0f,  0.0f, -1.0f,  0.0f,  1.0f,  0.0f,  1.0f,
    -1.0f, -1.0f, -1.0f,  0.0f,  0.0f, -1.0f,  0.0f,  1.0f,  0.0f,  1.0f,
     1.0f, -1.0f, -1.0f,  0.0f,  0.0f, -1.0f,  0.0f,  1.0f,  0.0f,  1.0f,

// left quad
    -1.0f,  1.0f, -1.0f, -1.0f,  0.0f,  0.0f,  0.0f,  0.0f,  1.0f,  1.0f,
    -1.0f,  1.0f,  1.0f, -1.0f,  0.0f,  0.0f,  0.0f,  0.0f,  1.0f,  1.0f,
    -1.0f, -1.0f,  1.0f, -1.0f,  0.0f,  0.0f,  0.0f,  0.0f,  1.0f,  1.0f,
    -1.0f, -1.0f, -1.0f, -1.0f,  0.0f,  0.0f,  0.0f,  0.0f,  1.0f,  1.0f,

// right quad
     1.0f,  1.0f, -1.0f,  1.0f,  0.0f,  0.0f,  1.0f,  0.0f,  1.0f,  1.0f,
     1.0f,  1.0f,  1.0f,  1.0f,  0.0f,  0.0f,  1.0f,  0.0f,  1.0f,  1.0f,
     1.0f, -1.0f,  1.0f,  1.0f,  0.0f,  0.0f,  1.0f,  0.0f,  1.0f,  1.0f,
     1.0f, -1.0f, -1.0f,  1.0f,  0.0f,  0.0f,  1.0f,  0.0f,  1.0f,  1.0f,

// top quad
    -1.0f,  1.0f, -1.0f,  0.0f,  1.0f,  0.0f,  1.0f,  1.0f,  0.0f,  1.0f,
    -1.0f,  1.0f,  1.0f,  0.0f,  1.0f,  0.0f,  1.0f,  1.0f,  0.0f,  1.0f,
     1.0f,  1.0f,  1.0f,  0.0f,  1.0f,  0.0f,  1.0f,  1.0f,  0.0f,  1.0f,
     1.0f,  1.0f, -1.0f,  0.0f,  1.0f,  0.0f,  1.0f,  1.0f,  0.0f,  1.0f,

// bottom quad
    -1.0f, -1.0f, -1.0f,  0.0f, -1.0f,  0.0f,  0.0f,  1.0f,  1.0f,  1.0f,
    -1.0f, -1.0f,  1.0f,  0.0f, -1.0f,  0.0f,  0.0f,  1.0f,  1.0f,  1.0f,
     1.0f, -1.0f,  1.0f,  0.0f, -1.0f,  0.0f,  0.0f,  1.0f,  1.0f,  1.0f,
     1.0f, -1.0f, -1.0f,  0.0f, -1.0f,  0.0f,  0.0f,  1.0f,  1.0f,  1.0f
};

FloatBuffer vertex_buffer_data = BufferUtils.createFloatBuffer(vertex_data_array.length);
vertex_buffer_data.put(vertex_data_array);
vertex_buffer_data.rewind();

GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vertex_buffer_id);
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, vertex_buffer_data, GL15.GL_STATIC_DRAW);

// set up frame rate counter stuff
int framerate_count = 0;
long framerate_timestamp = new Date().getTime();
double rotate_x, rotate_y, rotate_z;

while (!Display.isCloseRequested()) {
    mapKeys();
    player.update();

  // increment frame rate counter, and display current frame rate
  // if it is time to do so
  framerate_count++;

  Date d = new Date();
  long this_framerate_timestamp = d.getTime();

  if ((this_framerate_timestamp - framerate_timestamp) >= 1000) {
    System.err.println("Frame Rate: " + framerate_count);

    framerate_count = 0;
    framerate_timestamp = this_framerate_timestamp;
  }

  // clear the display
  GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);

  // perform rotation transformations
  GL11.glPushMatrix();

  rotate_x = ((double)this_framerate_timestamp / 30.0) % 360.0;
  rotate_y = ((double)this_framerate_timestamp / 20.0) % 360.0;
  rotate_z = ((double)this_framerate_timestamp / 10.0) % 360.0;

  /*GL11.glRotated(
    rotate_x,
    1.0,
    0.0,
    0.0
  );

  GL11.glRotated(
    rotate_y,
    0.0,
    1.0,
    0.0
  );

  GL11.glRotated(
    rotate_z,
    0.0,
    0.0,
    1.0
  );*/

  // render the cube
  GL11.glVertexPointer(3, GL11.GL_FLOAT, 40, 0);
  GL11.glNormalPointer(GL11.GL_FLOAT, 40, 12);
  GL11.glColorPointer(4, GL11.GL_FLOAT, 40, 24);

  GL11.glDrawArrays(GL11.GL_QUADS, 0, vertex_data_array.length / 10);

  // restore the matrix to pre-transformation values
  GL11.glPopMatrix();

  // update the display
  Display.sync(60);
  Display.update();
}

// clean things up/255
Display.destroy();
  }

  private void mapKeys(){
    //Update keys
    for(int i=0;i<keys.length;i++){
        keys[i] = Keyboard.isKeyDown(i);
    }
}

  public FloatBuffer floatBuffer(float a, float b, float c, float d) {
float[] data = new float[]{a,b,c,d};
FloatBuffer fb = BufferUtils.createFloatBuffer(data.length);
fb.put(data);
fb.flip();
return fb;
  }

  public static void main(String[] args) {
Game game = new Game();
game.start();
  }
} 
```

播放器类：

```
package tk.mattze96.game;

import org.lwjgl.input.Keyboard;
import org.lwjgl.input.Mouse;
import org.lwjgl.opengl.GL11;
import org.lwjgl.util.glu.GLU;
import org.lwjgl.util.vector.Vector3f;

public class Player {

Vector3f vector = new Vector3f();
Vector3f rotation = new Vector3f();
Vector3f vectorPrevious = new Vector3f();
boolean moveForward = false, moveBackward = false;
boolean strafeLeft = false, strafeRight = false;
static final float speed = 0.003f;
Game game;

public Player(Game game) {
    this.game = game;
    Mouse.setGrabbed(true);
}

public void update(){

    updatePrevious();
    input();
    updateVector();
    translatePostion();

}

public void translatePostion(){
    //This is the code that changes 3D perspective to the camera's perspective.
    GL11.glRotatef(rotation.x, 1, 0, 0);
    GL11.glRotatef(rotation.y, 0, 1, 0);
    GL11.glRotatef(rotation.z, 0, 0, 1);
    //-vector.y-2.4f means that your y is your feet, and y+2.4 is your head.
    GL11.glTranslatef(-vector.x, -vector.y, -vector.z);
}

public void updateVector(){
    if(moveForward){
        vector.x -= (float) (Math.sin(-rotation.y * Math.PI / 180) * speed);
        vector.z -= (float) (Math.cos(-rotation.y * Math.PI / 180) * speed);
    }
    if(moveBackward){
        vector.x += (float) (Math.sin(-rotation.y * Math.PI / 180) * speed);
        vector.z += (float) (Math.cos(-rotation.y * Math.PI / 180) * speed);
    }
    if(strafeLeft){
        vector.x += (float) (Math.sin((-rotation.y - 90) * Math.PI / 180) * speed);
        vector.z += (float) (Math.cos((-rotation.y - 90) * Math.PI / 180) * speed);
    }
    if(strafeRight){
        vector.x += (float) (Math.sin((-rotation.y + 90) * Math.PI / 180) * speed);
        vector.z += (float) (Math.cos((-rotation.y + 90) * Math.PI / 180) * speed);
    }
}

public void updatePrevious(){
    //Update last position (for collisions (later))
    vectorPrevious.x = vector.x;
    vectorPrevious.y = vector.y;
    vectorPrevious.z = vector.z;
}

public void input(){
    //Keyboard Input for Movement
    moveForward = game.keys[Keyboard.KEY_W];
    moveBackward = game.keys[Keyboard.KEY_S];
    strafeLeft = game.keys[Keyboard.KEY_A];
    strafeRight = game.keys[Keyboard.KEY_D];

    //Mouse Input for looking around...
    if(Mouse.isGrabbed()){
        float mouseDX = Mouse.getDX() * 0.8f * 0.0016f;
        float mouseDY = Mouse.getDY() * 0.8f * 0.0016f;
        if (rotation.y + mouseDX >= 360) {
            rotation.y = rotation.y + mouseDX - 360;
        } else if (rotation.y + mouseDX < 0) {
            rotation.y = 360 - rotation.y + mouseDX;
        } else {
            rotation.y += mouseDX;
        }
        if (rotation.x - mouseDY >= -89 && rotation.x - mouseDY <= 89) {
            rotation.x += -mouseDY;
        } else if (rotation.x - mouseDY < -89) {
            rotation.x = -89;
        } else if (rotation.x - mouseDY > 89) {
            rotation.x = 89;
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:36:30.870

`Mouse.getDX()`并且`Mouse.getDY()`只对鼠标移动做出反应，不需要任何类似`if-else`声明的戳。例如：

```
if(Mouse.isGrabbed()){
    float mouseDX = Mouse.getDX() * 0.8f * 0.0016f;
    float mouseDY = Mouse.getDY() * 0.8f * 0.0016f;
    rotation.y = mouseDX; //rotates around Y-axis just fine
/*here you need to think about rotation around X and Z axis, because it makes sence 
that mouseDY can rotate your camera around both axises*/
    rotation.x = mouseDY; //something
} 
```

# c - 如何从 C 程序中获取 NIC 详细信息？

> ID：14264371
> 
> 赞同：8
> 
> 时间：2013-01-10T18:03:50.363
> 
> 标签：c, linux

我想获取连接到我的计算机的所有 NIC 的以下详细信息：

1) 接口名称（例如 eth0）

2) 接口号（如在[Windows](http://answers.yahoo.com/question/index?qid=20080517041705AAOmJPu)中）如果 Linux 中存在这样的东西

3）网卡带宽容量和模式（例如1Gb/s全双工）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T20:30:25.390

您可以使用[`getifaddrs()`/`freeifaddrs()`](http://man7.org/linux/man-pages/man3/getifaddrs.3.html)获取所有接口的链表，然后`ioctl(fd, SIOCGIFINDEX, struct ifreq *)`获取每个接口的索引。由于接口是连续的并且总是列出的（无论它们是否启动（活动）），我选择使用循环来枚举它们`ioctl(fd, SIOCGIFNAME, struct ifreq *)`。在所有情况下`fd`都是一个`AF_INET`套接字。

要获得接口的双工和速度，需要使用`ioctl(fd, SIOCETHTOOL, struct ifreq *)`with`ifr_data`指向`struct ethtool_cmd`的`cmd = ETHTOOL_GSET`。

如果 ioctl 失败，它们应该返回 -1，如果成功，则返回一个非负值（我相信为零）。

这是一个示例程序：

```
#include <unistd.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <netinet/ip.h>
#include <net/if.h>
#include <linux/ethtool.h>
#include <linux/sockios.h>
#include <string.h>
#include <errno.h>
#include <stdio.h>

struct interface {
    int     index;
    int     flags;      /* IFF_UP etc. */
    long    speed;      /* Mbps; -1 is unknown */
    int     duplex;     /* DUPLEX_FULL, DUPLEX_HALF, or unknown */
    char    name[IF_NAMESIZE + 1];
};

static int get_interface_common(const int fd, struct ifreq *const ifr, struct interface *const info)
{
    struct ethtool_cmd  cmd;
    int                 result;

    /* Interface flags. */
    if (ioctl(fd, SIOCGIFFLAGS, ifr) == -1)
        info->flags = 0;
    else
        info->flags = ifr->ifr_flags;

    ifr->ifr_data = (void *)&cmd;
    cmd.cmd = ETHTOOL_GSET; /* "Get settings" */
    if (ioctl(fd, SIOCETHTOOL, ifr) == -1) {
        /* Unknown */
        info->speed = -1L;
        info->duplex = DUPLEX_UNKNOWN;
    } else {
        info->speed = ethtool_cmd_speed(&cmd);
        info->duplex = cmd.duplex;
    }

    do {
        result = close(fd);
    } while (result == -1 && errno == EINTR);
    if (result == -1)
        return errno;

    return 0;
}

int get_interface_by_index(const int index, struct interface *const info)
{
    int             socketfd, result;
    struct ifreq    ifr;

    if (index < 1 || !info)
        return errno = EINVAL;

    socketfd = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);
    if (socketfd == -1)
        return errno;

    ifr.ifr_ifindex = index;
    if (ioctl(socketfd, SIOCGIFNAME, &ifr) == -1) {
        do {
            result = close(socketfd);
        } while (result == -1 && errno == EINTR);
        return errno = ENOENT;
    }

    info->index = index;
    strncpy(info->name, ifr.ifr_name, IF_NAMESIZE);
    info->name[IF_NAMESIZE] = '\0';

    return get_interface_common(socketfd, &ifr, info);
}

int get_interface_by_name(const char *const name, struct interface *const info)
{
    int             socketfd, result;
    struct ifreq    ifr;

    if (!name || !*name || !info)
        return errno = EINVAL;

    socketfd = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);
    if (socketfd == -1)
        return errno;

    strncpy(ifr.ifr_name, name, IF_NAMESIZE);
    if (ioctl(socketfd, SIOCGIFINDEX, &ifr) == -1) {
        do {
            result = close(socketfd);
        } while (result == -1 && errno == EINTR);
        return errno = ENOENT;
    }

    info->index = ifr.ifr_ifindex;
    strncpy(info->name, name, IF_NAMESIZE);
    info->name[IF_NAMESIZE] = '\0';

    return get_interface_common(socketfd, &ifr, info);
}

int main(int argc, char *argv[])
{
    struct interface    iface;
    int                 arg;
    int                 status = 0;

    if (argc > 1 && (!strcmp(argv[1], "-h") || !strcmp(argv[1], "--help"))) {
        fprintf(stderr, "\n");
        fprintf(stderr, "Usage: %s { -h | --help }\n", argv[0]);
        fprintf(stderr, "       %s\n", argv[0]);
        fprintf(stderr, "       %s INTERFACE ...\n", argv[0]);
        fprintf(stderr, "\n");
        return 1;
    }

    if (argc > 1) {
        for (arg = 1; arg < argc; arg++) {
            if (get_interface_by_name(argv[arg], &iface) != 0) {
                fprintf(stderr, "%s: No such interface.\n", argv[arg]);
                status = 1;
                continue;
            }

            printf("%s: Interface %d", iface.name, iface.index);
            if (iface.flags & IFF_UP)
                printf(", up");
            if (iface.duplex == DUPLEX_FULL)
                printf(", full duplex");
            else
            if (iface.duplex == DUPLEX_HALF)
                printf(", half duplex");
            if (iface.speed > 0)
                printf(", %ld Mbps", iface.speed);
            printf("\n");
        }

    } else {
        for (arg = 1; ; arg++) {
            if (get_interface_by_index(arg, &iface) != 0)
                break;

            printf("%s: Interface %d", iface.name, iface.index);
            if (iface.flags & IFF_UP)
                printf(", up");
            if (iface.duplex == DUPLEX_FULL)
                printf(", full duplex");
            else
            if (iface.duplex == DUPLEX_HALF)
                printf(", half duplex");
            if (iface.speed > 0)
                printf(", %ld Mbps", iface.speed);
            printf("\n");
        }
    }

    return status;
} 
```

如果将以上内容另存为`iflist.c`，则可以使用

```
gcc -W -Wall -O3 iflist.c -o iflist 
```

要查看使用情况，请运行`iflist -h`. 要列出所有接口，请不带参数运行它：

```
./iflist 
```

上面将使用我描述的枚举方法。要仅列出特定接口，请运行它命名接口：

```
./iflist eth0 lo 
```

当然，双工和速度仅针对以太网接口列出。

* * *

编辑添加：

如果上面的程序没有提供接口的带宽和模式，这里有一个简化的版本，它报告了确切的原因（错误）。这一个将接口名称作为命令行参数；它不枚举接口。

```
#include <unistd.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <netinet/ip.h>
#include <net/if.h>
#include <linux/ethtool.h>
#include <linux/sockios.h>
#include <string.h>
#include <errno.h>
#include <stdio.h>

int ethernet_interface(const char *const name,
                       int *const index, int *const speed, int *const duplex)
{
    struct ifreq        ifr;
    struct ethtool_cmd  cmd;
    int                 fd, result;

    if (!name || !*name) {
        fprintf(stderr, "Error: NULL interface name.\n");
        fflush(stderr);
        return errno = EINVAL;
    }

    if (index)  *index = -1;
    if (speed)  *speed = -1;
    if (duplex) *duplex = -1;

    fd = socket(AF_INET, SOCK_STREAM, 0);
    if (fd == -1) {
        const int err = errno;
        fprintf(stderr, "%s: Cannot create AF_INET socket: %s.\n", name, strerror(err));
        fflush(stderr);
        return errno = err;
    }

    strncpy(ifr.ifr_name, name, sizeof ifr.ifr_name);
    ifr.ifr_data = (void *)&cmd;
    cmd.cmd = ETHTOOL_GSET;
    if (ioctl(fd, SIOCETHTOOL, &ifr) < 0) {
        const int err = errno;
        do {
            result = close(fd);
        } while (result == -1 && errno == EINTR);
        fprintf(stderr, "%s: SIOCETHTOOL ioctl: %s.\n", name, strerror(err));
        return errno = err;
    }

    if (speed)
        *speed = ethtool_cmd_speed(&cmd);

    if (duplex)
        switch (cmd.duplex) {
        case DUPLEX_HALF: *duplex = 0; break;
        case DUPLEX_FULL: *duplex = 1; break;
        default:
            fprintf(stderr, "%s: Unknown mode (0x%x).\n", name, cmd.duplex);
            fflush(stderr);
            *duplex = -1;
        }

    if (index && ioctl(fd, SIOCGIFINDEX, &ifr) >= 0)
        *index = ifr.ifr_ifindex;

    do {
        result = close(fd);
    } while (result == -1 && errno == EINTR);
    if (result == -1) {
        const int err = errno;
        fprintf(stderr, "%s: Error closing socket: %s.\n", name, strerror(err));
        return errno = err;
    }

    return 0;
}

int main(int argc, char *argv[])
{
    int  arg, speed, index, duplex;

    if (argc < 2 || !strcmp(argv[1], "-h") || !strcmp(argv[1], "--help")) {
        fprintf(stderr, "\n");
        fprintf(stderr, "Usage: %s [ -h | --help ]\n", argv[0]);
        fprintf(stderr, "       %s INTERFACE ...\n", argv[0]);
        fprintf(stderr, "\n");
        return 0;
    }

    for (arg = 1; arg < argc; arg++) {
        if (ethernet_interface(argv[arg], &index, &speed, &duplex))
            return 1;

        if (index == -1)
            printf("%s: (no interface index)", argv[arg]);
        else
            printf("%s: interface %d", argv[arg], index);

        if (speed == -1)
            printf(", unknown bandwidth");
        else
            printf(", %d Mbps bandwidth", speed);

        if (duplex == 0)
            printf(", half duplex.\n");
        else if (duplex == 1)
            printf(", full duplex.\n");
        else
            printf(", unknown mode.\n");
    }

    return 0;
} 
```

问题？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T19:41:32.973

(1) [getifaddrs()](http://www.kernel.org/doc/man-pages/online/pages/man3/getifaddrs.3.html)

(2) [if_indextoname()](http://linux.die.net/man/3/if_indextoname) , [if_nameindex()](http://man7.org/linux/man-pages/man3/if_nameindex.3.html) , [if_nametoindex()](http://man7.org/linux/man-pages/man3/if_nametoindex.3.html)

(3) 我不确定这一点，但您可以通过[ioctl()](http://www.kernel.org/doc/man-pages/online/pages/man2/ioctl.2.html)和`SIOCGIF*`参数之一或 from获取它`/proc`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T19:55:24.130

以下链接`getifaddrs`通过一个工作示例很好地解释了该功能

[getifaddrs()](http://www.linuxhowtos.org/manpages/3/getifaddrs.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T18:12:46.177

```
ethtool eth1 
```

此命令将列出有关 eth1 的所有详细信息，包括速度、双工、端口...

您可以使用 popen() 获取输出并对其进行映射。

> POPEN(3) Linux 程序员手册
> POPEN(3)
> 
> NAME popen, pclose - 进出进程的管道流
> 
> 概要#包括
> 
> ```
>  FILE *popen(const char *command, const char *type); 
> ```

# vim - 病原体忽略 ftplugin 脚本

> ID：14264372
> 
> 赞同：2
> 
> 时间：2013-01-10T18:03:54.167
> 
> 标签：vim, pathogen, ftplugin

我正在尝试使用`Pathogen`来管理 Vim 插件。我有几个我用`.vim/ftplugins`.

我安装了 Pathogen，但现在 ftplugins 中的脚本都没有运行。

我尝试`.vim/bundle`在脚本中添加一个目录，但它不起作用（它是`.vim/bundle/local/ftplugin/python.vim`）

知道如何让 Pathogen 加载 ftplugin 目录中的脚本吗？

我的第一行[`.vimrc`](http://pastebin.com/JmP2V9rR)：

```
set nocompatible
syntax on
filetype plugin indent on
"execute pathogen#infect() 
```

仅适用于注释掉的那一行。

我`gvim`从 Bash 提示符运行，文件名作为第一个参数，如下所示：

```
$ gvim some/path/somefile.py 
```

我希望看到该文件具有我在 ~/.vim/ftplugin/python.vim 中定义的 Python 文件的预定义颜色方案以及该脚本中定义的所有其他设置。

~/.vim/bundle 目录是空的。

病原体在 ~/.vim/autoload 中，没有更多内容。

```
$ ls ~/.vim/ftplugin/
css.vim  html.vim  javascript.vim  python_pep8.vim  python_pyflakes.vim  python.vim  rst.vim  xml.vim

$ ls ~/.vim
autoload  bundle  colors  doc  ftdetect  ftplugin  plugins  ScrollColor.vim  spell  syntax 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:43:40.860

这是文件类型检测的问题，这是[病原体问题](https://github.com/tpope/vim-pathogen/issues/38)。

在我的情况下，解决方法很简单，使用它来启用 Pathogen：

```
set nocompatible
"execute pathogen#infect()    " breaks filetype detection
call pathogen#runtime_append_all_bundles()

filetype plugin indent on
syntax on 
```

我所做的是删除我的 ~/.vim 目录并从一个干净的目录开始。一件一件地添加东西并检查结果。我意识到它没有检测到正确的文件类型（当我打开一个空文件时检测是好的，但在打开现有文件时却不是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T20:47:06.563

在这里发表我的评论：

想知道如果你在 之后放置`:filetype`和`:syntax`调用它是否有效`:execute`？官方`README`建议在第二部分这样做：第一`:execute`，第二`:syntax`，第三`:filetype`。注意：不要在@Eduan 建议之前*禁用*`:execute`文件类型，只是在调用之前不要启用它`:execute`：

```
set nocompatible
execute pathogen#infect()
syntax on
filetype plugin indent on 
```

* * *

而且，顺便说一句，[永远不要使用`*map`](http://learnvimscriptthehardway.stevelosh.com/chapters/05.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:39:46.233

为了示例代码的清晰性，我想我可以看到您的问题，将其放在答案而不是评论中。

试试这个：

```
" Set the filetype stuff to off, required for Pathogen
filetype off
filetype plugin indent off

execute pathogen#infect()

" You can now turn it on again
filetype on
filetype plugin indent on 
```

而不是您当前的设置。

# sql-server - 如何从 SQL Server 事务中刷新全文索引

> ID：14264375
> 
> 赞同：3
> 
> 时间：2013-01-10T18:04:04.917
> 
> 标签：sql-server, transactions, full-text-search, full-text-indexing

我遇到了与此处描述的问题类似的问题：

[如何在 mssql 的事务中强制刷新全文索引？](https://stackoverflow.com/questions/3548590/how-do-i-force-a-refresh-of-a-fulltext-index-within-a-transaction-in-mssql/14246018#14246018)

但是，那里发布的推荐解决方案不起作用。我尝试在同一个主题上发布后续内容，但它被版主删除了。所以我开始一个新的问题。

与原始查询类似，我也尝试在事务中实现单元测试。我想将数据插入全文索引列，查询数据以检查其有效性，然后回滚插入。

问题是在我提交事务之前索引似乎没有更新。我已经尝试过“WAITFOR DELAY”方法，但是无论我等待多长时间索引都不会更新，直到事务提交之后。

这是我正在尝试做的一个示例：

```
BEGIN TRAN

INSERT INTO AMMS.Content
(
    ContentTypeId,
    Name,
    ImportDate,
    IsDeleted,
    LastModifiedBy,
    LastModifiedAt,
    DisplayInPortal,
    StatusId
)
VALUES
(
    4,
    'my unit test content',
    GETUTCDATE(),
    0,
    1,
    GETUTCDATE(),
    1,
    2
)

declare @count int
set @count = 0
while @count < 10
begin
    SELECT FULLTEXTCATALOGPROPERTY('PRIMARY', 'PopulateStatus') AS Status
    select * from amms.Content where contains(Name, 'unit')
    waitfor delay '00:00:01'
    set @count = @count + 1
end 
```

填充状态保持在 9 并且只要事务处于挂起状态，选择就不会返回任何行。一旦我提交填充状态返回 0 并且选择按预期返回单行。

我错过了什么吗？还有另一种方法可以做到这一点吗？这种行为在不同版本的 SQL Server 下是否有所不同？（我目前正在使用 2008 进行测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:56:06.207

我觉得你运气不好。尝试在事务中启动手动刷新...

```
begin tran
alter fulltext index on dbo.FTS_Table start full population 
```

...给我这个信息：

> 消息 574，级别 16，状态 0，第 1 行 ALTER FULLTEXT INDEX 语句不能在用户事务中使用。

您有哪些替代方案可能取决于您管理单元测试的方式，也许您可`DELETE`​​以再次使用数据，或者`DROP`如果表仅用于此测试，则可以完全使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-10T08:41:01.107

本质上，SQL Server 不会让您在事务（或快照）中执行某些操作。

由于存在争用的风险和文本索引的巨大开销，索引服务尤其刻意在用户连接的外部运行。

如果您退后一步考虑对任何其他数据库连接的影响，以及对当前重写全文索引的事务的影响，我相信您会理解在这种情况下，Microsoft 是有道理的。

# jquery - 我无法让 jQuery 工作

> ID：14264380
> 
> 赞同：-4
> 
> 时间：2013-01-10T18:04:22.307
> 
> 标签：jquery

嗨，我正在尝试一些 jQuery，但一点运气都没有。正在编写代码，什么没有，没有任何工作。所以我尝试了一些来自 w3schools 的 JQuery，但都没有成功。知道为什么我不能让它工作吗？

我在我的 html 的头部有这个

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

还是不行。

感谢任何帮助谢谢米奇

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
$("button").click(function(){
$("#div1").fadeIn();
$("#div2").fadeIn("slow");
$("#div3").fadeIn(3000);
});
});
</script>
</head>

<body>
<p>Demonstrate fadeIn() with different parameters.</p>
<button>Click to fade in boxes</button>
<br><br>
<div id="div1" style="width:80px;height:80px;display:none;background-color:red;"></div>        <br>
<div id="div2" style="width:80px;height:80px;display:none;background-color:green;">    </div><br>
<div id="div3" style="width:80px;height:80px;display:none;background-color:blue;">  </div>

</body>
</html> 
```

将其复制到记事本中，保存然后在chrome中运行，当我按下按钮时什么也没发生。

感谢所有帮助的人

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T18:12:52.247

这里的问题是您用来加载 jQuery 的方案相对 url。由于我假设您正在本地加载 html 文件，因此您的页面方案是`file://`. 当您使用`//`作为源来加载 jQuery 时，它会在本地文件系统中查找名为`ajax.googleapis.com`. 替换`//`你的脚本标签`https://`来解决你的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T18:11:35.287

如果您只是将它粘贴到记事本中，保存并在浏览器中打开文件，则无法使用此代码找到 jQuery。

您必须：

*   使用 HTTP 服务器提供您的文件（即不使用 访问它`file://`）
*   或将 jQuery 的 URL 更改为不使用[协议相对 URL](http://paulirish.com/2010/the-protocol-relative-url/)（以 开头的 URL `//`）

最简单的解决方法是改变

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> 
```

到

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> 
```

但最重要的是始终使用本地 HTTP 服务器进行测试（在包括 Windows 在内的任何操作系统上安装 Apache 都非常容易）。有很多东西是你无法测试的`file://`，包括大多数跨域 ajax 操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:11:44.947

改变

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

到

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

问题是`//ajax.googleapis.com`用于避免不同协议（http/https）的问题。浏览器将添加用于页面的协议。当您从硬盘驱动器上的文件打开 HTML 时，将使用 file:// 协议。并且浏览器尝试使用 加载 jquery `file://ajax.googleapis.com`，但这不起作用，因为您`ajax.googleapis.com`的硬盘上没有文件夹。因此，只需明确指定 jquery 的协议

# ios - 在objective-c（iPad）中的两个可移动圆圈之间画线

> ID：14264384
> 
> 赞同：0
> 
> 时间：2013-01-10T18:04:29.723
> 
> 标签：ios, objective-c, ipad, uiview

我是 Objective-c 的新手，正在尝试在 Objective-c 中的可移动圆圈之间画一条线。我已经有生成圆圈的代码。这是我想在我的应用程序中创建的图像。

[http://images.sciencedaily.com/2004/04/040407083832.jpg](http://images.sciencedaily.com/2004/04/040407083832.jpg)

这是我的代码。

CircleViewController.m

```
 - (void)viewDidLoad
   {
     [super viewDidLoad];
     for (int i=0; i<5; i++) {

    CGRect circleFrame = CGRectMake(arc4random() % 500, arc4random() % 500, (arc4random() % 200)+50 , (arc4random() % 200)+50);
    CircleView *cirleView = [[CircleView alloc] initWithFrame: circleFrame];
    cirleView.backgroundColor = [UIColor clearColor];

    CGFloat hue = ( arc4random() % 256 / 256.0 );  //  0.0 to 1.0
    CGFloat saturation = ( arc4random() % 128 / 256.0 ) + 0.5;  //  0.5 to 1.0, away from white
    CGFloat brightness = ( arc4random() % 128 / 256.0 ) + 0.5;  //  0.5 to 1.0, away from black
    UIColor *color = [UIColor colorWithHue:hue saturation:saturation brightness:brightness alpha:1];
    cirleView.circleColor = color;
    [self.view addSubview:cirleView];
 } 
```

}

CircleView.m

```
 -(void) drawCircle:(CGPoint)p withRadius:(CGFloat)radius inContext:(CGContextRef)contex
   {
       UIGraphicsPushContext(contex);
       CGContextBeginPath(contex);
       CGContextAddArc(contex, p.x, p.y, radius, 0, 2*M_PI, YES);
       CGContextSetLineWidth(contex, 2.0);
       CGContextAddLineToPoint(contex, p.x, p.y);
       CGContextDrawPath(contex, kCGPathFillStroke);
       UIGraphicsPopContext(); 
   }

   - (void)drawRect:(CGRect)rect
   {

        CGFloat size = self.bounds.size.width/2;
        if(self.bounds.size.height < self.bounds.size.width) size = self.bounds.size.height / 2;

        size *= 0.90;
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetLineWidth(context, 5.0);

        [_circleColor setStroke];
        [_circleColor setFill];    
        CGPoint point1;
        point1.x = self.bounds.origin.x + self.bounds.size.width/2;
        point1.y = self.bounds.origin.y + self.bounds.size.height/2;

        [self drawCircle:point1 withRadius:size inContext:context];

        UITapGestureRecognizer *singleFingerTap =
        [[UITapGestureRecognizer alloc] initWithTarget:self
                                        action:@selector(handleSingleTap:)];
        [self addGestureRecognizer:singleFingerTap];
   } 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:19:33.367

画一条线：

```
-(void) drawLine (CGRect circleViewRect1, CGRect circleViewRect2)
{
    CGContextRef context   = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);

    //line width
    CGContextSetLineWidth(context, 1.0);

    CGContextMoveToPoint(context, circleViewRect1.center.x + circleViewRect1.bounds.width/2,circleViewRect1.center.y + circleViewRect1.bounds.height/2); //start from first circle radius

    CGContextAddLineToPoint(context,  circleViewRect2.center.x + circleViewRect2.bounds.width/2,circleViewRect2.center.y + circleViewRect2.bounds.height/2); //draw to this point

    // and now draw the Path!
    CGContextStrokePath(context);
} 
```

注意：这仅在两个圆的中心位于水平线上时才有用。此外，假设 circleViewRect1 位于 circleViewRect2 的左侧。您必须弄清楚其他用例的值，即它们是否位于不同的角度等。

# ruby-on-rails - Rails 设计 after_sign_up_path 重定向

> ID：14264386
> 
> 赞同：0
> 
> 时间：2013-01-10T18:04:34.590
> 
> 标签：ruby-on-rails, routing, devise

我的应用程序中有两个用于登录的模型。我也没有为设计生成任何控制器，都是内置的。我的 ApplicationController 是这样的：

```
 def after_sign_in_path_for(resource)
    case resource
      when User then request.referrer 
      when Admin::Admin then :admin_mainpage
    end
  end

  def after_sign_up_path_for(resource)
    root_path
  end

  def after_sign_out_path_for(resource_or_scope)
    request.referrer
  end 
```

但是，当我尝试注册新用户时，设计也是登录用户，我得到了`devise filter chain halted as require_no_authentication rendered or redirected`

但是怎么办，如果我只是在系统中登录，我被重定向到上一页，但是当我注册新用户时，我登录但重定向到 root_path？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:21:07.007

我不知道这是一个好的解决方案，但尝试类似：

```
 def after_sign_in_path_for(resource)
    case resource
      when User then 
        if request.referrer.to_s.include? "sign_up"
          root_path
        else
          request.referrer 
        end
      when Admin::Admin then :admin_mainpage
    end
  end 
```

# sql - 一张表没有记录时的多表查询

> ID：14264389
> 
> 赞同：2
> 
> 时间：2013-01-10T18:04:42.913
> 
> 标签：sql, postgresql

如果我想这样做，我应该怎么做：

目前，有A表和B表，

```
A:
id, name, address            //the id is unique
B
id, contact, email 
```

由于一个人可能有多个联系人和邮箱，或者没有联系人和邮箱（即表B中没有记录）

现在我想计算每个 id 有多少条记录，甚至是 0: 结果将如下所示：

```
id, name, contact_email_total_count 
```

我该怎么做（目前我唯一不知道的地方是如何计算 0 记录，因为表 B 中没有记录）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:07:48.870

对于这种情况，您将需要使用 a `LEFT JOIN`，然后添加一个聚合和 a `GROUP BY`：

```
select a.id, 
  a.name, 
  count(b.id) as contact_email_total_count
from tablea a
left join tableb b
  on a.id = b.id
group by a.id, a.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!1/2d924/1)

如果您在学习连接语法时需要帮助，这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

根据您的评论，典型[的执行顺序](https://stackoverflow.com/questions/4596467/order-of-execution-of-the-query)如下：

> 1.  从
> 2.  在
> 3.  加入
> 4.  在哪里
> 5.  通过...分组
> 6.  拥有
> 7.  选择
> 8.  订购方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:11:30.983

无论B如何，都需要进行左连接以维护表A中的记录：

[PostgreSQL：左外连接语法](https://stackoverflow.com/questions/4579957/postgresql-left-outer-join-syntax)

需要汇总 B 中的记录数：

[PostgreSQL GROUP BY 与 MySQL 不同？](https://stackoverflow.com/questions/1769361/postgresql-group-by-different-from-mysql)

# sql-server-2005 - SQL Server 2005 相当于 OFFSET / FETCH

> ID：14264390
> 
> 赞同：0
> 
> 时间：2013-01-10T18:04:49.520
> 
> 标签：sql-server-2005

> **可能重复：**
> [sqlserver 中的 LIMIT 10..20](https://stackoverflow.com/questions/971964/limit-10-20-in-sqlserver)

我尝试在 SQL Server 2005 中使用以下代码（它是在 2012 年编写的）：

```
SELECT *
FROM  (SELECT TOP (100) PERCENT ID_BADGE,
                                DATE_TRX,
                                CODE_TRX,
                                SEQ_REC
       FROM   omi.DCUTRX_ZERO
       UNION ALL
       SELECT TOP (100) PERCENT ID_BADGE,
                                DATE_TRX,
                                CODE_TRX,
                                SEQ_REC
       FROM   omi.TAHIST_ZERO) OMI
WHERE  ( ID_BADGE = '     ' + @Badge )
       AND ( DATE_TRX BETWEEN @Date AND @Date2 )
       AND ( SEQ_REC IN ( '0', '1000' ) )
       AND ( CODE_TRX IN ( '100', '101' ) ) 
    OFFSET 1 ROWS 
    FETCH NEXT 2 ROWS ONLY 
```

谁能告诉我等效的 SQL Server 2005？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:00:00.590

```
SELECT  ID_BADGE, DATE_TRX, CODE_TRX, SEQ_REC
FROM    (
        SELECT  *, ROW_NUMBER() OVER (ORDER BY DATE_TRX) rn
        FROM    (
                SELECT  ID_BADGE, DATE_TRX, CODE_TRX, SEQ_REC
                FROM    omi.DCUTRX_ZERO
                UNION ALL
                SELECT  ID_BADGE, DATE_TRX, CODE_TRX, SEQ_REC
                FROM    omi.TAHIST_ZERO
                ) q
       WHERE    ID_BADGE = '     ' + @Badge
                AND DATE_TRX BETWEEN @Date AND @Date2
                AND SEQ_REC IN ('0', '1000')
                AND CODE_TRX IN ('100', '101')
       ) q
WHERE  rn BETWEEN 2 AND 3
ORDER BY
       DATE_TRX 
```

请注意，您需要某种`ORDER BY`在 SQL Server 中`ROW_NUMBER`才能工作。

# java - Java 转换错误？

> ID：14264397
> 
> 赞同：2
> 
> 时间：2013-01-10T18:05:20.017
> 
> 标签：java, casting, downcast

有人知道为什么编译器不能在“short”中转换值“7”吗？显式转换正在工作，但在传递参数时它不起作用！！！

```
class Alien {
    String invade(short ships) { return "a few"; }
    String invade(short... ships) { return "many"; }
}
public class Wind {
    public static void main(String [] args) {
        short temp = 7;
        System.out.println(new Alien().invade(7));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:07:24.533

整数**字面量**（这就是我们在这里讨论的）是`int`值，除非它们有一个后缀来表明它们是`long`值。

从[规范的第 3.10.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)：

> 如果整数文字以 ASCII 字母 L 或 l (ell) 为后缀，则它是 long 类型；否则它是 int 类型（§4.2.1）。

但是选角很好。也完全有可能有一个不是文字的常量。例如：

```
public static final short THIS_IS_A_SHORT = 7; 
```

这`THIS_IS_A_SHORT`是一个类型的常量`short`。在这种情况下，您甚至不需要演员表，因为这是一项任务。作业受[JLS 第 5.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2)的约束，其中包括：

> 如果变量的类型是 byte、short 或 char，并且常量表达式的值可以用变量的类型表示，则可以使用窄化原语转换。

方法参数*不受*赋值转换的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:06:13.967

默认情况下，整数文字在 java 中被视为 int 原始类型。

`invade(7)`寻找具有类型参数的方法入侵`int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:07:00.713

因为整数值常量是`int`类型常量。因此`7`，self 是一个`int`常数。

**UPD：** 当 Java 搜索要调用的方法时，它会搜索某种方法原型。在您的情况下，`invade(int)`并且没有任何具有此类参数类型的方法。只有`invade(short)`和`invade(short...)`。

当您创建一个新变量时，即`short temp = 7;`Java“理解”它`7`是一个短值并允许在没有强制转换的情况下进行赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:11:36.947

Java 将任何 Integer 文字视为 int 并且没有任何具有此类参数的方法。另一方面，java 不会进行自动向下转换，因为它可能会导致数据丢失和标记错误。

如果您进行以下更改。尽管您在调用方法时传递了短暂的信息，但向上转换并没有什么害处，java 会为您做到这一点。产生输出“一些”

```
class Alien {
    String invade(int ships) { return "a few"; }
     String invade(int... ships) { return "many"; }
 }
 public class Wind {
    public static void main(String [] args) {
       short temp = 7;
      System.out.println(new Alien().invade(temp));
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T18:14:38.953

JAVA 被**故意**写成没有短文字：

[为什么 Java 中没有字节或短文字？](https://stackoverflow.com/questions/317816/why-are-there-no-byte-or-short-literals-in-java)

[http://www.velocityreviews.com/forums/t149350-java-byte-literals-and-short-literals.html](http://www.velocityreviews.com/forums/t149350-java-byte-literals-and-short-literals.html)

* * *

7 是`int`文字，但不能直接用作`short`文字。你只需要这个：

```
System.out.println(new Alien().invade((short) 7)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-04T19:27:19.607

```
class Alien {
String invade(short ships) { return "a few"; }
String invade(short... ships) { return "many"; }
}

public class Wind {
public static void main(String [] args) {
    short temp = 7; // the variable temp get a value of 7
    System.out.println(new Alien().invade(temp)); // but 7 is not short by default, 
                                                  // so use variable temp instead of 7
    }
} 
```

# php - 如何通过拖放将网页图像化？

> ID：14264401
> 
> 赞同：0
> 
> 时间：2013-01-10T18:05:27.980
> 
> 标签：php, jquery, html

我现在的雇主希望我制作一个页面，允许用户将图像和文本拖放到背景上，然后将其保存为 jpg 或 png 文件到服务器。拖放由jQuery启用，后端是php。我试过 html2canvas 但它总是给我一个“画布被污染，无法读取数据”的错误。有没有办法做到这一点？

```
 $(function() {
            $( "#1" ).draggable({ snap: true });
            $( "#2" ).draggable({ snap: ".screen" });
            $( "#3" ).draggable({ snap: ".screen" });
            $( "#4" ).draggable({ snap: ".ui-widget-header", snapMode: "outer" });
            $( "#5" ).draggable({ grid: [ 20,20 ] });
            $( "#6" ).draggable({ grid: [ 80, 80 ] });
            $("#7").change(function() {
                //alert($(this).val());
                $('.changeMe').css("font-family", $(this).val());
            });

            $("#8").change(function() {
                //alert($(this).val());
                $('.changeMe').css("color", $(this).val());
            });

            $("#9").change(function() {
                $('.changeMe').css("font-size", $(this).val() + "px");
            }); 
```

# jquery - 如何克隆 HTML 块？

> ID：14264405
> 
> 赞同：1
> 
> 时间：2013-01-10T18:05:41.107
> 
> 标签：jquery, jquery-clone

我正在为 Jquery 克隆而苦苦挣扎。我可以克隆一行 HTML，但我不知道如何克隆一个块。

我有这个块：

```
<div class="item-name">
    <label for="id_form-0-name"></label>
    <select id="id_form-0-name" name="form-0-name"></select>
</div> 
```

而且我需要生产更多的两个块，每次更改新块的属性以反映其位置。

```
<div class="item-name">
    <label for="id_form-1-name"></label>
    <select id="id_form-1-name" name="form-1-name"></select>
</div>
<div class="item-name">
    <label for="id_form-2-name"></label>
    <select id="id_form-2-name" name="form-2-name"></select>
</div> 
```

关于我必须做什么才能获得该输出的任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:08:00.663

试试这个：

```
$('.item-name').clone().insertAfter('.item-name') 
```

来源：

1）关于`clone()` [http://api.jquery.com/clone/](http://api.jquery.com/clone/)
2）关于`insertAfter` [http://api.jquery.com/insertAfter/](http://api.jquery.com/insertAfter/)

**对于您的其他要求**

尝试这样的事情：

```
$clone = $('.item-name:last').clone();
for (i = 1; i < 999; i++) {
    if ($('.item-name select[id=id_form-'+i+'-name]').attr('id') != 'id_form-'+i+'-name') {
        $clone.find('select').attr('id', 'id_form-'+i+'-name');
        $clone.find('select').attr('name', 'form-'+i+'-name');
        $clone.find('label').attr('for', 'id_form-'+i+'-name');
        break;
    }
}
$clone.insertAfter('.item-name:last'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:08:05.443

试试这个（克隆两次）：

```
$('.item-name:last').clone().insertAfter($('.item-name:last')).clone().insertAfter($('.item-name:last')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:32:13.940

[**工作演示**](http://jsfiddle.net/popnoodles/uvVW4/1/)

所以克隆它并增加属性。您可以在一行中完成，但要使其易于遵循：

```
var clone=$('.item-name:last').clone();
clone.insertAfter('.item-name:last');
var attrs='id_form-' + clone.index() + '-name';
clone.find('label').attr('for', attrs);
clone.find('select').attr({id: attrs, name: attrs}); 
```

# r - 对矩阵的列应用函数

> ID：14264406
> 
> 赞同：-4
> 
> 时间：2013-01-10T18:05:43.567
> 
> 标签：r

我以这种方式使用 R 库中的函数（“myfunction”）：

```
 myfunction(obj1, obj2, obj3, c("Name1", "Name2")) 
```

其中“Name1”和“Name2”是两个基因名称。我不想检索关于这两个基因的信息，而是想检索许多其他基因的信息，这些基因存储在一个有 1000 列和 100 行的文件中（100 行是 100 个基因名称）。

换句话说，假设我的文件名为 fl1000。对于每一列，我想要以下代码：

```
myfunction(obj1, obj2, obj3, fl1000[,1])
myfunction(obj1, obj2, obj3, fl1000[,2])
myfunction(obj1, obj2, obj3, fl1000[,3])
....
myfunction(obj1, obj2, obj3, fl1000[,1000]) 
```

既然不可能手动完成，那么如何以更紧凑和快速的方式完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:51:56.803

您的函数有四个参数 - obj1、obj2、obj3 和一个似乎是两个名称的向量的未命名参数。目前尚不清楚前三个 obj 是什么——它们是向量、单个元素还是什么？

因此，第一个问题似乎是您可能以何种方式在数据矩形的单列上运行此类函数。要在该矩形上使用 apply ，您将需要一个函数，该函数将 100 个元素的单个向量作为其输入。Clearyl myfunction() 并不是现在这样的函数。但是，如果该向量可以作为例如 obj1 输入，并且您只需要提供其他内容为 obj2 和 obj3，则调整函数很简单，因此它可以工作。但是，除非我们对您在做什么有更多的了解，否则我们无法提供更多帮助。

*编辑（问题编辑后）*

这个问题对我来说仍然不太有意义，因为该函数看起来需要一个 Name1 和 Name2 的向量，而您现在想给它一行 100 个值（而不仅仅是 2 个）。

但抛开这一点，也许你想要：

```
apply(fl1000, 2, function(x){myfunction(obj1, obj2, obj3, x)}) 
```

# c# - sc.exe 配置在 Windows 服务的 OnStart 中更改凭据

> ID：14264407
> 
> 赞同：0
> 
> 时间：2013-01-10T18:05:45.330
> 
> 标签：c#, windows-services, servicecontroller

我想从数据库中提取服务的凭据（更加动态）

在对服务调用 .Start() 之前，我正在使用 sc.exe 更改 OnStart 中的凭据。
sc.exe 更改有效，但我注意到它直到我再次重新启动后才生效。

即，我注意到它是 SYSTEM 作为它运行的用户。一旦我再次重新启动，它就会显示我的域帐户。

有没有其他方法可以更改允许我在 OnStart 实际运行之前在内部执行它的凭据？

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:13:57.143

> 有没有其他方法可以更改允许我在 OnStart 实际运行之前在内部执行它的凭据？

不。当`OnStart`执行时，服务*确实*会运行，所以无论你做什么，都为时已晚。

设置凭据以及启动类型、命令行、依赖项等其他内容应视为设置/安装/注册任务。

您可能会想到一些（相当复杂的）引导机制，例如一个服务在更新其凭据之前启动另一个服务。我真的会问自己这是否值得。

从系统操作/管理的角度来看，“动态”改变其用户的服务似乎也非常不可预测。

# php - 使用变量名实例化 PHP 对象时出现错误

> ID：14264408
> 
> 赞同：2
> 
> 时间：2013-01-10T18:05:48.023
> 
> 标签：php, object

使用以下内容并不像我预期的那样工作。使用有效的类名，它可以执行，但使用不存在的类，它只会崩溃而不会记录任何错误。这是预期的行为吗？如果是这样，有关如何测试对象是否正确实例化的任何建议？

```
$className = 'SomeClass';
try {
    $object = new $className;
    if (is_object($object)) {
        $logger->info(__METHOD__.' object created');
        return $object;
    } else {
        $logger->err(__METHOD__.' '.$className.' is not an object!');
    }
} catch (Exception $e) {
    $logger->err(__METHOD__.' error: '.print_r($e->getMessage()));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:08:36.653

为此，您可以使用[class_exists](http://php.net/manual/en/function.class-exists.php)函数。

```
// Check that the class exists before trying to use it
if(class_exists($className)) {
    $object = new $className();
} else {
    // Do stuff for when class does not exist
} 
```

# c++ - 将 eigen::MatrixXf 映射到现有的 eigen::matrixXf

> ID：14264413
> 
> 赞同：3
> 
> 时间：2013-01-10T18:06:12.900
> 
> 标签：c++, eigen

[前段时间](https://stackoverflow.com/questions/13395431/eigenvectorxf-to-matrixf-map)，用户ggael给出了将 eigen::vectorXf 映射到 eigen::matrixXf 的问题的答案。

现在，我需要对现有矩阵做类似的事情，例如我知道我可以：

```
for(int i=0;i<p;++i){
    VectorXf vec=q.col(i);
    /*q is a p**2 by n matrix*/ 
    Map<MatrixXf> qi(vec.data(),p,p);
    /*run function that uses qi to produce a scalare and store that scalar*/
} 
```

`qi`但是（在我看来）在循环之外一劳永逸地创建然后`qi`一遍又一遍地使用它会更有效（对吗？）

另外，我想知道我映射`q.col(i)`到的中间步骤`vec`是否真的有必要......

最近的答案[建议](https://stackoverflow.com/questions/12003692/mapping-array-back-to-an-existing-eigen-matrix)这样做：

```
qi=Map<MatrixXd>(vec.data(),p,p); 
```

但这样做会产生：

```
In function ‘Eigen::VectorXi DepType(const MatrixXf&, const MatrixXf&, const int&)’:
DeC.cpp:279:34: error: no matching function for call to ‘Eigen::Map<Eigen::Matrix<double, -0x00000000000000001, -0x00000000000000001> >::Map(Eigen::PlainObjectBase<Eigen::Matrix<float, -0x00000000000000001, 1> >::Scalar*, int&, int&)’
DeC.cpp:279:34: note: candidates are:
/eigen/Eigen/src/Core/Map.h:179:12: note: Eigen::Map<MatrixType, MapOptions, StrideType>::Map(Eigen::Map<MatrixType, MapOptions, StrideType>::PointerArgType, Eigen::Map<MatrixType, MapOptions, StrideType>::Index, Eigen::Map<MatrixType, MapOptions, StrideType>::Index, const StrideType&) [with PlainObjectType = Eigen::Matrix<double, -0x00000000000000001, -0x00000000000000001>, int MapOptions = 0, StrideType = Eigen::Stride<0, 0>, Eigen::Map<MatrixType, MapOptions, StrideType>::PointerArgType = double*, Eigen::Map<MatrixType, MapOptions, StrideType>::Index = long int]
/home/kaveh/Desktop/work/p1/geqw4/vi3/out/sp/ccode/eigen/Eigen/src/Core/Map.h:179:12: note:   no known conversion for argument 1 from ‘Eigen::PlainObjectBase<Eigen::Matrix<float, -0x00000000000000001, 1> >::Scalar* {aka float*}’ to ‘double*’
/eigen/Eigen/src/Core/Map.h:166:12: note: Eigen::Map<MatrixType, MapOptions, StrideType>::Map(Eigen::Map<MatrixType, MapOptions, StrideType>::PointerArgType, Eigen::Map<MatrixType, MapOptions, StrideType>::Index, const StrideType&) [with PlainObjectType = Eigen::Matrix<double, -0x00000000000000001, -0x00000000000000001>, int MapOptions = 0, StrideType = Eigen::Stride<0, 0>, Eigen::Map<MatrixType, MapOptions, StrideType>::PointerArgType = double*, Eigen::Map<MatrixType, MapOptions, StrideType>::Index = long int]
/eigen/Eigen/src/Core/Map.h:166:12: note:   no known conversion for argument 1 from ‘Eigen::PlainObjectBase<Eigen::Matrix<float, -0x00000000000000001, 1> >::Scalar* {aka float*}’ to ‘double*’
/eigen/Eigen/src/Core/Map.h:154:12: note: Eigen::Map<MatrixType, MapOptions, StrideType>::Map(Eigen::Map<MatrixType, MapOptions, StrideType>::PointerArgType, const StrideType&) [with PlainObjectType = Eigen::Matrix<double, -0x00000000000000001, -0x00000000000000001>, int MapOptions = 0, StrideType = Eigen::Stride<0, 0>, Eigen::Map<MatrixType, MapOptions, StrideType>::PointerArgType = double*]
/eigen/Eigen/src/Core/Map.h:154:12: note:   candidate expects 2 arguments, 3 provided
/eigen/Eigen/src/Core/Map.h:119:79: note: Eigen::Map<Eigen::Matrix<double, -0x00000000000000001, -0x00000000000000001> >::Map(const Eigen::Map<Eigen::Matrix<double, -0x00000000000000001, -0x00000000000000001> >&)
/eigen/Eigen/src/Core/Map.h:119:79: note:   candidate expects 1 argument, 3 provided 
```

例如，似乎 Eigen 认为`qi`是一个[向量](http://eigen.tuxfamily.org/dox/TutorialMapClass.html#TutorialMapTypes)....:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T18:37:37.430

以下：

```
qi=Map<MatrixXd>(vec.data(),p,p); 
```

表示要将 Map(vec.data(),p,p) 的系数复制到 qi 引用的矩阵中。但是，您真正想要的是重新初始化 Map<> 对象。为此，您必须使用 C++ 的构造新语法再次调用构造函数：

```
new (&qi) Map<MatrixXd>(vec.data(),p,p); 
```

此外，我必须说 Map<> 对象非常轻量级：它只有一个指针和 2 个整数在堆栈上静态分配。因此，将 Map<> qi 的声明移到循环之外将对性能产生零影响。另一方面，请注意您不需要将 q.col(i) 复制到临时缓冲区中。如果 q 是主要列，您可以直接执行以下操作：

```
Map<MatrixXf> qi(q.col(i).data(),p,p); 
```

# c++ - 当键是一对时，在地图中使用 .find() 函数

> ID：14264421
> 
> 赞同：1
> 
> 时间：2013-01-10T18:06:19.803
> 
> 标签：c++, dictionary, std-pair

我使用一对字符串作为映射中的键，使用一个 int 作为值。我想在地图中搜索，如果确切的对已经存在，则增加该值，否则将该对插入地图（值为 1）。它编译，但是，它实际上并没有找到已经存在的对，它只是插入。（输出仅用于测试目的）。我认为问题在于使用`.find()`配对，但不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:15:08.277

您显示的代码似乎是正确的。你能用一个完整的例子来演示`main`吗？

此外，我认为您可以摆脱`operator[]`：

```
++pairs[std::make_pair(*slow, *fast)]; 
```

然而，真正的问题可能是您希望`pairs`成为一个“out”参数，而您通过值传递它。您的功能实际上只是修改容器的副本。你想通过参考来代替它。`map<pair<string, string>, int> findPairs(map<pair<std::string,std::string>, int>& pairs, multiset<string> artists){`（注意参数`&`之前的`pairs`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:16:03.147

邮政编码没有错

但是，你做的太多了。例如，这段代码是，

```
yo=pairs.find(p);
if (yo==pairs.end()) 
{
  pairs.insert(make_pair(p,1));
  cout<<"inserted"<<endl;
}
else 
{
   yo->second+=1;
   cout<<"entered"<<endl;
} 
```

完全等同于：

```
pairs.insert(make_pair(p,1)).first->second += 1; 
```

这完全等同于：

```
++pairs[p]; 
```

这意味着整个代码可以用 just 替换`++pairs[p]`，或者只是这个：

```
++pairs[make_pair(*slow, *fast)]; 
```

因为毕竟`p`是。`make_pair(*slow, *fast)`

# java - 如何防止来电关闭我的程序？

> ID：14264422
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:06:21.670
> 
> 标签：java, android

我在 java 中有一个 Android 应用程序，我不希望我的应用程序在收到来电时关闭。

有谁知道防止来电关闭我在java中的应用程序的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:07:18.940

是的，您可以阻止来电。使用此代码

```
String phonestate = bundle.getString(TelephonyManager.EXTRA_STATE);

try 
{
    if (TelephonyManager.EXTRA_STATE_RINGING.equalsIgnoreCase(phonestate)) 
    {
        try 
        {
            TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
            Class c = Class.forName(tm.getClass().getName());
            Method m = c.getDeclaredMethod("getITelephony");
            m.setAccessible(true);
            telephonyService = (com.android.internal.telephony.ITelephony) m.invoke(tm);
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }

        if (prefStatus != null) 
        {
            if (count == 1) 
            {
                telephonyService.endCall();
                String prefLoginemail = myloginpref.getString("emailid", null);
                System.out.println(printdata + " prefLoginemail :: "+ prefLoginemail);

                Global.mNotificationManager = (NotificationManager) mxcontext.getSystemService(Context.NOTIFICATION_SERVICE);
                notifyDetails = new Notification(com.CellPhoneTerror.R.drawable.icon1,"CellPhoneTerror!", System.currentTimeMillis());
                myIntent = PendingIntent.getActivity(mxcontext, 0, new Intent(mxcontext, clsHomePage.class), 0);

                notifyDetails.setLatestEventInfo(mxcontext,"You Got a Call from Blocked Number.", "",myIntent);
                notifyDetails.flags |= Notification.FLAG_AUTO_CANCEL;
                Global.mNotificationManager.notify(Global.SIMPLE_NOTFICATION_ID,notifyDetails);

            }
        }
    }
    if (prefIncomingBlock.equals("true")) 
    {
        if (TelephonyManager.EXTRA_STATE_IDLE.equalsIgnoreCase(phonestate)) 
        {
            if (count == 0) 
            {
                System.out.println("if Cellphoneterror:"+ Global.clsIncomingNum);
                Intent block = new Intent(context, dialogbox1.class);
                block.setFlags(intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(block);
            }
        }
    }
} 
catch (Exception e) 
{
    e.printStackTrace();
} 
```

# python - 类似于 HTML 的布局

> ID：14264427
> 
> 赞同：12
> 
> 时间：2013-01-10T18:06:35.327
> 
> 标签：python, layout, reflow

我正在尝试实现我自己的基于流的小布局引擎。它应该模仿 HTML 布局的行为，但只模仿渲染树，而不是 DOM 部分。渲染树中元素的基类是 `Node`类。它有：

*   指向 DOM 中元素的链接（对于那些使用该库构建渲染树的元素）
*   对它的父级的引用（这是一个`ContainerNode`实例或无，见后文）
*   对布局选项的引用
*   X、Y、宽度和高度（在 中计算`layout()`大小之后，在 中计算`compute_size()`位置。虽然位置由`layout()`父级的方法定义，但大小由选项引用定义）。

它的方法是：

*   `reflow()`调用`compute_size()`和`layout()`
*   `compute_size()`用于计算节点的宽度和高度。
*   `layout()`它旨在定位节点的*子*节点，而不是节点本身。
*   `paint()`这是由图书馆的用户覆盖的。

该类`ContainerNode`正在实现子节点的处理。它提供了一个名为 的新方法`add_node()`，它将传递的节点添加到容器子容器中。该函数还接受默认为 False 的参数*force*，因为允许容器拒绝传递的节点，但*force*设置为 True。

这两个类不实现任何布局算法。我的目标是为不同类型的布局创建不同的类（在 CSS 中，主要由`display`属性定义）。昨晚我对文本布局进行了一些测试，您可以从[pastebin.com](http://pastebin.com/Qgi4Vrsu)找到我的代码（需要 pygame）。您可以将其保存到 python 脚本文件并像这样调用它：

```
python text_test block -c -f "Georgia" -s 15 
```

*注意：代码真的很糟糕。我很欣赏对深层误解的评论。*

上面提到的代码中的类`InlineNodeRow`实际上代表了我的想法，即如何实现布局类似于`display:inline`属性的节点（结合`NodeBox`）。

## 问题 1 - 内联文本的边距和填充

回到我在库中的当前方法：文本中的单个单词也将表示为单个节点（就像上面的代码一样）。`<span>`但我注意到标签中的边距和填充有两件事。

1.  设置边距时，只考虑水平边距，忽略垂直边距。
2.  填充溢出父容器并且不会“移动”跨度节点。

请参阅[http://jsfiddle.net/CeRkT/1/](http://jsfiddle.net/CeRkT/1/)。

我在这里看到了问题：当我想计算 的大小时`InlineNodeBox`，我向文本节点询问它的大小并将其添加到节点的大小中。但是文本节点的大小包括它的边距和填充，这*不*包括在 HTML 渲染器的定位中。因此下面的代码是不正确的：

```
def compute_size(self):
    # Propagates the computation to the child-nodes.
    super(InlineNodeBox, self).compute_size()

    self.w = 0
    self.h = 0
    for node in self.nodes:
        self.w += node.w
        if self.h < node.h:
            self.h = node.h 
```

`node.w`将包括边距和填充。我看到的下一个问题是，为了正确布置文本节点，我想将它们拆分`TextNode`为每个单词的单个 s，但是边距和填充随后将应用于所有这些节点，而 HTML 中的边距和填充`<span>`仅对标签。

**我认为我目前将每个单词放入单独节点的想法并不理想。浏览器如何构建他们的渲染树，或者你有更好的主意吗？**

## 问题 2 - 单词太长，放到下一行。

该类`InlineNodeBox`目前只组织*一个单行*。在上面的代码示例中，我`InlineNodeBox`从`NodeBox`前者拒绝接受节点（这意味着它不适合）中创建了一个新的。我不能用我目前的方法做到这一点，因为我不想重新重建渲染树。当一个节点被接受一次，但超过`InlineNodeBox`下一次回流时，我如何正确地将单词放入下一行（假设我保持`InlineNodeBox`类只组织单行节点的想法）？

* * *

我真的希望这一切都有意义。如果您不理解我的概念，请随时询问。我也非常愿意接受对其他概念、资源链接、文档、出版物等的批评和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:22:26.593

**问题2**：

您可以像 HTML 渲染器那样渲染多行（例如，检查要添加的新单词是否超过宽度，如果超过则添加新行）。你可以在你的`InlineNodeRow`, 中做到这一点，如果它们超过最大宽度，也要注意高度并换行。

**问题1**：

如果您确实为文本找出问题 2，那么您可以只为第一行输入偏移量（水平填充）。

虽然`<span>`没有`height`考虑，但确实需要`line-height`，因此您的计算可能是默认高度是字体高度，除非您有可用的`line-height`选项。

请注意，如果您有两个或多个连续`InlineNodeRow`的表示跨度，则需要一些智能逻辑来使第二个从第一个结束的地方继续:)

作为旁注，根据我对 Qt 的[富文本标签](http://doc.qt.digia.com/qt/qlabel.html)的记忆，具有相同渲染属性的每组单词都被认为是一个节点，它的渲染函数负责计算所有内容。你的方法更细化，我看到的唯一缺点是你不能拆分单词。

高温下，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T00:41:09.107

可能已经在[盒子模型文档中找到了](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)**问题 1**的解决方案（您可能需要查看[有关间隙](http://www.w3.org/TR/CSS2/visuren.html#clearance)的文档和[溢出](http://www.w3.org/TR/CSS2/visufx.html#propdef-overflow)的文档以及**问题 2**的文档）。

 **```
"margins of absolutely positioned boxes do not collapse." 
```

您可以查看[此 jsfiddle](http://jsfiddle.net/CeRkT/19/)示例。**

# javascript - 如何在 Express 应用程序中使用与 npm 一起安装的 jQuery？

> ID：14264429
> 
> 赞同：37
> 
> 时间：2013-01-10T18:06:35.570
> 
> 标签：javascript, jquery, node.js, express

我有一个 node.js + express 应用程序，我用 npm 安装了 jQuery。

在`app.js`我使用的文件中

```
var jquery = require('jquery'); 
```

在 html 文件头中，我包含了使用 jQuery 的 javascript，我得到“未定义 jQuery”。是秩序井然还是我错过了什么？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2015-04-09T11:15:41.787

如果您希望快速应用程序提供 jquery npm 模块，则将此行添加到服务器脚本（在您的情况下`app.js`）：

```
app.use('/jquery', express.static(__dirname + '/node_modules/jquery/dist/')); 
```

之后，您可以将其包含在您的 html 文件中：

```
<script src="/jquery/jquery.js"></script> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-10T20:05:42.947

当您`jQuery`使用`npm`它进行安装是因为您想`jQuery`在应用程序的服务器端使用（例如：在您的`app.js`文件中）。您仍然需要`jQuery`像这样添加到您的网页：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
```

如果你想在客户端使用它。如果您正在使用`Jade`，请将脚本标签添加到您的模板中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-12-13T06:12:15.200

从 npm 使用 jquery 的方法：

在 app.js 中

```
app.use('/assets', [
    express.static(__dirname + '/node_modules/jquery/dist/'),
    express.static(__dirname + '/node_modules/materialize-css/dist/'),
    ...
]); 
```

在布局模板中：

```
<script src="/assets/jquery.min.js"></script>
<script src="/assets/js/materialize.min.js"></script> 
```

希望这段代码对你有帮助！

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-08-05T10:47:30.197

我正在使用快递 4.10.2。我跟着 Lukasz Wiktor 回答，但它对我不起作用。我不得不稍微改变一下 Lukasz 的解决方案：

```
app.use('/jquery', express.static(__dirname + '/node_modules/jquery/dist/')); 
```

在 html 文件中，我还包括：

```
<script src="/jquery/jquery.js"></script> 
```

所以 /jquery 是 /node_modules/jquery/dist/ 目录的挂载点。

# python - 在 python 中扩展代数幂（sympy）

> ID：14264431
> 
> 赞同：6
> 
> 时间：2013-01-10T18:06:46.387
> 
> 标签：python, sympy

我只是想知道在 python 的 Sympy 模块中是否存在将代数幂扩展为`x**2`乘法形式（即）的现有方法？`x**2 -> x*x`

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:45:03.990

没有直接的支持。SymPy 自动组合乘法中的常用项以求幂。避免这种情况发生的唯一方法是使用该`evaluate=False`机制。例如

```
>>> Mul(x, x, evaluate=False)
x*x 
```

不久前在 SymPy 邮件列表上讨论了这个确切的问题（https://groups.google.com/d/topic/sympy/qaJGesRbX_0/discussion）。我在那里发布了一些代码可以做到这一点。我会在这里重复一遍：

```
def pow_to_mul(expr):
    """
    Convert integer powers in an expression to Muls, like a**2 => a*a.
    """
    pows = list(expr.atoms(Pow))
    if any(not e.is_Integer for b, e in (i.as_base_exp() for i in pows)):

        raise ValueError("A power contains a non-integer exponent")
    repl = zip(pows, (Mul(*[b]*e,evaluate=False) for b,e in (i.as_base_exp() for i in pows)))
    return expr.subs(repl) 
```

这是它的工作原理

```
>>> a = Symbol('a')
>>> exp = a**2
>>> print(exp)
a**2
>>> print(pow_to_mul(exp))
a*a 
```

我将在邮件列表中提出相同的警告：“evaluate=False 有点像 hack，所以请注意它很脆弱。一些函数会重新计算表达式，将其转换回 Pow。其他函数会中断，因为一些预期的不变量将被 evaluate=False 表达式破坏（例如，我怀疑 factor() 会正常工作）。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:20:57.327

似乎没有这样的事情，它只做相反的事情。

sympy 总是以最简单的方式显示输出，所以它总是会说：

```
(x**2).expand() -> x**2

simplify(x**2) -> x**2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-30T02:32:42.710

replace 方法非常适合用于简单表达式的此任务：

```
>>> expr = (x**2 + 1)/(x**3 - 2*x)
>>> expr.replace(
... lambda x: x.is_Pow and x.exp > 0,
... lambda x: Mul(*[x.base]*x.exp, evaluate=False))
(x*x + 1)/(-2*x + x*x*x) 
```

调整是必要的，以处理诸如`1/x**3`或之类的事情`x**2*(1 + x**2)`。但是，如果您扩展表达式的分子和分母并分别处理它们，这可能会满足您的需求。如果基础总是符号，那么这个符号黑客可能会做得更好：

```
>>> def sack(expr):
...     return expr.replace(
...     lambda x: x.is_Pow and x.exp > 0,
...     lambda x: Symbol('*'.join([x.base.name]*x.exp)))
...
>>> sack(-x**2)
-x*x
>>> sack(x**2*(1 + x**3)
x*x*(x*x*x + 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-22T04:43:50.903

继 Aaron 接受的答案和我对此的评论之后，这是`xreplace`我使用的版本，而不是最后`subs`一行，以避免评估子表达式（从而失去对乘法链的扩展能力）。

```
def non_eval_xreplace(expr, rule):
    """
    Duplicate of sympy's xreplace but with non-evaluate statement included
    """
    if expr in rule:
        return rule[expr]
    elif rule:
        args = []
        altered = False
        for a in expr.args:
            try:
                new_a = non_eval_xreplace(a, rule)
            except AttributeError:
                new_a = a
            if new_a != a:
                altered = True
            args.append(new_a)
        args = tuple(args)
        if altered:
            return expr.func(*args, evaluate=False)
    return expr 
```

我在想这个功能可以添加到`xreplace`SymPy 库中的现有功能中，方法是让它接受`**kwargs`传递给`expr.func`调用的功能。这是您有兴趣做的事情，还是对于大多数用户来说这会变得不必要地复杂？（或者我误解了你上面的评论，有没有更简单的方法来做到这一点？）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-28T16:42:40.893

其他答案无法处理`-x**2`，因此我使用正则表达式仅解决 2 的幂。我知道这有点 hacky，但它对我有用。

```
from sympy.printing import ccode
import re
CPOW = re.compile(r'pow\((?P<var>[A-Za-z_]\w*)\s*,\s*2\s*\)')

def to_c_code(expr):
    code = ccode(expr)
    # sympy has a hard time unsimplifying x**2 to x*x
    # replace all pow(var,2) with var*var
    code = re.sub(CPOW, r'\g<var>*\g<var>', code)
    return code 
```

# regex - 记事本++的正则表达式问题

> ID：14264437
> 
> 赞同：0
> 
> 时间：2013-01-10T18:07:16.280
> 
> 标签：regex, notepad++

我正在尝试创建一个表达式来删除 HTML 文件中的所有链接并将其目标替换为“#”。

寻找：

```
<a href="."$ ` 
```

代替：

```
<a href="#" 
```

但记事本++ 说 0 结果。

这是我的源文件的摘录 - [http://pastebin.com/aDa3HTcb](http://pastebin.com/aDa3HTcb)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:09:07.050

点匹配单个字符，并且您将正则表达式锚定在输入 ( `$`) 的末尾，因此这是预期的。

将您的初始正则表达式替换为：

```
<a href="[^"]+" 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:11:18.533

在您发现您的正则表达式格式错误。

尝试使用如下正则表达式：

```
<a href="[^"]*" 
```

# javascript - javascript事件和框架

> ID：14264443
> 
> 赞同：0
> 
> 时间：2013-01-10T18:07:31.133
> 
> 标签：javascript, events

这对很多人来说可能看起来很愚蠢，但我想知道您在 javascript 框架（角度、主干）中构建的所有事件和事件侦听器是否都与浏览器的内置事件相关联，仅此而已？

# android - 动画结束时移除或隐藏 Android AnimationDrawable

> ID：14264445
> 
> 赞同：1
> 
> 时间：2013-01-10T18:07:39.637
> 
> 标签：android, animation

我正在创建一个琐事游戏，它会在答案揭晓之前播放一个简单的两帧动画。动画会填满屏幕，因此在动画完成之前不会显示答案。一切正常，除了我无法让动画消失并揭示答案。我要做的是调用动画 ImageView 所在的相对布局，然后执行`ImageView_layout.setVisibility(View.GONE);`. 我没有收到任何错误，但相对布局不会消失。这是我所拥有的：

```
 Animation CorrAniShow = AnimationUtils.loadAnimation(this, R.anim.anim_fadein);
    Animation CorrAniHide = AnimationUtils.loadAnimation(this, R.anim.anim_fadeout);
    final RelativeLayout corrA_layout = (RelativeLayout) findViewById(R.id.aniC_Layout);
    final ImageView corrView = (ImageView) findViewById(R.id.corAn1);
    corrView.setBackgroundResource(R.anim.corr_anim);
    corrView.post(new Runnable() {
        @Override
        public void run() {
            AnimationDrawable corAn = (AnimationDrawable)corrView.getBackground();
            corAn.start();
        }
    });     
    CorrAniHide.setAnimationListener(new AnimationListener() {
        public void onAnimationStart(final Animation arg0) {}
        public void onAnimationRepeat(final Animation arg0) {}
        public void onAnimationEnd(final Animation rg0){
            corrA_layout.setVisibility(View.GONE);

        }
    }); 
```

谁能看到为什么视图没有消失？有没有更好的方法让动画消失？谢谢！

# c# - Unable to read HttpResponse from HTTPS

> ID：14264450
> 
> 赞同：0
> 
> 时间：2013-01-10T18:07:52.553
> 
> 标签：c#, https

```
public void HttpsRequest(string address)
    {
        string data;
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(address);
        request.Method = "GET";

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        byte[] resp = new byte[(int)response.ContentLength];
        Stream receiveStream = response.GetResponseStream();
        using (StreamReader reader = new StreamReader(receiveStream, Encoding.ASCII))
        {
            data = reader.ReadToEnd();
        }
    } 
```

I get an *Arithmetic operation resulted in an overflow* when I am trying to read a page over https. Errors occur because the response gives me ContentLenght = -1. Using fiddler I can see that the page was received. Some other websites using HTTPS works fine but most of them not.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:17:08.917

If I query [https://www.google.com](https://www.google.com), I get the same error message, because not every response has a content length. Use this code to avoid the problem:

```
public static void HttpsRequest(string address)
{
  string data;
   HttpWebRequest request = (HttpWebRequest)WebRequest.Create(address);
   request.Method = "GET";

   using (WebResponse response = request.GetResponse())
  {
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        data = reader.ReadToEnd();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:16:40.527

This behavior is expected: not every response contains content length.

There is nothing in your sample that requires length to be known, so simply not reading it maybe enough.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:24:14.833

From [HttpWebResponse.ContentLength Property](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.contentlength.aspx)

`The ContentLength property contains the value of the Content-Length header returned with the response. If the Content-Length header is not set in the response, ContentLength is set to the value -1.`

If `Content-Length` header is not set it does not mean that you got a bad response.

# sql - 是否可以在用户定义的函数中插入列作为参数？

> ID：14264455
> 
> 赞同：1
> 
> 时间：2013-01-10T18:08:14.693
> 
> 标签：sql, sql-server, sql-server-2008, tsql, user-defined-functions

我试图弄清楚是否可以在用户定义的函数中插入一列作为参数。

我想要做的是从某个表中插入一列，然后在我调用该函数时返回该列的最小值。（出于我的目的，这不是我想要的实际最小值，我只希望它返回一个数字，无论是最小值、最大值、方差、标准差，还是任何其他给我一个标量值的数学方程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:47:51.120

您将需要使用[sp_executesql来使用动态 SQL](http://msdn.microsoft.com/en-au/library/ms188001.aspx)

```
CREATE procedure dbo.[myfunc](@COL NVARCHAR(20),
                             @result int output)
AS
BEGIN
DECLARE @SQLString nvarchar(500)
DECLARE @ParmDefinition nvarchar(500)

SET @SQLString = N'SELECT @max_valueOUT = max(' + @COL + ') FROM mytable'
SET @ParmDefinition = N'@max_valueOUT int OUTPUT'

EXECUTE sp_executesql @SQLString, @ParmDefinition, @max_valueOUT=@result OUTPUT
END 
```

[SQL小提琴](http://sqlfiddle.com/#!6/8c766/18)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:53:52.180

我以前做过。您必须创建一个用户定义的数据类型。然后将用户定义的类型传递给函数。

# django - Django 应用程序执行缓慢（即使在缓存时）

> ID：14264457
> 
> 赞同：1
> 
> 时间：2013-01-10T18:08:23.213
> 
> 标签：django

启动我的第二个 Django 站点。

过去，我在使用 Django 的 ORM 时遇到过问题（基本上，它生成的 SQL 并不是我想要的，甚至使用了`select_related()`我无法将其变成应有的东西）——我最终只需在我的视图中手动编写我所有的数据库查询，并使用从 Django 文档中获取的这个函数，将`cursor`'s 的响应转换为可用的字典：

```
def dictfetchall(cursor, returnMultiDictAnyway=False):
    "Returns all rows from a cursor as a dict"
    desc = cursor.description
    rows = [
        dict(zip([col[0] for col in desc], row))
        for row in cursor.fetchall()
    ]

    if len(rows) == 1 and not returnMultiDictAnyway:
        return rows[0]
    return rows 
```

我几乎准备好启动我的网站，但我在尝试托管应用程序的两个不同的网络服务器上发现了相当大的性能问题。

在本地，它的运行速度并不快，但我通常把它归结为我的机器通常有点慢。我手头没有数字（稍后会添加），但 SQL 时间并没有太高，而且我已经努力优化 MySQL（添加缺失的索引等）。

这是在两个不同的网络主机上运行的应用程序（使用 bit.ly 来避免 Google 抓取这些 URL，抱歉！）：

*   [http://bit.ly/10iEWYt](http://bit.ly/10iEWYt)（托管在 Dreamhost 上，使用Passenger WSGI）
*   [http://bit.ly/UZ9adS](http://bit.ly/UZ9adS)（托管在 WebFaction，也使用 WSGI）

目前我`Debug=False`在这两台主机上都有（所以不应该有加载惩罚）和每台 15 分钟的基于文件的缓存。在 Dreamhost 上，我有一个实验性的 cronjob 每 15 分钟访问一次主页，以查看这是否能让 Python 服务器保持活动状态——这似乎并没有起到多大作用。

如果您尝试这些链接，您应该会看到服务器在您单击时响应需要多长时间，甚至包括缓存（尝试从主页转到另一个页面然后返回主页）。

我已经尝试过[这个分析中间件](http://djangosnippets.org/snippets/605/)，但不确定如何解释结果（可以稍后我回家时将它们添加到这篇文章中）——无论如何，它指向的函数/行都在 Django 自己的代码中，所以我努力将其与我自己的观点等联系起来。

上面的`dictfetchall()`方法在这里可能是个问题吗？我用它来处理网站上每个数据库查询的结果（每页约 5-10 个，大多数在主页上）。我确实有一些包含的模板，但没有什么太疯狂的。我有一个用于显示专辑评论等常见事情的上下文处理器，我到处都在使用它。我很困惑还有什么可能导致这种缓慢。

谢谢，希望这是足够的信息来提供帮助。

编辑：好的，这是网站主页的分析跟踪：[http](http://pastebin.com/raw.php?i=c7kHNXAZ) ://pastebin.com/raw.php?i=c7kHNXAZ——说实话，很难解释它。

另外，我查看了调试工具栏的统计信息：8 个 SQL 查询在 246 毫秒内（目前正在进一步优化这些），但总渲染时间为 3235 毫秒（本地）。这让我感到困惑。

# c - strlen - 字符串的长度有时会增加 1

> ID：14264458
> 
> 赞同：28
> 
> 时间：2013-01-10T18:08:23.803
> 
> 标签：c, string, strlen

我正在做一些 C 谜题。在大多数情况下，我能够找到正确的答案，但是我遇到了问题。我通过使用编译器知道正确的答案，但我不知道原因。

看一下代码：

```
char c[] = "abc\012\0x34"; 
```

`strlen(c)`使用标准 C 编译器会返回什么？

当我预期的是 3 时，我的编译器返回 4。

我认为`strlen()`会搜索第一次出现的`NULL`字符，但不知何故，结果比我预期的要多。

知道为什么吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-10T18:11:30.927

让我们写

```
char c[] = "abc\012\0x34"; 
```

单个字符：

```
char c[] = { 'a', 'b', 'c', '\012', '\0', 'x', '3', '4', '\0' }; 
```

你看到的第`\0`一个是八进制转义序列的开始，`\012`它延伸到后面的八进制数字。

八进制转义序列在标准（N1570 草案）的第 6.4.4.4 节中指定：

> *八进制转义序列：*
> `\` *八进制数字*
> `\` *八进制数字八进制数字八进制数字*
> `\` *八进制数字八进制数字*

它们由一个反斜杠后跟一个、两个或三个八进制数字组成。在该部分的第 7 段中，给出了八进制和十六进制转义序列的范围：

> 7 每个八进制或十六进制转义序列是可以构成转义序列的最长字符序列。

请注意，虽然八进制转义序列的长度被限制为最多三个八进制数字（因此`"\123456"`由五个字符组成，`{ '\123', '4', '5', '6', '\0' }`），但十六进制转义序列的长度不受限制

> *hexadecimal-escape-sequence:*
> `\x` *hexadecimal-digit*
> *hexadecimal-escape-sequence hexadecimal-digit*

因此`"\x123456789abcdef"`仅包含两个字符 ( `{ '\x123456789abcdef', '\0' }`)。

# html - Chrome 未更新支持离线的 HTML5 网站的 CSS 文件

> ID：14264459
> 
> 赞同：1
> 
> 时间：2013-01-10T18:08:27.387
> 
> 标签：html, google-chrome, html5-appcache

我有一个使用缓存清单的启用离线的网站。我发现 Chrome 正在为我的样式表的旧版本提供服务，即使我执行“空缓存和硬重新加载”

如果我将 ?foo=bar 附加到页面的 URL 或 CSS，则会交付新版本的 CSS。

我的清单是在 /Manifest/Index 动态生成的（例如）

如果我在 Chrome 中打开页面并查看 Fiddler，我会看到向 Web 服务器发出了一个请求，正如预期的那样：

```
#   Result  Protocol    Host    URL Body    Caching Content-Type    Process Comments    Custom  
6   200 HTTP    10.6.4.67   /Manifest/Index 2,476   no-cache  Expires: -1   text/cache-manifest; charset=utf-8  chrome:5484 
```

这是 /Manifest/Index 的标题详细信息

```
GET /Manifest/Index HTTP/1.1
Host: 10.6.4.67
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) 
Chrome/23.0.1271.97 Safari/537.11
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
HTTP/1.1 200 OK
Date: Thu, 10 Jan 2013 17:59:42 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 4.0.30319
X-AspNetMvc-Version: 4.0
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Content-Type: text/cache-manifest; charset=utf-8
Content-Length: 2476 
```

谁能告诉我为什么这个缓存清单中的 CSS 文件引用没有更新，除非我将缓存清除查询字符串变量附加到 CSS？特别是即使我清空 Chrome 的缓存？？！

更多信息：

如果我更新缓存清单，我可以打开 Chrome 的控制台并看到 App Cache 事件触发：

文档是使用清单 /Manifest/Index 从应用程序缓存加载的

应用程序缓存检查事件

应用程序缓存下载事件

应用程序缓存进度事件 (0 of 61) [http://xxxx/Content/themes/base/jquery.ui.progressbar.css](http://x.x.x.x/Content/themes/base/jquery.ui.progressbar.css)

应用程序缓存进度事件 (1 of 61) [http://xxxx/Content/themes/base/jquery.ui.accordion.css](http://x.x.x.x/Content/themes/base/jquery.ui.accordion.css)

*剪断*

应用程序缓存进度事件 (54 of 61) http://xxxx/Content/Site.css

我确实注意到此列表中的某些项目，例如 Site.css，带有下划线。这是为什么？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:56:05.287

使用： chrome://appcache-internals/ 清除 Chrome 中的 appcache 并将其删除。

此外，每次更改其中包含的文件以下载新副本时，您都需要重建清单文件。

这是通过在清单中使用随机数并在编辑文件时生成它来完成的。

例如在 node.js 中

```
function generateCacheManifest(...) {
    manifest = 'CACHE MANIFEST';
    manifest += '#version ' + Math.random();
    ...
} 
```

是的，随机数可以在评论中。关键是 Chrome 会检查缓存清单，当它发现没有任何变化时，它不会获取更新的文件。

更改文件，更改清单，就这么简单。

# php - Twig 模板不能包含 php 模板

> ID：14264466
> 
> 赞同：5
> 
> 时间：2013-01-10T18:08:54.007
> 
> 标签：php, templates, symfony, twig

我遇到了一个问题，对我来说这不是很清楚也很难理解。我试图制作日历小部件，它应该显示在我网站的每个页面上。所以，我认为它应该是平均模板（没有参数，没有每个站点）。我试着把它作为树枝模板。我设法渲染了日历，但是在获取日期对象时遇到了问题（这是获取渲染日历的正确参数所必需的）。过了一会儿，我尝试制作一个 php 模板，它将包含在主 twig 模板（layout.html.twig）中。它没有成功。我在 config.yml 中启用了 php 引擎，但没有帮助 - 实际上包含 php 模板，但作为普通文件，而不是 php 文件（不解析为 php 脚本），（但 php 引擎正在工作，我试图渲染来自控制器的 php 模板，它可以工作）。

我应该怎么做才能解决这个问题？

主配置.yml

```
imports:
    - { resource: parameters.ini }
    - { resource: security.yml }

framework:
    #esi:             ~
    translator:      { fallback: %locale% }
    secret:          %secret%
    charset:         UTF8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig', 'php'] }
    session:
        default_locale: %locale%
        auto_start:     true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true

# Swiftmailer Configuration
#swiftmailer:
#    transport: %mailer_transport%
#    host:      %mailer_host%
#    username:  %mailer_user%
#    password:  %mailer_password%

jms_security_extra:
    secure_controllers:  true
    secure_all_services: false

# services:
#    TpsaMailer:

#        class: Tpsa\TestBundle\Controller\MailerController 
```

布局.html.twig

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

{% block stylesheets %}
<link rel="stylesheet" type="text/css"
href="{{ asset('bundles/tpsablog/css/main.css') }}">
{% endblock %}

{% block javascripts %}
<!-- empty javascripts -->
{% endblock %}

<title>
{% block title %}
{% trans %}blog.programisty.duga{% endtrans %}
{% endblock %}
</title>

</head>
<body>
<div id="all">
    <div id="top">
        {% block top %}
            <div style="float: left" class="right">
                            <img style="float: left;
                            vertical-align: middle; margin: 8px
                            8px 8px 0px" src="{{ asset('bundles/tpsablog/images/glider.png') }}">
                <h4>{% trans %}blog.programisty.duga{% endtrans %}</h4>
                <div style="font-size: 8px">
                    {% trans %}ciekawosc.wiedza.niewygodne{% endtrans %}
                    <!-- Ciekawość i wiedza... To, co jest niewygodne dla
                    władzy -->
                </div>

            </div>
            <div style="float: right">
                <a href="{{ path('HomePage') }}">{% trans %}strona.glowna{% endtrans %}</a>
                <a href="{{ path('AboutPage') }}">{% trans %}o.mnie{% endtrans %}</a>
                <a href="{{ path('TBB_mess_add') }}">{% trans %}napisz.do.mnie{% endtrans %}</a>
                {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                {{ app.user.username }}
                <a href="{{ path('TBB_tag_list_homepage') }}">{% trans %}tagi{% endtrans %}</a>
                <a href="{{ path('TBB_mess_list_homepage') }}">{% trans %}wiadomosci{% endtrans %}</a>
                <a href="{{ path('logout') }}">{% trans %}wyloguj{% endtrans %}</a>
                {% else %}
                <a href="{{ path('login') }}">{% trans %}zaloguj{% endtrans %}</a>
                {% endif %}
                <div style="text-align: center; margin: 10px 0px">
                <a href="{{ path('TBB_rss') }}">
                <img src="{{ asset('bundles/tpsablog/images/rss.png')
                }}" alt="rss channel">  
                </a>
                <a href="http://www.facebook.com/duga.chernobyl"
                target="_blank">
                <img src="{{ asset('bundles/tpsablog/images/facebook.png') }}"
                alt="facebook"> 
                </a>
                <a href="http://www.youtube.com/user/DugaEye"
                target="_blank">
                <img src="{{ asset('bundles/tpsablog/images/youtube.png') 
                }}" alt="youtube">
                </a>
                </div>
            </div>
            <div style="clear:both"></div>
        {% endblock %}
    </div>

    <div id="frame">
        <div id="left">
        {% block content %}
            {% trans %}TODO{% endtrans %}
        {% endblock %}
        </div>
        <div id="right">
        {% block panel %}
            <div style="text-align: left">
                <div style="text-align: center">    
                <h4>{% trans %}profil.duga.eye{% endtrans %}</h4>
                <img style="width: 100px" src="{{
                asset('bundles/tpsablog/images/photo.jpg')
                }}">
                </div>
                <div style="font-weight:900; margin-top: 10px">
                <ul>
                <li>{% trans %}wiek{% endtrans %}: 21</li>
                <li>{% trans %}miejsce{% endtrans %}: /dev/null</li>
                <li>{% trans %}zainteresowania{% endtrans %}: {% trans %}programowanie.hacking.filozofia{% endtrans %}</li>
                <li>{% trans %}email{% endtrans %}: <a
                href="mailto:duga(dot)eye(at)gmx(dot)com">Mail</a>
                </ul>
                </div>
            </div>
            <h3>{% trans %}reklamy{% endtrans %}</h3>
            {% include '::calendar.html.php' %}
        {% endblock %}
        </div>
    </div>

    <div id="footer">
        {% block footer %}
        {% trans %}footer{% endtrans %}
        {% endblock %}
    </div>

</div>
</body>
</html> 
```

如何从 php Date 对象中获取正确的参数偏移量、数字、koniec、aktualny？（现在它是硬编码的）

日历.html.twig

```
{% include '::calendar.html.php' %}

{% set offset = 1 %}
{% set number = 28 %}
{% set koniec =  7 - ((offset + number) % 7) %}
{% set aktualny = 13 %}
<table border="0" style="text-align: center">
<thead>
<tr>
<td>{% trans %}pn{% endtrans %}</td>
<td>{% trans %}wt{% endtrans %}</td>
<td>{% trans %}sr{% endtrans %}</td>
<td>{% trans %}czw{% endtrans %}</td>
<td>{% trans %}pt{% endtrans %}</td>
<td>{% trans %}sob{% endtrans %}</td>
<td>{% trans %}nie{% endtrans %}</td>
</tr>
<tbody>
{% if offset % 7 != 0 %}
<tr>
{% for i in range(0,offset-1,1) %}<td><br></td>{% endfor %}
{% endif %}
{% for i in 1..number %}
{% if (i+offset)%7 == 1 %}<tr>{% endif %}
<td>
{% if i == aktualny %}
<span style="color: red">{{ i }}</span>
{% else %}
{{ i }}

{% endif %} 

</td>
{% if (i+offset)%7 == 0  %}</tr>{% endif %}
{% endfor %}
{% if koniec  < 7 %}
{% for i in 1..koniec %}
<td><br></td>
{% endfor %}
</tr>
{% endif %}
</tbody>
</table> 
```

php 模板，应该通过将其包含在 twig 模板中作为 php 模板执行，但它不会被解析并作为一个模板执行。

日历.html.php

```
ppp<?php echo  ('ala') ?>ooo 
```

只需在源代码中包含“pppooo”，作为 html 标记处理时不可见。

deps 文件，如果需要的话

```
[symfony]
    git=http://github.com/symfony/symfony.git
    version=v2.0.9

[twig]
    git=http://github.com/fabpot/Twig.git
    version=v1.5.1

[monolog]
    git=http://github.com/Seldaek/monolog.git
    version=1.0.2

[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.1.4

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.1.5

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.1.5

[swiftmailer]
    git=http://github.com/swiftmailer/swiftmailer.git
    version=v4.1.5

[assetic]
    git=http://github.com/kriswallsmith/assetic.git
    version=v1.0.2

[twig-extensions]
    git=http://github.com/fabpot/Twig-extensions.git

[metadata]
    git=http://github.com/schmittjoh/metadata.git
    version=1.0.0

[SensioFrameworkExtraBundle]
    git=http://github.com/sensio/SensioFrameworkExtraBundle.git
    target=/bundles/Sensio/Bundle/FrameworkExtraBundle
    version=origin/2.0

[JMSSecurityExtraBundle]
    git=http://github.com/schmittjoh/JMSSecurityExtraBundle.git
    target=/bundles/JMS/SecurityExtraBundle
    version=origin/1.0.x

[SensioDistributionBundle]
    git=http://github.com/sensio/SensioDistributionBundle.git
    target=/bundles/Sensio/Bundle/DistributionBundle
    version=origin/2.0

[SensioGeneratorBundle]
    git=http://github.com/sensio/SensioGeneratorBundle.git
    target=/bundles/Sensio/Bundle/GeneratorBundle
    version=origin/2.0

[AsseticBundle]
    git=http://github.com/symfony/AsseticBundle.git
    target=/bundles/Symfony/Bundle/AsseticBundle
    version=v1.0.1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T19:41:46.113

您不能在单个 Response 中混合搭配 twig 和 php（这样做会绕过 twig 的部分要点，即防止设计人员在视图中创建过多的逻辑）。

我认为 Symfony 文档应该/可以更清楚地说明这一点（目前它基本上说“启用它们并做你喜欢的事情”）。

如果您嵌入另一个控制器，那么您应该能够提供不同的响应，并且*该*响应可以是基于 php 的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T06:30:45.920

注意：下面的片段完全未经测试。

[http://twig.sensiolabs.org/doc/functions/date.html](http://twig.sensiolabs.org/doc/functions/date.html)

该函数`date`似乎创建 \DateTime 对象。

```
{% set now = date() %}
{% set offset = date(now.format('Y/m/01')).format(w) %} {# weekday of 1st day #}
{% set number = now.format('t') %} {# days in month #}
{% set koniec = 7 - ((offset + number) % 7) %}
{% set aktualny = now.format('n') %} {# today #} 
```

但是，如果您想在 twig 中包含原始 php 文件（例如“calendar.php”），则必须编写扩展名才能使其工作。

```
class CalendarExtension extends \Twig_Extension
{
    private $pathToPhp; //store that where the php file is

    public function setPhpFile($pathToPhp)
    {
        $this->pathToPhp = $pathToPhp;
    }

    public function getFunctions()
    {
        return array(
            new \Twig_SimpleFunction('calendar', array($this, 'showCalendar'))
        );
    }

    public function showCalendar([put arguments here if you need])
    {
        ob_start();
        include ($this->pathToPhp);
        return ob_get_clean();
    }
} 
```

要完成上述工作，您应该在容器中创建“标记”服务。

```
in app/config/config.yml

services:
    calendar_twig_extension:
        class: __Namespace__\CalendarExtension
        calls:
            - [setPhpFile, [__path to your calendar.php__]]
        tags:
            - [name: twig.extension] 
```

应替换双下划线的单词：

*   _ _ 命名空间 _ _ : CalendarExtension 的命名空间
*   _ _ calendar.php 的路径 _ _ ：calendar.php 的完整路径。您可以使用 %kernel.root_dir% 等参数来管理相对于项目的路径。

有了这些，你终于可以简单地写了

```
{{ calendar([arguments for CalendarExtension::showCalendar]) }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:11:14.440

您是否考虑过在渲染 php 模板的操作中使用`{% render 'ApplicationBundle:Controller:action' %}`和渲染您的日历 php 模板？

您还可以在渲染日历树枝的操作中渲染日历 php，并将 php 模板的输出作为简单的树枝变量传递。

`{{ var|raw }}`注意：要显示这样的var，如果里面有html标签，别忘了做。

注2：从symfony2.2开始，render参数改为`{% render url('route_name') %}`

# git - 如何在 git stash / git stash pop 后恢复索引？

> ID：14264467
> 
> 赞同：14
> 
> 时间：2013-01-10T18:08:54.117
> 
> 标签：git, git-stash

在使用 git add -p 对索引添加一些更改后，我发出了一个 git stash 但忘记添加 --keep-index。然后我愚蠢地做了一个 git stash pop，我对索引的所有更改都消失了。有没有办法将索引恢复到 git stash 之前的状态？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-10-09T21:31:25.217

当您刚刚完成`git stash pop`时，输出中的最后一行是：

```
Dropped refs/stash@{0} (ca82a6dff817ec66f44342007202690a93763949) 
```

如果您丢失了它，请参阅[如何在 Git 中恢复丢失的存储？](https://stackoverflow.com/a/91795)找到提交哈希。

一旦你有了哈希，**要么**：

*   删除所有当前更改（应用存储）：

    `git reset --hard`

    并使用其 id 重新应用存储，这次使用索引：

    `git stash apply ca82a6d --index`

*   只重置索引，这里的重点是索引被保存为存储的第二个父级：

    `git reset ca82a6d^2 .`

    注意最后的点。如果您不指定它，它也会将 HEAD 移动到索引（索引将显示为提交）。在这种情况下，运行`git reset --soft HEAD@{1}`以将 HEAD 返回到之前的位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-30T22:35:14.027

这将完成这项工作：

```
git stash apply --index 
```

* * *

**编辑**：考虑到索引已经丢失，您应该运行 a`git fsck --unreachable`并检查它提供的最新提交。您必须能够在那里看到丢失的索引。之后你就可以`git cherry-pick`了。

# xcode - ios6 中不推荐使用 setOrientation

> ID：14264470
> 
> 赞同：0
> 
> 时间：2013-01-10T18:09:05.113
> 
> 标签：xcode, deprecated

我已经这样做了2年：

```
 [[self previewLayer] setOrientation:cameraOrientation]; 
```

我终于更新了我的 ios6 项目，却发现“setOrientation”已被弃用。通常，这方面有很好的文档，但我在任何地方都找不到。欢迎回答或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:17:34.670

使用以下代码保持与旧版本的兼容性。（不要忘记将我的“[[UIApplication sharedApplication] statusBarOrientation]”更改为您要设置的任何方向）

```
if ([self.previewLayer respondsToSelector:@selector(connection)])
    {
        if ([self.previewLayer.connection isVideoOrientationSupported])
        {
            [self.previewLayer.connection setVideoOrientation:[[UIApplication sharedApplication] statusBarOrientation]];
        }
    }
    else
    {
        // Deprecated in 6.0; here for backward compatibility
        if ([self.previewLayer isOrientationSupported])
        {
            [self.previewLayer setOrientation:[[UIApplication sharedApplication] statusBarOrientation]];
        }                
    } 
```

# android - 如何跟踪网站内容？

> ID：14264472
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:09:05.983
> 
> 标签：android

我正在考虑实施一个 android 应用程序来跟踪主要零售商商店中某些产品的交易的可能性。例如，我想跟踪 kate spade cambridge 包在 NM、Bloomingdales 等有什么折扣吗？我正在考虑使用 perl 下载网站，但不确定它是否现实。有什么建议么？谢谢;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:16:09.200

要跟踪网站，您需要定期下载它。可以使用服务或警报管理器存档。

你的用户不会对你的实现很满意，因为：

*   您正在使用（无用）数据计划
*   您正在使用（无用）手机的处理器并且耗尽电池。

尝试更改架构：在服务器端跟踪网站、托管在某处的内容，并将有关更改内容的推送通知发送到设备。

# jquery - 如何让 JQGrid/JQPlot 在 Windows 8 上运行

> ID：14264474
> 
> 赞同：1
> 
> 时间：2013-01-10T18:09:12.667
> 
> 标签：jquery, jqgrid, windows-8, cordova, jqplot

我目前正在开发一个 phonegap/cordova 应用程序。我有一个 iOS 和 Android 构建工作/运行，并且都使用 JQGrid/JQPlot。我已将我的 jquery 代码更新为 win8 版本并摆脱了讨厌的异常。但是，我现在收到相同的无法通过 JQGrid/JQPlot 的实现添加动态内容异常。话虽如此，有没有人能够找到使用这些插件中的一个或两个的解决方法？

编辑 -

我很抱歉.. 我读了太多关于它的书，我忘了把它包括在内。

这是例外。

```
 Unable to add dynamic content '<table><thead><tr class='ui-jqgrid-labels' role='rowheader'><th id='momMeasurementTable_Record' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Record' class='ui-th-div-ie'>Record<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_Label' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Label' class='ui-th-div-ie'>Label<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_Date' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Date' class='ui-th-div-ie'>Date<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_Time' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Time' class='ui-th-div-ie'>Time<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_MaxCurrent' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_MaxCurrent' class='ui-th-div-ie'>Max Current (A)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_MinCurrent' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_MinCurrent' class='ui-th-div-ie'>Min Current (A)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_MinCurrentLim' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_MinCurrentLim' class='ui-th-div-ie'>Min Current Limit (A)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_Resistance' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Resistance' class='ui-th-div-ie'>Resistance (mOhm)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_PFUpperLimit' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_PFUpperLimit' class='ui-th-div-ie'>Pass/Fail Upper Limit (mOhm)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_MeasurementTime' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_MeasurementTime' class='ui-th-div-ie'>Measurement Time (ms)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th></tr></thead></table>'. A script attempted to inject dynamic content, or elements previously modified dynamically, that might be unsafe. For example, using the innerHTML property to add script or malformed HTML will generate this exception. Use the toStaticHTML method to filter dynamic content, or explicitly create elements and attributes with a method such as createElement.  For more information, see http://go.microsoft.com/fwlink/?LinkID=247104. 
```

文件：关于：空白

本质上，当生成表时，插件试图执行“不安全代码”，即使这是一个纯粹的本地应用程序并且脚本是安全的。

该异常显示在 jquery 标头中。

```
 append: function () {
        return this.domManip(arguments, true, function (elem) {
            if (this.nodeType === 1 || this.nodeType === 11) {
                this.appendChild(elem); //<-----------------------------
            }
        });
    }, 
```

我试过使用`MSApp.execUnsafeLocalFunction(this.appendChild(elem));`，我得到一个例外说..

```
Unhandled exception at line 5842, column 21 in ms-appx://664ace5f-4774-4928-bc94-ad4650a1ede1/js/jquery-1.8.2.js 
```

0x80070057 - JavaScript 运行时错误：参数无效。

我不确定从哪里开始编辑/修改这些库文件以允许“不安全”注入 html/scripts 以允许我的应用程序像在 iOS/Android 上一样运行。

任何想法/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:42:48.030

对 JQGrid 来说没问题。使其工作的关键如下。

在您需要更改的 JQUERY 代码中...我得到了帮助...[使用 jQuery 构建 Windows 8 Metro 应用程序](https://stackoverflow.com/questions/11947858/building-a-windows-8-metro-app-with-jquery) 我将答案留在这里，因为它也应该指导那些在此处寻找 JQGrid/JQPlot 问题的人。

```
append: function () {
            return this.domManip(arguments, true, function (elem) {
                if (this.nodeType === 1 || this.nodeType === 11) {
                    this.appendChild(elem);
                }
            });
        },        

before: function () {
            if (!isDisconnected(this[0])) {
                return this.domManip(arguments, false, function (elem) {
                    this.parentNode.insertBefore(elem, this);
                });
            } 
```

到以下... 注意只有在您知道代码是安全的情况下才这样做。

```
 append: function () {
            return this.domManip(arguments, true, function (elem) {
                if (this.nodeType === 1 || this.nodeType === 11) {
                    var self = this;
                    MSApp.execUnsafeLocalFunction(function () { self.appendChild(elem) });
                }
            });
        },

      before: function () {
            if (!isDisconnected(this[0])) {
                return this.domManip(arguments, false, function (elem) {
                    var self = this;
                    MSApp.execUnsafeLocalFunction(function () { self.parentNode.insertBefore(elem, self)});
                });
            } 
```

第二注。我仍然在我的日志中收到 HTML 错误，但是它可以正确加载。HTML错误看起来像..

```
HTML1701: Unable to add dynamic content '<table><thead><tr class='ui-jqgrid-labels' role='rowheader'><th id='momMeasurementTable_Record' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Record' class='ui-th-div-ie'>Record<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_Label' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Label' class='ui-th-div-ie'>Label<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_Date' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Date' class='ui-th-div-ie'>Date<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_Time' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Time' class='ui-th-div-ie'>Time<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_MaxCurrent' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_MaxCurrent' class='ui-th-div-ie'>Max Current (A)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_MinCurrent' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_MinCurrent' class='ui-th-div-ie'>Min Current (A)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_MinCurrentLim' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_MinCurrentLim' class='ui-th-div-ie'>Min Current Limit (A)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_Resistance' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_Resistance' class='ui-th-div-ie'>Resistance (mOhm)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_PFUpperLimit' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_PFUpperLimit' class='ui-th-div-ie'>Pass/Fail Upper Limit (mOhm)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th><th id='momMeasurementTable_MeasurementTime' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'><div id='jqgh_momMeasurementTable_MeasurementTime' class='ui-th-div-ie'>Measurement Time (ms)<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr'></span></span></div></th></tr></thead></table>'. A script attempted to inject dynamic content, or elements previously modified dynamically, that might be unsafe. For example, using the innerHTML property to add script or malformed HTML will generate this exception. Use the toStaticHTML method to filter dynamic content, or explicitly create elements and attributes with a method such as createElement.  For more information, see http://go.microsoft.com/fwlink/?LinkID=247104. 
```

文件：关于：空白

# mysql - 对不同行的字段求和

> ID：14264475
> 
> 赞同：0
> 
> 时间：2013-01-10T18:09:30.163
> 
> 标签：mysql

我在使用 mySQL 查询时遇到问题。

我们有一个表格来跟踪用户点击的次数。它是一个整数字段，每次单击都会增加 1。

架构：

```
+------------+--------------+------+-----+
| Field      | Type         | Null | Key | 
+------------+--------------+------+-----+
| id         | int(11)      | NO   | PRI | 
| arrival_id | int(11)      | NO   |     |
| clickouts  | int(11)      | NO   |     | 
+------------+--------------+------+-----+ 
```

示例数据：

```
id        arrival_id        clickouts
 5            22                0
 6            23                1
 7            24                7 
```

如果我想确定产生至少一次点击的到达百分比，我可以编写以下查询。（注意 - 不是每个到达都有点击，因此左加入）：

```
SELECT SUM(click_tracker.clickouts > 0)/COUNT(DISTINCT arrivals.id) 
FROM arrivals 
LEFT JOIN click_tracker ON arrivals.id = click_tracker.arrival_id; 
```

当我在同一查询期间还 LEFT JOIN 到达另一个表（不是 click_tracker）时，问题就出现了。

我有另一个名为 ads 的表，它跟踪用户将看到的各种类型的广告。广告与到达相关联，到达可以有许多广告。架构如下：

```
+------------+--------------+------+-----+
| Field      | Type         | Null | Key | 
+------------+--------------+------+-----+
| id         | int(11)      | NO   | PRI | 
| arrival_id | int(11)      | NO   |     |
| ad_type    | varchar(255) | NO   |     | 
+------------+--------------+------+-----+ 
```

现在，我想找到 ad_type = "ZXY" 的到达百分比以及产生至少一次点击的到达百分比（无论 ad_type 是什么）。执行以下操作将不起作用：

```
SELECT COUNT(DISTINCT advertisements.id)/COUNT(DISTINCT arrivals.id) AS ad_pct,
SUM(click_tracker.clickouts > 0)/COUNT(DISTINCT arrivals.id) AS click_pct
FROM arrivals
LEFT JOIN advertisements ON arrivals.id = advertisements.arrival_id
LEFT JOIN click_tracker ON arrivals.id = click_tracker.arrival_id 
```

广告表的 LEFT JOIN 创建一个结果集重复到达 id。因此，当我随后 LEFT JOIN 到 click_tracker 表时，我也会得到重复的 click_tracker id。

我需要一种方法来对不同的 click_tracker 行进行 SUM(click_tracker.clickouts > 0) 。我尝试了 SUM(DISTINCT click_tracker.clickouts > 0) 但这并没有给我正确的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:39:01.707

我不想这么说，但这两个计算是完全独立的，我认为您需要为它们执行两个查询。它们在这里（以及我使用的数据的[sqlfiddle ）：](http://sqlfiddle.com/#!2/8fc9f/13)

到达百分比`ad_type`：

```
SELECT
  ad_type,
  (COUNT(arrival_id) / x.total) as ad_pct
  FROM advertisements, 
       (SELECT COUNT(id) AS total FROM arrivals) x
  GROUP BY ad_type; 
```

（或者您可以将 更改为单个 ad_type 的子句。`GROUP BY`）`WHERE`

至少点击一次的到达率：

```
SELECT
  (COUNT(id) / x.total) AS click_pct
  FROM click_tracker,
       (SELECT COUNT(id) AS total FROM arrivals) x
  WHERE click_tracker.clickouts > 0; 
```

# jquery - Mobile JQuery Slider 的步进增量不起作用

> ID：14264479
> 
> 赞同：0
> 
> 时间：2013-01-10T18:09:44.010
> 
> 标签：jquery, html, jquery-mobile, jquery-ui-slider

我正在使用 MJQuery 滑块。当我使用 Mobile JQuery 时，滑块中的步进增量不起作用。但是，它适用于普通版本 这是不使用移动 JQuery 的页面版本。在这种情况下，您不能将滑块控件定位在范围内的任何点。

[http://users.ecs.soton.ac.uk/smaj08r/vidtest/indexNotMJQ.html](http://users.ecs.soton.ac.uk/smaj08r/vidtest/indexNotMJQ.html)

代码：

```
<html>
<script src="jquery-1.8.3.js"></script>
 </head>
<body>
This is slider without MJQuery
 <input type="range" name="slider-step" id="slider-step" value="2" min="1" max="4" step="1" />
</body>
</html> 
```

在以下版本中，我使用的是 Mobile JQuery，而滑块控件中的 Step Increment 不起作用。您可以将滑块定位在两个增量之间的任何中间点。

[http://users.ecs.soton.ac.uk/smaj08r/vidtest/indexMJQ.html](http://users.ecs.soton.ac.uk/smaj08r/vidtest/indexMJQ.html)

代码：

```
 <html><head>
 <script src="jquery-1.8.3.js"></script>
   <meta name="viewport" content="width=device-width, initial-scale=1"> 
   <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
   <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">     
   </script>
</head><body>
<div data-role="page">
    <div data-role="content">
        <input type="range" name="slider-step" id="slider-step" value="20" min="0" max="100" step="20" />
 </div>
 </div>

  </body>
 </html> 
```

在移动 JQuery 版本中，滑块可以定位在错误范围内的任何点。我不知道为什么？请帮忙。非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:01:57.700

您缺少必需的 jQuery Mobile 标记：

```
<div data-role="page">
    <div data-role="content">
        <input type="range" name="slider-step"
            id="slider-step" value="2" min="1" max="4" step="1" />
    </div>
</div> 
```

滑块看起来不错。该步骤限制了值，而不是滑块。一步`1`有点没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:48:19.137

当前 1.2 版本的 jQuery Mobile 并非如此。“测试”文档就是这样。如果他们没有出现在 Google 搜索中，那就太好了。您可以在此处找到实时文档：

jquerymobile.com/demos/1.2.0/docs/forms/slider

请注意，滑块的行为与您描述的不同。– 安德莱尔

使用 jquery mobile 的滑块的实际行为与此不同。

jquerymobile.com/test/docs/forms/slider/index.html

# c# - 具有静态和动态列的清晰网格

> ID：14264483
> 
> 赞同：0
> 
> 时间：2013-01-10T18:10:14.403
> 
> 标签：c#, asp.net, gridview

我有一个网格，我通过 aspx 页面将几列添加到模板字段中。

```
 <asp:TemplateField>
          <ItemTemplate>
             <asp:LinkButton ID="lnkBtnDown" runat="server" CommandName="Download" Text="Download"></asp:LinkButton>
              <asp:LinkButton ID="LnkBtnMan" runat="server" CommandName="Manual" Text="Manual"
                            Style="margin-left: 10px"></asp:LinkButton>
           </ItemTemplate>
       </asp:TemplateField> 
```

网格显示来自表格的搜索结果，并且有几列我必须隐藏，例如文件名列等，但我确实需要数据......所以我使用 css 样式隐藏它们。

```
 private void generateSearchGrid(DataTable dt)
    {
        if (dt == null || dt.Rows.Count == 0)
            return;
        dgvSearchResults.DataSource = dt;
        dgvSearchResults.AutoGenerateColumns = false;

        BoundField bfName = new BoundField();
        bfName.DataField = dt.Columns["OsmProjectName"].ToString();
        bfName.HeaderText = "Project Name";

        BoundField bfProjID = new BoundField();
        bfProjID.DataField = dt.Columns["OsmProjectID"].ToString();
        bfProjID.HeaderText = "ID";

        BoundField bfProjFile = new BoundField();
        bfProjFile.DataField = dt.Columns["OsmProjectFile"].ToString();
        bfProjFile.HeaderText = "Project File";

        BoundField bfProjManual = new BoundField();
        bfProjManual.DataField = dt.Columns["OsmProjectManual"].ToString();
        bfProjManual.HeaderText = "Project Manual";

        BoundField bfProjType = new BoundField();
        bfProjType.DataField = dt.Columns["OsmProjectType"].ToString();
        bfProjType.HeaderText = "Project Type";

        dgvSearchResults.Columns.Add(bfProjID);
        dgvSearchResults.Columns.Add(bfName);
        dgvSearchResults.Columns.Add(bfProjType);

        // WARNING : Keep these two at the end all the time in the same order.
        dgvSearchResults.Columns.Add(bfProjFile);
        dgvSearchResults.Columns.Add(bfProjManual);

        dgvSearchResults.DataBind();

        // Assigning a css where display has been set to none.
        bfProjManual.HeaderStyle.CssClass = "hiddenCols";
        bfProjID.HeaderStyle.CssClass = "hiddenCols";
        bfProjFile.HeaderStyle.CssClass = "hiddenCols";
        bfProjManual.ItemStyle.CssClass = "hiddenCols";
        bfProjID.ItemStyle.CssClass = "hiddenCols";
        bfProjFile.ItemStyle.CssClass = "hiddenCols";
    } 
```

在每个搜索按钮单击事件开始时，我刷新网格，

```
 dgvSearchResults.DataSource = null;
        dgvSearchResults.DataBind();   
        dgvSearchResults.Columns.Clear(); 
```

但这会清除所有列，包括我在 aspx 页面中绑定的列……正如预期的那样。如果我不清除它们，搜索结果中的列就会不断堆积。

有没有办法只清除动态绑定的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:35:32.513

一种选择是[禁用](http://msdn.microsoft.com/en-us/library/system.web.ui.control.enableviewstate.aspx)*dgvSearchResults* GridView的视图状态。在这种情况下，每次回发，您都需要将*dgvSearchResults*与数据绑定。如果您不绑定，动态添加的列将被自动删除（不持久）。

这会发生，因为在您的情况下，动态添加的数据（以及列）被保留回发到隐藏元素（视图状态）中的回发。

所以这将变成：

```
 private void Page_Load(object sender, EventArgs e)
   {
      if(IsPostBack) // If postback, then bind GridView with previous search result
      {
         dgvSearchResults.DataSource = Session["dgvSearchResultsData"];
         dgvSearchResults.DataBind();
      }
   }

   private void generateSearchGrid(DataTable dt)
   {
       // ...
       Session["dgvSearchResultsData"] = dt; // Save result into session
       dgvSearchResults.DataSource = dt;
       // ...
   } 
```

*ASPX：*

```
<asp:GridView EnableViewState="false"> ... </GridView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:18:40.673

如果您知道在 aspx 页面中添加了多少以及动态添加了多少，则可以执行此操作。

```
//if total added in aspx page is 2, first one is in index 0, second in index 1

dgvSearchResults.Columns.RemoveAt(2); // this will remove the 3rd column
dgvSearchResults.Columns.RemoveAt(3); // this will remove the 4th columns
// you can continue till column x 
```

# python - Django：使用 cursor.execute() 时为模板格式化原始查询

> ID：14264485
> 
> 赞同：1
> 
> 时间：2013-01-10T18:10:21.797
> 
> 标签：python, django, django-templates

我需要执行原始查询：

```
 cursor.execute("select id, name from people")
 results = cursor.fetchall() 
```

如何转换它以便可以在 Django 模板中使用它：

```
{% for person in results %}
  {{person.name}}
{% endfor %} 
```

通常，我会使用该模型：

```
results = people.objects.raw("select id, name from people") 
```

无论我在查询中使用多少其他模型/表，这都有效。

但是，该方法要求我包含人员模型的主 ID。这次我不能这样做，因为 sql 实际上是一个`group by`查询，并且不能包含 id。

我绝对想使用原始 sql，而不是其他类似“group by”的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:34:30.743

这行得通。将元组的元组转换为字典列表，并从 cursor.description 中获取字段描述。可以做成一个小功能。并且可能有一些聪明的 lamdba 东西可以使它更短。

```
 cursor = connection.cursor()
        cursor.execute(my_select)
        results = cursor.fetchall()

        x = cursor.description
        resultsList = []   
        for r in results:
            i = 0
            d = {}
            while i < len(x):
                d[x[i][0]] = r[i]
                i = i+1
            resultsList.append(d)

        return render_to_response(my_template, {"results":resultsList}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:46:31.203

如果您坚持需要使用 MySQLdb 游标执行原始 sql 查询，则创建一个字典游标[DictCursor](http://www.kitebird.com/articles/pydbapi.html)，以便可以按名称而不是按位置访问列值。

```
 cursor.close ()
 cursor = conn.cursor (MySQLdb.cursors.DictCursor)
 cursor.execute ("SELECT id, name FROM people")
 results = cursor.fetchall ()
 for row in results:
     print "%s, %s" % (row["id"], row["name"]) 
```

使用`DictCursor`您不需要做任何事情，只需将其传递给模板并以与 django 查询集相同的方式使用它。

# r - 排序和减去特定值

> ID：14264487
> 
> 赞同：1
> 
> 时间：2013-01-10T16:44:13.920
> 
> 标签：r

我有两个矩阵，矩阵1：

```
mot A  B  C  D  E  
A   14 2  3  4  1  
B   2  21 2  1  8  
C   1  2  35 1  2  
D   2  4  4  28 1  
E   2  4  3  3  51 
```

和矩阵2：

```
A 12
B 20
C 30
D 25
E 40 
```

在矩阵 1 中，最高值始终沿列和行标签相同的主对角线。对于这些值中的每一个，我想从矩阵 2 中减去相应的值。例如，在矩阵 1 中，C 行 C 列的条目是 35；我想从中减去矩阵 2 (30) 中 C 的条目。

有没有一种简单的方法可以做到这一点？我考虑过对每一列进行 1 乘 1 排序，然后仅从最高点击中提取值。但是，这需要自动化，因为文件实际上有 700 列和行。

可能最好的方法是在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:20:42.980

如果您的矩阵是`m1`并且`m2`您的要求很简单：

```
diag(m1) - m2[,1] 
```

`diag()`为您提供矩阵的对角线，并将矩阵`m2[,1]`的第一列也是唯一一列作为向量返回。不涉及循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:17:47.837

假设文件 f1 中的矩阵，文件 f2 中的向量和文件 script.py 中的以下脚本：

```
#!/usr/bin/env python

import sys

matrix = []
vector = []

for line in open(sys.argv[1]):
    matrix.append(line.strip().split())
for line in open(sys.argv[2]):
    vector.append(line.strip().split())

for i in range(1, len(matrix)):
    matrix[i][i] = int(matrix[i][i])-int(vector[i-1][1])
for i in range(0, len(matrix)):
    for j in matrix[i]:
        print j,
    print 
```

跑：

```
$ python script.py f1 f2 
```

# c++ - 为什么这个随机数生成器产生的序列总是一样的？

> ID：14264492
> 
> 赞同：1
> 
> 时间：2013-01-10T18:10:50.753
> 
> 标签：c++, random, c++11

> **可能重复：**
> [为什么我总是用 rand() 得到相同的随机数序列？](https://stackoverflow.com/questions/1108780/why-do-i-always-get-the-same-sequence-of-random-numbers-with-rand)

我尝试为给定范围内的随机整数实现以下生成器类：

```
class RandomInteger {

protected:

    std::default_random_engine randomEngine;
    std::uniform_int_distribution<> distribution;

public:

    RandomInteger(int64_t lower, int64_t upper);

    virtual ~RandomInteger();

    virtual int64_t generate();
};

RandomInteger::RandomInteger(int64_t lower, int64_t upper) : distribution(lower, upper) {

}

RandomInteger::~RandomInteger() {
    // TODO Auto-generated destructor stub
}

int64_t RandomInteger::generate() {
    int64_t i = this->distribution(this->randomEngine);
    return i;
} 
```

它产生范围内的整数，但它产生的值序列每次都是相同的 - 不是很随机。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:14:40.437

一般来说，伪随机生成器需要一个种子。

如果您从不更改种子，您将始终获得相同的伪随机输出/序列。

编辑：我坚持使用**伪随机**这个词（有时是*伪混沌*）而不是滥用`random`

[编辑2：在另一个问题中](https://stackoverflow.com/questions/8389989/c-equivalent-of-new-randomseed-in-c-sharp)应该有 c++11 解决您的问题（查看@R. Martinho Fernandes 的回答）

# algorithm - OpenCV计算图像的平方断言失败错误

> ID：14264493
> 
> 赞同：1
> 
> 时间：2013-01-10T18:10:51.207
> 
> 标签：algorithm, image-processing, opencv, face-recognition

我正在尝试通过使用[平方差](http://en.wikipedia.org/wiki/Mean_squared_error)之和作为误差度量[（图像配准）](http://research.microsoft.com/pubs/70092/tr-2004-92.pdf)将面部图像与参考面部图像对齐。基本上，尝试实现 cvMatchTemplate 函数的类似功能（但是我没有模板图像，而是常见的面部表情）。尝试对差异图像求平方时，我收到断言失败错误：-215。我的问题正是：我是否必须使用矩阵乘法运算符 A*A 或每元素乘法 A.mul(A) 来获得差异图像的平方？（目前我使用 A*A）

```
//Start search
Mat result;
for(int i= 0; i<15; i++){
    for(int j= 0; j<15; j++){
        xTrans = i; //Translation on x-Axis
        yTrans = j; //Translation on y-Axis

        //Initialize translation matrix
        double m[2][3] = {{1,0,xTrans}, {0,1,yTrans}};
        Mat map = Mat(2,3,CV_64F, m);

        //Get the transformed image
        warpAffine(displaced, aligned, map, aligned.size());
        //Calculate the sum of squared differences
        absdiff(reference,aligned,result);
        try{
            squared = result*result; //Error line
        } catch (Exception const & e){
            cerr<<"OpenCV exception: "<<e.what()<<std::endl;
        }
        SSD = sum(squared)[0]; //Sum of squared difference
        cout <<xTrans << "," << yTrans << ","<<SSD<<endl;
    }
} 
```

这是错误：

```
OpenCV Error: Assertion failed (type == B.type() && (type == CV_32FC1 || type ==
CV_64FC1 || type == CV_32FC2 || type == CV_64FC2)) in unknown function, file ..
\..\..\src\opencv\modules\core\src\matmul.cpp, line 711
OpenCV exception: ..\..\..\src\opencv\modules\core\src\matmul.cpp:711: error: (-
215) type == B.type() && (type == CV_32FC1 || type == CV_64FC1 || type == CV_32F
C2 || type == CV_64FC2) 
```

两个图像具有相同的大小和类型，因为 warpAffine 工作正常。任何关于为什么会发生此错误或我的实施正确性的建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:08:17.300

您想使用逐元素乘法。

```
squared = result.mul(result); 
```

由于看起来您使用的是浮点图像，因此您不必担心饱和度。

逐元素乘法将两个矩阵的单个元素相乘（因此得名），并且要求矩阵具有相同的大小。矩阵中的每个元素都`result`代表像素值的差异。每个像素值都独立于图像中的任何其他像素值，因此逐元素乘法将产生正确的结果。

[矩阵乘法](http://en.wikipedia.org/wiki/Matrix_multiplication)与元素乘法有很大不同。一个常见的应用是在计算机图形和计算机视觉中应用变换。矩阵乘法在应用于数学构造时是有意义的，但在应用于图像时则不然。不要以为一定要用矩阵乘法，因为`cv::Mat`也是用来存储图像数据的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:29:00.263

我猜这行的问题

```
Mat map = Mat(2,3,CV_64F, m); 
```

[在 openCV2.3 中使用卷积方法在高斯模糊上](https://stackoverflow.com/questions/7599085/error-on-gaussian-blur-with-convolution-method-in-opencv2-3)尝试此链接 错误

# php - 从 php 发送电子邮件

> ID：14264494
> 
> 赞同：1
> 
> 时间：2013-01-10T18:11:00.800
> 
> 标签：php, email

我正在使用以下 php 代码，但我没有收到任何邮件

```
function Mail($to, $subject, $message) 
{
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers .= 'From: MYAPP! <myYahooMail>' . "\r\n";

    // Mail it
    if(!mail($to, $subject, $message, $headers)) {
        throw new Exception('There was a problem trying to send an email.');
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:12:42.763

你得到的错误是`Fatal error: Cannot redeclare mail().`这是因为 PHP 有一个内置的[邮件](http://php.net/manual/en/function.mail.php)功能。将您的功能命名为其他名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:26:54.933

您可能需要编辑 php.ini (xampp\php\php.ini)。搜索“邮件功能”并根据您的服务器规格更改这些参数。如果您不是主机，您可以通过 htaccess 执行此操作。

```
SMTP = "Your server smtp address here"
smtp_port = 587 
```

# php - 强制下载脚本和 readfile：为什么 readfile 输出我的 html 页面？

> ID：14264497
> 
> 赞同：4
> 
> 时间：2013-01-10T18:11:24.480
> 
> 标签：php, stream, readfile, output

我正在尝试为 webroot 之外的用户发送文件（附件）。我制作了强制下载脚本，它在标题中发送文件并在流中输出。这很好用，直到我调用 readfile （也可能是标题设置），它输出一个包含我的 html 源代码（这个特定页面的）一半的文件。我做了 file_get_contents() 并且文件包含正确的字符串：“test”。这里有什么问题？

```
<?php   
//The path where the files are stored
$file_path = "";
if(isset($_GET['file'])) {
    $file_path = $_GET['file'];
}
else {
    header('HTTP/1.0 404 Not Found');
    die('File not found!');
}

$file_name = basename($_GET['file']);

//Make sure the file exists
if(!file_exists($file_path) && !is_file($file_name)) {
    header('HTTP/1.0 404 Not Found');
    die('File not found!');
}

//Initialize the actual file.
$file = $file_path;

//Notice: Remember to set fifo extension in php.ini
//Windows users must include the bundled php_fileinfo.dll DLL file in php.ini to enable this extension.
$finfo = new finfo(FILEINFO_MIME);
$mime = "";
if(function_exists("finfo_open")) {
    $finfo = finfo_open(FILEINFO_MIME);
    $mime = finfo_file($finfo, $file);  
}
// Provide a default type in case all else fails
else {
    $mime = "application/octet-stream";
}

//Set the appropriate content-type and provide the content-length.
header('Content-Description: File Transfer');
header('Content-Transfer-Encoding: binary');
header('Content-type: '.$mime);
header('Content-Disposition: attachment; filename='.$file_name);
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: '.filesize($file));

//Print the image data
readfile($file);
exit;
?> 
```

$file 称为 test.txt 并包含字符串“test”。哑剧/内容类型是正确的。

然而，这个脚本的输出是 html 源代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T18:35:16.703

从文档中，他们在（强制下载）[`readfile`](http://php.net/readfile)之前拨打了两个电话： & 。我的假设是他们调用这些以确保已发送标头并且客户端了解即将到来的内容。`readfile``ob_clean()``flush()`

我建议在其中添加它们，它应该可以工作。

# c# - 将一个实体映射到多个表

> ID：14264507
> 
> 赞同：2
> 
> 时间：2013-01-10T18:11:49.097
> 
> 标签：c#, nhibernate, fluent

我有一个与 Fluent NHibernate 相关的问题。我无法描述将一个实体映射到多个表的架构。数据库的结构如下：

```
Create table CeTypes (Id int not null PRIMARY KEY, Name nvarchar(100) not null)
Create table CeValues (Id int not null PRIMARY KEY, Name nvarchar(100) not null)
Create table Ces (Id int not null PRIMARY KEY, CeType_id int not null FOREIGN KEY REFERENCES CeTypes(Id), CeValue_id int not null FOREIGN KEY REFERENCES CeTypes(Id)) 
```

有以下实体：

```
public class Ce
{
     public virtual int Id { get; set; }
     public virtual string Type { get; set; }
     public virtual string Value { get; set; }
} 
```

CeType、CeValue 实体在域中并没有。我不知道如何描述映射 Ce 实体。

试图描述：

```
public class CeMap : ClassMap<Ce>
{
    public CeMap()
    {
        Table("Ces");
        Id(c => c.Id);

        Join("CeTypes", m => m.Map(ce => ce.Type).Column("Name"));
        Join("CeValues", m => m.Map(ce => ce.Value).Column("Name"));
    }
} 
```

但是对于这样的方案 CeType，CeValue 表应该有一个字段 Ce_id。在当前数据库结构下如何描述方案映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:11:16.650

当我第一次开始使用 nHibernate 时，我尝试做同样的事情，但找不到方法。我实际上不相信您可以将多个表映射到单个对象。通常每个表都有一个实体。每个实体都将映射到它们的表，并且它们之间会有引用/具有许多链接。

您可能会发现，从长远来看，每个表拥有一个实体也更好，因为它允许更简单地映射到数据库。

# .htaccess - 重写规则按位置而不是名称删除目录

> ID：14264511
> 
> 赞同：0
> 
> 时间：2013-01-10T18:12:05.127
> 
> 标签：.htaccess, rewrite

我想要网址

```
www.example.com/dir1/dir2/current-file.html 
```

...指向...

```
www.example.com/dir1/current-file.html 
```

...在哪里...

`current-file.html`并且`dir2`是可变的。（`dir1`不可变）

这可以通过 htaccess 文件实现吗？

**编辑**

目前我有：

```
Options +FollowSymLinks
RewriteEngine On  
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^.*$ ../dir1/current-file.html 
```

但这对文件进行了硬编码，并假设`current-file`在`dir2`. 如果可能，我宁愿`dir2`按 URL 中的位置定位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:35:22.840

试试这样：

```
RewriteRule ^dir1/[^/]/(.+)\.html /dir1/$1.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:56:06.637

这是一个选项：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} dir1/[^/]+/([^/]+)/?   [NC]
RewriteRule .* dir1/%1    [R=301,L,QSA] 
```

它将永久重定向：

`http:www.example.com/dir1/anyfolder/anyfile`

到：

`http:www.example.com/dir1/anyfile`

# hibernate - 来自 Hibernate Criteria API 的 LIKE 限制

> ID：14264513
> 
> 赞同：14
> 
> 时间：2013-01-10T18:12:10.560
> 
> 标签：hibernate, criteria

我正在尝试使用[`like()`](https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/criterion/Restrictions.html#like-java.lang.String-java.lang.Object-)带有部分关键字的 Hibernate 的限制条件来查询 PostgreSQL 数据库：

```
Criterion c1 = Restrictions.like("stateName", "Virg*");
cri.add(c1);

return cri.list(); 
```

它不返回任何内容，而是`Restrictions.like("stateName", "Virginia");`返回正确的记录。如何在 Hibernate 中使用部分*类似限制？*

编辑：
通过执行以下操作使其工作：

```
public static List<Object> createQueryStringByRegex(Criteria cri, Parameters p) {
    String value = (String) p.value;
    if (value.contains("*")) {
        value = value.replace("*", "%");
    } else {
        value += "%";
    }
    // System.out.println("Value: "+value);
    Criterion c1 = Restrictions.ilike(p.property, value);
    cri.add(c1);

    return cri.list();

} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-10T18:20:06.507

使用枚举[MatchMode](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/criterion/MatchMode.html)来帮助您：

```
Criterion c1 = Restrictions.like("stateName", "Virg", MatchMode.START); 
```

不要使用任何特殊字符，例如 *. 如果你想要一个不区分大小写的like，请使用[ilike](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/criterion/Restrictions.html#ilike%28java.lang.String,%20java.lang.String,%20org.hibernate.criterion.MatchMode%29)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-10T18:17:51.940

限制应使用百分号。

```
Criterion c1 = Restrictions.like("stateName", "Virg%"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-05T10:15:54.217

```
##Use MatchMode.ANYWHERE##
DetachedCriteria crit = DetachedCriteria.forClass(MyClass.class);
 crit.add(Restrictions.like("prop1", "matchValue", MatchMode.ANYWHERE));
 return getHibernateTemplate().findByCriteria(crit); 
```

它相当于：

```
select * 
    from Table_Name 
    where prop1 like "%matchValue%"; 
```

# ios - 在 UIToolbar 上使用 UIBarButtonItem 居中 UIButton 图像

> ID：14264515
> 
> 赞同：2
> 
> 时间：2013-01-10T18:12:29.967
> 
> 标签：ios, objective-c, xcode, uibutton, uibarbuttonitem

我正在尝试（使用 Interface Builder 的 XCode 中的所有内容）创建一个带有图像的 UIButton，并将其添加到 UIToolbar，这使其成为 UIBarButtonItem（单击两次时它显示 UIButton 属性）。

我有一个`image@2x.png`大小的图像`64x88`（高度是`88`，因为在 Retina 中它是工具栏的高度）。我对非视网膜屏幕不感兴趣。我将此图像添加到属性中的 UIButton 设置`Mode`中（或者，在这里应该无关紧要；也尝试了两者）。 将其大小设置为（在构建器中为 44 高度）。然后，将其拖到.`View``Center``Aspect Fit`
`32x44``UIToolbar`

现在，我想更改按钮的宽度以使其更大，因为我想给用户更多的空间来点击，另外，我为此计划了工具栏背景。我希望此按钮上的图像保持不变，但居中。但是，当我尝试调整 UIBarButtonItem 的大小时，它实际上会缩放图像，无论`Mode`设置什么。

这就是发生的事情（我正在展示一个实际的拖动过程）：

![](../Images/a53ea9deb1ca185ab05c2189a7df10fb.png)

但是，如果我将图像**实际**尺寸更改为高度 44，则效果很好。但是 44 的高度在 Retina 设备上看起来很丑，所以，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:24:54.457

我见过这种情况。为了论证起见，创建两个图像，image.png和image@2x.png，设置按钮的图像时，在Xcode中选择image.png。

* * *

或者，您可以创建`UIView`-based`UIBarButtonItem`并拥有 a`UIImageView`和 a `UIButton`。这样，您可以更精确地控制图像大小。

# java - 通过 Java App 调用终端并运行命令

> ID：14264516
> 
> 赞同：2
> 
> 时间：2013-01-10T18:12:34.010
> 
> 标签：java, linux, shell, process, terminal

我正在使用以下代码从我的 Java 应用程序运行命令：

```
String cmd[] = {"sh","-c", "sudo chmod 777 -R " + path};
Terminal.runCommand(cmd); 
```

我想执行 .jar 只需单击它并选择“Open with..”->“Java”；

问题是由于“sudo”命令，应用程序一直在寻找密码，但没有调用终端，用户无法提供密码..

那么，我怎么能调用上面的 coomand 和一个终端来让用户有机会插入密码并且应用程序最终继续运行呢？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:29:30.280

这是一个 sudo 问题，而不是 Java 问题；sudo 以 root 身份执行操作。您的进程没有 root 权限，因此 sudo 需要对人类进行身份验证。这是一个特性，而不是一个错误。系统不应该允许您运行 root 命令。

一种选择可能是使用`gksu`它，默认情况下在某些发行版上提供。它的工作原理类似，但会在 GUI 中而不是在（在这种情况下不存在的）终端上弹出密码对话框。

另一个可能是简单地以 root 身份运行您的 Java 进程，这可能会带来所有安全隐患。在某些情况下，这可能是一个有效的选择，但要小心。

或者您可以查看 sudo 和 sudoers 的手册页——可以将帐户配置为不需要密码，并在需要密码时将其限制为特定命令。

# javascript - 使用 event.stopPropagation()

> ID：14264520
> 
> 赞同：0
> 
> 时间：2013-01-10T18:12:46.033
> 
> 标签：javascript, jquery

在用户必须多次单击/使用键的游戏中，

> 在我知道冒泡无用的所有事件处理程序中使用 event.stopPropagation() 有什么好处吗？

假设我有一个绑定了点击事件的 div，

```
<div id="mydiv">CLICK</div>
$('#mydiv').click(function(){...}); 
```

如果我单击它，此事件将传播到此 div 的所有祖先元素（例如 body/html/document/window）。因此，只是想知道立即停止事件传播是否会更好、相同或最差。

事实上，我不知道 javascript 引擎如何在内部处理绑定（或不绑定）到元素的事件，如果这可以作为侦听器或什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:16:26.247

这有点笼统，但是要回答您的直接问题，除非您需要停止传播，否则没有理由这样做。传播不会阻碍游戏的效率，它有太多的事件绑定。考虑在父元素上使用通用绑定，然后处理事件的实际目标以确定要采取的操作。

# php - PHP Simple HTML DOM Parser：仅选择具有多个类的 DIV

> ID：14264525
> 
> 赞同：10
> 
> 时间：2013-01-10T18:12:53.353
> 
> 标签：php, class, parsing, html, simple-html-dom

我正在疯狂地寻找，但没有找到解决方案。问题很简单。

假设我有 3 个 DIV：

```
<div class="class1">
  <div class="subclass"> TEXT1 </div>
</div>

<div class="class2">
  <div class="subclass"> TEXT2 </div>
</div>

<div class="class1 class2">
  <div class="subclass"> TEXT3 </div>
</div> 
```

所以，很简单。我只想找到同时具有 class1 和 class2 的 TEXT3。使用简单的 HTML DOM 解析器，我似乎无法让它工作。

这是我尝试过的：

```
foreach($html->find("[class=class1], [class=class2]") as $item) {
$items[] =  $item->find('.subclass', 0)->plaintext;
} 
```

问题是，随着

```
find("[class=class1], [class=class2]") 
```

它正在找到所有这些，因为逗号就像一个 OR，如果我离开逗号，它会在 class1 中寻找嵌套的 class2。我只是在寻找一个和...

# **编辑**

感谢 19greg96 我发现

```
div[class=class1 class2] 
```

有效，问题是它按顺序查找这两个。假设我有

```
<div class="class1 class2">
  <div class="subclass"> TEXT3 </div>
</div> 
```

那么它可以工作，如果我有

```
<div class="class1 class2 class3">
  <div class="subclass"> TEXT3 </div>
</div> 
```

当我放一个星号时它会起作用，因为它会查找子字符串：

```
div[class*=class1 class2] 
```

**问题**

我只知道 class1 和 class3 在那里，但也许还有其他的，而且是随机的。那仍然行不通。知道如何以任何随机顺序查找 A 和 B 吗？以便

```
div[class=class1 class3] 
```

与那个例子一起工作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-10T18:14:59.233

EDIT2：由于这是 dom 解析器中的一个错误（在[1.5 版](https://sourceforge.net/projects/simplehtmldom/files/simplehtmldom/1.5/)上测试），因此没有简单的方法可以做到这一点。我能想到的解决方案：

```
$find = $html->find(".class1");
$ret = array();
foreach ($find as $element) {
    if (strpos($element->class, 'class3') !== false) {
        $ret[] = $element;
    }
}
$find = $ret; 
```

基本上，您会找到所有具有类 1 的元素，而不是遍历这些元素以找到具有类 2 的元素（在本例中为类 3）。

* * *

*上一个答案：*

简单的答案（应该根据 html 规范工作）：

```
find(".class1.class2") 
```

这将查找同时具有 class1 和 class2 的任何类型的元素（div、img、a 等）。如果要指定要匹配的元素类型，请将其添加到开头，不要使用`.`like：

```
find("div.class1.class2") 
```

如果在两个指定的类之间有空格，它将匹配具有类的元素或嵌套在具有第一个类的元素中的元素：

```
find(".class1 .class2") 
```

将匹配

```
<div class="class1">
  <div class="class2">this will be returned</div>
</div> 
```

或者

```
<div class="class1 class2">this will be returned</div> 
```

编辑：我试过你的代码，发现上面的解决方案不起作用。但是，确实有效的解决方案如下：

```
$html->find("div[class=class1 class2]") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-10T12:30:29.763

你也可以试试这个：

测试.html

```
<h1 class="first second last">
    <p>Paragraph</p>
</h1> 
```

解决方案 ：

```
include "simple_html_dom.php";

$html = file_get_html('test.html');
$h1 = $html->find('h1');
foreach ($h1 as $h1) {
    $h1Class = ($h1->class);
    if($h1Class == 'first second last'){
        $item['test'] = 'success';
    }else{
        $item['test'] = 'fail';
    }
    $ar[] = $item;
}
echo "<pre>";
print_r($ar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T16:30:19.210

$html->find(div[class=classname1], div[class=classname2]);

或者

$html->find(div.classname1, div.classname2);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-30T23:46:49.073

我原以为简单的 html dom 可以让你这样做：

```
$html->find(".class1.class2") 
```

但我想不会。如果需要，您可以切换[到此库。](https://github.com/monkeysuffrage/advanced_html_dom)

# android - 将图像保存在 sdcard 上，同时在通知中显示进度

> ID：14264532
> 
> 赞同：0
> 
> 时间：2013-01-10T18:13:15.903
> 
> 标签：android, android-intent, imagedownload

我有一个图像列表，它们在服务器上，我想下载图像并将其保存在我的 SD 卡上。我还需要在顶部的通知区域中显示进度。我需要最简单的方法来做到这一点。图像将在后台下载，所以我知道我必须使用 asyncTask 但如果可能的话我想使用处理程序。另外，如果我可以通过调用默认图库来下载图像，那就太好了。当图像显示在android浏览器中时，有什么方法可以在图像上实现长按功能，我会推荐它。我愿意接受建议，请指导我。谢谢

# java - 类文字如何工作？

> ID：14264534
> 
> 赞同：1
> 
> 时间：2013-01-10T18:13:15.737
> 
> 标签：java

> **可能重复：**
> [Java 中的类文字是什么？](https://stackoverflow.com/questions/2160788/what-is-a-class-literal-in-java)

我在[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)中浏览文字时遇到了这句话：

> 最后，还有一种特殊的字面量，称为类字面量，由类型名称和附加“.class”组成；例如，`String.class`。这指的是表示类型本身的对象（Class 类型）。

这对我来说没有任何意义，即使我在此之前关注了所有其他主题。谁能用简单的语言用例子或参考资料来解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:18:26.380

类的实例[`java.lang.Class`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)表示正在运行的 Java 应用程序中的类和接口。对于应用程序中的每个类，都有一个`Class`. 语法`SomeClass.class`是一种从.`SomeClass``Class`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:18:24.263

当您想要做一些涉及类本身而不是实例的事​​情时，类文字只是一种特殊类型。

这是我常用的一些东西的简短列表（一点也不全面，但你可以得到一个好主意）

1.）反射，你想在运行时实例化一些你可能不知道的东西（也许它被存储在一个类类型的变量中）

2.）您想检查 2 个对象是否属于同一相关类型，您可以编写如下内容：`B.class.isAssignableFrom(a.getClass());`

3.) 您想列出类中的所有方法或公共变量，可能是为了文档。

还有许多其他用途，但这些是我发现自己在常用实践中使用的主要用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:15:38.423

说简单的语言：你所说的那个东西`class literal`是一个对象，它完全描述了一些`class`：它的所有方法、它的所有字段、它的所有注释、类的修饰符等等。在运行时创建该类的新实例时需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:18:21.977

简短的例子：

```
 Class x = String.class;
    System.out.println(x); 
```

您可以使用它`x`来创建它指向的类的运行时实例，或者针对它测试对象的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T19:26:34.187

它评估为引用或原始类型的包装类的类标识符。表达式 void.class 计算为 Void 类的类标识符。与'String.class'相同

# c++ - C++中整数的十进制、八进制和十六进制表示

> ID：14264535
> 
> 赞同：1
> 
> 时间：2013-01-10T18:13:18.033
> 
> 标签：c++

如何使用十进制、八进制或十六进制表示来表示整数的值？（我宁愿只`iostream`使用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:15:54.240

假设你只是想看看它们，供你自己参考。尽管将它们存储在变量中“只是一个镜头”。

```
#include <iostream>
using namespace std;

int main () {
  int n;
  n=70;
  cout << hex << n << endl;
  cout << dec << n << endl;
  cout << oct << n << endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T18:16:22.953

我希望您所说的“十进制整数”是指使用十进制表示整数的字符串。整数类型，如`int`，没有基数。或者，如果您坚持认为它们必须有一个基数，因为它们的内部表示，那么基数总是 2。整数的字符串表示，现在那些有一个基数。

```
std::istringstream iss(std::string("123"));
int i;
if (iss >> i) {
    std::cout << "read a decimal integer!\n";
    std::cout << "here it is in decimal: " << i << "\n";
    std::cout << "here it is in hex: " << std::hex << i << "\n";
    std::cout << "here it is in octal: " << std::oct << i << "\n";
} 
```

# asp.net - 将 MVC-3 升级到 MVC-4

> ID：14264537
> 
> 赞同：2
> 
> 时间：2013-01-10T18:13:24.523
> 
> 标签：asp.net, asp.net-mvc

在发布此之前，我确实阅读[了这里](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)和[SO 问题](https://stackoverflow.com/questions/8853330/converting-a-asp-net-mvc-3-project-to-mvc-4)-

我采取了一些不同的方法，这似乎更容易。

由于 MVC-3 应用程序包含很少的控制器和视图。我创建了一个新的**MVC-4 - 基本应用程序**并复制了以下文件 -

1.  控制器
2.  意见
3.  布局文件
4.  从旧 Global.asax.cs 到 App_Start/Route.Config 的路由信息

我看到这种方法的优势是

1.  无需手动引用新的 Dll。
2.  无需更新 Web.config 引用。

构建运行良好，但是在运行应用程序时出现以下错误。

> [A]System.Web.WebPages.Razor.Configuration.HostSection 无法转换为 [B]System.Web.WebPages.Razor.Configuration.HostSection。
> 
> 类型 A 源自 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 在位置 'C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\System .Web.WebPages.Razor\v4.0_1.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'。
> 
> 类型 B 源自 'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 在位置 'C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\System .Web.WebPages.Razor\v4.0_2.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'。

显然某处 MVC3 dll 被引用。但不确定在哪里？对此的任何建议都会有所帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:19:17.837

如果我不得不猜测，我会说你`~/Views/web.config`被覆盖并且仍然指向旧的剃须刀解析器（以及随后的旧配置部分）。尝试用以下内容替换该文件：

```
<?xml version="1.0"?>

<configuration>
    <configSections>
        <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
            <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
        </sectionGroup>
    </configSections>

    <system.web.webPages.razor>
        <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <pages pageBaseType="System.Web.Mvc.WebViewPage">
            <namespaces>
                <add namespace="System.Web.Mvc" />
                <add namespace="System.Web.Mvc.Ajax" />
                <add namespace="System.Web.Mvc.Html" />
                <add namespace="System.Web.Optimization" />
                <add namespace="System.Web.Routing" />
            </namespaces>
        </pages>
    </system.web.webPages.razor>

    <appSettings>
        <add key="webpages:Enabled" value="false" />
    </appSettings>

    <system.web>
        <httpHandlers>
            <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
        </httpHandlers>

        <!--
        Enabling request validation in view pages would cause validation to occur
        after the input has already been processed by the controller. By default
        MVC performs request validation before a controller processes the input.
        To change this behavior apply the ValidateInputAttribute to a
        controller or action.
    -->
        <pages
            validateRequest="false"
            pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
            pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
            userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <controls>
                <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
            </controls>
        </pages>
    </system.web>

    <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />

        <handlers>
            <remove name="BlockViewHandler"/>
            <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
        </handlers>
    </system.webServer>
</configuration> 
```

# javascript - 我正在寻找一个带有缩进和着色的 javascript 记录器（它可以！是特定于浏览器的）

> ID：14264538
> 
> 赞同：1
> 
> 时间：2013-01-10T18:13:33.307
> 
> 标签：javascript, logging, colors, stack, indentation

我正在寻找一个 javascript 记录器，它根据堆栈深度缩进每条消息。例如，如果函数 A 调用函数 B，它应该如下所示：

```
hi from A
    hi from B 
```

如果来自不同堆栈的函数，我还希望它能够为消息着色。这样我就可以跟踪异步事件。

界面必须是这样的：

```
function B(){ log('hi from B'); }
function A(){ log('hi from A'); B(); } 
```

任何建议将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:00:20.963

我认为这个功能应该可以帮助你：

```
var log = function(msg) {
  var $level = 0, parent = arguments.callee.caller;
  while(parent
        && parent.arguments
        && parent.arguments.callee 
        && parent.arguments.callee.caller) {
    parent = parent.arguments.callee.caller;
    $level = $level + 1;
  }
  console.info(Array($level).join("  "), msg);
} 
```

以下代码的输出如下：

```
function B(){ log('hi from B'); }
function A(){ log('hi from A'); B(); }

B();
A(); 
```

![输出](../Images/00943863bf3941797c826191c3f0f872.png)

`log`可能会将页面作为父被调用者，因此您可能需要修改输出，例如

```
console.info(Array($level - 1).join("  "), msg); 
```

请注意，空格字符的数量`join(" ")`指定缩进的大小。

我希望这会有所帮助。

# ruby - 如何检查关联属性的非零值 - 有没有更简洁的方法？

> ID：14264541
> 
> 赞同：3
> 
> 时间：2013-01-10T18:13:55.867
> 
> 标签：ruby, ruby-on-rails-3

我有物品，它们的价格是 has_one 关系。在价格对象中，有一个价格值（不幸的是）。我希望能够测试 item.price.price 的非零值。在视图中，有一个`add_to_order`辅助方法应该仅在有 price.price 时才显示。我测试使用这种情况：

```
<% if item.price && !item.price.price.nil? %>
  <%=add_to_order item %>
<% end %> 
```

但它看起来很丑陋。有没有更简洁/“更好”的测试方法？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:17:44.010

我会尽量避免您的视图中的逻辑，而只是让您的`add_to_order`方法处理`item`验证。

```
def add_to_order(item)
  return unless price = item.price.try(:price)
  # ... your implementation
  # the items price is in the price variable for you
end 
```

[对象#try](http://api.rubyonrails.org/classes/Object.html#method-i-try)

你的观点会变成：

```
<%=add_to_order item %> 
```

因为你所有的逻辑都在`add_to_order`辅助方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:17:53.227

[Rails 使用try 方法](http://api.rubyonrails.org/classes/Object.html#method-i-try)为此提供了语法糖：

```
<% unless item.price.try(price).nil? %>
  <%= add_to_order item %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:17:56.623

您可以使用`try`. 即使 item.price 为 nil，它也会安全工作

```
<% unless item.price.try(:price) %>
  <%=add_to_order item %>
<% end %> 
```

# c# - 我的 xpath 评估器和我的代码似乎得到了不同的结果

> ID：14264545
> 
> 赞同：0
> 
> 时间：2013-01-10T18:14:04.660
> 
> 标签：c#, xpath, xpathnavigator

**请忽略这个问题。问题在于数据进入方法，而不是我在问题中编写的任何代码/xml。我会删除这个问题，但它已经有了答案。**

我有一些 XML，我针对评估程序测试了 XPath 查询并得到了预期的结果，但我的代码似乎无法达到相同的结果。

这是 XML 的一个片段

```
<custom-table security="seeown" allownotify="false">
  <reports show="all">
    <report aspurl="../Reports/" label="Buy Sheet" security="moderator"/>
  </reports>
  <select-field name="StatusQ3MAP" eval="false">
    <option value="Accept" label="Accept"/>
    <option value="Decline" label="Decline"/>
  </select-field>
  <select-field name="MerchantStatus" eval="false">
    <option value="Review 1" label="Review 1"/>
    <option value="Review 2" label="Review 2"/>
  </select-field>
</custom-table> 
```

我的 XPath 看起来像是`custom-table/select-field[@name="StatusQ3MAP"]`在 XML 中为我提供了适当的选择字段元素。

但是，我似乎不起作用的方法是：

```
public static List<string> GetListItems(string fieldName, XPathNavigator nav)
{
    var list = new List<string>();

    var nodes = nav.Select(string.Format("/custom-table/select-field[@name = '{0}']", fieldName));

    foreach (XPathNavigator item in nodes)
        list.Add(item.Value);

    return list;
} 
```

假设 fieldName 为“StatusQ3MAP”，节点中似乎没有任何内容，因此在列表中没有返回任何结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:50:11.587

尝试这个：

```
XPathNodeIterator nodes = nav.Select(string.Format("/custom-table/select-field[@name = '{0}']", fieldName));

foreach (XPathIterator item in nodes)
        list.Add(item.Value); 
```

查看[此链接](http://msdn.microsoft.com/en-us/library/6k4x060d.aspx)，它可能会为您清除一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:29:49.440

`XPathNavigator.Select`期望`XPathExpression`一个. 将您的代码更改为

```
XPathExpression expr = nav.Compile(string.Format("custom-table/select-field[@name= '{0}']",fieldName));
XPathNodeIterator iter = nav.Select(expr);
while(iter.MoveNext())
{
  list.Add(iter.Current);
} 
```

# android - android - 何时对配置更改做出准确反应

> ID：14264546
> 
> 赞同：1
> 
> 时间：2013-01-10T18:14:07.290
> 
> 标签：android, configuration

假设用户输入了我要保存的文本，然后在屏幕旋转时重新插入。在活动被销毁之前是否调用了 onConfigurationChanged() 以便我可以将文本保存在此方法中并将其设置在 onRestart() 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:27:48.673

您可以使用`onSaveInstanceState()`方法来保存您想要的值，然后在屏幕方向之后您可以使用`savedInstance`传递给的参数`onCreate(Bundle savedInstance)`。如果您自己处理配置更改，即覆盖`onConfigurationChanged(Configuration newConfig)`方法，则`onCreate`不会被调用，那么您可以`onRestoreInstanceState()`按照建议使用。

# delphi - 为什么 TStringStream 转换为字符串时不删除 BOM？

> ID：14264554
> 
> 赞同：3
> 
> 时间：2013-01-10T18:14:43.640
> 
> 标签：delphi, unicode, delphi-xe2

我们有一个像这样的库函数：

```
class function TFileUtils.ReadTextStream(const AStream: TStream): string;
var
  StringStream: TStringStream;
begin
  StringStream := TStringStream.Create('', TEncoding.Unicode);
  try
    // This is WRONG since CopyFrom might rewind the stream (see Remys comment)
    StringStream.CopyFrom(AStream, AStream.Size - AStream.Position);
    Result := StringStream.DataString;
  finally
    StringStream.Free;
  end;
end; 
```

当我检查函数返回的字符串时，第一个 Char 是（小端）BOM。

为什么 TStringStream 不忽略 BOM？

有一个更好的方法吗？我不需要向后兼容旧的 Delphi 版本，XE2 的工作解决方案就可以了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T01:48:31.623

BOM 必须来自源`TStream`，因为`TStringStream`不编写 BOM。如果您想忽略源中存在的 BOM，则必须在复制数据之前手动执行此操作，例如：

```
class function TFileUtils.ReadTextStream(const AStream: TStream): string;
var
  StreamPos, StreamSize: Int64;
  Buf: TBytes;
  NumBytes: Integer;
  Encoding: TEncoding;
begin
  Result := '';

  StreamPos := AStream.Position;
  StreamSize := AStream.Size - StreamPos;

  // Anything available to read?
  if StreamSize < 1 then Exit;

  // Read the first few bytes from the stream...
  SetLength(Buf, 4);
  NumBytes := AStream.Read(Buf[0], Length(Buf));
  if NumBytes < 1 then Exit;
  Inc(StreamPos, NumBytes);
  Dec(StreamSize, NumBytes);

  // Detect the BOM. If you know for a fact what the TStream data is encoded as, 
  // you can assign the Encoding variable to the appropriate TEncoding object and 
  // GetBufferEncoding() will check for that encoding's BOM only...
  SetLength(Buf, NumBytes);
  Encoding := nil;
  Dec(NumBytes, TEncoding.GetBufferEncoding(Buf, Encoding));

  // If any non-BOM bytes were read than rewind the stream back to that position...
  if NumBytes > 0 then
  begin
    AStream.Seek(-NumBytes, soCurrent);
    Dec(StreamPos, NumBytes);
    Inc(StreamSize, NumBytes);
  end else
  begin
    // Anything left to read after the BOM?
    if StreamSize < 1 then Exit;
  end;

  // Now read and decode whatever is left in the stream...
  StringStream := TStringStream.Create('', Encoding);
  try
    StringStream.CopyFrom(AStream, StreamSize);
    Result := StringStream.DataString;
  finally
    StringStream.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T18:27:31.340

显然`TStreamReader`没有遇到同样的问题：

```
var
  StreamReader: TStreamReader;
begin
  StreamReader := TStreamReader.Create(AStream);
  try
    Result := StreamReader.ReadToEnd;
  finally
    StreamReader.Free;
  end;
end; 
```

`TStringList`也有效（感谢 whosrdaddy）：

```
var
  Strings: TStringList;
begin
  Strings := TStringList.Create;
  try
    Strings.LoadFromStream(AStream);
    Result := Strings.Text;
  finally
    Strings.Free;
  end;
end; 
```

我还测量了这两种方法，TStreamReader 似乎快了两倍。

# android - SQLite连接的Android Jelly Bean问题

> ID：14264556
> 
> 赞同：0
> 
> 时间：2013-01-10T18:14:50.010
> 
> 标签：android, sqlite, database-connection, android-4.2-jelly-bean

我有一段代码可以访问 SQLite 数据库，它在 Jelly Bean 之前可以完美运行。在这种情况下，并非所有数据都从数据库中获取（至少第一列以某种方式被省略）并且还会给出错误“未知错误（代码 14）无法打开数据库”，尽管正在从中读取一些数据。如果您不了解情况，请询问更多详细信息

谢谢！

```
private class DataBaseHelper extends SQLiteOpenHelper {

    private SQLiteDatabase myDataBase;

    public DataBaseHelper() {

        super(myContext, DB_NAME, null, 1);

        DB_PATH = "/data/data/" + myContext.getPackageName()
                + "/databases/";
    }

    /**
     * Creates a empty database on the system and rewrites it with your own
     * database.
     * */
    public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();
        if (dbExist) {

            // do nothing - database already exist
        } else {
            // By calling this method and empty database will be created
            // into the default system path
            // of your application so we are gonna be able to overwrite that
            // database with our database.
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    }

    private boolean checkDataBase() {

        SQLiteDatabase checkDB = null;

        try {
            String myPath = myContext.getDatabasePath(DB_NAME).getAbsolutePath();
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.NO_LOCALIZED_COLLATORS);

        } catch (SQLiteException e) {
            // database does't exist yet.
        }

        if (checkDB != null) {
            checkDB.close();
        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just
     * created empty database in the system folder, from where it can be
     * accessed and handled. This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException {

        // Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath =DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.NO_LOCALIZED_COLLATORS);

    } 
```

这是 LogCat 错误

```
 01-11 14:36:32.153: E/SQLiteLog(15050): (14) cannot open file at line 30174 of [00bb9c9ce4]
     01-11 14:36:32.153: E/SQLiteLog(15050): (14) os_unix.c:30174: (2)        open(/data/data/eu.isdc.cabinCrew/databases/database.sqlite) - 
     01-11 14:36:32.183: E/SQLiteDatabase(15050): Failed to open database '/data/data/eu.isdc.cabinCrew/databases/database.sqlite'.
     01-11 14:36:32.183: E/SQLiteDatabase(15050): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not   open database
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at eu.isdc.cabinCrew.a.b.c(Unknown Source)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at eu.isdc.cabinCrew.a.b.a(Unknown Source)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at eu.isdc.cabinCrew.a.a.<init>(Unknown Source)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at eu.isdc.cabinCrew.a.a.a(Unknown       Source)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at eu.isdc.cabinCrew.activities.TrainingActivity.onCreate(Unknown Source)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.app.Activity.performCreate(Activity.java:5008)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.app.ActivityThread.access$600(ActivityThread.java:130)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.os.Handler.dispatchMessage(Handler.java:99)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.os.Looper.loop(Looper.java:137)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at android.app.ActivityThread.main(ActivityThread.java:4745)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at java.lang.reflect.Method.invokeNative(Native Method)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at java.lang.reflect.Method.invoke(Method.java:511)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
     01-11 14:36:32.183: E/SQLiteDatabase(15050):   at dalvik.system.NativeStart.main(Native Method)
     01-11 14:36:32.503: E/SQLiteLog(15050): (1) no such table: airdata 
```

它确实打开了数据库，但没有找到那个特定的表，即使它在那里。这只发生在果冻豆身上。与此版本的数据库交互有什么变化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:23:21.960

您不能假设数据库将始终在 "/data/data/" 处可用。相反，您需要 getPath() 来获取 db 文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:07:40.387

这个问题已经解决了，它仍然存在，但我发现真正的问题在于使用 Auto-fit TextView 适配器在 UI 上显示数据，这在 jelly Bean 上不起作用。所以我仍然收到“无法打开数据库”异常，但无论如何它都可以工作，数据库已被读取。

# javascript - 如何在网站上制作动态背景图片？

> ID：14264562
> 
> 赞同：-2
> 
> 时间：2013-01-10T18:15:17.857
> 
> 标签：javascript, html, css

我不想在网站上制作动态背景图片。我想像这样更改大小[changemarks.com](http://www.changemakrs.com/)

请告诉我从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:16:29.680

看看 jQuery 动画/效果：[http ://docs.jquery.com/Effects/animate](http://docs.jquery.com/Effects/animate)

动态设置背景大小：

```
<div style="width:100%; height:100%; background: url(urlhere) no-repeat 100% 100%"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:20:44.507

该背景实际上是一个放置在整个窗口中的幻灯片。您可以使用大量免费的幻灯片 JavaScript 库。

使用 jQuery 动画编写自己的动画来淡入和淡出动画中的每个连续图像也非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:26:21.750

我建议使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)

它们为您提供了一个框架，用于将您的 CSS 设置为静态或响应式。如果您希望图像在窗口调整大小时改变大小，那么您需要“响应式”，它基本上使用 CSS 媒体查询和其他逻辑来在视口达到最小大小时执行某些功能。

[在这里查看响应式设计](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

它还使布局更加简单，因为它为您提供了用于对齐数据的列。

# android - 安卓锁屏自定义

> ID：14264569
> 
> 赞同：1
> 
> 时间：2013-01-10T18:15:39.780
> 
> 标签：android, animation, locking, screen, lockscreen

有没有办法以编程方式更改Android中的锁定屏幕？如果是，是否可以在该视图中创建动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:14:32.487

> 有没有办法以编程方式更改Android中的锁定屏幕？

不，因为只有一个锁屏。在 Android 4.2 上，如果用户选择，*用户*可以将应用小部件添加到锁定屏幕。您可以选择创建可以添加到锁定屏幕的应用小部件。

> 如果是，是否可以在该视图中创建动画？

一般来说，没有。应用小部件通常没有动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:35:28.790

android 官方并没有通过一个不错的 API 来支持它，但是对于这个问题有一些解决方案。我能想到的最好的一个，它将在所有设备和 android 版本上完美运行是这样的：

您可以制作一个用作启动器的应用程序，并要求用户禁用锁定屏幕。

这样，当屏幕关闭和打开时，您的应用程序将能够显示并执行所需的任何操作。

每次解锁应用程序时，它都会将主页按钮的意图发送到用户选择的真实启动器。

当然，还有其他解决方案，但正如我所尝试的，它们在某些 android 设备和版本上都存在某种问题。他们通过监听关机意图来工作，并通过使用他们在 android 源代码中发现的缺陷来阻止主页按钮。您永远不能假设它适用于所有设备和 android 版本。

此类应用程序的示例是“ [widgetLocker](https://play.google.com/store/apps/details?id=com.teslacoilsw.widgetlocker) ”和“ [Picture Password Lockscreen](https://play.google.com/store/apps/details?id=com.TwinBlade.PicturePassword) ”

# c - 符号的使用 | & &~ 和 ~ 在capability.h 文件中

> ID：14264571
> 
> 赞同：3
> 
> 时间：2013-01-10T18:15:45.783
> 
> 标签：c, linux-kernel, posix, embedded-linux

[我正在阅读此处](http://lxr.free-electrons.com/source/include/linux/capability.h#L113)给出的文件capability.h
我不清楚符号如何在函数调用`|` `~` `&`中`&~`使用它们在做什么

`|`在以下函数调用中使用：

```
static inline kernel_cap_t cap_combine(const kernel_cap_t a,
                                       const kernel_cap_t b)
{
        kernel_cap_t dest;
        CAP_BOP_ALL(dest, a, b, |);
        return dest;
} 
```

`&`在以下系统调用中使用：

```
static inline kernel_cap_t cap_intersect(const kernel_cap_t a,
                                         const kernel_cap_t b)
{
        kernel_cap_t dest;
        CAP_BOP_ALL(dest, a, b, &);
        return dest;
} 
```

`&~`在以下功能中使用：

```
static inline kernel_cap_t cap_drop(const kernel_cap_t a,
                                    const kernel_cap_t drop)
{
        kernel_cap_t dest;
        CAP_BOP_ALL(dest, a, drop, &~);
        return dest;
} 
```

`~`在以下功能中使用：

```
static inline kernel_cap_t cap_invert(const kernel_cap_t c)
{
        kernel_cap_t dest;
        CAP_UOP_ALL(dest, c, ~);
        return dest;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T18:28:08.097

例如 CAP_BOP_ALL 被定义为

```
#define CAP_BOP_ALL(c, a, b, OP)                                    \
do {                                                                \
        unsigned __capi;                                            \
        CAP_FOR_EACH_U32(__capi) {                                  \
                c.cap[__capi] = a.cap[__capi] OP b.cap[__capi];     \
        }                                                           \
} while (0) 
```

所以“表达”

```
CAP_BOP_ALL(dest, a, b, |); 
```

扩展到

```
do {
        unsigned __capi;
        for (__capi = 0; __capi < _KERNEL_CAPABILITY_U32S; ++__capi) {
                dest.cap[__capi] = a.cap[__capi] | b.cap[__capi];
        }
} while (0); 
```

. 即使原始表达式看起来不像正确的 C，这是因为 C 解析器仅在预处理器完成时才获取它，并使其看起来像后一个表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T18:17:06.607

显然，这些`CAP_`东西不是函数，而是预处理器宏。您可以将任何预处理标记传递给宏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T18:18:01.987

这些几乎可以肯定是预处理器宏，其参数是原始标记，不被解析为运算符。

# java - 休眠和 Glassfish 配置

> ID：14264573
> 
> 赞同：0
> 
> 时间：2013-01-10T18:15:49.063
> 
> 标签：java, hibernate, rest, configuration, glassfish

我正在研究项目（REST），我将休眠与 glassfish 一起使用。我尝试从数据库中获取数据列表，但出现此错误：

```
 javax.persistence.PersistenceException: Exception [EclipseLink-4021] (Eclipse Persistence                  Services - 2.0.1.v20100213-r6600): org.eclipse.persistence.exceptions.DatabaseException
Exception Description: Unable to acquire a connection from driver [null], user [null] and URL    [null].  Verify that you have set the expected driver class and URL.  Check your login, persistence.xml      or sessions.xml resource.  The jdbc.driver property should be set to a class that is compatible with    your database platform
note The full stack traces of the exception and its root causes are available in the GlassFish   Server Open Source Edition 3.0.1 logs. 
```

持久性.XML

```
 <?xml version="1.0" encoding="UTF-8" ?>
    <persistence xmlns="http://java.sun.com/xml/ns/persistence"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence   http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">
    <persistence-unit name="manager1"
    transaction-type="RESOURCE_LOCAL">

    <properties>
        <property name="hibernate.show_sql" value="false" />
        <property name="hibernate.format_sql" value="false" />
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />
        <property name="hibernate.connection.url"
            value="jdbc:mysql://url" />
        <property name="hibernate.connection.username" value="admin" />
        <property name="hibernate.connection.password" value="admin" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.hbm2ddl.auto" value="create-update" /> 
```

更新：

与休眠的连接有效，因为我在控制台中对其进行了测试。Hibernate 是否可能需要另一个用于休眠的配置文件？感谢帮助 ：）

# java - 如何从文件中读取 ascii 字符到 int 变量

> ID：14264574
> 
> 赞同：0
> 
> 时间：2013-01-10T18:15:48.200
> 
> 标签：java, ascii

我为我正在制作的游戏制作了一个 java 类*Levels*。为了快速阅读并使代码简单，数据采用 ascii 字符。问题是该类似乎没有执行。这可以通过一些修改来工作吗？

这就是我所说的：

```
class G
    {        
        /* Variables */

        public G()
            {
                addKeyListener(new keys());
                setPreferredSize(new Dimension(w, h));
                setFocusable(true);
                Levels l = new Levels(1);
                System.out.print(l.blocks);

            }
        /* Code */
    } 
```

这就是课堂。

```
class Levels
    {
        int blocks, bl;
        int[] alt, bgc, gc;
        private int k;

        public Levels(int level)
             {
                try
                    {
                        FileInputStream levelfile = new FileInputStream("levels/level/" + level + ".lvl");
                        Scanner ls = new Scanner(levelfile);
                        this.bl=((int)ls.nextByte())-32;
                        this.blocks=(int)ls.nextByte()-32;
                        for(k=0; k<6; k++)
                            {
                                this.bgc[k]=((int)ls.nextByte()-32)*2;
                            }
                        for(k=0; k<6; k++)
                            {
                                this.gc[k]=((int)ls.nextByte()-32)*2;
                            }
                        for(k=0; k<blocks; k++)
                            {
                                this.bgc[k]=((int)ls.nextByte()-32)*2;
                            }
                    }
                catch(FileNotFoundException error)
                    {
                        System.out.print("Level not found..." + error);
                    }
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:21:02.870

请使用`DataInputStream`/`DataOutputStream`用于此类目的。它会用你的想法解决你的很多问题。

**UPD：** [http ://docs.oracle.com/javase/tutorial/essential/io/datastreams.html](http://docs.oracle.com/javase/tutorial/essential/io/datastreams.html)

**UPD-2**我不建议您使用`DataInputStream`. 我建议不要`ascii`出于您的目的使用文本 ( ) 文件表示。

**UPD-3**好的。如果您仍然想读/写文本文件，那么有几个建议。1）根据您的读取文件代码，您不要在写入值之间使用任何分隔符。不是吗？最简单的方法是使用回车，即将每个值写在新行上。

2）在这种情况下，使用以下命令读取此类文件可能会更方便`BufferedReader`：

```
FileInputStream fis = new FileInputStream('... your path ...');
InputStreamReader isr = new InputStreamReader(fis);
BufferedReader br = new BufferedReader(isr);

String line;

line = br.readLine();
this.bl = Integer.parseInt(line);

line = br.readLine();
this.blocks= Integer.parseInt(line);

... and so on

br.close(); 
```

# python - 将 Mongodb 导入 CSV - 删除重复项

> ID：14264575
> 
> 赞同：2
> 
> 时间：2013-01-10T18:15:50.347
> 
> 标签：python, mongodb, import, duplicates

我正在将数据从 Mongo 导入 CSV 文件。导入由每个 JSON 文档的“时间戳”和“文本”组成。

文件：

```
{ 
name: ..., 
size: ..., 
timestamp: ISODate("2013-01-09T21:04:12Z"), 
data: { text:..., place:...},
other: ...
} 
```

编码：

```
with open(output, 'w') as fp:
   for r in db.hello.find(fields=['text', 'timestamp']):
       print >>fp, '"%s","%s"' % (r['text'], r['timestamp'].strftime('%H:%M:%S')) 
```

我想删除重复项（一些 Mongo 文档具有相同的文本），并且我想保持第一个实例（关于时间）完整。是否可以在我导入时删除这些欺骗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:26:04.750

我会使用一个集合来存储数据的哈希值，并检查重复项。像这样的东西：

```
import md5

hashes = set()
with open(output, 'w') as fp:
   for r in db.hello.find(fields=['text', 'timestamp']):
       digest = md5.new(r['text']).digest()
       if digest in hashes:
            # It's a duplicate!
            continue
       else:
            hashes.add(digest)
       print >>fp, '"%s","%s"' % (r['text'], r['timestamp'].strftime('%H:%M:%S')) 
```

值得注意的是，您可以直接使用文本字段，但对于较大的文本字段，仅存储散列会更节省内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:32:45.467

您只需要维护一个地图（字典）来维护（文本、时间戳）对。“文本”是关键，因此不会有任何重复。我将假设阅读顺序不能保证首先返回最旧的时间戳。在这种情况下，您将必须进行 2 次通过——一次用于阅读，然后一次用于写作。

```
文本图 = {}

定义插入（文本，ts）：
    全局文本图
    如果文本图中的文本：
        文本映射[文本] = min(ts, 文本映射[文本])
    别的：
        文本地图[文本] = ts

对于 db.hello.find(fields=['text', 'timestamp']) 中的 r：
    插入（r['文本']，r ['时间戳']）

对于文本图中的文本：
   print >>fp, text, textmap[text] # 使用所需的任何格式。

```

最后，您还可以轻松地将字典转换为元组列表，例如，如果您想在打印之前使用时间戳对结果进行排序。
（请参阅[按值对 Python 字典进行排序](https://stackoverflow.com/questions/613183/python-sort-a-dictionary-by-value)）

# vb.net - 尝试访问分配给公共变量的用户控件上的文本框时出错 - vb.net

> ID：14264582
> 
> 赞同：2
> 
> 时间：2013-01-10T18:16:18.280
> 
> 标签：vb.net

我创建了两个具有不同用户界面的用户控件。根据用户所做的选择，这些接口之一将在我的课程中使用。由于直到用户做出选择后我才知道，我无法提前声明用户控件，因此我创建了一个公共变量，以便稍后分配正确的用户控件。

当我尝试访问用户控件上的控件（文本框）时发生错误。但是，如果我声明用户控件而不将其分配给公共变量，那么我不会收到错误消息。此外，如果我在声明时将用户控件分配给公共变量，那么我也不会收到错误消息。我确实需要能够在两个用户控件之间进行选择。我不知道该怎么办。我错过了什么吗？我很感激任何帮助。

```
Public Class VesselData
 Public RCAVesselData 
 Public AOLVesselData 

  Public Sub New()
   If Main.UserSelectedModule = "Arrival on Location" Then
    OperatorView = New AOLVesselData 'User Control 1
   ElseIf Main.UserSelectedModule = "Running Conventional Anchors" Then
    OperatorView = New RCAVesselData 'User Control 2
   End If

   OperatorView.txtDistanceToFairlead.text = "A" 'THROWS MissingMemberException - Public member 'txtDistanceToFairlead' on type 'AOLVesselData' not found.
   Dim Test as New AOLVesselData
   Test.txtDistanceToFairlead.text = "A" 'DOES NOT THROW EXCEPTION
  End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:07:00.020

问题是您正在访问一个不存在的成员。从您发布的`AOLVesselData`和`RCAVesselData`类的代码来看，`RCAVesselData`该类似乎没有`txtDistanceToFairlead`成员。

如果您有一组通用的方法/属性，您希望两个用户控件都公开，请将它们重构为一个接口，并让两个用户控件都实现该接口。这将使它们易于互换使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:27:40.913

在声明 OperatorView 时尝试使用 Shared 而不是 Public。而且，就像 tcarvin 所说，您可能想要打开“显式”（项目编译选项）或使用“显式选项”。

# ruby-on-rails - ActiveRecord 和非法列名

> ID：14264584
> 
> 赞同：1
> 
> 时间：2013-01-10T18:16:22.207
> 
> 标签：ruby-on-rails, rails-activerecord, limesurvey

我想通过 ActiveRecord 访问 Limesurvey 数据库。一些表的列名如“79924X192X1240”。当我想访问模型时，出现以下错误：

```
ActionView::Template::Error (/usr/local/rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.1.10/lib/active_record/attribute_methods/time_zone_conversion.rb:44: syntax error, unexpected tINTEGER
                def 79924X192X1240=(original_time)
                         ^): 
```

我想，错误出现了，因为不允许方法以数字开头。但我无法更改列名，因为 Limesurvey 会生成这些列。

仅当列的数据类型（如 79924X192X1240）为日期时间时才会出现此错误。其他数据类型（如 varchar）不会产生任何问题。

我如何也可以访问这些日期时间列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:52:04.443

您需要为此执行原始 sql 查询。ActiveRecord 是为不允许方法名称以数字开头的 ruby​​ 编写的。由于表上的每一列都相当于一个方法，因此每次尝试访问该信息都会引发语法错误。

你需要使用：`ActiveRecord::Base.connection.execute`

# ios - 检查为 iOS 运行 xcodebuild（命令行）的错误

> ID：14264587
> 
> 赞同：0
> 
> 时间：2013-01-10T18:16:25.347
> 
> 标签：ios, xcode, error-handling, xcodebuild

我目前正在编写一个脚本来构建我的 iOS 项目。

我可以使用...运行归档命令

```
xcodebuild -workspace <workspace_name> -scheme <scheme_name> 'archive' 
```

但是检查错误的最佳方法是什么？如果有办法在不解析日志的情况下做到这一点，那就太好了。但是，如果解析日志是最好的方法，那么最好的字符串是什么？

我测试了返回码。xcodebuild 在成功时返回 0，但在出现构建错误时也会返回。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:19:26.533

使用`-project`参数，你可以`build`你的项目。转到您的`Project.xcodeproj`文件夹`terminal`。然后输入，

```
xcodebuild -project projectname.xcodeproj 
```

检查这个[xcodebuild 参考](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html)。

# sql-server - HOLDLOCK 与 UPDLOCK

> ID：14264589
> 
> 赞同：8
> 
> 时间：2013-01-10T18:16:26.547
> 
> 标签：sql-server

它似乎在一个事务（比如 T1）中使用`HOLDLOCK`或使用`UPDLOCK`，不会阻止来自另一个事务（比如 T2）的读取访问。

据我了解，在 T1 完成之前，`HOLDLOCK`将阻止 T2 更新/删除；并且 a`UPDLOCK`将阻止 T2 更新/删除/插入。在这两个 T2 中都将对这些记录具有读取权限。

但是，使用这两个（如`HOLDLOCK, UPDLOCK`：）阻止 T2 甚至读取访问。当我们同时使用它们时会发生什么？

感谢您的洞察力

## 更新：

这不是我所看到的：

例如：

在查询 1 中：

```
begin tran

select * from tblTest WITH (UPDLOCK, HOLDLOCK)

WAITFOR DELAY '00:00:10'

commit tran 
```

在查询 2 中：

```
select * from tblTest 
```

在查询 1 完成之前，查询 2 不会产生结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T18:20:59.453

`UPDLOCK`影响锁的类型。这意味着对于一个`SELECT`语句，`U`将使用锁而不是`S`锁。在默认读取提交级别，它们将在读取数据后立即释放。

以上适用于行锁和页锁。对于表级锁 BOL 状态

> 如果 UPDLOCK 与 TABLOCK 结合使用，或者由于某些其他原因而采用表级锁，则将采用排他 (X) 锁。

[`HOLDLOCK`](http://msdn.microsoft.com/en-gb/library/ms187373.aspx)意味着您获得可序列化的隔离语义，因此在事务结束之前不会释放锁，并且至少您的查询覆盖的整个范围将被锁定以防止插入幻像。

`U`锁与其他锁兼容，但与其他锁`S`不兼容`U`（请参阅[锁兼容性矩阵](http://msdn.microsoft.com/en-gb/library/ms186396%28v=sql.105%29.aspx)），因此如果在行或页面级别取出锁，这不会阻塞其他读取器，除非他们也使用`UPDLOCK`提示。

但是，如果对象级`X`锁被取出，`UPDLOCK`那么读取器**将**被阻止尝试获取`IS`表上的锁。在您的示例查询中，尝试查看`sys.dm_tran_locks`第二个查询被阻止的情况，以查看两个事务具有/正在等待的锁。

对于您问题中的查询

```
SELECT *
FROM   tblTest WITH (UPDLOCK, HOLDLOCK) 
```

`X`如果查询计划显示堆扫描，您将始终获得对象锁定。如果是索引扫描，则取决于使用的锁定粒度（通常在[获得至少 5,000](http://msdn.microsoft.com/en-us/library/ms184286%28v=sql.105%29.aspx)个较低级别的锁后尝试将锁升级到表级别）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T18:49:57.047

我相信马丁已经解释了如何`updlock`导致排他锁（+1）......我宁愿将此作为评论/问题发布，但我的评论太大了......

这是`updlock`导致`x`锁定的快速示例...

```
IF (OBJECT_ID('tblTest') IS NOT NULL)
    DROP TABLE tblTest

CREATE TABLE tblTest (
    ID INT NOT NULL
)

BEGIN TRANSACTION
    SELECT * FROM dbo.tblTest WITH (UPDLOCK, HOLDLOCK) WHERE ID = 1
    SELECT * FROM sys.dm_tran_locks WHERE request_session_id = @@SPID 
COMMIT 
```

但是，如果您向表中添加聚集索引，则独占表锁将消失，并被`RangeS-U`锁替换...

```
ALTER TABLE dbo.tblTest 
ADD CONSTRAINT PK_tblTest 
PRIMARY KEY CLUSTERED (ID)

BEGIN TRANSACTION
    SELECT * FROM dbo.tblTest WITH (UPDLOCK, HOLDLOCK) WHERE ID = 1
    SELECT * FROM sys.dm_tran_locks WHERE request_session_id = @@SPID 
COMMIT 
```

所以基本上，你在这张表上有一个聚集索引吗？

编辑：

另一个使用非聚集索引的例子......

```
IF (OBJECT_ID('tblTest') IS NOT NULL)
    DROP TABLE tblTest

CREATE TABLE tblTest (
    ID INT NOT NULL
)

CREATE NONCLUSTERED INDEX 
IX_tblTest ON dbo.tblTest (ID) 

BEGIN TRANSACTION
    SELECT * FROM dbo.tblTest WITH (HOLDLOCK) WHERE ID = 1
    SELECT * FROM sys.dm_tran_locks WHERE request_session_id = @@SPID 
COMMIT 
```

会导致`RangeS-S`锁...

但...

```
BEGIN TRANSACTION
    SELECT * FROM dbo.tblTest WITH (UPDLOCK, HOLDLOCK) WHERE ID = 1
    SELECT * FROM sys.dm_tran_locks WHERE request_session_id = @@SPID 
COMMIT 
```

会导致排他表锁...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:51:13.533

如果表没有适合查询的索引，可序列化隔离会导致表锁定。HOLDLOCK 使可序列化成为提及它的表的有效事务隔离级别。

`X`这与其他人提到的升级一起导致您看到的行为。

# php - mysql_num_rows 到 php 数据对象

> ID：14264592
> 
> 赞同：1
> 
> 时间：2013-01-10T18:16:33.913
> 
> 标签：php, mysql, pdo

我在将我的代码从 mysql * 转换为 php 数据对象时感到困惑。我有一个相册，里面有一张照片，我希望该相册的第一张照片成为相册的封面图片。我知道如何在我的 sql 中做到这一点，但我现在遇到了 pdo 的问题。这是我的代码：

```
 $sqlAlb="Select album_id,album_name from albums";
        $resAlb=$db->prepare($sqlAlb);
        $resAlb->execute();
        $strAlb="";
            while($rowAlb = $resAlb->fetch(PDO::FETCH_ASSOC)){
            $rs=$db->prepare("select COUNT(*) from gallery where album_id=".$rowAlb['album_id']);
            $rs->execute();
            $num_rows=$rs->fetchColumn();
            $dset=$rs->fetch(PDO::FETCH_ASSOC);
            if($rs!=0){
            $strAlb.="<article class='one-third column' data-categories='sermons people'>";
            $strAlb.="<div class='project-thumb'><div class='bordered'>";
            $strAlb.="<figure class='add-border'>";
            $strAlb.="<a class='single-image picture-icon' rel='gallery' ><img src='uploads/photos/".$dset['pic_img']."' alt='' /></a>";
            $strAlb.="</figure>";
            $strAlb.="</div></div></article>";
            }
            }
                echo $strAlb; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:34:00.830

你没有具体说明你遇到了什么问题，但我猜你只是没有从查询中得到你想要的数据。看来您正在查询计数值，然后尝试将该值用作图像的 href 属性的一部分，除非您的图像以非常特定的方式编号，否则这可能不起作用。

就我个人而言，我会在您的图库中添加一个特定的 tintyint（类似布尔值）字段，以专门指示哪个图像是封面图像，而不是依赖于某种排序顺序，这可能无法根据您查询表格的方式来保证。然后，我将使用一个查询加入专辑和画廊表来获取您需要的信息，如下所示：

```
SELECT a.album_id, a.album_name, g.image_filename  <-- or whatever your filename field is
FROM albums AS a
INNER JOIN gallery AS g ON a.album_id = g.album.id
WHERE g.is_cover = 1 
```

然后，您可以在单个查询中获取所需的所有数据，而不是 1+ 数量的专辑查询。然后，您将遍历结果集以获取所需的数据。

# c# - 铝Lua - 注册功能

> ID：14264593
> 
> 赞同：2
> 
> 时间：2013-01-10T18:16:36.607
> 
> 标签：c#, methods, lua, aluminumlua

如何将 Lua 方法信息（静态公共 void）注册到 AluminiumLua 的上下文中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T17:22:41.537

您可以通过提供与您的方法签名匹配的委托来实现此目的。

```
using System;
using AluminumLua;

public delegate void HelloDelegate();

class Program
{
    public static void Hello()
    {
        Console.Write("Hello world!");
    }

    static void Main()
    {
        var context = new LuaContext();
        var obj = LuaObject.FromDelegate(new HelloDelegate(Hello));
        context.SetGlobal("hello", obj);
        context.Get("hello").AsFunction().Invoke(new LuaObject[] { });
    }
} 
```

# ios - 仪器和泄漏

> ID：14264598
> 
> 赞同：2
> 
> 时间：2013-01-10T18:16:51.240
> 
> 标签：ios, objective-c, memory-warning

我有一个应用程序，我正在对其进行分析。我对仪器很陌生，我也是一个很新的 ios 开发人员。我正在使用 ios6 并且我有一个非常不寻常的泄漏。我在 UIImage 上创建了一个类别，并添加了帮助方法来返回图像以使用 capinset。我的类别看起来像这样，

```
@implementation UIImage (Helpers)

+(UIImage*)resizableImageWithName:(NSString *)imageName andCapInsets:(UIEdgeInsets)insets{
    UIImage *image = [UIImage imageNamed:imageName];
    return [image resizableImageWithCapInsets:insets];
}

@end 
```

仪器显示该区域有 3/4 泄漏，同一个地方，我无法找出原因。是这样吗，我必须发布我在类别中创建的新图像，如果我发布它我要返回什么？任何人都可以解释我在这里泄漏内存的原因。

我像这样使用它；

```
[self.progressView setTrackImage:[UIImage resizableImageWithName:@"progress_bar_background.png" andCapInsets:UIEdgeInsetsMake(2, 2, 2, 2)]]; 
```

以这种方式使用这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:20:16.507

Instruments 向您展示的方法是分配泄漏内存的地方——不一定是泄漏内存的地方。实际上，您的方法在内存管理方面是正确的。

因此，您最好检查如何处理返回的`UIImage`对象......如果此提示不能帮助您找到泄漏原因，请发布更多代码。

# php - 登录时使用户保持在同一页面上

> ID：14264599
> 
> 赞同：0
> 
> 时间：2013-01-10T18:16:54.450
> 
> 标签：php, ajax, login

当他登录时，我能够将用户保持在同一页面上，`Firefox`但`IE`它会加载 wamp 文件夹目录。我认为这是一个错误，可以修复吗？为了让用户在登录时保持在同一页面上，是否有特定的代码可供使用？

我使用的代码是 PHP 和 ajax 的混合，但 ajax 在下面；

```
function logMeIn(){
 var poststr="email="+$("#email").val()+"&password="+$("#password").val();
 $.ajax({
  type: "POST",
  url: "../script/sendLogDetails.php",
  data: poststr,
  success: function(str){
   switch (str){
    case "1":
     alert("Can't connect to server - please retry later."); // Can't connect to server
     break;
    case "2":
     alert("Can't connect to database - please retry later."); // Can't connect to database
     break;
    case "3":
     alert("Account access problem - please retry later."); // Account access details
     break;
    case "4":
     alert("Invalid log in details - please retry."); // invalid login details
     break;
    default:
     window.location="";
     break;
    }
   }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:19:00.993

`window.location="";`将重定向用户。摆脱它。

# android - AsyncTask 中的 HTMLcleaner

> ID：14264604
> 
> 赞同：1
> 
> 时间：2013-01-10T18:17:22.837
> 
> 标签：android, string, android-asynctask, htmlcleaner

我正在尝试使用 HTML 清洁器来解析来自网站的信息，然后使用 Xpath 来查找我正在寻找的数据。我在一个单独的 AsyncTask 类中有 htmlcleaner 的东西，该应用程序似乎可以在我的手机上运行。但是，当我按下按钮时，什么也没有发生。这是我的主要活动类和我的 AsyncTask 类。

```
package ru.habrahabr.stackparser;

import java.net.URL;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.htmlcleaner.TagNode;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class stackParser extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button) findViewById(R.id.parse);
    button.setOnClickListener(myListener);
}

private OnClickListener myListener = new OnClickListener() {
    public void onClick(View v) {

        new parseSite().execute("http://xjaphx.wordpress.com/");
    }
};

private class parseSite extends AsyncTask<String, Void, String> {

    protected String doInBackground(String... arg) {
        String output = new String();
        try {
            htmlHelper hh = new htmlHelper();
        } finally {
        }

        return output;
    }

    protected void onPostExecute(String output) {
        TextView view = (TextView) findViewById(R.id.tv1);
        view.setText((CharSequence) output);
    }
}
} 
```

这是我引用的课程。如果有人能看到这个并告诉我发生了什么，我将不胜感激。我试图遵循一个工作示例并将我自己的 Url 和 Xpath 放入，但它不起作用。

```
package ru.habrahabr.stackparser;

import java.io.IOException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.htmlcleaner.HtmlCleaner;
import org.htmlcleaner.TagNode;
import org.htmlcleaner.XPatherException;

public class htmlHelper {
TagNode rootNode;
String stats;

static final String XPATH_STATS = "//div[@id='blog-stats']/ul/li";

public String htmlHelper(URL htmlPage) throws IOException, XPatherException {
    HtmlCleaner cleaner = new HtmlCleaner();
    rootNode = cleaner.clean(htmlPage);

    // query XPath
    Object[] statsNode = rootNode.evaluateXPath(XPATH_STATS);
    // process data if found any node
    if (statsNode.length > 0) {
        TagNode resultNode = (TagNode) statsNode[0];
        stats = resultNode.getText().toString();
    }
    return stats;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:26:52.787

`AsyncTask`将 doInBackground 方法更改为：

```
@Override
protected String doInBackground(String... arg) {
        String output "";
        try {
            htmlHelper hh = new htmlHelper();
            output=hh.htmlHelper(arg[0]);  //<< call htmlHelper method here
        } finally {
        }

        return output;
    } 
```

因为您目前只创建一个类的实例，`htmlHelper`而不是从类调用`htmlHelper`方法来 `htmlHelper`从 web url 获取数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:30:33.613

Look , I will not care of the data is downloaded or not , but I will assume that the data is already downloaded and besides in the variable `output` , you just need to place this code inside onPostExecute

```
 runOnUiThread(new Runnable() {

 public void run() {

// update data into TextView.

  TextView view = (TextView) findViewById(R.id.tv1);

view.setText((CharSequence) output);

                    }
                }); 
```

because , sometimes the data is already downloaded but needed to be assigned into Textview or whatever view by using UIthread. Hope this works for you

# ms-access - 使用 Access 作为前端从 Access 迁移到 MySQL

> ID：14264606
> 
> 赞同：1
> 
> 时间：2013-01-10T18:17:30.863
> 
> 标签：ms-access

我有一个包含表、表单、查询、报告、模块和微软访问类对象（VBA 代码）的 ACCESS 数据库（.accdb）。现在的要求是从访问转向可选数据库。我可以通过浏览找到的选项是使用 MySQL 或 SQL Server。到目前为止，我想使用 Access 作为任何后端数据库的前端。我想了解有关从 Access 迁移到可选数据库的更多详细信息。任何人都可以帮助我或向我指出好的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:36:47.827

过去，我使用 SQL Server 作为 Access 前端应用程序的后端，并取得了相当大的成功。您可以使用[SQL Server 迁移助手向导](http://www.microsoft.com/en-us/download/details.aspx?id=28763)将数据从 Access 数据库迁移到 SQL Server 数据库。

*对“使用 SQL Server 数据库作为 MS Access 的后端*”进行快速搜索，将产生大量关于要考虑和做的事情的资源。您也可以参考这个 SO Question [Can a Microsoft Access Forms application to work with a SQL backend?](https://stackoverflow.com/questions/1495734/can-a-microsoft-access-forms-application-be-switched-to-work-with-a-sql-back-end?rq=1) 以获得更多见解。

我对这种迁移的体验非常积极，但这实际上取决于您如何设计和构建应用程序。这可能是一个非常简单的迁移（几个小时来调整和测试事物），您需要付出更大的努力来确保一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T03:53:26.247

您可以使用 SQL Server (Express) 作为后端，使用 Access 菜单中的导出数据。如果您将使用 MySQL，则某些功能（例如 auto_increment 字段）无法正常工作，并且需要编写 VBA 代码才能按预期工作。

# c# - 从 C# 将枚举值传递给 Java 构造函数

> ID：14264610
> 
> 赞同：0
> 
> 时间：2013-01-10T18:17:39.867
> 
> 标签：c#, ikvm

我需要使用 IKVM 从 C# 运行 JAR 文件。JAR 包含一个类，其构造函数将枚举作为其参数之一。我面临的问题是，当我尝试使用 IKVM 在 C# 中创建此类的实例时，会引发 IllegalArgumentException。

Java枚举：

```
public class EventType{
  public static final int General;
  public static final int Other;
  public static int wrap(int v);
} 
```

Java 类：

```
public class A{
   private EventType eType;
   public A(EventType e){
     eType = e;
   }
} 
```

C#用法：

```
/* loader is the URLClassLoader for the JAR files */
java.lang.Class eArg = java.lang.Class.forName("A", true, loader);

/* Instantiate with the underlying value of EventType.General */
object obj = eArg.getConstructor(EventType).newInstance(0); 
```

eArg 由 forName(..) 方法正确加载。但是，eArg 类的实例化会引发 IllegalArgumentException。除了 exception.TargetSite.CustomAttributes 指定该方法未实现外，异常中没有任何消息。我也尝试将构造函数参数作为 java.lang.Field 对象传递，但即使这样也给出了相同的异常。

有人对我可能做错的事情有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:57:36.420

您需要传递（装箱的）枚举值，而不是传递 0（基础值）。所以这应该工作：

```
/* loader is the URLClassLoader for the JAR files */
java.lang.Class eArg = java.lang.Class.forName("A", true, loader);

/* Instantiate with the underlying value of EventType.General */
object obj = eArg.getConstructor(EventType).newInstance(EventType.General); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:09:12.573

我不是 100% 确定，但我相信问题在于，在 .NET 中，默认的底层类型`enum`是，`int`但在 Java 中，您已将`EventType`其定义为一个类。Java 中的构造函数需要一个对象，但在 .NET 中，您正在尝试传递等效于`int`.

# jquery - jquery渐变css背景变化

> ID：14264614
> 
> 赞同：0
> 
> 时间：2013-01-10T18:17:44.547
> 
> 标签：jquery, css

目前在css中我有这样的东西

```
.page-button, .generic-main
{/*medium color*/
    background: #0B9444; /* Old browsers */
    background: -moz-linear-gradient(top, #0dad50 0%, #0b9444 44%, #097a38 100%); /* FF3.6+*/
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#0dad50), color-stop(44%,#0b9444), color-stop(100%,#097a38)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #0dad50 0%,#0b9444 44%,#097a38 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #0dad50 0%,#0b9444 44%,#097a38 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #0dad50 0%,#0b9444 44%,#097a38 100%); /* IE10+ */
    background: linear-gradient(to bottom, #0dad50 0%,#0b9444 44%,#097a38 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0dad50', endColorstr='#097a38',GradientType=0 ); /* IE6-9 */
}
.page-button:hover, .generic-light
{/*light color*/
    background: #97C193; /* Old browsers */
    background: -moz-linear-gradient(top,  #a8d6a3 0%, #97c193 44%, #8cb388 100%); /* FF3.6+*/
}
.generic-dark
{/*dark color*/
    background: #08662F; /* Old browsers */
    background: -moz-linear-gradient(top,  #0a803b 0%, #08662f 44%, #075728 100%);/*FF3.6+*/
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#0a803b), color-stop(44%,#08662f), color-stop(100%,#075728)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #0a803b 0%,#08662f 44%,#075728 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #0a803b 0%,#08662f 44%,#075728 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #0a803b 0%,#08662f 44%,#075728 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #0a803b 0%,#08662f 44%,#075728 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0a803b', endColorstr='#075728',GradientType=0 ); /* IE6-9 */

} 
```

然后在jquery中我有这样的东西

```
$('page-button').live({

    click: function () { submit();},

    mousedown: function (){
        $(this).addClass('generic-dark');
        $(this).css('border', '1px #FF0000 solid');
    },

    mouseout: function (){
        $(this).removeClass('generic-dark');
        $(this).css('border', '0px');
    }
}); 
```

我想要的只是让 div 始终具有渐变背景，并在完成后返回具有渐变背景

如果有人有任何想法提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:21:25.107

`$('page-button')`指一个标签。没有这样的标签。你的意思是：

```
$('.page-button') for a class name 
```

或者

```
$('#page-button') for an ID 
```

# c - 用c从/在文件中读/写

> ID：14264615
> 
> 赞同：0
> 
> 时间：2013-01-10T18:17:45.933
> 
> 标签：c, file

我想从文件中读取，然后添加/减去文件中的字符，这是用户给出的数字。此外，用户将决定程序是加还是减。我的问题是，我无法读写 for 循环中的第一个字符。我读了第一个字符，但我写在文件中已经写入的内容的末尾。我想我不能在同一个循环中使用 fgetc 和 fputc，或者我需要在程序重新启动后（通过菜单）将 *fp 发送回文件的开头。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
char str[50],keystr[50],*p,c;
FILE *fp;
int i,k,key,buff1,buff2,choice;

start:

printf("Make a choice\n1.Add\n2.Sub\n3.Exit\n");
scanf("%d",&choice);
if(choice==3) goto end;
getchar();
printf("\nGimme the key");
fgets(keystr,50,stdin);

key=0;
i=0;

while(keystr[i])
{
    key=key+keystr[i];
    i++;
}
printf("\n%d",key);
printf("\nDwste onoma arxeiou");
fgets(str,50,stdin);

fp=fopen(str,"r+");
if (fp==NULL) printf("error");
buff1=0;
buff2=0;
for(;;)
{
    if((c=fgetc(fp))==EOF) break;
    buff1=c;
    if(choice==1)
    {
            buff1=buff1+key;
            c=buff1;
            fputc(c,fp);
            printf("\n%d",buff1);
    }
    else if(choice==2)
    {
            buff1=buff1-key;
            c=buff1;
            fputc(c,fp);
            printf("\n%d",buff1);
    }
}
goto start;
end:
fclose(fp);
printf("\nBye");
    return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:22:43.430

你可以在同一个循环中对同一个文件使用`fgetc`和，但是你必须记住，在你调用文件之后，文件指针被定位在下一个字符上，这样调用将覆盖下一个字符，而不是刚刚读取的那个。当然，也会增加文件指针，导致你每秒读写一个字符。`fputc``fgetc``fputc``fputc`

如果你想覆盖你刚刚读到的字符，你必须使用`fseek`倒回位置一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:39:03.830

我认为 fseek 会像下面这样工作：

```
int opr =0;
for (;;)
{
fseek(fp,opr,SEEK_SET)
if((c=fgetc(fp))==EOF) break;
buff1=c;
if(choice==1)
{
        buff1=buff1+key;
        c=buff1;
        fseek(fp,opr,SEEK_SET); 
        fputc(c,fp);
        printf("\n%d",buff1);
        opr++:
}
else
{
 ....  //Similarly for else loop.
}
} 
```

# javascript - Jquery ajax简单表单不起作用

> ID：14264622
> 
> 赞同：0
> 
> 时间：2013-01-10T18:17:59.373
> 
> 标签：javascript, jquery, html, ajax

我通过 AJAX 将表单数据发送到 PHP 文件，使用 jquery 我希望我可以轻松地发送数据，因为它只是一个文本框等。在提交点击事件时，表单数据应该被序列化并发送到 submit.php，然后我应该从 php 文件中得到一个带有响应的警报。为什么它不起作用？谢谢。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script>
$('#submit').click(function (e) { 
e.preventDefault(); 

$.ajax({type:'POST', url: 'submit.php', data:$('#myform').serialize(), success:
function(response) {
alert(response);
}});

});

</script> 
```

然后是 HTML：

```
<form id="myform" >
<input type="text" name="content" value="button should be on same line" /><input 
type="submit" class="button" value="Submit"  id="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:20:44.853

你还没有初始化 DOM 吗？

```
$(document).ready(function(){    
   // do your work here
}); 
```

编辑 ：

尝试这个：

```
 $("#submit").live("click", function (e) {
            e.preventDefault(); 

          $.ajax({type:'POST', url: 'submit.php', data:$('#myform').serialize(), success:
            function(response) {
              alert(response);
             }});
           });

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:24:38.313

首先，尝试确定表单是否正确提交。尝试提交

```
 url: '/submit.php' 
```

相反，因为那可能不是正确的路径。

其次，尝试发送未序列化的值，看看是否正确。

# java - 来自 youtube api 的空响应

> ID：14264624
> 
> 赞同：0
> 
> 时间：2013-01-10T18:18:06.037
> 
> 标签：java, youtube, youtube-api

我从 youtube api 得到空响应，不知道为什么。

```
 public void test () throws JSONException, IOException, ServiceException
    {
      YouTubeService youtube = new YouTubeService (clientId);
      URL feedUrl = new URL ("http://gdata.youtube.com/feeds/api/videos");
      YouTubeQuery query = new YouTubeQuery(feedUrl);

      query.setFullTextQuery("?category=music");

      VideoFeed videoFeed = youtube.query(query, VideoFeed.class);
      List<VideoEntry> videoEntry = videoFeed.getEntries();

      System.out.println (videoEntry.get(0).getMediaSource());
    }//end 
```

这段代码只是打印出 null 我在做什么错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:53:59.007

我认为您不想在那里调用`setFullTextQuery()`并传入随机 URL 查询参数。我不知道当你这样做时最终会构建什么 URL，但它几乎肯定不是你想要的。

相反，请按照[https://developers.google.com/youtube/2.0/developers_guide_java#Searching_Categories_and_Keywords](https://developers.google.com/youtube/2.0/developers_guide_java#Searching_Categories_and_Keywords)中的示例设置类别过滤器。

# c# - 为 DB 添加本地 WCF 服务

> ID：14264625
> 
> 赞同：0
> 
> 时间：2013-01-10T18:18:07.923
> 
> 标签：c#, .net, visual-studio, wcf-data-services

我正在尝试检索一些数据，但我尝试访问的服务位于封闭的 ip 连接后面，因此我无法从个人电脑测试我的代码。有人告诉我添加我无法访问的服务中继的数据库。

我已经添加了数据库，但是现在我还需要添加服务，这样我就可以开始测试这是我卡住的地方，我得到的只是服务的以下代码：

数据库包含在解决方案中，它的工作名称为：PUBS.MDF 我现在需要添加以下服务，以便我可以引用它，然后测试我的代码。

```
[ServiceContract]
public interface IPubs
{
    [OperationContract]
    List<Publication> GetTopTitles();

    [OperationContract]
    List<Publication> GetTitles(string SearchString);

    [OperationContract]
    PublicationDetail GetPublicationDetails(string PubID);
}

[DataContract]
public class Publication
{
    [DataMember]
    public string PubID { get; set; }
    [DataMember]
    public string Title { get; set; }
}

[DataContract]
public class PublicationDetail
{
    [DataMember]
    public string PubID { get; set; }
    [DataMember]
    public string Title { get; set; }
    [DataMember]
    public List<string> Authors { get; set; }
    [DataMember]
    public string Description { get; set; }
    [DataMember]
    public string Publisher { get; set; }
    [DataMember]
    public DateTime PubDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:27:01.153

如果您只有 IPubs 和数据库的代码，您*可以*编写一个实现 IPubs 的 Pubs 类，但您会猜测它是如何工作的，因此它不是一个正确的测试。

我建议你回到提供接口和数据库的人那里，索要一份他们拥有的实现 IPubs 的服务类的副本。如果他们无法提供，您可以要求他们定义哪些输入应该产生哪些输出，然后创建一个模拟服务，您可以测试您的客户端。

# c++ - 使用高斯递归滤波器滤波后的奇怪结果

> ID：14264630
> 
> 赞同：-2
> 
> 时间：2013-01-10T18:18:22.213
> 
> 标签：c++, image-processing, opencv, gaussian

我使用 OpenCV 和 c++ 实现了高斯递归滤波器（由 R. Deriche 编写）。但是，我得到的结果很奇怪。我还尝试将生成的图像标准化为 0 到 255 之间，但即使这样也无济于事。

任何帮助都会很棒 ![输入和输出图像](../Images/95d4c41ed0c99ec6788eb5d3c0708028.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:19:25.663

图像必须作为输入中的浮点数。必须对此浮动图像进行处理，然后使用

```
normalize(output, output,0,255,NORM_MINMAX,CV_8UC1); 
```

感谢您的帮助。

# vim - Vim 中的这些红色箭头是什么意思？

> ID：14264635
> 
> 赞同：4
> 
> 时间：2013-01-10T18:18:31.627
> 
> 标签：vim, macvim

在 MacVim 中编辑 .pt 文件（我已将其配置为突出显示为 XML）时，我会在侧面看到这些有趣的红色小箭头。

![截屏](../Images/f04452caaa8acd3897408f09ef3f74c6.png)

这些是什么意思？这是什么“功能”，我在哪里可以找到有关它的更多信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:44:48.123

我并不是要从 Eduan 那里抢风头，但是完全删除 syntastic 可能有点夸张，因为它可能是一个非常有用的插件。

相反，您应该阅读综合文档，`:h syntastic`并四处寻找处理“符号”的选项。

另一方面，放弃 Janus 的建议……我完全支持它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:36:17.353

这些箭头很可能是由[Syntastic](https://github.com/scrooloose/syntastic)插件添加的，您可能会以某种方式从 Janus 中删除该插件。

另外，正如我在评论中提到的那样。你不应该使用 Vim 发行版，原因如下：

这被认为是不好的做法，这是主要原因之一。至少它来自经验丰富/高级/专家的 Vim 用户，我不声称自己是其中的任何一个，但我当然不是初学者。:)

但最重要的原因是因为它会减慢你的速度。不止一种方式。由于您不了解 Vim，因此它会减慢您的速度，因为您没有配置它，发行版做了，当然您通常可以覆盖他们的设置，但这绝对与您自己做的不一样。

更大的可能是因为你需要同时学习插件所做的一切。那不好。如果您事先对所有插件感到满意，这当然会改变。

例如，现在，您没有添加那些箭头，但发行版添加了。所以你很困惑，因为你不知道它，但它仍然存在。

从一个熟练的（如果我有资格）Vim 用户的角度来看，这只是我的两分钱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T13:49:26.677

看起来您的标题的“xmlns：tal”部分有语法错误（与图像中的其他冒号相比，该冒号看起来很时髦），尽管也可能是 Syntastic 抱怨不正确理解 .pt 后缀（我认为这不是问题）。从获取 Syntastic 帮助 ( `:h syntastic`) 中，您可以找到该`:Errors`命令，该命令将尝试为您提供有关错误原因的提示。例如，我愚蠢地在多行属性列表中插入了一个新元素，然后谷歌搜索将我带到了这里。

当然，正如其他人所建议的那样，卸载 Syntastic、Janus 或 vim 也会删除错误指示器。

# iphone - 来自整数的指针，没有强制转换错误

> ID：14264636
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:18:32.700
> 
> 标签：iphone, xcode, pointers, theos

有人可以帮我解决这个错误吗？我已经在我正在处理的另一个调整中使用了它，并且获得 intValue 没有问题，但由于某种原因，现在是这样，我正在通过 theos 创建一个 WeeAppPlugin

```
typedef enum {
    appleSMS = 0,
    biteSMSClient = 1
} WSSMSClient;

typedef enum {
    appleTwitter = 0,
    twitkaflyClient = 1
} WSTwitterClient;

static WSSMSClient *smsClient;
static WSTwitterClient *twitterClient;

- (void)loadSettings {
    [_settings release];
    _settings = [[NSDictionary alloc] initWithContentsOfFile:@"/var/mobile/Library/Preferences/com.michaelpoole.weesocial.plist"];
    smsClient = [[_settings objectForKey:@"smsClient"] intValue];
    twitterClient = [[_settings objectForKey:@"twitterClient"] intValue];
} 
```

错误是

```
WeeSocialController.m:213: warning: assignment makes pointer from integer without a cast
WeeSocialController.m:214: warning: assignment makes pointer from integer without a cast 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:21:01.187

使用这种方式，不需要对枚举进行指针

```
static WSSMSClient smsClient;
static WSTwitterClient twitterClient; 
```

# magento-1.7 - Magento：object->save() 不插入数据库

> ID：14264639
> 
> 赞同：2
> 
> 时间：2013-01-10T18:18:49.980
> 
> 标签：magento-1.7

`model->save()`不插入数据库。Magento 缓存已关闭。
我没有收到任何问题，没关系，但它没有插入数据库。
我的代码如下：

```
try
{
    $cusSite = Mage::getModel('themeeditor/customersite');
                $cusSite->setData(array("customer_id" => 1,
                              "website_id" => 1,
                              "store_group" => 1,
                              "store_id" => 1));            
                $query = $cusSite->save();
}
catch(Exception $e)
{
    echo $e->getMessage;exit;
} 
```

这是我的**代码\local\FS\ThemeEditor\etc\config.xml**

```
 <models>
                <themeeditor>
                    <class>FS_ThemeEditor_Model</class>
                    <resourceModel>themeeditor_mysql4</resourceModel>
                </themeeditor>
                <themeeditor_mysql4>
                    <class>FS_ThemeEditor_Model_Mysql4</class>
                    <entities>
                        <customersite>
                            <table>themeeditor_customersite</table>
                        </customersite>
                    </entities>
                </themeeditor_mysql4>
            </models>
<resources>             
            <themeeditor_setup>
                <setup>
                    <module>FS_ThemeEditor</module>
                    <class>Mage_catalog_Model_Resource_Eav_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </themeeditor_setup>
            <themeeditor_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </themeeditor_write>
            <themeeditor_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </themeeditor_read>
        </resources> 
```

这是我的**代码\local\FS\ThemeEditor\Model\Customersite.php**

```
<?php

class FS_ThemeEditor_Model_Customersite extends Mage_Core_Model_Abstract
{
    public function _construct()
    {
        parent::_construct();
        $this->_init('themeeditor/customersite');
    }
} 
```

这是我的**代码\local\FS\ThemeEditor\Model\Mysql4\Customersite.php**

```
<?php

class FS_ThemeEditor_Model_Mysql4_Customersite extends Mage_Core_Model_Mysql4_Abstract
{   
    public function _construct()
    {    
        // Note that the billingaddress_id refers to the key field in your database table.
        $this->_init('themeeditor/customersite', 'customer_id');
    }
} 
```

这是我的**代码\local\FS\ThemeEditor\Model\Mysql4\Customersite\Collection.php**

```
<?php

class FS_ThemeEditor_Model_Mysql4_Customersite_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract
{
    public function _construct()
    {
        parent::_construct();
        $this->_init('themeeditor/customersite');
    }
} 
```

这是我的**代码\local\FS\ThemeEditor\sql\themeeditor_setup\mysql4-install-0.1.0.php**

```
<?php 
$installer = $this;

$installer->startSetup();

$installer->run("
DROP TABLE IF EXISTS {$this->getTable('themeeditor_customersite')};
CREATE TABLE {$this->getTable('themeeditor_customersite')}(
    `customer_id` int(10) unsigned NOT NULL,
    `website_id` int(10) unsigned NOT NULL,
    `store_id` int(10) unsigned NOT NULL,
    `store_group` int(10) unsigned NOT NULL,
    FOREIGN KEY (`customer_id`) REFERENCES {$this->getTable('customer_entity')} (`entity_id`) ,
    PRIMARY KEY (`customer_id`)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;");

$installer->endSetup(); 
```

我不知道它无法插入数据库的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-27T05:12:19.987

我有一个类似的问题。因为我的主键不是自动生成的，Magento 看到 Id 字段有一个值，并假设保存是更新而不是插入。解决方法是将以下行添加到您的 Model_Resource 类中：

```
protected $_isPkAutoIncrement = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:17:12.237

在保存之前尝试将当前商店 ID 设置为管理商店：

```
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID); 
```

# r - 将存储在 R 中的数据帧导入 Rattle

> ID：14264640
> 
> 赞同：1
> 
> 时间：2013-01-10T18:18:59.683
> 
> 标签：r, dataframe

这个问题有点模棱两可，我想这反映了我在这方面的幼稚。可能有多种解决方案或接近它的“更好”方式。对所有想法开放。

假设我已经将一个 csv 文件`f`导入到 R 中，并且在对相应的数据框进行了一些修改之后，我有了一个新的数据框`df`。我怎样才能导入`df`到 Rattle？将文件`f`导入 Rattle，然后在 Rattle 中进行更改以获得`df`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:52:17.443

您可以简单地将修改后的数据框保存`df`到新的 CSV 文件中，然后将其导入 Rattle。这是一个例子：

```
write.csv(df,file="myfile.csv") 
```

`write.table`如果您想对输出文件格式进行更多控制，您也可以

# javascript - 将 lat/lng 坐标转换为给定旋转地图上的像素

> ID：14264642
> 
> 赞同：2
> 
> 时间：2013-01-10T18:19:08.303
> 
> 标签：javascript, math, map

如何将 lat/lng 坐标转换为旋转地图（div）上的像素？

扭曲的是地图没有指向北方，而是倾斜了 10 度……而且我的高中数学不及格！

我发现了其他几个问题，这些问题在 指向[此处](http://www.learntby.me/javascript/latLngconversion.php)[的朝北地图上进行转换](https://stackoverflow.com/questions/8898120/conversion-of-lat-lng-coordinates-to-pixels-on-a-given-map-with-javascript)。

然而，当地图旋转时，我不完全确定如何做到这一点。

该地图是伦敦某地点的 3*3 公里地图。

我正在使用 javascript，但任何语言都可以:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:39:58.703

你有两张地图。现实以经度和纬度测量，而您绘制的地图以（我认为）像素测量。你需要从一个转换到另一个。用矢量数学来做这件事，分三步做。

## 1.) 找到从原点到要映射的点的原始矢量。

```
let O = <Ox, Oy>; 
(the origin in lat and long of your map).

let M = <Mx, My>; 
(the point in lat/long that you want to convert to a pixel on your drawn map)

let V := M - O = <Mx - Ox, My - Oy>; 
(This is a vector from origin to the point you want to convert.) 
```

作为一个向量，它包含两个数学量，方向和大小。我们需要将这两个量从我们的纬度经度坐标系转换到我们的新像素坐标系。

## 2.) 第一级。

比例是一个倍数，弄清楚它是什么并将你的向量乘以它。基本它是每度纬度/经度多少像素的倍数。

```
let c = our 'zoom' multiple. 

Scaling is as easy as multiplying our vector by our scalar.

cV = <cVx, cVy>; 
```

## 3.) 然后旋转

旋转是一个三角函数。旋转向量的 X 等于 sin(t)|V| 并且旋转向量的 Y 等于 cos(t)|V| 其中 t 是我们的旋转量（度数或弧度，具体取决于您定义余弦/正弦函数的方式。

注意：缩放和旋转是线性函数。这意味着您在缩放旋转或旋转然后缩放时执行此操作的顺序无关紧要，其答案相同。

一次完成所有操作看起来像这样：

## 矢量符号：

```
let O := the origin 
let M := the point you want to map. 
let R(V,t) := a function to rotate vector V by t. 
let c := or zoom or scale multiple. 

solve for P.

P = c * R(M-O, t). (Or since R and c are linear R(c(M-O), t);  ) 
```

## 有序对符号：

```
let O := <Ox, Oy>

let M := <Mx, My>

let R(V,t) = < cos(t) * ((Mx - Ox)^2 + (My - Oy)^2)^.5
               sin(t) * ((Mx - Ox)^2 + (My - Oy)^2)^.5 >

Note : |M - O| = ((Mx - Ox)^2 + (My - Oy)^2)^.5

solve for P.

<Px, Py> = < c * cos(t) * ((Mx - Ox)^2 + (My - Oy)^2)^.5
             c*  sin(t) * ((Mx - Ox)^2 + (My - Oy)^2)^.5 > 
```

# javascript - 检查 URL 是否包含 Javascript 中的参数

> ID：14264643
> 
> 赞同：-3
> 
> 时间：2013-01-10T18:19:18.030
> 
> 标签：javascript, regex

我有这个字符串，

```
var someStr = "http://test.com:4023/somespace/fewusers?LogicalId=lid%3A%2F%2Fkpr.social.1
&kprThemeName=kprBlue&kprCurrentLocale=en-US&kprCurrentLanguage=en-US
&kpr10spaceShell=1&kprspaceVersion=10.34.0&kprStyle=0.0"; 
```

在一个 js 文件中，我想检查是否`someStr`包含`LogicalId=lid%3A%2F%2Fkpr.social.1`.

我发现很难为此写一个`regx`。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:20:19.440

为什么不直接使用`indexOf`？

```
someStr.indexOf("LogicalId=lid%3A%2F%2Fkpr.social.1") >= 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:20:38.190

不要使用正则表达式，只需`indexOf`：

```
var exists = someStr.indexOf("LogicalId=lid%3A%2F%2Fkpr.social.1") > -1; 
```

但是，正则表达式版本可能是这样的：

```
var exists = new RegExp("LogicalId=lid%3A%2F%2Fkpr.social.1").test(someStr); 
```

# javascript - 在初始 .ajax 调用之外使用 JSON 数据 - 访问剩余的 JSON 数据

> ID：14264647
> 
> 赞同：2
> 
> 时间：2013-01-10T18:19:32.250
> 
> 标签：javascript, jquery, json, codeigniter, jquery-masonry

[这部分是对我以前的问题](https://stackoverflow.com/questions/14150228/codeigniter-ajax-response-contains-data-but-output-is-undefined)的扩展：

我现在可以从我的 CI 控制器成功返回 JSON 数据，它**返回：**

```
{"results":[{"id":"1","Source":"My Source","Title":"My Title". . . . 
```

**控制器**：

 **```
function outputAjax()
{
    $this->load->model('my_model');
    $data['results'] = $this->site_model->getInfo();
    $this->output->set_output(json_encode($data));
} 
```

这是我用来检索`.ajax`请求的当前脚本：

```
$(document).ready(function()
        {    
            $.ajax(
            {
                url: 'http://localhost/project/index.php/controller/outputAjax',
                dataType:'json',
                success: function(data) 
                {   
                    var limit = 19; //how many json objects are needed initially
                    var arr = []; // item.id of objects that have been used 
                    $.each(data.results, function(index,item)
                    {
                        if (index > limit) return false; // gets required initial json objects
                        arr.push(item.id); // stores used json objects id's

                        // whole bunch of checks on item.id , item.Title, item.Description, etc...

                        $("#masonry-content").append('<div class="item" ' + item.id + item.Title + ' ... </div>');
                    }); 
```

如上面的代码所示，我目前正在获取 JSON 数据的前 20 个对象并将它们附加到页面容器中。这工作正常，但是..

**我遇到的问题**是，我想`time interval`用最初返回的 JSON 数据的其他对象更新已附加到页面的 20 个 div 中的内容。我觉得最好的方法是在页面上静态布局 div，因为总会有相同的数量，然后相应地更新这些 div 中的数据。

**我的问题**是，一旦超出初始 .ajax 调用的范围，我如何仍能访问返回的 JSON 数据。

**例如：**如果我让脚本设置保持原样，在我使用前 20 个 JSON 数据对象 ( ) 对容器进行初始`.ajax`调用和内容之后。如何访问 JSON 数据中的其余对象？`append()``item`

我已经假设跟踪返回的对象的最佳选择是将每个对象的 item.id 存储在数组中`arr[ ]` *如果这没有意义或者它们是一种更简单的方法，请纠正我。*但是，我仍然不知道如何访问剩余的 JSON 数据*对象*？

我觉得我好像遗漏了一些明显的东西，比如让我的 javascript 更加*面向对象*会有所帮助，所以我可以单独访问每个 json 对象并对其执行不同的功能，但我觉得我可能会迷失一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:48:44.943

我认为您可以将 json 存储在全局变量中，并根据需要循环遍历项目，从 20 开始，`setDivs(20)`在成功加载 json 后调用。

```
// Declaration of global variables
data = ''; // JSON data will be stored here
myurl = 'http://localhost/project/index.php/controller/outputAjax';
index = 0;

$(document).ready(function () {
    $.getJSON(myurl, function (JSON) { data = JSON; setDivs(20); });
    $('#next20').click(function() { setDivs(20); });
});

function setDivs(num) {
    $("#masonry-content").empty();
    for (var i = index ; i < index + num -1; i++) {
        $("#masonry-content").append('<div class="item" ' + data["results"][i].id + data["results"][i].Title + ' ... </div>');
    }
    index += num;
} 
```

我还添加了代码，该代码将`#masonry-content`在单击页面上的元素时使用 json 对象中的下 20 个 div 更新您的元素`#next20`。

当然，我不知道您的`#masonry-content`元素一开始是否为空。如果不是，则`<div id="json-data"></div>`在`#masonry-content`元素中添加类似 a 的内容，并通过替换两个实例来相应地更新上面的`$('#masonry-content")`代码`$('#json-data')`

如果`data["results"][i]`不起作用，也许可以尝试`data.results[i]`。

如果您使用的是 Chrome，请打开控制台 (CTRL+SHIFT+J) 并键入`data`并按 Enter。如果 JSON 已成功加载，您应该能够探索数据对象的树。然后您可以在控制台中使用它，尝试`data["results"]`等等`data.results`，并继续按您的方式工作（即尝试`data["results"][0]`并验证它是否拉动了第一个项目）。

**更新：**

这是一个有效的[JSON/AJAX Ticker](http://ticker.weisser.co/)示例，它每 4.5 秒随机交换项目。它是为了回应 twhyler[关于 stackoverflow 的后续问题](https://stackoverflow.com/questions/14288513/track-which-json-objects-have-been-output/14299172#14299172)而构建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T20:21:07.610

您可以简单地在您的 ajax 调用之外声明一个变量，然后在您的 ajax 函数中将变量值完整地更新为 json 对象。见下文我将变量命名为`data`

```
$(document).ready(function()
        {

         var data = '';

            $.ajax(
            {
                url: 'http://localhost/project/index.php/controller/outputAjax',
                dataType:'json',
                success: function(data) 
                {   

                    data = data;

                    }); 
```

但是，我会亲自创建一个模板 div，说明您希望单个元素如何显示，然后只需填写数据，而不是尝试在 20 个位置搜索特定标签，然后用新数据替换该数据。`$("#masonry-content").empty();`我认为基本上清空然后使用 append 或类似的东西用新元素重新填充它会更容易和有效。**

# ios - 如果 Count 不等于初始数据，UIScrollView 在刷新后不响应

> ID：14264649
> 
> 赞同：0
> 
> 时间：2013-01-10T18:19:34.823
> 
> 标签：ios, objective-c, uitableview, uiscrollview, paging

我遇到了一个非常奇怪的问题。我有一个视图，上半部分是 UITableView，下半部分是启用分页的 UIScrollView（总共 2 页）所以基本上，如果您点击 TableView 中的一个单元格，数据将填充到下面的视图中。我正在从网络中提取填充 UITableView 的请求。

当我加载应用程序时，一切正常，刷新工作正常。出于某种原因，当我从表格视图中删除一个单元格并执行重新加载时，我的滚动视图分页停止响应......我不知道是什么原因造成的。数据仍将填充在视图中，但我无法分页到其他信息视图。

我不确定在执行刷新时要发布什么代码，它只是这样做：

```
[Request allOpenRequestsWithBlock:^(NSArray *requestsFromWeb, NSError *error) {
    if (error) {

        [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", nil) message:[error localizedDescription] delegate:nil cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"OK", nil), nil] show];
         [self performSelector:@selector(stopLoading) withObject:nil afterDelay:1.0];
    } else {
        NSLog(@"Number of Open Requests: %d", [requestsFromWeb count]);
        [self.openRequestFromNet removeAllObjects];
        self.openRequestFromNet = [NSMutableArray arrayWithArray:requestsFromWeb];
        [self.tableView reloadData];
        //self.openRequestLoaded = true;

         [self performSelector:@selector(stopLoading) withObject:nil afterDelay:1.0];
    }

} forEID: idNumberFromLogin]; 
```

看起来如果 openRequests 的数量与我的 ScrollView 冻结的 openRequests 的初始数量不同，但滚动视图仍会更新数据，只是分页消失了。

我不知道为什么？！

UITableViewController 类甚至影响 UIScrollView 的唯一一次是它通过发送 NSNotification 在 ScrollView 中填充视图

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
     MyOpenRequestCell *cell = [[MyOpenRequestCell alloc] init];
    cell = (MyOpenRequestCell *)[self.tableView cellForRowAtIndexPath:indexPath];
    [[NSNotificationCenter defaultCenter] postNotificationName:kMyDidSelectNotification object:[cell.requestID text]];
} 
```

我感觉这可能是指针的问题？但我实际上只是向它发送一个不直接与内部 UIScrollView/Views 一起使用的 NSString。它用于进行另一个调用以获取该请求编号的数据。

谢谢！

# javascript - 当使用 Javascript for...in 迭代 JSON 时，返回的最终键是“remove”

> ID：14264652
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:19:42.903
> 
> 标签：javascript, json, google-chrome

可以肯定，这是一个奇怪的现象。首先，我使用的是 Chrome 版本 23.x，还没有尝试在其他浏览器中重现此功能。

我从表单的服务器收到一个 JSON 数组：

**JSON**

```
{
"layout":0,
"caption":"Work History",
"cols":[
   {"field":"company","label":"Company Name","hidden":false,"order":-1,"validationType":2,"list":[]},       {"field":"date_start","label":"From","hidden":false,"order":-1,"validationType":1,"list":[]},
   {"field":"date_end","label":"Until","hidden":false,"order":-1,"validationType":0,"list":[]},
   {"field":"position","label":"Title","hidden":false,"order":-1,"validationType":2,"list":[]},
   {"field":"description","label":"Description","hidden":false,"order":-1,"validationType":0,"list":[]},
   {"field":"project","label":"Project","hidden":false,"order":-1,"validationType":64,"list":[]}
   ]
} 
```

然后，我尝试使用 Javascript 循环遍历 cols 对象"

**Javascript**

```
for (var c in json.cols) {
    console.log("col name: " + c);
} 
```

谷歌浏览器的控制台打印以下内容：

**输出**

```
col name: 0
col name: 1
col name: 2
col name: 3
col name: 4
col name: 5
col name: remove 
```

首先，应该只有 6 个输出。其次，这个最终的“删除”密钥从何而来？为什么要上市？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:24:59.853

您`obj.json.cols`实际上是一个数组，而不是一个对象，因此您应该使用循环对其进行迭代`for(;;)`。我相信你正在寻找这样的东西：

```
for (var i=0; i<json.cols.length; i++) {
    console.log("col name: " + json.cols[i].label);
} 
```

`Array.prototype`此外，您的网页上似乎有一些脚本弄乱了，就像`for..in`循环一样，您*不*应该看到`remove`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T18:25:07.590

用于`if( json.cols.hasOwnProperty(c) ) { ... }`将代码包装在[for...in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环中。

取自[mdn](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)：

> 如果您只想考虑附加到对象本身的属性，而不是其原型，请使用**getOwnPropertyNames**或执行 **hasOwnProperty**检查（也可以使用**propertyIsEnumerable ）。**
> 
> for...in 循环以任意顺序迭代**对象的属性**

**JavaScript：**

```
for (var c in json.cols) {
    if( json.cols.hasOwnProperty(c) ) {
      console.log("col name: " + c);
    }
} 
```

**[例子](http://jsfiddle.net/8DqjS/)**

# asp.net - 是否可以以编程方式显示下拉列表的列表？

> ID：14264661
> 
> 赞同：0
> 
> 时间：2013-01-10T18:20:20.120
> 
> 标签：asp.net, drop-down-menu

每个 ListViewItem 都有几个下拉列表和文本框。所有文本框的**Autopostback**属性都设置为**true**。当页面由于下拉列表而回发时，我希望下一个下拉列表在下次加载页面时具有焦点。

我不仅希望下一个下拉列表具有焦点，而且还希望部署它的列表。以编程方式部署列表是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:23:30.930

我认为您所追求的是我们称之为**Cascading DropDown**的东西，这不是正确的吗？

如果您使用的是 ASP.NET，我建议您尝试使用[ASP.NET Ajax Control Toolkit](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/)并特别查看[**CascadingDropDown**](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)。

* * *

从你的评论

> ...下拉列表仅显示 1 个项目。只有当您单击左侧的箭头时，下拉列表才会显示所有项目。我想要的是让下拉列表显示所有项目，而无需用户单击箭头。

这不是 DropDownList，它只是一个 List，在 ASP.NET 中，该控件称为[**ListBox**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listbox.aspx)：

```
 <asp:ListBox id="ListBox1" 
       Rows="6"
       Width="100px"
       SelectionMode="Single" 
       runat="server">

     <asp:ListItem>Item 1</asp:ListItem>
     <asp:ListItem>Item 2</asp:ListItem>
     <asp:ListItem>Item 3</asp:ListItem>
     <asp:ListItem>Item 4</asp:ListItem>
     <asp:ListItem>Item 5</asp:ListItem>
     <asp:ListItem>Item 6</asp:ListItem>

  </asp:ListBox> 
```

或者简单地说：

```
 <asp:ListBox id="ListBox1" 
       Rows="6"
       Width="100px"
       SelectionMode="Single" 
       runat="server" /> 
```

和

```
ListBox1.DataSource = myList;
ListBox1.DataBind(); 
```

# android - 是否可以在非 root 设备上检索我的 android 应用程序的数据库文件？

> ID：14264673
> 
> 赞同：2
> 
> 时间：2013-01-10T18:20:58.377
> 
> 标签：android

我的设备没有植根，我想检查我开发的应用程序数据库的内容。如何将此数据库下载到我的台式电脑，以便我可以检查内容。我已经用 astro 和 fileexpert 尝试过，但我无法访问我的应用程序的数据文件夹。有可能实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:27:09.177

使用应用程序代码，您必须**将数据库文件**从`/data/data/<application_package>/database/`目录复制到`/mnt/sdcard`然后您可以将该文件拉到您的系统中。

或者您可以在 Emulator 上运行您的应用程序，然后您可以从`/data/data/<application_package>/database/`emulator 植根访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:41:29.723

如果您可以使用 USB 线将设备插入开发计算机，则可以使用[adb 工具](http://developer.android.com/tools/help/adb.html)。特别是，该命令`adb pull`可用于从您的设备中检索任何文件。数据库文件位于`/data/data/<android_package_name>/database`. 使用命令行，完整的命令是：

```
adb pull /data/data<android_package_name/database 
```

然后可以使用该`sqlite3`工具连接数据库文件并检查它是否正确。或者，您可以使用`adb shell`直接连接到设备上的命令行并使用设备`sqlite3`工具检查数据库。（警告购买者：这适用于模拟器。我不确定是否`sqlite3`安装了物理设备。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:24:41.507

几个选项：

*   如果 apk 仍然是调试版本，您可以通过 adb shell 使用 run-as 命令将文件复制到外部存储，然后 adb 从那里拉取它。这需要一些 unix shell 知识，并且由于没有 'cp' 二进制文件，因此大多数使用 cat 和重定向。

*   您可以在程序中添加功能，将文件复制到外部存储进行检查。您必须实际编写代码来进行复制，因为没有文件复制功能。

*   您可以将文件的访问权限更改为世界可读，并直接 adb pull 它，尽管您将无法浏览它所在的目录树；考虑打印 logcat 的绝对路径或从包信息中确定它。

*   您可以在默认植根的模拟器上运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T19:04:09.393

如果您想要更多图形，可以从 IDE Eclipse 转到透视 DDMS，选择您的设备，然后从文件资源管理器选项卡中，查找路径 `/data/data/ <package name of your aplicacacion> /databases`，选择您的数据库文件，然后单击按钮“拉文件"（位于右上角）

然后，如果您想使用其他图形工具，例如可以使用 firefox 插件“SQLite Manager”。

# php - 是否需要确认导致显示未定义的会话变量？

> ID：14264679
> 
> 赞同：3
> 
> 时间：2013-01-10T18:21:13.090
> 
> 标签：php

我在下面有一个代码，它检查老师是否登录。通过会话检查教师登录状态的 $_SESSION 变量在 `member.php`脚本中。

```
<?php

session_start();

include('member.php');
include('teachername.php');
...

if ((isset($username)) && (isset($userid))){ 

...

}else{ 

echo "Please Login to Access this Page | <a href='./teacherlogin.php'>Login</a>";

}

?> 
```

现在，如果会话已过期，那么它会显示`Please Login to Access this Page`正确的消息。但是我遇到的问题是，当会话过期时，它开始在此页面上显示未定义`$_SESSION`的变量通知，因为我在此页面上有会话。

但它不会在会话到期后在每个页面上显示通知。它仅在用户必须确认退出的页面上显示。您在`include(teachername.php)`代码中看到它显示注销代码，如下所示：

```
<?php

...

        echo "Logged In: <b>{$_SESSION['teacherforename']} {$_SESSION['teachersurname']}</b> | <a id='teachlogout' href='./teacherlogout.php'>Logout</a>";
        echo "<br/><a id='resetlink' href='./resetpass.php'>Reset Your Password</a>";

        ?> 
```

当用户单击`Logout`链接时，它会执行`session_destroy()`以下操作：

```
<?php

        if ((isset($username)) && (isset($userid))){

        session_destroy();

            echo "You have been Logged Out | <a href='./home.php'>Home</a>";
        }

        else {

            echo "You are Not Logged In";

        }

        ?> 
```

我要问的是，当会话在某些页面中过期时，它不会破坏会话变量，因为我在这些页面中放置了用户需要在注销之前进行确认的确认，因为它似乎是唯一的页面显示未定义会话变量错误的问题都在这些页面上，其他 php 脚本在会话用完时没有这个问题。

以下是注销确认代码：

```
$(function() {   

    function logoutHandler() {
    return confirm("You are currently creating an Assessment, are you sure you want to logout?" + "\n" + "(Your current assessment details will be lost)" + "\n");
}

$('#teachlogout').click(logoutHandler); 
```

`#teachlogout`是注销链接的id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:25:12.400

您应该在尝试使用之前检查会话变量是否已设置。我将该代码放在 echo 语句之外。例如

```
$firstname = isset($_SESSION['teacherforename'])?$_SESSION['teacherforename']:''; 
```

然后将没有名称的用户视为未登录。

# python - scipy.spatial ValueError：“x 必须由长度为 %d 但形状为 %s 的向量组成”

> ID：14264682
> 
> 赞同：2
> 
> 时间：2013-01-10T18:21:18.907
> 
> 标签：python, scipy, kdtree

[Scipy](http://www.scipy.org/)有一个出色的[空间分析](http://docs.scipy.org/doc/scipy/reference/spatial.html)包，其中包括一个 K 维树。我正在尝试使用查询功能，它返回此错误：

> ValueError: x 必须由长度为 6 但形状为 (2,) 的向量组成

有谁知道这个错误指的是什么？

通过一些谷歌搜索，我发现它具有以下通用格式：

```
raise ValueError("x must consist of vectors of length %d but has shape %s" % (self.m, np.shape(x))) 
```

我相信[这](https://github.com/scipy/scipy/blob/master/scipy/spatial/kdtree.py)是源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:11:34.000

弄清楚了：

这个特定的值错误引用了用于构建 KD 树的数组的长度。

该`%d`值表示用于构建 KD 树`%s`的数组的长度，该值表示您用于查询的类数组对象的长度。

在我的示例中，该`%d`值为 6，因为我构建了一个 6 维数组。这个`%s`值是 2 因为我只给了它两个坐标：`(X,Y)`查询。

我的错误是我在构建 KD 树时不小心包含了 4 个额外的字段。现在两个值都是 2，一切都按预期工作。

# javascript - 如何在 Oracle Apex 中的页面刷新后保持突出显示的行？

> ID：14264686
> 
> 赞同：1
> 
> 时间：2013-01-10T18:21:25.833
> 
> 标签：javascript, jquery, oracle-apex

我有两份报告。单击主报告中的列链接会在辅助报告中显示有关它的详细信息，然后单击该链接会刷新页面（也许如果仅使用 AJAX 刷新第二个报告我不会遇到以下问题，但我认为这将更难实施和维护）。

我有一个这样的javascript函数来突出显示该行：

```
function highlight(pThis) {
    $x_RowHighlight($x_UpTill(pThis,'TR'), 'pink');
} 
```

但是当页面刷新时，该行当然不会保持突出显示。如果可能的话，我很想保持 pThis 的会话状态。

我还需要在辅助报告中放置一个下一步按钮，该按钮将显示主报告中下一行的详细信息，并突出显示该行。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:35:48.040

我整理了一个包含所有代码的示例页面：[http ://apex.oracle.com/pls/apex/f?p=54687:39](http://apex.oracle.com/pls/apex/f?p=54687:39)

因为我想说明一个列链接，所以我已经让它更多地参与了。单击链接时，该行也必须突出显示。请注意，只有当您保持在同一页面上（或者更确切地说，只要您在同一 IR 页面上），它才会像这样工作。我现在什至注意到，当您导航到页面并重置分页时，它会保持该行的颜色 - 哦，这是一个很好的跳转点。

我使用 rowindex 有一个很好的理由：IR 的好的解决方案并不真正存在，并且总是非常自定义编码。您实际上需要一个值（或多个值）来唯一标识行。这会带来一些问题，因为例如隐藏列不会在 HTML 中呈现。如果它在列中，则很可能用户可以隐藏或以某种方式从 html 中删除该列（不要显示它，应用分组，...）。

* * *

在查看 Matthew 自己的答案后，我编辑了我的示例应用程序页面以包含一种处理经典报告的方法。我会试着把它分开一点。
1）我不会通过减小宽度来“隐藏”我的列。只需使用列属性隐藏您的列并将类型更改为隐藏。
2）你并不真的需要一个列项目，除非你真的要记住这一点。但是我真的看不出它的意义，除非你允许点击整行（就像我在我的 IR 示例中所做的那样，但我对经典报告不屑一顾）
3) (a+b+c) 我完全做到了不同的。我认为将类分配给行元素是一种更好的方法，因为这样可以更好地进行操作和遍历。该`$x_RowHighlight`函数将`style`属性添加到`td`元素，我不喜欢那样。通过类和 CSS 控制样式更加通用。
我还认为这里不需要 AJAX！单击链接时，您可以直接设置项目值，而无需通过 ajax 调用。我还认为这不需要是同步调用（默认情况下 htmldb_Get 是），但可以是异步的，以免浏览器等待返回（没有）。
不过，如果您想像我的 IR 示例中那样设置它，则可能需要 ajax，以便单击行上的任意位置会选择该行。
至于选择下一行：在我的示例中，您需要将输入项的更改替换为单击链接列 - 应该不难！

* * *

使用 htmldb_Get 执行异步调用：

```
var ajaxRequest = new htmldb_Get(null, $v("pFlowId"), "APPLICATION_PROCESS=some_process", $v("pFlowStepId"));
ajaxRequest.addParam("x01","some value"); -- adds a parameter to the request, good for the x## variables
ajaxRequest.add("P1_EMPNO", "some value"); -- adds the key-value to p_args_names en values: page items!
ajaxRequest.getAsync(function(pResponse){
   if(pResponse.readyState==4&&pResponse.status==200){
      //call finished successfully
      console.log(pResponse.responseText);
   };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T00:38:01.107

行。在汤姆发布他的之前，我找到了解决方案。他对 JQuery index() 函数的使用非常棒；我希望我事先知道这件事。另一方面，就像汤姆提到的那样，在分页的情况下， index() 将很难或不可能使用。接下来是`The ROWID Column Method`，

我将把它分成 2 个答案，一个用于经典报告，一个用于 IR 报告。

以下是针对 CR 的。

1）添加一个rowid作为SQL查询的第一列，并将其别名设置为“”。在经典报表中，将列宽设置为 1，并在列格式下，在 CSS 样式中，放置`display:none;`.

2a) 将以下隐藏项添加到您的页面：`PX_CURRENT_ROW`, `PX_CURRENT_COLUMN`。2b)如果您想要下一个和上一个按钮，并将以下按钮添加到您的页面：`NEXT`, `PREVIOUS`。

3)a 在页面设置中，在 JavaScript 下，在页面加载时执行，添加以下内容：

```
bind_validations(); //Tom will note whom I have learned my APEX/JQ tactics from :)
highlight(); 
```

3b) 在页面设置中，在 JavaScript 下，在函数和变量声明中，为三个函数添加以下代码：标识、突出显示和 bind_validations。我们将从绑定验证开始，它会在单击列链接时将列的 TD 发送到 identify_row 函数。我正在使用一个 PLSQL 函数为我的报告返回一个 SQL 查询，因此由 JQuery 标识的所有列标题都是通用的 COL0x。如果您使用常规查询，请在列标题中使用数组。

```
function bind_validations() {
    var columnHeader = 'COL0';
    for (var i = 2; i <10; i++) {
        columnHeader = 'COL0' + i;
        $("td[headers='" + columnHeader + "']").find('a').each(function(){
            $(this).click(function(){
                if ($(this).text.length != 0) { //necessary for next/previous buttons 
                    identification(this);
                    window.location.href=this.href; //necessary for next/previous buttons
                }
            });
        });
    }
} 
```

3b) 现在是识别功能。这会在页面加载之前暂时突出显示该行（延迟效果很好，因为它让用户知道该行将被激活），使用 $x_UpTill 对通过前一个函数中绑定的链接传递给函数的 TD 进行。

```
function identification(pThis) {
    var currentColumn = $x_UpTill(pThis, 'TD');
    var currentColumnHeader = $(currentColumn).attr('headers');
    var currentRow = $x_UpTill(pThis,'TR');
    var currentRownum = $(currentRow).find("td[headers='COL01']").text(); 
    $x_RowHighlight(currentRow, 'pink');

    //AJAX
    /* As Tom mentions, AJAX is unnecessary: use f?p via column links instead. 
    In my particular situation, the idiosyncrasies render the passing of values
    through f?p inappropriate. The purpose of passing the column header is for
    the previous/next buttons, which will activate blank columns otherwise if 
    everyone of your columns has a link on it.
    */
    var get = new htmldb_Get(null, &APP_ID., 'APPLICATION_PROCESS=dummy', &APP_PAGE_ID.);
    get.add('PX_CURRENT_COLUMN' , currentColumnHeader);
    get.add('PX_CURRENT_ROW', currentRownum);
    gReturn = get.get();
    get = null;
} 
```

3)c 这里是高亮功能：

```
function highlight() {
    var currentRownum = $v('PX_CURRENT_ROW')
    $("tr").each(function() {
        var rownum = $(this).find("td[headers='COL01']").text(); //Use ' ' if you don't have generic columns like I do
        if (parseInt(rownum) == parseInt(currentRownum)) $x_RowHighlight(this, 'red');
    });
} 
```

4) 现在在下一个和上一个按钮上添加动态操作。对于 NEXT 按钮，执行动态操作：执行 JavaScript 代码，不要在页面加载时触发：

```
var currentRownum = $v('PX_CURRENT_ROW');
var currentColumnHeader = $v('PX_CURRENT_COLUMN');
$("tr").each(function() {
    var nextRownum = $(this).find("td[headers='COL01']").text();
    if (parseInt(nextRownum) == parseInt(currentRownum) + 1) { //use -1 for the previous button
        $(this).find("td[headers='" + currentColHeader + "']").find('a').trigger('click');
    }
}); 
```

对于上一个按钮，将条件更改为：`if (parseInt(nextRownum) == parseInt(currentRownum) - 1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:59:57.737

您可以通过使用 cookie 来实现这一点吗？我使用了我发现非常有用的[jquery cookie 插件。](https://github.com/carhartl/jquery-cookie)

我对 oracle-apex 一无所知，但下面是一个可能有效的基本 javascript/jquery 解决方案，

```
 $("tr").click(function (){ 
        var activeTR = function (){ 
            $(this).addClass('.active');
            $.cookie("activeTR","activated",({ expires:7, path: '/' }));
        };
    });

    if ($.cookie("activeTR") == "activated"){activeTR()} 
```

基本上将一个类添加到单击的 tr，然后添加一个 cookie 来说明哪个是单击的 tr，然后当页面加载时，它将该类重新应用到单击的 tr。

请注意，我还没有尝试过，所以它不会起作用，但这是一个让你开始的想法。

# php - PHP在没有runkit或其他方式声明命名空间的情况下重新定义常量

> ID：14264689
> 
> 赞同：0
> 
> 时间：2013-01-10T18:21:34.490
> 
> 标签：php

我正在做一个类似于 CodeIgniter 但带有命名空间的框架。我不想使用 runkit，因为许多托管服务提供商没有扩展。

命名空间基于文件类的路径，如果我也加载文件类，我知道命名空间有该类，但我不知道使用什么 sintax 来声明命名空间。

我为我的英语道歉。我将尝试用一个例子来解释我：

```
namespace \FlexIgniter\Core

class Load {
  public function loadClass($name, $ns) {
     runkit_constant_redefine("NAMESPACE_AUTO", $ns);
     $path = $this->class2path($class);
     include_once($path);
  }
} 
```

要加载的文件：

```
namespace NAMESPACE_AUTO;

class ToLoad {
  // do some stuff...
} 
```

谢谢。

PS：[https ://github.com/Localnet/FlexIgniter](https://github.com/Localnet/FlexIgniter)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:24:32.960

[以下是 PSR-0 的要求](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)：

以下描述了自动加载器互操作性必须遵守的强制性要求。

## 强制的

*   完全限定的命名空间和类必须具有以下结构`\<Vendor Name>\(<Namespace>\)*<Class Name>`
*   每个命名空间都必须有一个顶级命名空间（“供应商名称”）。
*   每个命名空间都可以拥有任意数量的子命名空间。
*   `DIRECTORY_SEPARATOR`从文件系统加载时，每个命名空间分隔符都会转换为 a 。
*   CLASS NAME 中的每个`_`字符都转换为 `DIRECTORY_SEPARATOR`. 该`_`字符在命名空间中没有特殊含义。
*   `.php`从文件系统加载时，完全限定的命名空间和类带有后缀。
*   供应商名称、名称空间和类名称中的字母字符可以是小写和大写的任意组合。

## 例子

*   `\Doctrine\Common\IsolatedClassLoader`=>`/path/to/project/lib/vendor/Doctrine/Common/IsolatedClassLoader.php`
*   `\Symfony\Core\Request`=>`/path/to/project/lib/vendor/Symfony/Core/Request.php`
*   `\Zend\Acl`=>`/path/to/project/lib/vendor/Zend/Acl.php`
*   `\Zend\Mail\Message`=>`/path/to/project/lib/vendor/Zend/Mail/Message.php`

## 命名空间和类名中的下划线

*   `\namespace\package\Class_Name`=>`/path/to/project/lib/vendor/namespace/package/Class/Name.php`
*   `\namespace\package_name\Class_Name`=>`/path/to/project/lib/vendor/namespace/package_name/Class/Name.php`

我们在这里设置的标准应该是无痛自动加载器互操作性的最低共同标准。您可以通过使用能够加载 PHP 5.3 类的示例 SplClassLoader 实现来测试您是否遵循这些标准。

## 示例实现

下面是一个示例函数，用于简单地演示上述提议的标准是如何自动加载的。

```
<?php

function autoload($className)
{
    $className = ltrim($className, '\\');
    $fileName  = '';
    $namespace = '';
    if ($lastNsPos = strrpos($className, '\\')) {
        $namespace = substr($className, 0, $lastNsPos);
        $className = substr($className, $lastNsPos + 1);
        $fileName  = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;
    }
    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

    require $fileName;
} 
```

## SplClassLoader 实现

以下要点是一个示例 SplClassLoader 实现，如果您遵循上面提出的自动加载器互操作性标准，它可以加载您的类。这是当前推荐的加载遵循这些标准的 PHP 5.3 类的方法。

*   [http://gist.github.com/221634](http://gist.github.com/221634)

# sql - 在 SQLite 中限制结果

> ID：14264690
> 
> 赞同：1
> 
> 时间：2013-01-10T18:21:40.840
> 
> 标签：sql, sqlite

我有两个表，`customers`（带有列 `A`, `B`）和`orders`（带有列`C`, `D`, `A`；最后一个是外键）。

此查询返回我感兴趣的数据：

```
SELECT customers.A, customers.B, orders.C, orders.D 
FROM customers, orders
WHERE customers.A = orders.A AND customers.B < 5 AND orders.D < 5 
```

如果我添加`LIMIT 10`，我将获得前十个 10 个结果（基本上是 10 个订单），但我想做的是根据唯一客户的数量限制输出。因此，结果中将恰好有 10 个唯一客户，因此至少有 10 个（但可能更多）订单。我认为可以使用子查询来做到这一点，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:29:23.537

像这样的东西：

```
SELECT c.A, c.B, orders.C, orders.D 
FROM (SELECT * FROM customers WHERE customers.B < 5 
      ORDER BY ....some-criteria... 
      LIMIT 10) c,
     orders
WHERE c.A = orders.A AND orders.D < 5 
```

（验证 sqlite`LIMIT`在子查询中成功解析。希望它不会`LIMIT`默默地忽略这一点）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:04:07.773

```
SELECT customers.A, customers.B, orders.C, orders.D 
FROM customers, orders
WHERE customers.A IN (
    SELECT DISTINCT customers.A 
    FROM customers, orders
    WHERE customers.A = orders.A AND 
          customers.B < 5 AND 
          orders.D < 5
    LIMIT 10
) AND customers.A = orders.A AND orders.D < 5 
```

子查询选择 10 个不同的客户，他们的 B < 5 和至少一个 D < 5 的订单。主查询选择在子查询中选择的所有客户（我假设 A 是 ID）及其 D < 5 的订单（我们不需要再次检查 B）

# css - 父元素大于屏幕的 CSS 中心元素

> ID：14264692
> 
> 赞同：0
> 
> 时间：2013-01-10T18:21:42.343
> 
> 标签：css, center

这是我的html：

```
<div id="bar">
    <div class="container">
        <div class="item"></div>
    </div>
</div> 
```

#bar 是 100% 并且溢出隐藏。

.container 为 1600 像素，边距：0 自动；将其居中。还有位置：相对；

.item 是 960px，我想把这个元素居中

当我的屏幕正好是 1600 像素时， .item 正确居中。但是当我把它变小时， .item 会向右移动更多。看起来计算出的边距总是 320px ((1600-960)/2) 并且是从 .container 相对计算的。但是浏览器会应用相对于视口的边距。

有谁知道当父级不可见时如何让浏览器应用相对于其父级的边距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:51:03.440

我在 jsfiddle 上提出了一个这样的例子，但使用了更小的尺寸，所以它是可见的。添加`margin: 0 auto;`到 .item 应该可以解决它。

[http://jsfiddle.net/EMHSs/](http://jsfiddle.net/EMHSs/)

# transactions - Mule ESB 3.3 异常策略和回滚莫名其妙的行为

> ID：14264693
> 
> 赞同：3
> 
> 时间：2013-01-10T18:21:47.033
> 
> 标签：transactions, esb, mule, rollback

**设置：**
表：`CREATE TABLE test (id int PRIMARY KEY NOT NULL, name varchar(25));`

**基本测试流程：**

![在此处输入图像描述](../Images/88be2c2b59be86bad28da7133a627294.png)

**前提条件：** 数据库已经有一条id=2的记录（强制SqlException）

**情况1：**

当按原样调用基本流程时，第二次插入由于主键违规而失败，并且第一次插入被回滚。似乎是一个合理的默认行为。

**案例二：**

**通过添加回滚异常策略**来修改基本流程，并在异常策略中添加一个记录器，以便在调用它时打印一些内容。
调用流时，由于主键冲突，第二次插入失败，第一次插入被回滚，**但**RollbackExceptionStrategy 永远不会被调用！
几乎没有人会期待。

所以这里的问题是：为什么不调用回滚异常策略，我需要做什么才能调用它？

**案例3：**

**通过添加捕获异常策略**来修改基本流程，并在异常策略中添加一个记录器，以便在调用它时打印一些内容。
调用流时，由于主键违规，第二次插入失败。这次调用了异常策略，但现在事务**没有**回滚。

这里的问题是：为什么事务没有被回滚，以及如何在不同于回滚策略的异常策略中强制回滚？

任何帮助将不胜感激

* * *

**Edit1**：这是流程的完整 xml（仅基本情况）：

```
<mule>
    <spring:beans>
        <spring:bean id="dataSource" name="dataSource" class="org.enhydra.jdbc.standard.StandardDataSource" destroy-method="shutdown">
            <spring:property name="driverName" value="org.h2.Driver" />
            <spring:property name="url" value="jdbc:h2:tcp://localhost/~/mule" />
            <spring:property name="user" value="sa" />
            <spring:property name="password">
                <spring:value></spring:value>
            </spring:property>
        </spring:bean>

        <spring:bean id="transactionFactory" name="transactionFactory" class="org.mule.transport.jdbc.JdbcTransactionFactory" />

    </spring:beans>

    <jdbc:connector name="dbConnector" dataSource-ref="dataSource" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database" />

    <flow name="TriggerFlow" doc:name="TriggerFlow">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP" />
        <vm:outbound-endpoint exchange-pattern="request-response" path="txFlow" doc:name="VM" />
    </flow>

    <flow name="TxFlow" doc:name="case1Flow">
        <vm:inbound-endpoint exchange-pattern="request-response" path="txFlow" doc:name="case1">
            <custom-transaction factory-ref="transactionFactory" action="ALWAYS_BEGIN" timeout="10" />
        </vm:inbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert" queryTimeout="-1" connector-ref="dbConnector" doc:name="insert into test values (1, 'Test 1')">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert" value="insert into test values (1, 'Test 1')" />
        </jdbc:outbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert2" queryTimeout="-1" connector-ref="dbConnector" doc:name="insert into test values (2, 'Test 2')">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert2" value="insert into test values (2, 'Test 2')" />
        </jdbc:outbound-endpoint>
    </flow>

</mule> 
```

* * *

**Edit2**：事实证明，案例 2 单独工作，但在更复杂的流程中不起作用，例如：

```
<mule>
    <spring:beans>
        <spring:bean id="dataSource" name="dataSource" class="org.enhydra.jdbc.standard.StandardDataSource" destroy-method="shutdown">
            <spring:property name="driverName" value="org.h2.Driver" />
            <spring:property name="url" value="jdbc:h2:tcp://localhost/~/mule" />
            <spring:property name="user" value="sa" />
            <spring:property name="password">
                <spring:value></spring:value>
            </spring:property>
        </spring:bean>

        <spring:bean id="transactionFactory" name="transactionFactory" class="org.mule.transport.jdbc.JdbcTransactionFactory" />

    </spring:beans>

    <jdbc:connector name="dbConnector" dataSource-ref="dataSource" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database" />

    <flow name="TriggerTxFlow" doc:name="TriggerTxFlow">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP" />
        <set-variable variableName="flow" value="#[message.inboundProperties['http.query.params']['flow']]" doc:name="Variable"/>
        <vm:outbound-endpoint exchange-pattern="request-response" path="#[flow]" doc:name="VM" />
    </flow>

    <flow name="case1Flow" doc:name="case1Flow">
        <vm:inbound-endpoint exchange-pattern="request-response" path="case1" doc:name="case1">
            <custom-transaction factory-ref="transactionFactory" action="ALWAYS_BEGIN" timeout="10" />
        </vm:inbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert" queryTimeout="-1" connector-ref="dbConnector" doc:name="insert into test values (1, 'Test 1')">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert" value="insert into test values (1, 'Test 1')" />
        </jdbc:outbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert2" queryTimeout="-1" connector-ref="dbConnector" doc:name="insert into test values (2, 'Test 2')">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert2" value="insert into test values (2, 'Test 2')" />
        </jdbc:outbound-endpoint>
    </flow>

    <flow name="case2Flow" doc:name="case2Flow">
        <vm:inbound-endpoint exchange-pattern="request-response" path="case2" doc:name="case2">
            <custom-transaction factory-ref="transactionFactory" action="ALWAYS_BEGIN" timeout="10" />
        </vm:inbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert" queryTimeout="-1" connector-ref="dbConnector" doc:name="Database">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert" value="insert into test values (1, 'Test 1')" />
        </jdbc:outbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert2" queryTimeout="-1" connector-ref="dbConnector" doc:name="Database">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert2" value="insert into test values (2, 'Test 2')" />
        </jdbc:outbound-endpoint>
        <rollback-exception-strategy doc:name="Rollback Exception Strategy" enableNotifications="false" maxRedeliveryAttempts="0">
            <on-redelivery-attempts-exceeded doc:name="Redelivery exhausted">
                <logger message="========= Inside Exception Strategy =========" level="INFO" doc:name="Logger"/>
            </on-redelivery-attempts-exceeded>
        </rollback-exception-strategy>
    </flow>

    <flow name="case3Flow" doc:name="case3Flow">
        <vm:inbound-endpoint exchange-pattern="request-response" path="case3" doc:name="VM">
            <custom-transaction factory-ref="transactionFactory" action="ALWAYS_BEGIN" timeout="10" />
        </vm:inbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert" queryTimeout="-1" connector-ref="dbConnector" doc:name="Database">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert" value="insert into test values (1, 'Test 1')" />
        </jdbc:outbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert2" queryTimeout="-1" connector-ref="dbConnector" doc:name="Database">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert2" value="insert into test values (2, 'Test 2')" />
        </jdbc:outbound-endpoint>
        <catch-exception-strategy doc:name="Catch Exception Strategy">
            <logger message="========= Inside Exception Strategy =========" level="INFO" doc:name="Logger"/>
        </catch-exception-strategy>
    </flow>

</mule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:45:27.033

**案例1**：耶！

**案例2**：

*为什么不调用回滚异常策略以及调用它需要做什么？*

根据[文档](http://www.mulesoft.org/documentation/display/MULE3USER/Rollback+Exception+Strategy)，应该调用该策略。这可能是您这边的配置问题，因为如果我添加：

```
<rollback-exception-strategy>
    <logger message="---> In Rollback exception strategy!!!" />
</rollback-exception-strategy> 
```

到“TxFlow”我可以看到控制台中记录的文本。

**案例3**：

*为什么事务没有被回滚？*

这是来自[doc的](http://www.mulesoft.org/documentation/display/MULE3USER/Catch+Exception+Strategy)*Catch Exception Strategy*的主要目的：

> 确保流处理的事务在发生错误时不会回滚（即事务永远不会“回滚”以重新尝试处理；Mule 提交事务。）

*如何在不同于回滚策略的异常策略中强制回滚*

我不认为你可以。您可以尝试从策略中抛出异常，但恐怕当时事务已经提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T21:24:09.040

试试这个在 ES 中强制回滚：

```
<custom-exception-strategy class="..." >
    <rollback-transaction exception-pattern="*"/>
</custom-exception-strategy> 
```

# php - 你如何在 MySQL 中存储零

> ID：14264700
> 
> 赞同：0
> 
> 时间：2013-01-10T18:22:22.623
> 
> 标签：php, html, mysql, post, checkbox

这似乎应该是一个简单的，但我已经搜索过，似乎无法弄清楚。我正在使用 PHP 更新 MySQL 数据库，该数据库将一些字段设置为布尔开关。网站上的触发器是一个复选框。当用户选中该框时，该值设置为 1，未选中时，该值为零。问题是，当我发送表单时，设置复选框时数据库更新正常，但是它不会将字段的值更新为零，它只是忽略它。我在未设置时回显了该值，以验证该变量是否确实设置为零。当我尝试清除文本框并且什么都不发送时，我发现了类似的问题。MySQL 只是忽略它并且不会清除该字段。我错过了什么吗？

这是我正在使用的代码示例：

```
<?php
if ($_POST) {   
    if (isset($_POST['box1'])) {
        $box1 = $_POST['box1'];
    }
    else {
        $box1 = 0;
    }
    $query = "UPDATE table SET box1 = '{$box1}'";
    $result = mysqli_query($dbc, $query);
}
    ?>

<form method="post" action="">
    <input type="checkbox" name="box1"> Box 1
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:40:37.897

`<input type="checkbox" name="box1">`

应该

`<input type="checkbox" name="box1" value="1">`

数据库中的数据类型`box1`应该是`INT`这样，即使它没有设置为`0`它仍然会被保存，`0`因为你根本不能在一个字段中存储任何内容`INT`作为数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:57:25.490

目前，如果没有在数组中传递任何值，则不会发生任何操作。

考虑以下...

```
...
$box1=0;

if ($_POST) {
    if (isset($_POST['box1'])) {
        $box1 = $_POST['box1'];
    }
}
    $query = "UPDATE boxtest SET box1 = $box1";
    $result = mysqli_query($dbc,$query);
    ?>

<form method="post" action=""/>
    <input type="checkbox" name="box1" value="1"/> Box 1
    <input type="submit"/>
</form> 
```

或（根据我之前的评论）

```
<input type="hidden" name="box1" value="0" />
<input type="checkbox" name="box1" value="1"/> 
```

# java - 如何异步处理 GAE 数据存储争用？

> ID：14264702
> 
> 赞同：3
> 
> 时间：2013-01-10T18:22:29.053
> 
> 标签：java, google-app-engine, caching, google-cloud-datastore

为了避免 GAE 数据存储写入中的高延迟（尖峰），我想实现一个后写缓存（使用 Java 低级 API）。这意味着数据先同步写入memcache，然后异步写入datastore，这样请求可以快速返回。

然而，这意味着我需要以某种方式也需要异步处理由数据存储争用引起的异常（例如，启动重试）。更准确地说，我需要能够在请求返回*后对发生的争用做出反应。*我怎样才能做到这一点？使用任务队列进行异步写入处理不是一种选择，因为据说推送到队列仅比数据存储写入快一点。

如果这是不可能的，那么实现后写缓存的好方法是什么？或者在数据丢失不是一种选择的情况下如何处理缓慢的写入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:48:14.277

Memcache 是易失性的，它可能随时刷新数据，因此这种方法非常不可靠。

你最好使用[Push Task Queue](https://developers.google.com/appengine/docs/java/taskqueue/overview)。通过[DeferredTask](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/DeferredTask)助手类使用它。这是[一个例子](https://stackoverflow.com/questions/7505116/java-gae-deferredtask-example)。

# java - Spring MVC 中 ResponseEntity 对象的 HttpStatus 代表什么？

> ID：14264711
> 
> 赞同：1
> 
> 时间：2013-01-10T18:22:59.550
> 
> 标签：java, spring, http, spring-mvc

在 Spring MVC Showcase 示例中，可从 STS 仪表板下载

我对以下情况有些怀疑：

在我看来，我有以下链接：

```
 <li>
            <a id="responseEntityStatus" class="textLink" href="<c:url value="/response/entity/status" />">ResponseEntity (custom status)</a>           
        </li> 
```

此链接生成一个对 URL 的 HTTP 请求：“/response/entity/status”

**此 URL 由名为ResponseController**的 @Controller 类的以下方法处理（该类又使用 @RequestMapping(value="/response", method=RequestMethod.GET) 进行注释）

处理前一个 HTTP 请求的方法是：

```
@RequestMapping("/entity/status")
public ResponseEntity<String> responseEntityStatusCode() {
    return new ResponseEntity<String>("The String ResponseBody with custom status code (403 Forbidden)",
            HttpStatus.FORBIDDEN);
} 
```

此方法返回一个**ResponseEntity**对象，阅读文档后，我了解到返回设置的 ResponseEntity 对象与返回**@ResponseBody String**对象基本相同

因此，在我的特殊情况下，我将返回一个 ResponseEntity 对象（表示我的 HTTP 响应），其中我设置了

1.  **带有字符串的**HTTP RESPONSE 正文字段带有****自定义状态代码的字符串 ResponseBody（403 禁止）****

***   **我没有设置标题字段**

    *   **我已将 HTTP 状态状态代码设置为 HttpStatus.FORBIDDEN**** 

 **现在，我已经读到这个 ​​HttpStatus 是 ResponseEntity 类的一个字段，但我不明白这个对象到底是什么......

那么什么是 HttpStatus 对象呢？如果它设置为 FORBIDDEN 意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:29:32.210

HttpStatus 不是一个对象，它是一个包含[HTTP 状态代码枚举的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)[Enum](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。FORBIDDEN 状态代表[HTTP 403 状态码](http://en.wikipedia.org/wiki/HTTP_403)**

# git - 如何完全删除合并的拉取请求？

> ID：14264719
> 
> 赞同：2
> 
> 时间：2013-01-10T18:23:43.863
> 
> 标签：git, github, merge, pull-request

我在 GitHub 上合并了一个拉取请求。但是，这是一个错误，我想撤消合并，它的提交，最重要的是，从历史记录中删除这几个提交引入的所有文件。

我用另一个恢复了提交并且它可以工作，但是文件仍然在提交历史中（它们很大），如果提交本身消失了会很好。

我试图过滤分支删除文件，但它似乎并没有缩小存储库的大小（并且提交仍然存在）。

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T20:06:08.590

删除合并和提交

```
git reset --hard <sha1> 
```

正如@knittl 所述。但是，在删除关联的悬空对象之前，您不会看到存储库大小的任何变化。您还需要使 reflog 过期以保留对这些对象的引用，例如

```
git reflog expire --expire-unreachable=now --all
git prune
git repack -a -d 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T02:46:59.813

使用树过滤器或索引过滤器不起作用。硬重置和重新包装也没有。

这是有效的：

`git checkout <commit>`

`git push --force origin HEAD:master`

现在我很好奇为什么这些解决方案不起作用。我正在使用中的 size-pack 进行检查`git count-objects -v`。它是否正确？我应该立即看到尺寸减小还是仅在推到原点后才看到尺寸减小？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:34:10.267

恢复提交不会从历史记录中删除文件。

如果您希望文件不仅不存在于当前 HEAD 中，而且*根本不存在*，`git revert`那么这对您来说不是正确的命令。您需要运行 a`filter-branch`以完全删除这些文件。

你说你已经做到了，但你没有告诉我们怎么做；如果您正确执行以下操作：

*   `git filter-branch --tree-filter`删除文件
*   `git reflog expire --expire={1 second}`
*   `rm -rf .git/refs/original`
*   `git gc`

...**然后**存储库应该缩小。您需要最后三个步骤，因为（按顺序）：

*   可以通过您的 reflog 访问原始提交
*   对原始提交的引用存储`filter-branch`在`refs/original`
*   在您运行垃圾回收之前，不会删除“松散”的对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T19:57:27.600

如果您只想删除合并及其关联的提交，请使用`git reset --hard`：

```
git reset --hard <commit before merge> 
```

请注意，这将破坏您当前 HEAD 中任何未提交的更改。它还将删除合并后发生的所有提交（所以也许你最好使用 git rebase）。

重置分支后，强制推送它以使新的历史持久化。

**免责声明**：重写已发布的历史记录是不好的做法。不要这样做，如果你没有必要。

# objective-c - Objective-c 中的合成属性会自动触发 didChangeObjectForKey: 吗？

> ID：14264724
> 
> 赞同：1
> 
> 时间：2013-01-10T18:24:15.457
> 
> 标签：objective-c, macos, cocoa

我已经尝试过多次搜索，但似乎没有一个明确的答案。

如果我的类有一个综合属性（称为 ClassA），我可以使用 KVO 观察它并获得我期望的结果吗？

例如，在 ClassA.h 我有：

```
@property myProperty; 
```

在 ClassA.m 中，我有：

```
@synthesize myProperty; 
```

在另一堂课中，我观察了这个属性：

```
[instanceOfClassA addObserver:self
                   forKeyPath:@"myProperty"
                      options:NSKeyValueObservingOptionNew
                      context:nil]; 
```

我没有为该属性实现任何自定义 getter 或 setter，它使用的是默认实现。（我知道我总是可以实现自定义 getter/setter 并调用 willSetValueforKey: an didSetValueForKey: 我自己）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:25:39.977

是的，它会！！！

但是你需要使用`self.property`......

`_property`绕过KVC。

# zend-framework2 - 在 FirePHP 记录器上显示对象

> ID：14264732
> 
> 赞同：2
> 
> 时间：2013-01-10T18:24:42.660
> 
> 标签：zend-framework2

我只是在我的 getServiceConfig() 上像这样设置 FirePHP：

```
 use FirePHP as FirePHP;
 use Zend\Log\Logger;
 use Zend\Log\Writer\FirePhp as FirePhpWriter;
 use Zend\Log\Writer\FirePhp\FirePhpBridge;

'logger_firebug' => function($sm) {

    $log = new Logger();
    $writer = new FirePhpWriter(new FirePhpBridge(new FirePHP()));
    $log->addWriter($writer);
    return $log;
 }, 
```

但是当我尝试像这样使用控制器上的信息功能时：

```
 $loger = $this->getServiceLocator()->get('logger_firebug');     
    $loger->info($this); 
```

它给了我一个内部错误“NetworkError：500 Internal Server Error”我想要做的是显示对象的var_dump。

有人可以帮助我如何显示任何对象结构吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:42:32.653

尝试保留一个实例`$firephp = new FirePHP()`并使用`$firephp->info($this)`来记录消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T06:32:29.250

此消息准确地告诉您正在发生的事情。

`$message must implement magic`[`__toString()`](http://php.net/manual/de/reflectionfunction.tostring.php)`method`

检查您会注意到的链接，每当在 a 的上下文中使用[`__toString()`](http://php.net/manual/de/reflectionfunction.tostring.php)an 时，它总是会自动被调用。那么为什么会出现这个错误信息呢？简单：需要 a作为参数，但您正试图给它一个`Object``String``$loger->$level()``String``Object`

如何解决这个问题？给它一个`String`

```
$loger->info(\Zend\Debug\Debug::dump($this, $label=null, false));
// Be sure to either set a $label (string) or set it to null 
```

# python - Django/Python：如何读取文件并验证它是音频文件？

> ID：14264737
> 
> 赞同：4
> 
> 时间：2013-01-10T18:25:11.303
> 
> 标签：python, django, file, audio, file-upload

> **可能重复：**
> [Django（音频）文件验证](https://stackoverflow.com/questions/6194901/django-audio-file-validation)

我正在构建一个网络应用程序，用户可以在其中上传媒体内容，包括音频文件。

我的*AudioFileUploadForm*中有一个干净的方法可以验证以下内容：

*   音频文件不是太大。
*   音频文件具有有效的 content_type（MIME 类型）。
*   音频文件具有有效的扩展名。

**但是，我担心安全性**。用户可以上传带有恶意代码的文件，并轻松通过上述验证。我接下来要做的是验证音频文件确实是一个音频文件（在它写入磁盘之前）。

我该怎么做？

```
class UploadAudioForm(forms.ModelForm):
    audio_file = forms.FileField()

    def clean_audio_file(self):
        file = self.cleaned_data.get('audio_file',False):
            if file:
                if file._size > 12*1024*1024:
                    raise ValidationError("Audio file too large ( > 12mb )")
                if not file.content_type in ['audio/mpeg','audio/mp4', 'audio/basic', 'audio/x-midi', 'audio/vorbis', 'audio/x-pn-realaudio', 'audio/vnd.rn-realaudio', 'audio/x-pn-realaudio', 'audio/vnd.rn-realaudio', 'audio/wav', 'audio/x-wav']:
                    raise ValidationError("Sorry, we do not support that audio MIME type. Please try uploading an mp3 file, or other common audio type.")
                if not os.path.splitext(file.name)[1] in ['.mp3', '.au', '.midi', '.ogg', '.ra', '.ram', '.wav']:
                    raise ValidationError("Sorry, your audio file doesn't have a proper extension.")
                # Next, I want to read the file and make sure it is 
                # a valid audio file. How should I do this? Use a library?
                # Read a portion of the file? ...?
                if not ???.is_audio(file.content):
                    raise ValidationError("Not a valid audio file.")
                return file
            else:
                raise ValidationError("Couldn't read uploaded file") 
```

编辑：通过“验证音频文件确实是音频文件”，我的意思是：

包含音频文件典型数据的文件。我担心用户可能会上传带有适当标题的文件和恶意脚本来代替音频数据。例如... mp3 文件是 mp3 文件吗？或者它是否包含一些不属于 mp3 文件的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:54:15.777

另一个已发布的`header`解析答案的替代方案。这意味着有人仍然可以在有效标头后面包含其他数据。

是验证整个文件，这会花费更多的 CPU，但也有更严格的策略。可以做到这一点的库是[python audiotools](http://audiotools.sourceforge.net/)，相关的 API 方法是[AudioFile.verify](http://audiotools.sourceforge.net/programming/audiotools.html#audiotools.AudioFile.verify)。

像这样使用：

```
import audiotools

f = audiotools.open(filename)
try:
    result = f.verify()
except audiotools.InvalidFile:
    # Invalid file.
    print("Invalid File")
else:
    # Valid file.
    print("Valid File") 
```

**警告**是这种方法`verify`非常严格，实际上可以将编码错误的文件标记为无效。您必须自己决定这是否适合您的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:45:58.583

这个想法是使用诸如[sndhdr](http://docs.python.org/2/library/sndhdr.html#module-sndhdr)之类的实用程序来尝试读取文件的标题。

```
from sndhdr import what
import os
from settings import MEDIA_ROOT
...
if what( os.path.join( MEDIA_ROOT, file.name ) ) == None:
# header parse failed, so, it could be a non-audio file. 
```

在这种情况下，您必须确保该实用程序无法将非音频文件识别为音频文件。

我从不使用 sndhdr 实用程序，因此，使用另一个可能会更好。例如还有[诱变剂](http://code.google.com/p/mutagen/wiki/Tutorial)项目。

**更新**。

更专业的方法。

1.  让用户在没有此类验证的情况下上传他的文件。
2.  创建与一个文件关联的特殊模型字段：is_checked。默认情况下将字段设置为 False。
3.  不要让其他用户下载具有 is_checked == False 的文件
4.  组织一个异步任务，该任务运行一个检查未检查文件的反恶意软件。该软件必须作为 Pythonic 任务中的函数调用。该函数必须回答以下问题：特定文件是否包含恶意软件部分。
5.  如果当前文件有恶意软件部分，请删除它并删除有关该文件的记录。否则从您的任务中设置 is_checked = True 。

为什么要分开任务？因为这种恶意软件检查可能是一个漫长的操作。

# email - 如何在 sugarcrm 中接收传入群组电子邮件的通知

> ID：14264740
> 
> 赞同：1
> 
> 时间：2013-01-10T18:25:19.927
> 
> 标签：email, sugarcrm

我已经在甘蔗中建立了一个群组电子邮件帐户，供所有用户在与客户交流时使用。问题是要查看响应，用户必须登录到 Sugarcrm 并手动进入收件箱并检查。这导致邮件一次在收件箱中停留数天而没有得到回复。

我只想在收到消息通知他们需要登录到 Sugarcrm 并检查电子邮件时向所有用户发送一封简单的通知电子邮件。

有谁知道一些方法可以做到这一点？
我知道有一个sugarcrm论坛......但是那个地方就像一个黑洞，大多数问题都没有答案，所以我想我会在这里问一下，以防有人碰巧看到这个并有解决方案。:)

（我使用的是sugarcrm 6.4.4 pro）

# c# - 登录后正确初始化会话

> ID：14264742
> 
> 赞同：0
> 
> 时间：2013-01-10T18:25:25.300
> 
> 标签：c#, asp.net, session

我在希望用户登录的页面上使用 C# 代码。这时，假设登录信息可以被数据库验证，我设置了我想在整个会话中跟踪的会话变量。我不会在任何地方初始化会话，但是通过设置会话变量，无论如何都会发生这种情况。我的代码没有任何错误，但我不确定我是否正确执行此操作。

登录成功后直接在页面隐藏代码：

```
Business.User user      = new Business.User();

user.SetLabelCompanyId();
user.SetLabelUsername();

_labelUsername.Text     = user.GetLabelUsername();
_labelCompanyId.Text    = MySession.Current.CompanyId; 
```

我打电话的方式`_labelUsername.Text`是我打算做的，但我打电话的方式`_labelCompanyId`是我觉得会让不熟悉我的项目的人感到困惑的方式。它实现了创建会话的目标，但调用方式与用户名不同，尽管使用方式相同。我宁愿做的是：

```
_labelUsername.Text     = user.GetLabelUsername();
_labelCompanyId.Text    = user.GetLabelCompanyId(); 
```

然后在这些行初始化之前的某个地方`MySession`。我怎样才能做到这一点？当我使用上面的 2 行（没有其他提及`MySession`）时，我收到一个错误，即会话为空并重定向到登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:08:26.810

当用户第一次打开站点时，会话将被初始化。但是此时，您的会话变量尚未初始化。你需要这样的东西

```
//inside in your Business.User class (set reference to System.Web)
public string GetLabelCompanyId()
{
  string returnValue = String.Empty;
  HttpContext context = HttpContext.Current;
  if(context != null)
  {
     if(context.Session["CompanyId"] != null)
     {
        returnValue = context.Session["CompanyId"];
     }
  }

  return returnValue;
} 
```

成功登录后，您可以将值存储到会话变量中。

我非常建议使用单独的类来访问 HttpContext 而不是直接在您的业务类中。

# ruby-on-rails - 如何在嵌套属性上强制列的唯一性：

> ID：14264744
> 
> 赞同：0
> 
> 时间：2013-01-10T18:25:35.200
> 
> 标签：ruby-on-rails, validation, unique-constraint, rails-activerecord

可以说我有以下设置

```
class User < ActiveRecord::Base
    has_many :address
    accepts_nested_attributes_for :address, allow_destroy: true
end

class Address < ActiveRecord::Base
    attr_accessible :house_color, :street_address
end 
```

出于某种原因，我只想允许给定用户拥有一个给定颜色的地址。

我要如何锁定？就像是

```
 validates :address.house_color.unique 
```

除了功能......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:29:13.733

```
class User < ActiveRecord::Base
  has_many :address
  accepts_nested_attributes_for :address, allow_destroy: true
  validates_associated :addresses
end

class Address < ActiveRecord::Base
  belongs_to :user
  attr_accessible :house_color, street_address
  validates_uniqueness_of :house_color. :scope => :user_id
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T15:42:02.353

另一种方法是使用reject_if

```
accepts_nested_attributes_for :address, allow_destroy: true, reject_if: proc { |attributes| Address.where(:house_color => attributes["house_color"], :user_id => attributes["users_id]).exists? } 
```

# linux - 搜索和替换 Linux

> ID：14264747
> 
> 赞同：4
> 
> 时间：2013-01-10T18:25:43.220
> 
> 标签：linux, sed, replace

我正在尝试进行以下搜索和替换，但由于某种原因它不起作用。我正在尝试替换：

`require_once('`

和

`require_once($_SERVER['DOCUMENT_ROOT']/'`

这些是**确切的**字符串（包括斜线和单引号）。

这是我尝试过的，但是我无法让它工作：

```
find ./ -type f -readable -writable -exec sed -i "s/require_once(\'/require_once($_SERVER['DOCUMENT_ROOT'] . \'\//g" {} \; 
```

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:31:49.973

您需要转义`$`and`/`字符：

```
sed "s/require_once('/require_once(\$_SERVER['DOCUMENT_ROOT']\/'/g" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:39:13.553

您需要在双引号内对美元符号进行反斜杠转义，否则 shell 会插入（不存在的）环境变量`_SERVER`，并将其替换为空字符串。

# javascript - 由于字符串中的错误字符导致脚本中断

> ID：14264748
> 
> 赞同：0
> 
> 时间：2013-01-10T18:25:43.853
> 
> 标签：javascript, string, escaping

恐怕这个问题有一个非常简单的答案，但是我已经尝试寻找解决方案一段时间了，但没有任何运气。

我有一个很长的字符串，它通常包含分号 (;)、双引号和单引号等字符，也许还有其他字符，如果不转义可能会有害。

当我尝试运行我的 JavaScript 代码时，它会出现错误“Uncaught SyntaxError: Unexpected identifier”，当我检查 Unexpected Identifier 是什么时，它要么是分号，要么是引号，这是字符串的结尾。

在 PHP 中有内置函数来探测渲染文本，因此它不会损害并防止代码被破坏。JavaScript中是否有相等的东西？我知道我可以只替换字符，但问题是我并不总是知道字符串包含哪些字符，因此拥有一个更“通用”的函数来处理转义有害字符将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:33:20.767

当您从后端渲染页面时，您需要清理字符串。听起来你需要转义引号，这样你的字符串就不会过早结束。

基本上是这样的字符串

```
var foo = "asdkjhsadjkhsadjkhsajkdhsajkdhksajhd"sajkdhsakdjhsajkdhsajkdh"; 
```

需要用 .

```
var foo = "asdkjhsadjkhsadjkhsajkdhsajkdhksajhd\"sajkdhsakdjhsajkdhsajkdh"; 
```

并且不会发生 JavaScript 错误。

您还必须小心新行。那些你必须用 '\n' 替换

# haskell - 使用 XmlArrow 从页面中获取第 n 个元素？

> ID：14264749
> 
> 赞同：1
> 
> 时间：2013-01-10T18:25:47.680
> 
> 标签：haskell, arrows, hxt

按照这个[页面抓取教程](http://adit.io/posts/2012-03-10-building_a_concurrent_web_scraper_with_haskell.html)，作者获取页面上所有图像的集合，如下所示：

```
css :: ArrowXml a => String -> a XmlTree XmlTree
css tag = multi (hasName tag)

images tree = tree >>> css "img" >>> getAttrValue "src" 
```

我怎样才能只获得页面上的第二张图片？`getElementAt :: Int -> blah`我在[XmlArrow 文档](http://hackage.haskell.org/packages/archive/hxt/latest/doc/html/Text-XML-HXT-Arrow-XmlArrow.html#v%3agetAttrValue)中找不到任何类型的函数 。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:21:32.113

用于操作元素列表的函数可以在[ArrowList](http://hackage.haskell.org/packages/archive/hxt/9.3.1.1/doc/html/Control-Arrow-ArrowList.html#t%3aArrowList)类型类中找到。

在这种特殊情况下，您可以使用`>>.`运算符使用普通列表函数来转换结果列表。

```
nthImage n tree = images tree >>. (take 1 . drop n) 
```

# c# - 如何使用 EntityFramework 调用存储过程？

> ID：14264750
> 
> 赞同：37
> 
> 时间：2013-01-10T18:25:52.323
> 
> 标签：c#, mysql, entity-framework, stored-procedures

我从 MySQL 数据库生成了一个 EF4 模型，并且包含了 StoredProcedures 和 Tables。

我知道如何对 EF 进行常规的插入/更新/获取/删除操作，但我找不到我的 StoredProcedures。

这就是我所希望的：

```
using (Entities context = new Entities())
{
    context.MyStoreadProcedure(Parameters); 
} 
```

编辑1：

这是没有 EF 的样子：

```
sqlStr = "CALL updateGame(?,?,?,?,?,?,?)";

commandObj = new OdbcCommand(sqlStr, mainConnection);
commandObj.Parameters.Add("@id,", OdbcType.Int).Value = inGame.id;
commandObj.Parameters.Add("@name", OdbcType.VarChar, 255).Value = inGame.name;
commandObj.Parameters.Add("@description", OdbcType.Text).Value = ""; //inGame.description;
commandObj.Parameters.Add("@yearPublished", OdbcType.DateTime).Value = inGame.yearPublished;
commandObj.Parameters.Add("@minPlayers", OdbcType.Int).Value = inGame.minPlayers;
commandObj.Parameters.Add("@maxPlayers", OdbcType.Int).Value = inGame.maxPlayers;
commandObj.Parameters.Add("@playingTime", OdbcType.VarChar, 127).Value = inGame.playingTime;    

return Convert.ToInt32(executeScaler(commandObj)); 
```

*PS。如果需要，我可以更改 EF 版本*

编辑1：

```
CREATE DEFINER=`106228`@`%` PROCEDURE `updateGame`(
    inId INT,
    inName VARCHAR(255),
    inDescription TEXT,
    inYearPublished DATETIME,
    inMinPlayers INT,
    inMaxPlayers INT,
    inPlayingTime VARCHAR(127)
) 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-10T18:31:08.323

一种方法是使用 DbContext 之外的 Database 属性：

```
SqlParameter param1 = new SqlParameter("@firstName", "Frank");
SqlParameter  param2 = new SqlParameter("@lastName", "Borland");
context.Database.ExecuteSqlCommand("sp_MyStoredProc @firstName, @lastName", 
                              param1, param2); 
```

EF5 绝对支持这一点。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-15T16:43:48.577

您已使用 SqlQuery 函数并指示要映射结果的实体。

我发送一个示例来执行此操作：

```
var oficio= new SqlParameter
{
    ParameterName = "pOficio",
    Value = "0001"
};

using (var dc = new PCMContext())
{
    return dc.Database
             .SqlQuery<ProyectoReporte>("exec SP_GET_REPORTE @pOficio",
                                        oficio)
             .ToList();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-10T18:38:24.287

将存储过程导入模型后，您可以右键单击它（从模型浏览器的`Context.Store`/`Stored Procedures`部分），然后单击`Add Function Import`。如果你需要一个复杂的类型，你可以在那里创建它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-30T08:15:45.017

基于 OP 的原始请求，能够调用这样的存储过程......

```
using (Entities context = new Entities())
{
    context.MyStoreadProcedure(Parameters); 
} 
```

[无意识的乘客](https://mindlesspassenger.wordpress.com/2011/02/02/code-first-and-stored-procedures/) 有一个项目，允许您从这样的实体框架调用存储的过程......

```
using (testentities te = new testentities())
{
    //-------------------------------------------------------------
    // Simple stored proc
    //-------------------------------------------------------------
    var parms1 = new testone() { inparm = "abcd" };
    var results1 = te.CallStoredProc<testone>(te.testoneproc, parms1);
    var r1 = results1.ToList<TestOneResultSet>();
} 
```

...而且我正在开发一个[存储过程框架](https://github.com/dibley1973/StoredProcedureFramework)（[此处](https://github.com/dibley1973/StoredProcedureFramework)），您可以像下面显示的我的测试方法之一那样调用它...

```
[TestClass]
public class TenantDataBasedTests : BaseIntegrationTest
{
    [TestMethod]
    public void GetTenantForName_ReturnsOneRecord()
    {
        // ARRANGE
        const int expectedCount = 1;
        const string expectedName = "Me";

        // Build the paraemeters object
        var parameters = new GetTenantForTenantNameParameters
        {
            TenantName = expectedName
        };

        // get an instance of the stored procedure passing the parameters
        var procedure = new GetTenantForTenantNameProcedure(parameters);

        // Initialise the procedure name and schema from procedure attributes
        procedure.InitializeFromAttributes();

        // Add some tenants to context so we have something for the procedure to return!
        AddTenentsToContext(Context);

        // ACT
        // Get the results by calling the stored procedure from the context extention method 
        var results = Context.ExecuteStoredProcedure(procedure);

        // ASSERT
        Assert.AreEqual(expectedCount, results.Count);
    }
}

internal class GetTenantForTenantNameParameters
{
    [Name("TenantName")]
    [Size(100)]
    [ParameterDbType(SqlDbType.VarChar)]
    public string TenantName { get; set; }
}

[Schema("app")]
[Name("Tenant_GetForTenantName")]
internal class GetTenantForTenantNameProcedure
    : StoredProcedureBase<TenantResultRow, GetTenantForTenantNameParameters>
{
    public GetTenantForTenantNameProcedure(
        GetTenantForTenantNameParameters parameters)
        : base(parameters)
    {
    }
} 
```

如果这两种方法中的任何一种都好？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-19T10:38:02.783

基本上，您只需使用存储过程映射将过程映射到实体。

映射后，您使用常规方法在 EF 中添加项目，它将使用您的存储过程。

请参阅：[此链接](http://www.entityframeworktutorial.net/add-update-using-stored-procedure.aspx)进行演练。结果将像这样添加一个实体（实际上将使用您的存储过程）

```
using (var ctx = new SchoolDBEntities())
        {
            Student stud = new Student();
            stud.StudentName = "New sp student";
            stud.StandardId = 262;

            ctx.Students.Add(stud);
            ctx.SaveChanges();
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-10T18:28:55.333

这就是我最近为具有 2008 SQL 数据库的数据可视化应用程序所做的。在此示例中，我收到了从存储过程返回的列表：

```
public List<CumulativeInstrumentsDataRow> GetCumulativeInstrumentLogs(RunLogFilter filter)
    {
        EFDbContext db = new EFDbContext();
        if (filter.SystemFullName == string.Empty)
        {
            filter.SystemFullName = null;
        }
        if (filter.Reconciled == null)
        {
            filter.Reconciled = 1;
        }
        string sql = GetRunLogFilterSQLString("[dbo].[rm_sp_GetCumulativeInstrumentLogs]", filter);
        return db.Database.SqlQuery<CumulativeInstrumentsDataRow>(sql).ToList();
    } 
```

然后在我的情况下这个扩展方法用于一些格式：

```
public string GetRunLogFilterSQLString(string procedureName, RunLogFilter filter)
        {
            return string.Format("EXEC {0} {1},{2}, {3}, {4}", procedureName, filter.SystemFullName == null ? "null" : "\'" + filter.SystemFullName + "\'", filter.MinimumDate == null ? "null" : "\'" + filter.MinimumDate.Value + "\'", filter.MaximumDate == null ? "null" : "\'" + filter.MaximumDate.Value + "\'", +filter.Reconciled == null ? "null" : "\'" + filter.Reconciled + "\'");

        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-12T02:21:08.420

这是使用实体框架查询 MySQL 过程的示例

这是我在 MySQL 中的存储过程的定义：

```
CREATE PROCEDURE GetUpdatedAds (
    IN curChangeTracker BIGINT
    IN PageSize INT
) 
BEGIN
   -- select some recored...
END; 
```

这就是我使用实体框架查询它的方式：

```
 var curChangeTracker = new SqlParameter("@curChangeTracker", MySqlDbType.Int64).Value = 0;
 var pageSize = new SqlParameter("@PageSize", (MySqlDbType.Int64)).Value = 100;

 var res = _context.Database.SqlQuery<MyEntityType>($"call GetUpdatedAds({curChangeTracker}, {pageSize})"); 
```

请注意，我使用[C# 字符串插值](https://docs.microsoft.com/en-us/dotnet/csharp/tutorials/string-interpolation)来构建我的查询字符串。

# python - GtkWindow 一次只能包含一个小部件

> ID：14264753
> 
> 赞同：3
> 
> 时间：2013-01-10T18:26:12.510
> 
> 标签：python, gtk, pygtk, gtkentry

我正在使用此代码从网络检索和显示图像：

```
class Display(object):

    def __init__(self):
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.connect('destroy', self.destroy)
        self.window.set_border_width(10)

        self.image = gtk.Image()
        response = urllib2.urlopen('http://image.url/image.jpg').read()

        pbuf = gtk.gdk.PixbufLoader()
        pbuf.write(response)
        pbuf.close()
        self.image.set_from_pixbuf(pbuf.get_pixbuf())

        self.window.add(self.image)
        self.image.show()
        self.window.show()

    def main(self):
        gtk.main()

    def destroy(self, widget, data=None):
        gtk.main_quit() 
```

它可以工作，但是我现在想在图像下方显示一个文本/输入框（以便稍后检索文本）。我在下面添加了以下内容`self.image.show()`：

```
self.entry = gtk.Entry()
self.window.add(self.entry)
self.entry.show() 
```

但是，它吐出这个警告然后我运行它，并且输入框没有出现：

> ee.py:31: GtkWarning: 试图将 GtkEntry 类型的小部件添加到 GtkWindow，但作为 GtkBin 子类，GtkWindow 一次只能包含一个小部件；它已经包含一个 GtkImage self.window.add(self.entry) 类型的小部件

不知道为什么它不允许我放置多个小部件，有没有人有解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:46:16.287

的确，包装就是答案。

```
import gtk
import urllib2
class Display(object):

    def __init__(self):
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.connect('destroy', self.destroy)
        self.window.set_border_width(10)

        # a box underneath would be added every time you do 
        # vbox.pack_start(new_widget)

        vbox = gtk.VBox()
        self.image = gtk.Image()
        response = urllib2.urlopen('http://1.bp.blogspot.com/-e-rzcjuCpk8/T3H-mSry7PI/AAAAAAAAOrc/Z3XrqSQNrSA/s1600/rubberDuck.jpg').read()

        pbuf = gtk.gdk.PixbufLoader()
        pbuf.write(response)
        pbuf.close()
        self.image.set_from_pixbuf(pbuf.get_pixbuf())

        self.window.add(vbox)
        vbox.pack_start(self.image, False)
        self.entry = gtk.Entry()
        vbox.pack_start(self.entry, False)

        self.image.show()
        self.window.show_all()

    def main(self):
        gtk.main()

    def destroy(self, widget, data=None):
        gtk.main_quit()

a=Display()
a.main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:43:35.037

看看[小部件包装](http://www.pygtk.org/pygtk2tutorial/ch-PackingWidgets.html)。本质上，您使用**window.add**添加一个特殊的包装容器，该容器又包含主要的小部件和/或其他容器。

草图：

```
hbox = HBox()
window.add(hbox)
hbox.pack_start(widget1)
hbox.pack_start(widget2)
window.show_all() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T22:31:41.653

一个 GTK 窗口只能包含一个孩子。如果要添加多个小部件，则需要一个布局容器（例如框或网格）来容纳它们。盒子在 GTK2 中很好，但在 GTK3 中，开发人员建议切换到网格，因为盒子现在在 GTK3 中已弃用。

# jquery - 点击事件后继续调整div大小

> ID：14264754
> 
> 赞同：2
> 
> 时间：2013-01-10T18:26:24.007
> 
> 标签：jquery, html, resize, window

我发现了一些可以做我想做的事情的脚本。这个脚本在点击事件上上下移动我的盒子，并将我的 div 调整为窗口高度的百分比。不幸的是，如果有人调整浏览器窗口的大小，则 div 不会继续调整大小。我尝试从单击事件中取出高度窗口功能，并将其放在它下方和/或在此站点上找到其他调整大小的脚本，但没有任何反应。它仅在此单击事件上调整大小。你能帮我吗？

我的 div 标签固定在浏览器窗口的底部并向上滑动。

```
jQuery(function( $ ){

   var container = $( "#content" );

   $( "a" ).click(

        function( event ){

           $('#content').height(function(){
           return $(window).height() * 0.47;
           });

           event.preventDefault();

           if (container.is( ":visible" )){

              container.slideUp( 500 );

           } else {

              container.slideDown( 500 );

              }
           }
      );
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:41:26.797

您需要监听窗口调整大小事件并调整内容容器的大小。

```
$(window).on('resize', function() {
    if (container.is(':visible')) {
        container.height(function() {
          return $(window).height() * 0.47;
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:34:21.393

我建议添加一个调整大小的侦听器，并像这样分解您的实际逻辑：

```
jQuery(function( $ ){
    var resizeFunction = function(event){
       $('#content').height(function(){
            return $(window).height() * 0.47;
       });

       if (event != null){
           event.preventDefault();
       }
       if (container.is( ":visible" )){

          container.slideUp( 500 );

       } else {

          container.slideDown( 500 );

          }
       }
    var container = $( "#content" );

    $( "a" ).click(resizeFunction(event))
    $(window).resize(resizeFunction(null))
}); 
```

# bash - 执行命令而不是在bash中设置为变量

> ID：14264763
> 
> 赞同：1
> 
> 时间：2013-01-10T18:26:50.713
> 
> 标签：bash, variables

我只是想收集有关系统的信息，特别是主机名、操作系统和 SSH 版本。我创建了以下脚本，它设置了主机名和操作系统，但它没有将 SSH 命令设置为变量，而是执行它，我不知道为什么。

这是脚本

```
#! /bin/bash

set -o xtrace
rm -f ssh.log 
HOSTNAME=$(hostname)
OS=$(uname -s)
SSH_VER=$(ssh -V)

echo $HOSTNAME $OS $SSH_VER > ssh.log

cat ssh.log 
```

这是脚本的输出...

```
+ rm -f ssh.log
++ hostname
+ HOSTNAME=localhost.localdomain
++ uname -s
+ OS=Linux
++ ssh -V OpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010
+ SSH_VER=
+ echo localhost.localdomain Linux
+ cat ssh.log localhost.localdomain Linux 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:32:33.667

`ssh -V`确实将其输出打印到`stderr`not to `stdout`。要获得所需的输出，您需要更改

```
SSH_VER=$(ssh -V) 
```

到

```
SSH_VER=$(ssh -V 2>&1) 
```

这将重定向到 to 的`stderr`输出`stdout`。

有关 bash 重定向的更多信息，请访问[http://www.tldp.org/LDP/abs/html/io-redirection.html](http://www.tldp.org/LDP/abs/html/io-redirection.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:33:26.180

ssh -v 在标准错误 (>&2) 上输出，而不是标准输出 (>&1)。尝试：

```
 SSH_VER="$(ssh -V 2>&1)"
 echo "$HOSTNAME $OS $SSH_VER" > ssh.log #in case it's multiline 
```

# mysql - 执行语句是否不会在异常时回滚？

> ID：14264767
> 
> 赞同：0
> 
> 时间：2013-01-10T18:26:54.993
> 
> 标签：mysql, ruby-on-rails, ruby, transactions

我有一个迁移，我正在将 MySQL 表的字符集从 latin1 更改为 utf-8。在那之后，我试图以某种方式改变对象。如果对象无法保存以回滚数据库，包括字符集更改，我希望这样。这是我的代码：

```
def up
  execute "ALTER TABLE posts CONVERT TO CHARACTER SET utf-8;"
  posts = Post.find_each do |post|
    # modify post.content
    post.save!
  end
  raise "rollback"
end 
```

我这样做是`raise "rollback"`因为我想测试并确保迁移成功。但是，如果我`show create table posts`在迁移回滚后执行操作，我会看到它的字符集仍然是 utf-8。执行语句是否未包含在事务中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:29:38.907

`alter table`在 mysql 中执行[隐式提交。](http://dev.mysql.com/doc/refman/5.0/en/implicit-commit.html)您不能回滚`alter`.

# code-coverage - 我如何涵盖这种方法？将流内容复制到第二个流

> ID：14264771
> 
> 赞同：0
> 
> 时间：2013-01-10T18:27:04.757
> 
> 标签：code-coverage, dotcover

我有以下方法，它是一个扩展方法，可以被任何**Stream**对象调用。该方法应将 Stream 的确切内容复制到另一个 Stream。

```
public static void CopyTo(this Stream input, Stream output)
{
   const int size = 10;
   int num;
   var buffer = new byte[size];
   input.Position = 0;
   while ((num = input.Read(buffer, 0, buffer.Length)) != 0)
   {
      output.Write(buffer, 0, num);
   }
} 
```

我创建了一个简单的测试来验证原始 Stream 的内容是否等于最终 Stream 的内容：

```
[TestMethod]
public void StreamWithContentShouldCopyToAnotherStream()
{
    // arrange
    var content = @"abcde12345";
    byte[] data = Encoding.Default.GetBytes(content);
    var stream = new MemoryStream(data);
    var expectedStream = new MemoryStream();
    // act
    stream.CopyTo(expectedStream);
    // assert
    expectedStream.Length
       .Should()
       .Be(stream.Length, "The length of the two streams should be the same");
} 
```

不幸的是，我只介绍了这个方法的一部分，因为我不验证内容是否完全相同。dotCover 也向我展示了我的代码的第一部分根本没有被覆盖，这就是：

![代码覆盖率结果](../Images/c51c0cbc183aa7435992593295870067.png)

我的目标是这种方法的 100% 代码覆盖率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:11:57.893

也许您的代码没有调用您的扩展方法，而是调用了[Stream.CopyTo(Stream)](http://msdn.microsoft.com/en-au/library/dd782932.aspx)方法？

尝试重命名您的扩展方法以避免名称冲突。

# r - 为包含具有不同变异程度的变量的数据集设置绘图的比例限制

> ID：14264774
> 
> 赞同：1
> 
> 时间：2013-01-10T18:27:11.470
> 
> 标签：r, plot, lattice

我有一个数据框，其中一些变量呈现出很小的相对变化，而另一些则呈现出很大的变化。例如，考虑以下数据框：

```
df <- data.frame(IDX = 1:10, V1 = runif(10) + 100000, V2 = runif(10)) 
```

内容如下：

```
 IDX       V1         V2
1    1 100001.0 0.39601382
2    2 100000.1 0.76472032
3    3 100000.1 0.10183021
4    4 100000.2 0.12735142
5    5 100000.8 0.21488898
6    6 100000.1 0.92675265
7    7 100000.5 0.27987290
8    8 100000.6 0.69132304
9    9 100000.5 0.20719782
10  10 100000.8 0.02314787 
```

两个变量的绝对变化相似（V1 为 0.10，V2 为 0.09）。但是，如果我们考虑相对于它们的均值的相对变化，那么 V1 的变化很小，而 V2 的变化则相反：

```
> var(df$V1) / mean(df$V1)
[1] 1.082472e-06
> var(df$V2) / mean(df$V2)
[1] 0.2617366 
```

当我尝试为这两个变量制作点图并尝试设置 X 比例的限制时，问题就出现了。如果我对每个变量（`relation = 'same'`默认设置）使用相同的比例，我会得到以下结果：

![情节1](../Images/478409f16353539a234576f53546962b.png)

这里有用于创建绘图的代码：

```
library(lattice)
library(reshape2)
df <- melt(df, id.vars = 'IDX')

# approach 1
pl <- dotplot(IDX ~ value | variable, df,
              scales = list(x = list(relation = 'same')))
print(pl) 
```

如您所见，V2 的值是如此之小，以至于当对两个面板使用相同的比例时，似乎 V2 值之间没有变化。如果我使每个面板的 X 比例独立，那么我得到以下结果：

![情节2](../Images/99e3c795183b3efc7535c11b66041404.png)

在这里，您有生成第二个图的代码：

```
# approach 2
pl <- dotplot(IDX ~ value | variable, df,
              scales = list(x = list(relation = 'free')))
print(pl) 
```

现在的问题是左侧面板的 X 刻度范围从 100000.2 到 100001.0，数据看起来好像有很多变化，而实际上并非如此。

不知何故，我想获得一个图，其中左面板看起来像第一个图中的左面板，而右面板看起来像第二个图中的右面板。我的想法是根据所绘制变量的平均值来定义 X 范围。例如，对于每个面板，X 限制可以从`0.9 * mean`到`1.1 * mean`。但我不知道在存在多个变量（和面板）的情况下如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:44:52.693

最干净的解决方案可能是提供您自己的`prepanel`函数，它将“即时”设置每个面板的 x 限制。这是一个将 xlim 设置为从 0 扩展到面板中 x 的最大值的示例

```
dotplot(IDX ~ value | variable, df, scales=list(relation="free"),
        prepanel = function(x,y,...) list(xlim=c(0, max(x)))) 
```

![在此处输入图像描述](../Images/2cd988062c9a5159c69f64405aedac80.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T20:13:38.410

xyplot（和点图）的帮助页面表明这应该是可能的：“当关系为“自由”时，xlim 或 ylim 可以是一个列表，在这种情况下，它被视为其组件是从 prepanel 计算中获得的极限值每个面板（必要时复制后）。”

尝试（编辑）：

```
pl <- dotplot(IDX ~ value | variable, df, 
          xlim=list(c(1,100001), c(0, 1) ),
          scales = list(x = list(relation = 'free'   )
                       ))
print(pl) 
```

![在此处输入图像描述](../Images/8d227ca025be06f4ccd7637656fe8861.png) 之所以需要进行编辑，是因为我首先尝试将 xlim 放在 scales 参数中（毕竟这是我得到那部分文本的地方。）我认为在这种情况下可能需要做一些进一步的工作，或者可能需要交换顺序，因为低- 100000 中的“0”顺序“模糊”到第二个刻度上的“0.0”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:54:03.843

想法是应用`log`

```
df <- data.frame(IDX = 1:10, V1 = log(runif(10) + 100000), V2 = runif(10))

library(lattice)
library(reshape2)
df <- melt(df, id.vars = 'IDX')

# approach 1
pl <- dotplot(IDX ~ value | variable, df,
              scales = list(x = list(relation = 'same')))
print(pl) 
```

![在此处输入图像描述](../Images/d14c019f1b48f9adf2ca2d0ddecccbbf.png)

# c# - 使用反射着色文本

> ID：14264777
> 
> 赞同：1
> 
> 时间：2013-01-10T18:27:17.693
> 
> 标签：c#, reflection, editor

我正在尝试制作一个简单的文本编辑器，可以实时为文本着色。**我还必须为此使用 DLL 和反射**。我想在用户输入时为文本着色。出于这个原因，我有一个复选框。如果选中，文本将在用户键入时着色（实时）。

为此，我编写了一个 DLL 文件。

无论如何，我对反射的东西很陌生。

*   问题：

想请教各位大佬的专业意见，我写的到底能不能叫“用反射”？如果不是，可以指出我出了什么问题吗？

这是我的代码（我已经从中删除了很多东西，所以代码将反映问题，但可能有剩余）

```
using System;
using System.Drawing;
using System.Windows.Forms;
using System.IO;
using System.Diagnostics;
using System.Reflection;

namespace Editor
{
    public class MainForm : Form
    {
        //Declaration of Controls 
        private RichTextBox EditRichTextBox;
        private CheckBox chkBox;
        private int flag = 0;

        private Button[] PlugButton;
        public string[] PluginNames;
        private int NumofPlugins;

        public MainForm()
        {
            //Initialization of Controls
            this.EditRichTextBox = new RichTextBox();
            this.ErrorTextBox = new RichTextBox();
        this.chkBox = new CheckBox();

            //Form
            this.ClientSize = new Size(700, 500);
            this.Name = "MainForm";
            this.Text = "C# Editor";

            //EditRichTextBox
            this.EditRichTextBox.Location = new Point(20, 20);
            this.EditRichTextBox.Name = "EditRichTextBox";
            this.EditRichTextBox.Size = new Size(this.Width - 150, 300);
            this.EditRichTextBox.AcceptsTab = true;
            this.EditRichTextBox.Multiline = true;

            //Controls on the Form
        this.Controls.Add(this.ButtonCompilelib);
            this.Controls.Add(this.ButtonCompile);
            this.Controls.Add(this.ButtonRun);
            this.Controls.Add(this.EditRichTextBox);
            this.Controls.Add(this.ErrorTextBox);
        this.Controls.Add(this.chkBox);

        //CheckBox
        this.chkBox.Location = new Point(600,300);
            this.chkBox.Name = "chkBox";
            this.chkBox.Text = "Color";
        };

        //My checkbox handler
        this.chkBox.Click += (sender,e) =>
        {
            if(flag == 0)
            {
                flag = 1;
                MessageBox.Show("Coloring Text");
                }
            else 
                flag = 0;
        };

        //My TextBox handler
        this.EditRichTextBox.KeyPress += (sender,e) =>
        {
            try
            {
                string tmp = Environment.CurrentDirectory + "\\" + "mydll" + ".dll";            Assembly a = Assembly.LoadFrom(tmp);
                Type t = a.GetType("MyPlugIn.colorclass");
                MethodInfo mi = t.GetMethod("color");
                Object obj = Activator.CreateInstance(t);

                Object[] Params = new Object[5];
                Params[0] = EditRichTextBox.Text;
                Params[1] = EditRichTextBox.Handle;
                Params[2] = ErrorTextBox.Handle;
                Params[3] = EditRichTextBox;
                Params[4] = flag;
                mi.Invoke(obj, Params);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        };

        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.Run(new MainForm());
        }
    }
} 
```

这是DLL文件

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;

namespace MyPlugIn
{
    public class colorclass
    {
        public void color(string Text, Object Hndl_Text, Object Hndl_Err, RichTextBox box,int flag)
        {
            if (flag == 1)
            {
                int start = box.TextLength;
                int end = box.TextLength;

                //Textbox may transform chars, so (end-start) != text.Length
                box.Select(start, end - start);
                {
                    box.SelectionColor = Color.Blue;
                }
                box.SelectionLength = 0; // clear
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:32:51.810

是的，您的代码使用反射。这些行是一个示例：

```
Type t = a.GetType("MyPlugIn.colorclass");
MethodInfo mi = t.GetMethod("color");
Object obj = Activator.CreateInstance(t); 
```

是否是最好的方法，或者对于这项任务是否有必要，这是一个不同的话题。

# ruby-on-rails - 检测 Rails 是否正在运行站点

> ID：14264780
> 
> 赞同：6
> 
> 时间：2013-01-10T18:27:51.700
> 
> 标签：ruby-on-rails, ruby, apache, nginx, passenger

我是管理公司面向公众的云平台的团队的一员。我们拥有大量运行面向互联网的虚拟机的用户群。我想对我们的地址空间进行自动扫描，看看是否有人在运行 Rails 应用程序，以便通知他们升级他们的 Rails 版本以避免本周出现的严重安全漏洞。

我注意到在一些 Apache 部署中，有一个有用的乘客标头：

```
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 2.0.3 
```

但是，这并不可靠。我想知道是否有一种可靠的方法来检测在 Web 服务器后面运行的 Rails，无论是使用响应标头还是某种可以确定的 GET / POST。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:01:02.383

每个 Rails 站点都有：

```
meta content="authenticity_token" name="csrf-param' 
```

至少这是我一直看到的。

标头响应不可靠，以下是来自各个 Rails 站点的三个：

```
Server:Apache/2.2.14 (Ubuntu)
Server:nginx
Server: thin 1.4.1 codename Chromeo 
```

您知道 nginx 和 Thin 在 Rails 社区中很受欢迎，但这还不足以说明它背后有 Rails。您需要运行一个脚本来抓取该站点并查找上面的元标记。[如果您的脚本将使用 Python， BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)非常好。如果您使用 Ruby，[Mechanize gem 非常棒。](http://mechanize.rubyforge.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:48:52.440

根据允许的配置，Rails 应用程序可以在许多不同的端口上运行。再加上应用程序可能无法以您可以识别的方式响应这一事实，这似乎是一种“次优”的查找方式。

相反，如果您拥有主机，则您拥有支持应用程序的驱动器和系统。为什么不`grep`跨系统运行，寻找匹配 Rails 的字符串。

或者搜索一些标准的 Rails 文件；使用`find`，或者`locate`如果您正在运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T20:55:20.623

Rails 另一个通常保持不变的默认设置是主 `/assets/application-<hex hash>.{css,js}`文件的名称。

我不认为存在检测 Rails 的单一可靠方法，但是通过使用`authenticity_token`、默认资产名称和 HTTP 标头的组合，您应该能够识别绝大多数 Rails 应用程序。

Wappalyzer脚本使用这三个标准，并认为两个同时出现表示 Rails 应用程序[。](https://github.com/ElbertF/Wappalyzer/blob/master/share/apps.json#L1479)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T17:33:12.640

Wappalyzer 是一个不错的选择，而且（无耻的插件）你看过[Spotkick](http://www.spotkick.com)吗？我们现在处于私有测试阶段，但它是一个用于运行开源应用程序的分布式引擎，因此您可以在所有站点上运行 Wappalyzer 以查看*可能*正在运行的轨道。

我为 banklook.com 做这件事——我运行了大约 6800 家银行来挖掘有关安全风险的详细信息。

如果您需要更多详细信息或信息，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-12T20:33:34.473

大多数 Rails 应用程序都有一个提交按钮，其中`name="commit"`

# php - 单击链接时显示所需的选项卡

> ID：14264786
> 
> 赞同：0
> 
> 时间：2013-01-10T18:28:14.620
> 
> 标签：php, jquery

我有一个 Facebook 气泡通知。如果用户单击查看所有消息，则应打开消息选项卡。我怎样才能做到这一点？

这是我尝试过的：

```
<script>
$('.view_applications').click(function(){
$( "#tabs" ).tabs("select", "#tabs-5" );
return true;
});</script>

<div class="bbbbbbb" id="view<?php echo $id; ?>">
                <div style="background-color: #F7F7F7; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; position: relative; z-index: 100; padding:8px; cursor:pointer;">
                <a href="#" class="view_applications" id="<?php    echo $id; ?>">View all <?php echo $comment_count; ?> application/s</a>
                </div>
            </div> 
```

但它没有显示所需的选项卡。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:35:07.067

你还没有初始化 DOM 吗？

```
$(document).ready(function(){    
   // do your work here

        $('.view_applications').click(function(){
        $( "#tabs" ).tabs("select", "#tabs-5" );
          return false;
         });

}); 
```

编辑 ：

文档准备好后首先初始化选项卡：

```
$('#tabs').tabs(); 
```

然后选择您想要的标签：

```
$('.view_applications').click(function(){
  $( "#tabs" ).tabs("select", "#tabs-5" );
  return false;
}); 
```

-----见`return false;`----------

# ios - Core Data 默认条目的设计模式

> ID：14264787
> 
> 赞同：0
> 
> 时间：2013-01-10T18:28:23.913
> 
> 标签：ios, xcode, core-data

我正在计划一个新的 ios 应用程序，但不确定在第一次应用程序启动时为 tableView 设置启动列表的最佳方法是什么。该应用程序使用 Core Data（更准确地说是 Magical Record）。我应该使用某种被导入的（p）列表（字典），还是应该像用户通过公式添加某些内容一样硬编码默认条目？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:37:16.970

有很多论据支持和反对这样做的所有不同方式。

就我个人而言，我更喜欢硬编码所有默认条目（如果显然没有数千个）。

# git - 为两个 Play 2.0 应用程序和一个共享实体存储库设置 IntelliJ 项目？

> ID：14264790
> 
> 赞同：0
> 
> 时间：2013-01-10T18:28:49.253
> 
> 标签：git, playframework-2.0, ebean

我希望开始将 IntelliJ 用于我的两个基于 Play 2.0.4 的应用程序，以及一个包含两个应用程序使用的共享数据库实体的存储库。在 IntelliJ 中将所有这些内容整合到一个项目中的最佳方法是什么？所有 3 个项目都是 git repos。我假设我只想“发挥想法”其中一个 Play 应用程序，因为这会创建项目文件，我希望所有这些项目都在一个项目中而不是两个？

另外，两个应用程序都可以访问与 ebean 实体的“共享”存储库的最佳方式是什么，将 git 存储库的符号链接设置到两个 Play 项目的 app/ 文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:35:54.993

在 Play 2.0 中，子模块支持似乎已被使用 SBT 的子项目所取代。可以在此处找到有关此功能的更多信息：[SBTSubProjects](http://www.playframework.org/documentation/2.0.4/SBTSubProjects)

这些唯一的缺点是您需要让父项目包含子项目的限制。您也许可以使用符号链接。另一种选择是利用 git 的子模块来共享组件。

另一个 StackOverflow 帖子包含有关使用 git 子模块的方法的更多详细信息。在那里寻找公认的答案：[玩！2.0框架多Module项目](https://stackoverflow.com/questions/11794500/play-2-0-framework-multi-module-project)

# php - htaccess 多次重写条件

> ID：14264793
> 
> 赞同：0
> 
> 时间：2013-01-10T18:28:57.690
> 
> 标签：php, .htaccess, rewrite, rule

我有一个名为的文件夹`photo`，里面还有一个 htaccess 文件。

这是htaccess的规则：

```
RewriteCond %{REQUEST_URI} \.(jpe?g|png)$
RewriteRule ^/?(.*)$ index.php?image=$1&%{QUERY_STRING} [QSA] 
```

如果客户指向[http://site.com/photo/123.jpg?test](http://site.com/photo/123.jpg?test) 就等于[http://site.com/photo/?image=123.jpg&test](http://site.com/photo/?image=123.jpg&test)

并且仅在扩展名是 jpe?g 或 png 时才有效。

但我发现如果只是指向[http://site.com/photo/123.jpg](http://site.com/photo/123.jpg)

它还使用 index.php 处理

如何再添加一种 RewriteCond 或其他方式以使仅具有查询字符串的重写

喜欢：http://site.com/photo/123.jpg?test

# java - 如何在 Java 中比较字符串和 char 数组？

> ID：14264795
> 
> 赞同：8
> 
> 时间：2013-01-10T18:29:02.733
> 
> 标签：java, arrays, string

在我的程序中，我试图将我的 char 数组与if 条件下`asterixA[]`的字符串进行比较，例如：`word`

```
if (word.equals(asterixA)) 
```

但它给了我一个错误。有没有其他方法可以比较它们？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T18:30:08.640

您必须将字符数组转换为字符串或字符串转换为字符数组，然后进行比较。

```
if (word.equals(new String(asterixA))) 
```

或者

```
if(Arrays.equals(word.toCharArray(), asterixA)) 
```

顺便提一句。if 是条件语句而不是循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:36:19.907

您似乎将“字符串是字符数组”这一行字面化了。`String`的`equals`方法指出

> 将此字符串与指定对象进行比较。当且仅当参数不为 null 并且是表示与此对象相同的字符序列的 String 对象时，结果才为真。

这完全取决于具体情况，但通常您比较相同类型的两个对象或属于同一层次结构的两个对象（共享一个公共超类）。

在这种情况下 a`String`不是 a `char[]`，但 Java 提供了从一个到另一个的机制，可以通过使用`String -> char[]`转换`String#toCharArray()`或将`char[] -> String`转换`char[]`作为参数传递给`String`的构造函数。

这样，您可以在将您的对象`String`转换为 a之后比较这两个对象，`char[]`反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:31:36.347

执行以下操作：`if (word.equals(new String(asterixA))) { ... }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:33:53.640

您可以比较数组：

```
if (Arrays.equals(asterixA, word.toCharArray()) {} 
```

# search - 如何在 TFS 历史记录中搜索更改的字段？

> ID：14264797
> 
> 赞同：2
> 
> 时间：2013-01-10T18:29:11.997
> 
> 标签：search, tfs, history

我正在使用 TFS 2010。我需要找到一种方法来搜索已更改的字段，这些字段在工作项的历史记录中被跟踪。随着字段的更改和更新，它们会在历史记录中被跟踪，您可以通过打开“显示更改（字段）”下拉菜单来查看它们。有没有办法搜索这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:55:55.343

没有内置函数，但是前段时间我需要同样的东西，我写了一个名为**TFS Helper**的小实用程序来完成它（以及更多的事情）。

您可以从**codeplex**获取源代码。名为“工作项字段历史”的选项卡就是您想要的。它显示了工作项的更改字段以及更改次数。单击某个字段时，您可以看到所有更改。

[http://tfshelper.codeplex.com/](http://tfshelper.codeplex.com/)

# ios - UIPanGestureRecognizer - 立即移动视图

> ID：14264804
> 
> 赞同：2
> 
> 时间：2013-01-10T18:29:30.327
> 
> 标签：ios, ios6

我只需要它来根据平移手势移动一些视图。问题是它不会立即发生，就像苹果地图一样，如果我将手指放在一个点上，然后快速移动到任何方向，视图会延迟移动，这意味着我将能够看到点，我把我的手指，那是我不想要的。

由于硬件限制，也许这是不可能的，因为在模拟器中它工作正常。或者也许有更好的方法，我不知道。

谢谢你。

* * *

```
- (IBAction)pan:(UIPanGestureRecognizer *)sender 
{
    CGPoint center = [sender locationInView:sender.view];
    self.myView.center = center; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T19:37:06.953

当我第一次回答时，我假设被拖动的视图有些复杂（例如，一个大`CALayer`阴影，计算量可能很大）。因此，我的原始答案如下。但在随后的评论交流中，发现其中一个按钮有一个脉冲动画，这更有可能是问题所在。如果拖动性能不可接受，则应在拖动视图期间暂停[动画。](http://developer.apple.com/library/ios/#qa/qa1673/_index.html)因此：

```
#import <QuartzCore/QuartzCore.h>

- (IBAction)pan:(UIPanGestureRecognizer *)gesture
{
    static CGPoint originalCenter;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        originalCenter = gesture.view.center;
        [self pauseLayer:gesture.view.layer];
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translate = [gesture translationInView:gesture.view.superview];
        gesture.view.center = CGPointMake(originalCenter.x + translate.x, originalCenter.y + translate.y);
    }
    else if (gesture.state == UIGestureRecognizerStateEnded ||
             gesture.state == UIGestureRecognizerStateFailed ||
             gesture.state == UIGestureRecognizerStateCancelled)
    {
        [self resumeLayer:gesture.view.layer];
    }
}

-(void)pauseLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
    layer.speed = 0.0;
    layer.timeOffset = pausedTime;
}

-(void)resumeLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer timeOffset];
    layer.speed = 1.0;
    layer.timeOffset = 0.0;
    layer.beginTime = 0.0;
    CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
    layer.beginTime = timeSincePause;
} 
```

显然，这可以与下面讨论的图像光栅化相结合，但我会先尝试像上面一样暂停动画。

* * *

**原答案：**

如果您拖动的视图非常复杂，您可以尝试对其进行光栅化。

1.  添加`QuartzCore.framework`到目标的[“将二进制文件与库链接”](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html)设置。

2.  然后相应地调整源以栅格化。

如：

```
#import <QuartzCore/QuartzCore.h>

- (IBAction)pan:(UIPanGestureRecognizer *)gesture
{
    static CGPoint originalCenter;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        originalCenter = gesture.view.center;
        gesture.view.layer.shouldRasterize = YES;
    }
    if (gesture.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translate = [gesture translationInView:gesture.view.superview];
        gesture.view.center = CGPointMake(originalCenter.x + translate.x, originalCenter.y + translate.y);
    }
    if (gesture.state == UIGestureRecognizerStateEnded ||
        gesture.state == UIGestureRecognizerStateFailed ||
        gesture.state == UIGestureRecognizerStateCancelled)
    {
        gesture.view.layer.shouldRasterize = NO;
    }
} 
```

顺便说一句，我建议`originalCenter`像这段代码一样保存，这样如果你抓住被拖离中心一点的视图，它就不会在你身上跳动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:50:44.240

当您为中心点设置新值时，请尝试禁用动画。

```
- (IBAction)pan:(UIPanGestureRecognizer *)sender 
{
    CGPoint center = [sender locationInView:sender.view];
    [CATransaction begin];
    [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
    self.myView.center = center; 
    [CATransaction commit];
} 
```

如果这有帮助，您可以尝试使用更快的动画来平滑它。

您也可以尝试禁用动画，如下所述： [在 iOS4+ 中显式禁用 UIView 动画](https://stackoverflow.com/questions/5443742/explicitly-disabling-uiview-animation-in-ios4)

不久：

```
- (IBAction)pan:(UIPanGestureRecognizer *)sender 
{
    CGPoint center = [sender locationInView:sender.view];
    [UIView setAnimationsEnabled:NO];
    self.myView.center = center; 
    [UIView setAnimationsEnabled:YES];
} 
```

一旦您设法在重新定位期间禁用所有动画，则取决于硬件和代码的速度。

# sql - SQL：确定记录（名字/姓氏）是否在日期列中出现多次

> ID：14264806
> 
> 赞同：0
> 
> 时间：2013-01-10T18:29:32.823
> 
> 标签：sql, ms-access

我有一个包含**FirstName、SecondName 和 Date Columns**的表。许多记录在日期字段中出现多次。

```
First_Name  Last_Name  Date

Amy         James      1/1/2011
Amy         James      1/1/2012
John        Jones      1/2/2011
James       Anyone     2/2/2011
James       Anyone     2/2/2012 
```

我正在尝试查询仅在 2011 年和 2012 年出现的不同**名字和姓氏。**谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:35:03.237

您需要查看`GROUP BY`和`YEAR`功能。尝试这样的事情：

```
SELECT First_Name, Last_Name
FROM TableName 
GROUP BY First_Name, Last_Name
HAVING COUNT(Year([Date])) > 1 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/0167b/5)。

# c - 从C中的物理内存地址读取结构

> ID：14264809
> 
> 赞同：2
> 
> 时间：2013-01-10T18:29:36.157
> 
> 标签：c, linux, memory

由于我缺乏 C 知识，这可能更多是一个问题，但我希望有人能够提供可能的解决方案。简而言之，我正在尝试读取存储在内存中的结构，并且我拥有它的物理内存地址。这也是在 64 位 Linux 系统（Debian (Wheezy) Kernel 3.6.6）上完成的，我想使用 C 作为语言。

例如，相关结构的当前地址位于物理地址：0x3f5e16000

现在我最初尝试使用指向 /dev/mem 的指针来访问这个地址。但是，从那以后，我了解到不允许访问任何大于 1024MB 的地址，并且我在 var/log/messages 中收到一条很好的错误消息，告诉我所有相关信息。目前正在尝试从用户空间应用程序进行访问，但如果需要的话，我很乐意研究编写内核模块。

有趣的是，我还发现了一种称为“kprobe”的东西，据说它允许绕过 > 1024MB /dev/mem 的限制。但是，我真的不想在我的系统中引入任何潜在的安全问题，而且我确信必须有一种更简单的方法来实现这一点。关于 kprobe 的信息可以在这里找到： [http ://www.libcrack.so/2012/09/02/bypassing-devmem_is_allowed-with-kprobes/](http://www.libcrack.so/2012/09/02/bypassing-devmem_is_allowed-with-kprobes/)

我已经阅读了一些内容，并且发现了使用 mmap 将物理地址映射到用户空间以便可以读取它的参考资料，但我必须承认我不理解在 C 中的实现。

如果有人可以提供一些有关访问物理内存的信息，或者将数据从物理地址映射到用户空间虚拟地址，我将非常感激。

如果我对我正在做什么有点模糊，你将不得不原谅我，但这是一个项目的一部分，我不想透露太多信息，所以请多多包涵:)我不是迟钝之类的。

内存中的结构是一个由四个整数和十个长整数组成的块，由正在运行的内核模块加载到内存中。

我使用的地址绝对是一个物理地址，它被设置为非分页，内核模块执行到物理的转换，我没有使用地址操作符。

我想知道是否应该将问题重新表述为如何从物理位置读取 int ，因为这是结构的第一个元素。我希望这有助于澄清事情！

**编辑**- 在做了更多阅读之后，似乎解决这个问题的一种可能方法是构造一个内核模块，然后使用该`mmap`函数将物理地址映射到内核模块可以访问的虚拟地址。任何人都可以就使用 mmap 实现这一点提供任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T20:49:44.063

我只回答这个问题：

> 我想知道是否应该将问题重新表述为如何从物理位置读取 int ，因为这是结构的第一个元素。

不，问题不在于`int`vs. `struct`，问题在于 C 本身并没有物理内存的概念。操作系统与 MMU 一起确保每个进程，包括每个正在运行的 C 程序，都在虚拟内存沙箱中运行。操作系统*可能会*提供进入物理内存的逃生口。

如果您正在编写一个在物理地址管理某个对象的内核模块`0x3f5e16000`，那么您应该提供一些 API 来访问该内存，最好是使用文件描述符或其他抽象来隐藏内核内存管理的细节与之通信的用户程序。

如果您尝试与设计不佳的内核模块进行通信，该模块希望您访问固定的物理内存地址，那么涉及的丑陋黑客`/dev/mem`就是您的分享。

# android - 如何制作 Gps 位置提供商？（USB 全球定位系统）

> ID：14264818
> 
> 赞同：1
> 
> 时间：2013-01-10T18:30:10.180
> 
> 标签：android, service, gps, provider

我有一个没有 GPS 的 android 设备，但我想运行需要 GPS 的应用程序。

例如，我想制作一个这样的应用程序来使用蓝牙 gps，而不是使用 BT im 使用 Android Open Accesory 制作 USB GPS，所以我的问题不是如何将 GPS 与 Android 通信，我的问题是如何制作android 识别的服务/提供程序，其余应用程序可以使用。

可以制作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:35:43.470

一切皆有可能，但也许不值得：

将驱动程序写入您的 USB gps 并将其映射到 android 操作系统级别。JNI 级别和核心操作系统。在您的应用程序中使用它。

可能值得购买带 GPS 的新手机。

# python - 在 Tkinter 中悬停后如何更改多个小部件的颜色？

> ID：14264819
> 
> 赞同：3
> 
> 时间：2013-01-10T18:30:12.040
> 
> 标签：python, colors, background, widget, tkinter

我正在尝试制作一个脚本，它将在悬停后更改小部件的背景和前景色。

```
from Tkinter import *

root=Tk()

Hover1=Button(root,text="Red color", bg="white")
Hover1.pack()

Hover2=Button(root,text="Yellow color", bg="white")
Hover2.pack()

Hover1.bind("<Enter>",Hover1.configure(bg="red"))
Hover1.bind("<Leave>",Hover1.configure(bg="white"))

Hover2.bind("<Enter>",Hover2.configure(bg="yellow"))
Hover2.bind("<Leave>",Hover2.configure(bg="white"))

root.mainloop() 
```

但是当我将鼠标悬停在任何按钮上时，什么都没有发生，它们保持白色。我知道我可以使用一个函数，但是每个小部件都有两个函数（1 个用于 ，1 个用于 ）。我想创建一个函数，它将重新着色我悬停的那个小部件，并解释为什么这个脚本没有做我想要它做的事情。

我希望我能很好地描述我的问题。感谢您的每一个回答。

PS：我想避免上课。

末日挂载

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:39:13.770

您需要提供一个可调用函数来绑定到事件。相反，您正在调用一个函数并传递其结果。像这样修复它：

```
Hover1.bind("<Enter>", lambda event, h=Hover1: h.configure(bg="red")) 
```

# java - 发出http请求的核心java程序

> ID：14264828
> 
> 赞同：-5
> 
> 时间：2013-01-10T18:31:05.520
> 
> 标签：java

> **可能重复：**
> [如何在 java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)

我有一个基本查询，我想编写一个核心 Java 程序来发出 http 请求。

假设它将访问并打开任何网站，那么我该如何编写这个将访问并打开任何网站的核心 Java 程序。我完全知道这件事可以用 servlet 和其他高级框架来实现，但我也想用核心 Java 程序来做。

请指教如何在Java中实现这个东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:32:31.137

你应该看看[HttpComponents](http://hc.apache.org/)。如果您只想使用 JDK 中的技术来实现，您应该查看[URLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html)。

# algorithm - 确定矩阵中的循环

> ID：14264831
> 
> 赞同：1
> 
> 时间：2013-01-10T18:31:15.630
> 
> 标签：algorithm, matrix, cycle

我有一个矩阵，每个单元格都有一个布尔属性。我需要确定一个循环，从一个布尔属性为 false 的单元格开始，并且这个循环必须只包含将该布尔属性设置为 true 的单元格（显然，起始单元格除外）。另一个条件是循环中任意两个连续的单元格必须在同一行（或同一列），并且循环中的三个连续单元格不能在同一行（或同一列）。您实际上可以从一个单元格跳到另一个单元格，它们不必是邻居，它们只需要在同一行或同一列上。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:23:16.000

更新：我错过了在两个相邻单元格之间不需要移动 - 这增加了每一步可能移动的数量，但并没有真正改变总体思路。

最简单的实现可能是[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)——你从起始单元开始并查看所有可能的移动——除了第一步之外，最多有三个可能的移动。对于每个可能的移动，您递归地执行相同的操作，直到您再次到达起始单元格或没有可能的移动剩余。在后一种情况下，您追溯一个移动并尝试下一个可能性，如果还有一个剩余。

您必须将最后一次移动的方向与递归调用一起传递，因为该方向对下一步无效。如果不允许多次访问单元格，您也必须跟踪访问过的单元格，并在回溯时取消标记它们。如果允许多次访问单元格，则必须跟踪之前访问单元格时离开单元格的方向，以避免循环。

使用[呼吸优先搜索](http://en.wikipedia.org/wiki/Breath-first_search)而不是深度优先搜索将避免尝试没有解决方案的长路径，代价是保留大量部分解决方案。[A* 搜索](http://en.wikipedia.org/wiki/A%2a_search_algorithm)可能是加快此速度的另一种选择。

旁注： 多次访问一个单元格可能没有任何价值，因为您可以在第一次访问该单元格时直接采取另一个动作。例外是第一次进入牢房时不允许移动，但我不确定这样的路径是否可行。

# common-lisp - drakma:http-request 在使用 burp 作为代理时在 https 请求期间崩溃

> ID：14264844
> 
> 赞同：0
> 
> 时间：2013-01-10T18:32:00.447
> 
> 标签：common-lisp, drakma, burp

我想通过使用 burp-suites 作为自动代理来研究 drakma 的一些传出流量。

但是当发出 https 请求 drakma 信号（更准确地说是 cl+ssl drakma 使用）时会崩溃：

```
(drakma:http-request "https://www.stackoverflow.com"
             :proxy '("127.0.0.1" 8080)) 
```

=>

```
A failure in the SSL library occurred on handle #.(SB-SYS:INT-SAP #X00677EE0) (return code: 1). SSL error queue:
error:14077438:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert internal error

   [Condition of type CL+SSL::SSL-ERROR-SSL]

Restarts:
 0: [RETRY] Retry SLIME interactive evaluation request.
 1: [*ABORT] Return to SLIME's top level.
 2: [REMOVE-FD-HANDLER] Remove #<SB-IMPL::HANDLER INPUT on descriptor 6: #<CLOSURE (LABELS SWANK-BACKEND::RUN :IN SWANK-BACKEND:ADD-FD-HANDLER) {100314533B}>>
 3: [ABORT] Exit debugger, returning to top level.

Backtrace:
  0: (CL+SSL::SSL-SIGNAL-ERROR #.(SB-SYS:INT-SAP #X00677EE0) #<FUNCTION CL+SSL::SSL-CONNECT> 1 -1)
  1: (CL+SSL:MAKE-SSL-CLIENT-STREAM #<unavailable lambda list>)
  2: (DRAKMA:HTTP-REQUEST #<PURI:URI https://www.stackoverflow.com/> :PROXY ("127.0.0.1" 8080)) 
```

我想知道这个错误是什么意思（因为我找不到 cl+ssl 的正确文档）以及如何修复/防止这种情况发生？

# javascript - Python webbrowser包装器websocket？

> ID：14264854
> 
> 赞同：0
> 
> 时间：2013-01-10T18:32:35.393
> 
> 标签：javascript, python, browser, websocket

我正在为我的树莓派开发一个浏览器 NFC 解决方案。我在 Chrome 浏览器中开发了一个 java 小程序。java 小程序正在使用我的 nfc 阅读器。每次标记我的卡时，他都会调用一个 javascript 函数并将我的卡 ID 发送到这个 javascript 函数。我的卡 ID 有一个警报。

Java 真的很重，而且占用大量内存。我喜欢的是使用 python 而不是 java。python脚本需要和java小程序一样。

1.  读取我的 NFC 卡
2.  将卡片 ID 发送到 javascript 函数
3.  使用我的标签 ID 发出警报。
4.  等待下一张卡片并做同样的事情......转到1

我发现的是一个像[http://autobahn.ws/](http://autobahn.ws/)这样的 python websocket它将很容易建立一个网络服务器。把我面临的问题是Python脚本不能直接调用javascript函数。javascriopt 函数可以调用 python 函数，但不能反过来。

我的问题是。当我用 Python 脚本标记我的 NFC 卡时，我在哪里可以找到每次调用 javascript 函数的解决方案

NFC python是[http://pyscard.sourceforge.net/](http://pyscard.sourceforge.net/)

![在此处输入图像描述](../Images/8957cdb0cdf113bce4ce294e3407bc70.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:19:43.837

使用 Autobahn，您将在浏览器 JS 中*订阅*主题“NFC-Tag-Read”，并从 Pi 上的 Python 向该主题*发布标签事件。*

# c++ - 内联导致模板类的特殊成员函数覆盖虚函数被忽略

> ID：14264855
> 
> 赞同：4
> 
> 时间：2013-01-10T18:32:44.877
> 
> 标签：c++, templates, inline, specialization, one-definition-rule

我想和你们分享一个我偶然发现的奇怪例子，这让我思考了两天。

要使此示例正常工作，您需要：

*   三角形虚继承（关于成员函数`getAsString()`）
*   `Value<bool>::getAsString()`覆盖虚函数的模板类（此处为 ）的成员函数特化
*   由编译器（自动）内联

你从一个模板类开始，它实际上继承了一个公共接口——即一组虚拟函数。稍后，我们将专门研究这些虚函数之一。内联可能会导致我们的特化被忽视。

```
// test1.cpp and test2.cpp
#include <string>

class ValueInterface_common
{
public:
  virtual ~ValueInterface_common() {}
  virtual const std::string getAsString() const=0;
};

template <class T>
class Value :
  virtual public ValueInterface_common
{
public:
  virtual ~Value() {}
  const std::string getAsString() const;
};

template <class T>
inline const std::string Value<T>::getAsString() const
{
  return std::string("other type");
} 
```

接下来，我们必须继承这个类和一个本身也需要模板化`Value`的类中的接口：`Parameter`

```
// test1.cpp
template <class T>
class Parameter :
  virtual public Value<T>,
  virtual public ValueInterface_common
{
public:
  virtual ~Parameter() {}
  const std::string getAsString() const;
};

template<typename T>
inline const std::string Parameter<T>::getAsString() const
{
  return Value<T>::getAsString();
} 
```

现在，不要（！）给出`Value`类型等于 bool 的特化的前向声明......

```
// NOT in: test1.cpp
template <>
const std::string Value<bool>::getAsString() const; 
```

但相反，只需像这样给出它的定义......

```
// test2.cpp
template <>
const std::string Value<bool>::getAsString() const
{
  return std::string("bool");
} 
```

..但在另一个模块中（这很重要）！

最后，我们有一个`main()`函数来测试正在发生的事情：

```
// test1.cpp
#include <iostream>

int main(int argc, char **argv)
{
  ValueInterface_common *paraminterface = new Parameter<bool>();
  Parameter<int> paramint;
  Value<int> valint;
  Value<bool> valbool;
  Parameter<bool> parambool;

  std::cout << "paramint is " << paramint.getAsString() << std::endl;
  std::cout << "parambool is " << parambool.getAsString() << std::endl;
  std::cout << "valint is " << valint.getAsString() << std::endl;
  std::cout << "valbool is " << valbool.getAsString() << std::endl;
  std::cout << "parambool as PI is " << paraminterface->getAsString() << std::endl;

  delete paraminterface;

  return 0;
} 
```

如果您按如下方式编译代码（我将其放入名为 test1.cpp 和 test2.cpp 的两个模块中，后者仅包含专业化和必要的声明）：

```
g++ -O3 -g test1.cpp test2.cpp -o test && ./test 
```

输出是

```
paramint is other type
parambool is other type
valint is other type
valbool is bool
parambool as PI is other type 
```

如果您使用`-O0`或仅编译`-fno-inline`- 或者如果您确实给出了专业化的前向声明 - 结果将变为：

```
paramint is other type
parambool is bool
valint is other type
valbool is bool
parambool as PI is bool 
```

有趣，不是吗？

到目前为止我的解释是：内联在第一个模块（test.cpp）中起作用。所需的模板函数被实例化，但有些函数最终被内联在对`Parameter<bool>::getAsString()`. 另一方面，`valbool`这不起作用，但模板被实例化并用作函数。然后链接器找到实例化的模板函数和第二个模块中给出的专用函数，并决定后者。

你怎么看呢？

*   你认为这种行为是一个错误吗？
*   为什么内联适用于`Parameter<bool>::getAsString()`但不适用于`Value<bool>::getAsString()`虽然两者都覆盖了虚函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:52:09.370

我推测你有一个 ODR 问题，所以猜测为什么某些编译器优化的行为与另一个编译器设置不同是没有意义的。

本质上，**单一定义规则**规定同一实体在整个应用程序中应具有完全相同的定义，否则效果是**未定义**的。

根本问题是，没有看到类模板成员函数的专用版本的代码可能仍然可以编译，可能会链接，有时甚至可能会运行。这是因为在没有显式特化（前向声明）的情况下，非特化版本开始发挥作用，很可能实现也适用于您的特化类型的通用功能。

因此，如果你很幸运，你会收到一个关于缺少声明/定义的编译器错误，但如果你真的很不幸，你会得到不符合你预期的“工作”代码。

修复：始终包含所有模板特化的（前向）声明。最好将它们放在一个标头中，并包含所有调用您的类以获取任何可能的模板参数的客户端的标头。

```
// my_template.hpp
#include "my_template_fwd.hpp"
#include "my_template_primary.hpp"
#include "my_template_spec_some_type.hpp" 

// my_template_fwd.hpp
template<typename> class my_template; // forward declaration of the primary template

// my_template_primary.hpp
#include "my_template_fwd.hpp"
template<typename T> class my_template { /* full definition */ };

// my_template_spec_some_type.hpp
#include "my_template_fwd.hpp"
template<> class my_template<some_type> { /* full definition */ };

// some_client_module.hpp
#include "my_template.hpp" // no ODR possible, compiler will always see unique definition 
```

显然，您可以通过为模板特化创建子目录并相应地更改包含路径来重新组织命名。

# ruby-on-rails - 如何在rails 3中实现opening_time模型

> ID：14264864
> 
> 赞同：0
> 
> 时间：2013-01-10T18:33:05.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我想为商店实现营业时间模式。

目前我有

```
Class Store
  has_one :opening_table

  #return opening_times as an array
  def opening_times
    self.build_opening_table unless opening_table
    (0..6).collect{ |i| 
      [opening_table.read_attribute("open_#{i}"),opening_table.read_attribute("close_#{i}") ]
    }      
  end

  def opening_times=(attr)
    self.build_opening_table unless opening_table
    i=0
    attr.each do |el|
      opening_table.attributes= {"open_#{i}".to_sym => el[0]}
      opening_table.attributes= {"close_#{i}".to_sym => el[1]}
      i=i+1
    end
 end 
```

并且OpeningTable 有字段open_0、close_0 表示周一开盘和收盘时间

```
 create_table :opening_tables do |t|
  t.references :advertisement, :null=>false
  (0..6).each do |i|
    t.integer "open_#{i}"
    t.integer "close_#{i}"
  end
  t.timestamps
end 
```

我对这个解决方案感到不舒服和灵活，但我不知道以更好的方式实施它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:37:21.860

你可以制作另一个名为`Schedule`

```
create_table :schedules do |t|
   t.integer 'open'
   t.integer 'close'
   t.integer store_id
   t.timestamps
end 
```

然后做店铺`has _many :schedules`

所以你可以`Store.first.schedules[0].open`访问等等。

编辑：对于嵌套属性，您只需通过`store.schedules[0]`

或者您可以添加到`schedules`表中：

```
t.string :week_day 
```

然后做`store.schedules.find_by_week_day("monday")`

至于验证，将其添加到您的 models/store.rb

```
validate :has_seven_schedules
...
def has_seven_schedules
   self.schedules.count == 7 ? true : false
end 
```

编辑2：

如果您愿意，可以将其`find_by_week_day("monday")`放在 store.rb 模型中的方法上，例如：

```
def opening_time(day)
   schedule = self.schedules.find_by_week_day(day)
   unless schedule.nil?
       return schedule.open
   end
end 
```

关闭时间也是如此。

# javascript - Dojo 1.6 延迟链接和挂接问题

> ID：14264866
> 
> 赞同：0
> 
> 时间：2013-01-10T18:33:10.303
> 
> 标签：javascript, dojo, chaining, deferred

我在 Dojo 1.6 中连接和链接延迟的 ajax 请求时遇到了一个小问题。代码看起来像

```
 login : function(data) {            
        var def = lang.hitch(this.authenticate, this.authenticate(data));
        console.log(def); // [I]
        return def;
    },

    authenticate : function(data) {
        require([ "dojo/Deferred", "dojo/request/xhr", "dojo/_base/lang",
                "dojox/encoding/digests/MD5" ], lang.hitch(this, function(Deferred, xhr,
                lang, MD5) {
            var data2send = lang.mixin(data, {
                action : "authenticate",
                password : "21232f297a57a5a743894a0e4a801fc3",
                userId : data.username
            });

            return xhr(this.handlerUrl, {
                handleAs : "json",
                method : "POST",
                sync : false,
                data : data2send
            });
        }));
    } 
```

其中 login() 被调用。恕我直言，它应该返回一个延迟对象，该对象在 authenticate() 中的 ajax 请求完成后解析。因此，[I] 中的日志记录应该给我一个 Deferred-promise，但 Firebug 将返回值记录为 function()。我希望任何人都可以提供帮助。

提前致谢！

编辑：另一个问题是，为什么 def 成为对象，它由 lang.hitch 的第一个参数给出。例如，在日志上面的代码中给了我“function()”。当我将第一个参数更改为“this”时，日志给了我“this”-object（“Object {...}”）本身。我假设挂接机制不会影响返回值，但只会将范围挂接到第二个参数（即被调用函数）。我错了吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:31:51.210

代码最终看起来像这样：

```
define([ "dojo/_base/lang", "dojo/_base/declare", "dojo/Deferred",
    "dijit/_Widget" ], function(lang, declare, Deferred) {
return declare("LoginController", null, {
    handlerUrl : "sessionHandler.php",
    constructor : function(kwArgs) {
        lang.mixin(this, kwArgs);
    },

    login : function(data) {
        def = new Deferred();
        auth = this.authenticate(data);
        auth.then(function(success) {
            if (success.success == true) {
                def.resolve(true);
            } else {
                def.resolve(false);
            }
        }, function(err) {
            def.resolve(false);
        });
        return def;
    },

    authenticate : function(data) {
        var def = new Deferred();
        require([ "dojo/request/xhr" ], lang.hitch(this, function(xhr) {
            var data2send = lang.mixin(data, {
                action : "authenticate",
                userId : data.userId
            });

            xhr(this.handlerUrl, {
                handleAs : "json",
                method : "POST",
                sync : false,
                data : data2send
            }).then(function(data) {
                def.resolve(data);
            }, function(err) {
                def.reject(err);
            });

        }));
        return def;
    }
});
}); 
```

如果没有在前面设置 Deferred，我就无法绕过 require 的异步调用。因此，Deferred 构造函数最初必须在定义语句中加载，因此我不需要在我的函数中异步地要求它。

# html - 使用服务器的重写表单

> ID：14264871
> 
> 赞同：0
> 
> 时间：2013-01-10T18:33:27.893
> 
> 标签：html, nginx

我有这个表格：

```
<form action="/search" method="get" class="search">
    <input type="text" name="q" value="$get.q.htmlentities();" placeholder="Search..." />
</form> 
```

我是否可以告诉它去`http://site.com/search/my+search+string`
而不是让它去`http//site.com/search.php?q=my+search+string`

我有 nginx 重写工作，但我怎样才能形成去那个 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:43:40.460

听起来您将希望在单击提交后进行 javascript 操作以更改表单的 action 属性，以允许浏览器转到所需的 URL。

在这种情况下，我不会使用服务器端重写，因为这只会使服务器需要处理的请求数量增加一倍。

# c# - POST HTTP 请求从 iOS 到 RESTful WCF 服务 .NET 4.0

> ID：14264873
> 
> 赞同：0
> 
> 时间：2013-01-10T18:33:31.760
> 
> 标签：c#, .net, ios, objective-c, wcf

我正在尝试向在 IIS7 .NET Framework 4.0 上运行的用 C# 编写的 WCF Web 服务创建 POST 请求。

Web 服务适用于 GET 请求，但我似乎无法让 POST 方法正常工作。一些背景是，在不得不切换到 .NET 之前，我将 PHP 用于服务器端。

我在 iOS 中的请求代码：

```
NSArray *jsonKeys = [NSArray arrayWithObjects:@"zip", nil];
NSArray *jsonValues = [NSArray arrayWithObjects: zipcode, nil];
NSDictionary *jsonDict = [NSDictionary dictionaryWithObjects:jsonValues forKeys:jsonKeys];

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDict options:0 error:nil];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"%@", jsonString);

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/weather", ConnectionString3]];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:jsonData]; 
```

WCF Web 服务的 C# 代码：

```
[OperationContract]
[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "/weather")]
List<Weather> GetWeatherMethod(string zip); 
```

我在 iOS 端记录了响应，该响应显示来自服务器的 XML 响应，表明发生了错误，并检查了服务器端日志，我似乎找不到任何问题。任何帮助，将不胜感激。

只有从我能找到的服务器的日志中读取：

```
(Date and Time) (Server IP) POST /PeopleService/PeopleService.svc/weather - 80 - (local app ip) AppName/1.0+CFNetwork/609+Darwin/11.4.2 400 0 0 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:09:55.703

能够通过创建一个 JSON 映射到它的类来解决问题。

```
[OperationContract]
[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "/weather")]
List<Weather> GetWeatherMethod(ZipCodeJSON zipJson);

[DataContract]
public class ZipCodeJSON
{
    [DataMember]
    public string zip { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:55:28.697

问题是您将操作的主体样式声明为`Bare`，但是您发送的是您希望参数接收的数据，该数据*包含*在参数名称中。

如果您将操作声明为

```
[OperationContract]
[WebInvoke(Method = "POST",
           RequestFormat = WebMessageFormat.Json, 
           ResponseFormat = WebMessageFormat.Json, 
           BodyStyle = WebMessageBodyStyle.WrappedRequest,
           UriTemplate = "/weather")]
List<Weather> GetWeatherMethod(string zip); 
```

您可以根据需要发送请求正文`{"zip":"30309"}`。

# python - 制作第三方

> ID：14264882
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:34:14.563
> 
> 标签：python

我正在遵循[Google 的 OR-Tools 说明](http://code.google.com/p/or-tools/wiki/AGettingStarted#Troubleshooting)并阅读此说明：

```
> "Then you can download all dependencies and build them using:
> 
>    make third_party" 
```

这个make命令是什么？我应该从 Windows 命令提示符运行它吗？这个第三方文件在哪里？

对不起这个基本问题。我是这个领域的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:37:17.830

那一页对我来说似乎很清楚。

> **请确保 svn.exe、nmake.exe 和 cl.exe 在您的路径中。**

你需要这样做。`nmake.exe`执行令`make`，从物声。至于你应该在哪里运行这个命令，如页面所述，从 Visual Studio 的“工具”菜单中的终端运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:42:46.197

**姓名**

```
make - GNU make utility to maintain groups of programs 
```

**概要**

```
make [ -f makefile ] [ option ] ... target ... 
```

简单地说，make 是一个编译工具，Make 命令是 Linux 中用来“制作”所有必要的重新编译的命令。Make 需要一个配置文件。为您的项目构建此文件后，您通常键入 make 来构建更改的文件。

查看此链接以获取一些`make`示例。 [http://linuxdevcenter.com/pub/a/linux/2002/01/31/make_intro.html](http://linuxdevcenter.com/pub/a/linux/2002/01/31/make_intro.html)

根据您提供的链接，说明很简单：

**编译库**

所有构建规则都使用 make (gnu make)，即使在 Windows 上也是如此。`make.exe`在工具子目录中提供了一个二进制文件；他们为您提供`make.exe`，这意味着在 Windows 中您可以`svn.exe`用来执行以下命令，只需确保您位于包含 make 二进制文件的路径中。

如果找不到`svn.exe`，请安装提供命令行工具的 svn 版本。 [http://www.collab.net/downloads/subversion](http://www.collab.net/downloads/subversion)

只需执行以下命令即可构建依赖项：

```
make 
```

*要在 Windows 中以调试模式编译，请使用以下命令：*

```
make DEBUG="/Od /Zi" all 
```

*如果您需要清理所有内容并再次执行此操作，请运行：*

```
make clean 
```

这将清除所有下载的源、所有编译的依赖项和 Makefile.local。获得一个干净的状态很有用，或者如果您在 dependencies.archives 中添加了一个存档。

最后，编译库运行：

```
make all 
```

一切编译完成后，你会在 or-tools/bin 和 or-tools/lib 下找到：

```
some static libraries (libcp.a, libutil.a and libbase.a, and more)
One binary per C++ example (e.g. nqueens)
C++ wrapping libraries (pywrapcp.so, linjniwrapconstraint_solver.so)
Java jars (com.google.ortools.constraintsolver.jar...)
C# assemblies 
```

**然后我们可以编辑 MakeFile.local**

首先，下载 Python 2.7 和 JDK 7，安装它们。

编辑 Makefile.local 以指向正确的 Python 和 Java 安装。例如，在我的系统上，它是：

```
WINDOWS_JDK_DIR = c:\\Program Files\\Java\\jdk1.7.0_02
WINDOWS_PYTHON_VERSION = 27
WINDOWS_PYTHON_PATH = C:\\python27 
```

**之后，要使用 python，您需要安装 google-apputils。**

```
 cd dependencies/sources/google-apputils
  c:\python27\python.exe setup.py install 
```

# php - MySQL：规范化数据库的子查询

> ID：14264887
> 
> 赞同：1
> 
> 时间：2013-01-10T18:34:36.503
> 
> 标签：php, mysql, database, subquery, normalization

我花了很多时间在谷歌上搜索这个，也登陆了几次 Stackoverflow，但我不知道如何满足我的需求。

对于你们大多数人来说，这可能很容易，但我就是无法让它发挥作用。

假设我有这张桌子：

**项目数据**

![在此处输入图像描述](../Images/17c3e7e499b4818eb0e1b6ae323da74f.png)

还有一个：

**供应商数据**

![在此处输入图像描述](../Images/42fa305afaa6f1fa659aedf9cc228b11.png)

我想要得到的是一个查询，我从第一个表中选择一个项目，并且该查询应该用第二个表中指定的相应名称替换 vendor_id - 当然仅用于我的输出。

我认为逻辑非常简单，但我无法创建正确的查询。

比如：我从表**item_data中选择 id 为****2**的项目，然后我得到了在 item_data 中指定的**vendor_id**，这个 vendor_id 正在**vendor_data** -> **vendor_id** (3) 和正确的**vendor_name** (CompanyZ)中查找作为我的结果被带回来。

 ******非常感谢您的帮助，谢谢！

*   安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:38:24.600

听起来你只是想要一个简单的加入

```
SELECT i.item_id, i.item_name, v.vendor_id, v.vendor_name <-- select whatever fields you need here
FROM item_data AS i
INNER JOIN vendor_data AS v ON i.vendor_id = v.vendor.id
WHERE i.item_id = ?  <-- specify item_id for lookup here 
```******

# forms - 在 Orbeon 表单中禁用约束验证

> ID：14264892
> 
> 赞同：0
> 
> 时间：2013-01-10T18:34:58.207
> 
> 标签：forms, validation, constraints, orbeon

有没有办法通过输入参数或数据注入禁用 Orbeon Forms 中表单的所有检查约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:44:22.847

一种方法是向所有约束添加条件，以便在满足条件时，约束将被评估。

示例：让我们有一个下拉字段名称“is-validation-required”，其中包含“是”和“否”选项。

在所有绑定定义中都有约束属性，如下所示

```
<xforms:bind id="field-1" nodeset="instance('my-instance')/field-1"
 constraint=if(../is-validation-required='Yes') then 'Your validation goes here' 
  else true() /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T23:58:35.073

验证在服务器上进行，不能从客户端禁用。另请参阅文档中的[安全性和 XSS](http://wiki.orbeon.com/forms/doc/developer-guide/admin/security-xss)。

# jquery - Jquery UI 上次单击的选项卡

> ID：14264893
> 
> 赞同：0
> 
> 时间：2013-01-10T18:34:59.870
> 
> 标签：jquery, jquery-ui, tabs, lazy-loading, jquery-ui-tabs

我有几个带有图像的标签。这个想法是仅显示来自单击的选项卡的图像，如下所示：

`$("#tabs").tabs({ show: function(event, ui) {
$('img.lazy', ui.panel).each(function(){ var imageSrc = $(this).attr("data-original-src"); $(this).attr("src", imageSrc); }); } });`

但有些标签有近 750 张图片。如果单击新选项卡，如何停止从旧选项卡下载图像？我认为应该是这样的：

```
$("#tabs").tabs({
 show: function(event, ui) {
     if (oldui != null) {
         $('img.lazy', oldui.panel).each(function() { 
             $(this).attr("src", "");
         });
     }
     oldui = ui;
     $('img.lazy', ui.panel).each(function() {
         var imageSrc = $(this).attr("data-original-src");
         $(this).attr("src", imageSrc);
     });
 } 
```

});

但我怎样才能获得最后点击的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:43:57.470

ui.index 是当前的，将其存储在 show 方法的变量中：

```
var prevTab = 0;
$("#tabs").tabs({
 show: function(event, ui) {
     if(prevTab != ui.index) {
       //do it here....
     }
     prevTab = ui.index; 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:09:03.893

看起来我们可以访问旧面板`ui.oldPanel`
`$("#tabs").tabs({ select: function (event, ui) { $('img.lazy', ui.oldPanel).each(function () { $(this).attr("src", "images/card-text-bg.png"); }); $('img.lazy', ui.panel).each(function () { var imageSrc = $(this).attr("data-original"); $(this).attr("src", imageSrc); }); } });`

# c# - C# 应用程序之间的双向 IPC

> ID：14264900
> 
> 赞同：2
> 
> 时间：2013-01-10T18:35:22.077
> 
> 标签：c#, winforms, .net-3.5

我知道 IPC 并已在多个项目中使用它。我的新需求包括两个简单的 C# 应用程序，它们需要交换诸如“做这个”“做那个”之类的短消息。这应该是双向的。

这将在旧系统（Win Xp .Net 3.5）上运行而无法配置它们。最终用户将只运行应用程序。

*   WCF 对于这个任务来说太复杂了
*   TCP 上的套接字需要防火墙配置，并且可能会被防病毒软件阻止
*   Microsoft 消息队列非常适合，但需要在所有客户端上安装 MSMQ
*   可以使用命名管道，但我想要更高级别的东西（我想与它们一起使用汇编）

有没有一种简单的方法在 C# 应用程序之间交换数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:45:32.903

你有几个选择：

*   wcf，你说你已经考虑过并拒绝了；请问您拒绝的原因是什么？

*   正如您所提到的，命名管道；将两个命名管道包装到双向消息传递系统中实际上是相当简单的（专业提示：使其一次性并清理管道，以免将它们锁定）

*   排队系统，但通常你会在多对多或一对多通道中看到这些

*   序列化消息队列（简单队列结构）并将其放入内存映射文件中，然后从任一侧读/写

*   深奥：使用 Windows 消息传递，即 pinvoke 发送/发布消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:51:57.237

虽然你说 TCP 已经出...

我一直非常热衷于使用 ZeroMQ，但一直没有机会。它是带有 ac# 包装器的多平台，专为此类应用程序消息传递而设计。[在http://www.zeromq.org/](http://www.zeromq.org/)查看 ZeroMQ 。

他们网站之一的一些示例代码：

```
// Set up a publisher.

var publisher = new ZmqPublishSocket {
    Identity = Guid.NewGuid().ToByteArray(),
    RecoverySeconds = 10
};

publisher.Bind( address: "tcp://127.0.0.1:9292" );

// Set up a subscriber.

var subscriber = new ZmqSubscribeSocket();

subscriber.Connect( address: "tcp://127.0.0.1:9292" );

subscriber.Subscribe( prefix: "" ); // subscribe to all messages

// Add a handler to the subscriber's OnReceive event

subscriber.OnReceive += () => {

    String message;
    subscriber.Receive( out message, nonblocking: true );

    Console.WriteLine( message );
};

// Publish a message to all subscribers.

publisher.Send( "Hello world!" ); 
```

# php - 用于检索 ASP.Net 会话 ID 的 PHP 代码

> ID：14264903
> 
> 赞同：0
> 
> 时间：2013-01-10T18:35:31.013
> 
> 标签：php, asp.net

我正在寻找一个 php 函数来从 asp.net 页面获取会话 ID。我使用 PHPSESSID 来获取 php 会话 ID，它给出了正确的结果，如下所示：

```
$strCookie = 'PHPSESSID=' . $_COOKIE['PHPSESSID'] . '; path=/'; 
session_write_close();
echo $strCookie;
result: PHPSESSID=h7h1si1gqge0opqe7hedk46aa7; path=/ 
```

现在我想获取ASP.Net Session ID，坦白说我不知道​​php命令。我尝试了 ASPSESSIONID、ASPSESSID、SessionID 等，但均未成功。每次结果都是空白的，如下所示，而我可以使用 firebug 看到 ASP.Net_SessionId。请有人帮我获取 ASP.net 会话 ID。我试图通过论坛搜索，但没有得到任何东西。

```
$cookie="ASP.NET_SessionId=". $_COOKIE["ASPSESSIONID"] ;
session_write_close();
echo $cookie;
result: ASP.NET_SessionId= 
```

也试过这段代码，但没有得到任何东西：

```
if(stripos($data,"ASP.NET_SessionId"))
{
$retData = explode("ASP.NET_SessionId=", $data);
$sessionTempValue = explode(";",$retData[1]);

 //setup the cookie with the recd data here..

echo $sendCookie1 = "ASP.NET_SessionId=".$sessionTempValue[0].'; path=/';
setcookie("ASP.NET_SessionId",$sessionTempValue[0]);
} 
```

**编辑：** 感谢**TVK、Icarus 和 Mike Brant**引导我走向正确的方向。我稍微修改了我的脚本，如下所示，现在 ASP.Net SessionId 保存在文件 cookiedk.txt 中，但它仍然没有出现在 $_COOKIE 中。

```
define('COOKIE_FILE', 'cookiedk.txt');
curl_setopt($ch, CURLOPT_COOKIESESSION, 1); 
curl_setopt($ch, CURLOPT_COOKIEJAR, COOKIE_FILE); 
```

以下是 cookiedk.txt 内容：

```
# Netscape HTTP Cookie File
# http://curl.haxx.se/rfc/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

#HttpOnly_xyz.com   FALSE   /   FALSE   0   ASP.NET_SessionId   jq0jeb45lldjlo45wreqsl45 
```

另一个帮助是，将会话 ID 保存在文件中可能会出现问题，因为多个用户将同时与系统进行交互。有没有办法通过脚本获取它并将其设置在那里而不是保存在文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:40:29.613

如果 ASP 会话 ID 实际上可用，那么它应该在`$_COOKIE`变量中。要查看所有内容`$_COOKIE`，可以使用`print_r($_COOKIE);`. 如果会话 ID 在那里，您现在可以看到它并选择正确的数组键。

但请记住，只有在满足 cookie 的域限制时才会发送 cookie。

# jsp - 显示：表：如何将属性添加到行

> ID：14264905
> 
> 赞同：1
> 
> 时间：2013-01-10T18:35:32.043
> 
> 标签：jsp, taglib, displaytag

我想将工具提示（属性标题）添加到表中的一行。该表是在带有 taglib display:table 的 jsp 中构建的，看起来像这样（简化）。

```
<display:table class="list" id="row" name="listResultat" decorator="dyndecorator">
    <display:column property="dateEnvoieDt" title="Date envoi" ></display:column>
<display:table> 
```

生成的代码是：

```
<table id="row" style="width:100%;" class="list" cellspacing="0">
    <thead>
        <tr>
            <th class="orderSortable sortable sorted order1">Date envoi</th>
        </tr>
    </thead>
    <tbody>
        <tr class="odd">
            <td>18</td>
        </tr>
        <tr class="even">
            <td>19</td>
        </tr>
    </tbody>
</table> 
```

我想添加这样的标题：

```
<tr class="odd" title="18">
...
<tr class="even" title="19"> 
```

我尝试了一个装饰器，但我没有找到办法。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:18:20.783

我在每个显示中添加了一个跨度：列，但它不干净。

```
<display:column property="dateEnvoieDt" title="Date envoi" >
    <span title='<bean:write name="codeAno"/>'>
        <bean:write name="row" property="dateEnvoieDt" format="dd/MM/yyyy" />
    </span>
</display:column> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T16:13:02.457

我设法通过将标题属性`tr`“注入”到`TableDecorator`'s`addRowClass()`方法中来将标题属性添加到行（元素）：

```
public class MyTableDecorator extends TableDecorator {
  @Override
  public String addRowClass() {
    return "these are css classes\" title=\"this is the title";
  }
} 
```

（考虑到 displaytag 会为你添加双引号。）

# search - 为什么我的网站元描述标签在 Google 搜索中没有更新？

> ID：14264910
> 
> 赞同：0
> 
> 时间：2013-01-10T18:35:52.630
> 
> 标签：search, seo, search-engine

我开发了这个网站

thereelthing.com.sg/

在我更新了我网站中的元标记的 3 周之后，这个元标记在谷歌搜索中的出现并不相同！！( [http://thereelthing.com.sg/](http://thereelthing.com.sg/) )

搜索结果：客户 | The reel Thing [http://thereelthing.com.sg/clients/The](http://thereelthing.com.sg/clients/The) Reel Thing，视频公司，thereelthing.com.sg，mandanemedia.com。

搜索链接（第 3 页）！ [https://www.google.com/](https://www.google.com/) 搜索：卷轴的东西 sg

你知道有什么办法可以更快地更新谷歌搜索结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:45:20.783

您的网站的页面排名为 0，谷歌不会经常索引。你有没有为它设置谷歌网站管理员工具，你有xml站点地图吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:49:28.660

您的标题标签没有对每个页面进行太多解释，并且您的元描述都是相同的，并且充满了不相关的内容（重复的域名？）。

如果 Google 在大多数情况下决定忽略它们并编写自己的文本，我不会感到惊讶。他们这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T07:12:55.540

当您更新元标记时，您需要重新索引您的网页。尝试使用搜索引擎机器人再次缓存社交书签和博客。

使用新的元关键字创建反向链接以获得快速准确的结果。每当您的网页被重新索引时，新的元标记都会受到影响。

# xcode4 - 如何在 iPad 上将本地 html 文件加载到 webView 中

> ID：14264912
> 
> 赞同：0
> 
> 时间：2013-01-10T18:35:57.523
> 
> 标签：xcode4, ipad

我有一个 iPad Master Detail 项目，我正在尝试在称为 detailWebView 的 Web 视图中显示 html 内容。

我已经在主视图控制器中设置了 detailItem 的内容。

```
self.detailViewController.detailItem=[[_topicsData
                                       objectAtIndex:indexPath.section]
                                      objectAtIndex: indexPath.row]; 
```

我已经尝试了很多方法来让提取的信息显示在 Web 视图中，但它不会。

在 configureView 我有：

```
NSString *myString=[_detailItem objectForKey:@"url"];
NSString *myNewString=[NSString stringWithFormat:@"%@%@",myString,@".html"];
NSURL *url = [NSURL URLWithString:myNewString];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[self.detailWebView loadRequest:request]; 
```

但我尝试的任何方法都不会加载内容。

我知道我有正确的 url 详细信息，因为当我尝试

```
NSLog(@"detailItem is %@",url); 
```

我得到类似 myurl.html 的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:08:28.670

您需要在以下代码中添加代码`viewDidLoad`：

```
- (void) viewDidLoad {
    [super viewDidLoad];

    self. detailWebView.delegate = self;

    NSString *myString=[_detailItem objectForKey:@"url"];
    NSString *myNewString=[NSString stringWithFormat:@"%@%@",myString,@".html"];
    NSURL *url = [NSURL URLWithString:myNewString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self. detailWebView loadRequest:request];
} 
```

# c# - 显示验证消息

> ID：14264913
> 
> 赞同：0
> 
> 时间：2013-01-10T18:36:00.250
> 
> 标签：c#, javascript, html, asp.net-mvc, jquery

我正在努力在我的网页上显示验证消息。我有一个 javascript 函数，它执行客户端验证并突出显示具有无效值的字段。除了突出显示字段之外，我还想在我的网页上显示一条我不知道该怎么做的消息。

这是我的javascript函数：

```
$(function () {

    $("#Save").click(Validate);

});

function Validate() {

var invalidValues = [];
var validValues = [];
var Code = $("#Code").val();
var Description = $("#Description").val();
var Status = $("#Status ").val();    

var requiredFields = { '#Code' : Code,
                         '#Description' : Description,
                         '#Status ' : Status };

    $.each(requiredFields, function (key, value) {
        if (value.length == 0) {
            invalidValues.push(key);
        }
        else { validValues.push(key); }
    });

        var invalidFields = invalidValues.toString();
        var validFields = validValues.toString();

    if (invalidValues.length > 0){
        $(invalidFields).addClass("highlighted");
        $(validFields).removeClass("highlighted");      
        return false;
    }
    $(validFields).removeClass("highlighted");
} 
```

这是我的网页：

```
<div>
    <table>
    <tr>
        <th>
            Code
        </th>
        <td>
           <input maxlength="4" id="Code" type="text"/>
        </td>
    </tr>
        <tr>
        <th>
            Description
        </th>
        <td>
            <input id="Description" type="text"/>
        </td>
    </tr>
        <tr>
        <th>
            Status
        </th>
        <td>
            <input id="Status" type="text"/>
        </td>
    </tr>    
    <tr>  
        <th>
    </th>      
        <td>
            <button id="Save" type="button">Save</button>
        </td>        
    </tr>
    </table>
</div> 
```

我想在我的网页底部显示一条消息，说“请输入有效值：代码”。我将无效值存储在我的 js 函数“Validate”中的变量“invalidValues”中如何在我的网页中访问这些值？

我还有一些关于什么是进行验证的最佳方式的问题？客户端与服务器端？另外，显示弹出验证消息还是嵌入在网页上的突出显示消息更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:16:13.023

如果您已经在使用 jQuery，您可能能够获得使用 jQuery Validation 插件的批准，因为现在无论您何时开始一个新项目，它都是 Microsoft MVC 应用程序的标准配置。话虽如此，我确实认识到插件获得批准是多么困难，因为我支持不同的政府客户。看起来您可以为每个输入元素添加一个标签，然后修改该跨度的类以显示和隐藏它，类似于您在突出显示输入框时已经执行的操作。

我无法在我的工作机器上对此进行测试，但我认为它类似于：

```
$(function () {

    $("#Save").click(Validate);

});

function Validate() {

var invalidValues = [];
var validValues = [];
var Code = $("#Code").val();
var Description = $("#Description").val();
var Status = $("#Status ").val();    

var requiredFields = { '#Code' : Code,
                         '#Description' : Description,
                         '#Status ' : Status };

    $.each(requiredFields, function (key, value) {
        if (value.length == 0) {
            invalidValues.push(key);
        }
        else { validValues.push(key); }
    });

        var invalidFields = invalidValues.toString();
        var validFields = validValues.toString();

    if (invalidValues.length > 0){
        $(invalidFields).addClass("highlighted");
        $(validFields).removeClass("highlighted");  

        $(invalidFields + "Validator").addClass("showValidation");
        $(invalidFields + "Validator").removeClass("hideValidation");
        return false;
    }
    $(validFields).removeClass("highlighted");
    $(validFields + "Validator").removeClass("showValidation");
    $(invalidFields + "Validator").addClass("hideValidation");
} 
```

使用 HTML

```
<div>
    <table>
    <tr>
        <th>
            Code
        </th>
        <td>
           <input maxlength="4" id="Code" type="text"/><span id="CodeValidator" class="hideValidation" />
        </td>
    </tr>
        <tr>
        <th>
            Description
        </th>
        <td>
            <input id="Description" type="text"/><span id="DescriptionValidator" class="hideValidation" />
        </td>
    </tr>
        <tr>
        <th>
            Status
        </th>
        <td>
            <input id="Status" type="text"/><span id="StatusValidator" class="hideValidation" />
        </td>
    </tr>    
    <tr>  
        <th>
    </th>      
        <td>
            <button id="Save" type="button">Save</button>
        </td>        
    </tr>
    </table>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:55:20.820

只需在 HTML 中为您的错误消息添加占位符。例如：

```
 <td>
        <input id="Description" type="text"/><span id="descriptionErrorPlaceholder" />
    </td> 
```

然后在您的 javascript 中，使用 jQuery 或常规 javascript 添加您的警告消息。

```
$("#descriptionErrorPlaceholder").text("Warning message"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:40:08.707

我对 MVC 不够熟悉，无法回答如何使用内置验证（就像普通的 ASP.Net 一样），假设 MVC 有它开始。

那个小小的免责声明，下面的代码应该验证您的表单是否有必填字段，并在页面上为您的用户抛出一条消息：

```
$(function () {
    var Validate = function Validate(e) {
        var allFieldsValid = false, // boolean flag to cache result
            invalidFields = [],     // array for selectors
            validFields = [],       // array for selectors
            requiredFields = [      // array of selectors to validate against
                "#Code",
                "#Description",
                "#Status"
            ],
            message = $('<span />').addClass('validation-message').text('* This is a required field.');
        $(requiredFields.join(', ')).each(function (i, elem) {
            //requiredFields.join(', ') should return "#Code, #Description, #Status"
            var field = $(elem)
                value = field.val();
            if (value.length === 0) {
                invalidFields.push(field.selector);
            } else {
                validFields.push(field.selector);
            }
        });
        allFieldsValid = invalidFields.length === 0;            // if there are no invalid fields, all fields must be valid
        $('span.validation-message').remove();                  // remove any previous validation messages
        $(validFields.join(', ')).removeClass("highlighted");   // remove class from all valid fields
        // add class to all invalid fields and append message
        $(invalidFields.join(', ')).addClass("highlighted").append(message.clone());
        if (!allFieldsValid) {
            e.preventDefault(); // invalid fields, prevent event from bubbling
        }
        return allFieldsValid;  // return result
    };
    $("#Save").click(Validate);
}); 
```

至于您关于验证的其他问题：

1.  进行验证的最佳方法是什么？客户端与服务器端？
2.  另外，显示弹出验证消息还是嵌入在网页上的突出显示消息更好？

为了：

1.  **没有对**。要么有服务器端，要么有客户端和服务器端。这是因为您不能依靠您的用户启用 JavaScript，因此您不能依靠您的客户端来运行。把客户端想象成一个前置过滤器。客户端的目的是进行“预检查”并防止不需要的数据占用带宽（发送到服务器和“坏数据”响应）以及使用服务器上的处理周期。客户端也将比服务器端响应更快（因为没有请求响应），但这实际上只是高延迟连接的感知性能问题。**服务器端将始终运行，因此验证应始终在服务器上启动。**

2.  这是您的用户的偏好问题。就个人而言，除非有人很好地要求我这样做，否则我不会编写弹出窗口代码，主要是因为它会将注意力从表单上移开，并且需要额外的工作（通常是单击）才能关闭。突出显示的消息不必执行其中任何一项，一些验证例程甚至可以很好地将焦点放在第一个无效字段上。如果页面上有空间，则每个字段旁边的消息都很方便，并且看起来非常漂亮。但是，如果页面上的空间非常宝贵，则大多数验证例程都会在字段旁边放置一个星号，并将所有单独的验证消息放在页面上的一个位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T18:59:38.047

在您的表格之后，您可以保留一个没有任何内容的 div。但有身份证。

在您验证之后，只需通过 document.get('div_id') 访问该 div，然后为其赋值。

使用它，您甚至可以使用红色等颜色显示验证。像这样显示比弹出窗口更好，因为当软件出现时，点击次数应该是最少的。

# python - Python正则表达式问题

> ID：14264916
> 
> 赞同：0
> 
> 时间：2013-01-10T18:36:10.327
> 
> 标签：python, regex

所以我试图允许使用！作为某事的前缀。这里我有一些正则表达式，但我几乎不知道该怎么做：

```
if inp.chan == inp.nick:  # private message, no command prefix
    prefix = r'^(?:[!!]?|'
else:
    prefix = r'^(?:[!]|'

command_re = prefix + inp.conn.nick
command_re += r'[:,]+\s+)(\w+)(?:$|\s+)(.*)' 
```

我可以通过更改 [!] 来更改命令的前缀，但我想这样做，所以我可以使前缀加倍 !!'ed，例如 !!test 将起作用。谢谢。

**编辑：**

```
import re
import random
from util import hook, http

re_lineends = re.compile(r'[\r\n]*')
command_prefix = re.compile(r'^\!+')

@hook.command(command_prefix)
def exl(inp,nick=""):
    ""
res = http.get("http://eval.appspot.com/eval", statement=inp).splitlines()

if len(res) == 0:
    return
res[0] = re_lineends.split(res[0])[0]
if not res[0] == 'Traceback (most recent call last):':
    return res[0]
else:
    return res[-1] 
```

**@hook.command：**

```
def _hook_add(func, add, name=''):
    if not hasattr(func, '_hook'):
        func._hook = []
    func._hook.append(add)

    if not hasattr(func, '_filename'):
        func._filename = func.func_code.co_filename

    if not hasattr(func, '_args'):
        argspec = inspect.getargspec(func)
        if name:
            n_args = len(argspec.args)
            if argspec.defaults:
                n_args -= len(argspec.defaults)
            if argspec.keywords:
                n_args -= 1
            if argspec.varargs:
                n_args -= 1
            if n_args != 1:
                err = '%ss must take 1 non-keyword argument (%s)' % (name,
                            func.__name__)
                raise ValueError(err)

        args = []
        if argspec.defaults:
            end = bool(argspec.keywords) + bool(argspec.varargs)
            args.extend(argspec.args[-len(argspec.defaults):
                        end if end else None])
        if argspec.keywords:
            args.append(0)  # means kwargs present
        func._args = args

    if not hasattr(func, '_thread'):  # does function run in its own thread?
        func._thread = False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:41:39.753

你的意思是这样的`r'^\!+'`吗？这将匹配字符串开头的任意数量的感叹号。

```
>>> import re
>>> regex = re.compile(r'^\!+')
>>> regex.match("!foo")
<_sre.SRE_Match object at 0xcb6b0>
>>> regex.match("!!foo")
<_sre.SRE_Match object at 0xcb6e8>
>>> regex.match("!!!foo")
<_sre.SRE_Match object at 0xcb6b0> 
```

如果您想将自己限制为 1 或 2 `!`，那么您可以使用`r'^\!{1,2}'`：

```
>>> regex = re.compile(r'^\!{1,2}')
>>> regex.match('!!!foo').group(0)  #only matches 2 of the exclamation points.
'!!'
>>> regex.match('!foo').group(0)
'!'
>>> regex.match('!!foo').group(0)
'!!' 
```

# jquery - jQuery 将 mediaelement.js 附加到动态创建的音频标签

> ID：14264918
> 
> 赞同：0
> 
> 时间：2013-01-10T18:36:30.607
> 
> 标签：jquery, dynamic, bind, mediaelement.js

我使用 mediaelement.js 插件作为 HTML5 音频标签的媒体播放器。

我将播放器附加到标签上，`$('audio, video').mediaelementplayer();`但我想知道如何为动态创建的音频标签执行此操作。是否有像现场或现场这样的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:42:57.160

当您动态创建音频元素时，您可以同时创建媒体元素吗？

```
var audio = my new audio element

var player = new MediaElementPlayer('#id of new audio element',/* Options */);
// ... more code ...
player.pause();
player.setSrc('mynewfile.mp3');
player.play(); 
```

等等

# excel - 搜索具有条件格式的单元格

> ID：14264919
> 
> 赞同：0
> 
> 时间：2013-01-10T18:36:30.763
> 
> 标签：excel, search, conditional, vba

我有一系列具有条件格式的单元格，如果单元格超过某个阈值，它将用红色填充（我相信它是 .color = 255）。

我正在尝试创建一个宏，该宏将通过搜索 .color = 255 的单元格来搜索该范围内超过阈值的单元格。由于某种原因，该宏无法正常工作。由于条件格式，无法看到单元格是红色的。不过，它可以检测到我只需手动将填充更改为红色的单元格。

```
Sub macro22()
   For Each m In Range("D7:L33")
      If m.Interior.Color = 255 Then
          ex = "exceedance"
      End If
Next

  Range("p22").Value = ex

End Sub 
```

我知道它是 .color = 255 因为如果我记录一个宏来更改单元格的填充颜色以匹配我想要的条件格式的颜色，那就是它得出的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:55:36.027

如果您只有一个 CF 规则，您应该检查`m.FormatConditions(0).Interior.Color`值而不是`m.Interior.Color`- 如上面更详细的响应） `0`表示 CF 规则的数量，但从 0 开始（至少应该这样引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:42:38.287

如果通过条件格式应用颜色函数，它不会返回颜色。请参阅[此处](http://www.cpearson.com/excel/cfcolors.htm)了解替代方法

# javascript - 带有来自 textarea 的参数值的 onclick 按钮

> ID：14264920
> 
> 赞同：0
> 
> 时间：2013-01-10T18:36:30.907
> 
> 标签：javascript

我有一个非常简单的场景，我想要一个文本框，您可以在其中输入一个数字，以及它旁边的一个按钮，按下该按钮将调用 javascript 方法并将文本框中的整数值作为参数发送给它。

我刚刚学习 MVC 并且已经被 WebForms 宠坏了，所以请原谅我这个愚蠢的问题，但是为什么这不起作用呢？

```
 Enter Value 1-4<textarea id="param"></textarea>
    <br />
   <button id="btnTest" onclick="WCFJSONp(" + param.value + ")">Test Service</button> 
```

我尝试在 'param.value' 前面添加一个 @ 符号，希望 Razor 可能会看到我正在尝试做的事情，但这也不起作用？任何人都可以为被 WebForms 破坏的 MVC 新手推荐任何指向 Javascript/HTML 中“速成课程”的链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:39:52.920

正如您所说的问题，这与 MVC 几乎没有关系——这只是 javascript。通常你会在运行 MVC 平台时将 jQuery 与 javascript 一起使用，在这种情况下，这样的事情会起作用。

```
onclick="WCFJSONp($('#param').val());" 
```

* * *

对比`onclick="WCFJSONp(document.getElementById('param').value)"`

使用 getElementById 时，您没有使用 jQuery 库，而只是使用基础 JavaScript。

使用其中一个有优点也有缺点。

*   使用基础 JavaScript 更快，您不必加载 jQuery 库。
*   jQuery 可以使您的脚本更便携（在这种情况下可能不是问题），因为它定义了与 DOM 的精确接口并处理任何特定于浏览器的问题（这对我来说是个大问题。）
*   jQuery 更易于使用和理解。（有些人可能会争论它们是否用于基础 javascript）
*   jQuery 有很多高级使用的例子（这里也不是问题）。

可能还有更多，但这些是我想到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:39:44.580

这应该是：

```
onclick="WCFJSONp(document.getElementById('param').value)" 
```

# asp.net - SimpleMembership Sql 脚本

> ID：14264923
> 
> 赞同：1
> 
> 时间：2013-01-10T18:36:48.693
> 
> 标签：asp.net, asp.net-mvc-4, simplemembership

我知道 SimpleMembership 将自动创建身份验证所需的表，但我更愿意在运行应用程序时以外的某个时间运行 sql 脚本。是否有 SimpleMembership 脚本的下载页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T11:58:59.283

我[在github上找到了一个脚本](https://gist.github.com/kenstone/3419405)

```
CREATE TABLE [dbo].[UserProfile] (
    [UserId]   INT            IDENTITY (1, 1) NOT NULL,
    [UserName] NVARCHAR (MAX) NULL,
    PRIMARY KEY CLUSTERED ([UserId] ASC)
);

CREATE TABLE [dbo].[webpages_Membership] (
    [UserId]                                  INT            NOT NULL,
    [CreateDate]                              DATETIME       NULL,
    [ConfirmationToken]                       NVARCHAR (128) NULL,
    [IsConfirmed]                             BIT            DEFAULT ((0)) NULL,
    [LastPasswordFailureDate]                 DATETIME       NULL,
    [PasswordFailuresSinceLastSuccess]        INT            DEFAULT ((0)) NOT NULL,
    [Password]                                NVARCHAR (128) NOT NULL,
    [PasswordChangedDate]                     DATETIME       NULL,
    [PasswordSalt]                            NVARCHAR (128) NOT NULL,
    [PasswordVerificationToken]               NVARCHAR (128) NULL,
    [PasswordVerificationTokenExpirationDate] DATETIME       NULL,
    PRIMARY KEY CLUSTERED ([UserId] ASC)
);

CREATE TABLE [dbo].[webpages_OAuthMembership] (
    [Provider]       NVARCHAR (30)  NOT NULL,
    [ProviderUserId] NVARCHAR (100) NOT NULL,
    [UserId]         INT            NOT NULL,
    PRIMARY KEY CLUSTERED ([Provider] ASC, [ProviderUserId] ASC)
);

CREATE TABLE [dbo].[webpages_Roles] (
    [RoleId]   INT            IDENTITY (1, 1) NOT NULL,
    [RoleName] NVARCHAR (256) NOT NULL,
    PRIMARY KEY CLUSTERED ([RoleId] ASC),
    UNIQUE NONCLUSTERED ([RoleName] ASC)
);

CREATE TABLE [dbo].[webpages_UsersInRoles] (
    [UserId] INT NOT NULL,
    [RoleId] INT NOT NULL,
    PRIMARY KEY CLUSTERED ([UserId] ASC, [RoleId] ASC),
    CONSTRAINT [fk_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[UserProfile] ([UserId]),
    CONSTRAINT [fk_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[webpages_Roles] ([RoleId])
); 
```

# matlab - 八度：索引超出矩阵维度

> ID：14264925
> 
> 赞同：1
> 
> 时间：2013-01-10T18:37:04.303
> 
> 标签：matlab, octave

我在名为 conditionals.m 的文件中编写了以下函数：

```
function result = conditionals(category, feature)

result=5;

end 
```

我从 Octave 的命令行调用这个函数：

```
v=conditionals(3,4) 
```

我收到以下错误：

```
error : A(I) : Index exceeds matrix dimension. 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:39:24.343

错误：

> 错误：A(I)：索引超出矩阵维度。

表示 octave 认为这`conditionals`是一个矩阵，而不是一个函数。

Octave 可能不知道这`conditionals`是一个函数，而是将其视为一个矩阵。

您是否检查过该功能是否在 Octave 的搜索路径中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:47:08.453

这对我有用。

```
octave> function result = conditionals (category, feature)
>   result = 5;
> endfunction
octave> v = conditionals (3, 4)
v =  5 
```

该错误表明您有一个与函数同名的变量。在 Octave 提示符下键入`whos`以查看已定义变量的列表。如果您看到一个名为`conditionals`，请将其删除`clear conditionals`

此外，如果条件是一个`conditionals.m`文件，请确保它位于函数搜索路径上。在 Octave 提示符下运行`path`以查看函数搜索路径。在命令提示符下运行`which conditionals`以查看函数所在的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T09:17:23.480

它也发生在我身上，它可以发生在任何命令上，无论命令名称如何。当我`PS1(">>");`在 Ovtave 中运行更改命令提示符时，我得到了同样的错误。

> 八度-3.2.3.exe:9> PS1(">>");
> 
> 错误：A(I)：索引超出矩阵维度。

正如其他人也提到的，当有一个具有相同命令名称的参数时会触发此错误。当我们以错误的语法错误地输入命令时，就会发生这种情况，因此，octave 运行命令并使用您的命令名称生成一个变量，从而使内部命令过载。

`who`您可以通过命令验证此状态。如果您可以在此处看到与您的命令相同的变量名称，则必须将其删除。用于`clear variable_name`删除变量。

这是我对 PS1 命令的输出。

![在此处输入图像描述](../Images/5f8711ace83317f28f583ecb6bef5417.png)

希望能帮助到你。

# directx-9 - 在 DirectX9 中未显示 Skybox 纹理

> ID：14264926
> 
> 赞同：0
> 
> 时间：2013-01-10T18:37:10.533
> 
> 标签：directx-9, skybox

我正在尝试使用固定功能管道（没有着色器或效果文件）在 DirectX9 中渲染天空盒。我可以查看立方体渲染。当我设置纹理时，所有的脸都被涂上了一种奇怪的颜色（不是白色或空白）。纹理文件是正确的立方体贴图。我认为某些纹理设置未设置。下面是代码片段

`// for creating the cube and the cube texture`

`HRESULT apiResult = D3DXCreateBox(g_pd3dDevice,1,1,1,&g_pMesh,NULL);`

`apiResult = D3DXCreateCubeTextureFromFile(g_pd3dDevice,L"cubeMap.dds",&g_pTexture);`

两个 API 都返回 S_OK。

`// for renderin the skybox`

`g_pd3dDevice->SetSamplerState(0,D3DSAMP_MIPFILTER,D3DTEXF_LINEAR);` `g_pd3dDevice->SetSamplerState(0,D3DSAMP_MAGFILTER,D3DTEXF_LINEAR);` `g_pd3dDevice->SetSamplerState(0,D3DSAMP_MINFILTER,D3DTEXF_LINEAR);`

`// set texture`

`g_pd3dDevice->SetTexture(0,g_pTexture);`

`// Begin the scene` `if( SUCCEEDED( g_pd3dDevice->BeginScene() ) )`

`{`

`g_pMesh->DrawSubset(0);`

`g_pd3dDevice->EndScene();`

`}`

`// Present the backbuffer contents to the display`

`g_pd3dDevice->Present( NULL, NULL, NULL, NULL );`

缺少哪个设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:31:03.373

我不是专家，但尝试降低您正在加载的图像的分辨率，我曾经遇到过类似的问题，发现图像因此无法加载，分辨率太大。

# linq - Linq - 子查询计数

> ID：14264932
> 
> 赞同：0
> 
> 时间：2013-01-10T18:37:35.643
> 
> 标签：linq

**问题：**我试图在 Linq 中重写它：

listOfUsersForReviewer 是一个`IEnumerable<User>`

```
int countOfGreenUsers = 0;
foreach (var user in listOfUsersForReviewer)
{
    var u = (from reviewitems in context.ReviewItems
                join groupaccountlinks in context.GroupAccountLinks on reviewitems.GroupAccountID equals groupaccountlinks.GroupAccountID
                join reviews in context.Reviews on reviewitems.ReviewID equals reviews.ReviewID
                join applications in context.Applications on reviews.ApplicationID equals applications.ApplicationID
                join reviewers in context.Reviewers on applications.ResponsibleReviewerID equals reviewers.ReviewerID
                join accounts in context.Accounts on groupaccountlinks.AccountID equals accounts.AccountID
                join users in context.RBSUsers on accounts.UserID equals users.UserID
                where
                    users.UserID == user.UserID &&
                    reviewers.FullyQualifiedLogin == fullyQualifiedLogin &&
                    reviews.ReviewStatusID == (byte)Enums.ReviewStatus.InProgress &&
                    reviewitems.ReviewItemStatusID == (byte)Enums.ReviewItemStatus.Unapproved
                select reviewitems);

    byte colour = (byte)Enums.UserStatusColour.Red;
    if (u.Count() == 0)
    {
        colour = (byte)Enums.UserStatusColour.Green;
        countOfGreenUsers++;
    }
} 
```

试图创建一个匿名类型，但是这不会编译。

```
// select number of green users
var x = from user in listOfUsersForReviewer
        from reviewitems in context.ReviewItems
        join groupaccountlinks in context.GroupAccountLinks on reviewitems.GroupAccountID equals
            groupaccountlinks.GroupAccountID
        join reviews in context.Reviews on reviewitems.ReviewID equals reviews.ReviewID
        join applications in context.Applications on reviews.ApplicationID equals applications.ApplicationID
        join reviewers in context.Reviewers on applications.ResponsibleReviewerID equals
            reviewers.ReviewerID
        join accounts in context.Accounts on groupaccountlinks.AccountID equals accounts.AccountID
        join users in context.RBSUsers on accounts.UserID equals users.UserID
        where
            users.UserID == user.UserID &&
            reviewers.FullyQualifiedLogin == fullyQualifiedLogin &&
            reviews.ReviewStatusID == (byte)Enums.ReviewStatus.InProgress &&
            reviewitems.ReviewItemStatusID == (byte)Enums.ReviewItemStatus.Unapproved
        select new
            {
                UserID = user.UserID,
                CountOfGreen = reviewitems.Count()
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:41:55.913

添加分组子句

```
var x = from user in listOfUsersForReviewer
        from reviewitems in context.ReviewItems
        join groupaccountlinks in context.GroupAccountLinks on reviewitems.GroupAccountID equals
            groupaccountlinks.GroupAccountID
        join reviews in context.Reviews on reviewitems.ReviewID equals reviews.ReviewID
        join applications in context.Applications on reviews.ApplicationID equals applications.ApplicationID
        join reviewers in context.Reviewers on applications.ResponsibleReviewerID equals
            reviewers.ReviewerID
        join accounts in context.Accounts on groupaccountlinks.AccountID equals accounts.AccountID
        join users in context.RBSUsers on accounts.UserID equals users.UserID
        where
            users.UserID == user.UserID &&
            reviewers.FullyQualifiedLogin == fullyQualifiedLogin &&
            reviews.ReviewStatusID == (byte)Enums.ReviewStatus.InProgress &&
            reviewitems.ReviewItemStatusID == (byte)Enums.ReviewItemStatus.Unapproved
        group user by user.UserID into grouping
        select new
            {
                UserID = grouping.Key,
                CountOfGreen = grouping.Count()
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:56:21.323

我最终重新思考了我的逻辑并将这个查询分成两个更简单的查询。

我使用的工具是：SQL Server Management Studio（图形表示）、[Linqer](http://www.sqltolinq.com/)和可能[的 Linqpad](http://www.linqpad.net/)

用英语编写查询很有帮助。

# java - Java 编译错误：无法找到或加载主文件

> ID：14264934
> 
> 赞同：0
> 
> 时间：2013-01-10T18:37:44.523
> 
> 标签：java, compilation

我刚刚使用命令行从命令行编译了一个类`> javac -classpath src/foo src/foo/bar.java`，它运行良好。但是，当我尝试运行时`> java -classpath bin/foo bin/foo/bar`，我得到了错误`Error: Could not find or load main class bin/foo/bar`。知道是什么导致了这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:38:58.390

您需要提供*类名*，而不是文件名。所以你要：

```
java -classpath bin foo.bar 
```

（或类似的东西。从您的示例中不清楚您最终将如何在`bin`目录中使用类文件而不是`src`，因为您没有将`-d`其用作`javac`命令行的一部分......）

# java - 在java中的单个引用中从不同类调用不同的方法

> ID：14264942
> 
> 赞同：0
> 
> 时间：2013-01-10T18:38:17.600
> 
> 标签：java, design-patterns, object, interface, reference

在 Java 中遇到问题，我们可以调用类方法，例如

```
interface samp{
   public void printMsg();
}
ClassA implements samp{
    public void printMsg()
    {
          S.o.p("Hi ClassA");
    }
}
ClassB implements samp{
    public void printMsg()
    {
          S.o.p("Hi ClassB");
    }
}
public MainClass{
    public static void main(String args())
    {

         samp s= new ClassA();
         s.printMsg();
         samp s= new ClassB();
         s.printMsg();
    }
} 
```

我们可以做到这一点，所有类都有不同类型的类方法，但我想实现未来有可能吗？是任何其他模式，请帮我找到这个。喜欢

```
ClassA{
    public void fun1(){..}
    public void fun2(){..}
}
ClassB{
    public void fun3(){..}
    public void fun4(){..}
} 
```

想使用单个引用调用这些方法，需要动态地将对象分配给该引用是否可能是朋友？...提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:43:34.557

您不能使用通用接口来做到这一点。您只能使用接口引用类型调用接口中定义的方法，即使它指向的属于另一个类的对象具有不同的其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:50:27.960

您只能调用接口中定义的那些类函数，因为它的引用只能访问那些函数。前任：

```
interface samp{
   public void printMsg();
}
ClassA implements samp{
    public void printMsg()
    {
          S.o.p("Hi ClassA");
    }
    public void newmthd(){
      S.o.p("you can't call me from samp reference.");
     }
}
ClassB implements samp{
    public void printMsg()
    {
          S.o.p("Hi ClassB");
    }
}
public MainClass{
    public static void main(String args())
    {

         samp s= new ClassA();
         s.printMsg();
         s.newmthd() //error... s don't have any knowledge of this function.              
         samp s= new ClassB();
         s.printMsg();

    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:55:45.463

在超类中定义您希望引用具有的所有方法，但将实现留空。然后，创建您的子类并覆盖必要的方法。

例子：

```
Class MySuperClass {
  public void fun1() {}
  public void fun2() {}
  public void fun3() {}
  public void fun4() {}
}

Class ClassA extends MySuperClass {
  public void fun1() { //implementation details }
  public void fun2() { //implementation details }
}

Class ClassB extends MySuperClass {
  public void fun3() { //implementation details }
  public void fun4() { //implementation details }
}

public Class Tester {
  public static void main(String[] args) {
    MySuperClass class1 = new ClassA();
    MySuperClass class2 = new ClassB();

  }
} 
```

# delphi - 插入sqlite db时发生错误时Delphi XE3中的内存泄漏

> ID：14264947
> 
> 赞同：6
> 
> 时间：2013-01-10T18:38:35.847
> 
> 标签：delphi, sqlite

```
...
Query: TSQLQuery
...
    Query.SQL.Clear;
    Query.SQL.Add('INSERT INTO pumps'#13#10 +
                       'VALUES (NULL, :title, :power)');
    Query.ParamByName('title').AsString:= title;
    Query.ParamByName('power').AsFloat:= power;
    try
      Query.ExecSQL;
    except
      on E: Exception do
        begin
          ShowMessage(E.Message);
        end;
    end; 
```

查询通过 driver=Sqlite 链接到 SQLConnection。所有操作都有效，但是当我尝试将非唯一值插入具有唯一索引的列时，我得到关于值存在的异常。好的，我的代码捕获它并显示一条消息“列标题不是唯一的”，但在调试器向我显示该异常 TWICE 之前。当我关闭程序时，内存管理器会告诉内存泄漏，泄漏是：

*   21 - 28 字节：UnicodeString x 4
*   61 - 68 字节：TDBXSqliteCommand x2
*   69 - 76 字节：TDBXMorphicCommand x 2
*   221 - 236 字节：未知 x 2

有可能避免这种情况吗？

UPD：我使用 FastMM4 来获取详细的日志，下面是关于一次内存泄漏的部分：

```
A memory block has been leaked. The size is: 68

This block was allocated by thread 0xB18, and the stack trace (return addresses) at the time was:
4068A6 [System.pas][System][@GetMem$qqri][4203]
4082BB [System.pas][System][TObject.NewInstance$qqrv][14969]
4089D2 [System.pas][System][@ClassCreate$qqrpvzc][16231]
7D5A91 [Data.DbxSqlite.pas][Data.DbxSqlite][Dbxsqlite.TDBXSqliteCommand.$bctr$qqrp26Data.Dbxcommon.TDBXContextp35Data.Dbxsqlite.TDBXSqliteConnection][567]
6E3DFE [Data.DBXCommon][Generics.Collections.%TDictionary__2$20System.UnicodeStringp32Data.Dbxcommon.TDBXCreateCommand%.GetBucketIndex$qqrx20System.UnicodeStringi]
7D4C8E [Data.DbxSqlite.pas][Data.DbxSqlite][Dbxsqlite.TDBXSqliteDriver.CreateSqliteCommand$qqrp26Data.Dbxcommon.TDBXContextp29Data.Dbxcommon.TDBXConnectionp26Data.Dbxcommon.TDBXCommand][295]
6CE4DA [Data.DBXCommon.pas][Data.DBXCommon][Dbxcommon.TDBXDriver.CreateMorphCommand$qqrp26Data.Dbxcommon.TDBXContextp29Data.Dbxcommon.TDBXConnectionp26Data.Dbxcommon.TDBXCommand][7569]
6D5177 [Data.DBXCommon.pas][Data.DBXCommon][Dbxcommon.TDBXDelegateDriver.CreateMorphCommand$qqrp26Data.Dbxcommon.TDBXContextp29Data.Dbxcommon.TDBXConnectionp26Data.Dbxcommon.TDBXCommand][11061]
6D09F4 [Data.DBXCommon.pas][Data.DBXCommon][Dbxcommon.TDBXConnection.CreateMorphCommand$qqrp26Data.Dbxcommon.TDBXCommand][8480]
6D1C21 [Data.DBXCommon.pas][Data.DBXCommon][Dbxcommon.TDBXMorphicCommand.DerivedOpen$qqrv][9084]
6D1974 [Data.DBXCommon.pas][Data.DBXCommon][Dbxcommon.TDBXCommand.Open$qqrv][8962]

The block is currently used for an object of class: TDBXSqliteCommand 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:01:42.643

我使用 dbXpress **SQLite**和**MySQL**驱动程序 (XE3) 运行测试，您的代码只是使用 SQLite 泄漏（在调试模式下也会出现双重异常），但它**没有使用 MySQL**。

恕我直言，这是一个应该报告给 QC 的错误。

调试器中**第一次发生异常**时的堆栈跟踪

```
:769cc41f KERNELBASE.RaiseException + 0x58
Data.DBXCommon.TDBXContext.Error(???,'column title is not unique')
Data.DbxSqlite.CheckError(19,???,$2F12738)
Data.DbxSqlite.TDBXSqliteCommand.DerivedExecuteQuery
Data.DBXCommon.TDBXCommand.ExecuteQuery
Data.DBXCommon.TDBXMorphicCommand.ExecuteQuery
Data.SqlExpr.TCustomSQLDataSet.ExecuteStatement
Data.SqlExpr.TCustomSQLDataSet.ExecSQL(???)
Data.SqlExpr.TSQLQuery.ExecSQL(???)
Main_ViewU.TForm1.RunQuery($2E7B870,'Title',10)
Main_ViewU.TForm1.Button1Click($2E85AD0) 
```

调试器中**第二次发生异常**时的堆栈跟踪

```
:769cc41f KERNELBASE.RaiseException + 0x58    // <-- Exception interrupts Destroy
Data.DBXCommon.TDBXContext.Error(???,'column title is not unique')
Data.DbxSqlite.CheckError(19,???,$2F12738)
Data.DbxSqlite.TDBXSqliteCommand.DerivedClose
Data.DBXCommon.TDBXCommand.Close
Data.DBXCommon.TDBXMorphicCommand.DerivedClose
Data.DBXCommon.TDBXCommand.Close
Data.DBXCommon.TDBXCommand.Destroy            // <-- DESTROY
Data.DBXCommon.TDBXMorphicCommand.Destroy     // <-- DESTROY
System.TObject.Free
Data.SqlExpr.TCustomSQLDataSet.CloseStatement
Data.SqlExpr.TCustomSQLDataSet.InternalFreeCommand
Data.SqlExpr.TCustomSQLDataSet.FreeCommand
Data.SqlExpr.TCustomSQLDataSet.ExecSQL(???)
Data.SqlExpr.TSQLQuery.ExecSQL(???)
Main_ViewU.TForm1.RunQuery($2E7B870,'Title',10)
Main_ViewU.TForm1.Button1Click($2E85AD0) 
```

这会导致内存泄漏......

# c - 将指针传递给C中的指针

> ID：14264950
> 
> 赞同：0
> 
> 时间：2013-01-10T18:38:39.543
> 
> 标签：c, compiler-construction

编译：

```
#include <stdlib.h>

void f(int ** v)
{
}

int main()
{
    int v[2][3];
    f(v);
    return 0;
} 
```

失败：

```
g.cpp:13:8: error: cannot convert ‘int (*)[3]’ to ‘int**’ for argument ‘1’ to ‘void f(int**)’ 
```

但是通过了以下更改：

```
#include <stdlib.h>

void f(int ** v)
{
}

int main()
{
    int * v[2];
    f(v);
    return 0;
} 
```

在我看来，数组的更深维度必须在编译时解决，有人可以详细说明一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:23:49.970

C 和 C++ 自动将数组强制转换为指针。该错误是由于这种强制仅发生一次（即仅在第一级）。这意味着`int [10]`将被强制执行`int *`；但`int [10][10]`最多可以强制转换为`int *[10]`.

原因与内存布局有关。你看，`a[i]`转换为`*(a + sizeof(T) * i)`if `a`is 的类型`T *`（假设添加到指针直接添加而不缩放）；但如果`a`是 类型`T [N]`，则`a[i]`转换为`*(&a[0] + i)`。因此，可以通过获取第一个元素的地址`T [N]`将类型值强制转换为类型值`T *`——在这种情况下，内存布局是兼容的。

但是，二维数组`a`（`T [2] [4]`例如 类型）的存储方式与双指针（类型`T **`）的存储方式不同。在第一种情况下，你有四个元素，在内存`T [0][0]`中`T [0][3]`布局，然后是`T [1][0]`to`T [1][3]`等等，模对齐。在第二种情况下，您只有一堆指针（指向`T`）一个接一个地布置。在第一种情况下，`a[i][j]`将降低到`*(&a[0][0] + sizeof(T) * 4 * i + sizeof(T) * j)`，而在第二种情况下，它将降低到`*(*(a + sizeof(T) * i) + sizeof(T) * j)`. 内存布局不再兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:12:44.383

指向 int 的指针与指向数组的指针不同。

执行此操作时`v++`，必须通知编译器是否将地址递增`sizeof(int)`或递增`array_length*sizeof(int)`

# java - JDBC 批量更新有何帮助？

> ID：14264953
> 
> 赞同：11
> 
> 时间：2013-01-10T18:38:47.810
> 
> 标签：java, jdbc

每个人都说批量更新减少了 JDBC 调用的数量。有人可以解释一下“JDBC 调用”是什么意思，以及与在一个 JDBC 调用中承载全部负载相比，增加此类调用的数量是多么昂贵。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T18:55:55.360

通俗地说，当开发人员使用短语*JDBC 调用*时，他们谈论的是通过线路将信息发送到数据库。JDBC API 的批处理功能允许您在单个网络调用中提交多个离散操作，而不是对每个 SQL 语句的调用。从[JDBC 规范](http://download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-eval-spec/jdbc4.1-fr-spec.pdf)：

> 批量更新工具允许 Statement 对象将一组异构 SQL 语句作为单个单元或批次一起提交到基础数据源。

在 PreparedStatement 的情况下，只需要创建一个语句的额外好处是存在的。这允许您使用多组绑定参数执行相同的查询，而无需多次将语句本身添加到批处理中。最终结果是更少的网络流量及其相关的开销。

规范中的一个例子：

```
PreparedStatement stmt = con.prepareStatement(
"INSERT INTO employees VALUES (?, ?)");

stmt.setInt(1, 2000);
stmt.setString(2, "Kelly Kaufmann");
stmt.addBatch();

stmt.setInt(1, 3000);
stmt.setString(2, "Bill Barnes");
stmt.addBatch();

// submit the batch for execution
int[] updateCounts = stmt.executeBatch(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T18:58:11.327

如[IBM 文档](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/tjvbtupd.htm)中所述：

> 支持 JDBC 2.0 及以上版本的 JDBC 驱动支持批量更新。使用批量更新，您可以指示 JDBC 同时执行一组更新，而不是一次更新一个 DB2(R) 表的行。可以包含在同一批更新中的语句称为可批处理语句。
> 
> 如果语句具有输入参数或宿主表达式，则只能将该语句包含在具有相同语句的其他实例的批处理中。这种类型的批次称为均质批次。如果语句没有输入参数，则只有当批处理中的其他语句没有输入参数或主机表达式时，您才能将该语句包含在批处理中。这种类型的批次称为异质批次。可以包含在同一个批处理中的两个语句称为批处理兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:04:36.447

在调用 JDBC 更新时，java 程序连接到数据库服务器并执行查询。这意味着对于每次更新，java 程序都会联系数据库服务器并执行查询。现在，如果我们使用 JDBC 批量更新，java 应用程序只需联系数据库服务器一次，并在数据库服务器上执行所有查询并返回给 java 应用程序。

简而言之，它将减少 java 应用程序和数据库服务器之间的往返。通常两者都将在不同的服务器上，因此会减少很多网络资源。因此，它实现了更好的性能。

# java - 限制数组

> ID：14264956
> 
> 赞同：0
> 
> 时间：2013-01-10T18:38:58.910
> 
> 标签：java, arrays, file-io

这是我下面的代码，我得到一个 java.lang.IndexOutOfBoundsException 并且我无法修复它？我应该停止出现错误，因为文件中有 100 多个名称！

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ArrayPractice1 {
    public static void main(String[] args) throws FileNotFoundException
    {

        String[] names = new String[100];
        Scanner scan = new Scanner(new File("names.txt"));
        int index = 0;

        while (scan.hasNext()){
            names[index]=(scan.nextLine());
            index++;
        }     
        for(int i = 0; i <index -1; i++){
            System.out.println(names[i]);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:40:42.790

您不是在使用字符串的[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)，而是在使用普通的字符串数组。似乎您从中获得了 100 多个项目`scan.hasNext()`，因此您最终尝试访问`names[100]`并获取您描述的异常
，您可以使用以下命令：

```
ArrayList<String> names = new ArrayList<String>(); 
```

接着

```
while (scan.hasNext()){
   names.add(scan.nextLine());
} 
```

而且您不必担心事先知道确切的尺寸

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:40:54.777

如果在编译时不知道输入的大小，请考虑使用 an[**`ArrayList`**](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)而不是数组。

只需将元素添加到`ArrayList`using [`names.add(scan.nextLine())`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28E%29)：

```
ArrayList<String> names = new ArrayList<String>();
while (scan.hasNext()) {
      names.add(scan.nextLine())
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:40:23.867

你给 100 作为数组的大小。如果你的文件有超过 100 行，肯定会抛出异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:40:26.570

将 while 循环中的条件更改为

`while (scan.hasNext() && index < 100)`

填满数组后，这将停止读取循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T18:42:06.047

为什么不让它独立于任何上限？使用*ArrayList*：

```
 ArrayList<String> names = new ArrayList<String>();
    Scanner scan = new Scanner(new File("names.txt"));

    while (scan.hasNext()){
        names.add(scan.nextLine());
    }     
    for(String name : names){
        System.out.println(name);
    } 
```

# html - 为什么琴弦会从气泡窗中伸出？

> ID：14264958
> 
> 赞同：0
> 
> 时间：2013-01-10T18:39:08.140
> 
> 标签：html, css

如果字符串很长，则必须转到下一行。我怎样才能做到这一点？

[演示](http://jsfiddle.net/Yu6dD/)

**HTML**

```
<div class="chat">

<table>
  <tbody>
     <tr>
               <th>Body</th>
     </tr>

    <tr id="comment_617">
            <td><div class="bubble me"><span class="text-error">01-10 03:29</span>：Person A<br>
            bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
            <form action="/shop/walmart/posts/617" class="button_to" data-remote="true" method="post"><div><input name="_method" value="delete" type="hidden"><input data-confirm="Are you sure?" data-disable-with="deleting..." value="destroy" type="submit"><input name="authenticity_token" value="aoLKQnl4M2SWVlOrXGR+qIMLSeY5m1tKiC/PSnYQjmw=" type="hidden"></div></form>
            </div></td>
    </tr>

    <tr id="comment_615">
            <td><div class="bubble me"><span class="text-error">01-10 03:25</span>：Person A<br>
            bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
            <form action="/shop/walmart/posts/615" class="button_to" data-remote="true" method="post"><div><input name="_method" value="delete" type="hidden"><input data-confirm="Are you sure?" data-disable-with="deleting..." value="destroy" type="submit"><input name="authenticity_token" value="aoLKQnl4M2SWVlOrXGR+qIMLSeY5m1tKiC/PSnYQjmw=" type="hidden"></div></form>
            </div></td>
    </tr>
</tbody>

 <div> 
```

**CSS**

```
.chat {
    width: 400px;
}

.bubble{
    background-color: #F2F2F2;
    border-radius: 5px;
    box-shadow: 0 0 6px #B2B2B2;
    display: inline-block;
    padding: 10px 18px;
    position: relative;
    vertical-align: top;
}

.bubble::before {
    background-color: #F2F2F2;
    content: "\00a0";
    display: block;
    height: 16px;
    position: absolute;
    top: 11px;
    transform:             rotate( 29deg ) skew( -35deg );
        -moz-transform:    rotate( 29deg ) skew( -35deg );
        -ms-transform:     rotate( 29deg ) skew( -35deg );
        -o-transform:      rotate( 29deg ) skew( -35deg );
        -webkit-transform: rotate( 29deg ) skew( -35deg );
    width:  20px;
}

.me {
    float: left;   
    margin: 5px 45px 5px 5px;
    width: 200px;       
}

.me::before {
    box-shadow: -2px 2px 2px 0 rgba( 178, 178, 178, .4 );
    left: -9px;           
}

.you {
    float: left;    
    margin: 5px 10px 5px 5px;
    width: 200px;         
}

.you::before {
    box-shadow: 2px -2px 2px 0 rgba( 178, 178, 178, .4 );
    right: -9px;    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:41:13.823

将此添加到您的`.bubble`课程中：

```
 word-break: break-all; 
```

[https://developer.mozilla.org/en-US/docs/CSS/word-break](https://developer.mozilla.org/en-US/docs/CSS/word-break)

# jquery - fancybox rel="group" 不起作用

> ID：14264965
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:39:25.813
> 
> 标签：jquery, jquery-ui, fancybox, jquery-ui-accordion

**演示**：[页面网址](http://bilsalg-fyn.dk/biler/alle-biler)

我们已经集成了fancybox 和jquery 手风琴，它可以工作。

我们面临的挑战是，当您单击照片并打开fancybox 时，我们希望我们的手风琴盒保持打开状态。它现在似乎可以工作了，只是我们自己的脚本影响了来自 fancybox 的 rel="group" 函数。请参阅下面的脚本。这里有没有人知道为什么这不起作用？

```
$(".fancybox").click(function(event) {
    $('body').append('<a id="temp_fv" class="fancybox" rel="'+$(this).attr('rel')+'" href="'+$(this).attr('href')+'" >fancyview</a>')
    $("#temp_fv").fancybox().trigger('click');
    $('#temp_fv').remove();
    event.stopImmediatePropagation();
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:13:55.777

似乎 nivo 滑块插件正在使用该`rel`属性来进行图片之间的转换，并且它为 fancybox 无效。

作为一种解决方法，添加`data-fancybox-group`属性，而不是像

```
<a href="http://billeder.bilinfo.dk/billeder900/1058700044_1.jpg" data-fancybox-group="group1" class="fancybox"><img src="http://billeder.bilinfo.dk/billeder150/1058700044_1.jpg"></a> 
```

# asp.net-mvc - SelectList 方法 MVC

> ID：14264968
> 
> 赞同：0
> 
> 时间：2013-01-10T18:39:35.110
> 
> 标签：asp.net-mvc

**问题描述：** 我正在使用 ASP.NET MVC，并且我的控制器类中有以下方法。此方法使用 SelectList 方法从数据库中选择项目列表。然后这些项目将被传递给视图以显示在下拉列表中。

```
public ActionResult Edit(int id)
{
    Album album = db.Albums.Find(id);

    ViewBag.ArtistId = new SelectList(db.Artists, "ArtistId", "Name", album.ArtistId);
    return View(album);
} 
```

**我对selectMethod的理解：**

我知道第一个参数需要一个项目列表。
第三个参数是要显示的属性。在这种情况下，我们将显示艺术家的名称属性。根据我的研究，我发现第 4 个参数是下拉列表中显示的默认值。

**我的问题：**

1）我希望有人帮助我了解第二个参数。

2）既然我们要显示艺术家的名字，我们如何使用艺术家ID在第四个参数中显示一个默认的艺术家名字？

我希望你们能理解我的问题。如果您需要我这样做，我很乐意向您澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:46:08.033

1.  第二个参数是第一个参数中每个元素的“值”属性或字段的名称。由于可以想象两个艺术家可能有相同的，因此通常最好使用 ID 列（如示例中所示），以便您具体知道选择了哪个项目。
2.  在示例中，您将提供当前查看专辑的艺术家作为默认显示。假设其中`db.Artists`包含一个`ArtistId`属性与给定值匹配的艺术家，呈现的 HTML 将生成一个选择列表，其中选择了该艺术家。

这回答了你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:49:13.980

根据[文档](http://msdn.microsoft.com/en-us/library/dd492553%28v=vs.108%29.aspx)：

第一个参数是`IEnumerable`从中构造列表的对象。

第二个参数是要用作`value`每个呈现的 HTML`<option>`元素的属性的对象属性的名称（对于列表中的每个对象）。

第三个参数是要用作`text`每个呈现的 HTML 的属性的对象属性的名称（对于列表中的每个对象） `<option>`。

第四个参数是默认选中的`value`（表示将使用该`selected`属性呈现的列表元素）。

# javascript - 未定义函数

> ID：14264976
> 
> 赞同：0
> 
> 时间：2013-01-10T18:40:06.423
> 
> 标签：javascript

我对 JavaScript 非常陌生，我需要一些建议来说明为什么我会收到一条错误消息，`this.node`即`undefined`.

我拥有的是一个`ExtJs`使用 MVC 架构师构建的应用程序。在我的控制器中，我开发了一个包含树和网格的布局。在树中，可以通过单击“新建”按钮添加父节点，并且其方法可以完美运行。

但是，`id`使用用于插入记录的相同表单从我的数据库更新记录的方法正在生成一条消息，说明`this.node`is `undefined`.

这是我的代码`Edit handler`：

```
handleBtnEdit: function (btn, ev, eOpts) {
    console.log(this);
    var id = parseInt(this.node.get("id")), rec = this.app.getStore("ProblemRequirements").getById(id);
    this.launchForm(rec);
}, 
handleBtnAdd: function (btn, ev, eOpts) {
    var rec = Ext.create("SPOT.model.ProblemRequirement");
    this.launchForm(rec);
}, 
handleBtnSave: function (btn, eOpts) {
    var win = btn.up("window"), pnl = win.down("form"), frm = pnl.getForm(), grid = pnl.down("grid"), store = grid.getStore(), rec = frm.getRecord();
    if (frm.isValid()) {
        rec.set(frm.getValues());
        win.setLoading("Saving, please wait...");
        rec.save({
            callback : function(rec, operation) {
                if (operation.success) {
                    win.close();
                    this.getStore("ProblemRequirements").load();
                    this.playMsg("Problem requirement successfully " + (operation.action === "update" ? "updated" : "created" ) + ".");
                } else {
                    win.setLoading(false);
                    Ext.Msg.alert("Error!", operation.error[0].ERROR);
                }
            },
            scope : this
        });
    }
}, 
launchForm: function (rec) {
    Ext.create("Ext.window.Window", {
        buttons : [{
            handler : this.handleBtnSave,
            scope : this,
            text : "Save"
        }, {
            handler : this.handleBtnCancel,
            scope : this,
            text : "Cancel"
        }],
        closable : false,
        draggable : false,
        iconCls : (rec.phantom ? "icon-add" : "icon-edit"),
        items : [{
            listeners : {
                afterrender : {
                    fn : function(pnl, eOpts) {
                        pnl.getForm().loadRecord(rec);
                    },
                    scope : rec
                }
            },
            xtype : "problemrequirementForm"
        }],

        modal : true,
        resizable : false,
        title : (rec.phantom ? "Create a New" : "Edit") + " Problem Requirement",
        width : 500
    }).show();
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:42:27.883

`node`超出范围。您需要确定在什么范围内`node`定义并适当地引用它，或者您需要使其全局可见，或者您需要在本地（`this`）范围内定义它。

考虑这个人为的例子：

```
// Set global window var 'a'
window.a = 'foo';

// Create an object which has it's own scope:
var x = {
    a:'bar',

    speak:function(scope){
        console.log(scope['a']);
    }
}; 
```

然后你可以这样做：

```
// Have x report on its own scope (in function 'speak' this is the same
// as doing: console.log(this['a'])
x.speak(x);

> bar

// Set the scope to the (global) 'window' scope
x.speak(window);

> foo 
```

现在如果我们重新定义`x`它没有 member `a`，并尝试同样的事情：

```
var x = {
    speak:function(scope){
        console.log(scope['a']);
    }
};

x.speak(window);

> foo

x.speak(x);

> undefined 
```

在最后一个例子中，对象`a`的范围内没有`x`，所以结果是`undefined`. 它在全局范围内看不到 ，`a`因为它仅显式检查本地 ( `this`) 范围。

显然这是一个愚蠢的例子，但希望它会有所帮助。

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:47:59.633

用这个版本替换你`handleBtnEdit`的并复制粘贴你的控制台日志。

```
handleBtnEdit: function (btn, ev, eOpts) {
    console.log("-- Start of handleBtnEdit --");

    console.log(btn);
    console.log("-- 1 --");

    console.log(ev);
    console.log("-- 2 --");

    console.log(this);
    console.log("-- 3 --");

    console.log(this.getAttribute("id"));
    console.log("-- 4 --");

    console.log(this.node);
    console.log("-- 5 --");

    //var id = parseInt(this.node.get("id"));
    //var rec = this.app.getStore("ProblemRequirements").getById(id);
    //this.launchForm(rec);
}, 
```

另外，添加调用`handleBtnEdit`.

**更新**

控制台日志：

```
-- Start of handleBtnEdit -- 
btn :: Object { disabled= false , iconCls= "icon-edit" , id= "btn-edit" , more...} 
-- 1 -- 
ev :: Object { browserEvent=Event click, type= "click" , button= 0 , more...} 
-- 2 -- 
this :: Object { application={...}, id= "ProblemRequirements" , hasListeners={...}, more...} 
-- 3 -- 
```

因此，参数通过按钮传递`id= "btn-edit"`。 `this`似乎是一个`Object`with `id= "ProblemRequirements"`。

**更新 2**

由于内部没有节点，`this`而且`id`这似乎不是我们需要的节点，请尝试以下代码：

```
handleBtnEdit: function (btn, ev, eOpts) {
    var id = parseInt(btn.id);
    var rec = this.application.getStore("ProblemRequirements").getById(id);
    this.launchForm(rec);
}, 
```

# c - 返回 C 中的 char 数组和 malloc 用法

> ID：14264979
> 
> 赞同：0
> 
> 时间：2013-01-10T18:40:20.377
> 
> 标签：c

第一次尝试：

```
char* loadValues (char* str) {

  char* toReturn[5];

  .. some operations here ..

  return toReturn

} 
```

这显然会返回警告并且无法正常工作，因为函数完成后内存位置将被释放。

所以我想到了使用 malloc，但是，我不明白这如何与数组一起使用。

第二次尝试：

```
char* loadValues (char* str) {

  char (*toReturn)[5] = malloc(sizeof *toReturn);

  .. some operations here ..

  return toReturn

} 
```

我的`toReturn`包含字符串，例如`toReturn[0]`可能是`"Hello"`

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:02:24.163

据我了解，您希望返回一个指针数组并为该数组的指针分配内存。使用您当前的代码，您不能返回指针数组，因为它是本地的。您可以通过以下方式执行此操作：

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

char** loadValues () {
  char** toReturn;
  int i;
  toReturn = malloc(5*sizeof(char*));
  for(i=0;i<5;i++)
  {
    toReturn[i] = malloc(25); //Change the size as per your need
    strncpy(toReturn[i], "string",i+1); //Something to copy
  }
  return toReturn;
}

int main()
{
  int i; 
  char **arr = loadValues();
  for(i=0;i<5;i++)
  {
    printf("%s\n", arr[i]);
  }

  for(i=0;i<5;i++)
  {
    free(arr[i]);
  }

  free(arr);
  return 0;  
} 
```

请注意，为数组分配的返回类型`loadValues`和内存在`main`.

* * *

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

void loadValues (char **toReturn) {
  int i;
  for(i=0;i<5;i++)
  {
    toReturn[i] = malloc(25); //Change the size as per your need
    strncpy(toReturn[i], "string",i+1); //Something to copy
  }
}

int main()
{
  int i; 
  char *arr[5];
  loadValues(arr);
  for(i=0;i<5;i++)
  {
    printf("%s\n", arr[i]);
  }

  for(i=0;i<5;i++)
  {
    free(arr[i]);
  }

  return 0;  
} 
```

您还应该检查调用是否`malloc`成功并处理错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:49:14.667

malloc 只是通过分配一块内存并返回一个指向开头的指针来工作。这里可能很棘手的是您正在制作的数组不包含字符，它包含*指向*字符的指针，这意味着您不能简单地说

```
char* toReturn[5] = malloc(memory); 
```

据我所知，您需要为 toReturn 的五个字符指针分配足够的内存，然后遍历元素并分配您认为需要的内存。在释放数组本身之前，请格外小心，记住再次遍历数组并释放所有内存。

# c# - 将字符串解析为日期时间

> ID：14264982
> 
> 赞同：-5
> 
> 时间：2013-01-10T18:40:26.710
> 
> 标签：c#

我试图在 DateTime.Now > 开始约会日期的用户输入值时将状态设置为已过期。下面的解析给出了一个错误，因为“在将每个变量放入 datetime 对象之前解析字符串以获取日期”。但我已经解析了字符串以转换为日期时间。

```
 public void updateStatus()
    {           
        var user_time_start = DateTime.Parse(txtDateStart.Text);
        var user_time_end = DateTime.Parse(txtDateEnd.Text);
        var time_now = DateTime.Now;
        //Set Status of Appointment
        if (time_now > user_time_start || time_now < user_time_end)
        {
            cmboStatus.Text = "EXPIRED";
        }
        else
        {
            cmboStatus.Text = "CURRENT";
        }
    } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T18:45:32.033

我建议使用[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)：

```
Datetime start;
DateTime end;
if (DateTime.TryParse(txtDateStart.Text, out start)
  && DateTime.TryParse(txtDateEnd.Text, out end))
{
  DateTime now = DateTime.Now;
  cmbo.Text = (now > start || now < end // inline ternary
    ? "EXPIRED"                         // true value
    : "CURRENT"                         // false value
  );
}
else { /* Error */ } 
```

但是，假设这是一个表单应用程序，您可能需要查看该[`DateTimePicker`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.aspx)控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:09:57.050

这里首先要指出的是，您真的应该使用 TextBox 控件来获取用户对 DateTime 对象的输入吗？

如果您使用正确的控件，则无需解析任何内容。

通过使用 TextBox 控件，您允许用户输入任何内容！？！

开始日期 = “MyPetDog”？

它不是你想要的吗？

添加两个 Date TimePicker 控件和一个按钮并使用以下代码示例：-

```
namespace DateTimePickerTests
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            DTPStartDate.Format = DateTimePickerFormat.Custom;
            DTPStartDate.CustomFormat = "dd/MM/yyyy";
            DTPStartDate.ShowUpDown = true;

            DTPEndDate.Format = DateTimePickerFormat.Custom;
            DTPEndDate.CustomFormat = "dd/MM/yyyy";
            DTPEndDate.ShowUpDown = true;

        }

        private void button1_Click(object sender, EventArgs e)
        {

            DateTime now = DateTime.Now;
            int result = DateTime.Compare(DTPStartDate.Value, now);

            if (result >= 1)
            {
                label3.Text = "Expired";
            }
            else
            {
                label3.Text = "Not Expired";
            }

        }

    }
} 
```

有关更多信息，请参阅此页面：-

[http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)

# wpf - 在 DevExpress 数据网格中的视图上通知模型属性更改

> ID：14264986
> 
> 赞同：2
> 
> 时间：2013-01-10T18:40:38.303
> 
> 标签：wpf, mvvm, datagrid, devexpress

我正在使用 DevExpress 开发 WPF 应用程序，并且还使用 mvvm 模式，并且遇到以下问题：

*   我有一个具有布尔属性的视图模型（例如 IsChecked）
*   我有一个视图，它是一个绑定到上述视图模型项的集合的 devexpress 数据网格
*   该 devexpress 数据网格的一行属于复选框类型，并且绑定到 IsChecked 属性
*   如果 IsChecked 为真，我有一个 devexpress 网格行的数据模板，用于在行中显示一行

当我选中/取消选中数据网格中的复选框列时，所有这些都可以正常工作......问题是当我更改模型属性的值时：视图没有改变......

该模型实现`INotifyPropertyChanged`.

似乎是 DevExpress 为每个项目做了一个包装器，然后当模型的属性发生变化时不会通知视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T18:29:21.907

在搜索 DevExpress 的[支持中心](http://www.devexpress.com/Support/Center/)后，我找不到任何可以帮助我解决这个问题的东西。但是多亏了这个不错的[应用程序（Snoop）](http://code-inside.de/blog-in/2013/01/21/snoop-firebug-for-wpf-applications/)，我得到了解决。

问题是 DevExpress 的网格集合的行为与其他 WPF 的标准集合不同。在任何 WPF 的集合中，每一行（或集合中的项）都在`DataContext`ViewModel（或集合类型的任何类）中。DevExpress 的网格不是那样工作的......

`GridRow`DevExpress 网格中的每个项目在 中都有一个类型`RowData`的对象`DataContext`，每个单元格（类型为`GridCellContentPresenter`）都有一个类型为 的对象`EditGridCellData`。正如我们所看到的，这些对象与我们的集合不同。

那么我们如何在视图模型和网格中的视图行或单元格项之间进行双向绑定呢？

## 如果我们正在制作一个行模板：

`DataContext`每行中的对象是类型`RowData`。这个类型有一个名为 的属性`DataContext`，这个属性是类型的`RowTypeDescriptor`（就像我们的集合类型的包装器）。这不适用于我们的绑定。**但是**该类型`RowData`有一个属性 namde `Row`，我们可以在其中找到我们集合的类型行对象，所以我们唯一要做的就是绑定到这个属性。例如，在这种情况下，如果 bool 字段设置为 true，我们希望一条线穿过我的行：

```
<DataTemplate x:Key="myRowTemplate">
        <Grid>
            <dx:MeasurePixelSnapper>
                <ContentPresenter x:Name="defaultRowPresenter" Content="{Binding}" ContentTemplate="{Binding View.DefaultDataRowTemplate}" />
            </dx:MeasurePixelSnapper>               
            <Path Data="M5.496,10.5 L508,10.5" Fill="#FFF" HorizontalAlignment="Stretch" Height="1" Stretch="Fill" Stroke="#FF040404" VerticalAlignment="Center" Width="Auto" Margin="0" Visibility="{Binding Row.AnyModelBoolProperty, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource IntToVisibilityConverter}}"/>
        </Grid>
    </DataTemplate> 
```

## 如果我们正在制作一个单元格模板：

在这种情况下有点复杂。因为该对象`EditGridCellData`没有任何可以找到集合对象类型的属性。我们在这里唯一能找到的是一个名为的属性`Data`，我们可以在其中找到 type 的对象`RowTypeDescriptor`，所以不能正常工作。我们需要使用祖先类型绑定来解决这个问题。看这个例子：

```
 <dxg:GridColumn x:Name="dateRow" FieldName="Date" Header="Date">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <dxe:DateEdit x:Name="PART_Editor" DateTime="{Binding DataContext.Row.Date, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType={x:Type dx:StackVisibleIndexPanel}}}" IsEnabled="{Binding DataContext.Row.DateEnabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType={x:Type dx:StackVisibleIndexPanel}}}" MinValue="{Binding DataContext.Row.DateMinValue, RelativeSource={RelativeSource AncestorType={x:Type dx:StackVisibleIndexPanel}}}"/>
                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
    </dxg:GridColumn> 
```

在这里，我们有一个日期控件，它将绑定到模型并得到正确的通知。希望这对遇到此问题的每个人都有用。这是一个真正的头痛。

# unix - 记事本中的 NPPExec 控制台

> ID：14264999
> 
> 赞同：0
> 
> 时间：2013-01-10T18:41:27.157
> 
> 标签：unix, notepad++

提前致谢：

我正在尝试使用 Notepad++ 登录 UNIX 系统。我正在使用 NPPExec 控制台来执行此操作，并且登录过程有效……有点。我使用 NPPExec 来执行这个名为“sasunix.sh”的脚本：

"C:\userblah\username\Desktop\plink.exe" -load "SUN4" -l myloginname -pw mypassword

如您所见，我正在使用 Putty 的命令行程序“plink.exe”来发送命令；“SUN4”是我正在使用的会话配置文件。问题是，下一个屏幕让我登录（成功），但继续询问我的密码（这是登录过程的一部分），然后是我的终端仿真设置的请求（对我来说，这个是'xterm'）。

问题：我将在脚本中添加哪些额外的行以在 UNIX 系统上执行此输入序列（即单独输入它们并每次按“ENTER”）：

1.) 密码 2.) xterm 3.) sas -nodms -nonews

我认为这归结为对如何在 NotePad++ 和 NPPExec 控制台窗口之间传递命令的误解。在任何时候，如果我按“F6”，就会弹出一个提示，说“警告：控制台进程仍在运行......”。此消息框提示允许我输入一行，然后将其发送到控制台...但是如何将一系列这些输入放入脚本中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:19:12.777

您现在可能已经解决了这个问题，但我已经完成了以下操作

1.  一个 Windows 批处理脚本，它根据目录路径使用 unix 命令创建文件

    ```
    @ECHO OFF

    :: store input variable

    set str=%1

    :: remove C:\ or Z:\ etc

    set str=%str:~3%

    :: replace \ with /

    set str=%str:\=/%

    :: append cd command

    set str1=cd

    set str=%str1% %str%

    echo.%str%

    :: make

    echo make clean

    echo make all 
    ```

2.  将 NppExec 插件安装到 Notepad++

3.  将 *.bat 脚本和 plink.exe 放在 Notepad++ 程序目录中

4.  创建 NppExec 命令

    ```
    // This line calls the bat file and creates a file tempcmd.sh with unix commands in it
    "$(NPP_DIRECTORY)\unix_make_all.bat" $(CURRENT_DIRECTORY) >tempcmd.sh`

     // This line connects to a remote machine and runs all the commands stored in tempcmd.sh
     "$(NPP_DIRECTORY)\plink.exe" -ssh -2 -l username -pw password 192.168.000.000 -m "$(NPP_DIRECTORY)\tempcmd.sh" 
    ```

5.  使用 NppExec 选项我保存上述命令并在宏菜单中放置一个快捷方式